# StackOverflow 问答 15057000-15057999

# java - 使用 Java2D 图形绘制时在 JScrollPane 中调整滚动条的大小？

> ID：15057002
> 
> 赞同：0
> 
> 时间：2013-02-24T21:45:15.190
> 
> 标签：java, swing, jscrollpane, java-2d

我在 JPanel 上有一个带有视口的 JScrollPanel。我想做一些非常简单的事情：以这种方式绘制小垂直线：| | | | | | | | | |

我通过在 Jpanel 上绘制每条线来做到这一点，当它们太多时，水平滚动条会相应地出现，以便向右滚动以查看最后一条...

我的滚动窗格不会调整其水平滚动条的大小，并且太多的小条只会溢出屏幕并且不显示......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:46:29.387

您需要更新面板的首选大小，并调用 revalidate()。[这](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html#update)是一个例子。

# uiview - 使用presentViewController（或其他技术）显示视图但不是全屏模式？

> ID：15057004
> 
> 赞同：4
> 
> 时间：2013-02-24T21:45:26.097
> 
> 标签：uiview, uiviewcontroller, presentmodalviewcontroller

根据[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)，`presentViewController`只能在 iPhone 和 iPod 的全屏模式下工作。但是，我需要一个类似的功能，它可以显示视图控制器中要加载的视图的某些部分（称为 B）。

给定当前视图控制器 A，我想调出 B 以从用户那里获取一些信息，但出于我的设计目的，它必须位于不同的视图控制器中。

我尝试设置`modalPresentationStyle`不同的值并调整 B 中的视图大小，但它始终在 B 中显示整个视图。

无论如何要在 B 中显示视图的某些部分吗？我正在寻找类似于 twitter 的[popup](http://developer.apple.com/library/ios/#documentation/Twitter/Reference/TWTweetSheetViewControllerClassRef/Reference/Reference.html#//apple_ref/doc/uid/TP40010943)的东西，它是一个视图控制器，可以用`presentViewController`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T07:35:23.843

在 iPhone 和 iPod 上，您不能使用 presentViewController 执行此操作，因为文档说这仅适用于全屏 ViewController。您最好的选择是使用子 ViewController。查看 ViewController 包含指南。[http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html)

# python - 如何停止 cocos2d 中的动作？

> ID：15057006
> 
> 赞同：1
> 
> 时间：2013-02-24T21:45:29.780
> 
> 标签：python, cocos2d-iphone

我有一些使用 Cocos2-x 的经验，但现在我正在尝试使用 Python 中的原始 cocos2d 开发原型，我发现它非常不同。问题是我在图层上有一个精灵

```
class TestLayer(cocos.layer.Layer):
    is_event_handler = True

    def __init__(self):
        super(TestLayer, self).__init__()
        self.sprite = cocos.sprite.Sprite('grossini.png')
        self.sprite.position = 320, 340
        self.add(sprite) 
```

我可以移动它：

```
def on_key_press(self, symbol, modifiers):
    if symbol ==key.RIGHT:
    move = MoveBy((1, 0), 0.1)
    repeat = Repeat(move)
    self.sprite.do(repeat) 
```

但我不知道如何在`on_key_release`方法上阻止它。（在 Cocos2d-x 中我可以做到`this->sprite->stopAction(action)`.

另外我想知道是否有更好的方法（cocos2d Python 方法）通过用户输入移动和停止精灵。

我已经阅读了文档和一些游戏示例，但我在 Python 上编程非常n00b，所以我无法为自己弄清楚这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T23:54:02.613

我从未将 cocos2d 用于 python（仅 cocos2d-iphone），所以我无法回答您的问题，即是否有更好的方法来做到这一点。但是根据您的具体情况，有两种方法可以满足您的要求。

如果您只是想删除精灵上的*所有*`on_key_release()`动作，您需要做的就是调用`stop()`将删除所有动作的精灵对象。因此，如果您唯一的动作是移动动画，这应该足够了。

def on_key_release(self, symbol, modifiers): if symbol == key.RIGHT: self.sprite.stop()

但是，如果您只想停止 sprite 上的特定动作，并且希望保持其他动作运行。然后你需要将动作保存在某处，然后调用`stop()`动作而不是精灵。一个例子可能是这样的：

```
def __init__(self):
    super(TestLayer, self).__init__()
    self.sprite = cocos.sprite.Sprite('grossini.png')
    self.sprite.position = 320, 340
    self.add(sprite)
    self.sprite_move_action = None

def on_key_press(self, symbol, modifiers):
    if symbol ==key.RIGHT:
        move = MoveBy((1, 0), 0.1)
        repeat = Repeat(move)
        self.sprite_move_action = repeat
        self.sprite.do(repeat)

def on_key_release(self, symbol, modifiers):
    if symbol == key.RIGHT and self.sprite_move_action is not None:
        self.sprite.remove_action(self.sprite_move_action)
        self.sprite_move_action = None 
```

# c - 比较c中的版本号

> ID：15057010
> 
> 赞同：6
> 
> 时间：2013-02-24T21:46:14.693
> 
> 标签：c, string-comparison, version-numbering

我在其他语言中看到了很多关于这个问题的答案，但我试图找到一种方法来比较以字符串形式给出的 2 个版本号。例如

```
str1 = "141.1.23"
str2 = "141.1.22" 
```

我试图找到一种方法来比较字符串中的整数值，看看哪个更大。（在这种情况下 str1 会更大）。我考虑过使用 atoi 和 strtok 的组合，但我知道我不能一次标记 2 个字符串。有什么建议吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2019-05-21T15:09:04.003

我真的很想知道为什么人们`sscanf`在 C 语言中有这么复杂的解决方案。这是一个非常简单的解决方案，适用于所有用例的 99%：

```
int compVersions ( const char * version1, const char * version2 ) {
    unsigned major1 = 0, minor1 = 0, bugfix1 = 0;
    unsigned major2 = 0, minor2 = 0, bugfix2 = 0;
    sscanf(version1, "%u.%u.%u", &major1, &minor1, &bugfix1);
    sscanf(version2, "%u.%u.%u", &major2, &minor2, &bugfix2);
    if (major1 < major2) return -1;
    if (major1 > major2) return 1;
    if (minor1 < minor2) return -1;
    if (minor1 > minor2) return 1;
    if (bugfix1 < bugfix2) return -1;
    if (bugfix1 > bugfix2) return 1;
    return 0;
} 
```

在这里，试一试： [https ://ideone.com/bxCjsb](https://ideone.com/bxCjsb)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-24T21:50:39.390

> 我知道我不能一次标记 2 个字符串。

幸运的是，您不需要：创建一个接受字符串的函数，并使用`strtok_r`（使用可重入版本，它更安全）将其解析为三个整数。

```
strunct version_t {
    int major;
    int minor;
    int build;
};

version_t parse_ver(const char* version_str) {
    version_t res;
    // Use strtok_r to split the string, and atoi to convert tokens to ints
    return res;
} 
```

现在您可以调用`parse_ver`两次，获取两个`version_t`值，然后并排比较它们。

PS如果您采用约定总是将前导零填充到特定长度的数字，即确保您写`"141.1.03"`而不是`"141.1.3"`，您可以用字典比较替换整数比较。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-25T02:57:37.070

以下例程比较由真实数字组成的版本号字符串。优点是分隔符无关紧要；例如，它将与 141.01.03、141:1:3 甚至 141A1P3 一起使用。它还处理不匹配的尾部，以便 141.1.3 将位于 141.1.3.1 之前。

```
#include <assert.h>
#include <stdlib.h>

int versionCmp( char *pc1, char *pc2)
{
    int result = 0;
    /* loop through each level of the version string */
    while (result == 0) {
        /* extract leading version numbers */
        char* tail1;
        char* tail2;
        unsigned long ver1 = strtoul( pc1, &tail1, 10 );
        unsigned long ver2 = strtoul( pc2, &tail2, 10 );
        /* if numbers differ, then set the result */
        if (ver1 < ver2)
            result = -1;
        else if (ver1 > ver2)
            result = +1;
        else {
            /* if numbers are the same, go to next level */
            pc1 = tail1;
            pc2 = tail2;
            /* if we reach the end of both, then they are identical */
            if (*pc1 == '\0' && *pc2 == '\0')
                break;
            /* if we reach the end of one only, it is the smaller */
            else if (*pc1 == '\0')
                result = -1;
            else if (*pc2 == '\0')
                result = +1;
            /*  not at end ... so far they match so keep going */
            else {
                pc1++;
                pc2++;
            }
        }
    }
    return result;
}

int main( void )
{
    assert(versionCmp("1.2.3" , "1.2.3" ) == 0);
    assert(versionCmp("1.2.3" , "1.2.4" )  < 0);
    assert(versionCmp("1.2.4" , "1.2.3" )  > 0);
    assert(versionCmp("10.2.4", "9.2.3" )  > 0);
    assert(versionCmp("9.2.4",  "10.2.3")  < 0);
    /* Trailing 0 ignored. */
    assert(versionCmp("01", "1") == 0);
    /* Any single space delimiter is OK. */
    assert(versionCmp("1a2", "1b2") == 0);
    return EXIT_SUCCESS;
} 
```

将`strtoul`s替换为`strcspn`s 和 a `strncmp`，您可以使用它来比较非数字版本的“数字”——但分隔符必须是点。例如，141.3A.1 排在 141.3B 之前。

```
...
while (result == 0) {
    /* ignore leading zeroes */
    pc1 += strspn( pc1, "0" );
    pc2 += strspn( pc2, "0" );
    /* extract leading version strings */
    int len1 = strcspn( pc1, "." );
    int len2 = strcspn( pc2, "." );
    /* if one is shorter than the other, it is the smaller version */
    result = len1 - len2;
    /* if the same length then compare as strings */
    if (result == 0)
        result = strncmp( pc1, pc2, len1 );
    if (result == 0) {
        pc1 += len1;
        pc2 += len2;
        if (*pc1 == '\0' && *pc == '\0')
            ... 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-03T22:02:06.443

**`strverscmp`glibc 扩展**

*   `man strverscmp`
*   [http://www.gnu.org/software/libc/manual/html_node/String_002fArray-Comparison.html](http://www.gnu.org/software/libc/manual/html_node/String_002fArray-Comparison.html)

例子：

```
#define _GNU_SOURCE
#include <assert.h>
#include <stdlib.h>
#include <string.h>

int main(void) {
    assert(strverscmp("1.2.3" , "1.2.3" ) == 0);
    assert(strverscmp("1.2.3" , "1.2.4" )  < 0);
    assert(strverscmp("1.2.3" , "1.2.2" )  > 0);
    assert(strverscmp("9.2.3" , "10.2.3")  < 0);
    assert(strverscmp("10.2.3", "9.2.3" )  > 0);

    /* Delimiers are also compared. */
    assert(strverscmp("1a2", "1b2" ) < 0);
    assert(strverscmp("1b2", "1a2" ) > 0);

    /* Leading 0s: number gets treated as 0.X, e.g. 01 means 0.1.
     * Maybe not perfect for version strings, but sane version strings
     * should not have leading 0s. 
     */
    assert(strverscmp("01", "9" ) < 0);
    assert(strverscmp("01", "09") < 0);
    assert(strverscmp("01", "09") < 0);
    assert(strverscmp("09",  "1") < 0);

    return EXIT_SUCCESS;
} 
```

资料来源：[https ://sourceware.org/git/?p=glibc.git;a=blob;f=string/strverscmp.c;h=96d4227cd50090f3a7c45e7241d817d34e42f5ce;hb=cbc06bc486635347ee0da51d04a82eedf51602d5#l42](https://sourceware.org/git/?p=glibc.git;a=blob;f=string/strverscmp.c;h=96d4227cd50090f3a7c45e7241d817d34e42f5ce;hb=cbc06bc486635347ee0da51d04a82eedf51602d5#l42)

在 Glibc 2.21、Ubuntu 15.10 上测试。

**`filevercmp`来自 gnulib**

又一个 GNU 实现。资料来源：[http ://git.savannah.gnu.org/cgit/gnulib.git/tree/libfilevercmp.c?id=71be4c87c8267369f40fbfab7523ab9847154c02#n125](http://git.savannah.gnu.org/cgit/gnulib.git/tree/libfilevercmp.c?id=71be4c87c8267369f40fbfab7523ab9847154c02#n125)

它用于[`sort -V`](http://git.savannah.gnu.org/cgit/coreutils.git/tree/src/sort.c?id=v8.23#n2586)Coreutils 8.23，其工作原理如下：[https ://stackoverflow.com/a/4024263/895245](https://stackoverflow.com/a/4024263/895245)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-11T15:43:33.740

我们可以按照建议使用 strtok。看看这段代码。为了简化它，我在 C++ 中使用向量，请使用其他容器或数据结构，如初始化为两个字符串的最大长度的数组来保存标记化的元素。

```
vector<char*> tokenize(char *s)
{
    vector<char*> svec;

    char *stp = strtok(s,".");
    while(stp != NULL)
    {
            svec.push_back(stp);
            stp = strtok(NULL,".");
    }
    cout << endl;
    return svec;

}

int version_compare(char *s1, char *s2)
{
    vector<char*> tokens_s1 = tokenize(s1);
    vector<char*> tokens_s2 = tokenize(s2);

    int st1, st2, flag, maxf,result;
    st1 = tokens_s1.size();
    st2 = tokens_s2.size();
    flag = st1 < st2 ? st1 : st2;

    for(int i=0; i < flag ;i++)
    {

            int one = *(tokens_s1[i]);
            int two = *(tokens_s2[i]);
            if(one > two)
                     return 1;
            else if(one < two)
                    return 2;
            else
                    result = 0;

    }
}

    if((st1 == st2) && (result == 0)) return 0;
    return (st1 > st2 ? 1 : 2);

}

int main()
{
    char s1[] = "1.2.3.4";
    char s2[] = "2.2.3.3.3";
    int st;
    st = version_compare(s1,s2);
    cout<<st<<endl;

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-22T01:52:24.827

仅标记第一个不匹配组件的极简 C 版本。使用 strchr() 和 strtoul()。

```
int version_compare(char *s1, char *s2)
{
    char *delim = ".:-";
    while(1) {
        if (*s1 == *s2)  {
            if (!*s1)
                return 0;
            s1++; s2++;
        } else if (strchr(delim, *s1) || !*s1) {
            return -1;
        } else if (strchr(delim, *s2) || !*s2) {
            return 1;
        } else {
            int diff;
            char *end1, *end2;
            diff = strtoul(c1, &end1, 10) - strtoul(c2, &end2, 10);
            if (!diff) {
                c1 += (end1 - c1);
                c2 += (end2 - c2);
            } else {
                return diff;
            }
        }
    }
} 
```

# .net - 为什么即使设置了 CODE_ANALYSIS 编译符号，某些 SuppressMessage 属性仍然存在？

> ID：15057012
> 
> 赞同：0
> 
> 时间：2013-02-24T21:46:16.870
> 
> 标签：.net, visual-studio, attributes, suppressmessage

我正在查看实体框架的代码。

我注意到实体框架 5 的生产 dll 中仍然有一些 SuppressMessage 属性

[![在此处输入图像描述](../Images/ff27e1863f3157e6e956fc6ba13e37eb.png)](https://i.stack.imgur.com/CIfmG.png)

尽管该项目显然是使用 CODE_ANALYSIS 编译符号构建的（如果您查看开源项目）以删除 SuppressMessage 属性，但在某些情况下它仍然存在。

这不只是增加了 dll 的大小（我知道没有运行时性能影响，因为它只是元数据）但是为什么只有一些被解析出来？有数千个没有最终出现在生产 DLL 中。

我还反编译了您从 NuGet 获得的版本，以确保我没有使用错误的设置构建项目。

我使用 EF 代码库作为示例，因为我什至无法获得 CODE_ANALYSIS 编译符号来删除我自己的抑制消息，即使我编译发布

# c# - CollectionBase 没有 IList 实现？

> ID：15057013
> 
> 赞同：0
> 
> 时间：2013-02-24T21:46:17.533
> 
> 标签：c#, .net, ilist, members, collectionbase

谁能向我解释为什么在抽象`CollectionBase`类（`System.Collections`其中派生自`IList`）中没有`IList`实现成员？我认为这是强制性的。

![System.Collection.CollectionBase](../Images/b45adc17caedd00432e8621fd6eaeb5b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:02:52.230

它`IList` [显式地](http://msdn.microsoft.com/en-us/library/ms173157.aspx)实现，因此您需要将您的`CollectionBase`实例强制转换`IList`为访问这些成员。

```
IList list = (IList)collectionBase;
list.Add(...); 
```

# php - 注册后自动登录

> ID：15057015
> 
> 赞同：0
> 
> 时间：2013-02-24T21:46:43.943
> 
> 标签：php, mysql, sql

有人可以帮我登录后自动注册吗，这是我的注册脚本...

```
if (empty($_POST) === false) {
$required_fields = array ('email', 'username', 'password', 'password_again', 'first_name', 'last_name');
foreach ($_POST as $key=>$value) {
    if (empty($value) && in_array($key, $required_fields) === true) {
        $errors [] = 'ALL fields MUST be filled out correctly';
        break 1;
    }
}

    if (empty($errors) === true) {
    if (user_exists($_POST['email']) === true) {
        $errors [] = 'Sorry, the email \'' . $_POST['email'] . '\' is already in use.';   
    }
            if (preg_match("/\\s/", $_POST['email']) == true) {
            $errors[] = 'Your email must not contain any spaces';

    }
            if (user_exists($_POST['username']) === true) {
        $errors [] = 'Sorry, the username \'' . $_POST['username'] . '\' is already in use.';   
    }
    if (preg_match("/\\s/", $_POST['username']) == true) {
            $errors[] = 'Your username must not contain any spaces';

    }
    if (strlen($_POST['password']) < 6)  {
    $errors[] = 'Your password must be in between 6-24 characters long';
    }
    if ($_POST['password'] !== $_POST ['password_again']) {
        $errors[] = 'Your passwords did not match';
    }

}
}
?> 
```

这段代码只注册用户，我也想让它登录，你能不能不要给这个差评

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:59:01.763

注册脚本结束

```
//include your login validation
if(empty($errors)){
   //User->login(); or anything you use for validating logins
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T22:10:21.697

要执行登录，您通常需要为用户创建一个 cookie（使用 PHP 的 setcookie 函数）并初始化保存用户数据（如用户名）的会话变量。

此链接将向您展示如何使用 setcookie() [http://php.net/setcookie](http://php.net/setcookie)

至于会话变量，可以这样任意设置：

$_SESSION['用户名'] = "管理员";

创建一个**安全**的登录脚本需要一些时间，所以我建议使用已经存在的表单并根据您的需要调整它们。为了使其真正安全，您需要对数据库输入、安全登录和使用校验和的表单发布进行严格的完整性检查，以及许多其他要考虑的因素。

# java - 如何使用 Spring-JPA 和 Hibernate 使用 @OneToMany 和 @ManyToOne 注释声明数据库映射

> ID：15057016
> 
> 赞同：0
> 
> 时间：2013-02-24T21:46:46.033
> 
> 标签：java, spring, hibernate, jpa

假设我有以下商业模式：

*用户最多拥有 n 个 Vehicles*。

这是我的**DAO** /用户**域**类：

```
@Entity
@Table(name="USER")
public @Data class User extends AbstractPersistable<Long> {
    @OneToMany(cascade=CascadeType.PERSIST, mappedBy="owner")
    private Set<Vehicle> vehicles = new HashSet<Vehicle>();
} 
```

这是车辆类：

```
@Entity
@Table(name="VEHICLE")
public @Data class Vehicle extends AbstractPersistable<Long> {
    @ManyToOne(optional = false)
    @JoinColumn(name = "user_id")
    User owner;
} 
```

我希望能够像这样为新用户保存新车辆：

```
User user = new User();
user.setName("Fred"); // other setters omitted

Vehicle vehicle = new Vehicle();
vehicle.setEngine("..."); // other setters omitted 

user.getVehicles().add(vehicle);
userService.saveUser(user); 
```

**userService.saveUser()**是一个服务层方法，被注释为*@Transactional*并调用 userRepository.save(user); （参见底部的 Repository 类的摘录）

* * *

***现在有几个问题，因为我的解决方案没有按预期工作：***

**1.**是否可以只保存用户对象并让用户对象内的 Vehicle-Set 自动持久化？
**2.**这是最佳实践吗？我知道用户是拥有实体。我希望在删除用户时删除用户的所有车辆。
**3.**或者我是否总是需要做一些类似*vehicle.setOwner(user);的事情？*?
**4.**从您的角度来看，对此的最佳解决方案是什么？

我阅读了很多关于拥有实体和 JoinColumn/mappedBy 的内容。然而现在我比以前更困惑了。

* * *

此外，这是我的 UserRepository 的摘录：

```
import org.springframework.data.jpa.repository.JpaRepository;
import org.myproject.domains.User;

public interface UserRepository extends JpaRepository<User, Long> { 
User findByLoginName(String loginName); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:57:54.267

`CascadeType.PERSIST``vehicles`如果只有持续情况，则持续设置。

我建议你使用`CascadeType.ALL`. 因此`vehicles`，当您删除用户时将被删除，并且如果您更新/保留用户，车辆将被更新/保留。

*如果您想从*车辆访问**用户，则**vehicle.setOwner(user)*是必需的。*

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:14:25.297

您当然需要`User`在`Vehicle`实体对象中设置引用，否则 Hibernate 将无法识别该关系。

我也建议使用`@OneToMany`with

*   `cascade=CascadeType.ALL`用于正确的级联操作（请注意，通常您根本不会`Vehicle`单独触摸`User`）
*   `fetch = FetchType.EAGER`避免`LazyInitializationException`（请注意，您的 JPA 配置中不能有超过 1 个 EAGER 关系）
*   `orphanRemoval = true`用于在用户更新后清理“不必要的”车辆**

# php - 无法让我准备好的陈述发挥作用

> ID：15057020
> 
> 赞同：-3
> 
> 时间：2013-02-24T21:47:02.990
> 
> 标签：php, pdo

我有以下功能：

```
function get_config($name = '')
{   
    $config = array();
    $row = array();
    $sql = "SELECT * FROM ".$GLOBALS['prefix']."config ";
    if ('' != $name) {$sql .= " WHERE name = '". $name ."'";}
    $result = $GLOBALS['conn']->query($sql);
    while ($row = $result->fetch()) {$config[$row['name']] = $row['value'];}
    if ('' != $name){return $config[$name];}
} 
```

我用它来调用我所有的站点设置。我想为此使用准备好的语句。

这是我添加准备语句时所做的：

```
function get_config($name = '')
{   
    $config = array();
    $row = array();
    $sql = "SELECT * FROM config";
    if ('' != $name) {
    $sql .= " WHERE name = 'home'";
    }
    $result = $GLOBALS['conn']->prepare($sql, array(PDO::ATTR_CURSOR => PDO::CURSOR_FWDONLY));
    $result->execute(array(':name' => $name));
    while ($row = $result->fetch()) {
    $config[$row['name']] = $row['value'];
    }
    if ('' != $name) {
    return $config[$name];
    }
} 
```

但现在该功能不起作用。为什么不工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T22:36:11.530

[从（现已删除）副本](https://stackoverflow.com/questions/15057241/pdo-prepare-stopped-the-function-from-working)中迁移我的答案。

您正在使用`:name`占位符执行语句，但查询本身不存在：

```
function get_config($name = 'home')
{   
    $config = array();
    $row = array();
    $sql = "SELECT value FROM config WHERE name = :name";

    $result = $GLOBALS['conn']->prepare($sql, array(PDO::ATTR_CURSOR => PDO::CURSOR_FWDONLY));
    $result->execute(array(
        ':name' => $name
    ));

    return array(
        $name => current($result->fetchALL(PDO::FETCH_COLUMN, 0))
    );
} 
```

**发生了什么变化**

两个主要变化：

```
function get_config($name = 'home') 
```

不带参数调用函数时，`$name`默认为`'home'`.

```
return current($result->fetchAll(PDO::FETCH_COLUMN, 0)); 
```

返回一个数组，`fetchAll()`每个数组条目中只有第一列。应用`current()`它返回第一个（也是唯一的）数组条目，或者`false`如果数组为空。

**警告**

`$GLOBALS`不推荐使用来自的数据库句柄；最好将实例传入`get_config()`或`get_config()`作为类中的方法，在其构造函数中作为数据库句柄接收。

# java - 无法为 JSP 编译类（eBay 交易 API 示例 - 登录重定向）

> ID：15057021
> 
> 赞同：0
> 
> 时间：2013-02-24T21:47:10.777
> 
> 标签：java, jsp, web-applications, tomcat7, ebay-api

我正在尝试使用 SDK 附带的 eBay 示例应用程序（签名重定向）。

我已将应用程序复制到 webapps 目录并进行了适当的更改以使其运行。

现在我收到了这个错误。

```
org.apache.jasper.JasperException: Unable to compile class for JSP: 

An error occurred at line: 16 in the generated java file
Only a type can be imported. signinredirect.Global resolves to a package

An error occurred at line: 18 in the jsp file: /credentials.jsp
Global cannot be resolved
15:   String signInURL = ""; 
16:   String ApiServerUrl = "";
17:   String reqError ="";
18:   String devId = Global.getProperty("devId");
19:   String certId = Global.getProperty("certId");
20:   String appId = Global.getProperty("appId");
21:   //runame of this sample application 
```

jsp代码：

```
<html>
<head>
<title>
eBay signin redirection sample with new token fetch flow
</title>
</head>
<body bgcolor="#ffffff">
<%@ page import="com.ebay.sdk.*" %>
<%@ page import="com.ebay.sdk.call.*" %>
<%@ page import="signinredirect.Global" %>
<%@ page import="java.net.URLEncoder" %>
<%@ page errorPage="errorPage.jsp" %>

<%
  String signInURL = ""; 
  String ApiServerUrl = "";
  String reqError ="";
  String devId = Global.getProperty("devId");
  String certId = Global.getProperty("certId");
  String appId = Global.getProperty("appId");
  //runame of this sample application
  String runame = Global.getProperty("runame");

  if (request.getParameter("goToSignin") != null ) {
        reqError="";

        int environment = Integer.parseInt(request.getParameter("EnvList"));
        if (environment == 1 ) {
            // Sandbox
            signInURL =Global.getProperty("sandboxSignInUrl");
            ApiServerUrl = Global.getProperty("sandboxAPIUrl");

        } else if (environment ==2) {
            // Production
            signInURL = Global.getProperty("ebaySignInUrl");
            ApiServerUrl = Global.getProperty("ebayAPIUrl");

        }

        //Get the Credentials Information 
        devId = request.getParameter("DevID");
        if(devId.length() == 0 )
         throw new SdkException("Please enter developer ID.");
        appId  = request.getParameter("AppID");
        if( appId.length() == 0 ) 
         throw new SdkException("Please enter application ID.");
        certId = request.getParameter("CertID");
        if( certId.length() == 0 ) 
         throw new SdkException("Please enter certificate ID.");
        //Get the runame
        runame = request.getParameter("RuName");
        if(runame.length() == 0)
         throw new SdkException("Please enter runame of the sample application");

        ApiContext apiContext = Global.createApiContext(devId, appId, certId, ApiServerUrl );
        ApiLogging apiLogging = new ApiLogging();
        apiContext.setApiLogging(apiLogging);
        session.setAttribute("apicontext", apiContext );

        GetSessionIDCall api = new GetSessionIDCall(apiContext);
        api.setRuName(runame);

        String ruParams="params="+runame +"-"+(environment==1?"Sandbox":"Production");

        try {

             String sessionID = api.getSessionID();
             String encodedSesssionIDString =URLEncoder.encode(sessionID,"UTF-8");           

             session.setAttribute("sessionID", sessionID);           
             response.sendRedirect(response.encodeRedirectURL(signInURL + "&RuName=" + runame + "&SessID=" + encodedSesssionIDString + "&ruparams=" + ruParams));     

        } catch(SdkHTTPException ex) {
            reqError = "Call failed: " + ex.getMessage();
        } catch(Exception ex) {
            reqError = ex.getMessage();
        } 
}
%> 
```

Java 类 Global 存在。看来导入失败了。有人能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:52:32.617

这意味着 signinredirect.Global 是一个包，而不是一个类。试试这个：

```
<%@ page import="signinredirect.Global.*" %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:57:29.407

我必须创建一个新的 Web 应用程序项目，而不是从 sdk 复制示例应用程序。

# android - 有没有办法在旧的 Android 设备（甜甜圈）上升级 API 级别？

> ID：15057031
> 
> 赞同：3
> 
> 时间：2013-02-24T21:48:25.740
> 
> 标签：android, api, upgrade, donut-chart

在没有目标的情况下到处搜索之后，我想问你一些事情，Android 开发者：

有没有办法将旧 Android 版本（如 Donut）的 API 级别升级（编译 API 或其他方式）到更“可用”的级别（如 Eclair 或 Froyo 上的级别）？

我的场景：我有一个非常旧的 Galaxy I7500，运行 Galax0（Donut-1.6），只是想在上面进行一些有趣/编程/低级编程。我知道所有的困难（因为它只有大约 96 Mb 的实际可用内存，所以我必须训练我的算法优化技能），但既然我说“我想找点乐子”，它包括使用一些更新的应用。

如果无法本地移植 API，有没有办法将它们包含在我的应用程序有效负载中？

一个名为 Drakaz 的 Android 开发人员派生了一个 CM（Froyo 和 GB）并为这个设备构建，但 Galax0 仍然表现更好，所以这就是我想将更新的 API 移植到这个旧的 Android 版本的原因。

是的，我还有另一个设备可以玩（使用 ICS）=）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T21:51:12.397

Android API 不是可以更新的简单 jar。设备具有的 Android API 对应于他们安装的 Android 版本。事实上，它们是一回事（从技术上讲。顾名思义，API 级别是为开发人员设计的）。[这里](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels)有一个 API 级别列表：Android 版本。

简而言之，如果不更新设备上的 Android 版本，就无法更新设备的 API 级别。

# linux - 如何用一个命令编辑文件？

> ID：15057033
> 
> 赞同：3
> 
> 时间：2013-02-24T21:48:39.360
> 
> 标签：linux, bash, configuration

我有个问题：

如何在不使用编辑器打开文件的情况下编辑文件（例如 php.ini）？我只能通过 SSH/SOAP 使用一个命令，所以我尝试删除文件并将其写入新文件，但这很慢并且效果不佳。

例如，我想用一个命令编辑`post_max_size = 8M`它`post_max_size = 32M`。那可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T21:50:48.030

流编辑 - 也称为“sed”是你的朋友。

```
sed 's/post_max_size = 8M/post_max_size = 32M/' infile > outfile

sed -i 's/post_max_size = 8M/post_max_size = 32M/' inplace_file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T21:57:12.190

你当然也可以使用 GNU [ed](http://www.gnu.org/software/ed/)。

但是，我认为您应该使用一些版本控制系统（如`git`）。然后你可以编辑它（在你的本地 Linux 笔记本电脑上），并适当地传输它（例如`git commit`+`git push`在本地笔记本电脑`git pull`上和远程主机上）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T21:53:17.007

使用 perl one liner...当然可以随意更改下面的行以对其进行自定义并使其更具选择性。

```
perl -p -i -e 's/8M/32M/g' file_name 
```

# c++ - 使用 MonoDevelop 4.0 aka Xamarin Studio 重新获得 C/C++ 项目支持

> ID：15057041
> 
> 赞同：3
> 
> 时间：2013-02-24T21:49:49.983
> 
> 标签：c++, c, project, monodevelop, xamarin-studio

使用最新的 Xamarin Studio（从 MonoDevelop 4.0 重新标记），我无法再打开`.cproj`在 MonoDevelop 3.0.4.7 中工作的项目。

[功能列表](http://monodevelop.com/Documentation/Feature_List)显示它在 Windows 上不受支持，但它还显示“页面上次修改时间为 2010 年 10 月 27 日 09:53”……</p>

有没有办法重新添加语言绑定？我需要自己重新编译吗？也许有一个用于 Windows 的旧 MonoDevelop 二进制文件的镜像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:28:23.160

Windows 上的 MonoDevelop 从未支持 C/C++，但据报道，一些用户能够使其在 mingw32 环境中工作。不幸的是，该插件意外地包含在 Windows 的某些 MonoDevelop 3.0.x 版本中。

理论上，您可以从 Mac/Linux 机器上复制 C/C++ 插件 dll，或者在 Windows 上从源代码构建它，然后将其放入您的 Xamarin Studio 安装中。如果您提供修复以使其在 Windows 上正常运行，它将在未来的 XS 版本中发布 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T06:59:43.910

我不知道您是否可以添加对 Xamarin Studio 4.0 的支持，但如果您想使用旧版本的 MonoDevelop，可以在此处获得二进制文件：http: [//sourceforge.net/projects/monodevelop.mirror/files/](http://sourceforge.net/projects/monodevelop.mirror/files/)

# multithreading - 发生死锁的必要条件与充分条件

> ID：15057043
> 
> 赞同：0
> 
> 时间：2013-02-24T21:50:01.740
> 
> 标签：multithreading

如果多线程应用程序中的任何线程在任何给定时间都没有获得超过一个任何类型的锁，并且这些锁总是在某个时刻被释放，那么死锁可能吗？

我想答案是“不”——如果另一个线程想要一个不可用的锁，它不会持有任何锁来阻止任何其他线程运行，并且只会阻塞直到它想要的锁变得可用——真的吗？

如果是这样，死锁在什么时候成为可能？例如，如果除一个之外的所有线程一次都不会获得一个以上的锁，那会造成死锁吗？就个人而言，我看不出如何。

典型的死锁情况是，一个线程拥有锁 A，但需要锁 B，而另一个线程拥有锁 B 并需要锁 A。显然，这对于死锁来说已经足够了，但这是最低限度的必要条件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T04:55:30.753

> 操作系统高级概念的摘录
> 
> 以下4个条件是发生死锁的必要条件
> 
> 1.独占访问-对资源的单一访问
> 
> 2.Wait while hold - 当你已经拥有一个或多个资源时等待另一个资源
> 
> 3.无抢占——释放资源的唯一方法是让进程死掉
> 
> 4.循环等待——对所需资源存在循环依赖
> 
> 如果系统满足以上四个条件，则系统容易出现死锁

您提到的情况是一个请求模型，其中只有一个资源请求，没有等待和等待，因为资源在一个时间点被释放。因此没有死锁

但是，如果请求 2 个或更多资源，则可能有多种方法可以满足上述所有条件。

您提供的示例是循环等待的典型案例。一种解决方案是使用层次结构，即在锁 B 之前获取锁 A ...这将防止循环等待。

我建议阅读 AND REQUEST MODEL，OR REQUEST MODEL，P OUT OF Q REQUEST MODEL，当然还有 ONE REQUEST MODEL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:53:25.547

如果一个线程锁定，并且另一个线程想要获得同一个锁对象上的锁，但第一个线程永远不会释放它的锁（可能是因为第一个线程正在等待必须由第二个线程设置的条件），则可能发生死锁，但第二个线程永远不会设置该条件，因为它无法获得锁）。

如您所见，故意制造死锁实际上是一件很容易的事情。

# php - PHP 文件创建/修改时间

> ID：15057046
> 
> 赞同：0
> 
> 时间：2013-02-24T21:50:28.197
> 
> 标签：php, shell-exec, filemtime

我有一个 PHP 站点，它接受用户上传的文件，并且需要在数据库中存储文件创建/修改（在这种情况下它们应该是相同的）日期/时间。

我尝试了几种方法。这些似乎都没有回报：

```
$metadata = stat($localfile);
$timestamp = $metadata[9];
die($timestamp);

$metadata = stat($localfile);
$timestamp = $metadata[10];
die($timestamp);

$metadata = filemtime($localfile);
die($metadata);

$metadata = filectime($localfile);
die($metadata); 
```

所以我尝试了一种基于`ls -l`. 这至少会返回一些东西，尽管在上传文件时似乎会覆盖时间，从而使输出变得无用（即它返回当前时间）。

Linux/PHP 5.4 上是否有任何可靠的方法可以返回文件上传之前的创建/修改日期/时间？

NB`$localfile`是本地系统上文件的路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:57:39.407

stat() 函数产生一个关联数组。对于修改时间，使用 $stat['mtime'] 和创建时间 $stat['ctime']。这与服务器的文件副本有关。

文件在上传时不会从计算机“移动”到服务器，数据流会在移动到网络服务器位置之前复制到临时目录中的新文件中。浏览器也不发送修改时间戳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T22:44:14.670

据我所知，PHP 无法找到文件修改时间的历史记录。Linux（不添加任何额外工具）保持三倍访问/修改/更改

```
ls -ce
ls -le
ls -ue 
```

除非您在 linux 中找到审计工具来为您执行此操作，否则无法获取文件修改的“历史记录”。因此 PHP 将不支持您尝试执行的操作。

**该数据库用于精确存储对文件的修改历史，使用它。**

# javascript - Google Drive API children.list

> ID：15057047
> 
> 赞同：1
> 
> 时间：2013-02-24T21:50:34.113
> 
> 标签：javascript, google-drive-api

我正在尝试制作 javascript 代码来列出 Google Drive 根目录中所有文件的名称。仅供参考：我是 javascript 新手。

对于第一个函数，我从[https://developers.google.com/drive/v2/reference/children/list](https://developers.google.com/drive/v2/reference/children/list)复制了代码。

接下来的两个函数是我自己的代码。我的结果只是一堆“[object Object]、[object Object]、[object Object]、[object Object]”。此输出与我在 Google Drive 根文件夹中的文件数量相匹配。但是，我想要文件名或 ID，但除了“[object Object]”之外，我似乎什么也得不到。

我尝试将“resp.items”更改为“resp.kind”或“resp.selflink”，但后来我得到“未定义”。任何人都知道如何获取有关文件的任何特定信息？如果重要，范围是“ [https://www.googleapis.com/auth/drive](https://www.googleapis.com/auth/drive) ”。

```
function retrieveAllFilesInFolder(folderId, callback) {
  var retrievePageOfChildren = function(request, result) {
    request.execute(function(resp) {
      result = result.concat(resp.items);
      var nextPageToken = resp.nextPageToken;
      if (nextPageToken) {
        request = gapi.client.drive.children.list({
          'folderId' : folderId,
          'pageToken': nextPageToken
        });
        retrievePageOfChildren(request, result);
      } else {
        callback(result);
      }
    });
  }
  var initialRequest = gapi.client.drive.children.list({
      'folderId' : folderId
    });
  retrievePageOfChildren(initialRequest, []);
}

function printToOutdiv (result){document.getElementById("outdiv").innerHTML=result;}

function GetFilesButton (){
    gapi.client.load('drive', 'v2', function() {retrieveAllFilesInFolder('root',printToOutdiv);} );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:09:15.953

您得到的结果是一个可以按索引访问的对象数组，如`result[0]`,`result[1]`等。

一旦获得对这些对象之一的引用，您就可以访问其属性（例如 id），如`result[0].id`.

# ruby-on-rails-3 - 雾 gem 上传失败并出现 Excon::Errors::HTTPStatusError

> ID：15057053
> 
> 赞同：1
> 
> 时间：2013-02-24T21:51:00.823
> 
> 标签：ruby-on-rails-3, carrierwave, fog

我无法弄清楚为什么我会在 Fog 1.9.0、rails 3.12 和carrierwave 中出现这个错误

```
Completed 500 Internal Server Error in 3256ms

Excon::Errors::HTTPStatusError (Expected(200) <=> Actual(0 Unknown)
  request => {:chunk_size=>1048576, :connect_timeout=>60, :headers=>{"User-Agent"=>"fog/1.9.0", "Content-Length"=>217719, "Content-Type"=>"image/jpeg", "x-amz-acl"=>"private", "Cache-Control"=>"max-age=315576000", "Date"=>"Sun, 24 Feb 2013 20:48:15 +0000", "Authorization"=>"REDACTED", "Host"=>"myproject.s3-website-eu-west-1.amazonaws.com:80"}, :idempotent=>true, :instrumentor_name=>"excon", :middlewares=>[Excon::Middleware::Instrumentor, Excon::Middleware::Expects, Excon::Middleware::Mock], :mock=>false, :nonblock=>true, :read_timeout=>60, :retry_limit=>4, :ssl_ca_file=>"/Users/tomi/.rvm/gems/ruby-1.9.3-p194/gems/excon-0.18.5/data/cacert.pem", :ssl_verify_peer=>true, :write_timeout=>60, :host=>"myproject.s3-website-eu-west-1.amazonaws.com", :path=>"/uploads%2F2013%2F2013-02-23_photos_e__2-3%2Fphotos%2Fp000000048.jpg", :port=>"80", :query=>nil, :scheme=>"http", :user=>nil, :password=>nil, :family=>0, :body=>#<File:/Users/tomi/git/memo/public/uploads/tmp/20130224-2048-23069-6236/20090101_003.jpg>, :expects=>200, :method=>"PUT", :retries_remaining=>1}
  response => {:body=>"", :headers=>{}, :status=>0, :remote_ip=>"178.236.4.60"}):
  app 
```

当我保存负责上传到 s3 的记录时会发生这种情况

我的雾配置

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider               => 'AWS',                        # required
    :aws_access_key_id      => 'xxxxxx',                        # required
    :aws_secret_access_key  => 'xxxxxx',                        # required
    :region                 => 'eu-west-1',                  # optional, defaults to 'us-east-1'
    #:hosts                  => 's3.example.com',             # optional, defaults to nil
    :endpoint               => 'http://s3-website-eu-west-1.amazonaws.com' # optional, defaults to nil
  }
  config.fog_directory  =  BUCKET_NAME                    # required
  config.fog_public     = false                                   # optional, defaults to true
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:31:23.183

Carrierwave 自述文件指定您使用 1.3.1。我想我在使用最新的雾时也有问题。这应该可以工作：

```
gem "fog", "~> 1.3.1" 
```

[https://github.com/jnicklas/carrierwave](https://github.com/jnicklas/carrierwave)

# flash - Flash 按钮在网站上不起作用

> ID：15057055
> 
> 赞同：0
> 
> 时间：2013-02-24T21:51:05.270
> 
> 标签：flash, web

我为我的网站建立了一个 Flash 标头。[http://www.jjwallace.info/](http://www.jjwallace.info/)

使用 URL www.jjwallace.info/ 访问时

我的博客和投资组合按钮不起作用。

使用 URL [http://jjwallace.info/访问时](http://jjwallace.info/)

一切正常。

我到处寻找这个问题，但我不确定发生了什么。

我猜我的 .htaccess 文件可能会限制我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:09:43.810

我看到你使用绝对网址

`getURL("http://jjwallace.info/portfolio", "");`

改用相对

`getURL("/portfolio", "");`

并在 html 中使用相对路径到 swf

`<param name="movie" value="/jj_banner.swf">`

# javascript - 由图像 JS 制成的网站介绍动画

> ID：15057063
> 
> 赞同：-1
> 
> 时间：2013-02-24T21:51:27.697
> 
> 标签：javascript, html, animation

所以我有 6 个 png-s，我想将它们编译成网站的介绍动画。它应该自动启动，完成后将我们带到索引页面。我希望它适用于所有设备。我想它可以用 JS 来完成，所以你知道有什么好的教程吗，我似乎找不到它。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:55:50.490

使用 jQuery...

```
1) pre-load the images
2) Create a div on the page
3) create a function, call it once
4) in the function, update the content of the div with the next image, update a variable (to tell what image is next) and call the function from within itself with setTimeout()
5) Once all images have been shown, direct the user to some page via document.location = "http://....." 
```

由于所有图像都是预加载的，因此它应该运行流畅。升

编辑：或创建一个 gif，并在 X 秒后重定向用户......

# android - Android 滚动视图不起作用 - 1 个主要子线性布局

> ID：15057068
> 
> 赞同：0
> 
> 时间：2013-02-24T21:52:00.510
> 
> 标签：android, eclipse, android-layout

这是我的代码：1 个子元素，其他相关布局元素嵌套在主元素中，因此它为滚动视图创建了 1 个子元素。

我正在为 Nexus 7 创建这个，但是当我在 HTC Desire HD 滚动视图中检查它时不起作用，它只是切断了最后一个“RelativeLayoutGerman”。

有任何想法吗？

代码：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/mainScroll"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" >

    <RelativeLayout
        android:id="@+id/relativeLayoutMain"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/backrepeat"
        android:gravity="clip_vertical"
        tools:context=".MainActivity" >

        <RelativeLayout
            android:id="@+id/relativeLayoutMainHeader"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:background="@drawable/bghead"
            android:orientation="vertical" >
        </RelativeLayout>

        <RelativeLayout
            android:id="@+id/relativeLayoutMainGerman"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/relativeLayoutMainSlovenscina"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/textViewMainGerman"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/imageViewMainLine3"
                android:layout_centerHorizontal="true"
                android:layout_marginTop="20dp"
                android:text="@string/mainGerman"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textColor="#9B7D66" />

        </RelativeLayout>

        <RelativeLayout
            android:id="@+id/relativeLayoutMainSlovenscina"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/relativeLayoutMainEnglish"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/textViewCategoriesDrinks"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerHorizontal="true"
                android:layout_marginBottom="20dp"
                android:layout_marginTop="20dp"
                android:text="@string/mainSlovene"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textColor="#9B7D66" />

            <ImageView
                android:id="@+id/imageViewMainLine1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/imageViewTopLine2"
                android:layout_centerHorizontal="true"
                android:contentDescription="@string/descrLine"
                android:src="@drawable/middleline" />

            <ImageView
                android:id="@+id/imageViewTopLine2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/textViewCategoriesDrinks"
                android:layout_centerHorizontal="true"
                android:contentDescription="@string/descrLine"
                android:src="@drawable/line_top" />

        </RelativeLayout>

        <RelativeLayout
            android:id="@+id/relativeLayoutMainEnglish"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/relativeLayoutMainHeader"
            android:layout_marginTop="20dp"
            android:clickable="true"
            android:onClick="selectEnglish"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/textViewMainEnglish"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/relativeLayoutMainHeader"
                android:layout_centerHorizontal="true"
                android:layout_marginBottom="20dp"
                android:layout_marginTop="20dp"
                android:text="@string/mainEnglish"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textColor="#9B7D66" />

            <ImageView
                android:id="@+id/imageViewMainLine3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/imageViewTopLine1"
                android:layout_centerHorizontal="true"
                android:src="@drawable/middleline" />

            <ImageView
                android:id="@+id/imageViewTopLine1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/textViewMainEnglish"
                android:layout_centerHorizontal="true"
                android:contentDescription="@string/descrLine"
                android:src="@drawable/line_top" />

        </RelativeLayout>

    </RelativeLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:37:32.590

尝试将 更改`ScrollView`为 a `LinearLayout`（您可能需要删除该`android:fillViewport="true"`行），然后`ScrollView`在`LinearLayout`.

如果您需要页面底部的某些内容（假设您正在执行与[此类](http://www.curious-creature.org/2010/08/15/scrollviews-handy-trick/)似的操作），这是我发现的一个小技巧。

```
<FrameLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="100"
    android:duplicateParentState="false" >

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:clipChildren="false"
        android:clipToPadding="true" >

</ScrollView>
</FrameLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:gravity="center_horizontal" >

</LinearLayout> 
```

# jquery - 根据单选按钮单击显示和隐藏 div

> ID：15057075
> 
> 赞同：1
> 
> 时间：2013-02-24T21:52:24.853
> 
> 标签：jquery, show-hide

我的 html 和 jquery 代码在这里。这是一个非常简单的测试，但它仍然无法工作..

**这是html：**

```
 <p>Select a question to see the answer.</p>
  <div id="questionArea" class="questionArea" >
    Question 1 <input type="radio" id="question1" class="question" name="radioGroup1" />
    Question 2 <input type="radio" id="question2" class="question" name="radioGroup1" />
    Question 3 <input type="radio" id="question3" class="question" name="radioGroup1" />
  </div>

  <div id="answerArea" class="answerArea">
    <div id="answer1" class="answer">First Answer</div>
    <div id="answer2" class="answer">Second Answer</div>
    <div id="answer3" class="answer">Third Answer</div>
  </div> 
```

**这是jQuery：**

```
 $(document).ready(function() {
  $(".answerArea").hide();
  $("input[$name='radioGroup1']").click(function() {
            var answer = $(this).val();
            $(".answerArea").hide();
            $("#" + answer).show();
        });
    });
}); 
```

这是另一种显示/隐藏的方法，虽然这不是一个好方法，但我只想知道为什么它不能工作..

```
 $(document).ready(function () {

            $("div.answerArea").hide();

                $('#question1').click(function () {
                    $('#answer2').hide('fast');
                    $('#answer3').hide('fast');
                    $('#answer1').show('fast');

                });

                $('#question2').click(function () {

                      $('#answer1').hide('fast');
                      $('#answer3').hide('fast');
                      $('#answer2').show('fast');

                 });

                   $('#question3').click(function () {

                      $('#answer1').hide('fast');
                      $('#answer2').hide('fast');
                      $('#answer3').show('fast');

                 });

    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T21:57:32.193

`$(".answerArea").hide();`隐藏包含答案的父元素。如果父项被隐藏，则无法显示子项。

我会使用孩子的索引来做到这一点：

```
$(document).ready(function() {
    $(".answer").hide();

    $(".question").click(function() {
        $(".answer").hide().eq($(this).index()).show();
    });
}); 
```

这将隐藏所有答案元素，然后显示与问题对应的元素。

# java - 无法将包含 main 方法的类中的数组值传递给不同的类

> ID：15057080
> 
> 赞同：-1
> 
> 时间：2013-02-24T21:52:47.247
> 
> 标签：java

我们的老师要求我们创建一个程序，该程序将根据 LIFO 原理复制堆栈的工作，并指示堆栈溢出和空堆栈。

我创建了三个类。Retrievee 类包含 main 方法，该方法使用 String[] 参数从用户那里获取输入。其他类 Push 使用 Retrievee 中的值 类 Push 应根据其大小接受值，并检查值是否超过其大小，并声明溢出并继续到使用 Class push 中的值而不是检索的类 Pop。

```
class Push extends Retrivee
{
  int i;
  Push()
  {
    String push[]= new String[10];
    //int push[]=new int[10];
    for(i=0;i<12;i++)
    {
      //Retrivee ele= new Retrivee();
      push[i]=a[i];
      System.out.print("value in Push["+i+"]="+push[i]);
      if( i == 9 )
         {
           System.out.print("Stack for push has Overflown");
         }
    }
  }
}

class Pop extends Push
{
  int i;
  Pop()
  {
    String pop[]= new String[10];
    //int pop[]= new int[10];
    for(i=10;i>=-1;i--)
    {
      //Push ele1= new Push();
      pop[i]=push[i];
      System.out.print("value in Pop["+i+"]="+pop[i]);
      if(i == -1)
      {
       System.out.print("Stack for pop is empty");
      }
    }
  }
}
public class Retrivee
{
    public static void main(String args[] )
    {
        System.out.println("please enter 12 elements");
        String a[] = new String[13];
        //int a[]=new int [13];
        a[1]=args[1];
        a[2]=args[2];
        a[3]=args[3];
        a[4]=args[4];
        a[5]=args[5];
        a[6]=args[6];
        a[7]=args[7];
        a[8]=args[8];
        a[9]=args[9];
        a[10]=args[10];
        a[11]=args[11];

    /*
        a[0]=Integer.parseInt (args[0]);
        a[1]=Integer.parseInt (args[1]);
        a[2]=Integer.parseInt (args[2]);
        a[3]=Integer.parseInt (args[3]);
        a[4]=Integer.parseInt (args[4]);
        a[5]=Integer.parseInt (args[5]);
        a[6]=Integer.parseInt (args[6]);
        a[7]=Integer.parseInt (args[7]);
        a[8]=Integer.parseInt (args[8]);
        a[9]=Integer.parseInt (args[9]);
        a[10]=Integer.parseInt (args[10]);
        a[11]=Integer.parseInt (args[11]);
     */

     /* Push push1 =new Push();
        Pop pop1 =new Pop();

     */
    }
} 
```

在编译时我得到了错误

```
 Retrivee.java:11:error :cannot find symbol
    push[i]=a[i];
    symbol: variable a
    location:class Push
 Retrivee.java:31:error :cannot find symbol
    pop[i]=push[i];
    symbol: variable push
    location:class Pop 
```

所以我最后想也许从 String[] args 中获取的值不能传递给另一个类。所以稍微改进了代码。

```
class Push //extends Retrive
{
    public Push()
    {
        int i;
        String push[]= new String[10];
        //Retrive ele= new Retrive();
        try
        {
            for(i=0;i<13;i++)
            {
                push[i]=Retrive.a[i];
                System.out.println("value in Push["+i+"]="+push[i]);
            }
        }
        catch(Exception e)
        {
            System.out.println("Stack for push has Overflown");
        }
    }
}

class Pop //extends Push
{
    public Pop()
    {
        int j;
        String pop[]= new String[10];
        //Push ele1= new Push();
        try
        {
            for(j=9;j>=-1;j--)
            {
                pop[j]=Pop.push[j];
                System.out.println("value in Pop["+j+"]="+pop[j]);
            }
        }
        catch(Exception ev)
        {
            System.out.println("Stack for pop is empty");
        }
    }
}

public class Retrive 
{
    public static void main(String args[])
    {
        String a[] = new String[13];
        for(int k=0;k<13;k++)
        {
            int d[]=new int[13];
            d[k]=2*k;
            a[k]=Integer.toString(d[k]);
            System.out.println("a["+k+"]= "+a[k]);
        }
    }
} 
```

但再次以同样的错误结束

```
 Retrive.java:12:error :cannot find symbol
    push[i]=Retrive.a[i];
    symbol: variable a
    location:class Retrive
 Retrive.java:34:error :cannot find symbol
    pop[i]=Pop.push[i];
    symbol: variable push
    location:class Pop 
```

然后我尝试了这段代码，但只是在包含主要方法的单个类中。

```
public class Retrivee
{
    public static void main(String args[] )
    {
        String a[] = new String[13];
        for(int k=0;k<13;k++)
        {
            int d[]=new int[13];
            d[k]=2*k;
            a[k]=Integer.toString(d[k]);
            System.out.println("a["+k+"]= "+a[k]);
        }
        int i;
        String push[]= new String[10];
        try
        {
            for(i=0;i<13;i++)
            {
                push[i]=a[i];
                System.out.println("value in Push["+i+"]="+push[i]);
            }
        }
        catch(Exception e)
        {
            System.out.println("Stack for push has Overflown");
        }
        int j;
        String pop[]= new String[10];
        try
        {
            for(j=9;j>=-1;j--)
            {
                pop[j]=push[j];
                System.out.println("value in Pop["+j+"]="+pop[j]);
            }
        }
        catch(Exception ev)
        {
            System.out.println("Stack for pop is empty");
        }
    }
} 
```

最后它起作用了。为什么在上述两种情况下都不起作用？如果它可以工作，请说明应该如何以及在哪里进行更改。

我想问的最后一件事是为什么我们不能像这样在 main 方法中设置 String args[] 的大小

```
 public static void main(String args[] = new String[10]) 
  {
  } 
```

在第一个例子之后我写了一个小代码

```
import java.util.*;
public class MyScan 
{
    public static void main(String[] args) 
    {
        //String[] args = new String[10];
        String[] in = new String[4];//= {"1 a 10 . 100 1000","12","2112"};
        in[0]= "1"; //args[0];
        in[1]= "2"; //args[1];
        in[2]= "3"; //args[2];
        String accum;
        for(int x = 0; x <3; x++)   
        {
            Scanner s = new Scanner(in[x]);
            accum = s.nextLine();
            System.out.println(accum);
        }
    }
} 
```

当我写

```
 in[0]= args[0];
 in[1]= args[1];
 in[2]= args[2]; 
```

它扔了

```
 Exception in thread"main" java.lang.ArrayIndexOutOfBoundsException:0
  at MyScan.main<MyScan.java:9> 
```

但是上面的初始化在另一个程序中使用时有效，但方式有所不同。

```
 String a= args[0];
    String b= args[1]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:00:09.883

你在这里问了不止一个问题，但是...

`cannot find symbol`是编译器告诉您您对浮动的某些变量有未定义引用的方式。它甚至会告诉你它们是哪些变量。所以，现在，你没有`a`或没有`push`定义任何东西。声明它们并将它们实例化为适当的值。

您不需要设置 的大小`args[]`，因为它本质上是无限的。 `args[]`在命令行传入参数时使用：

```
java program1 param1 param2 param3 param4 ... param99 
```

...并且这些参数中的每一个都将在`args`.

你可以写这个`main`，它的意思是一样的：

```
public static void main(String... args) { } 
```

以上称为[`varargs`](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html). 我建议您查看该参考资料。

# javascript - 在不同的 html 页面上显示/隐藏 div

> ID：15057081
> 
> 赞同：4
> 
> 时间：2013-02-24T21:52:48.093
> 
> 标签：javascript, jquery, html

所以基本上我有两个不同的 HTML 页面。我想创建一个函数，当单击第一个 html 页面上的按钮时，它将显示/隐藏第二个 html 上的 div 元素。

这可以用javascript完成吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:11:20.370

正如@roXon 提到的一个选项，您可以使用 HTML5 存储来做到这一点。

例如

```
if(typeof(Storage)!=="undefined")
  {
     $('#FirstClick').on('click',function(){
        localStorage.clickedDiv = $(this).attr('id');
        $(this).hide();
     });
  }
else
  {
     $(this).hide();
  } 
```

然后在第二页。

```
$(function(){
   $(localStorage.clickedDiv).hide();
}); 
```

或者为了更向后的浏览器支持，您可以使用 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:56:52.127

我不确定你所说的第二个 html 页面是什么意思，也许你的意思是内容？使用 jQuery 可以做到这一点……例如……

```
<script type="text/javascript">

$(document).ready(function(){

        $(".slidingDiv").hide();
        $(".show_hide").show();

    $('.show_hide').click(function(){
    $(".slidingDiv").slideToggle();
    });

});

</script>

<a href="#" class="show_hide">Show/hide</a>
<div class="slidingDiv">
<a href="#" class="show_hide">hide</a></div> 
```

**css**

```
.slidingDiv {
    height:300px;
    background-color: #99CCFF;
    padding:20px;
    margin-top:10px;
    border-bottom:5px solid #3399FF;
}

.show_hide {
    display:none;
} 
```

也许您的意思是在第二个页面上加载内容（或与之交互）请参阅[http://api.jquery.com/load/](http://api.jquery.com/load/)和问题：[Load content of a div on another page](https://stackoverflow.com/questions/4101770/load-content-of-a-div-on-another-page)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T22:01:28.560

如果浏览器支持 HTML5 存储，您可以保存一个变量 [http://www.w3schools.com/html/html5_webstorage.asp](http://www.w3schools.com/html/html5_webstorage.asp)

否则，您需要传递 GET 参数或 cookie。

# signalr - 确定信号器中的陈旧连接

> ID：15057084
> 
> 赞同：2
> 
> 时间：2013-02-24T21:53:02.207
> 
> 标签：signalr

有许多文章展示了如何使用 SignalR 进行自己的高级连接处理，例如[关于“将 ASP.NET SignalR 连接映射到真实应用程序用户”的博客文章](http://www.tugberkugurlu.com/archive/mapping-asp-net-signalr-connections-to-real-application-users)。

所有这些解决方案都依赖于 OnDisconnect 事件：

```
public override Task OnDisconnected()
{
    SignalRConnectionManager.RemoveConnection(Context.ConnectionId);
    return base.OnDisconnected();
} 
```

只要您可以依赖 OnDisconnected 事件，它就可以工作。如果您的应用程序崩溃/重新启动或服务器重新启动，那么您将不会获得每个连接的 OnDisconnected 事件。

问题：我的数据库中有连接。我知道其中许多联系都是陈旧的。SignalR 中是否有可能找出连接是否过时？我试过

```
Clients.Client[StaleConnectionId] 
```

希望在连接 ID 无效的情况下出现 null 或异常。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:13:15.367

不，没有办法检查“陈旧”连接。我假设您的麻烦在于以某种方式保持用户状态，并且您想知道何时使它们过期。

SignalR 具有基于空闲活动使连接过期的故障保险，因此我建议在您的应用程序逻辑中构建空闲功能，您可以通过该功能使用户过期。

我已经在[ShootR](http://shootr.signalr.net) ( [https://github.com/NTaylorMullen/ShootR](https://github.com/NTaylorMullen/ShootR) ) 中实现了这个逻辑，以防你想有一个基础。

希望这可以帮助！

# symfony - FOSUserBundle 组角色设置

> ID：15057088
> 
> 赞同：8
> 
> 时间：2013-02-24T21:53:23.560
> 
> 标签：symfony, fosuserbundle

我正在使用 FOSUserBundle 和 Group 选项。注册工作。组的创建也有效。如果我创建 2 个组，admin 和 client 并手动将 a:1:{i:0;s:10:"ROLE_ADMIN";} 添加到 fos_group 表中的 admin 组，然后可以在 fos_user_user_group 中设置和条目绑定用户到管理员组，使用该用户登录将能够以管理员身份登录。

然而，显然，这种方法有一些缺点。我现在可以使用什么来将用户添加到组？使用提升命令行选项只会将角色添加到该用户但在 fos_user 表中，并且由于我正在使用组，我怀疑不再使用 fos_user 表的角色列。如果它仍然有用，我如何以编程方式将用户分配到组？

我的另一个大问题是如何将角色分配给组。也许我没有对整个 Groups 的想法有所了解，但我希望能够在创建时为组添加角色，但“新”表单只要求提供组名称并且没有似乎不存在与组的用户提升命令的等效项。

谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-24T22:47:53.803

**如何以编程方式将用户分配给组？**

```
$user->addGroup($group); 
```

由于您使用的是 FOSUserBundle，因此您的用户实体扩展`FOS\UserBundle\Model`了实现`GroupableInterface`. 所以你的用户类已经有了组方法`getGroups, hasGroup($name), addGroup(GroupInterface $group), removeGroup(GroupInterface $group)`。参考看这里[https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Model/User.php](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Model/User.php)

**如何为组分配角色？**

```
$em = $this->getDoctrine()->getEntityManager();

$group = new Group();
$group->setRoles(array());
$group->addRole('ROLE_ACTOR');
$em->persist($group);
$em->flush(); 
```

您必须自己实现角色分配，fosuserbundle 没有为此预定义的表单。

# arrays - 如何在 MIPS 中基于 RNG 从数组中加载字符串？

> ID：15057091
> 
> 赞同：1
> 
> 时间：2013-02-24T21:53:48.130
> 
> 标签：arrays, string, assembly, random, mips

我正在尝试从基于 MIPS 中的 RNG 输出的字符串数组中为我的程序集类中的项目加载随机字符串 - 我遇到了非常困难的时间。输出没有意义。处理此问题的代码部分如下：

```
SEED:
li $v0 30       #get time syscall
syscall

move $a1 $a0
li $a0 1
li $v0 40       #seed RND syscall - a0 RNG ID, a1 Time
syscall

RNG:    
li $a1 10       #upper bound java.util.Random rnd.nexInt(n)
li $v0 42       #get RND syscall - a0 RNG ID, a1 range -> a0 has #
syscall

li $t1 5
mult $a0 $t1
mflo $s1

LOADWORD:
la $s2 bank
add $s2 $s2 $s1     #shift wordbank based on rng
la $s3 word

lb $t0 0($s2)       #1st letter
sb $t1 0($s3)

lb $t1 1($s2)       #2nd letter
sb $t1 1($s3)

lb $t2 2($s2)       #3rd letter
sb $t1 2($s3)

lb $t3 3($s2)       #4th letter
lb $t3 3($s3)

lb $t4 4($s2)       #5th letter
lb $t4 4($s3)

move $a0 $s3
li $v0 4
syscall 
```

我相信我遇到的问题必须处理基于 RNG 的标签#shift wordbank。谁能帮我这个？我目前只使用一个大字符串，如“HELLOCHAIRWORDSCOUCH ...”，并试图从中加载一个五个字符的字符串 - 有没有更好的方法来做到这一点？谢谢。

# javascript - Tomcat7 压缩 JS/CSS

> ID：15057092
> 
> 赞同：3
> 
> 时间：2013-02-24T21:53:49.843
> 
> 标签：javascript, css, tomcat, tomcat7, http-compression

我在我的 tomcat7 server.xml 中使用以下设置启用了压缩：

```
<Connector port="8080" protocol="HTTP/1.1"
               connectionTimeout="20000"
               redirectPort="8443" 
compression="on"
compressionMinSize="2048"
noCompressionUserAgents="gozilla, traviata"
compressableMimeType="text/html,text/xml,text/json,text/javascript,text/css,text/plain,
application/javascript,application/xml,application/xml+xhtml"
/> 
```

我检查了压缩现在使用： http: [//www.whatsmyip.org/http-compression-test/](http://www.whatsmyip.org/http-compression-test/)

但是，PageSpeed 仍然报告有几个 CSS/JS 文件没有被压缩。例如，压缩[http://www.mysite.co.uk/css/bootstrap.css](http://www.mysite.co.uk/css/bootstrap.css)可以节省 109.5KiB（减少 84%）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:04:38.960

所有没有压缩的 CSS/JS 文件都比较大吗？也许那些是由“sendfile”发送的，从而避免被压缩。

在文档中：

> “注意：使用压缩（节省带宽）和使用 sendfile 功能（节省 CPU 周期）之间存在权衡。如果连接器支持 sendfile 功能，例如 NIO 连接器，则使用 sendfile 将优先于压缩。症状将是大于 48 Kb 的静态文件将在未压缩的情况下发送。您可以通过设置连接器的 useSendfile 属性来关闭 sendfile，如下所述，或者在默认 conf/web 中的 DefaultServlet 的配置中更改 sendfile 使用阈值。 xml 或 web 应用程序的 web.xml 中。”

[http://tomcat.apache.org/tomcat-6.0-doc/config/http.html](http://tomcat.apache.org/tomcat-6.0-doc/config/http.html)

在您的配置中设置：

```
useSendfile="false" 
```

# iphone - 有谁知道从 UIModalTransitionStylePartialCurl segue 退出时未触发 viewDidAppear 的问题？

> ID：15057093
> 
> 赞同：2
> 
> 时间：2013-02-24T21:53:55.843
> 
> 标签：iphone, ios, objective-c, uistoryboardsegue, viewdidappear

`viewDidAppear`有谁知道退出`UIModalTransitionStylePartialCurl`segue时如何避免被击中？

```
- (IBAction)buttonSelector:(id)sender
{

    // creating object for title screen
    UIStoryboard *storySelection =[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

    // creating object for profile view
    selectorViewController = [storySelection instantiateViewControllerWithIdentifier:@"Verse Selector"];

    // setting the transition style
    selectorViewController.modalTransitionStyle = UIModalTransitionStylePartialCurl;

    // performing the segue
    [self presentViewController:selectorViewController animated:YES completion:nil];
}

-(void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    // testing for a return from segue
    if (selectorViewController != nil)
    {
        // getting the chosen values from the instance
        chosenBook = selectorViewController.chosenBook;

        // setting instance to nil for garbage collection
        selectorViewController = nil;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:36:09.953

**编辑**

看起来最好的方法是实现一个自定义委托协议，通知呈现视图控制器呈现的视图控制器正在被解除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T22:18:03.683

一种方法是将初始视图控制器设置为模态呈现视图控制器的委托。在呈现视图控制器之前：

```
selectedViewController.delegate = self;
[self presentViewController:selectorViewController animated:YES completion:nil]; 
```

然后，在模态视图控制器中，无论哪种方法关闭模态呈现，都直接在原始视图控制器上调用 viewDidAppear:。

```
- (void)doneButtonPressed:(id)sender
{
    [self.delegate viewDidAppear:NO];
    [self.delegate dismissModalViewControllerAnimated:YES];
} 
```

# amazon-web-services - AWS 运行状况检查器处于活动状态，但未配置负载均衡器

> ID：15057095
> 
> 赞同：3
> 
> 时间：2013-02-24T21:54:03.080
> 
> 标签：amazon-web-services, amazon-ec2

我刚刚在 Amazon 上的 EC2 实例上配置了一个站点，运行 Apache 和 PHP。一切正常。但是，我注意到日志中不断填满 404 条消息，试图访问`/_hostmanager/healthcheck`.

我的研究告诉我，这与亚马逊的弹性负载均衡器有关，每 x 分钟进行一次自动健康检查。用户代理似乎也表明了这一点：`ELB-HealthChecker/1.0`.

但是，我没有在任何区域配置任何负载均衡器。除了这与负载均衡器有关之外，我找不到任何其他原因，所以这对我来说没有任何意义。

对此有什么想法或经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:56:05.470

您在使用 Elastic Beanstalk 吗？

本地实例管理由 Amazons HostManager 执行。HostManager 是一个基于 Rack 的 Ruby 应用程序，运行在一台瘦服务器的 8999 端口上。它接收来自 URI /_hostmanager 的请求。

[http://blog.jetztgrad.net/2011/01/dissecting-an-amazon-elastic-beanstalk-instance/](http://blog.jetztgrad.net/2011/01/dissecting-an-amazon-elastic-beanstalk-instance/)

# ios - 为什么当我从后台返回时 nslogging 会停止？

> ID：15057096
> 
> 赞同：0
> 
> 时间：2013-02-24T21:54:18.913
> 
> 标签：ios, objective-c, nslog

我有一个应用程序，我希望它在按下主页按钮时从头开始，然后重新启动该应用程序。因此，我将 plist bool 设置为 yes，因此应用程序不会在后台运行。所有这些工作正常，应用程序似乎工作，除了一旦应用程序进入后台，因为按下主页按钮然后再次启动，我失去了所有到控制台的 nslogging，但应用程序似乎运行良好。当我从 Xcode 再次启动应用程序时，一切看起来都很好。关于为什么会发生这种情况的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:04:28.303

您是否尝试在 Xcode 调试器或连接设备的管理器中读取 NSLog 的输出？

如果您的应用程序在按下主页按钮时确实停止运行并使用新进程重新启动，则将不再附加调试器（它已附加到先前的进程 ID），并且您不会在那里看到任何日志消息。

# objective-c - 无法从 NSMutableArray 获取对象

> ID：15057097
> 
> 赞同：0
> 
> 时间：2013-02-24T21:54:21.473
> 
> 标签：objective-c, indexing, nsmutablearray

在我的应用程序中，有一个 mapView，用户可以通过按下屏幕来添加注释。当注释被拖放到 mapView 上时，它们会被添加到单例中的可变数组中。注释视图有一个标注按钮，该按钮在按下时将详细视图（称为 PinViewController）推送到堆栈上。我的问题是，当按下标注按钮时，我想将该注释对象的索引传递给详细视图控制器，以便我可以从该对象获取地址和日期。但是每当我按下标注按钮时，无论它是哪个注释，它总是传递数组中第一个对象的索引。我看不出我做错了什么，有人可以帮我吗？这是一些代码：

```
- (void)mapView:(MKMapView *)mapView
annotationView:(MKAnnotationView *)view
calloutAccessoryControlTapped:(UIControl *)control {

    PinViewController *pvc = [[PinViewController alloc]init];
    [[self navigationController]pushViewController:pvc animated:YES];
    NSUInteger pinIndex = [[Data singleton].annotations indexOfObject:view.annotation];
    [pvc setIdentifier:pinIndex];
} 
```

这是来自详细视图控制器：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    [self.labelView setFrame:CGRectMake(10, 260, 300, 230)];
    [PinViewController roundView:self.labelView onCorner:UIRectCornerAllCorners radius:15];
    [[self view]addSubview:self.labelView];

    self.annotation = [[Data singleton].annotations objectAtIndex:self.identifier];
    self.addressLabel.text = self.annotation.address;
    self.dateLabel.text = self.annotation.subtitle;
} 
```

这是将注释添加到数组的位置：

```
- (void)press:(UILongPressGestureRecognizer *)recognizer {
    CGPoint touchPoint = [recognizer locationInView:self.worldView];
    CLLocationCoordinate2D touchMapCoordinate = [self.worldView convertPoint:touchPoint toCoordinateFromView:self.worldView];

    self.geocoder = [[CLGeocoder alloc]init];
    CLLocation *location = [[CLLocation alloc]initWithCoordinate:touchMapCoordinate
                                                        altitude:CLLocationDistanceMax
                                              horizontalAccuracy:kCLLocationAccuracyBest
                                                verticalAccuracy:kCLLocationAccuracyBest
                                                       timestamp:[NSDate date]];
    [self.geocoder reverseGeocodeLocation:location
                   completionHandler:^(NSArray *placemarks, NSError *error) {
                       //NSLog(@"reverseGeocoder:completionHandler: called");
                       if (error) {
                           NSLog(@"Geocoder failed with error: %@", error);
                       } else {
                           CLPlacemark *place = [placemarks objectAtIndex:0];
                           self.geocodedAddress = [NSString stringWithFormat:@"%@ %@, %@ %@", [place subThoroughfare], [place thoroughfare], [place locality], [place administrativeArea]];
                           if (UIGestureRecognizerStateBegan == [recognizer state]) {
                               self.addressPin = [[MapPoint alloc]initWithAddress:self.geocodedAddress
                                                                   coordinate:touchMapCoordinate
                                                                        title:self.geocodedAddress];
                               [[Data singleton].annotations addObject:self.addressPin];
                               [self.worldView addAnnotation:self.addressPin];
                               NSLog(@"The number of pins in the annotation array is: %u",[Data singleton].annotations.count);
                           }
                       }
                   }];
} 
```

所以基本上，传递给 PinViewController 的索引总是 0，不管它是哪个注解。我不明白为什么这段代码不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T22:04:46.167

NSArray indexOfObject 方法在每个数组成员上调用 isEqual 以确定它们是否相同。您是否确保您的对象仅在它们实际上相等时才返回 YES ？我怀疑您的对象即使不相等也会返回 YES

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)

> 从索引 0 开始，向数组的每个元素发送一个 isEqual: 消息，直到找到匹配项或到达数组末尾。此方法将 anObject 参数传递给每个 isEqual: 消息。如果 isEqual:（在 NSObject 协议中声明）返回 YES，则认为对象相等。

NSNumber 等通用基础类已经`isEqual`为您实现，因此您可以立即在数组`indexOfObjects`方法中使用它

```
NSMutableArray* arr = [[NSMutableArray alloc] init];
[arr addObject:[NSNumber numberWithInt:3]];
[arr addObject:[NSNumber numberWithInt:2]];

[arr indexOfObject:[NSNumber numberWithInt:2]]; // gives 1 
```

但是，当您实现一个自定义类时`MapView`，Objective C 不知道如何比较您的对象，因此您必须自己实现`isEqual`比较器

假设`MapView`有一个整数属性调用`cow`，您可以从中确定相等性（例如：如果两个`MapView`具有相同的`cow`值，则它们相等），您将编写如下内容：

```
@interface MapView : NSObject {

}

@property (nonatomic, assign) int cow;

- (BOOL)isEqual:(id)object

@implementation MapView

@synthesize cow

- (BOOL) isEqual:(id)object
{
    MapView* otherMapview = (MapView*) object;

    return cow == otherMapview.cow;
} 
```

# batch-file - move：文件名或扩展名太长

> ID：15057104
> 
> 赞同：4
> 
> 时间：2013-02-24T21:55:27.400
> 
> 标签：batch-file

我在一个 bat 文件中编写了一个小脚本，用于在我的计算机上创建文件夹的备份：

```
rmdir "Folder - Backup (Old)" /S /Q
move "Folder - Backup" "Folder - Backup (Old)"
mkdir "Folder - Backup"
xcopy /e /h "Folder"\*.* "Folder - Backup" 
```

我最近将“文件夹”与备份脚本一起移动到了一个新目录中，现在该脚本无法正常工作：

```
move "Folder - Backup" "Folder - Backup (Old)"
The filename or extension is too long.
        0 dir(s) moved. 
```

我猜这是由于完整的文件路径`Folder`太长造成的，但是当我使用 Windows 资源管理器重命名文件夹时我没有这个问题，所以在 Windows 中这个操作不是不可能的。这个问题有解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T22:07:19.940

使用`move`重命名是矫枉过正的。尝试

```
ren "Folder - Backup" "Folder - Backup (Old)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-09T02:25:21.330

使用 powershell 的移动项目而不是移动。

如果您确实需要移动某些东西（而不是重命名），这尤其适用。

`powershell move-item 'Folder - Backup' 'Folder - Backup (Old)'`

# android - SeekBar 停止活动 | 错误是什么？

> ID：15057107
> 
> 赞同：0
> 
> 时间：2013-02-24T21:56:25.063
> 
> 标签：android, seekbar

我设计并实现了一个增加 50 的搜索栏。但是如果我运行应用程序，它就会崩溃。没有语法错误（Eclipse 没有注意到我） 有什么问题？

```
package com.example.hello;
import com.example.hello.R.layout;
import android.app.Activity;
import android.os.Bundle;
import android.widget.SeekBar;
import android.widget.TextView;

public class NewPlan extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.new_plan);

    SeekBar seekBar = (SeekBar)findViewById(R.id.seekbar);
    seekBar.setProgress(0); //this is line 19
    seekBar.incrementProgressBy(50);
    seekBar.setMax(5000);

    seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener(){
        TextView seekBarValue = (TextView)findViewById(R.id.seekBarValue);
        @Override
        public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
            progress = progress / 50;
            progress = progress * 50;
            seekBarValue.setText(String.valueOf(progress));
        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) {

        }

        @Override
        public void onStopTrackingTouch(SeekBar seekBar) {

        }
    });

}

} 
```

## 新计划.xml

* * *

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<SeekBar
    android:id="@+id/seekBar"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="77dp" />

<TextView
    android:id="@+id/seekBarValue"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/seekbar"
    android:layout_marginLeft="30dp"
    android:layout_marginTop="28dp"
    android:text="Button" /> 
```

* * *

## 日志窗口：

```
02-24 21:52:50.601: E/AndroidRuntime(2236): FATAL EXCEPTION: main
02-24 21:52:50.601: E/AndroidRuntime(2236): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.hakkikonu.dailycalorie/com.hakkikonu.dailycalorie.NewPlan}: java.lang.NullPointerException
02-24 21:52:50.601: E/AndroidRuntime(2236):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-24 21:52:50.601: E/AndroidRuntime(2236):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-24 21:52:50.601: E/AndroidRuntime(2236):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-24 21:52:50.601: E/AndroidRuntime(2236):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-24 21:52:50.601: E/AndroidRuntime(2236):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-24 21:52:50.601: E/AndroidRuntime(2236):     at android.os.Looper.loop(Looper.java:137)
02-24 21:52:50.601: E/AndroidRuntime(2236):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-24 21:52:50.601: E/AndroidRuntime(2236):     at java.lang.reflect.Method.invokeNative(Native Method)
02-24 21:52:50.601: E/AndroidRuntime(2236):     at java.lang.reflect.Method.invoke(Method.java:511)
02-24 21:52:50.601: E/AndroidRuntime(2236):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-24 21:52:50.601: E/AndroidRuntime(2236):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-24 21:52:50.601: E/AndroidRuntime(2236):     at dalvik.system.NativeStart.main(Native Method)
02-24 21:52:50.601: E/AndroidRuntime(2236): Caused by: java.lang.NullPointerException
02-24 21:52:50.601: E/AndroidRuntime(2236):     at com.hakkikonu.dailycalorie.NewPlan.onCreate(NewPlan.java:19)
02-24 21:52:50.601: E/AndroidRuntime(2236):     at android.app.Activity.performCreate(Activity.java:5104)
02-24 21:52:50.601: E/AndroidRuntime(2236):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-24 21:52:50.601: E/AndroidRuntime(2236):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-24 21:52:50.601: E/AndroidRuntime(2236):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:12:25.800

您的 Java 代码找不到应具有 id 的视图`seekbar`。您还应该仔细检查`new_plan.xml`. 我建议还清理你的项目并重建。根据我的经验，某些更改不会强制`R.java`生成，然后当`R`您从 Java 代码中引用成员时，您会看到令人困惑的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:23:48.200

改变：

```
SeekBar seekBar = (SeekBar)findViewById(R.id.seekbar); 
```

到：

```
SeekBar seekBar = (SeekBar)findViewById(R.id.seekBar); 
```

您在 XML 文件中的 ID 是`seekBar`. Java 区分大小写。

# c - 编程 C - 行的自动编号？

> ID：15057109
> 
> 赞同：0
> 
> 时间：2013-02-24T21:56:33.347
> 
> 标签：c, numbers, lines

我怎样才能让我的功能看起来那样？

```
 F.Name        L.Name            Grade
  ......        ......            .....
1)Martin        Peter               7
2)Rani          Sari                9
3)Kara          Sandler             4
4)Charlie       Adam                5 
```

我的功能如下所示：

```
Martin        Peter               7
Rani          Sari                9
Kara          Sandler             4
Charlie       Adam                5 
```

C代码看起来像这样

```
#include <stdio.h>
#include <stdlib.h>
 int main(int argc, char** argv) {
        char f[500]; 
        char set;
        char line[100];
        FILE *filename;

        printf("Name of file?: ");
        scanf("%s", f); 
        filename = fopen(f, "r");

        if((filename == NULL)){
        printf("error!\n");
        return;
        }
        else (
        printf("\n")
        );

        while ( fgets (line , sizeof line, filename) != NULL )
        {
            fputs (line, stdout );
        } 
} 
```

那么我怎样才能为每一行输入一个数字，

名字、姓氏和年级？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:59:33.860

你可以这样做：

```
i=1;
while ( fgets (line , sizeof line, filename) != NULL )
{
     printf("%3d)",i);
     fputs (line, stdout );
     i++;
} 
```

实际上，`printf`如果您关心输出格式，则应该使用函数。

```
printf("%-15s  %-15s  %-15s\n","F.Name","L.Name", "Grade");
printf("%*s %*s %*s",5,".",5,".",5,"."); 
```

将此代码放在 wile 循环之前

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T21:59:05.010

保持每行递增的计数器：

```
// int line_num = 0 has been declared at the top

while ( fgets (line , sizeof line, filename) != NULL )
{
    printf("%3d) %s\n", ++line_num, line);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T22:00:06.060

```
 int i = 1;

    printf("      F.Name        L.Name            Grade\n");
    printf("      ......        ......            .....\n");
    while ( fgets (line , sizeof line, filename) != NULL )
    {
        printf("%d)");
        fputs (line, stdout );
        i++;
    } 
```

# python - pygame 没有检测到操纵杆

> ID：15057114
> 
> 赞同：1
> 
> 时间：2013-02-24T21:57:11.737
> 
> 标签：python, pygame, joystick

我有一个`pygame`似乎无法检测到的罗技双动作控制器。我尝试了一些简单的开始：

```
import pygame

pygame.init()
pygame.joystick.init()
x = pygame.joystick.get_count()
print( x ) 
```

...它只返回`0`连接的控制器。

如果我尝试：

```
j = pygame.joystick.Joystick(0)
j.init() 
```

我得到：

> pygame.error: 无效的操纵杆设备号

我曾经`LibUSB`验证该设备确实已连接，但我不知道为什么`pygame`无法检测到它。

# android - 我应该如何在我的 ListActivity 自定义适配器中显示来自几个数组的值？

> ID：15057117
> 
> 赞同：1
> 
> 时间：2013-02-24T21:57:14.963
> 
> 标签：android, android-layout

例如我有这样的代码：

```
 String[] values = new String[] { "Text1", "Text2", "Text3",
            "Text4", "Text5", "Text6", "Text7", "Text8",
            "Text9", "Text10" };
    String[] subvalues = new String[] {"subtext1", "subtext2", "subtext3", "subtext4", 
            "subtext5", "subtext6", "subtext7", "subtext8", "subtext9", "subtext10"};

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(
            this,
            R.layout.rawlayout,
            R.id.phone_number,
            values);
    setListAdapter(adapter); 
```

此示例使用 values 数组中的值填充 TextView R.id.phone_number。但是我有另一个 textView R.id.date_time ，我想用 subvalues 数组中的值填充它。

我应该如何修改我的代码以实现我的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:00:45.877

您可以将两个 Array 组合成 a`List<Map<String, String>>`并使用[SimpleAdapter](https://developer.android.com/reference/android/widget/SimpleAdapter.html)来显示这两个值。或者您可以创建一个自定义适配器，该适配器接受您的两个数组并适当地显示它们。

我建议使用自定义适配器，因为 SimpleAdapters 比自定义代码慢。如果您从未创建过自定义适配器，那么有一些由主要 Android 开发人员专门针对此主题进行的 Google I/O 演示，例如[Turbo-Charge Your UI](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:05:08.577

> 我应该如何修改我的代码以实现我的目标？

您始终可以使用[Cursor Joiner](http://developer.android.com/reference/android/database/CursorJoiner.html) Witch 允许将多个列表/光标加入到单个光标中。当您创建光标适配器类（允许自定义布局）时，您将作为适配器分配给您的 listView。

```
CursorJoiner joiner = new CursorJoiner(cursor1, projection1, cursor2, projection2);

for (CursorJoiner.Result joinerResult : joiner) {
    switch (joinerResult) {

    case LEFT: // handle case where a row in cursorA is unique

        Log.d(tag, "left");

        break;
    case RIGHT: // handle case where a row in cursorB is unique

        Log.d(tag, "right");
        break;
    case BOTH: // handle case where a row with the same key is in
           // both // cursors
        Log.d(tag, "both");
        break;
    } 
```

您还可以使用[MatrixCursor](http://developer.android.com/reference/android/database/MatrixCursor.html)

# c - 在 C 中使用代码块的 itoa 导致分段错误

> ID：15057118
> 
> 赞同：0
> 
> 时间：2013-02-24T21:57:16.530
> 
> 标签：c, codeblocks, itoa

一直在为一个学校项目使用 itoa()，它工作正常，然后开始抛出错误。说它在处理 itoa 的第一个实例时出现分段错误。

这是有问题的代码。

我不明白为什么它一开始会起作用，然后开始出现问题。我唯一添加的 pre-breakdown 是底部的一些 printf() 行，因为我已经在代码中注释掉了它们，但它仍然不起作用。

```
#include <stdio.h>
#include <stdlib.h>

int main()
{

//Variables

unsigned int byteH=0b00011001;
unsigned int byteL=0b00001110;
char* sValue;
char* sFreq;
float iConv;
char Output[4];
int i;

i=((byteH*32)+byteL);  // just adding two 5bit blocks together

itoa(i,sValue,10);     // This instance throws the segmenation error

iConv=((byteH*32)+byteL);
iConv=(int)(iConv/1.023);
i=(int)iConv;

itoa(i,sFreq,10);     // This instance doesn't cause problems. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T22:00:36.770

该函数`itoa`需要一个已分配的缓冲区。尝试：

```
char* sValue = malloc(20); 
```

也是如此`sFreq`，即使它碰巧按原样“工作”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:47:49.570

虽然`itoa()`被定义为采用指针参数，但该指针必须指向一个足够大的内存块以接受结果。在您的情况下，指针是统一的。

最简单的解决方案是声明适当大小的数组。数组可以传递给接受指针参数的函数——它们是通过引用传递的，所以函数接收指向数组的指针，而不是它的副本。

```
char sValue[22] ;
char sFreq[22] ; 
```

数组的大小足以接受带有潜在符号前缀的 64 位整数。对于 32 位，它只需要 12 个，但您也可以确保您不必知道代码将被编译为什么。

itoa 的替代方法是使用`sprintf`：

```
sprintf( sValue, "%u", i ) ; 
```

# php - 正确格式化 HTML 中的多行文本区域字符串

> ID：15057119
> 
> 赞同：0
> 
> 时间：2013-02-24T21:57:18.357
> 
> 标签：php, html, mysql

我有这个表格，里面有一个文本区域和一个提交按钮。当您提交它时，它会查询文本区域中的任何内容。

这是代码的那一部分：

```
 if(isset($_POST['message']))
    {
        $EscMessage = $iDB->real_escape_string(rip_tags($_POST['message']));
        $EscName = $iDB->real_escape_string(rip_tags($_POST['subject'])); // rip_tags just strips HTML
        $Today = date("F j, Y, h:i:s A");

        $iDB->query("INSERT INTO `Match_Comments` (`URL`, `Name`, `Message`, `Date`) VALUES ('$EscMatch', '$EscName', '$EscMessage', '$Today')");
    } 
```

这很好用，但是如果我在 textarea 中写评论，例如：

```
This is the message that I will be writting in the textarea

It includes multiple lines like right now.

And even large blocks of blank spaces. 
```

然后，当我查询数据时，它会在 1 行中显示 ^ 该消息而没有空行。我怎样才能解决这个问题？

这是它的显示方式：（但我希望它就像在 textarea 中写的一样）

> 这是我将在 textarea 中写入的消息，它包括像现在这样的多行。甚至是大块的空白。

这是我获取数据的方式：

```
$row['Message']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:01:57.140

html 中的换行符呈现为空格。您应该`<br />`在有换行符的地方添加一个。
使用[`nl2br`](http://php.net/nl2br).

# sql-server - SSMS 本地化输出窗口 - 未关闭

> ID：15057121
> 
> 赞同：1
> 
> 时间：2013-02-24T21:57:23.027
> 
> 标签：sql-server, localization, ssms

您可以在 SQL Server Management Studio 的输出窗口中关闭位置吗？我永远找不到它。我的语言是斯洛伐克语。我想支持英语:( ![在此处输入图像描述](../Images/e4280892b9ce03cec19f40f7a5823263.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:28:07.247

消息不是来自 SSMS。它来自 SQL Server。您必须重新配置服务器。

SSMS 只是一个前端，就像任何其他 ADO.NET 应用程序一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T23:48:20.607

对于一个特定会话，请尝试`set language english`在查询窗口中运行该命令。

[设置语言 (Transact-SQL)](http://msdn.microsoft.com/en-gb/library/ms174398.aspx)。

您还可以将您的登录设置为使用英语作为您与服务器建立的所有连接的默认语言。

最后，您可以将 SQL Server 本身配置为使用英语作为所有连接的默认语言：

[配置默认语言服务器配置选项](http://msdn.microsoft.com/en-gb/library/ms190682.aspx)。

# django - Django Rest Framework：序列化程序找不到属性

> ID：15057123
> 
> 赞同：3
> 
> 时间：2013-02-24T21:57:28.747
> 
> 标签：django, django-rest-framework

这是我的模型：

```
class Address(models.Model):
    """
        This is an Adress
    """
    address_complete = models.CharField(max_length=100)
    door_code       = models.CharField(max_length=20, blank=True, null=True)
    floor           = models.IntegerField(blank=True, null=True)
    infos           = models.CharField(max_length=100, blank=True, null=True)

    class Meta:
        verbose_name_plural = "Addresses" 
```

我在 serializer.py 中为此创建了一个序列化程序：

```
from rest_framework import serializers
from party_app.models import Address, UserProfile, Stuff, Event, Bringing, Quantity

class AddressSerializer(serializers.Serializer):
    pk = serializers.Field()
    address_complete = serializers.CharField(max_length=100)
    door_code       = serializers.CharField(max_length=20)
    floor           = serializers.IntegerField()
    infos           = serializers.CharField(max_length=100)

    def restore_object(self, attrs, instance=None):
        """
            Create or update a new UserProfile instance.
        """
        if instance:
            # Update existing instance
            instance.address_complete = attrs.get('address_complete', instance.address_complete)
            instance.door_code = attrs.get('door_code', instance.door_code)
            instance.floor = attrs.get('floor', instance.floor)
            instance.infos = attrs.get('infos', instance.infos)
            return instance

        # Create new instance
        return Address(**attrs) 
```

当我尝试使用 python manage?py shell 序列化地址时，这是我得到的：

```
>>> seria = AddressSerializer(Address)
>>> seria.data
AttributeError: type object 'Address' has no attribute 'address_complete' 
```

作为 DjangoRestFramework 的新手，我只是不知道为什么会得到这个......

如果你看到一些明显的东西，我会很高兴知道它！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T22:19:34.490

在使用不需要的模型时摆脱 restore_object 。请改用[modelSerializer](http://django-rest-framework.org/api-guide/serializers.html#modelserializers)。

```
class AddressSerializer(serializers.ModelSerializer):

    class Meta:
        model = Address
        fields = ('id', 'address_complete', 'door_code') 
```

# javascript - jQuery 幻灯片随索引和淡出变化——跳跃

> ID：15057125
> 
> 赞同：0
> 
> 时间：2013-02-24T21:57:32.137
> 
> 标签：javascript, jquery

我正在开发一个 jQuery 幻灯片插件。我的一种方法是在图片之间来回切换。我在创建它方面非常成功，这是迄今为止特定方法的代码的一个孤立案例：

```
var images = $("#simpleslides").children("img");

$(".slideButtons ul li").on("click", "a", function() {

        var anchorIndex = $(this).parent().index();
        var $activeSlide = $("#simpleslides img:visible");
        var $targetSlide = $(images[anchorIndex]);

        if($activeSlide.attr("src") == $targetSlide.attr("src") || $targetSlide.is(":animated")) {

            return false;

        } else {

            $activeSlide.css({ "z-index" : 0 });
            $targetSlide.css({ "z-index" : 1 });

            $targetSlide.stop().fadeIn("slow", function() {

                $activeSlide.hide();

            });

        }

    }); 
```

这是一个在工作中看到它的小提琴：http: [//jsfiddle.net/ase3E/](http://jsfiddle.net/ase3E/)

在大多数情况下，这可以按您的预期工作。当用户点击相应的数字时，它会在图片中淡出。

`hide`然而，当我快速点击时，我会遇到一些跳跃，偶尔会看到完整的幻灯片。如果你玩小提琴，你会看到我指的是尝试点击每个图像来查看。

我采用`stop`了我认为可以解决问题但没有解决的方法。我已将`hide`方法放在`fadeIn`回调之后，但这也无济于事。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:06:16.923

`**[LIVE DEMO](http://jsfiddle.net/ase3E/3/)**`:)

```
var images = $("#simpleslides").find("img");
$(".slideButtons ul").on("click", "li", function(e) {
    e.preventDefault();
    var i = $(this).index();
    images.eq(i).stop().fadeTo(500,1).siblings('img').fadeTo(500,0);
}); 
```

# php - PHP中的依赖隔离和声明

> ID：15057126
> 
> 赞同：14
> 
> 时间：2013-02-24T21:57:45.633
> 
> 标签：php, dependency-management

在 PHP Web 应用程序中实现完整的[依赖声明和隔离的最佳方法是什么？](http://12factor.net/dependencies)我已经知道[Composer](http://getcomposer.org/)，但这只是声明部分，我认为它还远远不够。我想尽可能多地包括以下内容：PHP 扩展（例如 mcrypt、imagick、apc）、php.ini 配置和扩展配置、PECL 包，理想情况下甚至包括我的 Apache 配置文件。有没有像 Ruby's `bundle exec`for PHP 的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:32:57.333

你也许可以看看[PHP_CompatInfo](http://php5.laurent-laville.org/compatinfo/)。

这不会负责报告任何配置文件中的信息，但它会告诉您 PHP 代码需要运行什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-05T12:46:29.447

Composer 对 Bundler 的替代方案`bundle exec`是`composer exec`. 查看文档：[https ://getcomposer.org/doc/03-cli.md#exec](https://getcomposer.org/doc/03-cli.md#exec)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T11:11:12.100

有一个工具允许通过 debian 包系统分发基于 symfony2 的 PHP 应用程序。见[https://github.com/mjollnir/sf2debpkg](https://github.com/mjollnir/sf2debpkg)

# android - 背景图像绘制（画布）Jerky Sprites 的时间太长......？

> ID：15057132
> 
> 赞同：3
> 
> 时间：2013-02-24T21:58:23.530
> 
> 标签：android, performance, opengl-es, surfaceview, sprite

嘿，我正处于我一直在开发的应用程序的十字路口。

这是一款游戏和“街机/动作”游戏，但我使用 Surfaceview 而不是 Open GL 对其进行了编码（结果就是这样，因为游戏与原始设计发生了巨大变化）。

我发现自己受到性能问题的困扰，甚至在游戏中也没有，而只是在第一个活动中，这是一个动画菜单（全屏背景，大约 8 个精灵漂浮在屏幕上）。

即使有这么少量的精灵，我也无法获得完美平滑的运动。他们平稳地移动了一段时间，然后瞬间变得“波涛汹涌”或“生涩”。

我注意到（据我所知）背景（预先缩放的图像）大约需要 7 到 8 毫秒来绘制。这合理吗？我尝试了不同的绘画方式，例如：

```
 canvas.drawBitmap(scaledBackground, 0, 0, null); 
```

上面的代码产生大致相同的结果：

```
 canvas.drawBitmap(scaledBackground, null, screen, null); 
```

但是，如果我将持有人更改为：

```
 getHolder().setFormat(PixelFormat.RGBA_8888); 
```

位图的绘图最高可达 13 毫秒（我假设是因为它必须转换为 RGB_8888 格式。

奇怪的是，渲染和逻辑以非常稳定的 30fps 移动，它不会丢帧，运行时也不会发生垃圾收集。

我已经尝试了几乎所有我能想到的让我的精灵顺利移动的方法

我最近在我的游戏循环中加入了插值：

```
 float interpolation = (float)(System.nanoTime() + skipTicks - nextGameTick)
              / (float)(skipTicks); 
```

然后我将它传递给我的 draw() 方法：

```
 onDraw(interpolate) 
```

我在这方面取得了一些成功，它确实帮助解决了问题，但我仍然对结果不满意。

任何人都可以给我任何最终提示，可能会减少绘制位图所需的时间或任何其他可能导致此问题的提示，或者您是否认为这只是 Surfaceview 无法完成任务的情况，因此，我应该报废吗应用程序并从 Open GL 重新开始？

这是我的主要游戏循环：

```
int TICKS_PER_SECOND = 30;
int SKIP_TICKS = 1000 / TICKS_PER_SECOND;
int MAX_FRAMESKIP = 10;

long next_game_tick = GetTickCount();
int loops;

bool game_is_running = true;
while( game_is_running ) {

    loops = 0;
    while( GetTickCount() > next_game_tick && loops < MAX_FRAMESKIP) {
        update_game();

        next_game_tick += SKIP_TICKS;
        loops++;
    }
    interpolation = float( GetTickCount() + SKIP_TICKS - next_game_tick )
                    / float( SKIP_TICKS );
    display_game( interpolation );
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:03:55.910

您不应该使用 Canvas 来绘制快速精灵，尤其是在绘制全屏图像时。时间太长了，我从经验告诉你。我相信 Canvas 不是硬件加速的，这是您永远无法从中获得良好性能的主要原因。当屏幕上有大约 15 个时，即使是简单的精灵也会开始缓慢移动。切换到 OpenGL，进行正交投影，并为每个 Sprite 制作一个带纹理的四边形。相信我，我做到了，而且值得付出努力。

编辑：实际上，OpenGL 方法不是使用 SurfaceView，而是使用 GLSurfaceView。您创建自己的类，从它派生，实现surfaceCreated、surfaceDestroyed 和surfaceChanged，然后您也从Renderer 派生并连接两者。Renderer 处理一个 onDraw() 函数，该函数将渲染什么，GLSurfaceView 管理您将如何渲染（位深度、渲染模式等）

# c# - 如何告诉 Panel 的家长应该发生一些事情？

> ID：15057135
> 
> 赞同：0
> 
> 时间：2013-02-24T21:59:02.483
> 
> 标签：c#, .net, events, parent

我`Block`从类继承了一个`System.Windows.Forms.Panel`类。My Block 具有三个属性（在 Panel 的属性之上）：

1.  `Point[] Path`
2.  `int speed`
3.  `Panel Target`

块获得颜色和大小，并将以给定的速度永远循环通过路径。Block 还有一个`this.LocationChanged += TargetHit;`如下所示的事件：

```
private void TargetHit(object sender, EventArgs e)
{
    if (this.OverlapsTarget()) // returns true if this and this.Target overlap
    {
        this.Parent.EndGame(); // Tell parent Form/Panel to end the game
    }
} 
```

显然调用`this.Parent.EndGame();`不起作用，因为`Control`对象没有`EndGame`方法。我怎么能告诉父窗体/面板调用它的一个方法，或者只是如何告诉父级`this`刚刚击中它的目标（在这种情况下，目标只是父级控件中的另一个面板）并且应该在父母？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:04:53.630

您可以将 Parent 转换为您期望的类型并从那里调用该方法

```
private void TargetHit(object sender, EventArgs e)
{
    if (this.OverlapsTarget()) // returns true if this and this.Target overlap
    {
        if (this.Parent is YourParentType)
        {
            (this.Parent as YourParentType).EndGame(); // Tell parent Form/Panel to end the game
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:29:34.313

正如 建议的那样`Hans Passant`，我需要自己发起一个事件。该事件不必很复杂，只需要引发它以便父母知道何时采取行动。

```
// in my Block class
public event EventHandler Collide;

// in my parent's constructor
myBlock.Collide += this.EndGame; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T22:08:35.877

调试代码并查看发件人值检查发件人为 (YourObjectType).Parent.EndGame()

# maven - Maven中的存储库和依赖项有什么区别？

> ID：15057138
> 
> 赞同：11
> 
> 时间：2013-02-24T21:59:28.317
> 
> 标签：maven, dependencies

它们有何不同？或者他们是一样的？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-24T22:23:51.357

存储库是工件的集合（例如：罐子）。您可以将其视为各种工件的单纯存储/缓存。

依赖是一种情况，您的项目依赖于另一个工件来执行其任务（例如：编译、运行、单元测试）

在 maven 项目中，您通常会在`<dependency>`pom 的部分声明您需要哪些工件，您还可以声明 maven 应该从该`<repositories>`部分查找依赖项的存储库。

默认情况下，maven 将在[中央存储库](http://search.maven.org)上查找工件。但是对于一个组织来说，拥有一个包含内部开发的工件的内部存储库是很常见的。因此`<repositories>`，pom 上的部分通常是这样配置的。

[http://maven.apache.org/guides/index.html](http://maven.apache.org/guides/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:01:24.807

存储库是存储库（又名工件）的地方。依赖项是您当前项目所依赖的库的名称

# c++ - 枚举类可以嵌套吗？

> ID：15057140
> 
> 赞同：9
> 
> 时间：2013-02-24T21:59:33.020
> 
> 标签：c++, c++11, enum-class

这可以做到吗？

```
enum A
{
    enum B
    {
        SOMETHING1,
        SOMETHING2
    };

    enum C
    {
        SOMETHING3,
        SOMETHING4
    };
}; 
```

如果没有，是否有替代解决方案？

这个问题的目的：想要/需要能够做这样的事情：

```
enum class ElementaryParticleTypes
{

    enum class MATTER
    {
        enum class MESONS
        {
            PI
        };

        enum class BARYONS
        {
            PROTON,
            NEUTRON
        };

        enum class LEPTONS
        {
            ELECTRON
        };
    };

    enum class ANTI_MATTER
    {
        enum class ANTI_MESONS
        {
            ANTI_PI
        };

        enum class ANTI_BARYONS
        {
            ANTI_PROTON
            ANTI_NEUTRON
        };

        enum class ANTI_LEPTONS
        {
            POSITRON
        };
    };

}; 
```

希望使用强类型功能。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-24T22:02:20.150

**不**，它们不能那样嵌套。事实上，任何编译器都会拒绝它。

> 如果没有，是否有替代解决方案？

这主要取决于您要实现的目标（解决什么问题？）。如果您的目标是能够编写类似的东西`A::B::SOMETHING1`，您可以在命名空间中定义它们，这样：

```
namespace A
{
    enum B
    {
        SOMETHING1,
        SOMETHING2
    };

    enum C
    {
        SOMETHING3,
        SOMETHING4
    };     
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T23:13:20.503

看到在这种特殊情况下，枚举不太可能经常更改，您可以选择：

```
namespace ParticleTypes {
    namespace Matter {
        enum Mesons {
            Pi
        };

        enum Baryons {
            Proton = Pi + 1,
            Neutron
        };

        enum Leptons {
            Electron = Neutron + 1
        };
    }

    namespace AntiMatter {
        enum AntiMesons {
            AntiPi = Matter::Electron + 1
        };

        // ...
    }
} 
```

但是，我确实想知道为什么您要`enum`为不同类型的粒子使用不同类型。你有接受类型参数`Mesons`但不接受类型参数的函数`Leptons`吗？如果不是，并且您的所有函数都接受任何粒子，则使用单个`enum`- 并且最好将长前缀放到值的名称中，例如`MATTER_MESONS_`等`MATTER_BARYONS_`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T22:38:33.623

```
MESONS pi = PI();
MATTER mat = pi;
assert (pi == mat); 
```

你介意一点 C++11 模板魔法吗？

```
template <typename T, typename... L>
struct is_defined_in : std::false_type {};

template <typename T, typename U, typename... L>
struct is_defined_in<T, U, L...> : is_defined_in<T, L...> {};

template <typename T, typename... L>
struct is_defined_in<T, T, L...> : std::true_type {};

template <int ID> struct helper {
  friend bool operator==(helper a, helper b)
  { return a.id == b.id; }
  friend bool operator!=(helper a, helper b)
  { return a.id != b.id; }

  int id=ID;
};
template <typename... B> struct category {
  int id;

  template <typename T,
            typename = typename std::enable_if<is_defined_in<T, B...>::value>::type>
  category(T t) : id(t.id) {}

  friend bool operator==(category a, category b)
  { return a.id == b.id; }
  friend bool operator!=(category a, category b)
  { return a.id != b.id; }
};

enum class ElementaryParticleTypesID
{ PI, PROTON, NEUTRON, ELECTRON };

struct PI       : helper<(int)ElementaryParticleTypesID::PI> {};
struct PROTON   : helper<(int)ElementaryParticleTypesID::PROTON> {};
struct NEUTRON  : helper<(int)ElementaryParticleTypesID::NEUTRON> {};
struct ELECTRON : helper<(int)ElementaryParticleTypesID::ELECTRON> {};

using MESONS = category<PI>;
using BARYONS = category<PROTON, NEUTRON>;
using LEPTONS = category<ELECTRON>;

using MATTER = category<MESONS, BARYONS, LEPTONS>; 
```

（`the static_assert`目前不能在两个层次结构之外工作，但如果您愿意，可以添加）

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-02-24T22:33:55.620

不，如果不在一个枚举中定义一长串列表中的所有内容，就无法做到这一点。

```
enum class A{
  PARTICLE_MATTER_BARYON_PROTON,
  PARTICLE_MATTER_BARYON_NEUTRON,
  PARTICLE_ANTIMATTER_BARYON_PROTON // etc
}; 
```

如果这对您没有意义，那么您肯定是物理学家。

我接受这个作为停止来自stackoverflow的进一步通知要求我接受答案的答案。

# javascript - D3 barplot 仅使用我的一半数据

> ID：15057142
> 
> 赞同：0
> 
> 时间：2013-02-24T21:59:35.040
> 
> 标签：javascript, json, d3.js

我有一个 d3.js barplot 使用一些包含 12 个元素的 json 数据。我用于条形高度的数据值为 fpkm。我能够将该值作为回调返回到 d3 的数据函数——但仅限于一半的元素。

我的问题是只有前一半的值出现在我的条形图中。我只得到与我的前 6 个值相对应的 6 行。

我在这里做了一个小提琴：http: [//jsfiddle.net/z9Mvt/](http://jsfiddle.net/z9Mvt/)

我似乎无法弄清楚为什么它只使用了我的 json 中的一半元素。

任何帮助 = 赞赏。

html:

```
<div align='center' id="GECGplot" style='width:98%;text-align:center;'></plot> 
```

和js：

```
var gecgData= {"nodeName":"GECG","children":[{"nodeName":0,"nodeData":{"id":"643139","library_id":"SI_5589","gene_id":"ENSG00000157554","gene_short_name":"ERG","fpkm":"1.1241","fpkm_conf_lo":"0.898502","fpkm_conf_hi":"1.34969","fpkm_status":"OK","fpkm_percentile_compendium":"8.33","chr_id":"21","start":"39751948","end":"40033704","locus":"21:39751948-40033704","report":"0","tracking_id":null,"class_code":null,"nearest_ref":null,"tss_id":null,"length":null,"coverage":null,"fpkm_percentile_origin_tissue":null,"fpkm_percentile_collection_tissue":null,"fpkm_percentile_sample_cancer":null,"fpkm_fold_change_benign":null}},

{"nodeName":1,"nodeData":{"id":"872561","library_id":"SI_5596","gene_id":"ENSG00000157554","gene_short_name":"ERG","fpkm":"1.12666","fpkm_conf_lo":"0.871059","fpkm_conf_hi":"1.38226","fpkm_status":"OK","fpkm_percentile_compendium":"16.67","chr_id":"21","start":"39751948","end":"40033704","locus":"21:39751948-40033704","report":"0","tracking_id":null,"class_code":null,"nearest_ref":null,"tss_id":null,"length":null,"coverage":null,"fpkm_percentile_origin_tissue":null,"fpkm_percentile_collection_tissue":null,"fpkm_percentile_sample_cancer":null,"fpkm_fold_change_benign":null}},

{"nodeName":2,"nodeData":{"id":"1031623","library_id":"SI_5553","gene_id":"ENSG00000157554","gene_short_name":"ERG","fpkm":"1.21305","fpkm_conf_lo":"0.949369","fpkm_conf_hi":"1.47674","fpkm_status":"OK","fpkm_percentile_compendium":"25.00","chr_id":"21","start":"39751948","end":"40033704","locus":"21:39751948-40033704","report":"0","tracking_id":null,"class_code":null,"nearest_ref":null,"tss_id":null,"length":null,"coverage":null,"fpkm_percentile_origin_tissue":null,"fpkm_percentile_collection_tissue":null,"fpkm_percentile_sample_cancer":null,"fpkm_fold_change_benign":null}},

{"nodeName":3,"nodeData":{"id":"248423","library_id":"SI_5486","gene_id":"ENSG00000157554","gene_short_name":"ERG","fpkm":"1.98203","fpkm_conf_lo":"1.64888","fpkm_conf_hi":"2.31519","fpkm_status":"OK","fpkm_percentile_compendium":"33.33","chr_id":"21","start":"39751948","end":"40033704","locus":"21:39751948-40033704","report":"0","tracking_id":null,"class_code":null,"nearest_ref":null,"tss_id":null,"length":null,"coverage":null,"fpkm_percentile_origin_tissue":null,"fpkm_percentile_collection_tissue":null,"fpkm_percentile_sample_cancer":null,"fpkm_fold_change_benign":null}},

{"nodeName":4,"nodeData":{"id":"1039674","library_id":"SI_5554","gene_id":"ENSG00000157554","gene_short_name":"ERG","fpkm":"2.24514","fpkm_conf_lo":"1.83333","fpkm_conf_hi":"2.65696","fpkm_status":"OK","fpkm_percentile_compendium":"41.67","chr_id":"21","start":"39751948","end":"40033704","locus":"21:39751948-40033704","report":"0","tracking_id":null,"class_code":null,"nearest_ref":null,"tss_id":null,"length":null,"coverage":null,"fpkm_percentile_origin_tissue":null,"fpkm_percentile_collection_tissue":null,"fpkm_percentile_sample_cancer":null,"fpkm_fold_change_benign":null}},

{"nodeName":5,"nodeData":{"id":"304849","library_id":"SI_5485","gene_id":"ENSG00000157554","gene_short_name":"ERG","fpkm":"2.29868","fpkm_conf_lo":"2.02514","fpkm_conf_hi":"2.57221","fpkm_status":"OK","fpkm_percentile_compendium":"50.00","chr_id":"21","start":"39751948","end":"40033704","locus":"21:39751948-40033704","report":"0","tracking_id":null,"class_code":null,"nearest_ref":null,"tss_id":null,"length":null,"coverage":null,"fpkm_percentile_origin_tissue":null,"fpkm_percentile_collection_tissue":null,"fpkm_percentile_sample_cancer":null,"fpkm_fold_change_benign":null}},

{"nodeName":6,"nodeData":{"id":"417495","library_id":"SI_5484","gene_id":"ENSG00000157554","gene_short_name":"ERG","fpkm":"2.61196","fpkm_conf_lo":"2.28949","fpkm_conf_hi":"2.93442","fpkm_status":"OK","fpkm_percentile_compendium":"58.33","chr_id":"21","start":"39751948","end":"40033704","locus":"21:39751948-40033704","report":"0","tracking_id":null,"class_code":null,"nearest_ref":null,"tss_id":null,"length":null,"coverage":null,"fpkm_percentile_origin_tissue":null,"fpkm_percentile_collection_tissue":null,"fpkm_percentile_sample_cancer":null,"fpkm_fold_change_benign":null}},

{"nodeName":7,"nodeData":{"id":"928522","library_id":"SI_5595","gene_id":"ENSG00000157554","gene_short_name":"ERG","fpkm":"2.94397","fpkm_conf_lo":"2.61962","fpkm_conf_hi":"3.26832","fpkm_status":"OK","fpkm_percentile_compendium":"66.67","chr_id":"21","start":"39751948","end":"40033704","locus":"21:39751948-40033704","report":"0","tracking_id":null,"class_code":null,"nearest_ref":null,"tss_id":null,"length":null,"coverage":null,"fpkm_percentile_origin_tissue":null,"fpkm_percentile_collection_tissue":null,"fpkm_percentile_sample_cancer":null,"fpkm_fold_change_benign":null}},

{"nodeName":8,"nodeData":{"id":"622876","library_id":"SI_5552","gene_id":"ENSG00000157554","gene_short_name":"ERG","fpkm":"3.27303","fpkm_conf_lo":"2.79509","fpkm_conf_hi":"3.75097","fpkm_status":"OK","fpkm_percentile_compendium":"75.00","chr_id":"21","start":"39751948","end":"40033704","locus":"21:39751948-40033704","report":"0","tracking_id":null,"class_code":null,"nearest_ref":null,"tss_id":null,"length":null,"coverage":null,"fpkm_percentile_origin_tissue":null,"fpkm_percentile_collection_tissue":null,"fpkm_percentile_sample_cancer":null,"fpkm_fold_change_benign":null}},

{"nodeName":9,"nodeData":{"id":"50230","library_id":"SI_5487","gene_id":"ENSG00000157554","gene_short_name":"ERG","fpkm":"9.88611","fpkm_conf_lo":"8.6495","fpkm_conf_hi":"11.1227","fpkm_status":"OK","fpkm_percentile_compendium":"83.33","chr_id":"21","start":"39751948","end":"40033704","locus":"21:39751948-40033704","report":"0","tracking_id":null,"class_code":null,"nearest_ref":null,"tss_id":null,"length":null,"coverage":null,"fpkm_percentile_origin_tissue":null,"fpkm_percentile_collection_tissue":null,"fpkm_percentile_sample_cancer":null,"fpkm_fold_change_benign":null}},

{"nodeName":10,"nodeData":{"id":"816444","library_id":"SI_5594","gene_id":"ENSG00000157554","gene_short_name":"ERG","fpkm":"15.1868","fpkm_conf_lo":"13.8218","fpkm_conf_hi":"16.5519","fpkm_status":"OK","fpkm_percentile_compendium":"91.67","chr_id":"21","start":"39751948","end":"40033704","locus":"21:39751948-40033704","report":"0","tracking_id":null,"class_code":null,"nearest_ref":null,"tss_id":null,"length":null,"coverage":null,"fpkm_percentile_origin_tissue":null,"fpkm_percentile_collection_tissue":null,"fpkm_percentile_sample_cancer":null,"fpkm_fold_change_benign":null}},

{"nodeName":11,"nodeData":{"id":"496931","library_id":"SI_5551","gene_id":"ENSG00000157554","gene_short_name":"ERG","fpkm":"52.249","fpkm_conf_lo":"50.8217","fpkm_conf_hi":"53.6763","fpkm_status":"OK","fpkm_percentile_compendium":"100.00","chr_id":"21","start":"39751948","end":"40033704","locus":"21:39751948-40033704","report":"0","tracking_id":null,"class_code":null,"nearest_ref":null,"tss_id":null,"length":null,"coverage":null,"fpkm_percentile_origin_tissue":null,"fpkm_percentile_collection_tissue":null,"fpkm_percentile_sample_cancer":null,"fpkm_fold_change_benign":null}}]}
    ;

//Width and height
// var w = $('#GECGplot').width();
var w = 700;
var h = 300;
var barPadding = 1; 
var margin = {top: 40, right: 10, bottom: 20, left: 10};

var xScale = d3.scale.linear().
  domain([0, 20]). // your data minimum and maximum
  range([0, h]); // the pixels to map to, e.g., the width of the diagram.

//Create SVG element
var svg = d3.select("#GECGplot")
            .append("svg")
            .attr("width", w)
            .attr("height", h);

svg.selectAll("rect")
   // .data(dataset)
   .data(function(d, i) {
        return plotData[i].nodeData.fpkm;
    })
   .enter()
   .append("rect")
   .attr("x", function(d, i) {
        // alert(plotData.length);
        return i * (w / plotData.length);
    })
   .attr("y", function(d, i) {
        alert(plotData[i].nodeData.fpkm);
        return h - (plotData[i].nodeData.fpkm * 50);  //Height minus data value
    })
   .attr("width", w / plotData.length - barPadding)
   .attr("height", function(d, i) {
        return plotData[i].nodeData.fpkm * 50;  //Just the data value
    })
   .attr("fill", function(d, i) {
        return "rgb(0, 0, " + (plotData[i].nodeData.fpkm * 50) + ")";
    })

    svg.selectAll("text")
    .data(function(d, i) {
        return plotData[i].nodeData.fpkm;
    })
    .enter()
    .append("text")
    .text(function(d, i) {
        return plotData[i].nodeData.fpkm;
    })
    .attr("font-family", "sans-serif")
    .attr("font-size", "11px")
    .attr("fill", "white")
    .attr("text-anchor", "middle")
   .attr("x", function(d, i) {
        return i * (w / plotData.length) + (w / plotData.length - barPadding) / 2;
    })
     .attr("y", function(d, i) {
        return h - (plotData[i].nodeData.fpkm * 50) + 14; 
    })
    // alert(tableSchema); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:17:45.150

干得好。您将数组“children”绑定到矩形元素，因此您不需要参数 'i' 来访问您需要的值。

另外，我建议将 d3.scale.ordinal() 用于您的 x 轴，而不是从数据中显式计算它。更灵活一点。

[http://jsfiddle.net/Cef4D/](http://jsfiddle.net/Cef4D/)

```
 svg.selectAll("rect")
     .data(plotData)
   .enter().append("rect")
     .attr("x", function(d, i) {return i * (w / plotData.length);})
     .attr("y", function(d) {
       return h - (d.nodeData.fpkm * 50);  //Height minus data value
     })
     .attr("width", w / plotData.length - barPadding)
     .attr("height", function(d, i) {
       return d.nodeData.fpkm * 50;  //Just the data value
     })
     .attr("fill", function(d, i) {
       return "rgb(0, 0, " + (d.nodeData.fpkm * 50) + ")";
     }) 
```

# actionscript-3 - AS3 从 url 变量加载外部图像

> ID：15057143
> 
> 赞同：1
> 
> 时间：2013-02-24T21:59:43.067
> 
> 标签：actionscript-3, flash

我想知道如何从 URL 变量加载外部图像以及如何调用 HTML URL 变量。

例如：`embed src="http://domain.com/swf/load.swf?imageUrl=http://domain.com/images/image123.jpg" .... />}`

我正在尝试以这种方式制作图像播放器。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T23:45:45.070

应该像这样简单：

1.  确保已加载 swf
2.  使用[LoaderInfo 的参数对象](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/LoaderInfo.html#parameters)获取变量
3.  使用您认为合适的变量：工作完成！

这是一个快速的片段：

```
this.loaderInfo.addEventListener(Event.COMPLETE,ready);
function ready(event:Event):void{
   var imageURL:String = this.loaderInfo.parameters.imageURL;
   trace("imageURL",imageURL);
   var loader:Loader = addChild(new Loader()) as Loader;
   loader.load(new URLRequest(imageURL));
} 
```

# c++ - OpenGL MRT glDrawBuffers() 参数编号和行为

> ID：15057145
> 
> 赞同：1
> 
> 时间：2013-02-24T21:59:59.817
> 
> 标签：c++, opengl, rendering, textures, fbo

我总共有 5 个渲染目标。我使用相同的着色器写入前 4 个，然后在单独的通道中写入最后一个。

在调用前 4 个目标的渲染之前，我调用：

```
GLenum drawBuffers[] = { GL_COLOR_ATTACHMENT0, GL_COLOR_ATTACHMENT1,  GL_COLOR_ATTACHMENT2, GL_COLOR_ATTACHMENT3};
glDrawBuffers(4, drawBuffers); 
```

但是，当我将其称为第二遍并且只想写入最后一个，即第五个目标时，为什么下面会给出奇怪的结果？

```
GLenum drawBuffers[] = { GL_COLOR_ATTACHMENT4 };
glDrawBuffers(1, drawBuffers); 
```

为什么我必须改为使用：

```
GLenum drawBuffers[] = { GL_NONE, GL_NONE, GL_NONE, GL_NONE, GL_COLOR_ATTACHMENT4 };
glDrawBuffers(5, drawBuffers); 
```

这仅仅是 glDrawBuffers() 的工作原理，还是由其他原因引起的？

编辑：关于 Jarrods 评论的固定代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T23:30:44.087

是的，这就是[工作](http://www.opengl.org/wiki/Framebuffer#Draw_color_buffers)[原理`glDrawBuffers`](http://www.opengl.org/wiki/Framebuffer#Draw_color_buffers)。但这是有原因的。

片段着色器写入映射到某些“颜色编号”的颜色输出。这些与 GL_COLOR_ATTACHMENT''i'' 数字*无关。*的全部要点`glDrawBuffers`是将这些片段颜色编号映射到帧缓冲区中的实际缓冲区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:09:26.207

[http://www.opengl.org/sdk/docs/man/xhtml/glDrawBuffers.xml](http://www.opengl.org/sdk/docs/man/xhtml/glDrawBuffers.xml)

第二个参数必须是类型，`const GLenum*`即指针“指向符号常量数组，指定将写入片段颜色或数据值的缓冲区”。

`GL_COLOR_ATTACHMENT4`所以只是作为第二个参数传递是错误的类型。您需要将指针传递给`GLEnum`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T09:17:13.860

我发现 glDrawBuffers() 有问题。例如 tmp = {attement_color0, attachement_color2} glDrawBuffers(tmp)。在着色器中：gl_fragdata[0]=... gl_fragdata[2]=...

或者您可以使用布局位置来定义 attments 输出。但有时，至少在我的电脑中，它不起作用。我的意思是 attachment_color2 没有确切的输出。

# apache - .htaccess 301 将旧域上的所有页面重定向到新域上的单个页面

> ID：15057146
> 
> 赞同：6
> 
> 时间：2013-02-24T22:00:05.860
> 
> 标签：apache, .htaccess, redirect, http-status-code-301

我希望将旧域上的**每个页面重定向到新域上的****单个页面**。它还应该重定向 www 和非 www 版本。对域 old.com 的每个请求，无论它可能是什么，都应该指向 www.new.com 根。

```
old.com/1.php
www.old.com/2.php
old.com/2.php
old.com/links/index.php
old.com/about-us.html
old.com/?string=1 
```

应该全部重定向到：

www.new.com/

我正在寻找 .htaccess 解决方案。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-24T22:04:27.610

您可以在 old.com 虚拟主机中使用 RedirectMatch

```
RedirectMatch permanent .* http://www.new.com/ 
```

`Redirect`将匹配的 URI 的尾随部分附加到重定向 URI，但您可以使用括号和引用`RedirectMatch`选择要传输的部分（如果有） 。`$number`

如果旧域和新域必须是磁盘上同一个文档根目录的别名，那么您可能必须使用 mod_rewrite

```
RewriteEngine on
RewriteCond %{HTTP_HOST} old\.com$
RewriteRule .* http://www.new.com/ [L,R=301] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-10T23:12:14.517

这已经得到了回答，但这里的代码完全包含有用的注释，因此人们可以参考，以便他们以后忘记它的作用。

把它放在你的 .htaccess 文件中：

```
## Each and every page on old domain redirects to single page
## By appending question mark to new domain, query strings are removed
RewriteEngine on
RewriteCond %{HTTP_HOST} old\.com$
RewriteRule .* http://www.new.com/? [L,R=301] 
```

您还可以重定向到另一个域上的子目录，就像我需要这样做的情况一样：

```
## Each and every page on old domain redirects to single page
## By appending question mark to new domain, query strings are removed
RewriteEngine on
RewriteCond %{HTTP_HOST} old\.com$
RewriteRule .* http://www.new.com/sub-directory/? [L,R=301] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T23:52:44.697

这将处理您的所有重定向，包括查询字符串。对不起格式，我在打电话:)

```
RewriteCond %{HTTP_HOST} old\.com$ RewriteCond %{QUERY_STRING} .+
RewriteRule (.*) http://www.new.com$1?%{QUERY_STRING} [L,R=301,QSA]

RewriteCond %{HTTP_HOST} old\.com$
RewriteRule (.*) http://www.new.com$1 [L,R=301,QSA] 
```

# android - Android Listview 搜索过滤器

> ID：15057148
> 
> 赞同：0
> 
> 时间：2013-02-24T22:00:07.917
> 
> 标签：android, listview, search, filter, search-engine

我正在尝试对 Android 进行列表视图搜索。我发现很多教程都是这样做的，搜索栏放在顶部，如果你在框中输入，结果就会被过滤掉。

在我的应用程序中，我想在过滤完成后单击给定项目，我已经实现了 setOnItemClickListener。问题是，在过滤了我要打开的每个类的位置后，会打开不正确的页面。我无法找到解决方案....

这是java代码：

```
package com.equations.search;

import java.util.ArrayList;
import java.util.HashMap;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.view.WindowManager;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.TextView;

public class EquationsSearch extends Activity {
// List view
private ListView lv;

// Listview Adapter
ArrayAdapter<String> adapter;

// Search EditText
EditText inputSearch;

// ArrayList for Listview
ArrayList<HashMap<String, String>> productList;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.equations_search);

    // Listview Data
    final String products[] = { "Dell Inspiron", "HTC One X",
            "HTC Wildfire S", "HTC Sense", "HTC Sensation XE" };

    lv = (ListView) findViewById(R.id.list_view);
    inputSearch = (EditText) findViewById(R.id.inputSearch);

    // Adding items to listview
    adapter = new ArrayAdapter<String>(this,
            R.layout.equations_search_list, R.id.product_name, products);
    lv.setAdapter(adapter);

    /**
     * Enabling Search Filter
     * */

    inputSearch.addTextChangedListener(new TextWatcher() {

        public void onTextChanged(CharSequence cs, int arg1, int arg2,
                int arg3) {
            // When user changed the Text
            EquationsSearch.this.adapter.getFilter().filter(cs);
        }

        public void beforeTextChanged(CharSequence arg0, int arg1,
                int arg2, int arg3) {
            // TODO Auto-generated method stub

        }

        public void afterTextChange(Editable arg0) {
            // TODO Auto-generated method stub

        }

        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub

        }
    });
    lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            // if(position == 1)
            String openClass = products[position];
            if (openClass.equals("HTC Wildfire S")) {
                // code specific to first list item
                Intent myIntent = new Intent(view.getContext(), A6262.class);
                startActivityForResult(myIntent, 0);
            }
        }
    });

}
} 
```

这是xml equations_search.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<!-- Editext for Search -->
<EditText android:id="@+id/inputSearch"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="Search products.."
    android:inputType="textVisiblePassword"/>

<!-- List View -->
<ListView
    android:id="@+id/list_view"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

和 equations_search_list.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<!-- Single ListItem -->

<!-- Product Name -->
<TextView android:id="@+id/product_name"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="10dip"
    android:textSize="16dip"
    android:textStyle="bold"/>    

</LinearLayout> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T22:08:50.243

而不是`products[position]`，使用`adapter.getItem(position)`. 当`ListView`不在过滤器模式下时，这两件事将是相同的。但是，在过滤模式下，`getItem()`会考虑过滤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:09:16.617

由于过滤，ListAdapter 将改变它当前显示的项目的相对位置。您应该始终使用`getItem(position)`来检索正确的项目。

# linux - 在 amazon linux 上安装 ffmpeg - cpp、gcc 和 libstdc++ 依赖项

> ID：15057151
> 
> 赞同：1
> 
> 时间：2013-02-24T22:00:14.857
> 
> 标签：linux, amazon-web-services, yum

我对复杂的配置相当陌生，并且正在尝试使用此处的说明在 amazon linux EC2 实例上设置 ffmpeg ...

[http://wiki.razuna.com/display/ecp/FFMpeg+Installation+on+CentOS+and+RedHat](http://wiki.razuna.com/display/ecp/FFMpeg+Installation+on+CentOS+and+RedHat)

...但是我在尝试以下行时碰壁了...

```
yum install glibc gcc gcc-c++ autoconf automake libtool 
```

这是我遇到的错误...

```
Package matching glibc-2.5-107.x86_64 already installed. Checking for update.
Package matching autoconf-2.59-12.noarch already installed. Checking for update.
Package matching automake-1.9.6-2.3.el5.noarch already installed. Checking for update.
Resolving Dependencies
--> Running transaction check
---> Package gcc.x86_64 0:4.1.2-54.el5 will be installed
--> Processing Dependency: cpp = 4.1.2-54.el5 for package: gcc-4.1.2-54.el5.x86_64
Package cpp is obsoleted by cpp44, but obsoleting package does not provide for requirements
---> Package gcc-c++.x86_64 0:4.1.2-54.el5 will be installed
--> Processing Dependency: libstdc++ = 4.1.2-54.el5 for package: gcc-c++-4.1.2-54.el5.x86_64
--> Processing Dependency: libstdc++-devel = 4.1.2-54.el5 for package: gcc-c++-4.1.2-54.el5.x86_64
---> Package libtool.x86_64 0:1.5.22-7.el5_4 will be installed
--> Running transaction check
---> Package gcc.x86_64 0:4.1.2-54.el5 will be installed
--> Processing Dependency: cpp = 4.1.2-54.el5 for package: gcc-4.1.2-54.el5.x86_64
Package cpp is obsoleted by cpp44, but obsoleting package does not provide for requirements
---> Package gcc-c++.x86_64 0:4.1.2-54.el5 will be installed
--> Processing Dependency: libstdc++ = 4.1.2-54.el5 for package: gcc-c++-4.1.2-54.el5.x86_64
---> Package libstdc++-devel.x86_64 0:4.1.2-54.el5 will be installed
--> Processing Dependency: libstdc++ = 4.1.2-54.el5 for package: libstdc++-devel-4.1.2-54.el5.x86_64
--> Processing Dependency: /usr/lib64/libstdc++.so.6 for package: libstdc++-devel-4.1.2-54.el5.x86_64
--> Processing Dependency: /usr/lib64/libstdc++.so.6 for package: libstdc++-devel-4.1.2-54.el5.x86_64
--> Processing Conflict: gcc-4.6.2-1.8.amzn1.noarch conflicts libtool < 2.2.10-4.6.2
--> Processing Conflict: gcc-c++-4.6.2-1.8.amzn1.noarch conflicts libtool < 2.2.10-4.6.2
--> Finished Dependency Resolution
Error: Package: gcc-4.1.2-54.el5.x86_64 (centos)
           Requires: cpp = 4.1.2-54.el5
           Installed: cpp46-4.6.2-2.65.amzn1.x86_64 (@amzn-main)
               cpp = 4.6.2-2.65.amzn1
           Available: cpp-4.1.2-54.el5.x86_64 (centos)
               cpp = 4.1.2-54.el5
               cpp = 4.1.1-52.el5
           Available: cpp44-4.4.6-4.77.amzn1.x86_64 (amzn-main)
               cpp = 4.4.6-4.77.amzn1
           Available: cpp47-4.7.0-5.68.amzn1.x86_64 (amzn-main)
               cpp = 4.7.0-5.68.amzn1
           Available: cpp47-4.7.2-2.69.amzn1.x86_64 (amzn-updates)
               cpp = 4.7.2-2.69.amzn1
Error: Package: libstdc++-devel-4.1.2-54.el5.x86_64 (centos)
           Requires: /usr/lib64/libstdc++.so.6
           Available: libstdc++-4.1.2-54.el5.x86_64 (centos)
               Not found
Error: gcc-c++ conflicts with libtool
Error: gcc conflicts with libtool
Error: Package: gcc-c++-4.1.2-54.el5.x86_64 (centos)
           Requires: libstdc++ = 4.1.2-54.el5
           Installed: libstdc++46-4.6.2-2.65.amzn1.x86_64 (@amzn-main)
               libstdc++ = 4.6.2-2.65.amzn1
           Installed: libstdc++47-4.7.2-2.69.amzn1.x86_64 (@amzn-updates)
               libstdc++ = 4.7.2-2.69.amzn1
           Available: libstdc++-4.1.2-54.el5.i386 (centos)
               libstdc++ = 4.1.2-54.el5
               libstdc++ = 4.1.1-52.el5
           Available: libstdc++44-4.4.6-4.77.amzn1.i686 (amzn-main)
               libstdc++ = 4.4.6-4.77.amzn1
           Available: libstdc++47-4.7.0-5.68.amzn1.i686 (amzn-main)
               libstdc++ = 4.7.0-5.68.amzn1
Error: Package: libstdc++-devel-4.1.2-54.el5.x86_64 (centos)
           Requires: libstdc++ = 4.1.2-54.el5
           Installed: libstdc++46-4.6.2-2.65.amzn1.x86_64 (@amzn-main)
               libstdc++ = 4.6.2-2.65.amzn1
           Installed: libstdc++47-4.7.2-2.69.amzn1.x86_64 (@amzn-updates)
               libstdc++ = 4.7.2-2.69.amzn1
           Available: libstdc++-4.1.2-54.el5.i386 (centos)
               libstdc++ = 4.1.2-54.el5
               libstdc++ = 4.1.1-52.el5
           Available: libstdc++44-4.4.6-4.77.amzn1.i686 (amzn-main)
               libstdc++ = 4.4.6-4.77.amzn1
           Available: libstdc++47-4.7.0-5.68.amzn1.i686 (amzn-main)
               libstdc++ = 4.7.0-5.68.amzn1
 You could try using --skip-broken to work around the problem
 You could try running: rpm -Va --nofiles --nodigest 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-18T15:26:27.410

以下是如何使用静态构建在 Linux 上安装 FFMPEG。

一个很好的常见问题解答在这里：[https ://www.johnvansickle.com/ffmpeg/faq/](https://www.johnvansickle.com/ffmpeg/faq/)

SSH 进入您的实例并成为 root

```
sudo su - 
```

转到 /usr/local/bin 目录

```
cd /usr/local/bin 
```

在 /usr/local/bin 目录中，创建一个“ffmpeg”目录

```
mkdir ffmpeg 
```

进入新目录

```
cd ffmpeg 
```

现在，打开浏览器并转到[https://johnvansickle.com/ffmpeg/](https://johnvansickle.com/ffmpeg/)上的 FFMPEG 静态构建列表并选择最新版本。

在 /usr/local/bin/ffmpeg 目录中，键入以下命令以下载您选择的静态构建

```
wget https://johnvansickle.com/ffmpeg/builds/ffmpeg-git-amd64-static.tar.xz 
```

现在，解压它...

```
tar -xzf ffmpeg-git-amd64-static.tar.xz 
```

运行它并检查最新版本是什么

```
./ffmpeg -version 
```

输出应该是这样的

```
ffmpeg version N-60675-g8fe1076
built on Feb 16 2014 05:45:47 with gcc 4.6 (Debian 4.6.3-1)
configuration: --prefix=/root/ffmpeg-static/64bit --extra-cflags='-I/root/ffmpeg-
static/64bit/include -static' --extra-ldflags='-L/root/ffmpeg-static/64bit/lib -static' --
extra-libs='-lxml2 -lexpat -lfreetype' --enable-static --disable-shared --disable-ffserver --
disable-doc --enable-bzlib --enable-zlib --enable-postproc --enable-runtime-cpudetect --
enable-libx264 --enable-gpl --enable-libtheora --enable-libvorbis --enable-libmp3lame --
enable-gray --enable-libass --enable-libfreetype --enable-libopenjpeg --enable-libspeex --
enable-libvo-aacenc --enable-libvo-amrwbenc --enable-version3 --enable-libvpx
libavutil 52\. 64.100 / 52\. 64.100
libavcodec 55\. 52.102 / 55\. 52.102
libavformat 55\. 32.101 / 55\. 32.101
libavdevice 55\. 9.101 / 55\. 9.101
libavfilter 4\. 1.102 / 4\. 1.102
libswscale 2\. 5.101 / 2\. 5.101
libswresample 0\. 17.104 / 0\. 17.104
libpostproc 52\. 3.100 / 52\. 3.100 
```

如果您希望能够从任何目录执行 FFMPEG，只需在 /usr/bin 中创建一个符号链接，如下所示：

```
ln -s /usr/local/bin/ffmpeg/ffmpeg /usr/bin/ffmpeg 
```

第一部分（/usr/local/bin/ffmpeg/ffmpeg）是我解压缩文件后文件所在的位置。第二部分（/usr/bin/ffmpeg）是我们希望符号链接去的地方

现在，您应该可以从任何地方运行命令“ffmpeg”

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-05-13T19:36:44.653

您可以从[http://ffmpeg.gusari.org/static/64bit](http://ffmpeg.gusari.org/static/64bit)下载静态版本。它可以在 64 位 Amzn Linux 上正常运行。

# tomcat - Ubuntu12.04上tomcat6安装

> ID：15057153
> 
> 赞同：3
> 
> 时间：2013-02-24T22:00:21.437
> 
> 标签：tomcat, ubuntu, tomcat6, apt-get

我想在我的 ubuntu 服务器上安装 tomcat6，但是当我说 `sudo apt-get install tomcat6`. 当我安装tomcat7时，我可以成功安装它。但是我在安装tomcat6时遇到了这个错误，

```
 ubuntu@ip-10-202-47-144:/var/solr$ sudo apt-get install tomcat6
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
 tomcat6 : Depends: tomcat6-common (>= 6.0.35-1ubuntu3.2) but it is not going to be installed
E: Unable to correct problems, you have held broken packages. 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T22:03:46.353

确保在安装 tomcat 6 之前删除 tomcat 7 或任何其他版本的 tomcat，这是删除它的方法

```
sudo apt-get remove tomcat7-common 
```

这是给你的链接 [https://askubuntu.com/questions/173981/installing-tomcat-7-on-ubuntu-server-12-04](https://askubuntu.com/questions/173981/installing-tomcat-7-on-ubuntu-server-12-04)

# ios - 无法生成蒙版图像；CISourceOverCompositing 未按预期工作

> ID：15057161
> 
> 赞同：1
> 
> 时间：2013-02-24T22:01:22.357
> 
> 标签：ios, objective-c, ios6, ios-simulator, core-image

我基本上是想让[“匿名面孔过滤器配方”示例](http://developer.apple.com/library/IOs/#documentation/GraphicsImaging/Conceptual/CoreImaging/ci_filer_recipes/ci_filter_recipes.html#//apple_ref/doc/uid/TP30001185-CH4-SW22)在 iOS 模拟器中工作。

没有错误或警告，但似乎“CISourceOverCompositing”过滤器没有按预期工作。在 maskImage 上绘制的圆圈是破坏性的，而不是相加的。例如，如果找到 5 个面，则绘制 5 个圆圈，但在 maskImage 上只显示最后一个。

**我怎样才能使每个圆圈以加法方式绘制到 maskImage ？**

这是我用来构建掩码的代码：

```
// Create a green circle to cover the rects that are returned.
CIImage *maskImage = nil;
for (CIFeature *f in faces){
    CIVector *circleCenter = [CIVector vectorWithX:f.bounds.origin.x+f.bounds.size.width/2.0 Y:f.bounds.origin.y+f.bounds.size.height/2.0];
    CGFloat circleRadius = MIN([f bounds].size.width, [f bounds].size.height)/1.5;
    CIFilter *radialGradient = [CIFilter filterWithName:@"CIRadialGradient" keysAndValues:
                                @"inputRadius0", [NSNumber numberWithFloat:circleRadius],
                                @"inputRadius1", [NSNumber numberWithFloat:circleRadius+1.0f],
                                @"inputColor0", [CIColor colorWithRed:0.0 green:1.0 blue:0.0 alpha:1.0],
                                @"inputColor1", [CIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:1.0],
                                @"inputCenter", circleCenter, nil];
    CIImage *circleImage = [radialGradient valueForKey:@"outputImage"];
    if (maskImage == nil) {
        maskImage = circleImage;
    } else {
        maskImage = [[CIFilter filterWithName:@"CISourceOverCompositing" keysAndValues:@"inputImage", circleImage, @"inputBackgroundImage",maskImage, nil] valueForKey:@"outputImage"];
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-05T20:43:18.743

[不幸的是，在Anonymous Faces Filter Recipe](https://developer.apple.com/library/IOs/documentation/GraphicsImaging/Conceptual/CoreImaging/ci_filer_recipes/ci_filter_recipes.html)上找到的源代码没有立即编译或工作。**CISourceOverCompositing**过滤器的问题可以通过`inputColor1`参数和 alpha 通道找到。用以下颜色替换`inputColor1`颜色，你应该很高兴：

`@"inputColor1", [CIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.0]`

# python - 导入 Tkinter 因 python 2.7.3 Mac OSX 10.8.2 而失败

> ID：15057166
> 
> 赞同：3
> 
> 时间：2013-02-24T22:01:28.950
> 
> 标签：python, macos, tkinter, tcl, tk

我已经广泛阅读了这个问题，但没有找到可用的解决方案。他们中的许多人建议从头开始重建 python。如果可能的话，这是我想避免的障碍。所以我要最后一次，绝望地回答这个问题。它不应该与 stackoverflow 上的许多类似问题重复，因为我相信它特定于我的安装，即使症状与其他症状相似。

这是我安装的当前状态。我已经安装了很多其他的包，像`numpy`并且`matplotlib`没有问题，但是这个让我很难过。

```
MacBookPro:lib-tk rebcabin$ arch -x86_64 /opt/local/bin/python
Python 2.7.3 (default, Nov 17 2012, 19:54:34) 
[GCC 4.2.1 Compatible Apple Clang 4.1 ((tags/Apple/clang-421.11.66))] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import sys
>>> sys.path
['', ... 
'/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk', 
...] 
```

注意`lib-tk`路径。我们去看看`lib-tk`：

```
MacBookPro:lib-tk rebcabin$ ls -la
total 3704
...
-rw-r--r--    1 root  wheel  155634 Nov 17 19:55 Tkinter.py
-rw-r--r--    1 root  wheel  224887 Nov 17 19:55 Tkinter.pyc
-rw-r--r--    1 root  wheel  224887 Nov 17 19:55 Tkinter.pyo
... 
```

让我们尝试导入它

```
>>> import Tkinter
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "Tkinter.py", line 39, in <module>
    import _tkinter # If this fails your Python may not be configured for Tk
ImportError: No module named _tkinter 
```

我在这个主题上所做的大部分阅读都来自于将上面的错误粘贴到谷歌中。一些建议非常花言巧语且毫无用处：“只需在 setup.py 中重新配置你的 python，输入‘make’，你的问题就解决了。” 哪个setup.py？我的 python 目录中有几十个。哪个makefile？同上。也许上下文是从头开始构建 python，我将再次避免，因为我不想冒险破坏所有其他有效的包。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T22:04:25.483

根据路径，您似乎可能通过 macports 安装了 python。如果是这种情况，请寻找类似的东西[`py-tkinter`](http://www.macports.org/ports.php?by=name&substr=Tkinter)- 例如

```
sudo port install py27-tkinter 
```

# asp.net-mvc - 尝试使用 Mono 运行 MVC 3 网站和 EntityFramework 会给出 MissingMethodException

> ID：15057167
> 
> 赞同：4
> 
> 时间：2013-02-24T22:01:31.807
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-3, mono, xamarin-studio

我使用 Visual Studio 2012 在 Windows 7 上构建了一个 ASP.NET MVC 3 Web 应用程序。我的应用程序在 Visual Studio 中构建和运行时没有任何问题。我想在 OS X 10.8.2 上使用 Xamarin Studio 4.0 和 Mono 3.0.4 编辑和运行该 Web 应用程序。这是我迄今为止尝试过的：

1.  在 Xamarin Studio 中打开了我的 .sln。
2.  删除了对 System.Data.Entity 和 System.Web.Entity 的引用。
3.  将 System.Web.Helpers（版本 1.0.0.0）、System.Web.Mvc（版本 3.0.0.0）和 System.Web.WebPages（版本 1.0.0.0）.dll 复制到 bin 文件夹。
4.  删除了对 System.Web.Helpers、System.Web.Mvc 和 System.Web.Webpages 的旧引用。
5.  在我的 *.Designer.cs 文件中将“使用 System.Data.*”替换为“使用 System.Data.Entity.Core.*”。
6.  删除了对 EntityFramework（版本 4.x）的引用。
7.  从我的 bin 文件夹中删除了 EntityFramework.dll 和 EntityFramework.xml。
8.  添加了对 /Library/Frameworks/Mono.framework/Libraries/mono/4.5/EntityFramework.dll（版本 6.0.0.0）的引用。
9.  点击运行。

单击运行后，出现以下异常：

```
Exception rethrown at [0]: 
 ---> System.TypeInitializationException: An exception was thrown by the type initializer for System.Web.Configuration.HostingEnvironmentSection ---> System.MissingMethodException: Method not found: 'System.Configuration.ConfigurationProperty..ctor'.
  --- End of inner exception stack trace ---
  at (wrapper managed-to-native) System.Reflection.MonoCMethod:InternalInvoke (System.Reflection.MonoCMethod,object,object[],System.Exception&)
  at System.Reflection.MonoCMethod.Invoke (System.Object obj, BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] parameters, System.Globalization.CultureInfo culture) [0x000b9] in /Users/duncan/git/mono/bockbuild/profiles/mono-mac-release/build-root/mono-3.0.4/_build/mono-3.0.4.git/mcs/class/corlib/System.Reflection/MonoMethod.cs:524 
  --- End of inner exception stack trace ---
  at (wrapper xdomain-invoke) System.AppDomain:DoCallBack (System.CrossAppDomainDelegate)
  at (wrapper remoting-invoke-with-check) System.AppDomain:DoCallBack (System.CrossAppDomainDelegate)
  at System.Web.Hosting.ApplicationHost.CreateApplicationHost (System.Type hostType, System.String virtualDir, System.String physicalDir) [0x002fb] in /Users/duncan/git/mono/bockbuild/profiles/mono-mac-release/build-root/mono-3.0.4/_build/mono-3.0.4.git/mcs/class/System.Web/System.Web.Hosting/ApplicationHost.cs:244 
  at Mono.WebServer.VPathToHost.CreateHost (Mono.WebServer.ApplicationServer server, Mono.WebServer.WebSource webSource) [0x0003a] in /Users/builder/data/lanes/mono-mac-ui-refresh-master/3108f76b/source/bockbuild/profiles/mono-mac-release/build-root/xsp-2.11/_build/mono-xsp-d3e2f80/src/Mono.WebServer/VPathToHost.cs:150 
  at Mono.WebServer.XSP.Server.RealMain (System.String[] args, Boolean root, IApplicationHost ext_apphost, Boolean quiet) [0x00775] in /Users/builder/data/lanes/mono-mac-ui-refresh-master/3108f76b/source/bockbuild/profiles/mono-mac-release/build-root/xsp-2.11/_build/mono-xsp-d3e2f80/src/Mono.WebServer.XSP/main.cs:486 
  at Mono.WebServer.XSP.Server.Main (System.String[] args) [0x00025] in /Users/builder/data/lanes/mono-mac-ui-refresh-master/3108f76b/source/bockbuild/profiles/mono-mac-release/build-root/xsp-2.11/_build/mono-xsp-d3e2f80/src/Mono.WebServer.XSP/main.cs:264 
```

我已经用谷歌搜索了这个例外，但我还没有找到解决方案。我缺少参考吗？是否有使用 MVC 3 或 4 以及在 Mono 下运行的实体框架 4 或 6 的工作示例项目？

# php - 禁用命名空间使用是某些类/文件

> ID：15057168
> 
> 赞同：1
> 
> 时间：2013-02-24T22:01:51.883
> 
> 标签：php, namespaces

我正在为我的 CMS 开发一个插件系统，在我的 CMS 中，我经常使用命名空间。我想要的是插件的开发人员不必在他们的插件中使用命名空间，因为对于以前没有使用过命名空间的开发人员来说，它们可能非常复杂。命名空间的主要问题是可以注册的事件。现在，插件开发人员必须使用 加载 Event 类`use \events\Event;`，如果他们只是导入该类，他们仍然无法使用`new Event();`，因为它使用命名空间。我想要的是他们可以使用`new Event();`（类本身将由 CMS 的自动加载器自动加载，因此不需要包含）。

所以基本上，我想在某些类或文件中禁用命名空间。所以`new \events\Event();`看起来就像`new Event();`没有`namespace events;`从`Event`类中删除。

我希望我解释清楚，我不是最好的解释这种东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:07:22.787

不，换句话说，这行不通：

```
namespace Foo {
    class Event {}
    include('plugin.php');   // plugin.php cannot just do new Event();
} 
```

这应该不是问题，因为您的 CMS 的插件开发文档应该清楚命名空间的使用，插件开发人员只需要编写类似的东西

```
use Plugin\Namespace\Events\MyEventType; 
```

`MyEventType`无需限定即可引用。当然，这对插件作者来说并不过分吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:16:13.760

AFAIK 这是不可能的，但是如果您使用包含所需文件的加载器，以便插件作者可以包含一个类，`loader::load('someclass');`您可以让加载器返回带有命名空间的完整类名，并且插件可以使用它：

```
$em_classname = Loader::load('eventmanager');
//dymamic use
$em = new $em_classname;
$em->registerEvent();
//static use
$em_classname::registerEvent(); 
```

对于动态使用，您甚至可以返回类的实例而不是类名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T22:04:26.277

我不确定我是否完全理解，但要在“全局”命名空间中运行代码，您可以这样做：

```
namespace {
    // this runs in global namespace
} 
```

另请参阅：[在同一文件中定义多个命名空间](http://www.php.net/manual/en/language.namespaces.definitionmultiple.php)

# node.js - Grunt 给出了一个奇怪的“WARN: ERROR: Unexpected token...”消息

> ID：15057174
> 
> 赞同：6
> 
> 时间：2013-02-24T22:02:43.107
> 
> 标签：node.js, gruntjs

我正在为以下名为“test.css”的 css 文件设置 grunt 缩小任务：

```
body{
 background-color: #fff;
 text-align: left;
} 
```

我在运行时收到以下消息`grunt`：

`WARN: ERROR: Unexpected token: punc ({) [test.css:1,4]`

我的“Gruntfile.js”文件目前看起来像这样：

```
module.exports = function(grunt) {
  grunt.initConfig({
  pkg: grunt.file.readJSON('package.json'),
  uglify: {
    options: {
      banner: '/*! <%= pkg.name %> <%= grunt.template.today("yyyy-mm-dd") %> */\n'
    },
    min: {
      src: 'test.css',
      dest: 'test.min.css'
    }
  }
  });

  grunt.loadNpmTasks('grunt-contrib-uglify');
  grunt.registerTask('default', ['uglify']);
}; 
```

我的“package.json”文件目前看起来像这样：

```
{
  "name": "kaidez",
  "version": "0.1.0",
  "devDependencies": {
    "grunt": "~0.4.0",
    "grunt-contrib-uglify": "~0.1.1"
  }
} 
```

运行 grunt v4.0 和 node v0.8.20，两者都全局安装。`grunt-cli`和都已`uglify`安装。“Gruntfile.js”、“package.json”和“test.css”在同一个目录下。所有这些文件都在 WordPress 网站的“主题”目录中，但我不认为这就是问题所在。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T10:30:08.633

uglify 任务仅适用于 JavaScript 文件。对于 CSS，请查看[此答案](https://stackoverflow.com/questions/13713273/how-to-concatenate-and-minify-multiple-css-and-javascript-files-with-grunt-js/13749226#13749226)，其中建议使用 grunt-css（引用 Jonathan Lonowski 评论）

# mysql - mysql 时差计算

> ID：15057178
> 
> 赞同：0
> 
> 时间：2013-02-24T22:03:00.370
> 
> 标签：mysql, math

从 mysql 结果中，我得到了这样的结果

```
last_updated_rta    gmt_timestamp        last_record_update       diff
  02:14:58       2013-02-24 02:15:37    2013-02-23 19:15:37      00:00:39
  01:01:00       2013-02-24 01:30:34    2013-02-23 18:30:34      00:29:34
  23:59:59       2013-02-24 00:29:33    2013-02-23 17:29:33     -23:30:26
  00:00:00       2013-02-24 00:29:33    2013-02-23 17:29:33      00:29:33 
```

'diff' 列是 timediff 计算：

```
 TIMEDIFF(TIME(gmt_timestamp),TIME(last_updated_rta)) AS diff 
```

这就是问题所在。请注意“差异”列中的“-23:30:26”值。我不应该有负面的。仅当 last_updated_rta 时间在午夜 (00:00:00) 之前并且 gmt_timestamp 日期是第二天时才会发生这种情况。我认为，部分问题是我没有得到“last_updated_rta”列的日期值。我只有时间。

我怎样才能更正这个公式来解决这个问题，这样我就不会得到负值？

提前致谢，

*   d -

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:13:58.713

假设 last_updated_rta 总是**早**于 gmt_timestamp，您可以假设 last_updated_rta 的日期与 gmt_timestamp 相同。如果 last_updated_rta 碰巧更**晚**（diff 给出负数）那么你知道它的日期应该是前一天

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T22:06:27.080

如果你*知道*你不会得到任何负值，那么测试一下结果是否为负，如果是，则在 diff 的值上加 1 天。

# javascript - 通过 Ruby 构建 JavaScript 请求

> ID：15057183
> 
> 赞同：0
> 
> 时间：2013-02-24T22:04:00.647
> 
> 标签：javascript, ruby, mechanize

如果标题令人困惑，我很抱歉。

我正在尝试从我的工作网站上抓取我的日程安排更新。我正在使用 Ruby 和机械化。我已经成功登录了我的工作网站，但是，一旦登录，所有的链接都是 JavaScript 链接，Mechanize 不能很好地使用它。

在做了一些研究之后，我看到了一些针对类似问题的建议；我可以模拟链接发出的请求，而不是单击链接，尽管我完全不确定如何做到这一点。

链接后面的代码是：

```
<a href="JavaScript:document.getElementById('schedForm').submit()">My Work Schedule </a> 
```

我该如何在 Ruby 中解决这个问题？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T23:39:36.463

单击链接时，它会提交一个表单。用机械化完成同样的事情：

```
page.form(:id => 'schedForm').submit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T22:13:57.120

据我所知，Mechanize 无法进行 JavaScript 调用。如果您需要与 JavaScript 交互，我会推荐[Watir](http://watir.com/)。

# c# - C# Windows 窗体 - 链接相同窗体的实例

> ID：15057184
> 
> 赞同：1
> 
> 时间：2013-02-24T22:04:11.570
> 
> 标签：c#, winforms

我想创建一个基于单个模板表单的 32 个 Windows 表单，并且这些实例应该相互链接。也就是说，每个 Form 都有一个用于调用下一个实例的按钮，依此类推。我可以创建任意数量的表单，但是如何将这些实例链接在一起？

这是我用来创建几个子表单的：

```
public partial class MainForm : Form
{
    public MainForm()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        ChildForm child = new ChildForm();
        child.Show();
    }
} 
```

事件顺序如下：

*   用户启动应用程序，显示主窗体（只有“打开子”按钮）
*   用户按下“打开子”按钮，子表单的第一个实例打开
*   第一个子表单（标题“子表单 1”）有按钮“打开子表单 2”
*   如果用户按下“打开子表单 2”，子表单 1 被隐藏，子表单 2 被显示
*   如果到达最后一个子表单，则环绕到子表单 1

欢迎任何想法！

问候

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:25:02.197

您可以创建表单的静态集合，在构造函数中将表单实例添加到列表中（并在处置期间将其删除）。要找出下一个表单，您可以找到当前表单的索引并根据该索引在列表中获取下一个表单。创建一个带有两个按钮的表单，并按如下方式对其进行修改以进行测试。

```
 public partial class Form1 : Form
    {
        static List<Form1> formList = new List<Form1>();
        public Form1()
        {
            InitializeComponent();
            formList.Add(this);
        }

        private void button1_Click(object sender, EventArgs e)
        {
            int idx = formList.IndexOf(this);
            int nextIdx = (idx == formList.Count()-1 ?  0: idx+1 );

            Form1 nextForm = formList[nextIdx];
            nextForm.changeTextAndFocus("next form: " + nextIdx);
        }

        // moves to the next form and changes the text
        public void changeTextAndFocus(string txt)
        {
            this.Focus();
            this.Text = txt;
        }

        //Creates 5 forms
        private void button2_Click(object sender, EventArgs e)
        {
            for (int i = 0; i < 5; i++)
            {
                Form1 newForm = new Form1();
                newForm.Show();
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T22:17:36.667

我真的不知道你打算做什么:)。如果要计算多个表单，可以在表单中添加属性 Number。并从那里向上搜索。

主窗体；

```
public partial class Form1 : Form
{
     public Form1()
     {
         InitializeComponent();
     }

     private void button1_Click(object sender, EventArgs e)
     {
         ChildForm first = new ChildForm();
         first.Number = 1;
         first.Show();
     }
} 
```

子窗体

```
public partial class ChildForm : Form
{
    public ChildForm()
    {
        // createButton here
    }
    private void button_Click(object sender, EventArgs e)
    {
        ChildForm _childForm = new ChildForm();
        _childForm.Owner = this;
        _childForm.Number = this.Number + 1;
        this.Hide();
        _childForm.Show();
    }

    public void FirstChildForm()
    {
        if (this.Number != 1) //maybe not that static
        {
            (this.Owner as ChildForm).FirstChildForm();
            this.Close(); // or hide or whatever
        }
    }
    public int Number
    { get; set; }
} 
```

未经测试的代码，希望这会有所帮助:)。

# javascript - HTML5 文件系统：如何撤销授予的配额？

> ID：15057185
> 
> 赞同：4
> 
> 时间：2013-02-24T22:04:12.080
> 
> 标签：javascript, html, google-chrome, google-chrome-extension

我`window.webkitStorageInfo.requestQuota()`用来获取磁盘配额。一切正常，但我不能出于调试目的撤销已授予的配额。似乎没有API。而且我无法找到如何通过 Chrome 界面完成。我找到了这个链接：`chrome://quota-internals/`但它只提供了一个只读信息。我正在开发 chrome 扩展程序，甚至卸载/安装它也无济于事。谁知道如何重置站点（或扩展）甚至整个存储的本地磁盘存储设置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-26T18:39:59.450

1.  去：`chrome://settings/content`
2.  在 cookie 下单击：`All Cookies and Site Data`
3.  过滤到您要撤消访问权限的主机
4.  单击要删除的权限（文件系统、数据库、cookie 等）。

![rm 权限](../Images/0962b00642f041568f02d5296cd743c8.png)

还有这个： [https ://developers.google.com/chrome/whitepapers/storage#reset](https://developers.google.com/chrome/whitepapers/storage#reset)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T15:45:25.367

这是一个错误[crbug.com/121463](http://crbug.com/121463)

# jquery - 文档准备好后调用外部 js 脚本

> ID：15057188
> 
> 赞同：0
> 
> 时间：2013-02-24T22:04:18.057
> 
> 标签：jquery

我有一个 js.js 脚本来处理我所有的 jQuery 函数。文件准备好后，我一一调用它们，如下所示：

```
function 1(){}
function 2(){}

jQuery(document).ready(function($){ 
    function 1();
    function 2();
}); 
```

我还有一个外部 javascript，我在我的网站标签中调用它：

```
<script type="text/javascript" src="myscript"></script> 
```

这个脚本的问题是它从外部网站加载，有时速度很慢，拖慢了我的整个网站。

文件准备好后，我可以将它加载到我的 js.js 文件中吗？让我们在函数 2() 之前说？

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T22:06:25.000

您正在寻找`$.getScript(url)`，它正是这样做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:17:18.830

除了 SLaks 的答案，您可以使用一个库来组织您的 JavaScript 文件包含。如果您有许多文件和依赖项，它会很有用。

例如，看看[head.js](http://headjs.com/)。

```
head
  .js("jquery.js", "selectivizr.js") // these are loaded in parallel
  .js("jquery-ui.js"); // this is loaded after the scripts above

head.ready(function() {
  jQuery(document).ready(function($) { 
    function1();
    head.js("other-script.js", function() {
      function2();
      // your code
    });
  });
});

function 1(){}
function 2(){} 
```

更好的解决方案是将所有 javascript 功能组织到单独的文件中，并仅使用 headjs 加载：

```
head
  .js("jquery.js", "selectivizr.js") // these are loaded in parallel
  .js("jquery-ui.js"); // this is loaded after the scripts above
  .js("app1.js"); // contains function1()
  .js("app2.js"); // contains function2()

head.ready(function() {
  jQuery(document).ready(function($) { 
    // your code
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T22:10:49.980

首先，请务必将您`<script type="text/javascript" src="myscript"></script>`放在 html 页面的末尾，就在`</body>`结束标记之前。

此外，您可以使用[RequireJS](http://requirejs.org/)，这是一个允许您在需要时异步加载 js 文件的脚本，即使在整个页面加载后也是如此。您可以通过 Ajax 加载脚本并手动管理工作流程来自己完成，但我建议您改用这个强大的脚本。

# c++ - 通过知道他们在 C 中的胜利/比赛来计算足球队的分数

> ID：15057201
> 
> 赞同：-1
> 
> 时间：2013-02-24T22:04:53.813
> 
> 标签：c++, arrays

好的，我正在做一个 C++ 在线挑战，我必须通过了解他们的比赛（赢、输、平等等）来计算球队的得分。

程序输入如下：

```
3
4 0 1
2 0 2
0 1 4 
```

我必须输出得分最高的球队的分数。

在这种情况下 4x3=12 是最高的，所以输出应该是 12。

到目前为止我的代码：

```
#include <iostream>
#include <algorithm>

using namespace std;

int main()
{
    int n;
    cin >> n;
    int a[150],b[150],c[150];

    for(int i=0;i<n;i++)
    {
        cin >> a[i] >> b[i] >> c[i];
    }

    sort(a,a+n);
    sort(b,b+n);
    sort(c,c+n);

    int temp;

    if(a[0]>b[0])
    {
        temp=a[0];
        a[0]=b[0];
        b[0]=temp;
    }
    if(b[0]>c[0])
    {
        temp=b[0];
        b[0]=c[0];
        c[0]=temp;
    }
    if(c[0]>a[0])
    {
        temp=c[0];
        c[0]=a[0];
        a[0]=temp;
    }
    cout << a[0] << endl;
    cout << b[0] << endl;
    cout << c[0] << endl;
    cout << a[0]*3 << endl;

    return 0;
} 
```

我知道它看起来很糟糕。我不知道下一步该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:30:15.103

为什么不创建一个包含胜利和失败的结构。这将允许您定义一个`operator<`

现在，您正在单独对胜负平局进行排序，这意味着数据不会保持在一起。

```
struct TeamInfo
{
    int mWins;
    int mTies;
    int mLosses;  //don't actually use this value but makes it easier to read

    //declare the operator< between two TeamInfo structs
    bool operator<(const TeamInfo & other);
};

//This function allows us to compare two TeamInfo structs.
bool TeamInfo::operator<(const TeamInfo & other)
{
    int myValue = mWins * 3 + mTies * 1;
    int otherValue = other.mWins * 2 + other.mTies * 1;
    return myValue < otherValue;
}

//an example:
int main(int argc, char ** argv)
{
    TeamInfo teamA;
    TeamInfo teamB;

    teamA.mWins = 3;
    teamA.mTies = 2;
    teamA.mLosses = 0;

    teamB.mWins = 0;
    teamB.mTies = 2;
    teamB.mLosses = 3;

    //the < here is the same as going teamA.operator<(teamB);
    //which will return false because teamA is better than teamB
    bool teamAIsBetter = teamA < teamB;

    //sort uses operator< so you could put these structs into an array and call sort

    return 0;
} 
```

然后，您可以对这些结构调用 sort。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T02:18:36.457

对于每支球队，计算 match_wins * 3 + draw * 1，找到最高的就可以了。我认为没有必要对数组进行排序。部分代码可能如下所示：

```
int highest_score = -1;
for(int i = 0 ; i < n ; ++ i){
    if( a[i] * 3 + c[i] > highest_score ){
        highest_score = a[i] * 3 + c[i] ;
    }
}
cout << highest_score << endl; 
```

输出也应该是最高分吧？虽然您似乎输出了 4 个值。

# r - read.csv() 和 colClasses

> ID：15057202
> 
> 赞同：2
> 
> 时间：2013-02-24T22:05:00.507
> 
> 标签：r, read.csv

我正在尝试使用`read.csv()`命令，但我不了解`colClasses`运行编码的部分。有没有人解释它是什么，并给我简单编码的例子`read.csv()`？

另外，如果我运行我的编码`read.csv()`，我会得到一个错误

```
> object of type 'closure' is not subsettable 
```

这是什么类型的错误？上次我运行我的代码时，它工作了，但现在我明白了。我不确定我应该在这里做些什么改变。这是我的代码：

```
Precipfiles[1:24] <- list.files(pattern=".csv")
> DF <- NULL
> for (f in Precipfiles[1:24]) {
    data[1:24]<-read.csv(f,header=T,sep="\t",na.string="",colClasses="character")
    DF[1:24]<-rbind(DF,data[1:24])
} 
```

基本上，我加载所有数据并将它们放在一起，但由于遇到上面列出的问题，我无法使用`merge()`命令。

我认为我不应该使用`colClasses="character"`，因为我使用的数据都是 200 x 200 矩阵中的数字。我必须将 24 个数据文件放在一起。

如果您有任何建议并建议改进此编码，请告诉我。感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T22:14:01.410

你真的不需要`[1:24]`在每个作业中，这就是导致你的问题的原因。您被分配到某个描述的索引向量的子集。

尝试分配给 时的错误消息`data[1:24]`，而`data`不是以前分配的（在您以前的用法中（您提到的工作），`data`可能是 a`list`或`data.frame`您已创建。）。因此`data`是一个函数（用于加载与包关联的数据，请参阅`?data`），您看到的错误是说（一个函数包括一个闭包）

我会建议像

```
Precipfiles <- list.files(pattern=".csv")
DFlist <- lapply(Precipfiles, read.table, sep = '\t', 
                  na.string = '', header = TRUE)
bigDF <- do.call(rbind, DFlist)

# or, much faster using data.table 
library(data.table)
bigDF <- rbindlist(DFlist) 
```

# java - 构造函数调用中的Java空指针异常

> ID：15057203
> 
> 赞同：1
> 
> 时间：2013-02-24T22:05:01.987
> 
> 标签：java, nullpointerexception

如果在其他地方以某种方式回答了这个问题，我深表歉意，但是我对 Java 的了解还不够，无法从其他情况中识别出类似的问题。

在这里获取所有信息可能很困难，因此我将尝试获取要点。

我正在编写一个日历程序，当我在演示类中调用构造函数时：

```
 System.out.println("Enter month (1 - 12)");
    month = console.nextInt();

    System.out.println("Enter year (> 1500)");
    year = console.nextInt();

    Calendar myCalendar = new Calendar(month, year); 
```

我在调用构造函数的那一行得到一个空指针异常。我也在构造函数本身的第一个函数调用中得到一个：

```
 public Calendar(int m, int y)
{
    firstDate.setDate(m, 1, y);
    firstDayOfMonth();
} 
```

setDate 方法调用中的第二个数字是 1，因为我使用的是我已经编写的日期类，而对于日历，只需要月份和年份，因此我将日期设置为 1。

在那之后，我的错误消息对我来说变得不那么容易理解了，如下所示：

```
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at edu.rice.cs.drjava.model.compiler.JavacCompiler.runCommand(JavacCompiler.java:272) 
```

我正在使用 DrJava 来执行此操作，如果这有什么不同的话。如果有人可以帮助我了解发生了什么，以便我可以解决问题，那就太好了。我知道这里可能没有足够的信息来提供实际的解决方案，但是如果我了解发生了什么，我可能会通过一些额外的研究来弄清楚。我知道当使用尚未初始化的参数调用函数时会发生空指针异常，但是通过我的代码回溯，在方法调用之后，我找不到任何未在任何地方定义的东西。我认为那些其他错误消息将帮助我知道空指针的来源。

在此先感谢，如果我在这里违反了某些规则，我们深表歉意。

Edit1：我初始化 firstDate 如下：`private ExtDate firstDate;' 我会尝试那些 Print 语句，也许这会有所帮助。

Edit2：好吧，我想我明白了。谢谢您的帮助。学习过程等等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T22:32:02.187

[NullPointerException](http://docs.oracle.com/javase/7/docs/api/java/lang/NullPointerException.html)发生，当你在`null`某个地方使用时，你应该使用一个对象。（有关更多详细信息，请参阅参考资料）。

简而言之：在您的代码中的某处，您有一个空引用而不是一个对象。您之前可能没有初始化它，这就是您遇到异常的原因。

关于您的错误陈述，该对象可能是`firstDate`. 您可以在`System.out.println(firstDate);`通话前通过`firstDate.setDate(m, 1, y);`通话进行检查。可能它会打印出来`null`。

# vb.net - 尝试将 XElement 添加到 XDocument 时出现 InvalidOperationException

> ID：15057207
> 
> 赞同：1
> 
> 时间：2013-02-24T22:05:23.960
> 
> 标签：vb.net, linq-to-xml, windows-phone-8

当我尝试将 XElement 添加到 XDocument 时出现此错误：

> System.Xml.Linq.ni.dll 中出现“System.InvalidOperationException”类型的异常，但未在用户代码中处理

我的代码是：

```
Imports System.Xml
Imports System.Xml.Linq
Imports System.IO.IsolatedStorage
Imports System.IO

Public Sub SaveRecord()
        Using myIsolatedStorage As IsolatedStorageFile = IsolatedStorageFile.GetUserStoreForApplication()

            Dim doc As XDocument
            Using isoStore1 As IsolatedStorageFile = _
                    IsolatedStorageFile.GetUserStoreForApplication()

                Using isoStream1 As IsolatedStorageFileStream = New IsolatedStorageFileStream("file.xml", FileMode.Open, isoStore1)
                    doc = XDocument.Load(isoStream1)

                    MessageBox.Show(doc.ToString)
                    'This gives the right xml-code

                    doc.Add(New XElement("NewChild", "new content")) 'This is where the error takes place
                    MessageBox.Show(doc.ToString)
                    Using isoStore As IsolatedStorageFile = IsolatedStorageFile.GetUserStoreForApplication()

                        Using isoStream As IsolatedStorageFileStream = New IsolatedStorageFileStream("file.xml", FileMode.Create, isoStore)
                            doc.Save(isoStream)
                        End Using
                    End Using
                End Using
            End Using

        End Using

        Exit Sub

    End Sub 
```

调试器进入该行时出现错误`doc.Add(New XElement("NewChild", "new content"))`

谁能向我解释这个错误的原因是什么以及我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:14:09.757

您需要将您的添加`XElement`到您`XDocument`的根目录。

```
doc.Root.Add(New XElement("NewChild", "new content")) 
```

将其直接添加到文档将使您`xml`无效，因为它将有两个根，因为您将`XElement`在您的后面添加`XDocument`而不是添加到根。

# clojure - 灯台和羽毛笔

> ID：15057208
> 
> 赞同：14
> 
> 时间：2013-02-24T22:05:33.087
> 
> 标签：clojure, lighttable, quil

我很抱歉我是 Clojure 的新手。我发现到目前为止我能够消化的 Clojure 世界的工具或教程并不多，所以我下载了 Light Table ( [http://www.lighttable.com/](http://www.lighttable.com/) ) 听起来喜欢它应该让它更容易。我在 Windows 7 64 位上，基本的 Light Table UI 似乎可以正常工作。

为了进一步尝试使用 Light Table / Clojure，我还下载了 Clojure 绘图库 Quil ( [https://github.com/quil/quil](https://github.com/quil/quil) )，但在指示 Light Table 连接到 \quil-master\project.clj然后打开并执行来自 \quil-master\examples 的各种文件（例如 automata.clj 或 graphics.clj），Light Table 会产生我认为是旋转的蓝色“思考”图标，该图标会卡住或最终以“nil”结尾或“java.lang.Math”。

只有“example2.clj”似乎有效（尽管并非总是如此），因为它（通常）会弹出一个带有变色钻石的窗口。我需要做什么才能使这些其他 Quil 示例在 Light Table 中工作？

（附带说明一下，我还下载了 Mire（Github 上的另一个 Clojure 项目），但它也根本无法与 Light Table 一起运行。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T19:13:09.743

**这个答案适用于 LightTable 0.2.0。我还没有尝试过新的 0.3.0。**

尝试选择 LightTable 和 Quil 非常有意义。我认为疼痛主要是由于鸡和蛋的问题。

*   LightTable 假定了一些 clojure 知识（至少在项目管理方面），并且不提供“标准”repl，而是提供更具交互性的工作方式的测试平台。
*   Quil 在标准的 clojure repl 环境中假定舒适，并包装了底层 java 项目（处理）的许多复杂性。
*   此外，Quil 的全部目的是生成“副作用”（整个其他图形显示），LightTable 试图帮助您使用函数及其返回值，而不是函数的副作用。

如果您作为项目连接到 quil，打开 example2.clj 并执行它（Ctrl Shift Enter）并得到一个浅蓝色的“nil” - 恭喜您有一个工作系统！（至少我可以复制完全相同的行为，并且该示例似乎有效）。

第一次这样做时，LightTable 可能需要一段时间才能下载所有 Quil 的依赖项（也许是 LightTable 出现挂起的原因 - 或者 Light Table 和 Quil 有一个我尚未触发的交互错误。）

“nil”是 Light Table 执行文件（在运行项目的上下文中）产生的返回值（见脚注）。应该在某个地方（可能隐藏在全屏 Light Table 后面）创建一个运行示例的新窗口。

执行automata.clj的“java.lang.Math”值也和我看到的一致。这里的诀窍是生成对`defsketch`example2.clj 内联但 automata.clj 没有的调用。

您可以通过调用函数来创建草图`run-rule`：

执行文件 automata.clj（以加载所有函数定义）后，将以下行添加到编辑器中的文件末尾：

```
(run-rule 101 {:width 100 :height 100 :scale 4}) 
```

将光标放在右括号后并使用 Ctrl-Enter 执行单个表单。再次打开一个新窗口（可能隐藏在其他窗口后面 - 尝试使用 Alt-Tab 切换任务）应该打开运行自动机演示。

将 Light Table 连接到 quil 项目并且 automata.clj 已经评估，您还可以通过打开“instarepl”并键入以下内容来获得相同的效果：

```
(clj-automata.core/run-rule 101 
                       {:width 100 :height 100 
                        :scale 4}) 
```

尝试编辑值并查看会发生什么。（再一次，Quil 具有副作用的整个性质使得它在 LightTable 中并不那么优雅，但它似乎可以工作。）

* * *

脚注：

我对 LightTable 不是很熟悉。我原以为浅蓝色是评估文件中最后一个表单的结果，但事实并非如此。在最后一行使用 Cntl-Enter 显示“#'example2/example2”而不是“nil”。我对 Quil 也不是很熟悉，它`defsketch`是宏而不是常规函数，所以它可能与 LightTable 以一种奇怪的方式交互。

# c# - ADO.NET 最大池大小行为

> ID：15057209
> 
> 赞同：1
> 
> 时间：2013-02-24T22:05:35.417
> 
> 标签：c#, sql-server-2008, ado.net

我正在使用 MSSQL 2008R2。我写了一个 C# 应用程序，*故意没有* **关闭**我的 SqlConnection。在 VS 2010 上进行本地调试。以下是我使用的代码：

```
protected void Button1_Click(object sender, EventArgs e)
    {
        string connectionString = "server=s; database=db; User ID=sa; Password=p; Max Pool Size=1;Connect Timeout=3";
        SqlConnection conn = new SqlConnection(connectionString);
        string query = "SELECT * FROM dbo.Numbers";
        SqlCommand comm = new SqlCommand(query, conn);
        conn.Open();
        SqlDataReader reader = comm.ExecuteReader();
        //reader.Read() and display results to Textbox1.Text
    } 
```

最大池大小 = 1；期望在第二次点击尝试第二次浏览器时出错。为什么我可以转到 3 个不同的浏览器（Mozilla、Chrome、IE）并分别调用一次点击方法。这相当于3个同时连接，对吗？超时错误仅在我使用浏览器时发生，但在该浏览器上调用了两次方法。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:52:41.163

因此，在 VS 2010 和 IIS 7.5 中进行本地调试似乎存在差异。我必须将示例网站部署到 IIS 才能使最大池大小按预期运行。如果我尝试再次调用点击事件，无论我尝试使用哪种浏览器，都会抛出超时错误，这是意料之中的。根据需要执行网站/应用程序池重启/回收以重新测试。

出于某种原因，在 VS 2010 中进行本地调试会绕过最大池大小限制。每个浏览器都可以调用 click 事件，在我的示例中会打开 3 个 sqlconnection 对象。它引发超时错误的唯一一次是您留在浏览器中并调用两次 click 方法。奇怪的行为，但开发人员应该注意的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:06:27.797

仅仅因为您打开连接对象并不意味着三个单独的连接。.NET 框架实际上利用了 SQL Server 中的连接池，并通过连接字符串对其进行管理。由于所有三个请求的连接字符串相同 - 并且连接可用 - 没有冲突。

现在，如果您要模拟一种情况，即您在其中一个请求上启动了一个长时间运行的查询，然后尝试再次点击它——您可能会发现它会先等待——您会得到一个超时异常。

这是MSDN 上关于 .NET 框架中的连接池的[冗长而枯燥的文档。](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)

# ruby-on-rails - RSpec 2.13 警告：以前的主题定义在这里

> ID：15057216
> 
> 赞同：1
> 
> 时间：2013-02-24T22:06:09.240
> 
> 标签：ruby-on-rails, rspec

我刚刚升级到 RSpec 2.13，在运行我的规范时看到了两个不同的警告：

```
/Users/peterbrown/.rvm/gems/ruby-2.0.0-p0/gems/rspec-core-2.13.0/lib/rspec/core/memoized_helpers.rb:120: warning: method redefined; discarding old subject
/Users/peterbrown/code/classy_enum/spec/classy_enum/active_record_spec.rb:63: warning: previous definition of subject was here 
```

我怀疑这与我如何循环遍历数组并每次定义一个新主题有关：

```
describe DefaultDog do    
  context "with valid breed options" do
    [:golden_retriever, 'golden_retriever', Breed::GoldenRetriever.new, Breed::GoldenRetriever].each do |option|
      subject { DefaultDog.new(:breed => option) }
      it { should be_valid }
      its(:breed) { should be_a(Breed::GoldenRetriever) }
    end
  end
end 
```

在这样的循环中定义主题有问题吗？

*更新：*

我还应该注意，我正在使用以下`-w`选项运行我的规范：

```
RSpec::Core::RakeTask.new(:spec) do |t|
  t.ruby_opts = "-w"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:29:13.693

尝试把`context`你的循环：

```
describe DefaultDog do    
  [:golden_retriever, 'golden_retriever', Breed::GoldenRetriever.new, Breed::GoldenRetriever].each do |option|
    context "with valid breed option #{option}" do
      subject { DefaultDog.new(:breed => option) }
      it { should be_valid }
      its(:breed) { should be_a(Breed::GoldenRetriever) }
    end
  end
end 
```

我相信以这种方式编写涉及迭代集合的测试意味着您将为集合中的每个项目执行单独的测试，而不是仅执行一个循环遍历集合的测试（因此重新定义主题）。我认为这是 RSpec 中的一个低调的陷阱，直到最近才让我感到困惑。

# excel - 平均，具有超过 65536 个元素的 StDev？

> ID：15057217
> 
> 赞同：0
> 
> 时间：2013-02-24T22:06:09.973
> 
> 标签：excel, average, vba

我正在尝试计算（在 VBA Excel 中）具有超过 65536 个元素的数组的平均值和标准差。像这样的东西：

Mitja = worksheetfunction.Average(array()) DesvTip = worksheetfunction.StDev(array())

虽然数组的维度小于 65536 没有问题，但是当它更大时它会给我一个错误！

我知道这个 VBA 函数不能处理超过 65536 个数据，所以如何在 VBA 中获取这个参数？

欣赏您的评论。非常感谢！:))

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:08:04.160

您可以计算平均值和标准偏差，而无需存储所有值。只需保持总和、平方和和点数的总和。您可以拥有尽可能多的点，因为整数点将允许这种方式。

这是我在Java中的做法。随意婴儿床。

```
package statistics;

/**
 * Statistics
 * @author Michael
 * @link http://stackoverflow.com/questions/11978667/online-algorithm-for-calculating-standrd-deviation/11978689#11978689
 * @link http://mathworld.wolfram.com/Variance.html
 * @since 8/15/12 7:34 PM
 */
public class Statistics {

    private int n;
    private double sum;
    private double sumsq;

    public void reset() {
        this.n = 0;
        this.sum = 0.0;
        this.sumsq = 0.0;
    }

    public synchronized void addValue(double x) {
        ++this.n;
        this.sum += x;
        this.sumsq += x*x;
    }

    public synchronized double calculateMean() {
        double mean = 0.0;
        if (this.n > 0) {
            mean = this.sum/this.n;
        }
        return mean;
    }

    public synchronized double calculateVariance() {
        double variance = 0.0;
        if (this.n > 0) {
            variance = Math.sqrt(this.sumsq-this.sum*this.sum/this.n)/this.n;
        }
        return variance;
    }

    public synchronized double calculateStandardDeviation() {
        double deviation = 0.0;
        if (this.n > 1) {
            deviation = Math.sqrt((this.sumsq-this.sum*this.sum/this.n)/(this.n-1));
        }
        return deviation;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:50:04.250

感谢您的评论。最后我们做了类似的事情。我希望它对有同样问题的人有用。我们的代码：

```
sum = 0
sumq = 0

For i = 0 To ((2 * N) - 1)
    sum = sum + h_normal(i)
Next i

media = sum / (2 * N)

For j = 0 To ((2 * N) - 1)
    sumsq = sumsq + (h_normal(j) - media) ^ 2
Next j

desviaci(h - 1) = Math.Sqr(sumsq / ((2 * N) - 1)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T22:41:00.860

如果数据存储在数组中，请使用以下算法`x(1 to N, 1 to 1)`，其中`N`是数据点的数量

```
sum = 0# : sumsq = 0#
for i=1 to N
  sum = sum + x(i,1)
  sumsq = sumsq + x(i,1)^2
next i

average = sum/N
stddev = Sqr( sumsq/N^2 - sum^2/N^3 ) 
```

*:注意：* 要填充数组，请使用符号

```
Dim r as Range, x() as Variant
Set r = Range("A1").Resize(N,1)
x = r.Value 
```

# cordova - 使用 PhoneGap 创建一个新项目

> ID：15057221
> 
> 赞同：0
> 
> 时间：2013-02-24T22:06:25.393
> 
> 标签：cordova

Phonegap 版本 2.4.0 - 当我使用 create 命令创建一个新项目时.. 我收到错误“您没有设置任何 android 目标。请使用 .android 命令创建至少一个目标”.. 不知道那是什么是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T04:49:00.450

我遇到了同样的问题，并通过安装 Android SDK Platform-tools 修复了它。

转到您的 android-sdk 文件夹并运行 SDK 管理器（我位于 C:\Program files (x86)\Android\android-sdk 中）并安装 Android SDK Platform-tools。

这会将 ADB 文件放在创建项目时运行的平台工具文件夹中。

# c# - C# - 获取最近创建的文件名

> ID：15057228
> 
> 赞同：1
> 
> 时间：2013-02-24T22:07:20.683
> 
> 标签：c#, .net

我需要从目录中获取最近创建的文件名。我试过下面的东西。

```
 DirectoryInfo dirInfo = new DirectoryInfo(@"E:\Result");
    var file = dirInfo.GetFiles("PaperResult*").Select(f => f.CreationTime).First();
    Console.WriteLine(file); 
```

但它正在返回我的日期和时间。它不返回文件名。我在这里想念什么？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T22:08:39.837

你想 order-by `CreationTime`，你不想选择它。

```
var file = dirInfo.GetFiles("PaperResult*")
    .OrderByDescending(f => f.CreationTime).First(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:13:43.673

您还可以使用 MoreLinq 库`MaxBy(..)`方法（Nuget 上提供了 MoreLinq，或在此处 [https://code.google.com/p/morelinq/](https://code.google.com/p/morelinq/)）

```
var file = dirInfo.GetFiles("PaperResult*").MaxBy(f=> f.CreationTime); 
```

这个库还有许多其他有用的扩展，非常值得掌握。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T22:12:02.417

```
var file = dirInfo.GetFiles("PaperResult*").OrderByDescending(f => f.CreationTime).First();
Console.WriteLine(file); 
```

# c++ - 具有 UTF-8 执行字符集的 C++11 字符文字“\xC4”标准类型？

> ID：15057233
> 
> 赞同：2
> 
> 时间：2013-02-24T22:08:02.337
> 
> 标签：c++, unicode, utf-8, c++11, x86-64

考虑一个具有 UTF-8 执行字符集的 C++11 编译器（并且符合要求`char`类型为有符号 8 位字节的 x86-64 ABI）。

字母 Ä（变音符号）的 unicode 代码点为`0xC4`，并且有 2 个代码单元 UTF-8 表示`{0xC3, 0x84}`

编译器为字符字面量分配一个值为 的`'\xC4'`类型。`int``0xC4`

编译器是否符合标准和 ABI？你的理由是什么？

C++11标准的相关引用：

2.14.3.1

> 包含单个 c-char 的普通字符文字具有 char 类型，其值等于执行字符集中 c-char 编码的数值。包含多个 c-char 的普通字符文字是多字符文字。多字符文字具有 int 类型和实现定义的值。

2.14.3.4

> 转义符 \xhhh 由反斜杠后跟 x 后跟一个或多个十六进制数字组成，这些数字用于指定所需字符的值。如果字符文字的值超出为 char 定义的实现定义范围，则它的值是实现定义的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:48:58.397

§2.14.3 第 1 段无疑是 (C++11) 标准中的相关文本。但原文有几个缺陷，最新版本包含以下文字，重点补充：

> 多字符文字或*包含无法在执行字符集中表示的单个 c-char 的普通字符文字*是有条件的，*具有 int 类型*，并具有实现定义的值。

尽管这已被视为[缺陷](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#912)，但它实际上并不构成任何标准的一部分。但是，它是一个建议，我怀疑许多编译器会实现它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:44:57.517

从 2.1.14.3p4 开始：

> 如果字符文字的值超出为定义的实现定义范围，则它是实现定义的`char`

x86 编译器在历史上（正如您所指出的，这种做法现在已成为某种官方标准）已签署`char`s. `\xc7`超出了范围，因此需要实现来记录它将产生的文字值。

看起来您的实现将使用 \x 转义指定的超出范围的字符文字提升为（范围内）整数文字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T22:12:52.773

你在混合苹果、橙子、梨和金橘:)

是的，“\xc4”是一个合法的字符文字。具体来说，标准称之为“窄字符文字”。

从 C++ 标准：

> 基本源字符集成员的字形旨在识别对应于 ASCII 字符集的 ISO/IEC 10646 子集中的字符。然而，因为从源文件字符到源字符集的映射（在翻译阶段 1 中描述）被指定为实现定义，所以需要一个实现来记录基本源字符在源文件中是如何表示的。

这可能有助于澄清：

*   [C++ 字符串文字转义字符的规则](https://stackoverflow.com/questions/10220401/c-string-literals-escape-character)

如果您不熟悉它，这也可能会有所帮助：

*   [每个软件开发人员都应该知道的关于 Unicode 的绝对最低限度](http://www.joelonsoftware.com/articles/Unicode.html)

这是另一个很好的、简洁的、有启发性的参考：

*   [IBM Developerworks：字符文字](http://publib.boulder.ibm.com/infocenter/macxhelp/v6v81/index.jsp?topic=%2Fcom.ibm.vacpp6m.doc%2Flanguage%2Fref%2Fclrc02ccon.htm)

# android - 什么会导致 AsyncTask 不执行？

> ID：15057242
> 
> 赞同：5
> 
> 时间：2013-02-24T22:08:40.220
> 
> 标签：android, android-asynctask

我正在尝试解决的应用程序出现非常零星的故障。在进入应用程序时，主 UI 线程处理在某一时刻结束并将控制权传递给后台线程以检索一些数据。检索数据时，控制权会传回主 UI 线程以对其进行处理以进行显示。但是，在一些罕见的情况下（它在 99% 的时间都有效），似乎无法调用 AsyncTask，从而使应用程序永远处于较差的静态状态，等待 AsyncTask 完成。

这是代码中的快照`Activity`：

```
//method call from main UI thread
private void fetchSomeData() {
    Log.d("myTag", "In fecthSomeData()");
    new ReadFileAsyncTask<DataModel>().execute(this);
} 
```

这是`ReadFileAsyncTask`实现：

```
public class ReadFileAsyncTask<A> extends AsyncTask<I_ReadFileListener<A>, Void, A>
{
I_ReadFileListener<A> listener;

@Override
@SuppressWarnings("unchecked")
protected A doInBackground(I_ReadFileListener<A>... params)
{
    listener = params[0];
    Log.d("mytag", "BACKGROUND: Loading " + listener.getFilename() + " from disk");
    A fileContents = (A) FileUtils.readDataFromInternalStorage(listener.getContext(), listener.getFilename());
    return fileContents;
}

@Override
protected void onPostExecute(A result)
{
    Log.d("myTag", "FOREGROUND: Executing onFileRetrieved listener");
    listener.onFileRetrieved(result);
}
} 
```

捕获这种罕见故障的日志会产生：

```
In fetchSomeData()
...
(Other log messages from other interactions with the activity such as menu creation and navigation initialization) 
```

但是，至关重要的是，不是方法中第二行代码中的日志语句`doInBackground`。我的一个想法是这个日志语句失败了，但我没有看到任何强制停止消息、日志中的错误或 ACRA 崩溃报告。该应用程序仍然处于活动状态（我可以导航到其他活动并返回），所以我不知道什么可能会阻止这个后台线程正常运行。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-13T00:12:38.717

遗憾`AsyncTask`的是，它不适合关键代码执行，因为根据`ThreadPool`基本大小和最大大小，您的 AsyncTask 可能永远不会执行。

此外，当它所引用的（即它的创建上下文）已经被销毁`onPostExecute`时，可以调用该方法。`Activity`您无法与它同步，而是可能`AsyncThread`在 UI 线程上使用 join() 。

尽管我在 Android Camera App 中也看到过这样做，但阻止 UI 线程等待事件并不是一个好主意，因为您可能会收到 ANR（应用程序未运行）通知。

看看这个：[AsyncTask 在概念上真的有缺陷还是我只是错过了什么？](https://stackoverflow.com/questions/3357477/is-asynctask-really-conceptually-flawed-or-am-i-just-missing-something)

考虑使用`IntentServices`，`HandlerThread`或者`ThreadPoolExecutors`如果您需要一种可能更好的方法来将您的工作线程与您的 UIThread 同步。

从[http://developer.android.com/training/run-background-service/create-service.html](http://developer.android.com/training/run-background-service/create-service.html)：

> 此外，IntentService 不受大多数​​用户界面生命周期事件的影响，因此它会在会关闭 AsyncTask 的情况下继续运行

# zend-framework - Zend ACL 允许某些操作

> ID：15057247
> 
> 赞同：2
> 
> 时间：2013-02-24T22:09:17.470
> 
> 标签：zend-framework, acl

如何使用 Zend ACL 允许某些用户访问控制器中的某些操作？现在，我只知道如何允许用户访问整个控制器，但我想限制控制器内的操作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T03:24:51.783

要允许/拒绝访问某些操作，请在 Zend_Acl 的允许/拒绝方法中指定它们。

该`Zend_Acl::allow()`方法中的第三个参数仅允许您为给定控制器/资源上的某些操作设置访问控制。例如：

```
<?php

$acl = new Zend_Acl();

// Roles
$guest = new Zend_Acl_Role('guest');
$user = new Zend_Acl_Role('user');

// Register the roles with the Zend_Acl
$acl->addRole($guest);
$acl->addRole($user, 'guest');

// Resources/Controllers
$indexController = new Zend_Acl_Resource('index');
$profileController = new Zend_Acl_Resource('profile');

// Add resources/controllers to the Zend_Acl
$acl->add($indexController);
$acl->add($profileController);

// Now set limits of access to the resources.
// Guests get access to all the actions in the index controller,
// but to only the login and logout actions in the profile controller.
$acl->allow('guest', 'index');
$acl->allow('guest', 'profile', array('login', 'logout'));

// Users get full access to the profile controller
$acl->allow('user', 'profile'); 
```

# c++ - 从派生类访问基类的受保护数据成员

> ID：15057249
> 
> 赞同：0
> 
> 时间：2013-02-24T22:09:41.383
> 
> 标签：c++, inheritance, derived-class, data-members

我有一个基类和派生类。我需要访问派生类中基类的受保护成员。但是，Eclipse 不允许我访问数据成员，就好像它是派生类的成员一样，而不关心它是否被继承。我怎么做？

```
class BaseClass {
protected:
static int a;
int b;
}

class DerivedClass: public BaseClass {    
void SomeMethod {    
a=10; // cannot resolve symbol
b=10; // cannot resolve symbol
BaseClass::a=10; //does not complain
BaseClass::b=10; //does not complain    
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T22:20:09.740

我无法完全理解您的问题，但修复语法错误，以下应该可以工作：

```
class BaseClass {
protected:
static int a;
int b;
}; // <-- Missing semicolon

int BaseClass::a = 0; // Define static member

class DerivedClass: public BaseClass {    
void SomeMethod() { // <-- Missing ()
a=10;
b=10; 
}
};// <-- Missing semicolon 
```

# c++ - 从节点和关系生成块的算法

> ID：15057251
> 
> 赞同：2
> 
> 时间：2013-02-24T22:10:18.963
> 
> 标签：c++, algorithm, graph, procedural-programming

我有它们之间的节点和线列表，它看起来像这样：

![地图](../Images/cde440b4f9200cdd75d3313d688fe6ea.png)

我需要的是生成块，在这种情况下它会是这样的：block1:1,2,14,11 block2:2,13,12,14 block3:2,3,4,5,6,12,13块 4：6、7、12 等...

有人知道如何为此创建算法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:25:17.580

您可以首先将每个节点的边按顺时针顺序排序。（例如，基于键 atan2(dy,dx) 排序，其中 dx,dy 是沿边缘的向量。）

然后以每条边（以及沿边的两个方向）为起点，沿着块逆时针方向移动。

要逆时针跟随，您会在目标节点的排序列表中找到传入边，然后沿着列表中的下一条边退出。

例如，如果您从边 11->14 开始，那么当您到达节点 14 时，您将知道接下来要采用边 14->2（因为节点 14 的边将按顺时针顺序 14->12 , 14->11, 14->2)。当您到达起始节点时，您已经确定了一个块。

您可以在跟随它们时将边缘标记为已使用，以避免两次生成相同的块。（如果起始边已被标记为在该方向上使用，则跳过起始边。）

这也将生成一个由背景区域组成的块 0。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T09:46:10.333

在我看来，您正在尝试生成平面图的对偶。

[http://en.wikipedia.org/wiki/Dual_graph](http://en.wikipedia.org/wiki/Dual_graph)

可能是一个很好的起点。

# git - .gitignore 中的子文件夹

> ID：15057256
> 
> 赞同：18
> 
> 时间：2013-02-24T22:10:49.230
> 
> 标签：git, gitignore

我的仓库中有很多子文件夹，其中有几个`build/`目录在提交代码时我想忽略。据我了解，有两种方法可以忽略所有文件夹：

*   `*/build/`（Unix 通配符）
*   `build/`（忽略文件/文件夹的*git方式）*

我发现[Git 忽略子文件夹](https://stackoverflow.com/questions/2545602/git-ignore-sub-folders)，但它有两个答案，我想知道**这两种方法之间的区别（没有？）**。相同的规则是否适用于文件？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-24T23:02:36.243

`build/`是正确的方法。`build`无论这些目录嵌套在您的存储库中有多深，它都会忽略目录内的任何文件。

`*/build/`意味着忽略在您的存储库中**正好一层**`build`的目录。所以例如里面的文件不会被忽略。**`build``foo/bar/build`**

 **如果您需要更细粒度的控制，您始终可以添加要排除的特定目录，但也可以不使用`!`前缀来排除。**

# wordpress - 我可以在 Bluehost 共享主机计划上安装 New Relic 吗？

> ID：15057258
> 
> 赞同：-1
> 
> 时间：2013-02-24T22:10:52.667
> 
> 标签：wordpress, shared-hosting, newrelic, bluehost

我想对我的 wordpress 网站有更多的了解，所以我注册了一个 New Relic 帐户。但是他们要求我通过输入命令来安装一些代理，我不知道在哪里执行此操作或如何访问命令行。

我使用 Bluehost 的共享主机，所以我可以访问 cPanel。我从来没有在控制台中输入任何东西来管理服务器——这些图标已经涵盖了我需要的一切。至今。

甚至可以在我的共享主机计划中安装它吗？如果是这样，我从哪里获得命令提示符，我需要 FTP 吗？我尝试按照说明进行操作，但是有一些奇怪的词，例如“yum”、“rpm”等等。这些是什么，我该如何运行它们？

是否有一个我可以安装并自动为我完成所有工作的 wordpress 插件？

如果有人可以向我指出一些关于如何进行此操作的明确分步说明，我将非常感激......

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T22:28:44.090

您需要的是外壳访问。根据他们在[http://www.bluehost.com/cgi/info/hosting_features](http://www.bluehost.com/cgi/info/hosting_features)的功能页面，他们支持通过 SecureShell (SSH) 访问 shell。这是相当普遍的。

下载像 PutTTY 这样的 SSH 客户端并连接到 yourdomain.com，或者如果您在 Mac 上，打开终端应用程序并输入“ssh yourdomain.com”（使用您的网站的域名）。然后，您可以运行命令。

但是，这可能无法满足您的需求。您提到了 yum 和 rpm 命令，它们是系统级的软件安装工具。您需要 root 访问权限才能做到这一点，这在共享主机帐户上肯定是做不到的。

这些类型的工具实际上是为应用程序服务提供商设计的。我对 New Relic 的产品相当熟悉。我猜您正在尝试安装服务器监控工具。您可能不需要担心那个，因为 Bluehost 应该为您监控他们的服务器。

# php - 即使没有可用数据也显示每月的每一天

> ID：15057259
> 
> 赞同：1
> 
> 时间：2013-02-24T22:10:59.030
> 
> 标签：php, sql

我想在 SQL 语句中显示一个月中的所有日子，然后将那一天与我的表中的数据链接起来。如果那天没有数据，那么它必须显示一个空值。

我的表看起来像这样。

```
IN | OUT | EARN | DATE
10   20    0.25   01.02.2013
2    15    0.55   03.02.2013
7    45    0.25   05.02.2013
8    25    0.75   12.02.2013 
```

然后我希望结果看起来像这样

```
IN | OUT | EARN | DATE
10   20    0.25   01.02.2013
0    0     0.00   02.02.2013
2    15    0.55   03.02.2013
0    0     0.00   04.02.2013
7    45    0.25   05.02.2013
0    0     0.00   06.02.2013
0    0     0.00   07.02.2013
0    0     0.00   08.02.2013
0    0     0.00   09.02.2013
0    0     0.00   10.02.2013
0    0     0.00   11.02.2013
8    25    0.75   12.02.2013 
```

一直到月底……

请您帮忙，以便我解决报告。

而我的 sql 即时通讯以这种方式获取数据

```
$sql = "SELECT * FROM stats WHERE date >= '".$month_start."' AND date <= '".$month_end."' AND pid={$pid}"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:31:31.470

尝试这个：

```
SELECT `t`.`IN`, `t`.`OUT`, `t`.`EARN`, `d`.`DATE`
FROM `table` AS `t`
RIGHT JOIN (
    SELECT @date := @date + 1 AS `DATE`
    FROM `tbl31`
    JOIN (SELECT @date := 0) AS `temp`
    LIMIT 31
) AS `d`
ON `d`.`DATE`=`t`.`DATE` 
```

`table`是您的表的名称。
`tbl31`是一个超过 30 行的表格（内容不重要）。

使用 MySQL 时我真的不知道更好的方法（我假设您使用 MySQL）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:23:00.357

迭代所有天：

```
$start  = new \DateTime('first day of this month');
$end    = new \DateTime('first day of this month + 1 month');
$period = new \DatePeriod($start, new \DateInterval('P1D'), $end);

foreach($period as $day){
  // here check if you have records with this date and print them,
  // otherwise print default values
  print $day->format('d.m.Y');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T09:43:44.230

您还可以迭代一个月中的几天：

```
/*
    $r is something like:
    $r = array(
        array(
            'IN' => '10',
            'OUT' => '20',
            'EARN' => '0.25',
            'DATE' => '01.02.2013'
        ),
        array(
            'IN' => '2',
            'OUT' => '15',
            'EARN' => '0.55',
            'DATE' => '03.02.2013'
        ),
        array(
            'IN' => '7',
            'OUT' => '45',
            'EARN' => '0.25',
            'DATE' => '05.02.2013'
        ),
        array(
            'IN' => '8',
            'OUT' => '25',
            'EARN' => '0.75',
            'DATE' => '12.02.2013'
        )
    );
*/
$arr = array(); // the result array
$period = new DatePeriod(
    new DateTime('first day of this month'),
    new DateInterval('P1D'),
    new DateTime('first day of next month')
);
$ri = 0;
foreach ($period as $day) {
    $i = ((int)$day->format('j')) - 1;
    $date = $day->format('d.m.Y');
    $arr[$i] = array(
        'IN' => '0.00',
        'OUT' => '0.00',
        'EARN' => '0.00',
        'DATE' => $date
    );
    if (array_key_exists($ri, $r) && $r[$ri]['DATE'] == $date) {
        $arr[$i] = $r[$ri];
        $ri++;
    }
} 
```

$arr 与 $r 类似，但包含该月的所有日期。

# linux - 有没有办法将 shell 脚本作为一个完整的任务运行（使用单个 PID）？

> ID：15057260
> 
> 赞同：1
> 
> 时间：2013-02-24T22:11:06.943
> 
> 标签：linux, bash, shell

我有一个名为 run.sh 的 shell 脚本。在其中，我可以调用其他 shell 脚本，例如：

```
./run_1.sh
./run_2.sh
......... 
```

如果我通过./run.sh 调用脚本，我发现它实际上会使用不同的PID 依次调用脚本内的不同任务（即run_1.sh 将是一个任务，run_2.sh 将是另一个任务）。这使我无法使用一个“kill”命令杀死整个任务组，或者通过运行“./run.sh &”在后台运行整个任务组。那么有没有办法将脚本作为一个完整的任务来运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T22:31:07.467

*   `pkill`可用于杀死进程的子进程，使用该`-P`选项。

    ```
    pkill -P $PID 
    ```

    其中 $PID 是父进程的 PID。

*   您可以`source`让`run_1.sh`命令在同一个 shell 中执行*（这可能会导致副作用，因为现在所有脚本都将共享相同的范围）*。

    ```
    source run_1.sh
    source run_2.sh 
    ```

# ios - IOS 地理围栏背景警报

> ID：15057263
> 
> 赞同：4
> 
> 时间：2013-02-24T22:11:44.410
> 
> 标签：ios

我正在开发一个应用程序，该应用程序使用区域监控在用户靠近某些地标时提醒用户。一切正常，但是当应用程序在后台时，我没有收到警报。当我打开应用程序时，我会弹出所有警报。我想要的是当应用程序在后台时获取它们。我想知道是否有可能或是否需要运行应用程序才能收到警报？任何帮助将不胜感激。

更新：问题似乎是我使用了警报而不是本地通知。这是我使用的代码：

```
- (void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region {
    NSLog(@"Entered Region - %@", region.identifier);
    [self showRegionAlert:@"You are near: " forRegion:region.identifier];
} 
```

如何将其更改为本地通知？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T22:41:28.107

检查“测试您的应用程序区域监控”部分

[https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/LocationAwarenessPG/RegionMonitoring/RegionMonitoring.html](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/LocationAwarenessPG/RegionMonitoring/RegionMonitoring.html)

如果您在前台和后台之间来回切换，则可能无法满足阈值条件并在您再次将应用程序置于前台之前触发。

此外，当后台应用程序收到通知时，只有一个小窗口用于处理消息。尝试执行网络请求可能会超时...

检查您的 plist 设置 - 仅当您需要高精度定位时才需要将位置声明为 UIBackgroundModes。即使没有定义位置，重要的位置更改也有效。

检查是否正在调用 locationManager:didUpdateLocations: 和 locationManager:didFailWithError: 并且没有发布错误。

检查您没有在 plist 中将 ApplicationRunsInBackground 设置为 NO。

尝试实现 AppDelegates applicationDidEnterBackground:, application:didFinishLaunchingWithOptions: 和朋友来发现在给定时间你在应用程序生命周期中的哪个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-25T10:42:35.203

1.  对于地理围栏解决方案，您可以参考@Niels Castle 给出的答案。
2.  对于本地通知，您可以参考以下代码：

> ```
> UILocalNotification* localNotification = [[UILocalNotification alloc] init];
> 
> localNotification.alertBody = @"I'M IN THE REGION";
> 
> localNotification.userInfo = [[NSDictionary alloc]initWithObjectsAndKeys:@"nearBy",@"type", nil];
> 
> localNotification.timeZone = [NSTimeZone defaultTimeZone];
> 
> localNotification.soundName = UILocalNotificationDefaultSoundName;
> 
> [[UIApplication sharedApplication] presentLocalNotificationNow:localNotification]; 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-30T09:32:24.237

```
- (void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region {
    NSLog(@"Yes! Welcome to %@",region.identifier);
    UILocalNotification* notify = [UILocalNotification new];
    notify.alertBody = [NSString stringWithFormat:@"Welcome to %@",region.identifier];
    notify.soundName = UILocalNotificationDefaultSoundName;
    if (notify.applicationIconBadgeNumber == 0) {
        notify.applicationIconBadgeNumber = 1;
    }
    [[UIApplication sharedApplication] presentLocalNotificationNow:notify];
} 
```

# extjs - 在按钮/链接单击时转到特定选项卡，ExtJs 选项卡面板

> ID：15057268
> 
> 赞同：0
> 
> 时间：2013-02-24T22:12:30.903
> 
> 标签：extjs

我有一个用一些选项卡定义的 ext js 选项卡面板。在同一页面上，我有一个超链接菜单，用于询问用户要打开哪个选项卡。我想在用户单击链接时打开选定的选项卡。

基本上，当您单击选项卡标题以打开选项卡时，我希望在单击某些按钮/超链接时发生完全相同的事情。

似乎是一件很正常的事情，但我在任何地方都找不到解决方案！

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:38:25.260

使用 tabpanel 的 setActiveTab(newItem) 方法。您可以将 ID、索引或组件本身作为 newItem 传递。

# python - Django 模型/SQL 关系错误

> ID：15057269
> 
> 赞同：0
> 
> 时间：2013-02-24T22:12:40.037
> 
> 标签：python, django, sqlite

我正在使用 Python 和 Django 开发一个简单的论坛，但是在为 Post 创建数据库条目时遇到了一个小问题：

```
(python manage.py shell):
     >>> from forums.models import User,Category,Post

     >>> nu = User(username="daniel", password="test")
     >>> nu.user_ip = "127.0.0.1"
     >>> nu.save()
     >>> User.objects.all()
         [<User: daniel>]

     >>> c = Category(category_name="Default")
     >>> c.save()
     >>> Category.objects.all()
         [<Category: Default>]

     >>> p = Post(post_name="Test", post_content="Hello, world", category=Category.objects.get(pk=1), poster=User.objects.get(pk=1))
     >>> p.save() 
```

> “/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/db/backends/sqlite3/base.py”，第 344 行，在执行返回 Database.Cursor.execute(self, query, params) DatabaseError: table forums_post has no column named category_id

这是我的 models.py 文件：

```
from django.db import models
from datetime import date

class User(models.Model):
    username = models.CharField(max_length=200, unique=True)
    password = models.CharField(max_length=300)
    creation_date = models.DateField(default=date.today)
    user_ip = models.IPAddressField()

    def __unicode__(self):
        return self.username

class Category(models.Model):
    category_name = models.CharField(max_length=50)

    def __unicode__(self):
        return self.category_name

class Post(models.Model):
    post_name = models.CharField(max_length=150)
    post_content = models.CharField(max_length=500)
    category = models.ForeignKey(Category)
    poster = models.ForeignKey(User)

    def __unicode__(self):
        return self.post_name 
```

为什么要查找“category_id”列？所有帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:25:12.360

除非您`db_column`在定义外键时指定 a，否则 Django 将`_id`在尝试查询数据库时附加到您提供的属性名称。

我猜在您的数据库中，您的专栏被称为`category`.

您可以将列名更改为`category_id`或定义您的类别外键，如下所示：

```
category = models.ForeignKey(Category, db_column='category') 
```

# iphone - 体系结构 i386 的重复符号，找不到类和文件的相同名称

> ID：15057273
> 
> 赞同：3
> 
> 时间：2013-02-24T22:13:05.580
> 
> 标签：iphone, ios, objective-c, xcode

当我用 Xcode 4.6 编译我的 iPhone 应用程序时，我看到一个奇怪的错误代码：

> “架构 i386 的重复符号”。

我知道这个关于文件名或类名重复的问题。所以我尝试使用 Finder 中的搜索栏查找文件。我还尝试使用 Xcode 中的搜索栏搜索重复的类，但是我找不到它。我已经检查过我没有导入 .m 文件。

接下来我该怎么办？请给任何建议。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-25T08:33:00.807

我可以自己解决这个问题。

我在头文件中声明。

> NSString * const FormatTypeTime = @"~~~~~";

我应该声明

> 静态 NSString * const FormatTypeTime = @"~~~~~";

我忘了使用“**静态**”。我在很多文件中使用了这个变量。这就是为什么每个文件看起来都重复的原因。

感谢您回答我的问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T05:37:12.057

当同名文件被编译两次时会发生此错误。

转到项目目标-> 构建阶段-> 在“编译源”下查找相同文件的多次出现。您也可以在那里搜索文件名。

从那里删除多个事件。

如果在您的项目中多次添加文件，则删除重复文件并仅保留一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-29T08:54:43.590

该错误表明，在您的任何 2 个文件中，变量名（或方法名）重复，具有全局范围。您可以通过以下方式解决此问题，

*)重命名变量或方法

或者

*) 将变量或方法的范围更改为本地（通过将声明语句添加到 .m 文件的接口部分。）

# php - 在带有数据的 $.mobile.changePage 和两个 .php 页面之间，onload 不起作用

> ID：15057274
> 
> 赞同：2
> 
> 时间：2013-02-24T22:13:07.767
> 
> 标签：php, jquery, jquery-mobile

我有 2 个 php 页面，我正在调用第二个这样的页面：

```
$.mobile.changePage("cuestionario.php?", { transition: "slide", type: "post", data: data ,changeHash:true,reloadPage:true},true, true); 
```

但是，在第二页中，我有许多功能，只有 4 次尝试提醒，但在页面收费后它们无法正常工作，但当我按下 F5 按钮时，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:38:43.107

[http://api.jquerymobile.com/category/events/](http://api.jquerymobile.com/category/events/)

你真的在使用 onload 事件吗？如果您使用的是 jQuery Mobile，则应该使用 pageshow。

# java - 圣杯。Hibernate 延迟加载多个对象

> ID：15057276
> 
> 赞同：4
> 
> 时间：2013-02-24T22:13:09.733
> 
> 标签：java, hibernate, grails

我在使用 Grails 中的代理对象时遇到了困难。假设我有以下

```
class Order {
    @ManyToMany(fetch = FetchType.EAGER)
    @JoinTable(name="xxx", joinColumns = {@JoinColumn(name = "xxx")}, inverseJoinColumns = {@JoinColumn(name = "yyy")})
    @OrderBy("id")
      @Fetch(FetchMode.SUBSELECT)
      private List<OrderItem> items;
    } 

class Customer {
    @ManyToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY, optional = true)
    @JoinColumn(name = "xxx",insertable = false, nullable = false)
    private OrderItem lastItem;

    private Long lastOrderId;
} 
```

在一些控制器类里面

```
//this all happens during one hibernate session.
    def currentCustomer = Customer.findById(id)
//at this point currentCustomer.lastItem is a javassist proxy

def lastOrder = Order.findById(current.lastOrderId)
//lastOrder.items is a proxy
//Some sample actions to initialise collections 
lastOrder.items.each { println "${it.id}"} 
```

迭代后`lastOrder.items`仍包含 的代理`currentCustomer.lastItem`。例如，如果 lastOrder.items 集合中有 4 个项目，它看起来像这样：

*   目的
*   目的
*   javassist 代理（所有字段为空，包括 id 字段）。这与 currentCustomer.lastItem 中的对象相同。
*   目的

此外，这个代理对象的所有属性都设置为 null，并且在调用 getter 时它没有被初始化。我必须手动调用`GrailsHibernateUtils.unwrapIdProxy()`内部的每个元素`lastOrder.items`以确保内部没有代理（这基本上会导致 EAGER 获取）。

这个代理对象会导致一些非常奇怪的异常，这些异常在测试阶段很难跟踪。

有趣的事实：如果我改变操作的顺序（首先加载订单，然后加载客户），里面的每个元素都会`lastOrder.items`被初始化。

问题是：有没有办法告诉 Hibernate 当它们被触摸时它应该初始化集合，不管集合中的任何元素是否已经在会话中被代理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T14:00:38.463

我认为这里发生的是一级缓存（存储在 Hibernate 的 Session 实例中）和`FetchType`相关对象不同之间的有趣交互。

当您加载时，它会连同任何随它一起加载的对象一起`Customer`被放入缓存中。`Session`这包括该对象的代理对象`OrderItem`，因为您有`FetchType.LAZY`. Hibernate 只允许一个实例与任何特定 ID 相关联，因此任何进一步的操作将`OrderItem`使用该 ID***将始终使用该代理***。如果您要求以另一种方式`Session`获得该特定`OrderItem`信息，就像您通过加载`Order`包含它的方式一样`Order`，则由于会话级身份规则，该代理将具有代理。

这就是为什么当您颠倒顺序时它会“起作用”。加载第`Order`一个，它的集合是`FetchType.EAGER`，所以它（和一级缓存）已经完全实现了`OrderItem`. 现在加载一个`Customer`已将其`lastItem`设置为已加载`OrderItem`实例之一的 a，然后，您将拥有一个真实的`OrderItem`，而不是代理。

[您可以查看Hibernate 手册](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/transactions.html#transactions-basics-identity)中记录的身份规则：

> 对于附加到特定会话的对象... 用于数据库身份的 JVM 身份由 Hibernate 保证。

综上所述，即使您获得了`OrderItem`代理，只要关联`Session`仍然处于活动状态，它就应该可以正常工作。我不一定希望代理 ID 字段显示为在调试器中填充或类似内容，仅仅是因为代理以“特殊”方式处理事物（即，它不是 POJO）。但它应该以与基类相同的方式响应方法调用。因此，如果您有一个`OrderItem.getId()`方法，它当然应该在调用时返回 ID，并且在任何其他方法上也是如此。因为它是延迟初始化的，所以其中一些调用可能需要数据库查询。

这里唯一真正的问题可能只是拥有它会让人感到困惑，因此任何特定的东西`OrderItem`都可能是代理或不是代理。也许你想简单地改变关系，让他们要么都懒惰，要么都渴望？

对于它的价值，你有 ManyToMany 关系 as`EAGER`和 ManyToOne as 有点奇怪`LAZY`。这与通常的设置完全相反，所以我至少会考虑改变它（尽管我显然不知道你的整个用例）。一种思考方式：如果`OrderItem`完全获取 an 的成本太高以至于在查询时出现问题，那么一次加载*所有*`Customer`这些肯定也太昂贵了吗？或者相反，如果它足够便宜来加载所有这些，那么它肯定足够便宜，当你得到一个?*`Customer`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:52:09.213

我认为您可以通过这种方式强制急切加载或使用

```
def lastOrder = Order.withCriteria(uniqueResult: true) {
       eq('id', current.lastOrderId)
       items{}
   } 
```

或使用带有“获取所有”的 HQL 查询*

# haskell - 将 Haskell 运算符作为值处理

> ID：15057280
> 
> 赞同：10
> 
> 时间：2013-02-24T22:13:55.210
> 
> 标签：haskell

我正在挑战自己编写一个简单版本的计算器，并想出了一种通过查找字符串来检索运算符的方法[：](https://stackoverflow.com/questions/15046196/haskell-need-enlightenment-with-calculator-program)

```
ops = [("+", (+)), ("-", (-)), ("*", (*)), ("/", (/))] 
```

这工作得很好。
但是，当我尝试将 ("^", (^)), ("mod", (mod)) 或 ("div", (div)) 添加到列表中时，我受到了以下欢迎：

```
Ambiguous type variable `a0' in the constraints:
  (Fractional a0) arising from a use of `/' at new2.hs:1:50-52
  (Integral a0) arising from a use of `mod' at new2.hs:1:65-67
  (Num a0) arising from a use of `+' at new2.hs:1:14-16
Possible cause: the monomorphism restriction... 
```

或者，将六个不带 (/) 的运算符分组也可以正常工作，但是当我尝试创建一个可以返回七个运算符中的任何一个的函数时（通过使用 if-else 或查找两个不同的例如列表）。返回六个中的任何一个都可以，或者只使用 (+)、(-)、(*) 和 (/) 也可以，使用简单的函数：

```
findOp op = fromJust $ lookup op ops 
```

基于字符串或其他内容存储和检索这七个运算符中的任何一个的便捷方法是什么？或者也许我应该考虑另一种方法来计算计算器的解析输入字符串？（我认为 eval 和 parsec 被排除在这个练习之外，如果可以的话，我不希望使用 -XNoMonomorphismRestriction）

这是我的基本计算器，它可以以正确的优先级解析 +、-、* 和 /，我希望继续使用它：

```
import Data.Maybe

ops = [("+", (+)), ("-", (-)), ("*", (*)), ("/", (/))]

parseLex a = fst $ head a
findOp op = fromJust $ lookup op ops

calculate str accum op memory multiplication
  | operand1 /= "" && nextOp == "" = show (op accum (read operand1) + memory)
  | nextOp == "+" || nextOp == "-" = 
      calculate tailLex (op accum (read operand1) + memory) (findOp nextOp) 0 False
  | nextOp == "*" || nextOp == "/" =
      if multiplication 
         then calculate tailLex (op accum (read operand1)) (findOp nextOp) memory True
         else calculate tailLex (read operand1) (findOp nextOp) accum True
  | otherwise = "Parse error. operand1: " ++ operand1 ++ " nextOp: " ++ nextOp
 where lexemes = head $ lex str
       operand1 = fst lexemes
       nextOp = parseLex $ lex $ snd lexemes
       tailLex = tail $ snd lexemes

main :: IO ()
main = do
  str <- getLine
  case parseLex $ lex str of
    "quit"    -> do putStrLn ""; return ()
    ""        -> main
    otherwise -> do
      putStrLn (calculate str 0 (+) 0 False)
      main 
```

**更新：**

这是更完善的 Haskell 计算器，利用了答案（带有后缀、括号解析和变量/函数声明）：

```
import Data.Maybe
import Data.List
import Data.List.Split
import Text.Regex.Posix
import System.Console.ANSI

ops :: [([Char], Float -> Float -> Float)]
ops = [ ("+", (+)) 
       ,("-", (-)) 
       ,("*", (*)) 
       ,("/", (/)) 
       ,("**", (**))
       ,("^", (**))
       ,("^^", (**)) 
       ,("logbase", (logBase))
       ,("div", (div'))
       ,("mod", (mod')) 
       ,("%", (mod'))
       ,("rem", (rem'))
       ,("max", (max))
       ,("min", (min))]

unaryOps :: [([Char], Float -> Float)]
unaryOps = [ ("abs", (abs))
            ,("sqrt", (sqrt))
            ,("floor", (floor'))
            ,("ceil", (ceiling'))
            ,("round", (round'))
            ,("log", (log))
            ,("cos", (cos))
            ,("sin", (sin))
            ,("tan", (tan))
            ,("asin", (asin))
            ,("acos", (acos))
            ,("atan", (atan))
            ,("exp", (exp))
            ,("!", (factorial)) ]

opsPrecedence :: [([Char], Integer)]
opsPrecedence = [ ("+", 1) 
                 ,("-", 1) 
                 ,("*", 2) 
                 ,("/", 2) 
                 ,("**", 3) 
                 ,("^", 3)
                 ,("^^", 3) 
                 ,("logbase", 3)
                 ,("div", 4) 
                 ,("mod", 4) 
                 ,("%", 4) 
                 ,("rem", 4)
                 ,("max", 4)
                 ,("min", 4)                 
                 ,("abs", 7)
                 ,("sqrt", 7)
                 ,("floor", 7)
                 ,("ceil", 7)
                 ,("round", 7) 
                 ,("log", 7)
                 ,("cos", 7)
                 ,("sin", 7)
                 ,("tan", 7)
                 ,("asin", 7)
                 ,("acos", 7)
                 ,("atan", 7)
                 ,("exp", 7)
                 ,("!", 7) ]            

floor' :: Float -> Float
floor' a = fromIntegral $ floor a

ceiling' :: Float -> Float
ceiling' a = fromIntegral $ ceiling a

mod' :: Float -> Float -> Float
mod' a b = a - b * floor' (a / b)

div' :: (Num b, RealFrac a) => a -> a -> b
div' a b = fromIntegral $ truncate (a / b)

rem' :: Float -> Float -> Float
rem' a b = a - (fromIntegral (truncate (a / b)) * b)

round' :: Float -> Float
round' a = fromIntegral $ round a

factorial :: Float -> Float
factorial n = foldl (*) 1 [1..n]

{-Op Detection and Lookup-}

isOp :: [Char] -> Bool
isOp op = case lookup op ops of
            Just _  -> True
            Nothing -> False

isUnaryOp :: [Char] -> Bool
isUnaryOp op = case lookup op unaryOps of
                 Just _  -> True
                 Nothing -> False

opPrecedence :: [Char] -> [([Char],[Char])] -> Integer
opPrecedence op env
  | not (null $ isInEnv op env) = 6
  | otherwise               = fromJust $ lookup op opsPrecedence

findOp :: [Char] -> Float -> Float -> Float
findOp op = fromJust $ lookup op ops

findUnaryOp :: [Char] -> Float -> Float
findUnaryOp op = fromJust $ lookup op unaryOps

{-String Parsing Functions-}

trim :: [Char] -> [Char]
trim str = dropWhile (==' ') (reverse $ dropWhile (==' ') (reverse str))

fstLex :: [Char] -> [Char]
fstLex a = fst $ head (lex a)

sndLex :: [Char] -> [Char]
sndLex a = snd $ head (lex a)

lexWords :: [Char] -> [[Char]] 
lexWords xs =
  lexWords' xs []
    where lexWords' ys temp
            | null ys   = temp
            | otherwise = let word = fstLex ys
                          in lexWords' (trim $ sndLex ys) (temp ++ [word])

{-Mathematical Expression Parsing Functions-}

toPostfix :: [Char] -> [([Char],[Char])] -> [[Char]]
toPostfix expression env = toPostfix' expression [] [] "" env
  where toPostfix' expression stack result previous env
          | null expression && null stack                              = result
          | null expression && not (null stack)                        = result ++ stack
          | ch == ","                                                  = toPostfix' right stack result ch env
          | ch == "("                                                  = toPostfix' right (ch:stack) result ch env
          | ch == ")"                                                  =
              let popped = takeWhile (/="(") stack
              in toPostfix' right (drop (length popped + 1) stack) (result ++ popped) ch env
          | not (null $ isInEnv ch env) 
            && (length $ words $ fst $ head (isInEnv ch env)) == 1     =
              let variable = head $ isInEnv ch env
              in toPostfix' (snd variable ++ " " ++ right) stack result ch env
          | (null $ isInEnv ch env) && not (isOp ch || isUnaryOp ch)   = 
              if take 1 ch =~ "(^[a-zA-Z_])"
                 then words ("Parse error : not in scope, " ++ "'" ++ ch ++ "'")
                 else let number = reads ch :: [(Double, String)]
                      in if not (null number) && (null $ snd $ head number)
                            then toPostfix' right stack (result ++ [ch]) ch env
                            else words ("Parse error : " ++ "'" ++ ch ++ "'")
          | otherwise                                                  =
              if null result && ch == "-" || (isOp previous || isUnaryOp previous) && ch == "-"
                 then let negative = '-' : (fstLex right)
                          right' = sndLex right
                      in toPostfix' right' stack (result ++ [negative]) (fstLex right) env
                 else toPostfix' right (ch : (drop (length popped') stack)) (result ++ popped') ch env
         where ch = fstLex expression
               right = trim (sndLex expression)
               popped' = popStack ch stack
                  where popStack ch stack'
                          | null stack' = []
                          | head stack' /= "(" && opPrecedence ch env <= opPrecedence (head stack') env=
                              take 1 stack' ++ popStack ch (drop 1 stack')
                          | otherwise  = []

evaluate :: [Char] -> [[Char]] -> [Char]
evaluate op operands = 
  let operand1 = head operands
      operand1' = reads operand1 :: [(Double, String)]
      errorMsg = "Parse error in evaluation."
  in if not (null operand1') && null (snd $ head operand1')
        then case length operands of
               1         -> show (findUnaryOp op (read operand1))
               otherwise -> let operand2 = head (drop 1 operands)
                                operand2' = reads operand2 :: [(Double, String)]
                            in if not (null operand2') && null (snd $ head operand2')
                                  then show (findOp op (read operand1) (read operand2))
                                  else errorMsg
     else errorMsg

evalDef :: ([Char],[Char]) -> [[Char]] -> [([Char],[Char])] -> [Char]
evalDef def args env = 
  evalPostfix (toPostfix (replaceParams (drop 1 $ words (fst def)) args (snd def) "") env) env
    where replaceParams params values exp temp
            | length params /= length values = "Parse error : function parameters do not match."
            | null exp                       = init temp
            | otherwise                      = 
                let word = fstLex exp
                    replaced = if elem word params
                                  then temp++ values!!(fromJust $ elemIndex word params) ++ " " 
                                  else temp++ word ++ " " 
                in  replaceParams params values (drop (length word) (trim exp)) replaced

evalPostfix :: [[Char]] -> [([Char],[Char])] -> [Char]
evalPostfix postfix env
  | elem "error" postfix = unwords postfix
  | otherwise = head $ evalPostfix' postfix [] env
      where evalPostfix' postfix stack env
              | null postfix = stack
              | null (isInEnv (head postfix) env) && not (isOp (head postfix) || isUnaryOp (head postfix)) 
                             = evalPostfix' (drop 1 postfix) (head postfix : stack) env
              | otherwise    =
                  let op = head postfix
                      numOperands = if isOp op 
                                       then 2
                                       else if isUnaryOp op
                                               then 1
                                               else let def = isInEnv op env
                                                    in length (words $ fst $ head def) - 1
                  in if length stack >= numOperands
                        then let retVal = 
                                   if isOp op || isUnaryOp op
                                      then evaluate op (reverse $ take numOperands stack)
                                      else let def = isInEnv op env
                                           in evalDef (head def) (reverse $ take numOperands stack) env
                             in if not (isInfixOf "error" retVal)
                                   then evalPostfix' (drop 1 postfix) (retVal : drop numOperands stack) env
                                   else [retVal]
                        else ["Parse error."]

{-Environment Setting Functions-}

isInEnv :: [Char] -> [([Char],[Char])] -> [([Char],[Char])]
isInEnv first []     = []
isInEnv first (x:xs)
  | fstLex first == fstLex (fst x) = [x]
  | otherwise                      = isInEnv first xs

setEnv :: [Char] -> ([Char], [Char])
setEnv str =
  if elem '=' str 
     then let nameAndParams = let function = takeWhile (/='=') str
                              in unwords $ filter (\x -> x/="(" && x/="," && x/=")") (lexWords function)
              expression = unwords $ lexWords (tail (dropWhile (/='=') str))
          in if not (null nameAndParams)
                then if fstLex nameAndParams =~ "(^[a-zA-Z_])"
                        then (nameAndParams, expression)
                        else ("error", "Parse error : illegal first character in variable name.")
                else ("error", "Parse error : null variable name.")
     else ("error", "Parse error.")

declare :: [Char] -> [([Char], [Char])] -> IO ()
declare str env =
  let which = if str =~ "(^ *[a-zA-z_][a-zA-Z0-9_]* *=)" :: Bool
                 then "var"
                 else "def"
      declarationList = case which of
                          "var" -> splitOn "," str
                          "def" -> [str]
  in declare' declarationList env which
    where declare' [] _ _           = mainLoop env 
          declare' (x:xs) env which =
            let result = setEnv x
            in if fst result /= "error"
                  then let match = isInEnv (fst result) env
                           env' = if not (null match)
                                         then deleteBy (\x -> (==head match)) (head match) env 
                                         else env
                           newList = if not (null $ snd result)
                                        then (result : env')
                                        else env'
                       in case which of
                            "def"     -> mainLoop newList
                            otherwise -> if null xs 
                                            then mainLoop newList
                                            else declare' xs newList which
                  else do putStrLn $ snd result
                          mainLoop env

{-Main Calculation Function-}

calculate :: [Char] -> [([Char],[Char])] -> [Char]
calculate str env = 
  evalPostfix (toPostfix str env) env

helpContents = "\nTo declare variables, type:\n[var] VARIABLE_NAME = VALUE [, more variable declarations..]\n"
               ++ "Functions and partial functions may be assigned to variables.\n\n"
               ++ "To declare functions, type:\n"
               ++ "FUNCTION_NAME VARIABLE_1 [variable_2..] = EXPRESSION\n\n"
               ++ "Supported math functions:\n"
               ++ "+, -, *, /, ^, **, ^^\n"
               ++ "sqrt, exp, log, logbase BASE OPERAND\n"
               ++ "abs, div, mod, %, rem, floor, ceil, round\n"
               ++ "pi, sin, cos, tan, asin, acos, atan\n"
               ++ "! (factorial), min, max and parentheses: ()\n\n"
               ++ "Type env to see a list of environment variables\nand functions. Type cls to clear screen, quit to quit\n" 

main :: IO ()
main = do putStrLn "calc v2.0 (c) 2013 Diagonal Productions\nPlease enter an expression:\n"
          mainLoop [("pi", show pi), ("min a b", "min a b"), ("max a b", "max a b")]

mainLoop :: [([Char], [Char])] -> IO ()
mainLoop env = do
  str <- getLine
  if elem '=' str
     then declare str env
     else case fstLex str of
          "quit"    -> do putStrLn ""; return ()
          ""        -> mainLoop env
          "env"     -> do putStrLn ("\nEnvironment:\n" ++ show env ++ "\n")
                          mainLoop env
          "cls"     -> do clearScreen
                          setCursorPosition 0 0
                          mainLoop env
          "help"    -> do putStrLn helpContents
                          mainLoop env
          otherwise -> do
            putStrLn $ calculate str env
            mainLoop env 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-24T23:13:17.977

在提出解决方案之前，让我快速解释一下为什么您的编译器会抱怨您当前的代码。为了说明这一点，让我们看一下一些运算符的类型签名：

```
(+) :: Num a => a -> a -> a
(/) :: Fractional a => a -> a -> a
(mod) :: Integral a => a -> a -> a 
```

正如你所看到的，Haskell 有几种不同类型的数字，它使用类型类对它们进行分类：`Num`是可以加、减、乘等的东西，`Fractional`s 是具有明确除法的数字，`Integral`是类似整数的数字。此外，`Fractional`和`Integral`都是 的子类`Num`。这就是为什么这两个工作：

```
[(+), (mod)] :: Integral a => [a -> a -> a]
[(+), (/)] :: Fractional a => [a -> a -> a] 
```

可以说，它只是使用“最常见的类型”来表示列表中函数的类型。但是，您*不能*简单地将`Fractional`s 上的函数与`Integral`s 上的函数混合在同一个列表中！

您声明您想要使用“无论 lex 返回什么”，但这只是一个无类型的字符串，您实际上想要使用数字。但是，由于您希望能够使用浮点数和整数，因此[sum 类型](https://haskell.fpcomplete.com/school/pick-of-the-week/sum-types)将是一个不错的选择：

```
import Safe (readMay)

data Number = I Integer | D Double

parseNumber :: String -> Maybe Number
parseNumber str =
    if '.' `elem` str then fmap I $ readMay str
                      else fmap D $ readMay str 
```

现在您遇到的问题是定义运算符的合理实例相当麻烦。由于[Attoparsec](http://hackage.haskell.org/package/attoparsec-0.10.4.0)`Number`库中已经存在该类型，我建议使用它，因为它免费为您提供解析器和实例。当然，如果您愿意，您可以随时为此编写自己的代码。`Num`

```
import qualified Data.Attoparsec.Text as P
import qualified Data.Attoparsec.Number as P
import qualified Data.Text as T

parseNumber :: String -> Maybe P.Number
parseNumber str =
    either (const Nothing) Just $ P.parseOnly P.number (T.pack str)

myMod :: P.Number -> P.Number -> Maybe P.Number
myMod (P.I a) (P.I b) = Just . P.I $ a `mod` b
myMod _ _ = Nothing -- type error!

myPow :: P.Number -> P.Number -> Maybe P.Number
myPow x (P.I b) = Just $ x ^ b
myPow (P.D a) (P.D b) = Just . P.D $ a ** b
myPow (P.I a) (P.D b) = Just . P.D $ (fromIntegral a) ** b

ops :: [(String, (P.Number -> P.Number -> Maybe P.Number))]
ops = [ ("+", liftNum (+))
      , ("-", liftNum (-))
      , ("*", liftNum (*))
      , ("/", liftNum (/))
      , ("mod", myMod)
      , ("^", myPow)
      ]
      where liftNum op a b = Just $ a `op` b 
```

您现在可以在定义明确的输入集上定义您想要的任何操作。当然，现在您还必须处理类型错误，例如`1.333 mod 5.3`，但这很好！编译器强迫你做正确的事:)

通过避免偏`read`函数，您还必须明确检查输入错误。您的原始程序会在输入类似`a + a`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T22:17:55.623

问题是 , 和 的类型`(/)`都`mod`非常`(+)`不同*，*因为错误消息指出：`(/)`适用于`Fractional`s like`Float`和`Double`while`mod`适用于`Integrals`like`Int`和`Integer`。另一方面`(+)`，可以与任何`Num`. 这些运算符在同一上下文中不可互换。

**编辑：**

现在我可以看到一些代码，看起来问题是由 Haskell 编译器试图推断`ops`列表的类型引起的。让我们看看这个列表的元素的类型：

```
前奏> :t ("+", (+))
("+", (+)) :: Num a => ([Char], a -> a -> a)
前奏> :t ("/", (/))
("/", (/)) :: 小数 a => ([Char], a -> a -> a)
前奏> :t ("mod", mod)
("mod", mod) :: 积分 a => ([Char], a -> a -> a)
前奏>
```

请注意，这些对中的每一对都有不同的类型。但我只是重复我原来的答案。一种可能的解决方案是给出一个明确的类型，`ops`这样 Haskell 就不会试图推断出一个。

**坏消息：**

我找不到可以解决问题的简单类型签名。我试过

```
ops :: Num a => [(String, a -> a -> a)] 
```

这给出了明显源于相同原因的不同错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T00:21:24.943

感谢 Niklas 的回答，我注意到 (**) 的类型与 (^) 不同，并且适用于我的简单运算符列表。之后，我决定为 div 和 mod 写出简短的替代定义，如下所示：

```
mod' :: Float -> Float -> Float
mod' a b = a - b * floor' (a / b)

div' :: (Num b, RealFrac a) => a -> a -> b
div' a b = fromIntegral $ truncate (a / b)

floor' :: Float -> Float
floor' a = fromIntegral $ floor a 
```

将 (**)、(mod') 和 (div') 添加到我的列表中，编译器编译得很好。（而且由于运算符是从字符串中解析出来的，所以它们也可以保留原来的名称。）

# javascript - jQuery attr vs. prop，有props的列表吗？

> ID：15057281
> 
> 赞同：5
> 
> 时间：2013-02-24T22:13:54.967
> 
> 标签：javascript, jquery, attr, prop

这不是一个[重复的问题](https://stackoverflow.com/questions/13247058)，我只需要决定更好/更快/正确是使用`attr`还是使用`prop`。最简单可靠的方法是检查列表。“*使用更好的元素名称列表`prop(name)`和/或使用更好的列表`attr(name)`*”。

PS：我使用的是 jQuery 1.9+，并假设这`attr()`不是一个弃用的方法。

**决策示例**（*LIST*有答案）：

*   `$(x).prop('id')`是通过还是通过更好地获取 ID 值`$(x).attr('id')`？
*   用`$(x).prop('title','BLABLA')`还是用 更改标题更好`$(x).attr('title','BLABLA')`？
*   我可以使用`$(x).attr('selectedIndex')`吗？
*   哪些属性名称具有“[跨浏览器一致性](http://api.jquery.com/attr/)”的风险？
*   在某些情况下（使用 Microsoft-IE p.ex.）会在哪里返回不同的`$(x).attr('name')`东西`$(x).prop('name')`？

* * *

也许不需要完整的列表，只需列出对 jQuery 产生一些影响或风险的事物。

关闭后编辑：**请单击下面的重新*打开*链接以接受**此编辑后的问题文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:20:48.787

They vary from browser-to-browser, but here's IE's list...[http://msdn.microsoft.com/en-us/library/ie/hh773183(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/hh773183(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:40:45.123

查看[https://developer.mozilla.org/en-US/docs/DOM/element#Properties](https://developer.mozilla.org/en-US/docs/DOM/element#Properties)并考虑许多属性仅适用于特殊类型的元素。

# google-visualization - Google 协作平台和 Google 图表工具

> ID：15057284
> 
> 赞同：1
> 
> 时间：2013-02-24T22:13:58.930
> 
> 标签：google-visualization, google-sites

我正在尝试在 Google 网站中包含 Google 图表工具仪表板。

问题是**要在 Google 网站的 html 框中包含哪些代码**。我已经使用下面的代码尝试了不同的变体，但我不断得到

```
failed to load external URL jsapi 
```

该代码在直接加载的 html 文件中完美运行，但在 Google Site 的 html 框中却没有。

```
<html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Task', 'Hours per Day'],
          ['Work',     11],
          ['Eat',      2],
          ['Commute',  2],
          ['Watch TV', 2],
          ['Sleep',    7]
        ]);

        var options = {
          title: 'My Daily Activities'
        };

        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:04:32.150

你可能想用应用脚本试试这个：

[“目前，Google 协作平台不允许使用 JavaScript、iFrames 或 CSS 标签，因为使用这些语言可能会使您的网站面临安全风险。如果不加以保护，这些形式的代码可能允许人们插入恶意代码，这些代码可能伤害您或您网站的访问者。”](http://support.google.com/sites/answer/90540?hl=en)

# java - 将 MergeSort 与 Insertion 排序相结合，提高效率

> ID：15057287
> 
> 赞同：0
> 
> 时间：2013-02-24T22:14:02.953
> 
> 标签：java, mergesort, insertion-sort

所以我有一个 MergeSort 算法，我想将 MergeSort 与插入排序结合起来以减少合并的开销，问题是如何？我想使用插入排序对段进行排序，然后合并。

```
 public class mergesorttest{
    public static void main(String[]args){
        int d[]= {10,2,3,4,5,6,5,4,3,5,6,7,1};
        mergeSort(d,0,d.length);
        for(int x:d) System.out.print(x+" "); 
        System.out.println(); 
    }

static void mergeSort(int f[],int lb, int ub){
    //termination reached when a segment of size 1 reached -lb+1=ub
    if(lb+1<ub){
        int mid = (lb+ub)/2;
        mergeSort(f,lb,mid);
        mergeSort(f,mid,ub);
        merge(f,lb,mid,ub);
    }
}

static void merge (int f[],int p, int q, int r){
    //p<=q<=r
    int i =p; int j = q; 
    //use temp array to store merged sub-sequence
    int temp[] = new int[r-p]; int t = 0; 
    while(i<q && j<r){
        if(f[i]<=f[j]){
            temp[t] =f[i]; 
            i++;t++;
        }
        else{
            temp[t] = f[j];
            j++;
            t++;
        }

        //tag on remaining sequence
        while(i<q){
            temp[t] = f[i];
            i++;
            t++;

        }
        while(j<r){
            temp[t]=f[j];
            j++;
            t++;
        }
        //copy temp back to f
        i=p;t=0;
        while(t<temp.length){
            f[i]=temp[t];
            i++;
            t++;
        }
        }
}
} 
```

* * *

```
public static void insertion_srt(int array[], int n, int b){
  for (int i = 1; i < n; i++){
  int j = i;
  int B = array[i];
  while ((j > 0) && (array[j-1] > B)){
  array[j] = array[j-1];
  j--;
  }
  array[j] = B;
  }
  } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T08:35:01.970

合并自动负责对元素进行排序。但是，当列表低于某个阈值时，可以使用插入排序进行排序：

```
static final int THRESHOLD = 10;
static void mergeSort(int f[],int lb, int ub){
    if (ub - lb <= THRESHOLD)
        insertionSort(f, lb, ub);
    else
    {
        int mid = (lb+ub)/2;
        mergeSort(f,lb,mid);
        mergeSort(f,mid,ub);
        merge(f,lb,mid,ub);
    }
} 
```

做除此之外的任何事情（除了稍微调整阈值）都会**增加**归并排序所花费的时间。

虽然归并排序是 O(n log n) 而插入排序是 O(n ² )，但插入排序具有更好的常数，因此在非常小的数组上速度更快。[this](https://stackoverflow.com/questions/12622015/why-should-insertion-sort-be-used-after-threshold-crossover-in-merge-sort) , [this](https://stackoverflow.com/questions/736920/is-there-ever-a-good-reason-to-use-insertion-sort) , [this](https://stackoverflow.com/questions/7643377/why-is-insertion-sort-faster-than-quick-sort-and-bubble-sort-for-small-cases)和[this](https://stackoverflow.com/questions/8101546/why-is-insertion-sort-better-than-quick-sort-for-small-list-of-elements)是我发现的一些相关问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-20T15:42:41.267

```
public static final int K = 5;

public static void insertionSort(int A[], int p, int q) {
    for (int i = p; i < q; i++) {
        int tempVal = A[i + 1];
        int j = i + 1;
        while (j > p && A[j - 1] > tempVal) {
            A[j] = A[j - 1];
            j--;
        }
        A[j] = tempVal;
    }
    int[] temp = Arrays.copyOfRange(A, p, q +1);
    Arrays.stream(temp).forEach(i -> System.out.print(i + " "));
    System.out.println();
}

public static void merge(int A[], int p, int q, int r) {
    int n1 = q - p + 1;
    int n2 = r - q;
    int[] LA = Arrays.copyOfRange(A, p, q +1);
    int[] RA = Arrays.copyOfRange(A, q+1, r +1);
    int RIDX = 0;
    int LIDX = 0;
    for (int i = p; i < r - p + 1; i++) {
        if (RIDX == n2) {
            A[i] = LA[LIDX];
            LIDX++;
        } else if (LIDX == n1) {
            A[i] = RA[RIDX];
            RIDX++;
        } else if (RA[RIDX] > LA[LIDX]) {
            A[i] = LA[LIDX];
            LIDX++;
        } else {
            A[i] = RA[RIDX];
            RIDX++;
        }
    }
}

public static void sort(int A[], int p, int r) {
    if (r - p > K) {
        int q = (p + r) / 2;
        sort(A, p, q);
        sort(A, q + 1, r);
        merge(A, p, q, r);
    } else {
        insertionSort(A, p, r);
    }
}

public static void main(String string[]) {
    int[] A = { 2, 5, 1, 6, 7, 3, 8, 4, 9 };
    sort(A, 0, A.length - 1);
    Arrays.stream(A).forEach(i -> System.out.print(i + " "));
} 
```

# android-maps-v2 - Android 2.3.4 Gingerbread 上的 Android Maps V2

> ID：15057288
> 
> 赞同：0
> 
> 时间：2013-02-24T22:14:04.850
> 
> 标签：android-maps-v2

**在我的xperia neo v cell (android v 2.3.4)**上运行简单的示例代码时我遇到了一个大问题。我已经导入 android-support-v4.jar 并将 google-play-services_lib 添加到项目库中。请给我一些可以解决我问题的问题。我的问题如下所示：

```
02-24 23:27:34.183: E/AndroidRuntime(19099): FATAL EXCEPTION: main
02-24 23:27:34.183: E/AndroidRuntime(19099): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.googleMapApp/com.googleMapApp.LocationProfileManagerActivity}: java.lang.ClassNotFoundException: com.googleMapApp.LocationProfileManagerActivity in loader dalvik.system.PathClassLoader[/data/app/com.googleMapApp-1.apk]
02-24 23:27:34.183: E/AndroidRuntime(19099):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1581)
02-24 23:27:34.183: E/AndroidRuntime(19099):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
02-24 23:27:34.183: E/AndroidRuntime(19099):    at android.app.ActivityThread.access$1500(ActivityThread.java:121)
02-24 23:27:34.183: E/AndroidRuntime(19099):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
02-24 23:27:34.183: E/AndroidRuntime(19099):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-24 23:27:34.183: E/AndroidRuntime(19099):    at android.os.Looper.loop(Looper.java:130)
02-24 23:27:34.183: E/AndroidRuntime(19099):    at android.app.ActivityThread.main(ActivityThread.java:3701)
02-24 23:27:34.183: E/AndroidRuntime(19099):    at java.lang.reflect.Method.invokeNative(Native Method)
02-24 23:27:34.183: E/AndroidRuntime(19099):    at java.lang.reflect.Method.invoke(Method.java:507)
02-24 23:27:34.183: E/AndroidRuntime(19099):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
02-24 23:27:34.183: E/AndroidRuntime(19099):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
02-24 23:27:34.183: E/AndroidRuntime(19099):    at dalvik.system.NativeStart.main(Native Method)
02-24 23:27:34.183: E/AndroidRuntime(19099): Caused by: java.lang.ClassNotFoundException: com.googleMapApp.LocationProfileManagerActivity in loader dalvik.system.PathClassLoader[/data/app/com.googleMapApp-1.apk]
02-24 23:27:34.183: E/AndroidRuntime(19099):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
02-24 23:27:34.183: E/AndroidRuntime(19099):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
02-24 23:27:34.183: E/AndroidRuntime(19099):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
02-24 23:27:34.183: E/AndroidRuntime(19099):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
02-24 23:27:34.183: E/AndroidRuntime(19099):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1573)
02-24 23:27:34.183: E/AndroidRuntime(19099):    ... 11 more 
```

我的清单文件：

```
`<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.googleMapApp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <permission
        android:name="com.googleMapApp.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.googleMapApp.permission.MAPS_RECEIVE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <!-- Require OpenGL ES version 2 -->
    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".LocationProfileManagerActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="my_key" />
    </application>

</manifest>` 
```

我的 Main.java 文件：

```
 package com.example.googlemapapp;

import com.googleMapApp.R;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;

public class Main extends FragmentActivity{

    @Override
    protected void onCreate(Bundle arg0) {
        // TODO Auto-generated method stub
        super.onCreate(arg0);
        setContentView (R.layout.activity);
    }

} 
```

布局文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/map"
       android:name="com.google.android.gms.maps.SupportMapFragment"
       android:layout_width="wrap_content"
       android:layout_height="match_parent" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:41:25.710

根据清单，您的**LAUNCHER Activity**是 LocationProfileManagerActivity。但是你的类是 Main.java。因此，将**Main.java**重命名为**LocationProfileManagerActivity.java**并且不要忘记更改类名。核实

# android - 为什么 ACTION_MEDIA_BUTTON 无法处理事件？

> ID：15057291
> 
> 赞同：1
> 
> 时间：2013-02-24T22:14:24.063
> 
> 标签：android, broadcastreceiver, android-audiomanager

在关于如何[使用硬件播放控制键来控制音频播放](http://developer.android.com/training/managing-audio/volume-playback.html#PlaybackControls)的培训部分之后，我创建了一个监听器类：

```
public class RemoteControlReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context arg0, Intent intent) {
        if (Intent.ACTION_MEDIA_BUTTON.equals(intent.getAction())) {
            KeyEvent event = (KeyEvent)intent.getParcelableExtra(Intent.EXTRA_KEY_EVENT);
            Log.e(TAG, "ACTION_MEDIA_BUTTON"); 

            int keycode = event.getKeyCode();
            switch (keycode)
            {
                case KeyEvent.KEYCODE_MEDIA_NEXT:
                    Log.e(TAG, "KEYCODE_MEDIA_NEXT"); 
                    break;
                case KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE:
                    Log.e(TAG, "KEYCODE_MEDIA_PLAY_PAUSE"); 
                    break;
                case KeyEvent.KEYCODE_MEDIA_PREVIOUS:
                    Log.e(TAG, "KEYCODE_MEDIA_PREVIOUS"); 
                    break;
                default:
            }

            if (/*KeyEvent.KEYCODE_MEDIA_PLAY*/ 126 == event.getKeyCode()) { // KEYCODE_MEDIA_PLAY undefined for API < 11
                Log.e(TAG, "KEYCODE_MEDIA_PLAY"); 
            }           
        }
    }
} 
```

在活动的 onCreate() 中注册它：

```
private AudioManager mAudioManager;
private ComponentName mRemoteControlReceiver;
...
...
mAudioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
mRemoteControlReceiver = new ComponentName(this, RemoteControlReceiver.class);
mAudioManager.registerMediaButtonEventReceiver(mRemoteControlReceiver); 
```

并将其注册在清单中：

```
<receiver android:name=".RemoteControlReceiver">
    <intent-filter>
        <action android:name="android.intent.action.MEDIA_BUTTON" />
    </intent-filter>
</receiver> 
```

但是，当按下这些按钮中的任何一个时，不会导致 LogCat 上出现任何日志消息！（无论在播放我的媒体时是否被按下）

我的代码似乎拦截了来自其他媒体播放器的这些事件，但为什么我看不到我的任何`Log.e()`消息？我错过了什么？

顺便说一句，当我按下任何这些按钮时，会出现以下消息：

```
W/KeyCharacterMap(19801): Can't open keycharmap file
W/KeyCharacterMap(19801): Error loading keycharmap file '/system/usr/keychars/h2w_headset.kcm.bin'. hw.keyboards.131075.devname='h2w headset'
W/KeyCharacterMap(19801): Using default keymap: /system/usr/keychars/qwerty.kcm.bin 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T22:54:35.247

你碰巧使用图书馆项目来实现这个吗？

如果是这样，您放入了*哪个*清单`<receiver>`？库的还是应用程序的？

如果你把它放在图书馆里，它就行不通了。您必须将其放在应用程序的清单中：

```
<receiver android:name=".RemoteControlReceiver">
    <intent-filter>
        <action android:name="android.intent.action.MEDIA_BUTTON" />
    </intent-filter>
</receiver> 
```

# asp.net - EF 5 - 模型优先数据库迁移：发布到远程生产服务器后更改模型？

> ID：15057294
> 
> 赞同：1
> 
> 时间：2013-02-24T22:14:46.553
> 
> 标签：asp.net, asp.net-mvc, entity-framework, asp.net-mvc-4, entity-framework-5

我首先在 MVC 5、EF 5.0 代码中进行开发。我使用文件共享文件夹发布项目。

当模型发生变化时，我可以使用数据库迁移来更新正在开发的 localDb。但是，在我将项目发布到远程服务器后，它显示了模型被更改的错误，并且在使用完整 SQL 数据库服务器的生产 Web 服务器上需要迁移。

我知道我可以删除生产服务器上的数据库并让它重新创建数据库。但是，表中已经有用户输入的数据。

有没有办法在不重新创建数据库的情况下应用模型/数据库更改？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T08:00:17.967

是的，有办法。其实有好几个。

*   您可以生成可应用于生产数据库的 SQL 脚本。使用 -Script 标志在包管理器控制台中运行更新数据库，如下所示：

    更新数据库-脚本-SourceMigration：InitialMigration -TargetMigration：LatestMigration

    或者使用像 Red Gate SQL Compare 这样的工具来生成脚本。

*   在应用程序启动时，您可以通过注册 MigrateDatabaseToLatestVersion 数据库初始化程序来自动升级数据库：

    Database.SetInitializer(new MigrateDatabaseToLatestVersion());

[您可以在文章MSDN-Code First Migrations](http://msdn.microsoft.com/en-US/data/jj591621 "MSDN - 代码优先迁移")中阅读有关这两种方法的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T22:31:34.277

我从来没有选择删除生产中的数据库。EF code first 不是为了那个目的，它只是为了开发，

有几个选项，如果您使用 Visual Studio Ultimate，SQL 菜单下有一个架构比较工具。或者，您可以使用 Red Gate SQL 比较工具。

# xcode - 集成 twitter 框架时，如何使提交不可编辑？

> ID：15057296
> 
> 赞同：0
> 
> 时间：2013-02-24T22:15:07.423
> 
> 标签：xcode, twitter, uitextfield

我有一个游戏，用户可以将分数提交到 Twitter。问题是，现在，他们可以输入任何他们想要的东西，而不是他们的实际分数。通过使 TextField 不可编辑，他们将无法更改分数。

有谁知道解决这个问题？？

这是代码片段（显然也应用了 twitter 框架）：

```
-(IBAction)twitter {

float currentTime = [seconds.text floatValue];
float newTime = currentTime;

NSString *twitter = [NSString stringWithFormat:@"I finished level 2 of #TextOff in %.2f seconds! Think you can beat my score? Download it in the App Store now!", newTime];

TWTweetComposeViewController *tweet = [[TWTweetComposeViewController alloc] init];
[tweet setInitialText:twitter];

//am i able to get ride of the textfield here?????

[self presentModalViewController:tweet animated:YES]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T23:23:24.833

如果您想使用他们在设备上设置的用户 Twitter 帐户在 Twitter 上发帖，**而不显示对话框或允许他们更改任何内容**，请使用社交框架的[SLRequest](http://developer.apple.com/library/ios/#documentation/Social/Reference/SLRequest_Class/Reference/Reference.html)类。这将允许您向 Twitter 发出请求，而无需使用内置的 Twitter 组合对话框。

请注意，您必须将其包装在[对用户的 Access 提示中，](http://developer.apple.com/library/ios/#documentation/Accounts/Reference/ACAccountStoreClassRef/Reference/Reference.html)因此`[ACAccountStore requestAccessToAccountsWithType:options:completion:]`最好至少向他们说明您在警报提示之前或之后所做的事情，否则它看起来很可疑。

# nhibernate - NHibernate：从一个分离的实体初始化一个统一的集合，不可能吗？

> ID：15057297
> 
> 赞同：1
> 
> 时间：2013-02-24T22:15:14.343
> 
> 标签：nhibernate, lazy-loading

例子：

```
public class ParentObj
{
    public virtual int Id { get; set; }
    public virtual IList<ChildObj> ChildCollection { get; set; } //Lazy loaded
} 
```

在一个页面（网络）上获取父对象的一些方法

```
ParentObj parentObj;
using (var session = GetSesion())
using (var tx = session.BeginTransaction())
{
    parentObj = session.Get<ParentObj>(1);
    //Don't want to call NHibernateUtil.Initialize() here 
    //because ChildCollection is not needed for the current operation
} 
```

将 parentObj 转移到另一个页面，现在我需要访问 ChildCollection

```
var parentOjb = GetParentOjbFromPreviousPage();
using (var session = GetSesion())
using (var tx = session.BeginTransaction())
{
    parentOjb = session.Merge(parentObj);
    NHibernateUtil.Initialize(parentObj.ChildCollection); //exception thrown here
} 
```

错误消息：集合未与任何会话关联

我究竟做错了什么？在这种情况下初始化 ChildCollection 的唯一方法是再次调用 Get() 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:53:51.610

根据[Hibernate 文档，很高兴您意识到问题出在其他地方](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/objectstate.html#objectstate-saveorupdate)

> *   如果存在与当前会话关联的具有相同标识符的持久实例，则将给定对象的状态复制到持久实例上
> *   如果当前没有与会话关联的持久化实例，尝试从数据库中加载它，或者创建一个新的持久化实例
> *   返回持久实例
> *   给定的实例没有与会话关联，它保持分离

我从未尝试过，但如果你这样做会发生什么：-

```
using (var tx = session.BeginTransaction())
{
    var dbObj = session.Merge(parentObj);
    //do something with dbObj.Childcollection
} 
```

看起来 a`select`被调用了，正是这个对象用于将您的分离对象合并到其中。因此，您需要在之后使用此对象进行延迟加载等（代理）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-16T18:36:58.303

我只是遇到了同样的问题。我将合并更改为 SaveorUpdate。

因此，您的代码将是：

```
using (var session = GetSesion())
using (var tx = session.BeginTransaction())
{
    parentOjb = session.SaveorUpdate(parentObj);
    NHibernateUtil.Initialize(parentObj.ChildCollection); 
} 
```

# javascript - 隐藏重复项，将相似项目分组列表 sencha touch 2

> ID：15057299
> 
> 赞同：0
> 
> 时间：2013-02-24T22:15:27.527
> 
> 标签：javascript, cordova, sencha-touch, sencha-touch-2

我正在制作一个显示列表的 phonegap + sencha 应用程序（来自我无法控制的 xml 文件）。现在我面临两个问题。

*   重复条目 - 一些条目共享所有字段。例如 {Group}、{Analysis}、{Age}、{Ref} - 我如何自动隐藏这些条目中的一个以外的所有条目？

*   类似条目 - 一些条目共享一些字段。例如 {Group}、{Analysis} 但在其他方面有所不同，例如 {Age}、{Ref}。现在我正在使用详细视图来显示另一个字段（根据 senchalearn.github.com/Presidents/）。是否有可能使共享两个指定字段的条目全部隐藏，并且列表中仅显示一个条目（仅显示两个公共字段），该列表具有显示所有条目的详细视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:45:34.627

我确定您需要预先计算 xml 列表以确保没有重复项。但这样做不应该超过几行。只需将它们全部扔进商店，对它们进行分类并遍历所有物品以杀死重复项。（类似于：如果以前的记录=当前记录从存储中删除当前记录）

类似的条目。您可以遍历商店并将所有数据写入您需要的 json 字符串。作为数据源，您提供 json 字符串。

# python - 如何在 python 中确定合理的线程数？

> ID：15057301
> 
> 赞同：3
> 
> 时间：2013-02-24T22:15:43.187
> 
> 标签：python, multithreading, python-multithreading

我正在编写一个简单的脚本，它应该进行大量检查。每个检查都是独立的，所以我决定把它放到多个线程中。但是我不知道设置脚本的机器有多快。我已经找到了非常好的工具来检查目标机器的基本参数，但我想知道是否有任何方法可以确定最大合理线程数量是多少（我的意思是新线程开始减慢进程而不是加快进程的那一刻)?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T22:21:04.523

You can find out the number of cores your target machine has with

```
import multiprocessing

multiprocessing.cpu_count() 
```

If you choose `multiprocessing` to manage your tasks then you can set the `Pool` size, or number of worker threads dependent on system load and `.cpu_count()`.

As to what is a good number for you to choose for your program, you will have to decide for yourself :-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T22:55:21.033

在 python 中为了提高速度而使用线程并不是一个非常好的主意，尤其是对于 cpu 绑定操作。GIL 看到了来自多个 CPU 的任何潜在性能改进（其中 # 是线程速度增加的理论限制 - 尽管实际上是 YMMV）。

对于真正独立的“检查”，您最好查看多处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T22:20:41.420

You might have your answer in your last sentence. You could measure the execution time, as it changes with thread additions. And adaptively add or remove (and requeue the removed thread's job) threads to preserve an execution time you like. If you want to get sophisticated check out [control theory](http://en.wikipedia.org/wiki/Control_theory).

# ios - UIScrollView 内存分配上的动画内容

> ID：15057306
> 
> 赞同：0
> 
> 时间：2013-02-24T22:16:13.807
> 
> 标签：ios, animation, uiscrollview, uiviewanimation

我在滚动视图中的内容上制作了动画，但内存有问题。所以我有 UITabBarController，在 3 个选项卡中我有一个自定义 UIView，它有一个 UIScrollView。我用它来动画水平内容滚动：

```
- (void)beginAnimation
{
if (isAnimating) {
    return;
}

[scrollView setContentOffset:[self startOffset]];

isAnimating = YES;

NSTimeInterval animationDuration = (scrollView.contentSize.width / self.tickerSpeed);

[UIView animateWithDuration:animationDuration
                      delay:0
                    options:UIViewAnimationOptionCurveLinear
                 animations:^{
                     CGPoint finalPoint = CGPointZero;

                     if (self.scrollingDirection == BBScrollingDirectionFromRightToLeft) {
                         finalPoint = CGPointMake(scrollView.contentSize.width, 0);
                     } else if (self.scrollingDirection == BBScrollingDirectionFromLeftToRight) {
                         finalPoint = CGPointMake(-scrollView.contentSize.width + self.frame.size.width, 0);
                     }

                     scrollView.contentOffset = finalPoint;
                 } completion:^(BOOL finished) {
                         isAnimating = NO;

                         [self beginAnimation];
                 }];
} 
```

当我启动应用程序并位于第一个选项卡时，一切正常，但是当我切换到另一个选项卡时，仪器分配中的总字节数开始快速增长，实时字节数几乎相同。有人可以解释一下发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:22:42.557

我认为你正在创建一个无限循环

```
completion:^(BOOL finished) {
                         isAnimating = NO;

                         [self beginAnimation];
                 }]; 
```

为什么要通过完成块递归调用开始动画？这将是我对您的内存问题的猜测，块像其他 obj-c 对象一样保存到内存中，并且它们占用空间。

编辑：

我建议您像这样修改对 smt 的动画调用，并再次检查您是否有内存问题：

```
[UIView animateWithDuration:animationDuration
                      delay:0
                    //I added autoreverse option also bc it seems like a good fit for your purpose
                    options:UIViewAnimationOptionCurveLinear | UIViewAnimationOptionRepeat | UIViewAnimationOptionAutoreverse
                 animations:^{
                     [UIView setAnimationRepeatCount:10.0]; //This a class method, set repeat count to a high value, use predefined constants (ie HUGE_VALF) if it works for you 
                     ...
                 }
]; 
```

# javascript - IE9中的文本输入焦点异常

> ID：15057307
> 
> 赞同：3
> 
> 时间：2013-02-24T22:16:21.833
> 
> 标签：javascript, jquery, html, internet-explorer-9

我正在尝试这个相当简单的代码。`mouseup`只要有第一个文本输入，它就应该将焦点转移到相邻的文本输入：

```
<!DOCTYPE html>
<html>  
  <head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">   
    </script>
    <script>
      $(document).ready(function() {
        $(".foo").mouseup(function() {
          $(".boo").focus();
        });
      });   
    </script>
  </head> 
  <body>
    <input type='text' class='foo' />
    <input type='text' class='boo' />
  </body>    
</html> 
```

在所有浏览器中，除了`IE9`（我不敢在里面`IE8`或下面测试它！），它适用于左键和右键（对于右键`mouseup`，上下文菜单仍然会在第一个输入时弹出，即使焦点转移到第二个）。但是，在 中`IE9`，焦点仍停留在第一个文本输入上（上下文菜单也在那里弹出）。

有没有办法解决它，使焦点转移到第二个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T22:39:00.760

ie 中的 .select() 应该可以工作：

[http://jsfiddle.net/n4hGC/5/](http://jsfiddle.net/n4hGC/5/)

```
$(document).ready(function(){
  $('.foo').mouseup(function() {
    $('.boo').focus();
  });
  $('.foo').contextmenu(function() {
      $('.boo').select();
      return false;
  });
}); 
```

还通过返回 false 来处理上下文菜单。希望有所帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T22:35:27.697

您可以尝试其中一种选择吗？他们过去在 IE8 中为我工作过，他们可能对你有用。

备选方案 1：先模糊再聚焦

```
$(".foo").mouseup(function(){
    $(".boo").blur();  
    $(".boo").focus();
}); 
```

备选方案 2：使用 setTimeout

```
$(".foo").mouseup(function(){ 
    setTimeout(function () {
        $(".boo").focus();
    }, 100);  
}); 
```

# java - Java项目的Eclipse插件报告项目中的所有错误？错误报告生成器？

> ID：15057309
> 
> 赞同：0
> 
> 时间：2013-02-24T22:16:32.970
> 
> 标签：java, eclipse, report

我已经将一系列 Java 源文件导入到一个标准的 Eclipse Java 项目中。当然，它报告缺少 JAR 文件的依赖项？是否有 Eclipse 插件或功能将项目的所有这些构建错误汇总到一份报告中？我只想把它总结到一个地方。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T22:20:13.347

`Window -> Show View -> Problems`

在那里，您可以获得许多自定义视图的选项。

# algorithm - 插入排序的运行时间复杂度的最佳描述是什么

> ID：15057310
> 
> 赞同：0
> 
> 时间：2013-02-24T22:16:34.773
> 
> 标签：algorithm, complexity-theory, big-o, insertion

我已经理解它是二次的，但我正在参加离散数学的多项选择练习测试，只有四个选项是：

a) 对数

b) 线性的

c) 线性的

d)多项式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:28:40.130

a) 对数 = O(log n)

b) 线性 = O(n)

c) 线性 = O(n log n)

d) 多项式 = O(n ^k )

所以 O(n ² ) 是多项式的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:35:36.083

将新值插入到排序值的列表或树中是 O(log n)。

使用直接排序列表最容易看到。假设您要插入 x。找到 [n/2] 处的值。如果这大于 x，则正确的位置位于左半边。如果 [n/2] 小于 x，则正确的位置位于右侧。重复，每次检查中间值。每一步都会将要检查的间隔大小减半，直到找到正确的值，从而为插入提供对数时间。

插入树是类似的；你必须遍历树到正确的节点位置，这需要遍历树的平均深度，它与log n成正比

# javascript - 从来自数据库的图像链接的 javascript 数组中以 Javascript 显示 3 个随机图像

> ID：15057313
> 
> 赞同：1
> 
> 时间：2013-02-24T22:16:51.723
> 
> 标签：javascript, arrays, image, random

我正在努力从我的 Javascript 数组中取出 3 张随机图像（不重复）并将它们打印在单独的 Div 中的屏幕上。

我的 Javascript 数组正在由一个数据库填充，该数据库包含服务器上图像的链接/位置。

目前我的页面如下所示：

```
<html>
   <head>
  </head>
   <body>
    <div></div>
    <script>
      var items = [
      {name:'Coch',image:'upload/coch.png'},{name:'Glas',image:'upload/glas.png'},     {name:'Melyn',image:'upload/melyn.png'},{name:'Ci',image:'upload/dog.jpg'},    {name:'Cath',image:'upload/cath.jpg'},{name:'Gwyrdd',image:'upload/gwyrdd.png'},{name:'Un',image:'upload/un.jpg'},{name:'Dau',image:'upload/dau.jpg'},{name:'Tri',image:'upload/tri.jpg'},{name:'Bochdew',image:'upload/bochdew.jpg'},{name:'Piws',image:'upload/piws.png'}      ];
      for (var i = 0; i < items.length; i += 1) {
        document.getElementsByTagName('div')[0].innerHTML += items[i].name + " / " +       items[i].image + "<br />\n";
      } 
    </script>
  </body>
</html> 
```

此代码只是从数据库中获取图像链接并将它们插入到 javascipt 数组中。（并此刻在屏幕上打印链接）

任何人都可以帮助我如何让它工作吗？从该数组中获取 3 个随机图像链接（无重复），并在屏幕上以 3 个不同的 div 显示 3 个图像。

我对 javascipt 一点也不擅长，任何代码示例都会很棒。

提前感谢您的任何回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:23:00.250

洗牌你的阵列，然后取前三个项目。在这里你可以找到一个很好的随机数组函数： [How to randomize (shuffle) a JavaScript array?](https://stackoverflow.com/questions/2450954/how-to-randomize-a-javascript-array)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T22:23:22.400

假设图像源的链接相对于图像所在的页面是正确的，这应该可以解决问题：

```
var list = document.getElementsByTagName('div')[0];
for(i = 0; i < 3; i++) {
  // Choose a random item and remove it from the array
  var item = items.splice(Math.floor(Math.random() * items.length), 1)[0];

  // Create the image element and set its src attribute
  var image = document.createElement('img');
  image.src = item.image;

  // Add it to your container element
  list.appendChild(image);
} 
```

请注意，这将修改“项目”数组，因此如果您稍后需要它，您需要先复制该数组或调整逻辑。

JSFiddle：http: [//jsfiddle.net/ynhCN/1/](http://jsfiddle.net/ynhCN/1/)

# actionscript-3 - “PKWARE”压缩格式？

> ID：15057314
> 
> 赞同：2
> 
> 时间：2013-02-24T22:16:56.590
> 
> 标签：actionscript-3, compression, zip

在[此页面上](http://wiki.multimedia.cx/index.php?title=BLB#Decompression_of_PKWARE-compressed_Files)，它提到了“PKWARE 压缩文件”。我知道 PKWARE 开发了 ZIP 格式（以及其他格式），但除了页面上提到的 DLL 之外，我无法找到任何关于专门命名为“PKWARE”的压缩格式的文档。它只是 ZIP，是不再使用的旧压缩，还是其他什么？

我正在使用 ActionScript 3.0，因此格式规范或 AS3 库就足够了。有谁知道我在哪里可以得到这两者之一，或者对格式有什么帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T04:51:13.970

首先，它说他们为 PKWARE.DLL 提供了他们的插件。您是否尝试过根据链接到的文档使用 DLL？

如果你能提供一个例子，比如压缩数据的前 100 个字节，那么我大概可以知道它是什么。它可能是 deflate，也可能是奇怪的 PKWARE 数据压缩库，其格式与 deflate 不兼容。

*更新：*

提供的前 100 个字节是 DCL 压缩数据。您可以使用[zlib发行版的](http://zlib.net/)[contrib/blast 目录](https://github.com/madler/zlib/tree/master/contrib/blast)中的代码来解压它。或者，当然，PKWare DCL DLL。它不是放气。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T04:56:35.897

[PKZIP](http://en.wikipedia.org/wiki/PKZIP)是非常主流的。只是，由于诉讼和专利问题，它有一个叉子作为拉链。

您可以在他们的[官方网站上](http://www.pkware.com/software/pkzip)关注它。

至于格式规范，[这里](https://users.cs.jmu.edu/buchhofp/forensics/formats/pkzip-printable.html)有一个很好的描述 PKZIP 结构的规范。

希望您可以在动作脚本中逐步提高结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T06:45:48.773

PKZIP 格式的规范文档在这里：[http](http://www.pkware.com/documents/casestudies/APPNOTE.TXT) ://www.pkware.com/documents/casestudies/APPNOTE.TXT 。

# php - 使用PHP从MySQL数据库表中向具有特定字段的收件人发送电子邮件？

> ID：15057318
> 
> 赞同：-1
> 
> 时间：2013-02-24T22:17:18.750
> 
> 标签：php, mysql, email, send

我正在建立一个网络平台，访问者可以在其中向专业人士提问，这些专业人士分为几个不同的类别。

我有以下表格：-“问题”（包含问题、访问者的电子邮件地址和类别）-“专业人士”（包含信息、专业人士的电子邮件和类别）-“回复”（包含回复、问题的ID 和专业人员的 ID）

好的，这就是我想要做的： - 当“问题”表更新时，我希望平台向所选类别的专业人士发送电子邮件。

和

*   当专业人士回答问题时，我想向访客发送电子邮件。

当数据库更新时，我已经收到了一封管理员电子邮件，所以我知道这是可以做到的。

顺便说一句，我是新手，所以请详细说明！

谢谢你的帮助 ！

伊恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:29:29.090

如果专业人员表中有很多专业人员，建议使用一种 PHP 邮件队列系统。否则，脚本可能会运行很长时间，并且永远不会在执行时间范围内完成。最好在后台执行（例如每隔 10 分钟左右执行一次 cron 作业）。

让我们暂时假设只有两个专业人士。

当您更新数据库以插入新问题时，请从该类别中提取专业人士列表。您需要将问题的类别放入变量中（如 $category）

```
$results = mysql_query("SELECT email FROM professionals WHERE category=$category"); 
```

现在您有一个结果集，其中包含与该类别相关的所有专业人员的电子邮件。将它们全部整齐地放入一个数组中。

```
 $emails = array();
 while($row = mysql_fetch_assoc($results)){
                 $emails[] = $row['email'];
     } 
```

我们有一系列专业人士的电子邮件，现在我们需要给他们发送电子邮件：

```
foreach($emails as $email){
        mail($email,"A new question in your category!","Text goes here");
      } 
```

更多信息： http: [//php.net/mail](http://php.net/mail)

# dotnetopenauth - 如何检查 DotNetOpenAuth 中的范围

> ID：15057319
> 
> 赞同：1
> 
> 时间：2013-02-24T22:17:18.907
> 
> 标签：dotnetopenauth

在我的 DotNetOpenAouth 客户端应用程序中，我通过发送

`AuthorizationEP + "?client_id=" + _appId + "&redirect_uri=" + HttpUtility.UrlEncode(returnUrl.ToString()) + "&scope=http://localhost:4314/api/domains" + "&response_type=code"`.

然后，我正确地收到了`http://localhost:4314/api/domains`范围的身份验证令牌。

`http://localhost:4314/api/domains.json`但是，当我通过或URL调用我的 Restful api 时`http://localhost:4314/api/domains.xml`，指定的范围不适合并且我的资源服务器在`resourceServer.GetPrincipal`.

如何在不考虑 url 中的“.json”或“.xml”的情况下检查我的范围？

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:19:17.047

我解决了。

我已经实施

```
 internal class ScopeSatisfiedCheck : IScopeSatisfiedCheck
     {
         public bool IsScopeSatisfied(HashSet<string> requiredScope, HashSet<string> grantedScope)
         {
             // Here compare requiredScope with grantedScope by own rules;
         }
     }

....

resourceServer.ScopeSatisfiedCheck = new ScopeSatisfiedCheck(); 
```

希望有用

卡梅罗

# ruby - 正则表达式 ruby 块参数和块内的所有实例

> ID：15057320
> 
> 赞同：-4
> 
> 时间：2013-02-24T22:17:30.193
> 
> 标签：ruby, regex, sublimetext2, textmate

我一直在尝试开发一个正则表达式来匹配一个块的参数，然后是该参数的所有实例。

使用这个例子：

```
File.open(inFile).each do |line|
  line.chomp!
    if line.empty? then
      next
    elsif line =~ /^>/
      line.slice!(/>/)
      names.push(line)
    elsif line !~ /^>/
      seqs.push(line)
    end             
end 
```

我想匹配管道之间的单词`line`，然后是`line`.

匹配参数很简单：

```
(?<=\|)(\w*?)(?=\|) 
```

但我真的不确定如何将此匹配用作文档其余部分的模式。

欢迎任何关于如何进行的想法。

（编辑2：我现在不关心将正则表达式的范围限制在块中。我想匹配整个文档中的所有实例。请考虑重新检查这个更简单的问题。）

（编辑：我正在尝试将此正则表达式合并到`tmLanguage`textmate/sublime 的文件中。这样，参数和所有实例都是相同的颜色。我确信有一种方法可以构建一个插件来做到这一点，但我没有还没有尝试过，没有查看 sublime 插件是如何`bracketHighlighter`工作的。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:26:25.537

不要那样做。严重地。它不会可靠地工作，与手动进行更改相比，您将花费更多时间校对和修复结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:35:07.403

如果您查看 Ruby 语言包内部并查看已分配匹配的名称，您会发现第一部分已经完成：

```
name: variable.other.block.ruby
match: [_a-zA-Z][_a-zA-Z0-9]* 
```

您可以使用该名称来引用块本地变量，可能是`source.ruby.variable.other.block.ruby`. 我不确定您将如何引用多参数列表的不同匹配项。

我将继续对这个问题投反对票，因为非常不清楚您是在尝试解析*语言本身*，而不是来自文件的输入。

# wordpress - Query_post() WordPress

> ID：15057324
> 
> 赞同：0
> 
> 时间：2013-02-24T22:17:53.713
> 
> 标签：wordpress

我正在尝试在内容区域中获取其所有子页面的页面列表..但是当我使用下面的代码时，它只显示 40 个子页面中的 10 个......

请让我知道如何解决它？

```
<ul class="subpages-pro" style="margin-top:20px;">
<span style="display:none;"><?php the_ID(); ?></span>
<?php $parent = $post->ID; ?>
<?php
query_posts('order=ASC&post_type=page&post_parent='.$parent);
 while (have_posts()) : the_post();
?>

<?php $image_thumb = get_post_meta($post->ID, 'image-thumb', true); ?>
<li><?php the_post_thumbnail(); ?>
<h4><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h4>
<?php the_excerpt(); ?>
</li>

<?php endwhile; ?>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:45:10.030

如果将参数 numberposts = -1 传递给 query_posts 函数，则将显示所有页面。

因此，将您对 query_posts 的调用更改为：

```
query_posts ('order=ASC&post_type=page&numberposts=-1&post_parent='.$parent) 
```

# vb.net - 如何将表单放置在任务栏上，而不是在其上方？

> ID：15057326
> 
> 赞同：1
> 
> 时间：2013-02-24T22:17:59.840
> 
> 标签：vb.net, winforms

我正在尝试创建一个将在左下角的 Windows 任务栏上启动的应用程序。我希望表单与任务栏重叠。我所有的方法都以使表单加载到任务栏上方而告终。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:24:58.580

您可以设置表单的属性[TopMost](http://msdn.microsoft.com/en-us/library/system.windows.window.topmost.aspx)来`true`实现

# java - 如何使用 HttpURLConnection 获取重定向的 URL 和内容

> ID：15057329
> 
> 赞同：12
> 
> 时间：2013-02-24T22:18:06.557
> 
> 标签：java, httpurlconnection

有时我的 URL 会重定向到新页面，所以我想获取新页面的 URL。

这是我的代码：

```
URL url = new URL("http://stackoverflow.com/questions/88326/");
HttpURLConnection conn = (HttpURLConnection) url.openConnection();
conn.setInstanceFollowRedirects(true);

System.out.println(conn.getURL().toString()); 
```

输出是：

> stackoverflow.com/questions/88326/does-elmah-handle-caught-exceptions-as-well

它适用于 Stack Overflow 网站，但不适用于 sears.com 网站。

如果我们输入网址一击：

```
http://www.sears.com/search=iphone 
```

输出仍然是：

> [http://www.sears.com/search=iphone](http://www.sears.com/search=iphone)

但实际上，页面将重定向到：

```
http://www.sears.com/tvs-electronics-phones-all-cell-phones/s-1231477012?keyword=iphone&autoRedirect=true&viewItems=25&redirectType=CAT_REC_PRED 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-24T22:20:29.330

Simply call `getUrl()` on `URLConnection` instance after calling `getInputStream()`:

```
URLConnection con = new URL(url).openConnection();
System.out.println("Orignal URL: " + con.getURL());
con.connect();
System.out.println("Connected URL: " + con.getURL());
InputStream is = con.getInputStream();
System.out.println("Redirected URL: " + con.getURL());
is.close(); 
```

If you need to know whether the redirection happened before actually getting it's contents, here is the sample code:

```
HttpURLConnection con = (HttpURLConnection) (new URL(url).openConnection());
con.setInstanceFollowRedirects(false);
con.connect();
int responseCode = con.getResponseCode();
System.out.println(responseCode);
String location = con.getHeaderField("Location");
System.out.println(location); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-22T19:20:17.667

实际上我们可以使用 HttpClient，我们可以设置 HttpClient.followRedirect(true) HttpClinent 将处理重定向的事情。

# facebook - 如何使用 facebook graph 获取应用程序上传的所有图像？

> ID：15057333
> 
> 赞同：1
> 
> 时间：2013-02-24T22:18:50.077
> 
> 标签：facebook, image, facebook-graph-api

我正在尝试制作一个 facebook 摄影比赛应用程序。用户可以通过该应用上传一张图片，然后它会出现在他们的墙上并进入为我的应用自动创建的相册中。但是我找不到任何方法使用图形 api 来获取所有用户的上传图像数组。这可能吗？我想...

```
 $facebook->api("/$app_id/photos?access_token=$app_long_life_access_token"); 
```

会工作，但它返回一个空数组。

照片上传使用...

```
 $facebook->api($this->app_id . '/photos', 'post', $args); 
```

我可以使用它的 id 和应用程序的令牌访问单个图像，但这需要遍历每个图像 id 以获取详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T23:29:30.953

为了访问用户相册（即使它是由您的应用程序创建的），您需要一个有效的用户访问令牌。毕竟是*他们的专辑。*如果用户更改密码甚至卸载您的应用程序，您将无法再访问他们的内容。

要跟踪所有这些照片，您必须监控每次上传并将其存储（例如在您的数据库中）。

Facebook 通常不允许您以这种方式收集大量数据。如果您不以其他方式存储它，您将不得不查询每个单独的用户或照片以获取此信息。

# python - Py2exe (Python Pygame) - 没有更简单的方法吗？

> ID：15057335
> 
> 赞同：1
> 
> 时间：2013-02-24T22:19:10.207
> 
> 标签：python, pygame, exe, py2exe

我刚刚检查了 wiki 并意识到您需要输入大量代码才能将包含 pygame 代码的 python 文件更改为 exe。没有更简单的方法吗？它不应该只是一个 exe 文件，您只需打开并输入您想要更改的内容以及将 exe 保存到哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:24:23.477

我不确定我是否完全理解您的问题，但我建议使用[PyInstaller](http://www.pyinstaller.org/)。您所要做的就是进入 pyinstaller 目录，然后运行：

```
python pyinstaller.py /link/to/your/program 
```

然后应该在 pyinstaller 目录中创建一个以您的 .py 文件命名的目录。在该文件中，您将有一个 build 文件夹和一个 dist 文件夹。dist 是一个感兴趣的地方，其中包含您的 .exe。

# javascript - 使用 require.js 包管理大型应用程序

> ID：15057339
> 
> 赞同：4
> 
> 时间：2013-02-24T22:19:34.320
> 
> 标签：javascript, architecture, package, requirejs

我们想创建一个应用程序布局，该布局由一个需要包的主模块组成。每个包（包括主模块）对第三方库和其他本地包都有自己的依赖关系。因此，在每个包的 main.js 中，我们都有一个 require.config 部分，如下所示：

```
require.config({
  packages: ["package2"],
  context: 'package1',
  shim: {
    'underscore': {
      exports: '_'
    }
  },

  paths: {
    underscore: '../lib/underscore-1.4.3'  
  }
}); 
```

如您所见，配置定义了路径和包。顶层 main.js 如下所示：

```
require.config({
  packages: ["package1"]
}); 
```

该项目具有这样的目录结构......

```
├── package1
│   ├── package1.jade
│   ├── package1.js
│   └── main.js
├── lib
│   ├── backbone-0.9.10.js
│   └── underscore-1.4.3.js
├── package2
│   ├── package2.js
│   ├── main.js
└── main.js 
```

目标是我们可以拥有一组“包”，包和页面不仅可以依赖于模块。在完美的工作中，项目的依赖关系图看起来像这样：

```
 +------------+           +-------------+
   |  package1  +--+     +--+  package2   +--+
   +------------+  |     |  +-------------+  |
                   |     |                   |
                   v     v                   v
                +--------------+       +--------------+
                |  package3    |       |  package4    |
                +----------+---+       +--------------+
                           |
                           |             +-------------+
                           +------------>|   common    |
                                         +-------------+ 
```

在每个包内部，我们也会有一个项目结构。为我们的 JS 创建模块化架构。require.js 和它的包可以实现这种风格，还是我们对包的考虑是错误的？如果是这样，是否有一个 js 依赖管理库可以帮助我们完成这个架构？

我们在 github 上拼凑了一个示例结构，[https://github.com/austinbv/require_js_package_sample](https://github.com/austinbv/require_js_package_sample)

最后，我们在要求邮件列表*[https://groups.google.com/forum/?fromgroups=#!topic/requirejs/bNj4mXNWq-8](https://groups.google.com/forum/?fromgroups=#!topic/requirejs/bNj4mXNWq-8)*上提出了同样的问题，但没有看到太多的兴趣，所以我们来到了这里。如果列表更新，我一定会更新我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-03T06:01:09.857

`CommonJS Package`除了支持已经以格式构建的代码外，我不知道 RequireJS 中的包是什么。您是否可以打开模块以提供相同的基于组件的结构？

我使用模块来提供这样的结构。每个模块定义`AMD.js`如下：

```
define(
  [
    // Paths and shims defined in configuration of RequireJS application.
    'utils', 
    'jQuery',
    'underscore',
    // Component's view and behaviour if any.
    'text!./main.html',
    'text!./main.js',
    // Other dependencies.
    'Components/Commons/Component/AMD.js',  // Component Class.
    'Components/Views/ProductsTile/AMD.js', // Required component.
    ...
  ],
  function (...) {
    ...
    return new Component(args);
  }
); 
```

简化后的项目结构如下：

```
简化项目
├── 资产
│ ├── css
│ │ ├── main.css
│ ... ...
│ └── img
│ └── noImage.jpg
├── 组件
│ ├── Application.js
│ ├── 公地
| | ...
│ │ └── 实用工具
│ │ └── AMD.js
│ ├── 库
│ │ ├── jQuery
│ │ │ └── jquery.min.js
│ │ ├── RequireJS
│ │ │ ├── 插件
│ │ │ │ ├── json.js
│ │ │ │ └── text.js
│ │ ... └── require.js
│ ├── 型号
│ │ └── 产品
│ │ ├── AMD.js
│ │ └── Model.js
│ ├── 控制器
| | ...
│ └── 浏览量
│ ├── 主要
│ │ ├── AMD.js
│ │ ├── main.css
│ │ ├── main.html
│ │ └── main.js
│ ...
│ └── ProductsTile
│ ├── AMD.js
│ ├── main.css
│ ├── main.html
│ └── main.js
├── favicon.ico
└── index.html

```

[你可以在这里](https://github.com/ipetrovilya/discussions_with_ipetrovilya/tree/master/RequireJsModularProject)找到整个未完成的项目。

自您发布问题以来已经三个月了，我很想知道您是如何解决的。请告诉我。

# python - Tkinter 和多线程

> ID：15057341
> 
> 赞同：1
> 
> 时间：2013-02-24T22:19:56.257
> 
> 标签：python, multithreading, tkinter

我正在使用以下代码来检查 Tkinter 是否与多线程一起工作。但是下面的代码不起作用（Gui 一运行就没有响应）。谁能解释为什么它不起作用？

```
from threading import Thread 
import tkinter as tk

window = tk.Tk()
label = tk.Label(window, text='Hello')
label.pack()

def func():
    i = 1
    while True:
        label['text'] = str(i)
        i += 1

Thread(target=func).start()
Thread(target=window.mainloop).start() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:22:28.373

It doesn't work because Tkinter doesn't support multithreading. Everything that interacts with a Tkinter widget needs to run in the main thread. If you want to use multithreading, put the GUI in the main thread and your other code in a worker thread, and communicate between them with a thread safe queue.

# windows-phone-8 - Resubmit web requests on resuming from dormancy

> ID：15057345
> 
> 赞同：1
> 
> 时间：2013-02-24T22:20:25.773
> 
> 标签：windows-phone-8, windows-phone, webrequest, restsharp

I am using RestSharp (a REST client for .NET) in my Windows Phone 8 app, but I think my question also applies using HttpWebRequest or any other ways of running web requests.

I am trying to find a way to automatically resubmit the requests when app is resumed from dormant state. This is only from dormant and not from the tombstone state.

The idea I had was to create a wrapper object which subscribes to the Deactivated event before starting the request and rerunning the request in case it received the event. I assume that since the deactivated event was received, the request failed.

```
public class RestClientEx
{
    bool wasDeactivated = false;

    public async Task<T> ExecuteTaskAsync<T>(RestClient client, RestRequest request) where T : new()
    {
        var phoneApplicationService = App.Current.ApplicationLifetimeObjects.OfType<PhoneApplicationService>().First();
        phoneApplicationService.Deactivated += phoneApplicationService_Deactivated;
        var t = await client.ExecuteTaskAsync<T>(request);
        if (this.wasDeactivated)
        {
            // resubmit request
            this.wasDeactivated = false;
            t = await this.ExecuteTaskAsync<T>(client, request);
        }
        return t;
    }

    void phoneApplicationService_Deactivated(object sender, DeactivatedEventArgs e)
    {
        (sender as PhoneApplicationService).Deactivated -= phoneApplicationService_Deactivated;
        this.wasDeactivated = true;
    }
} 
```

My question is, is there another way to achieve this?

Is it OK what I am doing?

# ruby-on-rails - 模型 has_many OtherModel 但已本地化，因此基于语言环境的同一模型的其他模型不同：如何？

> ID：15057350
> 
> 赞同：0
> 
> 时间：2013-02-24T22:20:42.403
> 
> 标签：ruby-on-rails, internationalization, ruby-on-rails-3.2, globalize3

我很难做到这一点，这不是直接的实施问题，但我不明白哪种方法是正确的，我有两个选择，但首先，这些是我的模型：

```
class Boat < ActiveRecord::Base
  validates :name, presence: true, uniqueness: { case_sensitive: false }

  has_many :tech_specs, order: 'position'

  def visible?
    self.visible
  end
end

class TechSpec < ActiveRecord::Base
  validates :boat_id, presence: true
  validates :tech_spec_name_id, presence: true, uniqueness: { scope: :boat_id }

  belongs_to :boat
  belongs_to :tech_spec_name

  before_destroy :destroy_name_if_required

  acts_as_list scope: :boat

  def as_json(options = {})
    super(options.except!(:tech_spec_name_id).merge!(methods: [self.name]))
  end

  def name
    self.tech_spec_name.try(:name) || ''
  end

  def name=(value)
    self.tech_spec_name = TechSpecName.find_or_create_by_name(value)
  end

  def destroy_name_if_required
    self.tech_spec_name.destroy if self.tech_spec_name.tech_specs.size <= 1
  end
end

class TechSpecName < ActiveRecord::Base
  validates :name, presence: true, uniqueness: { case_sensitive: false }

  has_many :tech_specs

  def self.with_name_like(str)
    where('lower(name) LIKE lower(?)', "%#{ str }%")
  end
end 
```

问题是我想要一个船的页面，在使用区域设置时显示一些技术规格，在不同区域设置时显示其他技术规格。

**想法#1**

我的基本想法是`TechSpec`在 tech_spec.value 和`TechSpecName`字段 tech_spec_name.name上添加 globalize3

**想法#2**

另一个想法是删除 TechSpecName，而是使用将完全“替换”TechSpecName 的字段 (tech_spec.name)。请注意，在这种情况下，我仍然需要为自动完成获取名称，但我将在 TechSpec 中过滤它们，而不是从 TechSpecName 中获取所有名称。该字段显然将再次使用 globalize3。

我不知道这两种方法的缺点，所以我需要一个建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T23:19:06.733

似乎想法 #1 没问题，它可以正常工作并减少 Db 中重复文本的数量。

`I18n.with_locale`也很有帮助，也`Globalize.with_locale`很有帮助

# php - 使用子字符串将单词添加到字符串

> ID：15057351
> 
> 赞同：1
> 
> 时间：2013-02-24T22:20:44.383
> 
> 标签：php, position, substring

不确定这个标题是否正确，但这是我的问题：我有一个包含图像 url 的表格，如下所示：

```
img/folder/imagename.jpg 
```

现在我已经为每个文件夹中的每个图像创建了一个缩略图，所以如果我想显示它们，我会在我的表格中循环并返回所有 url，但我需要在“文件夹 /”之后和之前添加单词“thumbs” “imagename.jpg”......现在因为显然“文件夹”和“imagename”名称的长度不同，所以我无法计算......我唯一能想到的就是查找最后一个“/”字符并在那里插入并在其后添加“imagename.jpg”，因此最终结果如下所示：

```
img/folder/thumbs/imagename.jpg 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T22:22:51.643

只需将路径替换为“更深”的路径：

```
$path = str_replace('img/folder/', 'img/folder/thumbs/', $path); 
```

还有很多其他方法可以做到这一点，但恕我直言，这个方法非常清楚它的作用。*从理论上讲*，它不会普遍适用（如果您的路径`img/folder/`由于某种原因包含多次出现），但我们不要去那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:56:07.877

你也可以

```
$pathparts =  explode("/",$path); 
```

然后使用 $pathparts 数组再次构造您的路径。如果您希望对操纵路径进行更多控制，则可以使用它，但在重负载时它不是很有效。

```
echo $pathparts[0]."/".$pathparts[1]."/thumbs/".$pathparts[2]; 
```

//addition 为什么不更新你的数据库和脚本只保存imagename.jpg 然后在调用脚本的开头定义

```
define("IMGPATH", "img/folder/");
define("THUMBPATH", "img/folder/thumbs/"); 
```

然后调用它

```
 <?= IMGPATH."imagename.jpg" ?>
<?= THUMBPATH."imagename.jpg" ?> 
```

# ruby-on-rails - 查看适用于当前范围的变量以及自身引用的对象的快速方法，RAILS

> ID：15057354
> 
> 赞同：9
> 
> 时间：2013-02-24T22:20:54.760
> 
> 标签：ruby-on-rails

有没有一种快速的方法来找出哪些变量适用于当前范围，以及 Ruby on Rails 中哪个对象“self”指的是？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-25T01:49:49.097

我认为这[`pry`](http://pryrepl.org/)是一个很好的解决方案，尽管`debugger`正如@jvnill 建议的那样，也可以。

```
gem install pry # or add to bundler 
```

在您的代码中，您需要在有兴趣检查范围的任何地方添加以下内容：

```
require 'pry'
binding.pry # this will open a console view with the binding as the current scope 
```

里面有一些东西可以满足`pry`你的要求：

```
pry> ls 
```

`ls`将显示可以调用的变量和方法以及它们源自哪些对象/类。

```
pry> self # will return self in the current context
pry> pry-backtrace # shows the current stack
pry> help # will show the list of commands
pry> cd <some obj> # will change the scope to the target object
pry> exit # move back out to previous console scope 
```

澄清您是否正在寻找完全不同的东西。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-07-03T09:46:17.257

使用 gem “pry”，在 pry 上下文中发出命令 “ls -l” 以获取局部变量列表（以及变量中的值）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T01:30:22.960

我真的很喜欢使用 Better Errors gem，然后我只需在需要的地方“提出@somevar”，这样我就可以使用浏览器控制台并用棍子戳它。:) 上帝，我喜欢那个东西。

# php - php Code Array boolean returned

> ID：15057355
> 
> 赞同：3
> 
> 时间：2013-02-24T22:20:54.303
> 
> 标签：php, arrays, wordpress

So I'm using a checkbox field, and I check it's value by using the code below and print things out accordingly. Anyway, if the field's checkboxes don't have any value, meaning all of them are unchecked, I get an error.

> Warning: in_array() expects parameter 2 to be array, boolean given in /filepath.php on line 647

```
 <?php if (in_array( 'Subbed', get_field('episode_sdversion'))) { ?>
            <a href="<?php echo $episode_permalink; ?>#subbed">Subbed</a>
    <?php } else { 
            echo '--';
    } ?> 
```

So basically, what can I do with this code to make it so when all values are unchecked, that would automatically mean that "Subbed" value is also unchecked, so it should simply just show `echo '--';`. So how can I make this `echo '--';` run when all values are unchecked. So it shouldn't come up with that error?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:31:30.097

我不确定你的`get_field()`函数做了什么，大概它是框架的一部分或其他东西，但我猜它会返回 的值`$_REQUEST['episode_sdversion']`，这将是`FALSE`复选框为空的时候。

在这种情况下，如果我正确理解了您的问题，则首先进行简单检查以查看是否`get_field()`返回了其他内容`FALSE`就足够了：

```
<?php if (get_field('episode_sdversion') && in_array('Subbed', get_field('episode_sdversion'))) { ?>
        <a href="<?php echo $episode_permalink; ?>#subbed">Subbed</a>
<?php } else { 
        echo '--';
} ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T22:36:29.667

您收到错误是因为 get_field 在未选中任何框时返回 false 而不是数组。&& 运算符是短路的，这意味着如果第一部分被评估为假，第二部分将不会被执行。因此，您可以通过将第一行（如果 in_array(...)）替换为

```
if(get_field('episode_sdversion) && in_array('Subbed', get_field('episode_sdversion'))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T22:25:26.533

您要么必须更改该代码，要么更改 get_field 返回值。一种方法是在所有情况下都声明一个 array()，然后添加每个已发布的复选框，以便始终将一个数组作为 in_array 函数的第二个参数传递。

# email - ELMAH not sending email IIS 7.5

> ID：15057357
> 
> 赞同：4
> 
> 时间：2013-02-24T22:20:58.300
> 
> 标签：email, elmah

Tried every possible setting found on stackoverflow and the Internet but no luck. Wish the developer of ELMAH had insight to show messages from ELMAH itself. ELMAH xml logging works fine.

Hope someone here will point out misconfiguration in web.config

```
<configSections>
    <sectionGroup name="elmah">
      <section name="security" requirePermission="false" type="Elmah.SecuritySectionHandler, Elmah" />
      <section name="errorLog" requirePermission="false" type="Elmah.ErrorLogSectionHandler, Elmah" />
      <section name="errorMail" requirePermission="false" type="Elmah.ErrorMailSectionHandler, Elmah" />
     <section name="errorFilter" requirePermission="false" type="Elmah.ErrorFilterSectionHandler, Elmah" /> 
    </sectionGroup>

</configSections>

<modules runAllManagedModulesForAllRequests="true">
  <remove name="ErrorLog" />
  <remove name="ErrorMail" />
  <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" />
  <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" preCondition="managedHandler" />
</modules>

<errorMail from="from email" to="to email" subject="elmah exception" smtpServer="smtp.gmail.com" port="587" userName="xxxx@gmail.com" password="gmailpassword" useSsl="true" async="true"  >
</errorMail> 
```

Have tried user name without @gmail. Have tried locally installed server in errorMail settings but no help. The locally installed server works fine otherwise.

Have also tried this:

```
<system.net> 
    <mailSettings> 
      <smtp deliveryMethod="Network"> 
        <network host="smtp.gmail.com" port="587" userName="xxxxxxxxxxx" password="xxxxx" /> 
      </smtp> 
    </mailSettings> 
</system.net> 
```

used these settings for local smtp server:

```
<errorMail from="from email" to="to email" subject="elmah exception" smtpServer="xxx IP address of smtpserver" port="25" userName="xxxxx" password="xxxx" async="true"  >
</errorMail> 
```

All in all, I have tried all combinations, different settings, different SMTP servers.... no luck. Don't know if there is some message somewhere from ELMAH that I can see to know why ELMAH not connecting to STMP.

As stated above, I went through every post on this site that talks about ELMAH email and followed the instructions... but still couldn't make it work.

Also tried local smtp pickup directory

```
<smtp deliveryMethod="specifiedPickupDirectory">
        <specifiedPickupDirectory pickupDirectoryLocation="C:\inetpub\mailroot\Pickup"  />
      </smtp> 
```

and monitored the directory. Saw no activity in the folder.

Using ELMAH 1.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-06T19:50:23.567

本文解释了如何捕获 ELMAH 的内部错误：http: [//ericmbarnard.blogspot.co.uk/2012/07/debugging-elmah-on-azure.html](http://ericmbarnard.blogspot.co.uk/2012/07/debugging-elmah-on-azure.html)

几分钟前它告诉我为什么我的 SQL 日志记录不起作用，从而救了我 :-) 虽然它提到了 Azure，但您可以在本地调试中使用相同的技术，并且您将能够写入调试跟踪侦听器并避免写入数据库。

# facebook - when inviting facebook friends to an app, is there a way to avoid confirmation dialog box?

> ID：15057359
> 
> 赞同：2
> 
> 时间：2013-02-24T22:21:10.793
> 
> 标签：facebook

I'm currently using the below code to send an invitation to a user's facebook friends. However once the function is run, a confirmation dialog box pops up and I have to confirm that I would like to send the requests to my friends. I'd like to skip this extra step. Is there a way to avoid this confirmation dialog box?

```
FB.ui({method:'apprequests', message:'would like you to try out our app!', to: ids}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T22:22:39.993

# 不！！！！！！！

Facebook 不希望应用程序在未经用户许可的情况下发送邀请。这将是邪恶的垃圾邮件。

# c - Dereferencing an array within a struct being used by ptread_create

> ID：15057362
> 
> 赞同：1
> 
> 时间：2013-02-24T22:21:42.693
> 
> 标签：c, struct, pthreads, dereference

My ThreadData struct:

```
typedef struct threadData {
    pthread_t *ths;
} threadData; 
```

Where *ths is an array of `pthread_t`.

Now, I create a thread that uses as action the following function, which creates a new thread in ths[1]

```
void *rootThread(threadData *d) {
    pthread_t *b = (*d).ths;
    pthread_create(*(b+1),NULL,someRandomFunction,NULL);
} 
```

But that doesn't seem to work.

I'm not sure if I'm dereferencing the pthread_t element well. Please help!

Thanks, :).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:36:49.340

看起来（例如）你没有分配。你必须做这样的事情：

```
void* Thread(void* theCUstom);

pthread_t* threadHandle = malloc(sizeof(pthread_t));
pthread_mutex_t mutex; // mutex lock
pthread_attr_t attr;   // thread attributes
pthread_mutex_init(&mutex, NULL);
pthread_attr_init(&attr);
unsigned long errRes = pthread_create(threadHandle, &attr, Thread, yourCustom); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T22:33:01.800

您无法维护以这种方式使用 pthread_t 的索引。每次重新输入 rootThread() 时，b+1 都会保持不变。您可能需要在 threadData 中有一个单独的索引变量，或者需要一个可以遍历列表的第二个指针。要么，要么不创建临时变量 pthread_t *b。

```
typedef struct threadData {
    pthread_t *ths;
    int thsIdx;
} threadData;

void *rootThread(threadData *d) {
    pthread_create( &d->ths[d->thsIdx++],NULL,someRandomFunction,NULL);
} 
```

或者你的方式：

```
 void *rootThread(threadData *d) {
    pthread_create( d->ths, NULL, someRandomFunction, NULL);
    ++d->ths; // this is nasty because you lose the pointer to the beginning of the array.
} 
```

# javascript - jQuery - if exists, get value of document.domain

> ID：15057363
> 
> 赞同：-4
> 
> 时间：2013-02-24T22:21:49.173
> 
> 标签：javascript, jquery, document, same-origin-policy

How to check if `document.domain` is set on a page, and return it's value?

**Update**

before the barrage of negativity, I was inquiring about how to get the document.domain value when it's been explicitly set.

What I ended up with was

`if(window.location.hostname !== document.domain)`

this will tell you if document.domain has been set explicitly on a page.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:23:45.903

访问任何变量的方式相同。

你想用它做什么？“回归”它在哪里？

例如，您可以在消息框中轻松地将其弹​​出：

```
alert(document.domain); 
```

或者用它做任何你喜欢的事情。

如果未设置，则结果为`undefined`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:45:36.390

```
if(window.location.hostname !== document.domain) 
```

是如何检查 document.domain 是否被显式设置 - 通过将 document.domain 变量与主机名进行比较，如果以上返回为 true，则 document.domain 正在页面上重新分配。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-24T22:23:55.987

嗯...你只是做

`document.domain`

# python - Alternative for 'in' operator for nested lists

> ID：15057366
> 
> 赞同：6
> 
> 时间：2013-02-24T22:22:07.073
> 
> 标签：python, nested-lists, in-operator

If I want to find something in a list in python I can use the 'in' operator:

```
list = ['foo', 'bar']
'foo' in list #returns True 
```

But what should I do if I want to find something in a nested list?

```
list = [('foo', 'bar'), ('bar', 'foo')]
'foo' in list #returns False 
```

Is it possible to do it in one row without a for loop for example?

Thanks!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T22:23:26.653

你可能想要`any`：

```
>>> list = [('foo', 'bar'), ('bar', 'foo')]
>>> any('foo' in e for e in list)
True 
```

不过，某种循环是不可避免的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T22:57:47.923

您可以像这样使用 itertools.chain ：

```
from itertools import chain

nested__seq = [(1,2,3), (4,5,6)]

print 4 in chain(*nested__seq) 
```

PS：你不应该覆盖像“list”这样的bultins

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T01:46:18.403

这是滥用，但你可以很容易地在一行中做到这一点。

```
mainlist = [('foo', 'bar'), ('bar', 'foo')]
[elem for elem in sublist for sublist in mainlist] #['bar', 'bar', 'foo', 'foo']

'foo' in [elem for elem in sublist for sublist in mainlist] # True 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T22:38:50.633

如果您有任意深度的可迭代列表，请先将其展平：

```
import collections 

li= [('foo', 'bar'), ('bar', 'foo'),[[('deeper',('foobar'))]]]

def flatten(l):
    for el in l:
        if isinstance(el, collections.Iterable) and not isinstance(el, basestring):
            for sub in flatten(el):
                yield sub
        else:
            yield el

print 'deeper' in flatten(li)  
print 'foo' in flatten(li) 
print 'nope' in flatten(li) 
```

印刷：

```
True
True
False 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-24T22:31:09.617

你也可以这样做`in`

```
>>> list = [('foo', 'bar'), ('bar', 'foo')]
>>> 'foo' in (x[1] for x in list)
True 
```

**编辑**：此方法仅检查是否`foo`作为第一个元素。

将元素（任意）搜索为“foo”：

```
 >>>'foo' in reduce(lambda x,y: x+y, list)   
 True 
```

更多尝试：

```
In [7]: list
Out[7]: [('foo', 'me', 'bar'), ('bar', 'foo', 'you')]
In [8]: 'me' in reduce(lambda x,y: x+y, list)
Out[8]: True

In [9]: 'you' in reduce(lambda x,y: x+y, list)
Out[9]: True 
```

# php - Multiple image processing, on custom post type in Wordpress

> ID：15057368
> 
> 赞同：1
> 
> 时间：2013-02-24T22:22:08.523
> 
> 标签：php, mysql, wordpress

I have developed custom post type in Wordpress, and besides other I am trying to process and display images on every post page.

When I set multiple image html fields, ie

```
<input type="file" name="an_uploaded_attachment" id="multiUpload" />
<input type="file" name="an_uploaded_attachment" id="multiUpload" /> 
```

and submit post, images are normaly displayed on post page. But when I include mutiple file upload like

```
<input type="file" name="an_uploaded_attachment" id="multiUpload" multiple /> 
```

images are not processed.

This is what I am using for registering images in WP:

```
 if (!function_exists('wp_generate_attachment_metadata')){

            require_once(ABSPATH . "wp-admin" . '/includes/image.php');

            require_once(ABSPATH . "wp-admin" . '/includes/file.php');

            require_once(ABSPATH . "wp-admin" . '/includes/media.php');

        }

         //if ($_FILES) {

            foreach ($_FILES as $file => $array) {

                if ($_FILES[$file]['error'] !== UPLOAD_ERR_OK) {

                    return "upload error : " . $_FILES[$file]['error'];

                }

                $attach_id = media_handle_upload( $file, $post_id );
                update_post_meta($post_id,'_thumbnail_id',$attach_id);

            } 
```

Does anyone knows something about this? Tried few scripts but they dont work.

# java - 为什么现在要从我的班级创建对象

> ID：15057374
> 
> 赞同：0
> 
> 时间：2013-02-24T22:22:52.743
> 
> 标签：java

当我尝试编译这个程序时，一个错误指向“new”这个词。我正在尝试从 carOrder 类创建 2 个对象，但遇到了麻烦！我以前在其他程序中遇到过这个问题，我不知道为什么，这让我很生气，请帮忙！

```
import java.text.DecimalFormat;
import java.util.Scanner;

public class CarOrder
private String buyer;
private String carType;
private double cost;
private int quantity;
private boolean taxStatus;
private double discountedCost;
private double taxAmount;

// Default Constructor
public void carOrder()
{
}

// Constructor
public void CarOrder(String buy, String car, double cos, int quan, boolean tax)
{
    buyer = buy;
    carType = car;
    cost = cos;
    quantity = quan;
    taxStatus = tax;
}

// Sets the company buying cars
public void setBuyer(String buy)
{
    buyer = buy;
}

// Sets the car type being purchased
public void setCarType(String car)
{
    carType = car;
}

// Sets cost of the cars being purchased
public void setCost(double cos)
{
    cost = cos;
}

// Sets the quantity of cars being purchased
public void setQuantity(int quan)
{
    quantity = quan;
}

// Sets tax status for the cars
public void setTaxStatus(boolean tax)
{
    taxStatus = tax;
}

// Returns name of buyer to user
public String getBuyer()
{
    return buyer;
}

// Returns type of car to user
public String getCarType()
{
    return carType;
}

// Returns cost to user
public double getCost()
{
    return cost;
}

// Returns quantity of cars to user
public int getQuantity()
{
    return quantity;
}

// Returns tax status to user
public boolean getTaxStatus()
{
    return taxStatus;
}

// Returns discounted cost to user
public double getDiscountedCost()
{
    if (quantity > 10)
        if (quantity > 20)
            discountedCost = cost - cost * .10;
        else
            discountedCost = cost - cost * .05;
    else
        discountedCost = cost;

    return discountedCost; 
}

// Returns tax amount to users
public double getTaxAmount()
{
    taxAmount = cost * .0625;
    return taxAmount;
}

public static void main(String[] args)
{
    Scanner keyboard = new Scanner(System.in);
    CarOrder speedy = new CarOrder("Speedy Rental", "Mini Cooper", 22150, 15, true);
    CarOrder zip = new CarOrder("Zip Car Co.", "Ford Fusion", 27495, 6, true);

    System.out.println("Enter first Buyer");
    String buyer1 = keyboard.nextLine();
} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T22:24:10.757

```
public void CarOrder(String buy, String car, double cos, int quan, boolean tax)
{ 
```

应该

```
public CarOrder(String buy, String car, double cos, int quan, boolean tax)
{ 
```

> 构造函数没有返回类型，甚至没有 void。

目前，您有一个`CarOrder`在您的类中命名的方法，因为它的返回类型为 void，这违反了 custructor 的规则。如果您删除 void，那么它将是一个构造函数，因为它与您的类同名。

这同样适用于您的无参数的构造函数。

```
public void CarOrder() 
```

应该

```
public  CarOrder() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:24:17.860

您在公共课 CarOrder 之后缺少一个“{”... :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T22:27:46.227

当您不声明构造函数时，Java 提供了一个没有参数的默认构造函数。正如您声明`CarOrder(String buy, String car, double cos, int quan, boolean tax)`的那样，不再创建默认构造函数。您创建了一个名为 的方法`carOrder`，这可能是尝试创建一个不带参数的构造函数，但它有两个问题：

*   它有一个返回类型 (void) 而构造函数没有
*   名称与类不同（cardOrder 与 CarOrder 不同，因为 Java 区分大小写）

如果要`new CarOrder()`拨打电话，只需添加以下代码：

```
public CarOrder() {
    //insert your implementation here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T22:28:24.300

具有返回类型的构造函数被编译器视为方法。

# magento - Magento：如何在 config.xml 中获取变量

> ID：15057379
> 
> 赞同：1
> 
> 时间：2013-02-24T22:23:24.740
> 
> 标签：magento, controller, rewrite, admin, config

我在我的模块 config.xml 文件中使用 rewrite 重载了管理 productController：

```
<from><[CDATA [# ^ admin / catalog_product / #]]> </ from>
<to>/mymodule/catalog_produc/</to> 
```

它在开发环境中运行良好，但在生产环境中不起作用，它找不到我的控制器。

经过调查，我发现local.xml中的管理路径在两个环境中是不一样的：生产环境

```
<admin>
     <routers>
         <adminhtml>
             <args>
                 <frontName> <! [CDATA [admin-prod]]> </ frontName>
             </ args>
         </ adminhtml>
     </ routers>
</ admin> 
```

发展环境

```
<admin>
     <routers>
         <adminhtml>
             <args>
                 <frontName> <! [CDATA [*admin-prod*]]> </ frontName>
             </ args>
         </ adminhtml>
     </ routers>
</ admin> 
```

我的问题是如何在我的模块 config.xml 中动态获取 frontname 以正确设置并动态重写，如下所示： <[CDATA [# ^ ***admin-prod*** / catalog_product / #]]> ??????

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T23:03:30.657

如果您不使用古老的 Magento 版本（早于 1.3），则不再需要这种基于正则表达式的控制器重写。改用这个：

**配置文件**

```
<admin>
    <routers>
        <adminhtml>
            <args>
                <modules>
                    <mymodule before="Mage_Adminhtml">MyNamespace_MyModule</mymodule>
                </modules>
            </args>
        </adminhtml>
    </routers>
</admin> 
```

现在 Magento 将查找`MyNamespace_MyModule_Catalog_ProductController`before`Mage_Adminhtml_Catalog_ProductController`并在找到它时使用它，而不管路由的前面名称。

# google-maps-sdk-ios - 如何拦截对 iOS 版 Google Maps SDK 中标记的触摸？

> ID：15057381
> 
> 赞同：5
> 
> 时间：2013-02-24T22:23:33.167
> 
> 标签：google-maps-sdk-ios

我是 iOS 版 Google Maps SDK 的新手。当用户单击标记时，我不想显示带有标题和片段的默认信息窗口，而是将它们定向到我的应用程序中的其他位置（例如模态视图控制器）。我在头文件和网上搜索过，似乎找不到与标记上的触摸事件有关的任何内容。有没有人有建议或解决方法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-24T23:27:15.967

我相信您想要的是添加委托并覆盖该`didTapMarker`方法

```
/**
 * Called after a marker has been tapped.
 *
 * @param mapView The map view that was pressed.
 * @param marker The marker that was pressed.
 * @return YES if this delegate handled the tap event, which prevents the map
 *         from performing its default selection behavior, and NO if the map
 *         should continue with its default selection behavior.
 */
- (BOOL)mapView:(GMSMapView *)mapView didTapMarker:(id<GMSMarker>)marker; 
```

# cakephp-2.0 - cakephp 2 保存后禁用缓存

> ID：15057394
> 
> 赞同：1
> 
> 时间：2013-02-24T22:24:28.977
> 
> 标签：cakephp-2.0

插入或删除后我不希望删除视图缓存，但蛋糕会自动执行。保存、删除功能后如何禁用清除缓存？

我的尝试，但还是一样：

```
if($this->User->save($data, array('callbacks' => false))) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T18:33:16.567

如果我对您的理解正确，您希望将其添加到您的模型或 AppModel 中。

```
public function afterSave($created) { 
   Cache::clear();
   parent::afterSave($created); 
} 
```

删除`parent::afterSave($created);`模型本身中的 if。

如果您不想完全清空缓存，可以通过`Cache::delete($key)`或按组定位：`Cache::clearGroup($groupname);`

# android - Android - 从另一个类设置 OnClickListener

> ID：15057396
> 
> 赞同：2
> 
> 时间：2013-02-24T22:24:39.527
> 
> 标签：android, onclicklistener, android-gridview

我有一个`OnClickListener`我的`GridView`：

```
public class MyOnClickListener implements View.OnClickListener {
     private final int position;  

public MyOnClickListener(int position)  
{  
    this.position = position;  
}  

public void onClick(View v) {
    // TODO Auto-generated method stub
    switch(position){
        case 0:
        Intent a = new Intent(v.getContext(), Weapons.class);
        v.getContext().startActivity(a);
        break;
    //case 1, 2, etc...  

    }
} 
```

我如何在另一个班级中使用它？我让我的`Category`班级这样做：

```
GridView gridview = (GridView) findViewById(R.id.categoryGrid);
gridview.setAdapter(new ButtonAdapter(this));
gridview.setOnClickListener(new MyOnClickListener(this)); 
```

当我这样做时，该`(new MyOnClickListener(this));`行带有下划线，表示我需要更改`public MyOnClickListener(int position)`为`public MyOnClickListener(Category category)`.

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:27:09.893

选择你想要的，你想`MyOnClickListener`接受一个`Category`对象还是一个整数原语？

问题是您的构造函数接受一个 int，但是当您制作 a 时，`new MyOnClickListener`您 pass off `this`，它指向 `Category`实例，它***不是***整数。如果您不想传递`this`整数（通常`0`是起始索引）。

```
gridview.setOnClickListener(new MyOnClickListener(0)); 
```

例如

```
public MyOnClickListener(int position)  //requires an int
{  
    this.position = position;  
} 
```

如果你想同时接受，让构造函数要么接受两个参数，要么制作两个单独的构造函数。

```
Category category;
public MyOnClickListener(int position, Category category)  
{  
    this.position = position;  
    this.categoty = category;
} 
```

或者

```
Category category;
public MyOnClickListener(Category category)  
{  
    this.position = 0;  
    this.categoty = category;
} 
```

此外，GridViews 应该使用 an`OnItemClickListener`代替，因为`OnClickListener` *不会*注册位置。这意味着您需要更改您的类以便它实现 `AdapterView.OnItemClickListener`：

```
public class MyOnClickListener implements AdapterView.OnItemClickListener {

  public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
    switch(position){
      case 0:
        Intent a = new Intent(v.getContext(), Weapons.class);
        v.getContext().startActivity(a);
        break;
        //case 1, 2, etc...  

    }
  }
} 
```

然后使用 using 设置它`setOnItemClickListener()`：

```
gridview.setOnItemClickListener(new MyOnClickListener()); 
```

# bison - 获取：警告，规则无法匹配

> ID：15057399
> 
> 赞同：11
> 
> 时间：2013-02-24T22:25:08.123
> 
> 标签：bison, yacc, lex, flex-lexer

我正在构建一个词法和语法分析器。当我尝试将 flex 与 .l 文件一起使用时，我收到以下警告。

```
littleDuck.l:26: warning, rule cannot be matched 
```

规则 26 是以 {cteI} 开头的规则，我的规则部分如下：

```
[ \t\n]     ;
{RW}        {return RESERVED;}
{id}        {return ID;}
{ops}       {return OPERATOR;}
{seps}      {return SEPARATOR;}
{cteI}      {yylval.ival = atoi(yytext); return INT;}
{cteF}      {yylval.fval = atof(yytext); return FLOAT;}
{ctestring} {yylval.sval = strdup(yytext); return STRING;}
.       ; 
```

另外，我的定义部分是这样的：

```
RW      program|var|int|float|print|else|if
id      ([a-z]|[A-Z)([a-z]|[A-Z]|[0-9])*
ops     "="|"<"|">"|"<>"|"+"|"-"|"/"|"*"
seps    ":"|","|";"|"{"|"}"|"("|")"
cteI    [0-9]+
cteF    {cteI}(\.{cteI}((e|E)("+"|"-")?{cteI})?)?
ctestring   (\".*\") 
```

为什么会出现此警告，如何修改我的文件使其不会出现？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-24T22:50:14.753

警告告诉您，任何可能匹配的`{cteI}`内容都将始终与某个较早的规则匹配。在您的情况下，它表明规则与您期望的不匹配，可能是由于拼写错误。在您的情况下，它是`{id}`规则，您将其定义为：

```
([a-z]|[A-Z)([a-z]|[A-Z]|[0-9])* 
```

注意括号和方括号的嵌套。为清楚起见添加空格，这是

```
( [a-z] | [A-Z)([a-z] | [A-Z] | [0-9] )* 
```

这将匹配任何字母、数字或字符`(` `)`或`[`. 你可能的意思是：

```
([a-z]|[A-Z])([a-z]|[A-Z]|[0-9])* 
```

可以更清楚地写成

```
[a-zA-Z][a-zA-Z0-9]* 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-01T22:02:00.750

查看规则的顺序，因为它很重要！

```
 1 [.] 
  2 "foo" 
```

这里永远不会匹配第二条规则。

# c# - C# 画线 OnPaint() 与 CreateGraphics()

> ID：15057406
> 
> 赞同：1
> 
> 时间：2013-02-24T22:25:29.503
> 
> 标签：c#, drawing, line

问题：您如何正确地从 OnPaint() 方法以外的方法绘制 winform？

附加信息：我现在的代码在 OnPaint() 方法中为井字游戏绘制了一些背景线。然后我使用 Mouse_Click 事件并运行这个显然不正确的代码：

```
private void TicTacToe_MouseClick(object sender, MouseEventArgs e)
   Graphics g = this.CreateGraphics();
   g.DrawEllipse(this.penRed, this.Rectangle); 
```

由于我不明白的原因，它确实绘制了圆圈，但是当最小化或将表单移出屏幕时，它会擦除​​圆圈而不是 OnPaint() 方法中的线条。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:35:32.643

问题是 Windows 窗口（包括 WinForms）没有自己的图形内存，除非它们的创建者提供这样的内存，并且特定窗口被覆盖或隐藏并最终需要重新绘制只是时间问题。您正在向屏幕绘画（您可能会说），其他人也可以这样做。您可以依赖的唯一约定是 OnPaint 将在需要时被调用。基本上可以在需要时使用你的哲学和绘画（而不是在一些神秘和不可预测的时间表上）。为此，请查看我的解决方案。

您应该使用“后缓冲位图”，例如：

```
private Bitmap bb;

protected override void OnResize(EventArgs e) {
  this.bb = new Bitmap(this.ClientSize.Width, this.ClientSize.Height);
  this.InitBackBuffer();
}
private void InitBackBuffer() {
  using (var g = Graphics.FromImage(this.bb)) {
    // do any of the "non dissapearing line" drawing here
  }
}

private void TicTacToe_MouseClick(object sender, MouseEventArgs e)
  using (Graphics g = Graphics.FromImage(this.bb))
    g.DrawEllipse(this.penRed, this.Rectangle);
  this.Invalidate();
}

protected override void OnPaint(PaintEventArgs e) {
  base.OnPaint(e);
  e.Graphics.DrawImageUnscaled(this.bb);
} 
```

试试看。应该这样做:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T22:45:14.643

您正在做很多“视图”但没有“模型”。

当您想创建一个形状时，当鼠标按钮向下/向上时，创建一些代表该形状的 DATA。

您的数据结构表示持久信息（它是允许您在会话之间保存和加载此信息的数据）。

您需要做的所有绘制函数就是查看 DATA 结构并绘制它。因此，这将在调整大小/隐藏/显示之间持续存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T22:30:54.217

您正在做的是“异步”绘制表单（来自 OnPaint 方法）。你看，OnPaint 方法是 Windows 窗体绘制整个窗体所依赖的方法。当您的 From 发生某些事情时，它会失效并再次调用 OnPaint。如果在该方法中没有绘制某些内容，那么在此之后它将不存在。

如果您希望按钮触发某些内容永久显示，那么您需要做的是将该对象添加到某处的集合中，或设置与其相关的变量。然后调用 Refresh() 调用 Invalidate() 和 Update() 然后，在 OnPaint 期间，绘制该对象（省略号）。

如果您希望它在您的表单发生某些事情后仍然存在，例如最小化，您必须在 OnPaint 期间绘制它。

这是我的建议：

```
public partial class Form1 : Form
{
    Rectangle r = Rectangle.Empty;
    Pen redPen = new Pen(Color.Red);

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        r = new Rectangle(50, 50, 100, 100);
        Refresh();
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);

        if (r != Rectangle.Empty)
        {
            e.Graphics.DrawRectangle(redPen, r);
        }
    }
} 
```

# javascript - 单击复选框时无法从其他文本框填充多个文本框值

> ID：15057409
> 
> 赞同：0
> 
> 时间：2013-02-24T22:25:52.723
> 
> 标签：javascript, jquery, html

我进行了搜索，但找不到任何可以帮助我弄清楚我的特定问题的东西。我有一个客户地址的文本框，一个公司地址的文本框，以及一个用于标记地址是否应该相同的复选框。我需要获取复选框以在点击时使用客户地址填写公司地址，并在点击时取消填写。我尝试使用 jquery 和直接 javascript DOM 操作的几种不同方法，我最成功的是在下面的代码中，它只用 cust_street 值填充 biz_street 文本框，我不明白为什么。一些帮助将不胜感激，无论是在 jquery 还是直接的 javascript 中，都不能使用 php（可悲）。

这是在 jsfiddle 上（如 rjmunro 所建议，好主意:)）：http: [//jsfiddle.net/yN73w/1/](http://jsfiddle.net/yN73w/1/)根本不工作

这是jQuery：

```
$("#same_box").click(function () {
var v = $("#cust_street").val();
var x = $("#cust_city").val();
var y = $("#cust_state").val();
var z = $("#cust_zip").val();

$("#biz_street").val(v);
$("#biz_city").val(x);
$("#biz_state").val(y);
$("#biz_zip").val(z);
}); 
```

或者更简单地说：

```
$("#same_box").click(function () {
$("#biz_street").val($("#cust_street").val());
$("#biz_city").val($("#cust_city").val());
$("#biz_state").val($("#cust_state").val());
$("#biz_zip").val($("#cust_zip").val());
}); 
```

和 HTML：

```
 <label id="cus_street_label">Street</label></br>
    <input type="text" name="cust_street" id="cust_street" style="width:90%" /></br>

<div id="cus_city">
    <label id="cus_city_label">City</label></br>
    <input type="text" name="cust_city" id="cust_city" style="width:100%" /></br>
</div>
<div id="cus_state">
    <label id="cus_state_label">State</label></br>
    <input type="text" name="cust_state" id="cust_state" style="width:70%" /></br>
</div>
<div id="cus_zip">
    <label id="cus_zip_label">Zip</label></br>
    <input type="text" name="cust_zip" id="cust_zip" style="width:65%" /></br>
</div>

    <input type="checkbox" name="same_box" id="same_box" >Address Same as Customer</input></br>

<label id="biz_street_label">Street</label></br>
<input type="text" name="biz_street" id="biz_street" style="width:90%" /></br>

<div id="biz_city">
     <label id="biz_city_label">City</label></br>
     <input type="text" name="biz_city_box" id="biz_city_box" style="width:100%" /></br>
</div>
<div id="biz_state">
    <label id="biz_state_label">State</label></br>
    <input type="text" name="biz_state_box" id="biz_state_box" style="width:70%" /></br>
</div>
<div id="biz_zip">
    <label id="biz_zip_label">Zip</label></br>
    <input type="text" name="biz_zip_box" id="biz_zip_box" style="width:80%" /></br>
</div> 
```

非常感谢您的帮助，如果我在搜索中错过了这样的主题，我深表歉意。

（另外，不相关，但为什么`function formReset() { document.getElementById("customer").reset(); }`在 Firefox 中不起作用？它似乎只在 chrome 中起作用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:33:43.393

（你需要在你的 JSFiddle 中选择 jQuery，比如[http://jsfiddle.net/7HGNx/](http://jsfiddle.net/7HGNx/)）

您的代码是指，`biz_city`但元素的 id 是`biz_cty_box`.

您可能不想附加到单击，您可能想听更改事件，因为当没有鼠标更改选项时，这将触发。我还会检查更改是否已勾选框，而不是取消勾选框。

```
$("#same_box").change(function (e) {
    if ($(this).is(":checked")) {
        .
        .
        .
    }
} 
```

# mysql - pt-query-digest 按数据库和用户和日期时间过滤

> ID：15057410
> 
> 赞同：3
> 
> 时间：2013-02-24T22:26:10.463
> 
> 标签：mysql, performance, percona

我有一个非常大的慢查询日志（~220GB），使用 pt-query-digest，我如何过滤事件/查询：

*   数据库或数据库 AND
*   日期时间范围（我只能在这里访问时间戳）和
*   数据库用户

我知道这种大小的慢查询需要很长时间，但这是我解决生产服务器上的一些慢查询问题所必须的全部信息。将来，我将减小慢查询日志的大小。

我一直在使用该工具的基础知识，但其中一些过滤器选项似乎并不明确或没有很好的记录。如果我这周有时间，我会再玩一次，但我会很感激任何进一步的提示。我尝试过使用 mysqldumpslow，但它只能处理 grep 中的单个模式。

PS我的第一个stackoverflow问题......请友善:-)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T05:01:30.277

我为 Percona 开发了一个关于 pt-query-digest 的培训课程。

```
$ pt-query-digest --since '2013-02-24 00:00:00' --until '2013-02-24 23:59:59'
    --filter '$event->{db} && $event->{db} =~ /mydb/ && $event->{user} =~ /myuser/' 
```

我测试 {db} 然后匹配 {db} =~ /mydb/ 的原因是某些日志事件没有 {db}，因此它会生成“使用未初始化值”错误。

# css - Flex-box 忽略包裹的孩子的边距（边距折叠）

> ID：15057411
> 
> 赞同：6
> 
> 时间：2013-02-24T22:26:12.903
> 
> 标签：css, flexbox

给定以下 HTML：

```
<div class="outer">
  <div>
    <div class="inner">A</div>
  </div>
</div>
<div class="outer">
  <div class="inner">B</div>
</div> 
```

和以下 CSS（无前缀）：

```
.outer {
  display: box;
  box-orient: vertical;

  height: 100px;
  width: 100px;

  background: red;
  margin: 10px;
}

.inner {
  height:     50px;
  margin-top: 10px;
  background: green;
} 
```

![甲和乙](../Images/fbc2ff0f1ffba2c74d618c006cde1008.png)

这是一个[CodePen](http://codepen.io/boennemann/pen/oFwtK)。

`A`被包裹在 a`<div>`所以它的边距被忽略。

**问：如何使用弹性盒模型实现（边距）`B`的行为？`A`**

注意： div 包装器可以深入多个级别

定位：最新的 Chrome/Safari/iOS

非常感谢您的帮助！

编辑：感谢@JoséCabo，我想出了这个：

```
.outer {
  display: flex;
  flex-direction: column;

  height: 100px;
  width: 100px;

  background: red;
  margin: 10px;
}

.inner {
  height:     50px;
  margin-top: 10px;
  background: green;
} 
```

[代码笔](http://codepen.io/boennemann/pen/CLyot)

铬合金： ![铬合金](../Images/4dd933d187987236a7451de805ff0164.png)

苹果浏览器： ![苹果浏览器](../Images/295abee6f2f7eeebc3dfc341fbd1cb9b.png)

不幸的是，正如@cimmonon 提到的，它在 Safari 中不起作用，所以我仍然需要一些帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T23:14:07.913

你所看到的实际上与 Flexbox 无关，而是所谓的*边距折叠*

```
.outer div {
  border: 1px solid;
} 
```

边框的添加防止了边距折叠。我建议不要依赖边距，而是在父容器上放置一个填充：

```
.outer {
  padding-top: 10px;
} 
```

例子：

```
.wrapper {
  background: #eef;
  border: 1px solid darkgray;
}

.container {
  display: flex;
  flex-wrap: wrap;
  margin: -1em;
}

.item {
  flex-grow: 1;
  margin: 1em;
  border: 1px solid black;
  padding: 1em;
  min-width: 6em;
}
```

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>JS Bin</title>
</head>
<body>
  <div class="wrapper">
  <div class='container'>
    <div class='item'>item</div>
    <div class='item'>item</div>
    <div class='item'>item</div>   
    <div class='item'>item</div>
    <div class='item'>item</div>
    <div class='item'>item</div>    
  </div>
  </div>
</body>
</html>
```

现在，要覆盖所有前缀，您需要这样的东西：

```
.outer {
  display: -moz-box;
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -moz-box-orient: vertical;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  height: 100px;
  width: 100px;
  background: red;
  margin: 10px;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T23:58:18.870

最后我想出了正确的解决方案（针对我的具体问题）。

```
.outer {
  display: flex;
  flex-direction: column;

  height: 100px;
  width: 100px;

  background: red;
  margin: 10px;
}

.inner {
  height: 50px;
  margin-top: 10px;
  background: green;
  display: inline-block;
  width: 100%;
} 
```

[代码笔](http://codepen.io/boennemann/pen/weLAI)

我正在使用`display: inline-block`on`.inner`禁用边距折叠，然后使用`width: 100%`.

所有的功劳都[归功于 cimmanon](https://stackoverflow.com/a/15057840/)为我指出了正确的“保证金崩溃”方向

# c - C 小于运算符

> ID：15057413
> 
> 赞同：-1
> 
> 时间：2013-02-24T22:26:37.827
> 
> 标签：c

从事一个班级项目并遇到我应该使用的这段代码。

什么是“LT”运算符？我认为它是某种小于设备，但我以前从未在 C 中看到过这样的东西（我是新手），而且我的编译器一直告诉我它是未定义的。

```
int indexSmallest (struct dyArray * v, int i, int j) { 
    /* return index of smallest element */
    if (LT(dyArrayGet(v, i), dyArrayGet(v, j)) 
        return i;
    return j;
} 
```

我知道我可以`(compare(x, y) == -1)`解决这个问题，但想尝试保留给我的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T22:41:18.473

如前所述，`LT`它不是 C 的标准部分。它很可能是一个宏，如果您希望使用显示的代码，您应该已经获得了宏的定义，可能在标题中。

下面是一个可能的实现，假设返回的类型`dyArrayGet()`是数字类型：

```
#define LT(lhs, rhs)  ((lhs) < (rhs)) 
```

我不相信在这种情况下它有什么好处。它可能为比较字符串提供一些价值，其中定义可能是：

```
#define LT(lhs, rhs)  (strcmp(lhs, rhs) < 0) 
```

这完全取决于`dyArrayGet()`函数返回的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T22:34:53.797

LT 不是运营商。我怀疑你认为它是一个运算符，因为你不熟悉 if (a)-syntax。这些代码片段是等效的：

```
int i = 5;
if (i != 0)
  foo();

int i = 5;
if (i)
  foo(); 
```

LT 可以是函数或宏。

# c - 返回指向结构的指针或将其传入？

> ID：15057414
> 
> 赞同：0
> 
> 时间：2013-02-24T22:26:47.283
> 
> 标签：c, function, pointers, struct

其中哪一个是更高效和更好的代码？还是有其他方法我应该这样做？

```
typedef struct foo {
int width;
int height;
} foo; 
```

...下面两个示例中的 typedef，但它实际上是一个任意结构...

```
foo *new_foo (int width, int height) {

  foo *f
  if ((f = malloc(sizeof(foo)))==NULL) return NULL;

  f->width = width;
  f->height = height;

  return foo;
}  

void del_foo (foo *f) {free(f);}

int main () {

  int width = 3;
  int height = 4; // arbitrary values

  foo *f   
  f = new_foo(width, height)

  // do something with foo here      

  del_foo(f);
} 
```

或者

```
int new_foo (foo *f, int width, int height) {

  f->width = width;
  f->height = height;

  return 0;
}  

int main () {

  int width = 3;
  int height = 4; // arbitrary values

  foo *f
  if ((f = malloc(sizeof(foo)))==NULL) return NULL;   
  new_foo(f, width, height)

  // do something with foo here      

  free(f);
} 
```

谢谢！对于任何错别字，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:31:04.573

```
foo* new_foo(int width, int height) 
```

对于名称中带有的函数似乎更可取`new`（`new`这意味着对具有 C++ 经验的人进行动态分配）。

```
void foo_init(foo f, int width, int height) 
```

如果您想允许客户端`foo`在堆栈和堆上声明对象，那将是合理的。您也可以选择同时提供两者，`new_foo`作为`malloc`对`foo_init`.

如果您提供一个分配内存的函数，那么提供一个销毁对象的函数也是合理的 - `foo_destroy(foo )`（`del_foo`在您的问题中？）

最后一点，次要的一点 - 如果您将它们的名称作为它们操作的结构的前缀而不是在末尾添加结构（即`foo_new`比 更常见`new_foo`） ，您可以更明显地对相关函数进行分组

# java - 导出的活动不需要许可

> ID：15057420
> 
> 赞同：0
> 
> 时间：2013-02-24T22:27:56.070
> 
> 标签：java, android

所以，我正在学习学习android的教程，我有下面的代码，它在标题中给了我这个警告，并且应用程序由于某种原因无法运行有任何帮助吗？

这是代码：

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.learn.tam.Splash"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.SPLASH" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.learn.tam.StartingPoint"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.STARTINGPOINT" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application> 
```

显示错误的部分是 Second < 活动

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T22:38:25.990

您正在宣传设备上的任何应用程序都可以启动`com.example.learn.tam.StartingPoint`，而 Lint 警告您这是不安全的。

最有可能的是，您不需要这些`<intent-filter>`——您通常只需要那些您希望其他应用程序启动的活动。因此，消除此警告的最简单方法是删除该警告并在您启动该活动时`<intent-filter>`使用显式（例如， ）。`Intent``new Intent(this, StartingPoint.class)`

如果您选择保留`<intent-filter>`，无论出于何种原因，请：

1.  不要`android.intent.action.`用作你自己发明的动作的前缀——想出别的东西，比如`com.example.learn.tam.`

2.  添加`android:exported="false"`到`<activity>`元素中表示，尽管您有一个`<intent-filter>`，但您并不期望其他应用程序启动您的活动

# java - 从字段中获取对象

> ID：15057423
> 
> 赞同：0
> 
> 时间：2013-02-24T22:28:11.583
> 
> 标签：java, object, field

澄清：

我不知道对象的名称。这就是问题所在。我正在创建一个像这样的对象：

`新对象（字符串属性）；

我正在尝试在另一个类中运行代码，例如：

```
***.getStuff(); 
```

诀窍是，对象没有名称。但我确实知道字符串属性是什么

问题：有什么方法可以在不使用可怕的 for 循环的情况下实现这一点？

* * *

这个问题说起来有点棘手，但我会尽力而为。我想要的是获得一个与特定字段匹配的对象，而不会造成混乱的 for 循环。类似于以下内容：

对象 A 具有字段字符串名称。

```
String nameObj = "Tickle"; 
```

对象 A 的名称为“Tickle”

```
if(nameObj.equals(Object A)){
//bla bla
} 
```

非常混乱的措辞，是的。对于那个很抱歉。我想在我的代码中使用对象 A 而不必弄清楚它是哪个对象，假设我只有它的名称。我想，我正在寻找使用 for 循环的捷径。

随时询问有关我在寻找什么的问题。对不起这个措辞可怕的问题。

糟糕的编码，但这就是我正在寻找的......

```
nameObj.getName().getObjectA(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T22:32:27.030

如果你有一堆有名字的对象，并且你想通过它的名字来抓取一个对象，我建议你查一下 class `HashMap`。`HashMap`允许您将对象放在键下，当您为哈希映射提供键时，它会返回与该键关联的对象。因此，在您的示例中，键将是字符串名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T22:54:15.947

看一下这个实现，它演示了@Patashu 所说的，创建对象的映射，在这种情况下，我只是在顶部添加一个抽象类。

```
import java.util.HashMap;

public class FindMeBaby {

    public static void main(String[] args) {
        Factory.add(new NiceGuy("first one"));
        Factory.add(new FirstChild("ok im late"));

        System.out.println(Factory.get("first one")
                .getVeryImportantInformationThatOnlyThisClassKnows());

    }
}

abstract class ParentOfAll {
    protected String id;

    public ParentOfAll(String id) {
        this.id = id;
    }

    public  String getId(){
        return id;
    }

    public abstract String getVeryImportantInformationThatOnlyThisClassKnows();

}

class FirstChild extends ParentOfAll {

    public FirstChild(String id) {
        super(id);
    }

    public String getVeryImportantInformationThatOnlyThisClassKnows() {
        return "this is a secret";
    }
}

class NiceGuy extends ParentOfAll {

    public NiceGuy(String id) {
        super(id);
    }

    public String getVeryImportantInformationThatOnlyThisClassKnows() {
        return "to say the true, i'm not that nice :)";
    }

}

class Factory {
    private static HashMap allTheObjects = new HashMap();

    public static Object add(ParentOfAll object) {
        allTheObjects.put(object.getId(), object);
        return object;
    }

    public static ParentOfAll get(String key) {
        return (ParentOfAll) allTheObjects.get(key);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T22:58:53.557

这是另一个版本，具有更透明的方法的相同实现，没有 Factory 类，Parent 本身将跟踪实例并保存在列表中。

```
import java.util.HashMap;

public class FindMeBaby {

    public static void main(String[] args) {
        NiceGuy foo = new NiceGuy("first one");
        FirstChild bar = new FirstChild("ok im late");

        System.out.println(ParentOfAll.get("first one")
                .getVeryImportantInformationThatOnlyThisClassKnows());

    }
}

abstract class ParentOfAll {
    protected String id;

    public ParentOfAll(String id) {
        this.id = id;
        add(this);
    }

    public String getId() {
        return id;
    }

    public abstract String getVeryImportantInformationThatOnlyThisClassKnows();

    private static HashMap allTheObjects = new HashMap();

    private static Object add(ParentOfAll object) {
        allTheObjects.put(object.getId(), object);
        return object;
    }

    public static ParentOfAll get(String key) {
        return (ParentOfAll) allTheObjects.get(key);
    }

}

class FirstChild extends ParentOfAll {

    public FirstChild(String id) {
        super(id);
    }

    public String getVeryImportantInformationThatOnlyThisClassKnows() {
        return "this is a secret";
    }
}

class NiceGuy extends ParentOfAll {

    public NiceGuy(String id) {
        super(id);
    }

    public String getVeryImportantInformationThatOnlyThisClassKnows() {
        return "to say the true, i'm not that nice :)";
    }

} 
```

# macos - 如何在 OSX 10.8 上更新我的 git 版本

> ID：15057424
> 
> 赞同：5
> 
> 时间：2013-02-24T22:28:15.500
> 
> 标签：macos, git, osx-lion, osx-mountain-lion

我在 OSX 10.8.2 上，我正在运行 git git v1.7.4.4

我刚刚在远程服务器上安装了 git，它的版本是 1.11.x。我想运行相同版本的软件，但我不知道如何在我的笔记本电脑上更新 git。

我尝试按照[此处](http://www.eatplaycode.com/how-to-install-git-in-os-x-mountain-lion-10-8/)列出的步骤，指示下载[git-OSX-installer](http://code.google.com/p/git-osx-installer/downloads/list)，运行安装（运行顺利），然后执行：

```
$ sudo mkdir -p /usr/local/bin
$ sudo ln -s /usr/local/git/bin/git /usr/local/bin/git 
```

但在这之后我做`git --version`了，它仍然是 1.7.4.4。我只是重新安装了相同的版本吗？还是我在其他地方安装了更新的版本？

我一直在阅读类似的问题，我认为问题在于 OSX 附带的旧版本 git 安装在不同的位置，然后 git-osx-installer 或 mac 端口将放置它。但我不知道如何纠正这个问题。提前感谢您的建议。

更新：

`which git`返回：/usr/bin/git

`echo $PATH`返回：/opt/local/bin:/opt/local/sbin:/usr/local/rvm/gems/ruby-1.9.3-p194/bin:/usr/local/rvm/gems/ruby-1.9.3- p194@global/bin:/usr/local/rvm/rubies/ruby-1.9.3-p194/bin:/usr/local/rvm/bin:/usr/bin:/bin:/usr/sbin:/sbin: /usr/local/bin:/usr/local/git/bin:/opt/sm/bin:/opt/sm/pkg/active/bin:/opt/sm/pkg/active/sbin

更新2：

```
ESL ~/Downloads$ export PATH=/usr/local/bin:$PATH
ESL ~/Downloads$ which git
/usr/local/bin/git
ESL ~/Downloads$ 
ESL ~/Downloads$ git --version
git version 1.8.1.3 
```

看来我在本地安装了较新的 git 版本。那么我应该将 .bash_profile 添加`export PATH=/usr/local/bin:$PATH`到我的 .bash_profile 中吗？两个版本的git都安装有问题吗？

我添加`export PATH=/usr/local/bin:$PATH`到 ~/.bash_profile 的底部，现在新版本的 git 运行。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-05-13T20:00:39.550

在 Mac OSX 机器上更新任何二进制文件的最佳方法是使用专门为 Mac 开发的软件包（.dmg 或 .pkg 下载）。

对于 git，位于： http: [//git-scm.com/download/mac](http://git-scm.com/download/mac) （单击此链接应自动开始下载最新版本的 git for Mac）。

但是，在这种情况下（至少对于我的 10.8.3 MacBook 而言），这并不是故事的全部：软件包安装了 git，`/usr/local/git`然后在末尾添加了该路径`$PATH`——这违背了 IMO 的全部目的。

我已经手动修改了我`.bashrc`的内容，以便获得类似于上面建议的内容：

```
export PATH=/usr/local/git/bin:$PATH 
```

一旦你这样做了，你应该会看到选择了正确版本的 git：

```
$ git --version
git version 1.8.2.2 
```

请注意，这不适用于以交互方式启动的任何应用程序（例如，通过停靠栏） - 您必须运行下载包中提供的附加脚本；请参阅`README`说明。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-24T23:09:10.487

由于 /usr/bin 在路径中出现在 /usr/local/bin 之前，因此 /usr/bin 中的 git 可执行文件将优先。在你的 shell 中试试这个：

```
export PATH=/usr/local/bin:$PATH
which git 
```

在旁注中，我强烈建议使用[自制软件](http://mxcl.github.com/homebrew/)来管理诸如此类的安装在 macOS 上

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-24T22:46:30.343

我在 Cygwin（为 Windows 编译的 Linux 环境）中遇到了类似的问题。我会做

```
which git 
```

它会响应从源代码编译的更新 git 的正确位置，但在我这样做之前不会真正使用它

```
hash -r git 
```

我不声称理解这是做什么的或为什么必须这样做，但在那之后`git --version`回答'1.8.2.rc0.22.gb3600c3'显然不再是Cygwin附带的旧git。这可能不适用于 OSX，但如果`which git`正在查找更新的二进制文件，请试一试。

# javascript - 通过 Javascript/Phonegap 将 base64 图像上传到 Facebook 图形 API

> ID：15057425
> 
> 赞同：11
> 
> 时间：2013-02-24T22:28:19.773
> 
> 标签：javascript, facebook, cordova, sdk, base64

我正在尝试向[https://graph.facebook.com/](https://graph.facebook.com/) "+userID+"/photos?access_token="+accessToken " 发出“发布”请求

'url' 参数是 base64 数据 URI。

我收到错误“data:base64 .... is an interal URL but this is an external request”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-11T13:44:24.337

我知道无法上传单张照片的痛苦。经过不眠之夜和几天的研究，我终于让它与科尔多瓦文件传输插件一起工作

此解决方案不需要 Uint8Array 或 Blob 支持；）

首先添加插件：`cordova plugin add org.apache.cordova.file-transfer`

然后，使用此代码（请注意，我使用的是 angular.js。不要使用承诺或使用 rsvp 或 Q 之类的库来做出承诺）：

```
function postImage(fileURI, message) {

    var deferred = $q.defer();

    var win = function (r) {

        deferred.resolve(r);
    }

    var fail = function (error) {

        deferred.reject(error);
    }

    var options = new FileUploadOptions();
    options.fileKey = "file";
    options.fileName = 'name_of_photo_' + Math.round((+(new Date()) + Math.random()));
    options.mimeType = "image/jpg";

    var params = new Object();
    params.access_token = "your facebook access token ;)";
    params.message = message;
    params.no_story = false;

    options.params = params;

    var ft = new FileTransfer();
    ft.upload(fileURI, "https://graph.facebook.com/v2.0/me/photos", win, fail, options);

    return deferred.promise;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-31T14:56:18.660

```
 <script src='http://connect.facebook.net/en_US/all.js'></script>
 FB.init({appId: "ur ap id of fb", status: true, cookie: true});
FB.login(function(response) {
       if (response.authResponse) {
         var access_token =   FB.getAuthResponse()['accessToken'];
         FB.api('me/photos', 'post', {
             message: 'posted by xxxx',
             status: 'success',
             access_token: access_token,
             url: 'test.png'
         }, function (response) {

             if (!response || response.error) {
                alert('Error occured');
             } else {
                 alert('Image Posted On Facebook');
             }

         });
       } else {

       }
     }, {scope: 'user_photos,photo_upload,publish_stream,offline_access'});

        },
        error:function(){

        } 
```

# fortran - 在 Fortran 中将逻辑类型转换为双精度

> ID：15057429
> 
> 赞同：6
> 
> 时间：2013-02-24T22:29:03.330
> 
> 标签：fortran, gfortran, intel-fortran

我正在寻找一种将逻辑类型变量转换为可在 ifort 和 gfortran 中工作的真实类型的防弹方法。以下适用于 ifort，但*不适*用于 gfortran：

```
logical :: a
real :: b
a = .true.
b = dble(a) 
```

gfortran 中抛出的错误是

```
b = dble(a)
         1
Error: 'a' argument of 'dble' intrinsic at (1) must be a numeric type 
```

显然，.true。应该映射到 1.d0 和 .false。为 0.d0。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-24T23:15:15.930

除了编写一个函数来处理这个问题，您还可以直接使用内部合并函数：`b = merge(1.d0, 0.d0, a)`. 或者您可以编写一个定义的赋值子例程来执行此操作，以便您只需键入`b = a`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-24T22:40:50.637

我不确定是否有一个内在的工具可以做到这一点。我不知道为什么 ifort 接受这个，我猜它是编译器特定的功能。

[编辑：正如在下面的https://stackoverflow.com/a/15057846/1624033](https://stackoverflow.com/a/15057846/1624033)中指出的那样，有一个内在的**合并**功能，这正是这里所需要的。

对此的一个选项，特别是因为您希望这是防弹的，是创建您自己的函数。

我没有对此进行测试，但以下方法可能有效：

```
elemental pure double precision function logic2dbl(a)
  logical, intent(in) :: a

  if (a) then
    logic2dbl = 1.d0
  else
    logic2dbl = 0.d0
  end if
end function logic2dbl 
```

编辑：我根据以下建议在函数声明中添加了**元素。**我还向这个函数添加了**pure**，因为它增加了在并行情况下使用它的额外能力，并且它是很好的文档。然而，这只是我的意见，没有必要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-01T20:34:03.397

在 gfortran 中，我将 TRANSFER 内在用于该类型的工作。假设一个整数变量 my_int 然后：

```
 my_int = transfer(.false.,my_int) 
```

my_int 的结果是 0 正如预期的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-01T16:36:40.857

请注意，TRANSFER(.true.,1) 使用 Gfortran 正确返回值 1，并且（不正确？）使用当前版本的 Intel 和 Portland 编译器返回 -1 值。有趣的是，TRANSFER(-1,logical) 在后两个编译器中返回 TRUE，而在 Gfortran 中抛出语法错误。

# python - Python - 对数字列表进行排序

> ID：15057433
> 
> 赞同：0
> 
> 时间：2013-02-24T22:29:27.933
> 
> 标签：python, list, sorting, numbers

刚刚学习 Python 并开始学习排序列表的主题。展示了两种类型的算法：插入和选择。所以，我有一个想法并创建了这个：

```
def DiffSort(lst):
    lstDiff = [None] * len(lst)
    i = 0

    while i < len(lst):
        lstDiff[i] = lst[i] - lst[i-1] if i != 0 else lst[0]

        if lstDiff[i] < 0:
            sbj, tmp = lst[i], lstDiff[i]

            while tmp < 0:
                i -= 1
                tmp += lstDiff[i]
                lst[i+1] = lst[i]

            lst[i] = sbj
        else:
            i += 1

lst = [13,25,18,122,32,1,0.78,25,85,1,32,56,0.55,0.6,17]
print(lst)

DiffSort(lst)

print(lst) 
```

有什么好处吗？是否已经有类似的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:49:30.273

`list.sort()`如果您想就地对列表进行排序。

`sorted(list)`如果要返回列表的排序副本。

第二个选项适用于任何可迭代类型，而第一个选项是列表独占的（尽管某些其他类型可能也定义了相同或相似的函数，但您通常不能指望这一点）。

由于您似乎关心它的算法部分，因此您可能会感兴趣： [http ://svn.python.org/projects/python/trunk/Objects/listsort.txt](http://svn.python.org/projects/python/trunk/Objects/listsort.txt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T22:39:15.320

lst.sort() 还不够好吗？它肯定比必须在 O(n^2) 时间内运行的 Python 解决方案快得多。

# c - 二叉树节点 - GCC 警告 - 不兼容的类型

> ID：15057435
> 
> 赞同：0
> 
> 时间：2013-02-24T22:29:48.353
> 
> 标签：c, pointers, gcc, binary-tree

我正在尝试为二叉树创建一个新节点，当我尝试对 ->left 和 ->right 进行分配时出现错误。

```
typedef struct bin_node_t {
     data_t data;
     bst_key_t key;
     struct bin_node *left;
     struct bin_node *right;
} bin_node; 
```

是我对 bin_node 的结构定义。

这是我正在使用的变量：

```
bin_node *new;
bin_node *node_array[256]; 
```

这是我的变量分配：

```
/* ... code to initialize node_array ... */
new = (bin_node *)malloc(sizeof(bin_node)); 
```

这就是我遇到错误的地方：

```
 new->right = node_array[i+1];
    new->left = node_array[i]; 
```

这是我得到的编译器警告：

```
huffman.c:99: warning: assignment from incompatible pointer type
huffman.c:100: warning: assignment from incompatible pointer type 
```

我的完整代码可在以下位置获得：

[http://pastebin.com/iPYP5uVt](http://pastebin.com/iPYP5uVt)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T22:32:41.533

你的代码中没有`struct bin_node`。更改`struct bin_node *left`为：

```
struct bin_node_t *left;
              ^^^ 
```

# php - 在href中存储会话

> ID：15057439
> 
> 赞同：1
> 
> 时间：2013-02-24T22:30:16.730
> 
> 标签：php, html, session-variables

我想将一些数据存储到会话中，以便我可以在页面之间传输它。我将有很多图像存在，并且需要一种有效的数据存储方式。所以我已经完成了

`<a href="create2.php?" ><?php?$_SESSION["choice_1"]=2;?><img src="pictures/laptops/reebok.png" height="150"></td></a>;`

但是，当我在另一个页面中调用会话时，它说它是未定义的。我可以这样做，或者当单击图像时，我可以将一些数据存储到变量中，调用函数，将变量保存到会话中，然后加载新页面。但是我不知道我该怎么做。任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:39:30.980

1st，你的 html 坏了，有一个`</td>`不应该存在的。

关于您的问题，您不必在 URL 中传递值（但不是这样做的），如果您不想使用 cookie，则只需要会话 ID，并使用它来启动会话。你的链接：

```
<a href="create2.php?<?php echo session_name().'='.session_id(); ?>">
    <img src="pictures/laptops/reebok.png" alt="reebok" height="150">
</a> 
```

在 create2.php 调用`session_start()`一切之前。当然，如果您使用 cookie，则不需要在 URL 中传递会话 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:32:09.073

`session_start()`在尝试访问/修改会话变量之前，请确保在每个 PHP 文件的顶部调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T22:36:06.097

首先，你的 php init 标签错误`<?php?`应该是`<?php`. 其次，您应该在 php 中初始化会话：

```
<?php
// nothing before here, session_start must be the very first thing on the page
session_start(); 
```

`a`最后，您不会以这种方式创建任何 php 链接，您只是定义变量，但与标签无关。

要通过 URL 发送存储在 SESSION 全局变量中的“choice_1”，您应该执行以下操作：

```
<a href="create2.php?choice_1=<?=$_SESSION['choice_1']?>">
  <img src="pictures/laptops/reebok.png" height="150">
</a>; 
```

# python - 如何在 OSX Lion 下独立于 /System/Library/Frameworks 安装 Python 2.7.x？

> ID：15057441
> 
> 赞同：2
> 
> 时间：2013-02-24T22:30:50.950
> 
> 标签：python, osx-lion

有没有办法构建和安装 Python 2.7.x，使其对 /System/Library/Frameworks 下的任何内容没有任何直接依赖？（IOW，这样的 Python 即使在之后也应该保持功能`sudo chmod 000 /System/Library/Frameworks`。）

[`--enable-framework`我认为在运行时省略标志就足够了`./configure`，但我错了：如果我这样做，生成的 Python 仍然对 /System/Library/Frameworks 下的框架有很多依赖关系，当然包括 /System /图书馆/框架/Python.framework。（IOW，人们不得不怀疑安装和不选择安装之间是否有*任何*区别`--enable-framework`。）]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T22:38:07.703

是的，`--enable-framework`在构建和安装 Python 时会有所不同。如果没有`--enable-framework`，Python 将默认安装为传统的“unix 样式”构建，`/usr/local/`但可以通过`--prefix=`选项更改为`./configure`. `--enable-framework`构建一个默认安装到 的 Python `/Library/Frameworks`，尽管可以通过指定另一个路径来更改`--enable-framework`. 但是任何 Python 构建都将依赖于操作系统提供的其他库和框架。这个是正常的。你为什么担心它？

更新：只需安装另一个 Python 2.7 而不是使用 / usr/bin/python2.7。但这并不意味着您应该或可以避免使用其他系统框架。

也就是说，在 OS X 10.6 到 10.8 中，有一个已知的有问题的 Apple 提供的框架供 Python 使用：即 Tk 8.5，由包括 IDLE 在内的 Python Tkinter 应用程序使用。幸运的是，解决这个问题很容易。与 Python 一样，您可以将 Tcl 8.5 和 Tk 8.5 框架的更新的第三方版本安装到`/Library/Frameworks`某些 Python 发行版中，例如来自 python.org 的二进制安装程序，将使用它们。如果您能够使用它，我们推荐使用 ActiveTcl 发行版。有关详细信息，请参阅[http://www.python.org/download/mac/tcltk/](http://www.python.org/download/mac/tcltk/)。

另外，请注意，您需要为您拥有的*每个*Python 实例安装`Distribute`(或`setuptools`)、`pip`（如果您使用它）和/或`virtualenv`的单独版本。不要陷入使用 Apple 提供的用于系统 Python 的命令的陷阱。*`easy_install``/usr/bin/`*

 *进一步更新：随着进一步细化

> 避免 /S/L/F/Python.framework 下的所有东西”。我已经尝试过类似你描述的东西，但生成的安装仍然取决于 /S/L/F/Python.framework 下的东西

我所能做的就是重申构建自己的 Python，无论是“unix”构建、“共享”构建还是“框架”构建，生成的 Python 都应该完全独立于`/System/Library/Frameworks/Python.framework`. 如果不是，则构建或执行 Python 的方式出现问题。需要更多细节来确定出了什么问题，至少是这样的：

```
/path/to/your/python -c "import sys, pprint; print(sys.version); print(sys.executable); pprint.pprint(sys.path)" 
```

如果您构建了 Python，我们需要查看完整的`configure`和`make`命令。但这将进入本地化调试，并不适合 StackOverflow。

最后（！）更新：在框架构建中，如果您`--enable-framework=/path/to`坚持`configure`使用以`Library/Frameworks`. 所以，如果你使用：

```
./configure --enable-framework=/baz/quux/Library/Frameworks && make && make install 
```

它应该导致：

```
/baz
    quux
        Applications
            Python 2.7
                Build Applet.app
                IDLE.app
                ...
        Library
            Frameworks
                Python
                    Version
                        2.7
                            Headers/
                            Python
                            ...
                            Resources/
                            bin
                                ...
                                2to3
                                idle2.7
                                ...
                                python
                                python2
                                python2.7
                                ...
                            include/
                            lib/
                            share/
        bin
            2to3 -> ...bin/2to3
            ...
            idle2.7 -> ...bin/idle2.7
            ...
            python -> ...bin/python
            ... 
```

顶级 bin 目录有些退化，实际上只是混淆了问题。它包含指向框架`bin`目录中可执行文件的符号链接。它是`/usr/local/bin`由默认框架构建安装的。使用它的一个问题是，默认情况下，Distutils 安装的脚本将安装到框架`bin`目录中，并且在顶级目录中不会有它们的别名。这就是为什么建议您将 framework`bin`目录放在 shell 的头部`PATH`而忽略顶层的`bin`.

如果`--prefix=/foo/bar`添加到前一个`configure`，它将使用前缀路径作为残留顶级 bin 目录的根目录。在上面的示例中，该顶级`bin`目录将安装在：

```
/foo
    bar
        bin
            2to3 -> ...bin/2to3
            ...
            idle2.7 -> ...bin/idle2.7
            ...
            python -> ...bin/python
            ... 
```

否则，它应该没有效果。*

# jquery - 我使用jsp将数据存储在会话中。如何使用 jquery 检索数据？

> ID：15057451
> 
> 赞同：2
> 
> 时间：2013-02-24T22:31:27.223
> 
> 标签：jquery, jsp, session, get

请有人帮助我。
在一个 jsp 文件中，我在 session 中存储了一个值，如下所示： session.setAttribute("myalias", sfl);

我想检索 jquery 中的数据（例如 myjquery.js）。请问我该怎么做？

我尝试了在谷歌上获得的不同插件和示例，但它返回 null 或 NaN。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:34:10.537

你不能。会话保存在服务器端的内存（或磁盘）中。jQuery 在客户端的浏览器中运行。

如果您想在客户端获得数据，则需要将其发送到浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T22:36:22.253

如果您愿意，您可以从会话中获取值并写入客户端

将以下代码作为内联代码写入您的 jsp 文件中，以便您在 javascript 中具有价值并将其与 jquery 一起使用

```
<script>

    var testvalue= "<%=yourjspcodetogetfromsession%>"

</script> 
```

# sql - Trac 1.0.1 + AccountManagerPlugin + SQLAuthStorePlugin 使用方法

> ID：15057459
> 
> 赞同：-1
> 
> 时间：2013-02-24T22:32:21.623
> 
> 标签：sql, trac

我想在 AccountManagerPlugin 中为 Trac 1.0.1 使用 SQL 插件，但我不知道如何设置使用它：[http ://trac-hacks.org/wiki/SQLAuthStorePlugin](http://trac-hacks.org/wiki/SQLAuthStorePlugin)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:41:52.613

我更新了插件 wiki 上的[文档。](http://trac-hacks.org/wiki/SQLAuthStorePlugin)如果您在安装/使用插件时仍然遇到问题，请在问题中描述您到底尝试了什么以及发生了什么。另外，检查代码，这真的很简单。

# stream - 交替两个值

> ID：15057464
> 
> 赞同：3
> 
> 时间：2013-02-24T22:32:58.613
> 
> 标签：stream, scheme, racket, lazy-sequences

我有代码

```
(define alternate
(letrec ([f (lambda (x) (cons x (lambda () (f (+ x 1)))))])
(lambda () (f 1)))) 
```

结果是 1,2,3.. 我怎么能把它改成 1,2,1,2,1,2..

我在 f 中尝试了 cons 但没有用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:41:52.870

使用[流](http://docs.racket-lang.org/reference/streams.html)很容易实现：

```
(define (alternate)
  (stream-map (lambda (x)
                (if (even? x) 1 2))
              (in-naturals))) 
```

这里的技巧是流是使用[stream-cons](http://docs.racket-lang.org/reference/streams.html#%28form._%28%28lib._racket%2Fstream..rkt%29._stream-cons%29%29)构建的，它基本上可以完成您手动实现的操作：它创建一个列表，其中的元素是“承诺”，仅在需要时才被评估。

> `stream-cons`产生一个惰性流，stream-first 强制 first-expr 的求值以产生流的第一个元素，stream-rest 强制 rest-expr 的求值为返回的流的其余部分产生一个流。

这显示了如何`alternate`返回表单的无限元素流`1 2 1 2 1 2 ...`

```
(define alt (alternate))

(stream-ref alt 0)
=> 1
(stream-ref alt 1)
=> 2
(stream-ref alt 2)
=> 1
(stream-ref alt 3)
=> 2 
```

或者，如果您需要序列的*n 个*元素的列表，请使用此过程，顺便说一下，它首先应该是 Racket 的一部分：

```
(define (stream-take s n)
  (if (zero? n)
      '()
      (cons (stream-first s)
            (stream-take (stream-rest s) (sub1 n))))) 
```

现在它按预期工作：

```
(define alt (alternate))

(stream-take alt 0)
=> '()
(stream-take alt 1)
=> '(1)
(stream-take alt 2)
=> '(1 2)
(stream-take alt 3)
=> '(1 2 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:50:15.183

您可能还会发现生成器很有用：[docs](http://docs.racket-lang.org/reference/Generators.html?q=generator#%28form._%28%28lib._racket/generator..rkt%29._generator%29%29)

```
Welcome to DrRacket, version 5.3.3.5 [3m].
Language: racket [custom].
> (require racket/generator)
> (define g (generator () (let LOOP () (yield 1) (yield 2) (LOOP))))
> (g)
1
> (g)
2
> (g)
1
> (g)
2 
```

更新：

更好的是，使用无限生成器：

```
Welcome to DrRacket, version 5.3.3.5 [3m].
Language: racket [custom].
> (require racket/generator)
> (define g (infinite-generator (yield 1) (yield 2)))
> (g)
1
> (g)
2
> (g)
1
> (g)
2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T22:45:35.767

这是一种对现有代码进行小修改的方法：

```
(define alternate
  (letrec ([f (lambda (x) (cons x (lambda () (f (if (= x 1) 2 1)))))])
    (lambda () (f 1)))) 
```

# android - 如何加快加载图像作为小预览？

> ID：15057470
> 
> 赞同：1
> 
> 时间：2013-02-24T22:33:26.137
> 
> 标签：android, performance, android-image, image-scaling

我有 3 或 4 个用于加载图像的图像路径，因此我将其设置为 imageview。为什么需要很长时间？或者更好地问有没有办法让它更快？在一天结束时，我正在加载以适应高度和宽度小于 60 dp 的图像视图

```
Uri mainImgeUri = Uri.parse(imagePath);
InputStream imageStream;
try {
    imageStream = mActiviy.getContentResolver().openInputStream(mainImgeUri);
    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inSampleSize = 8;
    Bitmap yourSelectedImage = BitmapFactory.decodeStream(imageStream, null, options);
    mainImageIV.setImageBitmap(yourSelectedImage);
} catch (FileNotFoundException e) {
    e.printStackTrace();
} 
```

用例：发生的情况是用户将添加 5 张图像（他可以从主要由手机相机拍摄的图库中选择它们）。他点击保存，我的应用程序将它们的路径存储在 sqlite 数据库中。然后，当用户再次打开应用程序以查看它们时，我的应用程序查询数据库以获取所有图像的路径并执行 x 次以上的代码，以便所有图像视图都加载了预期的图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:11:56.827

看看[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

它解释了如何根据输出图像的所需尺寸计算正确的 inSampleSize。它还解释了如何引用大型位图，而无需将其所有像素数据加载到内存中。

这个想法是您重新采样较大的图像，并且只将较小的图像加载到内存中，从而使整个过程更加高效。示例代码正在从资源中访问位图，但这可以很容易地根据您的需要进行修改。

在示例中要注意的重要事项是 inJustDecodeBounds 和 calculateInSampleSize。

# ios - 如何在“打开方式”中获取我的应用程序

> ID：15057471
> 
> 赞同：0
> 
> 时间：2013-02-24T22:33:31.613
> 
> 标签：ios, objective-c

我只是在寻找一种在“打开方式”菜单中提出我的应用程序的方法。我在这个主题上看到了这个[StackOverflow 主题](https://stackoverflow.com/questions/6397052/how-do-i-get-my-app-to-show-up-in-the-open-in-popover-list-in-the-ipad)，我在 plist 文件中设置了必要的行，但我的应用程序仍然没有被提议。我怎样才能做到这一点 ？

这是我在 plist 中设置的代码：

```
<key>CFBundleDocumentTypes</key>
<array>
        <dict>
            <key>CFBundleTypeExtensions</key>
            <array>
                <string>pdf</string>
            </array>
            <key>CFBundleTypeIconFile</key>
            <string>app.icns</string>
            <key>CFBundleTypeName</key>
            <string>public.pdf</string>
            <key>CFBundleTypeRole</key>
            <string>Editor</string>
        <key>LSHandlerRank</key>
            <string>Owner</string>
            <key>LSItemContentTypes</key>
            <array>
                <string>public.pdf</string>
            </array>
    </dict>
        <dict>
            <key>CFBundleTypeExtensions</key>
            <array>
                <string>png</string>
            </array>
            <key>CFBundleTypeIconFile</key>
            <string>app.icns</string>
            <key>CFBundleTypeName</key>
            <string>public.png</string>
            <key>CFBundleTypeRole</key>
            <string>Editor</string>
            <key>LSHandlerRank</key>
            <string>Owner</string>
            <key>LSItemContentTypes</key>
            <array>
                    <string>public.png</string>
            </array>
        </dict>
</array> 
```

和

```
<key>UTImportedTypeDeclarations</key>
<array>
    <dict>
            <key>UTTypeConformsTo</key>
            <array>
                    <string>public.data</string>
            </array>
            <key>UTTypeIdentifier</key>
            <string>public.pdf</string>
            <key>UTTypeTagSpecification</key>
            <dict>
                    <key>com.apple.ostype</key>
                    <string>PDF</string>
                    <key>public.filename-extension</key>
                    <array>
                        <string>pdf</string>
                    </array>
                    <key>public.mime-type</key>
                    <string>application/pdf</string>
            </dict>
    </dict>
        <dict>
            <key>UTTypeConformsTo</key>
            <array>
                    <string>public.image</string>
            </array>
            <key>UTTypeIdentifier</key>
            <string>public.png</string>
            <key>UTTypeTagSpecification</key>
            <dict>
                    <key>com.apple.ostype</key>
                    <string>PNG</string>
                    <key>public.filename-extension</key>
                    <array>
                        <string>png</string>
                    </array>
                    <key>public.mime-type</key>
                    <string>image/png</string>
            </dict>
        </dict>
</array> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T22:57:01.613

看起来您所做的只是从您链接到的其他答案中复制这些条目。

对于 PDF 文件和 PNG 图像，您根本不需要第二部分（导入的声明）。这些是众所周知的文档类型。

对于文档类型，我只是这样做：

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeName</key>
        <string>PDF</string>
        <key>LSHandlerRank</key>
        <string>Alternate</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>com.adobe.pdf</string>
        </array>
    </dict>
    <dict>
        <key>CFBundleTypeName</key>
        <string>PNG</string>
        <key>LSHandlerRank</key>
        <string>Alternate</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>public.png</string>
        </array>
    </dict>
</array> 
```

# python - Python 建议如何使用嵌套函数改进我的课程

> ID：15057473
> 
> 赞同：0
> 
> 时间：2013-02-24T22:33:41.783
> 
> 标签：python, class, function, optimization, coding-style

我正在研究自己的班级指标

```
import numpy as np

class Metric(object):
    def __init__(self,*args):
        self.min = min(args)
        self.max = max(args)
        self.median = np.percentile(args,50)
        self.avg = sum(args)*1.0/len(args)
        self.len = len(args)
        self.std = np.std(args)
        self.var = np.var(args)
        self.IQR = np.percentile(args,75)-np.percentile(args,25)
        self.relief_ratio = (self.avg-self.min)*1.0/(self.max-self.min) 
```

我希望嵌套一个函数来计算峰度而不使用`from scipy.stats import kurtosis`. 按照这个例子，[峰度](https://stackoverflow.com/questions/13571198/why-is-my-kurtosis-function-not-producing-the-same-output-as-scipy-stats-kurtosi)公式是：

```
def avg(obs):
    return (1\. / len(obs)) * np.sum(obs)

def variance(obs):
    return (1\. / len(obs)) * np.sum((obs - avg(obs)) ** 2)

def kurt(obs):
    num = np.sum((obs - avg(obs)) ** 4)/ len(obs)
    denom = variance(obs) ** 2  # avoid losing precision with np.sqrt call
    return num / denom 
```

我的问题是：

1.  哪个是正确的 python 样式，我需要在课堂外还是在课堂内编写`avg`、、`variance`和`kurt`？
2.  如果里面哪个是最好的风格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T22:39:44.443

这些不是嵌套函数；它们只是相互调用的函数。嵌套函数是*包含*其他函数的函数。

我会把它们留在外面。这些函数不关心类中的大部分内容，它们具有简单的参数和返回值，可以在没有类上下文的情况下理解，并且对于独立于类的数字列表非常有用。为什么要把它们藏起来？

# css - 是否有唯一的 CSS 方法来完全隐藏部分溢出的元素？

> ID：15057478
> 
> 赞同：5
> 
> 时间：2013-02-24T22:34:11.903
> 
> 标签：css

想象一下，您有一个高度是浏览器窗口高度百分比的元素。该元素包含一堆块元素。

有没有办法使用类似`overflow: hidden`但确保最后一个块元素在溢出时完全隐藏而不是部分隐藏？

（用 JavaScript 很容易做到这一点，但我更喜欢用样式表来解决这个问题。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-04-24T20:38:07.477

这在 2013 年是不可能的，但现在所有 IE<=10 都死了，我们可以使用 flexbox。

基本思想是将弹性项目包裹在可见区域之外。

删除`overflow: hidden;`以查看物品的去向。

```
$('.parent').ready(function() {
  $('.parent').resizable();
})
```

```
* {
  box-sizing: border-box;
}
.parent {
  height:288px;
  width: 233px;
  border: 5px dashed blue;
  background: yellow;

  display: flex;
  flex-flow: column wrap;
  overflow: hidden;
}

.child {
  height: 100px;
  width: 100%;
  border: 5px solid brown;
}
```

```
<link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css" rel="stylesheet"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

<div class="parent">
<div class="child">0</div>
<div class="child">1</div>
<div class="child">2</div>
<div class="child">3</div>
<div class="child">4</div>
<div class="child">5</div>
<div class="child">6</div>
<div class="child">7</div>
<div class="child">8</div>
<div class="child">9</div>
</div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:43:16.013

好吧，基本上没有办法用纯 CSS 来做到这一点，除非你碰巧只为早期的 Internet Explorer 版本进行开发（使用表达式（））。

基本上，不再可能在样式表中运行 javascript（这实际上是您在样式表上执行所有这些操作的唯一选择）。

不过，在 Jquery 中做起来并不难：http: [//jsfiddle.net/bernie1227/wCx9N/](http://jsfiddle.net/bernie1227/wCx9N/)

该解决方案基本上只是利用：

```
pageWidth - (elementWidth + elementLeft) < 0 
```

为了检查元素是否溢出。

# ruby-on-rails - Rails 用户或组页面 Gem

> ID：15057483
> 
> 赞同：1
> 
> 时间：2013-02-24T22:34:39.723
> 
> 标签：ruby-on-rails, gem, static-pages

我正在寻找一个允许我的用户（和/或组）创建“页面”的能力的 rails gem。

我希望它与 pages.github.com 相似（如果不是几乎完全一样），我相信它使用了一个名为 Jekyll 的库。

我已经简要地研究了这个，但我无法找到更多......完整的解决方案。

有谁知道我正在寻找的解决方案？我想为我的模型组和用户配置它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:55:24.060

我不关心 Jekyll，但他的网站说“是一个支持博客的 Ruby 静态站点生成器”，我认为情况并非如此。

一种解决方案是将用户创建的页面存储到数据库中，您可以使用 Textile 和/或 RedCloth（而不是纯 HTML）。

有一个很好的 railscast 如何创建半静态页面，我相信你可以得到一些好主意： [http ://railscasts.com/episodes/117-semi-static-pages](http://railscasts.com/episodes/117-semi-static-pages)

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T23:29:32.647

你应该得到列出的 Gems
Devise + CanCan + Rolify

使用 Devies 对您的用户进行身份验证。
使用 CanCan 授权您的用户角色。
使用 Rolify 在您的用户上创建可以检查的角色。

然后只需制作一个通用页面模型，其中功能检查角色以查看用户是否可以读取、更新、创建或销毁。

# ruby - `x = x` 是在 Ruby 中初始化局部变量的记录或可接受的方式吗？

> ID：15057486
> 
> 赞同：1
> 
> 时间：2013-02-24T22:34:55.053
> 
> 标签：ruby

我注意到，在 Ruby 中，代码用未定义的if`x = x`初始化了一个局部变量。例如，这可以在 ERB 模板中用于检查是否定义了局部变量并具有“true-ish”值：`x``nil``x`

```
<% if header = header %>
  <h1><%= header %></h1>
<% end %> 
```

那么，这是一个功能还是一个错误？它是否记录在某处？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T22:44:07.530

这可能有效，但我认为它掩盖了你的意图。

如果您想检查是否定义了某些内容，那么您应该说

```
if defined?(header) && header 
```

但是在部分中，我通常会在模板开头默认所有值

例如（带火腿）

```
- # input header is optional
- header ||= nil

- if header
  %h1 This is the header

%p this is the rest of the partial 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-02-24T22:41:47.937

这既不是功能也不是错误。您可以通过调用它来简单地测试局部变量的真实性，就好像它没有初始化一样，默认情况下它会返回 nil。

```
<% if header %>
  <h1><%= header %></h1>
<% end %> 
```

# scala - “没有为 U 定义隐式排序”的错误，其中扩展了 Ordered 的特征

> ID：15057487
> 
> 赞同：3
> 
> 时间：2013-02-24T22:34:57.733
> 
> 标签：scala, traits

在创建一个名为 ScalaIDE 工作表后`test.WsTemp`，我编写了下面的代码，并且在 trait 中的一行收到三个错误`Enum`：

1.  `scala.math.Ordering[U]`以 trait 中排序的方法开头的类型的发散隐式扩展`LowPriorityOrderingImplicits`
2.  没有隐式`Ordering`定义`U`
3.  排序的方法没有足够的参数：`(implicit ord: scala.math.Ordering[U])List[U]`，未指定的值参数`ord`。

为什么这不起作用，因为它很明显`Val`extends `Ordered[Val]`？

```
object WsTemp {
  trait Val extends Ordered[Val] {
    val id: Int
    val name: String
    final def compare(that: Val) = this.id - that.id
    override def toString: String = name
  }

  trait Enum[U <: Val] {
    protected def init: Set[U]
    val all = init
    val allOrdered = all.toList.sorted       // <-- Receiving error here
    val byId = all.map(x => (x.id, x)).toMap
    val byName = all.map(x => (x.name, x)).toMap

    def apply(id: Int) = byId.get(id)
    def apply(name: String) = byName.get(name)
  }

  sealed class Value(val id: Int, val name: String) extends Val
  object Suit extends Enum[Value] {
    override def init: Set[Value] = //Set()
      Set(
          new Value(0, "Spade")
        , new Value(1, "Club")
        , new Value(2, "Diamond")
        , new Value(3, "Heart")
      )
    val Spade = Suit.byId(0)
    val Club = Suit.byId(1)
    val Diamond = Suit.byId(2)
    val Heart = Suit.byId(3)
  }

  val all = Suit.all
  val allOrdered = Suit.allOrdered
  val byId = Suit.byId
  val byName = Suit.byName
  val spade = Suit.Spade
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T23:42:49.120

`Ordering`和`Ordered`都是不变的，所以它`U`是 的子类型`Val`（由关系表示`U <: Val`）并不意味着`Ordering[Val]`可以用作`Ordering[U]`. 因此，即使`Val`extends`Ordered[Val]`意味着您隐含地获得了一个`Ordering[Val]`，但这并不意味着什么`Ordering[U]`。

所以编译器抱怨它找不到类型的隐式值`Ordering[U]`（这是调用所需的`sorted`）是正确的。

`Ordered`这个问题很容易用一个模仿and发生的小代码片段来说明`Ordering`：

```
object WsTemp {
  trait MyOrdered[T]

  trait MyOrdering[T]
  object MyOrdering {
    implicit def toOrdering[A <% MyOrdered[A]]: MyOrdering[A] = new MyOrdering[A]{}
  }

  trait Val extends MyOrdered[Val]

  def test[T](implicit ord: MyOrdering[T]) {}

  trait Enum[U <: Val] {
    def callTest() { test[U] }
  }
} 
```

这会产生以下错误：

```
<console>:20: error: could not find implicit value for parameter ord: WsTemp.MyOrdering[U]
           def callTest() { test[U] } 
```

但是如果你做`MyOrdered`和`MyOrdering`协变，这编译得很好：

```
trait MyOrdered[+T]      
trait MyOrdering[+T]
... 
```

显然，你不能改变 scala 的`Ordering`，也不`Ordered`能让它们保持不变。

* * *

现在，解决您的问题的一种方法是安排您的代码，以便`Val`不扩展`Ordered[Val]`，而是扩展`Ordered[X]`您`X`想要拥有的实际类型的位置`Ordering`（此处为`X`= `U`）。这可以通过*F 有界多态性*来实现：

```
trait Val[Self<:Val[Self]] extends Ordered[Self] {
  //...
}

trait Enum[U <: Val[U]] {
  //...
}

sealed class Value(val id: Int, val name: String) extends Val[Value]
//... 
```

`U`现在是 的子类型`Val[U]`，它是 的子类型`Ordered[U]`（与`Ordered[Val]`之前的子类型相反），所以你现在隐式地得到一个`Ordering[U]`，它（隐式地）传递给`sorted`. 问题解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-16T13:40:35.997

正如 Régis Jean-Gilles 所说，“Ordering 和 Ordered 都是不变的，因此 U 是 Val 的子类型（由关系 U <: Val 表示）这一事实并不意味着 Ordering[Val] 可以用作一个 Ordering[U]。所以即使 Val 扩展 Ordered[Val] 意味着你隐含地得到一个 Ordering[Val]，这对 Ordering[U] 没有任何意义。”

解决此问题的一种非常简单的方法是指定用于排序方法的类型。代替：

```
 val allOrdered = all.toList.sorted 
```

和：

```
 val allOrdered = all.toList.sorted[Val] 
```

# c++ - 在 32 位环境中链接到 32 位共享对象文件会生成 ELFCLASS64 错误

> ID：15057488
> 
> 赞同：0
> 
> 时间：2013-02-24T22:35:02.870
> 
> 标签：c++, linux, qt, linker, intel

**系统**：我在 i32 芯片组上运行 32 位 Ubuntu 12.04。

**构建信息**：我正在使用带有 Qt 4.8.1 和 GCC 的 C++ 11。

**问题**：我正在开发一个项目，该项目依赖于下文提到的内部开发库，称为**slug**。这些库通过传统的“cmake”内置到 .so 文件中。然后“全部制作”过程。从 cmake 生成 .so 文件后，我将 .so 文件复制到项目的子目录中，以便在将它们安装到 /usr/lib 之前测试它们是否正常工作。然后我为 Qt（在我的 .pro 文件中）提供每个库的绝对路径并构建我的应用程序。我的应用程序找到这些本地库并编译时没有错误或警告。但是，当我（通过命令行）运行我的应用程序时，我收到以下错误：

```
 error while loading shared libraries: libslugSpec.so: wrong ELF class: ELFCLASS64 
```

但是，当我在 64 位环境中构建 slug 库并在 64 位环境中链接到它们时，我的应用程序可以完美运行。所以，我想我为 64 位环境构建了 .so 文件，然后继续编辑用于构建库的 CMakeLists.txt 文件。除了 cuda（slug 依赖的）位标志之外，我还添加了许多 32 位编译和链接标志、共享对象模块标志。无论我尝试了何种标志组合，生成的库在运行我的应用程序可执行文件时都会导致错误。所以我决定对每个共享对象文件运行**readelf -h**命令并检查它们是否真的是 64 位的。我发现它们实际上都不是，都产生类似于以下内容的日志：（3个.so文件之一的输出）

```
readelf -h libslugSpec.so 
ELF Header:
Magic:   7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00 
Class:                             ELF32
Data:                              2's complement, little endian
Version:                           1 (current)
OS/ABI:                            UNIX - System V
ABI Version:                       0
Type:                              DYN (Shared object file)
Machine:                           Intel 80386
Version:                           0x1
Entry point address:               0x10150
Start of program headers:          52 (bytes into file)
Start of section headers:          511960 (bytes into file)
Flags:                             0x0
Size of this header:               52 (bytes)
Size of program headers:           32 (bytes)
Number of program headers:         7
Size of section headers:           40 (bytes)
Number of section headers:         38
Section header string table index: 35 
```

所以现在我完全不知所措，似乎无法在任何地方找到答案。任何关于如何发生这种情况的启示都将是一个巨大的帮助。

作为参考，以下是我在构建我的应用程序的 qt .pro 文件中提供的标志：

```
 QMAKE_CXXFLAGS += "-std=gnu++0x"

    QT  += core gui opengl
    TARGET = source
    TEMPLATE = app
    CONFIG+= wwwidgets

    #linux specific settings
    unix:!macx{
        LIBS +=  -lGLEW -lGLU  /home/alex/Dropbox/brain-viz/source/lib/libslugUtil.so /home/alex/Dropbox/brain-viz/source/lib/libslugSpec.so /home/alex/Dropbox/brain-viz/source/lib/libslugSim.so
    }

    #windows specific settings
    win32{
       LIBS += -lglew32 -lwwwidgets4d
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:55:49.253

此错误消息：

> 加载共享库时出错：libslugSpec.so：错误的 ELF 类：ELFCLASS64

与此输出*不一致*：

> ```
> readelf -h libslugSpec.so 
> ELF Header:
> Magic:   7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00 
> Class:                             ELF32 
> ```

结论：您加载的版本与您运行的版本*不同*。`libslugSpec.so``readelf -h`

通过执行以下操作找出在*运行* `libslugSpec.so`时加载的内容：

```
LD_DEBUG=files,libs /path/to/your/executable 
```

然后`readelf -h`在*该*库上运行，并确认它实际上是`ELF64`.

最后将其替换为您构建的版本（或设置`LD_LIBRARY_PATH`为在“系统”版本之前选择您的版本），问题将得到解决。

# javascript - 单引号插值

> ID：15057490
> 
> 赞同：0
> 
> 时间：2013-02-24T22:35:06.667
> 
> 标签：javascript

我在 Ruby on Rails 的 .erb 文件中有这个 Javascript 代码：

```
<script type="text/javascript">

...

function show_all_categories_terms_contents() {
  $('#categories_terms_root2').show();
  $('#categories_terms_root3').show();

...

</script> 
```

我需要执行一个循环来创建`#categories_terms_root`我需要的任意数量，而不是为每个添加一个新行。

我尝试了各种方法，但没有一个对我有用：

```
function show_all_categories_terms_contents() {
  for(int i=2; i<=6; i++)
    $(String.concat("#categories_terms_root", i)).show();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:55:37.037

它不起作用，因为您的 js 代码中有几个错误。以下代码应该可以工作：

```
function show_all_categories_terms_contents() {
  for(var i=2; i<=6; i++){
    $("#categories_terms_root" + i).show();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T23:08:38.070

解决问题的其他一些方法：

*   有一个容器元素，例如一个带有 ID 的 div `categories_terms_container`，那么你可以做`$('#categories_terms_container').children().each(function() { $(this).show(); });`

*   使用类，例如`<div id="categories_terms_root2" class="categories_terms_root">`并使用类选择器：`$('.categories_terms_root').each(...)`

*   使用“属性开始于”选择器，例如`$('[id^=categories_terms]').each(...)`

第三种选择效率最低。

# android - android项目损坏

> ID：15057500
> 
> 赞同：0
> 
> 时间：2013-02-24T22:36:02.380
> 
> 标签：android, eclipse

我刚刚在 eclipse 中编辑了我的项目中的一个布局文件，并且活动类中的某些内容已损坏，我在导入我的包时遇到了这个错误

```
The import com.Android.mysmartrecipeassistant.R cannot be resolved 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-18T04:24:45.457

这个问题的替代解决方案可能是......

如果您安装了较新版本的 ADT，将停止创建包含 R.java 的 gen 文件夹

解决方案是从 Android SDK Manager 安装新的 Android SDK 构建工具。

有时这可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T04:07:02.327

首先清理您的项目并查看 XML 文件中是否有任何错误，如果没有，然后检查项目中的“gen”文件夹，如果那里的包名称与您的包名称匹配。该错误很可能是由于 XML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-18T04:19:32.637

在您的项目**res**文件夹/子文件夹中，您放置了一些文件，其名称不是 android 标准，因此您收到错误。只需将文件名更改为可接受的名称即可。它会好起来的。像*my-file.xxx*这样的常见错误，在这种情况下使用**my_file.xxx**。

# scala - 在 Scala 运行时检查参数类型（来自可变长度参数列表）

> ID：15057502
> 
> 赞同：0
> 
> 时间：2013-02-24T22:36:09.787
> 
> 标签：scala, variadic-functions, runtime-type

我正在为一个可以接受规则以应用于给定数据结构的系统设计接口。

主系统应该作为接收命令的驱动程序工作，例如“将规则 X 应用于参数 U、V、W，...”。我在编译时不知道所有可能的规则，所以我想将参数类型信息嵌入到规则定义中并稍后验证它。

现在规则定义如下：

```
trait Rule {
  val argTypes: Seq[Class[_]]
  def apply(stt: State, args: Seq[Any])
} 
```

中的实际参数的`args`数量必须与中定义的类型的数量相匹配`argTypes`，并且该方法`apply`应该返回一个操纵状态。（实际上，这是简化的解释，但这是一般的想法）。

我还实现了一个函数`checkTypes`，用于验证实际参数的类型是否与`argTypes`.

```
def checkTypes(args: Seq[Any]) {
  if (argTypes.size != args.size) {
    val msg = "Number of arguments (%d) does not match expected number (%d)."
    throw new IllegalArgumentException(msg.format(args.size, argTypes.size))
  }
  val err = "Incompatible argument type for [%s]. Expected: %s. Found: %s."
  for (i <- 0 until argTypes.size) {
    val formalClass = argTypes(i)
    val arg = args(i)
    val actualClass = arg.asInstanceOf[AnyRef].getClass
    if (!(formalClass isAssignableFrom actualClass)) {
      val errMsg = err.format(arg, formalClass.getName, actualClass.getName)
      throw new IllegalArgumentException(errMsg)
    }
  }
} 
```

问题是，每当我尝试传递整数参数（从控制台或文本文件中读取）时，`checkTypes`程序都会失败并显示以下消息：`java.lang.IllegalArgumentException: Incompatible argument type for [1]. Expected: int. Found: java.lang.Integer.`

我正在转换整数参数，`Integer.parseInt(t).asInstanceOf[Int]`并且规则需要两个类型的参数`Int`

那么，有没有更有效的方法在运行时检查参数类型？

或者

我如何转换`String`为`Int`真实的？

提前致谢。

* * *

作为一个最小的工作示例，这是 Scala REPL 中引发异常的会话：

```
scala> val argTypes: Seq[Class[_]] = Seq(classOf[Int], classOf[Int])
argTypes: Seq[Class[_]] = List(int, int)

scala> def checkTypes(args: Seq[Any]) {
     |   if (argTypes.size != args.size) {
     |     val msg = "Number of arguments (%d) does not match expected number (%d)."
     |     throw new IllegalArgumentException(msg.format(args.size, argTypes.size))
     |   }
     |   val err = "Incompatible argument type for [%s]. Expected: %s. Found: %s."
     |   for (i <- 0 until argTypes.size) {
     |     val formalClass = argTypes(i)
     |     val arg = args(i)
     |     val actualClass = arg.asInstanceOf[AnyRef].getClass
     |     if (!(formalClass isAssignableFrom actualClass)) {
     |       val errMsg = err.format(arg, formalClass.getName, actualClass.getName)
     |       throw new IllegalArgumentException(errMsg)
     |     }
     |   }
     | }
checkTypes: (args: Seq[Any])Unit

scala> val args: Seq[Any] = Seq("1".toInt, "2".toInt)
args: Seq[Any] = List(1, 2)

scala> checkTypes(args)
java.lang.IllegalArgumentException: Incompatible argument type for [1]. Expected: int. Found: java.lang.Integer.
    at $anonfun$checkTypes$1.apply$mcVI$sp(<console>:20)
    at scala.collection.immutable.Range.foreach$mVc$sp(Range.scala:78)
    at .checkTypes(<console>:14)
    at .<init>(<console>:11)
    at .<clinit>(<console>)
    at .<init>(<console>:11)
    at .<clinit>(<console>)
    at $print(<console>)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at scala.tools.nsc.interpreter.IMain$ReadEvalPrint.call(IMain.scala:704)
    at scala.tools.nsc.interpreter.IMain$Request$$anonfun$14.apply(IMain.scala:920)
    at scala.tools.nsc.interpreter.Line$$anonfun$1.apply$mcV$sp(Line.scala:43)
    at scala.tools.nsc.io.package$$anon$2.run(package.scala:25)
    at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:13:03.407

`java.lang.Integer`装箱类型 ( ) 和未装箱类型 ( `scala.Int`== java )不匹配`int`。实际实例是装箱的，但您正在针对原始 classOf 对其进行测试。

下面是一个当原语被装箱时发生的例子：

```
scala> 5.getClass
res0: Class[Int] = int

scala> (5: Any)
res1: Any = 5

scala> res1.getClass
res2: Class[_] = class java.lang.Integer 
```

请注意，如果您进行模式匹配`Any`并获得一个原语，它实际上会挑选出装箱的副本并为您拆箱。

```
scala> res1 match { case i: Int => println(i); case _ => }
5 
```

既然你知道你*必须*被装箱，给定你写的代码，你也可以只检查`Integer`而不是`Int`（即使用`classOf[Integer]`）。

# view - 如何更改表达式引擎上的新用户注册表单？

> ID：15057505
> 
> 赞同：0
> 
> 时间：2013-02-24T22:36:19.510
> 
> 标签：view, registration, expressionengine

Expressionengine 2 附带的注册表单似乎有一个视图，但修改它似乎对前端没有任何作用。该文件是/system/expressionengine/views/members/register.php。

新用户注册表在哪里可以修改？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T16:35:59.667

前端模板是 /themes/profile_themes/(你选择的主题)/registration_form.html

您可以在 EE 中通过 Design -> Themes -> Member Profile Templates 进行编辑。

当大多数模板存储在数据库中时，我无法解释为什么这些是静态 HTML 文件。

更多信息，请访问 [http://ellislab.com/expressionengine/user-guide/cp/design/themes/member_profile_templates.html](http://ellislab.com/expressionengine/user-guide/cp/design/themes/member_profile_templates.html)

使用它的问题是你得到了相当粗制滥造的 EE 验证系统 - 一个带有验证消息的单独页面，你必须从该页面返回 (!) 以更正你的输入。它们还提供了自己的页眉 (html_header.php) 和页脚 (html_footer.php) 以及内联样式 (stylesheet.html)，尽管您可以在其中使用模板标签和片段等。

恕我直言，您最好编写自己的模板或使用插件。

# android - 布局 API 版本命名

> ID：15057509
> 
> 赞同：1
> 
> 时间：2013-02-24T22:36:32.723
> 
> 标签：android, android-layout

我不知道这是如何工作的：如果我创建了一个名为的文件夹`layout-v11`，这将适用于 v11 以上的所有 api 版本还是仅适用于 v11？第二个我可以创建文件夹命名`layout-v11-v14`为仅用于 v11 和 v14 API 的此布局吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T22:52:06.577

后缀指定资源将适用的最低版本。v11 表示 v11 及更高版本。v11 可以被更高级别的 v14 覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:51:58.440

好的，在尝试之后我发现它可以工作`upwards` ，例如，如果我们命名我们的文件夹`layout-v8`：

api = **7**的设备将使用默认`layout`文件夹。

将使用api >= **8的设备**`layout-v8`

现在看起来很容易。如果我犯了错误或有一些技巧 - 请在评论中写下。

# c# - 全景图是如何实现的？我需要创建一个垂直的，类似于诺基亚地图

> ID：15057513
> 
> 赞同：1
> 
> 时间：2013-02-24T22:36:49.987
> 
> 标签：c#, silverlight, windows-phone, nokia

背景：

我是 Silverlight/Windows 手机的新手。

我想创建类似诺基亚地图（windows phone 8 版本）的东西。在诺基亚地图中，当你点击搜索，得到搜索结果时，页面被分成两部分，上面是地图，下面是结果，你可以用手指在地图和结果之间滚动.

我最初的解决方案是：制作一个有 2 行的网格，并动态更改（使用带有样条移动的 DoubleAnimation）网格行的高度。例如，显示地图时，最下面一行的高度会缩小，而当最下面一行显示时，地图的高度就会缩小。

然而我很快发现这可能不是诺基亚地图的实现方式。例如，如果我在顶行制作地图，并且当顶行的高度缩小时，地图的位置仍然在中心附近（它移动但速度比缩小行的速度慢），这意味着地图本身并不像诺基亚地图那样“向上滚动”。更重要的是，如果地图上有一个Popup（如诺基亚地图中的当前位置按钮），Popup 也不会卷起。

嗯，理论上，上面还是可以通过强制map来解决的，而且Popup也会在网格行高变化的过程中向上滚动。但是经过一番对比和观察，我觉得诺基亚地图的上下移动就像一个全景图，垂直画布更大，你只需要显示画布的顶部或底部即可。

这让我很好奇如何实现像垂直全景图这样的东西。

我的问题，

1.  在您看来，诺基亚地图可能是如何实现的？还有其他更简单的方法吗？
2.  是否可以将现有的全景控件自定义为垂直全景？
3.  如果我必须实现自己的，如何实现？我目前的想法是制作一个大画布并自己绘制所有内容？水平会不会太低？有没有什么好的方法可以用垂直行为重新实现全景图？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:02:38.473

我的建议是尝试选项 3。你可以有一个页面大小的画布。垂直放置地图控件和结果控件。然后您需要处理手势并调整每个控件的 Canvas.Top 属性以向上/向下移动它。

我知道说起来容易做起来难……但如果是我，我会尝试这种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T03:49:25.997

玩了一会儿，我认为它比垂直全景更简单。

您的断言是正确的，它没有调整地图的大小，而只是将其移出屏幕。

所以这是我的想法。

1.  我的信念是他们有一个有 2 行的 Grid，两者的最小高度都约为 100px 左右（尚未检查实际值）。这个缓冲区是为了让您在向上或向下滑动一个“屏幕”时可以看到另一个“屏幕”。底部屏幕仅在执行搜索后可见。然后，有一个点击和拖动处理代码，可以调整网格的整体上边距以上下滑动。这是根据手指位置的变化来完成的。
2.  不，我非常确信您将不得不手动进行此操作。
3.  请参阅我在答案 1 中的想法。

我希望这是有道理的。这是一个棘手的问题，但我觉得这是在正确的道路上。

# jquery - 如何在 PHP 中的 jQuery Flexigrid 中添加、编辑和删除一行？

> ID：15057517
> 
> 赞同：1
> 
> 时间：2013-02-24T22:37:22.570
> 
> 标签：jquery, jquery-plugins, flexigrid

我正在使用 jQuery Flexigrid。我没有找到足够的文档来支持 Flexigrid。我在网格中添加了一个按钮。单击按钮时，我无法获得“添加/编辑”表单。我的代码如下。

```
<script type="text/javascript">
    var $nf = jQuery.noConflict();
</script> 
```

### 柔性网格代码

```
colModel : [{display: 'Sub Sub Category Code', name : 'sub_sub_category_code', width : 170, sortable : true, align: 'left'},
            {display: 'Category Code', name : 'category_code', width : 110, sortable : true, align: 'left'},
            {display: 'Sub Category Code', name : 'sub_category_code', width : 140, sortable : true, align: 'left'},
            {display: 'Sub Sub Category Name', name : 'sub_sub_category_name', width : 170, sortable : true, align: 'left'},
            {display: 'Status', name : 'status', width : 48, sortable : true, align: 'left'}
           ],
buttons  : [{name: 'Add', bclass: 'add', onpress : test},
            {name: 'Edit', bclass: 'edit', onpress : test},
            {name: 'Delete', bclass: 'delete', onpress : test},{separator: true}
           ], 
```

### 用于添加/编辑和删除的 jQuery 代码

```
function getid(com,grid){
    var id='';
    $('.trSelected', grid).each(function() {
        id = $(this).attr("id");
        id = id.substring(id.lastIndexOf('row')+3);
    });
    alert(id);
    return id;
}
$nf(document).ready(function(){
    //Define configuration object
    var dialogAdd = {
         modal: true,
         bgiframe: true,
         autoOpen: false,
         height: 370,
         width: 640,
         draggable: true,
         resizeable: true,
         open: function(com,grid) {
             //Display correct dialog content
             $("#formadd").load("../FlexiAdd.php");
         }
    };
    $nf("#formadd").dialog(dialogAdd); //End dialog
    var dialogEdit = {
         modal: true,
         bgiframe: true,
         autoOpen: false,
         height: 370,
         width: 640,
         draggable: true,
         resizeable: true,
         open: function(com,grid) {
             //Display correct dialog content
             $("#formedit").load("../FlexiAdd.php?id="+getid()+"");
         }
    };
    $nf("#formedit").dialog(dialogEdit); //End dialog
});

function test(com,grid)
{
    if (com=='Delete')
    {
        if($('.trSelected',grid).length>0){
            if(confirm('Delete ' + $('.trSelected',grid).length + ' items?')){
                var items = $('.trSelected',grid);
                var itemlist ='';
                for(i=0;i<items.length;i++){
                    itemlist+= items[i].id.substr(3)+",";
                }
                $.ajax({
                    type: "POST",
                    dataType: "json",
                    url: "delete.php",
                    data: "items="+itemlist,
                    success: function(data){
                        alert("Query: "+data.query+" - Total affected rows: "+data.total);
                        $(".sub_sub_category").flexReload();
                    }
                });
            }
        } else {
             return false;
        }
    }
    else if (com=='Add')
    {
        $nf("#formadd").dialog('open');
    }
    else if (com=='Edit')
    {
        if($('.trSelected',grid).length>0){
            $nf("#formedit").dialog('open');
        }
        else {
            return false;
        }
    }
} 
```

### HTML 代码

```
<table class="sub_sub_category" id="sub_sub_category" style="display: none"></table>

<br /><br />

<div id="formadd" style="display:none" title=""></div>
<div id="formedit" style="display:none" title=""></div> 
```

我不确定的一件事是我的 jQuery 是否正确。我试图修复它两天，因为我是 jQuery 的新手，而且我没有找到足够的 Flexigrid 文档，我无法修复它。我该如何解决这个问题？

# jquery-plugins - 单独页面上的锚点打开元素不起作用？

> ID：15057518
> 
> 赞同：0
> 
> 时间：2013-02-24T22:37:24.640
> 
> 标签：jquery-plugins, anchor, target

我试图让我的缩略图锚点打开到不同的页面，但在特定的元素处。我认为它不起作用，因为页面上有一个 jquery 插件，元素存在于其中，我找不到定位它们的方法。当您单击图像时，它会在序列中的第一个打开，但不会在请求的图像上打开。如何解决？

请在此处查看我的页面[http://intelligentsia.com/melissafranklin.com/index.html](http://i-n-t-e-l-l-i-g-e-n-t-s-i-a.com/melissafranklin.com/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:49:37.560

标签的 href 属性应该与标签`<a>`的 src 属性匹配`<img>`

用这个：

```
<a href="images/paintings/7copy.jpg">
  <img src="images/paintings/7copy.jpg" alt="">
</a> 
```

而不是这个：

```
<a href="paintings.html">
  <img src="images/paintings/7copy.jpg" alt="">
</a> 
```

# iphone - 在 iOS 中，如何在设备旋转时移动 UI 元素？

> ID：15057520
> 
> 赞同：1
> 
> 时间：2013-02-24T22:37:59.667
> 
> 标签：iphone, ios, objective-c

在 iOS 中，当设备从纵向模式旋转到横向模式时，如何移动 UI 元素（按钮和标签）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:52:17.360

有很多方法。

就我而言，我正在使用通知

`[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications]; [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(rotated:) name:UIDeviceOrientationDidChangeNotification object:nil];`

旋转方式

```
-(void) rotated: (NSNotification*) notification
{
    orientation = [[UIDevice currentDevice] orientation];
        if(UIDeviceOrientationPortraitUpsideDown==orientation) 
// UI relocation
else if(UIDeviceOrientationPortrait==orientation)
// UI relocation
else if(UIDeviceOrientationLandscapeRight==orientation)
// UI relocation
else if(UIDeviceOrientationLandscapeLeft==orientation)
// UI relocation
} 
```

# c++ - 使用makefile有什么好的理由吗？

> ID：15057521
> 
> 赞同：2
> 
> 时间：2013-02-24T22:38:05.397
> 
> 标签：c++, makefile

在 C++ 中，我可以使用编写所有编译指令的 shell 脚本来实现相同的结果。所以我的问题是：

使用makefile有什么好的理由吗？

你有什么例子可以证明这一点吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-24T22:40:07.843

使用 makefile 的主要原因之一是它只会重新编译自上次构建项目以来已更改的源文件。编写一个 shell 脚本来做到这一点比编写 makefile 需要更多的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:41:08.613

1.  键盘磨损。
2.  防止编译所有内容需要很长时间
3.  在编译调试和生产之间更容易改变

至于示例 - 查看大多数用 C/C++ 编写的 GNU 项目

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T22:45:19.477

您可能想看看自动工具。他们将为您制作一个 Makefile，同时它们也可以帮助您实现代码可移植性。但是，您必须制作一些相对简单的模板文件，自动工具将使用这些模板文件来构建配置文件，并且最终用户可以运行 ./configure [options]; 制作。它们为您的 makefile 提供了最终用户可能期望的许多功能。有关好的介绍，请参见：[http ://www.freesoftwaremagazine.com/articles/brief_introduction_to_gnu_autotools](http://www.freesoftwaremagazine.com/articles/brief_introduction_to_gnu_autotools)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T22:47:13.320

假设您确实编写了一个 shell 脚本。它会起作用，你会很高兴。每次有机会，您都会继续使用它。您将向其添加参数以允许您指定选项。您还会注意到它一直在重新编译所有内容。因此，您将尝试使其更智能，以便仅重新编译已更改的文件。实际上，您将要做的是编写自己的 make 系统。

只要你有充分的理由这样做就可以了。例如：现有的 make 解决方案不能很好地解决 X，因此您编写了一个来解决该问题。

但是，您没有现有的 make 系统无法解决的问题（或者至少，听起来您没有 :) ）。你试图解决的问题已经解决了。只需阅读并使用解决方案 - 一个 make 文件 :)

因此，要回答您的问题，是的，有很多 - 在您需要该功能之前，您不会意识到其中的大部分。当你这样做时，你会感激它已经做了你想要的。

这与您在代码中使用库的逻辑相同。

# c++ - FileReader 问题 C++

> ID：15057525
> 
> 赞同：0
> 
> 时间：2013-02-24T22:38:14.773
> 
> 标签：c++, file

关于我之前在这里发布的一个[老问题](https://stackoverflow.com/questions/15056905/strcat-alternative-issue-c/15057000#comment21170026_15057000)，我询问了我在 FileOpen 函数上遇到的一个问题。这个新问题与第二部分有关：FileReader。

我进行了更改，但仍然存在编译器错误。

这是麻烦的代码：

```
FILE *FileReader(FILE *fname){
    ifstream inputFile;
    inputFile.open(fname);

    if(inputFile){
        string line = "";
        //int num_chars;

        while(getline(inputFile, line)){
            //num_chars = strlen(text) + 1;
            //line = (string *)malloc(sizeof(string)*num_chars)
            int i = 0;
            if(i <= 3 ){
                storString[i] = line;
                storage[i] = atoi(storString[i].c_str());
                i++;
            }
            else{
                string firstTwo = line.substr(0,1);
                const int hex = atoi(firstTwo.c_str());
                setOperations(hex);
                string commandOne = firstTwo.substr(0,0); //first part of command
                string commandTwo = firstTwo.substr(1,1); //second part of command and n-i flags
                string restFlags = line.substr(2,2); //xbpe flags
                rest = line.substr(3);
                int disp = atoi(rest.c_str());

                if(format == "fmt2"){
                    string rOne = line.substr(2,2);
                    int registerOne = atoi(rOne.c_str());
                    string rTwo = line.substr(3,3);
                    int registerTwo = atoi(rTwo.c_str());
                    registerOperation(hex, registerOne, registerTwo);
                    break;
                }
                setFlags(commandTwo, restFlags, disp);
            }
        }
    }
} 
```

输出以下错误：

a1/a1.cpp：在函数中`FILE* FileReader(FILE*)`：
a1/a1.cpp:338：错误：没有匹配函数调用`std::basic_ifstream<char, std::char_traits<char> >::open(FILE*&)`
/opt/local/bin/../lib/gcc/sparc-sun-solaris2.10/3.4.6 /../../../../include/c++/3.4.6/fstream:570：注意：候选人是：`void std::basic_ifstream<_CharT, _Traits>::open(con st char*, std::_Ios_Openmode)`[with _CharT = char, _Traits = std::char_traits]

编辑：

请参阅那些注释掉的行。我也尝试了这些，但不知道如何实现它们。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:50:23.270

[http://www.cplusplus.com/reference/fstream/ifstream/open/](http://www.cplusplus.com/reference/fstream/ifstream/open/)

```
inputFile.open is being passed a `FILE *` but needs `const char *` 
```

尝试将其传递给硬编码的字符串，例如`"some_file.txt"`或传递给它一个实际的`const char *`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T22:55:14.277

inputfile.open() 方法需要一个 c 风格的文件名字符串作为参数；它也可以是一个将该名称存储为值的变量。假设文件名为 inputFile.txt，您可以执行以下操作：

```
inputFile.open("inputFile.txt"); 
```

你也可以这样做：

```
string fileName = "inputFile.txt";
inputFile.open(fileName.c_str()); 
```

另外，关于代码后面部分的注释：`if(inputfile)`使用 is_open() 方法而不是 using 。所以，你会写`if(inputfile.is_open())`. 该方法返回一个布尔值，取决于打开文件是否成功。

# c# - 带证书的上传文件方法

> ID：15057526
> 
> 赞同：1
> 
> 时间：2013-02-24T22:38:26.100
> 
> 标签：c#, webclient

我想知道你是否可以伸出援助之手。我被这段代码卡住了，给了我以下错误：“请求被中止：无法创建 SSL/TLS 安全通道。”

我已经使用正确的证书向 WebClient 类添加了一个覆盖方法：

```
class MyWebClient : WebClient
{
    protected override WebRequest GetWebRequest(Uri address)
    {
        HttpWebRequest request = (HttpWebRequest)base.GetWebRequest(address);
        request.ClientCertificates.Add(new X509Certificate("E:\\NY Cert.cer"));
        return request;
    }
    public WebRequest asd(Uri addr)
    {
        return this.GetWebRequest(addr);
    }
} 
```

我需要使用证书将文件上传到 Web 服务器。所以我试图使用 WebClient UploadFile 方法

```
WebClient my = new WebClient();
        byte[] responseArray = my.UploadFile("Web Server URL", "POST", "File"); 
```

# vb.net - 计时器滴答处理程序未运行

> ID：15057542
> 
> 赞同：5
> 
> 时间：2013-02-24T22:40:02.447
> 
> 标签：vb.net, timer

我对 VB.net 完全陌生，我正在尝试运行一个半中间脚本来检查某些文件是否打开。当它第一次打开时，它会检查一个特定的程序，然后它将继续在计时器上检查不同的程序。但是；当我运行代码时，Sub Timer1 从不运行，我将它设置为每 20 秒运行一次。

```
Imports System.Net
Imports System.Text.RegularExpressions

Public Class Form1

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        If (Process.GetProcessesByName("PROGRAM1").Length >= 1) Then
            MessageBox.Show("This Client is already running!", "IG Error", MessageBoxButtons.OK, MessageBoxIcon.Stop)
            Environment.Exit(0)
        Else
            Process.Start(System.IO.Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "program.exe"))
            '''' OPEN PROGRAM ABOVE ''''
        End If
        For Each frm As Form In Application.OpenForms
            frm.WindowState = FormWindowState.Minimized
        Next frm
    End Sub

    Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
        If (Process.GetProcessesByName("PROGRAM2").Length >= 1) Then 'CHECK FOR PROGRAM
            MessageBox.Show("Program is running!", "IG Error", MessageBoxButtons.OK, MessageBoxIcon.Stop)
            Environment.Exit(0)
            Form3.Show()
        Else
            MessageBox.Show("Program is not running!")
        End If
    End Sub
End Class 
```

以上是我已经拥有的代码.. 我的计时器子要么没有运行，要么不是每 20 秒检查一次。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T00:02:35.157

定时器的常见错误是：

1.  您需要使用 timer.enabled 或 timer.start 来启动它。

2.  您可能需要在刻度处理程序中重置计时器，具体取决于计时器的类型和属性设置。（有定时器控件system.timers.timer和system.threading.timer，每一个都有点不同。）

3.  您可能需要在刻度处理程序中暂时禁用它，以确保它不会重新进入处理程序并导致问题。

4.  如果您需要在计时器运行时等待，最好使用 system.threading.thread.sleep 而不是循环。

# java - 活动窗口而不显示或将其置于顶部

> ID：15057544
> 
> 赞同：1
> 
> 时间：2013-02-24T22:40:34.133
> 
> 标签：java, window, jna, user32

我想要一个我找不到的功能希望允许激活一个窗口而不显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:48:57.283

如果这个窗口是[java.awt.Window](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html)的子类，你可以调用[setVisible](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#setVisible%28boolean%29)来隐藏它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T00:58:52.510

终于找到了答案：

最小化的窗口不能处于活动状态，并且有一种方法可以与隐藏的窗口通信（如果没有使用消息最小化）

# c++ - 从浮点数转换为自定义数字类型

> ID：15057546
> 
> 赞同：4
> 
> 时间：2013-02-24T22:40:44.483
> 
> 标签：c++, floating-point, type-conversion

我已经创建了自己的固定类型整数类型，并且该库可以在许多编译器和平台上正常工作，唯一要解决的问题是将内置浮点类型转换为我的类型。

浮点类型可能有小尾数，但与指数一起它可能有很大的价值，所以如果我选择强制转换`float`,`double`或`long double`say to`long long`或`unsigned long long`可能会发生截断。

如果编译器使用 IEEE-754 规范，则很容易提取尾数和指数，但如果编译器使用其他格式怎么办。

所以，我的问题是：是否有任何通用算法允许我仅使用语言特征从浮点中提取全部值？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T23:24:09.233

您可能会发现[我对此处类似问题的回答](https://stackoverflow.com/a/14955046/968261)很有用。这个想法是，如果底层格式是二进制的，那么如果尾数中的位不超过最大整数类型中的位，则几乎可以保证能够毫无损失地提取尾数和指数。您可以使用`double frexp(double value, int *exp);`and`double ldexp(double x, int exp);`为目的。

另一种选择是`sprintf()`使用`%a`数字来获取所有数字，然后手动将文本表示转换为您需要的。

# javascript - 带有 jQ uery 的动态 div，在点击时显示内容

> ID：15057555
> 
> 赞同：4
> 
> 时间：2013-02-24T22:41:10.157
> 
> 标签：javascript, jquery

我一直在尝试[在这个站点上进行演示](http://www.designgala.com/demos/collapse-expand-jquery.html)。我有问题。这是代码：

```
jQuery(document).ready(function() {
  jQuery(".content").hide();
  jQuery(".heading").click(function() {
    jQuery(this).next(".content").slideToggle(500);
  });
});

var el = document.createElement('div');
el.className = "heading";
el.innerHTML = "whatever you want";
$('.listResults').append(el);

var el2 = document.createElement('div');
el2.className = "content";
el2.innerHTML = "whatever you want shown";
$('.listResults').append(el2);
jQuery(".content").hide(); 
```

HTML 有一个带有类的 div `listResults`，所有内容都被附加到该类中。目前javascript在加载后运行，所以我在`jQuery.hide`它`.content`生成后调用它。

问题是，当我单击其中一个标题 div 时，它不会下拉内容。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:52:32.577

试试这个

```
$('.listResults').on('click', '.heading',  function(){
    // whatever you want
});

var el = $('<div/>', {
    'class' : 'heading',
    'html' : 'whatever you want'
});
$('.listResults').append(el); 
```

[**演示。**](http://jsfiddle.net/DLEBf/)

或者你也可以试试这个

```
var el = $('<div/>', {
    'class' : 'heading',
    'html' : 'whatever you want',
    'click' : function(){
        // whatever you want, you can use $(this)
    }
});

$('.listResults').append(el); 
```

[**演示**。](http://jsfiddle.net/DLEBf/1/)

**更新：**这将为每个 div 创建单独的事件处理程序，并且会消耗更多内存，因此不建议这样做，但如果您有几个 div 可以使用。

[更新了 Demo-1](http://jsfiddle.net/DLEBf/2/)和[更新了 Demo-2。](http://jsfiddle.net/DLEBf/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:44:46.980

您在运行时创建 div，因此请使用实时绑定，请在此处阅读有关实时的信息

[http://api.jquery.com/live/](http://api.jquery.com/live/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T22:50:36.547

我不会使用 live 方法，它在 1.9 中被折旧和删除。您最好的选择是在创建 div 时使用“on”方法。[http://api.jquery.com/on/](http://api.jquery.com/on/)

# ruby-on-rails - 带有多个选项的 Active Record 查询“where”

> ID：15057557
> 
> 赞同：0
> 
> 时间：2013-02-24T22:41:27.870
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

如果可能的话，我想减少这个查询：

```
@orders_in_progress = user.orders.where("state = ? OR state = ? OR state = ?, "Waiting for Payment Authorization", "Paid", "Shipped") 
```

我正在寻找的是这样的：

```
@orders_in_progress = user.orders.where("state = ?", "Waiting for Payment Authorization" || "Paid" || "Shipped) 
```

另外，我对这里的术语有点困惑——这是“一个元素的多个条件的 ActiveRecord 查询”吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T22:49:07.580

你可以这样做：

```
@orders_in_progress = user.orders.where(state: ["Waiting for Payment Authorization", "Paid", "Shipped"]) 
```

它将生成“in”查询，但它的工作方式与您原来的查询相同。

此外，您可能需要考虑将状态更改为更简单的状态（想到“待处理”、“已付款”、“已发货”）并使用翻译生成对人类友好的版本。

# php - 如何获取位数组中所有设置位的偏移量？

> ID：15057559
> 
> 赞同：-1
> 
> 时间：2013-02-24T22:41:35.450
> 
> 标签：php, c, ruby, offset, bitarray

在 C、Ruby 或 PHP 中，如何获取位数组中所有设置位的偏移量。例如：

```
Bitarray:  1 0 0 1 0
Offset:    5 4 3 2 1
Yields 2 and 5.

10001 => {1,5}
11 => {1,2}
1001001 => {1,4,7} 
```

最明显的解决方案是首先做一个反向的 Find first set 以了解长度，然后遍历位，保存偏移量/索引。然而，这似乎不是很聪明。像 FFSR 这样多次减法可能会更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T23:28:52.453

我想出了这个。我已经使用二进制移位运算来确定是否存在二进制“1”或“0”。可能您可以使用此代码作为您的起点。

```
#include <stdio.h>

int main()
{
    int number;
    int counter = 1;

    printf("Please input the number to get the offsets: ");
    scanf("%d", &number);

    printf("The required positions of ones: ");
    while ((number != 0))
    {
        if ((number % 2) != 0)
        {
            number = number >> 1;
            printf("%d", counter);
        }
        else 
        {
            number = number >> 1;
        }   

        counter++;  
    }

    return 0;
} 
```

这是一个扩展版本，它也打印二进制表示：

```
#include <stdio.h>
#include <strings.h>

char* rev(char* str);

int main()
{
    int number, temp;
    int counter = 1;
    char str[32] = "";

    printf("Please input the number to get the offsets: ");
    scanf("%d", &number);
    temp = number;

    printf("Binary representation: ");
    while ((temp != 0))
    {
        if ((temp % 2) != 0)
        {
            temp = temp >> 1;
            strncat(str, "1", 1);
        }
        else 
        {
            temp = temp >> 1;
            strncat(str, "0", 1);
        }       
    }
    printf("%s", rev(str));

    printf("\nThe required positions of ones: ");
    while ((number != 0))
    {
        if ((number % 2) != 0)
        {
            number = number >> 1;
            printf("%d", counter);
        }
        else 
        {
            number = number >> 1;
        }   

        counter++;  
    }

    getch();
    getch();
    return 0;
}    

char* rev(char* str)
{
  int end= strlen(str) - 1;
  int start = 0;

  while( start<end )
  {
    str[start] ^= str[end];
    str[end] ^=   str[start];
    str[start]^= str[end];

    ++start;
    --end;
  }

  return str;
} 
```

# jsf - 为什么会有不同的bean管理注解

> ID：15057564
> 
> 赞同：42
> 
> 时间：2013-02-24T22:41:57.233
> 
> 标签：jsf, cdi, managed-bean

和有什么区别

```
import javax.annotation.ManagedBean;
import javax.enterprise.context.SessionScoped; 
```

和

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped; 
```

?

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-25T00:06:46.807

1.  `javax.enterprise.context.SessionScoped`( [JSR 346](http://www.jcp.org/en/jsr/detail?id=346) ) 和包下的所有其他注释`javax.enterprise.context.*`维护[CDI](http://www.cdi-spec.org/)的上下文。CDI 为 Java EE 空间内的依赖注入、bean 和通用资源管理提供了一种替代的、通用的和更强大的机制。它是 JSF 托管 bean 的替代方案，甚至将在[即将到来的 JSF 版本中](http://jdevelopment.nl/jsf-22/)取代 JSF bean 管理机制。

    目前，JSF 和 CDI 注释 bean 在任何给定的 Java EE Web 应用程序中都是可互换的（考虑到一些小的限制）。然而，CDI 注释 bean 远远超出了 Web 层的范围，这就是 Java EE 规范不断发展以使 CDI 成为标准 bean 和 DI 机制的原因。

    虽然 CDI 可能是所有 Java EE 开发的明显选择，但 JSF 托管 bean 可跨 servlet 容器 (Tomcat) 和应用程序服务器（Glassfish、JBoss 等）移植。CDI bean 只能存在于完整的应用程序服务器中。然而，通过[一些工作](http://www.theserverside.com/tutorial/Working-with-CDI-and-JSF-20-on-Tomcat-7-Configuring-Weld)，Tomcat 7 可以连接以支持 CDI。

    具体来说，`javax.enterprise.context.SessionScoped`是 CDI 中 JSF Session Scope 的并行实现。

2.  `javax.faces.bean.SessionScoped`( [JSR 314](http://www.jcp.org/en/jsr/detail?id=314http://www.jcp.org/en/jsr/detail?id=314) ) 和包下的所有其他注解都`javax.faces.bean.*`维护 JSF 特定的依赖注入和 bean 管理机制。然而，使用 JSF 注释注释的 Bean 仅在 Web 层中有用。JSF 注释可用的所有范围都已在 CDI 规范中复制。

3.  `javax.annotation.ManagedBean`( [JSR 316](http://www.jcp.org/en/jsr/detail?id=316) ) 和其他与 DI 相关的注释`javax.annotation.*`是试图将基于 JSF 的注释概括为 Java EE 规范中的其他用途，最终开发人员实际上不应该使用这些注释。

它们为什么存在？好吧，IMO，从 JSF bean 到 CDI bean 的转变是该技术的自然演变。JSF bean 运行良好，但 Spring、Guice 和 Seam 之类的技术明显表明该技术还不够。还需要弥合 Web 组件和 EJB 之间的差距，而 CDI 就是对这种需求的回应。

也请参阅这些相关问题：

*   [JSF：支持 bean (@ManagedBean) 还是 CDI Bean (@Named)？](https://stackoverflow.com/q/4347374/1530938)
*   [Java EE 6 @javax.annotation.ManagedBean 与 @javax.inject.Named 与 @javax.faces.ManagedBean](https://stackoverflow.com/q/11986847/1530938)

# android - 从由 BroadcastReceiver 启动的 Service 更新 ProgressBar

> ID：15057565
> 
> 赞同：0
> 
> 时间：2013-02-24T22:42:14.653
> 
> 标签：android, service, progress-bar, broadcastreceiver

这是场景：我有一个广播接收器，它监听 ACTION_PHONE_STATE_CHANGED，当它改变时它启动一个服务。该服务对 CallLog 进行查询，当某些事情增加时，我想在 MainActivity 上的几个 ProgressBar 上显示它，但我该怎么做呢？

我正在考虑创建一个应用程序类，它是 MainActivity 和服务的子类，然后我可以有相应的引用，还是我错了？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T23:08:32.550

有一些可能：

1.  您的服务可以发送广播（[sendBroadcast](http://developer.android.com/reference/android/content/Context.html#sendBroadcast%28android.content.Intent%29)），您的活动只需要根据您在服务上实现的注册一个广播接收器。像这样的东西：

您的服务：

```
 Intent intent=new Intent(getApplicationContext(),WebResults.class);
 intent.setAction("com.toxy.LOAD_URL");
 intent.putExtra("url",uri.toString());
 sendBroadcast(intent); 
```

您的活动：

```
 private class Receiver extends BroadcastReceiver {

 @Override
 public void onReceive(Context arg0, Intent arg1) {

     String url = arg1.getExtras().getString("url");
     WebView webview =(WebView)findViewById(R.id.webView);
     webview.loadUrl(url);
 } 
```

这个链接可以帮助你：[http ://www.vogella.com/articles/AndroidBroadcastReceiver/article.html](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html)

第二种方法是在您的服务上注册一个侦听器并在您的服务上通知该侦听器。

在您的服务中：

```
void onSomethingHappened()
{
     activityListener.notifyProgressBar();
}

void subscribe(YourInterface listener)
{
     actibityListener =  listener;
} 
```

在您的活动中，启动您的服务后：

```
service.subscribe(this); 
```

但是，要采用更好的解决方案，您应该考虑您的服务实现（类型）。

这个关于[AndroidService](http://developer.android.com/guide/components/services.html)的链接很有用。

# java - 如何从 .jar 文件中访问与 .jar 文件位于同一文件夹中的 .dat 文件？

> ID：15057570
> 
> 赞同：0
> 
> 时间：2013-02-24T22:43:30.450
> 
> 标签：java, file-io, executable-jar

我需要读取和写入 .dat 文件以保存我正在开发的游戏的高分。这一切都在 Eclipse 中工作，但是当我将其转换为可运行`.jar`文件时，没有`.dat`文件可以保存我的分数。如何从我的文件中访问`.dat`与我的文件位于同一文件夹中的文件以保存我的分数？`.jar``.jar`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T02:55:30.870

一般来说，尝试写入运行 jar 文件的位置是一个非常糟糕的主意。如果 jar 文件作为 Web 应用程序从 .war 文件中运行，会发生什么情况？在这种情况下，您无法写入 jar 文件的位置。

您应该修改程序以查看环境变量、java .properties 文件或命令行参数（或全部 3 个）来告诉它在哪里写入输出，然后在执行时提供合适的输出位置。

# php - call_user_func_array 的替代方案

> ID：15057573
> 
> 赞同：2
> 
> 时间：2013-02-24T22:43:48.487
> 
> 标签：php, performance, optimization

我必须`call_user_func_array()`在我的 PHP 脚本中使用。虽然它看起来非常慢。有没有其他选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T23:17:02.800

使用与直接调用函数时性能存在差异`call_user_func_array`，但并没有那么大（大约慢 15 倍）。除非您使用它数千次，否则您不会注意到它。

要回答您的问题，您可以自己构建一个：

```
function call($fn, array $args = array()){

  $numArgs = count($args);

  if($numArgs < 1)
    return $fn();

  if($numArgs === 1)  
    return $fn($args[0]);

  if($numArgs === 2)  
    return $fn($args[0], $args[1]);

  // ...

  return call_user_func_array($fn, $args);
} 
```

还有[`ReflectionFunction::invokeArgs`](http://www.php.net/manual/en/reflectionfunction.invokeargs.php)（和[`ReflectionMethod::invokeArgs`](http://www.php.net/manual/en/reflectionmethod.invokeargs.php)）：

```
$reflector = new ReflectionFunction($fn);
return $reflector->invokeArgs($args); 
```

另一种解决方案（可能是最好的解决方案）是让您的函数接受带有参数的数组......

# ruby-on-rails - Rails，实体未更新

> ID：15057574
> 
> 赞同：0
> 
> 时间：2013-02-24T22:43:51.237
> 
> 标签：ruby-on-rails, activerecord, rails-activerecord

我有一些名为“组”的实体和一些基本[CRUD](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete)操作的控制器。我面临的问题是，当我尝试更新（编辑）这个实体时，它没有得到更新。我只是为此使用[update_attributes ：](http://apidock.com/rails/ActiveRecord/Base/update_attributes)

```
def update
  group = Group.find(params[:id])
  group.update_attributes! params[:group]
  render :json => group.to_json()
end 
```

这是我在 WEBrick 控制台中得到的：

```
Started PUT "/groups/264.json?$$hashKey=00J&_method=PUT&group_id=null&item_sufix=null&key=null&name=ddddddddd&subgroups=" for 127.0.0.1 at 2013-02-25 00:32:03 +0200
Processing by GroupsController#update as JSON
  Parameters: {"$$hashKey"=>"00J", "group_id"=>"null", "item_sufix"=>"null", "key"=>"null", "name"=>"ddddddddd", "subgroups"=>"", "id"=>"264", "group"=>{}} 
```

我想问题是为什么 params[:group] 是空的。但是为什么会发生这种情况，因为我们可以看到所有需要的字段（在这种情况下为：name）都带有请求？在组模型中我确实有`attr_accessible :name`

至于路由（实际上不知道它们是否与我的问题有关），我的 config/routes.rb 中有此实体的单行：

```
resources :groups 
```

这是“组”实体的路线摘要：

```
 groups GET    /groups(.:format)                 groups#index
                 POST   /groups(.:format)                 groups#create
       new_group GET    /groups/new(.:format)             groups#new
      edit_group GET    /groups/:id/edit(.:format)        groups#edit
           group GET    /groups/:id(.:format)             groups#show
                 PUT    /groups/:id(.:format)             groups#update
                 DELETE /groups/:id(.:format)             groups#destroy 
```

Rails 版本：Rails 3.2.11

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:23:24.930

您的 "group"=>{} 应该包装您的其他婴儿车，例如姓名

"group"=>{"name"=>"dddddddddd", "subgroups"=>"", "id"=>"264"}

这告诉我你提交的论点是错误的。

尝试传递您的婴儿车，例如 group[name]=dddddddddd 和 group[id]=264

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T22:47:55.600

您不能使用 Group 作为模型名称，因为它与 ActiveRecord 组冲突。将 Group 更改为 XGroup 并重试。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T02:17:14.963

找到解决方案。控制台输出：

```
Parameters: {"$$hashKey"=>"00J", "group_id"=>"null", "item_sufix"=>"null", "key"=>"null", "name"=>"ddddddddd", "subgroups"=>"", "id"=>"264", "group"=>{}} 
```

说参数是发送的，但它没有说明它们是如何发送的。这就是让我震惊的原因。我认为如果 rails 可以看到这些参数，它们就会以正确的方式发送。当我检查时 - 此参数是常规 POST 参数（可以从我放置请求 url 的原始帖子中看到），而 rails 要求此参数位于请求正文（有效负载）中。这就是为什么内部`group`仍然是空的。

# java - 将串行通信数据添加到实时 Java 图

> ID：15057580
> 
> 赞同：1
> 
> 时间：2013-02-24T22:44:35.020
> 
> 标签：java, serial-port, arduino, real-time, jfreechart

现在我有一个可以读取串行数据的 Java 文件，它只是在控制台中打印它。在另一个文件中，我有一个[JFreeChart](http://en.wikipedia.org/wiki/JFreeChart)图表，它可以将随机数据生成到实时图表中。

这些文件都在同一个项目中。如何将串行数据添加到实时图表，而不是我现在使用的随机数据？

下面的第一个代码是实时图的文件。

```
public class test224 extends ApplicationFrame implements ActionListener {
    String s;
    String tempbuff;
    private TimeSeries series;

    private double lastValue = 10.0;

    private Timer timer = new Timer(1000, this);
    DynamicTimeSeriesCollection dataset;
    float[] newData = new float[1];

    public test224(final String title) {
        super(title);
        this.series = new TimeSeries("Sensor Value", Millisecond.class);

        final TimeSeriesCollection dataset = new TimeSeriesCollection(this.series);
        final JFreeChart chart = createChart(dataset);
        timer.setInitialDelay(1000);
        chart.setBackgroundPaint(Color.LIGHT_GRAY);
        final JPanel content = new JPanel(new BorderLayout());
        final ChartPanel chartPanel = new ChartPanel(chart);
        content.add(chartPanel);
        chartPanel.setPreferredSize(new java.awt.Dimension(800, 500));
        setContentPane(content);
        timer.start();
    }

    private JFreeChart createChart(final XYDataset dataset) {
        final JFreeChart result = ChartFactory.createTimeSeriesChart(
            "Dynamic Line Chart of Arduino Data",
            "Zeit",
            "Wert",
            dataset,
            true,
            true,
            false
        );

        final XYPlot plot = result.getXYPlot();

        plot.setBackgroundPaint(new Color(0xffffe0));
        plot.setDomainGridlinesVisible(true);
        plot.setDomainGridlinePaint(Color.lightGray);
        plot.setRangeGridlinesVisible(true);
        plot.setRangeGridlinePaint(Color.lightGray);

        ValueAxis xaxis = plot.getDomainAxis();
        xaxis.setAutoRange(true);

        xaxis.setFixedAutoRange(60000.0);
        xaxis.setVerticalTickLabels(true);

        ValueAxis yaxis = plot.getRangeAxis();
        yaxis.setRange(0.0, 300.0);

        return result;
    }

    public void actionPerformed(final ActionEvent e) {
        final double factor = 0.9 + 0.2*Math.random();
        this.lastValue = this.lastValue * factor;

        final Millisecond now = new Millisecond();
        this.series.add(new Millisecond(), this.lastValue);
    }

    public static void main(final String[] args) {
        final test224 demo = new test224("Dynamic Line And TimeSeries Chart");
        demo.pack();

        RefineryUtilities.centerFrameOnScreen(demo);
        demo.setVisible(true);
    } 
```

在执行的操作中是生成随机数据的地方。然后在另一个文件的这段代码中，这会将 Arduino 串行数据打印到控制台，那么我怎样才能让它显示在实时图表中呢？

```
public synchronized void serialEvent(SerialPortEvent oEvent) {
    if (oEvent.getEventType() == SerialPortEvent.DATA_AVAILABLE) {
        try {
            inputLine=input.readLine();
            System.out.println(inputLine);

        }
        catch (Exception e) {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:42:19.340

您需要通过合并类将您的内容移动`serialEvent`到您`actionPerformed`的方法中，或者提供一个可以从包含您的串行事件的类中调用的`public addDataPoint(double point)`方法。`test224`我认为无论哪种情况，您都需要将 serialEvent 中的处理移动到单独的线程中。

你可以尝试这样的事情：

```
@Override
public void actionPerformed(final ActionEvent e) {

  //Initialise the serial port here before starting the new thread

  Runnable task = new Runnable() {

    @Override
    public void run() {
        if (oEvent.getEventType() == SerialPortEvent.DATA_AVAILABLE) {
            try {
                inputLine = input.readLine();
                System.out.println( inputLine );
                final Millisecond now = new Millisecond();
                series.add(new Millisecond(), Double.parseDouble(inputLine));  

            } catch (Exception e) {                             
            }
        }
    }
  };
  Thread serialThread = new  Thread(task);
  serialThread.start();
} 
```

`public addDataPoint(double point)`当您保持关注点分离时，该解决方案更可取。

```
public synchronized void serialEvent(SerialPortEvent oEvent) {
    if (oEvent.getEventType() == SerialPortEvent.DATA_AVAILABLE) {
        try {
            inputLine=input.readLine();
            System.out.println(inputLine);
            dataChart.addPoint(Double.parseDouble(inputLin));

        } catch (Exception e) {                             
        }
    }
} 
```

您仍然需要确保在单独的线程上监视串行点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:21:24.553

如果不将调用包装在`Runnable`适合的`invokeLater()`. 此[示例](https://stackoverflow.com/a/7519403/230513)`TableModel`从匿名后台线程更新 a 。

更好的是，使用 a ，如此[处](https://stackoverflow.com/a/4637725/230513)`SwingWorker`所示。您可以在方法和有用的结果中操作串口，确信在[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上运行。`doInBackground()``publish()``process()`

# java - 如何将韩文（韩文）写入文件？

> ID：15057584
> 
> 赞同：2
> 
> 时间：2013-02-24T22:44:57.107
> 
> 标签：java, character-encoding

我试图在同一个文件中写出英语、日语和韩语。

这就是我所做的：

```
new File("genned/test123.txt").write("안녕하세요　hello こんにち", "utf8") 
```

结果文件最终包含`�壱��們┷��hello縲�％繧薙↓縺｡`

我需要做什么才能让韩语和日语正确显示？

更新：我试过这个：

```
File file = new File("genned/test123.txt");
PrintWriter out = new PrintWriter(new OutputStreamWriter(
    new FileOutputStream(file), "UTF-8"));
out.println("日本");
out.close(); 
```

输出是：`譌･譛ｬ`

并在十六进制编辑器中查看字节为：`E8 AD 8C EF BD A5 E8 AD 9B EF BD AC 0A`

更新：

当我尝试打印字符串`"\u65E5\u672C"`时，文件正确地以字符串结尾`日本`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T22:51:17.827

检查**编辑器**和**java 编译器**中的编码是否相同“UTF-8”。

```
File file = new File("genned/test123.txt");
PrintWriter out = new PrintWriter(new OutputStreamWriter(
    new FileOutputStream(file), "UTF-8"));
out.println("안하세요　hello こんにち");
out.close(); 
```

* * *

***更新后：***

检查源是否为 UTF-8。例如，使用[JEdit](http://www.jedit.org)一个具有多种编码的免费程序员编辑器。并用`javac -encoding UTF-8 ...`.

我的猜测是编辑器没问题（因为它代表日文和韩文，所以编译器可能仍然使用默认的平台操作系统编码。

如果使用 eclipse 查看 Windows / Preferences / General / Workspace / Text file encoding。和项目设置。

# algorithm - 如何用二叉索引树（BIT）找到一定长度的递增子序列的总数

> ID：15057591
> 
> 赞同：6
> 
> 时间：2013-02-24T22:45:33.263
> 
> 标签：algorithm, data-structures, sequence, fenwick-tree, binary-indexed-tree

如何使用二进制索引树（BIT）找到一定长度的递增子序列的总数？

实际上这是[Spoj Online Judge的问题](http://www.spoj.com/problems/INCSEQ/)

**示例**
假设我有一个数组`1,2,2,10`

长度为 3 的递增子序列是`1,2,4`和`1,3,4`

所以，答案是`2`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T00:25:43.637

让：

```
dp[i, j] = number of increasing subsequences of length j that end at i 
```

一个简单的解决方案是`O(n^2 * k)`：

```
for i = 1 to n do
  dp[i, 1] = 1

for i = 1 to n do
  for j = 1 to i - 1 do
    if array[i] > array[j]
      for p = 2 to k do
        dp[i, p] += dp[j, p - 1] 
```

答案是`dp[1, k] + dp[2, k] + ... + dp[n, k]`。

现在，这可行，但是对于给定的约束来说效率很低，因为`n`可以达到`10000`. `k`足够小，所以我们应该尝试找到一种方法来摆脱`n`.

让我们尝试另一种方法。我们还有`S`- 我们数组中值的上限。让我们尝试找到与此相关的算法。

```
dp[i, j] = same as before
num[i] = how many subsequences that end with i (element, not index this time) 
         have a certain length

for i = 1 to n do
  dp[i, 1] = 1

for p = 2 to k do // for each length this time
  num = {0}

  for i = 2 to n do
    // note: dp[1, p > 1] = 0 

    // how many that end with the previous element
    // have length p - 1
    num[ array[i - 1] ] += dp[i - 1, p - 1]   

    // append the current element to all those smaller than it
    // that end an increasing subsequence of length p - 1,
    // creating an increasing subsequence of length p
    for j = 1 to array[i] - 1 do        
      dp[i, p] += num[j] 
```

这具有复杂性`O(n * k * S)`，但我们可以`O(n * k * log S)`很容易地减少它。我们所需要的只是一个数据结构，它可以让我们有效地求和和更新一个范围内的元素：[段树](http://en.wikipedia.org/wiki/Segment_tree)、[二叉索引树](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=binaryIndexedTrees)等。

# python - Python在python中随机化多个选择

> ID：15057596
> 
> 赞同：0
> 
> 时间：2013-02-24T22:45:48.053
> 
> 标签：python, random

我尝试做的是以不同的顺序将 question1 随机化到 question20，当它随机化时，我也可以在问题中输入我的答案。每次我尝试使用 randomise 语句时，它总是充满错误或意图错误。代码现在要做的是按顺序打印问题。我所要做的就是用 if 和 elif 语句将问题随机化

{py}

```
name = raw_input("Hello what is your name? ")

print "Hi " + name

ready = raw_input("Are you ready to do the test?(Please enter YES/NO)")

while ready.lower() != "yes":
ready = raw_input("Are you ready to do the test?(Please enter YES/NO)")

if ready.lower() == "yes":
    print "Excelent! The test will start in any second. "
if ready.lower() == "no":
    print "Okay, tell me when you're ready. "
elif ready.lower() != "yes" and "no":
    print "It okay if your're not sure. The test can start in any time you want. "

count = 0

if ready.lower() == "yes":

question1 = raw_input("\nQuestion 1\nWhat is your a?\n \nA\nB\nC\nD\n\nPlease enter A, B, C or D: ")
if question1.lower() == "a":
    print "Correct"
    count = count + 1
elif question1.lower() != "a":
    print "Wrong"

question2 = raw_input("\nQuestion 2\nWhat is your b?\n \nA\nB\nC\nD\n\nPlease enter A, B, C or D:")
if question2.lower() == "a":
    print "Correct"
    count = count + 1
elif question2.lower() != "a":
    print "Wrong"

question3 = raw_input("\nQuestion 3\nWhat is your c?\n \nA\nB\nC\nD\n\nPlease enter A, B, C or D:")
if question3.lower() == "a":
    print "Correct"
    count = count + 1
elif question3.lower() != "a":
    print "Wrong"

question4 = raw_input("\nQuestion 4\nWhat is your d?\n \nA\nB\nC\nD\n\nPlease enter A, B, C or D:")
if question4.lower() == "a":
    print "Correct"
    count = count + 1
elif question4.lower() != "a":
    print "Wrong"

question5 = raw_input("\nQuestion 5\nWhat is your e?\n \nA\nB\nC\nD\n\nPlease enter A, B, C or D:")
if question5.lower() == "a":
    print "Correct"
    count = count + 1
elif question5.lower() != "a":
    print "Wrong"

question6 = raw_input("\nQuestion 6\nWhat is your f?\n \nA\nB\nC\nD\n\nPlease enter A, B, C or D:")
if question6.lower() == "a":
    print "Correct"
    count = count + 1
elif question6.lower() != "a":
    print "Wrong"

question7 = raw_input("\nQuestion 7\nWhat is your g?\n \nA\nB\nC\nD\n\nPlease enter A, B, C or D:")
if question7.lower() == "a":
    print "Correct"
    count = count + 1
elif question7.lower() != "a":
    print "Wrong"

question8 = raw_input("\nQuestion 8\nWhat is your h?\n \nA\nB\nC\nD\n\nPlease enter A, B, C or D:")
if question8.lower() == "a":
    print "Correct"
    count = count + 1
elif question8.lower() != "a":
    print "Wrong"

question9 = raw_input("\nQuestion 9\nWhat is your i?\n \nA\nB\nC\nD\n\nPlease enter A, B, C or D:")
if question9.lower() == "a":
    print "Correct"
    count = count + 1
elif question9.lower() != "a":
    print "Wrong"

question10 = raw_input("\nQuestion 10\nWhat is your j?\n \nA\nB\nC\nD\n\nPlease enter A, B, C or D:")
if question10.lower() == "a":
    print "Correct"
    count = count + 1
elif question10.lower() != "a":
    print "Wrong"

question11 = raw_input("\nQuestion 11\nWhat is your k?\n \nA\nB\nC\nD\n\nPlease enter A, B, C or D:")
if question11.lower() == "a":
    print "Correct"
    count = count + 1
elif question11.lower() != "a":
    print "Wrong"

question12 = raw_input("\nQuestion 12\nWhat is your l?\n \nA\nB\nC\nD\n\nPlease enter A, B, C or D:")
if question12.lower() == "a":
    print "Correct"
    count = count + 1
elif question12.lower() != "a":
    print "Wrong"

question13 = raw_input("\nQuestion 13\nWhat is your m?\n \nA\nB\nC\nD\n\nPlease enter A, B, C or D:")
if question13.lower() == "a":
    print "Correct"
    count = count + 1
elif question13.lower() != "a":
    print "Wrong"

question14 = raw_input("\nQuestion 14\nWhat is your n?\n \nA\nB\nC\nD\n\nPlease enter A, B, C or D:")
if question14.lower() == "a":
    print "Correct"
    count = count + 1
elif question14.lower() != "a":
    print "Wrong"

question15 = raw_input("\nQuestion 15\nWhat is your o?\n \nA\nB\nC\nD\n\nPlease enter A, B, C or D:")
if question15.lower() == "a":
    print "Correct"
    count = count + 1
elif question15.lower() != "a":
    print "Wrong"

question16 = raw_input("\nQuestion 16\nWhat is your p?\n \nA\nB\nC\nD\n\nPlease enter A, B, C or D:")
if question16.lower() == "a":
    print "Correct"
    count = count + 1
elif question16.lower() != "a":
    print "Wrong"

question17 = raw_input("\nQuestion 17\nWhat is your q?\n \nA\nB\nC\nD\n\nPlease enter A, B, C or D:")
if question17.lower() == "a":
    print "Correct"
    count = count + 1
elif question17.lower() != "a":
    print "Wrong"

question18 = raw_input("\nQuestion 18\nWhat is your r?\n \nA\nB\nC\nD\n\nPlease enter A, B, C or D:")
if question18.lower() == "a":
    print "Correct"
    count = count + 1
elif question18.lower() != "a":
    print "Wrong"

question19 = raw_input("\nQuestion 19\nWhat is your s?\n \nA\nB\nC\nD\n\nPlease enter A, B, C or D:")
if question19.lower() == "a":
    print "Correct"
    count = count + 1
elif question19.lower() != "a":
    print "Wrong"

question20 = raw_input("\nQuestion 20\nWhat is your t?\n \nA\nB\nC\nD\n\nPlease enter A, B, C or D:")
if question20.lower() == "a":
    print "Correct"
    count = count + 1
elif question20.lower() != "a":
    print "Wrong"

print "\n|Congratulation!", name, ". You complete the test."
print "|Here's your result."
print "|Total score: " + str(count) + "/20"
division = float(count)/float(20)
multiply = float(division*100)
result = round(multiply)
print "|Total percentage is", int(result), "%"

if result >= 95:
    print ("|Grade: A+ \n|Well done!")

elif result >= 80:
    print ("|Grade: B \n|Good job!")

elif result >= 65:
print ("|Grade: C \n|You did okay.")

elif result >=50:
    print ("|Grade: D \n|Wow! That was close. You nearly fail.")

elif result >= 0:
    print ("|Grade: Fail\n|You should study more.") 
```

{py} 我想要的是......

```
>>> 
Hello what is your name? bob
Hi bob
Are you ready to do the test?(Please enter YES/NO)no
Are you ready to do the test?(Please enter YES/NO)no
Okay, tell me when you're ready. 
Are you ready to do the test?(Please enter YES/NO)no
Okay, tell me when you're ready. 
Are you ready to do the test?(Please enter YES/NO)no
Okay, tell me when you're ready. 
Are you ready to do the test?(Please enter YES/NO)no
Okay, tell me when you're ready. 
Are you ready to do the test?(Please enter YES/NO)asdasda'
It okay if your're not sure. The test can start in any time you want. 
Are you ready to do the test?(Please enter YES/NO)hi
It okay if your're not sure. The test can start in any time you want. 
Are you ready to do the test?(Please enter YES/NO)yes
Excelent! The test will start in any second. 

Question 2
What is your b?

A
B
C
D

Please enter A, B, C or D:a
Correct

A
B
C
D

Please enter A, B, C or D:b
Wrong

Question 10
What is your j?

A
B
C    
D

Please enter A, B, C or D:b
Wrong

Question 11
What is your k?

A
B
C
D

Please enter A, B, C or D:b
Wrong

Q1.....

|Congratulation! bob . You complete the test.a

|Here's your result.

|Total score: 8/20

|Total percentage is 40 %

|Grade: Fail

|You should study more. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T22:52:58.757

我建议您使用字典来执行此操作，格式为 { *question number* : [ *answer* , *question* ], ...}: `q_and_a = {1: ['a', 'What is k?'], 2: ['b', 'What is c?'], ...}`。

然后，您可以从中创建一个键列表，并打乱该列表。

```
import random
q_and_a = {1: ['a', 'What is k?'], 2: ['b', 'What is c?'], ...}
questions = q_and_a.keys()
random.shuffle(questions)
for i in questions:
    my_msg = "\nQuestion " + str(i) + q_and_a[i][1] + "\nA\nB\C\nD"# gets the question
    answer = raw_input(my_msg)
    while answer != q_and_a[i][0]:
        print('Incorrect! Try again!')
        answer = raw_input(my_msg) 
```

一些参考资料：

*   [字典](http://docs.python.org/2/tutorial/datastructures.html#dictionaries)
*   [`random.shuffle(x)`](http://docs.python.org/2/library/random.html#random.shuffle)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-26T05:47:25.140

```
from random import sample
d = {1: 'question A', 2: 'question B', 3: 'question C', 4: 'question D',
    5: 'question E', 6: 'question F', 7: 'question G'}
for result in [d.get(x, 'unknown') for x in sample(range(1,len(d)+1),len(d))]:
print result 
```

# ruby-on-rails - Unicorn - 使用 HUP 实现零停机？

> ID：15057598
> 
> 赞同：2
> 
> 时间：2013-02-24T22:45:54.007
> 
> 标签：ruby-on-rails, ruby, unicorn

我对独角兽零停机所需的条件感到困惑，更具体地说，如果它与 preload_app 选项无关。我知道如果我的 preload_app 为 false，我可以简单地发送一个 HUP 信号，然后 unicorn 会自动考虑新代码，但它会以零停机时间的方式进行吗？

另外，如果内存不是问题，我是否需要使用 preload_app true ？

最后，我看到很多例子，其中有一个大的 fork 块，其中包含有关 oldpid 的代码。何时需要此代码？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T02:56:44.897

我设置它的方式是`kill -USR2 $(cat /path/to/unicorn.pid)`在重新启动独角兽服务器时使用类似的东西，在我的独角兽服务器配置中，类似这样的东西（基于[http://unicorn.bogomips.org/examples/unicorn.conf.rb](http://unicorn.bogomips.org/examples/unicorn.conf.rb)）：

```
# feel free to point this anywhere accessible on the filesystem
pid "#{shared_path}/pids/unicorn.pid"
before_fork do |server, worker|
  # the following is highly recomended for Rails + "preload_app true"
  # as there's no need for the master process to hold a connection
  defined?(ActiveRecord::Base) and
  ActiveRecord::Base.connection.disconnect!

  # This allows a new master process to incrementally
  # phase out the old master process with SIGTTOU to avoid a
  # thundering herd (especially in the "preload_app false" case)
  # when doing a transparent upgrade. The last worker spawned
  # will then kill off the old master process with a SIGQUIT.
  old_pid = "#{server.config[:pid]}.oldbin"
  if old_pid != server.pid
    begin
      sig = (worker.nr + 1) >= server.worker_processes ? :QUIT : :TTOU
      Process.kill(sig, File.read(old_pid).to_i)
    rescue Errno::ENOENT, Errno::ESRCH
    end
  end
end 
```

这将启动新工人并逐渐关闭旧工人。

# string - int*string 列表 fsharp

> ID：15057600
> 
> 赞同：-3
> 
> 时间：2013-02-24T22:46:13.037
> 
> 标签：string, list, f#, int

我将如何操作以下 int*string 列表以获取列表中的“字符串”部分作为我的输出？

```
let item =[
 (12,"sausages");
 (3,"chips");
 (5,"burger");
 (19,"cheese");
 (24,"milk");
 (44,"eggs");
 ] 
```

我从 listfilter 开始。有人可以建议如何正确过滤吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T23:03:43.723

简单的方法：

```
item |> List.map snd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T23:01:08.090

```
item |> List.map (fun (_, y) -> y) 
```

# django - Django：ModelMultipleChoiceField 获取表单中的绑定字段值显示名称 clean

> ID：15057602
> 
> 赞同：1
> 
> 时间：2013-02-24T22:46:21.030
> 
> 标签：django

是否可以在其 clean 方法中获取 ModelMultipleChoiceField 中每个选项的显示值？

给定以下对字段 tagsUser 的清理：

```
def clean_tagsUser(self):
    tu = self.cleaned_data['tagsUser']
    data = self['tagsUser']
    print 'data:', data
    return tu 
```

我得到以下输出：

```
data: <select multiple="multiple" name="tagsUser">
<option value="9" selected="selected">test 1</option>
<option value="20">test 2</option>
<option value="105">test 3</option>
<option value="373" selected="selected">test 4</option> 
```

修改 data = self['tagsUser'].values() 返回每个选定选项的所有值：

```
data: [u'9', u'373'] 
```

我需要获取每个选项的显示值，以便数据的输出为：

```
data: [u'test 1', u'test 2', u'test 3', u'test 4'] 
```

我发现这个[https://code.djangoproject.com/ticket/10427](https://code.djangoproject.com/ticket/10427)似乎暗示 data = self['tagsUser'].display_value 会做我想做的事。但是， display_value 似乎尚未实现。

临时解决方案：

```
data = self['tagsUser']
data_list = re.findall(r'<.*?>(.+?)<.*?>', str(data)) 
```

# bash - Shell脚本打印用户已登录的小时数和分钟数？

> ID：15057605
> 
> 赞同：1
> 
> 时间：2013-02-24T22:46:44.740
> 
> 标签：bash

我正在尝试使用 date 和 who 命令编写一个 shell 脚本来打印用户登录的小时数和分钟数。我可以假设它少于 24 小时。我该怎么做？

我想我会以某种方式从 date 命令和 who 命令中提取时间并以某种方式减去它们，但我不确定我将如何实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T23:03:26.937

```
#!/bin/bash

export LANG=C

date_string=$(
    who |
    sort -k3M -k4n |
    awk '{if ($1 ~ user) {print $3, $4, $5;exit}}' user="$1"
)
diff_seconds_between_date_and_now=$((
    $(date +%s) - $(date -d "$date_string" +%s)
))
printf "%s %s\n" "$((diff_seconds_between_date_and_now/3600)) hours" \
    "$((diff_seconds_between_date_and_now%3600/60)) minutes" 
```

我采用指定用户的最旧行：

用法 ：

```
$ bash script.bash <USERNAME> 
```

样本输出：

```
$ bash script.bash sputnick
528 hours 6 minutes 
```

# c++ - 重载 << 运算符不起作用；仍在打印对象地址

> ID：15057613
> 
> 赞同：1
> 
> 时间：2013-02-24T22:47:33.773
> 
> 标签：c++, operator-overloading, iostream

我正在尝试重载流运算符`<<`，但它仍然只是打印对象地址，而不是像我在重载函数定义中那样的对象信息。这是我的代码，我花了很长时间尝试我在网上可以找到的每个示例，但没有任何效果。请帮助减轻我的一些压力！谢谢。

间隔.h：

```
#ifndef INTERVAL_H
#define INTERVAL_H
#include <string>
#include <iostream>
#include <assert.h>

using namespace std;

class Interval {
    public:
        long start;
        long end;

        // Constructor
        Interval(long, long);

        // Deconstructor
        // Virtual to make sure that it calls the correct destructor
        virtual ~Interval();

        bool operator==(const Interval &other) const;
        bool operator!=(const Interval &other) const;
        bool operator<(const Interval &other) const;
        bool operator<=(const Interval &other) const;
        bool operator>(const Interval &other) const;
        bool operator>=(const Interval &other) const;
        friend ostream& operator<<(ostream& os, const Interval &i);

};
#endif 
```

间隔.cpp：

```
#include "Interval.h"
#include <iostream>
#include <string>

using namespace std;

Interval::Interval(long a, long b){
    // Assert that start is less than the end
    assert(a < b);
    start = a;
    end = b;
}

// Deconstructor
Interval::~Interval(){
}

bool Interval::operator==(const Interval &other) const{
    // Return true if both start and end are equal to other's
    if(start == other.start && end == other.end){
        return true;
    }else{
        return false;
    }
}

bool Interval::operator!=(const Interval &other) const{
    // Return true(not equal) if either the start or end are different
    if(start != other.start || end != other.end){
        return true;
    }else{
        return false;
    }
}
bool Interval::operator<=(const Interval &other) const{
    // Return true if the start is less than or equal other's start
    if(start <= other.start){
        return true;
    }
}

bool Interval::operator>(const Interval &other) const{
    // Return true if the end is greater than other's end
    if(end > other.end){
        return true;
    }
}

bool Interval::operator>=(const Interval &other) const{
    // Return true if the end is greater than or equal to other's end
    if(end >= other.end){
        return true;
    }
}

bool Interval::operator<(const Interval &other) const{
    // Return true if the start is less than other's
    if(start < other.start){
        return true;
    }
}

ostream& operator<<(ostream& os, const Interval &i){

    os << "Interval[" << i.start << ", " << i.end << "]" << endl;
    return os;
}

int main(void){
    Interval *test = new Interval(10,1000);
    cout << test << endl;
    cout << "test" << endl;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T22:48:44.593

`Interval*`是一个指针。您只是在输出地址。

尝试取消引用指针：

```
cout << *test << endl; 
```

或者试试这个：

```
Interval test(10, 1000);   // not a pointer.
cout << test << endl; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:49:47.703

```
Interval *test = new Interval(10,1000); 
```

在 C++ 中在堆栈上创建对象的语法是

```
Interval test(10,1000); 
```

除非有充分的理由，否则不要使用指针。

# java - solr安装问题

> ID：15057614
> 
> 赞同：1
> 
> 时间：2013-02-24T22:47:35.507
> 
> 标签：java, solr

嗨，我是一个相当新的程序员，他试图在 Mac osx 10.6.8 上安装 Solr。

我正在关注本教程： http: [//lucene.apache.org/solr/4_1_0/tutorial.html](http://lucene.apache.org/solr/4_1_0/tutorial.html)

仅有的两个要求是 Solr 版本和 Java 1.6 或更高版本。我已经安装了 Solr，并且用来`java -version`查看我的 java 版本是什么，是 1.6.0_33。

我已经 cd'd 进入 solr/solr/example 文件夹，它工作正常。然后我`java -jar start.jar`按照教程中的说明使用，但得到：

```
Unable to access jarfile start.jar 
```

为什么这样做？我的 java 版本是否如它所说的那样是最新的？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T23:22:10.870

如果您已经在`solr-4.1.0/example`目录中并且找不到任何`start.jar`，那么您机器上的 solr 副本很可能是不完整的。尝试再次下载并重做这些步骤。

# javascript - jsTree 对象没有方法 addBack

> ID：15057620
> 
> 赞同：4
> 
> 时间：2013-02-24T22:48:23.800
> 
> 标签：javascript, jquery, jstree

这是我的 jsTree 实例化代码。

```
$("#folder_tree").jstree({
    "themes" : {
        "theme" : "default",
        "dots" : true,
        "icons" : true
    },
    "json_data" : {
        "ajax" : {
            "url" : "/portal/folders",
            "data" : function(n) {
                if ($(n[0]).find("a").attr("id")) {
                    console.log($(n[0]).find("a").attr("id").split('_')[1]);
                    return {
                        "id" : $(n[0]).find("a").attr("id").split('_')[1]
                    };
                }
                return { "id" : "0" };
            }
        }
    },
    "plugins" : [ "themes", "json_data", "ui", "contextmenu", "dnd", "search", "crrm" ]
}).bind("select_node.jstree", function(e,data) {
    console.log(data.rslt.obj.context.id);
}); 
```

它在第一次加载时正确加载数据（0 情况），但是当我单击展开任何文件夹时，它给了我错误：

```
Uncaught TypeError: Object [object Object] has no method 'addBack' 
```

即使扩展节点的正确 id 被记录到控制台并且正确地向服务器发出 ajax 请求。另请注意，我必须使用相当可怕的工具来查找元素的 id，因为在尝试访问时记录的代码只会为我产生错误（而且我使用与文档相同版本的 jsTree）`n.attr("id")`. 另外，在`bind("select_node"...`我必须使用未记录的函数来再次查找 id 下。经过数小时的故障排除后，我仍然完全感到困惑，但显然有些东西运行不正常。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T02:02:48.847

确保您使用的是 jQuery 1.8 或更高版本。`addBack`直到那时才添加。

# c - 在 C 中读取十六进制输入时遇到问题

> ID：15057630
> 
> 赞同：1
> 
> 时间：2013-02-24T22:49:46.750
> 
> 标签：c, input, scanf, hex

我的强烈印象是我只是不明白 fscanf 是如何工作的。

我有一个格式如下的文本文件：

```
0x01
0x02
0x04
0x08
0x0F
0x1F
0x2F
0x4F 
```

我想阅读它们：

```
inline void read_inputs_from_ip_if(){

    if(fscanf(ipf,"%x",&input)==EOF){
        printf("Terminated.");
        exit(0);
    }

    fscanf(ipf,"%x",&input);
} 
```

但问题是，每当我在输入上使用打印语句时，它都会产生 0。我想连续读取每一行并在永无止境的 for 循环中执行一些决策逻辑。问题是它根本不会读入任何输入。

这是主要块：

```
ipf = fopen("input.txt","r");
for (; ; )
{
    read_inputs_from_ip_if();
    printf("Input: %x \n", input);
    control_action();
    write_output_to_op_if();
} 
```

正如我之前提到的，输入永远不会从 0 改变。我的印象是 fscanf，由于循环，会读取一个新行，直到它到达文件的末尾......现在我不太确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:59:20.440

采用 ：

```
 fscanf(ipf,"%x\n",&input); 
```

对于逐行阅读，因为您省略了结束行字符 ('\n') 然后，因为十六进制值是用大写字母格式化的，所以使用：

```
 fscanf(ipf,"%X\n",&input); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T23:10:06.110

您只是没有在程序中指定换行符的存在。

此外，您执行“fscanf”**两次**，以便程序每两行跳过一行。

```
#include <stdio.h>
#include <stdlib.h>

int input;
FILE *ipf;

inline void read_inputs_from_ip_if(){
    if(fscanf(ipf,"%x\n",&input)==EOF){
        printf("Terminated\n");
        exit(0);
    }
}

int main() {
        ipf = fopen("fscanf-data", "r");
        for(;;)
        {
                read_inputs_from_ip_if();
                printf("Datum: 0x%02x\n", input);
        }
        fclose(ipf);
        return 0;
} 
```

然而，我认为如果函数不依赖外部变量，并且不自行退出（或生成输出），而是向调用程序发出信号，你会做得更好。

```
#include <stdio.h>
#include <stdlib.h>

inline int read_inputs_from_ip_if(FILE *ipf) {
    int input;
    if (EOF == fscanf(ipf,"%x\n",&input)) {
        return EOF;
    }
    return input;
}

int main() {
        int input;
        FILE *ipf;
        ipf = fopen("fscanf-data", "r");
        if (NULL == ipf) {
            fprintf(stderr, "File not found\n");
            return -1;
        }
        for(;;) {
                input = read_inputs_from_ip_if(ipf);
                if (EOF == input) {
                     // We just exit the loop.
                     break;
                }
                printf("Datum: 0x%02x\n", input);
        }
        printf("Terminated.\n");
        fclose(ipf);
        return 0;
} 
```

无论哪种方式，输出都符合预期：

```
Datum: 0x01
Datum: 0x02
Datum: 0x04
Datum: 0x08
Datum: 0x0f
Datum: 0x1f
Datum: 0x2f
Datum: 0x4f
Terminated. 
```

# java - 来自单独线程类的 Android Toast 消息

> ID：15057631
> 
> 赞同：0
> 
> 时间：2013-02-24T22:49:47.777
> 
> 标签：java, android, multithreading, toast

我对如何使用 Toast 打印消息感到困惑。我需要用它来打印来自线程的 while 循环的消息。我渲染图形的线程与我的活动属于不同的类。我的意思是，它们没有在同一个文件中实现。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T23:03:58.710

您可以使用[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)：

```
myActivity.runOnUiThread(new Runnable() {

 public void run() {
    Toast.makeText(context, text, duration).show();
 }

}); 
```

# javascript - javascript FB.api 调用在 getLoginStatus 内部有效，不在外部

> ID：15057633
> 
> 赞同：1
> 
> 时间：2013-02-24T22:49:49.190
> 
> 标签：javascript, facebook, api

有人可以解释为什么 api('/me'... 调用在 getLoginStatus 块内工作并且在块外失败吗？

（当我说失败时，未定义的 response.name 以及其他所有内容）

我已经尝试在 fbAsyncInit 代码中以及在初始化完成后触发的回调中执行此操作，并且在这两种情况下， api('/me'... 调用仅在 getLoginStatus 块中有效。

在这两种情况下，我只能让 api('/me' 在 getLoginStatus() 块内工作。

注意：我没有遇到用户未连接的任何问题。

```
FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {
    var uid = response.authResponse.userID;
    var accessToken = response.authResponse.accessToken;
    console.info("connected");
    FB.api('/me', function(response) {
      // this works
      console.info("Name: "+ response.name + "\nFirst name: "+response.first_name+"");
    });                                
 } else if (response.status === 'not_authorized') {
              console.info("bad");
 }
});

FB.api('/me', function(response) {
  // response.name == 'undefined' 
  console.info("Name: "+ response.name + "\nFirst name: "+response.first_name+"");
}); 
```

# lambda - 使用 beta 归约找到范式

> ID：15057639
> 
> 赞同：1
> 
> 时间：2013-02-24T22:50:34.253
> 
> 标签：lambda, lambda-calculus

给定以下表达式：

```
((λx.λx.xx) (λx.xzx)) (λy.yy) 
```

我想使用 beta 减少找到它的正常形式。

我的计算：

```
((λx.λx.xx) (λx.xzx)) (λy.yy) ->
((λx.xzx)(λx.xzx)) (λy.yy) -> ((λx.xzx)z(λx.xzx)) (λy.yy) ->
(zzz (λx.xzx)) (λy.yy) -> ? 
```

但是我该如何从这里继续：

```
(zzz (λx.xzx)) (λy.yy) -> ? 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:12:52.270

用来`\`表示`λ`：

```
((\x.\x.xx) (\x.xzx)) (\y.yy) =
= ((*\x*.\x.xx) *(\x.xzx)*) (\y.yy) =
= (\x.( (\x.xzx) (\x.xzx) )) (\y.yy) =
= (\x.( (*\x*.xzx) *(\x.xzx)* )) (\y.yy) =
= (\x.( (\x.xzx) z (\x.xzx) )) (\y.yy) =
= (\x.( ( (\x.xzx) z) (\x.xzx) )) (\y.yy) =
= (\x.( ( (*\x*.xzx) *z*) (\x.xzx) )) (\y.yy) =
= (\x.( ( (zzz) (\x.xzx) ) (\y.yy) =
= (*\x*.( ( (zzz) *(\x.xzx)* ) (\y.yy) =
= (zzz) (\x.( (\y.yy) z (\y.yy) )) =
= (zzz) (\x.( ((\y.yy) z) (\y.yy) )) =
= (zzz) (\x.( ((*\y*.yy) *z*) (\y.yy) )) =
= (zzz) (\x.( (zz) (\y.yy) )) =
= (zzz) (\x.(zz)(\y.yy)) 
```

并且这里没有其他可用的应用程序 - 至少，只要您没有`z`.

另请注意，`x`最终展开式中有一个定义，您可能在计算过程中已将其隐藏。

所有变量 ( **λx** . **λx** . xx) 在表达式中都有共同点：

```
((*λx*.*λx*.xx) (λx.xzx)) (λy.yy) 
```

是他们的名字。尽管如此，它们是不同的变量。

# django - Django：易碎文件下载

> ID：15057644
> 
> 赞同：0
> 
> 时间：2013-02-24T22:51:45.800
> 
> 标签：django

我制作了一个简单的文件服务器，可以在我的树莓派（1/2 gb RAM，1 个 CPU）上运行。它在 nginx（1 个工作人员）后面的 gunicorn（3 个工作人员）下运行。

我有一个奇怪的问题，当我尝试同时下载太多文件（比如 5 个）时，它们都会部分通过然后中止。django 服务器没有输出（我也使用开发服务器遇到了这个问题，这就是为什么它现在在 gunicorn 和 nginx 后面运行，但仍然没有乐趣）。

我的下载视图是：

```
@never_cache
def download_media(request, user_id, session_key, id, filepath):
    "Download an individual media file"

    context = RequestContext(request)

    # validate the user_id & session_key pair
    if not __validate_session_key(user_id, session_key):
        return HttpResponseRedirect(reverse('handle_logout'))

    filepath = unicode(urllib.unquote(filepath))

    if '..' in filepath:
        raise SuspiciousOperation('Invalid characters in subdir parameter.')

    location = MediaCollectionLocation.objects.get(id=id)

    path = os.path.join(location.path, filepath)

    response = HttpResponse(FileWrapper(file(path)), content_type='application/octet-stream')
    response['Content-Disposition'] = 'attachment; filename=%s' % os.path.basename(path)

    response['Content-Length'] = os.path.getsize(path)
    response["Cache-Control"] = "no-cache, no-store, must-revalidate"
    return response 
```

我以这种方式提供文件是因为我希望客户端进行身份验证（所以不要只想用 nginx 重定向和提供静态内容）。

任何人都知道如果我同时提出多个请求，为什么它会退出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T01:42:11.783

我不完全确定为什么文件会失败，但我想这与下载的文件多于工作人员有关，或者 nginx 和 gunicorn 之间发生超时。

只有在 django 对用户进行身份验证后，您才能让 nginx 提供文件，方法是让 django 设置一个特定的标头，然后 nginx 读取（仅限内部）并提供文件本身。

[XSendFile](http://wiki.nginx.org/XSendfile)是 nginx 用来执行此操作的。然后，您可以创建一些中间件或函数来从 django 设置适当的标头，或者使用[django-sendfile](https://github.com/johnsensible/django-sendfile)之类的东西和 nginx 后端来为您完成所有工作。

If the issue you're experiencing is caused by a timeout between django and nginx, this fix should solve it. If it does not, increase the number of nginx workers as well, since it will be responsible for the serving of files now.

# get - 我如何从表达式中获取一行中的元素

> ID：15057645
> 
> 赞同：0
> 
> 时间：2013-02-24T22:51:50.400
> 
> 标签：get, grep

当我在矩阵中给出一个元素时，我想弄清楚如何从矩阵中获取整行中的所有元素。

就我而言，我有一个矩阵，它已经是一个数据集，具有一定数量的行和列。列是定义每行元素的类别。

举例说明：

> colnames（data.set）“GOID”“术语”“本体”“定义”

我得到了一个元素“对热量的响应”，它位于“TERM”colname 下，我必须在“GOID”colnam 中找到响应元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T23:26:33.123

您的问题的更完整示例如下：

```
GOID | TERM | ONTOLOGY | DEFINITION
 x1  |  x2  |    x3    |     x4
 y1  |  y2  |    y3    |     y4
 z1  |  z2  |    z3    |     z4
 ..  |  ..  |    ..    |     .. 
```

考虑`y2`到要`response to heat`检索值`y1`，您可以简单地使用`grep`and `cut/awk/argument expansion/sed/...`。这完全取决于您的分隔符。

如果分隔符（如您的示例中所示）是空格，您可以这样做：

```
GOID TERM ONTOLOGY DEFINITION
x1 x2 x3 x4
y1 y2 y3 y4
z1 z2 z3 z4
.. .. .. ..

grep "y2" <file> | cut -d ' ' -f 1 
```

输出：

```
y1 
```

# javascript - 同名函数和变量

> ID：15057649
> 
> 赞同：30
> 
> 时间：2013-02-24T22:52:13.253
> 
> 标签：javascript, syntax

下面的代码片段是一个测试，看看当一个函数和一个变量在同一范围内共享相同的名称时会发生什么。在 Chrome 中，变量定义似乎具有参考优先级。

1.  可以执行命名函数，还是完全被变量声明所掩盖？
2.  变量优先于同名函数是 Javascript 中的标准行为吗？

很抱歉这两个问题，但问两个单独的问题似乎很浪费。

代码：

```
<!DOCTYPE html>
    <head>
        <meta charset="utf-8">
        <title></title>
    </head>
    <body>
        <script>

            var overlapping = function() { return 'this is a var holding an anonymous function' };

            function overlapping()
            {
                return 'this is a function definition';
            }

            output( overlapping, 'overlapping' );
            output( overlapping(), 'overlapping()' );

            function output( expression, description )
            {
                document.writeln( '<li>' + ( description ? ('<i>' + description + '</i>: ') : '' ) + expression + '</li>' );
            }
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-24T22:57:57.567

在 JavaScript 中，函数定义被提升到当前作用域的顶部。因此，您的示例代码如下所示：

```
var overlapping = function() { return 'this is a function definition' };
var overlapping = function() { return 'this is a var holding an anonymous function' }; 
```

这是关于这个主题的一些很好的阅读：http: [//www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-01T11:32:44.713

1.  可以执行命名函数，还是完全被变量声明所掩盖？

    函数**声明**不会**在**那里执行。由于使用**相同的名称**，函数**表达式会覆盖**函数**声明**。

2.  变量优先于同名函数是 Javascript 中的标准行为吗？

    不是更喜欢一个。在 JavaScript 中，函数**声明**被**提升**到封闭函数或全局范围的**顶部**。**相同**变量名的函数表达式会覆盖函数声明。

例子：

```
 foo(); // Function Declaration - will be hoisted
   foo = function() { console.log("Function Expression  - will NOT be hoisted"); };
   function foo()   { console.log("Function Declaration - Will be hoisted"); }
   foo(); // Function Expression  - will NOT be hoisted 
```

# python - Python 抓取页面源代码，其中包含 PHP

> ID：15057651
> 
> 赞同：0
> 
> 时间：2013-02-24T22:52:23.303
> 
> 标签：python, python-3.3

我知道如何获取源 HTML 但不知道 PHP 是否可以使用内置函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:05:48.857

通过“获取 HTML 源代码”，我假设您的意思是打开和阅读这样的网页：

```
impor urllib2
urllib2.urlopen("http://google.com").read() 
```

由于 PHP 在服务器端呈现，并且客户端（您和您的 python 脚本）无法访问它，因此无法以类似于从网页中提取 HTML 的方式获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T23:02:33.030

PHP 脚本在服务器端运行并生成 HTML 文档（除其他外）。在请求网站时，您永远不会看到 HTML 文档的 PHP 源代码，因此 Python 也无法获取它。这甚至与 Python 无关。

# java - Processing.org/最小 FFT 误差

> ID：15057653
> 
> 赞同：3
> 
> 时间：2013-02-24T22:52:31.590
> 
> 标签：java, processing, minim

我正在尝试使用 Minim FFT 库，但是在运行示例草图时，我遇到了以下问题：

```
The constructor FFT(int, float) is undefined. 
```

我猜这个Java认为我正在尝试使用其他构造函数，但我无法终生弄清楚如何解决它。

下面是代码的相关部分：

```
import ddf.minim.analysis.*;
import ddf.minim.*;

FFT fft;
float[] buffer;
int bsize = 512;

void setup()
{
  size(512, 300, P3D);
  // create an FFT with a time-domain size the same as the size of buffer
  // it is required that these two values be the same
  // and also that the value is a power of two
  fft = new FFT(bsize, 44100);
  buffer = new float[bsize];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:24:42.167

Try explicitly importing the FFT class:

```
import ddf.minim.analysis.FFT; 
```

I'm not sure why this is required, but I was having the same problem and it worked for me.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T18:38:36.923

我在处理 2 中遇到了这个问题。我的问题是处理草图被命名为“FFT”。这产生了一个命名问题。您的第一个解决方案可能是创建一个重命名为其他内容的新草图。或者，您可以尝试在实例化 FFT 对象时包含包路径。例如：“ddf.minim.analysis.FFT”

# ruby-on-rails - 如果 text_field != 空白或 nil，则添加到 has_one

> ID：15057654
> 
> 赞同：-1
> 
> 时间：2013-02-24T22:52:31.487
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

我有一个简单的 has_one 关系设置，但我只想在 text_field 不是空白或零时将记录添加到 Damages 表。现在它正在将空白或 nil 记录添加到另一个表中。

我的观点：

```
 <%= f.fields_for :damage do |builder| %>    
        <%= builder.label 'Damage' %><br />
        <%= builder.text_field :dam_detail %> 
  <% end %> 
```

打包作业型号：

```
class Packjob < ActiveRecord::Base
   attr_accessible :pj_damage
   has_one :damage
   accepts_nested_attributes_for :damage
end 
```

损坏模型：

```
 class Damage < ActiveRecord::Base
    attr_accessible :dam_detail
    belongs_to :packjob
end 
```

如何只允许添加非空白或零值？将此逻辑添加到帮助程序的最佳做法是什么？

编辑：

这是 Packjobs 的控制器：

```
class PackjobsController < ApplicationController
  # GET /packjobs
  # GET /packjobs.json
  def index
    @packjobs = Packjob.includes(:damage).all
    @packers = Packer.find(:all)
    @rigs = Rig.find(:all, :order => "rig_type_number")

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @packjobs }
    end
  end

  # GET /packjobs/1
  # GET /packjobs/1.json
  def show
    @packjob = Packjob.find(params[:id])
    @packers = Packer.find(:all)

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @packjob }
    end
  end

  # GET /packjobs/new
  # GET /packjobs/new.json
  def new
    @packjob = Packjob.new
    @packers = Packer.find(:all, :conditions => { :p_team => "t" }, :order => "p_name")
    @rigs = Rig.find(:all, :conditions => { :rig_status => "t" }, :order => "rig_type_number")
    @damage = @packjob.build_damage             
    #@book = @author.build_book    

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @packjob }
    end
  end

  # GET /packjobs/1/edit
  def edit
    @packjob = Packjob.find(params[:id])
    @packers = Packer.find(:all, :conditions => { :p_team => "t" }, :order => "p_name")
    @rigs = Rig.find(:all, :conditions => { :rig_status => "t" }, :order => "rig_type_number")
  end

  # POST /packjobs
  # POST /packjobs.json
  def create
    @packjob = Packjob.new(params[:packjob])
    @packers = Packer.find(:all, :conditions => { :p_team => "t" }, :order => "p_name")
    @rigs = Rig.find(:all, :conditions => { :rig_status => "t" }, :order => "rig_type_number")

    respond_to do |format|
      if @packjob.save
        format.html { redirect_to @packjob, notice: 'Packjob was successfully created.' }
        format.json { render json: @packjob, status: :created, location: @packjob }
      else
        format.html { render action: "new" }
        format.json { render json: @packjob.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /packjobs/1
  # PUT /packjobs/1.json
  def update
    @packjob = Packjob.find(params[:id])
    @packers = Packer.find(:all, :conditions => { :p_team => "t" }, :order => "p_name")
    @rigs = Rig.find(:all, :conditions => { :rig_status => "t" }, :order => "rig_type_number")

    respond_to do |format|
      if @packjob.update_attributes(params[:packjob])
        format.html { redirect_to @packjob, notice: 'Packjob was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @packjob.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /packjobs/1
  # DELETE /packjobs/1.json
  def destroy
    @packjob = Packjob.find(params[:id])
    @packjob.destroy

    respond_to do |format|
      format.html { redirect_to packjobs_url }
      format.json { head :no_content }
    end
  end
end 
```

另外，我希望 packjob 允许损坏 text_field 中的空白，我只是不希望将记录添加到损坏表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T23:02:00.990

这是一项[验证](http://guides.rubyonrails.org/active_record_validations_callbacks.html)工作。具体来说，您需要两件事：

1.  您希望您的`Damage`班级验证它`:dam_detail`不是空白或`nil`：

    ```
    class Damage < ActiveRecord::Base
      # ... rest of class here ...
      validates :dam_detail, :presence => true, :length => { :minimum => 1 }
    end 
    ```

2.  您希望您的`Packjob`类验证其包含的`Damage`对象是否有效：

    ```
    class Packjob < ActiveRecord::Base
      # ... rest of class here ...
      validates_associated :damage
    end 
    ```

我还建议修改您的数据库架构以添加`dam_detail`字段不能为空的限制。有关更多信息，请参阅[迁移指南](http://guides.rubyonrails.org/migrations.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T23:12:20.280

尽管它更常用于 has_many，但茧宝石[https://github.com/nathanvda/cocoon](https://github.com/nathanvda/cocoon)对此非常有用。该 gem 将允许您从前端动态建立关系。它也将允许您破坏这种关系。

# highcharts - highcharts yaxis 开始于 1 分钟：1 不工作

> ID：15057656
> 
> 赞同：1
> 
> 时间：2013-02-24T22:52:34.910
> 
> 标签：highcharts

我需要我在 highcharts 中的 yaxis 始终从 1 开始，而不是 0。我的数据集是整数，1 是最低的，我已经尝试了所有我能想到的 min、minrange startontick 组合。我能够让 yaxis 显示 1 而不是 0 的唯一方法是使用下面的代码段。我基本上隐藏了 0，然后为那个绘图带设置了一个自定义标签，给它一个标签`1`。这是唯一的方法吗？

```
yAxis: {
            min:1,
            showFirstLabel: false,
            allowDecimals : false,
            reversed: true,
            plotBands: [{
                color: '#EBFAEB',
                from: 0,
                to: 10,
                label: {
                    text: '1',
                    style: {
                    color: '#000000',
                    },
                    align: 'left',
                    verticalAlign: 'top',
                    y: 0,
                    x: -15
                }
            }], 
```

我正在使用的示例数据

```
 series: [{
        name: 'Tokyo',
        data: [7, 6, 9, 14, 18, 21, 25, 26, 23, 18, 13, 9]
    }, {
        name: 'New York',
        data: [13, 2, 1, 11, 17, 22, 24, 24, 20, 14, 8, 2]
    }, {
        name: 'Berlin',
        data: [1, 3, 3, 8, 13, 17, 18, 17, 14, 9, 3, 1]
    }, {
        name: 'London',
        data: [3, 4, 5, 8, 11, 15, 17, 16, 14, 10, 6, 4]
    }] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T23:28:45.400

这可能是因为您的 tickInterval 缩放到不会从 0 开始。如果您给它一个适当的 tickInterval，min:1 应该可以工作。

或者 min:1 结合 startOnTick: false 也应该工作。

编辑：

我自己尝试了以下组合，它对我有用。如果您之前尝试过并且它对您不起作用，那么问题可能是您适合不同选项的情况：

```
min: 1,
startOnTick: false,
tickInterval: 10 
```

见：http: [//jsfiddle.net/Reality_Extractor/kTmqg/](http://jsfiddle.net/Reality_Extractor/kTmqg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:54:41.597

您是否尝试过使用 tickPositioner？

[http://api.highcharts.com/highstock#yAxis.tickPositioner](http://api.highcharts.com/highstock#yAxis.tickPositioner)

# android - 如何使用 EditText 元素打开对话框，以便选择所有文本并显示键盘？

> ID：15057660
> 
> 赞同：0
> 
> 时间：2013-02-24T22:53:30.720
> 
> 标签：android, keyboard, android-edittext

我想用 EditText 元素打开 AlertDialog，以便显示键盘并选择整个文本？

这就是我尝试的方式：

```
public void showRenameDialog(Task task) {

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Enter the title of Task");

    final EditText input = new EditText(this);
    input.setId(TEXT_ID);
    input.setText(task.getTitle());
    input.setSelectAllOnFocus(true);
    builder.setView(input);
    final Task t = task;
    builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int whichButton) {
 ...
        }
    });

    builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            return;
        }
    });
    AlertDialog alertDialog = builder.create();
    alertDialog.show();
    InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.showSoftInput(input, InputMethodManager.SHOW_IMPLICIT);
} 
```

选择了文本，但未显示键盘。

Ant 当我触摸文本时，键盘打开，但不再选择文本。

# python - AttributeError：“int”对象没有属性“状态”

> ID：15057663
> 
> 赞同：0
> 
> 时间：2013-02-24T22:54:31.700
> 
> 标签：python, python-2.7, compiler-errors, runtime-error

当我运行我当前拥有的代码时会弹出此错误。注意：我没有编写代码，我只是想了解发生了什么，以便将其移植到更新版本的 TuLiP。

```
Traceback (most recent call last):
  File "vms5.py", line 270, in <module>
    states = [aut_state.state]
AttributeError: 'int' object has no attribute 'state' 
```

第 270 行说：

```
states = [aut_state.state] 
```

我试图寻找`state`并找到这条线 249 ：

```
state = dict(temp = Tmax, w = 0, h = 0, b = Bmax, a = 0, c = 0, nw = 0) 
```

`aut_state`在第 259 和 260行

```
aut = createAut(aut_file = autfile, varnames = env_vars.keys() + sys_disc_vars.keys())
aut_state = aut.findNextAutState(current_aut_state=None, env_state=state) 
```

* * *

其他条款`aut`

第 47 行：

```
autfile = testfile+'.aut' 
```

和 223-234 行

```
# Check realizability
realizability = jtlvint.checkRealizability(smv_file=smvfile, spc_file=spcfile, \
                                           aut_file=autfile, verbose=3)

# Compute an automaton
jtlvint.computeStrategy(smv_file=smvfile, spc_file=spcfile, aut_file=autfile, \
                        priority_kind=3, verbose=3)
aut = automaton.Automaton(autfile, [], 3) 
```

这就是代码中具有`aut`相关术语的所有内容

* * *

如果您想了解更多信息，请告诉我

**编辑**

我尝试`print(aut_state)`在第 270 行之前添加并得到`-1`答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T23:03:41.760

所以aut是一个int。整数没有称为状态的属性。无论设置变量 aut，都使用 int 进行设置。对我来说看起来像一个错误代码。查看 findNextAutState 的代码 - 当没有更多的 AutStates 时它会返回什么？-1？

可能缺少条件检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:09:16.233

从回溯可以清楚地看出它`aut_state`是一个整数，并且整数不能有任何名为`state`. 您的主要代码问题在于`createAut()`创建 aut 对象的内部或`findNextAutState()`返回的函数内部`aut_state`。

# android - Android AsyncTask 无法获取 GPS 位置

> ID：15057665
> 
> 赞同：0
> 
> 时间：2013-02-24T22:54:37.147
> 
> 标签：android, android-location, android-context

我正在尝试解决这个问题：发送到`onProgressUpdate()`方法的坐标等于 0.0。`getLatitude()`使用调试器，我发现方法`getLongitude()`返回 0.0。问题是，这些方法，它们的类没问题（我以前用过）。这是的简化代码`MainActivity`：

```
public class MainActivity extends Activity {

Button btnStart;
MyTask objMyTask;

@Override
public void onCreate(Bundle savedInstanceState) {
    ...

    btnStart = (Button) findViewById(R.id.btnstart);
    btnStart.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            objMyTask = new MyTask();
            objMyTask.execute();
        }
    });
}

class MyTask extends AsyncTask<Void, Double, Integer> {
GPSTracker gps;
    @Override
    protected Integer doInBackground(Void... params) 
    {
        Double latitude, longitude;
        long t = System.currentTimeMillis()-6000;
        long currentTime = t;
        int i = 0;
        gps = new GPSTracker(MainActivity.this);
        while(i < 5)
        {
            currentTime = System.currentTimeMillis();
            if((currentTime - t) >= 5000)
            {
                i++;
                if(gps.canGetLocation()){
                    latitude = gps.getLatitude();
                    longitude = gps.getLongitude();
                    Double[] resultArray = new Double[2];
                    resultArray[0] = latitude;
                    resultArray[1] = longitude;
                    publishProgress(resultArray);
                }else{
                    gps.showSettingsAlert();
                }
                t = System.currentTimeMillis();
            }
        }
        return 0;
    }

    @Override
    protected void onProgressUpdate(Double... values) {     
        super.onProgressUpdate(values);
        Toast.makeText(getApplicationContext(), "Latitude: "+values[0]+"\nLongitude"+values[1], Toast.LENGTH_SHORT).show();
    }

    @Override
    protected void onPostExecute(Integer result) {
        ...
    }

} 
```

}

我认为问题出在 的构造函数中`GPSTracker`，也许无法从我创建的这个线程访问上下文。这是构造函数：

```
 public GPSTracker(Context context) {
    this.mContext = context;
    getLocation();
} 
```

我已经没有办法解决这个问题了。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:44:21.257

```
public GPSTracker(Context context) { 
    this.mContext = context.getApplicationContext(); 
    getLocation();
} 
```

# matlab - Matlab Bessel 函数和插值

> ID：15057667
> 
> 赞同：0
> 
> 时间：2013-02-24T22:54:42.583
> 
> 标签：matlab, interpolation

我正在尝试完成一项作业，但我真的不知道如何做问题所要求的。我不是在寻找完整的答案，而只是了解我需要使用/做什么来解决问题。这是问题：

> 我们被要求为第一类零阶贝塞尔函数 J0(x) 提供插值。
> 
> (a) 为插值点 x1 = 1.0、x2 = 1.3、x3 = 1.6、x4 = 1.9、x5 = 2.2 创建一个数据点表，列出到小数点后 7 位。[提示：参见 Matlab 对 BesselJ 的帮助。]
> 
> (b) 通过点 x1, x2, x3 拟合二次多项式。使用此插值估计 J0(1.5)。计算误差。

BesselJ 到底是做什么的？以及如何通过三个点拟合二次多项式？

谢谢，

迈克希尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:57:48.563

这是第一类的零阶贝塞尔函数：

[http://mathworld.wolfram.com/BesselFunctionoftheFirstKind.html](http://mathworld.wolfram.com/BesselFunctionoftheFirstKind.html)

贝塞尔函数对于柱坐标中的微分方程，就像正弦和余弦对于直角坐标中的 ODE 一样。

两者都有系列表示；两者都有多项式近似。

这是一个一般的二阶多项式：

```
y = a0 + a1*x + a2*x^2 
```

代入三个点`(x1, y1)`、`(x2, y2)`和`(x3, y3)`，您将得到三个方程用于三个未知系数`a0`、`a1`和`a2`。求解这些系数。

看看`y = J0(x)`我给你的链接中的情节。您想在某个范围内拟合二阶多边形。所以 - 选择一个。第一个点是 (0, 1)。再选择两个 - 也许 x = 1 和 x = 2。从 J0 表中查找那些 x 值处的 y 值并评估你的系数。

这是我的三点：(0,1), (1, 0.7652), (2.4048, 0)。

当我计算系数时，这是我得到的二阶多项式：

```
J0(x) = 1 -0.105931124*x -0.128868876*x*x 
```

# javascript - 在函数之后设置超时

> ID：15057668
> 
> 赞同：1
> 
> 时间：2013-02-24T22:54:43.660
> 
> 标签：javascript, jquery, html

我试图在另一个函数结束后立即使 removeClass 函数工作，所以我有这个脚本来调用 fittocontainer：

```
 function fittocontainer(){
        $('.fittocontainer').fittocontainer()
    } 
```

我希望在函数“fittocontainer”结束后，应用这个函数：

```
 setTimeout ( function(){
                $('#footer').removeClass("active");
            }) 
```

如何将 setTimeout 函数与“fittocontainer()”集成以在它刚刚结束后工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T22:59:55.973

setTimeout() 是关于时间（分钟，秒），如果你只想在最后执行那个函数，你可以直接调用它，或者你可以使用[回调](http://recurial.com/programming/understanding-callback-functions-in-javascript/)函数：

```
function fittocontainer(callback){
  $('.fittocontainer').fittocontainer();
  callback();
} 
```

然后调用 fittocontainer：

```
fittocontainer(function(){
  $('#footer').removeClass("active");
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T23:00:51.217

fittocontainer 是您制作的功能吗？如果是这样，并且它是异步的，则必须添加如下回调：

```
function fittocontainer (cb) {
  //do some stuff
  cb();
} 
```

然后你可以通过一个函数甚至匿名函数来调用它，比如：

```
fittocontainer(function () {
  // do stuff afterwards
}); 
```

如果这个函数正在更新 DOM，它很可能是异步的。在异步方法之后使用超时来尝试执行代码是非常危险的，永远不应该这样做。

如果是同步的，你可以简单地在下一行调用一个函数，并且知道它将在 fittocontainer 完成后执行。

另请记住，您需要在 setTimeout 上设置超时，例如：

```
setTimeout(function(){
  $('#footer').removeClass("active");
}, 1000); 
```

这是1秒的超时

# c++ - 复制构造函数调用了两次

> ID：15057674
> 
> 赞同：0
> 
> 时间：2013-02-24T22:55:34.873
> 
> 标签：c++

编译器 gcc 4.5.3 (cygwin)

我试图确定在什么条件下为参数调用复制构造函数，并且我想找到一种传递不需要调用复制构造函数的参数的方法。我构建了以下测试代码来探索这个问题。

在下面的代码中，复制构造函数为 fnc1() 调用了两次。有什么理由应该多次调用它？

有没有办法不调用复制构造函数？

```
# include <iostream>

using namespace std;

class able {
public:
   long x;
   able(): x(1) {}
   able(const able&) {cout << " const "; }
   ~able() { cout << " ~able" << endl; }
};

able fnc1(able x)         { cout << "fnc1(able x)"         ; return x; }
able fnc2(able& x)        { cout << "fnc2(able& x)"        ; return x; }
able fnc3(const able&  x) { cout << "fnc3(const able&  x)" ; return x; }
able fnc4(able const & x) { cout << "fnc4(able const & x)" ; return x; }
able fnc5(able* x)        { cout << "fnc4(able* x)"        ; return *x; }

int main(int argc, char** argv) {

   able* x = new able();
   fnc1(*x);
   fnc2(*x);
   fnc3(*x);
   fnc4(*x);
   fnc5(x);
   cout << "test fini" << endl;
   return 0;
}

output
 const fnc1(able x) const  ~able
  |                 |      |
  |                 |      o first destrucor
  |                 |      
  |                 o second call
  o first call
 ~able
 |
 o second destructor
fnc2(able& x) const  ~able
fnc3(const able&  x) const  ~able
fnc4(able const & x) const  ~able
fnc4(able* x) const  ~able
test fini 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T22:58:22.663

您将`able`对象按值传递给函数，然后按值返回。其中每一个都涉及一个副本，并将使用您的复制构造函数。首先它被复制到函数中`fnc1(*x);`。然后将该副本从函数中复制出来`return x;`。

至于您的输出顺序，您所看到的是：

1.  `const`

    对象被复制 - 这是作为参数传递给函数的对象。

2.  `fnc1(able x)`

    的执行`fnc1`。

3.  `const`

    再次复制对象 - 这是从函数返回的对象。

4.  `~able`

    调用析构函数 - 这是在传递要销毁的参数时创建的副本，因为您已经到达函数范围的末尾。

5.  `~able`

    `fnc1(*x);`调用析构函数 - 这是在行完成时从被销毁的函数返回的临时对象。

由 引起的第二个副本`return x;`可能会被编译器忽略（即使它有一些副作用）：

> 在具有类返回类型的函数的 return 语句中，当表达式是具有与函数返回类型相同的 cv 非限定类型的非易失性自动对象（函数或 catch 子句参数除外）的名称时，通过将自动对象直接构造到函数的返回值中，可以省略复制/移动操作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T23:03:03.977

在这个函数中：

```
able fnc1(able x) { ... } 
```

你是：

1.  *按值*获取输入参数。这意味着将创建它的*副本*来初始化`x`. 这就是第**一次**调用复制构造函数的原因。

2.  `able` *按值*返回类型的对象：这意味着将构造一个临时对象，它是您要返回的对象的副本，尽管编译器可能会忽略对复制构造函数（当然，然后是析构函数）的最后一次调用在[**（命名的）返回值优化**](http://en.wikipedia.org/wiki/Return_value_optimization)或（N）RVO 下。这就是**第二次**调用复制构造函数的原因。

因此，您看到的对复制构造函数的**两次调用。**

另请注意，您的程序会**泄漏内存**。您正在使用 分配一个对象`new`，并且您永远不会通过对 的相应调用来解除分配它`delete`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T22:58:42.340

这个功能：

```
able fnc1(able x) { ... } 
```

将要求制作对象的副本 - 当您使用没有引用的类时，这是合同的一部分。这允许 fnc1() 与对象“混淆”，并且传入的原始对象保持不变 - 这有时正是您想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T23:02:33.550

听起来您希望将“能”对象的责任转移给调用者。在这种情况下，您将拥有一个类似于 的原型，并且如果调用者不希望其珍贵的东西被弄乱，则由`void fn1(able &x)`调用者创建该对象的私有副本 。`x`

正如其他人所说，参数一份，返回值一份。

只要您从函数中返回一个*新对象*，您就需要一个构造函数来构建该对象。如果此时您不想要一个新对象，那么您的函数应该返回一个指针或对该其他对象的引用。然而，

1.  您*不得*返回对您在此堆栈帧上本地构造的内容（即局部变量或函数参数）的引用
2.  imvho，如果您只是更新调用者引用的内容，那么返回对该对象的引用是没有意义的，并且拥有一个“类似 setter”的 API`void`作为返回类型同样简单。

我可以看到不遵循＃2 的唯一原因是您想要链接函数，即您重视`obj->fn1()->fn2()->fn3()`其他编程模式。在这种情况下，我建议您接收并返回*指向*对象的指针，并接受使用而不是访问成员`able`的事实。`fnx()``obj->m``obj.m`

# php - 找不到 php.ini include_path

> ID：15057680
> 
> 赞同：2
> 
> 时间：2013-02-24T22:56:04.730
> 
> 标签：php, include-path

我刚刚在 Windows 机器上设置了虚拟主机（使用 xampp），并为我的默认站点创建了一个条目，如下所示。

```
<VirtualHost *:80>
DocumentRoot "D:/path/to/my/website"
ServerName localhost

<Directory "D:/path/to/my/Website">
    Options Indexes FollowSymLinks Includes ExecCGI
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory>
</VirtualHost> 
```

然后我在 c:\xamp\php\php.ini 中注释掉了 include_path，这样我就可以运行多个站点，每个站点都有自己的 include_path

我有一个 .htaccess 文件，在 localhost 根目录中没有定义路径。我有一个 php.ini 文件，其路径定义如下： include_path = ".;D:\path\to\my\website\php" 但是当我运行 phpinfo 时，我得到默认的 include_path= .;C:\php \梨

任何想法为什么 php 看不到我的 php.ini？我到处检查了杂散的 .htaccess 文件或 php.ini 文件，但这是服务器的根目录，唯一的文件是我提到的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T01:54:43.710

用于 apache 模块的 php.ini**在 compile time (of PHP)**中设置。
将erase php.ini 文件放回那里（现在，mod-php 使用默认值）。

对于多个 vhost，要么使用（如果可能，检查）apache config，在 htaccess 或特定 vhost 配置文件中，或者使用 PHP 的 php ini set 函数。

两者都是很好的做法，除非你真的需要你系统的最后一点汁液，在这种情况下，PHP 不是你应该选择的技术。

# java - 在不打开实际文件的情况下使用 JFileChooser

> ID：15057685
> 
> 赞同：1
> 
> 时间：2013-02-24T22:57:21.257
> 
> 标签：java, swing, jpanel, jfilechooser

我正在使用`JFileChooser`允许用户选择`.txt`稍后将由我的程序处理的文件，但是当用户选择文件时，它实际上由我的计算机默认应用程序（在我的情况下为 TeXworks）打开并由我的程序。知道如何阻止这种情况吗？

```
File fileToOpen = fileChooser.getSelectedFile(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:59:41.187

`JFileChooser`的`getSelectedFile()`方法，返回一个[`File`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)对象。使用`getAbsolutePath()`获取文件的绝对名称。

[JavaDoc](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFileChooser.html)中的修改示例：

```
JFileChooser chooser = new JFileChooser();
chooser.setFileSelectionMode(JFileChooser.FILES_ONLY);
int returnVal = chooser.showOpenDialog(parent);
if (returnVal == JFileChooser.APPROVE_OPTION)
{
System.out.println("You chose to open this directory: " + chooser.getSelectedFile().getAbsolutePath());
} 
```

* * *

因此，在您的情况下，您只需要附加`.getAbsolutePath()`到语句的末尾，如下所示：

```
File fileToOpen = fileChooser.getSelectedFile().getAbsolutePath(); 
```

# scheme - 自引用数据定义

> ID：15057690
> 
> 赞同：1
> 
> 时间：2013-02-24T22:57:47.973
> 
> 标签：scheme, racket

我正在读这本书，我遇到了一个例子。这确定了 a-ftree 是否包含在眼睛字段中具有 'blue 的子结构。

```
(define-struct child (father mother name date eyes))

;; Oldest Generation:
(define Carl (make-child empty empty 'Carl 1926 'green))
(define Bettina (make-child empty empty 'Bettina 1926 'green))

;; Middle Generation:
(define Adam (make-child Carl Bettina 'Adam 1950 'yellow))
(define Dave (make-child Carl Bettina 'Dave 1955 'black))
(define Eva (make-child Carl Bettina 'Eva 1965 'blue))
(define Fred (make-child empty empty 'Fred 1966 'pink))

;; Youngest Generation: 
(define Gustav (make-child Fred Eva 'Gustav 1988 'brown))

;; blue-eyed-ancestor? : ftn  ->  boolean
;; to determine whether a-ftree contains a child
;; structure with 'blue in the eyes field
;; version 2: using an or-expression
(define (blue-eyed-ancestor? a-ftree)
  (cond
    [(empty? a-ftree) false]
    [else (or (symbol=? (child-eyes a-ftree) 'blue)
              (or (blue-eyed-ancestor? (child-father a-ftree))
                  (blue-eyed-ancestor? (child-mother a-ftree))))])) 
```

我想知道您将如何重新制作该函数，以便它可以确定 a-ftree 在日期字段中是否包含出生日期为 1966 的孩子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:09:39.477

它与您已经拥有的非常相似。这是一般的想法：

```
; birth-date? returns true if there's a child in the tree with the given date
;   a-ftree: a family tree
;   date:    the date we're looking for
(define (birth-date? a-ftree date)
  (cond
    [<???> <???>]                         ; identical base case
    [else (or (= (<???> a-ftree) <???>)   ; if this child has the expected date
              (or (<???> <???> date)      ; advance the recursion over father
                  (<???> <???> date)))])) ; advance the recursion over mother 
```

像这样使用它：

```
(birth-date? Gustav 1966)
=> #t 
```

# java - Servlet：尝试在 Eclipse 中使用 servlet 读取 pdf 文件

> ID：15057696
> 
> 赞同：1
> 
> 时间：2013-02-24T22:57:50.610
> 
> 标签：java

我尝试使用 ServletContext 读取文件`

```
InputStream is = servletContext.getResourceAsStream(path) 
```

路径的值为：

```
path = D:\Assignments\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\HelpGuide\GeneratedReports\userDetail.pdf` 
```

该`userDetail.pdf`文件存在于给定路径中，但是当我尝试使用上面定义的 servlet 上下文将资源作为流获取时，值为`is`null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:03:00.390

这是因为 getResourceAsStream 查找相对于上下文根的路径。检查 servlet 上下文的 javadoc，尤其是“getResource”部分：[http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getResourceAsStream(java.lang.String)](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getResourceAsStream(java.lang.String)) 您应该使用相对路径并将您的 pdf 放在您的类路径中，这将是一个更好的做法，因为您的应用程序将不依赖于绝对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T23:01:29.300

正如 servlet 告诉您的那样，这是一个糟糕的主意。

将该 PDF 放在 CLASSPATH 中（例如，您的 WAR 的 WEB-INF/类）并从 servlet 上下文中将其作为 InputStream 读取。

绝对路径是 Web 应用程序的错误方式。

# c# - 点击打印选项时出现参数异常

> ID：15057698
> 
> 赞同：0
> 
> 时间：2013-02-24T22:57:59.480
> 
> 标签：c#, asp.net, .net

```
 private void printToolStripMenuItem_Click(object sender, EventArgs e)
    {

        printDialog1.AllowCurrentPage = true;
        printDialog1.AllowPrintToFile = true;
        printDialog1.AllowSelection = true;
        printDialog1.AllowSomePages = true;

       // pageSetupDialog1.PageSettings.Margins;
        printDialog1.PrinterSettings = new System.Drawing.Printing.PrinterSettings();

         pageSetupDialog1.ShowDialog();
         DialogResult dk = pageSetupDialog1.ShowDialog();
         if (dk == DialogResult.OK)
         {
             object[] resul = new object[]{
                printDialog1.PrinterSettings.MaximumCopies,
                printDialog1.PrintToFile,
                printDialog1.ShowNetwork,

            };

        }
        . 
```

嗨，我正在尽我所能在谷歌中搜索，但我的问题还没有解决。我知道在stackoverflow上解决了这个错误。我的项目控件中有文本框、菜单条和 openDialogbox、PrintDialog 等。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-27T08:38:53.527

可以使用无效参数调用方法。在这种情况下可能会抛出 ArgumentException。异常使用派生类型来表示它们的含义，但这并没有赋予它们额外的能力。从语义上讲，ArgumentException 表示使用无效参数调用方法。更多信息： [点击这里](http://www.dotnetperls.com/argumentexception)

# python - 使用python在ppm上褪色到红色

> ID：15057700
> 
> 赞同：1
> 
> 时间：2013-02-24T22:58:22.670
> 
> 标签：python, ppm

Python

如何操作此代码以给我一个从左到右从黑色渐变为红色的图像，其中左侧为黑色，右侧为红色。

```
def main():
    f = open("testImage.ppm","w")
    f.write("P3 \n")
    width=256
    height=256
    f.write("%d %d \n"%(width,height))
    f.write("255 \n")
    for i in range(width*height):
        x=i%256
        y=i/256
        f.write("255, 0, 0 \n")
    f.close()

main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:09:53.513

在你的循环中，你总是在写`255, 0, 0`. 那是红色，绿色，蓝色的三重奏。上述循环的写入`255`指定最大值为 255。图像的宽度为 256 像素。[0, 255] 范围内有 256 个值。因此，很容易推断出红色分量应该是 X 值。您可以将代码修改为如下所示：

```
f.write("%d, 0, 0 \n" % x) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T00:14:39.173

由于您希望淡入淡出从左到右从黑色变为红色，因此图像的每一行都是相同的，只需要创建一次并一遍又一遍地使用。PPM 图像文件的每个数据行将如下所示，其中每个三元组值对应一个 RGB 三元组：

```
0 0 0 1 0 0 2 0 0 3 0 0 4 0 0 5 . . . 251 0 0 252 0 0 253 0 0 254 0 0 255 0 0 
```

这是执行此操作的代码的修改版本：

```
def main():
    with open("testImage.ppm", "wb") as f:
        f.write("P3\n")
        width = 256
        height = 256
        f.write("%d %d\n"%(width,height))
        f.write("255\n")
        delta_red = 256./width
        row = ' '.join('{} {} {}'.format(int(i*delta_red), 0, 0)
                                         for i in xrange(width)) + '\n'
        for _ in xrange(height):
            f.write(row)

main() 
```

以下是实际结果（转换为本网站的 .png 格式）：

![由修改代码创建的黑色到红色图像](../Images/bb8eb9b33f88a9f0715f72431ede7876.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T00:47:43.657

您快到了，但您需要将红色计算放入遍历每个像素的循环中。你一直在写 (255,0,0) 但你想写 (x,0,0)。

```
def main():
    f = open("testImage.ppm","w")
    f.write("P3 \n")
    width=256
    height=256
    f.write("%d %d \n"%(width,height))
    f.write("255 \n")
    for i in range(width*height):
        x=i%256
        y=i/256
        f.write("%s, 0, 0 \n" % x)  #SEE THIS LINE
    f.close()

main() 
```

# php - 您如何添加到 MySQL 值以创建投票系统？

> ID：15057703
> 
> 赞同：0
> 
> 时间：2013-02-24T22:58:35.833
> 
> 标签：php

我目前正在尝试创建一个投票系统，允许用户为特定视频添加投票。我可以从数据库表中检索当前的投票数，但我不知道如何在这个总数中加一，然后在单击按钮时将此值重新插入数据库。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T23:00:21.243

最好保留所有投票的历史记录，然后使用`count(*)`和计算总数`group by`。

```
select answer, count(*) from vote group by answer; 
```

如果两个人尝试同时投票，这将避免竞争条件，并且您可以在投票表中添加用户用户 ID、会话 ID、IP 地址等列，以便以后查找可疑的投票模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T23:02:54.987

使用与此类似的 mysql 查询：

```
UPDATE table SET voteCount = voteCount+1 WHERE video = ? 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T23:03:59.323

单独的计票和用户投票表。

您可以尝试在数据库中自己的表中添加投票，例如：

```
INSERT INTO votes_tables (id, user_id, video_id, vote_up, vote_down, date) VALUES (NULL, '5', '10', '1', '', NOW()); 
```

在另一个表中，您有视频存储列表仅视频投票的值（增量，减量状态）：

点赞：

```
UPDATE votes_table SET votes = votes + 1 WHERE video_id = ? 
```

否决票：

```
UPDATE votes_table SET votes = votes - 1 WHERE video_id = ? 
```

这种方法可以分开谁和什么时候被投票+投票统计。这种方法避免在使用`GROUP_BY`中可以加快数据的返回结果。

使用 COUNT(*) 或 SUM() 可能会降低速度：

count(*) 所在的行应该是 INDEX 以提高速度，因此由于性能加快，表中数据的索引增加了。性能之争：[是否可以加快 MySQL 中的 sum()？](https://stackoverflow.com/questions/2178441/is-it-possible-to-speed-up-a-sum-in-mysql)

# php - “未找到元素”试图让 AJAX 向 PHP 发送/接收字符串

> ID：15057705
> 
> 赞同：4
> 
> 时间：2013-02-24T22:58:47.410
> 
> 标签：php, html, ajax

我在 W3Schools 上阅读了 AJAX 教程，做了一个基本相同的简单示例，但它会产生错误。如果好奇，教程就在这里：http: [//www.w3schools.com/ajax/ajax_aspphp.asp](http://www.w3schools.com/ajax/ajax_aspphp.asp)

我想向 PHP 文件发送一个字符串（类似于链接中的第三个代码块），但我收到一个错误：“未*找到元素*”。Firefox 突出显示 PHP 文件的第 5 行，即`?>`.

带有 AJAX 代码的文件名为“getHello.html”（.html 是否正确？）并具有以下代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>AJAX Hello World Example</title>
    <script>
        function sayHello(str) {
            if (str.length == 0) {
                document.getElementById("showText").innerHTML = "Hello World!";
                return;
            }
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.onreadystatechange = function() {
                if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
                    document.getElementById("showText").innerHTML = xmlHttp.responseText;
                }
            }
            xmlHttp.open("GET", "sendHello.php?q="+str, true);
            xmlHttp.send();
        }
    </script>
</head>
<body>
    <input type="text" id="textIn" onkeyup="sayHello(this.value);"/><br/><br/>
    <div id="showText"></div>
</body>
</html> 
```

PHP 文件名为“sendHello.php”，代码如下：

```
<?php
    $q = $_GET["q"];
    $response = "Hello World! Sent: ".$q;
    echo $response;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-16T17:00:46.013

使用本地服务器和 HTML 编辑器，当您忘记您正在通过文件运行 HTML 时（在错误控制台上），您可能会收到此错误：协议

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T03:25:42.337

您的示例代码对我来说效果很好。刷新页面，如果您在您控制的服务器上运行并且它仍然无法工作，请重新启动服务器（您永远不知道，也许您打开了某种服务器端缓存）。是的，.html 是 getHello.html 的正确扩展名，因为它不包含任何 PHP 代码。

# objective-c - Objective-C 中的浮点 32 数组

> ID：15057706
> 
> 赞同：2
> 
> 时间：2013-02-24T22:58:49.253
> 
> 标签：objective-c

在 javascript 中，我有以下用于 CPU 缓冲区的数组：

```
var nVerts = this.m_countVertices;
this.m_bindPositions = new Float32Array(nVerts * 3);
this.m_bindNormals = new Float32Array(nVerts * 3);
this.m_deformedPositions = new Float32Array(nVerts * 3); 
```

你推荐在objective-c中使用什么，而不是Float32Array。一个 NSArray 就足够了吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:36:23.337

如果你使用 Xcode where `Float32`is defined，你可能应该：

```
Float32* m_bindPositions = (Float32*)malloc( (nVerts * 3) * sizeof(Float32)); 
```

那么它应该是一块类似于您显示的代码的内存。只是不要忘记

```
free(m_bindPositions) 
```

完成后释放内存。

# java - java类Integer和Long的源代码中的“HD”是什么意思？

> ID：15057710
> 
> 赞同：4
> 
> 时间：2013-02-24T22:59:17.200
> 
> 标签：java, comments, bit-manipulation

在 Integer.java 和 Long.java 的源代码中，在大多数的 bit twiddling 方法中，都有一个名为“HD”的注释引用。每种方法都指向所述参考文献的特定部分。

那参考是什么？

`highestOneBit(int)`这是类方法中的示例（[此处](http://www.docjar.com/html/api/java/lang/Integer.java.html)`Integer`为源代码，第 1035 行）：

```
/**
 * Returns an {@code int} value with at most a single one-bit, in the
 * position of the highest-order ("leftmost") one-bit in the specified
 * {@code int} value.  Returns zero if the specified value has no
 * one-bits in its two's complement binary representation, that is, if it
 * is equal to zero.
 *
 * @return an {@code int} value with a single one-bit, in the position
 *     of the highest-order one-bit in the specified value, or zero if
 *     the specified value is itself equal to zero.
 * @since 1.5
 */
public static int highestOneBit(int i) {
    // HD, Figure 3-1
    i |= (i >>  1);
    i |= (i >>  2);
    i |= (i >>  4);
    i |= (i >>  8);
    i |= (i >> 16);
    return i - (i >>> 1);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-24T23:01:03.363

从源代码顶部的注释...

```
 40    * <p>Implementation note: The implementations of the "bit twiddling"
   41    * methods (such as {@link #highestOneBit(int) highestOneBit} and
   42    * {@link #numberOfTrailingZeros(int) numberOfTrailingZeros}) are
   43    * based on material from Henry S. Warren, Jr.'s <i>Hacker's
   44    * Delight</i>, (Addison Wesley, 2002).
   45    * 
```

亨利·S·沃伦 (Henry S. Warren)[的《黑客的喜悦》。](http://www.informit.com/store/hackers-delight-9780201914658)

# c# - 为什么我会收到异常 InvalidOperationException？

> ID：15057712
> 
> 赞同：7
> 
> 时间：2013-02-24T22:59:27.460
> 
> 标签：c#, winforms, listbox

我编写了以下代码，它从列表框中删除了选定的值。我还想将它从字典列表中删除，然后将其更新/写入文本文件，这样当我再次运行程序并加载文本文件时，它将被更新，如果不是，它将在每次运行时继续显示已删除的项目再次申请。

```
private void listBox1_KeyDown(object sender, KeyEventArgs e)
        {
            string sb;
            if (e.KeyCode == Keys.Delete)
            {
                if (this.listBox1.SelectedIndex >= 0)
                {
                    string obj = this.listBox1.SelectedValue.ToString();
                    data.Remove(obj);
                    listBox1.DataSource = null;
                    listBox1.DataSource = data;
                    foreach (KeyValuePair<string, List<string>> kvp in LocalyKeyWords)
                    {
                        for (int i = 0; i < kvp.Value.Count(); i++)
                        {
                            sb = "Url: " + kvp.Key + " --- " + "Local KeyWord: " + kvp.Value[i] + Environment.NewLine;
                            LocalyKeyWords.Remove(kvp.Key);
                        }
                    }

                }
            }

        } 
```

LocalyKeyWords 是一个字典>

在这种情况下，它包含两个项目/键，我删除了一个，并且我看到一个断点，这一个已被删除。

问题是我是否需要删除 kvp.Key 或以某种方式删除我从 listBox 中删除的项目，这是我想从 LocalyKeywords 中删除的项目，它是 obj 变量，因为我正在这样做：

```
data.Remove(obj); 
```

所以也许我还需要从 localyKeyWords 中删除 obj ？

我得到的错误是在它从 LocalyKeyWords 中删除项目之后单击继续此行：

```
foreach (KeyValuePair<string, List<string>> kvp in LocalyKeyWords) 
```

我收到错误：

收藏已修改；枚举操作可能无法执行

```
System.InvalidOperationException was unhandled
  HResult=-2146233079
  Message=Collection was modified; enumeration operation may not execute.
  Source=mscorlib
  StackTrace:
       at System.ThrowHelper.ThrowInvalidOperationException(ExceptionResource resource)
       at System.Collections.Generic.Dictionary`2.Enumerator.MoveNext()
       at GatherLinks.Form1.listBox1_KeyDown(Object sender, KeyEventArgs e) in d:\C-Sharp\GatherLinks\GatherLinks\GatherLinks\Form1.cs:line 959
       at System.Windows.Forms.Control.OnKeyDown(KeyEventArgs e)
       at System.Windows.Forms.Control.ProcessKeyEventArgs(Message& m)
       at System.Windows.Forms.Control.ProcessKeyMessage(Message& m)
       at System.Windows.Forms.Control.WmKeyChar(Message& m)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.ListBox.WndProc(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.Run(Form mainForm)
       at GatherLinks.Program.Main() in d:\C-Sharp\GatherLinks\GatherLinks\GatherLinks\Program.cs:line 18
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-24T23:02:08.410

您正在从`LocalyKeyWords`迭代中删除项目；正如异常消息所说，这是不允许的。

我不确定这里的大局是什么，但一个本地化的解决方案是制作一个临时副本`LocalyKeyWords`并对其进行迭代。然后，您可以毫无困难地修改“源”集合。

例子：

```
foreach (var kvp in LocalyKeyWords.ToList())  // .ToList() makes a temp copy 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T23:04:03.040

您不能在`foreach`.

您可以创建字典的副本并循环修改原始字典。

# c++ - 如果我不给原型返回值的函数添加返回值怎么办

> ID：15057718
> 
> 赞同：5
> 
> 时间：2013-02-24T23:00:03.533
> 
> 标签：c++, return, return-value

我只花了 3 个小时，可能更多，试图找到一个错误、段错误或 bad_allow，这取决于我修改代码的方式，以便了解什么对象在弄乱堆栈或内存：我把所有的对象都怀疑了。 ..我屠杀了班级...（尽管如此，事实证明这很好，因为这些班级最终发现自己毫无用处:-)）...

但是，实际上，真正的错误很简单： **我没有**在应该返回值的函数中编写 return 语句（在我的例子中，我需要返回 a `std::vector<boost::any>`）。

我认为没有它就无法编译**gcc (4.6.3) 。**当我想起**ms visual 2010**也发生了类似的事情时，我感到更加陌生。

所以现在我想知道不写退货声明是否合法？在这种情况下会发生什么？

是否与 main 可以具有返回值的事实有关？还是我应该考虑去**gcc 4.7**？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-24T23:01:53.107

这是未定义的行为：

> `[C++11: 6.6.3/2]:` *[..]*从函数的末尾流出相当于`return`没有值的 a；这会导致值返回函数中的未定义行为。

它编译是因为：

1.  编译器不需要诊断它；
2.  诊断这并不总是微不足道的，因此*您的*编译器不会打扰；
3.  C++ 是一种“自己动手”的语言。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-24T23:06:26.817

如果你用标志编译`-Wall -Wextra -pedantic`它应该给你一个关于一个应该返回一个值但不这样做的函数的编译器警告。

# javascript - 读取 WebGLTexture 中的像素（将 WebGL 渲染到纹理）

> ID：15057720
> 
> 赞同：5
> 
> 时间：2013-02-24T23:00:18.777
> 
> 标签：javascript, webgl, textures, framebuffer

我在 GPU 上生成纹理并将其渲染到我自己的帧缓冲区对象。它工作正常，纹理被渲染到 WebGLTexture，我可以传递给其他着色器。但是我想在 javascript 中访问 WebGLTexture 像素。有没有办法做到这一点？

目前，在将纹理绘制到帧缓冲区后，我正在使用 gl.ReadPixels 读取像素。这很好，但如果我可以直接访问 WebGLTextureObject 中的像素不是更好吗？

我想要完成的是：我有 GLSL perlin 噪声着色器，可以在 GPU 上渲染高清高度图和法线贴图。我想将高度图传递给 CPU，以便为网格生成顶点。我当然可以将顶点定位在顶点着色器中，但我需要它在 CPU 中进行碰撞检测。

我希望我的问题很清楚。欢迎任何反馈！

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T10:35:33.207

您可以通过将像素附加到帧缓冲区来从大多数纹理中读取像素。

```
var fb = gl.createFramebuffer();
gl.bindFramebuffer(gl.FRAMEBUFFER, fb);
gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, tex, 0);
if (gl.checkFramebufferStatus(gl.FRAMEBUFFER) == gl.FRAMEBUFFER_COMPLETE) {
  var pixels = new Uint8Array(width * height * 4);
  gl.readPixels(x, y, width, height, gl.RGBA, gl.UNSIGNED_BYTE, pixels);
} 
```

# clojure - clojure 钛 - 如何保存到 berkely DB？

> ID：15057723
> 
> 赞同：0
> 
> 时间：2013-02-24T23:00:33.053
> 
> 标签：clojure, titanium, berkeley-db-je, titan

我可以阅读钛图并将其添加到钛图中（使用 berkely DB 后端），例如以下内容：

```
(let [g (tg/open "/tmp/mygraph")] 
```

然后我可以使用

```
(tg/add-vertex g ... 
```

修改图表。但是如何将修改后的图表保存到我的 berkleydb 后端？

我没有泰坦的属性文件，我正在使用 [clojurewerkz/titanium "1.0.0-alpha1"]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:13:26.187

[当当前事务提交](https://github.com/thinkaurelius/titan/wiki/Transaction-Handling)时，Titan 会解析并保留所有更改。在 Titanium 中，事务控制功能[在 master 中可用，](https://github.com/clojurewerkz/titanium/blob/master/ChangeLog.md#transaction-control-functions)并将很快与 alpha2 一起发布。

更新：[发布了 alpha2](http://blog.clojurewerkz.org/blog/2013/02/25/titanium-1-dot-0-0-alpha2-is-released/)，更新了[文档](http://titanium.clojurewerkz.org)以涵盖事务控制。

# linux - 在系统范围内更改游标类型

> ID：15057731
> 
> 赞同：0
> 
> 时间：2013-02-24T23:01:28.690
> 
> 标签：linux, types, gtk, cursor

我想更改每个打开的应用程序（包括桌面和面板）上的光标类型。我使用 GNU/Linux 和 GTK+。

这是我在系统范围内更改游标类型的尝试：

```
List<weak Gdk.Window> windows = Screen.get_default().get_toplevel_windows();
foreach(Gdk.Window window in windows) {
    window.set_cursor(new Cursor(CursorType.PIRATE));
} 
```

此代码仅更改我的应用程序窗口上的光标类型。如何更改所有应用程序的光标类型？有没有使用 GTK+ 的方法？如果没有，我该如何使用 Xlib 来做到这一点？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T00:50:03.067

简短的回答：您不能在所有应用程序中更改鼠标光标，因为每个应用程序都将其设置为它想要的任何东西。

更长的答案：

试试 xsetroot(1) 的 -cursor、-cursor_name、-xcf 选项。

尝试为您首选的桌面环境使用光标主题。

# python - Numpy：如何检查 ndarray 中的元组是否存在

> ID：15057744
> 
> 赞同：2
> 
> 时间：2013-02-24T23:02:43.877
> 
> 标签：python, numpy, comparison

在使用 numpy 数组中的元组时，我发现了一个奇怪的行为。我想得到一个布尔值表，告诉我 array 中的哪些元组`a`也存在于 array 中`b`。通常，我会使用 , 中的任何`in`一个`in1d`。它们都不起作用，而`tuple(a[1]) == b[1,1]`yield `True`。

我填写我的`a`，`b`像这样：

```
a = numpy.array([(0,0)(1,1)(2,2)], dtype=tuple)

b = numpy.zeros((3,3), dtype=tuple)
for i in range(0,3):
    for j in range(0,3):
        b[i,j] = (i,j) 
```

谁能告诉我一个解决我的问题的方法，请告诉我为什么这不能按预期工作？

（顺便说一句，在这里使用 python2.7 和 numpy1.6.2。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T23:35:32.437

**为什么这不起作用**

简短的版本是 numpy 的实现`array.__contains__()`似乎被破坏了。python 中的运算符在幕后`in`调用。`__contains__()`

意思`a in b`是等价于`b.__contains__(a)`。

我已经在 REPL 中加载了您的数组并尝试以下操作：

```
>>> b[:,0]
array([(0, 0), (1, 0), (2, 0)], dtype=object)
>>> (0,0) in b[:,0] # we expect it to be true
False
>>> (0,0) in list(b[:,0]) # this shouldn't be different from the above but it is
True
>>> 
```

**如何修复它**

我看不出你的列表理解是如何工作的，因为`a[x]`它是一个元组并且`b[:,:]`是一个二维矩阵，所以它们当然是不相等的。但我假设您打算使用`in`而不是`==`. 如果我在这里错了，请纠正我，你的意思是我没有看到的不同的东西。

第一步是`b`从 2D 数组转换为 1D 数组，以便我们可以线性筛选它并将其转换为列表以避免 numpy`array.__contains()`像这样损坏：

```
bb = list(b.reshape(b.size)) 
```

或者，更好的是，使它成为一个，`set`因为元组是不可变的，并且`in`在集合中检查是 O(1) 而不是列表的 O(n) 行为

```
>>> bb = set(b.reshape(b.size))
>>> print bb
set([(0, 1), (1, 2), (0, 0), (2, 1), (1, 1), (2, 0), (2, 2), (1, 0), (0, 2)])
>>> 
```

接下来我们简单地使用列表推导推导出布尔值表

```
>>> truth_table = [tuple(aa) in bb for aa in a]
>>> print truth_table
[True, True, True]
>>> 
```

完整代码：

```
def contained(a,b):
    bb = set(b.flatten())
    return [tuple(aa) in bb for aa in a] 
```

# php - 无法在学说 mongo 查询中增加值

> ID：15057745
> 
> 赞同：2
> 
> 时间：2013-02-24T23:02:54.517
> 
> 标签：php, mongodb, symfony, doctrine-mongodb

查看示例：[http ://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/query-builder-api.html](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/query-builder-api.html)

我无法做一个简单的增量。那就是“票”的价值永远不会改变。我的文档 ID ($postID) 是正确的，我可以获取该文档。只是无法增加。为什么 Mongo 的文档如此混乱？

```
$postID = "5121d0ad253b4af1d8000001";
 $dm = $this->get('doctrine.odm.mongodb.document_manager');
$post = $dm->createQueryBuilder('MainPostsBundle:Post')
->field('id')->equals($postID)
->field('votes')->inc(1)
->getQuery()->execute(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T21:38:12.850

findAndModify 两者都做（见[http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/find-and-update.html](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/find-and-update.html)）

# visual-studio - 使部署在 NuGet 包中的控件显示在 Visual Studio 工具箱中

> ID：15057750
> 
> 赞同：1
> 
> 时间：2013-02-24T23:03:09.413
> 
> 标签：visual-studio, xaml, windows-runtime, nuget, winrt-xaml

有人[询问](http://winrtxamltoolkit.codeplex.com/discussions/434201)如何让 WinRT XAML 工具包控件显示在 Visual Studio 工具箱中。当我查看使用 WinRT XAML 工具包的源代码版本的示例项目时，我可以看到它们确实出现了，我可以在使用 NuGet 打包版本的工具包的应用程序项目中的 Blend 中找到它们 - 只需搜索按名称显示控件，但它们不会以某种方式自动显示在 VS Toolbox 中。我在 Tim Heuer 的文章中看到，如果您进行 VSIX 部署，可以让它们显示在工具箱中，但工具包目前不支持该选项。

是否有可能让它与 NuGet 一起使用，或者使用源代码或构建扩展 SDK 是唯一的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:16:17.930

我认为这样做的可能方法是允许包管理器采用其他参数，然后将它们添加到工具箱

如果默认项目模板每次都重置工具箱项，这可能会很好用，否则我们很快就会看到与版本控制相关的问题。

# iphone - xCode 4.6 - 即使为应用程序启用状态栏也不会出现

> ID：15057752
> 
> 赞同：0
> 
> 时间：2013-02-24T23:03:20.800
> 
> 标签：iphone, ios, xcode, statusbar

我今天开始更新我的应用程序。当我在 iOS 模拟器（运行 xCode 4.6）中启动它时，状态栏在应用程序启动期间不可见（这是我希望它设置的方式，以及我的应用程序在 xCode 中的设置方式）但是当我到达时它也不可见我的标签栏控制器视图和我所有的 UIViewControllers（我有一个基于标签的导航应用程序）。

这造成的问题是 UIViewControllers 在 iOS 模拟器中显示在 4 英寸显示器上时，它会在底部 Tab 导航栏（其高度与状态栏匹配）上方创建一个小空白区域。我尝试将我的应用程序恢复到以前的备份，但仍然无法修复此问题。

帮助表示赞赏。谢谢！

使用最新版本的 xCode (4.6) iOS SDK 6.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:22:39.030

当您希望状态栏重新出现时，请尝试放置：

```
[[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationNone]; 
```

希望这能解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T02:58:07.523

OK 写下这一行：`[[UIApplication sharedApplication]setStatusBarHidden:NO];` 在你的 appdelegate.m 类下这个方法： - `(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`& 然后检查。

# vim - Syntastic 不适用于 MiniBufExplorer vim 插件

> ID：15057760
> 
> 赞同：0
> 
> 时间：2013-02-24T23:03:58.217
> 
> 标签：vim, syntastic, minibufexplorer

首先，我是一个 Windows 用户，使用 VIM 和 vundle 来管理我的插件。

我有 Syntastic vim 插件 ( [https://github.com/scrooloose/syntastic](https://github.com/scrooloose/syntastic) )，它可以很好地突出显示我打开并保存的第一个 javascript 文件的任何语法错误。

我也有 minibufexplorer 插件（[https://github.com/sontek/minibufexpl.vim](https://github.com/sontek/minibufexpl.vim)）。一旦我打开第二个文件，MiniBufExplorer 窗口就会出现，允许我通过:b1、:b2 等在以前打开的文件之间导航。我注意到当这种情况发生时 Syntastic 停止工作。

如果我删除了 minibufexplorer 插件，那么 Syntastic 总是可以工作的。我真的很想让两者一起工作，有人有解决方案吗？如果它与 Syntastic 一起使用，我很乐意使用 minibufexplorer 的替代品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:01:23.697

我正在使用[病原体](https://github.com/tpope/vim-pathogen)来组织我安装的插件。我有[syntastic](https://github.com/scrooloose/syntastic)和[minibufexplorer](https://github.com/fholgado/minibufexpl.vim)，它们可以很好地协同工作。

我根本没有对任何插件进行任何配置。但是为了以一种简单的方式处理缓冲切换（也可以在没有 minibufexplorer 的情况下使用），我在我的`.vimrc`：

```
map § :bnext^M
map ½ :bprevious^M 
```

它是 Esc 键下方的键。只需点击 § 键即可轻松循环浏览所有打开的缓冲区。

[这](http://vimcasts.org/episodes/synchronizing-plugins-with-git-submodules-and-pathogen/)是开始配置的好地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:17:23.903

由于我对替代方案持开放态度，因此我将删除 MiniBufExplorer 插件并在需要时使用 :ls vim 命令查看缓冲区列表。它不如使用 MiniBufExplorer 插件方便，但我发现语法突出显示更重要，并且对这种解决方法感到满意。

# c++ - QT5 迁移无法打开包含文件：'QGraphicsWebView'？

> ID：15057765
> 
> 赞同：5
> 
> 时间：2013-02-24T23:04:04.823
> 
> 标签：c++, migration, qt5

简单代码：

```
#include <QCoreApplication>
#include <QGraphicsWebView>

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    return a.exec();
} 
```

示例 .pro：

```
QT       += core gui declarative network webkit multimedia

TARGET = QTTest
CONFIG   += console
CONFIG   -= app_bundle

TEMPLATE = app

SOURCES += main.cpp 
```

我得到错误：

```
C1083: Cannot open include file: 'QGraphicsWebView': No such file or directory 
```

[QT5中发生了什么？这个类应该像这样被包括在内，所以我不会看到这样的错误？我没有得到一些花哨的 QT5 新功能？](http://qt-project.org/doc/qt-5.0/qtwebkit/qgraphicswebview.html#details)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:52:22.503

在行

```
QT       += core gui declarative network webkit multimedia 
```

替换`webkit`为`webkitwidgets`：

```
QT       += core gui declarative network webkitwidgets multimedia 
```

# c - Bash shell 程序启动 C 程序

> ID：15057766
> 
> 赞同：1
> 
> 时间：2013-02-24T23:04:21.817
> 
> 标签：c, bash

有没有一种方法可以让`bash`shell 程序使用命令行参数`x`来`x`启动（C 程序）进程？

.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T23:07:20.110

这很简单：

```
#!/bin/bash
$1 
```

如果要将其余参数作为参数传递给函数，请执行以下操作：

```
$@ 
```

（即`foo.sh echo hi`执行`echo hi`）

如果您想窃取一些参数并传递其他参数，请使用`shift`：

```
param1=$1
shift
echo $@ # contains parameters 2+ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T23:10:16.357

```
#!/bin/bash
(( $# != 1 )) && echo "Usage: $0 num" && exit -1
for (( c=1; c<=$1; c++ ))
do
   ./run_c_program &
done
wait 
```

*   `$1`表示第一个命令行参数
*   `$#`表示参数的数量
*   `$0`是脚本的名称
*   `run_c_program`是c程序的可执行文件
*   用`&`c程序在后台执行
*   使用`wait`脚本等待 c 程序终止（可选）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T23:07:35.323

您可以尝试使用`system`功能

```
system("./script.sh"); 
```

# git - 过滤 git gui

> ID：15057767
> 
> 赞同：1
> 
> 时间：2013-02-24T23:04:25.447
> 
> 标签：git

我在 Ubuntu 11.4 (Gnome) 上运行 git。

有没有办法让 git gui 忽略某些类型的文件，而不是在“Unstaged Changes”窗口中显示它们？一方面，我希望它忽略不是源代码的子目录和文件。例如，我希望它显示已更改的文件，其后缀为 .php、.css，但不包含后缀为 .jpg、.png。

有没有办法做到这一点？

谢谢，
彼得。

这就是我放入 .gitignore 的内容

```
*.jpg
*.png
Dracula/* 
```

谢谢，彼得。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:51:50.990

您的 .gitignore 应该适用于 Git Gui。

要忽略名为**img/**的目录以及所有**.jpg**和**.png**文件，您的 gitignore 将如下所示：

```
*.jpg
*.png
img/ 
```

将 .gitignore 放在工作目录树的顶层。

编辑：嗯......什么版本的git gui（帮助>>关于）？另外，你能描述一下你的树吗（也许编辑你的问题，因为它比评论更容易格式化）？

```
README.txt
src/
   a.php
img/
   x.jpg
   y.jpg 
```

# c# - 如何在 Windows Phone 8 中异步追加文件

> ID：15057768
> 
> 赞同：3
> 
> 时间：2013-02-24T23:04:49.557
> 
> 标签：c#, append, windows-phone-8

我正在尝试追加到最新 Windows Phone 中的文件。问题是我正在尝试异步执行所有操作，但我不知道该怎么做。

```
 private async void writeResult(double lat, double lng)
    {

        StorageFolder localFolder = ApplicationData.Current.LocalFolder;
        StorageFile storageFile = await localFolder.CreateFileAsync("result.txt", CreationCollisionOption.OpenIfExists);
        Stream writeStream = await storageFile.OpenStreamForWriteAsync();
        using (StreamWriter writer = new StreamWriter(writeStream))
        //using (StreamWriter sw = new StreamWriter("result.txt", true))
        {
            {
                await writer.WriteLineAsync(lat + "," + lng);
                //await sw.WriteLineAsync(lat + "," + lng);
                writer.Close();
                //sw.Close();
            }
        }
    } 
```

到目前为止，我有这个，它可以很好地写入文件，以后我可以读取它，但它会覆盖我拥有的内容而不是新行。注释掉的行显示了如何在没有 WP7 中的流的情况下进行操作，但我也无法让它工作（真正的是附加标志），并且真的应该使用新的 WP8 方法。

任何意见表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-17T16:42:33.703

更简单的方法：

```
await Windows.Storage.FileIO.AppendTextAsync(storageFile, "Hello"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-04T21:18:32.343

我使用了这段代码，对我有用

```
private async System.Threading.Tasks.Task WriteToFile()
        {
            // Get the text data from the textbox. 
            byte[] fileBytes = System.Text.Encoding.UTF8.GetBytes("Some Data to write\n".ToCharArray());

            // Get the local folder.
            StorageFolder local = Windows.Storage.ApplicationData.Current.LocalFolder;

            // Create a new folder name DataFolder.
            var dataFolder = await local.CreateFolderAsync("DataFolder",
                CreationCollisionOption.OpenIfExists);

            // Create a new file named DataFile.txt.
            var file = await dataFolder.CreateFileAsync("DataFile.txt",
            CreationCollisionOption.OpenIfExists);

            // Write the data from the textbox.
            using (var s = await file.OpenStreamForWriteAsync())
            {
                s.Seek(0, SeekOrigin.End);
                s.Write(fileBytes, 0, fileBytes.Length);
            }

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-31T15:53:53.447

我能够成功使用 Oleh Nechytailo 的建议（ Stream.Seek() ）

# r - 仅在添加数字时将 NA 视为零

> ID：15057769
> 
> 赞同：8
> 
> 时间：2013-02-24T23:05:03.083
> 
> 标签：r, data.table, na

计算两个数据表之和时，`NA+n=NA`.

```
> dt1 <- data.table(Name=c("Joe","Ann"), "1"=c(0,NA), "2"=c(3,NA))
> dt1
   Name  1  2
1:  Joe  0  3
2:  Ann NA NA
> dt2 <- data.table(Name=c("Joe","Ann"), "1"=c(0,NA), "2"=c(2,3))
> dt2
   Name  1 2
1:  Joe  0 2
2:  Ann NA 3
> dtsum  <- rbind(dt1, dt2)[, lapply(.SD, sum), by=Name]
> dtsum
   Name  1  2
1:  Joe  0  5
2:  Ann NA NA 
```

我不想用 0 替换所有 NA。我想要的是`NA+NA=NA`并`NA+n=n`得到以下结果：

```
 Name  1  2
1:  Joe  0  5
2:  Ann NA  3 
```

这是如何在 R 中完成的？

**更新：删除了 dt1 中的错字**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-24T23:19:46.500

您可以定义自己的功能以按照您的意愿行事

```
plus <- function(x) {
 if(all(is.na(x))){
   c(x[0],NA)} else {
   sum(x,na.rm = TRUE)}
 }

rbind(dt1, dt2)[,lapply(.SD, plus), by = Name] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T23:06:36.350

```
dtsum  <- rbind(dt1, dt2)[, lapply(.SD, function(x) ifelse(all(is.na(x)), as.numeric(NA), sum(x, na.rm=T))), by=Name] 
```

（包括@Arun 的建议） `na.rm=TRUE`非常好记

# javascript - $.each 在 Firefox 中引发错误（e 未定义）但在 Chrome 中运行良好

> ID：15057770
> 
> 赞同：2
> 
> 时间：2013-02-24T23:05:17.703
> 
> 标签：javascript, jquery, firefox

看到这个 JSFiddle：http: [//jsfiddle.net/cDVQP/1/](http://jsfiddle.net/cDVQP/1/)

如果您同时拥有 Chrome 和 Firefox，您可以看到它在 Chrome 中按预期工作，但在 Firefox Firebug 控制台中，您会收到“TypeError：e 未定义”在 JSFiddle 上，错误显示为“TypeError：obj 未定义”

我花了几个小时寻找这个错误并试图找出它，最后放弃并来到这里。是什么原因造成的？

这是要测试的完整代码：

```
<html>
<body>

  <div id="x"></div>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script type="text/javascript">

    $(document).ready(function(){
      getVideos('cats');
    });

    function getVideos(query){
      var url = 'https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=2&q='+query+'&regionCode=us&type=video&fields=items(id)&key=AIzaSyCCOnozV0lEfnjfMTjpc4TFExAeIGJ6Fh0';
      $.ajax({
        url: url,
        success: function(data){
          appendVideos(data);
        }
      });
    }

    function appendVideos(data){
      // works here
      console.log(data);

      // but not in $.each
      $.each(data.items, function(i, item){
        $('#x').append(item.id.videoId + '<br>');
      });
    }

  </script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T23:12:14.700

我看起来数据是作为字符串传递到 appendVideos 中的，而不是像你想象的那样的对象。我做了一个

```
for(i in data) {
    alert(i+'='+data[i]);
} 
```

它就像一个字符串。

这修复了它：

```
$.ajax({
    url: url,
    dataType: 'JSON',
    success: function(data){
      appendVideos(data);
    }
  });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T23:19:36.420

在 jQuery 1.9.1 的第 622 行发现错误，这是由您传递的 Object 引起的`undefined`。第 622 行调用`obj.length`并因为`undefined`没有称为长度的属性，所以它抛出和错误。

添加`dataType: 'JSON'`到您的`$.ajax`请求将修复此错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T23:17:50.857

除了其他答案，为什么不直接使用[getJSON](http://api.jquery.com/jQuery.getJSON/)呢？

```
var url = 'https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=2&q='+query+'&regionCode=us&type=video&fields=items(id)&key=AIzaSyCCOnozV0lEfnjfMTjpc4TFExAeIGJ6Fh0';
$.getJSON(url, function(data) 
{
    appendVideos(data);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T23:12:38.743

看起来 jQuery 在 Firefox 中不会自动将响应解析为 json，而是将其解释为字符串。

如果您将成功功能更改为以下内容，它应该可以工作：

```
success: function(data){
    if(typeof(data) === 'string') {
        data = JSON.parse(data);
    }

    appendVideos(data);
} 
```

# java - 将迭代器传递给方法

> ID：15057772
> 
> 赞同：2
> 
> 时间：2013-02-24T23:05:36.053
> 
> 标签：java, spring, spring-data

我正在尝试将迭代器作为 Spring Data 中方法的参数传递，但 eclipse 告诉我 Java 正在尝试调用同一方法的普通实体重载。

```
public void persistLandTiles(List<LandTile> tilesToPersist) {
    landTileRepo.save(tilesToPersist.iterator());

} 
```

错误：

```
Bound mismatch: The generic method save(U) of type CRUDRepository<T> is not applicable
 for the arguments (Iterator<LandTile>). The inferred type Iterator<LandTile> is not a
 valid substitute for the bounded parameter <U extends LandTile> 
```

以及被调用的接口方法：

```
@NoRepositoryBean
public interface CRUDRepository<T> extends PagingAndSortingRepository<T, Long> {

    /**
     * persists an entity by forwarding to entity.persist()
     * @param entity to be persisted
     * @return the saved entity (being the same reference as the parameter)
     */
    @Transactional
    <U extends T> U save(U entity);

    /**
     * persists the provided entities by forwarding to their entity.persist() methods
     * @param entities to be persisted
     * @return the input iterable
     */
    @Transactional
    <U extends T> Iterable<U> save(Iterable<U> entities); 
```

我正在自动接线的界面：

```
public interface LandTileRepo extends CRUDRepository<LandTile>, SpatialRepository<LandTile>  {  
} 
```

谁能告诉我我做错了什么，它试图调用“U save(U entity);” 方法而不是“可迭代保存（可迭代实体）；” 方法？

另外，因为它看起来像接受迭代器的方法只是调用 entity.persist() 反正我只是在 foreach 循环中调用 save(U entity) 有什么缺点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T23:08:57.717

> 谁能告诉我我做错了什么，它试图调用“U save(U entity);” 方法而不是“可迭代保存（可迭代实体）；” 方法？

那么`save(Iterable<U> entities)`显然在这里是无效的，因为你有一个`Iterator<E>`，而不是一个`Iterable<E>`。他们是不同的类型。鉴于两个方法重载对于您尝试传递的参数都无效，编译器选择了一个来抱怨......它说的无效并不重要，IMO *。*

目前尚不清楚您为什么要打电话`iterator()`，但您应该尝试将代码更改为：

```
public void persistLandTiles(List<LandTile> tilesToPersist) {
    landTileRepo.save(tilesToPersist);    
} 
```

毕竟，`List<E>`扩展`Iterable<E>`- 所以这个方法调用将是有效的......

# php - 如何使用会话在 php webservices 和 android 之间工作

> ID：15057773
> 
> 赞同：4
> 
> 时间：2013-02-24T23:05:46.583
> 
> 标签：php, android, web-services, session

我有一个使用 php webservices 的 android 应用程序。我创建了 login.php，它将验证从 android 应用程序发送的用户名、密码。验证后，将创建一个会话，如下所示：

```
session_start();
$_SESSION['userId'] = $id;
$_SESSION['username'] = $username; 
```

在客户端我有这个：

```
HttpContext httpContext = new BasicHttpContext();
HttpResponse httpResponse = httpClient.execute(httpPost, httpContext);
HttpEntity entity = httpResponse.getEntity(); 
```

当我调试时，我看到 httpReponse 包含一个 PHPSESSID。我知道在执行任何查询之前，我需要这些信息来比较服务器端的 session_id。

但是，我不知道如何检索这个“Set-Cookie”并将其发送到服务器端进行比较？一段代码或教程将非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:55:48.287

您可以查看[此](https://stackoverflow.com/questions/3587254/how-do-i-manage-cookies-with-httpclient-in-android-and-or-java "这个")答案以获得解决方案。HttpClient 默认支持 cookie，您必须启用它们才能使 php 会话正常工作。

# python - 将线性函数拟合到一组数据后，如何找到函数梯度的误差？

> ID：15057775
> 
> 赞同：1
> 
> 时间：2013-02-24T23:06:01.567
> 
> 标签：python, numpy, matplotlib, curve-fitting

我目前将线性函数拟合到距离与时间图，以便计算出粒子的速度......

```
velocity, intercept = numpy.polyfit(time, displacement, 1) 
```

那么我怎样才能找到这个速度测量中的误差估计值呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T23:25:26.333

你试过[scipy.stats.linregress](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.linregress.html)吗？

```
from scipy import stats
import numpy as np

coefficients = numpy.polyfit(time, displacement, 1)
fitted_data = np.poly1d(coefficients)

slope, intercept, r_value, p_value, std_err = stats.linregress(fitted_data, displacement) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:39:01.560

**你的时间价值是等距放置的吗？如果是，**您可以简单地通过以下方式插入速度

```
velocitiy_between = (displacement[1:]-displacement[:-1])/(time[1:]-time[:-1]) 
```

这些速度现在不是在您的数据点之间定义，而是在您的数据点之间定义。然后，您可以为每个数据点分配其左右近似值的平均值

```
velocity = (velocity_between[1:]+velocity_between[:-1])/2.0 
```

通过这种方式，您可以获得所有内部数据点的速度数组，您可以将其与拟合结果进行比较。

**如果您的时间值不是等距放置的，您仍然可以**使用这种方法。但是您必须根据数据密度为您的错误分配额外的加权因子，以考虑到附近点之间的斜率可以更好地近似这一事实。邻居之间的平均也取决于到邻居的距离。

如果您需要有关第二种情况的更多详细信息，请发表评论。

# functional-programming - 方案 - 带有嵌套 lambda 的斐波那契数列

> ID：15057786
> 
> 赞同：1
> 
> 时间：2013-02-24T23:08:16.323
> 
> 标签：functional-programming, scheme, fibonacci, y-combinator

启发[了这篇](https://stackoverflow.com/questions/7719004/in-scheme-how-do-you-use-lambda-to-create-a-recursive-function)文章。

我试图用嵌套的 lambda 实现一个斐波那契数列-

```
(( (lambda (x) (x x)) ;; evaluate x on x
    ((lambda (fibo-gen)) ;; fibo-gen get another func as arg
    (lambda (N it second first)
     (cond  ;; here the body of the above func ..
       ((= N 1) 1)
       ((= N 1) 1)
       ((= N it) (+ second first))
       (else (fibo-gen (+ it 1) (+ second first) (second)))
       )
     )
    )
   )
 5  1 1 1) 
```

是提示`r5rs:body: no expression in body in: (r5rs:body)`

通过我的检查，每个功能在这里都有一个“身体”，那么我做错了什么？

请注意，我在这里尝试执行的实现是迭代模式，避免重新计算以前的系列..

**编辑 ：**

另一种也有效的模式 -

```
(( (lambda (x) (x x)) ;; evaluate x on x
    (lambda (fibo-gen) ;; fibo-gen body use another lambda ..
    (lambda (N it second first)
     (cond  ;; here the body of the above func ..
       ((= N 1) 1)
       ((= N 2) 1)
       ((= N it) second)
       (else ((fibo-gen fibo-gen) N (+ it 1) (+ second first) second))
       )
     )
    )
   )
 5 1 1 1)
 => 8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:26:59.417

好吧，这是计算斐波那契的一种*相当人为的方法，但仍然是可能的：*

```
(((lambda (x) (x x))
  (lambda (fib-gen)
    (lambda (it second first)
      (if (zero? it)
          first
          ((fib-gen fib-gen) (sub1 it) (+ first second) second)))))
 10 1 0) ; here n = 10

=> 55 
```

如果您的目标是在不使用 的情况下编写递归函数的通用方法`define`，请首先实现[Y-Combinator](http://en.wikipedia.org/wiki/Fixed-point_combinator#Y_combinator)：

```
(define (Y X)
  ((lambda (proc) (proc proc))
   (lambda (proc)
     (X (lambda args
          (apply (proc proc) args)))))) 
```

有了这个，您可以编写具有可变数量参数的匿名递归过程，例如：

```
((Y
  (lambda (fib-gen)
    (lambda (it second first)
      (if (zero? it)
          first
          (fib-gen (sub1 it) (+ first second) second)))))
 10 1 0)  ; here n = 10

=> 55 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T23:35:31.623

```
(lambda (fibo-gen)) 
```

在第二行没有正文。

# python - Python tkinter 中的多处理

> ID：15057789
> 
> 赞同：4
> 
> 时间：2013-02-24T23:08:57.167
> 
> 标签：python, tkinter, multiprocessing

如何在没有多线程的情况下在python中运行多个进程？例如考虑以下问题：-

我们必须制作一个 Gui，它有一个开始按钮，用于启动一个函数（例如，打印所有整数），还有一个停止按钮，这样点击它就会停止该函数。

如何在 Tkinter 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T00:44:51.337

然后，您需要将`Button`小部件与启动工作线程的函数绑定。例如：

```
import time
import threading
import Tkinter as tk

class App():
    def __init__(self, root):
        self.button = tk.Button(root)
        self.button.pack()
        self._resetbutton()
    def _resetbutton(self):
        self.running = False
        self.button.config(text="Start", command=self.startthread)
    def startthread(self):
        self.running = True
        newthread = threading.Thread(target=self.printints)
        newthread.start()
        self.button.config(text="Stop", command=self._resetbutton)
    def printints(self):
        x = 0
        while self.running:
            print(x)
            x += 1
            time.sleep(1) # Simulate harder task 
```

使用这种`self.running`方法，您只能通过更改线程的值来优雅地结束线程。请注意，使用多个线程可以避免`printints`在执行时阻塞 GUI。

我已经阅读[了这个先前的问题](https://stackoverflow.com/questions/15057341/tkinter-and-multi-threading)，我想你为什么在这里明确要求没有多线程的解决方案。在 Tkinter 中，此解决方案可用于其他线程必须与 GUI 部分通信的场景。例如：在渲染某些图像时填充进度条。

但是，正如评论中指出的那样，这种方法对于仅打印数字来说太复杂了。

[在这里](http://effbot.org/tkinterbook/)，您可以找到有关 Tkinter 的大量信息和更多示例。

* * *

**编辑：**

由于您的新问题已关闭，我将在此处更改代码以澄清最后一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T23:13:04.100

您是否尝试使用多处理模块？似乎是你要找的那个。

# objective-c - 用石英创建弧线并为其设置颜色

> ID：15057792
> 
> 赞同：0
> 
> 时间：2013-02-24T23:09:08.747
> 
> 标签：objective-c, cocoa-touch, quartz-graphics

我想创建一个带有边框颜色的圆圈。我不熟悉石英，但我知道这是创建弧的方式：

```
 CGContextAddArc(<#CGContextRef c#>, <#CGFloat x#>, <#CGFloat y#>, <#CGFloat radius#>, <#CGFloat startAngle#>, <#CGFloat endAngle#>, <#int clockwise#>) 
```

但我真的不知道“#CGContextRef c”是什么意思。任何人都可以告诉如何为其添加样式，即颜色、边框等。

此代码不起作用。怎么了？

```
- (void)circle
{
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetRGBStrokeColor(context, 0, 0, 225, 0);
CGContextSetRGBFillColor(context, 0, 0, 255, 0);
CGRectMake(10, 10, 10, 10);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:21:22.067

CGContext 被 UIKit 隐藏起来，它提供了更高级别的处理图形的方法，例如[`UIBezierPath`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBezierPath_class/Reference/Reference.html)，但在某些情况下，您必须直接使用 Quartz API。

您可以`CGContextRef`通过调用获得[`UIGraphicsGetCurrentContext`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/doc/uid/TP40006894-CH3-SW11)，就像这样-

```
CGContextRef context = UIGraphicsGetCurrentContext(); 
```

到达这里后，您可以使用整个[CGContext 函数](https://developer.apple.com/library/ios/#documentation/graphicsimaging/reference/CGContext/Reference/reference.html)库，例如[`CGContextSetRGBStrokeColor`](https://developer.apple.com/library/ios/documentation/graphicsimaging/reference/CGContext/Reference/reference.html#//apple_ref/c/func/CGContextSetRGBStrokeColor)和[`CGContextSetLineWidth`](https://developer.apple.com/library/ios/documentation/graphicsimaging/reference/CGContext/Reference/reference.html#//apple_ref/c/func/CGContextSetLineWidth)以您喜欢的方式绘制弧线。

请注意，如果您使用您提到的功能，在将弧添加到 CGContext 的路径后，您仍然必须使用`CGContextDrawPath`. 如果你只是想画一个圆圈，你可能会更好`CGContextStrokeEllipseInRect`。

# php - PHP：JSON格式输出到一长单行

> ID：15057797
> 
> 赞同：3
> 
> 时间：2013-02-24T23:09:42.733
> 
> 标签：php, json, api

这是我的 PHP 脚本。

```
do2:locu alexus$ cat venuesearch.php 
<?php

$KEY='XXXXXXXXXXXXXXX';
$URL='http://api.locu.com/v1_0/venue/search/?api_key=';

$ch=curl_init();
curl_setopt($ch, CURLOPT_URL, $URL.$KEY);
curl_setopt($ch, CURLOPT_HEADER,0);

print_r(json_decode(curl_exec($ch),TRUE));

?>
do2:locu alexus$ 
```

`locu`服务以 JSON 格式提供输出。当我运行脚本时，我得到的输出都是长单行。

输出样本：

```
do2:locu alexus$ php venuesearch.php 
{"meta": {"cache-expiry": 3600, "limit": 25}, "objects": [{"categories": ["restaurant"], "country": "United States",.......... 
```

我错过了什么？我如何访问这些变量中的每一个？将其转换为 XML 是否有意义？

*** 更新 *** : .. 在[PHP 的示例 #1：json_decode - 手动](http://php.net/manual/en/function.json-decode.php)显示格式化输出，如果我使用`true`然后我得到数组，我既没有得到格式化输出也没有得到数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T23:22:34.733

尝试添加：

`curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);`

在执行之前。

看起来执行只是简单地打印响应，而不是将其作为要由 json_decode 处理的字符串返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T23:23:20.923

您应该查看原始数据：

```
$json = curl_exec($ch);
var_dump($json); 
```

只有当 API 返回一个 json 编码的 json 字符串时，您描述的输出才有可能，如下所示：

```
"{\"meta\": {\"cache-expiry\": 3600, \"limit\": 25}, \"objects\": [{\"categories\": [\"restaurant\"], \"country\": \"United States\",.......... ' 
```

（注意外引号，它们是字符串的一部分）

这是非常奇怪的，并且绝对是 API 中的一个错误，但解决它的唯一方法是对其进行两次解码：

```
$data = json_decode(json_decode($json)); 
```

**编辑：**忘记这一点，[Stegrex 已经弄清楚了](https://stackoverflow.com/a/15057910/664108)。

# c - 在c中将向量转换为字符串的问题

> ID：15057803
> 
> 赞同：1
> 
> 时间：2013-02-24T23:10:35.463
> 
> 标签：c

我正在尝试使用以下函数将向量转换为字符串。

```
char* my_vect2str(char** input)
{
    int i;
    char* ret = (char*)xmalloc(sizeof(char*));
    for(i=0; input[i] != NULL; i++)
    {
        if(*input[i] == '\0')
            ret[i] = ' ';
        else
            ret[i] = *input[i];
    }
    ret[i] = '\0';
    return ret;
} 
```

这似乎只是获取向量中每个字符串的第一个字符。如何更改我的 for 循环以使其正常工作？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T23:18:34.690

您的 malloc 应该是指针内容的大小，而不是指针本身。您也不需要强制转换 malloc void *。您需要一个内部循环计数器才能遍历指针的两个维度。这应该有效：

```
char* my_vect2str(char** input)
{
    int i;
    int count = 0;
    char* ret = (char*)malloc(sizeof(char*)); // should be a larger size
    for(i=0; input[i] != NULL; i++)
    {
        int j = 0;
        while(1){
            if(input[i][j] == '\0'){
                ret[count++] = ' ';
                break;
            }else{
                ret[count++] = input[i][j];
            }
            j++;
        }
    }
    ret[count] = '\0';
    return ret;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T23:25:06.960

第一个循环计算输入中字符串的总大小。然后，分配空间并将字符串连接到 ret。

```
char* my_vect2str(char** input)
{
    int i, j, k = 0;
    char* ret;
    int size = 0;
    int len;
    char* inp = input[k++];

    while (inp != NULL) {
        size += strlen(inp);
        inp = input[k++];
    }

    ret = malloc((size * sizeof(char)) + 1);
    memset(ret, 0, size + 1);

    i = 0;
    j = 0;
    while (i < size) {
        if (input[j] != NULL) {
            len = strlen(input[j]);
            memcpy(&ret[i], input[j], len);
            i += len;
        }
        ++j;
    }

    return ret;
} 
```

# python - Webfaction 中的 Tornado 网络服务器

> ID：15057804
> 
> 赞同：2
> 
> 时间：2013-02-24T23:10:37.350
> 
> 标签：python, django, tornado, instagram, webfaction

我从 Web 开发开始。我正在尝试使用 Instagram API 和 Django 开发和 webapp。我看到很多人使用 Tornado Web Server 进行实时订阅。所以我使用 Webfaction 作为主机并找到了这段代码，所以我可以用 Tornado Web Server 提供的“WSGI Container”来包装我的 Django 项目：

```
import os
import tornado.httpserver
import tornado.ioloop
import tornado.wsgi
import tornado.web
import sys
import django.core.handlers.wsgi
sys.path.append('/path/to/project')

class HelloHandler(tornado.web.RequestHandler):
    def get(self):
        self.write('Hello from tornado')

def main():
    os.environ['DJANGO_SETTINGS_MODULE'] = 'myproject.settings' # path to your settings module
    wsgi_app = tornado.wsgi.WSGIContainer(django.core.handlers.wsgi.WSGIHandler())
    tornado_app = tornado.web.Application(
            [
                    ('/hello-tornado', HelloHandler),
                    ('.*', tornado.web.FallbackHandler, dict(fallback=wsgi_app)),
            ]
    )
    http_server = tornado.httpserver.HTTPServer(tornado_app)
    http_server.listen(8080)
    tornado.ioloop.IOLoop.instance().start()

if __name__ == "__main__":
    main() 
```

所以我在我的 Webfaction 服务器中运行这个 python 脚本，每次我尝试访问“ [http://mywebsite.com/hello-tornado/](http://mywebsite.com/hello-tornado/) ”似乎都不起作用。我知道我在该端口上运行 Tornado Web 服务器，但不知道如何从浏览器或类似的东西访问。我在这里做错了什么？感谢您的帮助和耐心。将为每个答案提供网络高五。

编辑：我真正想做的是，我想通过 Tornado 接收来自我使用 Instagram 实时订阅 API 进行的订阅的所有调用，因为我有一个回调 url “ [http://mysite.com/sub](http://mysite.com/sub) “我希望能够通过 Tornado 接收。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T23:46:07.553

您在端口 8080 启动服务器，Web 浏览器默认使用端口 80，尝试使用：[http ://mywebsite.com:8080/hello-tornado](http://mywebsite.com:8080/hello-tornado)

如果你想使用 80 端口并且你已经在盒子里运行了一个 web 服务器，你可以尝试遵循 Ali-Akber Saifee 的建议，或者直接从服务器运行 WSGI 应用程序，使用类似 mod_python ( [http://www.modpython .org](http://www.modpython.org) )，您将失去运行 Tornado 代码的能力，但 Django 可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:53:19.177

您必须创建一个自定义应用程序（侦听端口），记下分配给您的应用程序的端口，然后配置 tornado 以在该端口上服务：http_server.listen(my port) 您还可以避免龙卷风并直接通过安装 django 启动应用程序。

# smtp - 每个可以接收邮件的 SMTP 服务器都必须能够发送失败通知吗？

> ID：15057806
> 
> 赞同：0
> 
> 时间：2013-02-24T23:11:10.947
> 
> 标签：smtp

我正在考虑实现我自己的可以接收和存储邮件的 SMTP 服务器。由于这是一个小型的业余项目，我更愿意让代码保持简单——例如，我不想实现发送邮件的逻辑。但是，[RFC 5321](https://www.rfc-editor.org/rfc/rfc5321)的以下部分让我担心：

> 服务器必须
> 对邮件数据指示结束后的处理仅
> 部分成功的情况进行特殊处理。如果在接受多个
> 收件人和邮件数据后，SMTP 服务器发现邮件
> 数据可以成功传递给部分收件人，但不是全部收件人，则可能会发生这种情况
> 。在这种情况下，对 DATA 命令的响应必须是
> OK 响应。但是，SMTP 服务器必须编写并向
> 消息的发起者发送“无法投递的邮件”通知
> 消息。

这是否意味着，即使我通常只`250 OK`在确定邮件已安全存储时才返回，我也被迫实施发送失败通知的东西，以防万一有人决定向现有邮件和非邮件邮件发送邮件现有的邮件地址？有什么办法可以在不违反标准的情况下绕过它？如果没有，`452 Too many recipients (my RCPT limit is 1, not 100 as required by RFC 5321)`当有人试图将邮件发送给多个收件人时，只发回会有多糟糕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T23:22:42.720

> 在这种情况下，对 DATA 命令的响应必须是 OK 响应。但是，SMTP 服务器必须编写并向消息的发起者发送“无法投递的邮件”通知消息。

这对我来说似乎相当明确。如果你要符合标准，你**必须**既返回一个 OK 响应（因为消息可以传递给某些接收者），又向发起者发送失败通知（因为它不能传递给其他接收者）。

另一方面，您的问题还提到您只会接受单个收件人的交付，所以a）您已经通过不允许100个收件人和b）“邮件”的失败模式让自己不符合标准数据可以成功地传递给一些但不是全部的接收者”，如果只有一个接收者，就不可能了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:10:17.377

在重新考虑情况之后，我认为如果服务器可以确保邮件可以在`RCPT`命令时间发送到所有收件人，我认为实际上可以以符合 RFC 的方式执行此操作——毕竟，个别收件人可以在发送时被拒绝。`RCPT`收到相应的命令。当然，这意味着例如服务器必须确保有足够的硬盘空间可用于每个收件人和最大邮件大小。如果收件人当前的邮箱大小加上最大邮件大小大于最大邮箱大小，服务器可能会拒绝向收件人发送邮件。

当然，为了支持并发，实际实现要复杂一些。

# r - 生存包的 coxph 函数中的时间相关数据

> ID：15057808
> 
> 赞同：1
> 
> 时间：2013-02-24T23:11:43.813
> 
> 标签：r, survival-analysis

在生存分析中考虑时间相关数据时，您有多个个体受试者的起止时间，每个起止时间都有协变量的测量值。coxph 函数如何跟踪它将开始和停止时间与协变量相关联的主题？

该函数如下所示

```
coxph(Surv(start, stop, event, type) ~ X) 
```

您的数据可能如下所示

```
subject | start   | stop   | event  | covariate |
--------+---------+--------+--------+-----------+
1       | 1       | 7      | 0      | 2         |
1       | 7       | 14     | 0      | 3         |
1       | 14      | 17     | 1      | 6         |
2       | 1       | 7      | 0      | 1         |
2       | 7       | 14     | 0      | 1         |
2       | 14      | 21     | 0      | 2         |
3       | 1       | 3      | 1      | 8         | 
```

如果没有单独的主题说明符，该功能如何逃脱？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:40:50.500

我的理解是，生存分析对个体不感兴趣，它关注的是每个时间点的总计数，因此主题说明符无关紧要。相反，基于计数，可以估计任何特定对象在特定时间在特定治疗下存活/死亡的概率。

# facebook-android-sdk - 如果安装了官方应用程序，Facebook 登录将不起作用

> ID：15057816
> 
> 赞同：1
> 
> 时间：2013-02-24T23:12:31.047
> 
> 标签：facebook-android-sdk

我正在尝试在我的 android 应用程序中设置 Facebook，但我遇到了问题，甚至示例都不起作用！然后我在不同的设备上再次尝试，我发现这些示例只适用于**没有安装官方 facebook 应用程序**的设备。在我看来这完全不合逻辑，所以我检查了：安装 Facebook 应用程序但它不再工作了，删除它，它工作正常，然后没有问题。所以在这里我的问题是：当 Facebook 官方应用程序已经安装在设备中时，为什么会这样以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:50:03.913

看起来您尚未将密钥哈希添加到应用仪表板或无效。要使用 Facebook for Android 应用程序正确处理 Facebook 登录，您必须将有效的密钥哈希添加到应用程序仪表板。看看这个：[https ://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/](https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/)

检查“应用仪表板配置”和“故障排除”部分。

# android - 如何显示弹出框以在 webview android 上播放视频

> ID：15057821
> 
> 赞同：2
> 
> 时间：2013-02-24T23:12:49.167
> 
> 标签：android, android-layout, android-webview

我想在用户单击我的 web 视图上的视频链接时显示弹出框，而不是弹出框应该显示并进入该帧布局视频表面播放我的视频从 sd 卡和视频完成后帧布局自动关闭并且 web 视图是再次显示。我在 google 和 stackoverflow 上搜索有一些帮助，但我不了解编写代码的技术。我的脑海中有一个困惑，我如何显示弹出框架布局以及如何显示 webview。

目前我正在检查扩展，如果我发现视频扩展比我触发媒体播放器意图。但我不希望那样。我希望它应该在我的网络视图中播放，但在弹出式视频表面中。

这是我的代码，我的布局文件只包含 webview 没有其他内容，我正在从我的资产文件夹加载 html，我正在从 sd 卡播放视频..

任何帮助表示赞赏

```
 setContentView(R.layout.activity_main);        
    WebView webView = (WebView) findViewById(R.id.webview);
    String html = "<embed src=\"file:///android_asset/" + "test.html" + " \"play=\"true\" loop=\"true\" width=\"100%\" height=\"100%\"> <embed>";
    webView.getSettings().setPluginState(WebSettings.PluginState.ON);
    webView.getSettings().setAllowFileAccess(true);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.loadDataWithBaseURL("file:///android_asset/", html, "text/html", "utf-8", null);

    WebViewClient webViewClient = new WebViewClient();
    webView.setWebViewClient(webViewClient);
    webView.setWebViewClient(new WebViewClient(){
        @Override
        public void onPageFinished(WebView view, String url) {
            // TODO Auto-generated method stub
            super.onPageFinished(view, url);
        }
        @Override
        public void onLoadResource(WebView view, String url) {
              if (url.endsWith(".m4v")) {
                Intent intent = new Intent(Intent.ACTION_VIEW, Uri
                        .parse(url));
                intent.setDataAndType(Uri.parse(url), "video/*");
                view.getContext().startActivity(intent);
            }
            else
            {
                super.onLoadResource(view, url);
            }
        }
    });}
    } 
```

这是HTML文件

```
<html lang="en">
<head>
<meta charset=utf-8>
<title>Sample HTML5 Structure</title> 
<SCRIPT LANGUAGE="JavaScript">
function playvideo(url){
window.location=url;
 }
 </SCRIPT>
</head>
 <body>
<video src="file:///sdcard/kummar.m4v" width="300"      onclick="playvideo('file:///sdcard/ku<p>testing of video element.</p>
  </video>
  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:43:50.247

为此尝试自定义对话框

```
 Dialog mVideoDialog ;
VideoView mVideoFullScreen;
 MediaController controller; 
```

在你的 increate 方法中添加这个

```
 mVideoDialog = new Dialog(this);
    mVideoDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    mVideoDialog.setContentView(R.layout.dialog);
    mVideoDialog.setOnKeyListener(this);
    mVideoFullScreen = (VideoView) mVideoDialog.findViewById(R.id.videoview1);
    controller = new MediaController(this);
    HelloWebViewClient webViewClient = new HelloWebViewClient();
    webView.setWebViewClient(webViewClient);
     }

 private class HelloWebViewClient extends WebViewClient
{ 
 @Override public boolean shouldOverrideUrlLoading(WebView view, String url)
 {

     if (url.contentEquals("file:///android_asset/01")) {
         showVideo(01); //check user click url from webview and pass int
     }
     else if (url.contentEquals("file:///android_asset/02"))
     {
        showVideo(02);//pass int to determine which video to play
     }
     else
     {
     System.out.println("DDD URL: "+url.toString()); view.loadUrl(url);  
     }
     return true;       
     } 
```

这是 showVideo 方法

```
public void showVideo(int i) {
    // TODO Auto-generated method stub
    if(i==01)
    {
     mVideoDialog.show();
     mVideoFullScreen.setVideoPath("file:///sdcard/video file name.m4v");
     controller.setMediaPlayer(mVideoFullScreen);
     mVideoFullScreen.setMediaController(controller);
     mVideoFullScreen.requestFocus();
     mVideoFullScreen.start();
    }else
    {  } } 
```

# java - 如何编写自定义 JOptionPane 按钮？

> ID：15057828
> 
> 赞同：1
> 
> 时间：2013-02-24T23:13:22.127
> 
> 标签：java, swing, joptionpane

我有几个关于`JOptionPane`课堂的问题。为什么`JOptionPane`自定义按钮默认退出？例如，如果我单击清除，为什么程序会关闭而不清除文本字段并保持静止？另外，如果我单击添加或从文件中检索数据，为什么程序会关闭？为什么他们不像`JButtons`在框架上那样做出反应？

您能否向我展示一个示例，说明如何在不关闭窗口的情况下清除或转到以前的表格。

代码：

```
String[] buttons = new String[] {"Add", "Clear", "Previous Window", "Retrieve"};
int example = JOptionPane.showOptionDialog(mypanel, mypanel, "Choose", 
    JOptionPane.YES_NO_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE,
    null, buttons , buttons [0]);` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:49:30.400

您可能对教程文章[*Stopping Automatic Dialog Closing*](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#stayup)感兴趣，该文章说明了使用 a`PropertyChangeListener`来覆盖默认行为。这[`JOptionTimeTest`](https://stackoverflow.com/a/12451673/230513)是一个相关的例子。

# php - 是否可以使查询结果运行另一个查询？

> ID：15057831
> 
> 赞同：2
> 
> 时间：2013-02-24T23:13:30.313
> 
> 标签：php, mysql

我有这个查询：

```
$aircraft_query = "SELECT COUNT(aircraft) as total, aircraft FROM db_pireps WHERE pilotid = $pilotid GROUP BY aircraft ORDER BY total DESC LIMIT 6";
$planes = DB::get_results($aircraft_query); 
```

并且使用 foreach 语句，我可以在表中生成行来显示由`pilotid`. 但是，我现在想`RESULT`链接到另一个表并从那里提取数据，例如飞机类型，在一个`fullname`列中。

我有这个：`<?php echo $aircraft->fullname; ?>`但该数据在不同的表中。因此，如果`aircraft`是 30，它将访问`db_aircrafts`表中的第 30 条记录并获取`fullname`列。我怎样才能做到这一点？甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:17:05.517

您应该使用 SQL 连接。

```
SELECT COUNT(A.aircraft) as total, A.aircraft, B.fullname
 FROM db_pireps A
 LEFT JOIN pilot_data_table B ON A.pilotid = B.id
 WHERE A.pilotid = $pilotid
 GROUP BY A.aircraft ORDER BY total DESC LIMIT 6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T23:17:28.383

您需要的是一张表[`JOIN`](http://en.wikipedia.org/wiki/Join_%28SQL%29)（另请参阅[MySQL 手册中的 JOIN](http://dev.mysql.com/doc/refman/5.0/en/join.html)）：

```
SELECT 
    COUNT(a.aircraft) as total
    , a.aircraft
    , b.fullname AS aircraft_name
FROM db_pireps AS a
JOIN db_aircraft AS b
    ON a.aircraft = b.id
WHERE pilotid = {$pilotid}
GROUP BY aircraft 
ORDER BY total DESC 
LIMIT 6 
```

# wordpress - 重定向到其他地址 Wordpress MAMP

> ID：15057834
> 
> 赞同：1
> 
> 时间：2013-02-24T23:13:38.757
> 
> 标签：wordpress, mamp

我将我的 wordpress 从我的服务器移动到我更改的数据库中的本地主机

> [http://www.hybrid-tech.net/praxi3](http://www.hybrid-tech.net/praxi3)到`http:// localhost:8888/praxi3`

之后，当我尝试在本地主机上查看该网站时，我去了

> `http:// localhost:8888/praxi3`

但它把我重定向到

> `http:// localhost/praxi3`

我不明白为什么。我多次备份还原此数据库，但仍然遇到此问题。

在此先感谢您的帮助。

PD：我正在使用 mamp。本地主机链接没有我的意思的空间`http://lo....`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T23:19:31.577

您应该检查您的 mamp 配置：您的 apache 端口是否设置为 80？如果是这样，服务器会将您重定向到 80（默认 Web 端口）尝试将其设置为 8888 端口并使用刷新缓存命令刷新您的页面：

```
ctrl+r or apple+r 
```

# javascript - 如何记录文本在页面上的位置？

> ID：15057839
> 
> 赞同：1
> 
> 时间：2013-02-24T23:14:05.383
> 
> 标签：javascript, jquery, google-chrome, dom, google-chrome-extension

我想要做的是允许用户在页面上选择一段文本并突出显示它，然后能够加载此选择并在进一步访问时重新突出显示它（使用纯客户端 JavaScript，我打算打包这将成为未来的 Chrome 扩展程序）。

我正在选择带有 的文本`window.getSelection`，但是 AFAIK 这并没有给我任何关于所选文本（或元素）的索引或放置数据。

我目前能想到的唯一方法是记录实际文本并搜索它，但这会引发唯一性问题（相同的文本字符串可能会在给定页面上多次出现）。有没有一种方法可以向上遍历 DOM 树并将“路径”存储到包含元素（然后只需要担心那个元素内的唯一性）？如果没有更好的方法，我会很高兴。

谢谢

编辑：我现在正在做的事情与此类似：http: [//jsfiddle.net/e3XX6/](http://jsfiddle.net/e3XX6/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T23:32:30.187

你检查过方法`selection`返回的对象`getSelection()`吗？例如，它具有一个`anchorNode`属性，而该属性又具有一个`parentElement`属性。最后一个属性将告诉您包含文本的元素。

查看这个版本的小提琴（打开你的控制台！）：http: [//jsfiddle.net/e3XX6/1/](http://jsfiddle.net/e3XX6/1/)

此外，由于您要将此作为 Chrome 扩展程序，我只建议使用 HTML5 Web Storage 来记住选择。

# ruby-on-rails - 带有迁移的 git 分支运行

> ID：15057844
> 
> 赞同：0
> 
> 时间：2013-02-24T23:14:51.403
> 
> 标签：ruby-on-rails

我检查了 git 中的一个分支，以试验开发一项涉及进行三个迁移的功能，我已经运行了该功能。在数据库中保留非常少量的数据并不重要。将分支合并回master时如何处理？我应该在合并之前回滚迁移，然后在合并后再次运行它们（正如一个 SO 答案所建议的那样），还是我保持原样并将所有内容提交到分支然后合并它而不回滚任何内容。另一个 SO 答案建议从 gitignore 文件中删除 db，但不清楚是否仅在保留数据可能很重要的情况下才需要这样做。

```
# Ignore the default SQLite database.
/db/*.sqlite3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T00:07:10.657

`*.sqlite3`你不应该在 git 中跟踪你的开发文件。

你应该

1.  合并`master`到你的分支
2.  确保一切顺利
3.  查看`master`
4.  将分支合并回`master`
5.  继续发展

合并将从分支中提取您的迁移。您可以在合并之前回滚，进行合并，然后迁移，但没有必要；最后生成的架构将是相同的。

* * *

在需要回滚/迁移的情况下，您之间的迁移`master`和分支之间可能会以某种方式相互冲突。当您“确保一切正常”时，您将在上面的第 2 步中解决此问题。

作为一般规则，您应该能够获取一个完全空白的数据库，运行`rake db:migrate`并最终获得一个最新的数据库结构，而不会出现任何故障。这就是为什么上面的步骤 #2 很重要，以确保您不会将中断/冲突的迁移合并回`master`.

至于在开发过程中可能会丢失数据的情况，这就是固定装置的用途。您可以使用 Rails 播种功能，或类似[factory_girl](https://github.com/thoughtbot/factory_girl)的 gem 。

# python - HTTPS POST 请求 Python，返回 .csv

> ID：15057847
> 
> 赞同：2
> 
> 时间：2013-02-24T23:15:16.257
> 
> 标签：python, post, https, urllib, httplib

我想向应该以 .csv 文件响应的 HTTPS 站点发出发布请求。我有这个 Python 代码：

```
try:
    #conn = httplib.HTTPSConnection(host="www.site.com", port=443) 
```

=> 给出一个 BadStatusLine: ' ' 错误

```
 conn = httplib.HTTPConnection("www.site.com");
    params  = urllib.urlencode({'val1':'123','val2':'abc','val3':'1b3'})
    conn.request("POST", "/nps/servlet/exportdatadownload", params)
    content = conn.getresponse()
    print content.reason, content.status
    print content.read()
    conn.close()
except:
    import sys
    print sys.exc_info()[:2] 
```

输出：

```
Found 302

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<HTML><HEAD>
<TITLE>302 Found</TITLE>
</HEAD><BODY>
<H1>Found</H1>
The document has moved <A HREF="https://www.site.com/nps/servlet/exportdatadownload">here</A>.<P>
<HR>
<ADDRESS>Oracle-Application-Server-10g/10.1.3.5.0 Oracle-HTTP-Server Server at mp-www1.mrco.be Port 7778</ADDRESS>
</BODY></HTML> 
```

我究竟做错了什么？如何“捕获”返回的 .csv 文件？我尝试了使用 Chrome 扩展（高级 Rest 客户端，这正在工作......）的 POST 请求

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-29T12:23:24.547

带有 302 错误的 HTML 输出是因为您使用 HTTP 而不是 HTTPS 连接到站点，这在您的代码中：

```
conn = httplib.HTTPConnection("www.site.com"); 
```

大概您这样做是因为代码的注释掉部分存在其他一些错误。

如果我试图这样做，我会使用[Requests](http://github.com/kennethreitz/requests)，它带有非常清晰的[文档](http://docs.python-requests.org/en/latest/index.html)。使用 Requests 代码将类似于：

```
import requests

url = "https://www.example.com/nps/servlet/exportdatadownload"
payload = { "val1": "123", "val2": "abc", "val3": "1b3" }
r = requests.post(url, data=payload, verify=True) 
```

CSV 文件应该在 r.content 中，可以写入文件。

# php - 由于级联下降而出汗和尖叫

> ID：15057848
> 
> 赞同：1
> 
> 时间：2013-02-24T23:15:25.040
> 
> 标签：php, jquery, mysql, json, cascadingdropdown

在寻找了大约五天的答案以解决我的问题后，我想我不妨寻求一些帮助。我正在处理一个我似乎无法开始工作的级联下拉菜单。

Mysql 数据保存在一张表中，我们有国家 (varchar) 和地区 (varchar)、文档名称 (varchar)、文档链接 (varchar) 以及添加日期 (timestamp)。

我希望第一个下拉菜单指向包含区域的第二个下拉菜单。我查看了很多教程，但似乎找不到一个使用 PDO 或 Mysqli 的教程。提交表单后，我希望文档的名称显示为超链接和添加的日期。

我开始使用：[http ://www.electrictoolbox.com/json-data-jquery-php-mysql/](http://www.electrictoolbox.com/json-data-jquery-php-mysql/)

这是我的代码：

“下拉站点”

```
 <form>

    <select name="country" id="countryname">
        <option>Sverige</option>
        <option>Norge</option>
        <option>Danmark</option>
        <option>Finland</option>

    </select>  

    <select name="region" id="regionname">
    </select>

</form> 
```

Javascript (jQuery)

```
function popregion() {

$.getJSON('/blanketter_func2.php', {countryname:$('#countryname').val()}, function(data) {

    var select = $('#regionname');
    var options = select.prop('options');
    $('option', select).remove();

    $.each(data, function(index, array) {
        options[options.length] = new Option(array['region']);
    });
});
}

$(document).ready(function() {

popregion();
$('#countryname').change(function() {
    popregion();
});
}); 
```

函数文件 (blanketed_func2.php)。

```
<?php
$dsn = "mysql:host=localhost;dbname=blanketter";
$username = "root";
$password = "root";
$pdo = new PDO($dsn, $username, $password);

$rows = array();
if(isset($_GET['countryname'])) {
$stmt = $pdo->prepare("SELECT region FROM blanketter WHERE country = ? ORDER BY         region");
$stmt->execute(array($_GET['countryname']));
$rows = $stmt->fetchAll(PDO::FETCH_ASSOC);

}
echo json_encode($rows);

?> 
```

我正在使用 jQuery 版本 1.9.1，任何帮助将不胜感激！

/斯坦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:06:35.570

问题出在 Javascrip 上。从 Jquery 1.9 开始，.live 已更改为 .on。正确的 Jquery 代码是：

```
var formObject = {
run : function(obj) {
    if (obj.val() === '') {
        obj.nextAll('.update').html('<option value="">----</option>').attr('disabled', true);
    } else {
        var id = obj.attr('id');
        var v = obj.val();
        jQuery.getJSON('func/blankett_func.php', { id : id, value : v }, function(data) {
            if (!data.error) {
                obj.next('.update').html(data.list).removeAttr('disabled');
            } else {
                obj.nextAll('.update').html('<option value="">----</option>').attr('disabled', true);
            }
        });
    }
}
};
$(function() {

$('.update').on('change', function() {
    formObject.run($(this));
});

}); 
```

# windows-phone-7 - HttpWebRequest.BeginGetRequestStream 没有异步行为

> ID：15057850
> 
> 赞同：1
> 
> 时间：2013-02-24T23:15:59.517
> 
> 标签：windows-phone-7, windows-8

在 Windows-8 程序中，我按如下方式调用 HttpWebRequest.BeginGetRequestStream，其中之前已设置 httpConnection：

```
private System.Net.HttpWebRequest httpConnection;
public System.IO.Stream OutputStream 
{
    get 
    {
        lock(syncobj) 
        {
            httpConnection.BeginGetRequestStream
                (new AsyncCallback(getRequestResultCallback), null);
            ...
        }
    }
} 
```

此代码在 Windows Phone 7 上运行没有问题。由于一些同步问题我不需要在这里讨论，我期望（需要）执行 BeginGetRequestStream 的代码和执行 getRequestResultCallback 的代码在不同的线程上。我认为既然 getRequestResultCallback 是通过 AsyncCallback 运行的，那就是这种情况。它在 Windows 7 中，但并不总是在 Windows 8 中。下面，我添加了一个堆栈跟踪，显示 BeginGetRequestStream 和 getRequestResultCallback 在同一线程上运行的运行。

我将不胜感激任何帮助理解这个问题。

在此先感谢，约翰爱默生

```
ua-desktop.exe!com.webalo.up.ua.wp.net.WpUaHttpRequest.getRequestResultCallback(System.IAsyncResult 结果) 第 120 行 C#
System.dll!System.Net.LazyAsyncResult.Complete(System.IntPtr userToken) + 0x65 字节    
System.dll!System.Net.ContextAwareResult.CaptureOrComplete(ref System.Threading.ExecutionContext cachedContext, bool returnContext) + 0x81 字节    
System.dll!System.Net.ContextAwareResult.FinishPostingAsyncOp() + 0x24 字节    
System.dll!System.Net.HttpWebRequest.BeginGetRequestStream(System.AsyncCallback 回调，对象状态) + 0x289 字节   
ua-desktop.exe!com.webalo.up.ua.wp.net.WpUaHttpRequest.OutputStream.get() 第 31 行 + 0x37 字节 C#
...
mscorlib.dll!System.Threading.Tasks.Task.InnerInvoke() + 0x49 字节
mscorlib.dll!System.Threading.Tasks.Task.Execute() + 0x32 字节
mscorlib.dll!System.Threading.Tasks.Task.ExecutionContextCallback(object obj) + 0x15 字节  
mscorlib.dll!System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback 回调, 对象状态, bool preserveSyncCtx) + 0xa7 字节  
mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback 回调, 对象状态, bool preserveSyncCtx) + 0x16 字节  
mscorlib.dll!System.Threading.Tasks.Task.ExecuteWithThreadLocal(ref System.Threading.Tasks.Task currentTaskSlot) + 0xca 字节   
mscorlib.dll!System.Threading.Tasks.Task.ExecuteEntry(bool bPreventDoubleExecution) + 0xb3 字节    
mscorlib.dll!System.Threading.Tasks.Task.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem() + 0x7 字节
...

```

# c# - 在 C# 中创建方法，语法、括号和传递问题

> ID：15057855
> 
> 赞同：-3
> 
> 时间：2013-02-24T23:16:17.373
> 
> 标签：c#, methods, module

我正在尝试在 Visual Studio 中创建一个简单的程序，将各种汽车付款加在一起，然后计算年度成本和使用方法。

我在使用大括号时遇到了一些问题，如果我正确地传递了变量。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {

            double loanPayment = 0;
            double insurance = 0;
            double gas = 0;
            double oil = 0;
            double tires = 0;
            double maintenance = 0;
            double monthlyTotal = 0;
            double annualTotal = 0;

            Console.WriteLine("Please enter the following expenses on a per month basis");
            {
                getInput(loanPayment, insurance, gas, oil, tires, maintenance);
                calculate(monthlyTotal, annualTotal);
                Console.WriteLine("Your monthly total is ${0:F2} and your annual total is ${1:F2}", monthlyTotal, annualTotal);
        }
    }//endMain

    static void getInput( ref double loanPayment, ref double insurance, ref double gas, ref double oil, ref double tires, ref double maintenance, ref double monthlyTotal, ref double annualTotal)
{
            Console.WriteLine("How much is the loan payment?");
            while (!double.TryParse(Console.ReadLine(), out loanPayment))
            Console.WriteLine("Error, enter a number");

            Console.WriteLine("How much is the insurance?");
            while (!double.TryParse(Console.ReadLine(), out insurance))
                Console.WriteLine("Error, enter a number");

            Console.WriteLine("How much is the gas?");
            while (!double.TryParse(Console.ReadLine(), out gas))
                Console.WriteLine("Error, enter a number");

            Console.WriteLine("How much is the oil?");
            while (!double.TryParse(Console.ReadLine(), out oil))
                Console.WriteLine("Error, enter a number");

            Console.WriteLine("How much is the tires?");
            while (!double.TryParse(Console.ReadLine(), out tires))
                Console.WriteLine("Error, enter a number");

            Console.WriteLine("How much is the maintenence?");
            while (!double.TryParse(Console.ReadLine(), out maintenance))
                Console.WriteLine("Error, enter a number");
}//endgetInput
{
    static void calculate( ref double loanPayment, ref double insurance, ref double gas, ref double oil, ref double tires, ref double maintenance, ref double monthlyTotal, ref double annualTotal);
            monthlyTotal = loanPayment + insurance + gas + oil + tires + maintenance;

            annualTotal = monthlyTotal * 12;

        }//endCalculate
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T23:28:55.603

最佳实践是创建一个结构或类来保存您的数据并封装您的计算函数。骨骼可能是

```
public class CarLoan
{
public CarLoan()
{
}

public GetInput()
{
// Input
}

public Calculate()
{
// Calculate loan
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T23:28:25.597

*   不需要`ref`您不使用传递的值。`out`改为使用
*   不要重复自己 - 将错误消息提取到常量
*   double 的默认值为`0`，无需初始化`0`
*   （静态）方法应该在类体中
*   带有很多参数的方法不是一个好主意，即使是函数式编程风格

这是固定代码：

```
internal class Program
{
    private const string ErrMsg = "Error, enter a number";

    private static void Main(string[] args)
    {
        double loanPayment, insurance, gas, oil, tires, 
               maintenance, monthlyTotal, annualTotal;

        Console.WriteLine("Please enter the following expenses on a per month basis");

        GetInput(out loanPayment, "loan payment");
        GetInput(out insurance, "insurance");
        GetInput(out gas, "gas");
        GetInput(out oil, "oil");
        GetInput(out tires, "tires");
        GetInput(out maintenance, "maintenance");

        Calculate(out monthlyTotal, out annualTotal, loanPayment, insurance, gas, oil, tires, maintenance);

        Console.WriteLine("----------------------------");
        Console.WriteLine("Your monthly total is ${0:F2} and your annual total is ${1:F2}", monthlyTotal, annualTotal);
        Console.WriteLine("----------------------------");
        Console.ReadLine();
    }

    private static void GetInput(out double value, string message)
    {
        Console.WriteLine("How much is the {0}?", message);
        while (!double.TryParse(Console.ReadLine(), out value))
            Console.WriteLine(ErrMsg);
    }

    private static void Calculate(out double monthlyTotal, out double annualTotal, double loanPayment,
                                  double insurance, double gas, double oil, double tires, double maintenance)
    {
        monthlyTotal = loanPayment + insurance + gas + oil + tires + maintenance;
        annualTotal = monthlyTotal * 12;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T23:28:44.373

`calculate`在方法签名之前有方法的左大括号。

`calculate`您在方法签名的末尾、正文之前放置了一个分号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T00:56:09.907

我冒昧地修复了您的代码。我排除了大部分冗余逻辑。你可以做一些更高级的事情，但我认为这个版本很容易理解，假设你正在使用它来学习。试着记住一个重要的概念：干。它代表不要重复自己。DRY 是一个很好的指导，可以判断你刚开始时是否做得很好：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class ProgramInputs
    {
        public double LoanPayment;
        public double Insurance;
        public double Gas;
        public double Oil;
        public double Tires;
        public double Maintenance;
    }

    class ProgramOutputs
    {
        public double MonthlyTotal;
        public double AnnualTotal;
    }

    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Please enter the following expenses on a per month basis");

            ProgramInputs inputs = getInputs();
            ProgramOutputs outputs = calculate(inputs);

            Console.WriteLine("Your monthly total is ${0:F2} and your annual total is ${1:F2}", outputs.MonthlyTotal, outputs.AnnualTotal);
        }

        static ProgramInputs getInputs()
        {
            // make a new program input object
            ProgramInputs inputs = new ProgramInputs();

            // get each input using a convenient method that factors out the parsing logic
            inputs.LoanPayment = getSingleInput("How much is the loan payment?");
            inputs.Insurance = getSingleInput("How much is the insurance?");
            inputs.Gas = getSingleInput("How much is the gas?");
            inputs.Oil = getSingleInput("How much is the oil?");
            inputs.Tires = getSingleInput("How much are the tires?");
            inputs.Maintenance = getSingleInput("How much is the maintenance?");

            // return them in single object, it's neater this way
            return inputs;
        }

        static double getSingleInput(string message)
        {
            double input = 0;
            Console.WriteLine(message);
            while (!double.TryParse(Console.ReadLine(), out input))
            {
                Console.WriteLine("Error, enter a number");
            }
            return input;
        }

        static ProgramOutputs calculate(ProgramInputs inputs)
        {
            ProgramOutputs outputs = new ProgramOutputs();
            outputs.MonthlyTotal = inputs.LoanPayment + inputs.Insurance + inputs.Gas + inputs.Oil + inputs.Tires + inputs.Maintenance;
            outputs.AnnualTotal = outputs.MonthlyTotal * 12;

            return outputs;
        }
    }
} 
```

# perl - Net::SSH2 使用公钥进行身份验证

> ID：15057856
> 
> 赞同：0
> 
> 时间：2013-02-24T23:16:20.843
> 
> 标签：perl, ssh, public-key-encryption, perlnetssh

我正在尝试使用[Net::SSH2](https://metacpan.org/module/Net::SSH2)在远程机器上执行命令。但是，我不知道如何使用公钥进行身份验证。文档提到了这种方法：

```
auth_publickey ( username, public key, private key [, password ] ) 
```

但是，它需要公钥和私钥。无论如何，我可以只使用公钥进行身份验证吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:21:12.377

这是没有意义的。“每个人”都有你的公钥。它不能用于对您进行身份验证。

# node.js - Node.js Express3 - 将渲染数据添加到所有渲染请求的中间件

> ID：15057857
> 
> 赞同：25
> 
> 时间：2013-02-24T23:16:22.113
> 
> 标签：node.js, express

是否可以通过快速中间件或其他方法将渲染数据（中的第二个选项`res.render`）添加到应用程序路由中的每个调用。

我的应用程序使用护照进行身份验证，我希望中间件始终将用户信息附加到每个呈现的模板。

目前我的每个电话`res.render`看起来都相似。我想删除并将其`user : req.user`添加到中间件函数中。

```
// Page 1
res.render("somepage1",{data : "somepage1", user : req.user});

// Page 2
res.render("somepage2",{data : "somepage2", user : req.user}); 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-24T23:23:54.717

Express 确实提供了[`app.locals`](http://expressjs.com/api.html#app.locals)and [`res.locals`](http://expressjs.com/api.html#res.locals)，它会[自动](https://github.com/visionmedia/express/blob/3.1.0/lib/application.js#L467-474)`render`与路由处理程序传入的显式本地合并。

```
app.use(function(req, res, next) {
    res.locals.user = req.user;
    next();
}); 
```

或者，您可以热修补该`render`功能。我会避免这种情况，因为它会产生额外的开销，但是如果由于某种原因您需要在路由处理程序运行之前传递不可用的信息，则可以选择：

```
app.use(function(req, res, next) {
    var render = res.render;
    res.render = function(view, locals, cb) {
        if (typeof locals == 'object') locals.user = req.user;
        render.call(res, view, locals, cb);
    };
    next();
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-24T23:27:19.750

弄清楚了。

您可以在中间件中使用本地变量。

```
 app.use(function(req, res, next){
    res.locals.user = req.user;
    next();
  }); 
```

然后在模板中使用。

```
<h1>User Name:{{user.name}}</h1> 
```

~~`<h1>User Name:{{_locals.user.name}}</h1>`~~

# php - 适当的图像比例缩放

> ID：15057859
> 
> 赞同：1
> 
> 时间：2013-02-24T23:16:23.183
> 
> 标签：php, image, image-processing

我有一个用于缩放成员个人资料图像的脚本，我想知道在不过度扭曲图像原始比例的情况下，对个人资料图片执行缩放的正确方法是什么。上传时保持图像纵横比的逻辑是什么？目前我使用这段代码来执行我的缩放

```
//SCALING IMAGES 
    $newwidth = 301;
    $newheight = ceil(($height/$width)*$newwidth);
    $tmp = imagecreatetruecolor($newwidth,$newheight);

    imagecopyresampled($tmp,$src,0,0,0,0,$newwidth,$newheight,$width,$height); 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T23:29:34.377

您应该设置示例来设置图像重采样大小：

```
class imagemanipulate
{
public function set_size($max_x = 100,$max_y = 100)
{

    // Resize
    if($this->x_input > $max_x || $this->y_input > $max_y)
    {

    $a= $max_x / $max_y;
    $b= $this->x_input / $this->y_input;

    if ($a<$b)
    {

        $this->x_output = $max_x;
        $this->y_output = ($max_x / $this->x_input) * $this->y_input;

    }
    else
    {

        $this->y_output = $max_y;
        $this->x_output = ($max_y / $this->y_input) * $this->x_input;

    }
    // Ready

    $this->resize = TRUE;

    }

    // Don't resize       
    else { $this->resize = FALSE; }

}
 }

 $inst = new imagemanipulate;
 $inst->set_size('301', '301');

 $tmp = imagecreatetruecolor($inst->x_output,$inst->y_output);

 imagecopyresampled($tmp,$src,0,0,0,0,$inst->x_output,$inst->y_output,$width,$height);

?> 
```

# excel - 在 VBA 中查找和替换特定范围

> ID：15057861
> 
> 赞同：2
> 
> 时间：2013-02-24T23:16:35.817
> 
> 标签：excel, vba

我正在使用以下代码来查找 curr_symbol 并将其替换为 new_symbol。即使我在代码中指定它应该在特定的行号内执行此操作，它也会将查找和替换应用于所选工作表中的所有行，这不是我想要的。

```
Sub find_replace()
Dim curr_symbol, new_symbol As String
Dim row_num, last_row As Integer
row_num = ActiveSheet.Cells(1, "A").Value 'row_num=9
last_row = ActiveSheet.Cells(2, "A").Value 'last_row=11

Do While row_num < last_row
      curr_symbol = ".ABC130301"
    new_symbol = ActiveSheet.Cells(row_num, "E").Value 'new_symbol=".BAC130306"
    With ActiveSheet.UsedRange
        .Replace curr_symbol, new_symbol, xlPart
    End With
row_num = row_num + 1
Loop
End Sub 
```

我什至尝试用`With ActiveSheet.UsedRange....End With`以下语句替换，但这也替换了所有行中的 curr_symbol。

```
ActiveSheet.Cells.Replace What:=curr_symbol, Replacement:=new_symbol, LookAt:=xlPart, _
                              SearchOrder:=xlByRows, MatchCase:=False, _
                              SearchFormat:=False, ReplaceFormat:=False 
```

我该如何解决这个问题，所以它只替换指定行中的字符串。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T00:01:38.213

我假设您有兴趣替换的范围是 A 列，从`row_num`到`last_row`。尝试替换这个：

```
With ActiveSheet.UsedRange
    .Replace curr_symbol, new_symbol, xlPart
End With 
```

有了这个：

```
Cells(row_num, 1).Replace curr_symbol, new_symbol, xlPart 
```

无论您将其放置在何处，`ActiveSheet.UsedRange`它始终指的是活动工作表的整个使用区域。它是一个集合，包含所有已使用的单元格以及与已使用的单元格相同的行和列中的其他单元格。它与您使用它的方式无关（即它不指代与您的循环相关的范围）。该`Replace`方法将应用于`UsedRange`.

`ActiveSheet.Cells`与;类似 这总是指活动工作表中**每个单元格的集合。**我的建议与 相同`ActiveSheet.Cells(row_num, 1)`，指定要应用该`Replace`方法的单个单元格。

**不再回答你的问题：**

顺便说一句，以下行：

```
Dim curr_symbol, new_symbol As String 
```

将 curr_symbol 声明为 Variant，将 new_symbol 声明为 String。这同样适用于您的下一行声明（整数）。不，我也不喜欢这种声明行为。您必须为每个变量指定一个类型。以下是我倾向于声明的方式：

```
Dim curr_symbol As String, _
    new_symbol As String 
```

此外，Excel 在内部将所有 Integer 类型存储为 Long 类型。声明为 Integer 只会限制它们的值，而不是它们消耗的内存量。除非您特别想限制整数的值，否则我建议将所有 Integer 声明更改为 Long：

```
Dim last_row As Integer 
```

与以下内容一样消耗内存：

```
Dim row_num as Long 
```

但可能会慢一点，如果有任何速度差异的话。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T00:03:23.130

您使用的“UsedRange”范围是您使用的整个电子表格。您的替换将应用于您的整个电子表格。

我会创建一个您想要替换的范围，例如：

```
Dim MyRange as Range
Set MyRange = Range("B7:C9") 
```

然后我会在这个范围内进行替换。

# ruby - 来自后台 ruby 脚本的状态消息

> ID：15057863
> 
> 赞同：0
> 
> 时间：2013-02-24T23:16:58.927
> 
> 标签：ruby

我有一个作为守护进程运行的 Ruby 脚本，但不是守护进程。它从数据库中获取任务并处理它们。我想从 PHP Web 前端监控这个脚本并显示状态消息，例如“工作正常”、“有 N 个问题”等。

我如何在不使用守护进程宝石的情况下做到这一点？可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T23:34:37.387

PHP 提供了`exec`运行任意命令的功能。您可以使用它来检查所需的进程是否失败或正在运行。您可以执行以下操作：

```
<?php 
  $ruby_command = 'ruby check_status.rb 2>&1' ;
 $out = exec($ruby_command);
?> 
```

检查输出并做你想做的事。那有什么问题？

# php - 在我的查询中使用 php 的 where ___ in ____ sql 命令

> ID：15057870
> 
> 赞同：-1
> 
> 时间：2013-02-24T23:18:03.830
> 
> 标签：php, sql

如果搜索结果存在于我的数据库中名为“job”的表的“查询”列中，我正在尝试获取用户输入的#、@ 或普通语句，然后从 SQL 数据库中提取这些结果。这是我得到的错误：

```
 Unknown column 'Array' in 'where clause' 
```

这是我的代码：

```
$result_all = $_POST['result_name'];
$result_all_array= explode(',',$result_all);
$query = "select last_count, query, job_id from twitterinblack46.job where 

query in (".$result_all_array.") order by last_count desc;";
 $result= mysql_query($query);

if($result === FALSE) {
die(mysql_error());
 }
 else{
 //Sets up table
 echo "<table border='1'
 <tr>
 <th>Job ID</th>
 <th>Last Count</th>
 <th>Result</th>
 </tr>";

 //Populates table
 while($row = mysql_fetch_array($result)){
echo"<tr>";
echo "<td>" . $row["job_id"] . "</td>";
echo "<td>" . ltrim($row["last_count"],'0') . "</td>";
echo "<td>" . str_replace(array('%23', '%40', '%20', 'q='), array('#','@',' ',''), 

$row['query']) . "</td>";
echo "<tr>";
 }
echo "</table>"; 
```

有人知道我在做什么错吗？

* * *

更新：

这是混乱，我没有忘记复制 $ 进行查询。“查询”是我想从查询中获取信息的列的名称。所以我要说的是，这两组代码有什么区别，为什么它不适用于第一个查询？

不起作用的代码：

```
$result_all= $_POST['result_name'];
$query = "select last_count, query, job_id from twitterinblack46.job where 
query in (".$result_all.") order by last_count desc;";
$result= mysql_query($query); 
```

有效的代码：

```
$job_id_all= $_POST['job_id'];
$query = 'select last_count, query, job_id from twitterinblack46.job where job_id in 
('.$job_id_all.') order by last_count desc;';
$result= mysql_query($query); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T23:26:10.543

这显然是表单输入的问题，例如检查了多个复选框。
在两个查询中试试这个：

```
$result_all= implode(',', mysql_escape_string($_POST['result_name']));
$query = "select last_count, query, job_id from twitterinblack46.job where query in (".$result_all.") order by last_count desc;";
$result= mysql_query($query); 
```

# openlayers - 如何使用 Bower 安装 OpenLayers 等库？

> ID：15057871
> 
> 赞同：4
> 
> 时间：2013-02-24T23:18:11.163
> 
> 标签：openlayers, bower

我正在 Twitter 上尝试使用[Bower](https://bower.io/)来管理我的客户端依赖项。

但我面临一个令人讨厌的问题：除了一些大玩家（[jQuery](http://jquery.com/)，当然还有Twitter 的[Bootstrap](http://twitter.github.com/bootstrap/)），许多库（实际上大多数）没有`component.json`文件，因此似乎没有支持鲍尔。

[OpenLayers](http://openlayers.org/)就是这种情况，它是一个大玩家，因此我惊讶地发现他们不支持 Bower。

我在这里错过了什么吗？还是这些大型库目前支持的更常见的依赖管理器？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T02:43:14.547

您可以将以下内容添加为依赖项：

```
"dependencies": {
    "OpenLayers" : "http://openlayers.org/download/OpenLayers-2.12.zip"
} 
```

并`bower install`再次运行。

**更新** 在 Sindre 评论后，这个 conf 打破了`bower upgrade`你应该依赖这样的东西：`bower install openlayers --save`

但请注意，如果您所依赖的工件没有在 repo 中进行版本控制，您将不得不在您的开发工作流程中构建它们。这意味着安装更多工具并了解它们等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T10:49:36.377

仅当库具有依赖项时才需要组件文件，否则使用 git 标签。

您可以这样做，`bower install openlayers`因为它在注册表中，否则您可以使用 git repo 或 zip/tar 文件的 url `bower install git://github.com/openlayers/openlayers.git`：.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-13T13:40:14.240

openlayers#2.13.1 可通过 Bower 安装

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-12T11:23:53.927

当我这样做时，我有一些“乐趣”，当我运行 grunt serve 时，我在 index.html 中包含了对 openLayers.js 的引用，对 Openlayers.js 的引用被删除，并且wiredep 报告了一个注入问题。

该问题是由 OpenLays 的补充版本没有定义“主”令牌引起的。

这就是你修复它的方法。

在你的 html 文件中，说

```
<!-- build:js(.) scripts/vendor.js -->
<!-- bower:js -->
<script src="bower_components/openlayers/lib/OpenLayers.js"></script>
<script src="bower_components/jquery/dist/jquery.js"></script>
<script src="bower_components/jquery-ui/jquery-ui.js"></script>
<!-- endbower -->
<!-- endbuild --> 
```

在 bower.json 文件（项目根目录中的地雷）中说

```
{
 "name": "foobar",
  "private": true,
  "dependencies": {
  "bootstrap": "~3.2.0",
  "jquery-ui": "~1.11.2",
  "jquery": "~2.1.1",
  "openlayers": "1.0.0"
},
 "overrides": {
 "openlayers": {
       "main": "lib/OpenLayers.js"
  }
 } 
} 
```

这定义了缺少的主令牌。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2018-06-25T13:25:26.003

你也可以使用 npm 来安装 openlayers。[https://www.npmjs.com/package/openlayers](https://www.npmjs.com/package/openlayers)

```
npm install ol 
```

# qt - QTablewidget 删除而不创建新行

> ID：15057872
> 
> 赞同：1
> 
> 时间：2013-02-24T23:18:19.967
> 
> 标签：qt, qt4, qtablewidget, qt4.8

我有一个 QTableWidget 和 1 列只有复选框，所以对于这些项目我有这些标志：

```
/* create prototype for checkbox item */ 
checkItem = new QTableWidgetItem();
Qt::ItemFlags flags = checkItem->flags();
flags &= ~Qt::ItemIsEditable;
flags &= ~Qt::ItemIsDropEnabled;
flags &= ~Qt::ItemIsDragEnabled;
flags |= Qt::ItemIsUserCheckable;
checkItem->setFlags(flags);
/**/ 
```

好吧，这行得通……几乎。我不能在这些物品中放任何东西，这很好。但是现在可以在 2 个单元格之间放置，因此创建了一个新行。我怎样才能防止这种情况？在其他启用了单元格的列中，我只能放入单元格而不是介于两者之间，这很好。为什么当项目未启用拖放时此行为会更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T07:24:25.780

使用事件过滤器的快速破解（可能需要一些调整）：

你这样做是忽略复选框列上的任何下降。所以禁用行创建应该足够了。

```
bool yourWidget::eventFilter(QObject *a_object, QEvent *a_event) 
  {
  bool result = false;
  if ((a_object == table->viewport()) && (a_event->type() == QEvent::Drop)) 
  {
     QDropEvent *p_drop_event = static_cast<QDropEvent *>(a_event);
     QPoint pos = p_drop_event->pos();
     QModelIndex new_index = table->indexAt(pos);
     if (new_index.column() == YOUR COLUMN HERE)
     {
       // Ignore drop event
       p_drop_event->setDropAction(Qt::IgnoreAction);
       p_drop_event->accept();
       return true;
     }
     else
     {
       // Allow drop
       return false;
     }

  }
return QObject::eventFilter(a_object, a_event);
} 
```

有关事件过滤器的信息：

[事件过滤器](http://qt-project.org/doc/qt-4.8/eventsandfilters.html#event-filters)

# c++ - Pcrecpp 匹配

> ID：15057873
> 
> 赞同：1
> 
> 时间：2013-02-24T23:18:24.470
> 
> 标签：c++, pcre

我使用pcrecpp c++​​（PCRE lib）
并且我需要循环获取所有匹配项。我该怎么做？

例如模式：
“你好”

和主题：
“你好你好你好”

循环应该循环 3 次（因为 3 个匹配）
1 hello
2 hello
3 hello

伪代码

```
pcrecpp::RE pPattern ( "hello" );  
std::string strBase = "hello hello hello";  
// ...  
int iMatches = // Match count 
for ( int i = 1; i < iMatches; i++ )   
{  
    printf( "%d %s", i, pPattern[ i ].c_str () );  
} 
```

请给我一些示例代码如何使用 pcrecpp.h 进行操作。
对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-28T12:32:50.503

尽管这个问题已经有几个月的历史了，但我会在这里提供一个解决方案：

```
#include <pcrecpp.h>
#include <iostream>

int main(void)
{
  pcrecpp::RE regex("(hello)");  
  std::string strBase = "hello hello hello";  

  pcrecpp::StringPiece input(strBase);

  std::string match;

  int count = 0;
  while (regex.FindAndConsume(&input, &match)) {
    count++;
    std::cout << count << " " << match << std::endl;
  }
} 
```

有关更多信息，[此站点](http://www.gammon.com.au/pcre/pcrecpp.html)可能会有所帮助。

# unix - 如何使 usr 文件夹中/下的所有文件/文件夹在 Finder 中永久可见？

> ID：15057875
> 
> 赞同：1
> 
> 时间：2013-02-24T23:18:27.487
> 
> 标签：unix, osx-lion, finder

如何使文件夹中/下的所有文件/文件夹`usr`在 Finder 中永久可见？

我知道如何暂时使这些文件夹可见：

Finder中的“搜索”；键入“usr”；从菜单“种类”中选择“其他”；输入“隐形”；选择“文件可见性”；从菜单中选择“不可见的项目”......但我真的不想每次在`usr`-tree 中查找文件时都这样做。

我还尝试在终端中使用以下代码：

```
$defaults write com.apple.finder AppleShowAllFiles True
$killall Finder 
```

这不仅使**所有**文件可见，而且我似乎无法找到该`usr`文件夹​​。

有谁知道我如何*只*使`usr`-tree 永久可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T23:41:49.480

如果您必须`/usr`从 finder 访问，可能最简单的方法是创建指向它的符号链接。从终端会话外壳并`usrlink`用作“别名”：

```
sudo ln -s /usr /usrlink
sudo chmod -h 755 /usrlink 
```

然后您应该能够看到`/usr`（不是由Finder过滤的）下的目录`/usrlink`。但我真的不建议这样做。无意中搞砸太容易`/usr`了，如果这样做，您可能必须重新安装 OS X。此外，`.`文件仍将被隐藏，而无需更改其他首选项。

# php - 在php echo中重新加载页面不起作用

> ID：15057877
> 
> 赞同：1
> 
> 时间：2013-02-24T23:18:46.223
> 
> 标签：php, javascript, html, echo

好像我什么都试过了。我在堆栈溢出和任何其他页面上阅读了我能找到的任何内容，但还没有任何功能。由于某种原因，我能做的最好的事情就是对相关页面进行无限重新加载循环，这导致我自己的互联网连接崩溃。

```
echo '<td><a href="javascript:void(0);" onclick="kill(); ">Delete DB</a></td>'; 
```

我的杀戮做了以下事情：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js">        </script>
<script type="text/javascript">
function kill() 
{
$.get("killdb.php");
return false;
}
</script> 
```

我通读了所有这些并尝试了所有这些：[我应该为 JavaScript 链接使用哪个“href”值，“#”还是“javascript:void(0)”？](https://stackoverflow.com/questions/134845/href-attribute-for-javascript-links-or-javascriptvoid0)没有任何运气。好吧，也许我没有做对，但有些事情是不对的。由于某种神秘的原因，我无法重新加载页面。

有接盘侠吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T23:30:49.050

利用

```
function kill(){
    $.get('killdb.php', function(){ location.reload()});
} 
```

这样在ajax请求完成之前不会重新加载

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T23:23:58.123

您必须添加正确的代码才能重新加载页面。尝试这个：

```
function kill() 
{
   $.get("killdb.php");
   location.reload();
   return false;
} 
```

# get - 给定 colname 中的一个元素，我需要在另一个 colname 中找到对应的元素

> ID：15057880
> 
> 赞同：0
> 
> 时间：2013-02-24T23:19:24.733
> 
> 标签：get, grep

当我在矩阵中给出一个元素时，我想弄清楚如何从矩阵中获取整行中的所有元素。

就我而言，我有一个矩阵，它已经是一个数据集，具有一定数量的行和列。列是定义每行元素的类别。

举例说明：

```
colnames(data.set) "GOID" "TERM" "ONTOLOGY" "DEFINITION" 
```

我得到了一个元素“对热的响应”，它位于“TERM”colname 下，我必须在“GOID”colnam 中找到响应元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:18:53.143

听起来像是 awk 的工作：

```
awk '$2=="response to heat"{print $1}' file 
```

请注意，如果没有您的输入示例，上述行可能不适用于您的真实数据（例如不同的 FS）。但你明白了。

# delphi - TListView 列排序（按前两列排序）

> ID：15057886
> 
> 赞同：4
> 
> 时间：2013-02-24T23:19:47.123
> 
> 标签：delphi, delphi-2010

我正在使用 Delphi 2010 和 TListView 列出名称和其他数据。前两列是姓氏和名字

> Caption = 姓
> SubItems[0] = 名字

如何按这两列对 ListView 进行排序？这些将只是 Listview 将被排序的列，我希望始终保持这种排序（添加、编辑、删除项目时）

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T23:56:29.350

设置`SortType`为“stBoth”，并实现一个`OnCompare`事件处理程序。例子：

```
procedure TForm1.ListView1Compare(Sender: TObject; Item1, Item2: TListItem;
  Data: Integer; var Compare: Integer);
var
  S1, S2: string;
begin
  S1 := Item1.Caption;
  if Item1.SubItems.Count > 0 then
    S1 := S1 + Item1.SubItems[0];
  S2 := Item2.Caption;
  if Item2.SubItems.Count > 0 then
    S2 := S2 + Item2.SubItems[0];

  Compare := CompareText(S1, S2);
end; 
```

# quickbooks - 通过 IPP 将发票添加到 Quickbooks 会导致同步错误

> ID：15057887
> 
> 赞同：1
> 
> 时间：2013-02-24T23:20:01.557
> 
> 标签：quickbooks, intuit-partner-platform, ipp-qbd-sync

当我尝试通过 .net IPP SDK 添加发票时，发票添加请求运行成功，但是一旦从 Quickbooks 中的同步管理器启动同步，我就会收到错误消息。该错误仅在使用 GetSyncActivity() 检索状态时可见

我看到的错误是：

> QBXML 验证错误：[severity=FATAL_ERROR,message=cvc-complex-type.2.4.a：发现以元素“TxnDate”开头的无效内容。需要“{CustomerRef}”之一。,locator=[url=null,line=-1,column=-1,node=null,object=com.intuit.sb.datasync.writeback.qbxml.schema.InvoiceAdd@ 4538d9d1，字段=空]]

我启用了请求日志记录，并且在查看生成和发送的发票 XML 时，如果我将其与在线文档中的示例请求进行比较，它看起来没有任何问题。我已经尝试指定可能是问题的其他客户 ID 的想法，指定帐单地址/送货地址，并指定 ARAccountRef，但这些更改都没有对错误产生任何影响。

有什么我遗漏的东西，或者你能想到的任何我可以尝试解决的问题吗？

**要求：**

```
<Add xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.intuit.com/sb/cdm/v2" RequestId="fd0822d7666248119d8ee482f264bd84" FullResponse="true">
<ExternalRealmId>Realm ID removed</ExternalRealmId>
<Object xsi:type="Invoice">
<SyncToken>0</SyncToken>
<MetaData>
<CreateTime>2013-02-24T18:05:21.1706511-05:00</CreateTime>
<LastUpdatedTime>2013-02-24T18:05:21.1706511-05:00</LastUpdatedTime>
</MetaData>
<Header>
<DocNumber>232751</DocNumber>
<CustomerId>11505739</CustomerId>
<CustomerName/>
<TotalAmt>900.00</TotalAmt>
<SalesTermId idDomain="QB">3</SalesTermId>
<DueDate>2013-02-24T00:00:00-05:00</DueDate>
<BillAddr/>
<ShipAddr/>
<ShipMethodId/>
<DiscountAmt>0</DiscountAmt>
</Header>
<Line>
<Desc>Test</Desc>
<Amount>900.00</Amount>
<ItemId>3377682</ItemId>
<UnitPrice>180.00</UnitPrice>
<Qty>5</Qty>
<ServiceDate>2013-02-24T18:05:21.1956543-05:00</ServiceDate>
</Line>
</Object>
</Add> 
```

**回复：**

```
<RestResponse xmlns="http://www.intuit.com/sb/cdm/v2">
<Success RequestId="fd0822d7666248119d8ee482f264bd84">
<Invoice>
<Id idDomain="NG">12313656</Id>
<SyncToken>1</SyncToken>
<MetaData>
<CreatedBy>app</CreatedBy>
<CreateTime>2013-02-24T23:05:25Z</CreateTime>
<LastModifiedBy>app</LastModifiedBy>
<LastUpdatedTime>2013-02-24T23:05:25Z</LastUpdatedTime>
</MetaData>
<Synchronized>false</Synchronized>
<Header>
<DocNumber>232751</DocNumber>
<TxnDate>2013-02-24T00:00:00Z</TxnDate>
<CustomerId idDomain="NG">11505739</CustomerId>
<SubTotalAmt>900</SubTotalAmt>
<TaxRate>0</TaxRate>
<TaxAmt>0</TaxAmt>
<TotalAmt>900</TotalAmt>
<SalesTermId idDomain="QB">3</SalesTermId>
<DueDate>2013-02-24T00:00:00Z</DueDate>
<BillAddr>
<Tag>Billing</Tag>
</BillAddr>
<ShipAddr>
<Tag>Shipping</Tag>
</ShipAddr>
<Balance>900</Balance>
</Header>
<Line>
<Id idDomain="NG">37505805</Id>
<Desc>Test</Desc>
<Amount>900</Amount>
<Taxable>false</Taxable>
<ItemId idDomain="NG">3377682</ItemId>
<UnitPrice>180</UnitPrice>
<Qty>5</Qty>
<ServiceDate>2013-02-24T00:00:00Z</ServiceDate>
</Line>
</Invoice>
<RequestName>InvoiceAdd</RequestName>
<ProcessedTime>2013-02-24T23:05:25Z</ProcessedTime>
</Success>
</RestResponse> 
```

**通过调用 GetSyncStatus(...) 检索到的信息，指定 ErroredObjectsOnly=True**

```
requestId: "fd0822d7666248119d8ee482f264bd84",
stateCode: "9",
stateDesc: "Record has fatal error",
messageCode: "100",
messageDesc: "QBXML validation error: [severity=FATAL_ERROR,message=cvc-complex-type.2.4.a: Invalid content was found starting with element 'TxnDate'. One of '{CustomerRef}' is expected.,locator=[url=null,line=-1,column=-1,node=null,object=com.intuit.sb.datasync.writeback.qbxml.schema.InvoiceAdd@4538d9d1,field=null]] ",
responseLogTMS: "2013-02-24T23:06:22Z",
idsType: "Intuit.Ipp.Data.Qbd" 
```

# c - C 编程：如何将变量从一个函数传递到另一个函数？

> ID：15057888
> 
> 赞同：-3
> 
> 时间：2013-02-24T23:20:07.410
> 
> 标签：c, pointers

在我声明一个指针后，我设置了一个指针。然后我将指针包含在另一个函数的参数中，希望将指针中包含的值传递给该函数。由于某种原因，这不起作用，有人可以帮助我吗？

```
int main()
{
  int *ptr1, *ptr2, count1 = 0, count2 = 0;
  ptr1 = &count1;
  ptr2 = &count2; //sets up the pointees
  records(ptr1, ptr2, filename);

  printf("%d %d\n", count1, count2);//after the loop in the function records, count1 should hold the value 43 and count2 15, however I don't think I passed the values back to main correctly because this print statement prints 0 both count1 and count2
  return 0;
}

FILE* records(int* ptr1, int *ptr2, const char* filename)
{
  FILE* fp;
  int count1 = 0, count2 = 0

  while()//omitted because not really relevant to my question

  printf("%d %d\n", count1, count2)//when I compile the program, count1 is 43 and count2 is 15
  return fp;
}

void initialize(int *ptr1, int *ptr2)
{
  printf("%d %d", count1, count2);//for some reason the values 43 and 15 are not printed? I thought I had included the pointers in the parameters, so the values should pass?
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:25:14.343

在您的`records`函数中，您已经声明了具有相同名称的*新*`count1`变量，并且`count2`. 这些与 中的不同`main`。如果你想使用 main 中的变量，你应该`count1`用`(*ptr1)`和`count2`替换`(*ptr2)`in `records`，所以它使用指针来访问 in 中的变量`main`。

需要明确的是，在`records`你应该摆脱`int count1 = 0, count2 = 0`，*然后*`(*ptr1)`用and替换每个的用法`(*ptr2)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T23:26:48.063

在`initialize`and`records`中，您试图引用非全局计数变量，为了打印这些值，您不妨使用传递的指针值。为此`ptr`，在调用中取消引用变量（带 *）`printf`：

```
printf("%d %d\n", *ptr1, *ptr2); 
```

如果你不打算修改count变量，那么你实际上不需要传递指针，你可以直接传递count变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T23:24:15.940

提供的代码就是这样做的：

```
int main()
{
  int *ptr1, *ptr2, count1 = 0, count2 = 0;
  ptr1 = &count1;
  ptr2 = &count2; //sets up the pointees

  printf("%d %d\n", count1, count2);//
  return 0;
} 
```

猜猜你需要一些额外的：尝试调用一些函数 - 尝试`records`

# c++ - 寻找封闭形式进行递归以快速计算结果

> ID：15057889
> 
> 赞同：0
> 
> 时间：2013-02-24T23:20:08.267
> 
> 标签：c++, recursion

假设我们有以下算法：

```
 int com(int a, int b)
    {
        if (b==0 || a==b)
        {

            return(1);
        }
        else 
        {
            return(com(a-1,b) + com(a-1,b-1));
        }
    } 
```

是否有方法可以在不使用递归的情况下更快地计算此结果？我正在尝试优化速度，但这个解决方案太慢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T23:31:51.357

通常的[公式](http://en.m.wikipedia.org/wiki/Binomial_coefficient)是

```
com(a,b) = a!/(b!(a-b)!) 
```

在哪里！是 n*(n-1)*...*3*2*1。为了更快的计算，您当然可以消除相互抵消的因素，因此您只剩下：

```
com(a,b) = a*(a-1)*...*(a-b)/(1*2*..*(a-b)) 
```

但是对于严肃的数值计算，你应该使用 log-gamma 函数`lgamma`而不是滚动你自己的阶乘函数：

```
com(a,b) = exp(lgamma(a+1)-(lgamma(a-b+1)+lgamma(b+1))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T23:29:36.843

很多，尤其是乘法公式：[http ://en.wikipedia.org/wiki/Binomial_coefficient](http://en.wikipedia.org/wiki/Binomial_coefficient)

# java - 如何检查两个字符串是否递归地生成第三个字符串

> ID：15057890
> 
> 赞同：1
> 
> 时间：2013-02-24T23:20:14.547
> 
> 标签：java, string, recursion

这是给我们三个字符串的问题。

```
a=partyrock
b=anthem
c=partyrockanthem 
```

任务是检查字符串 a 和 b 组合是否可以生成字符串 c。规则是如果字符串中的字母不能更改顺序，但可以从一个字符串跳转到另一个字符串。所以让我们说`c = pantartyrohemck`在这种情况下你从一个字符串移动到另一个字符串来制作最终字符串。

这是我的递归代码问题是我找不到返回值的方法。如果您有更简单的方法，请提前告诉我谢谢。

```
public class Hw4c {
    public static boolean everyDayImShuffling(String a, String b, String c)
    {
        boolean result = shufflinga(a,b,c,0,0,0); 

             return result; 

    }
    public static boolean shufflinga (String a, String b, String c, int d, int e, int f)
    {
        if(a.substring(d,d+1).equals(c.substring(f,f+1)))
        {
            if(d!=a.length()-1)
            {
                d=d+1; 
                f=f+1; 
                shufflinga(a,b,c,d,e,f); 
            }
            else
            {
                if(e!=b.length()-1)
                shufflingb(a,b,c,d,e,f);
            }

        }
        else
        {
             shufflingb(a,b,c,d,e,f);
        }

       return true; 
    }
    public static boolean shufflingb (String a, String b, String c, int d, int e, int f)
    {

        if(b.substring(e,e+1).equals(c.substring(f,f+1)))
        {
            if(e!=b.length()-1)
            {   
                e=e+1;
                f=f+1; 
                shufflingb(a,b,c,d,e,f); 
            }
            else 
            {
                if(d!=a.length()-1)
                {
                    shufflinga(a,b,c,d,e,f); 
                }

            }
        }

        return true; 
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T23:26:26.143

我将尝试抽象地设计一个解决方案

```
checkWords(String a, String b, String combined){

int _a = 0, _b = 0;

for (int i = 0; i < combined.length(); i++){
    char c = combined.charAt(i);  
    if (c == a.charAt(_a))
        _a++;
    else if (c == b.charAt(_b))
        _b++;
    else return false;
}

return true;
} 
```

**请注意，这不包括检查空输入字符串或空输入字符串**
**只要当前 a 和 b 字符相等，该决定也不会**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T23:26:33.017

您可以使用：

```
if ((a + b).equals(c)) {
  // Equals!
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T23:24:31.607

这是一个简单的动态语句。

```
if((a + b).equals(c)) System.out.println("Equal"); 
```

这是完成相同事情的方法：

```
public boolean recursiveEqual(String a, String b, String c) {
if((a + b).equals(c)) return true;
else return false;
} 
```

# visual-studio-2008 - 部署到 Windows CE 7 时“无法加载引导程序”

> ID：15057895
> 
> 赞同：6
> 
> 时间：2013-02-24T23:20:46.520
> 
> 标签：visual-studio-2008, windows-embedded-compact

我正在尝试在运行 Visual Studio 2008 的 Windows Compact Embedded 7 的摩托罗拉 WT41N0 上调试 ac# 应用程序。当我按 F5 运行程序时，一旦 Visual Studio 尝试部署到设备，我就会收到以下错误：“引导程序无法加载。”

我之前曾在运行 Windows CE 5 的摩托罗拉 WT4090 上成功运行该程序。有人知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T23:35:24.947

您是否为新设备安装了摩托罗拉驱动程序？在安装 41x0c70BenPS010007.exe 之前，我遇到了同样的问题，这是他们的设备平台 SDK。这将在 Visual Studio 中安装一个新设备。

在 Visual Studio 菜单中，转到 Tools->Options->Devices Tools->Devices，您现在应该有一个 WT41N0c70PSDK ARM7 设备。如果您没有，那么我认为您无法加载引导带。

我不必将它设置为默认的 VS 设备或任何它只需要在那里的东西，VS 会找出其余的。

跟进问题

从这个链接：[https ://support.symbol.com/support/supportcentral/supportcentral.do?id=m1](https://support.symbol.com/support/supportcentral/supportcentral.do?id=m1)

单击登录，它在右侧（您必须有一个帐户或创建一个帐户才能下载它）在登录后的下一个屏幕上设置过滤器：产品线：移动计算机，产品：WT41N0，文档类型：软件下载，然后点击“开始”。第一个结果应该是“OS 更新映像和 PSDK”。按照链接下载它，然后最后单击页面底部附近的“请求下载”。他们希望设备的序列号能够继续。

在您继续之前，您将需要阅读此内容。 [https://docs.symbol.com/ReleaseNotes/PSDK_for_WT41N0_Readme_1_0_0.htm#Components](https://docs.symbol.com/ReleaseNotes/PSDK_for_WT41N0_Readme_1_0_0.htm#Components)

# c - 上层函数

> ID：15057899
> 
> 赞同：0
> 
> 时间：2013-02-24T23:21:11.887
> 
> 标签：c, uppercase, toupper

我想知道 C 中的 toupper() 函数是如何工作的。我正在下面的代码中尝试它，但我肯定做错了什么。代码编译，但传递给 toupper() 的参数没有被大写......

```
char **copyArgs(int argc, char **argv) {
    char **a = malloc(sizeof(char *) * (argc));

    int i;
    for(i = 0; i < argc; i++) {
        int size = strlen(argv[i]);
        a[i] = malloc(sizeof(char) * (size + 1));
        strcpy(a[i], argv[i]);
        a[i] = toupper(a[i]);
    }
    return a;
} 
```

如果我用“一二”测试它，结果是“一二”，而不是“一二”。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T23:24:42.343

`toupper`将单个字母转换为大写。在您的情况下，您传递的是指向它的指针，而不是`char`感谢 C 在隐式转换中的宽恕，因此很明显它不能正常工作。可能您会收到“无强制转换的整数转换隐式指针”警告：这是一个强烈的信号，表明您做错了事。

整个事情不会仅仅因为在您的平台`int`上与指针一样大（或者，至少对于您正在使用的那些指针足够大）；`toupper`试图将其解释`int`为一个字符，发现它是非字母的，并原封不动地返回它。这真是太幸运了，在其他平台上，您的程序可能会崩溃，因为指向`int`转换的指针被截断，并且因为范围`toupper`之外的整数`unsigned char`（加号`EOF`）的行为是未定义的。

要将整个字符串转换为大写，您必须遍历其所有字符并调用`toupper`它们中的每一个。您可以轻松编写执行此操作的函数：

```
void strtoupper(char *str)
{
    while(toupper((unsigned char)*str++))
        ;
} 
```

请注意强制`unsigned char`转换 - 所有处理字符分类和转换的 C 函数*都需要*an `int`that `EOF`（保持不变）或者是 an 的值`unsigned char`。原因是悲伤和复杂的，我已经[在另一个答案中](https://stackoverflow.com/a/45007070/214671)详细说明了。

尽管如此，值得注意的是，`toupper` *在设计*上不能可靠地使用多字节字符编码（例如 UTF-8），因此它在现代文本处理中没有真正的位置（因为通常大多数 C 语言环境设施，它们（糟糕）设计在另一个时代）。

# android - 如何获取文件 ID，以便我可以从 Android 上的 Google Drive API 下载文件？

> ID：15057907
> 
> 赞同：36
> 
> 时间：2013-02-24T23:22:06.580
> 
> 标签：android, google-drive-api

我正在开发一个 Android 项目，我正在尝试使用 Google Drive API，并且我已经完成了大部分工作，但是我在如何执行下载时遇到了问题。

我无法在任何地方找到如何获取文件 ID 以便执行下载。为了测试，我检索了我的驱动器帐户中的所有文件并将它们添加到列表数组中，然后获取列表中第一个文件的 ID。

然后我将文件 ID 复制到命令中以下载文件，这成功了，但我不知道如何获取我要下载的特定文件的文件 ID。

下面是我用来下载文件的代码。

```
private void downloadFile()
{
    Thread thread = new Thread(new Runnable() {

        @Override
        public void run() {
            try 
            {
                com.google.api.services.drive.model.File file = service.files().get("0B-Iak7O9SfIpYk9zTjZvY2xreVU").execute();
                //FileList file = service.files().list().execute();
                //List<com.google.api.services.drive.model.File> fileList = file.getItems();
                //com.google.api.services.drive.model.File fileItem = fileList.get(0);
                //Log.d("FileID" , fileItem.getId());
                //Log.d("Count", "Retreived file list");
                if (file.getDownloadUrl() != null && file.getDownloadUrl().length() > 0)
                {
                    HttpResponse resp = service.getRequestFactory().buildGetRequest(new GenericUrl(file.getDownloadUrl())).execute();
                    InputStream inputStream = resp.getContent();
                    writeToFile(inputStream);
                }
            } 
            catch (IOException e)
            {
                Log.e("WriteToFile", e.toString());
                e.printStackTrace();
            }
        }
    });
    thread.start();
} 
```

`0B-Iak7O9SfIpYk9zTjZvY2xreVU`是我下载的文件的文件 ID，当我做一个列表并选择第一个文件时检索它，但我怎么能说我要下载 File_1 并获取它的 ID，然后将其传递给 service.get() .执行功能。

基本上我的最终目标是在我的应用程序中，我将一个 XML 文件上传到 Google Drive，然后再下载该文件。它只会是一个文件，并且始终具有相同的名称。我是马上去做，还是有更好的方法来实现我想要做的事情？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2018-02-18T18:15:16.870

在我看来，获取 Google Drive 文件 ID 的最简单、最快的方法是从网络上的 Google Drive。右键单击文件名并选择**获取共享链接**。链接的最后一部分是文件 ID。然后您可以取消共享。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-08-25T17:00:15.920

此脚本记录驱动器中的所有文件名和 ID：

```
// Log the name and id of every file in the user's Drive
function listFiles() {
  var files = DriveApp.getFiles();
  while ( files.hasNext() ) {
    var file = files.next();
    Logger.log( file.getName() + ' ' + file.getId() );
  }
} 
```

此外，“[文件：列表](https://developers.google.com/drive/v2/reference/files/list#try-it)”页面末尾有一个表格，列出了驱动器中所有文件的元数据，如果您只需要几个 id，可以使用该表格。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-25T10:46:34.377

那么我能想到的第一个选项是，您可以发送带有文件[搜索参数](https://developers.google.com/drive/search-parameters)`list`的请求，例如. 它要么返回一个空的文件列表（没有一个匹配 serach 条件），要么返回一个包含至少一个文件的列表。如果它只有一个 - 这很容易。但如果还有更多 - 您必须根据其他一些字段选择其中一个。请记住，在 gdrive 中，您可以拥有多个同名文件。因此，您提供的搜索参数越多越好。`title="File_1.xml" and fileExtension="xml"`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-10-17T13:58:11.853

在您的 Google Drive 中的文件上单击鼠标右键。选择选项以获取可以从菜单中共享的链接。您现在将看到文件 ID。不要忘记撤消共享。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-06-07T11:13:10.313

一种方法是在创建时将独特的属性与您的文件相关联。

```
properties = "{ \
    key='somekey' and \
    value='somevalue'
}" 
```

然后创建一个查询。

```
query = "title = " + "\'" + title + "\'" + \
        AND + "mimeType = " + "\'" + mimeType + "\'" + \
        AND + "trashed = false" + \
        AND + "properties has " + properties 
```

您已知的所有文件属性（标题等）都可以转到此处+属性。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-21T22:10:27.807

Stan0 最初的想法不是一个好主意。可以有多个同名文件。非常容易出错的实现。Stan0 的第二个想法是正确的方法。

当您第一次将文件上传到谷歌驱动器存储它的 id（在 SharedPreferences 中可能是最简单的）供以后使用

IE。

```
file= mDrive.files().insert(body).execute();      //initial insert of file to google drive

whereverYouWantToStoreIt= file.getId(); //now you have the guaranteed unique id 
                                        //of the file just inserted. Store it and use it 
                                        //whenever you need to fetch this file 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-06-21T22:23:19.117

如果您知道文件的名称并且您总是想下载该特定文件，那么您可以轻松地从以下网址获取所需文件的 ID 和其他属性：[https ://developers.google.com/drive/v2/参考/文件/列表](https://developers.google.com/drive/v2/reference/files/list)（在底部，您会找到一种运行查询的方法）。在 q 字段中输入 title = 'your_file_name' 并运行它。您应该会在下方看到一些结果，其中应该是一个“id”字段。那就是您要查找的 id。

您还可以使用来自以下网址的其他参数：[https ://developers.google.com/drive/search-parameters](https://developers.google.com/drive/search-parameters)

# javascript - 只有在使用 ajax 时才会出现 rails 路由错误

> ID：15057909
> 
> 赞同：0
> 
> 时间：2013-02-24T23:22:23.547
> 
> 标签：javascript, ajax, ruby-on-rails-3

我的投票链接通常有效，除非链接是通过 ajax 部分呈现的。当通过 JavaScript 部分呈现时，我得到一个路由错误，该错误在 firebug 中可见，否则没有错误。

没有萤火虫我知道有一个错误，因为当我尝试添加新制造商时没有添加制造商。如果我手动刷新页面，则链接和新制造商存在并且投票有效。

所以基本上使用 ajax 会破坏投票链接。

耙路线：

```
vote_car_manufacturer POST   /cars/:car_id/manufacturers/:id/vote(.:format)                manufacturers#vote 
```

看法：

```
<%= link_to '+', vote_car_manufacturer _path(car_id: @car.id, manufacturer_id: manufacturer.id, type: "up"), method: "post" %> 
```

萤火虫：

```
No route matches {:action=>"vote", :controller=>"manufacturers", :car_id=>1, :manufacturer_id=>29, :type=>"up"} 
```

使用 ajax 时是否必须以不同的方式实现投票链接？

**更新**

通过反复试验得到它的半工作。改变：

```
<%= link_to '+', vote_car_manufacturer _path(car_id: @car.id, manufacturer_id: manufacturer.id, type: "up"), method: "post" %> 
```

至：

```
<%= link_to '+', vote_car_manufacturer _path(@car.id, manufacturer.id, "up"), :method => :post %> 
```

现在它说找不到没有ID的制造商，所以我仍在调试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T18:37:42.393

解决方案非常简单。首先运行 rake 路由并确保以正确的格式提供路由请求的参数。

在我的情况下，参数应该是 vote_car_manufacturer _path(@car.id, id: Manufacturer, type: "up")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T23:45:49.700

你谈论ajax调用，但是

```
:remote => true 
```

不在**link_to**中，如文档中所述：http: [//api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html)

# android - Android如何从操作栏中的项目中删除标题提示

> ID：15057914
> 
> 赞同：3
> 
> 时间：2013-02-24T23:22:55.493
> 
> 标签：android, android-actionbar, actionbarsherlock

当用户在操作栏中的菜单项上长按时，会显示一个带有项目标题的小提示（Toast 样式）。

我想删除那个提示。将文本设置为`""`or`"@null"`是不够的，因为 Toast 样式框显示为空。

如何删除该提示？

提前致谢。

# java - SQLite：验证值是否存在

> ID：15057915
> 
> 赞同：0
> 
> 时间：2013-02-24T23:23:18.213
> 
> 标签：java, android, sqlite, cursor

基本上，我想验证用户名是否尚未写入数据库。由于我很新，我不知道该怎么做并尝试过，但我收到了这个代码的错误。我真的不知道是否有更好的方法来做到这一点，如果有，请告诉我，谢谢。

```
 private long addEntry(String strUsename, String strName,
        String strFirstName, String strPassword) {
    // TODO Auto-generated method stub
    ContentValues cv = new ContentValues();
    cv.put(KEY_USERNAME, strUsename);
    cv.put(KEY_FIRSTNAME, strFirstName);
    cv.put(KEY_NAME, strName);      
    cv.put(KEY_PASSWORD, strPassword);
    return accountDB.insert(DATABASE_TABLE, null, cv);
}

public String Verification_add(String ver_username, String strName,
        String strFirstName, String strPassword){
    String result = ""; 
    String[] columns = {KEY_ROWID, KEY_USERNAME, KEY_NAME, KEY_FIRSTNAME, KEY_PASSWORD}; 
    Cursor c = accountDB.query(DATABASE_TABLE, columns, KEY_USERNAME + "=" + ver_username, null, null, null, null);
    if (!c.moveToFirst()){ // IF IT'S FALSE, that mean the username is not taken, ritgh ? 
        addEntry(ver_username, strName, strFirstName, strPassword);
        c.close(); 
        return result = "Account[...] code: 1 !"; 
    }else{
        c.close(); 
        return result = "Username already [...] code:2 "; 
    } 

} 
```

这是 logcat 报告：

```
02-24 23:09:32.201: E/Verification_add(1389): MY ERROR !! 
02-24 23:09:32.201: E/Verification_add(1389): java.lang.NullPointerException
02-24 23:09:32.201: E/Verification_add(1389):   at com.example.communication.DataBaseRegistration.Verification_add(DataBaseRegistration.java:79)
02-24 23:09:32.201: E/Verification_add(1389):   at com.example.communication.Registration.onClick(Registration.java:42)
02-24 23:09:32.201: E/Verification_add(1389):   at android.view.View.performClick(View.java:4202)
02-24 23:09:32.201: E/Verification_add(1389):   at android.view.View$PerformClick.run(View.java:17340)
02-24 23:09:32.201: E/Verification_add(1389):   at android.os.Handler.handleCallback(Handler.java:725)
02-24 23:09:32.201: E/Verification_add(1389):   at android.os.Handler.dispatchMessage(Handler.java:92)
02-24 23:09:32.201: E/Verification_add(1389):   at android.os.Looper.loop(Looper.java:137)
02-24 23:09:32.201: E/Verification_add(1389):   at android.app.ActivityThread.main(ActivityThread.java:5039)
02-24 23:09:32.201: E/Verification_add(1389):   at java.lang.reflect.Method.invokeNative(Native Method)
02-24 23:09:32.201: E/Verification_add(1389):   at java.lang.reflect.Method.invoke(Method.java:511)
02-24 23:09:32.201: E/Verification_add(1389):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-24 23:09:32.201: E/Verification_add(1389):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-24 23:09:32.201: E/Verification_add(1389):   at dalvik.system.NativeStart.main(Native Method) 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T14:25:37.903

我猜你正在做这个检查，所以你不会添加相同的名字两次或更多：使用这个方法：PS：`updateRecord(String name)`如果你只是想知道名字是否在数据库中，你可以打电话。

公共长插入记录（）{

```
 ContentValues cv = new ContentValues();
    //put values

    if(!updateRecord(cv, name))
        return db.insert(P_TABLE, null, cv);
    else return 0;
}

private boolean updateRecord(ContentValues values, String name) {
    return db.update(P_TABLE, values, KEY_NAME + "=" + name, null) > 0;
} 
```

# php - PHP Source Code "Mapping"

> ID：15057916
> 
> 赞同：4
> 
> 时间：2013-02-24T23:23:19.890
> 
> 标签：php

I was wondering if anyone knew of a program that could accept a directory of php files and analyze them so that every function, variable, etc. has links to where it is defined, referenced, etc. so that I can quickly determine the purpose/use of a function. I know that RIPS does something similiar to this but it is primarily a vulnerability analysis tool. I would prefer not to have to pay for it if possible.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T23:25:41.993

[Exuberant Ctags](http://ctags.sourceforge.net/) can analyze files in that manner.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T23:28:28.467

IDEs like [NetBeans](http://netbeans.org/) or [Eclipse](http://eclipse.org/) provide this kind of feature, but inline as you are editing, not by generating a separate map file. You can right-click on a function and go to where it is defined, for example, or click on a defined function and find all the places it is used.

# jsf - JSF 缓存静态资源过滤器

> ID：15057932
> 
> 赞同：15
> 
> 时间：2013-02-24T23:25:00.073
> 
> 标签：jsf, servlet-filters, browser-cache

我如何编写一个过滤器，该过滤器将按照 Google 的建议（[https://developers.google.com/speed/docs/best-practices/caching](https://developers.google.com/speed/docs/best-practices/caching)）适当地缓存静态资源。

创建一个将上次修改日期设置为某个静态日期的过滤器是否足够（每次服务器重新启动时都会更改）？

> 为所有可缓存资源指定 Expires 或 Cache-Control max-age 之一以及 Last-Modified 或 ETag 之一非常重要。同时指定 Expires 和 Cache-Control: max-age 或同时指定 Last-Modified 和 ETag 是多余的。

上面的链接似乎建议您需要指定 Expires 或 Cache-Control。为什么这是必要的？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-25T12:05:35.317

> *如何编写一个过滤器，以按照 Google 的建议适当缓存静态资源*

如果您的意思是 JSF 资源文件`/resources`夹中的文件完全由 JSF 内置资源处理程序处理（[因此所有文件都通过`<h:outputStylesheet>`, `<h:outputScript>`,引用`<h:graphicImage>`，`#{resource}`因此不是通过纯 HTML 方式](https://stackoverflow.com/questions/8367421/how-to-reference-css-js-image-resource-in-facelets-template)），那么您不需要为工作。要满足 Google 的建议，您唯一需要做的就是将`Expires`日期设置得更远一些。它默认为 7 天（604800000 毫秒），而 Google Page Speed 和 Yahoo YSlow 等性能测试工具建议至少 30 天（2592000000 毫秒）。

在 Mojarra 中，您可以使用以下上下文参数设置它`web.xml`：

```
<context-param>
    <param-name>com.sun.faces.defaultResourceMaxAge</param-name>
    <param-value>2592000000</param-value> <!-- 30 days -->  
</context-param> 
```

在 MyFaces 中使用以下内容：

```
<context-param>
    <param-name>org.apache.myfaces.RESOURCE_MAX_TIME_EXPIRES</param-name>
    <param-value>2592000000</param-value> <!-- 30 days -->  
</context-param> 
```

* * *

> *创建一个将上次修改日期设置为某个静态日期的过滤器是否足够（每次服务器重新启动时都会更改）？*

您不需要也不应该设置`Last-Modified`. JSF 资源处理程序已经自动执行此操作。如果您因为更改了资源而想强制重新加载资源，请使用资源库版本控制。另请参阅[JSF 资源库的用途是什么以及应该如何使用它？](https://stackoverflow.com/questions/11988415/what-is-the-jsf-resource-library-for-and-how-should-it-be-used)

请注意，每次服务器重新启动时更改它是没有意义的，因为`Expires`标头仍会一直告诉浏览器仅在一段时间后重新测试缓存的有效性。在浏览器真正请求资源之前，浏览器永远不会注意到`Last-Modified`资源的变化。唯一迫使浏览器难以完全重新请求资源的是 URL 的更改，通常通过更改查询字符串参数值来实现。JSF 资源库版本控制正是这样做的。

另请注意，[OmniFaces`CombinedResourceHandler`](http://showcase.omnifaces.org/resourcehandlers/CombinedResourceHandler)使用资源的最后修改时间戳作为查询字符串中的“资源版本”，而不是资源库版本。因此，如果您使用它，则不一定需要资源库版本控制机制。

* * *

> *上面的链接似乎建议您需要指定 Expires 或 Cache-Control。为什么这是必要的？*

标`Expires`头告诉浏览器何时通过条件 GET 请求重新测试缓存资源的有效性。所以，在那之前浏览器不会这样做，并且会继续使用缓存中的那个。`Cache-Control`告诉浏览器使用哪种缓存策略。请注意，当它设置为 eg`no-cache`而不是 时`public`，`Expires`标题将不起作用。另请注意，没有`Cache-Control`标头意味着`public`（正如 JSF 资源所做的那样）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-23T02:10:23.797

这是我编写缓存过滤器的方式。奇迹般有效。

## 编写缓存过滤器以提高 JSF/Servlet 屏幕静态内容的性能

在您的 web.xml 中添加以下内容

```
<filter>
    <filter-name>cache</filter-name>
    <filter-class>au.com.webapp.config.CacheFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>cache</filter-name>
    <url-pattern>*.xhtml</url-pattern>
</filter-mapping> 
```

在您的 au.com.webapp.config 包中创建一个类 CacheFilter，如下所示：

```
package au.com.webapp.config;

import java.io.IOException;

import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class CacheFilter implements Filter {
    private static long maxAge = 86400 * 30; // 30 days in seconds

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)
            throws IOException, ServletException {
        HttpServletResponse httpResponse = (HttpServletResponse) response;
        String uri = ((HttpServletRequest) request).getRequestURI();
        if (uri.contains(".js") || uri.contains(".css") || uri.contains(".svg") || uri.contains(".gif")
                || uri.contains(".woff") || uri.contains(".png")) {
            httpResponse.setHeader("Cache-Control", "max-age=" + maxAge);
        }
        chain.doFilter(request, response);
    }

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
        System.out.println("Cache Filter started: ");

    }

    @Override
    public void destroy() {
    }
} 
```

## 如何验证我的屏幕是否正在使用缓存

要查看您的内容是否已经使用 gzip 和缓存，请在**Google Chrome**浏览器中 -> 右键单击​​屏幕 -> 检查 -> 单击网络选项卡 -> 刷新屏幕。单击图像、图标、样式表，看看您是否在**响应标题中看到以下内容**

`Cache-Control:max-age=2592000`

此外，当您刷新页面时，如果元素的状态是 304 而不是 200（来自缓存），那么您就完成了。

## 其他性能改进，例如 gzip

有关可以显着改变您的 web 应用程序或网站性能的其他简单性能改进，请参阅以下链接，例如 gzip 或 JQuery UI 组件。 [https://stackoverflow.com/a/35567464/5076414](https://stackoverflow.com/a/35567464/5076414)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-24T16:40:42.197

无需编写过滤器，Tomcat 7 已经有 ExpiryFilter，它将 Cache-Control 添加到您的资源中。它可以基于修改或访问时间。请参阅此博客：

[http://kahimyang.info/kauswagan/howto_blogs/1574-improving_page_load_with_mod_expires_and_expiresfilter_in_jsf_applications](http://kahimyang.info/kauswagan/howto_blogs/1574-improving_page_load_with_mod_expires_and_expiresfilter_in_jsf_applications)

# symfony - Capifony / Capistrano：无法创建符号链接

> ID：15057939
> 
> 赞同：4
> 
> 时间：2013-02-24T23:25:30.027
> 
> 标签：symfony, capistrano, capifony

我正在使用 Capifony 2.2.7 将 Symfony 2 项目部署到 Amazon EC2。尝试为,和目录创建符号链接的`shared_children`选项，但挂在目录上（在成功创建和 的链接之后）。的详细输出如下所示：`deploy.rb``logs``uploads``vendor``uploads``logs``vendor``cap:deploy`

```
* executing "sudo -p 'sudo password: ' sh -c 'if [ -d /home/ubuntu/tempdeploy/releases/20130224230816/web/uploads ] ; then rm -rf /home/ubuntu/tempdeploy/releases/20130224230816/web/uploads; fi'"
servers: ["10.12.345.67"]
[10.12.345.67] executing command
* executing "sudo -p 'sudo password: ' ln -nfs /home/ubuntu/tempdeploy/shared/web/uploads /home/ubuntu/tempdeploy/releases/20130224230816/web/uploads"
** [out :: 10.12.345.67] ln:
** [out :: 10.12.345.67] failed to create symbolic link `/home/ubuntu/tempdeploy/releases/20130224230816/web/uploads'
** [out :: 10.12.345.67] : No such file or directory 
```

我试过删除`.rsync_cache`、部署 via`:copy`等。该`web/uploads`目录存在于 git repo 中。这是[完整的 deploy.rb 文件](https://gist.github.com/anonymous/5026198)。

我可以提供任何想法或更多信息吗？

# ios - 在 iOS 中使用 CLLocation 管理器获取一次坐标

> ID：15057941
> 
> 赞同：1
> 
> 时间：2013-02-24T23:25:38.943
> 
> 标签：ios, geolocation, cllocationmanager

我正在使用此代码来获取坐标：

```
_locationManager = [[CLLocationManager alloc] init];
_locationManager.desiredAccuracy = kCLLocationAccuracyBest;
_locationManager.delegate = self;
[_locationManager startUpdatingLocation]; 
```

然后我正在使用

```
- (void)locationManager:(CLLocationManager *)manager
 didUpdateLocations:(NSArray *)locations
{

_currentLocation = [locations lastObject];

//Doing some stuff

//I am using stopUpdatingLocation but this delegate is called a lot of times
[_locationManager stopUpdatingLocation];

 } 
```

我实际上想获得一次坐标，因为我想避免多次执行 didUpdateLocation 中的代码。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T23:32:32.623

这是因为位置管理器多次触发其更新，逐步获得更准确的位置结果。

阻止这种情况的一种方法是简单地使用布尔值

```
BOOL _hasUpdatedUserLocation = NO;

- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
{
    if (!_hasUpdatedUserLocation) {
        _hasUpdatedUserLocation = YES;
        ... // other code
    }
} 
```

或者，您可以杀死代表：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
{
    [locationManager setDelegate:nil];
    ... // other code
} 
```

# perl - 有谁知道 APNS 的简单概述/教程？

> ID：15057943
> 
> 赞同：1
> 
> 时间：2013-02-24T23:26:04.767
> 
> 标签：perl, push-notification, apple-push-notifications, cpan

我想从 shell 脚本（bash、perl 等）向桌面 Mac（可能最终是我的 iPhone）发送通知。

我知道 APNS 是我想要的，但 Apple 在解释那是什么方面做得非常糟糕。至少对于 iPhone，我似乎必须安装一个应用程序（我自己创建的），加上设置一些证书配置，然后通过他们的服务发送通知。如果这本质上是错误的，请纠正我。

OSX 通知也需要相同的内容吗？我可以在没有所有 rigamarole 的情况下在本地（到同一台机器）发送通知吗？

Perl 似乎有一个 CPAN 模块，它可能会使事情变得稍微容易一些，但我还没有找到如何使用它的示例或教程。

我需要帮助开始，我的谷歌搜索没有出现任何对我来说很有意义的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:40:46.997

本地通知仅适用于 iOS。从 10.7 (Lion) 开始，推送通知在 iOS 和 OSX 上都可用。

我同意证书的配置很烦人，但如果这是您选择的解决方案，Apple 提供的[本地和推送通知指南](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/WhatAreRemoteNotif/WhatAreRemoteNotif.html#//apple_ref/doc/uid/TP40008194-CH102-SW2)就足够了。

但是，如果您只需要 OSX 上的本地内容，您可能可以在后台运行一些服务，这些服务会在所需的时间触发所需的行为。我不熟悉 OSX，所以我不能更具体。我认为本地通知仅适用于 iOS 的原因是您无法在 iOS 的后台运行应用程序。推送通知对两者都可用，因为它们是由远程服务器触发的。

# python - 如何标记 NLTK 中的字符串句子？

> ID：15057945
> 
> 赞同：64
> 
> 时间：2013-02-24T23:26:12.900
> 
> 标签：python, nlp, tokenize, nltk

我正在使用 nltk，所以我想创建自己的自定义文本，就像 nltk.books 上的默认文本一样。但是，我刚刚开始使用类似的方法

```
my_text = ['This', 'is', 'my', 'text'] 
```

我想发现任何输入我的“文本”的方法：

```
my_text = "This is my text, this is a nice way to input text." 
```

哪种方法，python 或 nltk 允许我这样做。更重要的是，我怎样才能忽略标点符号？

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2013-02-24T23:28:02.803

这实际上是在[nltk.org 的主页上](http://nltk.org/)：

```
>>> import nltk
>>> sentence = """At eight o'clock on Thursday morning
... Arthur didn't feel very good."""
>>> tokens = nltk.word_tokenize(sentence)
>>> tokens
['At', 'eight', "o'clock", 'on', 'Thursday', 'morning',
'Arthur', 'did', "n't", 'feel', 'very', 'good', '.'] 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-03-01T07:48:29.167

正如@PavelAnossov 回答的那样，规范的答案是使用`word_tokenize`nltk 中的函数：

```
from nltk import word_tokenize
sent = "This is my text, this is a nice way to input text."
word_tokenize(sent) 
```

* * *

**如果你的句子真的很简单：**

使用该`string.punctuation`集合，删除标点符号，然后使用空格分隔符拆分：

```
import string
x = "This is my text, this is a nice way to input text."
y = "".join([i for i in x if not in string.punctuation]).split(" ")
print y 
```

# c# - 根据预先生成的文件名列表读取文件？

> ID：15057947
> 
> 赞同：0
> 
> 时间：2013-02-24T23:26:23.857
> 
> 标签：c#, multithreading, file-io

如果我知道在我的 D:\ 驱动器下会生成 100 个文件，并且我知道它们的名称将是 001.tif、002.tif、...、100.tif，我该如何继续阅读它们，直到我阅读所有 100 个文件？文件将如下所示： D:/001.tif D:/002.tif ... D:/100.tif

我不认为 FileWatcherSystem 或类似的东西是一个好的选择，因为在这种情况下我不必担心文件事件，因为这些文件肯定会在那里生成。这只是时间问题（很快）。所以我想我只需要无限期地读取硬盘驱动器（目标文件夹），直到所有文件都被读取。任何人有任何意见我应该如何做到这一点？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:41:59.203

我基本上使用 while(true) 循环来观察文件夹；文件准备好后，我阅读并处理它。完成此过程，直到处理完所有文件。这是代码：

```
 public void ReadIndefinitely(string tiffFileFolder, List<string> channelName, int signalLength)
        {            
            string tiffFileName; 
            int nActiveStats = _signalDisplay.NActiveStatsOneChannel;
            int nActiveChannels = _signalDisplay.NActiveChannel;
            double signal;
            double DeltaT;
            bool keepReading = true;
            int channelIndex;
            int statIndex;
            int signalIndex = 0;

            while (signalIndex < signalLength)
            {                
                for (int i = 0; i < nActiveChannels; i++)
                {
                    tiffFileName = tiffFileFolder + channelName[i] + "_0001_0001_0001_" + (signalIndex + 1).ToString("0000") + ".tif";
                    channelIndex = (int)Enum.Parse(typeof(ChannelList), channelName[i]);
                    keepReading = true;
                    if(keepReading)
                    {
                        if (File.Exists(tiffFileName))
                        {
                            if (!IsFileLocked(tiffFileName))
                            {
                                for (int j = 0; j < nActiveStats; j++)
                                {
                                    statIndex = _statsEnableEnumIndex[j];
                                    DeltaT = ExtractTiffDeltaT(tiffFileName, "DeltaT=", 1);
                                    signal = _signalManager.GetSignal(statIndex, tiffFileName);
                                    UpdateSignal(channelIndex, j, signalIndex, DeltaT, signal);
                                }

                                keepReading = false;
                                signalIndex++;      
                            }
                            else
                            {
                                System.Threading.Thread.Sleep(30);
                            }
                        }
                    }

                   // if (signalIndex % 5 == 0)
                    _signalDisplay.SetData(_XList, _YList, true);
                }

            }
        } 
```

我必须警告你，这个操作占用了我 90% 的 CPU。

# c# - GraphViz 从 C# 代码启动时不会生成 png 文件

> ID：15057949
> 
> 赞同：0
> 
> 时间：2013-02-24T23:26:28.423
> 
> 标签：c#, graphviz

在我描述图形的类中，我想创建一种方法来生成 GraphViz 代码并将其保存到 .dot 文件中，而其他方法则使用该图形制作 png 图形文件。我试过了：

```
 private void MakeDotFile()
        {
            FileStream fileStream =
                new FileStream("tmp.dot", FileMode.Create, FileAccess.Write);
            StreamWriter streamWriter = new StreamWriter(fileStream);
            streamWriter.Write("graph { a -- b }");
            streamWriter.Close();
            fileStream.Close();
        }

        public void MakePngFile()
        {
            MakeDotFile();
            Process process = new Process();
            process.StartInfo =
                new ProcessStartInfo("<< dot.exe location >>",
                "-Tpng << .dot file location >> > << .png file location >>");
            process.Start();
            process.WaitForExit();
        } 
```

但不幸的是，它正在完成发出“哔”之类的可怕声音并且什么都不做（不创建 png 文件）。当我调试时，我发现进程退出代码是3。我检查了很多次路径是否良好。有趣的是，在 cmd.exe 中具有相同参数的同一程序运行正常。你怎么看？问题出在哪里？解决办法是什么？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:50:21.457

而不是重定向输出，您应该`-o`使用`dot`.

```
process.StartInfo =
    new ProcessStartInfo(@"D:\graphviz\bin\dot.exe",
        @"-Tpng D:\tmp.dot -o D:\tmp.png"); 
```

# php - PHP & Jquery - 在客户端和服务器之间发送数据

> ID：15057952
> 
> 赞同：1
> 
> 时间：2013-02-24T23:26:34.023
> 
> 标签：php, jquery

我正在尝试编写将文件路径发送到服务器的代码，使用 php 将每一行解析为数组并将数组返回给客户端以对其进行处理。

当我运行我的程序时，它看起来不像是在处理 php 文件，因为我为测试目的而输入的 echo 从未被调用过。

我对 PHP 一无所知，因此非常感谢您的帮助！

查询：

```
$("#codelines").load('ParsePHPForDisplay.php?filename=DBManager.php');

    console.log($('#codelines'));
    pieces = $("#codelines").html().split("\n"); 
```

PHP：

```
<?php

class Parsing
{
    function ParseStuff()
    {
        echo('hi');
        $parsedFile = file($_REQUEST['filename']);
        echo($_REQUEST['filename']);
//        foreach ($parsedFile as $parsedFile_num => $parsedFile) {
//            echo"Line #<b>{$parsedFile_num}</b> : " .htmlspecialchars($parsedFile) . "<br/>\n";
//        }
        return $parsedFile;
    }
}

?> 
```

我的一段 HTML：

```
<section id="codestuff">
    <h2>Code Lines</h2>
    <pre id="codelines">
    </pre>
</section> 
```

**编辑：**

这是我现在的PHP：

```
<?php

        echo('hi');
        $parsedFile = file($_REQUEST['filename']);
        echo('test');
        echo($_REQUEST['filename']);
//        foreach ($parsedFile as $parsedFile_num => $parsedFile) {
//            echo"Line #<b>{$parsedFile_num}</b> : " .htmlspecialchars($parsedFile) . "<br/>\n";
//        }
        return $parsedFile;

?> 
```

我收到此错误：

**解析错误**：语法错误，意外的 T_STRING，第**5**行ParsePHPForDisplay.php 中的预期为**T_FUNCTION**。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:02:54.890

好吧，我相信你应该使用的 PHP，因为你在 Javascript 部分将文件拆分为一个数组，是：

```
<?php
  $file = file_get_contents($_REQUEST['filename']);
  echo $file;
?> 
```

但在发布之前，您应该检查安全问题，例如用户从其他目录加载文件，在文件名中使用 ../，也不要获取 php 文件等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T23:53:17.107

我不明白你为什么需要 PHP 将文件解析为一个数组......只需让它将整个内容作为一个大字符串发送，然后你可以将它拆分为一个行数组，如果你需要的话，在 Javascript一旦你从服务器（例如`myString.split(/\n\r|\n|\r)`）得到它。

然后，从 PHP 中，您可以执行以下操作：

`readfile($_REQUEST['filename']); exit;`

（请注意，这是不安全的；您应该在 PHP 代码中添加一些条件，以便它只能输出特定目录中的文件，例如。请参阅 PHP 的`explode`函数，该函数将帮助您将文件名拆分为一个数组，`DIRECTORY_SEPARATOR`用作分隔符）。

请注意，在 PHP 中，`return`语句不会导致输出任何内容。很多时候，你会通过一个 sa 值的函数获得你需要的值，`return`但你仍然需要它。`echo``print`**

# jquery - 在 jquery 事件之后跟随链接

> ID：15057956
> 
> 赞同：0
> 
> 时间：2013-02-24T23:27:02.367
> 
> 标签：jquery, animation, hyperlink

我有一个导航栏，一旦单击该项目，我就会制作动画。我想在导航完成后点击链接。

HTML：

```
<div id="project-nav">
    <ul> 
        <a href="" >
            <li class="project-3">1
                <ul> 
                    <li>WAIKANAE BEACH HOUSE</li>
                </ul>
            </li>
        </a>

        <a href="">
            <li class="project-4">2
                <ul> 
                    <li>WAITAHEKE WETLAND HOME</li>
                </ul>
            </li>
        </a>

        <a href="">
            <li class="project-1">3
                <ul> 
                    <li>WAIKANAE BEACH HOUSE</li>
                </ul>
            </li>
        </a> 
```

脚本：

```
$("#project-nav a").click(function(ev) 
{
    ev.preventDefault();

    var $self=$(this);

    $(".project-1").animate( {"top": "+=-500px"}, 1200, function() { showComplete() } );
    $(".project-2").animate( {"top": "+=-500px"}, 1400, function() { showComplete() } );
    $(".project-3").animate( {"top": "+=-500px"}, 1000, function() { showComplete() } );
    $(".project-4").animate( {"top": "+=-500px"}, 1000, function() { showComplete() } );
    $(".project-5").animate( {"top": "+=-500px"}, 1000, function() { showComplete() } );
});

function showComplete()
{
    document.location = $self.attr('href');
} 
```

这是我到目前为止所拥有的，动画有效，但它没有遵循链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T23:29:50.580

问题被`$self`声明在`showComplete`.

试试这个：

```
$("#project-nav a").click(function(ev) {

    ev.preventDefault();
    var $self=$(this);

    $(".project-1").animate( {"top": "+=-500px"}, 1200, showComplete);
    $(".project-2").animate( {"top": "+=-500px"}, 1400, showComplete);
    $(".project-3").animate( {"top": "+=-500px"}, 1000, showComplete);
    $(".project-4").animate( {"top": "+=-500px"}, 1000, showComplete);
    $(".project-5").animate( {"top": "+=-500px"}, 1000, showComplete);

    function showComplete(){
        window.location = $self.attr('href');
    }
}); 
```

我所做的是`showComplete`在事件处理程序内部移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T23:30:55.687

$self 超出`showComplete()`.

您应该传递一个参数。

**示例**

```
$(".project-5").animate( {"top": "+=-500px"}, 1000, function() { showComplete($self.attr("href")) } );

function showComplete(pUrl){
    document.location = pUrl;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T23:30:58.647

我的猜测`$self`是不确定的。它只存在于它创建的函数中。

你需要做： showComplete($self);

然后在函数创建中：

```
showComplete(el){
    document.location = el.attr('href');
} 
```

# html - All_Users 页面中指向用户配置文件、路由的链接

> ID：15057959
> 
> 赞同：2
> 
> 时间：2013-02-24T23:27:18.140
> 
> 标签：html, ruby-on-rails, ruby, erb

试图让我的 all_users 页面呈现所有拥有帐户的用户的列表 - 然后每个列表项将是指向该用户个人资料页面的链接。我有正确呈现用户名的页面，但他们没有指向他们的用户页面。他们的用户页面应该是 /user/username，但链接指向 /username，这显然会产生错误。我真的，真的，真的很感谢你的帮助。Stack Overflow 确实令人难以置信。

模型：

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
     attr_accessible :email, :password, :password_confirmation, :remember_me, :username
     has_many :items

  validates_presence_of :username
  validates_uniqueness_of :username

  def to_param
    username
  end

end 
```

控制器：

```
class UsersController < ApplicationController
  def show
    @user = User.find_by_username(params[:id])
  end
  def index
@user = User.find(:all)
  end
end 
```

All_Users 视图：

```
<div class="well">
  <h1>All users</h1>

  <% @user.each do |user| %>
    <%= link_to user.username, public_profile_path(user.username) %><br/>
  <% end %>
</div> 
```

路线：

```
Scratch::Application.routes.draw do

  resources :items

  devise_for :users
  match 'users/:id' => 'users#show'
  match '/users', :to => 'users#index', :as => "all_users", :via => "get"
  match ':username' => 'users#show', via: :get, as: :public_profile

  root :to => 'static_pages#home'
  get "about" => "static_pages#about"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:39:10.090

```
match '/username/:name' => 'users#show', via: :get, as: :public_profile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T23:51:16.020

我倾向于制作一个新的控制器，这样我就不会最终压倒设计。

像 Admin::Users 这样的东西，然后我只做基本的脚手架，然后将该控制器中的变量映射到 Devise 用户模型。

这样我就可以重新设计前端使用的设计视图和后端使用的管理视图。

# java - 制作图形时“找不到符号”

> ID：15057962
> 
> 赞同：1
> 
> 时间：2013-02-24T23:27:32.973
> 
> 标签：java

我正在编写一个代码来为计算机作业制作徽章，并且错误不断出现，说它“找不到符号”。我已经在多个站点上阅读了有关使线条设置颜色的格式，它们都显示完全相同的格式。在使用相同的方法之前我已经做了一个小程序，并且没有这个问题。不久前我收到并从 java 更新，我不确定格式是否已更改。这是我的简单代码：

```
import java.awt.*;
import javax.swing.JApplet;

public class Insignia extends JApplet
{
   public void paint(Graphics page)
   {   
       setBackground(new Color(75,0,130));
       page.setColor(new Color(0,204,255));
       page.drawLine(320, 120, 240, 180);
       page.drawLine(320, 120, 400, 180);
       page.drawLine(400, 180, 400, 300);
       page.drawLine(400, 300, 320, 360);
       page.drawLine(320, 360, 240, 300);
       page.drawLine(240, 300, 240, 180);
   }
} 
```

当我去编译时，从设置颜色到最后一行的每一行都会弹出错误

```
drawLine.ex:   error cannot find symbol
               page.drawLine(240, 300, 240, 180);                        
-------------------^ 
```

它正好指向这个时期。我使用命令提示符来编译和运行我的程序。格式看起来正确，我尝试了从文档名称更改到更改 .drawLine 之前的单词的不同方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:46:05.433

我想你错过了`java.awt.Graphics`进口。

```
import java.awt.Color;
import java.awt.Graphics;

import javax.swing.JApplet;

public class Insignia extends JApplet {
    @Override
    public void paint(Graphics page) {
        setBackground(new Color(75, 0, 130));
        page.setColor(new Color(0, 204, 255));
        page.drawLine(320, 120, 240, 180);
        page.drawLine(320, 120, 400, 180);
        page.drawLine(400, 180, 400, 300);
        page.drawLine(400, 300, 320, 360);
        page.drawLine(320, 360, 240, 300);
        page.drawLine(240, 300, 240, 180);
    }
} 
```

# opengl - 立方体上的 OpenGL 3D 纹理

> ID：15057964
> 
> 赞同：1
> 
> 时间：2013-02-24T23:27:47.127
> 
> 标签：opengl, textures, 3d-texture

我有一个简单的 3d 立方体（所有边大小相同）和 OpenGL 中的 3D 纹理。我想将 3D 纹理映射到立方体。

结果应该是一个立方体，它一直被着色，这样立方体内的每个点都从纹理内的相应点获得颜色。这至少是我对 3D 纹理的解释。

这该怎么做？我想用GL_QUADS（6个四边形）制作一个立方体并为六个边中的每一边指定一个纹理坐标是行不通的？

我假设我必须制作一个立方体，同时以正确的方式制作指定 glTexCoord 的立方体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T23:43:31.630

您所描述的听起来像体素渲染，通常通过光线跟踪完成。

不幸的是，3D 纹理不符合您的描述。尽管 3D 纹理在每次提取纹理像素时都采用 U、V、W，但 OpenGL 仍然沿图元的平面进行绘制。您必须在片段着色器中编写一些光线跟踪代码才能投射到 3D 纹理中。由于您将有效地进行光线跟踪，因此您最好只放置一个平面（非旋转）单四边形（更好的是，两个三角形构成一个伪四边形，因为不推荐使用四边形）并使用您的光线跟踪内容编写片段着色器代码.

有关更多详细信息，请查看“直接体积渲染”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-05T08:22:48.487

你应该画很多平行的四边形而不是画一个单一的 Cude。

例如，沿 z 轴绘制一系列四边形：

```
#define MAP_3DTEXT( TexIndex ) \
glTexCoord3f(0.0f, 0.0f, ((float)TexIndex+1.0f)/2.0f);  \
glVertex3f(-dViewPortSize,-dViewPortSize,TexIndex);\
glTexCoord3f(1.0f, 0.0f, ((float)TexIndex+1.0f)/2.0f);  \
glVertex3f(dViewPortSize,-dViewPortSize,TexIndex);\
glTexCoord3f(1.0f, 1.0f, ((float)TexIndex+1.0f)/2.0f);  \
glVertex3f(dViewPortSize,dViewPortSize,TexIndex);\
glTexCoord3f(0.0f, 1.0f, ((float)TexIndex+1.0f)/2.0f);  \
glVertex3f(-dViewPortSize,dViewPortSize,TexIndex);

 for ( float fIndx = -1.0f; fIndx <= 1.0f; fIndx+=0.003f )
{
    glBegin(GL_QUADS);
        MAP_3DTEXT( fIndx );
    glEnd();
} 
```

现在你会得到你想要的。更多细节可以在[这里找到](https://www.codeproject.com/Articles/352270/Getting-started-with-Volume-Rendering)

上述方法就是所谓的基于纹理的体积渲染。但是如果你追求更好的视觉效果和性能，Ray-Casting 会更合适，它可以让你通过体量。

# sql - Oracle：检查 dml 语句

> ID：15057967
> 
> 赞同：3
> 
> 时间：2013-02-24T23:28:16.817
> 
> 标签：sql, oracle, plsql, dml

我正在寻找一种使用 Pl/SQL 的方法来检查由“立即执行”执行的语句是否是 dml 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:38:34.423

可能有一个解决方案来检查查询字符串是否包含*“INSERT”或“UPDATE”或......*

但我认为这可能不是通用且一致的解决方案。

如果 SQL 正在调用可能调用 DML 或 DLL 的包或存储过程怎么办？

我认为您可能会依赖[BEFORE / AFTER DDL TRIGER](http://psoug.org/reference/ddl_trigger.html)或调查[`ora_sysevent`](http://asktom.oracle.com/pls/apex/f?p=100:11:0::::P11_QUESTION_ID:267415465220)功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T05:04:04.497

我认为您可以使用 SQL%ROWCOUNT 进行检查。例如（一个粗糙的块，未经测试）

```
set serveroutput on
begin
execute immediate 'update tableA set fieldA=100';
if(SQL%ROWCOUNT > 0) then
dbms_output.put_line('DML');
end if;
end;
/ 
```

SQL%ROWCOUNT 返回受最近 DML 影响的行数。因此，如果由 execute immediate 执行的语句是 DML 语句并且如果它改变了任何内容，那么 sql%rowcount 将大于 0。否则，如果它是 DDL，那么使用 SQL%ROWCOUNT 很可能会引发异常（或它将等于 0)

# python - Scipy map_coordinates 双线性插值与 interp 和 IDL 插值相比

> ID：15057970
> 
> 赞同：5
> 
> 时间：2013-02-24T23:28:39.360
> 
> 标签：python, scipy, interpolation, matplotlib-basemap, idl-programming-language

我正在将同事 IDL 代码重写为 python，并提出了一些我感到困惑的差异。根据我发现的其他 SO 问题和邮件列表线程，如果您使用`scipy.ndimage.interpolation.map_coordinates`并指定`order=1`它应该进行双线性插值。在比较 IDL 代码（在 GDL 中运行）和 python（map_coordinates）之间的结果时，我得到了不同的结果。然后我尝试使用`mpl_toolkits.basemap.interp`并得到与 IDL 代码相同的结果。下面是一个简单的例子，显示出了什么问题。有人可以帮我弄清楚我做错了什么`map_coordinates`或者`order=1`不是双线性的吗？

```
from scipy.ndimage.interpolation import map_coordinates
from mpl_toolkits.basemap import interp
import numpy

in_data = numpy.array([[ 25.89125824,  25.88840675],[ 25.90930748,  25.90640068]], dtype=numpy.float32)

map_coordinates(in_data, [[0.0],[0.125]], order=1, mode='nearest')
# map_coordinates results in "25.89090157"
interp(in_data, numpy.array([0,1]), numpy.array([0,1]), numpy.array([0.0]), numpy.array([0.125]), order=1)
# interp results in "25.89351439", same as GDL's "25.8935" when printed 
```

我很好用`interp`，但我很好奇为什么`map_coordinates`没有返回相同的结果。我注意到`map_coordinates`文档没有提到双线性，它实际上是双线性的吗？我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T01:09:04.757

使用时`map_coordinates`，需要转置数组或将坐标更改为 (y, x) 格式，因为数组的形状是`(height, width)`。

```
from scipy.ndimage.interpolation import map_coordinates
from mpl_toolkits.basemap import interp
import numpy

in_data = numpy.array([[ 25.89125824,  25.88840675],[ 25.90930748,  25.90640068]], dtype=numpy.float32)

print map_coordinates(in_data.T, [[0.0],[0.125]], order=1, mode='nearest')
print interp(in_data, numpy.array([0,1]), numpy.array([0,1]), numpy.array([0.0]), numpy.array([0.125]), order=1) 
```

这将输出：

```
[ 25.89351463]
[ 25.89351439] 
```

# python - 如何构建函数以处理单个可迭代或两个或多个参数

> ID：15057979
> 
> 赞同：0
> 
> 时间：2013-02-24T23:29:18.007
> 
> 标签：python, function, optimization, coding-style

我有以下函数示例（数字列表的平均值）：

```
def avg(obs):
    return (1\. / len(obs)) * np.sum(obs)

avg([1,2,3,4,5])
3.0 
```

我很有趣，不明白如何使用单个可迭代参数和两个或多个参数，如`max()`

```
max(1,2,3,4,5)
5
max([1,2,3,4,5])
5 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T23:37:22.010

首先，除非你有充分的理由，否则你不应该这样做；`min`这样`max`做是因为它们的二进制形式很常见，但例如`sum`只对可迭代对象进行操作。

这就是说，下面的伎俩。

```
from collections import Sized

def avg(*obs):
    if len(obs) == 1 and isinstance(obs[0], Sized):
        obs = obs[0]
    return (1\. / len(obs)) * sum(obs) 
```

（`Sized`是一个抽象基类，它概括了列表、集合、字典、元组、NumPy 数组和各种其他容器。它确保`len`已定义。）

# c++ - 在boost python中用map_indexing_suite包装一个字符串/shared_ptr unordered_map

> ID：15057987
> 
> 赞同：0
> 
> 时间：2013-02-24T23:29:38.997
> 
> 标签：c++, boost-python

我正在尝试使用 boost python 中的 map_indexing_suite 实用程序来包装 boost::unordered_map。但是，每当我尝试这样做时，我都会遇到错误

```
Error   26  error C2039: 'key_comp' : is not a member of 'boost::unordered::unordered_map<K,T>' c:\programming_libraries\cpp_libraries\boost_1_49_0\boost\python\suite\indexing\map_indexing_suite.hpp  155 
```

这是我正在做的包装

```
class_<boost::unordered_map<std::string, boost::shared_ptr<Character::BaseCharacter> > >("BasePartyMemberMap")
                .def(map_indexing_suite<boost::unordered_map<std::string, boost::shared_ptr<Character::BaseCharacter> > >())
                ; 
```

我假设这与 unordered_map 与 shared_ptr 一起使用有关。如果我使用 std::map 它可以正常工作。我希望有人能告诉我问题是什么以及是否可以解决。如果可以避免，我宁愿不将结构切换到 std::map 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-11T05:58:47.637

Boost.Python 在 v.1.55 之前不支持 std::unordered_map 和移动语义（参见 Boost 版本 1.55.0 发行说明，“多索引容器”部分）。因此，您可以使用最新版本或实施以下之一：

*   为 unordered_map实现[map_indexing_suite](http://www.boost.org/doc/libs/1_54_0/libs/python/doc/v2/indexing.html)，主要区别在于键是无序的，因此您应该从原始实现中删除 compare_index：www.boost.org/doc/libs/1_54_0/boost/python/suite/indexing/map_indexing_suite.hpp
*   使用此示例[https://wiki.python.org/moin/boost.python/StlContainers](https://wiki.python.org/moin/boost.python/StlContainers)制作简单的自己的包装器

# java - Java（数组列表）

> ID：15057989
> 
> 赞同：0
> 
> 时间：2013-02-24T23:30:08.867
> 
> 标签：java

以下方法应返回整数列表中最长排序序列的长度。例如，如果一个名为 list 的变量存储以下值序列：`{11,12,30,41,5,3,7,6}`，它应该返回`4`。

当最长的排序序列从前面开始时，此方法未通过测试（它返回`3`），但它适用于其他测试。有谁知道问题出在哪里？谢谢你。

```
public int longestSortedSequence() {

    int count = 0;
    int max1 = 0;
                int max2 = 0;

    for (int i = 0; i < size; i++) {
        if (elementData[i] <= elementData[i + 1]) {
            count++;
            if (count >= max1) {
                max1 = count;

            }
        } else if (elementData[i] > elementData[i + 1]) {
            count = 0;
            count++;
            if (count >= max2) {
                max2 = count;
            }
        }
    }
    return Math.max(max1, max2);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:42:03.780

两条评论：

1.  对于 each `i`，您正在测试元素是否`i+1`继续当前的非递减序列。因此，在循环的第一次迭代之前，您应该已经将元素 0 计为属于当前非递减序列；在第一次迭代中，您测试元素 1 是否继续该序列。这意味着`count`应该在开始时设置为 1。

2.  您的代码可能会在 for 循环的最后一次迭代中抛出 ArrayIndexOutOfBoundsException，因为`i+1`大小相等，这不是数组的有效索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T23:50:43.093

*   我猜你问题中的代码有很多复制粘贴。例如 `if (count>=max)`零件。

*   您的代码可能会抛出`IndexOutOfBoundExcep.`，因为您`e[i+1]`在循环中阅读并设置了条件`i<size`

*   如果`count`数组不为空，则应该至少为 1。（降序排序大小写）。空数组时，返回 0。

我只是做了一些修复，并重新编写了一点。（没有在 IDE 中编写，也没有经过测试）。只是显示一些想法。

```
public int longestSortedSequence() {
    if (size==0)return 0; //empty array
    int count = 1; //at least 1
    int max = 1;
    for (int i = 0; i < size-1; i++) {
        if (elementData[i] <= elementData[i + 1]) {
            count++;          
        } else {
            max=count>max?count:max;
            count = 1;
        }
    }
    return count>max? count: max;
} 
```

# postgresql - 匹配文本字段不是空字符串时查询非常慢

> ID：15057990
> 
> 赞同：3
> 
> 时间：2013-02-24T23:30:11.273
> 
> 标签：postgresql, postgresql-9.1

我有一个非常简单的查询，基本上是这样的：

```
Select * from my_table Where my_field != ''; 
```

表中有大约 40,000 行，“my_field”列是一个文本字段（varchar 255）

查询运行大约需要 39,000 毫秒。我猜是因为它必须在每条记录中查看不是空字符串的东西。我已经索引了 my_field 列，但它没有改变任何东西。

以防万一，这是查询计划：

```
"Seq Scan on my_table  (cost=0.00..3468.91 rows=39744 width=459)"
"  Filter: ((my_field)::text <> ''::text)" 
```

我在这里最好的选择是什么？

解释分析：

```
"Seq Scan on my_table  (cost=0.00..3468.91 rows=39730 width=459) (actual time=0.021..13.763 rows=39714 loops=1)"
"  Filter: ((my_field)::text <> ''::text)"
"Total runtime: 14.856 ms" 
```

我添加了这些索引

```
CREATE INDEX aa_idx ON my_table(my_field);
CREATE INDEX aa_idx ON my_table(my_field) WHERE my_field <> ''; 
```

这是 Postgres 9.1

**编辑：[2013-02-26 00:04GMT]**

在“my_field”上创建分区作为检查约束有什么好处吗？

类似于 CHECK(my_field = '') 和分区 2 CHECK(my_field != '')

我猜那么我将拥有一张有很多行的表格？但这是否意味着即使分区包含大约 80% 的数据， select != '' 查询也会执行得更快？

我还研究了全文搜索，但这似乎是一个 OTT。我还研究了将列设为 0 或 1（布尔值）的整数，但这对性能没有影响（我猜是因为 = 1 仍然会带回很多行？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T04:11:15.667

索引不会帮助你。我认为您需要找到一种更好的方法来巩固您的删除。

您说运行需要 39 秒，但您提供的实际查询计划需要 15 毫秒才能运行，这大约是 2000 的因数。我很难想象缓存会有这么大帮助的情况，除非我们谈论的是具有大量 TOASTed 值的非常宽的表。这告诉我，实际问题不在您的选择中，而是在您的管道中的其他地方。这可能包括往返费用，但是您正在执行删除操作。

我的建议是查看报表合并。这意味着避免往返并尽可能多地将逻辑推送到单个查询中。由于您还没有发布完整的上下文，我建议您可能想要研究可写的 CTE，以便在没有往返的情况下一起批量插入、更新和删除。

# applescript - Applescript 检测启用的编辑框

> ID：15057992
> 
> 赞同：0
> 
> 时间：2013-02-24T23:30:36.387
> 
> 标签：applescript

我的脚本从 AppA 获取一些文本并将其粘贴到 AppB 上的文本编辑中。当 AppB 启动（通过脚本）时，文本编辑被禁用，当用户执行操作时变为启用。该操作需要保持手动。

该脚本在用户有时间做任何事情之前执行，这是一个错误。我的想法是检查是否启用了编辑，但这会产生此错误。“无法获取应用程序“系统事件”的<>“AppB”的AppB窗口。它只抛出一次错误。

我怎样才能避免错误？尝试阻止只是吃错误会更好吗？

```
on idle
 tell application "System Events" to set AppAIsOpen to (application process "AppA" exists)
if (AppAIsOpen) then
  set AppAWasOpen to true
  tell application "AppA"
    set hdg to TxRprt
    set beam to hdg as string
  end tell
  if ((count beam) < 3) then set beam to text -3 thru -1 of ("000" & beam)
    if (beam is not previousText) then
      tell application "AppB" to launch
        tell application "System Events"
          tell application process "AppB"
        if text field 1 of window "AppB" is enabled then  -- error here
          set value of text field 1 of window "AppB" to beam  --or here
        end if
      end tell
    end tell
    set previousText to beam
      end if
    return checkInterval
else if (AppAgWasOpen) then
  quit
      return 1
end if 
```

结束空闲

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:33:10.777

通常我会进入一个重复循环并检查文本字段（或任何界面元素）是否可用，然后再尝试对其进行任何操作。这样的事情会起作用，并且应该消除您的错误。

请注意，我还在此过程中添加了时间检查，这样我就不会陷入重复循环。在这种情况下，我最多等待 5 秒以使文本字段可用。

```
tell application "System Events"
    -- wait for the text field to become available
    set startTime to current date
    repeat until exists (text field 1 of window "AppB" of application process "AppB")
        if (current date) - startTime is greater than 5 then
            error "Could not find text field 1 of window AppB of application process AppB"
            exit repeat
        end if
        delay 0.2
    end repeat

    tell application process "AppB"
        if text field 1 of window "AppB" is enabled then -- error here
            set value of text field 1 of window "AppB" to beam --or here
        end if
    end tell
end tell 
```

# android - Listview - 删除项目未正确反映在视图中

> ID：15057998
> 
> 赞同：0
> 
> 时间：2013-02-24T23:31:03.173
> 
> 标签：android, listview, android-arrayadapter

我的 ArrayAdapter 类有问题。问题是该项目在冰箱项目列表中被删除，但它没有反映在 UI 中。在视图中，仅删除最后一项，无论在活动中删除了哪个项目。

Activity.java（重要部分）：

```
m_adapter.remove(m_adapter.getItem(id));
m_adapter.notifyDataSetChanged(); 
```

RefrigeratorItemAdapter.java：

```
public class RefrigeratorItemAdapter extends ArrayAdapter<RefrigeratorItem> {
private List<RefrigeratorItem> refrigeratorItemList;

public RefrigeratorItemAdapter(Context context, int textViewResourceId,
        List<RefrigeratorItem> list) {
    super(context, textViewResourceId, list);
    this.refrigeratorItemList = list;

}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;

    if (v == null) {
        LayoutInflater vi = (LayoutInflater) getContext().getSystemService(
                Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.simple_list_item_1, null);

        RefrigeratorItem i = (RefrigeratorItem) getItem(position);

        System.out.println(i.toString());
        if (i != null) {
            TextView tt = (TextView) v.findViewById(R.id.text1);
            tt.setText(i.getProductname());
        }
    }
    return v;

}

public void remove(RefrigeratorItem object) {
    super.remove(object);
    this.refrigeratorItemList.remove(object);
    System.out.println(Arrays.toString(refrigeratorItemList.toArray()));
}

 } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:37:09.030

您以错误的方式重用视图。试试这样：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;

    if (v == null) {
        LayoutInflater vi = (LayoutInflater) getContext().getSystemService(
                Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.simple_list_item_1, null);
    }

    RefrigeratorItem i = (RefrigeratorItem) getItem(position);

    System.out.println(i.toString());
    if (i != null) {
        TextView tt = (TextView) v.findViewById(R.id.text1);
        tt.setText(i.getProductname());
    }
    return v;
} 
```

当 v 不为 null 时，表示该视图已经显示，您现在可以将其重用于新项目。但是，您确实需要更新视图的内容。

例如，如果屏幕上有 5 个列表项：

```
1  
2  
3  
4  
5 
```

现在滚动，结果如下：

```
2  
3  
4  
5  
6 
```

包含“1”的视图现在用于显示“6”。但是，在您的代码中，您不会将 textview 中的内容从 1 更新到 6。