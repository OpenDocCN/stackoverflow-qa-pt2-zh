# StackOverflow 问答 13902000-13902999

# objective-c - 适用于多个屏幕的 Mac 应用程序？

> ID：13902003
> 
> 赞同：1
> 
> 时间：2012-12-16T13:59:35.057
> 
> 标签：objective-c, macos, media-player, quicktime

如果网上有关于此的帖子或其他内容，我很抱歉，但我的 googlefu 今天没有帮助我。我正计划为我的学校为我们的公告计划构建一个 mac 应用程序。基本上，如果我们有视频公告，我们会在 iTunes 中播放它们并镜像显示。我要构建的是一个媒体播放器，您可以在主屏幕上选择视频，然后在辅助显示器上全屏输出视频。有这样的软件，但很多软件的价格在 500 美元或以上，并且提供的功能比需要的要多得多。

我的问题是如何让我的程序在没有任何工具栏的情况下在辅助全屏上显示视频。它可能就在我面前。如果你们有任何关于这方面的资源，请告诉我。这将是我第一次使用 mac 应用程序。我主要是一个iOS人。如果有任何关于为 2 个屏幕制作应用程序的教程，请告诉我。我对媒体播放器很好，这并不难，我只是不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T20:35:24.600

```
 //display window without any of the usual dressing
 [window setStyleMask:NSBorderlessWindowMask]; 

      //set 'z-index' of window to display on top of menubar
 [window setLevel:NSMainMenuWindowLevel+1];

      //set the window rect to the screen rect
 NSRect mainDisplayRect = [[NSScreen mainScreen] frame];
 [window setFrame:mainDisplayRect display:YES]; 
```

不仅如此，它还可以帮助您了解您要去的地方。这种方法避开了 OSX10.7+ 全屏的优点 - 正如您可能已经解决的那样，在这些新的全屏模式下使用双显示器并不容易。使用上述方法，您可以从一个屏幕（保留菜单栏、其他窗口、对操作系统的完全访问权限）控制应用程序，同时在第二台显示器上全屏播放其中一个窗口。

顺便说一句，新版本的 iTunes 带回了一些双显示器功能。有一种设置方法，您可以在一个显示器上播放全屏视频，同时在第二个屏幕上进行一定程度的控制（使用迷你播放器）。

# php - ZendDebugger 启动错误：扩展“Zend Debugger”无法加载两次

> ID：13902008
> 
> 赞同：0
> 
> 时间：2012-12-16T13:59:41.463
> 
> 标签：php, zend-framework, eclipse-pdt

每次我运行 PHP CLI 并需要一些帮助来修复它时都会抛出这个错误。这发生在本机 PHP CLI 或当我使用 Eclipse PDT 运行 CLI 时。

除了作为刺激物外，该信息似乎对操作没有影响。

我正在使用 Zend Server ZSCE 5.6.0 及其 WAMP。这是在 Windows 7 Ultimate 64 位上。我也在使用 Eclipse PDT 编辑器 3.0.2。

我的搜索没有找到解决办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:44:19.273

我建议你检查一下你是否真的在 php.ini 中加载了两次 zend 调试器，如果你还没有这样做的话。:) （检查哪个 php.ini 文件与“php -i”一起使用）

# wcf - 使用回调 Uri 在 Windows 商店应用程序上获取 ACS 令牌

> ID：13902014
> 
> 赞同：1
> 
> 时间：2012-12-16T14:00:08.683
> 
> 标签：wcf, windows-store-apps, acs

我一直在按照以下步骤使 Windows 8 Store 应用程序获取 ACS 令牌，如下所述： [WebAuthenticationBroker 是否在 Windows 8 Metro App post Release Candidate 中工作](https://stackoverflow.com/questions/12485665/does-the-webauthenticationbroker-work-in-windows-8-metro-app-post-release-candid)

但是，我的 WebAuthenticationResult 对象的 ResponseData 属性仅包含 ACS 中指定的回调 uri，并且不包含令牌信息。在我的代码下面。

**Windows 8客户端的认证方式**

```
private async void Authenticate()
    {
        WebAuthenticationResult webAuthenticationResult = await WebAuthenticationBroker.AuthenticateAsync(
            WebAuthenticationOptions.None,
            new Uri("https://myACSnamespace.accesscontrol.windows.net:443/v2/wsfederation?wa=wsignin1.0&wtrealm=http://localhost:12714/"),
            new Uri("http://mypublicIPaddress:80/WebAppMVCAPI/api/federation/end")); 
```

我的*信赖方应用程序*返回 URL 设置为`http://mypublicIPaddress:80/WebAppMVCAPI/api/federation/en`

我在 Web 应用程序上的控制器编程如下：

```
public class FederationController : ApiController
{
    protected virtual string ExtractBootstrapToken()
    {
        return "Hello World";
        //return HttpContext.Current.User.BootstrapToken();
    }

    [HttpGet]
    public string Get()
    {
        return "Hello Get World";
    }

    [HttpPost]
    public HttpResponseMessage Post()
    {
        var response = this.Request.CreateResponse(HttpStatusCode.Redirect);
        response.Headers.Add("Location", "/WebAppMVCAPI/api/federation/end?acsToken=" + ExtractBootstrapToken());
        return response;
    }
} 
```

}

您可以想象，Web 应用程序在我的 IIS 服务器上运行并侦听端口 80。我的路由器配置为根据需要转发传入的请求，当我在 Visual Studio 中启动我的 Web 应用程序时，我可以从 Internet 访问该应用程序主持人。

这个想法是让 Windows 8 商店应用程序通过 Facebook 登录从 ACS 获取令牌。当我启动 win8 客户端时，应用程序显示一个 Facebook 登录页面。我使用我的凭据成功登录。但是，当我查看 webauthenticationresult.responsedata 属性时，我只看到回调 uri。此外，我没有在我的防火墙中看到任何 ACS 尝试将某些内容发布到我的回调 uri 的日志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:55:04.383

Your replying party application return URL should be

```
http://mypublicIPaddress:80/WebAppMVCAPI/api/federation 
```

not

```
http://mypublicIPaddress:80/WebAppMVCAPI/api/federation/end 
```

# jquery - 无法检索值多选小部件

> ID：13902017
> 
> 赞同：0
> 
> 时间：2012-12-16T14:00:24.510
> 
> 标签：jquery

我正在使用[jQuery UI MultiSelect Widget](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)进行多项选择，我想检索这些值以供以后的 php 搜索。

[你可以在这里找到 Jsfiddle](http://jsfiddle.net/Cuzr6/)

```
$("#music").multiselect();

$("#SearchButton").click(function() {
            var MusicStyles = $("music").val();
            alert("Styles Selected "+ MusicStyles);
        }); 
```

当我点击搜索时，我得到“未定义”。

感谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T14:04:47.083

**点击**事件中缺少“#” 。利用

```
 var MusicStyles = $("#music").val(); 
```

# android - 将数据从 json 加载到列表视图

> ID：13902025
> 
> 赞同：0
> 
> 时间：2012-12-16T14:01:16.983
> 
> 标签：android, json, listview

我有一个将数据从 json 加载到 android 的应用程序，如下所示

```
public class MainActivity extends Activity {
    private final String URL_SERVICE = "http://92.253.101.239:81/sudandoctors/api.aspx?op=5&GovernorateId=&SpecializationId=&DoctorName=&LastDoctorId=0";
    private final String URL_IMAGE_BASE = "http://92.253.101.239:81/sudandoctors/UploadedFiles/"; 
    TextView tv;
    DoctorInfo doctorObj = new DoctorInfo(); 
    ArrayList<DoctorInfo> doctorsInfoList = new ArrayList<DoctorInfo>();

    ListView lv = (ListView)findViewById(R.id.mylist);
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        AsyncHttpClient client = new AsyncHttpClient();

        client.get(URL_SERVICE, new AsyncHttpResponseHandler() {
            @Override
            public void onStart() {
                super.onStart();
                // show loading bar
                Log.d("onStart", "onStart");
            }

            @Override
            public void onSuccess(String response) {
                super.onSuccess(response);
                Log.d("onSuccess", "onSuccess");
                DoctorsModel doctorModel = new DoctorsModel();
                ArrayList<DoctorInfo> doctorsInfoList = new ArrayList<DoctorInfo>();

                try {
                    // convert response to JSON
                    JSONObject json = new JSONObject(response);

                    // get JSON Items
                    doctorModel.setDoctorCnt(json.getInt("DoctorsCount"));
                    doctorModel.setOp(json.getString("op"));

                    JSONArray doctorsArray = json.getJSONArray("Doctors");
                    Log.d("dr arrat", doctorsArray.toString());
                    for (int i = 0; i < doctorsArray.length(); i++) {
                        JSONObject doctorJSON = doctorsArray.getJSONObject(i);

                        doctorObj .setId(doctorJSON.getString("Id"));
                        Log.d("id", doctorJSON.getString("Id"));
                        doctorObj.setName(doctorJSON.getString("DoctorName"));
                        doctorObj.setGovernorateId(doctorJSON.getString("GovernorateId"));
                        doctorObj.setGovernorateName(doctorJSON.getString("GovernorateName"));
                        doctorObj.setSpecializationName(doctorJSON.getString("SpecializationName"));
                        doctorObj.setHospitalId(doctorJSON.getString("HospitalId"));
                        doctorObj.setHospitalName(doctorJSON.getString("HospitalName"));
                        doctorObj.setImageName(URL_IMAGE_BASE + doctorJSON.getString("ImageName"));
                        doctorObj.setMobile(doctorJSON.getString("Mobile"));
                        doctorObj.setSpecializationId(doctorJSON.getString("SpecializationId"));
                        doctorObj.setWeekendDays(doctorJSON.getString("WeekendDays"));
                        doctorObj.setWorkingDays(doctorJSON.getString("WorkingDays"));
                        doctorObj.setWorkingTime(doctorJSON.getString("WorkingTime"));

                        doctorsInfoList.add(doctorObj);
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }

            @Override
            public void onFailure(Throwable e, String message) {
                super.onFailure(e, message);
                // show error message
            }

            @Override
            public void onFinish() {
                super.onFinish();
                // remove loading bar
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                  android.R.layout.activity_list_item);

                // Assign adapter to ListView
                lv.setAdapter(adapter); 
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

我想在列表视图中显示数据，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:04:58.537

使用适配器 - [http://developer.android.com/reference/android/widget/Adapter.html](http://developer.android.com/reference/android/widget/Adapter.html)

使用您的数据创建一个适配器，然后将该适配器设置为 ListView 的适配器。

# wpf - Theme ResourceDictionary 中的 EventSetters

> ID：13902026
> 
> 赞同：15
> 
> 时间：2012-12-16T14:01:26.837
> 
> 标签：wpf, styles, resourcedictionary, eventsetter

[MSDN 在事件设置器上说：](http://msdn.microsoft.com/en-us/library/system.windows.eventsetter.aspx)

> 事件设置器不能用于主题资源字典中包含的样式。这是因为主题资源字典在运行时通常是松散的二进制 XAML (BAML) 文件，并且没有定义任何范围，其中定义处理程序的随附代码隐藏可以存在。

[对此 SO question 的第一个答案](https://stackoverflow.com/questions/13562498/wpf-treeview-style-eventsetter-dont-work)证实了这一点，其中指出：

> 资源 xaml 不能有代码隐藏文件，它们通常称为“松散 xaml”。您可以在有关 EventSetter 的 msdn 中阅读相关内容。

但是，我还不了解事件设置器的限制。我尝试使用资源字典的代码隐藏文件。我已经为包含在模板中的控件的事件分配了一个事件处理程序，该模板在所述资源字典的样式中定义 - 它起作用了。

另一方面，将事件设置器添加到同一资源字典中的样式会导致异常。

我遇到了一个特殊的情况，它碰巧起作用了吗？

或者在模板中设置事件处理程序总是有效，但如果是这样，那么为什么我不能在同一资源字典中的样式中使用事件设置器？

我的问题归结为：

**MSDN 声明主题资源字典*通常*是松散的二进制 XAML 究竟是什么意思——在什么情况下多久一次？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T00:11:07.627

这意味着它是自行编译的，而不是在名称空间后面或名称空间内的代码。

或者换句话说，松散的 xaml 文件没有代码部分，它可以从数据库中作为文本读取，或者作为文本动态生成并在没有任何编码关联的情况下加载。

至于天气，这是否是正当理由。这取决于每个开发人员，但这就是松散的 xaml 的含义。

编辑：

在回应您的评论时，我想他们专门指的是资源和样式，因为它们是最常见的“松散文件”，而且通常大多数人不会用代码文件来支持它们。我个人认为这是一种应对。他们本可以轻松添加 Loose=True 属性并解决此问题。

实际上，问题不在于松散文件的数量或使用它们的频率，而与制定规则以补偿缺失功能的事实有关。如果他们只是说你不能做 x,y,z 会容易得多，因为我们还没有建立对它的支持，而不是说这是因为一些任意数量的松散 xaml 文件。

# mysql - 用于图像搜索的 Mysql 查询

> ID：13902028
> 
> 赞同：0
> 
> 时间：2012-12-16T14:01:47.297
> 
> 标签：mysql

我正在 php mysql 中为图片库网站创建一个网站，其中将有数千张图片。我的表结构在此链接的图片 [中](http://indiasfreedomstruggle.website.org/imgs/question.jpg)

现在我想要的是当用户搜索“粉红色”这个词时，它应该显示图像表中的两个图像。但是，如果用户搜索“粉红色的花”，它应该只显示第一张图片。这只是一个例子。用户甚至可以搜索“美丽的粉红色花朵”......我只需要 mysql 查询即可。我希望我的问题足够清楚。提前感谢您提供任何帮助和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:27:04.353

你可以做这样的事情，在运行`explode( ' ', $serachTags )`或获取每个标签之后。

```
SELECT
   images.img_name,
   images.img_url
FROM
   images,
   connections,
   tags AS tagA,
   tags AS tagB,
   tags AS tagC,
   ...
WHERE
   images.img_id = connections.img_id AND
   tagA.tag_id = connections.tag_id AND
   tagA.tag_name = 'name1' AND
   tagB.tag_id = connections.tag_id AND
   tagB.tag_name = 'name2' AND
   tagC.tag_id = connections.tag_id AND
   tagC.tag_name = 'name3' AND
   ... 
```

IE。对于花和粉红色，你可以这样做：

```
SELECT
   images.img_name,
   images.img_url
FROM
   images,
   connections,
   tags AS tagA,
   tags AS tagB
WHERE
   images.img_id = connections.img_id AND
   tagA.tag_id = connections.tag_id AND
   tagA.tag_name = 'flower' AND
   tagB.tag_id = connections.tag_id AND
   tagB.tag_name = 'pink' 
```

# c# - Jquery 插件 Dropkick 与 asp.net 中的下拉列表

> ID：13902029
> 
> 赞同：1
> 
> 时间：2012-12-16T14:01:47.577
> 
> 标签：c#, jquery, asp.net, jquery-ui, jquery-selectors

我正在使用很棒的 Dropkick 插件在 asp.net 中设置我的下拉列表的样式，我已经导入了所有 .js 和 .css（不是 'jquery.validate.min.js'，我想这与我的问题无关） ... Dropkick 插件已实现，但下拉列表中的选项不可滚动，它们显示为项目符号...我无法弄清楚代码可能有什么问题...这是我的代码：

```
Code : 
```

CSS -DropKick.css

JS-Jquery_1_8_3.js

JS-Dropkick.js

$(document).ready(function(){ $('.default').dropkick();

样式表，插件一切正常，但选项未正确呈现，它们作为项目符号可见并且无法滚动......

..另外有没有办法在激活 Dropkick 插件后禁用下拉菜单？

请帮忙！！

# javascript - Ember - 如何在控制器方法之后调用视图方法

> ID：13902031
> 
> 赞同：1
> 
> 时间：2012-12-16T14:01:51.923
> 
> 标签：javascript, model-view-controller, ember.js

主要思想：在我的控制器成功更新模型的属性后，我想调用一个关闭子视图的视图方法。

模板：

```
<a {{action showUpdate href=true target="view"}}>update</a>

   {{#if view.isUpdate}}   
        {{#view App.UpdateView}}   
            ...here is a form
            <button {{action update}}>Send</button>
        {{/view}}   
    {{/if}} 
```

看法：

```
App.MainView = Ember.View.extend({
  templateName: 'update',
    isUpdate: false,
    showUpdate: function() {
        this.set('isUpdate', !this.get('isUpdate'));
    }
});

App.UpdateView= Ember.View.extend(); 
```

控制器：

```
App.MainController = Ember.Controller.extend({
   updateCon: function() {
               do something
   },
       ... 
```

路由器：

```
 update: function(router, evt) {
    router.get('mainController').updateCon();
    //router.get('mainController.view').showUpdate(); <-- doesnt work
 } 
```

因此，在我的控制器运行良好后，我尝试在路由器中调用它，但它不起作用。

```
Cannot call method 'showUpdate' of null 
```

这是正确的方法吗？如果是：我错过了什么？否：当我的控制器做某事时如何变形我的视图？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T00:54:42.913

控制流逻辑更适合控制器。让视图保持无状态通常是一个好主意，并且控制器不应该知道视图。您可以将更新标志和功能移动到您的控制器，并在您的 Handlebars 模板中定位控制器。视图的 Handlebars 模板类似于：

```
<a href="#" {{action showUpdate target="controller"}}>update</a>
{{#if isUpdated}}
    ...
{{/if}} 
```

然后控制器将具有更新逻辑：

```
App.MainController = Em.Controller.extend({
    isUpdated: false,
    showUpdate: function() {
        this.set('isUpdated', !this.get('isUpdated'));
    }
}); 
```

该视图现在只是模板名称：

```
App.MainView = Em.View.extend({
    templateName: 'update'
}); 
```

# android - 考虑缩放因子，如何计算 ScrollView 中 ImageView 的触摸位置？

> ID：13902032
> 
> 赞同：2
> 
> 时间：2012-12-16T14:01:54.377
> 
> 标签：android, android-imageview, android-scrollview

我有一张应该在某些区域可以点击的图像，比如该图像中的 26 个区域。最好的方法是什么？

![在此处输入图像描述](../Images/ed43060493374fdc9446e030782b5235.png)

我制作了一个大小相同的图像，图像中的每个可点击区域都有特定的颜色，背景为白色，所以当点击图像时，我可以获得该位置第二张图像的像素颜色，并知道点击了哪个区域。

问题是，我需要显示图片`ScrollView`，并调整图像大小以适应屏幕宽度。我知道我可以使用 计算单击的偏移量`event.getRawY() + sv.getScrollY();`，但是如何计算缩放因子？

实际上，由于两个图像的大小相同，我需要考虑缩放因子来计算单击位置，以在第二个图像中找到该像素的精确位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T08:57:03.323

我认为这对你有帮助。

```
 @Override
public boolean onTouch(View v, MotionEvent event) {
    if (v.getId() == R.id.imageView1 || v.getId() == R.id.image_scrollview) {

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            startX = (int) event.getX();
            startY = (int) event.getY();
            break;
        case MotionEvent.ACTION_UP:
            int cordinate_Y = (int) ((event.getY() + v.getScrollY()) / diffH);
            int cordinate_X = (int) ((event.getX() + v.getScrollX()) / diffW);
            if ((Math.abs((int) event.getX() - startX) > 10)
                    || (Math.abs((int) event.getY() - startY) > 10)) {
                break;
            }

            int pixelColor = bitmap.getPixel(cordinate_X, cordinate_Y);
            if (pixelColor != -1) {
                showDetails(texts[map.get(pixelColor)],
                        images[map.get(pixelColor)],
                        titles[map.get(pixelColor)]);

            }

            break;

        }
    }

    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:36:47.767

在您的情况下，它可能更容易使用`WebView`。您可以使用`<map>`and`<area>`来创建可点击区域并将回调发送到您的应用程序使用`JavaScript`

# svn - 从 VSS (Visual SourceSafe) 迁移到什么？

> ID：13902033
> 
> 赞同：1
> 
> 时间：2012-12-16T14:01:59.493
> 
> 标签：svn, version-control, visual-sourcesafe, plasticscm, version-control-migration

我正在寻找能够成功替代 Microsoft Visual SourceSafe 的版本控制软件。我花了很多时间研究这个主题，但最终没有找到合适的解决方案。为什么？因为 VSS 的共享文件似乎是一个独特的功能。

具体来说，共享文件是指映射到多个位置的单个文件。例如，当您想在不同项目中使用一个源代码文件时，只需将其拖放到您需要的任何项目目录中即可。然后有一个文件链接到几个目录。当 sombody 在这些项目中的任何一个中修改该文件时，所有其他人都会将其更新为其主要版本。

SVN 中的一个等效功能是 svn:externals，它可以通过两种方式共享文件：使用它们的头版本或使用明确选择的版本。但是，无论我选择哪一个，结果都与 VSS 不同。因此，当我将外部文件附加到项目的头部修订中时，它几乎就像在 VSS 中一样。但是，当我想获得项目的历史修订时，我总是获得外部文件的主要修订，而不是适当的历史修订。它看起来像一个错误，但也许 SVN 以这种方式工作是有原因的。第二个选项是在选定的修订中使用外部文件。但是当有人在任何地方修改它们时，必须在每个项目中手动更新这些文件。我们真的不想手动执行此操作。

塑料单片机是我检查的第二种解决方案。恕我直言，这个系统太棒了！直观而清晰的 GUI 和精彩的修订图，让您非常轻松地处理分支和合并。与 VSS 相比，这确实引起了我的注意。但是，让我们进入主题。Plastic 支持 Xlinks（符号链接），但只能使用它们链接目录，而不是文件。更重要的是，没有共享头部修订的选项（您必须明确选择特定的）。

让我问你那该怎么办。选择什么软件可以让我们的工作更有效率，同时又不会失去共享功能？为什么这么不受欢迎？在项目之间共享代码是否有不同的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:22:52.920

恕我直言，每个文件到共享位置的链接令人困惑，我认为这解释了为什么大多数 SCM 选择采用允许在目录级别共享的范例（如果有的话）。除了您带来的 PlasticSCM 示例之外，我还拥有`git`将这种功能作为[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)提供的经验，再次要求您将共享文件放在单独的目录中，并强制共享部分（子模块）之间的层次关系不那么混乱以及使用它的项目。

不幸的是，您似乎爱上了一个很少需要或使用的功能。可能是您的需求如此独特。但是你应该仔细考虑你的需求是否确实是独一无二的，并且也许为了更主流的开发约定（在这种情况下，将共享文件放在单独的目录中）放弃它，这将允许你使用 state-最先进的工具。

# php - 登录授权，如何检查密码是否匹配 SALT + HASH - PHP + MySQL

> ID：13902035
> 
> 赞同：3
> 
> 时间：2012-12-16T14:02:15.967
> 
> 标签：php, mysql, hash, login, salt

我目前正在做一个学校项目，最近在完成登录授权方面没有任何进展。我正在使用 HASH 和 SALT 来注册新用户。我找不到任何能让我降神的资源，所以我决定在这里注册一个帐户来问我自己的问题。

这是我的注册脚本：

```
 $username = $_POST['username'];
    $email = $_POST['email'];
    $first = $_POST['fname'];
    $last = $_POST['lname'];
    $salt = crypt("sha512", false);
    $pass = $_POST['password'];
    $password = hash("sha512", $salt . $pass . $salt, false);

$sql = "INSERT INTO `users` (`username`, `email`, `fname`, `lname`, `salt`, `password`) VALUES ('$username', '$email', '$first', '$last', '$salt', '$password')"; 
```

然后我有一个 checklogin.php 脚本，它是我的索引页面上的 action="checklogin.php"，它是登录页面。这是完整的脚本： http: [//pastebin.com/tKrsHaFU](http://pastebin.com/tKrsHaFU)（粘贴箱）

我的问题是如何验证进入 index.php 页面（登录表单）的用户以及已经在数据库中的用户，记住我在密码上有盐和哈希。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T14:39:15.197

首先：

```
$salt = crypt("sha512", false); 
```

这会产生静态盐，即没有变化。要生成更好的：

```
$salt = uniqid(mt_rand(), true); // the paranoid use openssl_random_pseudo_bytes() 
```

为了验证记录，您的 SQL 变为：

```
$sql="SELECT * FROM $tbl_name WHERE username='$myusername'";
$result=mysql_query($sql);
// ...
if ($count==1) {
    $row = mysql_fetch_assoc($result);
    if (hash('sha512', $row['salt'] . $_POST['mypassword'] . $row['salt']) == $row['password']) {
        // validation passed, rejoice!
    }
} 
```

但是，您应该看这里：[如何在 PHP 中使用 bcrypt 对密码进行哈希处理？](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:25:30.450

你不必担心这么多！

现在，任何登录脚本背后以及存储用户信息的数据库背后的基本思想是，我们需要至少 1 个值作为主键，这将唯一地标识每个用户。现在在您的情况下，它`username`似乎是主键。

所以你需要做的就是简单地执行一个`$data = mysql_query("SELECT * FROM table_name") or die(mysql_error());`

这`table_name`将是存储所有用户信息的表的名称。现在 a`$info = mysql_fetch_array( $data );`会将所有用户信息放入一个数组中。

一个简单的`var_dump($info)`方法会列出所有用户名以及用户的其他详细信息（仅用于测试目的......你不想在用户注册时向他们显示 dis 信息：P）

只需遍历此数组并将 new_user 提供的用户名与数组中已存在的用户名匹配即可。如果匹配，那么您可以通过说 来阻止他`User already exists !!`。否则欢迎他访问您的网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T14:31:35.827

请看看你是否可以阅读这篇文章。它显示了一般的设计模式。 [http://www.experts-exchange.com/Web_Development/Web_Languages-Standards/PHP/A_2391-PHP-login-logout-and-easy-access-control.html](http://www.experts-exchange.com/Web_Development/Web_Languages-Standards/PHP/A_2391-PHP-login-logout-and-easy-access-control.html)

如果你能完成这么多工作，下一步就是隐藏数据库中的密码。您可以使用 php *md5()*对密码进行单向编码。当客户端注册并存储编码密码时，将*md5()*应用于密码。将*md5()*应用于客户端在登录表单中输入的明文密码。在 SELECT 查询中使用编码密码。您可以将盐字符串连接到 md5() 函数调用中。只要确保每次都使用相同的盐。

[http://php.net/manual/en/function.md5.php](http://php.net/manual/en/function.md5.php)

最好的问候，~雷

# php - 按浏览器类型定义内容

> ID：13902041
> 
> 赞同：1
> 
> 时间：2012-12-16T14:02:59.147
> 
> 标签：php, browser, stylesheet, if-statement

我有一个页面。但我发现我的位置：相对；Chrome 的修改在 Firefox 上看起来不太好，在 IE 上看起来是有史以来最丑陋的页面。我想到了为每个浏览器创建特殊的样式表（这比看起来容易）。但问题是，到目前为止，我正忙于寻找有效的 PHP 脚本。

线索是

```
<?php
if ($browser == "ie"){
    echo "Page for IE";
}
elseif ($browser == "chrome"){
    echo "Page for Chrome";
}
elseif ($browser == "firefox"){
    echo "Page for Firefox";
}
elseif ($browser == "safari"){
    echo "Page for Safari";
}
elseif ($browser == "opera"){
    echo "Page for Opera";
}
else {
    echo "Oops, our page does not support your browser. Please install one of supported";
}?> 
```

问题是，我怎样才能使用 $browser？到目前为止，我发现此代码已尝试。
回声 $_SERVER['HTTP_USER_AGENT'];

但结果我得到了每个已知的浏览器作为输出（至少在 Chrome 中）。

可以请任何人帮助我吗？我根本不能使用 JS 或 jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:58:51.420

您应该使用 browsecap.ini 和 get_browser 函数。这会给你你正在寻找的东西。 [http://php.net/manual/en/function.get-browser.php](http://php.net/manual/en/function.get-browser.php)

# php - 为什么 document.write + echo 不起作用？

> ID：13902042
> 
> 赞同：2
> 
> 时间：2012-12-16T14:03:03.983
> 
> 标签：php, javascript, document.write

> **可能重复：**
> [如何将 javascript 变量放入 php echo](https://stackoverflow.com/questions/10853630/how-to-put-javascript-variable-in-php-echo)

我对 PHP 有疑问。我想在 JavaScript 中使用 PHP 变量。但是，它不起作用！`$doccontent`只显示一次！这是`Test.php`（页面参数给出，例如`Test.html`）：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Test</title>
        <?php
        $page = $_GET["page"];
        $doc = new DOMDocument();
        $doc->loadHTMLFile($page);
        $doc->formatOutput = true;
        $contentnode = $doc->getElementById('content');
        $doccontent = new DOMDocument();
        $doccontent->appendChild($doccontent->importNode($contentnode, true));
        $doccontent = $doccontent->saveHTML();
        ?>
    </head>
    <body>
        <?php
            echo $doccontent;
        ?>
        <script type="text/javascript">
            document.write("<?php echo $doccontent;?>");
        </script>
    </body>
</html> 
```

这是`Test.html`：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Hey</title>
        <link rel="stylesheet" type="text/css" href="Edit.css">
    </head>
    <body>
        <button id="admin"><a href="Edit.php?page=Edit.html">Edit</a></button>
        <h1>Automatica</h1>
        <div id="content">
            <h2>Header 1.1</h2>
            <p>Test</p>
            <h3>Header 1.1.1</h3>
            <p>Test</p>
            <h3>Header 1.1.2</h3>
            <p>Test</p>
            <p>Test</p>
            <h4>Header 2.0.0.1</h4>
            <p>Test</p>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T14:06:01.393

`$doccontent`几乎可以肯定同时包含`"`字符和换行符，其中任何一个都会破坏由字符分隔的 JS 字符串文字`"`。

PHP`json_encode`函数将给定一个字符串作为输入，输出一个 JS 字符串文字。您可以使用它而不是回显原始数据。（记住不要`"`在生成的字符串文字周围添加额外的字符）。

# java - java协方差/逆变

> ID：13902043
> 
> 赞同：1
> 
> 时间：2012-12-16T14:03:08.543
> 
> 标签：java, inheritance, covariance, contravariance

假设我有：

```
class Event {}
class DoorBell extends Event {}
class PhoneCall extends Event {}
class EventGenerator {
    static Event getEvent() {
         if (today.isSunday())
            return new DoorBell()
         else 
            return new PhoneCall();
    }
}
class EventHandler {    
    void HandleEvent(DoorBell doorBell) { answer door; }
    void HandleEvent(PhoneCall phoneCall) { answer phone; }
    void consumeEvent() {
         Event e = EventGenerator.getEvent();
         HandleEvent(e);
    }
} 
```

由于 HandleEvent(Event) 未定义，HandleEvent(e) 无法编译。有解决方案吗？还是我必须问一下它是什么类型的事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T14:04:55.960

通常的习惯用法是传递一个事件并让多态性为您处理这一切。

`EventHandler`如果没有任何行为，我认为您的班级没有任何价值。所提出的您的设计没有提供多态性的好处。这就是你必须检查类型的原因。最好有这样的东西：

```
public interface EventHandler {
    void handle(Event event);
} 
```

[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)（又名“双重调度”）可能是处理这种情况的好方法。

或者您可以尝试泛型：

```
public class EventHandler {
   public <T> void consumeEvent(T event) {
       // handler code here, dependent on T
   }
} 
```

我不知道 JDK 7 是否有新的东西可以帮助你。对不起; 我仍然坚持使用 JDK 6。

# r - r中的“比例”或“标尺”类型图

> ID：13902046
> 
> 赞同：12
> 
> 时间：2012-12-16T14:03:35.657
> 
> 标签：r, plot, ggplot2, scale

我正在尝试在条形图中添加刻度以创建条形图（水平或垂直）以提供像比例尺一样的视图。 ![在此处输入图像描述](../Images/0094ca03c8b6247ecdb9814658010262.png)

只是一个小例子：

```
myd <- data.frame (names = c("A", "B", "C", "D"), height = c(2.1, 3.5, 3.5,1.5))
require(ggplot2)
c <- ggplot(myd, aes(factor(names), height, fill = names))
c + geom_bar()
c + geom_bar() + coord_flip() 
```

有没有一种简单的方法或包可以实现这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-16T16:29:20.820

`ggplot2`使用库的相当长的解决方案。

首先修改您的数据框 - 重复每个元素`names`并`height`根据 0.2 的时间出现在条的高度。

```
myd <- data.frame (names = c(rep("A",floor(2.1/0.2)), rep("B",floor(3.5/0.2)), rep("C",floor(3.5/0.2)), rep("D",floor(1.5/0.2))),
                   height = c(rep(2.1,floor(2.1/0.2)), rep(3.5,floor(3.5/0.2)), rep(3.5,floor(3.5/0.2)), rep(1.5,floor(1.5/0.2)))) 
```

`ystart`是小刻度的`yend`y 坐标，按每根柱线 0.2 的顺序计算。`xstart`是小刻度的 x 坐标。在这里，我假设条的宽度为 0.5。如果宽度更小或更大，则应更改坐标。`xend`计算假设刻度为 0.1 宽。

```
ystart<-c(seq(0.2,2.1,0.2),seq(0.2,3.5,0.2),seq(0.2,3.5,0.2),seq(0.2,1.5,0.2))
yend=ystart
xstart<-c(rep(0.75,floor(2.1/0.2)),rep(1.75,floor(3.5/0.2)),rep(2.75,floor(3.5/0.2)),rep(3.75,floor(1.5/0.2)))
xend<-xstart+0.1 
```

添加到数据框中的新值。

```
myd <-data.frame(myd,ystart,yend,xstart,xend)

  p <- ggplot(myd, aes(factor(names), height,fill = names))
  p <- p + geom_bar(width=0.5)  

  #This line adds small ticks (segments) to bars
  p <- p + geom_segment(aes(x=xstart,y=ystart,xend=xend,yend=yend))

  #This line adds white lines at 1, 2 and 3
  p <- p + geom_hline(yintercept=c(1,2,3),color="white",lwd=1.1)

  #Next two lines removes legend and makes place for text
  p <- p + guides(fill=FALSE)
  p <- p + ylim(c(0,4))

  #Add numbers over bars
  p <- p + annotate("text",x=c(1,2,3,4),y=c(2.4,3.8,3.8,1.8),label=c("2.1","3.5","3.5","1.5"),angle=90,fontface="bold",size=5)

  #Adjustment of appearance to remove guidlines and axis ticks
  p <- p + theme_bw()
  p <- p + theme(axis.title=element_blank(),
          axis.text.y=element_blank(),
          axis.text.x=element_text(angle=90,face="bold",size=rel(1.5)),
          axis.ticks=element_blank(),
          panel.border=element_blank(),
          panel.grid=element_blank())
  print(p) 
```

![在此处输入图像描述](../Images/48def9d02a7eaa125e9fa9d688655193.png)

## 编辑 - 添加解决方案作为功能。

制作函数`ruler.func()`- 唯一需要的参数是条形高度的向量。函数的第一部分生成数据框，然后第二部分生成绘图。

```
ruler.func<-function(gg){
seq.list<-list()
for(i in 1:length(gg)){  
  ystart<-seq(0.2,gg[i],0.2)
  yend<-ystart
  xstart<-rep(i-0.25,length(ystart))
  xend<-xstart+0.1
  nam.val<-c(LETTERS[i],rep(NA,length(ystart)-1))
  numb.val<-c(gg[i],rep(NA,length(ystart)-1))
  seq.list[[i]]<-data.frame(nam.val,numb.val,xstart,xend,ystart,yend)
}
df<-as.data.frame(do.call(rbind, seq.list))
p <- ggplot(df, aes(nam.val))
p <- p + geom_bar(aes(y=numb.val,fill=nam.val),stat="identity",width=0.5,color="black",lwd=1.1)+
    scale_x_discrete(limits=LETTERS[1:length(gg)])+
    geom_segment(aes(x=xstart,y=ystart,xend=xend,yend=yend))+
    geom_hline(yintercept=seq(1,max(gg),1),color="white",lwd=1.1)+
    guides(fill=FALSE)+
    ylim(c(0,max(gg)+0.5))+
    annotate("text",x=seq(1,length(gg),1),y=gg+0.5,label=gg,angle=90,fontface="bold",size=rel(6))+
    theme_bw()+
    theme(axis.title=element_blank(),
               axis.text.y=element_blank(),
               axis.text.x=element_text(angle=90,face="bold",size=rel(1.5)),
               axis.ticks=element_blank(),
               panel.border=element_blank(),
               panel.grid=element_blank())
print(p)
} 
```

数字 1.2、4.6 和 2.8 的示例。

```
ruler.func(c(1.2,4.6,2.8)) 
```

![在此处输入图像描述](../Images/7569ed3a134298ee003b43dd499fb1b9.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T03:12:20.800

我的方法是使用 grid 包自定义网格 grobs。它是情节的后期 ggplot2 处理。我使用 Grid Low-level 函数通过向 ggplot2 绘图添加一些新绘图来进行自定义。这里有很大的优势，无需添加数据。您可以将代码用作它。

我认为 ggplot2 + 网格处理的混合是自定义绘图的强大工具。

```
#get the viewport (here we do the stuff)
library(grid)
library(plyr)
## 
grid.edit('geom_rect',gp=gpar(col='black'),grep=T)
## get the panel viewport
vp1 <- grid.get('panel',grep=T)$wrapvp
depth <- downViewport(name=vp1$name)
rects <- grid.get('geom_rect',grep=T)
for(i in 1:4){
  ## for each axis i create a view port , within it I draw my yaxis
  vpaxis <- viewport(x = rects$x[i]+rects$width[i],
                     y = rects$y[i], 
                     w = 0.005, 
                     h = rects$height[i],
                     just=c('left','top'),
                     yscale = c(0,myd$height[i])
  )
  ## I create the axis, you can customize it using the gp parameter
  gxa <- yaxisGrob(name='axiss',vp=vpaxis,
                   at = seq(0,myd$height[i],by=0.5),
                   gp=gpar(cex=.8))
  grid.draw(gxa)
}
## I put a blank background
grid.edit('background.rect',grep=T,gp=gpar(fill=NA))
###
upViewport(depth) 
```

![在此处输入图像描述](../Images/99fc9daf1b742f93603054312261033b.png)

对于坐标 floop 我们使用 xaxis 我们将上面的 for 循环更改为：

```
for(i in 1:4){
vpaxis <- viewport(x = rects$x[i],
                   y = rects$y[i], 
                   w = rects$width[i], 
                   h = 0,
                   just=c('left','top'),
                   clip=FALSE,
                   xscale = c(0,myd$height[i]),

)
gxa <- xaxisGrob(name='axiss',vp=vpaxis,
                 at = seq(0,myd$height[i],by=0.5),
                 gp=gpar(cex=.8))
grid.draw(gxa)
} 
```

![在此处输入图像描述](../Images/9648341930c6edd10363a58eed49bfa0.png)

# c# - 无法从 asp.net 中更新的 HtmlTable 对象获取数据

> ID：13902053
> 
> 赞同：0
> 
> 时间：2012-12-16T14:04:12.000
> 
> 标签：c#, asp.net, html, webserver

我是 asp 的初学者，在尝试进行一些表动态更新时，我遇到了一个奇怪的问题：
首先在页面加载时，我从 xml 文件中获取一些数据并将其添加到我的表中。这部分没有引起任何问题，数据显示在页面上。
第二部分是当我尝试将表的更新数据写回文件时，我得到一个空文件。在调试模式下查看值后，似乎当我获取 HtmlTable 实例并检查 Row 属性时，只有一行是标题行。

附上表格声明：

```
<table id="users" class="ui-widget ui-widget-content" runat="server">     
<thead> 
<tr class="ui-widget-header ">          
<th>Title</th>                       
<th>Link From Ibms</th> 
<th>Dismiss</th>    
</tr> 
</thead>   
</table> 
```

以及服务器上的读写功能：

```
 private void readLinkXml()
    {
        if (!File.Exists(path))                                                          //   no file.
            return;

        XmlTextReader reader = new XmlTextReader(path);
        reader.WhitespaceHandling = WhitespaceHandling.None;
    //    reader.Read();

        while (!reader.EOF)                                                              //  load loop
        {

            if ((reader.Name == "ChannelMap" && !reader.IsStartElement()))
            {
                break;
            }

            while ((reader.Name != "links" || !reader.IsStartElement()))
                reader.Read();                                                          // advance to next <links> tag

            HtmlTableRow row = new HtmlTableRow();

            HtmlTableCell title = new HtmlTableCell();
            title.InnerHtml = reader.GetAttribute("TITLE");                             // get link title.
            row.Cells.Add(title);
            HtmlTableCell link = new HtmlTableCell();
            link.InnerHtml = reader.GetAttribute("VOD_URL");                            // get link url.
            row.Cells.Add(link);
            HtmlTableCell buttonCell = new HtmlTableCell();
            buttonCell.Attributes.Add("id", "table_button");
            row.Cells.Add(buttonCell);

            users.Rows.Add(row);                                                        //  add xml asset as row in link table.                         
            reader.Read();                                                              // and now either at <links> tag or </ChannelMap
        }

        reader.Close();
    }

    private void writeLinksXml()
    {
        XmlWriterSettings settings = new XmlWriterSettings();
        settings.Indent = true;
        settings.IndentChars = "  ";
        settings.NewLineChars = "\r\n";
        settings.NewLineHandling = NewLineHandling.Replace;
        XmlWriter writer = XmlWriter.Create(path, settings);

        writer.WriteStartDocument();
        writer.WriteStartElement("ChannelMap");

        bool first = true;

        foreach (HtmlTableRow row in users.Rows)
        {
            if (first)
            {
                first = false;
                continue;
            }

            writer.WriteStartElement("links");
            writer.WriteAttributeString("TITLE", row.Cells[0].InnerText);
            writer.WriteAttributeString("VOD_URL", row.Cells[1].InnerText);
            writer.WriteEndElement();
        }

        writer.WriteEndElement();
        writer.WriteEndDocument();
        writer.Close();
    } 
```

有谁知道为什么我无法检索我刚刚添加到表中的数据？

谢谢，
摩西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:06:43.310

好吧，似乎所有的问题都称为为什么在 aspnet 中需要视图状态。
从你的问题我猜你有绑定数据，`Page_Load()`你可能也使用过

```
Page.IsPostBack 
```

这是一件好事。

现在，当您回发时，您需要确保您绑定的是同一个控件（它是什么 GridView、DataList 什么都没有关系......）。

因此，如果您想减少对 XML 文件的调用，请在每次回发后再次绑定或将数据放入 ViewState。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:42:22.293

确保`readLinkXml()`发生在`Page_Init`您的页面中。
否则，当您 PostBack 时视图状态尝试更新行时 - 它找不到数据并且无法更改值。

# delphi - 支持Unicode的PDF引擎

> ID：13902056
> 
> 赞同：2
> 
> 时间：2012-12-16T14:04:31.157
> 
> 标签：delphi, pdf-generation, delphi-xe

我需要一个 Delphi 库来生成 PDF（商业版，最好有源代码）。此外，该库应支持 Unicode (UTF-8)。我已经找到了[http://www.quickpdflibrary.com/](http://www.quickpdflibrary.com/)。这个库有什么经验吗？

**更新1 ：到目前为止我的经验： **QuickPDF**[将PDF转换为图像：字母相互移动](https://stackoverflow.com/questions/13956041/quickpdf-converting-a-pdf-to-an-image-letters-move-in-eachother)**

 ****Update2**：到目前为止，我最好的体验是使用 gnostice：[http ://www.gnostice.com/eDocEngine_VCL.asp](http://www.gnostice.com/eDocEngine_VCL.asp)

**Update3** 最后我认为 QuickPDF 是最好的库。如果字体未嵌入 pdf 中，则移动字母有这个缺点（请参阅 Update1）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T16:02:38.113

我对 QuickPDF 的体验是一流的。该库快速、广泛且易于使用。该论坛反应迅速，新手用户受到尊重。这是我工具包的重要组成部分。

说了这么多，我应该补充一点，我对图书馆的使用主要是在填写政府表格方面，它做得很好。我还计划用它创建一堆报告，然后自动将它们与超链接大纲结合起来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T15:35:38.407

GnostIce 具有[eDocEngine](http://www.gnostice.com/eDocEngine_VCL.asp)和[PDF Toolkit](http://www.gnostice.com/pdftoolkit_vcl.asp) VCL 组件。AFAIK，那些支持Unicode。

[WPCubed](http://www.wpcubed.com/products/wpdf/generic/index.htm)还有一个用于生成 PDF 的 Delphi 包装器组件，但我不知道它们是否支持 Unicode。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T05:58:24.320

即使您已经找到了您的库（那么问题的重点是什么？），我们的开源[SynPDF 库](http://blog.synopse.info/tag/PDF)支持 Unicode（包括[字体回退](http://blog.synopse.info/post/2012/07/10/Better-Unicode-support-in-Reports-and-PDF-generation)），甚至通过[Uniscribe 渲染](http://blog.synopse.info/post/2010/05/06/Synopse-PDF-engine-1.7.2)进行字形着色。

它适用于 Delphi 6 到 XE3，具有完整的源代码，并且可以从一个`TCanvas`属性工作：也就是说，您可以使用常规 VCL 绘图命令绘制您的内容，或渲染一个元文件。它是静态链接的（不需要外部 DLL），速度非常快，并且可以生成小的 pdf 内容。

在我们的论坛上，一些用户表示这个开源库比大多数“商业”版本更好。开源是自由的——即使公司将来不维护库，任何人都可以分叉项目并更新它。您现在可以获取源代码，并检查它是否满足您的需求。在某些情况下，开源只是更安全。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-16T17:24:11.817

我也可以推荐 Debenu QuickPDF。非常全面的功能集，很好的支持。

既然您提到了 Delphi XE 并且您需要“UTF-8”支持，我应该指出当前的库函数都使用本机 UnicodeString 参数来传递字符串变量。因此，对处理任何 UTF-8 数据的支持将来自 Delphi，而不是库。**

# c++ - const 和常规类型的 C++ 模板规范

> ID：13902061
> 
> 赞同：0
> 
> 时间：2012-12-16T14:04:53.657
> 
> 标签：c++, templates, specifications

我想制作一个适用于所有表单的模板规范，例如：

```
char*, const char*, char* const 
```

ETC...

如何使用 C++ 语法做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T21:02:46.293

如果您想编写一个适用于所有三个版本并且功能相同的函数，您实际上并不需要模板。这是一个示例程序来演示这一点：

```
void f(const char* const c)
{
}

int main()
{
  char ch='h';
  char*c=&ch;
  const char*cc="hi";
  char* const cc1=&ch;
  f(c);
  f(cc);
  f(cc1);
} 
```

它用 g++4.7 编译得很好。

# sql-server - 在 sql server 上将日期存储为 BigInt - 这是个好主意吗？

> ID：13902066
> 
> 赞同：1
> 
> 时间：2012-12-16T14:05:18.550
> 
> 标签：sql-server, date, datetime, sql-server-2008-r2, bigint

好的，现在让我举个例子

日期 ：`15.12.2012 00:16:39`

现在这将存储为

```
20121215001639 
```

现在例如，如果我想检索早于 30 分钟（30*60=1800 秒）的行

我可以这样做

```
where date<20121215001639+1800 
```

那么这将是一种性能方式而不是存储为日期时间吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-16T14:35:35.097

我完全同意 marc_s 上面的评论，但我决定做一个测试，只是为了好玩。

我创建了两张表，一张有`datetime`列，一张有`bigint`列，代表相同的数据。

这是 sql 小提琴：[http ://www.sqlfiddle.com/#!3/74976/3](http://www.sqlfiddle.com/#!3/74976/3)

我已经针对 500、1000 和 5000 条记录运行此查询，并且每次都注意到执行计划是相同的，因此从性能的角度来看，使用`bigint`.

但是，这种方法有明显的缺点`bigint`。他们中有一些：

*   到/从的转换`bigint`需要编写更多代码
*   按月过滤等操作需要更复杂/可读性更低的查询
*   查看 Management Studio 中的结果网格，如果您看到分隔的日期部分，则无法尽可能快地“解析”/解释结果。

# android - 在另一个之上绘制一个视图

> ID：13902067
> 
> 赞同：1
> 
> 时间：2012-12-16T14:05:19.150
> 
> 标签：android, canvas

是的，我同意这些问题缺乏研究工作，但我想不出具体的“关键字搜索”，所以我在这里发布问题

我想在另一个之上绘制一个视图。下面的视图将是绘制动画的画布视图（对于我的游戏的主菜单），前视图有按钮。

所以..让我分开我的问题.. 1）如何获得上述行为？

2）如何更改按钮纹理（例如按钮向上和按钮向下时）

3）如何做动画？（就像用户打开游戏时按钮从左滑动到中心一样）

只需告诉我需要搜索的关键字来获得每个问题的答案，我就会感到满意。提前感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T14:15:51.607

> 1）如何获得上述行为？

[相对布局](http://developer.android.com/guide/topics/ui/layout/relative.html)

通过使用相对布局，您可以将视图放置在另一个之上。

> 2）如何更改按钮纹理（例如按钮向上和按钮向下时）

[StateListDrawables](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

Android 有不同的状态来描述视图的触摸进度。通过声明状态列表，您可以指定按钮在特定状态下的外观。

> 3）如何做动画？（就像用户打开游戏时按钮从左滑动到中心一样）

[这是一个不错的动画教程](http://www.vogella.com/articles/AndroidAnimation/article.html)。您可能正在寻找翻译动画。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-26T11:42:19.703

要回答问题 - 或问题 1) - 您还可以使用 FrameLayout 将视图置于彼此之上

```
 <FrameLayout
        android:layout_height="wrap_content"
        android:layout_width="match_parent">

        <Button
            android:layout_width="@dimen/score_red_size_width"
            android:layout_height="@dimen/score_red_size_height"
            android:id="@+id/time"
            android:background="@drawable/time"
            android:layout_gravity="center_horizontal"

            android:textColor="@color/white"
            android:textSize="@dimen/time_formatting"
            android:layout_marginTop="5dp" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/time_text"
            android:layout_gravity="center_horizontal|center_vertical"
            android:textAlignment="center"
            android:text="no time"
            android:layout_marginBottom="@dimen/time_label_bottom_margin"
            android:textColor="@color/white"
            android:textSize="@dimen/time_formatting" />
    </FrameLayout> 
```

这将在按钮上放置一些文本，并带有一些额外的布局/样式。有时这是最简单的选择！

# c# - Windows形式的列表框内的CheckBox

> ID：13902069
> 
> 赞同：2
> 
> 时间：2012-12-16T14:05:56.187
> 
> 标签：c#, .net, windows-applications

> **可能重复：**
> [ListBox](https://stackoverflow.com/questions/2212390/checkbox-inside-listbox)
> [内的复选框 如何在 C# 中的列表框内插入复选框？](https://stackoverflow.com/questions/4896302/how-to-insert-a-check-box-inside-a-list-box-in-c)

我想在应用程序的窗口中的列表框中添加复选框。

这是我的代码：

```
CheckBox cb = new CheckBox();
while (dr.Read())
{

    listBox1.Items.Add(String.Format("{0} {1}",cb,dr["Stu_Name"]));
} 
```

但是，它没有产生预期的结果。

我想要的是数据阅读器的每个列值之前的复选框？有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T14:17:43.800

**简而言之：**您需要使用[CheckedListBox 控件（Windows 窗体）](http://msdn.microsoft.com/en-us/library/3ss05xx6%28v=vs.90%29.aspx)。

这是 Windows 窗体应用程序的示例代码：

```
private void Form1_Load(object sender, EventArgs e)
    {
        var items = checkedListBox1.Items;
        items.Add("Perls");
        items.Add("Checked", true);
    } 
```

# ruby - 使用delayed_job 和运行rails 控制台有什么区别

> ID：13902071
> 
> 赞同：0
> 
> 时间：2012-12-16T14:06:12.003
> 
> 标签：ruby, ruby-on-rails-3, delayed-job, tmux, rails-console

我需要在服务器端完成一个长时间运行的爬行任务，所以我尝试使用 a `delayed_job`，但是，我在使用`delayed_job`with时遇到了问题`Capybara`。所以，我`rails console`改为运行任务。因为这是一项漫长的任务，所以当我的连接断开时，我`tmux`会保持我的生命。`rails console``ssh`

我知道 using`tmux`实际上是在模仿我使用`rails console`. `delayed_job`所以我的问题是，运行 a和执行任务之间有真正的区别`rails console`吗？

与 a 相比，运行 long task in 是否`rails console`会消耗机器上的更多资源`delayed_job`，因为它在前台运行？

是running `rails console`on`tmux`变成后台服务了吗？因为我可以让它自己运行。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:15:36.510

`delayed_job`允许自动执行任务，而不是通过登录服务器在控制台中手动执行任务。

如果您可以手动执行任务，那么不必担心使用`delayed_job`/`resque`或任何[其他后台处理工具将](https://www.ruby-toolbox.com/categories/Background_Jobs)其自动化。

这很可能是您想要定期完成的任务，因此值得将其作为后台任务自动化。（可能值得花时间找出延迟作业/水豚错误）

当前在服务器上的 tmux 会话中运行任务的解决方案是模拟后台进程（手动启动的）

# mysql - 将 Join/Subselect 查询与 SUM MYSQL 查询相结合

> ID：13902072
> 
> 赞同：1
> 
> 时间：2012-12-16T14:06:15.140
> 
> 标签：mysql, sql

## 第一个MYSQL查询

```
-- selects the latest records by unique member_id
SELECT * FROM table t
JOIN (SELECT MAX( id ) AS id
FROM table
GROUP BY member_id) t2 ON t2.id = t.id
WHERE `t`.`timestamp` >= DATE_SUB(NOW(), INTERVAL 5 MINUTE)
ORDER BY t.id DESC
LIMIT 10 
```

## 第二。

```
-- sums the item_qt column by unique member_id
SELECT SUM(item_qt) AS sum_item_qt FROM table t
WHERE `t`.`timestamp` >= DATE_SUB(NOW(), INTERVAL 5 MINUTE)
GROUP BY member_id
ORDER BY t.id DESC
LIMIT 10 
```

有没有办法结合这两个查询，以便 sum_item_qt 加入 member_id 的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:55:17.540

我认为这个查询应该给你你正在寻找的答案：

```
SELECT *
FROM table1 t
INNER JOIN
(SELECT MAX(id) AS id, SUM(item_qt) AS sum_item_qt
 FROM table1
 WHERE timestamp >= DATE_SUB(NOW(), INTERVAL 5 MINUTE)
 GROUP BY member_id) AS t2
ON t2.id = t.id
ORDER BY t.id DESC
LIMIT 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T14:13:38.850

```
SELECT  a.*, c.*
FROM    tableName a
        INNER JOIN
        (
            SELECT member_ID, max(ID) maxID
            FROM tableName
            GROUP BY member_ID
        ) b ON  a.member_ID = b.member_ID AND
                a.ID = b.ID
        INNER JOIN
        (
            SELECT  member_ID, SUM(item_qt) sum_item_qt 
            FROM    tableName
            WHERE   timestamp >= DATE_SUB(NOW(), INTERVAL 5 MINUTE)
            GROUP BY member_id
        ) c ON  a.member_ID = c.member_ID
-- WHERE
-- ORDER BY
-- LIMIT 
```

# php - 在照片上传时从会话创建 user_id？

> ID：13902076
> 
> 赞同：0
> 
> 时间：2012-12-16T14:07:00.603
> 
> 标签：php, mysql, image, upload

我正在使用这个 php 照片上传脚本将图像存储到我的数据库中。

我的数据库有三列：'user_id''name''image'

一切正常。图片已上传，但目前它不存储 user_id，我想尝试制作它，以便当用户点击上传时，它使用他们的会话 ID 来存储他们的 user_id。

通过将这两个函数添加到原始 mysql 查询中，我尝试了一下：

`(user_id, image, name)` `'".$_SESSION['user_id']."',`

```
<html>
    <head>
        <title>Upload Image</title>
    </head>
    <body>    
        <form method="post" enctype="multipart/form-data">
            <input type="file" name="image">
            <input type="submit" value="Upload">
        </form>    
<?php        
    include("includes/_config/connection.php");

    // file properties
    $file = $_FILES['image']['tmp_name'];

    if (!isset($file))
        echo "";    
    else {      
        $image = addslashes (file_get_contents ($_FILES['image']['tmp_name']));
        $image_name = addslashes ($_FILES['image']['name']);
        $image_size = getimagesize($_FILES['image']['tmp_name']);

        if ($image_size == FALSE)
            echo "That's not an image.";        
        else {      
            if (!$insert = mysql_query ("INSERT INTO  ptb_img_uploads (user_id, image, name) VALUES ('', '".$_SESSION['user_id']."', '$image_name','$image')"))    
                echo "There was a problem sending the image.";      
            else    
                echo "Your image was successfully uploaded.";    
        }    
    }    
?>    
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:33:19.647

```
if(!$insert = mysql_query ("INSERT INTO  ptb_img_uploads (user_id, image, name) VALUES ('".$_SESSION['user_id']."', '$image', '$image_name')")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:51:36.867

您必须先开始会话。会话开始（）；。之后 echo $insert; 并将查询粘贴到mysql中并检查错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T14:19:27.900

您忘记启动 PHP session_start()，它会启动会话函数。您还必须在某处设置 $_SESSION['user_id'] 。

更改为此代码：

```
<?php
session_start();
?>
<html>
<head>
    <title>Upload Image</title>
</head>
<body>

<form method="post" enctype="multipart/form-data">
    <input type="file" name="image">
    <input type="submit" value="Upload">
</form>

<?php
include("includes/_config/connection.php");

// file properties
$file = $_FILES ['image'] ['tmp_name'];

if (!isset($file))
{
    echo "";
}
else
{
    $image = addslashes (file_get_contents ($_FILES ['image']['tmp_name']));
    $image_name = addslashes ($_FILES['image']['name']);
    $image_size = getimagesize($_FILES['image']['tmp_name']);

    if($image_size == FALSE)
    {
        echo "That's not an image.";
    }
    else
    {
        if(!$insert = mysql_query ("INSERT INTO  ptb_img_uploads (user_id, image, name) VALUES ('".$_SESSION['user_id']."', '$image_name','$image')"))
        {
            echo "There was a problem sending the image.";
        }
        else
        {
            echo "Your image was successfully uploaded.";
        }
    }

}
?>
</body>
</html> 
```

如果这不起作用，您可以在 session_start 上方添加这个：

```
session_save_path("tmp"); 
```

请记住使用 chmod 777 在您的目录中创建一个名为“tmp”的文件夹。

如果您想测试您的会话是否有效，请执行以下操作：

```
<?php
session_start();

$_SESSION['test_session']="this is a test session";

var_dump($_SESSION);
?> 
```

希望能帮助到你！

# java - 需要更快的数组副本

> ID：13902079
> 
> 赞同：6
> 
> 时间：2012-12-16T14:07:35.843
> 
> 标签：java, arrays, performance, copy

在做了一些阅读之后，我发现在 java 中复制数组的方式存在一些差异。对于我的应用程序，我有一个递归节点树，每个节点都包含一个二维板数组（8x8）。

通过 profiler 测试，我能想到的最好的方法是 java.util.Arrays.copyOf(array) 方法，它使用本机 System.arraycopy。

即便如此，我仍将 80% 的时间用于创建新阵列。如果有人对如何加快速度有任何想法，我将不胜感激。也许使用 64 项数组而不是 8x8 会更快。我很快就会对此进行测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T14:15:39.457

您花费 80% 的时间复制数组这一事实意味着以下两件事之一：

1.  数组复制太慢；
2.  除了复制数组之外，您几乎没有做任何其他事情。

您的复印性能可能已经很先进了；请考虑您的应用程序的体系结构，尝试减少复制的数据量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T14:15:59.083

如果您的代码需要清晰， System.arraycopy() 是最好的。

但是，如果性能正在成为真正的瓶颈，您可以查看：

*   [http://en.wikipedia.org/wiki/Flyweight_pattern](http://en.wikipedia.org/wiki/Flyweight_pattern)
*   [http://java.dzone.com/articles/when-using-direct-memory-java](http://java.dzone.com/articles/when-using-direct-memory-java)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T16:39:01.270

you need an algorithmic improvement. (are you doing a min max chess algorithm ?)

A possibility is to just copy the reference to each 8x8 array and add a 'shared' flag to each array. Then copy the array only if you actually do change the array. As long you are not changing all of the arrays, this would reduce copying a lot.

Another variant would be to find a more compact representation for your 8x8 array (e.g. some bit magic).

What do your array entries contain ?

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-16T16:04:21.817

我最近在这方面进行了调查（请参阅我对自己的问题的回答[Is there any way to create an original array without initialization?](https://stackoverflow.com/questions/13780350/is-there-any-way-to-create-a-primitive-array-without-initialization)，它可能被命名为“为什么 Array.copyOf 如此缓慢”或“为什么 Java太慢了”），甚至向 Oracle 发送了 RFE。主要思想是Java在无用的数组初始化上花费了太多时间。这是关于如何 Arrays.copyOf 可以更快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T05:44:52.857

感谢您的回复。一个 8x8 数组本质上是 9 次数组分配和 1 次初始化。使用大小为 64 的数组而不是 8x8，分配只有一次，我现在可以跳过初始化。

但是，我会考虑其他提高速度的方法......因为更快的数组副本意味着我可以制作更多节点：D。

感谢大家

# php - 从 PHP 生成 Chrome .crx

> ID：13902082
> 
> 赞同：6
> 
> 时间：2012-12-16T14:08:56.713
> 
> 标签：php, google-chrome-extension, openssl, public-key-encryption

我想从 PHP 生成一个 Chrome 扩展（Chrome 主题）。我的 PHP 脚本会生成一个 zip 文件 (download.zip)。要将其转换为 .crx 包，它需要添加标头，包括公钥和签名。

我看到了[这个](https://stackoverflow.com/a/5586372)答案，但是您需要一个生成 .pub 文件的 .pem 文件。我在共享主机上，所以 exec() 不起作用（将 .pem 转换为 .pub）。无需 .pem 文件，只需下载一次即可使用（无需更新）。

然后我看到了[这条](http://php.net/manual/en/function.openssl-pkey-new.php#82253)评论，解释了你可以生成私钥和公钥。将这两个脚本结合起来是行不通的（参见代码）。

**如何生成密钥对并使用它来使用 PHP 对 chrome .crx 包进行签名？**

此代码失败（CRX_SIGNATURE_VERIFICATION_INITALIZATION_FAILED）：

```
// Create the keypair
$res=openssl_pkey_new();

// Get private key
openssl_pkey_export($res, $pk);

// Get public key
$key=openssl_pkey_get_details($res);
$key=$key["key"];

# make a SHA1 signature using our private key
openssl_sign(file_get_contents('download.zip'), $signature, $pk, 'sha1');

# decode the public key
$key = base64_decode($key);

# .crx package format:
#
#   magic number               char(4)
#   crx format ver             byte(4)
#   pub key lenth              byte(4)
#   signature length           byte(4)
#   public key                 string
#   signature                  string
#   package contents, zipped   string
#
# see http://code.google.com/chrome/extensions/crx.html
#
$fh = fopen('extension.crx', 'wb');
fwrite($fh, 'Cr24');                             // extension file magic number
fwrite($fh, pack('V', 2));                       // crx format version
fwrite($fh, pack('V', strlen($key)));            // public key length
fwrite($fh, pack('V', strlen($signature)));      // signature length
fwrite($fh, $key);                               // public key
fwrite($fh, $signature);                         // signature
fwrite($fh, file_get_contents('download.zip')); // package contents, zipped
fclose($fh); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:30:50.380

你用`openssl_pkey_export`错了，你还没有删除

```
-----BEGIN PUBLIC KEY-----
...
-----END PUBLIC KEY----- 
```

在解码之前从公钥字符串中提取。我通过查看公钥和签名的长度来解决这个问题。第一个应该是 161，第二个应该是 128 字节长（[来源](http://developer.chrome.com/extensions/crx.html#example)）：

```
A2 00 00 00   # 162 -- length of public key in bytes
80 00 00 00   # 128 -- length of signature in bytes 
```

这是固定代码（PHP 5.4）：

```
$pk=file_get_contents('pk.pem');

$priv = openssl_pkey_get_private($pk);
$pub = openssl_pkey_get_details($priv)['key'];

# make a SHA1 signature using our private key
openssl_sign(file_get_contents('download.zip'), $signature, $priv, OPENSSL_ALGO_SHA1);

# geting rid of -----BEGIN/END PUBLIC KEY-----
# you can probably do it better using preg_match_all / explode(PHP_EOL, $pub) etc.
$pub = trim(explode('-----',$pub)[2]);

# decode the public key
$pub = base64_decode($pub);

# .crx package format:
#
#   magic number               char(4)
#   crx format ver             byte(4)
#   pub key lenth              byte(4)
#   signature length           byte(4)
#   public key                 string
#   signature                  string
#   package contents, zipped   string
#
# see http://code.google.com/chrome/extensions/crx.html
#
$fh = fopen('extension.crx', 'wb');
fwrite($fh, 'Cr24');                             // extension file magic number
fwrite($fh, pack('V', 2));                       // crx format version
fwrite($fh, pack('V', strlen($pub)));            // public key length
fwrite($fh, pack('V', strlen($signature)));      // signature length
fwrite($fh, $pub);                               // public key
fwrite($fh, $signature);                         // signature
fwrite($fh, file_get_contents('download.zip')); // package contents, zipped
fclose($fh); 
```

# javascript - 如何配合浏览器使用 javascript 提供的自动完成功能

> ID：13902086
> 
> 赞同：3
> 
> 时间：2012-12-16T14:10:09.210
> 
> 标签：javascript, browser, autocomplete

我正在做一些关于 javascript 的演示。我在文本输入上注册了一个 onkeypress 事件，并检查它是否是自动提交表单的“输入”键。浏览器具有自动完成功能（我的是 firefox），可以使用向上/向下箭头和回车键从下拉列表中进行选择。问题是当输入文本被聚焦并显示自动完成时，您按下回车按钮只是为了选择自动完成项目，但它会同时自动提交表单。如何避免这种情况？如何使用 javascript 从浏览器中检索自动完成元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:26:37.910

**这是不允许**的。如果它应该在任何网络浏览器上完成，它可能会被视为一个安全漏洞。

假设您的网站访问者尝试搜索诸如“p*rn”之类的关键字，因此您作为网站所有者能够知道该用户喜欢 p*rn!。这只是显示您的请求可能存在的安全和隐私问题的一个小例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T14:26:47.143

没有浏览器会向程序提供自动完成信息。这将是一种窃取数据的方式，因此会构成安全威胁。想象一下，我的程序想要窃取你的地址，所以当你访问我的页面时，我会保留一个地址文本框，并取走你过去填写的所有地址值。

正如评论中所建议的，您可以将自动完成设置为关闭以避免显示下拉菜单。

这是一个链接[如何关闭表单自动完成](https://developer.mozilla.org/en-US/docs/Mozilla/How_to_Turn_Off_Form_Autocompletion?redirectlocale=en-US&redirectslug=How_to_Turn_Off_Form_Autocompletion)，并对此主题进行了解释。

# c++ - 如何创建一个在 C++ 中只读取一次的初始化函数

> ID：13902088
> 
> 赞同：0
> 
> 时间：2012-12-16T14:10:26.313
> 
> 标签：c++, function

我有这堂课：

```
class A : public B 
```

我需要在A中添加一些受保护的字段：_field，我无法触摸/更改B。现在，B和A中的所有函数都是虚拟**的，除了构造函数**。显然，_field 不是 B 类的一部分。

我需要初始化_field。如果唯一的构造函数是 B，我该怎么做？另外，像这样的东西：

```
unsigned long _field = 0; 
```

给我一个错误编译。

我通过以下方式解决这个问题：

```
class A : public B
{
protected: 
  unsigned long _field;
public:
  void fooFunction(){
     ....do other stuff....
     static bool isInitField = false;
     if (!isInitField){
       _field = 0;
       isInitField = true;
     }
     ...rest of the function...
  } 
```

有没有更好的方法可以在不使用静态的情况下做到这一点？

谢谢，或者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T14:32:03.737

在初始化列表中使用 A 构造函数并调用 B 构造函数，这样就可以初始化 A 类的所有字段：

```
A(unsigned long i, other_paramaters oth) : B(oth),_field(i) {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T14:52:57.337

对不起，其实我没有理解你的问题。就一次性初始化而言，构造函数是做它的地方。但是您提出的解决方案暗示您想要别的东西。

函数定义中的 static 将使 _field 在类的所有对象中只能修改一次，这是使 _field 一次可修改的一种有点尴尬的机制。

如果你只想初始化 _field 然后使用初始化。埃斯特班的解决方案就可以了。更好的使用

A(unsigned long i, other_paramaters oth) : B(oth),_field(i) { }

和

A（参数）：B（参数），_field（0）{}

# php - PHP 有没有更好的方法从 8 位字符串表示中获取 ascii 值？

> ID：13902089
> 
> 赞同：0
> 
> 时间：2012-12-16T14:10:44.850
> 
> 标签：php, bits, chr

这就是我目前正在做的事情。我使用 php [chr](http://php.net/manual/en/function.chr.php)函数来获取该字符的 8 位字符串表示的相应 ascii 编号。

在我看来，有更好的方法来做到这一点。是否有我缺少的 php 函数。为 udp/dns 编程做一些位级别的工作。我知道我应该使用 diff 语言，我稍后会撬开端口，但现在有什么想法吗？

```
function get_ascii_character_from_bits($bits){
$binary_codes=array(
'00000000'=>0,
'00000001'=>1,
'00000010'=>2,
'00000011'=>3,
'00000100'=>4,
'00000101'=>5,
'00000110'=>6,
'00000111'=>7,
'00001000'=>8,
'00001001'=>9,
'00001010'=>10,
'00001011'=>11,
'00001100'=>12,
'00001101'=>13,
'00001110'=>14,
'00001111'=>15,
'00010000'=>16,
'00010001'=>17,
'00010010'=>18,
'00010011'=>19,
'00010100'=>20,
'00010101'=>21,
'00010110'=>22,
'00010111'=>23,
'00011000'=>24,
'00011001'=>25,
'00011010'=>26,
'00011011'=>27,
'00011100'=>28,
'00011101'=>29,
'00011110'=>30,
'00011111'=>31,
'00100000'=>32,
'00100001'=>33,
'00100010'=>34,
'00100011'=>35,
'00100100'=>36,
'00100101'=>37,
'00100110'=>38,
'00100111'=>39,
'00101000'=>40,
'00101001'=>41,
'00101010'=>42,
'00101011'=>43,
'00101100'=>44,
'00101101'=>45,
'00101110'=>46,
'00101111'=>47,
'00110000'=>48,
'00110001'=>49,
'00110010'=>50,
'00110011'=>51,
'00110100'=>52,
'00110101'=>53,
'00110110'=>54,
'00110111'=>55,
'00111000'=>56,
'00111001'=>57,
'00111010'=>58,
'00111011'=>59,
'00111100'=>60,
'00111101'=>61,
'00111110'=>62,
'00111111'=>63,
'01000000'=>64,
'01000001'=>65,
'01000010'=>66,
'01000011'=>67,
'01000100'=>68,
'01000101'=>69,
'01000110'=>70,
'01000111'=>71,
'01001000'=>72,
'01001001'=>73,
'01001010'=>74,
'01001011'=>75,
'01001100'=>76,
'01001101'=>77,
'01001110'=>78,
'01001111'=>79,
'01010000'=>80,
'01010001'=>81,
'01010010'=>82,
'01010011'=>83,
'01010100'=>84,
'01010101'=>85,
'01010110'=>86,
'01010111'=>87,
'01011000'=>88,
'01011001'=>89,
'01011010'=>90,
'01011011'=>91,
'01011100'=>92,
'01011101'=>93,
'01011110'=>94,
'01011111'=>95,
'01100000'=>96,
'01100001'=>97,
'01100010'=>98,
'01100011'=>99,
'01100100'=>100,
'01100101'=>101,
'01100110'=>102,
'01100111'=>103,
'01101000'=>104,
'01101001'=>105,
'01101010'=>106,
'01101011'=>107,
'01101100'=>108,
'01101101'=>109,
'01101110'=>110,
'01101111'=>111,
'01110000'=>112,
'01110001'=>113,
'01110010'=>114,
'01110011'=>115,
'01110100'=>116,
'01110101'=>117,
'01110110'=>118,
'01110111'=>119,
'01111000'=>120,
'01111001'=>121,
'01111010'=>122,
'01111011'=>123,
'01111100'=>124,
'01111101'=>125,
'01111110'=>126,
'01111111'=>127,
'10000000'=>128,
'10000001'=>129,
'10000010'=>130,
'10000011'=>131,
'10000100'=>132,
'10000101'=>133,
'10000110'=>134,
'10000111'=>135,
'10001000'=>136,
'10001001'=>137,
'10001010'=>138,
'10001011'=>139,
'10001100'=>140,
'10001101'=>141,
'10001110'=>142,
'10001111'=>143,
'10010000'=>144,
'10010001'=>145,
'10010010'=>146,
'10010011'=>147,
'10010100'=>148,
'10010101'=>149,
'10010110'=>150,
'10010111'=>151,
'10011000'=>152,
'10011001'=>153,
'10011010'=>154,
'10011011'=>155,
'10011100'=>156,
'10011101'=>157,
'10011110'=>158,
'10011111'=>159,
'10100000'=>160,
'10100001'=>161,
'10100010'=>162,
'10100011'=>163,
'10100100'=>164,
'10100101'=>165,
'10100110'=>166,
'10100111'=>167,
'10101000'=>168,
'10101001'=>169,
'10101010'=>170,
'10101011'=>171,
'10101100'=>172,
'10101101'=>173,
'10101110'=>174,
'10101111'=>175,
'10110000'=>176,
'10110001'=>177,
'10110010'=>178,
'10110011'=>179,
'10110100'=>180,
'10110101'=>181,
'10110110'=>182,
'10110111'=>183,
'10111000'=>184,
'10111001'=>185,
'10111010'=>186,
'10111011'=>187,
'10111100'=>188,
'10111101'=>189,
'10111110'=>190,
'10111111'=>191,
'11000000'=>192,
'11000001'=>193,
'11000010'=>194,
'11000011'=>195,
'11000100'=>196,
'11000101'=>197,
'11000110'=>198,
'11000111'=>199,
'11001000'=>200,
'11001001'=>201,
'11001010'=>202,
'11001011'=>203,
'11001100'=>204,
'11001101'=>205,
'11001110'=>206,
'11001111'=>207,
'11010000'=>208,
'11010001'=>209,
'11010010'=>210,
'11010011'=>211,
'11010100'=>212,
'11010101'=>213,
'11010110'=>214,
'11010111'=>215,
'11011000'=>216,
'11011001'=>217,
'11011010'=>218,
'11011011'=>219,
'11011100'=>220,
'11011101'=>221,
'11011110'=>222,
'11011111'=>223,
'11100000'=>224,
'11100001'=>225,
'11100010'=>226,
'11100011'=>227,
'11100100'=>228,
'11100101'=>229,
'11100110'=>230,
'11100111'=>231,
'11101000'=>232,
'11101001'=>233,
'11101010'=>234,
'11101011'=>235,
'11101100'=>236,
'11101101'=>237,
'11101110'=>238,
'11101111'=>239,
'11110000'=>240,
'11110001'=>241,
'11110010'=>242,
'11110011'=>243,
'11110100'=>244,
'11110101'=>245,
'11110110'=>246,
'11110111'=>247,
'11111000'=>248,
'11111001'=>249,
'11111010'=>250,
'11111011'=>251,
'11111100'=>252,
'11111101'=>253,
'11111110'=>254,
'11111111'=>255
);
return chr($binary_codes[$bits]);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T14:13:21.940

我认为您的函数本质上就是[bindec](http://php.net/manual/en/function.bindec.php)正在做的事情，接受的输入范围要小得多，并用`chr`.

即你的功能相当于

```
chr(bindec($bits)); 
```

用于 0 到 255 的输出。

# reporting-services - SSRS 报告中必应地图的缩放属性

> ID：13902090
> 
> 赞同：0
> 
> 时间：2012-12-16T14:10:47.920
> 
> 标签：reporting-services, bing

我创建了一个 SSRS 报告，其中我使用地图和 bing 地图。在我设计时，我可以放大和缩小，但我不能在报告预览中放大或缩小。请建议如何在 SSRS 报告预览中包含缩放属性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:33:02.350

自 SQL 2012 起，它不支持“开箱即用”。我得到的最接近的是拥有一个 Zoom 参数并将其输入 MapViewPort / View / Zoom 属性。这不漂亮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:37:24.667

嗨，下面是与您有关的其他一些页面问题 [此 stackoverflow 问题对此进行了讨论。](https://stackoverflow.com/questions/6412779/zoom-in-on-ssrs-2008-r2-spatial-map) [在此网页上，逐步使用参数实现缩放。](http://abc-techblog.blogspot.co.uk/2012/03/ssrs-dynamic-zoom-for-maps-in-reporting.html) [这篇文章中的绅士正在使用一个围绕 SSRS 控件的自定义网页来添加平移和缩放](http://www.code-magazine.com/articleprint.aspx?quickid=1108101&printmode=false&page=2)

# java - 使用 Fusion Table API 拒绝授权

> ID：13902092
> 
> 赞同：0
> 
> 时间：2012-12-16T14:10:52.070
> 
> 标签：java, google-fusion-tables

我的代码：

```
public class restletexample {

    String URI = "https://www.googleapis.com/upload/fusiontables/v1/tables/tableid/import";

    HashMap<String, String> urlVariables = new HashMap<String, String>();

    String column = "'Moth', '30', '2012','efef','efefef'";

    public void testrestlet() {

        urlVariables.put("key=", "KEY");

        RestTemplate restTemplate = new RestTemplate();

        restTemplate.postForLocation(URI, column, urlVariables);

    }

    public static void main(String args[]) {

        restletexample rst = new restletexample();
        rst.testrestlet();

    }

} 
```

例外 ：

```
Exception in thread "main" org.springframework.web.client.HttpClientErrorException: 401 Unauthorized 
```

我在 API 控制台中生成了密钥，并且正在使用相同的 . 我不知道为什么谷歌没有授权我的请求。需要帮助......自从过去 4 小时以来我的头都被打破了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:40:03.400

您的 URI 似乎错误 - “tableid”应替换为您的表的实际 ID。

# android - 安卓动态壁纸背景

> ID：13902098
> 
> 赞同：2
> 
> 时间：2012-12-16T14:12:33.610
> 
> 标签：android, live-wallpaper

我有 LiveWallpaper，事实上是秋天的雪。以什么方式添加背景？我想插入一张图片。

```
public class SnowService extends WallpaperService {

    private final static int[] windCurve = {1,3,5,6,6,6,7,7,6,5,4,2,1,1};

    public Engine onCreateEngine() {
        return new SnowEngine();
    }

    public class SnowEngine extends WallpaperService.Engine {

        private SnowThread thread;
        private Random random = new Random();
        private SurfaceHolder holder;

        private Bitmap flakeImage;
        private Set<Snowflake> flakes = new HashSet<Snowflake>();
        private Set<Snowflake> oobFlakes = new HashSet<Snowflake>();
        private int wind = 0;

        public SnowEngine() {
            flakeImage = BitmapFactory.decodeResource(getResources(), R.drawable.square3x3);
        }

        public class SnowThread extends Thread {

            private boolean isSnowing = true;
            private long lastWindUpdate = System.currentTimeMillis();
            private int windCurveIndex = 0;

            private void update(Canvas c) {

                c.drawRGB(0, 0, 0);
                flakes.add(new Snowflake(random.nextFloat() * c.getWidth(), -flakeImage.getWidth(), flakeImage));
                long nowTime = System.currentTimeMillis();

                if (wind == 0) {
                   if (nowTime - lastWindUpdate > 20000) {
                      wind = windCurve[++windCurveIndex];
                      lastWindUpdate = nowTime;
                   }
                } else if (nowTime - lastWindUpdate > 1000) {
                    if (windCurveIndex < windCurve.length -1) {
                        wind = windCurve[++windCurveIndex];
                        lastWindUpdate = nowTime;
                    } else {
                        windCurveIndex = 0;
                        wind = 0;
                        lastWindUpdate = nowTime;
                    }
                }

                for (Snowflake flake : flakes) {
                    flake.update(wind);
                    c.drawBitmap(flake.bitmap, flake.x, flake.y, null);

                    if (flake.x > c.getWidth() || flake.x < -flake.bitmap.getWidth() ||
                            flake.y > c.getHeight()) {
                        oobFlakes.add(flake);
                    }

                }

                flakes.removeAll(oobFlakes);
                oobFlakes.clear();

            }

            @Override
            public void run() {
                Log.d("snow", "SnowThread started");
                while (isSnowing) {
                    Canvas canvas = null;
                    try {
                        Thread.sleep(30);
                        canvas = holder.lockCanvas();
                        update(canvas);

                    } catch (InterruptedException e) {

                    } finally {
                        if (canvas != null) {
                            holder.unlockCanvasAndPost(canvas);
                        }
                    }
                }
            }

            public boolean isSnowing() {
                return isSnowing;
            }

            public void stopSnowing() {
                isSnowing = false;
            }
        }

        @Override
        public void onVisibilityChanged(boolean visible) {
            super.onVisibilityChanged(visible);
            Log.d("snow", "visibilityChanged to " + visible);
            if (visible) {
                thread = new SnowThread();
                thread.start();
            } else {
                thread.stopSnowing();
            }
        }

        @Override
        public void onSurfaceCreated(SurfaceHolder holder) {
            Log.d("snow", "surfaceCreated");
            this.holder = holder;
        }

        @Override
        public void onSurfaceDestroyed(SurfaceHolder holder) {
            // usual case is onVisibilityChanged(false) has been called
            // and  the thread is shutting down
            Log.d("snow", "surfaceDestroyed");
            boolean retry = true;
            while (retry) {
                try {
                    thread.stopSnowing(); // just in case
                    thread.join();
                    Log.d("snow", "snowThread died");
                    retry = false;
                } catch (InterruptedException e) {
                }
            }
        }

        class Snowflake {

            public Bitmap bitmap;
            float x;
            float y;
            int bias = 0;
            int biasTime = 0;
            boolean interBias = false;

            Snowflake(float x, float y, Bitmap bitmap) {
                this.x = x;
                this.y = y;
                this.bitmap = bitmap;
            }

            void update(int wind) {

                if (biasTime < 0) {
                    if (interBias) {
                        bias = ((Integer) random.nextInt(3)).compareTo(1);
                        interBias = false;
                    } else {
                        bias = 0;
                        interBias = true;
                    }

                    biasTime = random.nextInt(30);
                }

                biasTime--;
                x += bias + wind;
                y += 4;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T13:00:18.670

它很容易..

```
 public SnowEngine()
    {
        bk=BitmapFactory.decodeResource(getResources(), R.drawable.bkgrnd);
        flakeImage = BitmapFactory.decodeResource(getResources(),R.drawable.snow2);
    } 
```

然后在你的更新方法中

```
 private void update(Canvas c)
     {

            c.drawRGB(0, 0, 0);
            c.drawBitmap(bk, 0, 0, null);

           ...............
     } 
```

就是这样，bk是你想要的任何图像..

# java - Android 相机效果不起作用

> ID：13902101
> 
> 赞同：0
> 
> 时间：2012-12-16T14:12:54.813
> 
> 标签：java, android, android-camera, android-camera-intent

我正在尝试为 android 构建一个图像编辑应用程序，而我刚刚开始并且已经遇到了麻烦。好吧，我可以拍照并保存到SD卡。但我尝试做一些应用程序正在运行的效果，但效果没有出现在预览中。这是我使用的完整代码：

```
package com.example.camerademo;

import java.io.IOException;

import android.app.Activity;

import android.hardware.Camera;

import android.os.Bundle;

import android.view.SurfaceHolder;

import android.view.SurfaceView;

public class MainActivity extends Activity implements 

SurfaceHolder.Callback {

SurfaceView cameraView;

SurfaceHolder surfaceHolder;

Camera camera;

@Override

public void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);

setContentView(R.layout.activity_main);

cameraView = (SurfaceView) this.findViewById(R.id.CameraView);

surfaceHolder = cameraView.getHolder();

surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

surfaceHolder.addCallback(this);

}

@Override

public void surfaceChanged(SurfaceHolder holder, int format, int width,int height) {

    // TODO Auto-generated method stub

    camera.startPreview();

}

@Override

public void surfaceCreated(SurfaceHolder holder) {

    // TODO Auto-generated method stub

    camera = Camera.open();

    try {

    camera.setPreviewDisplay(holder);

    Camera.Parameters parameters = camera.getParameters();

    parameters.setColorEffect(Camera.Parameters.EFFECT_NEGATIVE);

    camera.setParameters(parameters);

    }

    catch (IOException exception)

    {

    camera.release();

    }

    }

@Override

public void surfaceDestroyed(SurfaceHolder holder) {

    // TODO Auto-generated method stub

    camera.stopPreview();

    camera.release();

}} 
```

谁能告诉我我的效果代码有什么问题。有其他方法吗？

这是我用来获取支持的效果并循环播放的代码。

```
List<String> colorEffects = parameters.getSupportedColorEffects();
Iterator<String> cei = colorEffects.iterator();
while (cei.hasNext())
{
String currentEffect = cei.next();
if (currentEffect.equals(Camera.Parameters.EFFECT_NEGATIVE))
{
parameters.setColorEffect(Camera.Parameters.EFFECT_NEGATIVE);
break;
}
} 
```

这给了我一个空指针异常。所以我试图看看 colorEffects 是否包含任何数据或效果。我使用了这样的 if 循环

```
if(colorEffects == null){
editText.setText("Null");
} 
```

它是空的。为什么？下载的sdk有问题吗？我应该下载 android 2.3 SDK。目前我已经下载了 2.2 SDK。顺便说一句，即使只是输入

```
parameters.setColorEffect(Camera.Parameters.EFFECT_NEGATIVE); 
```

不使用 getSupportedColorEffects() 方法，它运行没有错误，但效果不会显示在预览中。

日志猫信息：

```
01-01 00:08:17.588: E/AndroidRuntime(297): FATAL EXCEPTION: main
01-01 00:08:17.588: E/AndroidRuntime(297): java.lang.NullPointerException
01-01 00:08:17.588: E/AndroidRuntime(297):  at com.example.camerademo.MainActivity.surfaceCreated(MainActivity.java:56)
01-01 00:08:17.588: E/AndroidRuntime(297):  at android.view.SurfaceView.updateWindow(SurfaceView.java:532)
01-01 00:08:17.588: E/AndroidRuntime(297):  at android.view.SurfaceView.dispatchDraw(SurfaceView.java:339)
01-01 00:08:17.588: E/AndroidRuntime(297):  at android.view.ViewGroup.drawChild(ViewGroup.java:1638)
01-01 00:08:17.588: E/AndroidRuntime(297):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
01-01 00:08:17.588: E/AndroidRuntime(297):  at android.view.ViewGroup.drawChild(ViewGroup.java:1638)
01-01 00:08:17.588: E/AndroidRuntime(297):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
01-01 00:08:17.588: E/AndroidRuntime(297):  at android.view.View.draw(View.java:6743)
01-01 00:08:17.588: E/AndroidRuntime(297):  at android.widget.FrameLayout.draw(FrameLayout.java:352)
01-01 00:08:17.588: E/AndroidRuntime(297):  at android.view.ViewGroup.drawChild(ViewGroup.java:1640)
01-01 00:08:17.588: E/AndroidRuntime(297):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
01-01 00:08:17.588: E/AndroidRuntime(297):  at android.view.ViewGroup.drawChild(ViewGroup.java:1638)
01-01 00:08:17.588: E/AndroidRuntime(297):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
01-01 00:08:17.588: E/AndroidRuntime(297):  at android.view.View.draw(View.java:6743)
01-01 00:08:17.588: E/AndroidRuntime(297):  at android.widget.FrameLayout.draw(FrameLayout.java:352)
01-01 00:08:17.588: E/AndroidRuntime(297):  at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1842)
01-01 00:08:17.588: E/AndroidRuntime(297):  at android.view.ViewRoot.draw(ViewRoot.java:1407)
01-01 00:08:17.588: E/AndroidRuntime(297):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1163)
01-01 00:08:17.588: E/AndroidRuntime(297):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
01-01 00:08:17.588: E/AndroidRuntime(297):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-01 00:08:17.588: E/AndroidRuntime(297):  at android.os.Looper.loop(Looper.java:123)
01-01 00:08:17.588: E/AndroidRuntime(297):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-01 00:08:17.588: E/AndroidRuntime(297):  at java.lang.reflect.Method.invokeNative(Native Method)
01-01 00:08:17.588: E/AndroidRuntime(297):  at java.lang.reflect.Method.invoke(Method.java:521)
01-01 00:08:17.588: E/AndroidRuntime(297):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-01 00:08:17.588: E/AndroidRuntime(297):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-01 00:08:17.588: E/AndroidRuntime(297):  at dalvik.system.NativeStart.main(Native Method) 
```

当我输入这行代码时发生此错误：

```
List<String> colorEffects = parameters.getSupportedColorEffects();
    Iterator<String> cei = colorEffects.iterator();
    while (cei.hasNext())
    {
    String currentEffect = cei.next();
    if (currentEffect.equals(Camera.Parameters.EFFECT_NEGATIVE))
    {
    parameters.setColorEffect(Camera.Parameters.EFFECT_NEGATIVE);
    break;
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:18:17.310

你能试试把这些行：

```
Camera.Parameters parameters = camera.getParameters();

parameters.setColorEffect(Camera.Parameters.EFFECT_NEGATIVE);

camera.setParameters(parameters); 
```

进入`surfaceChanged`方法？

[这是我从Android Developers Reference](http://developer.android.com/guide/topics/media/camera.html#custom-camera)复制的示例代码：

```
 public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        // If your preview can change or rotate, take care of those events here.
        // Make sure to stop the preview before resizing or reformatting it.

        if (mHolder.getSurface() == null){
          // preview surface does not exist
          return;
        }

        // stop preview before making changes
        try {
            mCamera.stopPreview();
        } catch (Exception e){
          // ignore: tried to stop a non-existent preview
        }

        // set preview size and make any resize, rotate or
        // reformatting changes here

        // start preview with new settings
        try {
            mCamera.setPreviewDisplay(mHolder);
            mCamera.startPreview();

        } catch (Exception e){
            Log.d(TAG, "Error starting camera preview: " + e.getMessage());
        }
    } 
```

根据this reference，建议对`surfaceChanged`方法进行任何更改，就像评论所说的那样。

我有类似的应用程序会改变预览的大小，我按照指南进行操作。那你可以试试这个方法吗？

# sql - 从多个表中选择 count(*) 以创建视图

> ID：13902102
> 
> 赞同：2
> 
> 时间：2012-12-16T14:13:08.730
> 
> 标签：sql, oracle, view, count

如何从两个不同的表中选择 count(*) 来创建视图？

有以下表格：

部门表

*   DEPTNO
*   名称
*   LOC

电磁脉冲表

*   EMPNO
*   姓名
*   工作
*   经理
*   雇用日期
*   萨尔瓦多
*   通讯
*   DEPTNO

我试过了：

```
CREATE VIEW PLACE
AS SELECT d.Loc CITY, count(d.Deptno) N_DEPT, count(e.Empno) N_EMP
   FROM Dept d, Emp e
   where d.Deptno = e.Deptno
   GROUP BY d.Loc, d.deptno; 
```

得到了这个：

```
CITY          N_DEPT   N_EMP
CHICAGO         6       6
DALLAS          5       5
NEW YORK        3       3 
```

每个城市只有 1 个 N_DEPT，所以结果是错误的：/。应该有：

```
CITY          N_DEPT   N_EMP
CHICAGO         1       6
DALLAS          1       5
NEW YORK        1       3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T14:18:43.443

使用`DISTINCT`，尝试

```
CREATE VIEW PLACE
AS 
SELECT  d.Loc CITY, 
        count(DISTINCT d.Deptno) N_DEPT, 
        count(e.Empno) N_EMP
FROM    Dept d 
        INNER JOIN Emp e
           ON d.Deptno = e.Deptno
GROUP BY d.Loc 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T14:31:11.727

您也可以简单地计算每个城市想要的东西，而无需加入要计算的表格：

```
create view PLACE
as
select d.Loc as CITY,
       (select count(distinct deptNo) from dept x where x.DeptNo = d.Deptno) as N_DEPT
       (select count(distinct Empno)  from Emp  e where e.DeptNo = d.Deptno) as N_EMP
from Dept d 
```

这并不是一个更好的解决方案。它只是展示了一种看待问题并创建解决方案的不同方式。我喜欢它的是你可以添加任何你想以同样的方式计数的东西，即它引入了一种模板。

# python - 使用 Webtest 和或鼻子测试cherrypy WSGI 应用程序？

> ID：13902103
> 
> 赞同：2
> 
> 时间：2012-12-16T14:13:11.653
> 
> 标签：python, testing, cherrypy, nose, webtest

如何使用 WSGI 接口使用[鼻子](http://code.google.com/p/python-nose)和[webtest](https://webtest.readthedocs.org/en/latest/)广泛测试带有 json 或 html 结果的cherrypy应用程序？

任何示例将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-21T14:06:49.377

这个例子可能会有所帮助：

```
from webtest import TestApp
from nose.tools import eq_

class TestAuthentication(object):
    """
    Tests for the default authentication setup.

    If your application changes how the authentication layer is configured
    those tests should be updated accordingly
    """

    application_under_test = 'main'

    def setUp(self):
        """Method called by nose before running each test"""
        # Loading the application:
        conf_dir = config.here
        wsgiapp = loadapp('config:test.ini#%s' % self.application_under_test,
                          relative_to=conf_dir)
        self.app = TestApp(wsgiapp)
        # Setting it up:
        test_file = path.join(conf_dir, 'test.ini')
        cmd = SetupCommand('setup-app')
        cmd.run([test_file])

    def tearDown(self):
        """Method called by nose after running each test"""
        # Cleaning up the database:
        model.DBSession.remove()
        teardown_db()

    def test_forced_login(self):
        """Anonymous users are forced to login

        Test that anonymous users are automatically redirected to the login
        form when authorization is denied. Next, upon successful login they
        should be redirected to the initially requested page.

        """
        # Requesting a protected area
        resp = self.app.get('/secc/', status=302)
        assert resp.location.startswith('http://localhost/login')
        # Getting the login form:
        resp = resp.follow(status=200)
        print resp.forms
        form = resp.forms
        # Submitting the login form:
        form['login'] = u'manager'
        form['password'] = 'managepass'
        post_login = form.submit(status=302)
        # Being redirected to the initially requested page:
        assert post_login.location.startswith('http://localhost/post_login')
        initial_page = post_login.follow(status=302)
        assert 'authtkt' in initial_page.request.cookies, \
               "Session cookie wasn't defined: %s" % initial_page.request.cookies
        assert initial_page.location.startswith('http://localhost/secc/'), \
               initial_page.location 
```

# linux - 移动超过一天的文件

> ID：13902104
> 
> 赞同：0
> 
> 时间：2012-12-16T14:13:16.763
> 
> 标签：linux, shell, unix, scripting

我正在使用下面的脚本将超过一天的文件移动到其他目录，我只是用一个`echo`语句检查它是否工作正常。

```
 for i in `ls -lhrt | grep TRACK`
    do
     for j in `$i | awk '{print $7}'`
     do
      if [[ $j -lt $((`date |  awk '{print $3}'` - 1)) ]];
       then echo $j less than $((`date |  awk '{print $3}'` - 1))
      fi
     done
    done 
```

但是我看到了一些错误，并且脚本无法正常工作。如果我做一个`ls -lhrt | grep TRACK | awk '{print $7}'`，它工作正常并返回日期（数字字段）。

如果我像这样修改脚本：

```
 for i in `ls -lhrt | grep TRACK | awk '{print $7}'`
    do 
     if [[ $i -lt $((`date |  awk '{print $3}'` - 1)) ]]; 
      then echo $i less than $((`date |  awk '{print $3}'` - 1))
     fi
    done 
```

它工作正常。

我在原始脚本中遗漏的确切逻辑是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T00:00:44.873

您的脚本基于第一个 for 循环 ( `for i in ...`) 在行上迭代的假设工作，但该假设是错误的。如果你`echo "$i"`在循环体中添加一个，你会看到它对单词而不是行进行操作。

已经指出了下一个错误，并且在该行中

```
for j in `$i | awk '{print $7}'` 
```

脚本尝试执行变量 $i 的内容。您想在`echo`此处添加命令，如下所示：

```
for j in `echo $i ... 
```

但这当然不能解决您的问题，因为 $i 已经包含单个单词，并且不会有 awk 可以打印的第 7 个单词。

一个简单的解决方案（如果你坚持不使用`find`）确实是你自己写的：

```
for i in `ls -lhrt | grep TRACK | awk '{print $7}'` 
```

但如果您希望保留两个循环，您可以在脚本中更改特殊变量 IFS（内部字段分隔符），如下所示：

```
#!/bin/bash

OIFS="$IFS"
IFS="
"
for i in `ls -lhrt` ; do
  IFS="$OIFS"
  echo ">>$i<<"
  for j in `echo $i|awk '{print $7}'` ; do
    echo ">>$j<<"
  done
done 
```

赋值后的行在下一行以单行结束`IFS="`后不包含任何内容，因此将换行符分配给 IFS 特殊变量。请务必尽快在您的脚本中恢复 IFS。（如果你不这样做，你会从 shell 得到非常混乱的行为，因为空格不再分隔单词......）`"``"`

PS：你知道每次新的一个月开始你的脚本都会失败吗？

PPS：你知道你的脚本依赖于当前的语言环境吗？在我的 PC 上，行的第 7 个单词是每年这个时候的“Dez”，所以我必须`LANG=C`在运行脚本时添加一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:33:12.067

刚看到你的更新

```
$i | ... 
```

将尝试运行一个可执行文件，该可执行文件被称为任何值`$i`。在您的情况下，这将适用于 $i = 1、2 和 3 （但不能按照您的意愿行事），否则会失败。

您希望将字符串发送到管道中的下一个进程，而不是运行该名称的可执行文件。你需要做

```
echo $i | ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-15T15:31:56.183

我给出的答案是通用的。我知道您要求仅在一天前移动文件，但此解决方案根据给定标准移动当前目录中的文件。Shell 脚本采用以下参数 - 出于一般目的，我将包含 shell 脚本的 sh 文件命名为“mymov”

1.  第一个参数可以是 -O 或 -N。使用 -O，移动早于给定日期的文件。使用 -N，移动比给定日期新的文件。
2.  第二个参数是 dd/mm/yyyy 格式的日期。比该日期更早或更晚的文件（取决于第一个参数）将被移动。
3.  第三个参数是当前目录中移动文件的文件夹的名称。如果该文件夹不存在，则会创建此文件夹。

Shell 脚本 mymov 只移动文件，不移动文件夹。移动文件后，shell 脚本还会显示移动的文件总数和当前目录中存在的文件总数。

示例： c:\ABC> mymov -O 05/08/2015 XYZ 将当前目录的那些文件，即 c:\ABC 中早于 05/08/2015 的文件移动到存在于 c:\ABC 中的文件夹 XYZ 中。如果该文件夹不存在，则会创建此文件夹。

```
#! /bin/bash

instance=""

if [ $1 = "-O" ]
then
  instance="-gt"
else 
  instance="-lt"
fi

arr=$(ls)

inputDate=$2
dd=${inputDate:0:2}
mm=${inputDate:3:2}
yyyy=${inputDate:6:4}

dateQuery=$(date --date=$mm/$dd/$yyyy +'%s')
filename=`basename $0`

totalFiles=0
movedFiles=0

if [ -d $3 ]
then
  echo Directory exists
else 
  mkdir $3
fi

for file in $arr
do
  if [ -d $file ]
  then
    continue
  fi

  if [ $file = $filename ]
  then 
    echo Skipped Current File
    continue
  fi

  fileFormate=`stat --format=%Y $file`
  if [ $dateQuery $instance $fileFormate ]
  then

    mv $file $3
    ((movedFiles++))
    ((totalFiles++))
  else
    ((totalFiles++))
  fi
done

echo Total number of files moved = $movedFiles
echo Total number of files present = $totalFiles 
```

# objective-c - iPhone ImageIO 不返回图片的所有元数据

> ID：13902105
> 
> 赞同：5
> 
> 时间：2012-12-16T14:13:20.630
> 
> 标签：objective-c, metadata, exif, javax.imageio

我目前正在尝试制作一个简单的库，用于以面向对象的方式访问图片元数据（不再有字典）。我遇到了很多奇怪的错误：

1.  即使定义了`kCGImagePropertyMakerMinoltaDictionary`, `kCGImagePropertyMakerFujiDictionary`, `kCGImagePropertyMakerOlympusDictionary`,`kCGImagePropertyMakerPentaxDictionary`键，在编译我的项目时我也会收到一个错误，说它们是未定义的：

    架构 armv7 的未定义符号：“_kCGImagePropertyMakerMinoltaDictionary”，引用自：SYMetadata.old 中的-[SYMetadata metadataMakerMinolta]：未找到架构 armv7 的符号

2.  `kCGImagePropertyExifBodySerialNumber`也是一个已定义的键，`ImageIO/CGImageProperties.h`但是在 iOS 5.1.1 中加载项目时，我收到一条错误消息，指出它不可用：

    dyld：找不到符号：_kCGImagePropertyExifBodySerialNumber 引用自：/var/mobile/Applications/0D8144E6-6313-4347-B503-247F5ACC0A11/ConnectTIG.app/ConnectTIG 预期在：/System/Library/Frameworks/ImageIO.framework/ImageIO in /var /mobile/Applications/0D8144E6-6313-4347-B503-247F5ACC0A11/ConnectTIG.app/ConnectTIG

3.  Apple 有很多可能的元数据字典键可用，例如`kCGImagePropertyMakerNikonDictionary`，它们存在但不起作用。例如，我用我的 Nikon D3100 拍摄了一张照片：当我在我的 Mac 上使用 Preview 应用程序打开它时，我可以访问 Nikon 元数据，但是当我在 iPhone 上获取所有键和值时，我没有这些信息。

我在 Moutain Lion 10.8.2 上运行 XCode 4.5.2（最后一个稳定版本 AFAIK）。我尝试在设备和模拟器上编译/运行，结果相同。

由于这将是一个公共图书馆，我已经在我的 github 存储库中拥有了所有内容：[https ://github.com/dvkch/SYPictureMetadata](https://github.com/dvkch/SYPictureMetadata)

欢迎那些愿意发现这些错误从何而来的人来玩代码并随时提交推送请求。

如果您有任何可能的想法，将不胜感激！

斯坦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:02:22.163

我相当确定 SDK 有问题。您收到的错误是 SDK 中定义的符号，但实际上并不存在。我检查了你的项目，你已经包含了 ImageIO.framework ，它们都被定义了，实际上所有其他键都可以正常工作。kCGImagePropertyMakerNikonCameraSerialNumber 有效，但 kCGImagePropertyMakerMinoltaDictionary 无效。

如果您查看 CGImageProperties 文档的顶部，它会说框架是“ApplicationServices/ImageIO”。这是不可能的，iOS 上不存在 ApplicationServices。本文档中至少存在一个错误。显然他们已经逐字复制了 OSX 文档。

我肯定会提交有关此问题和文档的错误报告。

OSX 上的 FWIW 这些键（在 iOS 上可能相同）如下：

```
{MakerCanon}
{MakerNikon}
{MakerMinolta}
{MakerFuji}
{MakerOlympus}
{MakerPentax} 
```

# php - mysql联合搜索（多个表）保持相关性

> ID：13902108
> 
> 赞同：3
> 
> 时间：2012-12-16T14:13:37.047
> 
> 标签：php, mysql

我有不止一个表，有不同的列，全文索引是相应设置的。如果我只想搜索一个表，那没有问题，因为分数会按相关性对数据进行排序。但是我有多个表，我`UNION`用于这些 sql`SELECT`语句如下：

```
$this->dbi->prepare("
    SELECT `id`,'".PRE."pages' as `table`, MATCH(`title`,`content`) AGAINST (?) AS `score` FROM `".PRE."pages` WHERE MATCH(`title`,`content`) AGAINST (?)
    UNION SELECT `id`,'".PRE."news' as `table`, MATCH(`title`,`content`) AGAINST (?) AS `score` FROM `".PRE."news` WHERE MATCH(`title`,`content`) AGAINST (?)
    UNION SELECT `id`,'".PRE."comments' as `table`, MATCH(`title`, `content`) AGAINST (?) AS `score` FROM `".PRE."comments` WHERE MATCH(`title`, `content`) AGAINST(?)
    UNION SELECT `id`,'".PRE."auction_auto' as `table`, MATCH(`manufacturer`,`model`,`location`,`other`,`contact`) AGAINST (?) AS `score` FROM `".PRE."auction_auto` WHERE MATCH(`manufacturer`,`model`,`location`,`other`,`contact`) AGAINST (?)
;")->... 
```

我怎么能与这么多表有相关性？现在无论分数数据都将按照我选择的表格的顺序显示。

谢谢。

[有关作者本人的可能解决方案，请参阅此链接](https://stackoverflow.com/questions/13902427/is-this-a-right-solution-for-search-relevance-across-many-tables-w-fulltext)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:50:56.250

两种选择：

1.  创建一个视图，然后您可以通过从视图中进行选择来进行排序。
2.  将您的查询放入 from （嵌套查询作为带有 as 的表），然后按顺序排列。见：[http ://dev.mysql.com/doc/refman/5.0/en/from-clause-subqueries.html](http://dev.mysql.com/doc/refman/5.0/en/from-clause-subqueries.html)

这是我自己的数据的示例（仅用于示例目的）：

```
select * from
(
  (select * from products where products_id >10)
  UNION
  (select * from products where products_id <= 10)
)
as SOURCE
order by products_id 
```

因此，对于您自己的示例，它将类似于：

```
 $this->dbi->prepare("
select * from 
(
        SELECT `id`,'".PRE."pages' as `table`, MATCH(`title`,`content`) AGAINST (?) AS `score` FROM `".PRE."pages` WHERE MATCH(`title`,`content`) AGAINST (?)
        UNION SELECT `id`,'".PRE."news' as `table`, MATCH(`title`,`content`) AGAINST (?) AS `score` FROM `".PRE."news` WHERE MATCH(`title`,`content`) AGAINST (?)
        UNION SELECT `id`,'".PRE."comments' as `table`, MATCH(`title`, `content`) AGAINST (?) AS `score` FROM `".PRE."comments` WHERE MATCH(`title`, `content`) AGAINST(?)
        UNION SELECT `id`,'".PRE."auction_auto' as `table`, MATCH(`manufacturer`,`model`,`location`,`other`,`contact`) AGAINST (?) AS `score` FROM `".PRE."auction_auto` WHERE MATCH(`manufacturer`,`model`,`location`,`other`,`contact`) AGAINST (?)
) as allTables order by `id`;") 
```

# css - 带浮动的 div 中的边距

> ID：13902110
> 
> 赞同：0
> 
> 时间：2012-12-16T14:13:58.637
> 
> 标签：css

我在放入时感到困惑`margin-top`，`div#q`它也影响了`div#m`.

我只是希望它们分开，`div#m`将在顶部和`div#q`底部，它们之间有一个空间。

我尝试了这种方法，但失败了，有人对我的代码有建议吗？

我有这个 html：

```
<div id="m">
    <div id="c" style="background:red;">
        <h3>test 1 </h3>
        <ul>
            <li>asd</li>
            <li>asds</li>
            <li>asd</li>
        </ul>
    </div>
        <div id="c" style="background:blue;">
        <h3>test 2 </h3>
        <ul>
            <li>asd</li>
            <li>asds</li>
            <li>asd</li>
        </ul>
    </div>
    <div id="c" style="background:yellow;">
        <h3>test 3 </h3>
        <ul>
            <li>asd</li>
            <li>asds</li>
            <li>asd</li>
        </ul>
    </div>
    <div id="c" style="background:green;">
        <h3>test 4 </h3>
        <ul>
            <li>asd</li>
            <li>asds</li>
            <li>asd</li>
        </ul>
    </div>

</div>
<div id="q" style="background:violet;">
</div> 
```

CSS：

```
#m{
    width :400px;
}
#c{
    width:33.33%;
    float : left;
}
#q{
    width: 300px;
    height : 200px;
    margin-top: 20px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T14:16:48.113

清除你的花车。例如`overflow: hidden`- [**DEMO**](http://jsfiddle.net/k3vjY/)

```
#m{
    width: 400px;
    overflow: hidden;
} 
```

也不要忘记`id`-s 应该是***唯一的***。如果您需要将相同的样式应用于多个元素，请`class`改用。

# c++ - 在两个对象之间共享成员

> ID：13902111
> 
> 赞同：0
> 
> 时间：2012-12-16T14:14:05.207
> 
> 标签：c++

我有两个班级，A和B是这样的：

```
class A
{
public:
    A(int i)
    {
        this->i = i;
    }
private:
    int i;
};

class B
{
public:
    B()
    {
        i = 0;
        a = new A(i);
        i++;
        // i = 1
        // a->i must be 1
    }

private:
    A* a;
    int i;
}; 
```

我尝试在两个对象之间共享一个成员。我想当我在 B 中被修改时，我必须在 A 中被修改。我该怎么做这样的事情？可以参考吗？我希望我很清楚。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:25:36.140

在不创建循环依赖的情况下，您需要两个类共享/已知的第三个对象（如果需要，您可以使用某些东西的地址）。

虽然在许多情况下我更喜欢引用指针，但我倾向于避免引用，因为当共享对象的生命周期难以决定时，它们不一定是共享数据的好选择。A`std::shared_ptr`可能很合适。

虽然，它也可能很简单

```
int x;
A* a = new A(&x);
B* b = new B(&x); 
```

然而，在这个例子中，引用更合适，但考虑到这里的范围没有说明任何关于生命周期的内容`a`，`b`我会选择所有堆，并且`shared_ptr`不会偶然发现*谁将删除共享内存的问题?* ...

```
#include <memory>
auto x = std::make_shared<int>(0);
A* a = new A(x);
B* b = new B(x); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:26:12.503

就像 Luchian 所说，您需要注意您引用的变量的范围和生命周期。在您的示例中，只要 B 永远不会超过 A，您就可以了。

```
class A
{
public:
    A(int &i) : m_i(i)
    {
    }
private:
    int &m_i;
};

class B
{
public:
    B()
    {
        i = 0;
        a = new A(i);
        i++;
        // i = 1
        // a->i must be 1
    }

private:
    A* a;
    int i;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T14:17:19.380

是的，可以通过引用来实现，但是您会遇到范围界定问题。

您还可以`std::shared_ptr`在类之间共享变量。

# php - session_start() 和 header('location:') 重定向

> ID：13902114
> 
> 赞同：3
> 
> 时间：2012-12-16T14:14:24.010
> 
> 标签：php

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我在注销 php 文件时`session_start()`遇到问题。`header('Location:')`

我正在使用 html 文件中的简单锚标记链接到注销文件。注销 php 文件是这样的：

```
<?php
session_start();
session_destroy();
header("Location: index.php");
?> 
```

要查看我使用的错误在哪里，

```
error_reporting(E_ALL);
ini_set('display_errors', '1'); 
```

我在第 4 行（在哪里）收到警告“警告：session_start（）：无法发送会话缓存限制器 - 标头已发送”`session_start();`和警告：无法修改标头信息 - 第 6 行（在哪里`header('Location')`）已发送标头。

我环顾了其他有类似问题的人。我确保 . 之前没有空格`session_start()`。在它之前没有输出任何东西。`session_start()`如果尚未设置，我只尝试设置。我试过用`ob_start()`. 我尝试了重定向的相对和绝对路径以确保。但没有任何效果。

我错过了什么吗？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T14:17:06.397

查看物料清单

[http://en.wikipedia.org/wiki/Byte_order_mark](http://en.wikipedia.org/wiki/Byte_order_mark)

在记事本++ - 编码 - > utf8 没有BOM

**编辑**

只是评论 - 你应该使用退出；[按照http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)中的建议，在 header("Location...") 之后确保不会运行其他任何内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:25:13.733

PHP *session_destroy()* 只是问题的一部分。您还需要从 $_SESSION 数组中显式删除数据。您可能还需要清理 cookie。如果您同时打开了多个浏览器实例（窗口或选项卡），则无法成功测试——它们都共享同一个 cookie jar，因此共享同一个 PHP 会话。

您也许可以阅读此链接： [http ://www.experts-exchange.com/Web_Development/Web_Languages-Standards/PHP/A_2391-PHP-login-logout-and-easy-access-control.html](http://www.experts-exchange.com/Web_Development/Web_Languages-Standards/PHP/A_2391-PHP-login-logout-and-easy-access-control.html)

此代码是一个很好的注销示例。

```
<?php
session_start();
// CLEAR THE INFORMATION FROM THE $_SESSION ARRAY
$_SESSION = array();

// IF THE SESSION IS KEPT IN COOKIE, FORCE SESSION COOKIE TO EXPIRE
if (isset($_COOKIE[session_name()]))
{
   setcookie(session_name(), '', $cookie_expires, '/');
}

// TELL PHP TO ELIMINATE THE SESSION
session_destroy();

// SAY GOODBYE...
echo "YOU ARE LOGGED OUT$uid.  GOODBYE.";

// OR REMOVE THE GOODBYE MESSAGE AND ACTIVATE THESE LINES TO REDIRECT TO THE HOME PAGE
// header("Location: /");
// exit; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T14:19:30.610

有时，已知结束`?>`标签会导致此问题。在一个只包含 PHP 的文件中，删除`?>`几乎总能解决`headers already sent`我的问题。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-16T14:30:14.007

复制粘贴这个

```
<?
session_start();
session_unset();
session_destroy();
ob_start();
header("location:home.php");
ob_end_flush();
exit();
?> 
```

# android - 如何使用 NotificationCompat.Builder 创建通知？

> ID：13902115
> 
> 赞同：59
> 
> 时间：2012-12-16T14:15:02.133
> 
> 标签：android, notifications, android-notifications, android-notification-bar

我需要创建一个简单的通知，如果可能的话，它将与声音和图标一起显示在通知栏中？我还需要它与 Android 2.2 兼容，所以我发现 NotificationCompat.Builder 可以与 4 以上的所有 API 一起使用。如果有更好的解决方案，请随时提及。

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-12-16T14:36:09.957

[NotificationCompat.Builder](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html)`Notifications`是在所有 Android 版本上创建的最简单方法。您甚至可以使用 Android 4.1 提供的功能。如果您的应用在 Android >=4.1 的设备上运行，则将使用新功能，如果在 Android <4.1 上运行，则通知将是一个简单的旧通知。

要创建一个简单的通知，只需执行以下操作（请参阅[Android API Guide on Notifications](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#SimpleNotification)）：

```
NotificationCompat.Builder mBuilder =
    new NotificationCompat.Builder(this)
    .setSmallIcon(R.drawable.notification_icon)
    .setContentTitle("My notification")
    .setContentText("Hello World!")
    .setContentIntent(pendingIntent); //Required on Gingerbread and below 
```

您必须至少设置`smallIcon`和。如果您错过了一个通知将不会显示。`contentTitle``contentText`

**注意：**在 Gingerbread 及以下您必须设置内容意图，否则`IllegalArgumentException`会抛出 a。

要创建不执行任何操作的意图，请使用：

```
final Intent emptyIntent = new Intent();
PendingIntent pendingIntent = PendingIntent.getActivity(ctx, NOT_USED, emptyIntent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

您可以通过构建器添加声音，即来自 RingtoneManager 的声音：

```
mBuilder.setSound(RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION)) 
```

通过 NotificationManager 将 Notification 添加到 bar：

```
NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
notificationManager.notify(mId, mBuilder.build()); 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-12-31T13:30:04.447

工作示例：

```
 Intent intent = new Intent(ctx, HomeActivity.class);
    PendingIntent contentIntent = PendingIntent.getActivity(ctx, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);

    NotificationCompat.Builder b = new NotificationCompat.Builder(ctx);

    b.setAutoCancel(true)
     .setDefaults(Notification.DEFAULT_ALL)
     .setWhen(System.currentTimeMillis())         
     .setSmallIcon(R.drawable.ic_launcher)
     .setTicker("Hearty365")            
     .setContentTitle("Default notification")
     .setContentText("Lorem ipsum dolor sit amet, consectetur adipiscing elit.")
     .setDefaults(Notification.DEFAULT_LIGHTS| Notification.DEFAULT_SOUND)
     .setContentIntent(contentIntent)
     .setContentInfo("Info");

    NotificationManager notificationManager = (NotificationManager) ctx.getSystemService(Context.NOTIFICATION_SERVICE);
    notificationManager.notify(1, b.build()); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-01-30T18:13:05.803

在 android 8.0 中显示通知

```
@TargetApi(Build.VERSION_CODES.O)
@RequiresApi(api = Build.VERSION_CODES.JELLY_BEAN)

  public void show_Notification(){

    Intent intent=new Intent(getApplicationContext(),MainActivity.class);
    String CHANNEL_ID="MYCHANNEL";
    NotificationChannel notificationChannel=new NotificationChannel(CHANNEL_ID,"name",NotificationManager.IMPORTANCE_LOW);
    PendingIntent pendingIntent=PendingIntent.getActivity(getApplicationContext(),1,intent,0);
    Notification notification=new Notification.Builder(getApplicationContext(),CHANNEL_ID)
            .setContentText("Heading")
            .setContentTitle("subheading")
            .setContentIntent(pendingIntent)
            .addAction(android.R.drawable.sym_action_chat,"Title",pendingIntent)
            .setChannelId(CHANNEL_ID)
            .setSmallIcon(android.R.drawable.sym_action_chat)
            .build();

    NotificationManager notificationManager=(NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
        notificationManager.createNotificationChannel(notificationChannel);
    notificationManager.notify(1,notification);

} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-02-08T20:33:23.523

我做了这个方法并且工作正常。（在安卓 6.0.1 中测试）

```
public void notifyThis(String title, String message) {
    NotificationCompat.Builder b = new NotificationCompat.Builder(this.context);
    b.setAutoCancel(true)
            .setDefaults(NotificationCompat.DEFAULT_ALL)
            .setWhen(System.currentTimeMillis())
            .setSmallIcon(R.drawable.favicon32)
            .setTicker("{your tiny message}")
            .setContentTitle(title)
            .setContentText(message)
            .setContentInfo("INFO");

    NotificationManager nm = (NotificationManager) this.context.getSystemService(Context.NOTIFICATION_SERVICE);
    nm.notify(1, b.build());
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-03-09T04:51:32.327

# 深度通知

> 代码

```
Intent intent = new Intent(this, SecondActivity.class);
PendingIntent pendingIntent = PendingIntent.getActivity(this,0,intent,0);

NotificationCompat.Builder mBuilder =
                new NotificationCompat.Builder(context)
                        .setSmallIcon(R.drawable.your_notification_icon)
                        .setContentTitle("Notification Title")
                        .setContentText("Notification ")
                        .setContentIntent(pendingIntent );

NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
notificationManager.notify(0, mBuilder.build()); 
```

# 深度知识

可以使用通知构建通知。Builder 或 NotificationCompat.Builder 类。
但是，如果您想要向后兼容，您应该使用 NotificationCompat.Builder 类，因为它是**v4 支持库**的一部分，因为它负责为 API 4 及更高版本提供一致的外观和通知功能。

## 核心通知属性

一个通知有 4 个核心属性（3 个基本显示属性 + 1 个点击操作属性）

*   小图标
*   标题
*   文本
*   按钮点击事件（点击通知时的点击事件）

> 在 Android 3.0 及更高版本上，按钮单击事件是可选的。这意味着如果您的 minSdk 针对 Android 3.0 或更高版本，您可以仅使用显示属性构建通知。但是，如果您希望通知在 Android 3.0 之前的旧设备上运行，则必须提供 Click 事件，否则您将看到 IllegalArgumentException。

## 通知显示

通过调用 NotificationManger 类的 notify() 方法显示通知

### 通知（）参数

通知方法有两种可用的变体

```
notify(String tag, int id, Notification notification) 
```

或者

```
notify(int id, Notification notification) 
```

notify 方法采用整数 id 来唯一标识您的通知。但是，您也可以提供一个可选的字符串标签，以便在发生冲突时进一步识别您的通知。

> 这种类型的冲突很少见，但假设您创建了一些库，而其他开发人员正在使用您的库。现在他们创建了自己的通知，并且不知何故您的通知和其他开发人员的通知 id 相同，那么您将面临冲突。

## API 11 之后的通知（更多控制）

API 11 提供了对通知行为的额外控制

*   **通知关闭**
    默认情况下，如果用户点击通知，则会执行分配的点击事件，但不会清除通知。如果你希望你的通知在什么时候被清除，那么你应该添加这个

    mBuilder.setAutoClear(true);

*   **防止用户关闭通知**
    用户也可以通过滑动通知来关闭通知。您可以通过在构建通知时添加此默认行为来禁用此默认行为

    mBuilder.setOngoing(true);

*   **通知的定位**
    您可以通过以下方式设置通知的相对优先级

    mBuilder.setOngoing(int pri);

> 如果您的应用程序在低于 11 的 API 上运行，那么您的通知将在没有上述附加功能的情况下工作。这是选择 NotificationCompat.Builder 而不是 Notification.Builder 的优势

## API 16 之后的通知（更多信息）

随着 API 16 的引入，通知被赋予了如此多的新功能，
通知可以提供更多信息。
您可以将 bigPicture 添加到您的徽标中。假设您现在使用 mBuilder.setLargeIcon(Bitmap bitmap) 从某人那里收到一条消息，您可以显示该人的照片。因此，在状态栏中，您将在滚动时看到图标，您将看到人物照片代替图标。还有其他功能

*   在通知中添加计数器
*   第一次看到通知时的提示消息
*   可扩展通知
*   多行通知等

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-14T06:32:02.537

你可以试试这个代码，这对我来说很好：

```
 NotificationCompat.Builder mBuilder= new NotificationCompat.Builder(this);

    Intent i = new Intent(noti.this, Xyz_activtiy.class);
    PendingIntent pendingIntent= PendingIntent.getActivity(this,0,i,0);

    mBuilder.setAutoCancel(true);
    mBuilder.setDefaults(NotificationCompat.DEFAULT_ALL);
    mBuilder.setWhen(20000);
    mBuilder.setTicker("Ticker");
    mBuilder.setContentInfo("Info");
    mBuilder.setContentIntent(pendingIntent);
    mBuilder.setSmallIcon(R.drawable.home);
    mBuilder.setContentTitle("New notification title");
    mBuilder.setContentText("Notification text");
    mBuilder.setSound(RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION));

    NotificationManager notificationManager= (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
    notificationManager.notify(2,mBuilder.build()); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-05-31T23:06:28.303

制作通知的简单方法

```
 NotificationCompat.Builder builder = (NotificationCompat.Builder) new NotificationCompat.Builder(this)
            .setSmallIcon(R.mipmap.ic_launcher) //icon
            .setContentTitle("Test") //tittle
            .setAutoCancel(true)//swipe for delete
            .setContentText("Hello Hello"); //content
    NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);

    notificationManager.notify(1, builder.build()
    ); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-17T12:00:23.260

使用此代码

```
 Intent intent = new Intent(getApplicationContext(), SomeActvity.class);
            PendingIntent pIntent = PendingIntent.getActivity(getApplicationContext(),
                    (int) System.currentTimeMillis(), intent, 0);

            NotificationCompat.Builder mBuilder =
                    new NotificationCompat.Builder(getApplicationContext())
                            .setSmallIcon(R.drawable.your_notification_icon)
                            .setContentTitle("Notification title")
                            .setContentText("Notification message!")
                            .setContentIntent(pIntent);

            NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
            notificationManager.notify(0, mBuilder.build()); 
```

# c++ - C ++检查文件是否存在而不打开它？

> ID：13902118
> 
> 赞同：0
> 
> 时间：2012-12-16T14:15:37.830
> 
> 标签：c++, performance

有没有办法检查文件是否存在（目前仅在 Windows 上）而不会产生打开它的成本？

目前我正在使用：

```
ifstream ifile(FilePath);

if(ifile){ 
```

但问题是我然后将文件放入 boost mapped_region，从而打开文件两次。如果我可以在不必打开文件的情况下检查文件是否存在会更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T14:34:59.973

请记住，即使您进行检查然后尝试打开，在您检查文件和尝试打开之间始终存在文件可能被移动/删除的可能性，这对于这些类型的操作来说总是一种危险。

在创建映射区域的过程中简单地打开文件缓冲区可能更有效，但要准备好捕获`interprocess_exception`错误时抛出的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T14:34:46.400

您知道，如果您将 procmon（来自 Sysinternals）附加到您的程序并查看 Windows 在后台执行的操作、调用`CreateFile`或`GetFileAttributes`将导致相同数量的开销，则在性能方面没有明显差异。

您可以使用 NTFS 日志做一些事情来加速某些事情，但这只会对特定的工作负载有所帮助，而不是通常用于检查磁盘上文件的可用性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-29T10:25:23.540

[访问（stduni.h）](http://pubs.opengroup.org/onlinepubs/009695399/functions/access.html)

您要检查的是*access(FilePath, F_OK)==0*

这应该是检查文件是否存在的一种非常通用的方法。正如组件 10 所说，您无法确定每次检查中文件是否存在，因为在并行场景中可能会发生很多事情，但 TBH 没那么重要。如果发生错误，您可能希望使用系统 GetLastError (MSDN) 函数，甚至将其留给编译器/系统来处理，如果您自己处理，您可以询问名称并重试。

# android - 投影中的未知列出现在 SQLite 中

> ID：13902128
> 
> 赞同：0
> 
> 时间：2012-12-16T14:16:45.233
> 
> 标签：android, sqlite

我正在尝试创建一个数据库，但它不起作用（应用程序强制停止）。我尝试检查日志猫，错误是“投影中的未知列”，它建议我检查 MyToDoContentProvider.java。我已经用我的 SQLite 语句检查了我的 MyToDoContentProvider.java，但我不知道它有什么问题。谁能帮我？tq..

这是我的 MyToDoContentProvider.java

```
package com.date.contentprovider;

import java.util.Arrays;
import java.util.HashSet;

import android.content.ContentProvider;
import android.content.ContentResolver;
import android.content.ContentValues;
import android.content.UriMatcher;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteQueryBuilder;
import android.net.Uri;
import android.text.TextUtils;
import com.date.database.FirstClass;
import com.date.database.TodoDatabaseHelper;

public class MyTodoContentProvider extends ContentProvider {

// database
private TodoDatabaseHelper database;

// Used for the UriMacher
private static final int TODOS = 10;
private static final int TODO_ID = 20;

private static final String AUTHORITY = "com.date.contentprovider";

private static final String BASE_PATH = "todos";
public static final Uri CONTENT_URI = Uri.parse("content://" + AUTHORITY
  + "/" + BASE_PATH);

public static final String CONTENT_TYPE = ContentResolver.CURSOR_DIR_BASE_TYPE
  + "/todos";
public static final String CONTENT_ITEM_TYPE = ContentResolver.CURSOR_ITEM_BASE_TYPE
  + "/todo";

private static final UriMatcher sURIMatcher = new UriMatcher(UriMatcher.NO_MATCH);
static {
sURIMatcher.addURI(AUTHORITY, BASE_PATH, TODOS);
sURIMatcher.addURI(AUTHORITY, BASE_PATH + "/#", TODO_ID);
}

@Override
public boolean onCreate() {
database = new TodoDatabaseHelper(getContext());
return false;
}

@Override
public Cursor query(Uri uri, String[] projection, String selection,
  String[] selectionArgs, String sortOrder) {

// Uisng SQLiteQueryBuilder instead of query() method
SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();

// Check if the caller has requested a column which does not exists
checkColumns(projection);

// Set the table
queryBuilder.setTables(FirstClass.TABLE_TODO);

int uriType = sURIMatcher.match(uri);
switch (uriType) {
case TODOS:
  break;
case TODO_ID:
  // Adding the ID to the original query
  queryBuilder.appendWhere(FirstClass.COLUMN_ID + "="
      + uri.getLastPathSegment());
  break;
default:
  throw new IllegalArgumentException("Unknown URI: " + uri);
}

SQLiteDatabase db = database.getWritableDatabase();
Cursor cursor = queryBuilder.query(db, projection, selection,
    selectionArgs, null, null, sortOrder);
// Make sure that potential listeners are getting notified
cursor.setNotificationUri(getContext().getContentResolver(), uri);

return cursor;
}

@Override
public String getType(Uri uri) {
return null;
}

@Override
public Uri insert(Uri uri, ContentValues values) {
int uriType = sURIMatcher.match(uri);
SQLiteDatabase sqlDB = database.getWritableDatabase();
int rowsDeleted = 0;
long id = 0;
switch (uriType) {
case TODOS:
  id = sqlDB.insert(FirstClass.TABLE_TODO, null, values);
  break;
default:
  throw new IllegalArgumentException("Unknown URI: " + uri);
}
getContext().getContentResolver().notifyChange(uri, null);
return Uri.parse(BASE_PATH + "/" + id);
}

@Override
public int delete(Uri uri, String selection, String[] selectionArgs) {
int uriType = sURIMatcher.match(uri);
SQLiteDatabase sqlDB = database.getWritableDatabase();
int rowsDeleted = 0;
switch (uriType) {
case TODOS:
  rowsDeleted = sqlDB.delete(FirstClass.TABLE_TODO, selection,
      selectionArgs);
  break;
case TODO_ID:
  String id = uri.getLastPathSegment();
  if (TextUtils.isEmpty(selection)) {
    rowsDeleted = sqlDB.delete(FirstClass.TABLE_TODO,
            FirstClass.COLUMN_ID + "=" + id, 
        null);
  } else {
    rowsDeleted = sqlDB.delete(FirstClass.TABLE_TODO,
            FirstClass.COLUMN_ID + "=" + id 
        + " and " + selection,
        selectionArgs);
  }
  break;
 default:
  throw new IllegalArgumentException("Unknown URI: " + uri);
 }
 getContext().getContentResolver().notifyChange(uri, null);
 return rowsDeleted;
}

@Override
public int update(Uri uri, ContentValues values, String selection,
  String[] selectionArgs) {

int uriType = sURIMatcher.match(uri);
SQLiteDatabase sqlDB = database.getWritableDatabase();
int rowsUpdated = 0;
switch (uriType) {
case TODOS:
  rowsUpdated = sqlDB.update(FirstClass.TABLE_TODO, 
      values, 
      selection,
      selectionArgs);
  break;
case TODO_ID:
  String id = uri.getLastPathSegment();
  if (TextUtils.isEmpty(selection)) {
    rowsUpdated = sqlDB.update(FirstClass.TABLE_TODO, 
        values,
        FirstClass.COLUMN_ID + "=" + id, 
        null);
  } else {
    rowsUpdated = sqlDB.update(FirstClass.TABLE_TODO, 
        values,
        FirstClass.COLUMN_ID + "=" + id 
        + " and " 
        + selection,
        selectionArgs);
  }
  break;
default:
  throw new IllegalArgumentException("Unknown URI: " + uri);
}
getContext().getContentResolver().notifyChange(uri, null);
return rowsUpdated;
}

private void checkColumns(String[] projection) {
String[] available = { FirstClass.COLUMN_NAME,
        FirstClass.COLUMN_DESCRIPTION, FirstClass.COLUMN_CATEGORY,     FirstClass.COLUMN_TRIGGER,
        FirstClass.COLUMN_MON, FirstClass.COLUMN_TUE, FirstClass.COLUMN_WED, FirstClass.COLUMN_THU,
        FirstClass.COLUMN_FRI, FirstClass.COLUMN_SAT, FirstClass.COLUMN_SUN, FirstClass.COLUMN_DATE,
        FirstClass.COLUMN_TIME, FirstClass.COLUMN_LATITUDE, FirstClass.COLUMN_LONGITUDE, 
        FirstClass.COLUMN_STATUS };

if (projection != null) {
  HashSet<String> requestedColumns = new HashSet<String>(Arrays.asList(projection));
  HashSet<String> availableColumns = new HashSet<String>(Arrays.asList(available));
  // Check if all columns which are requested are available
  if (!availableColumns.containsAll(requestedColumns)) {
    throw new IllegalArgumentException("Unknown columns in projection");
  }
} 
```

}

}

这是我的 FirstClass.java

```
package com.date.database;

import android.database.sqlite.SQLiteDatabase;
import android.util.Log;

public class FirstClass {
 // Database table
  public static final String TABLE_TODO = "todo";
  public static final String COLUMN_ID = "_id";
  public static final String COLUMN_CATEGORY = "category";
  public static final String COLUMN_NAME = "name";
  public static final String COLUMN_DESCRIPTION = "description";
  public static final String COLUMN_TRIGGER ="trigger";
  public static final String COLUMN_MON = "mon";
  public static final String COLUMN_TUE = "tue";
  public static final String COLUMN_WED = "wed";
  public static final String COLUMN_THU = "thu";
  public static final String COLUMN_FRI ="fri";
  public static final String COLUMN_SAT = "sat";
  public static final String COLUMN_SUN = "sun";
  public static final String COLUMN_DATE = "date";
  public static final String COLUMN_TIME = "time";
  public static final String COLUMN_LATITUDE ="latitude";
  public static final String COLUMN_LONGITUDE= "longitude";
  public static final String COLUMN_STATUS = "status";

  // Database creation SQL statement
  private static final String DATABASE_CREATE = "create table " 
      + TABLE_TODO
      + "(" 
      + COLUMN_ID + " integer primary key autoincrement, " 
      + COLUMN_CATEGORY + " text not null, " 
      + COLUMN_NAME + " text not null," 
      + COLUMN_DESCRIPTION + " text not null," 
      + COLUMN_TRIGGER + " text not null ,"//'t', "
      + COLUMN_MON + " integer not null , "// == 1,"
      + COLUMN_TUE + " integer not null , "//== 2,"
      + COLUMN_WED + " integer not null , "// == 3,"
      + COLUMN_THU + " integer not null , "// == 4,"
      + COLUMN_FRI + " integer not null , "// == 5,"
      + COLUMN_SAT + " integer not null , "// == 6,"
      + COLUMN_SUN + " integer not null , "// == 0,"
      + COLUMN_DATE + " date not null,"
      + COLUMN_TIME + " time not null,"
      + COLUMN_LATITUDE + " decimal not null , "// ==0.00000000,"
      + COLUMN_LONGITUDE + " decimal not null , "// ==0.00000000,"
      + COLUMN_STATUS + " text not null  "// 'act' "
      + ");";

  public static void onCreate(SQLiteDatabase database) {
    database.execSQL(DATABASE_CREATE);

  }

  public static void onUpgrade(SQLiteDatabase database, int oldVersion,
      int newVersion) {
    Log.w(FirstClass.class.getName(), "Upgrading database from version "
        + oldVersion + " to " + newVersion
        + ", which will destroy all old data");
    database.execSQL("DROP TABLE IF EXISTS " + TABLE_TODO);
   // database.execSQL("INSERT INTO "+TABLE_TODO+" VALUES (null, datetime()) ");
    onCreate(database);
  } 
```

}

这是我的 TodoDatabaseHelper.java

```
package com.date.database;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class TodoDatabaseHelper extends SQLiteOpenHelper {

  private static final String DATABASE_NAME = "todotable.db";
  private static final int DATABASE_VERSION = 1;
  final int oldVersion =1;
  final int newVersion =1;

  public TodoDatabaseHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
  }

  // Method is called during creation of the database
  @Override
  public void onCreate(SQLiteDatabase database) {
    FirstClass.onCreate(database);
  }

  // Method is called during an upgrade of the database,
  // e.g. if you increase the database version
  @Override
  public void onUpgrade(SQLiteDatabase database, int oldVersion,
      int newVersion) {
    FirstClass.onUpgrade(database, oldVersion, newVersion);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:30:01.613

检查您查询数据库的位置。您必须要求该特定表中不存在的列。

# exponential - 使用 Esper 计算指数移动平均线

> ID：13902130
> 
> 赞同：5
> 
> 时间：2012-12-16T14:16:50.607
> 
> 标签：exponential, esper, moving-average, complex-event-processing

寻找一种使用 Esper (EPL) 语句计算 5 EMA5 和 EMA20 窗口上的指数移动平均线的方法。

我有一个 priceEvent 流（timeStamp、symbol 和 price）进来，我在 5 的滑动窗口上写了一个简单的移动平均 SMA。但是对于 Esper 来说相当新，正在寻找一种方法来计算滑动窗口上的指数移动平均线 (EMA)。

[http://www.iexplain.org/ema-how-to-calculate/](http://www.iexplain.org/ema-how-to-calculate/)

如果有人可以帮助我编写抛物线SAR函数，那也会有很大帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T08:52:14.223

好的，伙计们，我做了更多的学习和研究来找到指数移动平均线的解决方案，下面是有助于计算 ema5 的 EPL 语句

```
//create a named window EMA5 Window
create window EMA5Window.win:length(1) as select price as ema5 from Quote

//insert the mean of first 5 events 
insert into EMA5Window select Avg(price) as ema5 from Quote.win:firstlength(5)

//after 5 events calculate todays ema = (today's price)/3 +  (yesterday's ema)*2/3, refer to http://www.iexplain.org/ema-how-to-calculate/ for ema formula 

insert into EMA5Window select ((price)*(1/3)+(2/3)*(select ema5 from EMA5Window)) as ema5 from Quote output after 5 events

// now select the ema5 as below
select ema5 as ema5 from EMA5Window output after 5 events 
```

一旦我完成计算抛物线SAR的工作将更新。谢谢

# c - 从函数返回的字符串是错误的

> ID：13902131
> 
> 赞同：0
> 
> 时间：2012-12-16T14:16:50.610
> 
> 标签：c, memory-management

这是我的代码：

```
char *genWord(int wordLen){
    char array[wordLen + 1];
    char *word;
    int i;

    for(i = 0; i <= wordLen; i++){
        array[i] = 'a';
    }

    array[wordLen] = '\0';

    //Test1 printf
    printf("%s \n", array);

    word = array;

    //Test 2
    printf("%s \n", word);

    return word;
}

main(){
    char *word;
    int wordLen = 10;

    word = (char *)genWord(wordLen);

    //Test 3
    printf("%s", word);       
} 
```

这是我在 Linux gcc 中执行的 3 个（相同程序）的输出：

第一个：

```
aaaaaaaaaaaaaaaaaaaaa 
aaaaaaaaaaaaaaaaaaaaa 
aaaaaaaaaaaaT��aaaaa 
```

第二：

```
aaaaaaaaaaaaaaaaaaaaa 
aaaaaaaaaaaaaaaaaaaaa 
aaaaaaaaaaaa�ƃ�aaaaa 
```

第三：

```
aaaaaaaaaaaaaaaaaaaaa 
aaaaaaaaaaaaaaaaaaaaa 
aaaaaaaaaaaa����aaaaa 
```

无法弄清楚出了什么问题，更糟糕的是，无法想象我如何在每次运行时获得不同的输出？变量词不能在字符串的一部分中有垃圾，对吗？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T14:20:24.563

您返回对已在堆栈 ( `array`) 中分配的内存的引用。

从`genWord()`.

这就是为什么返回的引用不再引用任何有效内存的原因。

要解决此问题

*   要么动态分配所需的内存`genWord()`（*内部* `genWord()`），
*   或将缓冲区传递到`genWord()`（从*外部*） ，`genWord()`您将所需的数据复制到该缓冲区。

* * *

附带说明：所谓的 C 字符串是以零结尾的。那就是表示字符串的字符数组将一个`NUL`字符（十进制`0`）作为其最后一个（终止）元素（其位置将由 的值索引`i`，而不是`wordLen`在您的代码中）。

**函数族`str*`本质上依赖于 terminating`0`来确定字符串的“长度”。**

因此，如果像这样逐个字符地构建字符串`genWord()`，请确保`0`在完成后在最后一个元素之后添加终止符。`0`或者（虽然更昂贵，但也更方便）在使用之前用 s初始化整个缓冲区。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T14:31:48.980

您正在返回本地地址，不再保证在调用返回后分配。因此，这是一种未定义的行为。

当你这样做`word = array`时，数组的本地地址被复制到`word`变量中。返回后调用函数有地址，这是函数中的本地地址。但是在函数返回之后，地址不再有效，并且可能被分配用于其他目的，或者被覆盖或其他任何东西。

做`word = strdup (array);`或

```
word = malloc (sizeof (char) * (strlen (array) + 1));
strcpy (word, array);
return word; 
```

# python - 正则表达式处理双反斜杠

> ID：13902132
> 
> 赞同：3
> 
> 时间：2012-12-16T14:16:54.110
> 
> 标签：python, regex

这个字符串是`G:\\one\\two\\three.htm`，我想要的结果是`G/one/two/three.htm`，我怎样才能用 python 和正则表达式得到想要的结果？
我试过`re.sub('\\\\\\\\', '/', string)`了，它工作但离开了`:`。我不想再次使用正则表达式来删除`:`. 谁能帮我解决上述问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-16T15:42:56.653

这是@Matthias 的答案，适用于 Python：

```
In [6]: re.sub(r':?\\+', '/', r'G:\\one\\two\\three.htm')
Out[6]: 'G/one/two/three.htm' 
```

注意正则表达式模式是`r':?\\+'`，不是`':?\\+'`。

`r`告诉 Python 后面是一个原始字符串。

Python 解释`':?\\+'`为带有一个反斜杠的字符串：

```
In [7]: list(':?\\+')
Out[7]: [':', '?', '\\', '+'] 
```

`list`如上所述，使用允许您查看字符串中的各个字符。`'\\'`是一个由一个反斜杠组成的 Python 字符串。

Python 解释`r':?\\+'`为带有两个反斜杠的字符串：

```
In [8]: list(r':?\\+')
Out[8]: [':', '?', '\\', '\\', '+'] 
```

* * *

为您工作的原因`':?\\\\\\\\'`是因为 Python 将其解释为带有四个反斜杠的字符串：

```
In [9]: list(':?\\\\\\\\')
Out[9]: [':', '?', '\\', '\\', '\\', '\\'] 
```

然后，正则表达式引擎将每两个反斜杠解释为与一个文字反斜杠匹配的模式。所以正则表达式将四个反斜杠解释为匹配两个文字反斜杠的模式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T14:24:28.393

您可能在这里不需要正则表达式：

```
>>> s = r"G:\\one\\two\\three.htm"
>>> print s
G:\\one\\two\\three.htm
>>> s.replace(r"\\","/")
'G:/one/two/three.htm'
>>> s.replace(r"\\","/").replace(":","",1)
'G/one/two/three.htm' 
```

请注意，我使用了“原始字符串”（`r`在 之前`"`），这样我就不必转义所有的反斜杠，并且`count`可以选择`replace`在第一个冒号之后留下任何冒号，以防它们是文件名的一部分。

[我不得不承认我有点惊讶这`G/one/two/three.htm`真的是你想要的，不过。]

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-16T14:19:25.020

在不了解python的情况下，我建议

```
re.sub(':?\\+', '/', string) 
```

# android - 以编程方式在android中移动视图

> ID：13902142
> 
> 赞同：0
> 
> 时间：2012-12-16T14:18:02.263
> 
> 标签：android, view

我不想使用边距、填充来移动对象。有什么方法可以移动我的对象。

我正在寻找一些东西行左，右，上，下之类的东西，所以我可以传递值来移动我的布局中的视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:19:44.083

您可以使用动画 - [http://developer.android.com/reference/android/view/animation/TranslateAnimation.html](http://developer.android.com/reference/android/view/animation/TranslateAnimation.html)，只需将动画时间设置为 0。记得使用`.setFillAfter(true);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-23T16:23:49.280

```
int val = view.getTranslationX();
view.setTranslationX(val); 
```

适用于 X、Y 和 Z，以及带有旋转的 X/Y。

# php - 保存来自文本字段的输入并发送到服务器 [目标 c]

> ID：13902143
> 
> 赞同：0
> 
> 时间：2012-12-16T14:18:21.300
> 
> 标签：php, iphone, objective-c, ios, web-services

我正在创建一个应用程序，它从屏幕上的文本字段中获取输入 - 并将其发送到我的 php 服务器。但是我是编程新手，我不知道该怎么做。我在苹果开发中遵循了一些指南，并学习了如何创建文本字段、修改它并创建一个委托。但是从这里我不知道该怎么办。一旦有人点击“发送”按钮，键盘就会关闭，消息应该发送到我的服务器。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T16:01:11.340

检查何时按下返回键，您可以`-textField: shouldChangeCharactersInRange:replacementString:`在`UITextFieldDelegate`. 并使用`NSURLConnection`.

`.h`：

```
@interface ViewController : UIViewController <UITextFieldDelegate>

@property (nonatomic, retain) IBOutlet UITextField *textField; 
```

`.m`：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    if ([string isEqualToString:@"\n"])
    {
        [textField resignFirstResponder];
        [self sendData:textField.text];
    }
    return YES;
}

- (void)sendData:(NSString *)textData
{
    NSURL *serverURL = [NSURL URLWithString:@"http://8.8.8.8:80/1.php"]; //the address of your server
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:serverURL cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
    [request addValue: @"text/plain charset=UTF-8" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPMethod:@"POST"];
    [request setHTTPBody:[textData dataUsingEncoding:NSUTF8StringEncoding];

    NSError *error = nil;
    NSData *responsedata = [NSURLConnection  sendSynchronousRequest:request returningResponse:nil error:&error];
    if (error)
    {
        //..error handler
    }
} 
```

# objective-c - 将 NSURL 返回存储为整数/数值而不是 NSString

> ID：13902148
> 
> 赞同：-2
> 
> 时间：2012-12-16T14:18:56.230
> 
> 标签：objective-c, ios, nsinteger

我正在尝试将`NSURL`请求的内容作为`integer/numerical`值而不是`NSString`. 我在这方面遇到了很多麻烦。有谁知道最后一行代码需要做什么？谢谢！

```
NSString *distanceURL = [NSString stringWithFormat:@"http://www.website.com/distance.php?lat1=%@&lon1=%@&lat2=%@&lon2=%@",userLatitude, userLongitude, placeLatitude, placeLongitude];

NSData *distanceURLResult = [NSData dataWithContentsOfURL:[NSURL 
URLWithString:distanceURL]];

int distanceInFeet = distanceURLResult; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T14:33:35.937

尝试：

```
int distanceInFeet = [[[NSString alloc] initWithData:distanceURLResult encoding:NSUTF8StringEncoding] integerValue]; 
```

检查返回数据的正确编码。

# javascript - 从 JavaFX 访问 Javascript 变量

> ID：13902151
> 
> 赞同：1
> 
> 时间：2012-12-16T14:19:12.653
> 
> 标签：javascript, google-maps, webview, javafx-2

我想从 JavaFX 访问 javascript 变量来控制 googlemaps.html 中的经度和纬度变量。x(long.) 和 y(lati.) 变量将被定义为 double，我将在 JavaFX 中为它们分配一些值，这些值将在 Javascript 中将值分配给 2 个变量，分别命名为 x2 和 y2。然后，一个标记将显示在基于 x2 和 y2 的 googlemaps 上。
为什么我想从 JavaFX 控制值是 x 和 y 变量将从文本文件中分配。所以我需要从 Javafx 控制它们...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T01:26:49.770

您可以执行 javascript 使用[`WebEngine.executeScript()`](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebEngine.html#executeScript%28java.lang.String%29)它将为指定变量分配侦听器。

这些侦听器可以调用 JavaFX 代码，有关示例，请参见[http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebEngine.html](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebEngine.html)`Calling back to Java from JavaScript`部分。

# java - JPA 删除带有 IdClass 问题的查询

> ID：13902165
> 
> 赞同：1
> 
> 时间：2012-12-16T14:20:31.707
> 
> 标签：java, jpa

当我在 JPA 中将 Idclass 用于具有复合键的实体时，我编写了一个删除方法，例如：

```
private static void removeEmployee(Employee employee) {
    EntityManagerFactory emf = Persistence
            .createEntityManagerFactory("JPA_excer_3b");
    EntityManager em = emf.createEntityManager();
    try {
        em.getTransaction().begin();
        Employee anemployee = em.find(Employee.class, employee.getId());
        em.remove(anemployee);
        em.getTransaction().commit();
    } catch (Exception e) {
        logging.error("This error is added a removing a employee :"
                + " :" + e);
    } finally {
        // Close all the connections:
        em.close();
        emf.close();
    }
} 
```

我得到错误：

```
ERROR Logger:22 - This error is added a removing a employee :java.lang.IllegalArgumentException: Provided id of the wrong type for class be.leerstad.JPA.entities.Employee. Expected: class be.leerstad.JPA.entities.EmployeePK, got class java.lang.Integer 
```

当我将代码更改为：

```
private static void removeEmployee(Employee employee) {
    EntityManagerFactory emf = Persistence
            .createEntityManagerFactory("JPA_excer_3b");
    EntityManager em = emf.createEntityManager();
    try {
        **EmployeePK pk = new EmployeePK(employee.getId(),employee.getEmail());**
        em.getTransaction().begin();
        Employee anemployee = em.find(Employee.class, **pk**);
        em.remove(anemployee);
        em.getTransaction().commit();
    } catch (Exception e) {
        logging.error("This error is added a removing a employee :"
                + " :" + e);
    } finally {
        // Close all the connections:
        em.close();
        emf.close();
    }
} 
```

我没有收到任何错误，但我想知道这是否是正确的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T14:25:00.140

是的，这是正确的做法。该`EntityManager.find()`方法需要实体 ID 类的实例。不是实体的一些随机属性。

请注意，错误不是由`remove()`方法引起的，而是由`find()`方法引起的。

# django - Django - 导入现有数据库

> ID：13902169
> 
> 赞同：1
> 
> 时间：2012-12-16T14:21:15.740
> 
> 标签：django

我想知道如何将现有的 sqlite3 数据库及其所有条目导入新的 Django 项目。例如，假设我现有的数据库名为 mydatab.db，其中包含一个名为“cars”的表，其中包含“name”、“year”和“owner”列。所有的列都是文本。我发现的所有示例都是用于创建新数据库和手动输入数据。

谢谢

# c# - 客户端写入时，FreeTextBox 控件不会更改其 .Text 属性

> ID：13902171
> 
> 赞同：0
> 
> 时间：2012-12-16T14:21:37.927
> 
> 标签：c#, php, asp.net, web-services, web-applications

基本上我使用的是来自 www.freetextbox.com/ 的 FreeTextBox 控件。我的问题是，每当我在客户端的控件中键入文本时， .Text 属性都不会改变。这里可能是什么问题？我可以轻松地以编程方式更改 .Text 属性，但我无法访问客户端键入到控件中的文本。

我已经把这个问题搞砸了 3 个小时，如果有人能帮助我，我会非常感激！

顺便说一句，我正在使用 ASP.NET 和 C#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:27:43.800

`.Text`绝对是获取输入文本的正确属性。

我想知道你是否有任何东西在`page_load`设置文本？

如果是这样，把这个放在里面

`if (!isPostBack) {}`对于 C# 或`If (Not isPostBack) Then`VB - 防止在页面上输入的文本被覆盖`page_load`（将在您的按钮单击事件之前触发）

或者，如果可以，请考虑使用[CK 编辑器](http://ckeditor.com/)（ASP.Net 下载在[此处](http://ckeditor.com/download)。

我最近从 FTB 更改为 CK Editor，因为 FTB 在最新的 FireFox 和 Chrome 浏览器中停止正常工作 - FTB 不再受支持并且已经过时并且充满了小问题。

自从几周前将系统上的编辑器更改为 CK 编辑器以来，我们的问题为零。

# java - 尝试 Catch 或布尔检查

> ID：13902174
> 
> 赞同：0
> 
> 时间：2012-12-16T14:22:33.013
> 
> 标签：java, try-catch

假设我有以下代码：

```
void validate(File f) //or boolean?????
{
  ...
  try
  {
    //try to validate xml file
  }
  catch (Exception e)
  {
  }
}

...

try
{

  validate(xml_file); //validates XML file
  move(xml_file, valid_folder); //moves valid XML file to valid_folder
}
catch (Exception e)
{
  move(xml_file, error_folder); //moves invalid XML file to error_folder
}

... 
```

我的`validate()`功能应该是`boolean`，我应该检查文件是否是有效的 XML 文件，还是`catching`会为我做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T14:29:30.823

不应使用异常来控制程序的正常流程。当它们发生时，它们会大大减慢执行速度。您的程序想要从无效的 XML 文件中对有效的 XML 文件进行排序。因此，您预计会出现无效的 XML 文件，这就是您将它们分类到不同文件的原因。因此，您应该返回布尔值而不是抛出异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T14:29:15.443

您可能要考虑的一个问题是单一职责原则：一种方法应该做好一件事。

您的 validate 方法至少做了三件事：

1.  从文件中读取 XML
2.  以某种未指定的方式验证 XML
3.  将文件移动到一个或另一个文件夹，具体取决于结果

如果你把它们分开，也许你会过得更轻松。

如果有人想在不移动文件的情况下验证 XML 怎么办？在这种情况下无法调用您的方法。

甚至验证也是有问题的。如果您检查架构，您将在第一个问题上抛出异常。用户想立即了解所有问题吗？如果是，您将不得不自己遍历树并找到所有错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T14:29:22.967

如果它返回`boolean`，它看起来会更简洁：

```
if(validate(xml_file)) move(xml_file, valid_folder);
else move(xml_file, error_folder); 
```

但是，您的解决方案（抛出异常）可能会携带大量有关您可以传递给`move()`方法的抛出异常的信息。或者，`validate()`方法返回`int`，其中每个值指示特定状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-16T16:28:21.223

你可以把它当作布尔值。您可以在 validate 方法的开头添加布尔变量（最初为 true），在 catch 中您可以将其设置为 false。在函数结束时，返回布尔变量值。因此，如果 try 块中的代码遇到异常，您可以通过将布尔变量设置为 false 来处理它，以便您的方法在遇到异常时返回 false，否则返回 true。

# c# - WPF中是否存在垂直模糊？（对于类似 Zune 的 vu 表）

> ID：13902175
> 
> 赞同：0
> 
> 时间：2012-12-16T14:22:35.420
> 
> 标签：c#, .net, wpf, xaml, effects

我正在尝试制作一个像 Zune 桌面一样的 vu 表：

![在此处输入图像描述](../Images/93c9a4e1d495d0e9ce202a24144d9c4f.png)

我的在上面，原来的在下面。我知道颜色不同，但我认为问题在于 Zune 使用的是垂直模糊，而我使用的是垂直+水平。

我的 vu 酒吧是这样制作的：

```
 void CreateNewVUBar(int left) {
        var obj = new Rectangle();
        obj.Fill = new SolidColorBrush(Colors.OrangeRed);
        obj.Width = 70;
        obj.Height = 100;
        obj.SetValue(HorizontalAlignmentProperty, HorizontalAlignment.Left);

        var effect = new BlurEffect();
        effect.Radius = 30;
        effect.RenderingBias = RenderingBias.Quality;

        obj.Effect = effect;

        var tmp = obj.Margin;
        tmp.Left = left;
        obj.Margin = tmp;

        vubargrid.Children.Add(obj);
    } 
```

WPF中有没有办法只制作垂直模糊？或者有什么我想念的？

*注意：我知道 Zune 不使用 WPF。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:43:06.000

你考虑过 LinearGradientBrush 吗？
并移动起点和终点 - 在 msdn：

[http://msdn.microsoft.com/en-us/library/system.windows.media.lineargradientbrush(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.lineargradientbrush(v=vs.85).aspx)

# iphone - 对象没有从 NSMutableArray 中删除？

> ID：13902176
> 
> 赞同：3
> 
> 时间：2012-12-16T14:22:46.103
> 
> 标签：iphone, objective-c, ios, arrays, nsmutablearray

`NSMutableArray`当我尝试从中删除对象时，我有一个对象没有被删除。当我调试我的代码时，里面有数据。这是我的代码 -

```
NSMutableArray *myArray = [array copy];
// array is NSArray which contains data

[myArray removeObjectAtIndex:0]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T14:23:43.130

它不会从中删除对象，`array`因为您`NSMutableArray`已成为`Immutable`. 您正在制作**副本**而`NSArray`不是制作**mutableCopy**它会起作用 -

```
NSMutableArray *myArray = [array mutableCopy]; 
```

或者你也可以使用`initWithArray:`方法。

```
NSMutableArray *myArray = [[NSMutableArray alloc] initWithArray:array]; 
```

# couchdb - couchDb 查询的执行顺序

> ID：13902179
> 
> 赞同：0
> 
> 时间：2012-12-16T14:23:22.983
> 
> 标签：couchdb

在查询 couchDb 视图时，查询的执行顺序是什么。例如，如果我在 url 中有这些查询参数

```
someurl?reduce=false&descending=true&startkey="something" 
```

它们将按什么顺序执行。

我遇到的主要问题是*descending= true*。当我不传递该参数时，我可以很好地分页但是如果我通过*descending = true*分页完全中断。我猜这与查询的执行顺序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:23:50.003

没有顺序，查询是声明性的。但是，对于 的情况`descending=true`，您必须反转 startkey 和 endkey 值。有关更多信息，请参阅[文档](https://couchdb.readthedocs.org/en/latest/api/design.html#get-db-design-design-doc-view-view-name)。

# function - 如何在 Vim 脚本的路径下获取目录名称？

> ID：13902188
> 
> 赞同：2
> 
> 时间：2012-12-16T14:24:38.620
> 
> 标签：function, vim, directory, path

我想要一个简单的解决方案来获取 vim 脚本路径下的目录名称。

这是我尝试过的方法：代码。[https://gist.github.com/4307744](https://gist.github.com/4307744) 函数在 L84 行。

我将此函数用作 input() 的完整函数。所以这个函数需要返回一个路径下的目录名列表。例如

```
to/path/
        - a/
        - b/ 
```

我想得到`a`和`b`。

我试图用`:help functions`. only found `globpath()`，但它会返回完整路径。

那么有没有人有一个简单的解决方案？（顺便说一句，为什么很难在 Vim 的路径下获取目录名称？？）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T04:30:03.217

我不知道这是否是故意的，但`glob()`将目录限制为仅路径以模式结尾的目录`/`：

```
let directories=glob(fnameescape(top_directory).'/{,.}*/', 1, 1)
call map(directories, 'fnamemodify(v:val, ":h:t")') 
```

. 一些解释：

*   `fnameescape()`转义 top_directory （它应该`to/path`在示例中设置为）以防止其中的特殊字符自行扩展（我曾经有一个名为 的目录`*.*`）。
*   `{,.}`是必要的，因为在 unix vim 默认情况下不会列出以点开头的文件。请注意，通常`.*`模式匹配特殊`.`和`..`目录，然后将其删除，但由于某种原因`{,.}*`不匹配它们。
*   `, 1, 1``glob()`忽略`'suffixes'`和选项（第一个）并`'wildignore'`返回一个列表（第二个，需要最新的 vim）。
*   最后（第二）行用于仅保留您要求的目录名称。通常`:h:t`只会返回父目录名称，但会`glob()`输出类似的路径`to/path/a/`，`:h`因此只删除尾部斜杠。`:t`剥离目录路径（返回尾随路径组件）。如果不`:h`剥离斜杠尾随路径组件将是空字符串。

您可以将所有内容合并为一行：

```
let directories=map(glob(fnameescape(top_directory).'/{,.}*/', 1, 1), 'fnamemodify(v:val, ":h:t")') 
```

# php - CakePHP - 无法在视图中获取会话变量

> ID：13902191
> 
> 赞同：2
> 
> 时间：2012-12-16T14:24:55.480
> 
> 标签：php, session, cakephp

在 ProjectsController.php 中，我设置了一个会话变量，因为我希望在所有控制器、模型和视图中都可以访问该信息：

```
$this->Session->write('Project.title', $this->Project->title); 
```

现在，当我尝试从项目视图访问它时，如下所示：

```
 <p>Project: <strong>
        <?php if (isset($session->read('Project.title'))): 
            $session->read('Project.title');
        ?>
        <?php else: ?>
            Not selected
        <?php endif; ?>
        </strong></p> 
```

我收到以下错误：

```
Fatal error: Can't use method return value in write context 
```

指的是上面代码的第二行。

我已经浏览了 CakePHP 文档，也搜索过 SO，我在这里做错了什么？

谢谢！

编辑：

我也尝试过使用：

```
$this->Session->read('Project.title') 
```

导致相同的错误消息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T14:27:09.320

你应该做 PHP 偶尔告诉你的事情 :) 错误信息很清楚。您不能以这种方式使用 isset() 和 empty()。它们只直接使用变量，而不是方法。所以使用

```
<?php if ($this->Session->check('Project.title')) {
    echo $this->Session->read('Project.title');
} ?> 
```

如食谱中所述

你也可以

```
<?php
$title = $this->Session->read('Project.title');
if ($title) {
    echo $title;
} ?> 
```

甚至

```
<?php if ($title = $this->Session->read('Project.title')) {
    echo $title;
} ?> 
```

不过，最后一个不是 cakephp 编码约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:27:18.453

`isset()`不能处理这样的功能。存储该`$session`对象`read()`函数的返回值，*然后*在条件内测试该变量`if()`：

```
$title = $session->read('Project.title');
echo ($title) ? $title : ''; 
```

# java - 如何在 glassfish 服务器中配置 oracle 瘦连接池？

> ID：13902193
> 
> 赞同：0
> 
> 时间：2012-12-16T14:25:11.433
> 
> 标签：java

无法在 glass-fish 服务器中创建工作的 oraclethin 连接池，我正在使用 oracle 10g xe，我正在尝试使用 ojdbc14.jar 创建连接池，但到目前为止我还没有成功，所以请！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:52:45.927

在启动 glassfish 服务器之前，**将 ojbc14.jar**放入 glassfish-3.1.1\glassfish3\glassfish\domains\domain1\lib\ext

第 1 步：在通用任务面板（玻璃鱼控制台左侧）中，您会找到 JDBC。在 JDBC 下你会找到 JDBC 资源和 JDBC 连接池。**单击 JDBC 连接池。**

第 2 步：输入池名称、资源类型和数据库供应商类型，然后单击下一步。参考截图。

**第 3 步：在此页面中，除了 ping 复选框**，不要修改常规设置中的任何字段。**在附加属性部分，提供用户名、密码和连接 url。**oracle 10g 的默认 url 是 jdbc:oracle:thin:@localhost:1521:xe。

点击保存。如果正确完成oracle 10G安装，就可以ping通JDBC连接池了。

第 4 步：要创建 JNDI 查找名称，转到 JDBC->JDBC 资源->新建，然后创建 JNDI 查找名称并单击您在第 1 步中创建的池名称。单击保存。就这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:12:37.120

我有同样的问题，解决方案是将 ojdbc*.jar 放到

```
glassfish-3.1.1\glassfish3\glassfish\domains\domain1\lib\ext 
```

目录下，重启GF，然后配置pool。

# iphone - 如何查找天数

> ID：13902197
> 
> 赞同：0
> 
> 时间：2012-12-16T14:25:32.200
> 
> 标签：iphone, objective-c, ios, ipad, nsdate

> **可能重复：**
> [iPhone - 获取两个日期之间的天数](https://stackoverflow.com/questions/3075356/iphone-get-number-of-days-between-two-dates)

我正在尝试比较 2 个日期并找出它们之间的天数。

如下所示：

```
now = [NSDate date];

// This is i am saving in NSUSerdefault on some condition,like 

if (a == 1) {

    dateFormatter = [[NSDateFormatter alloc] init];
    dateFormatter.dateFormat = @"yyyy-MM-dd HH:MM:SS";
    [dateFormatter setTimeZone:[NSTimeZone systemTimeZone]];
    NSLog(@"The Current Time is %@",[dateFormatter stringFromDate:now]);
    datesaved = [NSString stringWithFormat:@"%@",[dateFormatter stringFromDate:now]];
    NSLog(@"old date saved : %@",datesaved);

    [dateFormatter release];
} 
```

并找到当前日期。

现在我想将当前日期与保存的日期进行比较，`NSUserDefaults`以查找它们之间的天数。

前任：

> 当前时间是 2012-12-16 19:12:74 旧日期保存：2012-12-12 19:12:74

天数：4

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:40:54.913

```
NSDate *date1 = [NSDate dateWithString:@"2010-01-01 00:00:00 +0000"];
NSDate *date2 = [NSDate dateWithString:@"2010-02-03 00:00:00 +0000"];

NSTimeInterval secondsBetween = [date2 timeIntervalSinceDate:date1];

int numberOfDays = secondsBetween / 86400;

NSLog(@"There are %d days in between the two dates.", numberOfDays); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T14:57:16.383

您可以通过这种方式获取日期的日期部分：

```
NSDate* now = [NSDate date]; // Or date from format
NSCalendar* cal = [NSCalendar currentCalendar];
NSDateComponents* components = [cal components: NSDayCalendarUnit fromDate: now];
NSInteger day = [components day]; 
```

对另一个日期做同样的事情并比较它们。

# java - 在 cloudbees 上上传基于 OTP(opentrip planner) 的 Journey planner

> ID：13902200
> 
> 赞同：0
> 
> 时间：2012-12-16T14:25:46.807
> 
> 标签：java, upload, gis, cloudbees, opentripplanner

我使用 opentripplanner（它是一个基于 java 的服务器）开发了一个旅程计划器应用程序。现在我想使用 Cloudbees 将我的服务器上线，但我不知道如何实现这一点。请在这件事上帮助我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:47:49.020

根据[opentripplanner 文档](https://github.com/openplans/OpenTripPlanner/wiki/RunningTheWebappInTomcat)，您不能将其部署在默认的 tomcat 容器上，因为这需要一些自定义。所以更简单的方法是嵌入一个 servlet 容器并作为[Java 应用程序运行](http://developer.cloudbees.com/bin/view/RUN/ClickStack)

# sql - Visual Studio 2012 中的 Transact-SQL 选择语法

> ID：13902206
> 
> 赞同：-1
> 
> 时间：2012-12-16T14:26:45.730
> 
> 标签：sql, sql-server, tsql, syntax

为什么是

```
select * from [User] 
```

而不是：

```
select * from User 
```

?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T14:32:58.853

另一个原因：方括号主要用于标识其中包含空格或特殊字符的列名。例如`[movie name]`，但是在这种情况下，您必须使用方括号来引用这些列。因此，为了给出能够为字段使用单个名称和多个名称的通用思想，[] 始终显示在语法中。

这也可能与将 [] 应用于表名的原因相同。

根据这篇[文章](https://stackoverflow.com/questions/9917196/meaning-of-square-brackets-in-ms-sql-table-designer)：*“”和 [] 是分隔符标识符。如果列名/表名是**保留关键字**或包含特殊字符（如空格或连字符），则这是必需的。*

这个[参考](http://msdn.microsoft.com/en-us/library/aa238507%28v=sql.80%29.aspx)说`User`是一个**保留的关键字**......

您可能想尝试使用表名 like `myuser`，以确认这种性质是否仍然存在。

另一件事，如果您的书是旧版本，其中 [] 在 Visual Studio 中对于单个表名是可选的。但是，它可能已更改为 Visual stduio 的早期版本，您有时必须使用方括号，而表名是单个名称、两个名称、保留字、带有特殊字符的名称...... :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T14:51:40.973

我知道问题出在哪里......表名称“用户”可以，而不是“用户”

参考： http: [//msdn.microsoft.com/en-us/library/aa224033 (v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa224033(v=sql.80).aspx)

# c - malloc 比声明更好吗？

> ID：13902208
> 
> 赞同：0
> 
> 时间：2012-12-16T14:26:47.537
> 
> 标签：c

> **可能重复：**
> [声明和 malloc 之间的区别](https://stackoverflow.com/questions/10575544/difference-between-declaration-and-malloc)

有什么区别：

```
char * a = malloc(size); 
```

和

```
char a[size]; 
```

这个比那个好吗？使用malloc有什么好处吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T14:28:31.033

您不控制堆栈分配内存的生命周期范围，它仅在范围内有效（除非您将其设为静态）。

`malloc`用于在堆上分配内存。在您调用`free`该内存之前，它是有效的。

在堆栈上分配内存更快，通常是因为您实际上并没有分配新内存，您只是保留了更多已经在使用的内存，但您无法控制生命周期，它由您的范围控制块或功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T14:31:01.780

> `char *a = malloc(size);`和 char *a[size];` 有什么区别？

第一个声明一个指针`char`并在堆上为其分配`size`字节。第二个分配`size`指针`char`。它们不是等价的。

> 一个比另一个好吗？

不，它们有不同的用途。

> 使用有什么优势`malloc()`吗？

是的。如果你想从一个函数返回一个数组，你不能这样做：

```
char a[size];
return a; 
```

因为 then`a`在返回后超出范围，并且使用它会导致未定义的行为。所以在这种情况下你必须使用

```
char *a = malloc(size);
return a; 
```

（通常是这种情况，因为您可能希望每次从函数返回一个新字符串 - 但是，如果这不是必需的，您可以使用本地声明的静态数组。）

但是，如果仅在本地使用数组，则通常建议使用自动（堆栈）数组，而不是`malloc()`因为这样可以避免增加内存碎片，并且堆栈操作可能比堆访问更快。

# c# - datagridview contextmenustrip：仅显示所选行？

> ID：13902211
> 
> 赞同：3
> 
> 时间：2012-12-16T14:26:59.677
> 
> 标签：c#, datagridview, contextmenustrip

我有标准的datagridview，我有contextmenustrip。我的问题是，当用户单击鼠标右键而不是每一行时，我需要显示此上下文菜单条！仅在我选择的行上。我试过这个：

```
dataGridView1.Rows[1].ContextMenuStrip = contextMenuStrip1; 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T14:40:07.937

**如果您的用户右键单击满足某些条件**的 DataGridView 列的标题，我觉得您想打开 ContextMenuStrip 。

 ****简而言之：**使用 DataGridView`MouseDown`事件并在该事件中检查条件，如果满足条件，请调用`Show`ContextMenuStrip 的方法。

您可以参考的代码示例：

```
private void dataGridView1_MouseDown(object sender, MouseEventArgs e) {
    if (e.Button == MouseButtons.Right) {
        var ht = dataGridView1.HitTest(e.X, e.Y);
        // Place your condition HERE !!!
        // Currently it allow right click on last column only
        if ((    ht.ColumnIndex == dataGridView1.Columns.Count - 1) 
             && (ht.Type == DataGridViewHitTestType.ColumnHeader)) {
            // This positions the menu at the mouse's location
            contextMenuStrip1.Show(MousePosition);
        }
    }
} 
```**

# windows - 调试：进入 DispatchMessage()

> ID：13902212
> 
> 赞同：0
> 
> 时间：2012-12-16T14:27:01.357
> 
> 标签：windows, visual-studio

我正在尝试在 Visual Studio 中调试一个非常古老的 C 程序。我正在逐行浏览一些代码，然后到了`DispatchMessage(&msg);`我想看看代码下一步去哪里的一行，所以我点击了“Step into”按钮，但我没有被带到任何处理该消息的新代码，而是小黄色箭头刚刚走到同一页的下一行...

这是预期的行为吗？我怎样才能看到`DispatchMessage`实际做了什么？这是否表明窗口处理程序设置不正确？

额外信息：我试图调试的任务是处理鼠标单击特定窗口。我已经显示了 msg 结构，并且 msg.hwnd 是我单击的窗口（我使用[Winspector](http://www.softpedia.com/get/Security/Security-Related/Winspector.shtml)确认）。msg.message 为 513 (=WM_LBUTTONDOWN)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T14:53:01.003

这是完全预期的行为......

`DispatchMessage()`实现，`User32.dll`因此，源代码不可用。在大多数情况下，您必须将 Win32 API 调用视为黑盒。有时，这确实会使调试 Win32 代码成为一项挑战。

请记住，您的武器库中有一些技巧可以调试此类事情：

1.  继续将`DispatchMessage()`其视为黑匣子。`WndProc`在您希望接收的地方放置一个断点并在`WM_LBUTTONDOWN`那里继续调试。

2.  让 Winspector 记录进入所有相关窗口的消息。这有助于确保收到消息并按照您期望的顺序。

3.  如果最坏的情况发生，您可能不得不进入`DispatchMessage()`或其他一些 API 调用，查看它的反汇编。大多数时候，这并没有什么好处（但我总能学到一些东西）。

选项#3 很有可能不是必需的，您的时间最好花在调试`DispatchMessage()`而不是在其中进行调试。

# java - 函数不应该返回布尔值

> ID：13902218
> 
> 赞同：0
> 
> 时间：2012-12-16T14:27:29.467
> 
> 标签：java, return

在下面的代码中，我检查给定的 url 是否以允许的文件类型结尾（可能的类型：.jpg、.jpeg、.png 和 .gif）。类型列表保存在一个数组列表中，其中包含来自 UI 的文本描述（例如“JPG 图像”）。

我的目的是使函数遍历带有描述的列表，并使用相应的 URL 检查方法检查 url。

我希望这段代码能够正常工作，因为我相信每个场景都已经被考虑在内：如果它是 JPG、PNG 或 GIF，它返回 true，否则返回 false。它仍然有一个错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.Error: Unresolved compilation problem: 
This method must return a result of type boolean 
```

这显然意味着某处的回报出了问题。我在看什么？

```
private boolean isImageURL(ImageURL url) {
    for (String type : fileTypes) {
        if (type.equalsIgnoreCase("JPG Images")) {
            if (url.isJPG() || url.isJPEG()) {
                return true;
            }
        } else if (type.equalsIgnoreCase("PNG Images")) {
            if (url.isPNG()) {
                return true;
            }
        } else if (type.equalsIgnoreCase("GIF Images")) {
            if (url.isGIF()) {
                return true;
            }
        } else {
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T14:31:37.343

未涵盖所有可能的执行路径。例如，如果类型是“JPG 图片”，但 url 既不是 JPG 也不是 JPEG，则该方法不会返回任何内容。

删除最后一个`else`子句，并`false`在方法结束时简单地返回。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T14:29:54.427

好吧，很简单，如果嵌入的“叶”`if`语句之一为表达式返回 false，则应用程序不会得到返回语句。`for`循环也可能不会被执行。

要解决此问题，请将 移至`return false`方法的末尾，您应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T14:31:52.873

这是你的一个`if`：

```
 else if (type.equalsIgnoreCase("PNG Images")) {
        if (url.isPNG()) {
            return true;
        }
        //otherwise... return what? (error here, put return false here)
    } 
```

你也可以去掉最后一个`else`，只返回 false。

# c++ - 以编程方式创建带有 UI 的选项卡

> ID：13902220
> 
> 赞同：2
> 
> 时间：2012-12-16T14:28:04.507
> 
> 标签：c++, c, qt

这是我的用户界面：

![在此处输入图像描述](../Images/da5a6b325c77cf5eeec412a7b5d8b588.png)

这是以编程方式创建的选项卡：

```
ui->tabWidget->addTab(new QWidget(), "Tab 2"); 
```

![在此处输入图像描述](../Images/c4f7a55ef8f08c7e75ce0079f62cc168.png)

我希望新创建的选项卡具有与“聊天室”选项卡完全相同的布局。关于如何做到这一点的任何建议都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T20:09:13.010

最简单的方法（在 Designer 中）是创建一个名为类似的新 UI 表单类`ChatTab`，并将其基于`QWidget`.

将您的聊天室小部件和布局从 MainWindow UI 表单移动（即剪切和粘贴）到 ChatTab 表单，但将`QTabWidget`容器保留在 MainWindow 表单中。如果您希望聊天室在首次打开时出现在您的主窗口中，请从 Designer 内部将其提升为第`QWidget`一个。`ChatTab`

应以编程方式添加任何其他选项卡，如下所示：

```
ui->tabWidget->addTab(new ChatTab(), "Tab 2"); 
```

如果您想让您的生活更轻松，请向 ChatTab 构造函数添加花哨的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T15:00:21.610

你应该为这个布局创建一个自定义的 QTabWidget，命名为 ChatWidget，并像这样创建一个工厂 API：

```
ChatWidget * ChatWidget::creater(TabWidget * tw, ChatData * cd) {
    ChatWidget * cw = ChatWidget.create();
    tw.addTab(cast<QWidget>cw, 0);
    // some init
    ...
    return cw;
} 
```

好久没用Qt和C++了，也许这能给你一点提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T05:37:11.860

使用您当前的**chatRoom**类作为***基类***并在其中做一些布局；

下次您想创建一个新**选项卡**时，只需执行以下操作：

```
ui->tabWidget->addTab(new chatRoom(), "Tab 3"); 
```

希望有所帮助。

# html - 嵌入式 YouTube 视频布局问题

> ID：13902221
> 
> 赞同：0
> 
> 时间：2012-12-16T14:28:04.617
> 
> 标签：html, css, iframe, youtube

在[此页面上](http://festivals.ie:8080/festivals/demo.htm)，嵌入的 YouTube 视频显示在名为“类似节日”的轮播左侧。用于嵌入 YouTube 视频的 HTML 是：

YouTube 部分的 HTML 是：

```
<div class="span4 spacer youtube">
    <div class="title clearfix">
        <h2 class="pull-left">YouTube</h2>
    </div>
    <iframe width="1000" height="1000" src="http://www.youtube.com/embed/NI8rQEHoE24"></iframe>
</div> 
```

页面的布局（使用响应式 Bootstrap 网格）使得视频应该与右侧的轮播具有相同的高度，但正如您所见，它以某种方式脱离了其父容器。我希望视频与右侧的轮播对齐，我该如何解决这个问题。

这是一个屏幕截图，以防对我所指的内容有任何疑问！

![在此处输入图像描述](../Images/af74181a5f0f60dd655bf25324ad0504.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:48:43.373

我注意到`row-fluid`容器正在为您的 Youtube 视频动态添加 33% 的宽度。因此，无论您设置的宽度期望值都被该类重置。

尝试这个：

```
<div class="row-fluid">

    <div class="span4 spacer twitter">
    </div>

    <!-- Youtube -->
    <div class="span4 spacer youtube">
        <div class="title clearfix">
            <h2 class="pull-left">YouTube</h2>
        </div>
<iframe height="150px" src="http://www.youtube.com/embed/NI8rQEHoE24"></iframe>        
    </div>

    <!-- Similar Carousel -->
    <div class="span4 spacer">

        <div id="similarCarousel" class="carousel slide last">
        </div>
    </div>

</div> 
```

（给外星人先生的帽子小费）

它仅设置 iframe 高度。整个排液容器有些膨胀，高度不规则。但是，您没有“跳出容器”的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T15:02:44.583

代替

```
<iframe id="fitvid811516"
    src="Festivals.ie%20_%20Electric%20Picnic%202012_files/NI8rQEHoE24.htm">
</iframe> 
```

用这个

```
<iframe width="640" height="360" 
    src="http://www.youtube.com/embed/NI8rQEHoE24?feature=player_detailpage" 
frameborder="0" allowfullscreen>
</iframe> 
```

并手动调整宽度和高度。iframe 不适合动态调整大小。

此外，如果您不想破坏布局但又不想更改其中的内容，也可以转到 HTML 中的父容器并设置`overflow: hidden`

```
.fluid-width-video-wrapper {
    overflow:hidden;
} 
```

请注意，这会修复您的布局，但会破坏 iframe；将隐藏播放控件所在的底部。

# c# - 如何在用户控件中找到控件并将其传递给字符串生成器

> ID：13902227
> 
> 赞同：0
> 
> 时间：2012-12-16T14:28:33.233
> 
> 标签：c#

我可以通过这两个代码遍历面板上的控件

```
 Form4 fl = new Form4();
       StringBuilder sb = new StringBuilder();
       foreach (Control c in panel1.Controls)
       {
           if (c is ComboBox)
           {
               ComboBox cb = (ComboBox)c;
               sb.Append(cb.Text);
               fl.comboBox1.Text = sb.ToString();
               fl.Show();
           }

       } 
```

或通过此列表 lst = new List(); 无效 GetComboBoxValues()

```
 StringBuilder sb = new StringBuilder();
    {
      sb.Append(c.Text + "\r\n");
    }
   MessageBox.Show(sb.ToString());
     } 
```

但是我添加了一个面板，并在面板上添加了一个包含组合框和文本框的用户控件，如何找到控件并添加到字符串生成器，所以我想遍历用户控件并找到文本并将其添加到字符串生成器，是吗可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T14:34:01.490

您可以使用此递归方法来查找控件

```
var combos = FindControls<ComboBox>(panel1).ToList(); 
```

或者

```
var text = String.Join(Environment.NewLine, 
                       FindControls<ComboBox>(this).Select(c => c.Text)); 
```

* * *

```
IEnumerable<T> FindControls<T>(Control ctrl) where T : Control
{
    foreach (Control c in ctrl.Controls)
    {
        if (c.GetType() == typeof(T)) yield return (T)c;
        foreach (var subC in FindControls<T>(c))
            yield return subC;
    }
} 
```

**- - - - - - - - -编辑 - - - - - - - - -**

> ***你能建议最简单的方法吗***

```
List<ComboBox> combos = new List<ComboBox>();
FindComboBoxes(this,combos);
StringBuilder sb = new StringBuilder();
foreach (var combo in combos)
{
    sb.AppendLine(combo.Text);
} 
```

* * *

```
void FindComboBoxes(Control parent,List<ComboBox> fillThis) 
{
    foreach (Control c in parent.Controls)
    {
        if (c.GetType() == typeof(ComboBox)) fillThis.Add((ComboBox)c);
        FindComboBoxes(c, fillThis);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T15:05:17.473

回应留给LB答案的评论。就我个人而言，我认为 LB 的答案是最简单的并且需要最少的编码，最好的事情是它会在面板上找到特定类型的所有控件，无论它们是多么嵌套（想象一下，如果你在用户内部有一个用户控件控制）。

只需将 LB 的答案中的方法原样复制`FindControls`到您的解决方案中，在您需要循环访问面板控件的地方，执行以下操作：

```
StringBuilder sb = new StringBuilder();
var comboBoxes = FindControls<ComboBox>(panel1).ToList();
var textBoxes = FindControls<TextBox>(panel1).ToList();

foreach (var comboBox in comboBoxes)
    sb.AppendLine(comboBox.SelectedItem.ToString());

foreach (var textbox in textBoxes)
    sb.AppendLine(textbox.Text);

MessageBox.Show(sb.ToString()); 
```

一个简单的例子是这样的，但请注意，如果您在用户控件中有用户控件的情况，它将不起作用，所以我强烈建议使用 LB 的示例：

```
 StringBuilder sb = new StringBuilder();
    for (int i = 0; i < panel1.Controls.Count; i++)
    {
        if (panel1.Controls[i].Controls.Count > 0)
        {
            //Iterate through the controls in the user control
            foreach(Control c in panel1.Controls[i].Controls)
            {
            }
        }
        else
        {
            //Handle the controls with no children
        }
    } 
```

# markdown - 如何使语法突出显示在 octopress 中工作

> ID：13902229
> 
> 赞同：3
> 
> 时间：2012-12-16T14:28:50.783
> 
> 标签：markdown, jekyll, octopress

这真的令人沮丧。我不知道我的 markdown 文件有什么问题，因为它之前编译为 html 没有任何问题，但现在每当我运行时它都会给我这个错误`rake generate`。现在我主要对每个文件（30个markdown文件）使用反复试验，如果在我运行时编译，我会一一测试它们`rake generate`

![在此处输入图像描述](../Images/1d98f7b9d098f43c435863893130ea3d.png)

我可以运行相同的命令一百次，但如果我不知道出了什么问题，那么我该如何调试它。

以下是我发现导致错误的文件：

[https://gist.github.com/4307839](https://gist.github.com/4307839)

[https://gist.github.com/4307833](https://gist.github.com/4307833)

**更新**

好的，事实证明这不是语法问题，它与语法突出显示有关。当我做类似的事情时：

```
{% codeblock lang:JavaScript %}
console.log(25 + "yoyos"); 
//output: "25yoyos" 
{% endcodeblock %} 
```

它不起作用。但是当我删除语言选项时：

```
{% codeblock %}
console.log(25 + "yoyos"); 
//output: "25yoyos" 
{% endcodeblock %} 
```

有用。

每当我使用`rake preview`.

```
Liquid error: No such file or directory - -c “import sys; print ‘%d.%d’ % sys.version_info[:2]” 
```

[我已经对 github](https://github.com/imathis/octopress/issues/262)上的问题进行了一些研究并尝试了所有可能的解决方案。

*   捆绑更新
*   编辑 ruby​​python

`if (@python.include? 'python2.7') @python = "python27" end`

我已经`yari`通过 Windows 安装程序安装了 ruby​​ 1.9.3 和 python 2.7.3。当我安装 octopress 时，基本上一切都很顺利，但语法高亮确实让我头疼。甚至在这篇博文中提到，Windows 中的语法高亮确实存在问题：

[http://blog.zerosharp.com/setting-up-octopress-on-windows/](http://blog.zerosharp.com/setting-up-octopress-on-windows/)

但没有任何效果。

如果您能指出我在那里犯的一些错误，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T18:38:22.217

不是一个直接的答案，但也许考虑简单地将你的 markdown 解析器切换到 redcarpet (in `_config.yml`, set `markdown: redcarpet`)，然后只使用 Github 风格的 markdown 的围栏代码块来提供语法突出显示？

对提供 github 风格降价的最新 redcarpet 的支持是最近才添加到 Jekyll 中的，因此您可能需要先更新 Jekyll gem。就我个人而言，我认为使用纯 Markdown 编写帖子比使用 Liquid 进行语法高亮更有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T20:50:55.017

当在我的博客上遇到类似的选择时，我选择了托管在[CDN 上的](https://stackoverflow.com/a/9077471/19020)[Google Code Prettify](https://code.google.com/p/google-code-prettify/)。

您需要插入一些代码以将正确的 CSS 类动态添加到您的代码块中。

我将以下代码添加到我的 blog\source_includes\custom\footer.html 文件中：

```
<script type='text/javascript'>
    $(function() 
    {
        $('pre').addClass('prettyprint');
        prettyPrint();
    })
</script> 
```

# html - 如何用css制作这种灰色的背景？

> ID：13902231
> 
> 赞同：1
> 
> 时间：2012-12-16T14:28:57.207
> 
> 标签：html, css, background, web

我想知道下页的背景是如何制作的？ [http://www.wohn-blogger.de/page/4/](http://www.wohn-blogger.de/page/4/)

如您所见，背景不是纯色。它是缩放到整个页面的图像吗？或者这甚至可以用css以某种方式实现？

我问的原因是css包含以下内容：

```
body {
    background: #0d1424 url(images/body-bg.jpg) no-repeat center top;
    font: .81em/150% "Lucida Grande", Arial, "Lucida Sans Unicode", sans-serif;
    word-wrap: break-word;
    color: #666;
} 
```

这意味着这是一个不重复的单个图像。无论如何，整个页面都被填满了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:39:46.810

It appears the website has two body styles defined, the no-repeat getting overriden by a standard repeating background image.

![enter image description here](../Images/84dc9f8f955653bf6aa52d4312d13a82.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T14:32:08.403

CSS：

```
body {
    background: url("http://www.wohn-blogger.de/wp-content/themes/itheme2/skins/gray/images/body-bg.png") repeat scroll 0 0 #D1D1D1;
    color: #666666;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T14:34:24.017

有几种方法可以做到这一点。它似乎由透明的渐变图像和纹理图像组成。在这种情况下，我会通过将重复纹理添加到 html 元素并将透明渐变添加到 body 元素来解决此问题。

```
html {background:url(texture.png);)
body {background:url(gradient.png) top left repeat-x;) 
```

我希望这有帮助。

# c++ - 以相反的顺序显示 Vector 元素

> ID：13902236
> 
> 赞同：-2
> 
> 时间：2012-12-16T14:29:30.713
> 
> 标签：c++

我有两个问题，但它们是相互关联的：

```
part:a-> 
```

我一直在尝试以相反的顺序显示向量的元素。但没有任何工作。我用过 iterotar 之类的；

```
for (it=vec.end(); it!=vec.begin(); --it){ 
// it is iterator not reverse_iterator.
// do work
} 
```

PS我对迭代器不太熟悉。我今天第一次使用它们以相反的顺序显示 elem。

也试过了；

```
for (int i=vec.size(); i!=0; i--){
//display
} 
```

无论我做什么，它总是以与它们存在的顺序相同的顺序显示元素，即不以相反的顺序显示。

```
part_b-> 
```

有什么方法可以将递归函数的输出直接存储到向量中。就像代码一样：我知道这不起作用。我试过了，但只是让你知道我在做什么。

```
#include <iostream>
using namespace std;
#include "vector"

int func(int num);
vector <int> vec;

int main() {
    int num=34;
    // I know this would not work. But is there any possibilitiy that
    // I can store the output in a vector.
    vec = binary(num);                          

    // trying to display the vector.        
    for (int i=vec.size();i!=0;i--) {
        cout<<vec[i]<<" ";
    } // not working for reverse display.
} //main.

int func(int num) {
    if (num==1) {
        //vec.push_back(1);
        return 1;
    }
    else if(num==0) {
        //vec.push_back(0);
        return 0;
    }
    else {
        //vec.push_back(input%2);
        return binary(input/2);
    }
} //func. 
```

我希望你能理解这个问题。如果我能够完成 b 部分，则无需反转向量的 elem。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T14:36:58.607

The standard solution uses reverse iterators:

```
for (auto it = v.rbegin(); it != v.rend(); ++it)
{
    if (it != v.rbegin()) { std::cout << ' '; }
    std::cout << *it;
} 
```

Alternatively, you can use indices, but keep the "reversal" idiom and *increment* the index:

```
for (std::size_t i = 0; i != v.size(); ++i)
{
    if (i != 0) { std::cout << ' '; }
    std::cout << v[v.size() - i - 1];
} 
```

Note that reverse iterators are literally just doing something very similar to the explicit loop under the hood. In particular, the `base()` member function of a reverse iterator gives you the corresponding ordinary iterator offset by one, just as we have a `- 1` in the index computation. (E.g. `rbegin()` is just `end()` under the hood, but decrements by one upon dereferencing.)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T14:36:49.973

Use reverse iterators:

```
for (auto it = vec.crend(); it != vec.crbegin(); ++it) {
    std::cout << *it << ' ';
}
std::cout << '\n'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-16T14:40:41.807

**A部分**

假设您无法访问 C++11：

```
vector<int>::const_reverse_iterator it;
for (it=vec.rbegin(); it!=vec.rend(); ++it)
{ 
    // do work
} 
```

**B部分**

看起来很像您试图以二进制形式显示数字。不幸的是，据我所知，ostream 上的标准标志只允许十六进制、十进制或八进制，但我可以建议一种更简单的方法吗？

```
#include <bitset>

bitset< sizeof(int) << 3 > b(34);
cout << b << endl; 
```

这使：

```
00000000000000000000000000100010 
```

相当难看的外观`sizeof(int) << 3`只是一种获取`int`in 位大小以避免截断的方法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-16T14:40:40.413

我写了一个可能有帮助的小程序。也许你的向量是空的？

```
#include <iostream>
#include <vector>
using namespace std;
int main(int argc, char *argv[])
{
    vector<int> vec;
    vec.insert(vec.begin(), 1, 1);
    vec.insert(vec.begin(), 1, 2);
    vec.insert(vec.begin(), 1, 3);
    vector<int>::iterator i;
    for (i = vec.end(); i != vec.begin(); --i)
    {
        cout << *i;
    }
    cout << *i;
    return 0;
} 
```

# java - 如何在语法上实现 JJTree

> ID：13902239
> 
> 赞同：15
> 
> 时间：2012-12-16T14:29:36.450
> 
> 标签：java, parsing, compiler-construction, abstract-syntax-tree, javacc

我的任务是使用 JavaCC 为讲师提供的语言制作带有语义分析的自上而下的解析器。我写出了生产规则，没有错误。我完全被困在如何在我的代码中使用 JJTree 并且我在互联网上搜索教程的时间并没有让我到任何地方。只是想知道有人可以花一些时间来解释如何在代码中实现 JJTree 吗？或者，如果有一个隐藏的分步教程，那将是一个很大的帮助！

以下是我的一些生产规则，以防万一。提前致谢！

```
void program() : {}
{
  (decl())* (function())* main_prog()
}

void decl() #void : {}
{
  (
    var_decl() | const_decl()
   )
}

void var_decl() #void : {}
{
  <VAR> ident_list() <COLON> type()
 (<COMMA> ident_list() <COLON> type())* <SEMIC>
}

void const_decl()  #void : {}
{
  <CONSTANT> identifier() <COLON> type() <EQUAL> expression()
 ( <COMMA> identifier() <COLON> type() <EQUAL > expression())* <SEMIC>
} 

void function() #void : {}
{
  type() identifier() <LBR> param_list() <RBR>
  <CBL>
  (decl())*
  (statement() <SEMIC> )*
  returnRule() (expression() | {} )<SEMIC>
  <CBR>
} 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-12-17T20:08:47.710

使用 JavaCC 创建 AST 看起来很像创建“普通”解析器（在`jj`文件中定义）。如果你已经有一个有效的语法，它（相对）容易:)

以下是创建 AST 所需的步骤：

1.  将您的`jj`语法文件重命名为`jjt`
2.  **用根标签**装饰*它（斜体字是我自己的术语......）*
**   调用`jjtree`您的`jjt`语法，这将为您生成一个`jj`文件*   调用`javacc`您生成的`jj`语法*   编译生成的`java`源文件*   测试一下*

 *这是一个快速的分步教程，假设您使用的是 MacOS 或 *nix，将`javacc.jar`文件放在与语法文件相同的目录中，`java`并且`javac`位于系统的 PATH 中：

# 1

假设你的`jj`语法文件被称为`TestParser.jj`，重命名它：

```
mv TestParser.jj TestParser.jjt 
```

# 2

现在是棘手的部分：*修饰*您的语法，以便创建正确的 AST 结构。您可以通过在它之后（以及在 之前）添加一个后跟一个标识符来*装饰*AST（或节点，或生产规则（都一样））。在您最初的问题中，您有很多不同的制作，这意味着您正在为不同的制作规则创建相同类型的 AST：这不是您想要的。`#``:``#void`

如果您不*装饰*您的产品，则使用产品的名称作为节点的类型（因此，您可以删除`#void`）：

```
void decl() :
{}
{
     var_decl()
  |  const_decl()
} 
```

现在规则只是返回规则`var_decl()`或返回的任何 AST `const_decl()`。

现在让我们看一下（简化的）`var_decl`规则：

```
void var_decl() #VAR :
{}
{
  <VAR> id() <COL> id() <EQ> expr() <SCOL>
}

void id() #ID :
{}
{
  <ID>
}

void expr() #EXPR :
{}
{
  <ID>
} 
```

我用`#VAR`类型装饰。现在这意味着该规则将返回以下树结构：

```
 VAR 
   / | \
  /  |  \
ID  ID  EXPR 
```

如您所见，终端已从 AST 中丢弃！这也意味着`id`and`expr`规则会丢失与`<ID>`终端匹配的文本。当然，这不是你想要的。对于需要保持终端匹配的内部文本的规则，您需要将`.value`树的显式设置`.image`为匹配终端的 ：

```
void id() #ID :
{Token t;}
{
  t=<ID> {jjtThis.value = t.image;}
}

void expr() #EXPR :
{Token t;}
{
  t=<ID> {jjtThis.value = t.image;}
} 
```

导致输入`"var x : int = i;"`看起来像这样：

```
 VAR 
        |
    .---+------.
   /    |       \
  /     |        \
ID["x"] ID["int"] EXPR["i"] 
```

这就是您为 AST 创建适当结构的方式。下面是一个小语法，它是您自己的语法的一个非常简单的版本，包括一个`main`测试它的小方法：

```
// TestParser.jjt
PARSER_BEGIN(TestParser)

public class TestParser {
  public static void main(String[] args) throws ParseException {
    TestParser parser = new TestParser(new java.io.StringReader(args[0]));
    SimpleNode root = parser.program();
    root.dump("");
  }
}

PARSER_END(TestParser)

TOKEN :
{
   < OPAR  : "(" > 
 | < CPAR  : ")" >
 | < OBR   : "{" >
 | < CBR   : "}" >
 | < COL   : ":" >
 | < SCOL  : ";" >
 | < COMMA : "," >
 | < VAR   : "var" >
 | < EQ    : "=" > 
 | < CONST : "const" >
 | < ID    : ("_" | <LETTER>) ("_" | <ALPHANUM>)* >
}

TOKEN :
{
   < #DIGIT    : ["0"-"9"] >
 | < #LETTER   : ["a"-"z","A"-"Z"] >
 | < #ALPHANUM : <LETTER> | <DIGIT> >
}

SKIP : { " " | "\t" | "\r" | "\n" }

SimpleNode program() #PROGRAM :
{}
{
  (decl())* (function())* <EOF> {return jjtThis;}
}

void decl() :
{}
{
     var_decl()
  |  const_decl()
}

void var_decl() #VAR :
{}
{
  <VAR> id() <COL> id() <EQ> expr() <SCOL>
}

void const_decl() #CONST :
{}
{
  <CONST> id() <COL> id() <EQ> expr() <SCOL>
}

void function() #FUNCTION :
{}
{
  type() id() <OPAR> params() <CPAR> <OBR> /* ... */ <CBR>
}

void type() #TYPE :
{Token t;}
{
  t=<ID> {jjtThis.value = t.image;}
}

void id() #ID :
{Token t;}
{
  t=<ID> {jjtThis.value = t.image;}
}

void params() #PARAMS :
{}
{
  (param() (<COMMA> param())*)?
}

void param() #PARAM :
{Token t;}
{
  t=<ID> {jjtThis.value = t.image;}
}

void expr() #EXPR :
{Token t;}
{
  t=<ID> {jjtThis.value = t.image;}
} 
```

# 3

让`jjtree`类（包含在 中`javacc.jar`）为您创建一个`jj`文件：

```
java -cp javacc.jar jjtree TestParser.jjt 
```

# 4

上一步已创建文件`TestParser.jj`（如果一切正常）。让`javacc`（也存在于`javacc.jar`）处理它：

```
java -cp javacc.jar javacc TestParser.jj 
```

# 5

要编译所有源文件，请执行以下操作：

```
javac -cp .:javacc.jar *.java 
```

*（在 Windows 上，执行`javac -cp .;javacc.jar *.java`：）*

# 6

关键时刻已经到来：让我们看看一切是否真的有效！让解析器处理输入：

```
var n : int = I; 

const x : bool = B; 

double f(a,b,c) 
{ 
} 
```

执行以下操作：

```
java -cp . TestParser "var n : int = I; const x : bool = B; double f(a,b,c) { }" 
```

您应该会在控制台上看到以下内容：

```
程序
 声明
  VAR
   ID
   ID
   EXPR
 声明
  常数
   ID
   ID
   EXPR
 功能
  类型
  ID
  参数
   参数
   参数
   参数

```

请注意，您看不到`ID`' 匹配的文本，但相信我，它们就在那里。该方法`dump()`根本没有显示它。

高温高压

## 编辑

对于包含表达式的有效语法，您可以查看我的以下表达式评估器：[https](https://github.com/bkiers/Curta) ://github.com/bkiers/Curta （语法在 中`src/grammar`）。您可能想看看如何在二进制表达式的情况下创建根节点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-19T17:22:45.913

这是一个使用 JJTree [http://anandsekar.github.io/writing-an-interpretter-using-javacc/的示例](http://anandsekar.github.io/writing-an-interpretter-using-javacc/)*

# database - 数据库时间戳

> ID：13902240
> 
> 赞同：0
> 
> 时间：2012-12-16T14:29:36.790
> 
> 标签：database, timestamp

时间戳的定义是什么？
时间戳仅用于交易？（无论事务中的什么动作。时间戳总是事务发生的时间。）
或者时间戳是事务的每个动作？（每个动作都有一个时间戳。）
![在此处输入图像描述](../Images/a62f12d759754cb8972f1a91776bf85a.png)

例如，当第一个 R1(X) 发生时，它有一个时间戳 TS。但是对于第二个 R1(X)，时间戳是否与 TS 相同？或时间戳已更改？

再举一个例子，如果我有*R1(X)W2(X)W1(X)*，它是视图可序列化的吗？它是可序列化的冲突吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:35:52.117

这可能取决于您使用的数据库。

对于 SQL Server，时间戳是通过使用返回当前**数据库**系统时间戳的 GetDate() 来检索的。

因此，如果您使用 GetDate 插入一行来输入时间戳，那么 2 秒后在同一事务中插入另一行再次调用 GetDate，第二次调用将在 2 秒后返回一个时间。

# c# - 同步框架中的 InvalidOperationException

> ID：13902245
> 
> 赞同：0
> 
> 时间：2012-12-16T14:30:07.110
> 
> 标签：c#, sql-server-2008-r2, microsoft-sync-framework

我使用 Sync 框架编写了一个包装器来提供通用功能。

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Synchronization.Data;
using Microsoft.Synchronization.Data.SqlServer;
using System.Data.SqlClient;
using Microsoft.Synchronization;

namespace PluginTest.Components
{
    public class P2PProvsionProvider
    {
        public SqlConnection RemoteConnection { get; set; }
        public SqlConnection LocalConnection { get; set; }
        private static Dictionary<string,DbSyncScopeDescription> scopes { get; set; }
        private static SqlSyncScopeProvisioning remoteProvision { get; set; }
        private static SqlSyncScopeProvisioning localProvision { get; set; }

        private static P2PProvsionProvider provider;

        //private P2PProvsionProvider() { 
        //}

        public P2PProvsionProvider() {
            scopes = new Dictionary<string, DbSyncScopeDescription>();
        }

        public static P2PProvsionProvider getInstance(string name) {
            if (name.Equals("default"))
                if (provider == null)
                    provider = new P2PProvsionProvider();
            return provider;
        }
        //1
        public void CreateProvisionScope(string name) {
            if (!scopes.ContainsKey(name))
            {
                scopes.Add(name, new DbSyncScopeDescription(name));
            }
        }

        //2
        public void AddProvisionTable(string scopeName, string tableName) {

            if (scopes[scopeName] != null)
            {
                DbSyncScopeDescription remoteScopeDesc = scopes[scopeName];
                //DbSyncScopeDescription localScopeDesc = scopes[scopeName];
                DbSyncTableDescription remoteTableDesc = SqlSyncDescriptionBuilder.GetDescriptionForTable(tableName, RemoteConnection);
                //DbSyncTableDescription localTableDesc = SqlSyncDescriptionBuilder.GetDescriptionForTable(tableName, LocalConnection);

                remoteScopeDesc.Tables.Add(remoteTableDesc);
                //localScopeDesc.Tables.Add(localTableDesc);

            }
        }

        //3
        public void ApplyScopeProvisioning (string scopeName){

            remoteProvision = new SqlSyncScopeProvisioning(RemoteConnection, scopes[scopeName]);
            remoteProvision.SetCreateProceduresDefault(DbSyncCreationOption.Skip);
            remoteProvision.Apply();

            localProvision = new SqlSyncScopeProvisioning(LocalConnection, scopes[scopeName]);
            localProvision.SetCreateProceduresDefault(DbSyncCreationOption.Skip);
            localProvision.Apply(); 

        }

        #region Scope Provisioning Builder methods
        public SqlSyncScopeProvisioning BuilderCreateProcedures(DbSyncCreationOption option)
        {
            remoteProvision.SetCreateProceduresDefault(option);
            return remoteProvision;
        }

        public SqlSyncScopeProvisioning BuilderCreateProceduresForAdditionalScope(DbSyncCreationOption option)
        {
            remoteProvision.SetCreateProceduresForAdditionalScopeDefault(option);
            return remoteProvision;
        }

        public SqlSyncScopeProvisioning BuilderCreateTable(DbSyncCreationOption option)
        {
            remoteProvision.SetCreateTableDefault(option);
            return remoteProvision;
        }

        public SqlSyncScopeProvisioning BuilderCreateTrackingTable(DbSyncCreationOption option)
        {
            remoteProvision.SetCreateTrackingTableDefault(option);
            return remoteProvision;
        }

        public SqlSyncScopeProvisioning BuilderCreateTriggers(DbSyncCreationOption option)
        {
            remoteProvision.SetCreateTriggersDefault(option);
            return remoteProvision;
        }

        public SqlSyncScopeProvisioning BuilderPopulateTrackingTable(DbSyncCreationOption option)
        {
            remoteProvision.SetPopulateTrackingTableDefault(option);
            return remoteProvision;
        }

        public SqlSyncScopeProvisioning BuilderUseBulkProcedures(bool useBulk)
        {
            remoteProvision.SetUseBulkProceduresDefault(useBulk);
            return remoteProvision;
        }
        #endregion
        //4

        public SyncOperationStatistics ExecuteSync(string scopeName , SyncDirectionOrder direction = SyncDirectionOrder.UploadAndDownload) {

            SyncOrchestrator syncOrachestrator = new SyncOrchestrator() {
                LocalProvider = new SqlSyncProvider(scopeName, LocalConnection),
                RemoteProvider = new SqlSyncProvider(scopeName, RemoteConnection), 
                Direction = direction 
            };

            ((SqlSyncProvider)syncOrachestrator.LocalProvider).ApplyChangeFailed += (s,e) =>
            {

            };

            return syncOrachestrator.Synchronize();
        }

        //5 Deprovision certain scope
        public void DeprovisionScope(SqlConnection conn, string scopeName) {
            SqlSyncScopeDeprovisioning deprovisionScope = new SqlSyncScopeDeprovisioning(conn);
            deprovisionScope.DeprovisionScope(scopeName);
        }

        //6 Deprovision All
        public void DeprovisionStore(SqlConnection conn)
        {
            SqlSyncScopeDeprovisioning deprovisionScope = new SqlSyncScopeDeprovisioning(conn);
            deprovisionScope.DeprovisionStore();
        }
    }
} 
```

正如问题所暗示的那样，我收到一个 InvalidOperationException 说，说某些存储过程不存在。该应用程序的工作方式如下：在表单中提供以下定义

```
 public GlobalFramework.Core core { get; set; }
    public BindingList<string> addedTables { get; set; }
    public BindingList<string> provisionedTables { get; set; }
    public P2PProvsionProvider provider { get; set; }
    public SyncOperationStatistics stats { get; set; } 
```

1-当用户单击带有“添加供应范围”文本的按钮时，将完成以下操作：

```
private void provisionButton_Click(object sender, EventArgs e)
    {
        provider.CreateProvisionScope(provisionScopeTextBox.Text);
        foreach (var item in provisionedTables)
        {
            provider.AddProvisionTable(provisionScopeTextBox.Text, item);
        }

    } 
```

2-当用户单击带有“应用配置”的按钮时，完成以下操作

```
private void applyProvisionButton_Click(object sender, EventArgs e)
    {
        provider.ApplyScopeProvisioning(provisionScopeTextBox.Text);
    } 
```

3-当用户单击“同步”按钮时，完成以下操作

```
private void syncButton_Click(object sender, EventArgs e)
    {
        stats = provider.ExecuteSync(provisionScopeTextBox.Text);
        statsLabel.Text = "Start time: " + stats.SyncStartTime + "End Time: " +stats.SyncEndTime+ "Change Total: "+stats.DownloadChangesTotal; 
    } 
```

现在我想知道为什么我不断收到这个异常？我的本地数据库连接是 SQL Server 2008 R2。我的远程数据库也是 SQL Server 2008 R2。

PS：我知道我应该只配置一次范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:13:58.133

为什么要跳过创建存储过程？

remoteProvision.SetCreateProceduresDefault(DbSyncCreationOption.Skip); localProvision.SetCreateProceduresDefault(DbSyncCreationOption.Skip);

如果您知道表之前已经配置并且它们已经创建了存储过程，那么您应该只跳过创建。

# cordova - Blackberry SecurityException ：此令牌由不同的模块注册，因此不允许该操作

> ID：13902248
> 
> 赞同：2
> 
> 时间：2012-12-16T14:30:13.947
> 
> 标签：cordova, blackberry, ota

当我通过`OTA`它安装应用程序时工作正常，但是当我使用`Standard`安装方法安装应用程序时，我`SecurityException`在应用程序启动后得到：

```
guid:0xBEF92E11214401C3 time: Sat Dec 15 13:25:08 2012  severity:0 type:2 app:UI data:GS+Q2 b0ad4b69net.rim.device.apps.internal.security.SecurityApp$SecurityStatusScreen
guid:0xF010BD043A6522FA time: Sat Dec 15 13:25:08 2012  severity:0 type:2 app:SecurityApp data:ASta
guid:0xF010BD043A6522FA time: Sat Dec 15 13:25:08 2012  severity:0 type:2 app:SecurityApp data:SPNR
guid:0xD4741B512180F81B time: Sat Dec 15 13:25:08 2012  severity:0 type:2 app:net.rim.ribbon.coverage data:Invoke = signalLevel-89
guid:0x9C3CD62E3320B498 time: Sat Dec 15 13:25:08 2012  severity:1 type:3 app:Java Exception data:
    SecurityException
    This token was registered by a different module and therefore the operation is not allowed.
    net_rim_bb_unifiedsearch_lib-5(505BDB70)
     UnifiedSearchServicesImpl
     removeAllData
     0x9467
    net_rim_bb_toolkit-3(505BDB84)
     ToolkitSearchableImpl
     powerUp
     0x619C
    net_rim_cldc-30(505BD476)
     Events
     dispatchSystemEvent
     0x1301
    net_rim_cldc-10(505BD476)
     Application
     doProcessNextMessage
     0x2D58
    net_rim_cldc-10(505BD476)
     Application
     processNextMessage
     0x2272
    net_rim_cldc-10(505BD476)
     Application
     enterEventDispatcher
     0x218E
    net_rim_services_impl(505BD583)
     ServiceStartup
     tier0
     0x5D52
    net_rim_services_impl(505BD583)
     ServiceStartup
     main
     0x5C74 
```

这个问题的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:58:00.120

实际上发生了问题，因为我的测试人员使用`jad`文件`OTAInstall`夹中的文件而不是使用`clx`文件`StandartInstall`夹中的文件

# javascript - Rails 远程调用不起作用/javascript 格式

> ID：13902251
> 
> 赞同：0
> 
> 时间：2012-12-16T14:30:20.193
> 
> 标签：javascript, ruby-on-rails, ajax

对 Ajax 和 rails 有点陌生。

我在图像上有一个链接，单击该链接应替换该图像。

这是我在视图中的链接：

```
<div id="flag_<%= message.id %>">
  <%= link_to image_tag("white_star.png"), flag_message_path(message), remote: true %>
</div> 
```

这会调用消息控制器上的标志方法。对于 format.js，我有 flag.js：

```
{$('#flag_<%=@message.id%>').html('<% if @message.flag == false %><a href="/messages/96/flag" data-remote="true"><img alt="White_star" src="/assets/white_star.png" title="flag"></a>
    <% else %>
    <a href="/messages/96/flag" data-remote="true"><img alt="Red_star" src="/assets/red_star.png" title="flag"></a>
    <% end %>');
} 
```

这将返回到浏览器：

```
{
$('#flag_94').html('<a href="/messages/96/flag" data-remote="true"><img alt="White_star" src="/assets/white_star.png" title="flag"></a>
');
} 
```

这对我来说似乎没问题，但什么也没发生....有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:11:15.753

一切似乎都很好，但我会放弃你的`format.js.erb`. 这些是不需要的。

如果您的 javascript 中有错误，您应该在 javascript 控制台中看到它。

将这样的代码提取到部分中通常是一种很好的做法。

所以你会有一个`replace_image.html.erb`：

```
<% if @message.flag == false %>
  <a href="/messages/96/flag" data-remote="true"><img alt="White_star" src="/assets/white_star.png" title="flag"></a>
<% else %>
  <a href="/messages/96/flag" data-remote="true"><img alt="Red_star" src="/assets/red_star.png" title="flag"></a>
<% end %> 
```

在你的`format.js.erb`你会做

```
$('#flag_<%=@message.id%>').html("<%= escape_javascript(render :partial => 'replace_image') %>"); 
```

希望这可以帮助。

# php - PHP和MySQL循环中的array_sum错误

> ID：13902254
> 
> 赞同：0
> 
> 时间：2012-12-16T14:30:57.960
> 
> 标签：php, mysql, arrays

我有一些这样的mysql表：

```
| IDPRAKTIKAN |       NAMAUSER | MODULKE | NILAI | STATUS_TUGASAKHIR | TAHUNAJARAN | SEMESTER |
-----------------------------------------------------------------------------------------------
|  3332081478 |   Ade Dwinanto |       0 |     3 |                 1 |       09/10 |        3 |
|  3332081478 |   Ade Dwinanto |       1 |    55 |                 1 |       09/10 |        3 |
|  3332081478 |   Ade Dwinanto |       2 |    54 |                 1 |       09/10 |        3 |
|  3332081478 |   Ade Dwinanto |       3 |    45 |                 1 |       09/10 |        3 |
|  3332081478 |   Ade Dwinanto |       4 |    62 |                 1 |       09/10 |        3 |
|  3332081478 |   Ade Dwinanto |       5 |    20 |                 1 |       09/10 |        3 |
|  3332081483 | Arya Prasettyo |       0 |     3 |                 1 |       09/10 |        3 |
|  3332081483 | Arya Prasettyo |       1 |    55 |                 1 |       09/10 |        3 |
|  3332081483 | Arya Prasettyo |       2 |    53 |                 1 |       09/10 |        3 |
|  3332081483 | Arya Prasettyo |       3 |    47 |                 1 |       09/10 |        3 |
|  3332081483 | Arya Prasettyo |       4 |    60 |                 1 |       09/10 |        3 |
|  3332081483 | Arya Prasettyo |       5 |    20 |                 1 |       09/10 |        3 | 
```

**[这是我在 MySQL 上的数据（在 sqlfiddle.com 上）](http://www.sqlfiddle.com/#!2/3ed96/1)**

这是我的 PHP 代码：

```
<?php
   $setting_tahunajaranget = $_GET['setting_tahunajaran'];
   $setting_kodepraktikumget = $_GET['setting_kodepraktikum'];
   $nama_praktikum = $_GET['nama_praktikum'];
   $setting_semesterget = $_GET['setting_semester'];

$query2 = "SELECT `nilai` AS semester FROM `nilaipraktikum` WHERE `modulke`= 0 LIMIT 0, 30 ";
$data   = mysql_fetch_row(mysql_query($query2));
        $query = "SELECT `idpraktikan`,namauser,`modulke`, `nilai`,`status_tugasakhir`,`tahunajaran`,`semester` FROM `nilaipraktikum` LEFT JOIN tabeluser ON tabeluser.npmuser = nilaipraktikum.idpraktikan WHERE `tahunajaran` = '$setting_tahunajaranget' AND`kodepraktikum` = '$setting_kodepraktikumget' AND `semester` = '$setting_semesterget' ";

        $result = mysql_query($query);
    if ($data = mysql_fetch_row($result)>=1)
    {

   $nilai   =   $data['nilai'];
        if ($nilai = $setting_semesterget);

echo "<table width='auto' border='1' cellpadding='3' cellspacing='3' align='center'>
  <tr>
    <td align='center' valign='middle'><strong>No</strong></td>
    <td align='center' valign='middle'><strong>Nama</strong></td>
    <td align='center' valign='middle'><strong>NPM</strong></td>";

        for($i=1;$i<=$jml_modul;$i++) {
            echo "<td align='center' valign='middle'><strong>Modul Ke-".$i."</strong></td>"; 
        }

echo    "<td align='center' valign='middle'><strong>Rata-Rata</strong></td>";

    if ($setting_status_ta=0)
    {
    }
    if ($setting_status_ta=1)
    {
    echo"<td align='center' valign='middle'><strong>Nilai Tugas Akhir</strong></td>";
    }

echo    "<td align='center' valign='middle'><strong>Nilai Akhir</strong></td>
    <td align='center' valign='middle'><strong>Grade</strong></td>
  </tr>";

        while(list($nim,$nama,$modulke,$nilai,$nilai_tugasakhir) = mysql_fetch_row($result)) {
            $array_nim[$nim] = $nim;
            $array_nama[$nim] = $nama;
            $array_nilai[$nim][$modulke]= $nilai;
            $array_nilaita[$nim][$nilai_tugasakhir]= $nilai_tugasakhir;

        }

            foreach($array_nim as $nim) {
            echo "<tr><td align='center' valign='middle'>".(++$nomor)."</td>";
            echo "<td align='center' valign='middle'>".$nim."</td>";
            echo "<td align='center' valign='middle'>".$array_nama[$nim]."</td>";

            for($i=1;$i<=$jml_modul;$i++) 
            {
                echo "<td align='center' valign='middle'>".$array_nilai[$nim][$i]."</td>"; 
                $nilaimodul += (array_sum(array($array_nilai[$nim][$i])));

            }
                            $ratarata = ($nilaimodul);

            echo "<td align='center' valign='middle'>".round ($ratarata,2)."</td>";
$ntugasakhir = $array_nilai[$nim][$jml_modul-($jml_modul-1)];

    if ($setting_status_ta=0)
    {
    }
    if ($setting_status_ta=1)
    {
            echo "<td align='center' valign='middle'>".round ($ntugasakhir,2)."</td>";
    }

$nialiakhirpraktikum = $ntugasakhir+$ratarata;
            echo "<td align='center' valign='middle'>".round ($nialiakhirpraktikum,1)."</td>";
    if ($nialiakhirpraktikum>79)
                                    $grade="A";
                                 else if ($nialiakhirpraktikum<=79 AND $nialiakhirpraktikum>67)
                                    $grade="B";
                                 else if ($nialiakhirpraktikum<=67 AND $nialiakhirpraktikum>55)
                                    $grade="C";
                                 else if ($nialiakhirpraktikum<=55 AND $nialiakhirpraktikum>44)
                                    $grade="D";
                                 else
                                    $grade="E"; 
            echo "<td align='center' valign='middle'>".$grade."</td>";
            echo "</tr>";
        }
echo "</table>";
            echo "<br/> <a href='javascript:history.back()'>Klik Disini Untuk Kembali</a>";

    }    
?> 
```

我的问题，为什么Rata-Rata（是平均NILAI）列将数组结果与前一个数组的结果相加？有关更多详细信息，请参阅此处的图片。（**链接图片：[https](https://www.diigo.com/item/image/3gviv/3m98?size=o)** ://www.diigo.com/item/image/3gviv/3m98?size=o ）

而我想对像这张图片一样的列进行平均的结果。（**链接图片：[https](https://www.diigo.com/item/image/3gviv/6ke4?size=o)** ://www.diigo.com/item/image/3gviv/6ke4?size=o ）

我的脚本有什么问题？

注意：Nilai Tugas Akhir 列 Nilai Akhir 等级尚未确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:45:07.157

只需添加初始化变量

```
$nilaimodul = 0; // try adding this to your code
for($i=1;$i<=$jml_modul;$i++) 
{
    echo "<td align='center' valign='middle'>".$array_nilai[$nim][$i]."</td>"; 
    $nilaimodul += (array_sum(array($array_nilai[$nim][$i])));
}
$ratarata = ($nilaimodul); 
```

# php - 基于数据库中时间记录的打开/关闭状态

> ID：13902257
> 
> 赞同：1
> 
> 时间：2012-12-16T14:31:09.950
> 
> 标签：php, mysql, codeigniter

我有一个 mySQL 表，用于根据时间范围指示商店开店或关店的天气：

```
 shift table
--------------
 shift_id
 day_of_week    (1-7 : Monday-Sunday)
 open_time      (time, default NULL)
 close_time     (time, default NULL)
 type           (1 || 2) 
```

字段类型说明： **1**表示同一天内的第一个时间帧，**2**表示该时间帧是同一天内的第二个时间帧。例如商店在 13:00 - 15:00 和 18:00 - 01:00 营业。

我正在使用以下方法获取当前日期：

```
$jd = cal_to_jd(CAL_GREGORIAN,date("m"),date("d"),date("Y"));
    $day = jddayofweek($jd, 0);

    switch($day){
        case 0:
            $curDay = 7;
        break;
        default:
            $curDay = $day;
        break;
    }
    return $curDay; 
```

我正在使用以下方法获取当前时间：

```
$timeString = "%H:%i:%s";
$curTime = mdate($timeString, time()); 
```

**复杂示例如下**：
**当前日期**：星期一
**当前时间**：02:00。
**周日时间范围**：15:00 - 18:00 和 21:00 - 02:30。
**周一时间范围**：08:30 - 15:30。

> 显然，班次是**开放**的，但基于周日的时间范围，而不是在当天的周一。

在给定日期的给定时间，查询我的表（或在需要时更改我的表）的最佳方法或 100% 准确的方法来定义每次班次是打开还是关闭的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:12:13.863

```
function shop_open(){
    //Get current day
    $day = $this->_get_current_day();

    //Get current time
    $timeString = "%H:%i:%s";
    $ordertime = mdate($timeString, time());
    //Predefine ability to order to false
    $canOrder = false;

    $getShift = $this->db->query("select * from `shop_hours` where `day_of_week` = $day AND !ISNULL(`open_time`) ORDER BY `type`");
    $day_num_rows = $getShift->num_rows();

    switch($day_num_rows){
        case 0: //No records
            $canOrder = false;
            break;

        case 1: //Only 1 timeframe
            foreach($getShift->result() as $row){
                $open_time = $row->open_time;
                $close_time = $row->close_time;
            }

            if($open_time <= $close_time){//Timeframe is within the same day [no overlap]

                if($open_time < $ordertime && $close_time > $ordertime){//Current time is within timeframe
                    $canOrder = true;
                }else{
                    $canOrder = false;
                }

            }else if($open_time > $close_time){//There s your overlap [timframe "catches" the next day]

                if($open_time < $ordertime && '23:59' >= $ordertime){//Check till midnight first
                    $canOrder = true;
                }else{//Check in the previous day

                    if($day == 1){ $previousDay = 7; }else{ $previousDay = $day-1; }

                    $getPrvDayShift = $this->db->query("select * from `shop_hours` where `day_of_week` = $previousDay ORDER BY `type`");
                    $prv_day_num_rows = $getPrvDayShift->num_rows();

                    switch($prv_day_num_rows){
                        case 0://No records
                            $canOrder = false;
                            break;
                        case 1://One record found
                            foreach($getPrvDayShift->result() as $row2){
                                $prv_close_time = $row2->close_time;
                            }

                            if($prv_close_time > $ordertime){ //So if the previous day close time is greater than current, we are good to go
                                $canOrder = true;
                            }else{
                                $canOrder = false;
                            }

                            break;
                        case 2: //2nd record found
                            foreach($getPrvDayShift->result() as $row2){
                                if($row2->type == 2){
                                    $prv_close_time = $row2->close_time;
                                }
                            }
                            if($prv_close_time > $ordertime){ //Same shit, different timeframe within the same day 
                                $canOrder = true;
                            }else{
                                $canOrder = false;
                            }
                            break;
                    }

                }

            }
            break;

        case 2: //Ok now we have to check the case of 2 timeframes together

            for($i=1; $i<3; $i++){
                foreach($getShift->result() as $row){
                    if($row->type == $i){
                        $open_time = $row->open_time;
                        $close_time = $row->close_time;
                    }
                }
                if($open_time <= $close_time){//Again, same day [no overlap]
                    if($open_time < $ordertime && $close_time > $ordertime){//Good to go we are within timeframe
                        $canOrder = true;
                    }else{
                        $canOrder = false;
                    }
                }else if($open_time > $close_time){//There s your overlap
                    //Check till midnight
                    if($open_time < $ordertime && '23:59' >= $ordertime){ $canOrder = true; }
                }
            }

            if(!$canOrder){
                //Now we should check the previous day also if $canOrder is still negative
                if($day == 1){ $previousDay = 7; }else{ $previousDay = $day-1; }
                $getPrvDayShift = $this->db->query("select * from `shop_hours` where `day_of_week` = $previousDay ORDER BY `type`");
                $prv_day_num_rows = $getPrvDayShift->num_rows();

                switch($prv_day_num_rows){
                    case 0:
                        $canOrder = false;
                        break;
                    case 1:
                        foreach($getPrvDayShift->result() as $row2){
                            $prv_close_time = $row2->close_time;
                        }
                        if($prv_close_time > $ordertime){ $canOrder = true; }else{ $canOrder = false; }

                        break;
                    case 2:
                        foreach($getPrvDayShift->result() as $row2){
                            if($row2->type == 2){
                                $prv_close_time = $row2->close_time;
                            }
                        }
                        if($prv_close_time > $ordertime){ $canOrder = true; }else{ $canOrder = false; }
                        break;
                }
            }

            break;
    }
    return $canOrder;
} 
```

$this->_get_current_day() 在我的问题中。

我想一定有一个更优雅和安全的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:10:32.220

这就是我的想法：

```
CREATE TABLE Shifts (
  shift_id INT AUTO_INCREMENT PRIMARY KEY,
  start_day CHAR(9) NOT NULL,
  start_time TIME NOT NULL,
  end_day CHAR(9) NOT NULL,
  end_time TIME NOT NULL
) ENGINE = InnoDB; 
```

现在我想起来了，我不确定你甚至需要`end_day`. 但是，使用：

```
INSERT INTO Shifts (
  start_day,
  start_time,
  end_day,
  end_time
) VALUES
( LOWER('Sunday'), '15:00:00', LOWER('Sunday'), '18:30:00' ),
( LOWER('Sunday'), '21:00:00', LOWER('Monday'), '26:30:00' ),
( LOWER('Monday'), '12:00:00', LOWER('Monday'), '18:00:00' ),
( LOWER('Tuesday'), '10:00:00', LOWER('Tuesday'), '20:45:00' ),
( LOWER('Wednesday'), '16:00:00', LOWER('Wednesday'), '19:30:00' ),
( LOWER('Thursday'), '10:00:00', LOWER('Thursday'), '17:00:00' ),
( LOWER('Thursday'), '19:00:00', LOWER('Friday'), '25:30:00' ),
( LOWER('Friday'), '16:00:00', LOWER('Saturday'), '24:30:00' ),
( LOWER('Saturday'), '15:00:00', LOWER('Saturday'), '20:00:00' ),
( LOWER('Saturday'), '18:30:00', LOWER('Sunday'), '27:00:00' ) 
```

然后，您可以使用以下内容：

```
SELECT DAYNAME(NOW()), start_day
FROM Shifts
WHERE (start_day = LOWER(DAYNAME(NOW()))
       AND start_time < CURTIME()
       AND end_time > CURTIME())
   OR (start_day = LOWER(DAYNAME(DATE_SUB(NOW(), INTERVAL 1 DAY)))
       AND start_time < ADDTIME('24:00:00', CURTIME())
       AND end_time > ADDTIME('24:00:00', CURTIME())) 
```

你可以在这里测试：

[http://sqlfiddle.com/#!2/41a26/34](http://sqlfiddle.com/#!2/41a26/34)

并尝试使用不同的测试值：

```
SELECT DAYNAME(NOW()), start_day
FROM Shifts
WHERE (start_day = LOWER('Friday')
       AND start_time < '01:12:35'
       AND end_time > '01:12:35')
   OR (start_day = LOWER('Thursday')
       AND start_time < ADDTIME('24:00:00', '01:12:35')
       AND end_time > ADDTIME('24:00:00', '01:12:35')) 
```

[http://sqlfiddle.com/#!2/41a26/33](http://sqlfiddle.com/#!2/41a26/33)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T21:27:46.210

为了区分延伸到第二天的时间范围和没有延伸到第二天的时间范围，任何时间范围都不能超过 24 小时。因此，这些时间框架的收盘时间必须小于或等于开盘时间。

然后，此查询应在给定时间找到打开的班次：

```
SELECT shift_id
FROM shifts
WHERE :curDay = day_of_week   
AND :curTime >= open_time                                -- today
AND (:curTime <= close_time OR close_time <= open_time)  -- shift may end tomorrow
OR :curDay = IF(day_of_week=1,7,day_of_week-1)           -- check yesterday
AND :curTime <= close_time AND close_time <= open_time   -- shift started yesterday 
```

如果可能的话，我会更改表格，将跨越午夜的班次分成两个班次，一个在 24:00 结束，另一个从第二天 00:00 开始。

# mysql - 加载数据本地 infile - 选择忽略最后一列

> ID：13902262
> 
> 赞同：2
> 
> 时间：2012-12-16T14:31:31.613
> 
> 标签：mysql, select, csv, load-data-infile

**我正在尝试使用加载数据本地 infile**将 csv 文件导入 mysql 数据库

 **我的 csv 文件如下所示：

```
1;Lubos;Chrapna;92;muz;Topolcany
2;Branislav;Grecni;28;muz;Topolcianky
3;David;Forgac;57;muz;Hronsky Benadik
4;Imrich;Doci;58;muz;Kosice 
```

表我想把这个 cvs 文件看起来像这样：

```
 CREATE TABLE IF NOT EXISTS DIM_zakaznik (
   id int(5),
   meno varchar(15),
   priezvisko varchar(15),
   vek int(15),
   pohlavie varchar(15),
   bydlisko varchar(15)) 
```

我的查询如下所示：

```
 load data local infile 'dim_zakaznik.csv' into table DIM_zakaznik 
    fields terminated by ';'
    enclosed by '\n'
    lines terminated by '\n'; 
```

它工作得很好，当我在 phpMyAdmin 中查看该表时，一切看起来都不错，但我的问题是，当我尝试运行 select 时，它忽略了最后一列（称为“bydlisko”）

例如我试试这个：

```
 SELECT * FROM `dim_zakaznik` WHERE `bydlisko`='Topolcany' 
```

它所做的只是说：*“MySQL返回了一个空结果集（即零行）。（查询耗时0.0184秒）”*

它不应该是空结果对吗？它不仅仅适用于最后一列，我不知道为什么。当我之前尝试使用这些列加上我添加了另一列（该列在表中的最后一列）时，它忽略了另一列（即表中的最后一列）

我真的很感激一些帮助。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:56:41.480

不要在查询中使用**“由 '\n' 括起来”**部分，因为**CSV**中的字段不由 '\n' 分隔。尝试删除该部分，然后再次运行您的查询。

另外，就像备注一样，请确保不要截断列数据。最后一列长 15 个字符。15个字母的单词够吗？（Varchar 需要多一个字节作为长度，因此值“Hronsky Benadik”必然有 16 个）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-05T17:59:04.157

所以一个旧的，但我只是偶然发现了这个，并注意到它没有很好的答案。我每次分配并在数据库类中对“上传 csv 作业”进行评分时都会看到这种情况。你的 .csv 文件是什么样的，你没有在这里展示。

如果您显示的此查询不起作用：

```
SELECT * FROM `dim_zakaznik` WHERE `bydlisko`='Topolcany' 
```

然后我觉得有必要问一下，这个查询是否有效：

```
SELECT * FROM `dim_zakaznik` WHERE `bydlisko`=' Topolcany' 
```

如果是这样，请记住：“空格是为人类准备的”，并相应地调整您的 .csv 文件。（如果您的表格出现格式问题，也检查 LINES TERMINATED BY '\r\n' 会有所帮助。**

# android - 遍历列表视图并保存已检查的任何视图的数据

> ID：13902278
> 
> 赞同：1
> 
> 时间：2012-12-16T14:33:07.963
> 
> 标签：android

嘿，我创建了一个列表视图并使用自定义 ArrayListAdapter 并覆盖了 getView() 方法。我有一个保存按钮来保存已选中的列表视图项目中的数据。因为它们包含复选框。现在的问题是，当我使用 getchildCount 方法保存数据来循环每个项目（行，孩子）时，它只会遍历可见项目。如果我使用 getCount() 方法，它会给出 NullPointerexception，因为它没有考虑不可见的项目。我知道我必须使用我的适配器来做这一切，但是怎么做？？？？？？？？？？？？这是我使用适配器适配器的课程--------------

```
package com.bmi.cal.hitesh; 
```

公共类早餐扩展活动{

```
@Override
public void finish() {
    // TODO Auto-generated method stub
    super.finish();
    db.close();
}
float cal_needed=0;
public int counter =0,listItemCount=0,flag=1;
TextView tv_cal_count;
CheckBox        check;
public ListView         list;
ContentValues   values = new ContentValues();
SQLiteDatabase  db;
List<Employer>  data = new ArrayList<Employer>();
Cursor          cur,cur2;
String          type, title,form,descr,tv_cal_str;
int calories;
private Button done;
private TextView tv_cal_needed;
private String cust;
 int temp_diet_id[]= new int[234];
//final String CREATE_TABLE= "CREATE TABLE IF NOT EXISTS Bfast_table (" + "id INTEGER PRIMARY KEY AUTOINCREMENT," + "diet TEXT,calories INTEGER,type INTEGER);"; 
@Override
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
         final String MYPREFS = "mySharedPreferences";
         SharedPreferences mySharedPreferences = getSharedPreferences(MYPREFS,0);
        list= (ListView)findViewById(R.id.list);
        done = (Button)findViewById(R.id.button1);
        tv_cal_count = (TextView)findViewById(R.id.tv_cal_count);
        tv_cal_needed = (TextView)findViewById(R.id.tv_calories);
        check = (CheckBox)findViewById(R.id.checkBox1);
        db = openOrCreateDatabase("bmi.db",SQLiteDatabase.CREATE_IF_NECESSARY , null );
        db.setVersion(1);
        db.setLocale(Locale.getDefault());
        cust = mySharedPreferences.getString("txt_cust", null);
        db.setLockingEnabled(false);
        db.execSQL("CREATE TABLE IF NOT EXISTS cust_diet(" + "cd_id INTEGER PRIMARY KEY AUTOINCREMENT," + "cust_id Integer,diet_id INTEGER,cd_validity DATE);");
        try {
            cur = db.query("tbl_diet",null,"type=?",new String[] {"Breakfast"}, null,null, null);
            cur.moveToFirst();
            while(!cur.isAfterLast())
            {
                    title = cur.getString(1);
                    descr = cur.getString(2);
                    form = cur.getString(6);
                    type = cur.getString(5);
                    calories = cur.getInt(3);
                    data.add(new Employer(title,"Calories : " + calories,"("+descr+")",form));
                    cur.moveToNext();
            }
            list.setAdapter(new EmployerArrayAdapter(this, data));

         cur.close();

        } catch (Exception u) {
            u.printStackTrace();
        }
        done.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

                int flag = 1;
                listItemCount = list.getCount();
                            // TODO Auto-generated method stub
                System.out.println(cust+"aaaaaaaaaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAaaaaaaa"+list.getCount());
                cur = db.query("user_bmi",null,"cust_id=?",new String[]{cust}, null,null, null);
                System.out.println(cur.getCount()+"aaaaaaaaaaaaaaaa");
                cur.moveToFirst();
                cal_needed = (Float.parseFloat(cur.getString(9)))*(0.25f);                      
                cur.close();
                System.out.println(cust+"bbbbbbb");
                tv_cal_needed.setText("you must not exceed "+ cal_needed +" calories");
                tv_cal_count.setText("calories of your selected diets are as follows : ");
                 for(int i=0; i<listItemCount; i++)
                {   TextView tv_name= (TextView) ((View)list.getChildAt(i)).findViewById(R.id.textViewName);
                     TextView tv_calorie= (TextView) ((View)list.getChildAt(i)).findViewById(R.id.textViewAddress);
                 CheckBox cbox = (CheckBox) ((View)list.getChildAt(i)).findViewById(R.id.checkBox1);
                 if(cbox.isChecked())
                  { tv_cal_str = tv_name.getText().toString(); 
                    cur = db.query("tbl_diet",null,"diet_title=?",new String[] {tv_cal_str}, null,null, null);
                    cur.moveToFirst();
                    temp_diet_id[counter]= cur.getInt(0);;
                    counter++;
                    tv_cal_count.append(tv_calorie.getText()+".");
                    System.out.println(cust+"cccccccc"+temp_diet_id[counter-1]);
                       System.out.println("not saved sill"+counter+"11111111111111111111111");
                     String temp_cal= tv_calorie.getText().toString().substring(11);
                      System.out.println("eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee11111111111111111111111");
                     float temp_calorie = Float.parseFloat(temp_cal);
                      System.out.println("eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee222222222222222222222222");
                        if(temp_calorie>cal_needed)
                        {  System.out.println("eeeeeeeeeeeeeeeeeeeeeee3333333333333333333333333");
                            System.out.println(cust+"dddddddddd");
                            flag=0;

                        }
                  }
                 cur.close();
                  }

               System.out.println("not saved sill"+counter+"22222222222222222222");

                if(counter<=3 && counter>=1)
                {  
                    for(int i=0; i<listItemCount; i++)
                    {
                    CheckBox cbox = (CheckBox) ((View)list.getChildAt(i)).findViewById(R.id.checkBox1);
                    if(cbox.isChecked())
                         cbox.setChecked(false);
                    }
                final int temp_count = counter;
                       System.out.println("not saved sill"+counter+"3333333333333333333333");
                      if(flag==1){
                        AlertDialog.Builder builder = new AlertDialog.Builder(BreakFast.this);
                        builder.setMessage("Do you want to save your BreakFast?")
                               .setCancelable(false)
                               .setPositiveButton("Save", new DialogInterface.OnClickListener() {
                                   public void onClick(DialogInterface dialog, int id) {
                                       System.out.println("not saved sill"+temp_count+"3333333333333333333333");
                                        for(int i=0; i<temp_count; i++)
                                                {
                                                    cur2 = db.query("user_bmi",null,"cust_id=? and bmi_active=?",new String[]{cust,"1"}, null,null, null);
                                                    cur2.moveToFirst();
                                                    System.out.println("not saved sill");
                                                    values.put("diet_id",temp_diet_id[i]);
                                                    values.put("cd_validity",cur2.getString(5));
                                                    values.put("cust_id",cust); System.out.println("saved");
                                                    db.insert("cust_diet", null, values);
                                                    cur.close();    
                                                    cur2.close();
                                                }   

                                                           tv_cal_count.setText("Your BreakFast has been saved");
                                                            tv_cal_needed.setText(null);
                                                           done.setVisibility(View.INVISIBLE);                                     }
                               })
                               .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

                                   public void onClick(DialogInterface dialog, int id) {
                                       for(int i=0; i<listItemCount; i++)
                                    {
                                    CheckBox cbox = (CheckBox) ((View)list.getChildAt(i)).findViewById(R.id.checkBox1);
                                    if(cbox.isChecked())
                                         cbox.setChecked(false);
                                    } 
                                       dialog.cancel();
                                       tv_cal_count.setText(null);
                                   }
                               });
                        AlertDialog alert = builder.create();
                        alert.show();
                    }
                        else
                        {
                            AlertDialog.Builder builder = new AlertDialog.Builder(BreakFast.this);
                            builder.setMessage("please select diet which do not exceed "+cal_needed+" calories!!!")
                                   .setCancelable(false)
                                   .setPositiveButton("OK", new DialogInterface.OnClickListener() 
                                   {
                                       public void onClick(DialogInterface dialog, int id) 
                                       {
                                           tv_cal_count.setText(null);
                                           for(int i=0; i<listItemCount; i++)
                                           {
                                               CheckBox cbox = (CheckBox) ((View)list.getChildAt(i)).findViewById(R.id.checkBox1);
                                               if(cbox.isChecked())
                                               cbox.setChecked(false);
                                            }
                                       }
                                   });

                            AlertDialog alert = builder.create();
                            alert.show();

                        }
                        counter=0;
                    }
                    else
                    {
                        tv_cal_count.setText(null);
                        Dialog mesg = new Dialog(BreakFast.this);
                        TextView text =  new TextView(BreakFast.this);
                        if(counter==0)
                        text.setText("plzz select some items but not more then three!!!");
                        else
                            text.setText("can't select more then three");
                        mesg.setContentView(text);

                        mesg.show();
                        counter=0;
                        for(int i=0; i<listItemCount; i++)
                        {
                        CheckBox cbox = (CheckBox) ((View)list.getChildAt(i)).findViewById(R.id.checkBox1);
                        if(cbox.isChecked())
                             cbox.setChecked(false);
                        }
                    }  

            }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:00:24.967

使用 try catch 块并发布堆栈跟踪。

# regex - 将任何正则表达式转换为右线性正则语法的算法

> ID：13902279
> 
> 赞同：3
> 
> 时间：2012-12-16T14:33:08.930
> 
> 标签：regex, algorithm, grammar

是否有一种算法可以将任何正则表达式转换为正确的线性语法？我熟悉将简单正则表达式转换为 CFG 的算法。右线性语法有更严格的规则。A -> a B 或 A -> a 。这使得构建算法变得困难。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T06:26:02.453

有一种算法方法可以将正则表达式 (RE) 转换为非确定性有限自动机 (NFA) [[1]](http://www.cse.msu.edu/~torng/360Book/RegLang/RtoN/) [[2]](http://www.csee.umbc.edu/~squire/cs451_l6.html) [[3]](http://www.scribd.com/doc/53090979/2/Program-No-2-ALGORITHM-TO-CONVERT-REGULAR-EXPRESSION-TO-NFA)
还有一种算法可以将 DFA 转换为 Right-Linner-Grammar (RLG)。[[1]](http://www.jflap.org/tutorial/fa/dfa2rg/index.html) [[2]](http://www.cs.colostate.edu/~massey/Teaching/cs301/RestrictedAccess/Slides/301lecture05.pdf)

因此，当然，它们是将 RE 转换为 RLG 的算法方式。

我想你可能想学习这个[从正则表达式构造一个等效的正则语法](https://stackoverflow.com/questions/13816439/left-linear-and-right-linear-grammars/13945932#13945932)

# java - 最佳实践：使用什么，包装类或原始数据类型？

> ID：13902281
> 
> 赞同：16
> 
> 时间：2012-12-16T14:33:11.333
> 
> 标签：java

在 Java 中，我们有原始数据类型和一堆包装类。我的问题是什么时候用什么？我知道当我们需要创建集合时，我们将需要使用包装类，但除此之外还有其他特定情况应该使用包装类吗？

此外，除非绝对必要，否则是否应该始终使用原始数据类型？

例如，如果我正在创建一个具有整数和布尔属性的类：

```
Class MyClass {
    ...
    private Integer x;
    private Boolean y;
    ...
} 
```

或者

```
Class MyClass {
    ...
    private int x;
    private boolean y;
    ...
} 
```

哪一个应该更频繁地使用？在什么情况下应该使用另一个？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-16T14:35:43.393

Use the primitive type unless you have no other choice. The fact that it's not nullable will prevent many bugs. And they're also faster.

Besides collections, wrapper types are typically used to represent a nullable value (for example, coming from a database nullable column).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-16T14:47:21.950

[这篇文章](http://www.go4expert.com/forums/showthread.php?t=22183)谈到了包装类，他们说：

> Java API 中的包装类有两个主要用途：
> 
> 1- 提供一种在对象中“包装”原始值的机制，以便可以将原始值包含在为对象保留的活动中，例如添加到集合中，或从具有对象返回值的方法返回。
> 
> 2- 为原语提供各种实用功能。这些函数中的大多数都与各种转换有关：将基元与字符串对象相互转换，以及将基元和字符串对象与不同的基数（或基数）相互转换，例如二进制、八进制和十六进制。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-16T14:45:48.383

包装类是不可变的，因此没有设置方法。每次您想要更改其值时，都必须创建一个新对象。这将创建不必要的对象。int 原语只表示数字的位。您没有创建任何新对象。因此，我建议在不使用集合时使用原语。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-16T14:41:59.767

当您的系统产生必须考虑的不确定性级别时，包装类可能会非常有用。例如，在wireshark 等数据包捕获程序中使用布尔值，如果您无法确定数据包是否已从发送方修改，则允许您传递空值。特别是在您能够确定其他数据包操作的情况下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-16T14:56:49.283

在 c# 中使用原始类型时，我更喜欢在声明中使用 c# 别名，并在访问静态成员时使用 .NET 名称。这只是个人喜好。这两个名字是绝对等价的。

```
int x = Int32.Parse("123"); 
```

# jquery - 从 Slider Widget 中检索两个 var 值？

> ID：13902290
> 
> 赞同：0
> 
> 时间：2012-12-16T14:34:06.570
> 
> 标签：jquery

我正在尝试使用范围实现[Jquery UI Slider](http://jqueryui.com/slider/#range)。但是，我似乎找不到任何两个变量来从中获取值：

```
 $( "#entrance-price" ).slider({
    range: true,
    min: 0,
    max: 500,
    values: [ 0, 500 ],
    slide: function( event, ui ) {
        $( "#entrance-price-amount" ).val( "$" + ui.values[ 0 ] + " - $" + ui.values[ 1 ] );
    }
});
$( "#entrance-price-amount" ).val( "$" + $( "#entrance-price" ).slider( "values", 0 ) +
    " - $" + $( "#entrance-price" ).slider( "values", 1 ) ); 
```

通常，我会做

```
var From = $("#from").val();
var To = $("#to").val(); 
```

但这里似乎有`#entrance-price`0 和`#entrance-price`1。我将如何获得这两个值？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:41:22.613

你是这个意思吗？

```
var from = $("#entrance-price").slider("values", 0);
var to   = $("#entrance-price").slider("values", 1); 
```

# ios - Cocos2d：处理动作、动画、动作序列和 CCTintBy

> ID：13902291
> 
> 赞同：0
> 
> 时间：2012-12-16T14:34:22.007
> 
> 标签：ios, animation, cocos2d-iphone, action

我曾经**在**运行新操作时停止所有操作。我在使用**CCTintBy**操作时注意到了一些问题，因为颜色正在逐渐添加并且对“反向”的调用（参见 CCTintBy **(CCActionInterval*) 反向**函数）没有被调用（如停止）。

这让我**想知道我目前的方法和对 CCActions 的理解。**

例如。每当运行一个新动作时，我都会调用 [self stopAllActions] 但这并不适合 CCTintBy 动作的使用（它也会停止该动作并使精灵变为半色，并且底色会改变为相反函数不会被 stopAllActions 停止调用）。

我留给你我项目中最常见的操作。我在想而不是调用 stopAllActions，如果该操作尚未运行，则仅调用停止特定操作。这会是一个好习惯吗？

```
 -(void) runExplosionAnimation
 {
[self stopAllActions];
//here should verify if the action is not already running and if so stop it
//To do so I should have a member variable like: CCAction * explosionAnim = [CCSequence actions: [CCAnimate actionWithDuration:0.4f animation:anim restoreOriginalFrame:false],  [CCHide action],  nil];
//Plus a boolean to distinguish if it is already running.. 

CCAnimation* anim = [[CCAnimationCache sharedAnimationCache] animationByName:@"bbb"];
if(anim!=nil){
    [self runAction:[CCSequence actions: [CCAnimate actionWithDuration:0.4f animation:anim restoreOriginalFrame:false],  [CCHide action],  nil]];
}
else{
    [self loadSharedAnimationIfNeeded];
}
} 
```

使用布尔值确定 CCTintBy 操作是否仍在运行的一种方法是在再次调用 CCTintBy 操作之前手动恢复原始颜色。

```
-(void) gotHitWithFactor:(int)factor
    {
[self runGotHitAnimation];

self.hitPoints -= factor * 1;
if (self.hitPoints <= 0)
{
    isAlive=false;  
    [self runExplosionAnimation]; //Will also set enemy visibility to false
}
 }

-(void) runGotHitAnimation
{
    //hitAction is initialized as [CCTintBy actionWithDuration:0.1f red:100 green:100 blue:111];

    [self stopAction:hitAction];
    self.color = originalColour; //Where originalcolour is initialized as self.colour
    [self runAction:hitAction];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:10:03.400

你知道你可以标记动作，对吧？

CCNode 类具有以下方法：

```
stopActionByTag:
getActionByTag: 
```

如果您运行一个新操作，您只需要说明在每个特定情况下需要停止哪些其他操作。对于复杂的动作使用，我建议在逻辑上将你的动作分成两组：游戏和视觉。

游戏性动作是影响游戏性的所有动作，例如运动。视觉就是这样，视觉效果，如倾斜，旋转，着色。这种区别的关键在于它更容易确定行动的优先级。主要是，视觉动作不应停止、运行或以其他方式影响游戏动作。

# amazon-web-services - AWS 配置 Tomcat 的虚拟目录和电子邮件系统

> ID：13902294
> 
> 赞同：6
> 
> 时间：2012-12-16T14:34:34.593
> 
> 标签：amazon-web-services, amazon-s3

我正在 AWS 上部署我的第一个应用程序，有几件事我找不到解决方案。

1.**文件系统**

该应用程序使用 Lucene 并允许上传图像，因此我猜我需要一个 S3 实例来托管 Lucene 索引和图像。

出于测试目的，在我的本地系统上，我会将这行代码放在 Tomcat 7 中`server.xml`：

`<Context path="/uploads" docBase="D:/myapp/uploads" />`. 现在，您可能知道，所有以 开头的请求`/uploads`都将被服务器路由到`D:/myapp/uploads`。

此外，Lucene API 需要一个绝对路径才能找到索引目录：

```
FSDirectory.open(new File(ConfigUtil.getProperty("D:/myapp/index"))) 
```

我的第一个问题是关于 AWS 控制台中的这种配置。如何获得那些 `D:/aaa/bbb/' 路径？

2.**电子邮件系统**

注册后，会向用户发送一封确认电子邮件。同样，在测试中我使用了 Google 的`smtp.gmail.com`. 我需要一个主机**用户****名**和**密码**才能使 javax.mail API 工作。

我不知道如何获得这些凭据？是 AWS 问题还是域注册商（我使用的是 namecheap）问题。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T20:20:02.107

要在 S3 上托管图像，您有两种选择。

首先允许上传到[EBS 支持的 EC2 实例](https://aws.amazon.com/ebs/)，就像您在测试系统上所做的那样，然后将它们异步移动到 S3。在这种情况下，您可以在 EBS 卷上选择您希望的任何路径来临时存储上传的文件。

或者修改您的前端以允许直接提交到 S3。

同样，您可以在 EBS 卷上选择您希望的任何路径来存储 Lucene 的索引。

关于javax.mail的使用

1.  设为`smtp.gmail.com`主机
2.  创建一个 gmail 帐户
3.  使用新创建的帐户`username`和`password`

# c - A socket didn't join a multicast group but it can receive data.

> ID：13902301
> 
> 赞同：7
> 
> 时间：2012-12-16T14:35:16.077
> 
> 标签：c, linux, network-programming, multicast

when I created two udp sockets and I bind them to INADDR_ANY and same port number. but one of them joined a multicast group. but both of them can receive data from the same multicast group, even one of sockets didn't join to the multicast group.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T16:05:29.310

linux 内核不跟踪 IGMP 连接的状态。IGMP 是一种路由器协议。向多播组发送 IGMP 加入只是告诉路由器它应该将数据包转发到给定的地址和端口。请注意，路由器必须能够与 IGMP 通信。

这意味着尽管您曾经`setsockopt()`加入多播组，但内核不会像您预期的那样跟踪每个套接字的成员资格。内核只是向路由器发送一个 IGMP 加入数据包。您可以使用wireshark 或其他方式验证这一点。

由于内核不跟踪套接字的 IGMP 状态，因此该地址和端口上的传入流量只是内核的“常规”流量。

因此，如果您将两个套接字绑定到相同的地址和端口，然后使用该地址和端口发送 IGMP 连接，则数据包在两个套接字上都可用是预期的行为。

BTW：为什么你需要两个套接字绑定到相同的地址和端口？

更新：根据@Ambroz Bizjak 的解释（谢谢），Linux 内核不跟踪 IGMP 连接状态的说法是不正确的。确实如此。但是，如果多个套接字绑定到相同的地址和端口，它不会使用此信息来决定哪些数据包应该转发到哪个套接字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T12:55:44.217

内核根本不会根据套接字所属的多播组来过滤传入的多播数据包。如果您不将套接字添加到组，如果同一系统上的其他套接字是成员，它可能仍会接收到组的多播。（我不确定如果多播到达但*没有*套接字是成员会发生什么。您可以测试是否愿意。）

请注意，内核实际上*确实*跟踪组所有权，甚至是每个套接字。它必须，否则无法正确实现 IGMP 协议的客户端。例如，内核需要回复来自路由器的各种 IGMP 查询（询问主机加入了哪些组），因此当没有更多套接字加入时，它知道发送离开组消息一个特定的群体。

# php - php strtotime function showing 1 hour more

> ID：13902305
> 
> 赞同：0
> 
> 时间：2012-12-16T14:35:56.550
> 
> 标签：php, xampp, strtotime, unix-timestamp

I am trying to convert **1355657846 and 1355677646** unix timestamp to **Y-M-D H:i:s format**. The problem is in H:i:s . It should be **11:37:24 and 17:07:26** respectively but it is showing 12:37:24 and 18:07:26.

```
<?php

echo date('Y-m-d H:i:s','1355657846');//2012-12-16 12:37:26,must be 11:37:26

echo date('Y-m-d H:i:s','1355677646');//2012-12-16 18:07:26,must be 17:07:26

?> 
```

It should be 11:37 and 17:07 because I checked it in [unix timestamp conversion](http://www.onlineconversion.com/unix_time.htm)

and also **it is the time I had received mail in gmail account**. And I got these unix timestamp from gmail( using php imap function...$overview->udate)

I am testing this on local xampp server. Can anyone suggest me where I am going wrong here?

PS: I checked [related question in stackoverflow](https://stackoverflow.com/questions/3303970/php-strtotime-function-wrong-by-1-hour), but here I want to convert timestamp to datetime, which I think should be constant irrespective of timezone.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:41:25.487

这可能是由于 TimeZone 设置。了解 PHP[`date_default_timezone_set()`](http://php.net/manual/en/function.date-default-timezone-set.php)并确保您的本地时区与您真正想要的时区匹配。所有 Unix 时间戳在全球范围内都是相同的。但是本地 DATETIME 值在全球范围内有所不同。您可能会看到这篇文章（希望如此）：

[http://www.experts-exchange.com/Web_Development/Web_Languages-Standards/PHP/A_201-Handling-date-and-time-in-PHP-and-MySQL.html](http://www.experts-exchange.com/Web_Development/Web_Languages-Standards/PHP/A_201-Handling-date-and-time-in-PHP-and-MySQL.html)

最好的问候，~雷

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:41:54.367

它绝对是您本地 Web 服务器中的时区设置。

检查 php.ini 中的 date.timezone 值。它也可能被 htaccess 文件或您的 PHP 脚本覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T14:42:57.083

创建 DateTime 后包含 strtotime。解析取决于服务器默认时区。

如果您想在合适的时区找到您的日期，有两种方法：

```
default_timezone_set('Europe/Paris');//for example 
```

或者 ：

```
$date = DateTime::createFromFormat('U',$timestamp,new DateTimezone('Europe/Paris'));
echo $date->format('Y-m-d H:i:s); 
```

[你可以在这里](http://www.experts-exchange.com/Web_Development/Web_Languages-Standards/PHP/A_201-Handling-date-and-time-in-PHP-and-MySQL.html)找到更多信息。

# cocoa - Disable All Interaction with a Cocoa WebView

> ID：13902306
> 
> 赞同：0
> 
> 时间：2012-12-16T14:35:57.997
> 
> 标签：cocoa, webview

I'm having difficulty in using a WebView that is being used purely to display a preview of a website - and I want to ignore all/any interactions the user may try to make with it.

I've already tried [Cocoa webView - Disable all interaction](https://stackoverflow.com/questions/1251561/cocoa-webview-disable-all-interaction) to no avail; you can still easily spam-click and it will recognise the presses. (at least there's no context menu)

This one seems overkill; [Disable a WebKit WebView](https://stackoverflow.com/questions/1878281/disable-a-webkit-webview) - there must be an easier way.

In iOS I know exactly how to solve this, but as a Cocoa newcomer I am stumped - does anyone have any suggestions or better ways to achieve this? Or dump a transparent NSView on top and gobble up interactions? (tried this as well by subclassing an NSView, also to no effect)

Whole project is in IB currently, if this makes any difference.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:03:40.763

我想你想实现一个[WebPolicy 委托](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Protocols/WebPolicyDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/20001912)并让它拒绝导航事件。

# sql - SQL：引用 2 个表的触发器

> ID：13902308
> 
> 赞同：3
> 
> 时间：2012-12-16T14:36:10.223
> 
> 标签：sql, sql-server, database

这可能是一个愚蠢的问题，但它让我追逐我的尾巴。

订单表和产品表，如果订购数量超过库存数量，则...

我可能已经用谷歌搜索了 50 个关键词，查了 3 本书，找不到这样做的方法。这是我尝试做的事情的前提，而不是我尝试过的事情。

```
CREATE TRIGGER tr_check_qty
ON order_details
FOR INSERT,UPDATE
AS
IF (SELECT quantity FROM inserted) > products.quantity_in_stock
    BEGIN
        PRINT 'Orderded quantity cannot exceed quantity in stock'
        ROLLBACK TRANSACTION
    END 
```

我在哪里可以加入他们？我尝试了 20 种不同的方法，尝试在前面声明一个变量，但我找不到这样做的方法。

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T16:05:40.603

你可以这样做：

```
CREATE TRIGGER tr_check_qty ON order_details
FOR INSERT,UPDATE
AS
BEGIN
  -- rollback transaction if any product type in order exceeds stock amount
  IF EXISTS (
    SELECT 
      * 
    FROM 
      inserted
      INNER JOIN products ON inserted.product_id = products.product_id
    GROUP BY
      products.product_id
    HAVING
      SUM(inserted.quantity) > MAX(products.quantity_in_stock)
  )
  BEGIN
    PRINT 'Ordered quantity cannot exceed quantity in stock'
    ROLLBACK TRANSACTION
  END
END 
```

它适用于单行插入和多行插入。

# c# - 为什么我们需要 IEnumerator 和 IEnumerable？

> ID：13902310
> 
> 赞同：4
> 
> 时间：2012-12-16T14:36:18.560
> 
> 标签：c#, .net, ienumerable, ienumerator

好的，所以我只是在处理`IEnumerator`and `IEnumerable`。现在 MSDN 说这些东西的主要目标是遍历客户集合。

很公平，但是我能够在不使用任何一个的情况下迭代自定义集合（或者至少我想这样认为）

```
namespace ienumerator
{

class person
{
    public person(string first, string second)
    {
        fname = first;
        lname = second;
    }
    public string fname { get; set; }
    public string lname { get; set; }
}

class person_list
{
    public person[] list;
    public person_list(person[] per)
    {
        list = new person[per.Length];
        for (int i = 0; i < per.Length; i++)
        {
            list[i] = per[i];
        }
    }
}

class Program
{
    static void Main(string[] args)
    {
        person[] names = new person[3]
        {
            new person("some","one"),
            new person("another","one"),
            new person("sss","ssdad"),
        };

        person_list list_of_names = new person_list(names);
        int i = 0;
        while (i < list_of_names.list.Length)
        {
            Console.WriteLine(list_of_names.list[i].fname);
            i++;
        }
        Console.Read();
    }
 }
} 
```

所以我的理解有什么缺陷，上面给我的结果与我在实施`IEnumerator`and后获得的结果相同`IEnumerable`。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-16T16:49:05.360

> 但是，我能够在不使用任何一个的情况下遍历自定义集合

当然*你*可以在没有接口的情况下迭代*你自己的*集合；*如果你不能，那么你将如何实现接口？*

作为代码实现者，*您*不会为了方便而实现接口。您实现它是为了方便您的代码的*使用者*。该接口的意思是“注意客户：您可以枚举这个集合的内容，而不必知道我是如何实现它的”。

这就是接口的目的：它提供了一种抽象，允许您的代码的使用者使用它，而不必了解它是如何工作的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T14:47:44.307

在您的`main`函数中，您使用了两个方面`person_list`来遍历人员列表，`Length`以及`[]`在特定位置获取集合成员的运算符。

但是，如果您有一些容器或自定义集合没有实现其中一个或两个呢？例如，逐行读取文件的类可能事先不知道集合的长度是多少，因此无法定义`Length`。从队列中读取消息的枚举器可能只能获取下一个，而不是一个，例如，前四个位置`[4]`。在这两种情况下，您仍然可以正确地“迭代”集合。

`IEnumerator`并且`IEnumerable`只需要`foreach`工作所需的属性而不需要其他属性，这就是为什么函数可以将它们用作需求，因为它们知道它们将能够遍历它们传递的任何类型的集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T14:42:00.483

您当然可以在不实现`IEnumerable`接口的情况下迭代自定义集合，但是迭代代码必须知道您的自定义集合。

如果您实现`IEnumerable`，则迭代所有元素的代码不需要知道您的`person_list`类。它使用某个实现的类的实例，如果*您*将实际实例交换为稍后`IEnumerable`也实现的其他东西，它仍然可以工作。`IEnumerable`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-01T06:53:44.623

实际上，在 C# 中，不需要实现`IEnumerable`和`IEnumerator`自定义您自己的集合。如果您使用传统方式迭代集合，这对您来说很好，但是如果您使用*`foreach`*迭代集合就会很麻烦。

另一个原因，如果你想公开你的类以便 VB.NET 用户可以使用你应该考虑实现这两个接口。

请注意，`IEnumerable`非泛型和泛型集合的区别。非泛型一个属于`System.Collection`另一个属于`System.Collection.Generic`命名空间

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T20:52:20.267

有很多方法可以迭代自定义序列。一种方法是使用[迭代器设计模式](http://en.wikipedia.org/wiki/Iterator_pattern)。

迭代器模式用于统一遍历自定义序列（它可以是内存中的集合、生成的集合或其他东西）。在 .NET 世界中，这种模式以下列方式实现：我们有一个实现`IEnumerable`接口的可迭代对象（这向您的类的任何客户表明您有能力遍历您的内容）。

而且我们有一个迭代器本身（实现`IEnumerator`接口的对象），您可以将其视为指向可迭代对象中当前位置的“指针”。因为您可能有内部循环（即一次对同一对象进行多次迭代），所以您必须将可迭代对象从迭代器中分离出来。

基本上有很多方法可以遍历特定序列，但迭代器模式使您能够“概括”这种方法，将遍历算法的特定实现隐藏在实现内部的调用者中。

# java - Memory required by JVM for creating CSV files and zip it on the fly

> ID：13902316
> 
> 赞同：1
> 
> 时间：2012-12-16T14:36:49.020
> 
> 标签：java, object, memory-management, csv

I am creating two CSV files using String buffers and byte arrays.
I use `ZipOutputStream` to generate the zip files. Each csv file will have 20K records with 14 columns. Actually the records are fetched from DB and stored in `ArrayList`. I have to iterate the list and build `StringBuffer` and convert the `StringBuffer` to byte Array to wirte it to the zip entry.

I want to **know** the memory required by JVM to do the entire process starting from storing the records in the `ArrayList`.
I have provide the code snippet below.

```
StringBuffer responseBuffer = new StringBuffer();
    String response = new String();
    response = "Hello, sdksad, sfksdfjk, World, Date, ask, askdl, sdkldfkl, skldkl, sdfklklgf, sdlksldklk, dfkjsk, dsfjksj, dsjfkj, sdfjkdsfj\n";
    for(int i=0;i<20000;i++){
        responseBuffer.append(response);
    }
    response = responseBuffer.toString();
    byte[] responseArray = response.getBytes();
    res.setContentType("application/zip");
    ZipOutputStream zout = new ZipOutputStream(res.getOutputStream());
    ZipEntry parentEntry = new ZipEntry("parent.csv");
    zout.putNextEntry(parentEntry);
    zout.write(responseArray);
    zout.closeEntry();
    ZipEntry childEntry = new ZipEntry("child.csv");
    zout.putNextEntry(childEntry);
    zout.write(responseArray);
    zout.closeEntry();
    zout.close(); 
```

Please help me with this. Thanks in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T14:53:05.153

要分析内存使用情况，您可以使用**Profiler**。

[**JProfiler**](http://www.ej-technologies.com/products/jprofiler/features.html)或[**YourKit**](http://www.yourkit.com/features/index.jsp#live_memory)非常擅长这样做。

[**VisualVM**](http://visualvm.java.net/profiler.html)在一定程度上也不错。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T14:55:10.137

我猜您已经尝试计算将分配给 StringBuffer 和字节数组的字节数。但问题是您无法真正知道您的应用程序将使用多少内存，除非您对 CSV 记录的大小有上限。如果你希望你的软件稳定、健壮和可扩展，恐怕你问错了问题：你应该努力使用固定数量的内存来执行你需要完成的任务，在你的情况下似乎很容易。

关键是，在您的情况下，处理完全是 FIFO - 您从数据库中读取记录，然后将它们（以相同的顺序）写入 FIFO 流（`OutputStream`在这种情况下）。甚至 zip 压缩也是基于流的，并且在内部使用固定数量的内存，因此您在那里完全安全。

而不是将整个输入缓冲在一个巨大的字符串中，然后将其转换为一个巨大的字节数组，然后将其写入输出流 - 您应该从数据库中单独读取每个响应元素（或固定大小的块，例如 100 条记录） time)，并将其写入输出流。就像是

```
res.setContentType("application/zip");
ZipOutputStream zout = new ZipOutputStream(res.getOutputStream());
ZipEntry parentEntry = new ZipEntry("parent.csv");
zout.putNextEntry(parentEntry);
while (... fetch entries ...)
    zout.write(...data...)
zout.closeEntry(); 
```

这种方法的优点是因为它适用于小块，您可以轻松估计它们的大小，并为您的 JVM 分配足够的内存，使其永远不会崩溃。而且您知道，如果您的 CSV 文件将来超过 20K 行，它仍然可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T14:53:13.470

您可以使用 测量内存`MemoryTestbench`。

[http://www.javaspecialists.eu/archive/Issue029.html](http://www.javaspecialists.eu/archive/Issue029.html)

这篇文章描述了该怎么做。它简单，精确到 1 个字节，我经常使用它。
它甚至可以从 junit 测试用例运行，所以它非常有用，而分析器不能从 junit 测试用例运行。

使用这种方法，您甚至可以测量一个 Integer 对象的内存大小。

但是使用 zip 有一件特别的事情。Zipstream 使用本地 c 库，在这种情况下 MemoryTestbench 可能无法测量该内存，只有 java 部分。
您应该尝试两种变体，即 MemroyTestbench，以及使用分析器 (jprof)。

# entity-framework-4 - How to tell EF that this field is in the conceptual model but not in the database

> ID：13902318
> 
> 赞同：-1
> 
> 时间：2012-12-16T14:37:02.013
> 
> 标签：entity-framework-4

What's that attribute that you annotate your model property with to tell EF that please don't look for this field in the database and please don't map it to anything in the database. This is just in the conceptual model?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T20:09:27.700

[未映射]

[http://msdn.microsoftcom/en-us/library/system.componentmodel.dataannotations.schema.notmappedattribute.aspx](http://msdn.microsoftcom/en-us/library/system.componentmodel.dataannotations.schema.notmappedattribute.aspx)

```
namespace Models
{

  public partial class Foo
  {
    public virtual string FirstName { get; set; }

    public virtual string LastName { get; set; }

    [NotMapped]
    public string FullName { get { return FirstName + " " + LastName; } }
  }

} 
```

# mysql - What type of index is ideal for this query?

> ID：13902321
> 
> 赞同：5
> 
> 时间：2012-12-16T14:37:12.510
> 
> 标签：mysql, indexing

I have an example query such as:

```
SELECT 
    rest.name, rest.shortname
FROM
    restaurant AS rest
    INNER JOIN specials ON rest.id=specials.restaurantid
WHERE
    specials.dateend >= CURDATE()
AND
    rest.state='VIC'
AND
    rest.status = 1
AND
    specials.status = 1
ORDER BY
    rest.name ASC; 
```

Just wondering of the below two indexes, which would be best on the restaurant table?

```
id,state,status,name
state,status,name 
```

Just not sure if column used in the join should be included?

Funny enough though, I have created both types for testing and both times MySQL chooses the *primary* index, which is just `id`. Why is that?

**Explain Output:**

```
1,'SIMPLE','specials','index','NewIndex1\,NewIndex2\,NewIndex3\,NewIndex4','NewIndex4','11',\N,82,'Using where; Using index; Using temporary; Using filesort',
1,'SIMPLE','rest','eq_ref','PRIMARY\,search\,status\,state\,NewIndex1\,NewIndex2\,id-suburb\,NewIndex3\,id-status-name','PRIMARY','4','db_name.specials.restaurantid',1,'Using where' 
```

Not many rows at the moment so perhaps that's why it's choosing PRIMARY!?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:26:11.650

为了获得最佳性能，您至少需要 2 个索引：

最重要的索引是外键上的索引：

```
CREATE INDEX specials_rest_fk ON specials(restaurantid); 
```

没有这个，您的查询将执行得很差，因为`rest`匹配`WHERE`条件的每一行都需要完整的表扫描`specials`。

要定义的下一个索引将是帮助查找`rest`给定条件的最少行的索引。只使用了一个索引，因此您希望该索引从尽可能少的行中找到`rest`。

我的猜测，状态和状态：

```
CREATE INDEX rest_index_1 on rest(state, status); 
```

您对 (id, ...) 的索引建议毫无意义，因为 id 是唯一的 - 添加更多列无济于事，实际上如果使用它会降低性能，因为索引条目会更大并且您会得到每个 I/O 页读取的条目更少。

但是您也可以通过更好地编写查询来获得性能；如果将 specials 上的条件移动到连接`ON`条件中，您将获得显着的性能，因为连接条件是在进行连接时评估的，但是条件是在所有连接的行上评估的，这意味着临时结果集由`WHERE`子句要大得多，因此速度较慢。

将您的查询更改为：

```
SELECT rest.name, rest.shortname
FROM restaurant AS rest
INNER JOIN specials 
    ON rest.id=specials.restaurantid
    AND specials.dateend >= CURDATE()
    AND specials.status = 1
WHERE rest.state='VIC'
AND rest.status = 1
ORDER BY rest.name; 
```

请注意特价商品的条件现在在`ON`子句中。

# java - Replace While Pattern is Found

> ID：13902323
> 
> 赞同：1
> 
> 时间：2012-12-16T14:37:29.853
> 
> 标签：java, regex, replace, find

I'm trying to go through a string and replace all instances of a regex-matching string. For some reason when I use `if` then it will work and replace just one string instance of a regex-match. When I change the `if` to `while` then it does some weird replacement over itself and makes a mess on the first regex-matching string while not even touching the others...

```
 pattern = Pattern.compile(regex);
        matcher = pattern.matcher(docToProcess);
        while (matcher.find()) {
            start = matcher.start();
            end = matcher.end();
            match = docToProcess.substring(start, end);
            stringBuilder.replace(start, end, createRef(match));
            docToProcess = stringBuilder.toString();
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T15:00:42.060

除了 sysouts，我只添加了最后一个作业。看看是否有帮助：

```
// your snippet:    
pattern = Pattern.compile(regex);
matcher = pattern.matcher(docToProcess);
while (matcher.find()) {
    start = matcher.start();
    end = matcher.end();
    match = docToProcess.substring(start, end);
    String rep = createRef(match);
    stringBuilder.replace(start, end, rep);
    docToProcess = stringBuilder.toString();
    // my addition:
    System.out.println("Found:         '" + matcher.group() + "'");
    System.out.println("Replacing with: '" + rep + "'");
    System.out.println(" --> " + docToProcess);
    matcher = pattern.matcher(docToProcess);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T15:11:15.020

不确定你到底遇到了什么问题，但也许这个例子会有所帮助：

我想在句子中更改名称，例如：

*   杰克->阿尔伯特
*   阿尔伯特 -> 保罗
*   保罗->杰克

我们可以在类中的[appendReplacement](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#appendReplacement%28java.lang.StringBuffer,%20java.lang.String%29)和[appendTail](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#appendTail%28java.lang.StringBuffer%29)方法的帮助下做到这一点`Matcher`

```
//this method can use Map<String,String>, or maybe even be replaced with Map.get(key)
static String getReplacement(String name) { 
    if ("Jack".equals(name))
        return "Albert";
    else if ("Albert".equals(name))
        return "Paul";
    else
        return "Jack";
}

public static void main(String[] args) {

    String sentence = "Jack and Albert are goint to see Paul. Jack is tall, " +
            "Albert small and Paul is not in home.";

    Matcher m = Pattern.compile("Jack|Albert|Paul").matcher(sentence);

    StringBuffer sb = new StringBuffer();

    while (m.find()) {
        m.appendReplacement(sb, getReplacement(m.group()));
    }
    m.appendTail(sb);

    System.out.println(sb);
} 
```

输出：

```
Albert and Paul are goint to see Jack. Albert is tall, Paul small and Jack is not in home. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T14:47:10.340

如果 createRef(match) 返回一个与 (end - start) 长度不同的字符串，那么您在 docToProcess.substring(start, end) 中使用的索引可能会重叠。

# cryptography - In AES-CCM is the TAG size a user parameter?

> ID：13902326
> 
> 赞同：2
> 
> 时间：2012-12-16T14:37:54.930
> 
> 标签：cryptography, aes

I am developping an AES library which supports [Counter with CBC-MAC mode](http://en.wikipedia.org/wiki/CCM_mode) and I have a question about the TAG (MAC) size.

Is the TAG size an input that must be provided by user or it can be computed from other parameters like header size, IV (counter or nonce) size and returned to user?

In my library I declare a function as following:

```
AES-CCM(Encrypt, header, header size, Nounce, NonceSize, PlainText, 
          PlainTextSize, &TAGSize, &CipherText); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T16:29:38.723

标签大小实际上并不是输入的函数，因此应该由用户设置。请注意，在我看来，nonce 不是这种情况，这使得 CCM 编程有点痛苦。

我检查了 Bouncy Castle 库，它们使用用户输入来确定 MAC 大小（尽管它们会简单地除以 8 来获取字节）。如果没有给出大小，那么他们将使用算法块大小的一半（当然，对于 AES，它将默认为 8 个字节），这是合理的默认值。

# java - Java null pointer xeption

> ID：13902331
> 
> 赞同：-2
> 
> 时间：2012-12-16T14:38:42.980
> 
> 标签：java

Why this code throws out null pointer exception? I'm a beginner in java so i'm not familiar with this mistake, i read about it, but i wasn't able to remove the bug ... I want to multiply Complex matrix DFT with vector.

```
public class Naloga {
    /**
     * @param args
     */
    public static void main(String[] args) {
        double polinom1[] = {1,1,0,1};
        double polinom2[] = {1,1,0,1};
        int n=4;
        //System.out.println(n);
        int newN=2*n-1;
        //zapis matrike dft
        Complex dft[][]=new Complex [newN][newN];
        Complex omega = new Complex(Math.cos((2*Math.PI)/newN),Math.sin((2*Math.PI)/newN));
        for (int j=0;j<newN;j++){
            for (int k=0;k<n;k++){
                dft[j][k] = omega.pow((j*k)%newN);
                //System.out.println(dft[j][k]);
            }
        }
        //System.out.println("To je pol1:");
        //dopolnitev do n2
        double pol1[]=new double[newN];
        for (int i=0;i<newN;i++){
            if (i<n){
                pol1[i]=polinom1[i];
            }
            else{
                pol1[i]=0;
            }
            //System.out.println(pol1[i]);
        }
        //mnozenje polinoma z dft
        Complex p1[] = new Complex[newN];
        for (int i=0;i<newN;i++){
            Complex sum = new Complex(0,0); 
            for(int k=0;k<n;k++){
                for(int j=0;j<newN;j++){
                    sum=sum.plus(dft[i][j].times(pol1[k]));
                    System.out.println(sum);
                }
            }
            p1[i]=sum;
            System.out.println(p1[i]+" ");
        }
    }
}
class Complex{
    double re;
    double im;

    public Complex(double real, double imag) {
        re = real;
        im = imag;
    }

    public String toString() {
        double tRe = (double)Math.round(re * 100000) / 100000;
        double tIm = (double)Math.round(im * 100000) / 100000;
        if (tIm == 0) return tRe + "";
        if (tRe == 0) return tIm + "i";
        if (tIm <  0) return tRe + "-" + (-tIm) + "i";
        return tRe + "+" + tIm + "i";
    }

    // sestevanje 
    public Complex plus(Complex b) {
        Complex a = this;             
        double real = a.re + b.re;
        double imag = a.im + b.im;
        return new Complex(real, imag);
    }

    // odstevanje
    public Complex minus(Complex b) {
        Complex a = this;
        double real = a.re - b.re;
        double imag = a.im - b.im;
        return new Complex(real, imag);
    }

    // mnozenje z drugim kompleksnim stevilo
    public Complex times(Complex b) {
        Complex a = this;
        double real = a.re * b.re - a.im * b.im;
        double imag = a.re * b.im + a.im * b.re;
        return new Complex(real, imag);
    }

    // mnozenje z realnim stevilom
    public Complex times(double alpha) {
        return new Complex(alpha * re, alpha * im);
    }

    // reciprocna vrednost kompleksnega stevila
    public Complex reciprocal() {
        double scale = re*re + im*im;
        return new Complex(re / scale, -im / scale);
    }

    // deljenje
    public Complex divides(Complex b) {
        Complex a = this;
        return a.times(b.reciprocal());
    }

    // e^this
    public Complex exp() {
        return new Complex(Math.exp(re) * Math.cos(im), Math.exp(re) * Math.sin(im));
    }

    //potenca komplesnega stevila
    public Complex pow(int k) {

        Complex c = new Complex(1,0);
        for (int i = 0; i <k ; i++) {
            c = c.times(this);
        }
        return c;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T14:57:52.473

您使用的 dft 比初始化的要多。如果将初始化更改为：

```
 for (int j=0;j<newN;j++){
        for (int k=0;k<newN;k++){
            dft[j][k] = omega.pow((j*k)%newN);
            //System.out.println(dft[j][k]);
        }
    } 
```

程序运行到终止。当然，错误可能实际上在于您使用 dft 的方式，您应该只需要它的 n x newN 矩形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:59:56.597

可能是 in 的使用`j`错误`dft[i][j].times(pol1[k])`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T14:47:51.247

问题是这一行：

```
sum=sum.plus(dft[i][j].times(pol1[k])); 
```

`dft`为空`i=0`并且`j=4`

# mysql - MySQL 更新（如果存在）

> ID：13902336
> 
> 赞同：2
> 
> 时间：2012-12-16T14:39:17.667
> 
> 标签：mysql, sql

我一直在尝试在 mysql 表中插入/更新记录。不能使用 ON DUPLICATE KEY，因为我与主键无关。

基本上我必须更新数据库中的记录

```
INSERT INTO table (city, state, gender, value) VALUES ("delhi","delhi","M",22) 
```

如果存在该城市、州、性别的记录，则只需覆盖该值。

我可以在不从编程语言发送两个查询的情况下实现这一点吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T14:41:49.497

实际上您仍然可以使用`ON DUPLICATE KEY`，只需在以下列上添加唯一索引，例如

```
ALTER TABLE tbl_name ADD UNIQUE index_name (city, state, gender) 
```

您现在的查询将是，

```
INSERT INTO table (city, state, gender, value) 
VALUES ('delhi','delhi','M', 22)
ON DUPLICATE KEY UPDATE value = 22 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T14:43:33.637

请记住，诸如`ON DUPLICATE KEY`和之类的结构`REPLACE INTO`是专门为防止这种情况而设计的。防止来自应用程序层的两个查询的唯一另一种方法是声明一个执行相同操作的数据库函数。

因此，添加`UNIQUE(city, state, gender)`跨相同列的键或主键。两者的区别在于每一列的取值范围；主键强制`NOT NULL`，而`UNIQUE`允许列是`NULL`.

差异是微妙的，但有时会导致意想不到的结果，因为**`NULL`值被认为是唯一的**。例如，假设您的数据库中有这些数据：

```
nr  | name
123 | NULL 
```

如果您尝试插入另一个`(123, NULL)`，则使用时不会抱怨`UNIQUE(nr,name)`；这可能看起来像一个[错误](http://bugs.mysql.com/bug.php?id=8173)，但事实并非如此。

# sql - PostgreSQL 数据库 - 仅在记录不存在时插入

> ID：13902337
> 
> 赞同：3
> 
> 时间：2012-12-16T14:39:34.047
> 
> 标签：sql, database, postgresql

> **可能重复：**
> [无法从 postgres 中的 UPDATE RETURNING 子句中选择](https://stackoverflow.com/questions/7191902/cannot-select-from-update-returning-clause-in-postgres)

我正在使用一个 PostgreSQL 数据库，它有一个“公司”表和一个“国家”表，每个表都有一个 uniqueID。

我想要一个设置，如果我尝试将公司添加到数据库中，它只会使用新的唯一 ID 将公司添加到数据库中（如果它尚不存在）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T14:47:45.603

```
insert into company (unique_id, company_name)
select 42, 'New Company Name'
from company
where not exists (select 1 from company where unique_id = 42); 
```

另请参阅此处以获取更通用的解决方案：[Insert, on duplicate update in PostgreSQL?](https://stackoverflow.com/questions/1109061/insert-on-duplicate-update-postgresql)

# android - 在 Windows 上编译 pjsip “C 编译器无法创建可执行文件”

> ID：13902342
> 
> 赞同：3
> 
> 时间：2012-12-16T14:40:12.347
> 
> 标签：android, android-ndk, cygwin, pjsip

我在通过 cygwin 在 Windows 上编译 pjsip 时遇到问题。我尝试使用 pjsip 形式的 android branc [http://svn.pjsip.org/repos/pjproject/branches/projects/android/](http://svn.pjsip.org/repos/pjproject/branches/projects/android/) 和适用于 Windows 的 Android NDK r8c。

这是我尝试配置 pjsip 时的输出。

```
$ ./configure-android
configure-android: APP_PLATFORM not specified, using android-14
configure-android: TARGET_ABI not specified, using armeabi
configure-android: calling ./configure with env vars:
CC = /ndk/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin/arm-linux-androideabi-gcc
CXX = /ndk/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin/arm-linux-androideabi-g++
CFLAGS =  -I/ndk/platforms/android-14/arch-arm/usr/include
CXXFLAGS =  -shared --sysroot=/ndk/platforms/android-14/arch-arm
LDFLAGS =  -nostdlib -L/ndk/platforms/android-14/arch-arm/usr/lib/
LIBS =  -lc -lgcc
checking build system type... i686-pc-cygwin
checking host system type... arm-unknown-linux-androideabi
checking target system type... arm-unknown-linux-androideabi
checking for arm-linux-androideabi-gcc... /ndk/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin/arm-linux-androideabi-gcc
checking whether the C compiler works... no
aconfigure: error: in `/pjsip-android':
aconfigure: error: C compiler cannot create executables
See `config.log' for more details 
```

这是 config.log 的摘录

```
aconfigure:2490: result: /ndk/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin/arm-linux-androideabi-gcc
aconfigure:2759: checking for C compiler version
aconfigure:2768: c:\Development\cygwin\ndk\toolchains\arm-linux-androideabi-4.4.3\prebuilt\windows\bin\arm-linux-androideabi-gcc.exe --version >&5
./aconfigure: line 2770: /ndk/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin/arm-linux-androideabi-gcc: Permission denied
aconfigure:2779: $? = 126
aconfigure:2768: c:\Development\cygwin\ndk\toolchains\arm-linux-androideabi-4.4.3\prebuilt\windows\bin\arm-linux-androideabi-gcc.exe -v >&5
./aconfigure: line 2770: /ndk/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin/arm-linux-androideabi-gcc: Permission denied
aconfigure:2779: $? = 126
aconfigure:2768: c:\Development\cygwin\ndk\toolchains\arm-linux-androideabi-4.4.3\prebuilt\windows\bin\arm-linux-androideabi-gcc.exe -V >&5
./aconfigure: line 2770: /ndk/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin/arm-linux-androideabi-gcc: Permission denied
aconfigure:2779: $? = 126
aconfigure:2768: c:\Development\cygwin\ndk\toolchains\arm-linux-androideabi-4.4.3\prebuilt\windows\bin\arm-linux-androideabi-gcc.exe -qversion >&5
./aconfigure: line 2770: /ndk/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin/arm-linux-androideabi-gcc: Permission denied
aconfigure:2779: $? = 126
aconfigure:2799: checking whether the C compiler works
aconfigure:2821: /ndk/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin/arm-linux-androideabi-gcc  -I/ndk/platforms/android-14/arch-arm/usr/include  -I/ndk/platforms/android-14/arch-arm/usr/include  -nostdlib -L/ndk/platforms/android-14/arch-arm/usr/lib/ conftest.c  -lc -lgcc >&5
./aconfigure: line 2823: /ndk/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin/arm-linux-androideabi-gcc: Permission denied
aconfigure:2825: $? = 126
aconfigure:2863: result: no 
```

谁能告诉我如何解决这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:46:45.617

确保您在 Windows 上以管理员身份启动 Cygwin，如果不这样做，我会很挣扎^^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T13:58:00.813

我设法克服了那个错误，但仍然没有设法编译 pjsip。我切换到linux，一切正常......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-05T18:19:57.600

如果您查看 config.log，您会看到如下内容：

> aconfigure:2841: /cygdrive/c/android-ndk-r9/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin/arm-linux-androideabi-gcc -I/cygdrive/c/android-ndk -r9/platforms/android-18/arch-arm/usr/include -I/cygdrive/c/android-ndk-r9/platforms/android-18/arch-arm/usr/include -nostdlib -L/cygdrive/c /android-ndk-r9/platforms/android-18/arch-arm/usr/lib/conftest.c -lc -lgcc >&5
> 
> C:/android-ndk-r9/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.4.3/../../ ../../arm-linux-androideabi/bin/ld.exe：找不到-lc

NDK 的 ld.exe 正在寻找 libc（位于 arch-arm/usr/lib/ 中），但它不喜欢 cygwin 路径。在*configure-android*改行

> 导出 LDFLAGS="${LDFLAGS} -nostdlib -L${ANDROID_SYSROOT}/usr/lib/"

像这样：

> 导出 LDFLAGS="${LDFLAGS} -nostdlib -Lc:/android-ndk-r9/platforms/android-18/arch-arm/usr/lib/"

# javascript - 将 url 参数写入文件会导致“未定义”

> ID：13902344
> 
> 赞同：2
> 
> 时间：2012-12-16T14:40:36.610
> 
> 标签：javascript, node.js

我刚从 node.js 开始（以及整个功能回调范例），我遇到了一个奇怪的问题。考虑以下代码：

```
var http = require("http");
var myPackage = require("./myPackage.js");  //Custom package

http.createServer(function(request, response)
{
    request.on("end", function()
    {
        //This custom package method retrieves the GET params from the URL
        //and then calls the callback with the params object as argument
        myPackage.getUrlParams(request, function(urlParams)
        {
            response.writeHead(200, {"Content-Type": "text/plain"});

            //This works - it shows me the content of the "data" url parameter,
            //so myPackage.getUrlParams works fine
            response.write("data: " + urlParams.data + ".  ");

            //This does not work - the test file is created with the right 
            //extension in the right place (handled by myPackage) but the 
            //content is "undefined"
            myPackage.toFile("test", urlParams.data);

            //This works - so myPackage.toFile seems to be fine
            myPackage.toFile("test", "Hello World");

            //This obviously works fine
            response.end("Done.");
        });
    });
}).listen(8080); 
```

出于某种原因，我可以将字符串写入文件，但不能写入 url 参数的内容（这是一个简单的字符串，没有特殊字符、空格等）。但是，我可以毫无问题地将该 url 参数写入屏幕。进一步的测试（并将测试结果写入文件）给了我以下额外信息：

*   myPackage.toFile("test", typeof urlParams); 写掉“对象”
*   urlParams 不为 null 或未定义
*   for (var i in urlParams) 不返回任何结果，即使首先调用 response.write

我认为这将是某种异步的事情，其中​​我的函数被调用得太早（而 response.write 不是，即使它被更早地调用），但我希望 urlParams 是未定义的，而不是一个对象。

任何人都可以对此有所了解吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:46:46.207

我也是 node.js 的新手，但我认为因为您的数据是一个对象，您可以尝试将其传递[`util.inspect()`](http://nodejs.org/api/util.html#util_util_inspect_object_showhidden_depth_colors)以将其转换为字符串，例如：

```
var util = require('util');

...

myPackage.toFile("test", util.inspect(urlParams.data)); 
```

不过不确定，试一试，让我们知道。`Console.log`自动将对象展平为字符串，但`toFile()`可能不会。

# visual-c++ - 使用 make_pair 时 Visual Studio 2012 中的 c2664

> ID：13902348
> 
> 赞同：9
> 
> 时间：2012-12-16T14:40:42.307
> 
> 标签：visual-c++, visual-studio-2012, std-pair

我挖掘了一个旧项目并想编译它，但收到了几个错误，其中一些是 c2664：

```
error C2664: 'std::make_pair' : cannot convert parameter 1 from 'CUser *' to 'CUser *&&'
error C2664: 'std::make_pair' : cannot convert parameter 1 from 'unsigned long' to ' unsigned long &&' 
```

相关的代码部分是：

```
//typedef for the userdata map
typedef std::map<unsigned long, std::pair<CUser*,userstatus*>> UserDataMapType;
//...
Inc::incret CUserManager::AddUser(unsigned long ID, CUser* pUser, userstatus* pUserStatus)
{
    //...
    std::pair<UserDataMapType::iterator, bool> ret = m_mapUserData.insert(std::make_pair<unsigned long, std::pair<CUser*, userstatus*>>(ID, std::make_pair<CUser*, userstatus*>(pUser, pUserStatus)));
    //...
} 
```

我试图制作函数参数`const`，但这没有帮助。

它确实在 VS2010 中编译得很好。

请帮助我找出导致此问题的原因以及如何解决它。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-16T15:18:24.273

[`make_pair()`](http://en.cppreference.com/w/cpp/utility/pair/make_pair)在 VS2012 中已更改以支持称为*移动语义*的新 C++11 功能，我怀疑显式指定类型`make_pair()`会妨碍。

请记住，`make_pair()`不需要显式指定任何模板参数。它从每个参数的类型中推断出它们。

尝试从两个调用中删除显式模板参数`make_pair()`...

```
std::pair<UserDataMapType::iterator, bool> ret = m_mapUserData.insert(std::make_pair(ID, std::make_pair(pUser, pUserStatus))); 
```

像这样显式地提供它们在 VS2012 之前可以正常工作，因为添加了一个名为[*move semantics*](https://stackoverflow.com/questions/3106110/can-someone-please-explain-move-semantics-to-me)的新 C++11 特性。稍后您将需要阅读该主题，因为您有一个支持它的闪亮的新编译器。

# primefaces - Primefaces 滑块组件

> ID：13902351
> 
> 赞同：0
> 
> 时间：2012-12-16T14:41:01.513
> 
> 标签：primefaces, slider

有没有办法不`InputText`与 Primefaces`Slider`组件（`for`属性）结合使用？

我只想拥有滑动条。

我可以使用`InputHidden`组件，但这是另一种方便的方式吗？

扩展组件 ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:29:58.163

问题是 Primefaces 中的滑块不包含任何值。

您可以尝试扩展组件或创建您想要的组件，但是当您可以使用 InputHidden 时，这似乎是一项艰巨的工作。该组件转换为 div 标签，因此它不包含任何值，因此，无论如何，您都必须添加一个字段，将其值与表单一起发布（如果您创建或扩展组件）。

InputHidden 有什么问题？你为什么不想使用它？

# ios - Cocos2d：如果两个精灵同时从 CCAnimationCache 运行相同的 CCAnimation，是否有任何可能的运行时错误？

> ID：13902354
> 
> 赞同：0
> 
> 时间：2012-12-16T14:41:25.520
> 
> 标签：ios, caching, animation, cocos2d-iphone

不确定问题是否清楚，但我发现了这一点，并想知道每次特定精灵必须爆炸时调用这个**runExplosionAnimation方法是否会有任何冲突。**在我正在开发的游戏中，屏幕上可能有 20 个这样的精灵，我想知道让它们共享相同的动画是否可以（参见**animationByName:@"anAnimation"**）或者这是否可能导致一些**运行时错误如果两个精灵同时爆炸。**

```
-(void) runExplosionAnimation
{
[self stopAllActions];

CCAnimation* anim = [[CCAnimationCache sharedAnimationCache] animationByName:@"anAnimation"];
if(anim!=nil){
    [self runAction:[CCSequence actions: [CCAnimate actionWithDuration:0.4f animation:anim restoreOriginalFrame:false],  [CCHide action],  nil]];
}
else{
    [self loadSharedAnimationIfNeeded];
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:03:26.447

我还没有遇到问题，但可能同时出现的目标少于 20 个。然而，阅读 cocos2d (2.0) 代码，CCAnimation 对象几乎是一个 POCO（普通的objective-c 对象:)）：它似乎不保持任何状态。CCAnimate 就是这样做的。所以这些对象几乎是“只读的”，在放入缓存后不太可能改变，而且我看不到会导致类的任何 getter 方法出现问题的情况。我对此感到安全，使用中的线程模型极不可能发生。

# django - 两个表单域之间的关系

> ID：13902355
> 
> 赞同：0
> 
> 时间：2012-12-16T14:41:32.433
> 
> 标签：django, django-forms

我是 Django 的新手。我的 form.py 中需要这样的东西：

```
class SearchForm(forms.Form):
    CHOICES1 = (('a','a'),
               ('b','b'),)
    field1 = forms.ChoiceField(choices=CHOICES1)
#if field1=='a':
    CHOICES2 = (('c','c'),
               ('d','d'),)
    field2 = forms.ChoiceField(choices=CHOICES2) 
#if field1=='b':
    CHOICES2 = (('e','e'),
               ('f','f'),)
    field2 = forms.ChoiceField(choices=CHOICES2) 
```

但我不知道我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:56:43.077

没有简单的方法可以做到这一点。您需要在服务器上使用 Javascript 和自定义验证。

使用 jQuery，客户端代码可能如下所示：

```
var F2_CHOICES = {
    'a' : { 'c' : 'c', 'd' : 'd'},
    'b' : { 'e' : 'e', 'f' : 'f'}
};
var $field2 = $('[name=field2]');
  $('[name=field1]').change(
  function() {
      var currentValue = $(this).val() ;
      $field2.empty();
      for (o in F2_CHOICES[currentValue]){
            $field2.append('<option '+' value="'+o+'">'+F2_CHOICES[currentValue][o]+'</option>');
      }
  }); 
```

在服务器上，您需要`clean`在表单上定义一个方法来检查 field2 值是否是对应于 field1 值的选项之一。

# javascript - IE中带有预览功能的上传文件样式按钮

> ID：13902356
> 
> 赞同：0
> 
> 时间：2012-12-16T14:41:34.633
> 
> 标签：javascript, jquery, file-upload, jquery-events

我已经设置了文件上传按钮的样式并在上传之前添加了预览图像......基本上除了IE之外的所有浏览器中的一切都作为一个魅力......

现在让你更接近我的想法，它看起来像： http: [//postimage.org/gallery/22cvzh2g/bcd61d61/](http://postimage.org/gallery/22cvzh2g/bcd61d61/)

IE中没有显示图像的原因是什么？我在 IE9 中尝试过，但我只是得到了路径，而`$('#background-preview').removeClass('hidden');` 似乎没有工作，因为它没有删除隐藏的类......

...也在 IE 和 Opera 中作为文件路径您会注意到 `C:/fakepath/etc`...而在 FireFox、Chrome 和普通浏览器中它只显示文件名。非常感谢任何帮助！

现在在标题中我有：

```
<script>
function clearFileInput() {
    var oldInput = document.getElementById("upload-bg");
    var newInput = document.createElement("input");
    newInput.type = "file";
    newInput.id = oldInput.id;
    newInput.name = oldInput.name;
    newInput.onchange = oldInput.onchange;
    newInput.className = oldInput.className;
    newInput.style.cssText = oldInput.style.cssText;
    // copy any other relevant attributes

    oldInput.parentNode.replaceChild(newInput, oldInput);
    $('#background-preview').addClass('hidden');

    var oldInput1 = document.getElementById("FileField");
    var newInput2 = document.createElement("input");
    newInput2.type = "text";
    newInput2.id = oldInput1.id;
    newInput2.className = oldInput1.className;
    newInput2.style.cssText = oldInput1.style.cssText;
    oldInput1.parentNode.replaceChild(newInput2, oldInput1);

}

function readURL(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
            $('#background-image')
                .attr('src', e.target.result)
                .width(250)
                .height(170);
            $('#background-preview').removeClass('hidden');
        };

        reader.readAsDataURL(input.files[0]);
    }
} 
```

在实际按钮所在的正文部分：

```
<div id="FileUpload">
 <input id="upload-bg" type='file' onchange="readURL(this);getElementById('FileField').value = getElementById('upload-bg').value;" />
 <div id="BrowserVisible"><input type="text" id="FileField" /></div>
</div>
<div id="background-preview" class="hidden"><img id="background-image" src="#" alt="Bad Image File !" /><a href="#" id="clear-bg-upload" onclick="clearFileInput();"> </a></div> 
```

负责自定义文件输入的 CSS 是：

```
#FileUpload {
position:relative;
height: 50px;
}
#BrowserVisible {
margin: 5px 0px 5px 0px;
position: absolute;
top: 0px;
left: 0px;
z-index: 1;
background:url(images/button-browse.png) 100% 0px no-repeat;
height:42px;
width:290px;
}
#FileField {
border: 1px solid #BDBDBD;
font-size: 13px;
height: 40px;
margin: 0;
padding: 0;
width: 215px;
}
#upload-bg {
position:relative;
width:290px;
height:43px;
text-align: right;
-moz-opacity:0;
filter:alpha(opacity: 0);
opacity: 0;
z-index: 2;
}
#clear-bg-upload {
position: absolute;
top: 0px;
right: 0px;
width: 16px;
height: 16px;
background: url(images/icon-delete-input.png) top center no-repeat;
}
#background-preview {
border: solid 1px #ccc;
padding: 5px;
position: relative;
display: inline-block;
border-radius: 5px;
-o-border-radius: 5px;
-icab-border-radius: 5px;
-khtml-border-radius: 5px;
-webkit-border-radius: 5px;
-moz-border-radius: 5px;
}
#background-preview.hidden {
display: none;
}
#background-preview img {
margin: 0px auto;
display: block;
max-height: 140px;
max-width: 180px;
width: auto;
} 
```

----------------------------- 已编辑 -------- ------------

好的，我通过 Ajax（使用）上传采用了不同的方法，一切都很棒......我只是不知道如何只发送字段值。现在它像表单一样发送，但是有没有办法触发只发送字段。现在它被扭曲了`#FileUploadForm`，但我想在表单中使用它，因为表单不能嵌套......我有点卡住了......除了我现在有两个表单，但我想要那个文件上传像现在一样提交发送，而无需将其包装成自己的形式。

这是我正在使用的脚本：

```
 function showRequest(formData, jqForm, options) {
    var fileToUploadValue = $('#fileToUpload').fieldValue();
    if (!fileToUploadValue[0]) {
        $('#result').html('Please select a file.');
        return false;
    }
    $("#loading").show();
    return true;
}

function showResponse(data, statusText) {
    $("#loading").hide();
    if (statusText == 'success') {
        var msg = data.error.replace("##", "<br />");
        if (data.img != '') {
            $('#result').removeClass('hiddenmessage');
            $('#result').html('<img src="uploads/thumbs/' + data.img + '" /><a href="delete-background-image.php" id="clear-bg-upload"> </a>');
            //          $('#message').html('<a href="delete-background-image.php" id="clear-bg-upload">Click here</a>'); 
            //          $('#FileUploadForm').html('');
        } else {
            $('#result').removeClass('hiddenmessage');
            $('#result').html(msg);
        }
    } else {
        $('#result').removeClass('hiddenmessage');
        $('#result').html('Unknown error!');
    }
}

function StartFileUpload() {
    $('#message').html('');
    $('#FileUploadForm').ajaxSubmit({
        beforeSubmit: showRequest,
        success: showResponse,
        url: 'upload.php',
        dataType: 'json'
    });
    return false;
}
$('#fileToUpload').live('change', function () {
    StartFileUpload();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:52:53.240

让我们从路径开始——在 HTML/JS 中，由于安全问题，您无法获得附件的完整路径。你所能得到的只是文件名。

通常最好的方法是在用户选择文件时使用 JavaScript 将文件上传到服务器，然后从该服务器获取预览。您可以提供一些“删除”按钮，使用户能够删除他们错误上传的图片。

这将强制您的应用程序进行深度更改。我推荐[文件上传](https://github.com/valums/file-uploader)插件。从头开始编写自己的解决方案将非常痛苦，因为它需要针对不同的浏览器进行许多 hack。

# php - PHP：在每个文件的开头和结尾调用一个函数

> ID：13902363
> 
> 赞同：2
> 
> 时间：2012-12-16T14:42:28.737
> 
> 标签：php, debugging

我想在每个文件的开头和结尾自动调用用户定义的函数。这将包括被请求的脚本以及该脚本中的每个包含。

这样做的目的是创建一个调试工具，该工具将记录每个文件执行所需的时间。每个文件开头和结尾的微时间将被存储，以在脚本执行结束时报告结果。

[编辑] 我花了一些时间查看 xhprof 和 xdebug

Xdebug 无法工作，因为我无法在运行时打开和关闭它（我们当前的调试系统允许我们在 URL 中传递一个属性，它将打开/关闭调试作为会话变量，最终在页面底部显示分析数据加载后 - 这非常有用）

Xhprof 更接近，尽管它不允许我分解每个函数调用，也不允许传递附加调试信息以附加到分析元素。例如，我有一个用于所有查询的 mysql 查询用户定义函数 - 我想将实际查询传递给配置文件元素，以便我可以识别页面中较重和较轻的查询（我知道我可以记录查询同样，只是想展示我如何从这个要求中受益）。另一个示例是将传入、传出函数数据和我想跟踪的任何其他调试信息附加到配置文件元素。

目前，我通过在将数据发送到通用函数的每个函数中放置代码行来手动跟踪开始、结束时间和其他调试信息，将其保存在全局变量中，并在脚本输出之后将其作为调试数据吐出。我将其扩展到脚本、模板等。我希望避免在每个函数、脚本、模板中手动输入数据。我希望它需要为每个函数独有的一些数据完成，但是重复的东西（开始，结束时间）不应该在每个臭查询中输入大声笑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T14:59:08.457

我强烈建议您使用[Xdebug](http://xdebug.org/)来帮助您调试代码。自己这样做只会让你发疯！

Xdebug 可以进行开箱即用的[功能跟踪](http://xdebug.org/docs/execution_trace)等等。

例如：

```
// start tracing function calls to file
xdebug_start_trace('/path/to/trace_file.txt');
// your code here
xdebug_stop_trace(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T15:14:00.117

### 命令行：

这太棒了：

```
echo <file_to_execute> | php \
  -B '$start = microtime(true);' \
  -E '$stop = microtime(true); echo $stop-$start;' 
```

这使用了 PHP 中几乎不使用的两个选项，`-B`以及`-E`. 第一个选项允许您指定将在处理之前运行的代码`stdin`，在这种情况下，是我们要执行的文件。第二个选项允许您指定文件完成后将运行的代码。

### 无聊的 php.ini 设置：

此外，您可以设置`auto_prepend_file`并`auto_append_file`执行相同的操作。我在这里提到它是为了完整性，但是`.ini`为这种事情更改设置感觉不对，尽管我没有证据表明它是不好的。

### 分析热点：

如果您确定了一个运行缓慢的脚本，您可以使用[xhprof 找出](https://github.com/facebook/xhprof)您大部分时间都花在了哪里。它是 Facebook 开发的一个工具，但现在是开源的。它可作为[PECL 扩展](http://pecl.php.net/package/xhprof)使用，有助于减少安装痛苦。

### 实际调试：

[XDebug](http://xdebug.org/)是一个了不起的工具，它可以让您逐行、逐个函数地逐步执行代码，并且可以执行各种操作。如果您只是对代码执行进行计时，那么我不会使用 XDebug，但如果您真的想调试代码，那么这个扩展是您最好的朋友。

* * *

### 关于您的编辑：

我认为你做这一切都是错的。你真的需要两个环境：一个实时服务器和一个开发环境。实时服务器没有 xhprof 或 xdebug，但开发服务器有需要的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T14:59:09.590

使用`php.ini`文件的`auto_prepend_file`和`auto_append_file`选项。将它们指向一个文件，该文件在 Iqbal 的回答中进行计时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-16T15:34:35.613

除了 Xdebug 之外，还有[XHProf](http://techportal.inviqa.com/2009/12/01/profiling-with-xhprof/)，它非常好用且易于使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-16T14:55:13.830

$time_start = 微时间（真）；// 放在网页的开头

// 你的 PHP 代码

echo microtime(true) - $time_start; // 放在网页末尾

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-16T14:59:55.660

写一点require函数怎么样？

在`index.php`，你可以做`<?php require('requirer.php'); myRequirer(array('script1', 'script2'));`

然后在`requirer.php`：

```
<?php

require('file_with_logger_function');
function requirer($requireFiles)
{
    my_logger_function();
    foreach($requireFiles as $fileName) {
        require($fileName.'.php');
    }
    my_logger_function();
} 
```

# javascript - 在javascript中生成范围内的随机数而不重复数字

> ID：13902365
> 
> 赞同：6
> 
> 时间：2012-12-16T14:42:57.053
> 
> 标签：javascript

> **可能重复：**
> [生成 1 到 100 之间的 8 个唯一随机数 在](https://stackoverflow.com/questions/2380019/generate-8-unique-random-numbers-between-1-and-100)
> [(0 - X) 范围内生成唯一数字，保留历史记录以防止重复](https://stackoverflow.com/questions/11808804/generate-unique-number-within-range-0-x-keeping-a-history-to-prevent-duplic)

我需要循环运行 80 次并生成 0-79 之间的随机数，但它不会重复已经生成的数字。
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-16T14:47:30.477

```
 for (var i = 0, ar = []; i < 80; i++) {
    ar[i] = i;
  }

  // randomize the array
  ar.sort(function () {
      return Math.random() - 0.5;
  }); 
```

// 你有随机数为 0 到 79 的数组 ar。核实
`console.log(ar);`

// 取出这样的元素
`ar.pop()`

# php - 如何将此 PHP 代码与 HTML 和 Javascript 结合起来？

> ID：13902366
> 
> 赞同：0
> 
> 时间：2012-12-16T14:43:04.610
> 
> 标签：php, javascript, html

例如，这是我的 PHP 代码：

```
<?php

if($country_code == 'US')
{
        header('Location: http://www.test.com');
}

else 
{
        header('Location: http://www.test.com/');
}

?> 
```

我正在尝试使用 Javascript 代码进行跟踪，它必须位于`</body>`标签之上。

我尝试了将`PHP`代码与结合的不同方法`HTML`，我尝试将 HTML 单独放在下面的`PHP`一个示例中：

```
<html>
<head></head>
<body>
    <?php

     ?>
<script></script>
</body>
</html> 
```

我得到的最远的是，它跟踪了点击，但它没有重定向给我这个错误：

```
`Warning: Cannot modify header information - headers already sent by` 
```

将不胜感激任何建议和帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:01:12.243

在输出任何内容之前，将 php 重定向代码放在文档的开头。检查标记之后和`?>`标记之前的空格，`<?php`因为这些将被打印出来并发送响应标头，因此您将无法修改标头以进行重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:28:59.183

```
<?php
if($country_code === 'US'){

   echo "<script> window.location.href='http://www.test.com1'</script>";

}
else{

   echo "<script>  window.location.href='http://www.test.com2/'</script>";

 }

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T14:57:52.367

您必须尝试以下方法进行跟踪：

```
<?php

if($country_code == 'US')
{
        header('Location: http://www.test.com/?us=yes');
}

else 
{
        header('Location: http://www.test.com/?us=no');
}

?> 
```

然后在您的索引页面中检查 us 参数的值。您还应该**注意**，在标头函数之前不应打印任何输出以使警告无效：

> `Warning: Cannot modify header information - headers already sent by`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T15:23:47.053

问题是 PHP 在 JavaScript 之前运行。因此，您需要在 JavaScript 中获取 PHP 变量。

```
<?php
// your normal code here, like connection to DB
?>

<script>var test = <?php> echo $thatVariable; <?> </script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-16T15:30:35.023

您可能不会在 php.ini 的 header() 标记之前向客户端发送输出。因此，您可以生成一个重定向页面，该页面通过 js 获取国家信息并将其发送到 php（例如使用表单提交）。之后，您可以通过 php header() 重定向到相应页面

# jquery - 无法让 jquery 模板工作

> ID：13902368
> 
> 赞同：1
> 
> 时间：2012-12-16T14:43:14.273
> 
> 标签：jquery, jquery-templates

我有这个数据：

```
[
{
    "id": "46",
    "title": "test",
    "description": "",
    "date_created": "2012-12-16 15:31:51",
    "date_expires": "2013-01-14 17:37:40",
    "date_renewal": "2012-12-15 17:37:40",
    "renewals": 0,
    "price": "333",
    "mrt": 0,
    "location_id": 0,
    "email": "",
    "password": "",
    "phone": "",
    "default_image": "",
    "property_type_id": 0,
    "share_basis_id": 0,
    "type": 0,
    "views": 0,
    "is_featured": 0,
    "is_recommended": 0,
    "has_furniture": 0,
    "has_wifi": 0,
    "has_airconditioner": 0,
    "has_bills_included": 0,
    "slug": "",
    "is_deleted": 0,
    "images": [],
    "guid": "50cddb576d3cf",
    "location_name": "Lim Chu Kang",
    "property_type_name": "HDB",
    "share_basis_name": "Shared room"
},
{
    "id": "45",
    "title": "ggghh",
    "description": "",
    "date_created": "2012-12-16 15:31:51",
    "date_expires": "2013-01-14 16:49:26",
    "date_renewal": "2012-12-15 16:49:26",
    "renewals": 0,
    "price": "0",
    "mrt": 0,
    "location_id": 0,
    "email": "",
    "password": "",
    "phone": "",
    "default_image": "",
    "property_type_id": 0,
    "share_basis_id": 0,
    "type": 0,
    "views": 0,
    "is_featured": 0,
    "is_recommended": 0,
    "has_furniture": 0,
    "has_wifi": 0,
    "has_airconditioner": 0,
    "has_bills_included": 0,
    "slug": "",
    "is_deleted": 0,
    "images": [],
    "guid": "50cddb576d474",
    "location_name": null,
    "property_type_name": null,
    "share_basis_name": null
},
{
    "id": "44",
    "title": "ggg",
    "description": "",
    "date_created": "2012-12-16 15:31:51",
    "date_expires": "2013-01-14 16:41:48",
    "date_renewal": "2012-12-15 16:41:48",
    "renewals": 0,
    "price": "56701",
    "mrt": 0,
    "location_id": 0,
    "email": "",
    "password": "",
    "phone": "",
    "default_image": "",
    "property_type_id": 0,
    "share_basis_id": 0,
    "type": 0,
    "views": 0,
    "is_featured": 0,
    "is_recommended": 0,
    "has_furniture": 0,
    "has_wifi": 0,
    "has_airconditioner": 0,
    "has_bills_included": 0,
    "slug": "",
    "is_deleted": 0,
    "images": [],
    "guid": "50cddb576d517",
    "location_name": "Jurong East",
    "property_type_name": null,
    "share_basis_name": null
} 
```

]

我有这个模板：

```
 <script id="tmp" type="text/x-jquery-tmpl">
        <b>${title}</b>
        <b>${id}</b>
        <br />
</script> 
```

我的jQuery代码是这样的：

```
$.post('map/search-submit/', {
                        data: $('#map_form').serialize()
                    },
                        function(data)
                        {
                            console.log(data);

                            $( "#tmp" ).tmpl( data ).appendTo( "#results" );
                        }
            ); 
```

其中data是我上面写的json数据。

我得到的只是没有数据的空 html 标签。

```
<div id="results">
     <b></b><b></b><br />
</div> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T16:02:04.233

我发现了问题所在：

返回的数据被视为字符串（我使用 PHP 的 json_encode($data); 发送它）

所以基本上我需要做的是：在客户端将字符串解析为 JSON

```
$.post('map/search-submit/', {
                    data: $('#map_form').serialize()
                },
                    function(data)
                    {
                        console.log(data);
                        var data = $.parseJSON(response);
                        $( "#tmp" ).tmpl( data ).appendTo( "#results" );
                    }
        ); 
```

# c# - 空闲文件流消耗的内存

> ID：13902369
> 
> 赞同：2
> 
> 时间：2012-12-16T14:43:26.430
> 
> 标签：c#, .net, file, filestream

我想创建多个`FileStreams`并且需要保持它们打开 - 不会有 I/O 操作。内存消耗会是多少？如果我创建大量此类流，这会影响系统性能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:46:11.730

**简而言之：**保持文件流打开不是一个好主意，因为它是非托管资源。

在 .NET 框架架构中，如果在代码中没有正确管理，所有非托管资源都会导致内存大泄漏。

如果你说 - “我不想让它超出范围。然后垃圾收集器最终会调用 Dispose，杀死流。但我想保持流打开。”

垃圾收集器将调用`Finalize`方法（析构函数），而不是`Dispose`方法。终结器将调用`Dispose(false)`它**不会**处理底层流。`StreamReader`如果您需要直接使用底层流，您应该可以离开范围之外。只要确保在适当的时候手动处理底层流即可。

# c - 插入三元搜索树中的分段错误

> ID：13902373
> 
> 赞同：1
> 
> 时间：2012-12-16T14:43:52.753
> 
> 标签：c, search, data-structures, segmentation-fault, ternary-search-tree

我正在尝试将字符插入三元搜索树，请帮我解决这个分段错误？？这是我正在做的插入尝试，在运行这个我得到分段错误（核心转储）请帮我解决为什么会这样？

```
int main(int argc ,char* agrv[])
{
TSTNode *root;
char *str;
cin >> str;
InsertTST(root,str);
DisplayTST(root);
return 0; 
}

TSTNode* InsertTST(TSTNode *root, char *str)
{
if(root== NULL){
    TSTNode *root = (TSTNode *)malloc(sizeof(TSTNode *));
    root->left = NULL;
    root->right = NULL;
    root->eq = NULL;
    root->is_end_of_str = 0;

    return root;
}

if(root->data < *str)
    InsertTST(root->right, str);
else if (root->data == *str){
    if(*(str+1) != '\0')
    InsertTST(root->eq, str+1);
    else 
    root->is_end_of_str = 1;
}
else 
    InsertTST(root->left, str);

return root;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T14:55:57.250

```
char *str;
cin >> str; 
```

没有分配内存，然后写入所述内存 = seg 错误。

# php - google data api auth 无需提升用户表单登录

> ID：13902376
> 
> 赞同：0
> 
> 时间：2012-12-16T14:44:33.103
> 
> 标签：php, oauth, gdata, picasa, zend-gdata

我正在构建一个将从 picasa 获取数据的网络。几个人会用。网络只有 1 个数据源（1 个 picasa 帐户），但我想让用户授权进入该帐户而不提高谷歌表单登录页面。我知道有一个使用 Zend_GData 包的解决方案，但是从这个站点[https://developers.google.com/picasa-web/code](https://developers.google.com/picasa-web/code)他们说客户端库支持的 API 版本是 v1。谷歌开发人员说我应该使用 Oauth 2。

是否可以让多个用户使用 1 个数据源（来自 1 个 picasa 帐户），而无需提高 google 表单登录？（用户可以编辑、删除和添加源）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T06:34:15.743

如果您使用的是 php，则仅支持版本 1，因此仅使用该版本 ..

使用 oauth 2，您将不会执行可以使用 Zend_GData 执行的操作。

并且没有登录是不可能访问数据的。

# c# - C# - 如何从列表中删除一个值

> ID：13902377
> 
> 赞同：4
> 
> 时间：2012-12-16T14:44:36.637
> 
> 标签：c#, list, tuples

我有一个 3 元`List<Tuple>`组`string, string, string`。
初始化： `List<Tuple<string, string string>> myTupleList = new List<Tuple<string, string, string>>();`
我基本上想在其中搜索一个值，`Item2`如果找到则删除整个条目。
让我形象化。如果我有：

```
Item1 | Item2 | Item3
---------------------
"bar" | "foo" | "baz"
---------------------
"cat" | "dog" | "sun"
---------------------
"fun" | "bun" | "pun" 
```

我想做

```
//pseudocode
myTupleList.Remove("dog" in Item2); 
```

制作清单

```
Item1 | Item2 | Item3
---------------------
"bar" | "foo" | "baz"
---------------------
"fun" | "bun" | "pun" 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-16T14:46:50.073

看看[`RemoveAll`方法](http://msdn.microsoft.com/en-us/library/wdka673a.aspx)`List<T>`。_ 它允许您根据谓词删除项目。

例如，您可以只检查`Item2`属性，正如您在问题中所说：

```
myTupleList.RemoveAll(item => item.Item2 == "dog"); 
```

请注意（正如方法名称所暗示的那样），这将删除与此条件匹配的*所有元素。*因此，如果有多个元素的`Item2`属性`"dog"`为 ，则它们都将被删除。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-16T14:47:42.150

```
myTupleList.RemoveAll( p => p.Item2 == "dog"); 
```

# c# - WinRT（重新）在 c# .NET 中使用 mediaElement 播放声音

> ID：13902383
> 
> 赞同：0
> 
> 时间：2012-12-16T14:45:00.207
> 
> 标签：c#, .net, audio, windows-8, windows-runtime

我正在使用 MediaElement 类在单击按钮时播放简单的声音。除非我双击它，否则这对我来说很好。在第二次点击时，我希望旧声音停止播放并重新启动声音。但是停止方法不起作用：

```
 public static MediaElement SoundDelete;
    public static void PlaySoundCash()
    {
        if (SessionHelper.getConfig("SoundDelete") == "true")
        {
            System.Diagnostics.Debug.WriteLine(SoundDelete.Position.ToString());
            SoundDelete.Stop(); //dosn't work
            SoundDelete.Position = new System.TimeSpan(0,0,0,0,0); //dosn't work
            System.Diagnostics.Debug.WriteLine(SoundDelete.Position.ToString());
            SoundDelete.Play();
        }
    } 
```

在控制台中，时间跨度永远不会为 0。我怎样才能让声音从头开始播放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T04:51:06.033

我遇到了完全相同的问题。事实证明，将 MediaElement 添加到可视树将允许您使用此额外功能。

将我的 MediaElements 添加到我的基本 Grid 的子项中解决了这些问题。

例如：

C＃

```
public static MediaElement SoundDelete;

private void MediaInit()
{
    // ...
    // load your sound file into SoundDelete
    // ...
    BaseGrid.Children.Add(SoundDelete);
}
public static void PlaySoundCash()
{
    System.Diagnostics.Debug.WriteLine(SoundDelete.Position.ToString());
    SoundDelete.Stop();
    SoundDelete.Position = new System.TimeSpan.Zero;
    System.Diagnostics.Debug.WriteLine(SoundDelete.Position.ToString());
    SoundDelete.Play();
} 
```

或在 XAML 中：

```
<Grid Name="BaseGrid">
    <MediaElement Name="SoundDelete" Source="path_to_your_sound_file.mp3" />
</Grid> 
```

# android - Android 应用：管理活动

> ID：13902385
> 
> 赞同：0
> 
> 时间：2012-12-16T14:45:59.910
> 
> 标签：android, android-activity, activity-lifecycle

我正在尝试学习android编程。我做了一个基本的应用程序。它有一个主要活动、一个设置活动和一个在点击时打开设置活动的通知。主要活动还有一个设置按钮，可以打开设置活动。听起来可能很奇怪，但我只是想学习。所以问题是当我打开设置活动然后单击通知时，它会在每次单击通知时再次打开设置活动。然后，当我点击手机上的返回按钮时，它会再次将我带到设置活动，并且我必须多次按返回按钮，因为我单击通知返回到主要活动。看起来设置活动在每次点击通知时一次又一次地实例化。我尝试过使用我在网上阅读的许多东西，比如尝试一些 Intent 标志，但找不到任何有用的东西。我尝试使用完成（）；在我的设置活动中的 onBackPressed 中，但这样做会将我带到主要活动，当我回击主要活动时，它会将我带到设置，然后我必须再次回击该次数。

仅当通知未运行时，如何使通知打开设置活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:49:11.747

我认为这可以帮助你。

在 AndroidManifest.xml 中编辑

```
<activity android:name=".SettingActivity" android:launchMode="singleTask"> 
```

如果活动没有运行，这将打开活动。

# c++ - 为什么我可以制作抽象对象的向量？

> ID：13902388
> 
> 赞同：3
> 
> 时间：2012-12-16T14:46:11.550
> 
> 标签：c++, vector, abstract-class

为什么这段代码完全编译？

```
#include <vector>
using namespace std;

class A
{
        virtual void a() = 0;
};

int main()
{
        vector<A> a;    //won't fail
        //A b;            //that will
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T14:49:49.827

因为模板。你没有实例化任何东西。尝试使用`resize()`，或其他方法。那应该失败。

# .htaccess - .htaccess 重定向到子文件夹，并删除它的名字

> ID：13902389
> 
> 赞同：2
> 
> 时间：2012-12-16T14:46:11.893
> 
> 标签：.htaccess, mod-rewrite, redirect, hide, subdirectory

我在网络世界里有点菜鸟，所以我很抱歉......我尝试了很多在 SO 和其他地方找到的东西，但我没有设法做我想做的事。而且 Apache 文档……太完整了。

基本上我想要做的是将我的域重定向到一个子文件夹。我为此找到了简单的解决方案（实际上有很多不同）。

```
http://www.foo.com/
http://foo.com/ 
```

应该重定向到`/bar`并显示为`http://foo.com/`

使用以下我得到了预期的结果：

```
RewriteEngine on
Options +FollowSymLinks
RewriteCond %{HTTP_HOST} ^www\.foo.com$
RewriteRule ^/?$ "http\:\/\/foo.com" [R=301,L]
RewriteRule ^((?!bar/).*)$ bar/$1 [NC,L] 
```

但我也希望子文件夹和文件名在明确输入时不出现，即：

```
http://www.foo.com/index.html
http://foo.com/index.html
http://wwww.foo.com/bar
http://foo.com/bar
http://wwww.foo.com/bar/index.html
http://foo.com/bar/index.html 
```

应该都显示为

```
http://foo.com/ 
```

**这可能吗 ？**

显然使用.htaccess，因为我在虚拟主机上。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T23:19:44.860

正如 Felipe 所说，这实际上是不可能的，因为当您执行 R=301 重定向时，您会丢失信息：像这样的硬重定向会启动一个全新的请求，而不会记住先前的请求。

当然，有很多方法可以做类似的事情。最简单的方法是将原始请求放在查询字符串中（[这里](http://www.simonecarletti.com/blog/2009/01/apache-rewriterule-and-query-string/)是关于 mod_rewrite 如何处理查询字符串的一个很好的概要）。当然，查询字符串确实会显示在 URL 中，但大多数现代浏览器会将查询字符串隐藏在地址栏中，因此如果您的目标是美学，那么这种方法是可行的。

如果您真的不想在 URL 中显示任何原始查询，则可以通过使用[CO 标志](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_co)来使用 cookie （[这里](http://www.askapache.com/htaccess/htaccess-fresh.html#Cookie_Manipulation_Tests_mod_rewrite)有一些关于 cookie 操作的非常好的示例）。无论如何，关于原始请求的信息必须以某种方式在硬重定向中传递。

但无论如何，最重要的是，你为什么要做这样的事情？它一定会混淆人类和机器人。当框架流行时，很多页面的行为都是这样的，而且非常糟糕（没有书签，没有简单的内容链接，谷歌结果带有“您的浏览器无法处理框架”的片段，没有重新加载，不稳定的后退按钮，哦，男孩，那些日子）。

说到这里，如果你的内容是 html，你可以只使用一个普通的旧 iframe 来实现效果（但我真诚地建议不要这样做）。

# php - PHP组合多个变量

> ID：13902392
> 
> 赞同：1
> 
> 时间：2012-12-16T14:46:21.207
> 
> 标签：php, variables

我是 php 新手，我对以下代码有疑问：

```
$ID = $_POST["first_name"]
$EXT = ".html"
$DOMAIN = "blabla.com/membersarea/"
$URL =  ($DOMAIN . $ID . $EXT)
header("location: http://".$URL); 
```

这是我得到的错误：

```
Parse error: syntax error, unexpected T_VARIABLE 
```

错误在第 3 行：

```
$EXT = ".html" 
```

所以我的问题是：错误是因为 php 变量中的一个点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T14:47:42.653

您在代码中错过了分号`;`。每个语句都应该以分号结尾`;`

```
<?php
  $ID = $_POST["first_name"];
  $EXT = ".html";
  $DOMAIN = "blabla.com/membersarea/";
  $URL =  ($DOMAIN . $ID . $EXT);
  header("location: http://".$URL);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T14:49:25.363

您需要使用`;`分号分隔符来表示 php 这是这一行的结尾...

```
<?php
   $ID = $_POST["first_name"];
   $EXT = ".html";
   $DOMAIN = "blabla.com/membersarea/";
   $URL =  ($DOMAIN . $ID . $EXT);
   header("location: http://".$URL);
?> 
```

也使用`exit;`后`header()`

```
<?php
   $ID = $_POST["first_name"]; /* Sanitize your data, atleast use mysqli_real_escape_string()*/
   $EXT = ".html";
   $DOMAIN = "blabla.com/membersarea/";
   $URL =  ($DOMAIN.$ID.$EXT); /* Also don't leave any spaces here */
   header("location: http://".$URL);
   exit;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T15:11:11.253

你必须在每一行的末尾加上分号来告诉php它的行尾，你将开始下一个。因此，在您的代码中，将分号 (;) 放在前四行。

# ios - Iphone 模拟器崩溃

> ID：13902406
> 
> 赞同：0
> 
> 时间：2012-12-16T14:48:13.600
> 
> 标签：ios

我在 iphone 模拟器中崩溃了：

> 由于未捕获的异常“NsRangeException”而终止应用程序，原因是 NSMutableArray exchangeObjectAtIndex:withObjectAtIndex:]: index 6 beyond bounds [0 .. 5]'

我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T14:55:48.277

此崩溃日志说明您有一个数组，但您引用的索引为 6，而该数组中只有 6 个对象，这意味着应该有 5 个索引，因为索引从 0 开始计数，如下注释所示：

> 大批 （
> 
> 第一个对象 - 索引 0
> 
> 第二个对象 - 索引 1
> 
> 第三个对象 - 索引 2
> 
> 第 4 个对象 - 索引 3
> 
> 第 5 个对象 - 索引 4
> 
> 第 6 个对象 - 索引 5
> 
> )

所以`exchangeObjectAtIndex:withObjectAtIndex:`不会起作用，因为在其中任何一个中，您都提供了 6 的索引，但只有 5 个索引。

这是一个工作演示的示例：

```
[array exchangeObjectAtIndex: 5 withObjectAtIndex: 2]; 
```

这是完全有效的，因为两个索引都对数组有效。

这被称为`NSRangeException`一个非常明显的名称，您的索引超出范围（太大！）

# ios - 为 UINavigationBar 的标题设置导航按钮

> ID：13902408
> 
> 赞同：1
> 
> 时间：2012-12-16T14:48:37.920
> 
> 标签：ios, uinavigationbar, uinavigationitem

我想为我的栏标题制作一个标准的导航栏按钮。我可以设置自定义视图。在下面的示例中，我使用 UILabel 完成了此操作。但我看不到如何制作标准导航按钮。

```
-(void) setTitleButtonWithText: (NSString*) text {
    self.title = text;
    UIFont* font = [UIFont boldSystemFontOfSize:18];
    CGSize size = [text sizeWithFont:font];
    size.width+=6;
    size.height+=6;
    UILabel* titleLabel = [[UILabel alloc]init];
    CGRect frame = CGRectZero;
    frame.size = size;
    self.navigationItem.titleView = titleLabel;
    titleLabel.frame = frame;
    titleLabel.textColor = [UIColor redColor];
    titleLabel.text = text;
    titleLabel.font = font;
} 
```

![在此处输入图像描述](../Images/d697c47930ab5a919c2ffa6a7e372e5b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:14:16.747

`titleView`是一个`UIView`属性，所以由于`UIBarButtonItem`is not a`UIView`它不能在这里使用，作为替代方案，您可以尝试`UIButton`使用相同的样式制作 a 并将其设置为`titleView`

# android - Lint 和旧 API 级别警告

> ID：13902414
> 
> 赞同：5
> 
> 时间：2012-12-16T14:49:31.263
> 
> 标签：android

我针对 Android 4.2 (API 17) 进行编译，在我的清单中我有：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="10"/> 
```

在我使用的代码中：

```
String first = sdf.format(new   Date(context.getPackageManager().getPackageInfo(context.getPackageName(), 0).firstInstallTime)); 
```

字段 firstInstallTime 是在 API 9 中引入的。

Lint 没有警告我，即该字段在 API 8 中无效。我缺少什么，应该如何检测到这一点？

如果我针对 Android 2.2 (API 8) 进行编译，我会发现由于使用了新功能 (> API 8) 而导致的错误和一堆额外的错误，并且项目将无法编译。

（我知道在运行时处理此类事情，例如 Build.VERSION.SDK_INT）

最好的工作方式是什么？

为什么 lint 不起作用？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T21:31:52.063

这个答案可能会迟到，但您应该检查您的 lint 偏好

右键单击项目-> 属性-> Android Lint 首选项

然后在搜索框中搜索 min 并选择“UsesMinSDKAttributes”

最后选择“包括所有”按钮。希望支票刚刚被取消（我不得不做的只是为了修复一个愚蠢的 lint 错误）

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:03:49.947

如果它是在 api level9 中引入的，那么试试这个。
<使用-sdk android:minSdkVersion="9" android:targetSdkVersion="10"/>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-28T09:51:24.607

[当https://code.google.com/p/android/issues/detail?id=56427](https://code.google.com/p/android/issues/detail?id=56427)得到解决时，它可能会起作用

# java - 创建一个 ScrollPanel - 然后将结果放在那里

> ID：13902415
> 
> 赞同：-1
> 
> 时间：2012-12-16T14:49:32.277
> 
> 标签：java, swing, jframe

代码：用户输入一个值，代码在一个带有滚动条的框架中返回计算值，因为该框架太小而不能包含 100 行。

```
package Gui;

import java.awt.*;

import javax.swing.*;

public class Rekenen2 extends JFrame {

    public Rekenen2() {

        // setLayout(new GridLayout(3,1));

        JPanel panel1 = new JPanel();
        panel1.setBackground(Color.BLACK);

        JButton jbtComputeButton = new JButton("Compute");

        JPanel panel2 = new JPanel();
        panel2.setBackground(Color.BLACK);

        JPanel panel3 = new JPanel();
        final JTextField jtxInputTextField = new JTextField(8);

        final JLabel outputInPanel = new JLabel();

        panel1.add(jbtComputeButton, FlowLayout.LEFT);
        panel2.add(jtxInputTextField, FlowLayout.LEFT);
        panel3.add(outputInPanel);

        add(panel1, BorderLayout.NORTH);
        add(panel2, BorderLayout.CENTER);
        add(panel3, BorderLayout.SOUTH);

        jbtComputeButton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {

                int total = 0;

                int parsedInputValue = Integer.parseInt(jtxInputTextField
                        .getText());

                for (int i = 0; i < 100; i++) {

                    total = (parsedInputValue * i);
                    outputInPanel.setText("" + total);

                }

            }

        });
    }

    public static void main(String[] args) {

        JFrame frame = new Rekenen2();
        frame.setSize(300, 300);

        frame.setTitle("Compute App");
        frame.setLocationRelativeTo(null); // Center the frame
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(300, 300);
        frame.setVisible(true);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:57:51.600

只需将内容放入 JScrollPane（然后将 JScrollPane 添加到 JFrame）。这样就可以了。

# spring - Resteasy JBoss7 spring-3.2.0-M1

> ID：13902419
> 
> 赞同：0
> 
> 时间：2012-12-16T14:50:10.627
> 
> 标签：spring, jboss7.x, spring-3

我尝试在 jboss7 上运行 Web 服务客户端，但出现奇怪的异常

```
WARN  [org.jboss.as.ee] (MSC service thread 1-4) JBAS011006: Not installing optional component org.springframework.web.context.request.async.StandardServletAsyncWebRequest due to exception: org.jboss.as.server.deployment.DeploymentUnitProcessingException: JBAS011054: Could not find default constructor for class org.springframework.web.context.request.async.StandardServletAsyncWebRequest
    at org.jboss.as.ee.component.ComponentDescription$DefaultComponentConfigurator.configure(ComponentDescription.java:606) 
```

我阅读了不止一种合规但没有一种解决方案

# javascript - 调用 AJAX onkeyup 事件触发。使用计时器和中止来提高性能？

> ID：13902422
> 
> 赞同：1
> 
> 时间：2012-12-16T14:50:46.913
> 
> 标签：javascript, jquery, ajax

我对 AJAX 和 javascript 比较陌生，我正在使用 ajax 使用 onkeyup 事件生成搜索建议。我正在尝试使用计时器来调节 ajax 请求的数量，并使用中止功能来提高性能。我以前从未使用过这两个功能，我不确定它们是否设置正确。我想知道是否有人可以看看并让我知道我是否在正确的轨道上使用这些功能？提前谢谢了。

```
 var ajaxReq = null;  
        $(".prod-name-input").keyup(function(){
            searchword = $(this).val();
            //alert(searchword);
            if((searchword.length) > 3) {
                clearTimeout(timer);
                timer = setTimeout(function(){
                    if (ajaxReq != null) ajaxReq.abort();
                    var ajaxReq =  $.ajax({
                                        url: "invoice-get-data.php?searchword=" + searchword,
                                        dataType: "html",
                                        success: function(data){
                                           $(".smart-suggestions").html(data);
                                        }
                                    });
                }, 350);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T15:25:51.460

我建议你看看 Ben Alman 关于节流/去抖动的优秀文章：http: [//benalman.com/projects/jquery-throttle-debounce-plugin/](http://benalman.com/projects/jquery-throttle-debounce-plugin/)。

您想要实现的是去抖动，因此使用 Ben Alman 的插件，您可以使用：

```
var ajaxReq = null;  

$(".prod-name-input").keyup($.debounce(350, function(){
    searchword = $(this).val();

    if((searchword.length) > 3) {
        if (ajaxReq != null) ajaxReq.abort();
        ajaxReq =  $.ajax({
            url: "invoice-get-data.php?searchword=" + searchword,
            dataType: "html",
            success: function(data){
                $(".smart-suggestions").html(data);
             }
        });
    }
})); 
```

* * *

**编辑 ：**

事实上，在你的情况下，这是一个去抖动而不是一个节流。

我添加了一个 jsfiddle：http: [//jsfiddle.net/scaillerie/2AFp3/](http://jsfiddle.net/scaillerie/2AFp3/)。

# c - Linux内核中的_THIS_IP_宏

> ID：13902431
> 
> 赞同：4
> 
> 时间：2012-12-16T14:51:44.393
> 
> 标签：c, linux-kernel

以下宏出现在 include/linux/kernel.h 中

```
#define _THIS_IP_  ({ __label__ __here; __here: (unsigned long)&&__here; }) 
```

我不明白第二个 & 应用于 __here 会做什么。第一个获取本地标签的地址，但是第二个呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T14:54:28.777

第二个`&`in`&&`是使 GCC 将名称作为标签而不是变量查找所必需的。例如

```
foo: ;
int foo;

void *p1 = &&foo;
void *p2 = &foo; 
```

第二个初始化器引用 int 变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T14:56:18.370

我认为`&&`是获取标签的地址。

这是 gcc 扩展，我认为 C99 标准不支持这种行为。

[有关更多信息，请参见.. gcc 标签和值](http://gcc.gnu.org/onlinedocs/gcc-3.2.3/gcc/Labels-as-Values.html#Labels%20as%20Values)

和[本地标签声明](http://gcc.gnu.org/onlinedocs/gcc/Local-Labels.html)

在你的情况下，

`#define _THIS_IP_ ({ __label__ __here; __here: (unsigned long)&&__here; })`

在实际代码`_THIS_IP_`中将替换为块作用域下面的代码

```
{ __label__ __here;
 __here: 
(unsigned long) &&__here; 
} 
```

您正在声明本地标签`__here`。因此，要获取我们使用的标签的地址，`&&`而我们使用 single 获取变量的地址`&`。

# php - HTML/PHP 链接结构

> ID：13902434
> 
> 赞同：0
> 
> 时间：2012-12-16T14:52:24.197
> 
> 标签：php, html

我知道这个问题可能已经回答了，但我只是不知道要搜索什么，至少知道我在寻找什么会有所帮助。

所以我想做的是有一个链接，其中有许多文章要显示，如下所示：

```
www.mywebpage.com/store/article/[article no.] 
```

哪里货号 只是普通数字（例如 12345）。我想在我的 php 脚本中阅读它，并且我希望链接没有在 get 方法中生成的 ?article=[article no.] 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T14:55:37.280

您需要使用[.htaccess mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

一些使用它的例子：[http ://wiki.dreamhost.com/More_.htaccess_mod_rewrite_examples](http://wiki.dreamhost.com/More_.htaccess_mod_rewrite_examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:57:30.670

*mod_rewrite* 是你想要的。在您的 PHP 脚本中，使用 var_dump($_GET) 查看 HTTP 请求参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T14:58:48.767

您需要做的是将脚本流重定向到处理文章的可运行文件。如果您使用的是 Apache，您可以使用 .htaccess 文件和 mod_rewrite 来实现这一点。

```
RewriteEngine On
RewriteRule ^store/article/([0-9]+)$ myscript.php?article=$1 
```

这将在内部重定向脚本流，以便 myscript.php 将其视为您访问`myscript.php?article=123`文章编号 123，但您将能够通过链接访问它`store/article/123`。

`myscript.php`因此，您可以使用访问文章编号`$_GET['article']`。

# java - 涉及多个关联的 HQL JOIN

> ID：13902438
> 
> 赞同：3
> 
> 时间：2012-12-16T14:52:48.743
> 
> 标签：java, hibernate

我有三个关系`UserDetails`hasmany`FiledTask`和`Task`hasMany的实体`FiledTask`。我想要的只是`FiledTask`特定的列表`User`

对于用户详细信息：

```
@OneToMany(mappedBy="user",cascade=CascadeType.ALL)
Collection<FiledTask> filedTasks = new ArrayList<FiledTask>(); 
```

对于我有的任务

```
@OneToMany(mappedBy="task")
Collection<FiledTask> filedTasks = new ArrayList<FiledTask>(); 
```

FiledTask 看起来像

```
@ManyToOne
@JoinColumn(nullable = false, name = "taskId")
private Tasks task;
@ManyToOne
@JoinColumn(nullable = false, name = "userId")
private UserDetails user; 
```

我试过了

```
query = session.createQuery("from Tasks as tasks inner join tasks.filedTasks as files with files.user = :user");
query.setParameter("user", user); //user is UserDetails instance 
```

但是我得到错误子句只能引用驱动表中的列，意味着 FiledTask 不能 userId 进行比较？

```
with clause can only reference columns in the driving table [from com.akhi.app.cdm.Tasks as tasks inner join tasks.filedTasks as files with files.user = :user] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T15:10:51.990

如果您想要给定用户的 FiledTasks，那么最简单的方法是

```
UserDetails user = session.find(UserDetails.class, userId);
Collection<FiledTask> filesTasks = user.getFiledTasks(); 
```

使用 HQL，它将是

```
select f from FiledTask f where f.user = :user 
```

如果您想要的实际上是给定用户的任务，那么查询将只是

```
select t from Tasks t
inner join t.filedTasks filedTask
where filedTask.user = :user 
```

请注意，该实体应`Tasks`命名为`Task`。一个实例代表一个任务，而不是多个任务。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-27T13:00:36.317

好的，看起来 Hibernate 中存在错误

[https://hibernate.atlassian.net/browse/HHH-2772](https://hibernate.atlassian.net/browse/HHH-2772)

我认为在你的情况下你需要做的是

```
query = session.createQuery("from Tasks as tasks inner join tasks.filedTasks as files with files.user.id = :userId");
query.setParameter("userId", user.id); 
```

希望这可以帮助某人。我花了几个小时在这上面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-23T16:44:06.010

我在使用 MySql (Inno) DB 以及从 Hibernate 的`MySQL5InnoDBDialect`- 类派生的方言类时遇到了同样的问题。

我必须覆盖`supportsRowValueConstructorSyntax-method`并让它返回`false`为 MySQLDialect（它是 MySQL5InnoDBDialect 的基类）返回`true`。

```
@Override
public boolean supportsRowValueConstructorSyntax() {
    return false;
} 
```

这样做，hibernate 不使用对象引用（在您的情况下`.user`）来创建一个元组进行比较。我希望这个能帮上忙。

# macos - Building for Mac OS X

> ID：13902443
> 
> 赞同：0
> 
> 时间：2012-12-16T14:53:04.480
> 
> 标签：macos, build

I am a web programmer and I work mainly with ruby on rails and javascript jquery, and so on.

Now I would like to build a program for mac.
Which languages ​​do I need? C++, Objective C?

For info and good beginner tutorials I would be very grateful.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:04:14.223

You could use any language you like. My recommendation will be `Java` since it can be learned very easily and `OS X` comes with java pre-installed. However for Mountain Lion, you'll have to install java by yourself.

See

*   [`Easy Java Tutorial` - my tutorial on java](http://easyjavatutorial.weebly.com)

*   [`Oracle Java Trails`](http://docs.oracle.com/javase/tutorial/java/index.html)

*   [`JavaLessons.com`](http://javalessons.com/)

*   [`Learn Java in a Day`](http://www.roseindia.net/java/learn-java-in-a-day/index.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:06:49.013

The best tutorials that I have seen on programming particular to the Mac OS X environment are:

[http://en.wikibooks.org/wiki/Programming_Mac_OS_X_with_Cocoa_for_Beginners](http://en.wikibooks.org/wiki/Programming_Mac_OS_X_with_Cocoa_for_Beginners) http://www.youtube.com/user/AppleProgramming

Also if you like to read books, the tutorial books from Big Nerd Ranch are quite good:

[http://www.bignerdranch.com/books](http://www.bignerdranch.com/books)

Especially check out the "Cocoa Programming for Mac OS X (4th Edition)" book.

# jquery - 将多个 jQuery/DOM 元素添加到单个 jQuery 对象

> ID：13902444
> 
> 赞同：11
> 
> 时间：2012-12-16T14:53:08.800
> 
> 标签：jquery

我引用了多个 div，我想一次将它们全部添加到一个 jQuery 对象中。

这些东西都行不通...

```
>>> $( $e1, $e2, $e3 )
[div]

>>> $([ $e1, $e2, $e3 ])
[[div], [div], [div]]

>>> $().add($e1, $e2, $e3)
[div]

>>> $().add([ $e1, $e2, $e3 ])
[[div], [div], [div]] 
```

但是，这有效：

```
>>> $().add($e1).add($e2).add($e3)
[div, div, div]

>>> $e1.add($e2).add($e3)
[div, div, div] 
```

但我想要更优雅的解决方案。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-16T18:20:09.327

jQuery 确实允许您一次将一堆元素添加到一个 jquery 对象，但仅限于这些元素是纯 DOM 元素，而不是 jquery 对象本身。

```
var $e1 = $('#x'),
    $e2 = $('#y'),
    $e3 = $('#z');

var e1 = $e1[0],
    e2 = $e2[0],
    e3 = $e3[0];

>>> $( [$el, $e2, $e3] )    // does not work
[[div], [div], [div]]       // jquery object that contains other jQuery objects

>>> $( [el, e2, e3] )       // works
[div, div, div]             // jquery object that contains pure DOM objects 
```

当我们将一个 jquery 对象数组传递给 时`jQuery()`，在将它们添加到结果 jquery 对象之前，它们不会“解包”。

但是，请记住，传递单个 jquery 对象会使展开发生。

```
>>> $( $e1 )
[div]                       // returns a jquery object 
```

有趣的是，如果我们混合使用 jquery 和纯 DOM 对象，则只会对纯对象进行操作：

```
>>> $( [$e1, e2, $e3] ).css('background-color', '#000'); 
```

请注意，第二个元素是纯 DOM 元素，背景颜色仅应用于该第二个元素。

底线是：如果您想一次向一个 jquery 对象添加多个元素，请添加纯 DOM 对象，而不是 jquery 对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T14:56:22.087

使用每个循环遍历数组：

```
$.each([ $e1, $e2, $e3 ], function(i, $el){
    $el.doSomething()
}) 
```

演示：http: [//jsfiddle.net/REXmh/](http://jsfiddle.net/REXmh/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T15:11:37.883

好吧，您必须制作这些对象的数组并将其推送到变量中。

```
var $a = $('<div/>').attr('class','box');
var $b = $('<div/>').attr('class','box');
var $c = $('<div/>').attr('class','box');
var $d = $('<div/>').attr('class','box');

var $arr = [$a, $b, $c, $d];

$.each($arr, function(i, el){
  $(el).text('asdf').appendTo('body');
}); 
```

请检查小提琴：

> **[http://jsfiddle.net/nvRVG/1/](http://jsfiddle.net/nvRVG/1/)**

# google-app-engine - Google 应用引擎：如何包含位于“/static/js”目录中的 javascript

> ID：13902445
> 
> 赞同：1
> 
> 时间：2012-12-16T14:53:09.650
> 
> 标签：google-app-engine, templates

我在 HTML 文件中包含了一个 javascript 程序，但是，Google 模板引擎似乎无法找到它。“program.js”存放在应用程序的“/static/js”目录下，“base.html”中使用“{% include ... %}”命令如下。但是什么都不包括在内。出了什么问题？谢谢。

base.html：

```
<html ...>
...
<script>
{% include "/static/js/program.js" %}
</script>
...
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T15:13:37.180

首先将 app.yaml 中的 javascript 文件夹设置为静态处理程序这样，您的应用将能够从该 url 提供文件

```
handlers:

- url: /static
  static_dir: static 
```

然后在 HTML 模板文件或代码中正常寻址：

```
<html>
  <script src="/static/js/myscript.js" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T15:13:39.177

您必须将您的包含放在项目的模板目录中才能将其用作内联 javascript。这导致：

```
{% include "program.js" %}

or using :

/templates
/static/js

{% include "../static/js/program.js" %} 
```

现在您可以在 javascript 中使用 jinja 标签。

# matlab - 从文本文件导入并在 matlab 中创建一个元胞数组

> ID：13902447
> 
> 赞同：3
> 
> 时间：2012-12-16T14:53:22.643
> 
> 标签：matlab, text-parsing, cell-array

我有一个包含基因信息的文本文件，例如基因之间的关系和部分关系。

此文本文件包含每个 GOTerm 的段落（GO 术语是一个包含特定代码编号的节点，例如：GO:0030436），它具有：Go 术语 ID（每个段落的第一行）和 isa（如果有）（以 isa 开头并以 isa 结尾）和 partof Go 术语（如果有）（以 partof: 开头并以 partof 结尾）来自此文本文件的一个小样本是：

```
GO:0030436
isa:
GO:0034297
GO:0043936
GO:0048315
end of isa
partof:
GO:0042243
end of partof
genes:
end of genes
GO:0034297
isa:
end of isa
partof:
end of partof
genes:
end of genes
GO:0043936
isa:
GO:0001410
GO:0034300
GO:0034301
GO:0034302
GO:0034303
GO:0034304
end of isa
partof:
end of partof
genes:
end of genes 
```

我需要阅读这个文本文件并从中获取三个数据并制作一个包含 3 列的单元矩阵，如下所示：

```
map=

ID GoTerms               is_a            partof
GO:0030436              GO:0034297       GO:0042243
GO:0030436              GO:0043936              0
GO:0030436              GO:0048315              0
GO:0034297                   0                  0
GO:0043936              GO:0001410              0
GO:0043936              GO:0034300              0
GO:0043936              GO:0034301              0
GO:0043936              GO:0034302              0
GO:0043936              GO:0034303              0
GO:0043936              GO:0034304              0 
```

请注意，如果每个 Go 术语包含多个术语或部分术语，我应该重复 Go 术语 ID 以使单元矩阵适合且组织良好。

关于如何制作这段代码的任何想法？

我尝试编写代码，但它不起作用，因为我不知道如何使用超过 1 个 isa 和部分术语：

```
s={};
        fid = fopen('Opt.pad'); % read from the certain text file 
        tline = fgetl(fid); 
        while ischar(tline) 
           s=[s;tline]; 
           tline = fgetl(fid); 
        end 
% find start and end positions of every [Term] marker in s 
    terms = [find(~cellfun('isempty', regexp(s, '\GO:\w*'))); numel(s)+1];
      % for every [Term] section, run the previously implemented regexps
      % and save the results into a map - a cell array with 3 columns      map = cell(0,3);
      for term=1:numel(terms)-1
          % extract single [Term]  data
          s_term = s(terms(term):terms(term+1)-1);          % match regexps
          %To generate the GO_Terms vector from the text file
          tok = regexp(s_term, '^(GO:\w*)', 'tokens');
          idx = ~cellfun('isempty', tok); 
          GO_Terms=cellfun(@(x)x{1}, (tok(idx)));          %To generate the is_a relations vector from the text file
          tok = regexp(s_term, '^isa: (GO:\w*)', 'tokens'); 
          idx = ~cellfun('isempty', tok); 
          is_a_relations  =cellfun(@(x)x{1}, (tok(idx)));          %To generate the part_of relaions vector from the text file
          tok = regexp(s_term, '^partof: (GO:\w*)', 'tokens'); 
          idx = ~cellfun('isempty', tok); 
          part_of_relations =cellfun(@(x)x{1}, (tok(idx)));          % map. note the end+1 - here we create a new map row. Only once!
          map{end+1,1} = GO_Terms;
          map{end,  2} = is_a_relations;
          map{end,  3} = part_of_relations;
      end      map( cellfun(@isempty, map) ) = {0}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:40:57.583

A short and simple solution (albeit perhaps not the fastest):

```
% # Parse text file
C = textread('Opt.pad', '%s', 'delimiter', '');

% # Obtain indices for isa elements
idx = reshape(find(~cellfun(@isempty, strfind(C, 'isa')))', 2, []);
isa = arrayfun(@(x, y)x + 1:y - 1, idx(1, :), idx(2, :), 'Uniform', false);

% # Obtain indices for partof elements
idx = reshape(find(~cellfun(@isempty, strfind(C, 'partof')))', 2, []);
partof = arrayfun(@(x, y)x + 1:y - 1, idx(1, :), idx(2, :), 'Uniform', false);

% # Obtain indices of GO term elements and IDs
go = find(cellfun(@(s)any(strfind(s, 'GO:')), C));
id = go(~ismember(go, [isa{:}, partof{:}]));

% # Construct a new cell array
N = cellfun(@(x, y)max([numel(x), numel(y), 1]), isa, partof);
k = cumsum([1, N(1:end - 1)]);
X = cell(sum(N), 3); % # Preallocate memory!
repcell = @(x, n)arrayfun(@(y)x, 1:n, 'Uniform', false);
for ii = 1:numel(id)
    idx = k(ii):k(ii) + N(ii) - 1;
    X(idx, 1) = repcell(C{id(ii)}, N(ii));
    X(idx, 2) = [C{isa{ii}}, repcell('0', N(ii) - numel(isa{ii}))];
    X(idx, 3) = [C{partof{ii}}, repcell('0', N(ii) - numel(partof{ii}))];
end 
```

This should yield the following output:

```
X = 

    'GO:0030436'    'GO:0034297'    'GO:0042243'
    'GO:0030436'    'GO:0043936'    '0'         
    'GO:0030436'    'GO:0048315'    '0'         
    'GO:0034297'    '0'             '0'         
    'GO:0043936'    'GO:0001410'    '0'         
    'GO:0043936'    'GO:0034300'    '0'         
    'GO:0043936'    'GO:0034301'    '0'         
    'GO:0043936'    'GO:0034302'    '0'         
    'GO:0043936'    'GO:0034303'    '0'         
    'GO:0043936'    'GO:0034304'    '0' 
```

# javascript - 我们如何在javascript中增加在scriptlet中声明的变量

> ID：13902448
> 
> 赞同：0
> 
> 时间：2012-12-16T14:54:09.087
> 
> 标签：javascript, jsp, scriptlet

我想显示列表的一个元素，但是列表计数器的增量有问题。它只更新一次。

这是我在javascript中的功能代码

```
var element= document.getElementById("question");
        timeTotal =timeTotal -1;
        var nextQuestNumber = <%=k%>;
        var nbQuestion = <%=iter%>;
      if (timeTotal <= 0 && nextQuestNumber>0 && nextQuestNumber<nbQuestion)
      {
          timeTotal=<%=a%>;
         element.innerHTML = '<c:out value="<%=listQuestions.get(k).getQuestion()%>"/>';
         <%=k++%>;
      }

      setTimeout("listIter()", 1000); 
```

`k`是初始化为零的计数器，`iter`是列表大小，并且`timeTotal` 是减少总时间（一分钟）的变量。所以每一分钟我都想获取列表的下一个元素并显示它。

所以要加载这个函数，我这样做了：

```
<body onload="listIter()"> 
```

为了每秒重复这个函数，我在函数内部做了这个：

```
setTimeout("listIter()", 1000); 
```

但不幸的是，这对我不起作用。你能帮我解决这个问题并告诉我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:01:24.257

你不能直接这样做。

首先将整个列表传递给客户端代码，然后让`k`客户端从客户端数组中读取正确的项目，或者使用 AJAX 从服务器读取正确的项目。

此外，您没有任何停止条件，因此您的函数将无休止地运行，这不是一个好习惯。完成后，不要再次调用该函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:03:09.190

当您的 javascript 代码在客户端运行时，jsp 表达式 like`<% .. %>`或`<c:out .. />`在服务器端进行评估。您应该检查浏览器中的 javascript 代码以查看在服务器端呈现的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T15:06:16.337

程序中的以下问题：

> setTimeout("listIter()", 1000);

至

> setTimeout(listIter, 1000);

和

> <%=k++%>;

至

> 下一个任务编号++；

和

> 时间总计=<%=a%>;
> 
> 在程序中的其他一些变量中接收它，因为它在每次运行中都会被重置。

# android - android HTC 一个菜单不显示

> ID：13902454
> 
> 赞同：2
> 
> 时间：2012-12-16T14:54:49.053
> 
> 标签：android, menu, android-menu

我有一个应用程序在带有物理**菜单**按钮的所有设备中正确运行。几天前，我在 HTC One (Android 4) 中安装了该应用程序，菜单刚刚从我的应用程序中消失。在其他有菜单的应用程序上，在操作栏中添加 3 点菜单指示器。

我不想把代码放在这里，因为它没什么特别的……只是一个简单的菜单，添加在 onCreateOptionsMenu 方法中。**我应该怎么做才能解决 HTC One 的这个问题？**

该菜单出现在其他运行 Android 4 的设备（如 Galaxy s3）上，带有物理菜单按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:17:56.800

> 几天前，我在 HTC One (Android 4) 中安装了该应用程序，菜单刚刚从我的应用程序中消失。在其他有菜单的应用程序上，在操作栏中添加 3 点菜单指示器。

带有屏幕外菜单按钮的设备通常不会有“操作栏中的 3 点菜单指示器”。用户通过按该菜单按钮访问溢出。

例如，[此示例应用程序](https://github.com/commonsguy/cw-omnibus/tree/master/ActionBar/ActionBarDemo)有溢出。在带有屏幕外 MENU 按钮的设备或模拟器上运行时，没有“操作栏中的 3 点菜单指示器”：

![带有溢出的操作栏，在带有屏幕外菜单按钮的模拟器上](../Images/dd3a61e53f405c7345ecfc5f029c7283.png)

> 我应该怎么做才能解决 HTC One 的这个问题？

好吧，我的 HTC One S 没有 MENU 按钮。大概你有一些其他版本的 HTC One 系列确实有一个 MENU 按钮。如果是这样，您可以按 MENU 按钮：

![操作栏，带有溢出，在模拟器上带有屏幕外菜单按钮，按下所述按钮后](../Images/c1c6f66b2abcdc54008fbff8daf81f5e.png)

> 该菜单出现在其他运行 Android 4 的设备（如 Galaxy s3）上，带有物理菜单按钮。

那么，对于那些特定的设备，那是那些设备制造商的决定。

作为记录，这是 Galaxy Nexus 上的应用程序（没有屏幕外 MENU 按钮）：

![Galaxy Nexus 上带有溢出的操作栏](../Images/8fb8d639c2df7b57cc064c07fc5dae8f.png)

这是 HTC One S 上的应用程序（没有屏幕外的 MENU 按钮，说明了在操作栏*和*导航栏中显示溢出的错误）：

![HTC One S 上的操作栏，带溢出](../Images/3a08dd9a75477a80892c88ce3b705089.png)

这是 HTC One S 上应用[了修复程序](http://commonsware.com/blog/2012/06/08/removing-rogue-menus.html)的应用程序：

![HTC One S 上带有固定溢出的操作栏](../Images/dfc38f04d7098c8b1b5844cfd507408b.png)

这是 Nexus S 上的应用程序（带有屏幕外 MENU 按钮）：

![Nexus S 上带有固定溢出的操作栏](../Images/8ea75424a83d734d0c1fe71fe3bec188.png)

这是 Galaxy Note II 上的应用程序（带有屏幕外 MENU 按钮）：

![Galaxy Note II 上带有固定溢出的操作栏](../Images/d8299f237c091421f2d3d28def46cb03.png)

如您所见，在许多情况下，屏幕外 MENU 按钮的存在会抑制“操作栏中的 3 点菜单指示器”。

# c# - 如何在 C# 绘图期间保持图像质量？

> ID：13902457
> 
> 赞同：1
> 
> 时间：2012-12-16T14:55:11.503
> 
> 标签：c#, c#-4.0

我正在使用以下代码在 C# 中合并 2 个图像，

```
 using (Graphics g = Graphics.FromImage(image))
        {
            g.DrawImage(Image.FromFile("C:/Users/A/Desktop/A.jpg"), 0, 0, 128, 128);
            g.DrawImage(Image.FromFile("C:/Users/A/Desktop/B.png"), 12, 12, 77, 77);
        }
        image.Save("C:/Users/A/Desktop/C.jpg"); 
```

但图像质量令人分心。有什么方法可以保持图像质量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T14:58:43.027

JPEG 文件格式使用有损压缩。

如果要保持质量，请另存为 PNG，这是无损的。

# string - 如何在 Scheme 中定义一个字符串 - 我选择的任何字符串？

> ID：13902461
> 
> 赞同：1
> 
> 时间：2012-12-16T14:55:24.143
> 
> 标签：string, syntax, scheme

鉴于：

```
(define output "") 
```

或者那个

```
(define output "goodInput") 
```

当我在我的代码中运行这些定义时，我得到：

```
ERROR: In procedure memoization:
ERROR: Bad define placement (define output ""). 
```

这是为什么 ？

**编辑：**

```
; Formal function of the code
(define (double->sum myString)

(define myVector 0)
(set! myVector (breaking myString))
(define output "")
(define returnValue  (checkLegit myVector)) ; check the number of legitimate characters ,they need to be either numbers or "."
(define flag 0)   
(if (not(= returnValue (vector-length myVector))) (set! output "Input error") (set! flag (+ flag 1)))

(define i 0)            ; the length of the vector
(define count 0)        ; the value of all the numbers in the vector

(if 
    (= flag 1)

(do ()                             
  ((= i (vector-length myVector))) ; run until the end of the vector
  (cond 
    ((char=? (vector-ref myVector i) #\.) ; check if we found a dot 
               (set! output (appending output count))    (set! output (appendingStrings output ".")) (set! count 0)
    )

    (else (set! count (+ count (char->integer(vector-ref myVector i))    ))  (set! count (- count 48))
    ); end of else

  ) ; end of cond

  (set! i (+ i 1))    ; inc "i" by 1
); end of do
) ; end do 

; if flag = 1 , then the input is in a correct form
(if (= flag 1) (set! output (appending output count)))

(if (= flag 1)
    output
    "Input error")
) ; END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:31:58.767

问题不在于字符串定义本身（没有奇怪的字符或类似的东西），而在于发生该定义的代码中的*位置*：您在一个过程中，并且过程中的最后一行可以不是一个`define`。尝试在定义之后返回一些东西，它应该可以正常工作。

我猜你刚刚开始编写程序，继续`define`写剩下的代码。暂时在最后使用一个占位符值，这样解释器就不会抱怨了：

```
(define (double->sum myString)
  (define myVector 0) 
  (set! myVector (breaking myString))
  (define output "")
  'ok) 
```

还有一个风格问题——虽然可以像这样定义和设置一个变量，但使用`let`表达式来定义局部变量更为惯用。这就是我的意思：

```
(define (double->sum myString)
  (let ((myVector (breaking myString))
        (output ""))
    'ok)) 
```

这样，您就不必使用`set!`，它会改变变量并违背 Scheme 中首选的函数式编程风格。

# objective-c - iOS 6 支持的接口方向问题

> ID：13902469
> 
> 赞同：-1
> 
> 时间：2012-12-16T14:56:03.700
> 
> 标签：objective-c, ios, cocoa-touch, orientation

在我的视图控制器中，我实现了两种控制界面方向的方法：

```
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
}

- (BOOL)shouldAutorotate
{
    return YES;
} 
```

在`supportedInterfaceOrientations`方法中，我返回`UIInterfaceOrientationMaskPortrait`但当时我意识到该`shouldAutorotate`方法没有被调用。

但我改成`return UIInterfaceOrientationPortrait`中的`supportedInterfaceOrientations`方法。正在调用该`shouldAutorotate`方法，但出现以下错误：

> `UIApplicationInvalidInterfaceOrientation`，原因：'支持的方向与应用程序没有共同的方向，并且 shouldAutorotate 返回 YES'

顺便说一句，我选择了支持的界面方向中的所有方向。

已编辑

我使用 viewController 并嵌入了 navigationController。这是 AppDelegate.h

```
@interface AppDelegate : UIResponder <UIApplicationDelegate,UINavigationControllerDelegate>

@property (strong, nonatomic) UIWindow *window;

@property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (readonly, strong, nonatomic) NSManagedObjectModel *managedObjectModel;
@property (readonly, strong, nonatomic) NSPersistentStoreCoordinator *persistentStoreCoordinator;
@property (readonly, strong, nonatomic) UINavigationController *navController;
- (void)saveContext;
- (NSURL *)applicationDocumentsDirectory;
@end 
```

在 AppDelegate.m 下的 didFinishLaunchingWithOptions 方法中

```
 navController = (UINavigationController *)self.window.rootViewController;
                IPad_HomeViewController *rootVC=(IPad_HomeViewController *)navController.topViewController;
                rootVC.managedObjectContext = self.managedObjectContext;
return YES; 
```

在我的 iPad_HomeViewController 中，

```
@interface IPad_HomeViewController : UIViewController <UINavigationControllerDelegate>
@property (strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T06:44:26.317

```
- (BOOL) shouldAutorotate {
    return YES;
}

// for landscape
- (NSInteger) supportedInterfaceOrientations {
    return (1 << UIInterfaceOrientationLandscapeLeft) | 
           (1 << UIInterfaceOrientationLandscapeRight);
} 
```

如上所述，查看特定方向的掩码值：UIInterfaceOrientationMask 值。[UIInterfaceOrientationMask](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/supportedInterfaceOrientations)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T17:12:02.367

我知道这听起来很简单，但是在我的 iPhone 上进行测试时，我绞尽脑汁想弄清楚方向问题——我在纵向模式下设置了物理自动锁定模式——所以我没有以编程方式改变任何事情——认为这应该是故障排除步骤 1 ！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T15:30:02.637

两点：

1.  您的错误消息完全有意义，因为将其`UIInterfaceOrientationPortrait`用作返回值是没有意义的`supportedInterfaceOrientations`，它返回的是位掩码。使用其中一个[`UIInterfaceOrientationMask`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIApplication_Class/Reference/Reference.html#//apple_ref/c/tdef/UIInterfaceOrientationMask)值。

2.  您似乎担心，如果您使用正确的`UIInterfaceOrientationMaskPortrait`，iOS 似乎不会调用`shouldAutorotate`. 它可能仅`shouldAutorotate`在考虑了物理设备的物理方向和应用程序的当前方向与`supportedInterfaceOrientations`可能需要旋转的情况下调用。为什么要检查`shouldAutorotate`它是否断定设备已经处于可接受的方向？

有关详细信息，请参阅[supportedInterfaceOrientations](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/supportedInterfaceOrientations)和[处理视图旋转](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW57)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T15:16:30.900

要更改方向设置，请选择菜单 Targets->Summary-> Supported Device Orientations 并进行如下更改。

如果方向的按钮是暗的，则表示您已将其选为方向之一。 ![在此处输入图像描述](../Images/a81c183c6ce7cc95015dcdf756436b28.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-16T15:30:14.743

而不是使用整数来声明方向，为什么不使用 bool 并在其中插入 if 语句来检测您想要的任何方向。这是一个示例代码，希望对您有所帮助：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
if (interfaceOrientation == UIInterfaceOrientationPortrait) {
    return YES;
}
if (interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown) {
    return YES;
}
return NO;
} 
```

您可以在 if 语句中添加所有方向，它应该可以正常工作。阿德里安

编辑：

如果您想为 ios 6 选择一个选项，下面的代码应该适合您。

```
- (BOOL) shouldAutorotate
{
return YES;
 }

-(NSUInteger)supportedInterfaceOrientations
{
return UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskLandscapeLeft   | UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
} 
```

您可以在 ios 6 中更改几乎所有支持的方向。快乐编码

编辑1：

要以某种方式旋转`viewcontrollers`，只需使用我在上面发布的 ios 6 代码`viewcontrollers`。以下是步骤：

1.  在所有四个所在的项目级别中`internfaceorientations`，转到 ahean 并关闭所有内容，以便应用程序进入默认状态。

2.  实现我提供的所有 ios 6 代码`viewcontrollers`。

3.  而不是 yes 在`shouldautorotate`方法中声明 no。
4.  在第二种方法中，插入您想要的任何类型的方向。

这应该为您解决问题。快乐编码

# java - php exec() & java 发送参数

> ID：13902470
> 
> 赞同：1
> 
> 时间：2012-12-16T14:56:06.433
> 
> 标签：java, php, exec

我想通过 php 连接到 java 并在 php 中打印结果。现在我想向java发送一个参数并将其返回给php以查看它是如何工作的。我怎样才能做到这一点？到目前为止我有这个代码：

PHP：

```
exec("java jar/name.jar", $output);
print_r($output); 
```

爪哇：

```
public class Main {
    public static void main(String[] args) {
        System.out.print(args[0]);
    }
} 
```

结果是

```
Array ( ) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-16T16:31:34.013

做

```
exec("/full/path/to/java -jar jar/name.jar 2>&1", $output);
print_r($output); 
```

因为

*   您的 PHP 环境可能没有在路径中定义 java 可执行文件（也不应该）
*   jar 文件执行与`java -jar`
*   您将希望`2>&1`能够在输出中看到错误消息（从 stderr 重定向到 stdout）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T15:02:42.583

您的 java 程序需要至少一个参数，但 php 代码没有给出它，所以更改您的

```
exec('java jar/name.jar', $output); 
```

到

```
exec('java jar/name.jar some_value', $output); 
```

编辑：

没有指定参数时得到 Array ( ) 的原因可能是因为 java 发送的错误是发送到 stderr 的，而 $output 只从 stdout 获取数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T15:01:19.707

考虑使用 RESTful 设计。将 Java 程序放在一个 URL 并使用 PHP *file_get_contents()* 从 URL 读取。Java 程序写入浏览器输出流的任何内容都将在该函数加载的 PHP 变量中可见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T15:05:18.100

如果您真的想将原生 Java 代码集成到您的 PHP 应用程序中，那么[PHP/Java 桥](http://php-java-bridge.sourceforge.net/pjb/)可能能够以比通过 exec()-ing java 代码更好的方式解决这个问题。

然而，为您的 Java 功能创建一个小型服务是首选方式，然后通过基于 Web 的小型 API（最好使用 JSON 作为交换格式）公开这些功能。

# task - 从搜索任务中获取 URL

> ID：13902474
> 
> 赞同：0
> 
> 时间：2012-12-16T14:56:29.627
> 
> 标签：task, windows-phone-8

我见过许多从应用程序启动搜索任务的示例，但没有应用程序可以从该任务中获取一些信息的示例。

例如，是否可以获得用户在任务中选择的已找到站点或 URL 的列表（而不是将用户导航到该 URL）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T00:04:56.263

WP8 中没有内置 API 允许将网络搜索结果输入您的应用程序。您应该为此使用第 3 方框架。

Bing 有一个官方的 Web API，你可以使用它，但它在每月 10,000 次 API 调用后开始[收费。](https://datamarket.azure.com/dataset/5BA839F1-12CE-4CCE-BF57-A49D98D29A44)你可以阅读更多关于它@https [://datamarket.azure.com/dataset/5BA839F1-12CE-4CCE-BF57-A49D98D29A44](https://datamarket.azure.com/dataset/5BA839F1-12CE-4CCE-BF57-A49D98D29A44)

请注意，Bing 确实曾经有一个带有 API 密钥的适当 C# API，但该 API 的 V2.0 已被弃用，取而代之的是新的 Azure 数据市场服务。

Google 没有用于搜索结果的 API。但在过去的几年里，开发人员使用 Google 的 AJAX 网络服务来获得这些。请参阅 C# 代码示例 @ [http://answers.oreilly.com/topic/2165-how-to-search-google-and-bing-in-c/](http://answers.oreilly.com/topic/2165-how-to-search-google-and-bing-in-c/)

# jquery - 如何删除列表视图中输入标签周围的填充和边框？

> ID：13902476
> 
> 赞同：0
> 
> 时间：2012-12-16T14:56:59.420
> 
> 标签：jquery, jquery-mobile

在 jQuery Mobile 中，我试图在列表视图项中放置一个复选框。我想删除顶部/左侧/底部的额外填充以及圆形边框。我希望保留锚标签的右箭头。

我设法通过清除锚标记的填充来删除其中的**一些。**我曾尝试检查 Firefox 和 chrome 中的元素，但无法弄清楚是什么添加了空间。似乎输入标签导致父级的更多填充。

```
<ul data-role="listview" data-inset="false" data-filter="true">
  <li>
    <a href="#">Normal item</a>
  </li>
  <li>
    <a href="#" style="padding-top:0px;padding-left:0px;padding-bottom:0px;">
      <fieldset data-role="controlgroup">
        <label ><input type="checkbox" name="checkbox-0" />With Checkbox</label>
      </fieldset>
    </a>
  </li>
  <li>
    <a href="#">Normal item</a>
  </li>
</ul> 
```

这是一个要演示的小提琴：http: [//jsfiddle.net/HPGGk/7/](http://jsfiddle.net/HPGGk/7/)

**更新**：我想我可能很接近。我确定字段集正在添加填充。我调整了边距，现在我只需要删除边框：http: [//jsfiddle.net/HPGGk/8/](http://jsfiddle.net/HPGGk/8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:39:00.847

看看这个例子，几周前我做了一些其他的例子，但它们应该对你有用：

示例 1：带有经典复选框的列表视图：

[https://stackoverflow.com/a/13564924/1848600](https://stackoverflow.com/a/13564924/1848600)

示例 2：带有 jQ​​M 外观复选框的 Listview：

[https://stackoverflow.com/a/13634738/1848600](https://stackoverflow.com/a/13634738/1848600)

最坏的情况给我发一条消息，我将重建你的例子。

# android - 如何在hierarchyviewer中找到视图后面的代码

> ID：13902477
> 
> 赞同：0
> 
> 时间：2012-12-16T14:57:00.547
> 
> 标签：android, android-layout, hierarchyviewer

Android hierarchyviewer 为树形视图中的每个视图显示一个 ID。ID 是一个@符号后跟一个数字，例如@4051d698

在[android 文档](https://developer.android.com/tools/debugging/debugging-ui.html)中，这个数字的用途被解释为“指向查看对象的指针”。

假设一个人拥有像 AOSP 这样非常大的 android 项目的源代码。如何通过这个 ID 找出视图背后的 java 源代码是什么？

有没有我可以调用的方法告诉我绑定到这个指针的 R.java 条目是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:23:22.813

> 如何通过这个 ID 找出视图背后的 java 源代码是什么？

你不能，至少没有调试器。如果您习惯于 C/C++ 开发，则该十六进制值大致类似于指针。仅仅因为您有一个指向 C/C++ 中一大块 RAM 的指针并不意味着您可以确定驻留在该指针处的对象背后的源代码。

现在，调试器中可能有一种方法可以提供此十六进制值，并且调试器会将其与对象和源代码相匹配。我不是 Eclipse 专家，也不是其他 IDE 调试器的专家，我不知道是否有办法做到这一点。但是，即使可以做到这一点，它也可能只会给您对象类的来源（例如，如果`View`是 a `ListView`，它可能会将您发送到`ListView`源代码），而不是*创建*对象的源代码。

> 有没有我可以调用的方法告诉我绑定到这个指针的 R.java 条目是什么？

首先，`R.java`不“绑定”到任何指针。

其次，有`View`问题的可能不是来自膨胀的布局。它可能是直接用 Java 代码创建的。

如果`View`有一个“查看对象 ID”（例如`id/content`），这可以更好地帮助您找到它的来源，因为这将是一个`android:id`值，可能来自您的布局资源。

# c# - .NET 将 SSL 证书添加到 SOAP 客户端请求

> ID：13902483
> 
> 赞同：4
> 
> 时间：2012-12-16T14:57:39.310
> 
> 标签：c#, .net, soap

使用 .NET 4.0 框架，我正在尝试进行服务器到服务器 HTTPS SOAP 服务调用。在客户端服务器上，我正在尝试添加本地 SSL 证书，以便接收呼叫的服务器可以识别我。

我要添加的证书不是来自本地计算机的存储（即使是，问题仍然存在），只是作为本地文件放置在我的计算机上的 (.cer) 文件。

代码工作正常，似乎添加了证书，但我的 System.Net.trace.log 文件不断为每次调用添加以下错误：“无法在 LocalMachine 存储或 CurrentUser 存储中找到证书。” 我试图打电话的服务器一直告诉我我的请求没有附加证书。我得到的最后一个 WebException 是：“请求被中止：无法创建 SSL/TLS 安全通道。” 我的 GetCertificate 函数：

```
private X509Certificate2 GetCertificate()
{
    X509Certificate2 cert;
    try
    {
        cert = new X509Certificate2("MyCertificateFoder\\MyCertificate.cer");
    }
    catch (Exception ex)
    {
        throw;
    }
    return cert;
} 
```

服务调用代码：

```
X509Certificate2 cert = GetCertificate();
ServiceClient.ClientCertificates.Add(cert);
serviceMethodResponse = ServiceClient.ServiceMethod(serviceMethodRequest); 
```

将不胜感激任何建议。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-11T13:56:42.223

这里的主要错误是，当使用 SSL 和客户端身份验证时，应该使用 .pfx 文件（带有客户端私钥、证书、证书链、根授权证书）。

不是 .cer 文件。

这是错误的原因。

# actionscript - Flash Builder 4.7：创建 Actionscript AIR 项目时没有 html 模板页面...如何调试？

> ID：13902484
> 
> 赞同：0
> 
> 时间：2012-12-16T14:57:39.667
> 
> 标签：actionscript, air, flash-builder, project, wmode

我是第一次开始使用 Flash Builder（我有 4.7），我曾经使用过 Flash。我正在为 Starling 在移动开发中尝试一个游戏项目。所以我创建了一个 Actionscript Project 并为 Adob​​e Air 制作了目标桌面。现在调试它，我总是得到错误 wmode 设置不正确。我遇到的每个教程都说编辑 html-template 页面以添加 wmode=direct。除了创建项目时，我没有 html 模板页面。我有应用程序 xml 页面，但这是出于不同的目的。我无法在属性窗口的 Actionscript 编译器选项中创建或销毁 html-wrapper 页面，因为没有此选项。将 wmode 添加到我的主要文件中的 swf 元数据中没有任何作用。我可以'

那么我错过了什么？如何在电脑上调试这个项目？如何设置 wmode 或克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T03:32:54.513

我终于在“Project1-app.xml”文件下找到了它（Project1 是你命名的任何东西）。如果您向下滚动到

```
< !-- < renderMode>< /renderMode> --> 
```

删除

```
< !-- part and the --> 
```

部分然后在两者之间添加“直接”。所以它应该如下所示：

```
< renderMode>direct< /renderMode> 
```

当你这样做时它应该变成绿色

# html - 表溢出问题

> ID：13902485
> 
> 赞同：4
> 
> 时间：2012-12-16T14:57:45.470
> 
> 标签：html, css

我面临的一个非常基本的问题是，在单元格上溢出时`<td>`，文本会超出指定的宽度

问题如下所示：

```
+---------------+
| abcdef@hotmai|.com
+---------------+

```

我希望溢出文本转到下一行。类似于以下的东西。

```
+---------------+
| abcdef@hotmai|
| .com |
+---------------+

```

我尝试了以下css但没有用： `max-width:20%; table-layout:fixed;`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T14:59:13.773

使用`word-wrap`CSS 属性将文本包裹在固定宽度内`td`

```
table td {
   word-wrap: break-word;
} 
```

# python - python poplib.POP3解密base64

> ID：13902489
> 
> 赞同：0
> 
> 时间：2012-12-16T14:58:17.597
> 
> 标签：python, base64, pop3, poplib

我正在尝试使用以下 python 代码将 pop3 中的所有电子邮件下载到文本文件中：

```
def Download(pop3,username,password):
try:
    Mailbox = poplib.POP3(pop3, '110') 
    Mailbox.user(username) 
    Mailbox.pass_(password) 
    numMessages = len(Mailbox.list()[1])
    for i in range(numMessages):
        logfile = open(username + '.log', 'a')                    
        logfile.write('\n')                    
        for msg in Mailbox.retr(i+1)[1]:
            print msg                   
            logfile.write('%s\n' % (msg))                    
        logfile.close()
    Mailbox.quit()
except KeyboardInterrupt:
    print 'Exit'
    sys.exit(1) 
```

我的问题是电子邮件在 base64 中加密，我如何只调用电子邮件正文进行解密？

```
base64.b64decode(body) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T15:50:51.203

您应该使用[`email`](http://docs.python.org/2/library/email)-package 来解析电子邮件。[`get_payload`](http://docs.python.org/2/library/email.message.html#email.message.Message.get_payload)解析消息对象上的- 方法可以在使用`decode=True`参数时为您处理解码。

对于一个简单的（非多部分）消息，它看起来像这样：

```
import email.parser
...
parser = email.parser.FeedParser()
for msg in Mailbox.retr(i+1)[1]:
    parser.feed(msg + '\n')
message = parser.close()
payload = message.get_payload(decode=True)
print(payload)
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T15:07:41.253

在您的文本上尝试以下操作：

```
import base64

base64.decodestring(string_to_decode) 
```

举个例子：

```
In [1]: import base64

In [2]: base64.encodestring("alpha beta gamma")
Out[2]: 'YWxwaGEgYmV0YSBnYW1tYQ==\n'

In [3]: test = base64.encodestring("alpha beta gamma")

In [4]: base64.decodestring(test)
Out[4]: 'alpha beta gamma' 
```

在你的情况下，你应该有：

```
msg = base64.decodestring(msg)
logfile.write('%s\n' % (msg)) 
```

只要注意是什么`msg`；如果它不是 base64 字符串，则应拆分结果，以便获得所需的 base64 编码部分。

# php - Zend PDF 所见即所得编辑器输出

> ID：13902497
> 
> 赞同：0
> 
> 时间：2012-12-16T14:58:52.743
> 
> 标签：php, zend-framework, wysiwyg, zend-pdf

我目前正在构建一个 PDF 编辑器。我在实现标签处理时遇到了问题。

我想允许以下标签：[h1],[h2],[h3],[h4],[h4],[h5],[h6],[strong]

我用一个名为drawText（下面的代码）的方法构建了一个类。

[h1] 标签会改变字体大小和字体粗细。正如您在代码中看到的那样，我正在输出文本行。示例文本行：这是您的[strong]登机牌[/strong]，请将此 PDF 文件保存在您的智能手机或平板电脑上并[strong]在登机口出示[/strong]。

我想让 [strong] 粗体之间的文本。要使用 Zend_PDF 执行此操作，我需要使用粗体文本设置 TTF 文件，然后找到当前 X 坐标并调用 $this->pdf()->drawText(text, X-coordinate, Y-coordinate, charset)。我已经思考并尝试了几个小时来编写使这成为可能的代码（尝试使用explode，preg_match_all等），但我无法让它工作......

我相信我不是唯一一个遇到这个问题的人，我希望有人已经考虑过这一点，并且可以通过告诉他或她是如何做到的来提供一点帮助......

希望收到某人的来信，并提前致谢！

```
/**
 * drawSplittedText()
 * 
 * @param array $text
 * @return object Application_Plugin_PdfPlugin
 */
public function drawSplittedText(Array $text)
{
    // Count the number of rows.
    $textRowCount = count($text);

    $i = 0;        

    foreach ($text as $row)
    {           
        // Replace tabs, because they're not outputted properly.
        $row = str_replace("\t", '    ', $row);

        // If the character encoding of the currrent row not is UTF-8, convert the row characters to UTF-8.
        if (($rowEncoding = mb_detect_encoding($row)) != 'UTF-8') {
            $row = iconv($rowEncoding, 'UTF-8', $row);
        }

        // Output row on PDF
        $this->pdf()->drawText($row, $this->_defaultMarginleft, $this->currentY, 'UTF-8');

        $this->newLine();

        ++$i;               
    }

    return $this;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T01:08:08.050

上面的代码可能是大多数人在使用 渲染文本时开始的地方`Zend_Pdf`，但不幸的是，您将不得不开发一些更复杂的东西来实现您的目标。

首先，您需要跟踪当前的 x 和 y 位置，以及当前的字体类型和大小。

然后，您将需要一个辅助函数/方法来计算以当前字体和大小呈现时一大块文本需要多少空间。

然后我会建议分解你的渲染代码如下：

```
function writeParagraph( $text )
{
    // Looks for the next tag and sends all text before that tag to the
    // writeText() function. When it gets to a tag it changes the current
    // font/size accordingly, then continues sending text until it runs out
    // of text or reaches another tag. If you need to deal with nested tags
    // then this function may have to call itself recursively.
}

function writeText( $text )
{
    // The first thing this function needs to do is call getStringWidth() to
    // determine the width of the text that it is being asked to render and if
    // the line is too long, shorten it. In practice, a better approach is to
    // split the words into an array based on the space between each word and
    // then use a while() loop to start building the string to be rendered
    // (start with first word, then add second word, then add third word, etc),
    // in each iteration testing the length of the current string concatenated
    // with the next word to see if the resulting string will still fit. If you
    // end up with a situation where adding the next word to the current string
    // will result in a string that is too long, render the current string and
    // a line feed then start the process again, using the next word as the first
    // word in the new string. You will probably want to write a bonus line feed
    // at the end as well (unless, of course, you just wrote one!).
}

function getStringWidth( $str )
{
    // This needs to return the width of $str
} 
```

我有一个示例类（https://github.com/jamesggordon/Wrap_Pdf），它实现了`writeText()`和`getStringWidth()`函数/方法，还包括所有其他内容，如当前位置、当前样式等。如果你不知道该`writeParagraph()`函数的代码让我知道，我会将其包含在`Wrap_Pdf`.

# php - 包括年份和月份，而不仅仅是“xxx 天前”

> ID：13902501
> 
> 赞同：-1
> 
> 时间：2012-12-16T14:59:26.787
> 
> 标签：php, wordpress

目前用于在我的帖子上`<?php echo human_time_diff( get_the_time('U'), current_time('timestamp') ) . ' ago'; ?>`显示日期之类的东西`22 Days ago`，但是当帖子很旧时，比如一年多，它可能会显示类似`556 days ago`的东西而不是类似的东西`1 year ago`或`3 years ago`

如何让它以这种格式显示，而不是仅仅计算天数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:03:09.697

您必须创建一个函数来计算秒、分钟、小时、天、周、年……

然后添加一个过滤器`the_time`：

```
add_filter('the_time', 'your function'); 
```

如果你需要一个函数来计算时间，在 Jason Bobich 的这篇文章中你有一个很好的：[A better way to add time ago to your wordpress](http://www.jasonbobich.com/wordpress/a-better-way-to-add-time-ago-to-your-wordpress-theme/)

# java - 将 JarEntry 转换为字符串

> ID：13902503
> 
> 赞同：0
> 
> 时间：2012-12-16T14:59:31.687
> 
> 标签：java, string, jar

我迭代了一些我知道是文本文件的 JarEntries。但是当我找到它时如何将 JarEntry 转换为字符串呢？

```
 JarEntry jarEntry = connection.getJarEntry();
    JarFile archive = connection.getJarFile();
    Enumeration<JarEntry> entries = archive.entries();
    while (entries.hasMoreElements()) {
        JarEntry entry = entries.nextElement();
        String name = jarEntry.getName();
        if (entry.getName().startsWith(name) && !entry.isDirectory()) {
                     // Convert this entry to a string
        }
    } 
```

编辑：

我认为应该这样做：

```
 InputStream inputStream = archive.getInputStream(entry);
            StringWriter writer = new StringWriter();
            IOUtils.copy(inputStream, writer, "UTF-8");
            String theString = writer.toString();
            System.out.println(theString); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:05:56.243

一种可能：

```
private String readFileFromJar(String pathname) throws IOException {

InputStream configStream = getClass().getResourceAsStream(pathname);
try {
    FileChannel fc = stream.getChannel();
    MappedByteBuffer bb = fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());
    /* Instead of using default, pass in a decoder. */
    return Charset.defaultCharset().decode(bb).toString();
}
finally {
    stream.close();
 } 
```

}

然后：

```
if (entry.getName().startsWith(name) && !entry.isDirectory()) {
        String content = readFile(name);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:31:37.047

找到您的条目后，请执行此操作

```
 BufferedReader rdr = new BufferedReader(new InputStreamReader(archive.getInputStream(jarEntry)));
        StringBuilder sb = new StringBuilder();
        for (int c = 0; (c = rdr.read()) != -1;) {
            sb.append((char) c);
        }
        String txt = sb.toString(); 
```

# sql - 在 PLSQL 过程的 IN 子句中使用表类型

> ID：13902505
> 
> 赞同：2
> 
> 时间：2012-12-16T14:59:40.157
> 
> 标签：sql, oracle, plsql

我有一个采用表类型输入参数的过程。现在我必须在 SELECT 查询的 IN 子句中使用这个参数。

```
CREATE TYPE ids IS TABLE OF NUMBER;

CREATE PROCEDURE (emp_ids IN ids) IS

CURSOR IS (SELECT * FROM EMPLOYEES WHERE EMP_ID IN (SELECT * FROM TABLE(emp_ids)); ..... 
```

但是我发现这段代码不起作用，因为本地集合类型不能在 SQL 语句中使用。

有没有其他方法可以在 SELECT 语句中使用表类型参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T15:19:06.973

根据您发布的内容，您将集合声明为模式对象，而不是本地类型。这意味着您在使用它时不应该有任何问题。这是一个例子：

```
-- collection type as schema object
SQL> create or replace type ids is table of number;
  2  /

Type created

SQL> create or replace procedure proc1 (emp_ids IN ids)
  2  IS
  3     cursor c is (
  4       select first_name
  5         from employees
  6        where employee_id in (select column_value
  7                                from table(emp_ids)
  8                              )
  9     );
 10  begin
 11    for i in c
 12    loop
 13       dbms_output.put_line(i.first_name);
 14    end loop;
 15  end;
 16  /

Procedure created

SQL> exec proc1(ids(101, 103, 200));

Neena
Alexander
Jennifer

PL/SQL procedure successfully completed 
```

# c# - 最佳实践：使用什么，.Net 类或短名称？

> ID：13902506
> 
> 赞同：6
> 
> 时间：2012-12-16T14:59:40.403
> 
> 标签：c#

在 C# 中，我们有 .Net 类和短名称，例如 Double 和 double。某个时候有人建议我总是使用简称，想知道为什么。**我知道他们都是一样的**，但为什么有时比其他人更喜欢一个呢？只是可读性还是有更多的东西？

例如，如果我正在创建一个具有字符串和布尔属性的类，则应始终使用以下哪一项以及何时应使用另一项：

```
Class MyClass {
    ...
    private String x;
    private Boolean y;
    ...
} 
```

或者

```
Class MyClass {
    ...
    private string x;
    private bool y;
    ...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T15:02:40.487

简而言之：随心所欲。

我宁愿每次可以使用别名。

`Int32`当您的代码中有多个不同的 Int 时，请使用而不是 int。喜欢混合`Int32`，`Int64`或`Int16`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T15:02:19.653

好吧，它们是一样的。编译到 CLR 后，它们都指向相同的数据类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-16T15:03:16.367

您可以在代码中使用 Int32 或 int，但您应该以一种方便的方式使用它，您不应该同时使用它们，这会使代码不可读，但是 C# 约定说您应该始终使用同义词。

有时，您可能会在 Java 中的“[包装类](http://www.go4expert.com/forums/showthread.php?t=22183)”和.Net 中的“[可空类型](http://msdn.microsoft.com/en-us/library/1t3y8s4s%28v=vs.80%29.aspx)”或“ C# 的[类型同义词”之间混合使用](https://stackoverflow.com/questions/3885048/type-synonyms-in-c)

C#中“int”与“Int32”相同，“bool”与“Boolean”相同，“string”与“String”相同，但“int”在C#语言中是“System.Int32”的同义词.Net 类。

你可以使用“int？” 或 Nullable<int> 使变量接受“null”值，但在 Java 中，您应该使用包装类 Integer 而不是 integer 来保存“null”值。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-16T15:05:36.330

那完全取决于你。对于某些可读性更重要。因此，请使用对您来说更具可读性和方便性的一种。

别名只是因为方便而使用，但它们与编译器的实际别名相同。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-16T15:09:09.510

string 是 System.String 的别名，bool 是 System.Boolean 的别名，依此类推。C# 类型关键字及其别名是可互换的。

我个人更喜欢使用别名，除非我需要强调显式类型以防将来可能需要此信息。例如使用 System.Int32 代替 if int 来*明确*表明存在限制，即使它们完全相同。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-16T15:10:14.770

当您需要访问静态方法和声明给定类型的变量/字段时，您应该使用类名和短名称。

```
int i = 0;
Int32.TryParse(s, out i); 
```

请参阅任何 Microsoft 代码示例[http://msdn.microsoft.com/en-us/library/system.int32.aspx](http://msdn.microsoft.com/en-us/library/system.int32.aspx)

编译后的代码与其他方式没有区别。它更干净，更具可读性。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-16T15:03:56.207

`int`, `bool`,`string`等只是`System`命名空间中预定义类型的别名。

此处的完整列表：[内置类型（C# 参考）](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/built-in-types)。

# ffmpeg - 与 ffmpeg 的音视频同步

> ID：13902507
> 
> 赞同：4
> 
> 时间：2012-12-16T14:59:52.807
> 
> 标签：ffmpeg, video-processing, audio-video-sync

我有非常奇怪的视频文件。它有音频/视频同步问题。视频很快，音频很好。视频有奇怪的帧速率：26.07 fps。

如何使用 ffmpeg 修复视频流。在视频开始时，同步正常，但在视频流结束时，还剩下大约 5 分钟的音频，并且正在播放黑屏。

这是 ffmpeg -i video.avi 的输出

```
ffmpeg version git-2011-10-15-1d0afec, Copyright (c) 2000-2011 the FFmpeg developers
  built on Oct 15 2011 14:27:57 with gcc 4.4.5
  configuration: --enable-gpl --enable-libfaac --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libtheora --enable-libvorbis --enable-libx264 --enable-nonfree --enable-postproc --enable-version3 --enable-x11grab --enable-libxvid
  libavutil    51\. 21\. 0 / 51\. 21\. 0
  libavcodec   53\. 20\. 1 / 53\. 20\. 1
  libavformat  53\. 16\. 0 / 53\. 16\. 0
  libavdevice  53\.  4\. 0 / 53\.  4\. 0
  libavfilter   2\. 43\. 6 /  2\. 43\. 6
  libswscale    2\.  1\. 0 /  2\.  1\. 0
  libpostproc  51\.  2\. 0 / 51\.  2\. 0
[mpeg4 @ 0xa585420] Invalid and inefficient vfw-avi packed B frames detected
Input #0, matroska,webm, from 'video.avi':
  Duration: 02:03:46.01, start: 0.000000, bitrate: 103 kb/s
    Stream #0:0: Video: mpeg4 (Advanced Simple Profile) (XVID / 0x44495658), yuv420p, 704x288 [SAR 1:1 DAR 22:9], 26.07 fps, 25 tbr, 1k tbn, 25 tbc (default)
    Stream #0:1(pol): Audio: ac3, 48000 Hz, 5.1(side), s16, 448 kb/s (default) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T09:19:22.423

首先，您可能需要分离音频：

```
 ffmpeg -i input.avi -vn -ac 2 -ar 48000 -ab 448k -f mp3 audio.mp3 
```

然后您需要将视频文件的整个长度（以秒为单位）除以视频流的实际长度（视频停止并且您可以听到音频的时间）。你应该得到一个略高于 1 的数字（1.12 或类似的数字）。你把这个商和：

```
 ffmpeg -i input.avi -vf "setpts=quotient*PTS" -an output.avi 
```

然后你将视频和音频结合起来。

# sql-server - 'BEGIN' 附近的语法不正确。在 TSQL 中

> ID：13902511
> 
> 赞同：0
> 
> 时间：2012-12-16T15:00:02.103
> 
> 标签：sql-server, tsql

你好程序员我正在编写一个 TSQL 内联表函数，实际上我在 sql 中不够好，当我完成我的代码时，我得到了这个错误“'BEGIN'附近的语法不正确。” ，谁知道解决方法，请给我。顺便说一句，当我双击错误消息时，它选择了最后一个“结束”

```
create FUNCTION [dbo].[CheckLogin]
(   
    @un varchar(max),
    @pw varchar(max)
)
RETURNS TABLE 
AS
begin
    declare @unexist int, @unpwmatch int, @uid bigint
    declare @uisactivated bit , @uisdeleted bit
    -----
    set @unexist = (select COUNT(UserAccessInfo.UserId) FROM UsersAccessInfo 
    WHERE UserAccessInfo.UserName = @un OR UserAccessInfo.UserEmail = @un)
    ------
    set @unpwmatch = (select count(usersaccessinfo.userid) from usersaccesinfo
    WHERE (usersaccessinfo.UserName = @un) AND (usersaccessinfo.UserPassword = @pw) OR
    (usersaccessinfo.UserEmail = @un) AND (usersaccessinfo.UserPassword = @pw))
    ------
    set @uid =(select usersaccessinfo.userid from usersaccessinfo where
    serAccessInfo.UserName = @un OR UserAccessInfo.UserEmail = @un)
    ------
    if @uid <> Null
    begin
        set @uisactivated =(select usersaccessinfo.userisactivated from usersaccessinfo
        where usersaccessinfo.userid=@uid)
    end
    ------
    if @uid <> null
    begin
        set @uisactivated =(select usersaccessinfo.userisactivated from usersaccessinfo
        where usersaccessinfo.userid=@uid)
    end
    ------
    if @unexist = 0
    begin
        select dbo.getreportbyid('1004')
    end;
    else if @unpwmatch = 0
    begin
        select dbo.getreportbyid('1005')
    end;
    else if @uid<>0
    begin
        if @uisactivated =0
        begin
            select dbo.getreportbyid('1002')
        end;
        else if @uisdeleted = 1
        begin
            select dbo.getreportbyid('1003')
        end;
    end;
    else
    begin
        select ('successful') as report
    end;
    return
end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T15:18:19.533

问题是这些行：

```
...
RETURNS TABLE
AS
... 
```

这对于四种类型的用户定义函数中的任何一种都不是有效的语法。

假设您正在尝试定义一个多语句表值函数，它应该如下所示：

```
...
RETURNS @YourTableName TABLE( <column-definitions>... )
AS
... 
```

然后你的函数语句应该在它执行`RETURN`语句之前将函数返回数据放入该表中，它也没有这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T15:21:56.473

您的问题是您混合了多语句表值函数和内联表值函数的语法。有关每个和一些性能注意事项的示例，请查看我的帖子：http: [//sqlity.net/en/498/t-sql-tuesday-24-prox-n-funx/](http://sqlity.net/en/498/t-sql-tuesday-24-prox-n-funx/)

简而言之，如果你想在一个表值函数中使用多个语句，你必须在 RETURNS 关键字之后声明一个表变量，并在函数体中插入你想要返回的行。但是，这种类型的功能具有严重的性能影响，您应该尽量远离它。

除此之外，您的 BEGIN 和 END 似乎不匹配。正如 Barry 所说，“在这里稍微缩进会大有帮助”，可以帮助您和其他人更好地理解您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T15:26:37.497

你不能有；在 if 命令结束之前。空值检查也是错误的。例如；

```
if @uid <> null -- (1) note: should be if @uid is not null
Begin
    -- query
End;     --(2)-Note: this is wrong 
Else 
Begin
    --Query
End 
```

# javascript - NodeJS 中的 libxmljs 中的 RangeError

> ID：13902512
> 
> 赞同：1
> 
> 时间：2012-12-16T15:00:09.390
> 
> 标签：javascript, node.js, recursion, libxml-js

我正在尝试用 int 值替换冗长的 XML 标记。将 '' 示例为 '<1>'，因此整个 XML 文件中名称为 'child' 的每个标记都将替换为 '1'。为此，我在 NodeJS 中使用 libxmljs。到目前为止，我的代码是；

```
 var libxml = require('libxmljs');
var xml =  '<?xml version="1.0" encoding="UTF-8"?>' +
           '<root>' +
               '<child foo="bar">' +
                   '<grandchild baz="fizbuzz">grandchild content</grandchild>' +
               '</child>' +
               '<child foo="bar1">' +
                   '<grandchild baz="fizbuzz">grandchild content 1</grandchild>' +
               '</child>' +
               '<sibling>with content!</sibling>' +
           '</root>';

var xmlDoc = libxml.parseXml(xml);
var allxml = xmlDoc.root();  //store all nodes as allxml
var allNodes = xmlDoc.childNodes(); //all child nodes to array
rec(allxml);

function rec(anElement){
for (var j=0; j<allNodes.length;j++ )
    {
        var firstnode = allNodes[j].name(); //get tagname of the element

        var findelem = xmlDoc.find(firstnode); //find similar elements with the tagname to array
        var currChild = xmlDoc.child(j); //get current child element
        var currnode = xmlDoc.childNodes(); // child nodes of current element to array
        if (hasChild(currChild)) { // check whether this has child elements
                rec(currChild.childNodes()); //if yes recall this function
            }
        else{ replaceCurrentTag(findelem, j);} // if no child nodes replace the name
    }
}

function replaceCurrentTag(currelem, j){

for (var i=0;i<currelem.length;i++){
        currelem[i].name(j.toString());
    }
}

function hasChild(xmlElement){
var e = xmlElement.childNodes();
if (e.length > 0){ return true; }
else return false;
}

console.log(xmlDoc.toString()); 
```

但是当我在终端中运行它时出现此错误。

```
/home/compaq/node_modules/libxmljs/lib/document.js:0
(function (exports, require, module, __filename, __dirname) { var bindings = r
^
RangeError: Maximum call stack size exceeded 
```

我在这里做错了什么。

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:16:24.297

您的`rec`函数迭代`allNodes`，而不是节点的某个子集（可能是 的子节点`anElement`）。结合`rec`在调用之前再次递归`replaceCurrentTag`（永远不会被调用），您的函数将继续调用`rec`，直到您填满调用堆栈。

# c# - 删除性能计数器类别失败

> ID：13902516
> 
> 赞同：2
> 
> 时间：2012-12-16T15:00:23.197
> 
> 标签：c#, performancecounter, perfmon

我有这个简单的代码：

```
public void CreateCounters() {
    if (PerformanceCounterCategory.Exists(_categoryName)) {
        PerformanceCounterCategory.Delete(_categoryName);
    }

    // create logic…
} 
```

在我的机器上工作。我在我的服务器上运行它，得到以下堆栈跟踪：

```
System has detected a fatal error. EXITING... 
NativeErrorCode: 1010 
ErrorCode: -2147467259 
Message: The configuration registry key is invalid 
TargetSite: Void RegisterFiles(System.String, Boolean) 
HelpLink:  
Source: System 
Stack Trace: 
 at System.Diagnostics.PerformanceCounterLib.RegisterFiles(String arg0, Boolean unregister) 
 at System.Diagnostics.PerformanceCounterCategory.Delete(String categoryName) 
 at myApp.Common.Utils.PerformanceCounters.PerformanceCounters.CreateCounters() 
 at myApp.Common.Utils.PerformanceCounters.myAppPerformanceCounterReporter.Init() 
 at myApp.Common.Utils.PerformanceCounters.myAppPerformanceCounterReporter.get_Instance() 
 at myApp.Program.Main(String[] args) 
```

该类别存在于服务器上，我可以在`perfmon`GUI 中看到它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T09:21:52.683

好的，这是性能计数器机制中的一些错误，应通过以下脚本修复：

```
cd %systemroot%\system32
lodctr /R 
```

看看这个链接： http: [//geekswithblogs.net/robz/archive/2008/08/10/possible-performance-counter-corruption-or-performance-counters-are-just-disabled.aspx](http://geekswithblogs.net/robz/archive/2008/08/10/possible-performance-counter-corruption-or-performance-counters-are-just-disabled.aspx)

# jsf - Tomcat：请求的资源（）不可用

> ID：13902518
> 
> 赞同：1
> 
> 时间：2012-12-16T15:00:40.720
> 
> 标签：jsf, jsf-2, web-inf

我有 2 页：page1.xhtml、page2.xhtml。从第 1 页我转到第 2 页。在第 2 页我有：

```
<h:commandButton value="shuffle" action="#{bean.shuffle}" immediate="true"></h:commandButton> 
```

当我将页面放入 WEB-INF 并单击随机播放时出现错误：

```
 HTTP Status 404 - 

--------------------------------------------------------------------------------

type Status report

message 

description The requested resource () is not available.

--------------------------------------------------------------------------------

Apache Tomcat/7.0.14 
```

但是当我将 page2 放在 WebContent 中时，一切正常。我的 web.xml ：

```
 <servlet-mapping>
<servlet-name>Faces Servlet</servlet-name>
<url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

为什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:40:26.723

中的资源`/WEB-INF`不可公开访问。您需要将可公开访问的资源放在`/WEB-INF`. `/WEB-INF`应该只用于配置文件、模板文件、包含文件、标记文件等，这些文件根本不应该被*公开*访问。

### 也可以看看：

*   [我需要将哪些 XHTML 文件放入 /WEB-INF 而哪些不需要？](https://stackoverflow.com/questions/9031811/which-xhtml-files-do-i-need-to-put-in-web-inf-and-which-not)

# c# - 无法按价格对下拉列表进行排序

> ID：13902520
> 
> 赞同：2
> 
> 时间：2012-12-16T15:01:07.943
> 
> 标签：c#, asp.net, sqldatareader

我想按价格对下拉列表进行排序，但它不起作用。我有如下错误：

> '=' 附近的语法不正确。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Data.SqlClient.SqlException：“=”附近的语法不正确。源错误：第 72 行：reader = cmd.ExecuteReader();

这是我的代码

**新来港定居人士.aspx.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.SqlClient;
using System.Configuration;

public partial class NewArrivals : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    { 
        if(IsPostBack)
        {
            bindDropDownList();
        }
    }
    protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        bindDropDownList();
    }
    public void bindDropDownList()
    {
        DropDownList1.DataTextField = "price";
        DropDownList1.DataSource = getReader();
        DropDownList1.DataBind();

        DropDownList1.Items.Insert(0, new ListItem("-Select-"));
        DropDownList1.Items.Insert(1, new ListItem("Price - Highest to Lowest"));
        DropDownList1.Items.Insert(2, new ListItem("Price - Lowest to Highest"));

    }
    public SqlDataReader getReader()
{
    SqlDataReader reader = null;
    DataTable DataList1 = new DataTable();

    if(DropDownList1.Text == "-Select-")
    {
        SqlConnection myConnect = new SqlConnection();
        myConnect.ConnectionString = ConfigurationManager.ConnectionStrings["ProductCS"].ConnectionString;

        string strCommandText ="SELECT * FROM [tb_ListPdts] WHERE newPdt=1";

        SqlCommand cmd = new SqlCommand(strCommandText, myConnect);

        cmd.CommandText = strCommandText;
        cmd.Connection = myConnect;

        myConnect.Open();
        reader = cmd.ExecuteReader();
        DataList1.Load(reader);
        myConnect.Dispose();
        cmd.Dispose();

    }
    else if (DropDownList1.SelectedValue == "Price - Highest to Lowest")
    {
        SqlConnection myConnect = new SqlConnection();
        myConnect.ConnectionString = ConfigurationManager.ConnectionStrings["ProductCS"].ConnectionString;

        string strCommandText = "SELECT [image], [productName], [price], [newPdt] FROM [tb_ListPdts] WHERE newPdt==1 ORDER BY price desc";

        SqlCommand cmd = new SqlCommand(strCommandText, myConnect);

        cmd.CommandText = strCommandText;
        cmd.Connection = myConnect;

        myConnect.Open();
        reader = cmd.ExecuteReader();
        DataList1.Load(reader);
        myConnect.Dispose();
        cmd.Dispose();

    }

    else if (DropDownList1.DataTextField == "Price - Lowest to Highest")
    {
        SqlConnection myConnect = new SqlConnection();
        myConnect.ConnectionString = ConfigurationManager.ConnectionStrings["ProductCS"].ConnectionString;

        string strCommandText = "SELECT [image], [productName], [price], [newPdt] FROM [tb_ListPdts] WHERE newPdt==1 ORDER BY price asc";

        SqlCommand cmd = new SqlCommand(strCommandText, myConnect);

        cmd.CommandText = strCommandText;
        cmd.Connection = myConnect;

        myConnect.Open();
        reader = cmd.ExecuteReader();
        DataList1.Load(reader);
        myConnect.Dispose();
        cmd.Dispose();

    }
    return reader;
}
} 
```

**新品上市.aspx**

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true" CodeFile="NewArrivals.aspx.cs" Inherits="NewArrivals" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
    <style type="text/css">
        .style2
        {
            width: 80%;
        }
    </style>
    </asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
    <p id="product">New Products</p>
            <hr />

    <br />

    <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True" AppendDataBoundItems="true"
        onselectedindexchanged="DropDownList1_SelectedIndexChanged" >
        <asp:ListItem>-Select-</asp:ListItem>
            <asp:ListItem>Price - Highest to Lowest</asp:ListItem>
            <asp:ListItem>Price - Lowest to Highest</asp:ListItem>
    </asp:DropDownList>
    <br />

    <br />
    <table class="style2" id="newTable" rules="groups">
        <tr>
            <td>
                &nbsp;</td>
        </tr>
        <tr>
            <td>
                <asp:DataList ID="DataList1" runat="server" BackColor="#DEBA84" 
                    BorderColor="#DEBA84" BorderStyle="None" BorderWidth="1px" CellPadding="3" 
                    CellSpacing="2" GridLines="Both" 
                    RepeatColumns="3" RepeatDirection="Horizontal">
                    <FooterStyle BackColor="#F7DFB5" ForeColor="#8C4510" />
                    <HeaderStyle BackColor="#A55129" Font-Bold="True" ForeColor="White" />
                    <ItemStyle BackColor="#FFF7E7" ForeColor="#8C4510" />
                    <ItemTemplate>
                        <asp:Image ID="Image1" ImageUrl= '<%# Eval("image") %>'
                            runat="server" Height="180px" Width="230px" />
                        <br />
                        <asp:Label ID="productNameLabel" runat="server" 
                            Text='<%# Eval("productName") %>' />
                        <br />
                        Price: $
                        <asp:Label ID="priceLabel" runat="server" Text='<%# Eval("price") %>' />
                        <br />
                        <asp:Label ID="newPdtLabel" runat="server" Text='<%# Eval("newPdt") %>' Visible="False" />
                        <br />
                        <br />
                    </ItemTemplate>
                    <SelectedItemStyle BackColor="#738A9C" Font-Bold="True" ForeColor="White" />
                </asp:DataList>
            </td>
        </tr>
    </table>
    </asp:Content> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T15:15:28.967

您的选择语句是错误的。您在 where 子句中使用相等比较器`==`。SQL Server T-SQL 不使用 C 样式的等于，而是使用单个`=`运算符。

更新此声明

```
FROM [tb_ListPdts] WHERE newPdt==1 ORDER BY price asc 
```

使用单个`=`运算符，如下所示：

```
FROM [tb_ListPdts] WHERE newPdt=1 ORDER BY price asc 
```

# javascript - 我怎样才能在拉斐尔画印度卢比符号

> ID：13902524
> 
> 赞同：0
> 
> 时间：2012-12-16T15:01:28.577
> 
> 标签：javascript, raphael

**有人知道如何使用拉斐尔绘制印度卢比符号吗？**

请给我一个有用的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T17:22:50.260

检查这个[小提琴](http://jsfiddle.net/4cJdM/)

```
var rupee = paper.path("M152.511,23.119h41.031L209.256-0.5H55.214L39.5,23.119h26.739c27.086,0,52.084,2.092,62.081,24.743H55.214 L39.5,71.482h91.769c-0.002,0.053-0.002,0.102-0.002,0.155c0,16.974-14.106,43.01-60.685,43.01l-22.537-0.026l0.025,22.068 L138.329,249.5h40.195l-93.42-116.709c38.456-2.074,74.523-23.563,79.722-61.309h28.716l15.714-23.62h-44.84 C162.606,38.761,158.674,29.958,152.511,23.119z").attr({fill:'black',stroke:'none'}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T16:03:17.317

转到 Adob​​e Illustrator 绘制您想要的任何符号/路径，导出为 SVG，在文本编辑器中打开，将路径复制/粘贴到您的 Raphael 代码中，使用它

# highcharts - 让 Highcharts 在 IE 7 和 8 中呈现

> ID：13902527
> 
> 赞同：1
> 
> 时间：2012-12-16T15:02:35.627
> 
> 标签：highcharts

我知道 highcharts 适用于 IE 7 和 8，但不断出现错误。

在控制台中，第 4287 行失败：elemStyle = element.style

[http://jsfiddle.net/petercasanova/BM2Zz/](http://jsfiddle.net/petercasanova/BM2Zz/)

```
$(function () {
  $(document).ready(function() {
    var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container'
        },
        series: [{
            data: [ 1, 2, 3, 4, 5, 6 ] 
        }] 
    });
  });
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:23:00.940

它在 IE 7 和 IE 8 上运行良好，这可能是浏览器缓存的问题。请清除缓存并重新检查。

# youtube - YouTube API - 直接。有没有办法将嵌入代码的可访问性限制为仅限某些用户？

> ID：13902543
> 
> 赞同：0
> 
> 时间：2012-12-16T15:04:24.313
> 
> 标签：youtube, youtube-api

利用 YouTube Direct，用户可以将视频直接上传到我的网站以供批准。

1) 所有批准的视频将在网站上以某种形式的画廊显示。

2) 所有注册用户都可以查看画廊。

**我的问题：**

> 有没有办法限制或限制对我网站上这些播放列表/图库视频的实际嵌入代码的访问？
> 
> 我们想让所有用户都可以观看网站上的所有视频，但是（商业用户 - 想要在自己的网站上嵌入视频）他们必须首先拥有我们公司提供的访问权限。

基本形式。如果企业用户想要使用/嵌入通过我们的网站生成的一段视频内容以在该公司自己的网站上使用 - 他们必须是付费订阅者。

> 因此，有没有办法限制某些用户访问嵌入代码？

感谢任何帮助。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:17:17.377

YouTube 视频可以是公开的、不公开的或私人的。一般 YouTube 帮助中心有[关于私人和不公开视频的讨论。](http://support.google.com/youtube/bin/answer.py?hl=en&answer=157177)

API 中没有任何具体内容可让您访问 YouTube 支持之外的其他选项。

# iphone - 是否有适用于 iOS 的完全可定制的类似 UIPickerView 的开源组件？

> ID：13902547
> 
> 赞同：0
> 
> 时间：2012-12-16T15:05:02.563
> 
> 标签：iphone, ios, ipad, uipickerview

我需要自定义 UIPickerView 的外观，但据我所知这是不可能的。在重新发明轮子之前......是否有 UIPickerView 的开源复制品，它允许为选择器本身使用自定义 UI 图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T22:05:28.657

我想说自定义 UIPickerView 的外观非常容易。您需要做的就是将 gfx 布局在选择器上，以便您的 gfx 将覆盖原始 gfx。

# sql - 如何在 PostgreSQL 中列出外部表？

> ID：13902548
> 
> 赞同：11
> 
> 时间：2012-12-16T15:05:12.217
> 
> 标签：sql, database, postgresql

在 PostgreSQL 中，运行 \d 命令将列出表及其表类型。目前我正在尝试列出我使用外部数据包装器创建的所有外部表。列出这些表的查询是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2018-10-09T09:44:56.440

仅列出外部表的查询：

```
select * from information_schema.foreign_tables 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-16T15:22:05.977

按照说明书`\dE[S+]`应该做的。

[http://www.postgresql.org/docs/current/static/app-psql.html](http://www.postgresql.org/docs/current/static/app-psql.html)

要查看其背后的查询，请使用`-e`("echo queries") 选项启动 psql。

或使用`information_schema.tables`视图：[http ://www.postgresql.org/docs/current/static/infoschema-tables.html](http://www.postgresql.org/docs/current/static/infoschema-tables.html)

该`table_type`列将包含`FOREIGN TABLE`这些表。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-01-28T10:15:57.710

你也可以使用这个命令：

```
\detr 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-25T08:12:35.887

```
SELECT tc.table_name , ctu.table_name  
FROM information_schema.table_constraints tc  
inner join information_schema.constraint_table_usage ctu on ctu.constraint_name = tc.constraint_name  
where constraint_type = 'FOREIGN KEY' 
```

# android - Android：发布 APK 草案和应用内计费测试 - 如何？

> ID：13902554
> 
> 赞同：2
> 
> 时间：2012-12-16T15:05:37.333
> 
> 标签：android, in-app-billing, apk

Google 的文档指出，您应该上传一个“草稿”APK 并将您的应用内产品添加到其中 - 然后您将能够使用您的开发人员和其他链接的“测试”帐户进行测试 - 这就是它所说的......

它还说您需要使用“新的”开发者控制台为 v3 的计费 API 添加产品 - 但使用新控制台上传 APK 会立即发布它！！！- WTG 那里谷歌！！！！

您也不能取消发布 APK/恢复到较早的版本 - “实时”版本现在是测试版本 - 当心这种胡说八道！

因此，您重新上传旧版本以解决该问题，然后尝试弄清楚如何上传“草稿”APK。切换到旧控制台，您可以上传而不是“激活”APK - 但是这不会被标记为“草稿”，所以我不确定这就是他们的意思！？

您可以将您的应用内产品添加到其中，但在设备上运行该 APK/尝试购买任何东西时，会出现一条消息，提示“此应用程序的当前版本未配置为应用内计费”...

在这一点上，您意识到您正在与一家公司绕圈子，该公司的文档是很多废话，所以您求助于这个地方寻求帮助！- 请？:)

一定有人设法让这个工作 - 他们是否愿意分享将新 APK 上传为“草稿”的确切步骤，以及可以实际购买的应用内产品（用于测试目的）？

我现在要在 Google 论坛上发誓了 :)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T15:46:52.623

1）获取任何版本的代码并为其添加以下权限：

```
<uses-permission android:name="com.android.vending.BILLING" /> 
```

在这个 apk 中，其余的计费实现是完全可选的。

2) 导出它并使用您的签名证书对 apk 进行签名，并确保您增加了版本代码。

3) 使用旧版开发者控制台将 apk 上传到 Google Play，但不要*激活*它。

你完成了。您现在应该可以添加应用产品了。您现在可以将其余的计费代码添加到您的应用程序中，并像往常一样在设备上进行调试，并在在线界面中创建产品。您创建的任何产品可能需要几个小时（最多 24 个）才能在您的应用中访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T04:06:47.867

整个事情相当混乱，但是在新控制台中上传 APK 并不会立即发布，至少对于新应用程序而言不会。它应该进入“准备发布”状态，并且在您更改为“发布此应用程序”之前不会上线（这本身就是令人困惑的，因为“状态”之一是状态，而另一个是“动作” ）。

# android - 无法将在 windows eclipse 中创建的项目导入山狮 eclipse

> ID：13902555
> 
> 赞同：0
> 
> 时间：2012-12-16T15:05:38.163
> 
> 标签：android, eclipse, osx-mountain-lion

我尝试将在 windows 7 上设置的 eclipse 备份的 android 项目导入到 mac mountain lion elipse，但是当项目已存在于项目资源管理器中时，该项目被禁用。但是我以前从未导入过这个项目。

我使用文件然后导入然后按照通常的项目导入方法。

有人遇到同样的问题吗？请帮助它成为一个奇怪的缺点，因为我有超过 7 个项目要导入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:12:05.597

1.  尝试创建另一个工作区

2.  尝试按照以下步骤导入您的项目文件夹：

    文件>>新建>>项目>>安卓>>来自现有代码的安卓项目

# xcode - 改变 pushViewController 动画方向

> ID：13902560
> 
> 赞同：1
> 
> 时间：2012-12-16T15:06:31.290
> 
> 标签：xcode, animation, uinavigationcontroller, pushviewcontroller

我读了很多关于伪造 pushViewController 动画的文章，但我想知道是否有办法改变实际动画，因为我想使用导航控制器的导航栏和后退按钮。目前我正在使用它来制作动画：

```
- (void)viewWillDisappear:(BOOL)animated {
[super viewWillDisappear:YES];
[views setContentSize:CGSizeMake(self.view.bounds.size.width, self.view.bounds.size.height -40)];
CGRect frame = views.frame;
frame.origin.y = - self.view.bounds.size.height;
[UIView beginAnimations:@"viewSlideUp" context:nil];
[UIView setAnimationCurve: UIViewAnimationCurveEaseInOut];
[UIView setAnimationDuration:0.75];
[UIView setAnimationDelegate:self];
views.frame = frame;
[UIView commitAnimations];
} 
```

但是我得到了重叠的效果，所以我的视图没有向上滑动，视图正在滑到左上角。

有没有人处理过这个问题？感谢任何帮助！

# javascript - codeigniter 中的灯箱插件

> ID：13902561
> 
> 赞同：0
> 
> 时间：2012-12-16T15:06:31.907
> 
> 标签：javascript, jquery, codeigniter, lightbox

我正在尝试这个东西 2 天，但我不明白这里的错误是什么。我尝试在我的 codeigniter 项目中使用灯箱插件，但它没有显示预期的结果，而是它也没有显示任何错误。

这是我包含必要文件的地方：

```
<link href="<?php echo base_url(); ?>assets/css/core.css" media="screen" rel="stylesheet" type="text/css" />  
<link rel="stylesheet" type="text/css" href="<?php echo base_url(); ?>assets/css/jquery.lightbox-0.5.css" media="screen" />
<script type="text/javascript" src="<?php echo base_url(); ?>assets/js/jquery.js"></script>
<script type="text/javascript" src="<?php echo base_url(); ?>assets/js/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="<?php echo base_url(); ?>assets/js/manual_change.js"></script>  
<script type="text/javascript" src="<?php echo base_url(); ?>assets/js/pre_change.js"></script>  
<script type="text/javascript" src="<?php echo base_url(); ?>assets/js/core.js"></script>
<script type="text/javascript" src="<?php echo base_url(); ?>assets/js/jquery.lightbox-0.5.js"></script> 
```

我还包括灯箱的功能：

```
$(function() {
$('a.lightbox').lightBox({
     'imageLoading': "<?php echo base_url(); ?>assets/img/lightbox-ico-loading.gif",
     'imageBtnClose': "<?php echo base_url(); ?>assets/img/lightbox-btn-close.gif",
     'imageBtnPrev': "<?php echo base_url(); ?>assets/img/lightbox-btn-prev.gif",
     'imageBtnNext': "<?php echo base_url(); ?>assets/img/lightbox-btn-next.gif",
     'imageBlank': "<?php echo base_url(); ?>assets/img/lightbox-blank.gif"
  }); // Select all links with lightbox class
}); 
```

我在 html 中使用了图像，如下所示：

```
<a href="<?php echo base_url(); ?>assets/img/products/Acer_AX1400.jpg" class="lightbox"><img src="<?php echo base_url(); ?>assets/img/products/Acer_AX1400.jpg" alt="" /></a> 
```

.htaccess 文件是：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|jquery\.js\robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

我的文件位置是正确的：
所有要显示的图像都在：
**assets/img/products/**
灯箱的所有附加图像都在：
**assets/img/**
所有 Javascript 都在：
**assets/js/**
所有 CSS 都在：
**assets/css/**

页面链接一开始是：localhost/shop/ ![在此处输入图像描述](../Images/2b322a4c0aa736096e8ae18cb405ead7.png)
点击图片后的页面是：localhost/shop/assets/img/products/Acer_AX1400.jpg ![在此处输入图像描述](../Images/894d60263eb6ede4791eac73da87b45d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T00:49:22.900

您在`lightbox`加载任何元素之前调用该函数，因此基本上它们都没有绑定事件侦听器。

为了克服这个问题，要么使用[`$(document).ready()`](http://api.jquery.com/ready/)函数，要么在文件末尾加载当前函数，在所有`lightbox`锚点都加载到 DOM 之后。

# javascript - Nivo Slider Thumbnail / ControlNav 未定位在滑块内

> ID：13902566
> 
> 赞同：0
> 
> 时间：2012-12-16T15:07:21.767
> 
> 标签：javascript, jquery, html, css, nivo-slider

这是我第一次尝试 Nivo Slider，所以请耐心等待——

我正在尝试将我的 controlNav 缩略图定位**在**滑块内（我希望它在中心，距离滑块底部 15px），但到目前为止使用**position:absolute**和**left**和**top**属性只是使缩略图位置的整个定位围绕身体而不是滑块。

难道我做错了什么？我正在网上寻找解决方案，但我找不到任何解决方案。也许我正在搜索错误的关键字？

我正在测试它的网站是[链接已删除]。我已将缩略图重置为位于滑块下方居中的原始布局，如果您想在控制台内摆弄它会更容易。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T15:18:54.203

如果当您说“缩略图”时，您的意思是小寻呼机图标，那么您可以将 css 更改为：

```
#front-showcase .nivo-controlNav {
z-index: 10;
position: relative;
bottom: 40px;
} 
```

在这里，我删除了 display:block ，您可以将 40px 调整为适合您的布局需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T15:10:58.433

在您的 CSS 中，将`position`ing 属性设置为 on`.nivo-control`而不是`nivo-controlNAV`.

通过添加到您的以下内容，这对我有用`<head>`：

```
<style type="text/css">
    .nivo-control {
        position:relative;
        top:-45px;
    }
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T15:39:29.980

啊，看起来我在@aditya 和@mToce 的答案的帮助下找到了答案。

似乎我忘记了将 #front-showcase 定位为相对元素，从而使 controlNav 使用 body 元素而不是滑块元素定位自身。

有关更多信息，请阅读以下内容：

[http://css-tricks.com/absolute-positioning-inside-relative-positioning/](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)

我通过输入 position:relative; 解决了这个问题。在我的#front-showcase 中，输入位置：绝对；在 .controlNav 内。

希望这可以帮助！

# haskell - 什么是“模棱两可”，我该如何解决？

> ID：13902569
> 
> 赞同：-4
> 
> 时间：2012-12-16T15:07:25.057
> 
> 标签：haskell, import, variable-names

我被告知要编写一个函数来检查字符串中的标点符号是否都是空格。IE：

```
haskell> f "Hello my name is Brad"
True

haskell> f "Hello my name is Brad!"
False 
```

我写了一个辅助函数如下，

```
import Data.Char
isPunc x = not (isDigit x || isAlpha x) 
```

这被 Haskell 接受并且工作正常。但是一旦我在以下功能中使用它，

```
--function f defined
f :: String -> Bool
f xs = and [ x == ' ' | x <- xs, isPunc x] 
```

它给了我这个错误：

```
ambiguous occurence 'isPunc', could mean "Main.isPunc" or "Data.Char. isPunc" 
```

我得到了它抱怨的部分内容，但是导入了 Data.Char，我真的不明白它为什么抱怨。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T15:17:46.537

（这篇文章是在假设你真正命名你的函数的情况下写的`isPunctuation`，而不是`isPunc`）

这是模棱两可的`isPunctuation`，因为 Haskell 不知道您在调用. 它是模棱两可的*，因为*您导入了 - 如果您没有导入它或者您导入它是合格的，那么就没有歧义，只能指.`Main.isPunctuation``Data.Char``isPunctuation``isPunctuation`*`Data.Char``isPunctuation``Main.isPunctuation`*

 *要解决歧义，要么不导入`isPunctuation`（`Data.Char`通过将导入行更改为`import Data.Char hiding (isPunctuation)`），导入`Data.Char`限定的（因此您必须将其函数称为`Data.Char.functionName`而不是仅`functionName`），或者为您的函数指定一个不与冲突的名称任何来自`Data.Char`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T16:26:08.403

`Data.Char`模块有一个名为 的函数`isPunctuation`。你得到你提到的错误的唯一方法是如果你已经命名了你正在创建的函数。您在这里给出的名称是`isPunc`，这应该很好，但我认为您实际上使用`isPunctuation.`了使用不同的名称或使用限定导入：

```
import qualified Data.Char as Char 
```*

# android - 在 Eclipse 中看不到 Lint 窗口

> ID：13902571
> 
> 赞同：0
> 
> 时间：2012-12-16T15:08:09.570
> 
> 标签：android, eclipse, lint

菜鸟问题...我刚刚安装了 Eclipse Classic 4.2.1、Java 和 ADT。我创建了我的第一个项目并运行了 Lint，它在 Layout Editor 窗口中显示了一些带有感叹号的警告。问题是没有显示 Lint 窗口，所以我无法访问“快速修复”选项。右键单击每个感叹号不会显示任何与 Lint 相关的选项。我有 Lint 工具栏图标，但它只提供检查代码和清除 Lint 警告的选项。我试过“检查更新”，以防我丢失了一个组件，但没有找到更新。

任何想法重新。如何显示 Lint 窗口并访问快速修复功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:14:18.700

窗口 -> 显示视图 -> 其他 -> Android -> Lint 警告

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T12:11:30.687

以防万一有人仍然遇到此问题：

除非您打开添加 lint 的窗口，否则 Eclipse 不会显示 Lint 警告视图。

此窗口还包含控制台、问题、任务视图。

获取视图的最简单方法是首先打开“调试”透视图，然后执行以下操作：

窗口 -> 显示视图 -> 其他 -> Android -> Lint 警告

lint 警告视图将添加为问题、任务等旁边的选项卡。

# php - Timthumb 上的 500 错误

> ID：13902573
> 
> 赞同：1
> 
> 时间：2012-12-16T15:08:32.863
> 
> 标签：php, timthumb

这是上传的图片：http: [//propppedupcreations.com/uploads/portfolio/fullsize/p036.jpg](http://proppedupcreations.com/uploads/portfolio/fullsize/p036.jpg)

您可以在此处查看图库中的图像；左上角：[http ://www.proppedupcreations.com/index.php?page=portfolio&categorylink=photoshoot](http://www.proppedupcreations.com/index.php?page=portfolio&categorylink=photoshoot)

在图库中单击它时出现此错误：**无法加载图像。确保路径正确且图像存在。**这只发生在少数几个没有明显原因的选择上（有过吗？）。缩略图显示正常，但查看较大版本失败。

这是通过 timthumb 直接链接到它时的相同图像，它显示 500 错误并显示额外的零：[http ://propppedupcreations.com/timthumb.php?src=/uploads/portfolio/fullsize/p036.jpg&w=800&zc =1&q=90](http://proppedupcreations.com/timthumb.php?src=/uploads/portfolio/fullsize/p036.jpg&w=800&zc=1&q=90)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:39:22.407

如您所述，此链接失败：

[http://propppedupcreations.com/timthumb.php?src=/uploads/portfolio/fullsize/p036.jpg&w=800&zc=1&q=90](http://proppedupcreations.com/timthumb.php?src=/uploads/portfolio/fullsize/p036.jpg&w=800&zc=1&q=90)

然后我所做的就是改变大小，它工作正常：

[http://propppedupcreations.com/timthumb.php?src=/uploads/portfolio/fullsize/p036.jpg&w=626&zc=1&q=90](http://proppedupcreations.com/timthumb.php?src=/uploads/portfolio/fullsize/p036.jpg&w=626&zc=1&q=90)

626px 宽是我在抛出 500 错误之前可以做到的最大宽度。这很奇怪，因为 TimThumb 的尺寸问题通常与正在处理的图像有关，而不是与生成的图像有关（即 URL 中的任何宽度尺寸都会失败）。

TimThumb 唯一的另一个常见问题是您的 /cache/ 目录权限不是 777 或 755。可能之前权限正常并且缓存了一些图像，现在权限错误。也许 p036.jpg 有一个足够大的缓存图像来创建一个 626px 宽的图像，但如果更大，它会尝试再次使用实际图像并创建一个新的缓存图像但无法写入它。您的 /cache/ 文件夹的权限是什么？

只是在这里吐痰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T10:31:02.920

这对我有用：

1.  检查以确保文件权限设置为 700（仅限所有者读取、写入和执行）。
2.  检查目录（文件夹）权限。将其设置为 777 会给您一个 500 – 内部服务器错误。将其设置为 711。

# android - ImageView 未在 ListView Android 4.0 中显示

> ID：13902574
> 
> 赞同：2
> 
> 时间：2012-12-16T15:08:42.317
> 
> 标签：android, listview, url, imageview

我正在尝试显示 Twitter 列表中的个人资料图片。我有一个与异步任务一起使用的列表视图。我的 ImageView 是在 URL 的可绘制对象中动态完成的。它似乎在 2.3.3 上工作正常，但图像没有在 4.0 上显示。我 ImageView 必须在 4.0 上工作。我很困惑。这是我的适配器：

```
 Tweet o = tweets.get(position);
               Drawable drawable = LoadImageFromUrl.LoadImageFromWebOperations(o.profile_image_url);
               image.setImageDrawable(drawable); 
```

将 URL 转换为 drawable 的方法是这样的：

```
public static Drawable LoadImageFromWebOperations(String url) {
        try {
            Log.i("URL", url);
            InputStream is = (InputStream) new URL(url).getContent();
            Drawable d = Drawable.createFromStream(is, "src name");
            return d;
        } catch (Exception e) {
            return null;
        }
    } 
```

我的列表项（推文）的 xml 布局在这里：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical"
android:padding="8dip" xmlns:android="http://schemas.android.com/apk/res/android">

 <ImageView
    android:id="@+id/profile_image"
     android:layout_width="48dip"
    android:layout_height="48dip"
    android:layout_gravity="top|left"
    android:layout_margin="6dip"
    android:contentDescription="Profile Image"
    android:src="@drawable/ic_launcher"/>

<!-- Name -->
<TextView
    android:id="@+id/name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/profile_image"
    android:paddingBottom="1dip"
    android:textColor="#0598DD"
    android:textSize="14dip"
    android:textStyle="bold" />

<!-- Screen name -->   
<TextView
    android:id="@+id/screen_name"
    android:layout_below="@id/profile_image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@+id/name"
    android:paddingBottom="1dip"
    android:textColor="#ffffff"
    android:textSize="14dip"
    android:textStyle="italic" />

 <!-- Tweet -->
<TextView
    android:id="@+id/text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/name"
    android:paddingBottom="1dip"
    android:textColor="#ffffff"
    android:textSize="16dip"
    android:textStyle="bold" />

<!-- date -->

<TextView
    android:id="@+id/time_stamp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/text"
    android:paddingBottom="3dip"
    android:textColor="#0598DD"
    android:textSize="14dip"
    android:textStyle="italic" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T19:15:11.780

没有人回应。我通过使用 UrlImageViewHelper 解决了这个问题：

```
UrlImageViewHelper.setUrlDrawable(image, o.profile_image_url); 
```

# django - Django 预加载模板

> ID：13902575
> 
> 赞同：1
> 
> 时间：2012-12-16T15:08:46.437
> 
> 标签：django, templates, preload

似乎 Django（即使使用*DEBUG=False*和*TEMPLATE_DEBUG=False*）在请求之间从本地磁盘重新加载 HTML 模板文件。如何让它在应用程序启动时预加载所有模板文件，并且从不尝试重新加载它们（除非我重新启动服务器进程）？

**更新：**我在[http://www.jongales.com/blog/2012/02/16/make-django-keep-templates-in-memory/上找到了](http://www.jongales.com/blog/2012/02/16/make-django-keep-templates-in-memory/)*django.template.loaders.cached.Loader*。我现在需要的是在启动时预加载所有模板。

# php - 以秒为单位获取两个 MYSQL 日期时间列之间的差异

> ID：13902579
> 
> 赞同：0
> 
> 时间：2012-12-16T15:09:19.510
> 
> 标签：php, mysql, database, datetime

> **可能重复：**
> [MYSQL - 日期时间到秒](https://stackoverflow.com/questions/2438828/mysql-datetime-to-seconds)

如果我在 mysql 表中有一个 datetime 列，我如何才能以秒为单位获得 NOW() 和该列之间的差异？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T15:14:10.760

`TIMEDIFF`你可以在几秒钟内得到差异

```
 SELECT TIME_TO_SEC(TIMEDIFF('2007-01-09 10:24:46','2007-01-09 10:23:46')); 
```

或这个

```
SELECT DATEDIFF('2007-12-31 10:02:00','2007-12-30 12:01:01') * 24*60*60;
// result: 86400 the difference in seconds for days. 
```

或者：

```
 SELECT TIMESTAMPDIFF(SECOND,'2007-12-30 12:01:01','2007-12-31 10:02:00'); 
 // result: 79259  the difference in seconds with the time. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:10:26.347

试试这个： SELECT NOW() - my_col AS my_diff

# php - 加盐密码，特别是关于数据库和检索密码

> ID：13902580
> 
> 赞同：1
> 
> 时间：2012-12-16T15:09:22.037
> 
> 标签：php, mysql, passwords, password-encryption

我想创建一个会员网站，所以我想让密码尽可能安全。我可以从包括这个网站在内的阅读网站中看到，md5、sh1 加密是一个严重的不，不。我见过一些其他的东西，比如 bcript、scrypt、sha256、sha512 和 PBKDF2。我发现了一些实现这些的 php 脚本，但并没有真正找到与数据库有关的任何注意事项。

我必须创建一个包含盐的行吗？

验证密码我必须做类似哈希（盐+密码）= $哈希之类的事情吗？

因为我不是最有经验的密码我不太确定最佳实践，当你散列密码+盐时会发生什么，如何检索密码......

我想因为我真的不明白它背后的逻辑，所以我对如何去做感到有点困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T15:12:51.937

如果您使用 Bcrypt、Scrypt 或 PBKDF2，salt 是您获得的哈希的一部分，所以不，您不必担心单独存储它。否则（SHA-*），是的——**但**无论如何你都不应该使用这些。Bcrypt、Scrypt 和 PBKDF2 是实际的密码散列函数。

我推荐 Bcrypt，因为你标记了这个[php](/questions/tagged/php "显示标记为“php”的问题")。它是内置的。Scrypt 不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T15:18:41.777

一个常见的最佳实践（参见例如 Linux passwd）是将密码哈希存储为

```
$<algorithm>$<salt>$<hash> 
```

例如这个字符串：

```
$6$Lxgyf7h6DtkrqwT$0w/BoB6neYjEtdQdUEs3ftnnNguBNTug8.g/9UeMmZ9bN/cDJCE0dj8.4D/8HPN5bMqFPJ4ECnGl5M2iqBmmv/ 
```

是一个加盐的 SHA-512（算法 id `6`）密码哈希`Lxgyf7h6DtkrqwT`，大多数服务器都应该理解它。

这样做的好处是您实际上可以同时支持不同的算法。因此，一些用户可能仍然拥有例如 SHA-256 密码，而对于任何更改其密码的用户，您需要切换到更安全的算法。

阅读有关模块化散列方案的一个很好的起点，请阅读 Wikipedia 中有关[crypt (Unix)](https://en.wikipedia.org/wiki/Crypt_%28Unix%29)函数的这篇文章。周围的炒作`bcrypt`（以及`crypt`等同于 DES 散列的错误信息）表明 PHP 开发人员在密码安全方面有些天真。bcrypt 还不错（嗯，它依赖于计算复杂性而不是更强大的算法 AFAIK，但它似乎确实击败了 MD5）。但是我建议使用类似这种方案的东西，它是 A) 可移植的和 B) 可扩展的，这样您就可以随时顺利过渡到更强的密码哈希。

在 99% 的编程语言（包括 PHP）中，此功能可通过该函数开箱即用`crypt`，方法是选择适当的 salt，以 salt 字符开头`$6$`和适当的长度。

并清理**bcrypt 倡导者系统传播的一些错误信息**：这不仅仅是使用*一轮*sha-512，而是使用默认值（参见[http://www.akkadia.org/drepper/sha-crypt.html](http://www.akkadia.org/drepper/sha-crypt.html)）是**5000 轮 SHA-512**。并且您可以选择增加数量。因此，据我了解，“但 bcrypt 可以在需要时扩大规模”的说法也适用于 crypt-SHA512。*与*bcrypt 相比，这应该可以在任何*使用*glibc 2.7 及更高版本的 Linux 系统上使用。bcrypt 是仅在*某些*发行版或*某些*扩展上可用的扩展。在 Debian 和可能的 Ubuntu 上，您显然需要安装扩展

> libpam-unix2 - 支持 Blowfish 的 PAM 模块

# c++ - 评估重复单词出现的程序

> ID：13902585
> 
> 赞同：0
> 
> 时间：2012-12-16T15:10:07.160
> 
> 标签：c++

```
#include <iostream>
#include <vector>
#include <cstring>
#include <fstream>
#include <string>
#include <cmath>
using namespace std;
vector<string> Letter;
float frequency1(string word)
{
   float count=0.0;
   for (int i=0;i<Letter.size();++i)
   {
      transform(word.begin(),word.end(),word.begin(),::tolower);
      transform(Letter[i].begin(),Letter[i].end(),Letter[i].begin(),::tolower);   

      if (strcmp(word.c_str(),Letter[i].c_str())==0)
      {
          count+=1;
      }   
  }
  count=(count/Letter.size())*100;
  if (count>=0.5)
  {
         return count;
  }
  else
  {
      return 0.0;
  }
}                                       

int main()
{
    ifstream fin;
    fin.open("frequent.txt");
    if (fin.fail())
    {
        cout<<"Error opening file!"<<endl;
    }

    while(!fin.eof()) 
    {
        string buffer;              
        getline(fin,buffer,' ');
        cout<<buffer<<endl;
        Letter.push_back(buffer);
    }
    cout<<endl;
    vector<string> frequent;
    vector<float> frequency;
    for (int i=0;i<Letter.size();++i)
    {
        string a=Letter[i];
        int k=0;
        for (int j=0;j<i;++j)
        {
            transform(a.begin(),a.end(),a.begin(),::tolower);
            transform(Letter[j].begin(),Letter[j].end(),Letter[j].begin(),::tolower);
            if (a==Letter[j])
            {
                 break;
            }
            k++;
        }
        int size=Letter.size();
        if (k!=size-1)
        {
            continue;
        }            
        float counter=frequency1(a);
        if(counter>0.0)
        {
            frequent.push_back(Letter[i]);
            frequency.push_back(counter);
        }
    }
    cout<<"Here are the repeated words"<<endl;
    for (int i=0;i<frequency.size();++i)
    {
        cout<<"       "<<frequent[i]<<", frequency: "<<frequency[i]<<endl;
    }
    system("PAUSE");
    return 0;
} 
```

我正在编写一个程序来确定文档（文本）中重复单词的频率。如果频率大于或等于 0.5，则该词作为重复词通过。但是当我运行它时，它没有显示任何重复的单词，尽管我什至手动计算并且知道文档中有重复的单词。我无法弄清楚问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:04:13.563

首先，当您无法打开输入文件时，您应该`exit`或将其余部分包装到 else 中`main`

```
if (fin.fail())
{
    cout<<"Error opening file!"<<endl;
} 
```

否则，您将继续尝试从无效流中读取。

[`std::getline`](http://www.cplusplus.com/reference/string/getline/)你用空格`' '`作为分隔符来阅读你的单词。这意味着，您的文字中包含 newlines `'\n'`、 tabs`'\t'`等，这可能不是您想要的。一种更好、更安全的阅读文字的方法是

```
std::string word;
while (fin >> word) {
    // process word
} 
```

这会跳过*所有*空格并正确检测 EOF 作为额外的好处。

可能还会有进一步的问题。

# javascript - 确定随机变量在javascript中是否连续

> ID：13902589
> 
> 赞同：5
> 
> 时间：2012-12-16T15:10:27.453
> 
> 标签：javascript

我是编程新手，正在使用 JavaScript 编写一个带有三个随机掷骰子的简单扑克骰子游戏。最好的一手牌是顺子，即 3、4、5。我遇到的问题是对决定三个骰子是否连续的方法进行编码。目前我想到的最好的是：

```
if ((die3 === die2 + 1 && die2 === die1 + 1) || 
    (die3 === die1 + 1 && die1 === die2 + 1) || 
    (die2 === die3 + 1 && die3 === die1 + 1) || 
    (die2 === die1 + 1 && die1 === die3 + 1) || 
    (die1 === die3 + 1 && die3 === die2 + 1) || 
    (die1 === die2 + 1 && die2 === die3 + 1)) 
```

这行得通，但似乎很不雅，如果我尝试使用三个以上的骰子，扩大规模将是一场噩梦。

任何有关替代方法的帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T15:20:49.220

对数组进行排序的想法接近于人们正在做的事情。但是，他们忘记了该数组中不应有任何重复项。 **您应该首先对它们进行排序，然后查找重复项。** 假设`dice`是您的骰子值的数组。

```
// Assumes at least two dice
function isStraight(dice) {
  dice.sort();
  var duplicates = false;
  for(var index = 0; index < dice.length - 1; index++) {
    if(dice[index] == dice[index + 1]) {
      duplicates = true;
      break;
    }
  }
  return !duplicates && (dice[dice.length - 1] - dice[0] == dice.length - 1);
} 
```

[这是一个带有三个简单测试](http://jsfiddle.net/ZWXL6/1/)（非详尽）的 jsFiddle。

如果您实际使用此方法，则应在对`dice`数组进行排序之前对其进行复制。除非您不在乎骰子阵列是否已更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T15:14:44.067

如果使用数组会更容易。重新排列您的代码以使用`die[0]`而不是`die1`, `die[1]`for`die2`等。

一旦你有了一个数组，你就可以做类似的`.sort()`事情，并反复搜索它以找到你正在寻找的数字。

例如，排序后数字将按顺序排列，因此您只需要测试：

```
if( die[1] == die[0]+1 && die[2] == die[1]+1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T15:22:09.953

A generic solution for 2 or more numbers:

```
 var ar = [dice1, dice2, dice3, dice4, dice5 and so on];  
    ar.sort();  

    var i = 1, first = ar[0];
    while (ar[i] === (first + i)) i++;

    if (i === ar.length) // consecutive 
```

[test](http://jsbin.com/opoler/3/watch) it here!

# php - 在 CakePHP 中将数据传回表单

> ID：13902592
> 
> 赞同：0
> 
> 时间：2012-12-16T15:10:34.517
> 
> 标签：php, cakephp

我的控制器中有 2 个动作。显示表单并从相关 HABTM 模型中获取表单字段列表的第一个操作。执行搜索和显示结果的第二个操作。

第一个动作：

```
public function advancedSearch() {
    $this->set($this->Restaurant->fetchRelatedData());    
} 
```

我也有此操作的视图，它显示表单：**advancedSearch.ctp**

```
echo $this->Form->create(null, array(
        'type' => 'get',
        'url' => '/restaurants/search', 'inputDefaults' => array(
        'label' => false,
        'div' => false
)));

echo $this->Form->input('companyname', array('label' => 'Name:'));
echo $this->Form->input('addr', array('label' => 'Address:'));
echo $this->Form->input('district_id', array('label' => 'District:'));
echo $this->Form->input('Station', array('label' => 'Subway station(s):'));
// etc.

echo $this->Form->end('Go!'); 
```

如您所见，此表单将数据发送到执行实际搜索的第二个操作。我需要提一下，我在搜索操作中使用了分页组件，因此我使用了 GET 方法。

我的问题是用户可能会选择一些“简单”字段和一些多选字段，发送表单，然后他可能想要优化搜索结果。因此，我需要实现将数据传递回我的表单并使用用户之前选择的值填充字段的功能。我怎样才能做到这一点？谢谢。

# github - 如何找到自己的 Repo ID？

> ID：13902593
> 
> 赞同：18
> 
> 时间：2012-12-16T15:10:34.440
> 
> 标签：github, repository

虽然我绝对不是这个私人回购的所有者，但我一直将它用作学校项目组的一部分，老师在向他发送有关任何事情的电子邮件时只是询问回购的 ID。如果这对很多人来说是显而易见的，我很抱歉，但对于我的生活，我无法通过 github 或 google 找到任何明确的说明。我没有为我的 git 使用 GUI，严格通过 linux shell。

如何找出当前 Repo 的 ID？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2017-11-10T13:06:51.983

如果像我一样，您在 GitHub 存储库 ID 之后（如 - 识别存储库的编号 - 不是它的名称），那么我通过 GitHub 存储库主页上的元数据元素找到了一种简单的方法：

1.  查看页面源代码（例如，在 Chrome 或 Firefox 中右键单击 > 查看页面源代码）
2.  搜索页面源并查找`octolytics-dimension-repository_id`. 您应该找到如下所示的内容：

    `<meta content="123456789" name="octolytics-dimension-repository_id" />`

在此示例中，存储库的 ID 为`123456789`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2020-08-09T23:39:13.063

这是一个可以在控制台中运行的快速查询：

`$("meta[name=octolytics-dimension-repository_id]").getAttribute('content')`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T15:14:20.550

当您说“repo ID”时，您是指 GitHub 上的 repo 的 URL 吗？

如果这就是您要查找的内容，请使用`git remote`.

```
plankton:~/scraps $ git remote -v
origin  git@github.com:petdance/scraps.git (fetch)
origin  git@github.com:petdance/scraps.git (push) 
```

如果您有多个远程存储库馈入本地存储库，则所有这些都将在此处列出。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-16T15:13:16.850

我猜他是在谈论名称/reponame 组合（它在 github 上唯一标识 repo），例如，如果您在您的`git remote`

```
git://github.com/sublimescala/sublime-ensime.git 
```

id 将是 sublimescala/sublime-ensime

# matlab - MATLAB中心电信号的FFT

> ID：13902594
> 
> 赞同：2
> 
> 时间：2012-12-16T15:10:38.697
> 
> 标签：matlab, frequency

这是输入信号： [![原来的](../Images/8484f9938967427f55fc40946723cc61.png)](https://i.stack.imgur.com/4au8X.jpg)

```
 plot(abs(fft(ecg))) 
```

[![fft](../Images/7aba31d36bf1f371b468b16d86092be8.png)](https://i.stack.imgur.com/pfeNr.jpg)

我也试过

```
 fvtool(x_vals) 
```

这给了我：

[![其他](../Images/2ac41884e3a0132df51180f817072f5e.png)](https://i.stack.imgur.com/7gM6U.jpg)

但是我想要以Hz为单位的x轴。所以本质上我想看到这个信号的频谱，以赫兹为单位。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T15:28:25.200

```
function [f amp] = getspectrum( Mdata, Mf )

%  Mdata    data 
%  Mf       sampling rate / frequency (Hz)

NFFT = 2 ^ nextpow2(length(Mdata)); 
Y = fft(double(Mdata), NFFT) / length(Mdata);
f = (double(Mf) / 2 * linspace(0, 1, NFFT / 2))'; % Vector containing frequencies in Hz
amp = 2 * abs(Y(1:(NFFT / 2))); % Vector containing corresponding amplitudes 
```

我希望这可能会有所帮助。

# c - 如何将结构列表添加到现有结构

> ID：13902601
> 
> 赞同：0
> 
> 时间：2012-12-16T15:11:04.670
> 
> 标签：c, algorithm, linked-list

我正在用**C**设计一个基本的 XML 解析器，并试图找出一种添加节点（子节点和父节点）的方法。所以我现在的想法是有一个数据类型，节点，它看起来像这样

```
struct node{
    char* name;
    char* value;
    struct node* parent; // if is a child set this to the parent node
    //how to make a list of child nodes
    int numChildren;
    struct node* nextParent;// allow me to iterate through top level parent level nodes
}; 
```

因此，如果一个节点是父节点，它将其父指针设置为 NULL。我知道如何将节点添加到我的链表，但我不知道如何将子节点添加到“节点列表”。所以关于我将如何做到这一点的任何想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T15:22:23.730

One common way to create a tree structure is the following:

```
struct node {
    //additional values...

    struct node *parent; //optional
    struct node *firstChild;
    struct node *nextSibling;
}; 
```

Essentially, each node contains a linked list of its children. The first child is `theNode->firstChild`, the second child is `theNode->firstChild->nextSibling`, and so on, until `nextSibling==NULL` for the last child.

Leaf nodes will have `firstChild==NULL`, and the root node has `parent==NULL`.

Adding a child to a node will then be done in the same manner as adding a node to a linked list. For example, to add a child in front of the other children:

```
allocate newNode and initialize its fields.
newNode->parent = parentNode;
newNode->nextSibling = parentNode->firstChild;
parentNode->firstChild = newNode; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:18:26.477

```
#define MAXCHILD N
struct node{
    char* name;
    char* value;
    struct node* parent; 
    //int numChildren; if fixed number of children for each node then use macro
    struct node* nextParent[MAXCHILD];
}; 
```

或者，

尝试使用`malloc()`和 make`nextParent`作为`struct node** nextParent`指针的指针。根据每个节点的子节点数进行分配。像下面这样。

`struct node *treenode;
treenode = malloc(sizeof(*treenode));
treenode -> numChildren = 2; // It must be initialized with value otherwise may
// take any garbage value.
treenode -> nextParent = malloc((treenode -> numChildren) * sizeof(struct node*));`

但是`numChildren`应该初始化

# facebook - 跳过 Facebook 的 nginx 基本身份验证

> ID：13902611
> 
> 赞同：1
> 
> 时间：2012-12-16T15:12:05.413
> 
> 标签：facebook, nginx

我正在开发一个使用一些 Facebook 社交插件的项目，主要是评论框插件。开发服务器向公众开放，但设置了 auth_basic。是否可以为 Facebook 禁用此功能？当我显示评论框时，它说

> “此网址无法访问”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T00:55:45.110

我通过将 Facebook 的 IP 地址添加到 nginx 配置文件来做到这一点

```
 satisfy any;
allow 66.220.144.0/20;
allow 66.220.144.0/21;
allow 66.220.152.0/21;
allow 66.220.159.0/24;
allow 69.63.176.0/20;
allow 69.63.176.0/21;
allow 69.63.176.0/24;
allow 69.63.178.0/24;
allow 69.63.184.0/21;
allow 69.171.224.0/19;
allow 69.171.224.0/20;
allow 69.171.239.0/24;
allow 69.171.240.0/20;
allow 69.171.255.0/24;
allow 74.119.76.0/22;
allow 103.4.96.0/22;
allow 173.252.64.0/18;
allow 173.252.64.0/19;
allow 173.252.70.0/24;
allow 173.252.96.0/19;
allow 204.15.20.0/22;
allow 31.13.24.0/21;
allow 31.13.64.0/18;
allow 31.13.64.0/19;
allow 31.13.64.0/24;
allow 31.13.65.0/24;
allow 31.13.66.0/24;
allow 31.13.67.0/24;
allow 31.13.68.0/24;
allow 31.13.69.0/24;
allow 31.13.70.0/24;
allow 31.13.71.0/24;
allow 31.13.72.0/24;
allow 31.13.73.0/24;
allow 31.13.74.0/24;
allow 31.13.75.0/24;
allow 31.13.76.0/24;
allow 31.13.77.0/24;
allow 31.13.78.0/24;
allow 31.13.79.0/24;
allow 31.13.80.0/24;
allow 31.13.81.0/24;
allow 31.13.82.0/24;
allow 31.13.83.0/24;
allow 31.13.84.0/24;
allow 31.13.85.0/24;
allow 31.13.86.0/24;
allow 31.13.87.0/24;
allow 31.13.88.0/24;
allow 31.13.89.0/24;
allow 31.13.90.0/24;
allow 31.13.91.0/24;
allow 31.13.92.0/24;
allow 31.13.93.0/24;
allow 31.13.94.0/24;
allow 31.13.95.0/24;
allow 31.13.96.0/19;
deny all;
auth_basic            "Restricted";
auth_basic_user_file  /etc/nginx/htpasswd; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-22T18:04:34.217

老问题，但我想是 gfood 来解释如何获取当前 IP。

Facebook 提供了一种获取他们使用的所有 IP 的方法：

```
whois -h whois.radb.net -- '-i origin AS32934' | grep ^route 
```

该命令返回他们使用的所有 IPv4 和 IPv6。获得 IP 后，将它们添加到您的服务器（Nginx、Apache 等）。

检查[Facebook 爬虫](https://developers.facebook.com/docs/sharing/webmasters/crawler)页面。

# android - 如何在填充网格之前将 sqlite db 值与负载单位相乘

> ID：13902613
> 
> 赞同：0
> 
> 时间：2012-12-16T15:12:22.410
> 
> 标签：android, android-sqlite, android-cursor

我有一个包含这些列的数据库

```
|Name|Quantity|Price|Type|Eta|Language|
|Farmakon|200.1mg|35€|F|2|EN|
|Botron|13g|35€|F|15|ES|
|Botron|10g|31€|F|13|ES|
|Puller|0.50mg|35€|T|1|EN|
|Rovtres|7.2cl|35€|BN|12|UK| 
```

我用这个光标

```
Cursor c = mDb.rawQuery(
                        "SELECT Id AS _id, Name, Quantity, Price, FROM mytable "
                                + "WHERE Type LIKE ? AND Eta LIKE ? AND Language LIKE ? ORDER BY Name",
                        new String[] { "%" + type + "%", "%" + eta + "%",
                                "%" + language + "%" }); 
```

获取值

```
|Name|Quantity|Price|
|Botron|10g|31€|F|13|ES|
|Botron|13g|35€|
|Farmakon|200.1mg|35€|
|Puller|0.50mg|35€|
|Rovtres|7.2cl|35€| 
```

这将用于填充 Grid

我使用这段代码用 SimpleCursorAdapter 填充网格：

```
SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, 
        R.layout.row, c, cols, views); 
```

现在我需要根据名称乘以数量的值，例如所有*Botron*行的数量都应该乘以*10.1* ，保持测量单位*g、mg*等。

因为我必须填充网格，所以这种操作应该在 Cursor c 中完成。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:22:32.627

> 因为我必须填充网格，所以这种操作应该在 Cursor c 中完成。

您无法修改，`Cursor`但您可以在适配器上使用简单`ViewBinder`的来进行额外的计算：

```
 adapter.setViewBinder(new ViewBinder() {

        @Override
        public boolean setViewValue(View view, Cursor cursor,
                int columnIndex) {
            if (view.getId() == R.id.theidOfTheViewWithTheQuantity) {
                // get the quantity from the Cursor, but I don't know how you stored it
                float quantity = cursor.getFloat(columnIndex);
                // get the name
                String name = cursor.getString(cursor.getColumnIndex(the_column_name));
                if (name.equals("Botron" )) {
                    quantity = quantity * 10.0f;
                    ((TextView)view).setText(String.valueOf(quantity));
                }
                return true;
            }
            return false;
        }

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:16:42.253

我不确定 SQLite 是否支持将函数作为其查询的一部分，因此我建议扩展[CursorAdapter](http://developer.android.com/reference/android/widget/CursorAdapter.html)`bindView()`并在您的方法中执行乘法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T15:19:25.967

您可以在将值从 加载到`SimpleCursorAdapter.setViewBinder(new SimpleCursorAdapter.ViewBinder()`时更改这些值。`cursor``Grid`

# html - 发送保存在文件系统中的 html 文件作为响应

> ID：13902614
> 
> 赞同：0
> 
> 时间：2012-12-16T15:12:27.323
> 
> 标签：html, servlets

我开发了一个小型 Java Web 应用程序，用户将在其中上传 XML 文件。用户提交表单后，使用 XSLT 将 XML 文件转换为 html 文件并保存在文件系统中。现在我想将此文件作为响应发送回客户端/用户。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:15:54.093

读取文件的字节，并将它们发送到 HTTP 响应的输出流。您还应该将内容类型设置为`text/html`，并将内容长度设置为文件的长度。

# c++ - 使用 std::vector 的奇怪分段错误

> ID：13902617
> 
> 赞同：0
> 
> 时间：2012-12-16T15:12:54.340
> 
> 标签：c++, stl, segmentation-fault

看看这个片段：

```
#include <string>
#include <iostream>
#include <vector>

using namespace std;

class base {
public:
  string foo;
  base() {};
  base(const base &orig) {
    this->foo = orig.foo;
  };
 ~base() {} ;
};

class derived : public base {
public:
  string bar;
  derived(const derived &orig) : base(orig) {
    this->bar = orig.bar;
  }
  derived() : base() {} ;
  ~derived() {};
};

void asd(derived d)
{
    // works fine
    cout << d.foo << d.bar << endl;
}

int main(void)
{
    vector<derived> v;

    derived bla;

    bla.foo = "Test ";
    bla.bar = "String ";

    v.push_back(bla);

    asd(bla);

    // Why the hell does v.end()->foo and v.end()->bar segfault?!
    cout << v.end()->foo;
    cout << v.end()->bar << endl;
} 
```

为什么会出现分段错误？这是控制台输出（使用 g++ -o test test.cpp -g 编译）

```
./test
Test String 
zsh: segmentation fault  ./test 
```

派生类 v.end() 的 this 指针没有指向正确的位置……但是为什么呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-16T15:15:18.297

`end()`不是指向最后一个元素的迭代器。它指向最后一个元素之后的一个。取消引用`end()`是非法的。

[`back()`](http://en.cppreference.com/w/cpp/container/vector/back)如果您想要最后一个元素，请使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T15:24:29.807

您的问题是使用 v.end()。

[从这里](http://www.cplusplus.com/reference/vector/vector/end/)引用

将迭代器返回到 end 返回一个迭代器，该迭代器引用向量容器中的最后一个元素。

过去元素是向量中最后一个元素之后的理论元素。它不指向任何元素，因此不应被取消引用。

因为标准库函数使用的范围不包括其关闭迭代器所指向的元素，所以该函数通常与vector::begin结合使用，以指定包含容器中所有元素的范围。

如果容器为空，则此函数返回与vector::begin 相同的值。

使用 v[0] 代替。（对于此特定测试，请参阅引用页面中有关矢量吸气剂的其他建议）。

# python - MongoDB - 不存在字段的错误处理

> ID：13902618
> 
> 赞同：1
> 
> 时间：2012-12-16T15:13:06.047
> 
> 标签：python, mongodb, python-2.7, pymongo

我有一个集合，每个文档都有一组字段值。其中之一称为“坐标”。现在，当我在数据库中查询该字段不为空的元素时，它会返回我期望的正确值。

但是我不时在python（Pymongo）中遇到这个错误：

```
if not doc['coordinates']
TypeError: 'NoneType' object has no attribute '__getitem__' 
```

这似乎意味着它遇到了没有字段“坐标”的记录。我已经创建了具有此字段的文档并且应该存在。

不过，我想知道如何处理此错误并防止此错误终止我的程序。

这就是我找到适当查询的方式：

```
 cursor = collection.find(
                { "$and" : [
                    {"term": {"$in": events}}, 
                    { "$or" : [
                            {"coordinates" : {"$ne": None}}, 
                            {"place" : {"$ne" : None}}
                    ]}
                ]}, 
            {"term" : 1, "coordinates" : 1, "place" : 1, "time_normal" : 1}, tailable = True, timeout = False ) 
```

然后我遍历返回的查询，如下所示：

```
while cursor.alive:
    try:
        doc = cursor.next()

        CODE IS HERE TO QUERY DB

    except StopIteration:
        pass 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T15:56:18.147

您在示例中获得 a`TypeError`和`AttributeError`在 nickmilon 提供的示例中获得 a 的原因是因为您用来获取您的查询`doc`没有找到任何内容（因此是 a `NoneType`）。检查您的查询以确保您确实从您的收藏中获取了东西。

不过，nickmilon 提供的答案应该为您提供您所追求的错误处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T16:38:09.670

Eric is right, for some reason your doc is None. Could you post here the code you are using for find and how you process the cursor returned from find ?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T15:27:07.177

您可以尝试： doc.get('coordinates') 如果字段不存在，它将返回 None ，如果存在则返回其值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T20:35:21.883

我能够通过在异常块中包含 TypeError 来处理此错误，如下所示：

```
 try:                                               
                    if not doc['coordinates']:
                        CODE HERE

                    else: 
                        CODE HERE

                except (TypeError):
                    pass 
```

# php - 如何将网址更新到搜索引擎和其他更新服务

> ID：13902626
> 
> 赞同：-1
> 
> 时间：2012-12-16T15:13:36.683
> 
> 标签：php, seo, cakephp-2.0

关于我们何时发布或发布任何其他内容的任何想法，如何更新/ping 其 url 到核心或 cakephp 中的搜索引擎和其他网络 ..

（如 wordpress XML-RPC ping ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:06:10.977

您可以使用本文[简单 XML-RPC 服务实现](http://bakery.cakephp.org/articles/jayesh/2010/08/23/simple-xml-rpc-services-implementation)的逻辑和概念，也可以完全使用它。

# iphone - iPad多任务视图过渡效果

> ID：13902628
> 
> 赞同：0
> 
> 时间：2012-12-16T15:13:39.727
> 
> 标签：iphone, xcode, animation, view, transition

我从 App Store 下载了一些应用程序到我的 iPhone，其中有几个视图。
我看到开发人员在两个视图之间做了一个过渡效果，比如 iPad 上的多任务效果，一个视图在另一个视图后面。
我想知道......我怎样才能在我的项目代码中实现这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:38:25.050

他们很有可能制作了自定义动画。我首先建议您查看[有关动画的 Apple 指南](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/animatingviews/animatingviews.html)。然后[Ray Wenderlich](http://www.raywenderlich.com/5478/uiview-animation-tutorial-practical-recipes)有一个很好的关于动画 UIView 的教程。检查这两个资源，它们应该可以帮助您开始使用动画。一旦你理解了它，你应该能够重新创建那些动画。

# iphone - 两次屏蔽 UIImage 会导致图像为空

> ID：13902630
> 
> 赞同：0
> 
> 时间：2012-12-16T15:13:51.500
> 
> 标签：iphone, objective-c, ios, uiimage

我正在使用 CGImageMaskCreate 创建一个蒙版图像，它在第一次被调用时工作正常。但是，当第二次从 drawRect 调用相同的函数时，创建的蒙版图像是空的。

```
- (void)drawRect:(CGRect)rect{    
UIImage *maskImage = [UIImage imageNamed:@"circle.png"]; //This will be replaced    
UIImage *maskedImage = [self maskImage:_selectedImage withMask:maskImage];    
_selectedImage = maskedImage;    
[_selectedImage drawInRect:rect];                      
}

- (UIImage*) maskImage:(UIImage *)image withMask:(UIImage *)maskImage {   
    CGImageRef maskRef = maskImage.CGImage;
    CGImageRef mask = CGImageMaskCreate(CGImageGetWidth(maskRef),
                                    CGImageGetHeight(maskRef),
                                    CGImageGetBitsPerComponent(maskRef),
                                    CGImageGetBitsPerPixel(maskRef),
                                    CGImageGetBytesPerRow(maskRef),
                                    CGImageGetDataProvider(maskRef), NULL, false);
    CGImageRef masked = CGImageCreateWithMask([image CGImage], mask);
    UIImage *result = [UIImage imageWithCGImage:masked];
    NSLog(@"    MASK >> RETURNING %@ %f %f", 
           result.description, result.size.width, result.size.height);
return result;
} 
```

draw rect 运行 3 次后，日志输出为

```
MASK >> RETURNING UIImage: 0x903d720 320.000000 480.000000
MASK >> RETURNING UIImage: 0x73660c0 0.000000 0.000000
MASK >> RETURNING UIImage: 0x90f7390 0.000000 0.000000 
```

因此，在第二次调用后，蒙版图像似乎是空的。

帮助会很棒，这是我的第一个 IOS 应用程序，所以可能很明显。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:14:53.543

我认为这是您的程序逻辑：

起初，`_selectedImage`是空的。因此，蒙版创建了一个圆圈。

现在你`_selectedImage`已经包含了圆圈。所以第二次你的圈子会被面具归零。

*--> 预期行为*。如果您没有预料到，也许您想阅读 Core Graphics 遮罩功能。

# spring - 如何在 @PostContruct 方法中手动管理 Hibernate 会话？

> ID：13902635
> 
> 赞同：0
> 
> 时间：2012-12-16T15:14:13.330
> 
> 标签：spring, hibernate, lazy-loading

我的问题很简单。当应用程序在 Tomcat 上加载时，我想从数据库中访问一些数据。要在那个时间点做某事，我使用@PostConstruct（它可以正常工作）。

但是，在该方法中，我与数据库建立了 2 个单独的连接：一个用于带来实体列表，另一个用于将它们添加到公共库中。第二步意味着一些用于解决一些延迟加载关联的幕后查询。这是代码片段：

```
@Override
@PostConstruct
public void populateLibrary() {
// query for the Book Descriptors - 1st query works!!!
List<BookDescriptor> bookDescriptors= bookDescriptorService.list();

Session session = sessionFactory.openSession();
Transaction transaction = null;
try {
    transaction = session.beginTransaction();

        // resolving some lazy-loading associations - 2nd query fails!!!
    for (BookDescriptor book: bookDescriptors) {
         library.addEntry(book);
    }

    transaction.commit();
} catch (HibernateException e) {

    transaction.rollback();
    e.printStackTrace();
} finally {
    session.close();
}
} 
```

正如我在评论中所写，第一个查询有效，而第二个查询失败。失败给出：

```
org.hibernate.LazyInitializationException: could not initialize proxy - no Session
at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:86)
at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:140)
at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:190)
at com.freightgate.domain.SecurityFiling_$$_javassist_7.getSfSubmissionType(SecurityFiling_$$_javassist_7.java)
at com.freightgate.dao.SecurityFilingTest.test(SecurityFilingTest.java:73) 
```

这很奇怪，因为我明确地打开和关闭了一个事务。*但是，如果我检查第一个查询如何*工作的一些细节，似乎在幕后会话绑定到 AbstractLazyInitializer 类。

我通过将 for 循环中的功能抽象为一个单独的服务类来解决我的问题，该服务类使用 @Transactional(readOnly = true) 进行注释。我仍然对为什么我在这里发布的方法失败感到困惑。

如果有人有一些提示，我会很高兴听到他们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:25:32.467

您在第一个会话中加载实体，然后关闭此会话，然后打开一个新会话，并尝试延迟加载实体的集合。那是行不通的。

为了使延迟加载起作用，实体必须附加到打开的会话。仅打开另一个会话不会使您在附加到此新会话之前加载的任何实体。与此同时，其他一些事务可能从根本上改变了数据库，实体不再存在......

最好的解决方案是你所做的。将所有内容封装到单个事务服务中。您也可以在调用第一个服务之前打开事务，但是为什么要以编程方式处理事务，因为 Spring 以声明方式为您完成呢？

# php - 如何在发布表单之前将下拉选择写入 mysql

> ID：13902636
> 
> 赞同：2
> 
> 时间：2012-12-16T15:14:14.230
> 
> 标签：php, mysql, ajax, drop-down-menu

我运行一个收集 4 个值的简单表单，其中三个值列在下拉列表中。我想知道是否可以在提交表单之前将用户选择的值写入我的 mysql 表。

表格如下所示：

```
<form id="search" action="" method="POST">
<input id="field1" type="text" name="to" value="">
<select name="day">
<option value="">Day</option>
<option value="1"> 1</option>
<option value="2"> 2</option>
<option value="3"> 3</option>
</select>

<select name="cym">
<option selected="" value="">Month</option>
<option value="2012-12">December 2012</option>
<option value="2013-01">January 2013</option>
<option value="2013-02">February 2013</option>
</select>

<select name="nights">
<option value="">Nights</option>
<option value="1"> 1</option>
<option value="2"> 2</option>
<option value="3"> 3</option>
</select>

<button onclick="document.getElementById('search').submit();">Search!</button>` 
```

因此，一旦用户选择“day”，我想将值写入 mysql，一旦用户选择“cym”，我想将值写入 mysql，依此类推。

这可以实现吗？如果可以，如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:18:07.137

您可以将一些 onChange 事件绑定到选择元素。您可以轻松地为此使用 jQuery。看[http://api.jquery.com/change/](http://api.jquery.com/change/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T15:24:35.540

如果您使用的是 jQuery，您可以执行以下操作：

```
 $("#cym").change(function () {
     $.ajax({
            url: 'serverUrl.php',
            success: function(data) {
             // nothing to be done here
            }
            });
          }); 
```

将`<select name="cym">`成为`<select id="cym">`选择器 `$("#cym")`工作。当然，这可以通过使用原始 Javascript 来实现，如果这是您的首选方法，您可以查看[http://www.w3schools.com/ajax/tryit.asp?filename=tryajax_first](http://www.w3schools.com/ajax/tryit.asp?filename=tryajax_first)。

# mysql - 配置 Rails 应用程序以使用现有数据库

> ID：13902641
> 
> 赞同：0
> 
> 时间：2012-12-16T15:14:25.543
> 
> 标签：mysql, ruby-on-rails, activerecord, naming-conventions

我有一个使用现有网站和 mysql 后端的新项目。现在，现在的网站是用 php 编写的（没有框架，哎呀），mysql 表不遵循任何约定。例如，表名并不总是复数，每个表的唯一标识符并不总是被调用`id`，而是类似于`c_id`，有时 created_at 和 updated_at 没有时间戳字段，如果有，它们有不同的名称。

现在我想在 Rails 中为网站构建一个管理面板，它将访问相同的数据库。我有两个选择：

1.  更改数据库以遵循 Rails 约定并相应地修改 php 应用程序和所有查询
2.  不知何故，告诉 Rails 它将把像 `c_id` 这样的东西当作 'id'，将单数名称当作复数名称，等等。

当然，第一种选择在技术上是可行的，但可能是一个巨大的痛苦。这就是为什么我肯定更喜欢第二种选择的原因，并且想知道如果每个模型不遵循约定，是否有可能告诉 Rails 如何处理事物。在我看来，这看起来像：

```
class ModelClass < ActiveRecord::Base
  treat :user, as: :users
  treat :user.u_id, as: :id
  treat :user.created, as: :created_at if exists
  treat :user.last_update, as: :updated_at if exists
end 
```

这只是伪代码，但你明白了。这样的事情可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T15:18:41.030

与您的建议完全不同，但是您可以随意调用模型/列/关联。

```
class User
  set_table_name 'user' # instead of default "users"
  set_primary_key :c_id # instead of default "id"
end 
```

# scala - 使用 Future 的快速排序最终陷入僵局

> ID：13902644
> 
> 赞同：2
> 
> 时间：2012-12-16T15:15:13.970
> 
> 标签：scala, deadlock, actor, future

我编写了一个快速排序（方法`quicksortF()`），它使用 Scala 的 Future 让分区的递归排序同时进行。我还实现了一个常规的快速排序（方法`quicksort()`）。不幸的是，当要排序的列表大于大约 1000 个元素（900 个可以工作）时，Future 版本最终会陷入死锁（显然永远阻塞）。来源如下图。

我对演员和期货比较陌生。这里出了什么问题？

谢谢！

```
import util.Random
import actors.Futures._

/**
 * Quicksort with and without using the Future pattern.
 * @author Markus Gumbel
 */
object FutureQuickSortProblem {

  def main(args: Array[String]) {
    val n = 1000 // works for n = 900 but not for 1000 anymore.

    // Create a random list of size n:
    val list = (1 to n).map(c => Random.nextInt(n * 10)).toList
    println(list)
    // Sort it with regular quicksort:
    val sortedList = quicksort(list)
    println(sortedList)
    // ... and with quicksort using Future (which hangs):
    val sortedListF = quicksortF(list)
    println(sortedListF)
  }

  // This one works.
  def quicksort(list: List[Int]): List[Int] = {
    if (list.length <= 1) list
    else {
      val pivot = list.head
      val leftList = list.filter(_ < pivot)
      val middleList = list.filter(pivot == _)
      val rightList = list.filter(_ > pivot)

      val sortedLeftList = quicksort(leftList)
      val sortedRightList = quicksort(rightList)
      sortedLeftList ::: middleList ::: sortedRightList
    }
  }

  // Almost the same as quicksort() except that Future is used.
  // However, this one hangs.
  def quicksortF(list: List[Int]): List[Int] = {

    if (list.length <= 1) list
    else {
      val pivot = list.head
      val leftList = list.filter(_ < pivot)
      val middleList = list.filter(pivot == _)
      val rightList = list.filter(_ > pivot)

      // Same as quicksort() but here we are using a Future
      // to sort the left and right partitions independently:
      val sortedLeftListFuture = future {
        quicksortF(leftList)
      }
      val sortedRightListFuture = future {
        quicksortF(rightList)
      }
      sortedLeftListFuture() ::: middleList ::: sortedRightListFuture()
    }
  }
}

class FutureQuickSortProblem // If not defined, Intellij won't find the main method.?! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T18:08:54.120

免责声明：我从来没有以任何严肃的方式亲自使用过（2.10 之前的）标准库的演员或期货，而且那里的 API 有很多我不喜欢（或至少不理解）的地方，例如，与 Scalaz 或 Akka 或 Play 2.0 中的实现进行比较。

但我可以告诉你，在这种情况下，通常的方法是单子组合你的未来，而不是立即声明它们并组合结果。例如，你可以这样写（注意新的返回类型）：

```
import scala.actors.Futures._

def quicksortF(list: List[Int]): Responder[List[Int]] = {
  if (list.length <= 1) future(list)
  else {
    val pivot = list.head
    val leftList = list.filter(_ < pivot)
    val middleList = list.filter(pivot == _)
    val rightList = list.filter(_ > pivot)

    for {
      left <- quicksortF(leftList)
      right <- quicksortF(rightList)
    } yield left ::: middleList ::: right
  }
} 
```

就像你的 vanilla 实现一样，这不一定非常有效，而且它也会很容易地破坏堆栈，但它不应该用完线程。

作为旁注，为什么`flatMap`在 a 上`Future`返回 a`Responder`而不是 a `Future`？我不知道，[其他一些人](https://stackoverflow.com/a/3853723/334519)也不知道。出于这样的原因，我建议完全跳过现已弃用的 2.10 之前标准库基于参与者的并发内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T15:47:31.457

据我了解，在 Future 上调用 apply （就像您在连接递归调用的结果时所做的那样）将阻塞，直到检索到结果。

# jquery - ajax 表单将在第二次使用 ckeditor 提交后提交

> ID：13902647
> 
> 赞同：0
> 
> 时间：2012-12-16T15:15:30.513
> 
> 标签：jquery, ajax, ckeditor

我有以下配置，一个使用ajax提交的表单和一个使用ckeditor的textarea，因为我使用ckeditor，表单将在第二个按钮按下时提交，在第一个按钮按下时表单不会提交。

JS

```
 CKEDITOR.replace('_message_tokenizer', {width:"400", height:"200", toolbar : [['Styles','Font','FontSize','Bold', 'Italic', '-', 'Link', 'Unlink', 'smiley', 'Undo', 'Redo']] });

  $("#envoyer_message_tokenizer").submit(function(){

  if( $.trim($("#_message_tokenizer").val())!="" &&  $.trim($("#contacts").val())!=""){

var contacts=[];
contacts.push($("#contacts").val());

   $.ajax({
  type:"POST",
data:{"action":"envoyer_message_tokenizer", "session_id":<?php echo $session_id['id'];?>, "_message_tokenizer":$("#_message_tokenizer").val(), "_sujet":$("#_sujet").val(), "contacts":contacts} ,
  url: 'messages-ajax.php',
  success: function(data){

    $("#envoyer_message_tokenizer").fadeOut("slow", function(){
      $("#message_tokenizer").children().html(data);

    });

         }
      });
    }
 }) 
```

HTML

```
<form id="envoyer_message_tokenizer" method="post"  action="javascript:;">
<table cellpadding="0"  cellspacing="0" class="padding dotted">
<tr><td valign="top" width="130"><b class="bg">Sujet</b></td>
<td><input type="text" class="_input _input_text" style="width: 399px;" id="_sujet"/></td></tr>
<tr><td valign="top"><b class="bg">Destinataire(s)</b> <span class="ast_oblig">*</span></td>
<td><input type="text" class="_input _input_text"  name="contacts" id="contacts"/></td></tr>
<tr><td valign="top"><b class="bg">Message</b> <span class="ast_oblig">*</span></td>
<td><textarea style="width: 399px;height: 100px;" id="_message_tokenizer"></textarea></td></tr>
<tr class="no_dotted"><td></td><td><input type="submit"  class="_submit" value="envoyer" /></td></tr>
</table>
</form> 
```

我已经尝试过 ckeditor getData 方法，但结果仍然相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:24:14.847

您需要使用`event.preventDefault()`或`return false`在提交处理程序中防止浏览器默认提交表单

```
$("#envoyer_message_tokenizer").submit(function(event) {

     /*use either method*/
     /* before code*/
    event.preventDefault();  

      /* your handler code*/

     /* OR after code*/

     return false;

}) 
```

# php - 复选框组添加到数据库

> ID：13902650
> 
> 赞同：0
> 
> 时间：2012-12-16T15:15:35.387
> 
> 标签：php, mysql, checkbox

我有以下查询检索客户端数据以创建复选框组。我需要将选定的复选框作为单独的行添加到数据库中，但我不确定如何编写它，因为我以前没有这样做过。我很困惑，因为复选框的数量会有所不同。

```
res=mysql_query('SELECT id,name FROM tbl_client WHERE active="1" ORDER BY name DESC',$dbh) or die(mysql_error());
num=mysql_num_rows($res);
for($run=0; $run<$num; $run++)
{
val=mysql_fetch_row($res);
echo '<label><input type="checkbox" name="CheckboxGroup1" value="'.$val[0].'" id="CheckboxGroup1_0" />'.$val[1].'</label><br />';
} 
```

当我提交复选框时，如何访问复选框以便将它们添加到数据库中的各个行？我想我可以使用某种`Foreach`声明，我只是不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:27:29.727

您需要的是使用一个数组，这意味着使用尾随`[`方括号来命名您的输入字段，`]`如下所示......

```
<label><input type="checkbox" name="CheckboxGroup[]" /></label><br /> 
```

当表单提交给 PHP 脚本时，它的作用是创建一个以`CheckboxGroup`您的`$_POST`或`$_GET` [超级全局变量](http://php.net/superglobals)命名的数组（*取决于表单使用的方法）。*因此，如果您的 HTML 中有 1 或 1000 个这些输入元素，它们将全部填充`$_POST['CheckboxGroup']`在 PHP 中 - 或 $_GET - 下，您可以像这样迭代它们......

```
foreach ($_POST['CheckboxGroup'] as $checkbox) {
    /* do whatever you want with $checkbox here */
} 
```

请注意，复选框值仅在 UA 被选中时才会在请求中发送。**另外，请不要使用 mysql_* 函数与 PHP 中的 mysql 数据库交互，因为它已被弃用，并将从 PHP 的未来版本中删除。**对于新应用程序，请考虑使用[MySQLi](http://php.net/mysqli)或[PDO](http://php.net/pdo)与 PHP 中的 mysql 数据库交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:40:08.727

在 HTML 表单中，复选框和单选控件是独一无二的，如果它们没有被客户端触发，它们就不会出现在请求中。因此，您的脚本必须提前知道预期的复选框。对于 type=text、submit 等的输入，请求包含命名控件，即使数据字符串为空。

有几种方法可以完成这类事情。您可以制作带有或不带有命名元素的复选框数组，如下所示：'

```
<input type="checkbox" name="color[orange]" />Orange
<input type="checkbox" name="color[green]"  />Green 
```

您还可以提供与复选框元素同名的 type=hidden 表单元素。最后一个同名的表单元素将与请求一起呈现。通过这样做，您始终可以拥有可预测的元素数量。如果未触发复选框，则隐藏值将在请求中。如果客户选择了复选框，复选框值将在那里。

尝试设置一个表单，将您的复选框测试提交给一个说明这一点的 PHP 脚本（此处完整显示）

```
<?php var_dump($_POST); 
```

# java - Google App Engine GAE JPA 多对多关系

> ID：13902652
> 
> 赞同：1
> 
> 时间：2012-12-16T15:15:51.153
> 
> 标签：java, google-app-engine, jpa, data-modeling, relationship

我正在尝试以一种既适用于休眠 JPA 又适用于 GAE JPA 的方式对我的对象进行建模。我有一个`Item`具有属性列表的类。我需要找到所有具有特定属性的项目。例如：

```
@Entity
public class Item {
    @Id
    public Long id;

    @ManyToMany(name="properties")
    public List<Property> props; 
}

@Entity
public class Property {
    @Id
    public Long id;
    public String value;
} 
```

我的查询就像

```
select i from Item i join i.props p where p.id=1 and p.id=3 and p.id=10 
```

其中 1、3 和 10 是我要查找的属性的 ID。例如，我可以拥有书籍项目并查找以下属性：Property(1, "category:book") Property(3, "text:anatomy"), Property(10, "text:brain")。您可以将属性视为项目的标签。

JAE JPA 不支持多对多关系。有什么建议如何建模吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:09:50.263

GAE JPA 显然确实支持**无主**MN 关系，但是您的模型中没有任何 MN（即 Property 不知道 Item）。您有一个集合字段，因此您将其标记为@OneToMany。由于 GAE 允许的查询很少，因此查询会更成问题。（即连接方式不多）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T08:05:38.087

这是我最终得到的解决方案：

```
@Entity
public class Item implements Serializable {
    @Id
    public Long id;

    @Unowned
    @OneToMany(cascade = CascadeType.ALL)
    @Column(name = "properties")
    public Set<Property> properties = new HashSet<Property>();

    @ElementCollection
    public Set<Long> propIds = new HashSet<Long>();
}

@Entity
public class Property implements Serializable {
    @Id
    public Long id;
    public String value;
} 
```

查询是这样的：

```
select i from Item i where 1 member of i.propIds and 3 member of i.propIds 
```

这将返回我需要的所有项目。然后我可以通过`item.properties`.

# c++ - 使用现有数据结构或将其用作数据结构的 Boost 图

> ID：13902655
> 
> 赞同：3
> 
> 时间：2012-12-16T15:16:21.917
> 
> 标签：c++, boost-graph

我正在编写一个应用程序来解析数据结构，例如

```
struct Block
{
  std::string foo;
  /* ... even more local data ... */
};

std::map<std::string, Block> blockContainer; // Each Block will have a name here

struct Signal
{
  // the direct links to the Blocks, no redundant storage of the name so that an
  // simple renaming of a Block would be possible
  std::map<std::string, Block>::iterator from; 
  std::map<std::string, Block>::iterator to;

  std::string bar;
  /* ... even more local data ... */
};

std::vector<Signal> signalContainer; 
```

解析和填写这个列表非常容易。现在我需要根据信号对块进行拓扑排序 - 当我使用`Boost::Graph`.

但是首先在 STL 数据结构中解析它，然后将它们复制到 Boost::Graph 结构对我来说没有多大意义。特别是因为之后对这些数据所做的所有事情可能只是一些简单的修改（添加/删除块和信号，一些信号重新路由；再次将其序列化），然后再进行新的拓扑排序。

所以我对这些可能的解决方案中的任何一个都很好：

1.  让 Boost::Graph 直接在我的容器上工作
2.  将数据直接解析到 Boost::Graph 数据结构中（例如，使用带有捆绑属性的图，例如`boost::adjacency_list<boost::mapS, boost::vecS, boost::directedS, Block, Signal>`）

但似乎我也不够聪明，无法理解这里的文档。此外，我在网上找到的所有示例都显示了如何使用捆绑属性 - 但没有显示如何使用动态构建图表。（当然，不能同时使用节点和顶点属性，或者如何使用 a`std::map`让节点通过它们的名称来访问它们，...）

有人可以帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T17:17:16.653

对于 boost::graph 文档，没有人足够聪明 ;) 学习如何使用它需要花费大量时间。

您可以围绕数据创建提升图结构，但是，这可能会相当痛苦。那里有一个文档：http: [//www.boost.org/doc/libs/1_52_0/libs/graph/doc/leda_conversion.html](http://www.boost.org/doc/libs/1_52_0/libs/graph/doc/leda_conversion.html)

我建议采用第二种方法，但我不确定你的数据结构。

您是否看到这个问题：[将自定义顶点添加到提升图](https://stackoverflow.com/questions/3100146/adding-custom-vertices-to-a-boost-graph)是否满足您的需求？

您还可以执行以下操作来创建节点（或边）并立即定义属性：

```
vertex_t u = boost::add_vertex(Block(42, "hi"), g); 
```

您可能需要在解析时维护地图。

# .net - 从 Sql 的 3 个表中填充 DataGirdView

> ID：13902661
> 
> 赞同：1
> 
> 时间：2012-12-16T15:17:08.717
> 
> 标签：.net, sql, vb.net

我在 sql 中有 3 个表，其结构如下：

表1

```
NID int, HinTitle ntext, dtposted datetime 
```

表2

```
CID int, NID int, CCID int 
```

表3

```
MID int, NID int, strImg Image, filename varchar 
```

现在 tbl1 的 NID 是主键，也是 tbl2 和 tbl3 的外键。

tbl2 可以包含多个具有 tbl1 的 ID 的值，并且在 tbl3 中相同。如下所示：

tbl1 样本数据::

```
 NID   HinTitle     dtposted
    1     -some text-  -date-
    2     -some text-  -date- 
```

tbl2 样本数据：

```
CID   NID CCID
1      1   33
2      1   44
3      1   22
4      2   77
5      2   11 
```

tbl3 样本数据

```
MID  NID   strImage        filename
1     1     -Binary Data-     aa
2     1     -Binary Data-     bb
3     2     -Binary Data-     cc 
```

现在我想要的是当我从这些表中获取所有数据时，它应该是这样的：

```
NID HinTitle      CCID CCID CCID  strImage  strImage   filename  filename
 1   -Some Text-   33   44   22   -binary-  -binary-    aa        bb
 2   -Some Text-   77   11   --   -binary-    --        cc        -- 
```

这样我就可以将值绑定到 VB.NET 中的 DataGridView

我没有找到任何让我这样做的查询：

我已经尝试过合并，但它只能应用于 varchar 而不是文本和图像。

我不知道该怎么做，好像它只适用于单个值，比如每个 id 只有一个值，然后我可以通过 join 处理，但是在这里做什么？n 它很紧急，我想尽快查询..因为这个我的整个项目都被卡住了......

# java - mongodb geoSpatial 查询不起作用

> ID：13902663
> 
> 赞同：0
> 
> 时间：2012-12-16T15:17:19.040
> 
> 标签：java, mongodb, mongo-shell

我正在尝试以公里/英里为单位获取特定半径内的记录。

mongodb 2d 索引：

```
db.collection.ensureIndex({locaction:"2d"}) 
```

集合中的记录具有索引键：

```
"location" : { "longitude" : 34.791592164168, "latitude" : 32.0516908 0405 } 
```

从 shell 调用集合的 getIndexes() 给了我这个：

```
 ...{
           "v" : 1,
           "key" : {
                   "location" : "2d"
           },
           "ns" : "events.events",
           "name" : "location_2d"
   }... 
```

尽管上述所有，尝试使用此命令获取记录失败：

```
> db.events.find({location:{ $near :{ longitude:34,latitude:32},$maxDistance:10 / 3963.192}}) 
```

任何人都可以指出是什么阻止了它的工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T15:57:00.610

AFAIK，`$near`采用两个目标值的数组，因此您可以尝试在数组中给出您的值：-

```
db.events.find({location:{ $near : [34, 32],$maxDistance:10 / 3963.192}}) 
```

# string - Boyer-Moore 的好后缀搜索的思想

> ID：13902669
> 
> 赞同：-1
> 
> 时间：2012-12-16T15:17:38.913
> 
> 标签：string, algorithm, search

Boyer-Moore 算法的关键特征之一是寻找好的后缀。它需要在每个可能的后缀上建立一个班次表吗？但是如何建立这个班次表？我不明白。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:13:05.480

[德语维基百科](http://de.wikipedia.org/wiki/Boyer-Moore-Algorithmus)有一个很好的解释。我知道这可能无济于事，但是如果运气好的话，您可以尝试理解这个非常清楚的示例。

# visual-studio-2010 - Visual Studio 主题自定义颜色

> ID：13902673
> 
> 赞同：1
> 
> 时间：2012-12-16T15:17:45.547
> 
> 标签：visual-studio-2010

我想知道是否有某种参考手册可以指出“自定义颜色”菜单中的哪些项目与 Visual Studio IDE 上的项目相对应。

例如，这是一个突出显示项目之一的类视图（白底浅绿色）： ![类视图](../Images/587a04d74753b7cec007f03c1348fd60.png)

这是溢出标签部分的视图（深灰色上的黑色文本）： ![在此处输入图像描述](../Images/c9333c2cb68c3991d86343f3fad4dacc.png)

我的问题是“自定义颜色”对话框中要更改的项目列表（如图一所示）非常长，我很难将名称与 Visual Studio IDE 中的实际项目对应起来。

# magento - 自定义 Magento 扩展启用和禁用不起作用

> ID：13902676
> 
> 赞同：1
> 
> 时间：2012-12-16T15:18:04.197
> 
> 标签：magento, module, block, adminhtml

我只是想构建一个扩展，如果启用它，它将用我自己的模板文件覆盖原始的 cart/shipping.phtml 文件。

当我单击启用时，它不会启用扩展。如果我手动更改我的布局块主题，我知道扩展实际上可以工作 b/c。但是，我不想那样做。你能看看我的代码，让我知道我做错了什么吗？我假设这与我的块文件不正确有关。PS，如果您发现出了什么问题以及如何解决它，您是否还可以告诉我如何为扩展设置 CSS 文件以及是否已启用它？

这是我所有的文件:)

等/config.xml

```
<?xml version="1.0"?>
<config>    
<modules>
<Module_Name><version>1.0.0</version></Module_Name>
</modules>

<global>
        <blocks>
             <modulename>
                  <class>Module_Name_Block</class>
             </modulename>
        </blocks>

<helpers>
     <modulename>
      <class>Module_Name_Helper</class>
     </modulename>
</helpers>      
</global>

<modulename>
<settings>
<enable>1</enable>
</settings>
</modulename>

<frontend>
<layout>
    <updates>
        <modulename>
            <file><!-- shipping.xml --></file>
        </modulename>
    </updates>
</layout>
<routers>
    <modulename>
        <use>standard</use>
        <args>
            <module>Module_Name</module>
            <frontName>modulename</frontName>
        </args>
    </modulename>
</routers>  
</frontend>

<adminhtml>
<acl>
    <resources>
        <admin>
            <children>
                <system>
                    <children>
                        <config>
                            <children>
                                <modulename>
                                    <title>Shipping Extension</title>
                                </modulename>
                            </children>
                        </config>
                    </children>
                </system>
            </children>
        </admin>
    </resources>
</acl>
</adminhtml>

</config> 
```

等/system.xml

```
<?xml version="1.0"?>
<config>
<tabs>
<module translate="label">
    <label>Custom Extensions</label>
    <sort_order>100</sort_order>
</module>
</tabs>

<sections>  
        <modulename translate="label">
    <label>Shipping</label>
    <tab>module</tab>
    <frontend_type>text</frontend_type>
    <sort_order>1000</sort_order>
    <show_in_default>1</show_in_default>
    <show_in_website>1</show_in_website>
    <show_in_store>1</show_in_store>

        <groups>            

            <settings translate="label">
            <label>Settings</label>
            <frontend_type>text</frontend_type>
            <sort_order>1</sort_order>
            <show_in_default>1</show_in_default>
            <show_in_website>1</show_in_website>
            <show_in_store>1</show_in_store>

                <fields>
                    <enable translate="label">
                    <label>Enable</label>
                    <comment>
                    <![CDATA[Enable or Disable this extension.]]>
                    </comment>
                    <frontend_type>select</frontend_type>
                    <source_model>adminhtml/system_config_source_yesno</source_model>
                    <sort_order>1</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>1</show_in_website>
                    <show_in_store>1</show_in_store>                    
                    </enable>           
                </fields>

            </settings>
        </groups>
    </modulename >
</sections>     
</config> 
```

助手/Data.php

```
<?php
class Module_Name_Helper_Data extends Mage_Core_Helper_Abstract
{   

} 
```

块/购物车/Shipping.php

```
 <?php

 class Module_Name_Block_Cart_Shipping extends Mage_Checkout_Block_Cart_Shipping
{
protected function _beforeToHtml()
{
if(Mage::getStoreConfig('modulename/settings/enable'))

$this->setTemplate('module/name/shipping.phtml');

return $this;
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T15:58:42.110

[`Mage::getStoreConfigFlag()`为了检查布尔配置数据，使用[link]](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/Mage.php#L362)更合适。在这种情况下，有一个钩子可以纯粹在布局 XML 中执行此操作，*而无需*重写块类。

为您的模块配置自定义布局更新文件，并在该文件中简单地执行以下操作：

```
<?xml version="1.0"?>
<layout>
    <checkout_cart_index>
        <action method="setTemplate" block="checkout.cart.shipping" ifconfig="dropdownshipping/settings/enable">
            <template>beckin/dropdownshipping/drop_down_shipping.phtml</template>
        </action>
        <action method="addCss" block="head" ifconfig="dropdownshipping/settings/enable">
            <template>css/beckin/dropdownshipping.css</template>
        </action>
    </checkout_cart_index>
</layout> 
```

只要您的模块还配置`<depends />`了`Mage_Checkout`此布局，XML 更新就会合并到核心指令之后，从而覆盖核心模板。

采用您所采取的方法的唯一原因是在渲染之前彻底*强制*将模板设置为模块的模板 - 从而覆盖任何潜在的冲突布局 XML 指令 - 假设没有缓存命中，这种行为是……有争议的。

# java - 有没有办法在 get() set() 模型中不使用 get() 来获得只读功能？

> ID：13902682
> 
> 赞同：0
> 
> 时间：2012-12-16T15:18:40.170
> 
> 标签：java, oop, private

拥有设置模型：

```
public class exampleclass
{
    private Something something;

    public Something getSomething()
    {
        return something;
    }

    public void setSomething(Something st)
    {
         something = st;
    }
} 
```

我想做这样的事情：

```
public class exampleclass
{
    public Something something;

    public void setSomething(Something st)
    {
         something = st;
    }
} 
```

但是我想在课堂之外拥有具有***只读*功能的**“某物”var （但在自己的课堂中可重写）。关于如何为优化访问执行此操作的任何想法。（认为​​这将在 android 中使用，但使用纯 java only 框架（libgdx））

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T15:22:39.777

You can set thoose things in constructor and expose public final field:

```
public class ExampleClass
{
    public final Something something;

    public ExampleClass(Something st)
    {
         something = st;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:22:29.183

You could use the final keyword. The you can assign it once.

e.g

```
public class Exampleclass
{
    public final Something something;
    void Exampleclass(Something init) {
        this.something = init;
    }
} 
```

However the content of Something still could be changed, so you may consider returning a clone() of something. (see the class java.util.Date, you still could set the timestamp, in such cases only clone() or a copy constructor helps) . But if your code is not a public lib, then you can leav that getter with clone() away

```
public class Exampleclass
    {
        private Something something;
        void Exampleclass(Something init) {
            this.something = init;
        }
       void Something getSomething() {
            return something.clone();
        }

    } 
```

But that depends on Something. Another soultion is a `Factory Pattern`, such that only the `Factory` can create `Something`. Then there is no `public constructor` in `Something`. Only the factory can create it.

```
public class Something() {
   private int value;
   protectectd Something(int value) {
      this.value = value;
   }
   public tostring() {
      System.out.println("values = " + value);
   }
}
public class SomethingFactory() {
  protected static Someting createSomething(int value)  {
     return new Something(value);   
 }
} 
```

USage:

```
Something some = SomethingFactory.createSomething(3); 
```

But read more by search "java Deisgn Patterns Factory" or FactoryPattern

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-20T13:40:03.753

我猜你的问题是转义引用，如果你想在返回时保存你的对象，发送一份引用的副本，你可以使用 clone 方法发送克隆的对象。

```
public Something getSomething()
{
    return something.clone();
} 
```

这将返回对象浅拷贝，如果你想让深度克隆覆盖 clone() 方法希望这会有所帮助..

# php - 在 PHP 中为聊天创建客户端

> ID：13902684
> 
> 赞同：7
> 
> 时间：2012-12-16T15:18:47.927
> 
> 标签：php, html, ajax, json

我正在尝试创建一个`PHP`聊天，所以我`server.php`在终端上启动了服务器，它正在监听`client`连接：

```
<?php

function chat_leave( $sock, $chat_id = 0 )
{
    if( $chat_room_id[ $chat_id ] )
    {
        unset( $chat_room_id[ $chat_id ] ); 
        return true;
    }
    socket_close($sock);
    return false;
}

function client( $input )
{
    /*
    Simple php udp socket client
    */

    //Reduce errors
    error_reporting(~E_WARNING);

    $server = '127.0.0.1';
    $port = 9999;

    if(!($sock = socket_create(AF_INET, SOCK_DGRAM, 0)))
    {
        $errorcode = socket_last_error();
        $errormsg = socket_strerror($errorcode);

        die("Couldn't create socket: [$errorcode] $errormsg \n");
    }

    //Communication loop
    while(1)
    {

        //Send the message to the server
        if( ! socket_sendto($sock, $input , strlen($input) , 0 , $server , $port))
        {
            $errorcode = socket_last_error();
            $errormsg = socket_strerror($errorcode);

            die("Could not send data: [$errorcode] $errormsg \n");
        }

        //Now receive reply from server and print it
        if(socket_recv ( $sock , $reply , 2045 , MSG_WAITALL ) === FALSE)
        {
            $errorcode = socket_last_error();
            $errormsg = socket_strerror($errorcode);

            die("Could not receive data: [$errorcode] $errormsg \n");
        }

        return $reply;
    }
}
/*
 * chat_join
 * a new user joins the chat
 * @username: String
 * @password: String
 * 
 * add a new listener to the server
 * 
 */
function chat_join( $username = "", $password = "" )
{
    $users = array(
        "batman" => "batman123",
        "robin"  => "robin123",
        "joe"    => "joe123"
    );
    if( $users[$username] == $password )
    {
        return true;
    }

    return false;   
}
function main()
{
    $chat_room_id = array();

    $username = stripslashes( $_POST['username'] );
    $password = stripslashes( $_POST['password'] );
    $action   = stripslashes( $_POST['action'] );
    $port     = intval( $_POST['port'] );
    $domain   = stripslashes( $_POST['domain'] );
    $chat_id  = intval( $_POST['chat_room_id'] );

    if( strcmp( $action, "login" ) == 0 )
    {
        $status = chat_join( $username, $password );
        if( $status )
        {
            $chat_room_id[] = $chat_id;
            echo json_encode( $status );
        }
    }
    else if( strcmp( $action, "chat" ) == 0 )
    {
        $msg = stripslashes( $_POST['message'] );
        // take the message, send through the client
        $reply = client( $msg );
        echo json_encode( $reply );
    }
    else if( strcmp( $action, "logout") == 0 )
    {

    }
    else
    {
        echo json_encode( false );
    }
    return;
}

main();

?> 
```

该函数`client()`是我从`client.php`文件中获得的代码，当我在终端上执行时，它能够从`server.php`. 现在我想使用我的`main.php`文件，所以一旦用户登录，他就会向服务器发送消息，服务器会回复用户没有看到的消息。当我从两个不同的终端运行时`server.php`，`client.php`我可以发送和接收消息，但是我想使用`main.php`，将回复消息转换为一个`JSON`对象并发送回`html`页面，该页面将附加到一个`textarea`框。我的问题是：如何获取收到的回复`client.php`并将其发送回 html 页面？当我在终端上执行它时，我有：

```
Enter a message to send : hello
Reply : hello 
```

我用来`AJAX`在聊天中发送用户输入，所以我希望能够接收该消息，并将其发送到服务器，我在终端上启动服务器，然后将回复返回并转发到网页并将其附加到文本框区域。我怎样才能做到这一点？我应该从`client.php`服务开始`main.php`吗？还是应该使用该`client($input)`函数发送消息，然后返回它发送的内容？但是，我希望它`client`一直运行到用户注销，因为其他客户端可能会连接到聊天。我怎么能做到这一点对我来说有点模糊。中的代码与`client( $input )`中相同`client.php`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:22:55.330

在使用 PHP 和 jQuery 之前，我按照这些思路开发了一些东西。我寻求的解决方案是由于服务器设置的限制（我无法控制）。我使用 PHP 核心脚本创建了从消息窗口到消息提交框的整个页面布局。任何来到该页面的用户都会获得一个随机生成的用户，例如 user123234234，该用户是从他们进入聊天页面时根据 unix 时间戳生成的。

所有提交的消息都存储在一个 XML 文件中，并且每天都会创建一个新的 XML 文件。用户被保存在如下消息节点中，其中包含使用不同节点属性的每条消息的用户详细信息。

消息窗口每 5 秒刷新一次，使用 jquery AJAX 调用另一个 PHP 脚本，该脚本仅从用户进入聊天页面时读取 XML 当天 XML 文件。

```
<messages>
    <message user="user123456" ip="127.0.0.1" session="{users session ID here}" time="{unix timestamp}"><![CDATA[User message here]]></message>
</messages> 
```

它背后有更多的逻辑，但我发现它最容易开发和维护，我希望它能帮助你指明正确的方向。它适用于所有主流浏览器和 IE7+。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T11:06:02.853

抱歉跑题了，但如果可以的话，最好使用 XMPP 就绪的解决方案，比如带有 http-bind 模块的 ejabberd 服务器。当然，这样的解决方案有一些缺点，但缺点更大。看看这个解决方案，也许它会以低成本解决您的问题。

请参阅 [有关 XMPP 解决方案的简要说明的相关答案](https://stackoverflow.com/a/3894802/1461984)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T11:15:25.443

据我了解您的问题，您想从客户端向服务器发送一条消息，一旦这条消息到达服务器，它将回复所有客户端......我是对的？？？

我做一些聊天，比如使用 nodejs 和其他 javascripts 技术......并且必须说这里的一个很好的选择是使用网络套接字。意识到[浏览器支持是有限](http://en.wikipedia.org/wiki/WebSocket#Browser_support)的，但是由于您没有指定运行它需要哪些浏览器，我认为这是一个很好的方法。

检查此相关链接：

[如何在 JavaScript\HTML 中使用套接字？](https://stackoverflow.com/questions/1736382/how-to-use-sockets-in-javascript-html)

[http://socket.io/](http://socket.io/)

仅使用 php + js 的一种可能方法是创建一些函数并放入 setInterval 以每 12 秒向服务器发出请求。我在 2005 年使用这种方法进行了某种 asp 聊天。我必须说网络套接字要好得多。

我不知道这是否回答了你的问题......让我知道！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T01:56:34.780

我想我明白发生了什么。听起来你可能缺少一个听众？通常聊天程序有客户端 ajax 定期检查或“监听”特定用户的消息。

例如，如果有人在您的数据库（或您存储消息的任何地方）中为用户 x 留下了一条消息，那么您可能有一些 javascript 每秒调用一个 php 脚本来查看服务器上是否有用户 x 的任何消息. 如果有，您可以回显一条或多条消息，并通过您的 ajax 回调函数接收它们。

如果您熟悉 jQuery，请查看 $.get 方法：[http ://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

# json - 无法使用 jquery 从 json 响应中获取确切的字符串

> ID：13902685
> 
> 赞同：0
> 
> 时间：2012-12-16T15:18:52.420
> 
> 标签：json, jquery, jquery-plugins, struts2-jquery

我有一个表单，如果我提交它，那么我希望从我的 json 响应中在同一页面中打印成功消息。

我从 json 响应中获得了许多值，但我只想要在我的 java 操作中定义的名为“消息”的变量。

***格式化的json响应是这样的***

```
 `{"errmsg":null,"jsonModel":null,"message":"Succussfuyly completed the task","model":
        {"createdDate":null,"createrId":null,"id":null,"themeCaption":null,"themeName":null,
        "themeScreenshot":null,"updateId":null,"updatedDate":null},"oper":null,"theme":{"createdDate":null,
        "createrId":null,"id":null,"themeCaption":null,"themeName":null,"themeScreenshot":null,
        "updateId":null,"updatedDate":null},"themeScreenshot":null}` 
```

**从这个响应中，我只想在我的 jsp 页面中打印消息变量。从我下面的 jquery 代码中，所有值都打印在我的 jsp 页面中。但我只想要消息变量。**

索引.jsp

```
 <script type="text/javascript">
    $(document).ready( function() {
        $.subscribe('handleJsonResult', function(event,data) {
            $('#result').html("<div id='languagesList'> <s:property value="Message"/> </div>"+'' + data.Message + '');
            var list = $('#languagesList');
                    $.each(event.originalEvent.data, function(index, value) { 
                            list.append('<h1>'+value+'</h1>\n');
                    });
        });
    });    
        </script>  
        </head>
        <body>

     <img id="indicator" src="${pageContext.request.contextPath}/images/others/ajax-loader.gif" alt="Loading..." style="display:none"/>
    <s:form action="updatethemeimageform" method="post" enctype="multipart/form-data" id="remoteform"  theme="simple" > 
               <s:hidden value="%{#parameters.themeid}" name="themId"/> 
               <s:file name="themeScreenshot" label="Theme Screenshot" /> 
              <sj:a button="true" id="btnsid" buttonIcon="ui-icon-gear" dataType="json" indicator="indicator"  onSuccessTopics="handleJsonResult" 
              formIds="remoteform" targets="result"  >Submit This Form</sj:a> 
     </s:form>

         <sj:div id="result" >    
            Json Result will come here
         </sj:div>

                       `-----------
                         ---------------
                    private String Message;

           public String updateThemesImage(){ 
    setMessage("Succussfuyly completed the task"); 
    return SUCCESS;
              }
                   ------------
                    -----------
                   With getter & setters` 
```

从我上面的 jquery 函数我得到这样的输出 ![我上面的 jquery 函数的输出](../Images/74909269ab8cdcd01a44ff98edd66c26.png) 请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:00:03.927

但是，如果您只想要几个特定变量使用对象表示法来检索它们，则您的`each`循环可以正常工作：

```
$.subscribe('handleJsonResult', function(event, data) {
    $('#result').html("<div id='languagesList'> <s:property value="Message "/> </div>" + '' + data.Message + '');
    var list = $('#languagesList');

    var jsonData = event.originalEvent.data;
        /* example retrieving ID and message*/
    list.append('<h1>ID:' + jsonData.id + ', Message:' + jsonData.message +'</h1>\n');

}); 
```

# html - 如何在 jsf 中使用 CSS 在 h:body 标签中显示背景图像

> ID：13902691
> 
> 赞同：-1
> 
> 时间：2012-12-16T15:20:17.940
> 
> 标签：html, css, image, jsf, background-image

我有一个大小为 250 x 25 的图像

我想用 repeat-x 和 repeat-y 在页面背景中显示

但下面不工作

```
<h:body styel="background: url(/Images/logoback.jpg) repeat-x repeat- y > 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T15:22:51.343

Too many mistakes

*   `style` and not `styel`
*   Not closing `"` double quote
*   And if you want to repeat horizontally as well as vertically just use `repeat` after `background-image`..
*   Always use a semi-colon at end of each `propery: value;` Try this

# java - LinkedList 越界异常

> ID：13902692
> 
> 赞同：0
> 
> 时间：2012-12-16T15:20:39.007
> 
> 标签：java, linked-list, indexoutofboundsexception

我正在尝试实现 Tom Nichols 的低通滤波器。我的方法是这样的，但我一直得到一个越界异常，即使我已经提防它：

```
private float  filterValue(LinkedList<Float> listOfItems)
    {
        final float ALPHA = 0.2f;
        float filtered;

        int marker = listOfItems.size();

        if (listOfItems.size()>2)
             marker = listOfItems.size() - 1;

        float current = listOfItems.pollLast();
        float previous = listOfItems.get(marker); <<-- line 282

        filtered = (float) previous + ALPHA*(current - previous);

        return filtered;

    } 
```

错误日志：

```
12-16 15:54:51.148: E/AndroidRuntime(2055): FATAL EXCEPTION: main
12-16 15:54:51.148: E/AndroidRuntime(2055): java.lang.IndexOutOfBoundsException
12-16 15:54:51.148: E/AndroidRuntime(2055):     at      java.util.LinkedList.get(LinkedList.java:519)
 12-16 15:54:51.148: E/AndroidRuntime(2055):    at se.macke.velocitysensor.SensorActivity$MySensorEventListener.filterValue(SensorActivity.java:282)
 12-16 15:54:51.148: E/AndroidRuntime(2055):    at se.macke.velocitysensor.SensorActivity$MySensorEventListener.getAccelerometer(SensorActivity.java:249)
12-16 15:54:51.148: E/AndroidRuntime(2055):     at se.macke.velocitysensor.SensorActivity$MySensorEventListener.onSensorChanged(SensorActivity.java:231)
12-16 15:54:51.148: E/AndroidRuntime(2055):     at android.hardware.SystemSensorManager$ListenerDelegate$1.handleMessage(SystemSensorManager.java:204)
12-16 15:54:51.148: E/AndroidRuntime(2055):     at android.os.Handler.dispatchMessage(Handler.java:99) 
```

建议，请。

/米

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T15:23:27.903

```
if (listOfItems.size()<2)
    marker = listOfItems.size() - 1; 
```

如果`listOfItems.size()`为零，那么 var`marker`将是 -1 导致`IndexOutOfBoundsException`.

你应该把下限`> 0`。

```
if (listOfItems.size()>0 && listOfItems.size()<2)
    marker = listOfItems.size() - 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T15:23:10.737

Size 返回列表的实际大小，它不是零索引的。get 方法从使用从零开始的索引的列表中检索项目。守卫条件并不能阻止这个问题。

```
int marker = listOfItems.size();  //assume size = 3,
if (listOfItems.size()<2)   //condition is not met.
    marker = listOfItems.size() - 1;

float previous = listOfItems.get(marker); //attempts to access non-existent index of 3 
```

**使固定**

```
private float  filterValue(LinkedList<Float> listOfItems)
{
    final float ALPHA = 0.2f;
    float filtered;

    int marker = listOfItems.size();

    if (listOfItems.size() > 0){

        marker = listOfItems.size() - 1;

        float current = listOfItems.pollLast();
        float previous = listOfItems.get(marker); <<-- line 282

        filtered = (float) previous + ALPHA*(current - previous);
    }
    return filtered;
} 
```

# java - Java RuntimeException 无法序列化 UUID

> ID：13902693
> 
> 赞同：1
> 
> 时间：2012-12-16T15:20:43.167
> 
> 标签：java, android, runtime

**安卓端：**

```
public static int DeviceMonitor(UUID Employeeid)
    {

        SoapObject request = new SoapObject(SOAPNAMESPACE,SOAPLOGINMETHOD);
        request.addProperty("Employeeid",Employeeid);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);
        Log.d("Device insert out",""+ envelope.bodyOut.toString());
        try{HttpTransportSE httpTransport = new HttpTransportSE(SOAPURL);
            httpTransport.call(SOAPLOGINACTION, envelope);
            SoapObject response=(SoapObject)envelope.bodyIn;

            id=Integer.parseInt(response.getProperty(0).toString());

        }catch (Exception exception){
            Log.d("Device Insertion Service Exception:::","\tExceptionMessage:"+exception.toString());
            exception.printStackTrace();

        }   
        return id;} 
```

**WCF 方面：**

```
public int InsertEmployee(Guid Empid)
{
    int counter = 0;

    WrosDBEntities dbContext = new WrosDBEntities();

        EmployeeType emp = new EmployeeType();
        emp .SecurityID = Guid.NewGuid();
        emp .FK_EMPID = Empid;
        context.AddToDeviceSecurities(emp );
       context.SaveChanges();
counter++;        
return counter;
    }
    return 0;
} 
```

我有这个错误 Java RuntimeException cannot Serialize UUID of employee id when call service of wcf 请我需要帮助...该怎么办？

# iis - 在 IIS7 上使用 Slim PHP 得到 404 错误

> ID：13902696
> 
> 赞同：1
> 
> 时间：2012-12-16T15:21:06.073
> 
> 标签：iis, slim

我正在尝试将 Slim PHP 框架与 IIS7 一起使用。现在在某些路线上，我不断从 IIS 获得 404，我觉得这真的很令人困惑。这是我的索引 php：

```
 require 'slim/slim.php';
\Slim\Slim::registerAutoloader();
$app = new \Slim\Slim();

$app->notFound(function () use ($app) {
    echo("not found!");
});
$app->get("/books/:id", function($id){
    echo("hello book " . $id . "!");
});
$app->get("/test",function(){
    echo("testing");
});

$app->run(); 
```

在 IIS（运行 PHP 5.3）上，我设置了 url 重写以将所有请求发送到我的 index.php 文件并禁用目录浏览。这似乎工作正常，因为转到 localhost/books/123 会产生“hello book 123！”。但是当我去 localhost/test 时，我只是从 IIS 收到 404 错误！如果向该 url 添加一个斜杠，我的 slim notFound 处理程序将被触发，而不是我的路由处理程序。

如果我创建一个名为“test”的目录，它会停止 404 响应，但会触发 slim notFound 处理程序，而不是我期望的定义的路由处理程序。这看起来很奇怪，因为我禁用了目录浏览。

我知道我的瘦 notFound 处理程序工作正常，因为尝试 localhost/abc/xyz 会触发处理程序并按预期工作。

任何人都可以解释发生了什么以及为什么？我是否忽略了一些配置？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T14:55:15.270

事实证明，这种奇怪的行为是由我在 IIS 上的 url 重写规则引起的。嗬！

我将正则表达式规则 /.* 重写为我的 index.php 文件，而不是使用 .* 作为正则表达式。第一个斜杠没有包含在重写的 url 中，这导致了我描述的问题。将正则表达式更改为 .* 修复了所有问题。

如果其他人遇到这样的问题，请仔细检查您的 url 重写规则，即使它似乎工作正常！

我非常简单的 web.config 文件是：

```
<configuration>
<system.webServer>
    <rewrite>
        <rules>
            <rule name="slim catch all" enabled="true">
                <match url=".*" />
                <action type="Rewrite" url="/index.php" />
                <conditions>
                    <add input="{URL}" pattern="/content/.*" negate="true" />
                </conditions>
            </rule>
        </rules>
    </rewrite>
</system.webServer> 
```

注意：这是在 IIS 上使用 URL Rewrite 2.0 Index.php 是设置所有 Slim 路由的文件。条件是停止通过 Slim 路由对 /content/ 路径的请求 - 这使它成为存储图像、css 文件和 javascript 等内容的好地方，因为响应应该更快，因为它们不被 Slim 处理。

# arrays - Matlab：提取（拆分）数组元素的优雅方法

> ID：13902698
> 
> 赞同：3
> 
> 时间：2012-12-16T15:21:28.003
> 
> 标签：arrays, matlab, split, range

我必须从一个数组 (1D) 中拆分为 64 个块，第一个元素 (DC) 和另外 63 个元素 (AC) 在单独的数组中。

我在上面制作了 UGLY 代码：

```
%split DC from AC
n = 8^2;
DC = zigZagLinha(1 : n : end);
AC = blkproc(zigZagLinha, [1 n],'returnsTheOther63'); 
```

;

```
function array=returnsTheOther63(array64)
    array = array64(2:64);
end 
```

有没有更优雅的方法来做到这一点？这是为了学术目的，所以，越干净越好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T15:28:11.220

你可以简单地重塑它：

```
res = reshape( zigZagLinha, 64, [] ); % assuming num of elements can be divided by 64 exactly 
% otherwise some padding should be done...
DC = res(1 ,: ); % collect all first elements
AC = res( 2:end, : ); % AC elements 
```

# eclipse - 使用 Maven 配置文件构建两个不同的版本并从 Eclipse 中过滤

> ID：13902703
> 
> 赞同：0
> 
> 时间：2012-12-16T15:22:02.920
> 
> 标签：eclipse, spring, maven, continuous-integration, cloud-foundry

我正在尝试使用**Maven 配置文件**和**过滤**来生成给定 Web 存档（**war**）的**两个不同版本：**

 **1.  第一个用于**本地部署**到我在 localhost 上的本地机器
2.  第二个用于**远程部署**到 cloudfoundry

根据应用程序是部署到我的本地计算机还是部署到 cloudfoundry，有许多属性会有所不同。

当然，困难的一点是**我试图从 STS/Eclipse 完成所有这些工作，**并从 Eclipse 部署到我的本地 tomcat 和 cloudfoundry ......

任何人都可以提供建议，提示或建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T07:38:04.497

如果您使用 Spring 版本控制 3.1+ `<beans>`，那么 spring bean 配置 xml 中的“profile”属性将是最佳选择。看看这里的文档：http: [//docs.cloudfoundry.com/frameworks/java/spring/spring.html#using-spring-profiles-to-conditionalize-cloud-foundry-configuration](http://docs.cloudfoundry.com/frameworks/java/spring/spring.html#using-spring-profiles-to-conditionalize-cloud-foundry-configuration)

基本上你需要指定至少 2 个元素。一个用于本地属性 ( `profile="default"`)，另一个用于部署到 CF 时的属性。后者应定义为`<beans profile="cloud">`。在本地运行时，“云”中的属性将被忽略，“默认”中的属性将生效。推送到 CF 时，CF 会检测名为“cloud”的配置文件，更好的是注入 CF 自己提供的服务的相应数据源连接信息。您也可以在该文档中找到详细的 CF 指定属性。

有关配置文件属性的更多信息，请参阅此处的文档：http: [//blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/](http://blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T15:41:28.297

考虑为每个工件生成一个项目。因此，一个项目生成您的本地部署，一个项目生成您的 cloudfoundry 部署。

Overlays (http://maven.apache.org/plugins/maven-war-plugin/overlays.html) 是官方认可的在现有 WAR 文件中烘焙额外文件的方式，提供新的 WAR 工件。非常有用，但在开发过程中可能太慢而无法舒适。**

# android - 如何在 webview 中禁用与 html5 视频的交互或正确捕获它们的异常？

> ID：13902716
> 
> 赞同：10
> 
> 时间：2012-12-16T15:22:51.367
> 
> 标签：android, crash, nullpointerexception, android-webview, html5-video

我有带有 webview 的应用程序，我使用[ACRA](https://github.com/ACRA/acra)。我收到来自用户的崩溃报告，其中包含与`HTML5Video`.

**错误一：**

 *```
"java.lang.NullPointerException
    at android.webkit.HTML5VideoViewProxy$VideoPlayer.exitFullScreenVideo(HTML5VideoViewProxy.java:180)
    at android.webkit.HTML5VideoViewProxy.exitFullScreenVideo(HTML5VideoViewProxy.java:770)
    at android.webkit.WebViewClassic$PrivateHandler.handleMessage(WebViewClassic.java:7422)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5039)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    at dalvik.system.NativeStart.main(Native Method)" 
```

**错误2：**

 *```
"java.lang.NullPointerException
    at android.webkit.HTML5VideoFullscreen.switchProgressView(HTML5VideoFullscreen.java:455)
    at android.webkit.HTML5VideoView.enterFullscreenVideoState(HTML5VideoView.java:546)
    at android.webkit.HTML5VideoViewProxy$VideoPlayer.enterFullscreenVideo(HTML5VideoViewProxy.java:182)
    at android.webkit.HTML5VideoViewProxy.handleMessage(HTML5VideoViewProxy.java:479)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:155)
    at android.app.ActivityThread.main(ActivityThread.java:5485)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1028)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:795)
    at dalvik.system.NativeStart.main(Native Method)" 
```

如果需要，这是我的[DropBox](https://stackoverflow.com/a/4445105/1548085)日志：

对于错误 1： http: [//pastebin.com/w8G1UJvG](http://pastebin.com/w8G1UJvG)

似乎很有趣：

```
11-14 22:19:29.912 E/libEGL  (14744): call to OpenGL ES API with no current context (logged once per thread)
11-14 22:19:29.917 W/dalvikvm(14744): threadid=1: thread exiting with uncaught exception (group=0x40d4a2d0) 
```

对于错误 2： http: [//pastebin.com/8BEK1vAm](http://pastebin.com/8BEK1vAm)

似乎很有趣：

```
12-10 00:14:52.542 W/YourLogTag(24823): Couldn't find activity to view mimetype: video/x-m4v 
```

事实上，我什至不建议在我的 webview 中与 HTML5 视频进行交互。我想，用户从页面打开它们，也没有提供与之交互。此外，我认为尝试禁止用户与其他网页交互是一种不好的方式（对于我的应用程序可能真的很难）。而且，当崩溃对话框出现在他面前时，用户绝对不会对我的应用程序感到温暖......

**所以我想在我的 webview 中阻止用户与 HTML5 视频的交互，或者只是正确地捕获异常（似乎不是很好的方法）。最好的方法是什么？**

如果需要，这是我的 webview 设置：

```
webView.getSettings().setJavaScriptEnabled(false);
webView.getSettings().setUserAgentString("Some user agent"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:12:45.543

不幸的是，我无法提供直接的答案，但是，我确实找到了一个有趣的帖子，引发了很多讨论。 [WebView 和 HTML5 视频](https://stackoverflow.com/questions/3815090/webview-and-html5-video)

这是一个老问题，但您会注意到，随着时间的推移，发布了越来越新的答案，允许 HTML5 视频工作。希望阅读其中的一些答案能让你走上正确的轨道，并最终让它为你工作。

我还找到了一个开源项目，它为你解决了这个问题......但是它很旧并且不适用于 4.0 及更高版本。 [HTML5 网页视图](http://code.google.com/p/html5webview/)**

# assembly - 在 MASM 中更改屏幕颜色

> ID：13902719
> 
> 赞同：2
> 
> 时间：2012-12-16T15:23:19.653
> 
> 标签：assembly, masm

我是汇编语言的新手，我想要一种方法来更改我在互联网上搜索过的 MASM（控制台颜色）中的屏幕颜色，但我没有找到任何东西。我已经编写了更改文本颜色的代码这是更改文本颜色的函数

```
ChangeTextColor PROC
call crlf
mov edx,offset colormsg
call writestring
call crlf 
call readint
call clrscr
call setTextColor
ret
ChangeTextColorColor ENDP 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:31:10.450

看看这些链接：

*   [如何更改屏幕颜色模式](http://www.carrsoft.com/pb/help/howtochangescreencolormode.html)
*   [在 asm 中用颜色书写](http://www.osix.net/modules/article/?id=339)
*   [更改 cmd 背景颜色](https://stackoverflow.com/questions/8553330/asm-change-cmd-background-color)

阅读并尝试。再读一遍，然后再试一次。

希望我对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:09:25.383

通过使用 c++ 中的系统函数和相同的命令示例：“cls”清除屏幕，“color F5”将 cmd 颜色更改为白色等等。为了使用系统功能，如果您没有 masm32 软件包，您需要从这里下载[http://www.masm32.com/masmdl.htm](http://www.masm32.com/masmdl.htm)

这是完成这项工作的一段代码：

```
.model flat,stdcall
INCLUDE Irvine32.inc
include  \masm32\include\msvcrt.inc
includelib \masm32\lib\msvcrt.lib
system PROTO C, :PTR BYTE
.data

command BYTE "color A1",0
.code
main PROC

invoke system, ADDR command
exit
main ENDP

END main 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-19T15:19:17.190

我不熟悉那些 proc 名称，听起来像所有 Irvine 的东西。

这种类型的事情传统上会使用 int 10h 完成，但是我假设您正在谈论 Windows 控制台上的文本输出，这使得这是一个关于 Windows API 的问题。

你需要看看：

[GetStdHandle](https://msdn.microsoft.com/en-us/library/windows/desktop/ms683231%28v=vs.85%29.aspx)、[WriteConsole](https://msdn.microsoft.com/en-us/library/windows/desktop/ms687401%28v=vs.85%29.aspx)和[SetConsoleTextAttribute](https://msdn.microsoft.com/en-us/library/windows/desktop/ms686047%28v=vs.85%29.aspx)

# ocx - 运行 PSEXEC 使文件和目录相对于目标机器

> ID：13902723
> 
> 赞同：0
> 
> 时间：2012-12-16T15:23:41.343
> 
> 标签：ocx, psexec, regsvr32

好的，我在使用 psexec 在远程机器上注册 OCX 文件时遇到了问题，但我想我已经弄清楚我的问题出在哪里了。

基本上我有一个运行以下命令的脚本

PSEXEC \WORKSTATION1 REGSVR32 /S "\WORKSTATION1\C$\WINDOWS\SYSTEM32\CONTROL.OCX"

这成功注册了 CONTROL.OCX，我的应用程序适用于管理员。

如果非管理员登录，它不起作用。

经过对 StackOverflow 的数小时研究和帮助，我确定原因是在远程机器（WORKSTATION1）的注册表中，OCX 文件的位置存储在一个字符串中，其值为：

\WORKSTATION1\C$\WINDOWS\SYSTEM32\CONTROL.OCX

代替：

C:\WINDOWS\SYSTEM32\CONTROL.OCX

由于普通用户无权访问管理共享 C$，因此他们无法运行依赖于 OCX 的应用程序。

有没有办法在远程机器上使用 PSEXEC 运行 REGSVR 并让脚本将 C:\WINDOWS\SYSTEM32 视为远程机器上的目录，而不是我正在运行 PSEXEC 的机器？这样，OCX 将使用正确的路径名进行注册。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:25:15.063

`psexec`将其参数直接传递给远程程序。
通过`C:\WINDOWS\SYSTEM32\CONTROL.OCX`应该可以正常工作。

# javascript - 自定义验证器未在 ASP 中触发 JavaScript 函数（客户端）。网

> ID：13902725
> 
> 赞同：3
> 
> 时间：2012-12-16T15:24:11.367
> 
> 标签：javascript, asp.net, validation

```
<asp:CustomValidator ID="CustomValidator1" runat="server" 
    ErrorMessage="Date must be set" ClientValidationFunction="ValidateDate" 
    ControlToValidate="DropDownList1" Display="Dynamic" class="errorMessage">
</asp:CustomValidator> 
```

这是自定义验证器，调用客户端函数`ValidateDate`。

```
function ValidateDate(sender, args) {
    args.isValid = false;
} 
```

我在单独的 .js 文件和 .aspx 文件中都编写了这个函数，但它不起作用。

当然验证会更大，我只是做一个测试。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T15:43:52.983

您必须在验证器上设置`ValidateEmptyText="True|False"`属性以验证空文本。[MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.validateemptytext.aspx)

# tomcat - NGINX 具有反向代理的多个服务器块

> ID：13902727
> 
> 赞同：4
> 
> 时间：2012-12-16T15:24:20.877
> 
> 标签：tomcat, nginx

我在 Windows 上运行 nginx+PHP+MySQL 和 tomcat+postresql（我知道它不是很好地利用资源，我只需要它们全部用于某些项目）。

我需要一些关于 nginx 配置的帮助。我最终计划在端口 80 上运行 nginx，其中 wiki.example.com 和 site.example.com 是相同的 IP。但我想将 site.example.com 的请求转发到 localhost:8080 的 tomcat，并且 wiki.example.com 的请求将由 nginx 提供服务。

我知道我的问题出在配置中，只是因为我可以在控制台中看到错误；即使它们位于不同的服务器块中，我也无法设置两个“位置/”设置。这是我的配置，有人知道如何解决吗？

```
http {
include       mime.types;
default_type  application/octet-stream;

server {
listen 8080 default_server;
server_name _;
server_name_in_redirect off;
root  www/html;
}

server {
    listen       wiki.example.com:8080;
    server_name  wiki.example.com;

    location / {
        #proxy_pass http://localhost:80/;
        #proxy_set_header  Host $http_host;
        root   www/wiki;
        index  index.html index.htm index.php;
    }

    location ~ .php$ {
        root           www/wiki;
        fastcgi_pass   127.0.0.1:9000;
        fastcgi_index  index.php;
        fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include        fastcgi_params;
        index index.php;
    }

    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   html;
    }

server {
    listen site.example.com:8080;
    server_name site.example.com;
    root www/html;

    location / {
        proxy_pass http://localhost:80/;
        proxy_set_header  Host $http_host;
        root   www/html;
        index  index.html index.htm index.php;
    }

    }

} 
```

编辑：

非常感谢您的帮助。我已经按照你的指示编辑了配置，它大部分都有效！！:) 导航到 site.example.com 将加载站点（由 nginx 代理并通过 tomcat 提供服务）

**但是**导航到 wiki.example.com 会产生 nginx 404 消息，但是导航到 wiki.example.com/index.php?title=Main_Page 会正常加载 mediawiki。所以似乎 wiki 服务器块的默认设置被搞砸了。

`http://pastebin.com/znT8q6WQ`

这看起来像错误的部分吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T06:48:10.817

根据您对您正在尝试做的事情的描述，我认为您的 nginx.conf 应该如下所示：

```
http {
    include       mime.types;
    default_type  application/octet-stream;

    server {
        listen 80;
        server_name site.example.com;

        # pass all requests to service listening on port 8080

        location / {
            include /usr/local/nginx/conf/proxy.conf;
            proxy_pass http://localhost:8080;
            proxy_redirect http://localhost:8080/ http://$host;
        }
    }

    server {
        listen 80;
        server_name wiki.example.com;
        root /path/to/your/www/wiki;
        index index.html index.htm index.php;

        location / {
            try_files $uri @backend;
        }

        location @backend {
            rewrite ^ /index.php?title=$request_uri last;
        }

        # proxy to php-fpm listening on port 9000

        location ~ \.php$ {
            try_files $uri =404;
            fastcgi_pass 127.0.0.1:9000;
            fastcgi_index index.php;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            include fastcgi_params;
        }

        # your other rules here...

        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root html;
        }

    }

    server {
        listen 80 default_server;
        server_name _;
        access_log off;
        return 301 $scheme://site.example.com$request_uri;
    }
} 
```

在第一个服务器块中，nginx 将在端口 80 上侦听与“site.example.com”匹配的请求，并代理到您在 8080 (tomcat) 上运行的任何服务。

在第二个服务器块中，nginx 将在端口 80 上侦听与“wiki.example.com”匹配的请求，并使用 php（或可能是 php-fpm）侦听端口 9000 来处理它们。

最后一个服务器块是您的默认设置。它还在端口 80 上进行侦听，并作为一个包罗万象的东西——任何与“site.example.com”或“wiki.example.com”不匹配的东西都会在这里结束，在示例中它只是重定向到“site.example。 com。”

**附加信息**

代理后端服务的位置块包含一个包含语句，该语句在 nginx conf 目录 (/usr/local/nginx/conf) 中加载“proxy.conf”。这是我用来指定代理参数的示例“proxy.conf”配置集——如果您不使用单独的配置文件，您可以内联指定这些配置：

```
proxy_redirect off;
proxy_set_header Host $host;
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
client_max_body_size 32m;
client_body_buffer_size 128k;
proxy_connect_timeout 90;
proxy_send_timeout 90;
proxy_read_timeout 90;
proxy_buffers 32 4k; 
```

编辑：

更新了“wiki.example.com”的服务器块代码示例。为了清楚起见，我建议您将**根**目录指定为绝对路径，以便您和 nginx 知道在文件系统上的确切位置。此外，在更新的代码中，**@backend**块将重定向并将 nginx 找不到匹配项的所有请求传递给媒体 wiki index.php 文件以进行处理。这也允许您使用干净的 URL，例如“wiki.example.com/Main_Page”（这将被重写为“wiki.example.com/index.php?title=Main_Page”）。

# android - 使用可用的 Web 应用程序创建 ContextMenu

> ID：13902733
> 
> 赞同：0
> 
> 时间：2012-12-16T15:24:45.750
> 
> 标签：android, android-intent, android-contextmenu

我正在开发一个需要打开网络浏览器才能显示网页的应用程序。另外，用户可以使用我自己的应用程序打开，所以我需要显示所有可用的网络浏览器，然后处理用户选择的选项。到目前为止，我打开了上下文菜单，但我不知道如何用我需要的项目填充它。

```
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    Log.d("WebOff","Creating ContextMenu");
    menu.setHeaderTitle("MyTitle");
    menu.setHeaderIcon(R.drawable.MyIcon);
    menu.add("MyItem");
} 
```

我想要实现的看起来像[这样](http://www.docscannerapp.com/wp-content/uploads/2010/10/chooseSendApp.png)，但是在设备和我的应用程序中安装了浏览器。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:46:29.350

尝试这个

```
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    String url = "http://www.google.com";
    Intent i = new Intent(Intent.ACTION_VIEW);
    i.setData(Uri.parse(url));
    ComponentName caller = new ComponentName(Activity.this, Activity.class);

    menu.addIntentOptions(0, 0, 0,caller, null, i, Menu.FLAG_APPEND_TO_GROUP,null) ;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:43:27.273

您指向的图像不是上下文菜单。相反，它是使用您想要使用的（例如，在您的网页 URL 上）调用`startActivity()`的`Intent`结果`ACTION_VIEW`。

通常，用户只有一个浏览器，因此`startActivity()`不会显示如图所示的选择器对话框。如果用户确实有多个浏览器，*并且*用户没有选择默认浏览器，通常会出现选择器对话框。

您声明“我需要显示所有可用的网络浏览器”。请记住，如果用户已经选择了默认浏览器，他们可能不喜欢你强迫他们做出另一个选择。话虽如此，您可以调用`startActivity(Intent.createChooser(viewIntent, "some caption"))`，您通常使用的`viewIntent`对象在哪里，并且是您希望在对话框顶部显示的内容（其中图像有写得不好的“选择想要文件/文件的应用程序”被发送”）。`Intent``startActivity()``"some caption"`

您进一步声明您想要“然后处理用户选择的选项”。使用标准选择器机制这是不可能的——Android 会为您处理选择。如果您*确实*需要“处理用户选择的选项”，您将需要创建自己的选择器对话框，使用`PackageManager`并`queryIntentActivities()`获取数据以填充该对话框。

# android - Bootstrap - 无法单击移动设备上的下拉子菜单项，并且第一次单击不会触发导航折叠

> ID：13902734
> 
> 赞同：16
> 
> 时间：2012-12-16T15:25:08.403
> 
> 标签：android, iphone, drop-down-menu, twitter-bootstrap

我在移动设备上的下拉菜单项遇到了两个问题。具体来说：

1.  第一次单击 btn-navbar 时未显示我的导航折叠，而仅在 iPhone 上显示。
2.  虽然我可以切换下拉菜单，但我无法单击移动设备上的任何下拉菜单项。

我的页面在 W3 Validator 上有效，并且我已将 .nav-collapse 和 .collapse 类添加到我的导航栏。此外，在我的笔记本电脑上调整浏览器窗口大小时，一切正常。

您可以在此处查看实时网页：http: [//hartmandashboard.com/](http://hartmandashboard.com/)

有没有人见过这个问题？有人愿意提供潜在的解决方案吗？我会很感激任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-07-25T08:21:42.327

是的，我以前见过这个，我也看到这个问题也在 github 上。我不记得我在哪里找到了这个，但是有人说这是关于将这些元素设置为的问题，`position: absolute;`将它们重新设置为静态可以解决它。

那么你为什么不继续在你的自定义 CSS 上试试这个：

**CSS**

```
.dropdown-backdrop {
  position: static;
} 
```

让我知道我们是否在同一页面上，这解决了您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T10:24:23.027

这最初是一个引导问题。在此处查看修复：[https ://github.com/twbs/bootstrap/issues/9543](https://github.com/twbs/bootstrap/issues/9543)

# java - 关于第一个 init() 和第二个 init()

> ID：13902735
> 
> 赞同：0
> 
> 时间：2012-12-16T15:25:10.473
> 
> 标签：java, jakarta-ee, servlets

部署项目后，当客户端第一次向 TestServlet 发送请求时，服务器会创建 testServlet 对象，然后调用第一个 init() 方法（init(ServletConfig config)）。然后JVM检查TestServlet中的第一个init（）方法，因为它不可用然后它检查超类HttpServlet也有第一个init方法不可用然后JVM检查HttpServlet的超类，即GenericServlet类第一个init（）可用然后 JVM 执行它并调用第二个 init()，因为第二个 init() 在 TestServlet 中直接可用，然后 JVM 执行它。

Q.关于上面的段落，我想知道 GenericServlet 的第一个 init() 如何调用 TestServlet 类的第二个 init()，因为在 GenericServlet 中，第一个 init() 内部调用了空的 init()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:37:19.997

这就是多态性的基本原理。由于`init()`是一个可重写的方法，并且由于 servlet 是 TestServlet 的一个实例，它重写了 init() 方法，因此`TestServlet`使用了该方法的实现。

就像在下面的例子中一样：

```
public class Animal {
    public void saySomething() {
        // do nothing
    }

    public void saySomethingElse() {
        saySomething();
    }
}

public class Dog extends Animal {
    @Override
    public void saySomething() {
        System.out.println("bark!");
    }
}

public class Main {
    public static void main(String[] args) {
        Animal animal = new Dog();
        animal.saySomething(); // bark!, because the animal is a dog

        animal.saySomethingElse(); // still bark!, because the animal is a dog
                                   // and saySomethingElse() calls the animal's
                                   // polymorphic saySomething() method.
    }
} 
```

# c++ - 为什么 std::map 没有 const 访问器？

> ID：13902742
> 
> 赞同：70
> 
> 时间：2012-12-16T15:25:51.700
> 
> 标签：c++, c++11, std

std::map 上 [] 运算符的声明如下：

```
T& operator[] ( const key_type& x ); 
```

不是这个有原因吗？

```
T& operator[] ( const key_type& x );
const T& operator[] const ( const key_type& x ); 
```

因为当您需要在 const 方法中访问成员映射时，这将非常有用。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-12-16T15:35:43.187

从 C++11 开始`std::map::at`，提供 const 和非常量访问。

相反，如果元素不在地图中`operator[]`，它将引发异常。`std::out_of_range`

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2012-12-16T15:27:54.650

`operator[]`in a map 返回指定键的值，如果该键不存在，则为该键创建一个新的值初始化元素，因此这是不可能的**。**

如果`operator[]`会`const`过载，则添加该元素将不起作用。

这就回答了这个问题。备择方案：

对于**C++03** - 您可以使用迭代器（这些是`const`与非`const`耦合的`find`）。在**C++11**中，您可以使用该`at`方法。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-12-16T15:36:50.067

这些答案是正确的，因为`operator[]`如果键不存在，则具有添加键的语义，但我想添加另一个观点：

注意如何`operator[]`返回一个`T&`. 也就是说，它返回对与`value`关联的 的引用`key`。但是如果里面没有`key`呢`map`？我们应该返回什么？没有“空引用”之类的东西，抛出异常会很烦人。

This would be one good reason for no `operator[] const`. What would you return to the user if you couldn't add anything to the `map` (because the operator is `const`), but they are looking for an item that doesn't exist? A good solution to this problem is to not have the `operator[] const`.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-16T15:28:14.253

如果 (non- `const`)`operator[]`不存在，则创建密钥。

该`const`运算符的版本（如果存在）必须具有不同的语义，因为它无法添加新键。

我相信您会同意，具有`const`和`const`不具有显着不同语义的重载将是一堆蠕虫。因此没有`const`提供版本。

但是有一个 const`find()`成员，因此您可以在代码中使用它。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-16T15:27:30.770

因为 的语义`operator[]`是如果它不存在则添加键。

# xml - 使用批处理提取 XML 标记值（基于标志）

> ID：13902744
> 
> 赞同：0
> 
> 时间：2012-12-16T15:26:26.433
> 
> 标签：xml, batch-file, xml-parsing

我是编写批处理脚本的初学者，非常感谢您对此的帮助。

下面是 xml，我需要将标志为“on”的所有名称提取到 txt 文件中。还有其他几个类别标签实例。

```
<Head>
   <Category
      name="RIVERTD"
      flag="on"
      location="SG002">
    </Category>
   <Category
      name="BRETRED"
      flag="on"
      location="IT213">
    </Category>
   <Category
      name="AMERAND"
      flag="off"
      location="US212">
   </Category>
</Head> 
```

所以，我正在寻找的输出如下

```
RIVERTD
BRETRED 
```

我尝试使用下面的代码

```
@echo off
setlocal disableDelayedExpansion
set input="CP.xml"
set output="Names.txt"

if exist %output% del %output%
for /f "delims=" %%A in ('findstr /n /c:"name=" %input%') do (
  set "ln=%%A"
  setlocal enableDelayedExpansion
  call :parseLine
  endlocal
)
type %output%
exit /b

:parseLine
set "ln2=!ln:*name=!"
if "!ln2!"=="!ln!" exit /b
for /f tokens^=2^ delims^=^" %%B in ("!ln2!") do (
  setlocal disableDelayedExpansion
  >>%output% echo(%%B
  endlocal
)
set "ln=!ln2!"
goto :parseLine 
```

这给了我结果

```
RIVERTD
BRETRED
AMERAND 
```

但是，此代码不会根据标志过滤名称。我是初学者。请帮助添加基于标志的过滤器。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-02-07T14:52:15.510

这是[**xpath.bat -small**](https://github.com/npocmaka/batch.scripts/blob/master/hybrids/jscript/xpath.bat) 脚本，它允许您通过 xpath 表达式获取 xml 值，而无需使用外部二进制文件：

```
call xpath.bat "CP.xml" "//Category[0]/@name"
call xpath.bat "CP.xml" "//Category[1]/@name" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T01:21:28.063

这应该为你做。

```
@echo off
setlocal enabledelayedexpansion

set "Name="
set "Flag="
set "Output=Names.txt"

for /f "usebackq delims=" %%L in (`type "CP.xml"`) do (
    for /f "usebackq tokens=1,2* delims=    =<> " %%A in ('%%L') do (
        if /i "%%~A"=="name" set "Name=%%~B"
        if /i "%%~A"=="flag" set "Flag=%%~B"
        if /i "%%~A"=="/category" (
            if /i "!Flag!"=="on" echo.!Name!>>%Output%
            set "Name="
            set "Flag="
        )
    )
)

endlocal
pause 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T02:22:19.343

这个问题可以用一个非常有趣的技巧来解决！：

```
@echo off
setlocal EnableDelayedExpansion
(for /F "tokens=1,2 delims== " %%a in (CP.xml) do (
   if "%%~b" neq "" set %%a=%%~b
   if /I "!flag!" equ "on" echo !name!& set flag=
)) > Names.txt 
```

**编辑**：*添加了一些解释*

该文件有几行，但 OP 会查找具有赋值形式的行，如下所示：

```
 name="RIVERTD"
  flag="on"

  name="BRETRED"
  flag="on"

  name="AMERAND"
  flag="off" 
```

我的程序不检查任何名称，而是执行等号后带有值的任何行作为赋值。这样，当我的程序处理前几行时，结果相当于执行了以下命令：

```
 set name="RIVERTD"
  set flag="on"

  set name="BRETRED"
  set flag="on"

  set name="AMERAND"
  set flag="off" 
```

之后，只需检查 FLAG 变量的值是否为“on”；如果是这样，则 NAME 变量具有目标值，因为它是在前一行中分配的。

安东尼奥

# json - WinRT：读取和反序列化大量文件需要太多时间

> ID：13902746
> 
> 赞同：0
> 
> 时间：2012-12-16T15:26:38.043
> 
> 标签：json, optimization, io, windows-runtime

我有一个 Windows Store 应用程序，它管理对象集合并将它们存储在应用程序本地文件夹中。这些对象使用 JSON 在文件系统上进行序列化。由于我需要能够单独编辑和保留这些项目，因此我为每个对象选择了单独的文件，而不是一个大文件。对象按照以下模式存储：

```
Local Folder
|
--- db
    |
    --- AB283376-7057-46B4-8B91-C32E663EC964
    |   |
    |   --- AB283376-7057-46B4-8B91-C32E663EC964.json
    |   --- AB283376-7057-46B4-8B91-C32E663EC964.jpg
    |
    --- B506EFC5-E853-45E6-BA32-64193BB49ACD
    |   |
    |   --- B506EFC5-E853-45E6-BA32-64193BB49ACD.json
    |   --- B506EFC5-E853-45E6-BA32-64193BB49ACD.jpg
    |
    ... 
```

每个对象都有其文件夹节点，其中包含 JSON 序列化对象和其他最终资源。

当我进行一些写作、阅读、删除测试时，一切都很好。当我试图在应用程序启动时加载大量对象时，它变得复杂了。我估计item one的最大数量会存储到10000。所以我写了10000个条目然后尝试加载它......超过3分钟到应用程序完成操作，这当然是不可接受的。

所以我的问题是，在我为读取和反序列化对象（下面的代码）编写的代码中可以优化什么？有没有办法实现分页系统，以便在我的 WinRT 应用程序中动态加载？就 IO/CPU 而言，我的存储方法（上述模式）是否过于繁重？我在 WinRT 中遗漏了什么吗？

```
public async Task<IEnumerable<Release>> GetReleases()
{
    List<Release> items = new List<Release>();

    var dbFolder = await ApplicationData.Current.LocalFolder.CreateFolderAsync(dbName, CreationCollisionOption.OpenIfExists);

    foreach (var releaseFolder in await dbFolder.GetFoldersAsync())
    {
        var releaseFile = await releaseFolder.GetFileAsync(releaseFolder.DisplayName + ".json");
        var stream = await releaseFile.OpenAsync(FileAccessMode.Read);

        using (var inStream = stream.GetInputStreamAt(0))
        {
            DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(Release));
            Release release = (Release)serializer.ReadObject(inStream.AsStreamForRead());
            items.Add(release);
        }

        stream.Dispose();
    }

    return items;
} 
```

谢谢你的帮助。

注意：我已经看过 SQLite，我不需要这么复杂的系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T22:16:19.447

据说 JSON.NET 比内置的东西更好。如果您不通过网络发送数据，那么最快的方法是进行二进制序列化而不是 JSON 或 XML。最后 - 考虑一下您是否真的需要在应用程序启动时加载所有数据。将您的数据序列化为二进制记录列表并创建一个索引，以便您快速跳转到实际需要使用的记录范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T06:02:44.673

正如 Filip 已经提到的，您可能不需要在启动时加载所有数据。即使您真的想在第一页显示所有项目（一次向用户显示 10,000 个项目对我来说听起来不是一个好主意），您也不需要让它们的所有属性都可用：通常只有一个其中几个显示在列表中，当用户导航到单个项目详细信息时，您需要其余的。您可以有一个单独的“索引”文件，其中仅包含列表所需的数据。这确实意味着重复，但它会帮助您提高性能。

尽管您已经提到，您不需要 SQLite，因为它对您的需求来说太复杂了，您真的应该仔细研究一下。它旨在有效地处理结构化数据，例如您的数据。我很确定如果你切换到它，性能会更好，你的代码最终可能会更简单。试试看。

# javascript - 在 KineticJS 中检测舞台上的点击而不是形状上的点击

> ID：13902747
> 
> 赞同：4
> 
> 时间：2012-12-16T15:26:47.577
> 
> 标签：javascript, jquery, html, canvas, kineticjs

在 KineticJS 中，如何检测`Click`在对象/形状之外发生点击的事件？

我正在尝试将`Rect`其比例更改`2`为用户单击它时的比例，并返回到`1`用户单击其外部任何位置时的比例。

**JSfiddle：http:** [//jsfiddle.net/ABTAD/8/](http://jsfiddle.net/ABTAD/8/)

设法检测到舞台上的点击，但点击`Rect`也会触发点击处理程序！！！并且以某种方式`.setScale(1)`不做任何事情，同时`console.log`打印出一些东西。`Rect`当在而不是空舞台上单击时，如何防止单击处理程序触发？

**检测舞台点击的JS代码**

```
window.stage.getContainer().addEventListener('click', function(e) {
    $.each(window.layer.get('.box'), function(index, box) {
       box.setScale(1);
       console.log('clicked on stage');
    });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T15:45:22.660

您可以使用 stage.getContent() 访问舞台内容包装器。从那里，您可以添加这样的事件处理程序：

stage.getContent().addEventListener('click', ...); // 普通的javascript

或者

$(stage.getContent()).on('click', ...); // jQuery

# javascript - requirejs vs google javascript 闭包依赖管理

> ID：13902755
> 
> 赞同：7
> 
> 时间：2012-12-16T15:27:33.563
> 
> 标签：javascript, requirejs, dependency-management, google-closure

我一直在为各种组件使用 google javascript 闭包库，并且我还使用了它的依赖管理。我很好奇这与使用 requirejs 进行依赖管理相比如何。具体来说，是否有特定的理由选择其中一个？

如果我使用的是 google 闭包库，那么使用 requirejs 管理依赖项与使用闭包依赖项管理是否有合理的理由？是否有要求js遵循闭包不遵循的标准？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T17:59:09.080

闭包库依赖管理旨在提供文件排序以解决依赖关系，并在编译期间由闭包编译器删除（根据需要重写以根据需要提供命名空间，实际上）。虽然编译器对 AMD 模块有一些实验性的编译时支持，但它们仍然需要在类型检查方面做一些工作，特别是要完全替代 Closure 的 goog.require。即使编译器支持足够，goog.require 也不需要完整解析 JS 来进行依赖管理（我对 RequireJS 不够熟悉，不知道是否是这种情况），因此对于具有许多可选的大型项目文件 goog.require 目前效率更高。

# mysql - 全文 MATCH() AGAINST() 分数的计算方式？根据表格还是仅根据给定字段？

> ID：13902757
> 
> 赞同：1
> 
> 时间：2012-12-16T15:27:41.930
> 
> 标签：mysql

我在任何地方都找不到我的问题的答案。我做了一项研究，但没有任何运气。

假设我们查询以下语句：

```
SELECT `id`, MATCH(`name`,`content`) AGAINST ('some keywords') AS `score` FROM `pages` WHERE MATCH(`name`,`content`) AGAINST ('some keywords') 
```

MySQL会根据整个表给我一个分数`pages`，它会扫描那里的所有其他记录吗？或者它会给我一个分数，只是考虑在我们的例子中提供列（`name`和`content`）的行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T16:32:53.697

是的，它也在其他行中使用关键字频率。取自[MySQL 全文搜索](http://dev.mysql.com/doc/internals/en/full-text-search.html)，公式为：

> w = (log(dtf)+1)/sumdtf * U/(1+0.0115*U) * log((N-nf)/nf)
> 
> 在哪里：
> 
> dtf 是该词条在文档中出现的次数 sumdtf 是同一文档中所有词条的 (log(dtf)+1) 之和 U
> 是文档中唯一词条的数量 N 是所有词条的总数文档 nf 是包含该术语的文档数

# c# - 如何删除为正常 I/O 打开的文件？

> ID：13902763
> 
> 赞同：1
> 
> 时间：2012-12-16T15:28:14.010
> 
> 标签：c#, stream

如何删除为正常 I/O 打开的文件？

我想解密文件。如果代码不正确，那么我需要删除输出文件。

我不能使用`File.Delete()`，因为：

**Windows NT 4.0 平台 注意：删除不会删除为正常 I/O 打开的文件或内存映射的文件。**

```
try
{
    FileStream fsIn = new FileStream(fileIn, FileMode.Open, FileAccess.Read, FileShare.Delete);
    FileStream fsOut = new FileStream(fileOut, FileMode.OpenOrCreate, FileAccess.Write, FileShare.Delete);

    PasswordDeriveBytes pdb = new PasswordDeriveBytes(Password, new byte[] {0x49, 0x76, 0x61, 0x6e, 0x20, 0x4d, 0x65, 0x64, 0x76, 0x65, 0x64, 0x65, 0x76});
    Rijndael alg = Rijndael.Create();

    alg.Key = pdb.GetBytes(32);
    alg.IV = pdb.GetBytes(16);

    CryptoStream cs = new CryptoStream(fsOut, alg.CreateDecryptor(), CryptoStreamMode.Write);

    int bufferLen = 4096;
    byte[] buffer = new byte[bufferLen];
    int bytesRead;

    do
    {
        bytesRead = fsIn.Read(buffer, 0, bufferLen);
        cs.Write(buffer, 0, bytesRead);
    } while (bytesRead != 0);

    cs.Close();
    fsIn.Close();
    return true;
}
catch(Exception)
{
    MessageBox.Show("Incorrect code :(");
    return false;
} 
```

有人知道我如何删除输出文件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T15:31:01.793

答案已经在你的问题中了。

> 删除不会删除为正常 I/O 打开的文件。

所以，关闭文件，然后你可以删除它。

您还应该将文件流包装在`using`块中，以确保及时和可预测的方式整理非托管资源。像这样：

```
using (FileStream fsIn = new FileStream(...))
{
    ....
} 
```

这是确保文件在完成后关闭的最佳方式。您可以在阻止`File.Delete`后拨打电话。`using`

最后，我很确定您不想使用`FileShare.Delete`. 例如，在您的输入文件上，这将允许其他进程在您对其进行操作时删除该文件。你想要`FileShare.Read`在你正在阅读`FileShare.None`的文件上，在你正在写的文件上。

# components - 在组件实体系统方法中处理冲突

> ID：13902766
> 
> 赞同：0
> 
> 时间：2012-12-16T15:28:46.207
> 
> 标签：components, entity, system

我可能想多了，我会提前解决这个问题。但是我似乎找不到一个简单的碰撞方法的好例子，它可以在实体遇到某物时改变它的速度。最初想到的是有 3 个系统，它们按顺序运行：

1.  运动系统（根据其速度组件更新实体的位置组件）
2.  InputSystem（根据鼠标/键盘的输入更新实体的速度组件）
3.  CollisionSystem（根据实体是否与另一个实体相交来更改实体的速度分量）

但是这里不是有一个catch-22吗？如果我已经与另一个实体相撞，现在我无法逃脱，因为碰撞系统一直在扼杀我的速度。还是我需要让碰撞系统了解速度方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:46:01.583

我认为这将取决于碰撞的弹性，看看这个：[Elastic Collision Reponse in a Game](http://www.physicsforums.com/showthread.php?t=451345)。

也许这篇文章也可以帮助你：[https](https://gamedev.stackexchange.com/questions/27508/how-will-the-velocities-of-two-moving-objects-change-once-they-collide) ://gamedev.stackexchange.com/ 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:26:42.573

一个简单的碰撞系统需要知道您的对象进入的角度并将其发送到相反的方向。这意味着将速度矢量旋转 180°，例如从 0,1 到 0,-1。为避免再次碰撞，您需要确保它在下一个刻度之前“跳出”碰撞范围，以便将新速度应用于对象的位置（p2 = p1*velocity*tick）。

# android - 当我单击应该打开另一个屏幕的按钮时，出现错误“应用程序已意外停止。请重试”

> ID：13902767
> 
> 赞同：-2
> 
> 时间：2012-12-16T15:28:49.117
> 
> 标签：android, runtime-error

当我单击应该打开另一个屏幕的按钮时，我收到错误“应用程序已意外停止。请重试”。下面是java文件以及xml文件。java文件有一个按钮的代码，点击它我得到了错误。我尝试在清单中同时使用“NewNote”和“NEWNOTE”。在这两种情况下都会出错。

```
 package com.compilationofnotes.pragya;

        import android.app.Activity;
        import android.content.Intent;
        import android.os.Bundle;
        import android.view.View;
        import android.widget.Button;

        public class NotesView extends Activity {
            /** Called when the activity is first created. */

            Button bt;

            @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.main);
                bt=(Button)findViewById(R.id.buttonaddnote);
                bt.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View arg0) {
                        // TODO Auto-generated method stub

                        Intent addnote = new Intent("com.compilationofnotes.pragya.NewNote");
                        startActivity(addnote);
                        }

                });
            }
        }

package com.compilationofnotes.pragya;

import android.content.ContentValues;
import android.content.Context;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class SqlDatabase {
    public static final String KEY_ROWID = "_id";
    public static final String KEY_NAME = "notes_name";
    public static final String KEY_CONTENT = "notes_content";
    public static final String KEY_TIME = "notes_time";

    private static final String DATABASE_NAME = "Database Of Notes";
    private static final String DATABASE_TABLE = "List of Notes";
    private static final int DATABASE_VERSION = 1;

    private DbHelper ourHelper;
    private final Context ourContext;
    private SQLiteDatabase ourDatabase;

    public static class DbHelper extends SQLiteOpenHelper {

        public DbHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + 
                    KEY_ROWID + "INTEGER PRIMARY KEY AUTOINCREMENT, " +
                    KEY_NAME + "TEXT NOT NULL " + 
                    KEY_CONTENT + "TEXT NOT NULL " +
                    KEY_TIME + "TEXT NOT NULL"
                    );

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
            db.execSQL("DROP TABLE IF EXISTS" + DATABASE_TABLE);
            onCreate(db);
        }

    }

    public SqlDatabase(Context c){
        ourContext = c;
    }

    public SqlDatabase open() throws SQLException {
    ourHelper = new DbHelper(ourContext);
    ourDatabase = ourHelper.getWritableDatabase();
    return this;
    }
    public SqlDatabase close(){
    ourHelper.close();
    return this;
    }

    public long createEntry(String notename, String notecontent, String notetime) {
        // TODO Auto-generated method stub
        ContentValues cv = new ContentValues();
        cv.put(KEY_NAME, notename);
        cv.put(KEY_CONTENT, notecontent);
        cv.put(KEY_TIME, notetime);
        return ourDatabase.insert(DATABASE_TABLE, null, cv);

    }

}

package com.compilationofnotes.pragya;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class NewNote extends Activity implements OnClickListener{
    EditText et;
    Button btsave, btcancel;
    long tp;
    int counter=1;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        et=(EditText)findViewById(R.id.editt);
        btsave=(Button)findViewById(R.id.buttonsave);
        btcancel=(Button)findViewById(R.id.buttoncancel);
        btsave.setOnClickListener(this);
        btsave.setOnClickListener(this);
    }
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
    switch(arg0.getId()){

         case R.id.buttonsave:

               try{
               String notename = "Note" + counter;
               String notecontent = et.getText().toString();
               tp=System.currentTimeMillis();
               String notetime = Long.toString(tp);
               SqlDatabase entry = new SqlDatabase(NewNote.this);
               entry.open();
               entry.createEntry(notename, notecontent, notetime);
               entry.close();
               Intent i = new Intent(NewNote.this, NotesView.class);
               startActivity(i);
               counter++ ;
               }
               catch(Exception e){
                   e.printStackTrace();
               }
              break;

          case R.id.buttoncancel:
              Intent i = new Intent(NewNote.this, NotesView.class);
               startActivity(i);
              break;
    }
    }

} 
```

这是我的**清单**。

```
<?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.compilationofnotes.pragya"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk android:minSdkVersion="8" />

        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name" >
            <activity
                android:name=".NotesView"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />
                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>

            <activity
                android:name="com.compilationofnotes.pragya.NewNote"
                android:label="@string/app_name" />

           </application> 
```

我在**logcat**中收到此错误：

```
12-16 20:37:19.099: E/AndroidRuntime(276): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.compilationofnotes.pragya. 
```

**请请请**帮助。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:33:03.307

尝试这个

```
Intent addnote = new Intent(NotesView.this,NewNote.class);
startActivity(addnote); 
```

您正在使用带有操作而不是组件的构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:35:07.603

这可能对您有所帮助

AndroidManifest.xml--

```
<activity android:name=".NewNote" android:label="@string/app_name" /> 
```

在 java 文件中，在按钮单击侦听器上写这个。

```
Intent addnote = new Intent(NotesView.this,NewNote.class);
startActivity(addnote); 
```

并删除此行`import com.compilationofnotes.pragya.R;`

# android - 拨号器集成的意图过滤器数据属性参数

> ID：13902770
> 
> 赞同：2
> 
> 时间：2012-12-16T15:29:16.830
> 
> 标签：android, android-activity, intentfilter

我为android创建了一个拨号器。我将它与默认拨号器集成。每当我单击呼叫时，我都会使用对话框获得**完整的操作。**到目前为止，我的应用程序都很好。

**我希望我的应用程序仅在拨打的号码为 10 位以上时才使用选项作为完整操作之一**

现在我想要避免一些数字，如 USSD 代码、高级号码等，它们可以在用户的​​通讯录中。因此，每当用户单击拨号器中的呼叫 USSD 代码或高级号码时，我不希望我的应用程序成为选项之一。**如何为此设置意图过滤器**。我假设我的过滤器必须在清单中。

**只有当拨打的号码超过 10 位时，我的应用才会显示**

我找到了 mime 类型、URL 的示例，但找不到任何拨号器示例。

这是我的活动清单条目

```
 <activity android:name=.ActivityCallMore" 
        android:theme="@android:style/Theme.NoTitleBar" android:screenOrientation="portrait"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.CALL_PRIVILEGED" />
            <action android:name="android.intent.action.DIAL" />
            <action android:name="android.intent.action.CALL_BUTTON" />
            <!-- <action android:name="android.intent.action.VIEW" /> -->
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="tel" />
        </intent-filter>
    </activity> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T08:53:38.787

对不起，我不认为这是可以做到的。

我想象它会是这样的

```
<data android:pathPattern="...........*" /> 
```

但[http://developer.android.com/guide/topics/manifest/data-element.html](http://developer.android.com/guide/topics/manifest/data-element.html)指出那`pathPattern`是

```
meaningful only if the scheme and host attributes are also specified for the filter. 
```

并且没有`host`在`tel://0123456789`URI 中指定。[自 2009 年以来，类似的问题在https://code.google.com/p/android/issues/detail?id=3368](https://code.google.com/p/android/issues/detail?id=3368)被列为“中等优先级缺陷” 。

让我们希望别人能证明我错了。

# iphone - 设置 UIButton 实例突出显示

> ID：13902773
> 
> 赞同：0
> 
> 时间：2012-12-16T15:29:25.913
> 
> 标签：iphone, objective-c, ios, uibutton

我有很多 UIButtons，保存在 UIScrollView 中，所有这些都是动态标记的。

我可以通过创建对按钮的引用，在其创建方法之外检索按钮的属性，例如其标签。但是，我无法在按钮上设置属性，更具体地说，我似乎无法设置突出显示。

这是一个例子：

```
//UIButton is created elsewhere, i.e. UIButton *createdButton... createdButton.tag = 101
//Trigger method with createdButton as SENDER

- (void)highlightButton:(id)sender {

UIButton *buttonInstance = (UIButton *)sender;
int tag = buttonInstance.tag //use this to perform button-specific code

[buttonInstance setHighlighted:YES]; // <-- Not setting

} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:43:12.100

`highlighted`通常是一种瞬态，用于指示用户正在触摸按钮。`NO`因此，它通常会在正常的触摸处理事件过程中由 UIKit重新设置。这在您的情况下似乎特别有可能，因为该方法是由按钮本身的操作调用的。

如果你想持续改变按钮的外观，你应该设置`selected`而不是`highlighted`. 您可以为该控件状态 ( `UIControlStateSelected`) 设置标题、图像等，方法与为 设置它们的方式相同`UIControlStateHighlighted`。

# ms-access - 在 microsoft access 2010 表单和报告中显示多个附件

> ID：13902775
> 
> 赞同：4
> 
> 时间：2012-12-16T15:29:55.723
> 
> 标签：ms-access, vba, ms-access-2010

最初我很高兴发现 Access 2010 中的附件字段。从美学上看，我的内心数据库纯粹主义者对此感到厌烦，但我内心懒惰的草皮在这里负责，从表面上看，它确实可以使我目前的项目更容易/更简单。令人高兴的是，它会在表单和报告上自动显示图片/图标，但是（为什么总是有一个但是啊！）它只显示第一个，我需要它来显示所有这些。

您当然可以一次滚动浏览附件，但我很确定我的客户不会穿上它，尽管他要求我在 MS-Access 中完成该项目，似乎只有非常基本的内置选项显示：/但是...

我可能错了，我几乎没有 MS-Access 经验。我的编码背景完全是 LAMP 堆栈和网络，所以我对 Windows/Access 生态系统中提供的内容非常无知。我怀疑有优秀的 3rd 方报告工具可以提供非常灵活的布局，但我需要查看表单上的所有附件，而不仅仅是报告。

所以，盲目地进入虚空，我最初的策略是……

为附件创建一个单独的表格，其中每个字段都是仅包含单个项目的“附件”。然后在表单和报告中使用脚本来...

1.  在该表中查询属于相关记录的所有附件
2.  将这些字段显示/格式化为某种列表
3.  动态地将新的附件字段附加到该列表的末尾，以便用户可以在某个地方上传下一个附件
4.  每当添加附件时，请刷新表单页面，以便有一个免费的。

所以，我的问题是...

1.  我在 Access 中描述的内容是否可行？
2.  我错过了一个更简单/更好/规范的解决方案吗？
3.  Access 的脚本语言在显示方面有多强大？即笨重或像素完美？
4.  它还不是 Visual Basic 是吗？（不！；）
5.  如果是这样，我可以在表单/报告中使用任何其他脚本语言吗？

抱歉，我知道这是一个有点冗长的问题，但我在这里是一条没有水的鱼！

谢谢，

罗杰

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T19:40:33.280

假设我有一张带有附件的表格：

![附表](../Images/4b931956c06a17b2469365cfc165b67b.png)

假设我在希望显示的附件字段之一中有三张图像。我可以创建一个查询：

![附件查询](../Images/826dcc2d37f33aafa0cc90706e87d829.png)

之后我可以创建一个连续的表格：

![附件表格](../Images/8ddd09ddbaa1cea8d522644c88e69c3a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-10T04:21:23.737

我搜索了这个类似的问题。我每个字段有多个附件。我打算使用该字段来存储两个图像控件的 .jpg 和 .pdf 文件，这两个图像控件是通过将字段从属性拖到表单中创建的。我将它们命名为 ctlImage 和 ctlFeatures。我将此表单用作产品目录表单上更多信息按钮的非模态弹出窗口。到目前为止，我能够在产品目录中搜索记录并使用选定的列表框搜索结果打开带有 where 子句的表单，以将详细信息表单设置为当前记录。当我尝试操纵 ctlImage 寻找图像类型时，在智能感知中显示的唯一属性是 ctlImage.value。我希望将 ctlImage 分配给 jpg 并将 ctlFeatures 分配给 pdf 这是 frmProducts btnMoreInfo_Click 代码和 frmCatalogDetails 代码，以防万一弄乱了另一个。

```
Private Sub btnMoreInfo_Click()
    Dim db As DAO.Database
    Dim rs As DAO.Recordset
    Dim str As String
    Dim row As Long
    Set db = CurrentDb
    Set rs = db.OpenRecordset("tblProducts", dbOpenSnapshot)

        If Me.lstSearchResults.ItemsSelected.Count > 0 Then

            ' Debug.Print Me.lstSearchResults.Column(0)
            row = Me.lstSearchResults.Column(0)
            rs.MoveFirst
            rs.FindFirst "ProductID=" & row
            Debug.Print rs("Description")
            DoCmd.OpenForm "frmCatalogDetails", acNormal, , "ProductID=" & Me.lstSearchResults.Column(0, Me.lstSearchResults.ItemsSelected), acFormReadOnly, acWindowNormal

        Else
            MsgBox "You must select a product"
            Exit Sub
        End If
End Sub 
```

和目录详细信息

```
Option Compare Database
Dim db As DAO.Database
Dim rs As DAO.Recordset
Dim fld As DAO.Field

Private Sub Form_Load()

    Set db = CurrentDb

    'Set rs = db.OpenRecordset("tblProducts", dbOpenSnapshot)

    'Set fld = rs("image")

    Debug.Print rs("ProductID")
    Debug.Print rs("Description")
    'me.ctlImage.ControlSource =

    'Me.ctlImage.CurrentAttachment = fld.Value    
End Sub 
```

rs 语句被注释掉了，因为我无法识别父表单中的 rs。我得到一个未设置的块变量，但如果我执行 rs.openRecordSet 则记录集将返回到第一行。除了您上面的回答之外，我几乎没有看到有关操纵附件对象的信息，而且帮助一直很困难，因为它甚至不包括在附件字段内的访问。在这个话题上，我会做更多的提问而不是回答，我非常感谢你们中的许多人花时间来制定答案。罗林格言：在需要时寻求帮助，在被要求时提供帮助，并记住你来自哪里。

# c# - 如何在没有托管在 Windows 应用程序中的 svc 文件的情况下创建 WCF 代理

> ID：13902781
> 
> 赞同：1
> 
> 时间：2012-12-16T15:30:34.307
> 
> 标签：c#, wcf, metadata, app-config

我有两个应用程序。一个是托管 wcf 服务的 winform 服务器端，另一个是 winform 客户端应用程序，我必须在其中添加服务引用。没有任何 svc 文件。所以当我试图在winform wcf客户端创建服务代理时，只需输入像这样的url

**http://localhost:7998/WPFHost/ 或 net.tcp://localhost:7997/WPFHost/**通过服务引用添加服务然后报错。 **元数据包含无法解析的引用：“net.tcp://localhost:7997/WPFHost/”。**

在这里，我粘贴了托管 wcf 的 wcf 服务器端的完整 app.config 文件数据。请指导我添加服务参考无法添加的 app.config 中有什么问题。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<system.serviceModel>
    <services>
        <service name="WCFService.Service"
                 behaviorConfiguration="behaviorConfig">

            <host>
                <baseAddresses>
                    <add baseAddress="net.tcp://localhost:7997/WPFHost/"/>
                    <add baseAddress="http://localhost:7998/WPFHost/"/>
                </baseAddresses>
            </host>
            <endpoint address="tcp"
                      binding="netTcpBinding"
                      bindingConfiguration="tcpBinding"
                      contract="ServiceAssembly.IChat"/>

            <endpoint address="net.tcp://localhost:7996/WPFHost/mex"
                      binding="mexTcpBinding"
                      contract="IMetadataExchange"/>
        </service>
    </services>
    <behaviors>
        <serviceBehaviors>
            <behavior name="behaviorConfig">
                <serviceMetadata httpGetEnabled="true" httpGetUrl=""/>
                <serviceDebug includeExceptionDetailInFaults="true"/>
                <serviceThrottling maxConcurrentCalls="100" maxConcurrentSessions="100"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <bindings>
        <netTcpBinding>
            <binding name="tcpBinding"
                     maxBufferSize="67108864"
                     maxReceivedMessageSize="67108864"
                     maxBufferPoolSize="67108864"
                     transferMode="Buffered"
                     closeTimeout="00:00:10"
                     openTimeout="00:00:10"
                     receiveTimeout="00:20:00"
                     sendTimeout="00:01:00"
                     maxConnections="100">
                <security mode="None">
                </security>
                <readerQuotas maxArrayLength="67108864"
                              maxBytesPerRead="67108864"
                              maxStringContentLength="67108864"/>
                <reliableSession enabled="true" inactivityTimeout="00:20:00"/>
            </binding>
        </netTcpBinding>
    </bindings>
</system.serviceModel>
    </configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:42:33.403

您应该尝试为位于端口 7996的**mex地址创建服务代理：**

```
net.tcp://localhost:7996/WPFHost/mex 
```

# javascript - 类型错误：a 未定义

> ID：13902782
> 
> 赞同：9
> 
> 时间：2012-12-16T15:30:36.023
> 
> 标签：javascript, jquery, typeerror

当我尝试使用该`$.each`方法时，我在 jQuery v1.7.2 代码上收到上述错误：

```
$.post('url_of_php_file.php',
            $.param( {

            }),
            function(data){
                $.each(data.articles, function(index, value){
                .....
}); 
```

请求返回：

```
{"articles": [
    {
        "id":"11",
        "date":"2012-12-19 15:52:06",
        "title":"url_title",
        "link":"url_link",
        "available":"1"
     },
    ..... *more rows like the above*
]} 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-16T15:44:44.293

您所做的某事在 jQuery 中导致了错误。这是 99.9% 的情况下代码中的错误而不是 jQuery 中的错误。

有用的是使用 jQuery 的开发版本。它没有被缩小，这意味着它仍然具有完整的变量名而不是`a`,`b`等。

您是否发送了：

```
header('Content-Type: application/json'); 
```

之前`echo json_encode($data);`？这将触发 jQuery 的 JSON 检测。`console.log(data);`在之前添加一个`$.each`以确认数据看起来像您期望的那样。

# macos - 如何在 Mac 上从 F# PowerPack 2.0.0.0 运行 fslex.exe？

> ID：13902788
> 
> 赞同：2
> 
> 时间：2012-12-16T15:31:11.263
> 
> 标签：macos, f#, mono, fslex, f#-powerpack

我在 Mac 上从 F# PowerPack 2.0.0.0 运行 FsLex 时遇到问题。当我简单地运行程序时，我看到：

```
$ mono /Library/Frameworks/Mono.framework/Versions/3.0.2/lib/mono/FSharpPowerPack-2.0.0.0/bin/fslex.exe

未处理的异常：
System.TypeLoadException：无法加载类型
'.$FSharp.PowerPack.FsLex.Driver' 来自程序集'fslex，版本 = 2.0.0.0，
文化=中性，PublicKeyToken=a19089b1c74d0809'。
[错误] 致命的未处理异常：System.TypeLoadException：无法加载类型
'.$FSharp.PowerPack.FsLex.Driver' 来自程序集'fslex，版本 = 2.0.0.0，
文化=中性，PublicKeyToken=a19089b1c74d0809'。

```

我遵循的步骤是：

1.  安装 MDK 3.0.2。
2.  `sudo gacutil -i`在每个 DLL 上下载 2010 年 5 月 20 日发布的 F# PowerPack 2.0.0.0 。`sudo cp -r FSharpPowerPack-2.0.0.0 /Library/Frameworks/Mono.framework/Versions/3.0.2/lib/mono`
3.  [从http://www.microsoft.com/en-us/download/details.aspx?id=11100](http://www.microsoft.com/en-us/download/details.aspx?id=11100)下载 F# 2.0.0.0 的 2011 年 4 月 CTP并使用该`install-mono.sh`脚本。

错误是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:19:27.310

您可以尝试将您的问题重新发布到[fsharp-opensource](https://groups.google.com/forum/?fromgroups#!forum/fsharp-opensource)邮件列表。这就是在 Mono 上围绕 F# 进行的大多数协作发生的地方，因此您可能会更幸运地在那里获得答案。

不过，有几个快速建议可以先尝试：

*   2011 年 4 月的 F# CTP 现在已经过时了。尝试直接从[开源 F# 存储库](http://github.com/fsharp/fsharp)安装 F# ——它包含许多安装修复程序和次要补丁，使 F# 编译器（和 F# 交互）在 Mono 上工作得更好。
*   PowerPack 在这一点上也已经过时了。从源代码构建/安装 F# 后（如上），您也可以尝试从[源代码](https://github.com/fsharp/powerpack)构建 PowerPack以查看是否可以解决问题。

# android - 使用 Ant 为应用程序添加白标签

> ID：13902791
> 
> 赞同：-1
> 
> 时间：2012-12-16T15:31:31.763
> 
> 标签：android, ant, white-labelling

所以我很快就会给一个应用程序贴上白标签。whitelabel 将简单地替换图形（具有相同名称）以及一些颜色和字符串（.xml 文件）。还会有一些配置更改，例如 API 密钥等。

我只是想知道是否可以用蚂蚁来做到这一点。例如，我可以打电话`ant company_a`给`ant company_b`

有人做过吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:30:39.027

我们是白标软件有点不同，只是使用 Eclipse 作为我们的主要开发环境：

*   主应用程序代码进入一个实际的 Android 库项目 - 这包括所有活动、片段、布局 XML 和默认图形。几乎所有的东西。
*   对于每个客户，我们都会创建一个具有专用包名称的专用 APK 项目（另请参阅 Chris Stratton 对您的问题的评论）。这个 APK 只是链接了上面的库。它仅包含对`AndroidManifest.xml`必要活动、服务等的引用。
*   现在我们可以非常轻松地自定义应用程序的几乎所有内容：
    *   *替换图形*：只需在 APK 项目中添加一个新的图形资源，与您要替换的原始图形资源同名。
    *   *自定义字符串*：只需添加一个覆盖现有定义的新 strings.xml
    *   *自定义布局*：只需使用相同的文件名即可覆盖布局定义。
    *   等等

这对我们来说是一种非常简单有效的方法。它提供了几乎无限的可能性，只需很少的维护工作和用于开发和调试的完整 Eclipse 集成。

在此基础上构建 Ant 脚本也应该非常简单。

# c - 使用 fread() 读取 .bmp 图像

> ID：13902793
> 
> 赞同：1
> 
> 时间：2012-12-16T15:31:49.640
> 
> 标签：c, fread

我正在尝试读取 .bmp 图像并将数据写入文本文件。代码运行良好，但问题是，它一次无法读取整个图像，所以我必须`fread()`多次调用函数。在执行此操作时，我的代码将第一次读取的数据重复存储到文本文件中。为了正确读取整个图像，我必须做哪些更改？下面是我的代码片段。

```
int size = width * height;
unsigned char* data = new unsigned char[size]; 
filename = "image.bmp";
fname = "image_data.txt";
FILE* f = fopen(filename, "rb");
FILE *fp = fopen(fname, "w");

while(totalBytes < size)
{
    readsize = fread(data, sizeof(unsigned char), size, f);
    totalBytes += readsize;
    for(i = 0; i < readsize; i++)
    {
        fprintf(fp, "%d", data[i]);
        if((i % width) == 0 && i != 0)
            fprintf(fp, "\n");
    }
    fseek(f, readsize, SEEK_SET);
    readsize = 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T15:36:21.863

你的`fseek`电话是错误的。调用后`fread`文件位置将在读取数据的后面，因此您可以继续读取而无需查找。

之前发生的情况是，您读取了 X 字节，`fseek`对文件位置 X 做了不必要但无害的操作，然后读取了 Y 字节，但又对`fseek`文件位置 X 做了有害的返回，因此您继续再次读取相同的数据。

```
while(totalBytes < size)
{
    readsize=fread(data, sizeof(unsigned char), size, f);
    totalBytes+=readsize;
    for(i = 0; i < readsize; i++)
        {
          fprintf(fp,"%d",data[i]);
              if((i % width)== 0 && i!=0)
               fprintf(fp,"\n");
        }
} 
```

# excel - excel宏 - 新行复制

> ID：13902795
> 
> 赞同：0
> 
> 时间：2012-12-16T15:32:34.190
> 
> 标签：excel, schedule, vba

现在一直在寻找一段时间没有任何答案。我正在创建一个自动计划，为我的员工计算工作时间等。而不是手动在表格底部创建新行，而是放入所有功能并使用特定格式设置单元格样式，我想要一个宏来执行此操作。

我创建了一个宏，但问题是每次执行它时，它当然是从我最初创建它的地方开始的。

因此，宏应该以某种方式搜索表中的最后一个位置。复制最后两个并创建新的，包括 if 语句、单元格格式和样式。

我需要创建的第二个宏是一个切换函数，其中宏搜索包含工作时间（在时间下方）的行并隐藏或取消隐藏这些行。那可能吗？

我真的希望有人能帮助我！谢谢！/马丁

截图： http: [//www.martinhult.se/screenshot.jpg](http://www.martinhult.se/screenshot.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:56:44.210

如果你能分享你的第一个宏（我相信它被记录了？）会更好。

但本质上，您想使用“activesheet.usedrange.rows.count”之类的东西来查看已经使用了多少行，然后从 used rows + 1 开始。

# javascript - 如何检索由 WebService 发送的 cookie

> ID：13902801
> 
> 赞同：0
> 
> 时间：2012-12-16T15:33:07.893
> 
> 标签：javascript, html, web-services

服务器中有一个 webService，我的 HTML 代码向它发送一个表单并从 webService 接收答案。但是当调用 webService 时，它​​会发送一个名为“ASP.NET_SessionId”的 cookie（它的值类似于“bmbggmfm2rsi0rvspq5eiqrv”），我可以在我的 HTML 代码中检索这个 cookie 值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:54:47.183

如果我理解正确，您将`POST`一些数据发送到与您的页面来源不同的域，并希望读取从该域发送的 cookie。由于安全限制，这是不可能的。

根据您的需要，可能有一种解决方法。例如，如果您需要某种会话标识符，并且该信息被认为是可以合法读取的，那么 Web 服务很可能提供了一种特殊的方法来读取该信息。

# jquery - jquery没有冲突magento

> ID：13902802
> 
> 赞同：0
> 
> 时间：2012-12-16T15:33:09.107
> 
> 标签：jquery

需要有关此 javascript 的帮助我尝试添加 noconflict 但没有任何反应

```
<script type="text/javascript">
            jQuery.noConflict();
            jQuery('.carousel').iosSlider({
                desktopClickDrag: true,
                snapToChildren: true,
                infiniteSlider: false,
                navNextSelector: '.new-arrow.next',
                navPrevSelector: '.new-arrow.prev'
            });    
        </script> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T15:35:16.753

将 jquery 存储在一个变量中，然后当代码必须引用存储的版本时使用该变量。还要确保您的`noconflict`代码上方有 jquery 脚本。

```
<!-- Old Jquery Version -->
<script type="text/javascript" src="jquery-1.7.js"></script>
<script type="text/javascript">
   var j = jQuery.noConflict();
   j('.carousel').iosSlider({
      desktopClickDrag: true,
      snapToChildren: true,
      infiniteSlider: false,
      navNextSelector: '.new-arrow.next',
      navPrevSelector: '.new-arrow.prev'
    });    
 </script>
 <!--Latest Jquery Version -->
 <script type="text/javascript" src="jquery.js"></script> 
```

# javascript - setInterval 是否因手机设备而异？

> ID：13902803
> 
> 赞同：1
> 
> 时间：2012-12-16T15:33:14.147
> 
> 标签：javascript, html, animation, timer, setinterval

setInterval 是否因电话设备而异？我正在尝试构建 HTML5 游戏以在许多不同的手机设备上运行。我正在使用 setInterval 进行动画和计时器，注意到 Galaxy SII 上的游戏速度高于 HTC Nexuse One 上的速度！！！HTC 需要超过 30 秒才能完成一个 20 秒的计时器！！！！任何想法 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T16:15:11.193

唯一的想法是测试`setInterval`移动设备上浏览器允许的最小值。

```
var date = Date.now();
setInterval(function(){
    var d = Date.now() - window.date;
    console.log(d);
}, 0 ); 
```

每个浏览器都有不同的价值；您也可以尝试测试`requestAnimationFrame`并嗅探它是否已实现，如果没有实现，您可以轻松找到它的代码并以这种方式使用它，即使它`setInterval`也使用它，但它考虑了帧速率和允许的最短时间每个浏览器。

# python - 字符串中所有唯一字符的列表？

> ID：13902805
> 
> 赞同：56
> 
> 时间：2012-12-16T15:33:24.523
> 
> 标签：python, performance, data-structures

我想将字符附加到字符串，但想确保最终列表中的所有字母都是**唯一的**。

示例：`"aaabcabccd"`→`"abcd"`

现在，我当然有两个解决方案。一种是使用`list`将字符与它们的 ASCII 代码进行映射的方法。因此，每当我遇到一封信时，它都会将索引设置为`True`. 之后，我将扫描列表并附加所有设置的列表。它将具有**O(n)**的时间复杂度。

另一种解决方案是使用 a`dict`并遵循相同的过程。映射完每个字符后，我将对字典中的每个键进行操作。这也将具有**线性**运行时间。

由于我是 Python 新手，我想知道哪个更节省空间。哪一个可以更有效地实施？

**PS**：创建列表时顺序***并不***重要。

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-12-16T15:36:04.277

最简单的解决方案可能是：

```
In [10]: ''.join(set('aaabcabccd'))
Out[10]: 'acbd' 
```

请注意，这并不能保证字母在输出中出现的顺序，即使示例可能另有说明。

您将输出称为“列表”。如果列表是您真正想要的，请替换`''.join`为`list`：

```
In [1]: list(set('aaabcabccd'))
Out[1]: ['a', 'c', 'b', 'd'] 
```

就性能而言，在这个阶段担心它听起来像是过早的优化。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-12-16T15:36:38.740

使用[OrderedDict](http://docs.python.org/2/library/collections.html#collections.OrderedDict)。这将确保订单被保留

```
>>> ''.join(OrderedDict.fromkeys( "aaabcabccd").keys())
'abcd' 
```

PS：我只是对 OrderedDict 和 Set 解决方案都计时，后者更快。如果顺序无关紧要，设置应该是自然的解决方案，如果顺序很重要；这就是你应该做的。

```
>>> from timeit import Timer
>>> t1 = Timer(stmt=stmt1, setup="from __main__ import data, OrderedDict")
>>> t2 = Timer(stmt=stmt2, setup="from __main__ import data")
>>> t1.timeit(number=1000)
1.2893918431815337
>>> t2.timeit(number=1000)
0.0632140599081196 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-16T16:08:31.743

为了完整起见，这是另一个将字母排序为它工作方式的副产品的配方：

```
>>> from itertools import groupby
>>> ''.join(k for k, g in groupby(sorted("aaabcabccd")))
'abcd' 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-10-16T06:24:31.127

```
char_seen = []
for char in string:
    if char not in char_seen:
        char_seen.append(char)
print(''.join(char_seen)) 
```

这将保留字母的顺序，

输出将是

```
abcd 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-16T15:36:13.683

如果结果不需要保持顺序，那么您可以简单地使用一个集合

```
>>> ''.join(set( "aaabcabccd"))
'acbd'
>>> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-06-03T11:36:16.080

在列表中存储唯一字符

方法一：

```
uniue_char = list(set('aaabcabccd'))
#['a', 'b', 'c', 'd'] 
```

方法2：按循环（复杂）

```
uniue_char = []
for c in 'aaabcabccd':
    if not c in uniue_char:
        uniue_char.append(c)
print(uniue_char)
#['a', 'b', 'c', 'd'] 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-10-26T14:55:26.423

I have an idea. Why not use the `ascii_lowercase` constant?

For example, running the following code:

```
# string module contains the constant ascii_lowercase which is all the lowercase
# letters of the English alphabet
import string
# Example value of s, a string
s = 'aaabcabccd'
# Result variable to store the resulting string
result = ''
# Goes through each letter in the alphabet and checks how many times it appears.
# If a letter appears at least once, then it is added to the result variable
for letter in string.ascii_letters:
    if s.count(letter) >= 1:
        result+=letter

# Optional three lines to convert result variable to a list for sorting
# and then back to a string
result = list(result)
result.sort()
result = ''.join(result)

print(result) 
```

Will print `'abcd'`

There you go, all duplicates removed and optionally sorted

# html - 边框内的图像

> ID：13902806
> 
> 赞同：0
> 
> 时间：2012-12-16T15:33:27.163
> 
> 标签：html, css

我使用以下 CSS 代码创建了一个三角形。

```
 width: 0; 
    height: 0; 
    border-left: 100px solid transparent;
    border-right: 100px solid transparent;      
    border-top: 60px solid #000; 
```

正如我提到的#000，这个边框的背景颜色是黑色的，但现在我需要这个三角形内的图像。我尝试使用 background-image 属性向 CSS 添加另一行，但这样做是在方形背景而不是矩形背景中显示完整图像。

如何用我需要的图像显示三角形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T20:28:08.410

如果您可以忽略不支持 WebKit 的浏览器，请尝试使用 -webkit-mask 属性查看掩码，以便您可以将图像掩码为三角形。

这是一篇关于它们的好文章：http: [//css-tricks.com/webkit-image-wipes/](http://css-tricks.com/webkit-image-wipes/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:38:25.200

我不认为你可以用纯 CSS 来做到这一点并跨浏览器工作。你可以做的是在你的其他图像上放置一个中间有一个透明三角形的掩蔽图像。如果您使边看起来与页面颜色相同，则会产生图像是三角形的错觉。

您还可以使用画布并更改图像以使其成为三角形。

在 CSS 支持方面，有一些掩码设置。仅对于 Safari 和 Chrome 支持，您可以使用[-webkit-mask](https://developer.mozilla.org/en-US/docs/CSS/-webkit-mask)。对于 Firefox、Safari、Chrome 和 Opera，您可以使用[mask](https://developer.mozilla.org/en-US/docs/CSS/mask)。虽然没有 IE 支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T15:40:53.267

像[这个例子](http://jsfiddle.net/NGLN/9WdUc/)这样的东西可以吗？

样式表：

```
div {
    width: 0; 
    height: 0; 
    border-left: 100px solid transparent;
    border-right: 100px solid transparent;      
    border-top: 60px solid #000;
    position: relative;
}
div::after {
    content: "";
    background: url('http://lorempixel.com/40/40/'); no-repeat;
    width: 40px;
    height: 40px;
    position: absolute;
    top: -60px;
    left: -20px;    
}​ 
```

# javascript - JavaScript 内联对象操作类和函数冲突

> ID：13902807
> 
> 赞同：0
> 
> 时间：2012-12-16T15:33:38.660
> 
> 标签：javascript, prototype

我正在尝试创建一个内联类，该类在其构造函数中获取元素 id，并立即调用该类的子函数。

我得到了`styleit not a function`：但这是一堂课。

但我需要它作为函数，就像 jQuery 一样：

```
$('.hidden').show(); 
```

这是我的代码：

```
var styleit = function(elem) {
    this.el = document.getElementById(elem);

    this.green = function() {
        this.el.style.color = 'green';
    }

    this.red = function() {
        this.el.style.color = 'red';
    }
} 
```

像这样激活：

```
<a href="#" id="theid" onclick="styleit('theid').green();">style me</a>
<a href="#" id="theid2" onclick="styleit('theid2').red();">style me</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:41:43.023

试试这样的东西（这是 jQuery 实现它的 $ 的方式）：

```
window.styleit = function(x) {

    return new _styleit(x);

}; 
```

***[jsFiddle 演示](http://jsfiddle.net/YUjdn/)***

# javascript - 如何优化 jQuery 代码以添加类（到不同的元素）？

> ID：13902808
> 
> 赞同：0
> 
> 时间：2012-12-16T15:33:39.397
> 
> 标签：javascript, jquery

**示例 HTML**（为了清楚起见）：

```
<nav>
    <ul>
        <li class="top-navbar-channels">
            <a href="#"></a>
            <div class="dropdown-menu">BLAH, BLAH, BLAH!</div>
        </li>

        <li class="top-navbar-about">
            <a href="#"></a>
            <div class="dropdown-menu-about">BLAH, BLAH, BLAH!</div>
        </li>

        <li class="top-navbar-search">
            <a href="#"></a>
            <div class="dropdown-menu-search">BLAH, BLAH, BLAH!</div>
        </li>
    </ul>
</nav> 
```

**示例 jQuery 代码：**

```
jQuery(document).ready(function($){

    $('.dropdown-menu').on('show', function () {
        $('.top-navbar-channels > a').addClass('selected');
    });
    $('.dropdown-menu').on('hide', function () {
        $('.top-navbar-channels > a').removeClass('selected');
    });

    $('.dropdown-menu-about').on('show', function () {
        $('.top-navbar-about > a').addClass('selected');
    });
    $('.dropdown-menu-about').on('hide', function () {
        $('.top-navbar-about > a').removeClass('selected');
    });

    $('.dropdown-menu-search').on('show', function () {
        $('.top-navbar-search > a').addClass('selected');
    });
    $('.dropdown-menu-search').on('hide', function () {
        $('.top-navbar-search > a').removeClass('selected');
    });

}); 
```

**对于那些好奇**的人... jQuery 代码`selected`为活动菜单项的链接添加了一个新类。在我的情况下，它是[基于 Twitter Bootstrap 的可折叠菜单](http://twitter.github.com/bootstrap/javascript.html#collapse)，其中 active 表示菜单项未折叠，即打开。

现在的问题是，能否优化 jQuery 代码（即相同的功能用更少的代码）？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T15:42:34.100

也许，这段代码：

```
jQuery(document).ready(function($){
    var $menus = $('.dropdown-menu, .dropdown-menu-search, .dropdown-menu-about');

    $menus.on('show', function () {
        $(this).siblings("a").addClass('selected'); // or alternatively, $(this).prev("a")
    });
    $menus.on('hide', function () {
        $(this).siblings("a").removeClass('selected'); // idem as above
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T16:05:11.757

将一个公共类添加到公共主要元素，以便您可以将该单个类用作选择器。您还可以将事件合并到一个`on()`调用中并`toggleClass()`在链接上使用。`on()`允许多个空格分隔的事件

例子

```
<div class="dropdown-menu menu_content"> 
```

然后对于 jQuery：

```
$('.menu_content').on('show hide', function () {
        $(this).siblings("a").toggleClass('selected'); 
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-16T15:43:28.137

这比马蒂亚斯短一点……不是很短

```
$(function(){
  $('.dropdown-menu, .dropdown-menu-search, .dropdown-menu-about').on('show',function(){
    $(this).siblings('a').addClass('selected');
  }).on('hide',function(){
    $(this).siblings('a').removeClass('selected');
  });
}); 
```

# javascript - 创建模板

> ID：13902810
> 
> 赞同：0
> 
> 时间：2012-12-16T15:33:45.007
> 
> 标签：javascript, jquery, templates

我想知道是否可以用任何语言、HTML、CSS、jQuery、JavaScript 等创建模板。

> 我可以为我的网站创建一个模板，其中包含标题（带有图像）、侧边栏（例如选择器、图像和其他内容）、页脚（带有指向其他页面的链接，例如关于页面、联系我们等），并且我我向每个 HTML 页面介绍不同代码和信息的中心区域。

我的想法是，我只能在一个地方修改标题、选择器或侧边栏或任何其他元素的图像，这样它将在所有 HTML 页面中更改，而不必在每个 HTML 页面中更改它。

如果可能的话，我怎么能用下面的选择器来做呢？

代码：

```
<select id="mySelect" onchange="if(this.options[this.selectedIndex].value != ''){window.top.location.href=this.options[this.selectedIndex].value}">
    <option>Select an option</option>
    <option value="http://www.google.com">Orange</option>
    <option value="http://www.google.com">Pineapple</option>
    <option value="http://www.google.com">Banana</option>
</select> 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:40:56.990

如果您希望在页面加载时在客户端完成此操作，请使用 cookie。使用数据库（或会话）进行更持久的更改。如果您希望标题实时更改（更改为已加载的页面），则必须使用 nowjs (socket.io) 之类的东西。

# powershell - PowerShell get-help 看不到概要和其他内容

> ID：13902811
> 
> 赞同：1
> 
> 时间：2012-12-16T15:33:53.157
> 
> 标签：powershell, powershell-2.0

我在 Win8 上运行 PS2.0。

当我运行“get-help Get-ChildItem”时，我只看到 NAME 和 SYNTAX，SYNOPSIS、RELATED LINKS 和其他信息在哪里？

![在此处输入图像描述](../Images/ef957898afd99bd3cd8dc3c8e430d195.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T22:10:36.640

Windows 8 内置 PS3.0，您可以在其中使用`Update-Help`（以管理员身份运行）更新您的帮助文件。

如果您不在 W8 上并且只是按照您所说和标记的方式拥有 PS2.0，您可以在[此处从 Microsoft 下载核心帮助文件](http://www.microsoft.com/en-us/download/details.aspx?id=10552)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:20:23.550

尝试运行`Update-Help`。这应该为所有模块提供完整的帮助（并以管理员身份运行控制台）

# javascript - 名字和姓氏正则表达式

> ID：13902814
> 
> 赞同：1
> 
> 时间：2012-12-16T15:34:16.860
> 
> 标签：javascript, regex

我写了一个正则表达式来匹配我网站上注册表单的名字/姓氏。要求是：

*   最多 44 个字符
*   `-`或者`'`可以接受
*   名称中可以有一个空格
*   不需要 Unicode

有什么办法可以让我的表情变短吗？

```
^[a-zA-Z]{2,12}['-]?[a-zA-Z]{1,10}\s?[a-zA-Z]{2,12}['-]?[a-zA-Z]{1,10}$ 
```

名称字段的限制是否太多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:01:08.567

首先使用您的正则表达式，响应最多为 47 个字符：12+1+10+1+12+1+10。

我认为对你来说最好的方法是允许来自字母、逗号、减号或空格的 44 个字符。

您可以强制第一个字符为字母：

```
^[a-zA-Z][a-zA-Z\-'\s]{0,43}$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-02T20:31:57.330

以下是您的代码可能遗漏的名称：

```
Jo Blow                  not passed
Hyoung Kyoung Wu         not passed
Mike O'Neal              not passed
d'Are to Beaware         not passed
O Henry Smith            not passed
Mathais d'Arras          not passed
Martin Luther King Jr    not passed
George De FunkMaster     not passed
Kurtis B-Ball Basketball not passed
Ahmad el Jeffe           not passed
An Ni                    not passed 
```

你可以试试这个可以处理几乎所有名字的

```
^[^- '](?=(?![A-Z]?[A-Z]))(?=(?![a-z]+[A-Z]))(?=(?!.*[A-Z][A-Z]))(?=(?!.*[- '][- ']))[A-Za-z- ']{2,}$ 
```

```
Jo Blow                      passed
Hyoung Kyoung Wu             passed
Mike O'Neal                  passed
d'Are to Beaware             passed
O Henry Smith                passed
Mathais d'Arras              passed
Martin Luther King Jr        passed
George De FunkMaster         passed
Kurtis B-Ball Basketball     passed
Ahmad el Jeffe               passed
An Ni                        passed 
```

# android - 如何保存微调器输入？

> ID：13902821
> 
> 赞同：1
> 
> 时间：2012-12-16T15:35:16.257
> 
> 标签：android, eclipse, save, spinner

我创建了一个微调器，我想在关闭应用程序时保存所有微调器输入。我能怎么做？我认为共享偏好可以帮助我，但我不知道如何使用它！这是我的代码：

```
 private Spinner spinner;
      private EditText Text;
      private ArrayAdapter<String> adapter;
      private Button addButton;

      public void onCreate(Bundle savedInstanceState)
      {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Text = (EditText) findViewById(R.id.et);
        final List<String> planets = new ArrayList<String>(Arrays.asList(getResources().getStringArray(R.array.clienti_arrays)));
        adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, planets);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

        spinner = (Spinner) findViewById(R.id.spinner1);
        spinner.setAdapter(adapter);

        addButton = (Button) findViewById(R.id.add_new);
        addButton.setOnClickListener(new OnClickListener()
        {
          public void onClick(View v)
          {
            addNewSpinnerItem();
            Collections.sort(planets);

          }
        });
      }

      protected void addNewSpinnerItem()
      {
        String textHolder = "" + Text.getText().toString();
        adapter.add(textHolder);

      }

      public int compare(String s1, String s2) { return s1.toLowerCase().compareTo(s2.toLowerCase()); 

      }

    } 
```

非常感谢你的帮助..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T15:52:54.090

覆盖`onPause()`Activity 以在`Shared Preferences`应用程序关闭时保存选定的值：

```
@Override
public void onPause()
{
    // get Spinner Slected text here
  String selectedtext = spinner.getSelectedItem().toString();

   //Create SharedPreferences to store selected value

    SharedPreferences spinnerPrefs = this.getSharedPreferences("spinnerPrefs", 
                                                           MODE_WORLD_READABLE);
    SharedPreferences.Editor prefsEditor = spinnerPrefs.edit();
    prefsEditor.putString("spinner_selectedtext", selectedtext);
    prefsEditor.commit();

    super.onPause();

} 
```

并检索保存在的值`SharedPreferences`：

```
 SharedPreferences spinnerPrefs = this.getSharedPreferences("spinnerPrefs",
                                                           MODE_WORLD_READABLE);
 String selectedtext = spinnerPrefs.getString("spinner_selectedtext", 
                                                             "nothing_selected"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T19:28:26.377

[我在这篇文章](https://stackoverflow.com/questions/10499530/show-a-drop-down-list-of-recently-entered-text-when-clicks-on-an-android-edit-bo/15368045#15368045)中详细介绍了如何做到这一点。每次您在编辑文本中输入一个项目时，它都会将其保存到包含您输入的最后 x 个项目的微调器中。内存一直存在，直到您卸载应用程序或手动清除数据。

# c# - 自定义控件标记验证

> ID：13902824
> 
> 赞同：1
> 
> 时间：2012-12-16T15:35:39.777
> 
> 标签：c#, asp.net, visual-studio-2010

我有一个自定义控件，它有一个列集合存储为标记中的内部属性。标记看起来像这样：

```
<CustomGrid:CompositeGrid ID="myGrid1" runat="server" ReturnToFirstPageOnSort="true"
     PagerArrowsDisapearWhenNextPrevDisabled="true" AlternatingRowStyling="true">
        <Columns>
            <CustomGrid:DataColumn DataSourceID="TestDate" FormatString="dd.MM.yyyy"
                 Sortable="true" Visible="true" />
            <CustomGrid:DataColumn DataSourceID="TestType" />
            <CustomGrid:DataColumn DataSourceID="Referrer" />
            <CustomGrid:ImageColumn DataSourceID="StatusIcon"
                TextDataSourceID="Status" IncludeText="true" ImageAlt="IconAlt"
                ImageOnThe="Right" />
            <CustomGrid:LinkColumn>
                <Links>
                    <CustomGrid:LinkButtonItem CommandArgument="PDFId" CommandName="GetPDF" />
                    <CustomGrid:OpenDescriptionItem />
                </Links>
            </CustomGrid:LinkColumn>
            <CustomGrid:UserDefinedColumn ImplementingColumnType="MyColumn" HeaderText="User Defined Column" />
            <CustomGrid:DescriptionBlock DataSourceID="TestDate" />
        </Columns>
    </CustomGrid:CompositeGrid> 
```

列有多种类型，其中一种类型是描述列。我想使用控件“强制”开发人员始终将描述列放在最后（如果它存在的话）。我可以添加自定义标记验证规则吗？如果描述列放置在最后一个位置之外的任何位置，我可以用红色波浪线标记标记吗？如果违反此规则，我能否通过网站验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:19:39.070

我认为你应该为 DescriptionColumn 创建一个单独的属性，如果你想让它变得特别，就让它成为一个不同的基类。或者，您可以始终以这种方式对列进行排序，而不管控件的用户如何定义列。

**更新**

好吧，我决定试一试您的想法并创建一个自定义异常。我认为你需要做的就是在你的自定义控件中处理这个案例并抛出你自己的异常。没有自定义 XML 验证规则，只是一个普通的 .NET 异常。

![自定义 XAML 异常](../Images/98a15a6c6dc86b69d7ca72f2acdbab46.png)

这是代码的相关部分。

```
public class DataGrid
{
    ObservableCollection<BaseColumn> columns = new ObservableCollection<BaseColumn>();

    public DataGrid()
    {
        columns.CollectionChanged += new System.Collections.Specialized.NotifyCollectionChangedEventHandler(subClasses_CollectionChanged);
    }

    void subClasses_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
        int count = columns.Count(x => x is DescriptionColumn);

        if (count > 1)
        {
            throw new CustomDataGridException("You can only have one description column");
        }
        if (count == 1)
        {
            if (!(columns[columns.Count - 1] is DescriptionColumn))
                throw new CustomDataGridException("Description column must be last");
        }
    }

    public ObservableCollection<BaseColumn> Columns
    {
        get
        {
            return columns;
        }

        set
        {

            if(columns != null)
                columns.CollectionChanged -= subClasses_CollectionChanged;

            columns = value;

            if (columns != null)
                columns.CollectionChanged += subClasses_CollectionChanged;
        }
    }
} 
```

只需确保重新编译、关闭并重新打开设计器窗口，否则它可能不会更新。

# android - Android-Universal-Image-Loader 中的 IN_SAMPLE_POWER_OF_2 是什么意思？

> ID：13902826
> 
> 赞同：0
> 
> 时间：2012-12-16T15:35:43.297
> 
> 标签：android

我正在阅读*[Android Universal Image Loader](https://github.com/nostra13/Android-Universal-Image-Loader/blob/master/UniversalImageLoader/src/com/nostra13/universalimageloader/core/assist/ImageScaleType.java)*的源代码。

我无法理解 ImageScaleType 是什么。**IN_SAMPLE_POWER_OF_2**表示。

它说：**“它是快速类型，更适合在列表/网格/画廊（和其他 AdapterView）中使用”**。

为什么它很快，为什么它更适合在适配器视图中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T16:45:08.997

我对此不太确定，但我会假设这个枚举值描述了多少像素（“样本”），可能是为了计算输出图像的单个像素。

然后，计算通常会采用多个源样本的平均值，例如`newValue = (srcValue[1] + srcValue[2] + ... srcValue[n]) / n`. 如果以及何时通过位移整数值是 2 的幂，则除以`n`可以非常快速地计算出来。`n`如果`n`不是 2 的幂，则需要“真正的”除法运算，这在计算上要昂贵得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-27T12:22:24.080

从[文档](http://javadox.com/com.nostra13.universalimageloader/universal-image-loader/1.9.0/com/nostra13/universalimageloader/core/assist/ImageScaleType.html)：

**IN_SAMPLE_POWER_OF_2**

图像将缩小 2 倍，直到下一个缩小步骤使图像更小的目标尺寸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T16:22:55.260

它是应用于图像的比例因子。如果设置为，`2`则图像的宽度和高度将减半。这意味着它将使用更少的内存，但也会在屏幕上占据更小的“盒子”。

# mysql - MySQL 中的 GROUP_CONCAT - 如何包含不同的值？

> ID：13902830
> 
> 赞同：5
> 
> 时间：2012-12-16T15:36:03.787
> 
> 标签：mysql, sql, distinct, group-concat

我有两张表，我用 UNION ALL 查询 - 一张用于 Android，一张用于 iPhone。每个表都有自己的设备字段（“android”或“iphone”）。

我使用`GROUP_CONCAT(DISTINCT `device` ORDER BY `device` SEPARATOR ', ') AS `device``了几次，每次按另一列分组时（例如日期、用户 ID 等）。我也使用相同的 GROUP_CONCAT 来计算总数。

问题是，当我按日期分组时，我选择了设备的 GROUP_CONCAT（不是直接的设备），因为有些日期同时购买了 Android 和 iPhone。选择还包括 WHERE 或 HAVING 让用户按特定日期过滤，加入日期的用户数量等。当我计算总数时，我在设备上有 GROUP_CONCAT，这本身就是一个 GROUP_CONCAT 函数。结果可能类似于“android, android, iphone, iphone”，因为有只有 Android 的日期、只有 iPhone 的日期和两者都有的日期（其他查询只能有这些选项中的一个或一些）。我正在寻找一种方法将此结果转换为“android，iphone”。

目前我正在使用 PHP 函数：

```
 private function get_device_human_string($fp_device_computer_string)
    {
        $devices= array(
            'android' => 'Android',
            'iphone' => 'iPhone'
        );
        $device_computer_string= strtolower($fp_device_computer_string);
        $ret= array();
        foreach ($devices as $device_key => $device_human_string)
        {
            if (strpos($device_computer_string, $device_key) !== false)
            {
                $ret[]= $device_human_string;
            }
        }
        return implode(', ', $ret);
    } 
```

但我正在寻找一种在 MySQL 中执行此操作的方法（返回的结果在“Android”中也应该有一个大写 A，在“iPhone”中应该有一个大写 P，但我不介意为此使用 PHP 函数） .

顺便说一句，总的 SELECT 查询是一个 SELECT .... FROM (SELECT .... FROM (.... UNION ALL ....) GROUP BY ....) 并且 GROUP BY 在里面。如果我没有在内部查询中包含设备，那么外部查询中将没有设备到 GROUP_CONCAT。所以我不能直接在设备上进行 GROUP_CONCAT 。

编辑：这是我正在使用的查询示例（WHERE 和 HAVING 可以根据用户的过滤器进行更改）：

```
SELECT
  COUNT(1) AS `count`,
  SUM(`joined`) AS `joined`,
  SUM(`users`) AS `users`,
  SUM(`purchases`) AS `purchases`,
  SUM(`credits_purchased`) AS `credits_purchased`,
  GROUP_CONCAT(DISTINCT `device` ORDER BY `device` SEPARATOR ', ') AS `device`,
  GROUP_CONCAT(DISTINCT `application` ORDER BY `application` SEPARATOR ', ') AS `application`
FROM (
  SELECT
    `all_purchases`.*,
    IF(`users_joined`.`joined` IS NOT NULL, `users_joined`.`joined`, 0) AS `joined`,
    'esalne' AS `application`
  FROM (
    SELECT
      DATE(`date`) AS `date`,
      COUNT(DISTINCT `user_id`) AS `users`,
      COUNT(1) AS `purchases`,
      SUM(
        IF(
          STRCMP(SUBSTRING(`item`, 1, CHAR_LENGTH('esalne.sip.')), 'esalne.sip.')=0,
          CAST(SUBSTRING(`item`, CHAR_LENGTH('esalne.sip.')+1) AS UNSIGNED INTEGER),
          0
        )
      ) AS `credits_purchased`,
      GROUP_CONCAT(DISTINCT `device` ORDER BY `device` SEPARATOR ', ') AS `device`
    FROM (
      (
        SELECT 
         `id`,
          `item`,
          `date`,
          `status`,
          `user` AS `user_id`,
          NULL AS `transaction_id`,
          'android' AS `device`
        FROM `enswitch_android_purchases`
        WHERE (`status`=1)
          AND (`user` IS NOT NULL)
      )
      UNION ALL
      (
        SELECT
          `id`,
          `item`,
          `date`,
          `status`,
          `user` AS `user_id`,
          `transaction_id`,
          'iphone' AS `device`
        FROM `enswitch_iphone_purchases`
        WHERE (`status`=1)
          AND (`user` IS NOT NULL)
      )
    ) AS `all_purchases`
    GROUP BY DATE(`date`)
  ) AS `all_purchases`
  LEFT JOIN (
    SELECT
      `join_date` AS `date`,
      COUNT(1) AS `joined`
    FROM (
      SELECT
        `user_id`,
        MIN(DATE(`date`)) AS `join_date`
      FROM (
        (
          SELECT
            `id`,
            `item`,
            `date`,
            `status`,
            `user` AS `user_id`,
            NULL AS `transaction_id`,
            'android' AS `device`
          FROM `enswitch_android_purchases`
          WHERE (`status`=1)
            AND (`user` IS NOT NULL)
        )
        UNION ALL
        (
          SELECT
            `id`,
            `item`,
            `date`,
            `status`,
            `user` AS `user_id`,
            `transaction_id`,
            'iphone' AS `device`
          FROM `enswitch_iphone_purchases`
          WHERE (`status`=1)
            AND (`user` IS NOT NULL)
        )
      ) AS `all_purchases`
      GROUP BY `user_id`
    ) AS `users`
    GROUP BY `date`
  ) AS `users_joined` ON (`all_purchases`.`date`=`users_joined`.`date`)
  HAVING (`date` >= DATE_ADD('2012-11-01', INTERVAL 0 DAY))
     AND (`date` < DATE_ADD('2012-11-30', INTERVAL 1 DAY))
     AND (`joined` >= 2)
     AND (`purchases` <= 30)
     AND (`credits_purchased` <= 3000)
) AS `all_purchases_by_dates` 
```

谢谢，乌里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T16:59:10.207

只是一个草稿来说明一个想法：

```
select d1.device, d2.device, ...
from (
    select 'android' as device
    union
    select 'iphone' as device 
    ) as devices
left outer join mydata d1 on d1.device = devices.device and devices.device = 'android'
left outer join mydata d2 on d2.device = devices.device and devices.device = 'iphone'
inner join ...
where ... 
```

使用“虚拟”表和外连接，您可以获得所有记录`android`，`iphone`因此两个设备都不是空的，或者至少其中一个是非空的。您可以将它们连接起来`d1.device`，`d2.device`如果您喜欢或以任何其他合适的方式评估它们`group by`。

# performance - 本地测试 - 故意减慢加载以测试页面行为

> ID：13902834
> 
> 赞同：0
> 
> 时间：2012-12-16T15:36:34.880
> 
> 标签：performance, testing, pageload, page-load-time

我正在使用 MAMP 在本地开发我的网站。但我想知道他们将如何在“现实世界”中行动。

有没有办法可以**故意**将页面加载速度减慢到更常见的互联网连接速度？我最关心的是我的网站在查看 HTML 请求（脚本、图像、精灵等）和花边加载方面的表现如何。

我通过谷歌搜索发现的唯一内容是：[Intentionally Slow Down HTML/PHP Page Load to Test](https://stackoverflow.com/questions/7405987/intentionally-slow-down-html-php-page-load-to-test)。我不想**停止**页面加载，我只想让它**变慢**。

谢谢！

## 编辑

对于谷歌用户 -[链接问题](https://stackoverflow.com/questions/7405987/intentionally-slow-down-html-php-page-load-to-test)的答案之一推荐[了 Deeelay.me](http://www.deelay.me/)服务，这正是我当时正在寻找的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:00:50.193

设置本地代理并根据需要设置传输速率。它可能是 apache，但可以肯定的是，您可以使用 google 找到更简单的东西

# android - ImageView 上的 setImageUri 不起作用

> ID：13902841
> 
> 赞同：1
> 
> 时间：2012-12-16T15:37:14.797
> 
> 标签：android, imageview

我正在尝试用我的应用程序拍照，但它不起作用。

我正在实现一个用我的应用程序记录图片的功能，结果是一个 URI。

我在我的活动中有这个URI，我尝试向用户展示录制的图片，为了实现这一点，我从imageview中使用了setImageUri方法......但它对我不起作用。

我感到困惑的是，图像视图存在，在屏幕上我看到了尺寸。

在这种情况下，我已经实现的代码

```
ImageView imgView = new ImageView(activityContext);
        imgView.setImageURI(Uri.parse(captureImg.toString()));
        mainFrame.addView(imgView, 100, 100); 
```

另一个解决方案：

```
Drawable d = Drawable.createFromPath(captureImg.toString());
        ImageView imgView = new ImageView(activityContext);
        imgView.setImageDrawable(d);
        mainFrame.addView(imgView, 100, 100); 
```

这对我都不起作用，我必须尝试使用​​ Bitmap 的任何解决方案，但这对我也不起作用。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T15:41:44.703

请确保您的“UI 代码”(imgView.setImageDrawable(d);) 在 UIthread 上运行 以供参考：[http ://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:40:50.607

尝试如下：

```
ImageView imgView = new ImageView(activityContext);
LinearLayout.LayoutParams vp = new LinearLayout.LayoutParams
                          (LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
imgView.setLayoutParams(vp);
imgView.setMaxHeight(100);
imgView.setMaxWidth(100);
imgView.setImageURI(Uri.parse(captureImg.toString()));
mainFrame.addView(imgView); 
```

您没有添加`LayoutParams`到动态创建的 ImageView

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T15:46:28.580

- -试试这个 - -

```
ImageView imgView = new ImageView(activityContext);
imgView.setImageURI(Uri.parse(captureImg.toString()));
mainFrame.addView(imgView, new LinearLayout.LayoutParams(200,200)); 
```

# php - 创建数组/ json 对象，不能完全得到这个工作

> ID：13902844
> 
> 赞同：1
> 
> 时间：2012-12-16T15:37:35.857
> 
> 标签：php, javascript, arrays, json, key

我有一个相当复杂的情况，我需要开始工作，出于某种原因，我快到了，但还没有完全到。

在 PHP 中，我创建数组并通过 json 将 javascript 发送给它，我很确定我的问题出在这部分代码中。

```
$insertIDs = array();

foreach($recipients as $userID)
{   
            //MySQL insert removed from question 
    $insertID = mysql_insert_id();
    array_push($insertIDs, $array[$userID] = $insertID);
}

$json = array();
$json['fromID'] = $session;
$json['insertIDs'] = $insertIDs;
    $json['recipients'] = $recipients;
echo json_encode($json); 
```

当我在 javascript 中 console.log 的结果时，我得到：

```
{ messageID: 40,
  fromID: '1',
  insertIDs: [ 44 ],
  recipients: [ '3' ] } 
```

现在在 javascript 中，当我尝试通过我在上面的 php 中设置的用户 ID 访问插入 ID 时，我只是得到未定义的结果。我该怎么做才能通过用户 ID 访问每个 insertID？

例如：`json.insertIDs[userID]`

如果我简单地调用它：`json.insertIDs[0]`它确实返回第一个 insertID，但是当有多个时，我需要能够有一种简单的方法来访问每个 usersID insertID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:44:56.173

我不太确定您要做什么，因为在 forloop 中 $insertID 始终是相同的值，但是：

似乎 json.InsertIDs 是 json.InsertIds = Array(44); 形式的数组；

你希望它在哪里 Array(3 => 44)

尝试改变你的forloop

```
foreach($recipients as $userID){   
$insertID = mysql_insert_id();
array_push($insertIDs, $array[$userID] = $insertID);
} 
```

到

```
foreach($recipients as $userID){   
    $insertID = mysql_insert_id();
    $insertIDs[$userID] = $insertID;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T16:11:41.930

似乎 mysql_insert_id() 返回的值每次都是相同的，除非该 foreach() 循环中有一个 INSERT 查询。是否缺少部分代码？

# excel - 在 Excel 中自动筛选数据透视表

> ID：13902845
> 
> 赞同：0
> 
> 时间：2012-12-16T15:37:42.257
> 
> 标签：excel, vba

我正在为下午的学校活动建立一个数据库。我正在尝试通过控制数据透视表的表单创建搜索选项，用户可以在数据透视表中过滤班级类型和/或年龄组和/或学年。

我在 VBA 中编写了这段代码，但它不起作用。当我尝试编写代码以仅过滤上述其中一种（例如类类型）时，它可以工作，但是当我将其扩展为 3 个过滤器选项时，它不起作用。当其中一个选项中没有插入任何值时，它会失败。

```
search_class.Hide
ActiveSheet.PivotTables("PivotSearchClass").PivotFields("class type").ClearAllFilters

If IsNull(Range("type_search").Value) Then
    ActiveSheet.PivotTables("PivotSearchClass").PivotFields("class type").CurrentPage = "(All)"
Else: ActiveSheet.PivotTables("PivotSearchClass").PivotFields("class type").CurrentPage = Range("type_search").Value
End If

type_box = "pick a class type"

ActiveSheet.PivotTables("PivotSearchClass").PivotFields("group age").ClearAllFilters

If IsNull(Range("target_search").Value) Then
    ActiveSheet.PivotTables("PivotSearchClass").PivotFields("group age").CurrentPage = "(All)"
Else: ActiveSheet.PivotTables("PivotSearchClass").PivotFields("group age").CurrentPage = Range("target_search").Value
End If

target_box = "pick a group age"

ActiveSheet.PivotTables("PivotSearchClass").PivotFields("school year").ClearAllFilters

If IsNull(Range("year_search").Value) Then
    ActiveSheet.PivotTables("PivotSearchClass").PivotFields("school year").CurrentPage = "(All)"
Else:
ActiveSheet.PivotTables("PivotSearchClass").PivotFields("school year").CurrentPage = Range("year_search").Value
End If

year_search_box = "pick a school year"   

ActiveSheet.PivotTables("PivotSearchClass").PivotCache.Refresh 
```

有谁知道问题出在哪里以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T02:35:09.317

我认为如果您将测试更改为：

```
If IsEmpty(Range("type_search").Value) 
```

或者

```
If Range("type_search").Value = "" 
```

`IsNull`用于测试变量变量是否包含空值，无论是空白单元格还是填充单元格都不会为真。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T19:37:35.107

我在这台计算机上没有 Excel，数据透视表是我的弱点，但我会尽力提供帮助，因为您似乎独自一人。首先确保您的脚本确实在运行您的 if 语句的“True”情况，然后我将编辑 CurrentPage 的值以查看您的问题是否存在（即，将“(all)”值更改为其他值）。错误在哪里，错误描述是什么？

# jquery - jquery通过iframe访问顶级文档

> ID：13902851
> 
> 赞同：-1
> 
> 时间：2012-12-16T15:38:49.130
> 
> 标签：jquery, iframe, parent, document

我已经让它更早地工作了，但由于某种原因它不再工作了。有人可以解释一下为什么现在这行不通吗？

**包含 iframe 的第一页：**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
    <head>
        <title>Test 1</title>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
    </head>
    <body>
        <div id="thediv" style="background: #ffff00;"> div </div>
        <iframe id="theframe" src="test2.html"></iframe>
    </body>
</html> 
```

**iframe 内容**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
    <head>
        <title>test 2</title>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
        <script>
           $(document).ready(function () {
               $("#clickme").click(function(){
                   $("#thediv", top.document).css("background","#ff0000");
                   alert($("#thediv", top.document).text());
               });
           });
        </script>
    </head>
    <body>
        <a href="#" id="clickme">clickme</a>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:50:17.850

这在 Firefox 9 中运行良好。

请记住，.click() 不适用于动态添加的元素。

更新：出于安全原因，这是不允许的。请参阅此线程：[不安全的 JavaScript 尝试使用 URL 访问框架](https://stackoverflow.com/questions/4324108/unsafe-javascript-attempt-to-access-frame-with-url)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T23:54:06.470

好的，我无法让它在我的本地机器上工作，但是在我的实时文件上，我在 iframe src 路径中使用了一个完整的 url，即使它在同一个域中它也不起作用......删除 url 路径后它似乎工作......无论如何谢谢

# tomcat - 在 apache tomcat 上运行 Tcl

> ID：13902852
> 
> 赞同：0
> 
> 时间：2012-12-16T15:38:50.503
> 
> 标签：tomcat, web-applications, tcl

如果有任何解决方案，例如适合 Apache Tomcat 6 的 Apach Rivet，我一直在徘徊。我的问题是我想加载所有必需的 pacages 以便运行一次并将其用于收到的所有请求。

我希望在 Apache Tomcat 上执行此操作，因为我的应用程序的其他部分正在其上运行，并且我不想支持两台服务器，例如 tclhttpd。

我虽然使用 apach CGI Servlet，但它只是运行我的脚本并最终释放资源，我得到了相同的效果。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:38:30.050

[JTcl](http://jtcl.kenai.com/)是用 Java 编写的 Tcl 的实现；应该可以在 Tomcat webapp 中使用。但是，我从来没有真正尝试过，所以我不知道webapp卸载时资源释放是否有任何问题。如果我没记错的话，您的脚本可能也有问题，因为 JTcl 实现了相当旧的 Tcl 版本。确定您是否可以使用 JTcl 的最佳方法可能是尝试它（首先使用一个简单的脚本，它只是执行诸如报告版本之类的操作，然后使用您的真实脚本）。

如果你不能让它适用于你的脚本，那么通过 CGI 之类的东西运行标准的 Tcl 解释器（或 Starpack）是你最好的选择。（Tcl 通常比 Java 轻得多，因此 CGI 的开销并没有那么大。还有其他加速选项。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:32:27.487

如果您不介意使用本机库，那么[TclBlend](http://tcljava.sourceforge.net/docs/website/index.html)可能值得一看。当您将它与 Tcl > 8.4 的 Tcl 一起使用时会出现一些问题（也就是将 Java 加载到 Tcl 中，但这不是您想要的）

Jacl 和 TclBlend 在 Tcl 和 Java 端都使用相同的 API，JTcl 是（afaik）Jacl 的一个分支。

# iphone - iOS 应用降级兼容性要求

> ID：13902853
> 
> 赞同：0
> 
> 时间：2012-12-16T15:38:52.767
> 
> 标签：iphone, ipad, ios5, ios4, otool

我想知道是否可以将应用程序从应用商店（ARM 二进制）降级到较低版本。例如，如果应用程序需要 iOS 5.0 或 4.3 或更高版本，则让它在 iOS 4.2 或 4.0 上运行。

我了解这些要求很重要，因为较新的版本包含仅在较新的 iOS 平台上公开的 API 链接调用。但是，我有许多可以在较低版本上运行的应用程序在较新版本的 xcode 上不必要地编译（只是一个小更新支持 iOS 支持版本的巨大跳跃，如 iOs 4.0 -> iOs 5.0）

我想做的可能是通过验证没有新的链接函数 api 并将 plist 文件调整为较低版本来将 iOS 5.0 应用程序降级到 iOS 4.3 应用程序？otool 或 class-dump 可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T16:53:35.717

是的，这是可能的。提交具有不同“iOS 部署目标”的二进制文件（在项目 > 信息和目标 > 部署目标中），即使它低于您当前拥有的那个。

您需要进行大量测试以确保您的代码在各种兼容的 iOS 上运行，因为随着 iOS 5（以及随后的 6）的发布发生了很多变化，这意味着很多功能和方法将无法识别那些iOS版本。

关于查找哪些 API 可能不起作用，这里有一个小讨论 [查找不支持的 API's with OS version][1]

[1]：使用操作系统版本查找不[支持的 api “使用操作系统版本](https://stackoverflow.com/questions/4381363/finding-unsupported-apis-with-os-version)查找不支持的 API”。

# sql - 如何转换时间戳的时区以便在 Oracle DB 中进行比较？

> ID：13902859
> 
> 赞同：2
> 
> 时间：2012-12-16T15:39:27.763
> 
> 标签：sql, database, oracle, timezone, timestamp

我们使用的是 Oracle 11g，并且我们有一个包含时间戳列的表，该列不包含时区（简单定义为 TIMESTAMP）。时区写在不同的列中。

我希望能够在考虑时区的同时使用“最大”功能。
可能有一个功能可以轻松转换时区，我只是不知道。

我希望能够做这样的事情：

```
SELECT max(covert_to_timezone(my_timestamp, my_timezone, 'GMT')) FROM my_table 
```

我怎样才能做到这一点？

===================

**解决方案：**根据 Ajith Sasidharan 的回答：

```
SELECT max(from_tz(my_timestamp, my_timezone) at time zone '0:00') FROM my_table 
```

**更新：**如果你想比较日期，只需使用'cast'：

```
SELECT max(from_tz(cast(my_date as timestamp), my_timezone) at time zone '0:00') FROM my_table 
```

顺便说一句，现在我收到“ORA 01878”错误，这意味着我们的表包含无效时间（DST 狗屎）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T16:01:41.453

我猜你想要这样的功能::

```
select to_char((from_tz(to_timestamp(to_char(DATABASE_DATE, 'YYYY-MM-DD HH:MI:SS PM'), 'YYYY-MM-DD HH:MI:SS PM') ,'America/New_York')
    at time zone 'America/Los_Angeles'),'YYYY-MM-DD HH:MI:SS PM TZD') as localtime
    from table 
```

# android - Android - 播放视频的小部件（onclick 问题）

> ID：13902864
> 
> 赞同：1
> 
> 时间：2012-12-16T15:39:56.650
> 
> 标签：android, widget

我正在尝试制作一个简单的小部件，单击该小部件将播放来自 sdcard 的电影。这看起来很简单，通过遵循教程，我提出了以下代码，但似乎永远不会设置 onclick。

显现：

```
<receiver android:name="WidgetProvider" android:label="DVD Cover">          
        <intent-filter>
            <action 
                android:name="android.appwidget.action.APPWIDGET_UPDATE"/>
        </intent-filter>
            <meta-data 
                android:name="android.appwidget.provider" 
                android:resource="@xml/appwidget_info_2x4"/>
        </receiver> 
```

布局（widget.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/holder"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#ff777777"
>
<ImageView
android:id="@+id/cover"
android:layout_width="wrap_content"
android:layout_height="fill_parent"
android:textColor="#000000"

/>
</LinearLayout> 
```

appwidget.xml：

```
<?xml version="1.0" encoding="utf-8"?>

<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
   android:minWidth="200dip"
   android:minHeight="300dip"
   android:updatePeriodMillis="180000"
   android:initialLayout="@layout/widget"
   >
</appwidget-provider> 
```

WidgetProvider.java：

```
public class WidgetProvider extends AppWidgetProvider {

  public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {

            String movieurl = Environment.getExternalStorageDirectory().getPath() + "/Movie.mp4";

           Intent notificationIntent = new Intent(Intent.ACTION_VIEW);
            notificationIntent.setDataAndType(Uri.parse(movieurl), "video/*");
            PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent,0);

            // Get the layout for the App Widget and attach an on-click listener
            // to the button
            RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget);
            views.setOnClickPendingIntent(R.id.holder, contentIntent);

            // Tell the AppWidgetManager to perform an update on the current app widget
            appWidgetManager.updateAppWidget(appWidgetIds, views);

    }
} 
```

任何帮助将不胜感激。

谢谢，乔什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T16:47:14.453

Try this code

First create a variable something like this

```
public static String CLICK_ACTION = "com.widget.CLICK"; 
```

Now inside `onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds)` method set pending intent like this

```
for (int j = 0; j < appWidgetIds.length; j++) {
RemoteViews remoteViews = new RemoteViews(context.getPackageName(),  R.layout.widget);
Intent clickIntent = new Intent(context, WidgetProvider.class);

    clickIntent.setAction(CLICK_ACTION);
                clickIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds[j]);
                PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, clickIntent, PendingIntent.FLAG_UPDATE_CURRENT);
                remoteViews.setOnClickPendingIntent(R.id.cover, pendingIntent_);
} 
```

Then in `onReceive(final Context context, Intent main_intent)` method do like this.

```
 if (main_intent.getAction().equals(CLICK_ACTION)) {
         //Start your video intent here
         Intent notificationIntent = new Intent(Intent.ACTION_VIEW);
        notificationIntent.setDataAndType(Uri.parse(movieurl), "video/*");
        context.getApplicationContext().startActivity(notificationIntent);

            } 
```

# prolog - Very basic dcg prolog syntax

> ID：13902867
> 
> 赞同：4
> 
> 时间：2012-12-16T15:40:25.743
> 
> 标签：prolog, dcg

I am trying to understand prolog and definite clause grammar but I am having a very hard time understanding both of them.

I am really trying to understand how to use the dcg syntax...

Here I have two examples:

The first is actually the code from another question on this forum but with an additional question:

The code looked like this:

```
s --> first, operator, second.
first --> [X].
operator --> ['+'].
second --> [X]. 
```

And when Prolog is asked about this, it returns true/false but I can't for the life of me figure out how to actually modify this to "bind" the value so if asked s(X, [2,+,2],[]). it would return the value of first, so instead of returning true it'd say X = 2

Anyway back to the actual question. I have a few rules in normal prolog and this is one of them; it doesn't actually do anything and was merely made up as an example.

```
do(X, Y, [H|T], Sum):-
    H == 1, %check if H is 1
    X = H,
    Y = T,
    Additional is H+5,
    Sum is Additional+Additional. 
```

Basically, I am asking if someone could translate this to DCG so that I could try and understand the basic syntax of DCG! I've tried reading some tutorials but I feel like I haven't gotten any wiser...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T15:57:59.633

DCG: foo(A1, A2, A3, ... , An) --> bar.

Prolog: foo(A1, A2, A3, ... , An, X, Y) :- bar(X,Y)

So, `s` should be changed to:

```
s(X) --> first(X), operator, second.
first(X) --> [X].
operator --> ['+'].
second --> [X]. 
```

Of course, it might be better to return the actual result; to do this you should encapsulate prolog code in the DCG clause which is done with `{}`:

```
s(Z) --> first(X), operator, second(Y), {Z is X+Y}.
first(X) --> [X].
operator --> ['+'].
second(X) --> [X]. 
```

(naturally, if you have more operators, the prolog code won't be that simple).

Regarding the `do/4` predicate, it should be something like this:

```
do(X,Y,[H|T],Sum) -->
   {H == 1, %check if H is 1
    X = H,
    Y = T,
    Additional is H+5,
    Sum is Additional+Additional}. 
```

but I don't see why you would want that.

One last tip: it's recommended to use [`phrase/3`](http://www.swi-prolog.org/pldoc/doc_for?object=phrase/3) instead of adding the last two arguments in a DCG predicate.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T18:33:18.380

it's not easy to translate do/4 to DCG in meaningful way. I've removed arguments that 'copy' the *hidden* arguments of the DCG.

```
do(Sum) -->
    [1],  %check if H is 1
    {  % braces allow 'normal' Prolog code (but we have no access to 'hidden' arguments)
    Additional is H+5,
    Sum is Additional+Additional
    }. 
```

**edit** sorry I forgot H in `Additional is H+5,`, should read `Additional is 1+5,`...

# spring - Spring MVC，捕获对象列表，如@ModelAttribute

> ID：13902872
> 
> 赞同：3
> 
> 时间：2012-12-16T15:41:01.747
> 
> 标签：spring, model-view-controller, spring-mvc, jstl

我有 Test 类，并且我有 jsp 页面，其中包含绑定到测试对象列表的输入。我想用编辑过的信息从我的 jsp 中取回我的测试列表。我的测试班是：

```
@Entity
@Table(name = "[NewMVC].[dbo].[Tests]")
public class Test {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id")
    private int id; 

    @Column(name = "testQuestion")
    private String testQuestion;

    @Column(name = "optionOne")
    private String optionOne;

    @Column(name = "optionTwo")
    private String optionTwo;

    @Column(name = "optionThree")
    private String optionThree;

    @Column(name = "subjectType")
    private int subjectType;

    @Column(name = "correctOptionNumber")
    private int correctOptionNumber; 
        //gets, sets... 
```

我有一个jsp，我可以在其中编辑带有测试的列表：

```
 <form:form action="saveTestsEdits" method="POST" modelAttribute = "testWrapper">

    <c:forEach items="${testWrapper.testList}" var="test" varStatus="i">
    <h2> Test number ${i.index+1} </h2>
    <form:hidden value="${test.id}" path = "testList[${i.index}].id" />
    <table>
        <tr><td>Test Question:</td> <td><form:input path = "testList[${i.index}].testQuestion" value = "${test.testQuestion}"/> </td></tr>
        <tr><td>Option one: </td> <td><form:input path = "testList[${i.index}].optionOne" value= "${test.optionOne}"/> </td>
        <td>        
        <c:choose>
        <c:when test="${test.correctOptionNumber == 1}"> <form:radiobutton path = "testList[${i.index}].correctOptionNumber" value = "1" checked = "checked"/> </c:when>
        <c:otherwise><form:radiobutton path = "testList[${i.index}].correctOptionNumber" value = "1"/> </c:otherwise> 
        </c:choose> 
        </td>
        </tr>

        <tr><td>Option two: </td> <td><form:input path = "testList[${i.index}].optionTwo" value= "${test.optionTwo}"/> </td>
        <td>        
        <c:choose>
        <c:when test="${test.correctOptionNumber == 2}"> <form:radiobutton path = "testList[${i.index}].correctOptionNumber" value = "2" checked = "checked"/> </c:when>
        <c:otherwise><form:radiobutton path = "testList[${i.index}].correctOptionNumber" value = "2"/> </c:otherwise> 
        </c:choose> 
        </td>
        </tr>

        <tr><td>Option three: </td> <td><form:input path = "testList[${i.index}].optionThree" value= "${test.optionThree}"/> </td>
        <td>        
        <c:choose>
        <c:when test="${test.correctOptionNumber == 3}"> <form:radiobutton path = "testList[${i.index}].correctOptionNumber" value = "3" checked = "checked"/> </c:when>
        <c:otherwise><form:radiobutton path = "testList[${i.index}].correctOptionNumber" value = "3"/> </c:otherwise> 
        </c:choose> 
        </td>

        </tr>
        <tr><th>Subject type:</th></tr>
        <tr><td>Georaphy: </td> 
        <td>        
        <c:choose>
        <c:when test="${test.subjectType == 3}"> <form:radiobutton path = "testList[${i.index}].subjectType" value = "3" checked = "checked"/> </c:when>
        <c:otherwise><form:radiobutton path = "testList[${i.index}].subjectType" value = "3"/></c:otherwise> 
        </c:choose> 
        </td>
        </tr>

        <tr><td>Mathematics: </td> 
        <td>        
        <c:choose>
        <c:when test="${test.subjectType == 4}"><form:radiobutton path = "testList[${i.index}].subjectType" value = "4" checked = "checked"/> </c:when>
        <c:otherwise><form:radiobutton path = "testList[${i.index}].subjectType" value = "4"/></c:otherwise> 
        </c:choose> 
        </td>
        </tr>

        <tr><td>History: </td> 
        <td>        
        <c:choose>
        <c:when test="${test.subjectType == 5}"><form:radiobutton path = "testList[${i.index}].subjectType" value = "5" checked = "checked"/> </c:when>
        <c:otherwise><form:radiobutton path = "testList[${i.index}].subjectType" value = "5"/></c:otherwise> 
        </c:choose> 
        </td>
        </tr>

    </table>
    <br>        
    </c:forEach>
    <input type="submit" value="Submit" />
</form:form>
</body>
</html> 
```

实际上我没有清楚地发送到页面列表，但我有一个名为 TestWrapper 的特殊类，它看起来像：

```
public class TestWrapper {

    private List<Test> testList = null;

    public TestWrapper(List<Test> testList) {

        this.testList = testList;
    }

    public void setTestList(List<Test> testList) {

        this.testList = testList;
    }

    public List<Test> getTestList() {

        return testList;
    }

} 
```

我尝试使用：

```
@RequestMapping(value="/saveTestsEdits", method = RequestMethod.POST)
     public String register(@ModelAttribute("testWrapper")TestWrapper testWrapper , HttpServletRequest request) 
```

但它给了我一个例外：

```
SEVERE: Servlet.service() for servlet [appServlet] in context with path [/mvc] threw exception [Request processing failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.andrew.models.TestWrapper]: No default constructor found; nested exception is java.lang.NoSuchMethodException: com.andrew.models.TestWrapper.<init>()] with root cause
java.lang.NoSuchMethodException: com.andrew.models.TestWrapper.<init>() 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T16:21:58.957

`java.lang.NoSuchMethodException: xxx.<init>()`JVM 无法实例化类 xxx 的对象时抛出异常。在这种情况下，Spring 不能实例化 TestWrapper 类。

您有一个列表参数构造函数，但没有默认的。添加一个如下所示：

```
public class TestWrapper {

    public TestWrapper() {
    }
} 
```

# java - Apache CXF - 给定的 SOAPAction 与操作不匹配

> ID：13902874
> 
> 赞同：7
> 
> 时间：2012-12-16T15:41:08.680
> 
> 标签：java, web-services, soap, cxf

我再次开始从事几年前开始的项目（此处提供代码：[http](http://code.google.com/p/mipnp/) ://code.google.com/p/mipnp/ ）。它是一个 UPnP 媒体服务器，可以将媒体流式传输到 Xbox 360。

对于 UPnP 中的 SOAP 部分，我使用了 Apache CXF。使用 CXF 2.4.8 版，一切正常。但是每当我尝试更新到 CXF 版本 2.4.9（或更高版本）时，都会出现以下异常：

```
WARNING: Interceptor for {urn:microsoft.com:service:X_MS_MediaReceiverRegistrar:1}MediaReceiverRegistrarService#{urn:microsoft.com:service:X_MS_MediaReceiverRegistrar:1}IsAuthorized has thrown exception, unwinding now
org.apache.cxf.interceptor.Fault: The given SOAPAction urn:microsoft.com:service:X_MS_MediaReceiverRegistrar:1#IsAuthorized does not match an operation.
  at org.apache.cxf.binding.soap.interceptor.SoapActionInInterceptor$SoapActionInAttemptTwoInterceptor.handleMessage(SoapActionInInterceptor.java:188)
  at org.apache.cxf.binding.soap.interceptor.SoapActionInInterceptor$SoapActionInAttemptTwoInterceptor.handleMessage(SoapActionInInterceptor.java:162)
  at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
  at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)
  at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:207)
  at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:209)
  at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:191)
  at org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:114)
  at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:185)
  at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:108)
  at javax.servlet.http.HttpServlet.service(HttpServlet.java:755)
  at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:164)
  at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:669)
  at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1336)
  at com.googlecode.mipnp.upnp.ServerHeaderFilter.doFilter(ServerHeaderFilter.java:60)
  at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
  at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:453)
  at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:229)
  at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1072)
  at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:382)
  at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
  at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1006)
  at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
  at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
  at org.eclipse.jetty.server.Server.handle(Server.java:365)
  at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:485)
  at org.eclipse.jetty.server.AbstractHttpConnection.content(AbstractHttpConnection.java:937)
  at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java:998)
  at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:856)
  at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:240)
  at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)
  at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:628)
  at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:52)
  at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
  at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
  at java.lang.Thread.run(Thread.java:722) 
```

这是 SOAP 请求的样子：

```
POST /control/x_ms_mediareceiverregistrar HTTP/1.1
User-Agent: Xbox/2.0.16202.0 UPnP/1.0 Xbox/2.0.16202.0
Connection: Keep-alive
Host:192.168.1.11:34331
SOAPACTION: "urn:microsoft.com:service:X_MS_MediaReceiverRegistrar:1#IsAuthorized"
CONTENT-TYPE: text/xml; charset="utf-8"
Content-Length: 304

<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" s:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
   <s:Body>
      <u:IsAuthorized xmlns:u="urn:microsoft.com:service:X_MS_MediaReceiverRegistrar:1">
         <DeviceID></DeviceID>
      </u:IsAuthorized>
   </s:Body>
</s:Envelope> 
```

我猜这与不在“u”命名空间中的“DeviceID”参数有关。但我似乎找不到修复或解决方法。

这就是我创建 Web 服务的方式：

```
/*
 * MediaReceiverRegistrar.java
 * Created on Jun 30, 2011, 4:00:45 PM
 */
package com.googlecode.mipnp.mediaserver;

import com.googlecode.mipnp.upnp.ServiceImpl;
import javax.jws.WebMethod;
import javax.jws.WebParam;
import javax.jws.WebService;
import javax.xml.ws.Holder;

@WebService(
        portName="X_MS_MediaReceiverRegistrar",
        targetNamespace="urn:microsoft.com:service:X_MS_MediaReceiverRegistrar:1")
public class MediaReceiverRegistrar extends ServiceImpl {

    @WebMethod(operationName="IsAuthorized")
    public void isAuthorized(
            @WebParam(name="DeviceID")
            String deviceId,
            @WebParam(name="Result", mode=WebParam.Mode.OUT)
            Holder<Integer> result) {

        result.value = 1;
    }
} 
```

[（你可以在这里](http://code.google.com/p/mipnp/source/browse/trunk/src/main/java/com/googlecode/mipnp/mediaserver/MediaReceiverRegistrar.java)找到完整的代码）

这就是 wsdl 的样子：

```
<?xml version='1.0' encoding='UTF-8'?><wsdl:definitions name="MediaReceiverRegistrarService" targetNamespace="urn:microsoft.com:service:X_MS_MediaReceiverRegistrar:1" xmlns:ns1="http://schemas.xmlsoap.org/soap/http" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="urn:microsoft.com:service:X_MS_MediaReceiverRegistrar:1" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <wsdl:types>
<xs:schema elementFormDefault="unqualified" targetNamespace="urn:microsoft.com:service:X_MS_MediaReceiverRegistrar:1" version="1.0" xmlns:tns="urn:microsoft.com:service:X_MS_MediaReceiverRegistrar:1" xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:element name="IsAuthorized" type="tns:IsAuthorized"/>
<xs:element name="IsAuthorizedResponse" type="tns:IsAuthorizedResponse"/>
<xs:element name="IsValidated" type="tns:IsValidated"/>
<xs:element name="IsValidatedResponse" type="tns:IsValidatedResponse"/>
<xs:element name="RegisterDevice" type="tns:RegisterDevice"/>
<xs:element name="RegisterDeviceResponse" type="tns:RegisterDeviceResponse"/>
<xs:element name="getIdAsUrn" type="tns:getIdAsUrn"/>
<xs:element name="getIdAsUrnResponse" type="tns:getIdAsUrnResponse"/>
<xs:element name="getTypeAsUrn" type="tns:getTypeAsUrn"/>
<xs:element name="getTypeAsUrnResponse" type="tns:getTypeAsUrnResponse"/>
<xs:complexType name="getTypeAsUrn">
    <xs:sequence/>
  </xs:complexType>
<xs:complexType name="getTypeAsUrnResponse">
    <xs:sequence>
      <xs:element minOccurs="0" name="return" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
<xs:complexType name="IsValidated">
    <xs:sequence>
      <xs:element minOccurs="0" name="DeviceID" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
<xs:complexType name="IsValidatedResponse">
    <xs:sequence>
      <xs:element minOccurs="0" name="Result" type="xs:int"/>
    </xs:sequence>
  </xs:complexType>
<xs:complexType name="IsAuthorized">
    <xs:sequence>
      <xs:element minOccurs="0" name="DeviceID" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
<xs:complexType name="IsAuthorizedResponse">
    <xs:sequence>
      <xs:element minOccurs="0" name="Result" type="xs:int"/>
    </xs:sequence>
  </xs:complexType>
<xs:complexType name="getIdAsUrn">
    <xs:sequence/>
  </xs:complexType>
<xs:complexType name="getIdAsUrnResponse">
    <xs:sequence>
      <xs:element minOccurs="0" name="return" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
<xs:complexType name="RegisterDevice">
    <xs:sequence>
      <xs:element minOccurs="0" name="RegistrationReqMsg" type="xs:base64Binary"/>
    </xs:sequence>
  </xs:complexType>
<xs:complexType name="RegisterDeviceResponse">
    <xs:sequence>
      <xs:element minOccurs="0" name="RegistrationRespMsg" type="xs:base64Binary"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema>
  </wsdl:types>
  <wsdl:message name="RegisterDeviceResponse">
    <wsdl:part element="tns:RegisterDeviceResponse" name="parameters">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="getTypeAsUrnResponse">
    <wsdl:part element="tns:getTypeAsUrnResponse" name="parameters">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="IsValidatedResponse">
    <wsdl:part element="tns:IsValidatedResponse" name="parameters">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="getIdAsUrnResponse">
    <wsdl:part element="tns:getIdAsUrnResponse" name="parameters">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="getIdAsUrn">
    <wsdl:part element="tns:getIdAsUrn" name="parameters">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="getTypeAsUrn">
    <wsdl:part element="tns:getTypeAsUrn" name="parameters">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="RegisterDevice">
    <wsdl:part element="tns:RegisterDevice" name="parameters">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="IsValidated">
    <wsdl:part element="tns:IsValidated" name="parameters">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="IsAuthorizedResponse">
    <wsdl:part element="tns:IsAuthorizedResponse" name="parameters">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="IsAuthorized">
    <wsdl:part element="tns:IsAuthorized" name="parameters">
    </wsdl:part>
  </wsdl:message>
  <wsdl:portType name="MediaReceiverRegistrar">
    <wsdl:operation name="getTypeAsUrn">
      <wsdl:input message="tns:getTypeAsUrn" name="getTypeAsUrn">
    </wsdl:input>
      <wsdl:output message="tns:getTypeAsUrnResponse" name="getTypeAsUrnResponse">
    </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="IsValidated">
      <wsdl:input message="tns:IsValidated" name="IsValidated">
    </wsdl:input>
      <wsdl:output message="tns:IsValidatedResponse" name="IsValidatedResponse">
    </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="IsAuthorized">
      <wsdl:input message="tns:IsAuthorized" name="IsAuthorized">
    </wsdl:input>
      <wsdl:output message="tns:IsAuthorizedResponse" name="IsAuthorizedResponse">
    </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getIdAsUrn">
      <wsdl:input message="tns:getIdAsUrn" name="getIdAsUrn">
    </wsdl:input>
      <wsdl:output message="tns:getIdAsUrnResponse" name="getIdAsUrnResponse">
    </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="RegisterDevice">
      <wsdl:input message="tns:RegisterDevice" name="RegisterDevice">
    </wsdl:input>
      <wsdl:output message="tns:RegisterDeviceResponse" name="RegisterDeviceResponse">
    </wsdl:output>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="MediaReceiverRegistrarServiceSoapBinding" type="tns:MediaReceiverRegistrar">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="getTypeAsUrn">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="getTypeAsUrn">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getTypeAsUrnResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="IsValidated">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="IsValidated">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="IsValidatedResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="IsAuthorized">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="IsAuthorized">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="IsAuthorizedResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getIdAsUrn">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="getIdAsUrn">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getIdAsUrnResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="RegisterDevice">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="RegisterDevice">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="RegisterDeviceResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="MediaReceiverRegistrarService">
    <wsdl:port binding="tns:MediaReceiverRegistrarServiceSoapBinding" name="X_MS_MediaReceiverRegistrar">
      <soap:address location="http://192.168.1.11:54802/control/x_ms_mediareceiverregistrar"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

我尝试添加以下行，因为我在某处读到自 CXF 版本 2.4.9 以来安全措施有所提高：

```
@EndpointProperty(key="soap.no.validate.parts", value="true") 
```

但这并没有什么不同。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-17T17:28:03.387

问题是wsdl有：

```
<soap:operation soapAction="" style="document"/> 
```

但请求正在发送：

```
SOAPACTION: "urn:microsoft.com:service:X_MS_MediaReceiverRegistrar:1#IsAuthorized" 
```

有几个选项：

1）您可以更新 WSDL 以将该字符串包含为 soapAction 并重新生成所有代码等。

2）您可以编写一个 CXF 拦截器，从请求标头中删除soapAction（或将其设置为“”，如 wsdl 状态）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-24T00:24:08.960

我很久以前有同样的问题，我试图添加

`@EndpointProperty(key="soap.no.validate.parts", value="true")`

但这无济于事，在我的情况下，我不拥有我正在使用的 Web 服务，并且该 Web 服务的响应不遵循 WSDL 的规则，所以我结束了像这样使用拦截器更改响应一：

/*拦截器类*/

```
public class MyInterceptor extends AbstractPhaseInterceptor {

private static final Logger logger = Logger.getLogger(MyInterceptor.class);

public MyInterceptor() {
    super(Phase.RECEIVE);
}

@Override
public void handleMessage(Message message) throws Fault {
    logger.info("TCP-InterceptandoMensaje");
    message.put(Message.ENCODING, "UTF-8");
    InputStream is = message.getContent(InputStream.class);

    if(is!=null){
        CachedOutputStream bos = new CachedOutputStream();
        try{
            IOUtils.copy(is, bos);
            String soapMessage = new String(bos.getBytes());
            logger.info("-------------------------------------------");
            logger.info("TCP-SoapMsgRecibido[" + soapMessage +"]");
            logger.info("-------------------------------------------");
            bos.flush();
            message.setContent(InputStream.class, is);

            is.close();
            InputStream inputStream = new ByteArrayInputStream(removeBody(soapMessage).getBytes());
            message.setContent(InputStream.class, inputStream);
            bos.close();
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }
    }
}

private String removeBody(String msg) {
    StringBuffer soapMsg = new StringBuffer();
    if (msg.contains("Reason")) {
        if (msg.contains("TarjetaCreditoConsultaDetalle_Req")) {
            soapMsg.append(msg.substring(0, msg.indexOf("<NS1:Body>")));
            soapMsg.append("<NS1:Body>");
            soapMsg.append("<NS2:TarjetaCreditoConsultaDetalle_Resp xmlns:NS2=\"http://www.bi.com.gt/esb/services/TarjetaCredito\">");
            soapMsg.append("<InfoTrx>");
            soapMsg.append("<IdTrx>000000000000000000000000</IdTrx>");
            soapMsg.append("<Canal>000</Canal>");
            soapMsg.append("<PaisOperacion>000</PaisOperacion>");
            soapMsg.append("<BancoOperacion>0</BancoOperacion>");
            soapMsg.append("<PaisDestino>000</PaisDestino>");
            soapMsg.append("<BancoDestino>0</BancoDestino>");
            soapMsg.append("<FechaTrx>00000000</FechaTrx>");
            soapMsg.append("<HoraTrx>000000</HoraTrx>");
            soapMsg.append("<IdCliente/>");
            soapMsg.append("<CodOpWeb/>");
            soapMsg.append("<CodEmpresa/>");
            soapMsg.append("<TotPags>000</TotPags>");
            soapMsg.append("<CodRetorno>000</CodRetorno>");
            soapMsg.append("</InfoTrx>");
            soapMsg.append("<Datos>");
            soapMsg.append("<Producto>0</Producto>");
            soapMsg.append("<NumProducto>0000000000000000</NumProducto>");
            soapMsg.append("<NombreCuenta> </NombreCuenta>");
            soapMsg.append("<Moneda>USD</Moneda>");
            soapMsg.append("<Estado>00000000</Estado>");
            soapMsg.append("<SaldoLocal>0.00</SaldoLocal>");
            soapMsg.append("<SaldoDispLocal>0.00</SaldoDispLocal>");
            soapMsg.append("<SaldoInter>0.00</SaldoInter>");
            soapMsg.append("<SaldoDispInter>0.00</SaldoDispInter>");
            soapMsg.append("<DirCorrespond> </DirCorrespond>");
            soapMsg.append("<FechaCorte>00000000</FechaCorte>");
            soapMsg.append("<FechaProxPago>00000000</FechaProxPago>");
            soapMsg.append("<SobreGiroAutLocal>0.00</SobreGiroAutLocal>");
            soapMsg.append("<SobreGiroAutInter>0.00</SobreGiroAutInter>");
            soapMsg.append("<FecUltCambioEstado>00000000</FecUltCambioEstado>");
            soapMsg.append("<FecUltMov>00000000</FecUltMov>");
            soapMsg.append("<FecUltAbono>00000000</FecUltAbono>");
            soapMsg.append("<PagoMinLocal>0.00</PagoMinLocal>");
            soapMsg.append("<PagoContLocal>0.00</PagoContLocal>");
            soapMsg.append("<PagoMinInter>0.00</PagoMinInter>");
            soapMsg.append("<PagoContInter>0.00</PagoContInter>");
            soapMsg.append("<LimiteAutLocal>0.00</LimiteAutLocal>");
            soapMsg.append("<LimiteAutInter>0.00</LimiteAutInter>");
            soapMsg.append("<Seguros>");
            soapMsg.append("<SegTCSalva>1</SegTCSalva>");
            soapMsg.append("<SegCobInt/>");
            soapMsg.append("<SegVida/>");
            soapMsg.append("<SegFourSeason/>");
            soapMsg.append("</Seguros>");
            soapMsg.append("<MontoTrxLocalDeb>0.00</MontoTrxLocalDeb>");
            soapMsg.append("<MontoTrxLocalCred>0.00</MontoTrxLocalCred>");
            soapMsg.append("<SaldoMaxVenc>0.00</SaldoMaxVenc>");
            soapMsg.append("<MontoExtrafAutLocal>0.00</MontoExtrafAutLocal>");
            soapMsg.append("<MontoExtrafAutInter>0.00</MontoExtrafAutInter>");
            soapMsg.append("<MontoTrxInterDeb>0.00</MontoTrxInterDeb>");
            soapMsg.append("<MontoTrxInterCred>0.00</MontoTrxInterCred>");
            soapMsg.append("</Datos>");
            soapMsg.append("</NS2:TarjetaCreditoConsultaDetalle_Resp>");
            soapMsg.append("</NS1:Body>");
            soapMsg.append("</NS1:Envelope>");            
        } else
            soapMsg.append(msg);
    } else
        soapMsg.append(msg);
    logger.info("EditedSoapMsg["+soapMsg+"]");
    return soapMsg.toString();
}` 
```

我的弹簧配置看起来像：

```
<bean id="tcPaymentServiceInterceptor" class="com.foo.bar.ws.interceptors.TcPaymentServiceInterceptor"/>

<bean id="cxf" class="org.apache.cxf.bus.spring.SpringBus">
    <property name="inInterceptors">
        <list>
            <ref bean="tcPaymentServiceInterceptor"/>
        </list>
    </property>
</bean> 
```

我希望这可以帮助有同样问题的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-01T14:47:09.417

我有同样的问题，在[http://forum.openkm.com/viewtopic.php?f=6&t=12494找到了解决方案](http://forum.openkm.com/viewtopic.php?f=6&t=12494)

Web 服务是使用简单的@WebService 和@WebParam 注释在java 中创建的。

从 2.5.1 到 2.6.14 似乎是 Apache CXF 库中的一个问题。Daniel Kulp 的第二个解决方案是简单的方法。

在 Android 的 ksoap2 (ksoap2-android-assembly-3.5.0-jar-with-dependencies.jar) 库中，您可以这样使用：

```
HttpTransportSE transporte = new HttpTransportSE("http://10.0.2.2:8080/server-ws/actionServerWS?wsdl");
transporte.call("", envelope); 
```

希望这个

# vb.net - Visual Basic 控制台应用程序下载百分比？

> ID：13902881
> 
> 赞同：1
> 
> 时间：2012-12-16T15:41:56.250
> 
> 标签：vb.net, download, webclient

我正在使用 DownloadFileAsync 下载更大的文件（1.3 GB），但我想添加一个简单的百分比指标（例如 64%）。我是 Visual Basic 的新手，我不知道该怎么做。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:48:15.793

如果您想更新进度显示，`WebClient`该类有一个[`DownloadProgressChanged`](http://msdn.microsoft.com/en-us/library/system.net.webclient.downloadprogresschanged.aspx)可以收听的事件。例如，如果你有一个控制台应用程序，它很简单：

```
Dim client As New WebClient()
AddHandler client.DownloadProgressChanged, AddressOf ProgressUpdate
client.DownloadFileAsync(yourURI, yourFile) 
```

```
Sub ProgressUpdate(sender As Object, e As DownloadProgressChangedEventArgs)
    ' Reset cursor position …
    Console.CursorTop -= 1
    Console.CursorLeft = 0
    Console.WriteLine("{0}% completed", e.ProgressPercentage)
End Sub 
```

另一方面，如果您`Form`在 WinForms 项目中，并且您有一个`ProgressLabel`要更新的标签，则以下代码将执行此操作：

```
Sub ProgressUpdate(sender As Object, e As DownloadProgressChangedEventArgs)
    Dim s = String.Format("{0}% completed", e.ProgressPercentage)
    Me.Invoke(New Action(Sub()
                             ProgressLabel.Text = s
                         End Sub))
End Sub 
```

由于多线程，该`ProgressUpdate`方法有点复杂：

`WebClient`正在后台线程中运行异步文件下载。但是，表单控件只能从运行表单的前台线程更新。因此，我们不能直接在`ProgressUpdate`事件内部更新标签（因为它也在后台线程¹中被调用和运行）。

所以我们要做的是使用[`Form.Invoke`](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)保证我们想要执行的任何东西都在表单自己的线程中执行的方法。我们将`Action`委托传递给`Invoke`包含我们要执行的代码的方法。该代码只是更新标签。

* * *

¹至少我在文档中找不到任何其他说明——事件实际上*可能*在前台线程中执行，但在这种情况下，上面的代码仍然有效。

# python - SQLAlchemy中的模型名称

> ID：13902883
> 
> 赞同：5
> 
> 时间：2012-12-16T15:42:22.270
> 
> 标签：python, reflection, orm, sqlalchemy

是否可以从名称中获取 ORM 映射的模型类？

绝对 SQLAlchemy 在某处内置了此功能。例如，在声明式风格中，您可以编写诸如`blahs = relationship('Blah')`（注意：不需要模块前缀）之类的东西。我试着往里面看，`sqlalchemy.orm.properties.RelationshipProperty`但不知道什么时候`argument`字符串被实际的东西替换了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-16T16:47:47.420

解析器不可公开访问；该`sqlalchemy.ext.declarative._deferred_relationship`函数被使用，并且它具有嵌套（隐藏）`resolve_arg`函数。

该函数使用以下逻辑来解析名称：

```
def access_cls(key):
    if key in cls._decl_class_registry:
        return _GetColumns(cls._decl_class_registry[key])
    elif key in cls.metadata.tables:
        return cls.metadata.tables[key]
    elif key in cls.metadata._schemas:
        return _GetTable(key, cls.metadata)
    else:
        return sqlalchemy.__dict__[key] 
```

where`cls`是声明性类（派生自`Base`）。从代码中可以看出，解析名称的一种方法是使用`cls._decl_class_registry`结构，给定一个 class `Foo`，您可以`'Blah'`使用`Foo._decl_class_registry['Blah']`.

`._decl_class_registry`结构只是一个`dict`python ；`Base`您还可以在创建类时指定自己的映射器：

```
class_registry = {}
Base = declarative_base(class_registry=class_registry) 
```

`class_registry`然后您可以直接在映射中查找类。

# c# - 在计算机上不活动后做某事

> ID：13902891
> 
> 赞同：0
> 
> 时间：2012-12-16T15:43:30.937
> 
> 标签：c#

假设我希望我的程序在一些不活动后做一些事情。例如，假设我的程序的用户不会按任何键/或移动鼠标 X 秒，然后在这些 X 秒之后它会显示一个 MSGBox，“你离开 X 秒”。

我认为它必须在任何程序上同时检测鼠标和键盘。但是，有什么快速的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T15:49:16.107

最简单的谷歌搜索提出了这一点：

[http://dataerror.blogspot.co.il/2005/02/detect-windows-idle-time.html](http://dataerror.blogspot.co.il/2005/02/detect-windows-idle-time.html) 应该可以

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:51:15.797

使用[计时器已过](http://msdn.microsoft.com/en-us/library/system.timers.timer.elapsed.aspx)

定义一个公共计时器，让它保持运行，并在表单事件或控制事件（如 MouseMove、KeyPress 等）上重置它

# c# - 如何用用户输入填充数组而不在代码中自己指定数组的长度

> ID：13902894
> 
> 赞同：1
> 
> 时间：2012-12-16T15:44:14.917
> 
> 标签：c#, java, arrays, algorithm, user-input

所以我试图用用户输入填充一个字符数组。但是我不想自己指定数组的长度，从而将用户限制在他们可以输入的数量。例如，我下面的代码将只允许用户输入 5 个字符然后退出。任何语言的代码都可以。（下面是C#）。

```
Console.Write("Enter a number of characters of your choice...click 1 to exit: ");
bool exitCondition;
int counter = 0;
char[] character = new char[5]; 
do
{
    exitCondition = false; 
    try
    {
        character[counter] = char.Parse(Console.ReadLine());
        if (character[counter] == '1')
            exitCondition = true; 
    }
    catch (Exception ex)
    {
        Console.WriteLine("Error: {0}", ex.Message); 
    }
    counter++;
}
while (exitCondition == false && counter < 5); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T15:45:56.440

数组的大小是静态的。使用`java.util.ArrayList`（来自 Collection 框架）它是可调整大小的数组。

```
List<Character> chars = new ArrayList<Character>();
chars.add('a');
chars.add('c');
chars.add('d'); 
```

> List 接口的可调整大小的数组实现。实现所有可选列表操作，并允许所有元素，包括 null。除了实现 List 接口之外，该类还提供了一些方法来操作内部用于存储列表的数组的大小。

[参考](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T15:46:28.260

您需要使用一个集合，它允许元素的集合增长或缩小。在 Java 中，an`ArrayList`适合您的场景。在 C# 中，您很可能会使用`List`.

**C＃**

```
List<char> list = new List<char>();
list.Add('a');
list.Add('b'); 
```

**爪哇**

```
List<Character> list = new ArrayList<Character>();
list.add('a'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T16:29:04.413

StringBuilder 就是你所需要的

```
StringBuidler sb = new StringBuilder();
sb.append(c);
... 
```

那么如果你真的想要它，你可以从中获取 char 数组

```
char[] a = sb.toString().toCharArray(); 
```

虽然通常它只是转换为字符串

```
 String s = sb.toString() 
```

还有一种方法可以直接使用 StringBuilder internal char[]

```
 char c = sb.charAt(i) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T18:22:02.217

或者，如果您出于某种隐藏的原因真的只想使用数组:)，那么您可以向用户询问输入项的数量并相应地初始化数组。

谢谢，海军

# jquery - 使用相同的表单和 S_POST 数据提交表单后 Jquery 更新 div

> ID：13902898
> 
> 赞同：0
> 
> 时间：2012-12-16T15:44:29.910
> 
> 标签：jquery

A 有一个带有 6 个（Jquery）选项卡的页面，每个选项卡上都有一个表单，我想提交其中一个表单而不刷新整个页面。当我提交表单时，我想在该选项卡中“重新加载”相同的表单，但使用 $_POST 数据，以便我可以将其用于 PHP 脚本（验证后数据库插入）。

我尝试了 Jquery AJAX，但我必须再次定义表单元素以传递 POST 数据，难道没有类似 action="" 的方法，但只针对那个选项卡而不是整个页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:55:42.500

```
$('form').submit(function(e){ 
    e.preventDefault(); //to prevent the page form reloading

    //provide the ajax call part after this

    return false; // to exit the function without actually submitting the form
}); 
```

# redirect - 使用“>>”重定向输出并不总是有效？

> ID：13902900
> 
> 赞同：0
> 
> 时间：2012-12-16T15:44:39.520
> 
> 标签：redirect, stdout

我有这样的问题。当我对 7zip 使用命令时：

```
7za a -t7z file.7z file.iso 
```

我在控制台中看到动态变化的输出是这样的：

```
7-Zip (A) 9.20  Copyright (c) 1999-2010 Igor Pavlov  2010-11-18
Scanning

Creating archive file.7z

Compressing  file.iso    12% 
```

当我使用命令将输出重定向到文件时：

```
7za a -t7z file.7z file.iso >> file.txt 
```

我刚刚收到最后一条消息：

```
7-Zip (A) 9.20  Copyright (c) 1999-2010 Igor Pavlov  2010-11-18
Scanning

Creating archive file.7z

Compressing  file.iso

Everything is Ok 
```

为什么？我想要所有的消息。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T12:46:38.697

一切都好，我在当前稳定的 debian 7.1 64bit 下使用完全相同的 7zip 版本。7zip 检测，stdout 是否分配给终端。当不终端时，这在后台使用选项 -bd ，禁用百分比指示器。开发人员假设您阅读了日志后事实，并且不会即时分析输出。不幸的是，无法打开文件上的百分比。您只能关闭屏幕上的百分比。

你需要 % in log file.txt 什么？

# javascript - 在 twitter bootstrap bs-docs-sidebar 下方添加其他项目

> ID：13902902
> 
> 赞同：0
> 
> 时间：2012-12-16T15:44:51.547
> 
> 标签：javascript, html, css, twitter-bootstrap

所以我目前想做的是在 bs-docs-sidebar 下方添加一些内容以用于 twitter bootstrap。我目前正在使用此代码

```
<div class="row-fluid">
<div class="span3 bs-docs-sidebar">
<div class="row-fluid">
     <ul class="nav nav-list bs-docs-sidenav affix">
        <li><a href="#typography"><i class="icon-chevron-right"></i>item 1</a></li>
        <li><a href="#code"><i class="icon-chevron-right"></i> item 2</a></li>
        <li><a href="#tables"><i class="icon-chevron-right disabled"></i> Item 3</a></li>
        <li><a id="contribute" href="#forms"><i class="icon-chevron-right"></i> item 4</a>          
        <li><a id="contribute" href="#buttons"><i class="icon-chevron-right"></i> item </li> 5</a></li>
    </ul>
    <div class="well affix">
        <h4>Big Heading</h4>
        <div class="btn-group btn-block">
            <button type="button" class="btn btn-warning">option 1</button>
            <button type="button" class="btn btn-warning">option 2</button>
            <button type="button" class="btn btn-warning">option 3</button>
        </div>
        <h4 class="pagination-centered">Or</h4>
        <button class="btn btn-block btn-primary">Alternative</button>
    </div>
</div> 
```

但是井的位置，不在导航菜单下方，卡在页面底部，并且因为井内容似乎将其推到范围之外而被切断，有没有办法贴在底部导航菜单？

# java - 使用 netbeans 上的 GUI 构建器在主 GUI 上打开一个新的 GUI 窗口

> ID：13902907
> 
> 赞同：0
> 
> 时间：2012-12-16T15:45:26.447
> 
> 标签：java, user-interface, netbeans, menuitem, menubar

我正在玩 GUI builder，我想知道是否有一种简单的方法可以通过当前主窗口打开注册窗口（参考下面的页面）。我试图通过菜单栏做到这一点。

我整天都在尝试，因为 GUI Builder 会生成一些代码，所以无法编辑此代码。

![在此处输入图像描述](../Images/04973c62602da9391b364c94108d5241.png)

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T15:55:19.927

创建一个单独的类来扩展`JDialog`类并添加您的 GUI 组件：

```
public Register extends JDialog {
   //Make GUI
   setModalityType(ModalityType.APPLICATION_MODAL); //Make it modal
} 
```

添加`ActionListener`到应该打开注册窗口的菜单项：

```
mnuItmRegisteration.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e){
        Register r = new Register();
        r.setVisible(true);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T15:54:14.497

右键单击该快捷按钮，单击事件，单击 ActionPreformed。
您应该在那里编写代码以使您的注册窗口出现。
一个例子：

```
 private void RegisterationEventActionPerformed(java.awt.event.ActionEvent evt) { 
    JFrame Register = new Register();
    Register.setVisible(true);
  } 
```

请记住在与当前 JFrame 相同的包中创建另一个名为（“注册”假设您使用我提供的代码）的 JFrame 也许您应该使用运行按钮（带有绿色三角形或箭头的按钮），运行它尝试按下菜单项，它应该会出现注册窗口。

# codeigniter - 使用 CodeIgniter 的 XSS 过滤是否可以避免输出时需要转义？

> ID：13902908
> 
> 赞同：1
> 
> 时间：2012-12-16T15:45:29.680
> 
> 标签：codeigniter, xss

CodeIgniter 为 XSS 过滤提供了几个方便的 API。

*   config.php 中的“global_xss_filtering”。
*   使用表单验证库时，单个字段的“xss_clean”规则。

如果使用此功能，是否避免在输出字段时需要转义字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T16:25:21.713

在某些情况下 xss_clean 不会保护您。 [问题 470](https://github.com/EllisLab/CodeIgniter/issues/470#issuecomment-2156667)包括此示例：

```
public function index()
{

    $name = $this->security->xss_clean('hover me" onmouseover=alert("XSS2") "'); 
    echo '</div>Name:<input value="'.$name.'">';
    echo '</body></html>';
} 
```

开发人员的回应是这是设计使然，并建议`$name`应该使用`form_prep()`.

如果您`set_value('field-name', 'default')`在表单验证失败时使用以保留用户输入），那将......尝试为您调用 form_prep() 。需要注意的是，如果您没有加载表单验证库，它不会转义“默认”参数。（[问题 1781](https://github.com/EllisLab/CodeIgniter/issues/1781)，在 3.0-dev 中修复）。

如果您*正在*运行当前的 3.0-dev，`form_prep()`则更具体地说明它转义了哪些字符。无论哪种方式，它都应该避免 XSS；它只是在某些情况下产生了意想不到的结果。例如，如果您尝试`&amp;`在 3.0-dev 中输入文字“”，然后表单验证失败，则字段值将更改为`&`没有警告。此更改是为了解决双重转义问题（[issue 1953](https://github.com/EllisLab/CodeIgniter/issues/1953)）。

# c++ - 是否允许 std::tuple 的实现因触发空类元素的派生到基转换而失败？

> ID：13902910
> 
> 赞同：18
> 
> 时间：2012-12-16T15:45:39.890
> 
> 标签：c++, c++11, language-lawyer, stdtuple

这段代码不能用 GCC4.7 编译

```
struct A {};
void f(A);

struct B { B(std::tuple<A>); };
void f(B);

int main() {
  f(std::make_tuple(A()));
} 
```

因为GCC派生自`A`利用空基类优化。然而，这导致 GCC 挑剔`f(A)`和抱怨

> 错误：`'A'`是一个不可访问的基础`'tuple<A>'`

这个错误是由 C++ 标准授予的还是仅仅是 libstdc++ 的一个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T16:07:04.880

我会**说不**。

至少：

> **§20.4.1 [tuple.general]**
> 
> **1/** [...] 具有两个参数的 tuple 实例化类似于具有相同两个参数的 pair 实例化。见 20.3。

但是：

```
#include <tuple>

struct A {};
void f(A);

struct B { B(std::tuple<A, A>); };
void f(B);

int main() {
  f(std::make_tuple(A(), A()));
} 
```

[失败](http://liveworkspace.org/code/2KmeWQ$1)：

```
Compilation finished with errors:
source.cpp: In function 'int main()':
source.cpp:10:30: error: 'A' is an ambiguous base of 'std::tuple<A, A>'
source.cpp:4:6: error: initializing argument 1 of 'void f(A)' 
```

我非常怀疑这是标准的意图。

尽管如此，至少可以说 §20.4 相当简洁......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T10:45:08.753

根据第 17 条**图书馆介绍**：

> ### 17.5.2.3 私有成员[objects.within.classes]
> 
> 1 - 第 18 到 30 条和附录 D 没有指定类的表示，并且有意省略了类成员的说明。实现可以定义静态或非静态类成员，或两者，根据需要实现第 18 到 30 条和附录 D 中指定的成员函数的语义。

这得到**1.4 实施合规性 [intro.compliance]**的支持：

> 3 - 对于类和类模板，库子句指定部分定义。未指定私有成员（第 11 条），但每个实现都应提供它们以根据库条款中的描述完成定义。

在第 17 节的任何地方都没有明确讨论通过继承实现指定的语义，但通过上面 17.5.2.3 的第 3 段隐含地允许这样做：

> 3 - 实现可以使用任何提供等效外部行为的技术。

例如，这就是基于节点的有序关联容器如何通过继承共享实现细节（最终包括类成员）。

`tuple`由于在作为类成员和直接继承它之间的外部行为发生了变化`A`，并且由于这种行为变化导致拒绝其他格式良好的程序（而不是仅仅改变`sizeof`类的），所以 libstdc++ 违反了标准。

# powershell - 复制/创建多个文件

> ID：13902911
> 
> 赞同：0
> 
> 时间：2012-12-16T15:45:42.027
> 
> 标签：powershell, file-io, powershell-3.0

我需要先创建然后通过 powershell 复制数百个文件夹和文件（首先在本地存储上创建它们，然后将它们复制到远程存储）。但是，当我的 foreach 循环运行时，由于“另一个进程”阻塞了文件/文件夹，每 40 次左右的写入尝试都会失败。我目前在每个文件创建（100 毫秒）之间使用简单的睡眠解决了这个问题。但是，我想知道是否没有更好的方法来做到这一点？特别是在复制多个文件时，睡眠将取决于网络延迟，对我来说似乎不是一个好的解决方案。

有没有办法在开始另一个操作之前“等待”文件的写操作完成？或者检查一个文件是否仍然被一个进程阻止并等到它再次空闲？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T22:18:16.480

您是否尝试过将代码作为工作来运行？例子：

```
foreach ($file in $files) {
    $job = Start-Job -ScriptBlock {
     #operation here..
    } | Wait-Job
    #Log result of job using ex. $job and:  '$job | Receive-Job'   to get output
} 
```

您还可以扩展它以创建多个作业，然后使用`Get-Job | Wait-Job`等待全部完成后再继续。

# java - 从命令行创建 JAR 文件不起作用

> ID：13902918
> 
> 赞同：0
> 
> 时间：2012-12-16T15:46:42.910
> 
> 标签：java, class, jar, extract, pack

我已经编辑了这个问题，现在这正是我所做的：

我想从命令行中的一些 .class 文件创建一个 .jar 文件。

我在 Eclipse 上工作，并创建了：

myProject 项目，其中：myPackage 包，其中：myClass 类。然后我在命令行中写道：

```
jar -cfv myJar.jar  myPackage\myClass.class 
```

我得到了这个：

```
added manifest
adding: myPackage/myClass.class(in = 745) (out= 473)(deflated 36%) 
```

这确实在我的当前目录中创建了 myJar.jar 文件。现在，我想检查该过程是否成功完成，因此我从 jar 中提取了该类：

```
jar xfv myJar.jar 
```

我得到了这个：

```
 created: META-INF/
 inflated: META-INF/MANIFEST.MF
 inflated: myPackage/myClass.class 
```

这为我创建了 META-INF 文件夹，其中包含 MANIFEST.MF，但我在这里看不到任何 .class 文件！

包装到 jar 过程中的某些内容似乎不正确。

有人有想法吗？？

任何答案表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T15:59:44.650

根据你给出的输出，你执行的目录下没有myClass.class文件

```
jar -cf myJar.jar myClass.class 
```

很明显，该命令无法将其添加到 jar 中：它不存在。如果要递归地将 myClass 目录添加到 jar 文件中，请使用

```
jar -cf myJar.jar myClass 
```

编辑：

看看输出：

```
 inflated: myPackage/myClass.class 
```

myClass.class 文件在 jar 文件中。完全没有问题。

# php - 将图像附件添加到 php 消息？

> ID：13902920
> 
> 赞同：1
> 
> 时间：2012-12-16T15:47:03.767
> 
> 标签：php, mysql, image, upload, message

我的网站上有一个 php 消息系统。有了它，用户可以互相发送和接收消息，但最近我一直在尝试寻找一种包含图像附件的方法，以便用户可以发送带有消息的照片。

消息存储在 ptb_messages 中，消息部分（主题和正文）工作正常，但我在表中创建了一个名为“图像”的列，它是一个 BLOB 类型和一个“名称”列来存储图像名称。但是我是 php 和 mysql 的新手，无论我尝试什么，我似乎都无法将图像存储在数据库中。

谁能帮助我，让我知道我哪里出错了？

```
<?php ob_start(); ?>

<?php 

// CONNECT TO THE DATABASE
    require('includes/_config/connection.php');
// LOAD FUNCTIONS
    require('includes/functions.php');
// GET IP ADDRESS
    $ip_address = $_SERVER['REMOTE_ADDR'];

?>

  <?php require_once("includes/sessionframe.php"); ?>

<?php
    confirm_logged_in();
    if (isset ($_GET['to'])) {
       $user_to_id = $_GET['to'];
    }
?> 
<?php 
//We check if the form has been sent
if(isset($_POST['subject'], $_POST['message_content']))
{
    $subject = $_POST['subject'];
    $content = $_POST['message_content'];
    $image = $POST ['image'];

        //We remove slashes depending on the configuration
        if(get_magic_quotes_gpc())
        {
                $subject = stripslashes($subject);
                $content = stripslashes($content);
        $image = stripslashes($image);      
        }

        //We check if all the fields are filled
        if($_POST['subject']!='' and $_POST['message_content']!='')
        {
$sql = "INSERT INTO ptb_messages (id, from_user_id, to_user_id, subject, content, image) VALUES (NULL, '".$_SESSION['user_id']."', '".$user_to_id."', '".$subject."', '".$content."', '".$image."');";
            mysql_query($sql, $connection);

            echo "<div class=\"infobox2\">The message has successfully been sent.</div>";
        }
}
if(!isset($_POST['subject'], $_POST['message_content']))

if (empty($_POST['subject'])){
    $errors[] = 'The subject cannot be empty.';
    if (empty($_POST['body'])){
       $errors[] = 'The body cannot be empty.';
    }
}

{
?>

<form action="<?php $_SERVER['PHP_SELF'] ?>" method="post">
  <div class="subject">
  <input name="subject" type="text" id="subject" placeholder="Subject">
  <input type="file" name="image" id="image">
  <textarea name="message_content" id="message_content" cols="50" placeholder="Message" rows="8" style="resize:none; height: 100px;"></textarea>
  <input type="image" src="assets/img/icons/loginarrow1.png" name="send_button" id="send_button" value="Send">
</form>

<?php } ?>

<?php ob_end_flush() ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:15:10.597

我的建议是将图像的 URL 存储在数据库中，而不是图像文件本身。将图像存储在服务器文件系统中。原因在于备份和性能的概念，其中移动一个巨大的 blob 列重复多次并不是一件好事。另外，如果有人在没有 LIMIT 子句的情况下编写了 SELECT *，您将获得一个传输所有图像的表扫描。

也就是说，如果您坚持将图像存储在数据库表中，您可能希望使用 base64_encode() 使图像文件对二进制传输安全。在将图像发送到浏览器之前，您可以调用相应的解码函数。

[http://php.net/manual/en/function.base64-encode.php](http://php.net/manual/en/function.base64-encode.php)

HTH，~雷

# android - Android Wakelock 受什么影响？

> ID：13902924
> 
> 赞同：1
> 
> 时间：2012-12-16T15:47:31.610
> 
> 标签：android, wakelock

我目前正在开发一个不时运行服务的应用程序。目前，该服务获取唤醒锁，读取一些传感器并通过 WIFI（如果有）发送一些信息。现在我想知道的是唤醒锁是否会影响传感器和连接性。是否可以在没有任何唤醒锁的情况下完成这些任务？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:50:30.170

唤醒锁本质上用于将设备锁定在“唤醒”状态，在这种状态下 CPU 将打开，屏幕可能打开也可能不打开。

如果手机处于睡眠状态，则无法在没有唤醒锁的情况下执行这些任务，否则 CPU 也处于睡眠模式。但是，如果用户将设备用于其他目的，并且您的应用程序在后台，您可以在没有唤醒锁的情况下执行这些任务。

请记住，您所做的几乎所有事情都是电池密集型的（传感器、WiFi、唤醒锁），您不应该经常这样做，以免降低用户的电池寿命。

# jquery-ui - 使用 AJAX 添加 jQueryUI 可选项目

> ID：13902925
> 
> 赞同：0
> 
> 时间：2012-12-16T15:47:31.013
> 
> 标签：jquery-ui, jquery, jquery-ui-selectable

我正在使用一些 AJAX（ASP.NET Web 窗体）在我的网站上添加新的可选择元素，但新创建的元素不可选择。我想这与某些事件有关。也许可以通过在这些功能上使用 .on 来解决，但我不知道该怎么做。有谁知道如何解决这个问题？

这是我的代码：

```
$(".selectable").selectable({
filter: '.ui-widget-content',
stop: function () {
    var result = $("#select-result").empty();
    $(".ui-selected", this).each(function () {
        var index = $(this).attr('id');
        index = index.substring(12, index.length);
        result.append(" #" + index);
    });
}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T16:37:40.653

当您加载页面时，jquery 会为每个 html 标签分配相应的功能。当您创建一些新的 div/html 标签时，您应该重新初始化该函数，因为 jquery 不知道您新创建的 html 标签，

对于相应的查询，尝试在添加新的可选元素后重新初始化 jquery 函数

希望这有帮助..

# java - WSO2 应用程序服务器：区分重复的方法名称

> ID：13902928
> 
> 赞同：1
> 
> 时间：2012-12-16T15:47:57.120
> 
> 标签：java, wso2, axis, application-server

对于大学的一个项目，我正在尝试在 WSO2 Application Server v5.01 上设置一个非常简单的 HelloWorld-Service。它包含一个接口和一个具有三个方法的类。

界面：

```
public interface HelloWorld {
  public String helloWorld();
  public String sayHello(String name);
  public String sayHello(String name, String surename);
} 
```

执行：

```
public class HelloWorldImpl implements HelloWorld {

  @Override
  public String helloWorld() {
    return "Hello World!";
  }

  @Override
  public String sayHello(String name) {
    return "Hello " + name;
  }

  @Override
  public String sayHello(String name, String surname) {
    return "Hello " + name + " " + surname;
  }
} 
```

如您所见，该实现包含两个具有相同名称的方法。如果我将此打包为 aar 文件上传，则该服务仅提供第二种方法签名。我怎样才能告诉服务提供两者？有没有我可以添加的注释或者如何做到这一点？

任何帮助表示赞赏！提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:38:05.107

您已将 Axis2 用作 Web 服务引擎，并且 Axis2 不支持操作重载。正如一些人提到的，不鼓励在 Web 服务中使用操作重载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T16:29:35.623

许多远程实现不支持重载方法（同名，不同的参数）。只需通过使您的 sayHello 方法的方法名称彼此不同来避免它

# ios - 从 CoreGraphics 升级

> ID：13902931
> 
> 赞同：1
> 
> 时间：2012-12-16T15:48:11.350
> 
> 标签：ios, opengl-es, core-graphics

我编写了我的第一个 iOS 应用程序 Amaziograph，它使用了 Core Graphics。我的应用程序是一个绘图应用程序，它使用绘制很多线条（最多 30 条线条，在不同的位置+一些阴影来模拟画笔模糊，并且它需要看起来好像所有线条都同时绘制）用CG，我发现它很慢。事实上，当我切换到 Retina 并尝试用手指只画一条线时，我需要等待一秒钟左右才能画出。

我意识到 Core Graphics 不再满足我的应用程序的要求，因为我想让它利用 Retina 显示器的优势并添加一些 Photoshop 风格的画笔。

我的问题是，有没有比 Core Graphics 更快、更强大但界面简单的图形库。我所需要的只是绘制具有大小、不透明度、柔软度的简单线条，并可能使用一些更高级的画笔。在看到 Apple 的 GLPaint 应用程序后，我想到了 OpenGL，但是对于所有这些帧缓冲区、上下文等，这对我来说似乎有点复杂。我正在寻找与 CG 意识形态相似的东西，因此重写我的代码不会花费太多时间。另外，现在我在 UIImage 视图中进行所有绘图，所以直接在 UIImages 上绘制会很好。

这是我现在用来绘制的代码的摘录：

```
//...Begin image contest >> draw the previous image in >> set stroke style >>
CGContextBeginPath(currentContext);
CGContextMoveToPoint(currentContext, lastPoint.x, lastPoint.y-offset);
CGContextAddLineToPoint(currentContext, currentPoint.x, currentPoint.y-offset);
CGContextStrokePath(currentContext);
//Send to an UIImage and end image contest... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T15:59:22.393

对于 iOS 平台，您不会再找到性能比 Core Graphics 更好的图形库。很可能您的应用程序可以得到显着优化，有很多技巧可以使用。您可能对 2012 年的 WWDC 视频 506 感兴趣：

[http://developer.apple.com/videos/wwdc/2012/](http://developer.apple.com/videos/wwdc/2012/) ￼ 优化 2D 图形和动画性能

他们演示了一个使用以全帧速率工作的 Core Graphics 的绘图应用程序。

# php - 即使使用 CTRL+F5 也无法刷新 Ajax 缓存

> ID：13902938
> 
> 赞同：2
> 
> 时间：2012-12-16T15:48:44.887
> 
> 标签：php, ajax, caching, header

一段时间以来，我一直在努力寻找一种方法来缓存我的 ajax 数据，最后我找到了，但它有点太远了，请参阅我的标题...

我只使用一个名为“test.php”的 PHP 文件，其中包含一些 html 和 jquery。

省略了一些代码，因为最重要的部分是那三个**header('...')**。

你不能错过任何一个，否则ajax数据将不会被缓存，但是一旦你得到它们，即使使用`Ctrl`+也不会刷新ajax数据，`F5`除非清除浏览器的缓存。

我不想失去缓存的好处，但是当数据库更新 ajax 请求仍然得到 304（未修改）。至少在`Ctrl`+之后`F5`，让我得到 200（OK）的响应。

```
<?php
  ...
  $test = $_GET['test'];
  $query = "select * from `xx` where id = '$test'";
  $result = mysql_query($query);
  while($row = mysql_fetch_assoc($result)){
    $str .= $row['name'];
  }

  //I want ajax data to be cached for only one hour

  $cache_time = gmdate('D, d M Y H:i:s',strtotime('+1 hour')).' GMT';

  header('Cache-Control:must-revalidation');
  header('Expires:'.$cache_time);
  header('Pragma:cache');

  exit($str);
?>

<!DOCTYPE HTML>
<html>
  <body>
  ...
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript">
    $(function(){
      $('li').live('click',function(){
        $.ajax({
          type:"GET",
          data:'test=' + test,
          dataType:"text",
          url:"test.php",
          success:function(text){
            alert(text);
          }
        });
      });
    });
  </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T11:00:28.350

你应该使用

```
header('Cache-Control:must-revalidate'); 
```

而不是毫无意义

```
header('Cache-Control:must-revalidation'); 
```

# c - 用C中的表指针交换char

> ID：13902939
> 
> 赞同：0
> 
> 时间：2012-12-16T15:49:07.227
> 
> 标签：c, arrays, pointers, char

我正在尝试用两个表指针交换两个字符。有人可以向我解释我的代码有什么问题吗？终端说`char** is expected`但我不知道该怎么做，所以我想我并不真正了解指针如何为表工作。

```
void echangeM2(char **ptab1, char **ptab2){

  char *tmp = *ptab1;
  *ptab1 = *ptab2;
  *ptab2 = *tmp;
  printf("%s\t %s",*ptab1,*ptab2);

  return;
}

int main(void) {
  char tab1[25];
  char tab2[25];
  char *adtab1;
  char *adtab2;
  *adtab1 = &tab1;
  *adtab2=&tab2;
  printf("type two words");
  scanf("%s %s",tab1,tab2);
  echangeM2(adtab1,adtab2);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:51:08.503

以下代码应该适合您：

```
#include <stdio.h>

void exchangeM2(char* *ptab1, char* *ptab2) { // accepts pointer to char*
  char* tmp = *ptab1;  // ptab1's "pointed to" is assigned to tmp
  *ptab1 = *ptab2;     // move ptab2's "pointed to" to ptab1
  *ptab2 = tmp;        // now move tmp to ptab2
  printf("%s\t %s",*ptab1,*ptab2);
}

int main(void) {
  char tab1[25];
  char tab2[25];
  char* adtab1;
  char* adtab2;
  adtab1 = tab1;  // array name itself can be used as pointer
  adtab2 = tab2;
  printf("type two words");
  scanf("%s %s",tab1,tab2);
  exchangeM2(&adtab1, &adtab2);  // pass the address of the pointers to the function
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:50:50.763

```
echangeM2(&adtab1,&adtab2); 
```

这应该可以修复编译错误。您正在将指针传递给需要指针`char*`的函数`char **`

编辑：实际上看起来你想要类似的东西

```
char **adtab1;
char **adtab2;
adtab1 = &tab1;
adtab2=&tab2;
...
echangeM2(adtab1,adtab2); 
```

# php - PHP MySQL隐藏超过1分钟的行

> ID：13902941
> 
> 赞同：1
> 
> 时间：2012-12-16T15:49:37.040
> 
> 标签：php, mysql

我正在尝试制作一个 PHP 聊天脚本，并且**我想确保它不显示任何早于 1 分钟的条目**。数据库在每一行都包含一个时间戳，称为`timestamp`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:51:45.700

### SQL

```
SELECT *
FROM tablename
WHERE timestamp > TIMESTAMP(DATE_SUB(NOW(), INTERVAL 1 MINUTE)) 
```

自从我使用该特定功能以来已经有一段时间了，所以我可能有点偏离，但它已经接近了。

### JavaScript

听起来您可能想主动隐藏旧消息。在这种情况下，您需要包含时间戳元数据，以便您可以使用 JavaScript 对其进行过滤。

# parse-platform - Parse.com：如何返回会话令牌？

> ID：13902942
> 
> 赞同：6
> 
> 时间：2012-12-16T15:49:36.680
> 
> 标签：parse-platform

我已经为我的应用程序创建了一个注册函数来调用，并创建了 Parse.com 后端 JS 代码来注册用户。

果然，用户将出现在数据库中。哎呀，我什至收到了要发送的验证电子邮件（这比应该*的要*困难得多。它是主解析后端的“设置”部分下的设置，而不是以编程方式设置的设置）。

现在我正在尝试从新注册的用户那里获取 sessionToken。在注册和检查成功时返回“用户”对象，我没有看到“sessionToken”。我也没有在用户数据库中看到 sessionToken ...

有人可以给我一些返回 sessionToken 的代码吗？

以下是相关代码：

```
user.signUp(null, {
  success: function(user) {
    response.success(user);
  },
  error: function(user, error) {
    alert("Error: " + error.code + " " + error.message);
  }
}); 
```

我这里没有 sessionToken。我从哪里得到它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T09:22:36.563

我认为您需要检查本地存储：

本地存储报告

本地存储有 5 个项目，使用 0.9KB (0.001MB)

解析/bqfSO3dVttG65a8CIkC1SdqC0CCqiqYsp1EfsjL8/currentUser

用户名 XXX@gmail.com
电子邮件 XXX@gmail.com
objectId oVGKr1vdbG
创建于 2013-03-20T17:17:54.815Z
更新于 2013-03-20T17:17:54.815Z
_id oVGKr1vdbG
_sessionToken 12aob7us2lj18pkaddkbvsal7

这就是 Parse 在执行时检查的内容：

```
var currentUser = Parse.User.current();
var sessionToken = Parse.User.current()._sessionToken; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-30T22:24:21.100

我最终使用的代码如下所示：

```
endpoint : "https://api.parse.com/1/login",
    parameters : getTheLoginParametersFrom(user),
    success : function(response) {
        tablesModule.saveSessionId(response.sessionToken);
    }
} 
```

“登录”的结果是 response.sessionToken。

# php - PHP MySQL 函数的未来

> ID：13902943
> 
> 赞同：5
> 
> 时间：2012-12-16T15:50:07.070
> 
> 标签：php, mysql, pdo, mysqli, deprecated

根据 PHP.net 网站，从 PHP 5.5+ 起不推荐使用 MySQL 扩展鉴于大量使用 MySQL 的 PHP 站点，我想知道使用 MySQL 的现有站点的最佳实践是什么。您会在支持 MySQL 的 PHP 版本上稳定您的网站吗？或者承担迁移到另一个数据库扩展的成本和时间承诺？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T15:57:04.200

**如果您有开发时间，**那么我强烈建议您迁移到 PDO 或 MySQLi。这些扩展将由 PHP 组维护和正式支持。

**如果您的应用程序确实稳定且安全，**那么我将禁用 5.5 将生成的警告。当扩展被删除时，我确信它仍然会作为一个 PECL 扩展存在，然后我会包含它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T15:52:43.680

不推荐使用 MySQL 扩展，而不是整个 MySQL 支持。PHP 目前正在尝试推送新的 MySQLi 扩展作为替代：

[http://php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)

MySQLi 对旧函数进行了改进，允许您以程序方式（如以前）或使用对象执行 MySQL 函数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-16T16:09:56.997

> 我想知道使用 MySQL 的现有站点的最佳实践是什么。

这个很容易回答。
您的应用程序代码中根本不应该有 Mysql（以及 Mysqli 或 PDO）函数。
如果您使用这样的原始 API 函数

```
$data   = array();
$name   = mysql_real_escape_string($_GET['name']);
$result = mysql_query("SELECT * FROM table WHERE name = '$name'");
while ($row = mysql_fetch_row($result)){   
    $data[] = $row;
} 
```

然后你必须**立即开始重写你的代码**，使用一些*数据库包装器*而不是直接的原始 API 调用，让它看起来像这样：

```
$data = $db->getAll("SELECT * FROM table where name=?s",$_GET['name']); 
```

它不仅会显着缩短和简化您的代码，而且还将所有 API 调用放在一个库中，当 PHP 团队决定杀死另一个优秀的 ext 时，可以将其更改为任何新的 API。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-16T15:54:49.357

正如 PHP 手册所写，[http ://php.net/manual/en/intro.mysql.php](http://php.net/manual/en/intro.mysql.php)

> 此扩展自 PHP 5.5.0 起已弃用，不推荐用于编写新代码，因为它将在未来被删除。相反，应该使用 mysqli 或 PDO_MySQL 扩展。在选择 MySQL API 时，另请参阅 MySQL API 概述以获得更多帮助。

你应该使用mysqli。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-16T16:07:02.057

如果您要离开 mysql，请不要选择 MySQLi，而是选择**PDO**。

见 [mysqli 或 PDO - 有什么优点和缺点？](https://stackoverflow.com/questions/13569/mysqli-or-pdo-what-are-the-pros-and-cons)

如我所见：PDO > MySQLi > mysql。

一些 PDO 专业人士：

*   多数据库
*   面向对象（如果您不提供可选的 dblink，则没有具有奇怪副作用的全局函数）
*   快速地
*   特殊的 MySQL 特定选项仍然可用： http: [//php.net/manual/en/ref.pdo-mysql.php](http://php.net/manual/en/ref.pdo-mysql.php)

# jquery - 如何在网页加载时全屏播放视频？

> ID：13902946
> 
> 赞同：1
> 
> 时间：2012-12-16T15:50:40.143
> 
> 标签：jquery, html, video, fullscreen

它需要是跨平台的，我开发了这个网站 [http://www.thereelthing.com.sg/](http://www.thereelthing.com.sg/)。您将看到的第一个视图将显示视频。问题是我需要这个视频在不同的浏览器上全屏显示，目前我使用花哨的盒子，视频是从[http://vimeo.com/](http://vimeo.com/)加载来显示的。但是我可以使用任何网络播放器从我自己的服务器加载没有限制。

谢谢 注意：此视频由 cookie 设置，仅在首次访问网站时显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-19T23:08:12.563

您可以使用一些 CSS，如下所示：

```
#video { 
    position: fixed;
    top: 50%;
    left: 50%;
    min-width: 100%;
    min-height: 100%;
    width: auto;
    height: auto;
    z-index: 100;
    -ms-transform: translateX(-50%) translateY(-50%);
    -moz-transform: translateX(-50%) translateY(-50%);
    -webkit-transform: translateX(-50%) translateY(-50%);
    transform: translateX(-50%) translateY(-50%);

    z-index:300;
} 
```

并使用一些 JavaScrip 使其消失：

```
setTimeout(hideDiv, 9000);
function hideDiv() {                   
    $("#video").fadeOut("slow");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T07:04:41.120

有可能，只是不推荐。这是非常具有侵略性的。但是，如果您的客户绝对需要它，您总是可以使用[HTML5 全屏 API](http://hacks.mozilla.org/2012/01/using-the-fullscreen-api-in-web-browsers/)，越来越多的浏览器正在采用该 API（Chrome/Firefox/Safari 是一些早期采用者）。你应该查一下。

但重要的是要注意这不能在加载时加载（出于安全目的），并且必须由用户触发的事件触发，例如“onclick”。我想 onmouseover 也可以触发它（例如，您的鼠标会悬停在您客户的网页上）。

抱歉回复晚了：我刚刚发现了这个帖子。

# c# - 如何提高扫雷算法的性能？

> ID：13902957
> 
> 赞同：4
> 
> 时间：2012-12-16T15:52:12.670
> 
> 标签：c#, recursion

我目前正在制作扫雷克隆。我做了一个算法，当点击一个周围有 0 个地雷的图块时，显示所有周围有 0 个地雷的邻居，然后显示它们的所有邻居，周围有 0 个地雷......（递归）。这个结果只需要一键：

![](../Images/f440d959ef566d205b2db23f9d876fe2.png)

它像它应该的那样工作，但它太慢了。最初的扫雷会立即显示这些图块，但就我而言，它们在显示之间有一点延迟。

我写了这段代码：

```
private void RevealNeighbor(int x, int y) {
    foreach(var neighbor in _neighbors) {
        try {
            Tile tile = _tiles[x + neighbor[0], y + neighbor[1]];
            if(tile.TileType == TileType.Empty && tile.Hidden) {
                tile.Reveal();
                if(tile.Number == 0) {
                    RevealNeighbor(x + neighbor[0], y + neighbor[1]);
                }
            }
        }
        catch(IndexOutOfRangeException) {
        }
    }
} 
```

`_neighbors`是一个数组数组，它​​有 8 个邻居的位置偏移量：

```
private readonly int[][] _neighbors = new[] {
                                          new[] {-1, -1},
                                          new[] {0, -1},
                                          new[] {1, -1},
                                          new[] {1, 0},
                                          new[] {1, 1},
                                          new[] {0, 1},
                                          new[] {-1, 1},
                                          new[] {-1, 0}
                                      }; 
```

我怎样才能让它更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T16:22:41.020

使用 SuspendLayout 方法，仅在需要时绘制：

*false 是设计器的默认值，找出它的含义

```
this.SuspendLayout();
... logic      
this.ResumeLayout(false); 
```

ALSO - 避免滥用 Exceptions 机制，这不是有效且不好的做法

**而是使用一堵墙**（矩阵末端的额外瓷砖表示......好吧......一堵墙）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T15:58:57.503

我猜 RevealNeighbor 实际上会重新绘制董事会。相反，您应该计算将要显示的内容，然后才重新绘制董事会。

# javascript - jQuery 动画与 GreenSock TweenMax

> ID：13902961
> 
> 赞同：11
> 
> 时间：2012-12-16T15:52:49.093
> 
> 标签：javascript, jquery, gsap

`jquery.animate()`我遇到了一个问题，使用**GreenSock** *TweenMax*动画引擎的优缺点是什么。所以也许有人知道。网络上没有足够的信息，性能如何。

我尝试同时使用`jquery.animate()`和*tweenMax*，但在某些情况下，我更喜欢在其他**GreenSock中使用****jQuery**引擎。

 **我试图决定哪个更好，而不是从一个跳到另一个。

感谢将来，知道使用哪个真的很有趣。

**引擎：**

[http://jquery.com](http://jquery.com)

[https://www.greensock.com/gsap-js/](https://www.greensock.com/gsap-js/)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-16T16:22:52.660

jQuery 的fadeIn() 和fadeOut() 方法非常方便。但是，如果您想要更具表现力的东西，我建议您使用**GSAP（GreenSock 动画平台）**。根据 GreenSock 的说法，jQuery 动画通常有点慢，而 TweenLite 比 jQuery 动画快得多（20 倍）。

此外，您将获得非常方便的动画功能，例如反向、贝塞尔曲线、时间平移、暂停和倾斜等，以及更好的移动设备硬件加速支持。

就个人而言，我认为 GSAP 更好，但一个小巧方便的选择器引擎会很酷。

[这是两者之间的非常好的比较。](https://www.greensock.com/jquery/)

**更新**

[HTML5 动画速度测试](http://ns2.greensock.com/js/speed.html)**

# jquery - 如何隐藏 jquery ui 选项卡状态栏 URL

> ID：13902965
> 
> 赞同：0
> 
> 时间：2012-12-16T15:53:02.687
> 
> 标签：jquery

我使用下面的方法来隐藏状态栏消息。

```
<a href="javascript:void(0)" onfocus="blur()" id="test">TEST</a>
$('#test).click(function(){ 
   ...
} 
```

鼠标悬停时如何隐藏选项卡状态栏 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T16:11:02.883

使用`hover()`同时管理 mouseenter 和 mouseleave 的方法。

```
$('#test').hover(function(){
   $('#statusElement').toggle()/* hide or show*/
}) 
```

`hover()`也可以将第二个函数作为`mouseleave`事件的参数

```
$('#test').hover(function(){
    /* first function is mouseenter*/
   $('#statusElement').show();
},function(){
    /* second function is mouseleave*/
   $('#statusElement').hide();
}); 
```

API 参考：[http ://api.jquery.com/hover/](http://api.jquery.com/hover/)

# java - 期末考试回顾

> ID：13902969
> 
> 赞同：-1
> 
> 时间：2012-12-16T15:53:55.953
> 
> 标签：java, polymorphism

我的 Java 课程很快就要期末考试了，我希望能得到问题的帮助。这是关于下面的示例代码：

```
package test;

public class Exam2Code
{

    public static void main ( String[ ] args )
    {
        Lot parkingLot = new Lot();

        Car chevy = new Car( );
        Car camry = new Car( );
        MotorCycle harley = new MotorCycle( 3 );
        MotorCycle honda = new MotorCycle( );

        parkingLot.park ( chevy );
        parkingLot.park ( honda );
        parkingLot.park ( harley );
        parkingLot.park ( camry );

        System.out.println( parkingLot.toString( ) );
        System.out.println(chevy.getClass());
        System.out.println(camry.getClass());
        System.out.println(harley.getClass());
        System.out.println(honda.getClass());
    }

} 

package test;

public class Vehicle
{

    private int nrWheels;

    public Vehicle( )
        { this( 4 ); }
    public Vehicle ( int nrWheels )
        { setWheels( nrWheels); }
    public String toString (  )
        { return "Vehicle with " + getWheels()
                 + " wheels"; }
    public int getWheels ( )
        { return nrWheels; }
    public void setWheels ( int wheels )
        { nrWheels = wheels; }
}

package test;

public class MotorCycle extends Vehicle
{

    public MotorCycle ( )
        { this( 2 ); }
    public MotorCycle( int wheels )
        { super( wheels ); }

}

package test;

public class Car extends Vehicle
{

    public Car ( )
        { super( 4 ); }
    public String toString( )
    {
        return "Car with " + getWheels( ) + " wheels";
    }
}

package test;

public class Lot
{

    private final static int MAX_VEHICLES = 20;
    private int nrVehicles;
    private Vehicle [] vehicles;

    public Lot (  )
    {
        nrVehicles = 0;
        vehicles = new Vehicle[MAX_VEHICLES];
    }

    public int nrParked (  )
        { return nrVehicles; }
    public void park ( Vehicle v )
        { vehicles[ nrVehicles++ ] = v; }
    public int totalWheels ( )
    {
        int nrWheels = 0;
        for (int v = 0; v < nrVehicles; v++ )
                nrWheels += vehicles[ v ].getWheels( );
        return nrWheels;
    }
    public String toString( )
    {
        String s = "";

        for (Vehicle v : vehicles){
                if(v != null){
                        s += v.toString( ) + "\n";
        }
    }
        return s;
    }
} 
```

问题是“找出 Lot 的 park 方法中常见的编码错误。你将如何纠正这个编码错误？”。我不知道错误是什么。我最初的答案是它是一个复制构造函数，并使用 clone() 方法来纠正它。但我什至不确定它是否是一个复制构造函数。我使用 getClass() 检查了他们的类，它们似乎都是正确的类型。如果有人能帮助我解决这个问题，我将不胜感激。谢谢你们！

编辑：添加了代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T16:08:57.470

> 识别 Lot's park 方法中的常见编码错误。你将如何纠正这个编码错误？

这是相关的代码：

```
private int nrVehicles;
private Vehicle [] vehicles;

public Lot (  )
{
    nrVehicles = 0;
    vehicles = new Vehicle[MAX_VEHICLES];
}

public void park ( Vehicle v ) { 
    vehicles[ nrVehicles++ ] = v; 
} 
```

我在这里看到的唯一“问题”是当您停放的汽车多于`nrVehicles`汽车时缺少范围检查（这是由 JVM 隐式完成的，但我猜您的老师对此并不满意），所以：

```
public void park ( Vehicle v ) { 
    if(nrVehicles < MAX_VEHICLES) {
      vehicles[nrVehicles++] = v; 
    } else {
      throw new IllegalStateException("Lot full, go find another one!");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T16:21:21.133

另一个更*有趣*（现实世界）的错误是，同一辆车可能停在停车场的多个位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-07T05:29:45.033

```
Vehicle  chevy = new Car();
Vehicle camry = new Car();
Vehicle harley = new MotorCycle( 3 );
Vehicle honda = new MotorCycle( ); 
```

# javascript - 通过 JavaScript 发送 Facebook 聊天消息

> ID：13902973
> 
> 赞同：2
> 
> 时间：2012-12-16T15:54:20.183
> 
> 标签：javascript, jquery, ajax, facebook, dom

我正在编写一个 Firefox 插件，它应该能够在浏览器中聊天时发送/拦截 Facebook 聊天消息。

我能够拦截消息，但我不知道如何自主触发消息发送事件。

由于我自己不知道如何发出 ajax 请求来发送消息，我的方法是填充聊天框`textarea`，然后触发`keydown`-Event`ENTER`以创建和提交消息。

我想有一个更合适和更干净的方法来完成这个？如何触发 AJAX 事件以通过 JavaScript 在打开的聊天框中发送消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:38:03.263

要从文本框输入触发 AJAX 请求，将检查您输入的字符代码，对于 enter 将是

```
if(characterCode == 13) 
```

然后可以用来触发请求；一个完整的例子是

```
$("textarea").live("keydown",function(e){
    if (e.which == 13){
        $.ajax({
             //you know the rest
        });
    }
}); 
```

# c# - LINQ 和 Enumerable.Where (IEnumerable , 功能 ) 重载方法

> ID：13902978
> 
> 赞同：1
> 
> 时间：2012-12-16T15:55:17.370
> 
> 标签：c#, linq

我有一个关于 LINQ 中的棘手问题的问题（对我来说几乎很棘手！）。

可以编写以下 linqQuery

```
string[] digits = { "zero", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine" };

var linqQuery= digits.Where((digit, index) => digit.Length < index); 
```

它利用`Enumerable.Where<TSource>(IEnumerable<TSource>, Func<TSource, Int32, Boolean>)`Enumerable 重载方法，使用查询语法

```
var linqQuery = from ...
                where ...
                select ...; 
```

?

该方法`Enumerable.Where<TSource>(IEnumerable<TSource>, Func<TSource, Int32, Boolean>)`使用`Int32`参数作为源元素的索引，我想知道这个方法是否可以从查询语法而不是其他 Enumberable 重载方法中推断出来`Enumerable.Where<TSource> Method (IEnumerable<TSource>, Func<TSource, Boolean>)`。

这里的 MSDN 参考

[没有 Int32 参数的 Enumerable.Where 方法](http://msdn.microsoft.com/en-us/library/bb534803.aspx)

[带有 Int32 参数的 Enumerable.Where 方法](http://msdn.microsoft.com/en-us/library/bb534803.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T16:06:38.727

不，这是不可能的。查询语法仅支持可用操作的子集。查询语法中的任何内容都不会编译为`Where`.

你所拥有的一切都很好。这里有一些查询语法的想法，可以让你编写这样的操作：

```
var linqQuery = from d in digits.Where((digit, index) => digit.Length < index)
                // You can do more stuff here if you like
                select d; 
```

还可以考虑先投影到包含索引的类型（`Select`不幸的是，帮助您执行此操作的重载也有同样的问题），然后在查询语法中执行过滤器和其他下游操作：

```
var linqQuery = from tuple in digits.Select((digit, index) =>
                               new { Digit = digit, Index = index })
                where tuple.Digit.Length < tuple.Index
                // You can do more stuff here if you like
                select tuple.Digit; 
```

还要考虑[moreLinq](http://code.google.com/p/morelinq/)的`SmartEnumerable`，它可以省去投影到元组的麻烦：

```
var linqQuery = from tuple in digits.AsSmartEnumerable()
                where tuple.Value.Length < tuple.Index
                // You can do more stuff here if you like
                select tuple.Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T16:00:33.247

不，没有办法使用查询语法调用该重载`Where()`（或类似重载）。`Select()`

从 C# 4.0 规范的第 7.16.2.4 节：

> 带有`where`子句的查询表达式
> 
> ```
> from x in e
> where f
> … 
> ```
> 
> 被翻译成
> 
> ```
> from x in ( e ) . Where ( x => f )
> … 
> ```

# python - 如何在 google appengine / python 上为模型批量分配属性？

> ID：13902981
> 
> 赞同：0
> 
> 时间：2012-12-16T15:55:38.307
> 
> 标签：python, google-app-engine, mass-assignment

我知道我可以在创建类时使用构造函数进行批量分配：

```
attributes = {'name':'John', 'surname':'Smith', ...}
record = Model(**attributes) 
```

但是当我有现有记录时如何分配属性？

```
record = ....
record.???(**attributes) 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T16:10:48.937

您只需分配给属性...

```
mymodel = MyModel()
mymodel.name = 'John'
mymodel.surname = 'Smith' 
```

如果您想实际上执行初始化程序所做的事情，那么您可以使用`setattr`

```
attributes = {'name':'John', 'surname':'Smith'}
record = Model()

for k, v in attributes.iteritems():
    setattr(record, k, v) 
```

请参阅：[https ://developers.google.com/appengine/docs/python/datastore/modelclass#Model](https://developers.google.com/appengine/docs/python/datastore/modelclass#Model)

从那里：

> 应用程序通过实例化 Model 类的子类来创建新的数据实体。可以使用实例的属性或作为构造函数的关键字参数来分配实体的属性。

```
s = Story()
s.title = "The Three Little Pigs"

s = Story(title="The Three Little Pigs") 
```

# php - php标头方法不重定向

> ID：13902983
> 
> 赞同：1
> 
> 时间：2012-12-16T15:55:51.410
> 
> 标签：php, mysql, header

> **可能重复：**
> [PHP 5.3 不显示错误消息](https://stackoverflow.com/questions/5680831/php-5-3-does-not-display-error-messages)
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我有一个 main.php 文件。它加载我的页眉、正文和页脚部分。身体部分是灵活的。在我的索引页面中，站点决定了活动页面，因此在主文件中，活动页面正文方法有效。在登录页面中，我检查用户，如果它有效，我想重定向到另一个页面。在这种情况下会出现问题。

索引.php：

```
if(isset($_GET["page"]))
{

    $jsPages.="\n\t<script src='pages/".$_GET["page"]."/resources/".$_GET['page'].".js' type='text/javascript' charset='utf-8'></script>";
    $cssPages.="\n\t<link rel='stylesheet' href='pages/".$_GET['page']."/resources/".$_GET['page'].".css' type='text/css' media='screen' title='no title' charset='utf-8'/>";
    include("pages/". $_GET["page"] ."/_index.php");
}
include("template/$Template/_index.php"); 
```

_index.php(主)

```
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head>
</head>
<body">
        <div ><?php userpanel(); ?></div>                   
    <div id="header"><?php pageHeader(); ?></div>
    <div id="horiz-menu" class="splitmenu"><?php horizmenu();?></div>
    <div id="sub-menu"></div>
    <?php body();?>
    <div id="bottom-menu"></div>
    <div id="footer"><?php footer();?></div>
</body>
</html>
<?php 
```

登录.php：

```
<?php
function body(){

  if ($_SERVER["REQUEST_METHOD"] == "POST")
  {
  if (!$_POST["username"] || !$_POST["password"])
        {
        die("You need to provide a username and password.");
        }

  // username and password sent from Form 
$myusername=addslashes($_POST['username']); 
$mypassword=addslashes($_POST['password']); 

$sql="SELECT id FROM members WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);
$row=mysql_fetch_array($result);
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1)
{
session_register("myusername");
$_SESSION['login_user']=$myusername;
header("location: pages/welcome/_index.php");
exit();
}
else 
{
$error="Your Login Name or Password is invalid";
}
}
?>
<form action="" method="post">
<label>UserName :</label>
<input type="text" name="username"/><br />
<label>Password :</label>
<input type="password" name="password"/><br/>
<input type="submit" value=" Submit "/><br />
</form>
<?php } 
```

我搜索它，但找不到任何答案。我该如何解决它或有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:57:51.147

header() 只应在任何 HTML 呈现到页面上之前调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T15:58:56.080

已经向客户端发送了一些数据后，您不能使用标头。您必须在发送或发送任何其他内容之前将您的支票放在页面顶部。

来自： http: [//php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

> 请记住，必须在发送任何实际输出之前调用 header()，无论是通过普通 HTML 标记、文件中的空白行还是从 PHP 发送。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T16:07:57.220

此外，您可能需要注意这一点。该脚本依赖于已从现代 PHP 中删除的函数。请查看此网页上的红色大警告标签。

[http://php.net/manual/en/function.session-register.php](http://php.net/manual/en/function.session-register.php)

你或许可以阅读这篇文章。它显示了用于 PHP 客户端身份验证的一些常见设计模式。

[http://www.experts-exchange.com/Web_Development/Web_Languages-Standards/PHP/A_2391-PHP-login-logout-and-easy-access-control.html](http://www.experts-exchange.com/Web_Development/Web_Languages-Standards/PHP/A_2391-PHP-login-logout-and-easy-access-control.html)

最好的问候，~雷

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T16:04:19.637

您可以添加`ob_start()`到您的 PHP 脚本的顶部。这将允许您发出 header() 即使您已经开始创建浏览器输出流。它还将使您的脚本更快，因为将避免重复调用发送浏览器输出，在脚本末尾只进行一次调用。

# c# - 在 RichTextBox 中查找鼠标光标位置的坐标

> ID：13902991
> 
> 赞同：0
> 
> 时间：2012-12-16T15:57:39.960
> 
> 标签：c#, winforms, cursor, mouse, richtextbox

我想在 C# 的 Winforms RichTextBox 中找到当前鼠标光标位置的 X/Y 像素坐标。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:58:11.053

这应该有效：

```
Point p = new Point(Cursor.Position.X, Cursor.Position.Y);
int mx = richTextBox1.PointToClient(p).X;
int my = richTextBox1.PointToClient(p).Y; 
```

# java - 更改图像视图正在旧图像上绘制

> ID：13902995
> 
> 赞同：1
> 
> 时间：2012-12-16T15:58:04.873
> 
> 标签：java, android

我有一个默认图像设置为 ImageView 的 src。然后我想改变这个形象。我这样做：

```
ImageView imageView;
imageView = (ImageView)findViewById(R.id.imageView);
imageView.setImageResource(R.drawable.dude); 
```

结果是它只把自己放在旧的上面，为什么会这样？

编辑：添加了 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ImageButton
    android:id="@+id/imageView"
    android:layout_width="241dp"
    android:layout_height="214dp"
    android:layout_gravity="center_horizontal"
    android:background="@drawable/car"
    android:src="@drawable/car" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/button0"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="clickclick"
        android:textSize="30sp" />

    <Button
        android:id="@+id/button1"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="clickclick"
        android:textSize="30sp" />

    <Button
        android:id="@+id/button2"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="clickclick"
        android:textSize="30sp" />

    <Button
        android:id="@+id/button3"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="clickclick"
        android:textSize="30sp" />

    <Button
        android:id="@+id/button4"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textSize="30sp" />
</LinearLayout>

<TextView
    android:id="@+id/textViewGame"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/instructionsGame"
    android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T16:15:54.003

`ImageView`将高度/宽度更改为`WRAP_CONTEN`T 并`android:background="@drawable/car"`从 ImageButton 背景中删除：

```
<ImageView
    android:id="@+id/imageView"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:layout_gravity="center_horizontal"

    android:src="@drawable/car" /> 
```

# rest - REST API URI 设计

> ID：13902998
> 
> 赞同：1
> 
> 时间：2012-12-16T15:58:17.730
> 
> 标签：rest

我需要开发一个 REST API，我对 URI 设计有疑问。

**设想：**

1 - 我正在为一组服务开发一个 REST 接口。

2 - 每个服务从逻辑角度分为几个部分（不是资源）。

3 – 每个资源都可以通过“A”和“B”两种方式访问

**什么是最合适的 URI 设计：**

/service1/part1/resource?{A|B}

/service1,part1,resource?{A|B}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:42:45.617

这个更好：

```
/service1/part1/resource?{A|B} 
```

因为它强调层次结构（感谢斜线）。

此外，“访问资源的方式”通常使用 HTTP 动词（如 GET、POST、PUT、DELETE、HEAD 等）发音。如果这就是您所说的“方式”，那么您绝对应该坚持使用 HTTP 动词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T04:35:20.043

虽然任一 URL 结构都可以工作，但您列出的 /service1/part1/resource?{A|B} 选择更为典型，并且最有可能使用常见的 REST API 消费工具，开发人员可以直观地理解等. 正斜杠的含义实际上是在 URI 标准（我认为是 RFC 1630）中定义的，而相对 URI 仅适用于正斜杠。