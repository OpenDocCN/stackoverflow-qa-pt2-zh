# StackOverflow 问答 13269000-13269999

# c# - 通过字符串给出的类型获取对象列表

> ID：13269002
> 
> 赞同：5
> 
> 时间：2012-11-07T11:38:24.867
> 
> 标签：c#, entity-framework, generics, types

我得到对象

```
IEnumerable<ObjectStateEntry> om = context.ObjectStateManager.GetObjectStateEntries(System.Data.EntityState.Modified); 
```

如何获取`List`具有字符串给定类型的对象？

```
Type typ = Type.GetType("mytype");
var om2 = om.Select(s => s.Entity).OfType<typ>(); // does not work 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T11:43:54.720

您尝试做的事情不能静态完成：`var`对应于表达式的*静态*类型，而右侧表达式的类型显然是非静态的（它是`IEnumerable<T>`，在`T`运行时之前不知道在哪里）。

但是，这是合法的：

```
var om2 = om.Select(s => s.Entity).Where(v => typ.IsInstanceOfType(v)); 
```

这将产生一个`IEnumerable<ObjectStateEntry>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T11:43:40.580

怎么样

```
Type typ = Type.GetType("mytype");
var om2 = om.Select(s => s.Entity).Where(e=>typeof(e) == typ); 
```

请注意，他将返回类型完全匹配的匹配项（而不是在同一继承树中）。

# git - git commit 一次并从那时起忽略

> ID：13269004
> 
> 赞同：3
> 
> 时间：2012-11-07T11:38:34.443
> 
> 标签：git, gitignore

我想使用 git 进行提交，其中包含我们 .net 应用程序中连接字符串的基本结构。

例如，我们有一个导入 connectionStrings.config 的 web.config。

我想提交一个初始connectionStrings.config，这样我们就不必手动添加一个，它具有我们需要的基本设置，我们可以修改字符串的各个部分（通常只是服务器名称）和然后忽略从那时起对该文件的任何更改。

现在我已经尝试将它添加到 .gitignore 但从我读过的内容来看，跟踪文件不受 .gitignore 的影响，我也尝试过 git update-index --assume-unchanged connectionStrings.config 但这似乎是一个临时修复在签出另一个分支时，我仍然对文件的挂起更改感到困惑。

有什么好办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:40:42.840

为什么不在 git 中使用 connectionStrings.basic.config 之类的东西，然后将其重命名为新实例？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:07:49.533

您可以使用[git 属性**过滤器**驱动程序](https://stackoverflow.com/questions/2316677/can-git-automatically-switch-between-spaces-and-tabs/2316728#2316728)和版本：

*   `connectionStrings.basic.template`文件
*   `smudge`负责创建实际（未版本化）的脚本，`connectionStrings.basic`如果它不存在，则每次签出 repo 时（当过滤器驱动程序[检测到该模板文件的*内容*](https://stackoverflow.com/questions/2562523/using-git-to-work-with-subversion-ignoring-modifications-to-tracked-files/2562678#2562678)时）
*   一个干净的脚本，它将恢复`connectionStrings.basic.template`（在修改该模板文件的情况下）的原始内容，以保持模板文件不可变。

![结帐时涂抹](../Images/b5494a2395f03bb98c116445f8dfc457.png)

有关示例，请参见**[git 属性。](http://git-scm.com/book/ch7-2.html)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:10:17.923

如何将文件放入 .gitignore 并在克隆后运行一个初始化脚本（包含在 repo 中）来创建文件？它也可以执行其他任务，因为听起来在您的设置中您可能也有其他类似的设置。如果不是现在，也许在未来。

通常在从源代码构建可运行的应用程序时会处理此类事情，但听起来您的应用程序不需要单独的构建过程，因此您没有该步骤。这不是最佳的，但如果它只是这个命令和任何未来需求的命令，我认为这并不多。

有一系列工具/脚本语言/助手可以做到这一点，只要最适合您的环境/应用程序。Ant 或类似的东西也与环境无关。

# java - Eclipse 视频意图视频

> ID：13269007
> 
> 赞同：1
> 
> 时间：2012-11-07T11:38:45.807
> 
> 标签：java, android, eclipse, video, android-intent

我对此很陌生，我在这里的论坛上检查了答案，但我没有找到任何可以真正帮助我的答案。我正在尝试播放 res/raw 文件夹中的视频。到目前为止，我已经设置了此代码：

```
MediaPlayer mp; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.videoview);
    ListView l1 = (ListView) findViewById(R.id.listview);
    l1.setAdapter(new EfficientAdapter(this));
    l1.setOnItemClickListener(new OnItemClickListener() {
    //Starts up a new activity, based on what listitem you press.
    public void onItemClick(AdapterView<?> a, View v, int position, long id) {

      Intent intent = new Intent(VideoButtonActivity.this, com.example.norskattrack.VideoActivity.class);                                 

      if(position==0){
        System.out.println("Item 0");

        intent.putExtra("video", 1);
        startActivity(intent);
      }
      if(position==1){
        System.out.println("Item 1");

        intent.putExtra("video", 2);
        startActivity(intent);
      }
    }
    });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:32:36.963

```
Uri video = Uri.parse("android.resource://com.package.app/raw/videoname"); 
```

那应该可以让您播放原始文件夹中的视频！

看一下 ：

[如何从资产文件夹或原始文件夹在android中播放视频？](https://stackoverflow.com/questions/3028717/how-to-play-videos-in-android-from-assets-folder-or-raw-folder)

[从原始文件夹播放视频](https://stackoverflow.com/questions/4580813/play-video-from-raw-folder)

[尝试从原始文件夹（VideoView）播放视频](https://stackoverflow.com/questions/3609219/trying-to-play-video-from-raw-folder-videoview)

都有很好的答案！

# java - 监听短信，在 j2me 应用程序中没有任何端口号发送

> ID：13269017
> 
> 赞同：0
> 
> 时间：2012-11-07T11:39:13.497
> 
> 标签：java, java-me

我有一个 SMS Sender & Receiver MIDlet，其中 MessageConnection 在客户端模式下创建，用于将 SMS 发送到特定端口上的特定目的地。此目的地正在向我的设备收件箱发回未设置任何端口号的 ACK SMS。我的 MIDLet 正在侦听用于发送 SMS 的同一端口号。问题是 MIDlet 无法收听和处理此 SMS。消息始终在设备收件箱中。有没有什么方法可以在没有任何端口号的情况下收听短信？或将 SMS 路由到 MIDlet？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:42:22.823

不可以。使用 JavaME 无法在标准端口上接收 SMS。

# iphone - ASIFormDataRequest 不工作我得到零值

> ID：13269018
> 
> 赞同：0
> 
> 时间：2012-11-07T11:39:43.443
> 
> 标签：iphone, objective-c, asihttprequest

```
NSString *urlName=@"url name"; 
NSLog(@"url %@",urlName);
NSURL *url=[NSURL URLWithString:urlName];

ASIFormDataRequest *request1=[ASIFormDataRequest requestWithURL:url];
[request1 setRequestMethod:@"POST"];
[request1 addPostValue:tokenName forKey:@"loginToken"];

[request1 setFile:savedImagePath forKey:@"file"];
[request1 setDelegate:self];  
[request1 startAsynchronous]; 
```

这里我传递了两个参数，一个是字符串，另一个是图像路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:30:58.200

您似乎正在尝试上传文件，但您这样做的方法不正确。

上传应该像这样完成：

```
 NSData *imageData = UIImageJPEGRepresentation([UIImage imageName:fileName])
    [request setData:imageData withFileName:fileName andContentType:@"image/jpeg" forKey:@"userfile"]; 
```

# android - Phonegap + Sencha touch 2 + Android第一个ajax请求打开浏览器

> ID：13269020
> 
> 赞同：1
> 
> 时间：2012-11-07T11:39:43.700
> 
> 标签：android, ajax, cordova, sencha-touch-2

我有一个 Sencha Touch 2 应用程序，我正在使用 PhoneGap (Cordova) 让它作为本机应用程序工作。

我的应用程序中有很多 Ext.Ajax 请求，它们在 iOS 上运行良好（使用 XCode）。但是当我通过 Eclipse 将应用程序启动到我的 Android 设备时，第一个执行的 Ext.Ajax 请求似乎启动并打开了一个空白页面的普通浏览器。该请求仍然同时在应用程序内部运行和工作。即将到来的请求不会这样做，我可以关闭普通浏览器，返回并运行第一次打开浏览器的相同请求，它不会再次这样做，直到我重新启动我的应用程序。

我试图寻找这个问题的解决方案，但我还没有发现任何有用的东西，有没有人对如何解决这个问题有任何想法？

# mysql - SQL - 从字符串中选择数字，然后替换它

> ID：13269026
> 
> 赞同：0
> 
> 时间：2012-11-07T11:39:53.957
> 
> 标签：mysql, sql

我在 SQL 中有下一个查询：SELECT id FROM student WHERE DATE LIKE '%$inputdate' inputDate 的格式如下：2010.08.03 我还想通过增加一周中的天数来更改日期的日期（ +7）。

我试试这个：

```
SELECT id
FROM student
WHERE DATE LIKE '%$inputdate'
     OR DATE Like '%CAST(RIGHT("2012-11-03", 2)AS INT) + 7; 
```

但它给了我 SQL 语法错误。我怎样才能正确地写它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:49:21.387

既然您正在使用`MySQL`，请使用`DATE()`功能

```
SELECT id
FROM student
WHERE DATE(`DATE`) = DATE(inputdate) OR 
      DATE(`DATE`) = DATE(DATE_ADD(DATE(inputdate),INTERVAL 7 DAY)) 
```

来源

*   [日期（）](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date)
*   [DATE_ADD()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)

# iphone - 在 YouTube 上上传视频

> ID：13269027
> 
> 赞同：1
> 
> 时间：2012-11-07T11:40:06.243
> 
> 标签：iphone, objective-c, ios, youtube, asihttprequest

我需要将视频从我的 iphone 应用程序上传到 youtube，我有访问令牌表单 google oauth，但是在将视频上传到 youtube 时遇到问题，对于上传视频的发布请求，我正在使用 ASIFormDataRequest。以下是我的代码，请帮助我解决我的错误，在此先感谢。

```
- (IBAction)buttonTouched:(id)sender
{
    NSLog(@"%d %@",[sender tag],[[NSUserDefaults standardUserDefaults] valueForKey:@"access_token"]);

    progressView = [[UIProgressView alloc] initWithFrame:CGRectMake(30, 90, 200, 20.0)];
    [alertView addSubview:progressView];
    [alertView show];
    [progressView setProgress:0];   

    NSString *name=[videosToShow objectAtIndex:[sender tag]];
    NSString *newFilePath = [NSString stringWithFormat:@"%@.mov", [self.path stringByAppendingPathComponent:name]];
    NSLog(@"Content URL :%@;", newFilePath);

    NSURL *url = [NSURL URLWithString:@"https://uploads.gdata.youtube.com/feeds/api/users/default/uploads"];

    ASIFormDataRequest *request = [[[ASIFormDataRequest alloc] initWithURL:url] autorelease];

    [request setRequestMethod:@"POST"];

    NSLog(@"Auth Token== %@",[[NSUserDefaults standardUserDefaults] valueForKey:@"access_token"]);

    [request setPostValue:[[NSUserDefaults standardUserDefaults] valueForKey:@"access_token"] forKey:@"authentication_token"];

    [request setPostValue:devKey forKey:@"developer_key"];

    [request setPostValue:@"abcabc" forKey:@"boundary_string"];

    [request setPostValue:devKey forKey:@"content_length"];

    NSString *path = [[NSBundle mainBundle] pathForResource:@"xmlcontent" ofType:@"txt"];
    NSString *strXml = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];

    [request setPostValue:strXml forKey:@"API_XML_Request"];

    [request setPostValue:@"video/mov" forKey:@"video_content_type"];

    [request setPostValue:@"video/mov" forKey:@"Binary File Data"];

    [request setFile:newFilePath withFileName:@"1.mov" andContentType:@"video/mov" forKey:@"uploaded"];

    [request setUploadProgressDelegate:self];
    [request setDelegate:self];

    [request setDidFinishSelector:@selector(requestFinished:)];
    [request setDidFailSelector:@selector(requestFailed:)]; 

    [request setShowAccurateProgress:YES];
    [request startAsynchronous];
}

- (void)requestFinished:(ASIFormDataRequest *)request {
    [alertView dismissWithClickedButtonIndex:0 animated:YES];
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Congrats!!!" message:@"File has been downloaded." 
                                                   delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release];
}

- (void)requestFailed:(ASIFormDataRequest *)request1 {
    NSError *error = [request1 error];
    NSLog(@"%@", error);
} 
```

下面是文件 xmlcontent.txt

```
<?xml version="1.0"?>
<entry xmlns="http://www.w3.org/2005/Atom"
xmlns:media="http://search.yahoo.com/mrss/"
xmlns:yt="http://gdata.youtube.com/schemas/2007">
<media:group>
<media:title type="plain">Bad Wedding Toast</media:title>
<media:description type="plain">
I gave a bad toast at my friend's wedding.
</media:description>
<media:category
scheme="http://gdata.youtube.com/schemas/2007/categories.cat">People
</media:category>
<media:keywords>toast, wedding</media:keywords>
</media:group>
</entry> 
```

下面是我得到的错误

> 错误域 = ASIHTTPRequestErrorDomain 代码 = 3 “需要身份验证” UserInfo = 0x1c8ed0 {NSLocalizedDescription = 需要身份验证}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T07:18:12.283

您正在使用 GData 库，但尚未链接/添加它。查看 XCode 4 中的 GData Objective-C 客户端设置，了解如何正确构建/链接 GData 库。

# .net - ViewModel 和无尽的集合

> ID：13269037
> 
> 赞同：1
> 
> 时间：2012-11-07T11:40:58.690
> 
> 标签：.net, mvvm

我需要实现无限列表框（当用户滚动到末尾时加载数据块的列表框）并且我正在使用 ViewModel。

我已将 ListBox 绑定到 ObservableCollection，但我不知道如何在到达它的末尾时收到通知，但又不会破坏 MVVM 范式。我怎样才能做到这一点？

我唯一需要知道的是如何保留 MVVM 功能和约束，并且在集合被枚举到结束时得到通知。

谢谢。

**编辑**

我一直在挖掘，恐怕这不是一个简单的解决方案。我认为唯一的可能性是实现将实现 ICollection 和 INotifyCollectionChanged 的​​自定义集合。但是我不知道 ListBox 和其他启用了 ItemsSource 的控件的内部机制是如何工作的，所以我不知道如何实现延迟加载。

使用 ItemsSource 的 WP 控件的主要获取机制是 IEnumerable 接口吗？还是它使用索引器方法？它如何调用计数？它取决于计数还是可以在它的生命周期中更改（以及在哪些调用中？我认为并非所有调用都可以更改计数然后调用 NotifyCollectionChanged）。

有文件吗？或者有没有可用的实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:53:06.367

因为这应该支持 MVVM，所以我不会将事件绑定到列表框的一部分，而是作为集合本身的一部分。当请求的索引接近列表末尾时，您应该尝试添加更多块。

实现此目的的一种方法是从 IList 继承并监视该`this[int index]`属性。

例如：

```
public class OC<T> : IList<T>, IList
{
    public T this[int index]
    {
        get
        {
            if  (index >= (this.Count - 20)) // Insert correct heuristics here!
            {
               // Load more chunks
            }
            return base[index];
        }
    }
} 
```

（当然`Count - 20`这***不是***最好的方法，你可能想输入你自己的启发式方法（也许如果索引在最后 10% 中），但它显示了这个概念）

这样，您不必关心 View 是否使用 ListBox 或组合或其他任何东西 - 您保留了 MVVM 模式。当当前请求的项目是靠近列表末尾的项目时，这就是您开始加载更多块的队列......

请注意，您也`IList`需要从. 长话短说，如果您也没有从中派生 ，则将为列表中的每个项目调用索引器。`IList``IList<T>``IList``IList`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:32:31.430

我找到了一个不错的解决方案，它不会破坏 MVVM，但为这个问题提供了非常优雅的解决方案（乍一看，我还没有正确调查它。）看看[http://danielvaughan.orpius.com/post /Scroll-Based-Data-Loading-in-Windows-Phone-7.aspx](http://danielvaughan.orpius.com/post/Scroll-Based-Data-Loading-in-Windows-Phone-7.aspx)

还有我忽略的stackoverflow主题。[到达最后一项后](https://stackoverflow.com/questions/4456563/wp7-auto-grow-listbox-upon-reaching-the-last-item)查看WP7 Auto Grow ListBox 。

# sql - 在一次调用“而不是插入，更新”中混合更新/插入记录 - 这可能吗？

> ID：13269038
> 
> 赞同：0
> 
> 时间：2012-11-07T11:41:00.110
> 
> 标签：sql, sql-server-2008

我想知道是否可以在**一次调用中对表中的“UPDATE”A 记录和“INSERTING”B 记录调用**“而不是插入，更新”触发器？

实际上，我只是想知道 SQL Server 是否可以立即调用上述触发器来更新和插入记录？或者它只是调用一次触发器来更新一些记录，一次插入一些其他记录？

考虑一下，例如：

```
ALTER TRIGGER [dbo].[MyTable_DoWhatever] 
   ON  [dbo].[MyTable] 
   INSTEAD OF INSERT, UPDATE
AS 
BEGIN
    SET NOCOUNT ON;

    DECLARE @Updating BIT = 0;
    IF EXISTS(SELECT * FROM INSERTED i INNER JOIN DELETED d ON i.Id = d.Id) SET @Updating = 1

END 
```

上述@Updating 标志是否有效以确定是否为“INSTEAD OF INSERTED”或“INSTEAD OF UPDATE”调用触发器？

谢谢。

# php - PHP查找一个字符串并获取对应的数据

> ID：13269043
> 
> 赞同：-2
> 
> 时间：2012-11-07T11:41:15.157
> 
> 标签：php, string, text

有这个文字

**"号码":"X0011","姓名":"aaaaaaaaaaaaaa","地址":"12345","电话":"56976585","号码":"X0044","姓名":"bbbbbbbbbbbbbbbbbb","地址":"786487647","电话":"34214234",.......**

并想用 PHP 像这样返回（只是名称和代码，忽略所有其他字段）

编号：X0011

姓名：啊啊啊啊啊啊

编号：X0044

名称：bbbbbbbbbbbbbbbbbbbb

……

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:51:59.787

以下代码将允许您循环浏览所有项目并获取各个值`$temp_str[1]`将包含该项目的实际值。这也意味着您可以继续向字符串添加信息，并且此代码将对其进行解析。

```
$str  = '"Number":"X0011","Name":"aaaaaaaaaaaaaa","Adress":"12345","Phone":"56976585"';
$str = str_replace('"',"",$str); // remove the double quotes

$pieces = explode(",", $str);
foreach($pieces as $piece){
    $temp_str = explode(',',$piece);
    echo $temp_str[0]; // 'Number:'X0011 // gives the heading
    echo $temp_str[1]; // Name:'aaaaaaa' // gives the value
    echo "<br />";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:44:23.353

您可以使用爆炸功能做到这一点

========

# [爆炸功能](http://php.net/manual/en/function.explode.php)

```
$mystring  = ""Number":"X0011","Name":"aaaaaaaaaaaaaa","Adress":"12345","Phone":"56976585";
$pieces = explode(",", $mystring);
echo $pieces[0]; // Number:X0011
echo $pieces[1]; // Name:aaaaaaa 
```

# php - Yii - 如何访问主配置中的基本 URL

> ID：13269053
> 
> 赞同：6
> 
> 时间：2012-11-07T11:41:53.977
> 
> 标签：php, url, path, yii

我正在开发一个 Yii 应用程序。我正在尝试在我的主要配置参数中设置一些路径，如下所示：

```
// application-level parameters that can be accessed
// using Yii::app()->params['paramName']
'params'=>array(
       'paths' => array(
            'imageTemp'=> Yii::getPathOfAlias('webroot').'/files/temp-',
            'image'=> Yii::getPathOfAlias('webroot').'/files/',
            ...
        ),

        'urls' => array(
            'imageTemp'=> Yii::app()->getBaseUrl().'/files/temp-',
            'image'=> Yii::app()->getBaseUrl().'/files/',
            ...
        ), 
```

但我收到此错误：

```
Fatal error: Call to a member function getBaseUrl() on a non-object in ..blahblah../base/CApplication.php on line 553 
```

我想我不能在配置文件中使用 Yii::app() 因为应用程序还没有在这里初始化，或者类似的东西。那么，如何`Yii::app()->getBaseUrl()`在配置文件中替换并获得相同的结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T12:04:54.277

你是对的，你不能在配置的返回数组中使用 Yii::app() 方法，但是你可以`Yii::getPathOfAlias()`在外面使用。像这样的东西可能会起作用：

```
$webroot = Yii::getPathOfAlias('webroot');
return array(
    ...
    'params'=>array(
        'paths' => array(
            'imageTemp'=> $webroot.'/files/temp-',
            'image'=> $webroot.'/files/',
            ...
        ),
    ),
); 
```

假设`webroot`是预先定义的。

至于 baseUrl ......我会在那个问题上回复你！

[后退...]

如果你需要一个 url，这一切都取决于你的图像文件保存在哪里，相对于 yii 路径，还是相对于 web 根目录的基础？

如果是 web root 的基础，你可以使用：

```
return array(
    ...
    'urls'=>array(
        'paths' => array(
            'imageTemp'=> '/files/temp-',
            'image'=> '/files/',
            ...
        ),
    ),
); 
```

# android - 未收到 gcm 推送消息

> ID：13269055
> 
> 赞同：0
> 
> 时间：2012-11-07T11:42:04.530
> 
> 标签：android, google-cloud-messaging

我正在为 android 使用 GCM，这是 androidhive.com 上给出的示例代码。我能够将数据存储在数据库中，但它无法推送数据。我是这个代码的新手。所以请帮助我。我的连接 java 文件和相应的 php 文件以及 logcat 消息如下所示---

错误日志-

```
11-07 16:55:42.306: E/Trace(1025): error opening trace file: No such file or directory (2)
11-07 16:55:43.146: D/libEGL(1025): loaded /system/lib/egl/libEGL_emulation.so
11-07 16:55:43.166: D/(1025): HostConnection::get() New Host Connection established 0x2a1193e0, tid 1025
11-07 16:55:43.188: D/libEGL(1025): loaded /system/lib/egl/libGLESv1_CM_emulation.so
11-07 16:55:43.196: D/libEGL(1025): loaded /system/lib/egl/libGLESv2_emulation.so
11-07 16:55:43.337: W/EGL_emulation(1025): eglSurfaceAttrib not implemented
11-07 16:55:43.366: D/OpenGLRenderer(1025): Enabling debug mode 0
11-07 16:56:00.818: W/EGL_emulation(1025): eglSurfaceAttrib not implemented
11-07 16:56:04.207: E/SpannableStringBuilder(1025): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
11-07 16:56:04.207: E/SpannableStringBuilder(1025): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
11-07 16:56:21.786: W/EGL_emulation(1025): eglSurfaceAttrib not implemented
11-07 16:56:35.676: D/dalvikvm(1025): GC_CONCURRENT freed 238K, 4% free 8207K/8519K, paused 109ms+131ms, total 355ms
11-07 16:56:35.766: D/GCMRegistrar(1025): resetting backoff for com.androidhive.pushnotifications
11-07 16:56:35.806: V/GCMRegistrar(1025): Registering app com.androidhive.pushnotifications of senders 706448096441
11-07 16:56:35.886: I/Choreographer(1025): Skipped 34 frames!  The application may be doing too much work on its main thread.
11-07 16:56:36.052: W/EGL_emulation(1025): eglSurfaceAttrib not implemented
11-07 16:56:37.826: V/GCMBroadcastReceiver(1025): onReceive: com.google.android.c2dm.intent.REGISTRATION
11-07 16:56:37.826: V/GCMBroadcastReceiver(1025): GCM IntentService class: com.androidhive.pushnotifications.GCMIntentService
11-07 16:56:37.846: V/GCMBaseIntentService(1025): Acquiring wakelock
11-07 16:56:37.876: V/GCMBaseIntentService(1025): Intent service name: GCMIntentService-706448096441-1
11-07 16:56:37.896: E/GCMRegistrar(1025): internal error: retry receiver class not set yet
11-07 16:56:37.896: V/GCMRegistrar(1025): Registering receiver
11-07 16:56:37.906: D/GCMBaseIntentService(1025): handleRegistration: registrationId = APA91bG-OslPbDcT_9iy0QTP7e_4ih9q95m6fyZJ4geYx1JojDhjmGUTy7aCvVMAq9vLXo31Kh5uP6YpenVc1zDOavhrX1gyayQAXevq8j1T0t1lf88Qm3ohz5mNQ7iC7kY52FG1hD8pgH5aSMGqb55xNGvCIuuFSbIJ3wmiGkpzHhYH2WEp-Q4, error = null, unregistered = null
11-07 16:56:37.906: D/GCMRegistrar(1025): resetting backoff for com.androidhive.pushnotifications
11-07 16:56:37.946: V/GCMRegistrar(1025): Saving regId on app version 1
11-07 16:56:37.978: I/GCMIntentService(1025): Device registered: regId = APA91bG-OslPbDcT_9iy0QTP7e_4ih9q95m6fyZJ4geYx1JojDhjmGUTy7aCvVMAq9vLXo31Kh5uP6YpenVc1zDOavhrX1gyayQAXevq8j1T0t1lf88Qm3ohz5mNQ7iC7kY52FG1hD8pgH5aSMGqb55xNGvCIuuFSbIJ3wmiGkpzHhYH2WEp-Q4
11-07 16:56:38.016: D/NAME(1025): radha
11-07 16:56:38.016: I/AndroidHive GCM(1025): registering device (regId = APA91bG-OslPbDcT_9iy0QTP7e_4ih9q95m6fyZJ4geYx1JojDhjmGUTy7aCvVMAq9vLXo31Kh5uP6YpenVc1zDOavhrX1gyayQAXevq8j1T0t1lf88Qm3ohz5mNQ7iC7kY52FG1hD8pgH5aSMGqb55xNGvCIuuFSbIJ3wmiGkpzHhYH2WEp-Q4)
11-07 16:56:38.016: D/AndroidHive GCM(1025): Attempt #1 to register
11-07 16:56:38.056: V/AndroidHive GCM(1025): Posting 'email=bhawna2909@gmail.com&regId=APA91bG-OslPbDcT_9iy0QTP7e_4ih9q95m6fyZJ4geYx1JojDhjmGUTy7aCvVMAq9vLXo31Kh5uP6YpenVc1zDOavhrX1gyayQAXevq8j1T0t1lf88Qm3ohz5mNQ7iC7kY52FG1hD8pgH5aSMGqb55xNGvCIuuFSbIJ3wmiGkpzHhYH2WEp-Q4&name=radha' to http://10.0.2.2/gcm_server_php/register.php
11-07 16:56:38.056: E/URL(1025): > http://10.0.2.2/gcm_server_php/register.php
11-07 16:56:39.057: V/GCMRegistrar(1025): Setting registeredOnServer status as true until 2012-11-14 16:56:39.057
11-07 16:56:39.166: V/GCMBaseIntentService(1025): Releasing wakelock 
```

Java 文件——

```
package com.androidhive.pushnotifications;

import android.content.Context;
import android.content.Intent;

public final class CommonUtilities {

    // give your server registration url here
    static final String SERVER_URL = "http://10.0.2.2/gcm_server_php/register.php"; 

    // Google project id
    static final String SENDER_ID = "706448096441"; 

    /**
     * Tag used on log messages.
     */
    static final String TAG = "AndroidHive GCM";

    static final String DISPLAY_MESSAGE_ACTION =
            "com.androidhive.pushnotifications.DISPLAY_MESSAGE";

    static final String EXTRA_MESSAGE = "message";

    /**
     * Notifies UI to display a message.
     * <p>
     * This method is defined in the common helper because it's used both by
     * the UI and the background service.
     *
     * @param context application's context.
     * @param message message to be displayed.
     */
    static void displayMessage(Context context, String message) {
        Intent intent = new Intent(DISPLAY_MESSAGE_ACTION);
        intent.putExtra(EXTRA_MESSAGE, message);
        context.sendBroadcast(intent);
    }
} 
```

PHP 文件——

```
<?php

// response json

$json = array();

/**

* Registering a user device

* Store reg id in users table

*/

if (isset($_POST["name"]) && isset($_POST["email"]) && isset($_POST["regId"]))
 {
    $name = $_POST["name"];

   $email = $_POST["email"];

 $gcm_regid = $_POST["regId"]; 
// GCM Registration ID

// Store user details in db

include_once './db_functions.php';

    include_once './GCM.php';

    $db = new DB_Functions();

   $gcm = new GCM();

    $res = $db->storeUser($name, $email, $gcm_regid);

    $registatoin_ids = array($gcm_regid);

    $message = array("product" => "shirt");

    $result = $gcm->send_notification($registatoin_ids, $message);

    echo $result;
}
 else {

   // user details missing

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-17T10:32:37.813

我也尝试了 android hive 的教程，但它没有奏效，然后我又做了一些谷歌，发现这对我有用。

[http://androidexample.com/Android_Push_Notifications_using_Google_Cloud_Messaging_GCM/index.php?view=article_discription&aid=119&aaid=139](http://androidexample.com/Android_Push_Notifications_using_Google_Cloud_Messaging_GCM/index.php?view=article_discription&aid=119&aaid=139)

# php - AJAX & JSON 不工作，没有错误或成功处理程序

> ID：13269057
> 
> 赞同：2
> 
> 时间：2012-11-07T11:42:08.080
> 
> 标签：php, ajax, json, magento

我有一些代码计划添加到 Magento 商店中，一旦我让它在测试页面上工作，但不幸的是它在测试页面上不起作用。

Javascript如下：

```
function plusAddToCart(qty_textbox_id, prodID, highlight_div_id){
var qty = document.getElementById(qty_textbox_id).value;
qty = parseInt(qty) + 1;
document.getElementById(qty_textbox_id).value = qty;
 if(qty==0){
     $(highlight_div_id).style.backgroundColor = "#f7e9f4";
 }else{
     $(highlight_div_id).style.backgroundColor = "#ebcde5";
 }

 $.ajax({                                      
  url: "addtocart.php",
  data: "prodID="+prodID,
  type: "POST",
  dataType: 'json',
  success: function(data) {
    alert("DONE");
  }
});
}
</script>

<div style="width:70px; margin:9px auto 0 auto;">
   <input type='button' name='plus' onclick='plusAddToCart("qty1", "693", "product_highlight_693");' id="plus" class="cart-plus-minus" value='+'/>
   <input name="qty" type="text" id="qty0" readonly="readonly" maxlength="5" value="0" class="quantity-box" />
</div> 
```

PHP：

```
 header("Content-Type: text/html");

 require_once 'app/Mage.php'; 
 Mage::app("default"); 
 Mage::getSingleton("core/session", array("name" => "frontend")); 
 $session = Mage::getSingleton("customer/session"); 

 $userData=Mage::helper('customer')->getCustomer()->getData(); 
 $cart = Mage::getSingleton('checkout/cart'); 
 $yourProId = $_POST['prodID']; 
 $qty=1; 
 $params = array( 'product' => $yourProId, 'related_product' => null, 'qty' => $qty );
 $product = new Mage_Catalog_Model_Product(); 
 $product->load($yourProId); 
 $cart->addProduct($product, $params); 
 $cart->save(); 
 Mage::getSingleton('checkout/session')->setCartWasUpdated(true); 
 $message = ('Your cart has been updated successfully.'); 
 Mage::getSingleton('checkout/session')->addSuccess($message); 
```

任何人都可以看到为什么这不起作用的原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T11:48:32.060

第一步是向您的 AJAX 调用添加错误处理程序：

```
$.ajax({                                      
    url: "addtocart.php",
    data: "prodID="+prodID,
    type: "POST",
    dataType: 'json',
    success: function(data) {
        alert("DONE");
    },
    error: function (jqXHR, textStatus, errorThrown) {
        alert('Not done - ' + textStatus + ' ' + errorThrown);
    }
} 
```

这应该可以让您更好地指示任何问题。

**更新**

在您的具体情况下，我认为问题在于：

1.  将响应数据类型设置为“JSON”
2.  Web 服务不返回任何内容

我认为请求可能会成功，但是当 jQuery 尝试解析 JSON 时，无法解析空响应。如果您更改`dataType`为`text`您可能会避免此问题，因为它不会尝试任何解析。

# java - 在android的webView中打开Url

> ID：13269059
> 
> 赞同：21
> 
> 时间：2012-11-07T11:42:09.577
> 
> 标签：java, android, webview

如何在 webView中打开此[链接。](http://egov.uscis.gov/cris/Dashboard.do)这是在浏览器上运行，但它不在 webView android 中运行。请给出解决方案。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-07T11:47:52.347

活动：

```
import android.app.Activity;
import android.os.Bundle;
import android.webkit.WebView;

public class WebViewActivity extends Activity {

    private WebView webView;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.webview);

        webView = (WebView) findViewById(R.id.webView1);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.loadUrl("http://www.google.com");
    }
} 
```

还有你的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<WebView  xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/webView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
/> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-16T07:35:03.393

看看这个，它对我有用......但我不知道它是否有任何副作用，但对我来说很好用

```
 super.onCreate(savedInstanceState);        
       WebView theWebPage = new WebView(this);
       theWebPage.getSettings().setJavaScriptEnabled(true);
       theWebPage.getSettings().setPluginState(PluginState.ON); 
       setContentView(theWebPage);
       theWebPage.loadUrl("http://www.hkmytravel.com"); 
```

源代码可在 [ [http://www.androidpanna.com/functionality/webview-open-url-webpage-within-the-android-app-when-launch-android-development]中找到](http://www.androidpanna.com/functionality/webview-open-url-webpage-within-the-android-app-when-launch-android-development])

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T11:53:19.243

测试以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<WebView  xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/webView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
/> 
```

# string - 使用 TCL 格式化 Mac 地址

> ID：13269060
> 
> 赞同：0
> 
> 时间：2012-11-07T11:42:11.790
> 
> 标签：string, macros, tcl, mac-address

您好，我正在尝试在一个名为 Shorthand 的程序中使用 TCL，这是一个文本宏程序。无论如何，我正在尝试使用它来提示和重新格式化 Mac 地址。我无法弄清楚在指定索引整数处拆分字符串的函数。这是我到目前为止所拥有的。

```
set DirtyMac [sh_set clipboard]
set HalfMac [string map { .  "" } $DirtyMac ]
set FullMac [string map { : "" } $HalfMac]
set ParsedMac [string map { " " "" } $FullMac]
if {[string length $ParsedMac] < 12 } {
return "Mac too short";
} elseif {[string length $ParsedMac] > 12 } {
return "Mac too long";
} else {
return [string map { " " "" } $ParsedMac]
} 
```

那就是清除我一直在尝试的所有不需要的字符的Mac

```
set Mac1 [linsert $ParsedMac 4 .]
return $Mac1; 
```

或者

```
set Mac1 [split [string is index $ParsedMac 4 ] "."]
return $Mac1; 
```

没有任何工作......任何人都可以做的任何帮助都会很棒！

好的，所以我要做的是获取一个 Mac 地址，例如 11:22:33:44:55:66 或 1122.3344.5566 或 112233445566 并让输出采用这三种格式之一。我最终将编写 3 个不同的脚本，这些脚本将根据输出的需要被调用。

所以例如我有 mac 1122.3344.5566 我想把它变成 11:22:33:44:55:66

```
set DirtyMac "1122.3344.5566"
set ParsedMac [string map {. "" : "" " " ""} $DirtyMac]
scan $ParsedMac "%2s%2s%2s%2s%2s%2s" a b c d e f
set FullMac [join $a $b $c $d $e $f  ":"]
return $FullMac; 
```

或者

我有mac 112233445566 我想把它变成1122.3344.5566

```
set DirtyMac "112233445566"
set ParsedMac [string map {. "" : "" " " ""} $DirtyMac]
scan $ParsedMac "%2s%2s%2s%2s%2s%2s" a b c d e f
set FullMac [join $a $b $c $d $e $f  ":"]
return $FullMac; 
```

最后

我有mac 1122.3344.5566 || 11:22:33:44:55:66 我想把它变成112233445566

```
set DirtyMac | Mac Address Input|
set ParsedMac [string map {. "" : "" " " ""} $DirtyMac] 
return $ParsedMac; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T11:55:04.653

首先，您可以一步完成清洁：

```
set ParsedMac [string map {. "" : "" " " ""} $DirtyMac] 
```

请注意，我实际上很想使用不同的清理方法：删除所有非十六进制字符：

```
set ParsedMac [regsub -all {[^0-9a-fA-F]} $DirtyMac ""] 
```

其次，将该字符串拆分为 4 个字符的片段（请注意，我假设您首先放入长度检查）实际上最好使用`scan`：

```
scan $ParsedMac "%4x%4x%4x" a b c 
```

这将提取四个四位十六进制数字字符并将它们转换为数字。或者，您可以将它们扫描为普通字符串：

```
scan $ParsedMac "%4s%4s%4s" a b c 
```

然后你需要做任何你想做的事情，把这些碎片重新组合在一起。

# git - 如何组合单独的 Git 存储库跟踪同一 CVS 存储库的不同分支？

> ID：13269065
> 
> 赞同：1
> 
> 时间：2012-11-07T11:42:54.520
> 
> 标签：git, branch, branching-and-merging

在我的公司，我们有一个中央 CVS 服务器。对于仍然受到积极支持的每个产品版本，我们都有不同的分支。在本地，我使用 Git，基本上遵循[http://undefinedvalue.com/2010/07/02/workflow-remote-cvs-local-git](http://undefinedvalue.com/2010/07/02/workflow-remote-cvs-local-git)的方法（git cvs 花了很长时间，然后因错误而停止：- /）。

我为每个 CVS 分支使用单独的 Git 存储库（每个 CVS 分支在不同的目录中签出）。例如，我有目录 ~/dev/our_product/v2、~/dev/our_product/v3、~/dev/our_product/v4 和 ~/dev/our_product/main，每个目录都直接在目录中使用 .git。主分支遵循 CVS（我通过定期执行 cvs update 和 git commit 手动更新它）。

我现在正在考虑将所有这些 Git 存储库合并为一个。如果我了解[如何将来自两个不同存储库的两个分支合并到一个存储库中？](https://stackoverflow.com/questions/244695/how-to-combine-two-branches-from-two-different-repositories-in-a-single-reposito)正确地，我可以创建一个新的存储库并让它跟踪所有现有的存储库。这也会从现有的 repos 中导入所有分支，对吧？之后我可以扔掉现有的回购吗？或者如果我想这样做，我应该使用不同的方法吗？

我也想知道这是否会促进我的工作流程。

用例 1：我开始为 CVS 主分支开发一个特性，方法是创建一个名为 some-feature 的特性分支。然后我知道它必须进入 v3。我可以将功能分支重新设置为 v3 吗？

用例 2：当我在 v2 中进行更改（在某个功能分支上的某个其他功能上）时，我必须将其合并到 v3、v4 和 main 中。我可以通过在相应的 CVS 跟踪分支中简单地键入“git merge some-other-feature”来做到这一点吗？

此致，

延斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:00:30.140

> 我可以创建一个新的存储库并让它跟踪所有现有的存储库。这也会从现有的 repos 中导入所有分支，对吧？

您确实可以从您唯一的存储库中的远程存储库中获取所有分支，但是您应该从这些远程分支开始创建一个本地分支。
完成后，您可以删除这些远程引用，并且不再使用您的 git-cvs 存储库。

> 之后我可以扔掉现有的回购吗？
> 如果您不需要它们发布回 CVS，可以。
> 
> 我开始为 CVS 主分支开发一个特性，方法是创建一个名为 some-feature 的特性分支。然后我知道它必须进入 v3。我可以将功能分支重新设置为 v3 吗？
> 是的，合并前的变基，如“ [git rebase vs git merge](https://stackoverflow.com/questions/804115/git-rebase-vs-git-merge/804178#804178) ”中所述。
> 
> 我可以通过`git merge some-other-feature`在相应的 CVS 跟踪分支中简单地键入“”来做到这一点吗？
> 是的，这就是将其传播到那些分支的想法。

# php - 在 PHP 中使用关联数组构造 UPDATE 语句

> ID：13269067
> 
> 赞同：1
> 
> 时间：2012-11-07T11:43:06.710
> 
> 标签：php, mysql, sql

在 PHP 中使用关联数组构造 UPDATE 语句的最佳方法是什么？

例如，假设我有这样的功能：

```
/**
 * For update queries
 * 
 * @param string $tableName Name of the table we're wanting to update.
 * @param array $values Associative array of columns / values to update. e.g. array('name' => 'John', 'age' => 29)
 * @param array $conditions Associative array of conditions. e.g. array('user_id' => 1) equates to "WHERE user_id = 1"
 */
 public function update($tableName, $values, $conditions = array()){
      //Construct SQL
 } 
```

到目前为止，我已经能够构建简单的 UPDATE 语句，例如：

```
UPDATE `myTableName` SET `name` = :name, `age` = :age WHERE `user_id` = :user_id 
```

现在我想知道：构造 WHERE 子句的最佳方法是什么？我可以研究的其他库和代码库中是否有类似的实现？例如：我如何处理具有 OR 和 AND 和 IN() 等的 WHERE 子句的构造？

```
UPDATE example SET col = :val WHERE user_id = :user_id AND (age = :age OR name = :name) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:57:40.833

```
public function update($tableName, $values, $conditions = array()) {
    if (empty($values)) {
        throw new Exception('Nothing to update');
    }
    $valueStrings = array();
    foreach ($values as $name => $value) {
        $valueStrings[] = $name . ' = :' . $name;
    }
    $conditionStrings = array();
    foreach ($conditions as $column => $value) {
        $conditionString = $column;
        $conditionString .= is_array($value)
            ? ('IN ("' . implode('","', $value) . '")')
            : (' = "' . $value . '"')
        ;
        $conditionStrings[] = $conditionString;
    }
    $sql = 'UPDATE ' . $tableName
        . ' SET ' . implode(', ', $valueStrings)
        . ' WHERE ' . implode(' AND ', $conditionStrings)
    ;
    // execute query
} 
```

但实际上你应该为此使用 ORM：

[原则 2：使用查询生成器更新查询](https://stackoverflow.com/questions/4337751/doctrine-2-update-query-with-query-builder)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:54:09.157

我认为一个简单的解决方案是`implode()`使用“AND”作为分隔符：

```
$columnCArrayValues = array(1, 2, 3, 4);
$conditions = array(
    'column_a = :column_a',
    'column_b <> :column_b',
    'column_c IN (' . implode(',', $columnCArrayValues) . ')'
);

// ..

$where = '(' implode(') AND (', $conditions) . ')';
// result: (column_a = :column_a) AND (column_b <> :column_b) 
// AND (column_c IN (1,2,3,4)) 
```

或者，[Zend 框架在框架的](http://framework.zend.com/)[两个](http://framework.zend.com/manual/2.0/en/index.html#zend-db)版本中都有一个非常好的[Db](http://framework.zend.com/manual/1.12/en/zend.db.html)组件。

# javascript - 如何在 Backbone 子视图中绑定单击事件

> ID：13269071
> 
> 赞同：0
> 
> 时间：2012-11-07T11:43:20.093
> 
> 标签：javascript, events, backbone.js

我在理解 Backbone 子视图中的事件绑定时遇到问题。我的观点定义如下：

```
TenantView = Backbone.View.extend({
  events: {
    "click": "setActive"
  },
  initialize: function() {
    this.parentEl = this.options.parentEl;
    return this.render();
  },
  template: new EJS({
    url: '/scripts/templates/tenant.ejs'
  }),
  render: function() {
    $(this.parentEl).children('ul').append(this.template.render(this.model));
    return this;
  },
  setActive: function(event) {
    return this.model.set('active', true);
  }
}); 
```

模板只包含一个`li`包含一个`a`. 这样做，我的视图上的点击事件不会被捕获，我的方法`setActive`永远不会被触发。

`el`当我通过像我的 (2) 视图之一这样的属性扩展我的视图时，`el: 'li'`它会正常运行并触发该`setActive`功能。第二种观点根本没有反应。如果我`el`在视图初始化期间检查该属性，则工作视图的`el`属性指向右侧`li`，失败的视图`el`指向`li`可以在页面中找到的第一个。

可以看出，当谈到属性的含义时，我完全迷失了`el`。

问题是，我怎样才能将点击视图绑定到这个视图`setActive`功能？

任何人都可以启发我吗？

问候菲利克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:18:22.933

首先，您可以阅读[文档](http://backbonejs.org/#View-el)和[this](https://stackoverflow.com/questions/5624929/backbone-view-el-confusion)。`el`那里给出了解释。

与财产一样，我假设它是从`TenantView`一些. 我会建议一些类似下面的方法并试一试。`parentEl``parent_view`

```
var ChildView = Backbone.View.extend({
  tagName : "li", // change it according to your needs

  events : {
    "click": "setActive"
  },

  initialize : function() {
    _.bindAll(this, "setActive");
    // code to initialize child_view
  },

  render : function() {
    // as I'm not familiar with the way you are using template, 
    // I've put simple call to render template, but it should render the
    // content to be kept inside "li" tag
    this.$el.html(this.template()); 

    return this;
  },

  setActive : function(event) {
    // code to be executed in event callback
  }
});

var ParentView = Backbone.View.extend({
  el : "#parent_view_el",

  initialize : function() {
    // parent view initialization code
  },

  render : function() {
    // a place from where ChildView is initialized
    // might be a loop through collection to initialize more than one child views
    // passing individual model to the view

    var child_view = new ChildView();

    this.$("ul").append(child_view.render().$el); // equivalent to this.$el.find("ul")

    return this;
  }
}); 
```

希望能帮助到你 ！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:56:38.280

通过引入您的`parentEl`属性并规避视图元素的创建，您有一种禁用的骨干自然行为。您基本上永远不会将视图 `elz 属性连接到任何东西。

如果我的代码正确，则`TenantView`它是租户列表中的单个列表项。

在您的`TenantView`项目中，您可以这样做以利用内置事件的主干：

```
render: function() {
    this.setElement(this.template.render(this.model));
    $(this.parentEl).children('ul').append(this.$el);
    return this;
} 
```

该`setElement`函数将使用您的`template`函数的返回值来连接视图元素并为您设置事件。在文档中，建议使用`setElement`以支持仅将某些内容分配给`el`属性。还有一个漂亮的`$el`属性，它将包含视图元素的缓存 jQuery（或 Zepto）对象。

为了个人更多地以*骨干方式*进行，我会考虑这样的事情：

```
var TenantView = Backbone.View.extend({
    // =========
    // = Setup =
    // =========

    events: {
        "click": "setActive"
    },

    template: new EJS({
        url: '/scripts/templates/tenant.ejs'
    }),

    // =============
    // = Lifecycle =
    // =============

    initialize: function(model, options) {
        this.render();
    },

    render: function() {
        var content = this.template.render(this.model);
        this.$el.html(content);
        return this;
    },

    // ==========
    // = Events =
    // ==========

    setActive: function(event) {
        return this.model.set('active', true);
    }

});

var TenantList = Backbone.View.extend({

    // =========
    // = Setup =
    // =========

    id: "tenantList",
    tagName: "ul",

    // =============
    // = Lifecycle =
    // =============

    initialize: function() {
        this.render();
    },

    render: function() {
        if (this.collection.length > 0) {
            this.renderChildren();
        }
    },

    renderChildren: function() {
        var that = this;

        this.collection.each(function(tenant) {
            that.$el.append(new TenantView(tenant).$el);
        });
    }
}); 
```

# java - 对象映射的对象“转换模板”获取器？

> ID：13269075
> 
> 赞同：0
> 
> 时间：2012-11-07T11:43:28.933
> 
> 标签：java

我想知道是否可以创建一个“模板化”getter，例如：

```
class TestGet
{
    private static Map<String,Object> theMap.....

    public static getObject<T>(String key)..... 
```

在代码中的某个地方，例如：

```
JButton myButton = TestGet.getObject<JButton>("theButton"); 
```

当心：这*只是*一个“空闲”问题，我试图避免在我的代码中出现“肮脏”的演员表，因为每次我看到它们时它们都会让我的眼睛流血。

我知道有更优雅的方法可以做到这一点，但我真的会使用地图来避免与其他类链接。

我尝试了一些配置，但似乎没有什么适合我想要做的......这样的模板是否可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T11:49:11.643

你可以写

```
 public static <T> T getObject(String key) {
     return (T) theMap.get(key); // produces a warning.
 } 
```

和

```
 JButton myButton = TestGet.<JButton>getObject("theButton"); 
```

要不就

```
 JButton myButton = TestGet.getObject("theButton"); 
```

* * *

对于更复杂的示例；）

```
class A<T> {
    class B<S> {
        public <U extends S> U tsu() {
            return null;
        }
    }
}

List<String> list = new A<Integer>().new B<List>().<List<String>>tsu(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:00:03.907

如果您只想隐藏演员表，就像彼得展示的那样很容易。如果您还想避免 ClassCastExceptions，类型擦除指示您必须将类作为参数传递（您不能`instanceof`在泛型类型上这样做）。有点乱。

```
class TestGet {
    private static final Map<String,Object> theMap = new HashMap<String, Object>();

    @SuppressWarnings("unchecked")
    public static <T> T getObject(final String key, final Class<T> clazz) {
        final Object o = theMap.get(key);
        return o != null && clazz.isAssignableFrom(o.getClass())
               ? (T) o
               : null;
    }
} 
```

接着

```
JButton b = TestGet.getObject("theButton", JButton.class); 
```

# javascript - 从数据属性确定网格大小

> ID：13269077
> 
> 赞同：1
> 
> 时间：2012-11-07T11:43:36.767
> 
> 标签：javascript, jquery, html

在我的代码中，我从 HTML 中提取了一个名为网格大小的数据属性。当网格大小被拉出时，我想写一个语句，如果值是“大”，那么 x 和 y 坐标是......如果值是“小”，那么 x 和 y 坐标是...我已经尝试过了，但我无法让它工作。有人可以告诉我哪里出错了吗？

这是从 HTML 中提取它的语句

```
 $('li[data-number-input],li[data-completion-number]').each(function(){
    numberInput.push($(this).attr('data-number-input'));
    completionNumber.push($(this).attr('data-completion-number'));
    gridSize.push($(this).attr('data-grid-size'));
}); 
```

这是我写的声明

```
if ($(this).data('grid-size') == "large") {
    gridColumns = 4;
    gridRows = 4;
}
else {
   gridColumns = 6;
   gridRows = 8;
} 
```

这是html

```
<li data-number-input="6" data-completion-number="1" data-grid-rows="8" data-grid-columns="6" data-grid-size="large"></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:54:58.750

您的代码中存在语法错误，您错过了`)`该`push`方法，我不确定您为什么在 if 语句中使用 push 方法，您可以使用`data`方法：

```
if ($(this).data('grid-size') === "large") {
   // ...
} else {
   // ...
} 
```

# android - 通过 Capture 更改 ImageVIew

> ID：13269084
> 
> 赞同：0
> 
> 时间：2012-11-07T11:44:12.457
> 
> 标签：android, android-intent, android-imageview, crop, android-camera-intent

这是我想要更改名为 cameraView 的 Imageview 的问题

我用`startActivityforResult`但它不起作用。

我已经写了它需要的权限。

ImageView 没有改变

我的整个代码是 [http://pastie.org/5340010](http://pastie.org/5340010)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:40:11.997

如果您尝试将视图更改为从相机捕获的图像，为什么不直接将其设置为 onActivityResult 中的 ImageView ？

看看下面的一段代码：

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    Bitmap bm=(Bitmap) data.getExtras().get("data");
    iv.setImageBitmap(bm); 
```

不知道这是否有帮助，但它肯定会起作用！

# url - CakePhp 中不错的 seo URL

> ID：13269090
> 
> 赞同：0
> 
> 时间：2012-11-07T11:44:30.603
> 
> 标签：url, cakephp, url-rewriting, url-routing

我正在 CakePhp 上开发网站，但我遇到了 URL 的下一个问题。

在我的类别和子类别页面的应用程序中，我需要有下一个 URL：

*   /类别蛞蝓/
*   /category-slug/子类别-slug

问题是这种格式的 URL 与任何*控制器/操作*URL 匹配，我不能硬编码所有类别/子类别 url，因为它们有很多，而且它们是动态的。

如何解决？

**编辑**

我发现了这种方法[http://mark-story.com/posts/view/using-custom-route-classes-in-cakephp](http://mark-story.com/posts/view/using-custom-route-classes-in-cakephp)，但可能存在不需要额外检查数据库、缓存等的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:20:08.603

最快/最简单的方法：

```
// routes.php
Router::connect('/category/:category/:subcategory', 
                     array('controller'=>'categories', 'action'=>'view'), 
                     array('pass' => array('category', 'subcategory')));

// CategoryController/view
public function view($category = 'default', $subcategory = null) {
    // your logic here
}

// links
$this->Html->link('View PHP >> Tutorials', array('action'=>'view', 
                       'category'=>'php', 'subcategory'=>'tutorials')); 

// output
<a href="/category/php/tutorials">View PHP >> Tutorials</a> 
```

通过`/category/`在开始时引入，您不必担心为每个其他控制器/动作提供路由（否则每个请求都会发送到您的类别控制器。

# c - eclipse C项目显示错误（符号无法解析）但它编译

> ID：13269092
> 
> 赞同：8
> 
> 时间：2012-11-07T11:44:36.350
> 
> 标签：c, eclipse, indexing

我可以在工作中访问一个 C 项目，我必须在其中实现一些东西。我能够将它加载到 eclipse 中并且可以`Project -> Build All`。编译显示没有错误或警告。但是在eclipse中，显示了很多错误。一个例子：

* * *

有一个枚举

```
typedef enum MeasurementType {
    PN, BB, AM, RES
} MEAS_TYPE;
MEAS_TYPE type; 
```

在其中一个文件中。它在其他地方使用并产生如下错误： ![在此处输入图像描述](../Images/5a03ddd1d358daccedb23a5e088715a8.png)

最有趣的是，这`AM`似乎只是一个问题，而不是`PN`or `BB`。

* * *

我还没有找到令人满意的解决方案。我已经尝试包含我能想到的所有可能的目录`Project Properties -> C/C++ General -> Paths and Symbols`（就像[这篇文章](https://stackoverflow.com/a/10554556/1137043)所建议的那样），但这并没有帮助。

项目本身是用 Makefiles 编译的（这就是我需要的原因`Project -> Build All`）。难道是eclipse没有正确解释这些Makefile吗？在把这些东西搞砸了几个小时并且没有向前迈出一步之后，我有点迷失了。

编辑：这是我的构建相关项目属性的一些屏幕截图（至少我相信它们是相关的：D）。如果您需要更多信息，请告诉我。

![在此处输入图像描述](../Images/9c9ba4e93400644b5426520bb586c26b.png) ![在此处输入图像描述](../Images/7bcb30e6291ba55f7619a25e57582480.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:49:33.033

由于我收到了 moooeeeeep 的建议，我将在此处发布解决方案。我仍然接受alk的回答，因为他是向我展示正确方向的人。

**我的解决方案：**

如果我在 eclipse 中单击`AM`（带有红色下划线的那个）并按`F3`下去声明，它实际上是问我要去哪个声明。它列出了（正确的）枚举常量以及来自其他地方的一些变量。因此问题是多个声明`AM`存在于不同的代码位置。

我通过将常量**重命名**`enum`为其他东西（`AN`在我的情况下）来解决这个问题。代码中没有同名的变量，因此 eclipse 能够正确地重构它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-03T15:31:09.730

这是一个相当古老的问题，但我希望这个简短的答案对某人有用。

我在 IDE 中遇到了与枚举类似的错误，但在编译时却没有，这似乎表明 Eclipse 的 Codan 中存在错误。升级到六月发布的新版Eclipse（Neon 4.6）后，错误消失了。只需尝试更新 Eclipse！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T13:37:50.407

看起来好像 Eclipse（不是 gcc）被设置为解析错误的或一些额外的、可能过时的（包含）源文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-15T20:50:34.607

在 Eclipse CDT Bugzilla 中添加了关于此问题的错误报告：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=439553](https://bugs.eclipse.org/bugs/show_bug.cgi?id=439553)

# ios - 如何在 LHBezier 中检索 makeStatic 或 makeDynamic 方法？LevelHelper - Cocos2D

> ID：13269099
> 
> 赞同：5
> 
> 时间：2012-11-07T11:44:58.297
> 
> 标签：ios, cocos2d-iphone, levelhelper

在 LevelHelper 中，我可以将贝塞尔形状设置为静态、动态等。在我的代码中，我需要更改这些属性。有人可以帮我吗？

```
LHBezier* bezier = [loader bezierWithUniqueName:@"BezierNode"];

[bezier makeStatic]; // not working 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:41:23.673

您可以像这样更改体型：

```
bezier.body->SetType(b2_staticBody);
bezier.body->SetType(b2_dynamicBody);
bezier.body->SetType(b2_kinematicBody); 
```

# objective-c - 使主视图可见时的 initWithCoder 异常（旧 IOS 项目）

> ID：13269106
> 
> 赞同：0
> 
> 时间：2012-11-07T11:45:41.150
> 
> 标签：objective-c, xcode, cocoa-touch

我打开了一个旧的 iOS 项目，就像 2010 年的 iOS 3 一样旧，发现它在启动时崩溃了。例外是：

```
*** Terminating app due to uncaught exception 'NSGenericException', reason: 'This coder requires that replaced objects be returned from initWithCoder:' 
```

我现在已经搞砸了这个项目几个小时，试图找出导致它的原因。我觉得我已经耗尽了我的智慧和资源，没有从头开始重新做大部分应用程序。关于可能是什么原因的任何想法？

我的调查结果：

该项目是对 AppStore 中现有内容的全新 git checkout。是的，该应用程序非常简单，可以在 2 年内无需任何更新即可正常运行。

我更改为使其编译是将基本 SDK 从 4.1（Xcode 中不再可用）更改为 iOS6 并点击运行。项目设置中的目标仍然是 3.0。

我检查了我没有在代码中的任何地方调用或实现 initWithCoder。我的代码中指示的行只是对 main.m 中的 UIApplicationMain() 的调用，这对我没有多大帮助。

该应用程序只有 3 个视图。主要、细节和关于。看起来 MainView 或 MainViewController 包含问题。我从应用程序没有崩溃的结论是： 1.选择在启动时不将其添加到 NavigationController。2.选择添加 AboutController。

我怀疑问题出在 Xib 文件而不是控制器或视图代码上，因为我可以使用 AboutView Xib 初始化 MainViewController 并启动应用程序。

我想知道我是否可以“修复”这个 Xib，或者我是否必须创建一个新的并重新布局 GUI 元素？这是我唯一的出路，我害怕。该应用程序很简单，但重新布局主要（也是最密集的）视图仍然需要一些时间。此外，我更愿意知道问题出在哪里，而不是重新开始，可能有一天会再次陷入同样的​​境地。

我在正确的轨道上吗？有没有办法追踪有问题的代码或 GUI 小部件？

提前感谢您的任何建议。

更新：在新的 Xib 中重新创建 UI 的基础知识并使用该应用程序后，该应用程序可以正常工作。仍然想知道我是否可以通过更改其中的某些设置或其他设置来修复旧的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:30:47.553

我可以想到两种可能导致这种情况，.xib 文件有一些格式问题，或者您在此 .xib 中使用了一个贬值的对象，因此 SDK 不再具有 .xib 所需的特定 initWithCoder: 方法。

要使 Xcode 重写文件并可能修复任何格式问题，请更改文档版本。在 Xcode 中选择 .xib 文件并显示实用程序窗格的文件检查器选项卡以访问版本设置。

对于另一种可能性，我将对您的 .xib 执行手动二进制搜索以查找违规对象。删除一半的对象并运行应用程序。如果它有效，您删除了坏对象。我相信你明白了。可能有不止一个这样的坏对象，但您应该能够相当快地找到一个，弄清楚如何更新它，然后修复其他类似的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-23T07:30:51.943

在 Swift 下，这个错误也可能发生，因为`init?(coder aDecoder: NSCoder)`初始化函数是失败的（如`?`after init 所示）。在导致初始化程序失败并返回 nil 的情况下，从情节提要或 nib 初始化对象时会引发错误。

# objective-c - 用字符串识别表情符号字符并全部反转

> ID：13269107
> 
> 赞同：2
> 
> 时间：2012-11-07T11:45:49.133
> 
> 标签：objective-c

`NSString`我从中得到了`UIWebView`包含 iPhone 表情符号和不包括表情符号的反转文本。我需要`NSString`再次显示反转，`UIWebView`但无法使用表情符号获得反转的字符串。我没有在字符串中识别表情符号字符。我有带有 iOS 6.0 的 xcode 4.5。这是我的代码：

```
 - (NSString *) createReverseStringFromString:(NSString *)inputString {
  if (inputString.length <= 0)
    return inputString;

 NSMutableString *mutableReverseString = [[NSMutableString alloc] 
 initWithCapacity:inputString.length];
 Thfor (NSInteger i = inputString.length -1; i >= 0; i--) {

    NSString *characterString = [inputString substringWithRange:NSMakeRange(i, 1)];
    [mutableReverseString appendString:characterString];

    NSLog(@"mutableReverseString..%@",mutableReverseString);
 }

 NSString *outputString = [mutableReverseString copy];
 [mutableReverseString release];
return [outputString autorelease];
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T13:27:32.013

问题是许多表情符号字符在内部存储为两个字符的“代理对”。

例如，“THUMBS UP SIGN”是Unicode点U+1F44D，但是如果你把它存储在an中`NSString`并`substringWithRange`用来获取单个字符，你会得到两个字符：

```
U+D83D, U+DC4D 
```

这是 U+1F44D 的 UTF-16 代理对。

当然，如果你把这两个字符颠倒过来，输出就是垃圾。

解决方案是用于`rangeOfComposedCharacterSequenceAtIndex`获取“属于一起”的字符序列：

```
- (NSString *) createReverseStringFromString:(NSString *)inputString {
    if (inputString.length <= 0)
        return inputString;

    NSMutableString *mutableReverseString = [[NSMutableString alloc] 
                         initWithCapacity:inputString.length];

    NSInteger i = inputString.length;
    while (i > 0) {
        NSRange range = [inputString rangeOfComposedCharacterSequenceAtIndex:i-1];
        NSString *characterString = [inputString substringWithRange:range];
        [mutableReverseString appendString:characterString];
        i = range.location;
    }

    NSString *outputString = [mutableReverseString copy];
    return outputString;
} 
```

此函数正确反转包含表情符号字符的字符串。

（*注意：*我省略了所有`release`,`autorelease`调用，因为我总是使用 ARC 编译。你必须在适当的地方再次添加。）

# windows-8 - Windows 8 XAML - 使用 VariableSizeWrapGrid 的 GridView 问题

> ID：13269108
> 
> 赞同：0
> 
> 时间：2012-11-07T11:45:48.607
> 
> 标签：windows-8, winrt-xaml

我的页面上有以下代码。

```
<Page
    x:Class="MyPage.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:MyProject"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">
    <ScrollViewer>
        <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
            <Grid.RowDefinitions>
                <RowDefinition Height="10*" />
                <RowDefinition Height="400*" />
            </Grid.RowDefinitions>
            <TextBlock Grid.Row="0" Text="Some Header" FontSize="48" Margin="100, 50, 0, 0" />
            <local:CustomGridView Grid.Row="1"  HorizontalAlignment="Left" Margin="100, 0, 0, 0" ItemsSource="{Binding CollectionOfYears}">
                <GridView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <VariableSizedWrapGrid Orientation="Vertical" />
                    </ItemsPanelTemplate>
                </GridView.ItemsPanel>
                <GridView.ItemTemplate>
                    <DataTemplate>
                        <Grid Height="200" Width="200">
                            <Grid.Background>
                                <SolidColorBrush Color="{Binding Color}" />
                            </Grid.Background>
                            <StackPanel VerticalAlignment="Bottom">
                                <StackPanel.Background>
                                    <SolidColorBrush Color="Black" Opacity="0.5" />
                                </StackPanel.Background>
                                <TextBlock FontSize="24" Margin="10" TextAlignment="Center" Text="{Binding Year}" />
                            </StackPanel>
                        </Grid>
                    </DataTemplate>
                </GridView.ItemTemplate>
            </local:CustomGridView>
        </Grid>
    </ScrollViewer>
</Page> 
```

现在，我得到以下图像作为我的页面。

[https://skydrive.live.com/redir?resid=59DBB22BE5D0430E!279](https://skydrive.live.com/redir?resid=59DBB22BE5D0430E!279)

如何让gridview填满剩余空间，即填充文本块后留下的空间？然后我如何让 variablesizewrapgrid 向右流动而不是向下流动，同时仍然填充第一个下方的第二个瓷砖，依此类推？

编辑：我希望在组中完成 Windows 商店。一件大件物品，其余的只是包裹它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:02:33.050

好的。想通了这个问题。

第 1 步：删除滚动查看器。

第 2 步：将网格中第一行的高度设置为某个固定值。

步骤 3：将网格中第二行的高度设置为 *。

第 4 步：去掉文本块上的边距。

第 5 步：在网格视图上使用填充而不是边距。

这将有助于解决其中的一些问题。

# ruby-on-rails - ActiveRecord：验证和写入数据库之间的并发访问

> ID：13269109
> 
> 赞同：4
> 
> 时间：2012-11-07T11:45:58.420
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, activerecord, transactions

假设我在网上书店的数据模型看起来像这样：

![在此处输入图像描述](../Images/d3166f123c29f876aa470d5aee1d62dd.png)

在创建新订单之前，我想确保有足够的商品库存，所以我有这样的方法

```
def ensure_enough_in_stock
    errors.add(:quantity, "not enough in stock") if quantity > book.stock
end 
```

为了确保在保存到数据库之前调用此方法，我使用了验证：

```
validate :ensure_enough_in_stock, :on => create 
```

总而言之，当我创建订单时：

1.  验证方法被称为
2.  新订单被写入数据库（如果验证通过）

如果在 1\. 和 2\. 之间，另一个进程（一个并发访问，另一个线程，...）对同一本书的 stock 属性进行了修改，会发生什么？是否引发了异常？

**更一般地说，如何处理在验证和保存**到数据库之间发生的情况？

我认为我也应该在数据库中进行验证，但我不知道它会对性能产生什么影响。有没有聪明的方法来处理这种情况？

**编辑**

[按照此处](http://guides.rubyonrails.org/active_record_querying.html#locking-records-for-update)的说明锁定交易可以防止对股票的写访问，但是如果我在 Book 模型中也有一个“已发布”属性，它可以采用“公共”或“私有”值，然后我想确保你不能买一本私人的书。

但是，与股票值可以通过外部进程更改相同的方式，发布的值也可以更改：在这种情况下，锁定不会有任何帮助，不是吗？

![在此处输入图像描述](../Images/cdf59e22fcfa50e410fa1a8dd518ee78.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:05:14.837

Rails 通常将验证和保存包装在事务中。因此，您唯一需要做的就是使用 lock in 运行查询`ensure_enough_in_stock`。锁将防止数据被其他请求更改。请参阅[this](http://guides.rubyonrails.org/active_record_querying.html#locking-records-for-update)了解如何使用锁定进行查询。

# javascript - 单击浏览按钮更改默认窗口位置

> ID：13269110
> 
> 赞同：0
> 
> 时间：2012-11-07T11:46:01.097
> 
> 标签：javascript, html

当我们的用户从我们的网页单击浏览按钮以上传任何文件时，我想更改窗口位置。我会给你一个场景 - 我在我们的 html 表单上有一个浏览按钮，当用户单击一个窗口弹出窗口时，该位置是默认的“我的文档”。

实际上，我想在单击浏览按钮时更改此窗口弹出位置，假设我有一个目录 D:\My_Project，我希望一旦我的用户单击浏览按钮上传文件，窗口弹出窗口应该带到这个位置并从这里用户可以选择文件。

我想使用 Java 脚本。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:48:50.113

无法指定浏览窗口的打开位置。

（在 WWW 上，也没有办法知道他们是否会有“我的文档”、“My_Profile”或“D:\”。）

# android - Arraylist在android中重复元素

> ID：13269114
> 
> 赞同：-1
> 
> 时间：2012-11-07T11:46:15.093
> 
> 标签：android, listview, arraylist

实际上我已经实现了列表视图，我们可以通过点击与之关联的切换按钮来选择适当的行。我正在将该行上的数据添加到arraylist。但是，我面临的问题是，当我选择例如 row1 然后 row2 时，arraylist 中的数据是这样的：（row1 数据，row1 数据，row2 数据），这里 row1 数据重复.. 但是，我需要这：（第 1 行数据，第 2 行数据）。即使我也在尝试使用 clear() 方法。但是，当我使用它时，它会显示空白数据或上次选择的数据..

那么，我该怎么办？

请帮我。

```
public class ExpListActivity extends ExpandableListActivity {

static String arrGroupelements[]=new String[60];

List<String> arraylistGroupelements=new ArrayList<String>();
List<String> arraylistChildren;
List<List<String>> arraylistChildelements=new ArrayList<List<String>>();

static String arrChildelements[][];
static final int arrCheckChildToggleButtons[][]=new int[60][60];    

ArrayList<Integer> countChildren=new ArrayList<Integer>();
boolean allChildrenSelected=false,noChildrenSelected=false;  

ExpandableListView expList;
ExpAdapter adapter;
TextView txtDetails;  
ArrayList<String> details,newData;
Button btnShow;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    expList = getExpandableListView(); 
    adapter = new ExpAdapter(this);
    expList.setAdapter(adapter);
    newData=new ArrayList<String>();

    try {

        JSONArray categories=json.getJSONArray("Category_Display");

        for (int i = 0; i < categories.length(); i++) {

            JSONObject c=categories.getJSONObject(i);
            String strCatName=c.getString("category_name");
            arraylistGroupelements.add(strCatName);
            JSONArray subcategories=c.getJSONArray("subcategory");
            arraylistChildren=new ArrayList<String>();
            for (int j = 0; j < subcategories.length(); j++) {
                JSONObject sb=subcategories.getJSONObject(j);
                String strSbName=sb.getString("subcategory_name");
                arraylistChildren.add(strSbName);   

            }
            arraylistChildelements.add(arraylistChildren);
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }       

    arrGroupelements=arraylistGroupelements.toArray(new String[arraylistGroupelements.size()]);

    final int listSize=arraylistChildelements.size();
    arrChildelements=new String[listSize][];
    for (int i = 0; i < listSize; i++) {
        List<String> sublist=arraylistChildelements.get(i);
        final int sublistSize=sublist.size();
        countChildren.add(new Integer(sublistSize));
        arrChildelements[i]=new String[sublistSize];
        for (int j = 0; j < sublistSize; j++) {
            arrChildelements[i][j]=sublist.get(j);
        }
    } 

    for (int k = 0; k < adapter.getGroupCount(); k++) {
        for (int m = 0; m < adapter.getChildrenCount(k);m++){
            arrCheckChildToggleButtons[k][m]=0;
        }

    expList.setOnGroupClickListener(new OnGroupClickListener() {
        @Override
        public boolean onGroupClick(ExpandableListView parent, View v,
                int groupPosition, long id) {
            return false;
        }
    });

    expList.setOnGroupExpandListener(new OnGroupExpandListener() {
        @Override
        public void onGroupExpand(int groupPosition) {
        }
    });

    expList.setOnGroupCollapseListener(new OnGroupCollapseListener() {
        @Override
        public void onGroupCollapse(int groupPosition) {
        }
    });

    expList.setOnChildClickListener(new OnChildClickListener() {
        @Override
        public boolean onChildClick(ExpandableListView parent, View v,
                int groupPosition, int childPosition, long id) {
            return false;
        }
    });
}

public class ExpAdapter extends BaseExpandableListAdapter {

    private Context myContext;

    public ExpAdapter(Context context) {
        myContext = context;
        details=new ArrayList<String>();
    }

    @Override
    public Object getChild(int groupPosition, int childPosition) {
        return arrChildelements[groupPosition][childPosition];
    }

    @Override
    public long getChildId(int groupPosition, int childPosition) {
        return childPosition;
    }

    @Override
    public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {

            LayoutInflater inflater = (LayoutInflater) myContext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.child_row, null);

        TextView tvPlayerName = (TextView) convertView
                .findViewById(R.id.tvPlayerName);
        tvPlayerName
                .setText(arrChildelements[groupPosition][childPosition]);

        ToggleButton btnCToggle=(ToggleButton) convertView.findViewById(R.id.btnChildToggle);

        final int gP=groupPosition;
        final int cP=childPosition;

        btnCToggle.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

                if (isChecked) {
                    arrCheckChildToggleButtons[gP][cP]=1;
                } else {
                    arrCheckChildToggleButtons[gP][cP]=0;
                }

            }
        });

        if (arrCheckChildToggleButtons[groupPosition][childPosition]==1) {
            btnCToggle.setChecked(true);
            details=new ArrayList<String>();
            details.add((String) adapter.getChild(gP, cP));
            for (int index = 0; index < details.size(); index++) {
                Toast.makeText(myContext, index+" "+details.get(index), 8000).show();
            }
        }
        else {
            btnCToggle.setChecked(false);

        }
        return convertView;
    }

    @Override
    public int getChildrenCount(int groupPosition) {
        return countChildren.get(groupPosition);
    }

    @Override
    public Object getGroup(int groupPosition) {
        return arrGroupelements[groupPosition];
    }

    @Override
    public int getGroupCount() {
        return arrGroupelements.length;
    }

    @Override
    public long getGroupId(int groupPosition) {
        return groupPosition;
    }

    @Override
    public View getGroupView(int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {   
                    LayoutInflater inflater = (LayoutInflater) myContext                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    convertView = inflater.inflate(R.layout.group_row, null);

        final int gPos=groupPosition;

        TextView tvGroupName = (TextView) convertView
                .findViewById(R.id.tvGroupName);
        tvGroupName.setText(arrGroupelements[gPos]);
        ToggleButton btnGtoggle= (ToggleButton) convertView.findViewById(R.id.btnGroupToggle);

        ImageView imgHollowCircle=(ImageView) convertView.findViewById(R.id.imgHollowCircle);

        btnGtoggle.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

                if (isChecked) {
                    for(int i=0;i<adapter.getChildrenCount(gPos);i++){
                            arrCheckChildToggleButtons[gPos][i]=1;
                            Log.d("getgroupview_checked", "if part from getgrpview");
                            Log.d("getgroupview_checked", "arrCheckChildToggleButtons["+gPos+"]"+"["+i+"]="+arrCheckChildToggleButtons[gPos][i]);
                    }
                }
                else {
                    for (int i = 0; i < adapter.getChildrenCount(gPos); i++) {
                        arrCheckChildToggleButtons[gPos][i]=0;
            }
                }

                expList.invalidateViews();
            }  
        });

        int i=0;
        for (i = 0; i < adapter.getChildrenCount(gPos); i++) {
            if (arrCheckChildToggleButtons[gPos][i]==0) {
                allChildrenSelected=false;
                break;
            }
        }

        if (i==adapter.getChildrenCount(gPos)) {
            allChildrenSelected=true;
        } 

        imgHollowCircle.setPadding(0, 0, 8, 0);

        if (allChildrenSelected) {
            btnGtoggle.setChecked(true);
            imgHollowCircle.setVisibility(View.VISIBLE);
            imgHollowCircle.setBackgroundDrawable(getResources().getDrawable(R.drawable.green_concrete_circle));

        } else {
            btnGtoggle.setChecked(false);
                imgHollowCircle.setBackgroundResource(R.drawable.green_hollow_circle);
                imgHollowCircle.setVisibility(View.VISIBLE);

        }

        return convertView;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:56:10.000

由于您的问题不清楚，这是[可能的解决方案](https://stackoverflow.com/questions/13006850/adding-values-of-repeated-elements-in-arraylist)

我假设，您需要 row1 中的所有条目。

# git - 为 github 创建一个公共 git repo 的分支

> ID：13269115
> 
> 赞同：2
> 
> 时间：2012-11-07T11:46:18.757
> 
> 标签：git, github

我刚开始使用 git 和 github，我需要一些建议。我想创建一个公共 git repo 的分支（如果您有兴趣，请使用 qemu-kvm）。我计划在 github 上创建一个公共版本的 fork，并为我们的团队提供一个开发版本。

我确信有很多方法可以设置它，但 git 有时会让我感到困惑。我现在想做的是...

在我的开发机器上的一个特殊官方分支中创建一个 qemu-kvm 存储库的克隆。允许团队克隆此存储库并将更改提交到主分支。当 master 分支稳定时，我会将代码合并到一个 github 分支，并使用它来更新 github 上的代码。

定期，我会在官方分支上获取更改，并根据需要将它们合并到我的 github 分支。

这听起来合理还是有更好的方法来做到这一点？谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:42:18.540

它可以工作，但您需要在本地环境中管理一个特殊的克隆。

您可以简单地在您的 fork 上发布一个 ' `dev`' 分支，并要求您的开发人员直接推送到您的 fork 的该分支（将开发人员添加为协作者）

您将负责克隆该 GitHub 分支并合并`dev`到`master`，确保它稳定并基于原始仓库中最新的 master 分支（因此将您的 master 分支`upstream/master`重新设置[在合并了，下一步怎么办？](https://stackoverflow.com/a/12772000/6309) ”）。
然后你可以推`master`送到你的 fork 并提出拉取请求。

# c++ - 模板类多文件项目 - 如何？

> ID：13269116
> 
> 赞同：0
> 
> 时间：2012-11-07T11:46:19.193
> 
> 标签：c++, class, templates

> **可能重复：**
> [为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)
> [为什么模板类的实现和声明应该在同一个头文件中？](https://stackoverflow.com/questions/3749099/why-should-the-implementation-and-the-declaration-of-a-template-class-be-in-the)

我正在做一个需要我的“堆栈”来保存数据的项目。但是我不想为每个文件类型编写不同的版本（而且我不想使用向量）。

所以我正在尝试使用*模板类*，这是我的代码：

**结构堆栈.h**

```
#ifndef STRUCTSTACK_H_
#define STRUCTSTACK_H_

template <class AnyType> class StructStack {
    StructStack();
    ~StructStack();
    struct Element {
        Element *pointer;
        AnyType value;
    };
    Element *pointerToLastElement;
    int stackSize;
    int pop();
    void push(int value);
    int size();
};

#endif 
```

**结构堆栈.cpp**

```
#include "stdafx.h"
#include "StructStack.h"
#include <iostream>
using namespace std;

template <class AnyType> void StructStack<AnyType>::StructStack() {
    //code
}

template <class AnyType> void StructStack<AnyType>::~StructStack() {
    //code
}

template <class AnyType> AnyType StructStack<AnyType>::pop() {
    //code
}

template <class AnyType> void StructStack<AnyType>::push(AnyType value){
    //code
}

template <class AnyType> AnyType StructStack<AnyType>::size() {
    //code
} 
```

如果我尝试编译这两个文件，我会收到一堆编译错误。我在网上读到，在多文件项目中创建模板类有点困难。

那么如何做到这一点呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:48:49.257

您只需要将函数的定义放在头文件中。你在里面写的所有东西都`StructStack.cpp`应该放在`StructStack.h`类定义之后。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T11:49:05.823

您可以通过将所有定义（您当前在 中的代码`StructStack.cpp`）放入`StructStack.h`并删除前者来解决此问题。编译器需要能够访问实现代码，以便它可以根据需要实例化类模板。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T11:50:01.057

每个需要使用它的文件文件都需要看到模板化代码。

在它被专门化或使用之前，它不会被编译。

基本上如果你想在不同的文件中使用它，你必须把它放在头文件中，然后包含它。当您实际使用具有某种类型的模板时，代码将在使用它的上下文中生成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T11:53:12.183

C++ 模板代码应始终放在头文件中，以便在您希望实例化模板的每个翻译单元中都可以看到实现。如果您愿意，可以将代码分隔为 *.h 和 *.cpp 文件，但您仍应在 *.h 文件的末尾 #include *.cpp 文件。

# asp.net - 如何在 C# 中通过代理服务器发送电子邮件

> ID：13269117
> 
> 赞同：1
> 
> 时间：2012-11-07T11:46:19.183
> 
> 标签：asp.net, email, c#-4.0, proxy, smtp

您好我想用 ASP.NET 发送邮件，但我想通过代理服务器发送电子邮件，那么我应该如何编辑下面的代码以通过代理服务器发送它？

谢谢

```
MailMessage mail = new MailMessage();
SmtpClient SmtpServer = new  SmtpClient(ConfigurationManager.AppSettings["MailServer"]);
mail.From = new MailAddress(ConfigurationManager.AppSettings["MailAccount"]);
mail.To.Add(toAddres);
mail.CC.Add(new MailAddress(ccAddress));
mail.Subject = subject;
mail.Body = content;
mail.IsBodyHtml = true;
SmtpServer.Port = ConfigurationManager.AppSettings["MailPort"] == null ? 587 : int.Parse(ConfigurationManager.AppSettings["MailPort"]);
SmtpServer.Credentials = new System.Net.NetworkCredential(ConfigurationManager.AppSettings["MailUserName"], ConfigurationManager.AppSettings["MailPassword"]);
SmtpServer.EnableSsl = false;
SmtpServer.Send(mail); 
```

# product - 如何在 Shopify Liquid 中检索特定产品？

> ID：13269125
> 
> 赞同：25
> 
> 时间：2012-11-07T11:47:15.277
> 
> 标签：product, handle, shopify, liquid

我有一个产品句柄列表，我想根据这个句柄获取产品。似乎没有办法告诉 Liquid 去购买单一产品。我可以使用 API 来做到这一点，但如果我使用 API，那么我必须使用 JavaScript，并且我必须复制我已经在片段中拥有的 HTML，并复制逻辑。

我正在尝试的精简版：

```
{% assign handle = 'my-product-handle' %}
{% assign product = products.handle %}
{% include 'snippet-product-item' %} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2015-06-15T18:17:27.327

您现在可以使用以下命令通过句柄检索产品：

```
{% assign someProduct = all_products.some-handle %} 
```

目前没有文档支持这一点，但希望 Shopify 很快就会有一些切实的东西。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-07-16T17:30:50.920

只是为了更新任何刚刚发现此问题的人，您现在可以根据其 Shopify/liquid 存储库中的`all_products['handle']`此[响应](https://github.com/Shopify/liquid/issues/438#issuecomment-108981467)直接通过句柄引用产品。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-09-09T22:38:51.313

您现在不仅可以通过其在任何流动页面上的句柄访问任何产品，`all_products['the-handle-of-the-product']`而且您可以像这样的产品变量一样威胁它：

`{{ all_products['the-handle-of-the-product'].title }}``{{ product.title }}`这与 product.liquid 页面上的相同。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-02-27T12:57:49.677

我也在寻找这个，我还没有找到一种方法来通过 id 在液体文件中获取产品。

但正如上面的答案告诉你可以通过手柄访问任何产品

`{{ all_products['product-handle'] }}`

我担心的是，我以为如果你更改产品手柄的名称会自动更改，但实际上并没有发生，它仍然是旧手柄。

您需要创建一个不同的产品才能更改句柄，所以我想`{{ all_products['product-handle'] }}`这是访问您的产品的好方法。

我做这样的事情：

```
{% assign product = all_products['test-product-1'] %}
{% if product == blank %}
    <h1>No product found</h1>
{% else %}
    <h1>{{ product.title }}</h1>
{% endif %} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-06-01T19:51:25.020

你可以尝试这样的事情：

```
{% for product in collection.all_products %}
    {% if product.handle contains 'your-handle-name' %}
        // Do what you want here
    {% endif %}
{% endfor %} 
```

遍历所有产品（也可以遍历特定集合），您可以使用 if 语句找到所需的产品。

干杯。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-07T19:20:25.580

据我所知，您无法通过手柄在液体中取出产品。

这让我问了几个问题：为什么首先要有一个产品句柄列表？它从哪里来的？我建议将这些产品放在自定义集合中，然后您可以像这样引用它们：`{% collections['my-collections'] %}`

# c# - Windows 服务上的 C# 和 NHibernate“无法编译映射文档”

> ID：13269126
> 
> 赞同：4
> 
> 时间：2012-11-07T11:47:41.817
> 
> 标签：c#, oracle, nhibernate

这是我在这个页面上的第一个问题，所以首先对任何新手错误和我糟糕的英语表示抱歉。

如果我没有用完关于如何解决我的问题的想法，我就不会在这样的页面上提问，所以我希望我能在你的帮助下让它工作，因为这是我最后的机会。

我使用 NHibernate 在 C# 中创建了一个程序，将其连接到我的 Oracle 数据库（运行良好），现在我被告知要创建一个类似的程序，但现在是在 Windows 服务而不是 .exe 中。

问题是我已经完成了所有设置，以使 NHibernate 像在 .exe 程序中一样工作，如果我调试该程序，它一切正常，但是一旦我安装并运行该服务，它就会停止工作。

我没有在程序中做任何事情，只是测试 NHibernate 连接。

例外：

```
Could not compile the mapping document: Mapping\CSB_Mensaje.hbm.xml
System.IO.DirectoryNotFoundException: No se puede encontrar una parte de la ruta de acceso 'C:\Windows\system32\Mapping\CSB_Mensaje.hbm.xml'.
   en System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   en System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath)
   en System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize)
   en System.Xml.XmlDownloadManager.GetStream(Uri uri, ICredentials credentials, IWebProxy proxy, RequestCachePolicy cachePolicy)
   en System.Xml.XmlUrlResolver.GetEntity(Uri absoluteUri, String role, Type ofObjectToReturn)
   en System.Xml.XmlTextReaderImpl.OpenUrlDelegate(Object xmlResolver)
   en System.Threading.CompressedStack.runTryCode(Object userData)
   en System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
   en System.Threading.CompressedStack.Run(CompressedStack compressedStack, ContextCallback callback, Object state)
   en System.Xml.XmlTextReaderImpl.OpenUrl()
   en System.Xml.XmlTextReaderImpl.Read()
   en System.Xml.XmlTextReader.Read()
   en System.Xml.XmlCharCheckingReader.Read()
   en System.Xml.XsdValidatingReader.Read()
   en System.Xml.XmlLoader.Load(XmlDocument doc, XmlReader reader, Boolean preserveWhitespace)
   en System.Xml.XmlDocument.Load(XmlReader reader)
   en NHibernate.Cfg.Configuration.LoadMappingDocument(XmlReader hbmReader, String name) 
```

西班牙语的异常部分说它找不到访问路径的一部分。

尝试执行此代码时引发此异常：

```
private static void Init(String BBDD)
    {
        Configuration config = new Configuration();
        config.Configure().SessionFactoryName(BBDD);
        config.AddFile("Mapping\\CSB_Mensaje.hbm.xml");
        config.AddFile("Mapping\\CSB_Periodicidad.hbm.xml");
        config.AddFile("Mapping\\CSB_Plantilla.hbm.xml");
        config.AddFile("Mapping\\CSB_Subscripciones.hbm.xml");
        config.AddFile("Mapping\\CSB_Usuario.hbm.xml");
        config.AddFile("Mapping\\CSB_Login.hbm.xml");
        config.AddFile("Mapping\\CSB_Configuration.hbm.xml");
        _SessionFactory = config.BuildSessionFactory();
    } 
```

这是我的 hibernate.cfg.xml 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
  <session-factory name="Oracle">
    <property name="connection.provider">
      NHibernate.Connection.DriverConnectionProvider
    </property>
    <property name="dialect">
      NHibernate.Dialect.Oracle10gDialect
    </property>
    <property name="connection.driver_class">
      NHibernate.Driver.OracleClientDriver
    </property>
    <property name="connection.connection_string">
      User Id=CSB;
      Password=Hound2012;
      Data Source=(DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.1.30)(PORT = 1521)))(CONNECT_DATA = (SID = HL)));
    </property>
    <property name="show_sql">
      true
    </property>
  </session-factory>
</hibernate-configuration> 
```

再次，这是我第一次在这里问问题，所以我很抱歉犯了任何错误。任何帮助将不胜感激。

问候， 霍尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T11:58:42.123

异常消息的这一行表明了问题：

```
System.IO.DirectoryNotFoundException: No se puede encontrar una parte de la ruta de acceso 'C:\Windows\system32\Mapping\CSB_Mensaje.hbm.xml'. 
```

我认为问题在于您在这里使用相对路径：

```
config.AddFile("Mapping\\CSB_Mensaje.hbm.xml"); 
```

尝试指定映射文件的实际路径。

或者，将您的映射文件标记为嵌入资源并让 NHibernate 在程序集中找到它们，而不是单独告诉配置（请参阅[The NHibernate Wiki](http://nhforge.org/wikis/howtonh/your-first-nhibernate-based-application.aspx)）。

# php - 移动到另一页时发出警报

> ID：13269132
> 
> 赞同：2
> 
> 时间：2012-11-07T11:48:02.237
> 
> 标签：php, javascript, jquery, html

我有一个应用程序，人们可以在其中进行在线测试，当用户移动到另一个页面时，页面应该会发出警报，就像如果你离开页面，你可能会丢失详细信息......我试过了，`window.unload()`但我需要的是它应该显示仅在用户移动到另一个页面时发出警报

例如：我的页面 ID `test.php` ，如果用户单击下一个问题的下一个按钮，页面将重定向到，`test.php?queNumber=2` 因此当重定向发生在 test.php 时，如果它重定向到 about.php 或 help.php 等其他页面，它不应该显示警报，它应该发出警报，怎么达到这个？？？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:54:54.960

这是由 Javascript 控制的客户端。

最简单的是使用[jQuery](http://jquery.com/)，因为你可以很容易地做到这一点。

1.  将 jQuery 添加到您的头脑中 - jQuery 页面上的详细信息，已链接。

2.  在您的 HTML 中，为您想要提醒用户的任何链接添加一个类，例如

    ```
    <a href=".." class="pop">Link Text</a> 
    ```

3.  然后沿线添加一些Javascript

    ```
    $().ready( function() {
        $('.pop').click( function(e) {
           if (! confirm('You are about to leave - are you sure')) {
               e.preventDefault();
               return false;
           } else {
               return true;
           }
        });
    }); 
    ```

注意：如果您有太多链接或未知链接，您可以反转逻辑以仅标记您不想警告的那些链接。所以将类添加到 test.php 的链接中，其余部分不要标记类。然后检查所有的链接，如果有类，就不要提示了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:00:42.470

您可以将事件分配给页面中的所有锚点。这个事件应该检查​​锚的href是否包含'test.php'。

试试下面的代码：

```
$('a').click(function(event) {
   var href = $(this).attr('href');
   if(href.indexOf('test.php') == -1) { //if href does not contain test.php
      event.preventDefault();
      alert('You are about to leave');
   }
}); 
```

# php - 在命令提示符下运行 php 测试代码时找不到命令错误

> ID：13269136
> 
> 赞同：-1
> 
> 时间：2012-11-07T11:48:13.533
> 
> 标签：php, tdd, phpunit, pear

我按照网站[http://elentok.blogspot.com/2011/10/install-phpunit-on-wampserver.html](http://elentok.blogspot.com/2011/10/install-phpunit-on-wampserver.html)安装 PHPUnit 框架以在 PHP 中进行单元测试。我已经下载了 pear 和 PHPUnit。我已经按照上述网站中描述的步骤安装了它们。这也奏效了。但最后，我尝试运行 php 程序:::

```
class MyTest extends PHPUnit_Framework_TestCase
{
    public function testOneEqualsOne()
    {
      $this->assertEquals(1, 1);
    }
} 
```

-> 我在命令提示符下输入了命令 phpunit Mytest.php，但没有运行。并显示错误phpunit is not识别为内部或外部命令，可运行程序或批处理文件。我已经在 c:\wampp\www\myproject> 上试过了。如何运行此代码并正确使用 PHPUnit 测试框架？安装有什么问题吗？我已经在 wampp 服务器上安装了 PHPUnit。如果我错了，请帮助我安装 PHPUnit 并正确使用它。我的系统是 Windows 07 64 位，我正在使用 wampp 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:16:24.703

您必须在 php 测试文件中包含 Autoload.php 文件：

```
require_once 'path/to/PHPUnit/Autoload.php'; 
```

# c# - 获取 System.Drawing.Font 宽度？

> ID：13269145
> 
> 赞同：5
> 
> 时间：2012-11-07T11:48:38.753
> 
> 标签：c#, .net, drawing, system.drawing

我正在使用 .Net 工具进行一些 2D 绘图。`System.Drawing.Font`使用 a`GetHeight()`以像素为单位返回高度。我错过了一个`GetWidth()`检索宽度！我应该使用什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T11:58:47.030

使用 **[Graphics.MeasureString 方法（字符串，字体）](http://msdn.microsoft.com/en-us/library/6xe5hazb.aspx)**：

例如。

```
 // Set up string. string measureString = "Measure String";
    Font stringFont = new Font("Arial", 16);
    // Measure string.
    SizeF stringSize = new SizeF();
    Graphics gfx = Graphics.FromImage(new Bitmap(1, 1));
    stringSize = gfx.MeasureString(measureString, stringFont);
    // This will give you string width, from which you can calculate further 
    double width = stringSize.Width 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T11:52:58.813

什么宽度？`GetHeight`返回两行文本的基线之间的距离，这是字体本身的一个属性。但是宽度取决于你要写的内容。

如果你知道你想写什么，试试这些[`Graphics.MeasureString`](http://msdn.microsoft.com/en-us/library/2h597fsh.aspx)方法。

# c++ - 什么是 StringCbprintf，这与一般的 sprintf 有何不同？

> ID：13269146
> 
> 赞同：8
> 
> 时间：2012-11-07T11:48:42.520
> 
> 标签：c++, c, windows, winapi, printf

我正在浏览以前编写的代码，我发现了`StringCbPrintf()`函数

我在`msdn`现场找到了这样的声明：

```
HRESULT StringCbPrintf(
  _Out_  LPTSTR pszDest,
  _In_   size_t cbDest,
  _In_   LPCTSTR pszFormat,
  _In_    ...
); 
```

什么是`_in_`和`_out_`这里？

当我们已经拥有它时，为什么还需要它`sprintf()`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T14:28:12.437

`_In_`和`_Out_`（**注意**：`_in_/_out`你写的 _ 和`__In__/__Out__`其他答案中写的双下划线都不是）所谓的**SAL Annotations**。它们可以与`/analyze`编译器选项一起使用，并且可以帮助使用原始 C 缓冲区和指针识别错误和问题，例如缓冲区溢出等。除了[有关 SAL 的 MSDN 文档](http://msdn.microsoft.com/en-us/library/ms235402%28v=vs.100%29.aspx)，您还可以阅读此[博客文章](http://blogs.msdn.com/b/michael_howard/archive/2006/05/19/602077.aspx)。

有人讽刺地（并且*错误地*）写道：

> “在世界其他地方，输入是 const 指针，但我想这太简单了。:)”

错过了 SAL比这*更强大*的事实。实际上，使用 SAL 还可以指定目标缓冲区的最大大小，指示哪个参数包含目标缓冲区大小；例如，如果您打开`<strsafe.h>`标题，您可以看到用于`StringCbPrintfW`（Unicode 版本`StringCbPrintf`）的实际 SAL 注释是这样的：

```
STRSAFEAPI
StringCbPrintfW(
    __out_bcount(cbDest) STRSAFE_LPWSTR pszDest,
    __in size_t cbDest,
    __in __format_string STRSAFE_LPCWSTR pszFormat,
    ...)
{
    .... 
```

`__out_bcount(cbDest)`请注意应用于参数的 SAL 注释如何`pszDest`指定这是指向*输出*缓冲区 ( `__out`) 的指针，其*大小*由参数*以字节*( )表示。如您所见，这是一个**丰富的**注释（比简单的“ ”或“非”更丰富）。`_bcount``cbDest`**`const``const`**

 **`std::vector`在我看来，如果您使用诸如or之类的健壮容器类`std::string`（它们知道自己的大小等）来编写 C++ 代码，那么 SAL 有点用处。但是 SAL 在带有原始指针的 C-ish 代码（如几个 Win32 API）中很有用。

关于你问题的第二部分：

> `StringCbPrintf`“如果我们已经拥有，为什么还需要`sprintf`”

主要原因是这`sprintf`是一个**不安全**且易于缓冲区溢出的功能；相反，`StringCbPrintf`您必须指定目标缓冲区的最大大小，这有助于防止缓冲区溢出（这是安全敌人）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T11:50:34.450

[该文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647510%28v=vs.85%29.aspx)试图为您解释：

> 与它替换的函数相比，StringCbPrintf 为代码中的正确缓冲区处理提供了额外的处理。缓冲区处理不佳与许多涉及缓冲区溢出的安全问题有关。StringCbPrintf 总是以空值结尾的非零长度目标缓冲区。

Microsoft API:s 中使用`__In__`and`__Out__`装饰器来表示如何使用指针参数。在世界其他地方，输入是`const`指针，但我想这太简单了。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T11:51:26.780

正如[这里](http://msdn.microsoft.com/ru-ru/library/windows/desktop/ms647510%28v=vs.85%29.aspx)所说：

> StringCbPrintf 是以下函数的替代品：
> 
> *   sprintf, swprintf, _stprintf
> *   wsprintf
> *   wnsprintf
> *   _snprintf, _snwprintf, _sntprintf

因此，它不仅可以替换`sprintf`，还可以替换那些与之一起工作的`wchar`，例如。它还引入了额外的缓冲区处理以防止缓冲区溢出（如同一篇 msdn 文章中所述）。它也*总是以*空值终止目标缓冲区。`_in_`并`_out_`在那里向您显示哪些参数是输入参数，哪些是输出参数。那些很可能`#define`没有，并且在编译开始之前就消失了。**

# android - Rails 的 send_file 用于安装 apk 文件

> ID：13269148
> 
> 赞同：1
> 
> 时间：2012-11-07T11:48:46.397
> 
> 标签：android, ruby-on-rails, ruby-on-rails-3

我正在尝试让我的网站发送`APK`带有一些预验证的 Android 文件，这样用户只需单击链接，应用程序就会开始安装在设备上。

关键是，我正在使用`thin`网络服务器，`send_file path, :type => 'application/vnd.android.package-archive', :disposition => "attachment"`设置标题`headers['Content-Type'] = 'application/vnd.android.package-archive'`并选中设备设置中的**允许不受信任的来源**框。但是*apk*文件只是下载而不是安装。

**UPD：**以下故障问题仅适用于 Android 4。我的装有 Android 2.3.6 的 Galaxy S 运行良好。

我究竟做错了什么？

谢谢！

# php - 在 CakePHP 中根据 ServerName 设置变量

> ID：13269152
> 
> 赞同：1
> 
> 时间：2012-11-07T11:48:52.440
> 
> 标签：php, apache, cakephp, dns, subdomain

我正在构建一个小应用程序，人们可以在其中构建某种投资组合。

目前，每个用户都可以使用 url 链接到他们的投资组合`www.example.com/USERNAME`并处理 CakePHP 中的所有内容，这是我正在使用的路由器规则：

```
Router::connect('/:user/:action/*', array('controller'=>'pages'), array('named' => array('user'))); 
```

所以链接是这样形成的：`www.example.com/USERNAME/home`或者`www.example.com/USERNAME/contact`

我的问题来了。我希望用户能够将他的域的 DNS 指向我的 IP 并更改其中的 URL`www.mypersonalsite.com/home`等等`www.mypersonalsite.com/contact`。

就像豆瓣一样...

实现这一目标的最佳方法是什么？

谢谢大家 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:41:11.797

向用户表“personal_domain”添加一个新字段

确保您的 Apache 已设置好，因此您的应用程序可用的站点会将所有访问服务器的域转发到您的 Cake 应用程序

在 app_controller 中添加类似这样的内容到 beforeFilter()

```
$domain = $_SERVER[ 'SERVER_NAME' ];
$sessionDomain = '';
if( $this->Session->check( 'User.personal_domain' ) )
{
    $sessionDomain = $this->Session->read( 'User.personal_domain' );
}

if( $domain != $sessionDomain )
{
    $User = ClassRegistry::init( 'User' );
    $domainUser = $User->find( 'first', array(
        'conditions' => array(
            'User.personal_domain' => $domain
        )
    ) );

    if( empty( $domainUser ) )
    {
        // whatever you usually do for users that don't have their own domain
    }
    else
    {
        $this->Session->write( 'User.personal_domain', $domainUser [ 'User' ][ 'personal_domain' ] );
        // whatever you usually do, and now you know which user is connecting
    // you should use this info with whatever auth method you use to make sure
    // only that user can login to that domain
    }
} 
```

# c - 指针作为函数的声明？

> ID：13269154
> 
> 赞同：1
> 
> 时间：2012-11-07T11:49:07.197
> 
> 标签：c, pointers

首先我有声明

```
char (*x)(int field);
char yes_or_no(int);
char yes_or_no(int field)
{
    if(field==1)
    return 'y';
    else
    return 'n';
}

x=&yes_or_no;

printf("Now we can call this function by using the pointer *x by using (*x)(1),\nwhich gives us: \n'%c'\n", (*x)(1)); 
```

这工作正常，但现在我必须做点什么

```
char *y(int field); 
```

哪个是或可能是函数的声明？我怎么能用最后的声明/声明做“某事”？

亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:55:23.337

```
char (*x)(int field); 
```

声明一个函数变量`x`，返回`char`.

```
char * y(int field); 
```

声明一个`y()`返回的函数`char *`。

注意第二个声明中缺少的一对括号`()`。

将声明 seocnd 情况的函数变量：

```
char * (*yvar)(int field); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:54:48.863

函数指针的类型为：

```
char *(*x) (int); 
```

声明：

```
char *y(int field); 
```

请注意，一元运算符`&`不需要具有函数的地址。例子：

```
#include <stdio.h>

const char *(*x) (int);
const char *yes_or_no(int field);

const char *yes_or_no(int field)
{
    if (field == 1)
        return "y";
    else
        return "n";
}

int main(void)
{
    x = yes_or_no;
    printf("'%s'\n", x(1));
    return 0;
} 
```

# objective-c - nsmutuableArray 的 mutableCopy 和 autorelease it-crash

> ID：13269165
> 
> 赞同：0
> 
> 时间：2012-11-07T11:49:40.763
> 
> 标签：objective-c

我有这个 ：

```
-(NSMutableArray*)setManch:(NSMutableArray*)data
{

    NSMutableArray *manch=[data mutableCopy] ;
     // some calculations on manch
    return manch;

} 
```

如果我尝试这样做：

```
NSMutableArray *manch=[[data mutableCopy] autorelease] ; 
```

我撞车了。

但是，我必须以`release`某种方式复制这个副本，因为我一次又一次地调用这个函数。我该怎么做？

```
for(int k=0;k< count;k=k+2)
    {
        if(k==count-1)
            [manch addObject:[NSNumber numberWithInt:![[manch objectAtIndex:k] integerValue] ] ];
        else
            [manch insertObject:[NSNumber numberWithInt:![[manch objectAtIndex:k] integerValue] ]     atIndex:k+1 ];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:57:23.397

我建议使用 ARC。

但不管怎么说。自动释放在这里是正确的。所以你的错误可能在其他地方。错误的确切状态是什么？

问题可能是数组中的数据。简单的复制调用不会进行深度复制。因此，如果您的对象仅存在于第一个数组中，那么一旦该数组被释放，它们就会被释放。调试您的数据：查看该方法调用之前和之后存在的内容。

您应该阅读并了解 ios 上的内存管理：

通用**内存管理**：http: [//developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html#//apple_ref/doc/uid/10000011i](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html#//apple_ref/doc/uid/10000011i)

Practical Management, especially **"Avoid Causing Deallocation of Objects You’re Using"** [http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html#//apple_ref/doc/uid/20000043-1000922](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html#//apple_ref/doc/uid/20000043-1000922)

Also read about **ARC**: [http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html#//apple_ref/doc/uid/10000011i](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html#//apple_ref/doc/uid/10000011i)

# ios - iOS：全文搜索

> ID：13269167
> 
> 赞同：1
> 
> 时间：2012-11-07T11:49:46.543
> 
> 标签：ios, xcode, full-text-search

在用户将搜索结果键入 UISearchBar 后，我的应用程序正在解析搜索结果。一切正常。但现在我想搜索全文。结果在我的 NSMutableArray 中，但未显示。我认为问题在于这段代码：

```
NSRange nameRange = [SDPE.title rangeOfString:self.searchBar.text options:NSCaseInsensitiveSearch]; 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:57:12.587

检查这个：

```
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{
  searchBar.showsCancelButton = YES;
  if([self.filteredListContent count]>0)
  {
    [self.filteredListContent removeAllObjects]; // First clear the filtered array.
  }

  for (int cnt = 0; cnt< [self.listContent count];cnt++)
  {
    NSRange range = [[[self.listContent objectAtIndex:cnt]lowercaseString]  rangeOfString :[searchText lowercaseString]];

    if(range.length>0)
    {
        [self.filteredListContent addObject:[self.listContent objectAtIndex:cnt]];
    }
    self.blSearchBarClicked = TRUE;
    [self.tbViewSearch reloadData];
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:51:40.303

由于杰克劳伦斯的好建议，我找到了完美的答案：

```
- (void)filterContentForSearchText:(NSString *)searchText scope:(NSString *)scope
 {
     NSPredicate *resultPredicate = [NSPredicate 
                                    predicateWithFormat:@"SELF contains[cd] %@",
                                     searchText];

    searchResults = [recipes filteredArrayUsingPredicate:resultPredicate];
 } 
```

来源： http: [//www.appcoda.com/how-to-add-search-bar-uitableview/](http://www.appcoda.com/how-to-add-search-bar-uitableview/)

# asp.net - 将报告导出为 PDF 或 CSV 时出现“站点不可用”

> ID：13269168
> 
> 赞同：0
> 
> 时间：2012-11-07T11:49:47.570
> 
> 标签：asp.net, iis-7, reporting-services, windows-server-2008

我在 Windows Server 2008 r2 上运行的 IIS 7.0 上部署了一个 Web 应用程序。我们在这个 Web 应用程序中有一些报告。Web 应用程序中的一切都运行良好，除非我尝试将报告导出为 PDF 或 CSV。这显示以下消息：

> 无法打开此 Internet 站点。
> 请求的站点不可用或找不到。
> 请稍后再试。

此消息仅在 IE8 上出现，该问题未在 Mozilla Firefox 中显示。我不知道这个问题来自哪里或如何解决这个问题。

# delphi - 如何在系统路径之外使用 dll

> ID：13269169
> 
> 赞同：17
> 
> 时间：2012-11-07T11:49:53.610
> 
> 标签：delphi, dll, openssl, indy, indy10

我制作了一个使用 openssl dll（`libeay32.dll`和`ssleay32.dll`）的应用程序。使用它们很有趣，我不直接调用 dll。

我发现避免安装程序的最简单的解决方法（我只是删除一个 exe，我对这种方法没问题）是：

1.  将dll作为exe的资源
2.  在程序启动时，我将它们提取到 exe 文件夹中
3.  exe使用它们

这是完美的，但我想通过在临时文件夹而不是 exe 文件夹（在许多情况下是桌面）中提取 dll 来改进方法。

问题是我不知道如何强制应用程序使用临时文件夹中的 dll，因为现在的行为是：如果 dll 不在当前目录中，请尝试在系统路径中定义的目录中搜索。

谁知道强制 indy 在我的临时路径中使用 dll 的解决方案？（如“临时注册 dll”）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-07T19:38:14.147

如果您使用的是最新版本的 Indy 10，则该`IdSSLOpenSSLHeaders`单元有一个公共`IdOpenSSLSetLibPath()`函数来告诉 Indy 在哪个自定义文件夹中查找 OpenSSL DLL：

```
procedure IdOpenSSLSetLibPath(const APath: String); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-07T12:46:22.390

将 DLL[`LoadLibrary`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx)写入临时文件夹后，立即自行加载它们。
这将使 Indy`LoadLibrary`在需要时使用您的 DLL：

> 如果 lpFileName 不包含路径并且有多个加载的模块具有相同的基本名称和扩展名，则该函数返回第一个加载的模块的句柄。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-07T12:36:17.153

您可以使用它[`SetDllDirectory`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms686203.aspx)来操纵 DLL 的搜索顺序。

# xcode - Xcode - 与 XIB 不同的元素位置

> ID：13269170
> 
> 赞同：1
> 
> 时间：2012-11-07T11:49:57.393
> 
> 标签：xcode, position, xib

我在 XCode 中对齐我的 xib 文件中的 UI 元素时遇到问题，然后当我在模拟器中运行我的应用程序时，它们出现在不同的位置，如下面的屏幕截图所示。

Xcode - 表格视图和文本视图底部对齐：

![在此处输入图像描述](../Images/e8255038b1bfb2a748967d06f67ce27b.png)

模拟器 - 表格视图和文本视图底部不再对齐：

![在此处输入图像描述](../Images/c7bf819ebcb2d21cd35392195909afa2.png)

有没有其他人有这个问题？

表格视图是否补偿了底部的标签栏但文本框没有？

# iphone - iPhone 内存管理概念

> ID：13269179
> 
> 赞同：-2
> 
> 时间：2012-11-07T11:50:47.827
> 
> 标签：iphone, objective-c, ios

> **可能重复：**
> [使用 Cocoa 和 Objective-C 理解引用计数](https://stackoverflow.com/questions/6578/understanding-reference-counting-with-cocoa-and-objective-c)

我对 iPhone 编程和目标 C 的内存管理概念很困惑。它是 iPhone 应用程序性能最有用的概念。我想知道我应该什么时候使用

```
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc]init]; 
```

和

```
[obj dealloc] 
```

**保留**有什么用？它只是将*retainCount*增加了1。这对我来说确实是开销。*retainCount*如何帮助管理内存。帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:54:05.513

你不应该调用dealloc方法......自动释放池也用于线程环境和其他一些地方......

一件事是在 ios 5+ 中，您不必担心保留，释放所有这些东西.. ARC 会处理所有事情

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T11:57:31.403

You have to start with the Memory management basics from **Apple.developer**.

Read [Memory Management](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/MemoryMgmt/Articles/MemoryMgmt.html)

Read [Memory Management Policy](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)

Download the doc from [here](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=4&ved=0CDYQFjAD&url=http://developer.apple.com/DOCUMENTATION/Cocoa/Conceptual/MemoryMgmt/MemoryMgmt.pdf&ei=h0uaUIrYFYXprQfpnIHoDw&usg=AFQjCNEu9YbUwYUI8j0OCg_sa9OY-0HSxg&cad=rja)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T11:52:55.140

创建新线程时，您需要创建自己的自动释放池。

从不打电话`[obj dealloc]`

保留、释放和其他内存概念请参考：[MemoryManagement](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/MemoryManagement.html) 请参考这两个教程，它将帮助您更好地理解概念：

1.  [ios-内存管理-基础](http://www.slideshare.net/whalec1/ios-memory-management-basis)
2.  [内存管理目标c教程](http://www.raywenderlich.com/2657/memory-management-in-objective-c-tutorial)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T11:53:56.553

保留计数 > 0 将向自动释放池指示您的对象仍在使用中，其他对象或其所有者仍需要该对象等。当此计数达到零时，这自动意味着不再需要该对象所以它会被释放。通常，每个 alloc/init、copy、create 或 retain 都必须有其等效的 release/autorelease。

[obj dealloc] 也不是一个好习惯。推荐使用 [obj release] 或 [obj autorelease]。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T11:59:02.373

在引用计数环境中（与使用垃圾收集的环境相反），NSAutoreleasePool 对象包含已收到自动释放消息的对象，并且在耗尽时它会向每个对象发送释放消息。因此，向对象发送 autorelease 而不是 release 可以延长该对象的生命周期，至少直到池本身被耗尽（如果该对象随后被保留，则可能会更长）。一个对象可以多次放入同一个池中，在这种情况下，每次放入池中都会收到一条释放消息。

ClassA *a = [[ClassA alloc]init]; 这里 a 的保留计数为 1，并且 a 只有一个所有者。[保留]；现在，a 的保留计数为 2，并且它有两个所有者。

现在您需要释放“a”对象两次。否则会导致内存泄漏

# objective-c - 在设置 UILabel 文本时使用 UIPanGestureRecognizer 进行翻译

> ID：13269181
> 
> 赞同：2
> 
> 时间：2012-11-07T11:50:49.573
> 
> 标签：objective-c, uilabel, uipangesturerecognizer

在将 UILabel 的文本设置为手势速度时，我在简单地使用 UIPanGestureRecognizer 翻译视图时遇到了问题。

我已经成功地用这样的平移手势翻译了一个视图（在 IB 的帮助下）：

```
- (IBAction)handleGesture:(UIPanGestureRecognizer *)sender

{   
    CGPoint translation = [sender translationInView:self.view];

    sender.view.center = CGPointMake(sender.view.center.x + translation.x, sender.view.center.y + translation.y);

    [sender setTranslation:CGPointMake(0, 0) inView:self.view];
} 
```

但是，当我在此方法中添加以下行时，视图会停止翻译，但 UILabel 会随速度更新：

```
self.myLabel.text = [NSString stringWithFormat:@"%@", [NSNumber numberWithInt:[sender velocityInView:self.roundShape].y]]; 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T00:00:34.610

基本上，您从 Pan Gesture Recognizer 获得的翻译值是一个相对值。相对于手势开始识别触摸时的起点。因此，您要做的是保持手势开始的原始点并将平移应用到该点，而不是视图的当前位置。

```
- (void)gestureDidTranslate:(UIPanGestureRecognizer *)panGesture
{
    if([panGesture state] == UIGestureRecognizerStateBegan){
        self.originalPoint = self.movingView.center;
    }

    CGPoint translation = [panGesture translationInView:self.view];
    self.movingView.center = CGPointMake(self.originalPoint.x+translation.x, self.originalPoint.y+translation.y);
    self.label.text = NSStringFromCGPoint([panGesture velocityInView:self.view]);
} 
```

我想不出你*想要*在识别器识别时将翻译值归零的时候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:41:55.590

试试这个。标签更新正确。

```
@implementation APViewController

- (void)viewDidLoad
{
  [super viewDidLoad];

  UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(Pan:)];
  pan.minimumNumberOfTouches = 1;
  [_View addGestureRecognizer:pan];
}

- (void) Pan:(UIPanGestureRecognizer*)sender
{
  CGPoint translation = [sender translationInView:self.view];
  sender.view.center = CGPointMake(sender.view.center.x + translation.x, sender.view.center.y + translation.y);
  [sender setTranslation:CGPointMake(0, 0) inView:self.view];

  _Label.text = [NSString stringWithFormat:@"%f", [sender velocityInView:self.view].y];
}

@end 
```

如果您`AUTOLAYOUT`的 XIB 上有一个，请取消选择它，因为视图不会移动。为什么？我不知道。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-19T03:56:56.040

使用自动布局！

这一切都可以使用 Interface Builder。这是我用来执行此操作的代码：

```
@property (weak,nonatomic) IBOutlet NSLayoutConstraint *buttonXConstraint;
@property (weak,nonatomic) IBOutlet NSLayoutConstraint *buttonYConstraint; 
```

然后将这些 IBOutlets 连接到 Interface Builder 中的水平约束（X 位置）和垂直约束（Y 位置）。确保约束连接到基本视图，而不是最近的视图。

连接一个平移手势，然后使用以下代码拖动您的对象：

```
- (IBAction)panPlayButton:(UIPanGestureRecognizer *)sender
{
    if(sender.state == UIGestureRecognizerStateBegan){

    } else if(sender.state == UIGestureRecognizerStateChanged){
        CGPoint translation = [sender translationInView:self.view];

        //Update the constraint's constant
        self.buttonXConstraint.constant += translation.x;
        self.buttonYConstraint.constant += translation.y;

        // Assign the frame's position only for checking it's fully on the screen
        CGRect recognizerFrame = sender.view.frame;
        recognizerFrame.origin.x = self.buttonXConstraint.constant;
        recognizerFrame.origin.y = self.buttonYConstraint.constant;

        // Check if UIImageView is completely inside its superView
        if(!CGRectContainsRect(self.view.bounds, recognizerFrame)) {
            if (self.buttonYConstraint.constant < CGRectGetMinY(self.view.bounds)) {
                self.buttonYConstraint.constant = 0;
            } else if (self.buttonYConstraint.constant + CGRectGetHeight(recognizerFrame) > CGRectGetHeight(self.view.bounds)) {
                self.buttonYConstraint.constant = CGRectGetHeight(self.view.bounds) - CGRectGetHeight(recognizerFrame);
            }

            if (self.buttonXConstraint.constant < CGRectGetMinX(self.view.bounds)) {
                self.buttonXConstraint.constant = 0;
            } else if (self.buttonXConstraint.constant + CGRectGetWidth(recognizerFrame) > CGRectGetWidth(self.view.bounds)) {
                self.buttonXConstraint.constant = CGRectGetWidth(self.view.bounds) - CGRectGetWidth(recognizerFrame);
            }
        }

        //Layout the View
        [self.view layoutIfNeeded];
    } else if(sender.state == UIGestureRecognizerStateEnded){

    }

    [sender setTranslation:CGPointMake(0, 0) inView:self.view];
} 
```

我在那里添加了代码来检查框架并确保它不会超出视图。如果您想让对象部分离开屏幕，请随意将其取出。

我花了一点时间才意识到是使用 AutoLayout 来重置视图，但约束会在这里做你需要的！

# c# - 在两个 IEnumerable 之间搜索 - LINQ

> ID：13269183
> 
> 赞同：3
> 
> 时间：2012-11-07T11:50:54.153
> 
> 标签：c#, linq, ienumerable

嗨，你们能帮我解决这个问题吗，我已经尝试了几件事。我需要在两个 IEnumerables 之间进行搜索，这里是代码。

```
IEnumerable<Project> Projects = new[] { new Project {id = "1", lan = "test1"},  new Project {id = "2", lan = "test1"}}

IEnumerable<string> lan = new [] { "test1", "test2"};
IEnumerable<string> indexFiltered = ?; 
```

我需要做一个 linq 查询，返回 Project.id，即 LAN 中有任何 Project.lan。

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T11:55:43.833

我会使用 a`HashSet`而不是数组，因为它允许检查是否包含作为 O(1) 而不是 O(n) 操作：

```
HashSet<string> lan = new HashSet<string> { "test1", "test2" };
IEnumerable<string> indexFiltered = projects
    .Where(p => lan.Contains(p.lan))
    .Select(p => p.id); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T11:53:20.070

怎么样

```
indexFiltered = Projects.Where(p=>lan.Any(l=>l==p.lan)).Select(p=>p.Id); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T11:54:29.907

```
 var results = projects.Where(p => lan.Contains(p.lan)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T12:03:50.357

另一种有效的方法是使用[`Enumerable.Join`](http://msdn.microsoft.com/en-us/library/bb344797.aspx)，因为它是作为哈希表实现的：

```
IEnumerable<string> indexFiltered = from p in Projects
                                    join l in lan on p.lan equals l
                                    select p.id; 
```

[为什么 LINQ JOIN 比使用 WHERE 链接快得多？](https://stackoverflow.com/questions/5551264/why-is-linq-join-so-much-faster-than-linking-with-where)

Join 运算符从第一个表中获取行，然后仅从第二个表中获取具有匹配键的行，然后仅从第三个表中获取具有匹配键的行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T12:08:42.237

我会用`IEnumerable.Join()`. 在内部，它使用`HashSet`来区分：

```
var Projects = new[] { new {id = "1", lan = "test1"},  new {id = "2", lan = "test1"}};
var lan = new [] { "test1", "test2"};

var results = Projects.Join(lan,
                              project => project.lan,
                              lanName => lanName,
                              (project, lanName) => project.id);

foreach (var result in results)
{
    Console.WriteLine("ID found: ", result);
} 
```

# php - 使用 regex 或 str_replace 将给定文本中的相对链接替换为绝对链接

> ID：13269187
> 
> 赞同：1
> 
> 时间：2012-11-07T11:51:09.107
> 
> 标签：php, regex, preg-replace, preg-match

我有这样的文字：

```
61  me  xxxx.com
60  aici    xxx.com/ 
59  here    9gag.com 
```

有些链接前面有http://，有些没有。我想用

```
'http://'.$url 
```

所以这就是我所做的：

我的链接在以下数组中：

```
$links 
```

我这样做：

```
foreach($links as $link){
    if (!preg_match("~^(?:f|ht)tps?://~i", $link)) {
        $links2[] = "http://" . $link;
    }
} 
```

之后：

```
$str=str_replace($links, $links2, $str); 
```

我的文字现在显示：

```
61      me      http://http://http://http://http://http:// 
60      aici    http://http://http://http://http://
59      here    http://http://http://http://http:// 
```

对不起，文本的格式。

后期编辑：

换句话说，它没有正确替换链接，它只是多次输入“http://”。任何想法为什么会这样做？有什么更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:26:15.793

## 已编辑

* * *

我认为这[`str_replace()`](http://php.net/manual/en/function.str-replace.php)是导致它的功能，因为它实际上不尊重之前发生的事情（这正是`preg_*`功能的工作）。

我在这里建议一种完全不同的方法。很抱歉完全改变了我的答案。

```
$links = array(
    'xxxx.com',
    'xxx.com/',
    '9gag.com',
    'www.google.com'
);

foreach ($links as &$link) $link = preg_quote($link,'~');
// make each array item quoted/ready for use in a pattern
unset($link);
// delete reference

$rx = '~\b(?<!(?<=ftp|ftps|http|https)://)(' . implode('|',$links) . ')\b~i';
// first word boundary character eliminates links like "axxx.com"
// implode part makes it (xxxx\.com|xxx\.com|9gag\.com|www\.google\.com)
// and first parentesized part basically says
// "not preceded by ftp:// ftps:// http:// https://"
$str = "Here are some links: xxxx.com, axxx.com, http://www.google.com";
var_dump($str);

$str = preg_replace($rx,'http://$0',$str);
// replace all applicable links
var_dump($str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:25:37.827

您可以使用这样的基于负前瞻的正则表达式来放置`http://`任何需要的地方，如下所示：

```
// assuming your input file is input.txt
$lines = file("input.txt");
foreach($lines as $line) {
    $arr = explode(' ', $line);
    $arr[2] = preg_replace('#(?!^https?://)^(.+)$#i', 'http://$1', $arr[2]);
    $line = implode(' ', $arr);
    echo $line;
} 
```

# google-analytics - 将谷歌分析代码添加到所有页面

> ID：13269191
> 
> 赞同：3
> 
> 时间：2012-11-07T11:51:18.973
> 
> 标签：google-analytics, statistics

我想将谷歌分析代码添加到我网站的所有页面。我可以将谷歌分析代码放在 JS 文件中并在标题中提及 JS 文件吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T12:11:55.333

如果您的网站在 PHP 或 ASP.NET 中运行，那将是最简单的。如果它使用 PHP，请将您的 Google Analytics（分析）代码放在一个文件中，并按您喜欢的方式命名（例如，analytics.php 或 analytics.html）

然后，`</head>`在文档中的结束标记之前，放置以下代码：

```
<?php include 'analytics.php'; ?> 
```

否则，如果您通过 CMS（如 Wordpress）运行您的网站，请使用“All in one SEO pack”之类的插件，或者如果您想对其进行硬编码，请转到头文件（Wordpress 中的 header.php），然后只需将代码粘贴到 head 部分，或使用上面列出的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:18:19.877

在简单的 html 页面中，没有标准的方法可以在每个页面上呈现脚本，您可以将您的 GA 代码放入单独的 .js 文件中，然后将其包含在每个 Html 页面的标题中，例如

```
<head>
   <script src="#path-to-Code-with-GA" type="text/javascript" />
</head> 
```

这是我可以建议的唯一解决方案:-(

# silverlight - Silverlight TextBlock - 获取带有椭圆的文本

> ID：13269192
> 
> 赞同：1
> 
> 时间：2012-11-07T11:51:21.270
> 
> 标签：silverlight, textblock

在silverlight TextBlock 中，`TextTrimming="WordEllipsis"`用于在文本超出文本块宽度时显示省略号。

有没有办法用省略号获取显示文本（屏幕上显示的内容）？

我需要放置图像而不是省略号。

谢谢苏扬布

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-07T12:10:45.960

要将图像设置为椭圆的背景，我们可以将图像画笔设置为椭圆的填充。

```
<Ellipse.Fill >
    <ImageBrush ImageSource="dock.jpg" />
</Ellipse.Fill > 
```

试试看回复。。

# php - 文件未保存在数据库中

> ID：13269194
> 
> 赞同：0
> 
> 时间：2012-11-07T11:51:26.827
> 
> 标签：php

我正在做一个小项目，现在我面临保存问题。当我在文本编辑器上键入内容并单击保存按钮（用于保存在数据库中）时，它什么也不回复。

这是过程代码：

```
case "Publish":
    $fileName=$_FILES["image"]["name"];

        if($fileName)
        {
            $filePath="images/news_img/".$fileName;
            if(file_exists($filePath))
            {
                $a=gmdate("Yzhis");
                move_uploaded_file($_FILES["image"]["tmp_name"], "images/news_img/".$a.$_FILES["image"]["name"]);
                $fileName=$a.$_FILES["image"]["name"];

            }
            else
            {
                move_uploaded_file($_FILES["image"]["tmp_name"], "images/news_img/".$_FILES["image"]["name"]);

            }
        }
        if($arttitle=="" || $date=="" || $category=="" || $status=="" )
        {
            $_SESSION['error_msg']="You Must Fill All The Required fileds";
            $go="add_articles.php";
        }
        else
        {
        /*for username check*/
            $checksql=mysql_query("select * from articles where arttitle='$arttitle'");
            $checkdata=mysql_fetch_array($checksql);

            if($checkdata['arttitle']!=$arttitle)
            {
                $inssql=mysql_query("INSERT INTO articles VALUES(NULL,'$arttitle','$date','$category','$status','$fileName','$articale',0)");
            }
            else
            {
                $_SESSION['username_msg']="Articale Name Already Exists.";
            }
        }
        $go="add_articles.php";

    break;

    case"Edit":
    $updatesql=mysql_query("UPDATE articles SET 
arttitle='$arttitle',date='$date',category='$category',status='$status',articale='$articale' where aid = '$hiddenid'");
    $_SESSION['success_msg']="Update Successful!";
        $go="add_articles.php";
    break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:01:55.153

改变

```
$checkdata=mysql_fetch_array($checksql); 
```

至

```
$checkdata = mysql_fetch_array($checksql,MYSQL_BOTH); 
```

您正在使用字段名称进行比较，因此您必须更改 fetch 数组

```
$checksql=mysql_query("select * from articles where arttitle='".$arttitle."'"); 

$inssql=mysql_query("INSERT INTO articles VALUES(NULL,'".$arttitle."','".$date."','".$category."','".$status."','".$fileName."','".$articale."',0)"); 
```

# php - preg_replace 没有按预期工作

> ID：13269198
> 
> 赞同：0
> 
> 时间：2012-11-07T11:51:43.543
> 
> 标签：php, regex, preg-replace

我想删除 HTML 标签，还有样式和脚本标签的内容，但我的代码没有删除样式标签内容，不知道为什么。有什么想法吗？

```
$search = array('@<script[^>]*?>.*?</script>@si',  // Strip out javascript 
               '@<[\/\!]*?[^<>]*?>@si',            // Strip out HTML tags 
               '@<style[^>]*?>.*?</style>@si',    // Strip style tags properly 
               '@<![\s\S]*?--[ \t\n\r]*>@'         // Strip multi-line comments including CDATA 
               ); 

$htmlstring = 'Which brand(s) of single serve coffee brewer do you own? <style type="text/css"> #answer67627X49X1159other {display:none;}</style>';
$htmlstring .= '<style> #answer67627X49X1159999 {display:none;}</style><script>alert(123);</script>';

$htmlstring = preg_replace($search,'',$htmlstring);

echo '<input style="width:90%" type="text" value="'.$htmlstring.'" />'; 
```

以下是输入标签中的输出。

**您拥有哪些品牌的单杯咖啡机？#answer67627X49X1159other {display:none;} #answer67627X49X1159999 {display:none;}**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:03:30.650

图案顺序不好

```
<?php
$search = array('@<script[^>]*?>.*?</script>@si',  // Strip out javascript 
               '@<style[^>]*?>.*?</style>@si',
               '@<[\/\!]*?[^<>]*?>@si',            // Strip out HTML tags 
               '@<![\s\S]*?--[ \t\n\r]*>@'         // Strip multi-line comments including CDATA 
               ); 

$htmlstring = 'Which brand(s) of single serve coffee brewer do you own? <style type="text/css"> #answer67627X49X1159other {display:none;}</style>';
$htmlstring .= '<style> #answer67627X49X1159999 {display:none;}</style><script>alert(123);</script>';

$htmlstring = preg_replace($search, '' ,$htmlstring);
var_dump($htmlstring);

// string(57) "Which brand(s) of single serve coffee brewer do you own? " 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:03:40.297

在进入样式标签之前，您已经剥离了 html 标签。更改替换的顺序，以便在其余部分之前处理脚本和样式

```
$search = array('@<script[^>]*?>.*?</script>@si',  // Strip out javascript                
                '@<style[^>]*?>.*?</style>@si',    // Strip style tags properly 
                '@<[\/\!]*?[^<>]*?>@si',            // Strip out HTML tags 
                '@<![\s\S]*?--[ \t\n\r]*>@'         // Strip multi-line comments including CDATA 
           ); 
```

# google-drive-api - 让匿名用户使用 Google Drive SDK 将文件上传到我的 Google Drive

> ID：13269201
> 
> 赞同：10
> 
> 时间：2012-11-07T11:51:57.030
> 
> 标签：google-drive-api

我正在构建一个网络应用程序，我需要让用户上传文件。我想将所有用户上传的文件存储在“我的”中央 Google 云端硬盘中。用户不必登录他们的 Google 帐户或授权应用程序，因为他们将上传到我的 Google Drive。这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T18:53:13.337

您应该使用服务帐户代表您的应用程序存储文件：

[https://developers.google.com/drive/service-accounts](https://developers.google.com/drive/service-accounts)

# google-cloud-messaging - 一台设备到另一台设备的 Android GCM 消息

> ID：13269207
> 
> 赞同：6
> 
> 时间：2012-11-07T11:52:21.903
> 
> 标签：google-cloud-messaging

我想使用 google GCM 将消息从设备 A 发送到设备 B。我的应用程序不使用任何其他服务器。GCM 将为设备生成注册 ID。如何将消息发送到多个设备中的特定设备（从 A 到 B）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T08:20:11.663

要发送推送通知，您需要在 google 注册的 senderid 和服务器密钥。

您可以从设备本身向 GCM 发送推送通知，但必须将服务器密钥保留在应用程序的源代码中。根据您的代码混淆级别，任何人最终都可以获得服务器密钥，并假装他们是您的应用程序接管推送通知。祝你好运。

回复 AKS ......我们在这里看到的是一个去中心化或点对点系统.. 有与每个设备相关联的注册 ID（根据 GCM） ...一种方法是使用 p2p 算法，所有设备都维护所有注册 id 的“分类帐”，并指定将特定消息发送到哪些设备。当然，根据应用逻辑和可行性，也存在其他可能性。

# url - MyBB URL 重写不起作用

> ID：13269208
> 
> 赞同：0
> 
> 时间：2012-11-07T11:52:25.937
> 
> 标签：url, http-status-code-404, friendly-url, mybb

我正在尝试在我的 MyBB 板上启用 URL 重写，我在 Admin CP 中启用了它，并将板附带的默认 .htaccess 文件放入我的论坛根目录，但是当我尝试访问线程时，它返回：请求的 URL /线程-86-lastpost.html 在此服务器上未找到。404 未找到

我应该怎么做才能修复它？我认为问题出在我的 apache2.conf 文件中，但我不知道如何解决。

论坛托管在我的 Debian VPS 上，我在其中安装了 Apache2 和 PHP 和所有其他东西。灯

我的 .htaccess 文件：

```
Options -MultiViews +FollowSymlinks -Indexes

#
# If mod_security is enabled, attempt to disable it.
# - Note, this will work on the majority of hosts but on
#   MediaTemple, it is known to cause random Internal Server
#   errors. For MediaTemple, please remove the block below
#
<IfModule mod_security.c>
    # Turn off mod_security filtering.
    SecFilterEngine Off

    # The below probably isn't needed, but better safe than sorry.
    SecFilterScanPOST Off
</IfModule>

#
# MyBB "search engine friendly" URL rewrites
# - Note, for these to work with MyBB please make sure you have
#   the setting enabled in the Admin CP and you have this file
#   named .htaccess
#
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule ^forum-([0-9]+)\.html$ forumdisplay.php?fid=$1 [L,QSA]
    RewriteRule ^forum-([0-9]+)-page-([0-9]+)\.html$ forumdisplay.php?fid=$1&page=$2 [L,QSA]

    RewriteRule ^thread-([0-9]+)\.html$ showthread.php?tid=$1 [L,QSA]
    RewriteRule ^thread-([0-9]+)-page-([0-9]+)\.html$ showthread.php?tid=$1&page=$2 [L,QSA]
    RewriteRule ^thread-([0-9]+)-lastpost\.html$ showthread.php?tid=$1&action=lastpost [L,QSA]
    RewriteRule ^thread-([0-9]+)-nextnewest\.html$ showthread.php?tid=$1&action=nextnewest [L,QSA]
    RewriteRule ^thread-([0-9]+)-nextoldest\.html$ showthread.php?tid=$1&action=nextoldest [L,QSA]
    RewriteRule ^thread-([0-9]+)-newpost\.html$ showthread.php?tid=$1&action=newpost [L,QSA]
    RewriteRule ^thread-([0-9]+)-post-([0-9]+)\.html$ showthread.php?tid=$1&pid=$2 [L,QSA]

    RewriteRule ^post-([0-9]+)\.html$ showthread.php?pid=$1 [L,QSA]

    RewriteRule ^announcement-([0-9]+)\.html$ announcements.php?aid=$1 [L,QSA]

    RewriteRule ^user-([0-9]+)\.html$ member.php?action=profile&uid=$1 [L,QSA]

    RewriteRule ^calendar-([0-9]+)\.html$ calendar.php?calendar=$1 [L,QSA]
    RewriteRule ^calendar-([0-9]+)-year-([0-9]+)\.html$ calendar.php?action=yearview&calendar=$1&year=$2 [L,QSA]
    RewriteRule ^calendar-([0-9]+)-year-([0-9]+)-month-([0-9]+)\.html$ calendar.php?calendar=$1&year=$2&month=$3 [L,QSA]
    RewriteRule ^calendar-([0-9]+)-year-([0-9]+)-month-([0-9]+)-day-([0-9]+)\.html$ calendar.php?action=dayview&calendar=$1&year=$2&month=$3&day=$4 [L,QSA]
    RewriteRule ^calendar-([0-9]+)-week-(n?[0-9]+)\.html$ calendar.php?action=weekview&calendar=$1&week=$2 [L,QSA]

    RewriteRule ^event-([0-9]+)\.html$ calendar.php?action=event&eid=$1 [L,QSA]

    <IfModule mod_env.c>
        SetEnv SEO_SUPPORT 1
    </IfModule>
</IfModule>

#
# If Apache is compiled with built in mod_deflade/GZIP support
# then GZIP Javascript, CSS, HTML and XML so they're sent to
# the client faster.
#
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE application/javascript text/css text/html text/xml
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:00:12.523

我建议你试试谷歌 SEO 插件： http: [//mods.mybb.com/view/google-seo](http://mods.mybb.com/view/google-seo)

它更易于使用，并为您的董事会创造了出色的 SEO。

# xslt - Excel 读取电子表格 ML 中的换行符

> ID：13269210
> 
> 赞同：1
> 
> 时间：2012-11-07T11:52:31.873
> 
> 标签：xslt, spreadsheetml

我正在尝试编写一个 XSLT 来生成一个电子表格 ML，以便 Excel 进一步读取并遇到换行问题。我需要在单元格数据中添加换行符。我在 Excel 中制作了一个示例来检查换行符的 Excel 想法，并得到以下信息：

```
<Data>abc&#10;def</Data> 
```

这里的`&#10;`引用是一个换行符，Excel 在读回文件时可以很好地理解它。我尝试使用 XSLT 生成相同的内容，但是自然而然地，我得到了一个真正的 0x0A (LF) 字符，所以我的 XML 看起来是这样的：

```
<Data>abc
def</Data 
```

这似乎与 Excel 表示换行符的方式不一致，当我在 Excel 中打开文件时，我没有得到换行符。

我试图研究这个问题，但除了[以下简短的讨论](http://social.msdn.microsoft.com/forums/en-US/xmlandnetfx/thread/0b16067a-8754-4162-a6c1-5ef73c3e8e4c)之外什么也没得到，它并没有真正给出解决方案，并表明它可能是 Excel 中的一个错误。（**更新：**据我了解，这就是规范所说的“编码事故”，XML 解析器不能依赖它们，而 Excel 则需要。）

有没有办法以某种方式解决这个问题并`&#10;`在输出中获得文字而不是 LF 字符？或者也许以另一种方式解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T12:08:29.280

是的，Excel 有自己的方式来区分字符和对该字符`LF`的字符引用。`&#10;`

我认为使用 XSLT 1.0 如果你想强制一个字符引用，那么这样做`<xsl:text disable-output-escaping="yes"><![CDATA[&#10;]]></xsl:text>`是蛮力的方式。

# php - 使用来自 RGB 值的一系列颜色

> ID：13269211
> 
> 赞同：0
> 
> 时间：2012-11-07T11:52:39.957
> 
> 标签：php, colors, range

我想使用 RGB 值的值来使用一系列颜色

假设理想条件下黑色的 rbg 是 rgb(0,0,0) 但是当我扫描任何图像时。它的颜色范围从 0 到 51 不等，如 rgb(31,31,31),rgb(49,49,49) ETC

我需要使用颜色范围来满足条件

if(r=0 to 51 && g=0 to 51 && b=0 to 51) 条件执行

另一件事，所有三个值，即 rgb 应该具有相似的值，例如：-rgb(0,0,0) rgb(31,31,31)etc 以便组合颜色类似于黑色

有道理？

我使用 PHP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:37:13.187

你不能只是对这些值进行一些比较以确定它们是否属于 RGB 的黑色光谱吗？如：

```
$rgb = array("R" => 0, "G" => 0, "B" => 0);
if($rgb->R >= 0 && $rgb->R <= 51 && $rgb->G >= 0 && $rgb->G <= 51 && $rgb->B >= 0 && $rgb->B <= 51) {
    // RGB value is in black spectrum
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:59:26.250

您可以先将 RGB 颜色转换为 HSL，使用 HSL 您可以比较颜色的色相、饱和度和亮度。

比较两种颜色的色调，得到所有颜色，例如蓝色（ish）。在这种情况下，黑色和白色有点特殊，您可以测试黑色/白色的极端亮度（接近 0% 或接近 100%），或灰色的低饱和度（接近 0%）。

# javascript - 通过扩展检测 Javascript URL

> ID：13269212
> 
> 赞同：0
> 
> 时间：2012-11-07T11:52:42.737
> 
> 标签：javascript, url, dom-events

我正在构建一个 Firefox 扩展来记录大学研究的用户数据，但仅限于两个网站（维基百科和 Youtube）。

[Stack Overflow 上的另一个问题](https://stackoverflow.com/questions/2596749/url-detection-with-javascript)已经触及这个主题，其中使用以下代码检查 URL 中的正则表达式：

```
if(/^http:\/\/cgi.site.com\/hp\//.test(window.location)) {} 
```

那么在执行类似于上述代码的扩展中添加一个事件就足够了，还是我在这里遗漏了什么`eventlistener`？`onload`

# c# - 有没有办法可以使用 VS2012 在 C# 中向控制台发送堆栈跟踪

> ID：13269215
> 
> 赞同：2
> 
> 时间：2012-11-07T11:52:53.340
> 
> 标签：c#, exception, visual-studio-2012

我有给出异常的 C# 代码。我在 try-catch 中有代码，我可以看到异常，但是在 VS2012 中查看它时遇到问题。有没有办法可以将堆栈跟踪发送到控制台，这样我就可以查看而无需右键单击异常的属性？

更好的是，是否有人使用任何代码将更详细的信息注销到控制台？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T11:55:13.760

[`ToString`](http://msdn.microsoft.com/en-us/library/system.exception.tostring.aspx)在`Exception`类中被覆盖并将返回堆栈跟踪。

```
catch(Exception ex)
{
  Console.WriteLine(ex.ToString());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T12:14:53.923

从任何一段代码中，您都可以通过创建 stackframe 对象来访问堆栈。那里有很多信息，您不需要例外即可访问它。

例如。

```
var callingMethod = new StackFrame(1).GetMethod().Name; 
```

返回调用方法名。

如果您有 Joe Daley 建议的例外情况，请使用

`Console.WriteLine(ex);`打印出来。

# java - 使用 split 方法拆分字符串

> ID：13269219
> 
> 赞同：4
> 
> 时间：2012-11-07T11:52:58.197
> 
> 标签：java, android, string, parsing, split

我想拆分这样的字符串：

```
 C:\Program\files\images\flower.jpg 
```

但是，使用以下代码：

```
 String[] tokens = s.split("\\");
  String image= tokens[4]; 
```

我收到此错误：

```
 11-07 12:47:35.960: E/AndroidRuntime(6921): java.util.regex.PatternSyntaxException: Syntax error U_REGEX_BAD_ESCAPE_SEQUENCE near index 1: 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T11:55:56.923

尝试

```
String s="C:\\Program\\files\\images\\flower.jpg"

String[] tokens = s.split("\\\\"); 
```

在 java(regex world)`\`中是一个元字符。如果要将元字符视为普通字符，则应附加一个额外的 \ 或用 \Q\E 将其括起来。

下面是一些元字符

```
<([{\^-=$!|]})?*+.> 
```

要将上面列出的任何字符视为普通字符，您必须使用 '\' 对其进行转义或将它们括在 \Q\E 周围

喜欢：

```
 \\\\ or \\Q\\\\E 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T11:57:10.627

你需要用 拆分`\\\\`，因为原始字符串应该有`\\`. 使用以下测试用例自己尝试：

```
 @Test
public void split(){
      String s = "C:\\Program\\files\\images\\flower.jpg";     

        String[] tokens = s.split("\\\\");
        String image= tokens[4];
        assertEquals("flower.jpg",image);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T11:57:39.900

There is 2 levels of interpreting the string, first the language parser makes it `"\"`, and that's what the regex engine sees and it's invalid because it's an escape sequence without the character to escape.

So you need to use `s.split("\\\\")`, so that the regex engine sees `\\`, which in turn means a literal `\`.

If you are defining that string in a string literal, you must escape the backslashes there as well:

```
String s = "C:\\Program\\files\\images\\flower.jpg"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T12:01:33.290

字符串[] 标记=s.split("\\\\");

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-07T12:03:29.617

尝试这个：

```
String s = "C:/Program/files/images/flower.jpg";
String[] tokens = s.split("/");
enter code hereString image= tokens[4]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-07T11:55:49.600

您的原始输入文本应该是

```
 C:\\Program\\files\\images\\flower.jpg 
```

代替

```
 C:\Program\files\images\flower.jpg 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-07T12:03:38.647

这行得通，

```
 public static void main(String[] args) {
        String str = "C:\\Program\\files\\images\\flower.jpg";
        str = str.replace("\\".toCharArray()[0], "/".toCharArray()[0]);
        System.out.println(str);
        String[] tokens  = str.split("/");
        System.out.println(tokens[4]);      
    } 
```

# c# - 通过 XML 节点读取 XML 文件

> ID：13269221
> 
> 赞同：0
> 
> 时间：2012-11-07T11:53:09.103
> 
> 标签：c#, sql, xml, nodelist, xmlnodelist

我有这个 XML 文档，我正在尝试读取并插入到数据库中。只有一个 GamePlay 节点，但 GamePlayStep 可能会重复，所以我为此创建了一个节点列表。由于某种原因 GamePlayStep 没有接收数据。这是 XML 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<GameData>
  <GamePlay>
    <type>add</type>
    <GamePlayID>1</GamePlayID>
    <ParticipantID>1</ParticipantID>
    <GameID>1</GameID>
    <GameDifficultyID>1</GameDifficultyID>
    <Start>2012-08-06T12:19:33.154Z</Start>
    <End>2012-08-06T12:30:33.154Z</End>
    <Success>False</Success>
  </GamePlay>
  <GamePlayStep>
    <GamePlayStepID>1</GamePlayStepID>
    <Start>2012-08-06T12:19:33.154Z</Start>
    <End>2012-08-06T12:30:33.154Z</End>
    <SortOrder>1</SortOrder>
    <Score>1</Score>
    <hintUsed>True</hintUsed>
    <GamePause>
      <GamePauseID>1</GamePauseID>
      <Start>2012-08-06T12:19:33.154Z</Start>
      <End>2012-08-06T12:30:33.154Z</End>
      <Order>1</Order>
      <Duration>05:01</Duration>
    </GamePause>
  </GamePlayStep>
</GameData> 
```

这是我的代码：

```
public static void start()
        {
            string[] filePaths = Directory.GetFiles(System.Configuration.ConfigurationManager.ConnectionStrings["filePath"].ConnectionString);
            List<GamePlay> gameObj = new List<GamePlay>();
            List<GamePlayStep> gameStepObj = new List<GamePlayStep>();
            foreach (string value in filePaths)
            {
                XmlDocument xd = new XmlDocument();
                XmlNodeList GameSteps;
                xd.Load(value);
                XmlNode documentNode = xd.SelectSingleNode("/GameData/GamePlay");
                GameSteps = xd.SelectNodes("/GameData/GamePlay/GamePlayStep");

                GamePlay newGamePlay = new GamePlay();
                newGamePlay.setType(Convert.ToString(documentNode.SelectSingleNode("type").InnerText));
                newGamePlay.setGamePlayID(Convert.ToInt32(documentNode.SelectSingleNode("GamePlayID").InnerText));
                newGamePlay.setParticipantID(Convert.ToInt32(documentNode.SelectSingleNode("ParticipantID").InnerText));
                newGamePlay.setGameDifficultyID(Convert.ToInt32(documentNode.SelectSingleNode("GameDifficultyID").InnerText));
                newGamePlay.setGameID(Convert.ToInt32(documentNode.SelectSingleNode("GameID").InnerText));
                newGamePlay.setStartDateTime(Convert.ToDateTime(documentNode.SelectSingleNode("Start").InnerText));
                newGamePlay.setEndDateTime(Convert.ToDateTime(documentNode.SelectSingleNode("End").InnerText));
                newGamePlay.setSuccess(Convert.ToBoolean(documentNode.SelectSingleNode("Success").InnerText));
                newGamePlay.setFile(value);
                newGamePlay.addNewGamePlay();

                foreach (XmlNode documentNode2 in GameSteps)
                {

                    GamePlayStep newGamePlayStep = new GamePlayStep();
                    newGamePlayStep.setGamePlayStepID(Convert.ToInt32(documentNode2.SelectSingleNode("GamePlayStepID").InnerText));
                    newGamePlayStep.setGamePlayID(newGamePlay.getGamePlayID());
                    newGamePlayStep.setStartDateTime(Convert.ToDateTime(documentNode2.SelectSingleNode("Start").InnerText));
                    newGamePlayStep.setEndDateTime(Convert.ToDateTime(documentNode2.SelectSingleNode("End").InnerText));
                    newGamePlayStep.setOrderPlayed(Convert.ToInt32(documentNode2.SelectSingleNode("SortOrder").InnerText));
                    newGamePlayStep.setScore(Convert.ToInt32(documentNode2.SelectSingleNode("Score").InnerText));
                    newGamePlayStep.setHintUsed(Convert.ToBoolean(documentNode2.SelectSingleNode("hintUsed").InnerText));
                    newGamePlayStep.addNewGamePlayStep();

                }

            }
        } 
```

GamePlay 正确填充变量并插入数据库，但 NodeList 中的 GamePlaySteps 不是。有没有人看到问题或我该如何改进？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:01:23.140

您访问 GamePlayStep 的 XPath 不正确；

它应该是：

```
GameSteps = xd.SelectNodes("/GameData/GamePlayStep"); 
```

因为 GamePlayStep 在您的文档中是 GameData 的子级，而不是 GamePlay。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:19:47.123

使用`LINQ2XML`....它的简单和`cool`

```
XElement doc=XElement.Load("yourXml");
newGamePlay.setType(doc.Descendants("GameData").Element("GamePlay").Element("type").Value);
....
foreach (Element eml in doc.Descendants("GameData").Elements("GamePlayStep"))
{
GamePlayStep newGamePlayStep = new GamePlayStep();
newGamePlayStep.setGamePlayStepID(Convert.ToInt32(elm.Element("GamePlayStepID").Value));
newGamePlayStep.setStartDateTime(Convert.ToDateTime(elm.Element("Start").Value));
.....
} 
```

# c# - C#接口太死板

> ID：13269222
> 
> 赞同：3
> 
> 时间：2012-11-07T11:53:11.470
> 
> 标签：c#, interface, design-patterns, oop

我正在使用一些遗留代码并拥有这个现有的界面：

```
public interface IProcess
{
    IDTO Process(IDTO request);
} 
```

然后有一个工厂，它有一个巨大的 switch 语句返回实现接口的对象（其中 17 个）。然后创建的对象调用过程，如：

```
return xProcess.Process(requestDTO); 
```

我的问题是我现在需要更改其中的一些以传入第二个参数，例如：

```
xProcess.Process(requestDTO, Id); 
```

我正在寻找一种优雅的方式来实现这一目标。

我尝试使接口成为抽象类，例如：

```
public abstract class IProcess
{

    public virtual IDTO Process(IDTO request)
    {
       return null;
    }

    public virtual IDTO Process(IDTO request, int Id)
    {
        return null;
    }
} 
```

这允许我在创建的类中覆盖 Process 方法，但我有一个问题，即 IProcess 被另一个接口继承，现在显然已被破坏。

遗留平台很大，测试覆盖率不是很好，所以我正在寻找一个对代码库的其余部分影响最小的优雅的解决方案。也许，我忽略了一种模式？

有人可以帮忙吗？（例子会很棒）

谢谢

大卫

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T11:58:27.210

你能不能创建一个继承现有接口的新接口，比如

```
public interface IProcess2 : IProcess
{
    IDTO Process(IDTO request, int Id);
} 
```

然后更改您的类以从新的类继承。

这应该可以阻止现有 IProcess 的任何用户中断。

# servicestack - 如何使用自托管 ServiceStack 忽略路由

> ID：13269227
> 
> 赞同：7
> 
> 时间：2012-11-07T11:53:24.593
> 
> 标签：servicestack

我目前正在研究一个解决方案，我们正在运行一个自托管的 ServiceStack 层，但问题是当我从浏览器访问它并且浏览器尝试获取 favicon 时，我不断收到错误消息。据我所见，在运行自托管时没有忽略特定路由的选项吗？

我会想象像

```
Routes.Ignore("favicon*") 
```

有点像

```
Routes.Add<Foo>("/foo") 
```

在我的 AppHost 配置方法中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-24T11:11:55.763

在我的 web.config 我喜欢有这样的东西

```
<handlers>
    <add verb="*" path="*.*" type="System.Web.StaticFileHandler" name="files" />
    <add path="*" name="ServiceStack.Factory" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" preCondition="integratedMode" resourceType="Unspecified" allowPathInfo="true"/>
</handlers> 
```

这样，所有带有扩展名的文件都由 IIS 处理，这意味着您不必一直通过 aspnet 管道来服务器上 404。这也意味着您不会在 servicestack 应用程序中记录 404 的负载。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T18:01:24.357

与使用**Http 模块**来处理和劫持所有请求的 MVC 不同，ServiceStack 构建在 ASP.NET 的原始`IHttpHandler`接口之上。这意味着 ServiceStack 必须通过返回 IHttpHandler 来处理与 ServiceStack 处理程序路径（例如`/`或`/api`）匹配的任何请求，并且不能像在 MVC 中那样**忽略**它们。

但是，您可以通过在 中注册处理程序来**捕获**和处理所有未处理的请求`IAppHost.CatchAllHandlers`，例如：

```
appHost.CatchAllHandlers.Add((httpMethod, pathInfo, filePath) => {
   if (pathInfo.StartsWith("favicon"))
      return new NotFoundHttpHandler();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-31T19:19:41.030

Just to append to @antonydenyer's answer. His solution seems to work also when combining owin with servicestack3\.

`<handlers> <add path="auth/*" name="Microsoft.Owin.Host.SystemWeb" type="Microsoft.Owin.Host.SystemWeb.OwinHttpHandler, Microsoft.Owin.Host.SystemWeb" verb="*" preCondition="integratedMode" resourceType="Unspecified" allowPathInfo="true" /> <add path="*" name="ServiceStack.Factory" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" preCondition="integratedMode" resourceType="Unspecified" allowPathInfo="true" /> </handlers>`

Here SS is handling every request except /auth. Auth is mapped to Identityserver3 using owin.

# c++ - 工作站锁定通知

> ID：13269238
> 
> 赞同：1
> 
> 时间：2012-11-07T11:54:00.490
> 
> 标签：c++, winapi, dll

我正在尝试编写一个 dll，它具有计算工作站锁定时间的功能（工作站锁定，如按 windows 键 + L）。现在，我尝试搜索一种实现方式，得到的答案是监听来自 WTSRegisterSessionNotification 的通知。[http://msdn.microsoft.com/en-us/library/windows/desktop/aa383841%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383841%28v=vs.85%29.aspx)

如何从 DLL 中获取这些通知？

我读到的例子是：http: [//msdn.microsoft.com/en-us/library/ms775296%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms775296%28v=vs.85%29.aspx)

但无法理解如何从 wo=i 在 DLL 中使用。

# php - 将 iframe 文本更改为其他语言

> ID：13269243
> 
> 赞同：0
> 
> 时间：2012-11-07T11:54:08.443
> 
> 标签：php, javascript

我有一个 iframe： [http ://www.vantagewire.com/quotes_clients.php?ticker=THG:CA&chscale=1m&stylesheet=http://www.vantagewire.com/_resources/app/general/quotetab_chart_small_hosted.css](http://www.vantagewire.com/quotes_clients.php?ticker=THG:CA&chscale=1m&stylesheet=http://www.vantagewire.com/_resources/app/general/quotetab_chart_small_hosted.css)

我想把它嵌入到一个网站，但我遇到的是一些用户用法语看到它，而用英语看到它。

我想用这样的代码控制 iframe 输出：

```
 if(language==en){
   iframe here which is english form
 }
 if(language==fr){
   iframe here which is french form
 } 
```

或者任何想法如何使上面的链接变成我可以控制的法语和en？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:24:03.653

嗯，这有点棘手，因为语言是由浏览器标头发送的，浏览器首先会获得一个片段，其中包含对服务器的另一个请求。我们必须操纵这个“内部”请求的标头。

为此，您需要 PHP 的 curl 扩展，否则会更加困难。

```
<?php
function curlLang($url, $lang = 'en') {
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Accept-Language:' . $lang . ';q=0.5'));
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $res = curl_exec($ch);
    curl_close($ch);
    return $res;
}
$r = (string) $_GET['r'];
if ($r == '') {
    $iframe = curlLang('http://www.vantagewire.com/quotes_clients.php?ticker=THG:CA&chscale=1m&stylesheet=http://www.vantagewire.com/_resources/app/general/quotetab_chart_small_hosted.css');
    $self = $_SERVER['PHP_SELF'] . '?r=';
    $newIframe = preg_replace('~<script.*src="(.*)".*</script>~', '<script type="text/javascript" src="' . $self . '$1"></script>', $iframe);
    echo $newIframe;
} else {
    echo curlLang($r);
} 
```

# android - 旋转和多窗格时Android操作栏刷新

> ID：13269245
> 
> 赞同：0
> 
> 时间：2012-11-07T11:54:22.207
> 
> 标签：android, android-fragments, android-actionbar, actionbarsherlock

我有一个与下图相同的活动：

![手机与平板电脑](../Images/c50c728d49119063e46c5258b67548b6.png)

FragmentA 是一个列表视图，并有一个 SearchWidget 作为菜单项（旧设备上不显示，仅 API11 及更高版本）。FragmentB 是一个详细视图，有几个菜单项。

当 ActivityA 在平板电脑上运行时，FragmentA + FragmentB 的菜单项在操作栏中可见。这是正确的并且工作完美。

现在在 Nexus 7 上，我想要混合这些：

*   纵向仅使用听筒布局
*   当我旋转设备时，会加载平板电脑布局

我似乎无法工作的唯一事情是操作栏。当我将设备从横向模式（平板电脑视图）旋转回纵向（手机视图）时，操作栏仍然显示 FragmentA + FragmentB 的菜单项。

我尝试将 ActivityA 中的`invalidateOptionsMenu()`from`onResume()`称为 FragmentA，但没有运气。

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:23:26.433

我认为这是应有的活动再创造过程。

当屏幕旋转时，您的活动被破坏（默认情况下）。但在它被销毁之前，它会保存状态，包括所有当前活动片段的状态。稍后，当活动在方向更改后创建时，它会恢复保存的状态（两个片段）。随着详细信息片段的恢复，它会附加菜单项。

您可以通过添加日志语句或使用调试器来检查这`onCreateView`一点`DetailsFragment`。

如果是您的情况，那么您有下一个解决方案：

1.  通过在活动保存其状态之前删除此片段来抑制保存状态（如果 DetailsFragment 应该跟踪最后显示的项目或类似的东西，则必须避免）。
2.  如果 DetailsFragment 不会显示，则禁止对其进行任何初始化。活动应该给出关于可见性的答案。
3.  你的变种？我认为上述两种方法还不够好......

对不起，如果我的回答对你没有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-11T09:36:44.990

这对我有用。在 Activity A 中尝试找到 Fragment B 并设置 setHasOptionsMenu(mTwoPane)

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_document_list);

    Fragment fragment = getFragmentManager().findFragmentByTag(TAG_FRAGMENT_DETAIL);

    if (getResources().getBoolean(R.bool.has_detail)){
        mTwoPane = true;

        ....

    }

    if (fragment != null) {
        fragment.setHasOptionsMenu(mTwoPane);
        invalidateOptionsMenu();
    }
} 
```

# c# - 是否有类似 c# 的 python 装饰器之类的东西？

> ID：13269246
> 
> 赞同：15
> 
> 时间：2012-11-07T11:54:24.647
> 
> 标签：c#, unity3d, gree

我正在包装对 API 的调用，我的大多数方法都在第一行：

```
if ( !Gree.Authorizer.IsAuthorized() )
{
    return;
} 
```

在 python 中，我会用类似`@login_required`.

你会用什么来重构这种类型的逻辑`c#`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T12:08:04.093

您正在寻找一种称为面向方面编程的更通用编程方法的子集。

C# 似乎通过几个库来支持它，而且由于一些 CLR 特性，也可以推出自己的库。请参阅[Aspect Oriented Programming using .NET](http://www.developerfusion.com/article/5307/aspect-oriented-programming-using-net/3/)，它涵盖了它的基本原理（我正在链接文章中讨论 C# 细节的部分，但如果您正在寻找像 PostSharp 这样的现成解决方案，其余部分同样有趣，正如另一个回答）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T11:59:45.053

您可以使用任何用于 C# 的 AOP 工具，例如[这个](http://www.sharpcrafters.com/postsharp/features)。

> 使用 PostSharp，软件开发人员可以将实现模式封装到称为方面的类中，并使用自定义属性将这些方面应用到他们的代码中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T12:17:11.033

我不熟悉 python，但您似乎正在寻找“属性”（[MSDN](http://msdn.microsoft.com/en-us/library/sw480ze8%28v=vs.110%29.aspx)），（与 Java 注释非常相似）。

特别是，.NET 提供了“ [AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx) ”，它完全可以满足您的需求（也许还有更多）。虽然您不在 .NET 下，但这可能仍会为您尝试实现的实现提供一些启示。

# android - 在 Android 中隐藏/显示 ViewPager

> ID：13269252
> 
> 赞同：1
> 
> 时间：2012-11-07T11:54:49.673
> 
> 标签：android, android-fragments, android-viewpager, android-view

我有这个应用程序结构：

1.  带有全局菜单和`Fragment`容器的 MainActivity。
2.  第一`Fragment`：一个`ViewPager`三页。
3.  二`Fragment`：清单

我在 MainActivity 中插入`Fragment`s`OnCreate()`并使用 show 和 hide 更改它们的可见性（使用`FragmentTransaction`）。

当我启动应用程序时，第一个`Fragment`出现在屏幕上没有问题，当更改为第二个时`Fragment`也可以像魅力一样工作，但是当我回到第一个时`Fragment`，应用程序在`ViewPager`.

有没有我必须更改的特定选项`ViewPager`来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:56:49.730

问题似乎是由于android不允许嵌套片段。在我的情况下，我可以使用简单的视图而不是 ViewPager 中的片段来管理这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-08T06:02:51.777

我使用[ViewStub](http://android-developers.blogspot.kr/2009/03/android-layout-tricks-3-optimize-with.html)来显示/隐藏 ViewPager。

基本思想是您在布局文件中创建 ViewStub，并在必要时膨胀/setVisible。

唯一的窍门是，我必须将Adatper 设置为null，否则它会在关闭和打开屏幕时重新创建视图时崩溃。

```
@Override
public void onDestroyView() {
    super.onDestroyView();

    viewPager.setAdatper(null);
} 
```

# android - 避免Android服务被杀死？

> ID：13269262
> 
> 赞同：2
> 
> 时间：2012-11-07T11:55:12.307
> 
> 标签：android, android-service

我有一个实现远程后台服务的应用程序。实现此服务以在线程中下载文件（我会说此服务用作下载管理器）。

当我想下载文件时，我将 url 发送到服务，服务启动一个线程（我使用的是 AsyncTask，但它只在 Android 4.1 中工作），它实际下载文件。但迟早下载会停止，我能够知道这一点，因为我显示的通知不再更新。当我单击通知取消下载时，会向服务发送一个挂起的意图，告诉它取消下载，但在重新创建服务时不会取消下载（调用 onCreate）。

*编辑：*忘了说我在 onStartCommand() 中返回 START_STICKY

我有什么解决方案？有什么办法可以避免服务被杀死？

我也在研究 startForeground()，如果服务目标是只下载一个文件但我希望支持同时下载多个文件，那就没问题了。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:58:16.793

防止您的服务被杀死的唯一方法是使用`startForeground()`. 即使这样也不能保证 Android 不会杀死你的服务，但没有比这更好的了。我们在使用前台服务方面取得了很好的成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-27T14:53:03.920

在我见过的系统中避免这种情况的唯一方法是将服务设为系统服务，但为此您需要拥有 AOSP 的权限并扩展 SystemService 类。

这样的 SystemService 需要编译和创建为 services.jar 的一部分，它是 android 的所有系统服务的组合。不幸的是，考虑到外部服务可能会给系统带来问题，这增加了系统服务稳定性的风险。

当然，对于应用程序开发人员来说，这并不是一件容易的事情，但这种方法更适合从事完整 AOSP 工作的 OEM/SoC 供应商。

# .net - 如何翻译异步 ASP.NET Web API 方法返回的任务中的异常？

> ID：13269267
> 
> 赞同：1
> 
> 时间：2012-11-07T11:55:42.167
> 
> 标签：.net, exception-handling, asp.net-web-api, task-parallel-library

当（异步）ASP.NET Web API 控制器方法返回的任务引发异常时，我想将已知异常转换为`HttpResponseException`. 有没有办法拦截这些异常，然后抛出`HttpResponseException`？

下面的代码片段应该演示我正在谈论的异步 API 控制器方法的类型。

```
class ObjectApiController : ApiController
{
    public Task<Object> GetObjectByIdAsync(string id)
    [...]
} 
```

如果我需要提供有关我正在尝试做的事情的更多信息，请告诉我。

**编辑：** 具体来说，我想知道是否有某种钩子可以用来拦截 ApiController 方法返回的任务中的异常，并将所述异常转换为 HttpResponseException。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T13:18:30.877

我使用 ExceptionFilter 来执行此操作：

```
/// <summary>
/// Formats uncaught exception in a common way, including preserving requested Content-Type
/// </summary>
public class FormatExceptionsFilterAttribute : ExceptionFilterAttribute
{

    public override void OnException(HttpActionExecutedContext actionExecutedContext)
    {
        Exception exception = actionExecutedContext.Exception;

        if (exception != null)
        {            
            HttpRequestMessage request = actionExecutedContext.Request;

            // we shouldn't be getting unhandled exceptions
            string msg = "Uncaught exception while processing request {0}: {1}";
            AspLog.Error(msg.Fmt(request.GetCorrelationId().ToString("N"), exception), this); 

            // common errror format, without sending stack dump to the client
            HttpError error = new HttpError(exception.Message);
            HttpResponseMessage newResponse = request.CreateErrorResponse(
                HttpStatusCode.InternalServerError,
                error);
            actionExecutedContext.Response = newResponse; 

        }
    }

} 
```

它是这样注册的：

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        config.Filters.Add(new ApiControllers.FormatExceptionsFilterAttribute());

        // other stuff
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:48:52.063

下面的代码只是其中一种方式：

```
class ObjectApiController : ApiController
{
    public Task<Object> GetObjectByIdAsync(string id)
    {

        return GetObjAsync().ContinueWith(task => { 

            if(task.Status == TaskStatus.Faulted) { 
                var tcs = TaskCompletionSource<object>();

                // set the status code to whatever u need.
                tcs.SetException(new HttpResponseException(HttpStatusCode.BadRequest));

                return tcs.Task;
            }

            // TODO: also check for the cancellation if applicable

            return task;
        });
    }
} 
```

如果您在 .NET 4.5 上并想使用 async/await，您的工作会更轻松。

**编辑**

根据您的评论，我猜您想要一些通用的东西。如果是这种情况，请按照@tcarvin 的建议使用异常过滤器。

# linux - 如何在 Linux 上使用 -clean 打开程序

> ID：13269270
> 
> 赞同：-5
> 
> 时间：2012-11-07T11:55:45.490
> 
> 标签：linux, eclipse, shell, command

需要知道使用 -clean 选项添加到我要执行的程序属性的命令

我知道在 Windows 上，您只需将 -clean 添加到程序快捷方式属性的目标末尾，但没有 linux 机器可以尝试此操作，需要编写一些关于如何完成的文档Linux

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T12:41:47.097

大多数 Eclipse 选项在所有操作系统之间共享。我已经`-clean`在我的 Linux 系统上多次使用 Eclipse，它按预期工作。

如果您问“如何`-clean`在 Linux 上使用该选项启动 Eclipse（或基于 Eclipse 的产品）？”，那么答案必须首先取决于 Eclipse 是如何启动的。例如：

*   如果它是通过 shell 命令提示符启动的，那么预先添加该`-clean`选项就足够了：

    ```
    ./eclipse -clean ... 
    ```

*   如果它是通过桌面图标或菜单启动的，那么用户应该通过桌面环境提供的任何方法来修改快捷方式。

    不幸的是（或幸运的是）Linux 上有几种桌面环境可用，每一种都有自己的差异。如果您正在编写新手可以阅读的文档，您可能必须尝试主要发行版的主要 DE 并记录该过程 - 或者至少在 Web 上找到合适的文档链接。

# ruby - 为什么模块的单例方法在混合的下游特征类中不可见？

> ID：13269271
> 
> 赞同：7
> 
> 时间：2012-11-07T11:55:48.707
> 
> 标签：ruby, inheritance, mixins, eigenclass

我了解常规方法查找路径，即`class, superclass/module, all the way up to BasicObject`. 我认为对于单例版本的链也是如此，但当您在元链中混合模块时似乎并非如此。如果有人能解释为什么在我将这个模块包含在 Vehicle 的 eigenclass 中时，为什么在下面的示例中调用`Automobile`模块的`banner`方法而不是它的单例版本，我将不胜感激。

```
module Automobile
  def banner
    "I am a regular method of Automobile"
  end

  class << self
    def banner
      "I am a class method of Automobile"
    end
  end
end

class Vehicle 
  def banner
    "I am an instance method of Vehicle"
  end

  class << self
    include Automobile
    def banner
      puts "I am a class method of Vehicle"
      super
    end
  end
end

class Car < Vehicle
  def banner
    "I am an instance method of Car"
  end

  class << self
    def banner
      puts "I am a class method of Car"
      super
    end
  end
end

puts Car.banner

# I am a class method of Car
# I am a class method of Vehicle
# I am a regular method of Automobile 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T13:15:40.817

首先，`include`不包括您可能期望的特征类方法。考虑：

```
module Foo
  class << self
    def do_something
      puts "Foo's eigenclass method does something"
    end
  end
end

module Bar
  include Foo
end

puts Bar.do_something
# undefined method `do_something' for Bar:Module (NoMethodError) 
```

请注意，这与经典定义的类方法的行为一致：

```
module Foo
  def self.do_something
    puts "Foo's class method does something"
  end
end

module Bar
  include Foo
end

puts Bar.do_something
# undefined method `do_something' for Bar:Module (NoMethodError) 
```

一个常见的习惯用法是在子模块中定义类方法，然后在包含模块时触发调用`extend`：

```
module Foo
  def self.included(base)
    base.extend ClassMethods
  end

  module ClassMethods
    def do_something
      puts "Foo::ClassMethod's instance method does something"
    end
  end
end

module Bar
  include Foo
end

puts Bar.do_something
# Foo::ClassMethod's instance method does something 
```

要注意的第二件事是，您实际上将 的实例方法包含`Automobile`到 的特征类中`Vehicle`，因此将 的实例方法`Automobile`转换为 的（特征）类方法`Vehicle`。

你的`Car`课基本上与这一切无关。这里唯一要注意的是，类继承也使类方法可用，而`include`不能。例子：

```
class Foo
  def self.do_something
    puts "Foo's class method does something"
  end
end

class Bar < Foo
end

puts Bar.do_something
# "Foo's class method does something" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T14:18:16.187

首先，类是一个对象，就像其他对象一样，它也有自己的超类；其次，Eigenclass 本身是一个普通的类，只有匿名且有点不可见；第三，派生类的eigenclass的超类是基类的eigenclass；第四，`include`包含被包含模块的实例方法（不是单例方法），使它们成为接收者类对象的实例方法。

您的示例中有两个并行继承链

汽车 < 车辆 < ...

汽车的特征类 < 车辆的特征类 < 汽车 < ...

对 irb 进行以下测试：

```
class Object
  def eigenclass
    class << self
      self
    end
  end
end

Car.ancestors # => [Car, Vehicle, Object, Kernel, BasicObject]
Car.eigenclass.ancestors # => [Automobile, Class, Module, Object, Kernel, BasicObject]
Vehicle.eigenclass.ancestors # => [Automobile, Class, Module, Object, Kernel, BasicObject]
Car.eigenclass.superclass.equal? Vehicle.eigenclass # => true 
```

你看，`Automobile`是在 eigenclass 继承链中。但遗憾的是，该`ancestor`方法没有返回不可见的特征类，尽管它们实际上在第二个链中。

# android - 为什么应用程序在调用 web 服务后就死掉了？

> ID：13269278
> 
> 赞同：1
> 
> 时间：2012-11-07T11:56:10.730
> 
> 标签：android, web-services

我用 ksoap2 调用 1 个 web 服务：

```
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);                
            envelope.setOutputSoapObject(request);
            HttpTransportSE androidhttpTranport = new HttpTransportSE(URL,
                    ContantSystem.TimeOut);

            androidhttpTranport.call(SOAP_ACTIONS, envelope);

            Object responseBody = null;
            try {
                responseBody = envelope.getResponse();
            } catch (SoapFault e2) {

            }

            try {
                JSONObject json = new JSONObject(responseBody.toString());

            } catch (JSONException e1) {

            } 
```

如果 webservice 的结果是 json（这个 json 有 6401728 个字符 `'string(6401728)'`）。当我调用这个 web 服务时，我的应用程序死掉了。但是如果 webservice 的结果是 json ' `string(2101728)`。我的应用程序运行正常。所以。我的代码中的错误在哪里？是什么导致了错误，是json的限制，webservice还是在哪里？如何解决这个问题？你能帮助我吗？谢谢。

例外：

```
11-07 19:54:41.283: E/AndroidRuntime(10620): FATAL EXCEPTION: Thread-1851
11-07 19:54:41.283: E/AndroidRuntime(10620): java.lang.OutOfMemoryError
11-07 19:54:41.283: E/AndroidRuntime(10620):    at java.lang.String.<init>(String.java:432)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at java.lang.AbstractStringBuilder.toString(AbstractStringBuilder.java:642)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at java.lang.StringBuilder.toString(StringBuilder.java:663)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.kxml2.io.KXmlParser.readValue(KXmlParser.java:1419)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.kxml2.io.KXmlParser.next(KXmlParser.java:390)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.kxml2.io.KXmlParser.next(KXmlParser.java:310)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.kxml2.io.KXmlParser.nextText(KXmlParser.java:2056)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.ksoap2.serialization.DM.readInstance(DM.java:34)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.ksoap2.serialization.SoapSerializationEnvelope.readInstance(SoapSerializationEnvelope.java:462)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.ksoap2.serialization.SoapSerializationEnvelope.read(SoapSerializationEnvelope.java:420)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.ksoap2.serialization.SoapSerializationEnvelope.readUnknown(SoapSerializationEnvelope.java:289)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.ksoap2.serialization.SoapSerializationEnvelope.read(SoapSerializationEnvelope.java:422)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.ksoap2.serialization.SoapSerializationEnvelope.parseBody(SoapSerializationEnvelope.java:149)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:137)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.ksoap2.transport.Transport.parseResponse(Transport.java:100)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:195)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:95)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at jp.osaka.APPLIActivity.getMarterDB(APPLIActivity.java:408)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at jp.osaka.APPLIActivity.access$0(APPLIActivity.java:390)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at jp.osaka.APPLIActivity$myrunable.run(APPLIActivity.java:369)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at java.lang.Thread.run(Thread.java:856) 
```

# java - 自动生成非泛型接口实现

> ID：13269279
> 
> 赞同：18
> 
> 时间：2012-11-07T11:56:12.430
> 
> 标签：java, generics, refactoring, intellij-idea, automated-refactoring

我有界面

```
public interface ObjectBuilder<E> {  
   E buildObject();
} 
```

此外，该项目有很多实现非通用版本接口的类。

```
class MyClassBuilder implements ObjectBuilder {
    public MyClass buildObject() {/**/}
} 
```

是否可以自动转换所有这些类，以便它们实现了接口的通用版本？

**自动重构为此：**

```
class MyClassBuilder implements ObjectBuilder<MyClass> {
    public MyClass buildObject() {/**/}
} 
```

是否有内置或插件 Intellij IDEA？还是在其他IDE中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T14:22:51.053

我会做什么：搜索`implements ObjectBuilder`并自动将所有出现的内容替换为无法编译的内容，例如

```
implements ObjectBuilder<FIXME> 
```

然后尝试编译，并手动修复所有中断。这可能比尝试使用更高级的方法更快......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T13:17:03.623

您可以使用[结构搜索和替换功能](http://www.jetbrains.com/idea/documentation/ssr.html)。不过它只在终极版中可用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T16:12:05.780

NetBeans 提供了一个名为[*Inspect and Transform*](http://netbeans.org/kb/docs/java/editor-inspect-transform.html)的功能，它允许您编写自定义*检查*和*转换*，格式如下：

```
<source-pattern> :: <conditions>
=> <target-pattern> :: <conditions>
;; 
```

例如：

```
$f.toURL() :: $f instanceof java.io.File
=> $f.toURI().toURL()
;; 
```

[您可以在博客文章](https://blogs.oracle.com/geertjan/entry/custom_declarative_hints_in_netbeans)中找到更多此类转换的示例。

同样，IntelliJ 通过名为*[Structural Search and Replace](http://www.jetbrains.com/idea/documentation/ssr.html)*的功能支持自定义代码转换规则。使用 IntelliJ 的此功能，您可以进行如下转换：

```
class $TestCase$ extends TestCase {
  $MyClassContent$
}
=>
class $TestCase$ extends OurHomeGrownTestCase {
  $MyClassContent$
} 
```

但是，我不确定上述规则语言是否足够表达以支持您所需的转换。如果他们无法表达您的转换，您始终可以求助于 IDE 的重构 API 来自动化您的自定义转换，例如：

*   [NetBeans 重构 API](http://bits.netbeans.org/dev/javadoc/org-netbeans-modules-refactoring-api/overview-summary.html)
*   [NetBeans Java 提示模块教程](http://platform.netbeans.org/tutorials/nbm-java-hint.html)
*   [Eclipse Java 代码操作](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.isv/guide/jdt_api_manip.htm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T18:57:22.013

> 是否可以自动转换所有这些类，以便它们实现了接口的通用版本？

是的，对于“自动”的适当定义，这是可能的:)

> 是否有内置或插件 Intellij IDEA？还是在其他IDE中？

您正在寻找的转换非常复杂：

```
for each class (interface) that implements ObjectBuilder (not ObjectBuilder<.*>) 
  if the class declares/defines the method buildObject with return type X 
  then 
    modify the class to implement ObjectBuilder<X> instead of ObjectBuilder. 
```

您可能可以编写一个插件来执行此操作，但我怀疑没有现有的插件具有足够表达的脚本语言来描述这一点。

另一方面，*硬编码*脚本似乎一点也不难。我对 IntelliJ IDEA 没有任何经验，但我可以看到即使在 Emnacs Lisp 中使用简单的搜索/替换也可以做到这一点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T14:15:12.683

您可能会对[Program Transformation Systems](http://en.wikipedia.org/wiki/Program_transformation)感兴趣。

此类工具允许您根据源代码模式声明对代码的更改：“如果您看到*this*，则用*that*替换它”。（这有点像另一个答案中提到的可编程“结构搜索和替换”）。此类别中更强大的工具提供有关类型的信息（“符号表”）并使其可用于控制转换（您肯定需要它，因为您只对将更改应用于与特定接口相关的实体感兴趣。）

此类工具还允许元编程，以对此类转换的应用进行排序。有了这两个想法，一个人就可以实现工具来进行“大规模”的改变，比如你考虑的那种。

# java - 是否可以在 android.. 的一个媒体播放器中同时播放两个音频？

> ID：13269284
> 
> 赞同：2
> 
> 时间：2012-11-07T11:56:27.623
> 
> 标签：java, android

我正在开发一个应用程序，我想同时播放两个 mp3 文件作为背景音乐，并在背景音乐中间添加另一个 mp3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:09:52.733

是的，可以使用`java.lang.Thread`！

您可以使用不同的线程启动多首歌曲。

# css - 三星智能电视应用程序中的 CSS 样式

> ID：13269286
> 
> 赞同：2
> 
> 时间：2012-11-07T11:56:28.300
> 
> 标签：css, twitter-bootstrap, samsung-smart-tv, smart-tv

嗨，三星智能电视应用程序的新手，

我想用 CSS 和 Javascript 创建一些丰富的用户界面。我认为 Twitter Bootstrap 是一个不错的选择。但是我不能在我的应用程序中使用引导程序的类属性。指导我如何在三星智能电视应用程序中使用 twitter 引导框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:35:23.963

我已经在我创建的一个应用程序中成功使用了引导程序。只需将引导代码添加到项目目录并从 index.html 中引用它，就像使用任何样式表一样。

还要确保在所有单个场景样式表的顶部包含以下内容

```
@import url("<PATH TO BOOTSTRAP>/bootstrap.css"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:33:01.100

我认为你应该`sf.core.loadCSS();`在你的应用程序中使用。只看[指南](http://www.samsungdforum.com/Guide/ref00009/sfcore_loadcss.html)。[JS](http://www.samsungdforum.com/Guide/ref00009/sfcore_loadjs.html)也有类似的方法。

如果您使用的是 AppsFramework 2.0 应用程序结构（基本应用程序项目），则应将其放置在`app/init.js`如下位置：

```
function onStart() {
    sf.core.loadCSS([
        "app/stylesheets/file1.css",
        "app/stylesheets/file2.css"
    ], function () {
        // callback on file loading
    });
} 
```

文档中没有提到回调函数，但它可以工作（我确信对于 JS，CSS 应该以同样的方式工作）。

但是，如果您使用的是“Javascript App Project”模板（旧的），那么您可以将提到`<style>@import url();</style>`的放在您的 root`index.html`中。

# php - PHP foreach if/else 问题

> ID：13269292
> 
> 赞同：0
> 
> 时间：2012-11-07T11:56:55.503
> 
> 标签：php, arrays, foreach

我一直在努力使用以下代码。我想做的是根据分数计算评论的数量。信息是从 MYSQL 中提取的，并且在将其输入到数组之前正在执行计算，最多将有五个结果（格式化后）。被计算在内。

我的代码如下：

```
 $myArray = str_split(554);
    $newArray = array_count_values($myArray);

    foreach ($newArray as $key => $value) {

     $reviews_percentage = round($value/3*100);

    if (array_key_exists("1",$newArray)) {

    echo "$key - <strong>$value</strong> as a percent its : $reviews_percentage <br />";   
    }

    else {

    echo "1 - <strong>0</strong> as a percent its : 0 <br />"; 
    }

    if (array_key_exists("2",$newArray)) {

    echo "$key - <strong>$value</strong> as a percent its : $reviews_percentage <br />"; 
    }

    else {

    echo "2 - <strong>0</strong> as a percent its : 0 <br />"; 
    }

    if (array_key_exists("3",$newArray)) {

    echo "$key - <strong>$value</strong> as a percent its : $reviews_percentage <br />"; 
    }

    else {

    echo "3 - <strong>0</strong> as a percent its : 0 <br />"; 
    }
    if (array_key_exists("4",$newArray)) {

    echo "$key - <strong>$value</strong> as a percent its : $reviews_percentage <br />"; 

    }

    else {

    echo "4 - <strong>0</strong> as a percent its : 0 <br />"; 
    }

    if (array_key_exists("5",$newArray)) {

    echo "$key - <strong>$value</strong> as a percent its : $reviews_percentage <br />"; 
    }

    else {

    echo "5 - <strong>0</strong> as a percent its : 0 <br />"; 
    }

    } 
```

这给出了以下结果：

```
 1 - 0 as a percent its : 0 
   2 - 0 as a percent its : 0 
   3 - 0 as a percent its : 0 
   5 - 1 as a percent its : 50 
   5 - 1 as a percent its : 50 
   1 - 0 as a percent its : 0 
   2 - 0 as a percent its : 0 
   3 - 0 as a percent its : 0 
   4 - 1 as a percent its : 50 
   4 - 1 as a percent its : 50 
```

我可以看到它在循环中运行了两次，但无法弄清楚我做错了什么。

**添加的数据库结构**

```
 |------
    |id|date_created|date_updated|ip_address|status|element_3|element_4|element_5|element_6|element_7|element_8|element_9|
    |------
    |1|2012-06-21 15:22:57|2012-06-21 16:06:04|::1|1|19|10|10|10|10|10|10|
    |2|2012-06-21 16:21:23|2012-06-21 16:21:40|::1|1|19|10|9|9|9|10|
    |3|2012-06-21 18:14:56|2012-06-21 18:15:19|::1|1|18| 5|5|5|5|5| 
```

**更新代码**

```
 $result = mysql_query("SELECT * FROM ap_form_5 WHERE element_1='19'") or die(mysql_error());

    $num_rows = mysql_num_rows($result);

        while($profile_rows = mysql_fetch_array($result)) {

    $feature1 = $profile_rows['element_4'];
    $feature2 = $profile_rows['element_5'];
    $feature3 = $profile_rows['element_6'];
    $feature4 = $profile_rows['element_7'];
    $feature5 = $profile_rows['element_8'];        
$overalladd  = $feature1+$feature2+$feature3+$feature4+$feature5;

    $ratingsbar .= floor(round($overalladd/5/2, 15, PHP_ROUND_HALF_DOWN));

    $myArray = str_split($ratingsbar);
    $arrayCount = array_count_values($myArray);
    }

    function perc($total,$count){
    $ans = (100/$total) * $count;
    return($ans);

    // this array is only being filled like this to to show my working out (your db will populate this)
    $ratings[1]= $arrayCount[0]; // 1 star ratings - 2 votes
    $ratings[2]= $arrayCount[1]; // 2 star rating - 1 votes
    $ratings[3]= $arrayCount[2]; // 3 star rating - 2 votes
    $ratings[4]= $arrayCount[3]; // 4 star rating - 0 votes
    $ratings[5]= $arrayCount[4]; // 5 star rating - 5 votes

    $total_votes = array_sum($ratings);

    $i = 1;
    foreach($ratings as $rating){
    echo "Stars ".$i.": ".perc($total_votes,$rating)."% $ratings[$i]<br />";
    $i ++;
    }

    ?> 
```

现在给出以下结果

```
星星 1: 0%
星星 2：0%
星星 3：50% 1
星星 4: 0%
星星 5：50% 1
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:41:15.017

试试这个？

```
<?php

    $result = mysql_query("SELECT * FROM ap_form_5 WHERE element_1='19'") or die(mysql_error());
    $num_rows = mysql_num_rows($result);

    while($profile_rows = mysql_fetch_array($result)) {

        $total_ratings_this_loop = 0; // empty this before looping
        $ratings[1]= $profile_rows['element_4']; // assuming that this field contains 1 star ratings for this product
        $ratings[2]= $profile_rows['element_5']; // assuming that this field contains 2 star ratings for this product
        $ratings[3]= $profile_rows['element_6']; // assuming that this field contains 3 star ratings for this product
        $ratings[4]= $profile_rows['element_7']; // assuming that this field contains 4 star ratings for this product
        $ratings[5]= $profile_rows['element_8']; // assuming that this field contains 5 star ratings for this product

        $total_ratings_this_loop = array_sum($ratings); // takes all of the ratings for this product and totals them from inside the array

        $overalladd  = $feature1 + $feature2 + $feature3 + $feature4 + $feature5;

        echo "Product ID: 19, has the following ratings<br />";

        $i = 1; // empty this before looping
        foreach($ratings as $rating_count){
            echo $i." star, Rating count: ".$rating.",Percentage:".perc($total_ratings_this_loop,$rating)."%<br />";
            $i ++;
        }   

    }

 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:42:16.513

用以下代码替换您的代码并检查：

```
$myArray = str_split($ratingsbar);
$newArray = array_count_values($myArray);

foreach ($myArray as $key => $value) {

$reviews_percentage = round($value/$num_rows*100);

if (array_key_exists("1",$myArray)) {

echo "$key - <strong>$value</strong> as a percent its : $reviews_percentage <br />";   
}

else {

echo "1 - <strong>0</strong> as a percent its : 0 <br />"; 
}

if (array_key_exists("2",$myArray)) {

echo "$key - <strong>$value</strong> as a percent its : $reviews_percentage <br />"; 
}

else {

echo "2 - <strong>0</strong> as a percent its : 0 <br />"; 
}

if (array_key_exists("3",$myArray)) {

echo "$key - <strong>$value</strong> as a percent its : $reviews_percentage <br />"; 
}

else {

echo "3 - <strong>0</strong> as a percent its : 0 <br />"; 
}
if (array_key_exists("4",$myArray)) {

echo "$key - <strong>$value</strong> as a percent its : $reviews_percentage <br />"; 

}

else {

echo "4 - <strong>0</strong> as a percent its : 0 <br />"; 
}

if (array_key_exists("5",$myArray)) {

echo "$key - <strong>$value</strong> as a percent its : $reviews_percentage <br />"; 
}

else {

echo "5 - <strong>0</strong> as a percent its : 0 <br />"; 
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:09:58.860

> 我想做的是根据分数计算评论的数量。

请向我们展示填充了最小化示例数据的数据库结构，并根据该数据告诉我们您的预期结果是什么。

* * *

好的，如果你想创建这样的东西：

![在此处输入图像描述](../Images/dc1f5293d4cf301751076a9f8d974ec3.png)

然后我演示一下，我会怎么做，因为我仍然不明白你的逻辑。

```
votes table (this means user U voted on product P with S stars):
user_id |  product_id    | star
      1           1         5   
      2           1         5
      3           1         4
      4           1         1 
```

对产品 1 的总票数的 sql 查询是

```
SELECT star,COUNT(*) as C 
FROM votes 
WHERE product_id=1 
GROUP BY star 
```

结果是

```
star    C
1       1
4       1
5       2 
```

写出来：

```
$rs = mysql_query("");//put query here
$stars_count = array();
$star_sum = 0;
while($r = mysql_fetch_assoc($rs))
{
  $stars_count[$r['star']] = $r['C'];
  $star_sum += $r['C'];
}
for($i=5;$i>=1;$i--)
  echo "Product 1 was voted $i star: ".
     (isset($stars_count[$i])? round($stars_count[$i]/$star_sum*100)."%":"0%").
     " (".( isset($stars_count[$i])? $stars_count[$i] : 0 ).")<br>"; 
```

结果：

> ```
> Product 1 was voted 5 star: 50% (2)
> Product 1 was voted 4 star: 25% (1)
> Product 1 was voted 3 star: 0% (0)
> Product 1 was voted 2 star: 0% (0)
> Product 1 was voted 1 star: 25% (1) 
> ```

# java - 使用 maven 分发 akka 微内核应用程序

> ID：13269293
> 
> 赞同：1
> 
> 时间：2012-11-07T11:56:59.103
> 
> 标签：java, maven, akka

我有一个用 java 开发的 akka 微内核应用程序。为了分发应用程序，我使用了 JCrankyi 博客上的教程

```
 http://jcranky.com/2012/07/13/akka-microkernel-with-maven/#comment-1322 
```

使用 maven-assembly-plugin 和 akka 启动脚本。

描述符.xml 如下所示

```
 <id>akka</id>

  <formats>
    <format>zip</format>
  </formats>

  <fileSets>
    <fileSet>
      <directory>${Com-RubineEngine-GesturePoints}</directory>
      <outputDirectory>/deploy</outputDirectory>
      <includes>
        <include>*.jar</include>
      </includes>
    </fileSet>
  </fileSets>

  <dependencySets>
    <dependencySet>
      <outputDirectory>/lib</outputDirectory>
    </dependencySet>
  </dependencySets>

  <files>
    <file>
      <source>src/main/start</source>
      <outputDirectory>/bin</outputDirectory>
    </file>

    <file>
      <source>src/main/resources/application.conf</source>
      <outputDirectory>/config</outputDirectory>
    </file>
  </files>

</assembly> 
```

POM.xml 中的片段

```
 <plugin>
  <artifactId>maven-assembly-plugin</artifactId>
  <version>2.3</version>
  <configuration>
    <descriptors>
      <descriptor>/descriptor.xml</descriptor>
    </descriptors>
  </configuration>

  <executions>
    <execution>
      <id>make-assembly</id>
      <phase>package</phase>
      <goals>
        <goal>single</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

启动文件是一个批处理文件，内容如下所示。

```
@echo off
set SAMPLE=%~dp0..
set AKKA_HOME=%SAMPLE%\..\..\..\..
set JAVA_OPTS=-Xms1024M -Xmx1024M -Xss1M -XX:MaxPermSize=256M -XX:+UseParallelGC
set AKKA_CLASSPATH=%AKKA_HOME%\lib\scala-library.jar;%AKKA_HOME%\lib\akka\*
set SAMPLE_CLASSPATH=%SAMPLE%\config;%AKKA_CLASSPATH%;%SAMPLE%\lib\*

java %JAVA_OPTS% -cp "%SAMPLE_CLASSPATH%" -Dakka.home="%SAMPLE%" akka.kernel.Main 
```

来自 Maven 程序集的错误：程序集插件如下所示。

```
[INFO] Reading assembly descriptor: /descriptor.xml
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 14.124s
[INFO] Finished at: Wed Nov 07 11:46:10 GMT 2012
[INFO] Final Memory: 11M/245M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-assembly-plugin:2.
3:single (make-assembly) on project com-theta-gesture: Failed to create assembly
: Error adding file to archive: C:\Users\FAISAL\Desktop\disaster\com-theta-gestu
re\src\main\start isn't a file. -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e swit
ch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please rea
d the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionE
xception 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:17:34.243

我认为错误很明显。

```
C:\Users\FAISAL\Desktop\disaster\com-theta-gesture\src\main\start isn't a file 
```

我假设这`src/main/start`是一个文件夹，您必须指定该文件夹中文件的名称。至少它不被识别为文件。

```
<files>
    <file>
        <source>src/main/start</source>
        <outputDirectory>/bin</outputDirectory>
    </file>
</files> 
```

[我认为您应该按照标准目录布局简介中的说明](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)`src/main/scripts`放入启动脚本。

```
<files>
    <file>
        <source>src/main/scripts/start.bat</source>
        <outputDirectory>/bin</outputDirectory>
    </file>
</files> 
```

* * *

**编辑**

为了验证您的`start`文件是否真的是一个文件，只需在您的`src/main/test`目录中添加一个简单的 JUnit 测试。这是一个简单的例子：

```
package com.stackoverflow;

import org.junit.Test;

import java.io.File;

import static org.junit.Assert.assertTrue;

/**
 * @author maba, 2012-11-08
 */
public class FileTest {
    @Test
    public void testIfStartScriptIsFile() {
        File file = new File("src/main/scripts/start.bat");
        assertTrue("The tested file is not a real file!!!", file.isFile());
    }
} 
```

# javascript - 捕获中间点击并替换 URL 的 Chrome 扩展

> ID：13269296
> 
> 赞同：0
> 
> 时间：2012-11-07T11:57:10.277
> 
> 标签：javascript, google-chrome, google-chrome-extension

我对 chrome 扩展完全陌生，但我已经阅读了入门并从 Google 组装了示例。我想构建一个扩展，当它处于活动状态时，它会捕获 mydomain.com 上的鼠标中键单击事​​件、读取 URL、修改它并使用新创建的 URL 启动新选项卡。

据我所知，到目前为止，我需要一个 manifest.json 文件和一个 my_script.js 文件，它们将被注入到所有 mydomain.com 页面加载中。它是否正确 ？如果是，我接下来应该如何进行，我应该在清单和 javascript 文件中添加什么来完成给定的任务。一些代码示例将不胜感激。

我还在stackoverflow 上阅读了[几个答案](https://stackoverflow.com/questions/11494232/chrome-extension-chrome-browseraction-onclicked-doesnt-work)`browserAction`，如果要使用它只能在扩展页面中使用，因此您不能在内容脚本中使用它。这意味着我必须将我的代码放在后台页面而不是 my_script.js 中。请建议我应该如何进行。

谢谢

工作脚本解决方案是：

```
$(document).click(function(e) {
    var urlToGo = window.location.href;

    // middle button
    if (e.which == 2) {
        urlToGo = "http://google.com"; 
        window.open(urlToGo);       
        e.preventDefault();
        e.stopPropagation();
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:47:04.773

您可以从我的简单 Chrome 扩展内容脚本骨架[https://github.com/robin-drexler/Simple-Chrome-Extension-Content-Script-Skeleton](https://github.com/robin-drexler/Simple-Chrome-Extension-Content-Script-Skeleton)开始，它提供了清单和内容脚本，将在您访问的每个页面。

现在您可以继续并实现您想要的功能。然后你可以使用window.open 打开一个新的标签/窗口（更简单的方法）或使用原生 Chrome APIs 打开一个新的标签。

window.open（在内容脚本中）

```
 $(function() {
        $(document).on('click', function(e){
            //do some replace magic here
            var url = 'http://google.com';
            if (e.which === 2) {
                window.open(url);       
            }        
        });
    }); 
```

[http://jsfiddle.net/886jY/2/](http://jsfiddle.net/886jY/2/)

Chrome API 的有趣读物

背景页面和内容脚本之间的消息传递。IIRC 您只能在后台页面中使用 CHrome Tab API。 [http://developer.chrome.com/extensions/messaging.html](http://developer.chrome.com/extensions/messaging.html)

Chrome 选项卡 API [http://developer.chrome.com/extensions/tabs.html](http://developer.chrome.com/extensions/tabs.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:06:09.147

您需要让 manifest.json 声明一个内容脚本，这是将为每个页面运行的 js 文件（如果您将属性设置为“all_frames”为 true，则递归到文档中的每个框架）。

检查此示例 manifest.json：

```
{
  "name": "MyExtension",
  "version": "0.2",
  "manifest_version": 2,
  "description": "My description.",
  "content_scripts": [
  {
    "matches": ["<all_urls>"],
    "js": ["jquery.js", "my_javascript_to_execute_on_each_frame.js"],
    "all_frames": true
  }
  ]
} 
```

使用此清单，您必须提供 jquery（可选）和单个 js 文件，其中包含用于侦听鼠标单击、更改当前文档的 url 并打开新选项卡的代码。这个脚本可能像这样：

```
​$(document).click(function(e)​ {
    var urlToGo = window.location.href;

    // middle button
    if (e.which === 2) {
        urlToGo = ... // do your url hackery =)
        window.open(urlToGo);       
        e.stopPropagation();
    }

});
    ​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:13:00.613

顺便说一句，中间按钮可能不是一个好主意，因为它是最多余的，用户最不常用的，甚至可能在某些设备中丢失，尤其是在触摸屏上。您可能应该重新考虑您的方法以支持使用第一个鼠标按钮，可以通过您自己提到的浏览器操作按钮或更好的页面操作按钮有条件地启用或禁用您的扩展，因为您想要仅适用于特定域。

至于您感兴趣的代码（对于中间按钮），它对扩展没有什么特别之处，它只是与页面的 DOM 一起工作的常用 JavaScript，您的内容脚本在其中注入。例如，您可以为点击绑定处理程序，如下所示：

```
document.onmousedown = mouseDown;

function mouseDown(e)
{
  var midclick;
  if (!e) var e = window.event;
  if (e.which) midclick = (e.which == 2);
  else if (e.button) midclick = (e.button == 4); // MS
  if (midclick)
  {
    var target;
    if (e.target) target = e.target;
    else if (e.srcElement) target = e.srcElement;
    if (target.innerHTML) // do stuff what you need here,
    {                     // assume get all the content as url
      openNewURL(target.innerHTML);
    }
  }
}

function openNewURL(newurl)
{
  chrome.extension.sendMessage({url: newurl}, function(response) {});
} 
```

您的第一个理解是正确的：您需要清单和内容脚本以及背景页面。

在后台页面处理传入请求：

```
chrome.extension.onMessage.addListener(
function(request, sender, sendResponse)
{
  if (request.url)
  {
    chrome.tabs.create({url: request.url});
  }
}); 
```

# html - How to make a mirror of menu in CSS

> ID：13269303
> 
> 赞同：0
> 
> 时间：2012-11-07T11:57:38.447
> 
> 标签：html, css

I am newbie in CSS coding. Is there any easy option in CSS to make "mirror" of menu which is constructed like below. I would like to get exactly the same menu but in mirror.

HTML:

```
<ul class="nav">
<li class="blue"><a href="/index.php">Home</a></li>
<li class="red"><a href="#">About</a></li>
<li class="green"><a href="#">Contact</a></li>
</ul>
</div> 
```

and CSS:

```
.navbox {
    float: left;
    position: relative;
}
ul.nav {
    background: url("shadow.png") no-repeat scroll 0 0 transparent;
    display: block;
    left: 0;
    list-style: none outside none;
    padding: 60px 0;
    position: relative;
    top: 0;
    width: 200px;
}
.nav li a {
    color: white;
    display: block;
    font-size: 14px;
    margin: 5px 0 0;
    padding: 7px 15px;
    text-decoration: none;
    width: 100px;
}
.nav li a:hover {background: url("border.png") no-repeat scroll 0 0 black;
color: white;
padding: 7px 15px 7px 30px;}
.blue a { background: url("border.png") no-repeat scroll 0 0 blue;}
.red a { background: url("border.png") no-repeat scroll 0 0 red;}
.green a {background: url("border.png") no-repeat scroll 0 0 green;} 
```

* * *

Hello again and thanks for the answers.

It almost solves my problem:

```
.mirror {
    display:block; 
    -moz-transform: matrix(-1, 0, 0, 1, 0, 0);
    -webkit-transform: matrix(-1, 0, 0, 1, 0, 0);
    -o-transform:matrix(-1, 0, 0, 1, 0, 0);
} 
```

But, is there any option which could avoid "mirroring" of the text? I mean:

```
<li class="red"><a href="#">About</a></li>
<li class="green"><a href="#">Contact</a></li> 
```

That text stay without "mirroring"?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:29:34.293

检查这个[博客](http://csscreator.com/node/6494)。

这与他们讨论过的事情相同。

可能对您的设计有用

（或者）

```
 .rotated{
            -  moz-transform: rotate(-180deg);
             -webkit-transform: rotate(-180deg);
             transform: rotate(-180deg);
               filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=2)
             } 
```

试试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:26:17.433

尝试将此类应用于菜单元素的副本：

```
.mirror    {
   -prefix-transform: scale(-1, 1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T12:32:11.593

您可以使用 CSS 3`transform`标签来旋转元素。尝试这个：

```
.rotated {
    -moz-transform: rotate(-180deg);
    -webkit-transform: rotate(-180deg);
    transform: rotate(-180deg);
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=2)
} 
```

# php - 使用自定义 SQL 对 Propel 对象进行水合时如何获得额外的列？

> ID：13269305
> 
> 赞同：6
> 
> 时间：2012-11-07T11:57:38.263
> 
> 标签：php, mysql, propel

我正在使用自定义 SQL 来连接两个表，将一些业务逻辑应用于日期，然后使用结果来水化推进对象（集合）。这是我的代码：

```
$testtypes = TesttypeQuery::create()->find();

foreach ($testtypes as $testtype) {

  /* work out what most recent schedule */
  $con = \Propel::getConnection(SchedulePeer::DATABASE_NAME);
  $sql = "SELECT `schedule`.*, (`schedule`.`last` + INTERVAL `duration`.`weeks` WEEK + INTERVAL `duration`.`months` MONTH + INTERVAL `duration`.`years` YEAR) AS `dueDate` FROM `schedule` LEFT JOIN `duration` ON `schedule`.`duration_id` = `duration`.`id` HAVING `schedule`.`testtype_id` = {$testtype->getId()} AND `dueDate` < NOW() ORDER BY `dueDate` ASC LIMIT 1";
  $stmt = $con->prepare($sql);
  $stmt->execute();
  $formatter = new \PropelObjectFormatter();
  $formatter->setClass(SchedulePeer::OM_CLASS);
  $schedules = $formatter->format($stmt);

  // more stuff here ... 
} 
```

这个问题分为几个部分，因为可能有更好的方法来做到这一点 - 所以除了回答我的具体问题之外，请随时提出建议：

*   我正在使用`HAVING`而不是，`WHERE`以便我可以使用别名列`dueDate`，我想将其用作检查和订单的一部分，并将其作为结果集的一部分返回以供以后使用。有没有办法获取这个值但仍然为推进对象补水？当我使用`fetch()`或其他 PDO 方法时，`$stmt`我不能再通过调用`format()`.
*   或者，有没有更好的方法来使用纯 Propel 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:46:58.770

您应该添加一些步骤。这是逻辑过程：

1.  不包含额外列的 SQL 调用
2.  水合对象
3.  SQL 调用额外列的返回值
4.  使用额外的列值更新水合对象

希望这可以帮助。干杯。

# vb.net - 在 Vb.Net 中自动生成 XML 注释

> ID：13269307
> 
> 赞同：7
> 
> 时间：2012-11-07T11:57:53.660
> 
> 标签：vb.net, visual-studio-2010, xml-comments

我最近从 vb.net 中的 c#.net 转向编码

在 c# 中，我可以`///`超越任何类/方法，Visual Studio 会自动为我生成 xml 注释正文。

例子

```
 /// <summary>
        /// 
        /// </summary>
        /// <param name="bar"></param>
        void foo(string bar)
        {

        } 
```

如何在我的 vb.net 项目中获得相同的行为

我已经尝试`'''`进入或空间，但它什么也没做。我对两个项目使用相同的 IDE

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T13:24:38.380

您需要在项目菜单中设置“生成 XML 文档文件”，点击属性，编译页面。然后输入'''就可以了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-10T12:56:52.257

只需按 ' 按钮 3 次即 '''

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T18:25:03.010

当我读到这篇文章并想知道为什么它对我不起作用时，因为上面解释的已经检查了 C#。

我没有意识到这似乎也适用于 Visual Basic。我取消选中该选项并重新检查它并且它有效。

如果您安装任何可能允许片段或代码功能自动化的插件可能会影响这一点，因为我为 VB 重构安装了 Code Rush，它可能会覆盖我的设置，但现在已修复。

# sql - 在一个语句中对同一字段进行多个 SELECT

> ID：13269314
> 
> 赞同：3
> 
> 时间：2012-11-07T11:58:07.780
> 
> 标签：sql, sqlite

我得到了下表：

```
**stats**

id INT FK
day INT    
value INT 
```

我想创建一个 SQL 查询，它将在一个语句中对最后一天、上周和上个月的 value 列中的值求和。

到目前为止，我得到了这个：

```
select sum(value) from stats as A where A.day > now() - 1
union
select sum(value) from stats as B where B.day > now() - 7
union
select sum(value) from stats as C where C.day > now() - 30 
```

这仅返回第一个总和（值），我期望返回 3 个值。

运行：`select sum(value) from stats as A where A.day > now() - X ( Where x = 1/7/30)`在不同的查询中正常工作。

查询有什么问题？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T12:07:08.673

`UNION`是隐式不同的。`UNION ALL`像这样使用：

```
SELECT 'last day' ItemType, sum(value) FROM stats as A WHERE A.day > now() - 1
UNION ALL
SELECT 'last week', SUM(value) FROM stats as B WHERE B.day > now() - 7
UNION ALL
SELECT 'last month', SUM(value) FROM stats as C WHERE C.day > now() - 30 
```

**请注意：**我添加了一个新列`ItemType`来指示总和值的类型是`last day`，`last week`还是`last month`

# sql - SQL 选择语句

> ID：13269317
> 
> 赞同：0
> 
> 时间：2012-11-07T11:58:22.290
> 
> 标签：sql, sqlplus

我在为以下请求编写 SQL 语句时遇到了一些麻烦：“查找在电影中和在同一部电影的翻拍中表演的演员”。

这三个表是'films'、'remakes'和'casts'：电影属性：filmid、filmname、年份，导演重拍属性：filmid、title、年份、priorfilm、priortitle、previousyear casts属性：filmid、filmname、actor

到目前为止，我知道priorfilm属性应该与正在测试的电影的filmid相对应，所以我从这个开始：

```
select actor
from casts, remakes, actors
where casts.filmid = remakes.priorfilm 
```

但我不知道我应该如何进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:02:59.213

这有点令人困惑，因为您的 SQL 中有一个“演员”表，它不在指定的三个 zyou 中......

尝试：

```
select c.actor
from casts c, 
join films f on c.filmid = f.filmid
join remakes r on r.priorfilm = f.filmid
join casts c2 on c.actor = c2.actor and r.filmid = c2.filmid 
```

请注意，演员表必须被连接两次。

# java - Eclipse Java - 包名无效 - 包名中的保留字

> ID：13269318
> 
> 赞同：18
> 
> 时间：2012-11-07T11:58:25.760
> 
> 标签：java, android, eclipse, package

我在一个 android 项目的中间，并试图在其中创建一个新包。

```
com.mycompany.myprojectname.new 
```

好吧，Eclipse 不允许我创建它并显示此错误：

> 包名无效。'new' 不是有效的 Java 标识符

我从来不知道包名有保留字，我们不能使用。我的问题是；

1.  这是Eclipse的事情吗？还是Java的东西？我尝试了一个纯 Java 项目（不是 Android），只是为了检查，但我也遇到了同样的错误。
2.  还有哪些不允许的保留字？
3.  有这方面的文件吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-07T12:00:30.820

是的，这是一般 Java 的事情。

[保留字列表可在此处](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/_keywords.html)找到。他们是：

> ```
> abstract  continue    for         new         switch
> assert    default     goto        package     synchronized
> boolean   do          if          private     this
> break     double      implements  protected   throw
> byte      else        import      public      throws
> case      enum        instanceof  return      transient
> catch     extends     int         short       try
> char      final       interface   static      void
> class     finally     long        strictfp    volatile
> const     float       native      super       while 
> ```

[如果在包命名教程](http://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html)等地方找到保留字不能在包名称中使用这一事实的文档。

权威来源（一如既往）[是 Java Language Specification](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)，特别是：

*   [§ 3.9 关键字](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.9)和
*   [§ 3.8 标识符](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.8)

    > 标识符不能与关键字 ( [§3.9](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.9) )、布尔文字 ( [§3.10.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.3) ) 或空文字 ( [§3.10.7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.7) ) 具有相同的拼写（Unicode 字符序列），否则会发生编译时错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T12:00:44.123

请参阅此处的文档：

[http://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html](http://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html)

> 在某些情况下，互联网域名可能不是有效的软件包名称。如果域名包含连字符或其他特殊字符，如果包名以数字或其他非法用作 Java 名称开头的字符开头，或者 **如果包名包含保留的 Java 关键字**，则会发生这种情况，比如“int”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T12:00:34.133

`new`是一个java关键字。用其他词代替它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-12T08:27:23.707

YMMV 但要小心命名包`target`；可能会弄乱您的代码存储库和/或 IDE

# extjs - 强制之前编辑和编辑都在控制器中工作？

> ID：13269321
> 
> 赞同：1
> 
> 时间：2012-11-07T11:58:39.450
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

我正在使用 Extjs 4.1.1。因为我遵循 MVC，所以我决定从网格中移动 'edit' 和 'beforeedit' 函数（rowEditing 插件），即：

```
listeners: {'edit': function(editor, e) {
    ...
    },'beforeedit': function(editor, e) {
    ...
    }} 
```

并将其放入控制器中，就像： [Ext JS 4 - How to control rowEditor inside controller](https://stackoverflow.com/questions/11914525/ext-js-4-how-to-control-roweditor-inside-controller)

我的新代码如下所示：

```
init: function() {

    this.control({          

        'myGrid': {
            edit: this.onRowEdit
        },

        'myGrid': {
            beforeedit: this.onRowBeforeEdit
        },

    });

},

onRowEdit: function(editor, e) {
    ... // Fires only when 'beforeedit' not present in this.control
},

onRowBeforeEdit: function(editor, e) {
    ... // Always fires
}, 
```

现在，'beforeedit' 触发良好。我的问题是只有在不存在“beforeedit”时才会触发“edit”。有人有同样的问题吗？当然，像旧网格监听器这样的方式对两者都适用。

**编辑** 我刚刚观察到，如果我在 this.control() 中首先定义“beforedit”，然后定义“编辑”，则“beforeedit”是不触发的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T12:44:43.367

将它们放在同一个选择器中：

```
init: function() {

    this.control({          

        'myGrid': {
            edit: this.onRowEdit,
            beforeedit: this.onRowBeforeEdit
        }    
    });

} 
```

如果我这样做，那也是同样的问题：

```
var name = {
   first: 'John',
   first: 'Doe'
};
alert(name.first); //will show a messagebox with 'Doe' 
```

# c# - Ninject .Net 3.5 SOAP Web 服务问题

> ID：13269324
> 
> 赞同：1
> 
> 时间：2012-11-07T11:58:42.360
> 
> 标签：c#, asp.net, web-services, .net-3.5, ninject

这是我第一次在这里发帖，相信我，我已经从高处和低处搜索了我的问题的答案，但收效甚微。

背景：我目前已经开始尝试重构我们现有的 SOAP Web 服务（.Net 3.5），以便使用 Ninject 进行一些 IOC 和 DI。我有一个 CacheManager，我试图在 web 方法中初始化它，但是注入似乎没有启动。

我有一个控制台应用程序，它使用以下内容调用 Web 服务：

```
static void Main(string[] args)
    {
        TestService service = new CachingService.TestService();

        DataResult result = service.GetSomething(1);
    } 
```

网络服务如下：TestService.asmx.cs

```
[WebMethod(Description = "Get something")]
public DataResult GetSomething(int param)
{
    try
    {
        return this.CacheManager.Get();
    }
    catch (Exception ex)
    {
        throw;
    }
} 
```

Base.cs（TestService.asmx.cs继承Base初始化CacheManager）

```
public class Base
{
    [Inject]
    public ICacheManager CacheManager
    {
        get
        {
            if (cacheProxy == null)
            {
                cacheProxy = new CacheProxy();
            }
            return cacheProxy.CacheManager;
        }
    }  
} 
```

缓存代理.cs

```
public class CacheProxy
{
    [Inject]
    public ICacheManager CacheManager { get; set; }
} 
```

缓存管理器.cs

```
public class CacheManager : ICacheManager
{
   //implements iCacheManager methods
} 
```

App_Start/NinjectWebCommon.cs

```
private static void RegisterServices(IKernel kernel)
    {
kernel.Bind<ICacheManager>()
            .ToMethod(x => x.Kernel.Get<ICacheManagerFactoryBuilder>().GetCacheManagerFactory().CreateCacheManager())
            .InRequestScope();
} 
```

CacheManagerFactoryBuilder.cs

```
public class CacheManagerFactoryBuilder : ICacheManagerFactoryBuilder
{
    private ICacheManagerFactory _Factory;

    public CacheManagerFactoryBuilder(ICacheManagerFactory factory)
    {
        _Factory = factory;
    }

    public ICacheManagerFactory GetCacheManagerFactory()
    {
        return _Factory;
    }
} 
```

CacheManagerFactory.cs

```
public class CacheManagerFactory : ICacheManagerFactory
{
    private readonly ICacheManager Manager;

    public CacheManagerFactory(ICacheManager manager)
    {
        if (this.Manager == null)
        {
            this.Manager = manager;
        }
    }

    public ICacheManager CreateCacheManager()
    {
        return this.Manager;
    }

} 
```

每次我运行控制台应用程序并点击**GetSomething**时，**CacheManager**为空。为什么当我调用 web 方法时没有发生注入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:24:53.537

团队的另一位成员最终在这里的另一个线程中偶然发现了这一点：

[如何在 asp.net Web 窗体上实现 Ninject 或 DI？](https://stackoverflow.com/questions/4933695/how-can-i-implement-ninject-or-di-on-asp-net-web-forms)

我所缺少的只是在我的 TestService Web 服务类上继承 WebServiceBase！

# sql - SQL 比较表中的信息

> ID：13269327
> 
> 赞同：0
> 
> 时间：2012-11-07T11:59:00.063
> 
> 标签：sql, compare, temp

我想知道如何比较两条信息，例如我的查询中有两列：`surname`和`forename`. 我如何检查列中是否`forename`存在，`surname`反之亦然？

到目前为止，我已经创建了两个临时表，一个只选择`surname`，另一个选择所有其他信息。我打算通过加入来比较它们，但我没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:03:48.363

就像是：

```
Select u1.Surname, u1.Forename,
    (select count(0) from users u2 where u1.surname = u2.forename) as CountWhereForenameEqualsMySurname,
     (select count(0) from users u2 where u1.forename = u2.surname ) as CountWhereSurnameEqualsMyForename
    From users u1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:41:07.023

在不知道表结构的情况下，编写查询有点困难。但我会做这样的事情；根据`surname`等于. 将表连接到自身`forename`。

```
SELECT
    t1.forename as foreName1,
    t1.surname as surName1,
    t2.forename as foreName2,
    t2.surname as surName2
FROM
    tableName as t1 INNER JOIN tablename as t2
        ON
            t1.surname = t2.forename 
```

# php - !$festive 是否与 $festive==FALSE 相同？

> ID：13269330
> 
> 赞同：2
> 
> 时间：2012-11-07T11:59:03.940
> 
> 标签：php, boolean, logical-operators

我对几行 PHP 有疑问。

我有以下代码：

```
// returns TRUE if a day is festive, FALSE otherwise
$festive = isFestive();
// 
$workingDay = $d>0 && !$festive; 
```

`$workingDay = $d>0 && !$festive`和写作一样吗`$workingDay = $d>0 && $festive==FALSE;`？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:02:28.067

是的。如果你改为这样做，那就不同了：`$festive === FALSE`因为在这种情况下，`$festive`“假”的值不会返回真，因为它们不完全是假的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:09:03.693

这完全是关于数据类型以及 PHP 如何将非布尔类型的不同值视为“假”。查看以下代码片段来说明这一点：

```
<?php
$test = false;
$test2 = null;
$test3 = 0;
$test4 = '';
$test5 = array();

var_dump($test == false);
var_dump($test2 == false);
var_dump($test3 == false);
var_dump($test4 == false);
var_dump($test5 == false);

var_dump($test === false);
var_dump($test2 === false);
var_dump($test3 === false);
var_dump($test4 === false);
var_dump($test5 === false); 
```

结果输出（格式化）：

```
bool(true)
bool(true)
bool(true)
bool(true)
bool(true)

bool(true)
bool(false)
bool(false)
bool(false)
bool(false) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T12:09:27.547

任何`if()`表达式都被评估为要么`false`要么`true`。如果表达式不是显式布尔值，则将其转换为布尔值，然后进行评估。[下面是 PHP 如何将某些类型转换为 boolean](http://www.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting)的。一般来说，如果 value (numeric, non-boolean)**不为零**，则认为是`TRUE`。[请参阅此文档](http://www.php.net/manual/en/language.expressions.php)以了解有关 PHP 如何评估表达式的更多信息。

因此，在您的情况下`$d>0`，根据`$d`实际值评估为布尔值，而对于`!$festive`首先`$festive`转换为布尔值然后取反 ( `!`，即如果`$festive`是数字值`2`，则将其转换为`TRUE`(非零)，然后取反，因此`!$festive`表达式评估为`FALSE`.

附加说明：由于您的逻辑条件是`AND`( `&&`)，因此 if`$d>0`被评估为`false`将不会**被**`!$festive`评估，因为布尔代数`false && <anything>`总是。 **`false`**

# ios - 如何从 Mac OS 完全卸载 Xcode 4..3.3

> ID：13269333
> 
> 赞同：-1
> 
> 时间：2012-11-07T11:59:20.873
> 
> 标签：ios, xcode

> **可能重复：**
> [卸载 Xcode 4.3](https://stackoverflow.com/questions/9478410/uninstalling-xcode-4-3)

请建议我如何从我的 Mac 上完全卸载 Xcode 4.3.3。我在终端“sudo /Developer/Library/uninstall-devtools –mode=all”上尝试过这个命令，但它不起作用。谁能建议我如何完成它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:01:10.583

您可以通过**将其移至 Trash**来做到这一点。不需要卸载脚本，因为 Xcode 4.3 捆绑为单个应用程序。

# php - Yii 格式文本字段日期时间模型

> ID：13269342
> 
> 赞同：2
> 
> 时间：2012-11-07T11:59:51.833
> 
> 标签：php, yii

`$model->datetime`是`d-m-Y H:i:s`。_

```
<?php echo $form->textField($model,'datetime'); ?> 
```

我想输入的值只是 dmY，我该如何格式化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T12:22:34.507

一种选择是将日期转换为人类可读的格式以显示它，然后在保存之前恢复为数据库所需的格式。您可以在模型中编辑/创建`afterFind()`方法以将日期转换为人类可读的格式，如下所示：

```
public function afterFind()
{
    $newDate = DateTime::createFromFormat('d-m-Y H:i:s', $this->datetime);
    $this->datetime = $newDate->format('d-m-Y');

    return parent::afterFind();
} 
```

再次通过编辑/创建模型的`beforeSave()`方法进行保存之前，例如：

```
public function beforeSave()
{
    $newDate = DateTime::createFromFormat('d-m-Y', $this->datetime);
    $this->datetime = $newDate->format('d-m-Y H:i:s');

    return parent::beforeSave();
} 
```

请注意，当您保存时，在上面的示例中，小时、分钟和秒将始终为 0。您还需要进行一些验证以确保您的用户输入也是正确的 dmY 格式，否则日期转换将不起作用。

*修正错字newdate->newDate

# magento - 无法直接从产品页面下载可下载产品文件夹中的文件

> ID：13269345
> 
> 赞同：1
> 
> 时间：2012-11-07T12:00:10.570
> 
> 标签：magento, magento-1.7

我创建了一些可下载的产品并添加了一个 mp3 文件作为产品。

现在，我希望用户能够通过单击链接在 view.phtml 中的产品页面上执行此操作，而不是通过结帐来下载文件

我遇到的问题是我似乎无法下载此可下载文件夹中的文件

```
 media/downloadable/files/links/t/o/toast_to_the_dead_-_immortal_technique.mp3 
```

如果我将该曲目移动到 media/filename.mp3 ..或者甚至在所见即所得文件夹中，那么我可以使用我的脚本下载它。我已经检查了文件权限等，它们很好，所以我不知道为什么我不能下载我的文件。

有人知道吗？或者有没有办法可以将文件夹从可下载更改为其他内容，因为我只需要可下载的产品就是音乐文件。

干杯

编辑：我还应该补充一点，我正在获取下载框来保存文件，具有正确的文件名和路径，它只是文件是 523 字节，我使用下面的代码来获取文件路径

```
 $mediaUrl = Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_MEDIA);
    $_linkpath = $mediaUrl."downloadable/files/links".$_link->getLinkFile(); 
```

如果我要将链接路径更改为 $mediaUrl."filename.mp3" 等，那么它将下载..所以在我看来，它是导致问题的可下载文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:31:10.030

没关系我已经解决了这个问题，我只是将 $_linkpath 更改为

```
 $_linkpath = "media/downloadable/files/links".$_link->getLinkFile(); 
```

完整的网址导致了问题

# android - Android - 由于缓存而出现奇怪的渐变图像？

> ID：13269348
> 
> 赞同：0
> 
> 时间：2012-11-07T12:00:28.580
> 
> 标签：android, android-layout

当从我们的机器发布时，我们中的一些人看到我们的按钮出现奇怪的渐变。它是一个带有黑角的蓝色圆圈。有人告诉我这可能是由于某种缓存问题，但我不知道如何摆脱它。

在别人的机器上构建相同的代码消除了这个问题。

我已经删除了 R 文件，但这没有用。

# c++ - 结构指针的优先级队列

> ID：13269352
> 
> 赞同：7
> 
> 时间：2012-11-07T12:00:34.380
> 
> 标签：c++, stl, priority-queue

我知道有类似的线程，但是在花了一个小时试图强制我的程序工作之后，我决定寻求帮助。首先。我认为我对 c++ 非常了解，因为我尝试了一些在 PHP 中非常简单的东西（我最了解的编程语言）但在 c++ 中非常复杂（至少对我来说非常复杂）。所以我想创建结构指针的priority_queue。很明显，我需要创建自己的比较函数。所以我尝试了这段代码：

```
#include <iostream>
#include <list>
#include <queue>

using namespace std;

typedef struct MI
{
    int nr;
    int koszt;
    bool operator<(const MI& a, const MI& b) {
      return a.koszt > b.koszt;
}
} miasto, *miasto_wsk;

int main()
{
    priority_queue<miasto_wsk> q;
    miasto_wsk mi;
    mi = new miasto;
    mi->nr = 1;
    mi->koszt = 2;
    q.push(mi);
} 
```

当我尝试编译我的程序时，我最终遇到了编译错误：

```
test.cpp:11:44: error: ‘bool MI::operator<(const MI&, const MI&)’ must take exactly one argument 
```

你能解释一下我做错了什么，并解释一下所有这些与结构比较的东西是如何工作的（或者给我一个很好的教程/文章，从一开始就解释这一点）

**编辑：**

我将代码更改为：

```
#include <iostream>
#include <list>
#include <queue>

using namespace std;

typedef struct miasto 
{
    int nr;
    int koszt;
} *miasto_wsk;

bool myComparator(miasto_wsk arg1, miasto_wsk arg2) {
      return arg1->koszt < arg2->koszt; //calls your operator
}

int main()
{
    priority_queue<miasto_wsk, vector<miasto_wsk>, myComparator> q;
    miasto_wsk mi;
    mi = new miasto;
    mi->nr = 1;
    mi->koszt = 2;
    q.push(mi);
} 
```

现在我收到此错误消息：

```
test.cpp: In function ‘int main()’:
test.cpp:19:64: error: type/value mismatch at argument 3 in template parameter list for ‘template<class _Tp, class _Sequence, class _Compare> class std::priority_queue’
test.cpp:19:64: error:   expected a type, got ‘myComparator’
test.cpp:19:67: error: invalid type in declaration before ‘;’ token
test.cpp:24:7: error: request for member ‘push’ in ‘q’, which is of non-class type ‘int’ 
```

问题是什么？也许我应该使用结构的副本而不是指向结构的指针？

**编辑2**

此代码不会产生任何编译错误：

```
#include <iostream>
#include <list>
#include <queue>

using namespace std;

typedef struct miasto 
{
    int nr;
    int koszt;
    bool operator< (const miasto& rhs)
    {
    koszt > rhs.koszt;
    }
} *miasto_wsk;

int main()
{
    priority_queue<miasto_wsk> q;
    miasto_wsk mi;
    mi = new miasto;
    mi->nr = 1;
    mi->koszt = 22;
    q.push(mi);
} 
```

所以@Angew 的想法似乎是错误的。

**EDIT3：** 这是我的最终代码。它不仅编译没有错误，而且完全符合我的要求。非常感谢@Angew

```
#include <iostream>
#include <list>
#include <queue>

using namespace std;

typedef struct miasto 
{
    int nr;
    int koszt;
} *miasto_wsk;

struct MyComparator {
    bool operator() (miasto_wsk arg1, miasto_wsk arg2) {
        return arg1->koszt > arg2->koszt; //calls your operator
    }
};

int main()
{
    //priority_queue<miasto_wsk, vector<miasto_wsk>, myComparator> q;
    priority_queue<miasto_wsk, vector<miasto_wsk>, MyComparator> q;
    miasto_wsk mi;
    mi = new miasto;
    mi->nr = 1;
    mi->koszt = 22;
    q.push(mi);
    miasto_wsk mi1;
    mi1 = new miasto;
    mi1->nr = 2;
    mi1->koszt = 50;
    q.push(mi1);
    miasto_wsk mi2;
    mi2 = new miasto;
    mi2->nr = 3;
    mi2->koszt = 1;
    q.push(mi2);

    cout << q.top()->koszt << endl;
    q.pop();
    cout << q.top()->koszt << endl;
    q.pop();
    cout << q.top()->koszt << endl;
    q.pop();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T12:12:43.067

这里有多个问题。

当你在一个类中定义一个操作符时，它会自动接受一个类类型的参数作为它的第一个参数，你不能为它创建一个参数。因此，您要么将运算符保留在类中，如下所示：

```
struct MI {
  bool operator< (const MI&);
}; 
```

或将运营商声明为独立的：

```
struct MI {
  //...
};
bool operator< (const MI&, const MI&); 
```

其次，您`priority_queue`存储指向 的指针`MI`，而不是 的实例`MI`，因此无论如何都不会调用运算符。定义优先级队列时必须提供比较器，如下所示（已**编辑**）：

```
struct MyComparator {
  bool operator() (miasto_wsk arg1, miasto_wsk arg2) {
    return *arg1 < *arg2; //calls your operator
  }
};

int main() {
  priority_queue<miasto_wsk, vector<miasto_wsk>, MyComparator> q;
  //...
} 
```

第三只是样式问题：我建议您直接命名该类，`miasto`而不是仅将其命名为`typedef`. 在 C++ 中它更自然。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T12:05:59.890

如果你再读一遍，这个错误会告诉你究竟出了什么问题：该`MI::operator<`函数应该只接受一个参数而不是两个。

如果您`operator<` *在*类中有（就像您一样），那么该函数只接受一个参数，那就是要与之比较的另一个对象`this`。如果你创建`operator<`为一个*独立的*函数（即不是类的一部分），那么它必须有两个参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T12:07:32.057

您的比较运算符是一个成员函数，因此对于 RHS，它应该只接受一个参数：

```
bool operator<(const MI& rhs) {
      koszt > rhs.koszt;
} 
```

另一种选择是将其声明为非成员函数：

```
struct MI {};

bool operator<(const MI& a, const MI& b) {
      return a.koszt > b.koszt;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-07T12:07:05.087

使用friend关键字将运算符<放在全局范围内

```
typedef struct MI
{
    int nr;
    int koszt;
    friend bool operator<(const MI& a, const MI& b) 
    {
      return a.koszt > b.koszt;
    }
} miasto, *miasto_wsk; 
```

# javascript - getElementById 在函数内部，但来自外部

> ID：13269353
> 
> 赞同：0
> 
> 时间：2012-11-07T12:00:35.310
> 
> 标签：javascript, getelementbyid

我一直在学习关于函数、返回、id 和所有东西的非常简单的东西，所以我遇到了另一个看起来很简单的问题，但我不明白为什么会这样。检查此代码：

```
function test() {
    var text = document.createTextNode("Hello");
    text.id = "t";
    }

var whatIjustwrote = window.document.getElementById("t");
alert(whatIjustwrote);​ 
```

是否`getElementById`有仅查找全局项目的限制？使该警报输出函数内的文本节点的方法是什么？

感谢您的任何评论。最近几天在这里问东西我学到了很多东西！

[JSFiddle](http://jsfiddle.net/zDa2h/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T12:03:48.507

首先，[`getElementById`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)只会返回一个*元素*，并且您正在创建一个文本节点。

其次，它只会返回一个已添加到 DOM 的元素。您创建的节点不会被添加到 DOM 中，因此即使可以找到它也不会被找到。

最后，您实际上并没有调用该`test`函数，因此文本节点甚至没有在内存中创建。

这是一个[更新的小提琴](http://jsfiddle.net/jamesallardice/zDa2h/2/)，演示了`getElementById`实际工作：

```
function test() {
    var text = document.createElement("span"); //Create an element
    text.innerHTML = "Hello";
    text.id = "t";
    document.body.appendChild(text); //Add it to the DOM
}

test(); //Invoke the function (so the element actually gets created)
var yourElement = document.getElementById("t"); //Get reference to element 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T12:03:35.450

`getElementById`只搜索*元素*节点。您确实创建了一个既没有属性也没有 id 的文本节点 - 您只是向 JS 对象添加了一个自定义属性。此外，您没有将节点附加到文档中，因此无法在 DOM 树中找到它。

您可能想阅读[DOM 的介绍（在 MDN）](https://developer.mozilla.org/en-US/docs/Gecko_DOM_Reference/Introduction)、[quirksmode.org 上的介绍，](http://www.quirksmode.org/dom/intro.html)甚至是[W3 标准本身](http://www.w3.org/TR/dom/)（尤其是[介绍部分](http://www.w3.org/TR/DOM-Level-3-Core/introduction.html)）

```
function test() {
    var elem = document.createElement("span"); // Create an element
    var text = document.createTextNode("Hello"); // Create a textnode
    elem.appendChild(text); // add text to the element
    elem.id = "t"; // assign id to the element
    document.body.appendChild(elem); // Add it to the DOM
}
test();

var yourElement = document.getElementById("t"); // Get the element from the DOM
alert(yourElement.textContent); // alerts "Hello"
// you also could have alerted yourElement.firstChild.data - the content of the 
// textnode, but only if you had known that yourelement really has a firstchild 
```

（[在 jsfiddle.net 上的演示](http://jsfiddle.net/zDa2h/10/)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T12:04:46.233

> getElementById 是否有仅查找全局项目的限制？

答案是不。首先，无论如何您都必须定义全局项目。任何附加到 DOM 的东西实际上都是全局的，就全局 javascript 对象而言，在浏览器的情况下只有一个窗口。您正在创建一个函数，但您从未执行它。

此外，文本节点实际上不能有 id 或任何其他属性。为此，您需要一个元素，因此即使您执行该函数，您仍然会得到空值。此外，创建节点不会附加到`DOM`，因此即使这不是文本节点，您也无法访问它。

我已经更新了你的[小提琴](http://jsfiddle.net/zDa2h/6/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T12:08:31.727

想到几点..

1）你不能给 textNode 一个 id 属性（你实际上是给它一个名为 id 的新成员变量） 2）要找到一个元素，它必须存在于文档的 DOM 中

改为这样做：

```
var mSpan = document.createElement('span');
mSpan.id = 't';
mSpan.appendChild( document.createTextNode('Hello') );
document.body.appendChild(mSpan);

var whatIjustwrote = window.document.getElementById("t");
alert(whatIjustwrote.innerText); 
```

# java - 如何从android中的servlet读取对象

> ID：13269354
> 
> 赞同：0
> 
> 时间：2012-11-07T12:00:34.873
> 
> 标签：java, android, servlets

我正在开发一个必须与 servlet 对话才能访问数据库的 android 应用程序。我想将对象从 servlet 传递到我的 android 应用程序。

这是我发送对象的 servlet 代码。

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // TODO Auto-generated method stub      
    response.setContentType("text");

    String id = request.getParameter("id");
    try {
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        java.sql.Connection con= DriverManager.getConnection("jdbc:odbc:Database");
        Statement statement = con.createStatement();

        PrintWriter p = response.getWriter();

        ResultSet rs = statement.executeQuery("select * from employee where PS="+id);

        while(rs.next()){
            Employee e = new Employee();
            e.setId(rs.getString("ID"));
            e.setPs(String.valueOf(rs.getDouble("PS")));
            e.setName(rs.getString("Emp_name"));
            e.setDept(rs.getString("Dept"));

            ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
            ObjectOutputStream objectOutputStream = new ObjectOutputStream(outputStream);
            objectOutputStream.writeObject(e);

        }

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

我应该如何在我的 android 应用程序中读取对象。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-09T10:08:25.537

那么你可以做各种各样的事情来解决这个问题

[a)在这里](http://www.oracle.com/technetwork/java/dataaccessobject-138824.html)使用 DAO 实践阅读它以理解它基本上它将代码的实现分为不同的段和类，以方便您使用。但是，如果您不想经历所有这些麻烦，您可以做一些类似的事情。a.) 创建一个单独的 java 类，在其中编写处理 Db 的所有方法，例如 insert、select 等。例如，如果您在用户中登录……那么方法将是这样的……

```
public int AuthenticateUser(String un, String pw, String phn) {
        System.out.println("I m in this method");
        Connection conn = (Connection) DBConnection.getInstance().getConnection();
        Statement pstmt = null;
        ResultSet rs = null;

        if (conn == null) {
            System.out.println("Connection error");
            check = -1;

        }

        try {
            String authenticatequery = "SELECT * FROM users WHERE uname = '"+un+"' && password =  '"+pw+"' && phoneno = '"+phn+"'";

            System.out.println(authenticatequery);
            pstmt = conn.createStatement();
            rs = pstmt.executeQuery(authenticatequery);
            System.out.println("I m in above try catch");

            // pstmt = conn.prepareStatement(authenticatequery);

            // rs = pstmt.executeQuery(authenticatequery);

            if (rs.next()) {
                System.out.println("I am in rs method");
                UserInfo  info = new UserInfo();
                rs.getString(1);
                rs.getString(2);
                rs.getString(3);
                //info.setUsername(rs.getString(un));
                System.out.println("i have the username" + un);
                //info.setPassword(rs.getString(un));
                System.out.println("I have got the password " + pw);

                System.out.println("I have got the password " + phn);

                System.out.println("User Exist");
                check = 1;
            } else {

                System.out.println("No user found");
                check = 0;
            }

            // rs.close();
            // pstmt.close();
            // conn.close();
        } catch (SQLException e) {
            // TODO: handle exception
            System.out.println("Exception-internal error");
        } finally {

            if (conn != null) {
                try {
                    conn.close();
                    pstmt.close();
                    conn.close();
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

}
    return check;

} 
```

请注意 int 变量“检查”，如果该方法运行正确，它将返回“1”否则返回“0”。现在您可以使用此检查来获得优势，并通过 servlet 将其发送到您的 android 应用程序，如下所示。

```
protected void process(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub

        //String username = request.getParameter("username");
    //  String password = request.getParameter("password");
        //UserInfo uinfo = new UserInfo();

    // uinfo.setUsername(username);
    // uinfo.setPassword(password);

        System.out.println("I am in process");

        PrintWriter out = response.getWriter();
          String un, pw,phn;

          un = request.getParameter("Usrnm");
          System.out.println(un);
          pw = request.getParameter("pwd");
          System.out.println(pw);

          phn = request.getParameter("phn");
          System.out.println(phn);

            Authenticate auth = new Authenticate();
            int check = auth.AuthenticateUser(un, pw,phn);
            System.out.println("My result is" + check);
          if (check==1){

              out.print(1);
          }  else{
               out.print(0);
              }
              }
    } 
```

在您的 android 应用程序中，您可以使用下面的代码调用响应对象，为通信添加自定义 http 客户端类。

```
response = CustomHttpClient.executeHttpPost("http://192.1..11../HelloWorldServlet/LoginDriverServlet", postParameters); 
```

现在您可以使用响应对象并对其进行塑造以满足您的需求

```
if (res.equals("1")) {

                        Log.e("CHeck4 response","i m here");
                        Log.e("CHeck response", res);
                        //error.setText("Correct Username or Password");
                        Intent intent = new Intent(getApplicationContext(), SetStatus.class);

                        startActivity(intent);
                        setContentView(R.layout.activity_set_status);
                        Toast.makeText(getApplicationContext(), "Loggin In", Toast.LENGTH_LONG).show();
                    } else if(res.equals("0")) {
                        //error.setText("Sorry!! Incorrect Username or Password");
                        Log.e("CHeck3 response", "i m here");
                        Toast.makeText(getApplicationContext(), "Sorry!! Incorrect Username or Password", Toast.LENGTH_LONG).show();
                        Intent intent = new Intent();

                        //Username or Password",Toast.LENGTH_LONG).show();
                    }

Hope you get it..otherwise coments are welcomed :) 
```

# jquery - 将 jquery 动画转换为 CSS3

> ID：13269360
> 
> 赞同：0
> 
> 时间：2012-11-07T12:00:49.343
> 
> 标签：jquery, css, css-transitions

我尝试使用的插件列表：

*   jquery.animate-enhanced.min.js
*   jquery.easing.1.3.js

基本上，我试图将一些 jquery 动画转换为“纯 CSS3 过渡”。

这是我正在处理的代码：

```
$(this).animate({
                    bottom:(docHeight-80),      
                },600,
                'easeOutElastic',
                function(){
                    $(this).animate({
                        bottom:(docHeight-140),      
                    },800);

                }
            ); 
```

有了它，它工作得很好（见[http://jsfiddle.net/5dfCz/](http://jsfiddle.net/5dfCz/)），我现在想在 CSS3 中使用相应的过渡，因为这种动画非常耗费 CPU。

所以，我尝试使用动画增强插件。除了使用 CSS3 之外，此方法有效，当动画/过渡完成时，我的绝对 div 的底部属性不会保留。你可以在这里看到一个 jsfiddle：http: [//jsfiddle.net/2p8Gu/](http://jsfiddle.net/2p8Gu/)

尝试在动画后修复 div 位置给我带来了奇怪的效果，请参见：http: [//jsfiddle.net/cAUt7/](http://jsfiddle.net/cAUt7/)

另外，我已经阅读了增强的插件文档并使用了选项“avoidTransforms”、“useTranslate3d”和“leaveTransforms”，但没有取得更大的成功。

所以，我的问题：

**我怎么能在 CSS3 中做这种动画？**

PS：转换成CSS3后，缓动效果也不再起作用，但我实际上不知道CSS3是否支持这种效果或如何做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T08:26:13.677

你实际上可以用更少的代码使用 CSS3 来做到这一点。您需要的唯一 Javascript 是向元素添加 CSS 类的一行代码。CSS 类将包含执行动画所需的 CSS3 过渡属性。

**示例**（使元素大小增长 1.5 倍）：

```
.someElement {
  -webkit-transition: .5s all linear; // animate all animatable CSS property changes
  -webkit-transform: scale(1);
}
.someElement.enlarged {
  -webkit-transform: scale(1.5);
} 
```

**然后在您的 JS 中执行此操作：**

```
$(".someElement").addClass("enlarged"); // make it big
$(".someElement").removeClass("enlarged"); // make it normal size again 
```

等等。您可以为不透明度、尺寸、位置、填充、边距、颜色（字体、背景等）和大量其他内容设置动画。大多数（但不是全部）属性都支持动画。检查规格和您当地的浏览器供应商，看看哪些是可动画的。

# java - 休眠：无法注册同步

> ID：13269363
> 
> 赞同：0
> 
> 时间：2012-11-07T12:00:55.583
> 
> 标签：java, hibernate, spring-mvc, websphere

在使用 spring + hibenate 和 Websphere 服务器时，我得到了这个异常

```
org.hibernate.TransactionException: Could not register synchronization 
```

spring 配置文件中的休眠属性是

```
<props>
    <prop key="hibernate.dialect">org.hibernate.dialect.DB2Dialect</prop>
    <prop key="hibernate.generate_statistics">true</prop>
    <prop key="hibernate.show_sql">false</prop>
    <prop key="hibernate.connection.datasource">jdbc/jndiName</prop>
    <prop key="hibernate.transaction.factory_class">org.hibernate.transaction.CMTTransactionFactory</prop>
    <prop key="hibernate.transaction.manager_lookup_class">org.hibernate.transaction.WebSphereExtendedJTATransactionLookup</prop>

    <prop key="hibernate.cache.provider_class">org.hibernate.cache.EhCacheProvider</prop>
    <prop key="hibernate.connection.aggressive_release">false</prop>
    <prop key="hibernate.connection.release_mode">after_transaction</prop>
    <prop key="hibernate.connection.autocommit">true</prop>
    <prop key="hibernate.connection.pool_size">5</prop>
    <prop key="hibernate.current_session_context_class">thread</prop>
    <prop key="hibernate.cache.use_query_cache">true</prop>
    <prop key="hibernate.cache.use_second_level_cache">true</prop>  
</props> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:58:20.740

WebSphere 本身处理其数据源的所有池和缓存级别。所有与 JDBC 相关的配置都可以通过 WebSphere 管理控制台执行。所以写

```
<props>
    <prop key="hibernate.dialect">org.hibernate.dialect.DB2Dialect</prop>
    <prop key="hibernate.generate_statistics">true</prop>
    <prop key="hibernate.show_sql">false</prop>
    <prop key="hibernate.connection.datasource">jdbc/jndiName</prop>
    <prop key="hibernate.transaction.factory_class">org.hibernate.transaction.CMTTransactionFactory</prop>
    <prop key="hibernate.transaction.manager_lookup_class">org.hibernate.transaction.WebSphereExtendedJTATransactionLookup</prop>
</props> 
```

春天就够了。

# exe - PSEXEC 命令无法执行带参数的命令

> ID：13269364
> 
> 赞同：-1
> 
> 时间：2012-11-07T12:00:56.450
> 
> 标签：exe, batch-file, psexec

我们如何使用 PSEXEC 命令在不同的机器上执行带有参数的命令。以下命令不起作用

开始 "" psexec \%serverIP% "c:\Windows\Microsoft.NET\Framework64\v2.0.50727\Ldr64.exe" SETWOW -u 管理员 -p Helloworld /accepteula

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:56:31.133

只需在另一个`\`旁边添加另一个`\`。您的示例中 psexec 的简单语法是：

```
psexec \\hostname /accepteula -w C:\WorkingDirectory executable.exe -u accountName -p PassWord 
```

# facebook - Facebook 页面发布链接到页面选项卡 (iframe)

> ID：13269367
> 
> 赞同：2
> 
> 时间：2012-11-07T12:01:02.883
> 
> 标签：facebook, tabs, wordpress, facebook-iframe

我有一个 wordpress 网站，旨在通过 Facebook 页面选项卡使用。我制作了一个页面选项卡并添加了一个 iframe 标记，可将网站打开到页面选项卡中。我添加了一个 Facebook 插件 ( [http://wordpress.org/extend/plugins/facebook/](http://wordpress.org/extend/plugins/facebook/) ) 来将新帖子发布到我的页面墙上，从而获得更多的网站流量。这一切都完美无缺。

我的问题如下：

该插件会发布一个链接，例如 www.mysite.com/fb/new-event/。该站点只能通过页面选项卡使用，而不是在该域中使用。应自定义链接以通过 iframe 在 Facebook 页面选项卡中打开页面。

有谁知道如何解决这个问题或如何以另一种方式实现解决方案？

我认为可以通过将链接自定义为首先指向正确的 Facebook 页面选项卡，然后在 iframe 中指向正确的页面来完成。

# r - 将黄土转换为空间数据

> ID：13269370
> 
> 赞同：0
> 
> 时间：2012-11-07T12:01:12.937
> 
> 标签：r, spatial, polygons

我完全不知道如何将原子向量、列表等转换为空间数据。

我想在地图（nxm 矩阵）上处理多边形中的数据。特别是 loess 和 akima 等函数的输出。例如从 loess 我得到： List of 3

```
 $ x: num [1:112] 656977 657024 657071 657118 657165 ...
 $ y: num [1:82] 661500 661544 661587 661631 661675 ...
 $ z: num [1:112, 1:82] -725 -724 -720 -715 -707 ... 
```

其中 x 和 ya 国家平面坐标，z 是陆地表面和水深测量高程的组合。测深在多边形内部，一些黄土结果溢出多边形外部到矩阵上。我想将多边形之外的所有内容归零。我相信我可以做到这一点，但数据需要是空间坐标。

我怎么做？几个星期以来，我一直在寻找和尝试。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:37:55.173

这是一个相当广泛的问题，所以这里是提示和指针，而不是细节。

R 有许多类型的空间类，但过去几年的事情已经收敛到库 sp 的 Spatial_ *_* _DataFrame 类。

Bivand Applied Spatial Analysis with R 一书有一组详细的示例和内部检查，包括如何创建它们以及如何在各种空间类之间进行转换。

还有一个空间小插图可帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:30:59.067

假设你可以用一个单一的预测器做一个传统的黄土并绘制它......

双向交互可以被认为发生在二维平面上。因此，只需提供 x 和 y 作为交互项，您就应该能够使用一些三维系统绘制黄土函数，即使它就像预测的 z 值是热图中的水平一样。

# java - Freemarker - 电子邮件主题模板中缺少特殊字符导致电子邮件内容崩溃

> ID：13269374
> 
> 赞同：2
> 
> 时间：2012-11-07T12:01:32.627
> 
> 标签：java, spring, email, encoding, freemarker

我与奇怪的错误作斗争。我对邮件主题和正文使用单独的 freemarker 模板。它使用 org.springframework.mail.javamail.JavaMailSender 发送。只有包含一些特殊瑞典语字符的模板才能在我的应用程序中使用（是的，您没看错……不是相反）。如果我删除它，我的电子邮件内容就会崩溃。那么它包含：

```
MIME-Version: 1.0
Content-Type: text/html;charset=UTF-8
Content-Transfer-Encoding: 7bit

..
html code here
.. 
```

我的 freemarker.properties 文件

```
locale=sv_SE
classic_compatible=false

number_format=
date_format=yyyy-MM-dd
time_format=HH:mm
datetime_format=yyyy-MM-dd HH:mm
output_encoding=UTF-8

url_escaping_charset=UTF-8

auto_import=spring.ftl as spring
auto_include=
default_encoding=UTF-8
localized_lookup=true
strict_syntax=true
whitespace_stripping=true
template_update_delay=10 
```

我尝试使用 dos2unix 工具转换主题文件。使用“find -bi subject.ftl”显示编码是 us-ascii。添加了特殊字符 - utf-8。

这件事对我来说很奇怪......

//解决方案：`:set bomb`在vim中使用和保存文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:58:42.663

根据@freakman 的要求，我发表了我的评论作为答案——事实证明它解决了这个问题：

**[将BOM（字节顺序标记）](http://en.wikipedia.org/wiki/Byte_order_mark)**附加到模板文件的开头，以确保它始终被解析为 UTF-8 模板。

作为参考，UTF-8 的 BOM 为：

*   十六进制： `EF BB BF`
*   ISO-8859-1 编码`ï»¿`
*   爪哇：`byte[] bom = { (byte) 0xEF, (byte) 0xBB, (byte) 0xBF};`

# php - 在发票详细信息页面上出现错误

> ID：13269381
> 
> 赞同：0
> 
> 时间：2012-11-07T12:01:55.217
> 
> 标签：php, magento

我最近将 magento 从 1.4.0.1 升级到 1.7.0.2。现在我在发票详细信息页面上遇到错误。

致命错误：在第 151 行对 D:\xampp\htdocs\magento171\app\code\core\Mage\Adminhtml\controllers\Sales\Order\InvoiceController.php 中的非对象调用成员函数 updateBackButtonUrl()

第 151 行的代码是

```
 $this->getLayout()->getBlock('sales_invoice_view')->updateBackButtonUrl($this->getRequest()->getParam('come_from')); 
```

任何人都可以帮忙，如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T11:49:45.583

因为我最近更新了磁电机，有可能会更换控制器或查看文件，所以我用新的新版本替换了所有文件，但问题仍然存在。

然后我从 exception.log 文件中找到

异常“Mage_Core_Exception”，带有消息“请求的付款方式不可用。” 在 D:\Mage.php:594

由于数据库中已经有许多订单和发票记录，所以我假设这些订单和发票的付款方式可能未安装或可能被禁用。所以和老管理员分析比较，这些订单的两种支付方式都没有被系统识别。

1.  亚马逊付款。
2.  有线传输。

与此相关的所有订单在详细页面中都有问题。后来我发现付款存储在“sales_flat_order_payments”表中，该字段是“method”，但是当我看到它有值的字段时。

然后我做了一个技巧并使用电汇和亚马逊支付完成了一些测试订单（我已经为亚马逊支付安装了一个新模块），所以对于电汇现在我可以看到与之相关的发票的详细页面，所以我确定它以前没有打开，我们在与销售和有线转账相关的数据库表中存在冲突，通过执行此交易，冲突得到了解决

对于亚马逊来说，新订单的价值不同，所以我用新的亚马逊支付价值替换了旧价值。

```
UPDATE sales_flat_order_payment SET method='checkoutbyamazon_sandbox' WHERE method='amazonpayments_cba'; 
```

现在所有与亚马逊相关的发票的详细信息页面都没有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:46:46.320

这个按钮在 1.7x 中工作，所以它是您的设置，而不是 Magento 中的错误。要弄清楚发生了什么：

检查没有重写 Mage_Adminhtml_Block_Sales_Order_Invoice_View 的模块，并确保 InvoiceController.php 文件的 app/code/local 中没有副本。

通过“消除过程”，您可以在 app/etc/modules 中禁用添加模块。

还要确保控制器文件和 app/code/core/Mage/Adminhtml/Block/Sales/Order/Invoice/View.php 来自 1.7x 而不是 1.4x。

# java - 播放框架2.0.4文件下载

> ID：13269382
> 
> 赞同：0
> 
> 时间：2012-11-07T12:01:56.533
> 
> 标签：java, playframework, download

我在将文件从播放器发送到浏览器以启动下载时遇到问题。目前这就是我正在做的事情：

```
File sitemap = new File(output);

response().setHeader("Cache-Control", "public");
response().setHeader("Content-Description", "File Transfer");
response().setHeader("Content-Disposition", "attachment; filename=download.xml");
response().setHeader("Content-Type",  "mime/type");
response().setHeader("Content-Transfer-Encoding", "binary");

return ok(new FileInputStream(sitemap)).as("application/xml"); 
```

所有这一切都是将文件的内容打印到控制台。我试过这个并得到相同的结果：

```
return ok(sitemap); 
```

有人知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:39:47.800

我过去也遇到过类似的问题，原因是指向该函数的 URL（在 conf/routes 文件中）以“/”结尾。在路由文件中将 URL 本身更改为以 .xml 结尾会有所帮助，如下所示：

```
GET     /file/download/download.xml controllers.Admin.getDownloadFile() 
```

# css - 使用样式表时 Reportviewer 显示不正确

> ID：13269384
> 
> 赞同：0
> 
> 时间：2012-11-07T12:02:00.987
> 
> 标签：css, report-viewer2010

我在**母版页**内使用**报表查看器**。

 **当我显示它时。**Reportviewer**的控件随处可见（部分显示如图） ![在此处输入图像描述](../Images/89ca5c1c0e124fb8bd5d095ba0b8ef31.png)

经过一些调试后，我发现母版页中使用的样式表导致了这种情况。当我从样式表中删除标签时，报告会完美显示。已删除标签

```
table
{
    width: 90%; 

color: #333333;
margin: 10px 10px 20px;
border-left: 1px solid #cbcbb4;
border-top: 1px solid #cbcbb4;

}

table caption 
{ 
    margin: 10px 0 5px; 
    font-weight: bold;
}

th, td
{
    right: 1px solid #cbcbb4;
    border-bottom: 1px solid #cbcbb4;
    padding: 2px 10px;
} 
```

解决办法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:44:08.150

我不相信除了不要在样式表中使用真正通用的标签之外，还有其他的方法。报表查看器控件根据数据构建一个 html 表格，因此应用于页面的样式表肯定会影响这一点。

这可能对您有帮助：[CSS 帮助 - DIV 如何忽略页面上先前设置的 css？](https://stackoverflow.com/questions/1337653/css-help-how-can-a-div-ignore-css-previously-set-on-the-page)**

# php - 教义备份表

> ID：13269385
> 
> 赞同：0
> 
> 时间：2012-11-07T12:02:04.223
> 
> 标签：php, mysql, pdo, doctrine, doctrine-orm

有什么方法可以在 Doctrine 2 中制作备份表。

我有一个 XML，并且想每天通过 cron 作业导入它。首先，我创建一个以 _new 结尾的新模式。

```
if ($newTables) {
    $tablePastfix = new \DoctrineExtensions\TablePastfix('_new');
    $evm->addEventListener(\Doctrine\ORM\Events::loadClassMetadata, $tablePastfix);
    }

    $entityManager = \Doctrine\ORM\EntityManager::create($conn, $config, $evm);

    if ($newTables) {
    $tool = new \Doctrine\ORM\Tools\SchemaTool($entityManager);
    $classes = array (
        $entityManager->getClassMetadata('MyClasses'),
        $entityManager->getClassMetadata('MyClasses'),
        $entityManager->getClassMetadata('MyClasses'),
    );
        $tool->createSchema($classes);
} 
```

之后，我从 xml 导入数据。没关系，我重命名了表格

```
$dm = Doctrine\DBAL\DriverManager::getConnection($conn);
$sql = "DROP TABLE `mytable_old`;";
$stmt = $dm->query($sql);
$stmt->execute();

$dm = Doctrine\DBAL\DriverManager::getConnection($conn);
$sql = "ALTER TABLE `mytable` RENAME `mytable_old`;";
$stmt = $dm->query($sql);
$stmt->execute();

$dm = Doctrine\DBAL\DriverManager::getConnection($conn);
$sql = "ALTER TABLE `mytable_new` RENAME `mytable`;";
$stmt = $dm->query($sql);
$stmt->execute(); 
```

但是当我想再次导入时，出现以下错误。. . . . :(

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[HY000]: General error: 1005 Can't create table 'databasename.#sql-220_87' (errno: 121)' in /Applications/MAMP/bin/php/php5.3.14/lib/php/Doctrine/ORM/Tools/ToolsException.php on line 33

PDOException: SQLSTATE[HY000]: General error: 1005 Can't create table 'databasename.#sql-220_87' (errno: 121) in /Applications/MAMP/bin/php/php5.3.14/lib/php/Doctrine/DBAL/Connection.php on line 646

Call Stack:
    0.0011     761296   1\. {main}() /path/to/jobs/import.php:0
    0.0014     767024   2\. require_once('/path/to/jobs/config.php') /path/to/jobs/import.php:7
    0.0017     770536   3\. require_once('/path/to/jobs/bootstrap.php') /path/to/jobs/config.php:3
    0.0020     796264   4\. require_once('/path/to/jobs/bootstrap_doctrine.php') /path/to/jobs/bootstrap.php:5
    0.1468    7673040   5\. Doctrine\ORM\Tools\SchemaTool->createSchema() /path/to/jobs/bootstrap_doctrine.php:53
    1.1216    9445080   6\. Doctrine\DBAL\Connection->executeQuery() /Applications/MAMP/bin/php/php5.3.14/lib/php/Doctrine/ORM/Tools/SchemaTool.php:90
    1.1216    9445656   7\. PDO->query() /Applications/MAMP/bin/php/php5.3.14/lib/php/Doctrine/DBAL/Connection.php:646

Doctrine\DBAL\DBALException: An exception occurred while executing 'ALTER TABLE doc_consultant_practice_new ADD CONSTRAINT FK_60C69DE344F779A2 FOREIGN KEY (consultant_id) REFERENCES doc_xml_consultant_new (id) ON DELETE CASCADE':

SQLSTATE[HY000]: General error: 1005 Can't create table 'databasename.#sql-220_87' (errno: 121) in /Applications/MAMP/bin/php/php5.3.14/lib/php/Doctrine/DBAL/DBALException.php on line 47

Call Stack:
    0.0011     761296   1\. {main}() /path/to/jobs/import.php:0
    0.0014     767024   2\. require_once('/path/to/jobs/config.php') /path/to/jobs/import.php:7
    0.0017     770536   3\. require_once('/path/to/jobs/bootstrap.php') /path/to/jobs/config.php:3
    0.0020     796264   4\. require_once('/path/to/jobs/bootstrap_doctrine.php') /path/to/jobs/bootstrap.php:5
    0.1468    7673040   5\. Doctrine\ORM\Tools\SchemaTool->createSchema() /path/to/jobs/bootstrap_doctrine.php:53
    1.1216    9445080   6\. Doctrine\DBAL\Connection->executeQuery() /Applications/MAMP/bin/php/php5.3.14/lib/php/Doctrine/ORM/Tools/SchemaTool.php:90

Doctrine\ORM\Tools\ToolsException: Schema-Tool failed with Error 'An exception occurred while executing 'ALTER TABLE doc_consultant_practice_new ADD CONSTRAINT FK_60C69DE344F779A2 FOREIGN KEY (consultant_id) REFERENCES doc_xml_consultant_new (id) ON DELETE CASCADE':

SQLSTATE[HY000]: General error: 1005 Can't create table 'databasename.#sql-220_87' (errno: 121)' while executing DDL: ALTER TABLE doc_consultant_practice_new ADD CONSTRAINT FK_60C69DE344F779A2 FOREIGN KEY (consultant_id) REFERENCES doc_xml_consultant_new (id) ON DELETE CASCADE in /Applications/MAMP/bin/php/php5.3.14/lib/php/Doctrine/ORM/Tools/ToolsException.php on line 33

Call Stack:
    0.0011     761296   1\. {main}() /path/to/jobs/import.php:0
    0.0014     767024   2\. require_once('/path/to/jobs/config.php') /path/to/jobs/import.php:7
    0.0017     770536   3\. require_once('/path/to/jobs/bootstrap.php') /path/to/jobs/config.php:3
    0.0020     796264   4\. require_once('/path/to/jobs/bootstrap_doctrine.php') /path/to/jobs/bootstrap.php:5
    0.1468    7673040   5\. Doctrine\ORM\Tools\SchemaTool->createSchema() /path/to/jobs/bootstrap_doctrine.php:53 
```

有人知道我的错误或有更好的想法来实现备份表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T04:10:43.917

**由于索引**名称重复，您似乎遇到了问题，为表添加前缀不会为它们添加前缀。您应该为这种功能使用不同的数据库，您可以在之后重命名它或在打开两个连接的情况下同步数据。

# assembly - 为什么 "03 c8" 和 "01 c1" = add ecx, eax

> ID：13269387
> 
> 赞同：5
> 
> 时间：2012-11-07T12:02:13.123
> 
> 标签：assembly, x86

在使用作弊引擎时，我偶然发现这两个操作码都会产生相同的汇编代码：

```
03C8 添加 ecx,eax

```

和

```
01C1 添加 ecx,eax

```

为什么会这样，有什么区别吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-07T12:08:34.750

`01`形式是`add r/m, r`，形式`03`是`add r, r/m`。由于两个操作数都是寄存器，因此可以采用任何一种方式对其进行编码。

# java - 在 JavaFx 中创建数据表

> ID：13269388
> 
> 赞同：2
> 
> 时间：2012-11-07T12:02:15.603
> 
> 标签：java, charts, datatable, javafx

我想创建一个与我的图表相关的表格，其想法是详细显示图表上的信息。

这是我发现的一张图片，可以让您了解应该如何构建它（但是我希望用 JavaFx 制作图形，因此它本身的图形和表格应该更平滑并且具有更好的图形）：

![在此处输入图像描述](../Images/fe8e6f159c03972d84dbc30e3c970323.png)

正如您在图片中看到的，当天 (D1,D2,D3) 下的信息显示在条形下方。我将如何在 JavaFx 中创建类似的东西？

# c++ - 如何使用 SWIG 枚举枚举成员

> ID：13269393
> 
> 赞同：12
> 
> 时间：2012-11-07T12:02:33.907
> 
> 标签：c++, python, swig

我可以将 C++`enum`作为真实实体而不是一组常量公开给 SWIG，以便我可以在 python 代码中枚举它们吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-15T21:08:56.483

我遇到了同样的问题。我希望 SWIG 很快支持 C++11 的`enum class`.

这是说服 SWIG 将枚举放入结构中的 hack：

```
#ifdef SWIG
%rename(MyEnum) MyEnumNS;
#endif

struct MyEnumNS
{
    enum Value { Value1, Value2, Value3 };
};
typedef MyEnumNS::Value MyEnum; 
```

在`.cpp`您现在必须使用`MyEnum::Value1`的代码中，在 Python 代码中它是`MyEnum.Value1`. 尽管令人费解，但`typedef`可以避免更改在任何地方都使用枚举的现有代码，并且 SWIG %rename 使枚举在 SWIG 包装器中具有相同的名称。

在 Python 中，您可以使用一些代码枚举值：

```
def values(enum):
    return [(k,v) for k,v in vars(enum).items() if isinstance(v,int)] 
```

它不漂亮，我希望看到更好的解决方案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-18T16:39:24.977

我们可以制作一些东西，让您在 Python 中枚举它，而对它包装的 C++ 头文件的侵入相对较少。例如，如果我们有一个头文件：

```
#ifndef PYTHON_ENUM 
#define PYTHON_ENUM(x) enum x
#endif

PYTHON_ENUM(TestName) {
  foo=1,
  bar=2
};

PYTHON_ENUM(SomeOtherName) {
  woof,
  moo
}; 
```

它扩展为 C++ 中的常规枚举，但足以作为头文件在 Python 中公开枚举成员。

使用`%typemap(constcode)`我们可以为枚举注入一些额外的东西到我们的 Python 模块中，但是我们需要知道枚举的名称才能做到这一点；它的 SWIG typeinfo 对象就好像它是一个`int`. 因此，我们在`PYTHON_ENUM`宏中使用了一些技巧来将枚举的名称存储在自定义类型映射中。

```
%module test
%{
#include "test.h"
%}

%typemap(constcode) int {
  PyObject *val = PyInt_FromLong(($type)($value));
  SWIG_Python_SetConstant(d, "$1", val);
  const char *name = "$typemap(enum_realname,$1_type)";
  PyObject *e = PyDict_GetItemString(d, name);
  if (!e) PyDict_SetItemString(d, name, e = PyDict_New());
  PyDict_SetItemString(e, "$value", val);
}
#define PYTHON_ENUM(x) \
        %typemap(enum_realname) int "x"; \
        %pythoncode %{ \
        x = _test.x\
        %} \
        enum x

%include "test.h" 
```

这会在中间模块中为每个具有键/值对的枚举创建一个 PyDict。还有一些`%pythoncode`胶水可以将中间模块中的 PyDict 绑定到暴露的模块中。（我不确定如何在其中按名称引用中间模块，除了硬编码为 _test - 根据需要更改）。

这足以让我将其用作：

```
Python 2.7.3 (default, Aug  1 2012, 05:16:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import test
>>> print test.SomeOtherName
{'woof': 0, 'moo': 1}
>>> print test.TestName
{'foo': 1, 'bar': 2}
>>> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T21:57:07.057

我很确定您正在寻找的是...
**typemaps**：由于类型处理对于包装器代码生成非常重要，因此 SWIG 允许用户完全定义（或重新定义）它。为此，使用了一个特殊的 %typemap 指令。(SWIG Doc2.0)

对于你可能需要的关于类型映射的所有信息，这里是 SWIG 文档的链接。 [http://www.swig.org/Doc2.0/Typemaps.html#Typemaps_nn2](http://www.swig.org/Doc2.0/Typemaps.html#Typemaps_nn2)

类型图应该允许你告诉 SWIG 将 c++ 枚举转换为你想要的 python 对象。

# android - FaceDetectionListener 中的 faces.length 始终为 0

> ID：13269394
> 
> 赞同：2
> 
> 时间：2012-11-07T12:02:36.107
> 
> 标签：android, face-detection

尝试使用 Android 4 API 14 人脸识别

Samsung SII 4.0 Face Detection Listener 上的测试代码已注册

```
mCamera.setFaceDetectionListener(new MyFaceDetectionListener()); 
```

它支持人脸识别作为

```
if (params.getMaxNumDetectedFaces() > 0) 
```

返回 35

FaceDetectionListener 的 onFaceDetection 方法面临的问题

```
public void onFaceDetection(Face[] faces, Camera camera) 
{

    } 
```

这里 faces[] 的长度始终为 0，即未检测到人脸。我很困惑没有检测到人脸，那么为什么**会调用 onFaceDetection()**。请帮忙

# java - 从 oracle 检索时修剪时间戳值

> ID：13269404
> 
> 赞同：0
> 
> 时间：2012-11-07T12:03:09.620
> 
> 标签：java, oracle, jsp, jdbc, struts

我在 Oracle DB 中有数据，当我尝试通过 java 程序检索它时，它是一个 TimeStamp 文件，它正在修剪纳秒值和 AM/PM 。

就像在 DB 中一样：-`02-03-11 01:55:10.000000000 AM`
获取时`rs.getTimeStamp()`-`02-03-11 01:55:10.0`

我应该检索完整的时间。

请提供解决方案。

提前致谢 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:05:53.927

您只显示了一个*字符串*表示形式，它正在修剪掉大部分无关紧要的零。*我在这里没有看到实际信息*丢失的迹象。（它看起来像 24 小时字符串表示，所以 AM 是隐含的。）

我建议您尝试使用具有亚秒值（例如）123456789 的时间戳，看看您是否可以正确取回*它*。如果是这样，肯定没有问题。

区分*固有*数据（即时）和该数据的*字符串表示*（“02-03-11 01:55:10.000000000 AM”或“02-03-11 01:55:10.0”）非常重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:07:55.813

尝试通过在数据/时间格式中指定 FF 来强制 oracle 在返回的数据集中提供纳秒作为字符串：

```
SELECT to_char(TIME_STAMP_FIELD,'dd-Mon-yyyy HH24:MI:SS.FF') from TABLE_NAME 
```

# delphi - EArgumentOutOfRangeException 虽然没有改变 TList

> ID：13269430
> 
> 赞同：0
> 
> 时间：2012-11-07T12:04:20.767
> 
> 标签：delphi

我在 Delphi 中还有另一个问题`TList`......我在访问 TList 时遇到了 EArgumentOutOfRangeException，就像我之前所做的一样，在将不同的 TList 打印到控制台之后。

复制并粘贴下面的原始代码 - 没有改变一行

```
Writeln('c: '+inttostr(closed.Capacity)+' |l. 281');
  for i := 0 to open.Capacity-1 do
  begin
    Writeln('open: ' + open[i].startpunkt + open[i].endpunkt +
      IntToStr(open[i].kantenbewertung));
  end;
  Writeln('c: '+inttostr(closed.Capacity));
  Writeln('closed.capacity: '+inttostr(closed.Capacity));
  for i := 0 to closed.Capacity-1 do begin
  Writeln('closed: ' + closed[i].startpunkt + closed[i].endpunkt +
      IntToStr(closed[i].kantenbewertung));
  end; 
```

`Writeln('c: '+inttostr(closed.Capacity)+' |l. 281');`清楚地打印到控制台，-loop`for i := 0 to open.Capacity-1 do begin`也是如此。

控制台输出为：c: 2 |l。281 open: AC3 open: BC4 open: CD6 - 然后有错误消息

应该是 Dijkstra 算法实现的一部分。如果这有帮助。

有人发现我没有发现的错误吗？还是这是一些奇怪的特殊情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T12:14:33.360

[`Capacity`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Classes.TList.Capacity)与实际不同（并且可能更大）[`Count`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Classes.TList.Count)。

# c# - 有没有办法在 ItemAdded 事件中检测页面布局？

> ID：13269431
> 
> 赞同：0
> 
> 时间：2012-11-07T12:04:26.560
> 
> 标签：c#, sharepoint

在我们的 SharePoint 项目中，我们有一个页面布局，用户可以在其中在编辑模式下设置自定义复选框（“显示为新闻”）。现在我们的客户询问我们是否可以将此复选框设置为默认选中。

复选框在布局页面中实现为一个，在站点列定义中`<SharePointWebControls:BooleanField>`具有相应的一个。`<Field Type="Boolean">`

我尝试`<Default>1</Default>`在站点列定义中添加一个，并通过 SiteSettings 更改站点列的默认值，这很有效，并且该复选框默认显示为选中新页面。但是，我们有其他布局也使用该字段（相同的内容类型）并且我们不希望默认检查该值。

所以，我的想法是在创建页面时在事件接收器中设置字段值。接收器被正确调用并且该项目可用，但是我似乎无法找到一种方法来从通过事件属性获得的项目确定页面布局。我尝试直接通过字段访问布局`item["PublishingPageLayout"]`，也尝试将页面作为 PublishingPage 获取，然后调用，`publishingPage.Layout.Name`但在这两种情况下，布局都没有可用值（null）。

如果有人能提出另一种方法来找出布局，我会很高兴。或者也许完全以其他方式来实现我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:44:53.390

实现您想要的其他方式：

基于此创建一个新的内容类型。新内容类型将默认选中复选框，并且仅用于此列表。这样其他布局不会受到影响，并且可以独立工作。

希望这可以帮助？

# objective-c - 使用 OpenCV 在 iOS 中进行透视变换 + 裁剪

> ID：13269432
> 
> 赞同：52
> 
> 时间：2012-11-07T12:04:27.853
> 
> 标签：objective-c, ios, image-processing, opencv, perspective

我正在尝试在即将推出的应用程序中实现裁剪和透视校正功能。在做研究时，我遇到了：

[执行 cv::warpPerspective 以在一组 cv::Point 上进行假偏斜](https://stackoverflow.com/questions/7838487/executing-cvwarpperspective-for-a-fake-deskewing-on-a-set-of-cvpoint)

[http://sudokugrab.blogspot.ch/2009/07/how-does-it-all-work.html](http://sudokugrab.blogspot.ch/2009/07/how-does-it-all-work.html)

所以我决定尝试用 OpenCV 来实现这个特性——框架就在那里，所以安装速度很快。但是，我没有得到我希望的结果：（第二张图片是结果）

![原始照片和裁剪框](../Images/9ea1ec36518a5bbe1370af146709429e.png)

![裁剪照片，效果不佳](../Images/2b53137d2beffe0ff9975d2a9b07aca9.png)

我已经翻译了所有代码以使用 Xcode 并三次检查坐标。你能告诉我我的代码有什么问题吗？为了完整起见，我还包括了 UIImage -> Mat 转换 + 反转：

```
- (void)confirmedImage
{
    if ([_adjustRect frameEdited]) {

    cv::Mat src = [self cvMatFromUIImage:_sourceImage];

    // My original Coordinates
    // 4-------3
    // |       |
    // |       |
    // |       |
    // 1-------2

    CGFloat scaleFactor =  [_sourceImageView contentScale];
    CGPoint p1 = [_adjustRect coordinatesForPoint:4 withScaleFactor:scaleFactor];
    CGPoint p2 = [_adjustRect coordinatesForPoint:3 withScaleFactor:scaleFactor];
    CGPoint p3 = [_adjustRect coordinatesForPoint:1 withScaleFactor:scaleFactor];
    CGPoint p4 = [_adjustRect coordinatesForPoint:2 withScaleFactor:scaleFactor];

    std::vector<cv::Point2f> c1;
    c1.push_back(cv::Point2f(p1.x, p1.y));
    c1.push_back(cv::Point2f(p2.x, p2.y));
    c1.push_back(cv::Point2f(p3.x, p3.y));
    c1.push_back(cv::Point2f(p4.x, p4.y));

    cv::RotatedRect box = minAreaRect(cv::Mat(c1));
    cv::Point2f pts[4];
    box.points(pts);

    cv::Point2f src_vertices[3];
    src_vertices[0] = pts[0];
    src_vertices[1] = pts[1];
    src_vertices[2] = pts[3];

    cv::Point2f dst_vertices[4];
    dst_vertices[0].x = 0;
    dst_vertices[0].y = 0;

    dst_vertices[1].x = box.boundingRect().width-1;
    dst_vertices[1].y = 0;

    dst_vertices[2].x = 0;
    dst_vertices[2].y = box.boundingRect().height-1;

    dst_vertices[3].x = box.boundingRect().width-1;
    dst_vertices[3].y = box.boundingRect().height-1;

    cv::Mat warpAffineMatrix = getAffineTransform(src_vertices, dst_vertices);

    cv::Mat rotated;
    cv::Size size(box.boundingRect().width, box.boundingRect().height);
    warpAffine(src, rotated, warpAffineMatrix, size, cv::INTER_LINEAR, cv::BORDER_CONSTANT);

    [_sourceImageView setNeedsDisplay];
    [_sourceImageView setImage:[self UIImageFromCVMat:rotated]];
    [_sourceImageView setContentMode:UIViewContentModeScaleAspectFit];

    rotated.release();
    src.release();

    }
}

- (UIImage *)UIImageFromCVMat:(cv::Mat)cvMat
{
    NSData *data = [NSData dataWithBytes:cvMat.data length:cvMat.elemSize()*cvMat.total()];
    CGColorSpaceRef colorSpace;
    if ( cvMat.elemSize() == 1 ) {
        colorSpace = CGColorSpaceCreateDeviceGray();
    }
    else {
        colorSpace = CGColorSpaceCreateDeviceRGB();
    }
    CGDataProviderRef provider = CGDataProviderCreateWithCFData( (__bridge CFDataRef)data );
    CGImageRef imageRef = CGImageCreate( cvMat.cols, cvMat.rows, 8, 8 * cvMat.elemSize(), cvMat.step[0], colorSpace, kCGImageAlphaNone|kCGBitmapByteOrderDefault, provider, NULL, false, kCGRenderingIntentDefault );
    UIImage *finalImage = [UIImage imageWithCGImage:imageRef];
    CGImageRelease( imageRef );
    CGDataProviderRelease( provider );
    CGColorSpaceRelease( colorSpace );
    return finalImage;
}

- (cv::Mat)cvMatFromUIImage:(UIImage *)image
{
    CGColorSpaceRef colorSpace = CGImageGetColorSpace( image.CGImage );
    CGFloat cols = image.size.width;
    CGFloat rows = image.size.height;
    cv::Mat cvMat( rows, cols, CV_8UC4 );
    CGContextRef contextRef = CGBitmapContextCreate( cvMat.data, cols, rows, 8, cvMat.step[0], colorSpace, kCGImageAlphaNoneSkipLast | kCGBitmapByteOrderDefault );
    CGContextDrawImage( contextRef, CGRectMake(0, 0, rows, cols), image.CGImage );
    CGContextRelease( contextRef );
    CGColorSpaceRelease( colorSpace );
    return cvMat;
} 
```

这是解决我的问题的正确方法吗？你有任何可以帮助我的示例代码吗？

感谢您阅读我的问题！

日期：

我实际上已经在这里开源了我的 UIImagePickerController 替换：[https](https://github.com/mmackh/MAImagePickerController-of-InstaPDF) ://github.com/mmackh/MAImagePickerController-of-InstaPDF ，其中包括可调整的裁剪视图、过滤器和透视校正。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-08T23:12:46.003

所以在尝试解决了几天之后，我想出了一个解决方案（忽略第二张图片上的蓝点）：

![原始图像，调整框架](../Images/3ba832e90e5698389a37a306c14d50f9.png) ![裁剪框架](../Images/390c72cbb02a15467bcf139eb3a2ac2a.png)

正如所承诺的，这是代码的完整副本：

```
- (void)confirmedImage
{
    cv::Mat originalRot = [self cvMatFromUIImage:_sourceImage];
    cv::Mat original;
    cv::transpose(originalRot, original);

    originalRot.release();

    cv::flip(original, original, 1);

    CGFloat scaleFactor =  [_sourceImageView contentScale];

    CGPoint ptBottomLeft = [_adjustRect coordinatesForPoint:1 withScaleFactor:scaleFactor];
    CGPoint ptBottomRight = [_adjustRect coordinatesForPoint:2 withScaleFactor:scaleFactor];
    CGPoint ptTopRight = [_adjustRect coordinatesForPoint:3 withScaleFactor:scaleFactor];
    CGPoint ptTopLeft = [_adjustRect coordinatesForPoint:4 withScaleFactor:scaleFactor];

    CGFloat w1 = sqrt( pow(ptBottomRight.x - ptBottomLeft.x , 2) + pow(ptBottomRight.x - ptBottomLeft.x, 2));
    CGFloat w2 = sqrt( pow(ptTopRight.x - ptTopLeft.x , 2) + pow(ptTopRight.x - ptTopLeft.x, 2));

    CGFloat h1 = sqrt( pow(ptTopRight.y - ptBottomRight.y , 2) + pow(ptTopRight.y - ptBottomRight.y, 2));
    CGFloat h2 = sqrt( pow(ptTopLeft.y - ptBottomLeft.y , 2) + pow(ptTopLeft.y - ptBottomLeft.y, 2));

    CGFloat maxWidth = (w1 < w2) ? w1 : w2;
    CGFloat maxHeight = (h1 < h2) ? h1 : h2;

    cv::Point2f src[4], dst[4];
    src[0].x = ptTopLeft.x;
    src[0].y = ptTopLeft.y;
    src[1].x = ptTopRight.x;
    src[1].y = ptTopRight.y;
    src[2].x = ptBottomRight.x;
    src[2].y = ptBottomRight.y;
    src[3].x = ptBottomLeft.x;
    src[3].y = ptBottomLeft.y;

    dst[0].x = 0;
    dst[0].y = 0;
    dst[1].x = maxWidth - 1;
    dst[1].y = 0;
    dst[2].x = maxWidth - 1;
    dst[2].y = maxHeight - 1;
    dst[3].x = 0;
    dst[3].y = maxHeight - 1;

    cv::Mat undistorted = cv::Mat( cvSize(maxWidth,maxHeight), CV_8UC1);
    cv::warpPerspective(original, undistorted, cv::getPerspectiveTransform(src, dst), cvSize(maxWidth, maxHeight));

    UIImage *newImage = [self UIImageFromCVMat:undistorted];

    undistorted.release();
    original.release();

    [_sourceImageView setNeedsDisplay];
    [_sourceImageView setImage:newImage];
    [_sourceImageView setContentMode:UIViewContentModeScaleAspectFit];

}

- (UIImage *)UIImageFromCVMat:(cv::Mat)cvMat
{
    NSData *data = [NSData dataWithBytes:cvMat.data length:cvMat.elemSize() * cvMat.total()];

    CGColorSpaceRef colorSpace;

    if (cvMat.elemSize() == 1) {
        colorSpace = CGColorSpaceCreateDeviceGray();
    } else {
        colorSpace = CGColorSpaceCreateDeviceRGB();
    }

    CGDataProviderRef provider = CGDataProviderCreateWithCFData((__bridge CFDataRef)data);

    CGImageRef imageRef = CGImageCreate(cvMat.cols,                                     // Width
                                        cvMat.rows,                                     // Height
                                        8,                                              // Bits per component
                                        8 * cvMat.elemSize(),                           // Bits per pixel
                                        cvMat.step[0],                                  // Bytes per row
                                        colorSpace,                                     // Colorspace
                                        kCGImageAlphaNone | kCGBitmapByteOrderDefault,  // Bitmap info flags
                                        provider,                                       // CGDataProviderRef
                                        NULL,                                           // Decode
                                        false,                                          // Should interpolate
                                        kCGRenderingIntentDefault);                     // Intent

    UIImage *image = [[UIImage alloc] initWithCGImage:imageRef];
    CGImageRelease(imageRef);
    CGDataProviderRelease(provider);
    CGColorSpaceRelease(colorSpace);

    return image;
}

- (cv::Mat)cvMatFromUIImage:(UIImage *)image
{
    CGColorSpaceRef colorSpace = CGImageGetColorSpace(image.CGImage);
    CGFloat cols = image.size.height;
    CGFloat rows = image.size.width;

    cv::Mat cvMat(rows, cols, CV_8UC4); // 8 bits per component, 4 channels

    CGContextRef contextRef = CGBitmapContextCreate(cvMat.data,                 // Pointer to backing data
                                                    cols,                       // Width of bitmap
                                                    rows,                       // Height of bitmap
                                                    8,                          // Bits per component
                                                    cvMat.step[0],              // Bytes per row
                                                    colorSpace,                 // Colorspace
                                                    kCGImageAlphaNoneSkipLast |
                                                    kCGBitmapByteOrderDefault); // Bitmap info flags

    CGContextDrawImage(contextRef, CGRectMake(0, 0, cols, rows), image.CGImage);
    CGContextRelease(contextRef);

    return cvMat;
} 
```

希望它可以帮助您+快乐的编码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:51:30.373

我认为点对应`getAffineTransform`不正确。

检查点坐标输出`box.points(pts);`

为什么不直接使用`p1 p2 p3 p4`来计算转换呢？

# entity-framework - 将 DBSet 限制为实体的子集

> ID：13269433
> 
> 赞同：1
> 
> 时间：2012-11-07T12:04:29.877
> 
> 标签：entity-framework

我正在使用 EF 4 构建多租户应用程序，我有一个共享数据库，许多实体都有一个 CustomerID 字段。我想知道是否有一种方法可以从我的 DBContext 在我的 DBSet 级别强制执行 CustomerID 查询。

我希望我可以在创建数据库上下文时指定一个 CustomerID，并将 DBSet 包装为始终包含一个 (x => x.CustomerID == custID) 所以我不必担心在我的应用程序中添加这个逻辑，但我找不到任何暗示它可能的东西

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:22:17.880

我**强烈建议在您的 DbContext 之上的***单独*服务层中执行此操作，因为在该级别执行起来会容易得多。

如果您坚持在 DbContext 级别执行此操作，这里有一个示例可以满足您的要求。

```
class MyContext : DbContext
{
    private readonly int _customerId;

    public MyContext(int customerId)
    {
        _customerId = customerId;
    }

    public DbQuery<MyEntity> MyEntities
    {
        get
        {
            return (DbQuery)Set<MyEntity>().Where(e => e.CustomerId == _customerId);
        }
    }

    protected override OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<MyEntity>();
    }
} 
```

这样做的最大问题是您无法确保从 MyEntities 返回的查询不会被进一步修改以包含其他客户的实体。

# python - C和Python之间的套接字通信

> ID：13269436
> 
> 赞同：4
> 
> 时间：2012-11-07T12:04:35.277
> 
> 标签：python, c, sockets, pipe

我只是尝试了一个非常简单的示例来开始使用套接字在 C 应用程序和 Python 之间进行通信。这是一个非常简单的 Python 脚本：

```
import socket

s = socket.socket(socket.AF_UNIX, socket.SOCK_STREAM)
s.connect("/tmp/demo_socket")
print "Sending..."
s.send("Hello C from Python!")
data = s.recv(1024)
s.close()
print 'Received', repr(data) 
```

这里是相应的 C 代码，没有标题：

```
int main(void)
{  
  struct sockaddr_un address;
  int socket_fd, connection_fd;
  socklen_t address_length;
  pid_t child;  

  char buffer[256];
  int n;

  socket_fd = socket(AF_UNIX, SOCK_STREAM, 0);
  if (socket_fd < 0){
      printf("socket() failed\n");
      return 1;
  } 

  unlink("/tmp/demo_socket");
  memset(&address, 0, sizeof(struct sockaddr_un));

  address.sun_family = AF_UNIX;
  snprintf(address.sun_path, UNIX_PATH_MAX, "/tmp/demo_socket");

  if (bind(socket_fd, (struct sockaddr *) &address, sizeof(struct sockaddr_un)) != 0) {
      printf("bind() failed\n");
      return 1;
  }
  if(listen(socket_fd, 5) != 0) {
      printf("listen() failed\n");
      return 1;
  }

  address_length = sizeof(address);  
  while((connection_fd = accept(socket_fd, 
                   (struct sockaddr *) &address,
                   &address_length)) > -1)
  {
      printf("successfully received data\n");
      bzero(buffer,256);
      n = read(connection_fd,buffer,255);
      if (n < 0) error("ERROR reading from socket");
         printf("Here is the message: %s\n\n", buffer);
      strcpy(buffer, "Hi back from the C world"); 
      n = write(connection_fd, buffer, strlen(buffer));
      if (n < 0) 
         printf("ERROR writing to socket\n");           
      break;      
  }
  close(socket_fd);
  close(socket_fd);
  return(0);
} 
```

并行运行时输出如下：

```
 Successfully received data
 Here is the message: Hello C from Python!

 ERROR writing to socket
 close failed in file object destructor:
 Error in sys.excepthook:

 Original exception was: 
```

所以好消息是，从 Python 世界接收东西可以正常工作，但是当我试图写回一些东西时，我得到了一个错误，而且我最终似乎得到了一个例外。有人知道我在这里做错了什么吗？

编辑：谢谢大家，我做了你建议的更正，消息交换工作正常，只是 C 应用程序仍然造成问题，我不知道为什么......

```
close failed in file object destructor:
Error in sys.excepthook:

Original exception was: 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T12:13:10.963

您正在尝试写入侦听套接字

```
write(socket_fd, buffer, strlen(buffer)); 
```

你应该试试

```
write(connection_fd, buffer, strlen(buffer)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-06T11:00:50.117

您收到警告是因为您关闭了两次 socket_fd。

# ios - 在 webview 中打开的外部 url

> ID：13269437
> 
> 赞同：1
> 
> 时间：2012-11-07T12:04:36.293
> 
> 标签：ios, cordova

每当调用“window.location”时，我的 phonegap 应用程序都会退出 webview 并加载 safari 浏览器。
我搜索了这个问题，似乎可以通过更改
phonegap 1.8 中 config.xml 的首选项值来解决这个问题

我试图找到 config.xml 但找不到。我正在使用phonegap 2.1。

在哪里可以找到 config.xml？或者......有什么办法留在phonegap 2.1的webview中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:18:54.087

在 phonegap 应用程序中打开 Cordova.plist 文件并启用设置

```
OpenAllWhitelistURLsInWebView to YES.
```

这将解决这个问题。

# jquery - Flexslider - 每张幻灯片上不同的幻灯片放映速度

> ID：13269438
> 
> 赞同：12
> 
> 时间：2012-11-07T12:04:40.147
> 
> 标签：jquery, flexslider

我正在使用 Flexslider，并被要求在不同的时间显示每张幻灯片，具体取决于它有多少内容，对于短句来说如此之快，而对于一个段落来说则慢。当 flexslide 只允许 1 个 Slideshowspeed 值时，我该如何设置。我的代码：

```
$(window).load(function() {
        $('#flexslider1').flexslider({
        easing: "swing",  
        animation: "fade",
        slideshowSpeed: 7000,
        animationSpeed: 600,
        startAt: 0,
        initDelay: 0,
        controlNav: true,
        directionNav: true,
        pausePlay: true,
        pauseText: 'Pause',
        playText: 'Play'
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T16:49:13.787

我在尝试仅将一张幻灯片的速度更改为与其他幻灯片不同时遇到了同样的问题。这是我使用的脚本，它有效！

```
 <script type="text/javascript">
$(window).load(function(){
  $('.flexslider').flexslider({
    animation: "fade",
    slideshowSpeed: 1500,
    animationSpeed: 1000, 
    controlNav: false, 

    start: function(slider){
      slider.removeClass('loading');
    },
    after: function(slider){
        if(slider.currentSlide == 3){
            slider.pause();
            setTimeout(function(){
                slider.play();
            }, 5000);
        }
    }
  });
}); 
```

我总共有 5 张图片，但我希望第 4 张幻灯片（slider.currentSlide == 3）停留更长时间 5 秒。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-15T08:17:43.560

我想我找到了解决办法。我使用 after 回调来更改 slideshowSpeed 的间隔：

```
$(window).load(function(){
      $('.flexslider').flexslider({
        animation: "slide",
        slideshowSpeed: time,
        controlNav: false,
        directionNav: false,
        pauseOnAction: false,
        pauseOnHover: false, 
        pausePlay: true,
        after: function(slider){
            clearInterval(slider.animatedSlides); 
            slider.animatedSlides = setInterval(slider.animateSlides,*YOURTIME in MS*)
        },
        start: function(slider){
          $('body').removeClass('loading');
        }
      }); 
    }); 
```

希望能帮助到你！

蒂博。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-09T20:56:54.957

意识到这是旧的，但对于其他人来说，就像我一样，你也可以这样做：（使用 FlexSlider v.2.2.2）。

将 data-duration 属性添加到 li 的

```
<div class="flexslider" data-animation="fade" data-control-nav="false" data-slideshow="true" data-start-at="0">
    <ul class="slides">
        <li data-duration="6000">
            <img src="http://placehold.it/600x210" alt="Alt" />
        </li>
        <li data-duration="2000">
            <img src="http://placehold.it/600x200" alt="Alt Text" />
        </li>
    </ul>
</div> 
```

在您的页面初始化中：

```
$hook = $('.flexslider');
$hook.flexslider({
                    animation: $hook.data('animation'),
                    controlNav: $hook.data('control-nav'),
                    slideshow: $hook.data('slideshow'),
                    startAt: $hook.data('start-at'),
                    pauseOnHover: true,
                    controlNav: false,
                    after: function(slider){
                        // clears the interval
                        slider.stop();
                        // grab the duration to show this slide
                        slider.vars.slideshowSpeed = $(slider.slides[slider.currentSlide]).data('duration');
                        // start the interval
                        slider.play();
                    }
                }); 
```

在这里提琴：

[http://jsfiddle.net/uzery/3/](http://jsfiddle.net/uzery/3/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T20:10:15.767

因为在第一张幻灯片动画之后的回调 CALL 之后，我们需要在 START 回调中添加超时（对于 3 张幻灯片）：

```
 $(window).load(function() {        
    $('.flexslider').flexslider({
        animation: "slide",
        controlNav: false,
        directionNav: false,           
        pausePlay: true,
        animationSpeed: 300,
        start: function(slider) {
            clearInterval(slider.animatedSlides);
            slider.animatedSlides = setInterval(slider.animateSlides, YOUR_TIMEOUT_FOR_FIRST_SLIDE(ONLY FOR START));                
        },
        after: function(slider){
            if(slider.currentSlide == 0) {
               clearInterval(slider.animatedSlides); 
               slider.animatedSlides = setInterval(slider.animateSlides, FIRST_TIMEOUT);
            }
            if(slider.currentSlide == 1) {
               clearInterval(slider.animatedSlides); 
               slider.animatedSlides = setInterval(slider.animateSlides, SECOND_TIMEOUT);
            }
            if(slider.currentSlide == 2) {
               clearInterval(slider.animatedSlides); 
               slider.animatedSlides = setInterval(slider.animateSlides, THIRD_TIMEOUT);
            }
        }          
    });
  }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-11T15:41:22.060

结合上面的两个答案

```
$hook = $('.flexslider');
$hook.flexslider({
    animation: $hook.data('animation'),
    controlNav: $hook.data('control-nav'),
    slideshow: $hook.data('slideshow'),
    startAt: $hook.data('start-at'),
    pauseOnHover: true,
    controlNav: false,
    start: function(slider) {
        var start_time = $(slider.slides[slider.currentSlide]).data('duration');
        clearInterval(slider.animatedSlides);
        slider.animatedSlides = setInterval(slider.animateSlides, start_time);
    },
    after: function(slider){
        // clears the interval
        slider.stop();
        // grab the duration to show this slide
        slider.vars.slideshowSpeed = $(slider.slides[slider.currentSlide]).data('duration');
        // start the interval
        slider.play();
    }
});
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-07T12:13:08.387

我不知道 flexslider 但你应该能够在事件函数回调之后修改速度。像这样的东西：

```
$('#flexslider1').flexslider({
easing: "swing",  
animation: "fade",
slideshowSpeed: 7000,
animationSpeed: 600,
startAt: 0, 
initDelay: 0,
controlNav: true,              
directionNav: true,
pausePlay: true,
pauseText: 'Pause',            
playText: 'Play',
after: function(){$(this).flexslider('slideshowSpeed',1000)} 
}); 
```

但是现在，你现在怎么能改变你必须为哪张幻灯片改变速度。flexslider 的文档没有提供有关在回调函数之后传递哪个参数的任何信息。并且根据这个插件的编码方式，它可能无法即时更改选项，这表明您需要销毁滑块并重新创建一个新的滑块，以保持当前显示的步骤/滑块，奇怪的编码。

所以，我建议你联系这个插件的主要开发者或者尝试自己扩展它。

# iphone - TableView 加载错误的单元格

> ID：13269439
> 
> 赞同：0
> 
> 时间：2012-11-07T12:04:39.817
> 
> 标签：iphone, ios, uitableview

不太确定如何解释这一点，但`UITableView`我有一行代码，当我单击一个单元格时，它会将我带到一个新视图，该视图根据单元格的名称更新它的标题。但是，如果我有两个单元格，一个名为“一”，一个名为“二”，当我单击“二”时，它会将我带到标题为“一”的视图，反之亦然。有什么想法可能导致这种情况吗？抱歉，我无法提供更多帮助。

```
-(void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self.tableView deselectRowAtIndexPath:indexPath animated:YES];
    ACollection *newView = [[ACollection alloc] init];
    newView.theTitle = [self.tableView cellForRowAtIndexPath:indexPath].textLabel.text;
    [self.navigationController pushViewController:newView animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:15:54.857

我认为您为此选择了错误的方法

试试这个代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self.tableView deselectRowAtIndexPath:indexPath animated:YES];

    ACollection *newView = [[ACollection alloc] init];
    newView.theTitle = [self.tableView cellForRowAtIndexPath:indexPath].textLabel.text;
    [self.navigationController pushViewController:newView animated:YES];
} 
```

# android - Android：如何在不损坏的情况下下载 ftp 文件？

> ID：13269442
> 
> 赞同：2
> 
> 时间：2012-11-07T12:04:44.107
> 
> 标签：android, ftp, download, apache-commons

***这段代码现在可以工作了。LogCat 仅适用于其他 ppl 的回退问题***

如何从我的 ftp 服务器下载文件而不会损坏（下载的文件）？我可以下载文件，但它有 0 字节....

但是所有相同的 .txt、.png、.exe、.apk 文件在我的手机上每次都损坏/无法读取（0 字节）。例如，我的 ftp 服务器上有一个名为 init.txt 的文件（其中包含以下文本：“testfileini!!”），它的大小在 ftp 上为 13 字节，在电话上为 0 字节。

**OnItemClickListener**（用于直接从 ftp 文件列表中选择文件）

```
lv.setOnItemClickListener(new OnItemClickListener() {
          public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
              String file = (String) lv.getItemAtPosition(position);
              new DownloadFile().execute(file);   
          }

        }); 
```

**AsyncTask 下载**文件（用于后台下载）

```
 private class DownloadFile extends AsyncTask<String, Integer, String> {
    @Override
    protected String doInBackground(String... filename) {
        try {
            System.out.println("Filename->: " + filename[0]);
            GetFileFTP("/subdomains/giveyourapps/httpdocs/apps/"+filename[0], Environment.getExternalStorageDirectory() + "/Download/", filename[0]);

        } finally {
            disconnectFTP();
        }
        return null;
    }
} 
```

**获取文件FTP**

```
public void GetFileFTP(String srcFileSpec, String destpath, String destname) {
    FTPClient client = new FTPClient();
    Log.v("pathSpec: ", destpath); 

    try {
        client.connect("176.28.25.46");
        client.login("ftp031220", "hSigSf");

        client.enterLocalPassiveMode();
        client.setFileType(org.apache.commons.net.ftp.FTP.BINARY_FILE_TYPE);            

        InputStream input = client.retrieveFileStream(srcFileSpec);
        if(input != null) Log.v("GetFileFTP: ", "Input Stream Opened successfully");
        Log.v("Fileinputstream: ", srcFileSpec); 

        File output_file = new File(destpath + destname);
        Log.v("OUTPUTFILE: ", destpath + destname); 

        inputstreamcopy(input, output_file);

        disconnectFTP();

    }catch (IOException e) {
            Log.e("FTP", "Error Getting File");
            e.printStackTrace();
    }
 } 
```

**复制输入流到文件**

```
public static void inputstreamcopy(InputStream source,
        File destination){
    try {
        org.apache.commons.io.FileUtils.copyInputStreamToFile(source, destination);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

**日志猫**

```
11-07 15:09:08.675: D/GestureDetector(15746): [Surface Touch Event] mSweepDown False, mLRSDCnt : -1 mTouchCnt : 3 mFalseSizeCnt:0
11-07 15:09:08.905: I/System.out(15746): status :: 211-Status of 'ProFTPD'

11-07 15:09:08.905: I/System.out(15746):  Connected from 109.164.221.167 (109.164.221.167)

11-07 15:09:08.905: I/System.out(15746):  Logged in as ftp031220

11-07 15:09:08.905: I/System.out(15746):  TYPE: BINARY, STRUcture: File, Mode: Stream

11-07 15:09:08.905: I/System.out(15746):  No data connection

11-07 15:09:08.910: I/System.out(15746): 211 End of status

11-07 15:09:09.025: D/dalvikvm(15746): GC_CONCURRENT freed 93K, 10% free 12464K/13703K, paused 15ms+12ms, total 58ms
11-07 15:09:09.390: I/System.out(15746): Files->: 1Tap_Cleaner_Pro_v1.45.apk
11-07 15:09:09.390: I/System.out(15746): Files->: AppBrain_App_Market_v7.5.apk
11-07 15:09:09.395: I/System.out(15746): Files->: Apparatus_v1.0.4_ADFREE_ANDROiD-P2P.apk
11-07 15:09:09.395: I/System.out(15746): Files->: Atomic_Bomber_5.0.apk
11-07 15:09:09.395: I/System.out(15746): Files->: IMG_20120917_120935.jpg
11-07 15:09:09.395: I/System.out(15746): Files->: init.txt
11-07 15:09:09.395: I/System.out(15746): Files->: unnamed.png
11-07 15:09:09.500: E/SpannableStringBuilder(15746): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
11-07 15:09:09.500: E/SpannableStringBuilder(15746): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
11-07 15:09:13.805: D/GestureDetector(15746): [Surface Touch Event] mSweepDown False, mLRSDCnt : -1 mTouchCnt : 2 mFalseSizeCnt:0
11-07 15:09:13.880: I/System.out(15746): Filename->: init.txt
11-07 15:09:13.880: V/pathSpec:(15746): /storage/sdcard0/Download/
11-07 15:09:14.310: V/GetFileFTP:(15746): Input Stream Opened successfully
11-07 15:09:14.310: V/Fileinputstream:(15746): /subdomains/giveyourapps/httpdocs/apps/init.txt
11-07 15:09:14.310: V/OUTPUTFILE:(15746): /storage/sdcard0/Download/outputfile.txt
11-07 15:09:14.310: I/dalvikvm(15746): threadid=11: stack overflow on call to Lcom/mseiz/give/your/apps/MainSite;.copyInputStreamToFile:VLL
11-07 15:09:14.310: I/dalvikvm(15746):   method requires 8+20+8=36 bytes, fp is 0x5ec4b310 (16 left)
11-07 15:09:14.310: I/dalvikvm(15746):   expanding stack end (0x5ec4b300 to 0x5ec4b000)
11-07 15:09:14.315: I/dalvikvm(15746): Shrank stack (to 0x5ec4b300, curFrame is 0x5ec4eeb0)
11-07 15:09:14.315: W/dalvikvm(15746): threadid=11: thread exiting with uncaught exception (group=0x40d9f2a0)
11-07 15:09:14.375: D/dalvikvm(15746): GC_CONCURRENT freed 283K, 10% free 12654K/14023K, paused 14ms+11ms, total 47ms
11-07 15:09:14.405: D/dalvikvm(15746): GC_FOR_ALLOC freed 314K, 11% free 12682K/14215K, paused 10ms, total 10ms
11-07 15:09:14.405: E/AndroidRuntime(15746): FATAL EXCEPTION: AsyncTask #1
11-07 15:09:14.405: E/AndroidRuntime(15746): java.lang.RuntimeException: An error occured while executing doInBackground()
11-07 15:09:14.405: E/AndroidRuntime(15746):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at java.lang.Thread.run(Thread.java:856)
11-07 15:09:14.405: E/AndroidRuntime(15746): Caused by: java.lang.StackOverflowError
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(MainSite.java:119)
11-07 15:09:14.405: E/AndroidRuntime(15746):    at com.mseiz.give.your.apps.MainSite.copyInputStreamToFile(Ma
11-07 15:09:14.420: D/dalvikvm(15746): GC_CONCURRENT freed 553K, 12% free 12644K/14343K, paused 2ms+2ms, total 12ms
11-07 15:09:14.420: D/dalvikvm(15746): WAIT_FOR_CONCURRENT_GC blocked 9ms
11-07 15:09:14.440: D/dalvikvm(15746): GC_CONCURRENT freed 324K, 11% free 12802K/14343K, paused 1ms+2ms, total 17ms 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:41:40.287

这一行：

```
readBytes(input); 
```

什么也没做。您需要将这些返回的字节写入`FileOutputStream`. 顺便说一句，考虑使用[`org.apache.commons.io.IOUtils.copy(InputStream, OutputStream)`](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html#copy%28java.io.InputStream,%20java.io.OutputStream%29)或类似。[`OutOfMemoryErrors`](http://developer.android.com/reference/java/lang/OutOfMemoryError.html)如果下载的文件足够大，将字节数组存储在内存中可能会抛出异常。

更新：
更好的是：
[`org.apache.commons.io.FileUtils.copyInputStreamToFile(InputStream,File)`](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#copyInputStreamToFile%28java.io.InputStream,%20java.io.File%29)

# cakephp - 如何在没有模型的情况下在 CakePHP 中手动执行 SQL 查询

> ID：13269447
> 
> 赞同：7
> 
> 时间：2012-11-07T12:04:55.917
> 
> 标签：cakephp, cakephp-1.3

我正在编写一个快速的一次性方法，将用户从旧表导入到我的新蛋糕应用程序中。我已将旧用户表 (old_users) 导入到我的蛋糕应用程序数据库中。基本上我只需要从 old_users 表中进行全选，然后遍历它们并使用类似 $newuser->create('old_username', 'old_password'); 之类的方法将它们添加到新用户表中。

但是，我不想为临时表创建模型等，因为此导入只会运行一次。所以我的问题是 - 我怎样才能从用户控制器中的蛋糕方法中进行基本选择以从该表中获取所有用户。我在想这样的事情：

```
public function admin_importOldUsers() {
        $db = $this->getDataSource();
        $db->fetchAll('SELECT * FROM old_users');
    } 
```

但它失败并出现错误：

> 调用未定义的方法 UsersController::getDataSource()

我在文档中找不到太多关于如何从控制器中查询另一个数据库表（没有模型）的信息......

谁能指出我正确的方向？

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T13:09:55.863

要在没有模型的情况下在 CakePHP 中手动运行标准 SQL 查询，您可以`query`在控制器可用的任何模型上使用该方法（无论您使用哪种模型）：

```
class MyController extends AppController
{
    public function index()
    {
        $result = $this->AnyModel->query("SELECT * FROM my_table");
    }
} 
```

[CakePHP 1.3 - 模型](http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Models.html#query)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-12T12:12:08.493

关于该部分的文档不正确。在您的*database.php*文件中找到连接的名称并使用以下代码（我的是*默认*代码）：

```
$db = ConnectionManager::getDataSource("default"); // name of your database connection
$places_of_interest = $db->fetchAll("SELECT * FROM places_of_interest"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T12:21:50.407

我曾经为非蛋糕数据库到蛋糕数据库的数据库转换脚本做了类似的事情。以下是该脚本的一些内容（基于 CakePHP 1.3，如果您使用 2.x，可能会略有不同）。

```
// Require the config/database.php file for DB connection
require_once(dirname(__FILE__) . '/database.php');
$DB = new DATABASE_CONFIG();

// Setup the connection
if($DB->default['driver'] === 'mysqli') {
    // Connect using MySQLi
    print "Connecting to database: ";
    $dbc = new mysqli($DB->default['host'], $DB->default['login'], $DB->default['password'], $DB->default['database']);

    // Make sure we use UTF8 encoding
    if($DB->default['encoding'] == "UTF8") {
        $dbc->set_charset($DB->default['encoding']);
    }

    // At this point you can just run raw queries like:
    $dbc->query("INSERT INTO `groups` (`id`, `name`) VALUES (1, 'Management'), (2, 'Operations')");

    // Close the database connection
    $dbc->close();
} else {
    die("Please use mysqli");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T12:26:33.357

现在没有机会尝试，但下面的代码应该可以工作。

```
class NoModelsController extends AppController{
    var $name="NoModels";
    var $uses = null;  

    public function admin_importOldUsers() {
        $results = $this->Model->query('SELECT * FROM old_users');
        pr($results);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-19T04:04:02.530

最简单的方法是：

$model = $this->loadModel('你的模型名')->query("SELECT * FROM 表名")

# blackberry - 如何以编程方式在黑莓中检索已安装的应用程序

> ID：13269449
> 
> 赞同：0
> 
> 时间：2012-11-07T12:04:57.537
> 
> 标签：blackberry

我有在黑莓中检索当前正在运行的应用程序的代码。

而且，我也使用过`CodeModuleManager.getModuleHandles()`，但无法检索应用程序名称。

请帮忙。

```
ApplicationManager appMan = ApplicationManager.getApplicationManager();
int[] handle = CodeModuleManager.getModuleHandles();
ApplicationDescriptor[] appDes = appMan.getVisibleApplications();

for (int i = appDes.length - 1; i >= 0; --i) 
{
    String moduleName = appDes[i].getModuleName();
    String name = appDes[i].getName();
    System.out.println("**********************"+moduleName+"        "+
        name+"*********************");
}
for (int i= handle.length -1; i>=0; --i)
{
    System.out.println("*************"+handle[i]+"***********");            
}

System.out.println("**Code**"+CodeModuleManager.getApplicationDescriptors(70) + 
    "**************"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:25:21.217

试试这个 -

```
int[] handle = CodeModuleManager.getModuleHandles();                    
for(int i=0; i<handle.length; i++){  
    ApplicationDescriptor[] app_descriptors = CodeModuleManager.getApplicationDescriptors(handle[i]);               
        if(app_descriptors != null){ 
            for(int j=0; j< app_descriptors.length; j++){
                 String moduleName = app_descriptors[i].getModuleName();
                 String name = app_descriptors[i].getName();
                 //here the String variable name will give you all the app names installed on your devise.

            } 
        }               
} 
```

# yii - Yii 中的信用卡交易

> ID：13269455
> 
> 赞同：2
> 
> 时间：2012-11-07T12:05:25.803
> 
> 标签：yii, yii-extensions, yii-components

我们如何在 Yii 中实现信用卡交易？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T12:55:46.017

您可以通过 Yii Framework、PayPal、Authorize.net 等使用任意数量的支付网关。您只需在其中一个支付网关提供商处注册一个商家帐户，相应的 API 应该会为您提供有关如何执行的详细信息交易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:15:59.530

您的问题并没有详细说明您尝试过的内容，或者您​​询问的是 API 或其他内容。我能说的是

[Stripe](https://stripe.com/) 有一个 PHP 库，无需商家帐户即可接受信用卡。

如果您需要**快速**而**肮脏**的东西，您可以使用`PayPal's`“购买”按钮并将它们放在您的页面上。这些将把人们带到异地到贝宝，在那里他们可以使用贝宝账户或信用卡支付。这是免费的，而且非常容易实现。

如果您想要一些更好的东西，人们使用信用卡在现场付款，那么您会想要研究那些第三部分支付提供商之一。

基本程序类似于`PayPal`作品

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T13:29:28.917

没有“特定于 Yii”的支付网关集成。请记住，Yii 只是一个 PHP 框架。任何适用于 PHP 的东西都适用于 Yii。

有数以百万计的支付网关，选择一个，阅读他们关于实施该解决方案的文档。

# git - 使用两个可独立更新的存储库创建一个 Git 存储库

> ID：13269458
> 
> 赞同：2
> 
> 时间：2012-11-07T12:05:39.733
> 
> 标签：git, version-control, repository

我想使用 HTML5 Boilerplate repo 和 HTML5BP Ant Build Script repo 为未来的项目创建一个自定义项目框架。

我想要我的目录结构如下

```
/public       #this is where my build script will build to
/source       #this contains the html5bp files
     /build   #this contains the build script files 
```

我希望能够修改构建脚本存储库以按照我的意愿工作。我还希望能够从原始存储库中获取更新（我能想到的唯一方法是分叉构建脚本（并添加上游远程），然后将其作为子模块包含 - 这行得通吗？）。

但是，我不确定如何获取 HTML5BP 存储库，使其处于 /source 文件夹中的状态，并且可以从原始存储库中获取新更新并进行自己的修改以根据需要进行设置我未来的项目。

如果我 fork 它然后将它的所有文件移动到 /source 目录中，上游远程是否知道在哪里查找以获取新更新？

我已经尝试过解决这个问题，但还没有真正做到，我对 Git 也很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:37:24.967

> 我能想到的唯一方法是分叉构建脚本（并添加上游远程），然后将其包含为子模块 - 这会工作吗？

是的，作为`html5bp`repo的子模块

> 我不确定如何在文件夹`HTML5BP`内的状态下获取 repo`/source`

为什么不克隆`html5bp`根目录下的 repo`source`呢？

# javascript - 如何让浏览器通过非屏幕通道输出？

> ID：13269459
> 
> 赞同：2
> 
> 时间：2012-11-07T12:05:42.027
> 
> 标签：javascript, google-chrome, browser, arduino

谷歌 Chrome 和 Firefox 开始支持 Gamepad API，我有代码可以将库存 Arduino 变成可定制的游戏手柄 ( [UnoJoy!](http://UnoJoy.com) )，因此您可以使用它从 Arduino 获取数据到 JavaScript。但是，我正在尝试找到一种方法将数据返回到 Arduino。

理想情况下，我想要某种可以被劫持以传递数据的内置 USB 硬件通道（如控制 Scroll Lock 键盘 LED），但[如果迫不得已](http://en.wiktionary.org/wiki/when_push_comes_to_shove)，能够将数据从浏览器发送到外部客户端程序可以工作（尽管我希望浏览器沙盒使这成为一个困难的提议......）。不过，理想情况下，仅与股票、稳定分支 Chrome 一起工作的东西会非常棒，这样人们就可以去一个网站，看看他们需要用他们的 Arduino 做什么来修改它，然后就可以开始了.

有没有一种黑客可以通过这种方式从 JavaScript 中泄露信息？

我开始认为相机 API 可能会给我一些句柄，但我正在寻找其他一些建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:36:25.710

Gamepad API 正在扩展启用的输入设备，例如键盘和鼠标。无意让输入设备自己接收输入。为什么？因为没有意义。

有一个称为[Serial API](http://developer.chrome.com/apps/serial.html)的 API ，您可以使用它与这些设备进行双向通信。*[在访问硬件设备](http://developer.chrome.com/apps/app_hardware.html)*中可以找到从 Chrome 访问硬件的一般方法。这是非常特定于 Google/Chromium 的，据我所知，它还没有登陆[W3C](http://en.wikipedia.org/wiki/World_Wide_Web_Consortium)，所以如果它登陆 W3C 并且何时登陆，它会发生快速变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:53:41.657

如果不使用浏览器插件或将在本地计算机上运行并充当代理的某些程序，我认为您将无法实现目标。

例如，您可以编写一个程序，用户将下载并在他们的计算机上运行，​​并且该程序将具有可从他们的浏览器访问的 Web 界面`http://localhost:3000/`或类似的东西。该程序可以以您喜欢的任何方式访问 Arduino，同时提供一个无需插件的股票浏览器即可访问的 Web 界面。

如果您只想用 JavaScript 编写它，那么您可以使用简单的 Web 框架（如[Express](http://expressjs.com/) plus [Socket.io）](http://socket.io/)和可用于与 Arduino 对话的库之一（如[node-serialport](https://github.com/voodootikigod/node-serialport#readme)或[Firmata ）编写一个小的](https://github.com/jgautier/firmata#readme)[Node.js](http://nodejs.org/)程序。

也可以看看：

*   [Noduino](http://semu.github.com/noduino/) - 用于从 Web 应用程序访问 Arduino 的 JavaScript 框架
*   [duino](https://github.com/ecto/duino#readme) - 在 Node.js 中使用 Arduinos 的框架
*   [arduino.js](http://www.schillmania.com/projects/arduino-js/) - 基于 JavaScript 的 Arduino Uno 通信
*   [JavaScript：Node.js 上的 Arduino 编程](http://weblog.bocoup.com/javascript-arduino-programming-with-nodejs/)
*   [JavaScript：Arduino 伺服控制教程](http://weblog.bocoup.com/javascript-arduino-servo-control-tutorial/)
*   [使用 Node.js 和 Javascript 与 Arduino 交谈](http://mobileiteration.com/post/30281418728)
*   [从 Node.js 控制 Arduino](http://brandontilley.com/2012/03/02/controlling-an-arduino-from-nodejs.html)
*   [Arduino 和使用 NodeJS 和 SerialPort2 的 Web](http://www.codeproject.com/Articles/389676/Arduino-and-the-Web-using-NodeJS-and-SerialPort2)

# xtext - Xtext 在解析期间赋值

> ID：13269460
> 
> 赞同：0
> 
> 时间：2012-11-07T12:05:48.803
> 
> 标签：xtext

我正在尝试构建一个解析器，它可以采用人类语言表达`twenty five percent`，并将其转换为数字，如`25%`.

基本上我有这样的规则：

```
Number:
    (T1 | T2 | T3 T1) 'percent'?
;

terminal T1: 'zero' | 'one' | 'two' etc....;
terminal T2: 'ten' | 'eleven' | 'twelve' etc...;
terminal T3: 'twenty' | 'thirty' | 'forty' etc...; 
```

而且我想以某种方式对其进行转换，以便当我`Number`在 Xtend 中访问以生成我的代码时，它不会是文本，`twenty five percent`而是一个数字。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:22:18.367

您将 Number 定义为返回字符串的数据类型规则。

如果你使用类似的东西

```
Number returns ecore::EBigDecimal:
  (T1 | T2 | T3 T1) 'percent'?
; 
```

您可以为您的规则定义一个值转换器`Number`并将其转换为`BigDecimal`. 规则 Number 的被调用者会将其视为`BigDecimal`. 有关 Xtext 中值转换的详细信息，请参阅[文档](http://www.eclipse.org/Xtext/documentation.html#valueconverter)。请记住，您必须为此目的导入 Ecore 包。如果您对此有任何疑问，请查看常用终端和文档。

# excel - Excel：相邻单元格

> ID：13269464
> 
> 赞同：0
> 
> 时间：2012-11-07T12:06:00.797
> 
> 标签：excel, if-statement

如何在相邻单元格中使用 IF 命令或其他命令？例如，如果`A1 = 'knife'`和相邻单元格（A2）等于'fork'。也就是说，我需要在垂直方向上识别一个相邻的单元格。 ![在此处输入图像描述](../Images/5d51baa007164162671b52e302e3952a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:11:59.400

使用`AND()`功能：

`IF(AND(A1="knife";A2="fork");"ok";"")`

# java - 从调用方法返回值到未来对象

> ID：13269469
> 
> 赞同：0
> 
> 时间：2012-11-07T12:06:16.380
> 
> 标签：java, future, java.util.concurrent

我如何将字符串类型的迭代集值从调用方法返回到未来的对象。我需要将迭代的值存储在数组中并返回该数组还是任何人都可以帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T12:40:35.553

使用 a [`Callable<List<String>>`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Callable.html)，将其提交给执行程序，执行程序将返回 a `Future`，其[`get()`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html#get%28%29)方法将返回 a `List<String>`。

```
ExecutorService executorService = Executors.newSingleThreadExecutor();
Callable<List<String>> task = new Callable<List<String>>() {
    public List<String> call() throws Exception {
        List<String> list = new ArrayList<String>();
        // populate list
        return list;
    }
};
Future<List<String>> future = executorService.submit(task);

// the list from above, returns once execution is complete
List<String> list = future.get(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:20:27.893

使用**返回**Object的`submit()`方法。`ExecutorService` **`Future`**

# google-apps-script - 为什么 Google Apps Script htmloutput 的 caja sanitization 在特定字符串上失败

> ID：13269471
> 
> 赞同：1
> 
> 时间：2012-11-07T12:06:26.460
> 
> 标签：google-apps-script, google-caja, google-code-prettify

我正在尝试准备 GAS 代码示例以嵌入 Google 协作平台和其他网站。我使用 HtmlService.createHtmlOutput 和 HtmlService.createTemplateFromFile() 和 template.evaluate().getContent() 来提供 google 应用程序脚本内容的 html 版本。根据[这篇文章](http://excelramblings.blogspot.co.uk/2012/11/publishing-google-apps-script-code.html)，这一切都很好。

现在我想使用 prettyify.js 美化代码。我使用[嵌入在 caja](http://code.google.com/p/google-caja/source/browse/doc/cajajs/prettify/?r=4554)中的版本，它几乎可以工作。然而，被美化的代码中的特定方法名称会从 htmlservice 引发错误。

> 不支持来宾构造对象对象的驯服。期望函数不是字符串：pln

具体来说，这段文字美化成功，

```
function xisItHtml (e) {
  return ( e.parameter.hasOwnPropertu('template')) ;
} 
```

而这会引发错误

```
function xisItHtml (e) {
  return ( e.parameter.hasOwnProperty('template')) ;
} 
```

似乎特定的方法（奇怪，因为没有执行此代码，只是美化了），导致 caja sanitation 抱怨。

模板中的代码就是这样

```
$(document).ready(function () {
 // any jQueryness can happen here...
  try { 
    prettyPrint();
  }
  catch(err) {
    alert("failed prettification " + err);
  }
}); 
```

我很难过。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:29:22.647

因此，当您将包含 .toString() 或 .hasOwnProperty() 的美化文本插入 GAS 中的 html 输出时，似乎出现了故障。我找不到任何其他导致问题的文本，但可能还有更多。我的技巧只是在美化之前更改文本，然后再将其更改回来。

```
$(document).ready(function () {
   // any jQueryness can happen here...
    var thingsThatScrewUp = [ 'toString', 'hasOwnProperty'],t;

    $('.pretty').each( function(i,elem) {
       var c = $(elem).text() ;
       // disguise
       for (var i = 0 ; i < thingsThatScrewUp.length ; i++ ) {
        c = c.replace(new RegExp("." + thingsThatScrewUp[i], 'g'),".sandw_" + i + "_ch");
       }
       try {
         t = prettyPrintOne(c);
       }
       catch (err) {
        $('#report').html(err + c);
       }
       // undisguise
       for (var i = 0 ; i < thingsThatScrewUp.length ; i++ ) {
         t = t.replace(new RegExp("sandw_" + i + "_ch", 'g'),thingsThatScrewUp[i]);
       }
       $(elem).html("<pre class='code pretty prettyprint'>" + t + "</pre>");
      });
      $('#working').html('Module:');
  }); 
```

这是一个 [工作版本](https://script.google.com/a/macros/mcpher.com/s/AKfycbzig_MZJ4dF-LGkWlThc7-_U-AP6Jaf0iYfKR9QxoiKRUCzIxex/exec?module=vEquivalents&template=pretty)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:35:27.173

这可能是您调用美化器的方式。这是[一个在 Caja Playground 中正确呈现的示例](http://caja.appspot.com/#https://dl.dropbox.com/u/7860124/prettycajatest.html)

# sass - Sass --watch 整个目录和子目录中的所有文件？

> ID：13269473
> 
> 赞同：1
> 
> 时间：2012-11-07T12:06:30.070
> 
> 标签：sass

我试过 *.css，但它不起作用。有这个或什么的命令吗？

# android - Android 电子邮件应用程序，如通知

> ID：13269474
> 
> 赞同：0
> 
> 时间：2012-11-07T12:06:31.700
> 
> 标签：android, android-layout

是否可以在应用程序图像中添加某种通知（例如在电子邮件应用程序中，当有新消息到达时，它会在应用程序图标中显示它）？如果是，请给我一些例子..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:11:00.777

是的，可以在您的通知上添加图标

像这样使用

```
Notification appNotification = new Notification(
                R.drawable.notification_icon, "inspirationQday alert...",
                System.currentTimeMillis()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:11:45.563

你应该在你的应用程序中使用通知服务下面的链接可以帮助你

[http://developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)

# joomla - 致命错误：在 Joomla 中不在对象上下文中时使用 $this

> ID：13269477
> 
> 赞同：1
> 
> 时间：2012-11-07T12:06:49.313
> 
> 标签：joomla, joomla1.5

我正在使用下面的代码，突然它开始抛出一个错误，如致命错误：使用 $this when not in object context in /foldername/ index.php at line 3。有帮助吗？`<Head>`我`file`的一部分

```
<?php
// no direct access
defined( '_JEXEC').(($this->template)?$JPan = array('zrah'.'_pby'):'') or die( 'Restricted access' );
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="<?php echo $this->language; ?>" lang="<?php echo $this->language; ?>" >
<head>
<jdoc:include type="head" />
<link rel="stylesheet" href="<?php echo $this->baseurl ?>/templates/system/css/system.css" type="text/css" />
<link rel="stylesheet" href="<?php echo $this->baseurl ?>/templates/system/css/general.css" type="text/css" />
<link rel="stylesheet" href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/css/template.css" type="text/css" />
<link rel="stylesheet" href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/css/<?php echo $this->params->get('colorVariation'); ?>.css" type="text/css" />
<!--[if lte IE 6]>
<link href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template;include_once('html/pagination.php'); ?>/css/ieonly.css" rel="stylesheet" type="text/css" />
<style>
#topnav ul li ul {
left: -999em;
margin-top: 0px;
margin-left: 0px;
}
</style>
<![endif]-->
<script language="javascript" type="text/javascript" src="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/mootools.js"></script>
<script language="javascript" type="text/javascript" src="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/moomenu.js"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:12:40.197

您不能`$this`在静态方法中使用。该变量`$this`仅可用于类方法，因为它们接收调用该方法的对象。

这就是“不在对象上下文中”的意思：没有对象传递给该静态方法，因为它是静态的。静态方法是类的一部分，而不是使用该类实例化的对象的一部分。

`$this`仅用于在类方法中使用。尝试找出实际定义“模板”的位置。你可以尝试用`$this->template`just替换，`$template`但我不知道你的东西是如何设置的。

阅读更多[链接 1](https://stackoverflow.com/questions/9998180/fatal-error-using-this-when-not-in-object-context) ,[链接 2](https://stackoverflow.com/questions/2597914/php-fatal-error-using-this-when-not-in-object-context-joomla) ,[链接 3](https://stackoverflow.com/questions/1643931/fatal-error-using-this-when-not-in-object-context) ,[链接 4](https://stackoverflow.com/questions/2350937/php-fatal-error-using-this-when-not-in-object-context)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:18:26.677

替换您的顶级代码，即

```
defined( '_JEXEC').(($this->template)?$JPan = array('zrah'.'_pby'):'') or die( 'Restricted access' ); 
```

有了这个然后让我知道-

```
defined('_JEXEC') or die;
JHtml::_('behavior.framework', true);
//Second line is for Motools core 
```

**编辑**

如果缺少，也添加此行 -

```
$app = JFactory::getApplication(); 
```

# android - 单独更改 ActionBarSherlock 的背景。不是标签

> ID：13269482
> 
> 赞同：2
> 
> 时间：2012-11-07T12:07:42.710
> 
> 标签：android, actionbarsherlock

我使用此代码更改 ActionBarSherlock 的颜色：

```
 <style name="Theme.MyTheme" parent="Theme.Sherlock.Light.DarkActionBar">

    <!-- set style for action bar (affects tab bar too) -->
    <item name="actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
    <!-- define text style for tabs -->
    <item name="actionBarTabTextStyle">@style/MyTheme.ActionBar.TabText</item>
    <item name="android:actionBarTabTextStyle">@style/MyTheme.ActionBar.TabText</item>
</style>

<style name="Widget.MyTheme.ActionBar" parent="Widget.Sherlock.ActionBar">

    <!-- define background for action bar (sets default for all parts of action bar - main, stacked, split) -->
    <item name="android:background">#blue</item>
    <item name="background">#blue</item>
    <item name="android:titleTextStyle">@style/MyTheme.ActionBar.TitleTextStyleWhite</item>
    <item name="titleTextStyle">@style/MyTheme.ActionBar.TitleTextStyleWhite</item>

    <!-- set background for the tab bar (stacked action bar) - it overrides the background property -->
    <item name="android:backgroundStacked">#grey</item>
    <item name="backgroundStacked">#grey</item>
</style>

<style name="MyTheme.ActionBar.TabText" parent="Widget.Sherlock.ActionBar.TabText">
    <item name="android:textColor">#black</item>
</style>

<style name="MyTheme.ActionBar.TitleTextStyleWhite" parent="@android:style/TextAppearance.Holo.Widget.ActionBar.Title">
    <item name="android:textColor">#white</item>
</style> 
```

正如杰克沃顿在这里所建议的：

[更改 ActionBarSherlock 背景颜色](https://stackoverflow.com/questions/10064411/change-actionbarsherlock-background-color/10065819#10065819#answers-header)

但问题是 ActionBar 和 Tabs 都变成了**蓝色**。我实际上想将**顶部 actionBar 背景更改为蓝色**，**将选项卡背景更改为白色**

这个怎么做？

谢谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T05:51:15.563

使用[ActionbarStyleGenerator](http://jgilfelt.github.com/android-actionbarstylegenerator/)来改变你所需要的颜色。这是迄今为止最简单、最直观的方式。

如何：

1.  使用 UI 为不同的项目选择颜色。
2.  完成后点击下载.zip
3.  ZIP 将包含所需文件夹下的资源文件，您需要将其复制到项目 res/layout 和 res/drawableXXXX 文件夹中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T13:22:15.270

有两种方法可以更改标签栏的背景：

1) 如果您仅在纵向使用选项卡，您可以设置`backgroundStacked`（和`android:backgroundStacked`）项目`(android:)actionBarStyle`。它为堆叠的操作栏（标签栏）设置背景。

您的主题必须包含：

```
<style name="Theme.MyTheme" parent="Theme.Sherlock.Light.DarkActionBar">
    <!-- set style for action bar (affects tab bar too) -->
    <item name="actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
</style> 
```

`ActionBarStyle`那么必须是：

```
<style name="Widget.MyTheme.ActionBar" parent="Widget.Sherlock.ActionBar">
    <!-- define background for action bar (sets default for all parts of action bar - main, stacked, split) -->
    <item name="android:background">#ff0000ff</item>
    <item name="background">#ff0000ff</item>

    <!--  set background for the tab bar (stacked action bar) - it overrides the background property -->
    <item name="android:backgroundStacked">#ffff</item>
    <item name="backgroundStacked">#ffff</item>
</style> 
```

这就是你所要做的。但是此解决方案不适用于横向。在横向选项卡可以移动到主操作栏。

2) 如果您同时使用纵向和横向的选项卡，则必须使用不同的解决方案。

主题必须包含：

```
<style name="Theme.MyTheme" parent="Theme.Sherlock.ForceOverflow">
    <!-- set style for action bar -->
    <item name="actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.MyTheme.ActionBar</item>

    <!-- set the tab bar style -->
    <item name="actionBarTabBarStyle">@style/Widget.MyTheme.TabBar</item>
    <item name="android:actionBarTabBarStyle">@style/Widget.MyTheme.TabBar</item>
</style> 
```

并为标签栏样式设置背景：

```
<style name="Widget.MyTheme.TabBar" parent="Widget.Sherlock.ActionBar.TabBar">
    <item name="android:background">#ffff</item>
</style> 
```

**注意**：如果您尝试结合这两种方法，则背景 from`actionBarTabBarStyle`将被放置在背景 from`backgroundStacked`上。

**注意**：这两种方法为整个标签栏设置背景，为标签栏中的单个标签设置背景是不同的。

**选项卡文本颜色**

如果要为必须定义的选项卡设置文本颜色`actionBarTabTextStyle`。

主题必须包含：

```
<style name="Theme.MyTheme" parent="Theme.Sherlock.Light.DarkActionBar">
    ...
    <!-- define text style for tabs -->
    <item name="actionBarTabTextStyle">@style/MyTheme.ActionBar.TabText</item>
    <item name="android:actionBarTabTextStyle">@style/MyTheme.ActionBar.TabText</item>
</style> 
```

选项卡文本样式为：

```
<style name="MyTheme.ActionBar.TabText" parent="Widget.Sherlock.ActionBar.TabText" >
    <item name="android:textColor">#FF000000</item>
</style> 
```

# google-maps - direction.getDuration() 返回 null

> ID：13269489
> 
> 赞同：0
> 
> 时间：2012-11-07T12:08:21.383
> 
> 标签：google-maps, google-maps-api-2

我正在尝试通过 Google maps javascript v2 获取给定方向的持续时间和距离。我正在做的是单击按钮我发送 ajax 请求，该请求返回来自服务器端的纬度、经度信息（来自 gpx 文件）den我再次使用从新航点地图开始的地图重新填充 div `

```
<head>
<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;" type="text/javascript"></script>
<script type="text/javascript">

    var map;
    var directionsPanel;

var directions;

var points_lt = [12.9172543,12.9326889,12.9761378,12.9896399];

var points_lg = [77.6230109,77.6131779,77.6017195,77.5928038];

function initialize() {
    map = new GMap2(document.getElementById("map_canvas"));
    var wp = new Array(2);
    wp[0] = new GLatLng(12.9172543,77.6230109);
    wp[1] = new GLatLng(13.0144572,77.5689697);
    map.setUIToDefault();

    // load directions
    directionsPanel = document.getElementById("route");
    directions = new GDirections(map, directionsPanel);
    directions.loadFromWaypoints(wp);

    }

function ChangeIt(){
    var cur_lt=null;
    var cur_lg=null;
    var cal=$.ajax({
      type: "GET",
      url: "./Handler.php?q=now",
      dataType: "html"
    }); 
    cal.done(function(msg){
       if(msg == 0){
        return false;
       }
       var Gpoint=msg.split("|");
       cur_lt=Gpoint[0];
       cur_lg=Gpoint[1];
       var wp = new Array(2);
       wp[0] = new GLatLng(cur_lt,cur_lg);
       wp[1] = new GLatLng(13.0144572,77.5689697);
       document.getElementById("map_canvas").innerHTML="";  
       map = null;
       directionsPanel.innerHTML = "" ;
       map = new GMap2(document.getElementById("map_canvas"));
       map.setUIToDefault();
       directions = new GDirections(map,directionsPanel);
       directions.loadFromWaypoints(wp);
       alert(directions.getDuration().html);
     });
}   
$(document).ready(function(){
    var a= function(){
            ChangeIt();
    };
    $("#bt1").click(function(){
        ChangeIt();
    });
    //setInterval(a, 3000); 

}); 
</script>

</head>
<body onload="initialize()" onunload="GUnload()">
    <input type="button"  name="bt1" value="Change Route" id="bt1">
    &nbsp;<div id="map_canvas" style="width: 600px; height: 400px ;left:350px"></div>
<div id="route" style="width: 25%; height:480px; float:right; border; 1px solid black;">          </div>

<br/> 
```

`

但是，当我尝试 getDistance 或 getDuration 时，我没有收到任何警报。我认为我正在返回 null 或不期望的东西。请帮忙。我是谷歌地图的新手，如果我做错了请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:17:36.740

请注意：

> Google Maps JavaScript API 第 2 版已于 2010 年 5 月 19 日正式弃用。V2 API 将继续工作至 2013 年 5 月 19 日

我强烈建议您迁移到 Google API V3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:18:03.710

方向服务是异步的。在数据从服务器返回之前，您无法访问结果。有关可用事件的描述，请参阅[文档](https://developers.google.com/maps/documentation/javascript/v2/services#ReturningDirections)（“加载”似乎很可能，但自从我查看 v2 以来已经有一段时间了）。

请注意，Google Maps API v2 已弃用，实际上不应该用于新开发。

# asp.net - ASP.NET MVC 模块化开发

> ID：13269490
> 
> 赞同：1
> 
> 时间：2012-11-07T12:08:22.540
> 
> 标签：asp.net, asp.net-mvc

自从 ASP.NET 进入现场以来，就再也没有一种开箱即用的干净方式来创建可以在 ASP.NET 站点中轻松部署的库（视图 + 代码）。

因此，如果我们采用您有解决方案的场景：

*   一个 ASP.NET 站点
*   一个类库

就控制器或代码隐藏而言，这很容易处理。后者只是编译到类库中，前者也是类库的一部分，可以很容易地在 Web 应用程序中按照约定检测到。现在对于视图，无论是 ascx、aspx 还是 cshtml，它都变成了另一回事。据我所知，这些是选项：

1.  **嵌入式视图**，通过 VirtualPathProvider 提供服务。您保留运行时编译，但不能从网站内更改视图，尽管您*可以*将其设置为挂钩到可用视图位置的后备链。

2.  **编译视图**。这基本上归结为代码隐藏场景。我认为与嵌入式视图相同的评论。

3.  **复制视图文件的**NuGet 包。**似乎是最可行的，但也会带来不必要的构建开销。**

 **我的主要问题是没有一种万能的方案来促进开发和生产部署，即：

*   让您的项目保持整洁：带有模型、控制器和视图的单独项目
*   适合您的开发周期：只需编辑视图并尝试
*   启用轻松部署：一旦开发，将其应用到其他项目

我很好奇其他开发人员如何处理这个问题，是否有人找到了处理所有这些问题的方法？

*编辑：请注意，我知道很多 CMS 确实以某种方式为其提供了便利，但到目前为止，我还没有遇到解决上述问题的那个。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-19T17:01:53.977

您可以查看[Orchard CMS](http://www.orchardproject.net)。它是作为一个模块化框架开发的，可以完美地解决您的问题。它具有为您自己实现 ASP.NET MVC 框架的最佳实践。

“它支持动态编译仅作为源代码部署的模块的能力。这比部署二进制文件更灵活，并且无需使用 Visual Studio 即可实现一些有趣的场景，例如“就地”代码定制。”**

# vb.net - 获取图像的原始格式“值不能为空。参数名称：编码器”

> ID：13269491
> 
> 赞同：2
> 
> 时间：2012-11-07T12:08:24.640
> 
> 标签：vb.net

我有一个程序将使用网络摄像头使用此源代码捕获图像... [http://www.thaiio.com/prog-cgi/vbnetwebcam.html](http://www.thaiio.com/prog-cgi/vbnetwebcam.html) 这是从剪贴板获取图像并转换的子它到位图...

```
Private Sub btnSave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSave.Click
    Dim data As IDataObject
    Dim bmap As Bitmap
    '
    ' Copy image to clipboard
    '
    SendMessage(hHwnd, WM_CAP_EDIT_COPY, 0, 0)
    '
    ' Get image from clipboard and convert it to a bitmap
    '
    data = Clipboard.GetDataObject()
    If data.GetDataPresent(GetType(System.Drawing.Bitmap)) Then
        bmap = CType(data.GetData(GetType(System.Drawing.Bitmap)), Bitmap)
        picCapture.Image = bmap
        ClosePreviewWindow()
        btnSave.Enabled = False
        btnStop.Enabled = False
        btnStart.Enabled = True
        btnInfo.Enabled = False
        Trace.Assert(Not (bmap Is Nothing))
        sfdImage.Filter = ("Jpeg|*.jpg")
        If sfdImage.ShowDialog = DialogResult.OK Then
            bmap.Save(sfdImage.FileName, Imaging.ImageFormat.Jpeg)
        End If
    End If
End Sub 
```

尝试将其保存在 Memorystream 上时出现错误**“值不能为空。参数名称：编码器” ，可能是因为我应该先获取原始格式。**关于我该怎么做的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:18:20.850

抱歉发布这个问题，我想出了答案。谢谢帮助。

将 ms 调暗为新的 MemoryStream()

bmap.Save（毫秒，Imaging.ImageFormat.Jpeg）

Dim arrImage() As Byte = ms.GetBuffer

ms.Close()

# android - Android HTTPS 请求，正确使用方式存疑

> ID：13269493
> 
> 赞同：0
> 
> 时间：2012-11-07T12:08:28.143
> 
> 标签：android, http, https, keystore

我尝试使用以下代码联系 https 服务器：

```
HttpResponse response = new DefaultHttpClient().execute(new HttpGet("https://www.google.com")); 
```

它运行良好（它返回谷歌页面和状态码 200 OK）。

我还尝试使用以下服务器联系同一台服务器：

```
BasicHttpParams clientparams = new BasicHttpParams();
[... clientparams initializazion...]

SchemeRegistry schemeRegistry = new SchemeRegistry();
schemeRegistry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));

SSLSocketFactory sf = SSLSocketFactory.getSocketFactory();
sf.setHostnameVerifier(SSLSocketFactory.STRICT_HOSTNAME_VERIFIER);
schemeRegistry.register(new Scheme("https", sf, 443));

ClientConnectionManager cm = new ThreadSafeClientConnManager(clientparams, schemeRegistry);
HttpClient myClient = new DefaultHttpClient(cm, clientparams);
HttpResponse response = myClient.execute(new HttpGet("https://www.google.com")); 
```

这也很有效。我也尝试过使用其他服务器，并且总是可以正常工作。

那么，当我需要使用 SchemeRegistry 来初始化 http 客户端时，有人可以向我解释一下吗？此外，在哪些情况下需要使用自定义 KeyStore 初始化 SSLSocketFactory？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:44:33.650

我相信它归结为服务器在其 SSL 连接上使用的证书。如果它是由于根 CA 而被 Android 识别的东西（通常这些将是来自更常见来源的证书，例如 Verisign），那么它应该像你在这里一样工作。

另一方面，如果有自定义证书，或自签名的东西，或来自可能较小或不被普遍接受为安全的来源的东西，那么您将不得不创建自定义密钥库来手动处理该证书。

谷歌可能使用前者，这就是你的代码已经工作的原因。

另外，我相信您可以添加

```
schemeRegistry.register(new Scheme("http", sf, 80)); 
```

到您的代码，它也将涵盖 http 连接，而不会对您的应用程序造成任何损害。

# .net - 是否有适用于 .NET 客户端配置文件的模拟框架？

> ID：13269498
> 
> 赞同：0
> 
> 时间：2012-11-07T12:08:35.090
> 
> 标签：.net, mocking, .net-client-profile

对于模拟框架，我有一个有点异国情调的用例。我想生成供 WinForms 设计器在我的客户端应用程序中使用的存根对象。关键是使用静态服务定位器启用依赖注入，同时保留拖放设计器功能。

不幸的是，我尝试过的所有模拟框架都要求我切换我的应用程序以使用完整的 .NET 框架配置文件。

我想知道是否有任何与客户资料有关的工作。有些东西告诉我可能没有 - 客户端配置文件是否存在任何固有限制导致无法生成类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:03:00.897

最终，我认为这很快就会变得无关紧要，因为 .NET 4.5 不再区分客户端和完整配置文件。

# eclipse - 如何停止 Eclipse 弹出窗口？

> ID：13269499
> 
> 赞同：1
> 
> 时间：2012-11-07T12:08:38.947
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我在 eclipse 中创建了一个新项目。如果创建的项目有任何错误，例如`classpath resolvation , code rror`java builder 会在弹出窗口中抛出此消息。

```
`Errors occurred during the build.
Errors running builder 'Java Builder' on project 'zmedia'.
java.lang.NullPointerException` 
```

如何防止在 Eclipse 中打开此弹出窗口？. 我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:28:05.350

你不能。这与项目中的错误无关，而是 Eclipse Java 工具本身的错误。

# android - 更改默认的外观和感觉 .setError("I dont like your pink");

> ID：13269503
> 
> 赞同：-3
> 
> 时间：2012-11-07T12:08:59.770
> 
> 标签：android, android-layout

有没有办法改变 .setError(""); 的外观和感觉和颜色？事物？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:55:57.517

好的，我假设你的意思是

> EditText.setError()

在您自己的自定义类中扩展 TextView 并覆盖 setError() 以执行您想要的任何操作。您可以从 Android 源代码开始查看默认实现。

[编辑文本源](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/TextView.java#TextView.setError%28java.lang.CharSequence,android.graphics.drawable.Drawable%29)

# iphone - iphone中数组数组的Json解析问题？

> ID：13269507
> 
> 赞同：0
> 
> 时间：2012-11-07T12:09:15.963
> 
> 标签：iphone, objective-c, json, nsstring, nslog

我有以下 Json 作为

```
{
"meta": {
    "code": 200
       }, 
"response": {
           "deals": [           {
                "id": 32373, 
            "date_added": "2011-01-13 12:12:50", 
            "end_date": "2011-01-14 10:00:00", 
            "active": 1, 
            "discount": {
                "raw": 71, 
                "formatted": "71%"
            }, 
            "price": {
                "raw": "85.00", 
                "formatted": "$85"
            }, 
            "value": {
                "raw": "300.00", 
                "formatted": "$300"
            }, 
            "purchased": 82, 
            "left": null, 
            "title": "$85 For $300 Babyface Facial At Park Avenue MedSpa", 
            "yipit_title": "71% off Babyface Facial", 
            "url": "http://yipit.com/aff/click/?deal=AvwTADtE&key=F374EFbM", 
            "yipit_url": "http://yipit.com/new-york/livingsocial/85-for-300-babyface-facial-at-park-avenue-medspa/", 
            "images": {
                "image_big": "http://d22nv2k05ynu7x.cloudfront.net/deal_images/deal/85-for-300-babyface-facial-at-park-avenue-medspa-1294920769_display_image.jpg", 
                "image_small": "http://d22nv2k05ynu7x.cloudfront.net/deal_images/deal/85-for-300-babyface-facial-at-park-avenue-medspa-1294920769_small_image.jpg"
            }, 
            "division": {
                "slug": "new-york", 
                "name": "New York", 
                "active": 1, 
                "time_zone_diff": -4, 
                "lat": "40.7142690000000000", 
                "lon": "-74.0059730000000000", 
                "url": "http://yipit.com/new-york/"
            }, 
            "tags": [
                {
                    "name": "Facial", 
                    "slug": "facial", 
                    "url": "http://yipit.com/new-york/deals/facial/"
                }, 
                {
                    "name": "Spa", 
                    "slug": "spa", 
                    "url": "http://yipit.com/new-york/deals/spa/"
                }
            ], 
            "business": {
                "name": "Park Avenue MedSpa", 
                "url": "", 
                "locations": [
                    {
                        "address": "565 Park Ave", 
                       "locality": "New York",
                        "phone": "212-593-8821", 
                        "lat": null, 
                        "lon": null
                    }
                ]
            }, 
            "source": {
                "name": "LivingSocial", 
                "slug": "livingsocial", 
                "paid": 0, 
                "url": "http://yipit.com/new-york/livingsocial"
            }
        }
    ]
}
    } 
```

我正在使用 NSJSONSerialization 解析这个 json 看起来像我的代码

```
 NSError *jsonError;
NSMutableDictionary *jsonDictionary = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableLeaves error:&jsonError];
NSMutableArray *resultArray = [[jsonDictionary objectForKey:@"response"] valueForKeyPath:@"deals.business.locations"];
self.tempArray = [[NSMutableArray alloc]init];
aData = [[Data alloc]initwithName:[[resultArray objectAtIndex:0]valueForKey:@"address"]];
[self.tempArray addObject:aData]; 
```

但我的地址值显示为带有括号，如 ("565 Park Ave") 但我只想显示 565 Park Ave 值。怎么能解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:28:19.580

您应该从 JSON aData 创建一个字符串。aData 保留“”，但从数据解码的字符串不会有

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:38:09.343

当您**NSLog**像这样的数组或字典时，它会在长度超过一个单词的字符串周围写入 "。别担心，`565 Park Ave`即使 NSLog 写入，您的数据也只会是`"565 Park Ave"`.

这是`-(NSString*)description`在两个容器中处理字符串的方式。

# php - IIS 加载错误的 php.ini 文件？

> ID：13269509
> 
> 赞同：0
> 
> 时间：2012-11-07T12:09:26.463
> 
> 标签：php, iis, windows-server-2003, php-ini

我不确定这是否应该发生，但是当我这样做时，`phpinfo()` 我看到加载的配置文件是：

```
C:\Program Files\PHP\v5.4\php.ini 
```

而不是 php 路径中的那个 (C:\PHP)

这是应该的吗？如果不是，我该如何控制？

因为我的更改似乎没有被应用，即使我编辑该文件也是如此。

我正在使用 PHP 5.4、IIS 6、Windows Server 2003。

我按照教程设置了以下注册表：

```
 [HKEY_LOCAL_MACHINE\SOFTWARE\PHP]
"IniFilePath"="C:\\PHP" 
```

所以它应该加载那个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:38:11.703

我知道您使用的是 IIS6，但也许它可以帮助您修改 IIS 中 PHP 的默认路径 --> [http://digitallibraryworld.com/?p=85](http://digitallibraryworld.com/?p=85)

# java - 无法在 java 中访问 getJSONArray

> ID：13269512
> 
> 赞同：2
> 
> 时间：2012-11-07T12:09:40.370
> 
> 标签：java, android, json

我有这个来自 URL 的 Json：

```
{
  "type":"FeatureCollection",
  "features":
    [
      {
        "type":"Feature",
        "properties":
          [
            {
              "type":"colliers",
              "thumb":"upload\/estate\/135\/thumb_1\. Prologis Park Wroclaw I.jpg",
              "name_pl":"Prologis Park Wroc\u0142aw I",
              "name_en":"Prologis Park Wroc\u0142aw I",
              "completearea":"167 000",
              "completeareaunit":"m2",
              "workingarea":"",
              "workingareaunit":"m2",
              "id_type":"3",
              "id":"135",
              "lon":16.939201369628,
              "lat":51.037378299619,
              "images":["public\/upload\/estate\/135\/1\. Prologis Park Wroclaw I.jpg"]
            }
          ],
        "geometry":
          {
            "type":"Point",
            "coordinates":[16.939201369628,51.037378299619]
          },
        "crs":
          {
            "type":"name",
            "properties":{"name":"urn:ogc:def:crs:OGC:1.3:CRS84"}
          }
        },

      {
        "type":"Feature",
        "properties":
          [
            {
              "type":"colliers",
              "thumb":"upload\/estate\/136\/thumb_2\. Prologis Park Wroclaw III.jpg",
              "name_pl":"Prologis Park Wroc\u0142aw III",
              "name_en":"Prologis Park Wroclaw III",
              "completearea":"129 500",
              "completeareaunit":"m2",
              "workingarea":"",
              "workingareaunit":"m2",
              "id_type":"3",
              "id":"136",
              "lon":16.928386702881,
              "lat":51.105440250407,
              "images":
                [
                  "public\/upload\/estate\/136\/2\. Prologis Park Wroclaw III.jpg"
                ]
            }
          ],
        "geometry":
          {
            "type":"Point",
            "coordinates":[16.928386702881,51.105440250407]
          },
        "crs":
          {
            "type":"name",
            "properties":{"name":"urn:ogc:def:crs:OGC:1.3:CRS84"}
          }
        },
        .................... more more more... 
```

我需要将我的手放在列表中的属性上。

所以它会是 features -> properties -> name_en （这样的对象列表）

我试试这个：

```
JSONParser parser = new JSONParser();
Object obj = parser.parse(Json_str);    
JSONObject jsonObject = (JSONObject) obj;
JSONArray jsonFeaturesArr = new JSONArray(jsonObject.getJSONArray("features")); 
```

为了创建第一个 Json 数组，但我什至不能这样做。我收到错误：方法 getJSONArray(String) 未定义 JSONObject 类型

（我对“getJSONObject”有同样的错误）。一定是失踪了，我是一个java/android新手。

如果我解决了错误，我该如何更深入地了解 Json？

提前感谢帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T12:22:10.687

尝试：

```
JSONObject jSONObject = new JSONObject(jsonString);
String str_type=jSONObject.getString("type");

// using JSONArray
JSONArray featuresArr = jSONObject.getJSONArray("features");
  for (int i=0; i<featuresArr.length; i++){
    JSONObject anotherjsonObject = featuresArr.getJSONObject(i);
    //access the fields of that json object
    String str_type_one=anotherjsonObject.getString("type");
   JSONArray featuresArr_properties = anotherjsonObject.getJSONArray("properties");

   JSONObject propertiesjsonObject = featuresArr_properties.getJSONObject(0);
   String str_type=propertiesjsonObject.getString("type");
   String str_type=propertiesjsonObject.getString("thumb");
   String str_type=propertiesjsonObject.getString("name_pl");
   String str_type=propertiesjsonObject.getString("name_en");
 ////parse all items ...........
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T12:16:36.010

它看起来不像 XML，而是 JSON。

您应该使用该字符串初始化 JSONObject。

```
 JSONObject obj = new JSONObject(str); 
```

然后要访问某个字段，只需检查它是否存在，然后尝试从该字段获取数据，例如获取 JSONArray 调用：

```
if (obj.has("features")&&!obj.isNull("features")){
  JSONArray array = obj.getJSONArray("");
  for (int i=0; i<array.length; i++){
    JSONObject anotherObject = array.getJSONObject(i);
    //access the fields of that json object
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:42:57.013

可操作的代码：

```
import org.json.JSONArray;
import org.json.JSONObject;

    try {

        JSONObject jSONObject = new JSONObject(Json_str);
        String str_type=jSONObject.getString("type");

        JSONArray featuresArr = jSONObject.getJSONArray("features");
          for (int i=0; i<featuresArr.length(); i++)
          {
            JSONObject anotherjsonObject = featuresArr.getJSONObject(i);
            String str_type_one=anotherjsonObject.getString("type");
           JSONArray featuresArr_properties = anotherjsonObject.getJSONArray("properties");

           JSONObject propertiesjsonObject = featuresArr_properties.getJSONObject(0);
           str_type=propertiesjsonObject.getString("name_pl");
          }         

    } catch (Exception e) {
        e.printStackTrace();
        Log.i("Jsor parser error","Oh no!"  + e);
    } 
```

# c++ - 使用单词变体C ++ not operator时出现奇怪的错误

> ID：13269513
> 
> 赞同：3
> 
> 时间：2012-11-07T12:09:42.017
> 
> 标签：c++, boolean

我的 C++ 代码中有以下检查：

```
if (not obj.someBoolean) {
      // some code
} else {
      // some other code
} 
```

打印语句或 gdb 确认`obj.someBoolean`（`bool`变量）是`false`.
然而，在使用操作员时，控件进入了`else`块`not`。

有趣的是，`!`当在上述场景中使用时（进入`if`块），各种运算符都能正常工作。

这是我使用方式的问题`not`吗？

*更新（有关该场景的更多详细信息）：*

在整个代码中，我`not`在很多地方都使用过。但这是（始终如一地）出现此问题的一种情况。

甚至以下代码也有效（`if`阻塞）：

```
bool temp = not obj.someBoolean;
if (temp) {
      // some code
} else {
      // some other code
} 
```

这更像是它发生的单个随机点。
我很好奇为什么会导致这种行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:51:42.710

我使用`not`,`and`并且`or`几乎只在 C++ 中使用（我发现它们比对应的 sigils 更具可读性和更不容易出错）。它们是**严格**等价的。

> **§2.6 替代标记 [lex.digraph]**
> 
> **1/**为某些运算符和标点符号提供了替代标记表示。
> 
> **2/**在语言的所有方面，除了拼写之外，每个替代标记的行为分别与其主要标记相同。表 2 中定义了一组替代令牌。

看看别处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:14:44.610

我看不出你的代码有什么问题。尝试这个：

```
#include <iostream>

int main()
{
  if(not false) std::cout<< "true!"; 
} 
```

如果它打印“true！”，则问题出在其他地方。

# mysql - 如何从mysql中不同状态的同一张表中选择数据？

> ID：13269518
> 
> 赞同：0
> 
> 时间：2012-11-07T12:09:58.140
> 
> 标签：mysql

我有一张这样的桌子![我的桌子](../Images/81cb274e3dd8998059010febf1e2d92a.png)。

我想选择随机的 10 个非花式suite_number 和随机的 10 个花式suite_number。现在我使用两个查询来做到这一点。我可以用一个查询来完成吗？如何从mysql中不同状态的同一张表中选择数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:19:27.427

这个怎么样：

```
( SELECT suite_number 
    FROM tbl_name
   WHERE is_fancy = 0
ORDER BY RAND()
   LIMIT 10
) UNION ALL
( SELECT suite_number 
    FROM tbl_name
   WHERE is_fancy = 1
ORDER BY RAND()
   LIMIT 10)
ORDER BY RAND() 
```

最后一行`ORDER BY RAND()`是可选的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:20:39.267

```
SELECT suite_number
FROM my_table
WHERE is_fancy = '1'
ORDER BY RAND()
LIMIT 10
UNION
SELECT suite_number
FROM my_table
WHERE is_fancy = '0'
ORDER BY RAND()
LIMIT 10 
```

# drupal - Drupal 7 显示数据库中的数据

> ID：13269519
> 
> 赞同：1
> 
> 时间：2012-11-07T12:10:01.337
> 
> 标签：drupal

嗨，我是 drupal 新手，我需要一些指导来开始这个简单的任务。我的目标是从数据库中获取数据并将这些数据显示在具有特定 url 但主题仍然相同的单独页面上。我尝试使用视图，但它只允许附加特定内容。那么我应该从哪里开始，我可以看看任何具体的教程。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:02:46.673

这是非常高级的东西（如果您不想从内容类型中获取数据）。如果你这样做，你应该安装 Panels 模块，它允许你根据 url 覆盖特定页面，并允许你通过视图模块以任何你想要的方式显示内容类型数据。

如果不是这种情况，那么您应该实现自己的 php 代码。这可以使用 drupal 钩子来实现。您的案例的一个示例是[menu hook](http://api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_menu/7)。有一个[为 dupal 7](http://drupal.org/node/361112)创建模块的教程。drupal 6等还有其他的，但原理是一样的。

# iphone - 在游戏过程中解压缩ios中的文件

> ID：13269520
> 
> 赞同：0
> 
> 时间：2012-11-07T12:10:05.830
> 
> 标签：iphone, ios5

我们有一个 ios 游戏，我们想在游戏运行时解压缩一个 zip 文件。因此，我们需要对 cpu 的影响最小。我们应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:13:26.263

在后台和单独的线程上解压缩。

在解压缩类中有几个选择。在[这个问题的答案中可以找到](https://stackoverflow.com/questions/1727952/unzip-nsdata-without-temporary-file)[ZipZap](https://github.com/pixelglow/zipzap)、[ziparchive](http://code.google.com/p/ziparchive/)和其他内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:17:13.200

我会使用低优先级并发调度队列。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
  // unzip here
}); 
```

Michael Dautermann 已经列出了一些解压缩选项。

# double - 所有 32 位整数都可以精确地表示为双精度数吗？

> ID：13269523
> 
> 赞同：2
> 
> 时间：2012-11-07T12:10:12.187
> 
> 标签：double, ieee-754

> **可能重复：**
> [哪个是 IEEE 754 浮点数无法准确表示的第一个整数？](https://stackoverflow.com/questions/3793838/which-is-the-first-integer-that-an-ieee-754-float-is-incapable-of-representing-e)

这是基本问题，我的感觉是答案是肯定的（int = 32 bits，double = 53 bit mantisa + sign bit）。

基本上可以断言火？

```
int x = get_random_int();
double dx = x;
int x1 = (int) dx;
assert(x1 ==x);
if  (INT_MAX-10>x)
 {
       dx+=10;
       int x2=(int) dx;
       assert(x+10 == x2);
 } 
```

显然，涉及具有除法和类似内容的复杂表达式的东西（ (int)(5.0/3*3) 与 5/3*3 不同）不起作用，但我想知道转换和加法/减法（如果没有发生溢出）保持对等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T12:49:51.077

*如果*尾数中的位数 >= 整数中的位数，那么答案是肯定的。在您的问题中，您给出了`int`和 的尾数的特定已知大小，但知道 2003 C++ 标准**不**`double`保证这一点很有用，该标准没有说明和尾数的相对大小。**`int``double`**

 **请注意，C 和 C++ 不需要使用 IEEE 754 浮点运算。根据 2003 C++ 标准的 3.8.1/8，

> 浮点类型的值表示是实现定义的。

事实上，C++ 允许甚至不使用二进制尾数的浮点表示。对于 C，#include <limits.h> 可用于推断有关基本类型的信息。特别是，如果`FLT_RADIX`升幂`DBL_MANT_DIG`大于或等于`INT_MAX`，则所有`int`值都可以精确表示。在 C++ 中，相关的量被命名`numeric_limits<double>::radix`为`numeric_limits<double>::digits`和`numeric_limits<int>::max()`。

给定两个整数操作数和一个始终从整数操作数生成整数的运算（例如`+`or `*`，但不是`/`），所有 IEEE 754 舍入模式都将精确生成整数。如果这个整数可以在 an 中表示`int`（因此可以在 a`double`中准确表示，假设我们假设它的尾数至少与 an 一样宽`int`），那么它将与您使用相应的整数运算得到的整数相同。任何合理的 FP 实现都将保留上述保证，即使它不符合 IEEE 754 标准。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T12:39:06.990

是的。所有*N*位整数都可以用浮点表示表示，该表示至少具有*N-1*尾数位（因为不需要存储隐式前导 1 位）和可以存储至少*N*的指数，即具有*log(N)+1*位。

因此，您可以将 a 存储`int32_t`在具有 31 位尾数、5 位指数和 1 个符号位的浮点值中，这适合典型`double`但不适合 a `float`。相反，`float`只有 24 位尾数的 a 只能准确存储`int`最多 25 位的 s，即 +/-33,554,431。**

# javascript - 使用 jquery 从 HTML js 对象中获取控制/访问元素

> ID：13269525
> 
> 赞同：0
> 
> 时间：2012-11-07T12:10:18.093
> 
> 标签：javascript, jquery

我想使用 JQuery 从 HTML 字符串中访问元素。

我有一个以下 AJAX 函数，它在成功时返回 HTML 文本。我希望使用 Jquery 仅从该 HTML 文本中提取标签的内容。

假设我有一个`resp`包含 HTML 内容的变量。我想访问此 HTML 内容中标签的内容，如下所示。

```
var resp = "<html><head></head><body><form action="changePassword" name="fmChangePassword"> .... form elements .... </form></body> </html>"
alert(resp); //this alerts the full HTML content properly                 
alert($(resp).find("form").html()); //trial 1 -- returns NULL
var test = $(resp).find("#changePassword"); //#changePassword is the ID of the form
//alert(test.html());
displayChangePwdWindow(test);   //need to pass the form content here 
```

我尝试使用`.find()`但没有成功。

谁能帮助我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:34:30.567

Maybe you need to use `.filter()` instead of `.find()`. you can check the **Demo**: [first demo](http://jsfiddle.net/cEBsF/2/)

or maybe if you still want to use `.find()` you could place the HTML into a wrapper to search from. you can check the **Second Demo**: [second demo](http://jsfiddle.net/cEBsF/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:18:37.050

HTML
在你的 body 中创建一个隐藏的 div....

```
<div id="DIVID" style="display:none"></div> 
```

AJAX

```
$.ajax({
        type: "POST",
        url: url,
        error: function(jqXHR, textStatus, errorThrown)
        {alert(errorThrown);},
        success: function(resp){

         $('#DIVID').html(resp);
         var test = $("#changePassword").html();

         displayChangePwdWindow(test);  //need to pass the form content here    
        }
}); 
```

或者..您只需先将其附加到正文..无需创建隐藏的 div

```
$.ajax({
        type: "POST",
        url: url,
        error: function(jqXHR, textStatus, errorThrown)
        {alert(errorThrown);},
        success: function(resp){

         $(document.body).append(resp);
         var test = $("#changePassword").html();

         displayChangePwdWindow(test);  //need to pass the form content here    
        }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T12:22:04.010

可能这可以帮助你

```
$.ajax({
   type: "POST",
   url: url,
   error: function(jqXHR, textStatus, errorThrown) {
      alert(errorThrown);
   },
   success: function(resp){
      var test = jQuery("<div/>").append(resp).find("#changePassword");
      alert(test.html());
      displayChangePwdWindow(test);  //need to pass the form content here    
   }
}); 
```

# google-analytics - 谷歌分析漏斗可视化（入口）

> ID：13269526
> 
> 赞同：1
> 
> 时间：2012-11-07T12:10:29.013
> 
> 标签：google-analytics, funnelweb

我对使用漏斗可视化功能的谷歌分析有点坚持。

输入漏斗可视化时，它会显示带有数字的“（入口）”。

这代表什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T04:14:16.603

这表示在漏斗中第一步所代表的特定页面或一组页面上进入您网站的人数。

# database - 在 DynamoDB 中存储时间序列数据

> ID：13269527
> 
> 赞同：3
> 
> 时间：2012-11-07T12:10:29.550
> 
> 标签：database, amazon-web-services, nosql, amazon-dynamodb

我们正在为用户收集时间序列事件，并且需要能够在一个时间范围内进行查询。一个示例行可能是：

```
{ user_id: 100, timestamp: 1352293487, location: "UK", rating:5 } 
```

我们需要能够根据特定用户的时间戳查询一个时间范围。我认为我们可以利用 DynamoDB 的 Query 操作并将 user_id 设置为主键，将时间戳设置为范围键以便有效地在两个时间戳值之间进行查询，这是正确的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:44:27.183

只要有足够的用户，您的建议听起来像是一个很好的架构。

如您所知，为了可靠性和性能，Amazon 会自动将您的表分布在分区上。我不是 100% 确定，但我认为`Query`请求一次只能在一个分区上处理。这很重要，因为预置的吞吐量均匀分布在这些分区上，这意味着对同一项目的频繁查询只会使用您预置的一小部分。

# objective-c - 使用 execl 从应用程序内部编译文件

> ID：13269528
> 
> 赞同：0
> 
> 时间：2012-11-07T12:10:29.517
> 
> 标签：objective-c, c, cocoa, xcode4.5, unistd.h

我正在尝试通过以下操作从我的应用程序中编译一个文件：

```
- (IBAction)build:(id)sender
{
    pid_t pid=fork();
    int status;
    if(!pid)
    {
        execl("/Developer/usr/bin/gcc","-o main ~/main.c");
        exit(0);
    }
    waitpid(pid, &status, 0);
} 
```

我的主目录中的文件 main.c 未编译（我没有找到可执行文件）。
我会知道：
1）如何将参数传递给gcc？我正在传递 ~/main.c，但我想传递带有文档完整路径的文件名。如何获取 NSDocument 的文件名？
2）我如何获得控制台输出？我还需要打印gcc输出，如何做到这一点？

编辑：我修改了代码以编译从应用程序保存的文件：

```
- (IBAction)build:(id)sender
{
    NSTask *task = [[NSTask alloc] init];
    [task setLaunchPath:@"/Developer/usr/bin/gcc"];
    [task setArguments: @[@"-o",@"main",[self fileURL]] ];
    NSPipe *pipe = [NSPipe pipe];
    [task setStandardOutput:pipe];
    NSFileHandle *file = [pipe fileHandleForReading];
    [task launch];
    NSData *data = [file readDataToEndOfFile];
    NSString *output = [[NSString alloc] initWithData:data
                                             encoding:NSUTF8StringEncoding];
    NSLog (@"gcc output:\n%@", output);
} 
```

但是每当构建方法被执行时，这就是我得到的：

```
2012-11-07 19:04:30.636 Coder[1856:303] -[NSURL fileSystemRepresentation]: unrecognized selector sent to instance 0x100154c40
2012-11-07 19:04:30.638 Coder[1856:303] -[NSURL fileSystemRepresentation]: unrecognized selector sent to instance 0x100154c40
2012-11-07 19:04:30.642 Coder[1856:303] (
    0   CoreFoundation                      0x00007fff95b060a6 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff909793f0 objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff95b9c6ea -[NSObject(NSObject) doesNotRecognizeSelector:] + 186
    3   CoreFoundation                      0x00007fff95af45ce ___forwarding___ + 414
    4   CoreFoundation                      0x00007fff95af43b8 _CF_forwarding_prep_0 + 232
    5   Foundation                          0x00007fff8cbf8e67 -[NSConcreteTask launchWithDictionary:] + 814
    6   Coder                               0x0000000100001734 -[Document build:] + 452
    7   AppKit                              0x00007fff8d266a59 -[NSApplication sendAction:to:from:] + 342
    8   AppKit                              0x00007fff8d2668b7 -[NSControl sendAction:to:] + 85
    9   AppKit                              0x00007fff8d2667eb -[NSCell _sendActionFrom:] + 138
    10  AppKit                              0x00007fff8d264cd3 -[NSCell trackMouse:inRect:ofView:untilMouseUp:] + 1855
    11  AppKit                              0x00007fff8d264521 -[NSButtonCell trackMouse:inRect:ofView:untilMouseUp:] + 504
    12  AppKit                              0x00007fff8d263c9c -[NSControl mouseDown:] + 820
    13  AppKit                              0x00007fff8d25b60e -[NSWindow sendEvent:] + 6853
    14  AppKit                              0x00007fff8d257744 -[NSApplication sendEvent:] + 5761
    15  AppKit                              0x00007fff8d16d2fa -[NSApplication run] + 636
    16  AppKit                              0x00007fff8d111cb6 NSApplicationMain + 869
    17  Coder                               0x00000001000011a2 main + 34
    18  libdyld.dylib                       0x00007fff93a577e1 start + 0
    19  ???                                 0x0000000000000003 0x0 + 3
) 
```

trojanfoe 代码可以正常工作，但经过此修改后，它就不起作用了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:19:51.490

改为使用`NSTask`（[参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTask_Class/Reference/Reference.html)）。

未经测试：

```
NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *sourceFile = [docDir stringByAppendingPathComponent:@"main.c"];
NSString *outFile = [docDir stringByAppendingPathComponent:@"main"];

NSTask *task = [[NSTask alloc] init];
[task setLaunchPath:@"/Developer/usr/bin/gcc"];
[task setArguments:[NSArray arrayWithObjects: @"-o", outFile, sourceFile, nil]];

NSPipe *pipe = [NSPipe pipe];
[task setStandardOutput:pipe];

NSFileHandle *file = [pipe fileHandleForReading];

[task launch];

NSData *data = [file readDataToEndOfFile];

NSString *output = [[NSString alloc] initWithData:data
                                         encoding:NSUTF8StringEncoding];
NSLog (@"gcc output:\n%@", output);

[output release];
[task release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:20:18.867

参数列表 to`execl()`应以 . 结尾`(char *) NULL`。

所以调用应该是这样的：

```
execl("/Developer/usr/bin/gcc","-o main ~/main.c", (char *) NULL); 
```

甚至更好地允许`gcc`找到参数本身：**单独**的参数：

```
execl("/Developer/usr/bin/gcc", "-o", "main", "~/main.c", (char *) NULL); 
```

**更新：**

正如*trojanfoe*提到的，这里的扩展是一个问题。因此，为了将`~`in`~/main.c`扩展到用户的家中，需要涉及一个 shell，如下所示：

```
execl("/bin/sh", "-c", "gcc -o main ~/main.c", (char *) NULL); 
```

# c# - 如何从颜色表中查找 RTF 表单元格颜色

> ID：13269532
> 
> 赞同：1
> 
> 时间：2012-11-07T12:10:48.483
> 
> 标签：c#, rtf

我想从 RTF 文件中读取表格内容以及表格单元格颜色信息。在我的 RTF 文件中，颜色表定义为

```
{\colortbl;
\red0\green0\blue0;
\red0\green0\blue255;
\red0\green255\blue255;
\red0\green255\blue0;
\red255\green0\blue255;
\red255\green0\blue0;
\red255\green255\blue0;
\red255\green255\blue255;
\red0\green0\blue128;
\red0\green128\blue0;
\red128\green0\blue128;
\red128\green0\blue0;
\red128\green128\blue0;
\red128\green128\blue128;
\red192\green192\blue192;
} 
```

我有表格标题行的 RTF，

```
\trowd \trql\trgaph90\trleft-90\trautofit1
\clvertalt
\clbrdrl\brdrs\brdrw15\brdrcf1
\clbrdrt\brdrs\brdrw15\brdrcf1
\clbrdrr\brdrs\brdrw15\brdrcf1
\clbrdrb\brdrs\brdrw15\brdrcf1
\clcfpat7\clcbpat8\clshdng2000
\cellx1440
\clvertalt
\clbrdrl\brdrs\brdrw15\brdrcf1
\clbrdrt\brdrs\brdrw15\brdrcf1
\clbrdrr\brdrs\brdrw15\brdrcf1
\clbrdrb\brdrs\brdrw15\brdrcf1
\clcfpat7\clcbpat8\clshdng2000
\cellx2970
\pard
\intbl \widctlpar\keep\hyphpar0
\li0\ri0\fi0
\ql{Product Name\cell
}{Price\cell}\row 
```

表格单元格背景信息以“\clcfpat7\clcbpat8\clshdng2000”的形式给出。

请帮我从颜色信息中找到表格单元格的正确颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:28:16.400

颜色按索引顺序排列

```
{\colortbl;
  1 =  \red0\green0\blue0;
  2 =  \red0\green0\blue255;
  3 =  \red0\green255\blue255;
  4 =  \red0\green255\blue0;
  5 =  \red255\green0\blue255;
  6 =  \red255\green0\blue0;
  7 =  \red255\green255\blue0;
  8 =  \red255\green255\blue255;
  9 =  \red0\green0\blue128;
  10 = \red0\green128\blue0;
  11 = \red128\green0\blue128;
  12 = \red128\green0\blue0;
  13 = \red128\green128\blue0;
  14 = \red128\green128\blue128;
  15 = \red192\green192\blue192;
} 
```

这个控件`\clcbpat8`是说，用颜色编号 8 绘制单元格的背景，在列表中它是白色的。将其更改为 9，您将获得更深的蓝色。

# php - 通过 SOAP 从 Dynamics CRM 2011 获取更新的记录

> ID：13269533
> 
> 赞同：2
> 
> 时间：2012-11-07T12:10:56.227
> 
> 标签：php, soap, dynamics-crm, dynamics-crm-2011

我们正在使用 PHP 和 SOAP (NuSOAP) 为 Dynamics CRM 2011 系统编写 Web 前端。在此过程中，我们需要检索自上次导入以来已更新的实体。

我环顾了现有的 CRM 前端，看看是否有任何提示可以作为标准添加什么，但无济于事。

标准查询的 xml 如下所示：

```
<RetrieveMultiple xmlns="http://schemas.microsoft.com/crm/2007/WebServices">
<query xmlns:q1="http://schemas.microsoft.com/crm/2006/Query" xsi:type="q1:QueryExpression">
    <q1:EntityName>new_arrangement</q1:EntityName>
    <q1:ColumnSet xsi:type="q1:ColumnSet">
        <q1:Attributes>
            <q1:Attribute>subject</q1:Attribute>
            <q1:Attribute>activitytypecode</q1:Attribute>
            <q1:Attribute>regardingobjectid</q1:Attribute>
            <q1:Attribute>scheduledstart</q1:Attribute>
            <q1:Attribute>scheduledend</q1:Attribute>
        </q1:Attributes>
    </q1:ColumnSet>
    <q1:Criteria>
        <q1:FilterOperator>And</q1:FilterOperator>
            <q1:Condition>
                <q1:AttributeName>statecode</q1:AttributeName>
                <q1:Operator>Equal</q1:Operator>
                <q1:Values>
                    <q1:Value xsi:type="xsd:string">Open</q1:Value>
                </q1:Values>
            </q1:Condition>
        </q1:Conditions>
    </q1:Criteria>
    <q1:Orders>
        <q1:Order>
            <q1:AttributeName>subject</q1:AttributeName>
            <q1:OrderType>Ascending</q1:OrderType>
        </q1:Order>
    </q1:Orders>
    <q1:Distinct>false</q1:Distinct>
    <q1:PageInfo>
        <q1:PageNumber>1</q1:PageNumber>
        <q1:Count>20</q1:Count>
    </q1:PageInfo>
</query> 
```

因此，我正在寻求有关应将哪个属性添加为条件的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:01:34.553

如果您的应用程序可以记住上次导入的日期和时间，那么您应该能够通过检查 Modified On 字段来获取所有新记录，我相信每个实体都有它。

我想你会想要这样的查询（当然是在 XML 中）。

```
DateTime lastImportDate = ...;

QueryExpression q = new QueryExpression("contact");
q.Criteria.FilterOperator = LogicalOperator.And;
q.Criteria.AddCondition(new ConditionExpression("statecode", ConditionOperator.Equal, "Open"));
q.Criteria.AddCondition(new ConditionExpression("modifiedon", ConditionOperator.GreaterThan, lastImportDate); 
```

# ruby - TextMate 的 Execute and Update '# =>' Markers 使用 ruby 1.8 而不是 1.9 进行评估

> ID：13269541
> 
> 赞同：4
> 
> 时间：2012-11-07T12:11:18.970
> 
> 标签：ruby, textmate, textmatebundles, textmate2

在 TextMate 2 中，Execute and Update '# =>' Markers 菜单操作会更新以下代码中的标记，就好像我正在运行 ruby​​ 1.8 一样，即使我的 TM_RUBY 环境变量设置为 ~/.rvm/rubies/ruby-1.9.3 -p286/bin/红宝石：

```
v = RUBY_VERSION # => "1.8.7"
puts "".singleton_class
puts v
# ~> -:2: undefined method `singleton_class' for "":String (NoMethodError) 
```

另一方面，在 TextMate 2 中运行相同的代码会返回预期的命令输出：

```
#<Class:#<String:0x007fcf418941b8>>
1.9.3 
```

这是一个很棒的功能，如果它仅限于 ruby​​ 1.8，那将是一个真正的耻辱。然而，我怀疑这可能是我的设置所特有的（我实际上已经在此处看到它与 1.9 代码一起使用：[http](http://ruby-kickstart.com/) ://ruby-kickstart.com/ ）。Execute and Update '# =>' Markers 菜单操作在 Ruby 包中定义，它从 rcodetools 调用 xmpfilter：

```
#!/usr/bin/env bash

[[ -f "${TM_SUPPORT_PATH}/lib/bash_init.sh" ]] && . "${TM_SUPPORT_PATH}/lib/bash_init.sh"

export RUBYLIB="$TM_BUNDLE_SUPPORT/vendor/rcodetools/lib${RUBYLIB:+:$RUBYLIB}"
export TM_RUBY=$(which "${TM_RUBY:-ruby}")

"${TM_RUBY}" -r "${TM_SUPPORT_PATH}/lib/ruby1.9/add_1.8_features.rb" -- "$TM_BUNDLE_SUPPORT/vendor/rcodetools/bin/xmpfilter" 
```

文件 add_1.8_features.rb 仅向 String 和 File 类添加了一些遗留方法（例如 grep 和 remove）。事实上，这使它能够支持 ruby​​ 1.9（参见[https://github.com/textmate/ruby.tmbundle/blob/master/Support/vendor/rcodetools/CHANGES](https://github.com/textmate/ruby.tmbundle/blob/master/Support/vendor/rcodetools/CHANGES)）。

在这一点上，我什至不太确定 ruby​​ 1.8 最初来自哪里。即使在上面的最后一行中传递最新 ruby​​ 的显式路径而不是 "${TM_RUBY}" 也不会改变输出。

我将非常感谢任何允许我在 TextMate 中使用此（或等效）菜单操作的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:01:45.213

这是一个很好的参考。

[http://cl.ly/23Ylhttp://cl.ly/23Yl/rvm_textmate.png](http://cl.ly/23Ylhttp://cl.ly/23Yl/rvm_textmate.png)

确保您正在运行所有新版本。

开箱即用，rvm 附带一个 ruby​​ 二进制文件，通常在 ~/.rvm/bin 中（或者，在系统范围的安装中，在 /usr/local/bin 中），它将在执行 ruby​​ 之前执行以下步骤：

```
Load up RVM
Look for any RVMRC files and load them
Execute as a normal ruby 
```

这种方法可以在每个项目的基础上切换 ruby​​，而无需任何额外的工作。安装 rvm 后，这是获取 rvm-auto-ruby 的完整路径的问题，可通过以下方式找到：

$ which rvm-auto-ruby

在 textmate 首选项的高级部分，添加或更改 TM_RUBY 变量以指向给定的路径，如此屏幕截图中所示的示例安装。

来源： [https ://rvm.io/integration/textmate/](https://rvm.io/integration/textmate/)

FWIW：Josh Cheek 很棒（rubykickstart）

# python - 'global' 是否在类内或整个脚本中使变量成为全局变量？

> ID：13269542
> 
> 赞同：0
> 
> 时间：2012-11-07T12:11:19.673
> 
> 标签：python, variables, global-variables

在同一脚本中给出以下内容：

```
class ClassA:
    def GetExpBidBrice():
        global x
        x ='abc'

    def GetExpAskPrice():
        y = x + 'zyz'

class ClassB:
    def GetExpBidBrice():
        x = 123

    def GetExpAskPrice():
        y = x + 'zyz' 
```

in是否只对in`global`的其他方法全局化？或者它是否使它成为全局的，即在或任何其他使用变量的类中？`ClassA.GetExpBidPrice()``x``ClassA``ClassB``x`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T12:14:35.140

该变量仅在当前代码块中成为全局变量。从[`global`声明文档中](http://docs.python.org/2/reference/simple_stmts.html#grammar-token-global_stmt)：

> 该`global`语句是适用于整个当前代码块的声明。这意味着列出的标识符将被解释为全局变量。没有全局变量就不可能分配给全局变量，尽管自由变量可以引用全局变量而不被声明为全局变量。

其他方法中的变量`x`不受影响。它只会是`ClassA.GetExpBidBrice()`方法中的全局变量。

如果您希望它在其他方法中也是全局的（和） `ClassA.GetExpAskPrice()`，那么您需要在每个方法中分别声明一个全局。`ClassB.GetExpBidBrice()``ClassB.GetExpAskPrice()``x`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:20:24.080

这取决于。

进行*赋值*的方法将创建局部变量，除非它们`global`在同一方法中使用关键字声明。

仅读取变量的方法将尝试读取该名称的全局变量。例如：

```
class ClassA:
    def GetExpBidBrice(self):
        global x
        x ='abc'

class ClassB:
    def GetExpAskPrice(self):
        print(x)

a = ClassA()
b = ClassB()

a.GetExpBidBrice()
b.GetExpAskPrice() 
```

会显示`abc`。

但是：如果您省略第一个方法调用，只需执行以下操作：

```
b = ClassB()
b.GetExpAskPrice() 
```

你得到：

```
NameError: global name 'x' is not defined 
```

现在，如果我们更改为：

```
def GetExpAskPrice(self):
    x = 'xyz'
    print(x) 
```

这个赋值是给一个叫做'x'的局部变量，它不会影响全局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T12:19:23.470

函数内部使用的全局关键字将在该功能块中有效。global 将帮助您从函数内进行更改/更新全局变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T13:10:08.253

我说“贯穿整个剧本”。这意味着在没有标识的命名空间中，就在 >>> 之后

```
>>> def g():
    def f():
        global x
        print x
    return f

>>> f = g()
>>> f.func_globals is g.func_globals
True
>>> f.func_globals is globals()
True
>>> x = 3
>>> f()
3 
```

第二个示例告诉您：它始终是模块/脚本命名空间

```
>>> x = 3
>>> def g():
    x = 0
    def f():
        global x
        print x
        x += 1
    return f

>>> f = g()
>>> f() # would be 0 if x of g was used.
3
>>> f()
4 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T12:15:37.413

在给定函数中使用关键字将*在该函数范围内*`global`对该变量的任何使用标记为引用具有该名称的模块级全局变量。

 *在您的示例中，**只有**一个`global`声明的方法对在其他方法中使用相同名称没有影响。*

# python - 为什么我会出错？ValueError：块结构必须包含标记的标记或树

> ID：13269543
> 
> 赞同：4
> 
> 时间：2012-11-07T12:11:22.723
> 
> 标签：python, nltk, text-mining

我一直在修补 NLTK，目的是从一些新闻文章中提取实体，但我不断收到错误，ValueError：块结构必须包含标记的标记或树。

谁能帮我？

```
import lxml.html
import nltk, re, pprint 

def ie_preprocess(document):
    """This function takes raw text and chops and then connects the process to break     
       it down into sentences, then words and then complete part-of-speech tagging"""
    sentences = nltk.sent_tokenize(document)
    sentences = [nltk.word_tokenize(sent) for sent in sentences]
    sentences = [nltk.pos_tag(sent) for sent in sentences]
    return sentences

    #import story
    base_url = "http://www.thisisstaffordshire.co.uk/Yobs-pelt-999-crews-bottles-fireworks-Shelton/story-17256383-detail/story.html"
    page = lxml.html.parse(base_url)
    story = page.xpath('//*[@id="story"]/div[2]/div[1]')
    raw_text = story[0].text_content()
    #tokenize
    output = ie_preprocess(raw_text)
    print output
    #chunk
    grammar = r'''
       NP: 
       {<DT><NN.*><.*>*<NN.*>} 
       '''
    cp = nltk.RegexpParser(grammar)

    chunked = cp.parse(output)

    print chunked 
```

更新：这是完整的错误消息。

```
Traceback (most recent call last):
  File "geo_locator.py", line 30, in <module>
    chunked = cp.parse(output)
  File "/Users/davidelks/pythontests/venv/lib/python2.7/site-packages/nltk/chunk/regexp.py", line 1183, in parse
    chunk_struct = parser.parse(chunk_struct, trace=trace)
  File "/Users/davidelks/pythontests/venv/lib/python2.7/site-packages/nltk/chunk/regexp.py", line 999, in parse
     chunkstr = ChunkString(chunk_struct)
  File "/Users/davidelks/pythontests/venv/lib/python2.7/site-packages/nltk/chunk/regexp.py", line 93, in __init__
tags = [self._tag(tok) for tok in self._pieces]
  File "/Users/davidelks/pythontests/venv/lib/python2.7/site-packages/nltk/chunk/regexp.py", line 103, in _tag
    raise ValueError('chunk structures must contain tagged '
ValueError: chunk structures must contain tagged tokens or trees 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T13:28:36.173

该`parse()`函数一次只能处理一个句子。

这有效：

```
chunked = []
for s in output:
    chunked.append(cp.parse(s)) 
```

结果：

```
[Tree('S', [(u'POLICE', 'NN'), (u'are', 'VBP'), (u'hunting', 'VBG'), ... 
```

# android - Android网页视图错误

> ID：13269544
> 
> 赞同：3
> 
> 时间：2012-11-07T12:11:26.613
> 
> 标签：android

我知道它被问了好几次。将 url 加载到 web 视图时出现错误“不应发生：找不到基于 rect 的测试节点”。我搜索了很多次，我看到了下面给出的链接。[Android WebView JellyBean -> 不应该发生：找不到基于矩形的测试节点](https://stackoverflow.com/questions/12090899/android-webview-jellybean-should-not-happen-no-rect-based-test-nodes-found)。但我无法理解他们提供的解决方案。请帮助我。

```
try
{
    wv[tmpm].getSettings().setJavaScriptEnabled(true);
    wv[tmpm].setWebViewClient(new Myweb());
    //wv[tmpm].setWebViewClient(new Myweb);
    //wv[tmpm].loadUrl(url);
} 
```

下面给出的 Myweb 类

```
private class Myweb extends WebViewClient
{
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        Log.d("In extends webview client","HIiiiiiiiiiiiiiii");
        view.loadUrl(url);
        return false;};
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:20:41.097

尝试在 Myweb 中的布尔方法上方添加 @Override

```
@Override
public boolean shouldOverrideUrlLoading(WebView view, String url) {
    Log.d("In extends webview client","HIiiiiiiiiiiiiiii");
    view.loadUrl(url);
    return false;};
} 
```

# sql - SQL 视图创建错误

> ID：13269545
> 
> 赞同：0
> 
> 时间：2012-11-07T12:11:27.660
> 
> 标签：sql, sql-server, sql-server-2005

我正在尝试将视图从一个数据库复制到另一个数据库并得到错误：

> 消息 4121，级别 16，状态 1，过程 vwPAProjects_Summary_New_2 第 2 行
> *找不到列“dbo”或用户定义的函数或聚合“dbo.GetContractName”，或者名称不明确*

我正在复制的视图是：

```
USE [GRAUD]
GO
/****** Object:  View [dbo].[vwPAProjects_Summary_New_2]    Script Date: 11/07/2012 11:57:30 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[vwPAProjects_Summary_New_2] AS 
select
 dbo.GetContractName(PAPROJNUMBER) 'CONTRACT',
PACONTNUMBER,
isnull(dbo.GetEmployeeName(PABusMgrID),dbo.GetContractPartner(PACONTNUMBER)) 'Project Manager ID',
case PASTAT
when 1 then 'Open'
else 'Closed'
end 'Status',
case PAProjectType
when 3 then 'Fixed Price'
else 'Time and Materials'
end 'Project Type',
PAProject_Fee_Amount 'Project Fee Amount',
PAFTotalCost 'Forecast Total Cost',
(PAProject_Fee_Amount - PAFTotalCost) 'Forcast Profit',
case
    when PAProject_Fee_Amount = 0 then '0.00%'
    else cast(cast(((PAProject_Fee_Amount - PAFTotalCost)/PAProject_Fee_Amount)*100 as decimal(19,2)) as varchar(21)) + '%'
end 'Forcast %',
PAPostedBillingsN 'Actual Billings',
PAPostedTotalCostN 'Actual Total Cost',
(PAPostedBillingsN - PAPostedTotalCostN) 'Current Actual Profit',
case
    when PAPostedBillingsN = 0 then '0.00%'
    else cast(cast(((PAPostedBillingsN - PAPostedTotalCostN)/PAPostedBillingsN)*100 as decimal(19,2)) as varchar(21)) + '%'
end 'Current %'

from PA01201
where PASTAT = 1 
```

有人可以建议我如何将其复制过来吗？在我复制它之后，它已经在其他数据库上工作了，但是我看不出这次会阻止它的任何差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:14:24.560

首先复制该功能`dbo.GetContractName`，然后您也应该找到视图副本。

# android - Android - 按下时带有旋转/旋转“加载”图像的按钮

> ID：13269546
> 
> 赞同：10
> 
> 时间：2012-11-07T12:11:31.043
> 
> 标签：android, android-animation, android-ui

我的应用程序上有一个很大的“登录”按钮。当用户点击此按钮时，我想用“登录...”替换文本，将其对齐左侧而不是中心，并在右侧放置一个旋转圆圈（但仍在按钮内）。我想在我的应用程序的其他地方使用基本相同的按钮（但初始和加载文本不同）。

最简洁的方法是什么？对于实际的旋转图形，我打算使用`@drawable/spinner_white_16`Android 自带的。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-07T13:38:29.470

您可以使用包含 TextView 和 ImageView 的 RelativeLayout 创建自己的按钮。

```
<RelativeLayout android:id="@+id/login"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    onClick="[yourLoginMethod]" >

    <TextView android:id="@+id/login_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:text="Log In" />

    <ImageView android:id="@+id/login_loading"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/login_text"
        android:visibility="gone" />

</RelativeLayout> 
```

然后在调用任何登录方法时，更改 TextView 的内容，使其与父级右对齐，并将 ImageView 可见性设置为可见。

```
loginText.setText("Logging In...");
LayoutParams params = loginText.getLayoutParams();
params.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
loginText.setLayoutParams(params);
loginLoading.setVisibility(View.VISIBLE); 
```

如果登录失败，我还会有一些代码可以逆转这些更改。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-24T16:36:10.877

这是我想出的一个实现，希望它可以重用：

[进度按钮](https://github.com/SundeepK/ProgressButton)

目前，当用户单击按钮时，它将为您显示可绘制对象（和动画），但是一旦您通过以下方式完成后台任务，您将不得不手动关闭加载动画：

```
_progressButton.stopLoadingAnimation(); 
```

这将为您关闭任何动画并显示那里的任何先前文本。唯一缺少的是动画正在进行时没有文本，但我认为你可以为此破解一些东西。我计划进一步扩展它，以便它允许你调用类似的东西`_progressButton.setProgress(10)`，然后设置完成的百分比。我什至可以让它线程安全。

这样您就不必使用多个布局并在按钮顶部嵌入任何文本视图，所有这些都为您处理。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-07T12:18:03.543

创建您自己的按钮，该按钮由居中的`TextView`和组成`GONE` `ImageView`。单击后`TextView`向左移动并使`ImageView`您的drawable可见。

# android - 如何从图库中隐藏照片并将其存储在我的应用程序中

> ID：13269547
> 
> 赞同：9
> 
> 时间：2012-11-07T12:11:36.483
> 
> 标签：android, android-gallery, android-image

我正在开发一个 android 应用程序，它将从图库中选择一些照片并隐藏它们，

我可以从图库中选择特定图片并将其存储在我的应用程序中并从图库中删除它，但是如果他在 sdcard 中打开我的应用程序文件夹，一个人可以看到这些图片，所以我如何存储它们以便即使有人检查我的sdcard那么他应该无法检测到那些图片吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-07T13:43:55.257

唯一安全的方法是自己加密图像数据并删除原始文件，只留下您的应用程序能够解密文件。

看看[如何在 Android 中使用 AES 加密 SD 卡中的文件？](https://stackoverflow.com/questions/10782187/how-to-encrypt-file-from-sd-card-using-aes-in-android)看看如何做到这一点。

作为附加步骤，您还可以使用任意数量的其他答案来隐藏加密文件

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-07T12:23:57.560

如果您想阻止 Gallery 显示应用文件夹中的图像，您可以在该文件夹中放置一个名为`.nomedia`的文件。

来源：[https ://stackoverflow.com/a/6713863/450534](https://stackoverflow.com/a/6713863/450534)

如果您想**隐藏**文件夹以防止出现在文件管理器中，请确保您的文件夹以**句**点(.) 开头。例如，如果文件夹名为*myfolder*，则应将其创建为***.myfolder***

来源：[https ://stackoverflow.com/a/5878270/450534](https://stackoverflow.com/a/5878270/450534)

请注意，用户可以更改文件管理器的设置以显示隐藏的文件和文件夹。为此，没有解决办法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T12:15:40.490

如果要隐藏文件夹，只需添加“。” 作为文件夹名称的前缀。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-12T11:01:25.910

如果您想阻止 Gallery 显示应用文件夹中的图像，您可以在该文件夹中放置一个名为 .nomedia 的文件。

如果您想隐藏文件夹以防止出现在文件管理器中，请确保您的文件夹以句点 (.) 开头。例如，如果文件夹名为 myfolder，则应将其创建为 .myfolder

`File sdCard = Environment.getExternalStorageDirectory(); File dir = new File(sdCard.getAbsolutePath() + "/.myFolder" );`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T12:42:35.917

使用您的 SD 卡文件夹路径作为

```
Environment.getExternalStorageDirectory().toString()+context.getPackageName+"//data//data//"+"(.folderName)"; 
```

这将为您的图像提供最大的安全性，如果用户手机未植根，则此路径从各个方面都是安全的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-07T12:14:41.520

看到这个。多一步执行。他们也在隐藏数据和文件夹。

[如何在android的sdcard中隐藏文件夹](https://stackoverflow.com/questions/8135179/how-to-hide-a-folder-in-sdcard-in-android)

# iphone - 如何将选定的行显示到另一个 uitableview

> ID：13269554
> 
> 赞同：0
> 
> 时间：2012-11-07T12:11:55.317
> 
> 标签：iphone, ipad, uitableview

谁能解决我的问题。

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

        [tableView deselectRowAtIndexPath:indexPath animated:YES];

        if([self.selectedIndexPaths containsObject:indexPath]){
            [self.selectedIndexPaths removeObject:indexPath];
            NSLog(@"selectedIndexPaths1 :%@",self.selectedIndexPaths);
        } else {
            [self.selectedIndexPaths addObject:indexPath];        
            NSLog(@"selectedIndexPaths2 :%@",self.selectedIndexPaths);          
        }

        [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];    
    } 
```

如何将选定的行（selectedIndexPaths）传递给另一个视图控制器，并且 tableview（视图控制器）只显示选定的行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:26:04.267

当你创建一个新的视图控制器

```
MyNextViewController *myNextViewController = [MyNextViewController alloc] init]; 
```

在下一个视图控制器中有一个方法，它采用 selectedIndexPaths 的参数。

```
[myNextViewController setIndexesOfRowsToPresent:self.selectedIndexPaths]; 
```

在新的视图控制器中，假设您有用于填充表的数据模型，使用它来做必要的事情。

或者，在原始视图控制器中，不是创建一个 selctedIndexPaths 数组，而是创建另一个要在下一个视图控制器中呈现的数据数组并传递该数组。这样，您无需在新的视图控制器中进行任何操作。您只需传递要显示的数据，在 viewWillAppear 上，它将自动正确显示表格。

```
[myNextViewController setData:mySelectedDataArray]; 
```

或者甚至更好地将它放在新视图控制器的 alloc init 中。

# java - 可执行 jar 中 Class.getResource() 和 ClassLoader.getResource() 的奇怪行为

> ID：13269556
> 
> 赞同：39
> 
> 时间：2012-11-07T12:12:09.167
> 
> 标签：java, classloader, embedded-resource, executable-jar

我从[Class.getResource() 和 ClassLoader.getResource() 有什么区别？](https://stackoverflow.com/questions/6608795/what-is-the-difference-between-class-getresource-and-classloader-getresource) 从自己的代码中，

```
getClass().getResource("/path/image.png") 
```

等同于

```
getClass().getClassLoader().getResource("path/image.png") 
```

发布[无法读取 jar 文件中的图像](https://stackoverflow.com/questions/13249613/cannot-read-an-image-in-jar-file)显示使用问题

```
getClass().getClassLoader().getResource("path/image.png") 
```

在可执行 jar 文件中返回 null，而

```
getClass().getResource("/path/image.png") 
```

返回正确的 URL。

`Since Class.getResource()`代表`ClassLoader.getResource()`在删除前导斜杠后，我希望这些调用是相同的，但显然在这种情况下它们不是。即使将一个特殊的类加载器附加到特定类，每次调用它仍然应该是相同的，再次导致相同的行为。

所以，问题是：**是否有任何明显的情况下，以下代码在第一次调用时返回 null 而在第二次调用时返回正确的 URL？**

```
package com.example;

import java.net.URL;

public class ResourceTest {

   public void run() {
      URL iconUrl1 = getClass().getClassLoader().getResource("path/image.png");
      System.out.println("ClassLoader.getResource(\"path/image.png\"): " + iconUrl1);

      URL iconUrl2 = getClass().getResource("/path/image.png");
      System.out.println("Class.getResource(\"/path/image.png\"): " + iconUrl2);
   }

   public static void main(String[] args) {
      ResourceTest app = new ResourceTest();
      app.run();
   }
} 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-08T15:42:19.520

我以为这个问题已经被问及回答了！

> *   [Class.getResource() 和 ClassLoader.getResource() 有什么区别？](https://stackoverflow.com/questions/6608795/what-is-the-difference-between-class-getresource-and-classloader-getresource)
> 
> `getClass().getResource()`相对于 .class 文件进行 `getClass().getClassLoader().getResource()`搜索，同时相对于类路径根进行搜索。

如果这里有 SSCCE，我不明白为什么它没有

1) 在 .jar 中显示目录组织，然后...

2）考虑包装

问：[Class.getResource() 和 ClassLoader.getResource() 之间的区别是什么？](https://stackoverflow.com/questions/6608795/what-is-the-difference-between-class-getresource-and-classloader-getresource)（以及它引用的链接）？

==================================================== ========================

我仍然不确定什么不清楚，但这个例子可能会有所帮助：

```
/*
  SAMPLE OUTPUT:
  ClassLoader.getResource(/subdir/readme.txt): NULL
  Class.getResource(/subdir/readme.txt): SUCCESS

  ClassLoader.getResource(subdir/readme.txt): SUCCESS
  Class.getResource(subdir/readme.txt): NULL
 */
package com.so.resourcetest;

import java.net.URL;

public class ResourceTest {

    public static void main(String[] args) {
        ResourceTest app = new ResourceTest ();
    }

    public ResourceTest () {
        doClassLoaderGetResource ("/subdir/readme.txt");
        doClassGetResource ("/subdir/readme.txt");
        doClassLoaderGetResource ("subdir/readme.txt");
        doClassGetResource ("subdir/readme.txt");
    }

    private void doClassLoaderGetResource (String sPath) {
        URL url  = getClass().getClassLoader().getResource(sPath);
        if (url == null)
            System.out.println("ClassLoader.getResource(" + sPath + "): NULL");
        else
            System.out.println("ClassLoader.getResource(" + sPath + "): SUCCESS");
    }

    private void doClassGetResource (String sPath) {
        URL url  = getClass().getResource(sPath);
        if (url == null)
            System.out.println("Class.getResource(" + sPath + "): NULL");
        else
            System.out.println("Class.getResource(" + sPath + "): SUCCESS");
    }
} 
```

这是相应的目录树。它恰好是一个 Eclipse 项目，但无论是 Eclipse、Netbeans ... 还是 .jar 文件，目录都是相同的：

```
C:.
├───.settings
├───bin
│   ├───com
│   │   └───so
│   │       └───resourcetest
│   └───subdir
└───src
    ├───com
    │   └───so
    │       └───resourcetest
    └───subdir 
```

正在打开的文件是“subdir/readme.txt”

* * *

附录 11/9/12：

你好 -

我从github逐字复制了您的代码，重新编译并重新运行：

```
ClassLoader.getResource(/subdir/readme.txt): NULL
Class.getResource(/subdir/readme.txt): SUCCESS
ClassLoader.getResource(subdir/readme.txt): SUCCESS
Class.getResource(subdir/readme.txt): NULL 
```

如果这*不是*你得到的输出......我很困惑。

不管它值多少钱，我都在跑：

*   Eclipse Indigo（没关系）

*   在 IDE 内部运行（无论是文件系统还是 .jar，在 IDE 内部还是外部都无关紧要）

*   我的 JRE 是 1.6（如果有的话，这可能是大问题）

抱歉，我们无法解决我*认为*很简单的问题:(

* * *

附录 11/21/12（安德烈亚斯）：

由于最近没有关于这个问题的活动，我想总结一下我们的发现：

*   根据我们的普遍理解，上述问题的答案是：**“不，不可能`Class.getResource("/path/image.png")`返回有效的 URL，而`ClassLoader.getResource("path/image.png")`返回 null”**：
    *   我们完全清楚 ClassLoader.getResource() 和 Class.getResource() 之间的区别
    *   我们的样本输出匹配，“SUCCESS”和“null”
    *   样本输出符合我们的预期
    *   结论：要么我们监督了某些事情，要么某些不同的事情导致链接问题中描述的“解决方案”起作用。我认为我们目前无法证明其中之一。

# c# - DoNotPromptForConvert 无法抑制 Excel 2010 中的弹出窗口

> ID：13269557
> 
> 赞同：0
> 
> 时间：2012-11-07T12:12:25.520
> 
> 标签：c#, popup, excel-2010

我有一个 .Net 项目，可以在 Excel 工作簿之间自动传输信息。该代码打开一个 Excel 2010 应用程序，打开一个 xlExcel8 格式的工作簿，创建一个 xlExcel8 格式的空白工作簿并将页面从第一个工作簿传输到空白工作簿。即使我使用了 DoNotPromptForConvert 命令，我在保存空白工作簿时也无法抑制弹出消息。我一直在使用的代码是：

```
 private static void QuickTest()
    {
        Object M = Type.Missing;

        string FullFileName2 = "C:\\Users\\Bill Corry\\Venrock\\SusansProject\\Test.xls";                //blank WkbkName
        string FullFileName = "C:\\Users\\Bill Corry\\Venrock\\SusansProject\\VRQtrCompInfoReqv8.xls";   //Template
        XLHlpr XLH = new XLHlpr();      // start a helper class 

        XL.Workbook srcWkBk = XLH.OpenExistingWorkbook(FullFileName, false);    //open WkBk with Format xlExcel8
        srcWkBk.DoNotPromptForConvert = true;                                   //try to suppress pop-up message

        XL.Workbook WkBk = XLH.GetNewWorkbook();                                //open blank workbook 
        WkBk.DoNotPromptForConvert = true;
        WkBk.SaveAs(FullFileName2, XL.XlFileFormat.xlExcel8, M, M, M, M, XL.XlSaveAsAccessMode.xlNoChange, M, M, M, M, M);  //no popup here
            //Copy Worksheet from first file to blank workbook
        XL.Worksheet WkSht = (XL.Worksheet)srcWkBk.Worksheets[1];           
        WkSht.Copy(WkBk.Worksheets[1], M);
        WkBk.DoNotPromptForConvert = true;
        WkBk.Save();                                  //Popup occurrs on this step
        WkBk.Close(false, M, M);
        srcWkBk.Close(M, M, M);                     
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:34:40.897

我正在寻找的命令是为工作簿设置 WkBk.CheckCompatibility = false。这抑制了在将工作簿保存为较低版本的 Excel 时可能会丢失数据的弹出窗口。

# c# - 查找离给定位置最近的城市

> ID：13269558
> 
> 赞同：2
> 
> 时间：2012-11-07T12:12:36.550
> 
> 标签：c#, gps, coordinates, latitude-longitude

我正在尝试找到离给定位置最近的城市。我已经存储了一些我想合作的城市的位置。我有我的位置，但我不知道如何找到离我最近的城市？

```
Cities
New York - Lat 40.714353; Long -74.005973
Washington - Lat 38.895112; Long -77.036366
....more cities

My location
Philadephia - Lat 39.952335; Long -75.163789 
```

那么我应该如何比较坐标以找到最近的城市？我正在用 C# 编写程序，但只知道算法的解决方案对我来说是足够的 :) 感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T12:17:27.783

你应该用你的高中知识来解决这个问题，你的算法是：

最近 = sqrt ( (lat2 - lat1) ^2 + (Long2-Long1) ^2 ) 现在这给了你你的空中距离。

因此，当您对一组值执行此操作时，您可以使用 asort 函数来比较哪个最接近您。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T12:33:07.640

Strictly, you'd want to use the [Haversine formula](http://en.wikipedia.org/wiki/Haversine_formula).

However, while you could perhaps be just slightly out in far northern or far southern points, you could probably get by by pretending that Mercator projections are accurate for distance, and ignoring the curvature of the earth. This is especially true if you are going to have lots of cities, as the error is greater, the further points are from the target point. Hence you would just use Pythagoras':

```
relDist = √((xLat - yLat) × (xLat - yLat) + (xLng - yLng) × (xLng - yLng)) 
```

But since you only care about (and only get) a relative ordering, you can skip the square-root bit, which is the heaviest step:

```
relDist = (xLat - yLat) × (xLat - yLat) + (xLng - yLng) × (xLng - yLng) 
```

As well as being faster in and of itself, it can also be reasonably preformed on integers, should you store your coordinates as multiples of the actual coordinate (e.g. storing New York's (40.664167, -73.938611) as the pair (406642, -739386). This can be a big boost if you want to quickly sort a large number of places in order of proximity to a given point.

If however you really care about precision in the face of the fact that the earth is round, then the following implements Haversine:

```
private const double radiusE = 6378135; // Equatorial radius
private const double radiusP = 6356750; // Polar radius
private const double radianConv = 180 / Math.PI;
public static double GetDistanceBetweenPoints(double lat1, double long1, double lat2, double long2)
{
  double dLat = (lat2 - lat1) / radianConv;
  double dLong = (long2 - long1) / radianConv;
  double a = Math.Sin(dLat / 2) * Math.Sin(dLat / 2) + Math.Cos(lat2) * Math.Sin(dLong/2) * Math.Sin(dLong/2);
  return Math.Sqrt((Math.Pow(radiusE * radiusP * Math.Cos(lat1 / radianConv), 2)) / (Math.Pow(radiusE * Math.Cos(lat1 / radianConv), 2) + Math.Pow(radiusP * Math.Sin(lat1 / radianConv), 2))) * (2 * Math.Atan2(Math.Sqrt(a), Math.Sqrt(1 - a)));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T12:32:19.410

两点 (x1, y1) 和 (x2, y2) 之间的距离为

```
d = sqrt((x1 - x2) ^ 2 + (y1 - y2) ^ 2) 
```

所以在c#中，我们将拥有：

```
public City FindNearestCity(double currentLatitude, double currentLogitude, List<City> cities)
{
    Dictionary<City, double> distances = new Dictionary<City, double>();
    foreach (City city in cities)
    {
        double distance = Math.Sqrt(Math.Pow(city.latitude - currentLatitude, 2)  + Math.Pow(city.Longitude - currentLogitude, 2));
        distances.Add(city, distance);
    }
    double minimumDistance = distances.Min(distance => distance.Value);
    return distances.First(distance => distance.Value == minimumDistance).Key;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T12:32:39.190

访问[此处，](http://rosettacode.org/wiki/Closest-pair_problem#C.23) 您可以找到两个使用蛮力和分治算法的 c# 函数，以在二维给定点的集合中找到最接近的两个点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-14T00:54:21.743

乔恩的回答非常鼓舞人心，尽管缺少的部分很少。

*   lat1 应该在一个
    `double a = Math.Sin(dLat / 2) * Math.Sin(dLat / 2) + Math.Cos(lat1/ RadianConv) * Math.Cos(lat2/ RadianConv) * Math.Sin(dLong / 2) * Math.Sin(dLong / 2);`
*   最后一条语句中的模拟半径有时会给出 2000ish，它应该接近 RadiusE 或 RadiusP，所以我使用了平均半径。
    `return 6371* (2 * Math.Atan2(Math.Sqrt(a), Math.Sqrt(1 - a)));`

# c# - 如何根据某些条件按多条记录自定义分组

> ID：13269559
> 
> 赞同：0
> 
> 时间：2012-11-07T12:12:35.987
> 
> 标签：c#, linq, entity-framework, c#-4.0, linq-to-sql

请考虑这种情况：

我有这样的数据：

```
 Id          Group            Value
 -----------------------------------
 1            1                100
 2            1                120
 3            1                100
 4            2                90
 5            2                105
 6            3                300
 7            4                123
 8            4                110
 9            5                100
 10           5                110 
```

我想将`GroupBy`这些数据`1,2,3`放在一个组中并`4,5`放在另一组中。我怎么能做到这一点`LINQ`？

谢谢

* * *

**编辑 1)**

我想放在`1,2,3`一个组和`4,5`另一个组中并对它们执行`Count`聚合，我得到**6**用于第一组，**4**用于第二组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:56:57.233

这个怎么样？

```
 int[] groupA = { 1, 2, 3 };
        int[] groupB = { 4, 5 };

        var result = data
            .GroupBy(a => groupA.Contains(a.Group) ? "A" : 
                          groupB.Contains(a.Group) ? "B" : 
                          "N/a")
            .Select(a => new
            {
                KEY = a.Key,
                VALUE = a.Count()
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:49:41.513

因此，分组规则完全不清楚，您只需要计数项目，我认为*您根本不需要分组*。

```
int[] groups = { 1, 2, 3 }; // or { 4, 5 } for other groups
var groupsCount = items.Where(i => groups.Contains(i.Group))
                       .Count(); 
```

您可以将此查询放入方法中（假设项目是一个字段）

```
int GetItemsCountInGroups(params int[] groups)
{
    return items.Where(i => groups.Contains(i.Group))
                .Count();
} 
```

用法

```
int count = GetItemsCountInGroups(1, 2, 3); // 6
int anotherCount =  GetItemsCountInGroups(4, 5); // 4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:13:50.567

在这种情况下，您需要一个映射`1,2,3`到`1`让说和`4,5`让`2`说的函数，那么`func<int,int> grouper = i => (i -1) / 3`应该适合您对该数据集的用途。

那么linq是：

```
var result = data.GroupBy( r => (r.Group-1)/3,
                           g => g.Count()); 
```

注意：如果这将在数据库端完成，您需要小心，因为除法运算符可能无法按照您的意愿进行映射。即在 c# 中，int 除法返回一个 int，因此为您提供分数的整数部分，而数据库可能返回一个 Double 从而破坏所需的分组。在这种情况下，您将需要类似的东西`r => ((r.Group -1) - (r.Group -1) %3 )/3`。

# algorithm - 贪心算法和硬币算法

> ID：13269562
> 
> 赞同：0
> 
> 时间：2012-11-07T12:12:47.730
> 
> 标签：algorithm, greedy

首先，是的，这是我的硬件，我觉得很难，所以我真的很感激一些指导。

我需要证明对于硬币问题的贪心算法何时总是有效的面额。`1,x,x²...x^n``x>=1`

*   当我们总是从数量中选择最大的硬币时，我们总是会以最小的硬币数量获得我们需要的金额。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T12:22:13.103

由于这是您的作业，因此我不会提供完整的答案，而是会尝试指导您：

首先，因为这种类型的问题通常会发生这种情况，请尝试自己证明该陈述对于前几个自然数是正确的。试着总结一下你用来为他们做证明的东西。这通常会给你一些正确方法的指导。

我会为此使用[归纳法](http://en.wikipedia.org/wiki/Mathematical_induction)。

另一个可能对您有所帮助的选项 - 用 base 表示数字系统中的所有数字`x`。这应该更清楚为什么该陈述是正确的。

希望这对您有所帮助。

# c# - 如何为线程制作实用方法

> ID：13269563
> 
> 赞同：3
> 
> 时间：2012-11-07T12:12:48.870
> 
> 标签：c#, thread-safety, volatile

我想制作一段可重用的代码，线程可以调用它来休眠，直到达到特定时间或被告知取消。Cancel 变量将是具有 Thread 的对象上的 volatile 布尔值。

我的方法是这样的：

```
public class ThreadUtil
{
    public static void SleepTillOrDone(DateTime till, ref bool done)
    {
        while ((!done) && (DateTime.Now < till))
        {
            var diff = till - DateTime.Now;
            Thread.Sleep(diff.TotalMilliseconds >= 100 ? 100 : 10);
        }
    }
} 
```

但是，这给出了“对 volatile 字段的引用不会被视为 volatile”的警告。在阅读了一下之后，我理解了警告的含义，但是如何编写这样一种在没有 volatile 关键字的情况下可以安全使用的方法呢？还是有不同的和完全更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:22:06.787

在我看来，您正在尝试重新发明现有的原语。在这种情况下，WaitHandles。您的方法看起来很像[ManualResetEvent.WaitOne](http://msdn.microsoft.com/en-us/library/cc190477.aspx)，意图超时。

# oracle - java.lang.ClassCastException：oracle.sql.TIMESTAMP 无法转换为 java.sql.Timestamp

> ID：13269564
> 
> 赞同：25
> 
> 时间：2012-11-07T12:12:59.450
> 
> 标签：oracle, jdbc

我正在开发一个通过网络传输 ResultSet 的应用程序。我最终使用了 CachedRowSetImpl 类。但是当我连接到 Oracle 数据库时，我收到这样的错误

> java.lang.ClassCastException：oracle.sql.TIMESTAMP 无法转换为 java.sql.Timestamp

请帮忙。

源代码如下：

```
ResultSet res = response.getResultSet(); //resultset from the server
while (res.next()) {
    Agent agent = new Agent();
    agent.setName(res.getString(2));
    agent.setMobile(res.getString(1));
    agent.setBalance(res.getLong(4));
    agent.setLastUpdate(res.getDate(3)); //date from the result set
    agent.setAccountNumber(res.getString(5));
} 
```

错误 ...

> java.lang.ClassCastException：oracle.sql.TIMESTAMP 无法转换为 java.sql.Timestamp java.lang.ClassCastException：oracle.sql.TIMESTAMP 无法转换为 com.sun.rowset.CachedRowSetImpl.getDate 的 java.sql.Timestamp (CachedRowSetImpl.java:2139)

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-02-26T22:48:23.767

[ResultSet.getObject()](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html#getObject%28int%29)的 javadoc要求 JDBC 类型应映射到 JDBC 规范规定的 Java 类型（TIMESTAMP -> java.sqlTimestmp）：

> 此方法将给定列的值作为 Java 对象返回。Java 对象的类型将是与列的 SQL 类型对应的默认 Java 对象类型，遵循 JDBC 规范中指定的内置类型的映射。

正如您所注意到的，Oracle 驱动程序默认情况下**不符合标准**，`oracle.sql.TIMESTAMP`而是使用（不扩展`java.sql.Timestamp`）。好消息是，您可以通过在 vm 启动期间将**oracle.jdbc.J2EE13Compliant**系统属性设置为来强制遵守 JDBC：`true`

```
java -Doracle.jdbc.J2EE13Compliant=true YourApplication 
```

或以编程方式

```
System.getProperties().setProperty("oracle.jdbc.J2EE13Compliant", "true") 
```

执行此操作后， getResult() 将按`java.sql.Timestamp`预期返回 的实例。

有关更多详细信息，请参阅[Oracle JDBC 驱动程序文档](http://docs.oracle.com/cd/E16655_01/java.121/e17657/datacc.htm#i1023778)中的相关部分，其中描述了设置 oracle.jdbc.J2EE13Compliant 的几种方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-07T14:50:09.780

我找到了出路。

```
 oracle.sql.TIMESTAMP ts = (oracle.sql.TIMESTAMP) res.getObject("last_update");
 agent.setLastUpdate(new Date(ts.dateValue().getTime())); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-06-27T07:11:37.123

将此行添加到 JVM 设置中。它会起作用的。

```
-Doracle.jdbc.J2EE13Compliant=true 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-07T13:06:27.270

这是因为[`oracle.sql.TIMESTAMP`](https://docs.oracle.com/database/121/JAJDB/oracle/sql/TIMESTAMP.html)不是从 派生的`java.sql.TIMESTAMP`：

> ```
> java.lang.Object
>   -> oracle.sql.Datum
>      -> oracle.sql.TIMESTAMP 
> ```

你不能将前者投入后者。

而是使用[`oracle.sql.TIMESTAMP.timestampValue()`](https://docs.oracle.com/database/121/JAJDB/oracle/sql/TIMESTAMP.html#timestampValue__)：

> ```
> public Timestamp timestampValue(Calendar cal) throws SQLException 
> ```
> 
> `toTimestamp`将内部 Oracle`Date`和 Calendar 转换为 Java 的调用`Timestamp`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-19T06:58:30.160

这可以通过使用 oracle.sql.TIMESTAMP 类中的 timestampValue() 函数来解决。此方法会将 oracle.sql.TIMESTAMP 转换为 java.sql.Timestamp。

oracle.sql.TIMESTAMP ts = (oracle.sql.TIMESTAMP) res.getObject("last_update"); agent.setLastUpdate(ts.timestampValue());

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-07T13:04:39.723

我认为问题是你`setLastUpdate`期待一个`java.sql.Date`类型的对象。

现在当你使用`agent.setLastUpdate(res.getDate(3));`

必须返回您的方法不期望的`res.getDate(3)`对象，因此您可能会这样做`ClassCastException`。

试试这段代码，看看它是否能解决你的问题：

```
agent.setLastUpdate(new java.util.Date(res.getDate(3).getTime())); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-07T19:45:57.160

您很可能使用`getTIMESTAMP()`了`getTimestamp()`. 方法`getTIMESTAMP()`（并且`getDATE()`是[`OracleResultSet`](http://docs.oracle.com/cd/E18283_01/appdev.112/e13995/oracle/jdbc/OracleResultSet.html)返回 Oracle 特定类型的扩展。

如果不是，那么您没有使用 JDBC 驱动程序，因为`getDate()`is`java.sql.Date`和 of `getTimestamp()`is的返回类型`java.sql.Timestamp`，所以它不能是与您的问题完全不同的类型。

# tsql - 从下一行的 StarDate 驱动当前行的 EndDate

> ID：13269569
> 
> 赞同：2
> 
> 时间：2012-11-07T12:13:13.333
> 
> 标签：tsql

有人可以帮助我如何从开始日期创建结束日期。

产品指一家公司进行测试，而产品与该公司在不同的日期进行多次测试，并记录测试日期以建立产品状态即（outcomeID）。我需要建立作为 testDate 的 StartDate 和作为下一行的开始日期的 EndDate。但是，如果多个连续测试导致相同的 OutcomeID，我只需要返回一行，其中包含第一个测试的 StartDate 和最后一个测试的结束日期。换句话说，如果结果ID 在几次连续测试中没有改变。这是我的数据集

```
 DECLARE @ProductTests TABLE

(
  RequestID int not null,
  ProductID int not null,
  TestID int not null,
  TestDate datetime null,
  OutcomeID int 
)
insert into @ProductTests
(RequestID ,ProductID ,TestID ,TestDate ,OutcomeID )
select 1,2,22,'2005-01-21',10
union all
select 1,2,42,'2007-03-17',10
union all
select 1,2,45,'2010-12-25',10
union all
select 1,2,325,'2011-01-14',13
union all
select 1,2,895,'2011-08-10',15
union all
select 1,2,111,'2011-12-23',15
union all
select 1,2,636,'2012-05-02',10
union all
select 1,2,554,'2012-11-08',17 
```

--select *来自@producttests

```
 RequestID   ProductID   TestID    TestDate        OutcomeID
1               2           22    2005-01-21         10
1               2           42    2007-03-17         10
1               2           45    2010-12-25         10
1               2           325   2011-01-14         13
1               2           895   2011-08-10         15
1               2           111   2011-12-23         15
1               2           636   2012-05-02         10
1               2           554   2012-11-08         17 
```

这就是我需要实现的目标。

```
 RequestID ProductID  StartDate        EndDate           OutcomeID
1            2       2005-01-21       2011-01-14        10
1            2       2011-01-14       2011-08-10        13
1            2       2011-08-10       2012-05-02        15
1            2       2012-05-02       2012-11-08        10
1            2       2012-11-08       NULL              17 
```

正如您从数据集中看到的，前三个测试（22、42 和 45）都导致 OutcomeID 10，所以在我的结果中，我只需要测试 22 的开始日期和测试 45 的结束日期，即测试 325 的开始日期。正如您在测试 636 中看到的，结果 ID 已从 15 变回 10，因此它也需要返回。

--这是我目前使用以下脚本设法实现的

```
 select T1.RequestID,T1.ProductID,T1.TestDate AS StartDate
       ,MIN(T2.TestDate) AS EndDate ,T1.OutcomeID 
from   @producttests T1
left join @ProductTests T2 ON T1.RequestID=T2.RequestID 
and T1.ProductID=T2.ProductID and T2.TestDate>T1.TestDate

group by T1.RequestID,T1.ProductID ,T1.OutcomeID,T1.TestDate

order by T1.TestDate 
```

结果：

```
 RequestID   ProductID   StartDate   EndDate       OutcomeID
1                  2    2005-01-21  2007-03-17         10
1                  2    2007-03-17  2010-12-25         10
1                  2    2010-12-25  2011-01-14         10
1                  2    2011-01-14  2011-08-10         13
1                  2    2011-08-10  2011-12-23         15
1                  2    2011-12-23  2012-05-02         15
1                  2    2012-05-02  2012-11-08         10
1                  2    2012-11-08  NULL               17
            回答 #1

赞同：0

时间：2012-11-16T14:03:32.033

11 月 7 日，但仍未得到答复，所以这是我的解决方案不太漂亮但有效  

我的提示是关于窗口、排名和聚合函数，如 row_number、rank、avg、sum 等。当你想编写 raports 并在 sql server 2012 中变得非常强大时，这些是必不可少的

我也使用过 CTE（公用表表达式），但它可以写成子查询或临时表

```
;with cte ( ida, requestid, productid, testid, testdate, outcomeid) as
(
-- select rows where the outcome id is changing 
select b.* from 
(select  ROW_NUMBER() over( partition by requestid, productid order by testDate) as id, * from #ProductTests)a 
right outer join 
(select  ROW_NUMBER() over(partition by requestid, productid order by testDate) as id, * from #ProductTests) b
on a.requestID = b.requestID and a.productID = b.productID and a.id +1  = b.id 
where 1=1 
--or a.id = 1
and a.outcomeid <> b.outcomeid or b.outcomeid is null or a.id is null
)
select --*
a.RequestID,a.ProductID,a.TestDate AS StartDate   ,MIN(b.TestDate) AS EndDate ,a.OutcomeID  
from  cte a left join cte b on a.requestid = b.requestid and a.productid = b.productid and a.testdate < b.testdate
group by a.RequestID,a.ProductID ,a.OutcomeID,a.TestDate
order by StartDate 
```

            回答 #2

赞同：0

时间：2012-11-16T15:10:25.253

实际上，您的问题似乎有两个问题。一种是如何对包含相同值的连续（基于特定标准）行进行分组。另一个是你的标题中实际拼出的那个，即如何使用下一行的 StartDate 作为当前行的 EndDate。

就个人而言，我会按照我提到的顺序解决这两个问题，所以我会首先解决分组问题。在这种情况下正确分组数据的一种方法是使用双重排名，如下所示：

```
WITH partitioned AS (
  SELECT
    *,
    grp = ROW_NUMBER() OVER (PARTITION BY RequestID, ProductID            ORDER BY TestDate)
        - ROW_NUMBER() OVER (PARTITION BY RequestID, ProductID, OutcomeID ORDER BY TestDate)
  FROM @ProductTests
)
, grouped AS (
  SELECT
    RequestID,
    ProductID,
    StartDate = MIN(TestDate),
    OutcomeID
  FROM partitioned
  GROUP BY
    RequestID,
    ProductID,
    OutcomeID,
    grp
)
SELECT *
FROM grouped
; 
```

这[应该](http://sqlfiddle.com/#!3/ae26b/1)为您的数据样本提供以下输出：

```
RequestID  ProductID  StartDate   OutcomeID
---------  ---------  ----------  ---------
1          2          2005-01-21  10
1          2          2011-01-14  13
1          2          2011-08-10  15
1          2          2012-05-02  10
1          2          2012-11-08  17 
```

显然，还缺少一件事，那就是`EndDate`，现在是关心它的正确时机。`ROW_NUMBER()`再次使用，对`grouped`CTE 的结果集进行排名，然后在将结果集与自身连接时使用连接条件中的排名（使用外连接）：

```
WITH partitioned AS (
  SELECT
    *,
    grp = ROW_NUMBER() OVER (PARTITION BY RequestID, ProductID            ORDER BY TestDate)
        - ROW_NUMBER() OVER (PARTITION BY RequestID, ProductID, OutcomeID ORDER BY TestDate)
  FROM @ProductTests
)
, grouped AS (
  SELECT
    RequestID,
    ProductID,
    StartDate = MIN(TestDate),
    OutcomeID**,
    rnk = ROW_NUMBER() OVER (PARTITION BY RequestID, ProductID ORDER BY MIN(TestDate))**
  FROM partitioned
  GROUP BY
    RequestID,
    ProductID,
    OutcomeID,
    grp
)
SELECT
  g1.RequestID,
  g1.ProductID,
  g1.StartDate,
  g2.StartDate AS EndDate,
  g1.OutcomeID
FROM grouped g1
LEFT JOIN grouped g2
  ON g1.RequestID = g2.RequestID
 AND g1.ProductID = g2.ProductID
 AND **g1.rnk = g2.rnk - 1**
; 
```

[您可以在 SQL Fiddle](http://sqlfiddle.com/#!3/ae26b/2)上尝试此查询，以验证它是否返回您所追求的输出。

```

# html - AngularJs 的编辑器？

> ID：13269572
> 
> 赞同：3
> 
> 时间：2012-11-07T12:13:25.093
> 
> 标签：html, editor, angularjs

我想知道在 angularJs 中学习和开发应用程序的最佳编辑器（最好是免费编辑器）？我可以使用普通编辑器（我使用 sublime）来完成，但我只想知道 AngularJs 是否有任何特别的东西，并在“ng-”和其他类似功能之后提供一些自动完成功能。

仅供参考：我通常在 ubuntu 上工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:35:40.463

IntelliJ/Webstorm 有一个 Angular 插件，可以自动完成 ng- 属性和一些实时模板。

[http://plugins.intellij.net/plugin/?idea&pluginId=6971](http://plugins.intellij.net/plugin/?idea&pluginId=6971)

不过，为 Sublime 创建一个类似的插件并不难

# c# - 错误：“无法找到对象或属性”，在作为 LocalSystem 运行的 Windows 服务中加载私有证书时

> ID：13269574
> 
> 赞同：2
> 
> 时间：2012-11-07T12:13:25.330
> 
> 标签：c#, c++, security, windows-services, certificate

我正在开发一个 Windows 服务中间件，当它想要初始化与远程应用程序的安全通信通道时，它使用安全证书来执行身份验证。

Windows 服务是一个 .Net 3.5 应用程序，它使用（通过 C++/CLI 层）C++ WinCrypt 库来加载证书。特别是当我访问商店以加载证书时，我正在调用 CertFindCertificateInStore 方法。CertFindCertificateInStore 默认使用“我的”系统存储作为存储。

我已经通过 MMC 控制台为当前用户（登录机器的用户）或本地机器在“我的”系统存储中注册了我的私有证书。确保证书是好的并且它包括我的私钥。

当我以当前用户（再次登录到机器的用户）身份运行 Windows 服务时，证书已正确加载，而不是当我以“LocalSystem”身份运行服务时未加载证书。当我调用 CertFindCertificateInStore 时，会引发错误“无法找到对象或属性”。我指出“我​​的”商店仍然可以访问。

（注意：当我使用不同的用户打开新会话并运行与注册证书的用户相同的 Windows 服务时，证书会再次正确加载）

然后我使用 MMC 控制台或 winhttpcertcfg.exe 系统工具来验证“LocalSystem”用户是否有权访问我的证书。之后，MMC 控制台和 winhttpcertcfg.exe 工具确认用户“LocalSystem”理论上有权访问证书。

你有什么建议可以帮助我解决这个问题吗？

预先感谢您的帮助，

PS：此处已发布了类似的问题[证书：找不到用于解密的证书和私钥签名时出错](https://stackoverflow.com/questions/3936065/certificates-cannot-find-the-certificate-and-private-key-for-decryption-error-w)

# oauth - Google oAuth 示例

> ID：13269577
> 
> 赞同：3
> 
> 时间：2012-11-07T12:13:28.323
> 
> 标签：oauth

我正在寻找一个工作示例，说明如何调用 Google 的 oAuth 服务以简单地上传 txt 文件。在谷歌文档上，我遵循了示例 [http://code.google.com/p/google-api-java-client/wiki/OAuth2](http://code.google.com/p/google-api-java-client/wiki/OAuth2)

但它不会编译.... CalendarScopes.CALENDAR 是问题所在，我看不到 Jar 包含这个类。我导入了 google-oauth-java-client-1.12.0-beta 下载中的每个 Jar（还有 google-api-java-client-1.12.0-beta 中的每个 jar）我不明白这些之间的差异，但是是另一天。

欢迎任何指点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-12T23:30:24.740

您提到的 CalendarScopes.CALENDAR 不是 jar 文件的一部分，而是Google 提供的[Calendar API](https://developers.google.com/google-apps/calendar/)的范围。对于一个示例来展示如何实现它，这里是[一个](https://developers.google.com/google-apps/calendar/instantiate).

同时，我还建议通过以下链接了解 OAuth 以及如何将其与不同的 API 一起使用。

1.  [OAuth Playground](https://developers.google.com/oauthplayground/) - 这在尝试了解不同的 API 和与之相关的权限时非常有用。
2.  [OpenID Connect 官方文档](https://developers.google.com/accounts/docs/OpenIDConnect)

希望这可以帮助。

# android - setButtonDrawable 到 ListView 中的自定义单选按钮无法显示正确的结果，直到单击它

> ID：13269585
> 
> 赞同：0
> 
> 时间：2012-11-07T12:14:09.490
> 
> 标签：android, listview

我用一个例子来使这个问题易于理解。我有一个列表视图。在每一行中，都有一个从 RadioButton 扩展而来的自定义 RadioButton。我使用 setButtonDrawable 在 getView(); 中设置此按钮的图像；我使用 ViewHolder 方法来按住按钮。

```
holder.button.setButtonDrawable(drawable); 
```

ListView 有 4 行。在每个屏幕中，我们只能看到一行。现在的问题是：当我滚动 ListView 时，我发现第一项和第三项中的按钮是相同的，第二项和第四项是相同的。但我确定我为它们设置了不同的图像。

有什么问题？在 setButtonDrawable 之后是否应该刷新按钮？

谢谢你。

# sql - SQL 向查询中添加附加列

> ID：13269586
> 
> 赞同：0
> 
> 时间：2012-11-07T12:14:15.997
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在尝试创建一个查询，允许我查看所有客户的订单并使用 sql 添加一个附加列来查看客户欠的总金额。

以下代码检索正确的数据：

```
SELECT
    cu.FName + '  ' + cu.SName as 'Name', 
    cu.Address1 + ', ' + cu.Address2 + ', ' + cu.Address3 as 'Dispatch Address', 
    cu.PostCode, 
    co.DateOrdered, co.DateDispatched, 
    ma.MaterialName, 
    it.Quantity, 
    ma.Price as 'Total' 
FROM
    Customers cu 
LEFT JOIN 
    CustomerOrder co ON co.CustomerID = cu.CustomerID 
LEFT JOIN
    ItemOrder it ON it.OrderID = co.OrderID 
LEFT JOIN 
    Materials ma ON ma.MaterialID = it.MaterialID 
```

我现在需要在上面添加额外的代码来添加一列来显示客户欠的总金额，但是我卡住了，有人可以帮忙吗？

```
Date Order   |    Dispatch Date | Item  | QTY  |   Price | TOTAL AMOUNT FOR BOTH ROWS
2012-10-30   |    2012-11-25    | Bath  | 1    |   49.99 |  
2012-10-30   |    2012-11-25    | Sink  | 1    |   55.99 | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:19:01.250

尝试这个：

```
Select 
  cu.FName + '  ' + cu.SName as 'Name', 
  cu.Address1 + ', ' + cu.Address2 + ', ' + cu.Address3 as 'Dispatch Address', 
  cu.PostCode, 
  co.DateOrdered, co.DateDispatched, 
  ma.MaterialName, 
  it.Quantity, 
  ma.Price as 'Total' ,
  (it.Quantity * ma.Price) 'Owe amount'
from Customers cu 
left join CustomerOrder co on co.CustomerID = cu.CustomerID 
left join ItemOrder it on it.OrderID = co.OrderID 
left join Materials ma on ma.MaterialID = it.MaterialID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:22:08.390

```
SELECT
    cu.FName + '  ' + cu.SName as 'Name', 
    cu.Address1 + ', ' + cu.Address2 + ', ' + cu.Address3 as 'Dispatch Address', 
    cu.PostCode, 
    co.DateOrdered, co.DateDispatched, 
    ma.MaterialName, 
    it.Quantity, 
    ma.Price as 'Total',
    sum(it.Quantity * ma.Price) over (partition by cu.CustomerID) as TotalOwed
from Customers cu 
left join CustomerOrder co on co.CustomerID = cu.CustomerID 
left join ItemOrder it on it.OrderID = co.OrderID 
left join Materials ma on ma.MaterialID = it.MaterialID 
```

# transactions - membase 支持交易吗？

> ID：13269588
> 
> 赞同：1
> 
> 时间：2012-11-07T12:14:21.910
> 
> 标签：transactions, couchbase, membase

我有一个多线程的evn。而且我必须放置/更新两个密钥或不更新任何密钥。Membase 支持吗？有什么我可以遵循的策略吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T02:19:55.710

虽然 Couchbase 上没有严格的事务支持，但有一个称为 GETL 的操作可以帮助处理这些场景。查看[Couchbase Server 2.0 手册](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-architecture-apis-memcached-protocol-additions.html#couchbase-architecture-apis-memcached-protocol-additions-getl-usecases)中的描述。

# c# - 使用 epplus 设置单元格宽度会影响整个列

> ID：13269591
> 
> 赞同：7
> 
> 时间：2012-11-07T12:14:30.630
> 
> 标签：c#, asp.net, epplus

我在解决这个问题时遇到了一些麻烦。有没有办法使用 epplus 从工作表中设置特定单元格的宽度？因为当我使用时，例如：

```
ws.Column(1).Width = 40; 
```

整个专栏都会受到影响。

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-08T09:56:58.233

据我所知，没有办法改变特定单元格的宽度。一列中的所有单元格具有相同的宽度。您可以通过将单元格与其相邻单元格合并来更改单元格的宽度。我有一个例子：

```
sheet.Cells["A1"].Value = "This is a cell";
sheet.Cells["A1:A2"].Merge = true; 
```

然后你可以使用设置宽度

```
sheet.Column(1).Width = 40; 
```

或者

```
sheet.Cells["A1:A2"].AutoFitColumns(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:27:53.623

你好你可以试试这样

```
 using (ExcelPackage pck = new ExcelPackage())
        {
            ExcelWorksheet ws = pck.Workbook.Worksheets.Add("1232");
            ws.Cells["A1"].AutoFitColumns();
            //ws.Cells[""].AutoFitColumns(20);//overloaded 
            //ws.Cells[""].AutoFitColumns(20,40);//overloaded min and max lengths
        } 
```

# java - 如何在 Java 中获取 HashMap 的多次相同值出现次数？

> ID：13269600
> 
> 赞同：6
> 
> 时间：2012-11-07T12:14:50.037
> 
> 标签：java, data-structures, map, hashmap

有没有简单的方法来获取存在相同值的键？或者更重要的是，我怎样才能获得相同值多次出现的次数？

考虑哈希图：

```
1->A
2->A
3->A
4->B
5->C
6->D
7->D 
```

这里相同值不止一次发生了 3 次（A 两次，D 一次）。那（3）是我想要的回报。

我可以通过 keyset/map.values() 列表遍历哈希图，但这样做似乎很麻烦。有什么建议或解决方案吗？

**编辑：** 我的上下文是，我正在开发一个时间表生成器。时隙的数据结构是

```
{String day-hour, HashMap<String,Event> Rooms} 
```

在一天的时间里，一些 Event-s 被分配在房间地图上。在检查解决方案的适用性时，我需要知道是否在同一小时内为一名员工分配了多个事件。因此，我想通过值 Event.getStaff() 检查房间地图中有多少违规行为。

**编辑：** 这里的值是对象，我不想计算相同对象的出现次数，而是对象的字段。事件对象有一个现场**工作人员**，我需要计算工作人员的多次出现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T12:17:42.810

> 我可以通过 keyset/map.values() 列表遍历哈希图，但这样做似乎很麻烦。

好吧，它*效率低下*，但是您对此无能为力，因为没有某种多映射来存储值到键的反向映射。

不过，如果您使用[Guava ，它在](http://guava-libraries.googlecode.com)*代码*方面并不一定很麻烦：

```
Multiset<String> counts = HashMultiSet.create(map.values());
for (Multiset.Entry<String> entry : counts.entrySet) {
  if (entry.getCount() > 1) {
    System.out.println(entry.getElement() + ": " + entry.getCount());
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T12:21:17.713

这是我认为的好方法：

```
int freq = Collections.frequency(map.values(), "A"); 
```

为您的示例返回“3”。干杯!

编辑：对不起，我在第一次尝试时误解了这个问题，这应该可以解决问题：

```
int k = 0;
Set<String> set = new HashSet<String>(map.values());
for (String s : set) {
   int i = Collections.frequency(map.values(), s);
   k += i > 1 ? i - 1 : 0;
} 
```

但是，您仍然无法检索实际密钥。但这不是最重要的，对吧？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T12:31:31.123

怎么样（扩展乔恩的答案）

```
Multiset<V> counts = HashMultiSet.create(map.values());
Predicate<Map.Entry<K,V>> pred = new Predicate<Map.Entry<K,V>>(){
   public boolean apply(Map.Entry<K,V> entry){
       return counts.count(entry.getValue()) > 1;
   }
}
Map<K,V> result = Maps.filterEntries(map, pred); 
```

这将产生一个映射，其中每个键都映射到一个重复的值。

这个答案只需要解决问题的第一部分（“不太重要的部分”），以获得具有重复值的键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T12:18:42.823

我不知道上下文，但如果你使用多图怎么办：

```
Map<String, List<Integer>> 
```

所以这样你的地图看起来像这样：

```
A->1, 2, 3
B->4
C->5
D->6, 7 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T12:19:02.057

您可以围绕 (Hash)Map 创建一个包装类，并装饰 put()-remove() 方法来维护另一个映射，其中原始 Map 的值是键，值是出现的次数。然后你只需要实现方法来查询......

然而，这相当棘手！您必须小心不要再链接到不在地图中的对象...这可能会导致内存泄漏！

此外，必须考虑空值容差......

```
public static class MyCountingMap<K,V> implements Map<K,V> {
  private final Map<K,V> internalMap;
  //hashmap tolerates null as a key!
  private final Map<V,Long> counterMap = new HashMap<V, Long>();

  public MyCountingMap(Map<K, V> internalMap) {
    super();
    this.internalMap = internalMap;
  }

  @Override
  public V put(K key, V value) {
    boolean containedOriginally = internalMap.containsKey(key);

    V origValue = internalMap.put(key, value);

    updateCounterPut(containedOriginally, origValue, value);

    return origValue;
  }

  @Override
  public void putAll(Map<? extends K, ? extends V> m) {
    //now this is the awkward part...
    //this whole thing could be done through a loop and the put() method, 
    //but I'd prefer to use the original implementation...
    for(Map.Entry<? extends K, ? extends V> entry :m.entrySet()) {
      boolean containedOriginally = internalMap.containsKey(entry.getKey());
      V origValue = internalMap.get(entry.getKey());
      updateCounterPut(containedOriginally, origValue, entry.getValue());
    }

    internalMap.putAll(m);
  }

  // this method updates the counter
  private void updateCounterPut(boolean containedOriginally, V origValue, V newValue) {
    //if it was in the map, and it is different than the original, decrement 
    if(containedOriginally && isDifferent(origValue, newValue)) 
    {
      decrement(origValue);
    }

    //if it was NOT in the map, or the value differs
    if(!containedOriginally || isDifferent(origValue, newValue)) {
      increment(newValue);
    }
  }

  // nothing special, just nicer to extract this to a method. Checks if the two values are the same or not.
  private static boolean isDifferent(Object origValue, Object newValue) {
    return ((origValue==null && newValue!=null) || !(origValue!=null && origValue.equals(newValue)));
  }

  //this method returns the counter value for the map value
  public Long getValueCount(V value) {
    return counterMap.get(value);
  }

  @Override
  public V remove(Object key) {
    V toReturn = internalMap.remove(key);
    if(toReturn!=null) {
      decrement(toReturn);
    }
    return toReturn;
  }

  private void increment(V value) {
    Long count = counterMap.get(value);
    if(count == null) {
      count = 0L;
    }
    counterMap.put(value, count+1);
  }

  private void decrement(V value) {
    Long count = counterMap.get(value);
    if(count == null) {
      count = 0L;
    }

    //last! Have to remove reference to prevent memory leak!!
    if(count == 1L) {
      counterMap.remove(value);
    } else {
      counterMap.put(value, count-1);
    }

  }
  //... boring wrapper methods ...
  public void clear() { internalMap.clear(); }
  public boolean containsKey(Object key) { return internalMap.containsKey(key); }
  public boolean containsValue(Object value) { return internalMap.containsValue(value);   }
  public Set<Entry<K, V>> entrySet() { return internalMap.entrySet();    }
  public V get(Object key) { return internalMap.get(key); }
  public boolean isEmpty() { return internalMap.isEmpty(); } 
  public Set<K> keySet() { return internalMap.keySet(); }
  public int size() { return internalMap.size(); }
  public Collection<V> values() { return internalMap.values(); }
} 
```

# iphone - 进行3D变换后如何将图像保存在相册中？

> ID：13269601
> 
> 赞同：0
> 
> 时间：2012-11-07T12:14:48.883
> 
> 标签：iphone

如何将3D转换后的图像保存在相册中？我正在使用`CATransform3DRotate`更改转换。我无法保存图像。图片保存代码。

```
UIImageWriteToSavedPhotosAlbum(newImage, nil, nil, nil); 
```

是否可以保存 3D 转换后的图像？请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:17:03.337

```
UIImageWriteToSavedPhotosAlbum(UIImage *image, id completionTarget, SEL completionSelector, void *contextInfo); 
```

如果要在图像保存完成时收到通知，则只需要 completionTarget、completionSelector 和 contextInfo，否则可以传入 nil。

好的，然后尝试这样..

```
UIGraphicsBeginImageContext(YOUR_VIEW.frame.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
UIImageWriteToSavedPhotosAlbum(viewImage, nil, nil, nil); 
```

它将像屏幕截图一样捕获您的视图并保存到相册

*   YOUR_VIEW = paas您编辑的图像的超级视图..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:31:04.483

```
-(UIImage *) glToUIImage {
    NSInteger myDataLength = 320 * 480 * 4;

    // allocate array and read pixels into it.
    GLubyte *buffer = (GLubyte *) malloc(myDataLength);
    glReadPixels(0, 0, 320, 480, GL_RGBA, GL_UNSIGNED_BYTE, buffer);

    // gl renders "upside down" so swap top to bottom into new array.
    // there's gotta be a better way, but this works.
    GLubyte *buffer2 = (GLubyte *) malloc(myDataLength);
    for(int y = 0; y < 480; y++)
    {
        for(int x = 0; x < 320 * 4; x++)
        {
            buffer2[(479 - y) * 320 * 4 + x] = buffer[y * 4 * 320 + x];
        }
    }

    // make data provider with data.
    CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, buffer2, myDataLength, NULL);

    // prep the ingredients
    int bitsPerComponent = 8;
    int bitsPerPixel = 32;
    int bytesPerRow = 4 * 320;
    CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
    CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault;
    CGColorRenderingIntent renderingIntent = kCGRenderingIntentDefault;

    // make the cgimage
    CGImageRef imageRef = CGImageCreate(320, 480, bitsPerComponent, bitsPerPixel, bytesPerRow, colorSpaceRef, bitmapInfo, provider, NULL, NO, renderingIntent);

    // then make the uiimage from that
    UIImage *myImage = [UIImage imageWithCGImage:imageRef];
    return myImage;
}

-(void)captureToPhotoAlbum {
    UIImage *image = [self glToUIImage];
    UIImageWriteToSavedPhotosAlbum(image, self, nil, nil);
} 
```

[还可以从此链接](http://www.bit-101.com/blog/?p=1861)查看在 photoAlbum 中保存 openGL 图像的完整教程

并且还看到我的博客这篇文章.. [captureimagescreenshot-of-view](http://parasjoshi3.blogspot.in/2012/06/captureimagescreenshot-of-view.html)

**2\.** 也用于`ALAssetsLibrary`保存图像

```
ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

    [library writeImageToSavedPhotosAlbum:[image CGImage] orientation:(ALAssetOrientation)[image imageOrientation] completionBlock:^(NSURL *assetURL, NSError *error){
    if (error) {
    // TODO: error handling
    } else {
    // TODO: success handling
    }
}];
[library release]; 
```

# rpm-maven-plugin - maven rpm 包失败并显示“错误！！！SGSBASE 值未设置。因此退出”

> ID：13269604
> 
> 赞同：2
> 
> 时间：2012-11-07T12:14:58.587
> 
> 标签：rpm-maven-plugin

我想生成一个简单的 rpm，但 rpm 目标失败并出现以下错误

```
[INFO] --- rpm-maven-plugin:2.1x:rpm (default) @ private ---
[INFO] Creating spec file C:\apps\eclipse\workspaces\algo-ws-new\private\target\rpm\SPECS\private.spec
SHARDA. in buildPackage....
ERROR!!!!SGSBASE value is not set.Hence exitting 
```

这是插件配置

```
<build>
    <plugins>
                <!-- create RPM -->
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>rpm-maven-plugin</artifactId>
            <version>2.1x</version>
            <extensions>true</extensions>
            <executions>
                <execution>
                    <phase>package</phase>
                    <configuration>
                        <copyright>2012</copyright>
                        <distribution>myproj</distribution>
                        <group>System</group>
                        <packager>Internal</packager>
                        <version>1.0</version>
                        <release>1.0.1</release>
                        <prefix>/opt/myproj</prefix>
                        <mappings>
                        </mappings>
                    </configuration>
                    <goals>
                        <goal>rpm</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

Java 版本：1.6.0_27，供应商：Sun Microsystems Inc.

Java 主页：C:\Program Files\Java\jdk1.6.0_27\jre

默认语言环境：en_GB，平台编码：Cp1252

操作系统名称：“windows xp”，版本：“5.1”，arch：“x86”，系列：“windows”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:23:18.800

似乎问题在于 rpm-maven-plugin 是公司特定的内部“增强”版本

将与原始版本一起使用

# actionscript-3 - as3中奇怪的事件时间年表

> ID：13269605
> 
> 赞同：0
> 
> 时间：2012-11-07T12:14:59.117
> 
> 标签：actionscript-3

我今天在编码时发现了一些奇怪的东西。我找不到今天发生在我身上的事情的解释。

我已经创建了按钮并向其添加事件侦听器。

```
private function drawButtons():void{
        survivorModeBtn = new SurvivorModeBtn();    
        trace("I registered Event Listener with button here");
        survivorModeBtn.addEventListener(MouseEvent.CLICK,onSurvivorModeBtnClick);
        addChild(survivorModeBtn);
}

private function onSurvivorModeBtnClick(e:MouseEvent):void{
        trace("I clicked on btn here");
        //I will dispatch event here which runs second part of code
        mainMenuViewEvent = new MainMenuViewEvent("onSurvivorModeIsClicked");
        hideButtons();
        dispatchEvent(mainMenuViewEvent);
} 
```

Dispatched 事件将运行这些代码部分：

```
public function createClickToStart():void{
        trace("here I register event listener MouseEvent.Click");
        stage.addEventListener(MouseEvent.CLICK,onClick);
    }

private function onClick(e:MouseEvent):void{
        trace("onClick()");
    } 
```

当我运行我的程序并单击第一个按钮时。我在控制台中得到了这个输出：

我在这里用按钮注册了事件监听器 我在这里点击了 btn 我在这里注册了事件监听器 MouseEvent.Click onClick()

我不明白我怎么能看到“onClick（）”消息，如果我只点击第一个按钮，即使在那个时候也没有用 CLICK 事件重新注册。

感谢您解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:36:08.420

你经历了所谓的“冒泡”事件。首先，“click”事件被调度到光标下最顶层的对象，然后它通过父引用一直向上提升到舞台，如果你不强制它到`e.stopPropagation()`. 因此，当在 内解析事件时`survivorModeBtn`，它还没有到达阶段，同时您为此类事件指定阶段侦听器。然后它冒泡并进入舞台，舞台说“哇，我注册了一个 MouseEvent.CLICK 监听器，我们现在就调用它！” 并调用`onClick()`函数，使您收到最后的跟踪结果。

# security - 文件完整性验证的签名/哈希选择

> ID：13269606
> 
> 赞同：1
> 
> 时间：2012-11-07T12:15:03.190
> 
> 标签：security, hash, sha

对于文件存储库，我需要选择一种能够合理确保文件完整性的散列算法。

我需要一种算法，任何人（稍加努力）都可以轻松地使用它来验证给定散列的完整性。简而言之，文件可能会与哈希一起传输给用户，他们必须能够验证哈希是否来自文件。

我的第一选择是 MD5，因为似乎有广泛可用的实用程序来验证 MD5 哈希，但我担心 MD5 算法被密码破解（参考 Wikipedia/US-CERT：[http ://en.wikipedia.org/wiki /MD5](http://en.wikipedia.org/wiki/MD5) )

我的第二个选择是 SHA-2 算法，但我担心可以轻松验证哈希的实用程序的可用性。我发现的大多数示例都显示了评估哈希的程序代码，但我发现很少（如果有的话）预先构建的实用程序（要求用户构建自己的实用程序超出了“轻松”范围）

还有哪些其他选项可用于生成和评估文件哈希，或者这两个选项是最好的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:22:18.780

提供两个/多个，并让用户决定他们验证哪个。或者，如果他们真的很谨慎，他们可以验证两者/全部。

已经看到下载站点使用这种方法。一个站点推荐了最安全的站点，但提供了其他站点，例如 md5 作为后备。它还提供了工具的链接。恐怕不记得具体的网站了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:22:45.690

既然您已经能够找到一些文件检查器，为什么不将它们作为推荐链接呢？这样，您的用户至少可以使用一种工具。他们不需要几十种不同的文件检查实用程序，他们只需要一个适用于您选择使用的算法的工具。

您可以链接到的工具： Windows：[http](http://securityxploded.com/download-hash-verifier.php) ://securityxploded.com/download-hash-verifier.php Mac OS X： http: [//www.macupdate.com/app/mac/31781/checksum](http://www.macupdate.com/app/mac/31781/checksum)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T12:30:32.373

`sha256sum`，Linux 上包的一部分的`coreutils`程序将为列出的文件生成校验和。校验和输出的格式与程序的格式相同`md5sum`（但使用 SHA-256 散列而不是 MD5），已被广泛使用多年。您没有列出任何目标平台，但快速谷歌搜索显示有命令行程序的 Windows 端口。

如果需要生成大量校验和，可以使用 md5deep，它还支持其他哈希，包括 SHA-256。 [http://md5deep.sourceforge.net/](http://md5deep.sourceforge.net/)

我还没有尝试过，但从屏幕截图来看，它看起来非常巧妙地集成到 OSX 和 Windows 资源管理器中：http: [//implbits.com/HashTab.aspx](http://implbits.com/HashTab.aspx)

# c# - 数据表：它是一次检索所有数据还是在需要时检索所有数据

> ID：13269609
> 
> 赞同：1
> 
> 时间：2012-11-07T12:15:20.647
> 
> 标签：c#, asp.net, sql, database, polling

我们在生产中遇到了性能问题，我们正在努力解决。在我们尝试解决它的过程中，我们关注数据表。

**我们的流程**：

1.  我们在数据库上运行选择查询
2.  将数据放入一个`DataTable`
3.  `StringBuilder`我们用分隔符将所有数据写入 a
4.  将`StringBuilder`所有文本写入`Response.Write`CSV 文件

问题出在生产中，我们的客户说操作超时。我们无法重现开发中的超时，这可能是因为生产中的数据量。

**第 1 步**：

我们在选择查询上运行了一个分析器，它运行得非常快。

**第 2 步**：

我们有以下代码：

```
SqlDataReader reader = searchQuery.ExecuteReader();
returnTable.Load(reader); 
```

**第 3 步**：

我们这样迭代`returnTable`：

```
foreach (DataRow order in orders.Rows)
{
      trackingNumber = order["TrackingNumber"] != null ? order["TrackingNumber"].ToString() : errString;
      created = order["Created"] != null ? ((DateTime)order["Created"]).ToString() : errString;
      // rest of the fields
} 
```

**第4步：**

```
HttpContext.Current.Response.Write(bld.ToString()); 
```

现在，当我们运行第 2 步时，会发生什么？是`DataTable`满载吗？

如果我们在步骤 3 的每一行中轮询数据库，我可能会看到一个问题，因为这可能会减慢我们的进程。但如果它一次全部加载，我看不出这怎么可能是个问题。

所以基本上：是`DataTable`一次加载所有内容，还是使用延迟加载？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T12:17:35.353

> 当我们运行第 2 步时，会发生什么？数据表是否已满载？

查询返回的所有值都将传输到应用程序并加载到`DataTable`.

> 它使用延迟加载吗？

不，它没有。

* * *

你可以做什么：

*   考虑一个有界查询——只返回前 100 行（或任何适用的行）。如果有数千个，则不太可能有用。
*   有了上面，考虑使用分页来只获取和显示一个有界的结果集。
*   优化查询。它在测试中运行得很快，并不意味着查询是最优的。您可能希望在您的客户拥有的类似数量的数据上对此进行测试。

# php - 应用程序身份验证仅在移动设备上失败

> ID：13269610
> 
> 赞同：0
> 
> 时间：2012-11-07T12:15:26.133
> 
> 标签：php, facebook-php-sdk

我有一个使用 PHP SDK 的 Facebook 应用程序。这一切都很好，除了当用户在移动设备上访问它（通过`apps.facebook.com/myappname/`使用他们的网络浏览器访问）时，登录会陷入无限重定向循环（可能会不断地将他们重定向回 Facebook 登录页面）。

登录代码非常标准：

```
$userID = $facebook->getUser();
if ($userID) {
    [store stuff in session]

} else {
    [Javascript redirect to $facebook->getLoginUrl()]
} 
```

这在以前是有效的，但一定是被 Facebook 最近的变化之一打破了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:35:39.847

在这里回答我自己的问题。Facebook 似乎不再使用移动设备发送 signed_request POST 数据，这就是我的登录代码无法像以前那样工作的原因。此外，在成功登录后，我被重定向到`apps.facebook.com/myappname`（为了将应用程序保留在 Facebook iframe 中），但这导致登录过程在移动设备上循环。

我的解决方法是更改​​应用程序设置中的移动 Web URL 以包含查询字符串参数，这样我就可以区分来自移动/桌面的登录后请求。对于正常请求，我会重定向到 apps.facebook.com/myappname。对于移动的我没有。因此，移动设备不再位于 Facebook iframe 中，但这实际上在某种程度上更好。

# ruby-on-rails - Bootstrap图标在炼油厂编辑器中被覆盖

> ID：13269611
> 
> 赞同：0
> 
> 时间：2012-11-07T12:15:27.200
> 
> 标签：ruby-on-rails, twitter-bootstrap, refinerycms

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:24:23.393

事实证明，应用类的标签根本不重要，所以我使用了

```
<span class="icon-caret-left></span> 
```

希望这会帮助某人

# microsoft-sync-framework - 同步框架 - 批处理

> ID：13269612
> 
> 赞同：1
> 
> 时间：2012-11-07T12:15:31.563
> 
> 标签：microsoft-sync-framework, batching

我使用同步框架 2.1 over WCF（N-Tier）同步两个远程数据库（Sql Express 和 Sql Compact），使用批处理。

最近我收到了这个日志文件，这是一个很少出现的错误，但是当它出现时会产生很多问题（似乎这个同步范围中包含的数据中的表失败了）。我很肯定没有人会弄乱 BatchingDirectory，所以它应该在那里并包含所有数据。下面的错误是否与我有

```
CleanupBatchingDirectory = true 
```

这是在应用费用之前删除吗？

```
11/06/2012 14:16:49 Error ** :PosPosSync:ThreadId=7: **: 
SyncScope ErpProduct  failed
Message: An unexpected error occurred when applying batch file C:\Documents and Settings\kasse6\Application Data\POSSyncDataClient\PosSync_5b009e9008c14d0ba6a9e47726d8d620\4e77ef8c-3045-4c55-809f-014ae2b96155.batch. See the inner exception for more details.
Type   : Microsoft.Synchronization.Data.DbSyncException
Stack  :    at Microsoft.Synchronization.Data.DbSyncBatchConsumer.ApplyBatches(DbSyncScopeMetadata scopeMetadata, DbSyncSession syncSession, SyncSessionStatistics sessionStatistics)
   at Microsoft.Synchronization.Data.RelationalSyncProvider.ProcessChangeBatch(ConflictResolutionPolicy resolutionPolicy, ChangeBatch sourceChanges, Object changeDataRetriever, SyncCallbacks syncCallbacks, SyncSessionStatistics sessionStatistics)
   at Microsoft.Synchronization.KnowledgeProviderProxy.ProcessChangeBatch(CONFLICT_RESOLUTION_POLICY resolutionPolicy, ISyncChangeBatch pSourceChangeManager, Object pUnkDataRetriever, ISyncCallback pCallback, _SYNC_SESSION_STATISTICS& pSyncSessionStatistics)
   at Microsoft.Synchronization.CoreInterop.ISyncSession.Start(CONFLICT_RESOLUTION_POLICY resolutionPolicy, _SYNC_SESSION_STATISTICS& pSyncSessionStatistics)
   at Microsoft.Synchronization.KnowledgeSyncOrchestrator.DoOneWaySyncHelper(SyncIdFormatGroup sourceIdFormats, SyncIdFormatGroup destinationIdFormats, KnowledgeSyncProviderConfiguration destinationConfiguration, SyncCallbacks DestinationCallbacks, ISyncProvider sourceProxy, ISyncProvider destinationProxy, ChangeDataAdapter callbackChangeDataAdapter, SyncDataConverter conflictDataConverter, Int32& changesApplied, Int32& changesFailed)
   at Microsoft.Synchronization.KnowledgeSyncOrchestrator.DoOneWayKnowledgeSync(SyncDataConverter sourceConverter, SyncDataConverter destinationConverter, SyncProvider sourceProvider, SyncProvider destinationProvider, Int32& changesApplied, Int32& changesFailed)
   at Microsoft.Synchronization.KnowledgeSyncOrchestrator.Synchronize()
   at Microsoft.Synchronization.SyncOrchestrator.Synchronize()
   at PosPosSync.Local.PosPosSyncService.SynchronizeProviders(KnowledgeSyncProvider localProvider, KnowledgeSyncProvider remoteProvider, SyncDirectionOrder syncDirectionOrder)
   at PosPosSync.Local.PosPosSyncService.SyncronizeData(String scopeName, SyncDirectionOrder syncDirectionOrder)
Source : Microsoft.Synchronization
Target : Void Start(CONFLICT_RESOLUTION_POLICY, _SYNC_SESSION_STATISTICS ByRef)
------- Inner Exception ------
    Message: Could not find a part of the path 'C:\Documents and Settings\kasse6\Application Data\POSSyncDataClient\PosSync_5b009e9008c14d0ba6a9e47726d8d620\4e77ef8c-3045-4c55-809f-014ae2b96155.batch'.
    Type   : System.IO.DirectoryNotFoundException
    Stack  :    at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean bFromProxy)
   at System.IO.FileStream..ctor(String path, FileMode mode)
   at Microsoft.Synchronization.Data.DbSyncBatchInfoFactory.Deserialize(String batchFileName, Boolean deserializeData)
   at Microsoft.Synchronization.Data.DbSyncBatchConsumer.ReadBatchFile(UInt32 lookupLocation, UInt32 expectedNumber)
   at Microsoft.Synchronization.Data.DbSyncBatchConsumer.ReadBatchFile(UInt32 expectedNumber, String& batchFileName)
   at Microsoft.Synchronization.Data.DbSyncBatchConsumer.ApplyBatches(DbSyncScopeMetadata scopeMetadata, DbSyncSession syncSession, SyncSessionStatistics sessionStatistics)
    Source : mscorlib
    Target : Void WinIOError(Int32, System.String) 
```

想法是，一段时间后它尝试再次同步所有数据，并且根据我拥有的日志信息，它似乎将所有内容从客户端下载到服务器：

```
11/06/2012 14:26:02 Info ** :PosPosSync:ThreadId=7: **: 
EndSync: ScopeName: ErpProduct
DownloadChanges: Applied - Failed: 122363 - 0
UploadChanges: Applied - Failed:  0 - 0
FinishedSync: ElapsedTime, sec: 545,0086488 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-14T14:11:25.887

尝试更改客户端上的**SqlSyncProvider.MemoryDataCacheSize**（批量大小）。

当我将 Batch Size 设置为 100kb 时，我的客户端 Synchronize 抛出**DirectoryNotFoundException**，通常我运行 500kb。我只在大型同步（例如大型数据库的初始同步）上看到了这一点。随后的同步工作得很好，因为较小）。

**更新**

根据[MS 文档](http://msdn.microsoft.com/en-us/library/dd918908%28v=sql.110%29.aspx)，问题可能是由超过**MemoryDataCacheSize** 110% 的数据库行引起的。

> 应用程序为参与同步会话的每个提供程序指定内存数据缓存大小。如果两个提供程序都指定了缓存大小，则 Sync Framework 为两个提供程序使用较小的值。实际缓存大小将不超过最小指定大小的 110%。**在同步会话期间，如果单行大于大小的 110%，则会话终止并出现异常。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-26T20:30:06.977

在与类似问题斗争了几年之后，我想我终于找到了解决方案。

如果定义了多个范围（并且范围足够大以使用批处理），也可能发生此“找不到路径的一部分”问题，因为 MS 的示例代码中有一个小错误。问题出在 SqlWebSyncService 中的 Dispose 上，删除了此会话的批处理文件夹，但目录信息变量未设置为 null（这是下一个范围用于了解它是否正在创建文件夹的测试）。添加将批处理目录设置为 null 可以解决此问题，因为当 CheckAndCreateBatchingDirectory 然后运行它时，它会发现批处理目录为 null 并完成它。

```
private void Dispose(bool disposing)
{
try
{
    if (!this.m_disposed)
    {
        if (disposing)
        {
            if (this.m_ServerProvider != null)
            {
                this.m_ServerProvider.Dispose();
                this.m_ServerProvider = null;
            }
            if (this.m_SessionBatchingDirectory != null)
            {
                this.m_SessionBatchingDirectory.Refresh();
                if (this.m_SessionBatchingDirectory.Exists)
                {
                    try
                    {
                        this.m_SessionBatchingDirectory.Delete(true);
                    }
                    catch
                    {
                    }
                }
                this.m_SessionBatchingDirectory = null;
            }
        }
        this.m_disposed = true;
    }
}
catch (Exception exception)
{
    string message = "SqlWebSyncService Cleanup Exception: " + exception;
    LogWriter.TraceError(message, new object[0]);
    throw new FaultException<WebSyncFaultException>(new WebSyncFaultException(message, exception));
}
} 
```

同样在客户端 SqlSyncProviderProxy.EndSession

```
...
if (this.m_LocalBatchingDirectory != null) 
{
    this.m_LocalBatchingDirectory.Refresh();
    if (this.m_LocalBatchingDirectory.Exists) 
    {
       this.m_LocalBatchingDirectory.Delete(true);
    }
    this.m_LocalBatchingDirectory = null;
}
... 
```

更改批量大小时会显示此行为。我们将批量大小设置为 70000，发现问题消失了。事后看来，这是因为第一个范围都适合一个批次，所以它没有被分解并实施批处理。当我们将大小设置为较小时，我们的第一个作用域（3 个中的第一个）将使用批处理，当作用域 2 启动时我们会看到这一点。

# jakarta-ee - 无状态会话 Bean 池初始化何时发生？

> ID：13269618
> 
> 赞同：2
> 
> 时间：2012-11-07T12:15:39.927
> 
> 标签：jakarta-ee, glassfish-3, ejb-3.1

在我的应用程序中，我有一个实现为 SLSB 的“工人”池。

我在我的`glassfish-ejb-jar.xml`一些与池初始化相关的属性中定义了如下：

```
<glassfish-ejb-jar>
    <enterprise-beans>
        <ejb>
            <ejb-name>Worker</ejb-name>
            <jndi-name>Worker</jndi-name>
            <bean-pool>

                <steady-pool-size>10</steady-pool-size>
                <resize-quantity>2</resize-quantity>
                <max-pool-size>30</max-pool-size>
                <pool-idle-timeout-in-seconds>300</pool-idle-timeout-in-seconds>
            </bean-pool>
        </ejb>
    </enterprise-beans>
</glassfish-ejb-jar> 
```

实际上游泳池开始并且尺寸正确。

唯一的一点是初始化不会在启动时发生，而是在一段时间后发生。这实际上给我一些尝试使用池但发现它未初始化的客户的问题。

有没有办法在启动时触发池初始化，或者这完全留给容器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:27:14.243

> 问：有什么方法可以在启动时触发池初始化或者这完全留给容器？

是的。这取决于您使用的 Java EE 版本：

**Java EE 5 (EJB 3.0) 和更早版本**- 使用启动 servlet，即`load-on-startup`在配置中将参数设置为 1 的servlet `web.xml`。在该`init`servlet 的方法中，您将实例化您的 Worker bean，一切都将在启动时发生。servlet 配置示例：

```
<servlet>
    <servlet-name>MyStartupServlet></servlet-name>
    <servlet-class>your.package.MyStartupServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

**Java EE 6 (EJB 3.1)** -`@Startup`对 Singleton bean 使用注解。从[文档](http://docs.oracle.com/javaee/6/tutorial/doc/gipvi.html)：

> EJB 容器负责确定何时初始化单例会话 bean 实例，除非单例会话 bean 实现类使用 javax.ejb.Startup 注释进行注释。在这种情况下，有时称为急切初始化，EJB 容器必须在应用程序启动时初始化单例会话 bean

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:50:09.120

如果我猜这个问题已经解决了。即使我没有找到任何强制池初始化的方法，我注意到只要需要池成员，就会加载整个池。

这听起来绝对“懒惰”，即使它实际上不会对我的应用程序流程造成任何问题，但它确实代表了一个性能问题，因为池化的 bean 非常重。

# asp.net-mvc-3 - MVC 3 Razor 使用 actionlink 将 webgrid 行数据传递给控制器

> ID：13269623
> 
> 赞同：2
> 
> 时间：2012-11-07T12:16:42.263
> 
> 标签：asp.net-mvc-3, razor, webgrid, actionlink

我有一个带有操作链接的 webgrid，我想用它来编辑新视图中的选定行。我知道我可以使用 actionlink 为我的 actionresult 方法提供参数，但除了使用 actionlink 之外，我不知道如何将 webgrid 的行数据传递给我的控制器。

```
@{
    ViewBag.Title = "Index";
}
<h2>
    Index</h2>
<p>
    @Html.ActionLink("Create New User", "CreateUser")
</p>
<div class="webgrid-wrapper">
    @model IEnumerable<UserManager.Models.vw_UserManager_Model_Add_Users>
@{
    ViewBag.Title = "Jobs";
    WebGrid grid = new WebGrid(Model, canPage: true, canSort: true, rowsPerPage: 15, selectionFieldName: "selectedRow", fieldNamePrefix: "gridItem");

}
    @grid.GetHtml(
    fillEmptyRows: true,
        tableStyle: "webgrid",
                alternatingRowStyle: "webgrid-alternating-row",
                headerStyle: "webgrid-header",
                footerStyle: "webgrid-footer",
                selectedRowStyle: "webgrid-selected-row",
            rowStyle: "webgrid-row-style",
        mode: WebGridPagerModes.All,
columns: new[] {
    //grid.Column("ApplicationId"),
    //grid.Column("salutation"),

    //grid.Column("PasswordSalt"),

     grid.Column("FirstName"),

    //grid.Column("LoweredEmail"),
    //grid.Column("PasswordQuestion"),
    //grid.Column("PasswordAnswer"),

    // grid.Column("PasswordFormat"),
    grid.Column("LastName"),
    grid.Column("Password"),
    grid.Column("isactive"),
    //grid.Column("IsLockedOut"),
    grid.Column("email"),
   grid.Column("module_name"), 

    //grid.Column("LastLoginDate"),
    //grid.Column("LastPasswordChangedDate"),
    //grid.Column("LastLockoutDate"),

    //grid.Column("FailedPasswordAttemptCount"),
    //grid.Column("FailedPasswordAttemptWindowStart"),
    //grid.Column("FailedPasswordAnswerAttemptCount"),
    //grid.Column("FailedPasswordAnswerAttemptWindowStart"),
   // Rest of grid columns, seen previously
    @*grid.Column(
       "",
        header: "Actions",
        format: @<text>
    @Html.ActionLink("Edit", "Edit", new { id = item.email }) 
    </text>
    )   , 
     grid.Column(
       "",
        header: "Actions",
        format: @<text>
    @Html.ActionLink("Delete", "Delete", new { id = item.email })
    </text>
    )    *@
@*     grid.Column(
            header:"", 
            format:@<text><div id="btnSelectedRow">
                "@item.GetSelectLink("Edit")</div></text>
            ),*@

     grid.Column(
            header:"", 
            format:@<text><div id="btnSelectedRow">
                "@Html.ActionLink("Edit record", 
                        "EditUser",
                        "UserManager",
                                       new {selectedRow = grid.SelectedRow },
                        null
                        )</div></text>
            )
})
    @if (grid.HasSelection)
    {
        var record = grid.SelectedRow;
@*@RenderPage("~/Views/UserManager/EditUser.cshtml", new { record = grid.SelectedRow })*@

    }
</div>
<script type="text/javascript">
    $(document).ready(function () {
        function jQueryUIStyling() {
            $('input:button, input:submit').button();

            // Style tables.
            $('.webgrid-wrapper').addClass('ui-grid ui-widget ui-widget-content ui-corner-all');
            $('.webgrid-title').addClass('ui-grid-header ui-widget-header ui-corner-top');
            jQueryTableStyling();
        }

        //
        // Style tables using jQuery UI theme. This function is 
        // split out separately so that it can be part of the AJAX
        // callback of the WebGrid WebHelper in ASP.NET MVC.
        //
        function jQueryTableStyling() {
            $('.webgrid').addClass('ui-grid-content ui-widget-content');
            $('.webgrid-header').addClass('ui-state-default');
            $('.webgrid-footer').addClass('ui-grid-footer ui-widget-header ui-corner-bottom ui-helper-clearfix');
        }
    });

</script> 
```

**我的控制器**

```
 public ActionResult EditUser(System.Web.Helpers.WebGrid record)
        {
            record.ToString();

            return View();
        } 
```

**概括**

如何使用 ActionLink 通过 ActionResult 方法将行数据从一个视图传递到另一个视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:05:50.203

实际上，您有两个选择：让您的操作获取用户 ID 并查找用户，或者让网格的每一行包含一个表单，当您单击“编辑”时，该表单将所有用户详细信息发送到操作。您选择哪一个取决于您的操作应该做什么：

1.  如果它重定向到用户可以编辑他们选择的用户的表单，请使用第一种方法
2.  如果它获取所有用户详细信息并保存更新的用户，请使用第二种方法

**编辑**

要传递 id，您可以将其用于操作链接：

```
@Html.ActionLink(
    "Edit record",
    "EditUser",
    "UserManager",
    new { id = item.email }) 
```

...这是动作签名：

```
public ActionResult EditUser(string id) 
```

# reporting-services - 在 SSRS 中传递参数

> ID：13269624
> 
> 赞同：4
> 
> 时间：2012-11-07T12:16:43.060
> 
> 标签：reporting-services, sql-server-2008-r2, ssrs-2008-r2

我有 5 个报告，需要在 Excel 工作簿的单独页面上呈现，因此我创建了一个主报告并打算将它们称为子报告。这很完美，但问题是我需要控制每个工作表的名称，我相信这里的技巧是使用矩形，并将`PageName`属性设置为所需的工作表名称。

问题是，一旦我将子报表放在矩形内并添加分页符或页面名称，当我运行主报表时，我会收到一条错误消息`One or more parameters were not specified for subreport _____`

如果我将子报告放在列表中，也会发生同样的事情。

如何通过矩形传递参数，或者在不使用矩形的情况下命名工作表？

我正在使用 SSRS 2008R2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:44:40.860

我已经深入了解了这一点，它似乎是最奇怪的 SSRS 错误。一旦您将子报表移动到列表或矩形内并添加分页符，SSRS 就会翻转日期参数的日期格式，因此您最终会传入 SSRS 无法识别为日期的值。

更晦涩的是，如果您传递翻转日期值以使报告成功，则下次运行它时，SSRS 会将它们翻转回另一种方式，然后它们会保持这种翻转状态，直到您退出报告。

返回报告并再次重复上述步骤。我将在 Microsoft Connect 上提出这个问题。

# c++ - 如何使用 C++ 将函数声明为全局函数？

> ID：13269629
> 
> 赞同：0
> 
> 时间：2012-11-07T12:17:14.930
> 
> 标签：c++, visual-studio-2010, mfc

我在 Visual Studio 中使用 MFC。这是函数 StartClient，在 cpp 文件中定义，在 .h 文件中声明为

```
 protected:
      bool StartClient();     // in Client.h file 

          bool CClientSocketDlg::StartClient()      //in Client.cpp file
          {
            CString strServer;
        m_ctlIPAddress.GetWindowText( strServer );
            ------
            -----
            return bSuccess; 
          } 
```

我也宣布了这一点

```
 extern CClientSocketDlg StartClient();  // in global.h 
```

我想在另一个 xyz.cpp 文件中调用 StartClient() 函数。这就是为什么我将这个函数声明为全局的。但它不起作用。

这给出了错误：

> 错误 LNK2001：未解析的外部符号“类 CClientSocketDlg __cdecl StartClient(void)”(?StartClient@@YA?AVCClientSocketDlg@@XZ)

请指导我解决该错误。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:21:22.920

宣言

```
extern CClientSocketDlg StartClient(); 
```

告诉编译器这`StartClient`是一个不带参数并返回`CClientSocketDlg`对象副本的独立函数。

定义

```
bool CClientSocketDlg::StartClient() { ... } 
```

告诉编译器该类`CClientSocketDlg`有一个名为的成员函数`StartClient`，它不接受任何参数并返回一个`bool`.

这两个是不一样的。

如果出现错误，您似乎正在调用独立函数，而不是成员函数，并且它只是被*声明为**未定义*（即没有该函数的实现）。如果你的意思是`StartClient`从*类*中调用，你应该声明一个对象并调用对象中的函数：

```
CClientSocketDlg dlg;
dlg.StartClient(); 
```

如果您要调用独立的，则必须实现该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:22:44.613

您可以使用范围解析运算符访问 C++ 中的全局函数

# java - mysql jdbc回滚不成功

> ID：13269632
> 
> 赞同：4
> 
> 时间：2012-11-07T12:17:33.600
> 
> 标签：java, mysql, jdbc, rollback, autocommit

我有一些 Java 代码使用 JDBC 连接到 MySQL 数据库，然后代码执行一些读取操作，然后进行一次更新，所有这些都使用相同的连接。如果有异常，则`connection.rollback()`调用；如果没有异常，`connection.commit()`则调用。在这个阶段，每次我运行测试时都会新创建连接（即它不是来自池）。我的代码只创建一个连接，并在整个测试过程中使用。

正在使用`connection.setAutoCommit(false)`的连接在连接实例创建后立即调用。

由于某种原因，当出现异常并被`connection.rollback()`调用时，事实证明我的更新已提交而不是回滚。

通过调试，我确认了以下内容，

*   调用后`connection.setAutoCommit(false)`，按预期`connection.getAutoCommit()`返回 的值。`false`此外，`"Select @@session.autocommit"`返回值`0`，表示自动提交已按预期关闭。

*   在调用 之前`connection.rollback()`，同样的检查显示自动提交已关闭，正如预期的那样。

*   `connection.commit()`绝对没有被调用，并且`connection.rollback()`肯定被调用。

我也尝试过显式运行该语句`"rollback;"`，但它并没有解决我的问题。我还尝试`"Set AUTOCOMMIT = 0;"`在创建连接后显式运行该语句。

我所有的表都使用 InnoDB 的存储引擎。通过 SQL Workbench，自动提交关闭，回滚和提交按预期工作。

我正在使用 MySQL 版本“5.0.91-community-nt”。MySQL jdbc 驱动版本为 5.1.19。我正在使用 Java 5。

有没有人对为什么我的更新被提交有任何建议，即使自动提交关闭，提交从未被调用，并且回滚被明确调用？

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:53:43.750

我在 OP 中引用的代码不在单个块中，而是分散在各个类中。为了满足上面对代码示例的查询，我准备了一个代码块来说明问题。代码块完成后，我对其进行了测试以确保可以复制该问题。好吧，我无法复制这个问题 - 回滚工作得很好。这导致我通过生产代码来计算它在我放在一起的代码块之外所做的所有事情。

事实证明，生产代码既创建又删除临时表。最相关的是，它在执行更新后删除临时表，并且无论是否存在异常都会删除临时表。事实证明，在 MySQL 中删除表会引发隐式提交调用。因此，在我的代码抛出异常和我的代码调用 connection.rollback() 之间，它会删除导致隐式调用提交的表。因此我的“自动提交”问题。

# sql - 自定义分组依据并将一些记录放在一个组中

> ID：13269638
> 
> 赞同：0
> 
> 时间：2012-11-07T12:18:02.203
> 
> 标签：sql, sql-server, sql-server-2008

请考虑数据：

```
 Id          Group            Value
 -----------------------------------
 1            1                10
 2            1                12
 3            1                10
 4            2                90
 5            2                10
 6            3                30
 7            4                12
 8            4                11
 9            5                10
 10           5                11 
```

我想将`Group By`这些数据`1,2,3`放在一个组中并`4,5`放在另一组中。我怎么能做到这一点`SQL Server`？

谢谢

* * *

**编辑 1)**

我想要这个结果：

```
Groups                              Count
-----------------------------------------
Group for 1,2,3                       6
Group for 4,5                         4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T12:32:36.593

这也可以做你想要的：

```
SELECT 'Group for 1,2,3' AS GROUPS
   ,   COUNT(Id) AS Count
FROM Foo
WHERE [Group] IN (1,2,3)

UNION ALL

SELECT 'Group for 4,5' AS GROUPS
   ,   COUNT(Id) AS Count
FROM Foo
WHERE [Group] IN (4,5) 
```

[http://sqlfiddle.com/#!6/cdb82/2/0](http://sqlfiddle.com/#!6/cdb82/2/0)

当然，这只有在您知道您想要哪些组时才有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T12:29:01.390

我正在使用`outer apply`，因此您不会将代码复制到组中

```
select
    C.Group_Name, count(*)
from Table1
    outer apply
    (
        select
            case
                when C.[Group] in (1, 2, 3) then 'Group for 1, 2, 3'
                when C.[Group] in (4, 5) then 'Group for 4, 5'
            end as Group_Name
    ) as C
group by C.Group_Name 
```

你也可以使用子查询

```
select
    C.Group_Name, count(*)
from 
(
    select
        case
            when T.[Group] in (1, 2, 3) then 'Group for 1, 2, 3'
            when T.[Group] in (4, 5) then 'Group for 4, 5'
        end as Group_Name,
        T.Value,
        T.Id
    from Table1 as T
) as C
group by C.Group_Name 
```

# android - 用于 Android 的 Mp4Parser

> ID：13269648
> 
> 赞同：1
> 
> 时间：2012-11-07T12:18:18.583
> 
> 标签：android, parsing, mp4, mp4parser

我正在尝试使用 mp4Parser 解析视频。现在[在线代码](https://mp4parser.googlecode.com/svn/trunk/examples/src/main/java/com/googlecode/mp4parser/ShortenExample.java)工作正常

但是当我尝试为 android 运行它时，它给出了一个错误。问题似乎与

`Movie movie = MovieCreator.build(new FileInputStream("/home/sannies/CSI.S13E02.HDTV.x264-LOL.mp4").getChannel());`

这会引发一个未捕获的异常，迫使程序停止工作。谁能告诉我是否必须对代码进行任何修改才能使其在android设备上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T01:13:16.757

尝试这个。

```
File folderPath = new File(Environment.getExternalStorageDirectory().toString()+ "/abc"".mp4");.
FileInputStream file = new FileInputStream(filePath);.  
MovieCreator.build(Channels.newChannel(file));. 
```

# php - 选择价格过滤器后显示价格分层导航

> ID：13269654
> 
> 赞同：1
> 
> 时间：2012-11-07T12:18:26.223
> 
> 标签：php, magento

我想在已经选择价格过滤器后显示价格过滤器选项。所以，我想保留所有价格过滤器，即使已经选择了价格过滤器。这可能吗？

magento 使用分层导航系统，当您使用价格过滤类别时，价格中所有其他可能的选择都会在该过滤器中消失，因此如果您想选择另一个价格范围，您必须返回上一页或取消选择过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:02:14.663

这个答案链接到一个流行的免费模块，它可以完成你所追求的并且已经更新到最新版本的 CE；

[如何让 Magento 不隐藏分层导航过滤器？](https://stackoverflow.com/questions/6788105/how-to-make-magento-not-hide-layered-navigation-filters)

链接在这里;

[https://www.magentocommerce.com/magento-connect/multiple-select-in-layered-navigation-filters.html](https://www.magentocommerce.com/magento-connect/multiple-select-in-layered-navigation-filters.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T01:19:46.830

我使用 php 会话并为 filter.phtml 编写了一个自定义功能来做到这一点。我使用包含 url 和标题的过滤器名称设置会话，如果设置了会话，则编写它。So I literally manually created all links, when one filter is selected. 希望这会对某人有所帮助..

# macos - 致命错误：语法错误，意外的 T_SL 在 MAMP 上运行

> ID：13269659
> 
> 赞同：-2
> 
> 时间：2012-11-07T12:18:46.163
> 
> 标签：macos, zend-framework, mamp

我更新到 MAMP 2.1 的新版本，但在运行基于 Zend 框架的项目时遇到问题。

如果我尝试运行脚本，则会出现错误

```
Fatal error: syntax error, unexpected T_SL running on MAMP 
```

有没有可能，热解决呢？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:21:36.403

[T_SL](http://php.net/manual/en/tokens.php)表示 << 请检查您的源代码

# macos - 在 Mac OS 上构建 Maven 时，Windows 共享文件路径不起作用

> ID：13269666
> 
> 赞同：2
> 
> 时间：2012-11-07T12:19:30.763
> 
> 标签：macos, maven, filepath

我们已经创建了一个 Maven 存储库，在我们的内部构建机器上被视为远程存储库。这个存储库包含我们构建应用程序所需的所有 jar。

我们的开发人员机器通过 在**POM.xml**中定义的path:-file **://ServerName/Path-to-Repository**访问这个远程存储库。

 **当我们在 Windows 机器上进行 maven 构建时它工作正常，但在 Mac 机器上却失败了。它不起作用，因为存在“路径无法识别”错误。那么，我们应该怎么做呢？

我们尝试在 mac 上使用以下路径： **smb://ServerName/Path-to-Repository** 但同样出现以下异常：

原因：org.sonatype.aether.transfer.NoRepositoryConnectorException：没有连接器可用于使用 org.sonatype.aether.impl.internal.DefaultRemoteRepositoryManager 的可用工厂 WagonRepositoryConnectorFactory 访问默认类型的存储库 mavenreponew (smb://Denimfreelancer/maven_repo)。 org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:456) 上的 getRepositoryConnector(DefaultRemoteRepositoryManager.java:387)**

# ruby - Ruby Builder Gem - 动态设置节点名称

> ID：13269669
> 
> 赞同：3
> 
> 时间：2012-11-07T12:19:49.003
> 
> 标签：ruby, builder

我目前正在使用 Ruby 的 Builder gem 来为我的应用程序中的资源生成 XML 表示。XML 表示具有多个结构始终相同的子节点，但顶级节点具有不同的名称，具体取决于资源的布尔属性的值。有什么方法可以动态生成构建器节点？像这样的东西（已经试过了，不起作用）：

```
if resource.attr
  top_level_node = :ForFlowBased
else
  top_level_node = :ForNonSeamlessOffload
end

builder = Builder::XmlMarkup.new
builder.send(top_level_node). do |top_level_node|
....
end 
```

该代码将生成一个节点`<send:ForFlowBased>`。同样，如果我调用`builder.(top_level_node)`，生成的 xml 是`<call:ForFlowBased>`. 我希望动态地向构建器发送我想在其上调用的方法，而不向 XML 添加发送或调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T12:24:27.607

做这个：

```
builder.tag!(top_level_node) do |top_level_node|

end 
```

# android - 当我通过SIP电话拨打电话时，我想清除的手机号码编辑到我的已拨通话记录中，我该怎么做？

> ID：13269673
> 
> 赞同：2
> 
> 时间：2012-11-07T12:19:51.107
> 
> 标签：android, dialog, sip, calllog

我对我的代码进行了以下更改。我只是想清除 SIP 电话写入的通话记录，我已经使用 SIPDROID 制作了我的 SIP 电话。如果我从 Android 清单中删除权限，它会给我一个错误。我想要的只是将拨打的通话记录删除到最近的通话记录中。

```
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    if(keyCode == KeyEvent.KEYCODE_BACK)
    {
        Log.e("Test", "Back button pressed!");
    }
    else if(keyCode == KeyEvent.KEYCODE_HOME)
    {
        Log.e("Test", "Home button pressed!");
        onBackPressed();
    }
    return super.onKeyDown(keyCode, event);
} 
```

# facebook - 检查页面是否接受消息

> ID：13269674
> 
> 赞同：2
> 
> 时间：2012-11-07T12:19:57.183
> 
> 标签：facebook, facebook-page

我知道我可以使用指向 www.facebook.com/messages/[user_id]?msg_prefill=XXX 的链接让用户向 facebook 页面 (user_id/page_id) 发送消息。但事先我需要知道如何检查粉丝专页是否接受消息（这可以被管理员禁用）。如果不接受任何消息，我将不得不隐藏链接。

# sql - 将 to_char(myDate, 'DAY') 的结果与字符串进行比较时出现问题

> ID：13269676
> 
> 赞同：8
> 
> 时间：2012-11-07T12:20:02.823
> 
> 标签：sql, oracle, plsql, oracle11g

我一直在试图找出问题可能是什么，但我只是运气不好，根本不理解这个问题。我有以下代码：

```
CREATE OR REPLACE FUNCTION ckeckDay(dateC in date)
RETURN VARCHAR
IS
  day VARCHAR(15);
  checkFriday VARCHAR(1);
BEGIN
  checkFriday := 'N';
  day := to_char(dateC, 'DAY');
  IF day = 'FRIDAY' THEN
    checkFriday := 'Y';
  END IF;
  RETURN day;
END;
/ 
```

设置`dateC`为星期五（甚至通过返回`day`而不是`day`变量来测试它并返回星期五。）但是，`IF`即使`day`变量确实是星期五，该语句也永远不会评估为真。任何想法如何解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T12:53:31.157

如果你想对此非常健壮，那么你应该强制 NLS 设置为英语并应用“填充模式”格式模型 FM 来修剪前导和尾随空格。

```
If To_Char(DateC,'fmDAY', 'nls_date_language=english') = 'FRIDAY'
Then ... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-07T12:41:26.493

这是因为`day`变量包含一个空白填充值。使用`trim`函数去除前导和尾随空格：

```
IF trim(day) = 'FRIDAY' THEN
  checkFriday := 'Y';
END IF; 
```

请使用`VARCHAR2`数据类型作为字符串变量。不要使用`VARCHAR`.

# android - Android 设备在 small/normal/large/xlarge 和 ldpi/mdpi/hdpi/xhdpi 方面的正确图形？

> ID：13269677
> 
> 赞同：1
> 
> 时间：2012-11-07T12:20:03.960
> 
> 标签：android

我是 Android 开发的新手，对于为不同的设备制作正确的图形仍然有些困惑。在[本文档](http://developer.android.com/guide/practices/screens_support.html#screen-independence)中，有一个表格列出了不同的屏幕分辨率和密度，但它让我感到困惑......现在让我们举个例子。我的应用需要全屏背景，因此为 Galaxy Note 制作最大的背景图像 800x1280 似乎适合我（我不想支持平板电脑，只支持手机），然后我可以为 Galaxy S3 制作 720x1280 和它喜欢和 Galaxy S2 及其喜欢的 480x800 版本，但是我应该把这些图像文件放在哪里？

在我看来，所有这些设备都在高密度范围内，但是这些设备如何使用正确的图形呢？我应该手动控制它，还是应该对所有设备只使用一个相同的图形并让 Android 缩放它（然后存在纵横比问题，我该如何克服？）？

谢谢索伦_

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:31:30.173

在资源文件夹中，您可以根据宽度/高度创建可绘制目录。然后，您可以将资源限定符用于宽度 - wdp 或示例：w720dp、w1024dp 等用于高度 hdp。示例：h720dp、h1024dp 等。

或者，您可以将屏幕尺寸分类为小、正常和大，并且可以将图像放置在各自的可绘制对象中。

参考这篇文章：http: [//developer.android.com/guide/topics/resources/providing-resources.html#QualifierRules](http://developer.android.com/guide/topics/resources/providing-resources.html#QualifierRules)

**small** : QVGA 低密度和 VGA 高密度。

**正常**：WQVGA 低密度，HVGA 中密度，WVGA 高密度。

**large**：VGA 和 WVGA 中等密度屏幕。

**xlarge**：HVGA 屏幕。xlarge 屏幕的最小布局尺寸约为 720x960 dp 单位。

一切都在开发者网站上提供。请参考此[链接](http://developer.android.com/guide/topics/resources/providing-resources.html#ScreenSizeQualifier)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:48:32.517

yogeshhkumarr 发布的答案是正确的，但值得注意的是，根据您使用的背景图像类型，您可以使用[9-patch](http://developer.android.com/tools/help/draw9patch.html)图像来解决您的问题，而无需制作多个版本相同的图像。

# matlab - vbscript 检查是否安装了 Matlab 运行时编译器

> ID：13269682
> 
> 赞同：2
> 
> 时间：2012-11-07T12:20:11.993
> 
> 标签：matlab, vbscript, matlab-compiler

我需要编写一个 vbscript 来查看系统上是否安装了“Matlab Compier Runtime”。在互联网上搜索后，我能够将以下代码放在一起：

```
Dim oShell
Dim value

On Error Resume Next

Set oShell = CreateObject("WScript.Shell")
value = oShell.RegRead(Key)

If Err.Number = 0 Then
''#Error code 0 indicates success
MsgBox("MCR is installed.")
Else
    MsgBox("MCR is NOT installed.")
End If 
```

我的问题是，我无法确定为“键”分配什么值。我在注册表编辑器中查找了一个键并发现

'HKEY_CLASSES_ROOT\TypeLib{3E25C089-6E25-45E4-8C5D-37AD9A33764A}\7.10\0\win32'

但可悲的是，这并没有给我结果。我也试过

HKEY_LOCAL_MACHINE\SOFTWARE\MATLAB 编译器运行时\v716\runtime\win32

但这也没有给我他想要的结果。请注意，我的安装路径是

C:\Program Files (x86)\MatLab\MATLAB 编译器运行时\

我的问题是，我的钥匙错了吗？还是我在脚本中忽略了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-04T12:11:39.990

虽然这个问题很老（真的很老），但在我的机器上它位于：

```
HKEY_LOCAL_MACHINE\SOFTWARE\MathWorks\MATLAB Compiler Runtime\7.16 
```

所以它是`MathWorks`而不是`MatLab`。

# jquery - 配置影子盒？

> ID：13269690
> 
> 赞同：1
> 
> 时间：2012-11-07T12:20:41.443
> 
> 标签：jquery, html

您好，我正在使用阴影框 - 一切正常，但我在一页上有两种用途，一种是人们连续滚动浏览图像的画廊，另一种是用于表单的 iframe。

如何从 iframe 但不从图库中删除下一个和上一个按钮

```
Shadowbox.init({
    displayCounter: false,
    continuous: true <- need to disable for iframe only
}); 
```

框架：

```
<a rel="shadowbox[contact];width=420;height=520" href="contact.php?profileID=">Click here</a> 
```

画廊

```
<a rel="shadowbox[trader]" href="<?php echo $images[0]; ?>">Click here</a>
<a rel="shadowbox[trader]" href="<?php echo $images[1]; ?>">Click here</a>
<a rel="shadowbox[trader]" href="<?php echo $images[2]; ?>">Click here</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:33:09.000

Did you take a look into the [docs](http://www.shadowbox-js.com/api.html) and the [usage section](http://www.shadowbox-js.com/usage.html)? You don't need multiple scripts - that would only cause problems and is completely unnecessary.

Instead, leave the `init()` function alone and use the `setup()` function. Something like this should work (for this snippet to work you need the according class on you links):

```
Shadowbox.init({
    displayCounter: false
});

Shadowbox.setup("a.noniframe", {
      continuous: true
});

Shadowbox.setup("iframe a", {
      continuous: false
}); 
```

# winforms - 绑定数据源后如何更改datagridview列宽？

> ID：13269691
> 
> 赞同：0
> 
> 时间：2012-11-07T12:20:44.813
> 
> 标签：winforms, c#-4.0, datagridview, datasource

`datagridview`一栏怎么改`width`？我尝试了以下方法，但它不起作用。为什么不变？

```
 string[] strArrDoctor = new string[] {"ID", "Name", "Specialization", "Contact No", "Experience(Years)", "Delete" };
           //strin of array which contains Patient table columns names
            string[] strArrPatient = new string[] {"ID", "Name", "Join Date", "Ailment", "Doctor ID", "Delete" };
            if (rBtnDoctor.Checked)
            {
                for (int intIndex = 0; intIndex < dgvShowRecords.Columns.Count; intIndex++)
                {
                    //assigning Column names with our specified String of arrays
                    dgvShowRecords.Columns[intIndex].HeaderText = strArrDoctor[intIndex];
                }
            }
            else
            {
                for (int intIndex = 0; intIndex < dgvShowRecords.Columns.Count;      intIndex++)
                {
                    dgvShowRecords.Columns[intIndex].HeaderText=strArrPatient[intIndex];
                }
            }
            //dgvShowRecords is Datagridview Name
            dgvShowRecords.Columns["Name"].Resizable = DataGridViewTriState.True;
            dgvShowRecords.Columns["Name"].Width = 200;
            dgvShowRecords.Columns["ID"].Width = 20; 
```

请任何人知道为什么它没有改变的原因让我知道。

![在此处输入图像描述](../Images/3b6daa63baa23da78b0862062b572c82.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T13:18:14.660

尝试：

```
dgvShowRecords.AutoResizeColumns(); 
```

# php - 在基于 KISSMVC php 的站点中使用 .htaccess 限制 GET

> ID：13269692
> 
> 赞同：2
> 
> 时间：2012-11-07T12:20:47.477
> 
> 标签：php, .htaccess, kiss-mvc

我有一个基于 KISSMVC php 的站点，其中包含以下 .htaccess，仅允许经过身份验证的用户查看该站点

```
RewriteEngine On

RewriteBase /myphpsite/

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?/$1 [L]

# Protect app files
RewriteRule ^((app|system|scripts).*)$ index.php/$1 [L]

AuthName "Please enter your username and password"
AuthType Basic
<Limit GET>
require user THEUSERNAME
</Limit> 
```

这没有问题。

问题是我想允许客户端在没有身份验证的情况下从站点检索值。该值是通过 index.php 函数获得的，因为它是按客户端计算的，而且没有存储这些值的文件夹结构。

例如，此 URL 不应提示：

```
http://fancywebsite.com/myphpsite/index.php/inventory/hash/variable 
```

但这仍然应该提示：

```
http://fancywebsite.com/myphpsite 
```

如果我能以某种方式在 .htaccess 文件中指定当请求的 URL 包含“index.php/inventory/hash”时绕过或满足身份验证，那将是完美的。

# networking - 当 IP 数据包被多次分段时，“More Fragment”位的值

> ID：13269693
> 
> 赞同：3
> 
> 时间：2012-11-07T12:20:52.930
> 
> 标签：networking, tcp, ip, fragmentation

假设我有两台主机，主机 A 和主机 B，主机 A 向 B 发送一个 1500 字节的数据包，它们之间有两个路由器，第一条链路的 MTU 为 800 字节，第二条链路的 MTU 为 500 字节他们。

据我了解，数据包必须两次都被分段。数据包必须被分成 3 个数据包（2 个大小相同的数据包和一个较小的数据包）。

然后，当我们点击第二个路由器时，我们将再次对前两个分段数据包中的每一个进行分段。前两个原始片段将产生 1 个较大的片段（接近 500 字节）和一个较小的片段。

这就是我感到困惑的地方。

我知道前 3 个片段的“更多片段”位应该设置为 1，除了最后一个片段表示数据包是片段的一部分，直到并包括下一个“更多片段”设置为 0 的数据包。但是，对于第二组片段我不太确定。如果这是第一次对数据包进行分段，则最后一个分段的“更多分段”为 0，但由于这实际上只是原始消息中间某处的分段，我感觉它应该是 1。

我希望有更多经验的人可以为我阐明这一点。重新组装时是否使用了“更多片段”位？如果是这样，我会想象当片段被分段时，我们不会将最后一个片段设置为 0。

所以算法会：

```
If fragmenting a packet with 'More Fragment' set to 0, 
    then set 'More Fragment' to 1 in all fragmented packets except the last.
Else If fragmenting a packet with 'More Fragment' set to 1, 
    then set 'More Fragment' to 1 in all of the fragmented packets. 
```

我的假设在这里正确吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T13:01:28.893

你或多或少是对的。除了添加 MF（更多片段）标志外，路由器还进行了更多处理：

> 为了对一个长的互联网数据包进行分段/分段，路由器（下图中的 R1）创建一个新的 IP 数据包，并将长数据包中的 IP 头字段的内容复制到新的 IP 头中。长包的数据然后在 8 字节（64 位）的边界上分成两部分，使得第一个包小于出接口的 MTU。第一个数据包中的更多片段标志 (MF) 设置为一个（以指示该数据包的更多片段跟随）。如果该数据包已经被另一个系统分段，则可能已经在该数据包中设置了更多标志。转发此数据包。
> 
> 然后处理第二个创建的新数据包。包头域与原包相同（包括包ID、总长度域、多分片标志（MF）和原包中的分片偏移量域的值相同）。通过添加在第一个片段中发送的有效负载字节数，使用新的偏移字段更新数据包头字段。如果这个新数据包大于允许的链路 MTU，则该数据包再次被分段。

因此，简而言之，对于已经分段的数据包，整个 IP 标头正在被复制到新数据包（更小的片段片段）。这意味着如果 IP 数据包设置了 MF，它也将被复制到最后一个分段数据包。由于更改了偏移量和数据包 ID，主机接收碎片数据包将能够重新组装这些数据包。

# numbers - prolog 将数字转换为罗马数字

> ID：13269694
> 
> 赞同：5
> 
> 时间：2012-11-07T12:20:56.753
> 
> 标签：numbers, prolog, dcg, clpfd, roman-numerals

我有这个将整数转换为罗马数字的代码我需要添加一个函数，将整数与罗马数字输入进行比较，并显示它是 try 还是 false，例如：roman(v,5)。真的

```
toroman(0).
toroman(N) :- N < 4, put("I"), M is N - 1, toroman(M).
toroman(N) :- N = 4, put("I"), put("V").
toroman(N) :- N = 5, put("V").
toroman(N) :- N < 9, put("V"), M is N - 5, toroman(M).
toroman(N) :- N = 9, put("I"), put("X").
toroman(N) :- N < 40, put("X"), M is N - 10, toroman(M).
toroman(N) :- N < 50, put("X"), put("L"), M is N - 40, toroman(M).
toroman(N) :- N < 90, put("L"), M is N - 50, toroman(M).
toroman(N) :- N < 100, put("X"), put("C"), M is N - 90, toroman(M).
toroman(N) :- N < 400, put("C"), M is N - 100, toroman(M).
toroman(N) :- N < 500, put("C"), put("D"), M is N - 400, toroman(M).
toroman(N) :- N < 900, put("D"), put("D"), M is N - 500, toroman(M).
toroman(N) :- N < 1000, put("C"), put("M"), M is N - 900, toroman(M).
toroman(N) :- N < 4000, put("M"), M is N - 1000, toroman(M).

roman(N) :- toroman(N). 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T12:31:18.347

尝试以不同的方式表述问题：编写一个语法（[dcg](/questions/tagged/dcg "显示标记为“dcg”的问题")）来关联一个整数和表示罗马数字的字符列表。这是一个开始：

```
:- 使用模块（库（clpfd））。

罗马（0）->“”。
罗马 (N0) --> "I", { 1 #=< N0, N0 #=< 3, N1 #= N0-1}, 罗马 (N1)。

```

你可以像这样使用它：

```
?- 短语（罗马（3），L）。
L =“三”；
错误的。

```

或者

```
?- 短语（罗马（N），“II”）。
N = 2;
错误的。

```

或者，如果您不知道该问什么，只需问最普遍的问题：

```
?- 短语（罗马（N），L）。
N = 0,
L = [];
N = 1,
L = "我" ;
N = 2,
L = "二" ;
N = 3,
L =“三”；
错误的。

```

要紧凑地获得答案`L = "III"`，请使用`:- set_prolog_flag(double_quotes,chars).`See [this answer](https://stackoverflow.com/a/8269897/772868)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:29:23.463

您应该将您的`toroman/1`程序更改为`toroman/2`返回罗马数字而不是仅仅打印它。

然后，您将能够轻松地将罗马数字与调用`toroman/2`整数的结果进行比较。

另请注意，如果您回溯另一个解决方案，您当前的过程将循环直到堆栈溢出。您应该保护每个递归调用自身的子句仅在调用的参数为非负数时才递归，或者在第一个子句中添加一个安全失败的检查，例如：

```
roman(N):- N < 0, !, fail. 
```

在更改 toroman/1 以返回罗马文字后，您将得到类似的内容（只需修改您的代码以将文字作为第二个参数返回）：

```
toroman(N, _):- N < 0, !, fail.
toroman(0, []).
toroman(N, ['I'|Roman]) :- N < 4, M is N - 1, toroman(M, Roman).
toroman(4, ['IV']).
toroman(5, ['V']).
toroman(N, ['V'|Roman]) :- N < 9, M is N - 5, toroman(M, Roman).
toroman(9, ['IX']).
toroman(N, ['X'|Roman]) :- N < 40, M is N - 10, toroman(M, Roman).
toroman(N, ['XL'|Roman]) :- N < 50, M is N - 40, toroman(M, Roman).
toroman(N, ['L'|Roman]) :- N < 90, M is N - 50, toroman(M, Roman).
toroman(N, ['XC'|Roman]) :- N < 100, M is N - 90, toroman(M, Roman).
toroman(N, ['C'|Roman]) :- N < 400, M is N - 100, toroman(M, Roman).
toroman(N, ['CD'|Roman]) :- N < 500, M is N - 400, toroman(M, Roman).
toroman(N, ['DD'|Roman]) :- N < 900, M is N - 500, toroman(M, Roman).
toroman(N, ['CM'|Roman]) :- N < 1000, M is N - 900, toroman(M, Roman).
toroman(N, ['M'|Roman]) :- N < 4000, M is N - 1000, toroman(M, Roman).

roman(N, R) :- toroman(N, L), atomic_list_concat(L, R).

roman(N) :- roman(N, R), write(R). 
```

然后您可以简单地调用`roman(N, R)`并测试是否`R`与您感兴趣的罗马数字相结合。

# javascript - 谷歌翻译自定义按钮

> ID：13269695
> 
> 赞同：-1
> 
> 时间：2012-11-07T12:20:56.857
> 
> 标签：javascript, google-translator-toolkit

我需要一个简单的按钮，当我点击它时，它只能翻译一种语言，比如只有法语。如果有人有想法，请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:25:42.277

```
<a href="http://translate.google.com/translate?tl=fr&u=http://google.com">translate to french</a> 
```

不要忘记用您的页面网址替换变量“u”

# wix - 更改了 GUID - 现在卸载不起作用

> ID：13269696
> 
> 赞同：1
> 
> 时间：2012-11-07T12:21:09.317
> 
> 标签：wix

遇到大问题。我读到 Rob M 说要`Guid="*"`尽可能使用，所以我把我所有的 Guid 都改成了这个。不过，现在卸载我的产品很麻烦。文件已成功删除，但快捷方式、服务和注册表未成功删除。请帮忙

这是我的服务：

```
 <Component Id="service" Guid="*">
    <File Id="service.exe" Name="service.exe" KeyPath="yes" Source="$(var.Bin)\service.exe"/>
    <ServiceInstall Id="service.exe" Name="[PRODUCTNAME]" Description="[ProductName]" Account="[SERVICEACCOUNT]" Password="[SERVICEPASSWORD]" Arguments=" /start [ProductName]" Start="auto" Interactive="yes" Type="ownProcess" Vital="yes" ErrorControl="critical" />
    <ServiceControl Id="service.exe" Name="[PRODUCTNAME]" Stop="both" Start="install" Remove="uninstall" Wait="no"/>
  </Component> 
```

这是卸载日志：

```
Service '' () could not be stopped. Verify that you have sufficient privileges to stop system services.

MSI (s) (DC:D0) [14:25:02:018]: Executing op:  ActionStart(Name=DeleteServices,Description=
Deleting services
,Template=
Service: [1]
  )
  MSI (s) (DC:D0) [14:25:02:018]: Executing op:     ProgressTotal(Total=2,Type=1,ByteEquivalent=1300000)
MSI (s) (DC:D0) [14:25:02:018]: Executing op: ServiceControl(,,Action=8,Wait=0,)
MSI (s) (DC:D0) [14:25:32:064]: Executing op: ServiceControl(,Name=OPC,Action=8,Wait=0,)

Info 1922.

Service '' () could not be deleted. Verify that you have sufficient privileges to remove system services. 
```

它没有取名，有人知道它为什么会这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T12:57:10.417

首先是第一个问题：

*   您是否已经发布过该产品的版本？如果是这样，更改组件 GUID 可能会严重违反组件规则，因此一旦发布就不应更改它们。如果它只是在你的测试机器上，那并不重要。
*   您是否正在重置您的测试机器，以便违反组件规则不会影响卸载，或者您是否尝试在卸载失败之前执行某种升级？
*   来自卸载的详细 MSI 日志表示什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:41:18.080

您的属性“PRODUCTNAME”是如何定义的？如果它不是常量，请验证它的初始化是在卸载序列期间执行的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:33:09.200

[MSIZAP](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370523%28v=vs.85%29.aspx)将是消除安装程序在机器上安装的所有内容的终极方法。我确实建议您在您正在尝试做的事情的概念证明上对其进行测试，并使用 VM 进行所有安装测试。

# android - Android中的EditText不读取输入

> ID：13269705
> 
> 赞同：0
> 
> 时间：2012-11-07T12:21:48.000
> 
> 标签：android, android-edittext

EditText 中的问题是，它没有返回输入值。我正在使用该输入值来检查条件。

我给出了正确的输入，以便我检查 if 条件并进入下一个活动，但它总是进入 else 条件。

请检查下面的代码，我已经评论了这个问题。

这是片段

```
public class BuildWord extends Activity
{
String word = "word";
String finished = "Word Built";

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.buildword);

    EditText get = (EditText)findViewById(R.id.dataToSend);
    String getdata = get.getText().toString(); //Here i am getting Data from EditText

    displayIntentData();

    if (getdata.equals("word")) 

    //Here i am checking with "word" but it goes to else condition.I am typing "word" only
    {
        findViewById(R.id.sendButton1).setOnClickListener(new OnClickListener() 
        {   
            public void onClick(View v) 
            {
                Intent intent = new Intent(BuildWord.this,MainActivity.class);
                intent.putExtra("key", word);
                startActivity(intent);

            }
        });
    }
    else
    {
        findViewById(R.id.sendButton1).setOnClickListener(new OnClickListener() 
        {   
            public void onClick(View v) 
            {
                Intent intent = new Intent(BuildWord.this,DropCard.class);
                intent.putExtra("key", finished);
                startActivity(intent);                  
            }
        });
    }
}

@Override
protected void onNewIntent(Intent intent) 
{
    super.onNewIntent(intent);
    setIntent(intent);
    displayIntentData();
}

private void displayIntentData()
{
    Intent intent = getIntent();
    TextView tv = (TextView)findViewById(R.id.intentData1);
    Bundle extras=intent.getExtras();

    if(extras!=null)
    {
        tv.setText("Data received: "+extras.getString("key"));
    }
    else
    {
        tv.setText("No extradata received");
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:30:05.290

膨胀视图后，您将立即在 EditText 字段（“get”）中获取值。您还没有时间输入任何文本，所以它是空的。然后您检查“getData”是否包含“word”（它没有！）因此您正在点击 ELSE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:30:19.180

当任何点击事件发生时，我们都会得到文本....

```
String getdata = get.getText().toString(); //Here i am getting Data from EditText 
```

上面的代码总是返回空字符串...

尝试将代码放入点击事件并处理，以便您可以轻松获取字符串并进行比较

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T12:35:18.963

displayIntentData() 之后；声明 String getdata = get.getText().toString();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-04T14:36:47.403

创建视图后，您将立即获取输入数据。而是尝试在单击侦听器中获取输入数据

# java - 如何连接 GWT 超链接点击处理程序？

> ID：13269707
> 
> 赞同：4
> 
> 时间：2012-11-07T12:21:56.553
> 
> 标签：java, gwt, uibinder

我是 GWT 的新手，正在努力实现以下目标：

![在此处输入图像描述](../Images/f749b5697b04bc62186f6a6b3d16bbc7.png)

这是我编写的代码：

```
public class MyWebApp implements EntryPoint {
    // The main container for everything the user sees (the "view")
    private LayoutPanel mainPanel;

    // Simple HTML for the header ("MyWebApp") and subsequent <hr/>
    private SafeHtml header;

    // The three links "Dashboard", "Monitors" and "Help Desk"
    private HorizontalPanel navMenu;

    // The empty content that gets populated when user clicks one of
    // the 3 links.
    private Panel menuContent;

    @Override
    public void onModuleLoad() {
        // The initial fragment contains the header, nav menu and empty "content" div.
        // Each menu/screen then fills out content div.
        initMainPanel();

        RootPanel.get().add(mainPanel);
    }

    private void initMainPanel() {
        SafeHtmlBuilder headerBuilder = new SafeHtmlBuilder();
        navMenu = new HorizontalPanel();

        // Leaving null until user clicks on one of the 3 menus.
        // Then the menu will decide what panel gets injected for
        // this panel.
        menuContent = null;

        // Create the simple HTML for the header.
        headerBuilder.append("<h1>MyWebApp</h1><hr/>");

        // Create the navMenu items.
        Hyperlink dashboardLink, monitorsLink, helpDeskLink;

        // Homepage is http://www.mywebapp.com
        // I want the dashboardLink to inject menuContent and "redirect" user to
        // http://www.mywebapp.com/dashboard
        dashboardLink = new Hyperlink("???", "???");

        // http://www.mywebapp.com/monitors
        monitorsLink = new Hyperlink("???", "???");

        // http://www.mywebapp.com/help-desk
        helpDeskLink = new Hyperlink("???", "???");
        navMenu.add(dashboardLink);
        navMenu.add(monitorsLink);
        navMenu.add(helpDeskLink);

        // Add all widgets to the mainPanel.
        mainPanel.add(new HTML(headerBuilder.toSafeHtml().toString()));
        mainPanel.add(navMenu);
        mainPanel.add(menuContent);

        // Position and size the widgets (omitted for brevity).
        // mainPanel.setWidgetHorizontalPosition(...);
    }

    private HTML getDashboardMenuContent() {
        return new HTML("This is the dashboard.");
    }

    private HTML getMonitorsMenuContent() {
        return new HTML("These are the monitors.");
    }

    private HTML getHelpDeskMenuContent() {
        return new HTML("This is the help desk.");
    }
} 
```

最重要的是：

*   我如何“连接” `Hyperlink`s 以便当用户单击它们时，我可以调用适当的`getXXXMenuContent()`方法，然后将其添加到`menuContent`？

但是也：

*   我*觉得*我在这里做错了什么：`mainPanel.add(new HTML(headerBuilder.toSafeHtml().toString()));`-如果是这样，那是什么？！？我应该如何添加一个简单`<h1>`且`<hr/>`安全（因此使用 Safe* 对象）、高效且符合推荐做法的方式？
*   我应该在这里实施`UiBinder`吗？如果是这样，我会`UiBinder`为每个菜单的内容或整个菜单制作 s `mainPanel`，还是两者兼而有之？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:57:11.177

`Hyperlink`小部件触发*导航*。您不想处理对它们的点击，您想要处理导航（可以通过单击 a`Hyperlink`或使用浏览器的后退/前进按钮、书签或其他地方的链接来触发 - 包括 Ctrl+单击 a`Hyperlink`以在 a 中打开它新窗口/标签——等）

要对这些导航事件做出反应，请使用`History.addValueChangeHandler`; 并在应用程序启动时处理*初始导航*`History.fireCurrentHistoryState()`，调用（当然是在添加处理程序之后）。

更多细节在：[https ://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsHistory](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsHistory)

* * *

将其他问题拆分为......其他问题会更好，但无论如何这里是答案：

> 我觉得我在这里做错了什么：`mainPanel.add(new HTML(headerBuilder.toSafeHtml().toString()));`-如果是这样，那是什么？！？我应该如何添加一个简单`<h1>`且`<hr/>`安全（因此使用 Safe* 对象）、高效且符合推荐做法的方式？

该`HTML`小部件有一个构造函数，`SafeHtml`因此您无需调用`toString()`.
如果您只使用常量，则不需要`SafeHtmlBuilder`; 改为使用`SafeHtmlUtils`。但是无论有没有 ，常量都没有或多或少的*安全*性`SafeHtml`，`SafeHtml`只是让您更容易在代码中找到所有出现的 HTML，以帮助对您的应用程序进行安全审查（顺便说一句，我们正在做 HTML，所以`<hr>`，不是`<hr/>`；如果你真的希望它看起来像 XML/XHTML，然后使用，`<hr />`但你只是在这里[欺骗自己](http://hixie.ch/advocacy/xhtml)）

> 我应该在这里实施`UiBinder`吗？如果是这样，我会`UiBinder`为每个菜单的内容或整个菜单制作 s `mainPanel`，还是两者兼而有之？

如果您觉得不需要 UiBinder，则不必使用它。但在这种情况下，它不会改变任何东西：您处理的不是小部件事件，而是历史事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:46:29.987

就像是

```
dashboardLink.addClickHandler( 
   new ClickHandler() 
   {
       public void onClick( ClickEvent event ) 
       {
           mainPanel.setWidget( getDashboardMenuContent() );
       }
   } ); 
```

您应该注意，`Hyperlink.addClickHandler(...)`它已被弃用，建议改用它`Anchor.addClickHandler(...)`。

至于其他问题：使用 UIBinder 构建 UI 更优雅、更容易，所以一定要研究一下，但请先尝试让“它”工作以避免增加`.ui.xml`设置的复杂性 :-)

干杯，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T12:54:57.190

我有一个简单的建议要给你。使用框架必须提供的东西。

HTML 小部件应该是您最后的转义。有这么多小部件，您几乎不需要在代码中的任何地方编写 html。

因此，您可以使用以下代码代替 headerBuilder

```
Label header = new Label("MyWebApp");
header.setStyleName("headerStyle",true); 
```

您可以在外部 Css 文件中设置样式属性，并在基本 html 文件或 gwt.xml 文件中添加引用。所以这回答了你的问题 `mainPanel.add(new HTML(headerBuilder.toSafeHtml().toString()));`

关于超链接。如果您选择使用超链接，请记住最有效的用法是使用更广为人知的位置和活动（网络上的大量信息）的 MVP 模式

如果您想要更简单的东西，那么`MenuBar`and`MenuItem`类应该可以解决问题。

[在此处](https://stackoverflow.com/questions/1624218/how-do-i-know-that-which-menu-item-is-clicked)查看有关如何使用 MenuBar 来控制您的应用程序的示例。还有很多其他方法，但为什么不使用提供的工具呢？

此外，在 stackoverflow 上广泛讨论了 UIBinder Vs Designer/Classes 方法，从而导致选择和编程熟悉度/偏好问题。

# php - 使用cardsave网关扩展（WordPress）的WooCommerce结帐错误

> ID：13269719
> 
> 赞同：1
> 
> 时间：2012-11-07T12:22:32.820
> 
> 标签：php, wordpress, woocommerce, checkout

将cardsave支付网关集成到WordPress的WooCommerce插件时遇到问题

在结帐页面上，我查看我的购物车并选择下订单，然后出现以下错误：

> {“结果”：“失败”，“消息”：“
> 
> ```
> \n\t\t\t
> Action failed. Please refresh the page and retry.<\/li>\n\t\t\t
> First Name<\/strong> is a required field.<\/li>\n\t\t\t
> Last Name<\/strong> is a required field.<\/li>\n\t\t\t
> Address<\/strong> is a required field.<\/li>\n\t\t\t
> Town\/City<\/strong> is a required field.<\/li>\n\t\t\t
> Postcode<\/strong> is a required field.<\/li>\n\t\t\t
> Country<\/strong> is a required field.<\/li>\n\t\t\t
> Email Address<\/strong> is a required field.<\/li>\n\t\t\t
> Phone<\/strong> is a required field.<\/li>\n\t\t\t
> First Name<\/strong> is a required field.<\/li>\n\t\t\t
> Last Name<\/strong> is a required field.<\/li>\n\t\t\t
> Address<\/strong> is a required field.<\/li>\n\t\t\t
> Town\/City<\/strong> is a required field.<\/li>\n\t\t\t
> Postcode<\/strong> is a required field.<\/li>\n\t\t\t
> Country<\/strong> is a required field.<\/li>\n\t\t\t
> Invalid shipping method.<\/li>\n\t\t\t
> Invalid payment method.<\/li>\n\t<\/ul>","refresh":"false"} 
> ```

我尝试添加一个 PayPal 帐户，一切正常。仅当我选择cardsave 付款类型时才会出现此问题。

非常感谢任何帮助

# single-sign-on - Google App SSO 允许直接登录

> ID：13269721
> 
> 赞同：0
> 
> 时间：2012-11-07T12:22:37.460
> 
> 标签：single-sign-on, google-apps

我在 Google App 中创建了一个帐户。我的正常（非管理员）邮件 ID 是**test@example.com**。如果我尝试使用我的 test@exampl.com 凭据登录gmail.com，我**会****收到**如下所示的错误。 **![在此处输入图像描述](../Images/cbbc8a0536de361bf82d4cd518859b2e.png)**

 **它提供了指向我的网站的链接以进行 SSO。

但是如果我使用**google.com/a/example.com**而不是**gmail.com**，我可以登录。那么为什么谷歌说“它不知道你的密码”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T02:47:43.663

这是启用 SSO 的域的预期行为。用户需要通过 SSO 进行身份验证。

周杰伦**

# c++ - 在文件中存储 9 位

> ID：13269722
> 
> 赞同：0
> 
> 时间：2012-11-07T12:22:40.480
> 
> 标签：c++

所以我需要编写算法来加载二进制文件并在每个字节前加上一个额外的位。

因此，如果这是我在“二进制编辑器”中打开的二进制文件：

0 1 0 0 0 0 0 0

0 0 0 1 0 0 0 0

0 0 0 0 0 0 0 0

0 0 1 0 1 0 0 0

0 1 0 0 0 0 0 0

处理后我将拥有：

**1** 0 1 0 0 0 0 0

0 **0** 0 0 0 1 0 0

0 0 **1** 0 0 0 0 0

0 0 0 **1** 0 0 1 0

1 0 0 0 **0** 0 1 0

0 0 0 0 0 0 0 0

我可以在 C++ 中使用什么“工具”来实现这个目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:32:34.400

这看起来像是`boost::dynamic_bitset`擅长的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:31:29.270

我会使用一个`vector<uint8_t>`和很多位操作符（`<<`, `>>`, `&`,`|`等）。我可能会使用 a`vector<uint16_t>`来保存 9 位值作为中间步骤，这取决于我想要工作的努力程度。

# ios - ios AVCaptureVideoPreviewLayer 捕获当前图像

> ID：13269729
> 
> 赞同：0
> 
> 时间：2012-11-07T12:22:55.450
> 
> 标签：ios, avfoundation, avcapturesession

默认 iPhone 相机应用程序拍摄照片后，会出现预览，并且图像会以动画方式显示到相机胶卷按钮。我正在尝试复制此动画。

```
 session = [[AVCaptureSession alloc] init];
session.sessionPreset = AVCaptureSessionPresetPhoto;

CALayer *viewLayer = self.vImagePreview.layer;
NSLog(@"viewLayer = %@", viewLayer);

captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];

captureVideoPreviewLayer.frame = CGRectMake(0, 0, 322, 425);
[self.vImagePreview.layer addSublayer:captureVideoPreviewLayer];

device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];

NSError *error = nil;
AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
if (!input) {
    // Handle the error appropriately.
    NSLog(@"ERROR: trying to open camera: %@", error);
}
[session addInput:input];
_stillImageOutput = [[AVCaptureStillImageOutput alloc] init];
NSDictionary *outputSettings = [[NSDictionary alloc] initWithObjectsAndKeys: AVVideoCodecJPEG, AVVideoCodecKey, nil];
[_stillImageOutput setOutputSettings:outputSettings];
[session addOutput:_stillImageOutput]; 
```

这就是我拍摄图像的方式：

```
AVCaptureConnection *videoConnection = nil;
for (AVCaptureConnection *connection in _stillImageOutput.connections)
{
    for (AVCaptureInputPort *port in [connection inputPorts])
    {
        if ([[port mediaType] isEqual:AVMediaTypeVideo] )
        {
            videoConnection = connection;
            break;
        }
    }
    if (videoConnection) { break; }
}
NSLog(@"about to request a capture from: %@", _stillImageOutput);
[_stillImageOutput captureStillImageAsynchronouslyFromConnection:videoConnection completionHandler: ^(CMSampleBufferRef imageSampleBuffer, NSError *error)
 {
     CFDictionaryRef exifAttachments = CMGetAttachment( imageSampleBuffer, kCGImagePropertyExifDictionary, NULL);
     if (exifAttachments)
     {
         // Do something with the attachments.
         NSLog(@"attachements: %@", exifAttachments);
     }
     else
         NSLog(@"no attachments");

     NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];
     UIImage *image = [[UIImage alloc] initWithData:imageData];
     UIImageWriteToSavedPhotosAlbum(image, self, @selector(image:didFinishSavingWithError:contextInfo:), nil);
 }]; 
```

这需要完整的照片图像，但我还需要来自 AVCaptureVideoPreviewLayer 的图像，以便我可以使用它来复制动画。如何在 AVCaptureVideoPreviewLayer 中获取当前显示的图像？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-13T22:42:42.187

这样做的方法是向会话添加另一个输出：

```
 frameOutput = [[AVCaptureVideoDataOutput alloc] init];
frameOutput.videoSettings = @{(id)kCVPixelBufferPixelFormatTypeKey : @(kCVPixelFormatType_32BGRA)};

[frameOutput setSampleBufferDelegate:self queue:dispatch_get_main_queue()]; 
```

一旦你有了它，你就可以在缓冲区中获取当前图像：

```
 - (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer
   fromConnection:(AVCaptureConnection *)connection{

// Create a UIImage from the sample buffer data
UIImage *image = [self imageFromSampleBuffer:sampleBuffer];
rotatedScreenImage = rotateUIImage(image, 90.0);} 
- (UIImage *) imageFromSampleBuffer:(CMSampleBufferRef) sampleBuffer{ 
CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);

CVPixelBufferLockBaseAddress(imageBuffer, 0);

// Get the number of bytes per row for the pixel buffer
void *baseAddress = CVPixelBufferGetBaseAddress(imageBuffer);

// Get the number of bytes per row for the pixel buffer
size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer);
// Get the pixel buffer width and height
size_t width = CVPixelBufferGetWidth(imageBuffer);
size_t height = CVPixelBufferGetHeight(imageBuffer);

// Create a device-dependent RGB color space
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

// Create a bitmap graphics context with the sample buffer data
CGContextRef context = CGBitmapContextCreate(baseAddress, width, height, 8,
                                             bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst);
// Create a Quartz image from the pixel data in the bitmap graphics context
CGImageRef quartzImage = CGBitmapContextCreateImage(context);
// Unlock the pixel buffer
CVPixelBufferUnlockBaseAddress(imageBuffer,0);

// Free up the context and color space
CGContextRelease(context);
CGColorSpaceRelease(colorSpace);

// Create an image object from the Quartz image
UIImage *image = [UIImage imageWithCGImage:quartzImage];

// Release the Quartz image
CGImageRelease(quartzImage);

return (image); 
```

}

而那个 return(image) 就是屏幕缓冲区上的实际内容。

# android - 在框架布局中使用包含，我怎样才能让活动工作？

> ID：13269730
> 
> 赞同：0
> 
> 时间：2012-11-07T12:22:58.897
> 
> 标签：android, tabs, include

我正在使用此代码

```
package com.example.prufa;

import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.view.Menu;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TabHost tabHost=(TabHost)findViewById(R.id.tabHost);
        tabHost.setup();

        TabSpec spec1=tabHost.newTabSpec("Sími");
        spec1.setContent(R.id.Sími);
        spec1.setIndicator("Sími");

        TabSpec spec2=tabHost.newTabSpec("Sms");
        spec2.setIndicator("Sms");
        spec2.setContent(R.id.Sms);

        TabSpec spec3=tabHost.newTabSpec("Net");
        spec3.setIndicator("Net");
        spec3.setContent(R.id.Net);

        TabSpec spec4=tabHost.newTabSpec("Greina");
        spec4.setIndicator("Greina");
        spec4.setContent(R.id.Greina);

        tabHost.addTab(spec1);
        tabHost.addTab(spec2);
        tabHost.addTab(spec3);
        tabHost.addTab(spec4);

    } 
```

使用这个 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tabHost"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TabWidget
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@android:id/tabs"
    />

        <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/bScan"
        android:layout_below="@+android:id/tabs" >

        <include
            android:id="@+id/Sími"
            layout="@layout/activity_simi" />

        <include
            android:id="@+id/Sms"
            layout="@layout/activity_sms" />

        <include
            android:id="@+id/Net"
            layout="@layout/activity_net" />

        <include
            android:id="@+id/Greina"
            layout="@layout/activity_greina" />

     <LinearLayout
         android:id="@+id/Sími"
         android:layout_width="fill_parent"
         android:layout_height="340dp"
         android:orientation="vertical"
         android:paddingTop="60px" >
     </LinearLayout>

     <LinearLayout
     android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/Sms"
    android:orientation="vertical"
    android:paddingTop="60px"
     >

     </LinearLayout>

      <LinearLayout
     android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/Net"
    android:orientation="vertical"
    android:paddingTop="60px"
     >

     </LinearLayout>

     <LinearLayout
     android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/Greina"
    android:orientation="vertical"
    android:paddingTop="60px"
     >

     </LinearLayout>
     </FrameLayout>

    </TabHost> 
```

我在主要活动中有 4 个选项卡，我正在使用包含，因此我可以创建 4 个其他活动并使用这些活动中的每个选项卡。我必须在 Mainactivity 文件中做一些事情，这样我才能做到这一点。但我不知道我该怎么做。我正在尝试将控件从 Mainactivity 移动到我正在处理选项卡的其他活动。我现在可以为每个选项卡使用 xml 文件，但我无法使用该活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-02T00:36:01.403

如果我明白你想做什么，你必须使用包含，也许应该工作。

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/tabHost"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >

    <TabWidget
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@android:id/tabs"/>

    <FrameLayout
    android:id="@android:id/tabcontent"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@+id/bScan"
    android:layout_below="@+android:id/tabs" >

        <include
            android:id="@+id/Sími"
            layout="@layout/activity_simi" />

        <include
            android:id="@+id/Sms"
            layout="@layout/activity_sms" />

        <include
           android:id="@+id/Net"
           layout="@layout/activity_net" />

       <include
           android:id="@+id/Greina"
           layout="@layout/activity_greina" />

   </FrameLayout>

</TabHost> 
```

但是，您是否尝试使用 Fragments 代替活动？从本质上讲，片段是一段 ui 代码，其行为类似于活动。我认为这是最适合您的代码。查看开发者页面：

[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

希望我有所帮助。

# php - 深数组！空检查php

> ID：13269732
> 
> 赞同：0
> 
> 时间：2012-11-07T12:23:08.413
> 
> 标签：php, arrays

我需要检查数组值，但是当数组为空时，我得到这个：错误：不能使用字符串偏移作为数组

```
if (!empty($items[$i]['tickets']['ticket'][0]['price']['eur'])) {  //do something  } 
```

如何正确执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:31:10.740

您需要检查是否设置了变量，然后检查它是否是一个数组，然后检查是否设置了数组的元素。if 的语句将按顺序执行，当一个为 false 时将中断。

```
if(isset($items) && is_array($items) && isset($items[$i]['tickets']['ticket'][0]['price']['eur'])) {
    //jep it's there
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:34:30.637

或者只是尝试一下（额外的 sipmle 变体）：

```
if (!isset($items[$i]['tickets']['ticket'][0]['price']['eur'])) {
   // do action
} 
```

# android - 如何在我们的 android 应用程序中使用 Push Get Notification 代码

> ID：13269733
> 
> 赞同：0
> 
> 时间：2012-11-07T12:23:16.733
> 
> 标签：android, push-notification, google-cloud-messaging

嗨，我是 gcm 服务的新手，我真的不知道如何在我们的应用程序中使用推送获取通知。我读了很多文章，但没有，但如果有人有工作的代码和处理器，我没有得到好的文章，请与我分享。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T12:29:12.177

您是否尝试过以下链接，这对您了解 gcm 很有用

[http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)

# java - 我的学习作业

> ID：13269735
> 
> 赞同：-1
> 
> 时间：2012-11-07T12:23:22.303
> 
> 标签：java, arrays

编写一个接受来自用户的 100 个整数的 Java 应用程序。输入应在 1-200 范围内。程序将显示以下类别的整数个数：

```
1-10
11-20
21-30
31-40
…
…
191-200 
```

> 你的程序应该有一个 void 方法来完成这些任务。它有一个参数表示输入值，形式`int[]`如下所示：
> 
> `void displayStatistics( int[] input)`

请大家帮帮我。我不知道下一步该怎么做。

代码是这样的：

```
public static ArrayList<Integer> array = new ArrayList<Integer>();
public static Scanner reader = new Scanner(System.in);

public static void main (String[] args)
{
    System.out.println("Enter number and 0 for stop.");
    int enter = reader.nextInt();
    while ( enter != 0)
    {
        if ((enter >= 1) && (enter <= 200))
        {
            array.add(enter);
        }

        else
        {
            System.out.println("Number range is 1-200");
        }

         enter= reader.nextInt();    
    }

    void displayStatistics(int[] input)
    {
    for (int i = 1; i <= 20; i++)
    {
        int Nombor1 = ((i-1) * 10) + 1;
        int Nombor2 = (i * 10);
        int count = 0;
        System.out.print((Number1 + "-" + Number2 +"   ===>"));
        for (int number : array)

        {
            if ((number >= Number1) && (number <= Number2))
            {
                count++;
            }
        }

        for (int x = 0; x < count; x++)

            System.out.print(x+1);

            System.out.println();
    }
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:27:33.310

我会确保你的程序编译并测试它，看看它做了什么。如果您使用 IDE，它会在您键入时显示代码是否正在编译，并且可以帮助您格式化代码。

当它没有按照您的预期执行时，您可以使用调试器单步执行代码，以找出它执行它的原因。

* * *

为了您的兴趣，并且您有一个似乎可行的方法，这是我将如何编写 displayStatistics

```
static void displayStatistics(int[] ints) {
    int[] count = new int[20];
    for (int i : ints) count[(i - 1) / 10]++;
    for (int i = 0; i < count.length; i++)
        System.out.printf("%d to %d : %d%n", i * 10 + 1, i * 10 + 10, count[i]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:31:46.397

好的，对您显示的代码进行一些说明。

*   你不能把一个方法放在另一个里面。将 displayStatistics() 移出 main()。
*   注意从一开始就正确缩进你的代码。它有助于获得正确的代码。
*   遵循 Java 约定：写`nombor1`，而不是`Nombor1`.
*   在扫描范围之后，`println`,`count`循环这个值是没有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T12:42:29.940

您忘记关闭主要方法。

然后你需要调用 displaystatistics 方法。您可以将该方法更改为静态方法，或创建类的新实例。

无论哪种方式，您都不需要将变量“input[]”传递给它，因为您将“array”声明为静态。

然后，只显示结果。

我稍微更正了你的程序，所以这应该可以工作，但这不是解决这个问题的最有效方法。

```
public static ArrayList<Integer> array = new ArrayList<Integer>();
public static Scanner reader = new Scanner(System.in);

public static void main(String[] args) {

    System.out.println("Masukkan nombor antara 1-200 dan 0 untuk berhenti.");
    int masuk = reader.nextInt();
    while ( masuk != 0 ) {
        if ( (masuk >= 1) && (masuk <= 200) ) {
            array.add(masuk);

        }

        else {
            System.out.println("Nombor mesti antara 1-200");
        }
        masuk = reader.nextInt();
    }
    displayStatistics();
}

static void displayStatistics() {
    for (int i = 1; i <= 20; i++) {
        int Nombor1 = ((i - 1) * 10) + 1;
        int Nombor2 = (i * 10);
        int count = 0;
        System.out.print((Nombor1 + "-" + Nombor2 + "   ===>"));
        for (int nombor : array) {
            if ( (nombor >= Nombor1) && (nombor <= Nombor2) ) {
                count++;
            }
        }

        /*for (int x = 0; x < count; x++) {
            System.out.print(x + 1);
        }*/
        System.out.print(count);
        count = 0;

        System.out.println();

    }

} 
```

# java - 如何使用数组创建哈希表

> ID：13269736
> 
> 赞同：0
> 
> 时间：2012-11-07T12:23:22.240
> 
> 标签：java, hashtable

我有一个表单列表，它们保存在一个数组列表中（示例值：F1、F2、...、F7）和一个用户 ID 列表（示例值：1,2,3）。我需要一个包含用户 ID 和表单列表（例如 Hashtable）的表，其中整数值是用户 ID（例如 1），ArrayList 是该用户可以访问的表单列表（例如用户 1 他们是 F2，F3）。如何创建此哈希表，以便每个匹配的用户 id 的 arraylist 包含表单列表中的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:26:21.293

怎么样

```
Map<Integer,List<String>> yourList = new HashMap<Integer,List<String>>(); 
```

这非常符合您的要求 -`Integer`是您的用户 ID，并且`List<String>`可以保存该用户允许的表单。

另外：同上@Tichodroma 的评论！

干杯，

# iphone - 哪个是更好的 iOS 照片查看器：Three20 或 EGOPhotoViewer

> ID：13269740
> 
> 赞同：2
> 
> 时间：2012-11-07T12:23:28.890
> 
> 标签：iphone, ios, multithreading, uiimageview, three20

我正在制作一个用于在 iOS 中显示图片库的应用程序，我遇到了两个示例。

我想知道[Three20](https://github.com/enormego/three20)和[EGOPhotoViewer](https://github.com/enormego/PhotoViewer)之间的区别。我的意思是这两个应用程序都是由同一个开发人员 ( [enormego](https://github.com/enormego) ) 开发的。

*   将它们用于应用商店是否安全，我的意思是它可能不会被拒绝，并且与 iOS6 兼容？
*   使用 EGOPhotoViewer 比 Three20 有什么优势吗？
*   对于缓存、线程等的任何重要特性，是否值得坚持使用 Three20？
*   在代码中，两者几乎都使用相同的类和具有不同名称的函数。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T12:28:04.857

我会出于 1 个原因和 1 个原因推荐反对 Three20：Three20 代码有点混乱，通常与其他 Three20 类有很多相互依赖关系，你可能不需要。将整个 Three20 库包含在您的项目中只是为了使用照片浏览器是很糟糕的。我想让事情尽可能简单。

我过去使用过 EGOPhotoViewer，虽然它通常运行良好，但我确实遇到了一些小问题，遗憾的是我不记得了。最终我在 MWPhotoBrowser 中找到了替代品，因此您也可以考虑使用它。

[https://github.com/mwaterfall/MWPhotoBrowser](https://github.com/mwaterfall/MWPhotoBrowser)

# android - 流式互联网广播错误android

> ID：13269745
> 
> 赞同：1
> 
> 时间：2012-11-07T12:23:59.293
> 
> 标签：android, media-player, internet-radio

我正在尝试使用从
[http://www.4shared.com/zip/OTcJZZft/StreamingRadio.html](http://www.4shared.com/zip/OTcJZZft/StreamingRadio.html)
下载的示例播放互联网广播，该示例的工作原理类似于此示例中给出的[适用于 Android 的在线广播流媒体应用程序](https://stackoverflow.com/questions/6283568/online-radio-streaming-app-for-android)，但问题是我的logcat 不断抛出这个错误：

```
11-07 17:20:39.207: E/MediaPlayer(335): error (1, -1002)
11-07 17:20:39.237: E/MediaPlayer(335): Error (1,-1002)
11-07 17:20:48.882: W/KeyCharacterMap(335): No keyboard for id 0
11-07 17:20:48.886: W/KeyCharacterMap(335): Using default keymap: /system/usr/keychars/qwerty.kcm.bin 
```

我无法理解这意味着什么。有人可以解释一下它的含义吗，如果有人可以指导我学习互联网广播流媒体的新教程，那将是很大的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-27T02:37:33.453

MediaPlayer 抛出该错误 (1, -1002) 以响应您在 setDataSource(String) 方法中传递的 URL。为您的 MediaPlayer 对象设置一个 onErrorListener() 并捕获播放器抛出的错误。（快速查看文档 - [http://developer.android.com/reference/android/media/MediaPlayer.OnErrorListener.html](http://developer.android.com/reference/android/media/MediaPlayer.OnErrorListener.html)）您可以通过检查通过 logcat 或 Toast 对象抛出的代码来评估错误并采取适当的措施基于此。
根据我播放互联网广播的经验，我发现大多数情况下，MediaPlayer 引发的错误或类似错误是由于来自服务器的流无效或电台不再通过该 URL 可行而引起的。尝试收集其他几个链接并尝试查看哪些有效，哪些无效。

# java - Java ftp 上传文件并将文件匹配到网站成员

> ID：13269746
> 
> 赞同：1
> 
> 时间：2012-11-07T12:23:59.323
> 
> 标签：java, php, ftp, client, apache-commons

所以我有一个java webapp，可以让用户将文件上传到服务器。我正在使用 apache commons library FtpClient 来做到这一点。

我希望能够将上传的文件与我网站的用户匹配（网络应用程序只能从网站的用户区域内访问）。网站和整个用户交互和管理都在 PHP / MySQL 中。所以基本上，我想将在 Java webapp 中上传的文件与上传它的 MySQL 表中的用户相匹配。

我应该如何在服务器上使用 PHP 来获取该文件并将其与用户匹配？或者也许从Java应用程序中以某种方式做到这一点更方便？您建议采用哪种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:29:16.577

您可以使用已上传的文件名和用户名或用户 ID 通过 post 调用 JSP，这可用于更新或插入数据库，您可以在其中保存文件和用户之间的关系。

希望这能解决问题。

# java - 向 ThreadPoolTask Executor 提交任务时出现 RejectedExecutionException

> ID：13269756
> 
> 赞同：1
> 
> 时间：2012-11-07T12:24:53.300
> 
> 标签：java, spring, junit

spring **ThreadPoolTask​​Executor**用于在我们的应用程序中进行并发处理。成功完成所有工作后，将调用摊牌方法。此实现工作正常，执行 junit 时出现问题。

我已经使用**SpringJUnit4ClassRunner**为这个类编写了多个测试用例。第一个测试用例将完美运行并关闭 ThreadPoolTask​​Executor。但是当第二个测试用例尝试提交任务时，会引发以下异常

```
org.springframework.core.task.TaskRejectedException: Executor [java.util.concurrent.ThreadPoolExecutor@16cefa8] did not accept task: com.sample.SampleJob@ea3cdf
    ....
aused by: java.util.concurrent.RejectedExecutionException
    at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:1768)
    at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:767) 
```

根据我的分析，抛出异常是因为我试图在关闭时将任务提交给 ThreadPoolExecutor。

任何人都可以帮助我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-03T14:56:09.983

不确定何时关闭执行程序，但我认为不应在每个测试用例之后调用关闭，但应该在所有测试用例结束时调用它。您可以使用以下方法：

```
@AfterClass
public void tearDown(){
 //shutdown your executor
} 
```

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:37:29.197

请注意，`SpringJUnit4ClassRunner`默认情况下，在执行每个测试方法后不会重新创建应用程序上下文。

这意味着如果您`Executor`在上下文中声明并且您在执行测试方法后关闭，您将无法在其他测试方法中使用它。

您可以使用注释您的测试方法[`@DirtiesContext`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/test/annotation/DirtiesContext.html)以`SpringJUnit4ClassRunner`重新创建上下文。

# c# - 生成一个具有 7 位数字的数字，并且能够在前面有零

> ID：13269757
> 
> 赞同：1
> 
> 时间：2012-11-07T12:24:53.657
> 
> 标签：c#, winforms, random, numbers

> **可能重复：**
> [C# 将 int 转换为带有填充零的字符串？](https://stackoverflow.com/questions/4325267/c-sharp-convert-int-to-string-with-padding-zeros)

我正在尝试生成一个随机数，但是在我包含的范围内“0000000、9999999”我希望它在生成数字时显示这些零，例如以下输出将是：

“00037544” “01659369” “75484957” “00000001”

我正在使用：

```
 int num = rnd.Next(0000000, 9999999); 
```

问题是有时它会产生：

“1648”“947596”“18500”等

有什么我想念的吗？

感谢您的关注

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T12:27:07.440

您必须将其转换为字符串，然后使用`PadLeft`.

```
string number = num.ToString().PadLeft(7, '0'); 
```

或者简单地说

```
string number = num.ToString("0000000"); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-07T12:31:31.810

`int`只代表一个数字；它不知道它有多少个零。

当您*显示*该数字时，您可以给它任意数量的前导零。

[例如](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)，`num.ToString("D7")`将创建一个具有足够前导零的字符串以使其长度为 7 位，就像`String.Format("{0:D7}", num)`. `Console.WriteLine("{0:D7}", num)`以同样的方式工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T12:27:48.347

看看[文档](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)。

您正在生成整数，并且需要格式化它们。类似的东西`num.ToString("0000000")`就足够了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T12:28:35.563

左边有零的任何数字在逻辑上与没有这些零的相同数字相同。我认为您想要的是一种在屏幕上打印零的方法。

示例：5 等于 00005；但你想用 5 位打印数字 5。您执行此操作的方式取决于语言。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T12:36:40.587

试试这个：

```
 Random rnd = new Random();
        int num = rnd.Next(0000000, 9999999);
        string num2 = num.ToString("D7"); 
```

# xcode - qmake 项目和 Mac OS X SDK

> ID：13269758
> 
> 赞同：1
> 
> 时间：2012-11-07T12:25:04.470
> 
> 标签：xcode, macos, qt, qmake

从 Qt 项目中使用 Mac OS SDK 最明智的方法是什么？你需要有一个基本 SDK (MacOSX10.X.sdk) 的路径，你需要的头文件的路径，并指出你正在使用的框架。

目前我正在我的 pro 文件中执行此操作（在此处的帮助下；[Qt、Qmake 和 Mac Os X SDKs](http://www.agile-workers.com/web/2012/03/qt-qmake-osx_sdk-xcode/)）：

```
MAC_SDK  = /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk
if( !exists( $$MAC_SDK) ) {
  error("The selected Mac OSX SDK does not exist at $$MAC_SDK!")
}
QMAKE_MAC_SDK = $$MAC_SDK

INCLUDEPATH += $$QMAKE_MAC_SDK/System/Library/Frameworks/CoreFoundation.framework/Versions/A/Headers

DEPENDPATH  += $$QMAKE_MAC_SDK/System/Library/Frameworks/CoreFoundation.framework/Versions/A/Headers

LIBS += -framework CoreFoundation 
```

SDK 在 Xcode 应用程序包中，到底是什么？我想知道是否存在存储 SDK 路径的环境变量。另外，切换 SDK 版本，我必须去 MAC_SDK 路径并将 10.7 更改为其他版本，这是最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:47:34.740

Xcode 的最新版本（我认为是 4.4 以后的版本）现在将所有内容都保留在 Xcode 包本身中，而不是之前说`/Developer`的。其他工具和应用程序需要单独下载。

除了使用 Xcode（特别是 xcodebuild）查询 SDK 之外，不知道任何环境变量？

我使用了与您在 qmake 项目中选择和使用 SDK 相同的方法。通常，您使用不会经常更改的最新 SDK 进行开发。您可能需要或需要[最低版本](https://stackoverflow.com/questions/2923502/what-does-macosx-version-min-imply)的操作系统（=> SDK），因此会使用`-mmacosx-version-min=10.X`编译器选项来断言这一点。

# java - 如何安装自定义 LAF？

> ID：13269761
> 
> 赞同：0
> 
> 时间：2012-11-07T12:25:12.567
> 
> 标签：java, swing, packaging, look-and-feel, substance

我正在使用 Netbeans IDE，我想在 Java 应用程序中使用 Insubstantial LAF (http://insubstantial.posterous.com/)。但是，我不知道如何安装它。有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T12:53:48.740

将其 jar 放在类路径中，并在您的 main 方法中，在显示任何 Swing 组件之前，添加以下代码：

```
UIManager.setLookAndFeel("fully.qualified.name.of.the.LookAndFeel"); 
```

# java - 用于不规则时间间隔的石英

> ID：13269762
> 
> 赞同：2
> 
> 时间：2012-11-07T12:25:17.043
> 
> 标签：java, multithreading, quartz-scheduler

我正在使用 Quartz 库来安排`Thread`（使用`Jobs`）。

我的老板问我是否可以用 Quartz 解决这种情况：

有一个进程必须仅在一周中的几天的 00:00hs、5:00hs、9:00hs 和其他不同时间执行。如您所见，重复没有固定的间隔。有 5 到 6 个不同的时间。

有没有`ScheduleBuilder`办法解决这种情况？

我试过了，`DailyTimeIntervalScheduleBuilder`但这个时间表在固定的时间间隔内工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:28:39.380

简单的解决方案是每小时安排一次工作。并在 Job 检查当前时间以查看它是 00.00 或 05.00 还是 09.00。如果是，做你的工作，否则什么都不做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T12:36:00.210

这很简单，如果您使用 CronTrigger ，请参阅：http: [//quartz-scheduler.org/documentation/quartz-1.x/tutorials/crontrigger](http://quartz-scheduler.org/documentation/quartz-1.x/tutorials/crontrigger)。

这样，您将能够使用类似于 Unix cron 表达式的表达式仅在特定时间安排作业。

对于您的情况，如果您想在每个工作日的 0、5 和 9 小时开始工作，您将使用如下表达式`0 0 0,5,9 ? * MON-FRI`

# vb.net - vb文件存在脚本

> ID：13269764
> 
> 赞同：0
> 
> 时间：2012-11-07T12:25:24.173
> 
> 标签：vb.net

我有这个脚本，但想在 C: 上没有文件的情况下对其进行增强：从 R: 驱动器复制一个。目前正在检查文件是否存在。

目前，此脚本将在单个文件夹 \SCRIPTS 中的多个文件上运行。当我为每个不同的文件名重复该语句时（我确实知道文件名）检查 R:\SCRIPTS 中的所有文件并与 C:\SCRIPTS 复制或覆盖文件进行比较的更经济的方法会很好，如果任何人都有一个可能有帮助的片段

```
Const OverwriteExisting = TRUE

Set objFSO = CreateObject("Scripting.FileSystemObject")

Set objLocalFile = objFSO.GetFile("C:\SCRIPT\SCRIPTTEXT.txt")
dtmLocalDate = objLocalFile.DateLastModified

Set objServerFile = objFSO.GetFile("R:\SCRIPT\SCRIPTTEXT.txt")
dtmServerDate = objServerFile.DateLastModified

If dtmLocalDate < dtmServerDate Then
    objFSO.CopyFile objServerFile.Path, objLocalFile.Path, OverwriteExisting
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:50:10.543

```
using System.IO;

Dim ServerFolder As New IO.DirectoryInfo("R:\SCRIPT")
Dim LocalFolder As New IO.DirectoryInfo("C:\SCRIPT")

For Each ServerFile In ServerFolder.GetFiles
    If IO.File.Exists(LocalFolder.FullName & "\" & ServerFile.Name) Then
        Dim LocalFile As New IO.FileInfo(LocalFolder.FullName & "\" & ServerFile.Name)
        If ServerFile.LastWriteTime > LocalFile.LastWriteTime Then
            IO.File.Copy(ServerFile.FullName, LocalFile.FullName, True)
        End If
    Else
        IO.File.Copy(ServerFile.FullName, LocalFolder.FullName & "\" & ServerFile.Name)
    End If
Next 
```

# css - 内容 100%，底部固定页脚

> ID：13269765
> 
> 赞同：0
> 
> 时间：2012-11-07T12:25:36.903
> 
> 标签：css

我正在尝试创建一个底部固定页脚的模板。我已经成功地尝试了不同的方法，但现在我发现无法将二级内容 div 扩展到 100% 高度。我尝试过 Ryan Fait、David Walsh 并搜索其他方法。我知道这是一个常见问题，但在 stackoverflow 中我还没有看到解决方案。

你可以在这里看到一个例子：http: [//jsfiddle.net/charlyta/hyfUe/](http://jsfiddle.net/charlyta/hyfUe/)

```
 * {
        margin: 0;
        padding: 0;
        }

    body, html {
        height: 100%;
        }

    #container {
        background: #f00; /* styling only */
        width: 100%;
        margin: 0 auto;
        position: relative;
        height: auto !important;
        min-height: 100%;
        height: 100%;

        }

    #content {
        padding-bottom: 100px;
        width: 980px;
        background-color: #FFF;
        margin: 0 auto;
        min-height: 100%;
        margin-top: -20px;
        -webkit-box-shadow: 0px 1px 3px rgba(27, 57, 50, 0.44);
        -moz-box-shadow:    0px 1px 3px rgba(27, 57, 50, 0.44);
        box-shadow:         0px 1px 3px rgba(27, 57, 50, 0.44);
        -moz-border-radius: 5px;
        border-radius: 5px;
        position: relative;
         max-height:100%;
        height:auto !important;
         height: 100%;
        overflow: hidden;

        }

    #footer {
        position: absolute;
        left: 0;
        bottom: 0;
        height: 100px;
        width: 100%;
        background: #0f0;
        }

        #header {

        height: 100px;
        width: 100%;
        background: #0f0;
        }

</style> 
```

```
<div id="container">
<div id="header">
header
</div>
    <div id="content">
        Your content goes here
    </div>
    <div id="footer">
        Footer here
    </div>        
</div>
 </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:29:34.220

css的一些变化

```
* {
    margin: 0;
    padding: 0;
    }

#container {
    background: #f00; /* styling only */
    display:block;
    margin: 0 auto;
    min-height: 100%;
    }

#content {
    padding-bottom: 100px;
    width: 980px;
    background-color: #FFF;
    margin: 0 auto;
    min-height: 100%;
    margin-top: -20px;
    -webkit-box-shadow: 0px 1px 3px rgba(27, 57, 50, 0.44);
    -moz-box-shadow:    0px 1px 3px rgba(27, 57, 50, 0.44);
    box-shadow:         0px 1px 3px rgba(27, 57, 50, 0.44);
    -moz-border-radius: 5px;
    border-radius: 5px;
    position: relative;
     max-height:100%;
    height:auto !important;
     height: 100%;
    overflow: hidden;
    }

#footer {
    display:block;
    position: fixed; /* here is where the magic happens =D */
    left: 0;
    bottom: 0;
    height: 100px;
    width: 100%;
    background: #0f0;
    }

    #header {

    height: 100px;
    width: 100%;
    background: #0f0;
    } 
```

如果要将页脚固定在底部，则页脚不能位于任何容器内，因此您的 html 应如下所示：

```
<div id="container">
    <div id="header">
    header
    </div>

    <div id="content">
        Your content goes here
    </div>
</div>

<div id="footer">
    Footer here
</div> 
```

我想这就是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:11:21.210

编辑：

重试：

[http://jsfiddle.net/hyfUe/12/](http://jsfiddle.net/hyfUe/12/)

```
 #container {
        background: #f00; /* styling only */
        width: 100%;
        margin: 0 auto;
        /*position: relative;*/
        /*height: auto !important;*/
        /*min-height: 100%;*/
        height: calc(100% - 120px); /* MAGIC */
    }

    #content {
        border: 3px dashed silver; /* DEBUG */
        padding-bottom: 100px;
        width: 980px;
        background-color: #FFF;
        /*margin: 0 auto; /* REMOVED */
        /*min-height: 100%; /* REMOVED */
        margin-top: -20px;
        margin-bottom: 100px;
        -webkit-box-shadow: 0px 1px 3px rgba(27, 57, 50, 0.44);
        -moz-box-shadow:    0px 1px 3px rgba(27, 57, 50, 0.44);
        box-shadow:         0px 1px 3px rgba(27, 57, 50, 0.44);
        -moz-border-radius: 5px;
        border-radius: 5px;
        display: block;
        height: calc(100% - 170px) !important; /* MAGIC */
        }

    #footer {
        opacity: 0.5; /* DEBUG */
        position: absolute;
        left: 0;
        bottom: 0;
        height: 100px;
        width: 100%;
        background: #0f0;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-17T12:35:47.050

```
.container-for-fix-footer {
  display: flex;
  flex-direction: column;
  height: 100vh;
}
footer {
  height: 50px;
  flex-shrink: 0; /* this is what does the trick */
  background-color: black;
}
main {
  flex: 1 0 auto;
}
```

```
<div class="container-for-fix-footer">
  header
  <main class="content">
  content
  </main>
  <footer>FOOTER</footer>
</div>
```

# razor - 我们如何管理 POCO Entity 中两个表之间的关系？

> ID：13269769
> 
> 赞同：-1
> 
> 时间：2012-11-07T12:25:43.407
> 
> 标签：razor, entity-framework-4.1, poco, asp.net-mvc-3-areas

我是 POCO 的新手。我有两个表，例如 tb1 和 tb2。假设我们在这些表之间有 PK 和 FK 关系。当涉及到 POCO CF 时，我们如何管理这种关系？我按照以下方法做了一个示例文章。

```
 public abstract class Person
    {
        public string Name { get; set; }
        public int DepartmentId { get; set; }
        public virtual Department Department { get; set; }
    }

    public class Collaborator : Person
    {
        public int CollaboratorId { get; set; }
        public string ManagerCode { get; set; }
        public virtual Manager Manager { get; set; }
    } 
```

为什么他们使用抽象和虚拟关键字？谁能解释一下我们如何管理这些关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:48:43.143

我假设您使用的是模型优先的方法。您将需要使用 Fluent API 来定义关系。这是[一篇关于如何做到这一点的好文章](http://msdn.microsoft.com/en-us/data/hh134698.aspx)。

# facebook - 我可以通过应用程序和 SDK 在 Facebook 上的用户墙上发布多少帖子

> ID：13269770
> 
> 赞同：0
> 
> 时间：2012-11-07T12:25:43.657
> 
> 标签：facebook

我想使用 faceook 图和[sdk](https://github.com/facebook/php-sdk)制作 php 脚本来制作一个 time-crom 任务，在所有用户墙上发布每个 6 小时的特定状态

我的问题是我可以一次向他们发送多少用户？

可能是 1000 或 50000 还是什么？

我在用着

```
$attachment = array(
    'access_token'=>TOKEN,
    'message'=>'message_here',
    'link' => 'http://www.example.com',
);
$result = $facebook->api(
    'me/links',
    'post',
    $attachment
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:40:57.037

我认为没有官方限制，但如果你这样做，你的应用程序很快就会受到限制。此外，这违反了几项 Facebook 规则。首先，因为它是垃圾邮件。其次，因为您只允许填写“消息”字段用户生成的文本。此外，“所有用户墙”意味着您需要权限offline_access，幸运的是，该权限已被弃用，很快就会被删除。否则，访问令牌的有效期仅为 2 小时，您只能将其延长至 60 天。当然，对于每个用户墙，您都需要该用户的用户访问令牌。

# asp.net - OnCheckedChanged 嵌套列表视图控件

> ID：13269773
> 
> 赞同：0
> 
> 时间：2012-11-07T12:26:13.900
> 
> 标签：asp.net, listview, findcontrol, oncheckedchanged

我有以下嵌套列表视图...

```
<asp:ListView ID="lvwRiskQuestions" runat="server" ItemPlaceholderID="QuestionItemPlaceholder">
    <LayoutTemplate>
        <asp:PlaceHolder ID="QuestionItemPlaceholder" runat="server" />
    </LayoutTemplate>
    <ItemTemplate>
        <%# Eval("DESCRIPTION")%>
            <asp:ListView ID="lvwAnswers" runat="server" ItemPlaceholderID="AnswerItemPlaceholder" DataSource='<%# Eval("Answers")%>'>
                <LayoutTemplate>
                    <asp:PlaceHolder ID="AnswerItemPlaceholder" runat="server" />
                </LayoutTemplate>
                <ItemTemplate>
                    <asp:RadioButton ID="rdbSelect" runat="server" AutoPostBack="true" OnCheckedChanged="rdbSelectChanged"/>                                        
                        <%# Eval("Description")%>
                </ItemTemplate>
        </asp:ListView>
    </ItemTemplate>
</asp:ListView> 
```

我像这样抓住单选按钮 OnCheckedChanged ......

```
Protected Sub rdbSelectChanged(ByVal sender As Object, ByVal e As System.EventArgs)

    Dim rb1 As RadioButton = CType(sender, RadioButton)

    Dim lvwAnswers = DirectCast(lvwRiskQuestions.FindControl("lvwAnswers"), ListView)

    For Each row As ListViewItem In lvwAnswers.Items
        Dim rb As RadioButton = row.FindControl("rdbSelect")
        If rb IsNot Nothing AndAlso rb.Checked Then
            rb.Checked = False
        End If
    Next
    rb1.Checked = True
End Sub 
```

我遇到的问题是“lvwAnswers”什么都没有。我猜我没有正确地做我的 findcontrol。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:09:36.140

如果您只是为答案生成单选按钮列表，则可以使用[`RadioButtonList`control](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.radiobuttonlist.aspx)。这将生成正确的 HTML，以便每个问题只能选择一个答案，而无需回发以取消选择其他选项。

如果您的答案模板包含多个`RadioButton`，事情会变得更加复杂。当它不在 a`RadioButtonList`中时，`RadioButton`使用`UniqueID`父级的`NamingContainer`来构建其唯一的组名。不幸的是，在您的示例中，这`NamingContainer`将`ListViewDataItem`来自*lvwAnswers*列表，并且每个答案都有不同的 ID。

您需要的是一个`RadioButton`将查看`NamingContainer`'s`NamingContainer`以生成其组名。您可以重新实现`RadioButton`控件，或者使用一点反射来更新私有`_uniqueGroupName`字段：

```
[ToolboxData("<{0}:ListRadioButton runat=\"server\" />")]
public class ListRadioButton : RadioButton
{
   private static readonly FieldInfo UniqueGroupNameField = FindUniqueGroupNameField();
   private string _uniqueGroupName;

   private static FieldInfo FindUniqueGroupNameField()
   {
      return typeof(RadioButton).GetField("_uniqueGroupName", 
         BindingFlags.NonPublic | BindingFlags.Instance);
   }

   protected virtual string CreateUniqueGroupName()
   {
      string result = GroupName;
      if (string.IsNullOrEmpty(result))
      {
         result = ID;
      }
      if (string.IsNullOrEmpty(result))
      {
         result = UniqueID;
      }
      else
      {
         Control container = NamingContainer;
         if (container != null)
         {
            if (container is IDataItemContainer)
            {
               container = container.NamingContainer ?? container;
            }

            result = container.UniqueID + base.IdSeparator + result;
         }
         else
         {
            string uniqueID = UniqueID;
            if (!string.IsNullOrEmpty(uniqueID))
            {
               int index = uniqueID.LastIndexOf(base.IdSeparator);
               if (index != -1)
               {
                  result = uniqueID.Substring(0, 1 + index) + result;
               }
            }
         }
      }

      return result;
   }

   private void EnsureUniqueGroupName()
   {
      if (_uniqueGroupName == null)
      {
         string value = CreateUniqueGroupName();
         if (UniqueGroupNameField != null) UniqueGroupNameField.SetValue(this, value);
         _uniqueGroupName = value;

         value = base.Attributes["value"];
         if (string.IsNullOrEmpty(value))
         {
            base.Attributes["value"] = UniqueID;
         }
      }
   }

   protected override bool LoadPostData(string postDataKey, NameValueCollection postCollection)
   {
      EnsureUniqueGroupName();
      return base.LoadPostData(postDataKey, postCollection);
   }

   protected override void Render(HtmlTextWriter writer)
   {
      EnsureUniqueGroupName();
      base.Render(writer);
   }
} 
```

使用该控件并使用`site`前缀注册后，您可以将代码更改为：

```
<asp:ListView ID="lvwRiskQuestions" runat="server" ItemPlaceholderID="QuestionItemPlaceholder">
<LayoutTemplate>
   <asp:PlaceHolder ID="QuestionItemPlaceholder" runat="server" />
</LayoutTemplate>
<ItemTemplate>
   <%# Eval("DESCRIPTION") %>
   <asp:ListView ID="lvwAnswers" runat="server" ItemPlaceholderID="AnswerItemPlaceholder" DataSource='<%# Eval("Answers")%>'>
   <LayoutTemplate>
      <asp:PlaceHolder ID="AnswerItemPlaceholder" runat="server" />
   </LayoutTemplate>
   <ItemTemplate>
      <site:ListRadioButton ID="rdbSelect" runat="server"
         Text='<%# Eval("Description") %>'
      />
   </ItemTemplate>
   </asp:ListView>
</ItemTemplate>
</asp:ListView> 
```

在呈现的 HTML 中，每个问题的单选按钮将具有相同的`name`，您将只能为每个问题选择一个答案，而不必在每个选择上发布整个页面。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T20:02:14.577

我想指出，这个“复制/粘贴”代码不起作用，取自[对 codeproject](http://www.codeproject.com/Articles/113506/Grouped-Radio-Buttons-in-Gridview)的评论（标题为“另一个选项”的评论）。原始代码确实有效。

这里是 ：

```
using System;
using System.Collections.Specialized;
using System.ComponentModel;
using System.Reflection;
using System.Security.Permissions;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

[AspNetHostingPermission(SecurityAction.LinkDemand, Level = AspNetHostingPermissionLevel.Minimal)]
[AspNetHostingPermission(SecurityAction.InheritanceDemand, Level = AspNetHostingPermissionLevel.Minimal)]
public class SimpleRadioButton : RadioButton
{
    private static readonly FieldInfo UniqueGroupNameField = FindUniqueGroupNameField();
    private string _uniqueGroupName;

    private static FieldInfo FindUniqueGroupNameField()
    {
        return typeof(RadioButton).GetField("_uniqueGroupName",
            BindingFlags.NonPublic | BindingFlags.Instance);
    }

    protected virtual string CreateUniqueGroupName()
    {
        string result = this.GroupName;
        if (string.IsNullOrEmpty(result))
        {
            result = this.ID;
        }
        if (string.IsNullOrEmpty(result))
        {
            result = this.UniqueID;
        }
        else
        {
            Control container = this.NamingContainer;
            if (null != container)
            {
                if (container is IDataItemContainer)
                {
                    container = container.NamingContainer ?? container;
                }

                result = container.UniqueID + base.IdSeparator + result;
            }
            else
            {
                string uniqueID = this.UniqueID;
                if (!string.IsNullOrEmpty(uniqueID))
                {
                    int index = uniqueID.LastIndexOf(base.IdSeparator);
                    if (-1 != index)
                    {
                        result = uniqueID.Substring(0, 1 + index) + result;
                    }
                }
            }
        }

        return result;
    }

    private void EnsureUniqueGroupName()
    {
        if (null == _uniqueGroupName)
        {
            string value = this.CreateUniqueGroupName();
            if (null != UniqueGroupNameField) UniqueGroupNameField.SetValue(this, value);
            _uniqueGroupName = value;

            // Make sure we have a value attribute:
            value = base.Attributes["value"];
            if (string.IsNullOrEmpty(value))
            {
                base.Attributes["value"] = this.UniqueID;
            }
        }
    }

    protected override bool LoadPostData(string postDataKey, NameValueCollection postCollection)
    {
        this.EnsureUniqueGroupName();
        return base.LoadPostData(postDataKey, postCollection);
    }

    protected override void Render(HtmlTextWriter writer)
    {
        this.EnsureUniqueGroupName();
        base.Render(writer);
    }
} 
```

# jboss - 删除前的 JMS 队列通知

> ID：13269781
> 
> 赞同：0
> 
> 时间：2012-11-07T12:26:33.330
> 
> 标签：jboss, jms, hornetq

我在 Jboss 5.1.0 环境中使用 HornetQ for jms。我有各种队列，每个队列都在 hornetq-configuration.xml 中配置了重新交付计数和延迟。如果消息无法在给定的重试计数中处理，则将它们移动到公共队列“/jms/deadqueue”中。此死队列的 mdb 将处理所有消息。在进入死队列之前，我希望在该消息中添加一个附加属性（我使用 ObjectMessage）。那可能吗？而且，是否可以在 mdb onmessage 方法中获取当前的尝试计数，也就是说，如果第二次重新传递消息，我应该得到 2？

关于 V

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:39:45.133

查看关于 HornetQ 的新书

[http://www.amazon.com/dp/1849518408/?tag=packtpubli-20](https://rads.stackoverflow.com/amzn/click/com/1849518408)

# c# - 存储有关已登录 ASP.NET MVC 用户的附加信息

> ID：13269786
> 
> 赞同：2
> 
> 时间：2012-11-07T12:26:44.467
> 
> 标签：c#, asp.net-mvc, asp.net-membership, viewdata

我需要针对将在我的 Web 应用程序上执行的每个操作中使用的用户存储一个 ID。我曾希望使用自定义授权`ActionFilterAttribute`（在整个控制器上）来填充`ViewData`这个附加信息，但事实证明，在这些东西之前运行了整个堆栈，`ActionFilterAttributes`例如模型绑定、控制器构造

我想也许有一种方法可以扩展`HttpContext.User.Identity`来存储额外的数据，但甚至不知道从哪里开始。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:11:55.450

**解决方案**
环顾 StackOverflow 的更多细节，我遇到了这个解决方案，它完全符合我的要求，并且以一种超级干净和正确的方式（提示：它使用- [https://stackoverflow.com/a/10524305/175893](https://stackoverflow.com/a/10524305/175893)`userData`的属性`FormsAuthenticationCookie`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:48:43.427

一种选择是拥有一个全局（静态）[`ConcurrentDictionary`](http://msdn.microsoft.com/en-us/library/dd287191.aspx)并在那里存储有关身份/用户的任何其他信息 - 使用方便的任何内容作为密钥......因为这个字典是线程安全的并且主要实现无锁，它提供了出色的性能。 .. 这样你就不需要弄乱任何 ASP.NET 特定的东西了......

# php - 是否可以在 PHP 中使用 TCP/IP 套接字访问本地打印机？

> ID：13269790
> 
> 赞同：6
> 
> 时间：2012-11-07T12:26:57.587
> 
> 标签：php, sockets, printing, tcp, udp

我知道 PHP 有它自己的[PECL 来执行此操作](http://php.net/manual/en/book.printer.php)，但我目前使用的是 PHP 5.4，并且`php_printer.dll`没有为此版本编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T21:53:01.170

PECL 可能有一些旧的东西，php_printer.dll 几乎已被弃用。此外，由于 PHP 是一种脚本语言，因此很难直接访问硬件功能（如打印机）。您最好在 C++ 中查找或编写打印机访问函数，并使用 system() 运行脚本；. 祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:54:25.967

通过 TCP/IP 套接字直接从 PHP 打印需要大量工作，尤其是在没有[打印机](http://www.php.net/manual/en/book.printer.php)扩展或漂亮库的 Windows 环境中。

从文档中：

> Windows 用户必须在 php.ini 中启用 php_printer.dll 才能使用这些功能。此 PECL 扩展的 DLL 当前不可用。

因此，您可以尝试从[http://downloads.php.net/pierre/](http://downloads.php.net/pierre/)`php_printer.dll`下载PHP 5.3 的预编译二进制文件并使用它。可能它也适用于 PHP 5.4。如果没有，您应该[从源代码编译 PHP](http://www.php.net/manual/en/install.windows.building.php)以使用 windows 打印机扩展。

# c++ - common_type 的可疑定义

> ID：13269792
> 
> 赞同：3
> 
> 时间：2012-11-07T12:27:08.343
> 
> 标签：c++, c++11, std, conditional-operator

在 Nicolai M. Josuttis 的《Cpp 标准库》第 2 版一书中，说 (5.4, p.125) struct common type 的定义如下：

```
template <typename T1, typename T2>
struct common_type<T1,T2> {
typedef decltype(true ? declval<T1>() : declval<T2>()) type;
}; 
```

我很难相信这是 common_type 的正确定义。原因：

```
typedef decltype(true ? declval<T1>() : declval<T2>()) type;//As far as I understand this will always pick second operand, declval<T1>(), due to the fact that there is 'true' value. Am I right? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T12:38:02.347

这都是关于条件运算符的。**它不是**if 或 switch 之类的选择语句。

ISO C++11标准5.16段：

> 否则，如果第二个和第三个操作数具有不同的类型并且具有（可能是 cv 限定的）类类型，或者如果两者都是相同值类别和相同类型（除了 cv 限定）的 glvalue，则尝试转换每个这些操作数的类型到另一个的类型。

因此，decltype 是否包含 true 条件并不重要，编译器必须选择 common 类型作为结果。

**UPD：** 5.16 包含对正确行为的进一步描述，您应该查看它以完全理解整个过程。但是对于您的特定问题：

> 使用该过程，确定是否可以转换第二操作数以匹配第三操作数，以及是否可以转换第三操作数以匹配第二操作数。如果两者都可以转换，或者一个可以转换但转换不明确，则程序格式错误。如果两者都不能转换，则操作数保持不变，并按如下所述执行进一步检查。如果恰好可以进行一次转换，则该转换将应用于所选操作数，并且在本节的其余部分中使用转换后的操作数代替原始操作数。

# php - 代理上的 PHP Soap

> ID：13269794
> 
> 赞同：0
> 
> 时间：2012-11-07T12:27:21.847
> 
> 标签：php, soap, proxy, wsdl

我已经在这里问了一个与此主题相关的问题，但没有任何帮助。现在我对 SOAP 有了更多的了解，并且可以提供更多信息，我希望你们中的某个人可能知道它为什么不起作用。

1.  我正在尝试在 PHP 中设置一个小 SoapClient 来访问外部 Web 服务。
2.  这个 SoapClient 需要在我当地的大学里运行在代理后面。
3.  extern WSDL 文件通过 IP-Check 保护。

这就是我所知道的：

```
$ExternWSDLFile = "http://search.webofknowledge.com/esti/wokmws/ws/WOKMWSAuthenticate?wsdl";
$LocalUniversityProxy = "proxy.krz.uni-heidelberg.de:8080"; 
```

在我总是尝试通过用户/密码访问 WSDL 并且我长时间没有工作之后，他们告诉我，用户/密码不是必需的，WSDL 身份验证只能通过 IP-Check 完成。所以我不必再像我以前想和尝试过的那样给 SoapClient 任何用户/密码组合。

这是我首先从注册 IP 地址的大学计算机上尝试的：

```
$wsdl = "http://search.webofknowledge.com/esti/wokmws/ws/WOKMWSAuthenticate?wsdl";    
$Client = new SoapClient($wsdl,array('trace' => 1, 'exception' => 0, 'cache_wsdl' => 0));
$Authentification = $Client->authenticate();
var_dump($Client);
var_dump($Authentification); 
```

仍然没有工作，虽然从外部私人 PC 上运行相同的代码，但至少没有给出错误消息，而是一个完全初始化的 Soap-Object。University-PC 上的此代码仅生成如下错误消息：

```
Fatal error: Uncaught SoapFault exception: [WSDL] SOAP-ERROR: Parsing WSDL: Couldn't load from 'http://search.webofknowledge.com/esti/wokmws/ws/WOKMWSAuthenticate?wsdl' : failed to load external entity "http://search.webofknowledge.com/esti/wokmws/ws/WOKMWSAuthenticate?wsdl" in E:\xampp\htdocs\test.php:17 Stack trace: #0 E:\xampp\htdocs\test.php(17): SoapClient->SoapClient('http://search.w...', Array) #1 {main} thrown in E:\xampp\htdocs\test.php on line 17 
```

所以这肯定是因为大学代理而失败的！

接下来我尝试在本地获取 WSDL 文件，因为这通常是我从 Google 那里得到的提示。

```
$auth = base64_encode('KHD\user:pass');
$header = array("Authorization: Basic $auth");
$Proxy = 'proxy.krz.uni-heidelberg.de:8080';
$Context = stream_context_create(array('http' => array('proxy' => $Proxy,'request_fulluri' => True,'header' => $header,),));

$wsdl = file_get_contents("http://search.webofknowledge.com/esti/wokmws/ws/WOKMWSAuthenticate?wsdl",false,$Context); 
```

在 $wsdl 上使用 print_r() 给了我正确的本地缓存 WSDL 文件。但是现在使用该 $wsdl 设置 SoapClient 它再次因消息而中断：

```
Fatal error: Uncaught SoapFault exception: [WSDL] SOAP-ERROR: Parsing WSDL: Couldn't load from '<?xml version='1.0' encoding='UTF-8'?><wsdl:definitions name="WOKMWSAuthenticateService" targetNamespace="http://auth.cxf.wokmws.thomsonreuters.com" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://auth.cxf.wokmws.thomsonreuters.com" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema"> <wsdl:types> <xs:schema attributeFormDefault="unqualified" elementFormDefault="unqualified" targetNamespace="http://auth.cxf.wokmws.thomsonreuters.com" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://auth.cxf.wokmws.thomsonreuters.com" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsd="http://www.w3.org/2001/XMLSchema"> <xs:element name="authenticate" type="tns:authenticate" /> <xs:element name="authenticateResponse" type="tns:authenticateResponse" /> <xs:element name="closeSession" type="tns:closeSession" /> <xs:ele in E:\xampp\htdocs\test.php on line 12 
```

我完全不知道为什么这不起作用。我完全遵循手册并尝试了很多东西。代理不断破坏我的工作，并且在私人/外部 PC 上，此脚本不可用，因为 IP 不匹配。

我能做些什么来最终让这个运行？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T17:02:34.910

旧但认为我在这里分享给别人。我也遇到了这个问题。似乎有一个应该在 PHP 5.0 中修复的错误？其中 WSDL 文件将尝试在没有代理的情况下进行解析，但肥皂调用确实通过代理。见这里：[https](https://bugs.php.net/bug.php?id=29211) ://bugs.php.net/bug.php?id=29211 - 我觉得这很烦人。

# forms - inputmode 属性是否有效（以 HTML5 形式）？

> ID：13269799
> 
> 赞同：15
> 
> 时间：2012-11-07T12:27:38.757
> 
> 标签：forms, html, validation

我收到文本区域和文本字段上的 inputmode 属性的验证错误。验证器告诉我*此时元素输入上不允许使用属性输入模式，*但[HTML5 规范表明它是允许的](http://www.whatwg.org/specs/web-apps/current-work/#input-modalities:-the-inputmode-attribute)。

这段代码实际上有什么问题，还是验证器有问题？

这是一个简单的案例，它会产生这种验证错误（两次），一种是电子邮件输入，另一种是文本区域。

```
<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
  </head>
  <body>
    <form method="post" action="contactme.php">         
      <label class='pas block'>
        Your E-Mail:<br/>
        <input type='email' name='email' required inputmode='latin' placeholder='your e-mail here' />
      </label>
        <label class='pas block'>
                Your Message:<br/>
                <textarea name='message' required inputmode='latin' placeholder='and your message here!'></textarea>
        </label>
    </form>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-09T19:55:04.280

此外，请参阅图表，了解哪些属性适用于不同的输入类型：http: [//www.whatwg.org/specs/web-apps/current-work/multipage/the-input-element.html#attr-input-类型](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-input-element.html#attr-input-type)

“inputmode”属性仅适用于“text”和“search”。

更新 2019-09-04：“inputmode”现在是一个全局属性（根据 WHATWG），可以在任何 HTML 元素上指定：[https ://html.spec.whatwg.org/multipage/dom.html#global-attributes](https://html.spec.whatwg.org/multipage/dom.html#global-attributes)

“输入模式”的另一个参考页面： [https ://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/inputmode](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/inputmode)

另一方面，“inputmode”不是 W3C HTML5 属性，而是 W3C HTML 5.1 属性（至少在我写这篇文章的时候）。2019-09-04 更新：“inputmode”已从 HTML 5.2 和 HTML 5.3 中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:18:22.037

HTML5 规范说

> 以下内容属性不得指定且不适用于元素：accept、alt、checked、dirname、formaction、formenctype、formmethod、formnovalidate、formtarget、height、**inputmode**、max、min、src、step 和 width。

它在[https://html.spec.whatwg.org/multipage/input.html#e-mail-state-(type=email)的簿记详细信息中](https://html.spec.whatwg.org/multipage/input.html#e-mail-state-(type=email))

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-24T22:24:04.693

提出问题五年后，有些人可能想知道为什么@dsas 列出的某些属性不会触发此类错误，例如`enctype` 答案是简单的支持，而`enctype`例如 `inputmethod`仅从 IE11 和 Edge 14 开始支持获得广泛的支持, 更多信息请点击[这里](http://caniuse.com/#search=inputmethod)

# c# - 自动拆箱

> ID：13269809
> 
> 赞同：0
> 
> 时间：2012-11-07T12:28:37.080
> 
> 标签：c#, casting, type-conversion, unboxing

我有一个对象数组（`object[]`）。此数组中的所有项都具有相同的类型（编译时未知）。我需要将此数组转换为类型化数组，也就是说，如果项目是整数，我想得到一个`int[]`.

我已经研究了该`Array.ConvertAll`方法，但我需要在模板中指定一个特定类型，这意味着我必须获取元素类型，然后`ConvertAll`为每种可能的情况调用。

我还研究了`dynamic`没有更多运气的关键字（看起来`dynamic[]`与 相同`object[]`）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T12:32:46.310

听起来你想要这样的东西：

```
dynamic array = Array.CreateInstance(input[0].GetType(), input.Length);
for (int i = 0; i < input.Length; i++)
{
    array[i] = (dynamic) input[i];
} 
```

这里`dynamic`只是为您处理转换部分。

或者：

```
public static Array ConvertArray(object[] input)
{
    dynamic sample = input[0]; // Just used for type inference
    return ConvertArrayImpl(sample, input);
}

private static T[] ConvertArrayImpl<T>(T sample, object[] input)
{
    return input.Cast<T>().ToArray();
} 
```

当然，您可以`ConvertArrayImpl`手动使用反射进行调用，而不是使用动态类型。

另请注意，如果输入数组为空，所有这些都将失败...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T12:38:41.503

与 Jon 的解决方案类似，您可以在没有动态的情况下使用 Array 类型：

```
public Array Convert(Array a) {
  if (a.GetLength(0) == 0){
    return new int[0];
  }
  var type = a.GetValue(0).GetType();
  var result = Array.CreateInstance(type, a.GetLength(0));
  for (int i = 0; i < a.GetLength(0); i++) {
    result.SetValue(a.GetValue(i), i);
  }
  return result;
} 
```

# mouseover - 如何在 Gnuplot 散点图中鼠标悬停/悬停时显示第三个数据列的标签？

> ID：13269811
> 
> 赞同：6
> 
> 时间：2012-11-07T12:28:40.697
> 
> 标签：mouseover, gnuplot

我有一个 gnuplot 数据文件：

```
Requested_width,Requested_depth,Requested_word,Name,N,M,Cycle_time,Clk2Q,Area,Total_Area
24,512,24,R1F512X24M8P24,1,1,1.9820,,7446.102,7446
24,512,24,R1F512X24M4P24,1,1,1.9937,,6757.0596,6757
.... 
```

我想分散绘图第 7 列和第 9 列（我可以这样做！），然后我希望当我将鼠标悬停在数据点上时出现第 4 列中的名称。我认为所有标签都出现在任何时候都太混乱了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T13:33:30.450

这在 gnuplot4.7（当前开发分支）中是完全可能的，但在以前的版本中是不可能的——当从交互式提示输入时，以下工作正常：

```
set term wxt
set termoption enhanced
set datafile sep ','
plot 'test.dat' u 7:9:4 w labels hypertext point pt 7 
```

如果将其放在脚本中，则需要将 gnuplot 调用为`gnuplot -persist script.gp`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-02T01:49:44.693

只需使用超文本并指定正确的终端，就可以使超文本工作。

1）您需要使用GNUPlot 手册[链接](http://gnuplot.sourceforge.net/gnuplot_cvs.pdf)，第 122 页中描述的**超文本：**

```
set label at 0,0 "Plot origin" hypertext point pt 1
plot 'data' using 1:2:0 with labels hypertext point pt 7 \
title 'mouse over point to see its order in data set' 
```

2) 目前支持超文本的术语有3个：canvas(HTML5)、svg、wxt。我们以canvas为例，在手册的第182页，有一个例子告诉你如何使用canvas：

```
set term canvas name 'fishplot'
set output 'fishplot.js' 
```

还有一个最小的 HTML 文件：

```
<html>
<head>
  <script src="canvastext.js"></script>
  <script src="gnuplot_common.js"></script>
</head>
<body onload="fishplot();">
  <script src="fishplot.js"></script>
  <canvas id="fishplot" width=600 height=400>
    <div id="err_msg">No support for HTML 5 canvas element</div>
  </canvas>
</body>
</html> 
```

# .net - 当没有公共字段时，使用 SWQL（SolarWinds 查询语言）连接超过 2 个表？

> ID：13269816
> 
> 赞同：1
> 
> 时间：2012-11-07T12:29:15.027
> 
> 标签：.net, vb.net, solarwinds-orion

我正在使用 SolarWinds Orion NPM（网络性能监控）监控我的节点。我正在使用 Orion SDK 将警报信息从 SWIS（SolarWinds 信息服务）获取到 vb.net 控制台应用程序中。

我正在使用一些 vb.net 代码：

```
Function GetOneAlert(ByVal swis As InformationServiceClient) As AlertInfo
    Dim query As String, result As XElement
    query = "SELECT TOP 1 A.AlertDefID, A.ActiveObject, A.ObjectType FROM Orion.AlertStatus A WHERE A.Acknowledged=0 ORDER BY A.TriggerTimeStamp DESC"
    result = swis.QueryXml(query) 
```

问题是，我想`alertinforamtion`从三个名为`Orion.AlertDefinitions`,`Orion.AlertStatus`和(SolarWinds Information Service) 的表`Orion.Nodes`中获取`swis`，我需要加入这 3 个表，但我可以使用如下所示的 (SolarWinds 查询语言) 查询加入其中的 2 个 ( `Orion.AlertDefinitions`, `Orion.AlertStatus`)`swql`

```
query = "SELECT AlertStatus.AlertDefID, AlertDefinitions.AlertDefID, AlertDefinitions.Name, AlertStatus.State, AlertStatus.ObjectName, 
AlertStatus.TriggerTimeStamp, AlertDefinitions.Description FROM Orion.AlertStatus INNER JOIN Orion.AlertDefinitions
ON AlertStatus.AlertDefID=AlertDefinitions.AlertDefID WHERE AlertStatus.Acknowledged=0" 
```

我知道警报详细信息，但我不知道警报属于哪个节点。为此，我需要将“orion.node”表与其余表连接起来。但是第三个表 ( `Orion.Nodes`) 在其他两个表中的任何一个中都没有要加入的公共字段。我需要从表中获取三个名为`DNS`,`IPAddress`的字段值。`NodeDescription``Orion.Nodes`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:00:09.500

如果您对与节点相关的警报感兴趣并且想要加入节点详细信息，那么您应该只选择警报`AlertStatus.ObjectType='Node'`和加入使用`AlertStatus.ActiveObject`哪个是`NodeID`关联的节点。所以查询（提到节点属性）看起来像：

```
SELECT AlertStatus.AlertDefID, AlertDefinitions.AlertDefID, AlertDefinitions.Name, AlertStatus.State, AlertStatus.ObjectName, AlertStatus.TriggerTimeStamp, AlertDefinitions.Description, Nodes.IPAddress, Nodes.Dns, Nodes.NodeDescription
FROM Orion.AlertStatus
INNER JOIN Orion.AlertDefinitions
  ON AlertStatus.AlertDefID=AlertDefinitions.AlertDefID
INNER JOIN Orion.Nodes
  ON AlertStatus.ActiveObject=Nodes.NodeID
WHERE AlertStatus.Acknowledged=0 AND AlertStatus.ObjectType='Node' 
```

无论如何，有关 Orion SDK 和 SWIS 的更多具体问题和答案，您可能需要查看[Orion SDK Thwack 论坛](http://thwack.solarwinds.com/community/labs_tht/orion-sdk)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-31T12:40:02.607

SWQL 中的表之间也有自动关联，例如下面的 SWQL 不使用`JOINs`但从多个表调用：

```
SELECT E0.[Node].Caption, E0.AssignmentName, E0.CustomPollerName, 
       E0.DetailsUrl, E0.DisplayName, E0.NodeID, E0.Status, E0.StatusDescription, 
       E0.StatusIconHint, E0.StatusLED, E0.UnManaged, E0.UnManageFrom, E0.UnManageUntil, E0.Uri, 
       E0.[Node].Description, E0.[CustomPoller].[OID] = '1.3.6.1.2.1.1.3',
       E0.[CustomPollerStatusScalar].[Status]
 FROM  Orion.NPM.CustomPollerAssignmentOnNode AS E0
 WHERE E0.[Node].[SysObjectID] IS NOT NULL
   AND E0.StatusDescription NOT LIKE 'Unmanaged' 
```

[该站点提供了更多详细信息和示例。](https://support.solarwinds.com/Success_Center/Network_Performance_Monitor_(NPM)/How_to_use_SolarWinds_Query_Language_(SWQL))

# iphone - 如何将 2 个注释与 MKMapView 内的彩色线连接起来？

> ID：13269820
> 
> 赞同：0
> 
> 时间：2012-11-07T12:29:24.137
> 
> 标签：iphone, objective-c, ios, mkmapview, mkannotation

如何用彩色线连接 Mkmapview 内的 2 个注释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:35:38.450

谷歌方向api可用于那个..传递起点和目的地位置

```
//http://maps.googleapis.com/maps/api/directions/jsonorigin=origin_place&destination=destination_place&waypoints=Charlestown,MA|Lexington,MA&sensor=false 
```

它将给出您解析和拉取坐标的 JSON 响应。划一条线

```
self.routeLine = [MKPolyline polylineWithPoints:arrPoints count:routeArray.count]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:03:20.477

这里创建创建对象 routeView 作为`UIImageView`类和 lineColor 作为`UIColor`.h 文件中的类，如下所示

```
UIImageView* routeView;  
UIColor* lineColor; 
```

在`viewDidLoad:`方法中编写此代码后..

```
routeView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, mapView.frame.size.width, mapView.frame.size.height)];
routeView.userInteractionEnabled = NO;
lineColor = [UIColor magentaColor];
[mapView addSubview:routeView]; 
```

然后在你想画线时更新..也是`routes`我们`NSMutableArray`存储`CLLocation`的地方（经纬度）

```
-(void) updateRouteView 
{
    CGContextRef context =  CGBitmapContextCreate(nil, 
                                                  routeView.frame.size.width, 
                                                  routeView.frame.size.height, 
                                                  8, 
                                                  4 * routeView.frame.size.width,
                                                  CGColorSpaceCreateDeviceRGB(),
                                                  kCGImageAlphaPremultipliedLast);

    CGContextSetStrokeColorWithColor(context, lineColor.CGColor);
    CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1.0);
    CGContextSetLineWidth(context, 3.0);

    for(int i = 0; i < routes.count; i++) 
    {
        CLLocation* location1 = [routes objectAtIndex:i];
        CGPoint point = [mapView convertCoordinate:location1.coordinate toPointToView:routeView];
        if(i == 0) 
        {
            CGContextMoveToPoint(context, point.x, routeView.frame.size.height - point.y);
        }
        else 
        {
            CGContextAddLineToPoint(context, point.x, routeView.frame.size.height - point.y);
        }
    }

    CGContextStrokePath(context);

    CGImageRef image = CGBitmapContextCreateImage(context);
    UIImage* img = [UIImage imageWithCGImage:image];

    routeView.image = img;
    CGContextRelease(context);

} 
```

另请参阅此链接[iphone-how-to-draw-line-between-two-points-on-mapkit](https://stackoverflow.com/questions/10598322/iphone-how-to-draw-line-between-two-points-on-mapkit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:15:04.377

这对我来说看起来很复杂。我在网上找到了另一个解决方案。我首先必须将叠加层添加到我的 mapView

```
CLLocationCoordinate2D coordinateArray[2];
coordinateArray[0] = start_location;
coordinateArray[1] = end_location;
self.routeLine = [MKPolyline polylineWithCoordinates:coordinateArray count:2];
/***********************************************/

[_mapView addOverlay:self.routeLine]; 
```

然后我将我的视图控制器设置为 mkmapviewdelegate 并实现委托方法：

```
-(MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id<MKOverlay>)overlay{
if(overlay == self.routeLine)
{
    if(nil == self.routeLineView)
    {
        self.routeLineView = [[MKPolylineView alloc] initWithPolyline:self.routeLine];
        self.routeLineView.fillColor = [UIColor redColor];
        self.routeLineView.strokeColor = [UIColor redColor];
        self.routeLineView.lineWidth = 5;
    }
    return self.routeLineView;
}
return nil;} 
```

但它仍然没有出现，我做错了什么？

# tridion - 需要帮助使用模板构建块创建组件模板

> ID：13269821
> 
> 赞同：1
> 
> 时间：2012-11-07T12:29:27.203
> 
> 标签：tridion, tridion-2011

我需要以下情况的帮助：

我有页面模板 PT1 ，其中包含 2 个 TBB，我有组件模板 CT1 ，其中包含 1 个 TBB。

我使用页面模板（PT1）创建了一个页面并添加了一个组件并选择了组件模板（CT1）。

将一些文本值推送到包的 TBB 和所有三个 TBB 都是单个 dotnet 程序集的一部分，并在三个不同的类中实现，即实现“Itemplate”接口和实现“transform”方法。

**问题：**

在发布的文件中，我可以看到页面模板 PT1 中使用的 TBB 推送的内容，但看不到组件模板 CT1 的 TBB 推送的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:56:19.273

通常，要从模板输出，您需要创建 DWT TBB，除非您直接从 C# TBB 发送输出。

在您的情况下，看起来您拥有所有 C# TBB，并且它们是否将任何内容输出到包中。如果不是，那么我什至怀疑您的 PT 会输出任何 html。

您可以使用模板生成器工具来调试您的模板，因为在我的评论中，文档门户链接将为您提供指导。

# jquery - 使用 Jquery 从 DOM 中删除元素

> ID：13269825
> 
> 赞同：0
> 
> 时间：2012-11-07T12:29:48.090
> 
> 标签：jquery, html

这是我的html

```
<div class=" jcarousel-skin-tango">
            <div id="mycarousel" class="jcarousel-container jcarousel-container-horizontal" style="position: relative;
                display: block;">
                <input type="hidden" id="code" name="code" value="0">
                <div class="new4">
                    <div class="jcarousel-clip jcarousel-clip-horizontal" style="position: relative;">
                        <ul style="height: 180px !important; overflow: hidden; position: relative; top: 0px;
                            margin: 0px; padding: 0px; left: 0px; width: 425px;" class="jcarousel-list jcarousel-list-horizontal">
                            **<li class="jcarousel-item jcarousel-item-horizontal jcarousel-item-undefined jcarousel-item-undefined-horizontal jcarousel-item-placeholder jcarousel-item-placeholder-horizontal"
                                style="float: left; list-style: none;"></li>
                            **<li class="jcarousel-item jcarousel-item-horizontal jcarousel-item-NaN jcarousel-item-NaN-horizontal jcarousel-item-placeholder jcarousel-item-placeholder-horizontal"
                                style="float: left; list-style: none;" jcarouselindex="NaN"></li>**
                            <li style="padding-right: 70px; float: left; list-style: none;" class="jcarousel-item jcarousel-item-horizontal jcarousel-item-1 jcarousel-item-1-horizontal"
                                jcarouselindex="1">
                                <div class="new1">
                                    <form name="1">
                                    <input type="hidden" id="0" name="0" value="prodDisplay.php?prodCode=113150">
                                    <div align="center" class="container">
                                        <div id="div01" class="div01">
                                            <a onclick="addToCart('113150','');" title="Add To Cart">
                                                <img src="http://sampanstore.com/images/plus.jpg">
                                            </a>
                                        </div>
                                        <a onclick="addToCart('113150','');" title="Add To Cart">
                                            <img src="http://sampanstore.com/Sood/product_images/small113150.jpg" width="80"
                                                height="90">
                                            <br>
                                        </a>
                                        <div class="box4">
                                            <a title="Quick View" href="javascript:void(0);" class="modal" id="blue" onclick="change_event(0);">
                                                FERRERO ROC... </a>
                                        </div>
                                        <br>
                                        <br style="clear: both; height: 3px;">
                                        <div class="box4">
                                            <div style="float: left; width: 55px; padding-top: 5px;">
                                                <span class="WebRupee" style="font-size: 11pt; text-align: left; margin-left: 10px;">
                                                    Rs. </span><strike style="font-size: 11pt; text-align: left;">545</strike>
                                            </div>
                                            <div class="top-left-corner top-right-corner  box" style="float: right;">
                                                <span class="WebRupee">Rs.</span>539.81</div>
                                        </div>
                                    </div>
                                    </form>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div> 
```

我必须删除`**`使用 jquery 标记的节点。我试过 $(jcarouselindex="NaN").remove(); 但没有用。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T12:32:29.907

获取第三`li`项，取其所有的前辈并删除它们：

```
$('li.jcarousel-item:eq(2)').prevAll().remove() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:33:51.200

试试这个

```
$([jcarouselindex="NaN"]).remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T12:32:59.877

好吧，你也许可以试试这个：

```
$('.jcarousel-item:empty').remove(); 
```

# javascript - SlickGrid 过滤器返回奇怪的结果

> ID：13269827
> 
> 赞同：0
> 
> 时间：2012-11-07T12:30:02.660
> 
> 标签：javascript, jquery, slickgrid

要求通过按钮单击而不是默认的自动完成来进行 SlickGrid 过滤，所以我修改了 updateFilter() 方法（'#display' 是按钮 ID）：

```
$('#display').click(function() {
    updateFilter();
});

     function updateFilter() {
        theString = $('#txtSearch').val();
        while(theString.substring(0,1)==" ")
             theString = theString.substring(1, theString.length);
        searchString = new String(theString);
            dataView.setFilterArgs({
                searchString:searchString,
            });
            dataView.refresh();
      } 
```

很简单...我只是在单击按钮时获取文本框中的值，然后确保它是一个字符串并将其传递给“searchString”进行处理。您会注意到，我还必须修剪前导空格，否则过滤器将始终无法第一次通过。例如，Firebug 跟踪将显示“57”，而不是实际的“57”。这将导致返回清除网格（我假设因为它无法匹配前导空格）。要求还需要一个“清除过滤器”链接来重置过滤器（包括“#txtSearch”文本框）。过滤器在清除后将始终工作，并且跟踪显示没有前导空格。theString 和 searchString 都在脚本 (="") 的顶部进行了初始化。我的问题是，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:40:53.410

没关系……自己造成的伤口。原来我用 value=" " 初始化了文本框。对不起！

# ruby-on-rails - 使用私钥和公钥的 API 身份验证

> ID：13269829
> 
> 赞同：5
> 
> 时间：2012-11-07T12:30:08.293
> 
> 标签：ruby-on-rails, api, authentication, oauth, ssh

我想以与 SSH 类似的方式使用 Web API 在 CLI 中授权用户（在服务器上上传公钥，然后使用私钥进行授权）。是否可以？

我不是要生成公钥/私钥par，而是重用现有的id_rsa和id_rsa.pub。

你知道任何使它更容易的软件包（最好是 Ruby on Rails gems？）

@编辑：

具体来说，我想登录网站，上传我的公钥并将其与在线帐户连接，然后能够通过 CLI 界面使用网站的 API（身份验证）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:14:34.787

您可以使用 openssl 库。至于您想要的更完整的解决方案，我认为它不可用。不过，用库来实现不应该做太多的工作。

[http://ruby-doc.org/stdlib-1.9.2/libdoc/openssl/rdoc/OpenSSL/PKey/RSA.html](http://ruby-doc.org/stdlib-1.9.2/libdoc/openssl/rdoc/OpenSSL/PKey/RSA.html)

基本上做类似的事情：

```
# private_key_str can be in PEM or DER format
OpenSSL::PKey::RSA.new(private_key_str, 'passphrase').public_key 
```

并将其与公钥进行比较。您可以使用 #to_pem 或 #to_der 获取密钥的字符串表示形式，具体取决于您使用的格式（稍微尝试一下）。您也可以使用 rsa 库。

我认为你可以使用

```
ssh-keygen -e -f id_rsa.pub > pemkey.pub 
```

从 ssh-keygen 的默认格式转换为 PEM。如有必要，您可以在服务器上运行此命令进行转换 - 您必须尝试查看是否正确匹配格式，因为我不确定 OpenSSL::PKey::RSA 是否接受 ssh 的默认格式-keygen。您还可以使 ssh-keygen 从 STDIN 读取并写入 STDOUT，这样您就不需要使用文件来进行转换。

# mysql - 如何在数据库中添加值

> ID：13269830
> 
> 赞同：0
> 
> 时间：2012-11-07T12:30:12.363
> 
> 标签：mysql, asp.net-mvc, visual-studio

在我的表中，我有 5 个字段，在这些字段中，那些是

```
1.questionId
2.questionUserId
3.SurveyId
4.answer
5.answerId 
```

在保存记录时，我将“答案”字段和“调查”字段作为参数传递给我的操作方法。我的答案参数是以字符串的形式分隔我的半列。我正在使用“半列”拆分这个参数，并通过执行 for 循环，我试图将值保存到数据库中。

我必须保存的是，为了添加新记录，在 for 循环中，所有记录值都是相同的，除了自动递增的“answer”和“answerId”。当我保存时，第一次执行新记录正在保存，但对于下一次迭代，它正在抛出`DuplicateKeyUnhandledByUserCode`和`Instance of 'DataModel.question_answer' with identity '1850137295-2-1-2-11' already exists in the cache of the object scope.`

# jquery - 使用 textarea 调整大小功能而不破坏布局

> ID：13269833
> 
> 赞同：0
> 
> 时间：2012-11-07T12:30:28.103
> 
> 标签：jquery, css

我有一个表格（是的，我知道，但我无法控制是否使用表格），每个单元格都包含一个 div，每个 div 中都有一个表单元素。使用 CSS 将表格宽度设置为 100% 宽度。表格单元格中的所有 div 都有 5px 的边距以留出一些空间。所有表单元素（输入、选择、文本区域）也设置为 100% 宽度，以便使用整个屏幕（根本不是我的想法！）。

我需要做的是在表格单元格中悬停div时通过绝对定位从文档流中删除textarea（以恢复其调整大小功能而不会弄乱布局），给它一个更高的z-index，然后在mouseleave返回它恢复到原来的状态。

我目前拥有的是：

```
$(document).ready(function() {
$('table tr td div div.textareaHolder').mouseenter(function() {
    $(this).css({
        position : 'absolute',
        zIndex : '100'
        });
});
    $('table tr td div div.textareaHolder').mouseleave(function() {
    $(this).css({
        position : 'static',
        width : '100%',
        height : '100%',
        zIndex : ''
        });
});
}); 
```

还将 textarea 返回到其原始大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:44:57.643

你可以试试这个类而不是js

```
 .txtholder
    {
     position:static;
     width:100%;
     height:100%;
    }

   .txtholder:hover
     {
      position:absolute;
      z-index:100;
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:53:10.107

我希望我正确理解了这个问题；您想`textarea`在悬停时“扩展”并回退到原始状态？

做了一个**[小提琴](http://jsfiddle.net/NeErF/11/)**，希望有帮助

编辑：

好的，在 Firefox 中，**[这个更新的小提琴](http://jsfiddle.net/NeErF/27/)**可以正常工作，但是在 Chrome 中，文本区域会被占用，因为当你调整它的大小时，你的鼠标光标会在边界周围稍微改变它的位置，多次触发悬停状态。

您可以完全禁用用户调整大小`textarea { resize: none; }`，或仅针对 Chrome

```
@media screen and (-webkit-min-device-pixel-ratio:0) {
   textarea { resize: none; }
} 
```

（或通过[Modernizr](http://modernizr.com/)）并为 Firefox 保留调整大小。

# facebook - 如何以安全的方式存储用户帐户详细信息（在自定义嵌入式系统上）

> ID：13269834
> 
> 赞同：1
> 
> 时间：2012-11-07T12:30:29.663
> 
> 标签：facebook, authentication, embedded

我们目前正在为一个定制的嵌入式系统计划一个 facebook 客户端，用户输入他/她的帐户详细信息非常耗时（因为可用的控件/按钮很少且没有触摸屏）。

理想情况下，用户只需要输入一次详细信息，然后它们就会被存储并从那里检索，直到用户删除它们（或更改密码）。我已经阅读了一些关于 OAuth 和访问令牌的内容，但据我所知，实现“配置一次”功能的唯一方法是实际存储用户名和密码组合，因为访问令牌将过期（离线令牌今年已弃用）。我对么？

出于安全考虑，我们宁愿不将用户详细信息本地存储在我们的设备中，但似乎我们别无选择？

此致，

英格玛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:43:35.377

通常你不需要存储任何东西，因为 facebook 处理一切。只有当您必须存储用户特定的附加数据（或设置）时，您通常只存储 Facebook ID。

# c++ - 线程和系统信号

> ID：13269838
> 
> 赞同：0
> 
> 时间：2012-11-07T12:30:57.483
> 
> 标签：c++, c, signals, posix

我正在编写一个需要拦截系统信号（例如 SIGINT）的多线程程序。我想知道是否有一种标准化的方式来“捕捉”这些信号，例如：

*   发送了一个信号，任何线程都可以接收它还是只有 main() 一个？
*   是否有指定如何处理此问题的 Posix 规则或编程习惯用法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T12:37:22.533

保证只有一个线程接收信号，但也不确定是*哪个*线程。

正确的做法是阻塞除一个以外的所有线程上的信号，以便该线程单独处理信号处理；或者在 Linux 上特别阻塞线程并设置一个 signalfd 来捕获信号——这样，你不会引入任何异步，信号只是一个要读取的文件描述符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:42:51.263

既然你问过 POSIX，来自 man [signal(7)](http://unixhelp.ed.ac.uk/CGI/man-cgi?signal%207)

> POSIX.1 区分了指向整个进程的信号和指向单个线程的信号的概念。 **根据 POSIX.1，进程导向的信号（例如，使用 kill(2) 发送）应该由进程中的一个任意选择的线程处理**。

所以简而言之，这意味着将选择一个随机线程来处理信号。

# c# - 通过使用 c# 在 asp.net 中单击 gridview 单元格来检索数据

> ID：13269839
> 
> 赞同：0
> 
> 时间：2012-11-07T12:31:02.050
> 
> 标签：c#, asp.net, datagrid, grid

我有一个网格视图

```
<asp:GridView ID="wbsdataGV1" runat="server" Width="790px" AutoGenerateColumns="False"
    OnSelectedIndexChanged="wbsdataGV1_SelectionChanged" DataKeyNames="WBSCode">
    <Columns>

    <asp:TemplateField HeaderText="WBS Code">
         <ItemTemplate>
              <asp:LinkButton ID="LinkButton1" runat="server" Text='<%# Eval("WBSCode") %>'></asp:LinkButton>
         </ItemTemplate>
         <ControlStyle Width="100px" />
         <ItemStyle BorderStyle="Solid" BorderWidth="1px" />
         </asp:TemplateField>
    <asp:TemplateField HeaderText="Description">
    <ItemTemplate>
         <asp:TextBox ID="TextBox40" runat="server" Text='<%# Eval("Description") %>' ReadOnly="true"
                                                    Width="300px">
          </asp:TextBox>
      </ItemTemplate>
      <ControlStyle Width="300px" />
      <ItemStyle BorderStyle="Solid" BorderWidth="1px" />
   </asp:TemplateField>
   <asp:TemplateField HeaderText="Territory Code">
       <ItemTemplate>
          <asp:Label ID="Label45" runat="server" Text='<%# Eval("TerritoryCode") %>'></asp:Label>
       </ItemTemplate>
       <ControlStyle Width="100px" />
       <ItemStyle BorderStyle="Solid" BorderWidth="1px" />
   </asp:TemplateField>
   <asp:TemplateField HeaderText="Amount">
      <ItemTemplate>
           <asp:Label ID="Label46" runat="server" Text='<%# Eval("AmountReleased") %>'></asp:Label>
      </ItemTemplate>
      <ControlStyle Width="100px" />
      <ItemStyle BorderStyle="Solid" BorderWidth="1px" />
   </asp:TemplateField>
   </Columns>
   <HeaderStyle BackColor="Wheat" BorderStyle="Solid" BorderWidth="1px" />
   <RowStyle BorderStyle="Solid" BorderWidth="1px" HorizontalAlign="Center" 
</asp:GridView> 
```

现在在链接按钮中，我想单击它并在同一页面中检索该行的数据并显示它...

我在用

```
protected void wbsdataGV1_SelectionChanged(object sender, EventArgs e)
{
    string rowID = (string)this.wbsdataGV1.SelectedDataKey.Value;
    con.Open();
    SqlCommand cmd = new SqlCommand(" select WBSCode,Description,TerritoryCode,AmountReleased from WBS where WBSCode='"+rowID+"'");
    cmd.Connection = con;
    SqlDataAdapter da = new SqlDataAdapter(cmd);
    DataTable dt = new DataTable();
    da.Fill(dt);
    if (dt.Rows.Count > 0)
    {
        wbssearchdata1.DataSource = dt;
        wbssearchdata1.DataBind();
    }

    con.Close();
} 
```

这段代码，但它没有在点击时触发..所以我该如何解决这个..有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:51:44.623

从您的代码中，我看不到您指定触发 SelectedIndexChanged 事件的按钮的任何位置。你需要做这些

```
<asp:GridView OnSelectedIndexChanged="wbsdataGV1_SelectionChanged"  
              AutoGenerateSelectButton="true" /> 
```

或者

```
<asp:GridView OnSelectedIndexChanged="wbsdataGV1_SelectionChanged">
<Columns>
   <asp:CommandField ShowSelectButton="true" />
</Columns>
</asp:GridView> 
```

或者

```
 <asp:GridView OnSelectedIndexChanged="wbsdataGV1_SelectionChanged">
   <Columns>
    <asp:TemplateField>
    <ItemTemplate>
        <asp:LinkButton runat="server" ID="Selecting" CommandName="Select" Text="Select Row"></asp:LinkButton>
    </ItemTemplate>
    </asp:TemplateField>
   </Columns>
   </asp:GridView> 
```

# cross-browser - 向用户显示警报的通用跨平台方式（移动）

> ID：13269842
> 
> 赞同：6
> 
> 时间：2012-11-07T12:31:09.957
> 
> 标签：cross-browser, notifications, push-notification, alert, vibration

我有一项任务是创建一个客户端应用程序，该应用程序可以向用户显示通知，通知被注意到的可能性很高。

该应用程序应在 Android (2.0+)/iOS/WP 上运行。

这是用例：

1.  用户启动应用程序并执行一些操作。然后他切换到主屏幕/另一个应用程序。
2.  对 Action 的响应使应用程序发出通知。用户会注意到该通知，而不管他目前在他的移动设备上使用什么其他应用程序（或主屏幕）。

应用程序不需要是原生应用程序或基于 Web 浏览器的移动应用程序。通知可能是设备上的声音或振动，但我知道从浏览器中访问振动仍然很棘手。

以下是我迄今为止制作通用声音/振动通知机制的研究成果：

*   似乎使移动设备从浏览器振动[仅适用](https://stackoverflow.com/questions/9266285/get-vibrate-to-work-in-browser-without-phonegap)于移动[Firefox](http://www.smartjava.org/content/html5-remotely-vibrate-phone-morse-code-using-web-sockets-and-vibrate-api)（没有 iOS，没有 WP）；
*   对`audio`html5 标签的支持[仍处于](https://stackoverflow.com/questions/3069124/playing-html5-audio-in-android-browser)试验阶段，它不适用于每个浏览器/设备；
*   [此示例](https://stackoverflow.com/questions/187098/cross-platform-cross-browser-way-to-play-sound-from-javascript)中的声音警报仅在移动 Firefox 中有效（要求插件播放 mp3 声音），Android 浏览器只是保持沉默。

所以，问题是：

有没有办法强制移动设备（Android 2.0+/iOS/WP）的用户查看来自移动应用程序的通知？做到这一点的唯一方法是为每个移动平台编写本机应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T08:57:43.000

我会针对该特定问题提出[PhoneGap 。](http://phonegap.com/)

除其他外，它还[具有](http://phonegap.com/about/feature)跨平台警报、声音和振动器通知。

Windows Phone 7 唯一的怪癖是 Cordova 库包含一个使用的通用哔声文件。您应该查阅[通知](http://docs.phonegap.com/en/2.2.0/cordova_notification_notification.md.html#Notification)参考页面以确定它是否可以帮助您。

# php - Rest-ClickBank 沙箱发布 api 不起作用

> ID：13269844
> 
> 赞同：1
> 
> 时间：2012-11-07T12:31:11.467
> 
> 标签：php, rest, curl, clickbank

我正在尝试使用 clickBank 的 Sandbox Api，它接受发布请求。但不知何故，它不起作用。

我正在使用 POST 方法调用 clickBank 的 Prepare Api (https://sandbox.clickbank.com/rest/1.2/sandbox/prepare)。

但它给了我这个错误 HTTP/1.1 405 Method Not Allowed 日期：星期三，2012 年 11 月 7 日 12:08:32 GMT 服务器：Apache/2.2.22 (FreeBSD) mod_jk/1.2.32 mod_ssl/2.2.22 OpenSSL/0.9。 8q 允许：POST，OPTIONS 内容长度：1034 内容类型：text/html;charset=utf-8 1

这是我的代码。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,"https://sandbox.clickbank.com/rest/1.2/sandbox/prepare");
curl_setopt($ch, CURLOPT_HEADER, true); 
curl_setopt($ch, CURLOPT_POST, true); 
curl_setopt($ch, CURLOPT_NOBODY, true);
//curl_setopt($ch,CURLOPT_RETURNTRANSFER,true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

curl_setopt($ch, CURLOPT_HTTPHEADER, array("Accept: application/xml", "Authorization:". $dev_key .":" .$api_key ));
$result = curl_exec($ch);
curl_close($ch);
print $result; 
```

我尝试了一切，但似乎没有用。任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T05:18:03.747

Try this :

```
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, "https://sandbox.clickbank.com/rest/1.3/sandbox/prepare");

curl_setopt($ch, CURLOPT_HEADER, false);

curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

curl_setopt($ch, CURLOPT_HTTPHEADER, array("Accept:application/json", "Authorization: >>>Your Clickbank Developer API Key from ClickBan->Settings->My Account<<<"));

curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'POST');

$return = curl_exec($ch);

curl_close($ch); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T05:02:50.983

尝试在您的`curl_exec()`:

```
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'POST'); 
```

它对我有用，我希望它也对你有用。

# horizontal-accordion - 带有浮动 div 的手风琴

> ID：13269845
> 
> 赞同：1
> 
> 时间：2012-11-07T12:31:17.173
> 
> 标签：horizontal-accordion

我的计划是让一些相邻的 3 个 div 的行向左浮动，替换 Accordion-Headers，然后打开每个 div 的内容，使其低于一行三个，将页面的其余部分向下推。

我尝试了各种“位置”的可能性，但无法让它按照我想要的方式工作。更多的是一个 css 问题。或者最好不要使用手风琴？

jsfiddle.net/pCwxa/1

```
<!DOCTYPE html>
<html>
<head>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

  <script>
  $(document).ready(function() {
    $("#accordion").accordion({ collapsible: true },{ active: false });
  });
  </script>

<style type="text/css">

#link   {   background-color: grey;
    float: left; 
    height: 300px; 
    width: 280px;
    margin: 0 20px 80px 0px;
    }

#cont   {   top:320px;
    background-color: blue;
    height: 300px; 
    width: 880px;
    }           
</style>
</head>

<body>

<div style="width:900px; height:900px; margin-left:30px; margin-bottom:; border:1px solid red;   padding:0px;">

<div id="accordion">
<div id="link">
<h3><a href="#">Section 1</a></h3></div>
<div id="cont">
    <p>
    Blabla
</div>

<div id="link">
<h3><a href="#">Section 2</a></h3></div>
<div id="cont">
    <p>
    Blabla
    </p>
</div>

<div id="link"> 
<h3><a href="#">Section 3</a></h3></div>
<div id="cont">
    <p>
    Blabla
    </p>
</div>

<div id="link">

<h3><a href="#">Section 4</a></h3></div>
<div id="cont">
    <p>
    Blabla
    </p>
</div>
</div>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:29:06.190

您已将`div`元素按交替顺序排列，每个元素`div.link`与`div.cont`. 相反，`div.link`先放三个，然后放三个`div.cont`。使用 CSS`clear`确保第二组三个出现在新行上。

# android - 在android应用程序中查找用户电话号码的最佳做法？

> ID：13269847
> 
> 赞同：0
> 
> 时间：2012-11-07T12:31:18.783
> 
> 标签：android, mobile

我正在开发一个需要查找用户电话号码的应用程序。我成立了`Telephony Manager`，但这个类不保证电话号码总是返回。所以我想知道在android中有没有任何解决方案（可能不是一个直接的解决方案，我可以给用户电话号码，因为号码没有在 sim 卡上编码）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:35:25.557

您在这里没有太多可能性可以使用：

```
TelephonyManager tMgr =(TelephonyManager)mAppContext.getSystemService(Context.TELEPHONY_SERVICE);
String mPhoneNumber = tMgr.getLine1Number(); 
```

正如你所说，不能保证总是返回一个数字。或者您可以要求用户手动输入号码。我认为没有其他选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:41:19.533

只有少数服务提供商通过 getLine1Number() 方法提供电话号码。相反，您可以使用 getSimSerialNumber() 方法为每个 sim 获取唯一编号。

要求用户输入电话号码，您可以使用 getSimSerialNumber() 存储他的 simnumber；然后根据 sim 号码进行身份验证，这应该可以解决您的问题

# java - Android 远程桌面访问

> ID：13269848
> 
> 赞同：1
> 
> 时间：2012-11-07T12:31:20.520
> 
> 标签：java, android, remote-desktop, rdp

我正在使用 ProperJavaRDP，它在 java 中工作正常。当移动将 java 转换为 android 时，接收字节数组时遇到了困难。字节数组的大小在 android 和 java 中发生了变化。

任何帮助，将不胜感激..

谢谢。

# google-analytics - 谷歌分析目标流数不匹配

> ID：13269849
> 
> 赞同：1
> 
> 时间：2012-11-07T12:31:21.110
> 
> 标签：google-analytics, flow, goal-tracking

目标流节点中显示的数字与总行中其下方表格中显示的数字不匹配。

有人可以解释为什么会这样，或者这些数字是否代表不同的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:39:05.033

下表中的数字是访问次数。节点中的数字是页面浏览量。在从一个节点到另一个节点的循环中，您会注意到网页浏览量多于访问量（因为一位访问者已经看过该页面两次）。

# android - 如何在android中使用xmlpullparser根据日期值解析xml？

> ID：13269850
> 
> 赞同：0
> 
> 时间：2012-11-07T12:31:22.870
> 
> 标签：android, xmlpullparser

这是我的xml。

```
 <alert>
    <code>DJNZLWYXEOLP</code>
    <datetime>18-07-2012 11:03</datetime>
    <alertcode>REPTAOBXCOKN</alertcode>
    <alert>DA Insurer Quote</alert>
    <description>New DA Insurer Quote Received</description>
    <reference>CN/FA/FCD/KCJ/11539</reference>
</alert>
<alert>
    <code>SLZCLWEEYBMX</code>
    <datetime>19-07-2012 11:30</datetime>
    <alertcode>PWQHXUNWSMVG</alertcode>
    <alert>AQE Insurer Quote</alert>
    <description>New AQE Insurer Quote Received</description>
    <reference>MXH/11431</reference>
</alert>
<alert>
    <code>AXHRLWEVCROG</code>
    <datetime>20-07-2012 11:35</datetime>
    <alertcode>LAEPLNGJSOXP</alertcode>
    <alert>New DA Automatically Approved</alert>
    <description>New DA Automatically Approved Case Received</description>
    <reference>PI/EIC/HFFT/HAR/11673</reference>
</alert>
<alert>
    <code>OSYVLWELBADI</code>
    <datetime>21-07-2012 11:44</datetime>
    <alertcode>LAEPLNGJSOXP</alertcode>
    <alert>New DA Automatically Approved</alert>
    <description>New DA Automatically Approved Case Received</description>
    <reference>CN/EIC/CLHF/HAR/11674</reference>
</alert>
<alert>
    <code>YUFOLWEMDXEU</code>
    <datetime>22-07-2012 11:50</datetime>
    <alertcode>LAEPLNGJSOXP</alertcode>
    <alert>New DA Automatically Approved</alert>
    <description>New DA Automatically Approved Case Received</description>
    <reference>PI/EIC/HFFT/HAR/11675</reference>
</alert>
<alert>
    <code>OGGWLWEXLGKB</code>
    <datetime>23-07-2012 13:18</datetime>
    <alertcode>REPTAOBXCOKN</alertcode>
    <alert>DA Insurer Quote</alert>
    <description>New DA Insurer Quote Received</description>
    <reference>PI/FA/FIB/LAN/11590</reference>
    </alert>
</alerts> 
```

在这里，我想根据日期时间值解析 xml。也就是说解析必须在 20-07-2012 11:35 之后开始。我在 xmlpullparser 中试过这个，它解析完整的 xml。但我想在我上面输入的日期时间之后解析。我问这个是因为我的 xml 有 300 条记录，都不需要显示在列表中，所以有人告诉我如何显示部分 xml 记录。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:30:34.973

不使用 PullParser，我看不出这是怎么可能的，但是使用 SAX Parser，您可能能够实现它。您无法逃避解析，但您可以做的是解析每个条目直到日期时间字段并将值与您的值进行比较want(20-07-2012 11:35) 如果它大于或等于该日期，那么您完全解析该元素并将其添加到数组列表并显示数组列表中的所有元素。

如果您的意思是减少解析时间，那么我想没有人可以帮助您。（但您永远不知道，StackOverflow 上有很多聪明的人）

# android - 如何在 Eclipse 上安装 ksoap2-android-assembly-3.0.0-RC.2-jar-with-dependencies.jar 库的文档

> ID：13269856
> 
> 赞同：0
> 
> 时间：2012-11-07T12:31:32.850
> 
> 标签：android, eclipse, web-services

我从 code.google.com 下载了 ksoap2-android-assembly-3.0.0-RC.2-jar-with-dependencies.jar 库并将其附加到我的 android 项目中，但现在我想查看类的文档，我怎么能那样做？请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:20:47.027

您可以从[ksoap2-android获得您的问题解决方案](http://code.google.com/p/ksoap2-android/wiki/HowToUse)

也来自[ksoap2 的文档](http://code.google.com/p/ksoap2-android/wiki/NeedHelp)

希望它会帮助你。

# objective-c - 在 IOS 6 中更改 UIDatePicker 大小

> ID：13269858
> 
> 赞同：0
> 
> 时间：2012-11-07T12:31:37.970
> 
> 标签：objective-c, ios6, xcode4.5

我`UIDatePicker`在我的应用程序中使用。

在 iOS 5 中我可以更改 的宽度和高度`UIDatePicker`，但在 iOS 6 中我不能。我正在使用以下代码：

```
CGRect pickerFrame = CGRectMake(0, 90, 100, 100);
datePicker = [[UIDatePicker alloc] initWithFrame:pickerFrame];
datePicker.datePickerMode = UIDatePickerModeDate; 
```

我需要为此做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:49:55.057

`UIDatePicker`显示一个`UIPickerView`. 不幸的是， a`UIPickerView`的大小无法更改。

当然，您可以尝试使用变换来欺骗它，但请不要。它不仅会让您头疼，而且会更难使用、丑陋、模糊，并且违反人机界面准则（通过使触摸目标太小）。

# powershell - 在 Powershell / Templates 中使用 CamelCase 一个单词

> ID：13269865
> 
> 赞同：2
> 
> 时间：2012-11-07T12:32:13.490
> 
> 标签：powershell, asp.net-mvc-scaffolding

我到处寻找，似乎找不到答案，也许是因为我知道的不够多，不知道要搜索什么。

我使用了 Get-PluralizedWord 函数。

是否有类似的方法可以将给定的单词（如 MyClass）转换为 powershell/T4Templates 中的 myClass？

干杯，

詹姆士

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T13:41:12.337

要将给定的单词（如 MyClass）转换为 myClass，您可以使用 .net 正则表达式替换：

```
[Regex]::Replace("MyClass" , '\b.', {  $args[0].Value.Tolower() }) 
```

或子串操作：

```
"MyClass" | % { $_.substring(0,1).tolower()+$_.substring(1) } 
```

# asp.net-mvc - 如果所有操作在 Asp.net MVC4 中调用相同的函数怎么办？

> ID：13269868
> 
> 赞同：0
> 
> 时间：2012-11-07T12:32:24.120
> 
> 标签：asp.net-mvc

总而言之，在我的应用程序设计中，Controller 类的某些操作会在调用时首先调用相同的方法。代码片段如下所示。请检查它。谢谢。

```
public class Controller1 : Controller
    {

        public ActionResult Action1()
        {
            FunctionA(); //This function must be called firstly.This function is defined somewhere. 
            return View("a1");
        }

        public ActionResult Action2()
        {
            FunctionA(); 
            return View("a2");
        }

    }

public class Controller2 : Controller
    {

        public ActionResult Action3()
        {
            FunctionA(); 
            return View("a3");
        }

        public ActionResult Action4()
        {
            FunctionB(); 
            return View("a4");
        }

    } 
```

在当前情况下 `Action1`，`Action2`in`Controller1`和`Action3`in`Controller2`调用相同`FunctionA()`，基于 DRY 理论，最好定义一个基本控制器或方法，我不知道如何在 Asp.net MVC4 中制作。请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:48:09.477

只有您可以回答这个问题，因为基本上答案取决于*您的*设计。

如果您的`FunctionA`方法特定于该控制器，那么您可以引入一个基类。但是，您也可以使用辅助类甚至只是扩展方法（如果它足够通用）来实现您的 DRY 架构。

关于如何在您的操作中调用它，如果它必须在操作执行*之前*运行，那么我建议引入一个自定义[ActionFilterAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionfilterattribute%28v=vs.108%29.aspx)，您可以使用它来装饰每个操作，例如

```
public class Controller1 : Controller
{
    [FunctionAAttribute]
    public ActionResult Action1()
    {
        return View("a1");
    }

    [FunctionAAttribute]
    public ActionResult Action2()
    {
        return View("a2");
    }
} 
```

或者，如果必须在该特定控制器上的*每个*操作之前运行它，只需装饰控制器，例如

```
[FunctionAAttribute]
public class Controller1 : Controller
{
    public ActionResult Action1()
    {
        return View("a1");
    }

    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:37:14.560

它不是那么简单。如果他们只是共享一些代码，并不一定意味着他们应该有一个实现该功能的公共基类。您正在考虑代码中的细节来驱动您的界面。

我无法在不了解更多细节的情况下回答这个问题，但只要他们都使用的代码都在一个地方，那么你就已经朝着正确的方向前进了一半。

# django - django + haystack 1.2.7 和 solr 3.6.1 没有结果

> ID：13269877
> 
> 赞同：0
> 
> 时间：2012-11-07T12:32:40.497
> 
> 标签：django, solr, django-haystack

我无法恢复结果。

这是我到目前为止所得到的：

search_indexes.py

```
class CompanyIndex(SearchIndex):
    text = CharField(document=True, use_template=True)
    name = CharField(model_attr='name')
    sector = CharField(model_attr='sector')

    def get_model(self):
        return Company

    def index_queryset(self):
        return self.get_model().objects.all() 
```

site.register（公司，公司索引）

```
class CompanySearchForm(ModelSearchForm):
    name = forms.CharField(max_length=64, required=False)
    sector = forms.MultipleChoiceField(choices=SECTORS_CHOICES, required=False)

    def search(self):
        # First, store the SearchQuerySet received from other processing.
        sqs = super(CompanySearchForm, self).search()
        print "fgdgdfgdfgdfg"
        if self.is_valid():
            # Check to see if a start_date was chosen.
            if self.cleaned_data['name']:
                print "%s" % self.cleaned_data['name']
                sqs = sqs.filter(name__exact=self.cleaned_data['name'])

            # Check to see if an end_date was chosen.
            if self.cleaned_data['sector']:
                sqs = sqs.filter(sector__contains=self.cleaned_data['sector'])

        return sqs 
```

和网址：

```
sqs = SearchQuerySet()
    url(r'^search/', SearchView(
    template='search/search.html',
    form_class=CompanySearchForm,
    searchqueryset=sqs,
), name='haystack_search'), 
```

我正在使用 haystack 文档中的模板。我没有看到任何结果。

我很感激任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:44:09.740

您应该在以下位置创建模板：

> 模板\搜索\索引\APP_NAME\company_text.txt

什么代表您 CompanyIndex 的可搜索字段

```
{{ object.text }}
{{ object.name }}
{{ object.sector }} 
```

无论您在模板中写入的内容是否存在于 search_index.py 中，都将从您的索引中进行搜索。以下足以建立索引。

```
 text = CharField(document=True, use_template=True) 
```

# spring - Spring Application Context：如何将类的构造函数参数设置为类静态成员变量？

> ID：13269880
> 
> 赞同：3
> 
> 时间：2012-11-07T12:32:45.807
> 
> 标签：spring, static-members, applicationcontext, restlet-2.0

在应用程序上下文 XML 文件中，如何将构造函数参数设置为静态类成员？

例如，我正在使用 Restlet，而 Restlet 的一个名为 ChallengeAuthenticator 的类接收一个质询方案成员变量。

```
// Normal Initialization
ChallengeAuthenticator challengeAuthenticator = new ChallengeAuthenticator(
                null, ChallengeScheme.HTTP_BASIC, "WSRealm"); 
```

如果可能的话，我想在应用程序上下文中使用它。对于这样的事情：

```
<bean id="challengeAuthenticator" class="org.restlet.security.ChallengeAuthenticator">
  <!-- Not meant to be String for value just trying to make it easier to reader to interpret my question -->  
  <constructor-arg value="ChallengeScheme.HTTP_BASIC" />
</bean> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T12:44:33.230

最简单的方法是使用[Spring 表达式语言](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/expressions.html)：

```
<constructor-arg value="#{ T(ChallengeScheme).HTTP_BASIC }" /> 
```

请注意，您需要一个完整的类名`T(...)`。

# javascript - AngularJS $resource RESTful 示例

> ID：13269882
> 
> 赞同：145
> 
> 时间：2012-11-07T12:32:58.033
> 
> 标签：javascript, rest, angularjs

我想使用 $resource 来调用我的 RESTful Web 服务（我仍在处理），但我想先了解我的 AngularJS 脚本是否正确。

待办事项 DTO 具有：`{id, order, content, done}`

`:cmd`这样我就可以调用`api/1/todo/reset`以清除数据库中的 todo 表。

这是带有我理解的注释的代码：

```
function TodoService($resource) {
    var src = $resource('api/1/todo/:id:cmd',
              {id: "@id", cmd: "@cmd"}, //parameters default
              {
                ListTodos: { method: "GET", params: {} },
                GetTodo: { method: "GET", params: { id: 0 } },                            
                CreateTodo: { method: "POST", params: { content: "", order: 0, done: false } },
                UpdateTodo: { method: "PATCH", params: { /*...*/ } },
                DeleteTodo: { method: "DELETE", params: { id: 0 } },
                ResetTodos: { method: "GET", params: { cmd: "reset" } },
              });

    //Usage:

    //GET without ID
    //it calls -> api/1/todo
    src.ListTodos();

    //GET with ID
    //it calls -> api/1/todo/4
    src.GetTodo({ id: 4 });

    //POST with content, order, done
    //it calls -> api/1/todo
    src.CreateTodo({ content: "learn Javascript", order: 1, done: false });

    //UPDATE content only
    //it calls -> api/1/todo/5
    src.UpdateTodo({ id: 5, content: "learn AngularJS" }); 

    //UPDATE done only
    //it calls -> api/1/todo/5
    src.UpdateTodo({ id: 5, done: true });

    //RESET with cmd
    //it calls -> api/1/todo/reset
    src.ResetTodos();
} 
```

我不确定的一件事是 PATCH 方法，我不想更新所有内容，我可以只更新一个字段吗？我是否正确构建了这段代码？

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2012-11-07T17:42:59.537

$resource 旨在从端点检索数据，对其进行操作并将其发送回。你已经有了其中的*一些*，但你并没有真正利用它来做它要做的事情。

在您的资源上拥有自定义方法很好，但您不想错过 OOTB 附带的酷炫功能。

**编辑**：我认为我最初解释得不够好，但`$resource`做了一些带有回报的时髦的东西。`Todo.get()`并且`Todo.query()`都*返回*资源对象，*并*在获取完成时将其传递给*回调。*它在幕后做了一些带有承诺的花哨的东西，这意味着你可以在回调实际触发`$save()`之前`get()`调用它，它会等待。最好只在 Promise`then()`或回调方法中处理您的资源。

### 标准使用

```
var Todo = $resource('/api/1/todo/:id');

//create a todo
var todo1 = new Todo();
todo1.foo = 'bar';
todo1.something = 123;
todo1.$save();

//get and update a todo
var todo2 = Todo.get({id: 123});
todo2.foo += '!';
todo2.$save();

//which is basically the same as...
Todo.get({id: 123}, function(todo) {
   todo.foo += '!';
   todo.$save();
});

//get a list of todos
Todo.query(function(todos) {
  //do something with todos
  angular.forEach(todos, function(todo) {
     todo.foo += ' something';
     todo.$save();
  });
});

//delete a todo
Todo.$delete({id: 123}); 
```

同样，对于您在 OP 中发布的内容，您可以获得一个资源对象，然后在其上调用您的任何自定义函数（理论上）：

```
var something = src.GetTodo({id: 123});
something.foo = 'hi there';
something.UpdateTodo(); 
```

然而，在我去发明自己的之前，我会尝试 OOTB 实现。如果您发现您没有使用 的任何默认功能`$resource`，您可能应该只使用`$http`它自己。

## 更新：Angular 1.2 和 Promise

从 Angular 1.2 开始，资源支持 Promise。但他们并没有改变其余的行为。

要利用 的承诺`$resource`，您需要`$promise`在返回值上使用该属性。

### 使用承诺的示例

```
var Todo = $resource('/api/1/todo/:id');

Todo.get({id: 123}).$promise.then(function(todo) {
   // success
   $scope.todos = todos;
}, function(errResponse) {
   // fail
});

Todo.query().$promise.then(function(todos) {
   // success
   $scope.todos = todos;
}, function(errResponse) {
   // fail
}); 
```

请记住，该`$promise`属性是一个与上面返回的值相同的属性。所以你会变得很奇怪：

### 这些是等价的

```
var todo = Todo.get({id: 123}, function() {
   $scope.todo = todo;
});

Todo.get({id: 123}, function(todo) {
   $scope.todo = todo;
});

Todo.get({id: 123}).$promise.then(function(todo) {
   $scope.todo = todo;
});

var todo = Todo.get({id: 123});
todo.$promise.then(function() {
   $scope.todo = todo;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-18T21:34:58.743

你可以做`$scope.todo = Todo.get({ id: 123 })`。 `.get()`并`.query()`在 Resource 上立即返回一个对象，并稍后用 promise 的结果填充它（以更新您的模板）。这*不是*一个典型的承诺，这就是为什么你需要使用回调或 $promise 属性，如果你有一些你想在调用之后执行的特殊代码。但是，如果您只在模板中使用它，则无需在回调中将其分配给您的范围。

# javascript - Javascript - 根据属性值从列表中获取特定对象

> ID：13269885
> 
> 赞同：0
> 
> 时间：2012-11-07T12:33:03.637
> 
> 标签：javascript, jquery, javascript-objects

我有一个 javascript json 结果列表 - self.data.allOrganizationsList

self.data.allOrganizationsList 包含其属性为的组织列表

```
customentityaccess, id, isLabsAccessAllowed, memberCount, organizationname, organizationwebsite 
```

我想访问一个 id = 402881702121fec10121520080930001 的组织对象

我试图从下面的语句中得到这个，但由于列表中的每个项目都是一个对象，我无法得到想要的结果。

```
self.data.allOrganizationsList.id['402881702121fec10121520080930001']`
//(or)
self.data.allOrganizationsList["id"]['402881702121fec10121520080930001'] 
```

其他替代方法是使用 $.each(self.data.allOrganizationList, function(index, item))。

但是我可以在不迭代-self.data.allOrganizationList 的情况下实现上述结果吗

从 $.grept()

```
var myvar = $.grep(response.permissionedOrganizations, function(v) {
            return v.id === '40288170227c142201227eb56c5c000a';
        })[0];
console.log(myvar); 
```

在控制台中显示未定义。我是不是错过了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T12:39:04.330

使用您的结构，您希望`$.grep`过滤掉正确的元素：

```
var arr = [
  {id: 1, value: 2},
  {id: 3, value: 4}
];

$.grep(arr, function(v) { return v.id === 3; })[0];  // second element 
```

请注意，这确实在幕后进行迭代 - 没有办法通过使用`[key]`符号来获得正确的元素，因为这不是定义结构的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T12:52:54.203

jQuery.grep（数组，函数（elementOfArray，indexInArray）[，反转]）

查找满足过滤器函数的数组元素。原始数组不受影响。 [查看](http://api.jquery.com/jQuery.grep/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T12:36:59.713

如果它是一个数组，那么它不是由 id 键入的，因此您需要遍历每个项目并检查 id 属性，如上所述。

为了让您能够通过 id 进行检查，它必须类似于：

```
var allOrganizationsList =    
    {
        "id1": {
            "memberCount": 1
        },
        "id2": {
            "memberCount": 2
        }
    };

allOrganizationsList["id1"].memberCount; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T12:42:04.170

如果您需要根据值搜索多个对象，您可以简单地迭代列表一次：

```
for (var i in list) {
    var id = list[i].id;
    my_table[id] = list[i];  // for unique ids
} 
```

对于非唯一 id，将`my_table`其作为数组的关联数组：

```
if (!my_table[id]) my_table[id] = [list[i]];
else my_table[id].push(list[i]); 
```

在后一种情况下， my_table['12399123'] 可以返回结果数组。

# ios - Missing IAP Apple Rejection

> ID：13269886
> 
> 赞同：4
> 
> 时间：2012-11-07T12:33:06.537
> 
> 标签：ios, flash, air, in-app-purchase, appstore-approval

My app was rejected by apple with the following message:

> Missing IAPs
> 
> We are unable to complete the review of your app since one or more of your In App Purchases have not been submitted for review.
> 
> Please be sure to take action and submit your In App Purchases AND upload a new binary in iTunes Connect. Learn more about submitting In App Purchases for review in the iTunes Connect Developer Guide.
> 
> Once you've submitted your In App Purchases and uploaded a new binary, we can proceed with your review.

I'm using Flash CS6 and I'm not using any IAP, anywhere in my app. I just use a network connection to save and load user data. Is there anything wrong in it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:35:41.430

听起来，无论应用商店审核团队执行的任何筛选过程都错误地触发了您的应用启用了 IAP。

[通过此表格提交上诉](https://developer.apple.com/appstore/contact/appreviewboard/index.html)，看看他们是否会重新考虑。

否则，您将不得不“深入”您的代码，看看是否有任何您可能错误地启用或嵌入到您的项目中，这会导致 Apple 相信您正在执行 IAP。同时，我想知道 CS6 中是否有一些你和我都不知道的允许 IAP 购买的东西？

# model-view-controller - Calling images from the database on the view is out of MVC?

> ID：13269889
> 
> 赞同：2
> 
> 时间：2012-11-07T12:33:08.177
> 
> 标签：model-view-controller, zend-framework, design-patterns

I've created a model for the base table, the one with the infos. Then another model for the images table, and extended it to my generic images model, which is the following:

```
class Application_Model_GenericImages extends Zend_Db_Table_Abstract {
   public function getImage($relCol, $id) {
     $db = $this->getDefaultAdapter();
     return $db->fetchRow("SELECT * FROM {$_name} 
                           WHERE {$_name}.{$relCol} = '{$id}'");
   }

} 
```

The model for the images table is like:

```
class Application_Model_ImagesTable extends Application_Model_GenericImages {
   protected $_name = 'images_table';
} 
```

Then on the controller i do the following:

```
$infoTable = $this->view->infoTable = new Application_Model_InfoTable();
/* I haven't made the info table here because there's no point to... */
$imagesModel = $this->view->imagesModel = new Application_Model_ImagesTable(); 
```

And finally on the view it's like:

```
foreach ($infoTable->fetchAll() as $info) {
  //Print Some Info
  $image = $this->imageModel->getImage('info_id', $info->id);
} 
```

Is this wrong? If it is, how bad is this and how's the right way to do it?

# python - pandas 中的笛卡尔积

> ID：13269890
> 
> 赞同：140
> 
> 时间：2012-11-07T12:33:12.763
> 
> 标签：python, pandas, merge, cartesian-product, cross-join

我有两个熊猫数据框：

```
from pandas import DataFrame
df1 = DataFrame({'col1':[1,2],'col2':[3,4]})
df2 = DataFrame({'col3':[5,6]}) 
```

得到他们的笛卡尔积的最佳实践是什么（当然没有像我一样明确地写出来）？

```
#df1, df2 cartesian product
df_cartesian = DataFrame({'col1':[1,2,1,2],'col2':[3,4,3,4],'col3':[5,5,6,6]}) 
```

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-11-07T12:47:36.283

在最新版本的 Pandas (>= 1.2) 中，这是内置的，`merge`因此您可以执行以下操作：

```
from pandas import DataFrame
df1 = DataFrame({'col1':[1,2],'col2':[3,4]})
df2 = DataFrame({'col3':[5,6]})    

df1.merge(df2, how='cross') 
```

这相当于之前的 pandas < 1.2 答案，但更容易阅读。

* * *

对于 < 1.2 的熊猫：

如果您有一个对每一行重复的键，那么您可以使用合并生成笛卡尔积（就像在 SQL 中一样）。

```
from pandas import DataFrame, merge
df1 = DataFrame({'key':[1,1], 'col1':[1,2],'col2':[3,4]})
df2 = DataFrame({'key':[1,1], 'col3':[5,6]})

merge(df1, df2,on='key')[['col1', 'col2', 'col3']] 
```

输出：

```
 col1  col2  col3
0     1     3     5
1     1     3     6
2     2     4     5
3     2     4     6 
```

有关文档，请参见此处：http: [//pandas.pydata.org/pandas-docs/stable/merging.html](http://pandas.pydata.org/pandas-docs/stable/merging.html)

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2017-10-14T11:32:20.390

`pd.MultiIndex.from_product`用作其他空数据框中的索引，然后重置其索引，就完成了。

```
a = [1, 2, 3]
b = ["a", "b", "c"]

index = pd.MultiIndex.from_product([a, b], names = ["a", "b"])

pd.DataFrame(index = index).reset_index() 
```

出去：

```
 a  b
0  1  a
1  1  b
2  1  c
3  2  a
4  2  b
5  2  c
6  3  a
7  3  b
8  3  c 
```

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2017-10-23T18:15:43.843

这个需要最少的代码。创建一个通用的“键”来笛卡尔合并两者：

```
df1['key'] = 0
df2['key'] = 0

df_cartesian = df1.merge(df2, how='outer') 
```

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2015-09-21T16:43:28.537

这不会赢得代码高尔夫比赛，并从以前的答案中借用 - 但清楚地显示了密钥是如何添加的，以及连接是如何工作的。这会从列表中创建 2 个新数据框，然后添加进行笛卡尔积的键。

我的用例是我需要列表中每周的所有商店 ID 的列表。所以，我创建了一个我想要拥有的所有周数的列表，然后是我想要映射它们的所有商店 ID 的列表。

我选择 left 的合并，但在此设置中与 inner 在语义上相同。您可以[在有关 merging 的文档中看到这一点，该文档](http://pandas.pydata.org/pandas-docs/stable/merging.html#brief-primer-on-merge-methods-relational-algebra)指出，如果键组合在两个表中多次出现，它会执行笛卡尔积 - 这是我们设置的。

```
days = pd.DataFrame({'date':list_of_days})
stores = pd.DataFrame({'store_id':list_of_stores})
stores['key'] = 0
days['key'] = 0
days_and_stores = days.merge(stores, how='left', on = 'key')
days_and_stores.drop('key',1, inplace=True) 
```

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2018-03-16T16:53:32.197

使用方法链接：

```
product = (
    df1.assign(key=1)
    .merge(df2.assign(key=1), on="key")
    .drop("key", axis=1)
) 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2016-11-03T14:42:24.053

作为替代方案，可以依赖 itertools: 提供的笛卡尔积`itertools.product`，避免创建临时键或修改索引：

```
import numpy as np 
import pandas as pd 
import itertools

def cartesian(df1, df2):
    rows = itertools.product(df1.iterrows(), df2.iterrows())

    df = pd.DataFrame(left.append(right) for (_, left), (_, right) in rows)
    return df.reset_index(drop=True) 
```

快速测试：

```
In [46]: a = pd.DataFrame(np.random.rand(5, 3), columns=["a", "b", "c"])

In [47]: b = pd.DataFrame(np.random.rand(5, 3), columns=["d", "e", "f"])    

In [48]: cartesian(a,b)
Out[48]:
           a         b         c         d         e         f
0   0.436480  0.068491  0.260292  0.991311  0.064167  0.715142
1   0.436480  0.068491  0.260292  0.101777  0.840464  0.760616
2   0.436480  0.068491  0.260292  0.655391  0.289537  0.391893
3   0.436480  0.068491  0.260292  0.383729  0.061811  0.773627
4   0.436480  0.068491  0.260292  0.575711  0.995151  0.804567
5   0.469578  0.052932  0.633394  0.991311  0.064167  0.715142
6   0.469578  0.052932  0.633394  0.101777  0.840464  0.760616
7   0.469578  0.052932  0.633394  0.655391  0.289537  0.391893
8   0.469578  0.052932  0.633394  0.383729  0.061811  0.773627
9   0.469578  0.052932  0.633394  0.575711  0.995151  0.804567
10  0.466813  0.224062  0.218994  0.991311  0.064167  0.715142
11  0.466813  0.224062  0.218994  0.101777  0.840464  0.760616
12  0.466813  0.224062  0.218994  0.655391  0.289537  0.391893
13  0.466813  0.224062  0.218994  0.383729  0.061811  0.773627
14  0.466813  0.224062  0.218994  0.575711  0.995151  0.804567
15  0.831365  0.273890  0.130410  0.991311  0.064167  0.715142
16  0.831365  0.273890  0.130410  0.101777  0.840464  0.760616
17  0.831365  0.273890  0.130410  0.655391  0.289537  0.391893
18  0.831365  0.273890  0.130410  0.383729  0.061811  0.773627
19  0.831365  0.273890  0.130410  0.575711  0.995151  0.804567
20  0.447640  0.848283  0.627224  0.991311  0.064167  0.715142
21  0.447640  0.848283  0.627224  0.101777  0.840464  0.760616
22  0.447640  0.848283  0.627224  0.655391  0.289537  0.391893
23  0.447640  0.848283  0.627224  0.383729  0.061811  0.773627
24  0.447640  0.848283  0.627224  0.575711  0.995151  0.804567 
```

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2020-11-26T07:18:28.383

呈现给你

### 熊猫 >= 1.2

# [`left.merge(right, how='cross')`](https://github.com/pandas-dev/pandas/pull/37864)

```
import pandas as pd 

pd.__version__
# '1.2.0'

left = pd.DataFrame({'col1': [1, 2], 'col2': [3, 4]})
right = pd.DataFrame({'col3': [5, 6]}) 

left.merge(right, how='cross')

   col1  col2  col3
0     1     3     5
1     1     3     6
2     2     4     5
3     2     4     6 
```

结果中忽略了索引。

实施方面，这使用了在接受的答案中描述的公共键列方法的连接。使用 API 的好处是它可以为您节省大量的输入，并且可以很好地处理一些极端情况。我几乎总是推荐这种语法作为我对 pandas 笛卡尔积的首选，除非你正在寻找[更高效的东西](https://stackoverflow.com/q/53699012/4909087)。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-03-25T02:58:01.963

如果您没有重叠列，不想添加一个，并且可以丢弃数据帧的索引，这可能更容易：

```
df1.index[:] = df2.index[:] = 0
df_cartesian = df1.join(df2, how='outer')
df_cartesian.index[:] = range(len(df_cartesian)) 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-05-06T09:02:46.247

这是一个辅助函数，用于执行具有两个数据帧的简单笛卡尔积。内部逻辑使用内部键进行处理，并避免从任一侧破坏任何恰好被命名为“键”的列。

```
import pandas as pd

def cartesian(df1, df2):
    """Determine Cartesian product of two data frames."""
    key = 'key'
    while key in df1.columns or key in df2.columns:
        key = '_' + key
    key_d = {key: 0}
    return pd.merge(
        df1.assign(**key_d), df2.assign(**key_d), on=key).drop(key, axis=1)

# Two data frames, where the first happens to have a 'key' column
df1 = pd.DataFrame({'number':[1, 2], 'key':[3, 4]})
df2 = pd.DataFrame({'digit': [5, 6]})
cartesian(df1, df2) 
```

显示：

```
 number  key  digit
0       1    3      5
1       1    3      6
2       2    4      5
3       2    4      6 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-11-03T16:22:43.153

您可以先获取 and 的笛卡尔积`df1.col1`，`df2.col3`然后合并回`df1`get `col2`。

这是一个通用的笛卡尔积函数，它采用列表字典：

```
def cartesian_product(d):
    index = pd.MultiIndex.from_product(d.values(), names=d.keys())
    return pd.DataFrame(index=index).reset_index() 
```

申请为：

```
res = cartesian_product({'col1': df1.col1, 'col3': df2.col3})
pd.merge(res, df1, on='col1')
#  col1 col3 col2
# 0   1    5    3
# 1   1    6    3
# 2   2    5    4
# 3   2    6    4 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-09-27T20:44:23.810

当前版本的 Pandas (1.1.5) 的另一种解决方法：如果您从非数据帧序列开始，这个解决方法特别有用。我没有计时。它不需要任何人工索引操作，但确实需要您重复第二个序列。它依赖于 的一个特殊性质`explode`，即重复右手索引。

```
df1 = DataFrame({'col1': [1,2], 'col2': [3,4]})

series2 = Series(
    [[5, 6]]*len(df1),
    name='col3',
    index=df1.index,
)

df_cartesian = df1.join(series2.explode()) 
```

这输出

```
 col1  col2 col3
0     1     3    5
0     1     3    6
1     2     4    5
1     2     4    6 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-10-11T21:22:12.943

您可以使用[pyjanitor](https://pyjanitor-devs.github.io/pyjanitor/reference/janitor.functions/janitor.expand_grid.html#janitor.expand_grid)中的[expand_grid](https://pyjanitor-devs.github.io/pyjanitor/)来复制交叉连接；它为较大的数据集提供了一些速度性能（它`np.meshgrid`在下面使用）：

```
pip install git+https://github.com/pyjanitor-devs/pyjanitor.git
import pandas as pd
import janitor as jn
jn.expand_grid(others = {"df1":df1, "df2":df2})

   df1       df2
  col1 col2 col3
0    1    3    5
1    1    3    6
2    2    4    5
3    2    4    6 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2017-09-05T06:43:58.050

我发现使用 pandas MultiIndex 是完成这项工作的最佳工具。如果您有一个列表列表`lists_list`，请调用`pd.MultiIndex.from_product(lists_list)`并迭代结果（或在 DataFrame 索引中使用它）。

# haskell - Returning an error status in Haskell and Yesod

> ID：13269891
> 
> 赞同：9
> 
> 时间：2012-11-07T12:33:12.697
> 
> 标签：haskell, http-status-codes, yesod

I am a Haskell newbie.

I am trying to write a small [Webdav](https://www.rfc-editor.org/rfc/rfc4918) server using the [Yesod Framework](http://www.yesodweb.com/) and modelled after the `WebdavServlet` in the Apache Tomcat 7 source code. I have run into a problem returning an error from one of my functions.

My webdav service should return either XML or JSON, depending on the value of the `Accept` header sent in by the caller. I defined a data type called `RepXmlJson`:

```
import Yesod

data RepXmlJson = RepXmlJson RepXml RepJson

instance HasReps RepXmlJson where
  chooseRep (RepXmlJson (RepXml xml) (RepJson json)) = chooseRep
    [ (typeXml, xml)
    , (typeJson, json)
    ] 
```

I am using this data type as the return value of my services, specifically the `lockWebdavR` function. I am trying to return a status 423 (locked) if a resource is currently locked. My code looks like this:

```
import qualified Data.ByteString as B
import qualified Data.Map        as M
import qualified Data.Text       as T
import qualified Network.Wai     as W

mkYesodSub "Webdav" [] [parseRoutes|
  / WebdavR COPY DELETE LOCK MKCOL MOVE OPTIONS PROPFIND PROPPATCH PUT UNLOCK
|]

type WebdavHandler yesod = GHandler Webdav yesod

webdavLocked423 :: Status
webdavLocked423 = Status 423 "Locked"

isLockedRequest :: Yesod master => Request -> WebdavHandler master Bool
-- isLockedRequest definition omitted for brevity

lockWebdavR :: Yesod master => WebdavHandler master RepXmlJson
lockWebdavR = do
  request <- getRequest
  locked <- isLockedRequest request
  if locked
    then return $
      W.responseLBS webdavLocked423 [("Content-Type", "text/plain")] ""
    else return undefined 
```

I am getting the following error:

```
Webdav.hs:94:10:
    Couldn't match expected type `RepXmlJson'
                with actual type `W.Response'
    Expected type: GHandler Webdav master RepXmlJson
      Actual type: GHandler Webdav master W.Response
    In the expression:
      return
      $ W.responseLBS webdavLocked423 [("Content-Type", "text/plain")] ""
    In a stmt of a 'do' block:
      if locked then
          return
          $ W.responseLBS webdavLocked423 [("Content-Type", "text/plain")] ""
      else
          return undefined 
```

I searched through the book ["Developing Web Applications with Haskell and Yesod"](http://www.yesodweb.com/book), but cannot find an example of returning an error of the proper type (`Rep...`).

How do I create a `RepXmlJson` with the correct error status?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T12:52:02.543

处理程序的正常完成总是导致 200 状态代码。要覆盖它，您必须以其他方式发送响应。在您的情况下，您可以尝试`sendResponseStatus`. 其他可能性是`sendWaiResponse`and `redirectWith`，尽管我怀疑后者是否有用。

# grails - Grails using spring security in SecurityFilters

> ID：13269892
> 
> 赞同：0
> 
> 时间：2012-11-07T12:33:29.930
> 
> 标签：grails, spring-security, lazy-initialization

In my grails application in production server I got some issues. In securityFilters I'm injecting springSecurityService and at some point I'm asking something like

```
if(springSecurityService?.currentUser?.client){
...
} 
```

But system throws an error as

```
Error 500: Internal Server Error
Class
org.hibernate.LazyInitializationException
Message
could not initialize proxy - no Session
Trace
   Line | Method
->>  32 | doCall            in SecurityFilters$_closure1_closure2_closure4
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    82 | doFilterInternal  in com.linkedin.grails.profiler.ProfilerFilter
|   190 | invoke . . . . .  in org.apache.jk.server.JkCoyoteHandler
|   291 | invoke            in org.apache.jk.common.HandlerRequest
|   776 | invoke . . . . .  in org.apache.jk.common.ChannelSocket
|   705 | processConnection in     ''
|   898 | runIt . . . . . . in org.apache.jk.common.ChannelSocket$SocketConnection
^   636 | run               in java.lang.Thread 
```

line 32 is the place where I call if statement mentioned above. Do you have any clue how to solve this LazyInitializationException? What I am doing wrong?

Note : "client" is the domain class which this user belongs to but it is not mentioned in belongsTo parameter of Person

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:36:36.453

该事件在控制器的 Hibernate 会话之外运行，因此当您加载用户时，它会立即断开连接，并且延迟加载的集合或多对一引用将无法解析。解决此问题的最简单方法是将用户加载调用包装在 withTransaction 块中 - 它使 Hibernate 会话始终保持打开状态：

```
AnyDomainClass.withTransaction { status ->
   if (springSecurityService?.currentUser?.client) {
      ...
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:16:38.787

要强制域对象在任何地方都正确工作，您可能需要使用惰性属性。我不知道你的对象是什么样子，但如果有任何类型的对象关系，你可以强迫它们不懒惰。像这样：

```
class Card {
  static hasMany = [cardProperties: CardProperty]
  static mapping = {
    cardProperties lazy: false
  }
} 
```

为确保您确实有一些可用的会话，您可能需要创建一个事务服务。任何服务都可以，但要确保它不包含该行

```
static transactional = false 
```

如果您将该服务注入您的过滤器，它将自动创建一个事务并能够获取惰性属性。但要小心！这将开始和完成一个事务。由于您在过滤器中使用它，因此任何页面加载都会多一个事务。

另一种选择是将 sessionFactory bean 注入过滤器。然后，您可以使用纯 Hibernate 语法。就像这个：

```
sessionFactory.getCurrentSession().beginTransaction(); 
```

这不是一个好主意，我不建议这样做，但它可能对你有用。但是请注意，转发请求会导致 2 次交易打开和 2 次交易关闭（这不好）。在决定是否提交事务时，您必须非常小心。但是，如果您确定在应用程序的每个页面上都需要数据库连接 - 这可能对您有用/

# combobox - How to make JavaFX editable comboBox opened?

> ID：13269893
> 
> 赞同：1
> 
> 时间：2012-11-07T12:33:38.967
> 
> 标签：combobox, javafx-2

How to open ComboBox automatically?

I have an editable ComboBox. I want it to be opened automatically, without forcing a user to click on it. How can it be done? I've tried to make something like this:

```
testButton.fireEvent(new Event(ComboBox.ON_SHOWN)); 
```

But it does not work as I need: in the output I can see messages which signals that ON_SHOWN event was fired, but graphically my comboBox is still closed. Also, i've tried

```
testButton.fireEvent(new Event(ComboBox.ON_SHOWING)); 
```

but this shows no reaction at all. As well as

```
testButton.fireEvent(new Event(ComboBoxBase.ON_SHOWING)); 
```

and

```
testButton.fireEvent(new Event(ComboBoxBase.ON_SHOWN)); 
```

PS: saying opened comboBox I mean something like this:

![](../Images/45c677ba3b0148bf6cfb66d9d008ce39.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T13:48:30.970

尝试

```
Button btn = new Button("Show combobox");
btn.setOnAction(new EventHandler<ActionEvent>() {
    @Override
    public void handle(ActionEvent event) {
        comboBox.show();
    }
}); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-12-20T14:42:23.847

`show();`方法不适用于`CheckComboBox`。

请让我们知道如何为 CheckComboBox 做同样的事情。

单击按钮时，CheckComboBox 应自动打开

# oracle - Getting a handle to native Oracle Connection in Hibernate 4 to run a stored proc

> ID：13269894
> 
> 赞同：-1
> 
> 时间：2012-11-07T12:33:48.050
> 
> 标签：oracle, hibernate, jboss

This is a follow-up to [Executing native query with Hibernate 4.1](https://stackoverflow.com/questions/11524984/executing-native-query-with-hibernate-4-1)

I've tried the options in the listed answer but we get errors and are unable to unwrap the proxied connection into the native connection which Oracle needs

Option 2 code

```
public void execute(Connection connection) throws SQLException {
    OracleConnection oracleConnection = connection.unwrap( OracleConnection.class );
    ...
} 
```

Error

```
java.lang.reflect.UndeclaredThrowableException
ERROR [stderr] (http-localhost/127.0.0.1:8080-3) at $Proxy64.unwrap(Unknown Source) 
```

Option 3 code

```
public void execute(Connection connection) throws SQLException {
    Connection unproxiedConnection = ( (JdbcWrapper<Connection>) connection ).getWrappedObject();
    ...
} 
```

Error

```
java.lang.ClassCastException: org.jboss.jca.adapters.jdbc.jdk6.WrappedConnectionJDK6 cannot be cast to oracle.jdbc.OracleConnection
at oracle.sql.ArrayDescriptor.createDescriptor(ArrayDescriptor.java:158) [ojdbc6.jar:11.2.0.1.0]
at oracle.sql.ArrayDescriptor.createDescriptor(ArrayDescriptor.java:126) [ojdbc6.jar:11.2.0.1.0]
at com.xxx.massBookingUpdateParam(HoldoversDAO.java:312) [Business-1.jar:]
at com.xxx.saveHoldovers(HoldoversServiceBean.java:86) [Business-1.jar:]
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0]
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0]
at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0]
at org.jboss.as.ee.component.ManagedReferenceMethodInterceptorFactory$ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptorFactory.java:72) [jboss-as-ee-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:374) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.doMethodInterception(Jsr299BindingsInterceptor.java:129) [jboss-as-weld-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.processInvocation(Jsr299BindingsInterceptor.java:137) [jboss-as-weld-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:36) [jboss-as-ee-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:36) [jboss-as-ee-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
at org.jboss.as.ejb3.component.invocationmetrics.ExecutionTimeInterceptor.processInvocation(ExecutionTimeInterceptor.java:43) [jboss-as-ejb3-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
at org.jboss.as.jpa.interceptor.SBInvocationInterceptor.processInvocation(SBInvocationInterceptor.java:47) [jboss-as-jpa-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
at org.jboss.as.weld.ejb.EjbRequestScopeActivationInterceptor.processInvocation(EjbRequestScopeActivationInterceptor.java:74) [jboss-as-weld-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:21) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:53) [jboss-as-ee-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
at org.jboss.as.ejb3.component.pool.PooledInstanceInterceptor.processInvocation(PooledInstanceInterceptor.java:51) [jboss-as-ejb3-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final-redhat-1.jar:1.1.1.Final-redhat-1]
at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:227) [jboss-as-ejb3-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
... 71 more 
```

any suggestions?

I've also tried this option [SessionFactory.openSession(Connection) in Hibernate 4](https://stackoverflow.com/questions/10731266/sessionfactory-opensessionconnection-in-hibernate-4) but that class does not get instantiated at all

**Update:**

Option 2 code works correctly. The problem was we had 2 versions of ojbc.jar - one as a Jboss module and one within the EAR, hence the Exception.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T04:20:03.870

尝试以下

我遇到了同样的问题。我们使用的是 spring，它有一个名为 NativeJdbcExtractor 的类。它有许多实现，以下一个适用于 TomCat。Jboss 有一个特定的实现，称为 JBossNativeJdbcExtractor

```
<bean id="jdbcExtractor" class="org.springframework.jdbc.support.nativejdbc.CommonsDbcpNativeJdbcExtractor"></bean> 
```

在您的 DAO 中，您可以注入 bean 并使用以下方法

```
protected NativeJdbcExtractor jdbcExtractor;
Connection conn=jdbcExtractor.getNativeConnection(oracleConnection); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:50:23.320

选项 2 代码正常工作。

IE。

`OracleConnection oracleConnection = connection.unwrap( OracleConnection.class );`

问题是我们有 2 个版本的 ojbc.jar - 一个作为 Jboss 模块，一个在 EAR 中，因此是 ClassCastException。

如评论中所述，此代码也有效

`oracle.jdbc.driver.OracleConnection oc = (oracle.jdbc.driver.OracleConnection) connection.getMetaData().getConnection();`

# jenkins - Configuring Bitbucket and Jenkins

> ID：13269896
> 
> 赞同：0
> 
> 时间：2012-11-07T12:33:52.073
> 
> 标签：jenkins, bitbucket

I've been trying to get Jenkins to point to my private Bitbucket repo but when Jenkins attempts to access the repo, the following gets logged to my console:

```
Building in workspace /usr/local/hudson/.hudson/jobs/project/workspace
Checkout:workspace / /usr/local/hudson/.hudson/jobs/project/workspace - hudson.remoting.LocalChannel@3d50e2
Using strategy: Default
Last Built Revision: Revision cec08812152ab1764ebb9bc52fbae2a6fe7c442d (origin/master)
Checkout:workspace / /usr/local/hudson/.hudson/jobs/project/workspace - hudson.remoting.LocalChannel@3d50e2
Fetching changes from the remote Git repository
Fetching upstream changes from git@bitbucket.org:username/projectname.git
ERROR: Problem fetching from origin / origin - could be unavailable. Continuing anyway
ERROR: Could not fetch from any repository
FATAL: Could not fetch from any repository
hudson.plugins.git.GitException: Could not fetch from any repository
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:852)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:812)
    at hudson.FilePath.act(FilePath.java:839)
    at hudson.FilePath.act(FilePath.java:821)
    at hudson.plugins.git.GitSCM.checkout(GitSCM.java:812)
    at hudson.model.AbstractProject.checkout(AbstractProject.java:1218)
    at hudson.model.AbstractBuild$AbstractRunner.checkout(AbstractBuild.java:586)
    at hudson.model.AbstractBuild$AbstractRunner.run(AbstractBuild.java:475)
    at hudson.model.Run.run(Run.java:1438)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:239) 
```

I don't care how I connect to Bitbucket, I just want to see it work, and as this is just a quick trial, security isn't important to me.

I've tried getting Jenkins to connect via HTTPS with my username and password in the URL but I seem to get the same error.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:55:20.343

如果它是 MacOS X 系统，您可能会发现这很有用：

[配置 Jenkins 以连接到 BitBucket](https://stackoverflow.com/questions/13267964/configure-jenkins-to-connect-to-bitbucket/13288065#13288065)

# zend-framework - How can I right align text with Zend_PDF?

> ID：13269897
> 
> 赞同：5
> 
> 时间：2012-11-07T12:33:53.320
> 
> 标签：zend-framework, pdf, pdf-generation, zend-pdf

I am working with Zend_PDF. The only task I can't figure out by myself is to align my texts to the right of my page.

How can I achive that?

**EDIT**

I used the drew010 answer below with others info found on the web to create a new class I am using to horizontally align the text.

```
<?php
/**
 * Advanced PDF functionnalities
 */
class Advanced_Pdf
{
    /**
     * Align text at left of provided coordinates
     */
    const TEXT_ALIGN_LEFT = 'left';

    /**
     * Align text at right of provided coordinates
     */
    const TEXT_ALIGN_RIGHT = 'right';

    /**
     * Center-text horizontally within provided coordinates
     */
    const TEXT_ALIGN_CENTER = 'center';

    /**
     * Extension of basic draw-text function to allow it to horizontally center text
     */
    public function drawTextWithPosition(Zend_Pdf_Page $page, $text, $y1, $xOffset = 0, $position = self::TEXT_ALIGN_LEFT, $encoding = null)
    {
        $bottom = $y1; // could do the same for vertical-centering
        $text_width = $this->getTextWidth($text, $page->getFont(), $page->getFontSize());

        switch ($position) {
            case self::TEXT_ALIGN_LEFT:
                $left = 60 + $xOffset;
                break;
            case self::TEXT_ALIGN_RIGHT:
                $left = $page->getWidth() - $text_width - $page->getFontSize() - 35 + $xOffset;
                break;
            case self::TEXT_ALIGN_CENTER:
                $left = ($page->getWidth() / 2) - ($text_width / 2) + $xOffset;
                break;
            default:
                throw new Exception("Invalid position value \"$position\"");
        }

        // display multi-line text
        foreach (explode(PHP_EOL, $text) as $i => $line) {
            $page->drawText($line,$left,$y1,$encoding);
        }
        return $this;
    }

    /**
     * Return length of generated string in points
     *
     * @param string $string
     * @param Zend_Pdf_Resource_Font $font
     * @param int $font_size
     * @return double
     */
    public function getTextWidth($text, Zend_Pdf_Resource_Font $font, $font_size) 
    {
        $drawing_text = iconv('', 'UTF-16BE', $text);
        $characters    = array();
        for ($i = 0; $i < strlen($drawing_text); $i++) {
            $characters[] = (ord($drawing_text[$i++]) << 8) | ord ($drawing_text[$i]);
        }
        $glyphs        = $font->glyphNumbersForCharacters($characters);
        $widths        = $font->widthsForGlyphs($glyphs);
        $text_width   = (array_sum($widths) / $font->getUnitsPerEm()) * $font_size;
        return $text_width; 
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T23:56:49.260

使用[此答案](https://stackoverflow.com/a/7755787/892493)中的代码，您可以根据字体和字体大小计算要绘制的文本的宽度。一旦你有了字符串的宽度，你就可以根据页面的宽度来右对齐它。

```
$text = 'Some text to right align';
$textWidth = getTextWidth($text, $zendPdfFont, $fontSize);

$page->drawText($text,
                $page->getWidth() - $textWidth - $fontSize,
                $verticalPosition); 
```

与居中类似：

```
$page->drawText($text,
               ($page->getWidth() / 2) - ($textWidth / 2),
                $verticalPosition); 
```

# sql-server - ON DELETE NO ACTION constraint in SQL Server database

> ID：13269900
> 
> 赞同：2
> 
> 时间：2012-11-07T12:34:17.587
> 
> 标签：sql-server, foreign-keys, constraints

What I want to do is when I delete a row from the parent table to keep the data in the child table.

Meaning that if I have a table department, which is the parent table with two columns - `depNo` and `depName`, and a child table with three columns - `emNo`, `emName` and `depNo (FK)`.

I want to be able to delete the row in the parent table, but to keep the one in the child table (in my case it is connected with licenses and is a good idea to keep track of it, even if the user is already deleted).

I guess `ON DELETE NO ACTION` won't work, because it will give me an error if I try to delete the row in the parent table.

`CASCADE` and `SET NULL` are not good in this case.

`SET Default` - it won't work because I can't make a default value - it could be different (and its 100% sure it will be).

Any ideas how to make it ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:50:22.240

保持外键列仍包含原始值的子数据的唯一方法是删除外键约束，这可能会导致添加不一致数据的风险。

我建议创建一个没有外键约束的新表，并在删除之前将子行复制到其中。

# android - Make Downloader which download file in background and upading progressbar

> ID：13269902
> 
> 赞同：1
> 
> 时间：2012-11-07T12:34:28.453
> 
> 标签：android, service

I want to develop file downloader app . which download list of file .when I add file to downloader list then its updating progress periodically. I close all activity and again I run the app then my app list all the current downloads with continuous progressbar

What should I do for that ?

I am using this async task for downloading File

```
class DownloadFileFromURL extends AsyncTask<String, String, String> {
            @Override
            protected void onPreExecute() {
                super.onPreExecute();
            }

            @Override
            protected String doInBackground(String... f_url) {
                int count;
                try {
                    URL url = new URL(f_url[0]);
                    URLConnection conection = url.openConnection();
                    conection.connect();
                    // getting file length
                    lenghtOfFile = conection.getContentLength();

                    // input stream to read file - with 8k buffer
                    InputStream input = new BufferedInputStream(
                            url.openStream(), 8192);
                    OutputStream output = null;

                    if (space_avaliable) {
                        File dir = new File(
                                Utill.saveFile(CustomGroupTabActivity.mTabHost
                                        .getContext()) + "/tocaonline");
                        if (!dir.exists()) {
                            dir.mkdirs();
                        }
                        // Output stream to write file
                        output = new FileOutputStream(
                                Utill.saveFile(CustomGroupTabActivity.mTabHost
                                        .getContext())
                                        + "/tocaonline/"
                                        + "test.mp3");

                        byte data[] = new byte[1024];

                        long total = 0;

                        while ((count = input.read(data)) != -1) {
                            total += count;
                            // publishing the progress....
                            // After this onProgressUpdate will be called
                            publishProgress(""
                                    + (int) ((total * 100) / lenghtOfFile));

                            // writing data to file
                            output.write(data, 0, count);
                        }

                        // flushing output
                        output.flush();
                    }

                    // closing streams
                    output.close();
                    input.close();

                } catch (Exception e) {
                    Log.e("Error: ", e.getMessage());
                }

                return null;
            }

            protected void onProgressUpdate(String... progress) {
                // setting progress percentage
                p_bar.setProgress(Integer.parseInt(progress[0]));
            }

            @SuppressWarnings("unchecked")
            @Override
            protected void onPostExecute(String file_url) {

            }
        } 
```

And when I click on add to download button then I am adding dynamic view to the linear layout.

```
LinearLayout lytParent = (LinearLayout) findViewById(R.id.boxset_parentview);
        LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        inflater = LayoutInflater.from(CustomGroupTabActivity.mTabHost
                .getContext());

        View convertview = inflater.inflate(R.layout.raw_set_detail, null);

final ProgressBar p_bar = (ProgressBar) convertview
                .findViewById(R.id.rawsetdetails_sync_progress);

lytParent.addView(convertview); 
```

It running well when my activity is active. but when I close all activity and again running this activity then I want to show actual downloading progress with active downloads.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:07:30.393

这是你如何实现它：

1) 运行后台服务进行下载。此[链接](http://www.androidcompetencycenter.com/2009/01/basics-of-android-part-iii-android-services/)为您提供服务的基础知识。它将使用线程池进行多个活动下载。它将以块的形式读取数据并将块读取事件发送到注册侦听器，以便活动可以更新其 UI。

2) 每当您想下载时，将请求发送到带有项目名称、项目 ID 和 http 链接的服务。服务会为每次下载保留这三件事以及下载的总大小和下载的字节数。

3) 现在，每当您启动活动时（让我们调用下载管理器屏幕），然后要求服务提供当前活动和排队下载。服务将提供下载项目的列表（项目名称、项目 ID、项目 http 链接、项目总大小和下载的字节数），您可以使用它来使用 ListView 创建视图。您可以使用项目总大小和下载字节数来创建进度条。

4) 向服务注册块读取事件。因此，服务会在每个块读取下载请求后通知活动，其中包含项目名称、项目 ID、项目 http 链接、项目总大小和下载的字节数。使用此信息更新活动中的项目列表，并通知适配器已更改的数据将更新列表视图。

5) 活动关闭时取消注册事件监听器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:43:44.570

我假设您正在使用 ListView。
在这种情况下，您必须添加以下代码`getView()`：
如果下载正在运行：显示进度条
否则：隐藏进度条。

那是因为如果可能，Android 会重用视图，因此视图可能仍然是 Visibile 错误的。

# javascript - New dynamic created div is not becoming draggable

> ID：13269907
> 
> 赞同：1
> 
> 时间：2012-11-07T12:34:33.227
> 
> 标签：javascript, ajax, draggable

I am creating new div's in seating chart, but the will not become draggable after they have been inserted.

Maybe someone can shine a light on it and make my new dynamically created div draggable.

```
$(document).ready(function() {

$("#addSeat").bind("click", function(e){

    $.getJSON("getrecord.php?format=raw&ticketid=1",

    function(data){

        $(".seat-element").clone(true).removeAttr("id").attr("id", data.id).appendTo("#glassbox").html(data.seatid).css({ "top": "10px", "left": "10px"});      

    });
}); 
```

});

```
Thanks Christopher, can you tell me how to do this? 
```

This is my draggable code:

```
 $(document).ready(function () {
    $(".seat-element").draggable({ 
            containment: '#glassbox', 
            scroll: false
     }).mousemove(function(){
                    var coord = $(this).position();
                    $("p:last").text( "left: " + coord.left + ", top: " + coord.top );
     }).mouseup(function(){ 
        var coords=[];
        var currentId = $(this).attr('id');
        //alert(currentId);
        var coord = $(this).position();
        var item={ coordTop:  coord.left, coordLeft: coord.top, coordId: currentId };
        coords.push(item);
        var order = { coords: coords };
        $.post('updatecoords.php', 'data='+$.toJSON(order), function(response){
        if(response == "success")
            $("#respond").html('<div class="success"style="text-align:center;">Seat Position has been saved to the database.</div>').hide().fadeIn(1000);
            setTimeout(function(){ $('#respond').fadeOut(2000); }, 2000);
        }); 
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:47:39.557

这里的关键部分不是您在问题中包含的部分，而是该代码上方的部分，在您引用的页面上 - 即您初始化可拖动插件的部分。

当在 DOM-ready 上调用时，可拖动插件仅适用于此时 DOM 中的元素。任何不在 DOM 中但后来添加的元素都不会因为它们具有相同的“类型”而自动变为可拖动的。要解决此问题，您必须在添加元素时初始化元素上的可拖动插件。

**更新：**

我还没有尝试过，但我想你可以像这样重组你的代码：

```
$(document).ready(function () {
    makeDraggable($(".seat-element"));
});

function makeDraggable (jQueryElm) {
    jQueryElm.draggable({ 
            containment: '#glassbox', 
            scroll: false
     }).mousemove(function(){
                    var coord = $(this).position();
                    $("p:last").text( "left: " + coord.left + ", top: " + coord.top );
     }).mouseup(function(){ 
        var coords=[];
        var currentId = $(this).attr('id');
        //alert(currentId);
        var coord = $(this).position();
        var item={ coordTop:  coord.left, coordLeft: coord.top, coordId: currentId };
        coords.push(item);
        var order = { coords: coords };
        $.post('updatecoords.php', 'data='+$.toJSON(order), function(response){
        if(response == "success")
            $("#respond").html('<div class="success"style="text-align:center;">Seat Position has been saved to the database.</div>').hide().fadeIn(1000);
            setTimeout(function(){ $('#respond').fadeOut(2000); }, 2000);
        }); 
    });
} 
```

然后，当您添加新元素时，您也可以将该元素传递给 makeDraggable 函数：

```
// Keep the newly added element in a variable
var elm = $(".seat-element").clone(true).removeAttr("id").attr("id", data.id).appendTo("#glassbox").html(data.seatid).css({ "top": "10px", "left": "10px"}); 
// Pass the element to makeDraggable
makeDraggable(elm); 
```

# java - ant getResourceAsStream null but ok in Eclipse

> ID：13269908
> 
> 赞同：3
> 
> 时间：2012-11-07T12:34:32.960
> 
> 标签：java, ant

I've been trying to fix this for ages but here goes : I have a text file that gets loaded fine when I run my java code with getResourceAsStream within Eclipse.

The text file is in the same package dir as the class that uses it. however , when I run the same code from command line with ant , getResourceAsStream returns null.

I figure it is class path related but I can't seem to get it going from tinkering with my build.xml or directory structure

Any help appreciated, thanks, Jamesie

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-10-31T13:14:47.523

我遇到了同样的问题，我花了一段时间才解决它。我还认为问题来自`getResourceAsStream()`，或来自参数中的相对路径，但**不**！

它比这简单得多：文件不存在。

您可以检查是否需要：转到您使用 ant 生成的*.jar 文件*，然后解压缩它（使用 7zip、WinRAR 或其他...）。您将看到您的 config.properties 文件不存在。

事实上，如果只是`<jar />`在您的*build.xml*文件（ant 的输入）中使用，它只会压缩*.java*文件！您还需要使用复制：

```
<target name="compile">
        <mkdir dir="${classes.dir}"/>
        <javac srcdir="${src.dir}" destdir="${classes.dir}" classpathref="classpath"/>
        <copy todir="${classes.dir}">
            <fileset dir="${res.dir}"
                     includes="**/*.properties,**/*.xml,**/*.png,**/*.jpg" />
            <!-- I advise you to also include .xml .jpg, ... or any file you need that doesn't end with .java--> 
        </copy>
</target> 
```

就是这样，您现在可以通过再次解压缩来检查 config.properties 是否包含在您的最终*.jar文件中。*

# javascript - 使用javascript在Web应用程序中冻结键盘

> ID：13269927
> 
> 赞同：1
> 
> 时间：2012-11-07T12:35:51.927
> 
> 标签：javascript, keyboard, keyboard-shortcuts

如何在 Web 应用程序中冻结键盘？我曾尝试冻结快捷方式，但它只显示警报，这是在冻结功能中定义的。但是冻结操作不起作用

```
function disableCtrlKeyCombination(e)
{
    //list all CTRL + key combinations you want to disable
    var forbiddenKeys = new Array('a', 'n', 'c', 'x', 'v', 'j');
    var key;
    var isCtrl;

    if(window.event)
    {
            key = window.event.keyCode;     //IE
            if(window.event.ctrlKey)
                    isCtrl = true;
            else
                    isCtrl = false;
    }

    else
    {
            key = e.which;     //firefox
            if(e.ctrlKey)
                    isCtrl = true;
            else
                    isCtrl = false;
    }

    //if ctrl is pressed check if other key is in forbidenKeys array
    if(isCtrl)
    {
        for(i = 0 ; i < forbiddenKeys.length ; i++)
            {

                    //case-insensitive comparation
                    if(forbiddenKeys[i].toLowerCase() == String.fromCharCode(key).toLowerCase())
                    {
                             alert('Key combination CTRL + '
                                    +String.fromCharCode(key)
                                    +' has been disabled.'); 
                            return false;
                    }
            }
    }       
    return true; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:39:32.927

取消 keydown 事件以防止命令通过

```
document.addEventListener("keydown", function(e){e.preventDefault();return false;}, false); 
```

# php - 寻找合适的 preg_match 正则表达式

> ID：13269928
> 
> 赞同：-2
> 
> 时间：2012-11-07T12:35:53.287
> 
> 标签：php, preg-match

我在编码时遇到了一个小问题。我有一个文本字符串

```
"This is a {cat} with {big} eyes." 
```

我想要做的是，我想要一个合适的 preg_match 正则表达式，这样我就可以从一个句子中提取用大括号写的单词。我将非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:46:52.087

```
$str="This is a {cat} with {big} eyes";
echo preg_replace("/[^a-zA-Z\s]/", "",$str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:38:41.287

那比较简单...

```
preg_match_all("/\{[^}]+\}/", $str, $matches); 
```

[爱迪生](http://ideone.com/lIrtNl)。

检查`$matches`数组。如果您不想将大括号作为匹配的一部分，则可以使用捕获组 ( `"/\{([^}]+)\}/"`) 或使用其他方法剪掉大括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T12:39:46.113

这个怎么样：`/\{(.*?)\}/`

那应该工作:)

# python - PyQt 进度条

> ID：13269936
> 
> 赞同：12
> 
> 时间：2012-11-07T12:36:22.300
> 
> 标签：python, multithreading, qt, pyqt, qprogressbar

使用以下代码时，我的应用程序会在几秒钟后停止。我所说的摊位是指挂起。我从 Windows 收到一个窗口，提示等待或强制关闭。

我可能会补充说，这只发生在我单击进度条窗口内或单击进度条窗口外部时，它会失去焦点。如果我开始这个例子并且不碰任何东西，它就会像它应该的那样工作。

```
from PyQt4 import QtCore
from PyQt4 import QtGui

class ProgressBar(QtGui.QWidget):
    def __init__(self, parent=None, total=20):
        super(ProgressBar, self).__init__(parent)
        self.name_line = QtGui.QLineEdit()

        self.progressbar = QtGui.QProgressBar()
        self.progressbar.setMinimum(1)
        self.progressbar.setMaximum(total)

        main_layout = QtGui.QGridLayout()
        main_layout.addWidget(self.progressbar, 0, 0)

        self.setLayout(main_layout)
        self.setWindowTitle("Progress")

    def update_progressbar(self, val):
        self.progressbar.setValue(val) 
```

像这样使用它：

```
app = QtGui.QApplication(sys.argv)
bar = ProgressBar(total=101)
bar.show()

for i in range(2,100):
    bar.update_progressbar(i)
    time.sleep(1) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-07T17:53:07.070

您需要允许在循环运行时处理事件，以便应用程序可以保持响应。

更重要的是，对于长时间运行的任务，您需要为用户提供一种在循环启动后停止循环的方法。

一种简单的方法是使用计时器启动循环，然后在循环运行时定期调用[qApp.processEvents](https://doc.qt.io/qt-4.8/qcoreapplication.html#processEvents)。

这是一个演示脚本：

```
import sys, time
from PyQt4 import QtGui, QtCore

class ProgressBar(QtGui.QWidget):
    def __init__(self, parent=None, total=20):
        super(ProgressBar, self).__init__(parent)
        self.progressbar = QtGui.QProgressBar()
        self.progressbar.setMinimum(1)
        self.progressbar.setMaximum(total)
        self.button = QtGui.QPushButton('Start')
        self.button.clicked.connect(self.handleButton)
        main_layout = QtGui.QGridLayout()
        main_layout.addWidget(self.button, 0, 0)
        main_layout.addWidget(self.progressbar, 0, 1)
        self.setLayout(main_layout)
        self.setWindowTitle('Progress')
        self._active = False

    def handleButton(self):
        if not self._active:
            self._active = True
            self.button.setText('Stop')
            if self.progressbar.value() == self.progressbar.maximum():
                self.progressbar.reset()
            QtCore.QTimer.singleShot(0, self.startLoop)
        else:
            self._active = False

    def closeEvent(self, event):
        self._active = False

    def startLoop(self):
        while True:
            time.sleep(0.05)
            value = self.progressbar.value() + 1
            self.progressbar.setValue(value)
            QtGui.qApp.processEvents()
            if (not self._active or
                value >= self.progressbar.maximum()):
                break
        self.button.setText('Start')
        self._active = False

app = QtGui.QApplication(sys.argv)
bar = ProgressBar(total=101)
bar.show()
sys.exit(app.exec_()) 
```

**更新**

假设您使用的是 Python 的 C 实现（即 CPython），则此问题的解决方案*完全*取决于必须与 GUI 并发运行的任务的性质。更根本的是，它是由具有[全局解释器锁 (GIL)](http://docs.python.org/2/glossary.html#term-global-interpreter-lock)的 CPython 确定的。

我不会尝试对 CPython 的 GIL 进行任何解释：相反，我会简单地推荐观看 Dave Beazley 的这个出色的[PyCon 视频](http://blip.tv/pycon-us-videos-2009-2010-2011/pycon-2010-understanding-the-python-gil-82-3273690)，然后就这样吧。

* * *

通常，当尝试同时运行 GUI 和后台任务时，要问的第一个问题是：任务是 IO-bound 还是 CPU-bound？

如果它是 IO 绑定的（例如访问本地文件系统、从 Internet 下载等），那么解决方案通常非常简单，因为 CPython 总是为 I/O 操作释放 GIL。后台任务可以简单地[异步](http://docs.python.org/2/library/asyncore.html#module-asyncore)完成，或者由[工作线程](https://stackoverflow.com/a/39999236/984421)执行，不需要做任何特别的事情来保持 GUI 响应。

主要困难出现在 CPU 密集型任务上，当有第二个问题要问时：可以将任务分解为一系列小步骤吗？

如果可以，则解决方案是定期向 GUI 线程发送请求以处理其当前的未决事件堆栈。上面的演示脚本是这种技术的粗略示例。更常见的是，该任务将在一个单独的工作线程中执行，该工作线程会在任务的每个步骤完成时发出一个 gui-update 信号。（注意：确保工作线程从不尝试任何与 GUI 相关的操作本身很重要）。

但是如果*不能*将任务分解成小步骤，那么通常的线程类型的解决方案都不会起作用。无论是否使用线程，GUI 都会冻结直到任务完成。

对于最后一个场景，唯一的解决方案是使用单独的*进程*，而不是单独的线程——即使用[多处理](http://docs.python.org/2/library/multiprocessing.html#module-multiprocessing)模块。当然，这个解决方案只有在目标系统有多个 CPU 内核可用时才有效。如果只有一个 CPU 内核可以使用，那么基本上没有什么可以帮助的（除了切换到 Python 的不同实现，或完全不同的语言）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:02:10.340

当您进行 gui 编程时，您需要使用某种形式的多线程，您将拥有一个工作线程和一个更新 gui 并响应鼠标和键盘事件的线程。有很多方法可以做到这一点。我建议你看看这个[QProgressBar 教程](http://zetcode.com/tutorials/pyqt4/widgets/)，它有一个关于如何使用 QProgressBar 的出色工作示例。

在本教程中，他们使用 QBasicTimer，这是一种将控制权交还给主线程的方式，以便它可以响应 GUI 事件。通过`time.sleep`在您的代码中使用，您将阻塞唯一正在运行的线程一秒钟。

# c# - 使用带有 LinkBut ton 和 ViewState 的 ObjectDataSource 对 ListView 进行排序

> ID：13269937
> 
> 赞同：0
> 
> 时间：2012-11-07T12:36:23.600
> 
> 标签：c#, asp.net, listview, viewstate, objectdatasource

我正在使用 ListView 来显示分页数据：

```
<asp:ListView ID="listOfItems" runat="server" DataSourceID="ItemsDataSource" EnableModelValidation="True" InsertItemPosition="FirstItem" ItemPlaceholderID="ItemRowContainer">
    <LayoutTemplate>
        <div class="tablecontainer">
            <div class="pagination-top">
                <custom:TablePaginationControl ID="TablePaginationControl1" runat="server" ControlID="listOfItems" ShowPageSizeList="true" />
            </div>
            <table class="list-view">
                <tr>
                    <th class="first-column" width="350px">
                        <asp:LinkButton ID="SortByName" runat="server" CommandArgument="Name" CommandName="SortMainList" OnCommand="SortItems" Text="<%$ Resources:Name %>"></asp:LinkButton>
                    </th>
                    ...
                </tr>
                <tbody>
                    <tr runat="server" id="ItemRowContainer" />
                </tbody>
            </table>
        </div>
    </LayoutTemplate>
    ...
</asp:ListView> 
```

数据源定义：

```
<asp:ObjectDataSource ID="ItemsDataSource" runat="server" EnablePaging="True" InsertMethod="AddItems" SelectCountMethod="SelectItemsCount" SelectMethod="SelectItems" TypeName="SHLCentral.TheLibrary.Web.View.DocumentManagementControl, ClientPortal.Web, Version=1.0.0.0, Culture=neutral, PublicKeyToken=cd2852a10d692fb9" UpdateMethod="UpdateItems">
    ...
</asp:ObjectDataSource> 
```

背后的相关代码是由这两种方法组成的：

```
public IEnumerable<ListDocumentsResult> SelectItems(
    int maximumRows,
    int startRowIndex)
{
    var results = Controller.ListDocuments(new ListDocumentsRequest());

    PropertyInfo sortProperty;
    try
    {
        sortProperty = typeof (ListDocumentsResult).GetProperty((string) ViewState["mainListSortColumn"]);
    }
    catch
    {
        sortProperty = null;
    }
    Func<ListDocumentsResult, object> sortFunction = sortProperty == null
                            ? (Func<ListDocumentsResult, object>) (ldr => ldr.LastUpdatedDate)
                            : (ldr => sortProperty.GetValue(ldr, new object[0]));

    return
        (sortProperty == null || !((bool) ViewState["mainListSortAsc"])
             ? results.OrderByDescending(sortFunction)
             : results.OrderBy(sortFunction))
            .Skip(startRowIndex)
            .Take(maximumRows);
}

protected void SortItems(object sender, CommandEventArgs e)
{
    if (e.CommandName == "SortMainList")
    {
        var sortColumn = (string) e.CommandArgument;
        if ((string)ViewState["mainListSortColumn"] == sortColumn)
        {
            ViewState["mainListSortAsc"] = !(bool)ViewState["mainListSortAsc"];
        }
        else
        {
            ViewState["mainListSortAsc"] = true;
            ViewState["mainListSortColumn"] = sortColumn;
        }
        DataBind();
    }
} 
```

所以我的意图是：当用户单击`LinkButton`“名称”列标题中包含的内容时（为了清楚起见，我只留下一列），`SortItems`调用该方法：它将排序的列名称和排序顺序设置为`ViewState`，然后重新加载的`ListView`使用`DataBind`方法。在 的 Select 方法中`ObjectDataSource`，我们读取这些`ViewState`值并使用它们对数据进行排序。

在所有这些方法上设置断点，当我单击时，我可以看到有以下调用序列`LinkButton`：

*   `OnLoad`
*   `SortItems`
*   `SelectItems`

我遇到的问题是，当我到达该`SelectItems`方法时，它`ViewState`是完全空的（它有 0 个键）：如果我在页面的 Load 方法上设置一个断点，我会看到包含所有这些的控件只加载一次。该`DataBind`方法似乎没有触发控件的任何加载，它似乎只是触发了`SelectItems`控件的新实例的方法（这意味着如果`ViewState`我在方法中设置了一个实例字段而不是 using ，`SortItems`则该字段为 null进入`SelectItems`方法时）。

我确信`ViewState`页面上是活动的（例如，我可以`ViewState`使用 Firefox 扩展在浏览器端找到键）。

关于页面/控件的生命周期，我不太清楚。有人可以解释一下对我来说是什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T13:39:25.397

存在很多非常简单的方法。

`CommandName`首先，您将内置名称而不是 custom放入排序链接按钮。名字是`Sort`。

你有然后

```
 <asp:LinkButton ID="SortByName" runat="server" CommandArgument="Name" CommandName="Sort" /> 
```

然后，在您的`ObjectDataSource`身上添加`SortParameterName`类似于`OrderBy`：

```
 <ObjectDataSource .... SortParameterName="OrderBy" /> 
```

然后将数据提供者方法修改为：

```
 public IEnumerable<ListDocumentsResult> SelectItems(
   string OrderBy,
   int maximumRows,
   int startRowIndex) 
```

`Name`数据源将根据命令参数`DESC`（`ListView`必须重新发明这个！）

然后，您不需要这个丑陋的代表按字符串为 linq 排序。相反，下载 Dynamic Linq 库：

[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

找到该`Dynamic.cs`文件，将其包含在您的项目中，它会添加一堆额外的 linq 运算符，包括`OrderBy`接受字符串和自动支持`DESC`（！）。

那你就

```
 public IEnumerable<ListDocumentsResult> SelectItems(
   string OrderBy,
   int maximumRows,
   int startRowIndex)
 {

     Controller.ListDocuments(new ListDocumentsRequest())
        .OrderBy(OrderBy)
        .Skip(startRowIndex)
        .Take(maximumRows);
 } 
```

这很简单！

尽管动态 linq 中存在一个小错误（或不便），但请注意 - 当排序顺序为空时，它会引发异常。

然后找到此代码（第 47 行及以下）

```
 public static IQueryable OrderBy(this IQueryable source, string ordering, params object[] values) {
        if (source == null) throw new ArgumentNullException("source");
        if (ordering == null) throw new ArgumentNullException("ordering"); 
```

并手动将其更改为

```
 public static IQueryable OrderBy(this IQueryable source, string ordering, params object[] values) {
        if ( string.IsNullOrEmpty( ordering ) ) return source;
        if (source == null) throw new ArgumentNullException("source");
        if (ordering == null) throw new ArgumentNullException("ordering"); 
```

完毕。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T13:41:46.500

如果`SelectMethod`不是静态的，`ObjectDataSource`控件将创建一个指定类型的新实例`TypeName`并调用该实例上的方法。

您需要将排序表达式的参数添加到您的 select 方法并在上设置[`SortParameterName`属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasource.sortparametername.aspx)`ObjectDataSource`，或者您需要处理[`ObjectCreating`事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasource.objectcreating.aspx)并将 设置`ObjectInstance`为现有控件实例。

# ruby-on-rails - Rails2.3.8 Resque.enqueue 不会将作业转发到后台

> ID：13269940
> 
> 赞同：1
> 
> 时间：2012-11-07T12:36:29.010
> 
> 标签：ruby-on-rails, resque

我正在尝试设置 Resque。我在我的 environment.rb 中有以下内容

```
config.gem "redis", :version =>  "3.0"
config.gem "redis-namespace", :version => "1.2.1", :lib => "redis/namespace"
config.gem "resque", :version => "1.23.0" 
```

在开始之前，我跟随[asciicast](http://railscasts.com/episodes/271-resque?view=asciicast)`resque-web`。在我的控制器中，我有

```
Resque.enqueue(SnippetHighlighter, @snippet.id) 
```

就像在 asciiccast 中给出的例子一样。但是，我的进程没有转发到后台，而是转发到 rails 服务器。根据 asciicast 的说法，我不应该`rails server`在 resque 中出现错误。

此外，当我启动我的 resque-web 时，我收到以下错误：

```
/usr/lib/ruby1.8/net/http.rb:560: in 'initialize': getaddrinfo: Name or 
service not known(SocketError) 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:29:43.040

您关注的 railscasts 使用[rails 3.0.9](https://github.com/railscasts/271-resque/blob/master/coderbits-after/Gemfile.lock#L50)和[resque 1.17.1](https://github.com/railscasts/271-resque/blob/master/coderbits-after/Gemfile.lock#L69)。

我建议您升级 rails 版本或使用与 rails 2.3.8 兼容的较低版本的 resque，因为这似乎是一个不兼容的问题。

# eclipse - QueryDsl Maven 插件缺少一个类

> ID：13269942
> 
> 赞同：1
> 
> 时间：2012-11-07T12:36:37.410
> 
> 标签：eclipse, maven, querydsl

我正在尝试配置我的 spring 项目以使用查询 dsl。maven 版本的插件有问题，我收到以下消息：

```
[INFO] Internal error in the plugin manager executing goal 'com.mysema.maven:apt-maven-plugin:1.0.4:process': Unable to load the mojo 'com.mysema.maven:apt-maven-plugin:1.0.4:process' in the plugin 'com.mysema.maven:apt-maven-plugin'. A required class is missing: org/codehaus/plexus/util/Scanner
org.codehaus.plexus.util.Scanner 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:03:47.743

似乎缺少依赖项。

尝试将此添加到您的插件依赖项列表中：

```
<dependency>
    <groupId>org.codehaus.plexus</groupId>
    <artifactId>plexus-utils</artifactId>
    <version>3.0.4</version>
</dependency> 
```

像这样：

```
<plugin>
    <groupId>com.mysema.maven</groupId>
    <artifactId>apt-maven-plugin</artifactId>
    <version>1.0.4</version>
    <executions>
        <execution>
            <goals>
                <goal>process</goal>
            </goals>
            <configuration>
                <outputDirectory>target/generated-sources/java</outputDirectory>
                <processor>com.mysema.query.apt.jpa.JPAAnnotationProcessor</processor>
            </configuration>
        </execution>
    </executions>
    <dependencies>
        <dependency>
            <groupId>org.codehaus.plexus</groupId>
            <artifactId>plexus-utils</artifactId>
            <version>3.0.4</version>
        </dependency>
    </dependencies>
</plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:07:26.993

此依赖问题已在 1.0.6 中修复

[https://github.com/mysema/maven-apt-plugin/issues/12](https://github.com/mysema/maven-apt-plugin/issues/12)

我将更新 Querydsl 文档

# javascript - asp.net如何打印动态表

> ID：13269947
> 
> 赞同：0
> 
> 时间：2012-11-07T12:36:45.203
> 
> 标签：javascript, asp.net

我在文字下面有这个来显示我的动态表

```
<div id="Print">     
    <asp:Literal ID="Literal1" runat="server"></asp:Literal> 
</div> 
```

我放置一个图像按钮来打印

```
<asp:ImageButton ID="ImageButton5" runat="server" 
ImageUrl="~/Image/Print_Icon_Design.jpg" Height="25px" 
Width="27px" style="margin-left:20px" OnClientClick="CallPrint"/> 
```

我有下面的代码要打印，但它不工作你能帮忙吗

```
<script language="javascript" type="text/javascript">
    function CallPrint(Print) {
        var prtContent = document.getElementById(Print);
        var WinPrint = window.open('', '', 'left=0,top=0,width=400,height=400,toolbar=0,scrollbars=0,status=0');
        WinPrint.document.write(prtContent.innerHTML);
        WinPrint.document.close();
        WinPrint.focus();
        WinPrint.print();
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:41:11.627

跳过函数的参数 Print 并添加更改 getElementById

```
var prtContent = document.getElementById('Print'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:41:27.663

您需要`Print`在引号内加上您的函数缺少最后的大括号。此外，您不需要 Print 参数（因为您没有从 ImageButton 传递它并且您已经使用 getElementById() 检索它：

```
function CallPrint() {
            var prtContent = document.getElementById("Print");
            var WinPrint = window.open('', '', 'left=0,top=0,width=400,height=400,toolbar=0,scrollbars=0,status=0');
            WinPrint.document.write(prtContent.innerHTML);
            WinPrint.document.close();
            WinPrint.focus();
            WinPrint.print();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T12:43:02.740

试试这个

```
<script language="javascript" type="text/javascript">

function CallPrint() {
                var prtContent = document.getElementById('Print');
                var WinPrint = window.open('', '', 'left=0,top=0,width=400,height=400,toolbar=0,scrollbars=0,status=0');
                WinPrint.document.open();
                WinPrint.document.write(prtContent.innerHTML);
                WinPrint.document.close();
                WinPrint.focus();
                WinPrint.print();
                return false;
}
 </script> 
```

和

```
<asp:ImageButton ID="ImageButton5" runat="server" 
                        ImageUrl="~/Image/Print_Icon_Design.jpg" Height="25px" 
            Width="27px" style="margin-left:20px" OnClientClick="return CallPrint()"/> 
```

返回 false 到 OnClientClick 将阻止回发

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T12:49:45.510

prtContent.innerHTML 将为空，因为您使用的是 Print 而不是 'Print'

```
 function CallPrint() {
        var prtContent = document.getElementById('Print');
        var htmlcontent = prtContent.innerHTML;
        var WinPrint = window.open('', '', 'left=0,top=0,width=400,height=400,toolbar=0,scrollbars=0,status=0');
        WinPrint.document.write(htmlcontent);
        WinPrint.document.close();
        WinPrint.focus();
        WinPrint.print();
    } 
```

# gdb - 设备需要交叉 gdb

> ID：13269948
> 
> 赞同：13
> 
> 时间：2012-11-07T12:36:53.660
> 
> 标签：gdb, embedded-linux

我在 Ubuntu 12.04 上安装了**gcc-arm-linux-gnueabihf**交叉编译器，现在我可以为嵌入式设备构建程序了。我在哪里可以找到用于调试的交叉 gdb？

gcc-arm-linux-gnueabihf 参考在相关软件包列表中包含 gdb-arm-linux-gnueabihf，这似乎是我正在寻找的调试器。但是这个包不可用。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-07T18:29:24.027

我建议从[Linaro 工具链](https://launchpad.net/linaro-toolchain-binaries)而不是 Ubuntu 存储库中获取**gdb 。**[从这里](https://launchpad.net/linaro-toolchain-binaries/trunk/2012.10)下载 gcc-linaro-arm-linux-gnueabihf-4.7-2012.10-20121022_linux.tar.bz2你会发现：

*   `bin/arm-linux-gnueabihf-gdb`
*   `arm-linux-gnueabihf/debug-root/usr/bin/gdbserver`

后者是静态链接的，当然是为 ARM Linux 构建的。

假设您已经为目标板设置了网络，复制`gdbserver`到它并运行：

```
$ gdbserver --multi :2345 
```

在您的开发机器上，运行：

```
$ arm-linux-gnueabihf-gdb
(gdb) target extended BOARD-IP-ADDR:2345
(gdb) set remote exec-file /bin/true
(gdb) run 
```

并且您已启动并运行远程交叉调试。

Linaro 错误跟踪器、邮件列表和网络论坛的链接在[这里](https://www.linaro.org/developers/)。从他们的发行说明中可以看出，他们在 ARM Linux 工具链、内核、QEMU 开发中非常活跃。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-24T11:24:28.667

您需要安装 gdb-multiarch 软件包，然后运行 ​​gdb-multiarch 命令来远程调试您的目标。

# css - div内的浮动元素

> ID：13269960
> 
> 赞同：0
> 
> 时间：2012-11-07T12:37:44.350
> 
> 标签：css

我想制作一个包含产品信息的 DIV。在 DIV 中，产品描述需要环绕产品图像。我使用 align="left" 作为图像。

我的问题是当只有 1 行产品描述时，DIV 的高度只有 1 行，使图像在 Firefox 1.5 中向下扩展到 DIV 边框之外。（IE 扩展 DIV 以包含图像）

一个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:47:51.477

尝试将此添加到您的 div

```
overflow: hidden; 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:48:13.530

听起来您需要清除 DIV 的内容。一个带有 clear:both 的附加 DIV 元素，就在容器的末尾。或者您可以使用 CSS clearfix [http://www.webtoolkit.info/css-clearfix.html](http://www.webtoolkit.info/css-clearfix.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T12:52:52.517

没有看到代码，很难说，但听起来你应该使用`float:left`而不是`align:left`图像的样式。此外，`div`元素通常应该扩展以适应包含的图像，所以我想那里有一些额外的样式可供查看。

# ruby-on-rails - Ruby on Rails：重新排序复选框标签

> ID：13269961
> 
> 赞同：1
> 
> 时间：2012-11-07T12:37:45.797
> 
> 标签：ruby-on-rails, ruby, list, view, controller

我有一个应用程序，用户可以在其中将项目输入数据库。其中一个字段允许用户选择多种技术。我希望技术列表按字母顺序显示，因为目前，它们按输入数据库的顺序显示。

这是我在项目控制器中的新操作：

```
def new
    @project = Project.new
        @technol = Technol.new(params[:tech])

        @all_technols = Technol.all
        tech_ids = params[:technols][:id].reject(&:blank?) unless params[:technols].nil?

        @project_technol = @project.projecttechnols.build

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @project }
    end
  end 
```

这是我的新观点的一部分：

```
<div class="tech" STYLE="text-align: left;">
  <b>Technologies:</b>
  <style>
    .split { text-align:left; }
  </style>

  <p><ul> 

  <% for technol in Technol.all %> 
   <li class="split"> 
    <%= check_box_tag "project[technol_ids][]", technol.id,  @project.technols.include?(technol) %> 
    <%= technol.tech %> 
   </li> 

  <% end %> 
 </ul> 
 </p> 
```

有没有人有任何想法？我是 Rails 新手，所以在尝试回答时请记住这一点。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T13:21:04.697

您应该订购您的技术列表：

```
@all_technols = Technol.order('tech ASC') # in the controller's action 
```

然后在视图中使用这个变量而不是`Technol.all`第二次调用：

```
<% @all_technols.each do |technol| %> 
  your code without changes here
<% end %> 
```

# asp.net - 如何将表值传递给asp.net中的viewstate

> ID：13269963
> 
> 赞同：1
> 
> 时间：2012-11-07T12:37:52.337
> 
> 标签：asp.net, viewstate

我从数据库中获取了一些值，例如用户名、用户全名、用户 ID、用户登录。在当前场景中检查所有这些细节`page_load`，它多次访问数据库。为了避免这种情况，希望同时获取所有这些值并将它们存储在视图状态中以多次使用它而无需为该会话访问服务器。如何将表行值传递给视图状态？使用 VS2010，使用 sql server 2008 在 asp.net 3.5 中编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:40:27.230

只需将您的数据行存储在视图状态中

```
ViewState["UserdetailRow"] = DataTable.Row[0]; 
```

把它拿回来

```
 if(ViewState["UserdetailRow"] != null)
     DataRow dr = ViewState["UserdetailRow"] as DataRow; 
```

# html - 如何在html中水平设置元素？

> ID：13269964
> 
> 赞同：0
> 
> 时间：2012-11-07T12:37:56.900
> 
> 标签：html, css

如何在一行中设置0和like？

```
 <span>
                <div id="count">0</div>
                <a>Like</a>
            </span> 
```

我尝试的是：http: [//jsfiddle.net/ZzXru/5/](http://jsfiddle.net/ZzXru/5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:41:53.190

```
#count{
    display:inline;
} 
```

或没有 css，（即使用 span 和 div 的标准形式）

```
<span id='count'>0</span>
<a>Like</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:41:53.700

切勿将块级元素嵌套在内联元素中 您将`div`元素嵌套在`span`元素中。我只是稍微修改了你的 HTML

```
<span>
     <span id="count">0</span>
     <a>Like</a>
</span> 
```

**[看演示](http://jsfiddle.net/ZzXru/6/)**

**[更多关于块元素](https://developer.mozilla.org/en-US/docs/HTML/Block-level_elements)**

**[更多关于内联元素](https://developer.mozilla.org/en-US/docs/HTML/Inline_elements)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T12:42:18.113

添加`#count { display: inline; }`到您的 CSS。

在行动：http: [//jsfiddle.net/hkEA5/](http://jsfiddle.net/hkEA5/)

# objective-c - 如何让 UIButton 检测到它被按下？

> ID：13269970
> 
> 赞同：0
> 
> 时间：2012-11-07T12:38:17.370
> 
> 标签：objective-c, uiviewcontroller, uibutton

我有一个`GameViewController`班级和一个`GameBoardView`班级。

在`GameViewController`我从 class 中创建*n X m 个*对象`CSquare`。这将符合游戏板。这些对象被绘制在屏幕上（并实际填充它），因为对于每个正方形，我都会这样做`[self.view addSubview: square]`。

`GameViewController`是`GameBoardView`的代表。在里面`GameBoardView`我已经实现了该`touchesEnded`方法，这里有一条消息发送给委托（即`GameViewController`），以便将“控制”转移回`GameViewController`. 所以我从那里捕获“触摸”`GameBoardView`并将它们发送到`GameViewController`以便处理那里的任何方法。

当我从情节提要创建一个`UIButton`名为`settingsButton`. 我希望`settingsButton`它位于 GameBoard 的顶部，以便始终可以按下它。

但是，即使我在 中创建了一个出口`IBOutlet UIButton *settingsButton`和动作`(IBAction)settingsButtonPressed:(id)sender`，`GameViewController`每当我触摸屏幕时，触摸都会被 捕获`touchesEnded`，并且它永远不会检测到“设置按钮”被按下。实际上，该操作`settingsButtonPressed`从未被调用。

我尝试了几件事：

*   在创建所有方块并将其作为子视图添加到 的视图**后**，将其设置`settingsButton`为第一响应者。没用。`[_settingsButton becomeFirstResponder];` **`GameViewController`**
***   做`[self.view bringSubviewToFront:_settingsButton];`。**

 **它们都不起作用。知道我做错了什么吗？

**更新：**我设法让它工作，并意识到我的错误在哪里。

在`viewDidLoad`我无意中创建了两个 UIView：

```
GameBoardView *View = (GameBoardView*)self.view;
View.delegate = self;
(...)
GameBoardView *GBView = [[GameBoardView alloc] initwithFrame:frame];
[self.view addSubview:GBViwe]; 
```

我仍然不明白为什么`[self.view bringSubviewToFron:_SettingsButton];`使用上面的代码不能正常工作。但是，删除与 GBView 相关的行使一切正常。

多谢大家的评价。**

# android - 即使使用 hack，ipad 和 android 上的 Twitter Bootstrap 下拉菜单也无法正常工作

> ID：13269971
> 
> 赞同：7
> 
> 时间：2012-11-07T12:38:24.363
> 
> 标签：android, ipad, twitter-bootstrap

我在 ipad 和 android 上访问我的软件时遇到问题。这是在 ipad 上不起作用的 html。我无法点击子项

```
<div class="btn-group">
    <button class="btn dropdown-toggle" data-toggle="dropdown">Export <span class="caret"></span></button>
    <ul class="dropdown-menu">
        <#if  print?exists>
            <li><a href="javascript:print('${print}');">Print in PDF</a></li>
        </#if>
        <#if  printList?exists>
            <li><a href="javascript:print('${printList}');">Print list in PDF</a></li>
        </#if>
        <li><a href="javascript:exportListAt('${targetList}', 2);">Export to Excel</a></li>
        <li><a href="javascript:exportListAt('${targetList}', 1);">Export to CVS</a></li>
        <li><a href="javascript:exportListAt('${targetList}', 3);">Export to XML</a></li>
    </ul>
</div> 
```

我已经破解了这个 html

```
jQuery(document).ready( function (){
            jQuery('.dropdown-toggle')
                .on('touchstart.dropdown', '.dropdown-menu', function (e) { e.stopPropagation(); })
                .on('touchstart.dropdown', '.dropdown-submenu', function (e) { e.preventDefault(); })
    }) 
```

[当我在 ipad 和 android 上访问引导](http://twitter.github.com/bootstrap/components.html#buttonDropdowns)站点时也会发生此错误。

我能做些什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T15:24:22.120

最近，Bootstrap 2.2.2 发布了，您的问题是已修复的众多问题之一。

因此，一个好的解决方案是将您的 Bootstrap 版本更新到可用的最新版本。

查看[更新日志](http://blog.getbootstrap.com/2012/12/08/bootstrap-2-2-2-released/)，或直接[下载最新的引导程序](http://twitter.github.com/bootstrap/customize.html)

我还写了一篇关于这个问题的简短[博客文章](http://forwebonly.com/fix-for-twitter-bootstrap-dropdown-on-ipad-and-iphone/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:47:15.660

我相信您应该使用 a `a`element 而不是 a `button`，例如 bootstrap docs：

```
<div class="btn-group">
  <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
    Action
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu">
    <!-- dropdown menu links -->
  </ul>
</div> 
```

关于错误本身，你应该看看[这个问题](https://github.com/twitter/bootstrap/issues/4550)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-29T10:27:51.027

在此处查看有关此问题的讨论：[https](https://github.com/twbs/bootstrap/issues/9543) ://github.com/twbs/bootstrap/issues/9543 解决方案：[https](https://github.com/twbs/bootstrap/commit/c0eabdda9fd8e97f44117bd4bd77dd1344039024) ://github.com/twbs/bootstrap/commit/c0eabdda9fd8e97f44117bd4bd77dd1344039024 原来是 Bootstrap 问题。

# css - 火狐css图像

> ID：13269979
> 
> 赞同：0
> 
> 时间：2012-11-07T12:39:02.090
> 
> 标签：css, image-resizing

Firefox img 显示有问题。我的页面包含产品描述：

```
<article id="productPhoto">
    <img id="prodImg" src="prova.jpg" />
</article>
<article id="productDesc">
    <h3 id="prodName"></h3>
    <h3 id="prodDesc"></h3>
</article> 
```

CSS是这样的：

```
#productPhoto{
    float: left;
    width: 50%;
    height: 81%;
    text-align: center;
}
#productPhoto img{
    height: 80%;
}
#productDesc{
    float: right;
    width: 50%;
}
#prodName{
    font-size: xx-large;
    padding: 10px;
} 
```

现在，img prova.jpg 非常大（宽度：2676px，高度：2068px）。使用 Chrome，img 的大小调整为#productPhoto 的 80%，但 firefox 没有，所以如果我在 Firefox 中看到我的页面，img 是巨大的！！！:( 一些建议？

谢谢你，卢卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:04:07.153

尝试这个

```
 <article id="productPhoto">
    <div class"imgcontainer">
    <img id="prodImg" src="prova.jpg" />
    </div>
    </article>
    <article id="productDesc">
    <h3 id="prodName"></h3>
    <h3 id="prodDesc"></h3>
    </article> 
```

CSS

```
 .imgcontainer{
    witdh:80%;
    margin:0 10%;
    background-image:url(' background: url(prova.jpg') no-repeat center center fixed;
    -webkit-background-size: cover; /*for webKit*/
    -moz-background-size: cover; /*Mozilla*/
    -o-background-size: cover; /*opera*/
    background-size: cover; /*generic*/

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:44:19.657

尝试为您的图像设置最大值：

```
#productPhoto img{
    max-height: 80%;
    max-width: 100%;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T12:50:20.990

您可以将图像高度以像素为单位吗：-

```
#productPhoto img{
   height:100px;
} 
```

或者，如果您想以百分比给出，安迪建议也将起作用。

或者，您可以为 Exe 指定以像素为单位的父高度：-

```
#productPhoto{
    float: left;
    width: 50%;
    height: 200px;
    text-align: center;
}
#productPhoto img{
  height:50%;

} 
```

# visual-studio - 如何在 Visual Studio 2012 中手动安装 vsix (2011)？

> ID：13269980
> 
> 赞同：5
> 
> 时间：2012-11-07T12:39:01.633
> 
> 标签：visual-studio, visual-studio-2012

我正在尝试在 VS2012 中安装 vsix 加载项。但是看起来这个加载项仅适用于 VS2010。

有没有办法手动安装或强制它在 2012 年工作？

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-22T21:04:24.903

VSIX 只是一个 zip 存档。解压，找到文件`extension.vsixmanifest`。这是一个 XML 文件，打开它。找到该部分`SupportedProducts`。它应该如下所示：

```
 <SupportedProducts>
        <VisualStudio Version="10.0">
            <Edition>Ultimate</Edition>
            <Edition>Premium</Edition>
            <Edition>Pro</Edition>
        </VisualStudio>
    </SupportedProducts> 
```

复制粘贴该`VisualStudio`部分并将`Version`粘贴片段上的属性更新为`11.0`.

将内容打包回 zip 存档。确保存档具有 VSIX 扩展名。你完成了。

# php - CSS 路径是 php 中 Url 重写的变化

> ID：13269984
> 
> 赞同：0
> 
> 时间：2012-11-07T12:39:12.597
> 
> 标签：php, css, .htaccess

当我使用 htaccess 文件时，没有加载 CSS 文件。任何人都可以为我提供 CSS 开始工作的代码吗？

.htaccess 文件的代码：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule ^products/([a-zA-Z]+)$ /products/$1 [R]
RewriteRule ^products/([a-zA-Z]+)/$ productinfo.php?prodID=$1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T23:42:29.730

**只要存在**具有该路径的文件或目录，您的条件就会应用重写规则（例如，如果存在 css，而不是加载它，它将重写为您指定的内容）。

这可能与您想要的完全相反，**您可能希望在用户没有请求真实文件时重写**，例如：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

仅当请求的路径与真实文件不匹配且与真实目录不匹配时，才会运行 RewriteRules。

# c# - Twitter API 获取用户提要

> ID：13269985
> 
> 赞同：2
> 
> 时间：2012-11-07T12:39:14.457
> 
> 标签：c#, asp.net, twitter, webforms

> **可能重复：**
> [如何阅读 Twitter 提要](https://stackoverflow.com/questions/3800850/how-to-read-twitter-feeds)

我正在寻找一些示例来获取 C#、ASP.NET 中用户的 twitter 提要（公共提要）。我发现的任何示例都使用 OAuth 等，但我找不到任何仅提供提要而无需任何身份验证的示例。

任何样品都是高度适用的。

PS：我不想使用推特小部件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:45:17.727

您可以获取用户示例的 RSS 提要：[http](http://api.twitter.com/1/statuses/user_timeline.rss?screen_name=cnn) ://api.twitter.com/1/statuses/user_timeline.rss?screen_name= cnn 您只需替换 screen_name 变量

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T12:49:16.960

我刚刚通读了 Twitter API 文档并从具有 API 1.1 的用户那里获取提要，您需要用户级别访问权限，您只能通过有效的 OAuth 身份验证才能获得此权限，因此除非您决定实施 OAuth，否则您将收到此错误：

```
{"errors":[{"message":"Bad Authentication data","code":215}]} 
```

您仍然可以使用 API 1.0，但请注意它已被弃用，并且将来可能会被删除。如果你想使用 API 1.0，这是适当的 URL 调用：

[https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=USERNAME_GOES_HERE&count=NUMBER_OF_TWEETS_GOES_HERE](https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=USERNAME_GOES_HERE&count=NUMBER_OF_TWEETS_GOES_HERE)

我建议您实施 OAuth（这并不难）并开始使用 API 1.1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:33:46.573

如果使用 TweetSharp.dll，您可以使用以下内容：

```
var service = new TweetSharp.TwitterService();
IEnumerable<TwitterStatus> tweets = 
    service.ListTweetsOnSpecifiedUserTimeline("@rudolf_franek"); 
```

# c# - 我需要展平这些 XML 数据，以便将其导入 Excel

> ID：13269987
> 
> 赞同：0
> 
> 时间：2012-11-07T12:39:22.873
> 
> 标签：c#, xml, excel, ms-access

几天来，我一直在尝试将这些数据导入 Excel 或 Access，但我对 XML / XSD 的经验很少。在将数据导入 Excel/Access 时，我不知道什么是最好的方法。Excel 不支持嵌套元素 afaik。Access 似乎并不关心嵌套数据的链接。所以我最终可能会为 Excel 扁平化我自己的结构，无论哪种情况，这都是我最终分析所需的程序。

我希望它是平面格式，甚至是 csv 格式，但我关心的是文件的大小。我现在有一个数据子集，这个 xml 文件已经是 11Meg 并且它占总数据的一小部分。

这是我的 XML 文件，一个子集。

```
 <Root>
    <Delivery>
    <Database>xxxxxxx</Database>
    <Path>SomeUNCPath</Path>
<Vessel>
<SysFolder>internalfolder</Sysfolder>
<MoreData>1</MoreData>
<EvenMoreData>2</EvenMoreData>
<Depths>
<NumberOfItems>2</NumberOfItems>
<Depth> 
<MoreData>1</MoreData>
<EvenMoreData>2</EvenMoreData>
</Depth>
<Depth>
...
</Depth>
<Vessel>
<SysFolder>Anotherinternalfolder</Sysfolder>
<MoreData>1</MoreData>
<EvenMoreData>2</EvenMoreData>
<Depths>
<NumberOfItems>2</NumberOfItems>
<Depth> 
<MoreData>1</MoreData>
<EvenMoreData>2</EvenMoreData>
</Depth>
<Depth>
...
</Depth>
<EngineRoot>
<SysFolder>internalfolder</Sysfolder>
<NumberOfEngines>5</NumberOfEngines>
<Engine>5 Elements of this with data</Engine>
</EngineRoot>
<EngineRoot>
<SysFolder>Anotherinternalfolder</Sysfolder>
<NumberOfEngines>5</NumberOfEngines>
<Engine>5 Elements of this with data</Engine>
</EngineRoot> 
```

# c# - 正则表达式验证用逗号或破折号分隔的数字

> ID：13269993
> 
> 赞同：4
> 
> 时间：2012-11-07T12:40:04.433
> 
> 标签：c#, regex

它应该验证这样的事情

```
12,14,15,18-20,23,50-130 
```

我想到了这个：

```
^(?:\\d[,] | \\d[-])$ // or ^(?:\\d[,] | \\d[-] *)$ ?? 
```

**编辑** 它应该适用于

```
12,  15
11,13, 14,18, 51-52 
```

它不应该为

```
w,12
12,15d
14,,18
14--20
12,12-
-12,13
,12
12,
13-,
-,13 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T12:48:40.473

首先，使用逐字字符串来避免双反斜杠。然后这可能对你有用：

```
@"^\s*\d+(?:-\d+)?\s*(?:,\s*\d+(?:-\d+)?\s*)*$" 
```

那将是一个数字，可以选择后跟连字符号。然后是任意数量的`,`, 空格和开始模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:06:02.783

你也可以试试这个

```
@"^\s*\d+(\s*[,-]\s*\d+)*\s*$" 
```