# StackOverflow 问答 12598000-12598999

# c# - 无法在具有唯一索引“in_name”的对象中插入重复的键行

> ID：12598004
> 
> 赞同：0
> 
> 时间：2012-09-26T08:54:34.977
> 
> 标签：c#, database, entity-framework

我收到此错误：无法在具有唯一索引“in_name”的对象中插入重复的键行可能是什么问题？

```
var ing = (from x in db.tblTable where x.ing_name == ing_name select x);
var ing1 = ing.First();
ing1.ing_name = ing1.ing_name + " (" + FormatC(ing_brand) + ")";
db.SaveChanges(); 
```

这是格式C：

```
public static string FormatC(string str)
    {
        if (!string.IsNullOrEmpty(str))
            return str.Substring(0, 1).ToUpper() + "" + str.Substring(1).ToLower();
        else
            return "";
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2022-01-25T13:55:22.080

得到了这个答案 - [https://www.sqlservercentral.com/forums/topic/cannot-insert-duplicate-key-row-in-object-with-unique-index-on-duplicate-foreing-key](https://www.sqlservercentral.com/forums/topic/cannot-insert-duplicate-key-row-in-object-with-unique-index-on-duplicate-foreing-key)

结果表明，默认情况下，SQL Server 将索引字段设置为仅允许唯一值。要检查这一点，请在设计中打开表并选择“管理索引和键”选项。选择列出的索引/键并检查“是唯一的”属性的相应是/否下拉列表。

# jquery - 使用当前数据在页面刷新时呈现页面

> ID：12598010
> 
> 赞同：0
> 
> 时间：2012-09-26T08:54:43.600
> 
> 标签：jquery, ajax, asp.net-mvc-3

我的索引包含呈现页面的默认值。我已经根据使用 jquery 的用户操作在我的视图中的下拉列表中填写了列表（根据用户操作，相同的下拉列表包含不同的列表）。

我的问题是当我刷新页面时，下拉菜单会使用索引中提供的默认数据进行恢复。

有什么方法可以在页面刷新时将数据传递给索引，比如来自文本框的数据或下拉列表中当前选择的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:09:58.930

这应该可以使用存储或 cookie 轻松完成...每次更改时将列表、值和您需要的所有内容存储在 cookie 中。在页面刷新时，检查 cookie 是否存在，如果它确实从 cookie 中获取列表而不是默认值。

```
if(typeof(Storage)!=="undefined"){
    localStorage.dropdownlist = thelist; // The list being your list of options.
}else{
    //Storage not supported, use cookie logic instead.
} 
```

然后，根据您的页面初始化逻辑，只需添加一个这样的检查。

```
if(typeof(Storage)!=="undefined" && typeof(localStorage.dropdownlist)!=="undefined"){
   populateDropDown(localStorage.dropdownlist); // The function being the same as when jQuery calls it.
}else{
   //Storage not supported, use cookie logic instead.
} 
```

localStorage 对象存储没有过期日期的数据。关闭浏览器时数据不会被删除，将在下一天、下周或下一年可用。您可能要考虑改用 sessionStorage。sessionStorage 对象与 localStorage 对象相同，只是它只存储一个会话的数据。当用户关闭浏览器窗口时，数据将被删除。

# java - JavaME 和/或 Proguard 是否重新排序分配？

> ID：12598013
> 
> 赞同：1
> 
> 时间：2012-09-26T08:54:51.143
> 
> 标签：java, multithreading, java-me, proguard, synchronized

这是一个简化的示例 - 我有两个线程：

JavaME 和/Proguard 是否可以对`obX = ...`语句重新排序，这样 thread_B 将在 处出现空指针异常`ob1.someMethod`？

线程_A：

```
Object ob1 = null;
Object ob2 = null;
...
ob1 = something1;
ob2 = something2; 
```

线程_B：

```
if (ob2 != null) {
    ob1.someMethod();
    ...
} 
```

PS我确实意识到同步这些可以避免这个问题。同步既有性能开销，更重要的是有可能引入死锁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T21:35:47.947

ProGuard 的当前版本（在撰写本文时最高为 4.8 版）不会重新排序此类语句。但是，如果字段不是易失性的，Java 内存模型确实允许重新排序，因此您不应该依赖它。Java 虚拟机、ProGuard 的未来版本或其他工具可以很好地重新排序代码。至少 volatile 字段不会引入死锁。

# c - 这是以相反顺序进行 memmove 的正确方法吗？

> ID：12598014
> 
> 赞同：0
> 
> 时间：2012-09-26T08:54:54.347
> 
> 标签：c, memory-management, memmove

我试图了解 memmove 是如何工作的。我举了一个例子，我以这种方式在内存中有数据。

```
Start at 0
First Memory Block(A) of size 10
Hence A->(0,10) where 0 being where it starts and 10 it's length.
Thus B-> (10,20)
     C-> (30,50)
     D-> (80,10) 
```

假设我们有一个变量 X，它记录下一个可以插入的位置，在上面给出的示例中为 90。现在如果我想删除B，那么我想将C和D移动到B占用的空闲空间。输入是输入数组。所以输入数组看起来像前 10 个字符属于块 A，接下来的 20 个字符属于块 B 等等。我认为这可以使用 memmove 完成，如下所示：

```
memmove(input+start(B),input+start(B)+length(B),X-(start(B)+length(B)) 
```

现在我想尝试逆序。

```
So we start from behind
Start at 100
First memory block(A) of size 10
A-> (100,10) 100 is where it starts and 10 it's length
B-> (90,20)
C-> (70,50)
D-> (20,10) 
```

与第一个示例类似，假设我们有一个变量 X，我们记录下一个可以插入的位置。对于该示例，这将是 10，以相反的顺序排列。

现在如果我想删除块 B，那么我希望 C 和 D 在 B 的空间中重叠。这将是相反顺序的 memmove。我认为这可以通过这种方式完成：

```
memmove(input+start(B)-(start(B)-length(B)-X),input+X,start(B)-length(B)-X) 
```

根据亚历克斯的评论，我认为我没有保持正确的数据顺序。数据就像，

```
A->(90,10)
B->(70,20)
C->(40,30)
D->(20,20)
and X which would be D's starting address i.e at 20
Now if we want to delete B,memmove would look something like this.

memmove(input+X+length(B), input+X,start(B)-X) 
```

有没有更好的方法来做到这一点？

请注意，这不适用于家庭作业。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:03:11.473

`C`并`D`占据 50+10=60，那么为什么是 20 in`memmove(input+start(B), input+start(B)+length(B), 20)`呢？

至于另一部分，在 C 中，对象不是从它们的最后一个字节开始的（第一个字节在最低地址，最后一个字节在最高地址）。这部分令人困惑。

# asp.net - web.config 和 app.config ApplicationSettings 在 ASP.NET 中被覆盖

> ID：12598017
> 
> 赞同：0
> 
> 时间：2012-09-26T08:55:12.383
> 
> 标签：asp.net, web-config

我们有以下项目：

*   域.UI.Web
*   领域.业务
*   域.服务.端点
*   域.服务.合同
*   域.服务.代理

ApplicationSettings 被添加到`app.Config`例如`Domain.Business`项目中：

```
<applicationSettings>
    <Domain.Business.My.MySettings>
        <setting name="SomeKey" serializeAs="String">
            <value>someDummyValue</value>
    </Domain.Business.My.MySettings>
</applicationSettings> 
```

为 Visual Studio 生成的类型化访问器添加了密钥。但是，该值被`web.config`另一个项目中的值覆盖。这是`web.config`该`Domain.Services.EndPoints`项目的。

```
<Domain.Business.My.MySettings>
        <setting name="SomeKey" serializeAs="String">
            <value>actual_value</value>
        </setting>
    </Domain.Business.My.MySettings>
</applicationSettings> 
```

*当我`My.Settings.SomeKey`从`Domain.Business`项目中获取时，值`actual_value`来自 EndPoints 项目。这似乎是自动发生*的，因为我在我们的解决方案中找不到任何似乎正在这样做的代码，而且我无法让谷歌回答我的问题：

这是什么？这是 ASP.NET 或 WCF 中的标准吗？这是在哪个版本的框架中引入的？我在哪里可以阅读有关此覆盖行为的更多信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:27:58.990

由于 Domain.Bussiness 是一个类库，因此这是正常行为。dll 没有 .config 文件，因此它使用引用该库的应用程序的 web.config（或 app.config，如果是可执行文件）。

# php - 如何在php中获得相同的数组

> ID：12598020
> 
> 赞同：-1
> 
> 时间：2012-09-26T08:55:23.053
> 
> 标签：php, arrays

我想做的是像记忆游戏一样的东西，但我一直无法得到与输出相同的数字

```
$numbers = range(1, 15);
shuffle($numbers);
foreach($numbers as $key){
echo $numbers[array_rand($numbers)];
break;  
} 
```

现在输出将是这样的

```
4 2 3 3

1 5 3 6

2 3 4 5

10 9 8 10 
```

但是如何将其作为 rand 数组并使用相同的 2 个数组编号，即我可以匹配该编号。

我想要的输出是

```
2 3 1 4

3 4 2 1

5 6 9 7

7 9 6 5 
```

所以像这样我可以在 2 个相同的号码中得到匹配

知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:10:08.557

你的问题有点混乱和模糊。我推断您想要随机排列并显示一个数字数组，每个数字两个。要做到这一点：

```
<?php
$numbers = range(1, 5);
$numbers = array_merge($numbers, $numbers);
shuffle($numbers);
echo implode(' ', $numbers); 
```

例如，这会输出`3 5 1 5 1 2 3 4 2 4`.

代码中的`array_rand()`调用`foreach`绝对没有意义。如果以上不是您想要的，请修改您的问题以使其更清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:08:26.860

如果我理解正确，您可以通过以下方式实现您想要做的事情：

```
// make sure these are even numbers
$rows = 4;
$cols = 4;

$set = range(1, ($rows * $cols) / 2);
$numbers = array_merge($set, $set);
shuffle($numbers);
foreach (array_chunk($numbers, $cols) as $row) {
    foreach ($row as $col) {
        printf('%-5d', $col);
    }
    echo "\n";
} 
```

输出：

```
3    7    2    1    
4    6    8    5    
6    3    8    4    
2    5    7    1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:17:09.880

尝试这个。这是一个简单的方法。

```
$numbers=range(1, 15); 
```

// 从 $numbers 数组中获取 4 个唯一的随机键。

```
$rand_keys = array_rand($numbers, 4); 
```

//使用//随机键打印出随机数。

```
foreach ($rand_keys as $k=>$i) {

    echo $numbers[$i]."  ";
} 
```

希望这会帮助你...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T09:05:13.763

首先你必须做一个有几个值的数组

```
// Generate array with values from 1 to 8
$arNumbers = range(1, 8); 
// Duplicate the array so get copy of each number
$arNumbers = array_merge($arNumbers, $arNumbers);

// Shuffle the array
shuffle($arNumbers);

// And now display them
foreach($arNumbers as $nNumber)
{
     // Do some business
} 
```

希望能帮助到你 ：）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-26T09:00:05.373

执行以下操作：

```
$numbers = range(1, 15);
shuffle($numbers);
$used_numbers = array();
foreach($numbers as $key){
  $this_number = $numbers[array_rand($numbers)];
  $used_numbers[] = $this_number;
  echo $this_number;
  break;  
}
$_SESSION['numbers'] = $used_numbers; 
```

然后您可以使用 $_SESSION 访问另一个页面上的数字（可能在重新加载之后），或者使用相同的 $used_numbers 数组来访问它们。

如果你试试：

```
$numbers = range(1, 15);
shuffle($numbers);
$used_numbers = array();
foreach($numbers as $key){
  $this_number = $numbers[array_rand($numbers)];
  $used_numbers[] = $this_number;
  echo $this_number;
  break;  
}
echo '<br />';
foreach($used_numbers AS $number) {
  echo $number;
} 
```

你会看到它返回相同的数字。

# javascript - 如何刷新 html 元素？

> ID：12598021
> 
> 赞同：0
> 
> 时间：2012-09-26T08:55:27.873
> 
> 标签：javascript, html, asp.net-mvc, asp.net-mvc-3, model-view-controller

我已经尝试为我的问题寻找任何可能的解决方案，但到目前为止我所看到的都不起作用。无论如何，我正在使用 MVC 3，并且我有一个名为 Add Event 的表单。在该页面上，我有一个下拉列表，其中包含用户可以选择的位置列表。我在该下拉列表下方有一个链接，允许用户添加新位置。现在，我有文本框、下拉列表等用于在局部视图中创建新位置，当我单击链接时，该位置将显示在下拉列表下方。

无论如何，我需要刷新，只是下拉列表，这样当我添加一个新位置时，它就在列表中。现在发生的事情是在我单击保存后，部分视图会自行隐藏，我仍然需要刷新整个页面以获取下拉列表上的新位置，然后删除我在相同的 texbox 和下拉列表中输入的所有内容页。

我怎样才能使用 javascript/ajax 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:20:26.557

这可能会帮助你..

```
var opt = document.createElement("option");
     // Assign text and value to Option object
    opt.text = Text;
    opt.value = Value;        

    // Add an Option object to Drop Down
    document.getElementById("YourDropDownID").options.add(opt,null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:25:34.593

使用 jQuery，你可以只重新加载你想要的元素：

$('#menu').load("myServerScript.php #menu");

[http://api.jquery.com/load/](http://api.jquery.com/load/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:02:16.830

这可以用 jQuery 来完成。我的做法是这样的。假设您有一个看起来像这样的表单：

```
<form method="post" action="#">
    <select id="myList" name="myList">
        <option value="1">Value 1</option>
        <option value="2">Value 2</option>
    </select>
    <input type="text" id="newValue" name="newValue" />
    <a href="#" id="btn">add new value</a>            
    <input type="submit" value="Submit">
</form> 
```

其中 myList 是您要添加新值并刷新的下拉列表，newValue 是用于接收要添加到下拉列表 (myList) 的新值的文本字段，带有 id btn 的链接是添加按钮。您可以添加一个看起来像这样的 jQuery：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#btn").click(function (event) {
            event.preventDefault();
            $.post("/home/addvalue", { value: $("#newValue").val() }, function (result) {
                if (result != null) {
                    $("#myList").append("<option value='" + result.id + "' selected='selected'>" + result.text + "</option>");
                }
            });
        });
    });
 </script> 
```

当您单击链接（btn）时，我会从文本框中收集值（以及该值）并将 POST（表单提交）发送到服务器。我猜您希望服务器给出某种答案，其中包括新插入的值的 id。如果服务器发回该新 id，然后我将新结果附加到列表中（并将其设置为选定的）

在服务器端，您的代码可能看起来像这样

```
[HttpPost]
public JsonResult AddValue(FormCollection collection) 
{ 
    //do database inser for the new value and get the id
    var response = new Dictionary<string, object>();
    response.Add("id", 3);//3 here represents that last id
    response.Add("text", collection["value"]); //the value you sent for the new option
    return Json(response);
} 
```

您收到 POST(ed) 数据并保存到数据库。一旦保存了值并且您将新的 id 保存到字典中，然后您将序列化并作为 json 发送回上面的 javascript。这将更新您的表单，因此当您实际点击提交 myList 值时，您将成为新值。希望这会有所帮助（如果有，请接受答案）

# javascript - Rhino + Maven + Qunit 具有导入属性的对象

> ID：12598023
> 
> 赞同：2
> 
> 时间：2012-09-26T08:55:40.307
> 
> 标签：javascript, maven, rhino, qunit

我有一个奇怪的问题，希望有人能提供帮助。我正在使用 Rhino 和 QUnit 运行无头 JavaScript 测试。所以我在 Qunit 测试类中使用 Rhino 执行 RhinoShell 来执行我的 JS 测试。

在我的一个 JS 文件中，我有 Object 及其自己的属性导入，例如：

`MyObject.import("");`但我必须在我的测试中逃避或模拟它。所以我试着用我自己的对象来模拟它，比如：

```
MyObj = {
    import : function() {
    }
}; 
```

在本地使用犀牛，我这样做没有问题。但是当我尝试使用`maven`某种严格模式执行它并抛出错误时

```
: invalid property id import : function()...... and so on. 
```

请帮助我模拟我尝试过`JsMockito`但没有成功的这个对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T22:45:59.720

属性名称`import`无意中被标记为[保留字](https://github.com/yui/yuicompressor/issues/250)，因此请使用替代方法：

*   进口
*   $进口
*   _进口

**参考**

*   [YUI Compressor 问题 #250：YUI Compressor 运行时错误](https://github.com/yui/yuicompressor/issues/250)

# c++ - 如何在Spirit中计算布尔表达式

> ID：12598029
> 
> 赞同：4
> 
> 时间：2012-09-26T08:56:04.817
> 
> 标签：c++, boost-spirit, boolean-operations

我找到了一个关于布尔翻译器的非常好的例子，* [C++ 中的布尔表达式（语法）解析器](https://stackoverflow.com/questions/8706356/boolean-expression-grammar-parser-in-c/8707598#8707598)

我现在想的是更进一步，翻译`(!T|F)&T`成`F`or `0`，这样计算很长的布尔表达式就很方便了。

有没有一些关于这个使用精神的例子？我所做的是先做一个计算器，然后让它计算'(T+!F*T)'，等于`(T||!F&&T)`但是当我输入时`()`，有一个错误。如何修改它？非常感谢！

```
#include <iostream>  
#include <stack>  
#include <boost/lexical_cast.hpp>  
#include <boost/config/warning_disable.hpp>  
#include <boost/spirit/include/qi.hpp>  
#include <boost/spirit/include/phoenix.hpp>  

using namespace std;  
namespace phoenix = boost::phoenix;  
namespace qi = boost::spirit::qi;  
namespace ascii = boost::spirit::ascii;  

struct calculator  
{  
    bool interpret(const string& s);  
    void do_neg();  
    void do_add();  
    void do_sub();  
    void do_mul();  
    void do_div();  
    void do_number(const char* first, const char* last);  
    int val() const;  
private:  
    stack<int> values_;  
    int *pn1_, n2_;  
    void pop_1();  
    void pop_2();  
};  

template <typename Iterator>  
struct calc_grammar : qi::grammar<Iterator, ascii::space_type>  
{  
    calc_grammar(calculator& calc)  
        : calc_grammar::base_type(add_sub_expr)  
        , calc_(calc)  
    {  
        using namespace qi;  
        using boost::iterator_range;  

#define LAZY_FUN0(f)        phoenix::bind(&calculator::f, calc_)  
#define LAZY_FUN2(f)        phoenix::bind(&calculator::f, calc_, phoenix::bind(&iterator_range<Iterator>::begin, qi::_1), phoenix::bind(&iterator_range<Iterator>::end, qi::_1))  

        add_sub_expr =  
            (  
                -lit('+') >> mul_div_expr |  
                (lit('-') >> mul_div_expr)[LAZY_FUN0(do_neg)]  
            ) >>  
            *(  
                lit('+') >> mul_div_expr[LAZY_FUN0(do_add)] |  
                lit('-') >> mul_div_expr[LAZY_FUN0(do_sub)]  
            ) >> eoi;  

        mul_div_expr =  
            basic_expr >>  
            *(   
                lit('*') >> basic_expr[LAZY_FUN0(do_mul)] |  
                lit('/') >> basic_expr[LAZY_FUN0(do_div)]  
            );  

        basic_expr =  
            raw[number][LAZY_FUN2(do_number)] |  
            lit('(') >> add_sub_expr >> lit(')');  

        number = lexeme[+digit];  
    }  
    qi::rule<Iterator, ascii::space_type> add_sub_expr, mul_div_expr, basic_expr, number;  
    calculator& calc_;  
};  

bool calculator::interpret(const string& s)  
{  
    calc_grammar<const char*> g(*this);  
    const char* p = s.c_str();  
    return qi::phrase_parse(p, p + s.length(), g, ascii::space);  
}  

void calculator::pop_1()  
{  
    pn1_ = &values_.top();  
}  

void calculator::pop_2()  
{  
    n2_ = values_.top();  
    values_.pop();  
    pop_1();  
}  

void calculator::do_number(const char* first, const char* last)  
{  
    string str(first, last);  
    int n = boost::lexical_cast<int>(str);  
    values_.push(n);  
}  

void calculator::do_neg()  
{  
    pop_1();  
    *pn1_ = -*pn1_;  
}  

void calculator::do_add()  
{  
    pop_2();  
    *pn1_ += n2_;  
}  

void calculator::do_sub()  
{  
    pop_2();  
    *pn1_ -= n2_;  
}  

void calculator::do_mul()  
{  
    pop_2();  
    *pn1_ *= n2_;  
}  

void calculator::do_div()  
{  
    pop_2();  
    *pn1_ /= n2_;  
}  

int calculator::val() const  
{  
    assert(values_.size() == 1);  
    return values_.top();  
}  

int main()  
{  
    for(;;){  
        cout << ">>> ";  
        string s;  
        getline(cin, s);  
        if(s.empty()) break;  
        calculator calc;  
        if(calc.interpret(s))  
            cout << calc.val() << endl;  
        else  
            cout << "syntax error" << endl;  
    }  
    return 0;  
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T13:05:15.533

这是基于我的旧[布尔解析器](https://stackoverflow.com/questions/8706356/boolean-expression-grammar-parser-in-c/8707598#8707598)答案的快速而肮脏的演示。这是一个评估您传递给它的 AST 的访问者：

```
struct eval : boost::static_visitor<bool> 
{
    eval() {}

    //
    bool operator()(const var& v) const 
    { 
        if (v=="T" || v=="t" || v=="true" || v=="True")
            return true;
        else if (v=="F" || v=="f" || v=="false" || v=="False")
            return false;
        return boost::lexical_cast<bool>(v); 
    }

    bool operator()(const binop<op_and>& b) const
    {
        return recurse(b.oper1) && recurse(b.oper2);
    }
    bool operator()(const binop<op_or>& b) const
    {
        return recurse(b.oper1) || recurse(b.oper2);
    }
    bool operator()(const unop<op_not>& u) const
    {
        return !recurse(u.oper1);
    } 

    private:
    template<typename T>
        bool recurse(T const& v) const 
        { return boost::apply_visitor(*this, v); }
};

bool evaluate(const expr& e) 
{ return boost::apply_visitor(eval(), e); } 
```

我希望我以后能找到一些时间来解释。请注意， _var 现在用词不当，因为您想将所有操作数视为文字。另请注意，文字的评估有点......现在又快又脏:)

## 完整代码

**`[Live On Coliru](http://coliru.stacked-crooked.com/a/c40382620fb75b75)`**

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <boost/spirit/include/phoenix_operator.hpp>
#include <boost/variant/recursive_wrapper.hpp>
#include <boost/lexical_cast.hpp>

namespace qi    = boost::spirit::qi;
namespace phx   = boost::phoenix;

struct op_or  {};
struct op_and {};
struct op_not {};

typedef std::string var; 
template <typename tag> struct binop;
template <typename tag> struct unop;

typedef boost::variant<var, 
        boost::recursive_wrapper<unop <op_not> >, 
        boost::recursive_wrapper<binop<op_and> >,
        boost::recursive_wrapper<binop<op_or> >
        > expr;

template <typename tag> struct binop
{
    explicit binop(const expr& l, const expr& r) : oper1(l), oper2(r) { }
    expr oper1, oper2;
};

template <typename tag> struct unop
{
    explicit unop(const expr& o) : oper1(o) { }
    expr oper1;
};

struct eval : boost::static_visitor<bool> 
{
    eval() {}

    //
    bool operator()(const var& v) const 
    { 
        if (v=="T" || v=="t" || v=="true" || v=="True")
            return true;
        else if (v=="F" || v=="f" || v=="false" || v=="False")
            return false;
        return boost::lexical_cast<bool>(v); 
    }

    bool operator()(const binop<op_and>& b) const
    {
        return recurse(b.oper1) && recurse(b.oper2);
    }
    bool operator()(const binop<op_or>& b) const
    {
        return recurse(b.oper1) || recurse(b.oper2);
    }
    bool operator()(const unop<op_not>& u) const
    {
        return !recurse(u.oper1);
    } 

    private:
    template<typename T>
        bool recurse(T const& v) const 
        { return boost::apply_visitor(*this, v); }
};

struct printer : boost::static_visitor<void> 
{
    printer(std::ostream& os) : _os(os) {}
    std::ostream& _os;

    //
    void operator()(const var& v) const { _os << v; }

    void operator()(const binop<op_and>& b) const { print(" & ", b.oper1, b.oper2); }
    void operator()(const binop<op_or >& b) const { print(" | ", b.oper1, b.oper2); }

    void print(const std::string& op, const expr& l, const expr& r) const
    {
        _os << "(";
        boost::apply_visitor(*this, l);
        _os << op;
        boost::apply_visitor(*this, r);
        _os << ")";
    }

    void operator()(const unop<op_not>& u) const
    {
        _os << "(";
        _os << "!";
        boost::apply_visitor(*this, u.oper1);
        _os << ")";
    } 
};

bool evaluate(const expr& e) 
{ return boost::apply_visitor(eval(), e); }

std::ostream& operator<<(std::ostream& os, const expr& e) 
{ boost::apply_visitor(printer(os), e); return os; }

    template <typename It, typename Skipper = qi::space_type>
    struct parser : qi::grammar<It, expr(), Skipper>
{
        parser() : parser::base_type(expr_)
        {
            using namespace qi;

            expr_  = or_.alias();

            or_  = (and_ >> '|'  >> or_ ) [ _val = phx::construct<binop<op_or > >(_1, _2) ] | and_   [ _val = _1 ];
            and_ = (not_ >> '&' >> and_)  [ _val = phx::construct<binop<op_and> >(_1, _2) ] | not_   [ _val = _1 ];
            not_ = ('!' > simple       )  [ _val = phx::construct<unop <op_not> >(_1)     ] | simple [ _val = _1 ];

            simple = (('(' > expr_ > ')') | var_);
            var_ = qi::lexeme[ +(alpha|digit) ];

            BOOST_SPIRIT_DEBUG_NODE(expr_);
            BOOST_SPIRIT_DEBUG_NODE(or_);
            BOOST_SPIRIT_DEBUG_NODE(and_);
            BOOST_SPIRIT_DEBUG_NODE(not_);
            BOOST_SPIRIT_DEBUG_NODE(simple);
            BOOST_SPIRIT_DEBUG_NODE(var_);
        }

        private:
        qi::rule<It, var() , Skipper> var_;
        qi::rule<It, expr(), Skipper> not_, and_, or_, simple, expr_; 
};

int main() 
{
    const std::string inputs[] = { 
        std::string("true & false;"),
        std::string("true & !false;"),
        std::string("!true & false;"),
        std::string("true | false;"),
        std::string("true | !false;"),
        std::string("!true | false;"),

        std::string("T&F;"),
        std::string("T&!F;"),
        std::string("!T&F;"),
        std::string("T|F;"),
        std::string("T|!F;"),
        std::string("!T|F;"),
        std::string("") // marker
    };

    for (const std::string *i = inputs; !i->empty(); ++i)
    {
        typedef std::string::const_iterator It;
        It f(i->begin()), l(i->end());
        parser<It> p;

        try
        {
            expr result;
            bool ok = qi::phrase_parse(f,l,p > ';',qi::space,result);

            if (!ok)
                std::cerr << "invalid input\n";
            else
            {
                std::cout << "result:\t" << result << "\n";
                std::cout << "evaluated:\t" << evaluate(result) << "\n";
            }

        } catch (const qi::expectation_failure<It>& e)
        {
            std::cerr << "expectation_failure at '" << std::string(e.first, e.last) << "'\n";
        }

        if (f!=l) std::cerr << "unparsed: '" << std::string(f,l) << "'\n";
    }

    return 0; 
} 
```

输出：

```
result: (true & false)
evaluated:  0
result: (true & (!false))
evaluated:  1
result: ((!true) & false)
evaluated:  0
result: (true | false)
evaluated:  1
result: (true | (!false))
evaluated:  1
result: ((!true) | false)
evaluated:  0
result: (T & F)
evaluated:  0
result: (T & (!F))
evaluated:  1
result: ((!T) & F)
evaluated:  0
result: (T | F)
evaluated:  1
result: (T | (!F))
evaluated:  1
result: ((!T) | F)
evaluated:  0 
```

# jquery - 为什么 YUI ToolTip 不能在 JQuery 对话框中排在首位

> ID：12598031
> 
> 赞同：0
> 
> 时间：2012-09-26T08:56:22.313
> 
> 标签：jquery, dialog, tooltip, yui

我尝试在 jQuery 对话框上的 MsChart 上显示一些工具提示，但工具提示从不在对话框顶部。以下是我的总源代码。

* * *

```
<script type="text/javascript">

    $(function () {

        $("#dialog2").dialog({
            autoOpen: true,
            width: 640,
            height: 'auto',
            position: [100, 110]
        });

        for (var i = 0; i < $('area').length; i++) {

            $('area:eq(' + i + ')').attr('id', 'area-id-' + i); //change id 
            $.data(this, 'area-title-' + i, $('area:eq(' + i + ')').attr('title')); //store title 

            if ($.data(this, 'area-title-' + i) != undefined) {

                new YAHOO.widget.Tooltip("myTip", {
                    context: 'area-id-' + i,
                    text: "hello<br/>hello<br/>hello<br/>hello<br/>hello<br/>hello<br/>hello<br/>hello<br/>hello<br/>hello<br/>hello<br/>hello<br/>",
                    width: 300,
                    container: this.dialog2,
                    autodismissdelay: 3600000, // show one hour 
                    showdelay: 0
                });
            }
        }
    });

</script>

<div id="dialog2" title="my chart">
    <asp:Chart ID="Chart1" runat="server">
        <Series>
            <asp:Series Name="Series1">
            </asp:Series>
        </Series>
        <ChartAreas>
            <asp:ChartArea Name="ChartArea1">
            </asp:ChartArea>
        </ChartAreas>
    </asp:Chart>
</div>

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        List<string> rom_list = new List<string>();
        rom_list.Add("1.1");
        rom_list.Add("1.2");
        rom_list.Add("1.3");
        rom_list.Add("1.4");
        rom_list.Add("1.5");

        List<double> value_list = new List<double>();
        value_list.Add(4);
        value_list.Add(2);
        value_list.Add(6);
        value_list.Add(3);
        value_list.Add(8);

        Chart1.Series[0].Points.DataBindXY(rom_list, value_list);

        foreach (System.Web.UI.DataVisualization.Charting.DataPoint point in Chart1.Series[0].Points)
        {
            point.ToolTip = "this is tooltip " + point.YValues[0].ToString();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:58:20.687

Jquery 模态对话框样式的 z-index 比工具提示更大

有关此 css 的更多详细信息，请参见 hee [http://www.w3schools.com/cssref/pr_pos_z-index.asp](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

为了解决它，您需要更改工具提示或 jquery 模型对话框的 css

# time - 秒数转换器

> ID：12598049
> 
> 赞同：0
> 
> 时间：2012-09-26T08:57:48.837
> 
> 标签：time, int

```
 Console.Write("Type in the number of seconds: ");
        int total_seconds = Convert.ToInt32(Console.ReadLine());

        int hours = total_seconds / 3600;
        total_seconds = total_seconds % (hours * 3600);
        int minutes = total_seconds / 60;
        total_seconds = total_seconds % (minutes * 60);
        int seconds = total_seconds;
        Console.WriteLine("Number of hours: " + hours + " hours" + "\nNumber of minutes: " + minutes + " minutes" + "\nNumber of seconds: " + seconds + " seconds");
        Console.ReadLine(); 
```

设法创建一个程序，将总秒数转换为相应的小时、分钟、秒。我遇到了一个问题，因为我不希望程序也能够在 3660 以下的总秒数内显示小时数、分钟数等，这似乎是不可能的。任何想法如何帮助解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:03:12.920

问题出在取模数（`%`运算符）的行中。您想要删除所有整小时后剩下的秒数，即`total_seconds % 3600`. 您拥有的代码，如果您的时间低于 3600 秒，将尝试执行`total_seconds % 0`，即除以零。尝试以下操作：

```
int hours = total_seconds / 3600;
total_seconds = total_seconds % 3600;
int minutes = total_seconds / 60;
total_seconds = total_seconds % 60;
int seconds = total_seconds; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:03:43.330

**编辑**
Chowlett 的回答更优雅地做到了这一点 - 使用他的代码。

这似乎对我有用（通过`if`我确保在我们为零的情况下我不会被零除`hours`的语句`minutes`：

```
int total_seconds = 3640;

int hours = 0;
int minutes = 0;
int seconds = 0;

if (total_seconds >= 3600)
{
    hours = total_seconds / 3600;
    total_seconds = total_seconds % (hours * 3600);
}

if (total_seconds >= 60)
{
    minutes = total_seconds / 60;
    total_seconds = total_seconds % (minutes * 60);
}

seconds = total_seconds;
Console.WriteLine("Number of hours: " + hours + " hours" + "\nNumber of minutes: " + minutes + " minutes" + "\nNumber of seconds: " + seconds + " seconds");
Console.ReadLine(); 
```

# python - UnitTest：不能添加多对多关系：完整性错误（似乎删除不做他的工作）

> ID：12598050
> 
> 赞同：0
> 
> 时间：2012-09-26T08:57:54.173
> 
> 标签：python, unit-testing, foreign-keys, sqlalchemy, python-elixir

我有两张桌子：Person & Team；每个都与另一个具有多对多关系。

我在`setUp`函数中执行此操作（在每个测试函数**之前**调用，在我的情况下为 3 次）

```
p = Person(fname=u"John", lname=u"Doe")
Team(name=u"Anon", persons=[p])
session.commit() 
```

还有我的`tearDown`函数（在每个测试函数**之后调用）**

```
Person.query.delete()
Team.query.delete()
session.commit() 
```

第一次测试通过，但是当`setUp`第二次被调用时，我得到了这个： `IntegrityError: (IntegrityError) columns person_id, team_id are not unique u'INSERT INTO team_persons__person_teams (person_id, team_id) VALUES (?, ?)' (5, 1)`

似乎 delete 第一次并没有真正删除行。我不明白为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:29:28.280

您`Person`和`Team`表中的行被删除，但关联表中的行未被删除。这是因为`query.delete()`不处理关系级联。看到[Python 的 SQLAlchemy 没有清除辅助（多对多）表？](https://stackoverflow.com/questions/9918653/pythons-sqlalchemy-doesnt-clean-out-the-secondary-many-to-many-table)详细说明。

您应该能够通过使用`session.delete(obj)`添加的每个对象来解决此问题。`tearDown`或者更好的是，对于内存数据库的单元测试，只需在和期间删除并重新创建所有表`setUp`。

# ios - 使用检索到的核心数据

> ID：12598055
> 
> 赞同：0
> 
> 时间：2012-09-26T08:58:07.403
> 
> 标签：ios, objective-c, xcode, core-data

似乎找不到任何问答或任何对我有帮助的东西，但如果你找到一些可以随意链接！我从核心数据实体中提取了数据，并使用 setPropertiesToFetch 提取了“行号”列表。现在我想要的是取任何设置为 nil 的行号并将它们更改为 0。

问题 1) '无法识别的选择器发送到实例 0x59ef30'。我知道这个错误来自'if'行，通过注释掉其他人，但我不确定是什么原因造成的！

问题 2）我希望它在增加计数后再次运行，因此它会检查下一个对象，但我真的不确定执行此操作的最佳代码。任何方法/代码片段/教程的建议都会很可爱！

这是代码（上面的获取请求工作得很好:)）

```
changeTo0 = [[context executeFetchRequest:fetchRequest error:&error] mutableCopy];
NSLog(@"What is even in this array anyway? %@", changeTo0);
[fetchRequest release];

NSLog(@"In the array there is %u records", [changeTo0 count]);

NSInteger count = 0;
Fsode *details = [changeTo0 objectAtIndex:count];
NSLog(@"In details we have %@", details);        

if ([details lineNumber] == nil){
   [details setValue:0 forKey:@"lineNumber"];
   ++count
   NSLog(@"HERE");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T11:29:00.007

关于第一个问题，您应该谈谈错误（请参阅 Phillip Mills 评论）和模型。实体是否`Fsode`有一个名为 的属性`lineNumber`？它是什么类型的？

关于第二个问题，只执行一次请求，如下所示：

```
NSArray* results = [context executeFetchRequest:fetchRequest error:&error];
NSLog(@"What is even in this array anyway? %@", results);

int count = 1;
for(NSManagedObject* obj in results) {

    // I suppose lineNumber is of type NSNumber
    int numberValue = [[obj valueForKey:@"lineNumber"] intValue];    
    if(numberValue == 0) {

        [obj setValue:[NSNumber numberWithInt:count] forKey:@"lineNumber"];
        count++;
    }
}    

[fetchRequest release];

// do a save here... 
```

PS阅读您的代码，我不确定第二个问题。随意解释你想要达到的目标。

`lineNumber`我使用的代码为每个行号为零的对象递增。所以第一个对象有 1，第二个有 2，依此类推。如果您想为这些对象放置一个恒定的行号，请替换

```
[obj setValue:[NSNumber numberWithInt:count] forKey:@"lineNumber"]; 
```

和

`[obj setValue:[NSNumber numberWithInt:1] forKey:@"lineNumber"];`并删除`count`（它与您的代码相同）。

# c# - 为什么大多数 ASP.NET MVC 示例都直接在表示层访问数据库？

> ID：12598064
> 
> 赞同：1
> 
> 时间：2012-09-26T08:58:39.510
> 
> 标签：c#, asp.net, asp.net-mvc-3, razor

我找到的关于如何设置 ASP.NET MVC 项目的大多数（几乎全部？）示例都是直接在控制器中访问数据库上下文。

像[这样](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/accessing-your-model%27s-data-from-a-controller)的例子：

```
public class MoviesController : Controller
{
    private MovieDBContext db = new MovieDBContext();

    //
    // GET: /Movies/

    public ViewResult Index()
    {
        return View(db.Movies.ToList());
    } 
```

我也知道有很多控件（至少对于aspx视图引擎）可以直接绑定到数据库中的一个表作为数据源，让它自动显示数据。

对我来说，这感觉很奇怪，我想在表示层和数据库之间进行某种分离。在视图中使用它们之前，将数据从数据库映射到视图模型的某种业务层和/或数据层。只是我还是这些例子都是这样的，因为它更容易做到？我错过了一些巨大的收获吗？我想它有点快，但感觉就像我不应该在我的数据库中使用与我的视图中相同的模型。我终于找到[了一个感觉更正确的示例](http://msdn.microsoft.com/en-us/library/hh404093.aspx)，其中数据库模型与视图模型分离。但这是一百个例子。

您对此有何看法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:02:17.567

我理解你的担忧，因为我也有同样的担忧。很遗憾，大多数示例都没有使用视图模型。正因为如此，当人们开始实现与那些文章中看到的最琐碎示例不同的实际应用程序时，他们会遇到很多困难。

至于直接从控制器访问数据库，我认为这不是一个大问题。如果您不需要它们并且它们不会为您的应用程序带来任何额外的价值，那么您真的不需要实现很多抽象层。Jimmy Bogard 写了一篇关于限制抽象的[优秀博客文章。](http://lostechies.com/jimmybogard/2012/09/20/limiting-your-abstractions/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:02:20.863

大多数 MVC 教程教你怎么做只是因为它可以做到，而且对 Controller 的解释通常在解释 Model 之前。

以电影应用教程为例 - [http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)

这些教程中的大多数首先教您如何在视图上显示数据，然后使用控制器在视图中显示，然后将数据输入模型并通过指向视图。控制器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T09:23:12.680

这是为了使示例保持简单并专注于手头的主题。

# java - null，来自服务器的消息：“主机‘myserver’不允许连接到这个 MySQL 服务器”

> ID：12598066
> 
> 赞同：0
> 
> 时间：2012-09-26T08:58:43.973
> 
> 标签：java, mysql, ubuntu, phpmyadmin

我正在用 java 开发一个独立的应用程序，我使用 MYSQL 作为数据库。我的代码在我的系统上运行良好。我正在使用 Ubuntu 操作系统。

当我试图在不同的系统上运行相同的代码时，它给了我上面的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-15T05:26:15.983

您需要在 Mysql 中授予权限

```
use the_database_name;

GRANT ALL PRIVILEGES ON 
the_database_name.* 
TO 
'the_user_name'@'%' 
IDENTIFIED BY 
'password_of_the_user';

FLUSH PRIVILEGES;
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:14:28.147

您需要[授予](http://dev.mysql.com/doc/refman/5.1/en/grant.html)对不同服务器的访问权限。设置用户 ID 和密码及其机器 IP 地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:05:27.420

我猜你的 myserver 不在第二个系统的网络中。

# xml - 使用带有 Xquery 的字典注释文本并打印整个结果

> ID：12598069
> 
> 赞同：2
> 
> 时间：2012-09-26T08:58:50.753
> 
> 标签：xml, text, xquery

我是 xquery 的初学者，希望您能帮我简单解释一下。我正在使用 BaseX 7.0.1。

我有一个如下所示的 dictionary.xml 文件：

```
<doc>
    <entry>
        <vedette>je</vedette>
        <variante>je</variante>
        <variante>j'</variante>
        <partiedudiscours>pronom</partiedudiscours>
    </entry>
</doc> 
```

我还有另一个 malone_fr.xml 文件，其中包含我要注释的文本，如下所示：

```
<doc>
    L’Opportunité 
    Par : Walter Malone (1866-1915)
    Ils ont mal conclu ceux qui disent que je ne reviendrai plus
    Quand une fois j’ai frappé à ta porte et ne t’ai pas rencontré,
</doc> 
```

所以我想将dictionary.xml 的< variante > 部分的内容与我的文本进行比较，并用< partiedudiscous > 的内容标记文本。到目前为止，我已经能够使用以下代码做到这一点：

```
let $comp := data(for $j in tokenize(for $i in db:open('malone_fr')/doc return $i,"\n") 
return tokenize($j," "))
for $aa in $comp
return
for $lemme in db:open('dictionnaire')/doc/entry
return
let $oldName :=$aa
return
if ($oldName= $lemme/variante)
then 
let $newName := element  {$lemme/partiedudiscours}  {$aa}
return
for $bb in $comp
return
if ($bb=$oldName)
then $newName 
else ($bb)
else () 
```

这给了我以下结果：[第一次迭代]

```
L’Opportunité  Par : Walter Malone (1866-1915) Ils<verbe>ont</verbe> mal conclu ceux qui disent que je ne reviendrai plus 
```

[第二次迭代]

```
L’Opportunité  Par : Walter Malone (1866-1915) <pronom>Ils</pronom>ont mal conclu ceux qui disent que je ne reviendrai plus 
```

如您所见，它仅通过迭代显示每个单词的结果，而我需要一个带有整个文本注释的结果，如下所示：

```
L’Opportunité  Par : Walter Malone (1866-1915) <pronom>Ils</pronom><verbe>ont</verbe> <adverbe>mal</adverbe> <verb>conclu</verb> 
```

等等。我不知道如何处理 for 循环来做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:56:07.627

我认为您的解决方案比它需要的要复杂一些。您应该能够在一个循环中完成此操作。使用 XPath 执行查找 - 而不是显式循环遍历字典中的所有值 - 将允许您的数据库优化以更快地检索字典数据。

```
let $toks := data(
    for $i in db:open('malone_fr')/doc 
    return tokenize($i,"\s"))
for $t in $toks
return
    let $e := $dict/entry[variante = $t]    
    return
        if ($e)
        then (element { $e/partiedudiscours } { $t }, text{" "})
        else ($t, text{" "}) 
```

此外，该`tokenize()`步骤会丢弃空格，因此输出序列中不存在空格。它只会出现间隔，因为这通常是呈现一系列原子类型的默认方法；但是，正如您从测试输出中看到的那样，空间不会在元素周围呈现。在上面的解决方案中，我添加了非常基本的空间处理，因此元素的间距也正确。`text{" "}`如果不需要节点，您可以删除它们。

*更新：添加了@DennisKnochenwefel 的建议*

# linux - 用于自动执行 ftp 操作的 linux 脚本

> ID：12598071
> 
> 赞同：1
> 
> 时间：2012-09-26T08:58:59.907
> 
> 标签：linux, shell, ftp

我需要将文件从我的 linux 服务器传输到 FTP 服务器。

我的外壳脚本是：

```
 #! /bin/ksh

    HOST='my_ip'
    USER='userid'
    PASSWD='password'
    FILE='file.txt'
    DIREC='/eir_log'
    ftp -in $HOST << EOMYF 
    user $USER $PASSWD
    binary
    mkdir $DIREC 
    cd $DIREC
    pwd
    quit
    EOMYF 
```

非常简单的代码。但问题是虽然我可以很好地登录 FTP 服务器，但它不允许我在 FTP 服务器中创建新目录。起初我认为我的脚本有一些错误，但即使我`mkdir`在 ftp 服务器中单独运行它的显示`create directory failed`。有人可以让我知道可能的错误，或者我的代码中是否有任何我遗漏的错误。`pwd`虽然工作正常，这意味着通过脚本登录 ftp 站点没有问题。

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T09:05:06.840

看看[期待](http://expect.sourceforge.net/)

让你开始的东西

```
#!/usr/bin/expect

set timeout 120
spawn ftp 192.168.0.210
expect "Name"
send "root\r"
expect "Password:"
send "pass\r"
expect "ftp> "
send "bye\r" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:02:08.897

可能 lftp（ftp 脚本客户端）将是您需要的东西（查看您的发行版的软件包）。创建目录时出错可能与您尝试在其中创建它的目录的权限有关。

[http://lftp.yar.ru/desc.html](http://lftp.yar.ru/desc.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:11:41.033

如果您是 root 或具有管理员权限，那么您不需要使用 sudo 来创建目录。最好在没有 sudo 的情况下运行远程命令，以防恶意代码捎带您的脚本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T09:04:40.317

您是否尝试过使用 SCP（安全副本）？

scp -r /dir/to/"file.txt" 用户名@主机名

*如果您位于要发送的文件/文件夹的目录中，则无需定义完整的文件路径

如果您想在不输入密码的情况下进行 scp，请查看这篇文章。[http://www.thegeekstuff.com/2008/06/perform-ssh-and-scp-without-entering-password-on-openssh/](http://www.thegeekstuff.com/2008/06/perform-ssh-and-scp-without-entering-password-on-openssh/)

# php - Codeigniter 2.1 - 路由

> ID：12598077
> 
> 赞同：1
> 
> 时间：2012-09-26T08:59:46.687
> 
> 标签：php, codeigniter, codeigniter-2

我对 CI 的路由有点陌生，而且我不太了解它（老实说一点也不）。我有以下需要更改的网址：

> domain.com/mali_oglasi/index/1（一些数字）

它用于分页，我需要将其缩短为：

> domain.com/mali_oglasi

我试过了：

> $route['mali_oglasi/index/(:num)'] = 'mali_oglasi';

但它似乎不起作用（没有任何改变）。我做错了什么，需要改变什么？

来自控制器**mali_oglasi**的索引函数：

```
function index() {     

    $config['base_url'] = base_url().'mali_oglasi/index';
    $config['total_rows'] = $this->db->count_all('ad');
    $config['per_page'] = 10;

    $this->pagination->initialize($config);
    $data['pagination_links'] = $this->pagination->create_links();

    $data['title'] = "Mali Oglasi | 010";
    $data['oglasi'] =  $this->mgl->mgl_get_all_home($config['per_page']);
    $data['loc'] = $this->gi_loc;
    $data['cat'] = $this->gi_cat;
    $data['stylesheet'] = $this->css;
    $data['main_content'] = 'mali_oglasi';

    $this->load->view('template',$data);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:10:13.857

您需要使用 .htaccess 来实现您想要实现的目标，更重要的是，“mod_rewrite”部分：

[https://www.google.co.uk/search?q=htaccess+rewrite](https://www.google.co.uk/search?q=htaccess+rewrite)

CodeIgniter 路由不会改变 URL 的外观，它只是改变它的目的地。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:10:38.447

尝试：

```
$route['mali_oglasi/(:num)'] = 'mali_oglasi/index/$1'; 
```

然后可以通过 domain.com/mali_oglasi/1 访问**您**的**domain.com/mali_oglasi/index/1**

 ****编辑：** 要松开 /1 只需执行以下操作：

```
 $route['mali_oglasi'] = 'mali_oglasi/index/1'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:11:10.737

尝试这个

```
$route['mali_oglasi/(:num)'] = 'mali_oglasi/index/$1'; 
```

它会帮助你 [http://codeigniter.com/user_guide/general/routing.html](http://codeigniter.com/user_guide/general/routing.html)

对于分页，你可以添加这个

```
$config['uri_segment'] = 3; 
```

它是可选的，但最好添加

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T09:07:30.263

Codeignitor 路由很简单

```
 serverpath(base_url)/controller/method(function)/para1/valu1/para2/valu2... 
```

您从定义 .htaccess 规则（创建文件）中隐藏索引文件。

更多信息请访问：[user_guide](http://codeigniter.com/user_guide/general/routing.html) in 很容易你就明白了。**

# java - 没有辅助布尔变量的中断继续？

> ID：12598078
> 
> 赞同：1
> 
> 时间：2012-09-26T08:59:56.600
> 
> 标签：java, label, break, goto, continue

在Java中，我有这样的代码：

```
boolean contains;
for (int i = 0; i < n; i++) {
    // get the current matrix value
    t = A[i][j];

    // check if it has been already considered
    contains = false;
    for (int z = 0; z < l; z++) {
        if (arrays[z].contains(t)) {
            contains = true; break;
        }
    }
    if (contains) continue;
    ...
} 
```

是否可以使用标签然后跳出内部循环并在没有布尔变量的情况下继续`contains`？

**我需要做中断继续而不是从所有循环中中断。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T09:01:20.880

```
outerLoop:
for (int i = 0; i < n; i++) {
    // get the current matrix value
    t = A[[i]][j];
    // check if it has been already considered
    for (int z = 0; z < l; z++) {
        if (arrays[z].contains(t)) {
            continue outerLoop;
        }
    }
} 
```

[Oracle 关于标记分支的文档](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T09:05:36.760

使用 labes 会导致意大利面条式代码使您的代码可读性降低。

您可以在其自己的返回布尔值的方法中提取内部 for 循环：

```
private boolean contains(/* params */) {
    for (int z = 0; z < l; z++) {
        if (arrays[z].contains(t)) {
            return true;
        }
    }
} 
```

并在外部for循环中使用它

```
for (int i = 0; i < n; i++) {
    // get the current matrix value
    t = A[[i]][j];

    // check if it has been already considered
    if (contains(/*params*/)) 
        continue;
    ...
} 
```

# php - 使用 Ghostscript 减小 PDF 文件大小

> ID：12598080
> 
> 赞同：0
> 
> 时间：2012-09-26T08:59:59.273
> 
> 标签：php, pdf, ghostscript

我正在从命令行使用 Ghostscript 来减小 PDF 文件的大小。我正在尝试的命令是

```
gswin64c -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 ^
         -dPDFSETTINGS=/screen -dNOPAUSE -dQUIET    ^
         -dBATCH -sOutputFile=C:\output.pdf C:\input.pdf 
```

input.pdf 在我的 C:\ 驱动器中

我收到以下错误

```
Could not open file C:\output.pdf
Unable to open the initial device, quitting 
```

之前遇到过这个问题的任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:27:32.727

上述错误的解决方案是您输出文件的权限。如果您在 output.pdf 目录中没有写入权限，您将遇到上述错误。因此，在执行命令之前，请确保您具有写访问权限。

希望它会帮助别人谢谢

# forms - 如何在 Symfony 2 中的第一个错误上停止表单验证

> ID：12598083
> 
> 赞同：2
> 
> 时间：2012-09-26T09:00:03.020
> 
> 标签：forms, validation, symfony

如何在 Symfony 2 中的第一个错误上停止表单验证 例如，我有表单的映射类：

```
/**
* @Assert\Regex(pattern="/^\d+$/i", message="Non positive")
* @Assert\Max(limit="2147483647", message="Too big value")
*/
protected $myField 
```

当我用错误的值填写此字段时，我遇到了两个错误例如，如果我在表单输入中填写“-10”并将其发送到服务器，我将收到两个错误：

*   非阳性
*   价值太大

有人知道我如何在第一次失败后停止验证吗？

PS我知道我可以编写自己的验证器（smth like `Chainvalidator`），但我正在寻找 symfony 解决方案......

# asp.net - 安装 .net 4.5 后，某些性能计数器显示错误值

> ID：12598085
> 
> 赞同：8
> 
> 时间：2012-09-26T09:00:08.727
> 
> 标签：asp.net, performancecounter

在 Windows Web Server 2008 R2 上安装 .NET 4.5 后，一些性能计数器显示错误的值。我正在使用内置的性能监视器并查看组 ASP.NET Apps v4.0.30319 的计数器匿名请求/秒和请求执行。

在这些值反映当前负载的波动值之前，但现在它们会随着每个请求而增加，因此它们的行为更像 Total Requests 和 Total Requests Executing。

我们已经在生产环境和内部服务器上看到了相同的行为。

你们中有人见过同样的行为吗，我在谷歌搜索时可以找到任何东西。

问候帕特里克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T17:21:32.387

现已提供此问题的修复程序。[http://support.microsoft.com/kb/2805227](http://support.microsoft.com/kb/2805227) for windows8 和[http://support.microsoft.com/kb/2805226](http://support.microsoft.com/kb/2805226) for windows 7 平台。因此不再需要以下解决方法。

此问题的解决方法是从 4.​​5 安装目录执行以下命令，（例如“%systemroot%\Microsoft.Net\Framework64\v4.0.30319”）

1.  aspnet_regiis -u

2.  aspnet_regiis -I 或 aspnet_regiis -iru

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T15:06:04.230

想到的一件事是对此注册表项的权限：

```
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\version of ASP.NET\Names 
```

我会首先检查这些并确保它们是正确的。如果您有多个版本，您甚至可以交叉检查/比较设置（即，如果 2.0 仍然可以正常工作）..

# unit-testing - 在 Jenkins 中构建子项目时，Sonar 中未显示单元测试结果

> ID：12598086
> 
> 赞同：3
> 
> 时间：2012-09-26T09:00:10.833
> 
> 标签：unit-testing, maven, jenkins, sonarqube

我在 Jenkins 中配置了一些 maven 项目，并从父项目中执行它们（`<modules`在其 pom.xml 中将它们作为 >，子项目将此项目定义为`<parent`>）。

在 Jenkins 中，每个项目的单元测试都成功执行并显示了结果，但是在 Sonar 中，所有项目都显示为没有单元测试。

每个项目的声纳配置是

```
sonar.projectKey=project:key
sonar.projectName=project_name
sonar.projectVersion=1.0
sources=src/main/java
tests=src/test/java
binaries=target/classes 
```

为了让 Sonar 获取正在执行的单元测试的结果，我是否需要做任何其他事情？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T09:31:11.210

据我所知，我猜您正在尝试使用 Sonar Jenkins 插件“on-the-fly”模式运行 Sonar 分析，您可以在其中指定属性。

您必须了解此模式不支持运行测试：它只能重用测试报告（如果您指定“sonar.dynamicAnalysis=reuseReports”）。

但是当您使用 Maven 时，为什么不直接运行 Sonar 构建后操作呢？（参见[文档](http://docs.codehaus.org/display/SONAR/Activate+Sonar+on+Jenkins+job)）

# php - php：从 facebook 组中检索信息

> ID：12598091
> 
> 赞同：0
> 
> 时间：2012-09-26T09:00:20.843
> 
> 标签：php, facebook

我正在寻找一种方法来为 facebook 组编写一些统计信息，该组显示最活跃的成员、评论最多的帖子等信息。

我试图解析该组的电子邮件通知，不幸的是 facebook 不会通知每个事件。

所以我正在考虑直接从 facebook 组进行冰壶练习。有没有办法做到这一点，或者可以通过 facebook api 吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:06:58.257

我认为你最好的选择是[Facebook Grap API](http://developers.facebook.com/docs/reference/api/)。

检查此[图形 API - 组](http://developers.facebook.com/docs/reference/api/group/)：http: [//developers.facebook.com/docs/reference/api/group/](http://developers.facebook.com/docs/reference/api/group/)

希望这有帮助！

# c# - 行动代表的协变和逆变

> ID：12598096
> 
> 赞同：0
> 
> 时间：2012-09-26T09:01:05.220
> 
> 标签：c#

我被卡住了，为什么这不起作用：

```
 var childAction = new Action<CancelCommand>(blabla);
  Action<IDomainCommand> upperAction = (Action<IDomainCommand>) childAction; 
```

如果 CancelCommand 实现了 IDomainCommand，为什么这不起作用？顺便说一句：这是我在这里想要做的协变还是逆变？;)

提前谢谢你，最好的劳林

**编辑** 谢谢你们的快速回复！

我需要这个的问题是因为我构造了一个通用的动作模板。我有以下界面：

```
IMessageBus.RegisterAction<T>(Action<T> registerAction) where T : IDomainCommand 
```

因为我必须在运行时构建此操作，所以我的代码如下所示：

```
var genericExecuteAction = this.GetType().GetMethod("ExecuteCommandAction",
                                                            BindingFlags.NonPublic | BindingFlags.Instance).MakeGenericMethod(commandType);

var actionType = typeof(Action<>).MakeGenericType(commandType);
var @delegate = Delegate.CreateDelegate(actionType, this, genericExecuteAction);
var actionDelegate = (Action<DomainCommandBase>)@delegate;

messageBus.Register(actionDelegate); 
```

问题是我需要转换它以便我可以将它传递给这个方法。你看？我们使用的消息总线背后是使用 RX，不幸的是那里的所有方法都使用泛型，现在有一个非泛型重载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:09:23.327

的类型参数`Action`是逆变的：您可以将 an 分配给 an `Action<object>`，`Action<string>`因为显然可以在任何对象上工作的方法也可以在字符串上工作。

您在这里所做的是尝试将适用于`CancelCommand`（派生类型）的方法计为适用于任何`IDomainCommand`（基本类型）的方法。这在逻辑上是错误的，所以编译器不允许你这样做——如果是这样，你可以调用`upperAction`传递给它一个`DifferentTypeOfDomainCommand`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:10:38.787

等等，你为什么要这个工作？

你`childAction`是接受 a`CancelCommand`并用它做某事的东西。

但`upperAction`可以在**任何** `IDomainCommand`上调用，而不仅仅是`CancelCommand`. 假设以上编译；当我这样做时应该发生什么

```
upperAction(new EditCommand()); 
```

在哪里`class EditCommand : IDomainCommand`？

如果您尝试相反的分配：

```
 var upperAction = new Action<IDomainCommand>(idc => { });
        Action<CancelCommand> childAction = upperAction; 
```

它有效，您甚至不需要演员表。任何都`Action<IDomainCommand>`算作`Action<CancelCommand>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:09:57.053

这是逆变。这是行不通的，因为如果可以的话，您可以编写如下内容：

```
interface IDomainCommand { }
class CancelCommand : IDomainCommand { }
class AcceptCommand : IDomainCommand { }

        Action<CancelCommand> a1 = c => { };
        Action<IDomainCommand> a2 = a1;

        var acceptCommand = new AcceptCommand();

        a2(acceptCommand); // what??? 
```

`a2`指向`a1`，并且 a1 不能接受`AcceptCommand`参数，因为它不是 a `CancelCommand`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-22T14:46:05.560

您忘记了如何使用这些代表

```
var childAction = new Action<CancelCommand>(blabla);
Action<IDomainCommand> upperAction = (Action<IDomainCommand>) childAction; 
```

意味着`upperAction`将在将来的某个时间点被调用，传递某种形式的`IDomainCommand`对象。你给它一个只能处理`CancelCommand`对象的函数。但是（可能）还有其他实现 的类`IDomainCommand`，并且`upperAction`可以用它们中的任何一个来调用。

# java - 如何分别从 HashMap 获取对象？

> ID：12598098
> 
> 赞同：5
> 
> 时间：2012-09-26T09:01:09.443
> 
> 标签：java, hashmap

> **可能重复：**
> [如何遍历地图中的每个条目？](https://stackoverflow.com/questions/46898/how-do-i-iterate-over-each-entry-in-a-map)

我制作了个人资料数据库，并使用 HashMap 来收集资料。

`private HashMap<String, Profile> database;`

但我想将配置文件数据写入文本文件

```
PrintWriter fileOut = new PrintWriter(new FileWriter(fileName));
fileOut.println(database.size());
for(int i = 0; i < database.size();i++){
 Profile eachProfile = database.get(key);
} 
```

但我不知道如何获取循环的关键列表如何分别用另一种方式从 HashMap 获取数据？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T09:04:15.700

您可以使用[`Map.entrySet()`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#entrySet%28%29)和扩展`for`：

```
for (Map.Entry<String, Profile> e: database.entrySet())
{
    String s  = e.getKey();
    Profile p = e.getValue();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:05:21.160

在这里查看地图文档：http: [//docs.oracle.com/javase/7/docs/api/java/util/Map.html](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)

您想要一个可用的所有键的列表`keySet()`。`values()`和`entrySet()`方法是相关的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:06:13.360

您可以使用[map.keySet](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html#keySet%28%29)来获取键集。您可以使用[map.values](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html#values%28%29)来获取值的集合

# ffmpeg - 使用 ffmpeg 将 avi 转换为 3gp

> ID：12598108
> 
> 赞同：1
> 
> 时间：2012-09-26T09:01:49.287
> 
> 标签：ffmpeg, avi, mpeg-4

我想将 avi 文件转换为 3gp，编解码器为 mpeg4 简单配置文件级别 0。但我无法使用 ffmpeg 执行此操作，它给出了此错误请求的输出格式“-vcodec”不是合适的输出格式。如何修复此帮助！提前感谢注意 - 输入 avi 是使用 ffmpeg 和编解码器 ffv1 从 bmp 图像生成的 720x480。输出 3gp 应该是 mpeg4 简单配置文件级别 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:05:10.887

试试这个..希望这会帮助你

```
ffmpeg -i input.AVI -acodec libfaac -ab 128k -ar 44100 -s 704x400 -r 20 -vcodec libx264 -b 256000 -cmp +chroma -partitions +parti4x4+partp8x8+partb8x8 -me_method umh -subq 5 -trellis 1 -refs 2 -bf 1 -coder 1 -me_range 16 -g 300 -keyint_min 25 -sc_threshold 40 -i_qfactor 0.71 -bt 256000 -maxrate 4M -bufsize 4M -rc_eq 'blurCplx^(1-qComp)' -qcomp 0.6 -qmin 10 -qmax 51 -qdiff 4 -level 21 output.3gp 
```

这会将您的 avi 转换为 3gp。根据您的需要尝试不同的格式作为输入和输出文件

注意： - 根据您的需要更改参数，例如“级别”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:49:14.607

原文来自：http://forum.videohelp.com/threads/322328-libfaac-encoding-with-ffmpeg

这对我有用：

```
工具/ffmpeg/./ffmpeg -i debug/assets/videos/sample_iPod.mp4 -acodec libvo_aacenc -vcodec libx264 debug/assets/videos/sample_iPod.3gp

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-24T15:09:04.057

这家伙想要它在 mpeg4 编解码器而不是 x264 中。

就是这样：

```
ffmpeg.exe -i input.avi -acodec libvo_aacenc -ab 64k -vcodec mpeg4 -s 320x240 -b:v 400k -r 23.976 output.3gp 
```

在某些手机中，320x240 可能看起来有弹性，在这种情况下，请改用 320x180

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-28T22:59:05.090

你可以试试这个：

```
ffmpeg -y -i test.mpeg -r 20 -s 352x288 -b 400k -acodec aac -strict experimental -ac 1 -ar 8000 -ab 24k test.3gp 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-30T08:49:40.070

以下代码工作正常：

```
ffmpeg -y -i test.mpeg -r 20 -s 352x288 -b 400k -acodec aac -strict experimental -ac 1 -ar 8000 -ab 24k test.3gp 
```

# c - 我可以在软件中断上下文中使用 free_irq 吗？

> ID：12598116
> 
> 赞同：0
> 
> 时间：2012-09-26T09:02:17.417
> 
> 标签：c, linux-kernel, irq

内核文档说明[`free_irq`](http://www.kernel.org/doc/htmldocs/kernel-api/API-free-irq.html)了以下内容：

> 不得从中断上下文中调用此函数。

它包括软件中断吗？如何在软件 IRQ 函数中释放 IRQ？

谢谢你的帮助，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:59:39.363

是的，该规则包括软中断上下文。您认为需要`free_irq()`从 softirq 上下文调用的事实表明您的设计有点不同寻常——在正常情况下，`free_irq()`在设备关闭时使用，这几乎总是来自进程上下文。

但是，如果您确实需要这样做，则要做的是将其推迟到通过`schedule_work()`或某些类似的工作队列功能处理上下文。当然，您不能在 softirq 中等待延迟的工作完成，因此您还必须推迟释放 IRQ 之后的任何其他工作。

`free_irq()`如果您提供更多有关您尝试从中断上下文调用的原因的信息，则可能会给出更好的答案。

# mysql - 具有动态列的 MySQL 数据透视表查询

> ID：12598120
> 
> 赞同：39
> 
> 时间：2012-09-26T09:02:27.730
> 
> 标签：mysql, dynamic, pivot

我使用下表来存储产品数据：

```
mysql> SELECT * FROM product;
+---------------+---------------+--------+
| id | name     | description   | stock  |
+---------------+---------------+--------+
|  1 | product1 | first product |    5   | 
|  2 | product2 | second product|    5   | 
+---------------+---------------+--------+

mysql> SELECT * FROM product_additional;
+-----------------+------------+
| id | fieldname  | fieldvalue |
+-----------------+------------+
|  1 | size       | S          |
|  1 | height     | 103        |
|  2 | size       | L          |
|  2 | height     | 13         |
|  2 | color      | black      |
+-----------------+------------+ 
```

使用以下查询从两个表中选择记录

```
mysql> SELECT 
    p.id
    , p.name
    , p.description
    ,MAX(IF(pa.fieldname = 'size', pa.fieldvalue, NULL)) as `size`
    ,MAX(IF(pa.fieldname = 'height', pa.fieldvalue, NULL)) as `height`
    ,MAX(IF(pa.fieldname = 'color', pa.fieldvalue, NULL)) as `color`
FROM product p
LEFT JOIN product_additional AS pa ON p.id = pa.id
GROUP BY p.id
+---------------+---------------+--------+---------+--------+
| id | name     | description   | size   | height  | color  |
+---------------+---------------+--------+---------+--------+
|  1 | product1 | first product | S      | 103     | null   |
|  2 | product2 | second product| L      | 13      | black  |
+---------------+---------------+--------+---------+--------+ 
```

一切正常:)

因为我动态地填充了“附加”表，所以如果查询也是动态的，那就太好了。这样，每次我输入新的字段名和字段值时，我都不必更改查询。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-26T10:11:35.867

MySQL 中动态执行此操作的唯一方法是使用 Prepared 语句。这是一篇关于它们的好文章：

[动态数据透视表（将行转换为列）](http://buysql.com/mysql/14-how-to-automate-pivot-tables.html)

您的代码如下所示：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(IF(pa.fieldname = ''',
      fieldname,
      ''', pa.fieldvalue, NULL)) AS ',
      fieldname
    )
  ) INTO @sql
FROM product_additional;

SET @sql = CONCAT('SELECT p.id
                    , p.name
                    , p.description, ', @sql, ' 
                   FROM product p
                   LEFT JOIN product_additional AS pa 
                    ON p.id = pa.id
                   GROUP BY p.id, p.name, p.description');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

看[演示](https://dbfiddle.uk/?rdbms=mysql_5.6&fiddle=8ccb03ccb791df3c8df3f4715321fce3)

注意： GROUP_CONCAT 函数有 1024 个字符的限制。见参数 group_concat_max_len

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-06-15T18:37:15.980

我这样做的方式与接受的答案略有不同。这样，您可以避免使用默认限制为 1024 个字符的 GROUP_CONCAT，如果您有很多字段，除非您更改限制，否则将无法使用。

```
SET @sql = '';
SELECT
    @sql := CONCAT(@sql,if(@sql='','',', '),temp.output)
FROM
(
    SELECT
      DISTINCT
        CONCAT(
         'MAX(IF(pa.fieldname = ''',
          fieldname,
          ''', pa.fieldvalue, NULL)) AS ',
          fieldname
        ) as output
    FROM
        product_additional
) as temp;

SET @sql = CONCAT('SELECT p.id
                    , p.name
                    , p.description, ', @sql, ' 
                   FROM product p
                   LEFT JOIN product_additional AS pa 
                    ON p.id = pa.id
                   GROUP BY p.id, p.name, p.description');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

[点击这里进行演示](https://www.db-fiddle.com/f/raewH6v4SJUh3nFfe7Nv7J/0)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-22T13:32:54.523

这是存储过程，它将根据一个表和列中的数据以及其他表和列中的数据生成表。

使用函数 'sum(if(col = value, 1,0)) as value '。您可以从不同的函数中进行选择，例如 MAX(if()) 等。

```
delimiter //

  create procedure myPivot(
    in tableA varchar(255),
    in columnA varchar(255),
    in tableB varchar(255),
    in columnB varchar(255)
)
begin
  set @sql = NULL;
    set @sql = CONCAT('select group_concat(distinct concat(
            \'SUM(IF(', 
        columnA, 
        ' = \'\'\',',
        columnA,
        ',\'\'\', 1, 0)) AS \'\'\',',
        columnA, 
            ',\'\'\'\') separator \', \') from ',
        tableA, ' into @sql');
    -- select @sql;

    PREPARE stmt FROM @sql;
    EXECUTE stmt;

    DEALLOCATE PREPARE stmt;
    -- select @sql;

    SET @sql = CONCAT('SELECT p.', 
        columnB, 
        ', ', 
        @sql, 
        ' FROM ', tableB, ' p GROUP BY p.',
        columnB,'');

    -- select @sql;

    /* */
    PREPARE stmt FROM @sql;
    EXECUTE stmt;
    /* */
    DEALLOCATE PREPARE stmt;
end//

delimiter ; 
```

# apache - 首次使用后无法访问 Apache 重写反向引用变量

> ID：12598123
> 
> 赞同：0
> 
> 时间：2012-09-26T09:02:35.123
> 
> 标签：apache, mod-rewrite

我遇到了一个对我来说似乎很奇怪的情况。似乎构建 apache 重写规则时的反向引用变量在第一次使用后会丢失。

我的要求是更改旧的 URL 模式以符合新的路径模式，例如：

```
www.example.com/documents/newsletter/newsletter-issue-50.htm 
```

成为

```
www.example.com/sites/default/newsletter/50/English/newsletter-issue-50.htm 
```

如您所见，新的 URL 模式需要在 2 个位置指定问题编号。

我的重写规则如下：

```
RewriteRule ^documents/newsletter/newsletter-issue-(.*).htm$ http://www.example.com/sites/default/newsletter/$1/English/newsletter-issue-$1.htm [R=301,L] 
```

当我使用这个规则时，我仍然得到一个 404，因为结果 URL 没有用问题号替换第二个“$1”，在本例中是“50”。我得到的是

```
http://www.example.com/sites/default/newsletter/50/English/newsletter-issue-.htm 
```

我已经使用[了这个](http://martinmelin.se/rewrite-rule-tester/)测试站点，它确认第二个反向引用变量根本没有被评估。我肯定在这里遗漏了一些东西，因为它应该是一个简单的规则。

对此的任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:12:34.827

奇怪的是，如果你用两组括号括起来，我会在重写测试器中工作：

```
RewriteRule ^documents/newsletter/newsletter-issue-((.*))[.]htm$ http://www.example.com/sites/default/newsletter/$1/English/newsletter-issue-$1.htm [R=301,L] 
```

我还转义了文件扩展名前缀

# database - 对于两个重要列是一些 ID 的表，最好的分区方法是什么？数据库是 Oracle 11g

> ID：12598126
> 
> 赞同：1
> 
> 时间：2012-09-26T09:02:40.473
> 
> 标签：database, performance, oracle11g, partitioning, database-performance

目标是减少 COLUMN_1 从表查询中删除的时间。现在这可能需要 15-30 分钟。

目前表中的数据被级联规则删除。COLUMN_1 是外键。我想更改此方法以在删除父行时在 BEFORE 触发器中截断整个分区。

此外，数据是通过 COLUMN_2 从应用程序中查询的。

这两列的关系如下所示：

```
COL_1    COL_2
 1       1
         2
         3
         4
 2      
         5
         6
         7
         8
         9
         10
 3      
         11
         12
         13
... 
```

两者分别有索引。表有数百万条记录。有很多插入和读取操作。

经过一些研究（[oracle doc](http://docs.oracle.com/cd/B28359_01/server.111/b32024/part_admin.htm#BAJHFFBE)）我会使用范围-范围分区
我需要动态创建分区，所以范围间隔分区可能是合适的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T14:55:29.107

有两种选择：

将分区 N_Partition 切换到新的空表并截断该表：

```
    更改表 big_table
    交换分区 N_partition
    WITH TABLE table_to_be_truncated
    包括索引
    未经验证
    更新全球指数；

    截断表 table_to_be_truncated

```

*   或截断分区

```
    ALTER TABLE big_table TRUNCATE PARTITION N_partition
    更新索引；

```

这是一篇很好的文章，描述了您可以使用分区做什么：[维护分区](http://docs.oracle.com/cd/E11882_01/server.112/e25523/part_admin002.htm#i1008226)

# c# - 当服务器有结果时通知客户端

> ID：12598128
> 
> 赞同：0
> 
> 时间：2012-09-26T09:02:42.963
> 
> 标签：c#, asp.net, push-notification

我想让一些数据在互联网上可用。我有 asp.net 托管，但我的数据库大小超出了我的托管计划允许的范围。所以我决定做以下事情：我有一个站点，您可以在其中输入要搜索的数据。然后这个搜索字符串以唯一的引用键存储在数据库中。我的电脑每两秒就会查找一次完整的数据库，看看是否有新的请求并写入这个请求的结果。接下来，如果客户使用指定的唯一参考密钥再次询问，他会得到答案。我想知道有没有办法实现以下目标：用户输入搜索字符串，按搜索，当结果出现在数据库中时，它被推送给用户？数据库中出现的结果是指某个字段的值从 null 更改为 XML 格式的某个字符串。谢谢你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:21:42.453

根据您使用的框架版本，您可以按照以下方式进行操作
[http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4](http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4)

# highcharts - 具有主详细信息和句柄的高图表

> ID：12598131
> 
> 赞同：0
> 
> 时间：2012-09-26T09:02:49.803
> 
> 标签：highcharts

我正在使用 highcharts 来构建图表，我需要使用它公开的 api 来做某些事情。但是我希望我的图表是一个主细节类型的图表，就像 highstock 库中的那个，但上面有句柄。

我知道我可以在 highcharts 中创建一个主详细信息，但它似乎没有用于拖动所选范围的句柄。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:58:29.953

最后，我使用了 highstock 并在“主”图表中找到了一个包含多个系列的示例，该示例被称为 highstock 图表的“导航器”。

示例：http: [//jsfiddle.net/davidoleary/NudSK/](http://jsfiddle.net/davidoleary/NudSK/)

# php - 如何使用会话将值从一个php页面传递到另一个页面

> ID：12598133
> 
> 赞同：4
> 
> 时间：2012-09-26T09:03:07.180
> 
> 标签：php, session, post

我可以将值从一个页面传递到另一个页面，但我需要像这样传递值，

第 1 页：

Page4.php

Page3.php

我需要将Page1.php中的文本字段中的值传递给Page2.php中的文本字段，因为表单没有直接重定向到page2，我无法传递值，我尝试了会话，表单发布方法和其他几种方法，但我还没有成功。

如果您能帮助我提供代码或一些建议，我将非常高兴。

谢谢！

编辑..........

我找到了答案，感谢您的帮助，这实际上是我的一个粗心错误，我使用了 $_post 而不是 $_session。

它现在工作。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T09:05:11.470

使用这样的东西：

page1.php

```
<?php
session_start();
$_SESSION['myValue']=3; // You can set the value however you like.
?> 
```

任何其他 PHP 页面：

```
<?php
session_start();
echo $_SESSION['myValue'];
?> 
```

不过要记住一些注意事项：您需要`session_start()`在任何输出、HTML、回显之前调用 - 甚至是空格。

您可以在会话中不断更改值 - 但它*只能*在第一页之后使用 - 这意味着如果您在第 1 页中设置它，您将无法使用它，直到您到达另一个页面或刷新页。

变量本身的设置可以通过多种方式之一完成：

```
$_SESSION['myValue']=1;
$_SESSION['myValue']=$var;
$_SESSION['myValue']=$_GET['YourFormElement']; 
```

如果您想在出现潜在错误之前检查变量是否已设置，请使用以下内容：

```
if(!empty($_SESSION['myValue'])
{
    echo $_SESSION['myValue'];
}
else
{
    echo "Session not set yet.";
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T09:16:26.170

仅使用 POST 的解决方案 - 没有 $_SESSION

page1.php

```
<form action="page2.php" method="post">
    <textarea name="textarea1" id="textarea1"></textarea><br />
    <input type="submit" value="submit" />
</form> 
```

page2.php

```
<?php
    // this page outputs the contents of the textarea if posted
    $textarea1 = ""; // set var to avoid errors
    if(isset($_POST['textarea1'])){
        $textarea1 = $_POST['textarea1']
    }
?>
<textarea><?php echo $textarea1;?></textarea> 
```

* * *

使用 $_SESSION 和 POST 的解决方案

page1.php

```
<?php

    session_start(); // needs to be before anything else on page to use $_SESSION
    $textarea1 = "";
    if(isset($_POST['textarea1'])){
        $_SESSION['textarea1'] = $_POST['textarea1'];
    }

?>

<form action="page1.php" method="post">
    <textarea name="textarea1" id="textarea1"></textarea><br />
    <input type="submit" value="submit" />
</form>
<br /><br />
<a href="page2.php">Go to page2</a> 
```

page2.php

```
<?php
    session_start(); // needs to be before anything else on page to use $_SESSION
    // this page outputs the textarea1 from the session IF it exists
    $textarea1 = ""; // set var to avoid errors
    if(isset($_SESSION['textarea1'])){
        $textarea1 = $_SESSION['textarea1']
    }
?>
<textarea><?php echo $textarea1;?></textarea> 
```

* * *

警告！！！- 这不包含验证！！！

# c# - 使用 C# 运行 Active Directory shell 命令

> ID：12598141
> 
> 赞同：0
> 
> 时间：2012-09-26T09:03:33.767
> 
> 标签：c#, shell, scripting, active-directory, cmd

我正在编写一个模块，它将在特定域控制器上执行与 Active Directory 和其他 shell 命令相关的任何类型的 shell 命令。

某些命令可以正常工作，但某些命令不能正常工作。

这是代码

```
public static void ExecuteShellCommand(string _FileToExecute, string _CommandLine, ref string _outputMessage, ref string _errorMessage)
{
    System.Diagnostics.Process _Process = null;

    try
    {
       _Process = new System.Diagnostics.Process();

       string _CMDProcess = string.Format(System.Globalization.CultureInfo.InvariantCulture, @"{0}\cmd.exe", new object[] { Environment.SystemDirectory });

       string _Arguments = string.Format(System.Globalization.CultureInfo.InvariantCulture, "{0}", new object[] { _FileToExecute });

       _Arguments = string.Format(" /C \"{0}\"", _Arguments);
       Console.WriteLine("---aruguments quering : cmd.exe" + _Arguments);                
       System.Diagnostics.ProcessStartInfo _ProcessStartInfo = new System.Diagnostics.ProcessStartInfo(_CMDProcess, _Arguments);               
       _ProcessStartInfo.CreateNoWindow = true;                
       _ProcessStartInfo.UseShellExecute = false;                
       _ProcessStartInfo.RedirectStandardOutput = true;
       _ProcessStartInfo.RedirectStandardInput = true;
       _ProcessStartInfo.RedirectStandardError = true;
       _Process.StartInfo = _ProcessStartInfo;
       //_ProcessStartInfo.Domain = System.DirectoryServices.ActiveDirectory.Domain.GetCurrentDomain().Name;

       _Process.Start();

       _errorMessage = _Process.StandardError.ReadToEnd();
       _Process.WaitForExit();

       _outputMessage = _Process.StandardOutput.ReadToEnd();
       _Process.WaitForExit();
    }
    catch (Exception _Exception)
    {                
        Console.WriteLine("Exception caught in process: {0}", _Exception.ToString());
    }
    finally
    {
       _Process.Close();
       _Process.Dispose();
       _Process = null;
    }
}

CommandExecutionEngine.ExecuteShellCommand("nltest", "/logon_query /server:india.cobra.net", ref output, ref error);
Console.WriteLine("output for dir : " + output + " error : " + error); 
```

命令：

```
repadmin /showrepl

dcdiag

dcdiag /s:<dcname 
```

命令 nltest 正在执行但不返回任何结果。其他提到的给出错误的命令不被识别为内部或外部命令。如果我直接从控制台执行命令，它的工作正常。

在这里，我在域管理员帐户的上下文中调用一个进程，这样我就不会遇到任何权限问题。

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:41:41.797

可能由于 UseShellExecute = false，找不到应用程序位置。使用完整路径。

# android - android ICS 和 Jelly Bean 上的流式音频延迟是真的吗？

> ID：12598144
> 
> 赞同：1
> 
> 时间：2012-09-26T09:03:36.507
> 
> 标签：android, audio, streaming, android-4.0-ice-cream-sandwich, latency

网上的人给出的延迟数大约为 88 毫秒，运行 ICS 的 Galaxy Nexus 和运行 JB 4.1.1 的 Nexus 7 的 72 毫秒我已经尝试过 AudioTrack 和 OpenES，发现我在任一设备上都无法获得低于 140 毫秒的延迟。我错过了什么吗？我已将输出线程设置为 URGENT_AUDIO 优先级，以小块（例如 160 个短裤）传递音频并使用最小缓冲区大小（在 AudioTrack 情况下）。

引用的数字是否仅对通过 SoundPool 播放的短声音有效，不适用于流式 PCM？为了清楚起见，我说的只是回放而不是录音。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T14:52:29.907

这是机器人肮脏的小秘密。它不是固定的，你只需要一个应用程序、一只耳朵和一根手指就能找到真相。

# algorithm - Vim：排序命令的算法

> ID：12598145
> 
> 赞同：2
> 
> 时间：2012-09-26T09:03:37.227
> 
> 标签：algorithm, vim

有谁知道使用`:sort`命令时 Vim 内部使用的是哪种算法？
用于排序 10 行的算法是否与用于排序 10000 行的算法相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T09:22:31.473

Vim 是开源的；你为什么不自己看看呢？通过在线 Mercurial 存储库最简单：

[http://code.google.com/p/vim/source/browse/src/ex_cmds.c](http://code.google.com/p/vim/source/browse/src/ex_cmds.c)

Vim 将实际排序委托给`qsort()`库函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:50:09.283

如果可用，则使用外部`sort`程序。内部算法未记录。

***编辑***

好吧，“未记录在案”`:help :sort`并不能解释内部算法是如何工作的”。

# jquery - 使用jquery填充输入图像

> ID：12598147
> 
> 赞同：0
> 
> 时间：2012-09-26T09:03:41.457
> 
> 标签：jquery, image, html, input, move

我有点失落。我真的不知道这是否可能。我有许多带有数字“1”、“2”的图像，依此类推......

问题是我想通过将图像移动到输入中来填充输入。实际上我需要在输入中写下数字，而且我有很多输入，所以有时我会误导。

通过移动图像，如果图像不存在，我会知道使用了一个数字。因此，如果输入已用图像填充，它应该使图像消失。

我真的不知道这样的事情是否可行。我一直在寻找它很长时间，但我没有找到任何东西。

# php - PHP 从 JSON 中获取值

> ID：12598149
> 
> 赞同：2
> 
> 时间：2012-09-26T09:03:42.650
> 
> 标签：php, json

假设我有这个 JSON：

```
{
  "achievement": [
    {
      "title": "Ready for Work",
      "description": "Sign up and get validated",
      "xp": 50,
      "difficulty": 1,
      "level_req": 1
    },
    {
      "title": "All Around Submitter",
      "description": "Get one piece of textual content approved in all five areas.",
      "xp": 500,
      "difficulty": 2,
      "level_req": 1
    }
} 
```

我正在通过 PHP 尝试这个：

```
$string = file_get_contents("achievements.json");
$json_a=json_decode($string,true);

$getit = $json_a->achievement['title'][1]; 
```

我正在尝试获得成就的第一个“id”。这将是`READY FOR WORK`.

我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T09:06:06.213

当您设置 to 的第二个参数时`json_decode`，`true`它将返回一个数组。

```
$json_a=json_decode($string,true); 
```

返回一个数组。

```
$getit = $json_a['achievement'][1]['title']; 
```

# c++ - 向量下标超出范围，调试断言失败

> ID：12598156
> 
> 赞同：1
> 
> 时间：2012-09-26T09:04:14.327
> 
> 标签：c++, visual-c++

我正在为图形程序编写 C++ 代码，在其中我必须收集所有坐标以便稍后解析它们。我正在尝试使用相同的向量，但返回以下错误：

> 调试断言失败
> 程序：....
> 文件：....
> 第932行
> 表达式：向量下标超出范围

这是我的代码的一部分：

```
std::vector<float> coordinates;
//random code
if(dnew >= 0)
{
   x = x + 1.0;

   glPointSize(1.5f);
   glColor3f(0.0,1.0,1.0);
   glBegin(GL_POINTS);
   glVertex2f(x, y);
   glEnd();
   dnew = dnew + a;
   if(t == 1)
   {
       coordinates.push_back (x);
   }
}

cout <<coordinates[1]; 
```

当我按下重试时，它会将我带到 stdthrow.cpp 并指向以下行：

```
_CRTIMP2_PURE void __CLRCALL_PURE_OR_CDECL _Debug_message(const wchar_t *message, const     wchar_t *file, unsigned int line)
{
    // report error and die
    if(::_CrtDbgReportW(_CRT_ASSERT, file, line, NULL, message)==1)
    {
        ::_CrtDbgBreak();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:08:40.960

如果引发异常，则可能会导致此错误`coordinates.size()<= i`，该异常会为您提供尝试访问元素超出向量范围的信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:10:09.150

您只需将一个元素推入坐标，因此唯一有效的索引是`0`. `coordinates[1]`因此是向量末尾的一个。

此外，有两种情况可能会阻止发生的`push_back`情况，所以很可能是，你的向量是空的。但是您无条件地访问向量的第二个元素。

# c# - 在 C# 中继承网络接口

> ID：12598162
> 
> 赞同：0
> 
> 时间：2012-09-26T09:04:53.483
> 
> 标签：c#, .net, inheritance, network-programming, network-interface

我在网上搜索了继承[System.Net.NetworkInformation.NetworkInterface](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkinterface.aspx)的示例，但我看不到任何优雅的解决方案。静态方法似乎`NetworkInterface.GetAllNetworkInterfaces()`返回了一个名为`SystemNetworkInterface`.

基本上我想将它继承到一个名为的类`ManagedNetworkInterface`中并为其添加一些额外的功能。谁能想到如何做到这一点的优雅解决方案？我试过了，但每次都有东西阻止我死在我的轨道上！

**编辑1：**

通过将实现转换回`NetworkInterface`然后再转换来提供实现是否可以接受`ManagedNetworkInterface`？

...这个例子看起来很乱！

```
ManagedNetworkInterface mni = (ManagedNetworkInterface)(NetworkInterface)NetworkInterface.GetAllNetworkInterfaces()[0]; 
```

**编辑2：**

我也想过使用类似组合的模型......

```
public class ManagedNetworkInterface : NetworkInterface
{
    private NetworkInterface ni;

    public override string Description
    {
        get { return ni.Description; }
    }

    //ect...
} 
```

这是个好主意还是坏主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:09:50.410

我会为 NetworkInterface 写一个扩展方法

```
public static class MyExtensions
{
    public static void MyMethod(this NetworkInterface ni)
    {
          //Some Code
    }
} 
```

并用作`ni.MyMethod()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:30:11.610

问题解决了。我已经使用组合来继承和实现抽象类`NetworkInterface`

**代码**

```
public class ManagedNetworkInterface : NetworkInterface
{
    private NetworkInterface ni;

    public override string Description
    {
        get { return ni.Description; }
    }

    //ect...
} 
```

新类现在包括几种使用 IP 地址、物理地址、ID、名称等创建 ManagedNetworkInterface 实例的机制。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-10-04T20:51:57.420

```
class NetworkAdapter : NetworkInterface
{
    private NetworkInterface ni;

    public override string Description => _nic.Description;
} 
```

# android - 运行 cocos2dxsample 项目时出现异常（Raywenderlich 教程 Cocos2D-X for iOS and Android）

> ID：12598164
> 
> 赞同：1
> 
> 时间：2012-09-26T09:04:55.543
> 
> 标签：android, android-ndk, cocos2d-x

我正在关注适用于 iOS 和 Android 的 Cocos2D-X：[Raywenderlich 网站](http://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting-started)的入门教程。

如网站所述，我已经从 create-android-project.sh 命令下载了 android 项目。当我尝试在 Eclipse 中运行该项目时，我得到了以下日志：

```
09-26 13:04:05.081: W/dalvikvm(517): Exception Ljava/lang/UnsatisfiedLinkError; thrown while initializing Lcom/a/samplecocos2dxandroid21;
09-26 13:04:05.081: W/dalvikvm(517): Class init failed in newInstance call (Lcom/a/samplecocos2dxandroid21;)
09-26 13:04:05.081: D/AndroidRuntime(517): Shutting down VM
09-26 13:04:05.081: W/dalvikvm(517): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
09-26 13:04:05.091: E/AndroidRuntime(517): FATAL EXCEPTION: main
09-26 13:04:05.091: E/AndroidRuntime(517): java.lang.ExceptionInInitializerError
09-26 13:04:05.091: E/AndroidRuntime(517):  at java.lang.Class.newInstanceImpl(Native Method)
09-26 13:04:05.091: E/AndroidRuntime(517):  at java.lang.Class.newInstance(Class.java:1319)
09-26 13:04:05.091: E/AndroidRuntime(517):  at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
09-26 13:04:05.091: E/AndroidRuntime(517):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
09-26 13:04:05.091: E/AndroidRuntime(517):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
09-26 13:04:05.091: E/AndroidRuntime(517):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
09-26 13:04:05.091: E/AndroidRuntime(517):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
09-26 13:04:05.091: E/AndroidRuntime(517):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-26 13:04:05.091: E/AndroidRuntime(517):  at android.os.Looper.loop(Looper.java:137)
09-26 13:04:05.091: E/AndroidRuntime(517):  at android.app.ActivityThread.main(ActivityThread.java:4424)
09-26 13:04:05.091: E/AndroidRuntime(517):  at java.lang.reflect.Method.invokeNative(Native Method)
09-26 13:04:05.091: E/AndroidRuntime(517):  at java.lang.reflect.Method.invoke(Method.java:511)
09-26 13:04:05.091: E/AndroidRuntime(517):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-26 13:04:05.091: E/AndroidRuntime(517):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-26 13:04:05.091: E/AndroidRuntime(517):  at dalvik.system.NativeStart.main(Native Method)
09-26 13:04:05.091: E/AndroidRuntime(517): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load game: findLibrary returned null 
09-26 13:04:05.091: E/AndroidRuntime(517):  at java.lang.Runtime.loadLibrary(Runtime.java:365)   
09-26 13:04:05.091: E/AndroidRuntime(517):  at java.lang.System.loadLibrary(System.java:535)
09-26 13:04:05.091: E/AndroidRuntime(517):  at com.a.samplecocos2dxandroid21.<clinit>(samplecocos2dxandroid21.java:106)
09-26 13:04:05.091: E/AndroidRuntime(517):  ... 15 more 
```

android ndk，android sdk 路径设置和更改 create-android-project.sh 已经完成。有人可以告诉我我错在哪里以及解决方案是什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T22:59:54.360

您没有运行 build_native.sh，因此您的游戏没有构建到共享库，这就是它抱怨找不到库的原因

# jquery - 如何根据表是否在其中设置 div 的大小？

> ID：12598165
> 
> 赞同：0
> 
> 时间：2012-09-26T09:04:59.287
> 
> 标签：jquery, html, css

我对 div 的高度有疑问。

我的设计是这样的：我有一个带有表格的 div，但一开始表格是不可见的。当我单击一个按钮时，表格变得可见。

什么时候出现问题：表格大于 div 并且重叠。如何自动设置 div 的高度以使其重叠？也许是这样的：

获取表格的高度并将其添加到 div 的高度。但是怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:31:00.883

我希望这可能对你有所帮助......

```
<div class="boxes">
 <table border="1">
<tr>
<th>Month</th>
<th>Savings</th>
</tr>
<tr>
<td>January</td>
<td>$100</td>
</tr>
</table></div> 
```

和 jquery 是

```
$(".boxes").css("height", $("table").height());
$(".boxes").css("width", $("table").width()); 
```

试试这个演示：[小提琴](http://jsfiddle.net/zzrJ7/)

# asp.net-mvc - 使用 MapRoute 的多租户应用程序

> ID：12598168
> 
> 赞同：1
> 
> 时间：2012-09-26T09:05:05.850
> 
> 标签：asp.net-mvc, multi-tenant

我在我的 asp.net mvc 项目中找到了实现多租户的解决方案，我想知道它是否正确或是否存在更好的方法。

我想使用处理 Web 请求的相同应用程序来组织更多客户，例如：

```
http://mysite/<customer>/home/index        //home is controller and index the action 
```

出于这个原因，我更改了默认的地图路由：

```
routes.MapRoute(
    name: "Default",
    url: "{customername}/{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

我实现了一个自定义 ActionFilterAttribute：

```
public class CheckCustomerNameFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting( ActionExecutingContext filterContext )
    {
        var customerName = filterContext.RouteData.Values["customername"];

        var customerRepository = new CustomerRepository();

        var customer = customerRepository.GetByName( customerName );

        if( customer == null )
        {
            filterContext.Result = new ViewResult { ViewName = "Error" };
        }

        base.OnActionExecuting( filterContext );
    }
} 
```

并使用它：

```
public class HomeController : Controller
{
    [CheckCustomerNameFilterAttribute]
    public ActionResult Index()
    {
        var customerName = RouteData.Values["customername"];

        // show home page of customer with name == customerName

        return View();
    }
} 
```

使用此解决方案，我可以使用客户名称切换客户并正确接受如下请求：

```
http://mysite/customer1
http://mysite/customer2/product/detail/2
................................... 
```

这个解决方案效果很好，但我不知道是否是最好的方法。有谁知道更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:52:37.003

您可以对客户名称进行模型绑定，而不必从路由值中提取它：

```
public ActionResult Index(string customerName)
{
} 
```

# android - 如何在 Android 中从 JSON 加载 BaseAdapter 中的图像

> ID：12598171
> 
> 赞同：0
> 
> 时间：2012-09-26T09:05:06.563
> 
> 标签：android, json, android-imageview, baseadapter, custom-lists

我创建了一个包含 TextView、ImageView 和 Button 的自定义列表。现在我正在尝试显示来自 JSON url 的图像，但是当我运行我的代码时，我收到了 NullPointerException。我不知道为什么会收到此错误，因为 TextView 和 Button 正在显示它们各自的信息。

下面是 BaseAdapter 的代码：

```
public class SearchAdapter extends BaseAdapter {

    Context context;
    LayoutInflater inflater;
    View vw;
    ArrayList<String> unameList = new ArrayList<String>();
    ArrayList<String> statusList = new ArrayList<String>();
    ArrayList<String> uidList = new ArrayList<String>();
    ArrayList<String> picList = new ArrayList<String>();
    String id, message, url;
    boolean status;
    ConnectionStatus cs;

    public SearchAdapter(Context context, LayoutInflater inflater, ArrayList<String> list1, ArrayList<String> list2,
            ArrayList<String> list3, ArrayList<String> list4, String id) {
        // TODO Auto-generated constructor stub
        this.context = context;
        this.inflater = inflater;
        unameList.clear();
        statusList.clear();
        uidList.clear();
        picList.clear();
        unameList = list1;
        statusList = list2;
        uidList = list3;
        picList = list4;
        Log.v("srch", String.valueOf(picList));
        this.id = id;
    }

    public int getCount() {
        // TODO Auto-generated method stub
        return unameList.size();
    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }
    private class ViewHolder {
        ImageView img;
        TextView tv;
        Button btn;
    }
    public View getView(final int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        final ViewHolder holder;
        if(convertView == null)
        {
            convertView = inflater.inflate(R.layout.list_items, null);
            holder = new ViewHolder();
            holder.img = (ImageView)convertView.findViewById(R.id.imageView1);
            holder.tv = (TextView)convertView.findViewById(R.id.textView1);
            holder.btn = (Button)convertView.findViewById(R.id.button1);
        }
        else
        {
            holder = (ViewHolder)convertView.getTag();
        }
        if(picList.get(position).startsWith("http:"))
        {
            try
            {
                URL url = new URL(picList.get(position));
                Log.v("url", url.toString());
                URLConnection conn = url.openConnection();
                conn.connect();
                InputStream is = conn.getInputStream();
                BufferedInputStream bis = new BufferedInputStream(is);
                Bitmap bm = BitmapFactory.decodeStream(bis);
                holder.img.setImageBitmap(bm);
                bis.close();
                is.close();
            }
            catch (IOException e)
            {
                e.printStackTrace();
                Log.e("Exception",e.getMessage());
            }
        }
        holder.tv.setText(unameList.get(position));
        if(statusList.get(position).contains("1"))
        {
            holder.btn.setText("listening");
        }
        else
        {
            holder.btn.setText("listen");
        }
        return convertView;
    }
} 
```

日志猫：

```
09-26 14:13:34.294: E/AndroidRuntime(1376): FATAL EXCEPTION: main
09-26 14:13:34.294: E/AndroidRuntime(1376): java.lang.NullPointerException
09-26 14:13:34.294: E/AndroidRuntime(1376):     at com.pnf.flutterr.SearchAdapter.getView(SearchAdapter.java:105)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at android.widget.AbsListView.obtainView(AbsListView.java:1315)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at android.widget.ListView.makeAndAddView(ListView.java:1727)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at android.widget.ListView.fillDown(ListView.java:652)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at android.widget.ListView.fillFromTop(ListView.java:709)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at android.widget.ListView.layoutChildren(ListView.java:1580)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at android.widget.AbsListView.onLayout(AbsListView.java:1147)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at android.view.View.layout(View.java:7035)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at android.widget.RelativeLayout.onLayout(RelativeLayout.java:909)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at android.view.View.layout(View.java:7035)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at android.view.View.layout(View.java:7035)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1249)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1125)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1042)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at android.view.View.layout(View.java:7035)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at android.view.View.layout(View.java:7035)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1045)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at android.os.Looper.loop(Looper.java:123)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at android.app.ActivityThread.main(ActivityThread.java:4627)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at java.lang.reflect.Method.invokeNative(Native Method)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at java.lang.reflect.Method.invoke(Method.java:521)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-26 14:13:34.294: E/AndroidRuntime(1376):     at dalvik.system.NativeStart.main(Native Method) 
```

相反，如果`picList.get(position)`您可以尝试此链接：

**http://abhishekpnf.my3gb.com/test/uploads/180px-Lamborghini_Logo.svg.png**

请帮助我找到解决方案..

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:17:05.307

你知道是*什么*导致了 NullPointer 吗？是视图还是代码中的东西进行下载？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:47:24.027

您没有在 convertView 中设置标签以在其中设置持有者对象的一件事。

**已编辑**

```
final ViewHolder holder;
    if(convertView == null)
    {
        convertView = inflater.inflate(R.layout.list_items, null);
        holder = new ViewHolder();
        holder.img = (ImageView)convertView.findViewById(R.id.imageView1);
        holder.tv = (TextView)convertView.findViewById(R.id.textView1);
        holder.btn = (Button)convertView.findViewById(R.id.button1);

        convertView.setTag(holder); // missing write this statement in if block at the end
    }
    else{
        ........ 
```

如果您遇到相同的错误，请在此之后检查，然后只需在该行注释为 //error 即可更新您的问题

# ruby-on-rails - Ruby on Rails：使用一个数据库条目保存多种字段类型

> ID：12598176
> 
> 赞同：0
> 
> 时间：2012-09-26T09:05:16.603
> 
> 标签：ruby-on-rails, ruby, drop-down-menu

我有一个应用程序，用户可以在其中创建一个提交到数据库的项目。

```
<div class="project_name">
    Project Name:
    <%= f.text_field :project_name,:maxlength => 30 %>
  </div>

<%= label_tag :new_client, "Client:" %><br/>
<%= text_field_tag :new_client, nil, :maxlength => 30%>
Or
<%= f.select( :new_client, Project.all.map {|p| [p.new_client]}.uniq, :prompt => "Select an new_client") %>
</div> 
```

在这里，他们可以选择提交新项目名称的文本，然后可以选择现有客户或输入新客户，该客户将存储在数据库中，稍后将在下拉菜单中提供下一个项目创建。

我正在尝试添加第三个选项，让他们可以选择一个行业。然而，这一次，用户可以为一个项目选择多个行业。解决此问题的最佳方法是什么？

我正在考虑在另一个表中预先填充所有最常见行业的下拉列表，如果用户想要另一个，他们可以单击一个按钮以显示另一个下拉列表。如果该行业不存在，则可以在文本字段中输入一个，该字段将与该项目条目一起保存，并保存到新的行业表中，然后可供下一个用户使用。

希望有人能指出我正确的方向。我是 Rails 新手，所以放轻松。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:10:02.137

您应该查看此视频[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1) 对于这种情况，我使用 recordselect gem 选择现有对象，然后使用 jquery 模板添加对象到现在的形式。但是你必须做一些js的东西才能做到这一点。相反，我认为您也可以使用带有 :multiple => true 选项的简单下拉菜单来选择多个对象。做到这一点的最好方法不是很简单......但我认为你应该从 rails casts 复杂的表单示例开始，以弄清楚你可以用嵌套表单做什么。

# java - 访问 JTableHeader 中的 JTextField

> ID：12598180
> 
> 赞同：2
> 
> 时间：2012-09-26T09:05:29.647
> 
> 标签：java, swing, jtable, jtextfield, jtableheader

我制作了一个 TableHeader 渲染器，它将在 JTable 中的标题标签下创建一个 JTextfield。我现在遇到的问题，我从来没有在标题中获得焦点/访问这个 JTextfield。

我发现 TableHeader 渲染器只绘制组件而不做其余的事情，比如焦点和其他东西。

我试图制作一个将在标题上设置的 JTextfield 数组，因此我可以在代码库上访问它们。不幸的是没有锻炼，我想知道是否有可能在标题中访问这个 JTextField 以及最好的方法是什么。

表头渲染器：

```
public class TextFieldTableHeaderRenderer extends AbstractCellEditor implements TableCellRenderer {

private MyPanel component;

public TextFieldTableHeaderRenderer(){
}

@Override
public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
    component = new MyPanel(column);
    ((MyPanel)component).setLabelText(value.toString());
    return component;
}

@Override
public Object getCellEditorValue() {
    return ((MyPanel)component).getTextField(); 
} 
```

我的面板：

```
public class MyPanel extends JPanel {  

private javax.swing.JLabel label;
private javax.swing.JTextField textField;

public MyPanel(int column) {   
    super();   
    setLayout(new java.awt.BorderLayout());   
    label = new javax.swing.JLabel();   
    textField = new javax.swing.JTextField();  

    setBorder(javax.swing.BorderFactory.createEtchedBorder());

    label.setHorizontalAlignment(SwingConstants.CENTER);

    //textField.setText("Column "+column);

    add(textField, java.awt.BorderLayout.PAGE_END);

    add(label, java.awt.BorderLayout.CENTER);   
}   

public void setLabelText( String text ){
    label.setText(text);
}

public void setTextFieldText(String text){
    getTextField().setText(text);
}

public javax.swing.JTextField getTextField() {   
    return textField;   
}

/**
 * @param textField the textField to set
 */
public void setTextField(javax.swing.JTextField textField) {
    this.textField = textField;
} 
```

安装在标头上：

```
for( int i=0; i < this.getxColumnModel().getColumnCount(); i++){
            this.getxColumnModel().getColumn(i, true).setHeaderRenderer( new TextFieldTableHeaderRenderer() );
        } 
```

我尝试使用 i-net 中的“EditableHeader”示例，但单击标题时会生成一个新的 JTextfield。

我喜欢看到用户将注意力集中在 JTextfield 上，输入一个文本，然后它将过滤该列。

过滤不会成为问题，因为我已经做到了。

希望我对你们很清楚，很想听听你们的解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T14:51:56.497

这是制作可编辑标题的简单方法：

编辑：哎呀-我打算在另一个线程中发布这个。我想无论如何我都会把它留在这里。

```
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;
import javax.swing.border.*;
import javax.swing.table.*;

public class JTableEditableHeaderDemo implements Runnable
{
  private JTable table;
  private JTableHeader header;
  private JPopupMenu renamePopup;
  private JTextField text;
  private TableColumn column;

  public static void main(String[] args)
  {
    SwingUtilities.invokeLater(new JTableEditableHeaderDemo());
  }

  public JTableEditableHeaderDemo()
  {
    table = new JTable(10, 5);
    table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
    table.setPreferredScrollableViewportSize(table.getPreferredSize());

    header = table.getTableHeader();
    header.addMouseListener(new MouseAdapter(){
      @Override
      public void mouseClicked(MouseEvent event)
      {
        if (event.getClickCount() == 2)
        {
          editColumnAt(event.getPoint());
        }
      }
    });

    text = new JTextField();
    text.setBorder(null);
    text.addActionListener(new ActionListener(){
      public void actionPerformed(ActionEvent e)
      {
        renameColumn();
      }
    });

    renamePopup = new JPopupMenu();
    renamePopup.setBorder(new MatteBorder(0, 1, 1, 1, Color.DARK_GRAY));
    renamePopup.add(text);
  }

  public void run()
  {
    JFrame f = new JFrame("Double-click header to edit");
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.getContentPane().add(new JScrollPane(table));
    f.pack();
    f.setLocationRelativeTo(null);
    f.setVisible(true);
  }

  private void editColumnAt(Point p)
  {
    int columnIndex = header.columnAtPoint(p);

    if (columnIndex != -1)
    {
      column = header.getColumnModel().getColumn(columnIndex);
      Rectangle columnRectangle = header.getHeaderRect(columnIndex);

      text.setText(column.getHeaderValue().toString());
      renamePopup.setPreferredSize(
          new Dimension(columnRectangle.width, columnRectangle.height - 1));
      renamePopup.show(header, columnRectangle.x, 0);

      text.requestFocusInWindow();
      text.selectAll();
    }
  }

  private void renameColumn()
  {
    column.setHeaderValue(text.getText());
    renamePopup.setVisible(false);
    header.repaint();
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T20:39:45.887

`TableColumn`支持设置过`TableCellRenderer`孔`setHeaderRenderer()`，如本[例](https://stackoverflow.com/a/7137801/230513)所示；它没有规定`setHeaderEditor()`，这是编辑所必需的。替代方案可能包括：

*   写一个自定义`JTableHeader`。
*   在相邻的保形布局中添加一行文本字段。
*   `TableModel`按照 中的建议，使用 中的特定行[`FixedRowExample`](https://stackoverflow.com/a/11781605/230513)。
*   考虑商业替代方案；[这里](http://www.javadesktop.org/rollups/components/)列出了几个。

# php - 循环中的 php simplexml_load_file 导致致命错误：调用成员函数

> ID：12598182
> 
> 赞同：0
> 
> 时间：2012-09-26T09:05:38.863
> 
> 标签：php, xml

当我对单个文件使用 simplexml_load_file 时，它​​工作正常。但是，由于我有这么多，当我尝试将我的脚本运行到一批文件时。

如果这是相关的，我有两种日志文件要加载到我的数据库中。一个以 . 另一个以 . （但看看错误，即使结构相同，也会发生错误。）

```
<?php
$dir_path = ".";
if ($dir_handler = opendir($dir_path)) {
    while (($sub_dir = readdir($dir_handler)) !== false) {  //reading all sub dir
        if (is_dir($sub_dir)) {
            if (substr($sub_dir,0,6) == "201209") {     //filter only desired sub dir
                $sub_dir_handler = opendir($sub_dir);
                    while($file = readdir($sub_dir_handler)) { //reading files in each 
                                                               //qualified sub dir
                        if (($file != ".") && ($file != "..")) { //except . and ..
                            $xml = simplexml_load_file($file);   // got error on 
                                                                 //the second file
                            if ($xml->getname() != "hash") { // tried to distinct 
                                                            // structure type but error 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:51:06.270

我猜 simplexml_load_file 返回 false（错误）你可以看到那些使用 libxml_get_errors，cf [http://php.net/manual/en/simplexml.examples-errors.php](http://php.net/manual/en/simplexml.examples-errors.php)

编辑：考虑到您的第二条评论，SimpleXML 似乎无法访问您的文件...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T04:36:13.977

找到了愚蠢的原因。

因为我将所有文件都保存在子目录中，所以我“需要”将子目录连接到文件名以定位路径。因此，该错误是由无法打开文件引起的。它还解释了为什么我可以在硬编码文件名时单独打开它。

由于现在没有错误，因此无法将 libxml_get_error 应用于我的脚本。

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T03:02:59.960

因为我想跳过导致我使用的错误的第二种类型的 xml 模式

如果（！libxml_get_errors（））

继续我的工作。非常感谢你。

# python - 使用向量化加速我的计算

> ID：12598189
> 
> 赞同：1
> 
> 时间：2012-09-26T09:05:59.143
> 
> 标签：python, numpy, vectorization, slice

我是 python 新手，所以我的计算效率有一些问题。我正在使用此代码来填充我的 H 矩阵和我的 h 向量（x_tr、x_te 和 c 是列表）：

```
for l in xrange(0, b):
    for ls in xrange(0, b):
        H[l][ls] = 1.0/n_tr * numpy.sum([numpy.exp(-((numpy.linalg.norm(x_tr[i]-c[l])**2 + numpy.linalg.norm(x_tr[i]-c[ls])**2)/(2*s**2))) for i in range(0, n_tr)])
    h[l] = 1.0/n_te * numpy.sum([numpy.exp(-((numpy.linalg.norm(x_te[j]-c[l])**2)/(2*s**2))) for j in range(0, n_te)]) 
```

我认为使用 2 个循环可能效率低下......有什么简单的方法可以加快我的计算速度吗？有人告诉我，我可能会使用矢量化，但不知何故我不知道它是如何工作的

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:35:04.377

矢量化示例：

```
>>> x_te = np.arange(10)
>>> c = np.range(5)
>>> (x_te[:,None] - c).sum(axis=0)
array([45, 35, 25, 15,  5]) 
```

相当于：

```
np.array([np.sum(xte[i]-c[j] for i in range(xte.size)) for j in range(c.size)]) 
```

那说：

作为`x_te[j]`和`c[l]`是你的循环中的两个标量，你`np.linalg.norm(x[j]-c[i])**2`的只是`(x[j]-c[i])`，对吧？所以你`h`可以计算为

```
h = 1.0/n_te * numpy.sum([numpy.exp(-(x_te[: None]-c))/(2*s**2))) 
```

这应该让你开始`H`......

*编辑*您可能应该检查一些[有关广播的文档](http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html)。

# java - 即使文件中仍有数据，ObjectOutputStream.readInt() 也会抛出 EOFException

> ID：12598190
> 
> 赞同：1
> 
> 时间：2012-09-26T09:06:01.047
> 
> 标签：java, exception

我们的应用程序中存在一个问题，可以简化为以下代码：

```
public static void main(String[] args) throws IOException, ClassNotFoundException {
        File tempFile = File.createTempFile("teststream", "");
        FileOutputStream fos = new FileOutputStream(tempFile);
        ObjectOutputStream oos = new ObjectOutputStream(fos);
        oos.writeInt(1);
        oos.writeObject("foo");
        oos.writeInt(2);
        oos.flush();
        oos.close();
        FileInputStream fis = new FileInputStream(tempFile);
        ObjectInputStream ois = new ObjectInputStream(fis);
        int n1 = ois.readInt();
        Object o1 = ois.readObject();
        int n2 = ois.readInt();
    } 
```

此代码有效，但如果您评论以下行：

```
Object o1 = ois.readObject(); 
```

以下行

```
int n2 = ois.readInt(); 
```

会抛出一个`EOFException`尽管我的文件中有数据，因为我在其中写了一个对象和一个整数。[readInt](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectInputStream.html#readInt%28%29)的javadoc没有指出这种行为。我有点担心这一点`EOFException`，因为我们想在我们的代码中区分真正*的文件*异常和*错误类型的内容*。

异常的堆栈跟踪是

```
Exception in thread "main" java.io.EOFException
    at java.io.DataInputStream.readInt(DataInputStream.java:392)
    at java.io.ObjectInputStream$BlockDataInputStream.readInt(ObjectInputStream.java:2793)
    at java.io.ObjectInputStream.readInt(ObjectInputStream.java:968) 
```

这意味着以下代码`DataInputStream`会引发异常：

```
 public final int readInt() throws IOException {
        int ch1 = in.read();
        int ch2 = in.read();
        int ch3 = in.read();
        int ch4 = in.read();
        if ((ch1 | ch2 | ch3 | ch4) < 0)
            throw new EOFException(); 
```

但是`in.read()`当输入流中有数据时不应该返回负数，所以我真的很感兴趣。

在我的代码中是否可以做一些事情来防止这种情况发生（知道我们可能会在某个时候调用`readInd`where `writeObject`was used）？

我正在使用这个版本的java：

```
java version "1.7.0_07"
OpenJDK Runtime Environment (IcedTea7 2.3.2) (ArchLinux build 7.u7_2.3.2-2-x86_64)
OpenJDK 64-Bit Server VM (build 23.2-b09, mixed mode) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T09:49:12.887

底层流以块的形式写入，带有块头。当您尝试`readInt`写入对象时，会发现错误的块类型并`in.read()`返回 -1。

调用以下方法。

```
 /**
     * Attempts to read in the next block data header (if any).  If
     * canBlock is false and a full header cannot be read without possibly
     * blocking, returns HEADER_BLOCKED, else if the next element in the
     * stream is a block data header, returns the block data length
     * specified by the header, else returns -1.
     */
    private int readBlockHeader(boolean canBlock) throws IOException {
         // code deleted
                int tc = in.peek();
                switch (tc) {
                    case TC_BLOCKDATA:
         // code deleted
                    default:
                        if (tc >= 0 && (tc < TC_BASE || tc > TC_MAX)) {
                            throw new StreamCorruptedException(
                                String.format("invalid type code: %02X",
                                tc));
                        }
                        return -1;
    } 
```

`StreamCorruptedException`-1 意味着当 a在这里可能是一个更好的选择时，已经达到了终点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:12:36.133

如果您注释该行，`Object o1 = ois.readObject();`并且您执行程序，`n2`则不会读取`int`，而是从序列化对象中读取 4 个字符。是的，你可以得到一个负值，这取决于对象的序列化方式（例如，存储对象的字节序，如果我没记错的话，它存储在 Big-Endian 中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T00:50:19.773

情况完全无效。如果您不阅读您所写的内容，则行为是未定义的。在这种情况下它可能不应该抛出一个`EOFException`错误，但是由于你不能指出一个说明当你做错事情时应该做什么的规范，你真的没有立足之地。

# xcode4.5 - iPhone5中的信箱

> ID：12598191
> 
> 赞同：1
> 
> 时间：2012-09-26T09:06:05.320
> 
> 标签：xcode4.5, iphone-5

摆脱 iPhone5 中的信箱就像变魔术一样。只需放入图片 Default-568h@2x.png 即可。并且应用程序将在 iPhone5 的顶部而不是在信箱中打开导航栏。

但是如何扭转呢？如果我删除 Default-568h@2x.png 它仍然打开未装箱。

是否有可能回到以前的信箱版本？

或者在使用 Xcode 4.5 为信箱应用程序构建的新项目中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T22:01:34.413

回到 iPhone 5 上的信箱（3.5 英寸显示屏）的最简单方法似乎是

1.  从项目中删除 4 英寸显示器大小的启动图像。
2.  从手机中删除应用程序。
3.  使用 Product > Clean 清理项目。
4.  将应用程序安装到手机上。

我问[如何在不删除应用程序的情况下做到这一点？](https://stackoverflow.com/questions/13806888/how-can-i-re-enable-the-letterbox-mode-using-the-iphone-5-and-xcode-4-5-2-withou)，但似乎不可能。

# cordova - 客户端上的Phonegap oauth

> ID：12598201
> 
> 赞同：3
> 
> 时间：2012-09-26T09:06:25.797
> 
> 标签：cordova, oauth, twitter-oauth

我正在开发一个 phonegap 应用程序，正在成为一个真正问题的是客户端上的 oauth 身份验证。

唯一有据可查的例子是Libby关于该主题的教程

[http://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt5p1](http://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt5p1)

...唯一阻止我使用它的是我的 consumerKey + Secret 将在 Javascript 中完全可见。

这肯定是件坏事吗？

# ruby-on-rails - Ruby on Rails 将引用传递给 yield（模板）

> ID：12598203
> 
> 赞同：3
> 
> 时间：2012-09-26T09:06:44.543
> 
> 标签：ruby-on-rails, ruby, reference, block, yield

长话短说：我的每个选项卡都有自己的表单，所以我决定制作一个单独的布局，并让表单本身作为布局的可变内容。

但是我需要将**form_for**放在布局中，而不是在每个表单中都有它，因为我在布局中有一些其他常见的表单元素。

那么如何将表单构建器的引用**f**传递给模板？

布局代码：

```
<% content_for(:content) do %>
  <%= form_for current_form do |f| %>
    <%= yield %>
    <%= f.submit "Submit" %>
  <% end %>
<% end %> 
```

是否可以 ？

PS找到这个：[干燥一个助手：包装form_for并访问本地表单变量](https://stackoverflow.com/questions/6511028/drying-up-a-helper-wrap-form-for-and-access-local-form-variable)（@rubish的答案），但`<%= yield f %>`似乎没有工作， f 仍然未定义视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:42:11.817

为什么不为选项卡制作一个通用模板（*而不是*布局），并为每个选项卡的内容使用*部分*模板？

然后您可以执行以下操作：

```
<%= render :partial => @tab_name, :locals => {:form => f} %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-03T21:54:18.737

您可以使用 render 的 layout 选项在 Rails 中渲染一个接受块的模板

假设您有一个要渲染几次的表单，但您希望每次都自定义提交部分。您可以通过将表单部分呈现为布局并传入块来实现此目的。然后，您的模板或部分模板将用作您传入的块的周围布局。然后您可以将表单返回到块并访问块中的表单。

```
record/_form.haml

= form_for record do |form|
  ...
  .form-actions
    yield(form) 
```

为了使您的模板 record/_form.haml 在渲染时接受块，您可以使用渲染的布局选项将模板渲染为块的布局：

```
record/edit.haml

= render layout: 'form', locals: { record: record, ... } do |form|
  .form-actions--primary
    = form.button :submit 
```

# c - 为浮点参数 f 返回表达式 -f 的位级等效项

> ID：12598205
> 
> 赞同：0
> 
> 时间：2012-09-26T09:06:56.250
> 
> 标签：c, floating-point, negate

这是一个家庭作业问题，我完全没有想法（C 编程）。

指示：

```
/* 
 * float_neg - Return bit-level equivalent of expression -f for
 *   floating point argument f.
 *   Both the argument and result are passed as unsigned int's, but
 *   they are to be interpreted as the bit-level representations of
 *   single-precision floating point values.
 *   When argument is NaN, return argument.
 *   Legal ops: Any integer/unsigned operations incl. ||, &&. also if, while
 *   Max ops: 10
 *   Rating: 2
 */
unsigned float_neg(unsigned uf) {

return 2; 
```

我试过简单地返回 -uf; 和其他事情，但我只是不知道该怎么做。

帮助？

可以假设以下条件：

> 1.  使用 2s 补码，32 位整数表示。
> 2.  以算术方式执行右移。
> 3.  将整数移动超过字长时具有不可预测的行为。

-编辑

解决了：返回uf^0x80000000；

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T09:15:07.090

现在忽略问题的荒谬性，问题是询问浮点格式，大概是英特尔芯片使用的 IEEE-754 标准。32位的IEEE数字的二进制格式是：-

![在此处输入图像描述](../Images/feb540ddc49e935ccfcfb4d21472bee0.png)

因此，否定该值是微不足道的。在切换最高位之前，您必须检查各种特定值：Nan、Inf 等；这些在 IEEE 规范中有详细说明。

请注意，您可以有 +0 和 -0。

简单地返回整数否定是行不通的，因为它会执行 2 的补码否定，因此整数值 1 变为 0xffffffff，当 FPU 解释时，它将是一个非常不同的值。

# java - 如何在神器中配置更长的版本号

> ID：12598207
> 
> 赞同：3
> 
> 时间：2012-09-26T09:06:57.733
> 
> 标签：java, maven-2, artifactory

jar 的版本号要长一些，xxx 我们宁愿用xxxx 来集成一些老式的自制机制。这是因为我们用 xxx 标记了我们的软件，并且一旦我们向客户交付了一个特定的 jar，就必须在这个时间点准确地构建一个特定的 jar，以适应另一个与我们的程序通信的后端。出于这个原因，这个 jar 的版本为 2.3.4.1，当生成并在下一次交付相同版本时，它被构建并命名为 2.3.4.2。现在 artifactory 无法处理这个问题，在某些情况下不会保存超过 xxx2。所以我们想到了可能在 maven 存储库布局中编辑正则表达式（见附件截图）因为测试下面字段中的路径显示，它无法处理版本号。当然对于我们其余的罐子仍然是 xx

例如这里是 maven-metadata.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<metadata>
  <groupId>com.firm</groupId>
  <artifactId>someid</artifactId>
  <version>1.5.1</version>
  <versioning>
    <latest>1.5.1</latest>
    <release>1.5.1</release>
    <versions>
      <version>1.4.62</version>
    </versions>
    <lastUpdated>20120926073942</lastUpdated>
  </versioning>
</metadata> 
```

文件夹结构如下所示：

someid - 1.4.62 - 1.4.62.1 - 1.4.62.2 - 1.4.62.3

如果我们部署一个新的工件版本（1.4.62.1），maven-metadata.xml 包含 1.4.62.1 版本。但工件在未指定时间后将版本号 (1.4.62.x) 覆盖为 (1.4.62)。看来神器只支持主要、次要和修订号，并删除了内部版本号。现在我们正在寻找解决方案来禁用此行为。我们使用 JFrog Artifactory 版本 2.5.0 (rev. 13086)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:44:06.520

I apologize in advance that this will be an unsatisfactory answer for you.

Your version format is incompatible with the version format used by Maven. Maven uses a .. format for version numbers. Anything after this needs to be prefaced with a dash for it to be properly used by Maven. For more information about how version numbers are used and formatted in Maven, please refer to this section of the Maven book: [http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-pom-syntax.html](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-pom-syntax.html)

# java - Google Doclist API：修订历史中的错误？

> ID：12598208
> 
> 赞同：0
> 
> 时间：2012-09-26T09:07:06.260
> 
> 标签：java, google-docs, google-drive-api

我正在尝试使用 gdata 文档列表 java 库 v3 以编程方式管理存储在 google docs 中的文件（不是文档）的修订。

我可以使用此工具创建文件和修订：我可以在 Web UI 中看到它们。问题是：我的修订内容似乎是错误的。这是我的测试协议：

*   我创建了一个带有“Hello World”的纯文本文件。我将其上传到 gdocs 而不进行转换。
*   我创建了此文件的修订版，其内容更改为“第二版的内容”
*   我创建了另一个修订版，它的内容现在是“第三版的内容”

在每个步骤中，我**使用我的应用程序和 Web UI**检查每个修订的内容。这是我得到的：

*   第一步：没问题，我看到一个版本包含“Hello world”文本
*   第二步：也没问题，我看到了 2 个版本，第一个版本包含 Hello World，第二个版本包含第二个版本的内容。
*   第三步：问题来了。我看到了我的 3 个版本，但只有第三个也是最后一个似乎是正确的。当我下载第二个版本时，内容是“第二个版本的内容”（不是错字，它错过了“n”）。而且我什至无法下载初始版本，它似乎超时了。

重要的是：三周前我没有这个问题，我的修订管理工作得很好。

我不知道那里发生了什么，除了它似乎与服务器相关，因为我的应用程序或谷歌本机 webapp 都可以看到问题。

最后一件事：我尝试使用 google drive API，因为 gdocs 已与驱动器合并。当我请求对我的文件进行修订时，API 会返回一个错误，指出文件不支持修订，即使我可以在 UI 中看到它们。我试过转换后的文件，它奏效了。

我正在寻找解决此问题的方法。有没有人遇到过这样的问题？

提前致谢，

杰罗姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:25:21.597

2012 年 10 月 15 日。谷歌一定做了什么，这个错误不再重现

# cocoa-touch - Facebook iOS SDK 3.1 与 XCode 4.2 链接器错误

> ID：12598209
> 
> 赞同：19
> 
> 时间：2012-09-26T09:07:06.480
> 
> 标签：cocoa-touch, xcode4.2, facebook-ios-sdk

我刚刚将我项目中的 Facebook iOS SDK 从 3.0 更新到 3.1。该项目不再编译。相反，我收到以下链接器错误：

```
Undefined symbols for architecture i386:
  "_ACFacebookAppIdKey", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
  "_ACFacebookAudienceEveryone", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
  "_ACFacebookAudienceFriends", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
  "_ACFacebookAudienceKey", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
  "_ACFacebookAudienceOnlyMe", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
  "_ACFacebookPermissionsKey", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
  "_OBJC_CLASS_$_ASIdentifierManager", referenced from:
      objc-class-ref in FacebookSDK(FBSettings.o)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

[Facebook 文档](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)清楚地说：

> SDK 依赖于其他三个框架（AdSupport、Accounts 和 Social）来使用 iOS6 中内置的 Facebook 功能。

Xcode 4.2 中不存在这些框架。是否有任何解决方法，即我可以下载（在哪里？）并将框架手动添加到我的项目中，这足以消除编译错误还是我必须升级到 Xcode 4.5？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-26T14:21:51.300

这些框架是 iOS 6 的一部分（嗯，除了`Accounts`来自 iOS 5 的 ）。如果不升级到 Xcode 4.5 和 iOS 6 SDK，您将无法使用它们。

如果您担心的话，您仍然可以将部署目标设置为 iOS 4.3。

我认为你的选择是：

1.  升级到 Xcode 4.5，或
2.  使用 Facebook SDK 3.0。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-04T15:14:55.193

为了清楚起见：

对于 XCode 4.5：

**如果您使用 FB SDK3.0**，您只需要添加 Accounts 和 FacebookSDK 框架。

**如果您使用 FB SDK3.1**，则需要添加 Accounts、FacebookSDK、Social 和 AdSupport 框架。

**如果您使用 FB SDK3.2++**，请自行检查您可能需要或不需要的其他框架。;)

希望能给大家好好总结一下。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-02T22:14:16.490

SDK 依赖于其他三个框架（AdSupport、Accounts 和 Social）。

要添加这些，请转到目标摘要窗格的“链接框架和库”部分，然后添加它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T00:30:16.523

索布里是对的。升级到 Xcode 4.5 或使用 SDK 3.0 或者如果你想使用 3.1 然后从 github 下载源代码，修改构建文件（基本上删除对 iOS 6.0 提供的框架的引用）并重建 SDK。这样您就可以使用 SDK 3.1 以及在较旧的 XCode 版本上运行它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T15:02:21.773

以下步骤可能有助于解决此问题

1.  [从 URL http://developers.facebook.com/ios/features/whats-new-ios-sdk-3/](http://developers.facebook.com/ios/features/whats-new-ios-sdk-3/)中的链接下载 Facebook iOS SDK 3.0
2.  从 Mac Documents 目录添加 FacebookSDK 框架
3.  将 sqlite3 添加到项目中

然后，我尝试了[http://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/](http://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)中的代码，并进行了以下更改（因为它适用于 Facebook iOS SDK 3.1）

1.  替换`openActiveSessionWithReadPermissions`为`openActiveSessionWithPermissions`
2.  替换`[FBSession.activeSession handleDidBecomeActive];`为`[FBSession activeSession];`

这对我有用。试一次。

谢谢，开发者。

# html - CSS不透明度不会覆盖

> ID：12598211
> 
> 赞同：1
> 
> 时间：2012-09-26T09:07:09.803
> 
> 标签：html, css

我有这个用于图像标题的 CSS：

```
#capt{
    position: relative; 
    height: 391px;
}

#capt > p.imgCaption{
    position: absolute;
    top: 348px;
    background-color: #56631e;
    opacity:0.6;
    left: 2px;
    filter:alpha(opacity=60); /* For IE8 and earlier */
    width: 547px;
    font-family: "HelNue";
    font-weight: bold;
    font-size: 17px;
    color: white;
    height: 25px;
    z-index: 99999;
    padding: 7px 0 0 5px;
}
span#op{
    opacity:1;
    filter:alpha(opacity=100); /* For IE8 and earlier */
    z-index: 9999999;
} 
```

HTML是：

```
<div id="capt">
  <p class="imgCaption">
      <span id="op">Lorem ipsum dolor sit amet, consectetur adipisicing elit</span>
  </p>
  <img src="image here" />
 </div> 
```

现在，位置和一切都很好，bg 颜色很好，不透明度很好，但是文本保持了 imgCaption 类的不透明度，看起来很模糊。我在这方面犯了任何错误还是这是一个常见问题？

如果您知道解决方法，我将不胜感激:) 谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T09:10:43.030

这是“常见问题”。

您应该使用带 alpha 的 CSS3 背景色，而不是不透明度：

```
background-color: rgba(255,0,0,1); 
```

看看这个网站

[http://www.css3.info/introduction-opacity-rgba/](http://www.css3.info/introduction-opacity-rgba/)

编辑：当然你应该用你的改变这个 rgba 值。

# iphone - UIButton 没有隐藏在 iPhone 应用程序中

> ID：12598212
> 
> 赞同：0
> 
> 时间：2012-09-26T09:07:13.000
> 
> 标签：iphone, uibutton

我试图隐藏 UIButton 但它没有被隐藏。在相同的代码中，我成功地隐藏了一个 UILabel。我的代码有什么错误？

```
if ([typeOne isEqualToString:@"DDWC"]) {

    questionButtonTwo.hidden=YES;
    questionButtonTwoTwo.hidden=YES;
    questionButtonTwoThree.hidden=YES;
    questionButtonTwoFour.hidden=YES;
    questionButtonTwoFive.hidden=YES;
    questionButtonTwoSix.hidden=YES;
    questionButtonTwoSeven.hidden=YES;
    questionButtonTwoEight.hidden=YES;
    checkLableTwo.hidden=NO;
    checkLableTwoTwo.hidden=NO;
    checkLableTwoThree.hidden=NO;

    checkLableTwoFour.hidden=NO;

    checkLableTwoFive.hidden=NO;
    checkLableTwoSix.hidden=NO;
    checkLableTwoSeven.hidden=NO;
    checkLableTwoEight.hidden=NO;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:11:41.847

您是否为该按钮定义了一个 IBOutlet 并将其连接到 Interface Builder 中的实际按钮？如果没有，请尝试一下。

# java - `getExternalStorageDirectory()` 问题 - Android

> ID：12598214
> 
> 赞同：0
> 
> 时间：2012-09-26T09:07:22.813
> 
> 标签：java, android, android-gallery

我正在编写一个 android 应用程序，它拍摄一些照片并希望将它们全部保存在与我的应用程序关联的唯一目录中。

这个目录应该可以从标准图库中访问，这样用户可以稍后（当应用程序不一定运行时）检查拍摄的照片。

我的问题是每个不同的手机供应商，具有不同的 android 版本，都有不同的画廊路径。例如：

```
Environment.getExternalStorageDirectory() + Environment.DIRECTORY_PICTURES +"/myFolder" 
```

将在运行时工作，在`Samsung Galaxy Nexus`运行`android 4.1.1`时`Asus Transformer Pad`工作`android 4.0.3`，但在`HTC Desire`运行时不工作`android 2.3.5`。

这将导致我的应用程序在尝试在指定路径中保存新目录时崩溃，如下所述：

```
boolean success = false;
myFolder = new File( Environment.getExternalStorageDirectory() + Environment.DIRECTORY_PICTURES + "/myFolder" );

if( myFolder.exists() ){
//do nothing        
}else{

    success = dvaFolder.mkdir();

if( success ){
    // Do something on success
    /*
     * folder has been created
     */

} else {
    // Do something else on failure 
    /*
     * folder creation failed
     */
    throw new RuntimeException("File Error in writing new folder");
}
} 
```

> 如何为所有不同的供应商和 android 版本编写一个可在图库中访问的目录？

**笔记：**

Logcat 没有多大用处，因为它只是返回运行时异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:38:25.597

我对蓝牙文件夹也有同样的问题，我创建了两种方法来搜索手机上的蓝牙文件夹，通过遍历手机上的整个文件结构。我写的代码在下面，有点脏，但在我的情况下效果很好

```
public List<File> folderSearchBT(File src, String folder) {

    List<File> result = new ArrayList<File>();

    File[] filesAndDirs = src.listFiles();

    if (filesAndDirs != null && filesAndDirs.length > 0) {
        List<File> filesDirs = Arrays.asList(filesAndDirs);

        for (File file : filesDirs) {
            result.add(file); // always add, even if directory
            if (file.isDirectory()) {
                List<File> deeperList = folderSearchBT(file, folder);
                result.addAll(deeperList);
            }
        }
    }
    return result;
} 
```

在这个方法中使用上面的方法：

```
public String searchForGallery() {

    String splitchar = "/";
    File root = Environment.getExternalStorageDirectory();
    List<File> btFolder = null;
    String folder = "gallery"; //your foldername to search for..
    btFolder = folderSearchBT(root, folder);

    if(btFolder.size() < 1)
        Log.i("btFolder: ", "Empty");

    for (int i = 0; i < btFolder.size(); i++) {

        String g = btFolder.get(i).toString();

        String[] subf = g.split(splitchar);

        String s = subf[subf.length - 1].toUpperCase();

        boolean equals = s.equalsIgnoreCase(folder);

        if (equals)
            return g;
    }
    return null; //not found
} 
```

通过说代码很脏，我的意思是我可以通过这种方式写得更紧凑和另一个问题：如果有两个名为 bluetooth 的文件夹，我就卡住了。

我希望我理解你的问题是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T19:32:34.513

这是用于拍照并保存到外部存储的工作代码以及另一种保存到设备上“文件”目录的方法。在我的情况下，我只需要一张图像（something.png），在用户拍摄新照片后总是会刷新。

用户单击相机按钮时的操作：

```
ImageView productImageView = (ImageView) findViewById(R.id.imageView1);
static int RESULT_TAKE_PICTURE = 1;
String selectedImagePath;
Bitmap bitmap;
String imageName = "something.png";

public void cameraImageButton_onClick(View view) {
    Intent cameraIntent = new Intent(
            android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    String path = Environment.getExternalStorageDirectory()
            + File.separator + Environment.DIRECTORY_PICTURES;
    File dir = new File(path);
    if (!dir.exists()) {
        dir.mkdir();
    }
    dir = new File(path, imageName);
    cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(dir));
    startActivityForResult(cameraIntent, RESULT_TAKE_PICTURE);
} 
```

对活动结果执行的操作：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == RESULT_TAKE_PICTURE && resultCode == RESULT_OK) {

        selectedImagePath = Environment.getExternalStorageDirectory()
                + File.separator + Environment.DIRECTORY_PICTURES
                + File.separator + imageName;

        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(selectedImagePath, options);
        options.inSampleSize = Calculator.calculateInSampleSize(options,
                254, 254);
        options.inJustDecodeBounds = false;
        bitmap = BitmapFactory.decodeFile(selectedImagePath, options);
        productImageView.setImageBitmap(bitmap);

        saveImage(bitmap, imageName);

    }

} 
```

如果有人需要，将图像保存到*文件*目录中的设备的奖励方法：

```
private void saveImage(Bitmap bitmap, String name) {
    String path = getApplicationContext().getFilesDir().toString()
            + File.separator;
    File dir = new File(path);

    if (!dir.exists()) {
        dir.mkdir();
    }

    path = path + name;
    dir = new File(path);

    try {
        dir.createNewFile();
        FileOutputStream fos = new FileOutputStream(dir);
        bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);
        fos.close();
        fos.flush();
    } catch (IOException e) {
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:59:14.630

您应该检查您的应用程序清单中是否包含“WRITE_EXTERNAL_STORAGE”权限，它可能会出现此类错误。另外，您是否通过打印检查了该路径是否看起来无效？

# android - 如何按字母顺序对 ListView 进行排序，但底部有特殊字符？

> ID：12598220
> 
> 赞同：0
> 
> 时间：2012-09-26T09:07:39.707
> 
> 标签：android, listview, sorting, character

我想要一个按字母顺序排列的 Listview，但特殊字符位于列表底部。

所以它看起来像这样：

1.  项目清单
2.  啊啊啊
3.  BB
4.  抄送
5.  ddd
6.  等等
7.  '''''
8.  ((((
9.  $$$$

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:10:59.247

尝试使用 Collat​​or（请参见[此处](http://developer.android.com/reference/java/text/Collator.html)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:12:39.947

您可以调用适配器的`sort`方法以您想要的方式执行排序。例如：

```
adapter.sort(new Comparator<String>() {
    public int compare(String arg0, String arg1) { //modify it to suit your needs
        return arg0.compareTo(arg1);
    }
}); 
```

# c++ - 根据类型返回一个值

> ID：12598221
> 
> 赞同：3
> 
> 时间：2012-09-26T09:07:44.217
> 
> 标签：c++, templates, c++11, typetraits

考虑以下示例

```
template<class Type = void> class MyClass
{
    public:
        double getValue()
        {
            // if "Type == void" return _x, if "Type != void" return _y
            return (/* SOMETHING */) ? (_x) : (_y);
        }
    protected:
        double _x;
        static const double _y;
}; 
```

可能是什么`/* SOMETHING */`条件？

`_x`如果模板参数为void，我想返回，`_y`如果不是，则返回。怎么做 ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T09:09:54.560

~~首先，你不能返回任何东西，因为函数返回类型是`void`.~~（固定的）

其次，您可以专门化该函数以在`Type`is时采取不同的行动`void`：

```
template<class Type> class MyClass
{
    public:
        double getValue()
        {
            return _y;
        }
    protected:
        double _x;
        static const double _y;
}; 

template<>
inline double MyClass<void>::getValue()
{
   return _x;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T09:31:08.477

您可以使用 SFINAE 编写：

```
template<typename Type = void>
class MyClass
{
public:
    std::enable_if<std::is_same<Type, void>::value, decltype(_x)> getValue()
    {
        // if "Type == void" return _x, if "Type != void" return _y
        return _x;
    }
    std::enable_if<!(std::is_same<Type, void>::value), decltype(_y)> getValue()
    {
        return _y;
    }
protected:
    double _x;
    static const double _y;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:16:10.623

您可以使用动态转换来测试类型。如果转换为不同的类型，则动态转换返回空指针；

这是一个例子。

```
SomeClass* somePointer = NULL;

somePointer = dynamic_cast<SomeClass*>(someOtherPointer);

if (somePointer) 
{
    // *someOtherPointer is of type SomeClass
} 
else 
{
    // *someOtherPointer is not of type SomeClass
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T09:34:44.893

For now main problem is that you defined `getValue()` as returning `void`. But let's skip that. A function definition in C++ needs to be well defined. This means it needs to have immutable return type and argument list and a name. (There is couple of more attributes I believe but it is not that important here).

You can overload function so you have a couple of definitions with differing argument lists, however the returning type must be the same for all functions with the same name. You can get different returning type if you use templates, and the returning type would be a template argument.

Now to handle different types, there are two ways I believe. One is use templates and specializations.

You could define `getValue()` as `template<T> double getValue();` and then use different specializations to handle different branches of your original `getValue`. In your example it would be:

```
//default case
template<typename T>  double MyClass<T>::getValue() { return _y; }
//void case
template<>  double MyClass<void>::getValue() { return _x; } 
```

The second option is to use [RTTI](http://www.rcs.hu/Articles/RTTI_Part1.htm) mechanism which allows to determine types of objects in run-time. The the code could like almost exactly like yours. E.g.

```
 double getValue()
    {
        // if "Type == void" return _x, if "Type != void" return _y
        return (typeid(Type) == typeid(void)) ? (_x) : (_y);
    } 
```

It all depends whether you can determine Type during compilation or not. The RTTI approach has its drawbacks. If you ever wanted to handle more types RTTI allows you to do it by modifying one function while template approach you would need to add another specialization. I guess its up to one's preferences which path to take... and template are quite nicer when it comes to design.

Edit: Oopsies ... I missed that your class is templatized by the `Type`. So that should practically remove RTTI apporach out of question. I will leave the answer anyways if anyone ever comes here drawn by the sole title, as I believe it is still a valid way to do it.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T13:07:32.310

Using **SFINAE** ensures that all the work is done by the compiler, while other options using `typeid`, `dynamic_cast` etc, require some run-time costs, which are completely unnecessary (since all the information is available at compile time). In fact, these are extremely bad examples for when best to use such methods.

A possible SFINAE solution is

```
template<class Type = void> class MyClass
{
public:
    typename std::enable_if< std::is_void<Type>::value, double>::type
    getValue() { return _x; }
    typename std::enable_if<!std::is_void<Type>::value, double>::type
    getValue() { return _y; }
protected:
    double _x;
    static const double _y;
}; 
```

# php - 如何从第二个表中获取我知道 id 的第一个表

> ID：12598223
> 
> 赞同：1
> 
> 时间：2012-09-26T09:08:17.993
> 
> 标签：php, mysql, select, left-join

我需要得到两个表，这是表结构

## 表 A

*   用户身份
*   用户名
*   地位
*   介绍码

## 表 B

*   介绍码
*   用户身份

我想在tblA.IntroCode = tblB.IntroCode上获取表a数据并与表b连接，然后获取tblB.userID的用户名。我怎么能做这样的加入？

我试了一半，卡在中间，请帮忙。谢谢您的回复

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T09:10:34.923

这只是一个简单的连接。

```
SELECT  a.*, b.*    -- select your desired columns here
FROM    tableA a
        INNER JOIN tableB b
            ON a.IntroCode = b.IntroCode
WHERE   b.userid = valueHere 
```

**更新 1**

```
SELECT  a.UserID, 
        a.`Username` OrigUserName,
        a.`Status`,
        c.`Username` IntroUserName
FROM    tableA a
        INNER JOIN tableB b
            ON a.IntroCode = b.IntroCode
        INNER JOIN tableA c
            ON b.userID = c.userID
-- WHERE b.UserID = valueHere       -- extra condition here 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T09:14:38.243

```
SELECT column_name(s)
FROM TableA
LEFT JOIN TableB
ON TableA.UserID=TableB.UserID 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T09:11:36.570

```
SELECT B.userID from TableA A
LEFT JOIN TableB B on A.IntroCode=B.IntroCode 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T09:11:44.467

```
select a.*,b.IntroCode  from TableA a left join TableB b
on a.IntroCode = b.IntroCode 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-26T09:14:24.743

您必须为具有相同名称的列赋予唯一值：

```
SELECT  a.UserID as uid_a, b.UserID as uid_b
FROM    tableA a
INNER JOIN tableB b ON a.IntroCode = b.IntroCode
WHERE   b.UserID = 1 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-26T09:15:05.897

使用此查询。

```
 SELECT TableA.Username FROM TableA JOIN TableB ON (TableA.IntroCode = TableB.IntroCode); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-26T09:13:20.910

使用这个查询

```
SELECT  *  FROM tblA INNER JOIN tblB ON tblA.IntroCode = tblB.IntroCode where tblB.userid = value 
```

# wordpress - 分页在 Wordpress 中无法正常工作

> ID：12598224
> 
> 赞同：0
> 
> 时间：2012-09-26T09:08:21.023
> 
> 标签：wordpress

我目前正在使用 wordpress 创建我的网站。我真的发现了一个关于分页的问题。所以基本上为了让你明白我真正的问题是什么，我将发布两个代码：

这是第一个代码：

```
<?php if (have_posts()) : while (have_posts()) : the_post(); ?>             

<div <?php post_class() ?> id="post-<?php the_ID(); ?>">                    

<h2><a href="<?php the_permalink()?>"><?php the_title(); ?></a></h2>        

<?php include (TEMPLATEPATH.'/inc/meta.php'); ?>                            

<div class="entry">                                                         
<?php                                                                       
  the_excerpt();                                                            
?>                                                                          
</div>                                                                      
  <br/><br/>                                                                
  <h3><a href="<?php the_permalink() ?>">Read More...</a></h3>               
</div>                                                                      
<?php                                                                       
  endwhile;                                                                 
?>                                                                          

<?php include (TEMPLATEPATH . '/inc/nav.php' ); ?>                          

<?php else : ?>                                                             

<h2>Not Found</h2>                                                          

<?php endif; ?> 
```

在这行代码中，我使用常规循环来查询帖子。其实我没有修改代码。我还安装了一个插件 WP-PageNavi。没有问题，分页工作正常。

但是当我放这行代码时，关于常规循环。分页无法正常工作。我放这行代码“”是因为我只想在这个类别中显示帖子。

第二个代码：

**代码行**

```
<?php query_posts('cat=8'); ?> 
```

**结束代码行**

```
<?php if (have_posts()) : while (have_posts()) : the_post(); ?>
<div <?php post_class() ?> id="post-<?php the_ID(); ?>">

<h2><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h2>

<?php include (TEMPLATEPATH . '/inc/meta.php' ); ?>
<div class="entry">
<?php the_excerpt(); ?>
</div>
<br/><br/>
<h3><a href="<?php the_permalink() ?>">Read More...</a></h3>
</div>
<?php endwhile; ?>

<?php include (TEMPLATEPATH . '/inc/nav.php' ); ?>

<?php else : ?>
<h2>Not Found</h2>
<?php endif; ?> 
```

我的问题是：我应该怎么做才能使分页正常工作？我真的需要一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:53:20.670

我认为问题是由于页面中有两个循环（即while和endwhile循环）。

而不是 while 使用 foreach 循环。下面是例子

```
<?php  
$args = array('category'        => '8');

$postArr = get_posts($args);

if($postArr){
    foreach($postArr as $details){
?>
div <?php post_class() ?> id="post-<?php echo $details->ID; ?>">

<h2><a href="<?php echo get_permalink($details->ID;) ?>"><?php echo $details->post_title; ?></a></h2>

<?php include (TEMPLATEPATH . '/inc/meta.php' ); ?>

<div class="entry">
<?php echo $details->post_excerpt(); ?>
</div>

<br/><br/>
<h3><a href="<?php echo get_permalink($details->ID;) ?>">Read More...</a></h3>

</div>  
<?php
    }
}else{
?>
<h2>Not Found</h2>

<?php
}
?> 
```

注意代码未测试...

# watir - 以静音模式启动 Firefox

> ID：12598226
> 
> 赞同：3
> 
> 时间：2012-09-26T09:08:34.187
> 
> 标签：watir, watir-webdriver

如何从代码中以静默模式启动 Firefox（无需通过删除 -b 参数运行脚本）？

或者是否有任何其他方法可以最小化 Firefox，以便在多个浏览器窗口同时打开时测试可以正常运行而不会打扰用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:28:51.313

如果您在 Linux 上：

```
require 'watir-webdriver'
require 'headless'
headless = Headless.new
headless.start
b = Watir::Browser.start 'www.google.com'
puts b.title
b.close
headless.destroy 
```

您必须安装 Xvfb。

更多信息：[http ://watirwebdriver.com/headless/](http://watirwebdriver.com/headless/)

# c# - 数组的结构

> ID：12598227
> 
> 赞同：0
> 
> 时间：2012-09-26T09:08:34.527
> 
> 标签：c#, arrays, structure

我想将哈希表分配给数组结构请帮助下面是代码

```
 public void SendCmdWithData(int IntCode, Hashtable Htbl) 
    {
        DatawithCommandCode[] arrData = new DatawithCommandCode[Htbl.Count];

        try {
            for (int intVal = 0; intVal < Htbl.Count - 1; intVal++) {
            }
        }
        catch (Exception) {}
    } 
```

我的结构

```
 public struct DatawithCommandCode
    {
        public int CmdCode;
        public int Value;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:35:24.053

你可以像下面这样实现它：

```
 public static void SendCmdWithData(int IntCode, Hashtable Htbl)
        {
            DatawithCommandCode[] arrData = new DatawithCommandCode[Htbl.Count];
            try
            {
                int i = 0;
                foreach (System.Collections.DictionaryEntry element in Htbl)
                {
                    DatawithCommandCode tempData = new DatawithCommandCode();
                    tempData.CmdCode = Convert.ToInt32(element.Key);
                    tempData.Value = Convert.ToInt32(element.Value);
                    arrData[i++] = tempData;
                }
            }
            catch (Exception) { }
        } 
```

但我希望你使用 .Net framework 2.0 或更高版本，然后最好使用[Dictionary](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)

# sass - 是否可以在 sass 中合并来自不同部分文件的相同选择器的属性？

> ID：12598231
> 
> 赞同：1
> 
> 时间：2012-09-26T09:08:55.800
> 
> 标签：sass, compass-sass

假设您有一个 style.scss 文件以及两个名为 _base.scss 和 _typo.scss 的部分文件。

style.scss 仅包含：

```
@import 'compass', 'x1', 'x2'; 
```

_base.scss 包含：

```
p{
    width:80%;
} 
```

_typo.scss 包含：

```
p{
    color:red;
} 
```

当 style.scss 被编译时 style.css 看起来像：

```
p {
 width: 80%;
}

p {
 color: red;
} 
```

而不是在最终的 css 中将同一选择器的属性合并为一个，它看起来像这样：

```
p {
 width: 80%;
 color: red;
} 
```

是否有可能以某种方式获得后者的结果？或者有什么不值得推荐的吗？最好的问候拉尔夫

# jquery - 在 DOM 准备好之前运行 jQuery 代码？

> ID：12598232
> 
> 赞同：17
> 
> 时间：2012-09-26T09:08:56.383
> 
> 标签：jquery

有没有办法在 DOM 准备好之前执行 jQuery 代码？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-26T09:22:00.247

jQuery 只是 Javascript，所以问题实际上是“是否可以在 DOM 准备好之前运行 JavaScript”，我猜你的意思是文档而不是 DOM。

如果我们同意这个问题是“是否可以在文档准备好之前运行 JavaScript”。那么答案是肯定的。JavaScript 将在遇到时执行。

这就是为什么您几乎总是看到`$(function(){...})`或者`$(document).ready(function(){...})`因为大多数 jQuery 代码要求文档准备好，但附加事件处理程序的代码肯定会在文档准备好之前执行（否则它将无法处理文档准备好事件）。

通常你应该把你的 Javascript 包含在你的 HTML 的底部，但是如果你想让它更早地执行，你可以简单地把它放在文档的前面，例如在标题中。

```
<html>
  <head>
     ...
     <script>
        //place your code to be executed early here
     </script>
  </head>
...
</html> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T09:13:43.903

如果您在文档的头部包含 jQuery，然后在头部的另一个脚本标签中编写代码，它将在 DOM 准备好之前运行：

```
<head>
    <script src="jquery.js"></script>
    <script>
        // Do some stuff before the DOM is ready
    </script>
</head>
<body>
    <!-- Browser hasn't got this far, so no elements will be available -->
</body> 
```

但是，显然您将无法与任何 DOM 元素进行交互，因为它们还不存在。

* * *

话虽如此，您可以在现代浏览器*中*使用一种技术，它可以让您在将 DOM 元素插入页面时（在浏览器呈现页面时）与它们进行交互。它依赖于[CSS 动画事件](http://www.w3.org/TR/css3-animations/#animation-events)。我编写[了一个简单的库 (Progressive.js)](https://github.com/jamesallardice/Progressive.js)以使其更易于处理。

# css - 从灰度转换 SVG，如 css3 过渡动画

> ID：12598233
> 
> 赞同：8
> 
> 时间：2012-09-26T09:09:05.027
> 
> 标签：css, svg

我正在尝试使用以下概述的技术将元素从灰度转换为彩色：

CSS

```
 .technical .tech-icon {
      width: 33px;
      height: 32px;
      display: inline-block;
      filter: url(filters.svg#grayscale); /* Firefox 3.5+ */
      filter: gray; /* IE6-9 */
      -webkit-filter: grayscale(1); /* Google Chrome & Safari 6+ */

      -webkit-transition: all 0.5s ease-out;  /* Safari 3.2+, Chrome */
         -moz-transition: all 0.5s ease-out;  /* Firefox 4-15 */
           -o-transition: all 0.5s ease-out;  /* Opera 10.5–12.00 */
              transition: all 0.5s ease-out;  /* Firefox 16+, Opera 12.50+ */
      } 
```

对于 Firefox，我们有 filters.svg

```
<svg xmlns="http://www.w3.org/2000/svg">
 <filter id="grayscale">
  <feColorMatrix type="matrix" values="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"/>
 </filter>
</svg> 
```

如何模仿适用于 Chrome、IE9 等的相同转换属性？

**编辑**：我希望让我的过渡属性与我的 Firefox SVG 修复一起使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T09:56:53.370

您可以将保留灰度版本的额外元素覆盖到彩色版本。然后你动画不透明度......

```
 .technical .tech-icon {
      position: relative;
      ...
  }

 .technical .tech-icon .grayscale {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      opacity: 0;
      -webkit-filter: grayscale(1);
      filter: url(filters.svg#grayscale); /*Firefox*/
      filter: progid:DXImageTransform.Microsoft.BasicImage(grayscale=1)
              filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0); /*IE*/
  } 
```

对于不支持 CSS 过渡的浏览器，您可以使用 jQuery 为不透明度设置动画`fadeIn()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:23:37.297

你可以使用这样的东西：

```
@-webkit-keyframes grayscale-anim {
  from { -webkit-filter: grayscale(0); }
  to   { -webkit-filter: grayscale(1); }
}

.grayscale {
  -webkit-animation: grayscale-anim 2s ease-in-out;
  -webkit-animation-direction: alternate;
  -webkit-animation-iteration-count: infinite;
} 
```

这是小提琴演示：http: [//jsfiddle.net/SeL2G/](http://jsfiddle.net/SeL2G/)

不过需要注意的是，目前 CSS 过滤器仅在 webkit 浏览器中实现。出于兼容性原因，您可以使用 Javascript 作为后备解决方案。这是一个使用 Javascript 完成相同工作的小型库：[http ://www.ajaxblender.com/howto-convert-image-to-grayscale-using-javascript.html](http://www.ajaxblender.com/howto-convert-image-to-grayscale-using-javascript.html)

# prism - 如何在 Prism 中动态加载特定区域中的视图

> ID：12598236
> 
> 赞同：0
> 
> 时间：2012-09-26T09:09:13.313
> 
> 标签：prism, silverlight-5.0

在 Prism Silverlight5 中，我有一个外壳，它分为两个垂直区域（leftRegion，rightRegion）& Module1 中有 2 个视图，即（View1，View2）。
在 leftRegion 我有一个 View1 加载它有一个按钮。
我想使用 ViewModel 和 MEF.ViewModel 代码在 rightRegion 上动态加载 View2：

```
 [Export(typeof(LeftViewViewModel))]
public class LeftViewViewModel:ViewModelBase,IViewModel
{
    [Import]
    public IRegionManager CullingRegion { get; set; }

    [ImportingConstructor]
    public LeftViewViewModel(LeftView view)
        :base(view)
    {
        LoadCommand = new DelegateCommand(LoadControl,CanLoadControl);
    }

    private void LoadControl()
    {
        CullingRegion.RegisterViewWithRegion("RightRegion", typeof(RightView));
    }

    protected bool CanLoadControl()
    {
        return true;
    }

    public DelegateCommand LoadCommand { get; set; }
} 
```

LeftView.xaml.cs 是：

```
 [Import]
    public ViewModels.IViewModel ViewModel
    {
        get { return (IViewModel) DataContext; }
        set { DataContext = value; }
    } 
```

IModule 实现是：

```
[ModuleExport(typeof(CullingModuleModule1))]
public class CullingModuleModule1:IModule
{
    [Import]
    public IRegionManager CullingRegion { get; set; }

    public void Initialize()
    {

        CullingRegion.RegisterViewWithRegion("ShellContentRegion", typeof (Container));
        CullingRegion.RegisterViewWithRegion("LeftRegion", typeof(LeftView));

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:25:43.963

首先，我认为您的 ViewModel 不应该被 View 引用。
您可能需要查看使用 MEF 的 View Injection。正如我在多个帖子中看到的那样：

```
 [Export]
        public class YourViewClassName : UserControl
        {
            public YourViewClassName()
            {
            }
            [Import]
            public ILeftViewModel 
            {
                get { return (ILeftViewModel )DataContext; }
                set { DataContext = value; }
            }
        }

        [Export(typeof(LeftViewViewModel))]
        public class LeftViewViewModel : ILeftViewModel //ILeftViewModel inherits from IViewModel
        {
            public LeftViewViewModel()
            {
            }
        } 
```

内部模块初始化器：

`CullingRegion.Regions[YourRegionName].Add(ServiceLocator.Current.GetInstance<YourViewClassName>());`

希望能帮助到你

# python-3.x - Python 3：一些反转的 if 语句

> ID：12598237
> 
> 赞同：1
> 
> 时间：2012-09-26T09:09:13.903
> 
> 标签：python-3.x

在我的教科书中，我遇到了这个例子：

```
lower = (lambda x, y: x if x < y else y)
print(lower ('bb','aa')) 
```

到目前为止我用

```
if_stmt ::=  "if" expression ":" suite
         ( "elif" expression ":" suite )*
         ["else" ":" suite] 
```

所以，这个'x if x < y else y'让我有点吃惊。你能指导我：我在文档中的哪里可以找到这个结构？

先感谢您

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T09:21:33.233

因此它们被称为“条件表达式”，您可以在[python 3 文档](http://docs.python.org/py3k/reference/expressions.html#conditional-expressions)中找到它们，更清晰的解释可以在[2.5 文档的这一部分中](http://docs.python.org/whatsnew/2.5.html#pep-308-conditional-expressions)找到。我经常将它用于条件赋值，例如：

```
level = 1 if logging else 0 
```

# r - R中包中的全局变量

> ID：12598242
> 
> 赞同：67
> 
> 时间：2012-09-26T09:09:36.680
> 
> 标签：r, global-variables

我正在用 R 开发一个包。我有一堆函数，其中一些需要一些全局变量。如何管理包中的全局变量？

我读过一些关于环境的东西，但我不明白它是如何工作的，如果这甚至是处理这些事情的方式。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-09-26T15:53:28.793

您可以通过环境使用包局部变量。这些变量将可用于包中的多个函数，但用户无法（轻松）访问，并且不会干扰用户的工作空间。一个快速简单的例子是：

```
pkg.env <- new.env()

pkg.env$cur.val <- 0
pkg.env$times.changed <- 0

inc <- function(by=1) {
    pkg.env$times.changed <- pkg.env$times.changed + 1
    pkg.env$cur.val <- pkg.env$cur.val + by
    pkg.env$cur.val
}

dec <- function(by=1) {
    pkg.env$times.changed <- pkg.env$times.changed + 1
    pkg.env$cur.val <- pkg.env$cur.val - by
    pkg.env$cur.val
}

cur <- function(){
    cat('the current value is', pkg.env$cur.val, 'and it has been changed', 
        pkg.env$times.changed, 'times\n')
}

inc()
inc()
inc(5)
dec()
dec(2)
inc()
cur() 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-09-26T10:39:34.390

你可以设置一个`option`，例如

```
options("mypkg-myval"=3)
1+getOption("mypkg-myval")
[1] 4 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-09-26T09:29:50.580

一般来说，全局变量是***邪恶***的。它们邪恶的根本原理是您希望尽量减少包中的互连。这些互连通常会导致函数产生副作用，即它不仅取决于输入参数的结果是什么，还取决于某些全局变量的值。尤其是当函数的数量增加时，这可能很难正确进行调试。

对于 R 中的全局变量，请参阅此[SO 帖子](https://stackoverflow.com/questions/1236620/global-variables-in-r?rq=1)。

*根据您的评论进行编辑：* 另一种方法是将所需信息传递给需要它的功能。您可以创建一个包含此信息的新对象：

```
token_information = list(token1 = "087091287129387",
                         token2 = "UA2329723") 
```

并要求所有需要此信息的函数将其作为参数：

```
do_stuff = function(arg1, arg2, token)
do_stuff(arg1, arg2, token = token_information) 
```

这样从代码中就可以看出函数中需要token信息，可以自行调试函数。此外，该函数没有副作用，因为它的行为完全由它的输入参数决定。典型的用户脚本如下所示：

```
token_info = create_token(token1, token2)
do_stuff(arg1, arg2, token_info) 
```

我希望这能让事情更清楚。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-26T11:47:41.547

问题不清楚：

*   一个 R 进程还是几个？

*   只是在一台主机上，还是在多台机器上？

*   它们之间是否存在共同的文件访问权限？

在复杂性增加的顺序中，我将使用一个文件、一个通过[RSQlite](http://cran.r-project.org/package=RSQLite)包的 SQLite 后端或（我最喜欢的 :) [rredis](http://cran.r-project.org/package=rredis)包来设置/读取 Redis 实例。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-09-03T16:33:59.533

您还可以创建一个令牌列表并将其添加到 R/sysdata.rda 中`usethis::use_data(..., internal = TRUE)`。此文件中的数据是内部数据，但所有函数均可访问。如果您只希望*某些*功能访问令牌，则会出现唯一的问题，这将更好地服务于：

1.  上面已经提出的环境解决方案；或者
2.  创建一个隐藏的辅助函数来保存令牌并返回它们。然后只需在使用令牌的函数中调用这个隐藏函数，并且（假设它是一个列表）你可以将它们注入到它们的环境中`list2env(..., envir = environment())`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-27T13:13:02.040

如果您不介意向您的包添加依赖项，您可以使用[同名包](https://r6.r-lib.org/articles/Introduction.html)`R6`中的一个对象，正如@greg-snow 答案的评论中所建议的那样。

`R6`对象是可以添加公共和私有方法的实际环境，非常轻量级，并且可能是共享包的全局变量的良好且更严格的选择，而不会污染全局环境。

与@greg-snow 的解决方案相比，它允许对变量进行更严格的控制（例如，您可以添加检查类型的方法）。缺点可能是依赖关系，当然还有学习`R6`语法。

```
library(R6)
MyPkgOptions = R6::R6Class(
  "mypkg_options",
  public = list(
    get_option = function(x) private$.options[[x]]
  ),
  active = list(
    var1 = function(x){
      if(missing(x)) private$.options[['var1']]
      else stop("This is an environment parameter that cannot be changed")
    }
    ,var2 = function(x){
      if(missing(x)) private$.options[['var2']]
      else stop("This is an environment parameter that cannot be changed")
    }
  ),
  private = list(
    .options = list(
      var1 = 1,
      var2 = 2
    )
  )
)
# Create an instance
mypkg_options = MyPkgOptions$new()
# Fetch values from active fields
mypkg_options$var1
#> [1] 1
mypkg_options$var2
#> [1] 2
# Alternative way
mypkg_options$get_option("var1")
#> [1] 1
mypkg_options$get_option("var3")
#> NULL
# Variables are locked unless you add a method to change them
mypkg_options$var1 = 3
#> Error in (function (x) : This is an environment parameter that cannot be changed 
```

^(由[reprex 包](https://reprex.tidyverse.org)（v0.3.0）于 2020-05-27 创建)

# visual-studio-2010 - 如何调试静态库代码（libeay32.lib 和 ssleay32.lib）

> ID：12598247
> 
> 赞同：2
> 
> 时间：2012-09-26T09:09:55.597
> 
> 标签：visual-studio-2010, debugging, openssl, static-libraries

我使用 VC++ 编译器使用 openssl 源代码构建了 openssl 静态库（libeay32.lib 和 ssleay32.lib）。我在 VS2010 项目中使用它们，它们运行良好。

```
#pragma comment( lib, "libeay32.lib" )
#pragma comment( lib, "ssleay32.lib" ) 
```

那么问题是我想在VS2010中调试openssl库的源代码（步入，步过......）。例如，在 openssl api 中设置断点，然后单步执行 openssl 源文件。我怎样才能做到这一点？

在构建 openssl 静态库时，我曾尝试使用 VS 编译器选项“Zi”生成一些 .pdb 文件，但我不知道如何使用它们。我试图在 Option->Debugging->Symbols->Symbol 文件位置添加这些 .pdb 文件的路径，但似乎它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-01T04:02:03.333

请参阅 Jared 在[*如何在 Visual Studio 中调试外部类库项目？*](https://stackoverflow.com/questions/654696/how-to-debug-external-class-library-projects-in-visual-studio). 简而言之：

*   调试 -> Windows -> 模块
*   找到您感兴趣的项目的 DLL
*   右键单击 -> 加载符号 -> 为其他项目选择 .PDB 的路径

此外，请确保 PDB 文件与 和 位于同一目录`libeay32.lib`中`ssleay32.lib`。

最后，如果您真的遇到问题，请尝试 Thomas Hruska 的[*The Win32 OpenSSL Installation Project*](http://slproweb.com/products/Win32OpenSSL.html)。Thomas 为您预构建所有内容并将其打包到 Windows 安装程序中。

# c++ - 如何使用键在 C++ 中聚合值？

> ID：12598252
> 
> 赞同：2
> 
> 时间：2012-09-26T09:10:06.000
> 
> 标签：c++, hash, aggregation

在 C++ 中，如何根据三个键聚合结构的值？

在 Perl 中，我会使用哈希值（例如 $hash{$key1}{$key2}{$key3}{'call_duration'} += 25）；

由于我是 C++ 的新手，您能否建议一种合适的方法？

我已经查看了关于 SO 在 C++ 中使用 std::map 讨论嵌套哈希等效项的主题，但是它指出这在性能方面很慢，并且由于我需要为电信运营商处理记录，因此性能至关重要。

我没有必要遵循使用模板库或在语法和思维方式上应该类似于 Perl 的任何方法，但是如果您必须做类似的事情，您能否分享一种快速且合适的方法来实现它？

我主要限于 C++ 98 标准（技术负责人允许使用更新的功能，只要它们得到编译器的支持并且它们具有关键优势）。

抱歉，如果描述混乱，并提前感谢！

编辑：编译器版本是 GCC 4.1.2，将 tr1/functional 作为库导入并不被它所反对。

编辑：非常感谢所有加入的人，特别是 Bartek 和 Rost 忍受了我的愚蠢问题。我决定选择 Rost 的答案，因为这是我真正能够开始工作的！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:22:20.190

简单的解决方案是使用 struct 聚合 3 个键，并将其用作键。

```
struct Key
{
    Type1 Key1;
    Type2 Key2;
    Type3 Key3;

    // I forgot about the comparator - you have to provide it explicitly
}; 
```

因为您对语言有些限制，请检查您的编译器是否支持`std::hash_map`：

```
std::hash_map<Key, TValue> Data; 
```

如果没有，您可以随时使用`boost::unordered_map`.

如果其他人偶然发现了同样的问题，那么“正确的解决方案”是这样的：

```
std::unordered_map<std::tuple<Type1, Type2, Type3>, TValue>; 
```

编辑：示例用法

```
struct Key
{
    int Int;
    float Float;
    string String;
    // add ctor and operator<
};

std::hash_map<Key, int> Data;

Data[Key(5, 3.5f, "x")] = 10; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T09:54:35.820

普通`std::map`的应该是合适的，它的性能在大多数情况下通常是没有问题的。哈希提供对元素的恒定时间访问，基于树的映射提供对数时间，但实际上恒定时间可能大于对数 - 它取决于具体实现和具体数据。如果您填充容器一次，然后只更新数据而不更改/插入/删除键，您可以使用 sorted`std::vector`或`Loki::AssocVector`.

您应首先尝试`std::map`（或者`std::set`如果密钥实际上是数据的一部分），然后才能决定它对您来说是否太慢。例子：

```
// Composite key definition
struct CompositeKey
{
   int key1;
   std::string key2;
   AnotherType key3;

   CompositeKey(int i_key1, const std::string& i_key2, AnotherType i_key3):
      key1(i_key1), key2(i_key2), key3(i_key3)
   {}

   bool operator < (const CompositeKey& i_rhs) const
   {
      // You must define your own less operator for ordering keys
   }
};

// Usage
std::map<CompositeKey, Data> aggrData;

aggrData[CompositeKey(0, "KeyString", AnotherType())] = Data();

if(aggrData.find(CompositeKey(0, "KeyString", AnotherType())) != aggrData.end())
{
   // Process found data
} 
```

对于进一步的性能研究，您可以尝试：

*   [`hash_map`](http://www.sgi.com/tech/stl/hash_map.html)/ （在 MSVC++ 和GCC 中[`hash_set`](http://www.sgi.com/tech/stl/hash_set.html)命名）[`stdex::hash_map`](http://msdn.microsoft.com/en-us/library/0d462wfh%28v=vs.71%29.aspx)`__gnu_cxx::hash_map`
*   [`boost::unordered_map`/`boost::unordered_set`](http://www.boost.org/doc/libs/release/libs/unordered/)
*   [`Loki::AssocVector`](http://loki-lib.sourceforge.net/html/a00025.html)
*   [`std::unordered_map`](http://en.cppreference.com/w/cpp/container/unordered_map)/ [`std::unordered_set`](http://en.cppreference.com/w/cpp/container/unordered_set)-**仅适用于 C++11**

所有这些容器都具有相似的接口，因此封装起来并不困难，如果需要，也可以轻松切换实现。

# algorithm - 查找以随机方式存储的连续增加的子序列

> ID：12598260
> 
> 赞同：1
> 
> 时间：2012-09-26T09:10:20.237
> 
> 标签：algorithm, sorting, sliding-window

问题是这样的，给定一个长度为 的数组`N`，我们必须找到所有长度的子序列，`W`使得这些元素在排序时形成一个间隔为 1 的算术级数。所以对于像和5`W`这样的数组，切片可以是被认为是一个这样的子序列，因为在排序时，它产生，一个具有共同差为 1 的 AP。`[1,4,6,3,5,2,7,9]``W``[4,6,3,5,2]``[2,3,4,5,6]`

想到的直接解决方案是有一个滑动窗口，对于每个新元素，弹出旧元素，推送新元素，对窗口进行排序，如果对于那个窗口，`window[w-1] - window[0] + 1 = w`那么它就是这样一个子序列。但是，这需要`O(NlogN)`时间，而[Codechef](http://discuss.codechef.com/questions/2264/cheftown-editorial)的解决方案提出了`O(N)`一种使用双端队列的时间算法。我很难理解算法，什么被推送和弹出，为什么会这样，以及它如何以排序顺序维护窗口而不需要使用每个新元素。谁能解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:34:47.647

你是正确的观察到一个段是有效的 if `max(segment) - min(segment) + 1 = W`。因此，问题归结为在 中找到所有长度`W`段的最小值和最大值`O(N)`。

为此，我们可以使用[deque](http://en.wikipedia.org/wiki/Double-ended_queue) `D`。假设我们想找到最小值。我们将在 中存储元素的索引`D`，假设从 0 开始索引。让我们`A`成为原始数组。

```
for i = 0 to N - 1:
  if D.first() == i - W:
    D.popFirst() <- this means that the element is too old, 
                    so we no longer care about it
  while not D.empty() and A[ D.last() ] >= A[i]:
    D.popLast()

  D.pushBack(i) 
```

对于每个，这将为您提供作为 index 元素`i`的最小值。`[i - W + 1, i]``D.first()`

`popFirst()`从 中删除第一个元素`D`。当 中的第一个元素距离`D`超过步时，我们必须这样做，因为它不会对上述区间中的最小值做出贡献。`W``i`

`popLast()`从 中删除最后一个元素`D`。我们这样做是为了保持排序顺序：如果 in 的最后一个元素`D`是大于 的元素的索引`A[i]`，那么`i`在末尾添加`D`会破坏顺序。所以我们必须不断删除最后一个元素以确保`D`保持排序。

`pushBack()`在末尾添加一个元素`D`。添加后，`D`肯定会保持排序。

这是`O(1)`（要找到一个最小值，上面的伪代码是`O(n)`），因为每个元素最多会被推送和弹出`D`一次。

这是有效的，因为`D`它将始终是一个按其关联值排序的索引的滑动窗口`A`。当我们在一个会破坏这个顺序的元素处时，我们可以从`D`（滑动窗口）弹出元素，直到恢复顺序。由于新元素比我们弹出的元素小，因此这些元素无法为解决方案做出贡献。

请注意，即使没有我使用的方法，您也可以通过保持两个与`D`:`start`和. 关联的指针来实现这一点`end`。然后制作`D`一个长度数组，`N`你就完成了。

# java - Eclipse 中的 Maven 构建调试

> ID：12598261
> 
> 赞同：50
> 
> 时间：2012-09-26T09:10:23.560
> 
> 标签：java, eclipse, debugging, maven

我想用测试调试 Eclipse 构建。我尝试通过 Run > Debug Configurations > Maven Build 来运行它。在 Base 目录中是我的带有 pom.xml 文件的 Maven repo 目录，在目标“干净安装”中。当我单击调试 Eclipse 开始构建时，运行测试但它不会在断点处停止。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-09-26T09:26:53.520

我发现最简单的方法是：

1.  右键项目

2.  调试为 -> Maven 构建**...**

3.  在目标字段中放置**-Dmaven.surefire.debug 测试**

4.  在参数中放置一个名为**forkCount**的新参数，其值为**0**（以前是 forkMode=never，但它已被弃用并且不再起作用）

设置断点并运行此配置，它应该会到达断点。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-04T14:06:12.213

如果您使用的是 Maven 2.0.8+，那么它会非常简单，从控制台运行**mvndebug**，然后通过远程调试 Java 应用程序使用端口 8000 连接到它。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-26T09:15:39.563

您使用的运行/调试配置旨在让您在工作区上运行 Maven，就像从命令行一样，无需离开 Eclipse。

假设您的测试是基于 JUnit 的，您应该能够通过使用右键选择包含测试的源文件夹并选择`Debug as...`->来调试它们`JUnit tests`。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-01-06T10:43:23.617

问题：由于eclipse和maven使用的库的ti顺序，单元测试结果与eclipse和maven的运行不同。在我的情况下，使用 maven 的测试是成功的，但我想使用 eclipse 调试我的单元测试，所以使用 eclipse 和运行 maven 调试单元测试类的最简单方法是：

1) mvn -Dtest=MySuperClassTest -Dmaven.surefire.debug test ==> 它将监听 5005 端口（默认端口）

2）进入eclipse，打开debug配置，添加新的java远程应用，将端口改为5005并调试

3）当然，您必须在要调试的类中的某处添加断点

# jquery - Jquery追加列表并使用cookie插件保存

> ID：12598263
> 
> 赞同：1
> 
> 时间：2012-09-26T09:10:30.253
> 
> 标签：jquery, cookies, html-lists, appendchild

我有一个脚本，我可以使用点击事件和 cookie 插件保存纯文本：

```
$('.fields').click(function(e) {
    var text = $('#inputBox').val();
    $.cookie('demoCookie',text,{expires: 7, path: '/' });
    $(".jq-text").text(text);
    ..... 
```

cookie 是这样调用的：

```
var cookie = $.cookie('demoCookie');    
if (cookie){
    $('.jq-text').text(cookie).show(); 
```

所以现在我想附加一个带有链接的列表，当然还有一个 cookie 保存它：

```
$('.fields').click(function(e) {
    var text = $('#inputBox').val();
    $.cookie('demoCookie',text,{expires: 7, path: '/' });
    $(".jq-text").append('<li><a href="' + text + '">' + text + '</a></li>'); 
```

我无法让它工作：[JsFiddle](http://jsfiddle.net/dx6CN/1/)

文本被保存，但不保存列表和 href。

ps问题可能是动态创建的列表消失了第二个刷新页面..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:16:59.907

问题是您每次保存时都会覆盖该值。这就是为什么你只能读回你添加的最后一个。您需要阅读已经存在的内容，附加到它，然后再次保存。

创建一个数组来保存您的值并在将其写入 cookie 时将其设为 JSON 字符串可能是个好主意。然后，当您读回它时，您可以再次将 JSON 解析为一个数组（parseJSON jQuery 命令）并添加您的新值。

这是一个编辑过的小提琴，显示了我的意思：http: [//jsfiddle.net/dx6CN/3/](http://jsfiddle.net/dx6CN/3/)

# html - UIWebview - 文本切割

> ID：12598271
> 
> 赞同：3
> 
> 时间：2012-09-26T09:10:44.967
> 
> 标签：html, ios

我正在使用 UIWebview 来显示内容。但是我在网络视图中遇到了文本剪切问题。UIWebview 内容大小会根据图像大小和内容动态变化。但是那个 Webview 框架是恒定的，

如何避免？请参考附件图片。

提前致谢

![在此处输入图像描述](../Images/bddd214ddffa96946afd9dfbbcc4e5ab.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:40:17.847

尝试使用指示内容已完全加载的委托，然后通过 javascript 代码行获取高度，然后相应地调整 uiwebview 的框架：

```
-(void)webViewDidFinishLoad:(UIWebView *)webView
{
   NSString *output = [webView stringByEvaluatingJavaScriptFromString:@"document.body.offsetHeight;"];
   [webView setFrame:CGRectMake(webView.frame.origin.x, webView.frame.origin.y, webView.frame.size.width, [output intValue])];
} 
```

享受 ：）

# ruby-on-rails - 如何使用 fakeredis 清除测试环境中的 Redis 数据库？

> ID：12598273
> 
> 赞同：4
> 
> 时间：2012-09-26T09:10:53.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, redis

我想清除每个规范的 Redis 数据库。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T09:58:53.787

`flushdb`清除当前数据库，`flushall`清除所有数据库。

[刷新数据库定义](http://redis.io/commands/FLUSHDB)

# database - Visual Studio Premium 2010 中的“创建单元测试”选项灰显

> ID：12598274
> 
> 赞同：1
> 
> 时间：2012-09-26T09:10:53.723
> 
> 标签：database, visual-studio, unit-testing, options, vs-unit-testing-framework

Unitll 几天前，一切正常，今天数据库模式视图中的“创建单元测试”选项显示为灰色。我已经检查了所有的参考资料，并且已经正确到位。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:31:17.023

您使用的 sql 文件一定有问题。检查错误列表中的警告/错误。最可能的原因之一可能是您可能在其中一个存储过程中指定了 [Database].[Schema].[Object]。要解决这个问题，只需使用 [Schema].[Object] 而不是 [Database].[Schema].[Object]。
例如使用

```
dbo.MyStoredProc instead of MyDatabase.dbo.MyStoredProc 
```

# python - 如何使用 py2exe 更正 TCL_LIBRARY 和 TK_LIBRARY

> ID：12598279
> 
> 赞同：3
> 
> 时间：2012-09-26T09:11:04.200
> 
> 标签：python, tcl, py2exe

我用 Tkinter 小部件制作了一个 slideshow.py 文件来显示一些照片校正，它在我的 windows 和 linux 上完美运行。为了让它在没有安装 python 和 tcl 的 windows 上运行，我使用 py2exe 将其编译成 win32 可执行文件 setup.py 很简单：

```
from distutils.core import setup
import py2exe
setup(windows=["slideshow.py"]) 
```

然后我运行“python setup.py py2exe”，它会在 c:\Users\d2xia\ccm_wa\utils\tfps\ 中生成一个“dist”文件夹，以及“tcl”、“library.zip”、“slideshow.exe”和等下它。

当我运行 slideshow.exe 时出现错误：

```
Traceback (most recent call last):
  File "slideshow.py", line 45, in <module>
  File "Tkinter.pyc", line 1685, in __init__
_tkinter.TclError: Can't find a usable init.tcl in the following directories: 
    C:/Users/d2xia/ccm_wa/utils/tfps/lib/tcl8.5 C:/Users/d2xia/ccm_wa/utils/tfps/lib/tcl8.5 C:/Users/d2xia/ccm_wa/utils/lib/tcl8.5 C:/Users/d2xia/ccm_wa/utils/tfps/library C:/Users/d2xia/ccm_wa/utils/library C:/Users/d2xia/ccm_wa/utils/tcl8.5.11/library C:/Users/d2xia/ccm_wa/tcl8.5.11/library 
```

tcl8.5 和 tk8.5 实际上位于“tcl”文件夹下，但 py2exe 生成的 exe 似乎仍然在“lib”或“library”下，似乎它没有设置正确的 TCL_LIBRARY 和 TK_LIBRARY。

即使我将“tcl”重命名为“lib”，它仍然会出现相同的错误。

```
set TCL_LIBRARY=c:\Users\d2xia\ccm_wa\utils\tfps\dist\tcl\tcl8.5\
set TK_LIBRARY=c:\Users\d2xia\ccm_wa\utils\tfps\dist\tcl\tk8.5\ 
```

然后 slideshow.exe 生成一些新的错误：

```
c:/Users/d2xia/ccm_wa/utils/tfps/dist/tcl/tcl8.5/init.tcl: version conflict for package "Tcl": have 8.5.11, need exactly 8.5.2
version conflict for package "Tcl": have 8.5.11, need exactly 8.5.2
    while executing
"package require -exact Tcl 8.5.2"
    (file "c:/Users/d2xia/ccm_wa/utils/tfps/dist/tcl/tcl8.5/init.tcl" line 20)
    invoked from within
"source c:/Users/d2xia/ccm_wa/utils/tfps/dist/tcl/tcl8.5/init.tcl"
    ("uplevel" body line 1)
    invoked from within
"uplevel #0 [list source $tclfile]" 
```

我在 C:\apps\git\lib\tcl8.5 中有 Tcl 8.5.11，在 C:\Python27\tcl\tcl8.5 中有 Tcl 8.5.2 似乎当我使用 python 运行时，它会在 python 安装中查找 tcl路径，但 py2exe 在 git 安装路径中看起来是不同的副本。

那么问题就变成了： 1.如何在创建 dist 时将正确的 tcl8.5 副本“分配”给 py2exe？2.如何让生成的可执行文件知道dist中的tcl路径？“tcl”而不是“lib”或“库”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T15:11:07.383

Tcl 8.5.11 & 8.5.2 版本冲突通过手动替换 tcl8.5, tk8.5, tcl85.dll 和 tk85.dll 解决，我相信也可以通过更改路径环境变量来解决. 但是我还是要手动设置TCL_LIBRARY和TK_LIBRARY，我做了一个windows批处理包装器test.bat：

```
set TCL_LIBRARY=.\tcl\tcl8.5\
set TK_LIBRARY=.\tcl\tk8.5\
slideshow.exe %1 
```

这行得通，有更好的主意吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T10:07:50.563

正确的 Tcl 和 Tk 安装将在构建期间将这些环境变量的正确值放入其中；它们只存在于允许在安装之前进行测试（对 Tcl/Tk 的开发人员非常有用，最好避免对其他人）。如果它们没有正确连接，或者找到错误版本的脚本库，则说明您的安装存在严重问题。（请注意，这确实意味着您通常不应该在安装后移动东西，但这对大多数人来说并不是什么大问题。）

在这种情况下，通常的建议是擦除 Tcl 和 Tk 安装并重新开始，确保`configure`通过`--prefix`选项指定正确的安装位置。我不知道将 Python 添加到混合中会如何影响事情。

# java - 将 Object[] 转换为 Trie.Node 的 ClassCastException 但不是 E[]

> ID：12598281
> 
> 赞同：0
> 
> 时间：2012-09-26T09:11:07.413
> 
> 标签：java, arrays, generics, classcastexception

过去，我可以通过将 Object[] 转换为 E[] 来实现一个通用的 ArrayList：

```
public class ArrayList<E>
{
    private E[] elements;

    @SuppressWarnings("unchecked")
    public ArrayList()
    {
        elements = (E[])new Object[16];
    }
 } 
```

我可以正常使用泛型数组，如下所示：

```
public void add(E element)
{
    ...
    elements[size++] = element;
} 
```

我想我可以类似地实现一个 trie：

```
public class Trie<V>
{
    private static class Node<V>
    {
        public V value;
        @SuppressWarnings("unchecked")
        public Node<V>[] next = (Node<V>[])new Object[26];
    }

    private Node<V> root = new Node<V>();
} 
```

但是，`public Node<V>[] next = (Node<V>[])new Object[26];`Trie.Node 中的行会导致 ClassCastException：

```
public class Main
{
    public static void main(String[] args)
    {
        ArrayList<Integer> a = new ArrayList<Integer>();
        Trie<Integer> t = new Trie<Integer>();
    }
}

java Main
Exception in thread "main" java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to [LTrie$Node;
    at Trie$Node.<init>(Trie.java:6)
    at Trie$Node.<init>(Trie.java:3)
    at Trie.<init>(Trie.java:10)
    at Main.main(Main.java:6) 
```

所以它说我不能将 Object[] 转换为 Trie.Node[]。

从 Object[] 转换为 E[] 和从 Object[] 转换为 Trie.Node<V>[] 有什么区别？为什么前者被允许而不是后者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:47:32.687

```
public Node<V>[] next = (Node<V>[])new Object[26]; 
```

应该改为

```
public Node<V>[] next = (Node<V>[])new Node[26]; 
```

甚至

```
public Node<V>[] next = new Node[26]; 
```

因为无论如何都不会检查演员阵容，并且两种形式都需要`@SuppressWarnings("unchecked")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:25:59.240

不同之处在于泛型是通过擦除实现的，并且不给出边界会将泛型类型擦除为`Object`. `E[]`会变成`Object[]`，一会儿`Trie.Node<V>[]`会变成`Trie.Node<Object>[]`。因此，`(Node<V>[])new Object[26];`当您尝试转换`Object[]`为`Node<Object>[]`.

[您可以在http://docs.oracle.com/javase/tutorial/java/generics/erasure.html](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)找到有关擦除工作原理的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:23:14.100

`Node<V>[]` 数组不是`V[]`它在第一种情况下有效，因为类型信息是 E 可用并且 ArrayList 使用强类型。

因此，如果您从图片中删除泛型，那么您正在做的就是强制转换`Object[]`，`Node[]`这将导致类强制转换异常。

您可能想使用`V[]`

```
public V[] next = (V[])new Object[26]; 
```

[有关泛型教程](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html.)的更多信息

# c++ - 在编译时为变量赋值

> ID：12598287
> 
> 赞同：4
> 
> 时间：2012-09-26T09:11:28.100
> 
> 标签：c++, c, gcc

我想在我的代码编译时为变量分配一个特定的值（对于 C 和 C++）：

例如有：

```
//test.c
int main()
{
   int x = MYTRICK ; (edit: changed __MYTRICK__ to MYTRICK to follow advices in comment)
   printf ("%d\n", x);

   return 0;
} 
```

能够做类似的事情：

```
gcc -XXX MYTRICK=44 test.c -o test 
```

结果是：

```
$./test
44 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T09:12:38.540

使用`-D`选项：

```
gcc -DMYTRICK=44 test.c -o test 
```

并在您的程序中使用`MYTRICK`宏而不是`__MYTRICK__`. 以 开头的名称`__`由实现保留。

# ios - 是否能够使用 Ripple 模拟器测试 PhoneGap File API

> ID：12598292
> 
> 赞同：5
> 
> 时间：2012-09-26T09:11:41.453
> 
> 标签：ios, file, cordova, ripple

我正在使用PhoneGap（现在的Apache Cordova，版本为2.0）开发一个应用程序，并使用PhoneGap File API 来编写文件。

我使用的 File API 可以参考： [http ://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#File](http://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#File)

我从这里使用 Ripple Emulator (0.9.9beta)：[https](https://developer.blackberry.com/html5/download) ://developer.blackberry.com/html5/download在 chrome 中测试我的应用程序。

但我发现 Ripple 无法正确处理 PhoneGap File API。

例如：

我想在 PERSISTENT 目录中创建一个文件 (root/foo.json)

```
function onSuccess(fileSystem) {
    fileSystem.root.getDirectory("dir", {create: true}, function(dirEntry){
        dirEntry.getFile("foo.json", {create: true}, function(fileEntry){       
            fileEntry.createWriter(function(writer){
                writer.write(JSON.stringify(fooData));
            }, onfail);
        }, onfail);
    }, onfail);
}
function onfail(error)
{
    console.log(error.code);
}

// request the persistent file system
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onSuccess, onfail); 
```

它在 iOS 模拟器上运行良好，它确实在正确的位置创建了正确的文件，但在 chrome 中运行的 Ripple Emulator 中，我刚刚收到一个 onfail 回调，并得到错误代码 10 (FileError.QUOTA_EXCEEDED_ERR)。

我还在这里找到了有类似问题的人：[是否能够在模拟器之外测试 phonegap 应用程序？](https://stackoverflow.com/questions/12541107/is-it-able-to-test-phonegap-application-outside-emulator)

但仍然没有答案。

Ripple 模拟器目前是否无法在 PhoneGap API 上正常工作？还是我错过了一些设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T04:45:46.060

发现问题。我需要在使用 PERSISTENT 文件系统对象之前授予配额。 [https://developers.google.com/chrome/whitepapers/storage#persistent](https://developers.google.com/chrome/whitepapers/storage#persistent)

```
// Request Quota (only for File System API)

window.webkitStorageInfo.requestQuota(PERSISTENT, 1024*1024, function(grantedBytes) {
window.webkitRequestFileSystem(PERSISTENT, grantedBytes, onInitFs, errorHandler); 
}, function(e) {
console.log('Error', e); 
}); 
```

似乎 Ripple-UI 并没有为我做这件事（我检查了 lib/ripple/fs.js 的源代码）。这就是为什么我总是收到 FileError.QUOTA_EXCEEDED_ERR。

# javascript - 如何使表格在 Android 设备上滚动？

> ID：12598295
> 
> 赞同：0
> 
> 时间：2012-09-26T09:11:48.397
> 
> 标签：javascript, android, jquery, web-applications, jquery-mobile

我正在使用 jQuery Mobile 脚本和数据表，我必须说我已经成功地将这两者结合在一起。但这是我注意到的一个问题。当我使用 Iphone 测试我的应用程序时，我可以使用 2 个向上/向下滑动的手指手势来执行表格的内部滚动，但是当我在几个 Android 设备上尝试时，表格的内部滚动不起作用。

我的表格有一个隐藏/显示选项，所以当我在显示结果的最后一行时，当我按下加号按钮时，会打开一个附加窗口，但我无法向下滚动，而我可以使用 Iphone。我能做些什么来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:15:30.860

您需要为此使用脚本，否则您的手机操作系统不知道您是要滚动内部 div 还是整个页面：

这是唯一的一个： http: [//cubiq.org/iscroll-4](http://cubiq.org/iscroll-4)

# xml - 学习本体网络语言

> ID：12598297
> 
> 赞同：0
> 
> 时间：2012-09-26T09:12:03.387
> 
> 标签：xml, rdf, semantic-web, ontology, owl

我想用 .owl 格式编写一个本体，所以我需要了解所有关于 OWL 的信息。我需要一个用例子完全解释这种语言的来源。请

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T15:01:11.693

最好的办法是阅读[OWL2 入门](http://www.w3.org/TR/owl2-primer/)，但该[规范](http://www.w3.org/TR/owl2-syntax/)也非常有用。这些示例不是最好的，但您不会得到比这两个文档更好的参考。一个有用的例子可能是[比萨本体](http://www.co-ode.org/ontologies/pizza/2007/02/12/)，它是一个试图结合所有各种 OWL 构造来说明它们的使用的本体。

此外，如果您不熟悉 RDF，[那么它的入门读物](http://www.w3.org/TR/rdf-primer/)值得一读。

最后，描述逻辑手册，尤其是第 2 章，如果你能掌握它，也很有帮助。我曾经在我的办公桌上保留一份副本以供参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:16:01.857

你可以从[这里开始](http://en.wikipedia.org/wiki/Web_Ontology_Language)

检查“另见”和“参考”部分。

readnig 后，您只需在 Google 的文本框中输入“OWL”即可

享受！

# c# - 实现 ASP.NET GridView 复杂显示

> ID：12598299
> 
> 赞同：0
> 
> 时间：2012-09-26T09:12:10.617
> 
> 标签：c#, asp.net, gridview

我正在编写一个代码，我需要一个 GridView 来显示如下，我可以做的是显示列及其从数据库中获取的列的值，但无法以这种格式显示数据。

我的程序从 DB 中获取一个值作为 Total 显示为 Amount 1 并使用该金额进行计算以填充其他 Amount 值并将两个值之间的差异显示为 A:B

有任何想法吗？

```
--------------------------------------------
Total Amount |                 |           |       
--------------------------------------------
Amount 1     |    Amount/12 A  |           |
-------------------------------------------
Amount 2     |    Amount/12 B  |  A:B      |
-------------------------------------------
Amount 3     |    Amount/12 C  |  A:C      |
-------------------------------------------
Amount ..10  |    Amount/12 D  |  A:D      |
-------------------------------------------
Total        |                 |           |
-------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:19:01.187

为此，您可以使用 RowDataBound 事件。下面是 RowDataBound 的链接。 [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)

还阅读此线程中的解决方案。 [http://forums.asp.net/t/1278588.aspx](http://forums.asp.net/t/1278588.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:23:35.677

其实我可以想到两种方法来做到这一点。

要么你采用丑陋的不直观的 asp.net 方式并为网格的 RowDataBound 事件添加一个处理程序。在该处理程序中，如果成员变量为空，您会将 a 值保存到成员变量中。否则，如果成员变量是*unemtpy*，您将进行计算并将差异添加为单元格 3 中的新标签。

另一种方式（我想要更多）您可以使用 linq 将列表（是数据表或其他列表）投影到一个新的匿名对象列表中，该列表具有原始列的属性以及为您额外列的计算属性. 然后您可以将网格数据绑定到您的投影列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:26:48.327

看看你的数据在你的数据库中是否相同

然后你有一个非常简单的解决方案，通过放置一个 div 来保存 gridview 每一行的内容并给它一个样式，例如 color:blue; 像这样

# javascript - 使用本机搜索字段作为放置区域

> ID：12598300
> 
> 赞同：0
> 
> 时间：2012-09-26T09:12:10.877
> 
> 标签：javascript, spotify

我正在寻找一种将放置处理程序添加到本机 spotify 搜索字段的方法。因此，当用户尝试添加曲目时，他不仅可以将其放置在我的应用程序的区域中，还可以放置在本机搜索字段中。

我的应用程序被拒绝，因为它不能这样做，所以看起来这是可能的。但我找不到如何做到这一点的方法。

有人知道处理程序是如何添加的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:56:10.547

您的意思是客户端左上角的本地搜索字段，而不是您添加到自己的控件？

如果是这样，那么不，您不能修改 Spotify 自己的搜索字段的行为。

# eclipse - sbteclipse：eclipse 找不到托管依赖项

> ID：12598303
> 
> 赞同：2
> 
> 时间：2012-09-26T09:12:23.467
> 
> 标签：eclipse, scala, sbt, sbteclipse

我创建了一个 sbt 项目。在命令行调用 sbt compile 效果很好：

```
$:[...]/Scala-Parser$ sbt compile
[info] Loading global plugins from /home/[...]/.sbt/plugins
[info] Loading project definition from [...]/Scala-Parser/project
[info] Set current project to MyProject (in build file:[...]/Scala-Parser/)
[info] Updating {file:/home/heinzi/ftanml/Scala-Parser/}default-d86d09...
[info] Resolving org.scala-lang#scala-library;2.9.2 ...
[info] Done updating.
[info] Compiling 19 Scala sources to [...]/Scala-Parser/target/scala-2.9.2/classes...
[warn] there were 3 unchecked warnings; re-run with -unchecked for details
[warn] one warning found
[success] Total time: 7 s, completed 26.09.2012 11:01:18 
```

外部库不会添加到 lib_managed 目录，而是添加到 ~/.ivy2。尽管如此，在我的类中编译和使用依赖项工作正常。创建一个 Eclipse 项目也可以正常工作：

```
$:[...]/Scala-Parser$ sbt eclipse
[info] Loading global plugins from /home/[...]/.sbt/plugins
[info] Loading project definition from [...]/Scala-Parser/project
[info] Set current project to MyProject (in build file:[...]/Scala-Parser/)
[info] About to create Eclipse project files for your project(s).
[info] Successfully created Eclipse project files for project(s):
[info] MyProject 
```

但是 Eclipse 然后无法编译该项目，因为它缺少一个应该由托管库提供的包（即未找到 scalatest）。为什么这个托管依赖项没有添加到 Eclipse 中？

这是我的项目定义文件：

*   来源在 src/main/scala 各自的 src/test/scala
*   构建.sbt

    名称：=“我的项目”

    版本：=“0.1”

    scalaVersion := "2.9.2"

*   项目/plugins.sbt

    addSbtPlugin("com.typesafe.sbteclipse" % "sbteclipse-plugin" % "2.1.0")

*   项目/build.sbt

    libraryDependencies += "org.scalatest" %% "scalatest" % "1.8" % "test"

我正在使用 SBT 0.11.3 和 Eclipse Indigo。

**编辑：**

从 Eclipse 创建的 .classpath 如下所示：

```
<classpath>
  <classpathentry output="target/scala-2.9.2/classes" path="src/main/scala" kind="src"></classpathentry>
  <classpathentry output="target/scala-2.9.2/classes" path="src/main/java" kind="src"></classpathentry>
  <classpathentry output="target/scala-2.9.2/test-classes" path="src/test/scala" kind="src"></classpathentry>
  <classpathentry output="target/scala-2.9.2/test-classes" path="src/test/java" kind="src"></classpathentry>
  <classpathentry kind="con" path="org.scala-ide.sdt.launching.SCALA_CONTAINER"></classpathentry>
  <classpathentry path="org.eclipse.jdt.launching.JRE_CONTAINER" kind="con"></classpathentry>
  <classpathentry path="bin" kind="output"></classpathentry>
</classpath> 
```

**编辑2：**

我现在发现控制台上的“sbt test”也不起作用。所以我认为这不是 sbteclipse 的问题，而是如何处理测试用例的依赖关系。我据此提出了一个新问题，因为我提出这个问题的假设是错误的：[sbt: Add dependency on scalatest library。在哪里？](https://stackoverflow.com/questions/12601452/sbt-add-dependency-on-scalatest-library-where)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:59:11.660

你应该添加

```
libraryDependencies += "org.scalatest" %% "scalatest" % "1.8" % "test" 
```

在根目录中构建.sbt 以被识别为依赖项。

# php - PHP Mobile 检测与 APC + W3 总缓存 + Wordpress 一起使用

> ID：12598304
> 
> 赞同：1
> 
> 时间：2012-09-26T09:12:30.770
> 
> 标签：php, wordpress, mobile, apc

我正在尝试让这个 PHP 轻量级移动检测 (https://github.com/serbanghita/Mobile-Detect) 与我们基于 Wordpress + W3 Total Cache 和 APC 的安装一起使用。

但是，对象缓存会缓存 Mobile_Detect.php 文件，它最终只会为任何站点上的第一个访问者工作，之后信息被缓存并且它不起作用。

我将 apc.filters 指定给 Mobile_Detect.php 是否足以让它工作？或者还有什么需要考虑的？

```
<?php
    include 'mobile-detect/Mobile_Detect.php';
    $detect = new Mobile_Detect();
    ?>

    <?php
        if ($detect->isMobile()) { ?>
        <!-- do some mobile stuff -->
    <?php } else { ?><!-- do something else --><?php } ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T22:59:01.757

对我们有用的解决方案是拒绝移动用户代理缓存。

转到**性能/页面缓存**并在高级部分中，使用您要拒绝的用户代理的名称填写标有“拒绝的用户代理：”的文本框。([yourWpSite] **/wp-admin/admin.php?page=w3tc_pgcache#advanced** )

如果您对用户代理名称有疑问，请检查**Performance/User Agent Groups**。默认情况下，它加载了 2 个列表，第一个用于移动用户代理。

# android - 阻止应用程序更新

> ID：12598306
> 
> 赞同：1
> 
> 时间：2012-09-26T09:12:36.913
> 
> 标签：android

是否可以限制应用程序更新？我想禁止从应用程序代码本身接收来自 GooglePlay 的更新消息。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:27:38.343

> 是否可以限制应用程序更新？

不要发布任何更新。否则，不，您的应用程序的所有用户都有权获得您发布的该应用程序的所有更新。

# asp.net-mvc-4 - 仅限管理员用户使用 Glimpse

> ID：12598312
> 
> 赞同：3
> 
> 时间：2012-09-26T09:12:57.070
> 
> 标签：asp.net-mvc-4, glimpse

如果可能，我想通过代码执行此操作，我想只允许管理用户访问 glimpse，如何实现？

该网站声明这是可能的 - 虽然似乎无法找到确切的链接

[http://getglimpse.com/](http://getglimpse.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:20:07.260

您可以默认关闭 glimpse 并将`/glimpse.axd`配置面板仅限于管理员：

```
<location path="glimpse.axd">
    <system.web>
      <authorization>
        <allow roles="Admin"/>
        <deny users="*"/>
      </authorization>
    </system.web>
</location> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T22:01:51.020

在 Glimpse 1.4.1 中，它们提供了 GlimpseSecurityPolicy.cs，它可以让您轻松地在代码中设置授权，而不是使用元素。

# iphone - 使用 iOS 5 自定义应用程序中的所有表格视图

> ID：12598324
> 
> 赞同：0
> 
> 时间：2012-09-26T09:13:38.507
> 
> 标签：iphone, ios, uitableview, customization

也许我正在搜索错误的关键字，但令我惊讶的是还没有类似的问题。如果有，请告诉我，我会删除这个问题。

在面向 iOS 5 或更高版本的应用程序中自定义所有表格视图的最佳方式是什么？

`UIAppearance`事实证明，它对于自定义整个应用程序中的所有导航栏、标签栏等非常有用。是否有类似的方法来自定义表格视图和表格视图单元格？

到目前为止，我一直在以编程方式分别配置每个表视图。这可能不是最好的主意，因为我计划让用户可以选择不同的主题。我一直在考虑创建一个单独的类，该类根据用户选择的主题为表格视图（或单元格）返回适当的图像。这是否是一种合适的方法（如果没有地方可以轻松自定义所有表格视图）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:21:36.883

自定义表格视图最常用的方法是通过在 nib 文件中定义表格单元格： [http](http://www.galloway.me.uk/tutorials/custom-uitableviewcell/) ://www.galloway.me.uk/tutorials/custom-uitableviewcell/ 或故事板： 故事板[中的自定义 uitableviewcells](https://stackoverflow.com/questions/8663118/custom-uitableviewcells-in-storyboard)

我还没有对外观类进行任何调整，但这可能会有所帮助。如果您想以编程方式进行此操作，请使用装饰器模式来简化您和其他用户将生成的代码加入项目的生活：http: [//sourcemaking.com/design_patterns/decorator](http://sourcemaking.com/design_patterns/decorator)

我希望这是有帮助的

# ios - 开发者证书只能添加100个设备，还有其他方法吗？

> ID：12598327
> 
> 赞同：1
> 
> 时间：2012-09-26T09:13:53.747
> 
> 标签：ios, iphone, ipad

我需要向 Apple Developer Program 添加超过 100 台设备。他们不接受超过。

*   有什么办法或更新，一年增加100多台设备吗？

**编辑：** 我们已经添加了 98 台设备。我们需要在新设备（iPhone5/iPod5）上测试我们的应用程序/游戏。

*   任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:16:26.023

不，你不需要它（你不能这样做）。除非您正在构建内部应用程序，否则您需要企业许可证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T09:34:20.890

您唯一的选择是购买第二个开发者许可证。

[如此处](https://developer.apple.com/programs/start/ios/)所述，企业许可证**不好**，因为：

*   你需要有一家公司
*   您需要拥有自己的分销系统并提供个人信息
*   您无法在*内部*分发系统之外分发应用程序，这意味着*没有适用于企业许可证的苹果商店*。

# c++ - 从 strtok 函数保存值

> ID：12598329
> 
> 赞同：0
> 
> 时间：2012-09-26T09:14:06.117
> 
> 标签：c++, strtok

嗨，我正在使用该`strtok`功能将句子分成两部分。我似乎无法弄清楚如何保存两个单独的值，该函数在我只需要知道存储值的那一刻就成功地拆分了句子。谢谢

```
extern "C" UINT __stdcall GetProductName(MSIHANDLE hInstall)
{
HRESULT hr = S_OK;
UINT er = ERROR_SUCCESS;
char szProductName[MAX_PATH];
TCHAR* szValueBuf = NULL;
DWORD cchValueBuf = 0;
char * pch;
std::vector<std::string> parts;

hr = WcaInitialize(hInstall, "GetProductName");
ExitOnFailure(hr, "Failed to initialize");

WcaLog(LOGMSG_STANDARD, "Initialized.");

UINT uiStat =  MsiGetProperty(hInstall, TEXT("ProductName"), TEXT(""), &cchValueBuf);

if (ERROR_MORE_DATA == uiStat)
{
    ++cchValueBuf; 
    szValueBuf = new TCHAR[cchValueBuf];
    if (szValueBuf)
    {
        uiStat = MsiGetProperty(hInstall, TEXT("ProductName"), szValueBuf, &cchValueBuf);

    }
}
if (ERROR_SUCCESS != uiStat)
{
    if (szValueBuf != NULL) 
        delete[] szValueBuf;
    return ERROR_INSTALL_FAILURE;
}

if (Orc_Create_Product_Key(szValueBuf))
    hr = S_OK;
else
    hr = ERROR_INSTALL_FAILURE;

pch = strtok (szValueBuf," ");
parts.push_back(pch);

  while (pch != NULL)
  {
       pch = strtok (NULL, " ");
       parts.push_back(pch);
  }

strcpy(szProductName, szValueBuf);

hr = MsiSetProperty(hInstall, "PRODUCTNAME",  szProductName);
ExitOnFailure(hr, "failed to set PRODUCTNAME");

LExit:
er = SUCCEEDED(hr) ? ERROR_SUCCESS : ERROR_INSTALL_FAILURE;
return WcaFinalize(er);
 } 
```

如您所见，第一个值将是`szProductName`，但我也需要获得第二个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:16:23.743

为什么不将它存储在向量中？

```
std::vector<std::string> parts;
pch = strtok (szValueBuf," ");
parts.push_back(pch);

while (pch != NULL)
{
   pch = strtok (NULL, " ");
   parts.push_back(pch);
} 
```

# c# - 如何使用依赖注入来提供多个类所需的数据

> ID：12598339
> 
> 赞同：0
> 
> 时间：2012-09-26T09:14:43.480
> 
> 标签：c#, asp.net, dependency-injection

我的 dll 中的几个类需要一组数据（一般配置）。这些数据由使用 dll 的人**通过实现接口 IConfigs 提供**。所以数据应该作为依赖注入。现在我想知道该怎么做。

更新 ：

抱歉，如果问题不清楚。问题是我应该在每个需要它的类中都有一个 IConfigs**实例并使用****构造函数注入**（我不喜欢这种方法）还是有一种更清洁的方法来处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:22:13.540

您可以按属性使用注入依赖项。

如果您使用 MEF ：

服务

```
[Export(typeof(IServiec))]
public class Service : IService
{
 ....

} 
```

客户

```
public  class Client  
{
    [Import]
    public IService Service
    {

    }
} 
```

注意：您添加行以注册您的目录和容器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T10:27:49.133

如果我理解正确，你想用一个接口注册不同的派生类，不知道你使用什么 IoC 容器，但在这里我使用 Unity 作为示例代码，但大多数其他 IoC 容器支持使用一个字符串来区分在一个界面中注册。假设你有：

```
public interface IConfig {}
public class ConfigA : IConfig {}
public class ConfigB : IConfig {} 
```

因此，您可以使用不同的名称注册 IConfig`ConfigA`和IConfig：`ConfigB`

```
var container = new UnityContainer();

container.RegisterType<IConfig, ConfigA>("A");
container.RegisterType<IConfig, ConfigA>("B");

public class MainClass
{
    private IConfig _config;

    public MainClass([Dependency("A")] IConfig config)
    {
        _config = config;
    }
} 
```

如果您不想使用构造函数依赖项，请使用属性：

```
public class MainA
{
    [Dependency("A")]
    private IConfig Config { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T11:40:21.930

由于您的助手类是静态的，因此您将无法使用 DI，除非您使用`ServiceLocator`样式并让您的助手类自己检索注入的值，如下所示：

```
public static class HelperClass
{
    static HelperClass()
    {
        var config = ServiceLocator.Get<IConfig>();
        UserId = config.Get("UserId");
    }

    public static int UserId { get; private set; }
} 
```

`ServiceLocator`这不被认为是好的做法，因为您的助手类对您的设置具有隐藏的依赖关系，`IConfig`其中包含`UserId`.

因此，我建议您将辅助类更改为非静态的，并`IConfig`通过其构造函数将其注入其中，如下所示：

```
public class HelperClass
{
    public HelperClass(IConfig config)
    {
        UserId = config.Get("UserId");
    }

    public int UserId { get; private set; }
} 
```

然后，您可以通过*它们的*构造函数将您的注入`HelperClass`到您的服务类中，如下所示：

 *```
public class ServiceClass
{
    private readonly HelperClass _helperClass;

    public ServiceClass(HelperClass helperClass)
    {
        _helperClass = helperClass;
    }
} 
```

这样，每个组件都可以根据需要进行交换、存根或模拟。如果您`HelperClass`没有自己的状态，您可以配置您的 DI 容器以使用 Singleton 生命周期对其进行管理，这基本上使其成为“静态”而没有任何缺点。*

# android - Android - 后台计算

> ID：12598340
> 
> 赞同：0
> 
> 时间：2012-09-26T09:14:45.230
> 
> 标签：android, service

第一个问题：我知道在活动中只应实现视图内容，但通常为每个较长的计算过程启动自己的服务吗？

第二个问题：与服务的通信在代码中确实很广泛。如果要在服务上调用方法，则必须实现孔 IPC 机制？或者是否也可以在不使用 AIDL 文件的情况下调用本地服务上的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:32:15.367

第一个问题：你可以启动一个AsynTask以获得更长的计算过程，服务通常用于后台应用程序时的操作。

第二个问题：您可以在您的服务上调用任何方法，使用空闲使您的服务可用于多个应用程序，这不是简单服务的情况，而且，示例服务与您的活动在同一个应用程序进程上运行，女巫是不是空闲服务的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:35:16.220

根据您要执行的任务考虑使用`AsyncTask`或`IntentService`。在这里使用常规`Service`不应该最适合您的需求。

如果您使用常规`Service`，您可以轻松地传递您的数据或参数或`Intent`. 为此，您不需要任何 IPC。

# java - JGSS 和 NTLMSSP/NegoEx

> ID：12598341
> 
> 赞同：0
> 
> 时间：2012-09-26T09:14:47.320
> 
> 标签：java, ntlm, spnego

我正在开发一个在 JRE 7u7 上运行的 Web 应用程序，该应用程序使用 Sourceforge 的[SPNEGO 库](http://spnego.sourceforge.net/)进行身份验证。只要 Kerberos 正常工作，一切都很好，但由于它部署在包含多个域和各种干扰网络设备的复杂环境中，因此情况并非总是如此。

在 Windows 客户端无法获得服务票证的情况下，它们显然会尝试仅使用两种提供的机制来执行 SPNEGO：NTLMSSP 和 NegoEx。有没有希望使用 JGSS 库来理解这些？

我看过几次说Java 6 SPNEGO 实现只支持Kerberos 机制，但是对于Java 7 是否仍然如此，找不到明确的答案。如果不能做到，是否有第三方Java启用 SPNEGO 并支持 Kerberos 和（至少）NTLMSSP 的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T20:58:38.010

Oracle 不会对 NTLM 等专有技术提供任何支持。您必须求助于第三方组件。如果您打算将其与 Tomcat 一起使用，这将很难！NTLM 需要基于连接的身份验证，因为它是有状态的。Tomcat[不](http://www.mail-archive.com/users@tomcat.apache.org/msg102164.html)支持。

# magento - Magento Bundle 产品 - 具有挑战性的任务

> ID：12598345
> 
> 赞同：0
> 
> 时间：2012-09-26T09:15:06.353
> 
> 标签：magento, bundle

这是我需要创建的。

用户选择他/她想要作为礼物发送的礼品篮。然后，系统要求用户添加最多 x 瓶他/她想要的酒。然后，系统要求用户添加最多 1 公斤的坚果或巧克力等。

换句话说，用户将创建自己的礼品篮，添加他们想要的任何东西，以便将其作为礼物发送。

看来我应该使用捆绑产品选项。正确的？任何人都可以给我一些关于这个问题的方向吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:23:47.073

在我看来，您需要在您的情况下查看捆绑产品。您可以为您的产品添加不同的捆绑选项（添加新选项）并指定它们的外观（下拉、单选按钮、多选或复选框）并为每个选项添加一组简单的产品。

以下是有关如何为 Magento Go 创建捆绑产品的指南链接（Magento 社区和企业版几乎相同）[http://www.magentocommerce.com/knowledge-base/entry/creating-a-bundled-product](http://www.magentocommerce.com/knowledge-base/entry/creating-a-bundled-product)

捆绑产品的限制：您不能添加具有任何所需自定义数据的简单产品；可配置产品或捆绑产品捆绑，但市场上有用于此目的的扩展。

同样在您的情况下（如果您想添加最多 x 瓶酒”等）），也许有必要制作自己的验证 Javascript。

谢谢

# android - 如何更改默认邮件地址

> ID：12598353
> 
> 赞同：0
> 
> 时间：2012-09-26T09:15:30.050
> 
> 标签：android

我有功能发送邮件，它看起来像这样

```
private void email(String emailTo, String subject, String emailText, ArrayList<DummyItem> lstItemsUpload) {

        // need to "send multiple" to get more than one attachment
        final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND_MULTIPLE);

        emailIntent.setType("plain/text");

        emailIntent.putExtra(Intent.EXTRA_EMAIL, new String[]{ emailTo});
        emailIntent.putExtra(Intent.EXTRA_SUBJECT, subject);
        emailIntent.putExtra(Intent.EXTRA_TEXT, emailText);

        // has to be an ArrayList
        ArrayList<Uri> uris = new ArrayList<Uri>();

        // convert from paths to Android friendly Parcelable Uri's
        for (int i = 0; i < lstItemsUpload.size(); i++) {
            MyItem myItem = lstItemsUpload.get(i);

            File fileIn = new File(myItem.getPath());
            Uri u = Uri.fromFile(fileIn);
            uris.add(u);
        }
        emailIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, uris);

        startActivity(Intent.createChooser(emailIntent, "Send mail..."));
    } 
```

如果我在选择器中选择**电子邮件应用程序**，它将获取*默认邮件地址*并将其从文本框中放入。

有没有办法将*发件人邮件地址*放在代码中，所以电子邮件应用程序将使用输入邮件地址而不是默认邮件地址

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:17:30.890

我认为您不能更改邮件的默认设置，因为邮件客户端链接到用户的邮件地址。

# asp.net - 在 Asp.net 应用程序中通过 Web 服务访问 Sharepoint 数据

> ID：12598355
> 
> 赞同：-1
> 
> 时间：2012-09-26T09:15:31.703
> 
> 标签：asp.net, web-services, sharepoint

我们有 2 个不同的站点，一个是 Asp.net，另一个是 MS Sharepoint，我们需要从 Sharepoint 获取一些数据到 Asp.net 站点

Asp.net 应用程序是一台服务器，而 Sharepoint 站点位于另一台服务器上。

我们如何通过 Web 服务将它从一个站点转移到另一个站点？

我们正在寻找建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:34:31.220

您可以使用标准的 Sharepoint soap Web 服务或托管客户端对象模型。请在下面找到链接：

Windows SharePoint Services Web 服务 - [http://msdn.microsoft.com/en-us/library/aa979690(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/aa979690(v=office.12).aspx)

从 js 调用它 - [http://weblogs.asp.net/jan/archive/2009/04/09/calling-the-sharepoint-web-services-with-jquery.aspx](http://weblogs.asp.net/jan/archive/2009/04/09/calling-the-sharepoint-web-services-with-jquery.aspx)

SharePoint Foundation 2010 托管客户端对象模型 - [http://msdn.microsoft.com/en-us/library/ee857094.aspx](http://msdn.microsoft.com/en-us/library/ee857094.aspx)

[通过 Web 服务设置 Sharepoint 站点主题？](https://stackoverflow.com/questions/126274/setting-a-sharepoint-site-theme-through-a-web-service?rq=1)

# c# - 从安装路径读取xml文件

> ID：12598363
> 
> 赞同：1
> 
> 时间：2012-09-26T09:15:53.650
> 
> 标签：c#

我已经为我的 winform 创建了一个安装文件。当我运行此安装文件时，应用程序将安装到用户指定的位置。安装还将一些 xml 文件复制到该位置。用户运行应用程序后，它会立即从 xml 文件中读取一些设置。

我想知道的是，因为xml文件的位置是灵活的（用户指定的），我们怎么知道读取哪个位置呢？我们如何在 winform 编码中指定它应该从安装位置读取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:18:40.577

您是否查看过 Application.ExecutablePath 以了解您的 exe 运行时所在的路径，所以这将是您安装的基本目录。

```
String startingdir = Path.GetDirectoryName(Application.ExecutablePath);
foreach(String Filename in Directory.GetFiles(startingdir,"*.xml")
{
// process
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:18:04.060

XML 文件是否复制到与可执行文件相同的位置？在这种情况下，您可以使用`Application.ExecutablePath`WinForms 应用程序获取可执行文件的位置，并从那里创建 XML 文件的路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T09:59:40.230

我试过这个

```
reader = new XmlTextReader(Application.StartupPath + "\\MyFile.xml"); 
```

它工作正常！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T09:20:50.710

我建议的方式是您在安装程序中创建一个步骤，用户可以在其中设置文件的位置。把它放在注册表中。并让您的应用程序从注册表中读取它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T09:19:39.267

如果文件被复制到 exe 的工作文件夹，那么您可以使用相对路径（不需要绝对路径）来寻址它们。

编辑：这是一个例子

```
XmlDocument document = new XmlDocument();
document.Load("filename.xml"); 
```

这段代码将尝试读取包含您的 exe 文件的同一文件夹中的文件*filename.xml 。*

```
XmlDocument document = new XmlDocument();
document.Load("somefolder/filename.xml"); 
```

这个将尝试从位于包含您的 exe 的文件夹中的文件夹*somefolder中读取文件**filename.xml*

# asp-classic - 调试数据库死锁

> ID：12598365
> 
> 赞同：0
> 
> 时间：2012-09-26T09:16:03.390
> 
> 标签：asp-classic, vbscript, sql-server-2000

我正在尝试使用带有 SQL Server 2000 数据库的经典 ASP 编写的站点来解决问题。

每隔几天，该网站似乎就会关闭。当您尝试访问该网站时，该网站没有任何响应。浏览器中的加载指示器将旋转，页面保持空白。

当我在站点关闭后运行 sp_who2 时，总是有一个进程占用了大量的 CPU 时间。此进程将阻塞数据库中的所有其他进程。

我可以通过终止此过程使站点再次运行。

我不知道发生了什么事。当我查看该进程在锁定之前运行的存储过程时，它没有任何问题。运行此存储过程的页面将关闭所有连接对象。

关于可能导致这种僵局的任何想法，或者我如何阻止它发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:29:30.313

不确定这是否是问题所在，但可能并非所有记录集和连接都始终关闭......当我们过去遇到类似问题时，我们最终得到了以下例程......（*请注意，这只是一个显示片段一个记录集关闭，实际过程实际上会检查 15 个不同的记录集，看看它们是否需要关闭..* )。

然后 总是在页面末尾，重定向之前，内部错误处理等调用**modCloseObjects()程序...**

```
' subroutine will close and set the objects to Nothing. '
' Close Recordsets and then the Connection '
sub modCloseObjects()

    'Close the record sets one by one '
    If ucase(TypeName(oRS)) = "RECORDSET" then
        if oRS.state <> adStateClosed then
            oRS.close
            Set oRS = Nothing
         end if
    end if

    ' if you have other recordSet objects, add them to the rourtine here: '

    ' Close the connection '

    If ucase(TypeName(objConn)) = "CONNECTION" then
        if objConn.state <> adStateClosed then
             objConn.close
             Set objConn = Nothing
        end if
    end if

end sub 
```

*如果您没有 adovbs.inc ，则还需要以下常量：*

```
Const adStateClosed = &H00000000 
```

# cordova - 无法在 Cordova 2.0 上添加图像

> ID：12598366
> 
> 赞同：1
> 
> 时间：2012-09-26T09:16:03.983
> 
> 标签：cordova, windows-phone-7

我正在使用 Cordova 2.0 上的一个项目，但我不知道为什么，但我只能使用 1 个图像，即`hello world`创建新项目时的图像。

我正在使用`Visual studio 2010`和`wp7 sdk`cordova 2.0 sdk。

**这是一个简单代码的示例：**

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name = "format-detection" content = "telephone=no"/>
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width;" />

        <title>Hello Cordova</title>
    </head>

    <body>
        <div class="app">
            <h1>Apache Cordova</h1>
            <div id="example">
                <p class="hi">Hi guys !!</p>
                <p class="image"> This is the cordova image:
                    <img src= ./img/cordova.png />
                </p>
                <br />
                <p class="cat"> And this is a cat:
                    <img src= ./img/cat.png />
                </p>
            </div>
        </div>
    </body>
</html> 
```

当我在 wp7 上启动我的应用程序时：

![wp7屏幕](../Images/b9a89d6728c51c630e156b07db6b79b8.png)

如您所见，没有猫...

我的`cat.png`(64ko 170x200px) 和`cordova.png`(20ko, 170x200px) 当然在同一个文件夹中。

最有趣的是，在 Visual Studio 中，你可以看到设计，而我可以看到我的图像：

![视觉工作室设计](../Images/bb055a92f705ecff26607c6e2f5f8cdf.png)

我不知道为什么`wp7`模拟器不想显示我的图像。

我试图刷新它（因为当我更改我的时`applicationIcon`，我需要刷新它才能看到我的新图像）但什么也没发生......

如果有人有任何想法/解决方案？

PS：对不起我的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:25:05.513

取决于包含图像和 html 页面的文件夹在哪里。

<img src="../img/cat.png" >

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T10:49:10.200

**要修复此错误，请按照以下步骤操作**

1.  在 Soulion Explorer 中，右键单击图像并单击属性
2.  选择“**构建操作**”，然后选择“**内容**”
3.  保存并运行
4.  完毕

# javascript - 如何将元素放入html表格

> ID：12598374
> 
> 赞同：-2
> 
> 时间：2012-09-26T09:16:21.377
> 
> 标签：javascript, html

> **可能重复：**
> [尝试将 Google Places API 与 JQuery 的 getJSON 函数一起使用](https://stackoverflow.com/questions/11642418/trying-to-use-google-places-api-with-jquerys-getjson-function)

我正在尝试将元素读入表格。

我正在将元素放入文本字​​段。相反，我想在表格中显示..

下面是代码

```
 function createMarker(place) {
        //var placeLoc = place.geometry.location;
        var request = {
          reference: place.reference
        };

        service = new google.maps.places.PlacesService(map);
        service.getDetails(request, callback);
        service.getDetails(request, function(details, status) {//alert("address  "+details.formatted_address);

        document.getElementById('box1').value=details.formatted_address;
        document.getElementById('box2').value=details.name;
        document.getElementById('box3').value=details.international_phone_number;

    });

  }
   google.maps.event.addDomListener(window, 'load', initialize);

  </script>
  </head>
  <body>

  <input type="text" id="box1" size="20"/>
  <input type="text" id="box2" size="50"/>
  <input type="text" id="box3" size="20"/>
    <div id="map"></div>
    <div id="text">

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:20:02.017

```
<html>
<head>
<style>
table {
  border-collapse: collapse;
}
table td, table th {
  border: 1px solid black;
}
table tr:first-child th {
  border-top: 0;
}
table tr:last-child td {
  border-bottom: 0;
}
table tr td:first-child,
table tr th:first-child {
  border-left: 0;
}
table tr td:last-child,
table tr th:last-child {
  border-right: 0;
}
</style>
<script>
  function createMarker(place) {
    //var placeLoc = place.geometry.location;
     var request = {
     reference: place.reference
    };

    service = new google.maps.places.PlacesService(map);
    service.getDetails(request, function(details, status) {//alert("address  "+details.formatted_address);

      document.getElementById('box1').innerHTML=details.formatted_address;
      document.getElementById('box2').innerHTML=details.name;
      document.getElementById('box3').innerHTML=details.international_phone_number;    
   });

  }
  google.maps.event.addDomListener(window, 'load', initialize);

  </script>
  </head>
  <body>

  <table>
  <tr><td>Address:</td><td id="box1"></td></tr>
  <tr><td>Name:</td><td id="box2"></td>
  <tr><td>Phone:</td><td id="box3"></td>
  </tr>
  </table>

   <div id="map"></div>
   <div id="text">

</body>
</html> 
```

# android - Inbrowser android api的

> ID：12598376
> 
> 赞同：1
> 
> 时间：2012-09-26T09:16:23.493
> 
> 标签：android, html, api, web-applications

我正在尝试为手机制作一个浏览器内的网络应用程序。我们从 Android 系统开始，因为它是最开放的开发系统。

现在我也想为所有其他操作系统制作它，而且我听说我们可以将网站制作成应用程序。我们在 iPad 和 Android 平板电脑上看到了这一点。

如果你在平板电脑上打开它，他们会问“你会从这个网站制作一个应用程序吗？”。如果您这样做，他们会链接到您的网站。谷歌地图所做的是他们要求获得您的 GPS 数据的许可。我们想对蓝牙做同样的事情。

我现在的问题是，有没有人知道一个很好的例子，我可以看看如何做到这一点？

另外我想知道是否可以在 HTML 中完成所有操作，或者我是否需要在其上方添加一个 webview 层？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T06:18:30.147

看起来您要的是 Apache [PhoneGap](http://prohegap.com)

> PhoneGap 是 Nitobi 出品的移动开发框架，被 Adob​​e Systems 收购。它使软件程序员能够使用 JavaScript、HTML5 和 CSS3 来为移动设备构建应用程序，而不是使用特定于设备的语言，例如 Objective-C

或其他[基于网络的多手机应用程序框架](http://en.wikipedia.org/wiki/Multiple_phone_web_based_application_framework)

# android - 在android中创建具有事务功能的应用程序？

> ID：12598380
> 
> 赞同：0
> 
> 时间：2012-09-26T09:16:33.650
> 
> 标签：android

我想知道如何在 android 中实现货币交易类型的设施？请给我一些可能的建议或一些代码示例..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:59:44.457

应用内结算对您有用吗？[http://developer.android.com/guide/google/play/billing/index.html](http://developer.android.com/guide/google/play/billing/index.html)

# python - 用非 numpy 数组选择后屏蔽 numpy 数组

> ID：12598381
> 
> 赞同：0
> 
> 时间：2012-09-26T09:16:34.670
> 
> 标签：python, numpy, selection, mask

我有以下代码：

```
# unicorns is a numpy array with several fields
idx = (1, 2, 3, 5, 7)
unicorns=uni[idx]
# now i have only the first, second, third, ... unicorn
print unicorns 
```

但是，如果我想子选这个独角兽数组

```
unicorns['color'=='white']['Name'] 
```

这应该给我白色的独角兽的名字，numpy 只将`color==white`部分解释为`False`，它变为 0 并返回我的数组的第一个条目。

如何修复此代码，以便它执行我想要的操作，选择白色独角兽？

我希望一切都保持 numpy，所以我也可以选择独角兽的其他属性。

**编辑**

这是数组的示例：

```
 unicorns=[(1, black, 0.0, 'Pinky', 1) (2, black, 0.0, 'Winky', 1)
 (3, white, 0.0, 'Lala', 1) (4, white, 0.0, 'Merlin', 1)
 (5, black, 0.0, 'Meriva', 1) (6, white, 0.0, 'Panda', 1)]
    idx = [  0 ,  3  , 6 ] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T09:38:00.053

我不得不稍微修改您的数组以使其成为有效的 Python 代码。如果我正确转换它，那么我认为您正在寻找的是：

```
unicorns[unicorns['color'] == 'white']['name'] 
```

* * *

```
import numpy as np

unicorns=[(1, 'black', 0.0, 'Pinky', 1), (2, 'black', 0.0, 'Winky', 1),
          (3, 'white', 0.0, 'Lala', 1), (4, 'white', 0.0, 'Merlin', 1),
          (5, 'black', 0.0, 'Meriva', 1), (6, 'white', 0.0, 'Panda', 1),
          ]
unicorns = np.array(unicorns,
                    dtype = [('id', '<i4'),
                             ('color', 'S10'),
                             ('val1', '<f4'),
                             ('name', 'S10'),
                             ('val2', '<i4')])

print(unicorns['color'] == 'white')
# [False False  True  True False  True]

print(unicorns[unicorns['color'] == 'white']['name'])
# ['Lala' 'Merlin' 'Panda'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:40:46.167

您可能想要使用的是该[`numpy.where`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html)功能。像这样使用它：

```
 >>>unicorns=np.array([[1, "black", 0.0, 'Pinky', 1] ,
                       [2, "black", 0.0, 'Winky', 1],
                       [3, "white", 0.0, 'Lala', 1],
                       [4, "white", 0.0, 'Merlin', 1],
                       [5, "black", 0.0, 'Meriva', 1],
                       [6, "white", 0.0, 'Panda', 1]])
    >>> np.where(unicorns[:,1] == "black")
    (array([0, 1, 4]),)
    >>> unicorns[np.where(unicorns[:,1] == "black")]
    array([['1', 'black', '0.0', 'Pinky', '1'],
    ['2', 'black', '0.0', 'Winky', '1'],
    ['5', 'black', '0.0', 'Meriva', '1']], 
    dtype='|S8') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T20:45:56.430

您还可以查看 pandas，它对于此类切片和查询操作非常棒。你的问题可以这样解决：

```
In [12]: df = pd.DataFrame(unicorns)

In [13]: df.columns = ['id','color','speed','name','tails']

In [14]: df
Out[14]: 
  id  color speed    name tails
0  1  black   0.0   Pinky     1
1  2  black   0.0   Winky     1
2  3  white   0.0    Lala     1
3  4  white   0.0  Merlin     1
4  5  black   0.0  Meriva     1
5  6  white   0.0   Panda     1

In [16]: df[df.color == 'black']
Out[16]: 
  id  color speed    name tails
0  1  black   0.0   Pinky     1
1  2  black   0.0   Winky     1
4  5  black   0.0  Meriva     1

In [17]: df[df.color == 'black'].name
Out[17]: 
0     Pinky
1     Winky
4    Meriva
Name: name 
```

# postgresql - postgresql 加密/解密

> ID：12598382
> 
> 赞同：12
> 
> 时间：2012-09-26T09:16:43.400
> 
> 标签：postgresql

我正在研究现场加密/解密。

我选择的是

```
select encrypt('123456789012345','1234','aes');
              encrypt               
------------------------------------
 \x34591627f9c8eae417fc7cbbf458592c
(1 row) 
```

不过，我的数据已加密，解密后另一个字符串如下所示...

```
postgres=# select decrypt('\x34591627f9c8eae417fc7cbbf458592c','1234','aes');
             decrypt              
----------------------------------
 \x313233343536373839303132333435
(1 row) 
```

我走错路了吗？（我知道这种询问可能很愚蠢......）

我要做的只是获得一种最简单的方法，并且加密的数据很小......

提前致谢...

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-26T09:49:41.077

解密函数返回一个字节字符串，而不是字符串，因此它以十六进制表示法显示。实际值相同 \x31 = 1、\x32 = 2 等。

您需要将返回值转换回文本。

例如：

```
select convert_from(decrypt('\x34591627f9c8eae417fc7cbbf458592c','1234','aes'),'SQL_ASCII');
  convert_from   
-----------------
 123456789012345
(1 row) 
```

[Postgresql 字符串函数](http://www.postgresql.org/docs/9.1/static/functions-string.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-15T02:42:42.250

谢谢你，[加里](http://Gary)！

除此之外，如果您在表查询中使用解密，则必须专门将该列强制转换为 bytea 类型。例如，如果您有以下情况：

```
CREATE TABLE public.test_crypto
(
id bigint NOT NULL DEFAULT nextval('test_crypto_id_seq'::regclass),
plain_text text COLLATE pg_catalog."default",
crypted_text text COLLATE pg_catalog."default",
CONSTRAINT test_crypto_pkey PRIMARY KEY (id)
)
WITH (
OIDS = FALSE
)
TABLESPACE pg_default; 
```

您可以像这样加密数据：

```
insert into public.test_crypto (plain_text, crypted_text)
values ('plaintext', encrypt('plaintext', 'salty', 'aes')) 
```

并像这样解密它：

```
select id, plain_text,
convert_from(decrypt(crypted_text::bytea, 'salty', 'aes'), 'SQL_ASCII')
from test_crypto 
```

如果你不使用 crypted_text::bytea，SQL 解析器会因为找不到你所说的“解密”函数而对你大喊大叫。

# php - 每秒请求 JSON 1000 次。这个很贵吗？

> ID：12598383
> 
> 赞同：0
> 
> 时间：2012-09-26T09:16:46.117
> 
> 标签：php, javascript, jquery, json

伪代码：

```
function getjson() {
   $.getJSON('link_in_my_server_unique_for_each_user_json', function(data) {
     if (data.variable) {
        do_something();
     }
   });​ 
}

setInterval(getjson(), every_second) 
```

让 1000 个用户每秒在我的服务器中检索 json 文件并检查该文件是否有一些变量是否昂贵？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-03T20:25:16.433

首先，您无需猜测。你可以**测量**。

1.  使用可用于您的浏览器的开发人员工具（Firefox 的 Firebug、Chrome 的开发人员工具等）并观察请求并查看每个请求需要多长时间。
2.  观察服务器上的负载。如果它不是 0%，您将永远不会看到 1000 个会话同时运行。
3.  重复上述步骤，但打开一堆浏览器。打开并运行 20 个浏览器窗口应该很容易。
4.  请记住，随着服务器负载超过 50%，您的性能将变得越来越非线性。一旦你的系统被阻塞/颠簸很多，你就不能指望增加更多的客户端。

一旦你有了基线测量，你就可以考虑优化——你需要它吗？你手上有多大的问题？一些常见的解决方案：

1.  如果可能，请提供静态文件或 APC 缓存中的一段数据。
2.  如果您的数据是可缓存的，但您有多个 Web 服务器，请考虑使用 memcached、MongoDB 或其他一些集中式、非常快速的基于键的检索系统之类的解决方案。
3.  如果数据是从数据库中动态检索的，请考虑使用持久数据库连接。
4.  如果每个请求的 CPU 负载很高，那么您的代码路径中可能有一些昂贵的东西。尝试优化该特定请求的代码路径，即使您必须为它手工制作一个特殊的控制器并绕过您通常的框架。
5.  如果每个请求的网络延迟很高，请使用 HTTP 标头尝试说服客户端和服务器保持连接打开。

最后，如果您想要的性能似乎遥不可及，您将需要考虑架构更改。使用 WebSockets 可能是一个非常不同的代码路径，但可以想象得到更好的性能。我必须更多地了解你在做什么`link_in_my_server_unique_for_each_user_json`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-28T15:38:27.497

很有可能，这会杀死您的普通共享主机或小型 VPS。

完全有可能将其中大部分卸载到 CloudFlare 或 AWS CloudFront 等系统，并且缓存到期时间很短（约 1 秒）。大多数用户会直接从缓存中获取它，从而为您的服务器节省大部分工作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-28T15:41:25.000

如果您不能缓存，或许可以考虑 COMET 模式，这样您将有 1,000 个长期调用，而不是每秒 1,000 个调用，总体上服务的流量较少，但会提供所需的结果。见[http://en.wikipedia.org/wiki/Comet_%28programming%29](http://en.wikipedia.org/wiki/Comet_%28programming%29)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-02T15:47:19.333

你有没有想过一个[网络套接字](http://en.wikipedia.org/wiki/WebSocket)

它与 Stack Overflow 使用的原理相同。当变量实际发生变化时，您可以将数据推送给用户。但是您的服务器需要正确设置才能这样做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-30T13:17:50.293

所以我们说的是每秒至少 1k 个请求。即使对于功能强大的机器，这已经被认为是相当高的负载。那么每个请求需要做什么呢？

*   连接初始化
*   处理请求
*   执行服务器端逻辑

在这种情况下，您几乎消耗了所有可用资源（包括文件 i/o）。此外，您正在消耗大部分 Web 服务器资源以获得一些可能不是您最常用的功能的附加值。

**什么是更好的方法？**

您想对更改做出反应，而不是轮询它。因此，对于每个用户，我们都会有一个包含其事件的*通道，并且当事件发生时，我们希望服务器通知我们。*不幸的是，正如另一个答案中提到的，这不是 PHP 的强项。

对于客户端，您可以查看[SockJS](https://github.com/sockjs/sockjs-client)并将其与[Node.js](http://nodejs.org/)或[Vert.x](http://vertx.io/)配对。您可以免费获得所需的所有架构，而且设置起来并不难。SockJS 还带有一组很好的协议测试，所以很容易拥有自己的服务器端实现。

通过这些更改，每个用户对 SockJS 提供者只有一个请求，如果需要，您可以独立扩展它。主要服务也不会被 JSON 调用中断。所以我们最终得到

*   每页加载一个请求到 SockJS 提供程序
*   每次更改从 PHP 向 SockJS 提供者发出一个请求

它确实使身份验证有点棘手，但是您可以拥有一个 PHP 应用程序和 SockJS 提供者都知道的私钥，并使用它来签署一些 cookie。然后，您可以通过 JSON 请求传递该 cookie。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-03T11:25:14.360

除非变量是唯一的并且与特定用户相关，否则我会建议以下解决方案之一：

*   使用云服务缓存它
*   使用 Web Socket Connection 将其推送给用户
*   使用 javascript 将工作卸载到客户端
*   使用长轮询而不是间隔轮询

轮询数据的时代即将结束，而且通常有更好、更具成本效益的解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-29T09:43:31.153

只要 JSON 文件是“静态”请求（网络服务器直接按原样提供文件，而不将请求传递给某些 php/ruby/java/etc. 进程），您就可以通过简单的基准测试来确定您的服务器是否可以接受它它。

这对我来说就像一个预缓存（要请求的信息由服务器提前准备并以结构化响应的形式缓存）。尝试对这些类型的请求使用 nginx。它还具有用于预 gzip 文件的可选模块（如果您更改原始文件，它将自动更新 gzip 缓存）。这将为您提供额外的 CPU（显然还有更多的带宽）。

由于您没有指定文件大小、可用带宽、CPU 类型、内存等，因此没有人可以对“贵吗？”给出是/否的答案。在具有足够带宽（相对于您的文件大小）的强大服务器上，它可能是微不足道的，或者它可能会杀死共享主机或弱 vps 设置。

**更新：**如果您使用长 Keep-alive（持久 HTTP TCP 连接）正确设置过期标头，您可以从 HTTP 响应代码 304 Not Modified 中受益（也就是服务器将只提供此状态和一些标头，而不是整个文件一遍一遍）。不涉及脚本，不涉及提供文件（除非它更改），不会发生 TCP 重新连接，不会发生磁盘读取（文件统计信息至少由操作系统缓存） - nginx 可能是 raw 的最佳选择静态文件检查/读取/服务的性能。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-03T01:16:50.020

你不检查文件是否有一些变量，而是告诉你告诉你的前端已经创建了一个变量，怎么样？观察者模式在工作！

有一些库可以做 PHPWebSocket 类型的东西。它们通常涉及一些长轮询类型的策略。

查看：[http ://code.google.com/p/phpwebsocket/](http://code.google.com/p/phpwebsocket/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-05T14:19:13.857

这看起来真的像你在解决错误的问题。

我会质疑为什么你觉得有必要让每一个浏览器在他们查看它的每一秒都点击你的网站。也许一些背景会有所帮助。

现在，如果你真的需要这种能力，那么是的，你可以做到。然而，这一切都与成本有关。您需要对其进行测试，以确定负载平衡配置中需要多少 Web 服务器。然后回到提出要求的人那里，让他们知道与该“功能”相关的成本。

# html - JSF html 命名空间不起作用

> ID：12598388
> 
> 赞同：1
> 
> 时间：2012-09-26T09:17:01.200
> 
> 标签：html, jsf, maven

我正在使用一个将 WAR 存档部署到将 EAR 存档部署到 JBoss 服务器的项目的 maven 项目。

这是我的 Facelets 代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC 
    "-//W3C//DTD XHTML 1.0 Strict//EN" 
    "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">
<h:head>
    <title>title</title>
</h:head>
<h:form>

    <h:body>
        <input type="button" value="babap"></input>
        <h1>Ueberschrift</h1>

        <p>paragraph</p>

        <h:outputText value="outputText" />

        text at bottom
    </h:body>
</h:form>
</html> 
```

一切似乎都有效，除了`<h:outputtext>`. 它根本没有出现在网站上。这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:33:17.953

> *除了 h:outputtext 之外，一切似乎都正常。它根本没有出现在网站上。*

请求 URL（您在浏览器地址栏中看到的 URL）是否与`FacesServlet`? 如果不是，则不会调用它，因此不会执行所有 JSF 工作。

You need to make sure that the request URL matches the URL pattern of the `FacesServlet`. If it's mapped on `*.jsf`, then open the page by `/foo.jsf` instead of `/foo.xhtml`. Or, better, just change the URL pattern of the `FacesServlet` in `web.xml` to `*.xhtml`. This way you never need to worry about virtual URLs.

# asp.net-mvc-3 - jsonp + 控制器动作 + mvc 3

> ID：12598393
> 
> 赞同：0
> 
> 时间：2012-09-26T09:17:19.820
> 
> 标签：asp.net-mvc-3, view, controller, action, jsonp

我有一个 asp.net mvc 3 应用程序。

```
public ActionResult Students()
{ 
  return View();
} 
```

当我通过浏览器请求这些操作时，一切正常。它返回适当的视图，但是当通过 jQuery Ajax 调用从另一个站点（跨域）调用此类操作时，它会给出传输错误。

因此我们需要以 JsonpResult 类型返回此类视图，但现在的问题是浏览器如何加载此类 JsonpResult 类型的视图？它不返回视图的 html 部分，而是要求浏览器保存 Jsonp 类型的视图结果。

任何建议，如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:25:29.977

您可以使用[此答案](https://stackoverflow.com/a/4344602/29407)`RenderPartialViewToString`中显示的方法将视图呈现为字符串，然后返回您编写的自定义 JsonpResult：

```
public class StudentsController : Controller
{
    public ActionResult Index()
    {
        MyViewModel model = ...
        return new JsonpResult(new 
        {
            html = RenderViewToString("Index", model)
        });
    }

    public string RenderViewToString(string viewName, object model)
    {
        ViewData.Model = model;
        using (var sw = new StringWriter())
        {
            var viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, viewName);
            var viewContext = new ViewContext(ControllerContext, viewResult.View, ViewData, TempData, sw);
            viewResult.View.Render(viewContext, sw);
            viewResult.ViewEngine.ReleaseView(ControllerContext, viewResult.View);
            return sw.GetStringBuilder().ToString();
        }
    }

    protected string RenderPartialViewToString(string viewName, object model)
    {
        if (string.IsNullOrEmpty(viewName))
        {
            viewName = ControllerContext.RouteData.GetRequiredString("action");
        }

        ViewData.Model = model;
        using (var sw = new StringWriter())
        {
            var viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, viewName);
            var viewContext = new ViewContext(ControllerContext, viewResult.View, ViewData, TempData, sw);
            viewResult.View.Render(viewContext, sw);
            return sw.GetStringBuilder().ToString();
        }
    }
} 
```

这里使用的`JsonpResult`类可以[在这篇文章](https://stackoverflow.com/a/11536947/29407)中找到。

现在您可以使用来自另一个域的 AJAX 调用此控制器操作：

```
var url = 'http://example.com/students/index';
$.getJSON(url + '?callback=?', function (data) {
    alert(data.html);
}); 
```

# java - 如何在手机上选择文件而不是 SD 卡？

> ID：12598398
> 
> 赞同：-1
> 
> 时间：2012-09-26T09:17:27.690
> 
> 标签：java, android, fileoutputstream, android-file

我的意思是我想在手机内存而不是 sdcard 上定义文件路径。

我想用这个：

```
FileOutputStream out3 = new FileOutputStream(Environment.getRootDirectory()+"/a/b.txt"); 
```

这给出了错误。
我怎样才能解决这个问题？谢谢。

错误

```
 09-26 19:49:11.050: E/AndroidRuntime(20214): FATAL EXCEPTION: main
09-26 19:49:11.050: E/AndroidRuntime(20214): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.kelime.tekerrur/com.example.kelime.tekerrur.MainActivity}: java.lang.NullPointerException
09-26 19:49:11.050: E/AndroidRuntime(20214):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
09-26 19:49:11.050: E/AndroidRuntime(20214):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
09-26 19:49:11.050: E/AndroidRuntime(20214):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
09-26 19:49:11.050: E/AndroidRuntime(20214):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
09-26 19:49:11.050: E/AndroidRuntime(20214):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-26 19:49:11.050: E/AndroidRuntime(20214):    at android.os.Looper.loop(Looper.java:137) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:30:27.683

要获得 SD 卡路径，您必须使用`Environment.getExternalStorageDirectory()`
Mukesh`Environment.getRootDirectory()`建议的返回设备根目录“/” - 您无法在非根设备上的此目录中写入（或读取）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:20:01.857

你可以试试这个——

```
File imgFile = new File(Environment.getRootDirectory()+“/test_image.jpg”); 
```

# ruby-on-rails - 如何根据条件检索帖子并编辑特定于用户的帖子？

> ID：12598401
> 
> 赞同：0
> 
> 时间：2012-09-26T09:17:36.930
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用设计作为身份验证系统，在用户登录后，我想显示一个下拉列表，用户必须在其中选择一个项目名称并单击下一步，这应该允许他查看已发布的与该项目相关的帖子. 该帖子可以被许多用户发布和查看，而用户应该只能编辑他发布的帖子，但可以查看所有帖子。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:26:24.503

您是否经历过任何基于角色的建模，您可以尝试[cancan](https://github.com/ryanb/cancan)，或者对于您的简单用例，您与用户有 owner 或 belongs_to 关系。

因此，如果用户是否是帖子的所有者，您可以在编辑帖子时使用过滤器之前

```
before_filter :is_owner_of_post,:only=>[:edit,:update,:destroy]
protected
def is_owner_of_post
 @post = Post.find(params[:id])
 if @post.user != current_user
  redirect_to root_path,:notice=>"Un authorized access"
 end 
end 
```

阅读一些关于授权的文章或观看一些[视频](http://railscasts.com/?tag_id=26)，您可以获得更多的想法。

# matlab - 通过 putdata 调度队列并通过多个触发器不连续地执行它

> ID：12598404
> 
> 赞同：1
> 
> 时间：2012-09-26T09:17:46.960
> 
> 标签：matlab, data-acquisition

我正在使用 Matlab 数据采集工具箱来控制 National Instruments 设备 (NI USB 6229) 的输出。到目前为止，我能够通过`analogoutput`and 创建输出对象`addchannel`，通过 对我的数据进行排队`putdata`，并通过 a 开始数据输出`trigger`。

但是，一旦触发，队列就会作为一个整体执行，我想知道是否可以只执行一定数量的样本。

因此，假设我通过 10.000 个样本排队`putdata`。然后，每次触发发生时，仅执行 1.000 个样本，直到队列为空（即，10 次触发后队列为空）。

**使用 Matlab 的数据采集工具箱可以实现吗？如果可以，如何实现？**

# php - PHP将两个不同的字符串表示为相同

> ID：12598407
> 
> 赞同：104
> 
> 时间：2012-09-26T09:17:56.897
> 
> 标签：php, string

> **可能重复：**
> [php == vs === 运算符](https://stackoverflow.com/questions/589549/php-vs-operator)
> [相等（== 双等号）和身份（=== 三等号）比较运算符有何不同？](https://stackoverflow.com/questions/80646/how-do-the-equality-double-equals-and-identity-triple-equals-comparis)

为什么以下语句返回`true`？

```
"608E-4234" == "272E-3063" 
```

我也尝试过在字符串周围加上单引号。我可以对其进行评估的唯一方法`false`是使用`===`运算符而不是`==`

我的猜测是 PHP 将其视为某种等式，但它似乎有点奇怪。

有人可以详细说明吗？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-09-26T09:22:38.803

`"608E-4234"`是[浮点数格式](http://php.net/manual/en/language.types.float.php)，所以比较时会转换成数字。

`608E-4234`并且`272E-3063`都将是`float(0)`因为它们太小了。

对于`==`在 php 中，

> 如果您将数字与字符串进行比较，或者比较涉及 **数字字符串**，则每个字符串都将转换为数字并以数字方式执行比较。

[http://php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)

***注意力：***

***javascript 中同时具有`==`和的行为又`===`如何呢？***

答案是行为与 PHP 不同。在 javascript 中，如果您比较具有相同类型的两个值，`==`则与 相同`===`，因此与两个相同类型的值进行比较时不会发生类型转换。

***在 JavaScript 中：***

```
608E-4234 == 272E-3063 // true
608E-4234 == "272E-3063" // true
"608E-4234" == 272E-3063 // true
"608E-4234" == "272E-3063" // false (Note: this is different form PHP) 
```

所以在javascript中，当你知道结果的类型时，你可以使用`==`而不是`===`保存一个字符。

例如，`typeof`运算符总是返回一个字符串，所以你可以使用

`typeof foo == 'string'`而不是`typeof foo === 'string'`没有伤害。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-26T09:24:28.027

PHP 使用 IEEE 754 进行浮点数，并且您的数字非常小，以至于它们的值为 0。

见：[http ://en.wikipedia.org/wiki/IEEE_floating_point](http://en.wikipedia.org/wiki/IEEE_floating_point)

```
Name        Common name         Base    Digits  E min   E max   
binary32    Single precision        2   23+1    −126    +127        
binary64    Double precision        2   52+1    −1022   +1023 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-09-26T09:24:49.217

我认为 PHP 将其视为一种科学语法，将其翻译为：

```
608 x 10^-4234 == 272 x 10^-3063 
```

PHP 将其解释为`0 = 0`.

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-09-26T09:23:29.873

PHP 将这些字符串作为浮点数进行比较，它们都为零，所以你**必须**使用`===`运算符，

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-09-26T09:23:03.923

我试图回答。如果您使用“===”，则还要检查类型而不是值。如果您使用“==”，您只需检查该值是否相同。

你可以参考[这里](http://www.w3schools.com/php/php_operators.asp)和[这里](http://www.techsww.com/tutorials/web_development/php/tips_and_tricks/difference_between_equal_and_identical_comparison_operators_php.php)。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-26T09:25:47.337

这就是它所看到的：
[http ://www.wolframalpha.com/input/?i=608E-4234&dataset=](http://www.wolframalpha.com/input/?i=608E-4234&dataset=)
[http://www.wolframalpha.com/input/?i=272E-3063](http://www.wolframalpha.com/input/?i=272E-3063)

由于它们不适合变量，它们都等于 0，或者 php 选择的任何默认值，因此是等价的。

# python - Z3/Python 从模型中获取 python 值

> ID：12598408
> 
> 赞同：16
> 
> 时间：2012-09-26T09:17:57.817
> 
> 标签：python, z3, z3py

如何从 Z3 模型中获取真正的 python 值？

例如

```
p = Bool('p')
x = Real('x')
s = Solver()
s.add(Or(x < 5, x > 10), Or(p, x**2 == 2), Not(p))
s.check()
print s.model()[x]
print s.model()[p] 
```

印刷

```
-1.4142135623?
False 
```

但那些是 Z3 对象而不是 python 浮点/布尔对象。

我知道我可以使用`is_true`/检查布尔值`is_false`，但是如何优雅地将 ints/reals/... 转换回可用值（`?`例如，无需通过字符串并删除这个额外的符号）。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-26T10:59:33.143

对于布尔值，您可以使用函数`is_true`和`is_false`。数值可以是整数、有理数或代数。我们可以使用函数`is_int_value`,`is_rational_value`和`is_algebraic_value`来测试每个案例。整数情况是最简单的，我们可以使用方法`as_long()`将 Z3 整数值转换为 Python long。对于有理值，我们可以使用 和 方法`numerator()`获得`denominator()`代表分子和分母的 Z3 整数。方法`numerator_as_long()`和是和`denominator_as_long()`的快捷方式。最后，代数数用于表示无理数。该类有一个名为. 它返回一个 Z3 有理数，它精确地逼近代数数`self.numerator().as_long()``self.denominator().as_long()``AlgebraicNumRef``approx(self, precision)``1/10^precision`. 这是有关如何使用此方法的示例。它也可以在线获得：[http ://rise4fun.com/Z3Py/Mkw](http://rise4fun.com/Z3Py/Mkw)

```
p = Bool('p')
x = Real('x')
s = Solver()
s.add(Or(x < 5, x > 10), Or(p, x**2 == 2), Not(p))
s.check()
m = s.model()
print m[p], m[x]
print "is_true(m[p]):", is_true(m[p])
print "is_false(m[p]):", is_false(m[p])
print "is_int_value(m[x]):", is_int_value(m[x])
print "is_rational_value(m[x]):", is_rational_value(m[x])
print "is_algebraic_value(m[x]):", is_algebraic_value(m[x])
r = m[x].approx(20) # r is an approximation of m[x] with precision 1/10^20
print "is_rational_value(r):", is_rational_value(r)
print r.numerator_as_long()
print r.denominator_as_long()
print float(r.numerator_as_long())/float(r.denominator_as_long()) 
```

# flash - 是否可以使用 IntelliJ IDEA 调试 Flash？

> ID：12598409
> 
> 赞同：2
> 
> 时间：2012-09-26T09:17:59.220
> 
> 标签：flash, debugging, intellij-idea

我正在尝试使用 IntelliJ IDEA 调试 Flash 项目。这是我得到的：

> "c:\program files\java\jdk1.7.0_06\jre\bin\java.exe" "-Dapplication.home=C:\Program Files (x86)\flash" -Xmx384m -Dsun.io.useCanonCaches=false - Djava.awt.headless=true -Duser.language=en -Duser.region=en -Xmx512m -classpath "C:\Program Files (x86)\JetBrains\IntelliJ IDEA 11.1.3\plugins\flex\lib\idea-fdb -4.5.0.20967-fix.jar;C:/Program Files (x86)/flash/lib/fdb.jar" flex.tools.debugger.cli.DebugCLI Adob​​e fdb (Flash Player Debugger) [build 23201] 版权所有 (c) 2004-2007 Adob​​e, Inc. 保留所有权利。等待播放器连接 连接失败；会话超时。确保： 1\. 您在调试的情况下编译了 Flash 电影，并且 2\. 您正在运行 Flash Player 的调试器版本。

我已经在调试的情况下编译了我的 Flash。如果我转到项目结构 -> 构建配置 -> 编译器选项，则选中生成可调试 SWF。我正在运行 Flash 播放器的调试版本。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:42:08.697

这似乎是 Flash 播放器的 chrome 调试版本的问题。如果 SWF 文件来自本地 Web 服务器，则它不会被标识为可调试。如果从文件系统打开相同的文件，则可以对其进行调试。IE没有这样的问题。希望这会对某人有所帮助。

# javascript - 如何将两个字符串值作为整数进行比较？

> ID：12598413
> 
> 赞同：6
> 
> 时间：2012-09-26T09:18:13.013
> 
> 标签：javascript

我正在使用转换和比较两个字符串值

```
if (parseInt(x)!=parseInt(y)) { 
```

问题是如果值是`x="9"`并且`y="09"`测试返回`false`。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-26T09:19:23.243

用这个 ：

```
if(parseInt(x, 10)!=parseInt(y, 10)) 
```

如果您不精确基数，“09”将被解析为八进制（这给出 0）。

[关于 parseInt 的 MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)

请注意，在使用八进制表示时，您甚至不应该依赖这种解释：

> **ECMAScript 5 移除八进制解释**
> 
> 函数 parseInt 的 ECMAScript 5 规范不再允许实现将以 0 字符开头的字符串视为八进制值。ECMAScript 5 指出：
> 
> parseInt 函数根据指定的基数生成一个整数值，该整数值由对字符串参数的内容的解释决定。字符串中的前导空格被忽略。如果基数未定义或为 0，则假定为 10，除非数字以字符对 0x 或 0X 开头，在这种情况下假定基数为 16。如果 radix 为 16，则 number 也可以选择以字符对 0x 或 0X 开头。
> 
> 这与 ECMAScript 3 不同，后者不鼓励但允许八进制解释。
> 
> 由于截至 2011 年许多实现尚未采用此行为，并且必须支持较旧的浏览器，因此请始终指定基数。

简单地 ：

> 总是指定一个基数

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T09:22:52.383

您需要将基数显式设置为 10，否则它假定它是 8（javascript 坏部分）：

```
parseInt(x,10) 
```

[http://www.w3schools.com/jsref/jsref_parseint.asp](http://www.w3schools.com/jsref/jsref_parseint.asp)

> 如果字符串以“0”开头，则基数为 8（八进制）。此功能已弃用

# regex - 如果上一行以字符开头，则匹配

> ID：12598414
> 
> 赞同：2
> 
> 时间：2012-09-26T09:18:15.943
> 
> 标签：regex, grep, line

我有一个文件，看起来像这样：

```
expression1
- expresson1.1
- expressoion1.2
expression2
-expression2.1
expression3
-expression3.1
-expression3.2
-expression3.3 
```

我想要做的是，删除第 1.2、3.2 和 3.3 行，所以只有不以减号开头的行，下一行保留。

所以我尝试编写一个正则表达式，匹配以减号开头的每一行，而前一行也以减号开头，然后删除它们。

到目前为止，没有成功。任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:34:52.773

如果您会接受 awk 解决方案，请检查以下单行：

```
awk '/^[^-]/{f=1;print;next;}{if(f && $0~/^-/){print;f=0;}}' yourFile 
```

**测试**

```
kent$  echo "expression1
dquote> - expresson1.1
dquote> - expressoion1.2
dquote> expression2
dquote> -expression2.1
dquote> expression3
dquote> -expression3.1
dquote> -expression3.2
dquote> -expression3.3
dquote> "|awk '/^[^-]/{f=1;print;next;}{if(f && $0~/^-/){print;f=0;}}'
expression1
- expresson1.1
expression2
-expression2.1
expression3
-expression3.1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T10:42:29.133

You can use this regex:

```
/(-.+)\s((-.+)?(\s|))+/g 
```

Replacing the matches with:

```
$1\n 
```

You can see this regex in action with RegExr [here](http://regexr.com?329ac).

P.S. tough problem, here lookarounds don't work because you don't have fixed length prefixes to match against, while lookbehind (and lookahead) require fixed length strings as pointed out [here](http://www.asiteaboutnothing.net/regex/regex-lookarounds.html) (near the end of the page).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:41:36.853

根据您的正则表达式风格，可能有一种方法可以激活多行模式。在这种情况下，除了整个字符串的开头和结尾之外，还匹配行开头和结尾`^`。`$`

```
/^-.*$\n((^-.*$\n?)+)/ 
```

This should match at least two consecutive lines starting with `-`. The first capture/subpattern contains all lines after the first one. So these matches would be what you want to delete.

Of course, replace `\n` with the line ending appropriate for your system.

# windows - Windows 上的 Safari 远程调试

> ID：12598415
> 
> 赞同：13
> 
> 时间：2012-09-26T09:18:16.947
> 
> 标签：windows, safari, ios6, remote-debugging

随着 iOS 6 的发布，Apple 实现了一项称为[远程调试的功能](http://html5-mobile.de/blog/ios6-remote-debugging-web-inspector?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A+video-flash+%28www.video-flash.de%29)

自安装新的 iOS 6 以来，客户的 webapp 出现问题，我无法解决问题。[缓存 AJAX 请求](https://stackoverflow.com/questions/12506897/is-safari-on-ios-6-caching-ajax-results)似乎不是问题，因为错误是随机发生的，问题不在于（仅）结果仍然相同。

所以它必须是并行[AJAX-Calls的问题](http://www.realsoftwareblog.com/2012/09/ios-6-mobile-safari-web-applications.html)

为了识别问题并有效地修复它（而不是在黑暗中磕磕绊绊），我需要一个调试器。我很高兴了解远程调试功能，但我无法让它工作。

* * *

# 现在的问题是：

*   是否可以在 Windows 版本的 Safari 中使用远程调试？
*   如果是这样，我该如何激活它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-05-08T13:42:43.610

在 Windows 上如何调试 Safari iOS？

*   那些不错的 iPhone Safari 开发者工具需要 Safari 6，即**它们在 Windows 上不可用。** *Safari 6 没有 Windows 版本的计划，或者正如 Apple 所说：“Safari 6 可用于 Mountain Lion 和 Lion。Safari 5 继续可用于 Windows。” （[http://en.wikipedia.org/wiki/Safari_%28web_browser%29#Safari_6](http://en.wikipedia.org/wiki/Safari_%28web_browser%29#Safari_6)）*

*   如果您的本地 Web 服务器（例如：XAMPP）配置正确，您*应该*可以在 iPhone 连接到计算机后访问它。但是，在 Windows 上，这也不起作用。

**备择方案：**

*   *有一天， ***WebKit 调试代理***[可能会使用 Chrome 代替 Safari 来提供类似的功能： https](https://github.com/google/ios-webkit-debug-proxy) ://github.com/google/ios-webkit-debug-proxy * *“计划支持 Windows，但尚未实施。”**
**   使用***jsconsole***进行远程调试：[http](http://jsconsole.com/remote-debugging.html) ://jsconsole.com/remote-debugging.html 对于生产来说一点都不安全（阅读警告，不要在产品中使用）但非常方便。*

 *希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-07T15:08:21.947

实际上，有一种非常简单的方法可以在 Windows 机器上使用 Firefox WebIDE 在 iOS 上的 Safari 中调试网站。[我在https://stackoverflow.com/a/35714835/306179](https://stackoverflow.com/a/35714835/306179)上写了一个答案，进一步描述了这个解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-30T10:32:26.127

此外，如果您是[BrowserSync](https://www.browsersync.io/)（顺便说一句，您应该这样做），您可以使用它的远程调试功能，该功能可从 UI 访问。它应该适用于 Safari 手机。

已经有一个关于这个的话题： [如何使用 Browser-sync 进行远程调试？](https://stackoverflow.com/questions/28470601/how-to-do-remote-debugging-with-browser-sync)

这个很酷的功能由[Weinre](https://people.apache.org/~pmuellr/weinre/docs/latest/)提供支持。不是最令人愉快的调试器。但它工作得很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T20:54:26.440

ios设备上的端口转发很容易。但问题是，默认情况下，ios 默认情况下不会在任何端口上运行检查器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-26T14:39:22.597

我目前看到的唯一解决方案是[Telerik](http://telerik.com) “AppBuilder”。然而它非常昂贵......*

# html - 如何在没有表单的情况下使用选择标签将数据发送到服务器

> ID：12598417
> 
> 赞同：0
> 
> 时间：2012-09-26T09:18:27.927
> 
> 标签：html, django, jquery

我的 html 文件中有一个选择标签。我希望当用户更改他/她的选择时，我必须使用 ajax 的页面将用户选择的值发送到我的 views.py 函数，然后我用这个值重新创建页面。我的html代码：

```
<div id="response>
    <select name="page_length_name" id="page_length_id">
        <option id="opt1">10</option>
        <option id="opt2">20</option>
        <option id="opt3">30</option>
        <option id="opt4">40</option>
    </select>
     //here is a table
</div> 
```

（此选择标签不在表单中）。我希望它被修复，直到用户更改数据。所以我想我必须使用cookie。我不知道我可以使用这样的功能，虽然选择不是形式？它应该是“POST”方法吗？post只能在表格中使用吗？如果是，那么我如何将数据（我的选择标签）发送到服务器？

```
$(function() {
                $('#page_length_id').change(function() {
                temp = ["page_length_id"].options[selectedIndex].value;
                $.ajax({
                    type: "POST",
                    data: temp,
                    url: 'backup/',
                    success: function(data) {
                        alert("success");
                        $("#response").html(data);
                    }
                });
            }) 
```

以及如何强制此选择值在 cookie 中？仅通过views.py中的这行代码就足够了吗？：

```
table_length = request.COOKIES.get('table_length') 
```

这是我的 viwes.py：

```
def backup(request):
    if request.is_ajax():
        try:
            table_length = request.COOKIES.get('table_length')
        except Exception:
            table_length = 10
        if not page_length:
            table_length = 10 
        //here i create the page with xsl and send it to a page to be shown 
        result = style.applyStylesheet(doc)
        out = style.saveResultToString( result )
        ok =  mark_safe(out)
        style.freeStylesheet()
        doc.freeDoc()
        result.freeDoc()
        if request.method == 'POST': 
            return HttpResponse(ok)
        else:
            return render_to_response("show.html", {
                'str': ok,
                }, context_instance=RequestContext(request)) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T11:00:33.587

对于 ajax 问题，您可以轻松地使用

```
 $.ajax({
    type:"POT",
    url :....,
    data:{
        .......
        'csrfmiddlewaretoken': $("{% csrf_token %}").find("input").attr("value"),
    },    
    dataType:"html",
    error:function(data){},
    success:function(data){
      ....
    },
  }); 
```

但你需要把

```
<input type="hidden" id="csrf_token" value="{{csrf_token}}"/> 
```

在你的 html

如果您使用表单发送数据，您也应该使用 csrf

```
<form action="/contact/" method="post">{% csrf_token %}
{{ form.as_p }}
<input type="submit" value="Submit" />
</form> 
```

[https://docs.djangoproject.com/en/dev/topics/forms/](https://docs.djangoproject.com/en/dev/topics/forms/)

# php - 无法使用肥皂为 xml 请求发送正确的参数

> ID：12598418
> 
> 赞同：0
> 
> 时间：2012-09-26T09:18:37.800
> 
> 标签：php, soap, soap-client

我正在尝试向远程服务器发送一个肥皂请求并获得响应。但是我面临的问题是我的请求中有一个参数在我的请求中，即我创建了我的请求所需的一组参数，只有一个参数我看不到，

// 样品请求：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
<soapenv:Body>
<hot:HotelSearchAvailabilityReq    xmlns:hot="http://www.xxx.com/schema/hotel_v17" xmlns:com="http://www.xxx.com/schema/common_v10" TargetBranch="WAB HERE">
<com:BillingPointOfSaleInfo OriginApplication="UDT"/>
<hot:HotelLocation Location="TPA" LocationType="City">
<com:VendorLocation ProviderCode="" VendorCode="" VendorLocationID="" Key="1"/>
<com:VendorLocation ProviderCode="" VendorCode="" VendorLocationID="" Key="2"/>
<com:VendorLocation ProviderCode="" VendorCode="" VendorLocationID="" Key="3"/>
<com:VendorLocation ProviderCode="" VendorCode="" VendorLocationID="" Key="2"/>
</hot:HotelLocation>
<hot:HotelSearchModifiers NumberOfAdults="2" NumberOfRooms="1">
<com:CorporateDiscountID NegotiatedRateCode="true">CCC</com:CorporateDiscountID>
</hot:HotelSearchModifiers>
<hot:HotelStay>
<hot:CheckinDate>2012-06-01</hot:CheckinDate>
<hot:CheckoutDate>2012-06-02</hot:CheckoutDate>
</hot:HotelStay>
</hot:HotelSearchAvailabilityReq>
</soapenv:Body>
</soapenv:Envelope> 
```

// 我的要求是：

```
<?xml version="1.0" encoding="UTF-8"?> 
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://www.xxx.com/schema/common_v10" xmlns:ns2="http://www.xxx.com/schema/hotel_v19">
<SOAP-ENV:Body>
    <ns2:HotelSearchAvailabilityReq>
        <ns1:BillingPointOfSaleInfo OriginApplication="UAPI"/>
        <ns2:HotelLocation Location="LON" LocationType="City"/>
        <ns2:HotelSearchModifiers NumberOfAdults="2" NumberOfRooms="1"/>
        <ns2:HotelStay>
            <ns2:CheckinDate>2012-11-06</ns2:CheckinDate>
            <ns2:CheckoutDate>2012-11-14</ns2:CheckoutDate>
        </ns2:HotelStay>
    </ns2:HotelSearchAvailabilityReq>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

在我对示例请求的请求中，我无法获得参数“VendorLocation”。

//php代码：ModuleFunction.php

```
class HotelResultsSoapClient extends SoapClient 
{
function __construct($wsdlLocation)
{
    $trac["trace"]=1;
    $trac["use"]=SOAP_LITERAL;
    $trac["style"]=SOAP_DOCUMENT;
    $trac["compression"]=SOAP_COMPRESSION_ACCEPT | SOAP_COMPRESSION_GZIP | 5;
    //$trac["compression"]=SOAP_COMPRESSION_ACCEPT ;
    $trac["type_ns"]="";
    $trac["login"]=SOAP_CLIENT_USERNAME;
    $trac["password"]=SOAP_CLIENT_PASSWORD;
    $trac["location"]="https://xxx.com/B2BGateway/connect/uAPI/HotelService";
    $trac["version"]="SOAP_1_1";
    $trac["action"]="http://localhost:8080/kestrel/HotelService";

    parent::__construct($wsdlLocation,$trac);
}

function __doRequest($request, $location, $action, $version) 
{

    $namespace1="http://www.travelport.com/schema/hotel_v19_0";
    $namespace2="http://www.travelport.com/schema/common_v17_0";

    if(empty($_SESSION['hotelSearch']['nextResultReference']) || $_SESSION['hotelSearch']['nextResultReference'] == "notSet")
    {
    //used for sending a normal hotel request  --- do not delete just comment/ uncomment
        $request=str_replace("<ns2:HotelSearchAvailabilityReq","<ns2:HotelSearchAvailabilityReq TargetBranch=".'"'."a00000".'"'." "."xmlns:ns2=".'"'.$namespace1.'"'." "."xmlns:ns1=".'"'.$namespace2.'"',$request);

    }
    else
    {
        //used for sending next result hotel request --- do not delete just comment/ uncomment
        $request=str_replace("<ns2:HotelSearchAvailabilityReq","<ns2:HotelSearchAvailabilityReq TargetBranch=".'"'."a00000".'"'." "."xmlns:ns2=".'"'.$namespace1.'"'." "."xmlns:ns1=".'"'.$namespace2.'"',$request);
        $request=str_replace("<ns1:NextResultReference","<ns1:NextResultReference"." ".'ProviderCode="1G"',$request);   
    }

    return parent::__doRequest($request, $location, $action, $version);
}//function

function __getLastRequestHeaders()
{
    return parent::__getLastRequestHeaders();
}//function

function __getLastRequest()
{
    return parent::__getLastRequest();
}//function

  }//class 
```

结果.php

```
require_once('ModuleFunctions.php');

$client = new HotelResultsSoapClient("WSDL Url");
$final = array();
$final['vc'] = {"oo","yz","hi","ii","xx"};
$final['vi'] = {"00000","12345","11111","99999","23456"};
$params = array();
// element = BillingPointOfsaleInfo ; attribute = OriginApplication.
$params["BillingPointOfSaleInfo"] = array();
$params["BillingPointOfSaleInfo"]["OriginApplication"] = "UAPI";
/* ----------------------------------------------------------------------- */
// element = HotelLocation ; attribute = Location, LocationType.
$params["HotelLocation"] = array();
$params["HotelLocation"]["Location"] = "{$destination}";
$params["HotelLocation"]["LocationType"] = "City";
/* ----------------------------------------------------------------------- */
// element = VendorLocation ; attribute = ProviderCode, VendorCode, VendorLocationID,  Key.
$params["VendorLocation"] = array();
for ($i = 0; $i < count($final['vc']); $i++) {
$params["VendorLocation"][$i] = array();
$params["VendorLocation"][$i]["ProviderCode"] = "1G";
$params["VendorLocation"][$i]["VendorCode"] = "{$final['vc'][$i]}";
$params["VendorLocation"][$i]["VendorLocationID"] = "{$final['vi'][$i]}";
}
//$params["VendorLocation"]["ProviderCode"] = "1G";
//$params["VendorLocation"]["VendorCode"] = "WV";
//$params["VendorLocation"]["VendorLocationID"] = "95625";
/* ----------------------------------------------------------------------- */
// element = HotelSearchModifiers ; attribute = NumberofAdults, NumberOfRooms.
$params["HotelSearchModifiers"] = array();
$params["HotelSearchModifiers"]["NumberOfAdults"] = "{$NumberOfAdults}";
$params["HotelSearchModifiers"]["NumberOfRooms"] = "{$NumberOfRooms}";
/* ------------------------------------------------------------------------- */
// element = CorporateDiscountID ; attribute = NegotiatedRateCode.
$params["CorporateDiscountID"] = array();
$params["CorporateDiscountID"]["NegotiatedRateCode"] = "true";
/* ------------------------------------------------------------------------- */
// element = HotelStay ; attribute = CheckinDate, CheckoutDate.
$params["HotelStay"] = array();
$params["HotelStay"]["CheckinDate"] = "{$checkInDate}";
$params["HotelStay"]["CheckoutDate"] = "{$checkOutDate}";

$response = $client->service($params);

echo "<hr>" . "Request" . "<hr/>" . "<br/>";
echo "\n" . "Request:" . htmlentities($client->__getLastRequest()) . "\n";
echo "<br/>"; 
```

我的参数数组由它组成，但它显示在我的请求中

// 参数数组：

```
Array
(
[BillingPointOfSaleInfo] => Array
    (
        [OriginApplication] => UAPI
    )

[HotelLocation] => Array
    (
        [Location] => LON
        [LocationType] => City
    )

[VendorLocation] => Array
    (
        [0] => Array
            (
                [ProviderCode] => 1G
                [VendorCode] => oo
                [VendorLocationID] => 00000 
            )

        [1] => Array
            (
                [ProviderCode] => 1G
                [VendorCode] => yz
                [VendorLocationID] => 12345 
            )

        [2] => Array
            (
                [ProviderCode] => 1G
                [VendorCode] => hi
                [VendorLocationID] => 11111 
            )

        [3] => Array
            (
                [ProviderCode] => 1G
                [VendorCode] => ii
                [VendorLocationID] => 99999 
            )

        [4] => Array
            (
                [ProviderCode] => 1G
                [VendorCode] => xx
                [VendorLocationID] => 23456 
            )

    )

[HotelSearchModifiers] => Array
    (
        [NumberOfAdults] => 2
        [NumberOfRooms] => 1
    )

[CorporateDiscountID] => Array
    (
        [NegotiatedRateCode] => true
    )

[HotelStay] => Array
    (
        [CheckinDate] => 2012-11-06
        [CheckoutDate] => 2012-11-14
    )

) 
```

任何人都可以帮我解决我哪里出错了。注意：如果有更多信息请询问。

亲切的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:29:55.960

只需更改参数数组结构，因为“vendorLocation”参数是“HotelLocation”的一部分。所以我将供应商位置数组作为酒店位置数组的一部分移动。

// 参数数组

```
Array
(
[BillingPointOfSaleInfo] => Array
    (
        [OriginApplication] => UAPI
    )

[HotelLocation] => Array
    (
        [VendorLocation] => Array
            (
                [ProviderCode] => 1G
                [VendorCode] => WV
                [VendorLocationID] => 95625
            )

        [Location] => LON
        [LocationType] => City
    )

[HotelSearchModifiers] => Array
    (
        [NumberOfAdults] => 2
        [NumberOfRooms] => 1
    )

[CorporateDiscountID] => Array
    (
        [NegotiatedRateCode] => true
    )

[HotelStay] => Array
    (
        [CheckinDate] => 2012-10-27
        [CheckoutDate] => 2012-10-30
    )

) 
```

# java - 创建带有阿拉伯字符的 zip 文件

> ID：12598424
> 
> 赞同：1
> 
> 时间：2012-09-26T09:18:50.017
> 
> 标签：java, file, encoding, zip, apache-poi

我有以下情况，我必须修改现有文件并返回包含此修改文件的 zip，我在 Web 应用程序上下文中，我现在所做的是：

```
///////////////// modifying the existing file with poi librairy 
    FileInputStream inpoi = new   FileInputStream("file_path");
                POIFSFileSystem fs = new POIFSFileSystem(inpoi);
                HWPFDocument doc = new HWPFDocument(fs);
                Range r = doc.getRange();
                r.replaceText("<nomPrenom>","test"); 
               byte[] b =   doc.getDataStream();

//////////////////////// create the zip file and copy the modified files into it 
ZipOutputStream out = new ZipOutputStream(new FileOutputStream("my.zip"));
out.putNextEntry(new ZipEntry("file"));
for (int j = 0; j < b.length; j++) {
                out.write(b[j]);
              } 
```

鉴于原始文件是用阿拉伯语编写的，因此无法用 word 正确读取创建的压缩文件

我试过这个：

```
 try {
                 FileInputStream inpoi = new FileInputStream("C:\\Users\\free\\Desktop\\myworkspace\\gestionRH\\WebRoot\\fiches\\blame.doc");
                    POIFSFileSystem fs = new POIFSFileSystem(inpoi);
                    HWPFDocument doc = new HWPFDocument(fs);
                    Range r = doc.getRange();
                    r.replaceText("<nomPrenom>","test"); 
                  byte[] stream=   doc.getDataStream();
                  String encoding = "utf-16";
                  ZipOutputStream out = new ZipOutputStream(new FileOutputStream("yyy.zip"));
                   ZipEntry zipEntry = new ZipEntry("file.doc");
                   OutputStreamWriter writer = new OutputStreamWriter(out,"utf-8");
                    out.putNextEntry(zipEntry);
                    for (int j = 0; j < stream.length; j++) {
                        writer.write(stream[j]);  
                  }
                  writer.close();
                } catch (IOException e) {
                  System.out.println(e.toString());
                } 
```

它不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:01:30.357

java zip 实现中有一个老错误。它应该在 v7 中修复。[http://bugs.sun.com/view_bug.do?bug_id=4244499](http://bugs.sun.com/view_bug.do?bug_id=4244499)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:36:08.150

您可能还想使用 apache commons-io FileUtils 为 Java 文件操作提供了很多方便的方法 - 读取和写入文件等...

read 和 write 方法也有一个编码参数。

[http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html)

ZipFile 允许您设置正确的编码。

ZipFile(String name, String encoding) 打开给定文件进行读取，假设文件名的指定编码，扫描 unicode 额外字段。

# oracle - 在 OracleDB 中存储 ISBN 会导致精度错误？

> ID：12598427
> 
> 赞同：0
> 
> 时间：2012-09-26T09:19:14.983
> 
> 标签：oracle, types, oracle11g, precision

**为什么会出现精度错误？**

```
INSERT INTO ISBN_LIST (ISBN) VALUES (9780261102354); 
```

给定表格：

```
CREATE TABLE ISBN_LIST ( 
    ISBN NUMBER (20,20)  NOT NULL -- NUMBER(13) also didn't work
);
ALTER TABLE ISBN_LIST
    ADD CONSTRAINT PK_ISBN_LIST PRIMARY KEY ( ISBN ); 
```

[如果你认出 ISBN 就可以加分！]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:28:23.637

您收到 number(20, 20) 精度错误的原因是因为您正在创建一个精度为 20 且比例为 20 的数字，这意味着数字：

在 0.00000000000000000000 和 0.99999999999999999999 之间。

根据这个[sqlfiddle](http://sqlfiddle.com/#!4/fe803/1)，`number(13)`可以工作（也许您需要指定`number(13, 0)`以确保正确的比例，尽管我同意@xavier a`varchar2(13 char)`可能是更好的数据类型选择。

# iphone - 什么是应用程序加载器中的托管内容包？

> ID：12598429
> 
> 赞同：9
> 
> 时间：2012-09-26T09:19:29.883
> 
> 标签：iphone, objective-c, ios, in-app-purchase, app-store-connect

我想为我的应用程序启用应用内购买。购买类型**为非消耗品**，我将主机内容标记为 Apple。当我想通过 Apple 托管内容时，我需要提供**Hosted Content Package**。我找不到更多信息应该包含在这个内容包中。除了它不应该大于 2GB 并且扩展名应该是 .pkg 之外。

***我如何为它创建内容包？里面应该有什么？***

**如何在 Xcode 中创建应用内购买内容包（带有 .pkg 文件扩展名）？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T14:20:01.560

要创建应用内购买内容包：**File -> New -> Project... -> Other (iOS) -> In-App Purchase Content**。将创建新项目。

将数据放入该项目并选择：**Product -> Archive**。存档完成后，选择**分发**...。

你完成了。

非常详细的解释写在这里：[In-App Purchase example](http://docs.xamarin.com/ios/tutorials/Introduction_to_iOS_6/Changes_to_StoreKit)

# oracle10g - symfony 1.4 如何连接Oracle 10g

> ID：12598433
> 
> 赞同：0
> 
> 时间：2012-09-26T09:19:43.867
> 
> 标签：oracle10g, symfony-1.4

在这个项目中，我必须使用 symfony 连接到 Oracle 数据库。但我不知道如何做到这一点。

环境：

*   灯，
*   symfony 1.4,
*   甲骨文 10g

Oracle 安装在服务器中。首先我需要安装oracle客户端吗？那么如何配置 symfony 或 PHP 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:50:18.707

The best way: Install the Zend Server/Community, because the server have the oci8 and pdo_oci extension compiled.

I recommend! ;)

# ruby-on-rails - Update_all 或 update_attribute 不更新列

> ID：12598435
> 
> 赞同：1
> 
> 时间：2012-09-26T09:19:53.867
> 
> 标签：ruby-on-rails, update-attributes

我有一个用户可以通过电子邮件发送的状态报告，我想在交付操作完成后将列 :sent_mail 更新为 true。

```
def send_status
  date = Date.today
  reports = current_user.reports.for_date(date)
  ReportMailer.status_email(current_user, reports, date).deliver
  reports.update_all(sent_mail: true)
end 
```

和表类

```
AddSentMailToReports < ActiveRecord::Migration
  def change
    add_column :reports, :sent_mail, :boolean, default: false
  end
end 
```

但是，在控制台中，sent_mail 仍然设置为 false。任何想法为什么这不起作用？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T09:47:27.800

这是因为 update_all 将更新直接发送到数据库 - 它不会更新您在内存中的报告模型。如果您在运行当前版本后检查数据库，您会看到记录已更新。

您需要在每个报告上调用“重新加载”以从数据库中获取更新版本或

```
reports.map(&:reload) 
```

一口气完成所有这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:41:38.253

如果 update_all 或 update_attribute 不起作用，您可以使用它

```
reports.update_attributes(:sent_mail => true) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-26T09:36:51.903

参考和[`update_all`](http://api.rubyonrails.org/v2.3.8/classes/ActiveRecord/Base.html#M001798)_[`update_attributes`](http://api.rubyonrails.org/v2.3.8/classes/ActiveRecord/Base.html#M001862)[`update_attribute`](http://api.rubyonrails.org/v2.3.8/classes/ActiveRecord/Base.html#M001861)

改变

```
reports.update_all(sent_mail: true) 
```

至

```
reports.update_attribute('sent_mail', true) 
```

update_attribute 和 update_attributes 有区别[`update_attribute vs update_attributes`](https://stackoverflow.com/questions/2778522/rails-update-attribute-vs-update-attributes/2778671#2778671)

# html - 我可以使用 HTML 查看 url 的内容吗？

> ID：12598441
> 
> 赞同：0
> 
> 时间：2012-09-26T09:20:04.277
> 
> 标签：html

我有一个网址，可以查看它的内容吗？就像`<img>`标签一样，只需将源放在上面，它就会显示图像。我的就像把一个链接的内容放在一个`<div>`中，这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T09:22:06.333

您使用 a[`<iframe>`](http://www.w3.org/TR/html4/present/frames.html#h-16.5)而不是 a `<div>`：

```
<iframe src="http://www.example.com" width="500" height="400">
    Text for very old browsers that don't support iframes.
</iframe> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T09:22:22.537

你可以使用这个 [Jquery 加载](http://api.jquery.com/load/)

```
$('#div').load('url_to_page.php'); 
```

或者

```
$.get('url_to_page.php', function(data) {
  $('#div').html(data);
}); 
```

如果您想查看源代码，您应该`text()`使用`html()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:24:34.083

在 JavaScript 中：

```
var element = document.getElementById ( 'id-of-your-element' )
element.innerHTML = 'your HTML source' 
```

# java - Jtextarea 出不来

> ID：12598449
> 
> 赞同：0
> 
> 时间：2012-09-26T09:20:35.987
> 
> 标签：java, swing, jtextarea

我有一点问题，我的程序的功能是显示我在 JList 区域上单击的选定项目，然后单击 OK 按钮后，将从 JtextArea 中出现一张收据，其中包含总额、税金和项目，我' 一直在尝试，但带有总计、税款和项目 (JTextArea) 的收据不会出来。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T09:31:43.847

> JList 区域，点击 OK 按钮后，JtextArea 会出一张带有总额、税款和项目的收据，我一直在尝试，但没有总额、税款和项目的收据（JTextArea）出去。

1.  此表格中的问题无法回答，请发布[SSCCE](http://sscce.org/)

2.  也许[JTextArea](http://docs.oracle.com/javase/tutorial/uiswing/components/textfield.html)不是适合显示的 JComponent `a receipt will come out from the JtextArea with the total, tax and items`，最好使用另一个[JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)（或[JList](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)）进行显示`total, tax and items`

3.  是否只有少数字段用于计算或显示`total, tax and items`使用[JFormattedTextFiedls](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)以`Number Formatter`避免任何将字符串解析为数字或反之亦然

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T09:55:20.860

检查 JList 的以下示例代码：

```
 public class PhilosophersJList extends JFrame {

 private DefaultListModel philosophers;
 private JList list;

 public PhilosophersJList()
     {
     super( "Favorite Philosophers" );

     // create a DefaultListModel to store philosophers
     philosophers = new DefaultListModel();
     philosophers.addElement( "Socrates" );
     philosophers.addElement( "Plato" );
     philosophers.addElement( "Aristotle" );
     philosophers.addElement( "St. Thomas Aquinas" );
     philosophers.addElement( "Soren Kierkegaard" );
     philosophers.addElement( "Immanuel Kant" );
     philosophers.addElement( "Friedrich Nietzsche" );
     philosophers.addElement( "Hannah Arendt" );

     // create a JList for philosophers DefaultListModel
     list = new JList( philosophers );

     // allow user to select only one philosopher at a time
     list.setSelectionMode(
     ListSelectionModel.SINGLE_SELECTION );

     // create JButton for adding philosophers
     JButton addButton = new JButton( "Add Philosopher" );
     addButton.addActionListener(
         new ActionListener() {

         public void actionPerformed( ActionEvent event )
             {
             // prompt user for new philosopher's name
             String name = JOptionPane.showInputDialog(
             PhilosophersJList.this, "Enter Name" );

             // add new philosopher to model
             philosophers.addElement( name );
         }
     }
     );

     // create JButton for removing selected philosopher
     JButton removeButton =
     new JButton( "Show Details" );

     removeButton.addActionListener(
         new ActionListener() {

         public void actionPerformed( ActionEvent event )
             {
              String details = JOptionPane.showInputDialog(PhilosophersJList.this, "Tax :", list.getSelectedValue());
        philosophers.addElement(details);

         }
     }
     );

     // lay out GUI components
     JPanel inputPanel = new JPanel();
     inputPanel.add( addButton );
     inputPanel.add( removeButton );

     Container container = getContentPane();
     container.add( list, BorderLayout.CENTER );
     container.add( inputPanel, BorderLayout.NORTH );

     setDefaultCloseOperation( EXIT_ON_CLOSE );
     setSize( 400, 300 );
     setVisible( true );

 } // end PhilosophersJList constructor

 // execute application
 public static void main( String args[] )
     {
     new PhilosophersJList();
 }
} 
```

# objective-c - 两个 TableView 之间的 numberOfRowsInSection 函数的错误

> ID：12598458
> 
> 赞同：0
> 
> 时间：2012-09-26T09:21:40.623
> 
> 标签：objective-c, ios, uitableview

我正在制作一个包含两个表视图的视图，其中一个是 self.tableView，另一个是 searchDisplayController.searchResultsTableView 以显示搜索结果。代码如下：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if (tableView == self.searchDisplayController.searchResultsTableView) {
        return [searchResultArray count];
    } else if (tableView == self.tableView){
        return [menuItems count];
    } } 
```

问题是我知道返回的 [menuItems count] 值为 10，如果 [searchResultArray count] 的返回值大于 10，我将收到以下错误消息：

```
2012-09-26 17:11:50.332 searchResultArray count：80
2012-09-26 17:11:50.337 *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayI objectAtIndex:]: index 10 beyond bounds [0 .. 9]' 
```

但是如果 [searchResultArray count] 的返回值小于 10，则可以正常工作。如何解决这个问题？请指教！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:28:07.327

如果您使用的是界面生成器，请检查 TableViewController

您的视图控制器下应该有一个“表格视图”。

在表格视图的属性检查器中检查“内容”，如果它分配了“动态原型”或“静态单元格”？

将其更改为“动态原型”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:28:11.383

问题出在您的搜索方法中，每次运行搜索逻辑并将对象添加到 searchArray 时，您需要在开始添加之前从中清除对象。您可以使用

```
[searchResultArray removeAllObjects]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:58:00.067

正如 iMeMyself 所说，您应该将动态原型分配给两个 tableview。因为当调用数据源方法时，它将动态检查表格视图。所以分配给它动态原型。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-26T09:45:24.900

确保两个表视图都设置为“动态原型”

# java - 在 Seam 中更改标签默认属性的值

> ID：12598466
> 
> 赞同：3
> 
> 时间：2012-09-26T09:21:58.093
> 
> 标签：java, jsf, seam

我正在使用 Seam 标签`<s:decorate>`，它有一个`enclose`属性。默认情况下，它设置为`true`（您可以在`HtmlDecorate`课堂上看到它）。

在我的应用程序中，不应包含所有标签，因此应将属性设置为`false`每个标签。但是在每个标签上都指定它并不是很漂亮的解决方案。

我想将默认设置更改为`enclose = true`一`false`处。是否有可能通过注射或其他方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T00:55:56.167

我发现的唯一方法是`decorate`用你的覆盖 Seam 的组件。虽然听起来很复杂，但实现起来相对简单，而且比必须`enclose="false"`在每个`<s:decorate/>`. 该解决方案依赖于这样一个事实，即位于项目中的组件定义`faces-config.xml`优先于`faces-config.xml`位于库 jar 内的文件中的定义。

创建扩展的自定义组件类`HtmlDecorate`：

```
public class MyDecorate extends HtmlDecorate {

    // Default value is false, as opposed to HtmlDecorate
    private boolean _myenclose = false;

    // Default constructor
    public MyDecorate() {
        super();
    }

    // Override setEnclose() and isEnclose() so that they use your variable
    public boolean isEnclose() {
       return _myenclose;
    }
    public void setEnclose(boolean enclose) {
       this._myenclose = enclose;
    }
} 
```

将您的类声明为装饰组件的类，在您的`faces-config.xml`（请注意，我们在`<component-class />`标签中指定您的自定义组件类，同时使用通常的 Seam 渲染器）：

```
<component>
    <description>"Decorate" a JSF input field when validation fails or when required="true" is set.</description>
    <component-type>org.jboss.seam.ui.Decorate</component-type>
    <component-class>com.example.myapp.MyComponent</component-class>
    <component-extension>
        <component-family>org.jboss.seam.ui.Decorate</component-family>
        <renderer-type>org.jboss.seam.ui.DecorateRenderer</renderer-type>
    </component-extension>
</component> 
```

`<s:decorate/>`在您的页面中照常使用标签：

```
<s:decorate template="...">
    ....
</s:decorate> 
```

# c# - 如何创建 2 个版本的 Odata / EF Web 服务？

> ID：12598469
> 
> 赞同：0
> 
> 时间：2012-09-26T09:22:00.857
> 
> 标签：c#, entity-framework, wcf-data-services, odata

我有一个使用 EF 提供程序的 Odata 服务。我工作得很好并且很容易创建。但现在它需要改变。这个问题与这个问题[类似](https://stackoverflow.com/questions/7116804/how-can-i-setup-odata-and-ef-with-out-coupling-to-my-database-structure)。但我不清楚答案。

我需要能够同时提供两个（或更多）版本的服务，因为不可能一次更新所有客户端。我想先继续使用 EF 代码（因为到目前为止它很容易），但这不是必需的。我只有很少的服务，所以如果这会给我所需的灵活性，我不介意重写。

使用 c# 实现 Odata 服务的最佳（最简单和可维护的）方法是什么，该服务可以从同一个数据库同时支持同一服务的多个版本。

我尝试使用反射提供程序来转换 EF dbcontext。我想要这样的东西：

```
db -> EF db context -> reflection DB context.v1 -> DataService.v1 
```

和

```
db -> EF db context -> reflection DB context.v2 -> DataService.v2 
```

如果只有 EF 选择允许，我几乎让它工作（至少用于读取）`ToList()`

我确实需要支持 write as wel（对于某些服务）

有 2 个 EF db 上下文针对同一个数据库将是一个可接受的解决方案，但我不知道我是否以及如何实现这一点。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:32:15.450

我找到了解决我的问题的方法，我想分享它。有关我的解决方案的详细描述，请查看[此博客文章](http://blog4rdbr.wordpress.com/2012/10/04/how-to-create-2-versions-of-an-ef-odata-service/)。

我的解决方案基于三个项目：

*   一个网站项目，包含映射到我的数据库的“the”ef dbcontexts，向我的站点提供数据并帮助迁移数据库。在这个项目中，我的每个服务版本都有 dataservice.svc 类。
*   一个 serviceV1 类库项目，其中包含另一个 EF dbcontext，它在当前 db 和此服务版本的 dto 之间进行映射。映射（调整）直接在数据上下文中使用 fluent API 完成
*   包含另一个 EF dbcontext 的 serviceV2 类库项目，该项目在当前 db 和此服务版本的 dto 之间映射。

使用以下语句将服务项目中的数据上下文设置为不迁移数据库并忽略架构差异：

```
Database.SetInitializer<ServiceV1.MyDbContext>(null); 
```

希望这对任何人都有帮助！

# css - 使用在 webkit 但不是壁虎的 css3 转换进行无限滚动

> ID：12598471
> 
> 赞同：0
> 
> 时间：2012-09-26T09:22:11.130
> 
> 标签：css

我正在使用这个 CSS3 创建一个简单的水平新闻代码：

```
transition: right 13s linear 0ms 
```

这在 webkit 中效果很好，但是在 Firefox 中它适用于 13 秒然后停止。

为什么 webkit 会继续无限滚动，而 gecko 不会？

编辑：这是一个独立的例子

[http://alexcrooks.me/others/newstest/](http://alexcrooks.me/others/newstest/)

**编辑：现在已修复，请参阅下面的答案。感谢任何确实看过的人。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:23:53.177

您不需要该`0ms`值，因为它是延迟，默认情况下已经为 0。

`13s`是持续时间，所以它显然会在 13 秒后停止。它不应该永远重复！要了解它为什么在 webkit 上运行，我需要更多详细信息（完整代码、浏览器和您正在测试它的版本）。

你需要一个[动画](http://www.w3schools.com/css3/css3_animations.asp)。这是一个小例子：

```
@-webkit-keyframes scroller { /* webkit */
    0% {
        left: 0;
    }
    100% {
        left:-100%; /* adjust it to your needs */
    }
}
@-moz-keyframes scroller { /* gecko */
    0% {left: 0;}
    100% {left:-100%;}
}
@-ms-keyframes scroller { /* IE10 */
    0% {left: 0;}
    100% {left:-100%;}
}
@keyframes scroller { /* W3C and future browsers */
    0% {left: 0;}
    100% {left:-100%;}
}

.yourElementClass {
    -webkit-animation-name: scroller;
    -webkit-animation-duration: 13s;
    -webkit-animation-timing-function: linear;
    -webkit-animation-iteration-count: infinite; /* set loop */
    -webkit-animation-direction: alternate; /* read below */
    -moz-animation-name: scroller;
    -moz-animation-duration: 13s;
    -moz-animation-timing-function: linear;
    -moz-animation-iteration-count: infinite;   
    -moz-animation-direction: alternate;       
    -ms-animation-name: scroller;
    -ms-animation-duration: 13s;
    -ms-animation-timing-function: linear;
    -ms-animation-iteration-count: infinite;    
    -ms-animation-direction: alternate;
    animation-name: scroller;
    animation-duration: 13s;
    animation-timing-function: linear;
    animation-iteration-count: infinite;    
    animation-direction: alternate;
} 
```

为了清楚起见，我单独声明了每个属性，但您也可以使用简写语法`animation:scroller 13s linear infinite alternate;`（显然带有供应商前缀）。

现在，关于`animation-direction`. 如果设置为`alternate`，动画结束后会*向后*运行，从而产生很好的平滑效果。

如果它不是您想要的，请不要设置它 ( `animation:scroller 13s linear infinite;`)，它将采用其默认值：`normal`. 13 秒后，它将从头开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:45:49.113

好的，我解决了这个问题。我所做的更改是：

```
setTimeout(function() {
    eltape.css({"webkitTransitionDuration":dur+'s', "mozTransitionDuration":dur+'s', "oTransitionDuration":dur+'s', "transitionDuration":dur+'s'});
    eltape.css({right:0+'px'});
}, 1); 
```

（将超时 ms 更改为 1 而不是 0）

```
widths['seg'+$(this).attr('seg')] += $(this).outerWidth(true);
widths.total += $(this).outerWidth(true); 
```

（将 TRUE 添加到 outerWidth 以便它查看边距和填充）

现在一切都很好！

[http://alexcrooks.me/others/newstest/](http://alexcrooks.me/others/newstest/)

# visual-studio-lightswitch - LightSwitch - 可折叠的行列布局或类似容器

> ID：12598473
> 
> 赞同：0
> 
> 时间：2012-09-26T09:22:13.540
> 
> 标签：visual-studio-lightswitch

我正在开发一个 LightSwitch 应用程序，该应用程序有一个屏幕，其中包含许多按行和列布局分组的控件。我想在其中一些容器中实现折叠/展开按钮，并使它们默认折叠。是否有优雅且相对简单的方法可以在这些容器或其他类型的容器中实现这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T02:21:20.543

在屏幕的*Created*方法中，您需要对要隐藏的每个控件使用 FindControl(NAME_OF_YOUR_CONTROL).IsVisible。不要试图将此代码放在屏幕的*InitializeDataWorkspace*方法中，因为还不能保证控件已经创建。

该控件可以是*TextBox*等，也可以是*RowsLayout*等。只需确保更改要操作的任何控件的默认名称，然后在隐藏它的代码中使用该名称。

我在 LightSwitch 论坛中解释了更多：[如何以编程方式隐藏和显示字段](http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/549e7016-e3ea-4081-acc3-f375ee8cda23/)

# xaml - 在 Windows 应用商店应用程序中使用 CollectionViewSource 时未显示项目图像

> ID：12598480
> 
> 赞同：0
> 
> 时间：2012-09-26T09:22:33.660
> 
> 标签：xaml, windows-8, windows-runtime

我在 Visual Studio 中基于 Grid App XAML 模板创建了一个 Windows 应用商店应用。它将 a 绑定`GridView`到包含组的集合，其中每个组包含项目，其中每个项目包含一些元数据和图像。A`CollectionViewSource`用于在网格视图中显示组内的项目。这一切都很好。然后我添加了一个用于添加新项目的按钮，当单击该项目时，会显示其元数据但**不**显示图像。单击事件处理程序：

```
private void Button_Click_1(object sender, RoutedEventArgs e)
{
    SampleDataGroup sampleDataGroup = SampleDataSource.GetGroup("Group-1");
    var sampleDataItem = new SampleDataItem("uniq", "Title", "Subtitle", "c:/users/christian/pictures/my_image.jpg", "Description", "Content", sampleDataGroup);
    sampleDataGroup.Items.Add(sampleDataItem);
} 
```

但是，如果图像是从项目的 Assets 文件夹中读取的，而不是从 Pictures 文件夹中读取的，则它会按预期工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T10:28:18.903

您无法直接访问 Win8 应用程序中的文件系统，因此您的图像路径 (c:/users/christian/pictures/my_image.jpg) 将无法在 XAML 中加载图像。

您最好的选择是使用 ImageSource 对您的类进行编码，并在您的图像文件名更改时将其加载到 C# 中。

[有关示例，请参见此处](https://stackoverflow.com/questions/12235026/metro-windows-8-c-xaml-how-to-find-valid-uris-to-pictures-stored-in-the-docu)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:12:01.273

正如 ZombieSheep (LOL) 所提到的，您无法像那样访问文件系统。将图像添加到（例如）项目中的 Assets 文件夹并像这样引用它：（图像称为 boot.jpg，View 中的元素称为 MyImage）。使用 collectionviewsource 时也是一样的，只需设置正确的路径（ms-appx:/// 或使用 this.UriBase，或定义一个包含 uri 基本字符串的静态只读属性）。

希望这可以帮助 ：）

```
 public sealed partial class MainPage : Page
{
    public MainPage()
    {
        this.InitializeComponent();
        SetImage();
    }

    private static readonly Uri _baseUri = new Uri("ms-appx:///");

    void SetImage()
    {
        MyImage.UriSource = new Uri(this.BaseUri, "Assets/boot.jpg");
        //MyImage.Source = new BitmapImage(new Uri("ms-appx:///Assets/boot.jpg"));
        //MyImage.Source = new BitmapImage(new Uri(_baseUri,"/Assets/boot.jpg"));
    }
} 
```

您必须设置一个新的 BitmapImage 或在视图中定义 BitmapImage 并设置 Uri :)

# javascript - HTML DOM 事件

> ID：12598481
> 
> 赞同：0
> 
> 时间：2012-09-26T09:22:35.490
> 
> 标签：javascript, html, performance, dom, dom-events

我有一个如下的浏览器树。每个节点都是一个具有单独 id 的 div 元素。当鼠标悬停在节点上时，我想更改样式。并在用户左键单击或右键单击节点时执行某些操作。 ![在此处输入图像描述](../Images/636adaabac568646823d5ab759f20839.png)

问题 1：一些文档说 :hover 选择器存在性能问题。所以我改为监听 mouseover 和 mouseout 事件。推荐这种方式吗？

为了实现我的要求，我想监听每个节点的 mouseover、mouseout、click 和 contextmenu 事件。我有两个解决方案。第一个是将事件处理程序绑定到每个节点。第二个是仅将事件处理程序绑定到根节点。当事件冒泡到根节点时，将调用处理程序。

问题2：两种解决方案哪个性能更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:49:44.837

CSS 在悬停方面通常会优于 JavaScript，它更原生，并且更容易维护（性能不仅限于客户端技术，维护代码的人的性能如何？）。

有时需要在 JavaScript 中模拟悬停效果以支持旧版浏览器，具体取决于所使用的 HTML（如果您`:hover`在链接上使用它总是可以的）。

事件冒泡将比多个事件处理程序实例执行得更好。 [http://icant.co.uk/sandbox/eventdelegation/](http://icant.co.uk/sandbox/eventdelegation/)

您永远不应该使用悬停来展开/折叠新内容，但是，这是无法访问的，展开/折叠应该始终由链接元素上的点击事件触发（顺便说一下，这听起来不像您）。

# forms - Symfony2 - 如何从角色、表组、FOSUserBundle 在树枝中创建列表复选框

> ID：12598490
> 
> 赞同：2
> 
> 时间：2012-09-26T09:23:05.103
> 
> 标签：forms, symfony, checkbox

我想在 table 中创建一个带有角色的复选框列表`Group`，一个复选框是一个角色。我有代码覆盖`GroupFormType.php`

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    parent::buildForm($builder, $options);
    $builder->add('roles', 'choice', array(
            'choices'   => ???,//i don't know how to get roles in database
        'empty_value' => false,
        'multiple' => true,
        'expanded' => true,
        'required'  => false,
    ));
} 
```

如果我这样做 `'choices' => array(1 => 'one', 2 => 'two')`，它的工作原理！数据库中带有注释的字段角色 (DC2Type:array)

然后，我`AddRolesFieldSubscriber`使用以下代码创建：

```
public static function getSubscribedEvents()
{
    // Tells the dispatcher that we want to listen on the form.pre_set_data
    // event and that the preSetData method should be called.
    return array(FormEvents::PRE_SET_DATA => 'preSetData');
}

public function preSetData(DataEvent $event)
{
    $data = $event->getData();
    $form = $event->getForm();

    // During form creation setData() is called with null as an argument
    // by the FormBuilder constructor. We're only concerned with when
    // setData is called with an actual Entity object in it (whether new,
    // or fetched with Doctrine). This if statement let's us skip right
    // over the null condition.
    if (null === $data) {
        return;
    }

        $form->add($this->factory->createNamed('roles', 'choice', array(
                'choices'   => $data->getRoles(),
                'empty_value' => false,
                'multiple' => true,
                'expanded' => true,
                'required'  => false,
        )));
} 
```

并改变`GroupFormType.php`：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    parent::buildForm($builder, $options);

    $subscriber = new AddRolesFieldSubscriber($builder->getFormFactory());
    $builder->addEventSubscriber($subscriber);
} 
```

但我有一个例外：

> 注意：数组到字符串的转换在 xxx\vendor\symfony\symfony\src\Symfony\Component\Form\Extension\Core\ChoiceList\ChoiceList.php 行 457 500 内部服务器错误 - ErrorException

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:18:30.180

问题来自您的`createNamed()`电话。这里的第三个选项*不是*选项数组，而是字段的初始值。

# php - 这种 PHP 对象设计方法是好是坏？- 寻找批评

> ID：12598491
> 
> 赞同：3
> 
> 时间：2012-09-26T09:23:10.913
> 
> 标签：php, oop, design-patterns

我对以 OOP 方式使用 PHP 比较陌生。在我最新的项目中，我将创建一个站点，该站点将从 SQL 数据库中加载大量条目，然后将这些条目发送到视图以进行输出。

在摆弄如何以最佳方式执行此操作时，我创建了如下所列的代码：

```
class entryHandler {

//Store database connection
protected $database;

//List of all entries as multidimensional array fetched from SQL.
private $entriesSQL = array();

//List of all entries (as objects) will be stored in our $entries array
private $entriesObjects = array();

/*
 * 
 * Upon construct
 * 
 */
public function __construct($database) {

    //Check if database class has been passed correctly.
    //Else we exit, since we can not function without it!
    if (isset($database)) {

        $this -> database = $database;

        //Get events
        if ($entriesSQL = $this -> getEventsFromSQL()) {
            // Set SQL entries
            $this -> setEntriesSQL($entriesSQL);

            //And turn them into an array of objects
            $this -> setEntryObjects();
        }
        else {

        }
    }
    else {
        echo 'No database connection has been established. Exiting execution.';
        exit();
    }
}

/*
 * Setter for entriesSQL
 */
private function setEntriesSQL($entriesSQL) {
    $this -> entriesSQL = $entriesSQL;
}

/*
 * Getter for entriesSQL
 */
public function getEntriesSQL() {
    return $this -> entriesSQL;
}

/*
 * Setter for entry objects
 * 
 */
private function setEntryObjects() {
    foreach ($this -> getEntriesSQL() as $key => $val) {
        //entryID, entryUserID, entryTitle, entryTimeStart, entryTimeEnd
        array_push($this -> entriesObjects, new entry($val['entryID'], $val['entryUserID'], $val['entryTitle'], $val['entryTimeStart'], $val['entryTimeEnd']));
    }
}

/*
 * 
 * Getter for entry objects
 * 
 */
public function getEntryObjects() {
    return $this -> entriesObjects;
}

/*
 * 
 * This function grabs events from SQL and return multidimensional-array of content.
 * 
 */
private function getEventsFromSQL() {
    //Define the SQL query
    $SQL = '...snippet...';

    if ($entriesSQL = $this -> database -> read($SQL)) {
        //Entries collected, return them.
        return $entriesSQL;
    }
    else {
        //Error occured. Log it and return false.
        return false;
    }
}

}

class entry {

var $entryID;
var $entryUserID;
var $entryTitle;
var $entryTimeStart;
var $entryTimeEnd;

public function __construct($entryID, $entryUserID, $entryTitle, $entryTimeStart, $entryTimeEnd) {
    $this -> setEntryID($entryID);
    $this -> setEntryUserID($entryUserID);
    $this -> setEntryTitle($entryTitle);
    $this -> setEntryTimeStart($entryTimeStart);
    $this -> setEntryTimeEnd($entryTimeEnd);
}

/*
 * Setter for entryID
 */
private function setEntryID($entryID) {
    $this -> entryID = $entryID;
}

/*
 * Getter for entryID
 */
public function getEntryID() {
    return $this -> entryID;
}

/*
 * Setter for entryUserID
 */
private function setEntryUserID($entryUserID) {
    $this -> entryUserID = $entryUserID;
}

/*
 * Getter for entryUserID
 */
public function getEntryUserID() {
    return $this -> entryUserID;
}

/*
 * Setter for entryTitle
 */
private function setEntryTitle($entryTitle) {
    $this -> entryTitle = $entryTitle;
}

/*
 * Getter for entryTitle
 */
public function getEntryTitle() {
    return $this -> entryTitle;
}

/*
 * Setter for entryTimeStart
 */
private function setEntryTimeStart($entryTimeStart) {
    $this -> entryTimeStart = $entryTimeStart;
}

/*
 * Getter for entryTimeStart
 */
public function getEntryTimeStart() {
    return $this -> entryTimeStart;
}

/*
 * Setter for entryTimeEnd
 */
private function setEntryTimeEnd($entryTimeEnd) {
    $this -> entryTimeEnd = $entryTimeEnd;
}

/*
 * Getter for entryTimeEnd
 */
public function getEntryTimeEnd() {
    return $this -> entryTimeEnd;
}
} 
```

现在，“entryHandler”类从我的控制器（在另一个 PHP 文件中）加载，如下所示：

```
 //Instantiate calenderHandler and pass our database handler to it.
    $entryHandler = new entryHandler($database);

    //Load template
    $template -> calendarEntries = $this -> renderEntries($entryHandler -> getEntryObjects());

/*
 * 
 * This functions renders entries content for view.
 * Returns string with content.
 * 
 */
private function renderEntries($entries) {

    $entriesContent = '';

    foreach ($entries as $entry) {

        $entriesContent .= '{
                                title: "' . $entry -> getEntryTitle() . '",
                                start: "' . $entry -> getEntryTimeStart() . '",
                                end:   "' . $entry -> getEntryTimeEnd() . '"
                            }, ';
    }

    //Right trim entries string, so that we do not add trailing comma to last entry in list.
    $entriesContent = rtrim($entriesContent, ', ');

    //And return content to parse it to view.
    return $entriesContent;
}
 } 
```

这是一个糟糕的设计模式吗？有什么我应该以另一种方式做的吗？这段代码中是否存在某种冗余？- 我应该注意什么？

感谢大家的时间。

问候，菲舍尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:38:02.610

看起来你正在做的是扔数据。这可能不一定是错误的，但你可以做其他事情。与其将所有 SQL 条目存储在一个数组中，不如：

*   从数据库中获取数据。
*   创建一个包含此数据的对象。（对象关系映射）

因此，您不是扔掉实际数据，而是扔掉包含数据的对象。
这是一个好主意，因为它可以很容易地更改数据的行为方式，或者添加提取数据的方式，或者您可能需要的任何内容。

另外，您正在做的事情不一定归类为 OOP。你只是在一个类中包含了很多函数。

创建类来做你需要的事情，并尽量减少类。每次你做一些你所在的类不是创建来做的事情时，创建一个新类来处理你需要的东西。

**面向对象示例**

学习如何进行 OOP 的一个好方法是观察其他人是如何做到的。我建议您查找其他项目，看看他们是如何做的。

[Symfony2](https://github.com/symfony/symfony) - 一个使用 OOP 的复杂 php 框架。
[Slim](http://www.slimframework.com/)
[CodeIgniter](http://codeigniter.com/)
[LavarelPHP](http://laravel.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:46:42.370

我非常同意花王的回答。无论如何，如果你真的想自己做这件事而不是使用任何 DBAL，我建议你阅读一些[关于 ORMs](http://docs.doctrine-project.org/en/latest/reference/architecture.html)的文档。

在您的代码中，允许构造一次处理许多事情是一个坏主意。清洁并分开它们。使用依赖注入而不是在类/方法中创建对象。

# .net - 从 Windows 窗体应用程序中解密 asp.net 会员密码

> ID：12598492
> 
> 赞同：0
> 
> 时间：2012-09-26T09:23:11.417
> 
> 标签：.net, security, asp.net-membership

我有一个不寻常的设置。我在一台机器上有一个具有标准成员资格和加密密码的 Web 应用程序。在另一台机器上，我有一个 Windows 应用程序，我必须使用与 Web 应用程序中提供的相同的用户凭据。我需要能够从数据库中检索加密密码，然后在 Windows 应用程序上对其进行解密，以便能够使用它登录。（Windows 应用程序将通过 WCF 服务向网站询问与特定用户名匹配的加密密码）。

我找到的所有文章都告诉我从会员提供程序派生，但我的 Windows 应用程序中没有会员提供程序。并且导入它不是一种选择。

有什么办法可以从我可用的信息（知道机器密钥等）中解密密码吗？全部在我的窗口窗体应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:52:45.227

你说：

> Windows 应用程序将通过 WCF 服务向网站询问与特定用户名匹配的加密密码。

为什么不让 WCF 服务返回明文密码？显然，您的 WCF 服务需要使用适当的安全性（例如 HTTPS、net.tcp）。

为了安全起见，您可能需要适当地对调用者进行身份验证/授权，以确保您不会向任何人提供纯文本密码。但这样做可能比让客户端访问使他能够解密*任何*密码的加密密钥更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:35:11.670

解密的方法，但我没用过。

[MembershipProvider.DecryptPassword](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.decryptpassword.aspx)

我同意乔+1。宁愿传递密码而不是密钥。

# algorithm - 降低或提高大 O 复杂度？

> ID：12598495
> 
> 赞同：0
> 
> 时间：2012-09-26T09:23:16.970
> 
> 标签：algorithm, complexity-theory

***说“我可以将***复杂性从 O(n^2) 降低到 O(n)”的措辞是正确的，但减少算法分析意味着您可以将一个问题转换为存在已知解决方案的另一个问题。因此，我认为说“我可以将复杂度从 O(n^2) 提高到 O(n)”更***正确***。正确的？

如果我将复杂性从例如 O(n^2) 提高到 O(n) 与此分开，这是否是正确的说法？我通过“一个复杂度”提高了复杂性？还是“一个或几个复杂程度”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:29:03.480

在回答第一段中的问题时，*减少*或*改进*都是可以接受的。如果你坚持*减少*必然意味着重铸问题的想法，那么坚持*改进*。就我个人而言，我不认为*reduce*一定意味着重铸一个问题，但我在这些问题上经常是错误的。

至于您第二段中的问题，我认为“*复杂性一级”*这个短语没有明确定义，因此您应该避免使用它。

# html - 当我有一个固定宽度的html时缩小差距

> ID：12598499
> 
> 赞同：0
> 
> 时间：2012-09-26T09:23:31.400
> 
> 标签：html, css

我有这个代码：

```
<div id="navigation" class="blueColor">
      <ul id="TopMenu">
            <li><a  href="../src/projects.aspx">Projects<span class="subDetails blueColor">ARCHITECTURAL PROJECTS SUCH AS BUILDINGS, MASTER PLANS ETC.</span></a></li>  
            <li><a  href="../src/media.aspx">Media<span class="subDetails blueColor">DRAWINGS, PHOTOS, FILMS, NEWSPAPER CLIPPINGS ETC. THAT EXPLAIN THE \"PROJECTS\" AND CAPTURE THEIR LARGER CULTURAL BACKGROUND</span></a></li>              
      </ul>
</div> 
```

这个css风格：

```
 #logo #navigation
    {
        float:left;
        width: 255px;
        font:35px Arial;
    }

    #logo #navigation li span.subDetails{
      float:left;
      font:10px Arial;
      text-transform:uppercase;
      padding-top:4px;
      width:140px;
      opacity: 0.2;
    }

    ul#TopMenu{
     position:absolute;
     margin-top:6px
    }
    #logo #navigation ul:first-child{
      margin-left:55px;
    }
    #logo #navigation li{
      margin-left:0px;
      width:167px;
      float:left;
    } 
```

如果您将鼠标移到 Foo 和 Bar 这 2 个单词上，则会出现 1px 的小间隙。我想缩小这个差距，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:27:31.743

添加：

`line-height: 110%;`

到跨度 CSS：

```
span { 
    width:100px;
    background:blue;
    font-size:30px;
    color:white; 
    text-align:center;
    line-height: 110%;
}
li{
    width:20px;

} 
```

[http://jsfiddle.net/RWPNE/](http://jsfiddle.net/RWPNE/)

编辑：我们发现真正的 HTML 与原始问题不同，因此解决方案是`margin-top: -1px;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:46:13.123

我不确定你想要什么。但是，如果您不介意填充，您可以在跨度中添加一个 padding-top，它会占用空间：

```
span { 
     width:100px;
     background:blue;
     font-size:30px;
     color:white; 
     text-align:center;
     padding-top:1px;
}

li{
    width:20px;
} 
```

# jquery - jquery i18n 属性，即在 eval 行上失败

> ID：12598504
> 
> 赞同：2
> 
> 时间：2012-09-26T09:23:38.310
> 
> 标签：jquery, internet-explorer, internationalization

嗨，我已经使用 jquery 和 jquery i18n 插件开发了一个网站，因此我可以重新使用我的旧属性文件进行国际化，在 FF、Opera、Chrome 中一切正常，但是当我尝试 IE8 时，我的页面没有按我想要的方式加载它在 i18n 插件内的 eval 函数上失败。

有没有人以前遇到过这个问题并且知道如何在 IE 上解决，如果有任何帮助将不胜感激，这发生在 327 位置 4 上

。欢呼 J。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T18:40:55.367

i18n 代码中的 eval 函数基本上是创建全局变量。这是由于使用 vars 或两者都用作`mode`加载属性文件造成的。尝试设置这些时 IE8 将失败。`map`修复方法是在加载[属性文件](http://code.google.com/p/jquery-i18n-properties/)时使用该模式。这样，这些属性将只能通过`$.i18n.prop`调用获得。

使用地图模式的示例：

```
jQuery.i18n.properties({
    name:'Messages', 
    path:'bundle/', 
    mode:'map',
    language:'pt_PT', 
    callback: function() {
    }
}); 
```

# symfony1 - propel:diff 任务为所有字段/表生成不必要的 SQL 语句

> ID：12598505
> 
> 赞同：2
> 
> 时间：2012-09-26T09:23:38.900
> 
> 标签：symfony1, symfony-1.4, propel

我将 Symfony 1.4 和 Propel 1.6 与 MySQL 5.1 一起使用。

每次我对`schema.xml`（例如在一个表中添加一个字段）进行一些小的更改时，我都会执行：

```
php symfony propel:build-all --classes-only --env=dev
php symfony propel:diff --env=dev
php symfony propel:up --env=dev 
```

在第二步中，任务总是为字段字段类型的所有表中的所有字段生成 SQL 语句，`alter table change`或者`删除`integer not null`/创建完全没有变化的约束：`

 ````
ALTER TABLE `pedido_linea` CHANGE `id` `id` INTEGER(11) NOT NULL AUTO_INCREMENT;
ALTER TABLE `product` CHANGE `norma_id` `norma_id` INTEGER(11);
...
ALTER TABLE `pedido_linea` DROP FOREIGN KEY `pedido_linea_FK_2`;
ALTER TABLE `pedido_linea` ADD CONSTRAINT `pedido_linea_FK_2`
    FOREIGN KEY (`product_id`)
    REFERENCES `product` (`id`)
    ON UPDATE RESTRICT
    ON DELETE RESTRICT; 
```

似乎 Propel 没有正确读取 MySQL 的字段属性并将它们视为已更改。这很烦人，因为我必须扫描所有生成的脚本以检查它是否是我想要的。有解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T17:38:36.173

Mysql 不为外键提供 RESTRICT 约束，因为这与 NO ACTION 相同或没有定义约束（参见[http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-约束.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html) )

删除 ON UPDATE 和 ON DELETE 行，你应该很好`

# ruby-on-rails - 来自单独表格的 Rails 下拉框

> ID：12598508
> 
> 赞同：1
> 
> 时间：2012-09-26T09:23:52.890
> 
> 标签：ruby-on-rails, drop-down-menu

我目前将此作为我的下拉列表：

```
<%= f.select :supplier, options_for_select(@supplier) %> 
```

在我的控制器中，我有：

```
@software = Software.new
@supplier = Supplier.all 
```

该表格适用于新软件，下拉列表应从与任何其他表完全无关的供应商表中拉出供应商。然后我希望软件表单中的供应商字段填写供应商表中的条目之一。目前我的代码只是想出了类似的东西：

```
#<Supplier:0x000052e5c89> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:27:27.530

尝试：

```
<%= f.collection_select :supplier, @supplier,:id,:name %> 
```

# ios - 将 iVar 添加到核心数据实体

> ID：12598509
> 
> 赞同：0
> 
> 时间：2012-09-26T09:23:56.010
> 
> 标签：ios, core-data

我正在利用核心数据实体将数据加载到表格视图中。

我需要将一些信息（不是从 NSManagedObject 子类化但从 NSObject 子类化的自定义类的实例）添加到实体中，以便在运行时逻辑绑定它们。我不需要离线缓存数据。

我不会对数据模型进行任何更改。

这是正确的做法吗？

# java - 在 for 循环中执行 SwingWorker

> ID：12598512
> 
> 赞同：0
> 
> 时间：2012-09-26T09:24:14.710
> 
> 标签：java, swing, swingworker

我想从扫描仪获取图像并将它们放置在一个 HashMap 中，其名称按名为 ScanningService 的 SwingWorker 类执行的特定顺序排列。在使用同一设备完成第一个图像后，我想使用 for 循环获取另一个图像。 `scan.getImage()`完成后返回扫描的图像。该`sc`参数是一个扫描仪对象。也许有人可以为我提供 Executor 或 Timer 的实现，因为我的试验没有取得任何成果。

```
 for(int k=0; k<10; k++){
        lblMessage.setText("Scan Next Image: ");
        scan = new ScanningService(sc);
        scan.execute();
        scan.addPropertyChangeListener(new PropertyChangeListener() {
            @Override
            public void propertyChange(PropertyChangeEvent arg0) {
                // TODO Auto-generated method stub
                if(StateValue.DONE == scan.getState()){

                    lblImagePreview.setIcon(new ImageIcon(scan.getImage()));
                    //logic for name in order of sequence
                    imageList.put<imagename, scan.getImage());
                }
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:46:31.953

*   [SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/simple.html)被指定只运行一次，然后在你必须调用一个新实例之后

*   [SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/simple.html)不适合加载图像，也不适用于某些时期

*   看看`Runnable#Thread`，到 Swing GUI 的输出必须是包装器`invokeLater()`

*   Swing GUI 的所有更改都必须在`EventDispatchThrea`d 上完成，您可以查看[Swing 中的 Concurency](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

# .net - 是否有 .Net 相当于常春藤？

> ID：12598514
> 
> 赞同：4
> 
> 时间：2012-09-26T09:24:22.223
> 
> 标签：.net, ivy, dependency-management

我们在办公室使用 Ivy 进行依赖管理。公平地说，它解决了我们对任何项目列表的依赖关系列表，并且做得很好。它还将已发布的依赖项发布回我们共享的 Ivy 存储库，以便将来包含在其他项目中。

但是......它依赖于 Java，我们认为这是一个小缺点，如果我们能够根除，那就太棒了。

那么，是否有 .Net 等同于 Ivy？我在 CodeHaus 上找到[了这个网站，看起来很有希望，但内容为零。](http://xircles.codehaus.org/projects/ivy-net)

我们知道 NuGet 可以创建私有存储库，但由于我们内部拥有大量代码，转换/迁移到使用 NuGet 以与我们相同的方式解决/发布我们的依赖项将是一项艰巨的工作与常春藤。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T17:20:54.467

依赖管理作为一个概念，在 .NET 中是非常新的，新兴的解决方案似乎是 NuGet。

我建议安装支持本地[托管 NuGet 存储库的](http://www.sonatype.com/books/nexus-book/reference/nuget.html)[Nexus](http://www.sonatype.org/nexus/)。使用 Nexus 来管理 ivy 存储库的内容也是值得考虑的（ivy 具有对 Maven 存储库的内置支持）。

# 更新

Ivy 有一个命令行客户端，可以从您的 msbuild 脚本中调用：

*   [如何将 ivy 与 MSbuild 集成](https://stackoverflow.com/questions/6540840/how-do-you-integrate-ivy-with-msbuild/6556344#6556344)

不完全是 .Net 解决方案，而是完全切换到 NuGet 的可行替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:30:50.167

有一个年轻的开源项目声称可以替代 Maven for .Net。这是链接：[http ://byldan.codeplex.com/](http://byldan.codeplex.com/)

不过不知道稳不稳。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T04:10:10.140

我们是一家 .NET 商店，我们使用的是 ivy。当我们开始时，我们尝试通过 java 调用使用 ivy，但切换到调用 ant 以便我们可以直接使用内置的 ivy 任务。我们这样做是因为常春藤任务给了我们更多的选择。

我们的构建脚本是用 nant 编写的。Nant 然后调用 ant 并传递几个属性，以便它可以执行所需的 ivy 任务。我确信同样的事情也可以用 MSBuild 来完成。

```
<exec program="C:\ant\1.8.2\bin\ant.bat" commandline="-buildfile ${build.dir}\${ivy.tasks.build.file} -verbose -Divy.properties.file=${ivy.properties} retrieve" verbose="true"></exec> 
```

不得不从 nant 调用 ant 感觉有点古怪，但它运作良好。另外，ivy 包含在它自己的构建文件中，完全按照它的意图去做（依赖管理），没有别的。

# android - 缺少 GraphFactory

> ID：12598518
> 
> 赞同：2
> 
> 时间：2012-09-26T09:24:36.640
> 
> 标签：android, eclipse, achartengine, android-library

我正在尝试启动并运行“图表引擎”。我的问题是我没有 GraphFactory 类，在将 achartengine-1.0.0.jar 包含到 eclipse 之后（我正在制作一个 android 4.1 应用程序）。我一直试图在论坛上四处寻找关于如何获得 GraphFactory 的信息大约一个小时，但是当我搜索它时，它只是让位于许多点击。

我的问题是如何将 GraphFactory 添加到我的 eclipse 中（在哪里可以下载包含它的 jar 文件）？

我知道这个问题之前可能已经被屏蔽了，很抱歉我的搜索能力不够好，无法在论坛上找到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:30:10.640

我正在尝试同样的事情。

我假设您使用此处的示例[https://sites.google.com/site/androidhowto/how-to-1/create-graphs](https://sites.google.com/site/androidhowto/how-to-1/create-graphs)

我的猜测是你必须自己开课，但如果有人能告诉我们，那就太好了。

编辑：我在这里找到了一个很好的例子。[http://xebee.xebia.in/2010/08/31/exploring-android-charting-and-graphs-solutions/](http://xebee.xebia.in/2010/08/31/exploring-android-charting-and-graphs-solutions/)转到 AChartEngine 示例。

我希望这会有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:47:04.460

AChartEngine 不包含任何名为`GraphFactory`. 但是，有一个类称为`ChartFactory`.

另外，例如用于向您展示如何使用 AChartEngine 的代码，我建议您查看[这些](http://www.achartengine.org/content/goodies.html)说明。

# sql - ACCESS SQL：即使没有与另一个表连接的数据，如何检索表的所有数据

> ID：12598526
> 
> 赞同：-1
> 
> 时间：2012-09-26T09:25:01.807
> 
> 标签：sql, ms-access

我有一个工作 SQL 语句，用于计算工作日的工资和计数，这里的 SO 成员之一好心地帮我解决了这个问题。然而，问题是结果出来的只有在那个时期工作过的劳动力。我真正想要的是结果必须显示所有劳动（在 tbl_labor 中），无论他是否在那段时间工作。

```
select
  lab.lb_name,
  max(days),
  sum(prod.pdtn_qty * pdWk.pd_cost / 12) as Total 
from
  tbl_labor as lab,
  tbl_production as prod,
  tbl_pdWk_process as pdwk,

(select pdn2.lb_id, count(pdn2.lb_id) as days from
  (select  lb_id
  from tbl_production  pdn1
  where pdn1.pdtn_date >= #9/5/2012#
  and   pdn1.pdtn_date <= #2012-09-20#
  group by lb_id, pdtn_date ) as pdn2
     group by pdn2.lb_id) as pdn3

where prod.pdtn_date >= #9/5/2012#
and   prod.pdtn_date <= #2012-09-20#
and prod.lb_id = lab.lb_id
and   prod.pd_making_id = pdwk.pd_making_id
and lab.lb_id = pdn3.lb_id
group by lab.lb_name 
```

以下是我的相关表格：

```
tbl_labor
 lb_id | lb_name  | lb_OT ($/day) | If_social_sec
   1   |  John    |    10         |    yes
   2   |  Mary    |    10         |    no
   3   |  Jane    |    10         |    no

tbl_production 
pdtn_date  | lb_id  | pdtn_qty(pcs) | pd_making_id 
 5/9/12    |   1    |     200       |    12
 5/9/12    |   1    |     40        |    13
 5/9/12    |   2    |     300       |    12
 7/9/12    |   1    |     48        |    13
 13/9/12   |   2    |     220       |    14
 15/9/12   |   1    |     20        |    12
 20/9/12   |   1    |     33        |    14
 21/9/12   |   2    |     55        |    14
 21/9/12   |   1    |     20        |    12

tbl_pdWk_process 
pd_making_id | pd_cost($/dozen) | pd_id 
    12       |     2            |   001
    13       |     5            |   001
    14       |     6            |   002 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T09:40:18.563

替换旧式连接

```
from
  tbl_labor as lab,
  tbl_production as prod,
...
where 
  lab.fld1 = prod.fld1 
```

使用较新的 LEFT JOIN

```
from
  tbl_labor as lab
  LEFT JOIN tbl_production as prod ON lab.fld1 = prod.fld1
... 
```

编辑：
在您的原始代码中

```
from
  tbl_labor as lab,
  tbl_production as prod
...
where ...
prod.lb_id = lab.lb_id
... 
```

在 tbl_production 和 tbl_labor 表之间创建一个内部连接。它需要用更新的样式 LEFT JOIN 替换

```
from
  tbl_labor as lab
  LEFT JOIN tbl_production as prod ON lab.lb_id = prod.lb_id
... 
```

[您可以在http://www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp)上阅读有关 SQL JOIN 的信息

# php - php 和 session_start，预期错误，但是

> ID：12598528
> 
> 赞同：-2
> 
> 时间：2012-09-26T09:25:06.237
> 
> 标签：php, session, header

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我有 php 版本 5.4.4

我有这个代码

```
echo "a";
session_start();
$_SESSION['login'] = "Jhon";
echo $_SESSION['login']; 
```

这有效，为什么？错误在哪里：“标头已发送....” ???

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T09:29:50.470

简而言之，输出缓冲已打开，这将确保您的脚本能够像这样工作。但**不**建议依赖它，因为默认情况下其他服务器可能没有输出缓冲。如果您希望将其关闭（我会），请将`output_buffering`指令更改为`0`php.ini 中的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:43:38.520

一旦输出发送到浏览器（甚至是空格），您就不能向
浏览器发送任何标头信息。当您启动一个新会话（使用 session_start）
时，一个会话 cookie 从服务器发送到浏览器，这个 cookie
基本上是封装的在响应头中。

您可以使用 php 函数 headers_sent() 检查是否已发送标头

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-26T09:56:42.133

尽管您的代码对我来说效果很好，但是您可以尝试在 echo 语句之前使用 session_start() 。

# tsql - 如何在一个结果集中包含不同的计数

> ID：12598529
> 
> 赞同：1
> 
> 时间：2012-09-26T09:25:13.143
> 
> 标签：tsql

是否可以有一个优化的单个查询语句来返回不同的行数？见下文：

```
create table #tbl (id int, name varchar(30))
go
INSERT INTO #tbl (id, name) values(1, 'test1')
INSERT INTO #tbl (id, name) values(2, 'test2')
INSERT INTO #tbl (id, name) values(1, 'test3')
INSERT INTO #tbl (id, name) values(1, 'test4')
INSERT INTO #tbl (id, name) values(3, 'test5')
INSERT INTO #tbl (id, name) values(1, 'test6')
INSERT INTO #tbl (id, name) values(1, 'test7')
INSERT INTO #tbl (id, name) values(2, 'test8')
INSERT INTO #tbl (id, name) values(1, 'test9') 
```

我想在下面返回一条记录：

```
id      name
---     ----
3       test1
3       test2
3       test3
3       test4
3       test5
3       test6
3       test7
3       test8
3       test9 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:37:28.353

以下查询将准确返回您问题中指定的结果集，尽管它不是很有效。

```
SELECT (SELECT COUNT(DISTINCT id) FROM #tbl), name FROM #tbl 
```

我建议，如果您要求只有一个结果集，请执行以下操作：

```
SELECT id, name FROM #tbl 
UNION 
SELECT COUNT(DISTINCT id), NULL FROM #tbl 
ORDER BY name 
```

然后在结果集中捕获具有 NULL 'name' 值的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:36:59.943

这是一个单一的查询，但对于示例数据，它确实执行了两次表扫描。更大/真实数据可能会有所不同，我不知道

```
SELECT 
    (SELECT COUNT(DISTINCT(id)) FROM #tbl) id, 
    name 
FROM 
    #tbl 
```

# ruby - 在 Ruby 中格式化一个 xml 字符串

> ID：12598530
> 
> 赞同：19
> 
> 时间：2012-09-26T09:25:17.937
> 
> 标签：ruby, xml, formatting

给定一个这样的 xml 字符串：

```
<some><nested><xml>value</xml></nested></some> 
```

什么是最好的选择（使用红宝石）来格式化它可读：

```
<some>
  <nested>
    <xml>value</xml>
  </nested>
</some> 
```

*我在这里找到了答案：[在 ruby​​ 中格式化 xml 字符串的最佳方法是什么？](https://stackoverflow.com/questions/2465911/whats-the-best-way-to-format-an-xml-string-in-ruby)，这真的很有帮助。但它格式化xml，如：*

```
<some>
  <nested>
    <xml>
      value
    </xml>
  </nested>
</some> 
```

*因为我的 xml 字符串的长度有点大。所以这种格式不可读。*

提前致谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-26T09:46:02.043

使用 nokogiri 怎么样？

```
require 'nokogiri'
source = '<some><nested><xml>value</xml></nested></some>'
doc = Nokogiri::XML source
puts doc.to_xml
# <?xml version=\"1.0\"?>\n<some>\n  <nested>\n    <xml>value</xml>\n  </nested>\n</some>\n 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-26T09:36:35.047

使用[REXML::Formatters::Pretty](http://ruby-doc.org/stdlib-1.9.3/libdoc/rexml/rdoc/REXML/Formatters/Pretty.html)格式化程序：

```
require "rexml/document" 
source = '<some><nested><xml>value</xml></nested></some>'

doc = REXML::Document.new(source)
formatter = REXML::Formatters::Pretty.new

# Compact uses as little whitespace as possible
formatter.compact = true
formatter.write(doc, $stdout) 
```

# asp.net - 将 Json 返回到 javascript

> ID：12598533
> 
> 赞同：0
> 
> 时间：2012-09-26T09:25:26.003
> 
> 标签：asp.net, json

我像这样对 ashx 处理程序进行 Json 调用：

```
 attributes = $("#pageHtmlTag").attr("class").trim();
urlToHandler = 'JSonTestHandler.ashx';
jsonData = '{' + attributes + '}';

$.ajax({
    url: urlToHandler,
    data: jsonData,
    dataType: 'json',
    type: 'POST',
    contentType: 'application/json',
    success: function (data) {
        setAutocompleteData(data.responseDateTime);
        $("body").add("<div>" + data.toString() + " </div>").appendTo(document.body);
        alert("grate suceees");
    },
    error: function (data, status, jqXHR) {
        alert('There was an error.' + jqXHR);
    }
}); // end $.ajax 
```

我收到并处理它。我还想发回一些要显示的 HTML，但我不知道如何将 html 发送回 Jscript。

灰烬：

```
 string jsonData = new StreamReader(context.Request.InputStream, System.Text.Encoding.UTF8).ReadToEnd();

.............................

        var testResultReportString = testResultReport.GetReportHtml();

        var serializer = new JavaScriptSerializer();
        var jSonTestResultReport = serializer.Serialize(testResultReportString);

        context.Response.Write(jSonTestResultReport); 
```

所以问题是。如何将数据返回到 Ajax 调用成功函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:40:04.903

您可以将数据作为 JSON 对象返回：

```
var outputObject = "{ html = '" + jSonTestResultReport  + "' + someOtherData = ... + "}";
context.Response.Write(outputObject); 
```

并像这样在成功函数中访问它们：

```
data.html and data.someOtherData 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:02:25.730

您无法返回 AJAX 调用返回的数据，因为您的数据在调用后无法立即使用，`$.ajax`因为它是异步的。您可以返回的是 AJAX 调用返回的数据的承诺。Promise 是函数的一个很好的抽象：我不能返回数据，因为我还没有数据，我不想阻塞并让你等待，所以这里是一个 Promise，你可以以后使用它，或者只是把它交给其他人并完成它（[回调、承诺和协程（哦，我的！）：JavaScript 中的异步编程模式](http://www.slideshare.net/domenicdenicola/callbacks-promises-and-coroutines-oh-my-the-evolution-of-asynchronicity-in-javascript)）。例如，而不是：

```
$.ajax({
     url: urlToHandler,
     data: jsonData,
     dataType: 'json',
     type: 'POST',
     contentType: 'application/json',
     success: function (data) {
         setAutocompleteData(data.responseDateTime);
         $("body").add("<div>" + data.toString() + " </div>").appendTo(document.body);
         alert("great success");
     },
     error: function (data, status, jqXHR) {
         alert('There was an error.' + jqXHR);
     }
 }); // end $.ajax 
```

您可以`$.ajax(...)`通过编写 Ajax 函数来返回调用的返回值，例如：

```
function testResultReportAjax() {
    return $.ajax({
        url: urlToHandler,
        data: jsonData,
        dataType: 'json',
        type: 'POST',
        contentType: 'application/json',
        error: function (data, status, jqXHR) {
            alert('There was an error.' + jqXHR);
        }
    });
} 
```

你通过以下方式得到你的承诺

```
var promise = testResultReportAjax(); 
```

然后您可以将其用作函数调用中的参数并使用 AJAX 调用返回的数据：

```
promise.success(function (data) {
   alert(data);
}); 
```

您可以[在这里查看一个简单的 DEMO](http://jsfiddle.net/rtjtm/)。如果需要，请参阅[此答案](https://stackoverflow.com/a/5150650/122005)以获得更好的解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:49:11.950

在我这样使用的应用程序中，它在下面我显示所有带有国家/地区ID的状态数据，并且该数据像这样绑定到状态下拉列表..

```
StateData objStateData = new StateData();
            LMGDAL.db_LMGEntities dbData = new db_LMGEntities();               
            var data = (from con in dbData.tblStates
                        where con.State_CountryID == ID
                        select new StateData
                        {
                            StateID = con.StateID,
                            StateName = con.StateName
                        }).ToList();
            return data.ToArray(); 
```

并在该 .ashx 文件中创建一个新类

```
[Serializable]
    public class StateData
    {
        public int StateID { get; set; }
        public string StateName { get; set; }
    } 
```

并以我的形式

```
$("#ddlCountry").change(function () {
            var countryID = $("#ddlCountry").val();
            $.ajax({
                type: "POST",
                url: "JsonData.asmx/GetStateByCountryID",
                contentType: "application/json; charset=utf-8",
                dataType: 'json',
                data: '{ID:"' + countryID + '"}',
                success: function (msg) {
                    var data = msg.d;
                    var stateData = "";
                    $.each(data, function (index, itemdata) {
                        stateData += "<option  value='" + itemdata.StateID + "' > " + itemdata.StateName + " </option>";
                    });
                    $("#ddlState").empty();
                    $("#ddlState").append("<option value='0'>-Select State-</option>");

                    $("#ddlState").append(stateData);
                },
                error: function () {
                    alert('Faild To Retrieve States.');
                }
            });
        }); 
```

我想这会对你有所帮助......

# c - 在函数内设置指针值

> ID：12598535
> 
> 赞同：1
> 
> 时间：2012-09-26T09:25:30.507
> 
> 标签：c, pointers, pass-by-reference

> **可能重复：**
> [void 指针作为参数](https://stackoverflow.com/questions/12448977/void-pointer-as-argument)

我正在尝试在 C 中创建一个简单的函数，但我得到一个空输出，我不知道为什么：

```
int encrypt(unsigned char *message, char *key,  unsigned char *buffered_message)
{
    /* ... */

    buffered_message = calloc(1, (blocks * block_size));

    /* ... */

    printf("Message: %s\n", buffered_message);

    return strlen(buffered_message);
} 
```

在函数内部，消息打印出来没有问题。但是当我尝试在 中使用我的函数时`main`，出现了问题。

```
int main()
{
    /* ... */

    unsigned char *encrypted;

    int len = encrypt(message, key, encrypted);

    if (len > 0)
    {
        printf("The encrypted message  %s\n", encrypted);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:05:09.383

您需要传递双指针，因为您正在分配内存并复制到函数本地的指针。

以下应该可以工作，虽然我还没有编译。

```
int encrypt(unsigned char *message, char *key,  unsigned char **buffered_message)
{
    /* ... */
    *buffered_message = calloc(1, (blocks * block_size));
    /* ... */
    printf("Message: %s\n", *buffered_message);
    return strlen(*buffered_message);
} 
```

从主要

```
unsigned char *encrypted;
int len = encrypt(message, key, &encrypted);
printf("The encrypted message  %s\n", encrypted); 
```

# actionscript-3 - Flash AS3 删除剪辑，重新排序其他项目

> ID：12598538
> 
> 赞同：1
> 
> 时间：2012-09-26T09:25:35.597
> 
> 标签：actionscript-3, flash

我有一个滚动窗格，我向其中添加了电影剪辑。我正在使用它作为在线用户列表。到目前为止它运行良好，但现在我遇到了问题。我可以使用 removechild 轻松删除我想要的影片剪辑，但是当我删除它时，删除的剪辑所在的位置只有一个空白区域。所以我需要知道如何以某种方式刷新滚动窗格并将剪辑移到删除的那个下方。我怎样才能做到这一点？

我已经尝试过无效、刷新窗格、更新等。也许我没有按正确的顺序或其他东西，但是这怎么能做到呢？

如果答案很复杂，可以提供一个例子吗？我对 as3 真的不够好，只是还没有编写一个完整的算法来获取孩子的数量，将它们全部删除，读取它们等。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:40:43.347

只是一个变体，但保存了-1，只需重新排列，例如：

```
lstOnline.removeChild(lstOnline.getChildByName("NAMEHERE"));

var numleft:Number = lstOnline.numChildren;
for(var i = 0; i < numleft - 1; i++) {
    lstOnline.getChildAt(i).y = i*60;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:10:23.563

我想我比我想象的要好一点。如果其他人面临这个问题，我找到的解决方案如下：

```
var numleft:Number = lstOnline.numChildren;
    lstOnline.removeChild(lstOnline.getChildByName("NAMEHERE"));
    for(var i = 0; i < numleft - 1; i++) {
        lstOnline.getChildAt(i).y = i*60;
    } 
```

lstOnline 是 ScrollPane 的名称，在我的例子中 60 是添加的影片剪辑的高度。

# mysql - 连接三个mysql表

> ID：12598542
> 
> 赞同：4
> 
> 时间：2012-09-26T09:25:52.780
> 
> 标签：mysql, join

如果我有三个表：

```
posts
------
postid  date_posted title   content

views
------
viewid  post_id user_id

users
------
userid  username 
```

1.  列出所有`posts`未查看的正确方法是`user_id`什么？这个查询正确吗？
    `SELECT * FROM posts LEFT JOIN views ON postid=post_id WHERE user_id=123 AND postid=NULL;`

2.  列出所有内容`posts`及其“查看状态”`user_id`怎么样？

3.  您还可以推荐一个很棒的（用户友好的、非极客的）资源来提高我对 LEFT JOIN、CROSS JOIN 和（正常连接？从帖子、视图中选择 *）的理解吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:31:57.513

1.

```
SELECT *
FROM posts
WHERE postid NOT IN (
    SELECT post_id 
    FROM views
    WHERE user_id = 123
) 
```

或者

```
SELECT *
FROM posts
LEFT JOIN views ON views.post_id = posts.postid AND views.user_id = 123
WHERE viewid IS NOT NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:34:44.807

```
1.select * from posts where post_id in(select post_id from views where user_id<>123)
or
select * from posts p join views v
on p.post_id=v.post_id
and v.user_id<>123

2.select p.*,CASE when isnull(v.viewid,0)=0 then 0 else 1 end as viewstatus
from posts p left join views v
on p.post_id=v.post_id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T09:38:37.117

在回答您的第三个问题时，请检查[来自 codinghorror.com 的 visual-explanation-of-sql-joins 的链接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。这将帮助您增强对联接的理解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T09:34:13.897

1，您还需要包含 users 表，但这大致是正确的查询是的

2、SELECT * FROM posts LEFT JOIN views ON postid=post_id 应该显示它将显示所有帖子

3、[http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T09:34:25.113

1）查看“scoota269”的回答

2) 查看您自己的 SQL 但删除`AND postid=NULL`

3) [http://www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp)

# java - Spring MVC 导航

> ID：12598545
> 
> 赞同：2
> 
> 时间：2012-09-26T09:25:54.847
> 
> 标签：java, spring, spring-mvc, navigation, navigationcontroller

我想用 Spring MVC 创建简单的导航，到目前为止我得到了这个：

```
@Controller
@RequestMapping("/secure")
public class NavigationController {

    @ModelAttribute("myPath/operation")
    public OperationForm getOperationForm() {
        return new OperationForm();
    }

    @RequestMapping("/myPath/operation")
    public String processOperationPage() {
        //Some logic goes here
        return "myPath/operation";
    }

    @ModelAttribute("myPath/configuration")
    public ConfigurationForm getConfigurationForm() {
        return new ConfigurationForm();
    }

    @RequestMapping("/myPath/configuration")
    public String processConfigurationPage(Map model) {
        return "myPath/configuration";
    }

} 
```

在我的 JSP 页面中：

```
<a href="${pageContext.servletContext.contextPath}/secure/myPath/configuration.htm" class="parent">Configuration</a>
<a href="${pageContext.servletContext.contextPath}/secure/myPath/operation.htm" class="parent">Operation</a> 
```

这种浏览页面的解决方案是否有效？你能给我一些其他的导航方法吗？我确定有，但我在互联网上找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:06:34.657

对于jsp，这有点整洁imho：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
...

<c:url var="config" value="/secure/myPath/configuration.htm"/>

<a href="${config}" class="parent">Configuration</a> 
```

# ios - iOS 中的 libxml2.dylib 和 libxml2.2.dylib 有什么区别

> ID：12598550
> 
> 赞同：4
> 
> 时间：2012-09-26T09:26:12.413
> 
> 标签：ios, xml

目前我正在使用 libxml2.dylib 解析 XML 现在我想转移到 libxml2.2.dylib。那么，我会在配置和编码方面做什么样的改变呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:39:39.327

Xcode 4.5（还有 iOS6 SDK，因为可用的库依赖于 SDK，而不是 Xcode 版本）仍然有 libxml2.2.dylib。

您通常不应该将您的应用程序与特定版本的库链接，但最好使用通用版本，如 libxml2.dylib 或 libxml2.2.dylib。

但为了在 ios6 libxml2.2.dylib 中获得更好的结果。使用。有时您会遇到链接错误或较低版本的一些异常错误

如果您想知道区别，请点击此链接-

[iOS6没有libxml2.2.7.3.dylib。有替代品吗？](https://stackoverflow.com/questions/12580950/ios6-does-not-have-libxml2-2-7-3-dylib-are-there-any-substitutes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:36:01.880

如果您遇到链接错误，那么您应该添加 /usr/include/libxml2 is in your Header Search Paths in your Debug/Release configuration

# c# - 动态对象可在一台 PC 上工作，但不能在另一台 PC 上工作

> ID：12598552
> 
> 赞同：2
> 
> 时间：2012-09-26T09:26:22.670
> 
> 标签：c#, .net, dynamic

我已经构建了一个使用 Dynamic 关键字的程序。

在我的代码中，我这样做：

```
public void OnNext(ExpandoObject value)
{
    dynamic expando = value;
    if (expando.Attention == NotifyEnums.ALERT)
    {
        _needsAttention = true;
    }
} 
```

这行得通，所以我将它提交给 SourceControl。然后我的老板得到文件，尝试运行它但在线出错`if (expando.Attention == NotifyEnums.ALERT)`，显然是expando.Attention在动态对象中不存在：

![在此处输入图像描述](../Images/98652803c9f14da0070d6f84e23fbe01.png)

这让我很困惑，因为我们都针对相同的 .NET 版本：`.NET Framework 4 Platform Update 1 KB2478063`而且我知道该值是在代码中设置的。

所以我在读取动态值之前设置了一个断点，并打开了即时窗口。

`expando.Attention // Gives an exception on boss computer, works on my computer`

但请看以下内容：

```
(((IDictionary<String, object>)expando).ContainsKey("Attention"))
true // Returns "True" on boss computer and on my computer, WTF! 
```

所以我尝试以下方法：

```
(NotifyEnums)(((IDictionary<String, Object>)expando)["Attention"])
ALERT // Returns alert on boss computer 
```

所以总结一下：

```
public void OnNext(ExpandoObject value)
{
    dynamic expando = value;
    if (expando.Attention == NotifyEnums.ALERT)
    // CRASHES on boss pc, works on my pc
    // Error says Attention does not exist.
    {
        _needsAttention = true;
    }
} 
```

和

```
public void OnNext(ExpandoObject value)
{
    dynamic expando = value;
    if ((NotifyEnums)(((IDictionary<String, Object>)expando)["Attention"]) == NotifyEnums.ALERT)
    // WORKS on BOSS PC (wtf?) and works on my pc.
    {
        _needsAttention = true;
    }
} 
```

那么这是怎么回事，谁能详细说明？

**编辑：**

但是还有另一件事，在程序崩溃之后，我单击继续，再次出现错误，再次单击继续，然后程序继续运行，就好像什么也没发生一样。它从动态对象中读取正确的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T12:51:50.440

看起来您在老板机器上打开了第一次机会异常。查看 Debug/Exceptions 并取消选中 Throw 列中的所有内容。当类不直接实现成员时，expando 对象抛出异常是正常的，它使用异常触发二次查找并返回正确的信息。

# c# - 根据某些字段获取两个列表之间的差异

> ID：12598558
> 
> 赞同：4
> 
> 时间：2012-09-26T09:26:39.597
> 
> 标签：c#, linq, join, left-join, list-comparison

我对 LINQ 还很陌生，我可能已经把自己画到了这里的一个角落。我有两个列表（左和右），我需要：

*a* ) 根据特定字段获取匹配项

*b* ) 获取左侧的项目，右侧没有匹配项

*c* ) 获取右侧的项目，左侧​​没有匹配项

如果某些字段相等，则找到匹配项。其他字段可能包含也可能不包含值，但不得影响匹配比较。

为了获得项目*a*我`JOIN`在两个列表上都执行了 a ：

```
var q = from a in r1
        from b in r2
        where a.Prop1 == b.Prop1 && a.Prop3 == b.Prop3
        select new { a.Prop1, a.Prop2, b.Prop3 }; 
```

我不确定从这里去哪里。我*想*我不能使用`.Except()`，因为两个列表的其他属性会有所不同，并且可能会导致比较中断。

我还尝试使用`Left Join`并获取不匹配的项目：

```
 var q =
     from c in r1
     join p in r2 on c.Prop1 equals p.Prop1
     into cp
     from p in cp.DefaultIfEmpty()
     select new { Prop1 = c.Prop1, Prop2 = p == null ? "N/A" : p.Prop2 }; 
```

但是我发现您不能比较多个要比较的字段。

`Left Join`LINQ上可以有多个字段吗？还有其他方法（除了 LINQ）来获得两个列表之间的差异吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T09:45:15.473

这使用`Intersect`和`Except`（类似于 Cuong Le 的解决方案）：

```
public class MyComparer : IEqualityComparer<YourClass>
{
    #region IEqualityComparer<YourClass> Members

    public bool Equals(YourClass x, YourClass y)
    {
        return
            x.Prop1.Equals(y.Prop1) && x.Prop3.Equals(y.Prop3);
    }

    public int GetHashCode(YourClass obj)
    {
        int hCode = obj.Prop1.GetHashCode() ^ obj.Prop3.GetHashCode();
        return hCode.GetHashCode();
    }

    #endregion
}

// matched elements from both lists
var r1 = l1.Intersect<YourClass>(l2, new MyComparer());
// elements from l1 not in l2
var r2 = l1.Except<YourClass>(l2, new MyComparer());
// elements from l2 not in l1
var r3 = l2.Except<YourClass>(l1, new MyComparer()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T09:41:53.560

默认情况下，`Except`方法使用[EqualityComparer.Default](http://msdn.microsoft.com/en-us/library/ms224763.aspx)，这就是为什么如果您有具有不同属性值的对象时不能使用

但是你可以使用另一个重载方法[除了](http://msdn.microsoft.com/en-us/library/bb336390.aspx)自定义 `EqualityComparer<T>`，假设它忽略`Pro3`

```
public class CustomComparer : EqualityComparer<A>
{
    public override int GetHashCode(A a)
    {
        int hCode = a.Pro1.GetHashCode() ^ a.Pro2.GetHashCode();
        return hCode.GetHashCode();
    }

    public override bool Equals(A a1, A a2)
    {
        return a1.Pro1.Equals(a2.Pro1) && a1.Pro2.Equals(a2.Pro2)
    }
} 
```

然后你可以使用`Except`：

```
listA.Except(listB, new CustomComparer()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:41:36.897

怎么样

一种）

```
r1.Where(x=>r2.Any(y=>x.Prop1==y.Prop1&&x.Prop3==y.Prop3))
    .Select(x=>new { x.Prop1,x.Prop2,x.Prop3}); 
```

b)

```
r1.Where(x=>!r2.Any(y=>x.Prop1==y.Prop1&&x.Prop3==y.Prop3))
    .Select(x=>new { x.Prop1,x.Prop2,x.Prop3}); 
```

C）

```
r2.Where(x=>!r1.Any(y=>x.Prop1==y.Prop1&&x.Prop3==y.Prop3))
    .Select(x=>new { x.Prop1,x.Prop2,x.Prop3}); 
```

# node.js - 使用 expressjs 处理异步瀑布中的错误

> ID：12598559
> 
> 赞同：4
> 
> 时间：2012-09-26T09:26:41.237
> 
> 标签：node.js, error-handling, express, waterfall, node-async

我不明白为什么 expressjs 在抛出 async.waterfall 时不处理错误

```
var express = require('express')
, app = express.createServer()
, async = require('async');

app.use(express.errorHandler({
    dumpExceptions: true,
    showStack: true
}));

app.get('/error', function(req, res){
    throw Error('Aie');
});

app.get('/asyncerror', function(req, res){
    var that = this;
    async.waterfall([
        function(next){
            console.log('1');
            next("42", "2");
        },
        function(arg, next) {
            console.log(arg);
            res.json('ok');
        }
        ], function(err){
            console.log(this);
            throw Error('Aie');
        });
});

app.listen(8888, function(){
    console.log('Listen on 0.0.0.0:8888');
}); 
```

当我 GET /error 时，expressjs 打印一个不错的错误而没有崩溃服务器但是当我 GET /asyncerror 这是一个经典的抛出，打印在 stdout 上并出现服务器崩溃..

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:19:05.463

It's because Express never has the opportunity to catch the exception that's thrown in the `/asyncerror` example as you're throwing it from within an `async` callback context and not an Express middleware context. In general, if you don't want an error condition in an async function to crash your node app, report the error via the callback instead of throwing it. In this case you can call the `next` parameter that your `app.get` callback is receiving but you're not using. Try this instead:

```
app.get('/asyncerror', function(req, res, next){
    var that = this;
    async.waterfall([
        function(next){
            console.log('1');
            next("42", "2");
        },
        function(arg, next) {
            console.log(arg);
            res.json('ok');
            next();
        }
        ], function(err){
            console.log(this);
            next(Error('Aie'));
        });
}); 
```

# android - Android：无法在默认图片文件夹中创建目录

> ID：12598567
> 
> 赞同：5
> 
> 时间：2012-09-26T09:26:56.047
> 
> 标签：android, mkdirs

这是我用来在默认图片文件夹中创建文件夹的代码：

```
File imagesFolder = new File(Environment.DIRECTORY_PICTURES, "/images");
if (!imagesFolder.exists()) {
Log.d("if imagesFolder exists - 1", "False");
imagesFolder.mkdirs();
} else {
Log.d("if imagesFolder exists - 1", "True");
}
if (!imagesFolder.exists()) {
Log.d("if imagesFolder exists - 2", "False");
imagesFolder.mkdirs();
} else {
Log.d("if imagesFolder exists - 2", "True");
} 
```

在日志中我得到：

```
False

False 
```

第一次该目录不存在，因此`False`但随后我立即使用创建它`mkdirs()`，因此我希望第二个日志是`True`但即使是这样，我的应用程序由于代码的后面部分而`False`崩溃`NullPointerException`

请帮忙

谢谢你

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T09:44:24.620

你用`Environment.DIRECTORY_PICTURES`错了方法。它只是一个`String`常数， `"Pictures"`但不是路径。您需要通过以下方式获取路径[`Environment.getExternalStoragePublicDirectory(string)`](http://developer.android.com/reference/android/os/Environment.html#getExternalStoragePublicDirectory%28java.lang.String%29)

```
File pictureFolder = Environment.getExternalStoragePublicDirectory(
            Environment.DIRECTORY_PICTURES
        );
File imagesFolder = new File(pictureFolder, "images");
// etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-12T05:03:04.830

首先要生成一个文件夹，你需要在**AndroidMinifest.xml添加权限**

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

现在调用以下方法创建一个新文件夹，您要在其中创建文件夹（此名称应存在于 Environment.list 中）和您的文件夹名称。

```
File outputDirectory = GetPhotoDirectory(Environment.DIRECTORY_PICTURES, "YourFolder"); 
```

通过这种方法生成你的文件夹

```
public static File GetDirectory(String inWhichFolder, String yourFolderName ) {
    File outputDirectory = null;

    String externalStorageState = Environment.getExternalStorageState();
    if (externalStorageState.equals(Environment.MEDIA_MOUNTED)) {

        File pictureDirectory = Environment.getExternalStoragePublicDirectory(inWhichFolder);

        outputDirectory = new File(pictureDirectory, yourFolderName);
        if (!outputDirectory.exists()) {
            if (!outputDirectory.mkdirs()) {
                Log.e(LogHelper.LogTag, "Failed to create directory: " + outputDirectory.getAbsolutePath());
                outputDirectory = null;
            }
        }
    }
    return outputDirectory;
} 
```

如果要在新创建的文件夹下创建文件，则可以使用以下代码

```
public static Uri GenerateTimeStampPhotoFileUri(File outputDirectory, String fileName){
    Uri photoFileUri = null;

    if(outputDirectory!=null) {
        File photoFile = new File(outputDirectory, fileName);
        photoFileUri = Uri.fromFile(photoFile);
    }
    return photoFileUri;
} 
```

使用文件目录创建文件夹后调用以创建文件。它将返回您的文件**Uri**

```
Uri fileUri = GenerateTimeStampPhotoFileUri(outputDirectory, fileName); 
```

# iphone - MKMap 在 iOS6 中工作不正确

> ID：12598569
> 
> 赞同：0
> 
> 时间：2012-09-26T09:27:00.377
> 
> 标签：iphone, objective-c, map, ios6

我有一个问题：我必须知道地图数据何时加载到地图视图中。我使用了以下方法。

```
- (void)mapViewDidFinishLoadingMap:(MKMapView *)mapView;
{
    //Some custom code if Map is loaded
} 
```

苹果更改了地图，现在调用了该方法，但地图仍在加载。

你有什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:47:57.527

我已经修好了。起初，我用我的自定义代码创建了一个函数

```
-(void)customCode(id)object
{
    MKMapView* mapView = (MKMapView *)object;
    ...
} 
```

在我设置的函数 mapViewDidFinishLoadingMap

```
- (void)mapViewDidFinishLoadingMap:(MKMapView *)mapView;
{

    CGFloat systemVersion = [[[ UIDevice currentDevice ] systemVersion ] floatValue ];

    if( systemVersion < 6 )
    {
        [self updateMap:mapView];
    }
    else
    {
        [self myMapViewDidFinishLoaded:mapView];
    }
} 
```

和

```
-(void)onMapTimed:(id)mapView
{
    [self performSelectorOnMainThread:@selector(customCode:) withObject:((NSTimer*)mapView).userInfo waitUntilDone:NO];
    _mapTimer = nil;
}

-(void)myMapViewDidFinishLoaded:(id)mapView;
{
    if(_mapTimer)
    {
        [_mapTimer invalidate];
        [_mapTimer release];
        _mapTimer = nil;
    }
    _mapTimer = [NSTimer scheduledTimerWithTimeInterval:0.3 target:self selector:@selector(onMapTimed:) userInfo:mapView repeats:NO];

} 
```

这个对我有用。

# c - #define NAME ((LPCSTR) 5) 是什么？

> ID：12598577
> 
> 赞同：1
> 
> 时间：2012-09-26T09:27:17.990
> 
> 标签：c, windows

这行代码是什么意思？

```
#define NAME ((LPCSTR) 5) 
```

如果我定义了一个变量，`NAME *tmp`，然后像这样使用它：

```
((LPCSTR) 5) *tmp; 
```

那个代码有什么作用？

注：`LPCSTR`是`typedef __nullterminated CONST CHAR *LPCSTR`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:45:48.280

这是一个简单的转换，它将 5 转换为字符指针 ( `__nullterminated CONST CHAR *`)

这可能是标准未定义的行为，但有时会在现实生活中使用。

*   要寻址您机器上的特定物理地址 - 例如，内核必须这样做才能配置卡、onbard 芯片等......
*   要在参数中发送特殊值或返回值。例如，调用通常需要第二个参数中的指针，但如果您传递“5”，则意味着其他内容。

如您所见，它实际上是一个指针，因此您尝试过的 ,`NAME *tmp;`不会编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T01:13:33.847

鉴于`LPCSTR`类型，我猜这是用于在 EXE 文件中加载资源：

```
#define MAKEINTRESOURCE(x) ((LPCTSTR)(x)) // in windows.h
#define IDR_FOO 1 // usually in IDE-generated resources.h

HRSRC res = FindResource(NULL,
                         MAKEINTRESOURCE(IDR_FOO),
                         MAKEINTRESOURCE(IDR_FOO)); 
```

这在 WinAPI 应用程序中很常见，但我从未见过有人自己执行转换而不是使用标准`MAKEINTRESOURCE`宏。

# asp.net-mvc - 使用 jquerymobile 在 MVC3 中显示对话框

> ID：12598579
> 
> 赞同：1
> 
> 时间：2012-09-26T09:27:22.540
> 
> 标签：asp.net-mvc, jquery-mobile, razor, dialog

如何使用 jquerymobile 在 MVC3 表单中显示对话框？谢谢！

我试过这段代码：

```
@Html.ActionLink("Info", "Info", "ViewWork", new { @data_rel = "dialog", @data_role = "button", @data_transition = "pop" }) 
```

# android - 通过 2G/GSM 网络上传后损坏的图像

> ID：12598580
> 
> 赞同：0
> 
> 时间：2012-09-26T09:27:26.043
> 
> 标签：android, ftp, gsm, apache-commons-net

我构建了一个可以拍照并将它们上传到服务器的应用程序，我正在使用 Apache commons FTP 库来上传它们。当我使用 wifi 时，图像上传没有任何问题……但是当我使用 2G 移动网络发送其中一半时，服务器将它们作为损坏的图像接收。

我将文件类型设置为二进制文件类型。

有没有办法确定图像是否损坏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:23:00.590

为了确定图像是否损坏，请将服务器接收到的图像与您的 Android 设备上的相应图像进行比较。

为了确定图像损坏的原因，您可以在服务器上运行 WireShark 或 tcpdump 并监听上传。仔细检查应该可以发现问题是否存在

*   在服务器软件中（您可以在网络跟踪中看到完整的图像），或者
*   在设备或网络中（您会在网络跟踪中看到损坏的图像）。

您还可以尝试使用图像大小（以字节为单位）并检查是否存在大小边界，您可以从中看到问题。这可能会提供进一步研究的线索

# java - oData4j 示例 Eclipse 项目

> ID：12598581
> 
> 赞同：6
> 
> 时间：2012-09-26T09:27:26.093
> 
> 标签：java, project, odata, producer

我从 odata.org 下载了 oData4J jar 文件，我打算在基本的 Web 服务中做一个示例生成器。

我假设来自[http://code.google.com/p/odata4j/](http://code.google.com/p/odata4j/)的 InMemoryProducerExample.java会完成这项工作，而且很可能是这样。

我的问题是我不知道要创建哪种类型的项目（Eclipse Java），如何部署和测试这个例子。

有没有人有这样一个逐步启动 odata 的地狱世界教程，或者一个使用 oData 中的 InMemoryProducerExample.java 的 Eclipse 项目。我真的需要一个起点，我可以在网上看到一个。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T04:04:36.980

运行 odata4j 示例的最简单方法是简单地签出他们的项目，然后在 eclipse 中打开它。

如果您没有安装 mercurial，请从[此处](http://mercurial.selenic.com/)安装。

使用这个 mercurial 命令签出最新的 odata4j 代码，

```
hg clone https://code.google.com/p/odata4j/ 
```

使用 maven eclipse 插件在 eclipse 中打开项目。如果您使用的是最新版本的 eclipse，这将已经安装，您不能从[这里](http://www.sonatype.org/m2eclipse)安装它。

在eclipse中，去import->maven->Existing maven projects

然后选择 mercurial 签出 odata4j 的目录。

当eclipse完成项目导入后，你可以找到InMemoryProducerExample，然后右键单击它以将其作为java程序运行。您可以以相同的方式运行任何其他示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-13T10:10:38.450

同时，继续存在的 odata4j 的分支也可以在 GitHub 上找到，请参阅[https://github.com/odata4j/odata4j](https://github.com/odata4j/odata4j)和我自己的[https://github.com/vorburger/odata4j/](https://github.com/vorburger/odata4j/)（我即将转移到[https://github.com/lukinf](https://github.com/lukinf)），其中包括一些用于在 Eclipse 中打开它的小修复。

# deployment - TransactionTimeout 注释似乎不会覆盖 JBoss 5.x 上的全局设置

> ID：12598583
> 
> 赞同：6
> 
> 时间：2012-09-26T09:27:28.083
> 
> 标签：deployment, jboss, transactions, ejb-3.0

我在 JBoss 5.1 上部署了一个基于 EJB 3.0 的应用程序。在 ${JBOSS_HOME}/server/default/deploy/transaction-jboss-beans.xml 的属性*transactionTimeout*上配置的事务超时的全局值对于我们的大多数 EJB 方法都很好。但是，我们有一些方法的持续时间预计会比那里设置的值长得多。我们想专门为这些方法覆盖超时。

我们已经尝试按照[此处的说明](https://community.jboss.org/wiki/TransactionTimeout)进行操作，即让全局值具有合理的值，然后尝试通过 jboss.xml 中的部署描述符或方法中的 jboss 特定注释来专门覆盖某些方法。

这些方法在无状态会话 bean 容器中进行管理。我什至强迫这些方法创建一个新事务，因为在某些地方据说只有在那个时刻创建事务时注释才有效。

```
../..
import org.jboss.ejb3.annotation.TransactionTimeout;
../..
    @Override
        @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
        @TransactionTimeout(900)
        public FileInfoObject setFileVariable(Desk desk, String variable, int maxBytes,
                String mimeAccepted, FileWithStream file)
                throws ParticipationFinishedException, PersistenceException {

../..
        } 
```

预期的行为是，对于此方法，超时应为 900。

实际行为非常好，如下所示：

*   如果全局超时 > 方法超时，则应用方法超时
*   如果全局超时 <= 方法超时，则应用全局超时

似乎应用的超时是两者中的最小值，如果我们想要延长覆盖全局值的特定方法的超时，这是一个真正的问题。

有任何想法吗？我错过了什么吗？

# php - iphone safari 在提交表单时无法下载错误

> ID：12598588
> 
> 赞同：0
> 
> 时间：2012-09-26T09:27:40.367
> 
> 标签：php, forms, ios5, download

我正在做一个项目。一切都很顺利。但是在 iphone 上，每当我需要将表单数据发送到脚本时，Safari 会显示下载错误并且不会转到脚本。

形式是这样的：

```
<form id="xxx" action="xx" method="post">
<input type="hidden" name="id" value="2" />
<input type="submit" />
</form> 
```

脚本是这样的：

```
<?php
if($_POST ['id'])
{
   addToCart ($_POST ['id']);
   redirect ('cart');
} 
```

表单或脚本中没有其他内容。但在 iPhone 4s safari show 表单提交时下载错误

有人遇到过这个吗？是 iPhone 错误还是我的脚本？或任何解决此问题的方法（因为我已经看到其他网站在 iPhone 上发送表单数据没有问题）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:35:10.830

已修复，实际上会话正在创建问题。由于自动断开连接，cookie 在 iOS 上通过 AT&T 网络创建了此问题。将会话放入数据库解决了这个问题。

# c# - 如何平滑路径图的WPF线段

> ID：12598589
> 
> 赞同：7
> 
> 时间：2012-09-26T09:27:40.300
> 
> 标签：c#, android, wpf

下面是安卓代码。

```
path.moveTo(xx, yy);
for (...) {
    path.lineTo(xx, yy);
}
canvas.drawPath(this.path, paint); 
```

![在此处输入图像描述](../Images/db04f097e1e7b599f98c80dde53de758.png)

为了去除**尖角**，我正在使用

```
final CornerPathEffect cornerPathEffect = new CornerPathEffect(50);
paint.setPathEffect(cornerPathEffect); 
```

![在此处输入图像描述](../Images/72d9a484e20acfccebec3366439c7e93.png)

当谈到**WPF**时，我正在使用以下代码。

```
PathFigure pathFigure = new PathFigure();
pathFigure.StartPoint = new Point(xx, yy);
for (...) {
    LineSegment lineSegment = new LineSegment(new Point(xx, yy), true);
    lineSegment.IsSmoothJoin = true;
    pathFigure.Segments.Add(lineSegment);
}
PathGeometry pathGeometry = new PathGeometry(new PathFigure[] { pathFigure });
drawingContext.DrawGeometry(null, new Pen(Brushes.White, 3), pathGeometry); 
```

我得到以下效果。

![在此处输入图像描述](../Images/e87d2a37a9ea45cbb258095bf700e7ee.png)

请注意，我避免使用`PolyQuadraticBezierSegment`or `PolyBezierSegment`。它往往变得**不稳定**。这意味着，每当我向折线图添加新的输入点时，新添加的点往往会改变已在屏幕上绘制的旧路径。作为最终效果，您可能会观察到整个折线图在**晃动**

我可以知道在 WPF 中，我怎样才能平滑线段？虽然我用过`lineSegment.IsSmoothJoin = true;`，但我仍然可以看到尖角。我可以拥有与 Android 的 CornerPathEffect 等效的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-05T23:30:42.037

我知道，僵尸线程帖子。你可能已经解决了这个问题，但这是我多年后的想法......

* * *

由于平滑取决于线中的多个点，我认为很难找到一种看起来合理的平滑算法，而不会在前沿产生一些不稳定性。您可能可以减少不稳定性的范围，但只有冒着产生非常奇怪的痕迹的风险。

第一种选择是使用限制投影伪影的样条算法。例如，Catmull-Rom 算法在被插值的曲线段的任一侧使用两个已知点。您可以在曲线的每一端合成两个额外的点，或者简单地将第一条曲线段绘制为直线。这将给出一条直线作为最后一段，加上一条曲线作为倒数第二段，当添加另一个点时，如果有变化的话，应该变化很小。

或者，您可以通过初始样条计算运行实际数据点以将这些点相乘，然后再次通过样条算法运行这些点。您仍然需要更新最近的`2m`点（`m`第一遍的乘数在哪里），否则输出看起来会失真。

关于我能想到的唯一其他选择是尝试根据您之前的数据预测几个点，即使输入相当规律也可能很困难。我用它来合成曲线末端的 Bezier 控制点——我正在计算所有点的 CP，并且需要一些东西用于端点——并且有一些有趣的时间试图阻止最终曲线段看起来严重变形.

哦，还有一个……不要画出最终的曲线段。如果您在 P [n-1]处终止曲线，则曲线应保持稳定。如果您必须展示它，请以不同的样式绘制最后一段。由于 CR 样条只需要来自插值的 +/- 2 个已知点，因此段 P [n-2] -P [n-1]应该足够稳定。

如果您没有 CR 算法的代码，您可以使用合成贝塞尔控制点进行基本相同的操作。与其试图描述这个过程，不如看看[这篇博客文章](http://blog.sklambert.com/finding-the-control-points-of-a-bezier-curve/)，它给出了一个相当好的过程分解。 [本文](http://www.codeproject.com/Articles/31859/Draw-a-Smooth-Curve-through-a-Set-of-D-Points-wit)附有可能有用的代码。

# objective-c - 带有端口验证 Objective-c 的 URL

> ID：12598592
> 
> 赞同：-5
> 
> 时间：2012-09-26T09:27:56.400
> 
> 标签：objective-c, xcode4.3

我想用端口验证 url，所以我需要正则表达式来验证它。目前我正在使用这个表达式。

```
NSString *urlRegEx =@"(?i)(?:(?:https?|http):\\/\\/)?(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:\\/[^\\s]*)?"; 
```

但有时它没有验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:31:05.563

这是我的做法：

让我们看一个网址：

> [https://some.long.domain.with.subdomains.com:12345/otherpath?queryparam=queryvalue](https://some.long.domain.with.subdomains.com:12345/otherpath?queryparam=queryvalue)

让我们用这个字符串初始化 NSURL：

```
NSURL *url = [NSURL URLWithString:theStringFromAbove]; 
```

如果 URL 无效，则该`url`变量将为 nil。否则，抓取一个端口并检查它是否是我们需要的：

```
if (!url || [url port] != 12345) {
    NSLog(@"YOU SHALL NOT PASS");
} 
```

# mysql - MySQL存储函数中的IF语句出错

> ID：12598593
> 
> 赞同：4
> 
> 时间：2012-09-26T09:27:59.820
> 
> 标签：mysql, sql, stored-functions

我在第 12 行（在 endif 语句中）收到一个错误。我相信我在 IF 或 ELSE 中做错了什么，有人可以帮助我吗？

```
DELIMITER $$

CREATE FUNCTION TEST (`param` INT) 
RETURNS INT 
DETERMINISTIC
BEGIN
    DECLARE `var` INT;

    SET `var` = 1;

    IF `param` > 0 THEN
        SET `var` = `var` + `param`;
    END IF;

    RETURN `var`;
END$$ 
```

编辑：（与 case 而不是 if 相同的功能，同样的问题）

```
DELIMITER $$

CREATE FUNCTION TEST (`param` INT) 
RETURNS INT 
DETERMINISTIC
BEGIN
    DECLARE `var` INT;

    SET `var` = 1;

    SET `var` = 
        CASE
            WHEN `param` > 0 THEN `var` + `param` ELSE `var`
        END ;

    RETURN `var`;
END$$ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T09:30:52.147

试试这个：

```
BEGIN
    DECLARE `var` INT;

    SET var = 
      CASE
        WHEN param > 0 THEN var + 1 ELSE var 
      END ;

    RETURN var;
END$$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T10:47:10.080

发现这是 PHPMyAdmin 中的一个错误，如果我使用“添加例程”添加该函数，它就起作用了！

# vb.net - 使用 VB.NET 为每个循环创建一个 COM 类

> ID：12598597
> 
> 赞同：2
> 
> 时间：2012-09-26T09:28:08.857
> 
> 标签：vb.net, excel, com

Excel/VBA 在我工作的组织中被广泛使用。为了让事情变得更容易，我正在研究一些在 .NET/VS2010 中广泛使用的 COM 类，以便在 VBA 中使用。

但是，我似乎无法实现支持每个循环的 COM 对象。如何实现这种行为？

要指定一点：

在许多情况下，我会创建一些类（我们称之为 SomeClass）和一个随附的专用集合类（我们称之为 SomeClassCollection）。在纯 .NET 中，这通常不是必需的，因为我可以简单地为通用容器创建必要的专用扩展（例如 List(Of SomeClass)）。但是，在 VBA/COM 中，我需要为大多数自定义类创建一个单独的专用集合类。

对我来说，创建 SomeClassCollection COM 兼容对象的最明显方法是继承一些通用的 .NET 集合，例如 List(Of SomeClass)，然后创建添加专用函数以及使基本函数和属性 COM 可见（例如，添加、删除、计数等）

因为我继承了一个 .NET 集合，其中每个都受支持（在 .NET 中），所以我认为有可能以某种方式将此功能转移到 COM 集合类（参见工作表、工作簿等集合在支持每个的 Excel 中）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:44:51.423

通常，您需要实现一个 COM 可见类，该类公开一个带有签名的方法，`IEnumerator GetEnumerator()`并将其标记为 DISPID 为 -4（即 DISPID_NEWENUM）

[这里有更详细](http://limbioliong.wordpress.com/2011/10/28/exposing-an-enumerator-from-managed-code-to-com/)的解释

# crosstab - 运行时交叉表 .jasper 文件错误

> ID：12598603
> 
> 赞同：0
> 
> 时间：2012-09-26T09:28:31.173
> 
> 标签：crosstab

当我尝试在 servlet 中调用 .jasper 文件时出现以下错误。

.jasper 具有交叉表，可在 ireport 4.5 的设计 IDE 中完美运行

```
net.sf.jasperreports.engine.JRException: Error loading object from InputStream
        at net.sf.jasperreports.engine.util.JRLoader.loadObject(JRLoader.java:196)
        at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:361)
        at net.sf.jasperreports.engine.JasperRunManager.runReportToPdfStream(JasperRunManager.java:163)
        at ReportManager.annualSaleReports.processRequest(annualSaleReports.java:103)
        at ReportManager.annualSaleReports.doPost(annualSaleReports.java:317)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:390)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
        at java.lang.Thread.run(Thread.java:619)
Caused by: java.io.InvalidClassException: net.sf.jasperreports.crosstabs.base.JRBaseCrosstabGroup; local class incompatible: stream classdesc serialVersionUID = -6144263542628036271, local class serialVersionUID = 7685014062058258277
        at java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:562)
        at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1583)
        at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1496)
        at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1583)
        at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1496)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1732)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
        at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1667)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1323)
        at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947)
        at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
        at java.util.ArrayList.readObject(ArrayList.java:593)
        at sun.reflect.GeneratedMethodAccessor193.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
        at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1849)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
        at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947)
        at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
        at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947)
        at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
        at net.sf.jasperreports.engine.util.JRLoader.loadObject(JRLoader.java:192) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:32:03.080

问题已解决，这是由于编译版本不兼容或不等于运行 .jasper.jar 版本时发生的

# android - 在Android中经过一段时间后自动调用Web服务的后台任务

> ID：12598604
> 
> 赞同：0
> 
> 时间：2012-09-26T09:28:32.407
> 
> 标签：android, timer, background-process

在这里我开发了一个android应用程序，我想在我设置的一段时间后在后台自动调用web服务，我不知道该怎么做。

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:40:47.540

使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)以您设定的时间间隔调用您的应用程序。每当您的应用程序被它调用时，访问您的网络服务。

# vba - 如何在 MS WORD 2007 中编辑表单字段值

> ID：12598605
> 
> 赞同：0
> 
> 时间：2012-09-26T09:28:32.233
> 
> 标签：vba, ms-word

如何在我的文档中编辑文本表单字段（旧表单），以便我可以在我的 VBA 脚本中使用该字段的新值？

我有带有文本表单字段（书签 = TextFormField1）的简单表单。它显示默认文本“默认文本”。

我可以像这样访问该字段的文本：`ActiveDocument.FormFields("TextFormField1").Range.Text`

但是，如果我更改该字段的值，它似乎会删除该字段本身，并用简单的文本替换它 - 导致 `ActiveDocument.FormFields("TextFormField1").Range.Text`抛出异常，因为 TextFormField1 不再存在......

我究竟做错了什么？如何在表单字段中插入文本，并在我的 VBA 脚本中使用此文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-09T10:14:44.440

尝试下一个代码：

```
ThisDocument.FormFields("Index_Or_FormFieldName_or_Bookmarkname").TextInput.EditType Type:=wdRegularText, Default:="Your Form field text" 
```

但它非常缓慢地将值记录到 FormField 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:46:40.947

使用`Result`属性：

```
ActiveDocument.FormFields("TextFormField1").Result = "Form field text" 
```

# php - 如何将多个异常显示为列表？

> ID：12598606
> 
> 赞同：0
> 
> 时间：2012-09-26T09:28:38.403
> 
> 标签：php, exception-handling, usability

我们有一个异常频繁的环境，并且可以同时抛出一些异常。

我们正在努力提高可用性，因此不是在捕获每个异常时打印它，而是希望存储它们并在文档末尾构建一个列表。

在考虑了一些解决方案之后——从 jQuery 克隆到全局`$exceptions[]`数组，包括 CSS 纯替换——我们找不到更好的做法。

所以问题是：**是否有任何值得信赖且记录在案的方法来收集多个异常并将它们一起显示？**

**编辑：为 CMS 编写模板时会引发上下文**
异常（主要是检索返回的“内容” `NULL`）。当设计师开始开发时，会有很多这样的错误。我们不想阻止模板被预览，但另一方面我们想通知应该修复什么。

# java - jcheckbox 上的 actionListener

> ID：12598607
> 
> 赞同：0
> 
> 时间：2012-09-26T09:28:41.500
> 
> 标签：java, swing, actionlistener, jcheckbox, anonymous-inner-class

我正在尝试将匿名 actionListener 添加到 JCheckBox 中，但在访问要更新值的对象时遇到了一些困难。我不断收到关于非最终版本的错误，然后当我将它们更改为最终版本时，它会抱怨其他事情。
我试图做的是下面（我删除了一些 gui 代码以使其更易于阅读）：

```
for (FunctionDataObject fdo : wdo.getFunctionDataList())
{
    JLabel inputTypesLabel = new JLabel("Input Types: ");
    inputsBox.add(inputTypesLabel);
    for (int i = 0; i < fdo.getNumberOfInputs(); i++)
    {
        JLabel inputLabel = new JLabel(fdo.getInputNames().get(i));
        JComboBox inputTypeComboBox = new JComboBox(getTypes());
        inputTypeComboBox.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e) 
             {
                 fdo.getInputTypes().set(i, (String) inputTypeComboBox.getSelectedItem());
             }
        });
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:30:22.600

更新您的代码

```
 inputTypeComboBox.addActionListener(new ActionListener() {
         public void actionPerformed(ActionEvent e) 
         {
             fdo.getInputTypes().set(i, (String) inputTypeComboBox.getSelectedItem());
         }
    }); 
```

到

```
final counter = i;
final JComboBox inputTypeComboBox = new JComboBox(getTypes());
final FunctionDataObject finalFDO = fdo;
inputTypeComboBox.addActionListener(new ActionListener() {
         public void actionPerformed(ActionEvent e) 
         {
             finalFDO.getInputTypes().set(counter, (String) inputTypeComboBox.getSelectedItem());
         }
    }); 
```

[此](http://geekexplains.blogspot.co.uk/2008/06/why-inner-classes-can-access-only-local.html)链接解释了为什么您只能访问内部类中的最终变量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:31:41.337

您不能访问匿名类中的非最终变量。您可以稍微修改您的代码以解决该限制（我已经制作`fdo`了`inputTypeComboBox`最终版本，并且我还制作了 的最终副本`i`）：

```
 for (final FunctionDataObject fdo : wdo.getFunctionDataList()) {
        JLabel inputTypesLabel = new JLabel("Input Types: ");
        inputsBox.add(inputTypesLabel);
        for (int i = 0; i < fdo.getNumberOfInputs(); i++) {
            final int final_i = i;
            JLabel inputLabel = new JLabel(fdo.getInputNames().get(i));
            final JComboBox inputTypeComboBox = new JComboBox(getTypes());
            inputTypeComboBox.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent e) {
                    fdo.getInputTypes().set(final_i, (String) inputTypeComboBox.getSelectedItem());
                }
            });
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T09:33:03.190

这将起作用：

```
 for (final FunctionDataObject fdo : wdo.getFunctionDataList()) {
        JLabel inputTypesLabel = new JLabel("Input Types: ");
        inputsBox.add(inputTypesLabel);
        for (int i = 0; i < fdo.getNumberOfInputs(); i++) {
            JLabel inputLabel = new JLabel(fdo.getInputNames().get(i));
            final JComboBox inputTypeComboBox = new JComboBox(getTypes());
            final int index = i;
            inputTypeComboBox.addActionListener(new ActionListener() {
                 public void actionPerformed(ActionEvent e) {
                     fdo.getInputTypes().set(index, (String) inputTypeComboBox.getSelectedItem());
                 }
            });
         }
    } 
```

# git - 将带有已删除文件的分支合并回主控

> ID：12598608
> 
> 赞同：5
> 
> 时间：2012-09-26T09:28:47.797
> 
> 标签：git, version-control

在我的主分支中，我有 2 个文件：

```
file1.txt
file2.txt 
```

我从那里创建了名为 b1 的新分支。在 b1 中，我修改了 file2.txt，并意外删除了 file1.txt（从磁盘中，当我打开 Windows 资源管理器到源文件夹时，file1.txt 不存在）。现在我想保留 file2.txt 中的更改并从 master 恢复 file1.txt（我不需要删除的版本）。我切换到master，合并到b1，没有发生冲突，它说'all up-to-date'但file1.txt不存在。我应该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T10:13:09.880

我想你在这里问了几个问题。第一个似乎是“我该如何恢复`file1.txt`？” 假设您的修订图如下所示：

```
 M
(master)  o -- o --- o ------o  HEAD
                \           /
(b1)             o -- o -- o
                 A    B    C 
```

`file1.txt`您可以通过以下方式获取以前的副本`git checkout`：

```
git checkout HEAD~1 -- file1.txt 
```

`file1.txt`这将在您的工作副本中复活并暂存。您可以，`git commit`并且文件将返回。注意：`HEAD~1`表示取 的第一个父级`HEAD`，它指向合并 b1 之前的 master 状态。如果您知道提交 ID，则可以使用它来代替`HEAD~1`。

您似乎在问的另一个问题是“我应该在分支 b1 中做什么来避免这种情况？” 最明显的选择是`file1.txt`一开始就不删除。但是让我们假设您认为您需要这样做，并认为该选择是错误的。接下来，假设您没有通过将更改推送到某处来共享分支 b1。如果您注意到您立即删除了该文件，您可以执行以下操作：

```
git checkout HEAD~1 -- file1.txt
git commit --amend 
```

那就是说，“把 file1.txt 还给我，然后将该文件合并到最新的提交中。” 这看起来就像您从未删除过该文件一样。

如果您没有注意到该文件被立即删除，并且您之间有几次提交，那么您可能希望查看使用`git rebase`来修复问题。

如果您在其自己的提交中删除了该文件，那么您可以使用`git rebase -i`从分支的历史记录中删除该提交。让我们假设这`B`是删除文件的提交，这是该提交中唯一完成的事情。在 b1 上，您将运行以下内容：

```
git rebase -i B~1 
```

删除包含有问题的提交 ( `B`) 的行，保存并退出。您的分支刚刚重写了它的历史，而没有`B`其中的内容。例如，我跑了`git rebase -i`，这在编辑器中显示：

```
pick 40f76a7 removed bar
pick 30a25f5 modified foo 
```

然后我从列表中删除`40f76a7`，然后给我留下：

```
pick 30a25f5 modified foo 
```

合并后的历史现在看起来像这样：

```
 M
(master)  o -- o --- o ------o  HEAD
                \           /
(b1)             o ------- o
                 A         C' 
```

请注意，提交 id`C'`不同于`C`因为`B`不再存在，并且父 sha1 是提交 id 的一部分。IOW，C 的 sha1 改变了，因为我们重写了历史。

如果您`file1.txt`在同一个提交中删除并进行了许多其他更改，那么还有几个步骤。首先，带回文件并提交：

```
git checkout B~1 -- file1.txt
git commit -m "Reinstate file1.txt" 
```

我们称之为新的提交`D`。我们的修订图现在看起来像

```
 M
(master)  o -- o --- o -----------o  HEAD
                \           
(b1)             o -- o -- o -- o
                 A    B    C    D 
```

现在，做：

```
git rebase -i B~1 
```

并将包含提交 id 的行移动到提交 id`D`之后`B`，然后更改`pick`为`squash`. 例如，我在运行时得到这个`git rebase -i B~1`：

```
pick 40f76a7 removed bar plus other changes
pick 30a25f5 modified foo
pick 6177cb7 add bar 
```

`6177cb7`是恢复 bar 的提交。所以我将它移到下面`40f76a7`并将命令更改为`squash`：

```
pick 40f76a7 removed bar plus other changes
squash 6177cb7 fix bar
pick 30a25f5 modified foo 
```

保存并退出。它会要求您修复提交消息。去做。完成后，您最终会得到如下所示的历史记录：

```
 M
(master)  o -- o --- o -----------o  HEAD
                \           
(b1)             o -- o -- o
                 A    B'   C' 
```

新的`B'`不再删除`file1.txt`。此时，您已准备好与 master 合并。

几句结束语。小心`git rebase`。如果你不小心，你可能会失去历史。确保阅读[git rebase](http://git-scm.com/docs/git-rebase)手册页。那里有很多有用的信息。*注意：只有当您想删除从历史记录中删除文件的事实时，*`git rebase`才需要进行所有这些工作。如果您同意提交显示您将文件带回，那么请务必使用恢复文件并提交它。对于新的 git 用户来说，它不那么乏味，而且更容易。 相当先进，需要一些练习。但是，如果您投入时间并学好它，它确实非常有用。*`git checkout``git rebase`*

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T10:08:15.710

在这种情况下合并不是你做的事情，Git 在合并回 master 时保留删除是正常的。如果你想从另一个分支或标签获取文件，它是`git checkout master -- filename`.

在您的情况下，您需要在之前取消合并：

1.  确保您在 master 上，并且您的工作目录是干净的（`git status`显示没有变化）
2.  取消您所做的合并

    ```
     git reset --hard master@{1} 
    ```

3.  回到b1

    ```
    git checkout b1 
    ```

4.  `file1.txt`在您的工作副本中从 master结帐 ：

    ```
    git checkout master -- file1.txt 
    ```

5.  提交或修改你之前的提交，或者你想做的任何事情*

# excel - 列出今天的日期 + 距离指定日期还有 3 个月？

> ID：12598612
> 
> 赞同：1
> 
> 时间：2012-09-26T09:28:53.647
> 
> 标签：excel, vba

我正在尝试在excel中做一个发票日期计算器。我所拥有的是第一张发票到期的日期和发票用完的日期。然后我有一个字段，其中包含我们开具发票的月数。

我需要做的是动态生成一个列表，其中显示发票到期的月份。例如：

*   发票开始日期 = 2012 年 1 月 1 日
*   发票结束日期 = 2013 年 1 月 1 日
*   每 3 个月开具发票

然后该列表将输出：

*   2012 年 1 月 1 日
*   2012 年 4 月 1 日
*   2012 年 7 月 1 日
*   2012 年 10 月 1 日

显然，根据每 X 天数的开始月份、结束月份或发票，此列表会相应地扩展和更改。

有谁知道我该怎么做？我可以在一个日期上添加 3 个月没问题，但是让一个列表动态扩展等我做不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:01:12.803

一种选择是让公式仅返回低于结束日期的日期，而在其他情况下为空白。

在您的评论中，您有一个公式可以根据相邻单元格计算下一个日期，我假设它进入单元格 G11。该公式可以首先检查新日期是否会超过结束日期，如果是，则返回空白：

```
=IF(OR(DATE(YEAR(F11),MONTH(F11)+$F$13,DAY(F11))>$F$12 , F11=""),
 "",
 DATE(YEAR(F11),MONTH(F11)+$F$13,DAY(F11))) 
```

在第一行，公式检查 G11 计划的值是否超过最大日期，或者左侧的值是否为空白。如果是这种情况，则将返回空白，这表明其他单元格也返回空白。如果日期有效，则第三行在单元格中输入日期。

当然，excel公式中没有单独的行，所以所有内容都应该输入一行。然后可以将公式复制并粘贴到相邻的单元格中，给出：

```
 F              G             H             I            J        K   L   M
------------+--------------+--------------+------------+------------+---+---+---+
Jan 1, '12  +  Apr 1, '12  +  Jul 1, '12  + Oct 1 '12  +  Jan 1 '13 +   +   +   +
------------+--------------+--------------+------------+------------+---+---+---+
Jan 1, '13  +              +              +            +            +   +   +   +
------------+--------------+--------------+------------+------------+---+---+---+
3           +              +              +            +            +   +   +   +
------------+--------------+--------------+------------+------------+---+---+---+ 
```

如果您想在列表中添加此内容，请复制您设想的最大日期数的公式，然后列表将显示日期，后跟空格。似乎没有办法绕过包括空白在内的列表，但至少它只包含有效的日期。

# android - Android APP崩溃（从相机拍照后）

> ID：12598613
> 
> 赞同：1
> 
> 时间：2012-09-26T09:28:58.230
> 
> 标签：android, upload, android-camera

我已经从我的 APP 启动了相机。有时，当我的应用程序在捕获图像后恢复时，我的应用程序会崩溃。我的APP又重新启动了。

我能做些什么来处理这种类型的崩溃。

```
public void onClick(View view)
{
    // TODO Auto-generated method stub

    if(view==btnAddPrescription)
    {
        Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
        File photo=getOutputMediaFile(MEDIA_TYPE_IMAGE);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo));
        imageUri = Uri.fromFile(photo);
        Log.v("Image URI", imageUri.toString());

        startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);
    }
}

public void onActivityResult(int requestCode, int resultCode, Intent data)
{
    Log.v("requestCode",requestCode+"");
    Log.v("resultCode",resultCode+"");

    if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE)
    {
        if (resultCode == RESULT_OK)
        {
            selectedImageUri = imageUri;
            newPictPath=selectedImageUri.getPath();
            this.setSelectedPath(newPictPath);
            Log.v("newPictPath",newPictPath);
            getContentResolver().notifyChange(selectedImageUri, null);
            ImageView imageView = (ImageView) findViewById(R.id.img_prescription);
            ContentResolver cr = getContentResolver();
            Bitmap bitmap;
            try
            {
                bitmap = android.provider.MediaStore.Images.Media.getBitmap(cr, selectedImageUri);
                imageView.setImageBitmap(bitmap);
                //Toast.makeText(this, selectedImageUri.toString(),Toast.LENGTH_LONG).show();
            }
            catch (Exception e)
            {
                Toast.makeText(this, "Failed to load", Toast.LENGTH_SHORT).show();
                Log.e("Camera", e.toString());
            }
        }
        else if (resultCode == RESULT_CANCELED) 
        {
            // User cancelled the image capture
        }
        else 
        {
            // Image capture failed, advise user
        }//else ends here
    }//if ends here
} 
```

我正在使用这段代码。它在模拟器上正常工作。但是，当我在设备上运行它时，有时它会通过抛出 java.lang.RuntimeException 崩溃：将结果 ResultInfo{who=null, request=0, result=-1, data=null} 传递给活动此异常。

# ruby-on-rails - 从 css 文件中的资产访问图像

> ID：12598620
> 
> 赞同：0
> 
> 时间：2012-09-26T09:29:36.197
> 
> 标签：ruby-on-rails

我的引导布局正在执行以下操作：

```
body {
...
 background-image:url('../img/bg.png');
} 
```

现在这工作正常。但是，与 rails 集成时，图像未显示，路径仍然正确：

```
assets > stylesheets > docs.css (has the line mentioned above)
assets > img > bg.png 
```

但是，它不起作用，我不知道为什么。任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:34:21.873

尝试

身体 { ... 背景图像：url（'bg.png'）; }

# java - 使用带有保存对话框的 java 将内容导出到文本文件

> ID：12598621
> 
> 赞同：2
> 
> 时间：2012-09-26T09:29:37.780
> 
> 标签：java, servlets, export-to-text

我有一个有一些值的结果集，我想将结果集中的数据导出为带有保存对话框的文本文件。

如何在 Java 中做到这一点？

我已经完成了对 excel 和 java 的上述要求，如下所示。

`response.setContentType("application/vnd.ms-excel"); response.setHeader("Content-disposition", "attachment; filename=\"" + reportName + ".xls\"");`

和

`response.setHeader("Content-disposition", "attachment; filename=\"" + reportName + ".pdf\""); response.setContentType("application/pdf");`

更新 ：

```
if(exportTo.equals("text")){
            response.setContentType("text/plain");
            response.setHeader("Content-disposition", "attachment; filename=\"" + reportName + ".txt\"");
            try {

            } catch (Exception e) {
                // TODO: handle exception
            }

        } 
```

在这

在尝试块中，如何将结果集中可用的内容设置为输出流并使其可用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T11:45:00.727

唯一的区别是：

```
response.setContentType("text/plain"); 
```

你可以在这里看到一个完整的例子（[http://www.mkyong.com/servlet/servlet-code-to-download-text-file-from-website-java/](http://www.mkyong.com/servlet/servlet-code-to-download-text-file-from-website-java/)）

**更新**

这是我开发和测试过的演示，并且运行良好：

```
public class ServletDownloadDemo extends HttpServlet {
    private static final int BYTES_DOWNLOAD = 1024;

    public void init(ServletConfig config) throws ServletException {
        super.init(config);
    }

    public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException,
                                                                                       IOException {
        response.setContentType("text/plain");
        response.setHeader("Content-Disposition", "attachment;filename=downloadname.txt");

        String s = "Test\n\nText file contects!!";
        InputStream input = new ByteArrayInputStream(s.getBytes("UTF8"));

        int read = 0;
        byte[] bytes = new byte[BYTES_DOWNLOAD];
        OutputStream os = response.getOutputStream();

        while ((read = input.read(bytes)) != -1) {
            os.write(bytes, 0, read);
        }
        os.flush();
        os.close();
    }
} 
```

它下载一个`downloadname.txt`以`String s`.

**更新 2**

```
 String s = "";
    while (rs.next()) {
        s += rs.getString("column_name");
    }

    if (exportTo.equals("text")) {
        response.setContentType("text/plain");
        response.setHeader("Content-Disposition", "attachment;filename=downloadname.txt");

        try {
            InputStream input = new ByteArrayInputStream(s.getBytes("UTF8"));

            int read = 0;
            byte[] bytes = new byte[BYTES_DOWNLOAD];
            OutputStream os = response.getOutputStream();

            //data form resultset

            while ((read = input.read(bytes)) != -1) {
                os.write(bytes, 0, read);
            }
            os.flush();
            os.close();
        } catch (Exception e) {
            // TODO: handle exception
        }
    } 
```

你必须填充你的`ResultSet`并放置你需要的东西`String s`。**就这样。**

# php - 基本 Ajax，但不能使用 GET 或 POST 方法

> ID：12598622
> 
> 赞同：0
> 
> 时间：2012-09-26T09:29:45.860
> 
> 标签：php, ajax

我知道那里有很多教程和相同的问题，但我尝试了很多次，ajax 没有工作。请纠正我的脚本：这里是 index.php

```
<?php
echo'
<script type="text/javascript">
function ajax()
{
var xmlhttp;

xmlhttp=new XMLHttpRequest();
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("result").innerHTML=xmlhttp.responseText;
    }
  }
  xmlhttp.open("POST","ajax.php",true);
  xmlhttp.send();

    }
</script>

</head>

<body>
<p>&nbsp;</p>
<form id="form1" name="form1" method="post" action="" onsubmit="return ajax()">
  <p>
    <label for="num2">number 1</label>
    <input type="text" name="num1" id="num2" />
    *
  <label for="num3">number 2</label>
  <input type="text" name="num2" id="num3" />
    =
  <label for="result">Result</label>
  <input type="text" name="result" id="result" />
  </p>
  <p>
    <input type="submit"  value="Submit" />
  </p>
</form>';
?> 
```

这是 ajax.php，它采用两个变量并将它们相乘并回显结果，但我的页面重新刷新并没有看到任何东西

```
 <?php
    $num1=$_POST["num1"];
    $num2=$_POST["num2"];

    $result=$num1*$num2;
    echo $result;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:31:45.710

发生这种情况是因为`function ajax()`不返回任何内容，因此表单继续提交。

在函数结束前添加`return false;`

正确代码：

```
<html>
<head>

<script type="text/javascript">
function ajax(){
    var xmlhttp;
    xmlhttp=new XMLHttpRequest();
    xmlhttp.onreadystatechange=function(){
        if (xmlhttp.readyState==4 && xmlhttp.status==200){
            document.getElementById("result").value=xmlhttp.responseText;
        }
    }
    var params = "num1="+document.getElementById('num2').value+"&num2="+document.getElementById('num3').value;
    xmlhttp.open("POST","ajax.php",true);
    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xmlhttp.setRequestHeader("Content-length", params.length);
    xmlhttp.setRequestHeader("Connection", "close");
    xmlhttp.send(params);
    return false;
}
</script>

</head>

<body>
    <p>&nbsp;</p>
    <form id="form1" name="form1" method="post" action="" onsubmit="return ajax()">
        <p>
            <label for="num2">number 1</label>
            <input type="text" name="num1" id="num2" />
            *
            <label for="num3">number 2</label>
            <input type="text" name="num2" id="num3" />
            =
            <label for="result">Result</label>
            <input type="text" name="result" id="result" />
            </p>
            <p>
            <input type="submit"  value="Submit" />
        </p>
    </form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:34:58.910

请[在此处查看我](https://stackoverflow.com/a/12482720/1135954)`php`对在和中使用 ajax 的类似问题的回答`mysql`。希望有帮助。它详细解释了完整的代码。

其中大部分也适用于此。

希望这可以帮助。

# onvif - 将 ONVIF 设备管理器连接到 Geovision PTZ 摄像机时出错

> ID：12598623
> 
> 赞同：-1
> 
> 时间：2012-09-26T09:29:47.747
> 
> 标签：onvif

错误是：响应消息的内容类型 text/html 与绑定的内容类型（application/soa+xml; charsset=utf-8）不匹配，如果使用自定义编码器，请确保 IsContentTypeSupported 方法实现正确。响应的前 1024 个字节是：' .... N 依此类推 ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:21:58.053

SOAP 需要返回 XML 而不是 HTML，因此您会收到错误消息。

根据我的经验，当相机出现错误时，您会得到 HTML 而不是 XML，它会发回某种错误描述。

为了能够了解发生了什么，您应该安装wireshark，嗅探流量并检查摄像头发回的内容。

# excel - 发送带有包含宏的 excel 文件的电子邮件

> ID：12598626
> 
> 赞同：0
> 
> 时间：2012-09-26T09:29:52.193
> 
> 标签：excel, vba

我创建了一个 excel 文件，在其中添加了一些连接到不同宏的按钮。我想将此 excel 文件发送给一位同事，但是当他打开此文件时，按钮会出现错误：

> 无法运行宏“宏名”。该工作簿中的宏可能不可用，或者所有宏都可能被禁用。

有没有办法在 excel 文件中包含或插入宏？

[我使用 Microsoft Office Professional Plus 2010]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:33:20.663

自己找到了答案，对不起：

另存为..“启用宏的 Excel 工作簿 (*.xlsm)

# c# - 创建将电子邮件发送到 Sharepoint 中的文档库的 Outlook 加载项

> ID：12598628
> 
> 赞同：1
> 
> 时间：2012-09-26T09:30:06.140
> 
> 标签：c#, sharepoint, sharepoint-2010, outlook-addin

我想创建一个 Outlook 加载项，它将电子邮件转发到 SharePoint 2010 中的文档库。我从使用 Outlook 加载项模板开始，到目前为止已经创建了功能区界面和按钮。这工作正常，我可以在 Outlook 中看到它并单击按钮。

接下来是我有点失落的地方；我添加了对 SharePoint.dll 的引用，但无法在 Outlook - ThisAddIn.cs 中访问它。这是不可能的还是我错过了什么？

解决方案是选择一封电子邮件，单击我在 Outlook 功能区上创建的按钮，这将加载可以通过 SharePoint 中的列表框与电子邮件关联的公司列表，然后剥离并上传数据。

我能够在 SharePoint 中检索和添加信息，但从未在 Outlook 加载项中执行此操作。

我是 VSTO 开发的新手，因此非常感谢任何指针。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:52:53.147

> 我添加了对 SharePoint.dll 的引用，但无法在 Outlook 中访问它

您只能在 SharePoint 服务器上实际运行的代码中使用 Microsoft.SharePoint.dll 对象模型，而不能在删除 PC（例如您的用户 PC）上使用。

相反，您需要查看[SharePoints Web 服务](https://stackoverflow.com/questions/31868/upload-a-file-to-sharepoint-through-the-built-in-web-services)或[客户端对象模型](https://stackoverflow.com/questions/9847935/upload-a-document-to-a-sharepoint-list-from-client-side-object-model)。

# .htaccess - Codeigniter 2.1 和 .htaccess - 重写 url

> ID：12598630
> 
> 赞同：0
> 
> 时间：2012-09-26T09:30:16.127
> 
> 标签：.htaccess, codeigniter, url-rewriting

我需要重写这个网址：

> domain.com/mali_oglasi/index/1（任何数字）

至：

> domain.com/mali_oglasi

在我的 .htaccess 文件中，我有以下代码：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:42:58.443

如果您唯一想要的是将控制器/方法映射为不同于默认行为，则可以使用`route.php`配置文件。请参阅此处的官方文档：http: [//codeigniter.com/user_guide/general/routing.html](http://codeigniter.com/user_guide/general/routing.html)

在你的情况下，你会有这样的事情：

```
$route['mali_oglasi/index/(:num)'] = 'mali_oglasi'; 
```

稍后在您的控制器中，您仍然可以使用以下方法获取原始数字：

```
$this->uri->rsegment(3); 
```

代替 ：

```
$this->uri->segment(3); 
```

（请参阅此处的官方文档：http: [//codeigniter.com/user_guide/libraries/uri.html](http://codeigniter.com/user_guide/libraries/uri.html)）

**编辑：**

实际上，如果您只是希望在需要添加参数时摆脱“索引”段，您可能想要与我的第一个答案相反：

```
$route['mali_oglasi/(:num)'] = 'mali_oglasi/index/$1'; 
```

使用该行，“www.yourdomain.com/mali_oglasi/1”形式的每个请求都将被 codeigniter 解释为“www.yourdomain.com/mali_oglasi/index/1”。这意味着控制器“mali_oglasi”的方法“index”将用于处理您的请求。

如果您需要检索数字，您想使用：

```
$this->uri->segment(3); 
```

因此，如果您的客户应该直接访问 url “www.yourdomain.com/mali_oglasi/index/1”，您仍然会检索到好的 uri 段。（`$this->uri->segment(n);`给你`route.php`重写uri后的第n段，`$this->uri->rsegment(n)`给你重写uri之前的第n段。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:26:22.400

我建议将用户重定向到新的 URL：

在您的控制器`mali_oglasi`中 >> 在函数中`index`

把下面的行

```
redirect('mali_oglasi'); 
```

例如

类 mali_oglasi 扩展 CI_Controller{

```
function Index($id){
    // Note : make sure you have loaded the url helper
    redirect('mali_oglasi');
} 
```

}

**注意：**不要忘记加载`url helper`

**注意：** 将in`$config['index_page'] = '';`改为`index`in`application/config/config.php`

# android - 如何为 Android 构建 Webkit？

> ID：12598634
> 
> 赞同：0
> 
> 时间：2012-09-26T09:30:26.477
> 
> 标签：android, build, webview, webkit

在我的问题中，[Android webview 如何使用 webkit？](https://stackoverflow.com/questions/12528742/how-android-webview-uses-webkit)我知道`WebViewCore.java`加载**webcore**和**chromium_net**

```
static {
        // Load libwebcore and libchromium_net during static initialization.
        // This happens in the zygote process so they will be shared read-only
        // across all app processes.
        try {
            System.loadLibrary("webcore");
            System.loadLibrary("chromium_net");
       }
} 
```

1.  `libwebcore.so`地点在哪里`libchromium_net.so`？
2.  我知道 webcore 来自[外部/webkit 源](https://github.com/android/platform_external_webkit/tree/master/Source)？那么什么是chromium_net？
3.  如何使用[webkit源](https://github.com/WebKit/webkit)构建.so文件，以便我可以替换Android源附带的2个.so文件（听说Android使用旧的webkit版本）

提前致谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-26T09:40:50.293

有几种适用于 Android 的开源 Web 浏览器，考虑到您的问题可能比您从它们那里学习更好，而不是我们试图回答您的所有问题。

试试[锆石](http://code.google.com/p/zirco-browser/)。

# javascript - 在asp.net Listview中添加自动计算求和行和列

> ID：12598635
> 
> 赞同：1
> 
> 时间：2012-09-26T09:30:28.317
> 
> 标签：javascript, asp.net, listview, textbox, devexpress

我正在尝试创建包含用户只能输入数值的 ASPxTextBox 的 ListView。有许多行和列的数据。我想添加新的行和列来计算每行和列的总值

例如，如果我有这样的数据：

学生姓名 | 主题1 | 主题2 | 主题3
------------------------------------------------- ---------
约翰 ------------ | -------- 23 | --------45 | --------37
史密斯 ---------- | ------- 41 | --------22 | --------11
琳达 ---------- | ------- 35 | --------38 | --------23

我想变成这样

学生姓名 | 主题1 | 主题2 | 主题3 | 总计
------------------------------------------------ -----------------
约翰 ------------ | -------- 23 | --------45 | --------37 | 105
史密斯 ---------- | ------- 41 | --------22 | --------11 | --74
琳达 ---------- | ------- 35 | --------38 | --------23 | --96
------------------------------------------------------------ -------------------
总计------------ | --------99 | --------105 | --------71 | 275

列数（主题）是固定的，但行数取决于数据库中的数据。

这里有两个主要问题：
1\. 我希望求和行和列在客户端使用 javascript 执行计算。因此，当其中一个文本框失去焦点时，它将重新计算每一行和每一列的总和值。
2\. 我无法使用 javascript 从 ASPxTextBox 访问值。我尝试使用：

```
var test = document.getElementById('<%# Container.FindControl("txt_Subject1").ClientID %>')
var data = test.value; 
```

但它似乎不起作用。

以下代码也会导致错误：

```
var test = document.getElementById('<%# Container.FindControl("txt_Subject1").ClientID %>')    
var data = test.GetValue(); 
```

当我尝试 ClientInstanceName 时，它​​总是只返回最后一行的值：

```
var data = txt_Subject1.GetValue(); //doesn't work? 
```

另外，我不想将 ASPxTextBox 更改为 asp TextBox，因为我想使用它的一些功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:36:56.893

您可以根据行号动态分配 ClientInstanceName 值：

```
txt_Subject1_1
txt_Subject1_2
...
txt_Subject1_n 
```

然后使用javascript计算总和：

```
var sum = 0;
for (var i = 1; i <= rowCount; i++) 
{
    sum += parseInt(window['txt_Subject1_' + i].GetValue());
} 
```

# jquery-mobile - 调用 .trigger('create') 会导致 JavaScript 错误

> ID：12598637
> 
> 赞同：1
> 
> 时间：2012-09-26T09:30:33.537
> 
> 标签：jquery-mobile

我对 jQuery Mobile 有这个奇怪的问题，它只发生在页面刷新时（例如按 F5）。

在有问题的页面上，在“pageshow”事件中，调用以下内容：

```
$('content').html(details.html).trigger('create'); 
```

当页面被导航到时，这工作得非常好，但是一旦你停留在页面上并刷新，样式就不会被应用，并且在 JS 控制台中会出现以下错误：

> 类型错误：c[0] 未定义

但是，如果我将值为 1 的 a推`.trigger('create')`入，它仍然会引发错误，但会正确应用样式：`setInterval`

```
$('content').html(details.html);
setInterval(function() {
   $('content').trigger('create');
}, 1); 
```

显然这并不理想，所以我想知道是否有人遇到过类似的问题，如果是，他们做了什么来解决它？

# android - 以编程方式更改搜索栏的进度绘图

> ID：12598638
> 
> 赞同：1
> 
> 时间：2012-09-26T09:30:34.097
> 
> 标签：android, seekbar

在我的应用程序中，我有一个搜索栏，它应该有两种状态——专注和正常

也不是为了进度可绘制，我已经像这样在 xml 中设置了普通图像 -

```
<SeekBar
    android:id="@+id/bar"
    android:layout_width="315dp"
    android:layout_height="10dp"
    android:layout_marginLeft="114dp"
    android:layout_marginTop="210dp"
    android:max="60"
    android:progressDrawable="@drawable/bar_normal"
    android:thumb="@null" /> 
```

这是我用于进度可绘制的 xml

bar_normal.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@android:id/background"
        android:drawable="@drawable/black"/>

    <item android:id="@android:id/secondaryProgress">
        <clip android:drawable="@drawable/black" />
    </item>

    <item android:id="@android:id/progress">
        <clip android:drawable="@drawable/grey" />
    </item>

</layer-list> 
```

现在，当用户触摸此搜索栏时，我想将可绘制的进度更改为橙色

为此，我使用另一个 xml，在我的代码中我这样写

```
seekBar.setProgressDrawable(getResources().getDrawable(R.drawable.bar_focused)); 
```

bar_focused.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@android:id/background"
        android:drawable="@drawable/black"/>

    <item android:id="@android:id/secondaryProgress">
        <clip android:drawable="@drawable/black" />
    </item>

    <item android:id="@android:id/progress">
        <clip android:drawable="@drawable/orange" />
    </item>

</layer-list> 
```

最初，该条看起来很好，进度条以灰色和背景显示，二次进度条以黑色显示，但是当我触摸搜索条使其变为橙色时，整个条形变为黑色。它的工作仍然很好，但我看不到橙色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:41:02.017

你不能使用状态改变drawable，让Os为你做，android默认的seekbar drawable是：

```
 <item android:state_pressed="true"
          android:state_window_focused="true"
          android:drawable="@drawable/seek_thumb_pressed" />

    <item android:state_focused="true"
          android:state_window_focused="true"
          android:drawable="@drawable/seek_thumb_selected" />

    <item android:state_selected="true"
          android:state_window_focused="true"
          android:drawable="@drawable/seek_thumb_selected" />

    <item android:drawable="@drawable/seek_thumb_normal" />

</selector> 
```

Ps：如果你drawable是图像或在xml中定义你的情况应该是（bar_drawable.xml）没有区别：

```
<item android:state_pressed="true"
      android:state_window_focused="true"
      android:drawable="@drawable/bar_focused" />

<item android:state_focused="true"
      android:state_window_focused="true"
      android:drawable="@drawable/bar_focused" />

<item android:state_selected="true"
      android:state_window_focused="true"
      android:drawable="@drawable/bar_focused" />

<item android:drawable="@drawable/bar_normal" /> 
```

# c# - Java 中的 C# 等效事件

> ID：12598640
> 
> 赞同：2
> 
> 时间：2012-09-26T09:30:44.237
> 
> 标签：c#, java, migration

我用**C#**开发了一个基于 PC 的 API来与嵌入式电子设备进行通信。此 API 读取 PC COM 端口、解码数据包、构建数据包并引发事件。现在我需要在 Android 手机中开发相同的 API。由于 C# 和 Java 事件之间存在差异，我很困惑如何在 Java 中实现相同的目标。

以下 C# 代码引发事件：

```
public class MARGserial
{

    dataObject = BT_DeconstructPacket(encodedPacket);
    if (dataObject != null) // if packet successfully deconstructed
    {
        OnMARGdataReceived(dataObject);

        if (dataObject is RawMARGdata)
        {
           OnRawMARGdataReceived((RawMARGdata)dataObject);

           PacketsReadCounter.RawMARGdataPackets++; 
        }
    }
    public delegate void onRawMARGdataReceived(object sender, RawMARGdata e);
    public event onRawMARGdataReceived RawMARGdataReceived;
    protected virtual void OnRawMARGdataReceived(RawMARGdata e)
    { 
       if (RawMARGdataReceived != null)
          RawMARGdataReceived(this, e);
    }

}/*End of MARGserial class */ 
```

以下代码用于`OnRawMARGdataReceived`在 Windows 控制台应用程序中订阅 Event。

```
public static MARG_api.MARGserial MARGserial = new MARG_api.MARGserial("COM44");
MARGserial.RawMARGdataReceived += new MARG_api.MARGserial.onRawMARGdataReceived(MARGserial_RawMARGdataReceived);

static void MARGserial_RawMARGdataReceived(object sender, MARG_api.RawMARGdata e)
{
    Console.WriteLine("Data :  " + e.Accelerometer[0].ToString() + "  "+e.Accelerometer[1].ToString()+ "  "+e.Accelerometer[2].ToString());
} 
```

对于 Android Java 应用程序，应用程序本身的 Main Activity 类必须订阅在另一个类线程内触发的事件（该线程读取蓝牙缓冲区并构造数据包）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:43:13.467

如果您没有使用“Swing”之类的 GUI 工具包，那么在 Java 中，侦听器模式对于此类任务非常常见。

也就是说，您有一个在主机上注册自己的侦听器，而主机又拥有一个侦听器列表。如果与侦听器对应的事件发生，则侦听器会收到通知。

[它与观察者模式](http://www.oodesign.com/observer-pattern.html)非常相似。

也许这个[SO 问题](https://stackoverflow.com/questions/4763225/java-listener-design-pattern-for-subscribing)很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:48:20.983

您可以在这里使用设计模式，尤其是 Observer：

在 Observer 中，您有一个名为 IObserver 的接口和一个名为 update() 的方法，您可以让所有感兴趣的对象实现该方法。然后主对象存储一组 s ，当发生某些事情时，它会在该集合中的每个对象上调用 .update() （本质上是回调）。这在 MVC 架构中也很常见，如果您想在 GUI 中采用这种方式，当模型状态发生变化并且需要更新视图时。

您还可以使用命令设计模式实现委托风格的一阶函数，这在 Java 中非常有用，因为没有对这个概念的本机支持。

我不确定以上内容是否对您的特定环境有所帮助，但设计模式通常是解决各种问题的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T03:32:44.403

我成功开发了可以使用Google 提供的[BluetoothChat](http://developer.android.com/guide/topics/connectivity/bluetooth.html)示例连接到我的蓝牙设备的 android 应用程序。设备的蓝牙模块具有来自[RovingNetworks (RN-41) 的 SPP（串行端口配置文件）](http://www.rovingnetworks.com/products/RN41)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-26T09:54:52.060

请检查 -

[http://v-lad.org/projects/gnu.io.android/](http://v-lad.org/projects/gnu.io.android/)

# c# - .Net X509KeyStore 和 certmgr.msc 不匹配

> ID：12598646
> 
> 赞同：0
> 
> 时间：2012-09-26T09:31:01.100
> 
> 标签：c#, .net, x509certificate

所以基本上我有这段代码：

```
var x509Store = new X509Store(StoreName.Root, StoreLocation.CurrentUser);
x509Store.Open(OpenFlags.ReadOnly);

foreach (var certificate in x509Store.Certificates)
{
    Console.Out.WriteLine(certificate.SubjectName.Name);
} 
```

很简单吧？获取“当前用户”的根证书列表并将其打印到控制台。这不可能行不通，对吧？

嗯，我也是这么想的。运行此代码会转储 43 个证书的列表，但如果我运行 certmgr.msc，当前用户实际上在“受信任的根证书颁发机构”存储中安装了 52 个证书。所以我还差 9 个证书，其中一个是我真正需要的。我错过了什么？

# d3.js - d3 堆叠区域字符串值 xAxis

> ID：12598652
> 
> 赞同：1
> 
> 时间：2012-09-26T09:31:08.237
> 
> 标签：d3.js, stacked-area-chart

是否可以在 d3 堆积面积图中传递 x 轴的字符串值。我尝试了两种方法来为 xAxis 传递字符串值，

```
1) chart.xAxis.tickFormat(function(d) {

            var dx = data[0].values[d] && data[0].values[d].x || 0;
  if (dx)
                return dx;    
            else 
                return '';

        });    

2) and also changed the .x(function(d){
return d[0];
}) 
```

第二条语句返回字符串值，但在绘制 xAxis 刻度时不可见并引发错误

在stackedAreaChart.js

selection.each（函数（数据）{

# clearcase - 如何通过命令行启动 RTC 构建？

> ID：12598654
> 
> 赞同：2
> 
> 时间：2012-09-26T09:31:10.560
> 
> 标签：clearcase, rtc

构建定义已创建，但为了自动化构建过程，我需要通过命令行启动构建。这是怎么做的？在 scm 命令行客户端上阅读文档，这似乎没有被描述：

[http://pic.dhe.ibm.com/infocenter/rtc/v1r0m0/index.jsp?topic=%2Fcom.ibm.team.scm.doc%2Ftopics%2Fc_scm_cli.html](http://pic.dhe.ibm.com/infocenter/rtc/v1r0m0/index.jsp?topic=%2Fcom.ibm.team.scm.doc%2Ftopics%2Fc_scm_cli.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:13:39.090

我认为根本不`scm`涉及启动构建。

您可以查看 Java API：请参阅“[使用普通 Java 客户端库进行自动构建输出管理](https://jazz.net/library/article/807)”。

或者，您可以使用[JB Toolkit](https://jazz.net/help-dev/clm/index.jsp?topic=/com.ibm.jazz.install.doc/topics/t_install_build_toolkit.html)并使用如下任务[`requestTeamBuild`](https://jazz.net/help-dev/clm/index.jsp?topic=/com.ibm.team.build.doc/topics/r_requestBuild.html)：

> 该`requestTeamBuild`任务使用指定的构建定义请求构建。
> 必须有一个支持构建定义的活动引擎才能使请求成功。

# javascript - 使用 JQuery 获取锚点 href 属性

> ID：12598659
> 
> 赞同：0
> 
> 时间：2012-09-26T09:31:24.077
> 
> 标签：javascript, jquery

我有一个带有以下 javascript 函数的按钮：

```
function getHyperLink(){
  window.getSelection().anchorNode.parentNode.attributes["0"].nodeValue;
} 
```

我所做的是突出显示包含超链接的文本，然后按下按钮并想要从所选文本中获取链接。

以下内容有效，但如果可能，我希望我的代码在 jQuery 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:34:33.987

您可以使用[attr()](http://api.jquery.com/attr/)通过名称获取属性：

```
var url = $(setContainingElement).attr('href'); 
```

不确定您如何在代码中使用它，但您可以使用 jQuery 来包装原生 javascript 对象，如下所示：

```
var url = $(window.getSelection().anchorNode.parentNode).attr('href'); 
```

# real-time - 实时网页

> ID：12598660
> 
> 赞同：1
> 
> 时间：2012-09-26T09:31:28.473
> 
> 标签：real-time

我想构建一个简单的基于 Web 的应用程序，例如，用户可以在其中按下空格键，然后做进一步的事情，比如回答一个问题，而其他用户同时只看到这个问题不再可用为答案。当用户提交答案时，每个人都会看到它。

好吧，这是一个例子。我看过电视节目，四个玩家有一个按钮，如果其中一个或两个知道答案，他们按下一个按钮，一个灯亮，第一个允许回答，而其他人则闭嘴。我想建立相同的想法，但在网络上。

但问题是，我不知道从哪里开始，我应该在谷歌上搜索什么关键字等等。我明白了，它可能适用于 HTML5，也许是 JavaScript 等等。

我有使用 Ajax 的想法，但是每秒请求一次以获取最新的操作似乎很垃圾。我还发现了一项名为 Pusher 的服务，但它的一次用户数量有限，这不符合我的需求。

我只需要想法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:52:02.580

在您阅读其余内容之前，先声明一下：我在 Realtime.co 工作，但我相信我可以在这里提供帮助，所以我不会试图“推销”。

您可以查看实时 ( [www.realtime.co](http://www.realtime.co) )。它基本上是一组工具，供开发人员在他们的项目中使用实时技术。它使用 websockets，但会回退到用户浏览器支持的任何内容（例如长轮询）。

在 Realtime 之后，您有一个一对一/一对多/多对多的消息传递系统，可以将您的消息传输给用户或从用户传出。

还有一个优点是实时框架实际上是跨平台的。这意味着您甚至可以让您的 Web 用户与 iPhone 用户、Android 用户、Windows Phone 用户、桌面应用程序、服务器应用程序等进行通信。

您可以在此处了解 JavaScript API：http: [//docs.xrtml.org/getting_started/hello_message.html#javascript](http://docs.xrtml.org/getting_started/hello_message.html#javascript)。

您只需在[Realtime.co](http://www.realtime.co)注册为开发人员并开始使用免费许可证。

我真的希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:48:14.490

好吧，我想我会选择 node.js。

写下所有这些以前的帖子，让我以正确的方式思考:)

# objective-c - NSXMLParser 无法解析特殊字符（德语和法语）

> ID：12598662
> 
> 赞同：5
> 
> 时间：2012-09-26T09:31:35.713
> 
> 标签：objective-c, xml, parsing, special-characters, nsxmlparser

我正在开发一个应用程序，它在私人服务器上进行搜索并向用户显示结果。问题是 NSXLParser 无法解析特殊的德语和法语字符。例如：应该是：（Geschäftsführer）-> 我得到的是：（äftsführer）

我怎样才能解决这个问题 ？

这是我的代码：

```
- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    currentNodeContent = (NSMutableString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
}

- (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if ([elementname isEqualToString:@"results"])
    {
        currentJob = [SearchResult alloc];
    }

}

- (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{

    if ([elementname isEqualToString:@"jobTitle"])
    {
        currentJob.jobTitle = currentNodeContent;
    }

    if ([elementname isEqualToString:@"location"])
    {
        currentJob.shortAddress = currentNodeContent;
    }

    if ([elementname isEqualToString:@"companyName"])
    {
        currentJob.employer = currentNodeContent;
    }

    if ([elementname isEqualToString:@"results"])
    {
        [self.jobs addObject:currentJob];
        currentJob = nil;
        currentNodeContent = nil;
    }
} 
```

任何帮助将不胜感激......提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:44:58.473

您的`foundCharacters`方法应该将字符串附加到 NSMutableString 对象，因为它可以为单个值多次调用。在`didStartElement`中，初始化一个 NSMutableString 对象（我们称之为`elementContentString`），然后执行以下操作：

```
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)chars
{
    [self.elementContentString appendString:chars];
} 
```

在您的内容中`didEndElement`，您可以将内容作为字符串获取。请注意，您应该使用`[NSString stringWithString:self.elementContentString]`.

# iphone - 限制用户每天访问特定模块两次以上

> ID：12598664
> 
> 赞同：0
> 
> 时间：2012-09-26T09:31:40.513
> 
> 标签：iphone, ios, xcode, ipad

我的应用程序中有一个模块，我想每天只向用户授予两次访问权限。如果用户超过他们的限制，应用程序将通知他/她。

请给我一个解决方案，我怎样才能以最少的努力并且没有任何服务器端集成来做到这一点？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:35:54.833

尝试使用 [NSUserDefaults standardDefaults] 在其中存储一个 count 的键值对，其中 'count' 作为键，'count Value' 作为其值。当用户进入模块时，继续增加这个'count value'

# android - 我可以订阅我在 Android 上运行的 Python 脚本来获取广播事件吗？

> ID：12598670
> 
> 赞同：0
> 
> 时间：2012-09-26T09:31:55.173
> 
> 标签：android, python

简短介绍：我有一部 Android 手机和一个校园 WiFi 网络，每次连接时都需要输入相同的登录名和密码才能登录。所以我决定编写小脚本，它会自动完成。

但是，据我了解，我必须订阅 NETWORK_STATE_CHANGED_ACTION 事件，所以问题是 - 有没有办法在 Python 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:17:21.473

我没有明确的答案，但您可能想在这些地方寻找灵感：

*   [适用于 Android 的 Python](http://python-for-android.readthedocs.org/en/latest/)
*   [皮纽斯](http://pyjnius.readthedocs.org/en/latest/index.html)
*   [适用于 Android 的 Pygame 子集](http://pygame.renpy.org/)

# android - 围绕一个点将 imageView 旋转到一定程度

> ID：12598673
> 
> 赞同：2
> 
> 时间：2012-09-26T09:32:01.240
> 
> 标签：android, canvas, matrix, bitmap, imageview

我想围绕一个点旋转图像视图。imageview 指的是可绘制资源。

然后我将图像视图转换为位图，以便我可以在画布上绘制它。

借助[这个](https://stackoverflow.com/questions/2339429/android-view-getdrawingcache-returns-null-only-null)，我可以在画布上绘制可绘制对象

```
 imageView = new ImageView(this);
    imageView.setImageResource(drawable);
    imageView.setDrawingCacheEnabled(true);
    imageView.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED),
            MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
    imageView.layout(0, 0, imageView.getMeasuredWidth(), imageView.getMeasuredHeight());
    imageView.buildDrawingCache(true);
    Matrix matrix = new Matrix();
    matrix.setRotate(30,x, y);
    canvas.drawBitmap(imageView.getDrawingCache(), matrix, paint); 
```

矩阵不工作。图像在点 x、y 处没有旋转。

谁能告诉我我的代码中缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:24:55.070

第一次平移（固定）该点的矩阵，然后分别旋转到该点。

```
Matrix matrix = new Matrix();
matrix.setTranslate(x,y);
matrix.postRotate(30,x, y);
canvas.drawBitmap(imageView.getDrawingCache(), matrix, paint); 
```

# javascript - 几个元素上的 JQuery 弹出窗口

> ID：12598674
> 
> 赞同：0
> 
> 时间：2012-09-26T09:32:03.837
> 
> 标签：javascript, jquery, asp.net-mvc, popup, orchardcms

我需要使用不同的 html 代码为多个元素（投影）创建弹出窗口。我在 ochard cms 上创建网上商店。我尝试为我的任务使用 JQuery 弹出插件，但它只能为第一个元素显示弹出窗口。如何为一页上的不同元素创建不同的弹出窗口？

PS：所以，我为 Orchard CMS 编写了模块。

现在我有 div：

```
<div id="@Model.Name"> </div> 
```

和按钮：

```
<input type="button" onclick="alert('@Model.Name');" /> 
```

它有效。我尝试了几个插件（例如 LightBox），但都不起作用。

# javascript - Same function on multiple div classes doesn't work

> ID：12598679
> 
> 赞同：0
> 
> 时间：2012-09-26T09:32:17.380
> 
> 标签：javascript, jquery

I'm doing something terribly wrong and just can't find the solution for it.

**Situation:** I've got a number of products with a number of quotes per product. Those quote automatically scroll in a div. If the scroll reaches the last quote is scroll back to the first one.

**What works:** The function basically works when it's applied on 1 div, but when applied on multiple div it doesn't scroll back to the first one or keeps scrolling endlessly.

This is the function i've written for this:

```
function quoteSlide(divname){
$total = ($(divname+" > div").size())
$width = $total * 160;
$(divname).css('width', ($width));
console.log ($totalleft *-1);
if ($width - 160 > $totalleft *-1){ 
    $currentleft =  $(divname).css('left');
    $step = -160;
    $totalleft = parseInt($currentleft)+$step;
}else{
    $totalleft = 0;
}

$(divname).animate(
    { 
        left: $totalleft
    }, // what we are animating
    'slow', // how fast we are animating
    'swing', // the type of easing
    function() { // the callback
    }); 
```

}

It's being executed by something like: `quoteSlide('#quotecontainer_1');` in combination with a setInterval so it keeps scrolling automatically.

This is the jsFiddle where it goes wrong (So applied on more than 1 div) [http://jsfiddle.net/FsrbZ/](http://jsfiddle.net/FsrbZ/). This is the jsFiddle where everything goes okay. (applied on 1 div)

When changing the following:

```
 quoteSlide('#quotecontainer_1');
   quoteSlide('#quotecontainer_2');
setInterval(function() {
     quoteSlide('#quotecontainer_1');
     quoteSlide('#quotecontainer_2');
}, 3400);​ 
```

to

```
quoteSlide('#quotecontainer_1');

setInterval(function() {
     quoteSlide('#quotecontainer_1');
}, 3400);​ 
```

it does work... but only on 1 quotecontainer.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:42:18.297

[This works.](http://jsfiddle.net/Ysevq/) As already mentioned by Matei Mihai, the `$totalleft` variable was shared among the calls. Further, I have also moved the `setInterval` call into the `quoteSlide()`function, so you don't have to repeat yourself.

I have moved the variable into the `quoteSlide()` function, so every call gets its own instance of that variable.

Another thing about JavaScript:

*   Javascript is *not* PHP, you don't need to prefix your variables with a `$`-sign! Personally, I use the convention to prefix all jQuery objects with a `$`.

PS: You may want to remove the first call to `callback()`, to allow the visitor to actually read the first quote. I have included it because that's the way it worked in your original code.

* * *

```
function quoteSlide(divname) {
    var $totalleft = 0;
    var callback = function() {
        $total = ($(divname + " > div").size())
        $width = $total * 160;
        $(divname).css('width', ($width));
        if ($width - 160 > $totalleft * -1) {
            $currentleft = $(divname).css('left');
            $step = -160;
            $totalleft = parseInt($currentleft) + $step;
        } else {
            $totalleft = 0;
        }

        $(divname).animate({
            left: $totalleft
        }, 'slow', 'swing', function() {});
    };
    callback(); # <-- I would remove this
    setInterval(callback, 3400);
}

quoteSlide('#quotecontainer_1');
quoteSlide('#quotecontainer_2');​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:36:25.263

That's because your function uses the same `$totalleft` variable for all calls, so when you call the function multiple times, the number you store in the `$totalLeft` variable is not correct.

Check out this [http://jsfiddle.net/FsrbZ/3/](http://jsfiddle.net/FsrbZ/3/)

```
var $totalleft = new Array();
function quoteSlide(divname){
    $total = ($(divname+" > div").size())
    $width = $total * 160;
    $(divname).css('width', ($width));
    if ($width - 160 > $totalleft[divname] *-1){ 
        $currentleft =  $(divname).css('left');
        $step = -160;
        $totalleft[divname] = parseInt($currentleft)+$step;
    }else{
        $totalleft[divname] = 0;
    }

    $(divname).animate(
        { 
            left: $totalleft[divname]
        },
        'slow', 
        'swing',
        function() { 
        });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T09:44:53.190

Well, some were faster, but here's yet another solution, that's works: [http://jsfiddle.net/FsrbZ/6/](http://jsfiddle.net/FsrbZ/6/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T09:50:10.000

Try this

[http://jsfiddle.net/FsrbZ/10/](http://jsfiddle.net/FsrbZ/10/)

I added a if statement that resets the variable when it is less than -490 (when the counter gets to step 4)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T09:40:28.647

What's about

`$total = ($(divname+" div").size())` ?

[http://jsfiddle.net/SnakeEyes/FsrbZ/2/](http://jsfiddle.net/SnakeEyes/FsrbZ/2/)

Let me know if that is what you want

# visual-studio-2012 - InstallShield LE（使用 Visual Studio 2012）完全无法检测依赖项

> ID：12598684
> 
> 赞同：37
> 
> 时间：2012-09-26T09:32:44.450
> 
> 标签：visual-studio-2012, installshield-le

我正在做一场噩梦，试图让一个简单的安装程序在 InstallShield LE（VS 2012 附带的那个）中工作。有各种各样的问题我可以解决（比如我不能再做“全部重建”而不把一切搞砸——我需要在开发过程中简单地卸载 I​​nstallShield 项目）。但最重要的是，当我构建我的安装程序时，它包含了各种 DLL 的错误版本（包括我项目中的那些，以及 Entity Framework DLL 等第 3 方的）。

做一个“干净的解决方案”甚至没有解决我的解决方案中的 DLL 的问题。它在我机器上的某个地方（在某种编译器临时目录中）找到了一个随机版本，并坚持要包含它。我最终通过在 Windows 资源管理器中进行搜索并删除它找到的每个文件来解决这个问题，但我担心下次我发布它仍然会设法选择错误的文件。

另外，我需要在我的机器上同时安装 .NET 4 和 .NET 4.5 版本的 Entity Framework，它选择了错误的版本进入我的安装程序。我不能删除我不希望它包含的那个。

多么劣质的产品。我*可以*“升级”到完整版本，看看是否能解决这些问题，但我最近使用 LE 版本的经验让我再也无法使用他们的任何产品。

有没有其他人有类似的问题？你找到解决办法了吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-23T02:38:49.267

旧帖子，所以也许这可以帮助您或其他人解决这个令人发指的问题（假设您[**遇到 -6225 之**](http://kb.flexerasoftware.com/selfservice/microsites/search.do?cmd=displayKC&docType=kc&externalId=Q109708&sliceId=1&docTypeID=DT_ERRDOC_1_1&dialogID=148086752&stateId=0%200%20148080749)[类](http://kb.flexerasoftware.com/selfservice/microsites/search.do?cmd=displayKC&docType=kc&externalId=Q109708&sliceId=1&docTypeID=DT_ERRDOC_1_1&dialogID=148086752&stateId=0%200%20148080749)**的错误）。**

 **症状：

*   您可以毫不费力地（重新）构建每个项目，包括 Install Shield 项目
*   但是，如果您构建*解决方案*（多个项目的）错误似乎只是弹出

尝试：

*   在 VS 2012 中，右键单击您的解决方案并选择`Project Build Order`
*   即使顺序“看起来”正确，继续设置依赖项
    *   例如，您的安装项目取决于源项目（显然，但由于该工具不“知道”它需要一些帮助）。

我不确定这是否解决了“错误的 dll”问题（我还没有经历过那种痛苦……）但是检查项目输出的建议可能会有所帮助……以上确实解决了我的问题。

是的，我同意，如果它甚至无法与**VS2010 及以下** *设置和部署*项目的易用性相提并论，那么它就是开发人员必须处理的另一个学习曲线之一（浪费时间）。~~虽然不准备称它为伪劣，但它确实有一些不错的（r）糖果 - 甚至是“有限”版本~~......

无论如何，我希望这会有所帮助....

## 更新 1

**是的，我确实可以正式称 ISLE 为劣质品**。我现在正经历着可怕的“缺少 dll”（忘记错误的 dll，它们甚至不在 intall 文件夹中，请原谅五颜六色的语言，但是 WTF??!!）问题。ISLE 无法识别正确的依赖关系——我不同意前面的答案。这个问题在我们自 VS 2005 以来的内置中**不存在。**`Setup and Deployment Project`

同意关于傻瓜 MS 移动的评论。

一旦我解决了这个问题，我会更新。

## 更新 2

我的修复（如果有更好的方法，请提供答案）.. 所有这些都在 ISLE UI 中完成：

1.  扫描依赖项-右键单击项目*主输出*，选择`Dependencies from scan at build` ![第 1 步扫描以查看缺少的依赖项](../Images/a0788f85e25920edfc3d23f17eb3127c.png)

2.  您将看到必须**手动添加**的依赖项，由红色图标指示 ![步骤 2 识别缺失的依赖项](../Images/37cf29e3c76ef3c62c3321d1b05f953a.png)
    我未选中它们，因此我可以摆脱**-6248 警告**，这真的很奇怪，因为恕我直言，这**应该是**构建中的致命错误 - 如何安装/setup 如果缺少依赖项可能会起作用？？*警告*会继续构建，但它永远**不会起作用**！

3.  然后（是）**手动**添加您在上面确定的依赖项...

顺便说一句，不确定这是否重要 - 我通过使用 ISLE ( -> )**导入**VS 2010 安装项目来开始整个过程​​。我不确定这是否真的重要 - re：如果你从头开始（而不是导入）它仍然能够吗？`ISLE menu``Visual Studio Deployment Project Import Wizard``Dependencies from scan at build`

VS2012 的设置和部署中的“进展”如此之多......

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-16T13:26:47.023

我最近遇到了您描述的问题：控制台应用程序正确构建，`bin`目录中具有最新版本的依赖项，但是当与 InstallShield LE 打包时，使用旧版本的依赖项 DLL。

正如你所说：

> 做一个“干净的解决方案”甚至没有解决我的解决方案中的 DLL 的问题。它在我机器上的某个地方（在某种编译器临时目录中）找到了一个随机版本，并坚持要包含它。

就我而言，有问题的文件位于[ASP.NET 动态编译缓存](http://msdn.microsoft.com/en-us/library/ms366723.aspx "MSDN 链接")中`C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root``C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\root`

清除这些目录的内容解决了这个问题。

顺便说一句，我考虑过添加一个构建操作来自动清空这些目录，但是如果没有所有权权限，我就无法自动执行此操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T07:13:37.877

每个设置工具都有其问题。请注意，没有工具可以准确检测您的应用程序依赖项。工具能做的最好的事情就是提出建议。这就是为什么大多数安装开发人员自己确定依赖关系并手动将它们包含在安装程序中的原因。

如果您对 InstallShield 不满意，可以尝试不同的设置工具：[http ://en.wikipedia.org/wiki/List_of_installation_software](http://en.wikipedia.org/wiki/List_of_installation_software)

Advanced Installer 的免费版本包括一个[Visual Studio 安装项目](http://www.advancedinstaller.com/user-guide/tutorial-ai-ext-vs.html)，它可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-13T20:19:01.857

我的 DLL 有问题。它正在从某个地方抓起一个年纪大得多的人。GAC 中没有此 DLL 的内容。我什么都试过了。最后，我只是通过右键单击并选择添加在“文件”部分手动添加了该死的东西（ISLE）。我在我的 \obj\Release 文件夹中找到了 DLL。然后我再次构建了版本（SingleImage），一切正常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-09T06:32:29.550

您可以通过右键单击项目和发布向导将 exe 创建为单个图像或您选择的任何内容来发布您的项目，而不是使用安装屏蔽，最后它会处理所有依赖项..所以当安装由发布向导创建的 exe 时，它​​会自动安装所有依赖项，例如 .net 框架，如果您的应用程序需要某些运行时框架，它会提醒您安装该框架。

你可以看看这个

[http://msdn.microsoft.com/en-IN/library/31kztyey.aspx](http://msdn.microsoft.com/en-IN/library/31kztyey.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-09T00:31:52.033

您可以通过右键单击解决方案 -> 项目依赖项 -> 选择您的设置项目并检查它使用的项目来修复构建顺序问题（例如当您尝试重建解决方案时）。（在VS2013中测试）

我希望 InstallShield 项目在您选择其源文件时自动设置这些依赖项，但显然它没有。**

# android - 在android的SurfaceView上渲染字节数组

> ID：12598685
> 
> 赞同：1
> 
> 时间：2012-09-26T09:32:46.523
> 
> 标签：android, bytearray, surfaceview, android-canvas, surfaceholder

嗨，我有一个原始图像转储，我存储为字节数组，我必须在表面视图上显示它。我试图将此字节数组转换为可变位图并在表面支架的画布上渲染，但在调用“drawBitmap”函数时出现此空指针异常。

> BlockquoteE/AndroidRuntime(28358): 致命异常: main E/AndroidRuntime(28358): java.lang.NullPointerException E/AndroidRuntime(28358): at android.graphics.Canvas.throwIfRecycled(Canvas.java:1025) E/AndroidRuntime(28358) ): 在 android.graphics.Canvas.drawBitmap(Canvas.java:1065) 块引用

这就是我尝试渲染字节数组的方式

```
 public void surfaceCreated(SurfaceHolder holder) {
         // TODO Auto-generated method stub
              //getting byte array
              byte[] bytes;
    File f1= new File("/data/dump.txt");
    int offset = 0, n = 0;
    InputStream in;
    long length = f1.length();
    bytes = new byte[(int) length];

          try {

          in = new FileInputStream(f1);

           while (offset < bytes.length
                && (n = in.read(bytes, offset, bytes.length - offset))  >= 0) {
            offset += n;

           }
        in.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

              // getting byte array
                Bitmap bmp;
    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inMutable = true;
    bmp = BitmapFactory.decodeByteArray(bytes, 0, bytes.length,options );
              Canvas  canvas = holder.lockCanvas();
            if(canvas != null){

                canvas.drawBitmap(bmp, 0, 0, null); 

              }
            holder.unlockCanvasAndPost(canvas); //finalize          

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T10:00:32.453

您的字节数组`bytes`永远不会被实例化。因此，当您调用 时`BitmapFactory.decodeByteArray`，它会返回`null`。

来自[Android 参考](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeByteArray%28byte%5B%5D,%20int,%20int,%20android.graphics.BitmapFactory.Options%29)：

> *public static Bitmap decodeByteArray (byte[] data, int offset, int length, BitmapFactory.Options opts)*
> 
> **自：API 级别 1**
> 从指定的字节数组中解码不可变位图。
> ...
> 
> **返回**
> 解码的位图，如果图像数据无法解码，则返回 null，或者，如果 opts 不为 null，则如果 opts 请求仅返回大小（在 opts.outWidth 和 opts.outHeight 中）

# android - 使用busybox在后台安装apk

> ID：12598687
> 
> 赞同：8
> 
> 时间：2012-09-26T09:32:49.243
> 
> 标签：android, busybox, android-install-apk

我可以在有根设备上使用busybox在后台安装apk吗？？？

我看到类似的东西，但它不起作用

```
process install;
CommandCapture command = new CommandCapture(0, "chmod 777 /data/app");
RootTools.getShell(true).add(command).waitForFinish(); 
CommandCapture command2 = new CommandCapture(0, "chmod 777 /system/xbin/busybox");
RootTools.getShell(true).add(command2).waitForFinish();
install = Runtime.getRuntime().exec("/system/xbin/busybox install " + Environment.getExternalStorageDirectory() + "/Download/" + "xxx.apk /data/app/xxx.apk"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:33:16.893

不使用busybox

```
install = Runtime.getRuntime().exec("su");   
DataOutputStream os = new DataOutputStream(install.getOutputStream());  
os.writeBytes("pm install "+APKFile.apk+"\n");  
os.writeBytes("exit\n"); 
os.flush();
install.waitFor(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T09:37:49.367

看起来您为您的busybox二进制文件使用了两条路径。首先你`chmod`在里面`/system/xbin`，然后你从里面调用它`system/bin`。确保您使用正确的路径。而且`chmod 777 /data/app`看起来**很糟糕**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T02:48:52.740

如果您`su -c pm install myapp.apk`在 root shell 中运行，您应该能够在后台安装（注意“pm”）部分。这与busybox无关，你可以使用任何shell，当然也不需要更改`/data/app`.

# c# - 方法不返回字符串值c#

> ID：12598688
> 
> 赞同：0
> 
> 时间：2012-09-26T09:32:50.783
> 
> 标签：c#, list

```
public List<string>  Test_IsDataLoaded()
    {
        try
        {
            if (GRIDTest.Rows.Count != 0)
            {
                int countvalue = GRIDTest.Rows.Count;
                GRIDTest.Rows[0].WaitForControlReady();

                List<string> ReleaseIDList = new List<string>();

                int nCellCount = GRIDTest.Cells.Count;

                for(int nCount = 0;nCount<nCellCount ;nCount++)
                  {
                        if(nCount %5==0)
                        ReleaseIDList.Add((GRIDTest.Cells[0].GetProperty("Value").ToString()));
                  }
                return ReleaseIDList;    
             }

        }
        catch (Exception)
    {
    }
} 
```

方法向我抛出错误 = 并非所有代码路径都返回一个值。代码有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:35:11.243

你的错误是：

> 并非所有代码路径都返回一个值

哪个是对的。`if`您只在语句中返回一个值：

```
if (GRIDTest.Rows.Count != 0) 
```

如果`GRIDTest.Rows.Count==0`。然后你不会返回一个值。

* * *

作为故障安全（如果您的代码错误，或者您的 if 语句不正确），您可以将以下内容添加到方法的最后一行：

```
return new List<string>(); 
```

这将确保如果没有进行其他返回，则将返回一个`List`空

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:34:09.633

您`return` 在方法的末尾添加

```
public List<string>  Test_IsDataLoaded()
    {
        try
        {
            if (GRIDTest.Rows.Count != 0)
            {
                int countvalue = GRIDTest.Rows.Count;
                GRIDTest.Rows[0].WaitForControlReady();

                List<string> ReleaseIDList = new List<string>();

                int nCellCount = GRIDTest.Cells.Count;

                for(int nCount = 0;nCount<nCellCount ;nCount++)
                  {
                        if(nCount %5==0)
                        ReleaseIDList.Add((GRIDTest.Cells[0].GetProperty("Value").ToString()));
                  }
                return ReleaseIDList;    
             }

        }
        catch (Exception)
    {
    }

return new List<string>() ;//<-------here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:35:55.500

编译器抱怨是因为如果发生异常或 if 语句返回 false，则不会执行 return 语句。

在方法的末尾添加一个默认的 return 语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T09:36:21.810

抱怨上述问题的原因是你没有从整个方法中返回值......它只返回`if condition`但如果它跳过`if statement`，将没有返回值。所以你必须确定返回值整个方法....

你可以这样做：

```
public List<string>  Test_IsDataLoaded()
{
   List<string> ReleaseIDList = new List<string>();
    try
    {
        if (GRIDTest.Rows.Count != 0)
        {
            int countvalue = GRIDTest.Rows.Count;
            GRIDTest.Rows[0].WaitForControlReady();
            int nCellCount = GRIDTest.Cells.Count;

            for(int nCount = 0;nCount<nCellCount ;nCount++)
              {
                    if(nCount %5==0)
                    ReleaseIDList.Add((GRIDTest.Cells[0].GetProperty("Value").ToString()));
              }

         }
    }
    catch (Exception)
    {
    }
    return ReleaseIDList;  
} 
```

# ios - 如何在 iOS6 中横向使用 iAds

> ID：12598692
> 
> 赞同：6
> 
> 时间：2012-09-26T09:33:07.327
> 
> 标签：ios, objective-c, ios6, iad

我正在使用 iOS6 SDK，目前苹果已弃用横向模式。有什么办法可以使用横向 iAd，因为我的游戏只在横向模式下运行。

谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-26T12:22:20.380

**Landscape** mode is not deprecated only the method

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

has been deprecated. Now you can use below methods:-

```
- (BOOL)shouldAutorotate
{
    return YES;
} 
- (NSUInteger)supportedInterfaceOrientations
{
  return  UIInterfaceOrientationMaskAll;
} 
```

# input - Mathematica 中未计算的整数输入

> ID：12598697
> 
> 赞同：1
> 
> 时间：2012-09-26T09:33:25.577
> 
> 标签：input, wolfram-mathematica, integer

我对数学有一个非常简单但令人讨厌的问题：

我需要/想要使用前导零输入符号

```
\[alpha]^0123 
```

甚至更简单

```
mysymbol[0123] 
```

然后我将其转换为我的内部表示

（使用 Notation 包和 IntegerDigits[] 或 Characters[]）

```
==> myrep[{0,1,2,3}] 
```

没有前导 0 的输入一切正常。

但无论我尝试什么（未评估 [] 或保持 []），mathematica（它是首要评估器？）都会转换整数

```
0123 => 123 
```

所以我的列表中将缺少 0

当然，我可以通过要求输入引号或逗号来避免这个问题，但这很不漂亮！

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T11:20:21.160

我用肯定的语气回答了这个问题，但我错了。`0123`正如我错误地回忆的那样，在解析过程中*不会*转换诸如`16^^8b`和之类的表达式。出于这个原因，我们不需要回退到繁重且笨拙的[CellEvaluationFunction](https://stackoverflow.com/a/5451304/618728)，而是可以使用更加用户友好的.`1*^6`*[`$PreRead`](http://reference.wolfram.com/mathematica/ref/$PreRead.html)*

 *这仍然有点危险，因为一旦定义为`$PreRead`，它会更改所有输入，甚至尝试更改`$PreRead`。例如，如果我们要设置`$PreRead = Null &`，则在重新启动内核之前无法输入其他命令。

据我了解，为了制定您想要的行为，我们可以使用：

```
mysymbol[s_String] := myrep[FromDigits /@ Characters@s]

$PreRead = # /. {RowBox[{"mysymbol", "[", digits_String, "]"}] | 
                 RowBox[{digits_String, "//", "mysymbol"}] |
                 RowBox[{"mysymbol", "@", digits_String}] /; 
                 StringMatchQ[digits, DigitCharacter ..] :> 
                 ToBoxes[ mysymbol@digits ]} &; 
```

测试：

```
mysymbol[0123] 
```

> ```
> myrep[{0, 1, 2, 3}] 
> ```*

# android - 网格视图中的最大项目数是多少

> ID：12598701
> 
> 赞同：0
> 
> 时间：2012-09-26T09:33:41.080
> 
> 标签：android, gridview, android-sdcard

我想在网格视图中显示 15,000 个项目（图像），我可以从 SD 卡在网格视图中一次加载所有图像吗？请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:38:56.760

如果这是您的要求，您可以编写代码一次加载所有 15,000 个。但是，我可以向您保证，在加载过多之前您会遇到 OutOfMemoryException。

为了解决这个问题，您应该延迟加载图像，因为这只会加载您需要的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:38:39.147

您可以实现延迟加载概念以在 gridview 中加载图像。获取所有图像路径或限制。最好是使用限制获取光标中的数据，并在屏幕上看到图像时将图像加载到图像视图中。你可以在适配器中实现这个东西来加载当前显示的图像。

查看链接

[http://blog.jamesbaca.net/?p=67](http://blog.jamesbaca.net/?p=67)

# jquery - jquery mobile或其他解决方案的自动完成时间输入

> ID：12598703
> 
> 赞同：0
> 
> 时间：2012-09-26T09:33:50.110
> 
> 标签：jquery, html, validation, mobile, timepicker

好的，我希望标题能解释得足够清楚，因为我发现很难就此提出一个好的问题。

简而言之，是否存在这样的 jquery/javascript 插件：用户可以在其中输入小时和分钟的文本框，例如“16:35”，但如果用户仅输入“16”，它会自动将其写入“16： 00" 改变焦点时。一般验证也会很好，比如只允许数字字符等。

这似乎是一个微不足道的问题，但我真的找不到任何现成的解决方案。

旁注：实际上，我正在使用 jquery mobile 制作一个移动网站，并且在尝试了许多不同的日期选择器和时间选择器（android 和 ios 看起来像等）但大多数都具有低兼容性，所以我将尝试使用上述方法。如果你们有任何其他解决方案，他们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:58:50.807

看看这个网站[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

```
$(function() {

    var availableTags = [

        "ActionScript",

        "AppleScript",

        "Asp",

        "BASIC",

        "C",

        "C++",

        "Clojure",

        "COBOL",

        "ColdFusion",

        "Erlang",

        "Fortran",

        "Groovy",

        "Haskell",

        "Java",

        "JavaScript",

        "Lisp",

        "Perl",

        "PHP",

        "Python",

        "Ruby",

        "Scala",

        "Scheme"

    ];

    $( "#tags" ).autocomplete({

        source: availableTags

    });

}); 
```

希望能帮助到你

# javascript - 在文件上传对话框中限制文件类型

> ID：12598704
> 
> 赞同：3
> 
> 时间：2012-09-26T09:33:56.367
> 
> 标签：javascript, flash, html, file-upload

我正在用 HTML5 构建一个应用程序，我需要一个能够过滤各种文件的文件上传器。

假设我有一个包含 1000 个文件的文件夹，其中 5 个具有`.xls`格式。一旦在上传窗口的 MIME 类型选择器中选择了该文件类型，我希望上传窗口过滤这些文件。

我知道 HTML5 有办法做到这一点，`<input type=file accept=jpg/images>`但由于它缺乏支持（在 IE 和 Safari 中没有），所以它不是一个选项。

我一直在网上寻找一个 jQuery 文件上传器，但据我所知，它只能在您点击上传按钮后检查文件类型，这无助于过滤可用的文件。

有没有办法使用 Flash 或 HTML5 技术来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T10:06:10.180

如果你想使用接受属性，你应该设置正确的 mime 类型： `accept="image/jpg,image/jpeg,image/png,image/gif,image/bmp,image/tiff"` 那是图像。但它在 IE 中不起作用，FF 可能会出现一些问题（人们说它只支持部分 mime 类型）

对于类似的任务，我正在使用[SWFUpload](http://code.google.com/p/swfupload/)。您可以在那里指定允许的文件列表，它只会在打开文件对话框中显示这些文件。~~[在这里](http://demo.swfupload.org/v220/index.htm)你可以看到它的演示~~

**更新：**正如@Nis 所提到的，演示现在包含在源包中：

> 我们提供了几个简单的演示来展示 SWFUpload 的工作原理。这些演示不是作为项目模板，而是作为实现 SWFUpload 的基本功能和方法的演示。它们包含在源包中。

# jquery - Jquery Tooltip 脚本简单又好用

> ID：12598707
> 
> 赞同：0
> 
> 时间：2012-09-26T09:33:59.820
> 
> 标签：jquery, tooltip

我搜索工具提示框架或脚本作为工具提示工作良好且易于使用，如果你能告诉我一些关于一个工具提示的工作正常，完美

我看到了一些脚本，但使用起来很复杂，并且都需要使用标题来插入信息，从标题标签中读取，我想要 jquery 中的工具提示，我可以将代码插入到 div 中 - 这个 div 有内容、图像、单词等 -并在我浏览链接等时显示它，我看到很多工具提示但不让我知道这个以及我如何告诉它，直到使用标题作为标签

感谢和问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:36:47.557

你可能想看看这里：

30 个 jQuery 工具提示：

[http://www.tripwiremagazine.com/2012/07/jquery-tooltip-plugin.html](http://www.tripwiremagazine.com/2012/07/jquery-tooltip-plugin.html)

或者

[http://cssglobe.com/easyest-tooltip-and-image-preview-using-jquery/](http://cssglobe.com/easiest-tooltip-and-image-preview-using-jquery/)

或者

[http://www.davidjrush.com/blog/2011/12/simple-jquery-tooltip/](http://www.davidjrush.com/blog/2011/12/simple-jquery-tooltip/)

# excel - 获取文件修改时间和名称

> ID：12598712
> 
> 赞同：1
> 
> 时间：2012-09-26T09:34:15.167
> 
> 标签：excel, directory, excel-2007, filetime

我有一个包含多个文件的目录，并希望从那里获取修改时间和文件名，以了解设定日期之间的修改时间。

我`=FILEDATETIME`在 Excel 2007 中尝试过，但它正在返回`#NAME?`，所以我假设该函数不存在。

这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:25:32.153

就使用 Excel 而言，有点作弊，但我发现通过命令提示符（`cmd`在程序中）最简单。CD 到所需的“文件夹”，然后`dir >list`. 在 Excel 中打开文件“列表”（啊，并非完全不相关！）并使用`=LEFT(A6,16)`in`B6`和`=MID(A6,37,200`* `)`in 进行解析`C6`。根据需要向下复制公式，然后按排序或筛选`ColumnB`，

*如果您使用长得离谱的文件名，请使用`200`.

在 1-2-3 中曾经有一个系统命令可以为您执行此操作（我很想念它）。

# java - 否则，如何使用 java 从 JSON 文件中删除重复元素？

> ID：12598713
> 
> 赞同：0
> 
> 时间：2012-09-26T09:34:16.553
> 
> 标签：java, json, duplicates, if-statement

在我的代码中找到的这个**开始来自我的 JSON 文件。**现在在我的 JSON 文件中，我有很多同名的“开始”。例如，在这个 JSON 文件中，我在开头有重复项（内容都为“audi”）：

```
{"rel": "AtLocation", "weight": 0.5, "dataset": "/d/dbpedia/en", "sources": ["/s/dbpedia/3.7"], "id": "0209765bf7185615ef242513f61ca0f61efe2a04", "features": ["audi AtLocation -", "audi - curitiba", "- AtLocation curitiba"], "end": "curitiba", "license": "/l/CC/By-SA", "uri": "/a/[AtLocation/,audi/,curitiba/]", "start": "audi", "context": "/ctx/all", "surfaceText": null}

{"rel": "AtLocation", "weight": 0.5, "dataset": "/d/dbpedia/en", "sources": ["/s/dbpedia/3.7"], "id": "5158d1cfce728efb3e42840d166ec06153a3d77d", "features": ["audi AtLocation -", "audi - ingolstadt", "- AtLocation ingolstadt"], "end": "unite_state", "license": "/l/CC/By-SA", "uri": "/a/[AtLocation/,audi/,ingolstadt/]", "start": "audi", "context": "/ctx/all", "surfaceText": null} 
```

这是我的 Java 代码：

```
String start = (String) jsonObject.get("start");  
StartVertex startV = new StartVertex(start);  
helloGraphDB.addVertex(startV); 
```

我不希望它添加相同“audi”的 2 次顶点，否则我该如何编写逻辑？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:23:23.323

`你可以使用arraylist来检查值是否已经插入到**addVertex**

喜欢 ：

```
ArrayList addedVertex_Val = new ArrayList();

```
 String start = (String) jsonObject.get("start");
    boolean shouldInsert = true;

    for (int al_length = 0; al_length < addedVertex_val.size(); al_length++) {
        String val = addedVertex_val.get(al_length).toString();
        if (val.equals(start)) {
            shouldInsert = false;
            break;
        }
    }

    if (shouldInsert) {
        StartVertex startV = new StartVertex(start);
        helloGraphDB.addVertex(startV);
        addedVertex_Val.add(startV);
    } 
```

`
            回答 #2

赞同：1

时间：2012-09-26T13:13:32.947

您也可以使用 HashMap 代替数组列表。

它比线性检查 ArrayList 更有效。

您只需检查 HashMap 中是否有开始（例如“audi”），如果没有，您可以将其添加到 Graph 和 HashMap，如果它已经存在于 HashMap 中，则可以跳过两者都添加。

```
String a = "{\"rel\": \"AtLocation\", \"weight\": 0.5, \"dataset\": \"/d/dbpedia/en\", \"sources\": [\"/s/dbpedia/3.7\"], \"id\": \"0209765bf7185615ef242513f61ca0f61efe2a04\", \"features\": [\"audi AtLocation -\", \"audi - curitiba\", \"- AtLocation curitiba\"], \"end\": \"curitiba\", \"license\": \"/l/CC/By-SA\", \"uri\": \"/a/[AtLocation/,audi/,curitiba/]\", \"start\": \"audi\", \"context\": \"/ctx/all\", \"surfaceText\": null}";
        String b = "{\"rel\": \"AtLocation\", \"weight\": 0.5, \"dataset\": \"/d/dbpedia/en\", \"sources\": [\"/s/dbpedia/3.7\"], \"id\": \"5158d1cfce728efb3e42840d166ec06153a3d77d\", \"features\": [\"audi AtLocation -\", \"audi - ingolstadt\", \"- AtLocation ingolstadt\"], \"end\": \"unite_state\", \"license\": \"/l/CC/By-SA\", \"uri\": \"/a/[AtLocation/,audi/,ingolstadt/]\", \"start\": \"audi\", \"context\": \"/ctx/all\", \"surfaceText\": null}";
        JSONParser p = new JSONParser();
        JSONObject jsonA = (JSONObject) p.parse( a );
        JSONObject jsonB = (JSONObject) p.parse( b );
        HashMap<String, Integer> map = new HashMap<String, Integer>();

        String start = (String) jsonA.get( "start" );
        System.out.println( "Does map contains 'audi' for start:" + map.containsKey( start ) );
        if( !map.containsKey( start ) )
        {
            map.put( start, 1 );
            System.out.println( "Adding to graph" );
        }
        System.out.println( "Does map contains 'audi' for start:" + map.containsKey( start ) );

        start = (String) jsonB.get( "start" );
        if( !map.containsKey( start ) )
        {
            map.put( start, 2 );
            System.out.println( "Adding to graph" );
        }

        System.out.println( "Does map contains 'audi' for start:" + map.containsKey( start ) ); 
```

我得到的输出：

```
Does map contains 'audi' for start:false
Adding to graph
Does map contains 'audi' for start:true
Does map contains 'audi' for start:true 
```

            回答 #3

赞同：0

时间：2012-10-01T07:46:47.470

```
package com.infinitegraph.samples.hellograph;

// Import all InfiniteGraph packages
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import com.infinitegraph.*;
import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;
import org.json.simple.parser.ParseException;
// Import SLF4J logging packages
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import com.infinitegraph.BaseVertex;
import java.util.HashMap;

public class HelloGraph
{

    public static void main(String[] args)
    {
                BufferedReader br = null;
                JSONParser parser = new JSONParser();

        // Set up logging for the HelloGraph class
        Logger logger = LoggerFactory.getLogger(HelloGraph.class);

        // Create null transaction, null graph database instance
        Transaction tx = null;
        GraphDatabase helloGraphDB = null;

        // Name for graph database and property file
        String graphDbName = "HelloGraph";
        String propertiesFileName = "HelloGraph.properties";    

        try
        {
            try
            {
                // Delete graph database if it already exists
                GraphFactory.delete(graphDbName, propertiesFileName);
            }
            catch (StorageException sE)
            {
                logger.info(sE.getMessage());
            }

            // HINT: Add code to create graph database and its contents
            // Create graph database
            logger.info("> Creating graph database ...");
            GraphFactory.create(graphDbName, propertiesFileName);

            // Open graph database
            logger.info("> Opening graph database ...");
            helloGraphDB = GraphFactory.open(graphDbName, propertiesFileName);

            // Begin transaction
            logger.info("> Starting a read/write transaction ...");
            tx = helloGraphDB.beginTransaction(AccessMode.READ_WRITE);

            //create head vertex
            HeaderVertex head = new HeaderVertex("JSON File");
            helloGraphDB.addVertex(head);

            try {
                String sCurrentLine;

                br = new BufferedReader(new FileReader("C:/Users/ji/Desktop/example3.json"));

                HashMap<String, Integer> map = new HashMap <String, Integer>();

                while ((sCurrentLine = br.readLine()) != null) {

                    Object obj;

                    try {
                        obj = parser.parse(sCurrentLine);
                        JSONObject jsonObject = (JSONObject) obj;

                        //code to create vertex
                        logger.info("> Creating Start vertices ...");     
                        String start = (String) jsonObject.get("start");
                        StartVertex startV = new StartVertex(start);
                        if (!map.containsKey(start))
                        {
                            map.put(start,1);
                            helloGraphDB.addVertex(startV); 
                        }

                        //System.out.println(end);
                        String end = (String) jsonObject.get("end");
                        EndVertex endV = new EndVertex(end);
                        helloGraphDB.addVertex(endV);

                        String rel = (String) jsonObject.get("rel");
                        //System.out.println(rel);
                        logger.info("> Creating Relationship edge ...");
                        Relationship relationship1 = new Relationship("");
                        Relationship relationship2 = new Relationship(rel);

                        // Connect edges
                        logger.info("> Connecting vertices ...");
                        startV.addEdge(relationship1, head, EdgeKind.BIDIRECTIONAL, (short) 0);
                        endV.addEdge(relationship2, startV, EdgeKind.BIDIRECTIONAL, (short) 0);

                    } catch (ParseException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }

            } catch (IOException e) {
                e.printStackTrace();
            } finally {
                try {
                    if (br != null)br.close();
                } catch (IOException ex) {
                    ex.printStackTrace();
                }
            }

            // Specify a named root for traversal
            logger.info("> Naming a root vertex ...");
            helloGraphDB.nameVertex("JSON File", head);

            // Commit to save your changes to the graph database
            logger.info("> Committing changes ...");
            tx.commit();
        }

        catch (ConfigurationException cE)
        {
            logger.warn("> Configuration Exception was thrown ... ");
            logger.error(cE.getMessage());
        }

        finally
        {
            // If the transaction was not committed, complete
            // will roll it back
            if (tx != null)
                tx.complete();
            if (helloGraphDB != null)
            {
                helloGraphDB.close();
                logger.info("> On Exit: Closed graph database");
            }
        }
    }

}

// HINT: Add class definitions for Person and Meeting classes here.
class HeaderVertex extends BaseVertex
{
    private String header;

    public HeaderVertex (String header)
    {
        setStartName(header);
    }

    public void setStartName (String header)
    {
        markModified();
        this.header = header;
    }

    public String toString()
    {
        fetch();
        return this.header;
    }
}

class StartVertex extends BaseVertex
{
    private String start;

    public StartVertex (String start)
    {
        setStartName(start);
    }

    public void setStartName (String start)
    {
        markModified();
        this.start = start;
    }

    public String toString()
    {
        fetch();
        return this.start;
    }
}

class EndVertex extends BaseVertex
{
    private String end;

    public EndVertex (String end)
    {
        setEndVertex(end);
    }

    public void setEndVertex (String end)
    {
        markModified();
        this.end = end;
    }

    public String toString()
    {
        fetch();
        return this.end;
    }
}

class Relationship extends BaseEdge
{
    private String rel;

    public Relationship (String rel)
    {
        setRelationship(rel);
    }

    public void setRelationship (String rel)
    {
        markModified();
        this.rel = rel;
    }

    public String toString()
    {
        fetch();
        return this.rel;
    }
} 
```

```

# authentication - Symfony2：创建注销链接

> ID：12598718
> 
> 赞同：11
> 
> 时间：2012-09-26T09:34:24.813
> 
> 标签：authentication, symfony, logout

我在我的 symfony2 项目中管理用户。我能够毫无问题地登录和注销。现在，我想创建一个注销链接（而不是键入 app_dev.php/logout）。

我试过了

```
<a href="/logout">Logout</a> 
```

但是这个链接正在删除 app_dev.php 并且我只有 /logout 不存在。

这是我的security.yml

```
security:
  encoders:
    MDPI\BackendBundle\Entity\Users:
      id: mdpi.backend.backendencoder.class

  providers:
    secured_area:
     entity: { class: MDPI\BackendBundle\Entity\Users, property: email }

  firewalls:
    secured_area:
      pattern:    ^/
      anonymous: ~
      form_login:
        login_path:  /login
        check_path:  /login_check
      logout:
         path:   /logout
         target: /

  access_control:
    - { path: ^/(?!login)(.*), role: ROLE_admins }
    - { path: /login.*, role: IS_AUTHENTICATED_ANONYMOUSLY } 
```

非常感谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-26T09:37:24.983

我以这种方式创建了链接：（我使用 TWIG）

```
<a href="{{ path('user_logout') }}">Logout</a> 
```

在我的“UserBundle”中，在 routing.yml 文件中添加

```
user_logout:
       pattern:   /logout 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-06-01T14:25:38.300

当您使用 FOSUserBundle 时，您可以使用

```
{{ path('fos_user_security_logout') }} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-08-02T11:00:56.490

从 Symfony 2.7 开始，您可以使用 Twig[`logout_path`](http://symfony.com/doc/current/reference/twig_reference.html#logout-path)或[`logout_url`](http://symfony.com/doc/current/reference/twig_reference.html#logout-url)函数。

# c# - DropDownList 中的 ASP.Net MVC 3 全名

> ID：12598731
> 
> 赞同：0
> 
> 时间：2012-09-26T09:34:58.787
> 
> 标签：c#, asp.net-mvc-3, linq-to-entities, selectlist, html.dropdownlistfor

我对此有点困惑，需要一些帮助。我正在使用 Entity Framework 4.1 开发一个 ASP.Net MVC 3 Web 应用程序。

我的一个 Razor 视图上有一个 DropDownList，我希望显示一个全名列表，例如

```
Tom Jones 
Michael Jackson 
James Brown 
```

在我的控制器中，我检索用户对象列表，然后选择每个用户的名字和姓氏，并将数据传递给 SelectList。

```
List<User> Requesters = _userService.GetAllUsersByTypeIDOrgID(46, user.organisationID.Value).ToList();

var RequesterNames = from r in Requesters
                     let person = new { UserID = r.userID, FullName = new { r.firstName, r.lastName } }
                     orderby person.FullName ascending
                     select person;

viewModel.RequestersList = new SelectList(RequesterNames, "UserID", "FullName");

return View(viewModel); 
```

在我的 Razor 视图中，我有以下内容

```
@Html.DropDownListFor(model => model.requesterID, Model.RequestersList, "Select", new { @class = "inpt_a"})
@Html.ValidationMessageFor(model => model.requesterID) 
```

但是，当我运行代码时，出现以下错误

> 至少一个对象必须实现 IComparable。

我觉得好像我做错了，所以有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T09:36:26.657

在您的 LINQ 查询`FullName`中应该这样声明，否则 EF 不知道如何对您创建的匿名对象进行排序：

```
FullName = r.firstName + " " + r.lastName 
```

例子：

```
var RequesterNames = 
    from r in Requesters
    let person = new { UserID = r.userID, FullName = r.firstName + " " + r.lastName }
    orderby person.FullName ascending
    select person; 
```

# c - 访问 malloc 声明的数组

> ID：12598741
> 
> 赞同：7
> 
> 时间：2012-09-26T09:35:30.860
> 
> 标签：c, pointers

我正在处理一项任务（[另一个问题](https://stackoverflow.com/questions/12594208/c-program-to-determine-levels-size-type-of-cache)中的详细信息）。作为其中的一部分，我正在增加数组的大小。并发现当我尝试初始化一个数组时：

```
int arr[2097152]; // 8MB 
```

我遇到了分段错误...我认为是因为我试图声明一个太大的数组？然后我发现解决这个问题的方法是使用`malloc`. 但是对 C 来说是新手（主要使用 JavaScript/Python/Java ...）。我对指针和东西感到非常困惑......

我已经声明了一个 8MB 的数组：

```
int *arr = malloc (MBs * 1024 * 1024 / sizeof(int)); // MBs = 8 
```

但是现在......我如何访问它或写入它？当我使用它`arr`时，我是否获得了地址，如果我使用它，`*arr`我会获得第一个元素？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T09:37:43.937

像 一样使用它`arr[index]`，就像它被声明为一个数组一样。在 C 中，符号`x[y]`完全等价于`*(x + y)`. 这适用于数组，因为数组名称被转换为指向其第一个元素的指针。

```
int *arr = malloc (MBs * 1024 * 1024 / sizeof(int)); 
```

这不是一个好方法（并且不会使其达到您想要的大小），因为您手边没有元素的数量。您应该根据元素的数量声明它，例如，

```
#define ARR_LENGTH 2097152
int *arr = malloc (ARR_LENGTH * sizeof *arr); 
```

您需要乘以元素大小，因为 malloc 的参数是字节数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T09:38:01.417

> **我认为是因为我试图声明一个太大的数组？**

确实是的。您很可能在函数中执行此操作。其中阵列是在堆栈上的本地存储上创建的，通常堆栈不会大到足以满足这种大尺寸的需求。
通常的解决方案是使用动态内存。

> **我如何访问它或写入它？当我像`arr`获取地址一样使用它时，如果我使用它，`*arr`我会得到第一个元素？**

您可以通过使用运算符以与使用数组类似的方式访问它`[]`。

注意，

```
arr[i] == i[arr] == *(arr + i) == *(i + arr) 
```

所以，

```
arr[0] ---> Gives you first element
arr[1] ---> Gives you Second element
and so on... 
```

请注意，数组的名称有时会衰减为指向其第一个元素的指针，但数组和指针并不相同！

**好读：**

[如何在 C++ 中使用数组？](https://stackoverflow.com/questions/4810664/how-do-i-use-arrays-in-c)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-26T09:44:02.823

**是的，您可以像使用ARRAY**一样使用它。

```
int *arr = malloc (MBs * 1024 * 1024) ;
arr[0] = 1 ;
arr[6] = 675 ;
etc. ; 
```

* **arr = arr[0] ;** \第一个元素

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T09:41:34.473

该符号`a[i]`等同于`*(a + i)`（因此也等同于`i[a]`，因为加法是可交换的）。由于指针算法和数组到指针的衰减，您可以对数组和指针到数组元素使用此语法：

```
int a[10];
int * b = a + 4;
int * c = malloc(sizeof(int) * 100);

a[2];   // third element of a
b[1];   // sixth element of a
c[3];   // fourth element of the array starting at c

free(c);  // don't forget to clean up! 
```

至于您的第一个问题：自动变量的可用空间确实有限。溢出这个空间被称为......堆栈溢出。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-26T11:04:07.153

您还可以尝试将大数组作为静态变量放在堆栈区域之外。可能你不会再有段错误了。

# sql - 报告在 Server 2008 R2 上的 VS2008 中不显示数据？

> ID：12598742
> 
> 赞同：0
> 
> 时间：2012-09-26T09:35:33.253
> 
> 标签：sql, sql-server-2008, dynamics-crm-2011, reporting-services

我必须构建一个自定义报告，该报告采用报告上客户的姓名、地址和用户名的每个订单的订单线。

当我进行如下简单查询时：

```
SELECT FilteredSalesOrder.*, FilteredAccount.* 
FROM FilteredSalesOrder INNER JOIN FilteredAccount 
ON FilteredSalesOrder.customerid = FilteredAccount.accountid 
```

我检索数据，但只检索一行。当有更多时，预览不显示任何内容。这不是什么大问题，因为我一次只需要 1 个订单。

因此，对于我的 OrderReport，我需要每个订单的所有 OrderLines。该报告是按订单打印的，而不是同时为多个订单打印的。它看起来像这样： ![在此处输入图像描述](../Images/15a70c9abf23769dfa6bdaff983f4604.png)

我刚刚在订单报告中加入了 5 个需要数据的表。

```
SELECT FilteredSalesOrder.*, FilteredAccount.*, FilteredSalesOrderDetail.*, FilteredSystemUser.*, FilteredProduct.*
FROM ((((FilteredSalesOrder INNER JOIN FilteredAccount 
ON FilteredSalesOrder.customerid = FilteredAccount.accountid) INNER JOIN FilteredSalesOrderDetail 
ON FilteredSalesOrderDetail.salesorderid = FilteredSalesOrder.salesorderid) INNER JOIN FilteredProduct
ON FilteredProduct.productid = FilteredSalesOrderDetail.productid) INNER JOIN FilteredSystemUser
ON FilteredSystemUser.systemuserid = FilteredSalesOrder.ownerid) 
```

所以总结一下：

*   我的 SQL 查询是否正确？
*   当我上传一个简单的报告时，它给了我错误 rsInvalidDataSourceReference。我知道这个问题意味着什么，但我需要做些什么来解决它。
*   我如何确保在报告中，订单行表根据需要不断增长以包含所有订单行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:00:55.763

*   我的 SQL 查询是否正确？

它返回了一个错误，因为查询返回了超过 665 列，显然 SQL 无法处理。

*   当我上传一个简单的报告时，它给了我错误 rsInvalidDataSourceReference。我知道这个问题意味着什么，但我需要做些什么来解决它。

当您在 notepad++ 中打开报告时，可以通过调整连接字符串来解决这个问题，您可以更改它以匹配您的生产环境。

*   我如何确保在报告中，订单行表根据需要不断增长以包含所有订单行？

当您在 SQL Server 上使用 Visual Studio 2008 的报表向导制作报表时，报表会自行处理这些内容。如果您从数据集中拖放字段。该报告将仅采用它找到的第一条记录。

# c# - 在 ViewEngine ASP.NET MVC 3 中获取属性值

> ID：12598759
> 
> 赞同：1
> 
> 时间：2012-09-26T09:36:26.987
> 
> 标签：c#, asp.net-mvc, attributes, controller

我正在编写自己的视图引擎。

```
public class MyViewEngine : RazorViewEngine
{

    public override ViewEngineResult FindView(ControllerContext controllerContext, string viewName, string masterName, bool useCache)
    {
        // Here, how do I get attributes defined on top of the Action ?
    }    
} 
```

[自定义视图引擎中的 ASP.NET MVC 自定义属性](https://stackoverflow.com/questions/2976433/asp-net-mvc-custom-attributes-within-custom-view-engine)

上面的 SO 问题有如何获取在控制器之上定义的属性。但我需要在 Action 上定义属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T10:10:06.917

```
public class MyViewEngine : RazorViewEngine
{
    public override ViewEngineResult FindView(ControllerContext controllerContext, string viewName, string masterName, bool useCache)
    {
        var controllerType = controllerContext.Controller.GetType();
        var actionDescriptor = 
            new ReflectedControllerDescriptor(controllerType)
            .FindAction(
                controllerContext, 
                controllerContext.RouteData.GetRequiredString("action")
            );
        var attributes = actionDescriptor.GetCustomAttributes(typeof(...), false);

        // TODO: do something with the attributes that you retrieved
        // from the current action
    }    
} 
```

# c# - DataTemplate 图像与字节数组的结合

> ID：12598764
> 
> 赞同：0
> 
> 时间：2012-09-26T09:36:44.547
> 
> 标签：c#, wpf, xaml, data-binding

图片会在数据库中存储为 Image 并作为字节数组自动检索到 DataTemplate Image 吗？

```
<DataGridTemplateColumn Header="Image">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Image Height="10" Width="10" Source="{Binding Picture}" Stretch="Uniform"></Image>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:40:53.570

[`IValueConverter`](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)在绑定中使用一个。

# asp.net-mvc - 无法连接到远程服务器 - 可以使用 jQuery，HttpWebRequest .NET 失败

> ID：12598765
> 
> 赞同：0
> 
> 时间：2012-09-26T09:36:45.000
> 
> 标签：asp.net-mvc, web-services, tomcat, azure, httpwebrequest

我在 Azure 中设置了一个 ASP.NET MVC 项目，它们将连接到我的 Tomcat 网络服务。

在控制器中，我对 web 服务执行 HttpWebRequest，但是当我访问 Azure 中的网站时，我收到以下消息：

> System.Net.WebException：无法连接到远程服务器---> System.Net.Sockets.SocketException：试图以访问权限禁止的方式访问套接字

如果我在 MVC 视图中向服务器发出 jQuery 请求，我会从 web 服务中收到一条消息。

问题是网络服务还是 CORS（跨源资源共享）问题？

有人有想法/解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:31:27.640

A`HttpWebRequest`在服务器上执行，而 jQuery 请求在客户端本地执行。在对您的问题的评论中，我可以看到您正在尝试访问本地 IP 地址：192.168.50.205。这解释了为什么 jQuery 请求有效而`HttpWebRequest`无效：您可以从您的计算机访问该 IP 地址，因此本地 jQuery 请求有效，但您的服务器无法访问该 IP 地址，因此`HttpWebRequest`失败。

# c# - C# Winform 如何生成修复字符？

> ID：12598766
> 
> 赞同：0
> 
> 时间：2012-09-26T09:36:46.443
> 
> 标签：c#, winforms, c#-4.0, if-statement, for-loop

我生成数字 8,9,A,B (Int64)

**但是我需要**

00000008

00000009

0000000A

0000000B

000001ED

**此代码：**

```
 int count = 1;
        sb = new StringBuilder();
        sb.Append("SELECT max(Numb) FROM tblAs");

        string sql = sb.ToString();
        cmd.CommandText = sql;
        cmd.CommandType = CommandType.Text;
        cmd.Connection = Conn;
        count = (int)cmd.ExecuteScalar();
        int newCount = count;
        int i;

        for (i = 0; i < dataGridView1.Rows.Count; i++)
        {
            if (dataGridView1.Rows.Count > 0)
            {
                newCount = newCount + 1;

                Int64 numTag;
                string cTag = Convert.ToString(newCount);
                numTag = Int64.Parse(cTag);
                cTag = numTag.ToString("X");

                if (cTag.Length < 8)
                {
                    int countchar = 8 - cTag.Length;
                    for (i = 1; i <= countchar; i++)
                    {
                        cTag = "0" + cTag;
                        dataGridView1.Rows[i].Cells[3].Value = cTag;
                    }
                }
            } 
```

**错误行：** dataGridView1.Rows[i].Cells[3].Value = cTag; **消息：**索引超出范围。必须是非负数且小于集合的大小。参数名称：索引

谢谢你的时间:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T09:40:38.943

节省一些工作并[使用 .NET Framework 的内置功能](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)：

```
// automatically pads the number with up to 8 leading zeros
cTag = numTag.ToString("X8"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T09:38:57.120

`i`您对**嵌套** `for`的 s使用相同的变量。

```
for (i = 0; i < dataGridView1.Rows.Count; i++) 
```

和

```
for (i = 1; i <= countchar; i++) 
```

这就是为什么你得到`Index was out of range. Must be non-negative and less than the size of the collection`

# joomla - joomla 2.5将默认值传递给新项目

> ID：12598769
> 
> 赞同：2
> 
> 时间：2012-09-26T09:36:57.583
> 
> 标签：joomla

我喜欢从后端列表视图中创建一个新项目。对于新项目，我想传递一个取决于当前列表（实际年份）的默认值。

我如何使用 Joomla 2.5 做到这一点？

我可以通过覆盖 add() 方法将值传递给当前控制器上的新项目的控制器（通过 JRequest::getInt('AValue') ）。

```
public function add()
{
    $AValue = JRequest::getInt('AValue');
    if($AValue == null)
    {
        $AValue = 2012;
    }
    parent::add();
} 
```

我试图获取模型并为其分配值，但 getModel() 方法返回的对象与最终视图中使用的对象不同。

任何想法如何获得新项目表格的价值？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:27:41.237

情况：有一个足球赛季期间的事件列表。如果我从列表中选择 Saison，我将获得另一个列表，其中包含所有分配给该 saison 的事件。Saison 期间的事件列表由以下人员调用：

com_mycomponent/view=eventlists&saisonid=2011

这将向我显示分配给 2011 赛季的所有事件的列表

现在我想为 2011 赛季创建一个新活动。

添加按钮将调用：eventlist.add

```
MyComponentControllerEventList extends JControllerForm 
```

在添加操作期间，我想以某种方式将 saison (2011) 传递给表单。

模型包含：

```
public function getTable($type = 'EventList', $prefix = 'MyComponentTable', $config = array())
{
    return JTable::getInstance($type, $prefix, $config);
}   

public function getForm($data = array(), $loadData = true) 
{       
// Get the form.        
$form = $this->loadForm('com_mycomponent.eventlist', 'eventlist', array('control' => 'jform', 'load_data' => $loadData));
if (empty($form))
{           
    return false;       
}       
return $form;   
}   

protected function loadFormData()   
{       
    // Check the session for previously entered form data.      
    $data = JFactory::getApplication()->getUserState('com_mycomponent.edit.eventlist.data', array());
    if (empty($data)){          
    // generate an empty item
        $data = $this->getItem();
    }       
    return $data;
} 
```

所以它是直截了当的。

视图也是一种默认值。

```
public function display($tpl = null) 
{
    // get the Data
    $form = $this->get('Form');
    $item = $this->get('Item');
    // Check for errors.
    if (count($errors = $this->get('Errors'))) 
    {
        JError::raiseError(500, implode('<br />', $errors));
        return false;
    }
    // Assign the Data
    $this->form = $form;
    $this->item = $item;

    // Display the template
    parent::display($tpl);
} 
```

对此有什么想法吗？谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:09:16.350

你可以试试这个-

[http://docs.joomla.org/API15:JRequest/setVar](http://docs.joomla.org/API15:JRequest/setVar)

```
public function add()
{
    $AValue = JRequest::getInt('AValue');
    if($AValue == null)
    {
        JRequest::setInt('AValue',date('Y'));
    }
    parent::add();
} 
```

# php - 如何在本地主机上使用 mail() 函数

> ID：12598772
> 
> 赞同：1
> 
> 时间：2012-09-26T09:36:59.170
> 
> 标签：php, localhost, sendmail, wampserver

我想在 wamp 服务器中使用我的站点邮件测试，但服务器端口错误显示。所以请建议我如何在我的本地主机服务器上使用 mail() 函数。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:41:09.717

如果你在 WampServer 下：配置你的 php.ini 文件

```
SMTP = 127.0.0.1
smtp_port = 25 
```

# c# - 可以使用 Elmah 代替 try/catch 吗？

> ID：12598773
> 
> 赞同：4
> 
> 时间：2012-09-26T09:37:01.843
> 
> 标签：c#, asp.net-mvc, elmah

我一直在将[Elmah](http://code.google.com/p/elmah/)用于 MVC 应用程序，我的问题是

使用 Elmah 时不写 try catch 语句是不好的做法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T12:09:38.523

ELMAH 用于记录未处理的异常。如果您可以处理异常，我强烈建议您这样做。

如果您仍想将异常记录到 ELMAH，您可以这样做：

```
try {
  ...
}
catch (Exception e) {
  Elmah.ErrorSignal.FromCurrentContext().Raise(e)
} 
```

# javascript - 带有一个连字符 (1-5) 的数字和带有单个空格的数字 (1 2 3 4 5) 的正则表达式

> ID：12598775
> 
> 赞同：1
> 
> 时间：2012-09-26T09:37:05.000
> 
> 标签：javascript, regex

我如何验证输入应该是两种指定格式的文本框..格式是

例如：1-5 或 1 2 3 4 5

请参阅我只想以上述两种方式输入数字（仅限数字）。像 1-5（中间没有空格）或像 1 2 3 4 5（中间只有一个空格）。我如何验证和避免除了这两种格式的条目使用正则表达式？

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:40:09.363

```
^(\d+)(-(\d+)|( \d+)+)?$ 
```

上述正则表达式应符合您的要求

当然，这是javascript！

```
var regex = /^(\d+)(-(\d+)|( \d+)+)?$/; 
```

验证：

```
if (regex.test(formValue))
{
    //Valid textbox value
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T09:41:42.750

```
^(\d+-\d+)|(\d+(\s\d+)*)$ 
```

让我解释：

*   `^`锚定到字符串的开头
*   然后我们`|`在以下之间进行交替：
    *   `\d+-\d+`匹配 1 位或多位数字，后跟连字符，后跟 1 位或多位数字
    *   `\d+(\s\d+)*`匹配一个数字后跟 0 个或多个空格和数字
*   `$`锚定到字符串的末尾

# f# - 无论如何 fsi.exe 可以在 .NET 3.5 上运行吗？

> ID：12598779
> 
> 赞同：2
> 
> 时间：2012-09-26T09:37:14.070
> 
> 标签：f#

我已经设法让 fsi.exe 变成 64 位......接下来我希望它能够加载/使用 .NET 3.5。有没有人想出办法做到这一点？

我发现了一些关于这个的过时的博客条目......但没有解决方案。

因为没有办法支持旧版本。如果我尝试将 .NET 3.5 DLL 加载到 FSI 中，我会收到以下错误

```
> let s = new SPSite("http://myserver/sites/test");;
System.PlatformNotSupportedException: Microsoft SharePoint is not supported 
with version 4.0.30319.269 of the Microsoft .Net
Runtime.
at Microsoft.SharePoint.Administration.SPConfigurationDatabase.get_Farm()
at Microsoft.SharePoint.Administration.SPFarm.FindLocal(SPFarm& farm, Boolean& isJoined)
at Microsoft.SharePoint.SPSite..ctor(String requestUrl)
at <StartupCode$FSI_0005>.$FSI_0005.main@()
Stopped due to error
> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:41:05.647

FSI 引用 .NET 4，因此无法在旧版本的 CLR 上运行它。SharePoint 是该规则的一个例外 - 通常*可以*加载引用旧 .NET 版本的程序集。一定有一些兼容性问题导致 SharePoint 团队明确禁用 .NET 4+ 上的加载。对于您尝试加载的大多数其他 .NET 3.5 程序集，我不希望出现这样的错误。

# jakarta-ee - EJB 注释问题

> ID：12598790
> 
> 赞同：2
> 
> 时间：2012-09-26T09:37:56.027
> 
> 标签：jakarta-ee, annotations, ejb, javabeans

我是 JavaEE 和 EJB 的新手。我用它做了我的前几个步骤，但有很多关于基本注释的东西，我不明白，不管我花多少时间在谷歌上搜索和阅读电子书。也许有人可以帮忙或向我推荐一个很好的解释。

@Stateful/@Stateless 我想我理解了基本概念。但是默认使用哪一个呢？

@ManagedBean/@Named @Named 注释是否与 @ManagedBean 相同，只是具有自定义名称？

@Sessionscoped/@Requestscoped 这些会干扰@Stateful/@Stateless 吗？在我的理解中，将@Stateless 与@Sessionscoped 配对是没有意义的，因为@Stateless bean 位于服务器上的这个“Bean-Pool”中，并且用于单方法调用而不是用于持久任务。基于这个逻辑，我认为拥有 @Requestscoped @Stateful bean 没有意义，因为在初始 HTTP-Request 之后，您的 Bean 与客户端“断开连接”。

我让我的程序正常工作，但是如果我做得很有效，如果我真的不知道自己在做什么，我现在怎么能这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T14:01:00.837

AD 1\. None 是“默认值”。必须将 EJB 声明为 EJB，您可以通过使用`@Stateless`、`@Stateful`、`@Singleton`、对其进行注释来做到这一点`@MessageDriven`。

如果您没有它们中的任何一个，那么它就不是 EJB，因此无法定义“默认”值。

`@ManagedBean`AD 2.事实上有两个： [javax.faces 一个](http://docs.oracle.com/javaee/6/api/javax/faces/bean/ManagedBean.html)和[javax.annotation 一个](http://docs.oracle.com/javaee/6/api/index.html?javax/annotation/ManagedBean.html)

坦率地说，我不知道`@ManagedBean`from`javax.annotation`真正使用在哪里。它声明 bean由容器管理，因此它的生命周期是受控的——但是是什么容器控制它呢*？*我不知何故觉得它已经过时了，因为有`@Named`EJB`javax.faces @ManagedBean`的注释和 CDI 注释——它们都将它们的注释类定义为*托管*但明确定义了管理它们的容器。

`@Named`定义了一个可以在 JSF 视图（UEL 表达式）中使用的 CDI bean。`@ManagedBean`定义了一个 JSF 托管 bean。通常它们可以互换使用，但您应该注意一些差异，例如，`@Named`您使用的 bean 不能被注释为 JSF `@ViewScoped`，因为`@ViewScoped`只能应用于 JSF 托管 bean。

AD 3\. 我认为您不应该将 CDI 范围与 EJB 范围混合使用。这是经常被混淆的东西，如果未来的 Java EE 解决这个问题，那就太好了。

EJB bean ( `@Stateless`/ `@Stateful`) 有自己的生命周期，CDI bean ( `@SessionScoped`, `@RequestScoped`) 有自己的生命周期。
我不确定通过混合这些注释你会得到什么 - 也许是一个例外，也许是一些黑魔法错误，或者它实际上可能按你想要的方式工作。
我猜它完全依赖于实现者，因为我不记得它在 EJB / CDI 规范中定义。我不会依赖它。

# javascript - jquery中switch条件下多变量的访问控制

> ID：12598793
> 
> 赞同：0
> 
> 时间：2012-09-26T09:38:01.050
> 
> 标签：javascript, jquery, javascript-events

对于我的表格中的所有 5 个问题，如果元素是真实条件，如何获得计数....

```
 var count1 = 0, 
            a1 = $('form[name="myForm"]').find('select[name=drop1]').val(),
            a2 = $('form[name="myForm"]').find('select[name=drop2]').val(),
            a3 = $('form[name="myForm"]').find('select[name=drop3]').val(),
            a4 = $('form[name="myForm"]').find('select[name=drop4]').val(),
            a5 = $('form[name="myForm"]').find('select[name=drop5]').val();

for(i=1;i<=6;i++)
{
    switch(a[i])
             {
            case "2":
                alert("right");
                count++;
            break;
            case "1":
                alert("wrong");

            break;
            case "3":
                alert("wrong");

            break;
            case "4":
                alert("wrong");

            break;
            default:
                alert("wrong");
        }

} 
```

当所有选项都设置为 true（2 选项）时，请帮助我获得分数......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:40:19.833

```
var trueAnswers = 0;
$('form[name="myForm"] select[name^=drop]').each(function() {
  if (!!$(this).val()) trueAnswers++;
});

if (2 === trueAnswers) {
    alert('right');
} 
```

或者只是使用`filter()`

```
var trueAnswers = $('form[name="myForm"] select[name^=drop]').filter(function() {
   return (!!$(this).val()) 
});

if (trueAnswers.length === 2) {
   alert('right');
} 
```

# wordpress - 如何去除？从使用 htaccess 的 url

> ID：12598802
> 
> 赞同：0
> 
> 时间：2012-09-26T09:38:38.553
> 
> 标签：wordpress, apache, .htaccess, url, seo

我有一个 URL [http://www.domain.com/postname/?a_different_world](http://www.domain.com/postname/?a_different_world)

我需要将其更改为[http://www.domain.com/postname/a_different_world](http://www.domain.com/postname/a_different_world)

如何去除？从使用 Htacccess(Wordpress) 的 URL

我使用以下 htaccess 代码。但它不工作

```
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php-$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule . /domain.com/index.php [L]
RewriteRule ^/postname/([0-9]+)$ /? $1 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:56:30.777

规则匹配字符串会去掉查询字符串（? 之后的所有内容）。因此，您想放弃 ? 并明确使用这样的查询字符串（而不是你的最后一条规则）

```
RewriteCond %{QUERY_STRING} ^([\w\-]+)$
RewriteRule ^postname/$ postname/%1?   [L] 
```

请注意，您应该删除前导 / 因为这不会匹配，因为 .htaccess 规则匹配字符串会删除前导 /；还要注意 ? 在 QSA 标志的替换模式和省略中，因为您*不想*附加查询字符串。

还要将此规则移到上一个条件/规则之上，因为第二个规则将在您的邮件名称模式上触发，因此除非您将其向上移动，否则您将永远无法达到此规则。

# wso2 - 如何使用在 wsO2 G-Reg 中注册的服务

> ID：12598805
> 
> 赞同：0
> 
> 时间：2012-09-26T09:38:45.030
> 
> 标签：wso2

用例：

1）在tomcat服务器上运行的一个webservice说在machine1 2）我在wsO2 Greg上注册了这个webservice，registry正在机器2上运行3）我还通过registry附加了一个ws-security策略'UserNameToken'到服务。4) 现在我想使用 Eclipse 为 web 服务编写一个客户端

我创建了一个注册表客户端并检索了服务对象。我还能够获取该服务对象的附加策略。我的问题或疑问是如何使用已应用该策略的 Web 服务。

代码片段如下：

```
 Service[] services1 = serviceManager
                .findServices(new ServiceFilter() {
                    public boolean matches(Service service)
                            throws GovernanceException {

                        String version = service
                                .getAttribute("overview_version");
                        String name = service.getAttribute("overview_name");
                        String nameSpaceofService = service
                                .getAttribute("overview_namespace");
                        return (version != null
                                && version.equals(version_no)
                                && name.equals(sserviceName) && nameSpaceofService
                                .equals(nameSpace));
                    }
                });

        Service fastThoughtService = services1[0];
        Policy[] policyArray = fastThoughtService.getAttachedPolicies(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:05:43.347

您需要另一个服务客户端来使用在 tomcat 上发布的 Web 服务。Registry 只保留服务的元数据。您需要根据服务实现时的 WSDL 发布来生成或创建客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:38:56.757

据我所知，Greg 仅存储元数据，无法提供 Web 服务本身（无需安装 metiadion 功能）。您需要做的是在 ESB 中定义一个代理服务（在 GREG 中单独或安装 ESB 功能）

# java - 一个关于匿名类的 ClassCastException (java)

> ID：12598810
> 
> 赞同：5
> 
> 时间：2012-09-26T09:39:01.770
> 
> 标签：java, android, classcastexception, anonymous-class, monkey

现在我得到一些如下的日志（log-1）

```
java.lang.ClassCastException: android.widget.LinearLayout$LayoutParams cannot be cast to ClassA$1
at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:1010)
... 
```

1010行

```
final LinearLayout.LayoutParams lp = (LinearLayout.LayoutParams) obj.method();//line 1010 
```

我认为，日志应该是这样的（log-2）

```
java.lang.ClassCastException: ClassA$1 cannot be cast to android.widget.LinearLayout$LayoutParams 
```

我想知道为什么我会得到 log-1，对吗？
如果 log-1 是正确的，那么我该如何编写代码来创建这样的异常？

ps：我知道ClassA$1是一个匿名类。
ps：我在猴子测试中得到这个日志，很难重新出现

有人告诉我：

```
MyInterface my = ClassA$1;//$1 is an anonymous class which implements MyInterface
my.getClass().cast(lp); 
```

那么日志将像 log-1
但为什么日志没有指出“cast”方法行？
我检查了文件夹frameworks/base/core，没有人调用方法“？java.lang.Class.cast（Object obj）”
有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T10:16:16.477

我想不出这种行为的合乎逻辑的解释。如果事实与您报告的一样，那么我同意错误消息文本是错误的方法。

那么有哪些替代方案呢？

*   您可能误读了日志文件。
*   您可能正在查看源代码的错误版本。
*   您可能已经发现了一个错误……尽管对于像这样基本的东西来说这似乎不太可能。（理论上，该错误可能是来自 VM 的错误消息、堆栈跟踪中的错误行号，甚至是导致它执行错误类型转换的编译器错误。）
*   异常堆栈跟踪甚至有可能是假的……尽管这种解释近乎偏执。

我的建议是：

*   尝试在调试器下运行代码，并单步执行该部分代码以确认您对异常原因和来源的看法。
*   为这种行为创建一个 SSCE，看看其他人是否可以重现它。

# python - Python Envoy 不会以线程方式运行

> ID：12598814
> 
> 赞同：0
> 
> 时间：2012-09-26T09:39:37.317
> 
> 标签：python, multithreading

[我想在后台线程中从 python 启动此命令，同时使用envoy](https://github.com/kennethreitz/envoy)保持主程序线程运行：

```
envoy.run('python -m SimpleHTTPServer 9999') 
```

这有效，但挂起，它没有按应有的方式运行线程，所以当我完成后我不能杀死它。我试图将它包装成一个线程：

```
class FileServerThread(Thread):
    def __init__(self):
        Thread.__init__(self)
        self.process = None

    def run(self):
        self.process = envoy.run('python -m SimpleHTTPServer 9999')        

    def kill(self):
        self.process.kill 
```

但同样，这不起作用，因为 self.process 从未分配过（因为 envoy.run 没有结束也不会返回）。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:02:30.727

恐怕你做不到`run`，但你可以做到`connect`。

```
import envoy
p = envoy.connect("python -m SimpleHTTPServer 9999")
print "run here!"
p.kill() 
```

但是，之后`kill()`，我发现进程变成了僵尸，`p.block()`就解决了。

# java - 用java在图片中查找图片？

> ID：12598818
> 
> 赞同：22
> 
> 时间：2012-09-26T09:39:45.927
> 
> 标签：java, image-recognition

我想要的是以图片的形式分析来自屏幕的输入。我希望能够在更大的图像中识别图像的一部分，并在更大的图像中获取它的坐标。例子：

![盒子](../Images/4924037361c815681ab2b541d7b6f645.png)

必须位于

![大图](../Images/7f6d0c42faa41519e124cf254e9b1164.png)

结果将是大图中图片的右上角和大图中部分的左下角。如您所见，图片的白色部分无关紧要，我基本上需要的只是绿框。有没有图书馆可以为我做这样的事情？运行时并不是真正的问题。

我想要做的只是生成一些随机像素坐标并识别大图中该位置的颜色，以便稍后快速识别绿色框。如果中间的白框是透明的，它会如何降低性能？

这个问题已经在 SO 上被问过好几次了，因为它似乎没有一个答案。我发现我在[http://werner.yellowcouch.org/Papers/subimg/index.html](http://werner.yellowcouch.org/Papers/subimg/index.html)找到了一个解决方案。不幸的是它在 C++ 中，我什么都不懂。在 SO 上有一个 Java 实现会很好。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-30T14:40:52.357

这个问题通常很难回答，因为人们通常对什么算作图像匹配有不同的要求。有些人可能想要搜索可能与他们提供的模板图像具有不同大小或方向的图像，在这种情况下，需要使用不缩放或不旋转的方法。有多种选择，例如寻找相似的纹理、特征或形状，但我将专注于只寻找与模板图像处于完全相同位置的相似颜色像素的方法。这似乎最适合您的示例，该示例似乎属于[模板匹配](http://en.wikipedia.org/wiki/Template_matching)类别。

### 可能的方法

[在这种情况下，问题与互相关](http://en.wikipedia.org/wiki/Cross-correlation)和[卷积](http://en.wikipedia.org/wiki/Convolution)的信号处理概念密切相关，通常使用[FFT](http://en.wikipedia.org/wiki/Fast_Fourier_transform)实现，因为它非常快（它的名字！）。这是您[链接](http://werner.yellowcouch.org/Papers/subimg/index.html)到的方法中使用的内容，并且[FFTW](http://www.fftw.org/download.html)库在尝试这样的实现时可能很有用，因为它具有 Java 包装器。[正如在这个](https://stackoverflow.com/questions/8591515/how-do-i-detect-an-instance-of-an-object-in-an-image/8594330#8594330)问题以及著名的[waldo](https://stackoverflow.com/questions/8479058/how-do-i-find-waldo-with-mathematica)问题中所见，使用互相关非常有效。

另一种选择是不使用所有像素进行比较，而是仅使用更容易找到且更有可能独特的特征。这将需要一个特征描述符，如[SIFT](http://en.wikipedia.org/wiki/Scale-invariant_feature_transform)、[SURF](http://en.wikipedia.org/wiki/SURF)或许多[其他](http://docs.opencv.org/modules/features2d/doc/feature_detection_and_description.html)描述符之一。您需要找到两个图像中的所有特征，然后寻找与模板图像中位置相似的特征。使用这种方法，我建议您使用[JavaCV](http://code.google.com/p/javacv/)。

您提到的随机猜测方法应该在可能的情况下快速工作，但不幸的是它并不普遍适用，因为它仅适用于在正确位置附近产生紧密匹配的某些图像组合。

除非您使用外部库，否则 Java 中最简单的方法就是我所说的蛮力方法，尽管它有点慢。蛮力方法只涉及在整个图像中搜索与您正在寻找的图像最匹配的子区域。我将进一步解释这种方法。首先，您需要定义如何确定两个相同大小的图像之间的相似性。这可以通过对像素颜色之间的差异求和来完成，这需要定义 RGB 值之间的差异。

### 颜色相似度

确定两个 RGB 值之间差异的一种方法是使用欧几里德距离：

> `sqrt( (r1-r2)^2 + (g1-g2)^2 + (b1-b2)^2 )`

可以使用与 RGB 不同的颜色空间，但由于您的子图像很可能几乎相同（而不仅仅是视觉上相似），这应该可以正常工作。如果您有 ARGB 颜色空间并且您不希望半透明像素影响您的结果，您可以使用：

> `a1 * a2 * sqrt( (r1-r2)^2 + (g1-g2)^2 + (b1-b2)^2 )`

`a1`如果颜色具有透明度（假设和`a2`介于 0 和 1 之间），它将给出较小的值。我建议您使用透明度而不是白色区域并使用 PNG 文件格式，因为它不使用会轻微扭曲图像颜色的有损压缩。

### 比较图像

要比较大小相同的图像，您可以将它们的各个像素之间的差异相加。然后，此总和是差异的度量，您可以搜索图像中具有最低差异度量的区域。如果您甚至不知道图像是否包含子图像，这将变得更加困难，但这将通过具有高差异度量的最佳匹配来指示。如果需要，您还可以通过将其除以子图像的大小和最大可能的 RGB 差异 (sqrt(3) 与欧几里德距离和 RGB 值从 0 到 1 来将差异度量标准化为介于 0 和 1 之间）。零将是一个相同的匹配，任何接近一的东西都将尽可能不同。

### 蛮力实施

这是一个简单的实现，它使用蛮力方法来搜索图像。使用您的示例图像，它发现 (139,55) 的位置是具有最佳匹配的区域的左上角位置（看起来正确）。在我的 PC 上运行大约需要 10 到 15 秒，并且该位置的标准化差异测量值约为 0.57。

```
 /**
 * Finds the a region in one image that best matches another, smaller, image.
 */
 public static int[] findSubimage(BufferedImage im1, BufferedImage im2){
   int w1 = im1.getWidth(); int h1 = im1.getHeight();
   int w2 = im2.getWidth(); int h2 = im2.getHeight();
   assert(w2 <= w1 && h2 <= h1);
   // will keep track of best position found
   int bestX = 0; int bestY = 0; double lowestDiff = Double.POSITIVE_INFINITY;
   // brute-force search through whole image (slow...)
   for(int x = 0;x < w1-w2;x++){
     for(int y = 0;y < h1-h2;y++){
       double comp = compareImages(im1.getSubimage(x,y,w2,h2),im2);
       if(comp < lowestDiff){
         bestX = x; bestY = y; lowestDiff = comp;
       }
     }
   }
   // output similarity measure from 0 to 1, with 0 being identical
   System.out.println(lowestDiff);
   // return best location
   return new int[]{bestX,bestY};
 }

 /**
 * Determines how different two identically sized regions are.
 */
 public static double compareImages(BufferedImage im1, BufferedImage im2){
   assert(im1.getHeight() == im2.getHeight() && im1.getWidth() == im2.getWidth());
   double variation = 0.0;
   for(int x = 0;x < im1.getWidth();x++){
     for(int y = 0;y < im1.getHeight();y++){
        variation += compareARGB(im1.getRGB(x,y),im2.getRGB(x,y))/Math.sqrt(3);
     }
   }
   return variation/(im1.getWidth()*im1.getHeight());
 }

 /**
 * Calculates the difference between two ARGB colours (BufferedImage.TYPE_INT_ARGB).
 */
 public static double compareARGB(int rgb1, int rgb2){
   double r1 = ((rgb1 >> 16) & 0xFF)/255.0; double r2 = ((rgb2 >> 16) & 0xFF)/255.0;
   double g1 = ((rgb1 >> 8) & 0xFF)/255.0;  double g2 = ((rgb2 >> 8) & 0xFF)/255.0;
   double b1 = (rgb1 & 0xFF)/255.0;         double b2 = (rgb2 & 0xFF)/255.0;
   double a1 = ((rgb1 >> 24) & 0xFF)/255.0; double a2 = ((rgb2 >> 24) & 0xFF)/255.0;
   // if there is transparency, the alpha values will make difference smaller
   return a1*a2*Math.sqrt((r1-r2)*(r1-r2) + (g1-g2)*(g1-g2) + (b1-b2)*(b1-b2));
 } 
```

我没有看过，但也许这些 Java 图像处理库之一也可能有一些用处：

*   [马文项目](http://marvinproject.sourceforge.net/en/index.html)
*   [图像J](http://rsbweb.nih.gov/ij/docs/concepts.html)

如果速度真的很重要，我认为最好的方法是使用互相关或使用外部库的特征描述符的实现。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-26T10:10:52.493

您想要的是按掩码/边界查找图片块。

它可以在没有外部库的情况下完成。在底层，每张图片都是一个数字矩阵，你的掩码也是一个数字矩阵。您可以线性扫描大矩阵并找到遵循掩码定义的规则的区域。

**示例**：

大矩阵：

```
1 0 1 1 1 1 
0 1 0 1 0 0
0 0 0 1 1 1
0 1 1 0 0 0 
```

面具：

```
1 1 1
1 0 0
1 1 1 
```

应用此算法，您可以在右上角的大矩阵中检测匹配块，从而为您提供开始/结束矩阵索引，您可以以像素为单位计算这些值。

在实际问题中，您将没有数字集`[0, 1]`，而是更大 -`byte`例如 ( `[0, 256]`)。为了使算法更好地工作，匹配意味着不是精确的数字匹配，但可能存在一些偏差 +-5 或类似的东西。

# authentication - 如何为 Jekyll 站点提供登录功能？

> ID：12598822
> 
> 赞同：2
> 
> 时间：2012-09-26T09:40:14.557
> 
> 标签：authentication, jekyll, disqus

如何为 Jekyll 站点提供登录功能？

我不确定我是否在问正确的问题。基本上，我正在为 Intranet 设置 Jekyll 博客，当任何人（连接到 Intranet）在博客上发表评论时，我希望该站点使用 Windows 的用户名作为评论的显示名称。通过这种方式，我会知道哪个用户（连接到 Intranet）发布了哪个评论，并且我不希望评论者选择任何其他名称作为显示名称来阻止拖钓。可以做到吗？

我在想是否可以在发表评论之前强制发布者登录（并以某种方式验证 Windows 的认证），那么也许该用户名可以用作显示名称。我不确定这是否可能，因为我不知道 Jekyll 是否提供了那么大的灵活性。

我使用 Disqus 作为评论提供者。如果需要，我可以切换到合适的评论提供者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:02:09.263

Jekyll 是一个静态博客，所以它不能将动态数据显示为用户名。

编辑： Disqus 托管在 can 上，您使用 javascript 将其从云端带到您的静态 jekyll 驱动的网站。

所以如果你想做同样的事情，你必须构建一个完全在 jekyll 之外的应用程序，一个 Sign On Web Services，并在你的 jekyll 博客中使用 Javascript 查询它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:19:32.413

试试 Google/Facebook/Twitter api，使用这些 api 来授权您的客户端。

# python - 从 mongoengine 中的嵌入文档中删除值

> ID：12598832
> 
> 赞同：1
> 
> 时间：2012-09-26T09:40:46.277
> 
> 标签：python, mongodb, cherrypy, mongoengine

我有一个名为的文档`login_info`，其中包含以下字段：

```
class login_info(Document):
    user_name = StringField(max_length=120)
    password = StringField(max_length=120)
    email = EmailField()
    gender = StringField(max_length=120)
    date_of_birth = DateTimeField()
    visibility  = StringField(max_length=120)
    client_id = ObjectIdField(required=False)
    location = ListField(EmbeddedDocumentField("Tracking"))` 
```

在上述字段`location`中是一个嵌入文档，其中包含以下字段：

*   时间

*   纬度，

*   经度

我想从此嵌入文档中删除满足以下条件的值。

`time < system_datetime`.

以下是`login_info`文档中的示例数据：

```
{
    "_cls":"login_info",
    "_id":ObjectId("5046f43c12d0592e3f59e25d"),
    "_types":[
        "login_info"
    ],
    "date_of_birth":ISODate("2011-02-07T00:00:00 Z"),
    "email":"jack@gmail.com",
    "expire":1346827684,
    "gender":"male",
    "issue":1346827324,
    "key":"47d1e64e51dfa1cf99ce4a59e0c940",
    "location":[
        {
            "Latitude":"5615.3111",
            "_types":[
                "Tracking"
            ],
            "_cls":"Tracking",
            "Longitude":"1236.711",
            "time":ISODate("2012-09-13T12:24:36.051 Z")
        },
        {
            "Latitude":"000",
            "_types":[
                "Tracking"
            ],
            "_cls":"Tracking",
            "Longitude":"3.70",
            "time":ISODate("2012-09-25T18:30:57.756 Z")
        },
        {
            "Latitude":"11",
            "_types":[
                "Tracking"
            ],
            "_cls":"Tracking",
            "Longitude":"1",
            "time":ISODate("2012-09-26T10:25:29.157 Z")
        },
        {
            "Latitude":"11",
            "_types":[
                "Tracking"
            ],
            "_cls":"Tracking",
            "Longitude":"1",
            "time":ISODate("2012-09-26T10:40:58.895 Z")
        },
        {
            "Latitude":"11",
            "_types":[
                "Tracking"
            ],
            "_cls":"Tracking",
            "Longitude":"1",
            "time":ISODate("2012-09-26T10:54:08.361 Z")
        },
        {
            "Latitude":"11",
            "_types":[
                "Tracking"
            ],
            "_cls":"Tracking",
            "Longitude":"1",
            "time":ISODate("2012-09-26T11:08:55.873 Z")
        }
    ],
    "password":"jack",
    "refresh_token":"22580a8f69",
    "token":"bac8a5f863",
    "user_name":"jack",
    "visibility":"visible"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T15:59:26.233

如果要使用 MongoEngine 从文档中删除单个`location`嵌入文档，请执行以下操作：`login_info`

```
// add 
loc1 = Tracking( time=datetime(2011, 11, 5, 0, 0, 0) )
loc2 = Tracking( time=datetime(2012, 10, 5, 0, 0, 0) )

login = login_info( user_name='Mark', location=[loc1, loc2] )
login.save()

// remove locations from the location list
login.objects( title=user_name='Mark' ).update_one( pull__lt=datetime.now() ) 
```

注意：mongoengine 0.7.5 有一个[错误](https://github.com/MongoEngine/mongoengine/issues/144)，所以你必须从[https://github.com/MongoEngine/mongoengine下载最新版本](https://github.com/MongoEngine/mongoengine)

# eclipse - org.springframework.beans.factory.BeanNotOfRequiredTypeException

> ID：12598838
> 
> 赞同：1
> 
> 时间：2012-09-26T09:40:54.763
> 
> 标签：eclipse, spring, hibernate, tomcat, spring-mvc

在eclipse中使用tomcat和hibernate运行spring mvc应用程序并出现此错误。

```
exception

org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.beans.factory.BeanNotOfRequiredTypeException: Bean named 'org.springframework.transaction.interceptor.TransactionInterceptor#0' must be of type [org.aopalliance.aop.Advice], but was actually of type [org.springframework.transaction.interceptor.TransactionInterceptor]
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause

org.springframework.beans.factory.BeanNotOfRequiredTypeException: Bean named 'org.springframework.transaction.interceptor.TransactionInterceptor#0' must be of type [org.aopalliance.aop.Advice], but was actually of type [org.springframework.transaction.interceptor.TransactionInterceptor]
org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:360)
org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
org.springframework.aop.support.AbstractBeanFactoryPointcutAdvisor.getAdvice(AbstractBeanFactoryPointcutAdvisor.java:85)
org.springframework.aop.framework.adapter.DefaultAdvisorAdapterRegistry.getInterceptors(DefaultAdvisorAdapterRegistry.java:78)
org.springframework.aop.framework.DefaultAdvisorChainFactory.getInterceptorsAndDynamicInterceptionAdvice(DefaultAdvisorChainFactory.java:61)
org.springframework.aop.framework.AdvisedSupport.getInterceptorsAndDynamicInterceptionAdvice(AdvisedSupport.java:482)
org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:188)
$Proxy18.savePerson(Unknown Source)
PersonService.savePerson(PersonService.java:15)
SpringMVCTest.addPersonFromForm(SpringMVCTest.java:58)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:616)
org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

已经读过它可能是一个类加载器错误，其中两个版本的 Spring 或两个 aop-alliance jar 的类路径中存在重复。在我的情况下，情况并非如此。

这是我的上下文 xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

<tx:annotation-driven />      
<mvc:annotation-driven />
<mvc:resources mapping="/resources/**" location="/resources/" />
<context:component-scan base-package="/"></context:component-scan>

<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
<property name="prefix" value="/WEB-INF/jsp/"></property>
<property name="suffix" value=".jsp"></property>
</bean>

<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver" p:maxUploadSize="1000000" />

<bean id="personService" class="PersonService" />

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost:3306/database" />
    <property name="username" value="root" />
    <property name="password" value="root" />
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" /> 
    <property name="packagesToScan" value="/" />
    <property name="hibernateProperties">
        <props> 
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
        </props>
    </property>
</bean>

<bean id="transactionManger" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

有任何想法吗？

# c - 将 sizeof 与 sprintf/vsnprintf 一起使用会损坏文本

> ID：12598839
> 
> 赞同：0
> 
> 时间：2012-09-26T09:40:55.200
> 
> 标签：c

我试图避免使用 sprintf 和朋友（安全原因）之类的固定缓冲区大小，但是，当我将其更改为对 arg2 -> arg1 使用 sizeof 时，我的程序文本输出已损坏/无法正确显示/缺少某些部分。

具体来说，即：

```
vsnprintf(putbuf, LARGE_BIG_BUFFER_SIZE, format, args); 
```

到

```
vsnprintf(putbuf, sizeof putbuf, format, args); 
```

通过简单的 sizeof 更改，我的文本输出全部损坏/短。我错过了什么吗？

原始功能：

```
to_screen(const char *format,...)
{
        if (window_display && format) {
                va_list args;
                va_start(args, format);
                vsnprintf(putbuf, LARGE_BIG_BUFFER_SIZE, format, args);
                va_end(args);
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:46:47.240

将您的代码放在某处：

```
printf ("size is %d\n", sizeof (putbuf)); 
```

如果它是一个*指针，*您可能会得到四个或八个，因为这将是您系统上指针的大小（目前四个或八个将是常见的，但这完全取决于指针的大小）。

请记住，在绝大多数情况下，数组会衰减为指针。

例如：

```
#include <stdio.h>

void fn (char x[]) {
    printf ("size in fn = %zd\n", sizeof (x));
}

int main (void) {
    char x[100];
    printf ("size in main = %zd\n", sizeof (x));
    fn (x);
    return 0;
} 
```

在我的系统上输出：

```
size in main = 100
size in fn = 4 
```

如果你想传递*实际*的尺寸信息，你需要明确地这样做：

```
#include <stdio.h>

void fn1 (char x[]) {
    printf ("size in fn1 = %zd\n", sizeof (x));
}

void fn2 (char x[], size_t szx) {
    printf ("size in fn2 = %zd\n", szx);
}

int main (void) {
    char x[100];
    printf ("size in main = %zd\n", sizeof (x));
    fn1 (x);
    fn2 (x, sizeof (x));
    return 0;
} 
```

或者，对于分配的内存：

```
#define SZ 512
int main (void) {
    char *x = malloc (SZ);   // warning, may fail, irrelevant here.
    printf ("size in main = %zd\n", sizeof (x));
    fn2 (x, SZ);
    free (x);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T09:43:38.230

可能`sizeof`评估指向缓冲区的指针的宽度，而不是实际缓冲区的大小。

* * *

有关解决此问题的另一个建议，请参见[本文：](http://www.tin.org/bin/man.cgi?section=3&topic=vsnprintf)

> 分配足够大的字符串并打印到其中（glibc 2.0 和 glibc 2.1 的代码都正确）：

```
#include <stdio.h>
#include <stdlib.h>
#include <stdarg.h>

char * make_message(const char *fmt, ...) {
  /* Guess we need no more than 100 bytes. */
  int n, size = 100;
  char *p, *np;
  va_list ap;

  if ((p = malloc (size)) == NULL)
    return NULL;

  while (1) {
    /* Try to print in the allocated space. */
    va_start(ap, fmt);
    n = vsnprintf (p, size, fmt, ap);
    va_end(ap);
    /* If that worked, return the string. */
    if (n > -1 && n < size)
       return p;
    /* Else try again with more space. */
    if (n > -1)    /* glibc 2.1 */
       size = n+1; /* precisely what is needed */
    else           /* glibc 2.0 */
       size *= 2;  /* twice the old size */
    if ((np = realloc (p, size)) == NULL) {
       free(p);
       return NULL;
    } else {
       p = np;
    }
  }
} 
```

# wpf - ListView - GridView - 标题工具提示

> ID：12598840
> 
> 赞同：2
> 
> 时间：2012-09-26T09:40:56.073
> 
> 标签：wpf, gridview, header, tooltip

我希望能够使列标题的工具提示与内容相同。

如，如果我的 ListView 与 GridView 的第一列包含名称和标题：“名称”，那么标题的工具提示（您可以按下的按钮）应该有工具提示：“名称”

我有一个 ListView 的以下代码，它具有带有一些列的 GridView：

```
 <ListView x:Name="ListViewResidents" ItemsSource="{Binding Path=Residents.View}">
            <ListView.View>
                <GridView>
                <GridViewColumn DisplayMemberBinding="{Binding Path=Name}" >
                        <GridViewColumnHeader x:Name="GridViewHeaderName"  Content="Name" Command="{Binding SortCommand}" CommandParameter="{Binding ElementName=GridViewHeaderName}"  ToolTip="{Binding ElementName=GridViewHeaderName, Path=Content}"/>
                </GridViewColumn>
                <GridViewColumn  DisplayMemberBinding="{Binding Path=FirstName}"  >
                        <GridViewColumnHeader  x:Name="GridViewHeaderFirstName" Content="Firstname" Command="{Binding SortCommand}" Tag="FirstName" CommandParameter="{Binding ElementName=GridViewHeaderFirstName}"  ToolTip="{Binding ElementName=GridViewHeaderName, Path=Content}"/>
                </GridViewColumn>
                  <GridViewColumn  DisplayMemberBinding="{Binding Path=BirthDate, StringFormat=d}"  >
                        <GridViewColumnHeader x:Name="GridViewHeaderBirthDate"  Content="Birth Date" Command="{Binding SortCommand}" CommandParameter="{Binding ElementName=GridViewHeaderBirthDate}" ToolTip="Some Text"  />
                </GridViewColumn> 
```

我为第一列的标题工具提示创建的绑定不起作用，而 BirthDate 列的工具提示有效。我知道我可以将工具提示设置为姓名或出生日期，但我正试图找到一种不这样做的方法。

有任何想法吗？谢谢！！！考斯敏

--- 编辑 --- 我尝试将其标记为已回答，但我不会让我这样做：我的声誉很低：我找到了解决方案。最终。我不知道为什么我花了这么长时间才弄清楚。

我不得不将绑定更改为

> 相对来源=自己

. 所以，它看起来像这样：

```
<GridViewColumn DisplayMemberBinding="{Binding Path=Name}" >
                        <GridViewColumnHeader ToolTip="{Binding RelativeSource={RelativeSource Self} , Path=Content}" Content="Name" Command="{Binding SortCommand}" CommandParameter="{Binding ElementName=GridViewHeaderName}"  />
                </GridViewColumn> 
```

现在效果很好！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:48:07.817

您可以将此代码添加到您的`Ressource`

```
<Window.Resources>
            <DataTemplate x:Key="nameTemplate">
                <TextBlock Text="{Binding Name}"  Margin="-6,0">
                    <TextBlock.ToolTip>
                        <ToolTip>
                            <TextBlock Foreground="Green" Text="{Binding Name}"/>
                        </ToolTip>
                    </TextBlock.ToolTip>
                </TextBlock>
            </DataTemplate>
        </Window.Resources> 
```

调用此模板`StaticResource`

```
"{StaticResource nameTemplate}" 
```

# html - 了解 HTML 中的拖放

> ID：12598841
> 
> 赞同：0
> 
> 时间：2012-09-26T09:40:57.363
> 
> 标签：html, filelist, dto

我很难理解 HTML 5 中的拖放，尤其是 dropeffect 和 effectsallowed 属性。我已经查看了文档和示例，但我仍然没有很好地掌握。特别是，您可以在页面内拖动数据而另一方面从页面外部拖动文件这一事实对我来说很模糊。

首先，当我将页面内的图像拖到放置区域时，DataTransfer 对象的 FileList 为空。但这是否意味着您也不能像访问页面外部文件一样访问页面中的图像？（例如获取它们的属性或将它们提供给 FileReader）

我不明白的另一件事是 dropEffect 和 effectsAllowed。它们是与 setData 和 getData 方法结合使用，还是与从页面外部拖动的文件结合使用？

我认为如果我设置**event.dataTransfer.dropEffect = 'move'**，那么页面外的文件实际上会被移动并消失在旧位置。但是，当我将某些内容拖到页面中时，除了 dropEffect 字符串值之外，我看不到移动/链接/复制之间的任何实际区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:07:50.410

嗯，还没有答案，但我走得更远了。以防万一其他人对此感到疑惑：

**dropEffect**和**effectsAllowed**属性显然只是拖动操作的视觉提示。不多也不少。这意味着光标图标会根据使用的效果而变化。这是一个小脚本，您可以在其中看到它的运行情况：http: [//help.dottoro.com/ljffjemc.php](http://help.dottoro.com/ljffjemc.php)

问题是当您将**effectsAllowed**设置为多个效果（例如 copymove）时，Firefox (15) 使用标准放置光标。这种行为在 Chrome 中编写时有所不同，它只使用了**dropEffect**指定的图标。后者对我来说似乎更合乎逻辑，所以也许 Firefox 只是有问题。

我发现这种视觉提示既适用于网页内的元素，也适用于浏览器外部的文件。

但是将**dropEffect**设置为例如“移动”与真正移动文件无关。

# jquery - JQuery：验证是否在一组输入（复选框类型）中检查了一个

> ID：12598846
> 
> 赞同：1
> 
> 时间：2012-09-26T09:41:02.697
> 
> 标签：jquery, checkbox, html

我收集了复选框类型的输入

```
var collection = $('.className');
console.log(collection); 
```

结果是：

```
[span.className, span.className, span.className] 
```

如何检查是否至少有一个已选中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:42:52.777

```
if ($('.className input[type="checkbox"]:checked').length>0){
   console.log("At least 1 selected!");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:42:44.720

您可以使用[`:checked`](http://api.jquery.com/checked-selector/)选择器，然后检查`length`属性以查看是否匹配了任何元素：

```
if ($(".className:checked").length) {
    //At least 1 is checked!
} 
```

但是，您的输出看起来像是有`span`元素，而不是`input`元素。如果复选框是`.className`元素的后代，请在选择器之前添加一个空格`:checked`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T09:42:55.727

你可以测试*检查*：`$('.className:checked')`;

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T09:43:36.713

```
$('.className input:checked').length > 0 
```

我假设您的复选框位于跨度内，因为 .className 为您提供了一个跨度数组。

# java - 在不使用套接字的情况下在客户端和服务器之间交换数据

> ID：12598847
> 
> 赞同：0
> 
> 时间：2012-09-26T09:41:04.730
> 
> 标签：java, webserver

我需要开发一个应用程序，其中我在客户端上运行一个 Java 脚本，该脚本需要调用服务器上的 Java 过程（例如从数据库获取数据，我不能直接从客户端执行它，因为唯一打开的端口在我的 Web 服务上是端口 80）。由于服务器上唯一打开的端口是端口 80，并且 Web 服务正在侦听该端口，因此我无法创建 Java 套接字（我正确吗？）。我还有什么其他选择？

提前非常感谢，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:54:10.797

您不能在同一服务器端口上创建另一个**侦听器 - 这是正确的，但您可以创建一个套接字 - 这是浏览器和服务器之间的实际连接。**
客户端和服务器之间可能有（大量）套接字连接，但每个公共端口只有一个**侦听器。**

# arrays - T-SQL 中的表列作为数组

> ID：12598848
> 
> 赞同：0
> 
> 时间：2012-09-26T09:41:06.167
> 
> 标签：arrays, tsql, cursor

我不想使用游标遍历表，而是想用表列数据填充一个数组，然后遍历 T-SQL 数组进行我的计算或其他什么，使用类似“而不是文件结尾做某事”之类的东西”。我觉得这将最大限度地减少磁盘使用并提高效率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:52:44.073

I believe you are talking about [Recursive CTE](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx) where the `"while not end-of-file do something"` can be handled by the stopping condition.

Though SQL-Server don't support the array concept directly like [VARRAY](http://www.dba-oracle.com/tips_oracle_varray.htm) in Oracle, however, [here](http://www.sommarskog.se/arrays-in-sql-2008.html) is an interesting article that describes as how we can simulate the same behavior using TVP.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:51:52.607

如果您的光标有问题，那么您做错了什么，经常使用光标。仅 sql 表中没有数组。如果操作正确，对桌子进行操作非常快。因此，您要么使用临时表、表变量（或游标作为最后的手段），要么只是选择/更新，否则您将数据导入其他工具并从那里工作。

# ios - 当子视图旋转某个角度时，setAutoresizingMask 不起作用

> ID：12598850
> 
> 赞同：1
> 
> 时间：2012-09-26T09:41:13.730
> 
> 标签：ios

```
[ myChildeView setAutoresizingMask:( UIViewAutoresizingFlexibleWidth |
                                 UIViewAutoresizingFlexibleHeight )]; 
```

如果我将 myChildeView 旋转某个角度，这将不起作用。谁能帮帮我。谢谢

# objective-c - 使用 UIDocument saveToUrl 在 NSURL 上抛出 NSInvalidArgumentException

> ID：12598854
> 
> 赞同：1
> 
> 时间：2012-09-26T09:41:34.090
> 
> 标签：objective-c, ios, icloud, uidocument, invalid-argument

我正在尝试进行快速测试以将文件同步到 iCloud。这是我的简单片段：

```
url = [[ubiquityContainerURL
       URLByAppendingPathComponent: @"Documents"]
       URLByAppendingPathComponent:@"test.txt"];

doc = [[CloudDocument alloc] initWithFileURL:url];

[doc saveToURL:[doc fileURL]
    forSaveOperation:UIDocumentSaveForCreating
    completionHandler:^(BOOL success) {
    }]; 
```

现在我试着环顾四周，在其他教程中，这似乎是他们这样做的方式。问题是当代码运行时，会抛出这个异常（在 [doc saveToURL] 行）：

> 'NSInvalidArgumentException'，原因：' *** -[NSURL URLByAppendingPathExtension:]：组件、组件或 pathExtension 不能为 nil。

在此处获取普遍存在的 URL 后，将立即调用运行此逻辑的方法：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
ubiquityContainerURL = [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil];

if (ubiquityContainerURL != nil)
     [self writeAllBytesToLocalFile:@""];
}); 
```

我尝试了一些不同的方法来修复它，但它一直在发生。知道问题可能是什么吗？

谢谢大家的时间:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:06:16.343

好吧，所以我弄清楚了问题所在。UIDocument 实例*文档*试图在其初始化方法中将文件扩展名附加到最终路径。

不幸的是，我以不正确的方式覆盖了UIDocument 子类中的*-(NSString)savingFileType*方法，这使得它向初始化方法返回了一个 nil 字符串，因此试图将一个 nil NSString 对象附加到文件路径中。

所以无论如何其他人遇到这个问题，你可以尝试删除你的自定义覆盖方法，看看是否能解决问题:)

# c++ - MKV 文件的开源 WinRT 库

> ID：12598860
> 
> 赞同：2
> 
> 时间：2012-09-26T09:41:48.007
> 
> 标签：c++, windows-runtime, ms-media-foundation, mkv

我正在尝试在 WinRT 中播放 MKV 文件。有谁知道已经转换为与 WinRT 一起使用的库？如果没有，任何人都可以指出我开始使用一个好的图书馆的方向吗？迄今为止，我对 Media-Foundation 没有任何经验，因此将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-26T09:45:49.227

Mkv 是一个容器，*播放 mkv*这是一个短语，从编码器的预期和用户的角度来看都没有多大意义，无论如何你可能找不到比[ffmpeg](http://ffmpeg.org/)更好的音频/视频库。

# ruby-on-rails - 如何在 Rails (Devise gem) 中检查当前密码？

> ID：12598862
> 
> 赞同：4
> 
> 时间：2012-09-26T09:42:09.787
> 
> 标签：ruby-on-rails, devise, jquery-validate, actioncontroller

我无法使用 jQuery 验证检查当前密码。我正在使用 Devise gem 和 jQuery 验证。萤火虫 说：

问题出在我的控制器中：

```
def checkpass
 user = User.find_by_email(params[:user][:email])
 respond_to do |format|
 if user && user.authenticate(params[:user][:password])
    format.json { render :json => @user }
 end 
```

结尾

**使用此代码 Firebug 给了我错误**

```
 406 Not Acceptable

end 
```

**checkemail 唯一性操作示例：**

```
 def checkemail
  @user = User.find_by_email(params[:user][:email])
   respond_to do |format|
   format.json { render :json => !@user }
  end
end 
```

我的js：

```
$("#edit_password").validate({
   "user[current_password]":{
            required: true,
            minlength: 6,
            remote: {
          url: "http://127.0.0.1:3000/checkpass"
          }
 ...
 }) 
```

和 HTML：

```
 <input type="password" size="30" name="user[current_password]" id="user_current_password" class="valid"> 
```

有人可以建议怎么做吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-19T11:10:53.260

我正在使用 rails 版本 4，当我尝试执行 user.authenticate 时出现错误提示未知方法，所以我找到了另一种检查密码是否有效的方法，

`valid_password?(current_password)`

我想分享它，这样它也可以帮助其他人。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T10:07:25.617

在函数 check_pass 的控制器中

```
 user = User.find_by_email(params[:user][:email])
  respond_to do |format|
     if user && user.authenticate(params[:user][:password])
        format.json { render :json => @user }
     end
  end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T10:11:07.853

密码不是以纯文本格式存储的，它是一个加盐哈希，所以用户无法使用密码找到。

您可以验证密码是否有效

*   加密字符串 = 明文（密码）+哈希算法（加密）

*   一些随机字符串（盐）+加密字符串然后检查匹配您可以在用户上使用`warden.authenticate`或`authenticate`（检查文档）方法来验证密码

# php - 使用 PHP 将日期转换为字符串

> ID：12598863
> 
> 赞同：-2
> 
> 时间：2012-09-26T09:42:13.350
> 
> 标签：php, datetime

我有约会`2012/09/26`。我想使用 PHP 将其转换为字符串。如何解决此问题。请任何人帮助我，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T09:46:43.477

那已经是一个字符串，你想改变格式吗？

```
 $date = '2012/09/26';
 echo date('l jS \of F Y', strtotime($date));
 // Wednesday 26th of September 2012 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T09:48:30.343

/** * 将'2008-12-22'之类的转换为'December 22, 2008' */

```
echo date(  "F j, Y", strtotime( $datetime_value ) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:44:54.230

因此与[http://php.net/manual/ro/function.date.php](http://php.net/manual/ro/function.date.php)

```
// Shows like: Monday
echo date("l"); 
```

# php - flickr oauth api 随机返回签名无效错误

> ID：12598864
> 
> 赞同：5
> 
> 时间：2012-09-26T09:42:14.480
> 
> 标签：php, oauth, flickr, nonce

我有一个 Web 应用程序，可以向他们的 flickr api 验证用户。它利用 OAuth 1.0 并且大多数时间都可以进行身份​​验证。但在随机时间，在完全随机的时间，flickr 无法识别我的签名。它在请求请求令牌时返回无效签名错误。但是下一次尝试中的相同代码将正确带回请求令牌。

我怀疑这与我生成随机数或时间戳的方式有关。否则它不应该在连续尝试中起作用，对吧？

这就是我生成随机数和时间戳值的方式：

```
$nonce   = md5(microtime(true).rand());
$timestamp  = mktime(); 
```

这有什么问题吗？有没有更好的方法来生成 nonce 值？这种随机故障非常令人困惑。我想不出任何其他原因会导致无效错误，随机！

* * *

**跟进**

根据 Jan Gerlinger 的建议，我将 mktime() 更改为 time()。它肯定减少了发生的频率。但它仍然会在随机时间给出无效的签名错误，在更改为 time() 之后很少会出现，我可能会补充。

所以，我假设时间戳（mktime）是导致这些随机错误的问题之一。但是那里仍然有其他问题。也许在 nonce 一代？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T11:36:20.403

[根据您的 PHP 版本](http://www.php.net/manual/en/function.mktime.php#refsect1-function.mktime-notes)，您应该使用[`time()`](http://www.php.net/manual/en/function.time.php)而不是`mktime()`.

对于随机数，[文档](https://www.rfc-editor.org/rfc/rfc5849#section-3.3)说：

> nonce 是一个随机字符串，由客户端唯一生成，以允许服务器验证以前从未发出过请求，并有助于防止通过非安全通道发出请求时的重放攻击。在具有相同时间戳、客户端凭据和令牌组合的所有请求中，nonce 值必须是唯一的。

如果[`rand()`](http://www.php.net/manual/en/function.rand.php)在一微秒内两次返回相同的值，您将获得两次相同的随机数。由于 MD5 冲突，生成 MD5 哈希也不能保证您获得唯一值。这里更好的方法是[为 nonce 设置一个全局计数器](http://www.adayinthelifeof.nl/2010/12/16/oauth-timestamps-and-nonces/)。

但是，如果您经常遇到此错误，则 nonce 可能不是您的问题，因为这些冲突不应该经常发生。

有时*无效签名*错误的问题是客户端的服务器时间与提供商的服务器时间不同，因此您可以通过时间同步检查您的服务器上是否发生了一些奇怪的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T02:35:36.937

如果没有更多信息，我不得不推测它与签名本身有关。

我可以告诉你的是，`time()`和`mktime()`是一回事，所以它们不是你的根本原因。

我发现，有时签名可能包含 base64 字母表`+`。如果编码不正确，可能会导致一些问题；在下一次请求时，它可能会消失并且请求将通过。

如果这是自制代码，我建议共享该代码，同时建议您使用更受信任的解决方案，例如 oauth-php 项目或 oauth PECL 扩展。

# mysql - mysql 地理复制

> ID：12598866
> 
> 赞同：0
> 
> 时间：2012-09-26T09:42:20.517
> 
> 标签：mysql, replication, cluster-computing

我一直在阅读很多文档、博客、文章.. 谈论 Mysql Replication，但我不知道如何解决它。

我们需要为我们的基本数据库提供故障转移和冗余解决方案。所以这个想法是购买一台新服务器来获得一些地理故障转移解决方案。

最初的想法是将一个主数据库存储到服务器 A 中，将另一个主副本存储到服务器 B 中，进行主-主复制。但是为了保证数据的一致性，需要同步复制。

所以我们测试了 Mysql Cluster，但我很困惑，因为 Mysql 官方文档说它只能在本地网络上工作。另一个问题是通信安全。

两台服务器之间有 1.40 毫秒的延迟。

最好的选择应该是什么？我的意思是不同数据中心之间的同步冗余数据库没有安全的选择吗？

大公司如何解决？或者不可能有地理冗余+故障转移解决方案+数据一致性

谢谢所有

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:03:14.903

主从方案已经是防止服务器故障的非常好的解决方案。

如果您希望从服务器用于查询以分散负载，您可以接受从服务器可以将其数据放在主服务器之后，或者在您的应用程序和数据库服务器之间放置一个额外的层。

几年前，我开始使用[Mysql-Proxy](http://dev.mysql.com/downloads/mysql-proxy/)。顾名思义，它充当代理，除此之外，它还可以在多个节点上进行查询平衡，同时检查它们的可用性。

作为结论，我要补充一点，如果您在 2 个 DC 之间的链接是可靠的并且有 +/- 1.4 毫秒的延迟，那么实际上您的从站将保持更新，并且用户不会注意到延迟。

当然，如果您的应用程序做了您没有提到的事情（购买交易，或者如果您是银行；），所有这些都不适用

（添加为答案，因为评论太长了）

# c# - MVC 查看目录位置

> ID：12598868
> 
> 赞同：0
> 
> 时间：2012-09-26T09:42:31.203
> 
> 标签：c#, asp.net-mvc, razor

我从 MVC 项目开始。并被这件事困住了。

是否可以`mvc`直接在`Views`文件夹内查看。

为什么它总是在里面搜索 `Views/Home/Home.cshtml`或 `Views/Shared/Home.cshtml`

我的视图名称是`Home.cshtml`

我不能直接将它作为 Views/Home.cshtml 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:53:24.167

> 为什么总是在里面搜索`Views/Home/Home.cshtml`

默认的 Web 视图引擎设置为根据从 ie 渲染视图的控制器查找视图`Views/{Controller}/View.cshtml`，然后 `Views/Shared/View.cshtml`查找跨多个控制器共享的视图。

> 我不能直接把它作为 Views/Home.cshtml

是的，你可以，你需要做的就是给出你的观点的完整路径，例如

```
View("~/Views/Home.cshtml") 
```

但是，我真的不明白您为什么要这样做。MVC 使您的视图保持整洁，并且可以轻松查看哪些视图由哪些控制器呈现。

# api - 我可以使用 PHP 在 Amazon Web Services API 中获取运费吗？

> ID：12598869
> 
> 赞同：0
> 
> 时间：2012-09-26T09:42:31.593
> 
> 标签：api, amazon-web-services

我想知道是否有可能获得 AWS 的运费，我找不到任何东西，或者我只是错过了什么？在我的响应组中，我目前使用 Large

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-11T18:49:09.303

[https://forums.aws.amazon.com/thread.jspa?threadID=27214](https://forums.aws.amazon.com/thread.jspa?threadID=27214)

也许无法使用 AWS，链接线程上的建议与访问文章的实际网页有关。

# 3d - 是否有任何 C# 3D 图形库可以帮助我计算 3D 对象在空间中的 2D 位置？

> ID：12598874
> 
> 赞同：0
> 
> 时间：2012-09-26T09:42:41.233
> 
> 标签：3d, 2d, game-engine, rendering-engine

我的目标是我将一些对象放在 3D 空间中并调用 Render()，然后这个库可以告诉我每个对象在 2D 屏幕上的渲染位置。

或者像一个3d游戏引擎，但是我想接管渲染部分，我想自己渲染这些对象。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:46:49.533

XNAMath 呢？这应该足以满足您的所有需求。事实上，它现在是 DirectX SDK 的一部分。

编辑：如果您想对计算机图形学的几何有一些实际的了解，这是一本涵盖所有主题的综合[书籍。](http://books.google.am/books?id=YmQy799flPkC&printsec=frontcover&hl=hy&source=gbs_ge_summary_r&cad=0#v=onepage&q&f=false)无论您要设计什么图形、游戏、cg 演示或任何东西，数学在任何地方都是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:09:05.340

任何支持矩阵运算的库都可能会有所帮助，但我建议您使用托管 DirectX。它具有许多实用功能，特别是对于 3D 图形。

选择库后，使用它制作适当的视图矩阵和投影矩阵。将两个矩阵相乘成一个矩阵，然后将该矩阵与 3D 中的位置（对象的中心或某个顶点）相乘。结果向量将指向对象在 2D 屏幕中的位置。这是 3D 图形的标准管道，您可以使用关键字找到许多参考。

# java - XSLT 2.0 从 xml 生成输出文件名

> ID：12598876
> 
> 赞同：0
> 
> 时间：2012-09-26T09:42:46.533
> 
> 标签：java, xml, xslt-2.0

我有一个小问题。我必须使用 XSLT 从 XML 文件生成 HTML 文件。但是 HTML 文件名是由 XML 内容生成的。就我而言，我解决了以下问题：

```
public File GenerateHTML(File fileIn) {
    File xsltFile = new File(xsltfileString);
    File htmlFile = new File(System.getProperty("user.home") + File.separator + "result.html");
    File htmlFileFinal = null;
    Source xmlSource = new StreamSource(fileIn);
    Source xsltSource = new StreamSource(xsltFile);
    Result htmlResult = new StreamResult(htmlFile);
    TransformerFactory transFact = TransformerFactory.newInstance();
    Transformer trans;
    try {
        trans = transFact.newTransformer(xsltSource);
        trans.setParameter("filter_xml", filterXML);
        trans.setParameter("FileName", fileIn.getName());
        trans.transform(xmlSource, htmlResult);
        String outputFileName = (String)trans.getParameter("OutputFilename");
        htmlFileFinal = new File(System.getProperty("user.home") + File.separator + outputFileName + ".html");
        htmlFile.renameTo(htmlFileFinal);
    } catch (TransformerConfigurationException ex) {
        LOGGER.log(Level.FATAL, ex.getMessage(), ex);
    } catch (TransformerException ex) {
        LOGGER.log(Level.FATAL, ex.getMessage(), ex);
    }
    return htmlFileFinal;
} 
```

在我的 XSLT 中我这样做：

```
<!-- general settings -->
<xsl:output method="html" omit-xml-declaration="yes" indent="yes" encoding="UTF-8" />

<xsl:variable name="filter" select="document($filter_xml)/Filtre/Bloc5" />

<!-- transformation body -->
<xsl:template match="*">
    <xsl:param name="OutputFilename" select="concat(cac:ContractDocumentReference/cbc:ID, '_', cbc:ID, '_', translate(cbc:IssueDate, '-', ''))" />
[...] 
```

这个解决方案有效，但我问自己它是否经过优化，或者 XSLT 中是否有生成动态输出文件名的技巧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T10:02:54.187

好吧，使用 XSLT 2.0，您当然可以根据 XML 输入值创建带有名称和 URL 的结果文档，例如

```
<xsl:template match="/">
  <xsl:result-document href="{root/foo/bar}.xml">
    <xsl:apply-templates/>
  </xsl:result-document>
</xsl:template> 
```

您也可以从命名模板开始，例如

```
<xsl:template name="main">
  <xsl:variable name="doc1" select="doc('input.xml')"/>
  <xsl:result-document href="{$doc1/root/foo/bar}.xml">
    <xsl:apply-templates select="$doc1/node()"/>
  </xsl:result-document>
</xsl:template> 
```

虽然我不确定这是否适合您使用的 JAXP 转换 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T16:40:46.053

您也可以完全避免 for-each。...来自工作的 xslt。

```
<xsl:template match="EXTRACT-DATASETS/SUBSET">
...
...
<xsl:result-document href="{$filename-stub}.ctl">
...
...
</xsl:result-document>
</xsl:template> 
```

这将为它找到的每个匹配生成一个文件。变量 filename-stub 在主模板中计算。不需要每个人......

# offset - 如何在 Google Static Maps API V2 中将中心设置为地址的偏移量

> ID：12598877
> 
> 赞同：2
> 
> 时间：2012-09-26T09:42:49.503
> 
> 标签：offset, google-static-maps

我有一个以**地址**为中心的静态地图：

```
http://maps.googleapis.com/maps/api/staticmap?center=London,England&zoom=6&size=200x200&maptype=roadmap&sensor=false 
```

我想将地图居中到地址的偏移量（滚动图像）。

如果我将图像居中到**一个纬度和一个经度**，我可以增加它们来创建偏移量。

是否可以从文本地址集中到偏移量？谢谢！

# objective-c - 在右栏按钮项的选择器中传递参数

> ID：12598879
> 
> 赞同：0
> 
> 时间：2012-09-26T09:42:53.667
> 
> 标签：objective-c, ios, selector

我有这个代码：

```
UIBarButtonItem *donebutton = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleDone target:self action:@selector(doneButtonPressed:)];
    self.navigationItem.rightBarButtonItem = donebutton; 
```

现在我想将一些参数传递给该方法：

```
- (void)doneButtonPressed{} 
```

怎么做 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T09:47:57.910

如果您想传递对象说字符串，请为此使用**setAssociatedObject ：**

首先添加

```
#import <objc/runtime.h> 
```

现在

```
NSString *strText = @"text";

 objc_setAssociatedObject(donebutton, "Argument", strText, OBJC_ASSOCIATION_RETAIN_NONATOMIC); // provide button , key , object for passing 
```

并像这样检索你想要你的论点的地方：

```
NSString *str = objc_getAssociatedObject(donebutton, "Argument"); //using button and key
//remove object associated for button if not needed. 
```

但是如果你想要按钮参考然后

```
- (void)doneButtonPressed:(id)sender{
  UIButton *btnClicked = (UIButton *)sender;
  .......
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T09:52:25.357

你不能直接做。您应该将参数存储在类中其他位置的对象中，然后在点击按钮时检索它。

例如，如果你想传递一个 NSString，在你的 .h 中添加一个：

```
@interface myClass {

    NSString *param;
} 
```

在你的 .m 中：

```
- (void)doneButtonPressed {

    // Do something with param
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T09:49:59.727

正如您所说的选择器，例如：

```
@selector(doneButtonPressed:) 
```

它会崩溃，因为您的方法如下所示：

```
- (void)doneButtonPressed{} 
```

但应该是：

```
- (void)doneButtonPressed:(id)sender{} 
```

例如，您可以通过发件人标签传递您的数据...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-01T10:11:07.953

**在UIBarButtonItem**的情况下可以使用的一个小技巧是使用**possibleTitles**属性，它实际上是**NSSet < NSSString * >**的一种类型，这意味着您可以将 NSString 存储在其中以便以后检索它。

这是如何完成的：

```
UIBarButtonItem * rightButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Next" style:UIBarButtonItemStylePlain target:self action:@selector(presentNextSegue:) ];
rightButtonItem.possibleTitles = [NSSet setWithObject:@"SegueName"];
self.navigationItem.rightBarButtonItem = rightButtonItem;

-(void)presentNextSegue:(UIBarButtonItem*)sender {
   NSLog(@"%@",sender.possibleTitles.allObjects.firstObject);
} 
```

**注意：****possibleTitles**属性的实际使用在[此处](https://stackoverflow.com/a/1038292/968848)解释。这只是一个小技巧:)

# asp.net-mvc - Entity Framework 5 删除我的数据库更改模型

> ID：12598883
> 
> 赞同：1
> 
> 时间：2012-09-26T09:43:06.960
> 
> 标签：asp.net-mvc, database, entity-framework, visual-studio-2012, entity-framework-migrations

我有一个带有 Entity Framework 5、.NET 4.5 和 Visual Studio 2012 的 ASP.NET MVC 4 项目。在我的解决方案中，我将所有模型放在一个名为 Model 的项目中，将所有存储库和我的 DbContext 放在另一个名为 Data 的项目中. 我使用 Enable-Migrations 命令激活 Data 项目中的迁移。我决定手动处理它们。如果我使用 Add-Migration 命令创建一个新的迁移，一切都会很好。例如，如果我向表中添加一个新列，它就可以正常工作。我可以在数据库架构中看到新列，并且在 _MigrationHistory 表中看到新记录。此时，随着新列的创建，我需要将此列添加到正确的模型中。所以，我将此方法添加到我的代码优先模型类中并运行该项目。它删除我的数据库，并使用初始迁移对其进行初始化。我可以' t 在不丢失所有数据的情况下调整模型。我怎样才能避免这种行为？谢谢

更新：

配置.cs

```
namespace NegoziazioneEventi.Data.Migrations
{
    using System;
    using System.Data.Entity;
    using System.Data.Entity.Migrations;
    using System.Linq;

    internal sealed class Configuration : DbMigrationsConfiguration<NegoziazioneEventi.Data.NeDataContext>
    {
        public Configuration()
        {
            AutomaticMigrationsEnabled = false;
        }

        protected override void Seed(NegoziazioneEventi.Data.NeDataContext context)
        {

        }
    }
} 
```

Global.asax 中的 Application_Start()

```
protected void Application_Start()
        {

            // init basic data on database
            System.Data.Entity.Database.SetInitializer(new Models.InitData());

            AreaRegistration.RegisterAllAreas();

            RegisterGlobalFilters(GlobalFilters.Filters);
            RegisterRoutes(RouteTable.Routes);

            _container = Bootstrapper.GetWindsorContainer();

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T10:02:31.340

> 我决定手动处理它们。如果我使用 Add-Migration 命令创建一个新的迁移，一切都会很好。...此时，随着新列的创建，我需要将此列添加到正确的模型中。所以，我将此方法添加到我的代码优先模型类中并运行该项目。

这是对迁移的完全错误使用，这也是 EF 删除数据库的原因。您必须首先将属性添加到模型，然后添加迁移，因为 EF 需要将正确的数据存储到`_MigrationHistory`表中，以将该记录与该迁移的真正含义相匹配。

使用您当前的方法，EF 运行应用程序并检查`_MigrationHistory`表，但表中的记录不包含有关您新添加的属性的信息，因此 EF 认为对您的模型进行了新的更改并使用默认策略删除数据库并创建一个新的反映您当前的模型。您可以关闭此行为，但您应该从正确使用迁移开始！

要关闭行为，请使用：

```
Database.SetInitializer<YourDatabaseContext>(null); 
```

您正在使用自己的初始化程序，它很可能源自错误的内置初始化程序，导致当前数据库丢失。

# linux - 通过另一个文件的创建时间查找文件

> ID：12598884
> 
> 赞同：0
> 
> 时间：2012-09-26T09:43:09.140
> 
> 标签：linux, bash, find, xargs

我需要做的是通过另一个文件的创建时间来查找文件。例如，如果我在上午 9 点创建一个文件，然后我想查找在它之后 1 小时或在它之前 1 小时创建的所有文件。我该怎么做？

我在使用“find”的同时尝试使用“-newer”，但我认为“xargs”是我需要使用的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-06-26T08:17:49.363

我知道这是ooooold，但因为我一直在寻找同样的东西......这是一个oneliner版本，基本上使用与上述相同的方法：

修改后至少一小时：

```
find . -newermt "$(date -d "$(stat -c %y reference_file) + 1 hour")" 
```

修改前一小时或更长时间：

```
find . -not -newermt "$(date -d "$(stat -c %y reference_file) - 1 hour")" 
```

在从前一小时到一小时后的时间跨度内修改

```
find . -newermt "$(date -d "$(stat -c %y reference_file) - 1 hour")" -not -newermt "$(date -d "$(stat -c %y reference_file) + 1 hour")" 
```

替换`reference_file`为您选择的文件。您当然也可以使用其他时间跨度`1 hour`

## 这个怎么运作

`stat -c %y reference_file`将返回修改时间。

`date -d "[...] + 1 hour"`将日期字符串操作到一小时后。

`find . -newermt "[...]"`将查找修改时间 ( `m`) 比给定时间 ( ) 新的`t`文件

这一切都需要 GNU find 4.3.3 或更高版本（for `-newerXY`）和 GNU date（以支持`-d`和复杂的日期字符串）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:07:30.190

在看了这个之后，我找到了一种方法来做到这一点，虽然它不是最好的解决方案，因为它需要按时完成整数运算。

这个想法是从您的参考文件中获取自 Unix 纪元（又名 Unix 时间）以来的秒数，对此进行一些整数运算以获得您的偏移时间（在您的示例中为一小时之前或之后）。然后你使用 find 和`-newer`参数。

示例代码：

```
# Get the mtime of your reference file in unix time format, 
# assumes 'reference_file' is the name of the file you're using as a benchmark
reference_unix_time=$(ls -l --time-style=+%s reference_file | awk '{ print $6 }')

# Offset 1 hour after reference time
let unix_time_after="$reference_unix_time+60*60"

# Convert to date time with GNU date, for future use with find command
date_time=$(date --date @$unix_time_after '+%Y/%m/%d %H:%M:%S')

# Find files (in current directory or below)which are newer than the reference 
# time + 1hour
find . -type f -newermt "$date_time" 
```

对于您在参考文件前一小时创建的文件示例，您可以使用

```
# Offset 1 hour before reference time
let unix_time_before="$reference_unix_time-60*60"

# Convert to date time with GNU date...
date_time=$(date --date @$unix_time_before '+%Y/%m/%d %H:%M:%S')

# Find files (in current directory or below which were generated 
# upto 1 hour before the reference file
find . -type f -not -newermt "$date_time" 
```

请注意，以上所有内容均基于文件的最后修改时间。

以上内容已使用 GNU Find (4.5.10)、GNU Date (8.15) 和 GNU Bash (4.2.37) 进行了测试。

# android - 在 Android 中使用 ListView 的日历

> ID：12598887
> 
> 赞同：0
> 
> 时间：2012-09-26T09:43:11.797
> 
> 标签：android, android-layout, android-widget

我正在开发一个应用程序，我使用 ListView 制作日历，就像这篇文章中的图片一样。我已经能够构建 ListView 但我在月份标题和月份中的天数方面遇到了一些问题有人可以在这方面帮助我吗

我的 getView 方法是

```
public View getView(int pos, View v, ViewGroup p) {
    if (DateHelper.isHeaderEnabled(pos,cal)) {
        View rowView = mContext.getLayoutInflater().inflate(
                R.layout.calendar_list_row_month_header, null);
        final TextView headerTextView = (TextView) rowView
                .findViewById(R.id.month_header_textView);
        SimpleDateFormat sdf = new SimpleDateFormat("MMMM yyyy");

        System.out.println(cal.getActualMaximum(Calendar.DAY_OF_MONTH));
        cal.setTime(current);
        cal.set(Calendar.MONTH, (cal.get(Calendar.MONTH) + pos / 30));
        current = cal.getTime();
        headerTextView.setText(sdf.format(current));
        return rowView;
    } else {
        View rowView = mContext.getLayoutInflater().inflate(
                R.layout.calendar_list_row, null);
        TextView dayTextView = (TextView) rowView
                .findViewById(R.id.weekDaytextView);
        TextView weekDay = (TextView) rowView
                .findViewById(R.id.dateTextView);
        dayTextView.setText("" + pos % 30);
        weekDay.setText(DateHelper.getDayName(pos));
        daysPos = daysPos + 1;
        return rowView;
    }
} 
```

![在此处输入图像描述](../Images/2c2738d9a9babff4d62b1536e8d74780.png)

问候
阿尔塔夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:53:03.510

让您的 listadapter 接受 List Object>。然后对于月份标题传递字符串。

在适配器的 getView() 方法中，检查当前对象是哪个类。

如果课程是您的日期，请使用标准布局，如果您的课程是字符串，请使用标题布局。

# asp.net-mvc - 我在哪里放置我的视图模型验证？

> ID：12598889
> 
> 赞同：3
> 
> 时间：2012-09-26T09:43:15.213
> 
> 标签：asp.net-mvc, validation, architecture

我们正在构建一个 ASP.Net MVC 应用程序，我们问自己一个问题，我们应该将传入数据的验证逻辑放在哪里。

我们已经进行了简单的验证：这些是视图模型上的属性，例如`[required], [numeric] , [email]`等。（顺便说一句，这也可以讨论）

但是现在我们有更多的输入验证：我们想要验证从下拉列表接收到的 id 是否是真实的 id。

例如：当我们收到 91 作为 countryid 时，我必须确保 91 是有效的 countryid 而不是用户“侵入”表单的值。因为如果它不是有效的 countryid，我的数据层会生成错误。

1.  我应该把它放在控制器的操作方法中，因为当请求的数据到达时，该方法知道什么是对的，什么是错的？

2.  我应该把它放在一个 VacancyValidator （对象是一个 Vacancy 对象）中，我将所有与空缺相关的视图模型的所有验证逻辑放在其中

3.  我应该把它放在 ViewModel 中，因为它应该知道如何验证自己

4.  我是否应该创建一个属性来验证我放置在 ViewModels 属性上的属性

5.  我应该把它放在一个 Vacancy[thisviewmodelsname]Validator 中，我把这个特定视图模型的所有验证逻辑放在里面

任何想法表示赞赏....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:55:59.550

> 我们已经进行了简单的验证：这些是视图模型上的属性，例如 [required]、[numeric]、[email] 等（这也可以讨论，顺便说一句）

我会推荐[FluentValidation.NET](http://fluentvalidation.codeplex.com/)而不是与 ASP.NET MVC 配合[得很](http://fluentvalidation.codeplex.com/wikipage?title=mvc&referringTitle=Documentation)好的Data Annotations 。它提供了一种很好的语法来表达相互依赖的属性之间的复杂验证逻辑，而无需编写数百万行管道基础设施代码（如果您使用数据注释并编写自定义验证器，您必须这样做），并且还允许您对[您的验证逻辑](http://fluentvalidation.codeplex.com/wikipage?title=Testing&referringTitle=Documentation)很容易。

> 因为如果它不是有效的 countryid，我的数据层会生成错误。

你去 - 你的数据层已经为你处理了这个验证。但是如果你不想让它到达数据层，那么你可以在视图模型上为这个属性设置一个验证规则。如果您遵循我之前的建议，`FluentValidation.NET`您将已经知道将这条规则放在哪里 - 在您的视图模型的相应验证器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:41:33.440

您*显然*将验证放在了视图模型中。通过这种方式，它位于一个位置（不分散，因此 DRY）并且在客户端和服务器上都可以运行。

*   对于简单的场景，请使用[Data Annotations](http://msdn.microsoft.com/en-us/library/dd901590%28v=vs.95%29.aspx)。
*   对于更复杂的场景（企业规模等），请使用[Fluent Validation](http://fluentvalidation.codeplex.com/)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T10:01:49.323

最好的方法是结合客户端和服务器验证。对于客户端验证，您可以使用[jquery 验证插件](http://docs.jquery.com/Plugins/Validation)。它提供所有标准验证模式（如 maxlength、minlength、required 等）。您可以在模型属性（数据注释）或直接在 html 中指定验证要求。此外，当验证结果将从服务器代码返回时，它提供了自定义[远程验证的可能性。](http://docs.jquery.com/Plugins/Validation/Methods/remote)

但是您应该将客户端验证与服务器端重复。例如，使用[spring.net 验证](http://www.springframework.net/doc-1.1-M2/reference/html/validation.html)。我认为它是最好的通用和灵活的框架。

# sql - 模型 Rub y on Rails 中的关系

> ID：12598891
> 
> 赞同：0
> 
> 时间：2012-09-26T09:43:17.850
> 
> 标签：sql, ruby-on-rails, ruby, model, sybase

我有一个`View_CrossReference`在 Sybase 中调用的视图。我想为此视图创建模型。该表有一个名为 的列`Answer`。

我有另一个名为`SurveyXref`. 在此表中，我有一列名为`Answer_No`.

我想在这些模型之间创建关系，并从`Answer`列中获取数据并在页面`View_CrossReference`中显示到我的网格中`SurveyXref`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:56:34.337

IN view_crossreference 模型

> has_one :survey_xrefs, :primary_key => :answer, :foreign_key => :answer_no

在survey_xrefs 模型中

> belongs_to :view_crossreference, :primary_key => :answer , :foreign_key => :answer_no

现在只需在控制器中即可访问

> v.view_crossreference.answer

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:49:11.997

没有“模型”，意味着您已经通过独立迁移创建了表。你能告诉我你的代码以便更好地理解吗？

# c++ - 将 For 循环的 i 转换为 QString

> ID：12598892
> 
> 赞同：0
> 
> 时间：2012-09-26T09:43:18.130
> 
> 标签：c++, qt

编辑——

这就是我被抛弃的地方：

```
for(int i=0, a=bugModel->rowCount(); i<a; i++){
        qDebug() << i;
        QString *BugName = new QString(QString::number(i));
        setting.beginGroup(BugName->toAscii());
        bugModel->setData(bugModel->index(i,0), setting.value("theBugName",  "A Bug!").toString());
        setting.endGroup();
        delete BugName;
    } 
```

我正在尝试从设置组加载名称并将其设置为列表模型，其名称将等于 i。但是每次我加载模型时，组'0'的信息只显示出来，因为我在这里是0。例如：

我有两个名为“0”和“1”的设置组。我希望 for 循环运行 2 次，以便从这些组中加载值并将其设置在 QListView 中。但是我对其进行了测试，每次它只加载“0”组的值，当我将其更改为它时，`for(int i=1..)`它会加载“1”组的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:46:44.763

要解决第一种情况，您可以`(*BugName) = QString::number(i)`或`BugName->setNum(i);`，但更大的问题是您要实现什么目标以及如何检查它是否保持为零？你期望改变什么？也许给更多的背景？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:05:54.047

基于 'a' 的奇怪用法，我猜你还有很多其他代码没有发布。就目前而言，循环等效于`for (int i = 0; i < 2; ++i)`，因此仅迭代 i=0 和 i=1。在第一次通过时，它创建一个新的 QString，将地址分配给 bugname 指针，然后尝试（错误地）为其分配一个字符串。您可以将第二行更改为`*BugName = QString::number(i);`，它应该可以工作。更好的是，您可以使用其中一个 QString 构造函数并将第一行更改为`QString* BugName = new QString(QString::number(i))`并完全消除第二行。

现在对于第二个问题，您的内存泄漏。第一遍之后，循环重置，您创建第二个 qstring，用新地址覆盖 bugname。不幸的是，这会孤立您创建的第一个 qstring，从而导致泄漏。`delete BugName;`在循环结束之前添加该行以进行修复。如果您实际上是在尝试创建一个“BugNames”数组以在循环之后使用，您可能希望使用一个数组：放在`QString BugNames[2]`循环之前，然后使用循环遍历并通过单独初始化它们`BugNames[i] = QString::number[i]`。由于数组是自动变量，因此后一种情况不需要该`delete`部分。

**编辑** 查看您修改后的代码，我会这样做（虽然旧方式仍然有效）：

```
for(int i=0; i < bugModel->rowCount(); i++){
  qDebug() << i;
  QString BugName = QString::number(i);
  setting.beginGroup(BugName.toAscii());
  bugModel->setData(bugModel->index(i,0), setting.value("theBugName",  "A Bug!").toString());
  setting.endGroup();
} 
```

请注意，您对“a”的使用是多余的，因为它（实际上是循环本身）可能会被编译器删除。现在我看到你在做什么，我会完全放弃指针字符串，只使用一个自动变量。至于它不工作的问题，qDebug应该是输出“0 1”吧？`qDebug() << BugName;`您可以在分配后尝试`::number`，但我怀疑也会输出“0 1”。这意味着你真正的问题在于`begin/endGroup()`函数的某个地方，而不是在这个循环中。如果参数`beginGroup`被分配给静态的东西，你可能会用第二遍覆盖一个值。

# php - wordpress add_action 传递变量

> ID：12598893
> 
> 赞同：0
> 
> 时间：2012-09-26T09:43:22.090
> 
> 标签：php, wordpress, function, arguments, closures

我创建了一个 Wordpress 函数来在任何页面中显示幻灯片。该函数运行良好，我可以向我的任何模板页面添加函数调用以显示幻灯片。

示例函数调用：`add_slideshow($slideshow_id, $gallery_id, $show_navigation_handles);`

我已经在页脚中对 jquery 进行了硬编码。但是，我想`add_action('wp_footer','')`在我的主函数中使用将 jquery 添加到页脚，因为每个幻灯片可能有不同的设置（不同的 slideshow_id、gallery_id 等）。

这是我的功能：

```
function add_slideshow($slider_id, $gal_id, $show_controls){
//get the slideshow images from database and return HTML - A Bit Long to show here but it WORKS!

//add the required script to footer - JavaScript is added to footer but not $slider_id
add_action('wp_footer', function() { 
    echo "<script type='text/javascript'>
        $(document).ready(function(){ 
            $('#" . $slider_id . "').flexslider();
        });
    </script>";
  }); 
```

但是 PHP 变量`$slider_id`没有被传递到发出的 javascript 中，因此我的页脚中的输出是：

```
<script type='text/javascript'>
    $(document).ready(function(){ 
        $('#').flexslider();
    });
</script> 
```

什么时候应该是这样的：

```
<script type='text/javascript'>
    $(document).ready(function(){ 
        $('#some_id_here').flexslider();
    });
</script> 
```

如果我使用正确的 id (#actual_slideshow_id) 手动将其添加到页脚，则幻灯片播放正常。

在过去的一个小时里，我已经搜索了这个网站以试图找到一个解决方案，但我找不到任何可以适应我的具体问题的解决方案。

谢谢，马克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T09:49:07.493

**1.缺失值（您问题的答案）：**

首先，您的 $slider_id 在匿名函数中不可用的原因是因为您没有将它包含在闭包中，`use ($slider_id)`如下所示：

```
add_action('wp_footer', function($arguments) use ($slider_id) { 
    echo "<script type='text/javascript'>
        $(document).ready(function(){ 
            $('#" . $slider_id . "').flexslider();
        });
    </script>";
}, $priority_integer, $accepted_arguments_integer); 
```

**2.在方法中使用匿名函数`add_action()`：**

来自[add_action() 的 WordPress 法典](http://codex.wordpress.org/Function_Reference/add_action)：

> add_action($tag, $function_to_add, $priority, $accepted_args);
> 
> 参数
> 
> ...
> 
> $function_to_add (callback) (required) 你希望被调用的函数的名字。**注意：只有“回调”类型的 PHP 文档中列出的字符串格式的语法才有效**。[我的重点]
> 
> ...

请注意，闭包（也称为匿名函数）仅在 PHP 5.3+ 中用作回调，并且我（个人）不会为此依赖它们，只要 codex 声明只允许字符串格式的语法（即使相同）文章稍后会使用基于闭包的示例）。

**3\. 发出脚本：**

您应该按照[WordPress Answers上的这个答案使用 register_script 和 enqueue_script](https://wordpress.stackexchange.com/questions/41204/enqueue-and-localize-script-in-footer)

（有一个布尔参数来说明脚本是否进入页脚）。

要在运行时将您的特定参数传递给脚本，请使用本地化脚本方法。[Otto on Wordpress 上](http://ottopress.com/tag/wp_localize_script/)有一个教程

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T21:21:06.913

1）你需要使用全局

```
$myvar ='123';

add_action('blabla','your_func');
function your_func(){
global $myvar;
} 
```

2) 或者，使用**do_action** :
-[我可以通过 add_action 将参数传递给我的函数吗？](https://stackoverflow.com/questions/2843356/can-i-pass-arguments-to-my-function-through-add-action)

# ios - 在 iOS 上，presentViewController 会导致溢出（如堆栈溢出）吗？

> ID：12598898
> 
> 赞同：0
> 
> 时间：2012-09-26T09:43:40.603
> 
> 标签：ios, uiviewcontroller, uikit

由于我们可以调用`presentViewController`and `dismissViewControllerAnimated`（`dismissViewController`首先指定动画），它看起来像一个堆栈结构，我们可以在其中呈现 3 次，并关闭 3 次，就像一个“呈现”视图控制器链作为头部，以及一个“呈现”视图控制器，它实际上是另一个“呈现”视图控制器本身。

如果是这种情况，它是否真的会在一段`N`时间后溢出——如果我们继续调用`presentViewController`新的视图控制器但从不关闭。该文档似乎没有警告存在这种可能性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:58:41.557

实际上，没有。编写一个无限`presentViewController`测试用例，看看会发生什么。很可能你会达到内存限制。如果这不是一个纯粹的理论问题，并且您正在考虑以这种方式编写界面，那么不要，寻找另一种方式来做到这一点。

# android - 将值从 android 设备传递到另一个

> ID：12598902
> 
> 赞同：0
> 
> 时间：2012-09-26T09:44:01.423
> 
> 标签：android, xml

是否可以将值从 android 设备传递到另一个设备？我的意思是，不使用互联网。我的项目将仅在本地主机上实施。两个安卓设备只通过路由器连接。如果在局域网上不可能，我该怎么做？还有其他方法吗？如果可能，我将使用 Internet 或任何其他选项。开放源代码的链接，如果您对此主题有任何特别关注，也将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:36:24.550

如果您的目标是 Android4.0+，您可以按照@pgsandstrom 的说明直接使用 wifi。

在其他情况下，如果您想与两个 android 设备进行客户端/服务器通信，您应该查看这个线程[Socket Server/Client with two Android devices](https://stackoverflow.com/questions/10825317/socket-server-client-with-two-android-devices)并且这个问题的awser也可能对您有用[How to write an Android SocketServer to listen在无线网络上](https://stackoverflow.com/a/5054144/665823)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:04:01.597

如果您可以将使用限制为 Android 4.0 或更高版本，请查看[wi-fi direct](http://developer.android.com/guide/topics/connectivity/wifip2p.html)。它不使用路由器，所以我希望这不是限制。如果您需要支持旧设备，我认为您必须使用蓝牙。

# javascript - 如何使用 jquery 验证所需的数字文本框？

> ID：12598904
> 
> 赞同：0
> 
> 时间：2012-09-26T09:44:01.310
> 
> 标签：javascript, jquery, asp.net, validation

我想使用以下代码验证文本框是否具有数值，但我不知道数字的过滤器术语，我的代码是：

```
 function validateRequiredNumeric(Control, msgInfo) {
    var ControlId = $('#' + Control);
    var msgInfoId = $('#' + msgInfo);
    //testing regular expression
    var a = ControlId.val();
    var filter = /[^\d]/;
    alert(a.length);
    if (a.length != 0) {
        if (filter.test(a)) {
            msgInfoId.text('');
            ControlId.css({ 'border': '1px solid green' });
            return true;
        } else {
            //msgInfoId.css({ 'color': 'red', 'font-size': '12px', 'font-style': 'italic' });
            msgInfoId.text("Numeric Onlydd fdf dfd");
            ControlId.css({ 'border': '1px solid red' });
            return false;
        }
    }
    else {
        //msgInfoId.css({ 'color': 'red', 'font-size': '12px', 'font-style': 'italic' });
        msgInfoId.text("You can't leave this empty.");
        ControlId.css({ 'border': '1px solid red' });
        return false;
    }

} 
```

请帮帮我..我也试过“ **[^0-9]** ”这个..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:49:23.873

正则表达式应该是：

仅适用于数字`/^[\d]+$/`

对于任何非数字`/^[^\d]+$/`

我不确定您在问题中的意思，因为您的正则表达式尝试是针对非数字的。

另一个答案让我想到了，如果您希望用户使用小数，您应该添加一些字符大小写...

对于小数`/^[\d]+[,.]?[\d]*$/` ，小数点前至少需要一个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:48:51.123

试试[Texottela 插件](http://www.texotela.co.uk/code/jquery/numeric/)，启用一个`numeric()`函数，你可以提供一个回调，当焦点丢失并且文本框中的值不是有效数字时运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:52:19.817

我相信您正在寻找的术语是`regular expression`

这应该这样做：

```
var filter = /^\d*$/; 
```

克拉`^`符号将小数锚定到字符串的开头 符号将小数`$`锚定到字符串的末尾，并且`\d*`匹配一个或多个十进制值

如果字符串中有任何非小数，正则表达式将返回 false

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T09:56:00.497

请遵循[此](http://www.codeproject.com/Articles/407250/A-tiny-Javascript-framework-for-common-validation)。它很好地解释了你在这里寻找什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T09:56:23.387

你不需要正则表达式

```
 var a = Number($.trim(controlID));  //or parseInt($.trim(controlID))
    if (!isNaN(a)) {
        //a is valid number
    } else {
        //a is not a number or is empty
    } 
```

# android - manifest.xml 中的活动

> ID：12598906
> 
> 赞同：0
> 
> 时间：2012-09-26T09:44:07.763
> 
> 标签：android, android-layout, android-activity, rotation, orientation

我的 manifest.xml 中有一个活动我的活动是 CPohonApp 但在这个活动中我有 2 个配置

这是我的清单

```
<activity android:name=".pupuk.CPupukApp" android:configChanges="keyboardHidden|orientation"></activity> 
```

和

```
<activity android:name=".pupuk.CPupukApp" android:screenOrientation="portrait"></activity> 
```

运行此代码时不起作用。

如何在 manifest.xml 中的一个名称活动中运行两个配置？

谢谢你。

对不起，我的英语不好

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:47:15.153

当您设置 Alex 时，您`android:screenOrientation="portrait"`的活动将保持纵向模式，因此**无需声明** `orientation`configChanges。尝试这个。

**如果您有多个特定活动的配置，则无需多次声明它。声明该单一活动中的所有人员。**

```
<activity android:name=".pupuk.CPupukApp" android:configChanges="keyboardHidden" android:screenOrientation="portrait"></activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:46:22.700

将两个配置添加到单个活动初始化

```
<activity android:name=".pupuk.CPupukApp" android:configChanges="keyboardHidden" android:screenOrientation="portrait"></activity> 
```

# android - 等待完成时无法看到启动画面

> ID：12598911
> 
> 赞同：1
> 
> 时间：2012-09-26T09:44:36.493
> 
> 标签：android, android-asynctask, splash-screen

我试图等到spalsh屏幕结束，然后当从splash获得结果时转到另一个活动但我的代码不等待splash（AsyncTask）只是为了之后的意图。希望你能帮忙。

```
 lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            String nextActivity=new String();
            Thread splashTread = new Thread() {
                @Override
                public void run() {
                    try {
                        splash  splash=(tools.splash) new splash(first.this).execute();
                        int waited = 0;
                        while(splash.running && (waited< getResources().getInteger(R.integer.splashTimeOut)))
                        {
                            sleep(100);
                            if(splash.running) {
                                waited += 100;
                            }
                            // nextActivity=splash.newActivity;
                        }
                        Intent intent = new Intent(first.this,Class.forName("activities.third"));
                     startActivity(intent);
                    } catch(InterruptedException e) {
                        // do nothing
                    } catch (ClassNotFoundException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } finally {
                        finish();

                    }
                }
            };
            splashTread.start();

            try {
                Intent intent = new Intent(first.this,Class.forName("activities.third"));
                 startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:49:14.727

使用此代码

```
 Intent intent = new Intent(first.this,Class.forName("activities.third"));
                 startActivity(intent); 
```

在`finally`之前`finish()`而不是开始尝试块内；

# image - 将透明PNG图像转换为透明JPEG或透明GIF

> ID：12598912
> 
> 赞同：3
> 
> 时间：2012-09-26T09:44:38.553
> 
> 标签：image, png, transparency, jpeg, photoshop

我有一个透明的PNG图像。我想将它添加为[这个](http://www.bsrsoft.com/)视频录制软件的水印。但问题是，软件需要 jpeg 图像作为水印。当我将该图像转换为 JPEG（使用[Pixle Editor](http://pixlr.com/editor/)）时，它失去了透明度并且在视频中看起来不太好。
如何将透明 PNG 转换为透明 JPEG？
如何或使用哪种工具并不重要。

**编辑：**
如何将透明 PNG 转换为透明 GIF？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T09:46:37.927

JPEG 格式不允许透明度。它不包括 Alpha 通道。所以答案是：没有透明 JPEG 图像这样的东西。使用 PNG、GIF 或基于矢量的格式可以实现透明度，不知道您是否可以管理这些格式的水印？

# android - Android AlarmManager 不断关闭

> ID：12598913
> 
> 赞同：2
> 
> 时间：2012-09-26T09:44:43.840
> 
> 标签：android, alarmmanager

我正在为我的计时器使用 AlarmManager。我有2节课。

在第一堂课（MainActivity）中，我用下一个代码开始我的警报：

```
public void startAlarm(long Seconds) {
    Intent myIntent = new Intent(MainActivity.this, MyAlarmService.class);
    pendingIntent = PendingIntent.getService(MainActivity.this, 13141337,
            myIntent, 0);
    AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
    Calendar calendar = Calendar.getInstance();
    calendar.setTimeInMillis(System.currentTimeMillis());
    calendar.add(Calendar.SECOND, (int) Seconds);
    alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(),
            pendingIntent);
} 
```

在另一个类（AlarmSound）中，闹钟响起并且手机振动，我正在调用我的取消闹钟方法。

```
public void stopAlarm(){
    Intent intentstop = new Intent(AlarmSound.this, MyAlarmService.class);
    PendingIntent senderstop = PendingIntent.getBroadcast(AlarmSound.this,
            13141337, intentstop, 0);
    AlarmManager myalarm = (AlarmManager) getSystemService(ALARM_SERVICE);
    myalarm.cancel(senderstop);
    Log.w("Karl","stopAlarm?");
} 
```

这是正确的方法吗？因为我的闹钟在 android 4.1 上不断响起。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:55:00.517

您的取消将不起作用。待处理的 Intent 必须匹配 - 因为它们具有不同的上下文（MainActivity 和 AlarmSound），所以取消将不起作用。您还必须在两者上都使用 getService 。你可以

a) 尝试重新创建匹配的待处理 Intent

b）在Service中获取启动Service的pendingIntent并用它来取消

但是如果你不使用 setRepeating()，通常每个警报只会响一次。

您确定您使用 stopself() 正确终止了您的服务并在 onStartCommand() 方法中为其提供了正确的标志吗？

# regex - 如何使用 sed 仅删除双空行？

> ID：12598916
> 
> 赞同：36
> 
> 时间：2012-09-26T09:44:52.637
> 
> 标签：regex, linux, sed

我找到了这个关于如何删除三重空行的[问题和答案。](https://stackoverflow.com/questions/4651591/howto-use-sed-to-remove-only-triple-empty-lines)但是，我只需要双空行。IE。所有双空行应完全删除，但应保留单个空行。

我知道一点 sed，但是删除三个空白行的建议命令在我头上：

`sed '1N;N;/^\n\n$/d;P;D'`

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-04-22T07:45:22.433

这会更容易`cat`：

```
cat -s 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-26T10:41:23.027

我评论了`sed`你不明白的命令：

```
sed '
    ## In first line: append second line with a newline character between them.
    1N;
    ## Do the same with third line.
    N;
    ## When found three consecutive blank lines, delete them. 
    ## Here there are two newlines but you have to count one more deleted with last "D" command.
    /^\n\n$/d;
    ## The combo "P+D+N" simulates a FIFO, "P+D" prints and deletes from one side while "N" appends
    ## a line from the other side.
    P;
    D
' 
```

删除`1N`，因为我们只需要“堆栈”中的两行，第二行就足够了`N`，更改`/^\n\n$/d;`为`/^\n$/d;`删除所有连续的两个空行。

一个测试：

内容`infile`：

```
1

2
3

4

5

6

7 
```

运行`sed`命令：

```
sed '
    N;
    /^\n$/d;
    P;
    D
' infile 
```

这会产生：

```
1
2
3

4

5

6
7 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-28T06:19:23.567

```
sed '/^$/{N;/^\n$/d;}' 
```

它只会删除文件中的两个连续空行。您只能在文件中使用此表达式，然后才能完全理解。当一个空行出现时，它将进入大括号。

通常 sed 将读取一行。`N`将第二行附加到模式空间。如果该行是空行。这两行由换行符分隔。

`/^\n$/`这种模式将匹配那个时间，只有`d`会起作用。否则`d`不行。`d`用于删除模式空间的全部内容，然后开始下一个循环。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-26T10:47:20.333

这会更容易`awk`：

```
awk -v RS='\n\n\n' 1 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-28T12:50:51.760

但是上述解决方案只删除了第一次搜索 3 个连续的空白行。要删除所有，3个连续的空行使用下面的命令

```
sed '1N;N;/^\n\n$/ { N;s/^\n\n//;N;D; };P;D' filename 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-13T10:29:36.510

据我所知，这里的解决方案都不起作用。`cat -s`正如@DerMike 所建议的那样，它不符合POSIX（如果您已经在使用`sed`另一个转换，那么它就不那么方便了），并且`sed 'N;/^\n$/d;P;D'`正如@Birei 所建议的那样，有时会删除比应有的更多的换行符。

相反，`sed ':L;N;s/^\n$//;t L'`有效。对于 POSIX 合规性 use `sed -e :L -e N -e 's/^\n$//' -e 't L'`，因为 POSIX 没有指定 using`;`来分隔命令。

例子：

```
$ S='foo\nbar\n\nbaz\n\n\nqux\n\n\n\nquxx\n';\
> paste <(printf "$S")\
>       <(printf "$S" | sed -e 'N;/^\n$/d;P;D')\
>       <(printf "$S" | sed -e ':L;N;s/^\n$//;t L')
foo     foo     foo
bar     bar     bar

baz     baz     baz
        qux     
                qux
qux     quxx    
                quxx

quxx            
$ 
```

在这里，我们可以并排查看原始文件、@Birei 的解决方案和我的解决方案。@Birei 的解决方案删除了​​所有分隔`baz`and的空白行`qux`，而我的解决方案按预期删除了除一个之外的所有行。

解释：

```
:L        Create a new label called L.

N         Read the next line into the current pattern space,
          separated by an "embedded newline."

s/^\n$//  Replace the pattern space with the empty pattern space,
          corresponding to a single non-embedded newline in the output,
          if the current pattern space only contains a single embedded newline,
          indicating that a blank line was read into the pattern space by `N`
          after a blank line had already been read from the input.

t L       Branch to label L if the previous `s` command successfully
          substituted text in the pattern space. 
```

实际上，这一次删除一个重复出现的空行，将每个空行作为嵌入的换行符读入模式空间，`N`并用`s`.

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-02-28T13:00:54.717

但是上述解决方案只删除了第一次搜索 3 个连续的空白行。要删除所有，3个连续的空行使用下面的命令

**sed '1N;N;/^\n\n$/ { N;s/^\n\n//;N;D; };P;D' 文件名**

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-10-07T09:34:30.263

只需将其通过管道传递到“uniq”命令，所有空行，无论它们的数量如何，都将缩减为一个。越简单越好。

澄清：正如 Marlar 所说，如果您不想删除“其他非空白连续重复行”，这不是一个解决方案。这*是*其他情况下的解决方案，例如尝试清理配置文件时，这是我看到这个问题时所寻求的解决方案。我确实只是使用'uniq'解决了我的问题。

# java - 会话未在两台服务器之间共享

> ID：12598919
> 
> 赞同：4
> 
> 时间：2012-09-26T09:45:03.073
> 
> 标签：java, security, jsp, web-applications, session-cookies

我的应用程序遇到了很大的问题，Web 应用程序（jsp，java，servlet）在两台服务器之间登陆，因为服务器之间存在负载共享，但不幸的是服务器之间没有维护会话现在我正在检查登录后是否存在会话是否正常否则我将从 url 中获取所有凭据（如果有人记得 url，则使用相同密钥的可见编码 url，然后大混乱）显然它根本不安全，所以我们如何在应用程序级别解决这个问题，请指导我.......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T09:48:09.673

你有两个选择：

*   **粘性会话**- 一旦某个用户访问了一台服务器，负载均衡器会确保她将始终使用完全相同的服务器。

*   **会话复制**- HTTP 会话中的每个更改都会迁移到集群中的另一个节点。负载均衡器不受影响。

这两种方法都只是配置，不需要更改您的应用程序。

# android - TabActivity 和子选项卡

> ID：12598920
> 
> 赞同：0
> 
> 时间：2012-09-26T09:45:12.480
> 
> 标签：android, android-layout, android-intent, android-tabhost

我有一个 tabActivity 类。

```
class MainActivity extends TabActivity {
    TabHost tabHost = getTabHost();

TabSpec tabOne= tabHost.newTabSpec("Tab One");
tabOne.setIndicator("Tab One", getResources().getDrawable(R.drawable.tab1));
Intent tabOneIntent = new Intent(this, PhotosActivity.class);
tabOne.setContent(tabOneIntent);

TabSpec tabTwo= tabHost.newTabSpec("Tab Two");
tabTwo.setIndicator("Tab Two", getResources().getDrawable(R.drawable.tab2));
Intent tabTwoIntent = new Intent(this, TabTwo.class);
tabTwo.setContent(videosIntent);

tabHost.addTab(tabOne);
tabHost.addTab(tabTwo);
} 
```

其中一个标签是

```
class TabTwo extends Acitity implements OnClickListener{
    public void onClick(View view) {
       //open a new activity within the tab  
    }
} 
```

虚拟活动是

```
class DummyActivity extends Activity {
} 
```

当我单击选项卡二时，将调用 TabTwo 类。当我从类中单击一个按钮时，我想在选项卡中打开一个 DummyActivity。现在使用的代码是

```
context.startActivity(intentObject); 
```

这将在全新的窗口中打开新活动。如何从选项卡中打开 DummyActivity？

提前致谢！

@all 感谢您的回复。我使用 ActivityGroup 和子活动解决了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:56:25.240

你不能使用`context.startActivity(intentObject);`

看这里：

```
 TabHost tabHost = getTabHost();

    TabSpec photospec = tabHost.newTabSpec("Photos");
    photospec.setIndicator("Photos", getResources().getDrawable(R.drawable.icon1));
    Intent photosIntent = new Intent(this, PhotosActivity.class);
    photospec.setContent(photosIntent);

    TabSpec videospec = tabHost.newTabSpec("Videos");
    videospec.setIndicator("Videos", getResources().getDrawable(R.drawable.icon2));
    Intent videosIntent = new Intent(this, VideosActivity.class);
    videospec.setContent(videosIntent);

    tabHost.addTab(photospec);
    tabHost.addTab(videospec); 
```

来自[http://www.androidhive.info/2011/08/android-tab-layout-tutorial/](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/)

您必须使用 a `TabHost`、 a`TabSpec`和 a`Intent`作为选项卡。进而`TabHost.addTab(TabSpec)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:08:01.247

1.  它看起来不像通常的 android 应用程序体验。做这样的事情要非常小心。

2.  从 3.0 开始最好使用[`Fragments`](http://developer.android.com/guide/components/fragments.html). 如果您想支持早期的设备 - 使用兼容性库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T10:38:57.230

像这样使用第一个选项卡

```
 public class TabsActivity extends TabActivity {

      TabSpec spec1 = tabHost.newTabSpec("tabone");
    spec1.setIndicator(createTabView(tabHost.getContext(), "tabone", R.drawable.tab_home));
    Intent inte = new Intent(TabsActivity.this, PhotosActivity.class);
    inte.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    spec1.setContent(inte);

    TabSpec spec2 = tabHost.newTabSpec("tabtwo");
    spec2.setIndicator(createTabView(tabHost.getContext(), "tabtwo", R.drawable.tab_account));
    Intent _int = new Intent(TabsActivity.this, TabTwoActivity.class);
    _int.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    spec2.setContent(_int);

    tabHost.addTab(spec1);
    tabHost.addTab(spec2); 
```

第二个标签

```
 public class TabTwoActivity extends TabActivity {

       TabSpec spec1 = tabHostacc.newTabSpec("tabone");
    spec1.setIndicator(createTabView(tabHostacc.getContext(), "tabone", R.drawable.tab_home));
    Intent inte = new Intent(TabTwoActivity .this,  yourfirstActivity.class);
    inte.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    spec1.setContent(inte);      

    TabSpec spec2 = tabHostacc.newTabSpec("tabtwo");
    spec2.setIndicator(createTabView(tabHostacc.getContext(), "tabtwo", R.drawable.tab_account));
    Intent _int = new Intent(TabTwoActivity .this, yoursecondActivity.class);
    _int.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    spec2.setContent(_int);      

    tabHostacc.addTab(spec1);
    tabHostacc.addTab(spec2); 
```

演示活动

```
 class yourfirstActivity extends Activity {
     }

     class yoursecondActivityextends Activity {
     } 
```

# iphone - 自定义日期选择器

> ID：12598925
> 
> 赞同：2
> 
> 时间：2012-09-26T09:45:27.003
> 
> 标签：iphone, objective-c, ios, uipickerview, uidatepicker

什么是创建只有两个轮子的 UIPicker 的最佳方法：日期和时间，如下所示：

```
Fri 5 June  |   15:30
Sat 6 June  |   15:35  < Selected
Sun 7 June  |   15:40 
```

日期将前后 7 天，时间也将包括“现在”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:58:15.660

首先制作一个 UIPickerview 和 Pickerview 的代表将是这样的 -

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
 {
return 2;
 }

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:   
  (NSInteger)component
   {
     if (component == 0)
     {
       return [arr_Date count];
      }
    else
    {
    return [arr_Time count];
     }
  }

  - (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row    
     forComponent:(NSInteger)component
      {
       if (component == 0)
         {
          return [arr_date objectAtIndex:row];
         }

     else
       {
       return [arr_Time objectAtIndex:row];
      }
    } 
```

对于日期，在您的 arr_date 中包含 7 个日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:58:09.030

你可以通过使用 UIPickerViewDelegate 方法来做到这一点：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component 
```

还可以阅读 [本](http://www.edumobile.org/iphone/iphone-programming-tutorials/how-to-implement-a-multicomponent-picker-in-iphone/)教程，该教程解释了如何实现多组件 UIPicker .. 希望对您有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T12:42:24.363

API 不提供执行此操作的方法。您可以使用 UIPickerView 而不是使用 UIDatePicker 自己制作一个非常令人信服的副本。

由于 UIDatePicker 或 UIPickerView 没有 UI_APPEARANCE_SELECTOR ，即使您无法将 UIDatePicker 内容的外观更改为其 UIControl 并且没有任何委托，因此它具有其本机外观，而在 UIPickerView 的情况下，您可以更改其内容的外观类似于在 UITableView 中。

查看此链接具有与 [使用 UIAppearance 的自定义 iOS UIDatepicker相同的场景](https://stackoverflow.com/questions/10844675/custom-ios-uidatepicker-using-uiappearance)

# android - -webkit-动画填充模式：转发；不适用于安卓 2.3.5

> ID：12598930
> 
> 赞同：0
> 
> 时间：2012-09-26T09:45:48.067
> 
> 标签：android, css

想知道是否有人知道在 android 2.3.5 上 -webkit-animation-fill-mode:forwards; 的原因 不起作用，有什么解决方法吗？我已经声明 oper 将动画的每个属性分开，解决动画根本不起作用，但这种填充模式仍然没有响应。提前谢谢。我的实际解决方法代码以及以下如何在此 android 2.3.5 中不起作用

```
.a{
-webkit-animation-duration:2.7s; 
-webkit-animation-name:a; 
-webkit-animation-timing-function:ease-in; 
-webkit-animation-fill-mode:forwards;

}

 .a{-webkit-animation:a 2.7s ease-in forwards;}

@-webkit-keyframes a{
0% {}
90% {top:370px;
-webkit-transform: rotate(0deg);}
95% {top:360px;left:255px;}
100%{top:370px;left:245px;} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:49:16.997

我实际上在这里问过它：[CSS3 animation-fill-mode polyfill](https://stackoverflow.com/questions/12534228/css3-animation-fill-mode-polyfill)

检查他们给我的一些不错的回复

* * *

Android 2.3.5`animations` [的兼容性是部分](http://caniuse.com/#feat=css-animation)的，所以你可能需要一个 JavaScript 后备

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T15:54:34.593

我遇到了同样的问题。对于 Android 尝试：

```
-webkit-animation-play-state 
```

如此处所述：[W3Schools](http://www.w3schools.com/cssref/css3_pr_animation-fill-mode.asp)

这解决了 JellyBean 上的问题

# algorithm - 如何在迭代深化/深度受限搜索中存储访问过的状态？

> ID：12598932
> 
> 赞同：3
> 
> 时间：2012-09-26T09:45:48.380
> 
> 标签：algorithm, artificial-intelligence, depth-first-search, iterative-deepening

### 更新：搜索第一个解决方案。

对于普通的深度优先搜索很简单，只需使用哈希集

```
 bool DFS (currentState) =
    {
          if (myHashSet.Contains(currentState))
          {
               return;
          }
          else
          {
                myHashSet.Add(currentState);
          }
          if (IsSolution(currentState) return true;         
          else
          {
              for (var nextState in GetNextStates(currentState))
                   if (DFS(nextState)) return true;
          }
          return false;
     } 
```

但是，当它变得有限时，我不能简单地这样做

```
 bool DFS (currentState, maxDepth) =
    {
          if (maxDepth = 0) return false;
          if (myHashSet.Contains(currentState))
          {
               return;
          }
          else
          {
                myHashSet.Add(currentState);
          }
          if (IsSolution(currentState) return true;         
          else
          {
              for (var nextState in GetNextStates(currentState))
                   if (DFS(nextState, maxDepth - 1)) return true;
          }
          return false;
     } 
```

因为那时它不会在之前进行完整的搜索（从某种意义上说，如果有的话，总是能够找到解决方案）`maxdepth`

我应该如何解决它？它会增加算法的空间复杂度吗？

或者它根本不需要记忆状态。

### 更新：

例如，决策树如下：

```
 A - B - C - D - E - A
                   |
                   F - G (Goal) 
```

从状态 A 开始，G 是一个目标状态。显然在深度 3 下有一个解决方案。

但是，使用我在深度 4 下的实现，如果搜索的方向恰好是

`A(0) -> B(1) -> C(2) -> D(3) -> E(4) -> F(5)`超过深度，那么它会回溯到`A`，但是`E`被访问，它会忽略检查方向`A - E - F - G`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T04:41:40.550

我遇到了和你一样的问题，这是我的线程[Iterative deeping in common lisp](https://stackoverflow.com/questions/13141671/iterative-deepening-in-common-lisp)

基本上要使用哈希表解决这个问题，你不能只检查一个节点之前是否被访问过，你还必须考虑它之前访问过的深度。如果您要检查的节点包含以前未见过的状态，或者以前曾见过但在更高的深度，那么您仍然应该考虑它，因为它可能会导致更浅的解决方案，而这正是迭代加深应该做到的确实，它返回的解决方案与 BFS 将返回的解决方案相同，这将是最浅的。因此，在哈希表中，您可以将状态作为键，将深度作为值。不过，在找到较浅的节点后，您将需要不断更新哈希表中的深度值。

循环检查的另一种解决方案是在从当前节点到根的路径上回溯，如果您要检查的节点已经出现在路径上，那么它将导致一个循环。这种方法会更通用，并且可以与任何搜索策略一起使用。虽然它比哈希表方法慢，时间复杂度为 O(d)，其中 d 是深度，但内存复杂度将大大降低。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:52:09.497

在 IDFS 的每一步中，你实际上是在寻找一条**最短**的路径，你不能简单地使用**hashSet**。HashSet 仅在您搜索是否存在长度不受限制的路径时才有帮助。

在这种情况下，您可能应该使用**hashMap**来存储到达状态的**最小步长**，并且仅当映射值无法更新时才修剪分支。时间复杂度可以相应地改变。

但实际上，在空间有限的情况下，使用 IDFS 代替了 BFS。由于散列状态可能占用几乎与 BFS 一样多的空间，通常您不能将所有状态都存储在 IDFS 中。

wiki 中的 IDFS 也没有散列。[http://en.wikipedia.org/wiki/Iterative_deepening_depth-first_search](http://en.wikipedia.org/wiki/Iterative_deepening_depth-first_search)

因此，让我们放弃散列并用时间换取空间！

**更新**

将状态存储在当前 dfs 堆栈中是值得的，这样搜索路径就不会变成一个微不足道的循环。实现此功能的伪代码将是：

```
bool DFS (currentState, maxDepth) =
{
      if (maxDepth = 0) return false;
      if (myHashSet.Contains(currentState))
      {
           return;
      }
      else
      {
            myHashSet.Add(currentState);
      }
      if (IsSolution(currentState) return true;         
      else
      {
          for (var nextState in GetNextStates(currentState))
               if (DFS(nextState, maxDepth - 1)) return true;
      }
      myHashSet.Remove(currentState); //the state is pop out from the stack
      return false;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T12:08:46.750

您展示的解决方案非常好，适用于 DFSID（具有迭代深化的深度优先搜索）。只是不要忘记`myHashSet`在增加深度之前清除。

# c++ - ndk-build: CreateProcess: make (e=87): 参数不正确

> ID：12598933
> 
> 赞同：33
> 
> 时间：2012-09-26T09:45:51.983
> 
> 标签：c++, windows, android-ndk, createprocess

在 Windows 平台上使用 NDK 构建静态库时出现错误：

```
process_begin: CreateProcess( "PATH"\android-ndk-r8b\toolchains\arm-linux-androideabi-4.6\prebuilt\windows\bin\arm-linux-androideabi-ar.exe, "some other commands" ) failed.
make (e=87): The parameter is incorrect.
make: *** [obj/local/armeabi-v7a/staticlib.a] Error 87
make: *** Waiting for unfinished jobs.... 
```

所有源文件都成功构建，并且在编写目标文件时会出现此错误。

在 Ubuntu 中构建此项目时，我没有收到此错误，它仅在 Windows 上发生。

我想我发现了**问题**：[CreateProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx) Win API 函数*lpCommandLine*的第二个参数最大长度为**32,768**个字符。但就我而言，它超过 32,768 个字符。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-04T09:35:48.223

也许`LOCAL_SHORT_COMMANDS`在你的 Android.mk 中设置的标志可以帮助你。它旨在克服 Windows 命令可以处理的字符数限制。

根据 $(NDK 文件夹)/docs/ANDROID-MK.html：

> LOCAL_SHORT_COMMANDS
> 
> 当您的模块具有大量源和/或依赖的静态或共享库时，将此变量设置为“true”。这会强制构建系统使用中间列表文件，并将其与库归档器或静态链接器一起使用 @$(listfile) 语法。
> 
> 这在 Windows 上很有用，命令行最多只能接受 8191 个字符，这对于复杂的项目来说太小了。
> 
> 这也会影响单个源文件的编译，将几乎所有编译器标志也放在列表文件中。
> 
> 请注意，除 'true' 之外的任何其他值都将恢复为默认行为。您还可以在 Application.mk 中定义 APP_SHORT_COMMANDS 以强制对项目中的所有模块执行此行为。
> 
> 注意：我们不建议默认启用此功能，因为它会使构建速度变慢。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-07-14T18:30:47.563

特别感谢@mbrenon！

> 请记住将 LOCAL_SHORT_COMMANDS(Android.mk) 和 APP_SHORT_COMMANDS(Application.mk) 设置如下。

```
LOCAL_SHORT_COMMANDS := true
APP_SHORT_COMMANDS := true 
```

希望这可以帮助 ！:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-19T07:44:35.637

我遇到了同样的问题，当我进行以下更改时它得到了解决

1.  右键单击应用程序-> 属性
2.  C/C++ 构建
3.  更改构建目录：${workspace_loc:/App}/默认为 ${workspace_loc:/App}/

# c++ - 无法从套接字正确读取

> ID：12598937
> 
> 赞同：0
> 
> 时间：2012-09-26T09:46:01.950
> 
> 标签：c++, qt, sockets

我有一个发送一些**异或加密字符串**的服务器应用程序。我正在从我的 QT 客户端应用程序中读取它们。有时，服务器速度较慢，我无法接收整个字符串。我尝试过类似下面的方法，但它卡住了（见下面的评论）。我怎么能等到我拥有全部数据。我试过`bytesAviable()`了，但我又卡住了（无限循环）

```
QTcpSocket * sock = static_cast<QTcpSocket*>(this->sender());
if (key == 0)
{
    QString recv(sock->readLine());
    key = recv.toInt();
    qDebug() << "Cheia este " << key;

    char * response = enc_dec("#AUTH|admin|admin",strlen("#AUTH|admin|admin"),key);
    sock->write(response);
}
else
{
    busy = true;
    while (sock->bytesAvailable() > 0)
    {
        unsigned short word;
        sock->read((char*)(&word),2);
        qDebug()<<word;
        //Sleep(100); if i do this than it works great!
        QByteArray bts = sock->read(word);
        while (bts.length() < word)
        {
            char bit; //here get's stuck
            if (sock->read(&bit,1) > 0)
                bts.append(bit);
            sock->flush();
        }

        char * decodat = enc_dec((char*)bts.data(),bts.length() - 2,key);
        qDebug() << decodat;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:54:56.317

我不知道它的含义`key == 0`是什么，但你几乎可以肯定是在滥用`available()`，就像几乎所有曾经调用它的人一样，包括我。*它告诉您在没有阻塞*的情况下可以读取多少数据。它与最终可能通过连接传递多少数据无关，原因是有 TCP API 可以告诉您前者，但不能告诉您后者。事实上后者没有任何实际意义，考虑到同行可以从现在一直写到世界末日。您应该只是阻塞和循环，直到您读取了下一项工作所需的数据量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:57:14.377

我建议您执行以下操作：

```
QObject::connect(this->m_TCPSocket, SIGNAL(readyRead()), this, SLOT(processRecivedDatagrams())); 
```

**一些解释：**

1.  创建一个类实例来管理网络是很方便的；
2.  一个成员是 TCPSocket 上的指针；
3.  在构造函数中实现来自套接字的信号连接，`readyRead()`当需要的数据通过`SLOT(processRecivedDatagrams())`. 它负责处理接收到的数据报/在这种情况下它是 processRecivedDatagrams()，也实现这个插槽

请注意，管理网络的类必须继承自 QObject 以及`s declaration include macros`MOC 的 Q_OBject`。

更新：

我还为您提供将接收到的**数据存储在堆栈或队列等容器**中，这将允许您同步发送方和接收方（**在这种情况下，容器就像缓冲区一样**）

```
// SLOT:

void Network::processRecivedDatagrams(void)
{
    if (!this->m_flagLocked) // use analog of mutex 
    {
        this->m_flagLocked = true; // lock resource

    QByteArray datagram;
    do 
    {
        datagram.resize(m_TCPSocket->pendingDatagramSize());
        m_TCPSocket->readDatagram(datagram.data(), datagram.size());
    }
            Qt::String YourString; // actualy I don`t remember how to declare Qt string
    while (m_TCPSocket->hasPendingDatagrams());
    QDataStream in (&datagram, QIODevice::ReadOnly);

        in  >> YourString

        --numberOfDatagrams;
    }

    this->m_flagLocked = false; // unlock resource
} 
```

}

# java - 获取我的日志跟踪的确切时间和日期

> ID：12598938
> 
> 赞同：0
> 
> 时间：2012-09-26T09:46:02.467
> 
> 标签：java

美好的一天可爱的人

请大哥帮忙。好吧，我是 Visual Basic 的大师，但在 Java 中，我宁愿不说。

在VB中，这是我的方法：

1.  System.DateTime.Now.ToLongTimeString()
2.  System.DateTime.Now.ToString() + "/" + System.DateTime.Now.Month.ToString() + "/" + System.DateTime.Now.Year.ToString()

第一种方法将返回确切的时间，例如 = 12:08:36 AM

第二种方法将返回确切的日期，例如 = 2012/09/26

我想得到完全相同的结果，但使用 java.How 我该怎么做。

哦，提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:49:42.513

在 .NET 中，`DateTime.Now`为您提供本地时区的*本地*日期和时间。

如果你`new Date()`在Java中使用或类似的，它会给你一个不知道时区的值。要考虑时区，您应该创建一个`Calendar`具有正确时区的字符串，或者如果您想创建一个应该使用的适当字符串`SimpleDateFormat`- 再次，在格式化之前设置为正确的时区。例如：

```
SimpleDateFormat format = new SimpleDateFormat("yyyy/MM/dd", Locale.US);
format.setTimeZone(...); // Whichever time zone you want
String text = format.format(new Date()); // "now" 
```

另请注意，[Joda Time](http://joda-time.sf.net)是一个比内置`Calendar`和`Date`类更好的日期/时间 Java API。

最后，您在 .NET 中的第二段示例代码有问题 - 您应该只评估`DateTime.Now` *一次*；理想情况下只是传入一个格式字符串，例如`DateTime.Now.ToString("yyyy/MM/dd")`. 但是，即使您想将每个位单独转换为字符串，您也可以将值一次提取到局部变量，然后重用它。否则，如果您在午夜左右执行该代码，则日期可能会更改 - 例如，如果您在 2013 年初*之前*执行它，您最终可能会得到一个字符串“2012/12/1”或“2012/1 /1" 这两个都不正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:50:40.517

使用`java.text.SimpleDateFormat`类格式化日期`new java.util.Date()`并将创建实例系统日期默认值。

```
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd");
SimpleDateFormat dateFormat1 = new SimpleDateFormat("hh:mm:ss a");
System.out.println(dateFormat.format(new Date)); //2012/09/26
System.out.println(dateFormat1.format(new Date)); //12:08:36 AM 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:47:41.763

要获取表示当前日期的对象，您可以使用 just `new Date()`，格式化它，使用[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)。

# c# - 从数据库中的 TextBox 在 TreeView 中添加新子项？

> ID：12598939
> 
> 赞同：1
> 
> 时间：2012-09-26T09:46:04.090
> 
> 标签：c#, asp.net, sql, visual-studio-2010, treeview

我已经使用下面的代码。而我的数据库中的这个表。我有文本框和按钮，我希望单击按钮可以在 Proba1、Proba2 上添加新子项...我需要在我的代码中进行哪些更改和编写：

![在此处输入图像描述](../Images/f674f8885cc50b31aca0c81200766788.png) ![在此处输入图像描述](../Images/437430e902174de5f9e1d54285599f8d.png)

输出显示：

![在此处输入图像描述](../Images/f2adf4f370b6e6a6e139be16376f370e.png)

```
protected void Page_Load(object sender, EventArgs e)
{

    fill_Tree2();

}

void fill_Tree2()
{

    DataSet PrSet = PDataset("Select * from ParentTable");

    TreeView1.Nodes.Clear();

    foreach (DataRow dr in PrSet.Tables[0].Rows)
    {

        TreeNode tnParent = new TreeNode();

        tnParent.Text = dr["ParentName"].ToString();

        tnParent.Value = dr["ParentID"].ToString();

        tnParent.PopulateOnDemand = true;

        tnParent.ToolTip = "Click to get Child";

        tnParent.SelectAction = TreeNodeSelectAction.SelectExpand;

        tnParent.Expand();

        tnParent.Selected = true;

        TreeView1.Nodes.Add(tnParent);

        FillChild(tnParent, tnParent.Value);

    }

}

public void FillChild(TreeNode parent, string ParentId)
{

    DataSet ds = PDataset("Select * from ChildTable where ParentId =" + ParentId);

    parent.ChildNodes.Clear();

    foreach (DataRow dr in ds.Tables[0].Rows)
    {

        TreeNode child = new TreeNode();

        child.Text = dr["ChildName"].ToString().Trim();

        child.Value = dr["ChildId"].ToString().Trim();

        if (child.ChildNodes.Count == 0)
        {

            child.PopulateOnDemand = true;

        }

        child.ToolTip = "Click to get Child";

        child.SelectAction = TreeNodeSelectAction.SelectExpand;

        child.CollapseAll();

        parent.ChildNodes.Add(child);

    }

}

protected DataSet PDataset(string Select_Statement)
{

    SqlConnection SqlCon = new SqlConnection(@"Data Source=.\SQLEXPRESS;Initial Catalog=cms;Integrated Security=True");

    SqlDataAdapter ad = new SqlDataAdapter(Select_Statement, SqlCon);

    DataSet ds = new DataSet();

    ad.Fill(ds);

    return ds;

} 
```

# file - 更新 iOS5 模拟器上的现有 plist

> ID：12598942
> 
> 赞同：0
> 
> 时间：2012-09-26T09:46:13.903
> 
> 标签：file, ios5, plist, simulator

我正在尝试更新现有`plist`的 iOS5 模拟器，但它失败了。

它找到 plist 并检索现有信息并更新数组，但它不写入文件。

有人会有什么想法吗？

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"content_iPhone"       ofType:@"plist"]; 
NSMutableArray *plist = [[NSMutableArray arrayWithContentsOfFile:path] mutableCopy];

// For testing purpose, get an object from the Array and add the object to array
newObject = [plist objectAtIndex:1];
[plist addObject:newObject];

[plist writeToFile:path atomically:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:47:38.817

您不能写入应用程序包中的文件，只能从中读取。

您可以将文件写入用户的 Documents 目录：查看

```
NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) 
```

这将返回一个数组，其中的第一个对象将是您的应用程序的用户 Documents 目录的路径。您可以在第一次运行应用程序时将文件复制到那里，并在将来在该位置进行更新。

# javascript - 使用 css 更改 javascript 变量的宽度值

> ID：12598943
> 
> 赞同：0
> 
> 时间：2012-09-26T09:46:15.707
> 
> 标签：javascript, css, variables, width, responsive-design

我的 javascript 中有以下代码：

```
var demoSlider_3 = Sliderman.slider({container: 'SliderName_3', 
                                     width: 167, 
                                     height: 250, 
                                     effects: effectsDemo3, 
                                     display: { autoplay: 4000 }
                                    }); 
```

我想要做的是在 CSS 文件中设置宽度和高度（我试图让它响应）。

现在我还没有找到解决方案......
所以如果有人有线索，我会很感激你的帮助！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:05:38.347

您可以通过 CSS 设置初始宽度高度，并通过 JavaScript 从应该成为滑块的元素中读取它。使用内联样式、CSS 类或其他任何样式来设置元素的样式都没有关系。您只需要读取计算值并在滑块初始化中使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:13:49.363

如果我想使用 JavaScript 在页面中添加一些东西来响应特定元素的尺寸，我通常会使用 width = '100%' height = '100%' 然后使用 css 定制我的包装元素，使其具有定义的宽度和高度。

示例（为简单起见使用 jQuery）：

CSS：

```
.wrapper { width: 300px; height: 300px; } 
```

js：

```
$(function(){
  var myElementToEmbed = $('<div />').css({width:'100%',height:'100%'});
  var targetWrapper = $('.wrapper');
  targetWrapper.append( myElementToEmbed );
}); 
```

域名：

```
<div class="wrapper"></div> 
```

这样，JavaScript 处理功能性工作*（应该如此）*，而 CSS 处理显示样式*（应该如此）*。

# windows-7 - Pyinstaller，如何在 32 位 Linux 上制作 32 位和 64 位 .exe？

> ID：12598944
> 
> 赞同：5
> 
> 时间：2012-09-26T09:46:15.337
> 
> 标签：windows-7, python-2.7, 32bit-64bit, exe, pyinstaller

我在 ubuntu 12.04 32 位上使用 pyinstaller 2.0 和 python2.7 创建了可执行文件（所以我假设 python 也是 32 位的）。

这是一个简单的控制台程序（无 gui），连接到 TCP/IP 服务器并发送帧。它可以在我的 ubuntu 32 位下运行，但不能在 Windows 7 32 位和 64 位上运行。在 Win32bit 上返回错误“设备未准备好”，在 Win64bit 上返回错误“应用程序架构错误”。

这可能是什么原因造成的？

这是整个应用程序代码的链接（很小）[http://pastebin.com/qj96vpgK](http://pastebin.com/qj96vpgK)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-09T18:51:49.060

Linux 版本的 PyInstaller 不能制作`.exe`s 或任何非 Linux 原生格式。为了使 Windows 可执行文件，您需要使用 WINE（或者至少他们[说](http://www.pyinstaller.org/wiki/FAQ#Features)，但我不知道该怎么做），或者使用 Windows 计算机。

此外，如果您使用的 Windows 计算机是 32 位的，则它无法生成 64 位二进制文​​件。如果您安装的是 64 位 Windows，它可以轻松制作 64 位二进制文​​件，但要制作 32 位二进制文​​件，您需要安装 32 位版本的 Python（以及程序所需的所有库） ）。

因此，一种为给定程序制作 32 位和 64 位可执行文件的方法，将代码复制到 Windows 64 位操作系统，安装 32 和 64 位 Python 和`pywin32`，并使用每个不同的 Python 使用 PyInstaller。

# c++ - 重新启动后删除注册表项

> ID：12598951
> 
> 赞同：3
> 
> 时间：2012-09-26T09:46:41.717
> 
> 标签：c++, windows, registry

我使用以下代码将目录路径保存到注册表：

```
HKEY hKey;
RegCreateKeyEx(HKEY_CURRENT_USER, L"Software\\BArtWell\\MyApp", 0, NULL, REG_OPTION_VOLATILE, KEY_WRITE, NULL, &hKey, NULL);
RegSetValueEx(hKey,L"Directory",0,REG_SZ,(LPBYTE)sz,(DWORD)wcslen(sz)*sizeof(wchar_t));
RegCloseKey(hKey); 
```

并且在重新启动之前工作正常。但重启后路径 HKCU\Software\BArtWell\MyApp 不存在。在 XP 和 Windows7 上测试，结果相同。我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T09:56:21.247

阅读[`REG_OPTION_VOLATILE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724844%28v=vs.85%29.aspx). 然后将其替换为 0。

# ios - 跟踪用户对推送通知的选择 [允许/不允许]

> ID：12598955
> 
> 赞同：2
> 
> 时间：2012-09-26T09:46:48.300
> 
> 标签：ios, cocoa-touch, push-notification

当应用程序需要注册推送通知（UIApplication registerForRemoteNotificationTypes）时，弹出窗口显示允许/不选择。

有没有办法跟踪用户*何时*做出此选择？

因为解决方案：

```
NSUInteger rntypes = [[UIApplication sharedApplication] enabledRemoteNotificationTypes]; 
```

很好，但在用户触摸某些东西之前，默认情况下它是“否”。我应该只在用户做出选择*后检查这个配置。*

结果是在我的 EasyAPNS 服务器中，大多数应用程序都处于“禁用”模式，直到用户重新启动它们（因为第二次正确的配置将被推送到我的服务器）。因此，第一次启动时，可能不会考虑用户的真正选择（如果您真的很快接受，那么在我的应用程序注册到 EasyAPNS 之前，您的选择会在第一次启动时反映在服务器上）

任何想法 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T10:03:13.987

似乎无法确定是否已显示允许弹出窗口。我依靠用户默认值来跟踪这一点：

```
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken
{
    BOOL didRegisterForPush = [[NSUserDefaults standardUserDefaults] boolForKey:@"didRegisterForPush"];
    if (!didRegisterForPush) {
        [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"didRegisterForPush"];
        [[NSUserDefaults standardUserDefaults] synchronize];
    }
    // .. send deviceToken to server
} 
```

现在您可以使用以下方法确定授权状态：

```
- (PushAuthorizationStatus)pushAuthorizationStatus
{
    UIRemoteNotificationType types = [[UIApplication sharedApplication] enabledRemoteNotificationTypes];
    if (types) {
        return kPushAuthorizationStatusAuthorized;
    }
    BOOL didRegisterForPush = [[NSUserDefaults standardUserDefaults] boolForKey:@"didRegisterForPush"];
    if (didRegisterForPush) {
        return kPushAuthorizationStatusDenied;
    }
    return kPushAuthorizationStatusNotDetermined;
} 
```

使用它，您可以将`NotDetermined`状态发送到服务器而不是`Denied`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-14T20:48:25.387

在 iOS 8 及更高版本下，该过程略有不同。在 iOS 8 中，该`enabledRemoteNotificationTypes`方法被替换为`isRegisteredForRemoteNotifications`.

*但是，如果应用程序尝试注册通知，则* `isRegisteredForRemoteNotifications` *始终返回`YES`*，无论用户是否实际允许它们。

要确定用户是否实际允许通知，请[在此处](https://stackoverflow.com/a/28441181/1161906)使用@Lefteris 提供的函数：

```
- (BOOL)pushNotificationsEnabled {
    if ([[UIApplication sharedApplication] respondsToSelector:@selector(currentUserNotificationSettings)]) {
        UIUserNotificationType types = [[[UIApplication sharedApplication] currentUserNotificationSettings] types];
        return (types & UIUserNotificationTypeAlert);
    }
    else {
        UIRemoteNotificationType types = [[UIApplication sharedApplication] enabledRemoteNotificationTypes];
        return (types & UIRemoteNotificationTypeAlert);
    }
} 
```

# delphi - 从注册表读取时将十六进制转换为字符串

> ID：12598957
> 
> 赞同：1
> 
> 时间：2012-09-26T09:46:55.447
> 
> 标签：delphi, postgresql, delphi-7

我正在使用 Delphi 7 应用程序和 BDE（遗留软件）。每当像这样从 ODBC 管理员更改/保存密码时（例如，如果密码是 `my,password`）

![在此处输入图像描述](../Images/d29595058cd384067d9c1ab022b921aa.png)

它被保存`my%2cpassword`在注册表中。

![在此处输入图像描述](../Images/cc8a825eb9433285915687c077dd97a9.png)

我的应用程序读取注册表路径

> HKEY_CURRENT_USER\Software\ODBC\ODBC.INI\mysource
> 密码

然后使用密码执行 psql 命令，

```
 "C:\Program Files (x86)\PostgreSQL\9.0\bin\psql.exe"  -h localhost -p 5432 -d myDB -U myadmin -f "C:\Users\user\AppData\Roaming\ff.sql" 
```

由于密码现在`%2c`在其中而不是`,`身份验证失败。当我读取密码并写入`pgpass.conf`文件时。

十六进制字符与普通字符混合时如何将十六进制字符转换为正确的字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:20:20.657

这似乎是字符串的直接 urlencoding。

%2c 是，在 urlencoding 中。简单使用 url 解码。

查看此 SO 问题以了解信息[标准 URL 编码功能？](https://stackoverflow.com/questions/776302/standard-url-encode-function)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T09:55:19.407

由于**%** get 被编码为**%25**您应该能够从字符串中挑选出它们并将它们改回它们的代表字符。

为此，您需要使用 Pos/PosEx 在 str 中找到**%**并拉出后面的 2 位数字（我认为它总是 2）

这不是我的想法，所以如果它没有编译/参数顺序错误等，请道歉。这应该足以给你一个大致的想法。

```
function GetNextHex(InStr:String;var Position:Integer):String;
var
  NextHex: Integer;
begin
  NextHex := PosEx('%', InStr, Position);
  if (NextHex > -1) then
    Result := Copy(InStr, NextHex, 3)
  else 
    Result := '';
  Position := NextHex;
end; 
```

要将十六进制更改为 chr，请将**%**换成**$**并使用它，然后您可以根据自己的喜好`StrToInt`使用`Char`或使用它。`Chr`

```
function PercentHexToInt(Hex: String):Integer;
  var
   str : string;
begin
    if (Hex[1] <> '%') then  Result := 0
    else
   begin
   // Result := strtoint(StrToHex('$' + Copy(Hex, 1,2)));
      str :=StringReplace(HEx,'%','',[rfReplaceAll,rfIgnoreCase]);
      str:=trim(str);
      Result := StrToInt(('$' +str));
  end;
end; 
```

有了这些，您应该能够扫描替换十六进制值的字符串

```
function ReplaceHexValues(Str: String):String;
var
  Position:Integer;
  HexValue:String;
  IntValue:Integer;
  CharValue:String;
begin
  Position := 0;
  while(Position > -1)
  begin
    HexValue := GetNextHex(Str, Position);
    IntValue := PercentHexToInt(HexValue);
    CharValue := Char(IntValue);
    if (CharValue = #0) then break; 
    //Note that Position Currently contains the the start of the hex value in the string
   Delete(Str, Position, 3);
   Insert(CharValue,Str,Position);         
  end;
   Result:=Str;
end; 
```

# c# - 在 asp.net 站点中添加 wordpress(blogs)

> ID：12598960
> 
> 赞同：0
> 
> 时间：2012-09-26T09:47:06.023
> 
> 标签：c#, asp.net, .net

我可以在现有的 asp.net 站点中添加 wordpress（博客）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:49:24.027

第一步是在您的 Web 服务器上启用 PHP。如果您使用的是 IIS ，则需要安装和启用一个[模块。](http://php.iis.net/)完成此操作后，您可以在 IIS 中与 ASP.NET 应用程序并排托管一个 Wordpress 站点。

Web PI 中甚至[还安装了 WordPress 。](http://www.microsoft.com/web/gallery/install.aspx?appsxml=http://www.microsoft.com/web/webpi/2.0/WebApplicationList.xml&appid=WordPress)

# javascript - 单页javascript中的多个标签

> ID：12598962
> 
> 赞同：2
> 
> 时间：2012-09-26T09:47:19.323
> 
> 标签：javascript, tabs

我正在编写一个我在 Uni 设计的网站，除了一个需要两组选项卡菜单的页面之外，它大部分都是完整的。

第一个使用我发现的一些 JavaScript 完美运行，但我无法让第二个工作。我知道我需要更改 JS 中的一些东西，但我真的很了解它，我不确定要更改哪些位。我试过用它做实验，但这真的让我很沮丧。

如果有人可以向我解释我需要更改什么以及为什么它不起作用那将是惊人的，因为我宁愿学习 JS 并知道我做错了什么，而不仅仅是复制和粘贴东西。谢谢你。

这是HTML：

```
 <ul id="tabs">
      <li><a href="#one">Lardy Cake</a></li>
      <li><a href="#two">Birds Fatty Balls</a></li>
      <li><a href="#three">Pastry</a></li><br/>
    </ul>

<ul id="tabs2">
 <li><a href="#four">Lard Buns</a></li>

  <li><a href="#five">Soap</a></li>

  <li><a href="#six">Buttermilk Biscuits</a></li>

</ul>

<div id="one" class="tabContent">
<p><img src="images/recipes/lardycaketitle.png"class="lardytitle" ></a></p>
 <p><img src="images/recipes/lardycake.png"class="lardypic"></a></p>
<ul class="ing" ><li><b>INGREDIENTS</b></li>

<li>4 cups plain flour </li>
<li>1/2 tbsp salt</li> 
<li>2 tsp dried yeast</li>
<li>1/2 tbsp sugar</li> 
<li>1/2 pint warm water</li>
<li> 1 1/2 cups lard</li>
<li>2 tbsp crushed sugar cubes</li> 
<li>1/4 tbsp each nutmeg, cinnamon and allspice</li> 
<li>1 tbsp currants</li>
<li> 1 tbsp sultanas</li></p>
</ul>
<ul class="method"><li><b>METHOD</b></li>
<p><li>1\. Cream the yeast with half a tablespoon of sugar and half a pint of warm water.</li> 
<li>2\. Add to the flour mixed with the salt and form into a dough and knead. Put in a warm place until doubled in size. </li>
<li>3\. Knock back and roll out into a rectangle 1/2 an inch thick. Dot with lard and sugar. </li>
<li>4\. Fold the dough into 3 and roll. Dot with lard and sugar again and roll out twice more. </li>
<li>5\. At the last rolling, sprinkle with currants and sultanas and roll to fit a well-greased tin.</li></p>

<p><b>BAKE</b></p>
<p>220 degrees Celsius until golden brown.</p>
</ul>

</div>

<div id="two" class="tabContent">
<p><img src="images/recipes/fattyballstitle.png"class="lardytitle" ></a></p>
 <p><img src="images/recipes/fattyballs.png" class="fattypic"></a></p>
<ul class="ing" ><li><b>INGREDIENTS</b></li>

<li>Nuts </li>
<li>Seeds</li> 
<li>Lard</li>
<li>Bread</li> 
</p>
</ul>
<ul class="method"><li><b>METHOD</b></li>
<p><li>1\. Melt lard to liquid. Allow the lard to cool down to a pasty state.</li> 
<li>2\. Mix in nuts, seeds, cooked bacon or anything else you think insect-eating birds might like. </li>
<li>3\. Form the mixture into a ball </li>
<li>4\. Place the ball inside a mesh bag or imbed a string for hanging.</li>
<li>5\. Put the ball into the freezer to solidify.</li></p>

</ul>

</div>
<div id="three" class="tabContent">
<p><img src="images/recipes/pastrytitle.png"class="lardytitle" ></a></p>
 <p><img src="images/recipes/pastry.png" class="pastrypic"></a></p>
<ul class="ing" ><li><b>INGREDIENTS</b></li>

<li>3/4 tsp salt</li>
<li> 1 1/2 c sifted all-purpose flour</li>
<li> 1/2 c lard </li>
<li>2 1/2 tbsp water</li>
</p>
</ul>
<ul class="method"><li><b>METHOD</b></li>
<p><li>1\. Add salt to flour and sift into a mixing bowl. </li>
<li>2\. Add lard, which is not chilled and blend with pastry blender until the mixture resembles course meal.</li>
<li>3\. Sprinkle the water over the surface of the flour. </li>
<li>4\. Mix gently by blending the mixture together with a fork.</li>
<li> 5\. Dough will hold together and should be dry enough to handle.</li></p>

<p><b>BAKE</b></p>
<p>425 degrees Celsius <br/>for 12-15 minutes.</p>
</ul>

</div>
</div>
<div id="four" class="tabContent2">
<p><img src="images/recipes/bunstitle.png"class="bunstitle" ></a></p>
 <p><img src="images/recipes/buns.png"class="bunspic"></a></p>
<ul class="ing2" ><li><b>INGREDIENTS</b></li>
<li>1/8 lb fresh cake yeast </li>
<li>2 1/2 c cold water </li>
<li>1/2 tsp salt</li> 
<li>1 egg</li>
<li>1/2 c warm water </li>
<li>1 c sugar</li>
<li> 1/3 c warm lard Flour to stiffen</li>
</ul>
<ul class="method2"><li><b>METHOD</b></li>
<p><li>1\. Dissolve yeast in warm water and set aside. </li>
<li>2\. Mix together cold water, sugar, salt, lard, and egg, beat well.</li>
<li>3\. Add yeast and sifted flour to liquid mixture until stiff.</li> 4\. Knead dough until elastic. </li>
<li>5\. Let dough rise twice and beat down each time. Last time roll into bun size balls. Let rise last time.</li></p>

<p><b>BAKE</b></p>
<p>350 degrees Celsius for 20 minutes.</p>
</ul>
</div>

  <div id="five" class="tabContent2">
<p><img src="images/recipes/soaptitle.png"class="bunstitle" ></a></p>
 <p><img src="images/recipes/soap.png"class="bunspic"></a></p>
<ul class="ing2" ><li><b>INGREDIENTS</b></li>
<li>A small plastic dishpan Saucepan </li>
<li>1 can of lye</li>
<li> 3 pounds of lard </li>
<li>Plastic gloves</li>
</ul>
<ul class="method2"><li><b>METHOD</b></li>
<p><li>1\. Pour 3 cups of cold water into a pan. </li>
<li>2\. Add the lye a bit at a time, stirring throughout.</li>
<li>3\. Let cool at least one hour. </li>
<li>4\. Pour the lye solution into the dishpan with the lard. The lard will melt. Mix thoroughly, at least until it looks like thick pudding. 5\. Let it set until the next morning, then cut it into bars. It will get harder after a few days.</p></li>
</ul>
</div>
</div> 
```

这是JS：

```
 var tabLinks = new Array();
    var contentDivs = new Array();

    onload = function init() {

      // Grab the tab links and content divs from the page
      var tabListItems = document.getElementById('tabs').childNodes;
      for ( var i = 0; i < tabListItems.length; i++ ) {
        if ( tabListItems[i].nodeName == "LI" ) {
          var tabLink = getFirstChildWithTagName( tabListItems[i], 'A' );
          var id = getHash( tabLink.getAttribute('href') );
          tabLinks[id] = tabLink;
          contentDivs[id] = document.getElementById( id );
        }
      }

      // Assign onclick events to the tab links, and
      // highlight the first tab
      var i = 0;

      for ( var id in tabLinks ) {
        tabLinks[id].onclick = showTab;
        tabLinks[id].onfocus = function() { this.blur() };
        if ( i == 0 ) tabLinks[id].className = 'selected';
        i++;
      }

      // Hide all content divs except the first
      var i = 0;

      for ( var id in contentDivs ) {
        if ( i != 0 ) contentDivs[id].className = 'tabContent hide';
        i++;
      }
    }

    function showTab() {
      var selectedId = getHash( this.getAttribute('href') );

      // Highlight the selected tab, and dim all others.
      // Also show the selected content div, and hide all others.
      for ( var id in contentDivs ) {
        if ( id == selectedId ) {
          tabLinks[id].className = 'selected';
          contentDivs[id].className = 'tabContent';
        } else {
          tabLinks[id].className = '';
          contentDivs[id].className = 'tabContent hide';
        }
      }

      // Stop the browser following the link
      return false;
    }

    function getFirstChildWithTagName( element, tagName ) {
      for ( var i = 0; i < element.childNodes.length; i++ ) {
        if ( element.childNodes[i].nodeName == tagName ) return element.childNodes[i];
      }
    }

    function getHash( url ) {
      var hashPos = url.lastIndexOf ( '#' );
      return url.substring( hashPos + 1 );
    } 
```

谢谢你任何人都可以给我的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:18:31.077

而不是重新发明轮子，[jquery UI 选项卡](http://jqueryui.com/demos/tabs/)呢？

这是一个非常好的插件，它使您能够在 Web 应用程序中使用选项卡。

查看[文档](http://docs.jquery.com/UI/API/1.8/Tabs)- 如果您是 jQuery 新手，[本](http://docs.jquery.com/Tutorials%3aGetting_Started_with_jQuery)教程和[本](http://docs.jquery.com/Tutorials%3aHow_jQuery_Works) 教程可能会对您有所帮助。有关教程和文档的完整列表，请参阅[教程](http://docs.jquery.com/Tutorials)部分。

# javascript - 如何在鼠标悬停时停止 js 功能？

> ID：12598966
> 
> 赞同：1
> 
> 时间：2012-09-26T09:47:32.060
> 
> 标签：javascript, html, pentaho

此代码在前端的指定时间间隔内动态移动一些仪表板文件。现在，一旦我将鼠标移到任何特定的仪表板文件上，它就不会停止。所以建议我停止鼠标悬停动态动作的代码。

```
var i=0; 
```

var stp;

```
var dd = ['/pentaho/content/pentaho-cdf-dd/Render?solution=FPBI&path=%2FDashboards&file=FPBI_Map.wcdf',
          '/pentaho/content/pentaho-cdf-dd/Render?solution=FPBI&path=%2Fcss&file=AnalysisBasedonReg.wcdf',
          '/pentaho/content/pentaho-cdf-dd/Render?solution=FPBI&path=%2Fcss&file=AnalysisBasedonTime.wcdf'];
function k()
{
self.setInterval("clock()",8000);
}
function clock()
{
document.getElementById('mainfrm').src =dd[i];
i++;
if(i==4)
{
i=0;
}
}

function StopFunction(){
clearInterval(stp);
} 
```

布局页面：

```
<div class="map">
<body onload="k()" onmouseover="StopFunction()">
<iframe src="/pentaho/content/pentaho-cdf-dd/Render?solution=FPBI&path=%2Fcss&file=FPBIImg.wcdf" style="width:675px;height:690px;overflow:hidden" frameborder='0' id="mainfrm">
</iframe>
</div>
</div>
. 
```

- 编辑

现在 onmouseover 功能正在工作，但是当我移除鼠标时，没有任何动作发生。我尝试使用 onmouseout 功能。任何人都可以建议我在移除鼠标后保留或继续现有的旧功能的 js 功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T10:01:49.887

```
var stp;
function k()
{
 stp=setInterval(function(){clock()},8000);
}
function clock()
{
 document.getElementById('mainfrm').src =dd[i];
 i++;
 if(i==4)
{
 i=0;
 }
 }

function StopFunction()
{
  clearInterval(stp);
}

<div class="map" onmouseover="StopFunction()"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T09:51:47.160

试试这个 - 完整的代码 - 所有不显眼 唯一要考虑的是全局变量，这是不受欢迎的

[演示](http://jsfiddle.net/mplungjan/SHaF2/)

```
<html>
<head>
<script>
var tId, urlIndex=0, dd = ['/pentaho/content/pentaho-cdf-dd/Render?solution=FPBI&path=%2FDashboards&file=FPBI_Map.wcdf',
      '/pentaho/content/pentaho-cdf-dd/Render?solution=FPBI&path=%2Fcss&file=AnalysisBasedonReg.wcdf',
      '/pentaho/content/pentaho-cdf-dd/Render?solution=FPBI&path=%2Fcss&file=AnalysisBasedonTime.wcdf'];

function clock() {
  document.getElementById('mainfrm').src =dd[urlIndex];
  urlIndex++;
  if(urlIndex>=dd.length) {
    urlIndex=0;
  }
}
function k() {
  tId = setInterval(clock,8000);
}
window.onload=function() {
  k(); // start the script
  var mapDiv = document.getElementById("mapDiv");
  mapDiv.onmouseover=function() {
    clearInterval(tId)
  }

  // the following MAY trigger when over the iframe - remove if necessary
  mapDiv.onmouseout=function() {
    k();
  }

}
</script>
</head>
<body>

  <div id="mapDiv" class="map">
    <iframe src="/pentaho/content/pentaho-cdf-dd/Render?solution=FPBI&path=%2Fcss&file=FPBIImg.wcdf" style="width:675px;height:690px;overflow:hidden" frameborder='0' id="mainfrm"></iframe>
  </div>
</body>
</html> 
```

# objective-c - Objective C - 将数组中的值与任意值进行比较

> ID：12598967
> 
> 赞同：1
> 
> 时间：2012-09-26T09:47:34.043
> 
> 标签：objective-c, xcode, arrays, loops

您将如何对一个数组进行排序，该数组也包含 0 个值，即

*   -54
*   0
*   -12
*   0
*   -10

并将其与一个常数（比如-5）进行比较，这将返回相应最接近值的**索引**（最小差异）？（即最接近的值 = -10，所以返回值 = 4）

这里的挑战是 0 值应该总是被忽略，并且数组**不能**事先排序

这是一个类似的问题，在我的情况下它的答案不太适用 [如何找到最接近任意（非成员）数字的数组元素？](https://stackoverflow.com/questions/4193708/how-do-i-find-the-closest-array-element-to-an-arbitrary-non-member-number)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:58:33.443

这相对简单：

```
NSArray *data = @[@-54, @0, @-12, @0, @-10];
NSUInteger best = 0;
int target = -5;
for (NSUInteger i = 1 ; i < data.count ; i++) {
    int a = [[data objectAtIndex:best] intValue];
    int b = [[data objectAtIndex:i] intValue];
    if (b && abs(a-target) > abs(b-target)) { // Ignore zeros, check diff
        best = i;
    }
}
// At this point, "best" contains the index of the best match
NSLog(@"%lu",best); // Prints 4 
```

# java - Android 等待 UI 线程

> ID：12598973
> 
> 赞同：3
> 
> 时间：2012-09-26T09:48:02.093
> 
> 标签：java, android, multithreading

出于测试目的，我需要获取屏幕上所有可见视图的坐标。但是，在检查输出时，似乎 UI 线程尚未完成对所有视图的绘制/定位/应用设置。有些视图是 0x0 像素，而它们应该是可见的（并且它们在模拟器和物理设备上）。一些底部对齐的按钮的位置类似于楼梯等。

问：如何等待 UI Thread 完成绘制（或至少等待一秒钟，应该绰绰有余），所以所有可见视图的坐标都是准确的？

我怀疑它与线程有关，但我找不到任何明确的答案。到目前为止，我还没有任何自我声明的线程。

编辑：我使用 onBackPressed 使一堆视图可见，然后在 xml 中捕获它，使以前的视图不可见和其他视图可见，在 xml 中捕获它等等。我通过一些不同的视图组合和“xml-screenshot”进行迭代“每个组合。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T09:49:38.620

```
LinearLayout layout = (LinearLayout)findViewById(R.id.YOUD VIEW ID);
ViewTreeObserver vto = layout.getViewTreeObserver(); 
vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() { 
    @Override 
    public void onGlobalLayout() { 
        this.layout.getViewTreeObserver().removeGlobalOnLayoutListener(this); 
        int width  = layout.getMeasuredWidth();
        int height = layout.getMeasuredHeight(); 

    } 
}); 
```

您需要调整它以使用您的布局，并将 ID 添加到基本父布局。

通过使用[ViewTreeObserver](http://developer.android.com/reference/android/view/ViewTreeObserver.html)，您可以了解布局何时完成绘制，然后运行所需的代码

# drupal-7 - drupal 7在节点中包含站点范围的联系表

> ID：12598977
> 
> 赞同：1
> 
> 时间：2012-09-26T09:48:09.677
> 
> 标签：drupal-7, drupal-modules

我想从节点添加*站点范围用户。*

我用过`Drupal 7`。

站点范围的表单 ID-s：（`contact_site_form`我从中得到`from.inc`）

使用 alter 我*更改*了表单内容。

在节点代码中：

**php代码：**

```
print drupal_render(drupal_get_form('contact_site_form')); 
```

**错误信息：**

```
Notice: Undefined index: contact_site_form drupal_retrieve_form() függvényben (D:\wamp\www\online_recruitment\includes\form.inc 766 sor).
Warning: call_user_func_array() [function.call-user-func-array]: First argument is expected to be a valid callback, 'contact_site_form' was given drupal_retrieve_form() függvényben (D:\wamp\www\online_recruitment\includes\form.inc 802 sor). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:31:48.080

我找到了答案：

[http://drupal.org/node/237559#comment-780448](http://drupal.org/node/237559#comment-780448) -> D6 方式，但也适用于 D7

php: require_once drupal_get_path('module', 'contact') .'/contact.pages.inc';

它就像一个魅力。

# ruby - 通过 Ruby 发布 XML 文件

> ID：12598983
> 
> 赞同：1
> 
> 时间：2012-09-26T09:48:26.257
> 
> 标签：ruby, xml, post

我在受基本身份验证保护的外部服务（someurl.com/xmlimport.html）上获得了以下表格。

```
<html>
<head><title>Upload</title></head>
<body>
<h1>Upload</h1>
<h2>XML Upload</h2>
<!--<form action="/cgi-bin/xmlimport.pl" method="post" accept-charset="UTF-8" enctype="multipart/form-data">-->
<form action="/cgi-bin/xmlimport.pl" method="post" enctype="multipart/form-data">
Datei: <input name="dateiname" type="file" size="100" accept="text/*">
<input type="submit" value="Absenden"/>
</form>
</body>
</html> 
```

我想通过 ruby​​ 发布 xml 文件。这是我到目前为止得到的：

```
require "net/http"
require "uri"

uri = URI.parse('http://someurl.com/xmlimport.html')
file = "upload.xml"

post_body = []
post_body << "Content-Disposition: form-data; name='datafile'; filename='#{File.basename(file)}'rn"
post_body << "Content-Type: text/plainrn"
post_body << "rn"
post_body << File.read(file)

puts post_body

http = Net::HTTP.new(uri.host, uri.port)
request = Net::HTTP::Post.new(uri.request_uri)
request.basic_auth "user", "pass"
request.body = post_body.join
request["Content-Type"] = "multipart/form-data"

resp = http.request(request)

puts resp.body 
```

响应是我的 xml 文件和表单的内容。但没有任何处理。我究竟做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:41:16.363

[Ruby Inside 的 Net::HTTP Cheat Sheet](http://www.rubyinside.com/nethttp-cheat-sheet-2940.html)上有很好的例子，包括文件上传。看起来您缺少文件边界。他们的例子：

```
require "net/http"
require "uri"

# Token used to terminate the file in the post body. Make sure it is not
# present in the file you're uploading.
BOUNDARY = "AaB03x"

uri = URI.parse("http://something.com/uploads")
file = "/path/to/your/testfile.txt"

post_body = []
post_body << "--#{BOUNDARY}rn"
post_body << "Content-Disposition: form-data; name="datafile"; filename="#{File.basename(file)}"rn"
post_body << "Content-Type: text/plainrn"
post_body << "rn"
post_body << File.read(file)
post_body << "rn--#{BOUNDARY}--rn"

http = Net::HTTP.new(uri.host, uri.port)
request = Net::HTTP::Post.new(uri.request_uri)
request.body = post_body.join
request["Content-Type"] = "multipart/form-data, boundary=#{BOUNDARY}"

http.request(request) 
```

作为替代方案，您可以考虑使用其他 http 库来提取 Net::HTTP 的低级垃圾。结帐[法拉第](https://github.com/technoweenie/faraday)；您只需几行代码即可完成文件上传。

# php - SimpleXml 没有给出正确的输出

> ID：12598987
> 
> 赞同：-1
> 
> 时间：2012-09-26T09:48:53.417
> 
> 标签：php, xml, soap, xml-parsing, simplexml

我使用 Soap 进行 Web 服务调用，使用 PHP 进行整个操作。当我发送请求时，我得到的响应为“341025COMPLETE”。但是当我为 Source 选择它时，它会打印它后面的 xml。

XML 是这样的：

```
"<testscreening xmlns="https://www.test.com/xml/services/PSI">
<response>
<reportID>341025</reportID>
<backgroundreport></backgroundreport>
<status>COMPLETE</status>
</response>
</testscreening>" 
```

如果我想要它的输出可以存储到数据库中，我该如何实现它？注意：这里提到的 xmlns 是根据隐私更改的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:59:02.010

使用`DOMDocument`：

```
$dom = new DOMDocument;
$dom->loadXML($xml);

$el = $dom->getElementsByTagName('*');

foreach($el as $one){
    if($one->nodeName == 'reportID'){
        $reportId = $one->nodeValue;
    }
    if($one->nodeName == 'status'){
        $status = $one->nodeValue;
    }
}

echo $reportId.' - '.$status;
// 341025 - COMPLETE 
```

# python - re 查找两个字符串的最长匹配后缀

> ID：12598988
> 
> 赞同：0
> 
> 时间：2012-09-26T09:49:00.703
> 
> 标签：python, regex, string-matching, longest-substring

我有两个字符串，例如：

```
a = '54515923333558964'
b = '48596478923333558964' 
```

现在最长的后缀匹配是

```
c = '923333558964' 
```

使用 re 的解决方案是什么？

这是我为前缀匹配找到的解决方案：

```
import re
pattern = re.compile("(?P<mt>\S*)\S*\s+(?P=mt)")
a = '923333221486456'
b = '923333221486234567'
c = pattern.match(a + ' ' + b).group('mt') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T09:54:22.637

尝试[`difflib.SequenceMatcher`](http://docs.python.org/library/difflib.html#difflib.SequenceMatcher)：

```
import difflib
a = '54515923333558964'
b = '48596478923333558964'

s = difflib.SequenceMatcher(None, a, b)
m = s.find_longest_match(0, len(a), 0, len(b))
print a[m.a:m.a+m.size] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T10:37:26.720

您可以使用正则表达式模式的这种变体：

```
\S*?(?P<mt>\S*)\s+\S*(?P=mt)$ 
```

编辑。但是请注意，这可能需要 O( *n* ³ ) 时间来处理某些输入。试试例如

```
a = 1000 * 'a'
b = 1000 * 'a' + 'b' 
```

在我的系统上处理这需要一秒钟。

# typo3 - 在 TYPO3 中使每页 2 列右移

> ID：12598990
> 
> 赞同：0
> 
> 时间：2012-09-26T09:49:09.720
> 
> 标签：typo3

我正在研究 TYPO3，并希望使每页 2 列右布局。所以请帮我从左侧删除第二个导航。

我评论了`navigationSecondLevelMenu < menu.secondlevel`来自打字稿。

但到现在还没有被删除。

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:56:00.770

您可能可以通过以下方式取消设置战后的元素：

```
navigationSecondLevelMenu > 
```

（`>`符号相当于 PHP 的`unset`）反正如果你不给我们更多的细节，我们不会再试图猜测你的问题。

# c++ - 模板定义找不到我的函数

> ID：12598991
> 
> 赞同：6
> 
> 时间：2012-09-26T09:49:10.127
> 
> 标签：c++, visual-c++, scope, clang

我正在尝试将一些为 MSVC 编写的代码移植到 Clang 上编译。但是，查找某些模板函数似乎有问题。这是给我带来问题的结构定义的一部分：

```
template< typename T > struct FixedVector
{
    T * ptr;
    size_t count;

    typedef T value_type;

    FixedVector():ptr(0),count(0) {}
    ~FixedVector()
    {
        DeleteArr(ptr); // Error message appears here
        count=0;
    }
// ...
} 
```

该`DeleteArr(ptr)`函数指的是稍后定义的函数，如下所示：

```
template< typename T > inline void DeleteArr( T *& ptr )
{
    delete[] ptr;
    ptr = NULL;
} 
```

这是我在指示的行上收到的错误消息：

```
error: call to function 'DeleteArr' that is neither visible in the template definition nor found by argument-dependent lookup 
```

查看错误的完整下拉列表（在 Xcode 中），列表底部显示以下消息：

```
'DeleteArr' should be declared prior to the call site or in an associated namespace of one of its arguments. 
```

单击此消息将我带到 DeleteArr() 函数的定义，如上所示。

这显然在 MSVC 中编译得很好，并且通过查看 Clang 和 MSVC 之间的差异，这是由于 MSVC 中的一个怪癖，它不需要在使用之前定义这样的函数，只要有某处的定义。[所以我在Clang 文档](http://clang.llvm.org/compatibility.html)中查找了这个错误消息（相关部分在“模板中的不合格查找”标题下），它建议在模板定义之前添加一个前向声明。所以我在定义之上添加了这个`FixedVector`：

```
template< typename T > inline void DeleteArr( T *& ptr ); 
```

但是，此错误消息仍在出现，并且错误消息的最后一位（“应该在调用站点之前声明”位）仍然指向函数的实际定义。有谁知道可能是什么问题？我完全不知道这在 MSVC 上如何有效。还有，既然报错信息可以找到函数的定义，那为什么说找不到呢？

更新：根据评论的建议，我已将 DeleteArr() 的实现添加到我在模板上方声明它的位置。这似乎导致同样的错误！我现在真的很难过。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T10:12:51.440

的声明`DeleteArr`必须对 可用`FixedVector`，即前者的定义必须先于后者的使用。这可能与 MSVC 未能正确实现[两阶段查找](https://stackoverflow.com/questions/6273176/what-exactly-is-broken-with-microsoft-visual-cs-two-phase-template-instanti)有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T10:40:31.623

首先定义 DeleteArr

```
template< typename T > inline void DeleteArr( T *& ptr )
    {
        delete[] ptr;
        ptr = NULL;
    } 
```

然后定义固定向量

```
template< typename T > struct FixedVector
{
    T * ptr;
    size_t count;

    typedef T value_type;

    FixedVector():ptr(0),count(0) {}
    ~FixedVector()
    {
        DeleteArr(ptr); // Error message appears here
        count=0;
    }
// ...
} 
```