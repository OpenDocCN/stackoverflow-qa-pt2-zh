# StackOverflow 问答 15385000-15385999

# django - Django - post_save 时间问题 - 如何实现动作信号“数据库保存完成”

> ID：15385001
> 
> 赞同：1
> 
> 时间：2013-03-13T12:13:25.827
> 
> 标签：django, signals

在我看来，好像 post_save 信号不是在整个保存过程在数据库中完成时触发的，而是在 model.save() 调用结束时触发的。

我在执行以下代码时做了这个观察：

模型.py

```
class PurchaseOrder(models.Model):
    total_value = models.DecimalField(max_digits=12, decimal_places=2, null=True, blank=True)

def purchase_order_post_save_handler(sender, instance, **kwargs):
    project_po_value_update_thread = accounting.threads.ProjectPoValueUpdateThread(instance)
    project_po_value_update_thread.start() 

post_save.connect(purchase_order_post_save_handler, sender=PurchaseOrder) 
```

线程.py

```
class ProjectPoValueUpdateThread(threading.Thread):
    """
    thread to update the po.project with the latest po values
    called via the save method of the purchase order
    """

    def __init__(self, purchase_order):
        self.purchase_order = purchase_order
        threading.Thread.__init__(self)

    def run(self):
        "starts the thread to update project po values"
        try:
            project = self.purchase_order.project
            #update active po budget
            active_po_sum = PurchaseOrder.objects.filter(project=project, is_active=True).aggregate(total_value_sum=Sum('total_value'))
            active_total_value_sum = active_po_sum['total_value_sum']
            project.total_value = active_total_value_sum
            project.save() 
```

在某些情况下，此代码没有正确更新项目 total_value，因为使用 PurchaseOrder.objects.filter(project=project, is_active=True) 查询的实例（我刚刚保存）显然没有更新。因此，在我看来，线程已经超越了实例保存方法并查询了旧版本的模型。

我知道如何克服这个特定问题（只需从 post_save 信号提供的实例中获取最新值），但我想知道如何创建一个在数据库中的保存操作完成时触发的 post_save 信号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:27:42.043

你是对的， post_save 信号在 save() 方法结束时执行。这个事实在[Django 文档](https://docs.djangoproject.com/en/1.5/ref/signals/#django.db.models.signals.post_save)中：

> django.db.models.signals.post_save
> 
> 与 pre_save 类似，但在 save() 方法结束时发送。

如果您的意图是在多个领域使用信号，您可能更适合[编写自己的](https://docs.djangoproject.com/en/1.5/topics/signals/#defining-and-sending-signals).

编辑：更好地链接到信号定义

# python - django-cms 中的 url 设计

> ID：15385002
> 
> 赞同：0
> 
> 时间：2013-03-13T12:13:26.167
> 
> 标签：python, django, url, menu, django-cms

我正在使用 django-cms 设计一个网站，到目前为止，我必须创建一个带有菜单栏的基本主页，例如，`About Us`等，`Products``Contact Us`

`django`我已经完成了and的所有必要设置`django-cms`，激活了管理部分并且工作正常。

我创建了一个`Home Page template`包含 `About Us`, `Products`,`Contact Us`并创建了一个`aboutus`通过 django-cms调用的页面`admin`slug `about-us`。

现在我已经给出了那个 slug `about-us`，它只是`About Us`菜单锚标记中的一个 url，所以当我单击该链接时，它工作正常并将我重定向到`aboutus`浏览器中的 url 为 url的页面`http://localhost:8080/aboutus`。

但问题是，当我再次单击`aboutus`链接时，它会生成两次 url，就像`http://localhost:8080/aboutus/aboutus`我的意思是每次点击时，slug`aboutus`都会附加到 url。

以下是我的代码

**设置.py**

```
TEMPLATE_CONTEXT_PROCESSORS = (
     .......
    'cms.context_processors.media',
    'sekizai.context_processors.sekizai',
)
CMS_TEMPLATES = (
    ('home.html', gettext('Home')),
    ('aboutus.html', gettext("About Us")),
    ('management_team.html',gettext('Management Team')),
)
.....
.... 
```

**网址.py**

```
from django.conf.urls.defaults import *
from django.contrib import admin
from django.conf import settings

admin.autodiscover()

urlpatterns = patterns('',

     url(r'^admin/', include(admin.site.urls)),
     url(r'^', include('cms.urls')),
) 
```

**主页.html**

```
{% load cms_tags sekizai_tags %}
{% load staticfiles %}
{% load staticfiles %}
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>{% block head %}{% endblock %}</title>
      {% render_block "css" %}
  </head>
  <body>
      {% cms_toolbar %}
        <div class="submenu">
            <a href="about-us">About Company Services</a><br />
            <a href="management-team">Our Management Team</a>
        </div>
        <a href="about-us" class="menu aboutus">About Us</a></div>
      {% render_block "js" %}
  </body>
</html> 
```

所以上面是我的整体代码，其中`home.html`显示了一个带有如下菜单的主页（通过使用一些css样式）

```
 About Us
        About Company Services 
        Our Management Team 
```

因此，当我单击链接 时，会立即`About Us`生成 url `http://localhost:8000/about-us/`，当我们单击`About Company Services`生成的 url 时会立即生成，`http://localhost:8000/about-us/about-us`然后`http://localhost:8000/about-us/about-us/our-management-team/`单击时会`Our Management Team`立即生成。所以 url 附加到前一个 url 而不是附加到`domain name`.

我使用 django-cms admin 中创建的模板创建了所有页面

```
 Page Name                slug

   About Us                 about-us
   About Company Services   about-us 
   Our Management Team      our-management-team 
```

那么上面的代码有什么问题，为什么 url 附加到以前的 url 而不是附加到域？

如何创建一个`childs(About Company Services,Our Management Team )`从 django-cms admin 到`parent(About Us)`

实际上我想在 page`(About Company Services,Our Management Team )`下创建两个页面`About Us`，我们如何在 django-cms admin 中实现这一点

谁能让我知道 django-cms 中菜单的概念，我已经尝试并阅读了文档`django-cms many many many times`但无法理解`menus`如此接近的概念`SO`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:32:00.427

如果这是您在管理部分 ( ) 中的页面布局`/admin/cms/page`：

```
- Home (level=0)
    - About Us (level=1)
        - About Company Services (level=2)
            - Foo Bar (level=3)
        - Our Management Team (level=2)
    - Some Other Section (level=1)
        - Some Sub Section (level=2)
    - ... 
```

当您打印时，`{% show_menu A B C D %}`您正在呈现一个`ul`菜单，其中 A、B、C 和 D 是指定菜单配置的数字。

```
A = Start
B = End
C = Inactive
D = Active 
```

所以`{% show_menu 1 2 0 100 %}`

*   `A=1`表示从第 1 级开始导航，即排除`Home`第 0 级
*   `B=2`表示将导航渲染到第 2 级，即排除`Foo Bar`
*   `C=0`表示对于非活动轨迹，显示 0 级别。因此，如果我们当前在`About Us`页面上，我们将不会在下面的菜单中看到任何链接`Some Other Section`（因为这是一条不活跃的线索），但我们仍然会看到`About Company...`和`Out Management...`（因为这是一条活跃的线索）
*   `D=100`意味着对于当前活动的轨迹，显示到 100 个级别（这就是我们看到上面提到的`About Company...`和的原因）`Our Management`

所以结果是：

```
- About Us (level=1)
    - About Company Services (level=2)
    - Our Management Team (level=2)
- Some Other Section (level=1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:26:33.083

使用 {% show_menu %} 模板标签来呈现菜单。请务必阅读相关文档。

# scrapy - Scrapy 论坛爬虫启动但不返回任何抓取的数据

> ID：15385003
> 
> 赞同：1
> 
> 时间：2013-03-13T12:13:27.947
> 
> 标签：scrapy, forum, web-crawler

这是我的代码，有人可以帮忙吗，由于某种原因蜘蛛运行但实际上并没有抓取论坛线程。我正在尝试在我的开始网址中提取特定论坛的论坛主题中的所有文本。

```
from scrapy.spider import BaseSpider

from scrapy.contrib.spiders import CrawlSpider, Rule

from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor

from scrapy.selector import HtmlXPathSelector

from xbox.items import xboxItem

from scrapy.item import Item
from scrapy.conf import settings

class xboxSpider(CrawlSpider):
    name = "xbox"
    allowed_domains = ["forums.xbox.com"]
    start_urls= [
    "http://forums.xbox.com/xbox_forums/xbox_360_games/e_k/gearsofwar3/default.aspx",
    ]
    rules= [
        Rule(SgmlLinkExtractor(allow=['/t/\d+']),callback='parse_thread'),  
        Rule(SgmlLinkExtractor(allow=('/t/new\?new_start=\d+',)))
            ]

    def parse_thread(self, response):
        hxs=HtmlXPathSelector(response)

        item=xboxItem()
        item['content']=hxs.selec("//div[@class='post-content user-defined-markup']/p/text()").extract()
        item['date']=hxs.select("//span[@class='value']/text()").extract()
        return item 
```

日志输出：

```
2013-03-13 11:22:18-0400 [scrapy] DEBUG: Enabled item pipelines: 
2013-03-13 11:22:18-0400 [xbox] INFO: Spider opened 
2013-03-13 11:22:18-0400 [xbox] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min) 
2013-03-13 11:22:18-0400 [scrapy] DEBUG: Telnet console listening on 0.0.0.0:6023 
2013-03-13 11:22:18-0400 [scrapy] DEBUG: Web service listening on 0.0.0.0:6080
2013-03-13 11:22:20-0400 [xbox] DEBUG: Crawled (200) <GET forums.xbox.com/xbox_forums/xbox_360_games/e_k/gearsofwar3/f/…; (referer: None) 
2013-03-13 11:22:20-0400 [xbox] DEBUG: Filtered offsite request to 'forums.xbox.com': <GET forums.xbox.com/xbox_forums/xbox_360_games/e_k/gearsofwar3/f/…; 
2013-03-13 11:22:20-0400 [xbox] INFO: Closing spider (finished) 
2013-03-13 11:22:20-0400 [xbox] INFO: Dumping spider stats 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:37:35.650

作为第一个调整，您需要通过添加“.”来修改您的第一条规则。在正则表达式的开头，如下所示。我还将开始 url 更改为论坛的实际第一页。

```
start_urls= [
"http://forums.xbox.com/xbox_forums/xbox_360_games/e_k/gearsofwar3/f/310.aspx",
]
rules = (
    Rule(SgmlLinkExtractor(allow=('./t/\d+')), callback="parse_thread", follow=True),
    Rule(SgmlLinkExtractor(allow=('./310.aspx?PageIndex=\d+')), ),
    ) 
```

我已经更新了规则，以便蜘蛛现在可以抓取线程中的所有页面。

编辑：我发现了一个可能导致问题的错字，并且我已经修复了 xpath 的日期。

```
 item['content']=hxs.selec("//div[@class='post-content user-defined-markup']/p/text()").extract()
 item['date']=hxs.select("(//div[@class='post-author'])[1]//a[@class='internal-link view-post']/text()").extract() 
```

上面的行说“hxs.selec”，应该是“hxs.select”。我改变了它，现在可以看到内容被刮掉了。通过反复试验（我对 xpaths 有点垃圾），我设法获得了第一篇文章的日期（即创建线程的日期），所以这一切现在应该都可以工作了。

# java - 如何增强这个使用 POI 和 JXL 读取 xls 文件的 java 类？

> ID：15385009
> 
> 赞同：2
> 
> 时间：2013-03-13T12:13:38.760
> 
> 标签：java, apache-poi, jxl

我目前正在使用 POI 读取 excel 文件，它工作得很好，除了它无法读取旧格式（BIFF5/office 95）的 xls 文件来解决这个问题我正在捕获 OldExcelFormatException，在这种情况下调用一个函数来读取 xls使用 jxl 的文件。我想要实现的是编写相同的代码但不捕获异常。这是当前的工作代码：

```
public void translate() throws IOException, CmpException
{
  ArrayList<String> row = null;

  try
  {
    // create a new org.apache.poi.poifs.filesystem.Filesystem
    POIFSFileSystem poifs = new POIFSFileSystem(fin);
    w = new HSSFWorkbook(poifs);
  }
  catch (OldExcelFormatException e) // OldExcelFormatException
  {
    w = null;
    System.out.println("OldExcelFormatException");
    translateBIFF5();
  }
  catch (Exception e) // Any Exception
  {
    w = null; 
  }

  if (w != null)
  {
     // read the excel file using POI
  } 
}

private void translateBIFF5() throws IOException, CmpException
{
  ArrayList<String> row = null;
  try
  {
    jxl_w = Workbook.getWorkbook(excelFile);
  }
  catch (Exception e) // Any Exception
  {
    jxl_w = null; 
  }

  if (jxl_w != null)
  {
     // read the excel file using jxl
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:22:22.180

伙计们别管了。我自己找到了解决方案。诀窍是查看工作簿名称：对于 excel 95/97，工作簿名称是“Book”，而对于新格式，工作簿名称是“WorkBook”。所以这是我一直在寻找的一段代码：

```
 POIFSFileSystem poifs = new POIFSFileSystem(fin);

  DirectoryNode directory = poifs.getRoot();
  Iterator<Entry> i       = directory.getEntries();
  while (i.hasNext())
  {
    Entry e         = i.next();
    String bookName = e.getName();
    if (bookName.equals("Book"))
    {
      System.out.println("This is an old format");
    }
    else
    {
      System.out.println("This is a new format");
    }
  } 
```

# clearcase - 少数目录所需的组权限

> ID：15385011
> 
> 赞同：1
> 
> 时间：2013-03-13T12:13:43.277
> 
> 标签：clearcase, configuration-management

我从我们的一位客户那里收到了一项关于“<code>abc”vob 的“列出文件夹的组权限更改”的请求，因为由于这些文件夹的主控权问题，他们无法更改权限（因为，主控权在我们的最后） .

我收到了更改我们 vob 的 10 个目录的组权限的请求。这样他们就可以通过一些工具访问和做一些分析。
但根据我们的管理员，VOB 组权限仅保留给一个组，他们无法更改。
但是我们的客户一直在给我打电话。根据我的研发，我找到了“ `protectvob`”命令。下面的命令有效吗？

```
cleartool protectvob –add_group "groupname" /path_of_the_vob/abc_vob/directory1 
```

`abc`请您检查一下并将仅更改 10 个vob目录的组权限的步骤发送给我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:21:14.127

`protectvob`将允许您将辅助组添加到 Vob。
但它不会改变对该 Vob 中任何元素的保护。[请参阅手册页](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_protectvob.htm)
的示例。[`cleartool protectvob`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_protectvob.htm)

要更改文件集合上的组，您可以使用**[`cleartool protect`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_protect.htm)**（一旦将该组添加到您的 vob 的辅助组，`protectvob`仍然需要）：

```
 cleartool find . -nrec -exec "cleartool protect -chgrp \"My Group\" \"%CLEARCASE_PN%\"" 
```

（调整`cleartool find`以仅列出您需要的内容）

# iphone - 在 iPhone 应用内完成应用内购买后移除广告横幅

> ID：15385012
> 
> 赞同：0
> 
> 时间：2013-03-13T12:13:43.860
> 
> 标签：iphone, ios, ipad, in-app-purchase, chartboost

应用内购买后如何删除[chartboost](https://chartboost.com/)横幅？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:02:33.377

使用这样的东西

购买应用程序时，在您的 NSUserDefaults 中设置布尔键 isPurchase YES

```
if(![userDefaults boolForKey:@"isPurchase"])
        {
             NSLog(@"Enter add start ");

           [[Chartboost sharedChartboost]  showInterstitial];
        }
        [userDefaults synchronize];

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T20:07:43.207

最简单的方法是将信息保存在上面帖子中提到的用户默认值中，但这并不安全，因为许多软件可以轻松访问用户默认值，并且可以编辑/添加您的密钥，除非它是一种大密钥和秘密或者没有人将其作为黑客发布。

最好的办法是将此信息存储在服务器（如果有的话）或将此信息存储在 Key Chain 中，因为它是安全的。

如何使用钥匙串轻松做到这一点，请遵循以下帖子

[iOS：如何在应用程序中存储用户名/密码？](https://stackoverflow.com/questions/6972092/ios-how-to-store-username-password-within-an-app)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-03T07:56:27.233

Chartboost 提供委托方法`-(BOOL) shouldDisplayInterstitial:(NSString*)location`

在此方法中返回“false”将阻止广告展示；如果您确实想要展示广告，请记住返回“true”。只需与本地存储的布尔值进行比较，即可跟踪他们是否购买了 IAP。

之所以推荐这种方法而不是硬编码，是因为您可能希望保留一些特定于交叉促销活动的位置，以推广您自己的应用程序，这些应用程序将来仍能展示广告。

这样，当您发布新应用时，您可以进行有限的促销活动，并确保购买了无广告 IAP 的最忠实粉丝仍然可以看到您的新游戏的交叉促销广告——这是一种汇集最高质量的好方法用户到您的新应用！如果您制作正确的广告艺术，他们甚至不会知道这是广告，您可以制作它，以便他们只看到一次。

然后，您可以添加`showInterstitial:@"cross-promo"`任何您可能想要显示此内容的位置，并仅针对该位置禁用所有发布活动。然后，将来当您有一个新应用程序时，在该位置添加一个新的交叉促销活动来宣传您的新应用程序，每个人都会看到它 - 甚至是购买 IAP 的人！

这个实现的一个例子：

```
-(BOOL) shouldDisplayInterstitial:(NSString*) location {
    if(_userBoughtNoAdsIAP && location != @"cross_promo"){
         return FALSE;
    }
    return TRUE;
} 
```

并且不要忘记设置`[Chartboost sharedChartboost].delegate = self;`以确保委托方法正常运行！

全面披露：我为 Chartboost 工作

# android - Android - 如何在自定义基础适配器中使用 setOnCheckedChangeListener 保存数据

> ID：15385015
> 
> 赞同：1
> 
> 时间：2013-03-13T12:13:45.690
> 
> 标签：android, sqlite, listview, baseadapter

当用户更改复选框时，我需要将项目保存在列表视图中。

我有一个自定义基本适配器，其中包含用于列表项的视图支架。

我可以根据复选框将对象状态设置为 true 和 false，但我不确定如何保存数据。

这段代码我得到空指针异常。我认为这是因为我试图调用我的 DatabaseHandler 类。

任何关于如何从这里获取数据到 SQLite 的指针将不胜感激。

我的自定义基础适配器

```
public class ChecklistBaseAdapter extends BaseAdapter {
private static ArrayList<Checklist> searchArrayList;
Context currentcontext;
DatabaseHandler db = new DatabaseHandler(currentcontext);
private LayoutInflater mInflater;

public ChecklistBaseAdapter(Context context, ArrayList<Checklist> results) {

    searchArrayList = results;
    mInflater = LayoutInflater.from(context);
}

public int getCount() {

    return searchArrayList.size();
}

public void remove(int position) {

    searchArrayList.remove(position);
    notifyDataSetChanged();
}

public void removeAll() {

    searchArrayList.clear();
    notifyDataSetChanged();
}

public void notifyChange() {
    notifyDataSetChanged();
}

public Object getItem(int position) {

    return searchArrayList.get(position);

}

public long getItemId(int position) {

    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {

    final ViewHolder holder;
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.checklistitem, null);
        holder = new ViewHolder();

        holder.cbStatus = (CheckBox) convertView
                .findViewById(R.id.checkbox);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.cbStatus.setText(searchArrayList.get(position).getName());
    if (searchArrayList.get(position).getStatus().equals("F")) {
        holder.cbStatus.setChecked(false);
    } else {
        holder.cbStatus.setChecked(true);
    }
    holder.cbStatus
            .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
                @Override
                public void onCheckedChanged(CompoundButton buttonView,
                        boolean isChecked) {
                    String name = holder.cbStatus.getText().toString();
                    if (isChecked) {
                        for (int x = 0; x < searchArrayList.size(); x++) {
                            Checklist checklist = new Checklist();

                            checklist = searchArrayList.get(x);
                            if (name.equals(checklist.getName())) {
                                checklist.setStatus("T");

                                db.updateCheckList(checklist);
                                searchArrayList.set(x, checklist);

                            }

                        }

                    } else {
                        for (int x = 0; x < searchArrayList.size(); x++) {
                            Checklist checklist = new Checklist();

                            checklist = searchArrayList.get(x);
                            if (name.equals(checklist.getName())) {
                                checklist.setStatus("F");

                                searchArrayList.set(x, checklist);
                                db.updateCheckList(checklist);
                            }

                        }
                    }

                }
            });

    return convertView;
}

static class ViewHolder {

    CheckBox cbStatus;

} 
```

我的数据库处理程序类中的更新方法

```
public int updateCheckList(Checklist checklist) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(CHECK_NOTE_GUID, checklist.getNoteguid());
    values.put(CHECK_KEY_NAME, checklist.getName());
    values.put(CHECK_KEY_STATUS, checklist.getStatus());
    values.put(CHECK_KEY_GUID, checklist.getGuid());

    // updating row
    db.update(TABLE_CHECKLIST, values, CHECK_KEY_ID + " = ?",
            new String[] { String.valueOf(checklist.getID()) });
    db.close();
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:22:14.860

当 currentContext 仍然为空时，您正在创建 DatabaseHandler。放线

`DatabaseHandler db = new DatabaseHandler(currentcontext);`

进入类的构造函数并使用传递的上下文而不是 currentContext 或预先设置 currentContext：

```
public ChecklistBaseAdapter(Context context, ArrayList<Checklist> results) {
    searchArrayList = results;
    mInflater = LayoutInflater.from(context);
    currentContext = context;
    DatabaseHandler db = new DatabaseHandler(currentContext);
} 
```

# android - Android 待定 Intent - 警报 - 相同代码六 (6) 个应用程序

> ID：15385019
> 
> 赞同：0
> 
> 时间：2013-03-13T12:14:02.147
> 
> 标签：android, broadcastreceiver, alarmmanager, alarm, android-pendingintent

昨天我发现了一些奇怪的东西。在使用本地化版本（不同的应用程序差异包，相同的代码）测试应用程序时，我发现了一个有趣的错误 - 应用程序使用 AlarmManager 和待处理 Intent 设置警报 - 当广播被触发时，只有一个应用程序被激活并执行待处理意图和所有其他应用程序（只有不同​​的语言）根本没有反应。这是安卓bug吗？？我期望设置的警报会触发每个拥有自己设置警报但 Android 正在启动的应用程序，或者最后一个活动应用程序是由广播或接收广播触发的？挂起的 Intent 如何与来自系统的广播相关联？系统如何知道哪个应用程序正在等待广播以及这个 .apk 是哪个应用程序？这可能看起来很奇怪或难以理解，但我也很困惑..

```
public class AlarmSetter  {

    public void SetAlarma(Context context){

    Calendar calendar = Calendar.getInstance();
    calendar.setTimeInMillis(System.currentTimeMillis());
    calendar.set(Calendar.SECOND, 57);
    calendar.set(Calendar.MINUTE, 59);
    calendar.set(Calendar.HOUR_OF_DAY, 23); 
    calendar.add(Calendar.DAY_OF_MONTH, 0);

     Intent intent = new Intent(context, AlarmKicked.class);
     PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 1333333, intent, PendingIntent.FLAG_UPDATE_CURRENT);
     AlarmManager am =(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
     am.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(),AlarmManager.INTERVAL_DAY,
             pendingIntent);       
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:42:53.943

好的，等待确认错误

好的，终于！！！！

这是一个 LVL BUG：所以，该应用程序是 bg.google.myapppackage.apk .. 没有错.. 使用 LVL 许可证 - ServerManagedPolicy - 定制 - bcs google 说开发人员正在使用该示例..

在 ServerManagedPolicy.java 我们有“ private static final String DEFAULT_MAX_RETRIES = "0";" 我刚刚做了“ private static final String DEFAULT_MAX_RETRIES = "10";" 这意味着在锁定之前启动 10 次.. 没什么新鲜的，用户可以在 10 次检查消失之前启动应用程序.. 很好，不是吗？

但！问题出在 LVL 中，每次启动都由系统以非常奇怪的方式注册.. 怎么样？简单地说：每次开始都会在包中添加数字，就像这样

03-17 00:25:45.318: I/PackageManager(59): /data/app/bg.google.myapppackage-1.apk 更改；拆包

03-17 00:25:45.318: I/PackageManager(59): /data/app/bg.google.myapppackage-2.apk 更改；拆包

03-17 00:25:45.318: I/PackageManager(59): /data/app/bg.google.myapppackage-3.apk 更改；拆包

那是应用程序启动的时间......好吧仍然没有错......不！这是错误的！如果您从包 bg.google.myapppackage-1.apk 启动活动，并且此包使用 AlarmManager 设置警报并关闭应用程序，则稍后将触发警报但接收器将不再存在.. bcs 如果用户关闭应用程序并重新启动它然后我们有 bg.google.myapppackage-2.apk 并且第二个包设置警报二，但是当它关​​闭时，包不再存在......系统触发广播但那里没有接收器，应用程序根本没有反应。这就是我的问题..测试应用程序并且从未获得广播或只有活动应用程序注册了广播而其他应用程序没有..

因此，如果您的应用程序正在执行由 AlarmManager 触发的某些更新，则必须设置“私有静态最终字符串 DEFAULT_MAX_RETRIES = “0”；” 为 0 否则在重试期间您的应用程序将显示故障或缺少功能//我认为 Google 必须通过更改包名称来解决此问题，并且必须有人发布 BUG Ticket.. 这件事花了我将近 3 天的时间（白天学习IT，晚上在家工作..所以睡觉是我想念的东西，不想像这样浪费时间..)

03-14 18:22:51.860: D/PackageManager(199): 新包安装在 /data/app/bg.google.myapppackage-1.apk

03-17 00:25:45.348: D/installd(35): DexInv: --- BEGIN '/data/app/bg.google.myapppackage-1.apk' ---

03-17 00:25:47.599: D/installd(35): DexInv: --- END '/data/app/bg.google.myapppackage-1.apk' (成功) ---

03-17 00:25:47.748: I/installd(35): 移动 /data/dalvik-cache/data@app@bg.google.myapppackage-1.apk@classes.dex -> /data/dalvik-cache/ data@app@bg.google.myapppackage-1.apk@classes.dex

# android - 主题不切换

> ID：15385021
> 
> 赞同：0
> 
> 时间：2013-03-13T12:14:19.723
> 
> 标签：android, android-theme, android-menu

我正在尝试在主题之间切换。我查看了 HoneyCombGallery 示例代码并找到了在主题之间切换的代码。但它在我的应用程序中不起作用。

代码：

MainActivity.java

```
public class MainActivity extends Activity {

boolean success = true;
    private int mThemeId = -1;
Button btnViewLib;
Button btnlog;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if(savedInstanceState != null && savedInstanceState.getInt("theme", -1) != -1) {
        mThemeId = savedInstanceState.getInt("theme");
        this.setTheme(mThemeId);
    }

    setContentView(R.layout.activity_main);

    btnViewLib = (Button) findViewById(R.id.btnlib);
    btnlog = (Button) findViewById(R.id.btnlog);

    btnViewLib.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {
            // Launching All products Activity
            Intent i = new Intent(getApplicationContext(), LibActivity.class);
            startActivity(i);

        }
    });

    btnlog.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {
            // Launching All products Activity
            Intent i = new Intent(getApplicationContext(), SomeActivity.class);
            startActivity(i);

        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {

    case R.id.toggleTheme:
        if (mThemeId == R.style.AppTheme_Dark) {
            mThemeId = R.style.AppTheme_Light;
        } else {
            mThemeId = R.style.AppTheme_Dark;
        }
        this.recreate();
        return true;

    default:
        return super.onOptionsItemSelected(item);
    }
}
} 
```

主要的.xml

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/action_settings"
    android:orderInCategory="100"
    android:showAsAction="never"
    android:title="@string/action_settings"/>

  <!-- Example of items in the overflow menu -->
  <item android:id="@+id/toggleTheme"
    android:title="@string/theme_toggle"
    android:showAsAction="never" />

 </menu> 
```

样式.xml

```
<resources>
<style name="ActionBar" parent="@android:style/Widget.Holo.ActionBar" />

<style name="ActionBar.Light" parent="@style/ActionBar">
    <item name="android:background">@color/actionbar_background_light</item>
</style>

<style name="ActionBar.Dark" parent="@style/ActionBar">
    <item name="android:background">@color/actionbar_background_dark</item>
</style>

<style name="AppTheme.Light" parent="@android:style/Theme.Holo.Light">
    <item name="android:actionBarStyle">@style/ActionBar.Light</item>
    <item name="android:windowActionBarOverlay">true</item>
    <item name="listDragShadowBackground">@android:color/background_light</item>
    <item name="menuIconCamera">@drawable/ic_menu_camera_holo_light</item>
    <item name="menuIconToggle">@drawable/ic_menu_toggle_holo_light</item>
    <item name="menuIconShare">@drawable/ic_menu_share_holo_light</item>
</style>

<style name="AppTheme.Dark" parent="@android:style/Theme.Holo">
    <item name="android:actionBarStyle">@style/ActionBar.Dark</item>
    <item name="android:windowActionBarOverlay">true</item>
    <item name="listDragShadowBackground">@android:color/background_dark</item>
    <item name="menuIconCamera">@drawable/ic_menu_camera_holo_dark</item>
    <item name="menuIconToggle">@drawable/ic_menu_toggle_holo_dark</item>
    <item name="menuIconShare">@drawable/ic_menu_share_holo_dark</item>
</style>
</resources> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:16:12.903

主题应在`super.onCreate(savedInstanceState);`调用前设置。

编辑：

如果你想从中获取一些东西`savedInstanceState`，你应该先在里面保存一些东西。所以你需要重写onSaveInstanceState：

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
  super.onSaveInstanceState(savedInstanceState);

  savedInstanceState.putInt("theme", mThemeId );

} 
```

# jquery - 提交fancybox不起作用

> ID：15385029
> 
> 赞同：-2
> 
> 时间：2013-03-13T12:14:42.263
> 
> 标签：jquery, codeigniter, fancybox

我不知道出了什么问题，因为我收到一条消息“无法加载请求的内容。请稍后再试。”

```
<form action="<?php echo site_url('frontend/accelerator/|fltru:true|');?>" method="post" name="product_form"  >
<input type="text" name="cod_bar" id="cod_bar" value="introduceti codul de bare" onClick="if (document.product_form.cod_bar.value == 'introduceti codul de bare') {document.product_form.cod_bar.value='';}" onBlur="if (document.product_form.cod_bar.value == '') {document.product_form.cod_bar.value='introduceti codul de bare';}">
<input type="text" value="introduceti cantitatea" name="qty" onClick="if (document.product_form.qty.value == 'introduceti cantitatea') {document.product_form.qty.value='';}" onBlur="if (document.product_form.qty.value == '') {document.product_form.qty.value='introduceti cantitatea';}">
<input type="submit" value="Insereaza" name="add_product"   style="margin-left:5px; min-width:10px;">
<input type="submit" value="Cauta"  **class="fancybox fancybox.button"** name="search_product"  style="margin-left:5px; min-width:10px;">

</form> 
```

在标题中我有这样的东西：

```
$(document).ready(function() {
$(".fancybox").fancybox({
    width       : 700,
    'height'    : 500,
    fitToView   : true,
    closeBtn    : true,
    autoSize    : false,
    closeClick  : true,
    openEffect  : 'elastic',
    closeEffect : 'elastic',
    'type': 'iframe',
    helpers : {
    overlay : {
    closeClick : true,
        css : {
            'background' : 'rgba(58, 42, 45, 0.3)'
        }
    }
}
});

}); 
```

我想添加这样一个事实：在这样的链接上 `<a class="fancybox fancybox.button" href="something">bla</a>` ，fancybox 可以正常工作。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:22:36.407

可能重复，看看这个 -> [FancyBox 返回“无法加载请求的内容。请稍后再试。” 带链接](https://stackoverflow.com/questions/8913583/fancybox-returning-the-requested-content-cannot-be-loaded-please-try-again-lat)

此外，如果您进行谷歌搜索，您会发现很多链接： [https ://www.google.be/search?q=fancybox+The+requested+content+cannot+be+loaded.+Please+try+again+later&aq =f&oq=fancybox+The+requested+content+cannot+be+loaded.+Please+try+again+later&aqs=chrome.0.57j0l3j60j62.4237&sourceid=chrome&ie=UTF-8](https://www.google.be/search?q=fancybox+The+requested+content+cannot+be+loaded.+Please+try+again+later&aq=f&oq=fancybox+The+requested+content+cannot+be+loaded.+Please+try+again+later&aqs=chrome.0.57j0l3j60j62.4237&sourceid=chrome&ie=UTF-8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:59:40.557

Fancybox 寻找 href 属性来加载它的资源。您的提交操作没有这样的属性。我猜你想让它加载表单操作网址？与 POST 数据？您将需要覆盖 fancybox 的 beforeLoad 方法

```
$(".fancybox")
    .attr('rel', 'gallery')
    .fancybox({
        type: 'iframe',
        autoSize : false,
        beforeLoad : function() {                    
            this.width = parseInt(this.href.match(/width=[0-9]+/i)[0].replace('width=',''));  
            this.height = parseInt(this.href.match(/height=[0-9]+/i)[0].replace('height=',''));
        }
}); 
```

[http://jsfiddle.net/BJNYr/](http://jsfiddle.net/BJNYr/)

如果你看这里： http: [//fancyapps.com/fancybox/#docs](http://fancyapps.com/fancybox/#docs)

您可以覆盖一个 href 变量。

你只需要决定你想让fancybox准确显示什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:25:59.523

如果您想在提交按钮上使用花式框效果。

```
 <a  href=''></a> 
```

然后在提交按钮上包含一个 onclick 事件，然后调用它。在您的情况下，您没有在单击后将任何位置或图像加载到 fancybox 中，因此您还需要提供应该在 fancybox 中加载和显示的内容。

# c# - 在 C# 中获取文件的文件大小

> ID：15385032
> 
> 赞同：4
> 
> 时间：2013-03-13T12:14:51.460
> 
> 标签：c#, asp.net

我想使用 ASP.Net 中的自定义处理程序将文件写回客户端，并想知道用最少的处理时间来执行此操作的最佳方法是什么。目前我有 2 个不同版本的代码做同样的事情，但是因为处理程序会被大量使用，我想知道最有效的方法是什么。

将完整文件加载到字节数组并用于`BinaryWrite`写入文件：

```
string filePath = context.Server.MapPath(context.Request.Url.LocalPath);
Byte[] swfFile = File.ReadAllBytes(filePath);
context.Response.AppendHeader("content-length", Utils.MakeString(swfFile.Length));
context.Response.ContentType = Utils.GetMimeType(Path.GetExtension(filePath));
context.Response.BinaryWrite(swfFile); 
```

使用`FileInfo`对象确定文件长度并`TransmitFile`写入文件：

```
string filePath = context.Server.MapPath(context.Request.Url.LocalPath);
FileInfo fileInfo = new FileInfo(filePath);
context.Response.AppendHeader("content-length", Utils.MakeString(fileInfo.Length));
context.Response.ContentType = Utils.GetMimeType(Path.GetExtension(filePath));
context.Response.TransmitFile(filePath); 
```

我怀疑该`TransmitFile`方法是最有效的，因为它在不缓冲文件的情况下写入。`FileInfo`对象呢？它如何计算文件大小？对象是`FileInfo`最好的方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T12:23:41.117

`FileInfo`向文件系统询问文件大小信息（当然，它不需要读取所有内容来这样做）。这通常被认为是“昂贵”的操作（与在内存中操作和调用方法相比），因为它会命中磁盘。

然而，虽然减少磁盘访问确实是一件好事，但当您准备读取文件的全部内容时，这不会对整体方案产生影响。所以`FileInfo`本身的表现才是你应该关注的。

这里的#1 性能问题是第一种方法*将整个文件保留在内存中，只要客户端需要下载它*——这可能是一个**大**问题，因为（取决于文件的大小和客户端连接）它有可能大量增加应用程序的内存使用量。如果这种增加的内存使用导致交换（即撞击磁盘）性能将立即下降。

所以你应该做的是使用`TransmitFile`- 不是因为它在进入磁盘时更快（它可能会或可能不会），而是因为它使用更少的内存。

# ios - kobold2d 中的 MVC 实现

> ID：15385033
> 
> 赞同：0
> 
> 时间：2013-03-13T12:14:54.970
> 
> 标签：ios, cocos2d-iphone, kobold2d

我是 kobold2d 的菜鸟，但熟悉 cocos2d 现在我已经安装了 kobold2d，但问题是我不知道如何获得 KTViewController、KTModel 和所有其他 Kobold 触摸类。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:18:58.547

KoboldTouch 是一个单独的商业产品[，可在此处获得](http://www.learn-cocos2d.com/store/koboldtouch/)。

# delphi - USB-Serial 端口被意外移除时如何处理异常？

> ID：15385036
> 
> 赞同：5
> 
> 时间：2013-03-13T12:15:09.233
> 
> 标签：delphi, exception-handling

我的 Delphi 应用程序（使用 XE3）需要处理移除 USB 串行端口时发生的 EInOutError 异常。该应用程序在测试环境中使用，因此不能依赖操作员单击“确定”按钮来关闭“应用程序错误”对话框。

我尝试了以下方法：

*   “try .. except”方法 - 这不会捕获这些异常。我认为这不起作用，因为异常不是由“try”块中的代码引起的。这似乎是一个较低级别的“系统级”异常。

*   我尝试在我的表单中添加一个“ApplicationEvents”组件。OnException 方法捕获由我的应用程序生成的“自定义”异常，但不是系统级异常。

*   我还尝试添加一个全局异常钩子（如[Is it possible to have a global exception hook? 中所述](https://stackoverflow.com/questions/2628751/is-it-possible-to-have-a-global-exception-hook)）。这部分有效 - 它允许我**在“应用程序错误”对话框之前**执行操作，但不会停止错误对话框。

我会很感激任何想法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:33:00.653

由于 USB-Com 移除而出现的异常非常烦人。所以我建议消除他们的大部分原因。

您必须处理 Windows 消息 WM_DEVICECHANGE 并检测端口删除。然后设置特殊标志，不要对带有此标志的端口进行任何操作！如果再次插入 USB-Com，则重新初始化串行端口。一些帮助的代码：

```
 const
      DBT_DEVICEARRIVAL = $8000;
      DBT_DEVICEREMOVECOMPLETE = $8004;
      DBT_DEVICEQUERYREMOVE = $8001;
      DBT_DEVTYP_PORT = 3;

    type
       PDevBroadcastHdr = ^TDevBroadcastHdr;
       TDevBroadcastHdr = packed record
        dbcd_size: DWORD;
        dbcd_devicetype: DWORD;
        dbcd_reserved: DWORD;
      end;

      PDEV_BROADCAST_PORT = ^TDEV_BROADCAST_PORT;
      TDEV_BROADCAST_PORT = packed record
        dbcp_size: DWord;
        dbcp_devicetype: DWord;
        dbcp_reserved: DWord;
        dbcp_name: array[0..MAX_PATH] of Char;
      end;

    ...
    procedure WMDEVICECHANGE(var Msg: TMessage); message WM_DEVICECHANGE;
    ...

procedure TForm1.WMDEVICECHANGE(var Msg: TMessage);
var
  prt: PDEV_BROADCAST_PORT;
  s: string;
begin

  if Msg.wparam =  DBT_DEVICEREMOVECOMPLETE then
    if PDevBroadcastHdr(Msg.lParam)^.dbcd_devicetype = DBT_DEVTYP_PORT then
      begin

        b_PortRemoved := True; //check this flag before each operation with port.

        prt := PDEV_BROADCAST_PORT(PDEV_BROADCAST_PORT(Msg.lParam));
        s := prt.dbcp_name;
        ShowMessage('ComPort ' + s + ' has been removed. What can I do?');
    end;

  if Msg.wparam =  DBT_DEVICEARRIVAL then
    if PDevBroadcastHdr(Msg.lParam)^.dbcd_devicetype = DBT_DEVTYP_PORT then begin
       // USB-COM plugged, you can find it and make some reinitialisation
    end;

end; 
```

# java - 在 JUpload 中预选文件

> ID：15385038
> 
> 赞同：0
> 
> 时间：2013-03-13T12:15:25.137
> 
> 标签：java, file-upload, applet, jupload

我需要处理外部请求以`HTML`使用 URL 中提到的参数填充表单。这部分工作正常。但是，该 URL 还包含客户端计算机上存在的文件的路径，我想将这些文件从客户端计算机上传到服务器，而无需用户交互。

由于无法`HTML/Javascript`以编程方式选择文件，因此我尝试使用[JUpload](http://jupload.sourceforge.net/)使用 Applet 方法。但是，我无法弄清楚如何在小程序初始化时预选文件。没有必要立即上传文件，但**我希望至少自动选择文件**。用户可以查看信息，然后提交表单。和小程序中的文件。

这个库可以吗？或者指引我走更好的路

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:45:58.060

好的，所以我在另一个名称相似的库中找到了答案。使用[Smartwerkz JUpload](http://jupload.biz/)，我们可以传递参数`preselectedFiles="filePath"`并`autostartUpload=true`预选文件并自动上传文件，而无需用户交互。我希望有一天它会对某人有所帮助。

# c# - .cs 文件能否覆盖已编译的 Asp.net 站点的 bin 文件中的代码？

> ID：15385039
> 
> 赞同：3
> 
> 时间：2013-03-13T12:15:26.130
> 
> 标签：c#, asp.net, iis

我已经接管了一个旧的 asp.net 网站，但它没有 Visual Studio 项目。如果我想更改某些功能，有没有办法放入一个 .cs 文件来覆盖 bin 文件中的逻辑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:20:01.193

除了一个，我不知道任何其他解决方案。

您可以反编译整个 dll，创建一个新项目并在其中附加所有类。然后重新编译并用新的替换旧的dll。

您可能需要反编译整个网站，因为它可能会对其他 dll 有一些依赖关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-15T15:56:46.260

对于任何偶然发现这个问题的人，我想建议一种替代方法。看看[福迪](https://github.com/Fody/Fody)。Fody 是一个 IL 编织工具，它允许您编织对现有 .dll 编译文件的更改。这是一个[基本的 Fody Addin 项目](https://github.com/Fody/BasicFodyAddin)。您会注意到 Fody 允许您将代码更改注入或“编织”到 IL 中而无需反编译。

# python - 如何在 Haskell 中使用 Data.MessagePack

> ID：15385041
> 
> 赞同：2
> 
> 时间：2013-03-13T12:15:32.250
> 
> 标签：python, haskell, serialization, messagepack

[MessagePack](http://msgpack.org/)是一种二进制序列化格式，显然可以从 Haskell 和 Python 中使用，我需要在我的项目中混合使用这些语言。

我需要序列化的结构相当简单：

```
data Citation = Citation {
    sourceDocument :: Document,
    targetDocument :: Document,
    links :: [ Reference ]
}

type Reference = (Int, Int)

data Document = Document {
    words :: [ ByteString ],
    wordNums :: [ Int ]
} 
```

但我不知道从哪里开始。显然，MessagePack 的库支持某种[派生机制](http://hackage.haskell.org/packages/archive/msgpack/0.7.2.5/doc/html/Data-MessagePack-Derive.html)，通过使“文档”自动成为 OBJECT 的实例，可以轻松完成上述操作，但我尝试调用自动派生到目前为止都失败了......

你怎么看？

这是库的链接：[http](http://hackage.haskell.org/package/msgpack-0.7.1.5) ://hackage.haskell.org/package/msgpack-0.7.1.5 这里是一些示例的链接，根据上述版本的文档，这些都不起作用：

1.  [http://wiki.msgpack.org/display/MSGPACK/QuickStart+for+Haskell](http://wiki.msgpack.org/display/MSGPACK/QuickStart+for+Haskell)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:25:22.693

我不熟悉 msgpack，但猜测这样的东西应该可以工作。

```
{-# LANGUAGE TemplateHaskell #-}

import Data.MessagePack.Derive

-- I don't know which of these lines you need
-- I also don't know whether the True should actually be False
$(deriveObject True ''Document)
$(derivePack True ''Document)
$(deriveUnpack True ''Document) 
```

（nb 通常，向我们展示您尝试过的无效代码会很有帮助，而不是让我们猜测您的尝试可能因为您没有启用[TemplateHaskell](http://www.haskell.org/ghc/docs/latest/html/users_guide/template-haskell.html)或其他什么而无效。）

# java - Java 逻辑错误中的部分 GET 方法

> ID：15385043
> 
> 赞同：1
> 
> 时间：2013-03-13T12:15:39.427
> 
> 标签：java, http, networking, httpurlconnection, urlconnection

我实现了从 HTML 内容中读取 txt 文件的 Java 网络程序。我能够使用 HTML_OK 方案，但是当我尝试获取“部分 GET”请求时，连接再次返回“HTML_OK”。我不知道为什么会发生这种情况，我搜索了互联网，但找不到任何答案。我写的代码是：

```
import java.io.*;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;

public class FileDownloader {

    public static void main(String[] args){

        try{

            int bufSize = 8 * 1024;
            URL url = null;
            BufferedInputStream fromURL = null;
            BufferedOutputStream toFile = null;

            /*
            if(args[1].charAt(0) == 'h' && args[1].charAt(1) == 't' &&
                    args[1].charAt(2) == 't' && args[1].charAt(2) == 'p'){
                url = new URL(args[1]); 
            }
            else{
                url = new URL("http://" + args[1]);
            }
            * 
            */
            // silinecek
            url = new URL("http://www.cs.bilkent.edu.tr/~morhan/cs421/file_2.txt"); 

            // Conncecting the URL to HttpURLConnection
            HttpURLConnection con = (HttpURLConnection) url.openConnection();

            // Setting up the outputfileName
            String outputfileName = url.getPath().substring(url.getPath().lastIndexOf("/") + 1);
            File outputFile = new File(outputfileName);

            // Scenario - 1 ( 200 OK Message From HTML )
            if(args.length == 3){ // 3 OLACAK
                con.setRequestMethod("GET");
                System.out.println("Size of the file is: " + con.getContentLength());
                fromURL = new BufferedInputStream(con.getInputStream(), bufSize);
                toFile = new BufferedOutputStream(new FileOutputStream(outputFile), bufSize);   

                if(con.getResponseCode() == HttpURLConnection.HTTP_OK){
                    // READING BYTE BY BYTE HERE
                    int read = -1;
                    byte[] buf = new byte[bufSize];
                    while ((read = fromURL.read(buf, 0, bufSize)) >= 0) {
                        toFile.write(buf, 0, read);
                    }
                    toFile.close();
                    System.out.println("ok");
                }
            // Scenario - 2 (206 Partial Get Message From HTML
            }else if(args.length == 0){ // 5 OLACAK
                con.setRequestMethod("HEAD");

                if(con.getResponseCode() == HttpURLConnection.HTTP_OK){

                    System.out.println("Size of the file is: " + con.getContentLength());

                    //byte startRange =  0; //Byte.parseByte(args[3]);
                    //byte finishRange =  24;//Byte.parseByte(args[4]);

                    if(startRange < 0 || finishRange > ((byte)con.getContentLength()) - 1
                            || startRange > finishRange){
                        System.out.println("Range is not OK.");
                    }else{                     

                        con.setRequestMethod("GET");

                        // I am Setting the range here, however the program 
                        // always returns 200 OK message instead of a 206 one
                        con.setRequestProperty("Range: ", "bytes=0-20"); 

                        System.out.println(con.getRequestMethod());

                        fromURL = new BufferedInputStream(con.getInputStream(), bufSize);
                        toFile = new BufferedOutputStream(new FileOutputStream(outputFile), bufSize);

                        System.out.println(con.getResponseCode());

                        if(con.getResponseCode() == HttpURLConnection.HTTP_PARTIAL){
                            // NOT DOING THE IF STATEMENT
                            System.out.println("aaaa");
                        }

                        System.out.println("bbbb");
                    }
                }
            }else{
                System.out.println("Wrong argument count.");
            }

        }catch(MalformedURLException mue){
            mue.printStackTrace();
        }catch (IOException ioe) {
            ioe.printStackTrace();
        }
    }
} 
```

谁能帮我解决这个问题？

# javascript - 在 div 外悬停时隐藏 div

> ID：15385046
> 
> 赞同：0
> 
> 时间：2013-03-13T12:15:49.527
> 
> 标签：javascript, jquery

```
<div id='container'>
    <div id="animate"></div>
</div> 
```

我在一个带有 id container 的大 div 里面有一个小 div。如果有人悬停在小 div 的外侧，我想用 id animate 隐藏 div。当鼠标悬停在小 div 上时，它应该保持打开状态。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T12:18:44.727

这应该这样做

```
$('#small').hover(function () {
    $('#animate').show();
}, function () {
    $('#animate').hide();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:25:23.257

尝试：

**CSS：**

```
#container{width:100px;height:100px;background:#F00;}
#animate{width:50px;height:50px;background:#0F0;} 
```

**脚本：**

```
$(function(){
    $('#container').mouseenter(function(){
        $('#animate').fadeTo(1000,0)
                     .mouseenter(function(){$(this).fadeTo(1000,1)});
    }); // use 750 in place of 1000 to animate it fast
}); 
```

文档[http://api.jquery.com/mouseenter/](http://api.jquery.com/mouseenter/)

**HTML：**

```
<div id='container'>
    <div id="animate">&nbsp;</div>
</div> 
```

**小提琴：http:** [//jsfiddle.net/aZmfz/4/](http://jsfiddle.net/aZmfz/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T12:41:27.357

**HTML：**

```
<div id='container'>
    <div id="animate">HI!</div>
</div> 
```

**CSS：**

```
#container{
    width: 100px;
    height: 200px;
    background-color: black; 
}
#animate{
    height: 50px;
    width: 100px;
    background-color: white;
    opacity: 0;
} 
```

**jQuery：**

```
$("#animate").hover(
    function(){
        $(this).stop().animate({
            opacity: 1
        }, 1000);
    },
    function(){
        $(this).stop().animate({
            opacity: 0
        }, 1000);
    }
); 
```

[**例子**](http://jsfiddle.net/KdQRL/)

您可能**不想**进行严格的[显示](http://api.jquery.com/show/)/[隐藏](http://api.jquery.com/hide/)，因为元素在隐藏**时将****没有高度/宽度**可以悬停。相反，您可能更愿意**将不透明度设置为 0（隐藏）或 1（显示）**，并让[动画](http://api.jquery.com/animate/)函数在两者之间转换。您还会注意到我使用了[.stop()](http://api.jquery.com/stop/)函数。这是因为如果您在元素上来回[悬停，它将继续调用排队的动画。](http://api.jquery.com/hover/)首先调用[停止](http://api.jquery.com/stop/)将防止这种情况发生。

 ***** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:45:13.397

你可以用纯 CSS 实现同样的效果：

```
#animate {
    -webkit-transition: opacity 0.2s;
    -moz-transition: opacity 0.2s;
    transition: opacity 0.2s;
}

#container:hover #animate {
    opacity: 0;
}

#container #animate:hover {
    opacity: 1;
} 
```

演示：http: [//jsfiddle.net/gXz2A/](http://jsfiddle.net/gXz2A/)****

# iphone - UISearchBar 中范围按钮文本的颜色

> ID：15385050
> 
> 赞同：3
> 
> 时间：2013-03-13T12:15:51.547
> 
> 标签：iphone, ios, objective-c, xcode, uisearchbar

我有一个 UISearchBar 必须有灰色调。

我现在遇到的问题是，一旦我设置了*任何*色调颜色，范围按钮就会获得相同的字体颜色，如果未选择按钮，则会导致对比度非常差。

如果未设置色调，则颜色会因所选状态而异。有没有办法使用淡色来实现这一点？

### 默认

![带色调](../Images/3b009953f040763c4b15a4baba30b1be.png)

### 使用色调

![没有色调](../Images/de2e546cd9433e19bffa0303e6b24eda.png)

### 更新

使用`po [mySearchBar recursiveDescription]`我发现`UISearchbar`具有以下视图层次结构：

```
<UISegmentedControl>
    <_UISegmentedControlBackgroundView>
        <UIImageView>
    <UISegment>
        <UISegmentLabel>
        <UIImageView>
    <UISegment>
        <UISegmentLabel>
        <UIImageView>
    <UISegment>
        <UISegmentLabel>
        <UIImageView>
<UISearchBarBackground> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T12:43:52.017

我似乎记得在使用浅色时遇到过类似的问题。似乎一个不幸的副作用是它默认了它影响的 UIKit 元素的颜色相关属性。

我不知道在使用 tints 时是否有办法防止这种缺陷（我认为没有），但以下解决方法可能对您有用：

## iOS 6 及以下

```
[searchBar setScopeBarButtonTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:[UIColor redColor], UITextAttributeTextColor, nil] forState:UIControlStateNormal];
[searchBar setScopeBarButtonTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:[UIColor greenColor], UITextAttributeTextColor, nil] forState:UIControlStateSelected]; 
```

## iOS 7+

```
[searchBar setScopeBarButtonTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:[UIColor redColor], NSForegroundColorAttributeName, nil] forState:UIControlStateNormal];
[searchBar setScopeBarButtonTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:[UIColor greenColor], NSForegroundColorAttributeName, nil] forState:UIControlStateSelected]; 
```

（来源：@willyang）

使用`UISearchBar`'s`setScopeBarButtonTitleTextAttributes:forState:`方法可以配置范围栏按钮标题的属性，包括文本颜色。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-08-26T08:47:56.580

因为**UITextAttributeTextColor**在 IOS 7 中被弃用，应该使用**NSForegroundColorAttributeName**代替：

```
[searchBar setScopeBarButtonTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:[UIColor redColor], NSForegroundColorAttributeName, nil] forState:UIControlStateNormal];
[searchBar setScopeBarButtonTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:[UIColor greenColor], NSForegroundColorAttributeName, nil] forState:UIControlStateSelected]; 
```

参考： http: [//www.downstairz.net/2013/11/24/uitextattributetextcolor-is-deprecated-in-ios-7/](http://www.downstairz.net/2013/11/24/uitextattributetextcolor-is-deprecated-in-ios-7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-12T19:39:43.753

斯威夫特 3：

如果您以编程方式构建 SearchBar，您可以使用以下设置 ScopeBar 的 TextAttributes：

```
let searchController = UISearchController(searchResultsController: nil) // inside the class 
```

……

```
// Background color
        searchController.searchBar.setScopeBarButtonTitleTextAttributes([NSBackgroundColorAttributeName: UIColor.yellow ], for: UIControlState.normal) 
```

您可以查看 UISearchBar 方法（向下滚动以找到 ScopeBar 方法）进行自定义： [https ://developer.apple.com/reference/uikit/uisearchbar?language=objc](https://developer.apple.com/reference/uikit/uisearchbar?language=objc)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:55:19.350

如果我正确地回答了您的问题，那么这就是您要尝试做的

```
for (id subview in yourSearchDisplayController.searchBar.subviews )
{

    if([subview isMemberOfClass:[UISegmentedControl class]])
    {

        UISegmentedControl *scopeBar=(UISegmentedControl *) subview;
        [scopeBar setSegmentedControlStyle:UISegmentedControlStyleBar];
        [scopeBar setTintColor: [UIColor redColor]];//you can also set RGB color here 
        //scopeBar.tintColor =  [UIColor blackColor];         
    }

} 
```

# java - SQLite 异常，数据库已经关闭

> ID：15385059
> 
> 赞同：0
> 
> 时间：2013-03-13T12:16:03.397
> 
> 标签：java, android

我正在编写以下代码，此代码用于创建一个调用 class 的类`DataBaseAdapter`。该类`DataBaseAdapter`负责所有数据库连接，并且有用于在数据库中存储值的方法。：

```
public class Main extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    DataBaseAdapter db = new DataBaseAdapter(getApplicationContext());
    Alarm al = new Alarm(1,"qwer",new int[] {1,1,1,0,1,0,1}, 1, 382562495,"App", 1);
    db.addAlarm(al);
    ScrollView sc= (ScrollView) findViewById(R.id.scrollBody);
    TableLayout tb = db.getAllAlarmList(getApplicationContext());
    sc.addView(tb);
    }
} 
```

这是我的日志：

```
03-13 17:09:33.388: D/SqliteDatabaseCpp(1095): Registering sqlite logging func: /data/data/com.example.devicecontrolpanel/databases/AlarmSystem
03-13 17:09:33.408: D/SqliteDatabaseCpp(1095): DB info: open db, path = /data/data/com.example.devicecontrolpanel/databases , key = 9lYvmWqw, flag = 6, cannot stat file, errno = 2, message = No such file or directory
03-13 17:09:33.408: D/SqliteDatabaseCpp(1095): DB info: path = /data/data/com.example.devicecontrolpanel/databases , key = 9lYvmWqw, handle: 0x8ccc98, type: w, r/w: (0,1), mode: truncate, disk free size: 777 M
03-13 17:09:33.588: D/SqliteDatabaseCpp(1095): DB info: close db, path = /data/data/com.example.devicecontrolpanel/databases , key = 9lYvmWqw, handle = 0x8ccc98, type = w, r/w = (0, 0)
03-13 17:09:33.588: D/SqliteDatabaseCpp(1095): DB info: open db, path = /data/data/com.example.devicecontrolpanel/databases , key = 9lYvmWqw, flag = 6, file size = 4096
03-13 17:09:33.588: D/SqliteDatabaseCpp(1095): DB info: path = /data/data/com.example.devicecontrolpanel/databases , key = 9lYvmWqw, handle: 0x8f3100, type: w, r/w: (0,1), mode: truncate, disk free size: 777 M
03-13 17:09:33.588: D/SqliteDatabaseCpp(1095): DB info: close db, path = /data/data/com.example.devicecontrolpanel/databases , key = 9lYvmWqw, handle = 0x8f3100, type = w, r/w = (0, 0)
03-13 17:09:33.598: D/AndroidRuntime(1095): Shutting down VM
03-13 17:09:33.598: W/dalvikvm(1095): threadid=1: thread exiting with uncaught exception (group=0x40ae0228)
03-13 17:09:33.618: E/AndroidRuntime(1095): FATAL EXCEPTION: main
03-13 17:09:33.618: E/AndroidRuntime(1095): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.devicecontrolpanel/com.example.devicecontrolpanel.Main}: java.lang.IllegalStateException: database /data/data/com.example.devicecontrolpanel/databases/AlarmSystem (conn# 0) already closed
03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2205)
03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2240)
03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.app.ActivityThread.access$600(ActivityThread.java:139)
03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1262)
03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.os.Looper.loop(Looper.java:156)
03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.app.ActivityThread.main(ActivityThread.java:4987)
03-13 17:09:33.618: E/AndroidRuntime(1095):     at java.lang.reflect.Method.invokeNative(Native Method)
03-13 17:09:33.618: E/AndroidRuntime(1095):     at java.lang.reflect.Method.invoke(Method.java:511)
03-13 17:09:33.618: E/AndroidRuntime(1095):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-13 17:09:33.618: E/AndroidRuntime(1095):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-13 17:09:33.618: E/AndroidRuntime(1095):     at dalvik.system.NativeStart.main(Native Method)
03-13 17:09:33.618: E/AndroidRuntime(1095): Caused by: java.lang.IllegalStateException: database /data/data/com.example.devicecontrolpanel/databases/AlarmSystem (conn# 0) already closed
03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.database.sqlite.SQLiteDatabase.verifyDbIsOpen(SQLiteDatabase.java:2194)
03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.database.sqlite.SQLiteDatabase.lock(SQLiteDatabase.java:448)
03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.database.sqlite.SQLiteDatabase.lock(SQLiteDatabase.java:435)
03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java:79)
03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:176)
03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:168)
03-13 17:09:33.618: E/AndroidRuntime(1095):     at com.example.devicecontrolpanel.DataBaseAdapter.getAlarmsCount(DataBaseAdapter.java:190)
03-13 17:09:33.618: E/AndroidRuntime(1095):     at com.example.devicecontrolpanel.DataBaseAdapter.getAllAlarmList(DataBaseAdapter.java:117)
03-13 17:09:33.618: E/AndroidRuntime(1095):     at com.example.devicecontrolpanel.Main.onCreate(Main.java:19)
03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.app.Activity.performCreate(Activity.java:4538)
03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2161)
03-13 17:09:33.618: E/AndroidRuntime(1095):     ... 11 more
03-13 17:16:48.144: D/SqliteDatabaseCpp(2080): Registering sqlite logging func: /data/data/com.example.devicecontrolpanel/databases/AlarmSystem
03-13 17:16:48.144: D/SqliteDatabaseCpp(2080): DB info: open db, path = /data/data/com.example.devicecontrolpanel/databases , key = 9lYvmWqw, flag = 6, cannot stat file, errno = 2, message = No such file or directory
03-13 17:16:48.164: D/SqliteDatabaseCpp(2080): DB info: path = /data/data/com.example.devicecontrolpanel/databases , key = 9lYvmWqw, handle: 0x86b220, type: w, r/w: (0,1), mode: truncate, disk free size: 777 M
03-13 17:16:48.384: D/SqliteDatabaseCpp(2080): DB info: close db, path = /data/data/com.example.devicecontrolpanel/databases , key = 9lYvmWqw, handle = 0x86b220, type = w, r/w = (0, 0)
03-13 17:16:48.384: D/SqliteDatabaseCpp(2080): DB info: open db, path = /data/data/com.example.devicecontrolpanel/databases , key = 9lYvmWqw, flag = 6, file size = 5120
03-13 17:16:48.384: D/SqliteDatabaseCpp(2080): DB info: path = /data/data/com.example.devicecontrolpanel/databases , key = 9lYvmWqw, handle: 0x897800, type: w, r/w: (0,1), mode: truncate, disk free size: 777 M
03-13 17:16:48.384: D/SqliteDatabaseCpp(2080): DB info: close db, path = /data/data/com.example.devicecontrolpanel/databases , key = 9lYvmWqw, handle = 0x897800, type = w, r/w = (0, 0)
03-13 17:16:48.394: D/AndroidRuntime(2080): Shutting down VM
03-13 17:16:48.414: W/dalvikvm(2080): threadid=1: thread exiting with uncaught exception (group=0x40ae0228)
03-13 17:16:48.424: E/AndroidRuntime(2080): FATAL EXCEPTION: main
03-13 17:16:48.424: E/AndroidRuntime(2080): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.devicecontrolpanel/com.example.devicecontrolpanel.Main}: java.lang.IllegalStateException: database /data/data/com.example.devicecontrolpanel/databases/AlarmSystem (conn# 0) already closed
03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2205)
03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2240)
03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.app.ActivityThread.access$600(ActivityThread.java:139)
03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1262)
03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.os.Looper.loop(Looper.java:156)
03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.app.ActivityThread.main(ActivityThread.java:4987)
03-13 17:16:48.424: E/AndroidRuntime(2080):     at java.lang.reflect.Method.invokeNative(Native Method)
03-13 17:16:48.424: E/AndroidRuntime(2080):     at java.lang.reflect.Method.invoke(Method.java:511)
03-13 17:16:48.424: E/AndroidRuntime(2080):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-13 17:16:48.424: E/AndroidRuntime(2080):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-13 17:16:48.424: E/AndroidRuntime(2080):     at dalvik.system.NativeStart.main(Native Method)
03-13 17:16:48.424: E/AndroidRuntime(2080): Caused by: java.lang.IllegalStateException: database /data/data/com.example.devicecontrolpanel/databases/AlarmSystem (conn# 0) already closed
03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.database.sqlite.SQLiteDatabase.verifyDbIsOpen(SQLiteDatabase.java:2194)
03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.database.sqlite.SQLiteDatabase.lock(SQLiteDatabase.java:448)
03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.database.sqlite.SQLiteDatabase.lock(SQLiteDatabase.java:435)
03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java:79)
03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:176)
03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:168)
03-13 17:16:48.424: E/AndroidRuntime(2080):     at com.example.devicecontrolpanel.DataBaseAdapter.getAlarmsCount(DataBaseAdapter.java:196)
03-13 17:16:48.424: E/AndroidRuntime(2080):     at com.example.devicecontrolpanel.DataBaseAdapter.getAllAlarmList(DataBaseAdapter.java:123)
03-13 17:16:48.424: E/AndroidRuntime(2080):     at com.example.devicecontrolpanel.Main.onCreate(Main.java:19)
03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.app.Activity.performCreate(Activity.java:4538)
03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2161)
03-13 17:16:48.424: E/AndroidRuntime(2080):     ... 11 more 
```

我收到错误，SQL 异常，数据库已经关闭。但我不明白为什么以及如何。？该怎么办。请帮忙。

这是 getAllAlarmList 的代码：

```
public Alarm getAlarm(int id)
{
    SQLiteDatabase db = this.getReadableDatabase();
    String[] colum = {KEY_ALARM_ID, KEY_DESC, KEY_REPEAT_DAY, KEY_REPEAT_TYPE, KEY_CALENDAR, KEY_APP, KEY_ACTIVE};

    Cursor cursor = db.query(TABLE_NAME, colum, KEY_ALARM_ID +"=?", new String[] { String.valueOf(id) }, null, null, null);

    if (cursor != null)
        cursor.moveToFirst();
    else
        return null;

    int alarm_id=Integer.parseInt(cursor.getString(0));
    String desc = cursor.getString(1);
    String dayRepeat = cursor.getString(2);
    int[] repeatDay = new int[7];
    for(int m=0;m<7;m++)
    {
        repeatDay[m]=Integer.parseInt(Character.toString(dayRepeat.charAt(m)));
    }
    int repeatType = Integer.parseInt(cursor.getString(3));
    Calendar cal = Calendar.getInstance();
    cal.setTimeInMillis(Long.parseLong(cursor.getString(4)));
    String app = cursor.getString(5);
    int active = Integer.parseInt(cursor.getString(6));
    //change dayRepeat String to int[]

    Alarm alarm = new Alarm(alarm_id, desc, repeatDay, repeatType, cal.getTimeInMillis(), app, active);
    db.close();
    return alarm;
}
public TableLayout getAllAlarmList(Context con)
{
    SQLiteDatabase db = this.getReadableDatabase();

    TableLayout body = new TableLayout(con);
    TableLayout.LayoutParams TbodyLayout = new TableLayout.LayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));
    body.setLayoutParams(TbodyLayout);
    body.setBackgroundColor(Color.BLACK);

    LayoutParams layout = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);

    if(getAlarmsCount()>0)
    {
        int maxCount = getAlarmsCount();
        String selectQuery = "SELECT  * FROM " + TABLE_NAME;
        Cursor cursor = db.rawQuery(selectQuery, null);
        if(cursor.moveToFirst())
        {
            TableRow[] tr = new TableRow[maxCount];
            CheckBox[] check = new CheckBox[maxCount];
            initializeCheckBoxId(maxCount);
            int checkboxid = 100;
            int alarm_id;
            for(int i=0;i<maxCount;i++)
            {
                tr[i] = new TableRow(con);
                check[i]= new CheckBox(con);
                alarm_id=Integer.parseInt(cursor.getString(0));
                Alarm alarm = getAlarm(alarm_id);
                check[i].setText(alarm.getTimeInString()+"\n"+alarm.getDesc()+"\n"+alarm.getRepeatTypeInString());
                check[i].setVisibility(1);
                check[i].setEnabled(false);
                if(alarm.getActive()==1)
                {
                    check[i].setEnabled(true);
                }
                setCheckBoxId(checkboxid+alarm.getAlarmId());
                check[i].setId(checkboxid+alarm.getAlarmId());
                check[i].setTextColor(Color.WHITE);
                tr[i].addView(check[i]);
                tr[i].setLayoutParams(layout);
                if(i%2==0)
                {
                    tr[i].setBackgroundColor(Color.DKGRAY);
                }
                else
                {
                    tr[i].setBackgroundColor(Color.GRAY);
                }
                body.addView(tr[i]);
            }
        }
        else
        {
            TextView TV = new TextView(con);
            TV.setText("No Alarms Set.");
            TV.setTextColor(Color.WHITE);
            TV.setVisibility(1);
            TableRow tableRow = new TableRow(con);
            tableRow.setLayoutParams(layout);
            body.addView(tableRow);
        }
    }
    else
    {
        TextView TV = new TextView(con);
        TV.setText("No Alarms Set.");
        TV.setTextColor(Color.WHITE);
        TV.setVisibility(1);
        TableRow tableRow = new TableRow(con);
        tableRow.setLayoutParams(layout);
        body.addView(tableRow);
    }
    db.close();
    return body;
} 
```

这是将警报添加到数据库的代码：

```
public void addAlarm(Alarm alarm)
{
    SQLiteDatabase db = this.getWritableDatabase();
    ContentValues values = new ContentValues();

    //values.put(KEY_ALARM_ID, alarm.getAlarmId());
    values.put(KEY_DESC, alarm.getDesc());
    values.put(KEY_REPEAT_DAY, alarm.getRepeatDay());
    values.put(KEY_REPEAT_TYPE, alarm.getRepeatType());
    values.put(KEY_CALENDAR, Long.toString(alarm.getCalendarInMillis()));
    values.put(KEY_APP, alarm.getApp());
    values.put(KEY_ACTIVE, alarm.getActive());

    db.insert(TABLE_NAME, null, values);
    db.close();
} 
```

这是获取警报计数的代码：

```
public int getAlarmsCount() {
    String countQuery = "SELECT  * FROM " + TABLE_NAME;
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(countQuery, null);
    cursor.close();

    // return count
    db.close();
    return cursor.getCount();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:39:34.867

你看涨`close()`底层证券`SQLiteDatabase`。你应该打电话[`SQLiteOpenHelper.close()`](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#close%28%29)。全部`db.close()`改成`this.close()`或原样`close()`

```
SQLiteDatabase db = this.getReadableDatabase();
...
this.close(); 
```

如果您调用`SQLiteDatabase.close()`而不是`SQLiteOpenHelper.close()`，`SQLiteOpenHelper`则无法知道这一点并返回已经关闭的`SQLiteDatabase`对象。

# plot - 用阴影填充绘制不等式的最简单方法？

> ID：15385063
> 
> 赞同：15
> 
> 时间：2013-03-13T12:16:18.603
> 
> 标签：plot, graph

![在此处输入图像描述](../Images/956648e688bb32edecca44bb25cc9560.png)

参考上图。我已经在excel中绘制了方程式，然后手动着色。你可以看到它不是很整洁。您可以看到有六个区域，每个区域都由两个或多个方程式界定。使用阴影图案绘制不等式和阴影区域的最简单方法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-13T13:35:44.917

为了建立@agstudy 的答案，这里有一种快速而简单的方法来表示 R 中的不等式：

```
plot(NA,xlim=c(0,1),ylim=c(0,1), xaxs="i",yaxs="i") # Empty plot
a <- curve(x^2, add = TRUE) # First curve
b <- curve(2*x^2-0.2, add = TRUE) # Second curve
names(a) <- c('xA','yA')
names(b) <- c('xB','yB')
with(as.list(c(b,a)),{
    id <- yB<=yA
    # b<a area
    polygon(x = c(xB[id], rev(xA[id])),
            y = c(yB[id], rev(yA[id])), 
            density=10, angle=0, border=NULL)
    # a>b area
    polygon(x = c(xB[!id], rev(xA[!id])),
            y = c(yB[!id], rev(yA[!id])), 
            density=10, angle=90, border=NULL)
    }) 
```

![在此处输入图像描述](../Images/c6073e82a799bdf17298d708559ce5d2.png)

如果有问题的区域被两个以上的方程包围，只需添加更多条件：

```
plot(NA,xlim=c(0,1),ylim=c(0,1), xaxs="i",yaxs="i") # Empty plot
a <- curve(x^2, add = TRUE) # First curve
b <- curve(2*x^2-0.2, add = TRUE) # Second curve
d <- curve(0.5*x^2+0.2, add = TRUE) # Third curve

names(a) <- c('xA','yA')
names(b) <- c('xB','yB')
names(d) <- c('xD','yD')

with(as.list(c(a,b,d)),{
    # Basically you have three conditions: 
    # curve a is below curve b, curve b is below curve d and curve d is above curve a
    # assign to each curve coordinates the two conditions that concerns it.

    idA <- yA<=yD & yA<=yB
    idB <- yB>=yA & yB<=yD
    idD <- yD<=yB & yD>=yA
    polygon(x = c(xB[idB], xD[idD], rev(xA[idA])),
            y = c(yB[idB], yD[idD], rev(yA[idA])), 
            density=10, angle=0, border=NULL)
    }) 
```

![在此处输入图像描述](../Images/441a94c844580614d1e695faa1120aae.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-13T13:19:23.500

在 R 中，只有有限的填充模式支持，它们只能应用于矩形和多边形。这仅在传统图形中，没有`ggplot2`或`lattice`。

可以用一组以特定角度绘制的线条填充矩形或多边形，线条之间有特定的分隔。**密度**参数控制线条之间的 间距（以每英寸线数表示），**角度**参数控制线条的角度。

这是帮助中的一个示例：

```
plot(c(1, 9), 1:2, type = "n")
polygon(1:9, c(2,1,2,1,NA,2,1,2,1),
         density = c(10, 20), angle = c(-45, 45)) 
```

![在此处输入图像描述](../Images/c97c23aaefadf9ae38f59e849b5d0576.png)

**编辑**

另一种选择是使用 alpha 混合来区分区域。这里使用@plannapus 示例和`gridBase`包来叠加多边形，您可以执行以下操作：

```
library(gridBase)
vps <- baseViewports()
pushViewport(vps$figure,vps$plot)
with(as.list(c(a,b,d)),{
  grid.polygon(x = xA, y = yA,gp =gpar(fill='red',lty=1,alpha=0.2))
  grid.polygon(x = xB, y = yB,gp =gpar(fill='green',lty=2,alpha=0.2))
  grid.polygon(x = xD, y = yD,gp =gpar(fill='blue',lty=3,alpha=0.2))
}
)
upViewport(2) 
```

![在此处输入图像描述](../Images/4aefcd2fde869e762b7c867a202706e6.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T13:03:06.247

MATLAB Central File Exchange 上有多个[提交内容](http://www.mathworks.com/matlabcentral/fileexchange/index?term=tag%3a%22hatching%22)，它们将以各种方式为您生成阴影图。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-13T12:34:01.990

我认为在这里可以为您派上用场的工具是[**gnuplot**](http://www.gnuplot.info/)。

看看以下演示：

[感觉](http://www.gnuplot.info/demo/fillbetween.html)
[统计之间的](http://www.phyast.pitt.edu/~zov1/gnuplot/html/statistics.html)
[一些技巧](http://gnuplot-tricks.blogspot.co.il/2009/06/plotting-inequality-in-2d.html)

# java - 从文件系统中获取文件并将其作为 File 对象传递

> ID：15385067
> 
> 赞同：0
> 
> 时间：2013-03-13T12:16:24.853
> 
> 标签：java, file, file-upload, file-io

我一直很高兴地使用 Play Framework (1.2.4) 与 Java 和 jQuery/javascript 的组合从网站上传文件。

在客户端，我将一个 blob 对象附加到一个`FormData`对象，然后将其发送到我的 Play Framework 控制器，该控制器接受该文件。我编写了一个类`UploadImg`来将此文件上传到 Amazon S3。然后我通过传入一个 File 对象和文件名（它是一个字符串）来启动该类，并调用该`doUpload()`方法：

```
public static void myController(File f){
    UploadImg imgToUpload = new UploadImg(File file, String filename);
    imgToUpload.doUpload();
    // ... 
```

现在我的桌面上有一堆图片，我正在编写一个“批量上传器”。我做了类似的事情：

```
 File img = new File("/pics/Repin 301.jpg");
 UploadImg fileToUpload = new UploadImg(img);
 fileToUpload.doUpload() 
```

但是我收到一条错误消息，告诉我我的输入为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:27:17.687

路径 /pics/ 看起来不会指向您的桌面，如果 pics 与您运行应用程序的位置相关，则删除前导斜杠。

试试这个来确认文件被找到：

```
File img = new File("/pics/Repin 301.jpg");
if(img.exists()) {
     UploadImg fileToUpload = new UploadImg(img);
    fileToUpload.doUpload()
}else{
     System.out.println("File not found");
} 
```

# php - PHP如何为数组设置键？

> ID：15385070
> 
> 赞同：2
> 
> 时间：2013-03-13T12:16:30.953
> 
> 标签：php, arrays

我有一个数组：

```
$a = array('color' => 'green', 'format' => 'text', 'link_url'); 
```

另一个：

```
$b = array('zero', 'one', 'two', 'three', 'test' => 'ok', 'four'); 
```

使用[array_merge()](http://www.php.net/manual/en/function.array-merge.php)我有一个这样的数组：

```
Array
(
    [color] => green
    [format] => text
    [0] => link_url
    [1] => zero
    [2] => one
    [3] => two
    [4] => three
    [test] => ok
    [5] => four
) 
```

为什么 PHP 设置数组键如上？为什么不这样：

```
Array
(
    [color] => green
    [format] => text
    [2] => link_url
    [3] => zero
    [4] => one
    [5] => two
    [6] => three
    [test] => ok
    [8] => four
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:19:10.077

这是因为数字 ID 与查看索引是分开计算的。字符串索引没有编号，也不计算在内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:18:34.267

引用原始数组定义的[PHP 手册：](http://www.php.net/manual/en/language.types.array.php)

> 密钥是可选的。如果未指定，PHP 将使用先前使用的最大整数键的增量。

[并来自array_merge()](http://www.php.net/manual/en/function.array-merge.php)上的文档：

> 如果输入数组具有相同的字符串键，则该键的后一个值将覆盖前一个。但是，如果数组包含数字键，则后面的值不会覆盖原始值，而是会被追加。
> 
> 带有数字键的输入数组中的值将使用从结果数组中的零开始的递增键重新编号。

所以这一切都非常明确地记录在案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:21:50.680

请检查文档：

> 如果输入数组具有相同的字符串键，则该键的后一个值将覆盖前一个。但是，如果数组包含数字键，则后面的值不会覆盖原始值，而是会被追加。
> 
> 带有数字键的输入数组中的值将使用从结果数组中的零开始的递增键重新编号。

参考：[http ://www.php.net/manual/en/function.array-merge.php](http://www.php.net/manual/en/function.array-merge.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:18:41.933

好吧，如果你看一下原始数组，应该会清楚：

```
array(3) {
  ["color"]=>
  string(5) "green"
  ["format"]=>
  string(4) "text"
  [0]=>
  string(8) "link_url"
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T12:18:48.370

您似乎假设了不存在的非数字键的排序或一致性。

数字键有一个顺序，这在它们的新值中表示；字符串键不是该排序系统的一部分，因此不会影响那些新的数值。

这就是*它的本来面目*，而且完全有道理。

# apache-flex - Flex 4 中的 Flex 3 项渲染器的 set data 函数等价于什么？

> ID：15385072
> 
> 赞同：-1
> 
> 时间：2013-03-13T12:16:34.410
> 
> 标签：apache-flex, flex4

请看上面的问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:47:01.750

在 flex 4 中引入了 <s:ItemRenderer 以避免使用 <mx:Hbox 等，这些组件确实非常重。因此，所有 hgroup 等 spark 组件都不会设置 data 属性，您可能需要对 spark itemrenderer 进行蒙皮并将其用作渲染器。

正如对您问题的评论中所说，设置数据属性没有变化。

# pthreads - 本地多线程服务器：如何让它变得简单？

> ID：15385074
> 
> 赞同：0
> 
> 时间：2013-03-13T12:16:36.217
> 
> 标签：pthreads, client-server, epoll

有一项任务 - 我需要一个具有以下属性的客户端-服务器应用程序：

*   客户端使用阻塞套接字
*   服务器是被动的：他接受传入的连接，获取一些数据，处理它并将结果发回
*   服务器有几个线程（主线程除外），从 1 到大约 100
*   所有操作都在一台机器上，即**客户端和服务器都使用 localhost**
*   传输的最大数据大小约为**1 KB**

一开始我已经实现了基于 epoll 的服务器：

*   主线程使用epoll做IO，工作线程做数据处理
*   所有服务器套接字都是非阻塞的
*   服务器有两个队列：主线程发出客户端请求的传入队列，主线程获得回复的传出队列。

我的作品，但后来我又想到了那个设计：它没有考虑到 localhost。它更普遍，因此更复杂。做得比它更简单会很好。

所以：

*   主线程执行 epoll_wait，接受并管理连接队列。连接队列是主线程放置已接受连接的队列
*   监听套接字是非阻塞的。接受的套接字正在阻塞
*   当任何套接字变为可读时，主线程唤醒工作线程，工作线程在阻塞模式下进行接收，在阻塞模式下处理和发送。

你怎么看待这件事？这样的设计够好吗？

感谢您的意见！

# c# - c# DbContext 需要 20 秒

> ID：15385076
> 
> 赞同：-3
> 
> 时间：2013-03-13T12:16:40.610
> 
> 标签：c#, entity-framework, dbcontext

当我开始控制台程序并初始化我的 DbContext 类时，我的程序每 20 秒等待一次。

没有 dbContext 类都可以正常工作。有谁知道为什么？

这里有一些代码

```
public class CobraDataBaseContext : DbContext
{

    public DbSet<Material> Materials { get; set; }
    public DbSet<Site> Sites { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        // Ein Workplace hat eine Optinale Maschine ABER eine Maschine muss immer einem Workplace 
        // zugeordnet sein.
        modelBuilder.Entity<WorkPlace>().HasOptional(m => m.machine).WithRequired(wp => wp.workPlace);

        // one material has optinal specification
        modelBuilder.Entity<Material>().HasOptional(n => n.specification).WithMany();
    }
} 
```

一个服务类

公共站点 getSite(string siteName) { var site = dbContext.Sites.FirstOrDefault(s => s.name.Equals(siteName));

```
 foreach (var wp in site.workPlaces)
        {
            if (wp.numberOfWorkers != null)
            {
                double count = wp.numberOfWorkers.value.Value;
            }
        }

        return dbContext.Sites.FirstOrDefault(s => s.name.Equals(siteName));
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:22:28.697

[以下摘录解释了正在发生的事情](http://vbfeeds.com/post.aspx?id=7511)

> 模型缓存
> 
> 发现模型、处理数据注释和应用流畅的 API 配置需要一些成本。为了避免每次实例化派生 DbContext 时产生此成本，模型在第一次初始化期间被缓存。然后，每次在同一个 AppDomain 中构造相同的派生上下文时，都会重新使用缓存的模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:22:19.367

这可能会帮助您：[`MSDN: Performance Considerations for Entity Framework 5`](http://msdn.microsoft.com/en-us/data/hh949853.aspx)

特别是，我发现如果您有一个大型模型，预编译视图最有帮助。

# c++ - 我该如何解释这个 LNK2005？

> ID：15385083
> 
> 赞同：4
> 
> 时间：2013-03-13T12:16:59.207
> 
> 标签：c++, linker, linker-errors

因此，有人带着一个项目来找我，该项目链接失败并出现错误 LNK2005：符号已在对象中定义（使用 Visual Studio 2010）。在这种情况下，我知道*出了什么*问题（因此可以为他们指出正确的解决方案），但我不知道*为什么*这在一定程度上是错误的，以便给出一个很好的解释（以防止它再次发生）。

```
// something.h
#ifndef _SOMETHING_H
#define _SOMETHING_H
int myCoolFunction();

int myAwesomeFunction() // Note implementing function in header
{
    return 3;
}
#endif 
```

-

```
// something.cpp
#include "something.h"
int myCoolFunction()
{
    return 4;
} 
```

-

```
// main.cpp
#include <iostream>
#include "something.h"

int main()
{
    std::cout << myAwesomeFunction() << std::endl;
} 
```

这会导致链接失败，并通过将 myAwesomeFunction() 放入 .cpp 并在 .h 中留下声明来修复。

我对链接器如何工作的理解几乎来自[这里](http://blogs.msdn.com/b/oldnewthing/archive/2013/01/07/10382714.aspx)。据我了解，我们提供了一个地方需要的符号。

我[在 LNK2005 上查找了 MSDN 文章](http://msdn.microsoft.com/en-us/library/72zdcz6f%28v=vs.80%29.aspx)，它与我期望链接器的行为方式相匹配（多次提供符号 -> 链接器被混淆），但似乎没有涵盖这种情况（这意味着我不理解一些明显的东西关于链接）。

Google 和 StackOverflow 与不包含`#ifndef`or的人产生问题`#pragma once`（这导致提供的符号的多个声明）

[我在这个网站上发现的一个相关问题](https://stackoverflow.com/questions/10140973/lnk2005-already-defined-error)也有同样的问题，但答案并没有解释*为什么*我们在我的理解水平上充分解决了这个问题。

**我有问题，我知道解决方案，但我不知道为什么我的解决方案有效**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:24:19.053

在典型的 C++ 项目中，您分别编译每个实现（或`.cpp`）文件——您通常从不将头文件（或`.h`）直接传递给编译器。在执行所有预处理和包含之后，这些文件中的每一个都成为一个*翻译单元*。因此，在您给出的示例中，有两个翻译单元如下所示：

*   `main.cpp`翻译单位：

    ```
    // Contents of <iostream> header here

    int myCoolFunction();

    int myAwesomeFunction() // Note implementing function in header
    {
        return 3;
    }

    int main()
    {
        std::cout << myAwesomeFunction() << std::endl;
    } 
    ```

*   `something.cpp`翻译单位：

    ```
    int myCoolFunction();

    int myAwesomeFunction() // Note implementing function in header
    {
        return 3;
    }

    int myCoolFunction()
    {
        return 4;
    } 
    ```

请注意，这两个翻译单元都包含重复的内容，因为它们都包含`something.h`. 如您所见，上述翻译单元中只有一个包含`myCoolFunction`. 那挺好的！但是，它们*都*包含 的定义`myAwesomeFunction`。那很糟！

翻译单元分别编译后，链接起来形成最终程序。关于跨翻译单元的多个声明有一定的规则。这些规则之一是（§3.2/4）：

> 每个程序都应包含该程序中 odr 使用的每个非内联函数或变量的准确定义；无需诊断。

您在整个程序中有多个定义，`myAwesomeFunction`因此您违反了规则。这就是为什么您的代码没有正确链接的原因。

您可以从链接器的角度来考虑它。编译这两个翻译单元后，您就有了两个目标文件。链接器的工作是将目标文件连接在一起以形成最终的可执行文件。因此，它会看到对 in 的调用`myAwesomeFunction`，`main`并尝试在其中一个目标文件中找到相应的函数定义。但是，有*两种*定义。链接器不知道使用哪一个，所以它就放弃了。

现在让我们看看如果您在中定义的翻译单元是什么样`myAwesomeFunction`的`something.cpp`：

*   固定`main.cpp`翻译单元：

    ```
    // Contents of <iostream> header here

    int myCoolFunction();

    int myAwesomeFunction();

    int main()
    {
        std::cout << myAwesomeFunction() << std::endl;
    } 
    ```

*   固定`something.cpp`翻译单元：

    ```
    int myCoolFunction();

    int myAwesomeFunction();

    int myCoolFunction()
    {
        return 4;
    }

    int myAwesomeFunction()
    {
        return 3;
    } 
    ```

现在它很完美。`myAwesomeFunction`现在整个程序只有一个定义。当链接器看到对 in 的调用`myAwesomeFunction`时`main`，它确切地知道*应该*将它链接到哪个函数定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:20:17.180

The linker is merely letting you know that you broke the **one definition rule**. This is a basic, well-documented rule of C++ - it isn't solved by using include guards or `#pragma once` directives, but, in case of a free function, by marking it `inline` or moving the implementation to a source file.

When a non-inline method is implemented in a header, all translation units that include that header will *define* it. When the corresponding `.obj` files are linked together, the linker detects the same symbol is exported (and defined) multiple times, and complains.

Moving the implementation to a `cpp` file effectively transforms your initial *definition* into a *declaration*.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-13T12:22:08.777

`myAwesomeFunction`在两个源文件中定义：`something.cpp`和`main.cpp`. 将其实现移至源文件之一，或将此函数声明为静态。

# php - 使 SQL 查询成为下拉菜单

> ID：15385085
> 
> 赞同：-1
> 
> 时间：2013-03-13T12:17:02.420
> 
> 标签：php, sql, drop-down-menu

我有两个 SQL 查询显示来自我的数据库的不同结果。我将这些结果用作导航栏中的导航链接。目前所有结果都显示为单行文本，我想让每个 SQL 查询显示为下拉菜单，查询的所有结果作为下拉菜单中的选项。

这是我正在使用的代码：

```
<?php

$q = "SELECT cat_id, cat_name FROM Category";
$result = mysqli_query($_SESSION['conn'], $q);
while ($row = mysqli_fetch_row($result)) {
    echo "<a href='category.php?id=$row[0]'>$row[1]</a> ";
    //display product categories
}
mysqli_free_result($result); //free result

$q = "SELECT brand_id, brand_name FROM Brand";
$result = mysqli_query($_SESSION['conn'], $q);
while ($row = mysqli_fetch_row($result)) {
    echo "<a href='brand.php?id=$row[0]'>$row[1]</a> ";
    //display product Brands
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:21:08.090

```
$q="SELECT cat_id, cat_name FROM Category";
$result = mysqli_query($_SESSION['conn'],$q);
$option1.="<select name='category'>";
while ($row = mysqli_fetch_row($result)){
   $option1.="<option value='$row[0]'>$row[1]</option> ";
}
$option1.="</select>"; 
```

same for second print this $option1 value in your view file

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:19:18.933

利用`select` `option`

```
echo "<select name='category'>";
while ($row = mysqli_fetch_row($result)){
   echo "<option value='$row[0]'>$row[1]</option> ";
}
echo "</select>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:28:54.460

```
<select onchange="document.location.href='category.php?id='+this.value;">  
<?php   
    $result = mysqli_query($_SESSION['conn'],$q);
    while ($row = mysqli_fetch_row($result)):?>
    <option value="<?=$row[0];?>"><?=$row[1];?></option>
    <?php endwhile;?>
</select> 
```

# ruby-on-rails - 将关联添加到现有模型

> ID：15385087
> 
> 赞同：61
> 
> 时间：2013-03-13T12:17:06.513
> 
> 标签：ruby-on-rails, migration, associations

我想知道如何为我的模型添加关联。假设，我生成两个模型

```
rails generate model User
rails generate model Car 
```

现在我想添加一个关联，以便模型获取表单

```
class User < ActiveRecord::Base
  has_many :cars
end
class Car < ActiveRecord::Base
  belongs_to :user
end 
```

问题是：如何通过迁移应用此修改以获取数据库中的 cars_users 表？我打算在我的代码中使用该表。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-03-13T12:33:11.517

`belongs_to`关联期望`association_id`在其对应表中有一个列。由于汽车属于用户，汽车表应该有一个`user_id`列。这可以通过两种方式完成。

首先，您可以在创建模型时生成列

```
rails g model car user_id:references 
```

或者在创建模型后添加 user_id，就像 Richard Brown 的回答一样。请注意，如果您使用`integer`而不是`references`，则必须自己创建索引。

```
rails g migration add_user_id_to_cars user_id:integer 
```

然后在生成的迁移中，添加

```
add_index :cars, :user_id 
```

更新：

正如 Joseph 在评论中提到的，在当前版本的 Rails 中已经解决了手动添加索引的需要。我认为它是在 Rails 4 中引入的。您可以在 Rails[官方迁移指南](http://edgeguides.rubyonrails.org/active_record_migrations.html#creating-a-standalone-migration)中阅读更多内容。它的要点是运行以下生成器

```
bin/rails g migration add_user_to_cars user:references 
```

将创建一个迁移，其行类似于

```
add_reference :cars, :user, index: true 
```

这将向汽车表中添加一`user_id`列，并且还将标记该列以进行索引。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-06-06T14:35:24.037

按照@jvnill 在**rails 4**中的解释（也可能在 rails 3.2 中），您也可以这样做（避免 id 部分并记住确切的 convections）：

```
rails g migration AddUserToCar user:references 
```

这将创建以下迁移，同时使用所有正确的约定添加列和索引：

```
class AddUserToCar < ActiveRecord::Migration
  def change
    add_reference :cars, :user, index: true
  end
end 
```

最后像往常一样运行迁移：

```
rake db:migrate 
```

查看您`schema.rb`要查看的新索引和 user_id 列。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-13T12:19:37.667

生成迁移以创建关联：

```
rails g migration AddUserIdToCars user_id:integer
rake db:migrate 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-25T13:02:18.607

迁移文件：

```
class Createuser < ActiveRecord::Migration[5.0]
  def change
    create_table :users do |t|
      t.string :name
    end

    create_table :cars do |t|
      t.belongs_to :user, index: true
      t.varchar(255) :model
      t.varchar(255) :color
    end
  end
end 
```

# c# - 无法从 itemtemplate 中的文本框中获取文本框值

> ID：15385094
> 
> 赞同：4
> 
> 时间：2013-03-13T12:17:39.440
> 
> 标签：c#, asp.net

文本框中的数量（DB 中的数量）是通过 Basket DB 表中的 Eval() 方法加载的。我想要实现的是，当我手动更改数量并单击更新时，该记录的数量将被更新，然后网格将被重新加载。我似乎无法在后面的代码中检索该文本框的值。

我知道 FindControl() 方法用于从 itemtemplate 中的控件获取值，但我不知道如何在这里使用它。

下面的尝试但总是得到 nullReferenceException

```
TextBox txt = (TextBox)GridView2.FindControl("txtQuantityWanted");
int _quantity = Convert.ToInt16(txt.Text); 
```

注意：按钮在那里，但什么也不做。

![在此处输入图像描述](../Images/31f16e2b9ee36bc087a2ea76cebca264.png)

```
<ItemTemplate>        
    <asp:TextBox runat="server" ID="txtQuantityWanted" Text='<%# Eval("quantityWanted") %>' ></asp:TextBox>
    <asp:LinkButton ID="LinkButton11" runat="server" CommandName="update" CommandArgument='<%# Eval("coffeeName") + ";" + Eval("datetimeAdded")  %>' >Update</asp:LinkButton>
    <asp:Button ID="Button21" runat="server" Text="Button" CommandName="edit" />
</ItemTemplate> 

<asp:TemplateField HeaderText="Total [£]">
    <ItemTemplate>
        <asp:Label id="lblItemTotal" runat="server" Text='<%# String.Format("{0:C}", Convert.ToInt32(Eval("quantityWanted"))* Convert.ToDouble(Eval("price"))) %>' ></asp:Label> 
        <asp:LinkButton ID="LinkButton1" runat="server" CommandName="remove" CommandArgument='<%# Eval("coffeeName") + ";" + Eval("datetimeAdded") %>' >Remove</asp:LinkButton>
    </ItemTemplate> 
</asp:TemplateField> 
```

C#代码：

```
protected void GridView2_RowCommand(object sender, GridViewCommandEventArgs e)
{
    // .....
    else if (e.CommandName == "update")
    {
        string params = Convert.ToString(e.CommandArgument);
        string[] arg = new string[2];
        arg = params.Split(';');
        name = Convert.ToString(arg[0]);
        datetimeAdded = Convert.ToString(arg[1]);

        const string strConn = @"Data Source=.\SQLEXPRESS;AttachDbFilename=L:\ASP.NET\Exercise1\Exercise1\Exercise1\App_Data\ASPNETDB.MDF;Integrated Security=True;Connect Timeout=30;User Instance=True";

        DataSet ds = new DataSet("Employees");
        SqlConnection connection = new SqlConnection(strConn);

        // Here I need value from textbox to replace 11
        SqlCommand abc = new SqlCommand("UPDATE Basket SET quantityWanted = 11 WHERE coffeeName LIKE '%" + name + "%' AND datetimeAdded LIKE '" + datetimeAdded + "' ", connection);
        connection.Open();
        int ii = abc.ExecuteNonQuery();
        connection.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T12:19:46.273

使用 GridView.Rows 集合来查找控件。您可以在行集合索引器中传递行的索引。

```
TextBox txt = (TextBox)GridView2.Rows[0].FindControl("txtQuantityWanted"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T12:21:38.073

您还必须传递行索引，您的代码将如下所示

```
TextBox txt = (TextBox)GridView2.Rows[0].FindControl("txtQuantityWanted"); 
```

我希望它对你有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T12:24:51.477

```
 Control ctrl = e.CommandSource as Control;  

   if (ctrl != null)    
   {    
       GridViewRow gvRow = ctrl.Parent.NamingContainer as GridViewRow;     

       TextBox txt= (TextBox)gvRow.FindControl("txtQuantityWanted"); 
   } 
```

# perl - 为什么 chomp($Array[0]) 会删除 $Array[0] 中包含的一些字符串？

> ID：15385095
> 
> 赞同：-1
> 
> 时间：2013-03-13T12:17:44.653
> 
> 标签：perl

我有一个看起来像这样的输入文件

```
1a0i b.40.4.6
1a49 b.58.1.1
1a82 c.37.1.10
1atp d.144.1.7
.
.
.
.
```

* * *

问题1

我将每一行放入@Array

当我使用

```
$Line = chomp($Array[0]);
print $Line; 
```

在屏幕 1 中显示输出

```
but When I use
$Line = $Array[0];
print $Line; 
```

在屏幕 1a0i b.40.4.6 中显示输出

为什么 chomp 会让 $Line 只剩下一个字符？

* * *

问题2

我想使用 b.40 作为 file_name ，所以这是我的代码

$Array[0] 是 1a0i b.40.4.6

```
$Line = $Array[0];
@Element = split(" ",$Line);
@Tiny_element = split(".",$Element[1]);
$File_name = join(".",splice(@Tiny_element,0,2)); 
```

但我打印 $File_name ，但它什么也没显示，我使用`Dumper \@Tiny_element`，但它显示空 I `print $Element[1]`，它显示 b.40.4.6 ，我用`index($Element[1],".")`它显示 1 所以我知道它包含“。” 但它不能与“。”分开。

我试试`split("\.",$Element[1])`；`split('.',$Element[1])`之前，但它仍然没有解决......

它出什么问题了？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:46:12.733

也许您可以尝试阅读您正在使用的函数的文档，而不仅仅是猜测它的行为。

[chomp](http://perldoc.perl.org/functions/chomp.html)的文档是这样说的：

> 它返回从所有参数中删除的字符总数

该字符串已就地编辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T12:20:18.373

**Answer to problem 1:**

Use:

```
chomp($Array[0]);
$Line = $Array[0]; 
```

instead of:

```
$Line = chomp($Array[0]); 
```

That's because return value of `chomp` is not the string, but the number of trailing characters removed from the string.

**Answer to problem 2**

```
$File_name = $1 if ($Line =~ /\s([^\.]+\.[^\.]+)/); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T16:05:05.057

对于您的第二个问题，如果我要通过更改拆分语句的第一个参数来澄清您的代码，如下所示：

```
 $Line = $Array[0];
 @Element = split(/ /,$Line);
 @Tiny_element = split(/./,$Element[1]);
 $File_name = join(".",splice(@Tiny_element,0,2)); 
```

并提醒您这`.`是正则表达式中的通配符，您会更好地理解您的错误吗？

顺便说一句：`/[.]/`是查找文字句点的绝佳正则表达式。

# list - lisp通过函数排序列表

> ID：15385099
> 
> 赞同：4
> 
> 时间：2013-03-13T12:17:58.720
> 
> 标签：list, function, sorting, lisp

我正在尝试使用 lisp 的排序通过函数对列表进行排序，但不知道如何执行此操作。我在具有 x 和 y 坐标的 2D 空间中有一个起点。然后我有一个其他 N 个点的列表，我有一个计算 2 个点之间距离的函数。我现在想要的是一个列表，其中包含所有 N 点，并按从起点到所有其他点的距离升序排序。

我想我可以使用排序函数并将函数作为参数传递（计算距离函数）但我不知道该怎么做，网上的研究也没有帮助。

有任何想法吗？

问候

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T12:43:06.543

`:key`与 一起使用[`sort`](http://www.lispworks.com/documentation/HyperSpec/Body/f_sort_.htm)：

```
(sort list #'< :key (lambda (p) (dist p start-point))) 
```

这将根据到 的距离以`list`递增顺序（`>`用于递减）对点进行排序`start-point`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T12:31:12.633

如果你使用 common lisp，我推荐你[Common Lisp Hyper Spec](http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/FrontMatter/index.html)项目。在您的情况下，该函数的文档[`sort`](http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/fun_sortcm_stable-sort.html)将很有用。在这里你可以看到，它有第二个参数：*predicate*。*谓词*接受两个参数并返回第二个参数是否大于第一个参数。

假设你有一个函数`dist`，测量两点之间的距离。要通过与您的距离比较两点`start-point`，您需要以下 lambda：

```
#'(lambda (p1 p2) (> (dist p1 start-point) (dist p2 start-point))) 
```

所以你必须把它放在`sort`参数列表中谓词的位置（第二个位置）。

# c++ - 如何在 C++ 中使用 iprintf

> ID：15385100
> 
> 赞同：1
> 
> 时间：2013-03-13T12:18:02.897
> 
> 标签：c++, devkit, devkitpro

我怎样才能真正使用任何命令（在使用 Devkit Pro for NDS 的 c++ 编程中）简单地将变量而不是文本打印到特定位置？这是我打印文本的内容：

```
iprintf("\x1b[1;20HHello"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-25T18:44:10.483

您还可以直接操作控制台（包括窗口它并有多个控制台要打印到）。

```
PrintConsole* pc = consoleDemoInit();

pc->cursorX = 10;
pc->cursorY = 10;

printf("hi"); 
```

这里有更多细节：

[http://libnds.devkitpro.org/a00107.html](http://libnds.devkitpro.org/a00107.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T20:38:33.750

后来我发现对于 iprintf 和 printf，这是一种方法：

```
 iprintf("\x1b[%d;%dHText goes here...", y, x); //the x and y are reverse because that is how printf works 
```

# android - SherlockFragmentActivity 上的 requestWindowFeature

> ID：15385104
> 
> 赞同：0
> 
> 时间：2013-03-13T12:18:08.590
> 
> 标签：android, android-actionbar, actionbarsherlock

它`NullPointerException`在这条线上显示

```
bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS); 
```

而且我想我已经`requestWindowFeature`在确切的位置使用过。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    requestWindowFeature(com.actionbarsherlock.view.Window.FEATURE_NO_TITLE);
    super.onCreate(savedInstanceState);

    mViewPager = new ViewPager(this);
    mViewPager.setId(R.id.pager);

    setContentView(mViewPager);

    ActionBar bar = getSupportActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    mTabsAdapter = new TabsAdapter(this, mViewPager);

    mTabsAdapter.addTab(bar.newTab().setText("Featured"),
            EventsFeatured.class, null);
    mTabsAdapter.addTab(bar.newTab().setText("All"), EventsAll.class, null);
    mTabsAdapter.addTab(bar.newTab().setText("Nearby"), EventsNearBy.class,
            null);

} 
```

你可以在这里找到完整的代码[http://pastebin.com/74a8shqs](http://pastebin.com/74a8shqs)

日志猫： ![在此处输入图像描述](../Images/6aefcbbbb74aeba7af0570e694a294d1.png)

# android - 服务完成后如何刷新 ListView？

> ID：15385106
> 
> 赞同：0
> 
> 时间：2013-03-13T12:18:10.057
> 
> 标签：android, android-listview, android-service, android-arrayadapter

我正在开发一个应用程序，其中我有一个通过服务执行的后台任务。我有一个列表，其中显示了一些数据元素。我的场景是：

> 1- 用户在 bg 中设置了要执行的内容，并且不关闭应用程序并将其保持在此状态。
> 
> 2-后台进程开始工作，完成工作并完成。但列表仍显示用户输入的任务。它应该已从列表中删除。

这正是我想要实现的功能。我怎样才能做到这一点？

**请记住**，如果用户执行一些操作，例如导航到其他屏幕等，我已经对其进行了编码以获取新列表以供查看。但是，如果用户在安排某些事情后让它闲置，则视图不会刷新。请帮我解决这个问题。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:21:49.013

在您的列表适配器上调用 notifyDataSetChanged()。

notifyDataSetChanged() 通知附加的观察者底层数据已更改，任何反映数据集的视图都应自行刷新。

[安卓。notifyDataSetChanged() 方法和 ListViews 是如何工作的？](https://stackoverflow.com/questions/12229817/android-how-does-notifydatasetchanged-method-and-listviews-work). 接受的答案是链接有一个很好的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:02:44.927

我认为您必须使用 Service 和 BroadcastReceiver 来解决您的问题。

```
// Register Broadcast Receiver
        IntentFilter filter = new IntentFilter(MyService.MYOWNACTIONFILTER);
        registerReceiver(myReceiver, filter); 
```

在服务中，您需要发送

```
Intent intent = new Intent();
    // Bundle the counter value with Intent
    intent.putExtra("key", data);
sendBroadcast(intent); // finally broadcast 
```

后台操作完成后。

最后

在您的服务调用活动中

```
private BroadcastReceiver myReceiver = new BroadcastReceiver() {

    public void onReceive(Context context, Intent intent) {
           // do your operation and refresh the list
        }
   } 
```

希望这会奏效。

# hadoop - 用于 Hadoop 开发的 Eclipse 设置

> ID：15385112
> 
> 赞同：1
> 
> 时间：2013-03-13T12:18:18.697
> 
> 标签：hadoop, windows-7-x64, eclipse-indigo

我正在使用 hadoop 1.0.3 版本。我尝试配置 hadoop Eclipse Indigo。但它无法启动 dfs 并显示错误无法登录。![在此处输入图像描述](../Images/9884ff45c99e7d81213615af28a2b095.png)

请建议我 map/reduce 有什么问题？

**编辑：**我使用的是Windows 7，所以首先安装**cygwin**而不是**hadoop1.0.4**并成功启动服务 `http://127.0.0.1:50030/ and http://localhost:50070/`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T10:07:38.280

Eclipse Indigo 是 3.7 版。您可以阅读“3.6 之前的任何 Eclipse 都与 Eclipse 插件兼容。（不适用于 Eclipse 3.7）” [http://www.orzota.com/eclipse-setup-for-hadoop-development/](http://www.orzota.com/eclipse-setup-for-hadoop-development/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:25:09.083

检查你是否正确安装了hadoop。尝试安装 hadoop 插件，正如您在[install plugin](http://v-lad.org/Tutorials/Hadoop/13.5%20-%20copy%20hadoop%20plugin.html)中看到的那样。你可以在[haddop 视频教程中看到一个教程](http://www.youtube.com/watch?v=2SU4qZwz8HU)。另外，看看[eclipse setup for hadoop development](http://orzota.com/blog/eclipse-setup-for-hadoop-development/)。

# java - JTable动态颜色行和单元格

> ID：15385114
> 
> 赞同：1
> 
> 时间：2013-03-13T12:18:22.147
> 
> 标签：java, swing, jtable, tablecellrenderer

我想为 JTable 对象创建搜索功能。我有一个 JTextFiled，我在其中放置要搜索的文本。我想更改包含此文本的颜色行和单元格。现在我被卡住了，因为我不知道如何动态改变颜色。

```
public class TableSearchCellRenderer extends DefaultTableCellRenderer {
    String search = "";

    public void setSearch(String search) {
        this.search = search;
    }

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        if (table.getValueAt(row, column).equals(search)) {
            setBackground(Color.green);
        }
        return this;
    }
} 
```

我试过这样的东西，但它不起作用。

我试图这样调用重新渲染表

```
 String selectedTitle = tabbed.getTitleAt(tabbed.getSelectedIndex());
 JTable table = tabels.get(selectedTitle);

 ((TableSearchCellRenderer)table.getDefaultRenderer(String.class)).setSearch(searchField.getText());
 table.repaint();
 ((AbstractTableModel) table.getModel()).fireTableDataChanged(); 
```

但没有成功:(

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T12:45:41.657

这是基于 TableCellRenderer 的搜索功能的工作版本。您可能遇到的问题之一是，尽管您的 TableModel 包含字符串，但如果您使用`DefaultTableModel`，它总是返回`Object.class`所有数据，`JTable`因此将使用.`DefaultTableCellRenderer`而不是您的`TableSearchCellRenderer`.

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.util.Random;
import java.util.Vector;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.DefaultTableModel;

public class TestTable2 {

    private String search;

    public String getSearch() {
        return search;
    }

    public void setSearch(String search) {
        this.search = search;
    }

    private class TableSearchRenderer extends DefaultTableCellRenderer {

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            setBackground(null);
            Component tableCellRendererComponent = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
            if (getSearch() != null && getSearch().length() > 0 && value.toString().contains(getSearch())) {
                setBackground(Color.RED);
            }
            return tableCellRendererComponent;
        }
    }

    protected void initUI() {
        DefaultTableModel model = new DefaultTableModel();
        for (int i = 0; i < 5; i++) {
            model.addColumn("Column " + (i + 1));
        }
        Random random = new Random();
        for (int i = 0; i < 200; i++) {
            Vector<Object> row = new Vector<Object>();
            for (int j = 0; j < 40; j++) {
                row.add(WORDS[random.nextInt(WORDS.length)]);
            }
            model.addRow(row);
        }
        table = new JTable(model);
        TableSearchRenderer renderer = new TableSearchRenderer();
        table.setDefaultRenderer(Object.class, renderer);
        textField = new JTextField(30);
        textField.getDocument().addDocumentListener(new DocumentListener() {

            @Override
            public void removeUpdate(DocumentEvent e) {
                updateSearch();
            }

            @Override
            public void insertUpdate(DocumentEvent e) {
                updateSearch();
            }

            @Override
            public void changedUpdate(DocumentEvent e) {
                updateSearch();
            }
        });
        JFrame frame = new JFrame(TestTable2.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JScrollPane scrollpane = new JScrollPane(table);
        scrollpane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
        frame.add(scrollpane, BorderLayout.CENTER);
        frame.add(textField, BorderLayout.NORTH);
        frame.setSize(1000, 800);
        frame.setVisible(true);
    }

    protected void updateSearch() {
        setSearch(textField.getText());
        table.repaint();
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTable2().initUI();
            }
        });
    }

    private static final String[] WORDS = { "art", "australia", "baby", "beach", "birthday", "blue", "bw", "california", "canada", "canon",
            "cat", "chicago", "china", "christmas", "city", "dog", "england", "europe", "family", "festival", "flower", "flowers", "food",
            "france", "friends", "fun", "germany", "holiday", "india", "italy", "japan", "london", "me", "mexico", "music", "nature",
            "new", "newyork", "night", "nikon", "nyc", "paris", "park", "party", "people", "portrait", "sanfrancisco", "sky", "snow",
            "spain", "summer", "sunset", "taiwan", "tokyo", "travel", "trip", "uk", "usa", "vacation", "water", "wedding" };
    private JTable table;
    private JTextField textField;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:30:40.113

请参阅[表格行渲染](http://tips4java.wordpress.com/2010/01/24/table-row-rendering/)。该示例对固定单词进行行级突出显示。您需要修改代码以突出显示您的搜索词。

另一种方法是过滤表以仅查看包含您正在搜索的文本的行。有关工作示例，请参阅[排序和过滤。](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:04:32.960

有用。我更改了准备渲染器。

```
JTable table = new JTable() {
                private static final long serialVersionUID = 1L;

                public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
                    Component c = super.prepareRenderer(renderer, row, column);

                    **if (column == 0) {
                        for (int i = 0; i < getModel().getColumnCount(); i++) {
                            if (((TableSearchRenderer) getDefaultRenderer(String.class)).getSearch().length() > 0 && ((TableSearchRenderer) getDefaultRenderer(String.class)).getSearch().toLowerCase().equals(getModel().getValueAt(row, i).toString().toLowerCase()))
                                ((TableSearchRenderer) getDefaultRenderer(String.class)).getRows().add(row);
                        }
                    }**

                    if (((TableSearchRenderer) getDefaultRenderer(String.class)).getRows().contains(row) && c.getBackground() != Color.RED) {
                        c.setBackground(Color.GREEN);
                    }

                    return c;
                }
            }; 
```

# meteor - 我如何删除jquery

> ID：15385115
> 
> 赞同：4
> 
> 时间：2013-03-13T12:18:22.987
> 
> 标签：meteor

我的流星应用程序中不需要 jquery。当我输入 meteor remove jquery 时，答案是 jquery: not in project。但是jquery仍然附加在html中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:03:59.850

Meteor internals (domutils) 依赖于 JQuery，但我相信计划是在某个阶段删除该依赖项：

请参阅：[https ://groups.google.com/forum/?fromgroups=#!topic/meteor-talk/21y9NbM9v90](https://groups.google.com/forum/?fromgroups=#!topic/meteor-talk/21y9NbM9v90)

如果存在嘶嘶声，Domutils 似乎能够在没有 jQuery 的情况下应对（参见 findAllBySelector）。快速扫描代码我没有看到任何其他用途（除了在服务器端 - 在较少的解析器中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-24T20:13:03.257

用另一个版本（2.x 或 3.x）删除/替换 jQuery。[将jquery 包](https://github.com/meteor/meteor/tree/devel/packages/jquery)从官方来源克隆到您的项目文件夹`/packages`中。

用任何东西替换内容`jquery.js`。

下载的包将具有更高的优先级，并将代替原始包使用。风险自负。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-07T08:23:51.950

这就是我从 Meteor 中删除 jQuery 的方法。

**在执行此操作之前，请确保您的代码确实不依赖于 jQuery。此外，根据 jQuery 添加任何 Meteor 包将不再按预期工作（例如：materialize:materialize）。**

因此，如果您想确保无论如何都从 Meteor 中删除 jQuery，只需输入

```
Package.describe({
  summary: "Remove jQuery from meteor",
  name: "jquery",
  version: '1.999.999',
}); 
```

进入`packages/jquery/package.js`. 无需克隆。无需添加任何其他文件。检查您的`.meteor/versions`文件中的条目：

```
jquery@1.999.999 
```

确认它有效。

# java - 将少量信息保存为 android 中的设置（例如第一次运行该应用程序）

> ID：15385117
> 
> 赞同：25
> 
> 时间：2013-03-13T12:18:28.237
> 
> 标签：java, android, database, application-settings

我想保存一个标志来识别我的应用程序是否第一次运行。对于这个简单的工作，我不想创建数据库..

有一个简单的选择吗？我只想保存和阅读少量信息。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-13T12:19:03.290

使用`sharedPreference`或`files`保存数据，但更好的选择是`sharedPreference`.

用于检索

```
SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
boolean silent = settings.getBoolean("silentMode", false); 
```

为储蓄

```
SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
SharedPreferences.Editor editor = settings.edit();
editor.putBoolean("silentMode", true);
editor.commit(); 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-03-13T12:21:15.643

使用`SharedPreferences`.

```
SharedPreferences preferences = getSharedPreferences("prefName", MODE_PRIVATE);
SharedPreferences.Editor edit= preferences.edit();

edit.putBoolean("isFirstRun", false);
edit.commit(); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-05-02T12:26:20.577

一种正确的方法`SharedPreferences`是使用用于此类事情的 Android 类。

# 存储设置

```
SharedPreferences settings = getSharedPreferences(NAME_OF_PREFERENCES, MODE_PRIVATE);
SharedPreferences.Editor editor = settings.edit();
editor.putBoolean("appPreviouslyStarted", true);
editor.apply(); 
```

**不要忘记应用，否则您对设置的更改将不会被保存！**

您可以使用不同的`NAME_OF_PREFERENCES`. 设置存储在设备上，因此在关闭应用程序后可用。

当您尝试检索`NAME_OF_PREFERENCES`尚未创建的内容时，您将创建一个新的。[在这里](http://developer.android.com/reference/android/content/Context.html#getSharedPreferences(java.lang.String,%20int))查看更多这样的行为。

## 应用（）与提交（）

您可以使用`editor.apply()`as well `editor.commit()`，唯一的区别是 apply() 不会返回`boolean`值 with 如果编辑成功与否。editor.apply() 因此更快更常用。

## 什么是 MODE_PRIVATE

[您可以在这里](http://developer.android.com/reference/android/content/Context.html#MODE_PRIVATE)看到所有关于不同模式的信息。对于你的情况`MODE_PRIVATE`很好。

# 检索设置

```
SharedPreferences settings = getSharedPreferences(NAME_OF_PREFERENCES, MODE_PRIVATE);
boolean silent = settings.getBoolean("silentMode", false); 
```

从`SharedPreferences`对象中检索设置时，您始终必须指定一个默认值，该默认值将在未找到该设置时返回。在这种情况下，就是`false`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-13T12:20:21.290

我建议您使用[SharedPreference](http://developer.android.com/guide/topics/data/data-storage.html#pref)持久存储。它非常容易和快速地存储/检索少量信息。

查看代码以从 SharedPreference 中获取值

```
 // Restore preferences
   SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
   boolean silent = settings.getBoolean("silentMode", false);
   setSilent(silent); 
```

并将值存储在 SharedPreference 中

```
 // We need an Editor object to make preference changes.
  // All objects are from android.context.Context
  SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
  SharedPreferences.Editor editor = settings.edit();
  editor.putBoolean("silentMode", mSilentMode); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-11-20T16:36:06.913

例如，您可以做一个类：（例如对象）

```
import android.content.Context;
import android.content.SharedPreferences;

public class SettingsMain {

    Context context;
    SharedPreferences preferences;
    SharedPreferences.Editor editor;

    private static final String PREFER_NAME = "settingsMain";
    public static final String KEY_VIBRATE = "switchVibrate";

    public SettingsMain(Context context) {
        this.context = context;
        setPreferences();
    }

    private void setPreferences(){
        preferences = context.getSharedPreferences(PREFER_NAME, context.MODE_PRIVATE);
        editor = preferences.edit();
    }

    public void cleanPreferences(){
        editor.clear();
        editor.commit();
    }

    public void setStatusVibrate(Boolean status){
        editor.putBoolean(KEY_VIBRATE, status);
        editor.commit();
    }
    public Boolean getstatusVibrate(){
        return preferences.getBoolean(KEY_VIBRATE, true);
    }
} 
```

在您的活动电话中：

```
public class Home extends AppCompatActivity {

    private SettingsMain settings;
    private SwitchCompat switchVibrate;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.master);

        setResources();
        getSettings();

    }

    private void setResources(){

        switchVibrate = (SwitchCompat) findViewById(R.id.master_main_body_vibrate_switch);
        switchVibrate.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                settings.setStatusVibrate(isChecked);
            }
        });
    }

    private void getSettings(){
        settings = new SettingsMain(this);
        switchVibrate.setChecked(settings.getstatusVibrate());
    }

} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-13T12:20:32.570

全局使用`static`变量怎么样？

您可以[按照本教程中的说明进行](http://androidresearch.wordpress.com/2012/03/22/defining-global-variables-in-android/)操作。我知道处理内容提供​​者是不必要的，只是为了保留一些标志。

否则，您可以查看Android 提供的[共享首选项。](http://developer.android.com/reference/android/content/SharedPreferences.html)[这是一个很好的](http://mobile.tutsplus.com/tutorials/android/android-application-preferences/)入门示例。

这将是我的建议。

# html - HTML5 桌面通知

> ID：15385118
> 
> 赞同：0
> 
> 时间：2013-03-13T12:18:29.417
> 
> 标签：html, notifications, push-notification

我读过一些关于 HTML5 桌面通知的文章。如果在浏览器关闭时桌面通知有效但无法得到任何答案，我已经搜索了一段时间。

我的理解是，如果它是桌面通知，则不需要打开浏览器并且通知应该可以工作。

1）我的问题是如果浏览器关闭，会通知用户吗？

2）如果浏览器关闭，通知是否会打开浏览器？

我需要一些解释。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:29:02.360

仅当浏览器正在运行并且您的应用程序在选项卡或窗口之一中打开时才会显示通知。

# entity-framework - 存储过程获取列信息不返回什么？

> ID：15385119
> 
> 赞同：4
> 
> 时间：2013-03-13T12:18:32.410
> 
> 标签：entity-framework

我正在使用带有存储过程的实体框架，在其中我动态生成查询并执行该查询。存储的 proc 查询如下所示：

```
Begin
  DECLARE @Query nvarchar(MAX)
  SET @Query = 'SELECT e.id, e.name, e.add, e.phno from employee'
  EXEC sp_executesql @Query
End 
```

在上面的 sql 代码中，您可以看到我正在执行`'@Query'`变量，并且该变量值可以动态更改。

我可以在我的`edmx`文件中添加我的存储过程。然后我去模型浏览器说 `Add function import`并尝试`Get column information`它没有显示任何内容。但是当我在服务器上执行我的存储过程时，它会返回所有带有值的列。为什么我没有在模型浏览器中获取列信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:22:21.820

模型浏览器没有运行存储过程然后从其结果中收集列信息——它试图使用`sys`表从底层过程定义中获取列信息。

这个过程，因为它是动态的，没有基础定义，因此不能像这样导入到 EDMX 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T23:49:01.653

暂时将您的存储过程更改为

```
SELECT TOP 1 e.id, e.name, e.add, e.phno from employee /* ... rest of your proc commented out */ 
```

然后将其添加到 EF 并创建函数导入（它将看到列）。

然后将proc改回你上面的样子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:25:04.550

尝试`SET NOCOUNT ON`在`BEGIN`.... 之后添加，以抑制可能导致“混淆”的消息

# java - 如何在 unix 中使用 jfreechart

> ID：15385122
> 
> 赞同：-2
> 
> 时间：2013-03-13T12:18:38.467
> 
> 标签：java, jfreechart

我有一个使用 jfreechart API 创建直方图的 java 程序，它在 windows 系统中运行良好，但在 unix 系统中却没有运行。它说的是 NoClassDef 异常。我已将 jfreechart jar 添加到 Unix 的 lib 中...我需要做任何其他事情才能使其运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:34:44.103

确保`jfreechart`和`jcommon`JAR`classpath`以及您的类都在 上。

在此示例中，所需的库在`Class-Path`JAR 清单的属性中引用：

> $ java -cp jfreechart-1.0.14-demo.jar demo.BarChartDemo1

在此[示例](https://stackoverflow.com/a/5048863/230513)中，库`DTSCTest.class`位于：`build/classes``dist/lib`

> $ java -cp build/classes:dist/lib/* chart.DTSCTest

详情请参阅[`java`](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/java.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:25:20.533

NoClassDef 异常实际上只是因为该类根本不存在而引发。

您是否通过 IDE 运行应用程序？如果是这样，请确保 jar 在类路径中。如果没有，请确保将其包含在命令提示符中。

```
java -classpath thirdpartyjar.jar mainclass.java 
```

除了类不存在或库位于错误的位置之外，没有其他原因会导致此异常。

# apache - 带有静态内容：Apache 自定义 404 页面返回 404 错误

> ID：15385132
> 
> 赞同：0
> 
> 时间：2013-03-13T12:19:15.487
> 
> 标签：apache, http-status-code-404, static-html

[我有与返回 404 错误的 Apache 自定义 404 页面](https://stackoverflow.com/questions/14549731/apache-custom-404-page-that-returns-404-error)相同的问题，但另外我使用 html 文件并且没有脚本语言。

是否有可能配置 Apache，使其在浏览器请求时返回具有 404 状态的页面 www.example.com/404.html？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:56:31.070

我自己给出一个答案，我不确定它是否应该是评论。

我意识到我试图解决一个解决方法，而不是一个实际的问题。最初我想使用显示 404 页面

```
ErrorDocument 404 /subdirlevel1/404.html 
```

但是，错误文档本身使用了相对路径，因此它仅在请求文档的路径位于正确的子目录级别时才有效。我的意思是：

```
http://example.com/subdirlevel1/nonexisting.html 
```

将生成正确的 404 文档，因为 css 样式表的路径位于正确的相对路径中。然而

```
http://example.com/subdirlevel1/subdirlevel2/nonexisting.html 
```

行不通。我通过在 404.html 中使用绝对路径来解决这个问题

按照我在我的问题中尝试过的方式来做这件事会很糟糕，因为对现有文件的请求并正确交付了该文件不应该导致 404，而是 200。

# ios - ios点击按钮打开图片

> ID：15385138
> 
> 赞同：0
> 
> 时间：2013-03-13T12:19:21.587
> 
> 标签：ios, uiscrollview, uicollectionview

我正在创建一个程序，其中图像显示在集合视图网格中，当我点击/单击特定图像时，它应该在另一个滚动视图中打开。我正在动态地在集合视图中创建单元格。有人对此有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:24:58.513

使用点击手势

```
 UITapGestureRecognizer *PressRecognizer1 = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handlePress:)];
            [PressRecognizer1 setNumberOfTouchesRequired:1];
             [imageview addGestureRecognizer:PressRecognizer1]; 
```

用这个方法写你的代码

```
-(void)handlePress:(UITapGestureRecognizer*)PressRecognizer {

    NSLog(@"working");

   //Add your code here for click on particular image

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:27:19.370

您需要实现以下 UICollectionViewDelegate 方法

```
- (void)collectionView:(UICollectionView *)collectionView
didSelectItemAtIndexPath:(NSIndexPath *)indexPath 
```

当用户点击一个项目时，该方法将被调用。

不要忘记设置委托。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:29:10.047

为什么不简单地添加图像并使用`UIButton`？

```
[button setBackgroundImage:[UIImage imageNamed:@"img.png"] forState:UIControlStateNormal];
[button addTarget:self action:@selector(callNewController:) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:31:42.857

您需要使用`didSelectItemAtIndexPath`委托方法。

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath 
{
    // TODO: Here you need to allocate the next view and pass the image then show the view
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T12:47:07.830

男人只需下载此代码

[http://developer.apple.com/library/ios/#samplecode/CollectionView-Simple/Listings/CollectionView_Cell_h.html](http://developer.apple.com/library/ios/#samplecode/CollectionView-Simple/Listings/CollectionView_Cell_h.html)

启动它并在 DetailViewController.m 中 以编程方式`self.imageView.image = self.image;` 放置并添加`scrollView``imageView`

# prolog - 对查询和回溯感到困惑

> ID：15385150
> 
> 赞同：1
> 
> 时间：2013-03-13T12:19:53.100
> 
> 标签：prolog

我对使用某些规则的查询期间发生的事情感到有些困惑。这是我笔记中的示例代码。

```
link(fortran, algol60).
link(algol60,cpl).
link(cpl, bcpl).
link(bcpl, c).
link(c, cplusplus).
link(algol60, simula67).
link(simula67, cplusplus).
link(simula67, smalltalk80).

path(L,M) :-   %first path
    link(L,M). %first link

path(L,M) :-   %second path
    link(L,X), %second link
    path(X,M). %third path

 | ?- path(X,bcpl). 
```

当我们查询这个时，我们将调用第一个路径并且 X 将被启动到 cpl，因为 link(cpl,bcpl) 是我们数据库中第一个匹配的东西。所以现在 L = cpl 和 M = bcpl。X = cp？; 然后我们继续按；

接下来发生什么？我们称第一条路径还是第二条路径？如果我们失败了规则会发生什么，我们是否从第一条路径开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:15:52.943

迫切`;`需要下一个解决方案。如您所知，Prolog 中的替代项用多个子句表示。

确实，从上到下，从左到右的*抽象*解释不会尝试第一个或第二个路径/2，而是会先尝试看看是否有另一个`link(X,bcpl)`。

由于索引，SWI-Prolog 不会尝试调用其中任何一个（它知道没有另一个合适的链接/2），而是会回溯并尝试下一个路径/2（第二条规则）。

这是一个（部分）跟踪：当您看到 时`Redo`，这意味着它正在选择下一个可用的*替代方案*。括号之间的数字是*call level*，但是你可以看到，对于一些实现细节，证明不是从 1 开始的。

```
?- leash(-all), trace, path(X,bcpl).
   Call: (7) path(_G2093, bcpl)
   Call: (8) link(_G2093, bcpl)
   Exit: (8) link(cpl, bcpl)
   Exit: (7) path(cpl, bcpl)
X = cpl ;
   Redo: (7) path(_G2093, bcpl)
   Call: (8) link(_G2093, _G2262)
   Exit: (8) link(fortran, algol60)
   Call: (8) path(algol60, bcpl)
   Call: (9) link(algol60, bcpl)
   Fail: (9) link(algol60, bcpl)
   Redo: (8) path(algol60, bcpl)
   Call: (9) link(algol60, _G2262)
   Exit: (9) link(algol60, cpl)
   Call: (9) path(cpl, bcpl)
   Call: (10) link(cpl, bcpl)
   Exit: (10) link(cpl, bcpl)
   Exit: (9) path(cpl, bcpl)
   Exit: (8) path(algol60, bcpl)
   Exit: (7) path(fortran, bcpl)
X = fortran ;
   Redo: (9) path(cpl, bcpl)
...
   Fail: (8) path(cplusplus, bcpl)
   Redo: (8) link(_G2093, _G2262)
   Exit: (8) link(simula67, smalltalk80)
   Call: (8) path(smalltalk80, bcpl)
   Call: (9) link(smalltalk80, bcpl)
   Fail: (9) link(smalltalk80, bcpl)
   Redo: (8) path(smalltalk80, bcpl)
   Call: (9) link(smalltalk80, _G2262)
   Fail: (9) link(smalltalk80, _G2262)
   Fail: (8) path(smalltalk80, bcpl)
   Fail: (7) path(_G2093, bcpl)
false. 
```

# c - After I use malloc, program suddenly asks for input

> ID：15385153
> 
> 赞同：0
> 
> 时间：2013-03-13T12:19:58.603
> 
> 标签：c, malloc

I'm a newbie programmer

```
//allocating space for final output
//text_count is given by another function, let's just say i have a value for it
//out is my typedef struct

out *fin[text_count];

for(i=0; i<text_count; i++){
  fin[i] = malloc(sizeof(out));
}

//this is a test
fin[1]->appearances = 1;

printf("%d",fin[1]->appearances);

// ..other code 
```

I noticed that after this allocation, program suddenly outputs this:

```
1_ 
```

The underscore is blinking, indicating it needs an input.

What can be my problem here? Is it the allocation? Or the codes down below?

okay sorry, let me clarify this, im using codeblocks . so when i get a blinking cursor it means it needs an input. and after i got this output, an infinite loop of inputs seems to be happening.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:22:47.607

您只是看到文本终端的光标。它可能在闪烁，也可能不闪烁，这本身并不意味着什么。

您可能需要添加换行符：

```
printf("%d\n", fi[1]->appearances); 
```

在自己的一行上获得输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:32:43.670

printf 后面的光标并不意味着它正在等待输入。

`strace`如果它正在等待`read`系统调用，您可以使用 来确认这一点。

用法： `strace ./myApplication arg1 arg2...`

# android - CookieManager.getCookie() returns null

> ID：15385158
> 
> 赞同：1
> 
> 时间：2013-03-13T12:20:11.870
> 
> 标签：android, post, cookies, webview, android-webview

I have some http requests. One of them retrieves and parse cookie from it's response. I save this cookie via CookieSyncManager and CookieManager with following code:

```
CookieSyncManager.createInstance(context);
            CookieManager cookieManager = CookieManager.getInstance();
            cookieManager.removeSessionCookie();
            cookieManager.removeAllCookie();
            String cookieString = cookie.getName() + "=" + cookie.getValue();
            Log.e(getClass().toString(), cookieString);
            cookieManager.setCookie(START_PAYMENT_URL, cookieString);
            CookieSyncManager.getInstance().sync();
            Log.e(getClass().toString(), "Get cookie: " + cookieManager.getCookie(START_PAYMENT_URL)); 
```

Both Log.e calls write same cookie. So everything looks ok.

I have different activity which contains WebView. I need to call `postUrl(String url)` method with some POST params and with authorization cookie. I thought that cookie is in CookieManager and everything should work great. Well. It is. But on 4.x devices only.

On 2.x devices WebView makes postUrl without cookie.

Here is activity code which contains WebView:

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.payment_webview);

        final String billId = getIntent().getStringExtra(INTENT_BILL_ID);

        final WebView webView = (WebView) findViewById(R.id.payment_webview);

        webView.getSettings().setJavaScriptEnabled(true);

        webView.setWebViewClient(new WebViewClient() {
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                Log.e(getClass().toString(), url);
                view.loadUrl(url);
                return false;
            }
        });

        String postData = "id_bill=" + billId;
        Log.d(TAG, "Requesting payment URL " + START_PAYMENT_URL + " with post data: " + postData);
        Log.d(TAG, CookieManager.getInstance().getCookie(START_PAYMENT_URL));
        webView.postUrl(START_PAYMENT_URL, EncodingUtils.getBytes(postData, "BASE64"));
    } 
```

CookieManager.getInstance().getCookie(START_PAYMENT_URL) returns `null` on 2.x devices and cookie value on 4.x devices.

How to fix this problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:06:34.683

似乎我弄清楚了问题所在。

我刚刚删除

```
cookieManager.removeSessionCookie();
cookieManager.removeAllCookie(); 
```

当我保存饼干时。

我想这个问题是所有的`CookieManager`工作方法都是异步的。可能会删除之后调用的 cookie 方法，`cookieManager.setCookie(START_PAYMENT_URL, cookieString);`即使它们在它之前调用也是如此。因此`CookieManager`保存 cookie，然后删除调用的 cookie 方法。

# jquery - Unable to load google charts via web service

> ID：15385162
> 
> 赞同：2
> 
> 时间：2013-03-13T12:20:18.090
> 
> 标签：jquery, web-services, google-visualization

I'm having problems loading a simple chart via web services...

I load user controls as html and send them back to the page via a web service to display the charts in a jquery ui popup dialog:

```
[WebMethod]
        public string GetProfileForm(string formType)
        {
            Page page = new FormlessPage();
            PersonalDetails ctl = (PersonalDetails)page.LoadControl("/Toolbox/Controls/PersonalDetails.ascx");
            page.Controls.Add(ctl);
            using (StringWriter writer = new StringWriter())
            {
                HttpContext.Current.Server.Execute(page, writer, false);
                return writer.ToString();
            }
        } 
```

Whether the javascript is in the user control or created after the user control has loaded, not only does the chart not load, but the whole page just hangs:

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="PersonalDetails.ascx.cs" Inherits="ToolBox.Controls.PersonalDetails" %>

<div id="gchart_div"></div>

<script type="text/javascript">
    google.load('visualization', '1.0', { 'packages': ['corechart'] });
    google.setOnLoadCallback(drawChart);
    function drawChart() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Topping');
        data.addColumn('number', 'Slices');
        data.addRows([
          ['Mushrooms', 3],
          ['Onions', 1],
          ['Olives', 1],
          ['Zucchini', 1],
          ['Pepperoni', 2]
        ]);

        // Set chart options
        var options = { 'title': 'How Much Pizza I Ate Last Night',
            'width': 400,
            'height': 300
        };

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.PieChart(document.getElementById('gchart_div'));
        chart.draw(data, options);
    }
</script> 
```

my Site.Master page has the API call:

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script> 
```

If I run the javascript on any other page ( ie one not loaded as a control through web services), it works fine.

Is this a limitation of google charts? or am I doing something wrong?

I have tried moving the javascript out into the page housing the popup, but this has the same effect.

Thanks in advance... Dan

# android - How to send a push notification

> ID：15385168
> 
> 赞同：4
> 
> 时间：2013-03-13T12:20:29.013
> 
> 标签：android, push-notification

What is a service that i can use to send a notification to an Android device? I want it so i can send it in real time!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-04-23T04:27:05.927

我认为在 Android 中发送通知的最佳方式是 FCM（Firebase 云消息），该服务也来自 google，它是 GCM 的替代品。有关更多信息，请使用以下链接。

[https://firebase.google.com](https://firebase.google.com)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-04-23T05:01:44.740

在我看来， [Firebase 云消息传递](https://firebase.google.com/docs/cloud-messaging/)是最好的选择。因为[FCM](https://firebase.google.com/docs/cloud-messaging/)比 GCM 有几个优点。

Firebase Cloud Platform 继承了 GCM 的核心基础架构，但简化了客户端开发。

**在 FCM 中，您不需要编写自己的注册或订阅重试逻辑**。现在，您只需几行代码即可将 FCM 集成到您的应用程序中。

~~但是，GCM 并未被弃用：Google 将继续支持它，但**所有新的客户端功能将仅在 FCM SDK 上可用**。不过，该协议在服务器端保持不变。~~

**更新（2018 年 7 月 30 日）：**自 2018 年 4 月 10 日起，[Google 已弃用 GCM](https://developers.google.com/cloud-messaging/gcm)。GCM 服务器和客户端 API 已弃用，最快将于 2019 年 4 月 11 日删除。请参阅此[迁移指南](https://developers.google.com/cloud-messaging/android/android-migrate-fcm)了解更多信息。

感谢@eis 为更新这篇文章发表评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:23:43.150

我认为[适用于 Android 的 Google Cloud Messaging 是可行](http://developer.android.com/google/gcm/index.html)的方法。

# xml - transform XML object with XSLT to already existing XML object with C#

> ID：15385174
> 
> 赞同：1
> 
> 时间：2013-03-13T12:20:40.667
> 
> 标签：xml, xslt, xsd, xml-serialization

I have an XML document deserialized (an object contains the data). Now I am using an XSLT transformation file to create a new XML document.

```
transform(myXmlSourceObject, XSLT, output); 
```

The variable `output` is now a Stream, XmlWriter or a String. It contains the new xml structure defined by the XSLT.

But I want to replace `output` with my desired target xml object, which i have already created/deserialized from the schema of the target xml. That means that I already have an objects that will be the target of the transformation. No new Stream, XmlWriter or String.

```
TargetXml alreadyCreatedTargetXmlObject = new TargetXml();
transform(myXmlSourceObject, XSLT, alreadyCreatedTargetXmlObject); 
```

The point is that I want to fill the `alreadyCreatedTargetXmlObject` with values from `myXmlSourceObject` but also be able to do edit fields like the following

```
alreadyCreatedTargetXmlObject.name ="SomeNewName";
alreadyCreatedTargetXmlObject.location.x="50.78"; 
```

The new xml would be filled with data, and I want to edit values if I need to.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:36:23.157

您必须自己实现此功能 - 至少在使用标准的内置 .NET XSLT API 时是这样。

由于您想要实现的不是复杂的练习（假设转换始终为您提供相同的根元素，并且您使用的[是支持合并的反序列](https://stackoverflow.com/questions/8467040/how-do-i-deserialize-into-an-existing-object-c-sharp)化器， 那么它更多的是错误处理而不是实际代码），我不得不假设这里的一个问题是性能。直观地说，如果您希望将 XSLT 作为您的语言进行转换，那么解决性能问题的唯一方法就是构建扩展——这在 .NET 上也是一项简单的任务——但这会降低 XSLT 的可移植性。

**更新**（以解决您的评论）：

（我不确定我理解为什么要在转换之前创建目标对象。）

您可以尝试这样做：设置对[XslTransform.Transform](http://msdn.microsoft.com/en-us/library/ms163483%28v=vs.90%29.aspx)的调用以将您的转换为 Stream（正如我所说，您实现了自己的“幻觉” - 您希望 API 看起来的方式）。使用 protobuf 的 Serializer.Merge 从上面的流中传入一个 XmlReader，以及您预先存在的对象来合并两者（出于什么原因，不清楚）。预先存在的对象的类型应该是使用 xsd.exe 生成的——我想。

根据您提供的伪代码，您可以在没有合并步骤的情况下逃脱。只需从传递给 Transform 的流中返回您反序列化的对象（使用 xsd.exe 基于目标 XML XSD 生成），然后设置您想要的任何属性 - 同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:33:34.267

我可能错了，但我不确定您是否可以使用 XSLT 做到这一点。最简单的方法可能是在转换后反序列化 xslt 的输出，或者直接在 Java 中编写转换以便能够访问您的对象。

# function - Create alias in powershell to measure the time of a function

> ID：15385176
> 
> 赞同：-1
> 
> 时间：2013-03-13T12:20:42.553
> 
> 标签：function, powershell, function-pointers, alias, stopwatch

I have a bunch os functions in a PowerShell script binded to an alias, as:

```
function Run
{
    # somethin that takes a while
}

set-alias r Run 
```

I would like to measure the time of each call. To do that, I would like to use another function that creates a .NET `Stopwatch`, starts it, runs the specified action, stops the `Stopwatch` and prints out the time, as:

```
function Crono($action)
{
$sw = [Diagnostics.Stopwatch]::StartNew()

    & $action

$sw.Stop()
Write-Host "> Operation done in: " + $sw.Elapsed;
}

set-alias r Crono(Run) 
```

But this alias throws the following error:

> Set-Alias : A positional parameter cannot be found that accepts argument 'System.Object[]'. At ...\script.ps1:85 char:10 + set-alias <<<< r Crono(Run) + CategoryInfo : InvalidArgument: (:) [Set-Alias], ParameterBindingException + FullyQualifiedErrorId : PositionalParameterNotFound,Microsoft.PowerShell.Commands.SetAliasCommand

Is it possible to do that? Is there any other way?

Thanks.

Edit:

Thank you all for the replies, with the feedback received I created the following:

```
function CronoRun()
{
    Crono(Run);
}
set-alias r **CronoRun** 
```

But now, if the `Run` function is calling a `.bat` file it throws some exceptions because is trying to "interpreet" whats going on in the script, probably related to how the `Run` method is exeuted inside the `Crono` one. Any idea?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:51:20.660

您可以使用“Measure-Command”cmdlet 测量表达式、脚本块和 cmdlet 所花费的时间。

您还可以检查历史项目的 *ExecutionTime 属性：

```
PS> Get-History -Count 1 | fl *

Id                 : 31
CommandLine        : Get-History -Count 1
ExecutionStatus    : Completed
StartExecutionTime : 3/13/2013 2:50:11 PM
EndExecutionTime   : 3/13/2013 2:50:11 PM 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T12:31:41.767

从`get-help set-alias`

*这些命令展示了如何将别名分配给带有参数的命令，甚至是许多命令的管道。您可以为 cmdlet 创建别名，但不能为包含 cmdlet 及其参数的命令创建别名。但是，如果将命令放在函数或脚本中，则可以创建有用的函数或脚本名称，并且可以为函数或脚本创建一个或多个别名。在此示例中，用户想要为命令“set-location c:\windows\system32”创建别名，其中“set-location”是一个 cmdlet，“C:\Windows\System32”是 Path 的值范围。为此，第一个命令创建一个名为“CD32”的函数，其中包含 Set-Location 命令。第二个命令为 CD32 函数创建别名“go”。然后，

```
 PS C:\> function CD32 {set-location c:\windows\system32}
 PS C:\>set-alias go cd32* 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T12:35:15.133

您只能对不带参数的命令进行别名。因此，您必须创建一个虚拟函数来调用该函数并为其命名`Chrono(Run)`。

# security - 就安全性而言，哈希和加密的顺序有什么不同吗？

> ID：15385178
> 
> 赞同：4
> 
> 时间：2013-03-13T12:21:00.917
> 
> 标签：security, encryption, hash, cryptography

我正在用 java 实现一个密码库程序。我已经编写了一个用于加密的三重 DES 和一个用于散列的 SHA256。

我的问题是，如果我首先对原始数据（密码）进行哈希处理，然后对其进行加密，或者首先对数据（密码）进行加密，然后对加密数据进行哈希处理，会有什么不同。我最担心的是，它是否会在安全性方面做出任何重大改变。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:45:54.810

根据您的评论，您不想仅使用哈希作为消息身份验证代码。有适合此应用程序的基于散列的 MAC（适当地称为[HMAC ）。](http://en.wikipedia.org/wiki/Hash-based_message_authentication_code)在这种情况下，您可能想要使用 HMAC-SHA256。另外请记住，您的 MAC 需要一个单独的密钥（使用相同的密钥进行加密，MAC 是一个很大的禁忌）。

但是就您的问题本身而言，您的问题归结为 Encrypt-then-MAC vs MAC-then-Encrypt。根据这个[Crypto.SE 答案](https://crypto.stackexchange.com/a/205)，最好的做法是先加密然后 MAC，只要您确保对密文的所有内容进行 MAC 处理，包括 IV 和算法标识符（如果您允许使用 3DES 以外的加密算法）。您可以获得密文和明文的完整性，并且不必经过解密过程来验证明文。

# ffmpeg - ffmpeg transcoding one input video stream and multiple output video streams in the same file

> ID：15385185
> 
> 赞同：1
> 
> 时间：2013-03-13T12:21:13.687
> 
> 标签：ffmpeg

I am trying to transcode a single video file with 1 video stream and several audio streams to the file having same video stream in different bitrates/sizes with correct padding at the same time.

the command I use is:

```
    ffmpeg -y -ss 600 -t 600 -i "INPUT.mkv" -map_chapters -1 -map 0:0 -c:v libx264 -keyint_min 48 -g 96 -bufsize 350k -b:v 350k -minrate 300k -maxrate 400k -profile:v baseline -level 3.0 -preset slow -vf "scale=iw*min(480/iw\,272/ih):ih*min(480/iw\,272/ih),pad=480:272:(480-iw)/2:(272-ih)/2" -map 0:0 -c:v libx264 -keyint_min 48 -g 96 -bufsize 650k -b:v 650k -minrate 500k -maxrate 800k -profile:v baseline -level 3.1 -preset slow -vf "scale=iw*min(640/iw\,360/ih):ih*min(640/iw\,360/ih),pad=640:360:(640-iw)/2:(360-ih)/2" -map 0:1 -c:a libfaac -b:a 32k -ar 44100 -f mpegts OUTPUT.m2ts

```

ffmpeg creates two video streams, however the bitrate and resolution for all of them are taken from the last video arguments - i.e. both streams are 640x360:

```
    Output #0, mpegts, to 'OUTPUT.m2ts':
    Stream #0:0(eng): Video: h264, yuv420p, 640x360 [SAR 559:560 DAR 559:315], q=-1--1, 650 kb/s,     Stream #0:1(eng): Video: h264, yuv420p, 640x360 [SAR 559:560 DAR 559:315], q=-1--1, 650 kb/s, 90k tbn, 23.98 tbc (default)
    Stream #0:2(rus): Audio: aac, 44100 Hz, 5.1, s16, 32 kb/s (default)
    Stream mapping:
    Stream #0:0 -> #0:0 (h264 -> libx264)
    Stream #0:0 -> #0:1 (h264 -> libx264)
    Stream #0:1 -> #0:2 (aac -> libfaac)
    Press [q] to stop, [?] for help

```

Is it practically possible to make transcoding to several bitrates to the same file?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:54:31.287

您正在映射您的输入，但不是您的输出。尝试像这样指定您的输出比特率：`-b:v:0 350k`和`-b:v:1 650k`. 其他流和变量（如编解码器）也可以通过这种方式定义。有关更多信息和示例，请参阅[FFmpeg 地图 wiki](http://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20use%20-map%20option)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-28T15:50:35.370

试试这个命令：

```
ffmpeg -y -ss 600 -t 600 -i "INPUT.mkv" -map_chapters -1 -map 0:0 -map 0:0  -map 0:1 -c:v:0 libx264 -keyint_min 48 -g 96 -bufsize 350k -b:v0 350k -minrate 300k -maxrate 400k -profile:v:0 baseline -level 3.0 -preset slow -vf "scale=iw*min(480/iw\,272/ih):ih*min(480/iw\,272/ih),pad=480:272:(480-iw)/2:(272-ih)/2" -c:v:1 libx264 -keyint_min 48 -g 96 -bufsize 650k -b:v1 650k -minrate 500k -maxrate 800k -profile:v:1 baseline -level 3.1 -preset slow -vf "scale=iw*min(640/iw\,360/ih):ih*min(640/iw\,360/ih),pad=640:360:(640-iw)/2:(360-ih)/2" -c:a libfaac -b:a 32k -ar 44100 -f mpegts OUTPUT.m2ts 
```

# javascript - jQuery跨域xmlrpc库

> ID：15385187
> 
> 赞同：4
> 
> 时间：2013-03-13T12:21:15.420
> 
> 标签：javascript, jquery

是否有任何其他 jquery 或 javascript 插件支持跨域 xmlrpc 请求。

我已经尝试过使用“jquery.xmlrpc”插件。 [https://github.com/maelstrom/jquery-xmlrpc](https://github.com/maelstrom/jquery-xmlrpc)

但它似乎不适用于跨域支持。

请给我建议..提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T18:20:14.783

试试easyXDM：[http](http://easyxdm.net/) ://easyxdm.net/ 过去曾为我工作过。

# automation - 查找对话框上的 web 按钮的 objectspy 问题

> ID：15385190
> 
> 赞同：0
> 
> 时间：2013-03-13T12:21:20.960
> 
> 标签：automation, qtp

*   当我试图对特定的查找窗口进行对象监视时，我的系统完全挂断了
*   例如：-Set strSubWindow = Browser("title:="&strBrowserName).Window("text:=Lookup - BIC - - Web Fx -- Webpage Dialog").Page("title:=Lookup - BIC - Web Fx" )
*   假设上面提到的窗口上有一个搜索按钮
*   当我尝试对象间谍搜索按钮时，系统挂起并需要重新启动
*   任何人都可以帮我吗？

*   提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:41:32.633

你知道这个应用程序是用什么技术开发的吗？例如：Java/.NET 等。您可以使用适当的插件进行标识，而不是使用 Web 插件。我在安装 Oracle 插件后解决了 Oracle Apps 应用程序的类似问题。

# mysql - 需要从三个表中获取数据的优化查询

> ID：15385191
> 
> 赞同：-3
> 
> 时间：2013-03-13T12:21:22.473
> 
> 标签：mysql, query-optimization

三张桌子

```
accounts, products, users 
```

1.  从帐户中存在 ID 的用户表中选择用户 ID 和电子邮件
2.  然后从用户购买超过 3 个产品的产品表中过滤掉它们（需要计算产品表中的用户，如果他的计数超过 3 个则排除用户）。

    ```
     SELECT id, email
    FROM  users 
    WHERE id
    IN (
    SELECT user_id
    FROM accounts
    WHERE users.id = user_id
    ) 
    ```

我得到了所有用户 ID 和电子邮件，但现在我需要从产品表中过滤掉它们。在产品表中，我有“product_id”和“leader_id”，这是用户 ID。

我需要优化查询，因为表很大

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:48:48.433

我有点理解......这样的事情应该有效：

```
 select u.id,u.mail,
 (select count(1) 
   from products
  where products.leader_id = u.id)
 as conteo
 from user u
  left join account ac
 on(u.id = ac.user_id)
 having (conteo>3) 
```

我希望它有帮助；）

萨卢多斯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:59:45.107

如果您需要优化查询，请提供您的架构的适当详细信息 - 表、数据类型和索引。

```
 SELECT id, email
   FROM  users 
   WHERE id
   IN (
      SELECT user_id
      FROM accounts
      WHERE users.id = user_id
   ) 
```

除非绝对必要，否则永远不要使用子查询。由于您不想要帐户表中的任何数据，因此在大多数 DBMS 中，“EXISTS (SELECT 1 FROM accounts WHERE users.id=user_id)”会更有效 - 但在未优化的 MySQL 中则不会很好地推动谓词。

查询应该是：

```
SELECT DISTINCT u.id, u.email
FROM users u INNER JOIN accounts a 
ON u.id=a.user_id; 
```

> 从用户购买超过 3 个产品的产品表中取出

虽然我可以猜到足以重写您之前的查询的架构，但我不知道产品表的结构，实际上，“产品”意味着项目目录，并且与帐户的关系似乎是 n:m暗示必须有一个丢失的表来分解关系。此外，根据您的描述，帐户数据独立于“产品”表数据（这看起来很奇怪）。是否要包括用户在“产品”中没有相关记录的情况？

假设情况并非如此，并猜测结构可能是什么......

```
SELECT u.id, u.email, SUM(IF(leader_id IS NULL, 0, amount))
FROM users u INNER JOIN accounts a 
ON u.id=a.user_id
LEFT JOIN product p
ON u.id=p.leader_id
GROUP BY u.id, u.email; 
```

> 我需要优化查询，因为表很大

为什么需要在一个查询中查看所有数据？

# c++ - async_read_some 返回

> ID：15385200
> 
> 赞同：2
> 
> 时间：2013-03-13T12:21:45.110
> 
> 标签：c++, boost-asio

Boost::ASIO 中有没有办法知道是否`async_read_some`不会在特定时间段内返回调用函数而不关闭套接字？`async_read_some()`如果没有更多数据要传输到缓冲区，通常不会返回。

```
 _socket->async_read_some(
     boost::asio::buffer(this->reply, sizeof(this>reply)),
     boost::bind(
         &TCP_IP_Connection::dataProcess,
         this,
         boost::asio::placeholders::error,
         boost::asio::placeholders::bytes_transferred
     )
 ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-06T06:41:33.513

`async_read_some`总是立即返回。

如果您正在谈论处理程序（回调），如果您在套接字返回之前关闭它，那么我*认为*处理程序会被调用`asio::error::operation_aborted`。如果您处理这种情况，那么也许您不必担心您是否已连接。

# php - PHP 导出的 csv 文件下载不开始？

> ID：15385206
> 
> 赞同：-2
> 
> 时间：2013-03-13T12:21:55.313
> 
> 标签：php, csv, export

所以我在这里有这段代码从数据库中读取数据，然后它应该提示我“打开/另存为”窗口，但它没有。知道问题可能出在哪里吗？它会回显结果，但不会出现下载窗口。

```
 <?php/*
mb_http_output('UTF-8');
mb_http_input('UTF-8');
mb_language('uni');
mb_regex_encoding('UTF-8');
ob_start('mb_output_handler');
header('Content-type: text/html; charset=utf-8');*/
?>
<?php

$conn = mysql_connect('localhost', 'xxxx', 'xxxx') or die(mysql_error());
mysql_select_db('nooruse', $conn) or die(mysql_error($conn));

$query = sprintf('SELECT osakond as Osakond, soetusaasta, it_number, tooteruhm, mudeli_nimetus, sn, riigivara_nr, inventaari_nr, maja, ruum, vastutaja, markus FROM norse5_proov');
$result = mysql_query($query, $conn) or die(mysql_error($conn));

header('Content-Type: text/csv');
header('Content-Disposition: attachment;filename=export.csv');

$row = mysql_fetch_assoc($result);
if ($row) {
    echocsv(array_keys($row));
}

while ($row) {
    echocsv($row);
    $row = mysql_fetch_assoc($result);
}

function echocsv($fields)
{   
    echo $query ,"<br>";
    $separator = '';
    foreach ($fields as $field) {
        if (preg_match('/\\r|\\n|,|"/', $field)) {
            $field = '"' . str_replace('"', '""', $field) . '"';
        }
        echo $separator . $field;
        $separator = ',';
    }
    echo "\r\n";
}
?> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:27:12.810

我正在使用下面的标题。试试看

```
header("Content-type: application/vnd.ms-excel");
header("Content-disposition: csv" . date("Y-m-d") . ".csv");
header('Content-disposition: filename='.$filename.'.csv');
print $csv_output; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:24:45.480

在通过`header()`. 这包括第一个之前的空格和 and 之间的`<?php`换行符。`?>``<?php`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:25:07.900

使用此标头，

```
header('Content-type: application/force-download'); 
```

它会起作用的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:32:00.790

尝试使用这些标题：

```
header("Content-Description: Download File");
header("Content-Disposition: attachment; filename=whatever.csv");
header("Content-Type: text/plain");
header("Content-Length: ".strlen($output)); 
```

$输出在哪里

是回显输出的捕获变量。

# javascript - 在新窗口中打开链接后如何使用 JavaScript 更改 href 属性？

> ID：15385207
> 
> 赞同：22
> 
> 时间：2013-03-13T12:21:56.563
> 
> 标签：javascript, html

我的页面上有一个链接

```
<a href="http://google.com" id="mylink" onclick="changeLink();" target="_blank">google</a> 
```

目标是遵循此链接（在新选项卡中打开）并更改其属性（在上一个选项卡上）。我的意思是我们在新标签页中打开 google.com，如果我们回顾链接，它就会刷新。

我试过这个js代码

```
function changeLink(){
    document.getElementById("mylink").href = "http://facebook.com";
    document.getElementById("mylink").innerHTML = "facebook";
    } 
```

但它也改变了新打开标签的目标。在我的示例中，它没有打开 google，而是打开了 facebook。

有可能修复它吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-13T12:27:29.010

您`onclick`在 href 之前触发，因此它会在页面打开之前更改，您需要使函数处理窗口打开，如下所示：

```
function changeLink() {
    var link = document.getElementById("mylink");

    window.open(
      link.href,
      '_blank'
    );

    link.innerHTML = "facebook";
    link.setAttribute('href', "http://facebook.com");

    return false;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T12:24:57.933

您可以在单击后使用来延迟您的代码`setTimeout`执行

```
function changeLink(){
    setTimeout(function() {
        var link = document.getElementById("mylink");
        link.setAttribute('href', "http://facebook.com");
        document.getElementById("mylink").innerHTML = "facebook";
    }, 100);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T12:26:14.883

代替

```
onclick="changeLink();" 
```

经过

```
onclick="changeLink(); return false;" 
```

取消其默认操作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:30:09.573

您可以在页面中更改它`load`。

我的意图是当页面来到`load`功能时，切换链接（当前链接在需要的那个）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-05T15:37:59.023

例如试试这个：

```
<a href="http://www.google.com" id="myLink1">open link 1</a><br/> <a href="http://www.youtube.com" id="myLink2">open link 2</a> 
```

```

    document.getElementById("myLink1").onclick = function() {
    窗口.打开（
    “http://www.facebook.com”
        );
        返回假；
      };

      document.getElementById("myLink2").onclick = function() {
    窗口.打开（
    “http://www.yahoo.com”
        );
        返回假；
      };

```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-12-19T05:03:10.177

利用`mousedown`侦听器使用新的 URL 位置修改`href`属性然后让浏览器确定它应该重定向到的位置有什么缺点吗？

到目前为止对我来说工作正常。想知道这种方法的局限性是什么？

```
// Simple code snippet to demonstrate the said approach
const a = document.createElement('a');
a.textContent = 'test link';
a.href = '/haha';
a.target = '_blank';
a.rel = 'noopener';

a.onmousedown = () => {
  a.href = '/lol';
};

document.body.appendChild(a);
} 
```

# ios - 如何将日历事件描述转换为 iPhone 中的字典对象？

> ID：15385210
> 
> 赞同：0
> 
> 时间：2013-03-13T12:22:04.610
> 
> 标签：ios, ios6, ekevent, ekeventkit

我正在从日历中获取事件，并且对于每个事件我想获取所有数据。但我将其中一些作为对象，如 EKRecurrenceRule、EkCalendar、EKAlarm。现在我想从对象中获取特定字段。我尝试将对象转换为 Dictionary 对象，但它作为单个对象进行，当我访问它时，它返回整个对象的单个值。任何人都可以帮我将它们直接转换成字典。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:58:58.713

为此使用**KVC** ...`valueForKey`并`valueForKeyPath`允许您将对象视为“有点像字典”

# gcc - 有什么办法可以强制 g++ 编译这个程序吗？

> ID：15385211
> 
> 赞同：0
> 
> 时间：2013-03-13T12:22:06.090
> 
> 标签：gcc, compiler-errors, g++

让 g++ 编译它不应该的东西通常不是一个好主意（我怀疑一般来说不可能），但在这种情况下，我正在尝试编写静态分析检查以发现违反特定 MISRA 规则的情况，不幸的是 g++ 是太好了:) 我正在尝试检查一条规则，上面写着“指向虚拟基类的指针只能通过 dynamic_cast 强制转换为指向派生类的指针。” 这是一个非常明智的规则，以至于 g++ 会自行检查并无法编译以下代码：

```
class B
{
public:
        virtual ~B() {}
};

class D : public B {};
class VD : virtual public B {};

int main()
{
        D d;
        VD vd;
        B *pd = &d;
        B *pvd = &vd;
        D *d1 = (D*)(pd); // Fine
        D *d2 = static_cast<D*>(pd); // Fine
        D *d3 = dynamic_cast<D*>(pd); // Fine
        D& d4 = static_cast<D&>(*pd); // Fine
        D& d5 = dynamic_cast<D&>(*pd); // Fine
        VD *vd1 = (VD*)(pvd); // Bad
        VD *vd2 = static_cast<VD*>(pvd); // Bad
        VD *vd3 = dynamic_cast<VD*>(pvd); // Fine
        VD& vd4 = static_cast<VD&>(*pvd); // Bad
        VD& vd5 = dynamic_cast<VD&>(*pvd); // Fine
        return 0;
} 
```

这让我对使用 g++ 作为编译器感到非常积极，但在这种情况下有点问题，因为 (a) 我们必须能够构建代码才能使用我们的工具对其进行分析，并且 (b) 很可能是其他编译器将无助地编译此代码，在这种情况下，我们通常不能将其标记为“编译器检查”。

没有尝试找到另一个编译器来编译它（这是一个选项），有没有办法让 g++ 编译它？我试过`-fpermissive`没有成功。

# sql - SQL Server 2005 更新查询基于同一张表

> ID：15385214
> 
> 赞同：2
> 
> 时间：2013-03-13T12:22:11.257
> 
> 标签：sql, sql-server-2005

我有一个包含以下字段的表：`ID_Observation`(PK), `ID_Grading`, `ID_ObKind`, `Data`.

我在编写查询以根据表中的其他行更新某些行时遇到困难。

如果`ID_ObKind`= 9 AND `Data`= 'No' 那么任何具有相同 ID_Grading 且`ID_ObKind`= 10 和`Data`= NULL 的行都需要更新为 Data = 0。

我有大约十几种不同的情况，其中需要根据特定数据的值更改数据，`ID_ObKind`因此需要确定这一点。每`ID_Grading`行最多可以有 120 行，每行都有不同的`ID_ObKind`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:30:18.460

我认为这对你有用。[http://sqlfiddle.com/#!3/2eeaf/14](http://sqlfiddle.com/#!3/2eeaf/14)

```
Update TheTable
   set data=0
 where id_grading = (select id_grading
                       from TheTable
                      where id_obkind=9
                        and data='No')
   and id_obkind=10
   and data is null 
```

# python - 如果条件在 Tornado (Python) 中不起作用

> ID：15385223
> 
> 赞同：0
> 
> 时间：2013-03-13T12:22:27.160
> 
> 标签：python, if-statement, tornado

我有个问题。在 Tornado 处理程序中，我将一些参数传递给我的 html 页面。

这个页面的代码是这样的：

```
 {% if not writeable %}
    {% if not usrpermdev %}
    $("#chart_div").html("<div class='alert'><strong>Warning!</strong> You don't have the permission to view this page.</div>")
    {% elif usrpermdev==0 %}
    $("#chart_div").html("<div class='alert'><strong>Warning!</strong> You don't have the permission to view this page.</div>")
    {% end %}
  ...... 
```

结束它是这样的，因为我想`<div>`在某些权限的情况下显示一个元素。

现在，如果我在我的 Tornado 处理程序中放置一些打印件，我会看到例如：

```
usrpermdev = [{'perm': 4L}]
writeable = False 
```

那么为什么我的代码在控制之后没有显示任何内容呢？

如果代码在 if 中输入（不可写），请检查 usrpermdev 是否​​存在。在这种情况下，程序不应该同时进入下一个 if 并继续.... 为什么这不会发生？

PS。我什么都没看到……甚至连警告都没有！所以程序不进入 if(s) 但甚至不继续......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-13T01:54:56.610

我和你有同样的问题。但是如果我设置

```
{% if writeable=="False" %} 
```

它仍然不起作用。看起来 tornado 并不关心 if 子句中的布尔值。如果您将可写值更改为 True 或 False，则将其输出到您的模板中

```
{{ writeable }} 
```

你会看到像这样的文字

> 真的

或者

> 错误的

但它仍然不去*if 子句*。PS这是Linux上的龙卷风4.2.1。太奇怪了！

* * *

### 更新

解决了

我刚刚通过使用这个子句解决了这个问题`{% if writeable is False %}`并且记住，你应该在你的模板块下使用它，而不是使用 if upper 一个模板块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:29:35.193

`usrpermdev`不符合`if`或的条件`elif`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-13T12:48:09.260

我更正代码：

```
{% if writeable=="False" %}
{% if not usrpermdev %}
$("#chart_div").html("<div class='alert'><strong>Warning!</strong> You don't have the permission to view this page.</div>")
{% elif usrpermdev==0 %}
$("#chart_div").html("<div class='alert'><strong>Warning!</strong> You don't have the permission to view this page.</div>")
{% end %} 
```

以这种方式似乎工作......还是谢谢你。

# c++ - 如何使用 Qt 的 QHelpSearchEngine 搜索非 html 文件

> ID：15385226
> 
> 赞同：0
> 
> 时间：2013-03-13T12:22:31.830
> 
> 标签：c++, qt, qt4

`qch`我的应用程序正在使用由不同团队制作的多个 Qt 帮助文件 ( )。假设 there's`good.qch`由扩展名为 的 HTML 文件构建，并由扩展名为`.html`的`bad.qch`HTML 文件构建`.xml`。

该应用程序使用`QHelpEngine`,`QHelpSearchEngine`和相关的类来显示和搜索帮助。问题是搜索从未在`bad.qch`;中找到任何匹配项。似乎只有`good.qch`被搜索。

我尝试将`.xml`文件重命名为`.html`，而不以任何方式修改其内容。在这个修改后`bad.qch`，搜索工作完美。

有没有办法让 Qt 帮助框架搜索文件以外的文件`*.html`，或者我必须说服“团队坏”在创建文件时重命名文件`qch`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:50:17.770

我已经阅读了`QHelpSearchEngine`相关类（Qt 4.8.4）的源代码，结果发现有一个硬编码的扩展列表可以搜索`.html`：`.htm`和`.txt`. 因此，至少在 Qt 4.8.4 中没有搜索其他文件的机制。

# jquery - 包含 jQuery 时，ng-repeat 不起作用

> ID：15385234
> 
> 赞同：0
> 
> 时间：2013-03-13T12:22:48.977
> 
> 标签：jquery, angularjs, zurb-foundation, ng-repeat

我将 zurb-foundation 与 AngularJS 一起使用。

我有以下代码：

```
<div class="row full" ng-controller="Movies">
    <div class="large-3 columns">    
        <form class="custom">
            <select id="customDropdown" class="small button dropdown secondary radius">
                <option DISABLED SELECTED>Movie selection</option>
                <option ng-repeat="movie in movie_list.movies">{{movie.name}}</option>
            </select>
        </form>
    </div>
</div> 
```

```
function Movies($scope) {
    $scope.movie_list = { movies : [{name:'Movie1'}, {name:'Movie2'}]}; 
} 
```

我已经包含了 jQuery 插件，因为它是基础所必需的。当不包含 jQuery 时，代码可以正常工作，但是当我包含 jQuery 时，dropbox 中不会显示任何内容，并且应该存在的所有文本都在页面底部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:25:16.167

看看我的 Plnkr：- [http://plnkr.co/edit/9w2jTg?p=preview](http://plnkr.co/edit/9w2jTg?p=preview)

我正在使用带有 jQ​​uery 和 AngularJS 的 Foundation 选择框，它工作正常。可能与您的脚本引用的顺序有关。如果没有看到您的代码，很难说。
另外，我确实注意到，当第一个选择选项被禁用并且没有空值时，选择框变为空白，打开它的唯一方法是单击小箭头，所以：

这不能正常工作：

```
<option disabled>Please select...</option> 
```

工作正常：

```
<option value="" disabled>Please select...</option> 
```

# ios - 游戏中心。获取真实姓名

> ID：15385236
> 
> 赞同：6
> 
> 时间：2013-03-13T12:23:00.007
> 
> 标签：ios, game-center

我想知道本地玩家的真实姓名，但是 GKLocalPlayer 的 displayName 返回“我”，而不是真实姓名。

编写我使用的代码：

```
 void (^completitionHandler)(NSArray *, NSError *) = ^(NSArray *players, NSError *error) { 

    for (GKPlayer *p in players) {
      NSString *alies = p.alies;
      NSString *name = p.displayName;
      NSLog(@"name = %@",name);   //not real name, just "Me"
    }

 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T15:21:39.533

不确定[displayName](http://developer.apple.com/library/ios/documentation/GameKit/Reference/GKPlayer_Ref/Reference/Reference.html#//apple_ref/occ/instp/GKPlayer/displayName)是否可用于检索本地用户全名。来自[苹果的文档](http://developer.apple.com/library/mac/documentation/NetworkingInternet/Conceptual/GameKit_Guide/Users/Users.html#//apple_ref/doc/uid/TP40008304-CH8-SW17)：

> **播放器对象提供有关播放器的详细信息**
> 
> 当您的游戏需要特定玩家的详细信息时，它会通过查询 Game Center 来检索这些详细信息。您使用该玩家的玩家标识符检索该玩家的信息。Game Kit 在 GKPlayer 对象中将这些详细信息返回给您的游戏。
> 
> *   **显示**名称：
>     
>     
>     
>     您可以在自己的用户界面中为此播放器显示的用户可读字符串。例如，在网络比赛中，您可能会显示比赛中每个球员的显示名称，以便每个人都知道他们的对手是谁。
>     
>     
>     
>     玩家的[显示名称](http://developer.apple.com/library/ios/documentation/GameKit/Reference/GKPlayer_Ref/Reference/Reference.html#//apple_ref/occ/instp/GKPlayer/displayName)取决于该玩家是否是在设备上通过身份验证的本地玩家的朋友。如果玩家是本地玩家的朋友，那么显示名就是玩家的真实姓名。如果玩家不是朋友，那么显示名称就是玩家的别名。

它旨在检索其他玩家的姓名。然后，如果您询问本地播放器的 displayName，它返回“Me”是有道理的，因为您是该设备的当前用户。我想这与隐私政策有关。

**可能的解决方法：**

也许，您可以获取本地用户 ID 并使用它来尝试从该 ID 的玩家列表中检索真实姓名。但我不知道这是否会被视为您是您自己的朋友。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T15:05:59.417

使用 [ [GKLocalPlayer localPlayer](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKLocalPlayer_Ref/Reference/Reference.html) ]。

```
NSString *alias = [GKLocalPlayer localPlayer].alias
NSString *name = [GKLocalPlayer localPlayer].displayName 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-14T02:18:33.300

您可以获得昵称或别名，但在确保完成身份验证之后.. 否则它将给您带来零，

完成身份验证后使用此代码

```
NSString *userID = [[NSString alloc] initWithString:[GKLocalPlayer localPlayer].alias];
NSLog(@"%@", userID); 
```

# javascript - 如何将单击对象的文本传递给变量

> ID：15385241
> 
> 赞同：2
> 
> 时间：2013-03-13T12:23:31.770
> 
> 标签：javascript, jquery, variables, hyperlink, click

所以我想要的是获取单击的文本并将其传递给一个变量，然后将此变量回显到另一个 a。

这是据我所知，尽管这显然行不通。我该怎么做？

```
var aOneText = $(clickedA).text();
$('a.one').click(function(){
        var clickedA = $(this);
    $('a.two').text(aOneText);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:24:16.760

您没有分配`text`到`aOneText`事件中。

```
var aOneText;
$('a.one').click(function(){    
    var clickedA = $(this);
    aOneText = clickedA.text();
    $('a.two').text(aOneText);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:25:20.853

试试这个

```
$('a.one').click(function(){
    var clickedA = $(this).text();
     $('a.two').text(clickedA);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:26:30.410

使用`.text()`它将获取 DOM 内部的文本并返回它。

```
$('a.one').click(function(){
    var clickedA = $(this);
     $('a.two').text(clickedA.text());
}); 
```

根据您的代码，您需要对其进行如下修改

```
var aOneText;
$('a.one').click(function(){
        var clickedA = $(this);
    aOneText = clickedA.text();
    $('a.two').text(aOneText);
}); 
```

您正在定义`var aOneText = $(clickedA).text();`外部单击事件代码，因此它不会有任何值，而是 jQuery 会给您错误，因为`$(clickedA)`如果您没有声明它可能不存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:27:23.357

```
$('a.one').click(function(){
    $('a.two').text($(this).text());
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T12:27:24.680

试试这个

```
$('a.one').click(function(){
    $('a.two').text( $(this).text());
}); 
```

# wpf - UI 自动化真的是 WPF 应用程序测试的好选择吗？

> ID：15385243
> 
> 赞同：6
> 
> 时间：2013-03-13T12:23:38.917
> 
> 标签：wpf, testing, ui-automation, white-framework, uia

当谈到自动化 UI 测试时，对话总是以 UI 自动化结束。它是唯一的选择吗？

我个人不喜欢它的主要原因之一——复杂性。它被设计为适用于所有类型的应用程序。这种普遍性从来都不是免费的。UIA 引入了另一层抽象和相当复杂的 API。标准模式是有限的。自定义控件支持需要大量编码。我想知道为什么有人认为这是一个不错的选择？

WPF 具有出色且非常丰富的抽象，其中 UI 是视觉元素的分层树。这些元素公开了许多方法、事件和属性。树支持各种引用方式（例如相对源语法）。我们在 UIA 中失去了所有这些可能。为了什么？为了与老式应用程序和网络兼容？好吧，实际上，谁会需要它？万事通是个无所事事的大师。

像 Snoop 这样的工具可以将自己注入到正在运行的应用程序中并完全控制它。他们可以更改控件属性的值并引发事件。这还不够吗？没有。您希望您的测试能够像用户那样与 UI 进行交互——使用鼠标和键盘。但这是另一个可以解决的问题。

所以我想知道，我对 UIA 的喜悦有什么不明白的吗？

# android - 从电吉他到 Android 设备的音频流

> ID：15385250
> 
> 赞同：1
> 
> 时间：2013-03-13T12:23:46.547
> 
> 标签：android, audio, stream, audio-streaming, external-accessory

我正在寻找一种将电吉他连接到我的 android 设备并将音频捕获为输入字节流的方法。

为此，我需要一些设备（称为转换器）将来自吉他的模拟信号（或一些吉他效果，没关系......）转换为数字信号。

完成后，我需要以某种方式将该转换器中的数字信号传送到安卓设备中，这样我就可以读取字节流并处理声音......

在我发布这个问题之前，我已经在谷歌上搜索了几个星期，请与我分享你的知识。

**编辑**

我不能占用耳机输入，因为我想插入实际的耳机来听到自己的演奏......所以[这](http://www.youtube.com/watch?v=sz-9mxWa2VA)不是一个选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:41:27.463

如您所见，大多数 Android 设备都有耳机/麦克风组合插孔。您**可以**同时使用此输入和耳机。构建适配器很容易。

如果您不想自己制作东西，请在线购买 3.5 毫米 TRRS 到 RCA 电缆。这些通常作为摄像机配件出售。然后为 RCA 买一个转接器，接回耳机插孔。对于剩余的 RCA 插头，购买一个 RCA 到 1/4" 插头适配器并将其插入您的吉他。阻抗和电平将关闭，因此您可能需要进行试验，但它应该可以工作。

完成此操作后，您可以使用适用于 Android 的常规输入法。

希望很快会有更多 Android 设备支持 USB 音频，以便您获得更好的质量。目前，您几乎可以在任何地方使用的唯一输入是耳机插孔上的外部麦克风输入。

# jira - Testlink 1.9.5 JIRA 集成

> ID：15385251
> 
> 赞同：5
> 
> 时间：2013-03-13T12:23:51.893
> 
> 标签：jira, testlink

我正在尝试从 testlink 中的问题跟踪器管理视图将 testlink 1.9.5 与 JIRA 集成。

这是我写的：

```
<!-- Template jirasoapInterface -->
<issuetracker>
<username>user</username>
<password>password</password>
<uribase>http://url.address</uribase>
<uriwsdl>http://url.address/rpc/soap/jirasoapservice-v2?wsdl</uriwsdl>
<uriview>http://url.address/browse/</uriview>
<uricreate>http://url.address/secure/CreateIssue!default.jspa</uricreate>
<projectkey>projectkey</projectkey>
</issuetracker> 
```

问题是我在测试连接和测试执行视图中的以下文本时收到*“连接为 KO，检查配置” ：*

> “请注意：有问题阻止了与错误跟踪系统的连接，并且会产生性能问题。请联系您的 TestLink 管理员”

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-19T08:18:30.423

在整天寻找相同问题的解决方案之后（在我的情况下为 Testlink v1.9.13 + Atlassian Jira v6.5），我发现如果你输入电子邮件帐户（与我以前在 Atlassian 登录时相同） ) 在这样的错误跟踪器配置中：`<username>name.surname@example.com</username>`，它不起作用，有必要将用户名关联到电子邮件帐户。这对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T06:48:23.307

这是我在 testlink 中的选项示例

```
<!-- Template jirasoapInterface -->
<issuetracker>
<username>yourusernameAdmininJIRA</username>
<password>yourpasswordAdmininJIRA</password>
<uribase>https://yourJIRAhttps</uribase>
<uriwsdl>https://yourJIRAhttps</uriwsdl>
<uriview>https://yourJIRAhttps</uriview>
<uricreate>https://yourJIRAhttps</uricreate>
<issuetype>1</issuetype>
<projectkey>TOL</projectkey>
</issuetracker> 
```

但是用户名 - 您必须在 JIRA 中输入您的用户名 admin，密码 - 也是您的管理员 JIRA。在字段 - uribase uriwsdl、uriview uricreate - 您必须编写您的服务器 JIRA 信息。

Projectkey - 这是您在 JIRA 项目中的第一个符号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-26T19:23:22.407

```
<issuetracker>
<username></username>
<password></password>
<uribase>https://jira.xxx.net/browse/"Project Prefix"</uribase>

<uriapi>https://jira.xxx.net/rest/api/latest/</uriapi>
<uriview>https://jira.xxx.net/browse/</uriview>
<userinteraction>1</userinteraction>
<!-- 1: User will be able to manage following attributes from GUI -->  
<!-- Issue Type, Issue Priority, Affects Versions, Components -->
<!-- 0: values for attributes will be taken FROM this config XML from  GUI -->

<!-- Configure This if you want be able TO CREATE ISSUES -->
<projectkey>"Project Prefix"</projectkey>
<issuetype>1</issuetype>
</issuetracker> 
```

# cmake - cmake DEFINED 似乎无法识别变量

> ID：15385252
> 
> 赞同：16
> 
> 时间：2013-03-13T12:23:52.320
> 
> 标签：cmake

我在cmake中有这段代码：

```
#mandatory
SET(BOOST_DIR "$ENV{BOOST_HOME}")
if (DEFINED ${BOOST_DIR})
    #global include directories
    include_directories(${BOOST_DIR})
else(DEFINED ${BOOST_DIR})
    message( STATUS "BOOST_HOME at ${BOOST_DIR}")

    message( FATAL_ERROR "Undefined BOOST_HOME env var.")
endif(DEFINED ${BOOST_DIR}) 
```

环境变量 BOOST_HOME 已定义（/home/ferran/boost）。行为很奇怪，因为输出是：

```
-- BOOST_HOME at /home/ferran/boost
CMake Error at CMakeLists.txt:14 (message):
  Undefined BOOST_HOME env var.

-- Configuring incomplete, errors occurred! 
```

那么， var 存在并打印其内容，同时不存在？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-13T17:56:22.557

您需要避免取消引用语句`BOOST_DIR`中的变量：`if`

```
set(BOOST_DIR "$ENV{BOOST_HOME}")
if(BOOST_DIR)               # <--- Use 'BOOST_DIR', not 'DEFINED ${BOOST_DIR}'
    #global include directories
    include_directories(${BOOST_DIR})
else()
    message(STATUS "BOOST_HOME at ${BOOST_DIR}")
    message(FATAL_ERROR "Undefined BOOST_HOME env var.")
endif() 
```

通过取消引用`BOOST_DIR`，您可以有效地查询 CMake 是否有一个名为`/home/ferran/boost`defined 的变量。

# c++ - 为什么没有为“T* const”定义pointer_traits？

> ID：15385255
> 
> 赞同：12
> 
> 时间：2013-03-13T12:23:59.180
> 
> 标签：c++, pointers, c++11

正如在[http://en.cppreference.com/w/cpp/memory/pointer_traits](http://en.cppreference.com/w/cpp/memory/pointer_traits)和相关网站上看到的（也是 boost intrusive 的 boost 实现），`pointer_traits`不是专门用于`T*const`. 这是为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T12:46:56.873

尽管这不能作为*反对*指定`pointer_traits<>`for的专门化`T* const`存在的强烈动机，但我想一个解释为什么不包括它可能`pointer_traits<>`是主要用于模板参数推导（特别是类型推导）的上下文中) 发生。

由于类型推导忽略了顶级 cv-qualifications，因此 or 或 or 的专门化`T* const`可能`T* volatile`被`T* const volatile`认为是不必要的：

```
#include <type_traits>

template<typename T>
void foo(T)
{
    static_assert(std::is_same<T, int*>::value, "Error"); // Does not fire!
//                                ^^^^
}

int main()
{
    int x = 0;
    int* const p = &x;
    foo(p);
} 
```

当然，这并不意味着`T* cv`在这种情况下拥有专业化会有害，我只是想提供一个可能的解释，说明为什么缺少这些专业化。

同样，没有`iterator_traits<>`为 提供专业化`T* cv`。

# c++ - 如何为要在 STL 数据结构中使用的任意结构实现 operator <？

> ID：15385256
> 
> 赞同：0
> 
> 时间：2013-03-13T12:24:09.357
> 
> 标签：c++

我有时想在 map 和 set 中使用包含多个值的键。我不太在意速度。是否有一种简单或通用的方法来编写 operator < 来比较具有多个值的结构？我自己想出了以下内容，但这很乏味，尤其是随着值数量的增加。谢谢。

```
struct Properties
{
    Properties() {}

    Properties
        ( const string& data1
        , const string& data2
        , const string& data3
        )
        : data1(data1)
        , data2(data2)
        , data3(data3)
    {}

    string data1;
    string data2;
    string data3;

    bool operator < (const Properties& other) const
    {
        if (this->data1 == other.data1)
        {
            if (this->data2 == other.data2)
            {
                if (this->data3 == other.data3)
                {
                    return false;
                }
                else
                {
                    return this->data3 < other.data3;
                }
            }
            else
            {
                return this->data2 < other.data2;
            }
        }
        else
        {
            return this->data1 < other.data1;
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T12:29:48.713

您可以`std::tie`为此使用：

```
#include <tuple>

bool operator<(Properties S& rhs) const
{
  return std::tie(data1, data2, data3) < std::tie(rhs.data1, rhs.data2, rhs.data3);
} 
```

这工作，独立于类型`dataN`（假设他们有一个`operator<`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:30:55.847

它确实变得相当乏味。

当然，如果您将数据存储在一个数组中[假设所有数据都属于同一类型]，您可以使用循环：

```
const int numstrings = 3;
string data[3];

...

bool operator < (const Properties& other) const
{
   for(int i = 0; i < 3; i++)
   {
      if (data[i] != other.data[i])
      {
          return data[i] < other.data[i]; 
      }
   }
 } 
```

当然，您也可以稍微缩短现有代码：

```
bool operator < (const Properties& other) const
{
    if (this->data1 != other.data1)
    {
        return this->data1 < other.data1;
    }
    if (this->data2 != other.data2)
    {
        return this->data2 < other.data2;
    }
    return this->data3 < other.data3;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:35:00.187

执行此操作的传统方法如下

```
bool operator<(Properties const& lhs, Properties const& rhs) const
{
    return (lhs.data1 < rhs.data1)
           || (!(rhs.data1 < lhs.data1) && lhs.data2 < rhs.data2)
           || (!(rhs.data1 < lhs.data1) && !(rhs.data2 < lhs.data2) && lhs.data3 < rhs.data3;
} 
```

这具有适用于所有已`operator<`定义类型的优点，而不是依赖于`operator==`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:27:26.753

您可以尝试将它们转换为元组，然后它们进行比较。那将取代你的`Properties`班级。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T12:32:00.153

您可以像这样以更平坦的方式进行操作：

```
bool operator < (const Properties& other) const
{
    if (this->data1 < other.data1)
        return true;
    if (other.data1 < this->data1)
        return false;

    if (this->data2 < other.data2)
        return true;
    if (other.data2 < this->data2)
        return false;

    return this->data3 < other.data3;
} 
```

# java - RStudio 和 Shiny：服务器和客户端之间的消息

> ID：15385257
> 
> 赞同：3
> 
> 时间：2013-03-13T12:24:09.810
> 
> 标签：java, html, r, rstudio, shiny

我正在尝试创建一个闪亮的应用程序，我需要客户端发送到服务器的消息和服务器发回的答案（尤其是图像）。问题是我不知道他们是如何相互交流的。我试图从文档中获取此信息，但我无法找到它。我更喜欢用 Java 获取这些服务器-客户端消息，但我对任何可行的解决方案都感兴趣。

这就是我希望我的应用程序工作的方式：

我们有闪亮的代码，它生成一个包含图像和用户可以更改的一些内容的网页。每当用户更改某些内容（复选框、菜单等）时，应保存页面的当前状态。或者，我们可以有一个用户单击以保存页面状态的按钮。我们想保存整个 html，或者只是图像。将菜单的当前状态作为字符串。我试图保存 html，但它不包含图像。这就是我想要这些消息的原因，因为我猜它们包含我需要的数据。

但是，我选择了 Java，因为这些状态应该保存到一个图表中，逐步显示最终形式是如何形成的。我更愿意将它保存到 Xmind 工作簿中，因为它有一个很好的 Java API，我可以用它来制作所需的工作簿。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-12T14:16:16.913

尝试

```
options(shiny.trace=TRUE)
runApp("myApp") 
```

然后在 R 控制台中打印服务器和 ui 之间的消息。看到这个[问题](https://stackoverflow.com/questions/23002712/shiny-what-is-the-option-setting-to-display-in-the-console-the-messages-between/23031361#23031361)。希望这会有所帮助。

# mspec - 如何使用 MSpec 测试基于属性的验证模型？

> ID：15385259
> 
> 赞同：4
> 
> 时间：2013-03-13T12:24:14.453
> 
> 标签：mspec

我有一个具有某些属性的模型，这些属性限制了该模型可以采用的值。如何使用 MSpec 测试此模型的模型状态？

# c# - IEnumreable 动态和 lambda

> ID：15385260
> 
> 赞同：3
> 
> 时间：2013-03-13T12:24:14.887
> 
> 标签：c#, dynamic, ienumerable

我想在一个`IEnumerable<dynamic>`类型上使用一个 lambda 表达式，但是我在使用新的 lambda 表达式的属性和坐标上得到以下错误：

`Cannot use a lambda expression as an argument to a dynamically dispatched operation without first casting it to a delegate or expression tree type`.

这是我的代码

```
public static object returnFullSelectWithCoordinates(IEnumerable<dynamic> q)
        {
            return q.Select(b => new
            {
                route_id = b.b.route_id,
                name = b.b.name,
                description = b.b.description,
                attributes = b.b.route_attributes.Select(c => c.route_attribute_types.attribute_name),
                coordinates = b.b.coordinates.Select(c => new coordinateToSend { sequence = c.sequence, lat = c.position.Latitude, lon = c.position.Longitude })

            }); 
```

有什么解决方法可以使我的方法有效吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T09:15:52.600

由于`Select<>`是一种扩展方法，因此它不适用于动态类型。

使用 可以得到相同的结果`Enumerable.Select<>`。

试试这个查询：

```
Enumerable.Select(q,(Func<dynamic,dynamic>)(b => new
        {
            route_id = b.b.route_id,
            name = b.b.name,
            description = b.b.description,
            attributes = b.b.route_attributes.Select(c => c.route_attribute_types.attribute_name),
            coordinates = b.b.coordinates.Select(c => new coordinateToSend { sequence = c.sequence, lat = c.position.Latitude, lon = c.position.Longitude })

        }); 
```

# signalr - 编码 Webtest 中的 SignalR 持久连接

> ID：15385264
> 
> 赞同：2
> 
> 时间：2013-03-13T12:24:22.600
> 
> 标签：signalr, webtest, persistent-connection

我在控制台应用程序中有以下代码：

```
var connection = new Connection("http://localhost/xxx/signalr");
connection.Error += ex =>
{
    string msg = string.Format("***SignalR Error: {0}", ex.ToString());
    Debug.WriteLine(msg);
};
connection.Received += data =>
{
    string msg = string.Format("***SignalR Received: {0}", data);                    
    Debug.WriteLine(msg);
};
connection.Start().ContinueWith(task =>
{
    if (task.IsFaulted)
    {
        string msg = string.Format("***SignalR Failed to start: {0}", task.Exception.GetBaseException());
        Debug.WriteLine(msg);
    }
    else
    {
        string msg = string.Format("***SignalR Started: {0}", connection.ConnectionId);
        Debug.WriteLine(msg);
        connection.Send("Hello");
    }
}); 
```

调试服务器，我可以看到`OnConnected`并被`OnReceived`调用。如果我将相同的代码放在编码的 WebTest 中，`OnConnected`则会调用服务器上的 ，但`connection.Send`不会在服务器上接收到 。

问：是否可以在 WebTest 中使用 SignalR .Net 客户端？

问：在 WebTest 中使用 SignalR 持久连接的最佳方式是什么？

谢谢

# php - if 语句的问题

> ID：15385266
> 
> 赞同：-3
> 
> 时间：2013-03-13T12:24:28.507
> 
> 标签：php, if-statement

我有一个这样的列表：

```
<f:option1>0</f:option1>
<f:option2>50 000</f:option2>
<f:option3>100 000</f:option3>
<f:option4>150 000</f:option4>
<f:option5>200 000</f:option5>
<f:option6>250 000</f:option6>

<f:max_value>150 000</f:max_value>
<f:min_value>0</f:min_value>

<f:value1>1,50</f:value1>
<f:value2>2,00</f:value2>
<f:value3>3,00</f:value3>
<f:value4>4,00</f:value4>
<f:value5>5,00</f:value5>
<f:value6>6,00</f:value6> 
```

这个列表一直在变化，我想写一个if语句来获取正确的值

```
$target_option = 50 000;//Should get me $target_value = 2,00

if (($option6 > 0) && ($option6 <= $target_value) && ($min_value <= $target_value) && ($max_value => $target_value)){
    $target_value = $value6;
}elseif (($option5 > 0) && ($option5 <= $target_value) && ($min_value <= $target_value) && ($max_value => $target_value)){
    $target_value = $value5;
}elseif (($option4 > 0) && ($option4 <= $target_value) && ($min_value <= $target_value) && ($max_value => $target_value)){
    $target_value = $value4;
}elseif (($option3 > 0) && ($option3 <= $target_value) && ($min_value <= $target_value) && ($max_value => $target_value)){
    $target_value = $value3;
}elseif (($option2 > 0) && ($option2 <= $target_value) && ($min_value <= $target_value) && ($max_value => $target_value)){
    $target_value = $value2;
}elseif (($option1 > 0) && ($option1 <= $target_value) && ($min_value <= $target_value) && ($max_value => $target_value)){
    $target_value = $value1;
} 
```

任何人都看到我做错了什么，或者是否有更好的方法？

# 编辑：

在这里查看我的完整代码：http: [//pastebin.com/5pfh4JzF](http://pastebin.com/5pfh4JzF)

# 编辑 2

在另一条语句中发现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:38:24.767

有2个错误

1

```
$target_option = 50 000; 
```

应该是

```
$target_option = 50000; // no spaces 
```

2

他们每个人的最后陈述

```
($max_value => $target_value) 
```

应该

```
($max_value >= $target_value) 
```

使用任何代码编辑器来避免此类错误

[http://netbeans.org/downloads/](http://netbeans.org/downloads/)

# mysql - 用于文档摄取、存储和分面搜索的 MongoDB 或 Solr？

> ID：15385268
> 
> 赞同：1
> 
> 时间：2013-03-13T12:24:39.423
> 
> 标签：mysql, ruby-on-rails, mongodb, solr

我需要在这里为我正在处理的项目做出架构决策。以下是要求：

1.  文档摄取（.doc、.pdf、.csv，也许是视频）

2.  实际的文档存储（我假设在服务器上的磁盘上，并参考了数据库中的文件） - 以及数据库中可搜索和可分面的某些字段？

3.  全文文档搜索

4.  分面（基于从文档摄取中收集的字段选择，每个文档可能不同 - 换句话说，可能有 200 个方面，但只有一些适用于每个文档）

我正在使用 rails 作为服务器，目前使用的是 mySQL。我相信我在这里至少有两个明显的选择：

1.  索尔; 在 mySQL 中存储文档中的字段，并使用 Sunspot gem 进行 Solr 索引和方面定义。这里的好处似乎是快速搜索、分面、文档摄取实用程序。我不确定我对 200 个（也许更多 - 真正动态定义的）方面的问题。此外，考虑到文档有各种形状和大小，我想知道文档存储机制是否会更好。
2.  MongoDB；使用 mongoid gem 将文档内容存储在 MongoDB 中。我不熟悉这里的文档摄取实用程序，虽然文档存储明显胜出，但我相信 mongodb 在全文搜索方面做得很好，但对于分面，我需要使用多个查询进行聚合，这可能会很慢。

（我也知道我可以将 Solr 与 MongoDB 一起使用，但……不确定）。

老实说，我对 Solr 和 MongoDB 都很陌生，可以在这里使用一些建议，因为我确信我错过了一些优点和缺点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:33:29.567

听起来你可以使用[elasticsearch](http://elasticsearch.org)。

它是一个搜索引擎，使用与 solr 相同的底层 lucene 库，但您在其中存储的所有内容都是 JSON 文档。

全文搜索、分面搜索和对许多不同属性的过滤都运行良好。它确实内置了一些聚合（直方图方面等），尽管您应该检查这些是否符合您的需求。

根据您的弹性和吞吐量需求，构建跨越多台机器的弹性搜索集群也非常容易。

它有几个红宝石绑定，包括由为 elasticsearch 工作的 Karel Minařík 维护的[轮胎。](https://github.com/karmi/tire)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T12:53:17.227

我对 MongoDB 和 Solr 都有丰富的经验（尽管没有任何关系）。

根据您的需求，我推荐 Solr。

我曾开发过两个有搜索问题的不同 Web 应用程序，第一个是我们从事务数据库中嵌入的 Oracle Text 切换到 Solr。再也没有回头。

尽管 MongoDB 可能可以按照您的要求进行操作，但我怀疑您将花费大量时间使 MongoDB 以您想要的方式运行，尤其是在 faceting 方面。Mongo 的聚合框架相对较新。

您说过您将需要对构面运行多个查询。我希望这不是每个不同值的一个查询，就像所有类别一样，计算每个类别中的产品数量。这在使用开发数据的第一天可能工作得很好，但要等到您同时获得 10,000 个产品和 500 个类别以及 50 个用户搜索。然后，您有 50 个用户同时针对相同数据运行 500 个查询。你最终需要缓存它。

Solr 已经为您完成了这一切。它的设计考虑了这些用例，并且可以非常好地处理分面，而无需运行 N + 1 个查询。Solr 还提供了必要的缓存来避免频繁的磁盘 I/O。Solr 是高度可配置的。您可以调整缓存大小、架构、分析器等，而无需重构代码。

例如，我推荐使用 MongoDB 进行搜索的地方是当您的需求非常小并且不太可能发生重大变化时。例如，如果您想要一个前缀搜索，比如说，预先输入，您可以简单地为每个文档添加一个 searchTokens 字段并自己进行分析。

如果搜索用户集，每个用户可能如下所示：

```
{
  userId: 'x',
  firstName: 'Brandon',
  lastName: 'Ramirez',
  searchTokens: [
    'b',
    'br',
    'bra',
    'bran',
    'brand',
    'brando',
    'brandon',
    'r',
    'ra',
    'ram',
    'rami',
    'ramir',
    'ramire',
    'ramirez'
  ]
} 
```

我在 MongoDB 中使用了这种技术来避免 Solr 的复杂性。但这就是我所需要的。它用于预先输入，因此我不需要分面，也不需要一组动态的可过滤字段，也不需要相关性评分。

# tabs - 从面板中的链接打开新选项卡中的链接

> ID：15385269
> 
> 赞同：0
> 
> 时间：2013-03-13T12:24:41.953
> 
> 标签：tabs

您好，我正在尝试编辑网页以在新选项卡中打开此链接到目前为止我所做的一切都使链接在面板或现有选项卡中打开我试图谷歌搜索答案但已经能够找到任何东西我明白。我是 asp 新手，所以在听取了一些建议后

```
<asp:Panel ID="lblSupportLink" cssclass="login-text" style="color:#344A5C; font-size:13px;          padding-left:0px;" runat="server">Google (<a href="http://www.google.com" onclick="var page = window; if(parent != null){page = parent;}page.location.href='http://www.google.com';">http://www.google.com)</a></asp:Panel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:28:41.543

从标签中删除`onclick`属性，而是添加。`<a>``target="_blank"`

```
<asp:Panel ID="lblSupportLink" cssclass="login-text" style="color:#344A5C; font-size:13px; padding-left:0px;" runat="server">
  Google (<a href="http://www.google.com" target="_blank">http://www.google.com</a>)
</asp:Panel> 
```

# .net - 使用 itextsharp 阅读 PDF，其中 PDF 语言为非英语

> ID：15385270
> 
> 赞同：6
> 
> 时间：2013-03-13T12:24:44.780
> 
> 标签：.net, c#-4.0, pdf, ms-word, itextsharp

我正在尝试使用 C# 中的 itextsharp 阅读[此](https://www.dropbox.com/s/ezz015t3qdqo5hk/test.pdf)PDF，它将将此 pdf 转换为 word 文件。当我尝试使用英语 pdf 时，它还需要维护 word 中的表格格式和字体，它可以完美地工作，但使用一些印度语言，如印地语、马拉地语，它就不起作用了。

```
 public string ReadPdfFile(string Filename)
        {

            string strText = string.Empty;
            StringBuilder text = new StringBuilder();
            try
            {
                PdfReader reader = new PdfReader((string)Filename);
                if (File.Exists(Filename))
                {
                    PdfReader pdfReader = new PdfReader(Filename);

                    for (int page = 1; page <= pdfReader.NumberOfPages; page++)
                    {                        ITextExtractionStrategy strategy = new SimpleTextExtractionStrategy();
                        string currentText = PdfTextExtractor.GetTextFromPage(pdfReader, page, strategy);

                        text.Append(currentText);
                        pdfReader.Close();
                    }
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
            textBox1.Text = text.ToString();
            return text.ToString(); ;
        } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-22T09:27:27.880

我检查了您的文件，特别关注您的示例“मतद|र”在文档页面的最顶层被提取为“मतदरर”。

*简而言之：*

您的文档本身提供了信息，例如标题行中的字形“मतद|र”代表文本“मतदरर”。您应该向文档的来源询问字体信息不会误导的文档版本。如果那是不可能的，你应该去 OCR。

*详细地：*

第一页的顶行是通过页面内容流中的以下操作生成的：

```
/9 280 Tf
(-12"!%$"234%56*5) Tj 
```

第一行选择大小为 280 的名为**/9**的字体（页面开头的操作将所有内容缩放 0.05 倍；因此，您在文件中观察到的有效大小为 14 个单位）。

第二行导致打印字形。使用该字体的自定义编码在括号之间引用这些字形。

当程序试图提取文本时，它必须使用来自字体的信息从这些字形引用中推断出实际字符。

PDF 第一页上的字体**/9是使用这些对象定义的：**

```
242 0 obj<<
    /Type/Font/Name/9/BaseFont 243 0 R/FirstChar 33/LastChar 94
    /Subtype/TrueType/ToUnicode 244 0 R/FontDescriptor 247 0 R/Widths 248 0 R>>
endobj
243 0 obj/CDAC-GISTSurekh-Bold+0
endobj 
247 0 obj<<
    /Type/FontDescriptor/FontFile2 245 0 R/FontBBox 246 0 R/FontName 243 0 R
    /Flags 4/MissingWidth 946/StemV 0/StemH 0/CapHeight 500/XHeight 0
    /Ascent 1050/Descent -400/Leading 0/MaxWidth 1892/AvgWidth 946/ItalicAngle 0>>
endobj 
```

所以没有**/Encoding**元素，但至少有对**/ToUnicode**映射的引用。因此，提取文本的程序必须依赖给定的**/ToUnicode**映射。

**从 (-12"!%$"234%56*5) 中提取文本时， /ToUnicode**引用的流包含以下感兴趣的映射：

```
<21> <21> <0930>
<22> <22> <0930>
<24> <24> <091c>
<25> <25> <0020>
<2a> <2a> <0031>
<2d> <2d> <092e>
<31> <31> <0924>
<32> <32> <0926>
<33> <33> <0926>
<34> <34> <002c>
<35> <35> <0032>
<36> <36> <0030> 
```

（已经在这里您可以看到多个字符代码映射到同一个 unicode 代码点...）

因此，文本提取必须导致：

```
- = 0x2d -> 0x092e = म
1 = 0x31 -> 0x0924 = त
2 = 0x32 -> 0x0926 = द
" = 0x22 -> 0x0930 = र    instead of  |
! = 0x21 -> 0x0930 = र
% = 0x25 -> 0x0020 =  
$ = 0x24 -> 0x091c = ज
" = 0x22 -> 0x0930 = र
2 = 0x32 -> 0x0926 = द
3 = 0x33 -> 0x0926 = द
4 = 0x34 -> 0x002c = ,
% = 0x25 -> 0x0020 =  
5 = 0x35 -> 0x0032 = 2
6 = 0x36 -> 0x0030 = 0
* = 0x2a -> 0x0031 = 1
5 = 0x35 -> 0x0032 = 2 
```

因此，从第一个文档页面的标题中提取的文本 iTextSharp（以及 Adob​​e Reader！）正是该文档在其字体信息中声称的正确内容。

由于造成这种情况的原因是字体定义中的误导性映射信息，因此整个文档存在误解也就不足为奇了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T14:11:18.643

正如@mkl 所说，我们需要更多关于为什么事情不起作用的信息。但我可以告诉你一些可能对你有帮助的事情。

首先，`SimpleTextExtractionStrategy`很***简单***。如果您[阅读它的文档](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/parser/SimpleTextExtractionStrategy.html)，您会看到：

> 如果 PDF 以非从上到下的方式呈现文本，这将导致文本无法真实表示它在 PDF 中的显示方式

这意味着虽然 PDF 看起来应该从上到下阅读，但它可能是以不同的顺序编写的。您引用的 PDF 实际上首先编写了第二条视线。请参阅我[的帖子，了解一种更智能的文本提取策略](http://cjhaas.com/blog/2013/03/13/itextsharp-slightly-smarter-text-extraction-strategy/)，该策略尝试从上到下返回文本。当我在 PDF 的第一页上运行我的代码时，它似乎正确地拉出每一“行”。

其次，PDF 没有表格的概念。它们只是在某些位置绘制了文本和线条，而这些都没有相互关联。这意味着您需要计算每一行并构建您自己的表格概念，您不会在 iTextSharp 中找到任何可以为您执行此操作的代码。我个人什至不会费心尝试写一个。

第三，文本提取用于提取与字体无关的文本。如果你愿意，你必须自己建立这种逻辑。在这里查看我[的帖子](https://stackoverflow.com/a/6884297)以获得一个非常基本的开始。

# c# - 如何在 ASP.NET 中获取节点的属性？

> ID：15385271
> 
> 赞同：1
> 
> 时间：2013-03-13T12:24:45.027
> 
> 标签：c#, asp.net, xml, xmlreader

我有一个 XML 文件，我想读取它并将结果保存到数据表中，这是我的 XML 文件：

```
<?xml version="1.0" standalone="yes"?>
<NewDataSet>
  <Table name="tblAdminUser">
<Column>
  <displayname>
    Created Date
  </displayname>
  <orignalvalue>
    Created_Date
  </orignalvalue>
</Column>
<Column>
  <displayname>
    First Name
  </displayname>
  <orignalvalue>
    F_Name
  </orignalvalue>
</Column>
  </Table>
<Table name="test1">
   <Column> 
     <displayname>
    Last Name
  </displayname>
  <orignalvalue>
    L_Name
  </orignalvalue>
</Column>
<Column>
  <displayname>
    Created By
  </displayname>
  <orignalvalue>
    Created_By
  </orignalvalue>
</Column>
  </Table>
</NewDataSet> 
```

现在我想做的是：

如果“表”节点的“**名称**”是“tblAdminuser”，那么我想在两列中的数据表中获取“**显示列**”节点的内部值和相应的“原始值”。

我到目前为止所做的是：

```
XmlDataDocument xmldoc = new XmlDataDocument();
    xmldoc.Load(Server.MapPath("~/XMLFile.xml"));
    XmlElement root = xmldoc.DocumentElement;
    XmlNodeList tablenodes = root.SelectNodes("Table");
    foreach (XmlNode nodes in tablenodes)
    {

        if (nodes.LocalName == "tblAdminUser")
        {
            XmlNodeList Columnnodes = root.SelectNodes("Column"); // You can also use XPath here
            XmlNodeList displayColumnnodes = root.SelectNodes("Column");
            foreach (XmlNode node in displayColumnnodes)
            {
                Response.Write(node.InnerText);
                // use node variable here for your beeds
            }
        }
    } 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:24:56.270

试试这个

```
XmlDataDocument xmldoc = new XmlDataDocument();
            xmldoc.Load("C:/test.xml");
            var root = xmldoc.DocumentElement;
            if (root == null) return;
            var users = new List<User>();

            var tablenodes = root.SelectNodes("Table");
            if (tablenodes != null)

                foreach (XmlNode nodes in tablenodes)
                {
                    if (!nodes.HasChildNodes) continue;

                    if (nodes.Attributes == null) continue;
                    var user = new User { UserName = nodes.Attributes[0].Value };
                    var customer = new Customer();

                    var nodesdisplayname = nodes.SelectNodes("Column/displayname");

                    if (nodesdisplayname != null)
                    {
                        var xmlNode = nodesdisplayname.Item(0);
                        if (xmlNode != null)
                        {
                            customer.DisplayName  = xmlNode.InnerText;
                        }
                    }

                    var nodesorignalvalue = nodes.SelectNodes("Column/orignalvalue");

                    if (nodesorignalvalue != null)
                    {
                        var xmlNode = nodesorignalvalue.Item(0);
                        if (xmlNode != null)
                        {
                            customer.OriginalValue = xmlNode.InnerText;
                        }
                    }

                    user.Customers = customer;
                    users.Add(user);
                } 
```

还要在上面的代码中添加条件为

```
if(nodes.Attributes[0].Value == "tblAdminUser")
{
  // Added code here
} 
```

并以用户和客户类为例

```
 public class User
    {
        public Customer Customers;

        public string UserName { get; set; }
    }

    public class Customer
    {
        public string DisplayName { get; set; }

        public string OriginalValue { get; set; }
    } 
```

它将返回用户列表。

我想这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T13:43:01.097

似乎更好的 XPath 语句会有所帮助。

你有

> root.SelectNodes("表");

改成

> root.SelectNodes("//Table[(@name='tblAdminUser')]/Column")

您可能会考虑**XSLT**，这是一个示例

```
<?xml version='1.0'?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
<xsl:template match='/'>

<table>
    <tr>
        <th>Display Name</th>
        <th>Original Value</th>
    </tr>

    <xsl:for-each select='//Table[(@name="tblAdminUser")]/Column'>
    <tr>
        <td><xsl:value-of select='displayname'/></td>
        <td><xsl:value-of select='orignalvalue'/></td>
    </tr>
    </xsl:for-each>

</table>

</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T10:23:55.480

这是我的代码来完全满足我的要求：

```
using System;
using System.Xml;
using System.Web;
using System.Data;

public class ClsXML
{
public DataTable GetColumnsFromXML(String XMLPath, String TableName)
{
    DataTable dtForColumns = DatatableforColumns();
    XmlDataDocument xmldoc = new XmlDataDocument();
    xmldoc.Load(XMLPath);
    XmlElement root = xmldoc.DocumentElement;
    XmlNodeList tablenodes = root.SelectNodes("Table");

    if (tablenodes != null)

        foreach (XmlNode nodes in tablenodes)
        {
            if (!nodes.HasChildNodes) continue;
            if (nodes.Attributes == null) continue;
            //TableName = nodes.Attributes[0].Value;

            if (nodes.Attributes[0].Value == TableName)
            {
                String PrimaryKey = nodes.Attributes[1].Value;
                var nodesdisplayname = nodes.SelectNodes("Column/DisplayColumn");
                var nodesorignalvalue = nodes.SelectNodes("Column/OrignalColumn");

                if (nodesdisplayname != null && nodesorignalvalue != null)
                {
                    for (int i = 0; i <= nodesdisplayname.Count - 1; i++)
                    {
                        var xmlDisplayNode = nodesdisplayname.Item(i);
                        var xmlOrignalNode = nodesorignalvalue.Item(i);

                        if (xmlDisplayNode != null && xmlOrignalNode != null)
                        {

                            DataRow dr;
                            dr = dtForColumns.NewRow();
                            dr["DisplayColumn"] = xmlDisplayNode.InnerText;
                            dr["OrignalColumn"] = xmlOrignalNode.InnerText;
                            dr["PrimaryKey"] = PrimaryKey;
                            dtForColumns.Rows.Add(dr);
                        }
                    }
                }
            }
        }
    return dtForColumns;
}
private DataTable DatatableforColumns()
{
    DataTable dt = new DataTable();
    dt.Columns.Add("DisplayColumn", typeof(String));
    dt.Columns.Add("OrignalColumn", typeof(String));
    dt.Columns.Add("PrimaryKey", typeof(String));
    return dt;
}
} 
```

感谢所有快乐的代码....

# git - 带有 SCM 管理器的 Git

> ID：15385277
> 
> 赞同：0
> 
> 时间：2013-03-13T12:24:54.700
> 
> 标签：git, scmmanager

我在 SCM 管理器中的用户管理有问题，当我在存储库权限中添加用户并进行克隆、推送或拉取时，唯一有效的密码是“scmadmin”（管理员密码！），我需要你的帮助，还使用 scm-manager 关于 git 的教程。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T11:54:27.640

管理员用户“scmadmin”对所有存储库具有完全访问权限。所以我认为您忘记在存储库中为新创建的用户设置权限。转到存储库选项卡并选择要配置的存储库。在底部区域选择“权限”选项卡并添加具有“写入”或“所有者”访问级别的用户。

SCM-Manager 像任何其他 git 存储库服务器一样处理您的请求。所以像往常一样工作。有关特殊的 SCM-Manager 教程（不依赖于 git），请参见 Thomas 已经发布的链接。

# shell - 需要在 Unix 中将 Wed Mar 13 00:18:06 2013 转换为日期时间

> ID：15385279
> 
> 赞同：0
> 
> 时间：2013-03-13T12:24:56.887
> 
> 标签：shell, unix, unix-timestamp

我有两个变量，它们被分配给以下值

```
Start_time=Start time: [Wed Mar 13 00:18:06 2013]

End_time=End time: [Wed Mar 13 00:18:12 2013] 
```

现在我需要从 End_Time 中减去 Start_time。所以我需要首先删除其他字符串并将日期转换为可以执行减法的格式。

为了删除字符串，我使用了以下 sed 函数

```
echo "Start time: [Wed Mar 13 00:18:06 2013]" | sed -e 's|Start time:||'

[Wed Mar 13 00:18:06 2013] 
```

如何在不使用其他 sed 函数的情况下删除括号。

另外，有人可以告诉我如何将其转换为可以执行减法运算的日期格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:31:42.513

sed 语句可以是：

```
sed -e 's|Start time: \[||;s/\]//' 
```

使用 gnu date 您可以指定要使用的日期并转换为 unix 时间戳（用您的变量替换硬编码值）：

```
bll@bll-desktop ~
$ a=$(date --date="Wed Mar 13 00:18:06 2013" '+%s')

bll@bll-desktop ~
$ b=$(date --date="Wed Mar 13 00:18:12 2013" '+%s') 
```

然后在几秒钟内得到差异：

```
bll@bll-desktop ~
$ d=$(($b - $a))

bll@bll-desktop ~
$ echo $d
6 
```

# java - ActiveMQ 5.4.2 队列类

> ID：15385286
> 
> 赞同：0
> 
> 时间：2013-03-13T12:25:09.417
> 
> 标签：java, queue, jms, activemq

我正在开发一个消息传递应用程序，我通过从浏览器访问 activemq 创建队列名称 =“dataQueue”，手动将数据发送到队列。现在我需要通过以下代码使用 spring 框架来引用该队列：

```
<bean id="dataQueue" class=" "></bean> 
```

我无法在 ActiveMQ 中找到队列的类名。

请告诉应该有什么类来指定队列名称。我正在使用 activeMQ 5.4.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:44:21.363

例如看这个：[Using Spring to Send JMS messages](http://bsnyderblog.blogspot.com.es/2010/02/using-spring-jmstemplate-to-send-jms.html)

# html - 画布滚动条不起作用

> ID：15385290
> 
> 赞同：3
> 
> 时间：2013-03-13T12:25:17.943
> 
> 标签：html, scrollbar, html5-canvas

我在 div 标签内创建了画布并将背景图像添加到画布。这是代码：

```
<div id="container" style="width: 740px; height: 420px">
  <canvas id="canvas_draw"></canvas>                        
</div>

 #container
    {
        position: relative;
    }
    #canvas_draw
    {
        border: 1px dashed #CCCCCC;
        margin: 5px;
        border-style: dotted;
        border-width: 1px;
        background-color: #FFFFFF;
        overflow:scroll !important;
        background-image:url('Images/sample.jpg');
        background-repeat: no-repeat;
        background-size: 900px 600px;
        vertical-align: top;
    } 
```

输出是，滚动条显示在画布上，但无法滚动。我在 Chrome 上进行了测试。尝试将滚动功能应用于 div，它工作正常，但是，`unable to draw on scroll area`. 所以，我`overflow: scroll`只将功能应用于画布.. 我该如何解决这个滚动条问题。

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T12:38:10.043

**向画布添加滚动条**

Canvas 与其他 html 元素不同。Html 滚动条无法有效滚动大于画布 css 大小的画布内容。

一种后备方法是使用 jquery-ui 来绘制滚动条。

以下是如何向画布添加垂直滚动条，允许在更大的图像上向上/向下滚动：http: [//jsfiddle.net/m1erickson/a9KDB/](http://jsfiddle.net/m1erickson/a9KDB/)

您可以以相同的方式添加水平滚动条。

这是代码：

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>

<style>
body{ background-color: ivory; }
div, canvas {
    position:absolute;
}
.wrapper {
    top:10px;
    left:10px;
    width: 300px;
    height: 300px;
    border: 2px solid black;
    margin:30px 0 2;
    overflow: hidden;
    background-color:green;
}
.vertical-scroll {
    left:320px;
    top:10px;
    border: 1px solid green;
    width: 20px;
    height: 300px;
}
.vertical-scroll div.bar {
    left:0px;
    top:0px;
    width: 20px;
    background-color: blue;
    height: 20px;
}
#mycanvas {
    left:0px;
    top:0px;
}

</style>

<script>
    $(function(){

        var canvas=document.getElementById("mycanvas");
        var ctx=canvas.getContext("2d");

        var wrapper;
        var canvasHeight;
        var vScrollHeight;
        var canvasWrapperHeight=300;

        $(".bar").draggable({
            containment: "parent"
        });

        $(".bar").on("drag", function (event, ui) {
            var ctop=(-ui.position.top * canvasHeight / canvasWrapperHeight);
            canvas.style.top = ctop + "px"
        });

        var img=new Image();
        img.onload=function(){
          canvas.width=this.width;
          canvas.height=this.height;
          canvasHeight=this.height;
          vbarHeight=canvasWrapperHeight*canvasWrapperHeight/canvasHeight;
          document.getElementById("vbar").style.height=vbarHeight+"px";
          ctx.drawImage(this,260,0,300,this.height,0,0,300,this.height);
        }
        img.src="http://sciencedude.blog.ocregister.com/files/2008/02/zot1-copy.jpg";

    }); // end $(function(){});
</script>

</head>

<body>
    <div class="wrapper" id="wrap1">
        <canvas id="mycanvas" width="300px" height="300px" />
    </div>
    <div class="vertical-scroll" id="vscroll">
        <div class="bar" id="vbar"></div>
    </div>
 </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-22T20:37:22.680

使用 css 和普通 html 来做一些看似简单的事情似乎需要很多额外的代码。但是，如上所述，您必须通过代码为每个加载的图像调整画布的大小。我们正在做同样的事情，通过 jQuery 将画布设置为图像大小。

设置包装器 div 的宽度时，您需要考虑滚动条的宽度。您还应该根据浏览器在代码中设置此宽度。唯一的问题是不同浏览器渲染引擎之间的滚动条宽度不同。

这是一个谈论这个的链接：[http ://www.sitepoint.com/rwd-scrollbars-is-chrome-better/](http://www.sitepoint.com/rwd-scrollbars-is-chrome-better/)

这是仅使用 html 和 css 简化滚动的代码。

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>

<style>
body{ background-color: ivory; }
div, canvas {
    position:absolute;
}
.wrapper {
    top:10px;
    left:10px;
    width: 318px; /* adjusted hard-coded scrollbar width; you should set this with js */
    height: 300px;
    border: 2px solid black;
    margin:30px 0 2;
    overflow-y: scroll; /* scrolling vertical only */
    overflow-x: hidden; /* hiding horizontal scrollbar */
    background-color: green;
}

#mycanvas {
    left:0px;
    top:0px;
}
</style>

<script>
$(function(){ 
   var canvas = document.getElementById("mycanvas");
    var ctx = canvas.getContext("2d");

    var wrapper;
    var canvasHeight;

    var img = new Image();
    img.onload = function () {
        canvas.width = this.width;
        canvas.height = this.height;
        ctx.drawImage(this, 260, 0, 300, this.height, 0, 0, 300, this.height);
    }
    img.src = "http://sciencedude.blog.ocregister.com/files/2008/02/zot1-copy.jpg";
    }); // end $(function(){});
</script>

</head>

<div class="wrapper" id="canvaswrapper">
    <canvas id="mycanvas" width="300px" height="300px" />
</div>

</body>
</html> 
```

# wso2 - 如何使用 postgressql 在 wso2esb 或 wso2dss 中处理事务

> ID：15385291
> 
> 赞同：0
> 
> 时间：2013-03-13T12:25:20.423
> 
> 标签：wso2, wso2esb, wso2dss

我想了解更多有关 DSS 事务处理的信息。我一直在阅读有关 boxcarring 和分布式交易的信息，但这不是我想要的。Boxcarring 是有状态的（客户端需要维护一个会话），我的事务在同一个数据库中，而不是分布式的。

我正在寻找以下问题/挑战的解决方案： - 我有一组相关表。它们通过主键/外键关系相关联。我需要在相关表中更新/插入对象。我可以在一组嵌套更新查询中执行此操作吗？如果是这样，当其中一个更新失败时会发生什么？所有插入/更新的对象都会回滚吗？（我正在使用 postgres 数据库）

我插入第一个表并获得一个返回的键值，这是 wso2dss 的未来之一，并使用该键我也插入到第二个表中并使用该键再插入一个键，当我插入我的问题时，我的插入正常是如果我将重复数据插入到第二个表中，它将彻底错误，在这种情况下，我的第一个表行可能会回滚..我们如何在 wso2dss 或 wso2esb 中执行此操作

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:59:47.197

您可以使用存储过程代替嵌套查询。您可以通过 [1] 了解如何在 dss 中执行存储过程。

[1]。[http://blog.shelan.org/2012/03/how-to-call-mysql-stored-procedures.html](http://blog.shelan.org/2012/03/how-to-call-mysql-stored-procedures.html)

谢谢你，达沙那。

# spring-mvc - 无效的 在 servlet 映射中如何消除此错误

> ID：15385298
> 
> 赞同：0
> 
> 时间：2013-03-13T12:25:28.940
> 
> 标签：spring-mvc, annotations, url-parameters

我正在使用这个函数来获取请求参数 spring3 mvc，我的 url 是

本地主机:8080/karmaFriend/register/abc/wq/abc@abc.com

```
@RequestMapping(value = "/register/{username}/{password}/{email}",  method = RequestMethod.GET)

public @ResponseBody ResponseMsg getUserInJSON(@PathVariable String username, @PathVariable String password, @PathVariable String email) {
        ResponseMsg responseMsg = CommonUtils.checkParam(username, password, email);
        if(responseMsg.getStatus().equalsIgnoreCase("True"))
            responseMsg =  userService.registerUser(username, password, email);
        return responseMsg;
    } 
```

它工作得很好，但如果我像这样更改我的网址 localhost:8080/karmaFriend/register/abc//abc@abc.com

那么它不会调用那个函数......还有其他方法可以调用相同的函数吗？

# ios - 如何防止 Interface Builder 在子视图内容周围添加 20pt 填充？

> ID：15385300
> 
> 赞同：30
> 
> 时间：2013-03-13T12:25:34.457
> 
> 标签：ios, xcode, interface-builder

![IB，停止添加填充！](../Images/13a4c4d4ffd4e178f198852f9610290f.png)

看到 20 像素（而不是 pt）的填充吗？IB 在两种情况下自动执行此操作，当您点击`Cmd + =`自动调整超级视图以适应子视图内容时，以及当您选择`Editor > Embed In > UIView, UIScrollView etc.`.

后者特别烦人，因为它需要一步一步节省时间，并将其变成重新定位的麻烦，仅比手动操作好一点，并且当您将所有子视图拖到不同位置时会丢失它们的相对位置层次结构。

同样通过该`Embed In`选项，IB 将新的 superview 包装器的位置移动 (-20, -20)，就好像这使它变得更好......

我在这里错过了什么吗？有没有办法防止这种填充？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-05-31T17:35:18.307

我终于想出了与此答案相关的方法：

[Interface Builder 中的组视图](https://stackoverflow.com/questions/10350931/group-views-in-interface-builder?answertab=active#tab-top)

1.  选择您希望嵌入的所有视图（通过 shift 或命令单击它们）。
2.  编辑器->嵌入->查看。这将创建一个带有多余 20 像素填充的视图“A”。
3.  使用您想要的实际边界创建一个新视图“B”（因此所有边都比“A”小 20 个像素）。
4.  将旧的容器视图“A”拖到新的容器视图“B”中（Xcode 会在“B”中为您居中，保留所有子元素的当前位置）。
5.  单击旧容器视图“A”并转到编辑器->取消嵌入。

**现在您的子元素在视图“B”中正确定位，并且没有 20 像素填充。**

在 Xcode 4.5 中测试。

PS 当您希望拥有侧边栏并同时支持 3.5" 和 4" 显示器时，此技术特别有用。您可以为侧边栏和主视图提供适当的自动调整大小，然后相对于它们缩放子视图。我无法让 GLKit 视图遵守自动调整大小规则，因此我设置了普通视图并将 GLKKit 视图嵌入其中，并启用了所有红色的自动调整大小条：

[GLKView 嵌套子视图帧大小和边界大小不正确](https://stackoverflow.com/questions/16257510/glkview-nested-subview-frame-size-and-bounds-size-incorrect)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-10-30T15:27:24.083

真是个好消息！`UIView` **多亏了 Xcode 10**，这终于可以在没有任何调整的情况下嵌入视图！

只需使用新的`View Without Insets`子菜单。

![](../Images/a1733a62f65e838ae92316433eb2746e.png)

到目前为止，他们还没有这样做`UIScrollView`……</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-20T19:31:41.557

至少在 Xcode 7.2 中，您所要做的就是为 Container View 提供以下约束

```
Trailing Space to Superview = -20

Leading Space to Superview = -20 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-04T13:34:07.737

就目前而言，不可能一帆风顺。但这是在 Xcode 9 上对我最有效的方法。请注意，这样您将放松对嵌入的顶视图的约束。因此，要将一个视图嵌入到另一个视图中：

1.  在与您要嵌入的视图相同的级别上创建另一个空白视图。
2.  正确定位新视图并将其约束添加到父视图。我认为在大多数情况下，您希望将与现有视图相同的约束复制到父视图。
3.  然后，选择需要嵌入的视图并将其拖到新视图下。现在您将视图嵌入到新视图中。您还需要将 0 边缘约束从嵌入视图添加到新视图。

就是这样。

# c# - 比较c#中的字符串

> ID：15385301
> 
> 赞同：0
> 
> 时间：2013-03-13T12:25:35.907
> 
> 标签：c#, .net

我有这样的文件内容

```
XXX,AAAAAA,B,CC;Cont 123456;2.50;1;1;1;2;0;1;l;
XXX,AAAAAA,B,CC;Avboo;1.20;1;1;1;2;0;1;l;
XXX,AAAAAA,B,CC;Dartw esata garle;3.00;1;1;1;2;0;1;ccc; 
```

文件保存在 c:\myFile.txt

在我的 nunit 测试中，我试图在文件内容中创建精确的字符串，然后我想断言它们是相等的

```
[Test]
public void test()
{      
   string line1 = "XXX,AAAAAA,B,CC;Cont 123456;2.50;1;1;1;2;0;1;l;\r\n";
   string line2 = "XXX,AAAAAA,B,CC;Avboo;1.20;1;1;1;2;0;1;l;\r\n";
   string line3 = "XXX,AAAAAA,B,CC;Dartw esata garle;3.00;1;1;1;2;0;1;ccc;\r\n";    
   string expected = string.Concat(line1,line2,line3);
   var fileContent = File.ReadAllText(@"C:\myFile.txt");
   Assert.AreEqual(fileContent, expected);
} 
```

尽管看起来应该是确切的字符串，但我遇到了错误

> 预期的字符串长度为 149，但为 154。字符串在索引 86 处不同

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T12:32:38.257

如果删除最后一个换行符怎么办：

```
 string line3 = "XXX,AAAAAA,B,CC;Dartw esata garle;3.00;1;1;1;2;0;1;ccc;"; 
```

我认为您的文本文件的结尾不是换行符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T12:28:20.057

使用`Environment.NewLine`而不是`\r\n`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T12:50:59.583

您收到的消息很明确：

`Expected string length 149 but was 154\. Strings differ at index 86`

它指向`\r\n`位置；所以我怀疑你的文件包含`\n`而不是`\r`和`\n`在一起。

```
 position 86: \r found |
                                                        v
...;1;1;1;2;0;1;l;XXX,AAAAAA,B,CC;Avboo;1.20;1;1;1;2;0;1;l;XXX,AAAAAA,B,CC; 
```

*   由于这个原因，文件比较不同，因为在 86 位有一个意外的 \r。

所以你现在有 3 个额外的字符。

因为您的文本文件可能不以 结尾`\r\n`，所以现在您多了一个字符：

*   这就是为什么你总共有 5 个额外字符（4 + 一个我还没有发现的额外字符）的原因：154 而不是 149。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:34:14.023

您有一个**额外的 NewLineChar** in `line3`，以下代码可以正常工作：

```
[Test]
public void test()
{
    string line1 = "XXX,AAAAAA,B,CC;Cont 123456;2.50;1;1;1;2;0;1;l;\r\n";
    string line2 = "XXX,AAAAAA,B,CC;Avboo;1.20;1;1;1;2;0;1;l;\r\n";
    string line3 = "XXX,AAAAAA,B,CC;Dartw esata garle;3.00;1;1;1;2;0;1;ccc;";
    string expected = string.Concat(line1, line2, line3);
    var fileContent = File.ReadAllText(@"C:\myFile.txt");
} 
```

你也可以在你的`myfile.txt`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T12:40:12.583

另一种方法。

```
var actual = File.ReadAllLines(@"c:\abc.txt");
var expected = new List<string>();
expected.Add("line1");
expected.Add("line2");
expected.Add("line3");
Assert.AreEqual(expected, actual); 
```

或者您可以在列表上执行一个 for 循环并逐行检查。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T12:45:24.327

关于如何更好地进行测试，这里有很多很好的答案。但实际上这个问题有两个根本问题。

1.  这不是单元测试，而是集成测试
2.  如果您首先不知道文件的 .NET String 输出是什么，那么测试毫无意义。你需要先找出这个。

为此，我将首先调试测试并复制输出，`File.ReadAllText("[filename]");`然后将此输出粘贴到您的`Assert.`方法中。

单元/集成测试的主要关键之一是准确地知道测试的双方是**什么**。没有这个，你还不如不打扰。

另外，你在测试什么？

# c++ - 在另一个进程写入文件时读取文件

> ID：15385302
> 
> 赞同：11
> 
> 时间：2013-03-13T12:26:02.467
> 
> 标签：c++, windows, file, winapi, createfile

我正在尝试从缓冲区文件中读取二进制数据，该文件由不同的进程（我无法修改）连续写入。我正在使用以下代码来打开文件：

```
fileH = CreateFileA((LPCSTR)filename,
                    GENERIC_READ,
                    FILE_SHARE_READ | FILE_SHARE_WRITE,
                    NULL,
                    OPEN_EXISTING,
                    FILE_ATTRIBUTE_NORMAL, NULL); 
```

它正确打开，没有错误。但是，当我从文件中读取数据时，它似乎阻止了其他进程写入文件，因为我丢失了数据。

缓冲区是循环的，这意味着文件大小是固定的，新数据会不断地覆盖缓冲区中的旧数据。

**编辑：** 有时最简单的解决方案有效......

我已经联系了软件公司并告诉了他们这个错误，并且在一天之内他们发布了一个带有修复的新版本。抱歉，这不能适用于所有人。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T14:59:32.630

如果不知道写入过程如何打开文件，很难说出您的选择是什么。显然，它不是以独占方式打开文件并保持打开状态。否则你根本无法阅读它。

您描述的行为表明写入过程以独占方式打开文件，写入文件，然后关闭文件。如果是这种情况，那么您不能让您的程序打开文件并保持打开状态。这将导致写入过程在尝试写入时失败。

如果你不能修改写作过程，那么你的选择是有限的，不是很有吸引力。最有可能的是，您必须让程序打开文件，读取一小块，关闭文件，然后在再次读取之前稍等片刻。即使这样，也不能保证在写入过程尝试写入时不会打开文件。我想，你已经发现了。

您知道写入过程是在无法打开文件时丢失数据，还是只是缓冲数据并在下次实际打开文件时写入？如果是这种情况，那么我建议一次逐步浏览文件的建议可能会奏效。否则，您将丢失数据。

据我所知，没有一种打开模式相当于“打开文件进行阅读，但如果有人想要独占访问，那就让他们拥有它”。

另一种可能性是让您的程序在您想阅读时重命名文件，然后在阅读后删除重命名的文件。当然，这假设写入过程将在必要时创建一个新文件。即使那样，如果写入过程在您重命名时尝试写入，也*可能会出现问题。*我不认为这会是一个问题（就文件系统而言，重命名可能是原子的），但这是你必须研究的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T14:10:33.510

我建议查看出色的[Far Manager](http://farmanager.com)的源代码。它的内部查看器可以轻松处理数千兆字节的文件，显示正在写入的文件没有问题，并且几乎可以实时更新更改的文件内容。我从未注意到正在显示的文件有任何阻塞问题。

与问题相关的源代码似乎在[viewer.cpp](http://farmanager.com/svn/trunk/unicode_far/viewer.cpp)文件中。

一件有趣的事情是它*不*使用`GENERIC_READ`：

```
ViewFile.Open(strFileName, FILE_READ_DATA, FILE_SHARE_READ|FILE_SHARE_WRITE|FILE_SHARE_DELETE, nullptr, OPEN_EXISTING); 
```

我怀疑下降`SYNCHRONIZE`在这里可能很重要。

文件更改检测在`Viewer::ProcessKey`,`KEY_IDLE`情况下：

```
// Smart file change check -- thanks Dzirt2005
//
bool changed = (
    ViewFindData.ftLastWriteTime.dwLowDateTime!=NewViewFindData.ftLastWriteTime.dwLowDateTime ||
    ViewFindData.ftLastWriteTime.dwHighDateTime!=NewViewFindData.ftLastWriteTime.dwHighDateTime ||
    ViewFindData.nFileSize != NewViewFindData.nFileSize
);
if ( changed )
    ViewFindData = NewViewFindData;
else {
    if ( !ViewFile.GetSize(NewViewFindData.nFileSize) || FileSize == static_cast<__int64>(NewViewFindData.nFileSize) )
        return TRUE;
    changed = FileSize > static_cast<__int64>(NewViewFindData.nFileSize); // true if file shrank
} 
```

缓存文件读取在[cache.cpp](http://farmanager.com/svn/trunk/unicode_far/cache.cpp)中实现。但是那里并没有什么真正惊天动地的东西，只有一些`Seek()`和`Read()`（[最终导致](http://farmanager.com/svn/trunk/unicode_far/farwinapi.cpp)API调用）。不使用重叠。`SetFilePointerEx``ReadFile`

# recursion - 递归系列 mupad

> ID：15385303
> 
> 赞同：2
> 
> 时间：2013-03-13T12:26:14.457
> 
> 标签：recursion, series, mupad

我试图找到以下系列的从 n=1 到 n=infinity 的总和：

```
A(n)=T/(n+1)*{a1*T^2*A(n-3)/((n-1)*n) + a2*T*A(n-2)/n + a3*A(n-1)} 
```

和

```
A(-1)=A(0)=0
A(1)=T*a1/2 
```

使用mupad。可能吗？

我尝试了以下代码：

```
A := proc(n)
begin
  if(n<=0) then return(0) end_if:
  if(n=1) then return(a_1*T/2) end_if:
  return((T/(n+1))*(a_1*T^2*A(n-3)/((n-1)*n)
                    +a_2*T*A(n-2)/n
                    +a_3*A(n-1)))
end_proc: 
```

这适用于 A 系列的单个元素，但是当我尝试找到 n=1..2 的部分总和时：

```
sum(A(n),n=1..2) 
```

mupad 返回错误：

```
Error: Can't evaluate to boolean [_leequal];
during evaluation of 'A' 
```

有没有更简单的方法来解决这个问题？

# haskell - 我如何证明使用列表归纳？

> ID：15385306
> 
> 赞同：0
> 
> 时间：2013-03-13T12:26:22.970
> 
> 标签：haskell, discrete-mathematics

我必须通过 xs 上的列表归纳表明：所有列表 xs 和 ys 的反向 (xs ++ ys) = (reverse ys) ++ (reverse xs)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T13:15:54.523

# python - 如何将列表值与字典键进行比较并使用python制作一个新字典

> ID：15385308
> 
> 赞同：8
> 
> 时间：2013-03-13T12:26:28.903
> 
> 标签：python, list, dictionary, generator

我有一个这样的列表：

```
lis = ['Date', 'Product', 'Price'] 
```

我想将其与以下内容进行比较：

```
dict = {'Date' : '2013-05-01', 'Salary' : '$5000', 'Product' : 'Toys', 'Price' : '$10', 'Salesman' : 'Smith'} 
```

我想将列表的每个项目与字典的键进行比较并制作一个新字典。
我尝试过的是：

```
n = {}
for k,v in dict.items():
    for i in lis:
        if i==k:
            n[k] = v 
```

输出：

```
n = {'Date' : '2013-05-01', 'Product' : 'Toys', 'Price' : '$10'} 
```

这行得通，但我想通过生成器来做——有人可以帮我做吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T12:28:06.337

而是将其视为`lis`一个集合，因此您可以使用[字典视图](http://docs.python.org/2/library/stdtypes.html#dictionary-view-objects)和交集：

```
# python 2.7:
n = {k: d[k] for k in d.viewkeys() & set(lis)}

# python 3:
n = {k: d[k] for k in d.keys() & set(lis)} 
```

或者，您可以使用简单的 dict 理解和`in`测试`d`：

```
# python 2.6 or older:
n = dict((k, d[k]) for k in lis if k in d)

# python 2.7 and up:
n = {k: d[k] for k in lis if k in d} 
```

这假定并非所有值 in`lis`都会在`d`; 如果它们总是存在，则`if k in d`可以放弃测试。

对于您的具体情况，第二种形式要快得多：

```
>>> from timeit import timeit
>>> timeit("{k: d[k] for k in d.viewkeys() & s}", 'from __main__ import d, lis; s=set(lis)')
2.156520128250122
>>> timeit("{k: d[k] for k in lis if k in d}", 'from __main__ import d, lis')
0.9401540756225586 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:28:56.667

```
filtered_dict = dict((k, original_dict[k]) for k in lis if k in original_dict) 
```

或者，如果您有 2.7+：

```
filtered_dict = {k: original_dict[k] for k in lis if k in original_dict} 
```

如果要使用生成器：

```
item_generator = ((k, original_dict[k]) for k in lis if k in original_dict) 
```

生成器将产生`(key, value)`对。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-19T14:04:35.487

对于 Python 3.6

```
dict_keys_list = list(dict.keys())
dict_keys_list.sort()
for key in dict_keys_list:
     if key in lis:
          print("Key is present") 
```

您希望将键列表与字典键进行比较的另一种方法。

```
person = { 'name' : 'Don', 'nickname' : 'John', 'age' : 45, 'salary' : 50000, 'place' : 'Monaco, Europe' }
compare_list = ['nickname', 'place', 'name', 'salary', 'age']
person_keys_list = list(person.keys())
person_keys_list.sort()
compare_list.sort()
person_keys_list == compare_list # Gives you True 
```

# c# - 如何简化此方法的表达式参数？

> ID：15385311
> 
> 赞同：4
> 
> 时间：2013-03-13T12:26:38.310
> 
> 标签：c#, selenium, lambda, functional-programming, expression

无论如何我可以将这个方法更改为不需要对象，而只需传递一个参数表达式：

```
protected void FillInTextFor<T>(T obj, Expression<Func<T, object>> property)
{
    var memberExpression = (MemberExpression)property.Body;
    var propertyInfo = (PropertyInfo)memberExpression.Member;
    // read value with reflection
    var value = (string)propertyInfo.GetValue(obj, null);
    // use the name and value of the property
    FillInText(propertyInfo.Name, value);
}

    protected void FillInText(String elementId, String text)
    {
        VerifyElementPresent(elementId);
        Driver.FindElement(By.Id(elementId)).Clear();
        Driver.FindElement(By.Id(elementId)).SendKeys(text);
    } 
```

叫像
`var personToCreate = new PersonBuilder().RandomFirstName().Build(); FillInTextFor(personToCreate, a => a.FirstName);`

我只想说`FillInTextFor(_ => personToCreate.FirstName);`或类似的话

我们正在尝试为 Selenium 测试制作辅助方法。我想传递一个对象并选择一个属性，它会自动使用属性的名称作为元素 id，并将文本作为字符串的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:39:48.340

您可以像这样创建重载：

```
protected void FillInTextFor<T>(Expression<Func<T>> property)
{
    var memberExpression = (MemberExpression)property.Body;
    var propertyInfo = (PropertyInfo)memberExpression.Member;
    var compiled = property.Compile();
    var value = compiled();
    FillInText(propertyInfo.Name, value as string);
} 
```

并使用以下方法调用它：

```
var personToCreate = new PersonBuilder().RandomFirstName().Build();
FillInTextFor(() => personToCreate.FirstName); 
```

# spring-mvc - @PathVariable 参数值包含“/”字符后出现问题，使用 Spring MVC

> ID：15385312
> 
> 赞同：0
> 
> 时间：2013-03-13T12:26:40.313
> 
> 标签：spring-mvc

我有一个用例。Spring MVC REST Url使用GET方法接收内容的代码如下：

```
@RequestMapping("/q/{key}")
public String query(@PathVariable() String key, Model model){
    //todo`
} 
```

但是前端有这样一个请求：`/q/SiGeC%2FSi%E5%BC%82%E8%B4%A8%E7%BB%93`。`%2F`解码字符`/`。控制器无法匹配映射请求。

我应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:25:46.007

您可以在路径变量中包含正则表达式，如下所示：

```
@RequestMapping("/q/{key:.*}") 
```

这将抓住 /q/ 之后的所有内容。或者您可以使其成为更具体的正则表达式以匹配您实际期望的模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T07:08:52.527

@PathVariable的注解可能无法解决这个问题。最后使用变通方法解决了。代码如下：

```
@RequestMapping("/q/**") 
```

# primefaces - Primefaces Lazyload + 数据表 + lazyDataModel

> ID：15385315
> 
> 赞同：0
> 
> 时间：2013-03-13T12:26:50.887
> 
> 标签：primefaces, datatable

我进行了研究，发现`lazyload`和 dataTable 存在许多问题，但没有一个解释我遇到的问题。我实际上已经在 Primefaces 网站上发布了这个问题，但没有得到任何答案。我的问题要么太愚蠢，要么太复杂。

我们将 primefaces 库从 3.1.1 更新到 3.5，我们的数据表`LazyLoad`停止工作。基本上 DataModel 已经改变了，所以我基于 Primefaces Showcase 场景实现了一个新的。

> 错误是：java.lang.UnsupportedOperationException：未实现延迟加载。

问题是它是由类实现的，`LazyMethodDataModel`如下面的代码所示。当我调试时，调用了构造函数，但在调用加载方法之前抛出了错误。

有什么想法吗？先感谢您。如果您需要更多信息，请告诉我。

```
 public class LazyMethodDataModel_new extends LazyDataModel<Produto> {
@Override
public List<Produto> load(int first, int pageSize, List multiSortMeta, Map filters) { 
   generic.setRow(first);
   generic.setPage(pageSize);
  List objts = (List) Reflection.getObjectByInvokeMethod(crud, method, generic);
   return objts;

}
public LazyMethodDataModel_new(CrudFacade crud,String method,String   methodCount,GenericModel<?> generic) {

    this.crud = crud;
    this.generic = generic;        
    this.method = method;        
    size = (Integer) Reflection.getObjectByInvokeMethod(crud, methodCount, generic);
    setRowCount(size);
}
@Override
public void setRowIndex(int rowIndex) {
    /*
     * The following is in ancestor (LazyDataModel):
     * this.rowIndex = rowIndex == -1 ? rowIndex : (rowIndex % pageSize);
     */
    if (rowIndex == -1 || getPageSize() == 0) {
        super.setRowIndex(-1);
    }
    else
        super.setRowIndex(rowIndex % getPageSize());
}} 
```

前端

```
<p:dataTable id="listProduto" var="model" value="#{adminProdutoBean.lazyDataModel}" 
             paginator="true" rows="10"  
             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
             rowsPerPageTemplate="5,10,15" lazy="true"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:41:47.440

`load`LazyDataModel中有两种方法：

```
public List<T> load(int first, int pageSize, String sortField, SortOrder sortOrder, Map<String,String> filters) {
    throw new UnsupportedOperationException("Lazy loading is not implemented.");
}

public List<T> load(int first, int pageSize, List<SortMeta> multiSortMeta, Map<String,String> filters) {
    throw new UnsupportedOperationException("Lazy loading is not implemented.");
} 
```

你还需要实现一个（另外，我记得实现第一个就足够了）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-29T13:32:31.303

如果您没有启用多重排序，则必须覆盖其他加载方法。

```
 public List<T> load(int first, int pageSize, String sortField, SortOrder sortOrder, Map<String,String> filters) {
    throw new UnsupportedOperationException("Lazy loading is not implemented.");
} 
```

您尝试覆盖的加载方法仅在您使用多重排序时

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-18T14:11:43.423

你试过这个： http: [//forum.primefaces.org/viewtopic.php](http://forum.primefaces.org/viewtopic.php?f=3&t=29946) ?f=3&t=29946 ？它对我有用（除了我正在研究的选择功能）。

# visual-studio - Visual Studio - 将文件标记为可选

> ID：15385317
> 
> 赞同：1
> 
> 时间：2013-03-13T12:26:54.000
> 
> 标签：visual-studio

在 Visual Studio 中，我们有一个自定义 user.config 文件，开发人员可以使用它来设置自定义应用程序设置。我不想将此文件签入源代码管理，因为如果未找到 user.config，构建服务器将使用默认设置。

如果 Visual Studio 缺少该文件，则会引发“找不到文件”编译时异常。

在 csproj 构建文件中，如果找不到，是否可以在编译时将文件标记为忽略？

# ios - UItextfield 用空字符串初始化？不为空？也没有？

> ID：15385319
> 
> 赞同：2
> 
> 时间：2013-03-13T12:26:59.500
> 
> 标签：ios, objective-c, uitextfield, ternary-operator

我有一个 uitextfield，当它被初始化并且我没有在其中输入任何值时，我发现 uitextfield 的值不是 null 也不是 nil。

```
 NSString *notes = (notesField.text)?(notesField.text):@"hello";
    NSLog(@"notes: %@",notes); 
```

它不返回任何笔记

```
 NSString *notes1;

//or use legnth

    if ([notesField.text isEqual:@""]) {
     notes1=@"hello";
        NSLog(@"empty textfield: %@",notes1);
        //then it returns "hello"
    }
    else
    {
        notes1=notesField.text;
        NSLog(@"not empty textfield: %@",notes1);
    } 
```

这是为什么？我还可以使用三元运算符吗？像这样 ？

```
NSString *notes = ([notesField.text length])?(notesField.text):@"hello"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:36:38.727

您可以使用

```
NSString *notes = ([notesField.text length])?(notesField.text):@"hello"; 
```

或者

```
NSString *notes = ([notesField.text length]==0)?@"hello":(notesField.text); 
```

或者

```
NSString *notes = ([notesField.text isEqualToString:@""])?@"hello":(notesField.text); 
```

对于`UITextField`没有条目的情况（初始情况），使用第二个或第三个选项会更好。`NSString *notes = ([notesField.text length])?@"hello":(notesField.text);`不会像您期望的那样正常工作，因为即使文本字段中没有文本`notesField.text`也会如此。`TRUE`所以你应该使用`notesField.text.length`or `[notesField.text isEqualToString:@""]`。

希望现在清楚。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-16T05:09:07.867

[UITextField](https://developer.apple.com/library/ios/documentation/uikit/reference/UITextField_Class/Reference/UITextField.html)状态的文档

> **text**
> 
> 文本字段显示的文本。
> 
> @property(nonatomic, copy) NSString *text
> 
> **Discussion**
> 这个字符串默认是@""。

注意：如果在 Xcode 5.02 或 5.1 下编译并在 iOS7 之前的 iOS 中运行，则 UITextField.text 初始化为 nil。如果在 iOS7+ 中运行，则初始化为 @""。

如果在 Xcode 4.6.3 或更早版本中编译，则 UITextField.text 已（始终）被初始化为 @""，根据文档。

雷达错误：16336863

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:45:55.460

`UITextField`必须使用非零空字符串初始化自身。在您不关心字符串是空还是 nil 的情况下，您可以简单地检查`length`属性：

```
if (!notesField.text.length) {
    // text is nil or empty
} 
```

或者使用三元运算符：

```
NSString *s = notesField.text.length ? notesField.text : @"Default"; 
```

这是可行的，因为将`-length`选择器发送到 nil 对象将返回默认值 0。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-13T12:43:31.393

这种方法会很好用。

至于为什么它是一个空字符串而不是 nil，通常返回 nil 是不好的做法，除非您想指示错误或未初始化状态。一个空的文本字段有一个值。它只是一个空字符串。

# c# - JQGrid 一次获取页面级数据

> ID：15385324
> 
> 赞同：0
> 
> 时间：2013-03-13T12:27:16.413
> 
> 标签：c#, jquery, asp.net-mvc, jqgrid

目前我已经实现了 jqgrid，它从数据库中获取数据并将 JSON 数据返回到 JQGRID。

JQGrid 调用

```
 rowNum: 10,
        rowList: [5, 10],
        url: "/Home/GetDataFromEntity" 
```

从 C# 返回的数据

```
return Json(result, JsonRequestBehavior.AllowGet); 
```

我正在尝试的是，如果页面只有 10 条记录，我想从数据库中获取 10 条记录，如果他们点击到下一页，我想获取下 10 条数据，因为如果数据很大，我不想将所有数据都带入内存我认为这将是一场演出。

我该如何实现呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:37:11.543

这是相当简单的。基本上，您需要做的就是实现分页，您只需向数据库询问您要显示的数据页面。您将看到 jqGrid 将向您的控制器提供此信息，以便您可以在检索数据时使用。

控制器将通过以下方式获取这些数据（我不知道您的后端技术堆栈，所以这里是 C# 代码）：

```
public ActionResult GridDataFetch(string sidx, string sord, int page, int rows, bool _search, string filters)
{
.... 
```

然后，当您检索数据时，您可以向数据库询问用户想要的数据页面，而无需检索整个数据集。这可能比看起来更复杂，但对于基础来说，它就像类似的东西一样简单（再次 C# 代码）

```
var pagedQuery = dataset.OrderBy(sidx + " " + sord).Skip((page - 1) * rows).Take(rows); 
```

可以看到上面我们按照用户指定的方式对数据进行排序，jqGrid用`sidx`&传递`sord`，然后我们通过 跳过我们感兴趣的页面之前的所有记录`skip`，然后我们取`rows`我们感兴趣的。这又是是一种用于抓取一页数据的 C# 方法，但任何设置都应该具备基础知识。作为旁注，如果您通过网格或其他逻辑进行任何过滤，您将在此调用之前过滤您的数据集。

然后，您将传递这个分页查询，就像您通常在 JSON 中所做的一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:32:40.673

您必须实施`server side pagination`以实现这一目标。

我在java中实现了这样的：（你使用的是c#）

```
int limit = Integer.parseInt(request.getParameter("rows")); // get how many rows we want to have into the grid
String sidx = request.getParameter("sidx"); // get index row - i.e. user click to sort
String sord = request.getParameter("sord"); // get the direction
int start = (limit* page) - limit;
String rows = request.getParameter("rows");

String query = "select * from ( select a.*, ROWNUM rnum from ( select * from CRM_PROT_STAGES  where  PROTOCOL_ID = '"+param +"' ) a where ROWNUM <= "+ limit +")where rnum  >="+start; 
```

使用上面的参数，然后把条件放在上面的查询中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:38:04.780

您需要为此使用分页。您可以在服务器端使用`.Take`和方法`.Skip`

获得结果集后，您可以执行以下操作

```
var smallResultSet = fullResultSet.Skip(request.PageIndex * request.RecordsCount).Take(request.RecordsCount).ToList(); 
```

在这里，我假设您在`fullResultSet`变量中获取结果集，而不是对其进行过滤并将其存储在`smallResultSet`. 当您将网格绑定到控制器操作时，将传递请求参数。

之后迭代`smallResultSet`并创建您的 JSONResult。

# colors - 更改 EditorGUI.ProgressBar 的颜色？

> ID：15385327
> 
> 赞同：2
> 
> 时间：2013-03-13T12:27:21.227
> 
> 标签：colors, progress-bar, unity3d

我想显示一个 ProgressBar。我正在使用这段代码：

```
EditorGUI.ProgressBar(Rect(3,45,100-6,20),20/700.0, "Armor"); 
```

我想将 ProgressBar 的颜色从浅蓝色更改为红色。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:06:21.110

就目前而言，您似乎无法做到。但是，我有一个类似的问题，我想要一个非常定制的栏，用不同的颜色来表示不同的东西。我最终使用了[EditorGUI.DrawPreviewTexture](http://docs.unity3d.com/Documentation/ScriptReference/EditorGUI.DrawPreviewTexture.html)。如果您初始化要用作 Texture2D 的颜色，然后使用正确放置的矩形将它们传递给该函数，您可以创建可以更改大小和位置的栏的部分以提供独立进度条的外观，特别是如果您在函数中保持位置和大小的更新`Update()`。

# php - twig：如何在不使用 symfony 的情况下添加 Twig 扩展文件

> ID：15385330
> 
> 赞同：0
> 
> 时间：2013-03-13T12:27:26.220
> 
> 标签：php, twig

我目前使用 v1.12.2 Twig 作为独立的模板引擎。

我在一个名为 UtilityExtension.php 的文件中编写了一个名为 Utility_Twig_Extension 的 Twig 扩展

和一个 index.php

```
//index.php
require_once '../vendor/twig/twig/lib/Twig/Autoloader.php';
Twig_Autoloader::register();

$loader = new Twig_Loader_Filesystem(OEBPS);
$twig = new Twig_Environment($loader, array(
    'cache' => APP . DS . 'cache',
));

require_once '../vendor/twig/twig/ext/utility/UtilityExtension.php';

$twig->addExtension(new Utility_Twig_Extension()); 
```

这里是 UtilityExtension.php //UtilityExtension.php 命名空间 UtilityTwigExtension;

```
class Utility_Twig_Extension extends Twig_Extension
{
    public function getName()
    {
        return "utility";
    }

} 
```

这是我的目录结构：

```
src
 |__app
 |    |__ index.php
 |__vendor
      |__twig
           |__twig
               |__ext
               |__lib 
```

我什至无法正确加载文件。

我已经将问题追溯到扩展类试图扩展 Twig_Extension.php 的事实。

所以我`require_once`是Twig_Extension，它是UtilityExtension.php 中的Extension.php 文件。但是，仍然无法正常工作。

大多数文档都谈到在 Symfony 的上下文中添加自定义的 Twig 扩展。

我正在使用独立的 Twig，所以我还没有找到任何关于它的文档。

请指教。

**更新1：**

通过不工作，我的意思是我收到 500 服务器错误。我跑了 error_reporting(E_ALL) 无济于事。

当我`extends Twig_Extension`从扩展类中删除单词时，错误就得到了缓解。

**UPDATE2：** 我意识到这是一个命名空间问题。因为我 `namespace UtilityTwigExtension;`从 UtilityExtension.php 中删除了，并且服务器 500 错误消失了。

所以我把`namespace UtilityTwigExtension;`后面然后打电话

```
require_once '../vendor/twig/twig/ext/utility/UtilityExtension.php';

$twig->addExtension(new UtilityTwigExtension\Utility_Twig_Extension()); 
```

错误又回来了。

问题：如果我坚持使用命名空间，如何调用 TwigExtension？有没有更好的使用命名空间的方法？

**更新3：**

尝试 Luceos 回答后，我仍然得到服务器 500。

```
error_reporting(E_ALL);
require_once 'constants.php';

require_once 'ZipLib.php';

require_once '../vendor/twig/twig/lib/Twig/Autoloader.php';
Twig_Autoloader::register();

$loader = new Twig_Loader_Filesystem(OEBPS);

$twig = new Twig_Environment($loader, array(
    'cache' => APP . DS . 'cache',
));

require_once '../vendor/twig/twig/ext/utility/UtilityExtension.php';

use UtilityTwigExtension\Utility_Twig_Extension;

$twig->addExtension(new Utility_Twig_Extension()); 
```

UtilityExtension.php

```
namespace UtilityTwigExtension;

class Utility_Twig_Extension extends Twig_Extension
{
    /**
     * Returns the name of the extension.
     *
     * @return string The extension name
     */
    public function getName() {
        return 'utility';
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:46:09.937

因此，让我们将评论放在一个答案中，然后从那里继续前进，不要挤满评论：

首先从正确的命名空间调用扩展：

```
use UtilityTwigExtension\Utility_Twig_Extension;
$twig->addExtension(new Utility_Twig_Extension()); 
```

使用和命名空间调用通常放在文件的顶部。

您也可以尝试使用以下方法直接调用命名空间 + 对象：

`$twig->addExtension(new UtilityTwigExtension\Utility_Twig_Extension());`

**更新 3**

Utility_Twig_Extension 从不存在的命名空间 UtilityTwigExtension 扩展 Twig_Extension。我假设 Twig_Extension 不在任何命名空间中，因此您将使用 \Twig_Extension：

```
namespace UtilityTwigExtension;

class Utility_Twig_Extension extends \Twig_Extension
{
    /**
     * Returns the name of the extension.
     *
     * @return string The extension name
     */
    public function getName() {
        return 'utility';
    }

} 
```

# c# - 重构路由系统生成的 URL

> ID：15385333
> 
> 赞同：0
> 
> 时间：2013-03-13T12:27:31.517
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

嗨，我一直在尝试解决一个与路由和链接有关的问题，但没有运气。

我有一个存储许多书籍的应用程序。每本书都有显示其详细信息的链接。为了获得详细信息，我在链接中使用每本书的 ID。这是链接的代码：

```
@Html.ActionLink(book.Name, "Details", new { bookId = book.Id , book = book.BookUrl }) 
```

当用户单击其中一个链接时，这是正在调用的控制器，我不允许修改它：

```
 public ActionResult Details (int bookId){..} 
```

这就是我的链接的显示方式：

```
http://localhost:51208/Home/Details/C-sharp-5.0-in-a-Nutshell-The-Definitive-Reference/BookId-2 
```

我想要以某种方式停止显示控制器操作和 BookId。所以我的链接看起来像这样：

```
http://localhost:51208/C-sharp-5.0-in-a-Nutshell-The-Definitive-Reference 
```

据我所知，到目前为止，没有办法使用路由的标准功能来做到这一点，所以我想我必须以某种方式扩展它的功能。

我一直在[PRO ASP.NET MVC 4](https://rads.stackoverflow.com/amzn/click/com/1430242361)中阅读有关此内容的内容，并且根据我所阅读的内容，我必须创建一个类并从`RouteBase`.

这将导致必须实现两种方法，一种是`RouteData GetRouteData(HttpContextBase httpContext)`，另一种是`VirtualPathData GetVirtualPath(RequestContext requestContext, RouteValueDictionary values)`

到目前为止，我只知道它`GetVirtualPath`负责生成链接，所以我认为这是我必须创建实现以获得我想要的功能的地方。

如果是这种情况，有人可以告诉我应该如何实现这种方法吗？

如果这不是要走的路线，那么我怎样才能实现我想要的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:41:20.023

你可以在你`RouteConfig.cs`的下面添加一条额外的路线：

```
 routes.MapRoute(
        "Book Details", // Route name
        "{ bookName }", // URL with parameters
             new { controller = "BookController",
                   action = "Details", 
                   name = UrlParameter.Optional
                 } // Parameter defaults
        ); 
```

相应地更改您的`Details`方法，但其参数必须是`bookName`.

**笔记 ：**

将此路线放在您为避免歧义而定义的所有路线的底部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T03:42:26.793

您可以通过实现自己的 RouteBase 版本来做到这一点。您需要同时实现`GetRouteData`和`GetVirtualPath`。

您的实现`GetRouteData`需要检查您的图书数据库，以查看 URL 是否包含数据库中的图书名称，然后返回正确的路线数据，例如

```
public class BookRoute : RouteBase
{
    public override RouteData GetRouteData(HttpContextBase httpContext)
    {
        var url = httpContext.Request.AppRelativeCurrentExecutionFilePath;
        url = url.Replace(@"~/", "");

        var book = getBookWithTheNameThatMatchesTheUrl(url);

        if (book != null)
        {
            var rd = new RouteData(this, new MvcRouteHandler());
            rd.Values.Add("controller", "Home");
            rd.Values.Add("action", "Details");
            rd.Values.Add("bookId", book.Id);
            return rd;
        }

        return null;
    } 
```

并且您的实现`GetVirtualPath`需要做相反的事情 - 找到具有给定 ID 的书名，并返回适当的 URL。

例如

```
public override VirtualPathData GetVirtualPath(RequestContext requestContext, 
                                               RouteValueDictionary values)
{
    if ((string)values["action"] == "Details" && 
        (string)values["controller"] == "Home")
    {
        var bookId = (int)values["bookId"];
        var bookName = LookUpTheBookNameForTheBookWithThisId(bookId);
        return new VirtualPathData(this, bookName);    
    }

    return null;
} 
```

最后，添加`routes.Add(new BookRoute());`您注册路由的位置以启用检查此新路由。

鉴于该方法`getBookWithTheNameThatMatchesTheUrl()`会针对每个页面访问数据库，因此您需要缓存查找。

# mysql - Mysql - 优化查询的帮助

> ID：15385335
> 
> 赞同：1
> 
> 时间：2013-03-13T12:27:32.657
> 
> 标签：mysql, optimization

我有这个查询：

```
SELECT bi.id, 
       bi.location, 
       bi.expense_group, 
       bi.level, 
       bi.is_active, 
       bi.type, 
       full_name, 
       ( bl.bud_amount )                                     AS BudgetAmount, 
       ( COALESCE(( ( bl.bud_amount * 3 ) - ( 
                    + bal.bal_amount1 + bal.bal_amount2 
                    + bal.bal_amount3 ) ), 0) ) AS Difference, 
       ( COALESCE(Round(( + bal.bal_amount1 + bal.bal_amount2 
                          + bal.bal_amount3 ) / 3), 0) )     AS Average, 
       bal.bal_amount1                                       AS BAL1, 
       bal.bal_amount2                                       AS BAL2, 
       bal.bal_amount3                                       AS BAL3 
FROM   (SELECT * 
        FROM   budget_items bi 
        WHERE  bi.location IS NOT NULL) AS bi 
       LEFT JOIN (SELECT budget_item_id, 
                         Sum(CASE 
                               WHEN budget_id = 21491 THEN amount 
                             END) AS bud_amount 
                  FROM   budget_lines 
                  GROUP  BY budget_item_id) AS bl 
              ON bl.budget_item_id = bi.id 
       JOIN (SELECT budget_item_id, 
                    Ifnull(Sum(CASE 
                                 WHEN balance_id = 12841 THEN amount 
                               END), 0) AS bal_amount1, 
                    Ifnull(Sum(CASE 
                                 WHEN balance_id = 18647 THEN amount 
                               END), 0) AS bal_amount2, 
                    Ifnull(Sum(CASE 
                                 WHEN balance_id = 18674 THEN amount 
                               END), 0) AS bal_amount3 
             FROM   balance_lines 
             GROUP  BY budget_item_id) AS bal 
         ON bal.budget_item_id = bi.id 
ORDER  BY bi.location 
```

这需要很多时间。在budget_lines 和balance_lines 表中，每个表都有超过5,000,000 行。

我还附上了查询的解释，所以你将能够看到问题。每个表中的所有 id 都被索引。是否有任何列会被索引加速查询？或者也许我需要改变它。

*** LEFT JOIN 是必要的，因为我需要从 nudget_items 中获取所有项目，即使它们不存在于 balance/budget_line 表中。

架构是：每个预算都有它的budget_lines。每个余额都有它的 balance_lines。该查询的目的是让一个表来总结预算和几个余额之间的差异。

![在此处输入图像描述](../Images/09be12f72a5c2146fa49a08fd2893872.png)

你可以在这里看到更大的图像：http: [//i.stack.imgur.com/dlF8V.png](https://i.stack.imgur.com/dlF8V.png)

**编辑：** @Sebas 回答后： ![在此处输入图像描述](../Images/3c8ce01e12f4e8821f71d20a4a522b61.png)

对于@sabes 的饥饿感，我在这里放了 DESCRIBE：budget_items ![在此处输入图像描述](../Images/6fd7e8950e9dee7fcfdbde2ddb9e78cf.png)

预算线 ![在此处输入图像描述](../Images/ff939ff516c84ecbb658aea3e6588188.png)

平衡线 ![在此处输入图像描述](../Images/a99c008a7912f4287adf8e8fad389206.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:47:13.613

也许是这样的；但没有样本数据和索引很难看到

```
SELECT * 
FROM   budget_items bi 
WHERE  bi.location IS NOT NULL) AS bi 
INNER JOIN  --Added inner for clarity  -changed order I just like my inner's before my outers.
  (SELECT budget_item_id, Sum(CASE WHEN balance_id = 12841 THEN coalesce(amount,0) END), 0) AS bal_amount1, 
                          Sum(CASE WHEN balance_id = 18647 THEN coalesce(amount,0) END), 0) AS bal_amount2, 
                          Sum(CASE WHEN balance_id = 18674 THEN coalesce(amount,0) END), 0) AS bal_amount3 
   FROM   balance_lines 
   WHERE balance_ID in (12841, 18647, 18674) --This way balance_IDs which aren't in this list don't even get evaluated
   GROUP  BY budget_item_id) AS bal 
 ON bal.budget_item_id = bi.id 
LEFT JOIN 
 (SELECT budget_item_id, Sum(CASE WHEN budget_id = 21491 THEN coalesce(amount,0) END) AS bud_amount 
  FROM   budget_lines 
  WHERE budget_Id = 21491 --Again since we only care about anything but budget_ID 21491, we can limit the results to JUST that 
  GROUP  BY budget_item_id) AS bl 
 ON bl.budget_item_id = bi.id 
```

# linux - 使用基于名称的虚拟主机进行 Webmin 本地开发

> ID：15385341
> 
> 赞同：0
> 
> 时间：2013-03-13T12:27:47.050
> 
> 标签：linux, virtualhost, webmin

嗨，我正在尝试为我的 localhost 命名基于虚拟主机。我以前使用 wamp 和基于名称的虚拟主机，但现在我在 ubuntu 上工作。我认为 webmin 可以很容易，但是当我创建第一个虚拟主机时，所有请求都重定向第一个虚拟主机甚至 localhost ，第二个虚拟主机和phpmyadmin。

那么我如何设置 webmin 以分别访问它们中的每一个。

主机配置

```
127.0.0.1 www.adres1.com #working fine
127.0.0.1 adres1.com #working fine
127.0.0.1 www.adres2.com
127.0.0.1 adres2.com 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:58:24.667

这是因为您使用的是本地服务器，并且默认情况下您的所有域将搜索 127.0.0.1 或您的 IP。因此，除非您在区域文件中将它们声明为 CNAME 或在主机文件中进行条目，否则它们都将作为单个域的别名工作。谢谢... ：）

# java - JAVA 等于替代

> ID：15385344
> 
> 赞同：0
> 
> 时间：2013-03-13T12:27:52.540
> 
> 标签：java, operators

我只是想知道是否有以下运算符的替代方法：

```
if (f == 0){
    System.out.print("");
} else if (i %2 == 1){
    System.out.print("; ");
} 
```

更清楚地说，我想要另一种编写 if 语句的 "==" 和 else if 语句的方法`%2 == 1`。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:33:04.763

`System.out.print(f!=0 && i%2==1 ? "; " : "");`

除了模数之外，您可以通过位与标记除最后一位之外的 i 的所有位。

的替代方案`i%2`是`i&1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:40:23.513

在java 7中你可以这样比较

```
int result = Integer.compare(f, 10); 
```

方法说明

```
public static int compare(int x,
          int y)

Compares two int values numerically. The value returned is identical to what would be returned by:

    Integer.valueOf(x).compareTo(Integer.valueOf(y))

Parameters:
    x - the first int to compare
    y - the second int to compare
Returns:
    the value 0 if x == y; a value less than 0 if x < y; and a value greater than 0 if x > y
Since: 1.7 
```

取自官方文档

[http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#compare%28int,%20int%29](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#compare%28int,%20int%29)

在Java 6中

```
int result = Double.compare(f, 10); 
```

方法说明

```
 compare

public static int compare(double d1,
                          double d2)

    Compares the two specified double values. The sign of the integer value returned is the same as that of the integer that would be returned by the call:

        new Double(d1).compareTo(new Double(d2))

    Parameters:
        d1 - the first double to compare
        d2 - the second double to compare 
    Returns:
        the value 0 if d1 is numerically equal to d2; a value less than 0 if d1 is numerically less than d2; and a value greater than 0 if d1 is numerically greater than d2.
    Since:
        1.4 
```

取自官方文档

[http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#compare%28double,%20double%29](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#compare%28double,%20double%29)

**您可以根据您的要求使用任何方法**

**我已经测试了他们两个**

**请参阅我为 java 6 [http://ideone.com/56dm1T](http://ideone.com/56dm1T)测试的解决方案， 用于 java 7 [http://ideone.com/mEjt6W](http://ideone.com/mEjt6W)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:37:20.663

等于运算符`==`比较对象情况下的引用和原始类型情况下的实际值。

可以替换此运算符的一种情况`equals(Object obj)`是使用原始类型的包装器对象时。

因此，如果有两个`int`,`a`和`b`, 并且您通过以下方式获得它们的包装器：

```
Integer objA = Integer.valueOf(a);
Integer objB = Integer.valueOf(b); 
```

`a == b`给出与 相同的结果`objA.equals(objB)`。

# linux - Linux 多路径可以用来管理非 SCSI 块设备吗

> ID：15385347
> 
> 赞同：0
> 
> 时间：2013-03-13T12:27:57.513
> 
> 标签：linux

我熟悉 Linux Multpath 以及它如何检测 SCSI 设备 (/dev/sd*) 并将它们映射到单个设备。我可以指示“多路径/设备映射器”映射/管理不是 SCSI 设备的块设备吗？

谢谢你，艾哈迈德。

# apache - 为特定目录下的丢失文件返回 404

> ID：15385349
> 
> 赞同：0
> 
> 时间：2013-03-13T12:28:01.043
> 
> 标签：apache, .htaccess, redirect, error-handling

在 Apache 中，是否可以在 .htaccess 中根据文件路径返回不同的 404 页面？

例如：

```
For missing pages under http://example.com/support/*
Redirect to 404-support.php

For all else
ErrorDocument 404 /404.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:41:45.200

如果您有一个名为“support”的目录，您可以在该目录中放入一个 .htaccess 文件，它将覆盖父目录的配置。因此，在您的 / 文件夹中，您可以将其指定为

```
ErrorDocument 404 /404.php 
```

但是对于支持文件夹，放入一个新的 .htaccess 文件并输入：

```
ErrorDocument 404 /support/404.php 
```

# rest - 如何使用 RESTful 地理服务器？

> ID：15385350
> 
> 赞同：4
> 
> 时间：2013-03-13T12:28:02.620
> 
> 标签：rest, geoserver

我想将 REST 协议与在 Web 上运行的 Geoserver 一起使用，但是当我输入用于登录 Web 界面的用户名和密码时，我得到`HTTP ERROR: 401 Full authentication is required to access this resource`. 我是否需要创建具有某些权限的单独用户？可能是虚拟主机相关的问题吗？

更新：我可以使用 Web 浏览器访问现有工作区，但使用 QGIS 创建新工作区时会出现上述错误。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-12T22:06:11.653

好吧，我知道这有点晚了，但我会回答这个问题，希望其他有这个问题的人会觉得它有帮助。

REST 进程有自己的安全配置，除了 Web 界面用户之外还需要设置。这些是不同的配置，并且设置在不同的位置。REST 配置确实使用了您在 Web 界面中配置的相同用户，它只是不使用您设置的访问规则。

要设置权限，您需要编辑目录 [Geoserver_data}/security 中名为 rest.properties 的文件。

请[在此处](http://geoserver.geo-solutions.it/edu/en/rest/rest_security.html)和[此处](http://docs.geoserver.org/latest/en/user/security/rest.html)查看要在此文件中添加和编辑的内容以提供对其余服务的访问。

# spring - 使用 Git 在 Spring MVC 项目中与 Web 设计师合作

> ID：15385352
> 
> 赞同：1
> 
> 时间：2013-03-13T12:28:11.400
> 
> 标签：spring, git, spring-mvc

我正在与一位网页设计师合作，该设计师正在为我的 Spring MVC 项目制作 JSP 页面（实际上是 HTML 页面）。我们让设计师制作 HTML 页面，然后我将它们添加到它们中并添加 Springs 标记。我在 git 中有我的项目，设计已经通过电子邮件将页面发送给我。

但我正在寻找更好的工作流程。如果设计师给了我 html 格式的页面，然后我添加了所有 Spring 标签并且用户想要更改设计师再次向我发送 html，我必须重做我所有的 springs 标签。有谁知道做这个流程的更好方法。如果我给他们 git 访问权限，我也不希望设计可以访问我在 git 中的完整项目。我们可以以某种方式只让他们访问一个文件夹吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:44:38.053

几个选项：

1.  通过电子邮件向设计人员发送嵌入了标记的 JSP 页面，并要求他或她将更改应用到该页面。
2.  在 git 中使用一个分支来接受设计者的 HTML 提交。将此分支合并到主干中可以重播替换令牌的步骤，只要增量更改很小（每次提交都不会重写整个 DOM）
3.  让他或她克隆您的 git 存储库。不知道你为什么害怕这样做，但有诸如保密协议之类的东西可以合法地保护自己。如果我是他或她，我会在每次与你会面时提出这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:01:34.873

请尝试维护补丁。[在这里](https://stackoverflow.com/questions/3418277/how-to-apply-git-diff-patch-without-git-installed)和[这里](https://ariejan.net/2009/10/26/how-to-create-and-apply-a-patch-with-git)阅读更多

# c# - 2个控制器如何与asp.net mvc中的1个视图通信

> ID：15385355
> 
> 赞同：0
> 
> 时间：2013-03-13T12:28:15.450
> 
> 标签：c#, asp.net-mvc

我希望一个视图可以访问 2 个控制器。我的意思是我有**Controller A**和**Controller B** 并且在视图上我有 2 个 div：**Div A**带有来自**Controller A**的内容信息和**Div b**带有来自**Controller B**的内容信息。是否可以？有人可以给我一个提示或告诉我一个简单的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:35:24.553

您需要查看部分视图：[http](http://www.dotnetfunda.com/articles/article1831-how-to-create-partial-views-mvc-tutorial-number-10.aspx) ://www.dotnetfunda.com/articles/article1831-how-to-create-partial-views-mvc-tutorial-number-10.aspx 您也可以放置视图文件进入共享文件夹并通过名称引用它：`return View("commonView");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:39:40.080

您可以通过使用局部视图来实现这一点。

创建不同的局部视图以显示来自 2ND 控制器的内容，将其呈现在已经具有来自第一个控制器的数据的第一个视图上。您可以使用以下剃刀语法呈现部分视图：

```
 @Html.Partial("name of partial view"). 
```

# knockout.js - applyBinding() 如果只调用一次就不起作用

> ID：15385359
> 
> 赞同：1
> 
> 时间：2013-03-13T12:28:20.970
> 
> 标签：knockout.js, knockout-mapping-plugin

我正在学习如何使用 knockout.js 并遇到了一些误解。

**用户界面：**

```
<ul>
    <li>
        <p>
            Caption:<span data-bind="text: object1.Caption" />
        </p>
    </li>

    <li>
        <p>
            Manufacturer: <span data-bind="text: object1.Manufacturer" />
        </p>
    </li>
</ul> 
```

**JS：**

```
var viewModel = {
          object1: ko.observable()
     }

 $(document).ready(function () {  
   ko.applyBindings(viewModel);
}
);

function getData ()
{
 var response = $.ajax({
        type: "GET",
        datatype: "json",
        url:// my URL,
        success: function (data) {

            var result = jQuery.parseJSON(data);
            viewModel = ko.mapping.fromJS(result);
            **//ko.applyBindings(viewModel);**

        }
    });
} 
```

**JSON数据：**

```
{"object1":{
  "Caption": "Some caption",
  "Manufacturer": "Some manufacturer"
}
} 
```

似乎我遵循了教程，但如果我尝试在开始时只调用一次 applyBindings(viewModel) - 它不起作用。但如果我每次在 getData() 函数中调用它，它就会起作用。

怎么了？*如何在 start 上仅使用一次applyBindings*调用使其工作？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:32:55.453

您需要使用 fromJS 的更新重载，而不是将其重新分配给 viewModel：

```
success: function (data) {
    var result = jQuery.parseJSON(data);
    ko.mapping.fromJS(result, viewModel);
} 
```

在您的情况下，您还可以使用 from JSON 方法，并将调用保存到 jQuery：

```
success: function (data) {
    ko.mapping.fromJSON(data, viewModel);
} 
```

您还需要在首次创建 viewModel 时初始化所有属性：

```
var viewModel = {
    object1: ko.observable(
    {
        "Caption": ko.observable(''),
        "Manufacturer": ko.observable('')
    })
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:29:55.973

ko.mapping.fromJS 每次调用时都会返回一个新的对象实例。这就是每次从服务器获取新数据时都需要调用 applyBindings 的原因。

如果您只想拥有一个 applyBindings，您将需要一个普通的 ViewModel 并从获取的数据中逐个更新它的属性，或者在您的 viewmodel 中使用一些自我实现的批量更新方法。

# c# - 如何计算具有实用程序类的方法经过的时间

> ID：15385360
> 
> 赞同：9
> 
> 时间：2013-03-13T12:28:23.890
> 
> 标签：c#, asp.net, .net

我正在编写一个非常简单的实用程序类，目的是测量传入的任何方法（任何类型）的执行时间。

在我的情况下`Membership.ValidateUser(model.UserName, model.Password)`，返回布尔所以我得到一个例外。

我想是否可以编写一个这种类型的实用程序类，以及如何修复它的代码示例。使用动态而不是动作有意义吗？

```
Tracing.Log(Membership.ValidateUser(model.UserName, model.Password), "Membership.ValidateUser"); 
```

* * *

```
public static class Tracing
        {
            public static void Log(Action action, string message)
            {
                // Default details for the Log
                string sSource = "TRACE";
                string sLog = "Application";

                // Create the Log
                if (!EventLog.SourceExists(sSource))
                    EventLog.CreateEventSource(sSource, sLog);

                // Measure time Elapsed for an Action
                Stopwatch stopwatch = Stopwatch.StartNew();
                action();
                stopwatch.Stop();
                TimeSpan timeElapsed = stopwatch.Elapsed;

                // Write the Log
                EventLog.WriteEntry(sSource, "TIME-ELAPSED: " + timeElapsed .ToString() + message, EventLogEntryType.Warning, 234);
            }
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T12:33:31.077

您当前的代码尝试执行`ValidateUser`并将*结果*用作方法参数。你想在*不*先执行的情况下传递一个动作`ValidateUser`。

您只需将方法调用转换为使用 lambda 表达式来创建委托：

```
Tracing.Log(() => Membership.ValidateUser(model.UserName, model.Password), 
            "Membership.ValidateUser"); 
```

（动态打字根本不会影响这一点。）

请注意，为单个方法执行计时通常会给您带来非常嘈杂的结果，除非它是一个相当长的方法调用。通常要对单个方法进行基准测试，您可能会多次执行该方法，直到您花费相当多的时间执行它。使用`Stopwatch`帮助，但它并没有超越这样一个事实，即您的方法可能需要很少的滴答声才能完成，如果线程被抢占，这将对结果产生不成比例的影响。

编辑：我假设您想纯粹将其用于基准测试。如果您尝试在实际应用程序中进行此跟踪，您将需要一种侵入性较小的方法。以[Mini-MVC-Profiler](https://code.google.com/p/mvc-mini-profiler/)为例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:35:57.303

无意冒犯，但你的设计方法对我来说似乎倒退了。我假设您的业务目标更多是关于验证用户而不是计时代码操作。如果这不正确，请忽略我。:)

如果我是你，我会在你的验证中注入一个计时/跟踪类，而不是相反。您可以通过多种方式使用依赖注入（其中一种框架或简单的构造函数注入），并在提供时使用它来进行计时。

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:36:57.653

如果您可以修改测量的方法，则可以引入一个类，该类将在创建时启动计时器，并在处理时停止它。而且，如果超过某个阈值，它将创建一条日志消息

用法将是：

```
using(var tm = new TimeMeasurementThreshold(TimeSpan.FromSeconds(1),"Sending mail block",logger)){
 // measured code here 
}

public class TimeMeasurementThreshold : IDisposable
    {
        private readonly Logger logger;

        private readonly TimeSpan thresholdTime;

        private readonly string codeBlockName;

        private readonly TimeMeasurement timeMeasurement;

        public TimeMeasurementThreshold(TimeSpan thresholdTime, string codeBlockName, Logger logger)
        {
            this.logger = logger;
            this.thresholdTime = thresholdTime;
            this.codeBlockName = codeBlockName;

            timeMeasurement = new TimeMeasurement();
        }

        public void Dispose()
        {
            TimeSpan elapsed = timeMeasurement.Elapsed;

            if (elapsed >= thresholdTime)
            {
                logger.Debug("{0} execution time is {1:N0}ms", codeBlockName, elapsed.TotalMilliseconds);
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:39:40.070

您可以轻松地使用 lambda 将传递给另一个方法的操作的结果分配给其他方法，例如：

```
using System;

namespace Demo
{
    public static class Program
    {
        private static void Main(string[] args)
        {
            bool result = false;

            Tracing.Log(() =>
            {
                result = test("");  // Assign to result.
            }, "Message");

            Console.WriteLine(result);
        }

        private static bool test(string value)
        {
            return string.IsNullOrEmpty(value);
        }
    }

    public static class Tracing
    {
        public static void Log(Action action, string message)
        {
            action();
            Console.WriteLine(message);
        }
    }
} 
```

# php - 如何在 Apache2 下禁用 PHP AJAX 请求/响应的 gzip 压缩？

> ID：15385361
> 
> 赞同：1
> 
> 时间：2013-03-13T12:28:27.893
> 
> 标签：php, javascript, firefox, xmlhttprequest, gzip

在我正在开发的嵌入式设备上，网页的 Javascript 向本地 PHP 文件发送请求，然后使用响应动态更新 DOM 元素。一切正常：AJAX 很酷。

但是，令人讨厌的是，所有响应都是 gzip 编码的，即使我不希望它们不是（目标设备的处理器没有太多的处理带宽）。问题是我看不到如何禁用 gzip 压缩响应。

请注意：（1）在服务器端，我在 Ubuntu 下使用 PHP 5.3.10 和 Apache/2.2.22 进行测试

(2) 在客户端，我使用的是 Firefox 19.0 和 Firebug

(3) PHP 文件只是在回显它们的输出，即我不认为它们在调用 ob_gzhandler()

(4) JavaScript 使用的是 GET 而不是 POST（这是为项目指定的）

根据 Firebug，请求标头看起来像这样：

```
Accept      text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-gb,en;q=0.5
Cookie     PHPSESSID=<whatever>
Host    10.0.2.15
Referer http://10.0.2.15/pages/status.php
User-Agent  Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:19.0) Gecko/20100101 Firefox/19.0 
```

响应标头通常如下所示：-

```
Cache-Control   no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Connection     Keep-Alive
Content-Encoding    gzip
Content-Length  59
Content-Type    text/html
Date    Wed, 13 Mar 2013 12:08:02 GMT
Expires Thu, 19 Nov 1981 08:52:00 GMT
Keep-Alive      timeout=5, max=43
Pragma   no-cache
Server   Apache/2.2.22 (Ubuntu)
Vary    Accept-Encoding
X-Powered-By    PHP/5.3.10-1ubuntu3.5 
```

我已经尝试过的方法（但没有任何成功）：-

(a) 防止通过本地 .htaccess 文件压缩 php 文件的输出

```
<IfModule mod_env.c>
SetEnvIfNoCase Request_URI "\.php$" no-gzip dont-vary
</IfModule> 
```

这是按照[http://support.modwest.com/content/1/117/en/how-do-i-turn-off-webservers_-gzip-compression.html](http://support.modwest.com/content/1/117/en/how-do-i-turn-off-webservers_-gzip-compression.html)但似乎没有任何效果，甚至当我在通话之间重新启动 apache2 时。

(b) 防止通过 /etc/apache2/httpd.conf 文件压缩 php 文件的输出

```
<Directory /myfolder>
      RemoveOutputFilter php
</Directory> 
```

这似乎也没有任何明显的效果，即使我在两次调用之间重新启动了 apache2。

(c) 使用 XMLHttpHeader.setHeaderRequest() 将“Accept-Encoding”标头设置为“”或“identity”

我都试过了

xmlhttp.setRequestHeader("接受编码", "身份");

...和...

xmlhttp.setRequestHeader("接受编码", "");

两者似乎都没有任何明显的效果：Firebug 仍然报告请求标头包含

接受编码 gzip，放气

我检查了这个规范，似乎应该允许 setRequestHeader() 更改 AcceptEncoding 标题行，所以这有点奇怪。可能是一个已被填补的 FF 安全漏洞？ [http://www.w3.org/TR/2006/WD-XMLHttpRequest-20060405/#dfn-setrequestheader](http://www.w3.org/TR/2006/WD-XMLHttpRequest-20060405/#dfn-setrequestheader)

请注意，setRequestHeader() 机制显然工作正常，因为添加...

xmlhttp.setRequestHeader("X-FavouriteFruit", "banana");

...在 Firebug 请求输出中添加一行：

X-FavouriteFruit 香蕉

基本上，我几乎没有想法。我还能如何阻止我的 php 响应被 gzip 压缩？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:26:07.137

您似乎在设备上使用 apache 来提供 PHP 文件，这意味着您可以在 /etc/php.ini 中尝试类似的操作（或通过 @php_value 在 .htaccess 中）

```
zlib.output_compression = Off 
```

在语言选项部分。

# java - Java - 设计一组 Swing 组件并动态添加该组

> ID：15385366
> 
> 赞同：0
> 
> 时间：2013-03-13T12:28:37.897
> 
> 标签：java, swing, netbeans, dynamically-generated

我正在尝试在一组字段中显示对象的属性（我们称之为 STUFF）。我想做的是，对于 STUFF 的每个实例，添加 a`JPanel`和 multiple`Jlabels`并将`JTextFields`STUFF 属性的值显示到 a `Jframe`。

我的问题是：有没有办法设计一个`JPanel`包含我想要的一切的整体，将其用作某种模型，然后为每个 STUFF 实例动态创建它的实例？

（我正在使用 Netbeans）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:38:44.033

您创建一个扩展**JPanel的****类**(CustomPanel)并在那里实现所有字段。

 **每次需要创建额外的 CustomPanel 时，只需编写

```
CustomPanel cPanel = new CustomPanel(); 
```

你把它当作一个普通的 JPanel。创建 setter 和 getter 方法来设置和获取表单的值。**

# weka - 创建模型文件后，我们可以为另一个分类器评估 weka 中的相同模型文件吗

> ID：15385371
> 
> 赞同：0
> 
> 时间：2013-03-13T12:28:46.477
> 
> 标签：weka

我在 weka 中创建了一个模型文件，用于使用朴素贝叶斯和 MLP（多层感知器）进行分类。**我想运行相同的文件进行装袋可以吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T23:53:03.520

我认为您不能使用相同的文件。您可以做的是在分类器中使用相同的参数并构建 bagging。

请记住 bagging 在 weka.classifiers.meta 下。所有的集成方法都是元分类器

请参阅[JavaDoc](http://weka.sourceforge.net/doc/weka/classifiers/meta/Bagging.html)以了解更多信息。

# jsf-2 - p:commandButton 在最后一个 ajax 请求中不起作用

> ID：15385373
> 
> 赞同：1
> 
> 时间：2013-03-13T12:28:50.207
> 
> 标签：jsf-2, primefaces

我必须将 selectoneButton 中的 Tab 标记为“请求”和“存档”。在该选项卡中，我有使用 ajax 调用的信息。在该信息中，我需要一个按钮作为“acceptCommonButton”和“noNowCommonButton”，因此当用户单击“acceptCommonButton”按钮时，它会调用“acceptRequest”方法。当用户单击“noNowCommonButton”按钮时，它会调用“notNowRequest”方法。

我的问题是按钮在最后一个请求位于“存档”选项卡之前一直有效。这意味着当最后一个请求在“请求”选项卡中时，我的按钮不起作用。太诡异了！！！！我认为这里的问题是由 DataGrid 引起的。

你能看看我的代码吗？！！

```
<table style="width: 100%">
        <tr>
            <td>                    
                <p:selectOneButton  value="#{inviteRequestManagedBean.filterType}">  
                    <f:selectItem itemLabel="#{inviteRequest_msg.request}" itemValue="request"/>  
                    <f:selectItem itemLabel="#{inviteRequest_msg.archive}" itemValue="archive" />   
                    <f:ajax event="change"  render="requestDataGrid" />             

                </p:selectOneButton>
            </td>
        </tr>
        <tr>
            <td>
                <p:dataGrid id="requestDataGrid" var="tBusinessPartnerRequestInfo" 
                            value="#{inviteRequestManagedBean.filterBusinessRequest()}" columns="1" rows="22" >
                    <p:column>
                        <div>
                            <table border="0"  width="100%">
                                <tr>
                                    <td>
                                        <p:graphicImage value="#{tBusinessPartnerRequestInfo.partySender_imageUrl}"/>
                                    </td>
                                    <td>
                                        <div>
                                            <table border="0" width="100%">
                                                <tr>
                                                    <td>
                                                        <h:outputLabel value="#{tBusinessPartnerRequestInfo.requestDate}"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <h:outputLabel value="#{tBusinessPartnerRequestInfo.partySender_fullName}"/>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </td>
                                    <td>
                                        <p:commandButton  id="acceptCommonButton" value="#{inviteRequest_msg.accept}"
                                                          actionListener="#{inviteRequestManagedBean.acceptRequest(tBusinessPartnerRequestInfo.id)}" 
                                                          update="@form" process="@form">

                                        </p:commandButton>
                                    </td>                              
                                    <td>
                                        <p:commandButton id="noNowCommonButton" value="#{inviteRequest_msg.notnow}"  
                                                         actionListener="#{inviteRequestManagedBean.notNowRequest(tBusinessPartnerRequestInfo.id)}" 
                                                         update="@form" process="@form">
                                        </p:commandButton>
                                    </td>
                                    <td>
                                        <p:panel>
                                            <p:ajaxStatus>
                                                <f:facet name="start">
                                                    <p:graphicImage value="../resources/img/loading.gif"/>
                                                </f:facet>
                                                <f:facet name="complete">
                                                    <h:outputLabel value=""/>
                                                </f:facet>
                                            </p:ajaxStatus>
                                        </p:panel>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <hr/>
                    </p:column>
                </p:dataGrid> 
                <p:panel>

                </p:panel>
            </td>
        </tr>
    </table> 
```

# actionscript-3 - AS3：鼠标速度影响音量

> ID：15385374
> 
> 赞同：2
> 
> 时间：2013-03-13T12:28:50.637
> 
> 标签：actionscript-3

我正在使用此代码使用该`ENTER_FRAME`功能检测鼠标的速度。鼠标的速度会影响我正在循环播放的 mp3。通过使用`ENTER_FRAME`它通过帧速率进行更新，并使音乐听起来非常卡顿和混乱。

有没有办法减轻音量（仍在使用`ENTER_FRAME`）或者我的 mp3 总是会受到这种影响？

```
var mySound1:Sound = new Sound();
mySound1.load(new URLRequest("AStringsMinor.mp3"));

var myChannel1:SoundChannel = new SoundChannel();
var myTransform1:SoundTransform = new SoundTransform();
myChannel1 = mySound1.play(0, 999);

var prevPt:Point = new Point(mouseX, mouseY); 

addEventListener(Event.ENTER_FRAME, mouseSpeed); 

function mouseSpeed(e:Event)
{     
    var xspeed:Number = Math.abs(mouseX - prevPt.x);     
    var yspeed:Number = Math.abs(mouseY - prevPt.y);    
    var speed:Number = (xspeed + yspeed) / 100;
    prevPt = new Point(mouseX, mouseY);    

    myChannel1.soundTransform = myTransform1;
    myTransform1.volume = speed;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:55:38.097

我相信您应该通过平均约 5 秒的鼠标速度来减轻速度变化。

```
var speeds:Vector.<Number>;
var spn:int; // how many are there
var spi:int; // current index
// into initialization code:
spn=Math.ceil(5.0*stage.frameRate); // 5.0 is a number of seconds to average
speeds=new Vector.<Number>(spn,true);
for (spi=spn-1;spi>=0;spi--) speeds[spi]=0; // explicit init
spi=0;
// the function gets updated
function mouseSpeed(e:Event)
{     
    var xspeed:Number = Math.abs(mouseX - prevPt.x);     
    var yspeed:Number = Math.abs(mouseY - prevPt.y);    
    var speed:Number = (xspeed + yspeed) / 100;
    prevPt = new Point(mouseX, mouseY);    
    speeds[spi++]=speed; // record current speed
    if (spi==spn) spi=0; // wrap
    speed=0;
    for (var n:int=spn-1;n>=0;n--) speed+=speeds[n]; // sum all recorded speeds
    myChannel1.soundTransform = myTransform1;
    myTransform1.volume = speed/spn; // and now average it
} 
```

# ios - NSPredicate 获取低于指定值的最大值

> ID：15385377
> 
> 赞同：0
> 
> 时间：2013-03-13T12:28:57.690
> 
> 标签：ios, objective-c, core-data, nspredicate, nsfetchrequest

我有一个基于核心数据的`NSDate`s 和数值表。

我正在尝试创建一个`NSPredicate`来获取低于给定日期的最大日期的数值，例如对于 DEC-31-2012，我想获取`DEC-30-2012`或者`DEC-29-2012`如果这是之前的最新日期`DEC-31-2012`。

不幸的是，我的谓词不起作用并导致运行时崩溃：

```
NSFetchRequest *request = [NSFetchRequest 
   fetchRequestWithEntityName:NSStringFromClass([self class])];
NSPredicate *predicate = [NSPredicate 
   predicateWithFormat:@"SUBQUERY(SELF,$x,$x.date.@max <= %@)",endDate]; 
```

错误：

> 无法解析格式字符串“SUBQUERY(SELF,$x,$x.date.@max <= %@)”

我需要如何重写我的谓词才能使其正确？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T12:39:29.993

以下策略应该有效：

*   使用一个谓词来获取日期低于给定日期的所有对象：

    ```
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"date < %@", endDate];
    [request setPredicate:predicate]; 
    ```

*   添加排序描述符以按日期*降序*对结果进行排序，以便最后一个日期排在第一位：

    ```
    NSSortDescriptor *sortDesc = [NSSortDescriptor sortDescriptorWithKey:@"date" ascending:NO];
    [request setSortDescriptors:@[sortDesc]]; 
    ```

*   将获取限制设置为一：

    ```
    [request setFetchLimit:1]; 
    ```

通过设置启动参数“-com.apple.CoreData.SQLDebug 1”，可以看到过滤是在 SQLite 级别完成的：

```
SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZDATE, t0.ZNAME FROM ZENTITY t0 WHERE  t0.ZDATE < ? ORDER BY t0.ZDATE DESC LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:43:42.700

像这样应用谓词

```
NSPredicate* predicate = [NSPredicate predicateWithFormat:@"startDate <= %@ && endDate >= %@", start, end]; 
```

在哪里

`start`并且`end`是`NSDate Objects`（日期范围）

`startDate`并且`endDate`是钥匙。

# c++ - 如何将浮点数与字符串连接起来？

> ID：15385378
> 
> 赞同：3
> 
> 时间：2013-03-13T12:28:59.450
> 
> 标签：c++, concatenation

我试过这个：

```
ostringstream myString;
float x;
string s;
if(x)
  myString<<x;
else
  myString<<s;
return myString.str(); 
```

但它不起作用。我的目标是在测试其中一个是否为 NULL 之前连接成 myString、一个浮点数和一个字符串，它们之间有一个空格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:30:41.680

为什么是`else`中间？试试这个：

```
ostringstream myString;
float x;
string s;
if (fabsf(x) > 1e-30){
    myString<<x << " ";
}
if(s.length() > 0)
   myString<<s;
return myString.str(); //does ostringstream has a str()-member? 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-18T13:50:35.637

C++11 出来了。Visual Studio 对它有很好的支持，现在有了 std::to_string(float)。转换为字符串后，只需与`+`运算符连接即可；

```
string a = "test";
float b = 3.14f;
string result = a + std::to_string(b); 
```

[http://en.cppreference.com/w/cpp/string/basic_string/to_string](http://en.cppreference.com/w/cpp/string/basic_string/to_string)

此外，您可能很高兴现在存在 sto_ 系列全局函数，用于从字符串转换回数字类型： [http ://en.cppreference.com/w/cpp/string/basic_string/stol](http://en.cppreference.com/w/cpp/string/basic_string/stol)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:31:25.337

这应该这样做

```
ostringstream myString;
float x;
string s;
if ( x != 0)
  myString << x;
myString << " " << s;
return myString.str(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:31:32.240

```
ostringstream myString;
float x;
string s;
myString<<x << " " <<s;
return myString.str(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T15:34:51.623

或使用 boost::lexical_cast:

```
return boost::lexical_cast<string>(x) + " " + s; 
```

# java - 在paintComponent 方法之外使用graphics2d 对象？

> ID：15385381
> 
> 赞同：1
> 
> 时间：2013-03-13T12:29:10.450
> 
> 标签：java, awt, graphics2d, java-2d

**我的代码：**

```
public class YesOrNo{

    Graphics g;

    public void createAndShowGui() {
        JPanel x=new JPanel(){
        @Override
            protected void paintComponent(Graphics g) {
                super.paintComponent(g);
                g2 = (Graphics2D)g;
                g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
            }
        }
    }

    public void drawARectangle(){
        g.drawRect(10, 10, 50, 50);
    }
} 
```

我知道我可以在 paintComponent 中调用一个方法并将`g`其作为参数传递给它，但是你可以在不调用该方法的情况下做到这一点`paintComponent`吗？

# django - 如何将 Python Imaging Library 安装到 django 环境？

> ID：15385384
> 
> 赞同：3
> 
> 时间：2013-03-13T12:29:11.637
> 
> 标签：django, ubuntu, python-imaging-library

我目前发现很难`PIL`在精确的穿山甲上安装。我已遵循本教程（[http://www.sandersnewmedia.com/why/2012/04/16/installing-pil-virtualenv-ubuntu-1204-precise-pangolin/](http://www.sandersnewmedia.com/why/2012/04/16/installing-pil-virtualenv-ubuntu-1204-precise-pangolin/)）

当我做：

```
pip install PIL 
```

我得到错误：

```
Could not find any downloads that satisfy the requirement PIL
No distributions at all found for PIL 
```

环顾谷歌，但无济于事。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-27T19:33:54.147

尝试这个：

```
pip install PIL --allow-external PIL --allow-unverified PIL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-22T22:56:26.227

您可以使用 Pillow --> pip install Pillow

# android - 通过命令行指定不同的服务器来构建我的应用程序的 Ant 脚本

> ID：15385387
> 
> 赞同：1
> 
> 时间：2013-03-13T12:29:24.580
> 
> 标签：android, ant, android-build

我开发了一个与服务器通信的 Android 应用程序。我有 2 台服务器。一种用于**开发**，另一种用于**生产**。

在我的 Android 源代码中，我必须在构建时手动更改**服务器 URL 。**

例如：对于**调试模式 release**，我使用：

```
String url = "http://develop/service" 
```

对于**生产版本**，我使用：

```
string url = "http://production/service" 
```

该`url`变量被传递给请求发送函数，如`sendReqToServer(url);`.

我厌倦了手动更改此 url 更改为不同的版本。相反，我想使用**Ant 脚本**`url`在进行不同的发布构建时使用命令行来指定，例如`ant release-develop`（使用开发服务器）和`ant release-product`（使用生产服务器）。

为此，我认为在**build.xml**中我需要创建`<target name="release-develop">`& `<target name="release-product">`。但我不确定如何让 ant 脚本通过命令行为我的应用程序指定 url？

有人可以向我提供有关如何操作的更详细信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:47:21.683

您可以使用`replace`任务来覆盖/替换 url。它看起来像这样：

```
<target name="release-product">
    <replace file="path to your *.java class which contains url" token="@URL@" value="http://production/service">
    <!-- compile app -->
</target>

<target name="release-develop">
    <replace file="path to your *.java class which contains url" token="@URL@" value="http://develop/service">
    <!-- compile app -->
</target> 
```

这不是最好的解决方案，因为您需要更改源代码。最好创建配置文件，您将从中读取 url。在这种情况下，它将如下所示：

你的UrlClass.java

```
String url = Config.getUrl(); // get Url method will read url from config file 
```

应用程序配置文件

```
url=http://develop/service 
```

构建.xml

```
<target name="release-product">
    <echo file="appconfig.ini" override="true">url=http://product/product</echo>
    <!-- compile app using appconfig.ini -->
</target>

<target name="release-develop">
    <echo file="appconfig.ini" override="true">url=http://develop/product</echo>
    <!-- compile app using appconfig.ini -->
</target> 
```

当然，您不需要使用`<echo/>`任务创建 appconfig.ini 文件。这个想法是您可以`appconfig.ini`使用不同的版本覆盖文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T21:03:19.787

`${url}`您可以在需要服务器 url 的所有目标中使用属性：

```
<target name="release">
 <echo> Deployment => ${url} started !</echo>
 ...
</target> 
```

并通过以下方式启动您的 antfile：

```
ant -f yourfile.xml -Durl=http://develop/service 
```

或者

```
ant -f yourfile.xml -Durl=http://production/service 
```

如果您有更具体的属性，请为每个部署目标创建一个属性文件，并在您的 antfile 中使用：

```
<property file="/config/${deploymode}.properties"/> 
```

之后通过以下方式启动您的 antfile：

```
ant -f yourfile.xml -Ddeploymode=test 
```

或者

```
ant -f yourfile.xml -Ddeploymode=production 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:02:40.753

我可能会像其他答案一样使用配置文件，但这是我通常只记录开发版本的另一种可能性：

```
if( BuildConfig.DEBUG  )
{
    //set develop
}
else
{
    //set release
} 
```

这个 BuildConfig.DEBUG 是根据它是在调试还是发布模式下编译来设置的。

# sql - 如何编写 SQL 语句？

> ID：15385388
> 
> 赞同：1
> 
> 时间：2013-03-13T12:29:26.720
> 
> 标签：sql, derby

我有这张表，我想要唯一的面包 id，无论哪个先进入我希望它进入查询结果的表。

意味着在以下情况下，我想要这些具有以下 ID 的记录。

58 ,59 , 60 , 61 ,68 , 69

```
id 面包 id 异常时间
58 ID：D--113042539-54026-1363171110733-3:1:1:1:1 空 16:33.2
59 ID：D--113042539-54026-1363171110733-3:1:1:1:2 空 17:18.7
60 ID：D--113042539-54026-1363171110733-3:1:1:1:3 空 17:18.9
61 ID：D--113042539-54026-1363171110733-3:1:1:1:4 空 17:19.0
62 ID：D--113042539-54026-1363171110733-3:1:1:1:4 jmsexception 17:20.1
63 ID：D--113042539-54026-1363171110733-3:1:1:1:4 jmsexception 17:20.1
64 ID：D--113042539-54026-1363171110733-3:1:1:1:4 jmsexception 17:20.1
65 ID：D--113042539-54026-1363171110733-3:1:1:1:4 jmsexception 17:20.1
66 ID：D--113042539-54026-1363171110733-3:1:1:1:4 jmsexception 17:20.5
68 ID:D--113042539-54026-1363171110733-3:1:1:1:9 jmsexception 17:21.2
69 ID:D--113042539-54300-1363171861821-3:1:1:1:1 InvalidXPathExpression 22:28.1

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:50:59.320

询问：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!2/c5b31/7)**

```
SELECT `t1`.*
FROM Table1 t1
WHERE t1.id = (SELECT MIN(t.id)
               FROM Table1 t
               WHERE t.`bread id`= t1.`bread id`) 
```

结果：

```
| ID |                                      BREAD ID |              EXCEPTION |    TIME |
-----------------------------------------------------------------------------------------
| 58 | ID:D--113042539-54026-1363171110733-3:1:1:1:1 |                 (null) | 16:33.2 |
| 59 | ID:D--113042539-54026-1363171110733-3:1:1:1:2 |                 (null) | 17:18.7 |
| 60 | ID:D--113042539-54026-1363171110733-3:1:1:1:3 |                 (null) | 17:18.9 |
| 61 | ID:D--113042539-54026-1363171110733-3:1:1:1:4 |                 (null) | 17:19.0 |
| 68 | ID:D--113042539-54026-1363171110733-3:1:1:1:9 |           jmsexception | 17:21.2 |
| 69 | ID:D--113042539-54300-1363171861821-3:1:1:1:1 | InvalidXPathExpression | 22:28.1 | 
```

# jquery-ui - 当我们单击外部弹出窗口时，在移动主题弹出窗口中不会隐藏

> ID：15385389
> 
> 赞同：0
> 
> 时间：2013-03-13T12:29:30.590
> 
> 标签：jquery-ui, magento, jquery-mobile, magento-1.7

我正在使用 jquery.blockUI.js 来显示移动应用程序的弹出窗口。单击按钮时会显示弹出窗口。但是，当我尝试在单击该弹出窗口外部时隐藏该弹出窗口时，它不会隐藏。

我正在使用此代码隐藏弹出窗口：-

```
jQuery('.blockOverlay').attr('title','Click to unblock').click(jQuery.unblockUI); 
```

它在桌面版本的 magento 中完美运行，但不适用于移动主题。

请帮助我如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:51:31.150

试试这样的..

```
function togglePopup(){
  var selector = '#popup',
    $popup = $(selector),
    callback = function(e) {
      if (!$(e.target).parents().andSelf().is(selector)) {
        $popup.hide();
        $(document).off('click', callback);
      }
    };

  $popup.toggle();
  if ($popup.is(':visible')) {
    $(document).on('click', callback);
  }
  return false;
} 
```

# .net - vb.net 按顺序停靠两个控件

> ID：15385391
> 
> 赞同：1
> 
> 时间：2013-03-13T12:29:33.193
> 
> 标签：.net, vb.net, winforms

我有一个图片框和一个菜单条，它们都停靠在顶部。

菜单条停靠在窗体的最上部，而图片框停靠在菜单条下方。

我怎样才能让它反过来。图片停靠在最上面，菜单条停靠在图片上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:37:48.877

转到您的 .designer.cs 文件。颠倒将这两个组件添加到表单中的顺序。如果您需要有关此任务的帮助，请在评论中提问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-20T16:17:39.417

真正对我有用的是从控件中更改 de ZOrder。看起来VB使用它来设置停靠顺序。尝试将控件放在前面并将它们发送到后面以查看其效果。祝你好运！！马里亚诺。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:51:12.663

我认为，您可能`docked`按以下顺序在该面板中拥有（顶部）控件

*   菜单条
*   图片框

这就是为什么您`controls`没有按预期显示的原因。

这样做就是为了满足你的需要，

*   `dock`只需将两个控件的属性重置为`none`first
*   按此顺序设置该控件的`Dock`属性`Top`

    1.  图片框
    2.  菜单条

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-31T08:40:10.663

首先，将两个控件的停靠栏设置为 none，然后在 select 上单击鼠标右键，然后在select`Menustrip`上`Bring to Front`单击鼠标右键。和的最终设置码头。`PictureBox``Bring to Back``Menustrip``PictureBox`

# c - 这个程序有内存泄漏吗？

> ID：15385397
> 
> 赞同：1
> 
> 时间：2013-03-13T12:29:50.867
> 
> 标签：c, memory-leaks

```
int main()
{
    char *a = malloc(1024);
    return 0;
} 
```

上面的程序有内存泄漏吗？请提供尽可能完整和技术性的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T12:30:55.100

简单的答案是肯定的。操作系统正在为您整理

**编辑**

为了 gg.kaspersky 的利益。

当程序结束时，您应该已经整理了堆。它表示您已经考虑了所有分配并提供了这些资源的释放（对于打开的文件或其他操作系统资源可以说是正确的）。

这对你来说够复杂吗？

顺便说一句 - 访问家庭 (OS) 时保持与到达时相同的状态是一种礼貌。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T13:25:08.973

程序本身有泄漏。操作系统是否清除它是另一回事。我想最好问'这个程序可能会导致任何系统出现问题吗？答案是肯定的。

C标准没有说分配的内存`malloc`将在程序终止时释放，无论是正常还是异常。将其与打开的文件进行比较，如果程序正常终止，C 实现会保证为您关闭这些文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T12:35:28.137

我不会认为这是内存泄漏。退出时仍可通过仍在作用域内的变量访问内存。

在程序结束时释放你分配的所有内存只是不必要的迂腐，让你花时间做一些操作系统会更有效地为你做的事情。

编辑（技术细节）：

对于 malloc 的某些实现，在程序结束时进行不必要的内存释放可能会非常低效。所有保持其会计信息内联（通过边界标记或类似机制）的 malloc 实现将触及您已分配的大部分（如果不是全部）页面。通常，除了弄脏缓存行和被丢弃的 TLB 条目之外，这不是问题，但是将此与使用足够内存来开始使用交换的程序相结合，最终您会交换大量内存以释放它。当您退出时，操作系统可以更有效地执行此操作（只需将交换槽标记为空闲）。

如果您有一个将内存返回给操作系统的 malloc 实现，则释放内存将导致操作系统取消映射内存，如果您在多处理器系统上，这又需要昂贵的 TLB 操作。在退出时，可以更有效地完成无效（通过执行完整的 TLB 刷新或使 TLB 标记无效）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T12:45:39.203

您的问题不完整……因此，您可以获得的最佳答案是“视情况而定”。

从程序范围来看，是的，您有内存泄漏。这应该是显而易见的。从系统范围来看，答案取决于您运行的操作系统。

一般来说，如果您在主流设备（Win7/MacOSX/Linux 台式机/笔记本电脑、iOS/Android 设备等）上编程，您会非常安全。我想不出任何主流的现代操作系统都无法在您之后进行清理。

但是，如果您在一些较旧的或嵌入式系统上工作，您**将**在此处泄漏内存。我在 uCLinux 平台（专为没有 MMU [内存管理单元] 的硬件设计的操作系统）上看到了内存泄漏。

动态内存通常被认为是危险的，这就是为什么在某些 RTOS 上使用它是不合法的。如果您知道应用程序在整个使用生命周期中的部署范围，那么您可以编写这样的代码……但您很可能不知道，您不应该对操作系统会做什么做出假设. 总是清理自己的烂摊子。

# java - 我可以用这种方式编写我的 Sql 查询吗

> ID：15385399
> 
> 赞同：0
> 
> 时间：2013-03-13T12:30:04.797
> 
> 标签：java, sql, prepared-statement

我想知道我可以以这种格式插入表名吗

```
String update = "UPDATE ? SET Status = ? WHERE Name = ?";
stmt.setString(1,tableName);
stmt.setString(2,status);
stmt.setString(3,name); 
```

插入和删除语句相同吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T12:40:47.443

不。

在查询中放置问号的原因（除了防止 SQL 注入）是为了使数据库可以准备一次语句并使用具有不同参数的准备好的语句。如果它不知道您正在使用什么表，它将无法准备语句。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T12:36:27.730

最简洁的答案是不。但是你可以这样做：

```
String update = "UPDATE " + tableName + " SET Status = ? WHERE Name = ?";
...
stmt.setString(1,status);
stmt.setString(2,name); 
```

请注意 SQL 注入。确保您的 tableName 来自安全来源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T12:36:01.200

通常，您会按如下所示执行此操作...

```
 String sql = "UPDATE " + tableName " SET Status = ? WHERE Name = ?";

    PreparedStatement stmt = null;

    try {
        stmt = connection.prepareStatement(sql);
        stmt.setString(1, status);
        stmt.setString(2, name);
        stmt.executeUpdate();
    } finally {
        if (stmt != null) {
            stmt.close();
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:59:20.583

不，您不能这样做，因为您肯定使用的是准备好的语句。你不能这样做的原因是 PreparedStatement 是预编译的，所以它需要你正在修改的表（它的数据使用 DML）或结构上（使用 DDL）。如果您不提及表表名，该语句将如何预编译？

如果您希望可以使用动态 SQL，但在这种情况下您不必使用 PreparedStatement，您可以使用更简单的实现语句来使用它。

希望这有帮助！

# android - 在相对布局中将滚动条添加到动态表格视图

> ID：15385403
> 
> 赞同：0
> 
> 时间：2013-03-13T12:30:07.773
> 
> 标签：android, tableview, android-scrollbar

我在相对布局中动态创建了动态表格布局。我正在动态添加文本视图。我有 9 个字段要显示。如何在其中放置水平和垂直滚动条？

代码：

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_view);
        // Show the Up button in the action bar.
        setupActionBar();

        TableLayout tableLayout = new TableLayout(getApplicationContext());
        TableRow tableRow;
            TextView textView;

           ............................
           ............................
           ............................
           for (int i = 0; i < rows; i++) 
            {                               //4 rows
            tableRow = new TableRow(getApplicationContext());

            for (int j = 0; j < columns; j++) 
            {                           //3 columns
                textView = new TextView(getApplicationContext());

                textView.setText(temp[k++]);
                textView.setPadding(15, 15, 15, 15);
                tableRow.addView(textView);

            }

            tableLayout.addView(tableRow);
        }

             setContentView(scrollView);
        setContentView(tableLayout); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:41:48.660

像这样创建你的 layout.xml 文件

```
<RelativeLayout xmlns:ads="http://schemas.android.com/apk/res/com.smartcloud.podcast_he"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/bg_iphone" >
        <ScrollView
            android:id="@+id/ScrollView03"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/headingtitle2" >

        </ScrollView>
 </RelativeLayout> 
```

然后在代码中

```
setContentView(R.layout.activity_view);
        // Show the Up button in the action bar.
setupActionBar();

ScrollView scrollview = (ScrollView) findViewById(R.id.ScrollView03);

TableLayout tableLayout = new TableLayout(getApplicationContext());
    TableRow tableRow;
        TextView textView;

       ............................
       ............................
       ............................
       for (int i = 0; i < rows; i++) 
        {                               //4 rows
        tableRow = new TableRow(getApplicationContext());

        for (int j = 0; j < columns; j++) 
        {                           //3 columns
            textView = new TextView(getApplicationContext());

            textView.setText(temp[k++]);
            textView.setPadding(15, 15, 15, 15);
            tableRow.addView(textView);

        }

        tableLayout.addView(tableRow);
    }
scrollview.addView(tableLayout ); 
```

删除这 2 行

```
 setContentView(scrollView);
    setContentView(tableLayout); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:32:11.760

使您的顶级布局成为`ScrollView`

```
scrollView.addView(tableLayout);
setContentView(scrollView); 
```

# ios - Facebook iOS sdk 3.2 在没有 FBWebDialogResult 的情况下发布到墙上

> ID：15385405
> 
> 赞同：1
> 
> 时间：2013-03-13T12:30:09.687
> 
> 标签：ios, objective-c, facebook, facebook-graph-api, facebook-ios-sdk

我想发布到用户的墙上，而不像 FBWebDialogResult 那样显示弹出窗口。我已经使用 SDK 登录并拥有发布到墙的用户权限。使用 Facebook SDK 可以做到这一点吗？还是我应该使用图形 API？

我试过这个，

`[facebook requestWithGraphPath:@"me/feed" andParams:fbArguments andHttpMethod:@"POST" andDelegate:self];`

但它不再适用于 iOS Facebook SDK 3.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T00:15:47.563

您应该能够使用：

```
[FBRequestConnection startWithGraphPath:@"feed" parameters:fbArguments HTTPMethod:@"POST" completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {}]; 
```

在这里找到：

[https://developers.facebook.com/docs/reference/ios/3.2/class/FBRequestConnection#startWithGraphPath%3Aparameters%3AHTTPMethod%3AcompletionHandler%3A](https://developers.facebook.com/docs/reference/ios/3.2/class/FBRequestConnection#startWithGraphPath%3Aparameters%3AHTTPMethod%3AcompletionHandler%3A)

# python - 保护导入的模块不被第三方代码破坏

> ID：15385407
> 
> 赞同：7
> 
> 时间：2013-03-13T12:30:13.303
> 
> 标签：python

如果我的代码使用了无法信任的第三方模块，有什么可以防止这种情况发生：

UntrustedModule.py：

```
import random

random.random = lambda : 4 
```

我的模块.py：

```
import random
import UntrustedModule

print (random.random()) 
```

仅仅导入这个模块会打破对其他不相关的假设吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T12:50:00.353

不，在 Python 中你不能有任何这样的保证，至少在 CPython 实现中不能。当您导入一个模块时，它的代码会运行，并且它可以**完全访问**解释器的每个部分（可能还有系统的大部分）。没有办法避免这种情况。加载不受信任的代码是不明智的，因为它可以做的事情太多了。

但是，您可能有兴趣在隔离进程中运行该进程，并且仅通过 IPC 与其通信。这是一个很大的话题，它取决于您需要的隔离程度以及您对外部代码的信任程度。

* * *

PyPy 实现了一些[沙盒功能](http://pypy.readthedocs.org/en/latest/sandbox.html)。它并不像“打开沙盒”那么简单，但它是隔离不受信任代码的众多方法之一。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T12:36:19.623

你可以做一个

```
reload(random) 
```

为了从源重新加载它。将其恢复为预期状态。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-13T12:43:44.650

Python 将按照首先搜索本地路径（执行脚本的目录）的顺序导入，然后是 PYTHONPATH 环境变量中列出的任何路径。

更好的解决方案是针对您的不受信任的模块检查和编写测试。

# arrays - Excel 2010 中的溢出，64 位由于数组大小

> ID：15385408
> 
> 赞同：0
> 
> 时间：2013-03-13T12:30:14.977
> 
> 标签：arrays, excel, vba

我尝试在具有 16 GB RAM 的 64 位机器上的 Excel VBA 2010 中声明以下数组：

```
Public MyArray(1 To 100, 1 To 100, 1 To 6000, -2 To 2, ,-2 to 2, 1 To 3) As Double 
```

如果我运行代码 Excel 会立即崩溃。

如果我将数组的大小减小为：

```
Public MyArray(1 To 100, 1 To 100, 1 To 6, -2 To 2, ,-2 to 2, 1 To 3) As Double 
```

一切运行良好。

任何人都知道第一个数组崩溃的原因或如何解决它？
我认为奇怪的是 Excel 由于 16 GB 的 RAM 无法处理数组？

谢谢！

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:10:19.657

```
Public MyArray
   (1 To 100,     --->           100
    1 To 100,     ---> * 100  = 10 000
    1 To 6000,    ---> * 6000 = 60 000 000
    -2 To 2,      ---> * 5    = 300 000 000
      ,    ? 
    -2 to 2,      ---> * 5    = 1 500 000 000 
    1 To 3        ---> * 3    = 4 500 000 000
    ) As Double   ---> * 8    = 36 000 000 000 
```

36GB ??

# c - 何时将内存分配给 C 中的局部变量

> ID：15385411
> 
> 赞同：10
> 
> 时间：2013-03-13T12:30:28.963
> 
> 标签：c, variables, memory-management, local

由于局部变量也称为自动变量，并且应该在运行时在访问函数时分配内存。

```
int main(){
    int a; // declaration 
    return 0;
}

int main(){
    int a[]; // compilation error, array_size missing
    return 0;
}

int main(){
    int a[2]; // declaration, but can't work without array_size, 
              // so at compile time it is checked!
    return 0;
} 
```

我的问题是在C中声明array_size是否只是一个规则，或者在编译时为数组分配内存（仍然是局部变量）

它是如何工作的？

根据 K&R 的 C 编程，数组是一个变量。第 161 页。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T12:50:11.740

当您声明局部变量时，它的大小在编译时是已知的，但内存分配发生在执行时。

因此，在您的示例中，没有大小的数组显然对编译器来说是一个问题，因为它不知道要包含在汇编代码中的大小是多少。

如果你不知道数组的大小，你总是可以使用指针类型和`malloc`/`free`甚至`alloca`. 前两个在堆上操作，`alloca`实际上使用堆栈。

值得注意的例外是静态变量。它们的存储空间已经在编译/链接时分配，并且不能在运行时更改。

例子：

```
int main(int argc, const char *argv[])
{
    int a; // a is a sizeof(int) allocated on stack
}

int main(int argc, const char *argv[])
{
    int a[2]; // a is a sizeof(int)*2 allocated on stack
}

int main(int argc, const char *argv[])
{
    int *a; // a is a sizeof(int*) allocated on stack (pointer)
    a = alloca(sizeof(int)*4); // a points to an area with size of 4 integers
                               // data is allocated on stack
}

int main(int argc, const char *argv[])
{
    static int a; // a is allocated in data segment, keeps the value
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T12:49:36.530

```
int main(){
    int a[2];
    return 0;
} 
```

这里，`int a[2];`是一个名为 的变量的*定义*`a`。`a`是两个 的数组`int`。

在实践中发生的是编译器发出代码以将堆栈上的空间用于 2 个相邻`int`对象（可能是 8 个字节，但大小`int`取决于实现）。这当然是假设优化器没有删除该对象，因为您从不使用它。

您得到的编译器错误`int a[999999999];`是由于编译器强制执行的一些硬限制，因为它知道（或无论如何假设）永远不会有足够的堆栈。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T13:12:21.113

*C 中的局部*变量和*自动*变量之间存在区别。局部变量可以是*自动*的或*静态*的，这决定了它的内存是在堆栈上分配，还是在程序第一次执行时永久分配。

使用此代码：

```
int main(){
  int a[];    //compilation error, array_size missing
  return 0;
} 
```

这是一个*不完整的数组*。`int`错误是因为编译器不知道程序需要分配多少s。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:36:28.050

正如评论中所述的 sgar91，在调用函数时分配了一个数组，例如您的示例中的数组，并且大小必须是确定的。如果需要动态数组，则必须在堆上分配内存。

```
int *values = malloc(sizeof(int) * array_count); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T13:40:36.160

数组大小应该在编译时知道，您可以将大小直接传递给数组，也可以间接传递给数组，因为内存是在编译时决定但在运行时分配的，可变大小的数组除外。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T12:45:26.423

当您声明一个自动变量（例如函数参数或**局部变量**）时，就会发生自动分配。自动变量的空间在输入包含声明的复合语句时分配，并在退出该复合语句时释放。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-13T12:47:20.337

这就是 C 语言中的要点，其中数组和指针不一样。

举个例子：

```
int main(){
   int a[5];
   int * b = malloc(sizeof(int) * 5);

  printf("sizeof a = %d\n",sizeof a);
  printf("sizeof int[5] = %d\n",sizeof(int[5]));
  printf("sizeof b = %d\n",sizeof b);

  free(b);
  return 0;
} 
```

这将返回：

```
sizeof a = 20
sizeof int[5] = 20
sizeof b = 4 
```

变量 a 在内部声明为 int[5]，它是一个整数指针，指向一个有 5 个整数空间的内存块。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-13T12:47:44.510

对于局部变量，它们消耗的内存在堆栈上。这意味着它们必须具有在编译时已知的固定大小，以便在调用函数时，通过更改堆栈指针的值将所需的确切内存量添加到堆栈中。这就是数组必须有大小的原因：调用函数时堆栈上的字节数必须改变一个固定的量。

调用 malloc() 和类似的方法从堆中分配内存；在运行时以这种方式分配的内存可以是可变大小的。

# objective-c - 如何将一个列表随机分为两个列表

> ID：15385413
> 
> 赞同：-5
> 
> 时间：2013-03-13T12:30:35.167
> 
> 标签：objective-c, random

我有一个数组，我想将数组中的项目随机放入两个大小相同的列表中，我正在考虑将这些项目放入两个数组中，但不确定这是否是最好的主意。除了将它放入数组之外，我如何编写 for 语句或 while 循环以从数组中获取所有对象并将其放入两个数组或列表中。

**编辑**

我希望将主列表分为两个列表。将一个列表中的项目减半，另一个列表中的另一半，我希望选择是随机的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:39:54.290

```
NSMutableArray *temp = [[NSMutableArray alloc] initWithArray:originalArray copyItems:TRUE];

NSMutableArray *list1 = [[NSMutableArray alloc] init];
NSMutableArray *list2 = [[NSMutableArray alloc] init];
while(temp.count > 0){

    int index1 = arc4random_uniform(temp.count);
    [list1 addObject:[temp objectAtIndex:index1]];
    [temp removeObjectAtIndex:index1];

    if(temp.count != 0){
      int index2 = arc4random_uniform(temp.count);
      [list2 addObject:[temp objectAtIndex:index2]];
      [temp removeObjectAtIndex:index2];
    }
} 
```

现在您将留下 2 个数组（list1 和 list2），内容在 2 个数组中随机拆分

希望我正确解释了您的问题，根本没有测试过代码，理论上应该可以工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:20:17.083

假设您的原始数组有偶数个 Elemnet：

```
NSMutableArray *list1 = [[NSMutableArray alloc] init];
NSMutableArray *list2 = [[NSMutableArray alloc] init];
NSMutableArray *originalArray = [[NSMutableArray alloc] initWithObjects:@"ssjsf1",@"ssjsf2",@"ssj3sf",@"ssj4sf",@"ss5jsf",@"ssj6sf",@"ssj7sf",@"ssj8sf",@"ssj9sf",@"s10sjsf",@"ss11jsf",@"ss12jsf",@"ss12jsf",@"ss12jsf",nil];
NSMutableArray *temp = [[NSMutableArray alloc] init];
int i =0;
for (i = 0; [temp count] < [originalArray count] ; i++){
    int r = arc4random_uniform([originalArray count]);
    if(!([temp containsObject:[NSNumber numberWithInt:r]]))
    {
        [temp addObject:[NSNumber numberWithInt:r]];
        [list1 addObject:[originalArray objectAtIndex:r]];
         if([originalArray count] % 2 == 0)
        {
            if([list1 count] > ([originalArray count]/2) )
            {
                [list1 removeObjectAtIndex:r];
                [temp removeObject:[NSNumber numberWithInt:r]];
            }
        }
        if([originalArray count] % 2 != 0)
            if([list1 count] > ([originalArray count]/2 + 1) )
            {
                [list1 removeObjectAtIndex:r];
                [temp removeObject:[NSNumber numberWithInt:r]];
            }
    }
    r = arc4random_uniform([originalArray count]);
    if(!([temp containsObject:[NSNumber numberWithInt:r]]))
    {
        [temp addObject:[NSNumber numberWithInt:r]];
        [list2 addObject:[originalArray objectAtIndex:r]];

       if([originalArray count] % 2 == 0)
        {
            if([list2 count] > ([originalArray count]/2) )
            {
                [list1 removeObjectAtIndex:r];
                [temp removeObject:[NSNumber numberWithInt:r]];
            }
        }
        if([originalArray count] % 2 != 0)
            if([list2 count] > ([originalArray count]/2) )
            {
                [list2 removeObjectAtIndex:r];
                [temp removeObject:[NSNumber numberWithInt:r]];
            }
    }
}

 NSLog(@"List1 -- %@ \n List 2 --- %@",list1, list2); 
```

愿这对你有所帮助。

# gcc - 使用 gcc 进行条件编译/链接

> ID：15385414
> 
> 赞同：1
> 
> 时间：2013-03-13T12:30:35.987
> 
> 标签：gcc, makefile, ld

我有从命令行运行的用 C 语言编写的科学模拟代码。用户将输入模型作为`model.c`文件中的一组 C 子例程提供，然后在运行时编译成代码。

某些模型属性并不总是与特定问题相关，但目前用户仍需要为该属性提供一个空的虚拟函数才能编译代码。

是否可以在源代码中嵌入模型属性的虚拟子程序，这些虚拟子程序仅在用户提供的`model.c`不包含该属性的子程序时才链接？

例如，如果`model.c`包含名为 的子例程`temperature()`，则代码应链接到该子例程，而不是在`temperature()`中找到的子例程`src/dummy_function.c`。如果`model.c`没有`temperature()`编译器应该使用`src/dummy_function.c`.

`model.c`如果可能的话，我更喜欢在文件中不需要预处理器指令的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T15:11:54.337

是的你可以。假设您在文件中有简单的代码，比如 undesym.c：

```
int
main(void)
{
  user_routine();
  return 0;
} 
```

在说文件 fakeone.c 中创建弱存根

```
#include "assert.h"

int  __attribute__((weak))
user_routine(void)
{
  assert(0 == "stub user_routine is not for call");
  return 0;
} 
```

现在在 goodone.c 中创建“用户”函数

```
#include "stdio.h"

int
user_routine(void)
{
  printf("user_routine Ok\n");
  return 0;
} 
```

现在，如果您将链接在一起，`gcc undesym.c fakeone.c`那么 a.out 将运行到断言，但如果您将添加`goodone.c`到编译中，例如`gcc undesym.c fakeone.c goodone.c`，那么它将更喜欢强定义而不是弱定义，并将运行到消息。

您可以采用相同的机制，定义默认函数weak。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:04:48.930

由于您说用户的子例程“在运行时编译到代码中”，因此您可以使用动态链接来加载用户提供的二进制文件并在运行时查找它们的入口点。在 linux（或任何 POSIX 系统）中，这将基于`dlopen()`/`dlsym()`并且看起来或多或少像这样：

```
#include <dlfcn.h>

/* ... */

/* Link the UserModule.so into the executable */
void *user_module = dlopen("UserModule.so", RTLD_NOW);

if (!user_module) {
    /* Module could not be loaded, handle error */
}

/* Locate the "temperature" function */
void *temperature_ptr = dlsym(user_module, "temperature"):

if (!temperature_ptr) {
    /* Module does not define the "temperature" function */
}

void (*user_temperature)() = (void(*)())temperature_ptr;

/* Call the user function */
user_temperature(); 
```

有关详细信息，请参阅[dlopen 文档](http://linux.die.net/man/3/dlopen)。在您使用的任何操作系统中，很可能都可以使用类似的工具。

# php - Wordpress 小部件表单功能运行两次

> ID：15385416
> 
> 赞同：1
> 
> 时间：2013-03-13T12:30:46.827
> 
> 标签：php, html, wordpress

我正在制作的自定义 Wordpress 小部件有问题。由于某种奇怪的原因，表单函数运行了两次，因此产生了两个 Redactor 文本区域，但它仅在我将小部件添加到侧边栏时才会发生。不是当我在添加后单击保存按钮时。

我该怎么做才能让我的表单函数只运行一次，或者至少让 JavaScript 运行一次。

**完整的小部件代码**

[http://pastebin.com/BHDJSxWX](http://pastebin.com/BHDJSxWX)

**我的表单功能**

```
function form($instance)
{
    $instance = wp_parse_args((array) $instance, array( 'box1' => '', 'box2' => '', 'box3' => '', 'box4' => '' ));
    $box1 = $instance['box1'];
    $box2 = $instance['box2'];
    $box3 = $instance['box3'];
    $box4 = $instance['box4'];
    $boxqty = $instance['boxqty'];

    $uniqueID = rand();
    echo "Unique ID: ".$uniqueID;

    ?>        
    <p>
        <label for="<?php echo $this->get_field_id('boxqty'); ?>">Number of blocks: (1-4)
            <input class="widefat" id="<?php echo $this->get_field_id('boxqty'); ?>" name="<?php echo $this->get_field_name('boxqty'); ?>" type="text" value="<?php echo attribute_escape($boxqty); ?>" />
        </label>
    </p>  
    <p>
        <label for="<?php echo $this->get_field_id('box1'); ?>">Box 1: 
            <textarea class="widefat redactor_content_<?php echo $uniqueID; ?>" id="box1" name="<?php echo $this->get_field_name('box1'); ?>" style="width: 600px;"><?php echo $box1; ?></textarea>
        </label>
    </p>
    <p>
        <label for="<?php echo $this->get_field_id('box2'); ?>">Box 2: 
            <textarea class="widefat redactor_content_<?php echo $uniqueID; ?>" id="<?php echo $this->get_field_id('box2'); ?>" name="<?php echo $this->get_field_name('box2'); ?>" style="width: 600px;"><?php echo $box2; ?></textarea>
        </label>
    </p>
    <p>
        <label for="<?php echo $this->get_field_id('box3'); ?>">Box 3: 
            <textarea class="widefat redactor_content_<?php echo $uniqueID; ?>" id="<?php echo $this->get_field_id('box3'); ?>" name="<?php echo $this->get_field_name('box3'); ?>" style="width: 600px;"><?php echo $box3; ?></textarea>
        </label>
    </p>
    <p>
        <label for="<?php echo $this->get_field_id('box4'); ?>">Box 4: 
            <textarea class="widefat redactor_content_<?php echo $uniqueID; ?>" id="<?php echo $this->get_field_id('box4'); ?>" name="<?php echo $this->get_field_name('box4'); ?>" style="width: 600px;"><?php echo $box4; ?></textarea>
        </label>
    </p>
    <!--Activate Redactor-->
    <script type="text/javascript">

                jQuery('.redactor_content_<?php echo $uniqueID; ?>').redactor({
                    fixed: true
                });
            console.log('Unique ID: <?php echo $uniqueID; ?>');
    </script>
    <?php
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:54:14.530

我测试了一些东西，似乎正在发生的事情是整个小部件加载在左侧，小部件表单内容被隐藏，右侧在“活动”小部件部分。未经测试，但您应该只能通过以下方式定位“活动”部分：

```
jQuery('.widgets-holder-wrap .redactor_content_<?php echo $uniqueID; ?>').redactor({
    fixed: true
}); 
```

如果我有完整的小部件，我可能会发现其他东西。

# jquery - swipe.js 过渡结束函数

> ID：15385417
> 
> 赞同：0
> 
> 时间：2013-03-13T12:30:47.747
> 
> 标签：jquery, html

我已经通过@bradbirdsall ( [http://swipejs.com/](http://swipejs.com/) )实现了 swipe.js

该插件具有 transitionEnd 功能。当用户到达最后一张幻灯片时，如何让它引导用户访问 .index.html？

```
window.mySwipe = new Swipe(document.getElementById('slider'), {
callback: function(index, elem) {},
transitionEnd: function(index, elem) {}
}); 
```

jQuery 新手。很高兴在这里学习，但时间很短。提前感谢您的帮助！

G

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T09:21:12.990

在回调和/或 transitionEnd 中，您可以使用以下[Swipe API 函数](https://github.com/bradbirdsall/Swipe/blob/master/README.md#swipe-api)来检查您是否在最后一张幻灯片：

*   `getPos()`返回当前幻灯片索引位置
*   `getNumSlides()`返回幻灯片的总数

显然，通过这些信息，您可以检查您是否在最后一张幻灯片上，并将您的用户重定向到相应的功能`index.html`设置`window.location`，例如。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T16:42:01.450

我已经为类似的需求做了类似的事情

```
window.mySwipe = new Swipe(document.getElementById('userSlider'), {
  startSlide: 0,  
  speed: 400,
  continuous: false,
  disableScroll: false,
  stopPropagation: false,
  callback: function(index, elem) {
    if(window.mySwipe.getPos() === 3){
        setTimeout(function(){
          $('#userSlider').fadeOut();
        }, 500);
      }
     },
  transitionEnd: function(index, elem) {}
  }); 
```

你也可以这样做，达到同样的效果

```
window.mySwipe = new Swipe(document.getElementById('userSlider'), {
  startSlide: 0,  
  speed: 400,
  continuous: false,
  disableScroll: false,
  stopPropagation: false,
  callback: function(index, elem) {},
  transitionEnd: function(index, elem) {
    if(window.mySwipe.getPos() === 3){
      setTimeout(function(){
        $('#userSlider').fadeOut();
      }, 500);
     }

    }
}); 
```

# c# - _ViewStart.cshtml 和 _Layout.cshtml - 与视图共享。网页上缺少 DOCTYPE

> ID：15385419
> 
> 赞同：1
> 
> 时间：2013-03-13T12:30:51.947
> 
> 标签：c#, asp.net-mvc-3, razor, views

我有一个特定的 _ViewStart.cshtml 和 _Layout.cshtml（在 Views 文件夹的子文件夹中）用于网页，当页面加载时，_ViewStart 和 _Layout 按预期使用（在 _ViewStart 中达到断点）

我希望我的所有其他视图都引用的共享文件夹（视图文件夹）中有一个 _ViewStart.cshtml 和 _Layout.cshtml。

_Layout 正在被引用，但 _ViewStart.cshtml 不是（未达到断点） - 这是 mvc3 中的规范吗？

此外，我使用共享布局的第一个视图在网页顶部显示 DOCTYPE 指令（使用 firebug），但是后续网页缺少 DOCTYPE 指令，即使它使用相同的 _Layout.cshtml - 任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:25:34.460

发现我的视图中有一个“Response.Write...”，导致 DOCTYPE 声明不被打印。

# vb.net - 日期时间数组排序

> ID：15385420
> 
> 赞同：-1
> 
> 时间：2013-03-13T12:30:52.710
> 
> 标签：vb.net

我有一个包含日期对象的数组，我需要按日期按升序或降序排序，即最新的第一个（日期也可以包含时间戳）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:38:28.500

[`Array.Sort(Of T)`](http://msdn.microsoft.com/en-us/library/bzw8611x.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)使用自定义`IComparer(Of T)`委托应该可以工作：

```
Dim dates = {Date.Now, Date.Now.AddDays(1), Date.Now.AddDays(2)}
Array.Sort(Of Date)(dates, Function(d1, d2) d2.CompareTo(d1)) 
```

> 我已经对日期进行了排序。但是我有一个对象数组，其中包含日期对象作为成员。那么如何对包含日期对象的对象数组进行排序？

您可以再次使用自定义`Sort`委托（假设*对象*是一个类`Person`）：

```
Array.Sort(Of Person)(persons, Function(p1, p2) p2.BirthDate.CompareTo(p1.BirthDate)) 
```

但最易读的方式是使用 Linq：

```
Dim orderedPersons = From p In persons
                     Order By p.BirthDate Descending
For Each p In orderedPersons
    Console.WriteLine("{0}'s birtdate is at {1}", p.Name, p.BirthDate)
Next 
```

如果你需要一个 List 从查询中使用`.ToList()`，如果你需要一个`array`使用`.ToArray()`。

# build - 使用 Grunt v0.4.0 构建的 Sublime Text 2

> ID：15385424
> 
> 赞同：4
> 
> 时间：2013-03-13T12:30:56.957
> 
> 标签：build, sublimetext2, gruntjs

我正在尝试设置 Sublime 构建过程来运行 Grunt (v0.4) 这是我的构建片段：

```
{
    "cmd": ["grunt", "--no-color"],
    "selector": ["Gruntfile.js"],
    "path": "/usr/local/bin",
    "working_dir": "${project_path}",
    "osx": {
        "cmd": ["grunt", "--no-color"]
    }
} 
```

当我点击时`Command`-`B`我收到以下错误：

> grunt-cli：grunt 命令行界面。(v0.1.6) 致命错误：无法找到本地咕噜声。
> 
> 如果您看到此消息，则说明未找到 Gruntfile 或未将 grunt 安装到您的项目本地。有关安装和配置 grunt 的更多信息，请参阅入门指南：
> 
> [http://gruntjs.com/getting-started](http://gruntjs.com/getting-started) [在 0.2 秒内完成，退出代码 99]

当我`grunt`从终端运行时，一切正常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T14:25:29.213

这是 Sublime Text 的“错误”。当您点击`Ctrl+B`时，它将以第一个打开的文件夹作为工作目录调用构建命令。因此，如果您还没有打开该文件夹，它就找不到构建文件（Makefile，或者在您的情况下是 Gruntfile）。

所以为了构建成功，你需要把你的 Gruntfile 作为工作目录放在文件夹中，然后在 Sublime Text 中打开该文件夹并点击`Ctrl+B`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:14:57.110

`which grunt`从命令行输入，然后将完整路径放入该`"cmd"`部分 - 例如，`"cmd": ["/opt/local/bin/grunt", "--no-color"]`. ST2的`$PATH`可能与 CLI 环境中的不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:53:26.017

在运行 GruntJS 之前，你需要安装它： npm install grunt --save-dev 在新版本的 GruntJS 中，'grunt' 没有全局安装，所以在每个项目中你可以使用不同版本的 GruntJS。

# php - 无法使用 url 预填充表单

> ID：15385426
> 
> 赞同：0
> 
> 时间：2013-03-13T12:31:00.970
> 
> 标签：php, url

我正在尝试通过 URL 中的参数传递信息来预填充一组表单字段。我之前可以通过简单地将参数添加到 URL 来使用 html 表单来执行此操作，例如 ?name=John。我输入的变量通常出现在表单域中。

我发现这种方法不适用于最新形式。我已经能够识别参数名称，但是当我将它们添加到 URL 的末尾时，它们不会填充到表单中。

例如使用 website.co.uk/admin/usersearch.php?email=test@test.com 我希望电子邮件字段填充 test@test.com 但页面刷新并且表单仍然是空白的。

这是因为它是一个 .php 表单吗？反正有这个吗？我只能选择使用 URL 或 javascript。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:33:07.477

将您的字段值设为`<?php echo $_GET['email'];?>`

像这样 ：

```
<input type="text" name="email" value="<?php echo $_GET['email'];?>" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:37:01.323

没有这样的默认程序用于预填充任何 Web 服务器内置的表单字段。所以，我不确定你是如何让它更早工作的。也许开发人员实际上已经对其进行了编码，以便进行表单预填充。

对于新表格，您可以按照 Prasanth 的建议进行操作。但是，由于您只需要 JavaScript 或 HTML，请参阅之前的问题以获得进一步帮助：[如何从 javascript 中检索 GET 参数？](https://stackoverflow.com/questions/5448545/how-to-retrieve-get-parameters-from-javascript)

基本上，您要做的是从 url 获取字段的值，并使用 JavaScript 在表单中设置字段的值。

# jquery - 保护 JSON 服务

> ID：15385427
> 
> 赞同：1
> 
> 时间：2013-03-13T12:31:09.177
> 
> 标签：jquery, asp.net-mvc, json, security

我有一个网站大量使用从 jQuery 到托管在同一 Web 域中的 Web 服务的 JSON 调用。许多呼叫是从不需要访问者登录的公共页面进行的。

看来我可以使用 Fiddler 重放这些 JSON 调用，这是一个大问题，因为现在恶意用户只需打开我的网站就可以捕获 Fiddler 跟踪，然后，所有的赌注都没有了，谁知道他/她能做什么。

有没有办法保护 Web 服务，所以服务器上只允许从网站页面进行的那些 JSON 调用？我在后端使用 ASP.NET MVC。

谢谢你。

* * *

感谢大家为这个话题做出贡献。我有一个后续问题：

SSL 呢？如果我将所有服务都放在一个使用 SSL 保护的文件夹中，那会是一个包罗万象的解决方案（以牺牲性能为代价）吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:37:12.830

答案是否定的。用户总是可以模拟浏览器发出的 HTTP 请求。因此，必须以能够处理所有异常和恶意尝试的方式对后端进行编码。

1.  对所有请求使用 nonce。这可能很难实现，但这是我想到的最重要的事情之一。

2.  跟踪用户代理并否定来自非标准浏览器的所有请求。

3.  检查推荐人并确保它来自预期页面或至少来自同一域

4.  包括跟踪会话/cookie 变量以保持跟踪

但是，所有这些事情都可以避免，因此最好的办法是让您的后端系统更安全地处理任何用户输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:40:08.153

我建议对每个 JSON 服务请求进行身份验证。Ex- 传递 access_token

每个服务请求都必须针对访问的用户进行验证。他是否有权访问此服务/数据？

对来宾用户也应该做同样的事情。只有有限的服务/数据应该暴露给来宾用户。

从 facebook API 中获取灵感。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:43:22.407

有多种方法可以检查 JSON 调用的有效性，每种方法都为您提供多级安全性：

*   检查`Referer`HTTP 标头是否包含您网站的 URL。这为您提供了基本的安全性，因此普通用户将无法通过 Fiddle 访问您的呼叫，例如
*   如果 JSON 的内容是在服务器端生成的，那么您可以对 json 内容进行签名，以便只接受您之前在服务器端生成的那些调用。例如，查看 JSON Web Token (JWT)。
*   如果 JSON 内容不是在服务器端生成的，您仍然可以发出一次“票证”，该票证必须在每个 JSON 调用中出现。您必须在服务器端检查票证的有效性，并且票证仅使用一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T13:50:49.993

关于后续问题：

SSL 仅保护浏览器和您的服务器之间的连接，即没有人可以检查两者之间的通信。（例如，中间人可能会在途中更改调用的内容。）这并不能阻止攻击者进行自己的 JSON 调用。不同之处在于他的呼叫是加密的，除了您的服务器之外，其他任何人都无法检查。

# visual-studio - Visual Studio 2012 上的 Env.DTE 使用有时会抛出 MK_E_UNAVAILABLE

> ID：15385429
> 
> 赞同：3
> 
> 时间：2013-03-13T12:31:18.147
> 
> 标签：visual-studio, exception, marshalling, envdte

我正在使用 Visual Studio 2012

我在项目中有一个 T4 模板，可以从现有代码生成代码。为此，我使用 Visual Studio Env.DTE-API。与描述相同的错误将在一个简单的控制台应用程序中引发，因此在我的项目中不会出现问题。

几个星期以来，一切运行良好。

今天，我只是有时会遇到一个例外。同一个项目像魅力一样在同事的机器上运行，从来没有例外。

这使我假设我的 Visual Studio 或我的机器通常会引发此异常，而不是项目本身。

例外情况如下（我删减了一点）：

错误 7 运行转换：System.Runtime.InteropServices.COMException (0x800401E3): Vorgang nicht verfügbar。（来自 HRESULT 的异常：0x800401E3 (MK_E_UNAVAILABLE)）在 System.Runtime.InteropServices.Marshal.GetActiveObject(Guid& rclsid, IntPtr reserved, Object& ppunk) 在 System.Runtime.InteropServices.Marshal.GetActiveObject(String progID)

抛出异常的代码如下：

*DTE dte = (DTE) Marshal.GetActiveObject("VisualStudio.DTE");*

我的问题是：我使用的代码通常有什么问题或关键吗？而且，也许有人知道 Visual Studio 或运行它的机器可能出了什么问题。

我已经运行了可以在（[Marshal.GetActiveObject() 在 C# 中引发 MK_E_UNAVAILABLE 异常）](https://stackoverflow.com/questions/7736280/marshal-getactiveobject-throws-mk-e-unavailable-exception-in-c-sharp)上找到的代码示例，我的 Visual Studio 实例在 ROT 中是可见的。

最好的祝福

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-27T23:52:02.170

已经观察到，如果以提升权限运行的进程尝试获取与没有提升权限运行的进程的接口，您将始终收到此错误，反之亦然。

# properties - 声纳变量参考

> ID：15385432
> 
> 赞同：0
> 
> 时间：2013-03-13T12:31:30.447
> 
> 标签：properties, sonarqube

我有以下声纳属性文件：

```
...  
sonar.modules=my.really.long.module.prefix/sub1,my.really.long.module.prefix/sub2
... 
```

我想引用一个变量，例如：

```
my.key= my.really.long.module.prefix 
```

并像这样引用它：

```
sonar.modules=${my.key}/sub1,${my.key}/sub2 
```

但是，当我通过`sonar-runner`命令行运行它时，它不能正确替换`${my.key}`. 我怎样才能使这种替换发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:59:16.993

不，这还不支持。

随意加入 Sonar 用户邮件列表并讨论这个问题，因为这可能是我们可能会考虑的事情。

# jquery - 将通过 ajax 返回的 HTML 分配给任何 HTML 元素值

> ID：15385435
> 
> 赞同：1
> 
> 时间：2013-03-13T12:31:35.297
> 
> 标签：jquery, ajax

我试图将从 ajax 返回的 html 分配给任何 html 元素的值。返回的 html 仅包含 22.5。所以我想将此值分配给任何 html 元素值。

我正在使用的代码是：

```
$(document).ready(function(){
    $("#coupon_btn").click(function(){
        //alert("hello");
        var coupon=$("#coupon").val();
        var mem_price=$("#mem_price").val();
        $.ajax({
           type: 'POST',
           url: 'http://localhost/freakinout1/paypal/coupon.php',
           data: "coupon="+coupon+"&price="+mem_price,
           cache: false,
           success: function(html) {
                var pay = $("#Payment_Amount").val();
                $("#Payment_Amount").val() = html;
                alert(pay);
               //$('#search-results-container').html(html);
           }
        });
    });
}); 
```

我在错误控制台中遇到的错误是左侧分配无效。

那么有人可以建议我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:32:31.807

该`val()`函数接受一个参数来设置`value`调用它的对象的参数，将`html`变量传递给`val()`注意 val() 与文本、复选框等输入类型的 html 元素一起使用。如果 Payment_Amount 是 div 或 span 那么您将需要使用`html()`或`text()`。

*改变*

```
$("#Payment_Amount").val() = html; 
```

*至*

```
$("#Payment_Amount").val( html); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:33:27.840

要设置一个值，您需要在[val()](http://api.jquery.com/val/#val2)中传递字符串..

尝试这个

```
$("#Payment_Amount").val() = html; 
```

用。。。来代替

```
$("#Payment_Amount").val(html);
                    //---^^^^ here 
```

# c++ - 不同文件中的 C++ 类问题

> ID：15385436
> 
> 赞同：0
> 
> 时间：2013-03-13T12:31:37.237
> 
> 标签：c++

我的新程序有一点小问题。我制作了一个班级档案，直到一切顺利！我明白了！

C:\Code Block Projects\Not so Advanced Calculator\Calcu.cpp|5|error: expected lified-id before '{' token|

在代码块 12.11 中；

我的Calcu.h 文件：

```
 #ifndef CALCU_H
 #define CALCU_H

class Calcu
{
    public:
        Calcu();
};

#endif // CALCU_H 
```

我的Calcu.cpp 类文件：

```
 #include "Calcu.h"
#include <iostream>

using namespace std;
Calcu{
    Calcu(){}
    public:
    void setNumbers(int x, int y){ no1=x, no2=y; }
    int getAddition() {return no1+no2;}
    int getSubstraction() {return no1-no2;}
    int getDivision() {return no1/no2;}
    int getMultiplication() {return no1*no2;}
    int getExponent(){ return no1**no2; }
private:
    int no1, no2;
}; 
```

还有我的 main.cpp：

```
 #include <iostream>
#include <Calcul.h>
using namespace std;

void function_calculator()
{
        Calcu calcul;
    int noI, noII; char operation;
    cout << "Welcome to a more advanced and optimized calculator. ©UnityInc." << endl;
    cout << "Please insert your desired numbers. First number should be carefully selected if you wish to raise to the exponent.";
    cin>>noI;
    cout<<"Great, now insert your other number: ";
    cin>>noII;
    calcu.setNumbers(noI, noII);
    cout<<"Very well, what kind of operation would you like? +, -, *, / or exponantiation(type **): ";
    cin>>operation;
    if(operation=='+')
        calcul.getAddition();
    else if(operation=='-')
        calcul.getSubstraction();
    else if(operation=='/')
        calcul.getDivision();
    else if(operation=='*')
        calcul.getMultiplication();
    else if(operation=='**')
        calcul.getExponent();
    else
        return function_calculator;

}

int main()
{
    function_calculator;
    return 0;
} 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:34:05.190

您有两个问题：一个是在`Calcu.cpp`错误消息所在的源文件中。您缺少 a `class`or `struct`before `Calcu`。

另一个问题是您尝试重新定义源文件中的类。您应该将完整的定义放在头文件中，并将方法的实现放在源文件中。

正如 WhozCraig 在评论中提到的，解决第二个问题也解决了第一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:36:58.637

这是基于您的问题的一些建议：

*   您不应在and中定义`Calcu`两次 。你应该安排你的代码，头文件只有类的成员和接口声明，并将所有实现放在文件中。`Calcu.cpp``Calcu.h``Calcu.cpp`

    *   对于`#include <header.h>` 代码中的语句，C++ 预处理器只会在此时展开头文件。所以扩展后，你的Calcu.cpp 会有两个定义，`class Calcu`哪个会有问题。
*   在`getExponent()`中，C++ 不支持`**`运算符。您应该使用数学库。（并且不能重载`**`运算符，因为 C++ 只支持存在运算符重载）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:45:35.133

我的Calcu.h 文件：

```
 #ifndef CALCU_H
 #define CALCU_H

class Calcu
{
    public:
        Calcu(){}

    void setNumbers(int x, int y){ no1=x, no2=y; }
    int getAddition() {return no1+no2;}
    int getSubstraction() {return no1-no2;}
    int getDivision() {return no1/no2;}
    int getMultiplication() {return no1*no2;}
    int getExponent(){ return //your exponent; }
private:
    int no1, no2;
};

#endif // CALCU_H 
```

我的Calcu.cpp 类文件：

```
#include "Calcu.h"
#include <iostream>
using namespace std; 
```

还有我的 main.cpp：

```
#include <iostream>
#include <Calcul.h>
using namespace std;

void function_calculator()
{
//...
}

int main()
{
    function_calculator();
    return 0;
} 
```

# wpf - 非活动窗口时继续处理 WPF 应用程序

> ID：15385447
> 
> 赞同：1
> 
> 时间：2013-03-13T12:32:00.637
> 
> 标签：wpf

一般来说，我是 Windows 编码的新手，所以请原谅我（可能不正确）使用术语。

我正在编写一个 WPF 应用程序，它允许您使用 vJoystick SDK 控制虚拟操纵杆。

我的代码基本上可以工作，但是当我切换到另一个应用程序（例如在 Windows 游戏控制器中预览虚拟控制器）时，它在不是活动窗口时停止工作。

我看过 WPF 中的“Workers”，但这似乎是为了别的（在进行一些计算时保持 UI 响应）

有人能指出我正确的方向，让 WPF 应用程序（或部分）在窗口不是活动的情况下继续运行吗？

TIA

# c++ - 用于排序的比较器

> ID：15385453
> 
> 赞同：5
> 
> 时间：2013-03-13T12:32:23.333
> 
> 标签：c++, visual-c++

我正在查看[http://www.cplusplus.com/reference/algorithm/sort/](http://www.cplusplus.com/reference/algorithm/sort/)并希望实现类似的东西：我定义了一个函数`clauseComparator`，就像`myfunc`提供的链接中的示例中给出的那样。

```
bool QueryEvaluatorPrivate::clauseComparator(QueryClause cl1, QueryClause cl2) {
    int priority1 = clausePriority(cl1), 
        priority2 = clausePriority(cl2);
    return priority1 < priority2;
} 
```

我像这样使用它：

```
sort(clauses.begin(), clauses.end(), clauseComparator); 
```

但是VS抱怨：

```
Error   4   error C3867: 'QueryEvaluatorPrivate::clauseComparator': function call missing argument list; use '&QueryEvaluatorPrivate::clauseComparator' to create a pointer to member   h:\dropbox\sch\cs3202\code\source\query\query evaluator\queryevaluator.cpp  138
Error   5   error C2780: 'void std::sort(_RanIt,_RanIt)' : expects 2 arguments - 3 provided h:\dropbox\sch\cs3202\code\source\query\query evaluator\queryevaluator.cpp  138 
```

首先出了什么问题（缺少 arg 列表）？我尝试按照错误中给出的建议添加`&`并最终得到

```
Error   4   error C2276: '&' : illegal operation on bound member function expression    h:\dropbox\sch\cs3202\code\source\query\query evaluator\queryevaluator.cpp  138
Error   5   error C2780: 'void std::sort(_RanIt,_RanIt)' : expects 2 arguments - 3 provided h:\dropbox\sch\cs3202\code\source\query\query evaluator\queryevaluator.cpp  138 
```

这里有什么问题？在我的理解中，它应该传递一个我理解的函数指针也应该被接受`sort`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T12:35:31.060

您需要将您的成员函数设为静态才能被`sort`. 在你的类头文件中，请这样声明：

`static bool QueryEvaluatorPrivate::clauseComparator(const QueryClause & cl1, const QueryClause & cl2);`

无需使用`bind`，因为您的比较器很可能（或不应该）需要访问类成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:35:29.953

您不能为此使用成员函数。做`clauseComparator`一个自由函数或`static`成员函数。

您的比较器还应该通过 const 引用获取参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:35:24.993

您必须使用`std::bind`将成员函数绑定到`std::sort`，否则您无法将成员函数绑定到`std::sort`

所以它会这样：

```
 sort(clauses.begin(), clauses.end(), std::bind(&QueryEvaluatorPrivate::clauseComparator, instance, args)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:54:12.110

因为 std::sort （它是这种类型，对吗？）被声明为

```
template <class RandomAccessIterator>
  void sort (RandomAccessIterator first, RandomAccessIterator last);

template <class RandomAccessIterator, class Compare>
  void sort (RandomAccessIterator first, RandomAccessIterator last, Compare comp); 
```

所以函数 comp 必须是：

> 接受范围内的两个元素作为参数并返回可转换为 bool 的值的二进制函数。返回的值指示作为第一个参数传递的元素是否被认为在其定义的特定严格弱排序中位于第二个之前。该函数不得修改其任何参数。这可以是函数指针或函数对象。

所以请让它成为全局函数

```
bool myfunction (QueryClause q1,QueryClause q2) { return (//condition); } 
```

或声明函子：

```
struct myclass {
  bool operator() (QueryClause q1,QueryClause q2) { return (//condition again);}
} myobjectcomparator; 
```

你需要：

```
QueryClause(const QueryClause &qc) { } 
```

保证一致性

# youtube-api - Google 是否已弃用 regionCodes？

> ID：15385454
> 
> 赞同：0
> 
> 时间：2013-03-13T12:32:30.323
> 
> 标签：youtube-api

这个问题参考了 Youtube Data API。

自 2 月 2 日/3 日（取决于您的时区）以来，所有国家/地区的标准区域提要没有更改，并且当使用新的 V3 API 指定 regionCode 的功能时，根据返回的搜索结果过滤搜索结果不会被此过滤参数（但不返回错误，因此它正在接受它）。

以下是一些标准区域供稿的网址（对于最新上传的视频，这是最容易显示此问题的），因此您可以自己检查：

[http://gdata.youtube.com/feeds/api/standardfeeds/US/most_recent](http://gdata.youtube.com/feeds/api/standardfeeds/US/most_recent)

[http://gdata.youtube.com/feeds/api/standardfeeds/UK/most_recent](http://gdata.youtube.com/feeds/api/standardfeeds/UK/most_recent)

我检查了 Youtube 错误日志、发布日志、更新、博客、RSS 提要以及我能找到的所有其他地方，但没有看到任何提及此问题的内容。

简而言之，我问的是谷歌是否已经弃用了 Youtube 的区域支持？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:06:13.473

YouTube 仍然有区域支持。您可以通过[videoCategories](https://developers.google.com/youtube/v3/docs/videoCategories/list)中的资源管理器进行尝试。另一方面，在 v3 中没有标准提要，在某些地方会有。

您的示例是针对 v2 的，即使支持仍在继续，也可能存在一些歧义，我会跟进。

# java - comm.jar 通信串口 java

> ID：15385455
> 
> 赞同：1
> 
> 时间：2013-03-13T12:32:31.377
> 
> 标签：java, serial-port

我在使用 comm.jar 时遇到问题。

问题是我连接了设备并使用此代码在池中启动了应用程序

```
 public static void main(String[] args) {
        Enumeration portList;
        CommPortIdentifier portId = null;
        portList = CommPortIdentifier.getPortIdentifiers();
        while (portList.hasMoreElements()) {
            portId = (CommPortIdentifier) portList.nextElement();
            System.out.println("port::" + portId.getName());

        }
        while (true) {
            try {
                Thread.sleep(2000);
            } catch (InterruptedException ex) {
                Logger.getLogger(JavaComPortFinding.class.getName()).log(Level.SEVERE, null, ex);
            }
            main(args);
        }
    } 
```

**输出 ：**

```
port::COM1
port::COM10 
```

一次轮询后，我已弹出设备。我仍然得到回应

```
port::COM1
port::COM10 
```

任何人都可以帮助我/建议在投票中获得动态响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:45:06.170

您可以尝试类似的方法，因为每次都应该重新创建 CommPortIdentifier。

```
class TestProgram
{
    public static void main(String[] args)
    {
        while(true)
        {
            try
            {
                Thread.sleep(2000);
            }
            catch(InterruptedException ex)
            {
                Logger.getLogger(TestProgram.class.getName()).log(Level.SEVERE, null, ex);
            }

            scanPorts();
        }
    }

    private static void scanPorts()
    {
        Enumeration portList;
        CommPortIdentifier portId = null;
        portList = CommPortIdentifier.getPortIdentifiers();

        while (portList.hasMoreElements())
        {
            portId = (CommPortIdentifier) portList.nextElement();
            System.out.println("port::" + portId.getName());

        }
    }
} 
```

**编辑 ：**

我刚刚使用 USB 上的 BlackBerry 在 Windows XP SP3 上测试了该程序。当我启动程序时，我看到了正常的 COM1 和 BlackBerry 的两个 COM 端口。断开 BlackBerry 后，端口将保留在设备管理器中。如果我手动删除它们，它们会在程序中消失（无需重新启动）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-04T17:11:46.347

[https://community.oracle.com/thread/2063873?start=0&tstart=0](https://community.oracle.com/thread/2063873?start=0&tstart=0)

在寻找类似问题的解决方案时，我发现上述资源非常有价值。

这里的主要问题是静态块`CommPortIdentifier`只加载一次并将端口信息缓存在字段变量`portList`中。当您调用该`getPortIdentifiers()`方法时，它将返回`portList`在初始加载期间检测到的端口。

解决方法是在 class 中重新加载静态块，`CommPortIdentifier`然后调用`getPortIdentifiers()`，这将重新加载驱动程序并为您提供更新的 COM 端口列表（这是在引用的链接中使用 Java Reflection API 完成的）。

祝你好运！

# asp.net - asp.net c#：在 LINQ 中使用 OR 条件绕过 Where 子句

> ID：15385457
> 
> 赞同：0
> 
> 时间：2013-03-13T12:32:34.903
> 
> 标签：asp.net, linq, drop-down-menu, conditional-operator

**数据库**：数据库中有三个表，其中 ID 为 int，Codes 为`string` `datatype`。例外（countryId 也是字符串）。

*   国家（国家 ID，国家代码...）
*   公司（公司 ID、国家 ID、年份、公司代码...）
*   中心（centerId，companyId，年份，centerCode...）

我正在尝试获得两个特定的**中心**，它们属于我知道**中心代码的两个不同****国家**。

 ****用户操作：用户从****国家**中选择一个选项（**特殊**），这是一个额外的同上，添加到给出随机值（即 CORP）的位置。 **`DropDownList``ListItem`**

 **```
_DropDownListCountry.Items.Insert(1, new ListItem("Special", "CORP")); 
```

**预期**当用户从 _DropDownListCountry 为特定**年份**选择上述选项时，应在另一个`DropDownList`(_DropDownListCenter) 中填充两个项目。该项目应（例如 1111 和 2222）在列表中。按**年与****中心**和**公司**有关系。

 ****问题**：结果显示为 (1111, 2222, 2222)，因为数据库中有两个**中心**，但**年份**不同。当我`||`在`LINQ`查询中使用时会发生这种情况。但我不明白（代码明智）为什么会发生。任何帮助将非常感激。

**代码**

```
public static IEnumerable<Center> RetriveCenterssByYear(short year)
    {
        List<Center> centers;
        using (var context = new crEntities())
        {
            centers = (from pc in context.Centers
                             join company in context.Companies on pc.CompanyID equals company.CompanyID
                             join co in context.Countries on company.CountryID equals co.CountryID
                             where pc.Year == year 
                                     && pc.CompanyID == company.CompanyID 
                                    && company.CountryID.Equals(co.CountryID)
                                    &&  pc.centerCode.Contains("1111")
                                    ||  pc.centerCode.Contains("2222")

                             select pc).ToList();

        }
        return centers;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:38:20.030

在周围添加一些括号

```
pc.centerCode.Contains("1111")
||  pc.centerCode.Contains("2222") 
```

所以你的情况看起来像

```
pc.Year == year 
&& pc.CompanyID == company.CompanyID 
&& company.CountryID.Equals(co.CountryID)
&&  (pc.centerCode.Contains("1111")
||  pc.centerCode.Contains("2222")) 
```

由于逻辑运算符具有相同的优先级，您的查询当前被解释为

```
(pc.Year == year 
&& pc.CompanyID == company.CompanyID 
&& company.CountryID.Equals(co.CountryID)
&&  pc.centerCode.Contains("1111"))
||  pc.centerCode.Contains("2222") 
```******

# excel - excel中的简单宏

> ID：15385458
> 
> 赞同：-1
> 
> 时间：2013-03-13T12:32:36.327
> 
> 标签：excel, vba

我是编写宏的初学者。我想验证特定的行。我的要求是，如果 Sheet2 第 20 行中的所有单元格都有“Y”，那么 Sheet1 第 20 行中的一个单元格应更新为“Y”。

我应该怎么做？最好的方法是什么？

提前感谢您的指导。

问候， 维维克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:26:34.660

感谢大家的回复:) 我已经尝试过我给出的公式，它工作正常。

```
=IF(AND(COUNTA(Sheet2!A20),COUNTA(Sheet2!B20),COUNTA(Sheet2!C20),COUNTA(Sheet2!D20),COUNTA(Sheet2!E20)), "Y", "N") 
```

另一个查询是如果在 sheet2 中 A20 的值 = 123，并且 B20 到 D20 = 'Y'，那么在 sheet1 中如何识别 'A' 列中的哪个单元格具有 '123' 并更新同一行中的 'B' 列“是”？

我们需要宏吗？或者我们可以用excel公式来做吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:41:50.663

你知道第 20 行有多少个单元格吗？你能识别出要测试的细胞吗？

我不确定您是否需要 VBA；我认为您可以使用简单的功能：

```
=IF(COUNTA(Sheet2!$Y$1:$Y$5)=COUNTIF(Sheet2!$Y1:$Y5,"Y"),"Y","") 
```

（根据OP的澄清更新。）还有其他几种方法可以做到，但我认为这是最简单的。

# hibernate - 使用 Jboss Jndi 查找访问 sessionFactory，例如 java:/hibernate/SessionFactory

> ID：15385459
> 
> 赞同：0
> 
> 时间：2013-03-13T12:32:36.127
> 
> 标签：hibernate, maven, jboss7.x, sessionfactory

我正在尝试使用 Jboss7.1.1.Final Jndi 查找在 maven 下访问 sessionFactory。

在部署它时，我正在登录以下日志

```
17:28:33,670 INFO  [org.hibernate.cfg.Configuration] (http-localhost-127.0.0.1-8080-1) configuring from resource: /hibernate.cfg.xml
17:28:33,671 INFO  [org.hibernate.cfg.Configuration] (http-localhost-127.0.0.1-8080-1) Configuration resource: /hibernate.cfg.xml
17:28:34,026 INFO  [org.hibernate.cfg.Configuration] (http-localhost-127.0.0.1-8080-1) Configured SessionFactory: java:/hibernate/SessionFactory

17:28:35,785 INFO  [org.hibernate.impl.SessionFactoryImpl] (http-localhost-127.0.0.1-8080-1) building session factory
17:28:36,535 INFO  [org.hibernate.impl.SessionFactoryObjectFactory] (http-localhost-127.0.0.1-8080-1) Factory name: java:/hibernate/SessionFactory
17:28:36,537 INFO  [org.hibernate.util.NamingHelper] (http-localhost-127.0.0.1-8080-1) JNDI InitialContext properties:{}

17:28:36,546 INFO  [org.hibernate.impl.SessionFactoryObjectFactory] (http-localhost-127.0.0.1-8080-1) Bound factory to JNDI name: java:/hibernate/SessionFactory 
```

现在在使用以下代码进行投射时

```
Context ctx1=new InitialContext();
Object obj1=ctx1.lookup("java:/hibernate/SessionFactory");
SessionFactoryImpl sess= (SessionFactoryImpl)obj1; 
```

我得到如下异常

```
17:28:36,691 ERROR [stderr] (http-localhost-127.0.0.1-8080-1) java.lang.ClassCastException: org.hibernate.impl.SessionFactoryImpl cannot be cast to org.hibernate.impl.SessionFactoryImpl 
```

我为此使用的依赖项是

```
<dependency>
<groupId>org.hibernate</groupId>
<artifactId>hibernate-entitymanager</artifactId>
<version>4.0.1.Final</version>
</dependency> 
```

我的xml是

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
    "-//Hibernate/Hibernate Configuration DTD//EN"
    "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory name="java:/hibernate/SessionFactory">
    <property name="connection.url">jdbc:postgresql://localhost:5432/DUMY</property>
    <property name="connection.driver_class">org.postgresql.Driver</property>
    <property name="connection.username">postgres</property>
    <property name="connection.password">postgres</property>
    <property name="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</property>        

    <property name="hibernate.session_factory_name">java:/hibernate/SessionFactory</property>          
    .
    .
    .

    </session-factory>
</hibernate-configuration> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:11:34.080

我把整个数据库访问逻辑放在无状态会话 bean 中让它工作，它对我来说很好:)

# python - Python 和 Ruby 解释器

> ID：15385462
> 
> 赞同：3
> 
> 时间：2013-03-13T12:32:39.303
> 
> 标签：python, ruby

我在书中读到您能够将其他语言的脚本合并到 Python 中。是否可以从 ruby​​ 脚本中获取变量，将它们传递给 python 函数，然后将输出返回给 Ruby？如果是这样，怎么做？每一个答案将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T12:46:11.860

这里有几种方法*可以*做到。请注意，这些都没有异常高性能：

*   这可能有点矫枉过正，但我​​之前使用过套接字编程来[建立 Python 和 Ruby 之间的客户端-服务器关系](http://michaeljgilliland.blogspot.com/2013/03/communication-between-python-and-ruby.html)。至少这种方法*感觉*很酷。

*   您可以从一个通用文件中写入和读取。但是你不得不担心[并发问题](http://en.wikipedia.org/wiki/Readers-writers_problem)。

*   [反引号](https://stackoverflow.com/questions/6338908/ruby-difference-between-exec-system-and-x-or-backticks)可用于向 Python 模块发送内容。在 Python 模块中，您将使用它`argv`来处理发送的数据，然后将一些结果返回给 Ruby 代码。

有关更多信息，我建议查看[另一个类似的 StackOverflow 问题](https://stackoverflow.com/questions/837256/how-do-i-invoke-python-code-from-ruby)。

# javascript - JS/ASP.Net：将 varchar 数据类型转换为 smalldatetime 数据类型导致值超出范围

> ID：15385466
> 
> 赞同：0
> 
> 时间：2013-03-13T12:32:49.077
> 
> 标签：javascript, asp.net

我对 Javascript 和 ASP.Net 有疑问

我有一个在 ASP.Net 4.0 中构建的页面，带有来自 DevExpress 的 Ajax。如果我在 Visual Studio 2010 中调试项目，页面工作正常，即使我在 IE 中调试 javascript 代码，Visual Studio 可以在其中调试脚本。

当我将同一页面发布到普通服务器时，这不再起作用。如果我单击显示模式弹出窗口的按钮，则会发生错误。我想将它用作所有回发的加载面板，这适用于所有其他事件以及页面是否正在加载。

但是如果我单击此按钮，则不会出现弹出窗口，并且 IE 显示以下错误：

```
SCRIPT5022: Sys.WebForms.PageRequestManagerServerErrorException: The conversion of a varchar data type to a smalldatetime data type resulted in an out-of-range value 
```

如果我在 IE 中调试 Javascript，则错误源于此函数：

```
_endPostBack: function PageRequestManager$_endPostBack(error, executor, data) {
        if (this._request === executor.get_webRequest()) {
            this._processingRequest = false;
            this._additionalInput = null;
            this._request = null;
        }

        var eventArgs = new Sys.WebForms.EndRequestEventArgs(error, data ? data.dataItems : {}, executor);
        Sys.Observer.raiseEvent(this, "endRequest", eventArgs);
        if (error && !eventArgs.get_errorHandled()) {
            throw error;
        }
    } 
```

知道有什么问题吗？

# ios - 弹出到根 ViewController 时如何释放内存、对象、视图控制器

> ID：15385468
> 
> 赞同：0
> 
> 时间：2013-03-13T12:33:00.440
> 
> 标签：ios, objective-c, release, uistoryboardsegue

我正在使用包含大约 5 个 ViewController 的导航控制器 segue。每个 ViewController 都位于另一个 ViewController 之前，例如安装应用程序。最后一个 ViewController 包含一个按钮，通过这句话可以让你回到第一个 ViewController：

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

我的问题是，我怎样才能释放所有对象，ViewController，我在第一次执行应用程序期间存储的内存，当我单击按钮返回第一个 ViewController 时，将环境作为第一次执行。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:35:35.567

此方法弹出堆栈上除根视图控制器之外的所有视图控制器。

# iphone - Opengl 着色器问题 - 奇怪的光反射伪影

> ID：15385474
> 
> 赞同：5
> 
> 时间：2013-03-13T12:33:09.760
> 
> 标签：iphone, ios, opengl-es, 3d, glsl

这几天我一直在为此苦苦挣扎。我想我终于把它缩小到每个顶点切线的问题，但我不确定修复它的最佳方法。

上下文是 iPhone 应用，opengl es2 使用我自己的引擎。我的着色器是一个凹凸贴图（法线贴图）变体，使用提供的每个顶点切线来创建 TBN 矩阵。顶点着色器将光照向量和眼睛向量转换为切线空间，将它们传递给片段着色器并计算光照。但是我的前两个测试模型中的一些几何图形在照明中显示出奇怪的伪影。在高光组件中最容易看到。

在尝试调试时，我用平面法线 png 替换了法线贴图。所有像素都是 128,128,255。我还硬编码了颜色。

我的第一个模型是按钮形状。它将工件显示为外环上的扇形镜面反射。需要注意的重要一点是，这里的 UV 映射方法是“平坦的”，以使垂直于映射的侧面基本上将纹理划过那里。我认为这会使该几何形状的切线难以计算，因为其中两个点将具有完全相同的纹理坐标。

我尝试调试渲染将 gl_FragColor 设置为不同的变量。当将其设置为每个顶点法线时，我们看到扇形消失了，这表明法线是正确的。但是当将它设置为每个顶点的切线时，您可以看到扇贝。

![在此处输入图像描述](../Images/ddc172e4838634a69d47011b39f8b501.png)

下一个形状是一个简单的球体。有了它，模型的顶部和底部就是工件显示的地方。在线框中，您会看到这是几个三角形在一个顶点相交的地方。我无法理解这对切线意味着什么，因为每个三角形在那里都有完全不同的 UV 映射。

我想如果我不显示着色器代码，我会受到很多抨击......

顶点着色器：

```
v_fragmentTexCoord0 = a_vertexTexCoord0;

gl_Position = u_modelViewProjectionMatrix * vec4(a_vertexPosition,1.0);

vec3 normal = normalize(u_normalMatrix * a_vertexNormal);
vec3 tangent = normalize(u_normalMatrix * a_vertexTangent);
vec3 bitangent = cross(normal, tangent);
mat3 TBNMatrix = mat3(tangent, bitangent, normal);

v_eyeVec =  -a_vertexPosition.xyz;
v_eyeVec *= TBNMatrix;

v_lightVec = u_lightPosition - a_vertexPosition.xyz;
v_lightVec *= TBNMatrix;

v_normal = a_vertexTangent; 
```

片段着色器：

```
vec3 norm = texture2D(u_normalSampler, v_fragmentTexCoord0).rgb * 2.0 - 1.0;
vec4 baseColor = vec4(0.6015625,0.0,0.0,1.0); // is normally texture2D(u_textureSampler,v_fragmentTexCoord0);

float dist = length(v_lightVec);
vec3 lightVector = normalize(v_lightVec);
float nxDir = max(0.0, dot(norm, lightVector));
vec4 diffuse = u_lightColorDiffuse * nxDir;
float specularPower = 0.0;
if(nxDir != 0.0)
{
    vec3 cameraVector = v_eyeVec;
    vec3 halfVector = normalize(v_lightVec + cameraVector);
    float nxHalf = max(0.0,dot(norm, halfVector));
    specularPower = pow(nxHalf, u_shininess);
}
vec4 specular = u_lightColorSpecular * specularPower;

gl_FragColor = (diffuse * vec4(baseColor.rgb,1.0)) + specular; 
```

在试图找出着色器并查看我能找到的所有在线示例和教程时......我很困惑为什么凹凸贴图着色器不会仅仅干扰 3d 模型提供的法线贴图。我想如果没有某种参考点，你怎么知道如何修改模型的正常值？通过什么方向？我想这就是 TBN 矩阵的用途。但在我上面的测试中，法线贴图中的法线向量是 0,0,1 - 直线向上。所以看起来它根本不应该修改它。任何乘以 1 的东西仍然是 1。但是在数学或 TBN 矩阵中一定有一些东西搞砸了，以至于它没有得出与 3d 模型中的法线相同的法线。然后这个想法让我印象深刻..在我的顶点着色器中我' m 还首先将顶点法线乘以 normalMatrix 以使其进入模型空间。但是话又说回来，那些调试渲染是顶点法线在转换之前的。

是否有另一种方法可以在不使用 TBN 矩阵的情况下扰乱模型的法线？在没有法线贴图的情况下使用 phong 着色器进行渲染不会显示伪影。

**更新：**我几乎可以肯定问题是导入应用程序创建的预计算切线。在尝试了具有不同 UV 贴图的不同模型后，我发现了相似的外观问题，有时它是黑暗而不是高光。因此，除非我可以在没有 TBM 矩阵的情况下应用法线贴图或转换为切线空间，否则我将需要找到另一个导入器。

**更新#2：** 我刚刚发现另一个问题，这听起来可能是真正问题的线索。 [3d 图形、单位向量和正交矩阵](https://stackoverflow.com/questions/4553503/3d-graphics-unit-vectors-and-orthogonal-matrices)

需要注意的是，这些奇怪的灯光不会出现在顶点上，而只会出现在它们之间。即使在球体上，我们也看到了一个位于顶部顶点和正下方顶点之间的环。我开始相信这是一个插值问题。只取其中一个三角形：

![在此处输入图像描述](../Images/9c029621cebb220e2bc66ad91d265f36.png)

第二个原因是我正在重新计算它，忽略坏的双切线。但是切线具有相反的极性。因此，在这两个状态之间进行插值时，您将获得指向各处的向量。

新问题是我该如何解决？修复切线？修复着色器来处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T06:23:20.463

有时最简单的答案就是正确的答案。切线很糟糕。它们与法线不正交。

我使用此处描述的方法手动重新计算了所有切线和双切线：

[http://www.terathon.com/code/tangent.html](http://www.terathon.com/code/tangent.html)

这个问题就消失了。

# c++ - 为什么我们可能想把类名放在方法之前？

> ID：15385476
> 
> 赞同：0
> 
> 时间：2013-03-13T12:33:12.387
> 
> 标签：c++, templates, syntax

我有一个具有以下结构的代码：

```
aaa::bbb<ccc>
ccc::func_name(type1 arg1, type2 arg2)
{
   something1;
   aaa::bbb<ccc> obj_name(variable);
   something2;
} 
```

它看起来类似于函数模板，但在函数模板中我们应该放在`template <class class_name>`方法之前。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T12:36:02.950

`aaa::bbb<ccc>`是 的返回值的类型`ccc::func_name()`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T12:36:17.303

你的意思是这样的：

```
std::vector<Point>
Point::func_name(type1 arg1, type2 arg2)
{
   something1;
   std::vector<Point> obj_name(variable);
   something2;
} 
```

它是一个方法的正常声明，它返回另一个对象，该对象恰好是模板类的实例。显然有人认为它比

```
std::vector<Point> Point::func_name(type1 arg1, type2 arg2) {...} 
```

这意味着完全相同

# sql - Oracle SQL：在例如 4 小时内进行计数和求和？

> ID：15385479
> 
> 赞同：1
> 
> 时间：2013-03-13T12:33:30.017
> 
> 标签：sql, function, stored-procedures, oracle11g

我对已经解决的 Q 有一个后续问题（[Oracle SQL：Counting in 4h?](https://stackoverflow.com/questions/14981334/oracle-sql-counting-in-4h)）。

如果在显示的数据样本中还有另一列，金额列，我想做与解决方案中建议的一样的事情

```
select t.*, 
from (select t.*, lag(dt, 6) over (partition by employeeId order by dt) as ord6dt
      from t
     ) t
where dt - ord6dt < 4.0/24 
```

, 一个额外的条件总和金额列 > 10？

所以查询应该只列出那些在 4 小时内有 6 个订单的人 AND `sum(order_value)>10`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:52:27.380

您刚刚回顾 6 行的解决方案（这可能不是满足 4 小时前的第一个订单）。因此，添加另一个分析以保持该解决方案：

```
select *
from (select t1.*, lag(dt, 6) over (partition by employee order by dt) as ord6dt,
             sum(order_value) over (partition by employee order by dt rows 6 preceding) val
      from emptest t1
     ) 
where dt - ord6dt < 4.0/24
  and val >= 10; 
```

将再次只计算 6 行（如果我们在过去四个小时内有超过 6 个订单，这可能会错过一些真正的匹配）。

我们可以对此进行建模：

```
select *
  from (select *
          from emptest
        model
        dimension by (employee, dt)
        measures (  order_value, order_id, 0 order_sum, 0 number_of_orders)
        rules (
          order_sum[any,any] = sum(order_value)[cv(employee), dt between cv(dt)-(4/24) and cv(dt)],
          number_of_orders[any,any] = count(*)[cv(employee), dt between cv(dt)-(4/24) and cv(dt)]

        ))
 where order_sum > 10
   and number_of_orders >= 6
order by employee, dt; 
```

它会在 4 或更多时查找 number_of_orders，并且还会检查 4 小时内的计数。

小提琴：[http ://sqlfiddle.com/#!4/3045d/1](http://sqlfiddle.com/#!4/3045d/1)

# javascript - 代码在小提琴中有效，但在网页上无效

> ID：15385482
> 
> 赞同：2
> 
> 时间：2013-03-13T12:33:33.707
> 
> 标签：javascript, jquery, html, forms

已经在小提琴中尝试和测试过代码，目的是在顶部下拉列表中有 1 时隐藏第二列，这适用于小提琴，但网页上没有任何变化。有任何想法吗。

测试网页位于实时站点上，位于此处：[http ://www.specialfinance.co.uk/introducers/submit-an-enquiry/secured-loans2.html](http://www.specialfinance.co.uk/introducers/submit-an-enquiry/secured-loans2.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:36:15.010

您的 jQuery 代码在元素进入 DOM 之前执行。将其包装在[DOM Ready](http://api.jquery.com/ready/)处理程序中以解决该问题：

```
$(function() {
    //your code here
    $("#selectList").change(function() {
        if ($(this).val() == "1") {
           $(".showMe").hide();
        }
        else {
            $(".showMe").show();
        }
    });
}); 
```

您的小提琴有一个 onLoad 包装器（页面的左上角），它会自动将您的代码包装在一个`window.onload`函数中。

`window.onload`也可以，但是当你有一个包含图像和其他资源的大页面时，它比准备好 DOM 的处理程序花费的时间要长得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:36:37.957

将您的 jquery 包含在`document.ready()`处理程序中，如下所示：

```
$(document).ready(function() {
   $("#selectList").change(function() {
       if ($(this).val() == "1") {
          $(".showMe").hide();
       }
       else {
           $(".showMe").show();
       }
   });
}); 
```

# android - Android，获取图库图像并以整数形式存储

> ID：15385486
> 
> 赞同：1
> 
> 时间：2013-03-13T12:33:39.347
> 
> 标签：android, image, integer, gallery

我正在从图库中获取图像，我想将选择的图像存储在一个整数中。我已经尝试了一切，但没有任何帮助，我的代码是

```
private void getGalleyImage() {
    Intent fileChooserIntent = new Intent();
    fileChooserIntent.addCategory(Intent.CATEGORY_OPENABLE);
    fileChooserIntent.setType("image/*");
    fileChooserIntent.setAction(Intent.ACTION_GET_CONTENT);
    startActivityForResult(
            Intent.createChooser(fileChooserIntent, "Select Picture"), 1);

} 
```

我正在获取图像，但我无法以整数存储该图像，我尝试了 uri 和位图，然后是字节数组，我想将它们存储为整数。提前致谢。

# iphone - 如何正确显示俄语字符

> ID：15385498
> 
> 赞同：1
> 
> 时间：2013-03-13T12:34:05.393
> 
> 标签：iphone, encoding

我正在获取这些数据

```
\U2013\U00ee\U2013\U00b5\U2014\U00c7\U2014\U00c5\U2013\U222b\U2013\U220f\U2013\U00b5 \U2013\U00f8\U2013\U00b5\U2014\U00c5\U2013\U03a9\U2013\U220f - \U2013\U00f5\U2013\U00ef\U2013\U00ed \U2013\U00f2 \U2013\U00eb\U2013\U2020\U2013\U00ea\U2013\U00ee\U2013\U00fb\U2013\U00eb\U2013\U2020\U2013\U00ef\U2013\U00f4 
```

我需要展示它。如果我在 a 中显示它`UILabel`，它会显示如下：

```
î–µ—Ç—Å–∫–∏–µ –ø–µ—Å–Ω–∏ - –õ–ï–í –ò –ë–†–ê–î–û–ë–†–ï–ô 
```

什么控件可以正确显示字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:07:26.333

我认为问题在于没有选择正确的控件——任何 UI 控件都应该能够做到这一点。

我怀疑您的问题在于解码上述字符串并为其分配正确的编码。

请向我们展示根据上述数据创建 NSString 的代码，我相信这就是您的错误。

此外，您的代码似乎根本不是西里尔文。有关西里尔字母及其代码（以 unicode 表示）的示例，请参见此处：

[http://webdesign.about.com/od/localization/l/blhtmlcodes-ru.htm](http://webdesign.about.com/od/localization/l/blhtmlcodes-ru.htm)

这是西里尔字母的等效输出：

```
NSString *s = @"\u0414\u0411";
NSLog (@"%@", s); 
```

印刷品：ДБ

因此，您自己的代码是正确的，但那里没有西里尔字母代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:10:35.297

首先你的 Unicode 字符串是错误的（提示你必须是小写字母）

**使用此代码**

```
 NSString *str = @ "\u00fb\u2013\u00eb\u2013\u2020\u2013\u00ef\u2013\u00f4";

    const char *getchar = [str UTF8String];
    NSString *getText = [NSString stringWithCString:getchar encoding:NSUTF8StringEncoding];

    NSLog(@"getText %@", getText); 
```

**输出**

getText û–ë–†–ï–ô</p>

# php - 用php中的对象替换字符串

> ID：15385502
> 
> 赞同：0
> 
> 时间：2013-03-13T12:34:16.890
> 
> 标签：php, xml

我正在尝试使用 PHP 将 HTML 输入转换为 XML 输出 我一直在使用 XML Writer 函数来创建 XML 输出，但我正在寻找修改字符串示例字符串

```
this is some text <span class"bold">this is bold text</span> normal text 
```

但需要输出为

```
this is some text
    <text:span text:style-name="bold">this is bold text</text:span>
normal text 
```

我对 Object PHP 很陌生，所以不确定最好的方法。

我到目前为止的代码如下

```
$xml->startElement("office:body");
    $xml->startElement("office:text");
         preg_match_all("/\<p\>(.*)\<\/p\>/",$data['Content'],$matches);
         foreach ($matches[1] as $paragraph)
         {
             $xml->startElement("text:p");
                  $xml->text("$paragraph");
             $xml->endElement();
         }
     $xml->endElement();
$xml->endElement(); 
```

这显示了我如何将字符串分成段落，但现在我正在寻找任何格式的 $paragraph 的内容应该包含首先提到的字符串并希望提到输出。任何帮助都会很棒

贵宾32

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:04:57.337

我认为你需要第一个 simplehtmldom 库来首先读取 html 数据： [http ://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

# php - 通过引用传递 array_unshift 调用的弃用通知 - 没有 pbr 不起作用

> ID：15385504
> 
> 赞同：0
> 
> 时间：2013-03-13T12:34:21.437
> 
> 标签：php

我有 PHP 5.3.8，我得到的错误是在这一行：

```
array_unshift($this->parents, &$this->parent); 
```

$this->parent 的值来自：

```
$this->parent[$key] = array();
$this->parent = &$this->parent[$key]; 
```

错误信息是：

> 已弃用：第 136 行的 /var/www/vhosts/mauilistings.net/httpdocs/xml/kd_xmlrpc.php 中已弃用调用时传递引用

取下 & 符号没有帮助，该功能不再起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:36:12.077

来自[PHP 文档](http://php.net/manual/en/language.references.pass.php#language.references.pass)：

> `&`从 PHP 5.3.0 开始，当您使用in时，您将收到一条警告说“调用时传递引用”已被弃用`foo(&$a);`。从 PHP 5.4.0 开始，调用时传递引用已被删除，因此使用它会引发致命错误。

# ios - iOS 显示 tableview 标题图片（视差效果）

> ID：15385509
> 
> 赞同：3
> 
> 时间：2013-03-13T12:34:33.597
> 
> 标签：ios, uitableview, uiimageview

我正在尝试设置一个大图像，当表格视图进一步下拉时显示更多，..我知道我没有任何意义，展示[我从 netbot 记录的示例](http://vine.co/v/bdKrALdOheD)更容易。

请让我知道正确的术语是什么，我会更新标题。（**更新：**显然它被称为视差效应）

我尝试设置`UIImageView`并`self.tableView.backgroundView`为第一部分添加透明标题。但它没有相同的感觉。它从图像的顶部而不是中心显示，它在 iPad 纵向和 iPhone 横向上被拉伸和挤压（我已经尝试了所有`contentMode`）。

我也尝试过设置`UIImageView`tableView 标题。启用`clipsToBounds`确实会显示图像的中心部分，但我无法让它*显示更多*图像。

一个名为[“我的艺术家](https://itunes.apple.com/au/app/my-artists/id365565608?mt=8)”的应用程序也有这个，但他们的没有反弹。那么，知道 Tapbots 的优秀开发人员是如何解决这个问题的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-24T12:10:20.027

这很奇怪。我很确定我已经接受了这个问题的答案。无论如何，答案是[ZGExpandZoomView](https://github.com/zhigang1992/ZGExpandZoomView)

# php - php回调脚本

> ID：15385510
> 
> 赞同：0
> 
> 时间：2013-03-13T12:34:33.650
> 
> 标签：php, callback

我正在尝试为我的网站制作回调函数。我看过一些 PHP 脚本，但我无法将脚本链接到输入文本框。我的 PHP 脚本被称为`callback.php`. 这是我的 HTML 代码：

```
<form action="callback.php" method="post" accept-charset="utf-8">

        <label id="Name"><br><br><br><br>Name<br> 
            <input name="nameinput" type="text" style="width: 300px; height: 30px;" /> </label>

        <label id="Email"><br><br>Email Address<br> 
            <input name="emailinput" type="text" style="width: 300px; height: 30px;" />  </label>

        <label id="Number"><br><br>Phone Number<br> 
            <input name="numberinput" type="text" style="width: 300px; height: 30px;" />  </label>

        <label id="Subject"><br><br>Subject<br> 
            <input name="subjectinput" type="text" style="width: 300px; height: 30px;" /> </label>

        <label id="Question"><br><br>Question<br> 
            <input name="questioninput" type="text" style="width: 300px; height: 70px" />
            <br><br> </label>

        <input name="Submit" type="submit" value="submit" />

        </form> 
```

我有我的表单，我尝试过使用其他 PHP 脚本，当我单击表单上的提交按钮时，它就像是下载一样。脚本是否必须在`.php`页面上，或者我可以将其合并到 HTML 中并将其放在表单上方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:40:01.180

如果页面被视为下载，这意味着服务器不知道如何提供文件。这可能意味着您没有安装 PHP，或者 Apache 可能没有正确设置。

PHP 可以是您想要的任何文件扩展名，但 Apache 需要知道使用 PHP 引擎处理该扩展名。例如（在`.htaccess`）：

```
AddType application/x-httpd-php .html 
```

这告诉 Apache`.html`使用 PHP 引擎运行扩展文件。`mod_rewrite`如果您希望`.html`扩展显示和保留带有扩展的 PHP 文件，建议的方法是使用`.php`。

HTML 代码可以与 PHP 代码混合。我建议阅读 PHP 的基础知识。

# javascript - 如何获取“getJSON”响应标头

> ID：15385514
> 
> 赞同：8
> 
> 时间：2013-03-13T12:34:43.527
> 
> 标签：javascript, rest, jquery

我需要使用 $.getJSON 访问从另一台机器（跨域请求）获得的响应消息的大小，虽然我可以在 chrome 控制台中看到请求和响应，但它不起作用。这是我的请求代码：

```
xhr=$.getJSON('http://192.168.1.102/server/server.php?callback=?',   
{data:array}, function(res){
alert(xhr.getAllResponseHeader());
}, 
type='json'); 
```

运行时出现“Uncaught TypeError: Object # has no method 'getAllResponseHeader'”错误。当我使用

```
alert(xhr.getResponseHeader("Content-Length")); 
```

我得到“空”。

请考虑我正在使用跨域获取。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T14:12:20.953

不要使用 JSONP，它不是真正的跨域请求（[JSONP 解释](https://stackoverflow.com/questions/10289789/i-dont-get-how-jsonp-is-any-different-from-ajax)），它是一种仅适用于 GET 请求的 hack，而 AJAX 允许任何 http 方法。

尝试准备您的服务器以允许跨域请求（[更多详细信息](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)）并执行以下操作：

```
$.ajax({
type: "get",
url: "http://192.168.1.102/server/server.php",
crossDomain: true,
cache: false,
dataType: "json",
contentType: "application/json; charset=UTF-8",
data: array,
success: function(data, textStatus, xhr) {
    console.log(data);
    console.log(xhr.getResponseHeader("Content-Length"));
},
error: function (xhr, textStatus, errorThrown) {
    console.log(errorThrown);
}}); 
```

因此，设置了 xhr 对象，您可以访问它的标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:43:02.247

试试这个：

```
xhr=$.getJSON('http://192.168.1.102/server/server.php?callback=?',   
  {data:array}, function(res,status,xhr){
    alert(xhr.getAllResponseHeaders()); 
    // not getAllResponseHeader its only getResponseHeader
}); 
```

供`cross domain`使用

```
$.ajax({
  url: 'http://192.168.1.102/server/server.php?callback=?',
  dataType: 'json',
  jsonpCallback: 'MyJSONPCallback', // specify the callback name if you're hard-coding it
  success: function(data){
    // we make a successful JSONP call!
  }
}); 
```

请参阅此[jQuery getJSON 在本地工作，但不能跨域](https://stackoverflow.com/questions/6849802/jquery-getjson-works-locally-but-not-cross-domain)

文档和[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)`getAllResponseHeaders` _`getResponseHeader``ajax`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-29T09:03:42.977

我观察了许多对这个问题的访问，并认为提供这个问题的解决方案是件好事。不幸的是，所提供的解决方案都不起作用，我做了两件事来解决这个问题。

1.  我确认我`<?php`在服务器端的标签后面有以下代码：

    ```
    header("Content-Type: application/*");
    header("Access-Control-Allow-Origin :*");
    header("Access-Control-Allow-Methods: POST, GET, OPTIONS");
    header("Access-Control-Max-Age: 1000");
    header("Access-Control-Allow-Headers: Content-Type"); 
    ```

2.  我稍微改变了拨打电话的方式，如下所示，它总是对我有用。

    ```
    function name(){
        $.ajax({
            type: 'POST',
            crossDomain: true,
            data: {
                data1: data
            },
            dataType: 'text',
            error: function (res, textStatus, errorThrown) {
                alert('Connection Terminated. Please try again');
            },
            success: function(res, textStatus, jqXHR) {
            //Process the result in res;
            },
        });//ajax
    }//function name 
    ```

# sharepoint - 如何重复使用相同的页面布局，但应用不同的样式？

> ID：15385520
> 
> 赞同：0
> 
> 时间：2013-03-13T12:34:56.740
> 
> 标签：sharepoint, sharepoint-2010, page-layout

我目前正在使用 SharePoint 2010 在工作中创建 Intranet。我对它的经验非常有限。

我需要创建一个页面布局。在我看来，页面布局是一种在页面中显示不同容器的方式，而不是设置页面样式。也许我在这里错了，如果是这样，你可以告诉我。

我当前创建的布局将在 Intranet 的许多子部分中重复使用。问题是他们希望这些部分中的每一个都有自己的颜色。

如果不创建具有不同样式的相同页面布局，我不知道如何做到这一点。我想要实现的是重复使用相同的页面布局，但根据子站点应用不同的 CSS。

起初我以为主题会是要走的路，但似乎它太有限了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:54:28.067

你是对的，页面布局不应该有样式。这也是共享点所做的。

样式/品牌（SharePoint 术语）取决于母版页 CSS 链接和主题。

对于您的情况，最好为不同的站点使用不同的站点主题。转到站点设置-> 外观-> 站点主题。

但是如果所有站点都有不同的母版页，那么您可以在母版页中放置不同的 CSS 链接，这是冗长的和开发人员的工作，

谢谢 如果您还有问题，请告诉我。

# ruby-on-rails - 为什么我的自定义延迟作业在本地和 Heroku 上的初始化不同？

> ID：15385525
> 
> 赞同：1
> 
> 时间：2013-03-13T12:35:10.157
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, initialization, delayed-job

我在延迟工作中有一个自定义工作：

```
class ImportJob < Struct.new(:my_datasource)
 include Apartment::Delayed::Job::Hooks

 def initialize(my_datasource)
  @database = Apartment::Database.current_database
  @my_datasource = my_datasource
 end

 def perform
  ...
 end
end 
```

这在开发中运行良好，但在 Heroku 上却不行。

调试时，我发现在开发中变量`database`并`my_datasource`设置正确，但在生产中（在 Heroku 上），我有`@database`并且`@my_datasource`可用。

我不明白为什么同一个类不会在两个环境中初始化相同的变量。

任何人都可以请阐明并告诉我我是否做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:36:42.873

不确定这是否是正确的解决方案，但我发现 Heroku 在我使用 1.9.3 时使用的是 Ruby 1.9.2。

在 Heroku 上升级到 1.9.3 解决了我的问题。

# magento - 使用观察者创建自定义选项和奖品以将产品添加到购物车

> ID：15385532
> 
> 赞同：0
> 
> 时间：2013-03-13T12:35:28.707
> 
> 标签：magento, option, checkout, product, observers

我想使用观察者将自定义选项添加到quoteitem，观察者 checkoutCartProductAddAfter 事件并在产品添加到购物车后触发。

```
public function checkoutCartProductAddAfter(Varien_Event_Observer $observer)
{

$item = $observer->getQuoteItem();  
  $item->addOption(new Varien_Object(
        array(
                'product' => $item->getProduct(),
                'label' => 'Free Gifts',
                'value' => 'Spend $50 and get gift product worth $9.99'
             )
    ));
return;

} 
```

我的观察员正在工作，但我无法为添加的产品添加自定义选项。请提供帮助以使用观察者将自定义选项添加到刚刚添加的产品中，
还可以让我在观察者中更改产品的自定义价格。我想将自定义价格添加为零。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:43:06.570

您应该使用“additional_options”，而不是使用“自定义选项”。看看我的回答 [@Magento 动态属性/选项保存到购物车](https://stackoverflow.com/questions/12594352/magento-dynamic-attribute-option-save-to-cart)

另见

*   [Magento - 基于用户输入的报价/订单产品项目属性](https://stackoverflow.com/questions/9412074/magento-quote-order-product-item-attribute-based-on-user-input/9496266#9496266)

*   [在将产品添加到购物车时更改报价中的价格：magento](https://stackoverflow.com/questions/9721583/changing-the-price-in-quote-while-adding-product-to-cart-magento)

# database - 用于连接到远程服务器的连接字符串（SQL Server 2008 r2 express）

> ID：15385536
> 
> 赞同：0
> 
> 时间：2013-03-13T12:35:35.163
> 
> 标签：database, vb6, connection-string

我需要连接到另一台机器的服务器。如果这很重要，我正在使用 VB6。

这是我到目前为止所做的：

1.  启用的协议

2.  配置固定端口

3.  防火墙中打开的端口

**我在这里错过了什么吗？**

这是我在**服务器**中使用的连接字符串：

*"Provider=SQLOLEDB.1;Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=Enrollment;Data Source=D506D89D71AC41F"*

它工作正常，但是**客户端**的连接字符串如何连接到服务器计算机上的 SQL Server？

抱歉，我现在无法测试，因为我正在使用单台电脑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:08:37.480

如前所述，最好通过名称而不是 IP 地址连接到服务器。

您可能错过的部分是 SQLBrowser 服务。SQLBrowser 允许您将 SQL Server 实例名称重新映射到它的端口号，类似于用于 IP 地址的 DNS 服务器。

我建议这样做：

1.  确保 SQLBrowser 服务已启动。单击开始 -> 运行，键入 Services.msc。向下滚动到“SQL Server 浏览器”。确保此服务设置为自动并已启动。

2.  SQL Server Browser 使用 udp 端口​​进行外部连接，因此您需要在防火墙中打开 UDP 端口 1433。

此时，您应该能够使用 servername\instancename 进行连接，其中连接字符串中有 Data Source 参数。

"Provider=SQLOLEDB.1;Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=Enrollment;Data Source=D506D89D71AC41F\Name_Of_Instance"

如果您使用的是默认实例（看起来好像是这样），那么您根本不需要更改连接字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:38:24.130

为了让客户端连接到服务器，您需要将数据源替换为有效的 URL。就像是：

```
Provider=SQLOLEDB.1;Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=Enrollment;Data Source=sql.mywebsite.com 
```

# jquery - 禁用滚动 iPad 的惯性

> ID：15385540
> 
> 赞同：0
> 
> 时间：2013-03-13T12:35:56.913
> 
> 标签：jquery, ipad, scroll, scrolltop

松开手指后，如何使 iPad Safari 浏览器停止滚动？即无惯性滚动？

我试图在 jQuery 中找到解决方案，但没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:52:08.343

您可以使用 jQuery scoll 插件。www中有很多插件（例如[http://manos.malihu.gr/jquery-custom-content-scroller](http://manos.malihu.gr/jquery-custom-content-scroller)等...）。只是谷歌“jQuery滚动条插件”......

祝你好运

# sitecore - 如何在 Sitecore 内容编辑器中选择项目

> ID：15385543
> 
> 赞同：1
> 
> 时间：2013-03-13T12:36:00.210
> 
> 标签：sitecore

我有一个纯粹的 UI 向导，它从用户那里收集信息，然后在 sitecore 中创建一个内容项。该向导使用命令模板启动。

我希望向导使新创建的内容项成为内容编辑器中当前选定的项，但我不知道如何执行此操作。有谁知道这是怎么做到的？

**更新**

Trayek 的建议让我更进一步。我现在在用于启动向导的命令中获得了以下代码：

```
[Serializable]
public class MyNewContentCommand : Command
{

    public override void Execute(CommandContext context)
    {
        ClientPipelineArgs args = new ClientPipelineArgs();
        args.Parameters["id"] = context.Parameters["id"];
        Context.ClientPage.Start(this, "Run", args);
    }

    protected void Run(ClientPipelineArgs args)
    {
        if (!args.IsPostBack)
        {
            // This runs when the users clicks to add the item
            // in the content editor. 

            // Launches a modal wizard to collect user data

            string id = args.Parameters["id"];

            string controlUrl = Sitecore.UIUtil.GetUri("control:MyNewItemWizard");
            UrlString urlStr = new UrlString(controlUrl);
            urlStr.Append("id", id);

            SheerResponse.ShowModalDialog(urlStr.ToString(), true);
            args.WaitForPostBack();

        }
        else if (args.HasResult)
        {
            // This runs once the wizard has finished

            // Wizard passes ID of created item in its result
            // This is used to find the newly created item.
            Item created = Client.GetItemNotNull(ID.Parse(args.Result));

            // Sending these messages result in refreshing the child items
            // of the parent. And they work.
            Context.ClientPage.SendMessage(this, string.Format("item:updated(id={0})", created.Parent.ID));
            Context.ClientPage.SendMessage(this, string.Format("item:refreshchildren(id={0})", created.Parent.ID));

            // This message should select the new item in content editor, but
            // it doesn't have the desired effect.
            Context.ClientPage.SendMessage(this, string.Format("item:load(id={0})", (object)created.ID));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:49:01.147

阅读[此](http://sitecoreblog.blogspot.co.uk/2011/10/open-content-editor-on-specific-item.html)链接。它为您提供 3 个选项：

*   生成一个 URL 并链接到它

*   从 XAML 应用程序打开它

*   从 JavaScript 打开它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:19:10.463

很抱歉回答我自己的问题。出现此问题的原因是“刷新内容树中的项目”命令和“选择内容树中的项目”命令之间似乎存在竞争条件。我必须将选择命令延迟几毫秒才能使其工作。

```
Context.ClientPage.SendMessage(this, 
    string.Format("item:updated(id={0})", created.Parent.ID));
Context.ClientPage.SendMessage(this, 
    string.Format("item:refreshchildren(id={0})", created.Parent.ID));
Context.ClientPage.ClientResponse.Timer(
    string.Format("item:load(id={0})", created.ID), 100); 
```

# c++ - 如何在重新绘制之前清除 QwtPlot 曲线？

> ID：15385561
> 
> 赞同：5
> 
> 时间：2013-03-13T12:36:43.033
> 
> 标签：c++, qt, qwt

在`Qwt`我们添加的早期版本中，`QwtPlot::clear()`但现在，我找不到它。

有任何想法吗？我有一个实时绘图，因此在重新绘图时，xmin 之前的信息并不重要，并且随着时间的推移它会崩溃，因为重新绘图正在重新绘制 xmin 之前的所有信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T13:46:18.670

该方法`Qwtplot::clear()`已被弃用。改为使用`QwtPlotDict::detachItems`。

```
void QwtPlotDict::detachItems(int rtti = QwtPlotItem::Rtti_PlotItem, 
                              bool autoDelete = true 
                             ) 
```

参数：

> **rtti**：在 QwtPlotItem::Rtti_PlotItem 的情况下，分离所有项目，否则只有 rtti 类型的项目。 **autoDelete**：如果为 true，则删除所有分离的项目

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-06T06:15:18.527

清除绘图的一种方法是将数据点设置为空：例如： (m_vctTime,m_vctValue -vector) (curve=new QwtPlotCurve()) (plot=new QwtPlot(parent))

```
m_vctTime.clear();
m_vctValue.clear();
curve->setSamples(m_vctTime,m_vctValue);
plot->replot(); 
```

清除你的情节

# git - 检出铬的特定发行代码

> ID：15385564
> 
> 赞同：1
> 
> 时间：2013-03-13T12:36:47.620
> 
> 标签：git, build, chromium

使用 google-chromium 代码的[newGit](https://code.google.com/p/chromium/wiki/UsingNewGit) checkout，它要求我将远程存储库设置[为此](https://chromium.googlesource.com/chromium/src.git). 现在，当我查看源代码时，我只看到那里的主干分支。我需要检查一个特定的先前版本。如何结帐？一种解决方案可能是检查日志，然后再恢复，但如果我想查看一年前发布的版本，这可能会很麻烦。那么如何找到铬代码的修订版？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:44:42.653

您可以使用 git-svn 查看特定版本。但是请注意，git 哈希与现有 chromium git 镜像中的哈希不匹配。Chromium 只在 git 中跟踪 master；Chromium 版本通常位于 SVN“分支”的中途。请参阅[https://code.google.com/p/chromium/wiki/UsingGit#Working_with_release_branches](https://code.google.com/p/chromium/wiki/UsingGit#Working_with_release_branches)

# javascript - ASP.NET Web 控件中的 JavaScript 冲突

> ID：15385571
> 
> 赞同：0
> 
> 时间：2013-03-13T12:37:08.103
> 
> 标签：javascript, asp.net, user-controls, conflict

伙计们。我在 google 中搜索了我的问题的答案，但我能找到的只是关于 asp.net web contros 生成的 HTML 元素的唯一 ID 的解决方案。**但这不是我要找的。**我需要的是一种对我的 Web 控件的 javascript 进行编程的方法，当同一页面中有多个实例时，它不会发生冲突。例如，考虑以下简单的用户控件，它有一个文本框和一个按钮，当用户单击该按钮时，它会显示一个带有 thext 框值的警报：

现在想象我们有两个或更多这样的用户控制实例。我如何确保 javascript 将显示正确文本框的消息，因为它们的 ID 将动态生成并且彼此完全不同？我知道如何在运行时发现这些 ID，这不是问题。但问题是如何对用户控件进行编程，以便 javascrip 仅引用实例的元素以使其成为一部分，就像我的简单用户控件示例中的按钮一样。如果有十个用户控件，那么它将是十个按钮，当然还有十个文本框。我认为这里的简单警报消息开始变得有点不太简单。

但也许这真的很简单，我只是不知道怎么做。感谢任何可以帮助我的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:21:02.030

有很多方法可以解决这个问题。

我喜欢使用的一种是编写 JS 函数，这样它们就不会显式引用任何元素，而是接收元素（或元素 ID）作为参数。然后在您的（用户）控件背后的代码中，构建一小段 JS，它只设置 OnClientClick 或调用 jQuery（或其他）将元素绑定在一起。

一个例子应该更清楚：

**MyUserControl.ascx**

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="MyUserControl.ascx.cs" Inherits="MyUserControl" %>
<div style="border: 1px solid gray; margin: 1em;">
    My ID = "<%= ID%>"<br />
    <asp:TextBox runat="server" ID="tbx" />
    <asp:Button runat="server" ID="btn" Text="Alert!" />
</div> 
```

**MyUserControl.ascx.cs**

```
protected void Page_Load(object sender, EventArgs e)
{
    var script = string.Format("ShowAlert('{0}'); return false;", tbx.ClientID);
    btn.OnClientClick = script;
} 
```

**MyUserControl.js**

```
function ShowAlert(textboxId)
{
    var textbox = jQuery("#" + textboxId);
    alert(textbox.val());
} 
```

**其他地方（页面，父控件，...）**

```
<head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="MyUserControl.js"></script>
</head>
<body>
<form id="form1" runat="server">
    <div>
        <my:UserControl runat="server" ID="control1" />
        <my:UserControl runat="server" ID="control2" />
        <my:UserControl runat="server" ID="control3" />
        <my:UserControl runat="server" ID="control4" />
        <my:UserControl runat="server" ID="control5" />
    </div>
</form>
</body> 
```

这样，执行工作的实际 JS 只包含一次，所有必要的控件 ID 都作为参数传递。

当然，最好使用 jQuery 的`on()`函数（或类似的机制，具体取决于您使用的框架）将函数绑定到事件，而不是使用 OnClientClick，这样标记最终会尽可能地没有 JS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:47:47.843

使用 Clientidmode 并将点击事件处理程序（javascript）附加到每个按钮。然后通过使用 javascrpt/jquery 获取按钮 id 并获取最后两位数字并通过将从按钮 id 获得的最后两位数字附加到静态文本“txtEcho”来获取相应的文本 id

例子：

文字控制：

```
 ID="txtEcho01" runat="server" ClientIDMode="Static" 
```

按钮控制：

```
ID="btnEcho01" runat="server" ClientIDMode="Static" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:38:22.053

解决方案之一是将单击事件侦听器附加到父元素，然后在函数回调中侦听元素。通过这种方式，您根本不必担心 ID，您可以仅基于类或事件源类型进行工作。[检查此链接](https://stackoverflow.com/questions/8752321/jquery-live-vs-on-method-for-adding-a-click-event-after-loading-dynamic-ht)

检查以下伪代码

```
<div class="portion" >

...
<input type="button"...>

<div/>

//jquery psudo code
$(".portion").live(function(e){
if (e.target == input){
//do action
}
}); 
```

# ruby - 哪个在编码方面更好，一个长的数据库连接和传递对象，还是多个短的数据库连接？

> ID：15385574
> 
> 赞同：1
> 
> 时间：2013-03-13T12:37:15.137
> 
> 标签：ruby, database, dbi

我正在编写一个 ruby​​ 脚本，它将在多个表中连接到一个数据库，但我不确定哪个更好：

*   有一个连接并传递对象

*   拥有我创建的连接方法，然后返回连接

*   当我在一个方法中需要它们时有多个连接

我很新，不确定哪个更好/行业标准/等等。

关于 stackoverflow 的其他几篇文章提到，连接在其他一些语言中存在一段时间，这对于连接到数据库或仅某些语言/环境的任何东西都是如此吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:40:18.430

我建议使用[单例](http://en.wikipedia.org/wiki/Singleton_pattern)对象。Ruby 有一个用于创建单例的[标准模块。](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/singleton/rdoc/Singleton.html)

您不希望每次需要运行查询时都连接到数据库的开销。将连接作为参数传递给每个需要它的方法也不是一个很好的设计模式。

对于大型或复杂的应用程序，一个常见的策略是使用[连接池](http://en.wikipedia.org/wiki/Connection_pool)。

有关的：

*   [Ruby 中的数据库连接池](https://stackoverflow.com/questions/11993241/database-connection-pooling-in-ruby)

# plone - Plone 4 敏捷视图表单 - 将 css 类添加到字段集 X 中的小部件

> ID：15385575
> 
> 赞同：2
> 
> 时间：2013-03-13T12:37:18.267
> 
> 标签：plone, dexterity, z3c.form

我有一个基于灵活性的内容类型，在架构中定义了不同的编辑视图和字段集。每当我想更新第一个字段集中的小部件/字段时，它就会变得很糟糕。例如：

```
self.groups[0].fields['my_field'].mode = HIDDEN_MODE 
```

必须用于隐藏`my_field`第二**个**字段集。使相同的字段成为必填项

```
self.schema['my_field'].required = True 
```

成功了。

但是，如何将 css 类添加到第一个字段集以外的另一个小部件？我的意思是，什么

```
self.fields['my_field_on_first_fieldset'].widget.addClass("myClass") 
```

如果我的小部件位于第一个字段集“页面”上，就可以了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:15:53.607

按照[Martin Aspeli 的教程](http://plone.org/products/dexterity/documentation/manual/schema-driven-forms/customising-form-behaviour/widgets-1)，我测试了您的请求，并且可以确认奇怪的是，无法将 klass 属性应用于子字段集中的不可见小部件，并在引用小部件名称时返回“键错误”。

使用其他属性，fe 'size'，没有问题。

相反，您可以通过 Javascript 应用该类。

如果您想在客户端未启用 Javascript 的情况下提供回退，您可以在 updateWidget() 中添加一个条件，检查它是否已启用，如果未启用，则使用 addClass() 分别应用 klass-attribute 类。这将起作用，因为所有字段都显示并且不再隐藏。

# gradle - 使用 gradle 进行依赖管理

> ID：15385577
> 
> 赞同：2
> 
> 时间：2013-03-13T12:37:26.777
> 
> 标签：gradle

我有一个以下 gradle 构建脚本

```
apply plugin: 'java'

sourceSets {
    test {
        java {
            srcDir 'tests'
        }
    }
    main{
        java {srcDir 'web-schedule\\src'}
    }
}

repositories {
    mavenCentral()
}

dependencies {

    compile 'javax:javaee-api:6.0'
    compile 'javax:javaee-web-api:6.0'

    testRuntime 'org.jboss.arquillian:arquillian-bom:1.0.3.Final'
    testRuntime 'org.jboss.arquillian.junit:arquillian-junit-container:1.0.3.Final'
    testRuntime 'org.jboss.arquillian.container:arquillian-glassfish-remote-3.1:1.0.0.CR3'
    testRuntime 'junit:junit:4.+'
    testRuntime 'org.jboss.weld:weld-api:1.1.Final'

} 
```

我尝试使用 gradle 实现全自动编译和测试执行。基本上问题是库依赖关系。为了在没有测试的情况下编译项目本身，我只需要关注库

```
compile 'javax:javaee-api:6.0'
compile 'javax:javaee-web-api:6.0' 
```

但是对于测试编译，我还需要其他所有内容。但是在测试编译过程中，如果我有它，它会引发异常。我发现该解决方案将其排除在测试编译和执行过程之外。现在我手动做。我想要实现的是完全自动完成。我需要做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:10:19.417

我不明白为什么你必须删除除前两个之外的所有依赖项来编译生产代码，因为`testRuntime`那里不涉及配置。不确定是否必须删除前两个依赖项才能进行测试编译，但肯定必须删除它们才能执行测试。这是我会尝试的：

```
sourceSets {
    test {
        runtimeClasspath -= configurations.compile
        // additionally try this:
        // compileClasspath -= configurations.compile
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-05T21:07:40.057

javaee-api-6.0.jar 是一个格式错误的jar，它没有方法体，只有签名。所以在运行时无法使用它。所以你可以从你的测试类路径中排除这个特定的库：

```
configurations {
    testRuntime.exclude module: 'javaee-api'
} 
```

# javascript - 在javascript中重新定义数组构造函数

> ID：15385588
> 
> 赞同：7
> 
> 时间：2013-03-13T12:38:00.200
> 
> 标签：javascript

假设我有以下代码：

```
var secrets;
Array = function() {
  secrets = this;
}; 
```

上述示例的作者说代码正在重新定义 Array 构造函数。首先，我不确定`this`指的是什么。有人可以请教吗？

第二：下面的代码是等价的吗？

```
var secrets;
function Array() {
  secrets = this;
} 
```

顺便说一下，上面的代码取自以下关于 Json 漏洞的文章：[见这里](http://haacked.com/archive/2008/11/20/anatomy-of-a-subtle-json-vulnerability.aspx)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T13:09:07.467

在这两个示例中，您都将变量定义`Array`为`function`分配`this`给`secrets`. 碰巧已经存在一个全局对象，称为`Array`页面中的其他 JS 可能会或可能不会用作`Constructor`创建数组。如果您弹出控制台并将 Array 重新分配为其他内容，您可能会开始从显式依赖`Array`. 但是，字面上用 with 制作的数组`[]`仍然可以正常工作，事实上，它们`__proto__`仍然指向`Array.prototype`. 所以：

```
var arr1 = new Array('a','b','c');
// arr[0] -> 'a'

var arr2 = ['d','e','f'];
// arr[0] -> 'd'

var secrets;
Array = function() { secrets = this; };

var arr3 = new Array('g','h','i'); // nothing wrong here, because Array is a function
// arr3[0] -> undefined
// Array is just a function, you can't make arrays with new Array anymore
// and arr3 is just a function

var arr4 = ['j','k','l'];
// arr4[0] -> 'j'
// making array literals still works 
```

至于`this`，没什么奇怪的，还是遵循着的规则`this`。您分配函数的事实`Array`不会改变`this`行为方式。所以`this`指向浏览器中的全局对象，`window`除非您实例化`new`或使用`call`或`apply`

两个示例之间的区别在于函数表达式和函数声明之间的区别，请参阅：[Javascript 中函数表达式与声明之间的区别是什么？](https://stackoverflow.com/questions/1013385/what-is-the-difference-between-a-function-expression-vs-declaration-in-javascrip)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:05:58.993

是的，两个片段是等效的。两者都重新定义了数组构造函数，以试图拦截注入它的网站使用的所有数组数据，如链接文章中所述。的值`this`应该是新构造的数组。

这似乎是 ECMAScript 3 允许的，但 ECMAScript 5 不允许，现在所有现代浏览器都可以使用。所以文章中描述的漏洞应该不再起作用。

# css - CSS3 包装盒外淡入/淡出

> ID：15385592
> 
> 赞同：2
> 
> 时间：2013-03-13T12:38:12.720
> 
> 标签：css, wrapper, fade

[http://jsfiddle.net/Ru54p/](http://jsfiddle.net/Ru54p/)

CCS3：

```
#wrapper {
    position: relative;
    width: 660px;
    max-width: 70%;
    background: #ccc;
    padding: 30px;
    margin: 0 auto;
    border-radius: 4px 4px 4px 4px;
    text-align: center;
}

.fade { 
    opacity: 1;
    transition: opacity .25s ease-in-out;
    -moz-transition: opacity .25s ease-in-out;
    -webkit-transition: opacity .25s ease-in-out;
}

.fade:hover {
    opacity: 0.5;
} 
```

html:

```
<div class="fade">
    <div id="wrapper">
            BLAH<BR>
            BLAH<BR>
            BLAH<BR>
    </div>
</div> 
```

正如您在 jsfiddle 中看到的那样，由于某种原因，当您将光标悬停在框外时它会逐渐消失......我认为它与宽度有关，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:44:46.837

那是因为你的内部 div 即带有类包装器的 div 的宽度只有父 div 的 70%，即带有类淡入淡出的 div。

并且您已将不透明度 css 即 .fade 应用于父级

所以要么将内部 div 的宽度增加到 100%，即

```
#wrapper {
    position: relative;
    width: 660px;
    max-width: 100%;
    background: #ccc;
    padding: 30px;
    margin: 0 auto;
    border-radius: 4px 4px 4px 4px;
    text-align: center;
    } 
```

或在包装器上应用悬停属性，即在包装器上应用 .fade 类

```
<div >
     <div id="wrapper" class="fade">
         BLAH<BR>BLAH<BR>BLAH<BR>
    </div>
</div> 
```

[小提琴](http://jsfiddle.net/manishmishra256/mqRfW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:46:18.797

A`div`默认是块级的，所以它会占用所有可用的宽度。您正在将您的过渡应用到`.fade`班级，但看起来您只希望`#wrapper`自己淡出。

尝试将背景颜色应用于`.fade`块以说明发生了什么。解决方法是将您的不透明度等添加到您的`#wrapper`中，或者在您的类上设置另一个属性`fade`以限制宽度（例如将其设置为`display: inline-block;`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:47:55.820

我已经更新了代码，

你有错误的 div 序列，

检查这个小提琴[http://jsfiddle.net/Ru54p/3/](http://jsfiddle.net/Ru54p/3/)

我希望这会做:)

**CSS**

```
#wrapper {
    position: relative;
    width: 660px;
    max-width: 70%;
    background: #ccc;
    padding:0;
    margin: 0 auto;
    border-radius: 4px 4px 4px 4px;
    text-align: center;
}

.fade {
    width:100%; 
    height:100%; 
    padding:10px 10px;
    opacity: 1;
    transition: opacity .25s ease-in-out;
    -moz-transition: opacity .25s ease-in-out;
    -webkit-transition: opacity .25s ease-in-out;
}

.fade:hover {
    opacity: 0.5;
} 
```

**HTML**

```
<div style="background:#222">
    <br /><div id="wrapper">
    <div class="fade">
    BLAH<BR />BLAH<BR />BLAH<BR />
    </div></div>
    <br />
</div> 
```

# css - 如何在 Windows 8 应用商店应用程序的不同设备上使用屏幕区域的所有高度设置自动列数？

> ID：15385593
> 
> 赞同：0
> 
> 时间：2013-03-13T12:38:15.543
> 
> 标签：css, layout, windows-store-apps, winjs, internet-explorer-10

**使用 Javascript + HTML**进行 Windows 8 应用商店应用程序开发，我正在寻找一种简单的方法来布局具有一些长文本内容和一些图像的页面，以通常“自动”按顺序调整文本列数让用户**避免必须垂直滚动**才能阅读文本。我的意思是，当然，为了避免“尽可能多地”，这意味着如果设备处于横向模式，内容将跨越列，仅垂直使用可用的高度并根据需要添加尽可能多的列。

如果我做这样的事情：

```
@media screen and (-ms-view-state: fullscreen-landscape)
{
    #main {
        width: 100%;
        height: 100%;
        display: -ms-grid;
        -ms-grid-columns: 1fr 300px;
        -ms-grid-rows: 132px 1fr;
    }
} 
```

我总是最终***只***指定一个 2 列和 2 行的布局，无论我会使用百分比、分数还是像素......

我想在纵向模式下，通常仍然有一个单列会感觉更自然，不是吗？但至少，对于*横向*情况，我不确定如何处理它，因为我们发现 Windows 8 设备的屏幕尺寸类型众多。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:21:42.150

**更新：** 我刚刚意识到您不是在寻找如何指定要显示多少列，而是在寻找有关如何让长内容溢出到多个列中的提示。很抱歉造成误解。我在下面的原始答案仍然解决了指定在需要时使用多少列的问题。

有一些用于指定列的 CSS 规则（宽度、列数、装订线等）。与`height`规则一起使用，您可能可以实现您正在寻找的东西。尝试这样的事情：

```
#main {
    column-count: auto;
    column-width: 200px;
    height: 360px;
    overflow: auto;
} 
```

下面链接的 MSDN 文章讨论了所有这些选项，但 IE“动手”站点将让您实时玩弄。

参考：

*   [MSDN 文章：多列布局](http://msdn.microsoft.com/en-us/library/ie/hh673534%28v=vs.85%29.aspx)
*   [IE“动手”网站](http://ie.microsoft.com/testdrive/Graphics/hands-on-css3/hands-on_multi-column.htm)

* * *

**原答案：**

您可以根据宽度使用不同的 CSS。例子：

```
@media screen and (max-width:800px) 
{
    #main {
        /* overrides for width less than 800 */
    }
}
@media screen and (min-width:800px) and (max-width:1200px)
{
    #main {
        /* overrides for width between 800 and 1200 */
    }
} 
```

参考：

*   [Metro：了解 CSS 媒体查询](http://stephenwalther.com/archive/2012/02/29/metro-understanding-css-media-queries.aspx)
*   [W3C：媒体查询](http://www.w3.org/TR/css3-mediaqueries/)

# java - web.xml 中的 Servlet url 映射如何使用？

> ID：15385596
> 
> 赞同：24
> 
> 时间：2013-03-13T12:38:19.650
> 
> 标签：java, jakarta-ee, servlets

我有一个包含内容的 web.xml 文件：

```
<servlet>
    <servlet-name>servlet1</servlet-name>
    <servlet-class>org.mycompany.test1</servlet-class>
</servlet>
<servlet>
    <servlet-name>servlet2</servlet-name>
    <servlet-class>org.mycompany.test2</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>servlet1</servlet-name>
    <url-pattern>/path/test</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>servlet2</servlet-name>
    <url-pattern>/path/test/*</url-pattern>
</servlet-mapping> 
```

我尝试了请求

```
.../path/test/abc 
.../path/test 
```

这两个请求都由 Servlet2 处理。为什么？

**更新**

谢谢你们的帮助。我意识到行为取决于 servlet-mapping 声明的顺序。我试过这个 web.xml

```
<servlet>
    <servlet-name>servlet1</servlet-name>
    <servlet-class>org.mycompany.test1</servlet-class>
</servlet>
<servlet>
    <servlet-name>servlet2</servlet-name>
    <servlet-class>org.mycompany.test2</servlet-class>
</servlet>
<servlet>
    <servlet-name>servlet3</servlet-name>
    <servlet-class>org.mycompany.test3</servlet-class>
</servlet>
<servlet>
    <servlet-name>servlet4</servlet-name>
    <servlet-class>org.mycompany.test4</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>servlet1</servlet-name>
    <url-pattern>/path/test</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>servlet2</servlet-name>
    <url-pattern>/path/test/*</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>servlet3</servlet-name>
    <url-pattern>/path/*</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>servlet4</servlet-name>
    <url-pattern>/path</url-pattern>
</servlet-mapping> 
```

结果：

```
.../path/test/abc - servlet2
.../path/test/ - servlet2
.../path/test - servlet2

.../path/abc - servlet3
.../path/ - servlet4
.../path - servlet4 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-13T13:24:09.793

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:28:23.483

你的路径冲突。

您的两条路径的含义相同，“/ *”没有任何区别。显然，当你尝试你的路径时，最后一个匹配（servlet2）被执行。

您通常使用 Servlet 名称输入路径，例如：

```
/path/test/servlet1
/path/test/servlet2 
```

# java - 返回字符串数组时出现空指针异常。在 main 方法中，返回的数组没有被复制到另一个数组，即 String[] as

> ID：15385602
> 
> 赞同：-2
> 
> 时间：2013-03-13T12:38:41.673
> 
> 标签：java, arrays

```
import java.io.*;
import java.util.*;

public class DAOImpl implements DAO
{
    String xs[];
    public String[] readRecord()
    {
        try
        {
            BufferedReader br=new BufferedReader(new FileReader("insurance.db"));
            BufferedReader br1=new BufferedReader(new InputStreamReader(System.in));

            List<String> al1= new ArrayList<String>();
            String next;
            while((next=br.readLine())!=null)
            {
                al1.add(next);
            }
            System.out.println("Enter record number to read:");
        int x=Integer.parseInt(br1.readLine());

        String stream=(al1.get(x-1));

        String[] xs=stream.split(":");
        }

        catch (FileNotFoundException ex)
        {
                    ex.printStackTrace();
            } 
        catch (IOException ex) 
        {
                    ex.printStackTrace();
        }
        return xs;          
    }
    public static void main(String args[])throws Exception
    {
        DAOImpl d=new DAOImpl();

        String as[]=d.readRecord();
        //here compiler saying nullpointerexcdeption

        for(int v=0;v<as.length;v++)
        {
            System.out.println(as[v]);
        }
    }
} 
```

我认为问题在于声明对象然后调用 readRecord()。主要问题是我返回到方法 readRecord() 的数组。当我制作对象并调用 readRecord() 时，它将返回 String[] 中的所有数据。但它没有做那个编译器给出nullPointerException。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:42:16.513

```
String[] xs=stream.split(":"); 
```

去掉上面的类型，即

```
xs=stream.split(":"); 
```

当您包含类型声明时，您正在创建一个与 try 块本地名称相同的新变量，而不是分配给类级字段。这被称为“阴影”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:45:32.983

`String[] xs`您分配的变量是在`try`块中本地声明的，并且隐藏了声明为类字段的变量，女巫仍然为空。删除该行中的类型`String[]`声明`split`。

# iphone - 在 contentMode UIViewContentModeScaleAspectFit 时禁用 UIImageView 调整大小行为

> ID：15385604
> 
> 赞同：0
> 
> 时间：2013-03-13T12:38:44.257
> 
> 标签：iphone, ios, objective-c, uiimageview, uiimage

我`UIImageView`有`contentMode = UIViewContentModeScaleAspectFit`

我需要这种模式才能正确显示我的图像。**但我也需要 imageView 裁剪图像，当它的框架像** `UIViewContentModeTopLeft`.

我怎样才能得到这个？

编辑：

```
imageView.contentMode = UIViewContentModeTopLeft;
imageView.image = someImage; 
```

现在我明白了（没关系，图像缩放正确并且看起来不错）：

![在此处输入图像描述](../Images/76ede5daf1ea92793880663f845196dc.png)

然后，我有方法：

```
- (void)setRating:(double)rating {
      double starWidth = imageView.image.size.width / _maxRating;
      CGRect oldFrame = self.frame;
      imageView.frame = CGRectMake(0, 0, rating * starWidth, oldFrame.size.height);
      _rating = rating;
} 
```

在这种方法之后，我需要得到类似的东西：

![在此处输入图像描述](../Images/d23f4f7d9b4086256bdac1be4d8af7ac.png)

**但是因为`UIViewContentModeScaleAspectFit`我得到了缩放图像**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:07:33.017

在没有大量额外工作的情况下，您无法在您尝试的方法中真正从该 imageView 中获得您想要的东西。当您调整视图大小时，您会看到缩放，这就是您设置的模式，这就是真正会发生的一切。有许多可能性，其中许多涉及通过子类化自己调整大小。但至于解决方案：

1.  在运行之前调整您的艺术，然后您不需要为每个用户和每次运行的每个显示的这些星星进行缩放。拯救电子！
2.  将 imageView 作为子视图添加到您将与 imageView 的缩放大小匹配的其他容器视图，然后调整大小以剪辑您不想显示的 imageView 部分。

# asp.net - 如何从服务器外部成功访问 Web 服务？

> ID：15385606
> 
> 赞同：-1
> 
> 时间：2013-03-13T12:38:46.520
> 
> 标签：asp.net, web-services, iis

自从我可以访问 Windows Server 2008 机器以来，我一直习惯于在我公司的项目中实现 asp webservices。

现在我想拥有/租用我自己的 IIS 服务器，托管我自己的 web 服务，并能够在我的项目中添加对这个 web 服务的引用，例如查询不同的数据库，托管在不同的地方，来自不同的应用程序（WP应用程序或桌面应用程序）。

问题是：

*   我的互联网提供商不允许我拥有静态 IP，所以我不能将自己的计算机用作 IIS 服务器（尽管如果有一个免费的解决方案可以通过动态 IP 从外部访问我的服务器，我会有兴趣）
*   我尝试了来自第 3 方 IIS 托管服务器的免费报价，但似乎我只能从包含的网站内部访问我的网络服务，但不能从我的 WP 应用程序访问我的网络服务（即使我编辑了我的 web.config 以将我的网络服务重定向到一个 url ，Visual Studio 永远不会检测到它）。

我真的不知道第三方托管公司是否提供此功能，我想知道解决方案是否是租用专用服务器，但仍然没有指定是否可以从外部访问 Web 服务。

什么是适合我需要的最佳选择？或者甚至有您知道他们会提供此功能的知名公司吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:57:03.220

您可以查看[http://www.noip.com/](http://www.noip.com/)之类的内容来解决您被迫使用动态 IP 的问题。

# macos - Mac OS 上的文件路径问题

> ID：15385611
> 
> 赞同：1
> 
> 时间：2013-03-13T12:39:06.063
> 
> 标签：macos, qt

我有在 Mac 上显示 QImage 的问题；

> QImage image0("../Images/image0.png");

该图像在 Windows 和 Ubuntu 上显示良好。这绝对是 ../ 的问题，因为如果在 Mac 上使用完整文件路径，则图像显示正确（我真的不想使用完整文件路径）。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:23:56.733

该文件路径将尝试访问相对于应用程序当前目录的文件（可通过 Qt 访问`QDir::current()`）。如果您没有明确设置它，那么平台之间可能会有所不同。我怀疑您实际上想要做的是访问与应用程序可执行文件相关的图像，该图像可通过`QCoreApplication::applicationDirPath()`. 我发现对于 GUI 应用程序最好避免使用相对路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:24:33.757

With Mac applications once they're built you have a `Application.app` file which contains a directory structure with your `Application` binary inside, so the path is relative to that. Using the resource system will make your life much easier in this case, as you can register them and Qt will compile them in.

If you right click on your application you can select `View Package Contents` and you'll be able to see the structure on the files.

# java - 在 Spring security 2.0.2 中如何在登录后重定向到请求的 url

> ID：15385616
> 
> 赞同：2
> 
> 时间：2013-03-13T12:39:30.603
> 
> 标签：java, spring, login, spring-security, login-control

在我的应用程序中，我正在向用户发送一封电子邮件，其中包含指向 jsp 的链接。如果用户单击该链接但未登录，则将重定向到登录页面，成功登录后将重定向到默认登录页面。

我希望当用户成功登录时，它应该被重定向到用户提交请求的同一页面（链接页面），而不是默认页面。

我正在使用 Spring Security 2.0.2。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:40:03.067

使用 SavedRequestAwareAuthenticationSuccessHandler 定义 yourAuthenticationFilter

```
 <bean id="yourAuthenticationFilter" class="yourAuthenticationFilterClass">  
        <property name="authenticationSuccessHandler">
            <bean class="org.springframework.security.web.authentication.SavedRequestAwareAuthenticationSuccessHandler" />
        </property>
    </bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T05:17:34.980

我找到了答案。我在扩展的自定义身份验证过滤器中添加了以下几行`AuthenticationProcessingFilter`

```
HttpSession session = request.getSession(false);
        SavedRequest savedRequest = null; 
        if (session != null) {
            savedRequest = (SavedRequest) session.getAttribute(SPRING_SECURITY_SAVED_REQUEST_KEY);
        } 
```

savedRequest 对象存储最后一次请求的 url，认证成功后可以设置为目标 url。

PS 这项工作在 Spring security 2.0 中。

# jpa - 从 jdbc 到 open jpa 的转换

> ID：15385622
> 
> 赞同：-1
> 
> 时间：2013-03-13T12:39:45.823
> 
> 标签：jpa, jdbc

我是打开jpa环境的新手，我需要转换jdbc代码才能打开jpa，请帮我解决这个问题。我正在用这篇文章发布 jdbc 代码。

```
//error.java//
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.Statement;

public class ErrorDAO
{

DataConnection jdbcConnection = null;

public ErrorDAO()
{
    jdbcConnection = new DataConnection();  

}
 public static void main(String[] args) {
    ErrorDAO errorDAO = new ErrorDAO();
    long errid = errorDAO.getErrorId("POTENTIAL VIOLATION");
    String[] details = errorDAO.getErrorDetails(errid);

    System.out.println(details[0]);
    System.out.println(details[1]);

}

public String[] getErrorDetails(long errid)
{
    String[] details = new String[2];
    System.out.println("The input error id = " + errid);

    try {
        Connection connection = jdbcConnection.getConnectionInstance();
        Statement stmt = connection.createStatement();
        String query = "SELECT * FROM VARBALAS.ERROR_MASTER WHERE ERRORID = "+errid;
        ResultSet rs = stmt.executeQuery(query);

        while (rs.next())
        {
            details[0] = rs.getString("ERRDESC");
            details[1] = rs.getString("SEVERITY");

        }
       rs.close();

}
catch(Exception e)
{
    e.printStackTrace();
}

    return details;
}

public long getErrorId(String errDesc)
{
    long errid = 0 ;
    try {
        Connection connection = jdbcConnection.getConnectionInstance();
        Statement stmt = connection.createStatement();
        String query = "SELECT ERRORID FROM VARBALAS.ERROR_MASTER WHERE ERRDESC = '"+errDesc+"'";
        ResultSet rs = stmt.executeQuery(query);

        while (rs.next())
        {
            errid = rs.getLong("ERRORID");

        }
        System.out.println("Printing the queried ERROR id "+errid);

        System.out.println("End of Data");
        rs.close();

}
catch(Exception e)
{
    e.printStackTrace();
}

    return errid;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:49:20.353

[这](http://openjpa.apache.org/builds/2.2.1/apache-openjpa/docs/main.html)是他们的文档，它似乎对如何使用它提供了一个不错的描述。[这里](http://openjpa.apache.org/samples.html)，是他们的一些样本的链接。

有关使用 JPA 查询的示例，请查看上述文档链接中的第 10 节。

一个简单的例子（来自他们的文档）可能是这样的：

```
EntityManager em=...
Query q = em.createQuery("SELECT x FROM Magazine x");
List<Magazine> results = (List<Magazine>) q.getResultList(); 
```

# jenkins - 如何使用 JenkinsMobi 连接到 CloudBees CI

> ID：15385623
> 
> 赞同：1
> 
> 时间：2013-03-13T12:39:47.243
> 
> 标签：jenkins, cloudbees

我一直在我的智能手机上尝试使用 CloudBees 手动触发构建的工作流程。

我曾想过尝试使用 JenkinsMobi，但我被卡住了，因为我无法找出正确的连接配置，而且我没有在任何地方看到它的文档。

欢迎提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:42:21.367

我可以很容易地使用 cloudbees Jenkins 实例进行设置：

1.  单击启动画面左下方的配置图标

2.  触摸右上角的“加号”按钮

3.  输入描述。对于主机，输入完整的主机名，例如 myacct.ci.cloudbees.com

4.  选中 HTTP/S 复选框

5.  在安全设置中，输入我的 cloudbees 用户名和密码。这是您用于注册 CloudBees 的电子邮件地址。

6.  测试配置 3-4 次，直到我通过所有检查。我永远无法在这些移动键盘上正确输入密码

7.  按“返回”按钮，并在提示保存时单击“是”。

8.  触摸我创建的实例，然后查看作业列表。

本质上，这就像针对任何其他 Jenkins 实例使用 JenkinsMobi。

# sql - 在游标声明中将变量作为“select”语句传递的可能性

> ID：15385625
> 
> 赞同：0
> 
> 时间：2013-03-13T12:39:48.820
> 
> 标签：sql, sql-server-2005

我已经在 sql server 中创建了一个表值函数，并且我在变量中存储了一个“选择”状态作为游标声明处的传递变量，它向我显示错误。

我的错误是

```
Incorrect syntax near '@QUERY'. 
```

我的功能是

```
CREATE FUNCTION WEEKLY_REPORT(@START_DATE DATETIME, @END_DATE DATETIME,@PRACTISE NVARCHAR(MAX))
RETURNS @WEEKLY_REPORT_DETAILS_INFORMATION TABLE
(
    RESOURCE_NAME NVARCHAR(MAX),
    DAY1 DECIMAL(5,2),
    DAY2 DECIMAL(5,2),
    DAY3 DECIMAL(5,2),
    DAY4 DECIMAL(5,2),
    DAY5 DECIMAL(5,2),
    DAY6 DECIMAL(5,2),
    DAY7 DECIMAL(5,2),
    UTILIZATION INT
)
AS 
BEGIN
DECLARE
    @RESOURCE_NAME NVARCHAR(MAX),
    @DAY1 DECIMAL(5,2),
    @DAY2 DECIMAL(5,2),
    @DAY3 DECIMAL(5,2),
    @DAY4 DECIMAL(5,2),
    @DAY5 DECIMAL(5,2),
    @DAY6 DECIMAL(5,2),
    @DAY7 DECIMAL(5,2),
    @UTILIZATION INT,
    @MONTH NVARCHAR(MAX),
    @START_DAY INT,
    @END_DAY INT,
    @COUNT INT,
    @COUNT_TEST INT,
    @QUERY NVARCHAR(MAX);
BEGIN
    SET @MONTH = DATENAME(MONTH,@START_DATE)
    SET @START_DAY = DATENAME(DAY,@START_DATE)
    SET @END_DAY = DATENAME(DAY,@END_DATE)
    SET @COUNT = @END_DAY -@START_DAY + 1
    SET @QUERY='SELECT A.NAME, '
    SET @COUNT_TEST = 1
WHILE @COUNT_TEST <= @COUNT
BEGIN
    IF(@COUNT_TEST =@COUNT)
        SET @QUERY=@QUERY + 'B.D' + CONVERT(NVARCHAR ,@START_DAY)
ELSE
    SET @QUERY=@QUERY + 'B.D' + CONVERT(NVARCHAR ,@START_DAY) + ', ' 
SET @START_DAY = @START_DAY + 1
SET @COUNT_TEST =@COUNT_TEST + 1 
END

SET @QUERY = @QUERY + ' FROM EMPLOYEE A INNER JOIN CP_DETAILS B' +
            ' ON A.ID = B.EMPLOYEE_ID WHERE B.MONTH_USED = ' + '''' + @MONTH     + '''' +
            ' AND B.YEAR_USED = ' + DATENAME(YEAR,@START_DATE) + 
            ' AND B.PRACTISE=' + '''' + @PRACTISE + ''''

DECLARE CP_DETAILS CURSOR FOR @QUERY-- facing error here

OPEN CP_DETAILS
FETCH NEXT FROM CP_DETAILS INTO @RESOURCE_NAME,@DAY1,@DAY2,@DAY3,@DAY4,@DAY5,@DAY6,@DAY7

WHILE (@@FETCH_STATUS =0)
BEGIN
    SET @UTILIZATION = dbo.UTILIZATION(@START_DATE,@END_DATE,@DAY1,
                                    @DAY2,@DAY3,@DAY4,@DAY5,@DAY6,@DAY7)
    INSERT INTO @WEEKLY_REPORT_DETAILS_INFORMATION VALUES(@RESOURCE_NAME,
                @DAY1,@DAY2,@DAY3,@DAY4,@DAY5,@DAY6,@DAY7,@UTILIZATION)

    FETCH NEXT FROM CP_DETAILS INTO @RESOURCE_NAME,@DAY1,@DAY2,@DAY3,@DAY4,@DAY5,@DAY6,@DAY7
END
CLOSE CP_DETAILS
DEALLOCATE CP_DETAILS
END
RETURN 

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:47:08.520

您不能以这种方式声明游标。您必须编写 select 语句，而不是使用 select 语句字符串传递变量。

请参阅更多信息中的文档。 **[声明游标 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms180169.aspx)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:54:03.523

尝试创建另一个临时表并在游标之前执行您的@QUERY，而不是使用临时表中的 select 语句写入游标

# javascript - 如何使用 javascript 使用选定的音频文件，通过 HTML 5 中的标签？

> ID：15385634
> 
> 赞同：3
> 
> 时间：2013-03-13T12:40:05.880
> 
> 标签：javascript, html, audio, html5-audio

如何通过`<audio>`HTML5 中的标签使用 JavaScript 部署选定的音频文件？我的代码是这样的：

```
<audio controls id="audio1">
    <source  src="" type="audio/ogg">
<source  src="" type="audio/mpeg">
</audio> 
```

我不想`src`手动给。相反，我想通过 JavaScript 动态设置它。

在 JavaScript 中，用于`src`从文件中选择：

```
document.querySelector('#fileSelect').addEventListener('click', function(e) {
       // Use the native click() of the file input.
     audio.src = document.querySelector('#fileElem').click();
}, false); 
```

我欢迎任何建议。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:02:26.027

我不确定我是否理解你想要达到的目标。但是要为您发布的音频设置源：

```
var element = document.getElementById('audio');
if (element.canPlayType('audio/wav')) {
  element.src = "link";
} else if (element.canPlayType('audio/mpeg')) {
  element.src = "link";
} else {
   alert('Your browser does not support wav/mpeg audio.');
} 
```

它不工作吗？究竟是什么问题？也许准备一些小提琴来仔细看看你想要实现什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:14:41.190

你为什么不创建一个对象 Audio 并做这样的事情，而不是创建一个标签：

```
var som = new Audio();
som.src = "powerup.mp3";
som.load(); 
```

然后`audio.readyState >= audio.HAVE_CURRENT_DATA` 你可以打电话`som.play();`

这是前段时间为游戏框架编写的示例：[https ://github.com/hamilton-lima/vaca5/blob/master/lib/audio.js](https://github.com/hamilton-lima/vaca5/blob/master/lib/audio.js)

# c# - 组合框 SelectedItem 不起作用

> ID：15385638
> 
> 赞同：0
> 
> 时间：2013-03-13T12:40:15.157
> 
> 标签：c#, winforms, data-binding, combobox

我有下面的代码

```
FooCB.DisplayMember = "FooNome";
FooCB.ValueMember = "Foo";
FooCB.DataSource = FooRepository.Instance.All();
FooCB.DataBindings.Add("SelectedItem", Bar, "Foo"); 
```

但是当我显示表单时，`SelectedItem`它总是第一个。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T00:18:41.173

我最近一直在为 Winforms 组合框和数据绑定的行为而苦苦挣扎，这些是我在将 绑定`ComboBox.DataSource`到项目列表并将对象属性绑定到.Net4 时的观察结果`ComboBox.SelectedItem`。

1.  将对象列表（在您的情况下`List<Foo>`）绑定到`ComboBox.DataSource`时，列表中的第一个对象始终显示在组合框中。

2.  如果您将对象属性绑定到`ComboBox.SelectedItem`（在您的情况下`Bar.Foo`）并且该对象属性与组合框列表对象之一匹配，则该对象将显示在组合框中。如果对象属性为 null ( `Bar.Foo == null`) 或对象属性不在组合框列表中，则第一个对象显示在组合框中。

3.  设置`ComboBox.SelectedItem = null`或`ComboBox.SelectedIndex = -1`清除组合框上显示的项目，即使[这](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectedindex%28v=vs.100%29.aspx)似乎是警告它。并将您的绑定对象属性设置为空。

4.  如果用户在使用`ComboBox.DropDownStyle == DropDown`（使用退格键）时清除了组合框选择，则绑定对象属性设置为 null。

5.  如果您已`INotifyPropertyChanged`在其属性绑定到`Combobox.SelectedItem`( `Bar.Foo`) 的对象上实现，并且您以编程方式将绑定属性设置为一个值，并且该值出现在组合框列表中，则将显示更改的值。如果将属性设置为 null 或不在列表中的值，则组合框显示的值不会更改。

所以你对此能做些什么？我唯一真正的问题是当我的绑定属性为空时没有显示任何值，所以我刚刚明确设置`Combobox.SelectedItem = null`为第 3 点。您可能能够扩展`ComboBox`和覆盖默认行为，但到目前为止，我已经满足于这里和那里的额外代码行以及在不可为空的属性上使用默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-26T00:33:32.177

可能你错过了一些声明。如果您从工具箱创建了组合框，-我遇到了类似的问题-您可能希望将组合框名称的名称添加为 XAML 上的标记。

除此之外，如果您通过代码动态创建它，请检查您是否缺少任何类的声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-29T01:22:35.903

我无法从 OP 的代码中判断我是否在回答他们的问题，但也许这会帮助阅读这个问题的人。ComboBox 有四种设置当前值的方法：

```
SelectedIndex
SelectedItem
SelectedText
SelectedValue 
```

您需要对所设置的内容（以及所使用的事件处理程序）保持一致。如果将 SelectedIndex 设置为愚蠢的值（小于 -1 或比列表长），则会出现错误。但是，将其他三个设置为该类型选择不存在的内容不会出现错误。

假设您使用 Dictionary（即伪代码）作为绑定源并设置 DisplayMember = "Value" 和 ValueMember = "Key"，映射将如下所示：

```
SelectedIndex - -1 to index of last item
SelectedItem - KeyValuePair<Key, Value>
SelectedText - Dictionary value
SelectedValue - Dictionary key 
```

向 SelectedItem 提供值或键都**不会**产生错误，它只会像 OP 所描述的那样运行。这就是为什么我认为这个答案可能会对某人有所帮助。

我还可能注意到，如果您要交换 ComboBox 的内容，使用 SelectedIndex 并不总是安全的。假设 ComboBox 中有相同的基本类型的数据，但与其他情况相比，选择在某些情况下是有限的。使用 SelectedIndex 保留在新选项列表中仍然有效的先前选择只有在先前的选择在列表中保持完全相同的位置时才有效。你几乎会认为这是非常非常近期的演讲经验的声音......

# mysql - 使用 Facebook API 创建网站以收集受邀用户 ID

> ID：15385640
> 
> 赞同：0
> 
> 时间：2013-03-13T12:40:18.590
> 
> 标签：mysql, facebook, facebook-opengraph

我希望将 Facebook 整合到我的网站中。该网站基本上是一个在线会议，用户必须知道主持人的用户名才能登录。我想知道 Facebook API 是否有办法邀请特定用户并将他们链接到这个会议对象，我想通过拉受邀用户的用户 ID 并将其输入数据库，这样当客人参加聚会时，他们只需登录 Facebook，它就会将他们带到正确的聚会（通过 MySQL 搜索将他们的用户 ID 与会议匹配）。我希望我正确地解释了这一点，但是有没有办法用 API 来做到这一点，或者甚至有更好的方法来完成这个？

# javascript - cookie 的 JavaScript 代码在 Chrome 中不起作用

> ID：15385641
> 
> 赞同：20
> 
> 时间：2013-03-13T12:40:19.633
> 
> 标签：javascript, google-chrome, cookies

以下代码在 FF 中运行良好：

```
var date = new Date();
date.setTime(date.getTime() + (1 * 24 * 60 * 60 * 1000));
expires = "; expires=" + date.toGMTString();
document.cookie = "c_odi" + "=" + $('#orderdetailid').val() + expires + "; path=/"; 
```

但不是在 Chrome 中。当我使用 Chrome 并`document.cookie`在控制台中查看 cookie 时，`c_odi`cookie 不存在。但是当我在FF中做同样的事情时，它就是。我们如何使 cookie 在 Chrome 中工作？由 PHP 添加的 cookie 很好，但在 JavaScript 中不是这个，此时我确实需要通过 JavaScript 添加这个 cookie。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-10-02T11:39:12.667

如果您打开您的代码`file:///C:/.../xxx.html`而不是`http:// localhost/xxx.html`. Chrome 不会保存 cookie（因为没有域，也没有 http 通信）`file://`以防万一。

几个感兴趣的链接：

*   [https://gist.github.com/shellscape/02d3a97031e7afdf99d2642f93d59486](https://gist.github.com/shellscape/02d3a97031e7afdf99d2642f93d59486)
*   [在本地 html 文件中使用 JavaScript 设置 Cookie](https://stackoverflow.com/questions/6232331/setting-cookies-using-javascript-in-a-local-html-file)
*   [https://bugzilla.mozilla.org/show_bug.cgi?id=536650](https://bugzilla.mozilla.org/show_bug.cgi?id=536650)
*   [https://datatables.net/forums/discussion/46255/save-state-to-cookie-in-file-protocol](https://datatables.net/forums/discussion/46255/save-state-to-cookie-in-file-protocol)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-09-03T06:59:53.767

Chrome 不会存储从本地文件系统加载的页面中的 cookie。例如，如果您从本地文件系统（例如：file:///C:/Users/deepak.r/Desktop/test.html）访问 chrome 浏览器中的 HTML 文件，则不支持 cookie。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-01T19:25:02.420

确保您的地址栏 URL 与域匹配。在 Chrome 中，如果您设置 domain=www.site.com，然后在浏览器中测试您的页面，则缺少 www。它行不通。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:56:22.400

尝试替换这一行：

```
document.cookie = "c_odi" + "=" + $('#orderdetailid').val() + expires + "; path=/"; 
```

有了这个：

```
document.cookie = "c_odi" + "=" + escape($('#orderdetailid').val()) + expires + "; path=/"; 
```

当您尝试读取价值时，您将不得不使用`unescape`，但当时间到来时您会有所帮助:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T13:03:32.843

似乎它对我有用：

![在此处输入图像描述](../Images/f9f54ded056732fc9e338afb8360ed26.png)

[http://jsfiddle.net/rQEnF/3/](http://jsfiddle.net/rQEnF/3/ "JSFiddle")

如您所见，至少 cookie 会出现在开发工具中。`$('#orderdetailid').val()`但是，如您所见，我将 jQuery 选择器替换为常量值。该值或包含该值的元素是否有问题？

# web-services - 使用 ColdFusion 的 .net Web 服务时出现问题

> ID：15385642
> 
> 赞同：3
> 
> 时间：2013-03-13T12:40:19.713
> 
> 标签：web-services, coldfusion, enumeration

我在尝试使用 ColdFusion 的 Web 服务时遇到了一些挑战。服务 (AccountsService) 有一个方法 GetAccountLinksByUser，它返回与给定用户关联的帐户。此方法接受两个参数：

*   UPN，它只是用于标识用户的唯一字符串。据我所知，这没问题。

*   源类型。这最终是一个字符串，但在 WSDL 中被定义为具有三个可能值之一的简单类型。这是来自 WSDL 的 XML 的相关部分：

```
<xsd:simpleType name="SourceType">
    <xsd:restriction base="xsd:string">
        <xsd:enumeration value="All"/>
        <xsd:enumeration value="Manual"/>
        <xsd:enumeration value="System"/>
    </xsd:restriction>
</xsd:simpleType> 
```

问题是我似乎不能只将字符串“All”、“Manual”或“System”传递到 Web 服务中。CF 生成的存根对此方法具有以下签名：

```
getAccountLinksByUser(java.lang.String, org.datacontract.schemas._2004._07.tfonline_services_accounts_datacontracts.SourceType) 
```

这似乎表明我需要传入 org.datacontract.schemas._2004._07.tfonline_services_accounts_datacontracts.SourceType 的实例。但是，我无法（轻松）创建该类型的实例，因为它似乎不在 CF 搜索的类路径中。我尝试将 CF 生成到 /stubs 目录中的类包装到 jar 中，并将它们放在类路径中。这确实有效，因为我现在可以创建 org.datacontract.schemas._2004._07.tfonline_services_accounts_datacontracts.SourceType 的实例，但我仍然无法将其传递给 getAccountLinksByUser 方法。

根据要求，这是我用来调用 Web 服务的代码：

```
<cfset accountsService = CreateObject("WebService", "http://local.hostname/libraries/com/foo/bar/staging/AccountsService.wsdl") />
<cfset SourceType = CreateObject("java", "org.datacontract.schemas._2004._07.tfonline_services_accounts_datacontracts.SourceType") />
<cfset accounts = accountsService.getAccountLinksByUser("username@domain", SourceType.All) /> 
```

更多信息。Web 服务的发布者不会公开发布其 WSDL。这是通过电子邮件发送给我的，我正在从我的本地开发站点加载 WSDL。

我得到的具体错误是：

无法执行 Web 服务调用 getAccountLinksByUser。调用 Web 服务操作时返回的错误是：

> 无法执行 Web 服务调用 getAccountLinksByUser。调用 Web 服务操作时返回的错误是：'' java.lang.IllegalArgumentException: argument type mismatch

我现在不确定该去哪里。有什么建议么？

该服务是用 .NET 编写的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:16:53.777

我进行了一些测试，似乎与在 CF10 中切换到 Axis2 有关。老实说，我不确定枚举在 1 和 2 之间究竟*发生了什么*变化。但是，将版本级别设置回 Axis1 应该可以解决问题：

```
<cfscript>
     args = { refreshWSDL=true, wsversion=1 };
     ws = createObject("webservice", "http://mysite/test.asmx?wsdl", args);
     result = ws.getAccountLinksByUser("test@somewhere.com", "All");
     writeDump(result);
</cfscript> 
```

# css - 如何使用 css 将 center1 直接定位在 center3 下方

> ID：15385644
> 
> 赞同：0
> 
> 时间：2013-03-13T12:40:22.197
> 
> 标签：css

我无法将#center3 直接定位在#center1 下方。我尝试过向右浮动，但没有用，我也尝试过使用相对定位，但它也不起作用。

我一直在互联网上寻找有关此主题的帮助，但没有任何运气。我也花了一些时间来看看我是否可以自己解决这个问题，但结果对我来说太难了。

**HTML**

```
<section>    
   <article></article>    
   <aside></aside>    
   <aside id="center1"></aside>    
   <aside id="center2"></aside>    
   <aside id="center3"></aside>    
</section> 
```

**CSS**

```
section {
    margin:0px auto;
    width:960px;
}

article {
    width:960px;t turned out to be 
    height:100px;
    border:1px solid #333;
}

aside {
    width:250px;
    height:1000px;
    border:1px solid #333;
    margin-top:5px;
    margin-right:5px;
    float:left;
}

#center1 {
    width:200px;
    height:300px;
    border:1px solid #333;
    margin-top:5px;
    float:left;
}

#center2 {
    width:200px;
    height:300px;
    border:1px solid #333;
    margin-top:5px;
    float:left;
}

#center3 {
    width:200px;
    height:300px;
    border:1px solid #333;
    margin-top:5px;
    float:left;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:00:49.297

[http://jsfiddle.net/paZB6/1/](http://jsfiddle.net/paZB6/1/) （用新小提琴编辑：我在 .right-column 中添加了一个 1px 的蓝色边框，这样你就可以轻松地直观地看到它在做什么）

您需要首先添加一个`clear`to`#center3`以绕过它上面的浮动。

但是，除此之外，为了防止它也清除您的旁边，您需要将右侧元素包装在包含元素中，以便将这些框与旁边分开。

我所做的是创建两列，你的旁边，加上它右边的任何东西，然后你的 #center1,2,3 框包含在右边的框内。请注意，您可以根据需要向右列添加宽度和其他任何内容，我只提供了基本功能。

请注意，我还更改`<section>`了包装所有内容的 HTML。我没有将它作为部分在 css 中定位（不是您正在做的最佳实践），而是给它一个名为 wrapper 的类，并通过类名将您的样式应用于它。

**HTML：**

```
<section class="wrapper">

<article>
    <p>Some text</p>
</article>

<aside>
</aside>
<section class="right-container">
<aside id="center1">
</aside>

<aside id="center2">
</aside>

<aside id="center3">
</aside>
</section><!-- END RIGHT CONTAINER -->

</section> 
```

**CSS：**

```
.wrapper {
    margin:0px auto;
    width:960px;
}

article {
    width:960px;t turned out to be 
    height:100px;
    border:1px solid #333;
}

aside {
    width:250px;
    height:1000px;
    border:1px solid #333;
    margin-top:5px;
    margin-right:5px;
    float:left;
}

.right-container {
    float: left;
}

#center1 {
    width:200px;
    height:300px;
    border:1px solid #333;
    margin-top:5px;
    float:left;
}

#center2 {
    width:200px;
    height:300px;
    border:1px solid #333;
    margin-top:5px;
    float:left;
}

#center3 {
    width:200px;
    height:300px;
    border:1px solid #333;
    margin-top:5px;
    float:left;
    clear: both;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:43:37.833

尝试添加`clear:left;`到`#center3`

# android - 即使它的适配器为空，也要更新 ListView

> ID：15385646
> 
> 赞同：1
> 
> 时间：2013-03-13T12:40:24.850
> 
> 标签：android, listview, adapter

即使适配器是`null`，我也想更新我的列表，但我不知道该怎么做。

当我执行以下代码时，我的应用程序崩溃：

```
ProductAdapter adapter = new ProductAdapter(context, R.layout.listrow, yal);
if(adapter.getCount()>0){
   lv.setAdapter(adapter);
}else{
   lv.setAdapter(null);
}
adapter.notifyDataSetChanged();
lv.invalidateViews(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:57:25.020

适配器是列表的数据源。它提供了单独的列表项。没有适配器就不能有一个列表，因为那样的话列表中就没有行了。

查看[ListView 文档](http://developer.android.com/guide/topics/ui/layout/listview.html)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:34:31.330

不要取消适配器 - listView 总是需要一个。相反，使适配器使用的*数据集*无效，并确保在数据集为空（或为空）`getCount()`时返回。`0`或者不要使数据集无效，而是将其设为空列表或数组。

如果您的数据发生更改，请更新适配器数据集并在适配器上调用 notifyDatasetChanged()。获取新数据时不要为 ListView 创建新的适配器。这很重要，有几个原因；例如，listViews 的位置不会跳到顶部，而是留在原处。

例子：

```
ProductAdapter adapter = new ProductAdapter(context, R.layout.listrow, null);
listView.setAdapter(adapter); 
```

之后

```
adapter.setData(newData);
adapter.notifyDatasetChanged(); 
```

# java - 在 ANTLR 中解析不正确的输入时出现 OutOfMemoryError

> ID：15385650
> 
> 赞同：2
> 
> 时间：2013-03-13T12:40:39.480
> 
> 标签：java, antlr, out-of-memory

实际上，这个问题与我之前的问题[Catching ANTLR's NoViableAltException in Java and ANTLRWorks Debugger 有关](https://stackoverflow.com/questions/15384800/catching-antlrs-noviablealtexception-in-java-and-antlrworks-debugger)，但由于症状不同，我决定将它们分开。

问题在于提供给 ANTLR 输入文本，其中包含未知标记。例如，考虑到我们的语法对以符号开头的标记一无所知`@`。如果我们尝试将此类文本提供给`ANTLRWorks`解释器，我们将`NoViableAltException`在结果图中收到。

但是如果我们使用 Java 中生成和编译的语法并尝试用它来解析这些无效文本，我们会收到以下结果之一（这取决于我们将放置这个未知标记的位置，即我们将放置它的“深度”成文本）：

1）没有错误，并且顶级对象`null`中的字段值（提到的问题正是关于这种情况）；`chidlren``CommonTree`

2)`java.lang.OutOfMemoryError: Java heap space`错误。

这个问题是关于第二种情况的。我们如何防止`ANTLR`解析器的这种行为？例如，在生产环境中，客户端可能会通过向 DSL 解析器提供不正确的字符序列而意外地使系统崩溃。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T13:26:49.500

这通常发生在词法分析器包含可以匹配空字符串的规则时。例如，考虑以下规则：

```
WS : (' ' | '\t')*; 
```

此规则可以创建一个`WS`总共包含 0 个空格和/或制表符的标记，这意味着在您的输入中的任何其他标记之间可以有无数个空格和/或制表符。在某些涉及无效输入的情况下，错误恢复过程可能会被强制进入一个无限循环，该循环将缓冲令牌，直到 Java 内存不足。

解决这种情况的第一步是检查每个词法分析器规则以确保不会发生这种情况。`WS`应该这样写，以确保至少*消耗 1 个*空格和/或制表符。

```
WS : (' ' | '\t')+; 
```

PS：如果发生这种情况，ANTLR 4 会对语法进行静态检查以产生错误（4.0）或警告（4.0.1+）。

# android - 无法连接到 SMTP 主机：smtp.gmail.com

> ID：15385656
> 
> 赞同：1
> 
> 时间：2013-03-13T12:41:00.410
> 
> 标签：android

我是 android 的新开发人员，在我的 Android 应用程序中开发 smtp 邮件服务。我已经按照以下链接获取参考

链接： http: [//mobiledevtuts.com/android/android-sdk-smtp-email-tutorial/](http://mobiledevtuts.com/android/android-sdk-smtp-email-tutorial/) 链接： http: [//gafurbabu.wordpress.com/2012/01/08/sending-email-in-android-via- smtp-without-using-the-default-android-appbuiltin-email-application/](http://gafurbabu.wordpress.com/2012/01/08/sending-email-in-android-via-smtp-without-using-the-default-android-appbuiltin-email-application/)

但我得到了以下错误。我不明白我哪里做错了。有谁知道我的代码中发生了什么。

```
03-13 17:49:43.041: E/SendMail(30702): Could not connect to SMTP host: smtp.gmail.com, port: 465
03-13 17:49:43.041: E/SendMail(30702): javax.mail.MessagingException: Could not connect to SMTP host: smtp.gmail.com, port: 465;
03-13 17:49:43.041: E/SendMail(30702):  javax.net.ssl.SSLException: Not trusted server certificate
03-13 17:49:43.041: E/SendMail(30702):  at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1391)
03-13 17:49:43.041: E/SendMail(30702):  at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:412) 
```

提前致谢

# apache - Apache重写规则不适用于angularjs

> ID：15385659
> 
> 赞同：6
> 
> 时间：2013-03-13T12:41:14.493
> 
> 标签：apache, mod-rewrite, rewrite

我正在尝试使用 AngularJS 设置 apache 2.2，其结构与以下封闭问题中的结构几乎完全相同。

[重写 apache 2 的规则以与 angular js 一起使用](https://stackoverflow.com/questions/15284038/rewrite-rules-for-apache-2-to-use-with-angular-js)

我想将所有请求重定向到 app/index.html，但对 /api 的请求除外。

我的目录结构如下

*   /
*   /应用程序
*   /app/index.html
*   /应用程序/css
*   /app/js
*   /api

我正在尝试在 httpd-vhosts 文件中应用这些重定向规则，该文件已发布为问题的正确答案[https://stackoverflow.com/a/15284848/671095](https://stackoverflow.com/a/15284848/671095)。

```
<VirtualHost *:80>
ServerName www.test.com
DocumentRoot "C:/websites/test"
Alias /CFIDE "C:/websites/CFIDE"

RewriteEngine On

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{REQUEST_URI} !/api

# otherwise forward it to index.html 
RewriteRule ^.*$ - [NC,L]
RewriteRule ^app/. /app/index.html [NC,L]

</VirtualHost> 
```

但是，当我尝试在浏览器中访问 / 时，我会看到一个空白屏幕。如果我在浏览器中输入 /app/index.html，但是我可以在浏览器中查看 html 页面，但无法访问 css.or js 并返回 404。

我一直对此发疯，这似乎是一个简单的事情来完成 apache 重写。

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-04T05:35:36.010

现在在 Apache 2.2.16+ 中使用 FallbackResource 指令要容易得多。

```
FallbackResource /app/index.html 
```

[http://httpd.apache.org/docs/2.2/mod/mod_dir.html#fallbackresource](http://httpd.apache.org/docs/2.2/mod/mod_dir.html#fallbackresource)

根据您转发对 API 的访问的方式，您可能还需要利用附件来禁用专门针对 API 请求 (2.2.24+) 的回退资源。

```
<Directory /api>
    FallbackResource disabled
</Directory> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-11T07:30:30.453

[这](http://www.josscrowcroft.com/2012/code/htaccess-for-html5-history-pushstate-url-routing/)对我有用：

```
<ifModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} !index
    RewriteRule (.*) index.html [L]
</ifModule> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T17:16:18.783

我有同样的问题。但我很无知，`mod_rewrite`所以不得不谷歌很多。我在这封电子邮件中找到了解决方案：

[https://groups.google.com/d/msg/angular/GmNiNVyvonk/mmffPbIcnRoJ](https://groups.google.com/d/msg/angular/GmNiNVyvonk/mmffPbIcnRoJ)

所以我认为你的 .htaccess 应该如下所示：

```
Options +FollowSymLinks
IndexIgnore */*

RewriteEngine on

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{REQUEST_URI} !/api
RewriteRule ^.*$ - [NC,L]

# otherwise forward it to index.html 
RewriteRule ^app/(.*) /app/#/$1 [NC,L] 
```

注意`(.*)`和`#/$1`

注意：您必须在包含的 CSS、JS 等中使用绝对路径，否则您将收到错误：

> 资源被解释为脚本，但使用 mime 类型 text/html 传输

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-11T18:39:20.820

不知道您是否仍然遇到此问题，但我在使用 AngularJS 和 Apache 2 时遇到了相同的症状。

我的问题实际上是我使用的是 IE，它会自动以兼容模式出现。我在我的 HTML 中使用了下面的行并且它有效。

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

此处进一步描述：<< [meta http-equiv="X-UA-Compatible" content="IE=edge"> 做什么？](https://stackoverflow.com/questions/6771258/whats-the-difference-if-meta-http-equiv-x-ua-compatible-content-ie-edge-e)>。

# eclipse - 依赖 jar 中的法语字符编码失败

> ID：15385660
> 
> 赞同：0
> 
> 时间：2013-03-13T12:41:18.650
> 
> 标签：eclipse, maven, character-encoding

我对 jar 有一个 Maven 依赖项，它在类的静态块中包含法语字符。

现在，在调用这个类时，我得到了 NoClassDefFoundError。在 eclipse 中导入代码后，我发现法语字符正在创建编译问题，这就是我的类没有被加载的原因。

有没有办法在 Maven 中为依赖的 jar 指定字符编码支持？

我已经尝试过 -Dfile.encoding=UTF-8 选项，但是没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:45:14.760

你在eclipse中安装了**[m2e](http://eclipse.org/m2e/download/)**插件吗？如果是，则[将此属性](https://stackoverflow.com/a/3018152/1199132)设置到您的 pom 文件中：

```
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
</properties> 
```

最后右键单击该项目并执行 Maven->Update Project，这应该告诉 Eclipse 你想为你的项目使用 UTF-8 编码。

# java - 什么是 JPA 参考

> ID：15385663
> 
> 赞同：-2
> 
> 时间：2013-03-13T12:41:23.237
> 
> 标签：java, jpa, annotations

我已经学习 Java 大约 3 个月了，并且遇到了“JPA 引用”这个术语。

有人可以给我一个非常简单的解释这意味着什么吗？我在使用数据库字段时使用注释（即@Required，@MaxSize）时遇到了这个术语，但在网上找不到向我解释它的简单解释。

此外，它是否与 JPA 实体有关，还是完全不同？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:46:52.573

看来您在谈论“jsf”而不是“jpa”。此注释在 jsf 中使用。JPA 是用于 DATA 访问层的框架，您不应将其与表示层中使用的 JSF 混淆。我真的推荐你阅读“APRESS”出版的“Mastering the Java™ Persistence API 2009”一书。它很容易学习，你很快就能学会

# xna - 如何仅绘制模型“镜头前”全部或部分显示 - XNA

> ID：15385668
> 
> 赞同：0
> 
> 时间：2013-03-13T12:41:33.437
> 
> 标签：xna, camera, transform, instance, frustum

我正在开发一款 XNA 风格的“MinecraftGame”小游戏。

因为有**很多立方体要绘制**。我创建了一个函数，只允许你**在相机前绘制立方体**！但问题是，如果一个立方体在我的视野中没有完全充满，它就不会被绘制出来。正如**您在下面的“屏幕截图”中看到的那样**。不绘制位于边缘的立方体。如何绘制完全和部分显示在镜头前的立方体？而且不仅完全。

非常感谢

这是我检查 Frustum 是否包含模型的代码：

```
//Initialize frustum
private void GenerateFrustum()
{
    Matrix viewProjection = View * Projection;
    Frustum = new BoundingFrustum(viewProjection);
}

//private void UpdateFrustum
{
    Matrix viewProjection = View * Projection;
    Frustum.Matrix = viewProjection;
}

//Function that will add models instantiated in the transformation matrix only if the    model is in the field of view !
private udpateTransformModelInstancied()
{
     for (int i = 0; i < ListInstance.Count; i++)
     {
         if(camera.Frustum.Contains(ListInstance[i].Transform.Translation) != ContainmentType.Disjoint)
         {
               instanceTransforms.Add(ListInstance[i].Transform);
         }

      }
 .......
} 
```

截图： ![在此处输入图像描述](../Images/0de0cbf1c1bdc65abcc2d24cc241c13e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:58:48.310

您正在检查立方体的位置。这意味着您没有考虑立方体的物理尺寸；您将它们视为一个点，如果该点不在视野范围内，那么您将不会渲染它。您需要做的是检查立方体的任何部分是否可见。两种最简单的方法是计算一个边界形状并使用它来检查，或者检查您的视图是否包含立方体的任何角点，而不仅仅是它的位置点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:54:03.407

据我所知，您只是在检查每个立方体的位置。最有效的解决方法是制作一个完全包含您的立方体之一的 BoundingSphere，将其转换为立方体位置并使用该球体而不是位置完成 Frustum.Contains :)

还; 使球体比考虑平截头体边缘所需的稍大一点。记住；如果你想制作一个我的世界克隆，你将需要使用某种批量渲染技术。我建议使用实例缓冲区，因为发送到 GPU 的数据会更少，而且更容易实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T13:26:21.403

测试立方体边界结构的包容性而不是立方体的位置会起作用，但这会增加游戏的复杂性，因为需要管理一堆边界结构以及测试边界结构而不是点的数学。如果您需要其他东西的边界结构，那就走那条路。但如果不是，那么我将简单地获取立方体的位置，确定立方体宽度左侧或右侧的点并测试这些点。如果其中任何一个是“在”，则绘制立方体。

```
Vector3 leftRightVector = Matrix.Transpose(view).Right;//calc once for each frame(or only when camera rotates)

Vestor3 testPoint1 = cubePosition + (leftRightVector * maxCubeWidth);//calc for each cube
Vestor3 testPoint2 = cubePosition + (leftRightVector * -maxCubeWidth);
if(frustum.Contains(testPoint1 || testPoint2)
{
  //draw
} 
```

# algorithm - 一种在多边形内拟合矩形的算法

> ID：15385674
> 
> 赞同：7
> 
> 时间：2013-03-13T12:41:54.150
> 
> 标签：algorithm, polygon, computational-geometry, rectangles

我有一种切割问题。有一个没有任何孔的不规则多边形和一个标准尺寸的矩形瓷砖及其值的列表。

我想要一个有效的算法来找到适合这个多边形的单个最有价值的瓷砖；或仅说明单个图块是否可以放入多边形的算法。对于少于 100 个顶点的不规则多边形，它应该在确定的时间内运行。

请考虑您可以旋转多边形和瓷砖。对凸多边形和非凸多边形的答案/提示表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T20:18:15.723

免责声明：我从来没有读过任何关于这方面的文献，所以可能有更好的方法来做到这一点。这个解决方案正是我在阅读您的问题后所想到的。

矩形有两个重要的测量值 - 它的高度和宽度

现在如果我们从一个多边形和一个矩形开始：

![多边形和矩形](../Images/1c70d6c921f09a37c07fe5caa0741f51.png)

1：绕过多边形的周边并记下矩形**高度**适合多边形的所有位置（您可以将其存储为多边形*）：

![高度适合哪里？](../Images/61ec234521304028763e4052a1cc9c37.png)

**2：绕过刚刚制作**的新多边形的周边，并记下矩形**宽度**适合多边形的所有位置（同样，您可以将其存储为多边形）：

![宽度适合哪里？](../Images/fbeae6928a05650a0def6abfc0295645.png)

3：矩形应该适合这个新多边形（请注意将矩形正确放置在多边形内，因为这是一个多边形 - 不是矩形。如果将矩形的左上角节点与左上角节点对齐这个新的多边形，你应该没问题）

4：如果找不到适合矩形的区域，请将多边形旋转几度，然后重试。

*注意：在一些多边形中，你会得到不止一个地方可以安装一个矩形：

![这里可以安装多个矩形](../Images/3ca502be1b0d158bbd967a3393e99c93.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-13T20:13:16.233

经过多次无望的搜索，我认为这个问题没有任何特定的算法。直到，我发现[了这篇关于多边形包含问题的旧论文。](http://www.cs.princeton.edu/~chazelle/pubs/PolygContainmentProb.pdf)
提到的那篇文章，提出了一个非常好的算法来考虑具有**n**个点的多边形是否可以适合具有**m**个点的多边形。
对于两个可移动和可旋转的二维多边形，该算法通常为 O(n^3 m^3(n+m)log(n+m))。

如果您正在计算几何中寻找这样的不规则算法，我希望它可以帮助您。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-11T04:45:11.133

这可能会有所帮助。它自带Java编写的源代码

[http://cgm.cs.mcgill.ca/~athens/cs507/Projects/2003/DanielSud/](http://cgm.cs.mcgill.ca/~athens/cs507/Projects/2003/DanielSud/)

# asp.net-mvc-4 - Asp.NET MVC 4 将特定 URL 路由到某个控制器

> ID：15385676
> 
> 赞同：1
> 
> 时间：2013-03-13T12:42:03.377
> 
> 标签：asp.net-mvc-4, controller, url-routing

当输入可能与控制器名称无关的 URL 时，我想运行某个 Asp.NET MVC 4 控制器。比如用户打开地址“localhost:3364/abc/def”，我想运行这个名字的控制器，比如“SugarController”。有可能吗，还是我必须以“糖”这个词开头我的网址？我知道可以通过在项目中的 Global.asax 文件中添加一些代码来完成 URL 路由。但我不完全知道如何管理这个。
提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:44:32.697

这应该工作

```
 routes.MapRoute("Fixed", "abc/def", new { controller = "Sugar", action = "def"}); 
```

# php - 文件是否已下载？

> ID：15385680
> 
> 赞同：1
> 
> 时间：2013-03-13T12:42:21.800
> 
> 标签：php, download

我编写了在 PHP 中创建 CSV 文件并在本地下载的代码。

是否可以知道用户是否下载了文件？或者如果用户取消了下载？

我的测试代码放在下面用于创建和下载文件：

```
header("Content-type: text/csv");
header("Content-Disposition: attachment; filename=invoies.csv");
header("Pragma: no-cache");
header("Expires: 0");

$array = array(
    array("data11", "data12", "data13"),
    array("data21", "data22", "data23"),
    array("data31", "data32", "data23"),
);
outputCSV($exported_invoices_arr);

function outputCSV($data) {
    $outstream = fopen("php://output", "w");

    function __outputCSV(&$vals, $key, $filehandler) {
        fputcsv($filehandler, $vals); // add parameters if you want
    }

    array_walk($data, "__outputCSV", $outstream);
    fclose($outstream);
} 
```

他们在下载文件时是否有任何触发器或处理程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:52:10.910

你永远不会知道的。即使您检测到连接状态，您也不确定，因为缓存代理可以隐藏真实的用户连接状态。您所知道的是脚本是否已发送所有数据，但不是已收到文件。

您需要实现一些客户端交互式下载器，例如 java 小程序……但是您会遇到其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:47:55.690

这是不可能的。没有直接的方法可以捕获。可能有一些解决方法，但它并不完美。

# java - 系统控制台生成 NullPointer 异常

> ID：15385681
> 
> 赞同：-1
> 
> 时间：2013-03-13T12:42:24.530
> 
> 标签：java, exception

我正在使用系统控制台读取一行，如下面的代码

```
public class Strings2 
{   
    public static void main(String[] args) 
    {
        String Name;        
        Console c = System.console();
        Name = c.readLine("%s", "Name?:");

        System.out.println(Name);
    }
} 
```

但是当我运行它时，它会生成一个 NullPointerException

![在此处输入图像描述](../Images/d99e48a369f761e67043718bad1ed280.png)

知道为什么会这样

我在eclipse中运行上面的代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:44:24.213

是的，它的行为如[记录](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#console%28%29)：

> **返回：**
> 系统控制台（如果有），否则为 null。

没有控制台，因此它返回 null。

*如果您从控制台*运行它应该没问题......但是您应该检查返回值并在它返回 null 时采取不同的措施。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T12:45:19.590

如果您从 Eclipse 执行该代码，您肯定会收到该错误。Eclipse 使用不同的流，您无法在其中捕获控制台。但是当从 UNIX shell 或 Windows/Mac 执行时，代码会正常工作，因为底层操作系统会将控制台附加到 JVM 的资源（您的代码）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:43:45.193

[公共静态控制台控制台（）](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#console%28%29)

> 返回与当前 Java 虚拟机关联的唯一 Console 对象（如果有）。
> 
> 返回： 系统控制台（如果有），否则为 null。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:44:24.587

通过运行调试器，从 System.console() 返回的 c 为 null；

所以下一行抛出一个空指针异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T12:48:14.567

在您的上下文中， System.console() 不可用，您应该检查 null 并找到替代的行动方案。

> “系统.console()
> 
> 返回与当前 Java 虚拟机关联的唯一 Console 对象（如果有）。
> 
> 返回：系统控制台，如果有的话，否则为空。”

_

> “虚拟机是否有控制台取决于底层平台以及调用虚拟机的方式。如果虚拟机从交互式命令行启动而不重定向标准输入和输出流，那么它的控制台将“

取自 java.sun.com。

# applescript - 如果变量改变了重复功能？

> ID：15385682
> 
> 赞同：0
> 
> 时间：2013-03-13T12:42:25.103
> 
> 标签：applescript, itunes

无法弄清楚这个循环-我希望仅在 myText 更改（即个人正在收听的专辑更改）时重复以下函数-我已经能够使其循环一定次数或在曲目事件中重复更改，但我希望它在专辑更改时重复。

```
tell application "iTunes"
repeat if myText changes
if player state is playing then
    set albumName to (get album of current track)
    set myText to text 1 thru 10 of albumName
end if
end repeat
end tell

open location "http://bandsite.com/shows/" & myText 
```

当代码在没有重复命令的情况下工作时，它看起来像这样：

```
tell application "iTunes"
if player state is playing then
set albumName to (get album of current track)
set myText to text 1 thru 10 of albumName
end if
end tell

open location "http://bandsite.com/shows/" & myText 
```

如果 myText 发生变化，我需要重复整个函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:57:47.047

```
temptext = mytext
do
   if temptext != myText

      tell application "iTunes"
      if player state is playing then
      set albumName to (get album of current track)
      set myText to text 1 thru 10 of albumName
      end if
      end tell

     temptext = myText

   end if

while temptext==text 
```

试试这个

希望这是你想要的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:14:58.307

将此保存为保持打开的应用程序：

```
property myList : {}

on run
    set albumA to my playCheck()
    if albumA ≠ false then
        set end of myList to albumA
    else
        quit -- Quit on the next idle.
        return 1 -- Please send the next idle as soon as possible.
    end if
end run

on idle
    set albumA to my playCheck()
    if albumA ≠ false then
        set end of myList to albumA
        if (item -1 of myList) ≠ (item -2 of myList) then
            open location "http://bandsite.com/shows/" & (text 1 thru 10 of albumA)
        end if
    end if
    return 3
end idle

on playCheck()
    tell application "iTunes"
        if player state is playing then return (get album of current track)
        return false
    end tell
end playCheck 
```

# android - 从 MySQL 数据库中获取 ListView 中 ListItem 的详细信息

> ID：15385693
> 
> 赞同：1
> 
> 时间：2013-03-13T12:43:25.633
> 
> 标签：android, mysql, database, listview

我已成功从数据库中获取列表并将其绑定在 ListView 中。如果我从 listView 中选择一个项目，如果获取该项目的正确详细信息。如果我从列表视图中选择另一个列表项，它会带来与上一个选定项相同的数据。

我该如何解决这个问题？完美..

我的代码正在运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:54:45.990

你需要完成那个过程。

使用完成（）；查看列表视图详细信息后的方法。否则，它将一次又一次地获取相同的值。

# iphone - 支付宝ios6问题

> ID：15385695
> 
> 赞同：0
> 
> 时间：2013-03-13T12:43:32.333
> 
> 标签：iphone, ios6, paypal

在我的应用程序中尝试与贝宝集成的所有步骤时，它显示以下错误， ![在此处输入图像描述](../Images/4188b16da64efed26485d8065224670f.png)

我包括所有框架作品，

```
 AVFoundation.framework
 AudioToolbox.framework
 CoreMedia.framework
 CoreVideo.framework
 libxml2.dylib
 MessageUI.framework
 MobileCoreServices.framework
 OpenGLES.framework
 QuartzCore.framework
 Security.framework
 UIKit.framework 
```

谁能帮我整理一下。请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:07:54.007

终于找到了答案 `Build Settings, added -lstdc++ -ObjC to Other Linker Flags.`

# r-markdown - 调整 R Markdown HTML 输出的输出宽度

> ID：15385696
> 
> 赞同：72
> 
> 时间：2013-03-13T12:43:34.947
> 
> 标签：r-markdown, knitr

我正在生成 HTML 输出，但我遇到了 R 代码输出的输出宽度问题。

我可以毫无困难地调整图形宽度，但是当我尝试编写数据表或因子加载时，R 以固定宽度输出，该宽度仅为我屏幕宽度的三分之一左右。这会导致表格的列被拆分，而不是所有列都显示在单个表格中。

这是一个可重现的示例：

```
---
output: html_document
---

# Title

```{r echo = FALSE, fig.width=16, fig.height=6}
x = matrix(rnorm(100),ncol=10)
x
plot(x)
``` 
```

[![在此处输入图像描述](../Images/35004d2cb3938cd50fe2f728db47a0a3.png)](https://i.stack.imgur.com/gPLR4.png)

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-03-13T13:03:16.823

在文档开头添加以下内容：

```
```{r set-options, echo=FALSE, cache=FALSE}
options(width = SOME-REALLY-BIG-VALUE)
``` 
```

显然，将 SOME-REALLY-BIG-VALUE 替换为数字。但是你真的想做所有的水平滚动吗？

您的输出可能包含大约 80 个字符左右。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2020-05-21T14:26:16.723

此外，您可以临时更改代码块的本地 R 选项：

```
```{r my-chunk, R.options = list(width = SOME-BIG-VALUE)}

``` 
```

# java - 从其他类获取列表的最大大小

> ID：15385697
> 
> 赞同：-1
> 
> 时间：2013-03-13T12:43:35.217
> 
> 标签：java, for-loop, size

我正在尝试获取另一个类上列表的最大大小，以将其设置为另一个类的循环中的最大大小。结果，它没有读取我得到的大小。这是代码：

用户.java

```
private void populateList() {
    CusInfoManipulator c = new CusInfoManipulator(this);
    int max = c.getMaxSize();
    for(int x = 0;x<max;x++){
        HashMap<String, String> value= new HashMap<String,String>();
        c.listData(x);
        value.put("username", "Username: " + c.getUserL());
        value.put("name","Customer Name: "+ c.getFnameL() +" "+ c.getLnameL());
        value.put("address", "Address: " + c.getAddressL());
        value.put("landmark", "Landmarks: " + c.getLandmrkL());
        value.put("num1", "Contact Number 1: " + c.getNumL());
        value.put("num2","Contact Number 2: " + c.getNum2L());
        list.add(value);
    }
} 
```

解析云列表的最大大小：

```
List<ParseObject> searchItems = query.find();
int max = searchItems.size();

public int getMaxSize() {
    return max;
} 
```

有人可以帮我弄清楚我的代码出了什么问题以及为什么它没有达到最大尺寸吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:55:26.327

不确定，但也许你应该这样做：

```
public int getMaxSize()
 {
    List<ParseObject> searchItems = query.find();
    int max = searchItems.size();
    return max;
 } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T12:48:05.003

`getMaxSize`方法应该返回类似的东西`list.size()`而不是常量值

# twitter-bootstrap - 如何使用 Bower 保持 Twitter Bootstrap 自定义？

> ID：15385705
> 
> 赞同：36
> 
> 时间：2013-03-13T12:43:53.733
> 
> 标签：twitter-bootstrap, customization, bower

我正在与[yeoman](http://yeoman.io)合作一个项目，其中包括用于自动化的[grunt](http://gruntjs.com/)和用于客户端包管理的[bower 。](http://twitter.github.com/bower/)我的项目的依赖项之一是[SASS twitter-bootstrap](https://github.com/jlong/sass-twitter-bootstrap)。

在我手动管理依赖项更新的其他项目中，我直接在 Bootstrap ( ) 文件中更改了[Bootstrap](http://twitter.github.com/bootstrap/)值，并将其扩展至项目自己文件夹下的文件中。我在这里做了同样的事情，但是当我用 Bower 安装其他软件包时，它覆盖了所有内容（我“取消了 .gitignored”我的组件文件夹，感谢上帝）`variables.less``_variables.scss``main.less``css`

[在组件文件夹之外自定义Bootstrap](http://twitter.github.com/bootstrap/)以使其不再发生的最佳方法是什么？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-14T21:15:23.010

您永远不应该修改`bower_components`文件夹的内容。我们将确保更清楚地说明这一点。

至于你的问题。将`_variables.scss`文件从`bower_components`文件夹复制到例如。`app/styles`, 然后将它导入到你的`main.scss`, 或任何它的名字中, 在 bootstrap 的 import 语句上方。这将导致您的自定义文件覆盖默认变量。

# c# - Toolkit 的 DateTimePicker 中的 AppBar 图标

> ID：15385706
> 
> 赞同：0
> 
> 时间：2013-03-13T12:43:57.367
> 
> 标签：c#, windows-phone-8, datetimepicker, toolkit

我正在 Windows Phone 8 框架中构建我的应用程序。我在这里面临着关键问题。最初我使用 Telerik 的 DateTime 选择器开发了我的应用程序，但不幸的是它有一些动画和循环问题，所以我从 ToolKit 中取出 DatePicker 并用它创建了自定义控件。不幸的是，我无法访问 DatePicker 的 AppBar 以根据我的要求对其进行更新。是否有任何选项可以访问 Toolkit 中 DatePicker 的应用程序栏？帮助不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:54:48.113

我有一个类似的问题， [这](http://silverlight.codeplex.com/workitem/7266)对我来说很好。

# java - 使用 IntelliJ IDEA 结构搜索获取注解参数

> ID：15385707
> 
> 赞同：5
> 
> 时间：2013-03-13T12:44:00.333
> 
> 标签：java, intellij-idea, structural-search

我正在尝试使用`@Table`带有结构搜索和替换的注释中指定的表名为 JPA 实体生成命名查询。

所以首先我正在尝试以下模板：

```
@Table($param$ = $value$)
public class $clazz$ 
```

我有很多课程，例如：

```
@Table(name = "Some Table")
public class SomeClass 
```

如果我用相同的模板替换，它会正确地抓住 $param$ is `name`， $clazz$ 是正确的类名，但 $value$ 是空的。

我正在使用 IDEA 12 build 128.101

我究竟做错了什么？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T13:20:10.013

我想这个问题很久以前就[已经报道过了，但似乎没有人关心它。](http://youtrack.jetbrains.com/issue/IDEA-65982)尝试在 youtrack 中投票。

# java - TitledPane 中的焦点遍历策略

> ID：15385708
> 
> 赞同：2
> 
> 时间：2013-03-13T12:44:10.733
> 
> 标签：java, javafx-2, javafx

关于[JavaFX：如何更改焦点遍历策略？](https://stackoverflow.com/questions/15238928/javafx-change-focus-traversal-policy)Alexander Kirov 展示了如何为 JavaFX 应用程序自定义焦点遍历策略。它工作正常，但不适用于`TitledPane`s。如果 a 中的节点`TitledPane`具有焦点，`TraversalEngine`则不会调用 set。

下面是一个完整的例子来展示这种现象：

```
package org.example;

import com.sun.javafx.scene.traversal.Direction;
import com.sun.javafx.scene.traversal.TraversalEngine;

import javafx.application.Application;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.TitledPane;
import javafx.scene.layout.Pane;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;

public class FocusTest extends Application {
    @Override
    public void start(Stage primaryStage) throws Exception {
        // Create UI
        final VBox root = new VBox();
        final Button foo = new Button("foo");
        foo.setId("foo");
        root.getChildren().add(foo);
        final Button bar = new Button("bar");
        bar.setId("bar");
        final Pane content = new Pane();
        content.getChildren().add(bar);
        final TitledPane tp = new TitledPane("tp", content);
        root.getChildren().add(tp);

        // Set TraversalEngine
        final TraversalEngine te = new TraversalEngine(root, false) {
            @Override
            public void trav(Node owner, Direction direction) {
                System.out.printf("trav owner: %s, direction: %s%n",
                        owner.getId(), direction);
                switch (direction) {
                case DOWN:
                case RIGHT:
                case NEXT:
                    if (owner == foo) {
                        bar.requestFocus();
                    } else if (owner == bar) {
                        foo.requestFocus();
                    }
                    break;
                case LEFT:
                case PREVIOUS:
                case UP:
                    if (owner == foo) {
                        bar.requestFocus();
                    } else if (owner == bar) {
                        foo.requestFocus();
                    }
                    break;
                }
            }
        };
        root.setImpl_traversalEngine(te);

        // Show Scene
        final Scene scene = new Scene(root);
        primaryStage.setHeight(200);
        primaryStage.setScene(scene);
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

场景的根是 a`VBox`并且自定义`TraversalEngine`设置为它。如果按钮`foo`有焦点并且我按下 [Tab] 然后`te.trav`被调用并且焦点设置为`bar`。这就是我的预期。但是什么时候`bar`有焦点，`te.trav`就不叫了。`bar`是一个孩子`TitledPane`。这种行为显示在[1](https://i.stack.imgur.com/kWqGQ.png)中。

有没有人解决这个问题？

![TitledPane 中的焦点遍历](../Images/d474de3526d82f491f25f4d43c215886.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:49:46.663

这是一个处理`TitledPane`s 的棘手解决方案：

```
@SuppressWarnings("deprecation")
private static void registerTraversalEngine(final Parent parent,
        final TraversalEngine te) {
    parent.setImpl_traversalEngine(te);
    for (Node child : parent.getChildrenUnmodifiable()) {
        if (child instanceof Parent) {
            registerTraversalEngine((Parent) child, te);
        }
    }
    if (parent instanceof TitledPane) {
        final TitledPane tp = (TitledPane) parent;
        if (tp.getContent() instanceof Parent) {
            registerTraversalEngine((Parent) tp.getContent(), te);
        }
    }
} 
```

我认为`TitltedPane`s 的问题是，内容不在孩子集中：

```
TitledPane.getChildrenUnmodifiable().contains(TitledPane.getContent()) is always false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-01T19:42:46.760

如果您要关注的组件是 Swing 组件，您只需重载其 requestFocus() 以回调其 SwingNode 父级。仅此而已：

```
 SwingNode n = new SwingNode() {

        @Override
        public void requestFocus() {
            System.err.println("SwingNode.requestFocus "); // just to check
            super.requestFocus();
        }
    };
    JTextArea p = new JTextArea() {

        @Override
        public void requestFocus() {
            System.err.println("JTextArea.requestFocus");
            n.requestFocus(); // <- HERE IS THE TRICK: use SwingNode focus instead of Swing component one
        }
    };
    n.setContent(p); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T01:08:02.097

我将 fx:id 保存在该字段中：

```
nombreDelPropietario.setUserData("#rbTodos"); 
```

我设置了 On Action 事件这个函数：

```
public void procesaEnter(ActionEvent event) {

        /* Obtiene el Objeto que recibió el Enter */

        Node source = (Node) event.getSource();

        /* Obtiene el ID del objeto al que hay que ir */

        String idDestino = (String) source.getUserData();

        /* Si está informado */

        if (idDestino != null) {

            /* Recupera el Nodo */

            Node destino = (Node) ((Scene) source.getScene()).lookup(idDestino);

            /* Si está el nodo activo, accede al nodo seleccionado */

            if (destino != null) {
                destino.requestFocus();
            }

        }

    } 
```

# azure - 通过多个应用程序使用 ACS 进行单点登录

> ID：15385710
> 
> 赞同：3
> 
> 时间：2013-03-13T12:44:22.733
> 
> 标签：azure, asp.net-mvc-4, single-sign-on, acs

简单的单点登录问题

我有两个 MVC4 应用程序：

```
 **1**- http://localhost/BikeShop    

   ACS Relying Party:

 - Name: **BikeShop**
 - Return Url: **http://localhost/BikeShop**
 - Token Format: **SAML 2.0**

**2**- http://localhost/BikePartsShop

   ACS Relying Party:

 - Name: **BikePartsShop**
 - Return Url: **http://localhost/BikePartsShop**
 - Token Format: **SAML 2.0** 
```

* * *

**我的场景**

我访问**BikeShop**并显示 ACS 登录页面并选择我的身份。

我现在可以在**BikeShop**上做事了。

然后我访问**BikePartsShop**并显示 ACS 登录页面，我可以选择我的身份。

* * *

**我必须有的场景**

我访问**BikeShop**并显示 ACS 登录页面并选择我的身份。

我现在可以在**BikeShop**上做事了。

然后我访问**BikePartsShop并且 ACS 授权在****BikeShop**中使用的相同身份，而无需进一步的用户干预。

* * *

有没有人实现过这个场景？

最好的问候，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:36:03.427

You can use the ACS management service to configure multiple reply addresses for the same relying party. See [this link](http://msdn.microsoft.com/en-us/library/hh135147.aspx) for details on how to add an RP. From the linked code sample, register more addresses as follows:

```
RelyingParty relyingParty = new RelyingParty()
{
     Name = "BikeShop",
     AsymmetricTokenEncryptionRequired = false,
     TokenType = "SAML_2_0",
     TokenLifetime = 3600
};

svc.AddToRelyingParties(relyingParty);

RelyingPartyAddress realm = new RelyingPartyAddress()
{
    Address = "http://localhost/",
    EndpointType = "Realm"
};

RelyingPartyAddress replyAddress1 = new RelyingPartyAddress()
{
    Address = "http://localhost/BikeShop",
    EndpointType = "Reply"
};

RelyingPartyAddress replyAddress2 = new RelyingPartyAddress()
{
    Address = "http://localhost/BikePartsShop",
    EndpointType = "Reply"
};

svc.AddRelatedObject(relyingParty, "RelyingPartyAddresses", realmAddress);
svc.AddRelatedObject(relyingParty, "RelyingPartyAddresses", replyAddress1);
svc.AddRelatedObject(relyingParty, "RelyingPartyAddresses", replyAddress2);

svc.SaveChanges(SaveChangesOptions.Batch); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T14:16:56.910

如果您能弄清楚如何记住他们上次使用的身份提供者，请尝试使用此代码来帮助您转发到特定的身份提供者。应存储最后一次登录，以便您将自动 302 返回您的应用程序。

```
public IdentityProvider GetIdentityProvider(string identityProviderName, string realm , string audienceUri )
        {
            // acs config parameters
            string acsNamespace = ConfigurationManager.AppSettings["ida:Namespace"];
            realm = realm ?? Uri.EscapeDataString(ConfigurationManager.AppSettings["ida:Realm"]);
            audienceUri = audienceUri ?? ConfigurationManager.AppSettings["ida:AudienceUri"];

            string returnPath = Uri.EscapeDataString("/home/index");
            var newReplyTo =
                Uri.EscapeDataString(audienceUri.Replace(new Uri(audienceUri).Authority,
                    HttpContext.Current.Request.Url.Authority));
            // retrieve current identity providers
            string idpDiscoveryUrl = string.Format("{0}v2/metadata/IdentityProviders.js?protocol=wsfederation&realm={1}&reply_to={2}&context=rm%3d0%26id%3dpassive%26ru%3d{3}&request_id=&version=1.0", acsNamespace, realm, newReplyTo, returnPath);
            string response = null;
            using (var client = new WebClient()) {
            response = client.DownloadString(idpDiscoveryUrl);    
            }

            List<IdentityProvider> identityProviders = JsonConvert.DeserializeObject<List<IdentityProvider>>(response);
            // lookup provider for tenant
            var identityProvider = identityProviders.Where(i => i.Name == identityProviderName).FirstOrDefault() ?? new IdentityProvider();

            return identityProvider;
        } 
```

# javascript - Javascript递归没有停止

> ID：15385713
> 
> 赞同：0
> 
> 时间：2013-03-13T12:44:24.770
> 
> 标签：javascript, recursion

```
function alertJson(obj){  
    if (obj === undefined) return 'undefined\n';
    if (obj === null) return 'null\n';
    for (var k in obj){     
       alert(obj[k]);
       alertJson(obj[k]);   
    }

}

alertJson({
    a: {
        complicatedly: {
            nested: ['object']
        }
    }
}); 
```

我有两个问题...

1.  为什么在第四次警报之后警报一直持续？
2.  为什么它首先`[object Object]`为前两项带来，然后`object`为其他两项单独带来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:55:09.380

> 为什么在第四次警报之后警报一直持续？

因为你调用`alertJson`了字符串`'object'`。然后 for 循环将遍历字符串的每个字符，依次调用`alertJson`每个字符。所以它会`alertJson('o')`再次调用`alertJson('o')`（字符串的第一个（也是唯一的）字符）等等，因为你没有字符串的退出条件。

> 为什么它首先`[object Object]`为前两项带来，然后为其他两项单独带来反对。

对象的默认字符串表示形式是`[object Object]`. 数组的一个是它们元素的串联，由于数组只有一个元素，所以输出是`object`. 该字符串`'object'`显然会导致输出`object`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T12:52:42.053

1.  因为它是一个无限循环，因为它在字符串上运行相同的操作，所以`"o"`您确实需要在调用之前检查类型`alertJson`

2.  因为当你`toString()`返回一个对象时，它`[object Object]`本身就是字符串对象。

**代码**

```
function alertJson(obj) {
    //if (obj === undefined) return 'undefined\n';
    //if (obj === null) return 'null\n';
    for (var prop in obj) {
        if (obj.hasOwnProperty(prop)) {
            var val = obj[prop];
            console.log(val);
            if (val && typeof val === "object") {
                alertJson(val);
            }
        }
    }
} 
```

[运行示例](http://jsfiddle.net/vcV8Y/)

或者你可以使用[`JSON.stringify(obj)`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T12:53:09.870

我想你想打电话

```
alert(k); 
```

而不是

```
alert(obj[k]); 
```

使用 alert(k) 应该给你：“a”>“complicatedly”>“nested”>0

当您调用传递字符串的 alertJson 时会导致递归。发生这种情况时，您遍历字符串，并使用每个字符（作为 1 字符字符串）调用 alertJson。

这个小提琴应该更接近你的预期：http: [//jsfiddle.net/9ZKvf/](http://jsfiddle.net/9ZKvf/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T12:53:02.760

回答你的第二个问题：

当变量`obj[k]`警报函数调用`.toString()`它时：

```
var a = {};
console.log(a.toString()) // "[object Object]"
var a = [];
console.log(a.toString()) // ""
var a = ["1", "2", "3"];
console.log(a.toString()) // "1,2,3" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T13:06:27.053

我认为 Felix Kling 已经非常清楚地回答了你的问题。无论如何，这里是您的代码的更新版本。

```
function alertJson(obj){  
    for (var k in obj){
       if(!obj.hasOwnProperty(k))continue;
        alert(k+' : '+obj[k].toString());
        if(typeof obj[k]=='object'){alertJson(obj[k]);}
    }

}

alertJson({
    a: {
        complicatedly: {
            nested: ['object']
        }
    }
}); 
```

如果对象没有自己的属性，即它不是从原型继承的，那么我们不需要该值，因此我们跳过它并循环到下一个属性。继续; 告诉循环继续而不读取循环中的其余语句

```
if(!obj.hasOwnProperty(k))continue; 
```

我们不希望它一次一个字符地遍历字符串对象

```
if(typeof obj[k]=='object'){alertJson(obj[k]);} 
```

# android - 在 cocos2d android 中添加无尽的视差背景

> ID：15385719
> 
> 赞同：26
> 
> 时间：2013-03-13T12:44:36.810
> 
> 标签：android, cocos2d-android

我正在使用 android 开发 CoCos2d。我想通过使用 CCParallaxNode 为我的屏幕添加无尽的滚动背景。我可以添加背景并移动它，但是在完成移动操作后屏幕变黑。有人可以帮我吗？

我的代码是

```
CCParallaxNode parallaxNode;
CCSprite spacedust1;
CCSprite spacedust2;
CCSprite planetsunrise;
CCSprite galaxy;
CCSprite spacialanomaly;
CCSprite spacialanomaly2;

parallaxNode = CCParallaxNode.node();

    spacedust1 = CCSprite.sprite("bg_front_spacedust.png");
    spacedust2 = CCSprite.sprite("bg_front_spacedust.png");
    planetsunrise = CCSprite.sprite("bg_planetsunrise.png");
    galaxy = CCSprite.sprite("bg_galaxy.png");
    spacialanomaly = CCSprite.sprite("bg_spacialanomaly.png");
    spacialanomaly2 = CCSprite.sprite("bg_spacialanomaly2.png");
    // 3) Determine relative movement speeds for space dust and background
    // CGPoint cgPoint = CGPoint.ccp(0.1, 0.1);

    CGPoint dustSpeed = CGPoint.ccp(10, 10);
    CGPoint bgSpeed = CGPoint.ccp(5, 5);
    // CGPoint bgSpeed = ccp(0.05, 0.05);

    parallaxNode.addChild(spacedust1, 0, dustSpeed.x, dustSpeed.y, 0,
            winSize.height / 2);
    parallaxNode.addChild(spacedust2, 0, dustSpeed.x, dustSpeed.y,
            spacedust1.getContentSize().width, winSize.height / 2);
    parallaxNode.addChild(galaxy, -1, bgSpeed.x, bgSpeed.y, 0, 10);
    parallaxNode.addChild(planetsunrise, -1, bgSpeed.x, bgSpeed.y, 600, 5);
    parallaxNode
            .addChild(spacialanomaly, -1, bgSpeed.x, bgSpeed.y, 900, 20);
    parallaxNode.addChild(spacialanomaly2, -1, bgSpeed.x, bgSpeed.y, 1500,
            30);
    CCIntervalAction go = CCMoveBy.action(4, CGPoint.ccp(winSize.width, 0));
    CCIntervalAction goBack = go.reverse();
    CCIntervalAction seq = CCSequence.actions(go, goBack);
    CCRepeatForever action = CCRepeatForever.action(goBack);
    parallaxNode.runAction(action); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-13T13:08:52.380

我看到了，因为没有一个答案对你有用。我将提供一个简单的代码来帮助您处理视差滚动背景。

在您的游戏层构造函数中添加此代码

```
background1 = CCSprite.sprite("bg2.png");
background2 = CCSprite.sprite("bg2.png");

background1.setPosition(CGPoint.ccp(winSize.width*0.5f,winSize.height*0.5f));
addChild(background1);

background2.setPosition(CGPoint.ccp(winSize.width+winSize.width*0.5f,winSize.height*0.5f));
addChild(background2); 
```

以及每毫秒调度一次的滚动方法。在构造函数中添加这个

```
this.schedule("scroll"); 
```

现在是滚动方法。

```
public void scroll(float dt) {

    CGPoint pos1 = background1.getPosition();
    CGPoint pos2 = background2.getPosition();

    pos1.x -= 5.0f;
    pos2.x -= 5.0f;

    if(pos1.x <=-(winSize.width*0.5f) )
    {
        pos1.x = pos2.x + winSize.width;
    }

    if(pos2.x <=-(winSize.width*0.5f) )
    {
        pos2.x = pos1.x + winSize.width;
    }

    background1.setPosition(pos1);
    background2.setPosition(pos2);

} 
```

如果有效，请标记我的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T07:55:08.510

从类 Constructor 调用此方法。我从示例中找到了这个技巧：github 上提供了“shotingblock-master”...

```
private void endlessBackground() {
    // Create the two background sprites which will alternate
    _oddBackground = CCSprite.sprite("blue_background.png");
    _evenBackground = CCSprite.sprite("blue_background.png");
    // One starts dead centre and one starts exactly one screen height above
    oddBackground.setPosition(_winSize.width / 2, _winSize.height / 2);
    evenBackground.setPosition(_winSize.width / 2, _winSize.height
            + (_winSize.height / 2));
    // Schedule the scrolling action
    schedule("scroll");
    // Add sprites to the layer
    addChild(_oddBackground).addChild(_evenBackground);
}

public void scroll(float dt) {
    // move them 100*dt pixels down
    _oddBackground.setPosition(_oddBackground.getPosition().x,
            _oddBackground.getPosition().y - 150 * dt);
    _evenBackground.setPosition(_evenBackground.getPosition().x,
            _evenBackground.getPosition().y - 150 * dt);
    // reset position when they are off from view.
    if (_oddBackground.getPosition().y < -_winSize.height / 2) {
        _oddBackground.setPosition(_winSize.width / 2, _winSize.height / 2);
        _evenBackground.setPosition(_winSize.width / 2, _winSize.height
                + (_winSize.height / 2));
    }
} 
```

}

在我的情况下，它工作得很好。可能会对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T03:42:26.297

It looks like the CCRepeatForever action is only running it `goBack`, which means that it's not reversing. Try the following:

```
CCIntervalAction go = CCMoveBy.action(4, CGPoint.ccp(winSize.width, 0));
CCIntervalAction goBack = go.reverse();
CCIntervalAction seq = CCSequence.actions(go, goBack);
CCRepeatForever action = CCRepeatForever.action(seq); // change to seq instead of goBack
parallaxNode.runAction(action); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-07T05:24:38.413

尝试使用这个：

```
CCTexture2D *texture = CCTextureCache::sharedTextureCache()->addImage("pic.png");
ccTexParams params = {GL_LINEAR, GL_LINEAR, GL_REPEAT, GL_REPEAT};
texture->setTexParameters(&params);

CCSprite *sprite = CCSprite::spriteWithTexture(texture, CCRectMake(0, 0, 90, 90)); 
```

并确保图像的高度和宽度必须是 2 的幂。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-26T18:04:44.077

请查看以下链接了解视差垂直无限背景： http: [//kalpeshsantoki.blogspot.in/2014/07/create-vertical-endless-parallax.html](http://kalpeshsantoki.blogspot.in/2014/07/create-vertical-endless-parallax.html)

```
 CGSize winSize = CCDirector.sharedDirector().displaySize();

    //I made graphics for screen 720*1200....so I made this dynamic scale to support multiple screens
    float sX = winSize.width / 720.0f;
    float sY = winSize.height / 1200.0f;
    background = CCVerticalParallaxNode.node(sX, sY, true);

    background.addEntity(1f, "background.png", 0);
    background.addEntity(3, "road_simple.png", winSize.width / 2);
    background.addEntity(1.7f, "road_side.png", 0);
    addChild(background); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-31T12:43:16.983

这是实现它的诀窍。您可以使用大 png 并对其进行处理**或**查看 coocs2d-android 库中提供的示例测试代码

```
CCSprite background = CCSprite.sprite("background.png");

// create a void node, a parent node
CCParallaxNode voidNode = CCParallaxNode.node();

// background image is moved at a ratio of 0.4x, 0.5y
voidNode.addChild(background, -1, 0.4f, 0.5f, 0, 0);

// write your own code for the parallax node 
CCIntervalAction goUp = CCMoveBy.action(4, CGPoint.make(0,-200));
CCIntervalAction goDown = goUp.reverse();
CCIntervalAction go = CCMoveBy.action(8, CGPoint.make(-1000, 0));
CCIntervalAction goBack = go.reverse();
CCIntervalAction seq = CCSequence.actions(goUp, go, goDown, goBack);
voidNode.runAction(CCRepeatForever.action(seq));

addChild(voidNode); 
```

# python - Pygame 混音器一次只播放一种声音

> ID：15385727
> 
> 赞同：3
> 
> 时间：2013-03-13T12:45:03.070
> 
> 标签：python, pygame

这是我的代码：

```
pygame.mixer.init(frequency=22050,size=-16,channels=4)
sound1 = pygame.mixer.Sound('sound1.wav')
sound2 = pygame.mixer.Sound('sound2.wav')
chan1 = pygame.mixer.find_channel()
chan2 = pygame.mixer.find_channel()
chan1.queue(sound1)
chan2.queue(sound2)
time.sleep(10) 
```

我认为它会同时播放（非阻塞且代码立即进入睡眠状态）`sound1`。 相反，它会播放，然后在完成时播放。 `sound2``queue`
`sound1``sound2``sound1`

我已经确认两个通道在内存中都是不同的对象，所以 find_channel 没有返回相同的通道。是否有我遗漏的东西或者 pygame 没有处理这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T13:09:49.420

See [Pygame Docs](http://www.pygame.org/docs/ref/mixer.html#pygame.mixer.Channel), It says:

> **Channel.queue** - queue a Sound object to follow the current

So, even though your tracks are playing on different channels, so if you force each sound to play, they will play simultaneously.

And for playing multiple sounds:

*   Open all sound files, and add the `mixer.Sound` object to a list.
*   The loop through the list, and start all the sounds.. using `sound.play`

This forces all the sounds to play simultaneously.
Also, make sure that you have enough empty channels to play all sounds, or else, some or the other sound sound will be interrupted.
So in code:

```
sound_files = [...] # your files
sounds = [pygame.mixer.Sound(f) for f in sound_files]
for s in sounds:
    s.play() 
```

You could also create a new `Channel` or use `find_channel()` for each sound..

```
sound_files = [...] # your files
sounds = [pygame.mixer.Sound(f) for f in sound_files]
for s in sounds:
    pygame.mixer.find_channel().play(s) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T13:42:19.237

我唯一能想到的是 chan1 和 chan2 是相同的，即使它们是不同的对象，它们也可以指向同一个通道。

在获得频道后立即尝试排队，这样您肯定会使用 find_channel() 获得不同的频道，因为 find_channel() 总是返回一个非繁忙频道。

尝试这个：

```
pygame.mixer.init(frequency=22050,size=-16,channels=4)
sound1 = pygame.mixer.Sound('sound1.wav')
sound2 = pygame.mixer.Sound('sound2.wav')
chan1 = pygame.mixer.find_channel()
chan1.queue(sound1)
chan2 = pygame.mixer.find_channel()
chan2.queue(sound2)
time.sleep(10) 
```

# ruby-on-rails - 使用哪个操作：PUT 或 POST

> ID：15385728
> 
> 赞同：1
> 
> 时间：2013-03-13T12:45:03.913
> 
> 标签：ruby-on-rails, rest, routing

我在路由文件中有资源：

```
resources :forwardings 
```

我需要添加将设置保存到集合中所有项目的操作。

问题是我应该使用哪种方法来实现这个？

```
resources :forwardings do
  put 'save_all', :on => :collection
  # or
  post 'save_all', :on => :collection
end 
```

也许我遗漏了一些细节，我很乐意听到。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:47:10.103

您可以同时使用两者，没关系，两者都对创建“有益”。

在此处阅读更多内容：[REST 中的 PUT 与 POST](https://stackoverflow.com/questions/630453/put-vs-post-in-rest)

真的看那些答案，有很多解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-16T12:18:06.003

PUT 需要资源 ID 以便执行创建/更新操作，而 POST 只是盲目地创建资源。或者我们可以说，当使用 POST 发布数据时，资源 ID 在执行请求的操作后由服务器分配，以便使用该资源 ID 可以完成进一步的操作。如果我们希望从服务器端分配资源 ID，那么我们可以使用 POST，或者如果资源 ID 由客户端提供，那么我们可以使用 PUT。

# nhibernate - 在 NHibernate 映射中设置列排序规则

> ID：15385738
> 
> 赞同：1
> 
> 时间：2013-03-13T12:45:27.153
> 
> 标签：nhibernate, nhibernate-mapping, collation

我正在研究 NHibernate 映射，我们处于需要在特定列上指定排序规则的情况。最好在映射期间。

这个想法是在 NHibernate 创建模式之后，它看起来像这样：

```
CREATE TABLE [dbo].[Foo] (
    [Bar]        NVARCHAR (128) NULL **collate sql_latin1_general_cp1_cs_as**,
    [BarTwo]     NVARCHAR (max)
); 
```

我目前正在使用 Fluent，但 xml 解决方案也可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T10:10:50.693

我发现我可以将排序规则添加到 CustomSqlType。这确实意味着我需要始终添加一个 CustomSqlType 并因此使映射数据库依赖。

```
.CustomSqlType("nvarchar(128) collate Latin1_General_CI_AS") 
```

但就目前而言，它似乎有效。有人有另一个/更好的想法/提议吗？

# sql - 无效的列名 SQL Server 2012

> ID：15385739
> 
> 赞同：3
> 
> 时间：2013-03-13T12:45:31.237
> 
> 标签：sql, sql-server, tsql, sql-server-2012

我该怎么做才能`Rowss`在`WHERE`子句中使用名称？

```
SELECT TOP 10 
    ROW_NUMBER() OVER(ORDER BY dp.IdPytanie) AS Rowss,
    dp.IdPytanie
    ,dp.SpecjalnePytanie
 FROM dodajtemat_pytanie dp
 WHERE 
    (@RowBegining = 0 OR convert(int,Rowss) >= @RowBegining)
    AND (@RowEnd = 0 OR Rowss <= @RowEnd) 
```

错误 ![在此处输入图像描述](../Images/72dc79e33e51526f31c6b237e0ff2d24.png)

这项工作->

```
 @RowEnd = 0 OR ROW_NUMBER() OVER(ORDER BY dp.IdPytanie) <= @RowEnd 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T12:47:36.187

使用这样的子查询或*CTE*：

```
WITH CTE
AS
(
    SELECT 
      ROW_NUMBER() OVER(ORDER BY dp.IdPytanie) AS Rowss,
      dp.IdPytanie,
      dp.SpecjalnePytanie
    FROM dodajtemat_pytanie dp
)
SELECT *
FROM CTE
WHERE (@RowBegining = 0 OR Rowss >= @RowBegining)
  AND (@RowEnd      = 0 OR Rowss <= @RowEnd); 
```

该`WHERE`子句在语句之前进行*逻辑*评估`SELECT`，因此它无法识别新创建的 alias `Rowss`。

有关 SQL Server 中的逻辑查询处理步骤的详细信息，请参阅：

*   [**Itzik Ben 的逻辑查询处理海报**](http://www.sql.co.il/books/insidetsql2008/Logical%20Query%20Processing%20Poster.pdf)

# php - 在任何云中部署自定义 php 扩展

> ID：15385745
> 
> 赞同：0
> 
> 时间：2013-03-13T12:45:39.593
> 
> 标签：php

我们正在开发一个结合了 flex、php 和 C++ 的应用程序。Flex 接口用户和 c++ 共享库，作为数据库交互和其他服务器活动的 php 扩展创建。而 PHP 的职责是成为 flex 和 c++ 之间的中间层。我们计划在云上托管这个应用程序（在 phpclould 上尝试过），以使其可供客户使用。但是，我发现 phpcloud 不允许配置扩展目录配置并被禁用。这是非常重要的，因为 C++ 组件是应用程序的核心。请提出以下建议：

1.  有什么办法可以在phpcloud中配置它吗？
2.  是否有任何其他云允许部署自定义 php 扩展？
3.  由于安全原因，此部署模型是否被阻止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:26:33.243

由于安全和稳定性原因，PHPCloud 已禁用自定义 php 扩展。请参考评论中的链接。除了那个 PHP 太弃用 dl 系统调用。我目前正在等待 appFog 云的回复，看看他们是否允许。

[https://groups.google.com/forum/#!topic/appfog-users/ZADuiFv2alA](https://groups.google.com/forum/#!topic/appfog-users/ZADuiFv2alA)

# c# - 如何将 c sharp List 对象传递给 java 脚本函数？

> ID：15385747
> 
> 赞同：0
> 
> 时间：2013-03-13T12:45:43.800
> 
> 标签：c#, javascript, json, asp.net-mvc-4

我已经这样尝试过了，但是 JS 函数没有调用

最初的：

```
@{   
    List<CmsSite.Models.Category> category_list = (List<CmsSite.Models.Category>)ViewData["categories_details"];
} 
```

传递给js函数：

```
<button onclick="InsertNewProduct(@Json.Encode(category_list))">Save</button> 
```

js函数：

```
function InsertNewProduct(arr) {

    json_obj = {
                   //what to do here
    } 
```

现在 arr 是一个 JSON 对象数组

我看不到`List<CmsSite.Models.Category> category_list`值

我应该如何在 JS 上解码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:51:25.297

您可以通过以下方式执行此操作：

```
@Json.Encode(category_list) 
```

更新：

```
<script>
    function testFunc(arr) {
        for (var i = 0; i < arr.length; i++) {
            alert(arr[i]);
        }
    }
</script>

<button onclick="testFunc(@Json.Encode(new List<string> { "1", "2", "3" }))">
    Save
</button> 
```

如果这对您不起作用，则您的模型类 ( `CmsSite.Models.Category`) 序列化可能存在问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:51:08.790

客户端不会看到`category_list`，因为那是服务器端代码并​​且未交付。您可以使用[`JavaScriptSerializer`](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)将列表序列化为 JSON 并将其输出到 Javascript 变量或隐藏字段以使用 JavaScript 引用。

下面应该输出的东西，随便找个地方放吧：

```
@Html.Raw(new JavaScriptSerializer().Serialize(category_list)) 
```

因此，如果您在`script`将在客户端上呈现的块中执行此操作，则将该调用的输出分配给一个变量，然后在加载页面时显示该变量。

# database - Liquibase：更新脚本（当数据库中已经实现了一些更改时）

> ID：15385749
> 
> 赞同：0
> 
> 时间：2013-03-13T12:45:48.687
> 
> 标签：database, migration, liquibase

好的，所以问题可能出在我的 liquibase 方法中，我已经在数据库端实现了一些更改，并且我想创建变更集，所以我只需将一个新的 sql 文件添加到我的变更集中。当我尝试运行 luquibase update 命令时，出现错误，告诉我数据库中存在某些列。

对我来说，在创建变更集脚本之前，我尝试在数据库中添加列（即使用 PhpMyAdmin）是很正常的。然后我想与其他开发人员共享这些更改，所以我生成 sql（从我的更改），将其添加到 sql 文件中并在变更集中启动此文件。有人可以告诉我我做错了什么吗？

问题涉及我向 mysql 表添加一些新列时的情况，然后我使用 alter_table 脚本创建了 sql 文件，然后运行 ​​liquibase update 命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T14:36:42.713

虽然事先使用 Liquibase 完成对数据库的所有更改是理想的，但在某些情况下这是不可能的。一个是您描述的用例。另一种情况是，如果将修补程序应用于生产并需要合并回开发。

如果您确定您的变更集已应用于环境，请考虑运行[changelogSync](http://www.liquibase.org/documentation/command_line.html)。它将断言所有变更集都已应用，并将使用适当的信息更新 Liquibase 元表。

虽然并不理想，但我们认为 changelogSync 对于现实世界的应用程序是必需的，有时生活并没有像我们希望的那样发展。这就是为什么我们一定要在 Datical DB 中清楚地公开它。我们认为它在现实和理想主义之间取得了平衡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:00:28.083

不要在数据库中进行手动更新。所有架构更改都必须使用 liquibase 完成，否则 - 就像您的情况一样 - 您的变更集将与现有架构发生冲突。

# html - Audio Ogg Vorbis android 默认浏览器

> ID：15385750
> 
> 赞同：7
> 
> 时间：2013-03-13T12:45:49.690
> 
> 标签：html, html5-audio, ogg, vorbis

我想知道 Android 设备中音频编解码器的支持是什么。

在这里我发现 2.3 和 4.0 只支持 mp3 编解码器：

[http://html5test.com/compare/browser/android23/android40/android22.html](http://html5test.com/compare/browser/android23/android40/android22.html)

虽然我在 Galaxy S 上测试了 android 2.3，但我发现它也可以播放 ogg vorbis 格式。

4.x 手机也是如此。

这是我做的测试[http://twigit.pl/trash/test_mac.html](http://twigit.pl/trash/test_mac.html)

我在哪里可以找到有关音频编解码器移动支持的可靠资源？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T21:13:33.297

这是 Android 中支持的媒体格式的官方列表：

[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

表 1 显示所有 Android 版本都支持 Vorbis 解码器。

尽管如此，不保证在所有 Android 平台版本和所有 Android 设备上都可用的媒体编解码器。即，一些 OEM 可以在不支持某些特定代码（Vorbis 或任何其他代码）的情况下构建自己的 Android ROM。

这就是所谓的**平台碎片化**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-15T17:02:44.600

这是一个很好的问题，`bluesm`。您完全正确地指出`Sergey K`，平台对 ogg/vorbis 的支持与浏览器支持不同。您正在寻找的是对 HTML5 规范定义的音频和视频标签支持的支持，以及特定于各种媒体格式的解码器的实现。

根据此页面[http://hpr.dogphilosophy.net/test/](http://hpr.dogphilosophy.net/test/)

> Android 浏览器：所有版本的 Android 都内置了 Ogg Vorbis 音频支持，但直到“Gingerbread”版本（Android 2.3）才添加对 HTML5 标签的支持。出于某种奇怪的原因，Android 浏览器报告它不支持 WebM 音频，但它确实支持。

但是，默认浏览器可能不正式支持 ogg 格式，各种 javascript 检测策略可能会报告浏览器不支持它。但是，我刚刚使用手机上的默认浏览器在该站点上进行了测试，该浏览器是 Android 2.3.7 设备（规格如下）。ogg 格式确实播放了！！

我认为您为 html5test.com 发布的链接通常是一个很好的参考，但在这种情况下，它似乎是错误的。当然，这将取决于在逐个 ROM 基础上安装的默认版本。但在我有限的测试中，Android 2.3 Gingerbread 中的默认浏览器确实支持 ogg/vorbis。

html5test 报告浏览器不支持 ogg 的原因很可能与 javascript 检测不完整有关。HTML5 音频元素支持该`canPlayType`功能。您可以向它传递一个 mime 类型，以确定浏览器是否可能能够播放特定格式。

```
var canPlayOga = audioElement.canPlayType('audio/ogg'); 
var canPlayAppOgg = audioElement.canPlayType('application/ogg'); 
```

在默认浏览器（至少我正在使用的浏览器）中，这对于**application/ogg**返回“是” ，但对于**audio/ogg**返回“否” 。因此，即使浏览器可以播放 ogg 文件，它报告它不能，如果只检查**audio/ogg**。

为了澄清这一点，我应该指出**application/ogg**是一种 mime 类型，**audio/ogg**也是如此。浏览器使用此信息来了解特定文件的格式。在没有此信息的情况下，浏览器可以使用与文件扩展名关联的默认 mime 类型。您可能知道，`<source>`标签内的`<audio>`标签可以包含一个`type`带有音频格式的 mime 类型的属性作为浏览器的提示：

```
<audio>
  <source src="horse.ogg" type="audio/ogg">
  <source src="horse.mp3" type="audio/mpeg">
</audio> 
```

我的测试表明，浏览器可能无法使用**audio/ogg**类型分配播放它，但会使用**application/ogg**类型，如下所示：

```
<audio>
  <source src="horse.ogg" type="application/ogg">
</audio> 
```

读者可以在这里尝试他们自己的设备，并留下关于哪些工作和哪些不工作的评论：http: [//hpr.dogphilosophy.net/test/](http://hpr.dogphilosophy.net/test/)

# jquery - jquery datepicker 自动打开（但不应该）

> ID：15385751
> 
> 赞同：5
> 
> 时间：2013-03-13T12:45:50.557
> 
> 标签：jquery, jquery-ui-datepicker

我有一个使用 JQuery UI 的应用程序。这个应用程序需要打开一个对话框并显示两个日期选择器。目前，我的对话框正在工作。我也有两个日期选择器。我的问题是：a）日期选择器默认日期未显示，b）当我打开对话框时，“来自”日期选择器会自动打开。这是我初始化对话框和日期选择器的代码：

```
<div id="myDialog" title="Other Date Range" style="display:none;">
    <table border="0">
        <tr>
            <td>From</td>
            <td></td>
            <td>To</td>
        </tr>
        <tr>
            <td><input id="fromOtherDateTextBox" style="width:140px;" /></td>
            <td>&nbsp;-&nbsp;</td>
            <td><input id="toOtherDateTextBox" style="width:140px;" /></td>
        </tr>
        <tr>
            <td>mm/dd/yyyy</td>
            <td></td>
            <td>mm/dd/yyyy</td>
        </tr>
    </table>
</div>

$(document).ready(function () {
    $("#fromOtherDateTextBox").datepicker({        
        defaultDate: "-1d",
        maxDate: 0,
        minDate: new Date(2000, 1, 1)
    });   

    $("#toOtherDateTextBox").datepicker({        
        defaultDate: "0d",
        maxDate: 0,
        minDate: new Date(2000, 1, 1)
    });   

    $("#myDialog").dialog({
        autoOpen: false, modal: true,
        show: "fade", hide: "fade",
        height:220, width:350,
        buttons: {
            'Cancel': function () { $(this).dialog('close'); },
            'View': useOtherDate_Click
        }
    });    
}); 
```

这是我用来打开对话框的代码：

```
$("#myDialog").dialog("open"); 
```

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T12:57:09.350

问题是当对话框打开时，焦点设置为日期控件，这会导致日期选择器打开。

一种可能的解决方案是分配`tabIndex=1`数据控件以外的元素。

```
<div id="myDialog" title="Other Date Range" style="display:none;">
    <table border="0" tabIndex="1"> 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/F4PUw/1/)

[defaultDate 属性](http://api.jqueryui.com/datepicker/#option-defaultDate)不会为输入控件设置默认日期，它只会在弹出窗口中突出显示日期。如果查看 datepicker 弹出窗口，可以发现设置的 defaultDate 突出显示

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-13T11:13:27.227

`close()`初始化 datepicker 组件后尝试调用方法。

```
$("#fromOtherDateTextBox").datepicker({ /* ... */}).close(); 
```

# air - 打印机状态监控 adobe AIR 桌面应用程序

> ID：15385753
> 
> 赞同：3
> 
> 时间：2013-03-13T12:45:57.180
> 
> 标签：air, snmp, printers, mib, network-printers

想要一个独立于平台的桌面应用程序来检查网络打印机的墨粉/墨盒级别，并通知用户状态并让他选择在低时要求购买墨粉。

到目前为止，我得到的信息是我们需要从启用 SNMP 的打印机的 MIB 文件中获取 OID 的值。我希望这个应用程序尽可能通用，适用于所有品牌，但今天特别需要 Brother 打印机和多功能一体机。

很抱歉寻找 nube，但我已经搜索了足够多的信息并且没有太多可用信息。

我可以使用制造商的本机支持和监控工具，因为兄弟提供了可以安装在桌面上的监控实用程序（在这种情况下，MIB 文件将位于（在设备上或桌面上已安装的程序中？）或需要使用 icanga、negios 等网络监控工具。

其次，如何在 AIR 上实现它。我正在考虑第一次使用 AIR，想知道它是否有帮助，在继续之前我是否需要了解更多关于这项技术的知识。

有一些可用的网络监控工具，如 negios 和 Icinga。它甚至可以安装在桌面上。这些数据是否可以被解析和使用。我们需要它用于兄弟打印机，但希望根据 MIB 文件的文档格式越来越标准，为多制造商解决方案实施它。只有在一年左右通用的情况下，我们才会投入时间，因为它不值得单个制造商花费时间。因此，按照 CLI，我发现在 Net-SNMP 中很有用，并相信它会让我通过外部脚本（AIR）调用这些应用程序来输出。在 MIB OID 的数字和文本形式之间转换，并显示 MIB 内容和结构 (snmptranslate)。图形 MIB 浏览器 (tkmib)，使用 Tk/perl。用于接收 SNMP 通知 (snmptrapd) 的守护程序应用程序。可以记录选定的通知（到系统日志，NT 事件日志或纯文本文件），转发到另一个 SNMP 管理系统，或传递给外部应用程序。用于响应管理信息的 SNMP 查询 (snmpd) 的可扩展代理。这包括对各种 MIB 信息模块的内置支持，并且可以使用动态加载的模块、外部脚本和命令以及 SNMP 多路复用 (SMUX) 和代理可扩展性 (AgentX) 协议进行扩展。

是否有任何 API 可以读取 AIR 中的 MIB 文件。

非常感谢任何链接或一些附加信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T11:55:28.437

对于不支持 SNMP 的打印机，您可能必须实施特定于制造商的解决方案。如果您想编写一个与启用 SNMP 的打印机对话的 AIR 应用程序，我可以看到以下方法：

### 在 ActionScript 中实现 SNMP 客户端

由于 SNMP 通常基于 UDP，您可以使用[flash.net.DatagramSocket](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/DatagramSocket.html)在 AIR 中实现您自己的 SNMP 客户端。AFAIK，没有现成的 ActionScript 库，因此您需要 SNMP 协议的专业知识和大量的开发时间。

### 编写 AIR 本机扩展

使用本机扩展 (ANE)，您可以在 C/C++ 中实现 SNMP 客户端。[这样做的好处是您可以使用像Net-SMTP](http://www.net-snmp.org/)这样的开源库来完成繁重的工作，但您仍然需要一些开发和构建 C/C++ 库的经验。

### 使用命令行工具

[例如，最简单的解决方案可能是使用来自Net-SMTP](http://www.net-snmp.org/)或[SnmpSoft](http://www.snmpsoft.com/freetools/index.html)的免费 SNMP 命令行实用程序之一。您所要做的就是使用提供正确参数的[flash.desktop.NativeProcess](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/desktop/NativeProcess.html)调用这些程序之一，然后解析输出。

# java - JMS 桥现有队列消息

> ID：15385754
> 
> 赞同：1
> 
> 时间：2013-03-13T12:46:00.837
> 
> 标签：java, jms, tibco

是否可以设置 JMS 桥以将现有 JMS 消息从一个队列桥接到另一个队列。我有新消息的桥接工作，但如果消息已经存在于源队列中，那么它们不会桥接到目标队列。

有没有办法做到这一点？

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:54:32.107

Bridge 只能对流入源的消息生效，而不是对已经在源中的消息生效。

# ruby-on-rails - 黄瓜奇怪的行为

> ID：15385757
> 
> 赞同：0
> 
> 时间：2013-03-13T12:46:08.110
> 
> 标签：ruby-on-rails, cucumber

在将 Cucumber 用于 BDD 时，我发现了一个非常奇怪的场景，即我的“我应该看到”方法（默认实现失败）。

这是我的场景定义：

```
 When I go to signup page
  And I fill in "Username" with "ben@test.com"
  And I press "Sign up"
  Then I should see "Anything that i type here. ABC XYZ" 
```

显然，文本“我在这里输入的任何内容。ABC XYZ”不在页面上，但黄瓜不会失败。这是“我应该看到”的定义

```
Then /^(?:|I )should see "([^"]*)"$/ do |text|
  if page.respond_to? :should
    page.should have_content(text)
  else
    assert page.has_content?(text)
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:04:46.100

再挖一点，似乎问题是水豚不支持1.8.7。它没有大声抱怨，而是表现不佳。诸如填写表格之类的工作等，但`has_content`失败得很惨。如果它大声喊它需要1.9.x，也许会更好。

无论如何，我将我的 Gemfile 更改为

`gem "capybara", "1.1.4", :group => :test`

这一切似乎又恢复了。

我应该将此记录为针对水豚的问题吗？这个想法只是尖叫它不适用于 1.8.7。

有关此讨论的更多信息：[https ://groups.google.com/forum/?fromgroups=#!topic/cukes/B3UbbyG5k6s](https://groups.google.com/forum/?fromgroups=#!topic/cukes/B3UbbyG5k6s)

# nhibernate - Nhibernate Validation Annotation 未生成有效架构

> ID：15385761
> 
> 赞同：1
> 
> 时间：2013-03-13T12:46:20.450
> 
> 标签：nhibernate, nhibernate-validator

我正在使用 nhibnernate 生成模式，但它没有生成它没有考虑约束：

```
 public class Person
    {
        public virtual int Id { get; set; }

        [NotNull]
        public virtual string name { get; set; }
    }

public class PersonMap : ClassMapping<Person>
    {
        public PersonMap()
        {
            Id(x => x.Id);
            Property(x => x.name);
        }
    }

public class PersonVal : ValidationDef<Person>
    {
        public PersonVal()
        {
            Define(x => x.name).NotNullable();
        }
    } 
```

我将验证附加到配置如下：

```
 public static void SetupNHibernateValidator(Configuration config)
            {
                var nhvConfiguration = new FluentConfiguration();

                nhvConfiguration
                    .SetDefaultValidatorMode(ValidatorMode.UseAttribute)
                    .Register(Assembly.Load("ClassLibrary2").ValidationDefinitions());

                nhvConfiguration
                    .IntegrateWithNHibernate
                    .ApplyingDDLConstraints()
                    .RegisteringListeners();

                //nhvConfiguration.Register(new [] { typeof(Person) });    
                nhvConfiguration.Register(new [] { typeof(PersonVal) });

                ValidationEngine = new ValidatorEngine();
                ValidationEngine.Configure(nhvConfiguration);

                ValidatorInitializer.Initialize(config, ValidationEngine);
            }

        public static ISessionFactory BuildSessionFactory()
        {
            const string ConnectionString = @"XYZ";

            _nhConfiguration = new Configuration( db =>
db.Dialect<MsSql2008Dialect>();
                db.Driver<SqlClientDriver>();
                db.KeywordsAutoImport = Hbm2DDLKeyWords.AutoQuote;
                db.IsolationLevel = IsolationLevel.ReadCommitted;
                db.ConnectionString = connection;
                db.Timeout = 10;);

            ValidationProvider.SetupNHibernateValidator(_nhConfiguration);
            var mapping = GetMappings();
            _nhConfiguration.AddDeserializedMapping(mapping, "ClassLibrary2");
            return _sessionFactory = _nhConfiguration.BuildSessionFactory();
        } 
```

生成的输出是：

```
create table Person (
        Id INT not null,
       name NVARCHAR(255) null,
       primary key (Id)
    ) 
```

可能是什么问题？NAME 字段仍然定义为 NULL，它应该是 NOT NULL。

对不起，我知道它的代码太多......

感谢帮助...

**编辑**

我正在使用代码映射

```
using NHibernate.Validator.Cfg.Loquacious;
    public class PersonVal : ValidationDef<Person>

using NHibernate.Mapping.ByCode.Conformist;
        public class PersonMap : ClassMapping<Person>

using NHibernate.Validator.Constraints;
            public class Person 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T03:49:18.957

问题在于行：

```
Register(Assembly.Load("ClassLibrary2").ValidationDefinitions() 
```

我已将其替换为：

```
Register(Assembly.Assembly.GetExecutingAssembly().ValidationDefinitions()) 
```

# build - ADF 皮肤构建忽略 SVG 图像

> ID：15385762
> 
> 赞同：0
> 
> 时间：2013-03-13T12:46:22.723
> 
> 标签：build, oracle-adf, skinning

我目前正在开发一个`Skin`同时`ADF Fusion Web Application`使用 the`JDeveloper 11.1.2.0`和`Skin Editor 11.1.2.0`.

对于某些`background-image`规则，我使用`SVG`图像。但是，这些图像在部署期间`SVG`不会复制到我的正确文件夹中。`lookAndFeel.jar`我的所有`PNG`图像都按以下方式复制到

```
lookAndFeel.jar\META-INF\adf\skins\<skinname>\images\*.png 
```

我的`SVG`图像被遗忘的地方

```
lookAndFeel.jar\skins\<skinname>\images\*.svg 
```

我能够使用以下命令解决此问题，利用`7zip`：

```
"C:\Program Files\7-Zip\7z.exe" a lookAndFeel.jar META-INF\adf\skins\<skinname>\images\*.svg 
```

这会将`SVG`部署后的那些图像添加到我`JAR`文件的正确文件夹中。

然而这不是很优雅，我想知道是否有更好的解决方案，我可以在以后的自动构建工作中采用。有没有办法配置皮肤构建，包括`SVG`图像？还是可以用`Ant`文件扩展？如果是这样，有人可以引导我走向正确的方向，因为我以前从未使用过`Ant`自己吗？

编辑

my`PNG`和`SVG`images 都在同一个文件夹中，所以 Source-path 似乎是正确的。我在我的项目文件中找到了以下部分：

```
<hash n="oracle.jdeveloper.compiler.OjcConfiguration">
    <list n="copyRes">
        <string v=".cpx"/>
        <string v=".dcx"/>
        <string v=".ejx"/>
        <string v=".gif"/>
        <string v=".ini"/>
        <string v=".jpeg"/>
        <string v=".jpg"/>
        <string v=".png"/>
        <string v=".properties"/>
        <string v=".sva"/>
        <string v=".svg"/>
        <string v=".tag"/>
        <string v=".tld"/>
        <string v=".wsdl"/>
        <string v=".xcfg"/>
        <string v=".xlf"/>
        <string v=".xml"/>
        <string v=".xsd"/>
        <string v=".xsl"/>
    </list> 
```

两者都有`PNG`并`SVG`列出。`PNG`我没有在我的项目文件中找到另一个地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:49:31.877

此文件可能会从项目的部署中排除

有两件事要检查：

1.  确保项目的源路径包括所有
2.  编辑您的部署配置文件，并确保在您的图像文件夹下包含来自过滤器的任何文件，或者甚至添加规则 *.svg 自己的规则（如果不存在）

# php - 在 JSON 更改时立即将 JSON 数据插入 MYSQL

> ID：15385765
> 
> 赞同：0
> 
> 时间：2013-03-13T12:46:37.687
> 
> 标签：php, mysql, json

我有可更改的 JSON 文件`http://91.205.205.18:8000/info.xsl?mount=/128`（它包括 icecast2 统计信息），我无法理解如何检查 JSON 数据是否更改以立即解析并将解析的数据插入数据库。我需要每 3-5 分钟使用 cron 来处理一些 php 脚本吗？

PS对不起我的英语不好;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:55:41.693

第一次您可以在导入的 json 数据中使用数据库中的时间戳（此时间值将在 json 中提供），之后在每个处理时间中您只能检查 json 时间戳，如果时间戳有任何差异，则只需插入/更新否则忽略它，对于这个插入/更新过程，您可以创建一个 Cron 作业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:57:53.173

您要么必须设置一个 cron 作业以定期检查。在我从事的一个项目中，我们有一部分程序会不断（每 2 秒）检查网站上的某些 xml 数据是否发生变化。如果一个人无法像我们一样控制源，这是唯一的解决方案。

如果您确实需要某种形式的推送通知并且您可以控制源数据，您可以使用 pubsubhubub 服务器： [https ://code.google.com/p/pubsubhubbub/](https://code.google.com/p/pubsubhubbub/)

我还没有设置 pubsubhubbub 服务器，但如果您需要将实时数据更新从一个输出发送到远程输入，这是最好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:51:53.990

编写一个`CRON`作业，从数据库中获取`JSON`数据`http://91.205.205.18:8000/info.xsl?mount=/128`，然后检查数据库中接收到的数据，如果该数据已经存在于 db 中，则丢弃它，否则保存它。

# sql-server - 如何在 SQL Server 中为行创建过期时间

> ID：15385767
> 
> 赞同：2
> 
> 时间：2013-03-13T12:46:51.890
> 
> 标签：sql-server, entity-framework, visual-studio-2012

我`LoginControl`在 SQL Server 数据库中有一个表。

我想在添加 30 分钟后自动删除属性。

我在表中有两个属性 (`LoginId`和`Token`)，`LoginControl`我想将它们作为一个连续删除。

我刚刚使用 Visual Studio 2012 创建了一个简单的数据库，并通过实体框架访问它。

有什么解决办法吗？`*.edmx`创建文件时 Visual Studio 中的一些设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:53:03.823

这不是这些任务的完成方式——它们不是在 SQL 中实现的，而是在应用程序的业务逻辑中实现的。

你应该更好：

1.  向两个表添加时间戳字段，存储插入时间（您甚至可以使用触发器来执行此操作）
2.  在对受影响的表进行查询时验证时间戳，并丢弃查询中的“太旧”记录
3.  每天或每小时创建一个定期清理数据库的作业，以清理过时的登录记录。
    *   关于 SQL 服务器：很多人说这是要走的路。这将数据库用于它的本质：处理数据。需要删除陈旧的数据——从这方面来说，应该使用数据库。
        *   它需要使用数据库的调度工具，
        *   代码不在一个地方，如果应用程序代码仅在应用程序中，并且尚未使用数据库功能，则需要更加小心地处理发布
    *   在应用程序中：我更喜欢这个，因为这样所有的逻辑都在一个地方。但这是我个人的看法，也有明显的缺点：
        *   更多应用程序代码，
        *   它需要应用程序中的调度逻辑，如果以前不存在，则必须添加，最重要的是，从长远来看，要注意

关于将清理/清理逻辑放在应用程序现有性质的位置的决定有很多 - 当然还有可用的功能。

# android - 如何知道android编码中的问题在哪里

> ID：15385772
> 
> 赞同：-2
> 
> 时间：2013-03-13T12:46:57.143
> 
> 标签：android

我是 android 新手，我已经分配了一个项目。我在查看错误日志时遇到了问题。这是我的错误日志，请告诉我这个问题是什么以及如何解决

```
03-13 12:40:06.470: E/WindowManager(923): android.view.WindowLeaked: Activity  om.example.mytest.ReadContactsActivity has leaked window   com.android.internal.policy.impl.PhoneWindow$DecorView{40d0e768 V.E..... R.....ID 0,0-97,92} that was originally added here
03-13 12:40:06.470: E/WindowManager(923):   at android.view.ViewRootImpl.<init>(ViewRootImpl.java:354)
03-13 12:40:06.470: E/WindowManager(923):   at android.view.WindowManagerGlobal.addView(WindowManagerGlobal.java:216)
03-13 12:40:06.470: E/WindowManager(923):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:69)
03-13 12:40:06.470: E/WindowManager(923):   at android.app.Dialog.show(Dialog.java:281)
03-13 12:40:06.470: E/WindowManager(923):   at com.example.mytest.ReadContactsActivity$CountDownTask.onPreExecute(ReadContactsActivity.java:50)
03-13 12:40:06.470: E/WindowManager(923):   at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:586)
03-13 12:40:06.470: E/WindowManager(923):   at android.os.AsyncTask.execute(AsyncTask.java:534)
03-13 12:40:06.470: E/WindowManager(923):   at com.example.mytest.ReadContactsActivity.onCreate(ReadContactsActivity.java:34)
03-13 12:40:06.470: E/WindowManager(923):   at android.app.Activity.performCreate(Activity.java:5104)
03-13 12:40:06.470: E/WindowManager(923):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-13 12:40:06.470: E/WindowManager(923):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-13 12:40:06.470: E/WindowManager(923):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-13 12:40:06.470: E/WindowManager(923):   at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-13 12:40:06.470: E/WindowManager(923):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-13 12:40:06.470: E/WindowManager(923):   at android.os.Handler.dispatchMessage(Handler.java:99)
03-13 12:40:06.470: E/WindowManager(923):   at android.os.Looper.loop(Looper.java:137)
03-13 12:40:06.470: E/WindowManager(923):   at android.app.ActivityThread.main(ActivityThread.java:5039)
03-13 12:40:06.470: E/WindowManager(923):   at java.lang.reflect.Method.invokeNative(Native Method)
03-13 12:40:06.470: E/WindowManager(923):   at java.lang.reflect.Method.invoke(Method.java:511)
03-13 12:40:06.470: E/WindowManager(923):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-13 12:40:06.470: E/WindowManager(923):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-13 12:40:06.470: E/WindowManager(923):   at dalvik.system.NativeStart.main(Native Method) 
```

这是我为实现而编写的代码

```
 private class CountDownTask extends AsyncTask<Void, String, Void>{

    // A callback method executed on UI thread on starting the task
    @Override
    protected void onPreExecute() {
        // Getting reference to the TextView tv_counter of the layout activity_main
        dialog = new Dialog(ReadContactsActivity.this);
        dialog.setCancelable(false);
        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
        dialog.setContentView(R.layout.progressdialog);

        progressBar = (ProgressBar) dialog.findViewById(R.id.progressBar1);
        dialog.show();

    }

    // A callback method executed on non UI thread, invoked after 
    // onPreExecute method if exists

    protected Void doInBackground(Void... params) {
         ContentResolver cr = ReadContactsActivity.this.getContentResolver();
         Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,
                null, null, null, null);

         if (cur.getCount() > 0) {
             while (cur.moveToNext()) {
                 String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
                 String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                 if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                     Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,
                                            ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",
                                            new String[]{id}, null);
                     while (pCur.moveToNext()) {
                           String phone = pCur.getString(
                                  pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                           objItem = new listBean();
                        objItem.setName(name);
                        objItem.setNumber(phone);
                        listArray.add(objItem);
                     }
                     pCur.close();
                     }
                 }
             }
        return null;
    }

    // A callback method executed on UI thread, invoked by the publishProgress() 
    // from doInBackground() method
    @Override
    protected void onProgressUpdate(String... values) {

    }

    @Override
    protected void onPostExecute(Void result) {
        dialog.dismiss();
        objAdapter = new listAdapter(ReadContactsActivity.this, items);
        listView.setAdapter(objAdapter);

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:00:56.043

不要在主线程上编写关闭对话框的代码。将其保留在 runOnUIThread 上，如下所示：

> ```
>  @Override
>    protected void onPostExecute(Void result) {
>       runOnUiThread(new Runnable() {
>                 @Override
>                public void run() {
>                       dialog.dismiss();
>             }
>      objAdapter = new listAdapter(ReadContactsActivity.this, items);
>      listView.setAdapter(objAdapter);
>     } 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:49:58.797

> 如何知道android编码的问题在哪里？

如果您的活动代码中有错误，您总是可以**在 logcat 中找到带有行号的活动名称。**

# php - PHP preg_replace“未知修饰符”

> ID：15385773
> 
> 赞同：0
> 
> 时间：2013-03-13T12:46:58.427
> 
> 标签：php, regex, preg-replace

我正在尝试使用正则表达式数组在 PHP 中的字符串中查找和替换，但是出现错误`unknown modifier`。我知道这似乎是一个流行的问题，但是我不明白如何在我的场景中解决它。

这是我原来的正则表达式模式：

```
{youtube((?!}).)*} 
```

我针对它运行以下代码来转义任何字符：

```
$pattern = '/' . preg_quote($pattern) . '/'; 
```

这将返回以下内容：

```
/\{youtube\(\(\?\!\}\)\.\)\*\}/ 
```

但是，当我运行此模式时，`preg_replace`出现以下错误：

```
Warning: preg_replace() [function.preg-replace]: Unknown modifier 'y' ... 
```

知道需要更改什么，以及我在这里展示的代码的哪个阶段？

非常感谢

**编辑 1**

根据要求，这是我正在使用的代码：

```
$content = "{youtube}omg{/youtube}";
$find = array();
$replace = array();

$find[] = '{youtube((?!}).)*}';
$replace[] = '[embed]http://www.youtube.com/watch?v=';
$find[] = '{/youtube((?!}).)*}';
$replace[] = '[/embed]';

foreach ( $find as $key => $value ) {
    $find[$key] = '/' . preg_quote($value) . '/';
}

echo preg_replace($find, $replace, $content); 
```

这是一个[活生生的例子](http://ideone.com/0NkcaL)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:11:40.103

您应该将分隔符作为第二个参数传递，`preg_quote`如下所示：

```
$find[$key] = '/' . preg_quote ($value, '/') . '/'; 
```

否则，分隔符将不会被引用，因此会导致问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:08:40.447

Simply change your Regex delimiter to something that's not used in the pattern, in this example I used `@` which works fine.

`preg_quote` only escapes `. \ + * ? [ ^ ] $ ( ) { } = ! < > | : -`, so when using a non-escaped character in your pattern, but also as your regex delimiter, it's not going to work as expected. Either change the delimiter as above, or pass it into `preg_quote` explicitely as part of the [`preg_quote($str, $delimiter)` overload](http://php.net/preg_quote).

```
$content = "{youtube}omg{/youtube}";
$find = array();
$replace = array();

$find[] = '{youtube((?!}).)*}';
$replace[] = '[embed]http://www.youtube.com/watch?v=';
$find[] = '{/youtube((?!}).)*}';
$replace[] = '[/embed]';

foreach ( $find as $key => $value ) {
    $find[$key] = '@' . preg_quote($value) . '@';
}

echo preg_replace($find, $replace, $content); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:22:50.003

我可能坐在远离电脑的医院候诊室里，但你所做的似乎让问题复杂化了。

如果我要正确理解这一点，你想替换一些这样的：

```
{youtube something="maybe"}http://...{/youtube} 
```

和：

```
[embed]http://...[/embed] 
```

不？

如果是这种情况，解决方案就像以下内容一样简单：

```
preg_replace('#{(/?)youtube[^}]*}#', '[\1embed]', $content); 
```

重要的考虑因素是保留标签的打开/关闭性，并将正则表达式包装在与您的目标字符串不太冲突的东西中，在这种情况下，哈希。

# php - 注册和登录表格

> ID：15385774
> 
> 赞同：0
> 
> 时间：2013-03-13T12:46:59.113
> 
> 标签：php, mysql

我创建了通过电子邮件发送链接的注册表单，您必须单击它才能成功注册，这使您必须登录。问题是我无法登录，而其他一切都在工作美好的。您将在下面找到我的 register.php、activation.php 和 login.php。任何帮助都会很棒。

动作 = register.php

```
if ($_GET['action'] == 'register') {
   if(isset($_POST['formsubmitted'])){
       $error = array();
   if(empty($_POST['username'])){
       $error[] = 'Please enter a username';
   }else{
       $username = $_POST['username'];
    }
  if(empty($_POST['email'])){
      $error[] = 'Please enter a mail';
  }else{
      if (preg_match("/^([a-zA-Z0-9])+([a-zA-Z0-9\._-])*@([a-zA-Z0-9_-])+([a-zA-Z0-9\._-]+)+$/",$_POST['email'])) {
      $email = $_POST['email'];
  }else{
      $error[] = 'Your mail is invalid';
  }
}
if (empty($_POST['password'])){
    $error[] = 'Please enter a password';
}else{
    $password = $_POST['password'];
    $password = md5(uniqid(rand(),true));
}
if (empty($error)){
    $verify_email = "SELECT * FROM members WHERE email = '$email'";
    $result_verify_email = mysql_query($verify_email,$lnk);
 if (!$result_verify_email){
    echo 'Database error';
 }
 if (mysql_fetch_assoc($result_verify_email) == 0){
    $activationCode = md5(uniqid(rand(),true));
    $insert_users = "INSERT INTO members VALUES ('','".$username."','".$email."','".$password."','".$activationCode."',0)";
    $result_insert_users = mysql_query($insert_users,$lnk);
      if(!$result_insert_users){
         echo 'Database error';
      }
      if(mysql_affected_rows($lnk) == 1){
         $message = 'To activate your account, please click on this link:\n\n";';
         $message .= WEBSITE_URL . '/index.php?                page=activation&action=activation&key='.$activationCode;
         mail(
              $email,
              'Registration Confirmation',
               $message,
              'FROM:' . EMAIL
             );
         echo 'A confirmation email has been sent to ' . $Email . ' Please click on the Activation Link';
     }else {
         echo 'You could not be registered';
      }
     }else {
        echo 'That email address has already been registered.</div>';
    } 
```

行动=激活

```
if ($_GET['action'] == 'invitation') {

    if (!empty($_GET['key'])){
        //thelw na eleksw an afto to key uparxei sto tabale members
        $sql = "SELECT * FROM members WHERE activationCode = '".$_GET['key']."'";
        $result=mysql_query($sql,$lnk);
        $user=  mysql_fetch_assoc($result);

        if(!empty($user)){
            //edw tha energopoiisw ton xristi
            $sql = "UPDATE members SET flag=1 WHERE username = '".$user['username']."'";
            mysql_query($sql,$lnk); 
        }else{
            echo "this is WRONG";
        }
    }else{
        echo 'No key';
    }

} 
```

动作 = 登录

```
if ($_GET['action'] == 'login') {
         $error = array();
         if (empty($_POST['username'])) {
            $error[] = 'You forgot to enter your username ';
         } else{
             $username = $_POST['username'];
           }
        if (empty($_POST['password'])) {
            $error[] = 'Please Enter Your Password ';
        } else {
            $password = $_POST['password'];
            $password = md5(uniqid(rand(),true));
        }

            $check_credentials = "SELECT * FROM members WHERE username = '".$username."' AND password = '".$password."' AND flag = '1' ";
            $result_check_credentials = mysql_query($check_credentials,$lnk);
            $user_check_credentials = mysql_fetch_assoc($result_check_credentials);

            if(!empty($user_check_credentials)){
                $_SESSION['Auth'] = $user_check_credentials['username'];
                header('location:index.php?page=home');
            }else{
                $message = '<img src="css/photos/zzzdoop.png"> ';
                $_SESSION['Auth'] = false;
            }

  } elseif ($_GET['action'] == 'logout') {
        $_SESSION['Auth'] = false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:54:13.173

你做错了密码。

使用下面的代码

```
if ($_GET['action'] == 'register') {
   if(isset($_POST['formsubmitted'])){
       $error = array();
   if(empty($_POST['username'])){
       $error[] = 'Please enter a username';
   }else{
       $username = $_POST['username'];
    }
  if(empty($_POST['email'])){
      $error[] = 'Please enter a mail';
  }else{
      if (preg_match("/^([a-zA-Z0-9])+([a-zA-Z0-9\._-])*@([a-zA-Z0-9_-])+([a-zA-Z0-9\._-]+)+$/",$_POST['email'])) {
      $email = $_POST['email'];
  }else{
      $error[] = 'Your mail is invalid';
  }
}
if (empty($_POST['password'])){
    $error[] = 'Please enter a password';
}else{
    $password = md5($_POST['password']);

}
if (empty($error)){
    $verify_email = "SELECT * FROM members WHERE email = '$email'";
    $result_verify_email = mysql_query($verify_email,$lnk);
 if (!$result_verify_email){
    echo 'Database error';
 }
 if (mysql_fetch_assoc($result_verify_email) == 0){
    $activationCode = md5(uniqid(rand(),true));
    $insert_users = "INSERT INTO members VALUES ('','".$username."','".$email."','".$password."','".$activationCode."',0)";
    $result_insert_users = mysql_query($insert_users,$lnk);
      if(!$result_insert_users){
         echo 'Database error';
      }
      if(mysql_affected_rows($lnk) == 1){
         $message = 'To activate your account, please click on this link:\n\n";';
         $message .= WEBSITE_URL . '/index.php?                page=activation&action=activation&key='.$activationCode;
         mail(
              $email,
              'Registration Confirmation',
               $message,
              'FROM:' . EMAIL
             );
         echo 'A confirmation email has been sent to ' . $Email . ' Please click on the Activation Link';
     }else {
         echo 'You could not be registered';
      }
     }else {
        echo 'That email address has already been registered.</div>';
    } 
```

并用于登录

```
if ($_GET['action'] == 'login') {
         $error = array();
         if (empty($_POST['username'])) {
            $error[] = 'You forgot to enter your username ';
         } else{
             $username = $_POST['username'];
           }
        if (empty($_POST['password'])) {
            $error[] = 'Please Enter Your Password ';
        } else {
            $password = md5($_POST['password']);

        }

            $check_credentials = "SELECT * FROM members WHERE username = '".$username."' AND password = '".$password."' AND flag = '1' ";
            $result_check_credentials = mysql_query($check_credentials,$lnk);
            $user_check_credentials = mysql_fetch_assoc($result_check_credentials);

            if(!empty($user_check_credentials)){
                $_SESSION['Auth'] = $user_check_credentials['username'];
                header('location:index.php?page=home');
            }else{
                $message = '<img src="css/photos/zzzdoop.png"> ';
                $_SESSION['Auth'] = false;
            }

  } elseif ($_GET['action'] == 'logout') {
        $_SESSION['Auth'] = false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:54:44.610

我猜错误在这里：

动作 = 登录

```
if (empty($_POST['password'])) {
    $error[] = 'Please Enter Your Password ';
} else {
    $password = $_POST['password'];
    $password = md5(uniqid(rand(),true)); // HERE
} 
```

您刚刚将密码更改为完全随机的密码，然后您正试图在数据库中查找它...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:56:39.763

编程的关键是了解你在做什么，并知道确定问题所在的方法。一切都是为了解决问题。正如您在代码中看到的那样：（操作=登录）

```
else {
    $password = $_POST['password'];
    $password = md5(uniqid(rand(),true));
} 
```

您每次都生成一个随机密码，而不是对提供的密码进行哈希处理。然后，您继续检查它是否与用户存在。你需要让它像你的注册方法：

```
$password = md5($_POST['password']); 
```

您遇到的另一个问题是在查询中检查有效用户。您的`flag`字段是 an`int`但您将其视为字符串。

```
AND flag = '1' "; 
```

需要是

```
AND flag = 1 "; 
```

**注意**：不要使用 MySQL_*，因为它从 PHP 5.5 起已被弃用。使用 MySQLi_* 或 PDO。你对 SQL 注入也很开放，要小心。

# asp.net - 将 asplabel 添加到带有文本的 .net aspx 页面

> ID：15385785
> 
> 赞同：0
> 
> 时间：2013-03-13T12:47:21.833
> 
> 标签：asp.net, label

我想为 .NET ASPX 页面添加一个标签。当我什么都不做`<asp:label />`出现？我想让它说“Hello World”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:50:56.830

您需要将标签设置为 runat server，然后设置其文本。

```
<asp:label runat="server" Text="Hello World" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:50:39.853

我应该：

```
<asp:Label runat="server" Text="Hello World" /> 
```

# django - Django：数据库中的设置

> ID：15385789
> 
> 赞同：0
> 
> 时间：2013-03-13T12:47:40.930
> 
> 标签：django

你如何为你的 Django 项目存储和使用数据库支持的设置？你如何缓存它们？

你遇到什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:03:44.063

[django-livesettings](https://bitbucket.org/bkroeze/django-livesettings)这样做，但我不推荐它。几年前我遇到了问题，我不记得到底是什么。

# android - 将简单的音频过滤器连接到 android 下播放的音乐

> ID：15385797
> 
> 赞同：2
> 
> 时间：2013-03-13T12:48:08.183
> 
> 标签：android, audio, signal-processing, opensl

我正在尝试构建一个应用程序，该应用程序使用数字过滤器来处理从其他（股票音乐播放器和 spotify 等）应用程序播放的音频。

到目前为止，我已经能够在 OpenSL ES 中为来自麦克风的音频输入创建过滤器。然后将过滤后的音频发送到硬件输出。该应用程序基于此教程[http://audioprograming.wordpress.com/2012/03/03/android-audio-streaming-with-opensl-es-and-the-ndk/](http://audioprograming.wordpress.com/2012/03/03/android-audio-streaming-with-opensl-es-and-the-ndk/)

如何从其他应用程序获取类似的输入缓冲区，以便在将其发送到硬件输出之前对其进行处理？

它不需要使用 OpenSL ES 或其他本机代码。澄清; [该应用程序应该以与android.media.audiofx.AudioEffect](http://developer.android.com/reference/android/media/audiofx/AudioEffect.html)类似的方式应用自定义过滤器效果，然后才可以将其附加到全局音频输出混合（音频会话 0）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:19:33.943

应用程序无法修改（甚至读取，如果您不考虑 Visualizer API）来自其他应用程序的音频输出。

只是关于音频会话 0 的说明：它仍然可以使用它（从 JB / JB MR1 开始），但这种可能性可能会在未来的 Android 版本中消失。但是有一个重要的细节需要记住，那就是如果应用程序在会话 0 上添加效果，则在会话 0 上添加的效果将被暂停。

音频 HAL 会跟踪所有启用的音频效果的（估计的）CPU 使用率，如果这样做会导致超出 CPU 周期预算，则会拒绝启用新的效果。这意味着，如果允许应用程序在会话 0 上自由叠加效果而不被暂停，它们可能会因为超出 CPU 周期预算而拒绝它们选择在自己的音频会话上启用哪些效果的能力，从而搞砸像 Spotify 这样的应用程序.

# iphone - TableView 添加单元格

> ID：15385805
> 
> 赞同：1
> 
> 时间：2013-03-13T12:48:45.927
> 
> 标签：iphone, ios, uitableview

我正在做一个项目，其中我有一个 TableView，其中我有不同的行/单元格，并且在每个单元格中都有一个添加按钮。我需要做的是单击添加按钮，新行应添加到我单击按钮的行下方，这意味着我必须在该行上选定按钮的下一个添加一个单元格。用户也可以输入新行上的文本。请告诉我该怎么做。因为我是 iPhone 开发的新手。我将非常感谢....

这是一个单击按钮功能，我想在其中执行添加新单元格的操作。

```
- (IBAction)AddButtonAction:(id)sender
{
    [_choices insertObject:@"avav" atIndex:[_choices count]];
    [self.tableView reloadData];
    NSLog(@"here");

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:05:14.633

使用此委托方法在所选行下方添加新行。并使用自定义单元格在其上有一个文本字段......

```
 rowCount ++;//Here rowcount refers the no. of rows in the table. 
     selectedIndexPath = indexPath;//Assign the selected indexpath for creating custom cell on it. 
    [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationBottom];//Indexpath refers the currently selected/targeted cell. 
```

在 cellforRowAtIndexPath 中像这样使用

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if((selectedIndexPath) && (indexPath.row == selectedIndexPath.row) && (indexPath.section == selectedIndexPath.section))
    {
        static NSString *cellIdentifier=@"cell";
        NewCell *cell = (NewCell *) [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

        if (cell == nil)
        {
            NSString *customeCellName = [NSString stringWithFormat:@"%@",[NewCell class]];

            NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:customeCellName owner:self options:nil];

            for (id currentObject in topLevelObjects)
            {
                if ([currentObject isKindOfClass:[UITableViewCell class]])
                {
                    cell =  (NewCell *) currentObject;
                    break;
                }
            }
        }
        [cell setSelectionStyle:UITableViewCellSelectionStyleNone];

        return cell;
    }
    else
    {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    cell.textLabel.text = [NSString stringWithFormat:@"%d",indexPath.row];

    // Configure the cell...

    return cell;
    }
} 
```

输出将是这样的 ![在此处输入图像描述](../Images/f7f9ae57eb2610d1e072cbc91fdc1965.png)

需要根据您的要求进行定制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:20:26.287

如果通过`addSubview`方法将按钮添加到单元格，只需使用以下代码即可获得 indexPath：

```
- (IBAction)AddButtonAction:(id)sender
{
    UIButton *button = (UIButton *)sender;
    UITableViewCell *cell = (UITableViewCell *)[button superview];
    NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];

    // Adding methods comes here...
} 
```

如果您使用某些`addSubview`级别，您应该使用相同`superview`的方法反向访问 UITableViewCell 级别。如果使用自定义单元格，请将上述代码中的自定义单元格类名替换为 UITableViewCell。

要添加单元格，请查看[WWDC 2011 视频](https://developer.apple.com/videos/wwdc/2011/)，“UITableView Changes, Tips & Tricks”视频。它展示了一些不错且有用的方法来在其他行/节之间插入、删除和重新加载新行/节，例如`insertRowsAtIndexPaths:withRowAnimation:`方法。或查看[Apple 文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/insertRowsAtIndexPaths%3awithRowAnimation%3a)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:07:26.070

我认为您在所有单元格中都有 textfeild 。在 AddButtonAction 函数中保存行的索引。在创建单元格时，使选定的单元格文本成为第一响应者。用户输入数据后，将其保存在数组中并再次重新加载。只需正确跟踪 selectedIndex 即可。如果觉得这会有所帮助。

# delphi - Delphi XE ISAPI WebBroker 文件上传

> ID：15385808
> 
> 赞同：2
> 
> 时间：2013-03-13T12:48:49.197
> 
> 标签：delphi, file-upload, isapi

我需要一些帮助来接受 Delphi XE2 中 ISAPI 上的文件上传。在 Delphi 2007 中，我使用 Shiv 的 TMsMultipartParser，它可以 100% 工作。尝试在 XE2 中使用它确实有效。据我所知，内容长度读取不正确，然后缓冲区的长度设置不正确。

我在 2007 年和 XE2 之间的测试表明，对于同一个文件，XE2 上的长度要大 3 个字节。不幸的是，我不知道如何解决这个问题，也找不到其他关于如何接受上传表单中的文件并保存它们的信息。

代码示例的任何帮助都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:19:56.507

我在我的 Delphi 2007 项目中正好使用了这个多部分解析器，但是当涉及到统一编码时，我需要对其进行调整。我想可能是你的问题。

无论如何，至少我的 Delphi 2010 带有单元 ReqMulti.pas 所以尝试将它包含在项目的某个地方，你应该注册一个多部分解析器。

如果这对你不起作用，我会发布我调整后的解析器。

# git - 在 git-svn 中仅克隆树干后克隆分支的最佳方法是什么？

> ID：15385813
> 
> 赞同：5
> 
> 时间：2013-03-13T12:49:09.607
> 
> 标签：git, git-svn

鉴于有许多分支的大型 Subversion 存储库，我想`git-svn`通过先克隆`trunk`并稍后添加特定分支来开始使用。我至少看到了三种方法来做到这一点，但它们中的任何一种都是“官方的”还是有最好的方法？

假设以下布局：

```
https://svn-repo.com/svn/company
   +--core
   |  +--trunk
   |  +--branches
   |  |  +--fastboot
   |  |  +--playground
   |  +-tags
   +--mobile
      +--trunk
      +--branches
      +--tags 
```

因此，仅克隆项目的主干（无分支）修订版 12345 `core`：

```
$ git svn clone --username=svnuser -r 12345 -Ttrunk https://svn-repo.com/svn/company/core 
```

这会将项目克隆`core`到同名目录中，并且运行`git svn rebase`将拉入所有更改（修订版 12345 之后）。此时`.git/config`应该有这样的东西：

```
[svn-remote "svn"]
  url = https://svn-repo.com/svn/company
  fetch = core/trunk:refs/remotes/trunk 
```

到目前为止，一切都很好。现在，假设我要添加`playground`分支。这是它变得有点朦胧的地方。

* * *

**选项 1**`.git/config` ：通过在其中添加分支来更新现有远程：

```
[svn-remote "svn"]
  url = https://svn-repo.com/svn/company
  fetch = core/trunk:refs/remotes/trunk
  branches = core/branches/{playground}:refs/remotes/branches/* 
```

在这一点上，我能够做到：

1.  拉入分支的修订版 23456`playground`

    `$ git svn fetch -r 23456`

2.  创建一个本地分支并切换到它

    `$ git checkout -b playground branches/playground`

3.  拉入最新更改：

    `$ git svn rebase`

* * *

**选项2**：添加一个新的遥控器`.git/config`（除了现有的）：

```
[svn-remote "playground"]
  url = https://svn-repo.com/svn/company
  fetch = core/branches/playground:refs/remotes/playground 
```

从这里开始，步骤类似于**选项 1**中的步骤：

```
$ git svn fetch playground -r 23456
$ git checkout -b playground remotes/playground
$ git svn rebase 
```

* * *

**选项 3**：我还看到有人在现有遥控器中添加了新的 fetch：

```
[svn-remote "svn"]
  url = https://svn-repo.com/svn/company
  fetch = core/trunk:refs/remotes/trunk
  fetch = core/branches/playground:refs/remotes/branches/playground 
```

我不完全确定这是否正确，或者它是否会起作用。我找不到我在哪里看到的。

* * *

目前，我坚持使用**Option 1**，但我真的很想知道最合适的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T14:40:23.080

您注意到的所有选项都是有效的，并且没有一种“规范”的方式可以做到这一点，部分原因是（从`git svn`'s 的角度来看）没有一种规范的方式来布置 Subversion 存储库。

您选择的选项 1 和 3 基本上是等效的。就个人而言，我会选择选项 3，但结果将与您的选项 1 相同。

选项 2 会起作用，但它会阻止 Git 检测跨分支的提交历史记录——Git 通常会尝试检测合并或创建分支的 Subversion 提交，并在 Git 提交中记录这些提交，但如果它是将两个分支视为完全独立的存储库。

也就是说，通过仅在以后添加新分支，您已经失去了很多历史记录。考虑以下流程：

*   您的 Git 存储库仅包含`git svn`主干的提取。
*   有人从主干创建了操场分支，在该分支中进行了一些提交，然后将操场合并到主干。
*   你`git svn`用来取树干；它看到了合并，但对 Playground 分支一无所知，将其作为常规提交添加到 Git 存储库。

如果你一直在使用 Playground 分支，Git 会检测到该分支并合并，并将它们记录下来。之后添加游乐场分支将无济于事，除非您使用`git svn reset`重新获取所有提交，因为`git svn`不会重写旧提交以记录合并。

正如 Chronial 在评论中建议的那样，我所做的是立即克隆所有分支。这是一个缓慢的过程（我已经用 100,000 个提交的 Subversion 存储库完成了这项工作，其中包含近 300 个分支和标签）可能需要几天才能完成，但你可以让它在后台运行，完成后你会拥有完整的 Subversion 历史记录。

# expect - 期望脚本自行终止

> ID：15385814
> 
> 赞同：0
> 
> 时间：2013-03-13T12:49:13.263
> 
> 标签：expect

我已经编写了下面的期望脚本，但它没有按预期工作。我希望脚本在执行所有命令时自动终止。但是，脚本要么永远不会终止（如果使用了 set timeout -1），要么在我的命令执行之前几秒钟内终止。有人可以帮忙吗？

这是脚本：

```
#!/usr/local/bin/expect

spawn su vserve
set password vserve
set PWD whoami

set cmdstr(0) "bash /apps/vpn/vserve/vserve_profile"
set cmdstr(1) "bash /apps/vpn/asap/scripts/change_loopback.sh"
set timeout -1
expect "*Password:*" {
sleep 1
send "$password\r"
send "$PWD\r"
sleep 1

for {set i 0} {$i<[array size cmdstr]} {incr i} {
send "$cmdstr($i)\r"

}

send \"exit\r\"
expect eof
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:22:50.603

通常在交互式 shell 中，您必须在下一个命令`expect`之前进入特定的 shell 提示符。`send`这就是我们确保前面的命令真正完成的方式。

# c++ - 不知道如何使用 QtTest

> ID：15385817
> 
> 赞同：1
> 
> 时间：2013-03-13T12:49:17.937
> 
> 标签：c++, qt, qttest

我想对我使用 Qt 在 c++ 中完成的一些简单练习进行单元测试。我认为使用 QtTest 似乎是一个合理的起点。

我有一个返回整数的类，我想测试预期结果是否与实际结果相同。

我是否正确地认为我在项目中创建了一个新的 C++ 源文件以用作 QtTest

这是我所拥有的，但是通过阅读 Qt 文档我无法弄清楚我必须做什么？

```
 #include "Conversion.h"
#include <QtTest/QtTest>

class ConversionTest : public QObject
{
private slots:
    void testConvert();

};

void ConversionTest::testConvert()
{
    int unit1 = 1, unit2 = 10;
    std::string sUnit1 = "stone", sUnit2 = "pound";
    double expected = 10.8862;
    double actual;

    Conversion c;
    actual = c.convert(unit1, unit2, sUnit1, sUnit2);
    QCOMPARE(expected, actual);
}

QTEST_MAIN (ConversionTest)
#include "conversiontest.moc" 
```

这是我在阅读文档后产生的，但现在我如何运行它并获得（我认为是）控制台输出，显示通过/失败？

任何帮助都会非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:57:57.267

您需要使用它创建一个应用程序（为您`QTEST_MAIN(..)`构建`main`功能），并`CONFIG += qtestlib`在`.pro`文件中指定。

运行它时，会打开一个控制台，打印出测试结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:10:47.440

我自己解决了这个问题只是Qt错误代码根本没有问题，由于某种原因，它不喜欢我的项目文件在我的项目文件之前位于多个文件夹的文件夹结构中，使用完全相同的代码新目录，它工作？:S

# node.js - 带有 HTTP-AUTH 的 node.js Express

> ID：15385819
> 
> 赞同：1
> 
> 时间：2013-03-13T12:49:22.200
> 
> 标签：node.js, express, http-authentication, digest-authentication, http-auth

[我在使用http-auth](http://http-auth.info)模块创建基于 express 的 node.js 应用程序时遇到问题。

**这是一个可能为这个http-auth**库创建的中间件我有这个代码：

```
 //Configure Middlewares
logger.configure(function() {

  //All output has content type json
  logger.use(function(req, res, next) {
    res.contentType('application/json');
    next();
  });

  //Create digest auth middleware
  logger.use(function(req, res, next){
    digest.apply();
    next();
  });
}); 
```

应用此功能后，当我连接到站点时，出现此错误：

```
TypeError: Cannot read property 'headers' of undefined 
```

有没有解决这个问题或使用其他方法？

我需要对整个应用程序进行摘要身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:58:45.793

我认为 apply() 期待请求对象（因此它无法读取标题）；

试试这个语法：

```
digest.apply(req, res, function(username) {

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-22T11:11:03.823

你应该用[正确的模式](https://github.com/http-auth/http-auth)使用它：

```
// Authentication module.
var auth = require('http-auth');
var digest = auth.digest({
  realm: "Simon Area.",
  file: __dirname + "/../data/users.htdigest"
});

// Configure Middlewares
logger.configure(function() {
  // Create digest auth middleware
  logger.use(auth.connect(digest));

  // All output has content type json.
  logger.use(function(req, res, next) {
    res.contentType('application/json');
    next();
  });    
}); 
```

# .htaccess - htaccess 重定向子域

> ID：15385821
> 
> 赞同：0
> 
> 时间：2013-03-13T12:49:25.390
> 
> 标签：.htaccess

我想通过 htaccess 将 feedback.domain.de 重定向到 www.domain.de/de/abc/cde.html。

我目前的 htaccess：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.domain\.de$
RewriteRule ^(.*)$ http://www.domain.de/$1 [L,R=301] 
```

所以，我想只是补充一下：

```
redirect 301 feedback.domain.de www.domain.de/de/abc/cde.html 
```

但它不起作用。如果我尝试打开 feedback.domain.de 它会重定向到 www.domain.de

我知道这是一个非常简单的问题，但我不知道如何在 htaccess 中解决它:-(

我想要的结果是：

```
domain.de -> www.domain.de/de/index.html
www.domain.de -> www.domain.de/de/index.html

domain.de/de/example.html -> www.domain.de/de/example.html
etc...

feedback.domain.de -> www.domain.de/de/feed.html 
```

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:30:38.850

该`Redirect`指令仅接受相对于根路径的路径（例如*/my-path*），并且不会与 URL 的主机部分匹配。

试试这个（**注意这里我假设你想将 domain.de 重定向到 www.domain.de 而不是*所有*的子域**）：

```
RewriteEngine On

# Redirect feedback.domain.de to http://www.domain.de/de/abc/cde.html
RewriteCond %{HTTP_HOST} ^feedback\.domain\.de$
RewriteRule . http://www.domain.de/de/abc/cde.html [L,R=301] 

# Redirect domain.de to www.domain.de
RewriteCond %{HTTP_HOST} ^domain\.de$
RewriteRule . http://www.domain.de/$0 [L,R=301] 
```

## 更新答案（2013-03-18）：

```
# Redirect feedback.domain.de to http://www.domain.de/de/abc/cde.html
RewriteCond %{HTTP_HOST} ^feedback\.(domain\.(de))$
RewriteRule .+ http://www.%1/%2/feed.html [L,R=301] 

# domain.de -> www.domain.de/de
RewriteCond %{HTTP_HOST} ^(domain\.(de))$
RewriteRule .+ http://www.%1/%2/$0 [L,R=301] 

# www.domain.de/de -> www.domain.de/de/index.html
RewriteCond %{HTTP_HOST} ^www\.domain\.(de)$
RewriteRule ^%1/?$ index.html [L,R=301] 
```

# c++ - 如何创建一个 Multi widgets Qt 应用程序

> ID：15385824
> 
> 赞同：0
> 
> 时间：2013-03-13T12:49:27.110
> 
> 标签：c++, qt, user-interface, qt4

是否可以开发具有多个接口（小部件）的应用程序，其中每个小部件都有自己的 .cpp 和 .h 文件？如果是这样，你能建议一种方法吗？

我知道堆叠小部件的方式，但这种方法不允许我将每个页面的代码与其他页面分开。

我需要使我的应用程序的一般结构类似于在 Eclipse 中开发的 android 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:52:55.980

您可以单独创建小部件，然后`QStackedWidget`使用`addWidget`方法动态构造和添加小部件

PS。您还可以使用小部件升级，`QStackedWidget`由 QtDesigner 创建并填充您的小部件 [http://doc.qt.digia.com/stable/designer-using-custom-widgets.html](http://doc.qt.digia.com/stable/designer-using-custom-widgets.html)

# ios - 在 Objective-C 中锁定实例变量

> ID：15385827
> 
> 赞同：10
> 
> 时间：2013-03-13T12:49:39.857
> 
> 标签：ios, objective-c, concurrency, locking, class-variables

在 iOS 应用程序中，防止实例变量在另一个对象使用它时被对象更改的最佳方法应该是什么？使用`@synchronized(self)`指令就足够了吗？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T12:55:59.733

如果您希望一个对象被阻塞，以便没有两个线程同时使用它，那么 @synchronize 是一种方法。[但这并不能使它成为线程安全的](https://stackoverflow.com/questions/15392726/does-synchronized-guarantees-for-thread-safe-or-not)。

您也可以使用[GCD(Grand Central Dispatch](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/ThreadMigration/ThreadMigration.html#//apple_ref/doc/uid/TP40008091-CH105-SW3) )

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T13:34:51.220

> 在 iOS 应用程序中，防止实例变量在另一个对象使用它时被对象更改的最佳方法应该是什么？

一把好的旧锁，例如`pthread_mutex`；你也可以使用这个的Objective-C 包装器（例如`NSLock`and `NSRecursiveLock`）。`@synchronized`也属于这一类，但它是这里提到的最高级别的机制。

当然，卓越的并发解决方案通常更多地与设计变更、程序流程、支持不变性等有关。仍然存在首选或需要互斥/锁定的情况。

不幸的是，这个领域非常缺乏纯 ObjC/Cocoa —— 仅使用 ObjC 和 Cocoa 技术开发一个高效的并发程序比它应该（或需要）要困难得多。

> @synchronized(self) 指令的使用是否足够？

对于简单的情况，它就足够了。它是一个对象级**递归锁**。

但是，与其他互斥选项相比，它非常慢。

我不认为`@synchronized`它有什么好处，除了：

*   方便开发人员介绍（可能有不好的副作用）和
*   对称性（它确保解锁匹配锁定），与替代方案相比，大大降低了死锁的概率（一个非常好的属性）。

`@synchronized`方便，但因为成本高，所以要慎用*。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T12:55:38.353

如果唯一的目的是能够访问

```
self.myString; //getter 
```

和，

```
self.myString=aString; //setter 
```

最好的方法是将其声明为原子，例如：

```
@property (atomic, strong) NSString* myString; 
```

这将确保在多线程环境中，线程 1 设置和获取 myString 不受线程 2 对其进行操作。

# java - eclipse插件类加载错误

> ID：15385828
> 
> 赞同：1
> 
> 时间：2013-03-13T12:49:45.330
> 
> 标签：java, eclipse-plugin, osgi

在一个 Eclipse 插件项目中，我有一个 jar 文件，我想从中加载类和调用方法。这些 jars 添加到清单文件的捆绑类路径中。如何加载这些类运行时，如果我尝试使用 urlclassloader 我得到 java.lang.NoClassDefFoundError 但我确定类在那里。我阅读了基于 Eclipse osgi 并使用它自己的类加载器，因此我可能会收到此错误。但为什么 ？有人对我的问题有很好的解释和实用的解决方案吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:36:32.820

这是由 OSGi 的不同类加载机制引起的问题。首先，检查您是否在清单中添加了正确的导入声明。如果导入是正确的（并且具有正确的版本），它们可能不可见，因为您使用的 JAR 没有导出所需的类。OSGi 只能看到导出的类。使用 Eclipse，这意味着您使用 Equinox 作为 OSGi 实现，您可能会使用 Eclipse-Buddy-Classloading。使用 JAR 创建一个新项目并导出所有内容。现在将它注册为你的主包的伙伴 - 主包现在可以看到提供包的每个类。

请记住，在 OSGi 中使用类加载器是“邪恶的”。类不能再通过其完全限定的类名来标识。

查看 OSGi 核心规范以获取有关 OSGi 类加载 (osgi.org) 和[http://rajakannappan.blogspot.de/2010/03/eclipse-classloading-and-buddy-policy.html的更多信息](http://rajakannappan.blogspot.de/2010/03/eclipse-classloading-and-buddy-policy.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-13T06:38:08.380

我遇到了类似的问题，这是我的解决方案。可能有点晚了，但我希望它能帮助其他有同样问题的人。

我注意到来自 eclipse (osgi) 的类加载器不会加载完整的 jar。它只加载通过直接加载的类`classloader.load(classname)`。[所以我只是用这个问题](https://stackoverflow.com/questions/15720822/how-to-get-names-of-classes-inside-a-jar-file)的代码读取了 jar 中包含的所有类名，并通过调用显式遍历所有类名`classloader.load(classname)`。这是我管理它的方式的示例：

```
private void loadClasses(final File jar) {
    final URL url = new URL("jar", "", "file:" + jar.getAbsolutePath() + "!/");
    final List<String> classNames = getAllClassNames(jar); //Code from above link in this method
    final URLClassLoader classloader = new URLClassloader(url, this.getClass().getClassLoader());
    for (String className : classNames) {
        classLoader.load(className);
    }
} 
```

如果你想实例化一个类，你可以这样做

```
final Class<?> clazz = classLoader.load(className);
final T type = (T)clazz.newInstance(); 
```

希望这可以帮助。

# c - 检查#warning 预处理器的可用性

> ID：15385829
> 
> 赞同：3
> 
> 时间：2013-03-13T12:49:46.250
> 
> 标签：c, warnings, c-preprocessor, compile-time, preprocessor-directive

我将`#warning`在我的可移植**C**代码中使用来生成编译时警告。但`#warning`并非所有平台都支持。有什么方法可以找到`#warning`该平台是否支持。

```
#ifdef warning     //expecting similar check, not exactly this
#warning ("my message")
#endif 
```

因为我将在这么多平台上编译我的代码，所以在某些平台上如果不支持它可能会出现编译错误。如果某些宏可用于查找其可用性，`#warning`那么我将能够避免在不受支持的平台上构建失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:55:20.567

您可以使用这样的东西来检查支持：

```
#if defined(_MSC_VER) || defined(__GNUC__) || defined(__clang__)
# define HAVE_WARNING
#endif

#ifdef HAVE_WARNING
# pragma message("some warning")
#endif 
```

需要时将更多特定于编译器的检查添加到第一个`#if`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:55:30.273

```
#pragma message("Warning...")
#pragma message "Oh NO!" 
```

GCC 和 MSVC 都支持。有人请评论 Clang？我没有当前版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:56:56.143

`#warning`主要是 gcc 扩展，尽管其他一些可能支持。微软将需要类似的东西`#pragma message`。如果您指的是标准 C 版本，而不仅仅是 gcc 可用的地方，则不能称其为“便携式”。

# android - Android：如何从其他活动更改项目列表中的可绘制对象

> ID：15385833
> 
> 赞同：1
> 
> 时间：2013-03-13T12:49:59.743
> 
> 标签：android, listview, android-activity, drawable

我从 Android 开始，我可以创建一个`ListView`并且效果很好。此列表包含表示任务状态（活动或非活动）的图像，当单击列表项会打开一个新活动，您可以在其中修改任务，更改其数据或状态。我想确保，当用户返回任务列表时，正在工作的任务的项目将被更新（更改代表其状态的图像）。

如何在适用于所选任务的活动中做到这一点？

这是我为所选项目打开新活动的代码`ListView`：

```
listTareas.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        String tarea_id = ((TextView) view.findViewById(R.id.tarea_id)).getText().toString();

        // Starting new intent
        Intent in = new Intent(getApplicationContext(), SingleItemActivity.class);
        in.putExtra(TAG_TAREA_ID, tarea_id);
        startActivity(in);
    }
}); 
```

我可以发送我想更改的drawable id，但是我该如何处理呢`SingleItemActivity`？那可能吗？

感谢你们。

问候。-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:54:00.363

您不能更改与 ID 关联的可绘制对象。

您应该调用`startActivityForResult`而不是，`startActivity`然后当您从`SingleItemActivity`该方法返回时`onActivityResult`将被调用。使用它来更新`ListView`从中填充的数据集。

`notifyDataSetChanged()`更新数据后，您应该调用`ListView`'s 适配器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:53:22.537

我认为您应该使用 startActivityForResult() 而不是 startActivity() 并且您需要覆盖方法

```
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
        super.onActivityResult(requestCode, resultCode, intent); 
```

# reporting-services - 报告服务 2012 (SSRS) 中的自动调整行高

> ID：15385839
> 
> 赞同：0
> 
> 时间：2013-03-13T12:50:14.127
> 
> 标签：reporting-services, reportviewer

我正在报告服务 2012 中创建报告，我希望我的报告行能够自动调整，因为我的数据是动态创建的，并且它的高度因行而异。现在我试图将行属性 CanGrow 和 CanShrink 设置为 true，所以正如这里提到的那样：http: [//msdn.microsoft.com/en-us/library/aa194086](http://msdn.microsoft.com/en-us/library/aa194086%28office.10%29.aspx) (office.10).aspx 我的报告行变得适合它们绑定的数据，但它根本不起作用（所有行长得比内容高得多）。任何解决方案都将受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T15:18:35.857

如果所有其他方法都失败了，您可以尝试使用看起来过大的列下特定文本框的可见性。更改文本框的可见性以切换列标题标签。

或者确保您的报告页边距正确并使用自动换行。

希望这可以帮助！

# javascript - 如何在 Webrtc 视频调用中实现 socket.io 以及我必须在 server.js 中更改什么？

> ID：15385840
> 
> 赞同：-3
> 
> 时间：2013-03-13T12:50:21.693
> 
> 标签：javascript, socket.io, webrtc

如何在 Webrtc 视频通话中实现 socket.io？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:32:28.700

有点超载但它有效：[SocialVidRTC](https://github.com/tomasbasham/SocialVidRTC)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-24T05:48:10.660

我从您的问题中了解到，您已经在 server.js 中有一个 WebRTC 项目和一些信号机制，可能是 websockets 。

要将其替换为 socket.io 或任何其他信号如 SIP/XHR/AJAX 等，您需要将 server.js 替换为新的基于 socket.io 的请求和响应代码。

按着这些次序 ：

1.  为 socket.io 创建一个 https 服务器（因为 webrtc 页面仅从安全来源捕获网络摄像头输入）。将 server 分配给变量说**app**。

    ```
    var fs = require('fs');
    var https = require('https');

    var options = {
      key: fs.readFileSync('ssl_certs/server.key'),
      cert: fs.readFileSync('ssl_certs/server.crt'),
      ca: fs.readFileSync('ssl_certs/ca.crt'),
      requestCert: true,
      rejectUnauthorized: false
    };

    var app = https.createServer(options, function(request, response){
            request.addListener('end', function () {
            file.serve(request, response);
        }).resume();     
    });

    app.listen(8081); 
    ```

这里 server.key 、 server.crt 和 ca.crt 是假的 ssl 证书，而 8081 是我选择的 https 端口。您也可以重用相同的 https 服务器来托管网页。

2.  使用前面定义的**应用程序**在 socket.io 的同一端口上侦听

    ```
    var io = require('socket.io').listen(app, {
        log: false,
        origins: '*:*'
    });

    io.set('transports', [
        'websocket'
    ]); 
    ```

我只选择 websocket，但您也可以设置其他类型的传输，例如

```
socket.set('transports', [
    'websocket'
  , 'flashsocket'
  , 'htmlfile'
  , 'xhr-polling'
  , 'jsonp-polling'
]); 
```

3.  现在实现信令特定功能和调用，例如，

    ```
    io.sockets.on('connection', function (socket) {
        ...
            socket.on('webrtc-joinchannel',function(data){
                var resp=joinChannel(data);
           socket.emit('resp-webrtc-joinchannel', resp);
            });
    ...
    }); 
    ```

**注意：我使用的是 socket.io v0.9。**

如果你想要一个示例实现，你可以查看任何示例项目，例如[这里](https://github.com/altanai/webrtc)

# xpath - 弹出窗口中图像的 XPath

> ID：15385842
> 
> 赞同：0
> 
> 时间：2013-03-13T12:50:25.440
> 
> 标签：xpath, scrapy, xpath-2.0

我正在使用 Scrapy 抓取网页。我通过使用 xpath Chrome 扩展来获得 XPath 选择器，它工作正常。我在产品页面上得到了我想要的一切，比如描述、价格等。

如果我点击一个项目的小图，会弹出该项目的大图，我想爬取这个大图。但是我用于这个大图像的 Xpath 并没有获取任何东西。此外，当我查看源代码时，它显示它使用 javascript 函数来加载这些弹出图像。有没有办法获取这些图像？

```
start_urls = ['http://www.flipkart.com/nokia-lumia-620/p/itmdgkwywkmaa2w4?pid=MOBDGH6AKH9ERJAF']

description = hxs.select('/html/body/div[@class=" fkart fksk-body line  "]/div[@id="fk-mainbody-id"]/div[@class="fk-content fksk-content enable-compare line"]/div[@class="fk-mproduct fk-mproduct-mobile "]/div[@class="mprod-section unit"]/div[@id="topsection"]/div[@class="mprod-summary lastUnit"]/div[@class="mprod-summary-title fksk-mprod-summary-title"]/h1/text()').extract()
price = hxs.select('/html/body/div/div/div/div/div/div/div/div/div/div/div/div/span/text()').extract()

image_urls = hxs.select('/html/body/div[@class="fk-ui-dialog fk-popup"]/div[@class="window alpha30 window-absolute"]/div[@class="content"]/div[@class="dialog-body"]/div[@id="pp-large-images-popup"]/div[@class="main-container"]/div[@class="pp-carousel-bd"]/div[@class="visible-image-large fk-text-center"]/img[@id="visible-image-large"]').extract() 
```

结果 ：

```
{'description': [u'Nokia Lumia 620'],
 'image_urls': [],
 'price': u'14999'} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:16:08.417

要获取小缩略图的图像 url 列表，您可以使用此 XPath：

```
//div[@class="thumbs thumbs-small"]/img/@src 
```

您可以从缩略图图像的 url 派生大图像的 url。只需替换`40x40`为`275x275`，您将获得大图像的网址。

# java - 应用程序图标放大显示

> ID：15385847
> 
> 赞同：1
> 
> 时间：2013-03-13T12:50:39.150
> 
> 标签：java, android, notifications, icons

由于我更新了我的应用程序图标，有时图标在手机标题栏中显示为通知时会放大显示。

放大的意思是图标的中心采用通知图标的全尺寸，其余部分被裁剪。当我打开通知列表时，图标显示正确。

有人知道这个错误吗？它不会一直发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:00:56.527

我怀疑这是因为您`ic_launcher`在显示通知时使用了应用程序的默认 ( ) 图标。*如果我错了，请纠正我。*

要修复它，您可以使用以下选项之一：

1.  访问此链接：[Android Asset Studio](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)并选择通知图标。然后提供要在应用通知中显示为图标的图像。Asset Studio 将为您提供一组用于 API 9、API 11 和旧 Android 版本的 HDPI、MDPI 和 XHDPI drawbles 的图标。
2.  如果您在 Eclipse 中安装了最新的 ADT 工具，请选择 File 菜单 -> 展开 New 并选择 Other（或`CTRL + N`）。从弹出窗口中展开 Android 类别并选择**Android Icon Set**。选择通知图标并提供名称。单击**下一步**按钮并在最后一步提供您的图像。

我个人更喜欢 Android Asset Studio。我一直在使用它，因为它仍处于测试阶段，而 ADT 尚未添加此功能。但每一个他自己。

再次，如果我错了，请纠正我。在反对票弹幕开始之前。;-)

# html - css位置下拉菜单问题

> ID：15385849
> 
> 赞同：0
> 
> 时间：2013-03-13T12:50:42.757
> 
> 标签：html, css, position

我有一个出现在横幅后面的菜单。我需要在横幅上展示它。

通过删除：

```
.ei-slider-large li{
  position: absolute;
} 
```

它解决了问题，但是横幅不起作用。

以下是我的实施细节：

**菜单：**

```
<div id='cssmenu'>
    <ul>
        <li class='active'><a href='index.php'><span>Home</span></a></li>
        <li class='has-sub'><a href='#'><span>About Us</span></a>
            <ul>
                <li><a href="our_story.php"><span>Our Story</span></a></li>
                <li><a href="our_team.php"><span>Our Leadership Team</span></a></li>
                <li><a href="testimonials.php"><span>Testimonials</span></a></li>
            </ul>
        </li>
        <li class='has-sub '><a href='#'><span>Our Services</span></a>
            <ul>
                <li><a href='geopolitical.php'><span>Geo-Political Risk Management</span></a></li>
                <li><a href='security.php'><span>Security & Business Continuity</span></a></li>
                <li><a href='business.php'><span>Business Resiliency</span></a></li>
                <li><a href='integrity.php'><span>Integrity & Assurance</span></a></li>
            </ul>
        </li>
        <li class='has-sub '><a href='#'><span>Insights</span></a>
            <ul>
                <li><a href='alerts_ads.php'><span>Alerts & Advisories</span></a></li>
                <li><a href='research.php'><span>Research</span></a></li>
                <li><a href='news_events.php'><span>News & Events</span></a></li>
            </ul>
        </li>
        <li><a href='csr.php'><span>CSR</span></a></li>
        <li class='has-sub '><a href='#'><span>Contact Us</span></a>
            <ul>
                <li><a href='our_office.php'><span>Our Offices</span></a></li>
            </ul>
        </li>
    </ul>
</div> 
```

**菜单CSS：**

```
 #cssmenu:after,
    #cssmenu ul:after {
      display: block;
      clear: both;
    }

    #cssmenu a {
      color: #333;
      display: inline-block;
      font-size: 15px;
      font-weight:bold;
      padding: 0 20px;
      margin-left:10px;
      margin-right:10px;
      text-decoration: none;
    border:1px solid #FFF;

     }
    #cssmenu a:hover {
      position: relative;
      top: 0;
    }
    #cssmenu ul {
      list-style: none;
    }
    #cssmenu > ul {

      width: 100%;
    }
    #cssmenu > ul > li {
      float: left;
      padding: 0 10px;
      position: relative;
    }
    #cssmenu > ul > li.active a {
      background: #FFF;
      border-radius: 4px 4px 0 0;
      -moz-border-radius: 4px 4px 0 0;
      -webkit-border-radius: 4px 4px 0 0;
      position: relative;
      color:#569C17;
      border:1px solid #CCC;
    }
    #cssmenu > ul > li.active a:hover {
      background: #FFF;
      border-radius: 4px 4px 0 0;
      -moz-border-radius: 4px 4px 0 0;
      -webkit-border-radius: 4px 4px 0 0;
      position: relative;
      color:#569C17;

    }
    #cssmenu > ul > li.has-sub-active > a {
    background: #FFF;
      border-radius: 4px 4px 0 0;
      -moz-border-radius: 4px 4px 0 0;
      -webkit-border-radius: 4px 4px 0 0;
      position: relative;
       display: block;
      color:#569C17;
      border:1px solid #CCC;
    }

    #cssmenu .has-sub-active:hover ul {
      display: block;
    }
    #cssmenu .has-sub-active a {
      display: block;
      position: relative;
    }
    #cssmenu .has-sub-active a:after {

    }
    #cssmenu .has-sub-active ul {
      background: #FFF;
      display: none;
      padding: 10px 0;
      position: absolute;
      left: 50%;
      top: 41px;
      margin-left: -70px;
      width: 200px;
      z-index: 1;
      border-bottom:1px solid #CCC;
      border-left:1px solid #CCC;
      border-right:1px solid #CCC;
    }
    #cssmenu .has-sub-active ul li:hover > a {
      background: #dddddd;
      color: #569C17;
      font-size:12px;
    }
    #cssmenu .has-sub-active ul a {
      line-height: 100%;
      padding: 8px 0;
      font-size:12px;
      color:#333;
    }

    #cssmenu > ul > li:hover > a {
      background: #FFF;
      border-radius: 4px 4px 0 0;
      -moz-border-radius: 4px 4px 0 0;
      -webkit-border-radius: 4px 4px 0 0;
      position: relative;
      color:#569C17;
      border-top:1px solid #CCC;
      border-left:1px solid #CCC;
      border-right:1px solid #CCC;

    }
    #cssmenu > ul > li a {
      line-height: 39px;
    }
    #cssmenu > ul > li a:hover {
    }
    #cssmenu .has-sub:hover ul {
      display: block;
    }
    #cssmenu .has-sub a {
      display: block;
      position: relative;
    }
    #cssmenu .has-sub a:after {

    }
    #cssmenu .has-sub ul {
      background: #FFF;
      display: none;
      padding: 10px 0;
      position: absolute;
      left: 50%;
      top: 41px;
      margin-left: -70px;
      width: 200px;
      z-index: 1;
      border-bottom:1px solid #CCC;
      border-left:1px solid #CCC;
      border-right:1px solid #CCC;
    }
    #cssmenu .has-sub ul li:hover > a {
      background: #dddddd;
      color: #569C17;
      font-size:12px;
    }
    #cssmenu .has-sub ul a {
      line-height: 100%;
      padding: 8px 0;
      font-size:12px;
      color:#333;
    } 
```

**横幅：**

```
<div id="ei-slider" class="ei-slider">
    <ul class="ei-slider-large">
        <li> <img src="images/large/1.jpg" alt="image01" />
            <div class="ei-title">
                <h3>Geo-Political Risk Management</h3>
            </div>
        </li>
        <li> <a href="news_events.php"><img src="images/large/2.jpg" alt="image02" /></a>
            <div class="ei-title">
                <h3>Security & Business Continuity</h3>
            </div>
        </li>
        <li> <img src="images/large/3.jpg" alt="image03"/>
            <div class="ei-title">
                <h3>Business Resiliency</h3>
            </div>
        </li>
        <li> <img src="images/large/4.jpg" alt="image04"/>
            <div class="ei-title">
                <h3>Integrity & Assurance</h3>
            </div>
        </li>
    </ul><!-- ei-slider-large -->
    <ul class="ei-slider-thumbs">
        <li class="ei-slider-element">Current</li>
        <li><a href="#">Slide 1</a><img src="images/thumbs/1.jpg" alt="thumb01" /></li>
        <li><a href="#">Slide 2</a><img src="images/thumbs/2.jpg" alt="thumb02" /></li>
        <li><a href="#">Slide 3</a><img src="images/thumbs/3.jpg" alt="thumb03" /></li>
        <li><a href="#">Slide 4</a><img src="images/thumbs/4.jpg" alt="thumb04" /></li>
    </ul>
    <!-- ei-slider-thumbs --> 
</div><!-- ei-slider --> 
```

**横幅CSS：**

```
 .ei-slider{
        position: relative;
        width: 100%;
        max-width: 1920px;
        height: 400px;
        margin: 0 auto;
    }
    .ei-slider-loading{
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0px;
        left: 0px;
        z-index:999;
        color: #fff;
        text-align: center;
        line-height: 400px;
    }
    .ei-slider-large{
        height: 100%;
        width: 100%;
        position:relative;
        overflow: hidden;
    }
    .ei-slider-large li{
        position: absolute;
        top: 0px;
        left: 0px;
        overflow: hidden;
        height: 100%;
        width: 100%;
    }
    .ei-slider-large li img{
        width: 100%;
    }
    .ei-title{
        position: absolute;
        right: 50%;
        margin-right: 13%;
        top: 30%;
    }
    .ei-title h2, .ei-title h3{
        text-align: right;
    }
    .ei-title h2{
        font-size: 40px;
        line-height: 50px;
        font-family: 'Playfair Display', serif;
        font-style: italic;
        color: #b5b5b5;
    }
    .ei-title h3{
        font-size: 30px;
        line-height: 70px;
        font-family: 'Open Sans Condensed', sans-serif;
        text-transform: uppercase;
        color: #000;
    }
    .ei-slider-thumbs{
        height: 13px;
        margin: 0 auto;
        position: relative;
    }
    .ei-slider-thumbs li{
        position: relative;
        float: left;
        height: 100%;
    }
    .ei-slider-thumbs li.ei-slider-element{
        top: 0px;
        left: 0px;
        position: absolute;
        height: 100%;
        z-index: 10;
        text-indent: -9000px;
        background: #000;
        background: rgba(0,0,0,0.9);
    }
    .ei-slider-thumbs li a{
        display: block;
        text-indent: -9000px;
        background: #666 ;
        width: 100%;
        height: 100%;
        cursor: pointer;
        -webkit-box-shadow: 
            0px 1px 1px 0px rgba(0,0,0,0.3), 
            0px 1px 0px 1px rgba(255,255,255,0.5);
        -moz-box-shadow: 
            0px 1px 1px 0px rgba(0,0,0,0.3), 
            0px 1px 0px 1px rgba(255,255,255,0.5);
        box-shadow: 
            0px 1px 1px 0px rgba(0,0,0,0.3), 
            0px 1px 0px 1px rgba(255,255,255,0.5);
        -webkit-transition: background 0.2s ease;
        -moz-transition: background 0.2s ease;
        -o-transition: background 0.2s ease;
        -ms-transition: background 0.2s ease;
        transition: background 0.2s ease;
    }
    .ei-slider-thumbs li a:hover{
        background-color: #f0f0f0;
    }
    .ei-slider-thumbs li img{
        position: absolute;
        bottom: 50px;
        opacity: 0;
        z-index: 999;
        max-width: 100%;
        -webkit-transition: all 0.4s ease;
        -moz-transition: all 0.4s ease;
        -o-transition: all 0.4s ease;
        -ms-transition: all 0.4s ease;
        transition: all 0.4s ease;
        -webkit-box-reflect: 
            below 0px -webkit-gradient(
                linear, 
                left top, 
                left bottom, 
                from(transparent), 
                color-stop(50%, transparent), 
                to(rgba(255,255,255,0.3))
                );
        -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    }
    .ei-slider-thumbs li:hover img{
        opacity: 1;
        bottom: 13px;
        -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:28:31.960

The problem is in your z-index.

As you can see, you've given your `#cssmenu .has-sub ul { z-index:1; }`

And your `.ei-slider-thumbs li img { z-index:999; }`

Try setting the z-index of your menu to 9999 or lowering/removing the z-index of your slider.

# web-applications - Web浏览器中的水平滚动限制？

> ID：15385851
> 
> 赞同：2
> 
> 时间：2013-03-13T12:50:45.077
> 
> 标签：web-applications, browser

这有点像[This Question](https://stackoverflow.com/questions/12883658/browser-limit-in-horizontal-scroll "这个问题")。
我有一个宽度很大的网页。网页的宽度有限制吗？

# c# - Backgroundworker C#中“WorkerSupportCancellation”的意义是什么

> ID：15385852
> 
> 赞同：1
> 
> 时间：2013-03-13T12:50:49.663
> 
> 标签：c#, .net, multithreading, asynchronous, background

我猜默认行为是，当我使用后台工作者实现它时，用户可以取消长时间运行的进程。WorkerSupportCancellation 有什么意义？

1.  如果我不将此 WorkerSupportCancellation 用作 true，用户将无法取消？或者换句话说，是否必须定义 this ？

2.  如果问题一的答案是“非强制性”，那么为什么这是 MS 提出的功能？我认为没有什么好的理由阻止用户取消该过程，这完全取决于他的选择。此功能适合什么场景？

有人可以对此有所了解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T12:54:45.087

是的，它必须设置`true`为允许异步取消。调用`CancelAsync()`已`WorkerSupportsCancellation`设置为的 BackgroundWorker`false`将导致`InvalidOperationException`.

请参阅：[BackgroundWorker.CancelAsync()](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.cancelasync.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T12:56:15.687

我相信`InvalidOperationException`如果你在没有设置它的情况下尝试取消它，它会抛出一个错误，所以它是强制性的。

我能看到以这种方式设计它的唯一原因是让写工作人员的人指出是否可以取消。从逻辑上讲，并非所有`BackgroundWorkers`都可以取消，因此使用工人的人可以更轻松地查看是否可以取消。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T13:01:42.223

`WorkerSupportCancellation`必须设置为 true 才能支持异步取消。否则调用`CancelAsync()`会抛出`InvalidOperationException`. 因此，针对您的问题：

1.  是的，这必须是真实的，用户才能取消。仅当必须具有取消能力时才具有强制性。

2.  根据您的应用程序的要求，您可能希望在后台执行一项任务，例如数据库查询、与文件系统交互等……这些任务必须完成并且可能不是由用户发起的。因此，在某些情况下，可能不需要异步取消，因为大多数用户发起的操作取消是一个很好的支持特性。

[这是有关WorkerSupportsCancellation](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.workersupportscancellation.aspx)和[BackgroundWorkers](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)的一些附加信息。

# java - 表监听器 java

> ID：15385858
> 
> 赞同：0
> 
> 时间：2013-03-13T12:51:04.083
> 
> 标签：java, swing, jtable

我的表有 3 个操作 1）添加 2）删除 3）更新状态。

其中 1 和 2 是 Jbuttonsl

当我单击 1) 添加新行时

当我单击 2) 删除添加的行。

1和2）按我的设置工作，但是为了更新最后一列中的状态，我以这种方式编码

```
public void statusUpd() throws SQLException
{
        table.getModel().addTableModelListener(new TableModelListener()
        {
            @Override
            public void tableChanged(TableModelEvent tme) 
            {
                int row = table.getSelectedRow();
                if(!(row<0))
                {
                    String name=(String)(table.getModel().getValueAt(row, 0));
                    String status = (String)(table.getModel().getValueAt(row, 3));
                    String update = "UPDATE "+deptName+ " SET Status = ? WHERE Name = ?";
                    try 
                    {
                        conn = ac.getConnection();
                        stmt = conn.prepareStatement(update);

                        stmt.setString(1, status);
                        stmt.setString(2, name);
                        stmt.executeUpdate();
                    } 
                    catch (SQLException | ClassNotFoundException ex)
                    {
                        ex.printStackTrace();                            
                    }
                    finally
                    {
                        try
                        {               
                            if(stmt != null){stmt.close();}
                            if(conn != null) {conn.close();}
                        }
                        catch(SQLException e){}
                     }
                }
            }
        });

} 
```

但是这个方法会在点击添加或删除按钮时进行监听，有什么办法可以避免这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:02:56.893

`TableModelEvent`有一个[getType](http://docs.oracle.com/javase/6/docs/api/javax/swing/event/TableModelEvent.html#getType%28%29)方法，您可以使用它找到操作的类型。因此，您可以在方法开头的代码中包含`tableChanged`：

```
if(tme.getType() != TableModelEvent.INSERT
        && tme.getType() != TableModelEvent.DELETE)
{
    //do stuff
} 
```

或等效地

```
if(tme.getType() != TableModelEvent.UPDATE)
{
    //do stuff
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-13T12:59:02.537

也许不是最好的方法，但您可以添加一个类变量来指示您刚刚单击了一个按钮。

```
boolean buttonClicked = false; 
```

单击添加或删除时，将其设置为 true，然后将其放在更新代码的开头：

```
if(buttonClicked){
  buttonClicked = false;
  return;
} 
```

# java - Java中的复系数多项式求根

> ID：15385867
> 
> 赞同：15
> 
> 时间：2013-03-13T12:51:15.017
> 
> 标签：java, matrix, polynomial-math, complex-numbers

我正在尝试找到一种方法来计算Java 中具有复系数的多项式的根（即相当于在MATLAB 中使用roots() 可以轻松完成的操作）。

我已经准备好重新编码一个根查找算法，该算法构建伴随矩阵，然后使用广义特征值分解来查找根，但为此我需要一个处理复值矩阵运算的库。

我浏览了一段时间，似乎没有任何令人信服的东西，我认为这很奇怪。那我想问你：

1.  你知道一个（稳定的）Java 库，它对复杂系数定义的多项式执行求根吗？

2.  你知道在复杂值矩阵上执行 evd、svd、inverse 等的（稳定的）Java 库吗？

*注意：*我已经看过 JAMA（不处理复杂）、Michael Thomas Flanagan 的 Java 科学库（不再可用）、colt（似乎不处理复杂）、高效 Java 矩阵库（也不复杂）、DDogleg Numerics （不处理具有复系数的多项式）、JScience（不清楚 evd 是否可用）和来自 Apache 的 common-math（不清楚它们是否允许复杂矩阵，如果是，是否 evd 可用）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:08:08.550

[Durand-Kerner 方法](http://en.wikipedia.org/wiki/Durand%E2%80%93Kerner_method)也适用于复系数并且不依赖于矩阵计算。

实现起来很简单，你可以用谷歌搜索一个实现（Stackoverflow 禁止我链接我找到的那个）或者自己做一个。您可以将[jscience](http://jscience.org/)库用于复杂数据类型，而不是算法本身。

编辑：没看到你也需要 evd，别介意我提到 jscience 作为做复杂矩阵数学的一个选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-13T20:39:46.870

如果想保持真实，请使用`Bairstow method`. 如果多项式有奇数次，首先使用`Newton's method`找到一个实根并将多项式减少到偶数次。这避免了 Bairstow 方法的奇点，它收敛到一个以无穷大为根的二次多项式。在通常的地方可以找到高质量的信息。其中一些是您真正编写或编辑的。

确定内根半径 r 并使用 z^2-2r*cos(phi)*z+r^2 和随机角度 phi 作为 Bairstow 方法的初始因子。它在每一步中产生一个二次因子，总是在实系数中并带有实系数，包含一对实根或复根的共轭对。

检查每个步骤的收敛速度，并在必要时从不同的初始点重新开始。紧缩后求新根，以原多项式和因式为起点，执行该方法，对根或二次因式进行润色。

# llvm - LLVM 等效于命令行上的 gcc -D 宏定义

> ID：15385881
> 
> 赞同：20
> 
> 时间：2013-03-13T12:51:55.857
> 
> 标签：llvm, clang, llvm-gcc

我正在寻找与 gcc 的 -D 标志等效的 LLVM（或 clang），它可以在命令行中启用宏定义。

任何指针都会很棒。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-13T12:58:08.353

来自`clang --cc1 --help`：

```
...
-D <macro>=<value>      Define <macro> to <value> (or 1 if <value> omitted)
... 
```

根据经验，假设 Clang 模拟 GCC，除非另有证明！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-13T13:44:22.593

默认`clang`调用是类似 gcc 的编译器驱动程序，支持与 gcc 相同的选项，包括`-D`：

```
: ~$ cat test/z.c
int foo() {
  return FOOBAR;
}
: ~$ clang -DFOOBAR -E -c test/z.c
# 1 "test/z.c"
# 1 "<built-in>" 1
# 1 "<built-in>" 3
# 154 "<built-in>" 3
# 1 "<command line>" 1
# 1 "<built-in>" 2
# 1 "test/z.c" 2
int foo() {
  return 1;
} 
```

所以如果你想替换 gcc，只需调用`clang`. `clang -cc1`调用 clang 的前端组件，而不是通用编译器驱动程序。

# linux - 使用 Expect 模块更改 ldap 密码

> ID：15385887
> 
> 赞同：0
> 
> 时间：2013-03-13T12:52:27.647
> 
> 标签：linux, perl

我没有perl的超级技能。但是，我做了这两个脚本来更改用户的 LDAP 密码。

第一个脚本：

```
#!/usr/bin/perl -w  
use strict;
use Expect; 

my $user= getpwuid( $< );
print "Enter your old password :" ;
my $oldpassword = <STDIN>;
chomp($oldpassword);

print "Enter you new password :";
my $newpassword = <STDIN>;
chomp($newpassword);

print "Running ' passwd ${user}'\n"; 
my $exp = Expect->spawn("passwd") or die "Can t acces to passwd \n"; 
unless ($exp->expect(1, "Enter login\(LDAP\) password:")) {} ;
print $exp "${oldpassword}\r" ;
unless ($exp->expect(1, "New password:")) {} ;
print $exp "${newpassword}\r" ;
unless ($exp->expect(1, "Re-enter new password:")) {} ;
print $exp "${newpassword}\r" ;
$exp->soft_close(); 
```

第二个脚本：

```
#!/usr/bin/perl -w  
use strict;
use Expect; 

my $user= getpwuid( $< );
print "Enter your old password :" ;
my $oldpassword = <STDIN>;
chomp($oldpassword);

print "Enter your new password :";
my $newpassword = <STDIN>;
chomp($newpassword);

print "Running ' passwd ${user}'\n"; 
my $spawn_ok;
my $exp = Expect->spawn("passwd") or die "Can t acces to passwd \n"; 
$exp->expect(1, 
    [qr 'Enter login\(LDAP\) password:' , 
        sub { 
            $spawn_ok = 1;
            my $fh = shift; 
            $fh->send("${oldpassword}\n"); 
            print "sent '${oldpassword}'\n"; 
            exp_continue; 
        }
    ],
    [eof =>
        sub {
            if ($spawn_ok) {
                die "ERROR: premature EOF in login.\n";
            } else {
                die "ERROR: could not spawn old password.\n";
            }
                }
        ],
    ['New password: ' , 
        sub {
            my $fh =shift ;
            $fh->send("${newpassword}\n");
            print "sent '${newpassword}'\n";
            exp_continue;
        }
    ],
    ['Re-enter new password:' , 
        sub {
            my $fh =shift ;
            $fh->send("${newpassword}\n");
            print "sent '${newpassword}'\n";
            exp_continue;
        }
    ]

); 
```

我不知道他们之间有什么更好的。但他们工作。

实际上，如果旧密码错误，我的脚本也可以正常工作。我想在脚本继续之前控制旧密码，或者如果旧密码错误，脚本可能会重新启动。我想了一个循环，我试着放的是展台脚本没有成功。我可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:58:58.440

你知道 Net::Ldap 模块吗？

[http://search.cpan.org/~gbarr/perl-ldap/lib/Net/LDAP/FAQ.pod#Ho_do_I_reset_a_user%27s_password_](http://search.cpan.org/~gbarr/perl-ldap/lib/Net/LDAP/FAQ.pod#Ho_do_I_reset_a_user%27s_password_) ...

没有错误检查！

```
 use Net::LDAP;

  my $ldap = Net::LDAP->new('ldaps://server.domain')  or  die "$@";
  my $mesg = $ldap->bind('cn=Joe User,dc=perl,dc=ldap,dc=org',
                         password => 'oldPW');

  my $rootdse = $ldap->root_dse();

  if ($rootdse->supported_extension('1.3.6.1.4.1.4203.1.11.1') {

      require Net::LDAP::Extension::SetPassword;

      $mesg = $ldap->set_password(user => 'cn=Joe User,dc=perl,dc=ldap,dc=org',
                                  oldpasswd => 'oldPW',
                                  newpasswd => 'newPW');
  }
  else {
      $mesg = $ldap->modify('cn=Joe User,dc=perl,dc=ldap,dc=org',
                            changes => [
                                delete => [ userPassword => $oldPW ]
                                add    => [ userPassword => $newPW ] ]);
  }

  $ldap->unbind(); 
```

# sql - OUTPUT 子句与 scope_Identity()

> ID：15385890
> 
> 赞同：3
> 
> 时间：2013-03-13T12:52:36.047
> 
> 标签：sql, tsql

OUTPUT 子句与 scope_Identity() 有什么区别？优点缺点？

举个例子，

```
create table myTable 
(   
Id int identity(1,1) primary key clustered,   
myData varchar(50) not null   
);

create table #myTempTable (i int not null);

insert myTable (myData)

output inserted.Id into  #myTempTable

values ('MyData');

select * from #myTempTable 
```

# svg - 如何在 Raphael 中正确地使集合可拖动

> ID：15385891
> 
> 赞同：1
> 
> 时间：2013-03-13T12:52:40.353
> 
> 标签：svg, raphael, drag

人们经常想在 Raphael 中使一组对象可拖动，但`.transform()`这样做可能会让人抓狂。假设你是这样开始的：

```
var paper = Raphael(0, 0, 500, 500);
var set = paper.set();
set.push(paper.circle(100,100,35), paper.circle(150,150,15));    
set.attr("fill", "orange");
set.data("myset", set);

set.drag(
    function(dx, dy, x, y, e) {
        this.data('myset').transform("T" + dx + "," + dy);
    },
    function(x, y, e) {},
    function(e) {}
); 
```

如果你[试试这个](http://jsfiddle.net/cLtHA/)，你会看到它工作一次。但是，如果您拖动、停止，然后再次拖动，它会将位置重置为相对于原始位置的 0,0，正如您对`.transform().`No good 所期望的那样。

[此处](https://stackoverflow.com/questions/14735731/raphael-moving-sets)已触及此问题的一个变体，受访者建议在转换前添加“...”。这一切都很好，但有两件事：

*   您仍然必须跟踪以前的位置，因为您不想在每次调用 时按 (dx,dy) 进行翻译`dragmove`，这会使对象飞出屏幕。
*   如果一个对象被多次拖动，我担心会创建一个怪物变换。（虽然也许我不应该。）

我的暂定解决方案是在另一个键/值对中跟踪与原始位置的偏移量，如下所示：

```
var paper = Raphael(0, 0, 500, 500);

var set = paper.set();
set.push(
    paper.circle(100,100,35),
    paper.circle(150,150,15)
);    
set.attr("fill", "orange");
set.data("myset", set);
set.data("position", [0,0]);
var current_position = [0,0];

set.drag(
    function(dx, dy, x, y, e) {
        this.data('myset').transform("T" + (this.data("position")[0] + dx) + "," + (this.data("position")[1] + dy));
        current_position = [dx,dy];
    },
    function(x, y, e) {

    },
    function(e) {
        this.data('myset').data("position", [
            this.data("position")[0] += current_position[0],
            this.data("position")[1] += current_position[1]
        ]);
    }
); 
```

[您可以在这里](http://jsfiddle.net/Z9jPy/)看到它的实际效果。

它有效，但感觉非常草率。我一定遗漏了一些明显的东西，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T09:58:27.453

我的回答与您的上一个变体类似：

```
var onmove = function (dx,dy){
    this.transform(this.default_transform+'T'+dx+','+dy); 
},
  onstart = function (){
    this.default_transform = this.transform();
},
  onend = function(){
    this.default_transform = this.transform();
};

set.drag(onmove, onstart, onend); 
```

不用担心它不会创建一长串的转换，因为 Raphael 将所有内容转换为一个完整的矩阵转换，因此不会在每次移动对象时建立。

# jquery - 专门为选择元素分配 Jquery-UI 的 css？

> ID：15385893
> 
> 赞同：0
> 
> 时间：2013-03-13T12:52:47.060
> 
> 标签：jquery, css, jquery-ui

我有一个

```
<div class="advancedSearchContainer findorders"> 
```

在其中我专门使用了一些 jquery-ui 功能 - datepicker 等。现在它在 rails 应用程序中显示默认 jquery-ui 主题的颜色。我无法更改默认的 jquery-ui css 文件，因为站点的其他部分正在使用它。

但是我想以不同的方式指定这个特性的 css，所以我尝试了这个。

```
.advancedSearchContainer .ui-state-active,
.advancedSearchContainer .ui-widget-content .ui-state-active,
.advancedSearchContainer .ui-widget-header .ui-state-active {
    border: 1px solid #acdd4a;
    background: #6eac2c url(images/ui-bg_gloss-wave_50_6eac2c_500x100.png) 50% 50% repeat-x;
    font-weight: normal;
    color: #ffffff;
} 
```

但这并没有改变颜色。我出错的任何特殊原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:56:29.650

添加一个正文类并使用 body.yourClass .advancedSearchContainer .ui-state-active, body.yourClass .advancedSearchContainer .ui-widget-content .ui-state-active, body.yourClass .advancedSearchContainer .ui-widget-header .ui -状态活动{}

这将推翻其他 CSS 语句

# c# - 对 SQL 和 C# 中的日期发疯

> ID：15385895
> 
> 赞同：-2
> 
> 时间：2013-03-13T12:53:01.703
> 
> 标签：c#, sql, visual-studio-2010, sql-server-2008

我正在开发一个 C# 应用程序，并且我`date`在 SQL Server 中有一个专栏。

我正在执行基于日期的查询，使用`DateTimePicker`. 我已将日期时间选择器的格式更改为短格式，现在它将日期显示为`mm-dd-yyyy`

现在在执行时，我从日期 1-12 得到正确的输出，但是一旦我选择 13 日期，我就会得到错误

> *从字符串转换日期/时间时转换失败*

我不知道发生了什么！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T12:57:26.937

我怀疑您正在使用其中的格式化字符串`DateTimePicker`通过格式字符串或连接动态构建 SQL 查询。

不要那样做。

SQL 中的日期/时间字符串文字倾向于使用一种健全的格式（即 ISO 8601），其中各部分的顺序不同。实际上，当您将一块从 12 更改为 13 时它会爆炸的事实应该放弃它。

有`SqlCommand`参数（您可以在查询中插入`@foo`. 使用这些参数将确保所有内容都以正确的方式传递并正确引用：

```
using (SqlCommand c = connection.CreateCommand()) {
    c.CommandText = "Select roll_number,name from Attendance_table where date=@date";
    c.Parameters.AddWithValue("date", dateTimePicker1.Value);
    using (var r = c.ExecuteReader()) {
        ...
    }
} 
```

（大致 - 你应该查阅文档以了解正确的用法，我写这些东西已经有一段时间了）

# javascript - 骨干模型、JSON 和 HTML 表单

> ID：15385898
> 
> 赞同：2
> 
> 时间：2013-03-13T12:53:04.703
> 
> 标签：javascript, json, backbone.js

如果您的值是简单的属性，那么主干模型`.get()`和`.set()`例程就可以了。我继承了一个应用程序，但是其中的值也是 JSON 对象。

即`model.get("key")`返回

```
{start:
    {top:5, bottom:6}, 
    end:{...}
 } 
```

等等。使用这些值中的任何一个设置`.set()`都是 PITA，因为您必须取出旧值，进行所需的更改，然后再次将其重新输入。即如果我想要`bottom`= 7，你不能只做`.set("start.bottom",7)`. 我需要做类似的事情：

```
var tempValue = model.get("start");
tempValue.bottom = 7;
model.set("start",tempValue) 
```

模型有一个 attributes 属性，您*可以*在其中执行`model.attributes.start.bottom = 7`. 现在这大概不会触发任何事件处理程序，因为查看 Backbone 代码，这是在`set`.

所以两个问题：

*   如果我不需要更改处理程序来触发，直接设置属性有什么问题吗？
*   无论如何在设置属性后手动触发更改处理程序？

Backbone 更改日志说- *“模型#change 方法已被删除，因为延迟的属性更改不再可用”* -但我不完全确定为什么会这样。听起来很有用。

与此相关：我也在尝试将 HTML 表单解析到模型中。我一直在尝试使用 ModelBinder，但它无法处理嵌套的 JSON。例如`<input type="text" name="start.top">`

编辑：我刚刚意识到你可以`model.set({})`用一个对象来做。例如`model.set({start :{top:7}});`，但它有点笨重

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:32:55.633

> 1.  如果我不需要更改处理程序来触发，直接设置属性有什么问题吗？

我认为这可能会回答您的问题： [Backbone.js get and set nested object attribute](https://stackoverflow.com/questions/6351271/backbone-js-get-and-set-nested-object-attribute)

> 2.  无论如何在设置属性后手动触发更改处理程序？

该`set`方法（没有静默选项）触发 2 个事件：“change”和“change:attributeName”。

如果需要，可以通过调用手动触发它们：

```
model.trigger("change change:attributeName") 
```

# asp.net - 使用正则表达式在解决方案中查找字符串

> ID：15385899
> 
> 赞同：0
> 
> 时间：2013-03-13T12:53:05.853
> 
> 标签：asp.net, regex, visual-studio-2010

您好正在使用 Visual Studio 搜索选项，并希望使用正则表达式自定义搜索

例如，我想列出所有写有“ValidState”字样的 .aspx 和 .cs 页面，并且不想在搜索中包含一些页面，例如“userconfig.aspx、newRegistration.aspx 和 addEmp.cs”。

谁能告诉我搜索的正则表达式是什么？ ![视觉工作室 IDE](../Images/f5cd2ffa7a48428392007e98df3e06cc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:54:29.597

您不能在搜索框中从搜索中排除文件。相反，您可以使用类似于 cygwin 的命令行搜索您的解决方案

```
egrep '\*\*' *.aspx *.cs **/*.aspx **/*.cs | egrep -v "userconfig.aspx|newRegistration.aspx|addEmp.cs" 
```

# javascript - jQuery 中的 myWait(ms)？

> ID：15385902
> 
> 赞同：0
> 
> 时间：2013-03-13T12:53:13.160
> 
> 标签：javascript, jquery

我想扩展对象以便在我的 jquery 命令之间`$.fn`有*延迟：*

像这个工作（而且很长）的代码：

```
$('.d').delay(1000).queue(

function ()
{
        $(this).css('background-color', 'green');
        $(this).dequeue();
}).delay(1000).queue(function ()
{
        $(this).css('background-color', 'red');
        $(this).dequeue();
}); 
```

一个工作示例在这里：[**JSBIN**](http://jsbin.com/urecab/1/edit)

所以我尝试了这个：

[**我在 jsbin 的代码**](http://jsbin.com/emibod/2/edit)

```
$.fn.myWait = function (ms)
{
    return this.queue(

    function ()
    {
        var _self = this;
        setTimeout(function ()
        { 
            $(_self).dequeue();
        }, ms);
    })
}; 
```

调用：

```
$('.d').myWait(1000).css('background-color', 'red').myWait(1000).css('background-color', 'green'); 
```

但它不起作用。

我究竟做错了什么 ？

ps *我确实读过[**这个类似**](http://docs.jquery.com/Cookbook/wait)的解决方案，但是如果我删除动画部分并只使用 css，它也不起作用。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:27:18.933

我怀疑你可以这样做。您需要推迟执行这些属性更改，这意味着您应将所述代码存储在单独的函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:28:09.107

`.css()`本身不会在动画队列中排队，这就是为什么您需要将它放在第一个片段中的回调中。在第二个片段中，它被立即调用（即使队列中有超时等待 - 就像你调用的一样`.delay()`）。相反，您需要使用`.animate()`持续时间为零的呼叫。

为了允许您想要的语法，您需要更进一步。看看[jQuery 计时插件](http://creativecouple.github.com/jquery-timing/)以及[它们的魔力是如何工作的](http://creativecouple.github.com/jquery-timing/documentation/)。

# jquery - jQuery验证带有HTML值的选择框

> ID：15385903
> 
> 赞同：0
> 
> 时间：2013-03-13T12:53:15.250
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery Validation Plugin 进行表单验证，但我无法使用文本字段而不是值字段来验证选择框。

这是我的情况：

[HTML]

```
<form id="form">
      <select name="customPrice[0][50]" id="customPrice050">
                <option value="2435">Select date... </option>
                <option value="474">Friday, Mar 1st</option>
                <option value="475">Friday, Mar 8th</option>
                <option value="476">Friday, Mar 15th</option>
      </select>
      <br/>
      <input type="submit" value="Click" /> 
```

[jQuery]

```
$(document).ready(function()
{       
 // add the rule here
 $.validator.addMethod("valueNotEquals", function(value, element, arg){
  return arg != value;
 }, "Value must not equal arg.");

 // configure your validation
 $("form").validate({
  rules: {
   "customPrice[0][50]": { valueNotEquals: "2435" }
  },
  messages: {
   "customPrice[0][50]": {
    valueNotEquals: "Please select a date!"
   }
  }  
 });

 } 
```

);

这很好用。问题是值 2435 不是静态的，它总是在变化。唯一的静态属性是文本“选择日期...”。现在我想：

```
"customPrice[0][50]": { textNotEquals: "Select date... " } 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:12:46.167

回调函数的中间参数是被验证的元素。您应该能够使用它从所选选项中获取文本并检查它是否不是“选择日期...”。

尝试这个：

```
$.validator.addMethod("selectTextNotEquals", function(value, select, arg) {
    return arg != $(select).find('option:selected').text();
}, "Text must not equal arg."); 
```

**[演示](http://jsfiddle.net/john_s/u6zww/)**

# c# - 带有跳过和采取的 LINQ

> ID：15385905
> 
> 赞同：24
> 
> 时间：2013-03-13T12:53:17.863
> 
> 标签：c#, linq, skip, take

我使用下面的代码从中获取一些项目`IEnumerable`，但它始终将源返回为 null 并计数为 0，实际上存在项目`IEnumerable`

```
private void GetItemsPrice(IEnumerable<Item> items, int customerNumber)
{
    var a = items.Skip(2).Take(5);
} 
```

当我尝试访问`a`它时，它有计数`0`。这里有什么问题吗？

![在此处输入图像描述](../Images/89b03d55c8bfc958d6c2cbfd3e34c0e2.png)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-13T13:12:35.880

请记住，`a`代码中的变量本身就是一个**查询**。它不是**查询执行的结果**。当您使用即时窗口观看查询时（实际上这与延迟执行的查询有关，否则您将得到结果而不是查询），它将始终显示

```
{System.Linq.Enumerable.TakeIterator<int>}
    count: 0
    source: null 
```

您可以使用这段代码来验证这一点，它显然有足够的项目：

```
int[] items = { 1, 2, 3, 4, 5, 6, 7 };
var a = items.Skip(2).Take(3); 
```

因此，您应该执行查询以查看**查询执行的结果**。在立即窗口中写入：

```
a.ToList() 
```

您将看到查询执行的结果：

```
Count = 3
    [0]: 3
    [1]: 4
    [2]: 5 
```

# php - PHP 转义字符

> ID：15385907
> 
> 赞同：0
> 
> 时间：2013-03-13T12:53:23.940
> 
> 标签：php, stringescapeutils

我正在使用 PHP 环境，但在以转义字符的形式显示数据时遇到问题。

例子：

`"`如果我的字符串数据是，我怎么能显示双引号`\"`

`\`同样，如果我的字符串数据是，我怎么能显示反斜杠`\\`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:57:54.233

要删除`\`用作转义字符的字符，请使用该`stripslashes`函数。

```
david@raston ~ $ cat tmp/test.php
<?php

$raw = 'double slash \\\\ escaped quote \"';
print $raw;
print "\n";
print stripslashes($raw);
?>

david@raston ~ $ php tmp/test.php
double slash \\ escaped quote \"
double slash \ escaped quote " 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:08:49.603

其他人都已经涵盖了它，所有这些都[记录在此处](http://php.net/manual/en/language.types.string.php)，但为了完整起见，我还建议查看`heredoc`当您的数据在多个上下文中更改时可能有用的符号（例如 PHP -> HTML/JS - > JS-正则表达式）

```
<?php
echo <<<__EOF
It's not great for PHP indentation but often helps readability \ " ' `
__EOF; 
```

# javascript - 更好的 SVG 旋转文本渲染

> ID：15385911
> 
> 赞同：3
> 
> 时间：2013-03-13T12:53:36.510
> 
> 标签：javascript, text, svg, rotation

我想知道是否有办法更好地渲染 svg 旋转文本？

```
<?xml version="1.0" encoding="UTF-8"?>
<svg version="1.1" width="900" height="400"  xmlns="http://www.w3.org/2000/svg">
     <text x="50" y="50" id="text_0" transform="rotate(17, 50, 50)">
         SVG text test 
    </text>
</svg> 
```

您可以在此处测试此代码的呈现：http: [//jsfiddle.net/vbzTd/2/](http://jsfiddle.net/vbzTd/2/) 似乎字符没有遵循基线，我不明白为什么。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:08:01.700

我有类似的问题。当文本旋转时，所有字母都在抽搐。它发生在所有浏览器中。幸运的是，我没有太多要旋转的文本，我只是转换`text`为`path`. 之后它完美地工作。但是，如果您必须旋转大量文本 - svg 的大小会急剧增加。

# android - 绘图在片段之间切换时移除

> ID：15385913
> 
> 赞同：1
> 
> 时间：2013-03-13T12:53:40.300
> 
> 标签：android

我在选项卡主机中添加了 2 个片段。在第二个片段中，我可以做一些绘图。当我在这两个片段之间切换时，我在第二个片段中的绘图被删除了。我不知道为什么？

这是第二个片段。

```
public class DrawingFragment extends BaseFragment  implements android.view.View.OnClickListener {
    private Context     context = null;
    private Bitmap backGroundBitmap =  null;
    private DrawingViewHolder viewHolder = null;

    /**
     * 
     */
    @Override
    public void onAttach(Activity arg0) {
        super.onAttach(arg0);
        this.context=arg0;
    }
    public DrawingFragment() {

    }
     public DrawingFragment(Bitmap bitmap) {
         this.backGroundBitmap  = bitmap;
     }
    @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View view = inflater.inflate(R.layout.drawing_dialog, container,false);
            viewHolder = new DrawingViewHolder();
            viewHolder.initUiContents(view);
            return view;
        }
    /**
     * 
     * @author Qandil
     *
     */
    private class DrawingViewHolder{
        private Button btnDoneDrawing       = null;
        private Button btnEraserDrawing     = null;
        private Button btnPencilDrawing     = null;
        private Button btnDeleteDrawing     = null;
        private LinearLayout llDrawingMain  = null;
        private DrawView    drawingView     = null;

        private void initUiContents(View view){
            btnDoneDrawing = (Button) view.findViewById(R.id.btn_drawing_done);
            btnEraserDrawing = (Button) view.findViewById(R.id.btn_drawing_eraser);
            btnPencilDrawing = (Button) view.findViewById(R.id.btn_drawing_pencil);
            btnDeleteDrawing = (Button) view.findViewById(R.id.btn_drawing_delete);
            llDrawingMain = (LinearLayout) view.findViewById(R.id.ll_drawing_dialog_main);
            drawingView = (DrawView)view.findViewById(R.id.custom_dv2);
            btnDoneDrawing.setOnClickListener(DrawingFragment.this);
            btnEraserDrawing.setOnClickListener(DrawingFragment.this);
            btnPencilDrawing.setOnClickListener(DrawingFragment.this);
            btnDeleteDrawing.setOnClickListener(DrawingFragment.this);
            Drawable dr = new BitmapDrawable(backGroundBitmap);
            llDrawingMain.setBackgroundDrawable(dr);
        }

    }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.btn_drawing_done:
            ((CaseActivity) getActivity()).popFragments();
            break;
        case R.id.btn_drawing_delete:
            ((CaseActivity) getActivity()).popFragments();
            break;

            default:
                break;
        }
    }
    /* (non-Javadoc)
     * @see android.support.v4.app.Fragment#onDestroyView()
     */
    @Override
    public void onDestroyView() {
        super.onDestroyView();
    }

    /* (non-Javadoc)
     * @see android.support.v4.app.Fragment#onDetach()
     */
    @Override
    public void onDetach() {
        super.onDetach();
    }
} 
```

绘图对话框.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ll_drawing_dialog_main"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/ll_drawing_dialog"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/img_draw_photo_bg"
        android:orientation="vertical" >

        <RelativeLayout
            android:id="@+id/top_bar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/img_top_bar" >

            <TextView
                android:id="@+id/tv_draw_picture"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerInParent="true"
                android:text="@string/tv_draw_picture"
                android:textColor="#ffffff"
                android:textSize="18sp"
                android:textStyle="bold" />
        </RelativeLayout>

        <LinearLayout
            android:id="@+id/ll_header_drawing_dialog"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/img_top_bar"
            android:gravity="center" >

            <Button
                android:id="@+id/btn_drawing_done"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/img_drawing_done" />

            <Button
                android:id="@+id/btn_drawing_eraser"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="50dp"
                android:background="@drawable/img_drawing_eraser" />

            <Button
                android:id="@+id/btn_drawing_pencil"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="50dp"
                android:background="@drawable/img_drawing_pencil" />

            <Button
                android:id="@+id/btn_drawing_delete"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="50dp"
                android:background="@drawable/img_drawing_dlt" />
        </LinearLayout>

        <RelativeLayout
            android:id="@+id/rlt_drawing_component"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >
 <view
                                android:id="@+id/custom_dv2"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                class="com.avhl.view.activity.DrawView"
                                android:background="#00000000" />
        </RelativeLayout>
    </LinearLayout>

</LinearLayout> 
```

绘图视图.java

```
public class DrawView extends View{
    private Bitmap cache;
    private Queue<PointF> points;
    private PointF from;
    private Context context;
    private Paint paint ;

    public DrawView(Context context,AttributeSet attr) {
        super(context,attr);
          this.context=context;

          points = new ConcurrentLinkedQueue<PointF>();
          paint = new Paint();
          paint.setAntiAlias(true);
          paint.setStrokeWidth(8);
          paint.setColor(Color.GRAY);
          paint.setDither(true);                    // set the dither to true
          paint.setStyle(Paint.Style.FILL_AND_STROKE);       // set to STOKE
          paint.setStrokeJoin(Paint.Join.ROUND);    // set the join to round you want
          paint.setStrokeCap(Paint.Cap.ROUND);      // set the paint cap to round too
          setFocusable(true);
          setFocusableInTouchMode(true);
    }
    /***
     * on touch event
     */
    @Override
    public boolean onTouchEvent(MotionEvent evt) {
        setPressed(true);
         int pointerIndex = ((evt.getAction() & MotionEvent.ACTION_POINTER_ID_MASK)
                 >> MotionEvent.ACTION_POINTER_ID_SHIFT);
               int pointerId = evt.getPointerId(pointerIndex);
        if(pointerId==0){
        switch (evt.getAction()) {
        case MotionEvent.ACTION_DOWN: 
            from = new PointF(evt.getX(), evt.getY()); 
            break;
        case MotionEvent.ACTION_MOVE: 
            points.add(new PointF(evt.getX(), evt.getY()));
            invalidate();
            break;
        case MotionEvent.ACTION_UP: 
            break;
        default: 
            from = null;
        }
        }else{
            return false;
        }
        return true;
    }
/**
 * 
 * @param systemCanvas
 */
    @Override
    public void onDraw(Canvas systemCanvas) {
        int w = getWidth();
        int h = getHeight();
        if (w == 0 || h == 0)
            return;
        if (cache == null)
            cache = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
        // Draw on the cache
        Canvas canvas = new Canvas(cache);
            drawPoints(points, canvas, paint);
        // Draw the cache with the system canvas
        systemCanvas.drawBitmap(cache, 0, 0, paint);
    }

    /*
     * for drawing line or dot
     */
    private void drawPoints(Queue<PointF> points, Canvas canvas, Paint paint) {
        if (from == null)
            return;
        PointF to;
        while ((to = points.poll()) != null) {
            canvas.drawLine(from.x, from.y, to.x, to.y, paint);
            from = to;
        }

   }
} 
```

在 MianActivity 中，我只需在标签更改时调用 ft.replace() 将 DrawingFragment 选项卡替换为我的第一个片段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:58:31.893

您可以尝试调用您[`Fragment.setRetainInstance(true)`](http://developer.android.com/reference/android/app/Fragment.html#setRetainInstance%28boolean%29)的`onCreate`Fragment。这确保了相同的片段实例将被重用，而不是创建一个新的。

没有一些代码来显示你在做什么，很难更有帮助

# javascript - Angular.js，取消 ng-click 事件

> ID：15385914
> 
> 赞同：4
> 
> 时间：2013-03-13T12:53:48.357
> 
> 标签：javascript, events, angularjs

我有这段 html

```
<button ui:confirm ng:click="action"></button> 
```

和一点 JavaScript

```
.directive('uiConfirm', function()
{
    return {
        restrict: 'A',
        link: function(scope, element, attrs)
        {
            element.bind('click.confirm', function(event)
            {
                event.preventDefault();
                event.stopPropagation();
            });
        }
    }
}) 
```

现在，我要做的是从指令中取消 ng:click 事件。但是 ng:click 仍然会被触发，无论我做什么。

演示：[小提琴](http://jsfiddle.net/arunpjohny/dbbzy/2/)

编辑：顺便说一句，在这个范围内导致错误：

```
element.bind('click.confirm', function(event)
{
    causeAnError();
    event.preventDefault();
    event.stopPropagation();
}); 
```

成功了，取消了事件传播，但也抛出了丑陋的错误=）

编辑2：终于我找到了解决方案！

```
.directive('uiConfirm', function()
{
    return {
        restrict: 'A',
        link: function(scope, element, attrs)
        {
            element.bind('click', function(event)
            {
                scope.$eval(attrs.uiConfirm); // this line of code does the magic!
            });
        }
    }
}) 
```

编辑3：

**最终解决方案**

```
.directive('uiConfirm', function()
{
    return {
        restrict: 'A',
        link: function(scope, element, attrs)
        {
            /**
             * Clicking the trigger start the confirmation process.
             */
            element.bind('click.confirm', function(event)
            {
                // not confirmed?
                if( ! element.data().confirmed)
                {
                    element.data().confirmed = true;
                    element.addClass('btn-danger');
                }
                // is already confirmed..
                else
                {
                    element.trigger('mouseout.confirm');
                    scope.$eval(attrs.uiConfirm);
                }
            });

            /**
             * Leaving the element, resets the whole process.
             */
            element.bind('mouseout.confirm', function()
            {
                // reset all values
                element.data().confirmed = false;
                element.removeClass('btn-danger');
            });

            // reset the whole process on the first run
            element.trigger('mouseout.confirm');
        }
    }
}) 
```

第一次点击一个按钮，它会变成红色，并且不会触发任何动作。第二次单击，调用动作。离开按钮会重置整个过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T21:17:56.120

正如@Flek 回答的评论中所讨论的，要调用属性中定义的函数，

```
ui:confirm="action()" 
```

使用[scope.$eval()](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24eval)：

```
element.bind('click', function(event) {
    scope.$eval(attrs.uiConfirm);  // calls action() on the scope
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:21:57.860

您有两个嵌套指令：

1.  uiConfirm
2.  ng点击

然后将两个事件处理程序绑定到它（一个由 uiConfirm 和另一个由 ngClick）。使用**preventDefault**您想停止默认操作，但我猜按钮的默认操作不是调用 action() 方法。 **stopPropagation**只是防止事件在 DOM 树中*冒泡*，但由于您只关心按钮本身，因此它不会改变任何内容。

我要做的是在指令中创建一个自定义操作方法，然后检查它是否应该做某事。

```
.directive('uiConfirm', function()
{
    return {
        restrict: 'A',
        link: function(scope, element, attrs)
        {
            scope.action = function(){
                // Check whether there is something to do or not.
            };
        }
    }
}) 
```

# ruby-on-rails - ActiveRecord association returns "NoMethodError for ActiveRecord::Relation"

> ID：15385916
> 
> 赞同：1
> 
> 时间：2013-03-13T12:53:52.237
> 
> 标签：ruby-on-rails

I have 3 models with "1 to n" associations, like this

`Client` --1 to n--> `Category` --1 to n--> `Item`

In one page, I need to display a list of Items along with their Categories. This page is subject to 3 level of filtering:

*   *Client* filtering: I know the client id (I'll use 'id=2' in this example)
*   *Category* name: dynamic filter set by the user
*   *Item* name: dynamic filter set by the user

And I'm getting more and more confused with ActiveRecord Associations stuff

In my `ItemsController#index`, I tried this:

```
categories = Client.find(2).categories
    .where('name LIKE ?', "%#{params[:filter_categories]}%")

@items = categories.items
    .where('name LIKE ?', "%#{params[:filter_items]}%") 
```

The second line raises a `NoMethodError undefined method 'items' for ActiveRecord::Relation`. I understand that the first line returns a Relation object, but I cannot find a way to continue from here and get the list of Items linked to this list of Categories.

I also started to extract the list of categories ids returned by the first line, in order to use them in the where clause of the second line, but while writing the code I found it inelegant and thought there may be a better way to do it. Any help would be very appreciated. Thanks

**models/client.rb**

```
class Client < ActiveRecord::Base
  has_many :categories
  has_many :items, through: :categories
  ...
end 
```

**models/category.rb**

```
class Category < ActiveRecord::Base
  belongs_to :client
  has_many :items
  ...
end 
```

**model/item.rb**

```
class Item < ActiveRecord::Base
  belongs_to :category
  has_one :client, through: :category
  ...
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:00:21.093

You can only call `.items` on a category object, not on a collection. This *would* work:

```
@items = categories.first.items
    .where('name LIKE ?', "%#{params[:filter_items]}%") 
```

To get what you want, you can do the following:

```
@items = Item
    .where('category_id IN (?) AND name LIKE ?', categories, "%#{params[:filter_items]}%") 
```

Assuming that in the end you are only interested in what is in `@items`, it would be even better to do it in one query instead of two, using [`joins`](http://guides.rubyonrails.org/active_record_querying.html#joining-tables):

```
@items = Item.joins(:category)
    .where('items.name LIKE ? AND categories.name = ? AND categories.client_id = 2', "%#{params[:filter_items]}%", "%#{params[:filter_categories]}%") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:02:36.413

You can try smth like this:

```
item_ids = Client.find(2).categories.inject([]) { |ids, cat| ids |= cat.item_ids; ids }
items = Item.find(item_ids) 
```

This how you can get a list of nested objects that associated through another table.

# memory - db2 无法启动，SQL1220N 无法分配数据库管理器共享内存集

> ID：15385919
> 
> 赞同：1
> 
> 时间：2013-03-13T12:54:00.143
> 
> 标签：memory, db2, shared

在我尝试更改实例和组之前，我可以通过在命令行上写入：“db2start”来启动 db2。但是在我对这些组和实例问题进行更改后，我无法启动 db2 数据库，并且收到类似“SQL1220N 无法分配数据库管理器共享内存集”的错误。这很奇怪，因为它曾经可以工作，但现在我无法使其工作。我尝试了很多方法，例如 db2ftok，实例自动......仍然无法正常工作。我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T20:44:47.430

你在什么操作系统上运行它？这通常发生在您的系统没有足够的 DB2 内存来存储 db2 实例 ID 时。有两种方法可以处理这个

1.  检查操作系统内存并确保分配了足够的内存。
2.  减少 DB2 的内存。如果自动不起作用 - 将其设置为硬值。

# c# - 以编程方式将标签添加到面板

> ID：15385921
> 
> 赞同：4
> 
> 时间：2013-03-13T12:54:02.893
> 
> 标签：c#, panel

所以我有一个表单，我想在表单加载时添加一些带有一些控件（标签和单选按钮）的面板。
当然，我想从代码中做到这一点（它是用于制作带有测试的应用程序，问题将是随机的）
这是我到目前为止所做的：

```
List<Panel>ls=new List<Panel>();

private void VizualizareTest_Load(object sender, EventArgs e)
{
    for (int i = 0; i < 4; i++)
    {
        Panel pan = new Panel();
        pan.Name = "panel" + i;
        ls.Add(pan);
        Label l = new Label();
        l.Text = "l"+i;
        pan.Controls.Add(l);
        pan.Show();
    }

} 
```

但它没有在表单上显示任何内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T12:56:50.323

将刚刚创建的面板添加到 Form.Controls 集合中

```
private void VizualizareTest_Load(object sender, EventArgs e)
{
    for (int i = 0; i < 4; i++)
    {
        Panel pan = new Panel();
        pan.Name = "panel" + i;
        ls.Add(pan);
        Label l = new Label();
        l.Text = "l"+i;
        pan.Location = new Point(10, i * 100);
        pan.Size = new Size(200, 90);  // just an example
        pan.Controls.Add(l);
        this.Controls.Add(pan);

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-15T11:20:13.917

[在此处输入图像描述](https://i.stack.imgur.com/O2dj1.png)

```
private void button2_Click(object sender, EventArgs e)
    {
        int X = 153;
        int Y = 34;
        for (int i = 1; i < 4; i++)
        {
            Panel pnl = new Panel();
            pnl.SuspendLayout();
            pnl.Location = new Point(X, Y);
            pnl.Name = "pnl"+i;
            pnl.Size = new Size(200, 57);
            pnl.BorderStyle = BorderStyle.FixedSingle;

            Label lbl = new Label();
            lbl.Location = new Point(X - 100, Y - 17);
            lbl.Name = "lbl" + i;
            lbl.Size = new Size(75, 23);
            lbl.Text = "lable_" +i;

            pnl.Controls.Add(lbl);
            pnl.ResumeLayout(false);

            this.Controls.Add(pnl);

            Y = Y + 95;
        }
    }

why not display label2 & label3? 
```

# google-maps - 谷歌地图 API 地理编码返回码 610

> ID：15385924
> 
> 赞同：1
> 
> 时间：2013-03-13T12:54:06.350
> 
> 标签：google-maps

昨天我突然在我的代码中使用这个引用了一段时间，结果我开始返回代码 610。

[http://maps.googleapis.com/maps/geo?q=rh193ge&output=json&v=2&oe=utf8&sensor=false&key=xxxxxxxxxxxxxxxxxxxxxx](http://maps.googleapis.com/maps/geo?q=rh193ge&output=json&v=2&oe=utf8&sensor=false&key=xxxxxxxxxxxxxxxxxxxxxx)

```
{
  "Status": {
    "code": 610,
    "request": "geocode"
  }
} 
```

我检查了我的密钥，还生成了一个新密钥，但没有任何乐趣。

有人知道吗？

# tfs - 微软测试管理器和代码覆盖率

> ID：15385925
> 
> 赞同：1
> 
> 时间：2013-03-13T12:54:10.750
> 
> 标签：tfs, visual-studio-2012, code-coverage, microsoft-test-manager

我使用 MTM 已经有一段时间了，到目前为止，一切都很好。我试图在我正在执行的测试中获得代码覆盖率。我用 2 台机器设置了我的控制器：1 台 webclient 和 1 台 webserver。对于网络服务器规则，我已经配置了代码覆盖率。当然，网络服务器机器是让我的应用程序在 IIS 上运行的机器。

当我启动我的自动化测试时（顺便说一句，它不是使用 Visual Studio 创建的，而是使用[Ranorex](http://www.ranorex.com/)创建的）我可以看到它生成了一个 .coverage 文件。

但是当我打开这个文件时，它是空的，我从 Visual Studio 收到这条消息：

> 生成空结果：没有检测到二进制文件。确保测试运行，加载所需的二进制文件，具有匹配的符号文件，并且没有通过自定义设置排除。有关详细信息，请参阅[http://go.microsoft.com/fwlink/?LinkID=253731](http://go.microsoft.com/fwlink/?LinkID=253731)

我当然读过

*   [http://go.microsoft.com/fwlink/?LinkID=253731](http://go.microsoft.com/fwlink/?LinkID=253731)
*   [http://msdn.microsoft.com/en-us/library/vstudio/hh698492.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh698492.aspx)
*   [http://msdn.microsoft.com/library/jj159523.aspx](http://msdn.microsoft.com/library/jj159523.aspx)

但是我在我的场景中没有发现任何问题。

有谁知道会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:02:51.587

出色地。原来是我用来在 Web 服务器上运行测试代理的用户的权限问题。

将用户更改为另一个拥有更多权限的用户后，一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:30:09.877

去检查您是否在解决方案中找到以下文件之一：`Local.testsettings`或者`TraceAndTestImpact.testsettings`在 VS 中双击它们。将打开一个新窗口，您需要在其中选择`Data and Diagnostics`。在那里你会看到一个点`Code Coverage`，双击它，然后选择你想要被代码覆盖的所有程序集。

如果这不起作用，请检查您的 PDB 文件是否存在于您的 DLL 文件旁边。

# maven - Maven：让“mvn -Pjenkins”与“mvn clean install pmd:pmd javadoc:aggregate”相同

> ID：15385929
> 
> 赞同：5
> 
> 时间：2013-03-13T12:54:23.753
> 
> 标签：maven, jenkins, continuous-integration, hudson, maven-3

我们的 Jenkins 实例中有许多 Maven 作业，每个作业都有自己特定的调用字符串，在构建配置中指定，类似于

```
mvn clean install -DDISABLED="javadoc:aggregate" checkstyle:checkstyle pmd:pmd findbugs:findbugs 
```

我想合并它，以便将调用字符串与合适的配置文件信息一起存储在 POM 中的某个位置，这样我们就可以将所有这些略有不同的作业的调用字符串替换为

```
mvn -Pjenkins 
```

标准调用。据我了解，该`defaultGoal`条目仅支持*单个*目标，乍一看似乎不足以代表我们的多个目标，但如果我们可以使其对应于多个条目，则可能就足够了。如果可能的话，如果可以使用简单的调用字符串，我希望避免将配置文件特定绑定设置到标准生命周期阶段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:20:44.507

您可以在配置文件中配置其他 mojos，并且可以将 mojos 绑定到生命周期阶段。这两件事结合起来将允许您在给出某个配置文件时运行额外的 mojos。

这是 Maven 中使用的标准技术。例如，当您运行“mvn release:perform”时，它会运行一个带有“-Prelease”的嵌套 Maven 会话，该会话会执行其他操作，例如 GPG 签名二进制文件。

```
<profile>
  <id>jenkins</id>
  <build>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>findbugs-maven-plugin</artifactId>
        <executions>
          <execution>
            <goals>
              <goal>findbugs</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      ... other mojos ... 
```

findbugs mojo[默认绑定到 compile 阶段](http://mojo.codehaus.org/findbugs-maven-plugin/findbugs-mojo.html)，因此它会在编译阶段自动调用。如果您想使用默认情况下不绑定到任何生命周期阶段的 mojo，请添加 <phase>...</phase>。

有关调用 FindBugs 的完整示例，请参阅[Jenkins 核心中的 POM 。](https://github.com/jenkinsci/jenkins/blob/master/core/pom.xml#L875)其他mojo基本相同。

请注意，要使其正常工作，您的默认目标需要将生命周期阶段调用到某个点（例如打包或安装。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T08:33:25.607

我认为没有直接的方法可以给 Maven 一个调用字符串。正如您所说，您可以添加自定义的“jenkins”配置文件，在其中配置 checkstyle、pmd 和 findbugs 插件以绑定到构建阶段（例如，它们的默认阶段）。你仍然需要运行`mvn -Pjenkins clean install`。但是，这样做的好处是您还可以向这些插件添加自定义配置（例如，在 PMD 覆盖范围内包含测试代码）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:59:44.050

`<build><plugins/></build>`我认为您可以在配置文件部分添加 checkstyle、pmd、findbugs 和 javadoc 插件的设置，以及`<properties>`可以定义 javadoc 属性的位置。`maven-clean-plugin`此外，添加对附加到`clean`阶段的显式调用。然后像这样调用构建：

`mvn -Pjenkins site:site`

`defaultGoal`如果您愿意，您甚至可以将其设置为`site`。

# asp.net - ASP.NET 使用复选框隐藏 Gridview 行

> ID：15385931
> 
> 赞同：3
> 
> 时间：2013-03-13T12:54:27.323
> 
> 标签：asp.net, gridview, checkbox

我正在尝试在 ASP.NET 页面上创建一个动态 Gridview，并且我有多行，并添加了一个 CheckBox 列。

```
<body>
    <h1>Alerts</h1>
    <form id="form1" runat="server">
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:KiwiLogConnectionString %>" SelectCommand="SELECT * FROM [Syslogd]
GROUP BY MsgHostname, MsgDate, MsgTime, MsgPriority, MsgText"></asp:SqlDataSource>
        <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" CellPadding="3" DataSourceID="SqlDataSource1" ForeColor="#333333" AllowPaging="True" PageSize="15">
            <AlternatingRowStyle BackColor="White" />
            <Columns>
                <asp:TemplateField >
                <ItemTemplate >
                <asp:CheckBox ID ="Checkbox" runat="server"/>
                </ItemTemplate>
                </asp:TemplateField>
                <asp:BoundField DataField="MsgDate" HeaderText="Datum" SortExpression="MsgDate" ItemStyle-Wrap="false" >
                    <ItemStyle Wrap="False"></ItemStyle>
                </asp:BoundField>
                <asp:BoundField DataField="MsgTime" HeaderText="Tijd" SortExpression="MsgTime" ItemStyle-Wrap="false" >
                    <ItemStyle Wrap="False"></ItemStyle>
                </asp:BoundField>
                <asp:BoundField DataField="MsgPriority" HeaderText="Priority" SortExpression="MsgPriority" ItemStyle-Wrap="false" >
                    <ItemStyle Wrap="False"></ItemStyle>
                </asp:BoundField>
                <asp:BoundField DataField="MsgHostname" HeaderText="Hostname" SortExpression="MsgHostname" ItemStyle-Wrap="false" >
                    <ItemStyle Wrap="False"></ItemStyle>
                </asp:BoundField>
                <asp:BoundField DataField="MsgText" HeaderText="Message" SortExpression="MsgText" />
            </Columns>
            <EditRowStyle BackColor="#2461BF" />
            <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
            <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
            <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
            <RowStyle BackColor="#EFF3FB" />
            <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
            <SortedAscendingCellStyle BackColor="#F5F7FB" />
            <SortedAscendingHeaderStyle BackColor="#6D95E1" />
            <SortedDescendingCellStyle BackColor="#E9EBEF" />
            <SortedDescendingHeaderStyle BackColor="#4870BE" />
        </asp:GridView>
        <asp:Button ID="btn_update" runat="server" OnClick="btn_update_Click" Text="Update" />
    </form>
  </body> 
```

如果选中该复选框并单击“更新”按钮，我希望隐藏这些行。我怎么能做到这一点？

```
protected void btn_update_Click(object sender, EventArgs e)
{

} 
```

gridview 是使用 SQL 数据库构建的，因此它必须是动态的。转发，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:58:58.227

您可以尝试以下方法：

```
protected void btn_update_Click(object sender, EventArgs e)
{
    foreach (GridViewRow gvr in GridView1.Rows) 
    {
            if (((CheckBox)gvr.findcontrol("Checkbox")).Checked == true)
            {
                //Do stuff with checked row
                gvr.Visible = false;
            }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:24:44.767

我会用javascript来做这样的事情。

# sencha-touch - 如果标签是动态添加的，如何在标签面板中排序标签？

> ID：15385932
> 
> 赞同：0
> 
> 时间：2013-03-13T12:54:29.113
> 
> 标签：sencha-touch, sencha-touch-2, sencha-touch-2.1

我的`tabpanel`视图中只有一个选项卡。稍后当加载其他数据时，我将这些选项卡添加到此选项卡中，`tabpanel`但这样选项卡将按照我添加的顺序呈现。我想在现有选项卡之前显示新选项卡，但它总是在它之后附加选项卡，有没有办法做一些事情，比如`addBefore`使用它可以控制选项卡的位置？

这是我的标签面板：

```
{
    xtype           : 'tabpanel',
    flex            : 1,
    id          : 'featurePanel',
    tabBarPosition  : 'top',
    height          : '100%',
    ui              : 'maintabbar',
    tabBar          : { 
        layout : { 
            pack    : 'center' 
        } 
    },
    items   : [{
        title   : 'Tab 1',
        items   : [{
            xtype   : 'panel',
            id  : 'tab1Id'
        }]
    }]
} 
```

这是我添加新面板的方式：

```
var featureList = Ext.create('MyTabApp.view.FeaturedList', {
        id      : "tab2Id"
    });
    var featurePanel = Ext.getCmp("featurePanel");
    featurePanel.add({
        title   : 'Tab 2',
        items   : [{
            xtype   : 'panel',
            items   : [featureList]
        }]
    }); 
```

我希望这个新标签（标签 2）出现在“标签 1”之前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:20:49.333

tabpanel 的 add 方法总是会在最后添加新标签。所以如果你想在不同的位置添加新标签，你必须使用[插入](http://docs.sencha.com/touch/2-0/#!/api/Ext.tab.Panel-method-insert)方法。使用此方法，您可以设置要添加的新选项卡的位置。

使用您的代码，它可以像 -

```
var featureList = Ext.create('MyTabApp.view.FeaturedList', {
    id      : "tab2Id"
});
var featurePanel = Ext.getCmp("featurePanel");
featurePanel.insert(0,{
    title   : 'Tab 2',
    items   : [{
        xtype   : 'panel',
        items   : [featureList]
    }]
}); 
```

这将在第一个位置添加新标签。如果要添加多个选项卡，则可以设置计数器并相应地添加新选项卡。

# python - Python中的大项目频率计数

> ID：15385933
> 
> 赞同：1
> 
> 时间：2013-03-13T12:54:35.033
> 
> 标签：python, tree, hashtable

我想计算内存中的许多项目。我使用了计数器，但是当我有更多数据时它变得越来越慢。这是意料之中的，因为它本质上是一个哈希表，但我不知道它会非常慢。这些是我的程序的一些日志行：

```
$ grep merg ex42.out
2013-03-13 12:47:07,544 - ex42.data - DEBUG - Complete merging 4175889 keys in 0.650000 seconds.
2013-03-13 12:47:24,996 - ex42.data - DEBUG - Complete merging 4135905 keys in 7.890000 seconds.
2013-03-13 13:13:33,577 - ex42.data - DEBUG - Complete merging 4159325 keys in 21.560000 seconds.
2013-03-13 13:13:40,822 - ex42.data - DEBUG - Complete merging 4140346 keys in 23.070000 seconds.
2013-03-13 13:14:04,972 - ex42.data - DEBUG - Complete merging 4187157 keys in 35.340000 seconds.
2013-03-13 13:14:18,744 - ex42.data - DEBUG - Complete merging 4205433 keys in 31.900000 seconds.
2013-03-13 13:14:34,457 - ex42.data - DEBUG - Complete merging 4255486 keys in 35.940000 seconds.
2013-03-13 13:14:51,988 - ex42.data - DEBUG - Complete merging 4220057 keys in 39.950000 seconds.
2013-03-13 13:15:15,714 - ex42.data - DEBUG - Complete merging 4215430 keys in 45.280000 seconds.
2013-03-13 13:15:32,742 - ex42.data - DEBUG - Complete merging 4232054 keys in 47.470000 seconds.
2013-03-13 13:51:28,386 - ex42.data - DEBUG - Complete merging 4244061 keys in 2187.990000 seconds.
2013-03-13 13:51:46,548 - ex42.data - DEBUG - Complete merging 4306790 keys in 2195.190000 seconds. 
```

我还在等待下一个日志行出来......

我认为不同项目的数量可能在 1 亿左右，但我有 192GB 的 RAM，所以它可能很适合内存。在这种情况下，有没有可以帮助我的图书馆？我知道树、堆等等，但是实现它们不仅很累而且容易出错。所以我更喜欢重用一些代码（如果有的话）。

任何建议将不胜感激！

* * *

更新：我正在计算（一堆）文本语料库中的共现。基本上，我计算了一些 GB 文本中相邻出现的单词。还有一些过滤来减少项目的数量，但你可以想象它会很大。每个项目都是一个元组（单词，上下文）。我使用了默认的哈希函数。

* * *

更新 2：SQLite 不可用。我以前试过这个并且很想使用它，但我没有足够的权限来安装/修复它。

```
$ /opt/python/bin/python3
Python 3.2.1 (default, Nov 27 2012, 05:59:14) 
[GCC 4.4.6 20120305 (Red Hat 4.4.6-4)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import sqlite3
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/python/lib/python3.2/sqlite3/__init__.py", line 23, in <module>
    from sqlite3.dbapi2 import *
  File "/opt/python/lib/python3.2/sqlite3/dbapi2.py", line 26, in <module>
    from _sqlite3 import *
ImportError: No module named _sqlite3
>>> quit()

$ ~/python2.7 
Python 2.7.3 (default, Nov 27 2012, 05:53:53) 
[GCC 4.4.6 20120305 (Red Hat 4.4.6-4)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import sqlite3
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/python/lib/python2.7/sqlite3/__init__.py", line 24, in <module>
    from dbapi2 import *
  File "/opt/python/lib/python2.7/sqlite3/dbapi2.py", line 27, in <module>
    from _sqlite3 import *
ImportError: No module named _sqlite3
>>> quit() 
```

* * *

更新3：代码。我发现了一个错误，导致报告的时间超过了实际时间。一旦我有新的日志行，我会立即更新上面的日志行。

```
def _count_coocurrences(coocurrences_callback, corpus_paths, words, contexts, 
                       multiprocessing=False, suspend_exceptions=True):
    counter = Counter()
    try:
        # find co-occurrences
            counter[c] += 1
    except Exception as e:
        # prevent process from hanging
    return counter

class AsynchronousCounter:
    '''
    A counter that provides an asynchronous update function
    '''

    def update_locked(self, counter):
        start = time.clock() # I made mistake at this line
        if self.lock.acquire():
            try:
                self.counter.update(counter)
                elapsed = time.clock() - start
                if _log.isEnabledFor(DEBUG):
                    _log.debug("Completed merging %d keys in %f seconds."
                                %(len(counter), elapsed))
            finally:
                self.lock.release()

    def update_async(self, counter):
        thread = Thread(target=self.update_locked, args=(counter,))
        thread.start()
        self.threads.append(thread)

    def wait(self):
        for thread in self.threads:
            thread.join()

    # some other functions

counter = AsynchronousCounter()
pool = Pool(max_processes)
for path in corpus_paths:
    pool.apply_async(_count_coocurrences, 
                     args=(coocurrences_callback, path, words, contexts, True),
                     callback=counter.update_async)
pool.close()
pool.join()
counter.wait() 
```

* * *

更新 4：新的统计数据

我通过在 self.counter.update() 调用之前将 start = time.clock() 移动到同步块中修复了先前更新中发现的错误。这些是最新的结果：

```
2013-03-14 12:30:54,888 - ex42.data - DEBUG - Completed merging 4140346 keys in 0.770000 seconds.
2013-03-14 12:56:47,205 - ex42.data - DEBUG - Completed merging 4135905 keys in 1536.090000 seconds.
2013-03-14 12:57:04,156 - ex42.data - DEBUG - Completed merging 4159325 keys in 18.250000 seconds.
2013-03-14 12:57:34,640 - ex42.data - DEBUG - Completed merging 4175889 keys in 30.760000 seconds.
2013-03-14 14:01:09,155 - ex42.data - DEBUG - Completed merging 4187157 keys in 3811.940000 seconds.
2013-03-14 14:01:51,244 - ex42.data - DEBUG - Completed merging 4220057 keys in 39.260000 seconds.
2013-03-14 14:02:07,782 - ex42.data - DEBUG - Completed merging 4215430 keys in 11.470000 seconds.
2013-03-14 14:02:40,478 - ex42.data - DEBUG - Completed merging 4205433 keys in 25.340000 seconds.
2013-03-14 14:42:48,693 - ex42.data - DEBUG - Completed merging 4232054 keys in 2371.140000 seconds.
2013-03-14 14:43:13,818 - ex42.data - DEBUG - Completed merging 4255486 keys in 12.360000 seconds.
2013-03-14 14:43:28,132 - ex42.data - DEBUG - Completed merging 4244061 keys in 11.990000 seconds.
2013-03-14 14:43:56,665 - ex42.data - DEBUG - Completed merging 4269879 keys in 23.470000 seconds.
2013-03-14 14:44:13,066 - ex42.data - DEBUG - Completed merging 4282191 keys in 11.810000 seconds.
2013-03-14 14:44:24,671 - ex42.data - DEBUG - Completed merging 4306790 keys in 11.320000 seconds.
2013-03-14 15:56:59,668 - ex42.data - DEBUG - Completed merging 4320573 keys in 4352.680000 seconds.
2013-03-14 15:57:09,125 - ex42.data - DEBUG - Completed merging 4130680 keys in 9.300000 seconds.
2013-03-14 15:57:18,628 - ex42.data - DEBUG - Completed merging 4104878 keys in 9.950000 seconds.
2013-03-14 15:57:27,747 - ex42.data - DEBUG - Completed merging 4095587 keys in 9.030000 seconds.
2013-03-14 15:59:29,345 - ex42.data - DEBUG - Completed merging 4088393 keys in 11.290000 seconds.
2013-03-14 17:23:36,209 - ex42.data - DEBUG - Completed merging 4082050 keys in 2374.850000 seconds.
2013-03-14 17:23:55,361 - ex42.data - DEBUG - Completed merging 4062960 keys in 13.840000 seconds.
2013-03-14 17:24:10,038 - ex42.data - DEBUG - Completed merging 4048144 keys in 12.140000 seconds. 
```

# php - 如何检查上传的文件是否为php？

> ID：15385934
> 
> 赞同：0
> 
> 时间：2013-03-13T12:54:37.447
> 
> 标签：php, file-upload

我编写了一个文件上传脚本，我想检查上传的文件是否是 PHP。

我想保护我的脚本，以便允许上传的唯一文件是 CSS 和 XML。

这是我的代码：

```
<form action="cp_home.php?mode=up_styles&type=uploading" method="post" enctype="multipart/form-data" name="form1" id="form1">
     <input class="fixed" name="ufile" type="file" id="ufile" size="35" />
     <input type="button" name="Submit" onclick="upload()" value="up style" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:12:12.730

两种检查方式

1.你可以检查它javascript本身

```
function is_php(filename){
return filename.split('.').pop()=="php";
} 
```

2.或者你可以简单地检查后端..例如，如果你使用php本身，那么使用下面的代码

```
$path_parts = pathinfo($filename);
if($path_parts['extension']!="php")
return false;
else 
return true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:58:42.440

您可以检查扩展名，因为 php 只会执行 php 扩展名文件。

```
$info = pathinfo(basename($_FILES['image']['name']));
$ext = strtolower($info['extension']);

if ($ext != 'php') {
    // process file upload
} 
```

或者，如果您的服务器支持 php3 或 php5 文件扩展名，您可能想要使用

```
if (!preg_match('/^php/', $ext)) {
    // process file upload
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:56:48.217

在您的 php 代码中检查扩展名：

```
$allowedExts = array("css", "xml"); // css and xml are allowed here, if you want more add it here.
$extension = end(explode(".", $_FILES["file"]["name"]));

if(in_array($extension, $allowedExts)){

   // your code here

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T13:03:45.430

```
 $allowedExts = array("css", "xml");
        $extension = end(explode(".", $_FILES["file"]["name"]));

        if (in_array($extension, $allowedExts)) {

            if (move_uploaded_file($_FILES['file']["tmp_name"], PATH.$name)) {

                if (file_exists($name . $extension)) {
                    echo "uploaded";
                }
                else{
                    echo "not";
                }
            }
        } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-13T12:58:33.410

```
var x = "1.txt";
alert (x.substring(x.lastindexOf(".")+1)); 
```

在输入表单文件文本上使用它。

# c++ - GLFW 和非官方 OpenGL SDK/GLEW 的 GL 上下文无效

> ID：15385946
> 
> 赞同：1
> 
> 时间：2013-03-13T12:55:01.990
> 
> 标签：c++

我已经开始使用 OpenGL 3.3 开发一个新项目。我使用 GLFW 和 GLEW 进行窗口设置和加载 GL 函数，但切换到非官方 OpenGL SDK 而不是 GLEW。但问题仍然存在：

我在调用 glCreateShader(G_VERTEX_SHADER) 时遇到了分段错误，结果发现函数指针为 NULL。后来我发现它是由无效的GL Context引起的。

这是设置代码：

```
#include <glload/gl_3_3.h>
#include <glload/gll.h>
#include <GL/glfw.h>

#include <glm.hpp>
#include <gtc/matrix_transform.hpp>

#include "Cube.h"

template <class T>
int arraySize(T *a) {
    return (sizeof(a) / sizeof(*a));
}

int main() {
    if(!glfwInit()) {
        fprintf(stderr, "Failed to initialize GLFW\n");
        return -1;
    }

    glfwOpenWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);
    glfwOpenWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE);
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR, 3);
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR, 3);

    // Open a window and create its OpenGL context
    if(!glfwOpenWindow(1024, 768, 0,0,0,0, 0,0, GLFW_WINDOW)) {
        fprintf(stderr, "Failed to open GLFW window\n");
        glfwTerminate();
        return -1;
    }                                     

    if(LoadFunctions() == LS_LOAD_FAILED) {
        fprintf(stderr, "Failed to load GL functions.\n");
        return -1;
    } 
```

我已经在谷歌和这里搜索了答案，但没有找到任何东西。我还在 Freenode 上的 OpenGL IRC 频道中询问过，他们告诉我尝试使用非官方 SDK 而不是 GLEW，因为带有核心配置文件的 GLEW 不好。但是，这没有用。

最奇怪的是，它以前工作过，设置与现在***完全相同***。

顺便说一句，我正在使用带有最新可用驱动程序的 Windows 7 x64。

**解决方案**：我很笨，在 glewInit() 之前调用 glCreateShader()。抱歉我笨了:(

# vba - Outlook 2007 中的 VBA - 如果一个新文件夹尚不存在，我如何创建一个新文件夹

> ID：15385952
> 
> 赞同：0
> 
> 时间：2013-03-13T12:55:18.783
> 
> 标签：vba

我正在编写一个将文件附件保存到文件夹的脚本。如果它们不存在，我想创建子文件夹。有没有一种快速的方法来做到这一点？本质上，我正在寻找以下方面的东西：

如果文件夹存在，则什么也不做。否则，创建文件夹。万一。

我知道这是一段愚蠢的 2 行代码，但非常感谢任何帮助！我在 Outlook.MailItem.Attachments 中使用 SaveAsFile 方法，所以也许有一种快速的方法可以使用另一个功能相同的函数？再次感谢！

以下是我当前脚本的摘录：

' 时间戳 dateFormat = Format(Now, "yyyy-mm-dd hh-mm ")

```
' Save folder
saveFolder = centrallocation & ticker & "\"

For Each objAtt In itm.Attachments
    ' File extension
    extension = Right(objAtt.FileName, Len(objAtt.FileName) - InStrRev(objAtt.FileName, "."))
    extension = LCase(extension)

    If extension = "xlsx" Or extension = "xls" Or extension = "xlsxm" Or extension = "xlsm" Then
        saveFolder = saveFolder & "\Model\"
        objAtt.SaveAsFile saveFolder & dateFormat & objAtt.DisplayName
    Else
        objAtt.SaveAsFile saveFolder & dateFormat & objAtt.DisplayName
    End If

    ' go to next attachment
    Set objAtt = Nothing
Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:01:54.203

在保存文件之前调用它：

```
Sub CreateFolderIfMissing(path as String)

    Dim folderExists As Boolean
    folderExists = (Dir(path) <> "")

    If (folderExists) Then Exit Sub

    MkDir path
End Sub 
```

# database - 如何通过逻辑模型绘制多对多关系

> ID：15385955
> 
> 赞同：1
> 
> 时间：2013-03-13T12:55:20.617
> 
> 标签：database, entity-relationship

这是**背景**：

通过下订单从供应商处获得瓶子。某些瓶子类型可能会从多个供应商处订购。每个订单只涉及一个供应商，但可能包括多个瓶子类型。通常订单完全由供应商填写，但有时由于供应商的缺货情况，订单必须填写多批货物。WWWC 会仔细记录订购的数量和收到的数量，以及订购瓶子的时间和收到的时间，以及瓶子的实际收取价格。

**瓶子**的**概念模型**为：Bottle{ID, Capacity, Shape, Material, Color, Cost, Quantity}

 ****Supplier**的 **概念模型**是：Supplier{ID, Name, Phone#, Address, Contact_Name}。

 **到目前为止，我知道瓶子和供应商之间的关系是多对多的。
这是ER关系的照片，只是省略了属性（你可以从上面的概念模型中得到它们）。
![在此处输入图像描述](../Images/39c5aeedc213a6e0241f1fb4a84851fe.png)

据我所知，从ER关系转换为多对多关系下的逻辑图，我需要创建另一个表来表示关系。所以我创建了另一个表：Purchase，它包含以下属性：SID(Supplier ID)，BID(Bottle ID)，Ordered_Quantity，Received_Quantity，When_Ordered，When_Received。

**我的问题是：如何使用线连接这三个表来建立关系？**

![在此处输入图像描述](../Images/df5322313a53fff11ef1cbf79b424015.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:21:22.497

我认为您的意思如下图所示。[这里使用了鱼尾纹](http://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model)符号，但也可以使用更多符号，例如 idef1x。大多数 ER 建模工具支持这些符号技术中的多种。这个例子是用[Dezign 做的](http://www.datanamic.com/dezign/index.html)

![例子](../Images/9fe6a74fefaa243faf783c697edd6327.png)****

# c# - 如何在 Windows 8 应用程序中创建 MetroLog 应用程序？

> ID：15385957
> 
> 赞同：2
> 
> 时间：2013-03-13T12:55:23.500
> 
> 标签：c#, logging, windows-8

我必须为通过 linqtotwitter nuGet 查询 Twitter API 的 Windows 8 应用程序创建日志文件。

我红了这个链接和其他链接，但没有找到回复。

[https://github.com/mbrit/MetroLog/blob/master/Samples/ConsoleSample/Program.cs](https://github.com/mbrit/MetroLog/blob/master/Samples/ConsoleSample/Program.cs)

我试图这样做，但我看不到文件的创建位置。我尝试了 nLog 和 log4net，但它们不适用于 Windows 8 应用程序。

有人有建议吗？

如何解决此日志文件问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:39:55.527

正如[项目 wiki](https://github.com/mbrit/MetroLog/wiki)中记录的那样，日志文件是在内部`~/LocalState/MetroLogs`（即内部）创建的[`ApplicationData.LocalFolder`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localfolder.aspx)。

您可以在磁盘上的以下位置找到此文件夹：`c:\Users\Username\AppData\Local\Packages\PackageName\LocalState\MetroLogs`

# asp.net-mvc - ASP MVC 下载压缩文件

> ID：15385958
> 
> 赞同：1
> 
> 时间：2013-03-13T12:55:25.287
> 
> 标签：asp.net-mvc, dotnetzip

我有一个视图，我在其中放置了事件的 ID，然后我可以下载该事件的所有图像.....这是我的代码

```
[HttpPost]
    public ActionResult Index(FormCollection All)
    {
        try
        {
            var context = new MyEntities();

            var Im = (from p in context.Event_Photos
                      where p.Event_Id == 1332
                      select p.Event_Photo);

            Response.Clear();

            var downloadFileName = string.Format("YourDownload-{0}.zip", DateTime.Now.ToString("yyyy-MM-dd-HH_mm_ss"));
            Response.ContentType = "application/zip";

            Response.AddHeader("content-disposition", "filename=" + downloadFileName);

            using (ZipFile zipFile = new ZipFile())
            {
                zipFile.AddDirectoryByName("Files");
                foreach (var userPicture in Im)
                {
                    zipFile.AddFile(Server.MapPath(@"\") + userPicture.Remove(0, 1), "Files");
                }
                zipFile.Save(Response.OutputStream);

                //Response.Close();
            }
            return View();
        }
        catch (Exception ex)
        {
            return View();
        }
    } 
```

问题是，每次我下载 html 页面时，我都没有下载“Album.zip”，而是得到“Album.html”任何想法？？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T13:49:58.403

在 MVC 中，如果你想返回一个文件，而不是返回一个视图，你可以`ActionResult`通过以下方式返回它：

```
return File(zipFile.GetBytes(), "application/zip", downloadFileName);
// OR
return File(zipFile.GetStream(), "application/zip", downloadFileName); 
```

如果您使用 MVC，请不要纠结于手动写入输出流。

我不确定您是否可以从`ZipFile`类中获取字节或流。或者，您可能希望它将其输出写入 a`MemoryStream`然后返回：

```
 var cd = new System.Net.Mime.ContentDisposition {
     FileName = downloadFileName,
     Inline = false, 
};
Response.AppendHeader("Content-Disposition", cd.ToString());
var memStream = new MemoryStream();
zipFile.Save(memStream);
memStream.Position = 0; // Else it will try to read starting at the end
return File(memStream, "application/zip"); 
```

通过使用它，您可以删除所有使用`Response`. 不需要`Clear`或`AddHeader`。

# c# - WP7：试用模式，如果用户卸载了App怎么办

> ID：15385963
> 
> 赞同：2
> 
> 时间：2013-03-13T12:55:30.937
> 
> 标签：c#, windows-phone-7, time-trial

我计划为我的应用程序实施试用模式，但刚刚意识到必须将安装日期保存在隔离存储中，并与我为试用应用程序设置的时间限制进行​​比较。但是用户可以卸载试用版应用程序，显然它也删除了隔离存储，这意味着他们可以重新安装试用版应用程序并再次使用它！

除了隔离存储之外，将安装日期或任何类型的唯一 ID 存储到手机的最佳方式是什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:27:16.970

在本地使用计时赛并不是一个好主意。进行计时赛的一种方法是从应用程序调用服务（在云中？）。但是您需要为用户存储一个唯一的 ID、截止日期、...

维护起来可能很痛苦。

您应该尝试使用 Joel 提供的链接中的试用模式，并仅在用户购买您的应用程序时激活您的（付费）功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:31:59.613

正如文档所说：

> **不要依赖使用时间限制的试验来保护您的应用程序的价值。**
> 
> 通常，最好通过限制对关键代码路径的试用访问来保护完整模式应用程序的价值。用户可以不受限制地卸载和重试应用程序，因此在有限时间内提供完整模式行为的试验设计只会提供不便作为重用的障碍。

您可以尝试使用您自己的服务器来实现计时模式，该服务器将存储 userId 和实际试用开始日期，但这并不容易，并且至少在安装后第一次启动应用程序时需要互联网连接。

# php - 带有 foreach 和 fetch 的 PHP PDO

> ID：15385965
> 
> 赞同：22
> 
> 时间：2013-03-13T12:55:40.990
> 
> 标签：php, mysql, pdo, foreach, fetch

以下代码：

```
<?php
try {
    $dbh = new PDO("mysql:host=$hostname;dbname=$dbname", $username, $password);
    echo "Connection is successful!<br/>";
    $sql = "SELECT * FROM users";
    $users = $dbh->query($sql);
    foreach ($users as $row) {
        print $row["name"] . "-" . $row["sex"] ."<br/>";
    }
    foreach ($users as $row) {
        print $row["name"] . "-" . $row["sex"] ."<br/>";
    }
    $dbh = null;
}
catch (PDOexception $e) {
    echo "Error is: " . $e-> etmessage();
} 
```

### 输出：

```
Connection is successful!

person A-male
person B-female 
```

运行“foreach”两次不是我的目的，我只是好奇为什么两个“foreach”语句只输出一次结果？

以下是类似情况：

```
<?php
try {
    $dbh = new PDO("mysql:host=$hostname;dbname=$dbname", $username, $password);
    echo "Connection is successful!<br/>";
    $sql = "SELECT * FROM users";
    $users = $dbh->query($sql);
    foreach ($users as $row) {
        print $row["name"] . "-" . $row["sex"] ."<br/>";
    }
    echo "<br/>";
    $result = $users->fetch(PDO::FETCH_ASSOC);
    foreach($result as $key => $value) {
        echo $key . "-" . $value . "<br/>";
    }
    $dbh = null;
}
catch (PDOexception $e) {
    echo "Error is: " . $e-> etmessage();
} 
```

输出：

```
Connection is successful!

person A-male
person B-female

SCREAM: Error suppression ignored for
Warning: Invalid argument supplied for foreach() 
```

但是当我从上面的代码中删除第一个“foreach”时，输出会变得正常：

```
<?php
try {
    $dbh = new PDO("mysql:host=$hostname;dbname=$dbname", $username, $password);
    echo "Connection is successful!<br/>";
    $sql = "SELECT * FROM users";
    $users = $dbh->query($sql);

    echo "<br/>";
    $result = $users->fetch(PDO::FETCH_ASSOC);
    foreach($result as $key => $value) {
        echo $key . "-" . $value . "<br/>";
    }
    $dbh = null;
}
catch (PDOexception $e) {
    echo "Error is: " . $e-> etmessage();
} 
```

输出：

```
Connection is successful!

user_id-0000000001
name-person A
sex-male 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-13T13:07:20.847

A `PDOStatement`（您在 中`$users`）是一个前向光标。这意味着，一旦消耗（第一次`foreach`迭代），它就不会倒回到结果集的开头。

您可以在 之后关闭游标`foreach`并再次执行该语句：

```
$users       = $dbh->query($sql);
foreach ($users as $row) {
    print $row["name"] . " - " . $row["sex"] . "<br/>";
}

$users->execute();

foreach ($users as $row) {
    print $row["name"] . " - " . $row["sex"] . "<br/>";
} 
```

或者您可以使用定制的全缓存进行缓存`CachingIterator`：

```
$users       = $dbh->query($sql);

$usersCached = new CachedPDOStatement($users);

foreach ($usersCached as $row) {
    print $row["name"] . " - " . $row["sex"] . "<br/>";
}
foreach ($usersCached as $row) {
    print $row["name"] . " - " . $row["sex"] . "<br/>";
} 
```

你[发现这个`CachedPDOStatement`类是一个要点](https://gist.github.com/hakre/5152090)。缓存迭代器可能比将结果集存储到数组中更理智，因为它仍然提供`PDOStatement`它包装的对象的所有属性和方法。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-13T13:27:45.683

再次执行相同的查询只是为了得到你已经得到的结果，正如接受的答案中所建议的那样，这是一种**疯狂**。添加一些额外的代码来执行这样一个简单的任务也是没有意义的。我不知道为什么人们会设计出如此复杂和低效的方法来使如此原始、最基本的动作复杂化。

*PDOStatement 不是数组*。使用`foreach`over 语句只是一种在内部使用熟悉的单向循环的*语法糖。*`while`如果您想多次循环数据，只需先将其选择为常规数组

```
$sql = "SELECT * FROM users";
$stm = $dbh->query($sql);
// here you go:
$users = $stm->fetchAll(); 
```

然后根据需要多次使用此数组：

```
foreach ($users as $row) {
    print $row["name"] . "-" . $row["sex"] ."<br/>";
}
echo "<br/>";
foreach ($users as $row) {
    print $row["name"] . "-" . $row["sex"] ."<br/>";
} 
```

也放弃那`try..catch`件事。不要使用它，而是 为 PHP 和 PDO设置[正确的错误报告](https://phpdelusions.net/articles/error_reporting)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-13T13:05:07.907

这是因为您正在读取游标，而不是数组。这意味着您正在按顺序阅读结果，当您到达末尾时，您需要将光标重置到结果的开头以再次阅读它们。

如果您确实想多次读取结果，您可以使用[fetchAll](http://www.php.net/manual/en/pdostatement.fetchall.php)将结果读入一个真正的数组，然后它会按您的预期工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T13:05:51.713

```
$users = $dbh->query($sql);
foreach ($users as $row) {
    print $row["name"] . "-" . $row["sex"] ."<br/>";
}
foreach ($users as $row) {
    print $row["name"] . "-" . $row["sex"] ."<br/>";
} 
```

这`$users`是一个`PDOStatement`可以迭代的对象。第一次迭代输出所有结果，第二次不做任何事情，因为您只能迭代结果一次。这是因为数据是从数据库中流式传输的，并且迭代结果`foreach`基本上是以下的简写：

```
while ($row = $users->fetch()) ... 
```

完成该循环后，您需要在数据库端重置光标，然后才能再次循环它。

```
$users = $dbh->query($sql);
foreach ($users as $row) {
    print $row["name"] . "-" . $row["sex"] ."<br/>";
}
echo "<br/>";
$result = $users->fetch(PDO::FETCH_ASSOC);
foreach($result as $key => $value) {
    echo $key . "-" . $value . "<br/>";
} 
```

这里所有结果都由第一个循环输出。调用`fetch`将返回`false`，因为您已经用尽了结果集（见上文），因此您在尝试循环时遇到错误`false`。

在最后一个示例中，您只是获取第一个结果行并对其进行循环。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2022-02-15T08:55:53.850

```
$row = $db->getAllRecords(DB_TBLPREFIX . '_payplans', '*', ' AND ppid = "' . $myid . '"');
foreach ($row as $value) {
    $bpprow = array_merge($bpprow, $value);
} 
```

这是基于您可以全局使用此数据的 PHP 函数。

# jsf - 强制复选框 JSF

> ID：15385967
> 
> 赞同：1
> 
> 时间：2013-03-13T12:55:41.787
> 
> 标签：jsf, checkbox

我有 3 个复选框，所以我有 3 个不同的 ID。我需要至少一个由用户选中的复选框。我只为第一个 ID 定义了一条错误消息，因此如果用户未选中所有 3 个复选框，他将看到我的错误消息并且第一个复选框将标记为黄色。

现在我想在没有选中任何复选框时将所有 3 个复选框标记为黄色。对于每个 ID 有 3 条错误消息，这是可能的。但不想要的副作用是用户随后会看到 3 条错误消息。我只想要一条错误消息和 3 个黄色复选框。这在 JSF 中可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T13:26:20.347

这基本上有两种解决方案：

1.  *要么*使用single[`<h:selectManyCheckbox>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/selectManyCheckbox.html)而不是[`<h:selectBooleanCheckbox>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/selectBooleanCheckbox.html)es，这样你就可以简单地设置`required="true"`它：

    ```
    <h:selectManyCheckbox ... required="true">
        ...
    </h:selectManyCheckbox> 
    ```

2.  *或*使用[OmniFaces](http://omnifaces.org)：[`<o:validateOneOrMore>`](http://showcase.omnifaces.org/validators/validateOneOrMore)_

    ```
    <h:selectBooleanCheckbox id="one" ... />
    <h:selectBooleanCheckbox id="two" ... />
    <h:selectBooleanCheckbox id="three" ... />
    <o:validateOneOrMore components="one two three" /> 
    ```

# c# - 如何在 Entity Framework 5 中正确触发集合的延迟加载？

> ID：15385969
> 
> 赞同：3
> 
> 时间：2013-03-13T12:55:49.937
> 
> 标签：c#, .net, entity-framework, entity-framework-5

我在我的应用程序中使用 EF5（代码优先）。我有一个包含一些延迟加载字段的表。

```
public class TestEntity
{
    public int Id { get; set; }

    public virtual TestEntity2 SubEntity2 { get; set; }
    public virtual TestEntity3 SubEntity3 { get; set; }

    private ICollection<SubEntity4> _subEntities;
    public ICollection<SubEntity4> SubEntities
    {
        get { return _subEntities ?? (_subEntities = new Collection<SubEntity4>()); }
        protected set { _subEntities = value; }
    }
} 
```

当我从数据库中读取此内容时，SubEntity2 和 SubEntity3 加载正常，但 SubEntities 集合不会加载，并且始终保持 Count=0。所以我强迫这样的负载：

```
db.Entry(queryResult).Collection(rr => rr.SubEntities).Load(); 
```

但据我了解，EF 在第一次调用期间应自动加载此集合，就像 SubEntity2 和 SubEntity3 一样。为什么它不能与集合一起使用？

我用来读取数据库的代码示例：

```
using (var db = new TestContext(_connection, false))
        {
            var query = from r in db.SubEntities
                        where r.Id == 10
                        select r;

            var queryRes = query.FirstOrDefault();
            if (queryRes != null)
            {
                if (queryRes.FederalRegion != null)
                {
                    // Do something
                }

                foreach (var dbEnt in queryRes.SubEntities)
                {
                    // Do something
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T12:59:52.330

为了使延迟加载起作用，EF5 必须做一些棘手的工作。在运行时，他们创建代理类，这些代理类派生自您的模型类。在这些代理类中，它们覆盖导航属性以实现延迟加载机制。

您的`SubEntity2`和`SubEntity3`属性是虚拟的，因此可以覆盖它们。您的`SubEntities`属性不是虚拟的 - EF5 无法覆盖此属性以实现延迟加载。

当您使您的`SubEntities`财产虚拟化时，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:14:23.727

要启用延迟加载，您必须创建您的字段`virtual`，这是真的。但是你还有另一个问题。你有你的`ICollection<SubEntity4>`as `private`。这使映射器无法访问您的字段。我遇到了类似的问题，并询问如何将实体的私有字段设置为对映射器可见。答案是——“不可能”！这是一个链接：

[如何启用映射实体的私有属性](https://stackoverflow.com/questions/14930556/how-to-enable-mapping-the-private-property-of-the-entity)

所以就这样做：

```
 public virtual ICollection<SubEntity4> SubEntities {get;set}; 
```

并移除您的财产。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:00:01.240

您描述的“子实体”（集合）本质上是惰性加载的。如果你不希望它们被延迟加载，你应该使用`.Include(x=> x.SubEntitiesCollectionName)`扩展方法。

**编辑**

**你的班级应该是这样的：**

```
public class TestEntity
{
    public int Id { get; set; }    
    public virtual TestEntity2 SubEntity2 { get; set; }
    public virtual TestEntity3 SubEntity3 { get; set; }    
    public virtual ICollection<SubEntity4> SubEntities { get; set; }
} 
```

# c# - WCF 中的单向异步/等待调用

> ID：15385970
> 
> 赞同：6
> 
> 时间：2013-03-13T12:55:53.657
> 
> 标签：c#, .net, wcf, async-await

我有一个遗留的 WCF 服务，其中有许多以最经典的方式实现的单向操作合同：

```
 // The interface
    [OperationContract(IsOneWay = true, AsyncPattern = true)]
    IAsyncResult BeginFinalizePublishing(PageContent pageContent, AsyncCallback callback, object asyncState);
    void EndFinalizePublishing(IAsyncResult result);

    // The service
    public IAsyncResult BeginFinalizePublishing(PageContent pageContent, AsyncCallback callback, object asyncState)
    {...} 
```

所以这里一切正常，现在我需要将其转换为 c# 5 最新的 async/await 模式。注意操作的单向性。我的问题：

*   我想我需要`AsyncPattern = true`从`OperationContract`属性中删除 。
*   将`IAsyncResult`返回类型替换`void`为接口和`async void`类中的。
*   为了方便起见，删除 Begin/End 并添加 Async 后缀。

*现在我应该如何从客户端调用单向操作？* 没有在客户端使用 async/await 来进行单向调用？

这是否正确并且会在客户端产生真正的异步处理。

```
 // The proxy
    public void FinalizePublishingAsync(PageContent pageContent)
    {
        Channel.FinalizePublishingAsync(pageContent);
    }

        // The consumer of the client
        // No way to use await for void methods. 
        IComPublisherFinalizerClient cl = new IComPublisherFinalizerClient();
        cl.FinalizePublishingAsync(content); 
        cl.Close(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T13:15:54.000

首先，客户端与服务器完全分离。客户端或服务器可能是同步的，使用`IAsyncResult`（APM）异步代码，或使用`async`（TAP）异步代码。

其次，`async`服务器端的方法应该返回`Task`，即使是单向通信。`async`同步方法返回的等价物`void`是一个`async Task`方法，而不是一个`async void`方法。`async void`在 WCF 服务中尤其危险，因为它可能违反`ConcurrencyMode`.

因此，您的服务器端步骤如下所示：

*   删除`OperationContract.AsyncPattern`.
*   将`Begin*`/`End*`方法对组合成一个`*Async`返回`Task`.

您的客户端应该`Task`在其代理的接口上看到 -returning 方法，它应该看到`await`。这并不意味着您正在等待回复；这`await`使您能够等待发送实际消息（如果有延迟）并检测通道通信错误（如果您使用的是可靠通道）。

# jquery - 有条件地将复选框添加到handsontable

> ID：15385972
> 
> 赞同：0
> 
> 时间：2013-03-13T12:55:58.093
> 
> 标签：jquery, handsontable

如何为复选框添加条件格式。EX：如果一行在至少一列中有数据，则我有 13 列和 4000 行，将复选框添加到第一个单元格。如果一行中的所有单元格都有数据，则选中该复选框。复选框应该也有 id。

我会得到像

```
[["<input type='checkbox' name='1'","a","a","a","a","a"...],
["<input type='checkbox' name='2'","a","a","a","a","a"...],
["<input type='checkbox' name='3'","a","a","a","a","a"...]....]; 
```

我需要加载它，如果用户对单元格进行任何删除或更新，我需要检查复选框状态。我正在使用请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:23:15.287

像这样的负载...

```
// run through each row in the table
checkCellsForStuff = $('#myTable tr').each(function() {
    var cellHasStuff = 0;

    // check each cell in the current row
    $('td', this).each(function() {
        if ($(this).text()) { cellHasStuff = 1 }
    });

    // add a checkbox to the first cell in the current row
    if (cellHasStuff = 1) {
        $(this).('td').first().html('<input type="checkbox">');
    }
}); 
```

然后，对于点击...

```
$('#myTable td').blur(function() {
    checkCellsForStuff();
}); 
```

这是未经测试的，但应该让你开始。

# ios - 是否有适用于 IOS 应用程序图表的免费图表控制库，例如饼图、条形图、折线图、面积图

> ID：15385975
> 
> 赞同：0
> 
> 时间：2013-03-13T12:56:03.657
> 
> 标签：ios

是否有适用于 IOS 应用程序图表（如饼图、条形图、折线图、面积图）的免费图表控制库，如果有请您在堆栈溢出时提供给我吗？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T13:13:53.290

1.  [核心情节](https://code.google.com/p/core-plot/)
2.  [博客.oofn](http://blog.oofn.net/projects/)
3.  [sm2dgraphview](http://developer.snowmintcs.com/frameworks/sm2dgraphview/index.html)
4.  [可视化](http://www.ivisualization.com/)
5.  [iphone.orp](http://iphone.orpi.pl/?p=20)
6.  [功率图](http://powerplot.nua-schroers.de/)
7.  [RP雷达图](https://github.com/raspu/RPRadarChart)
8.  [保持边缘](http://www.keepedge.com/products/iphone_charting/)
9.  [iOS绘图](https://github.com/honcheng/iOSPlot)
10.  [FRD3DBarChart](http://www.cocoacontrols.com/controls/frd3dbarchart)
11.  [图形视图](http://www.cocoacontrols.com/controls/graphview)
12.  [F3Plotstrip](http://www.cocoacontrols.com/controls/f3plotstrip)
13.  [百分比图](http://www.cocoacontrols.com/controls/percentagechart)
14.  [塔库图](http://www.cocoacontrols.com/controls/tapku-graph)
15.  [迷你图](http://www.cocoacontrols.com/controls/sparklines)
16.  [ADGraphview](http://www.cocoacontrols.com/controls/adgraphview)
17.  [PNChart](https://github.com/kevinzhow/PNChart)
18.  [VBP饼图](https://github.com/sakrist/VBPieChart)

其中Core Plot比较稳定（个人观点）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-24T18:50:58.797

[试试PNChart](https://github.com/kevinzhow/PNChart)怎么样？ 它支持 LineChart、BarChart 和 Circle Chart

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T12:58:27.157

你可以查看这个库[https://code.google.com/p/core-plot/](https://code.google.com/p/core-plot/) 它在 BSD 许可下。

# php - 每日调度程序的编码逻辑

> ID：15385977
> 
> 赞同：0
> 
> 时间：2013-03-13T12:56:07.587
> 
> 标签：php, logic

我想为我的员工创建一个每日调度程序，以直观地查看他们的工作日。一张桌子就可以了，员工在 x 轴上，小时在左边。00:00 - 24:00

我有一张员工表（6 行），还有一份工作清单。作业有开始时间和结束时间（包括休息时间）。

我想创建一个调度程序，自动将工作分配给员工，最大限度地减少员工数量。

样本：

```
id  | Start_time    | end_time
-----------------------------------
1   | 08:00     | 10:00
2   | 10:00     | 12:00
3   | 12:00     | 13:00
4   | 12:30     | 13:30
5   | 12:45     | 14:00
6   | 13:00     | 14:00

job 1,2,3 get assigned to employee 1.
job 4, gets assigned to employee 2.
job 5 gets assigned to emloyee 3.
job 6 gets assigned to employee 1. 
```

我已经这样做了 2 天了，但没有成功。我尝试了 fullcalendar 和 weekcalendar，但没有成功。

# php - 如何在不解析请求和响应的情况下在 jquery 中获取请求和响应大小

> ID：15385983
> 
> 赞同：0
> 
> 时间：2013-03-13T12:56:19.367
> 
> 标签：php, javascript, jquery, getjson

使用 jquery 获取 HTTP 请求大小和响应大小的常用方法是使用 getResponseHeader("Content-Lenght") 从响应中获取它们，但是，由于我通过 getJSON 使用跨域调用，我在使用它时遇到了问题。有什么方法可以在没有浏览器数据的情况下计算请求和响应的大小？假设在 javscript 中计算请求的位数并在 PhP 中计算响应大小？

# java - 如何从黑莓本机应用程序调用 Web 服务

> ID：15385986
> 
> 赞同：0
> 
> 时间：2013-03-13T12:56:25.180
> 
> 标签：java, web-services, blackberry

这是我在 Blackberry java Eclipse 插件中的代码 我如何在此代码中调用 webservice 以通过从此代码调用 web 服务将以下提到的字段（如 _firstName 、_lastName 、address、mobileNumber ）存储在数据库中。请说一下数据库，我如何在黑莓应用程序中设置数据库以在黑莓应用程序中调用 web 服务，即在我的 ui 设计中，我有名字、姓氏、手机号码和地址，我必须通过调用将此字段存储在数据库中网络服务，请给我一些关于网络服务的想法或代码，并设置特定于黑莓应用程序的数据库。提前致谢

```
 package mypackage;
    import net.rim.device.api.database.Database;
    import net.rim.device.api.database.DatabaseFactory;
    import net.rim.device.api.database.Statement;
    import net.rim.device.api.io.URI;
    import net.rim.device.api.ui.DrawStyle;
    import net.rim.device.api.ui.Field;
    import net.rim.device.api.ui.FieldChangeListener;
    import net.rim.device.api.ui.component.BasicEditField;
    import net.rim.device.api.ui.component.ButtonField;
    import net.rim.device.api.ui.component.DateField;
    import net.rim.device.api.ui.component.Dialog;
    import net.rim.device.api.ui.component.LabelField;
    import net.rim.device.api.ui.component.RadioButtonField;
    import net.rim.device.api.ui.component.RadioButtonGroup;
    import net.rim.device.api.ui.component.RichTextField;
    import net.rim.device.api.ui.component.SeparatorField;
    import net.rim.device.api.ui.container.HorizontalFieldManager;
    import net.rim.device.api.ui.container.MainScreen;
    import net.rim.device.api.ui.container.VerticalFieldManager;

    public final class CreateProfileScreen extends MainScreen {
        Database d;
        BasicEditField _firstName = new BasicEditField("First Name:", "");

        BasicEditField _lastName = new BasicEditField("Last Name:", "");

        BasicEditField mobileNumber = new BasicEditField("MobileNumber:", "");

        BasicEditField address = new BasicEditField("Address:", "");

        public CreateProfileScreen() {
            HorizontalFieldManager btns = new HorizontalFieldManager(
                    HorizontalFieldManager.FIELD_HCENTER);

            ButtonField save = new ButtonField("Save", ButtonField.FIELD_HCENTER);
            // adding these objects to the Blackberry Application.
            VerticalFieldManager vfm = new VerticalFieldManager(
                    VerticalFieldManager.FIELD_LEFT);
            vfm.add(_firstName);

            vfm.add(new SeparatorField());

            vfm.add(_lastName);
            vfm.add(new SeparatorField());
            vfm.add(mobileNumber);
            vfm.add(new SeparatorField());
            RadioButtonGroup rbg = new RadioButtonGroup();
            vfm.add(new RadioButtonField("Male", rbg, true));
            vfm.add(new RadioButtonField("Female", rbg, false));
            vfm.add(new SeparatorField());

            vfm.add(new DateField("DOB:", System.currentTimeMillis(),
                    DateField.DATE | DrawStyle.LEFT));
            vfm.add(new SeparatorField());
            vfm.add(address);
            vfm.add(new SeparatorField());
            vfm.add(save);

            add(vfm);

            FieldChangeListener btnlistener = new FieldChangeListener() {

                public void fieldChanged(Field field, int context) {
                    // Open a new screen

                    String fname = _firstName.getText();
                    String lname = _lastName.getText();
                    String mobno = mobileNumber.getText();
                    String addr = address.getText();

                    if (fname.length() == 0 || lname.length() == 0)
                        Dialog.alert("firstname and lastname is mandatory!");
                    LabelField title = new LabelField("SQLite Insert Data "
                            + "Schema Sample", LabelField.ELLIPSIS
                            | LabelField.USE_ALL_WIDTH);
                    setTitle(title);
                    add(new RichTextField("Attempting to insert data into "
                            + "MyTestDatabase.db on the SDCard."));
                    try {
                        URI myURI = URI.create("D:///db/" + "MyTestDatabase2.db");
                        d = DatabaseFactory.open(myURI);

                        Statement st = d
                                .createStatement("INSERT INTO People(Name,Age) "
                                        + "VALUES ('John',37)");
                        st.prepare();
                        st.execute();
                        st.close();
                        d.close();
                        add(new RichTextField("inserting data successful"));
                        System.out.println("inserting data successful");
                    } catch (Exception e) {
                        System.out.println(e.getMessage());
                        e.printStackTrace();
                    }

                }

            };
            save.setChangeListener(btnlistener);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:05:41.227

尝试这个 -

```
try {

        String httpURL="www.your url.com/register?fname="+fname_value+"&lname="+lname_value+"&mobno ="+no_value+"&addr="+address_value;
        HttpConnection httpConn;
        httpConn = (HttpConnection) Connector.open(httpURL);
        httpConn.setRequestMethod(HttpConnection.POST);
        DataOutputStream _outStream = new DataOutputStream(httpConn.openDataOutputStream());
        byte[] request_body = httpURL.getBytes();
        for (int i = 0; i < request_body.length; i++) {
            _outStream.writeByte(request_body[i]);
        }
        DataInputStream _inputStream = new DataInputStream(
        httpConn.openInputStream());
        StringBuffer _responseMessage = new StringBuffer();
        int ch;
        while ((ch = _inputStream.read()) != -1) {
            _responseMessage.append((char) ch);
        }
        String res = (_responseMessage.toString());
        String responce = res.trim();

        Dialog.alert(responce);

        httpConn.close();

    }catch (Exception e) {
        Dialog.alert("Error");
    } 
```

# azure - Azure 网站中带有服务总线的 SignalR

> ID：15385989
> 
> 赞同：0
> 
> 时间：2013-03-13T12:56:33.680
> 
> 标签：azure, signalr, azure-web-app-service, azureservicebus

我想使用 Azure 网站来部署一个带有 signalR 的网站，使用 Azure ServiceBus。是否可以 ？或者我必须使用天蓝色角色？

仅供参考，收到此错误：

```
Unable to resolve the instance index of this role. Make sure Microsoft.WindowsAzure.ServiceRuntime.dll is deployed with your application. 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:17:19.270

这在今天不起作用，但在下一版本的 1.1 中出现时会起作用。

# jquery - ASP.NET List<> 用于 JQuery 的 AJAX 自动完成。? 转换为 JS JSON 或 ajax 调用

> ID：15385990
> 
> 赞同：2
> 
> 时间：2013-03-13T12:56:38.647
> 
> 标签：jquery, asp.net, json, autocomplete

并感谢您阅读我的帖子..

我有一个列表，用于对我的 aspx.cs 文件中的一些 repaters 进行数据绑定。我现在正在创建一个自动完成功能，我需要使用“AJAX Autocomplete for JQuery”（或类似的......）来使用这个列表（或......至少“id”和“name”）。

问题是我不知道我如何通过 aspx.cs 文件（最好是 [WebMethod]）可以将此列表“发送”到前端，并将其用于自动完成。

这是一个实现的例子......

使用 AJAX：

```
$('#autocomplete').autocomplete({
    serviceUrl: '/autocomplete/countries',
    onSelect: function (suggestion) {
        alert('You selected: ' + suggestion.value + ', ' + suggestion.data);
    }
}); 
```

没有 AJAX ：

```
var countries = [
   { value: 'Andorra', data: 'AD' },
   // ...
   { value: 'Zimbabwe', data: 'ZZ' }
];
$('#autocomplete').autocomplete({
    lookup: countries,
    onSelect: function (suggestion) {
        alert('You selected: ' + suggestion.value + ', ' + suggestion.data);
    }
}); 
```

任何人 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:30:46.013

要处理从 javascript 到 asp.net 的获取值，您将使用 JavaScriptSerializer 类。

示例： [http ://atsung.wordpress.com/2008/08/07/javascriptserializer-example/](http://atsung.wordpress.com/2008/08/07/javascriptserializer-example/)

要处理从 asp.net 到 javascript 的发布数据，您可以使用 JSON。

示例： http: [//www.mikesdotnetting.com/Article/96/Handling-JSON-Arrays-returned-from-ASP.NET-Web-Services-with-jQuery](http://www.mikesdotnetting.com/Article/96/Handling-JSON-Arrays-returned-from-ASP.NET-Web-Services-with-jQuery)