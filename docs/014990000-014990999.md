# StackOverflow 问答 14990000-14990999

# django - 应该如何在 django 中创建更好的模型

> ID：14990001
> 
> 赞同：1
> 
> 时间：2013-02-20T21:12:09.697
> 
> 标签：django, django-models

我有两个模型`Order`并`Orderitem` `Order`收集客户信息并跟踪客户订单的状态。

```
class Order(SmartModel):
    #each individual status
    SUBMITTED = 1 # the credit card was valid or mobilemoney was recieved.It is ready for us to process the order
    PROCESSED = 2 # After submitted orders are reviewed, we can mark them as processed, letting deliverers know order is ready to be shipped
    DELIVERED = 3 # the order has been processed and approved by the adminstrator(in this case us), it can delivered.
    CANCELLED = 4 # Customer called the company and decided they didnt want to go through with the order either by phone or email.

    # SET OF POSSIBLE STATUSES
    ORDER_STATUSES = ((SUBMITTED,'Submitted'),(PROCESSED,'Processed'),(DELIVERED,'Delivered'),(CANCELLED,'Cancelled'),)
    #Order info
    date = models.DateTimeField(auto_now_add=True)
    status = models.IntegerField(choices=ORDER_STATUSES, default=SUBMITTED)
    last_updated = models.DateTimeField(auto_now=True)
#   transaction_id = models.CharField(max_length=20)

    #contact info
    email = models.EmailField(max_length=50)
    phone = PhoneNumberField(max_length=20,default='+250785559899')

    #delivery information
    delivery_name = models.CharField(max_length=50)
    delivery_city = models.CharField(max_length = 50)
    delivery_address = models.CharField(max_length=50,help_text="e.g Klab 6th floor,Telecomhouse,Kacyiru")
    restaurant = models.ForeignKey(Restaurant,default='1') 
```

`OrderItem`另一方面持有物品和数量

```
class OrderItem(SmartModel):
    shopping_id = models.CharField(max_length=50,db_index=True)
    quantity = models.IntegerField(default=0)
    item = models.ForeignKey(Item)
    order = models.ForeignKey(Order) 
```

我正在创建这样的模型。

```
try:
   order= Order.objects.get(pk=order_id)
   restaurant = Restaurant.objects.get(pk=restaurant_id)
except:
   order = Order(created_by=anon_user,modified_by=anon_user)
   order.save()
   oi=OrderItem(order=order,shopping_id=_shopping_id(request),
                                          quantity=quantity,
                                          item=i,
                                          created_by=anon_user,
                                          modified_by=anon_user)
   oi.save() 
```

现在，您看到`OrderItem`我包含了一个外键`order`，这是因为我希望能够拥有一个模型，其中包含一个订单项目、它的数量和`Order`详细信息。但这不起作用我得到一个无类型错误，`coercing to Unicode: need string or buffer, NoneType found`.

我需要帮助来了解我如何才能完成这项工作。

```
Traceback:
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  136\.                     response = response.render()
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/response.py" in render
  104\.             self._set_content(self.rendered_content)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/response.py" in rendered_content
  81\.         content = template.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/base.py" in render
  140\.             return self._render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/test/utils.py" in instrumented_test_render
  62\.     return self.nodelist.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/loader_tags.py" in render
  123\.         return compiled_parent._render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/test/utils.py" in instrumented_test_render
  62\.     return self.nodelist.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/loader_tags.py" in render
  123\.         return compiled_parent._render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/test/utils.py" in instrumented_test_render
  62\.     return self.nodelist.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/loader_tags.py" in render
  123\.         return compiled_parent._render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/test/utils.py" in instrumented_test_render
  62\.     return self.nodelist.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/loader_tags.py" in render
  123\.         return compiled_parent._render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/test/utils.py" in instrumented_test_render
  62\.     return self.nodelist.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/loader_tags.py" in render
  62\.             result = block.nodelist.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/loader_tags.py" in render
  62\.             result = block.nodelist.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/loader_tags.py" in render
  62\.             result = block.nodelist.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/loader_tags.py" in render
  62\.             result = block.nodelist.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/defaulttags.py" in render
  185\.                         nodelist.append(node.render(context))
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/base.py" in render
  1202\.                     return self.nodelist.render(new_context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/defaulttags.py" in render
  476\.         output = self.nodelist.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/defaulttags.py" in render
  281\.                 return nodelist.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/defaulttags.py" in render
  281\.                 return nodelist.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/template/debug.py" in render
  87\.             output = force_unicode(output)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/utils/encoding.py" in force_unicode
  71\.                 s = unicode(s)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/forms/forms.py" in __unicode__
  411\.         return self.as_widget()
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/forms/forms.py" in as_widget
  458\.         return widget.render(name, self.value(), attrs=attrs)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/forms/widgets.py" in render
  547\.         options = self.render_options(choices, [value])
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/forms/widgets.py" in render_options
  570\.         for option_value, option_label in chain(self.choices, choices):
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/forms/models.py" in __iter__
  897\.                 yield self.choice(obj)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/forms/models.py" in choice
  903\.         return (self.field.prepare_value(obj), self.field.label_from_instance(obj))
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/forms/models.py" in label_from_instance
  954\.         return smart_unicode(obj)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/utils/encoding.py" in smart_unicode
  39\.     return force_unicode(s, encoding, strings_only, errors)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/utils/encoding.py" in force_unicode
  71\.                 s = unicode(s)

Exception Type: TypeError at /incoming_orders/orderitem/create/
Exception Value: coercing to Unicode: need string or buffer, NoneType found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:23:43.677

首先，您应该始终调试代码并找到出现错误的地方。

我认为有些问题出在这几行：

```
order = Order(created_by=anon_user,modified_by=anon_user)
order.save() 
```

因为您尝试在没有所有必填字段（例如电子邮件字段）的情况下创建和保存模型实例

# javascript - Javascript 字符串 HTML 组合

> ID：14990006
> 
> 赞同：0
> 
> 时间：2013-02-20T21:12:37.933
> 
> 标签：javascript, jqgrid-asp.net, jqgrid-formatter

我有这个函数，我在 JqGrid for ASP.NET WebForm 中用作自定义格式化程序

```
function formatLink(cellValue, options, rowObject) {
    var res = cellValue.split(" - ");
    var newLink = "";
    var value = rowObject['Filter'];
    var link = '<a class=\"clickCell\" href=\"#\" OnClick=\"CellClicked(\'value\')\">' + res[0] + '</a> - ' + res[1];
    newLink = link.replace("value", value).replace("'", "\'");
    return newLink;
} 
```

返回的链接不起作用。

这是一个例子：

```
<a onclick="CellClicked('vpd.esercizio = '2011-2012'')" href="#" class="clickCell">3</a> 
```

如您所见，`var value`包含带引号的字符串。我将使用它的内容来编写 sql`where`条件。

你能帮我搞定事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:16:52.213

你为什么不干脆做

```
value.replace("'","\\'")
var link = '<a class="clickCell" href="#" OnClick="CellClicked('+value+')">' + res[0] + '</a> - ' + res[1]; 
```

?

用那个替换你应该没问题。我还删除了一些不必要的反斜杠，因为您可以在简单引号内使用双引号。

`document.write(' "" ');`返回 `""`

# terminal - 使用第一个命令的结果查找文件并运行它？

> ID：14990022
> 
> 赞同：0
> 
> 时间：2013-02-20T21:13:22.783
> 
> 标签：terminal, command

我想知道如何使用命令 mdfind 并使用它的结果来运行它：

示例：mdfind -name something.jar && java -Xmx256m -jar （搜索结果）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:17:38.880

mdfind -name something.jar | xargs java -Xmx256m -jar

# mongodb - Mongodb在没有.$的数组中设置一个值

> ID：14990026
> 
> 赞同：0
> 
> 时间：2013-02-20T21:13:38.457
> 
> 标签：mongodb

我有查询

```
choices.update({"subchoices.id":'fh3284'},
               {$set : { "subchoices.$.name" : "le_new_choice"}}
               ); 
```

文件：

```
{ subchoices : [ { "id" : "fh3284", name : "choice1" },
                 { "id" : "fh3286", name : "choice2" } 
               ], ... } 
```

是否可以在不使用`.$.`运算符的情况下重写它（本身不是 , 等中`$set`的运算符`$query`）？我正在使用流星和尚未采用的客户端实现`.$.`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:50:27.147

没有 .$ 似乎不可能进行这样的更新。我花了很多时间试图解决它，但不能。

# wpf - 防止带括号的文本换行

> ID：14990027
> 
> 赞同：2
> 
> 时间：2013-02-20T21:13:39.730
> 
> 标签：wpf, xaml, textblock

是否可以使用 TextBlock 和 FlowDock 防止单词末尾的括号换行。示例：下次您决定创作文本时，您应该考虑吃披萨。我们遇到的问题是（s）。正在包装到下一行。所需的包装将是整个单词 Pizza(s)。换行到下一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:21:24.853

您可以使用内联容器包围特殊内容，以确保将其视为单个元素以进行包装。如果你想确保像“Bob Johnson”这样的名字永远不会被分开，同样的技巧也会起作用。

```
 <TextBlock TextWrapping="Wrap">
        The next time you decide to author text you should think about having <TextBlock Text="pizza(s)" />
    </TextBlock> 
```

听起来在评论中您可能正在从外部资源中提取数据。如果是这种情况，并且您希望以编程方式完成所有操作，您可能希望通过使用[交互行为](http://wpftutorial.net/Behaviors.html)或附加属性与传递 TextBlock 的 MultiValueConverter 来间接创建内联。我不认为直接转换器会起作用，因为[TextBlock.Inlines](http://msdn.microsoft.com/en-us/library/system.windows.controls.textblock.inlines.aspx)不可设置。

希望能帮助到你。:)

# objective-c - NSNumber，int，UITextField 错误

> ID：14990030
> 
> 赞同：0
> 
> 时间：2013-02-20T21:13:42.790
> 
> 标签：objective-c, automatic-ref-counting

现在已经坚持了几个星期，并且对谷歌进行了很多研究，但似乎找不到解决方案。我正在尝试在 a 中输入一个数字`UITextField`并将其作为 int 保存在数据库中。我已经在另一个项目上进行了这项工作，但我收到了错误消息：

> arc 不允许将 int 隐式转换为 nsnumber

这是我正在使用的代码

```
NSNumber *firstInt = [score1TF.text intValue];
self.person.int1 = firstInt; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:17:30.060

`[score1TF.text intValue]`返回一个`int`，并且您试图将其分配给一个`NSNumber *`变量，这是不允许的。假设`self.person.int1`是`int`，您正在寻找：

```
self.person.int1 = [score1TF.text intValue]; 
```

如果它是一个`NSNumber *`，你想要：

```
self.person.int1 = [NSNumber numberWithInt:[score1TF.text intValue]]; 
```

# ruby - 乘法符号 :* 有什么作用？

> ID：14990032
> 
> 赞同：3
> 
> 时间：2013-02-20T21:13:46.527
> 
> 标签：ruby, ruby-1.9, enumerable

特别是，使用注入，以下脚本，

*   `puts (1..5).inject {|x, y| x * y}`和
*   `puts (1..5).inject(:*)`,

两者都有`120`我预期的输出。

然而，剧本

```
print [[1,2], [3,4], [5,6]].map {|x, y| x * y} 
```

有输出

```
[2, 12, 30] 
```

正如预期的那样，但脚本

```
print [[1,2], [3,4], [5,6]].map(:*) 
```

引发`ArgumentError`：

```
confused_ruby_map_inject.rb:1:in `map': wrong number of arguments(1 for 0) (ArgumentError)
    from confused_ruby_map_inject.rb:1:in `<main>' 
```

为什么会发生这种情况，有什么作用`:*`，以及使用第二组脚本实现我正在寻找的结果的最简洁方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T21:26:18.200

`inject()`可以带块或符号，但`map()`总是带块。我认为你的工作`map()`足够简洁。

`:*`是乘法方法的符号名称。

**更新：**我认为你的工作`map()`很好，但看起来你可能正在寻找的是经典的 map/reduce，即使它实际上更长：

```
[[1,2], [3,4], [5,6]].map{|a| a.reduce(:*)} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T21:26:37.207

您可以通过以下方式进行操作：

`[[1,2], [3,4], [5,6]].collect{|t| t.inject(:*)}`

在这里你可以看到注入是如何工作的[Enumerable Doc's](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)

问候，

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T21:58:48.420

`inject`有特殊的语法；您可以使用＆符号接近地图：

```
print [[1,2], [3,4], [5,6]].map(&:first) #=>[1, 3, 5] #note the ampersand

print [[1,2], [3,4], [5,6]].map(&:*)     #=>in `*': wrong number of arguments(0 for 1) (ArgumentError) 
```

错误是因为[*-method](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-2A)需要一个参数（字符串或整数），这不是可选的。这是您在执行时会遇到的错误`[1,2].*`。

演示内容`*`：

```
p [1,2]*2       #=> [1, 2, 1, 2]
p [1,2]*' and ' #=> "1 and 2" 
```

# asp.net-mvc-3 - onlyIf 验证不起作用

> ID：14990033
> 
> 赞同：2
> 
> 时间：2013-02-20T21:13:47.217
> 
> 标签：asp.net-mvc-3, knockout.js, knockout-validation

我在尝试做时遇到了问题：

```
newNoteText: ko.observable().extend({ required: { onlyIf: function () { return this.ShowNote == true } } }) 
```

我注意到这不起作用，但是当我像这样放回代码时，它可以正常工作：

```
newNoteText: ko.observable().extend({ required: true }) 
```

[http://sdrv.ms/WJC3fS](http://sdrv.ms/WJC3fS)

[https://skydrive.live.com/redir?resid=33048714B5BF3B4B!2027](https://skydrive.live.com/redir?resid=33048714B5BF3B4B!2027)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T17:04:01.270

在规则上使用该`onlyIf`选项的正确语法是：

```
newNoteText: ko.observable().extend({ 
  required: {
    onlyIf: function(){
      return someFlagIsTrue;
    }
  } 
```

参照。[这](https://stackoverflow.com/a/14282180/1798491)是对您之前的一个问题的回答（由 Knockout Validation 的主要贡献者 Eric Barnard 提供）。

* * *

关于您的代码，除了 Knockout Validation 的语法之外，还有两件事需要担心：

1.  `return something == true`与`return something`（不提及 JavaScript 的处理方式`==`和运算符，请[在此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)`===`查看更多信息）相同。

2.  在您的函数中， 的值`this`并不是您认为的那样（这里它指的是括号之间的参数`extend()`）。

如果您想访问视图模型的其他可观察对象之一的值，您应该执行以下操作：

```
newNoteText: ko.observable().extend({ 
  required: {
    onlyIf: function(){
      return self.ShowNote();
    }
  } 
```

self 在视图模型构造函数的顶部定义，例如`var self = this;`. [在此处](https://stackoverflow.com/a/338106/1798491)查看有关此模式的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T15:59:39.403

不需要 ThibWeb 提到的 params 选项 - knockout.validation.js 在 addExtender 方法中将其默认设置为 true：

```
if (params.message || params.onlyIf) { 
  return ko.validation.addRule(observable, {
    rule: ruleName,
    message: params.message,
    params: utils.isEmptyVal(params.params) ? true : params.params,
    condition: params.onlyIf
 }); 
```

Eric Barnard 的答案是在 2011 年，大概在这被默认为 true 之前。

但是，如果您的代码设置了任何验证默认值，您可能会将 HTML5 必需属性写入 HTML，或者读取 HTML 中设置的属性：

```
ko.validation.configure({
    parseInputAttributes: true, //default is false
    writeInputAttributes: true //default is false
}); 
```

我发现这会导致 onlyIf required 条件被有效忽略，因为您要添加始终应用的额外必需规则。

# ruby-on-rails - 动作参数

> ID：14990038
> 
> 赞同：0
> 
> 时间：2013-02-20T21:14:21.780
> 
> 标签：ruby-on-rails, parameters

我想向我的新动作发送一个参数“Sportler”，在那里我想创建一个这种类型的新对象。

您可以在下面看到错误消息。

看法：

```
<%= link_to 'New Sportsmen', :action => "new(:type => "Sportler")" %> 
```

控制器：训练员

```
def new
@trainerones = Person.new(:type => params[:type])

    respond_to do |format|
  format.html # new.html.erb
  format.json { render json: @trainerones }
end 
```

我明白了：

```
G:/testmud/app/views/trainerones/show.html.erb:27: syntax error, unexpected tCONSTANT,           expecting ')'
 ...ler', :action => "new("Sportler")" );@output_buffer.safe_con.. 
```

并且这个动作不能用 new_trainerones_path 调用，我在哪里可以注册这个助手？

现在我使用新的。

为此我补充说：匹配'trainerones/new' =>'trainerones#new'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:35:53.307

尝试

```
<%= link_to 'New Sportsmen', "/trainerones/new?type=Sportler" %> 
```

# xpages - XPages 样式类在浏览器中的标签上不起作用，但出现在设计器中

> ID：14990047
> 
> 赞同：0
> 
> 时间：2013-02-20T21:14:36.297
> 
> 标签：xpages

这已经在我身上吃了一段时间了。有时我似乎遇到了这个问题——我有一个标签，它有一个样式表中的样式类，我可以看到它在 Domino Designer 中正常工作： ![Domino Designer 中的样式类显示](../Images/4b7dadbae6c79b6cca10122cac6d6623.png)

但是，当它出现在网络上时，没有样式： ![样式类未出现在网络上](../Images/3e8637660d38d0e23ec65f4c119ebe61.png)

我执行了一次清理，我认为这可能会纠正这个问题。

这是代码：

```
<xp:label value="Email Address is already in use." id="emailExistsText"
styleClass="myCustomErrorMessage">
<xp:this.rendered><![CDATA[#{javascript:var emailCheck = sessionScope.get("emailExists");
    if (emailCheck == "true") { 
        return true;
    }
    else {
        return false;
    }}]]>
</xp:this.rendered> 
```

是因为标签上有一个 hide/when 脚本吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:10:14.157

其他一些 CSS 类必须覆盖您的自定义 CSS 类。检查例如 Chrome 开发人员工具或 Firebug 哪些 CSS 类和属性会影响标签上的样式。

使用 Chrome 开发者工具或 Firebug 对于“调试”样式问题是必不可少的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:22:25.593

解决这个问题的方法——让样式类正确显示——是单击 Firefox 地址栏中的“刷新”图标/按钮。这真的很有趣，它纠正了这个问题。

执行清理，删除所有缓存文件，重新启动机器后，它正在单击修复它的刷新按钮。

# javascript - 来自 html 的 Javascript 函数和 jquery 选择器的功能

> ID：14990055
> 
> 赞同：1
> 
> 时间：2013-02-20T21:14:58.260
> 
> 标签：javascript, jquery, jquery-selectors

我有这个javascript函数：

```
function clearDiv(div_id) {
    alert(div_id);
    $(div_id).empty();
} 
```

以及以下html：

```
<input value="Clear" type="button" onClick="clearDiv(div_to_clear)" />

<div id="div_to_clear">
    <!-- more html -->
</div> 
```

为什么上面实际上会找到带有id的javascript div对象`div_to_clear`并使用`$`选择器访问它？

如果我将输入输入为：

```
<input value="Clear" type="button" onClick="clearDiv('div_to_clear')" /> 
```

我需要将我的功能更改为

```
function clearDiv(div_id) {
    alert(div_id);
    $('#' + div_id).empty();
} 
```

有这方面的文件吗？使用一种方法或另一种方法有优势吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T21:18:02.500

IE（以及为了兼容性而努力的 Chrome）将在窗口上创建属性，其中包含具有 id 的元素名称，对应于这些元素。

在第一个示例中，是`window.div_to_clear`直接传递指向您的元素的。在第二个中，您传递一个字符串告诉 jQuery 选择哪个元素。

第一个是非标准行为，因此您不应依赖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:18:42.293

第一个实际上是一个浏览器错误（他们称之为功能），通过`window.div_to_clear`（全局变量）访问 DOM 节点 - 并且 jQuery 在元素周围创建了它的包装器。由于遗留原因，它仍然存在于当前浏览器中，但已被弃用。你真的应该使用选择器解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T21:18:48.380

这是因为浏览器有一种广泛实施（尽管是***`not`***最佳实践）的方法，可以自动将带有`id`'s 的 html 元素放入它们的相关变量名中。例如：

```
<div id="someId"></div> 
```

最终会伪创建`someId`包含该 html 元素的变量。

这些问题有类似的行为信息：

[带有 id 的 DOM 树元素会成为全局变量吗？](https://stackoverflow.com/q/3434278/1026459)

[保存具有 id 的元素的变量存储在哪里？](https://stackoverflow.com/q/12680124/1026459)

[可通过 ID 访问的元素](https://stackoverflow.com/q/12663981/1026459)

这是一个 jsperformance 测试，表明以这种方式访问​​ id 比使用慢：http `document.getElementById`: [//jsperf.com/global-id-vs-document-getelementbyid](http://jsperf.com/global-id-vs-document-getelementbyid)

# typescript - Typescript 事件绑定和解除绑定

> ID：14990057
> 
> 赞同：4
> 
> 时间：2013-02-20T21:15:00.950
> 
> 标签：typescript

前段时间我问过[这个问题](https://stackoverflow.com/questions/14486930/typescript-event-handler-function-for-event-type-field-incorrect-context)，关于将 jquery 事件委托给 typescript 类中的事件处理程序方法。答案是使用以下模式

```
public class LoginDialog { 
     ...
     constructor() { 
        //this.open = this.OpenHandler; //Incorrect way
        this.open = (event: Event, ui: DialogUIParams) => {  //Correct way
             this.OpenHandler(this, event, ui);
        }; 
        ...
     }

     public OpenHandler(context: LoginDialog, event: Event, ui: DialogUIParams) { 
           //Use context as "this"
     } 
     ...
 } 
```

但是，现在我处于类似的情况，我需要在将来的某个时间删除处理程序，但由于匿名函数而无法删除：

```
public class LoginDialog { 
     ...
     constructor() { 
        this.open = (event: Event, ui: DialogUIParams) => {  
             this.OpenHandler(this, event, ui);
        }; 
        this.close = (event: Event, ui: DialogUIParams) => {
             this.CloseHandler(this, event, ui);
        }
        ...
     }

     public OpenHandler(context: LoginDialog, event: Event, ui: DialogUIParams) { 
           $(window).on("scroll", () => { context.ScrollHandler(context); });
           //$(window).on("scroll", context.ScrollHandler(context)); //Never gets called
           //$(window).on("scroll", context.ScrollHandler); //this = window
     } 

     public CloseHandler(context: LoginDialog, event: Event, ui: DialogUIParams) { 
           $(window).off("scroll", () => { context.ScrollHandler(context); }); //Does not remove
     } 

     public ScrollHandler(context: Interfaces.IBaseDialog) { 
           context.jQueryDialog.dialog("option", "position", "center");
           ...
     }
     ...
 } 
```

在这种情况下，`on`绑定中没有箭头语法，我`ResizeOrScrollHandler`永远不会被调用，但是我无法删除 CloseHandler 中的事件处理程序

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T23:28:35.620

总结您的问题，您尝试使用 jQuery 来挂钩（和取消挂钩）DOM 元素上的事件，但您希望事件处理程序的“this”上下文指向包含事件处理程序的类。

There are multiple ways to solve this.

First, you can use [jQuery.proxy](http://api.jquery.com/jQuery.proxy/)

```
class LoginDialog {

   public OpenHandler(context: LoginDialog, event: Event, ui: DialogUIParams) { 
      $(window).on("scroll", $.proxy(context.ScrollHandler, context));
   }    

   public CloseHandler(context: LoginDialog, event: Event, ui: DialogUIParams) {
      $(window).off("scroll", context.ScrollHandler);
   }
} 
```

Another option would be to use [RxJS](https://github.com/Reactive-Extensions/RxJS#readme), which allows you to treat [events like disposable objects](https://github.com/Reactive-Extensions/rxjs-jquery):

```
var scrollSubscription = $(window)
     .onAsObservable("scroll")
     .subscribe(() => console.log("this == the containing class!"));
...
// When we're done, just call .dispose.
scrollSubscription.dispose(); 
```

Have fun.

# c++ - c++:在向量中搜索

> ID：14990059
> 
> 赞同：0
> 
> 时间：2013-02-20T21:15:13.543
> 
> 标签：c++, vector

我正在尝试为计算机创建一个定价系统，并且我想创建两个向量，一个存储项目名称，另一个存储项目的价格。我的计划是有两种方法，“find_item”，它在向量内找到项目名称并返回其索引，以及“get_itemPrice”，它从 find_item 获取索引并获取价格。我的问题是提出一个代码，该代码将一个字符串对象放入向量中并返回其索引位置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T21:16:45.340

您可以简单地使用[`std::find`](http://en.cppreference.com/w/cpp/algorithm/find). 它将返回一个迭代器，指向与您正在搜索的元素相等的第一个元素，或者`end()`如果没有找到则返回。*如果*你真的需要它，你可以使用[`std::distance`](http://en.cppreference.com/w/cpp/iterator/distance)它从中获取索引。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:17:39.583

像这样：

```
vector<int> vect;
int i = 0;
for (vector<int>::iterator iter = vect.begin(); iter != vect.end(); ++iter)
{
  if (*iter == vect)
    break;
  i++;
}
if (i == vect.size())
  // not found
else
  // i is your index 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T21:39:16.240

如果你真的想让一个算法这样做，但通常不应该试图击败那些在 stl 看到算法标题

```
unsigned find_str( const vector<string>&  vec, const string& key ){
    unsigned count = 0;
    vector<string>::const_iterator it;
    for ( it = vec.begin() ; it < vec.end(); it++ ){
        if( *it == key)
            return count;
        count++;
    }
    /*throw not found error here.*/
} 
```*

# vbscript - 从 csv 文件分配变量

> ID：14990063
> 
> 赞同：0
> 
> 时间：2013-02-20T21:15:33.037
> 
> 标签：vbscript

我有一个 csv 文件（示例）

```
Firm,Code,Server
Adsuar,BZ,RKASP01
Ahlers,AU,RKASP02
Andrews,CW,RKASP02
Armbrecht,AS,RKASP02
Barron,ZZ,RKASP01
Beckman,BI,RKASP02 
```

我试图在 vbscript 中找到一种方法，在我的网站上有一个列出 A 列值的选择框，然后在同一行中用 B 列和 C 列的内容填充两个变量。

我有读取 csv 文件所需的东西，并且可以遍历文件并回显所有内容，但是我在寻找从这里去哪里时遇到了一些麻烦。任何关于我可以从哪里开始的建议将不胜感激。

我目前拥有的代码是

```
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objTextFile = objFSO.OpenTextFile("\\rkaspctl01\n$\wwwroot\dev\clients.csv", 1)

do while not (objTextFile.AtEndOfStream)
  arrStr = Split(objTextFile.ReadLine, ",")
  strFirm = arrStr(0)
  strCode = arrStr(1)
  strServer = arrStr(2)
Loop

objTextFile.close 
```

谢谢帕特里克·斯托达德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:05:31.360

您可以使用 TDC（[表格数据控件](http://msdn.microsoft.com/en-us/library/ms531356%28v=vs.85%29.aspx)）。

```
<HTML>
<HEAD>
<TITLE>TDC Example</TITLE>

<OBJECT ID="dataTDC" CLASSID="CLSID:333C7BC4-460F-11D0-BC04-0080C7055A83">
  <PARAM NAME="TextQualifier" VALUE="">
  <PARAM NAME="FieldDelim" VALUE=",">
  <PARAM NAME="DataURL" VALUE="data.csv">
  <PARAM NAME="UseHeader" VALUE="true">
</OBJECT>

</HEAD>
<BODY>

<TABLE DATASRC="#dataTDC" BORDER="1" CELLSPACING="0">
  <THEAD>
    <TR>
      <TD><B>Firm</B></TD>
      <TD><B>Code</B></TD>
      <TD><B>Server</B></TD>
    </TR>
  </THEAD>
  <TR>
    <TD><SPAN DATAFLD="Firm"></SPAN></TD>
    <TD><SPAN DATAFLD="Code"></SPAN></TD>
    <TD><SPAN DATAFLD="Server"></SPAN></TD>
  </TR>
</TABLE>

</BODY>
</HTML> 
```

输出结果：

![截屏](../Images/23d767a3c83014189429a4ccc3bb934b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:38:57.050

开始将数据放入键/值对（字典）中，其中键是 A 列的值，值是包含 B 列和 C 列值的数组：

```
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objTextFile = objFSO.OpenTextFile("\\rkaspctl01\n$\wwwroot\dev\clients.csv", 1)
Set objFirmDict = CreateObject("Scripting.Dictionary")

do while not (objTextFile.AtEndOfStream)
  arrStr = Split(objTextFile.ReadLine, ",")
  objFirmDict.Add arrStr(0), array(arrStr(1), arrStr(2))
Loop

objTextFile.close 
```

现在您可以使用字典中的键填充您的列表框。
伪代码：

```
firmListbox = document.getElementById("firmSelect")
For each firm in objFirmDict.Keys
    Set newOption = document.createElement("option")
    newOption.text = firm
    newOption.value = firm
    firmListbox.Add newOption, Nothing
Next 
```

选择一个选项后，使用正确的文本更新这两个变量。

在您的网页上：

```
<input type="select" id="firmSelect" onchange="vbscript:firmSelectChange me.Value"> 
```

onchange 事件调用firmSelectChange sub。这必须从字典中检索两个变量。请注意：字典必须具有文档的全局范围。

此处理子的伪代码：

```
Sub firmSelectChange(value)
    dataArr = objFirmDict.Item(value)
    code = dataArr(0)
    server = dataArr(1)
End Sub 
```

# android - 单击一个项目时如何更改Android ListView中的其他项目

> ID：14990065
> 
> 赞同：2
> 
> 时间：2013-02-20T21:15:54.533
> 
> 标签：android, android-listview, listviewitem

我有一个`ListView`包含复选框的项目，这些复选框的行为有时应该像 a`CHOICE_MODE_MULTIPLE`有时像 a `CHOICE_MODE_SINGLE`。What I mean is for certain items in the list, when selected certain other items needs to be deselected whilst other can remain selected.

因此，当检查项目**A**时，我可以在我的数据中找到需要不选中的项目**B**，但是我该如何让UI刷新以显示出来，因为我（我相信）找不到`View`代表**B**但仅仅是数据的实际实际内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:41:00.800

听起来你有一个好的开始。您是对的，您应该在单击 A 时操作 B 项的基础数据源。

两个提示可能对您有所帮助：

1.  您`getView()`在适配器中的方法应该查看您的数据源并`convertView`根据它找到的内容进行更改。您找不到代表 B 的实际视图，因为在 a`ListView`中，由于`Views`需要显示不同的数据，它们被回收并被重用。基本上，当一个项目从列表中滚动出来时`View`，所使用的 被传递给`getView()`函数 as `convertView`，准备处理下一个元素的数据。出于这个原因，您可能永远不应该根据用户输入直接更改 a`View`中的 a ，而应该更改基础数据。`ListView`
2.  您可以`notifyDataSetChanged()`从您的适配器中调用，以表明某处基础数据已更改，并且`getView()`应该为当前显示在列表中的元素再次调用。

如果您仍然遇到问题，请随时发布一些代码来说明您遇到的特定问题。当问题得到更好的定义时，提供具体的建议会容易得多。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:38:02.123

你可以使用singleChoice alartDialog，我曾经使用过：

```
private int i = 0; // this is global
private final CharSequence[] items = {"Breakfast", "Lunch", "Dinner"}; // this is global

Button settings = (Button)view.findViewById(R.id.settings);

settings.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(final View v) {
        AlertDialog.Builder builder = new AlertDialog.Builder(v.getContext());

    //Title of Popup
    builder.setTitle("Settings");

    builder.setSingleChoiceItems(items, i,
          new DialogInterface.OnClickListener() {
       // When you click the radio button
       public void onClick(DialogInterface dialog, int item){

           i=item;
       }
    });

    builder.setPositiveButton("Confirm",
           new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int item) {

          if (i == 0) {
                  //it means 1st item is checked, so do your code
          }
          if (i == 1) {
             //it means 2nd item is checked, so do your code
          } /// for more item do if statement    
        }
    });
      //When you click Cancel, Leaves PopUp.
      builder.setNegativeButton("Cancel", null); 
      builder.create().show();

    }
}); 
```

我已经初始化`i=0`，所以当用户第一次点击`settings`按钮时，第一个项目被选中。然后当用户选择其他项目之后，我已经保存了该`i`值，以便下次用户单击`settings`按钮时，我可以向用户显示他/她之前选择的项目已被选中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-07T08:40:22.170

我今天遇到并解决了这个问题。

```
public class ItemChooceActivity extends Activity implements OnItemClickListener {

       private int chosenOne = -1;

      class Madapter extends BaseAdapter {
                 .....
                 .....
       @Override
        public View getView(final int position, View convertView,
            ViewGroup parent) {
        // TODO Auto-generated method stub

            if (chosenOne != position) {
                set the view in A style
            } else {
                set the view in B style
            }

        return convertView;
    }
}

        @Override
        public void onItemClick(AdapterView<?> arg0, View view, int position,
        long arg3) {
    ,,,,
        chosenOne = position;
        adapter.notifyDataSetChanged();
         ,,,
} 
```

}

# javascript - 防止在没有哈希的情况下刷新时自动浏览器滚动

> ID：14990067
> 
> 赞同：0
> 
> 时间：2013-02-20T21:16:04.277
> 
> 标签：javascript, jquery, google-chrome, browser

与我的问题类似，[有](https://stackoverflow.com/questions/7035331/prevent-automatic-browser-scroll-on-refresh)什么方法可以防止在没有哈希/锚点的情况下自动滚动。该帖子中描述的方法围绕检查是否存在散列。

有没有办法知道浏览器是否有滚动点，或者页面是否正在刷新或刚刚访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:21:07.080

如果我理解你的正确，[`localStorage`](https://developer.mozilla.org/docs/Web/API/Window/localStorage)或者[`sessionStorage`](https://developer.mozilla.org/docs/Web/API/Window/sessionStorage)可能会有所帮助。

如果页面被重新加载（听`beforeunload`或`unload`），只需缓存当前的滚动偏移量，然后在页面加载时恢复它：

```
var $window = $(window).on({
  beforeunload: function() {
    window.sessionStorage.scrollLeft = $window.scrollLeft()
    window.sessionStorage.scrollTop = $window.scrollTop()
  },
  load: function() {
    $window.scrollLeft(window.sessionStorage.scrollLeft)
    $window.scrollTop(window.sessionStorage.scrollTop)
  }
}) 
```

# php - 强制关闭使用 PHP、MySQL 和 SQLite 的 Android 登录和注册

> ID：14990068
> 
> 赞同：2
> 
> 时间：2013-02-20T21:16:06.677
> 
> 标签：php, android, mysql

**应用代码来源**：[http ://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)

我在我的 samsung s2 和 android 2.2 模拟器上运行应用程序，在我使用随机用户名和密码登录后都被迫关闭。在我尝试注册后它也会强制关闭。

**logcat（详细）：**

```
02-21 03:09:15.800: W/KeyCharacterMap(563): No keyboard for id 0
02-21 03:09:15.800: W/KeyCharacterMap(563): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
02-21 03:09:23.480: D/Button(563): Login
02-21 03:09:23.829: E/JSON(563): <!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
02-21 03:09:23.829: E/JSON(563): <html><head>
02-21 03:09:23.829: E/JSON(563): <title>404 Not Found</title>
02-21 03:09:23.829: E/JSON(563): </head><body>
02-21 03:09:23.829: E/JSON(563): <h1>Not Found</h1>
02-21 03:09:23.829: E/JSON(563): <p>The requested URL /android_login_api/ was not found on this server.</p>
02-21 03:09:23.829: E/JSON(563): </body></html>
02-21 03:09:23.829: E/JSON Parser(563): Error parsing data org.json.JSONException: Value <!DOCTYPE of type java.lang.String cannot be converted to JSONObject
02-21 03:09:23.829: D/AndroidRuntime(563): Shutting down VM
02-21 03:09:23.829: W/dalvikvm(563): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
02-21 03:09:23.849: E/AndroidRuntime(563): FATAL EXCEPTION: main
02-21 03:09:23.849: E/AndroidRuntime(563): java.lang.NullPointerException
02-21 03:09:23.849: E/AndroidRuntime(563):  at com.example.androidhive.LoginActivity$1.onClick(LoginActivity.java:65)
02-21 03:09:23.849: E/AndroidRuntime(563):  at android.view.View.performClick(View.java:2408)
02-21 03:09:23.849: E/AndroidRuntime(563):  at android.view.View$PerformClick.run(View.java:8816)
02-21 03:09:23.849: E/AndroidRuntime(563):  at android.os.Handler.handleCallback(Handler.java:587)
02-21 03:09:23.849: E/AndroidRuntime(563):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-21 03:09:23.849: E/AndroidRuntime(563):  at android.os.Looper.loop(Looper.java:123)
02-21 03:09:23.849: E/AndroidRuntime(563):  at android.app.ActivityThread.main(ActivityThread.java:4627)
02-21 03:09:23.849: E/AndroidRuntime(563):  at java.lang.reflect.Method.invokeNative(Native Method)
02-21 03:09:23.849: E/AndroidRuntime(563):  at java.lang.reflect.Method.invoke(Method.java:521)
02-21 03:09:23.849: E/AndroidRuntime(563):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-21 03:09:23.849: E/AndroidRuntime(563):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-21 03:09:23.849: E/AndroidRuntime(563):  at dalvik.system.NativeStart.main(Native Method)
02-21 03:14:23.920: I/Process(563): Sending signal. PID: 563 SIG: 9
02-21 03:49:40.550: W/KeyCharacterMap(600): No keyboard for id 0
02-21 03:49:40.550: W/KeyCharacterMap(600): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
02-21 03:49:45.180: D/Button(600): Login
02-21 03:49:46.750: E/JSON(600): <!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
02-21 03:49:46.750: E/JSON(600): <html><head>
02-21 03:49:46.750: E/JSON(600): <title>404 Not Found</title>
02-21 03:49:46.750: E/JSON(600): </head><body>
02-21 03:49:46.750: E/JSON(600): <h1>Not Found</h1>
02-21 03:49:46.750: E/JSON(600): <p>The requested URL /android_login_api/ was not found on this server.</p>
02-21 03:49:46.750: E/JSON(600): </body></html>
02-21 03:49:46.750: E/JSON Parser(600): Error parsing data org.json.JSONException: Value <!DOCTYPE of type java.lang.String cannot be converted to JSONObject
02-21 03:49:46.750: D/AndroidRuntime(600): Shutting down VM
02-21 03:49:46.760: W/dalvikvm(600): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
02-21 03:49:46.760: E/AndroidRuntime(600): FATAL EXCEPTION: main
02-21 03:49:46.760: E/AndroidRuntime(600): java.lang.NullPointerException
02-21 03:49:46.760: E/AndroidRuntime(600):  at com.example.androidhive.LoginActivity$1.onClick(LoginActivity.java:65)
02-21 03:49:46.760: E/AndroidRuntime(600):  at android.view.View.performClick(View.java:2408)
02-21 03:49:46.760: E/AndroidRuntime(600):  at android.view.View$PerformClick.run(View.java:8816)
02-21 03:49:46.760: E/AndroidRuntime(600):  at android.os.Handler.handleCallback(Handler.java:587)
02-21 03:49:46.760: E/AndroidRuntime(600):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-21 03:49:46.760: E/AndroidRuntime(600):  at android.os.Looper.loop(Looper.java:123)
02-21 03:49:46.760: E/AndroidRuntime(600):  at android.app.ActivityThread.main(ActivityThread.java:4627)
02-21 03:49:46.760: E/AndroidRuntime(600):  at java.lang.reflect.Method.invokeNative(Native Method)
02-21 03:49:46.760: E/AndroidRuntime(600):  at java.lang.reflect.Method.invoke(Method.java:521)
02-21 03:49:46.760: E/AndroidRuntime(600):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-21 03:49:46.760: E/AndroidRuntime(600):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-21 03:49:46.760: E/AndroidRuntime(600):  at dalvik.system.NativeStart.main(Native Method)
02-21 03:49:46.840: D/dalvikvm(600): GC_FOR_MALLOC freed 3724 objects / 212248 bytes in 76ms
02-21 03:49:52.790: I/Process(600): Sending signal. PID: 600 SIG: 9
02-21 03:51:55.399: W/KeyCharacterMap(748): No keyboard for id 0
02-21 03:51:55.399: W/KeyCharacterMap(748): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
02-21 03:52:03.429: D/Button(748): Login
02-21 03:52:03.759: E/JSON(748): <!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
02-21 03:52:03.759: E/JSON(748): <html><head>
02-21 03:52:03.759: E/JSON(748): <title>404 Not Found</title>
02-21 03:52:03.759: E/JSON(748): </head><body>
02-21 03:52:03.759: E/JSON(748): <h1>Not Found</h1>
02-21 03:52:03.759: E/JSON(748): <p>The requested URL /android_login_api/ was not found on this server.</p>
02-21 03:52:03.759: E/JSON(748): </body></html>
02-21 03:52:03.770: E/JSON Parser(748): Error parsing data org.json.JSONException: Value <!DOCTYPE of type java.lang.String cannot be converted to JSONObject
02-21 03:52:03.770: D/AndroidRuntime(748): Shutting down VM
02-21 03:52:03.770: W/dalvikvm(748): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
02-21 03:52:03.779: E/AndroidRuntime(748): FATAL EXCEPTION: main
02-21 03:52:03.779: E/AndroidRuntime(748): java.lang.NullPointerException
02-21 03:52:03.779: E/AndroidRuntime(748):  at com.example.androidhive.LoginActivity$1.onClick(LoginActivity.java:65)
02-21 03:52:03.779: E/AndroidRuntime(748):  at android.view.View.performClick(View.java:2408)
02-21 03:52:03.779: E/AndroidRuntime(748):  at android.view.View$PerformClick.run(View.java:8816)
02-21 03:52:03.779: E/AndroidRuntime(748):  at android.os.Handler.handleCallback(Handler.java:587)
02-21 03:52:03.779: E/AndroidRuntime(748):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-21 03:52:03.779: E/AndroidRuntime(748):  at android.os.Looper.loop(Looper.java:123)
02-21 03:52:03.779: E/AndroidRuntime(748):  at android.app.ActivityThread.main(ActivityThread.java:4627)
02-21 03:52:03.779: E/AndroidRuntime(748):  at java.lang.reflect.Method.invokeNative(Native Method)
02-21 03:52:03.779: E/AndroidRuntime(748):  at java.lang.reflect.Method.invoke(Method.java:521)
02-21 03:52:03.779: E/AndroidRuntime(748):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-21 03:52:03.779: E/AndroidRuntime(748):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-21 03:52:03.779: E/AndroidRuntime(748):  at dalvik.system.NativeStart.main(Native Method)
02-21 03:52:03.869: D/dalvikvm(748): GC_FOR_MALLOC freed 3885 objects / 218072 bytes in 88ms
02-21 03:57:03.939: I/Process(748): Sending signal. PID: 748 SIG: 9 
```

我的数据库名称是 android_api，我使用 WAMP 服务器就像 androidhive 所做的一样。Androidhive 使用以下代码：

```
private static String loginURL = "http://10.0.2.2/ah_login_api/";
private static String registerURL = "http://10.0.2.2/ah_login_api/"; 
```

但我用这个：

```
private static String loginURL = "http://10.0.2.2/android_login_api/";
private static String registerURL = "http://10.0.2.2/android_login_api/"; 
```

我也试试这个：

```
private static String loginURL = "http://10.0.2.2/android_api/";
private static String registerURL = "http://10.0.2.2/android_api/"; 
```

我尝试了上面的 3 个 URL，但都不起作用。

**我也对config.php**感到好奇：

```
<?php

define("DB_HOST", "localhost");
define("DB_USER", "root");
define("DB_PASSWORD", "");
define("DB_DATABASE", "android_api");
?> 
```

我应该就这样离开 DB_PASSWORD 吗？因为我不知道/没有密码。

我在 android 2.2 模拟器上成功运行了这个应用程序[http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/ 。](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)

但是这个登录和注册应用程序出现问题。

这是我第一次开发android项目，希望有专业人士可以帮助我解决这个问题。我整整两天都在努力解决这个问题，但什么也没有。

我多次检查每个代码，但我不知道强制关闭的原因。

*请指导并告诉我真相。* *谢谢*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:17:37.707

**谢谢kishu27！**你让我专注于 URL，最后我找到了解决方案。

正确的网址是`"http://10.0.2.2/android_api/index.php"`

因为在 android_api 的文件夹中有另一个名为“include”和 index.php 的文件夹。我必须先连接到 index.php 才能登录和注册

我现在超级开心！！

# ruby-on-rails - 将工具提示添加到 link_to_unless_current 帮助器

> ID：14990073
> 
> 赞同：0
> 
> 时间：2013-02-20T21:16:19.457
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, tooltip

我尝试过类似的东西：

```
 <%= link_to_unless_current t('.en'), :locale => 'en', :rel => "tooltip", :title => "one title"%> 
```

我正在使用 twitter bootstrap ，我需要使用[twitter bootstrap tooltip](http://twitter.github.com/bootstrap/javascript.html#tooltips)。

**但它不起作用。**

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:21:39.383

您可以使用 jQuery 工具提示来获得更性感的视图：http: [//craigsworks.com/projects/qtip/](http://craigsworks.com/projects/qtip/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T03:05:49.557

根据[doc page](http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to_unless_current)，格式应为：

```
link_to_unless_current(name, options = {}, html_options = {}, &block) 
```

你有没有尝试过：

```
<%= link_to_unless_current t('.en', locale: 'en'), {}, { rel: "tooltip", title: "one title" } %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T09:46:03.057

这段代码对我有用：

```
<%= link_to_unless_current  t('.en'), {:locale => 'en'}, { rel: "tooltip", title: "one title" } %> 
```

问候！

# php - 社交引擎专辑

> ID：14990085
> 
> 赞同：1
> 
> 时间：2013-02-20T21:17:13.253
> 
> 标签：php, mysql, zend-framework, socialengine

我正在寻找一些帮助来确定用户在他们的相册中使用了多少空间。我知道我可以从会员级别获取空间限制。我假设我可以浏览engine4_album_photos 中的条目并将其加入engine4_storage_files？有没有人这样做过？

提前致谢。

# .net - 程序正在执行不再存在的代码

> ID：14990087
> 
> 赞同：3
> 
> 时间：2013-02-20T21:17:14.837
> 
> 标签：.net, vb.net

我有一个正在开发的 VB.Net 程序。我有一段代码可以将结果以 HTML 格式通过电子邮件发送给我。在某些时候，程序“卡住”并且没有在表单加载中执行任何代码更改。我已经从表单加载中完全删除了所有内容，但是它仍在执行通过电子邮件发送结果的代码。

什么会导致程序执行不存在的代码？

唯一存在的代码如下。但是它仍在填充数据集，并将结果通过电子邮件发送给我。

```
Dim TodayDt As DateTime = DateTime.Today
Dim Tomorrow As DateTime = DateTime.Today.AddDays(1)
Dim TodayEnd As DateTime
TodayEnd = Tomorrow.AddSeconds(-1)
Me.datasetTableAdapter.Fill(Me.dataset.set, TodayDt, TodayEnd)
Me.ReportViewer1.Refresh() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:31:33.913

执行干净然后重建项目。

构建以某种方式损坏，IDE 没有意识到源文件已更新，或者任何数量的其他问题以某种方式涉及以前的构建泄漏到新的构建中，这种情况并不少见。这些问题几乎总是可以通过摆脱以前构建的每一个最后痕迹来解决（即 Clean 通常会这样做；如果这不起作用，则有更严厉的措施，例如将代码从源代码控制再次拉到一个干净的目录中）然后重新编译。

这也是提请注意最近在您的编译过程中引入的任何问题的好方法。如果您的项目不再构建，您可能只是在运行旧版本，或者如果您遇到某种问题导致程序的一部分无法正常工作，那么让它无法正常工作比使用该依赖项的过时版本。

这些原则中的大多数适用于具有编译步骤的任何开发环境，尽管某些环境比其他环境更容易出错。

# javascript - jQuery为图像标签创建了不正确的元素

> ID：14990088
> 
> 赞同：5
> 
> 时间：2013-02-20T21:17:15.863
> 
> 标签：javascript, jquery, xml

我一直在使用 jQuery 创建 HTML 元素，然后将它们添加到 XML 文档中，如下所示：

```
var doc = $($.parseXML('<?xml version="1.0" encoding="UTF-8"?><root/>'));
var docRoot = doc.find("root");
var childEl = $("<child>");
docRoot.append(childEl);
var imageEl = $("<image>");
docRoot.append(imageEl);

var xmlString = doc.context.xml || 
                new XMLSerializer().serializeToString(doc.context);
$("#xml").text(xmlString); 
```

这是输出（在 Chrome 24 上）：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
  <child xmlns="http://www.w3.org/1999/xhtml"></child>
  <img xmlns="http://www.w3.org/1999/xhtml" />
</root> 
```

[这是 JSFiddle 链接。](http://jsfiddle.net/bMDNp/1/)不幸的是，我有两个问题。

1.  当我尝试创建一个名称为 like 的元素时`child`，它正确地创建了一个带有 tagName 的元素`child`。但是，如果我使用 name `image`，出于某种原因 jQuery 认为我想要创建一个`img`元素。如何阻止 jQuery 这样做？

2.  所有子元素都会自动添加属性`xmlns="http://www.w3.org/1999/xhtml"`，即使我生成的文档不是 XHTML 文档。我该如何阻止这种情况发生？

更新：

图像 tagName 问题似乎是 DOM 的问题，而不是 jQuery 的问题，如下[代码](http://jsfiddle.net/LTNp5/1/)所示：

```
var el = document.createElement("image");
$("#output").append(el.tagName); // Outputs "IMG" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T21:42:33.700

`image`是 的同义词`img`。`document.createElement('image')`实际上创建了一个`img`元素，就像我在[这个问题](https://stackoverflow.com/questions/14798449/is-this-a-bug-in-parsing-xml-using-jquery/14798694#14798694)中解释的那样。

尽管如此，所有的希望都没有丧失。当您将 HTML/XML 字符串传递给`jQuery`时，[第二个参数是](http://api.jquery.com/jQuery/#jQuery2)*要解析的元素的[*所有者文档。*](http://api.jquery.com/jQuery/#jQuery2)*

 *由于您在第一步中已经创建了一个 XML 文档对象，我相信

```
var imageEl = $("<image />", doc[0]); 
```

将使用`createElement`XML 文档的方法并创建正确的元素。

**注意：**在内部，[jQuery`jQuery.parseHTML`在传递这样的字符串时](https://github.com/jquery/jquery/blob/1.9.1/src/core.js#L129)使用，因此此方法可能并不总是有效。看起来 jQuery 始终使用传入的文档（上下文）。它当然应该适用于单个标签。

更安全（也许更容易？）可能只是使用：

```
var imgeEl = $(doc[0].createElement('image')); 
```*

# ios - Flex Mobile - 简单目录。iOS

> ID：14990090
> 
> 赞同：2
> 
> 时间：2013-02-20T21:17:21.393
> 
> 标签：ios, flash-builder, flex-mobile

只是移动开发中的新事物。我开始使用/学习 Flash Builder 4.6 并尝试为 iOS 做我的第一个测试应用程序

我想创建一个像简单目录一样工作的简单应用程序。基本上是一个可以显示的图像列表，只需移动手指即可在图像之间切换。从左向右移动将显示下一张图像，从右向左移动将显示上一张图像。

基本上与您在 Iphone / Ipad 上查看图片的方式相同

我需要为每个图像创建一个视图吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:50:58.723

这个 Flex 移动演示应用程序可能与您的示例重叠。

*   [Finnkino Movies 的演示应用程序](http://ptm.fi/?p=350)
*   [源代码 (FXP)](http://ptm.fi/projects/tabMovies/Movies.fxp)
*   [源代码 (ZIP)](http://ptm.fi/projects/tabMovies/Movies.zip)

> ![电影-0](../Images/d78d9e70101b9b9e132b3c18464876c8.png)
> 
> ![电影-1](../Images/8007c6d5ae6884367576d6672a3b20d6.png)
> 
> ![电影-2](../Images/48a1744d03128ca02d0a872d35428bcc.png)

您可能还想使用默认模板在 Flash Builder 中创建一个 Flex 移动应用程序来试验`ViewNavigator`.

参考：

*   [Finnkino Movies 的演示应用程序](http://ptm.fi/?p=350)
*   [在移动应用程序中定义视图](http://help.adobe.com/en_US/flex/mobileapps/WSa122979b4619725672e48c412a3e152164-7fff.html)
*   [在移动应用程序中定义转换](http://help.adobe.com/en_US/flex/mobileapps/WS8b1c39bd7e9fc36459dd44a012cbc814595-8000.html)

# mysql - 在 SQL 中，如何通过文本框中的任何用户输入来检索某条记录的数据。如何将用户输入变量发送到 SQL 语句

> ID：14990092
> 
> 赞同：0
> 
> 时间：2013-02-20T19:49:12.853
> 
> 标签：mysql, sql, database-design, asp-classic

我有简单的 HTML 代码

```
form method="post" action='Data.asp 
```

和

```
input type="text" name="UserInputData" size=20 
```

我想要的是文本框中的任何用户输入都应该存储到 Data.asp 页面中的一个变量中，我假设它是这样的：

```
<%
  ScriptUserInputData=request("UserInputData")
%> 
```

现在在 Data.asp 上，我也有如下的 select 语句：

```
select * from Data; 
```

在html界面上，当我点击提交按钮时，无论是否在文本框中输入任何内容，它都会显示数据表中存在的所有记录，这意味着它正在成功连接到数据库，我现在想知道如何根据用户在文本框中输入的内容显示此数据表中的记录。我做了很多研究，但我根本找不到。我尝试了很多不同的方法，例如`Select * from Data WHERE Column1=UserInputData`.

简而言之，我只想将用户输入值传递给选择查询，然后将其发送到数据库以获取输出，如果特定列或行包含用户输入的值等。

我是 VBScripting 和 SQL 的新手。请帮帮我。我花了很长时间才写下所有这些信息，以便您也能正确理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:24:08.810

最简单的方法（不是最好的方法）是这样做的：

```
<%
  ScriptUserInputData=request("UserInputData")
  sql = "select * from Data" 
  if ScriptUserInputData <> "" then
     sql = sql + " WHERE Column1 = '" + Replace(ScriptUserInputData,"'","''") + "'"
  end if
%> 
```

现在上面的内容很容易受到 SQL 注入的影响，您应该真正使用参数化查询。像这样的东西：

```
Set cmd = server.createobject("ADODB.Command")

cmd.ActiveConnection = yourconnection 
cmd.CommandText = "select * from Data WHERE Column1 = ?"
cmd.CommandType = adCmdText
cmd.CommandTimeout = 900 

set prm = cmd1.CreateParameter("@prm", 200, 1, 200, ScriptUserInputData )
cmd.Parameters.Append prm 
```

以上只是一个例子，但应该让你朝着正确的方向前进。

# c++ - Qt 中的“EXC_BAD_ACCESS”

> ID：14990097
> 
> 赞同：0
> 
> 时间：2013-02-20T21:17:35.720
> 
> 标签：c++, qt

基本上，下面是我的 main.cpp，当我尝试使用 Qt 的调试器运行它时，我得到“EXC_BAD_ACCESS”错误（“无法访问内存”）以及 main 第一行旁边的箭头（它说`Puzzle puzzle;`） . 我认为这可能是我的 Puzzle 类的问题，但是当我将该行移到其他地方时，我仍然遇到错误的访问错误，调试器在`main`. 是什么导致了这个错误？我的程序半小时前运行良好，然后开始抛出这个错误，我什至没有修改代码，因为它上次工作。此外，这是我在 C/C++ 中的第一个项目之一，所以我对垃圾收集并不完全熟悉。这可能与内存泄漏或内存分配错误有关吗？

```
#include <iostream>
#include <fstream>
#include <sstream>
#include <string>

#include "piece.h"
#include "puzzle.h"
#include "state.h"

using namespace std;

//function prototypes
Puzzle initPuzzle(string*, int);
int countWords(string);

//count the number of words (separated by white space) in a string
int countWords(string s){
    int words = 0;
    char * temp = new char[s.size() + 1];
    copy(s.begin(), s.end(), temp);
    temp[s.size()] = '\0';
    temp = strtok (temp, " ");
    while (temp != NULL){
        words++;
        temp = strtok (NULL, " ");
    }
    delete(temp);
    return words;
}

//first checks validity of input
//if error(s), display appropriate message & exit program
//otherwise, returninstance of puzzle class from input file
//params: lines = array of strings, each of which is a line from input... size = # of elems in 'lines'
Puzzle initPuzzle(string * lines, int size){
    //create instance of puzzle
    //if bad piece found, throw it out
    //if first piece (Z) is invalid, the next piece becomes goal piece
    //if there are 0 valid pieces, display error to user and exit program
    Puzzle ret;
    int rows, cols;
    if(size < 2){
        //not enough lines for valid input
        cout << "Error: Input too short" << endl << "Exiting program..." << endl;
        exit(0);
    }
    istringstream iss(lines[0]);
    if((iss >> rows >> cols) && countWords(lines[0])==2){
        ret.rows=rows;
        ret.cols=cols;
    } else {
        cout << "Error: Invalid first line" << endl << "Exiting program..." << endl;
        exit(0);
    }
    if(rows < 1 || cols < 1){
        cout << "Error: Invalid dimensions" << endl << "Exiting program..." << endl;
        exit(0);
    }

    //now check the rest of the lines (ie the pieces)
    for(int i=1; i<size; i++){
        Piece newPiece;
        int startRow, startCol, width, height;
        char direction;
        istringstream iss(lines[i]);
        if(countWords(lines[i])==5 && (iss >> startRow >> startCol >> width >> height >> direction)){
            //row is formatted correctly, create instance of Piece
            newPiece = Piece(startRow, startCol, width, height, direction); //validate this piece later... if valid, add to pieces
        } else {
            //invalid row... entire input is invalid
            cout << "Error: Invalid row(s)" << endl << "Exiting program..." << endl;
            exit(0);
        }
        //now validate temporary piece...
        //first make sure piece doesn't fall outside of grid
        if(newPiece.startRow < 1 || newPiece.startCol < 1 || newPiece.startRow-1 > (rows - newPiece.height) ||
                newPiece.startCol-1 > (cols - newPiece.width)){
            //newPiece goes over the edge of the puzzle grid
            cout << "Piece goes beyond grid... Throwing it out" << endl;
            continue;
        }
        if(newPiece.direction != 'b' && newPiece.direction != 'h' && newPiece.direction != 'v' && newPiece.direction !='n'){
            //newPiece has invalid direction
            cout << "Piece has invalid direction... Throwing it out" << endl;
            continue;
        }
        if(ret.pieceCount!=0 && ret.pieceOverlap(newPiece)){
            //current piece overlaps existing one
            cout << "Piece overlaps another piece... Throwing it out" << endl;
            continue;
        }
        //if loop iteration reaches this point, piece is valid and can be added to puzzle
        cout << "Piece is good!" << endl;
        ret.addPiece(newPiece);
    }
    if(ret.pieceCount == 0){
        //all pieces were invalid
        cout << "Error: Puzzle has no pieces" << endl << "Exiting program..." << endl;
        exit(0);
    }

    //now assign id's to the pieces...
    for(int i=0; i<ret.pieceCount; i++){
        if(i==0){
            ret.pieces[i].id = 'Z';
        } else {
            ret.pieces[i].id = i;
        }
    }

    return ret;
}

int main()
{
    Puzzle puzzle;                              //single instance of puzzle class... initialized later after input & piece verification
    string inputFile;                           //name of input file... provided by user
    string line;                                //single line from input file
    string * inputLines = new string[9000];     //array of lines from the input file
    ifstream infile;
    int size = -1;                              //size of inputLines array, initialized to -1

    cout << "Enter name of input file: ";
    cin >> inputFile;
    infile.open(inputFile.c_str());
    if(infile){
        while(infile){
            size++;
            getline(infile,line);
            inputLines[size] = line;
        }
        infile.close();
    } else {
        cout << "Error: Input file could not be opened" << endl << "Exiting program" << endl;
        exit(0);
    }

    puzzle = initPuzzle(inputLines, size);  //now check the input for validity, and if valid, initialize puzzle

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T21:22:52.357

一个错误（实际上是两个）在函数中`countWords()`：

*   `temp`使用创建`new[]`但释放使用`delete`，它必须是`delete[]`（`new`->`delete`和`new[]`->`delete[]`并尽可能避免显式动态内存管理）
*   的值`temp`不是最初分配的值，它在*ing*`delete[]`时必须是

[`std::istringstream`](http://en.cppreference.com/w/cpp/io/basic_istringstream)通过使用 a来计算单词，可以完全避免显式动态内存分配：

```
std::istringstream in(s);
std::string ignored;
while (in >> ignored) words++; 
```

其他要点：

*   更喜欢`std::vector`显式动态内存分配管理：

    ```
    std::vector<std::string> inputLines; // and use 'push_back()'. 
    ```

*   始终*立即*检查输入操作的结果以确保成功：

    ```
    if (cin >> inputFile)
    {
        ifstream infile(inputFile);
        if (infile)
        {
            std::string line;
            while (std::getline(infile, line)) lines.push_back(line);
        }
    } 
    ```

# scheme - 这个附加有什么问题？

> ID：14990104
> 
> 赞同：-1
> 
> 时间：2013-02-20T21:17:53.660
> 
> 标签：scheme, racket

Racket 因以下代码违反了合同：

```
(define (fringe x)
  (append (car x) (fringe (cdr x)))) 
```

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T21:23:14.307

`(car x)`发生这种情况是因为*没有*返回一个列表（如果不知道错误的实际值很难确定`x`）。`append`是在两个列表之间定义的操作。如果要在列表的头部添加一个*元素*`cons`，请使用而不是`append`.

这就是我的意思：

```
(append 1 '(2 3))
=> append: expected argument of type <proper list>; given 1

(append '(1) '(2 3))
=> '(1 2 3)

(cons 1 '(2 3)) ; the recommended way!
=> '(1 2 3) 
```

# javascript - 加载谷歌自定义搜索结果后调用函数？

> ID：14990108
> 
> 赞同：7
> 
> 时间：2013-02-20T21:18:07.717
> 
> 标签：javascript, jquery, google-search, google-search-api

在我的页面上呈现搜索结果后，我基本上需要运行一些 jQuery 代码。我可以使用 v1 代码：

```
<div id="cse" style="width: 100%;">Loading</div>
<script src="http://www.google.com/jsapi" type="text/javascript"></script>
<script type="text/javascript"> 
 google.load('search', '1', {language : 'en', style : google.loader.themes.V2_DEFAULT});
 google.setOnLoadCallback(function() {
var customSearchOptions = {};
var orderByOptions = {};
orderByOptions['keys'] = [{label: 'Relevance', key: ''},{label: 'Date', key: 'date'}];
customSearchOptions['enableOrderBy'] = true;
customSearchOptions['orderByOptions'] = orderByOptions;  var customSearchControl = new google.search.CustomSearchControl(
  'zzzzzzzzzzzz', customSearchOptions);
customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
var options = new google.search.DrawOptions();
options.setAutoComplete(true);
customSearchControl.setAutoCompletionId('zzzzzz:zzzzzzz+qptype:3');
options.enableSearchResultsOnly(); 
customSearchControl.draw('cse', options);
function parseParamsFromUrl() {
  var params = {};
  var parts = window.location.search.substr(1).split('\x26');
  for (var i = 0; i < parts.length; i++) {
    var keyValuePair = parts[i].split('=');
    var key = decodeURIComponent(keyValuePair[0]);
    params[key] = keyValuePair[1] ?
        decodeURIComponent(keyValuePair[1].replace(/\+/g, ' ')) :
        keyValuePair[1];
  }
  return params;
}

var urlParams = parseParamsFromUrl();
var queryParamName = "q";
if (urlParams[queryParamName]) {
  customSearchControl.execute(urlParams[queryParamName]);
}
  }, true);
</script> 
```

或 v2 代码：

```
<!-- Put the following javascript before the closing </head> tag. -->

<script>
    (function() {
var cx = 'xxxxxxxxx';
var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
    '//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
  })();
</script> 
```

我尝试将我的函数调用放在代码中的不同位置，但无济于事。

我有一个需要动态设置搜索结果出现的容器高度的函数，所以一旦结果加载我需要调用它，否则我的页面显示不正确。

这是他们的 v2 API 文档的链接：[https](https://developers.google.com/custom-search/docs/element#cse-element) ://developers.google.com/custom-search/docs/element#cse-element和 v1：[https ://developers.google.com/custom-search/docs/ js/cselement-reference](https://developers.google.com/custom-search/docs/js/cselement-reference)。我看不到任何在搜索结果呈现时有回调的地方，只有在初始化时。虽然不支持这样的东西，但似乎很疯狂。

这是我用 v2 尝试过的：

```
(function () {
        var cx = 'xxxxxxxxx';
        var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;

        gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
        gcse.onreadystatechange = gcse.onload = function () {
            console.log("executed");
            SetMainHeight(20);
        };
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);

    })(); 
```

控制台从不输出“已执行”。我还注意到在我的控制台中出现以下错误：

> 不安全的 JavaScript 尝试使用 URL about:blank from frame with URL [http://www.google.com/cse?q=test&client=google-coop&hl=en&r=s&cx=xxxxx](http://www.google.com/cse?q=test&client=google-coop&hl=en&r=s&cx=xxxxx) …s1%2Csr1&rurl=http%3A%2F访问框架%2Flocalhost%3A58257%2FSearch%3Fq%3Dtest#slave-1-1。域、协议和端口必须匹配。

不确定这是否重要，因为搜索功能仍然可以正常工作。我正在通过 http 在 localhost 上对此进行测试。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-05-12T23:37:13.013

以前的解决方案对我不起作用，但对我有用的是：

```
<script>
  (function() {

    window.__gcse = {
      callback: myCallback
    };

    function myCallback() {
       $('input.gsc-input').keyup(function(e) { if(e.keyCode == 13 || e.which == 13) {  console.log('enter pressed'); }});
      $('input.gsc-search-button').on('click', function(e) { console.log('clicked');});
    }
    var cx = '002806224466286757728:XXXXXXX';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = false;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T18:02:28.467

不幸的是 v2 没有这个能力，但在 v1 中你可以使用：

`.setSearchCompleteCallback(object, method)`

[您可以在此页面](https://developers.google.com/custom-search/docs/js/cselement-reference)上搜索它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:53:40.310

例如，对于 v2，尝试在将 gcse 对象（脚本）插入 DOM 之前为其设置 onload 处理程序。

```
gcse.onreadystatechange = gcse.onload = function() {
  //execute my code
}; 
```

基本上你最终得到：

```
<!-- Put the following javascript before the closing </head> tag. -->

<script>
    (function() {
var cx = 'xxxxxxxxx';
var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
    '//www.google.com/cse/cse.js?cx=' + cx;
gcse.onreadystatechange = gcse.onload = function() {
  //execute your code here
};
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
  })();
</script> 
```

# excel - 是否可以仅更改一个单元格的 Enter 键功能？

> ID：14990111
> 
> 赞同：1
> 
> 时间：2013-02-20T21:18:16.677
> 
> 标签：excel, excel-2010, enter

我在多个公式中引用的工作表上有一个单元格 (=$C$4)。我将它用作最终用户输入单元。

我试图避免在按下 Enter 后选择下一个单元格，以便用户可以输入值，按 Enter，查看结果，然后如果需要，用单元格中的新值替换内容并再次按 Enter 以查看不同的结果，而无需使用箭头-向上或再次单击单元格。

有没有办法为这个单元格更改 Enter 的功能，或者是否有人知道另一种解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:26:17.737

我曾经通过实现一个 VBA 子例程做了类似的事情。我认为子的签名是：

```
Private Sub Worksheet_Change(ByVal Target As Range) 
```

在正文中您需要做的就是检查当前单元格是否是 C4 下方的单元格，然后选择 C4，否则什么也不做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:26:34.443

您可以使用工作表保护来做到这一点：

*   *在“设置单元格格式”*对话框中解锁单元格 C4 （在“*保护”*选项卡中）
*   确保所有其他单元格都被锁定（它们是默认的）
*   右键单击工作表名称，单击*保护工作表*，取消选中*选择锁定单元格*，然后按确定

完毕！

如果由于某种原因这不适用，您可以使用此宏：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Not Intersect(Target, Me.Range("C4")) Is Nothing Then
        Me.Range("C4").Activate
    End If
End Sub 
```

您需要将此代码放在工作表的工作表模块中。按`Alt`-`F11`激活 Visual Basic 编辑器，双击左上角树视图中的工作表，然后将代码粘贴到主窗口中！

# assembly - 在 MIPS 中实现 toUpper 函数

> ID：14990112
> 
> 赞同：1
> 
> 时间：2013-02-20T21:18:19.653
> 
> 标签：assembly, converter, mips, toupper

所以我试图在 MIPS 中实现一种 toUpper 函数。该函数可以访问两个变量：$a0 是字符串的起始地址，$a1 是字符串的长度。我正在尝试遍历字符串并将其转换为大写。有谁知道我要去哪里错了？

我想我实际上无法将起始地址中的第一个字符加载到变量中。

```
to_upper:

    li $t0, 0 #initialize counter  
    li $t1, 0

Loop: 
    addi $t0, $t0, 1

    sgt $t5, $t0, $a1   
    beqi $t5, 1, Done   

    slti $t5, $t1, 97
    beqi $t5, 1, Loop

    sgti $t5,$t1, 122
    beqi $t5, 1, Loop

    subi $t1, $t1, 32

j Loop

    Done:
    jr $ra 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:02:15.993

最好放置

```
addi $t0, $t0, 1 
```

在循环结束时。

所以，像这样：

```
...
Loop:
    addi $t5, $a0, $t0
    lb $t6, 0($t5)
    ...set $t6 to upper...
    sb $t6, 0($t5)
    addi $t0, $t0, 1
    blt $t0, $a1, Loop
Done:
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:26:15.387

`$a0`在此代码中的任何地方都没有引用。您需要从`$a0`using加载值`lb`，修改它们，然后将它们存储回来。

# javascript - 每几秒只在 setInterval 函数中执行一次代码

> ID：14990117
> 
> 赞同：0
> 
> 时间：2013-02-20T21:18:56.560
> 
> 标签：javascript, jquery, timer, setinterval

我正在开发一个简单的 HTML 和 Javascript 项目；我的计时器有问题。

我正在计算两个`Date()`对象之间的秒数；每2秒，我想得到一个新的随机数。我有一个`setInterval`每 100 毫秒运行一次，当我超过 2 秒时，`if`语句中的代码应该运行。

所以我的问题是：
如何确保代码在每 100 毫秒运行一次的`if`语句中每 2 秒执行一次？`setInterval()`

这是代码：

```
var startTime = new Date();
var endTime = new Date();

var randomNumber = 0;

var gameTimer = setInterval(function(){
    //calculate seconds;
    var secondsPassed = Math.round( (endTime - startTime) / 1000 );

    if(modulo(secondsPassed,2) == 0){
        //when the "gate" is open this keep executing every 100 mili seconds.
       //but i want it to execute only once every 2 seconds.
        randomNumber = Math.floor(Math.random()*lanes.length);
        $(lanes[randomNumber]).append(box);
    }

    endTime = new Date();
}, 100);

var modulo = function (n, m) {
    var remain = n % m;
    return Math.floor(remain >= 0 ? remain : remain + m);
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T00:23:44.453

我认为您要的是双间隔计时器。

```
var interval = 100, beat = 2000, ticks = 0;
var timer = setInterval(function(){
    runsEvery100ms(); // ««« Code here runs every 100 ms.
    if (ticks > 0 && ticks % beat === 0) {
        runsEvery2000ms(); // ««« Code here runs every 2000 ms.
        ticks = 0;
    }
    ticks += interval;
}, interval); 
```

[**演示小提琴在这里。**](http://jsfiddle.net/onury/aQvVv/)

# tomcat - 在 Tomcat 中，如何将 URL 从以前的 WAR 文件重定向到另一个 WAR 文件？

> ID：14990120
> 
> 赞同：0
> 
> 时间：2013-02-20T21:19:05.480
> 
> 标签：tomcat, tomcat6

我有一个 Tomcat 服务器，其中部署了两个战争文件。这些应用程序是 REST 服务；我们称它们为**dummy.war**和**dummy-eu.war**。这使它们可以通过以下 URL 访问：

```
http://server/dummy/
http://server/dummy-eu/ 
```

我们最近做了一个改变，我们可以消除**dummy-eu.war**并只使用**dummy.war**。但是，我们有几个应用程序仍配置为使用**dummy-eu.war**。我们想删除**dummy-eu.war**，然后将 URL 指向它以使用**dummy.war**，这样：

```
http://server/dummy/
http://server/dummy-eu/ <- redirects to /dummy/ 
```

有谁知道我如何在Tomcat中完成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:22:43.540

Tomcat 没有开箱即用地提供此功能。您需要将一个最小的 Web 应用程序部署到 dummy-eu 来执行重定向。

# r - xtable 和标题对齐

> ID：14990121
> 
> 赞同：5
> 
> 时间：2013-02-20T21:19:05.893
> 
> 标签：r, latex, sweave, xtable

是否可以在 xtable 中使用与表格其余部分中使用的对齐方式不同的标题对齐方式？就我而言，我希望我的标题居中对齐，但表格本身应该右对齐。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T15:30:10.550

要在 LaTeX 中做到这一点，您将标题粘贴到一个`\multicolumn`东西中以指定您想要的对齐方式：

```
\begin{tabular}{rrr}
  \hline
 & \multicolumn{1}{c}{x} &\multicolumn{1}{c}{y} \\ 
  \hline
1 &   1 & 0.17 \\ 
  2 &   2 & 0.63 \\ 
  3 &   3 & 0.95 \\ 
  4 &   4 & 0.57 \\ 
  5 &   5 & 0.65 \\ 
   \hline
\end{tabular} 
```

该`print.xtable`函数使用`xtable`对象的名称作为标题。因此，如果您重命名`xtable`对象：

```
> d=data.frame(x=1:5,y=runif(5))  # sample data frame
> dx=xtable(d) # make an xtable
> names(dx)=c("\\multicolumn{1}{c}{x}","\\multicolumn{1}{c}{y}") 
```

那么大部分工作就完成了，您只需打印它覆盖以下的清理功能`print.xtable`：

```
> print.xtable(dx,sanitize.colnames.function=function(x){x})
% latex table generated in R 2.15.1 by xtable 1.7-0 package
% Thu Feb 21 15:28:11 2013
\begin{table}[ht]
\begin{center}
\begin{tabular}{rrr}
  \hline
 & \multicolumn{1}{c}{x} & \multicolumn{1}{c}{y} \\ 
  \hline
1 &   1 & 0.78 \\ 
  2 &   2 & 0.34 \\ 
  3 &   3 & 0.88 \\ 
  4 &   4 & 0.45 \\ 
  5 &   5 & 0.54 \\ 
   \hline
\end{tabular}
\end{center}
\end{table} 
```

否则它会

```
& $\backslash$multicolumn\{1\}\{c\}\{x\} & $\backslash$multicolumn\{1\}\{c\}\{y\} \\ 
```

怎么样？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-31T19:20:04.973

只是为了跟进 Spacedman 的回答（因为我没有名气，所以无法添加评论；）

而不是这样做，`sanitize.colnames.function=function(x){x}`你可以这样做：

```
sanitize.colnames.function=function(x){paste0("\\multicolumn{1}{c}{",x,"}")} 
```

这样您就可以跳过重命名步骤。如果您做/想要做其他标题“美化”，它们应该`paste0`在逗号之前或之间完成（如果很短）

# javascript - 图像向右旋转

> ID：14990125
> 
> 赞同：0
> 
> 时间：2013-02-20T21:19:44.787
> 
> 标签：javascript

我在一个 HTML 页面中有 4 个图像：1.png、2.png、3.png 和 4.png。我希望当用户单击图像 3 时，执行各种图像右侧的旋转。（将图像 1 替换为图像 3，将图像 2 替换为图像 1，将图像 4 替换为图像 2，将图像 3 替换为图像 4）。

这是我尝试过的代码，但它不起作用：

```
<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <script type="text/javascript">

            function rotation()
            {
                img1 = document.getElementById('img1');
                img2 = document.getElementById('img2');
                img3 = document.getElementById('img3');
                img4 = document.getElementById('img4');

                img2.parentNode.appendChild(img4);
                img1.parentNode.appendChild(img2);
                img3.parentNode.appendChild(img1);
                img4.parentNode.appendChild(img3);

            }
        </script>
        <style type="text/css">
            table
            {
                margin-left:auto;
                margin-right:auto;
            }
        </style>
    </head>
    <body>
        <table class="centrer">
            <tr>
                <td><img src="exercice1/1.png" alt="Image 1" id="img1"></td>
                <td><img src="exercice1/2.png" alt="Image 2" id="img2"></td>
            </tr>
            <tr>
                <td><img src="exercice1/3.png" alt="Image 3" id="img3" onclick="rotation()"></td>
                <td><img src="exercice1/4.png" alt="Image 4" id="img4"></td>
            </tr>
        </table>
    </body>
</html> 
```

问题是当我第一次单击图像 3 时，图像的顺序如下：

```
2
1  3  4 
```

第二次他们这样排序：

```
2  1  3  4 
```

我希望他们像这样订购：

旋转前：

```
1  2
3  4 
```

旋转后：

```
3  1
4  2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:46:11.253

改为更改`src`属性。像这样：

```
function rotation()
{
    img1 = document.getElementById('img1');
    img2 = document.getElementById('img2');
    img3 = document.getElementById('img3');
    img4 = document.getElementById('img4');

    src1 = img1.src;
    src2 = img2.src;
    src3 = img3.src;
    src4 = img4.src;

    img2.src = src4;
    img1.src = src2;
    img3.src = src1;
    img4.src = src3;
} 
```

[http://jsfiddle.net/gJK8D/2/](http://jsfiddle.net/gJK8D/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:29:35.897

而发生了什么？我的猜测是元素的 parentNode 在您移动它们时会发生变化：

```
<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <script type="text/javascript">

            function rotation()
            {
                var img1 = document.getElementById('img1'),
                    img2 = document.getElementById('img2'),
                    img3 = document.getElementById('img3'),
                    img4 = document.getElementById('img4'),
                    cont1 = img1.parentNode,
                    cont2 = img2.parentNode,
                    cont3 = img3.parentNode,
                    cont4 = img4.parentNode;

                cont2.appendChild(img4);
                cont1.appendChild(img2);
                cont3.appendChild(img1);
                cont4.appendChild(img3);

            }
        </script>
        <style type="text/css">
            table
            {
                margin-left:auto;
                margin-right:auto;
            }
        </style>
    </head>
    <body>
        <table class="centrer">
            <tr>
                <td><img src="exercice1/1.png" alt="Image 1" id="img1"></td>
                <td><img src="exercice1/2.png" alt="Image 2" id="img2"></td>
            </tr>
            <tr>
                <td><img src="exercice1/3.png" alt="Image 3" id="img3" onclick="rotation()"></td>
                <td><img src="exercice1/4.png" alt="Image 4" id="img4"></td>
            </tr>
        </table>
    </body>
</html> 
```

# java - 生活问题游戏

> ID：14990126
> 
> 赞同：0
> 
> 时间：2013-02-20T21:19:45.737
> 
> 标签：java

我不确定我是否以正确的方式进行此操作，我创建了适用于所有“静物”单元格排列的代码，即。蜂巢、块、船和面包。但是，对于应该被操纵并涉及细胞死亡和出生的安排，我遇到了问题。

现在我首先创建单元格，然后杀死任何符合规则的单元格（如果周围的邻居总数小于或等于 1，则等于或大于 4）。

我现在要做的事情，并没有按照它应该的方式工作。我将在我的代码下方包含一些图像：

```
public class Untitled {
    public static void main(String[] params){
        Life life = new Life();
        String[][] list = life.readGame();

        life.print(list);
        System.out.println();

        for(int i = 1; i <= 5; i++){
            list = life.run(list);
            life.print(list);
            System.out.println();
        }
    }
}

class Life {
    public String[][] readGame(){
        String[][] array = {
                { "-","-", "-", "-", "-", "-","-"},
                { "-","-", "-", "-", "-", "-","-"},
                { "-","-", "-", "x", "-", "-","-"},
                { "-","-", "-", "x", "-", "-","-"},
                { "-","-", "-", "x", "-", "-","-"},
                { "-","-", "-", "-", "-", "-","-"},
                { "-","-", "-", "-", "-", "-","-"}
        };
        return array;
    }

    public void print(String[][] array){
        for(int x = 0; x < array.length; x++){
            for(int y = 0; y < array[x].length; y++){
                System.out.print(array[x][y]);
            }
            System.out.println();
        }
    }

    public String[][] run(String[][] array){
        populateCells(array);
        System.out.println("Populated:\n");
        print(array);
        killCells(array);
        System.out.println("Killed:\n");
        print(array);
        return array;
    }

    public int amountOfNeighbors(String[][] array, int x, int y){
        int amount = 0;

        for(int x1 = -1; x1 <= 1; x1++){
            if(x + x1 >= 0 && x + x1 < array.length){
                for(int y1 = -1; y1 <= 1; y1++){
                    if(y + y1 >= 0 && y + y1 < array[x1 + x].length){
                        if(!(x1 == 0 && y1 == 0) && !array[x1 + x][y1 + y].equals("-")){ 
                            amount++;
                        }
                    }
                }
            }
        }
        return amount;
    }

    public void populateCells(String[][] array){
        int neighbours;

        for(int x = 0; x < array.length; x++){
            for(int y = 0; y < array[x].length; y++){
                neighbours = amountOfNeighbors(array,x,y);

                if(neighbours == 3){
                    array[x][y] = "x";
                }
            }
        }
    }

    public void killCells(String[][] array){
        int neighbours;

        for(int x = 0; x < array.length; x++){
            for(int y = 0; y < array[x].length; y++){
                neighbours = amountOfNeighbors(array,x,y);

                if(neighbours <= 1 || neighbours >= 4){
                    array[x][y] = "-";
                }
            }
        }
    }
} 
```

至于图像，这是一个简单的闪烁结构，以及在填充和删除细胞后会发生什么：

![1](../Images/3b7e86d0feb83ce6b86d02c78c0d13ea.png)

![2](../Images/b5219437b5040de7f8e8f86b0d1da84d.png)

![3](../Images/225aa24c515798834fbad208ce301706.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T21:27:45.397

每次调用时，`run()`您都需要创建原始电路板的副本，并在修改原始电路板中的单元格时使用该副本检查每个单元格的状态。

否则，每次更新单元格时，您都会无意中更改其周围单元格的状态。

这是涉及游戏板（如 Game of Life）的模拟中相当常见的错误 - 所以现在您知道要提防它 :)

# sql - 使用 ISNULL 或“喜欢”

> ID：14990128
> 
> 赞同：1
> 
> 时间：2013-02-20T21:19:56.197
> 
> 标签：sql, sql-server, tsql

我有一个存储过程，它接受一些可能为 NULL 或可能不是的参数。

如果我有一个明确的参数值，我可以使用 ISNULL 选项，但如果我想使用“LIKE”而不是 null，我不知道该怎么做。见下文：

参数是：

```
@org_id as int,
@deleted as bit = NULL,
@firstname as char = NULL,
@lastname as char = NULL 
```

选择语句是：

```
select user_id, firstname,lastname,firstname +' ' + lastname as fullname, email, phone,     is_tech, is_admin,is_cust
from users 
where users.org_id=@org_id and is_tech=1 and delete_flag=ISNULL(@deleted,delete_flag)
order by lastname,firstname asc 
```

如果名字和姓氏参数不为空，而是一个字符，例如“J”，我该如何编写类似于 delete_flag 子句的内容..和名字如 'J%' 但如果不使用 null？

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T21:22:19.753

你可以使用这个：

```
WHERE field LIKE @param OR @param IS NULL 
```

# java - 如何让子类覆盖父类的值，但使用父类的方法

> ID：14990129
> 
> 赞同：0
> 
> 时间：2013-02-20T21:19:56.877
> 
> 标签：java, inheritance, overriding, overwrite

抱歉，如果之前已发布过此内容，我只会得到覆盖相反方式的结果。

我希望能够做两件事：

1.  在为子变量赋值时，从子类引用父变量。
2.  让引用此变量的成人类中的方法使用子类值。这样，我可以有很多子类，但方法的重复代码不一样。

这是我的意思的一个超级简单的伪示例：

**子班：**

```
public class ChildClass extends AdultClass {
    static int a=super.a+1;
} 
```

**成人班：**

```
public class AdultClass {
    static int a=5;
    static public int getA() {
        return a;
    }
} 
```

**使用 ChildClass 对象的类：**

```
public class ClientClass {
    public static void main(String[] args) {
        ChildClass.a <-I want this to =6
        ChildClass.getA() <-I want this to return 6
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:25:05.667

如果您想利用 Java 的多态性，则必须涉及类**实例**。静态成员不能显示多态行为，您显然需要`AdultClass.getA()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:35:39.697

然后简单地使成员成为受保护的成员，并将其用作孩子自己的成员。

这个链接也可能有用。 [为什么超类的实例变量在子类方法中没有被覆盖](https://stackoverflow.com/questions/12086298/why-instance-variable-of-super-class-is-not-overridden-in-sub-class-method)

# php - getTraceAsString() 打印为一整行

> ID：14990133
> 
> 赞同：4
> 
> 时间：2013-02-20T21:20:04.583
> 
> 标签：php, string, exception, stack-trace

我正在使用 php 方法[getTraceAsString()](http://www.php.net/manual/en/exception.gettraceasstring.php)它将打印出我的错误消息，例如：

```
#0 /var/www/wordpress/wp-content/themes/Aisis-Framework/AisisCore/Template/Builder.php(147): AisisCore_Template_Builder->_render_template_array(Array, 'navigation') #1 /var/www/wordpress/wp-content/themes/Aisis-Framework/index.php(3): AisisCore_Template_Builder->render_view('navigation') #2 /var/www/wordpress/wp-includes/template-loader.php(47): include('/var/www/wordpr...') #3 /var/www/wordpress/wp-blog-header.php(16): require_once('/var/www/wordpr...') #4 /var/www/wordpress/index.php(17): require('/var/www/wordpr...') #5 {main} 
```

如您所见，是一根巨大的绳子。他们给出的示例将跟踪打印为单独的行。有什么我必须做的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T21:24:31.767

这是一个带有换行符的字符串，而不是 HTML。查看页面的源代码。

将输出包装在`<pre></pre>`标签中或用 HTML 换行符替换换行符。

```
preg_replace("/\n/", '<br>', $trace); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-11T13:28:10.353

我为 ZF2 错误日志制作了一些功能，以及 **$e->getTraceAsString();的格式。**

希望这可以帮助你。

```
public function Errorcatch(\Exception $e) {
        $log = "<div class='error_main'>";
            $log.= "<br /><b>Error Time :</b>" . date('Y-m-d H:i:s A');
            $log.= "<br /><b>Error Code :</b>" . $e->getCode();
            $log.= "<br /><b>Error Message :</b>" . $e->getMessage();
            $log.="<br /><b>Error File :</b>" . $e->getFile();
            $log.="<br /><b>Error File Line :</b>" . $e->getLine();
             $log.="<br /><b>Error Trace :</b><br />" . preg_replace("/\n/", '<br>', $e->getTraceAsString());
        $log.= "</div>";
        $this->getServiceLocator()->get('Zend\Log')->info($log); // This line write the log file.
    } 
```

# git - 将项目转移到 git？

> ID：14990135
> 
> 赞同：0
> 
> 时间：2013-02-20T21:20:08.697
> 
> 标签：git, project, transfer

我在本地机器上有一个项目，在远程服务器上有一个 git 存储库。有没有办法可以将此项目推送/提交/传输到远程服务器？它告诉我“不是 git 存储库”，我知道！我只希望它在远程服务器上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T21:29:06.843

您可以`clone`将远程 repo 复制到本地计算机上，将文件复制到目录中， `add`将新文件、`commit`它们和`push`它们复制回远程服务器。

```
cd /to/some/directory
git clone [uri] 
```

然后将文件复制到目录中

```
git add -A
git commit -m "Added local project files"
git push origin master 
```

假设你知道 git，你应该能够让它工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:25:26.350

该项目是 git repo 吗？如果没有，您需要首先将其初始化为本地计算机上的 git 存储库，确保所有项目文件都已提交，然后将项目文件推送到远程存储库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T05:40:06.103

您的远程存储库必须是裸存储库。否则你不能推送到这个远程仓库。要创建它，只需传递选项 bare: `git init --bare`。

# django - 后续查询需要 django 查询 select_related 吗？

> ID：14990137
> 
> 赞同：1
> 
> 时间：2013-02-20T21:20:09.633
> 
> 标签：django, optimization

给定以下代码：

```
 progresses = Progress.objects.filter(customer=request.user).select_related()
    if id is not None
        progress = progresses.get(pk=id)
    else:
        progress = progresses[0] 
```

我是否需要将 select_related() 添加到第二个查询中，例如`progress = progresses.filter(pk=id).select_related()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:27:41.870

不，您的`progress`查询集对象已经具有包含在基础 sql 中的外键关系。它正在创建一个带有连接的选择查询。进一步过滤它不会删除连接。

[文档](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#select-related)中有一个示例进一步处理包含`select_related`（尽管不使用`filter`）的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-23T10:56:49.890

> filter() 和 select_related() 链接的顺序并不重要。这些查询集是等效的：
> 
> ```
> Entry.objects.filter(pub_date__gt=timezone.now()).select_related('blog')
> Entry.objects.select_related('blog').filter(pub_date__gt=timezone.now()) 
> ```

来自官方 Django 文档：[https ://docs.djangoproject.com/en/1.9/ref/models/querysets/](https://docs.djangoproject.com/en/1.9/ref/models/querysets/)

# f# - 静态类型变量、成员约束、编译器错误？（“尝试将其解析为操作员名称，但失败”）

> ID：14990142
> 
> 赞同：4
> 
> 时间：2013-02-20T21:20:18.977
> 
> 标签：f#, inline, f#-3.0

编译：

```
let inline f< ^T when ^T : (static member (<<<) : ^T * int -> ^T) > (x : ^T) = x <<< 1 
```

不编译：

```
let inline f< ^T when ^T : (static member (>>>) : ^T * int -> ^T) > (x : ^T) = x >>> 1 
```

错误：

1.  尝试将其解析为操作员名称，但失败
2.  成员签名中出现意外符号“>”。应为 ')' 或其他标记。
3.  类型参数缺少约束“当 ^T : (静态成员 ( >>> ) : ^T * int32 -> ^T)”

添加空格无济于事；此行产生相同的编译器错误：

```
let inline f< ^T when ^T : (static member ( >>> ) : ^T * int -> ^T) > (x : ^T) = x >>> 1 
```

我已经搜索了文档和规范，但无济于事。这是一个错误吗？有没有办法`>`在成员签名中包含字符？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T21:29:55.117

当然看起来像一个错误。这很难看，但一种解决方法是使用运算符名称的长形式：

```
let inline f< ^T when ^T : (static member op_RightShift : ^T * int -> ^T)> (x : ^T) =
    x >>> 1 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-20T21:38:09.990

你甚至需要一个明确的约束吗？这同样有效：

```
let inline f (x: ^T) : ^T = x >>> 1 
```

# ios - Objective c 离开页面时应该清除谷歌地图吗？

> ID：14990145
> 
> 赞同：1
> 
> 时间：2013-02-20T21:20:40.073
> 
> 标签：ios, objective-c, google-maps

我注意到谷歌地图占用的内存非常高，我把它放在 tabnav 的一个标签上。我的问题是，当您离开选项卡时隐藏地图（以释放一些内存）然后在您回来时重新初始化它是一个好主意吗？还是最好让它继续运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T21:26:58.723

在以前的项目中，我已经初始化了 viewdidload 中的任何组件（检查是否已经初始化，因为它可以被多次调用），然后在 view 内部会出现做同样的检查（因为交换标签可能/可能不会再次调用 viewdidload，并且组件可能已被下面的代码释放）然后最终在内部：

```
- (void)didReceiveMemoryWarning {

} 
```

我将取消分配/清除任何可以处理的属性，以防操作系统决定其内存不足。就我个人而言，我不会费心将谷歌地图从内存中清除，因为它们需要时间来初始化，所以如果操作系统不需要清除它们，它不会减慢您的应用程序。

# php - PHP if() 状态持续评估为真，即使它不是

> ID：14990149
> 
> 赞同：0
> 
> 时间：2013-02-20T21:20:46.330
> 
> 标签：php, function, if-statement

我在解决这个问题时遇到了最艰难的时期，但我似乎找不到答案。

这就是我想要做的：根据部分，我的网站上有不同的导航菜单。我已经预先构建了不同的变体，并在每个页面上声明 $linkbox_array，这是我在该页面上的导航菜单的链接数组。在某些页面上，我水平显示，而在其他页面上垂直显示。垂直时，我需要在堆叠的链接框底部添加免责声明。

所以我的函数试图这样说：如果 $linkbox_array 是 $general_linkboxes 并且 $bodyClass 是“withSidebar”，则在数组项 2 之后回显免责声明。否则，只需回显数组项。

所以这就是我写的（如果它很糟糕，请原谅我，我是新手）：

```
function display_linkboxes($array) {
    if ($linkbox_array == $general_linkboxes && $bodyClass = "withSidebar") {
        foreach ($array as $linkbox) {
            if ($linkbox == $array[2]) {
                echo $linkbox;
                global $general_disclaimer;
                echo $general_disclaimer;
            } else { 
                echo $linkbox;  
            } 
        }
    } else {
        foreach ($array as $linkbox) {
            echo $linkbox;  
        }
    }
} 
```

问题在于，即使这两个条件不成立，它也会不断吐出 $general_disclaimer。我试图解构这个函数并找出我哪里出错了，我意识到我的 if 语句总是评估为 true，即使我加入了胡言乱语。例如：

```
function display_linkboxes($array) {
    if ($linkbox_array == $askjfdalfjk) {
        foreach ($array as $linkbox) {
            echo $linkbox;
        }
    }
} 
```

即使 $askjfdalfjk 不存在，这也会评估为 true 并显示链接。然后我在下面遇到了相反的问题。即使 if 语句的计算结果为 true，这也不会显示链接：

```
function display_linkboxes($array) {
    if ($bodyClass == "withSidebar") {
        foreach ($array as $linkbox) {
            echo $linkbox;
        }
    }
} 
```

我到底做错了什么？！？！任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:25:46.223

您的 if 条件只需要一些重构：

```
if(($linkbox_array == $general_linkboxes) && ($bodyClass == "withSidebar")) {} 
```

单个 '=' 是一个赋值操作，并且总是评估为真。

A == 是您正在寻找的条件等于操作。

此外，如果您正在检查数组是否相等并且顺序对您很重要，那么您应该使用 '===' 运算符，它不仅检查相同的元素，而且检查相同的顺序

最后，您有一个范围问题 - 如果您的链接框数组评估为等于一个空变量，那么它还没有被定义。您可以使用[print_r()](http://php.net/manual/en/function.print-r.php)操作来检查这一点。如果数组是在函数外部定义的，那么您应该将它作为参数传递给函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:26:04.210

可能你设置`$linkbox_array`在你的函数之外，然后你的函数不知道它，除非你......

```
function display_linkboxes($array) {
     global $linkbox_array; // <------ now the variable exists within the function.
     if ($linkbox_array == $askjfdalfjk) {
         foreach ($array as $linkbox) {
             echo $linkbox;
         }
     }
 } 
```

与`$bodyClass`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T21:24:29.580

在您的代码中：

```
function display_linkboxes($array) {
    if ($linkbox_array == $general_linkboxes && $bodyClass = "withSidebar") {
... 
```

$linkbox_array、$general_linkboxes 和 $bodyClass 不在此函数的范围内，这意味着它们彼此相等，因为它们都不存在。您需要将它们作为变量传递给函数（推荐），或者将代码更改为以下内容：

```
function display_linkboxes($array) {
    global $linkbox_array, $general_linkboxes, $bodyClass;
    if ($linkbox_array == $general_linkboxes && $bodyClass == "withSidebar") {
... 
```

我已编辑此答案以包含 = -> == 修复 $bodyClass

# python - SWIG 如何包装缓冲区（字符数组）和从 C 到 Python 的指针？

> ID：14990151
> 
> 赞同：1
> 
> 时间：2013-02-20T21:20:50.603
> 
> 标签：python, c, swig

Swig 的手册让我有点困惑。我将我的 C 库包装到 python，以便我可以在 python 中测试我的 C 代码。现在我想知道如何在 Python 中访问 C 指针地址，例如，这是我的代码

```
typedef struct _buffer_t {
char buf[1024];
char *next_ptr;
} buffer_t;

void parse_buffer(buffer_t * buf_p) {
    buf_p -> next_ptr ++;
} 
```

我想做的是在下面，用 C 代码

```
buffer_t my_buf;
my_buf.next_ptr = my_buf.buf;
parse_buffer(&my_buf);
expect_equal(&(my_buf.buf)+1, my_buf.next_ptr); 
```

我如何在 Python 中做同样的事情？导入 SWIG 包装模块后，我在 python 中有 buffer_t 类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:12:39.307

问题是 SWIG 试图将缓冲区包装为 Python 中的字符串，而不仅仅是一个指针。for 的合成赋值`next_ptr`将分配内存并制作字符串副本，而不仅仅是进行指针赋值。您可以通过多种方式解决此问题。

最简单的就是`%extend`在 Python 中使用添加一个“reset buffer”方法：

```
%extend {
  void resetPtr() {
    $self->next_ptr=$self->buf;
  }
} 
```

然后可以在 Python 中调用它来进行你想要的分配。

或者，如果您想强制将缓冲区视为另一个指针，您可以强制 SWIG 将这两个成员视为`void*`而不是`char*`and `char[]`。我曾希望这会像`%apply`每个类型一样简单，但在我的测试中，memberin 和 memberout 似乎无法正常工作：

```
%apply void * { char *next };
%apply void * { char buf[ANY] }; 
```

鉴于 memberin/memberout 类型映射对于完成这项工作至关重要，我认为这`%extend`是迄今为止最干净的解决方案。

# delphi - 高分辨率 exe 图标导致 Windows 桌面快捷方式出现低分辨率图标

> ID：14990152
> 
> 赞同：2
> 
> 时间：2013-02-20T21:20:50.853
> 
> 标签：delphi, windows-7, delphi-6, desktop-shortcut

我有一个带有 16x16 图标的 Delphi 6 应用程序。最近我制作了它的 64x64 版本并重新编译了应用程序。

当我运行应用程序时，这个高分辨率图标会显示在 Windows 7 Superbar 和任务管理器中。它显示在 .exe 文件属性中。

但是当我在桌面上创建一个快捷方式时，它会显示一个拉伸的低分辨率图标（16x16）。当我转到此快捷方式的属性时 - 它显示了 64x64 版本。要在快捷方式上显示高分辨率图标，我必须转到快捷方式图标的属性，单击唯一可用的高分辨率图标，单击“确定”和“应用”并执行此序列两次。

如果我删除快捷方式并尝试再次创建它，它会再次显示 16x16 图标，直到我分配该图标两次。

我专门研究了 .res 文件 - 只有一个图标。

我已经清除了图标缓存，注销并登录。仍然没有改变行为。这种行为可以在其他装有 Windows 7 的计算机上重现。

我不知道发生了什么。它是从高分辨率制作低分辨率版本还是将以前的版本缓存在某个地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T21:52:42.447

打开命令提示符窗口并输入：

```
taskkill /IM explorer.exe /F
DEL "%localappdata%\IconCache.db" /A
shutdown /r /f /t 00 
```

这将重建图标缓存，这很可能是问题的根源。请注意，最后一个命令将关闭并重新启动计算机，因此请确保在执行命令之前保存所有数据。

# javascript - 搜索功能有问题

> ID：14990153
> 
> 赞同：0
> 
> 时间：2013-02-20T21:20:50.537
> 
> 标签：javascript, regex, loops, match

```
function Todo(id, task, who, dueDate) {
    this.id = id;
    this.task = task;
    this.who = who;
    this.dueDate = dueDate;
    this.done = false;
}    

// more code that adds the todo objects to the page and to the array todos

function search() {
    for (var i = 0; i < todos.length; i++) {
        var todoObj = todos[i];
        console.log(todoObj.who); //shows both jane and scott
        console.log(todoObj.task); // shows both do something and get milk
    }
    var searchTerm = document.getElementById("search").value;
    searchTerm = searchTerm.trim();
    var re = new RegExp(searchTerm, "ig");
    var results = todoObj.who.match(re);
    if (searchTerm == null || searchTerm == "") {
        alert("Please enter a string to search for");
        return;
    } else {
        alert(results);
    }
} 
```

这是一个搜索功能，我试图将用户在搜索栏中输入的内容与我之前在代码中创建的对象进行匹配。它们必须与我为对象提供的“谁”和“任务”参数相匹配。所以一个对象是谁：简任务：做某事，另一个对象是谁：斯科特任务：拿牛奶。问题是，在我上次的警报中，我只能匹配 scott 而不是 jane。斯科特是我添加的最后一个。有什么方法我需要修改我的循环或更改我的搜索条件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:33:12.727

您的问题是您正在遍历这些项目，然后`todoObj`在该循​​环之后使用。所以`todoObj`只会保存数组中的最后一项。你需要重新组织一下......尝试这样的事情：

```
function search() {
    var searchTerm = document.getElementById("search").value;
    searchTerm = searchTerm.trim();

    if (searchTerm == null || searchTerm == "") {
        alert("Please enter a string to search for");
        return;
    } else {
        var todoObj = undefined,
            results = undefined,
            re = new RegExp(searchTerm, "ig");

        for (var i = 0; i < todos.length; i++) {
            todoObj = todos[i];
            results = todoObj.who.match(re);
            if (results) {
                alert("You found " + todoObj.who + ", who needs to " + todoObj.task + " by " + todoObj.dueDate);
                return;
            }
            console.log(re.lastIndex);
        }

        alert("You didn't match anyone");
    }
} 
```

Here's an example of it working as I think you want it to: [http://jsfiddle.net/sHSdK/2/](http://jsfiddle.net/sHSdK/2/)

# ajax - JQuery Ajax，我如何不重复我的代码？

> ID：14990161
> 
> 赞同：0
> 
> 时间：2013-02-20T21:21:45.003
> 
> 标签：ajax, jquery

我有这个代码：

我希望它默认做一些事情，基本上当您查看页面时，它会发出 ajax 请求并显示所有数据。

但是当您单击链接时，它会显示特定数据。

但是如何在不重复代码的情况下做到这一点。

例子：

```
 // when click on the link

    $('a').click( function(){

    $.getJSON('file.ext', function( data ){

         //same code

    });

    });

    // when the page is loaded
    $.getJSON('file.ext', function( data ){

         //same code

    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T21:25:19.520

只需将您的调用包装`.getJSON()`在从两个位置调用的函数中即可。

```
// Define function
function getData() {
    $.getJSON('file.ext', function( data ){ ... });
}

// Call on click
$('a').click(function () {
    getData();
});

// Call on load
getData(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:24:54.680

只需创建一个函数，一次编写，多次使用。

```
$('a').click( function(){
    $.getJSON('file.ext', function( data ){
         customFunction();
    });
});

// when the page is loaded
$.getJSON('file.ext', function( data ){
     customFunction();
});

customFunction = function () {
    //code
}; 
```

# r - R：read.csv 解析日期

> ID：14990164
> 
> 赞同：1
> 
> 时间：2013-02-20T21:21:49.460
> 
> 标签：r, parsing, datetime

R 中的函数`read.csv`允许您传入 colClasses 以加快解析过程。您可以通过的课程之一是`Date`. 我的数据文件有一个格式为日期列`%m/%d/%Y`- 通常我使用 将其作为字符向量读入`read.csv`，然后在完成后我使用`as.Date(foo, "%m/%d/%Y")`.

有没有办法将自定义日期格式传递给`read.csv`以便可以在内部完成日期转换`read.csv`？

# joomla - Joomla - K2 中保存新项目的标题和别名的代码在哪里

> ID：14990175
> 
> 赞同：2
> 
> 时间：2013-02-20T21:22:48.833
> 
> 标签：joomla, joomla2.5, joomla-k2

我查看了 administrator\components\com_k2 文件夹中的所有位置，但找不到在 K2 中保存新项目\文章的代码。我检查了模型文件夹下的 item.php 文件。没运气。

我需要覆盖 K2 项目保存方法。

我需要知道将项目的标题和别名保存到#__K2_content 表中的确切方法。

我必须在保存和删除垃圾/删除时复制 joomla 文章中的 K2 项目。

我已经成功地覆盖了 K2 核心代码。但是我找不到正确的代码来覆盖。（覆盖方法在[这里](https://stackoverflow.com/questions/14966202/joomla-overriding-getitem-method)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T15:40:13.087

存储 K2 项目的表（至少在最新的 K2 版本 - 2.6.5 中）是`#__k2_items`，而不是 #__k2_content。

我浏览了代码，看起来 K2 使用了 Joomla 的方法：请参阅 administrator/components/com_k2/controllers/item.php - 第 24 行：函数 save()。一切都是从 Joomla 类扩展而来的。

```
class K2ControllerItem extends K2Controller
{

    public function display($cachable = false, $urlparams = array())
    {
        JRequest::setVar('view', 'item');
        parent::display();
    }

    function save()
    {
        JRequest::checkToken() or jexit('Invalid Token');
        $model = $this->getModel('item');
        $model->save();
    }
    .....
} 
```

K2 控制器：/administrator/components/com_k2/controllers/controller.php

```
...
else if (version_compare(JVERSION, '2.5', 'ge'))
{
    class K2Controller extends JController
    {
        public function display($cachable = false, $urlparams = false)
        {
            parent::display($cachable, $urlparams);
        }

    }

}
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:12:32.913

@Shaz，你给了我正确的研究方向。

在 com_k2\controllers\item.php`$model->save();`中保存数据。

函数 save() 位于 com_k2\models\item.php 文件中，其中有两行捕获数据。

```
$row = JTable::getInstance('K2Item', 'Table'); 
```

这将启动 $row，而

```
if (!$row->bind(JRequest::get('post'))) 
```

这将填充 $row。

所以现在 $row 包含所有变量值。

现在，这`if (!$row->store())`保存了数据。

我将使用 $row 为 Joomla 保存相同的内容！com_content 中的文章。

感觉不错 ：）

# c++ - 控制台关闭时来自 GUI 应用程序的 AttachConsole

> ID：14990176
> 
> 赞同：2
> 
> 时间：2013-02-20T21:22:48.833
> 
> 标签：c++, winapi, console-application, command-prompt

我需要能够从我用 C++ 编写的基于 GUI 的应用程序输出到控制台，因此我选择使用[AttachConsole](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681952%28v=vs.85%29.aspx) (ATTACH_PARENT_PROCESS) API 和[此代码](http://dslweb.nwnexus.com/~ast/dload/guicon.htm)来执行此操作。该方法效果很好，除了当我从命令提示符窗口启动我的 GUI 应用程序时，GUI 应用程序启动得很好，但是当我关闭命令提示符窗口时，我的 GUI 应用程序被终止（注意，不是关闭，而是终止。）有没有防止此应用程序终止的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:27:32.430

当有人关闭控制台窗口时，您可以阻止您的应用程序关闭。

它涉及调用[SetConsoleCtrlHandler](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686016%28v=vs.85%29.aspx)来设置拦截这些事件的[HandlerRoutine 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683242%28v=vs.85%29.aspx)

如果您希望控制台窗口关闭，但让您的应用程序运行，您可以调用`FreeConsole`您的`HandlerRoutine`. 如果这不起作用，则处理消息以防止控制台窗口被破坏，并设置一个标志或计时器，以使您的应用程序`FreeConsole`在从处理程序返回后调用。

我记得，当用户点击窗口上的 X 时，您无法阻止窗口关闭。我所做的就是修改窗口菜单。有关详细信息，请参阅[http://blog.mischel.com/2008/07/14/going-too-far-back/](http://blog.mischel.com/2008/07/14/going-too-far-back/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:44:03.107

我能够通过在将文本发布到流之前附加到父控制台`stdout`然后从它分离来解决此问题。这样，文本就可以正常发布，并且控制台与我的 GUI 应用程序保持分离。

[这是 MFC/C++ 类](http://dl.dropbox.com/u/36312383/ConsoleOutput.zip)，为想要使用它的人提供了完整的实现。

# .htaccess - Magento 非 www 到 www

> ID：14990178
> 
> 赞同：0
> 
> 时间：2013-02-20T21:23:01.113
> 
> 标签：.htaccess, magento, redirect

我在这里拉头发。

我创建了一个登录页面，即[http://www.pps-supplements.com/samples](http://www.pps-supplements.com/samples)

它工作正常，您可以正常访问它 - 没问题。

如果在地址栏中输入：

pps-supplements.com/samples

它把你带到了不好的主页，让我头疼。

我的网站在主页和类别上的非 www 到 www 上运行良好，但在 cms 页面上却不行。

我在这里阅读了一些帖子并尝试了他们的解决方案，即编辑 htaccess 文件，但它没有修复它。

有谁知道我该如何解决这个问题？

请漂亮！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:16:02.567

你可以在你的 .htaccess 文件中试试这个......

请务必将其添加到您可能已经在 htaccess 文件中的任何其他重写规则或条件之上。

```
<IfModule mod_rewrite.c>
 RewriteEngine On
 Rewritecond %{HTTP_HOST} !^www\.pps-supplements\.com [NC]
 Rewriterule (.*) http://www.pps-supplements.com/$1 [R=301]
</IfModule> 
```

这会将任何不是 www.pps-supplements.com 的域重定向到带有 www 的版本

在将多个域指向一个站点时也非常方便使用。

此外，确保网络服务器设置为接收非 www 版本，因为它正在侦听该版本以及带有 www 的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-14T20:57:05.863

对于其他任何查看已接受答案并遇到无法正常工作的问题的人，您可能需要停止执行其他重写。

您可以通过包含“L”参数来停止进一步的执行。

例子：

```
Rewritecond %{HTTP_HOST} !^www\.domain\.com [NC]
Rewriterule (.*) http://www.domain.com/$1 [R=301,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-04T01:40:11.967

我想从**example.com/category/**重定向到**www.example.com/category/**

我找到了解决方案：

在后端关闭自动重定向到基本 URL 并在 .htaccess 中使用此代码

```
<IfModule mod_rewrite.c>    
    RewriteEngine On
    RewriteCond %{HTTP_HOST} ^example.com$ [NC]
    RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L]
</IfModule> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-27T15:08:19.090

对于 Magento 多存储设置：

```
Rewritecond %{HTTP_HOST} ^example\.com [NC]
Rewriterule (.*) http://www.example.com/$1 [R=301,L] 
```

# html - div元素排列

> ID：14990179
> 
> 赞同：0
> 
> 时间：2013-02-20T21:23:02.220
> 
> 标签：html, css

谁能告诉我为什么#contHolder div 没有被推到第一行？用“任何文本内容”替换表格元素，一切都正确对齐。

```
<div id="footerWrapper"style="display: block; width:100%;">
    <div id="firstCol" style="float:left; width: 30%;">
        <div id="footerProjectTitle" style="float: left; width: 100%; background-color:red;">title</div> 
        <div style="clear:both"></div>  
        <div id="contHolder"style="float: left; width: 30%; background-color: #ffc0cb;">
            <table>
            </table>
        </div>
    </div>
    <div id="secondCol" style="float:left; width: 30%;">
        <div id="linkHolder"style="float: left; width: 100%; background-color: #f0ffff;">
            <table>
            </table>
        </div>
    </div>
</div> 
```

这是一个小提琴

[http://jsfiddle.net/KzJN3/](http://jsfiddle.net/KzJN3/)

更新的小提琴：http: [//jsfiddle.net/KzJN3/2/](http://jsfiddle.net/KzJN3/2/)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:26:26.197

问题在这里：

```
<div class="noborder" style="clear: both; width: 100%; height: 0px; line-height: 0px; font-size: 0px;"> </div> 
```

您告诉它，`clear:both`因此该元素之后的任何浮动都将从新行开始。

浮点数是一个困难的话题，请参阅：[http](http://css-tricks.com/all-about-floats/) ://css-tricks.com/all-about-floats/了解有关它们以及它们如何工作的一些好的信息。

# nservicebus - 使用服务总线从由 Web 应用程序组成的服务层发布事件

> ID：14990182
> 
> 赞同：2
> 
> 时间：2013-02-20T21:23:11.403
> 
> 标签：nservicebus, servicebus

我已经阅读了[为什么不从 Web 应用程序发布 NServiceBus 消息](http://www.make-awesome.com/2010/10/why-not-publish-nservicebus-messages-from-a-web-application/)和[另一个类似的问题](https://stackoverflow.com/questions/13565196/use-bus-send-not-publish-from-web-applications-nservicebus-v3-2-0-0)，但我不清楚这是否也适用于服务层。例如，如果服务层由使用 WCF 或 Web API 或任何其他方式构建的 Web 服务或 REST 服务组成，这些服务是否应该发布事件或发送命令？如果这些服务托管在负载平衡的 Web 服务器中，那么文章中概述的问题也适用于这一层。建议将如何改变或不改变？

如果我从事件与命令的定义来看，我所说的消息是事件，例如“创建了一个用户”，因此应该发布一个事件。事实上，创建用户的服务甚至不知道还能做什么，即可能是另一个应用程序应该为它创建一个定制的门户，而另一个应用程序应该向用户发送一个欢迎工具包。这将是一个事件，而不是一个命令。当应用程序服务本身由一个或多个 Web 应用程序组成时，我想我对 Web 应用程序和应用程序服务的定义很感兴趣。

[Web应用程序](http://en.wikipedia.org/wiki/Web_application)的定义

> Web 应用程序是用户通过网络（例如 Internet 或 Intranet）访问的应用程序。

但是，对我来说，用户可以是计算机，因此 Web 服务是 Web 应用程序，这就是这个问题的原因。

编辑：

让我们考虑一个具体的例子。ASP.NET 网站（MVC 或 Web 表单 - 无关紧要）向操作员显示表单，获取包含用户创建数据（名称、用户名、密码）的帖子，并调用 WCF 服务来创建用户。在网站和 WCF 服务之间，我们可以放置 ServiceBus 并发送命令来创建用户（请求/响应），以便我们获得第一篇文章中描述的所有好处。WCF 服务是实际的业务处理层，即它会创建用户。这就是我的问题所在。创建用户后，它应该*宣布*一个用户已经被创建并且其他系统可以对它做出反应并做他们应该做的任何事情。所以它非常适合发布消息的模式。然而，WCF 服务本身是一个 Web 应用程序，因此具有 Web 应用程序的大部分特征，因此造成了混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T04:27:16.627

正如您链接到的 SO 问题的答案中所述，发布事件与实际处理发生的位置有关。顺便说一句：这不是`Send` *代替*的问题，`Publish`因为这意味着两者是可以互换的，而它们的意图却截然不同。当你想发布时，你*想*发布。

如果您发现自己从 Web 公开的集成层发布，也会出现同样的问题：您应该在*该*代码中执行业务处理还是将其发送到另一个端点进行处理？通常，您应该将其发送到另一个端点。如果有人希望调用它，您甚至可以考虑如何执行相关操作。例如，如果您要发布一条`UserCreatedEvent`消息，则意味着您创建了一个用户。如何创建用户？我会被迫使用 WCF/Web-Api 层还是可以发送一个`CreateUserCommand`总线上由某个应用程序端点处理的消​​息？如果是前者，那么您可能需要重新考虑您的设计。但是，如果是后者，则无论如何您都应该从 WCF / Web-Api 发送命令，并且处理端点将执行该`Publish`位:)

**更新：** 我的看法是它更多的是关于凝聚力/关注点。您通常会在您的业务内部通过用于命令和事件的服务总线以及用于读取的简单查询层与您的域进行交互。如果您需要向第三方公开任何内容（或者只是通过网络），那么您可以使用 WCF / WS / Web-APi。关键是您应该尽量避免在集成端点（或像网站这样的前端）中进行业务处理。业务处理更适合应用服务器。*该规则通常*有例外，但如果您能够影响结构，那么您将处于更好的空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T04:48:00.963

事实是，真正负责执行操作的任何代码都应该与发布事件的代码相同。如果您有一个 MVC 应用程序并且在控制器本身中您使用实体框架来插入用户记录，那么这正是 Publish 应该在的位置，就在 SaveChanges 调用之后。但是，如果控制器调用引用的二进制文件或服务来执行“添加用户”调用中涉及的操作，那么发布应该在那里。我的想法是该事件应该与执行您尝试发布其事件的操作的代码并排。

# java - Java：将字符串变量拆分为字符串和整数变量？

> ID：14990184
> 
> 赞同：-3
> 
> 时间：2013-02-20T21:23:16.803
> 
> 标签：java, string, variables, split, integer

我到处寻找，但似乎可以找到解决方案。是否可以将诸如“A1”之类的字符串变量分成字符串“A”和整数1变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:26:11.407

如果您看到非数字继续将其添加到 StringBuffer，则从 0 开始解析，因为您看到 digit 将 StringBuffer 的内容添加到`List<String> strings;`Digits 和相同`List<String> numbers`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:43:34.343

如果您有一个字符串变量，例如`A1`or `ABC123`，您可以尝试：

```
String input = "A1";
String[] array = input.split("(?<=([a-zA-Z]++))");

String str = array[0];
int integer = Integer.parseInt(array[1]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T21:31:52.457

如果字符串长度严格为**一个字母**并且数字仅为**1 位**，则可以使用`String.split("")`，但是对于更通用的解决方案，您可以使用`regex`

示例代码：

```
Matcher matcher = Pattern.compile("([a-zA-Z]+)(\\d+)").matcher("variable1121");
if (matcher.matches()) {
    System.out.println(matcher.group(1) + " , " + matcher.group(2));
} 
```

输出：

```
variable , 1121 
```

# linux - 使用 shell 脚本制作文件的多个副本

> ID：14990185
> 
> 赞同：3
> 
> 时间：2013-02-20T21:23:19.920
> 
> 标签：linux, bash, shell

我正在尝试编写一个小的 shell 脚本来制作文件的多个副本。我可以将文件名作为输入，但不能将副本数作为输入。这是我写的。但我无法将`NUMBER`变量传递给 for 循环。

```
echo -n "Enter filename: "
read FILENAME
echo -n "Number of copies to be made: "
read NUMBER
for i in {2..$NUMBER}
do
cp -f $FILENAME ${FILENAME%%.*}"_"$i.csv
done 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T21:28:01.033

不幸的是，它不是那样工作的。Bash[在参数扩展之前执行大括号扩展](http://www.gnu.org/software/bash/manual/html_node/Shell-Expansions.html#Shell-Expansions)，因此您的大括号将在`$NUMBER`评估之前扩展。另请参阅[Bash Pitfall #33](http://mywiki.wooledge.org/BashPitfalls#for_i_in_.7B1...24n.7D)，它解释了该问题。

使用您的代码执行此操作的一种方法是：

```
for i in $(eval echo {2..$NUMBER})
do
# ...
done 
```

或者，甚至更短：

```
for i in $(seq 2 $NUMBER)
# ... 
```

（谢谢，格伦杰克曼！）

* * *

请注意，通常[应该引用变量](http://mywiki.wooledge.org/Quotes)。这对于文件名尤其重要。如果您的文件被调用`foo bar`怎么办？然后你`cp -f`会复制`foo`，`bar`因为参数被空格分割。

所以，做这样的事情：

```
cp -f "$FILENAME" "${FILENAME%%.*}_${i}.csv" 
```

虽然您的文件是否不包含空格可能无关紧要，但引用变量是您应该自动执行的操作，以防止将来出现任何意外。

# c++ - 读取指向类的二维指针数组

> ID：14990188
> 
> 赞同：0
> 
> 时间：2013-02-20T21:23:47.760
> 
> 标签：c++, sdl

我正在设计一个非常简单的视频游戏来帮助学习使用 SDL。我遇到了碰撞检测问题。为了绘制游戏地图（使用图块），我在一个名为 的类中创建了一个`Map`指向名为 的类的指针的二维数组`Tile`。该类`Map`有一个名为的函数，该函数通过从文件中`set_tiles`读取它们来定义所有图块。`.MAP`我还有一个名为 的类`Hero`，其中包含有关英雄的所有函数和变量。一切都很琐碎。但是，当我尝试从其他任何地方读取数组时，它会产生奇怪的结果（通过错误测试，我发现 x 和 y 值相差数千，但我可能在那里犯了错误）。这是代码。

```
SDL_Surface* Map::set_tiles ( SDL_Surface* tile_image ) {

Setup setup;

//Make a temporary map to draw the tiles to
Uint32 rmask, gmask, bmask, amask;
if ( SDL_BYTEORDER == SDL_BIG_ENDIAN ) {
    rmask = 0x00000000;
    gmask = 0x00000000;
    bmask = 0x00000000;
    amask = 0x00000000;
}
else {
    rmask = 0x00000000;
    gmask = 0x00000000;
    bmask = 0x00000000;
    amask = 0x00000000;
}
SDL_Surface* temp_map = SDL_CreateRGBSurface(SDL_SWSURFACE, MAP_WIDTH, MAP_HEIGHT, 32, rmask, gmask, bmask, amask);

//Open the map
std::ifstream map ( "Test.map" );

//Catch any errors
if ( map.fail() ) return NULL;

//Initialize the tiles
for ( int y = 0; y < MAP_HEIGHT / TILE_HEIGHT; y++ ) {
    for ( int x = 0; x < MAP_WIDTH / TILE_WIDTH; x++ ) {
        //Determines the tile type
        int tile_type = -1;

        //Read the tile type from the map
        map >> tile_type;

        //Make sure it's a real tile
        if ( tile_type < 0 || tile_type >= TILE_SPRITES ) {
            map.close();
            return NULL;
        }

        //Error check for the .map file
        if ( map.fail() ) {
            map.close();
            return NULL;
        }

        //Add the tile to the array
        tile_array[x][y] = &Tile ( x, y, tile_type );

        //Create the temp. image crop
        SDL_Rect* temp_crop = &tile_array[x][y]->get_crop();

        //Edit the temp. map
        setup.apply_surface ( x * TILE_WIDTH, y * TILE_HEIGHT, tile_image, temp_map, temp_crop );
    }

}

map.close();

//Return the modified map
return temp_map;

} 
```

现在，如果我尝试在其他地方阅读它，我就有问题了。IE

```
bool Hero::collision_check ( Map map ) {
for ( int y = 0; y < MAP_HEIGHT / TILE_HEIGHT; y++ ) {
    for ( int x = 0; x < MAP_WIDTH / TILE_WIDTH; x++ ) {
        Tile* tile = map.tile_array[x][y];
        if ( collision ( box, tile->get_box() ) ) {
            //Switch the effect based on the tile type
            switch ( tile->get_type() ) {
            case TILE_RED:
            case TILE_GREEN:
            case TILE_BLUE:
                return false;
                break;
            case TILE_CENTER:
            case TILE_TOP:
            case TILE_TOPRIGHT:
            case TILE_RIGHT:
            case TILE_BOTTOMRIGHT:
            case TILE_BOTTOM:
            case TILE_BOTTOMLEFT:
            case TILE_LEFT:
            case TILE_TOPLEFT:
                return true;
                break;
            default:
                return false;
            }
        }
    }
}
return false;
} 
```

在指针（或大多数其他事情）方面，我不是大师。是否有任何明显的缺陷可以解释我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:30:35.660

这将是一个超出范围的临时指针：

```
 tile_array[x][y] = &Tile ( x, y, tile_type ); 
```

您可能正在寻找

```
 tile_array[x][y] = new Tile ( x, y, tile_type ); 
```

PS1：顶部的 if 语句似乎不是很有用

PS2：下次如果你发布一个最小的例子而不是你的所有代码会有所帮助——人们倾向于忽略有太多代码无法阅读的帖子

编辑：

你在做什么基本上是：

```
Foo* fp;
// a Foo() is created, its address assigned to fp,
// but it is then destroyed at the end of the statement
fp = &Foo(2);
// now fp is a pointer to unallocated memory and using it causes undefined behaviour
fp.val; // this value is now undefined 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:32:43.863

在行

```
tile_array[x][y] = &Tile ( x, y, tile_type ); 
```

您正在将临时地址分配给您的向量。一旦该表达式结束，临时对象就会被销毁，并且您保存的指针现在指向一个无效对象。我不会存储指向 Tile 对象的指针，而是将 tile 对象本身存储在`tile_array`.

# jquery - jQuery Validation 需要执行两次相同的验证

> ID：14990198
> 
> 赞同：1
> 
> 时间：2013-02-20T21:24:09.047
> 
> 标签：jquery, jquery-validate

我正在使用用户必须填写两个步骤的表单，第一步他必须提供他的姓名和电子邮件，第二步他必须提供他选择的密码，所以我必须在同一个表单中执行两次验证，这是第一步成功，但在第二步中它只是简单地忽略并且正在提交表单。

这是js代码：

```
jQuery(document).ready(function() {
      jQuery('#form_wk_new_user').submit(function() {
       if(jQuery('#form_wk_step_1').css('visibility') == 'visible') {

           jQuery('#form_wk_new_user').validate(
           {
            rules: {
                new_user_name: {
                    required: true
                },
                new_user_email: {
                    required: true,
                    email: true
                }
            },
            messages: {
                 new_user_name: {
                     required: 'requerido'
                 },
                 new_user_email: {
                      required: 'requerido',
                      email: 'correo no válido'
                 }   
            }
           }
         );
        if(jQuery('#form_wk_new_user').valid()) {
             jQuery('#form_wk_step_2').css('visibility','visible');
         }         
       }
       if(jQuery('#form_wk_step_2').css('visibility') == 'visible') {
             jQuery('#form_wk_step_1').css('visibility','hidden');
             jQuery('#form_wk_continue_btn').attr('value','Registrar');
             jQuery('#form_wk_new_user').validate(
                {
                 rules: {
                     new_user_pass: {
                         required: true
                     },
                     new_user_confirm_pass: {
                         required: true,
                         equalTo: '#new_user_pass'
                     }
                 },
                 messages: {
                      new_user_pass: {
                          required: 'requerido'
                      },
                       new_user_confirm_pass: {
                         required: 'requerido',
                         equalTo: 'contraseñas no coinciden'
                     }
                 }
                }

            );
           if(jQuery('#form_wk_new_user').valid()) {
            form.submit();
         }       
       } 
     return false; 
    });
}); 
```

这是我的表格：

```
<form id="form_wk_new_user" method="post" action="">
    <div id="form_wk_step_1">
        <label>Nombre</label>
        <input type="text" id="new_user_name" name="new_user_name">
        <label>e-mail</label>
        <input type="text" id="new_user_email" name="new_user_email">
    </div>
    <div id="form_wk_step_2" style="visibility: hidden;">
        <label>Contraseña</label>
        <input type="password" id="new_user_pass" name="new_user_pass">
        <label>Confirma contraseña</label>
        <input type="password" id="new_user_confirm_pass" name="new_user_confirm_pass">
    </div>
    <div id="form_wk_continue"><input id="form_wk_continue_btn" type="submit" value="Continuar"></div>
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T23:50:43.497

您的代码（为便于阅读而格式化）：

```
jQuery(document).ready(function() {

    jQuery('#form_wk_new_user').submit(function() {
       if (jQuery('#form_wk_step_1').css('visibility') == 'visible') {

           jQuery('#form_wk_new_user').validate({ // initialize plugin
               //options & rules
           });

           if(jQuery('#form_wk_new_user').valid()) {
               jQuery('#form_wk_step_2').css('visibility','visible');
           }         
       }
       if (jQuery('#form_wk_step_2').css('visibility') == 'visible') {
           jQuery('#form_wk_step_1').css('visibility','hidden');
           jQuery('#form_wk_continue_btn').attr('value','Registrar');
           jQuery('#form_wk_new_user').validate({ // initialize plugin
              //options & rules
           });
           if(jQuery('#form_wk_new_user').valid()) {
               form.submit();
           }       
       }
       return false; 
    }); // end submit handler

}); // end DOM ready 
```

关于这个插件的工作原理，这里有一个基本的误解。 [`.validate()`](http://docs.jquery.com/Plugins/Validation/validate#options)应该只在准备*初始化*插件的 DOM 上调用*一次。*因此，通过您的代码，在单击按钮并且表单可见之前，插件甚至不会被初始化。它从未在您的第二个表单上初始化，因为单击按钮时它还不可见（您的条件逻辑失败并且永远不会被调用）。即使您可以修复这个逻辑“catch-22”，第二个中指定的新规则也不能以这种方式应用。第一次调用后，**必须**通过and方法添加和删除任何规则。 [看这个演示](http://jsfiddle.net/buDGD/)*`.validate()``.validate()``.validate()`**`rules('add')``rules('remove')`第二次调用`.validate()`无效的地方。***

 ***由于插件有一个内置的`submitHandler`回调函数，它完全不需要在任何其他`submit`处理函数中包装任何东西。（回调仅针对有效表单触发，[根据文档](http://docs.jquery.com/Plugins/Validation/validate#toptions)，*“在验证后通过 Ajax 提交表单的正确位置。”*）

恕我直言，这整个方法不必要地混乱和冗长，应该被替换。

而不是相同`form`的两组不同的输入，这需要更复杂的代码来动态添加和删除规则，您应该简单地使用两种不同的形式。

像这样的东西：

**新的 jQuery**：

```
jQuery(document).ready(function() {

    jQuery('#form_wk_new_user1').validate({ // initialize plugin on form 1
        // options & rules for form 1,
        submitHandler: function (form) {
            jQuery('#form_wk_step_1').hide(); // hide step 1
            jQuery('#form_wk_step_2').show(); // show step 2
            return false; // stop normal submit event
        }
    });

    jQuery('#form_wk_new_user2').validate({ // initialize plugin on form 2
        // options & rules for form 2,
        submitHandler: function (form) {
            var result1 = jQuery('#form_wk_new_user1').serialize(); // get the contents of form 1
            var result2 = jQuery(form).serialize(); // get the contents of form 2
            // your code to combine the data from form 1 with form 2
            // your code to submit form with data, ajax or other
            // return false; // block a page redirect if you use ajax
        }
    });

}); // end DOM ready 
```

**新的 HTML**：

```
<form id="form_wk_new_user1">
    <div id="form_wk_step_1">
        <label>Nombre</label>
        <input type="text" id="new_user_name" name="new_user_name"/>
        <label>e-mail</label>
        <input type="text" id="new_user_email" name="new_user_email"/>
        <input id="form_wk_continue_btn" type="submit" value="Continuar"/>
    </div>
</form>
<form id="form_wk_new_user2">
    <div id="form_wk_step_2" style="display: none;">
        <label>Contraseña</label>
        <input type="password" id="new_user_pass" name="new_user_pass"/>
        <label>Confirma contraseña</label>
        <input type="password" id="new_user_confirm_pass" name="new_user_confirm_pass"/>
        <input id="form_wk_continue_btn" type="submit" value="Registrar"/>
    </div>
</form> 
```

**工作演示：http: [//jsfiddle.net/rNM4v/](http://jsfiddle.net/rNM4v/)*****

# ruby-on-rails - 设计文本框格式

> ID：14990209
> 
> 赞同：0
> 
> 时间：2013-02-20T21:25:12.170
> 
> 标签：ruby-on-rails, devise

在为我的登录页面设置设计后，我想知道如何调整 f.email_field 的大小和 f.password_field 的高度？我试过了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:29:51.027

你试过什么？您可以使用生成设计视图

```
$ rails generate devise:views 
```

然后编辑它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:46:04.793

要编辑设计视图页面，您需要进入初始化文件夹中的 devise.rb 文件。

取消注释第 181 行并将其更改为

```
config.scoped_views = false 
```

对此

```
config.scoped_views = true 
```

您应该能够以任何您想要的方式编辑视图文件

要增加输入字段的大小，您需要增加字体。为您的输入字段声明一个字体大小。即字体大小：50px；

# java - 从 Java 代码访问 Google Drive 和 Dropbox 并执行 ls（列表文件）和 cd（更改目录）类型操作

> ID：14990213
> 
> 赞同：0
> 
> 时间：2013-02-20T21:25:23.270
> 
> 标签：java, google-drive-api, dropbox-api

我必须构建一个项目，在其中我必须从 java 代码对 Google Drive 和 Dropbox 执行 ls（列出所有文件）和 cd（更改目录）类型操作。我已经通过它的API，但找不到合适的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:28:38.640

Drive API 中没有真正的等价物`cd`，但是要列出给定文件夹中的所有文件，您可以使用类似的搜索查询执行[files.list](https://developers.google.com/drive/v2/reference/files/list)`'1234567' in parents`请求，其中“1234567”是文件夹的 ID：

[https://developers.google.com/drive/search-parameters](https://developers.google.com/drive/search-parameters)

# android - android数据库中的图像信息

> ID：14990217
> 
> 赞同：0
> 
> 时间：2013-02-20T21:25:36.860
> 
> 标签：android, database, image, listview, checkbox

假设我有带有图像和复选框的列表视图。您可以通过单击复选框来收藏图片。假设我有一个按钮“显示我最喜欢的图片”，它从数据库加载信息并打开带有我最喜欢的图像的列表视图。

我的问题是，当用户选中复选框时，我应该根据我最喜欢的图片在数据库中存储什么。R.drawable.pic1 肯定不会工作，因为 ID 是随机生成的。

帮助 F1,F1

# seo - SEO - 他们为什么要做这些 301 重定向？

> ID：14990220
> 
> 赞同：-1
> 
> 时间：2013-02-20T21:25:43.943
> 
> 标签：seo, google-ranking

我正在查看一些关键字在谷歌中排名第一的网站。我查看了使用 ahrefs.com 链接到它们的网站的代码，发现了一些我不理解的有趣内容：

对于 siteA1，他们有 5 个或更多页面（运输、条款和条件、站点地图等）链接回创建他们网站的网页设计公司。例如：siteA1.webdesignfirmSiteB.com/sitemap，这个 301 重定向到 siteA1.com/sitemap。

对于另一个站点siteA2，他们有很多做同样事情的链接。例如：siteA2.webdesignfirmSiteB.com/blue-widgets/ 301 重定向到 siteA2.com/blue-widgets/

这是在欺骗队伍吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:30:18.603

这可能是网站开发时遗留下来的。拥有 sitename.webdesign.com 是很常见的，然后一旦网站上线，只需 301 将所有重定向到“正确”名称。

我不知道是否还有更多的原因，但以上是常见的做法。

# c++ - 跳过不兼容的.../找不到

> ID：14990222
> 
> 赞同：9
> 
> 时间：2013-02-20T21:25:45.257
> 
> 标签：c++, mingw, qt5

当我试图编译即使是最简单的应用程序时......只有一个小部件我得到以下错误，我想它们都是相同的错误，我不知道我做错了什么还是什么否则，我真的很感谢你的帮助

错误日志：

```
 [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/libQt5UiTools.a when searching for -lQt5UiTools
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib\libQt5UiTools.a when searching for -lQt5UiTools
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/libQt5UiTools.a when searching for -lQt5UiTools
    [...]/x86_64-w64-mingw32/bin/ld.exe: cannot find -lQt5UiTools
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/libQt5Widgets.a when searching for -lQt5Widgets
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/Qt5Widgets.dll when searching for -lQt5Widgets
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib\libQt5Widgets.a when searching for -lQt5Widgets
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/libQt5Widgets.a when searching for -lQt5Widgets
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/Qt5Widgets.dll when searching for -lQt5Widgets
    [...]/x86_64-w64-mingw32/bin/ld.exe: cannot find -lQt5Widgets
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/libQt5Network.a when searching for -lQt5Network
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/Qt5Network.dll when searching for -lQt5Network
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib\libQt5Network.a when searching for -lQt5Network
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/libQt5Network.a when searching for -lQt5Network
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/Qt5Network.dll when searching for -lQt5Network
    [...]/x86_64-w64-mingw32/bin/ld.exe: cannot find -lQt5Network
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/libQt5Gui.a when searching for -lQt5Gui
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/Qt5Gui.dll when searching for -lQt5Gui
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib\libQt5Gui.a when searching for -lQt5Gui
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/libQt5Gui.a when searching for -lQt5Gui
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/Qt5Gui.dll when searching for -lQt5Gui
    [...]/x86_64-w64-mingw32/bin/ld.exe: cannot find -lQt5Gui
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/libQt5Core.a when searching for -lQt5Core
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/Qt5Core.dll when searching for -lQt5Core
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib\libQt5Core.a when searching for -lQt5Core
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/libQt5Core.a when searching for -lQt5Core
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/Qt5Core.dll when searching for -lQt5Core
    [...]/x86_64-w64-mingw32/bin/ld.exe: cannot find -lQt5Core
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/liblibEGL.a when searching for -llibEGL
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/libEGL.dll when searching for -llibEGL
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib\liblibEGL.a when searching for -llibEGL
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/liblibEGL.a when searching for -llibEGL
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/libEGL.dll when searching for -llibEGL
    [...]/x86_64-w64-mingw32/bin/ld.exe: cannot find -llibEGL
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/liblibGLESv2.a when searching for -llibGLESv2
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/libGLESv2.dll when searching for -llibGLESv2
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib\liblibGLESv2.a when searching for -llibGLESv2
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/liblibGLESv2.a when searching for -llibGLESv2
    [...]/x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib/libGLESv2.dll when searching for -llibGLESv2
    [...]/x86_64-w64-mingw32/bin/ld.exe: cannot find -llibGLESv2
    collect2.exe: error: ld returned 1 exit status

    Makefile.Release:80: recipe for target 'release\KomixViewer.exe' failed
    mingw32-make[1]: *** [release\KomixViewer.exe] Error 1
    mingw32-make[1]: Leaving directory 'C:/Users/asd/Documents/komix'
    makefile:34: recipe for target 'release' failed
    mingw32-make: *** [release] Error 2
    15:03:26: The process "C:\Qt\Qt5.0.1\Tools\MinGW\bin\mingw32-make.exe" exited with code 2.
    Error while building/deploying project Komix_viewer (kit: Desktop Qt 5.0.1 MinGW 32bit)
    When executing step 'Make' 
```

我想不通的是为什么这些文件不兼容？

我找不到任何关于解决这个问题的方法...希望您能帮助我...顺便说一下我正在使用Windows 8进行编译。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T22:17:45.580

这表明您正在构建 64 位二进制文​​件，而这些库适用于 32 位目标（反之亦然）。

# c - 字符串解析的指针算法

> ID：14990225
> 
> 赞同：0
> 
> 时间：2013-02-20T21:25:50.263
> 
> 标签：c

所以我试图通过创建一个基本函数来掌握指针/数组，如果子字符串出现在给定字符串的末尾，则`strend`返回，否则返回。我意识到我可以通过测量 char 数组的长度，从该长度中减去子字符串的长度，然后在那里启动我的程序来实现这一点，但我有点想像我的函数那样做以获得更强的掌握指针算术。所以这里是程序：`1``0`

```
#include <stdio.h>
#define NELEMS(x) (sizeof(x) / sizeof(x[0]))

int strend(char *string, char *substring, int substringLength){
    int count; /*keep track of how many number of chars that match in a row*/
    while(*string != '\0'){
        count = 0;
        while(*string == *substring){
            if (count + 1 == substringLength) return 1; /*if matches = length of str*/
            count++; 
            string ++;
            substring ++;
        }
    if (count == 0) string++; /*only increment outer loop if inner loop has done no work*/
    else {
        substring - count; /*reset substring, don't increment string... BUGGY*/
         }
    }
    return 0;
}

int main(){
    char string[] = "John Coltrane";
    char substring[] = "Coltrane";
    int substringLength = NELEMS(substring);
    printf("%d \n", strend(string, substring, substringLength));
    char string2[] = "John Coltrane is Awesome Coltrane";
    char substring2[] = "Coltrane";
    int substringLength2 = NELEMS(substring);
    printf("%d \n", strend(string2, substring2, substringLength2));
    return 1;
} 
```

对于第一个测试字符串，字符串和子字符串，我得到了正确的结果，返回 1，因为“Coltrane”位于字符串的末尾。同样，如果我从 string2 中取出“Coltrane”，我会得到正确的结果，返回 0，因为字符串不以 Coltrane 结尾。

但是，对于您在上面看到的 string2 版本，我也得到了零，问题在于在我迭代它并在它与主字符串的一部分匹配时递增它之后`strend`不会重置。`substring`当 substring 的第一个实例位于字符串的末尾时这很好，但当有两个实例时则不行，如 string2 中。我认为这`substring - count`会将指针递减回子字符串数组的开头，但它似乎没有这样做。

如果我用 更改该表达式`substring--`，它确实会显示子字符串的最后一个字符，但是这样的表达式`for(int i = 0; i < count; i++, substring--)`真的是唯一的方法吗？

编辑：替换`substring - count`似乎`for(; count > 0; count--, substring--)`是一种非常优雅的单衬里，它对我有用，但我仍然有一种直觉，觉得有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:40:11.490

这是一个不会改变任何变量值的表达式：

```
substring - count; 
```

这是您更改变量值的方式：

```
substring -= count; 
```

代码中的另一个错误是仅在 count 为 0 时增加字符串。如果存在像“Cole Slaw”这样的部分匹配怎么办？

# jpa-2.0 - JPA 与 JTA 如何在一个事务中持久化多个实体

> ID：14990226
> 
> 赞同：3
> 
> 时间：2013-02-20T21:25:51.000
> 
> 标签：jpa-2.0, jta

我有一个对象列表。它们是 JPA“位置”实体。

```
List<Location> locations; 
```

我有一个无状态的 EJB，它遍历列表并保留每个列表。

```
public void createLocations() {
    List<Locations> locations = getListOfJPAManagedLocationEntities(); // I'm leaving out the details of this because it has nothing to do with the issue

    for(Location location : locations) {
        em.persist(location);
    }
} 
```

代码工作正常。我没有任何问题。但是，问题是：我希望这是一个全有或全无的交易。目前，每次通过 for 循环，persist() 方法都会在数据库中插入一个新行。假设我有 100 个位置对象，而第 54 个对象有问题并引发异常。将有 53 条记录插入到数据库中。我想要的是：他们都必须先成功，然后才能成功。

我正在使用最新最好的 Java EE6、EJB 3.x 和 JPA 2 版本。我的 persistence.xml 使用 JTA。

```
<persistence-unit name="myPersistenceUnit" transaction-type="JTA"> 
```

我喜欢有 JTA。我不想停止使用 JTA。90% 的时间 JTA 完全按照我的意愿去做。但在这种情况下，我似乎没有。

我对 JTA 的理解一定是不准确的，因为我一直认为 EJB 方法的开始和结束标记了 JTA 事务的边界（假设只有一种方法在起作用，如上所示）。按照我的逻辑，在 for 循环完成并且方法返回之前，事务不会结束，然后记录就会被持久化。

我正在使用 SqlServer 2008 的 JTDS 驱动程序。也许数据库不想在不立即提交记录的情况下插入记录。实体 id 定义如下：

```
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY) 
```

我检查了规范，在 JTA 环境中调用各种“UserTransaction”或“getTransaction()”方法是不合适的。

那么我能做什么呢？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:42:53.307

如果您使用 JTA 和容器管理的事务，则会话 EJB 方法调用的默认行为是在事务中运行（就像用`@TransactionAttribute(TransactionAttributeType.REQUIRED)`.发生在第 54 行，所有先前插入的行都将被回滚。您可以通过在循环中的某个点向自己抛出异常来继续测试它。请注意，如果您抛出由您的方法声明的检查异常，您可以指定当异常发生时，容器应该做。你需要用 注释异常类`@ApplicationException (rollback=true)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:20:35.913

如果循环时有重复的条目，那么它将继续没有问题，当编译器`em.flush();`在循环后到达这一行时，它将抛出异常并回滚事务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-30T21:19:36.787

我正在使用 JBoss。将您的数据源设置在您的standalone.xml 或 domain.xml 中 `<datasource jta="true" ...>` 看起来很明显，但我显然很久以前就设置错了并且忘记了它。

# javascript - Processing.js 在 loadImage() 上的 URL 末尾添加“jpg”

> ID：14990227
> 
> 赞同：1
> 
> 时间：2013-02-20T21:25:53.390
> 
> 标签：javascript, processing

我希望我的处理草图随机从 lorempixel 加载图像，并将它们显示给用户。我可以从 Processing IDE 中运行的 Processing 中完美地做到这一点，但是当我将它与 Processing.js 一起使用时它会失败。

这是我的设置：

```
PImage img;

void setup() {
   int x = (int) random(400,1024);
   int y = (int) random(400,768);

   String url = "http://lorempixel.com/" + x + "/" + y;
   img = loadImage(url, "jpg");
   size(x,y);
} 
```

我在 JS 控制台中收到以下错误

```
GET http://lorempixel.com/494/548.jpg/ 404 (Not Found) processing-1.4.1.min.js:13
   cW.loadImage processing-1.4.1.min.js:13
   setup
   b6 processing-1.4.1.min.js:13
   F.Processing processing-1.4.1.min.js:13
   Z processing-1.4.1.min.js:13
   T.X.onreadystatechange 
```

为什么要在我的 URL 末尾添加 .jpg？有没有办法以我想要的方式加载这些图像？

我尝试从 loadImage 调用中删除额外的 .jpg 参数，但是当我这样做时，它成功加载了图像，然后使我的程序崩溃并出现以下错误

```
Unable to get image data from canvas because the canvas has been tainted 
by cross-origin data. 
```

谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:32:12.683

这个[链接](https://stackoverflow.com/questions/9972049/cross-origin-data-in-html5-canvas)可以帮助你。基本上你必须启用[CORS](http://www.w3.org/TR/cors/#resource-sharing-check-0)。

# excel - 如何在 Excel 中创建 GUID？

> ID：14990236
> 
> 赞同：61
> 
> 时间：2013-02-20T21:26:16.463
> 
> 标签：excel, guid

我需要一个函数来向 Excel 中的单元格添加 GUID。我[在 stackoverflow 上找到了这个先前的问题](https://stackoverflow.com/questions/7031347/how-can-i-generate-guids-in-excel)，但它不起作用。它建议以下功能：

```
=CONCATENATE(DEC2HEX(RANDBETWEEN(0,4294967295),8),"-",DEC2HEX(RANDBETWEEN(0,6553‌​5),4),"-"
    ,DEC2HEX(RANDBETWEEN(16384,20479),4),"-",DEC2HEX(RANDBETWEEN(32768,49151‌​),4),"-"
    ,DEC2HEX(RANDBETWEEN(0,65535),4),DEC2HEX(RANDBETWEEN(0,4294967295),8)) 
```

我一直无法让连接方法起作用，因此尝试使用“&”数字进行连接。这似乎有效，但后来我在第二个`DEX2HEX`块上得到一个莫名其妙的错误：`DEC2HEX(RANDBETWEEN(0,6553‌​5),4)`. Excel 公式评估器说它无效，但我似乎根本不知道为什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2016-12-07T20:24:18.733

在现代版本的 Excel 中，语法是逗号，而不是分号。我发布这个答案是为了方便其他人，所以他们不必替换字符串 - 我们都很懒惰...... hrmp......人类，对吗？

> =CONCATENATE(DEC2HEX(RANDBETWEEN(0,4294967295),8),"-",DEC2HEX(RANDBETWEEN(0,65535),4),"-",DEC2HEX(RANDBETWEEN(0,65535),4),"-" ,DEC2HEX(RANDBETWEEN(0,65535),4),"-",DEC2HEX(RANDBETWEEN(0,4294967295),8),DEC2HEX(RANDBETWEEN(0,65535),4))

或者，如果你喜欢我不喜欢向导尖叫和喊叫而你，我们可以像这样使用小写字母。

> =LOWER(连接(DEC2HEX(RANDBETWEEN(0,4294967295),8),"-",DEC2HEX(RANDBETWEEN(0,65535),4),"-",DEC2HEX(RANDBETWEEN(0,65535),4)," -",DEC2HEX(RANDBETWEEN(0,65535),4),"-",DEC2HEX(RANDBETWEEN(0,4294967295),8),DEC2HEX(RANDBETWEEN(0,65535),4)))

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-04-17T07:08:09.037

我在 v.2013 excel vba 宏代码中使用以下函数

```
Public Function GetGUID() As String 
    GetGUID = Mid$(CreateObject("Scriptlet.TypeLib").GUID, 2, 36) 
End Function 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2014-12-01T09:59:48.907

```
=CONCATENATE(
    DEC2HEX(RANDBETWEEN(0;4294967295);8);"-";
    DEC2HEX(RANDBETWEEN(0;42949);4);"-";
    DEC2HEX(RANDBETWEEN(0;42949);4);"-";
    DEC2HEX(RANDBETWEEN(0;42949);4);"-";
    DEC2HEX(RANDBETWEEN(0;4294967295);8);
    DEC2HEX(RANDBETWEEN(0;42949);4)
) 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-08-17T14:38:17.000

```
=LOWER(
    CONCATENATE(
        DEC2HEX(RANDBETWEEN(0,POWER(16,8)),8), "-", 
        DEC2HEX(RANDBETWEEN(0,POWER(16,4)),4),"-","4", 
        DEC2HEX(RANDBETWEEN(0,POWER(16,3)),3),"-",
        DEC2HEX(RANDBETWEEN(8,11)),
        DEC2HEX(RANDBETWEEN(0,POWER(16,3)),3),"-",
        DEC2HEX(RANDBETWEEN(0,POWER(16,8)),8),
        DEC2HEX(RANDBETWEEN(0,POWER(16,4)),4)
    )
) 
```

取自 git @mobilitymaster。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-02-04T10:47:06.870

这根本不是函数的问题。

我花了一点时间挖掘，但问题在于复制和粘贴。尝试复制这个：`RANDBETWEEN(0,6553‌​5)`字符串，发布在您的原始问题中，并将其粘贴到十六进制编辑器中，然后您会看到 65535 中实际上有两个空字符：

```
00000000  52 41 4E 44 42 45 54 57 45 45 4E 28 30 2C 36 35  RANDBETWEEN(0,65
00000010  35 33 00 00 35 29                                53‌..​5) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-12-15T17:42:43.837

对我来说这是正确的，在 Excel 西班牙语中

```
=CONCATENAR(
DEC.A.HEX(ALEATORIO.ENTRE(0,4294967295),8),"-",
DEC.A.HEX(ALEATORIO.ENTRE(0,65535),4),"-",
DEC.A.HEX(ALEATORIO.ENTRE(16384,20479),4),"-",
DEC.A.HEX(ALEATORIO.ENTRE(32768,49151),4),"-",
DEC.A.HEX(ALEATORIO.ENTRE(0,65535),4),
DEC.A.HEX(ALEATORIO.ENTRE(0,4294967295),8)
) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-12-04T20:08:31.250

荷兰语 Excel 的公式：

```
=KLEINE.LETTERS(
    TEKST.SAMENVOEGEN(
        DEC.N.HEX(ASELECTTUSSEN(0;MACHT(16;8));8);"-";
        DEC.N.HEX(ASELECTTUSSEN(0;MACHT(16;4));4);"-";"4";
        DEC.N.HEX(ASELECTTUSSEN(0;MACHT(16;3));3);"-";
        DEC.N.HEX(ASELECTTUSSEN(8;11));
        DEC.N.HEX(ASELECTTUSSEN(0;MACHT(16;3));3);"-";
        DEC.N.HEX(ASELECTTUSSEN(0;MACHT(16;8));8);
        DEC.N.HEX(ASELECTTUSSEN(0;MACHT(16;4));4)
    )
) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-25T14:42:33.697

法语 Excel 的公式：

```
=CONCATENER(
DECHEX(ALEA.ENTRE.BORNES(0;4294967295);8);"-";
DECHEX(ALEA.ENTRE.BORNES(0;42949);4);"-";
DECHEX(ALEA.ENTRE.BORNES(0;42949);4);"-";
DECHEX(ALEA.ENTRE.BORNES(0;42949);4);"-";
DECHEX(ALEA.ENTRE.BORNES(0;4294967295);8);
DECHEX(ALEA.ENTRE.BORNES(0;42949);4)) 
```

正如 Josh M 所指出的，这并没有提供兼容的 GUID，但这很适合我当前的需要。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-06-08T08:29:03.683

波兰语版本的公式：

```
=ZŁĄCZ.TEKSTY(
    DZIES.NA.SZESN(LOS.ZAKR(0;4294967295);8);"-";
    DZIES.NA.SZESN(LOS.ZAKR(0;42949);4);"-";
    DZIES.NA.SZESN(LOS.ZAKR(0;42949);4);"-";
    DZIES.NA.SZESN(LOS.ZAKR(0;42949);4);"-";
    DZIES.NA.SZESN(LOS.ZAKR(0;4294967295);8);
    DZIES.NA.SZESN(LOS.ZAKR(0;42949);4)
) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-01-29T17:56:23.530

在尝试了多种选择并遇到了新版本的 Excel (2016) 的各种问题后，我从 MS 中发现了这篇文章，它的作用就像一个魅力。我使用 danwagner.co 的帖子中的一些代码对其进行了一些增强

```
Private Declare PtrSafe Function CoCreateGuid Lib "ole32.dll" (Guid As GUID_TYPE) As LongPtr

Private Declare PtrSafe Function StringFromGUID2 Lib "ole32.dll" (Guid As GUID_TYPE, ByVal lpStrGuid As LongPtr, ByVal cbMax As Long) As LongPtr

Function CreateGuidString(Optional IncludeHyphens As Boolean = True, Optional IncludeBraces As Boolean = False)
    Dim Guid As GUID_TYPE
    Dim strGuid As String
    Dim retValue As LongPtr

    Const guidLength As Long = 39 'registry GUID format with null terminator {xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}

    retValue = CoCreateGuid(Guid)

    If retValue = 0 Then
        strGuid = String$(guidLength, vbNullChar)
        retValue = StringFromGUID2(Guid, StrPtr(strGuid), guidLength)

        If retValue = guidLength Then
            '   valid GUID as a string
            '   remove them from the GUID
            If Not IncludeHyphens Then
                strGuid = Replace(strGuid, "-", vbNullString, Compare:=vbTextCompare)
            End If

            '   If IncludeBraces is switched from the default False to True,
            '   leave those curly braces be!
            If Not IncludeBraces Then
                strGuid = Replace(strGuid, "{", vbNullString, Compare:=vbTextCompare)
                strGuid = Replace(strGuid, "}", vbNullString, Compare:=vbTextCompare)
            End If

            CreateGuidString = strGuid
        End If
    End If

End Function

Public Sub TestCreateGUID()
    Dim Guid As String
    Guid = CreateGuidString() '<~ default
    Debug.Print Guid
End Sub 
```

在此处找到的原始 MS 帖子中还有其他选项： [https ://answers.microsoft.com/en-us/msoffice/forum/msoffice_excel-msoffice_custom-mso_2010/guid-run-time-error-70-permission-denied/ c9ee4076-98af-4032-bc87-40ad7aa7cb38](https://answers.microsoft.com/en-us/msoffice/forum/msoffice_excel-msoffice_custom-mso_2010/guid-run-time-error-70-permission-denied/c9ee4076-98af-4032-bc87-40ad7aa7cb38)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-02-05T19:33:55.110

肯汤普森是对的！- 对我来说，这种方式也有效（excel 2016），但类型定义 GUID_TYPE 被跳过，所以完整的脚本是：

```
Private Type GUID_TYPE
    Data1 As Long
    Data2 As Integer
    Data3 As Integer
    Data4(7) As Byte
End Type

Private Declare PtrSafe Function CoCreateGuid Lib "ole32.dll" (Guid As GUID_TYPE) As LongPtr

Private Declare PtrSafe Function StringFromGUID2 Lib "ole32.dll" (Guid As GUID_TYPE, ByVal lpStrGuid As LongPtr, ByVal cbMax As Long) As LongPtr

Function CreateGuidString(Optional IncludeHyphens As Boolean = True, Optional IncludeBraces As Boolean = False)
    Dim Guid As GUID_TYPE
    Dim strGuid As String
    Dim retValue As LongPtr

    Const guidLength As Long = 39 'registry GUID format with null terminator {xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}

    retValue = CoCreateGuid(Guid)

    If retValue = 0 Then
        strGuid = String$(guidLength, vbNullChar)
        retValue = StringFromGUID2(Guid, StrPtr(strGuid), guidLength)

        If retValue = guidLength Then
            '   valid GUID as a string
            '   remove them from the GUID
            If Not IncludeHyphens Then
                strGuid = Replace(strGuid, "-", vbNullString, Compare:=vbTextCompare)
            End If

            '   If IncludeBraces is switched from the default False to True,
            '   leave those curly braces be!
            If Not IncludeBraces Then
                strGuid = Replace(strGuid, "{", vbNullString, Compare:=vbTextCompare)
                strGuid = Replace(strGuid, "}", vbNullString, Compare:=vbTextCompare)
            End If

            CreateGuidString = strGuid
        End If
    End If

End Function 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-08-10T16:06:35.167

德语 Excel 的公式：

```
=KLEIN(
    VERKETTEN(
        DEZINHEX(ZUFALLSBEREICH(0;POTENZ(16;8));8);"-";
        DEZINHEX(ZUFALLSBEREICH(0;POTENZ(16;4));4);"-";"4";
        DEZINHEX(ZUFALLSBEREICH(0;POTENZ(16;3));3);"-";
        DEZINHEX(ZUFALLSBEREICH(8;11));
        DEZINHEX(ZUFALLSBEREICH(0;POTENZ(16;3));3);"-";
        DEZINHEX(ZUFALLSBEREICH(0;POTENZ(16;8));8);
        DEZINHEX(ZUFALLSBEREICH(0;POTENZ(16;4));
    )
) 
```

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2018-04-16T10:32:36.683

**意大利语**版：

```
=CONCATENA(
    DECIMALE.HEX(CASUALE.TRA(0;4294967295);8);"-";
    DECIMALE.HEX(CASUALE.TRA(0;42949);4);"-";
    DECIMALE.HEX(CASUALE.TRA(0;42949);4);"-";
    DECIMALE.HEX(CASUALE.TRA(0;42949);4);"-";
    DECIMALE.HEX(CASUALE.TRA(0;4294967295);8);
    DECIMALE.HEX(CASUALE.TRA(0;42949);4)) 
```

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2018-05-18T10:11:28.543

ESP：

```
=CONCATENAR(
    DEC.A.HEX(ALEATORIO.ENTRE(0;4294967295);8);"-"; 
    DEC.A.HEX(ALEATORIO.ENTRE(0;42949);4);"-"; 
    DEC.A.HEX(ALEATORIO.ENTRE(0;42949);4);"-"; 
    DEC.A.HEX(ALEATORIO.ENTRE(0;42949);4);"-"; 
    DEC.A.HEX(ALEATORIO.ENTRE(0;4294967295);8); 
    DEC.A.HEX(ALEATORIO.ENTRE(0;42949);4)
) 
```

# django - Django 上下文处理器和中间件

> ID：14990241
> 
> 赞同：0
> 
> 时间：2013-02-20T21:26:23.603
> 
> 标签：django, middleware, processor, django-context

我正在尝试在我使用请求变量制作的自定义 context_processor 中设置一个上下文变量。我尝试使用的请求变量是在我的自定义中间件中设置的。但是我收到以下错误：

```
AttributeError: 'WSGIRequest' object has no attribute 'my_var' 
```

这很奇怪，因为我的上下文变量正确显示。是不是因为中间件是在上下文处理器之后处理的？这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:26:40.833

这取决于您实现了哪种中间件方法。在使用任何上下文处理器之前调用 process_request，但是在所有模板处理之后调用 process_response。

# java - 作业问题的有效算法

> ID：14990244
> 
> 赞同：0
> 
> 时间：2013-02-20T21:26:26.457
> 
> 标签：java, data-structures

我需要分析满足以下问题的文本：

> 生成一个输出，显示每个单词在文本中出现的次数。报告应首先按字长排序，然后是自然排序。

我的解决方案在下面给出了停靠点。有更好的解决方案吗？我没有使用地图或任何收藏，因为我们被告知，那些不使用收藏的人将获得额外的积分。

我的 POJO

```
/**
 * An instance of this object represents the string that occurs in a sentence
 * and the number of times it occurs in a single string.
 */
public class Word implements Comparable<Word> {
  private final String word;
  private int counter = 1;

  public Word(String word) {
    this.word = word;
  }

  public void incrementCounter() {
   this.counter ++;
  }

  public String getWord() {
    return word;
  }

  public int getCounter() {
    return counter;
  }

  /**
   * Overrides the default hashcode function.
   */
  @Override
  public int hashCode() {
    int hashCode = 103034;
    hashCode += this.word != null ? this.word.hashCode() ^ 3 : 0;
    hashCode += this.counter ^ 2;
    return hashCode;
  }

 /**
  * Overrides the default equals function. 
  */
 @Override
 public boolean equals(Object obj) {
   if (obj == null) {
     return false;
   }
   if (this == obj) {
     return true;
   }
   if (!(obj instanceof Word)) {
     return false;
   }
   Word otherWord = (Word) obj;
   if (this.word != null && this.word.equals(otherWord.getWord())) {
     return true;
   }
   return false;
 }

  @Override
  public String toString() {
    final StringBuilder sb = new StringBuilder();
    sb.append("Word");
    sb.append("{word='").append(word).append('\'');
    sb.append(", counter=").append(counter);
    sb.append('}');
    return sb.toString();
  }

/**
 * The implementation checks for the order of comparison.
 * The implementation first compares by presence of word string.
 *
 * @param w Word to be compared
 * @return calculated order of comparison.
 */
@Override
public int compareTo(Word w) {
  if (w == null) {
    return -1;
  }
  if (this.word == null && w.getWord() != null) {
    return 1;
  }
  if (this.word != null && w.getWord() == null) {
    return -1;
  }
  return StringUtils.compareString(this.word, w.getWord());
 } 
} 
```

* * *

```
import java.util.Comparator;

/**
 * An instance of this class is responsible for comparing the instances of two word 
 * instances by comparing against the word string.
 */
public class WordComparator implements Comparator<Word> {

  /**
   * Compares two instances of words first by length of the word string and then by the
   * word itself.
   *
   * @param firstWord first word to be compared
   * @param secondWord second word to be compared
   * @return negative number if the first word is less than the second word;
   *     positive if the first word is greater than the second word; 0 if equal.
   */
   @Override
   public int compare(Word firstWord, Word secondWord) {
     if (firstWord == secondWord) {
       return 0;
     }
     if (firstWord != null && secondWord == null) {
       return -1;
     }
     if (firstWord == null && secondWord != null) {
       return 1;
     }
     return StringUtils.compareString(firstWord.getWord(), secondWord.getWord());
    }
} 
```

* * *

实用程序类。

```
public class StringUtils {

  // Not to be instantiated.
  private StringUtils() {}

  /**
   * Compares the string first by word length and then by string.
   *
   * @param first First string to be compared.
   * @param second Second string to be compared
   * @return integer representing the output of comparison.
   */
   public static int compareString(String first, String second) {
     if (first == second) {
       return 0;
     }
     if (first == null && second != null) {
        return 1;
     }
     if (first != null && second == null) {
       return -1;
     }
     int wordLengthDifference = first.length() - second.length();
     if (wordLengthDifference == 0) {
       return first.compareTo(second);
     }
     return wordLengthDifference;
  }
} 
```

* * *

主要方法：

```
import java.util.Arrays;
import java.util.Collections;
import java.util.Comparator;

/**
 * Finds the number of occurrences of word a in given string. The implementation expects
 * the input to be passed adsingle string argument.
 */
 public class StringWordOccurences {

  /**
   * Finds the number of occurrences of a word in a string. The implementation relies
   * on the following assumptions.
   *
   * <p>The word is passed as separate strings as in {@code "Hello" "World"} instead of 
   * a single string  {@code "Hello World"}.
   *
   * @param args Arguments to be sorted by first word length and then by string.
   */
  public static void main(String[] args) {
    if (args == null || args.length == 0) {
      System.out.println("There were no words. The count is 0");
      return;
    }

    // Find the number of unique words and put them in an array.
    Comparator<Word> wordComparator = new WordComparator();
    Arrays.sort(args, new Comparator<String>() {
      @Override
      public int compare(String first, String second) {
         return StringUtils.compareString(first, second);
      }
    });

    Word [] words = new Word[args.length];
    int numberOfUniqueWords = 0;
    for (String wordAsString : args) {
      Word word = new Word(wordAsString);
      int index = Arrays.binarySearch(words, word, wordComparator);
      if (index > -1) {
        words[index].incrementCounter();
      } else {
        words[numberOfUniqueWords ++] = word;
      }
     }
     Word [] filteredWords = Arrays.copyOf(words, numberOfUniqueWords);
     // The display output.
     for (Word word : filteredWords) {
       System.out.println(word);
      }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:13:23.990

在按所需顺序对单词进行排序后，您不需要进行二分搜索，因为相同的单词将彼此相邻。只需检查所有单词并将每个单词与前一个单词进行比较。如果它们相等，则增加计数器。如果它们不相等，您可以立即打印完成的前一个单词的结果（无需将结果存储在数组中）。你也不需要 Word 类，你可以用字符串来做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:24:13.317

我能想到几点，但显然这些是第二次猜测......

1.  你有 3 个地方有类似的逻辑来进行 Word 比较。
2.  抛弃 Arrays.sort、Arrays.binarySearch 和 Arrays.copyOf。自己搜索 - 可能更简单
3.  您实际上可以在减少到唯一值后进行排序

# c - 反转一系列字符串

> ID：14990252
> 
> 赞同：-3
> 
> 时间：2013-02-20T21:26:56.550
> 
> 标签：c

我遇到了一个问题，我的一系列字符串没有按照我想要的方式打印出来。它只打印最后一个字符串并反转最后一个字符串，而不是之前的任何字符串。任何人都可以帮助我吗？

```
#include <stdio.h>
#include <string.h>

void reverse(char strings[80], int start, int end);
int main (void){

  char strings[80];

  printf("\tEnter a string to reverse: \n");
  while( scanf ("%s", strings) !=EOF);

  reverse(strings, 0, strlen(strings)-1);
  printf("\tThe reverse strings: \n%s\n",strings);

return 0;}
void reverse(char strings[80], int start, int end)
{
  char A;
  if (start >= end)
  return;

  A = *(strings+start);
  *(strings+start) = *(strings+end);
  *(strings+end) = A;

  reverse (strings, ++start, --end);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:33:18.860

您对 reverse() 和 printf() 的调用不在 while 循环内，因此它们仅被调用一次（对于读取的最后一个字符串）。

它应该是

```
while (scanf ("%s", strings) != EOF)
{
    reverse(strings, 0, strlen(strings)-1);
    printf("\tThe reverse strings: \n%s\n",strings);
} 
```

# jquery - jqPlot“堆叠”y轴

> ID：14990254
> 
> 赞同：0
> 
> 时间：2013-02-20T21:27:00.717
> 
> 标签：jquery, jqplot

我正在尝试编写一个小部件来显示像[这样](http://stockcharts.com/h-sc/ui?s=%24SPX&p=D&b=5&g=0&id=p70349335506)的财务图表。我想知道 jqPlot 是否提供了一种将不同 y 轴与相同 x 轴堆叠的本机方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:09:36.417

Jqplot 提供不同的 y 轴和相同的 x 轴。

看到这个[**小提琴**](http://jsfiddle.net/JWhmQ/1481/)

像这样

```
 axes:{
          xaxis:{
              min:0           
          },
          yaxis:{  
            autoscale:true,
            label: "hello"
          },  
          y2axis:{
            autoscale:true, 
            tickOptions:{showGridline:false},
            label: "Hi"
          }

      } 
```

# django - Django Tastypie 0.9.13版obj_get有问题？

> ID：14990255
> 
> 赞同：1
> 
> 时间：2013-02-20T21:27:01.247
> 
> 标签：django, tastypie

```
# views.py
from django.shortcuts import render_to_response
from myapp.api.resources import UserResource

def user_detail(request, username):
    ur = UserResource()
    user = ur.obj_get(username=username)

    # Other things get prepped to go into the context then...

    ur_bundle = ur.build_bundle(obj=user, request=request)
    return render_to_response('myapp/user_detail.html', {
        # Other things here.
       "user_json": ur.serialize(None, ur.full_dehydrate(ur_bundle), 'application/json'),
    }) 
```

但它给出了错误，因为 obj_get() 需要 2 个参数。有人见过吗？我错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:52:12.513

在 sweetpie 版本 0.9.13 中，obj_get 方法具有必需的参数包。

```
def obj_get(self, bundle, **kwargs):
    """
    Fetches an individual object on the resource.

    This needs to be implemented at the user level. If the object can not
    be found, this should raise a ``NotFound`` exception.

    ``ModelResource`` includes a full working version specific to Django's
    ``Models``.
    """
    raise NotImplementedError() 
```

# asp.net-mvc - 如何为 DropdownList 加载列表

> ID：14990257
> 
> 赞同：2
> 
> 时间：2013-02-20T21:27:15.647
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我有一个需要选择州和国家/地区的注册页面。填充这些下拉列表的项目来自外部数据库。

如何在页面呈现之前调用来填充这些列表？

```
public class RegisterModel
{
...
public IEnumerable<SelectListItem> States {get;set;}
public IEnumerable<SelectListItem> Countries {get;set;}
...
}

//Register.cshtml
@model Adw.Web.Models.RegisterModel

@Html.LabelFor(m => m.State)
@Html.DropDownListFor(m =>m.State, new SelectList(Model.States))

//Controller
public ActionResult Register()
    {
        .....
        RegisterModel rm = new RegisterModel();

        //The factories return List<string> 
        rm.States = new SelectList(stateFactory.Create(states.Payload));
        rm.Countries = new SelectList(countryFactory.Create(country.Payload));

        return View(rm);
    } 
```

通过上述设置，我收到：

没有具有键“状态”的“IEnumerable”类型的 ViewData 项。

摘要 - 在页面呈现之前，我需要进行 Web 服务调用以获取 2 个下拉列表的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:40:46.597

试试这个

模型：

```
public class RegisterModel
{
    ...
    public IList<string> States { get; set; }
    public IList<string> Countries { get; set; }
    ....
} 
```

控制器：

```
RegisterModel rm = new RegisterModel();

// read data from the database and add to the list
rm.States = new List<string> { "NY", "LA" };
rm.Countries = new List<string> { "USA", "Canada" }; 
```

风景：

```
@Html.LabelFor(x=>x.Countries)
@Html.DropDownListFor( x=>x.Countries, new SelectList(Model.Countries))

@Html.LabelFor(x=>x.States)
@Html.DropDownListFor( x=>x.States, new SelectList(Model.States)) 
```

希望这会奏效。

# codeigniter-2 - Codeigniter http请求和404

> ID：14990258
> 
> 赞同：0
> 
> 时间：2013-02-20T21:27:18.123
> 
> 标签：codeigniter-2, codeigniter-url

我对 Codeigniter 有疑问。

这是我的代码：

[http://pastebin.com/scccVP8D](http://pastebin.com/scccVP8D)

如果我的网址是：example.com/validator/validator/value/323445

Http请求响应：

323445

404页面不存在

未找到您所请求的页面。

为什么我会收到错误 404？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:53:55.270

我在您的代码中的任何地方都看不到 value/323445 。您只有没有任何参数的函数验证器。

因此，当您调用 example.com/validator/validator/value/323445 时，该页面不会出现。

您需要删除参数或在函数中添加参数并使用它。

# java - 如何在 Java 中将 MySQL 无符号整数转换为协议缓冲区 uint32？

> ID：14990261
> 
> 赞同：6
> 
> 时间：2013-02-20T21:27:43.620
> 
> 标签：java, mysql, protocol-buffers, primitive

我正在将一堆旧的制表符分隔的 MySQL 数据库转储文件转换为协议缓冲区并遇到了障碍。MySQL 表包含一个类型为 的字段`int(11) unsigned`，我已将其映射到文件`uint32`中的protobuf `.proto`。在解析 MySQL 记录并尝试将它们转换为 protobuf 消息时，很容易使用`Integer.valueOf(String)`（或`Long.valueOf(String)`避免溢出）解析该字段。但是，[Protocol Buffers Language Guide](https://developers.google.com/protocol-buffers/docs/proto)[在这里](https://developers.google.com/protocol-buffers/docs/proto#scalar)指出，在 Java 中，`uint32`s 使用`int`数据类型表示，但第一位被重新解释为最高位而不是符号位。

因此，在我编写自己的`String`-> `uint32`-flavored-`int`解析器之前，我认为值得询问其他人是否已经解决了这个特定问题。`String`将MySQL 的表示形式转换为Java`int unsigned`中的协议缓冲区的正确方法是什么？`uint32`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:29:13.187

# 字符串到 int 表示 uint32

我会尝试解析为`long`然后转换为`int`：

```
int i = (int)Long.parseLong(str); 
```

用于`long`转换避免了`NumberFormatException`由于超出范围。随后的[窄化转换](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.3)将丢弃结果位中较高的一半，从而为您提供协议缓冲区所需的表示形式。

# 字符串转长表示 uint64

类似的`uint64`使用转换`BigInteger`可能会写成如下（未经测试的代码）：

```
long l = (new BigInteger(str)).longValue(); 
```

这依赖于隐式截断，就像上面的情况一样。该[文档](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html#longValue%28%29)指出：

> 如果这`BigInteger`太大而无法放入 long 中，则仅返回低 64 位。

# Int 表示 uint 到 long

如果您想将`int`实际代表 an 的此类转换`uint32`为`long`带正号的 a，则应确保清除 32 个最高有效位，因为这些将被`int`值的最高有效位的副本填充，因为符号-[拓宽转换](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.2)性质。

```
long uintValue = intValue & 0xffffffffL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:08:01.817

如果字节序不是问题，那么您可以将无符号整数威胁为固定长度的字节数组。

# spring - 将请求从一个控制器方法转发到另一个控制器方法，BindingResult 为空

> ID：14990267
> 
> 赞同：0
> 
> 时间：2013-02-20T21:28:11.530
> 
> 标签：spring, spring-mvc, spring-3

我有 2 个控制器和 2 种方法。在其中一种方法中，我验证了我的 Bean 并填充了 BindingResult 对象。然后我将我的 bean 添加到模型中并将请求转发到另一个控制器，如 mav.addObject("forward:"+ControllerA.url)。当其他方法接收到它时，BindingResult 对象为空。请在这件事上给予我帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:05:12.210

我了解到您无法重定向/转发请求并期望 BindingResults 跟随的艰难方式。每次调用 Controller 时，都会进行自己的绑定。第一次调用，您缺少参数/等，因此 Spring 生成这些错误并将它们放在 BindingResults 中。但是，此时您有一个 ModelAttribute 对象。现在您进行转发/重定向。Spring 进行调用，但现在 ModelAttribute 存在……没有绑定，所以没有 BindingResults。

# android - 在哪里处理与详细信息共同的列表项的 CAB 操作？

> ID：14990269
> 
> 赞同：0
> 
> 时间：2013-02-20T21:28:12.847
> 
> 标签：android, action, master-detail, contextual-action-bar

假设我有使用片段的主/细节模式，所以像往常一样，细节片段将在手机上的新活动中，而在平板电脑上，它也将在列表片段所在的前一个活动中。老东西。

我有一些操作要对细节执行，比如分享，这将是操作栏项目。老东西。

但是现在，我想实现 Contextual ActionBar 或对话框，在我看来这并不重要，这将允许直接从列表中共享。

我的问题是，我应该在哪里获得共享代码？我想避免重复。在我看来，它不能真的是一个回调，因为细节可以在双重活动内或在其单一活动内。我真的很困惑我应该怎么做。

希望你能明白。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:08:02.067

> 我应该在哪里获得该共享代码？我想避免重复

猜测“共享代码”是您的`ACTION_SEND`调用，因为那只有六行代码左右，将其放入静态方法中，您的详细信息片段和托管活动可以访问该方法在较小的屏幕上列出。

# c++ - C++ 对数组位置使用布尔求值（跳转表）

> ID：14990270
> 
> 赞同：3
> 
> 时间：2013-02-20T21:28:23.167
> 
> 标签：c++, performance

我有一个 C++ IF 语句，它看起来像（伪代码 - 所有变量都是整数）：

```
if(x < y){
    c += d;
}
else{
    c += f;
} 
```

我正在考虑尝试删除 IF 语句，而是将值 d 和 f 加载到一个二元素数组中：

```
array[0] = d
array[1] = f 
```

然后我希望能够根据布尔的基础类型（至少在 C-0 或 1 中）引用数组元素“0”或“1”。有没有办法做到这一点？所以我的代码会变成这样：

`c += array[(x<y)]` 如果为真，c 增加 f，否则如果为假，c 增加 d。

我可以这样做吗，使用布尔结果来查找数组索引？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T21:39:03.083

当然你可以做到。但是，您可能只会使情况变得更糟。如果你认为在这种情况下你正在删除一个分支——你就错了。假设一个生产质量的编译器和 x86_64 架构，你的第一个版本将导致一个很好的条件移动（即`cmovge`）。然而，第二个版本将导致额外级别的间接和读取内存（即`mov eax,DWORD PTR [rax*4+0x4005d0]`.

如果您接受建议，我有一种非常不好的感觉，您现在正走在一条非常非常错误的道路上。当您优化程序时，您必须首先**测量/分析**以确定**瓶颈**。只有当你知道什么是瓶颈时，你才能开始优化它们。优化时，您必须再次对其进行**测量/分析**以查看是否有改进。您似乎在做的是不信任您的编译器、猜测和进行错误优化。我建议你在那儿停下来，否则它会从那里下山，相信我。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T21:32:02.197

如果您想要更紧凑的代码，可以将 if 语句替换为以下内容。

```
c += (x < y) ? d : f; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T21:30:31.797

是的，这会奏效。尽管它会使您的代码更难理解，并且现代编译器无论如何都会消除 if 语句（在转换为汇编程序时）。

# java - JOGL - 照明/相机

> ID：14990272
> 
> 赞同：1
> 
> 时间：2013-02-20T21:28:31.587
> 
> 标签：java, opengl, jogl

我在我的 JOGL 项目中添加了一个光源，当物体静止时它似乎工作得很好，当我移动相机时，它随着旋转而逐渐变暗，这是我所期望的，但一旦它旋转 90 度，屏幕就会消失完全黑，有谁知道这是为什么？我需要另一侧的另一个光源吗？我希望它会像太阳一样，即照亮整个场景，但当相机位于物体的另一侧时会稍微暗一些。

灯光

```
float light_ambient[] = { 0.0f, 0.0f, 0.0f, 1.0f };
float light_diffuse[] = { 1.0f, 1.0f, 1.0f, 1.0f };
float light_specular[] = { 1.0f, 1.0f, 1.0f, 1.0f };
float light_position[] = { 1.0f, 1.0f, 1.0f, 0.0f };

gl.glLightfv(GL2.GL_LIGHT0, GL2.GL_AMBIENT, light_ambient, 0);
gl.glLightfv(GL2.GL_LIGHT0, GL2.GL_DIFFUSE, light_diffuse, 0);
gl.glLightfv(GL2.GL_LIGHT0, GL2.GL_SPECULAR, light_specular, 0);
gl.glLightfv(GL2.GL_LIGHT0, GL2.GL_POSITION, light_position, 0);

gl.glEnable(GL2.GL_LIGHTING);
gl.glEnable(GL2.GL_LIGHT0);
gl.glDepthFunc(GL.GL_LESS);
gl.glEnable(GL.GL_DEPTH_TEST); 
```

* * *

其次，当相机旋转时，一些形状似乎变形并且看起来像完全不同的形状，即立方体变成枕形，侧面被拉伸了令人难以置信的量，这让我的整个物体看起来有点变形。有没有简单的方法来改变这个？我试过弄乱，`gluPerspective`这似乎也没有改变我想要的。有没有办法解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:38:42.593

您已在场景中添加了漫反射光和镜面反射光，但它们不会到达背对光源的表面。您可以添加一些环境光（当前在您的代码片段中设置为 0、0、0），以便所有表面都接收到一些照明。

至于变形的形状，这确实是一个单独的问题，并且没有足够的细节来了解为什么会发生这种情况。

# sqlite - 列出 OpenBSD 数据库/sqlports sqlite3 数据库的表和字段

> ID：14990277
> 
> 赞同：1
> 
> 时间：2013-02-20T21:28:53.543
> 
> 标签：sqlite, openbsd

如何开始使用`sqlite3`数据库？

例如， http: [//openports.se/databases/sqlports](http://openports.se/databases/sqlports)包含有关 OpenBSD 端口的各种信息；我已经在 OpenBSD 5.2 上安装了它，它创建的唯一文件`/var/db/pkg/sqlports-2.3p0/+CONTENTS`是`share/sqlports`.`/usr/local`

```
% file /usr/local/share/sqlports
/usr/local/share/sqlports: SQLite 3.x database 
```

我怎么知道它有哪些表，每个表有哪些字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:28:53.543

以下似乎可以完成这项工作，从[List 表中获取的 SQL 查询仅显示 sqlite_sequence](https://stackoverflow.com/q/13797848/1122270)：

```
% sqlite3 /usr/local/share/sqlports \
    'select * from sqlite_master where type = "table";' \
    ; uname -rms
table|Paths|Paths|2|CREATE TABLE Paths (FULLPKGPATH TEXT NOT NULL PRIMARY KEY, PKGPATH TEXT NOT NULL, CANONICAL TEXT NOT NULL)
table|Modules|Modules|4|CREATE TABLE Modules (FULLPKGPATH TEXT NOT NULL, VALUE TEXT NOT NULL, UNIQUE(FULLPKGPATH, VALUE))
table|Broken|Broken|6|CREATE TABLE Broken (FULLPKGPATH TEXT NOT NULL, ARCH TEXT, VALUE TEXT NOT NULL, UNIQUE(FULLPKGPATH, ARCH, VALUE))
table|Configure|Configure|8|CREATE TABLE Configure (FULLPKGPATH TEXT NOT NULL, VALUE TEXT NOT NULL, UNIQUE(FULLPKGPATH, VALUE))
table|OnlyForArch|OnlyForArch|10|CREATE TABLE OnlyForArch (FULLPKGPATH TEXT NOT NULL, VALUE TEXT NOT NULL, UNIQUE(FULLPKGPATH, VALUE))
table|Multi|Multi|13|CREATE TABLE Multi (FULLPKGPATH TEXT NOT NULL, VALUE TEXT NOT NULL, SUBPKGPATH TEXT NOT NULL, UNIQUE(FULLPKGPATH, VALUE))
table|Targets|Targets|16|CREATE TABLE Targets (FULLPKGPATH TEXT NOT NULL, VALUE TEXT NOT NULL, UNIQUE(FULLPKGPATH, VALUE))
table|PseudoFlavors|PseudoFlavors|18|CREATE TABLE PseudoFlavors (FULLPKGPATH TEXT NOT NULL, VALUE TEXT NOT NULL, UNIQUE(FULLPKGPATH, VALUE))
table|Shared_Libs|Shared_Libs|20|CREATE TABLE Shared_Libs (FULLPKGPATH TEXT NOT NULL, LIBNAME TEXT NOT NULL, VERSION TEXT NOT NULL, UNIQUE (FULLPKGPATH, LIBNAME))
table|MasterSites|MasterSites|22|CREATE TABLE MasterSites (FULLPKGPATH TEXT NOT NULL, N INTEGER, VALUE TEXT NOT NULL, UNIQUE(FULLPKGPATH, N, VALUE))
table|Depends|Depends|25|CREATE TABLE Depends (FULLPKGPATH TEXT NOT NULL, FULLDEPENDS TEXT NOT NULL, PKGSPEC TEXT, REST TEXT, DEPENDSPATH TEXT NOT NULL, TYPE TEXT NOT NULL)
table|Categories|Categories|26|CREATE TABLE Categories (FULLPKGPATH TEXT NOT NULL, VALUE TEXT NOT NULL, UNIQUE(FULLPKGPATH, VALUE))
table|Descr|Descr|28|CREATE TABLE Descr (FULLPKGPATH TEXT NOT NULL, VALUE TEXT NOT NULL, UNIQUE(FULLPKGPATH, VALUE))
table|ConfigureArgs|ConfigureArgs|30|CREATE TABLE ConfigureArgs (FULLPKGPATH TEXT NOT NULL, VALUE TEXT NOT NULL, UNIQUE(FULLPKGPATH, VALUE))
table|Flavors|Flavors|32|CREATE TABLE Flavors (FULLPKGPATH TEXT NOT NULL, VALUE TEXT NOT NULL, UNIQUE(FULLPKGPATH, VALUE))
table|NotForArch|NotForArch|34|CREATE TABLE NotForArch (FULLPKGPATH TEXT NOT NULL, VALUE TEXT NOT NULL, UNIQUE(FULLPKGPATH, VALUE))
table|Wantlib|Wantlib|37|CREATE TABLE Wantlib (FULLPKGPATH TEXT NOT NULL, VALUE TEXT NOT NULL, EXTRA TEXT, UNIQUE(FULLPKGPATH, VALUE))
table|Ports|Ports|39|CREATE TABLE Ports (FULLPKGPATH TEXT NOT NULL, AUTOCONF_VERSION TEXT, AUTOMAKE_VERSION TEXT, BROKEN TEXT, BUILD_DEPENDS TEXT, CATEGORIES TEXT NOT NULL, COMES_WITH TEXT, COMMENT TEXT, CONFIGURE_ARGS TEXT, CONFIGURE_STYLE TEXT, DESCR TEXT NOT NULL, DISTFILES TEXT, DISTNAME TEXT, DIST_SUBDIR TEXT, EPOCH TEXT, FLAVORS TEXT, FULLPKGNAME TEXT, HOMEPAGE TEXT, IGNORE TEXT, IS_INTERACTIVE TEXT, LIB_DEPENDS TEXT, MAINTAINER TEXT NOT NULL, MASTER_SITES TEXT, MASTER_SITES0 TEXT, MASTER_SITES1 TEXT, MASTER_SITES2 TEXT, MASTER_SITES3 TEXT, MASTER_SITES4 TEXT, MASTER_SITES5 TEXT, MASTER_SITES6 TEXT, MASTER_SITES7 TEXT, MASTER_SITES8 TEXT, MASTER_SITES9 TEXT, MODULES TEXT, MULTI_PACKAGES TEXT, NOT_FOR_ARCHS TEXT, NO_BUILD INTEGER, NO_REGRESS INTEGER, ONLY_FOR_ARCHS TEXT, PATCHFILES TEXT, PERMIT_DISTFILES_CDROM TEXT NOT NULL, PERMIT_DISTFILES_FTP TEXT NOT NULL, PERMIT_PACKAGE_CDROM TEXT NOT NULL, PERMIT_PACKAGE_FTP TEXT NOT NULL, PKGNAME TEXT, PKGSPEC TEXT, PKG_ARCH TEXT NOT NULL, PSEUDO_FLAVOR TEXT, PSEUDO_FLAVORS TEXT, REGRESS_DEPENDS TEXT, REGRESS_IS_INTERACTIVE TEXT, REVISION TEXT, RUN_DEPENDS TEXT, SEPARATE_BUILD TEXT NOT NULL, SHARED_LIBS TEXT NOT NULL, SHARED_ONLY INTEGER, STATIC_PLIST INTEGER, SUBPACKAGE TEXT, SUPDISTFILES TEXT, TARGETS TEXT NOT NULL, USE_GMAKE INTEGER, USE_GROFF INTEGER, USE_LIBTOOL INTEGER, VMEM_WARNING INTEGER, WANTLIB TEXT, UNIQUE(FULLPKGPATH))
OpenBSD 5.2 amd64
% 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:47:40.867

cnst 你的回答是对的。您也可以使用 . 命令。例如列出您输入的数据库 .databases 并获取表 .tables

尝试 .help 以获得更多可能的命令。

编辑：至于 OpenBSD pkg 信息，您可以在 /var/db/pkg/ 下的目录中以文件系统友好格式找到它们

# android - 在 Android 的 PhoneGap 应用程序中显示地图的选项

> ID：14990278
> 
> 赞同：4
> 
> 时间：2013-02-20T21:28:54.507
> 
> 标签：android, google-maps, cordova, google-maps-api-3

我正在开发适用于 Android 和 iOS 的 PhoneGap 应用程序。该应用程序将包含一个包含多个兴趣点的地图。

我知道以下在 phonegap 应用程序中显示地图的方法：

1.  使用 Google Maps JavaScript API V3。
2.  按照以下博客中的建议，创建一个原生 Android 应用程序并嵌入一个 CordovaWebView：（[链接）](http://www.mooreds.com/wordpress/archives/931)
3.  使用 GMPlugin 等谷歌地图插件，如以下 git repo 所示：（[链接）](https://github.com/imhotep/MapsPluginExample)

还有其他我错过的选择吗？上述选项的好处和并发症是什么？

在此先感谢您的帮助！

# java - Java：按完整与否对一维对象数组进行排序

> ID：14990282
> 
> 赞同：1
> 
> 时间：2013-02-20T21:29:03.193
> 
> 标签：java, arrays

我正在尝试压缩一个对象数组，这些对象将有空项目穿插完整项目。我想把所有的完整元素按照它们开始的顺序放在开头，然后把空元素放在最后。

有问题的对象使用一个字符串字段“name”和一个 int 字段“weight”。空版本分别具有“无名”和 0。因此，该方法需要处理的类型的数组将包含以下内容：

*   弗雷德 | 4
*   鲍勃 | 3
*   没有名字 | 0
*   吉娜 | 9
*   没有名字 | 0
*   由纪 | 7

通过方法喂完后，数组应该是 Fred、Bob、Gina、Yuki，没有名字，没有名字。

我对第一步的想法是弄清楚哪些是满的，哪些不是，所以我想出了这个：

```
public void consolidate() {
    boolean[] fullSlots = new boolean[spaces.length];

    // pass 1: find empties
    for (int i = 0; i < spaces.length; i++) {
        fullSlots[i] = spaces[i].getName().equals("no name");
    }
} 
```

空格是对象数组，getName() 从对象中检索名称字段。

我不知道从这里去哪里。建议？

编辑：好的，这就是 Infested 的想法：

```
public void consolidate()
{
    int numberOfEmpties = 0, spacesLength = spaces.length;
    Chicken[] spaces2 = new Chicken[spacesLength];
    for(int i = 0; i < spaces.length; i++)
    {
        spaces2[i] = new Chicken(spaces[i].getName(),
                                        spaces[i].getWeight());
    }

    // pass 1: find empties
    for (int i = 0, j = 0; i < spacesLength; i++)
    {
        if (spaces2[i].getName().equals("no name") == false)
        {
            spaces[j] = new Chicken(spaces2[i].getName(),
                                        spaces2[i].getWeight());
            j++;
        }
        else
        {
            numberOfEmpties++;
        }
    }
    for (int i = spacesLength - 1; numberOfEmpties > 0 ; numberOfEmpties--, i--)
    {
       spaces[i] = new Chicken("no name", 0);
    }
} 
```

测试和工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:37:18.027

Java`Arrays.sort`是*stable*，这意味着相等元素的相对顺序不会改变。

> 这种排序保证是稳定的：相同的元素不会因为排序而重新排序。

您可以使用排序算法的此属性通过简单的比较器对所有元素进行排序：

```
Arrays.sort(
    spaces
,   new Comparator() {
          public int compare(Object o1, Object o2) {
              MyClass a = (MyClass)o1;
              MyClass b = (MyClass)o2;
              boolean aIsEmpty = "no name".equals(a.getName());
              boolean bIsEmpty = "no name".equals(b.getName());
              if (aIsEmpty && !bIsEmpty) {
                  return 1;
              }
              if (!aIsEmpty && bIsEmpty) {
                  return -1;
              }
              return 0;
          }
    }
); 
```

这会将具有非空名称的所有项目排序在具有空名称的项目之前，使两组对象在各自组中的相对顺序保持不变。

如果您的空间限制允许您创建一个 的新数组`MyClass`，您可以采用更简单的算法：遍历原始数组一次，并计算非空项目的数量。然后创建一个新数组，并创建两个索引：`idxNonEmpty = 0`和`idxEmpty = NonEmptyCount+1`。然后再次遍历原始数组，将非空对象写入`idxNonEmpty++`，并将空对象写入`idxEmpty++`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:44:55.367

我假设它是类的一个方法：

```
public void consolidate()
{
    int lengthOfSpaces = spaces.length , i, numberOfEmpties = 0;
    Type[] spacesNumberTwo = new Type[lengthOfSpaces ];

    // pass 1: find empties
    for (i = 0; i < lengthOfSpaces ; i++)
    {
        if(spaces[i].getName().equals("no name") == false)
             spacesNumberTwo[i] = new Type(spaces[i].getName(), spaces[i].getInt());
        else
          numberOfEmpties++;
    }
    for (i = lengthOfSpaces - 1; numberOfEmpties > 0 ; numberOfEmpties--, i--)
    {
           spacesNumberTwo[i] = new Type("no name", 0);
    }
    spaces = spacesNumberTwo
} 
```

# html - 使用 HTML 和 CSS 的弯曲文本

> ID：14990284
> 
> 赞同：17
> 
> 时间：2013-02-20T21:29:07.657
> 
> 标签：html, css

我知道已经有一篇关于弯曲文本的帖子，但我正在寻找一些具体的东西。

在这个网页 ( [http://mrcthms.com/](http://mrcthms.com/) ) 上，Marc 使用了一种很好的技术来为他的名字弯曲文字，但我终其一生都无法弄清楚如何复制该技术。这是我正在尝试的：

```
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" x-undefined="" />
<title>Curved Text</title>
<style type="text/css">
span {
    display: inline-block;
    font-family: futura-pt, 'Helvetica Neue', sans-serif;
    font-size: 2.5em;
    font-weight: 300;
    margin: 1px;
}

.arced {
    display: block;
    text-shadow: rgba(0, 0, 0, 0.298039) 8px 8px;
    text-align: center;
    margin: 20px;
    padding: 50px 0 50px;
}

div span {
    text-shadow: rgba(0, 0, 0, 0.298039) 8px 8px;
    font-family: futura-pt, 'Helvetica Neue', sans-serif;
    font-size: 2.5em;
    font-weight: 300;
}

.arced > span:nth-child(1) {
    -webkit-transform:translateX(-1px) translateY(68px) rotate(-17deg);
    -webkit-transition:0s;
}
</style>
</head>

<body>
    <span class="arced">
        <span class="char1">S</span>
        <span class="char2">T</span>
        <span class="char2">E</span>
        <span class="char3">V</span>
        <span class="char4">E</span>
</span>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-11-20T05:52:02.813

我遇到了这个名为：[CircleType.js](http://circletype.labwire.ca/)的解决方案。它提供了一种创建循环文本的简短而简单的方法。

```
<h2 id="yourStyle">MARC THOMAS.</h2>

$('#yourStyle').circleType({radius: 800}); 
```

或者你可以使用相当灵活的[lettering.js 。](http://letteringjs.com/)

在此之上使用 CSS/jQuery 添加您的过渡。希望这可以帮助！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-20T21:34:49.713

他对每个字母使用 CSS3 转换。例如，他名字的 HTML 如下：

```
<span class="arced">
    <span class="char1">M</span>
    <span class="char2">a</span>
    <span class="char3">r</span>
    <span class="char4">c</span>
    ...
</span> 
```

反过来，CSS如下：

```
.show .hero h1 .arced > span:nth-child(1) {
    -webkit-transform: translateX(-1px) translateY(68px) rotate(-17deg);
       -moz-transform: translateX(-1px) translateY(68px) rotate(-17deg);
        -ms-transform: translateX(-1px) translateY(68px) rotate(-17deg);
         -o-transform: translateX(-1px) translateY(68px) rotate(-17deg);
            transform: translateX(-1px) translateY(68px) rotate(-17deg);

    -webkit-transition-delay: 0s;
       -moz-transition-delay: 0s;
         -o-transition-delay: 0s;
            transition-delay: 0s;
}

.show .hero h1 .arced > span:nth-child(2) {
    -webkit-transform: translateX(-3px) translateY(39px) rotate(-13deg);
       -moz-transform: translateX(-3px) translateY(39px) rotate(-13deg);
        -ms-transform: translateX(-3px) translateY(39px) rotate(-13deg);
         -o-transform: translateX(-3px) translateY(39px) rotate(-13deg);
            transform: translateX(-3px) translateY(39px) rotate(-13deg);

    -webkit-transition-delay: .04s;
       -moz-transition-delay: .04s;
         -o-transition-delay: .04s;
            transition-delay: .04s;
} 
```

等等。

# javascript - 在javascript中查找两条线之间的曲线

> ID：14990287
> 
> 赞同：0
> 
> 时间：2013-02-20T21:29:21.527
> 
> 标签：javascript, counter, easing

我有一个柜台点票。但是，我只从服务器中提取 30 秒的数字。我希望它在前端看起来相当一致，所以我编写了一个小脚本来跟踪增加的情况，并给它一个很好的线性增加选票，每秒多次。

然而，我似乎不能很好地在不同的速率之间转换——我的大脑锁定了超过线性。

**示例：** 假设我们有 100 票。

预计投票数将在接下来的 30 秒内增加 60，或每 1 秒增加 2 票 (2/1)。我已经可以做到那么远了。

30 秒后，我们从线性收益中获得了 160 票。

现在，预计下一段将在 30 秒内仅增加 20 票，或每 3 秒 (2/3) 2 票。

我不想让投票率突然下降，而是希望在 30 秒后我将获得正确的（180）总票数，计数器会减速（或相应地加速）而不是突然线性变化收益。

```
var t = 0;
function upCount(){
  $("#votecount").text(Math.floor(current + nextInc*(t/60));
  t++;
} 
```

`current`是从服务器报告的当前投票数，并且`nextInc`是在接下来的 30 秒内发生的预测投票数。

`t`是“时间”，每次从服务器拉取ajax时重置为零。这是在 500 毫秒的间隔内。

也许我做错了。欢迎疯狂的想法。如果有帮助，我可以在这里使用 jQuery。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:37:59.087

对您的费率应用指数过滤器怎么样？那是

```
smoothed_rate = (current_rate + c*smoothed_rate) / (1+c) 
```

这为您提供了一个参数 c 来调整平滑。c=0 --> 完全没有平滑。更大的 c --> 更平滑。

如果您还想平滑费率变化，请引入更多积分。您不需要额外的服务器往返。只需复制你得到的。例如，如果您计算 30 秒的速率 x，则假设 3 个间隔，速率 x 为 10 秒，并对它们应用平滑。这为您提供了更高阶的平滑，几乎不需要额外的努力。

# java - Math.round 和 Math.ceil 不工作

> ID：14990290
> 
> 赞同：8
> 
> 时间：2013-02-20T21:29:36.597
> 
> 标签：java

我正在尝试对用户输入进行四舍五入，但我似乎可以让我的 double 舍入为 int。基本上，当我输入 4.4999 时，它不会四舍五入到 5。

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T21:31:53.440

`Math.ceil()` *返回*上限值。它不能改变它作为参数的变量的值，因为 Java 按值传递参数。所以你需要做

```
hours = Math.ceil(hours); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-08-17T15:53:11.230

实际的解决方案是在方法内部使用 double `ceil`。

`Math.ceil(7 * 50 / 100)``3.0`即使从`7*50/100`is产生的实际值也会返回`3.5`。那是因为既然一切都是`int`，结果`350/100`本身就会是`3`。

但是，如果您给出`Math.ceil(7 * 50 / 100D)`，结果将是`4.0`。

因此，`4.999`您的问题中的 应该是 a`double`而不是整数运算的结果，例如`4999/1000`.

只要确保你在 a 中给出的任何东西`ceil`都是`double`而不是`int`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-20T21:31:50.117

两个函数都返回舍入（或上限）值，但不更改作为参数传递的变量。

使用例如。`hours = Math.ceil(hours);`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-20T21:31:27.137

`Math.ciel`返回一个`Double`。像这样的东西应该可以工作（在你的`hours > 0`块内）：

```
cost += Math.ceil(hours) * hourlyRate; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-20T21:33:46.493

您没有将`Math.ceil(hours)`返回的结果分配给，`hours`因此它永远不会四舍五入。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-15T20:50:11.640

```
int a = 15

int b = 2;

int x = (int) Math.ceil( a / b );

int y = (int) Math.ceil( (double) a / (double) b ); 
```

**结果**：

×：7

是：8

# javascript - 使用 dat.gui (HTML5) 带 alpha 的颜色选择器

> ID：14990293
> 
> 赞同：2
> 
> 时间：2013-02-20T21:29:47.080
> 
> 标签：javascript, html, dat.gui

有没有办法获得一个颜色选择器，它使用 dat.gui ( [http://code.google.com/p/dat-gui/](http://code.google.com/p/dat-gui/) ) 修改了 RGBA 颜色的 alpha 通道？

目前我只能使用颜色选择器更改 RGB 值 - 即使颜色选择器接受 alpha 值。

示例（也可用[http://jsfiddle.net/mortennobel/PT3g2/1/](http://jsfiddle.net/mortennobel/PT3g2/1/)）：

```
var ColorObject = function() {
   this.color = [ 0, 128, 255, 0.3 ]; // RGB with alpha
    this.showAlert = function(){
        alert("Color is "+this.color);
    } 
};

var colorObject = new ColorObject();
var gui = new dat.GUI();

gui.addColor(colorObject, 'color');
gui.add(colorObject, 'showAlert'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:59:58.413

我不确定是否有任何简单的方法可以扩展现有库。我刚刚对库本身进行了更改。你可以在这里试试：http: [//jsbin.com/anewaz/2](http://jsbin.com/anewaz/2)

修改后的源代码也在我的 github 上：[https ://github.com/mariozski/datGUIwithAlpha/blob/master/dat.gui.js](https://github.com/mariozski/datGUIwithAlpha/blob/master/dat.gui.js)

希望它会有所帮助:-)

mz

# delphi - 德尔福 XE3 和水晶报表

> ID：14990296
> 
> 赞同：0
> 
> 时间：2013-02-20T21:29:48.980
> 
> 标签：delphi, crystal-reports, delphi-xe3

前段时间（实际上差不多 5 年前）这里发布了一个示例，显示了使用 ActiveX 报表查看器在 Delphi 2007 中显示 Crystal Reports 的方法。我发现它也适用于 Delphi XE3。我有一个问题的片段如下：

```
for i := 1 to oRpt.Database.Tables.Count do begin
oRpt.Database.Tables[i].ConnectionProperties.Item['User ID'] := 'username';
oRpt.Database.Tables[i].ConnectionProperties.Item['Password'] := 'password';
end; 
```

我的问题：由于 oRpt 是一个变体并且没有键入，我如何找到报表查看器的属性并在显示或打印报表的 proc 中设置它们的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T22:56:02.200

阅读文档。:-)

有两种方法可以连接到 ActiveX 服务器：在编译时（早期绑定）或在运行时（后期绑定）。[[ MSDN](http://support.microsoft.com/kb/245115)上的一篇文章对此进行了更详细的解释。

早期绑定是在您使用类型化变量时使用的（例如使用组件面板中的`TWordApplication`或`TExcelApplication`）。类型库用于确定支持哪些类型和接口，可以使用`DispInterface`v-table 中的 a 查找方法；然后编译器可以验证函数是否存在并检查拼写错误等，并找出可用于 Code Completion 和 Code Insight 的功能）。

通过变体（如您的代码片段所示）访问 ActiveX 服务器是`late binding`. 在实际执行代码之前，编译器一无所知，此时会尝试通过`IDispatch`接口调用方法，并且此时它要么成功要么失败。因为编译器对你的变体可能包含什么一无所知，所以在设计或编译时无法知道哪些方法和类型可用。

因为您的代码正在使用后期绑定，所以除了阅读文档（当然，这不是一个真正的选择）之外，没有办法知道哪些属性可能可用。（另一种选择是使用早期绑定，如果有可用于 ActiveX 服务器的类型库，此时您停止使用变体并切换到编译器可以用来确定您可用的接口。）

# c# - C# SetValue TargetException 对象与目标类型不匹配

> ID：14990298
> 
> 赞同：0
> 
> 时间：2013-02-20T21:29:52.480
> 
> 标签：c#, winforms, reflection

我遇到了一个根本无法解决的问题，我已经研究了几个小时但没有任何结果。请帮忙！

我正在尝试做的事情：

我有一个用户控件，它在我的表单上列出了一个类，如果有人在列表中选择了不同的项目，我希望它在主表单上进行更改。

所以我创建了一个事件：

```
 private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (listBox1.SelectedIndex != -1)
        {
            Object item = this.List.GetType().GetProperty("Item").GetValue(this.List, new Object[] { listBox1.SelectedIndex });

            Control a = this.TopLevelControl;
            Object temp = a.GetType().GetProperty("currentExpression").GetValue( a, null );

            a.GetType().GetProperty("currentExpression").SetValue(temp, item, null);

        }
    } 
```

在此代码中，“a”包含主要形式。（这个事件在用户控件中运行）所以我有我需要的一切。

List 对象是一个表达式列表。主窗体上的 currentExpression 属性是一个表达式。

我想将表达式（我称之为 item ）放在属性 currentExpression （这是 MainForm 上的表达式）上。但它总是说“对象与目标类型不匹配”。TargetException 未处理

当我调试时，我可以看到它们都是正确的。（ temp 和 item ）但它仍然抛出异常。

编辑：

我必须说，“List”对象不是 a `List<Something>`，它是要列出的对象，所以 List 是一个对象（对象 List ）。我的用户控件是通用的，这就是我使用反射的原因。

这样我就可以拥有 objectList1.ShowList(ListExpressions, "OriginalExpression");

在这种情况下，ListExpressions 是一个列表，但作为对象发送到用户控件。通过反射我可以检查它是哪种类型的列表，然后读取属性“OriginalExpression”并显示一个列表。

所以我会有一个属性“OriginalExpression”的列表。

用户控件工作正常，问题是使最后一部分工作。当我单击一个项目时，我收到消息“对象与目标类型不匹配。”。

关于如何做到这一点的任何想法？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:54:09.213

为什么你需要用反射来做这一切？你什么都不说。

它看起来像一种复杂的写作方式：

```
var item = this.List[listBox1.SelectedIndex];

var a = this.TopLevelControl;
var temp = a.currentExpression;

temp.currentExpression = item; // ??? 
```

除了最后一行（我标记的`???`）看起来很奇怪，因为你`GetType()`在你的，从类型中`a`找到一个属性，然后用作设置属性的实例（设置为）。这是我正在谈论的问题中的一行：`currentExpression``a`**`temp`**`item`

```
a.GetType().GetProperty("currentExpression").SetValue(temp, item, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:14:44.527

为什么不这样实现：

```
 private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        if ( listBox1.SelectedIndex != -1 )
        {
            var item = this.List.Item[listBox1.SelectedIndex];

            var mainControl = this.TopLevelControl as IExpressionProvider;

            if ( mainControl != null )
                mainControl.CurrentExpression = item;
        }
    } 
```

并在您的主要形式中实现这个简单的接口：

```
public interface IExpressionProvider
{
    YourExpressionType CurrentExpression { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:31:09.517

我解决了问题，

这不是我想要的，但它正在工作！

我改变了

```
Control a = this.TopLevelControl; 
```

到

```
mainForm a = (mainForm)this.TopLevelControl; 
```

和

```
a.GetType().GetProperty("currentExpression").SetValue(temp, (NCalc.Expression)item, null); 
```

到

```
a.currentExpression = ( NCalc.Expression )item; 
```

这解决了我的问题，因为我避免了反思。多谢你们！–

# javascript - 缓冲 - UE：INDEX_SIZE_ERR：DOM 异常 1

> ID：14990302
> 
> 赞同：0
> 
> 时间：2013-02-20T21:30:03.883
> 
> 标签：javascript, jquery

函数导致浏览器chrome出错，如何处理？

[http://jsfiddle.net/6QaWc/](http://jsfiddle.net/6QaWc/)

```
Uncaught Error: INDEX_SIZE_ERR: DOM Exception 1 
pu 
(anonymous function) 
jQuery.event.dispatch
elemData.handle 
```

如果有任何帮助，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:55:29.027

您似乎正在尝试在对象准备好使用之前激活它们。

如果我将您的部分代码包装在“loadeddata”事件中：

```
$(mme).bind('loadeddata', function() { 
    console.log("Data is loaded...");
    gp(); 
    setTimeout(function () {
        gt();
    }, 2500);
}); 
```

错误消失了。现在，我不确定这是否按您想要的方式工作，因为我注意到在那之后进度表的工作方式出现了一些奇怪的行为，但也许这会让您朝着正确的方向轻推以寻求可行的解决方案？

[http://jsfiddle.net/6QaWc/16/](http://jsfiddle.net/6QaWc/16/)

# delphi - 使用 DELPHI 和 INDY 10 组件转发和回复电子邮件

> ID：14990309
> 
> 赞同：2
> 
> 时间：2013-02-20T21:30:40.060
> 
> 标签：delphi, indy, indy10

Indy 组件套件是否提供任何功能或支持或电子邮件**转发** 或**回复**...处理。

我希望邮件正文通过发送参数进行扩展。有时使用其他邮件程序，邮件文本会更改为每行的 > 字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T21:42:11.190

您使用`TIdPOP3`或`TIdIMAP4`来接收电子邮件，并`TIdSMTP`发送电子邮件。回复/转发只是`TIdMessage`通过 POP3/IMAP 下载，根据需要更新其收件人、主题等，然后使用 SMTP 发送。

# linux - sed 替换字符串中的数字

> ID：14990314
> 
> 赞同：4
> 
> 时间：2013-02-20T21:30:55.550
> 
> 标签：linux, macos, bash, sed

我可以替换字符串中的文本，但是一旦我尝试输入数字，它就无法匹配。

**请注意**，这`[0-9]\+\`是导致问题的原因。

这有效：

```
sed -i "" -e "s/mySite-.js/mySite$current_timestamp.js/" template.php 
```

这不会：

```
sed -i "" -e "s/mySite-[0-9]\+\.js/mySite$current_timestamp.js/" template.php 
```

我很抱歉[早些时候问了这个问题，](https://stackoverflow.com/questions/14967483/using-sed-to-replace-old-timestamp-with-current-one)但我已经花了将近一整天的时间在这个愚蠢的事情上，我快疯了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T21:36:24.080

请考虑包括样本数据和预期输出。

如果您想用 删除重复的数字，请`[0-9]\+`尝试删除`\`并使用`[0-9]+`.

如果这不起作用，那么你的 sed 不支持`+`，所以使用

```
 sed -i "" -e "s/mySite-[0-9][0-9]*\.js/mySite$current_timestamp.js/"  template.php 
```

IHTH

# javascript - 图像未加载并推入数组（javascript）

> ID：14990315
> 
> 赞同：1
> 
> 时间：2013-02-20T21:30:58.200
> 
> 标签：javascript, arrays, object, loops

我想通过循环遍历一个名为`GameImages`. 当我在 chrome 中查看开发人员控制台时，我不确定为什么没有加载图像。for 循环是否会中断图像的加载？如何循环加载图像而不是编写每个 onload 函数？

```
var i = 1; //set increment variable

var GameImages = { //object to hold each image

    game1 : new Image(),
    game2 : new Image(),
    game3 : new Image(),
    game4 : new Image(),
    game5 : new Image(),

};

for(gameImage in GameImages) { //loop through each image

    gameImage.onload = function () { //set the onload function for the current image

        gamePosters.push(gameImage);
        console.log(gamePosters.length); //print out the new size of the gamePosters array

    };

    //give source of image. (my images are named game1.jpg, game2.jpg, etc.)
    gameImage.src = "images/assets/posters/games/game" + i + ".jpg";

    i += 1; //increment i
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:39:49.803

这是因为您正在`for (gameImage in GameImages)`循环遍历您的每个 GameImage 对象的属性（即，gameImage 首先是“game1”，然后是“game2”，等等）。将您的代码更改为：

```
for (game in GameImages) {

   var gameImage = GameImages[game]; // This will get your actual Image
   gameImage.onload = function () { 

       gamePosters.push(gameImage);
       console.log(gamePosters.length); 

   };

   //give source of image. (my images are named game1.jpg, game2.jpg, etc.)
   gameImage.src = "images/assets/posters/games/game" + i + ".jpg";

   i += 1; //increment i
} 
```

# magento - 如何在下载前检查 Magento Connect 2.0 扩展源

> ID：14990317
> 
> 赞同：7
> 
> 时间：2013-02-20T21:31:08.813
> 
> 标签：magento

即使使用我的版本控制，我也对安装社区扩展持怀疑态度。有没有办法获取 tgz，以便我可以在安装之前解压缩并检查扩展程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T21:31:08.813

如[本网站](http://turnkeye.com/blog/download-module-archive-magento-connect/)所述，Magento Connect 2.0 具有易于破译的特定格式。首先获得 Magento Connect 2.0 密钥。例子： `http://connect20.magentocommerce.com/community/Raveinfosys_Deleteorder`

然后访问[Magento Commerce 网站以获取该扩展，在“](http://www.magentocommerce.com/magento-connect/asperience-deleteorders.html)**发行说明**”选项卡中找到其版本。对于这个例子，最新版本是 1.0.3

现在，将原始密钥组合到此 URL 中： `http://connect20.magentocommerce.com/community/Raveinfosys_Deleteorder/1.0.3/Raveinfosys_Deleteorder-1.0.3.tgz`

我专门使用此命令将扩展下载到我工作的内部服务器： ...然后我通常会对这些文件进行更改以适合我们的模板，即从 更改为. 一旦我很高兴，我将这些文件、新的 tar-ball 重新添加到我的实时站点，并通过 Magento 根目录下的 ssh shell。
`wget [http://connect20.magentocommerce.com/community/Raveinfosys_Deleteorder/1.0.3/Raveinfosys_Deleteorder-1.0.3.tgz](http://connect20.magentocommerce.com/community/Raveinfosys_Deleteorder/1.0.3/Raveinfosys_Deleteorder-1.0.3.tgz)`
`default/default``default/my_template``tar``scp``tar -xzvf`

我不使用magento connect ...可能应该，只是不能让自己盲目地“信任”它。

或使通用： `http://connect20.magentocommerce.com/community/Package_Name/[ver]/Package_Name-[ver].tgz`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-08T10:25:46.790

一些网站提供链接或代理链接以从 mangento connect 下载任何 mangeto 包作为`.tgz`文件（即 gzip 压缩的 tar 文件）。然后你会得到[标准的 magento PEAR 包](http://www.magentocommerce.com/wiki/7_-_magento_connect/packaging_a_magento_extension)。

这些站点需要*Magento Connect 密钥*来获取包：

1.  [直接下载没有梨的 Magento 扩展 (Tangkoko)](http://www.tangkoko.com/direct-download-magento-extension/)
2.  [下载 Magento 扩展 (http://freegento.com/)](http://freegento.com/ddl-magento-extension.php)（仅最新的软件包版本）

第一个站点提供了 Magento Connect 网络服务器上包的链接，以便您了解它是如何工作的。

对于 Magento Connect 2.0，它还在[一篇博客文章中描述了它的工作原理，并且有一个 bash 脚本](http://turnkeye.com/blog/download-module-archive-magento-connect/)[在 github 上](https://github.com/elcash/mageunit-satellite/blob/master/download_extension_tarball)很好地展示了它。

# c# - Frozen mock 的属性被覆盖

> ID：14990320
> 
> 赞同：3
> 
> 时间：2013-02-20T21:31:22.807
> 
> 标签：c#, unit-testing, moq, autofixture

我遇到了一个问题，AutoFixture 似乎正在覆盖冻结模拟上的属性。模拟类的属性是只读的，根据我的阅读，AutoFixture 不应该尝试对它做任何事情。

我在下面的 LINQPad 中包含了重现该问题的代码。`Victim`是一个具有两个只读属性的普通测试类。问题在于，一旦我为`Things`属性设置了期望并将模拟注册`Object`为 AutoFixture 以返回该`Victim`类型的实例，该集合将`Things`包含不同的字符串。

要重现此问题，请在 LINQPad 中将以下代码作为*C# 程序*运行，并从 NuGet引用*AutoFixture*和*Moq 。*请务必包含命名空间*Moq*和*Ploeh.AutoFixture*。

我的期望是我应该取回我注册的对象，`Register`并且`Things`返回`Victim`的集合应该返回我在调用`SetupGet`.

```
public class Victim
{
    private string _vic;
    private IEnumerable<string> _things;
    public virtual string VictimName { get { return _vic; } }
    public virtual IEnumerable<string> Things { get { return _things; } }
}

void Main()
{
    var fixture = new Fixture();
    var victimName = fixture.CreateAnonymous("VIC_");
    var things = fixture.CreateMany<string>();
    victimName.Dump("Generated vic name");
    things.Dump("Generated things");

    var victimMock = fixture.Freeze<Mock<Victim>>();
    victimMock.SetupGet(x => x.VictimName).Returns(victimName).Verifiable();
    victimMock.SetupGet(x => x.Things).Returns(things).Verifiable();
    fixture.Register(() => victimMock.Object);

    var victim = fixture.CreateAnonymous<Victim>();
    (victim.Equals(victimMock.Object)).Dump("Victims are the same?");
    victim.VictimName.Dump("Returned name");
    victim.Things.Dump("Returned things");
    (things.Equals(victim.Things)).Dump("Returned things are the same?");

    victimMock.Verify();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T22:15:34.120

我的猜测是*Iterator* for`Things`实际上是相同的，但它生成的字符串是不同的。这[实际上是设计使然](http://blog.ploeh.dk/2011/04/18/EnumerablesAreDynamicalsoInAutoFixture.aspx)，尽管我们后来意识到这不是一个特别好的设计决策。

在[AutoFixture 3 中，此行为已更改](https://github.com/AutoFixture/AutoFixture/wiki/AutoFixture-3.0-Release-Notes)。

如果我猜对了，这个问题将在 AutoFixture 3 中消失。在 AutoFixture 2 中，您应该能够通过创建这样的夹具来解决它：

```
var fixture = new Fixture().Customize(new StableMultipeCustomization()); 
```

# jquery - 防止 jquery mobile 改变链接的行为

> ID：14990321
> 
> 赞同：0
> 
> 时间：2013-02-20T21:31:23.347
> 
> 标签：jquery, html, css, wordpress, jquery-mobile

所以我列出了一堆wordpress帖子，当我点击一个标题时，jquery会通过ajax加载我的单个帖子页面，我想，我不想要那个，我只想要一个链接的正常行为，我试过这个：

```
 $('article a').click(function(event){
    event.preventDefault();
    //also possible
    event.stopImmediatePropagation();
}); 
```

但不起作用，我也尝试过但`data-role="none"`仍然没有成功。`data-enhance="false"``<a>`

我的意思是，我可以用 jquery 来监听点击，然后做一个，`window.location`但是这样做会很恶心。

有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:03:20.387

像这样解决：

```
$('article a').click(function(event){
    event.stopImmediatePropagation();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T03:20:43.187

如果您想要链接的正常行为，您是否尝试过`data-ajax="false"`内部`a`标签？

```
<a href="#home" data-role="button" data-icon="home" data-transition="slide" data-inline="true"  data-ajax="false">Home</a> 
```

# ruby - 封送转储格式错误（0xa）

> ID：14990323
> 
> 赞同：1
> 
> 时间：2013-02-20T21:31:28.283
> 
> 标签：ruby, marshalling

我的哈希：

```
$settings =
{
  :first_run=>true, :version=>1.01, :game_variables=>{}, :game_switches=>{9=>false}
} 
```

保存代码：

```
marshal_dump = Marshal.dump($settings)
file = File.new(file_path, 'w')
file.write marshal_dump
file.close 
```

加载代码：

```
$settings = Marshal.load(File.binread(file_path)) 
```

到目前为止，一切仍然有效。但是，只要我将另一个变量添加到 $settings 哈希并保存它，然后尝试加载它：

```
$settings[:test] = 'woohoo!'
save() # saves the hash to disk
load() # loads the hash from disk 
```

它会引发错误：

```
Argument error occured. dump format error(0xa) 
```

**解决方案：（** 感谢 ilan berci）

```
def dump_settings
    File.open(FILENAME,'w') do|file|
      Marshal.dump($settings, file)
    end
  end

  def load_settings
    $settings = if File.exists?(FILENAME)
      File.open(FILENAME) do|file|
        Marshal.load(file)
      end
      else
        create # custom function that fills the $settings for first use
      end
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T21:39:11.273

您正在以二进制模式读取文件，但内容并没有像那样被转储。

利用：

$settings = Marshal.load(File.open(file_path))

# java - Java Swing DatePicker 类似 extjs/eyecon 样式 TopYear 面板和月份选择器面板

> ID：14990325
> 
> 赞同：0
> 
> 时间：2013-02-20T21:31:37.643
> 
> 标签：java, swing, datepicker

任何人都使用 java swing 日期选择器/日期选择器/日历组件从 JTextField/JCombobox 组件中选择日期。该组件具有类似 extjs/eyecon 的样式，TopPanel 用于年份选择和月份面板用于选择月份。任何人都在日历组件上使用或创建了这 3 个导航面板。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:44:22.847

我认为这可能对你有用

[http://www.roseindia.net/tutorial/java/swing/datePicker.html](http://www.roseindia.net/tutorial/java/swing/datePicker.html)

# mysql - MySQL如何在查询中将00-00-000转换为CURDATE

> ID：14990329
> 
> 赞同：1
> 
> 时间：2013-02-20T21:31:59.783
> 
> 标签：mysql

我想要的是这个。

有时，我的数据库中的日期字段充满了 0000-00-00，这非常好。我将数据放入表中没有问题。所以我不是在寻找将我的表从 0000-00-00 更改为 NULL 的解决方案。

我想将 0000-00-00 替换/转换为 CURDATE 或 NOW，但我还没有找到任何解决方案。

我目前使用的查询如下所示：

```
$sql = "(SELECT
            date_format (dat_start, '%d-%m-%Y') AS dat_start,
            date_format (dat_eind, '%d-%m-%Y') AS dat_eind,
            o.nm,
    o.acroniem,
    o.orgid,
            r.naam,
    r.rolid,

                (SELECT COUNT(*)
                    FROM
                        relatie re2
                    WHERE 
                        re2.organ_orgid = relatie.organ_orgid
        AND
            re2.rolid_rol = relatie.rolid_rol
                    AND re2.dat_start 
                        BETWEEN dat_start AND dat_eind
                    AND re2.dat_eind 
                        BETWEEN dat_start AND dat_eind

                ) AS aantal

        FROM
            relatie

        LEFT JOIN
            organ o
                ON
                    o.orgid = relatie.organ_orgid
        LEFT JOIN
            rollen r
                ON
                    r.rolid = relatie.rolid_rol

        WHERE 
            relatie.pers_persid = '$persid2'

        ORDER BY dat_start DESC
        ) 
```

我怎样才能做到这一点？我希望我的问题足够清楚。我可以找到很多关于将数据放入表中的信息，但几乎没有关于上述情况的信息。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:36:08.033

您可以使用这样的表达式代替`date_column`（应将其替换为列的名称）：

```
CASE
    WHEN date_column = '0000-00-00' THEN CURDATE
    ELSE date_column
END 
```

例如，在查询中：

```
SELECT
    field_a,
    field_b,
    CASE
        WHEN date_column = '0000-00-00' THEN CURDATE
        ELSE date_column
    END AS adjusted_date_column

FROM a_table

WHERE ...; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T21:37:05.870

您可以使用[`IF`](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_if)来检查该字段是否`'0000-00-00'`存在。

```
DATE_FORMAT(IF(dat_start = '0000-00-00', NOW(), dat_start), '%d-%m-%Y') AS dat_start 
```

# java - 获取在 void 方法中生成的随机数的名称

> ID：14990332
> 
> 赞同：1
> 
> 时间：2013-02-20T21:32:07.283
> 
> 标签：java, android, methods

我正在编写 Android 应用程序编程教程，并且正在创建一个允许用户在屏幕上进行手指绘画的程序。点的大小是随机的，我想要一个标签来告诉你点有多大。

```
private void canvasTouched(int x, int y) {
    float dotSize = new Random().nextInt(33);
    myCanvas.DrawCircle(x, y, dotSize);
    lblStatus.Text("  touchX/touchY:" + x + "/" + y + " touches: " + ++numTouches);
} 
```

上面的代码在前两行中创建了点的大小。

```
dotSize = new Label(hr);
dotSize.Text(); 
```

这段代码将`dotSize`标签放在水平线中，第二个放在文本中。

现在，我应该将`canvasTouched`方法更改为浮点数并返回点的大小吗？我怎么把它放进`dotSize.Text()`零件里？

我是否做类似的事情：

```
dotSize.Text(canvasTouched.dotSize); 
```

该代码不起作用，但是获取点大小的正确语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:50:37.450

假设该片段中的其余代码不是真正的代码......

```
 DoubleFormatter df = new DoubleFormatter(4,6);
     String dotSizeText = df.format(dotSize);
     lblDotSize.setText(dotSizeText); 
```

假设您已经与采用整数 resourceId 参数（字符串 ID，而不是整数）的 Label.setText 的重载发生冲突。

# ruby-on-rails - Heroku 上的延迟作业工作者尝试连接只读追随者

> ID：14990333
> 
> 赞同：0
> 
> 时间：2013-02-20T21:32:10.060
> 
> 标签：ruby-on-rails, postgresql, heroku, delayed-job, readonly

这是来自日志文件的实际错误：

```
2013-02-20T20:56:03+00:00 app[worker.1]:   SQL (11.1ms)  UPDATE "delayed_jobs" SET locked_by = null, locked_at = null WHERE (locked_by = 'host:05c659a5-86fd-46dd-b139-263e49a96171 pid:2')
2013-02-20T20:56:03+00:00 app[worker.1]: rake aborted!
2013-02-20T20:56:03+00:00 app[worker.1]: PG::Error: ERROR:  cannot execute UPDATE in a read-only transaction
2013-02-20T20:56:03+00:00 app[worker.1]: : UPDATE "delayed_jobs" SET locked_at = '2013-02-20 20:56:02.982379', locked_by = 'host:05c659a5-86fd-46dd-b139-263e49a96171 pid:2' WHERE id IN (SELECT  id FROM "delayed_jobs"  WHERE ((run_at <= '2013-02-20 20:56:02.882553' AND (locked_at IS NULL OR locked_at < '2013-02-20 16:56:02.882574') OR locked_by = 'host:05c659a5-86fd-46dd-b139-263e49a96171 pid:2') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING * 
```

此错误也出现在关注者日志中。这就是为什么假设存在问题。延迟作业版本：3.0.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:49:40.803

最近的更新似乎出现了这个问题。有关详细信息，请参阅此 Github 问题： [https ://github.com/collectiveidea/delayed_job_active_record/issues/34](https://github.com/collectiveidea/delayed_job_active_record/issues/34)

对我来说，降级到 0.3.3 有效。

# jasmine - 从 grunt-contrib-jasmine 记录

> ID：14990335
> 
> 赞同：17
> 
> 时间：2013-02-20T21:32:12.143
> 
> 标签：jasmine, gruntjs

我正在使用 grunt-contrib-jasmine 来运行我的 javascript 规范。运行规范时如何将调试输出写入控制台，即如何获取

```
console.log("something"); 
```

在控制台中显示输出？我确实发现我可以通过运行得到输出：

```
 $ grunt jasmine --verbose 
```

但这会打印出很多我不感兴趣的信息。我怎样才能看到来自 console.log 的输出？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-05-24T14:59:49.810

使用`console.info`代替`console.log`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-09T15:09:41.910

不是解决方案，而是解决方法（有点）。放入`expect("something").toBe(null);`这将使茉莉花写出一条错误消息，例如：`Expected 'something' to be null.`这样你就可以窥视对象（`expect(element).toBe(null);`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-05T01:06:36.547

您也可以使用`dump(variable)`或`console.log(variable)`。 [来源是优秀的Moo年。](http://www.yearofmoo.com/2013/09/advanced-testing-and-debugging-in-angularjs.html)

# c++ - C++ Diamond 控制台输出问题

> ID：14990338
> 
> 赞同：0
> 
> 时间：2013-02-20T21:32:21.353
> 
> 标签：c++, for-loop, visual-c++, cin

我试图让我的 for 循环在给定用户特定的最大值和最小值的情况下输出菱形，甚至不允许输入。任何想法，将不胜感激。练习并不像我想象的那么顺利。

```
#include <iostream>
#include <iomanip>

using namespace std;

int main()
{

int rows, count;

cout<<"What is the width of the diamond (3 to 21, odd values only): ";
cin>>rows;

//Error checking
if(rows < 1 || rows > 25)
    {
        cout<<"Invalid. please enter an odd number from 1 to 25: ";
        cin>>rows;
    }

//Ascending
for (count = 1; count < rows; count += 1)       
    {
        for (int rows = 0; rows < count; rows ++)
        cout<<"*";
        cout<<endl;
    }

//Descending
for (count; count > 0; count -= 1)              
    {
        for (int rows = 0; rows < count; rows ++)
        cout<<"*";
        cout<<endl;
    }

cin.get();
cin.get();

return 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:19:08.033

这执行了目标的前半部分：

```
for (int stars = 1; stars <= rows; stars+=2)
{
        int padding = rows - stars;
        for (int c = 0; c < padding/2; ++c)
           cout<<" ";
        for (int s = 0; s < stars; ++s)
           cout<<"*";
        cout<<endl;
} 
```

# cmake - CMake 错误：TARGETS 没有为共享库目标指定 LIBRARY DESTINATION

> ID：14990343
> 
> 赞同：39
> 
> 时间：2013-02-20T21:32:35.817
> 
> 标签：cmake, lemon-graph-library

使用 CMake 构建开源项目时（在我的例子中，它是柠檬图形库），当我尝试通过以下方式构建共享库时出现此错误`-DBUILD_SHARED_LIBS=1`：

```
TARGETS given no LIBRARY DESTINATION for shared library target 
```

这个错误来自哪里，我该如何解决？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-20T21:32:35.817

在我的`CMakeLists.txt`中，我的 INSTALL 命令没有 LIBRARY 参数。

从此改变：

```
INSTALL(
  TARGETS lemon
  ARCHIVE DESTINATION lib
  COMPONENT library
) 
```

对此：

```
INSTALL(
  TARGETS lemon
  ARCHIVE DESTINATION lib
  LIBRARY DESTINATION lib  # <-- Add this line
  COMPONENT library
) 
```

解决了我的问题。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-06-09T14:58:58.357

我明白了...发生这种情况的另一个原因是当您创建共享库时

add_library(${NAME} 共享资源)

然后当 Cmake 到达 Windows 平台上的安装命令时，它会抱怨这些错误，解决方案是使用 RUNTIME 而不是 LIBRARY，比如

```
if(WIN32)
  install(TARGETS ${NAME}
    RUNTIME DESTINATION path)
else()
  install(TARGETS ${NAME}
    LIBRARY DESTINATION path)
endif() 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-08-03T12:52:24.920

之后`DESTINATION`，它应该有`bin`, `lib`, `include`。

安装`lib`或`bin`

```
install(TARGETS snappy
        EXPORT SnappyTargets
        # RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR} # DESTINATION error
        RUNTIME DESTINATION bin ${CMAKE_INSTALL_BINDIR} # should add bin or other dir
        LIBRARY DESTINATION lib ${CMAKE_INSTALL_LIBDIR}
        # ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR # DESTINATION error
        ARCHIVE DESTINATION lib ${CMAKE_INSTALL_LIBDIR} # should add lib
) 
```

例如安装`.h`文件：

```
install(
        FILES
        "${PROJECT_SOURCE_DIR}/test_hard1.h"
        "${PROJECT_BINARY_DIR}/config.h"
        # DESTINATION ${CMAKE_INSTALL_INCLUDEDIR} #  error install FILES given no DESTINATION!

        # add include after DESTINATION, then it works
        DESTINATION include ${CMAKE_INSTALL_INCLUDEDIR}
) 
```

有关更多详细信息，请参见[https://cmake.org/cmake/help/v3.0/command/install.html ：](https://cmake.org/cmake/help/v3.0/command/install.html)

```
install(TARGETS myExe mySharedLib myStaticLib
        RUNTIME DESTINATION bin
        LIBRARY DESTINATION lib
        ARCHIVE DESTINATION lib/static)
install(TARGETS mySharedLib DESTINATION /some/full/path) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-17T13:46:21.850

我刚刚遇到了类似的问题。正如@Fernando 在他的回答中所说，您可以采用该解决方案。另一个类似的解决方案是`include(GNUInstallDirs)`

```
include(GNUInstallDirs)
install(TARGETS ${PROJECT_NAME}
    EXPORT "${PROJECT_NAME}Config"
    ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR}
    LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
    RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR}
) 
```

# css - 浮动内容后列表项编号显示不正确

> ID：14990347
> 
> 赞同：0
> 
> 时间：2013-02-20T21:32:43.007
> 
> 标签：css, list, css-float

我有一个列表，其中编号位于每个列表项内。每个列表项都包含浮动内容，向左或向右浮动。问题是列表编号被渲染到第一个左浮动元素的右侧，而编号是每一行的第一件事。

这是[该问题的一个工作示例](http://jsbin.com/ulebus/6/edit)。我发现这个问题发生在 Chrome、Firefox 和 IE9 中（尚未测试其他浏览器）。我还在下面包含了相关代码。

**HTML：**

```
<ol>
    <li>
        <div class="name">Fingers</div>
        <div class="count">10</div>
    </li>
    <li>
        <div class="name">Arms</div>
        <div class="count">2</div>
    </li>
    <li>
        <div class="name">Heads</div>
        <div class="count">1</div>
    </li>
</ol> 
```

**CSS：**

```
ol {
    list-style: decimal inside none;
}

ol li .name {
    float: left;
    width: 100px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

ol li .count {
    float: right;
    text-align: right;
    width: 30px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
} 
```

**编辑：**根据我下面的评论，编号保留在列表项内很重要。原因是我想要每个列表项之间的边框，并且我希望编号在边框的框架内，而不是在边框之外。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T21:45:09.813

更新：

```
ol li {
  padding: 4px;
  border-bottom: 1px solid #ccc;

}

ol {
    list-style: decimal inside;
}

ol li .name {
    display: inline-block;
    vertical-align: text-bottom;
    width: 100px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

ol li .count {
    display: inline-block;
    vertical-align: text-bottom;
    text-align: right;
    width: 30px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
} 
```

# sql - 从包含 N 的表列中选择前 N 行

> ID：14990349
> 
> 赞同：3
> 
> 时间：2013-02-20T21:32:45.713
> 
> 标签：sql, tsql, select, sql-server-2008-r2

TSQL 2008 R2

对于给定的 PO#，我有重复的行项目，每个项目都有自己的唯一 ID。我需要删除重复项。我不知道每个 PO# 有多少重复项。因为有一个#LineItems 我知道我只想要第一个（顶部）x（#lineIems）行项目。

我有一张这样的桌子：

```
LineitemID PO#     #LineItems
---------- ------- ----------
11111111   12345   3
22222222   12345   3
33333333   12345   3
44444444   12345   3
55555555   12345   3
66666666   12345   3
77777777   54321   2
88888888   54321   2
99999999   54321   2
10101010   54321   2
... 
```

我需要这样的表：

```
LineitemID PO#     #LineItems
---------- ------- ----------
11111111   12345   3
22222222   12345   3
33333333   12345   3
77777777   54321   2
88888888   54321   2
... 
```

所以基本上有办法做这样的事情：

```
DECLARE @top int = (SELECT TOP 1 FROM tblLineItems t WHERE t.PO# = @PO)

SELECT TOP (@top)
FROM tblLineItems 
```

并为每个 PO 执行此操作#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:35:52.247

```
delete t from (select *, rank = row_number() over (partition by PO# order by lineitemid) 
               from table ) t 
where rank > #lineitems 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T21:41:45.623

删除了facepalm后的第一个答案。

您的示例的唯一问题是您没有在 TOP 查询中 ORDER BY ，这可能会以任何顺序提取结果。此查询假定您按 LineItemID（整数类型）ASC 进行排序。

```
DECLARE @LineItems TABLE
(
    LineItemID INT
    , PO INT
    , NumLineItems INT
)

INSERT INTO @LineItems (LineItemID, PO, NumLineItems)
SELECT 11111111,   12345,   3
UNION ALL SELECT 22222222,   12345,   3
UNION ALL SELECT 33333333,   12345,   3
UNION ALL SELECT 44444444,   12345,   3
UNION ALL SELECT 55555555,   12345,   3
UNION ALL SELECT 66666666,   12345,   3
UNION ALL SELECT 77777777,   54321,   2
UNION ALL SELECT 88888888,   54321,   2
UNION ALL SELECT 99999999,   54321,   2
UNION ALL SELECT 10101010,   54321,   2

DELETE b
FROM
(
    SELECT *
        , RANK() OVER (PARTITION BY PO, NumLineItems ORDER BY LineItemID ASC) AS r
    FROM @LineItems
) a
JOIN @LineItems b
    ON a.LineItemID = b.LineItemID
WHERE r > a.NumLineItems

SELECT *
FROM @LineItems
ORDER BY PO, LineItemID 
```

# python - 将 dijkstras 转换为 a* python

> ID：14990359
> 
> 赞同：1
> 
> 时间：2013-02-20T21:33:13.353
> 
> 标签：python, algorithm, artificial-intelligence, dijkstra, a-star

所以，假设我有一些代码在`dijkstras.py`给定图形 G 的情况下执行 dijkstras。

```
def shortest_path(G, start, end):
   def flatten(L):       # Flatten linked list of form [0,[1,[2,[]]]]
      while len(L) > 0:
         yield L[0]
         L = L[1]
   q = [(0, start, ())]  # Heap of (cost, path_head, path_rest).
   visited = set()       # Visited vertices.
   while True:
      (cost, v1, path) = heapq.heappop(q)
      if v1 not in visited:
         visited.add(v1)
         if v1 == end:
            return [('cost', cost)] + [('path', list(flatten(path))[::-1] + [v1])]
         path = (v1, path)
         for (v2, cost2) in G[v1].iteritems():
            if v2 not in visited:
               heapq.heappush(q, (cost + cost2, v2, path)) 
```

G 是这样的：

```
 G = {
                's': {'u':10, 'x':5},
                'u':{'v':1, 'x':2},
                'v':{'y':4},
                'x':{'u':3, 'v':9, 'y':2},
                'y': {'s':7, 'v':6}
        } 
```

我们将如何转换现有的算法，`shortest_path(G, start, end)`以最少的修改来利用 a*。

我在想的是：

```
def shortest_path(G, start, end, h): #where h is the heuristic function
   def flatten(L):       # Flatten linked list of form [0,[1,[2,[]]]]
      while len(L) > 0:
         yield L[0]
         L = L[1]
   q = [(0, start, ())]  # Heap of (cost, path_head, path_rest).
   visited = set()       # Visited vertices.
   while True:
      (cost, v1, path) = heapq.heappop(q)
      if v1 not in visited:
         visited.add(v1)
         if v1 == end:
            return [('cost', cost)] + [('path', list(flatten(path))[::-1] + [v1])]
         path = (v1, path)
         for (v2, cost2) in G[v1].iteritems():
            if v2 not in visited:
               heapq.heappush(q, (cost + cost2 + h(v2), v2, path)) #modification here 
```

但我什至还没有运行它，所以我不知道它会如何运行。在我开始编写更多代码之前，我只是想从某人那里得到这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:14:20.750

正如阿尔法所建议的那样，正确的解决方案是使用`cost + cost2 + h(v2)`.

# apache - Apache 不会以 httpd.conf 中路径名中的空格开头（即使带有引号）

> ID：14990360
> 
> 赞同：5
> 
> 时间：2013-02-20T21:33:18.753
> 
> 标签：apache, wampserver, httpd.conf

**问题**

如果虚拟主机配置中的路径名中有空格，Apache 将不会启动。

通常的解决方案是将路径名用双引号引起来，但这并不能解决问题。

我想在我的路径名中有空格，因此更改为破折号或其他不是真正的选择。

与下面没有空格的非常相同的配置有效。

**样本**

```
<VirtualHost *:80>
    DocumentRoot "C:/Users/Patrick/Google Drive/Projects/My Project"
    ServerName local.example.com
    ServerAlias local.example.com
    <Directory "C:/Users/Patrick/Google Drive/Projects/My Project">
    Options Indexes FollowSymLinks ExecCGI Includes
        AllowOverride All
        Order allow,deny
        Allow from all
        <IfModule mod_php5.c>
            php_admin_flag engine on
            # choose the one you want:
            # This is for E_ALL & ~E_STRICT & ~E_DEPRECATED
            # php_admin_value error_reporting 22527
            # This is for E_ERROR
            php_admin_value error_reporting 1
        </IfModule>
    </Directory>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T21:35:51.830

你试过 DocumentRoot "C:/Users/Patrick/Google\ Drive/Projects/My\ Project" 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-26T03:30:52.477

我通过使用 DOS 8.3 路径让它工作：

```
c:/users/patric~1/google~1/projec~1/myproj~1 
```

`dir /x`您可以通过在命令行上使用来查看 DOS 路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-28T09:45:55.820

将目录路径放在双引号中，例如：

```
DocumentRoot  "C:\Users\Touhid Mia\OneDrive\xxx"
<Directory  "C:\Users\Touhid Mia\OneDrive\xxxxx"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-03T15:40:42.507

如果您仍在寻找解决方案，您可以尝试创建一个联结，让您将根文件夹的内容重新定位到带有空格的路径中。我这样做了，它无缝地工作。

您需要来自 Microsoft 的[Junction 。](http://technet.microsoft.com/en-us/sysinternals/bb896768)我认为你可以在没有它的情况下创建连接，但它更难。

创建一个`apache_root.bat`文件以将命令传递给 junction.exe 并在删除联结并需要重新创建它时重用它：

```
"G:\SysinternalsSuite\junction.exe" "G:\UniServerZ\www\test" "G:\Google Drive\test" 
```

1.  第一个字符串是 juction.exe 的路径。如果 .bat 文件位于同一文件夹中，我认为您只能编写“junction.exe”；
2.  第二个字符串是连接文件夹的路径。在我的情况下，这个“测试”文件夹被 **创建**；
3.  第三个字符串是连接文件夹的**来源**。在我的情况下，这个“测试”文件夹**存在**并且有子文件夹。

我使用的是可移植的 Uniform Server，它在 UniServerZ 文件夹中有根文件夹“www”。每次更新服务器时，我都会删除整个 UniServerZ 文件夹并运行 .bat 文件以重新创建连接文件夹“test”。

当然，删除联结时不会删除源文件夹。当心我在您的配置文件中提到的 SymLinks，它们确实会删除源文件夹。我几乎把我的 Windows 搞砸了，删除了一个符号链接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-04T19:03:35.210

当 Dropbox 将我的文件夹名称从 E:\Dropbox 更改为 E:\Dropbox (Completa Content) 时，我遇到了同样的问题，并且在我的文档根目录中它看起来像这样：DocumentRoot E:/Dropbox，当我将其更改为 E: /Dropbox（完整内容），给出了错误。经过几次尝试，我意识到它只是把双引号 DocumentRoot "E:/Dropbox (Completa Content)" 和它的工作原理

# scala - 光滑的左外连接获取整个连接行作为选项

> ID：14990365
> 
> 赞同：11
> 
> 时间：2013-02-20T21:33:41.427
> 
> 标签：scala, left-join, option, slick

我的加入看起来像这样：

```
def byIdWithImage = for {
    userId <- Parameters[Long]
    (user, image) <- Users leftJoin RemoteImages on (_.imageId === _.id) if user.id === userId
} yield (user, image) 
```

但是当 user.imageId 为空时，slick 在运行时失败

> [SlickException：读取 RemoteImage.url 列的 NULL 值]

将产量更改为

```
} yield (user, image.?) 
```

给我一个编译时异常，它只适用于个别列

> 找不到 scala.slick.lifted.TypeMapper [image.type] 类型的证据参数的隐式值

会有不同的方式来完成我在这里尝试做的事情吗？（在单个查询中）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T08:56:03.450

在我的脑海中，我会使用自定义映射投影。像这样的东西：

```
case class RemoteImage(id: Long, url: URL)

def byIdWithImage = for {
    userId <- Parameters[Long]
    (user, image) <- Users leftJoin RemoteImages on (_.imageId === _.id) if user.id === userId
} yield (user, maybeRemoteImage(image.id.? ~ image.url.?))

def maybeRemoteImage(p: Projection2[Option[Long], Option[URL]]) = p <> ( 
  for { id <- _: Option[Long]; url <- _: Option[URL] } yield RemoteImage(id, url),
  (_: Option[RemoteImage]) map (i => (Some(i id), Some(i url)))
) 
```

使用 scalaz (和它的`ApplicativeBuilder`) 应该有助于减少一些样板文件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-30T10:20:16.210

使用下面的代码，您可以这样说：**yield (user, image.maybe)**

```
case class RemoteImage(id: Long, url: URL)

class RemoteImages extends Table[RemoteImage]("RemoteImage") {
    def id = column[Long]("id", O.PrimaryKey, O.AutoInc)
    def url = column[URL]("url", O.NotNull)
    def * = id.? ~ url <> (RemoteImage.apply _, RemoteImage.unapply _)

    def maybe = id.? ~ url.? <> (applyMaybe,unapplyBlank)

    val unapplyBlank = (c:Option[RemoteImage])=>None        

    val applyMaybe = (t: (Option[Long],Option[URL])) => t match {
        case (Some(id),Some(url)) => Some(RemoteImage(Some(id),url))
        case _ => None
    } 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-28T04:39:20.923

我在我的 play-slick 示例应用程序中为此集成了帮助程序，它允许您调用`image.?`

看到[.? 调用](https://github.com/cvogt/play-slick/blob/scaladays2013/samples/computer-database/app/controllers/Application.scala#L197)，[定义？](https://github.com/cvogt/play-slick/blob/scaladays2013/samples/computer-database/app/models/schema.scala#L48)以及[mapOption 的定义](https://github.com/cvogt/play-slick/blob/scaladays2013/samples/computer-database/app/util/projections.fm)。

# c# - ASP.NET 树视图 + AJAX

> ID：14990368
> 
> 赞同：0
> 
> 时间：2013-02-20T21:33:49.750
> 
> 标签：c#, asp.net, ajax

我有一个用于显示目录结构的树视图。我试图通过在节点扩展上加载子节点来减少加载时间。有没有办法做到这一点？

下面是我目前用来填充树视图的代码：

```
protected void Page_Load(object sender, EventArgs e) {
    BuildTree(Request.QueryString["path"]);
}
private void BuildTree(string dirPath)
{
    //get root directory
    System.IO.DirectoryInfo rootDir = new System.IO.DirectoryInfo(dirPath);

    //create and add the root node to the tree view
    TreeNode rootNode = new TreeNode(rootDir.Name, rootDir.FullName);
    TreeView1.Nodes.Add(rootNode);

    //begin recursively traversing the directory structure
    TraverseTree(rootDir, rootNode);
}
private void TraverseTree(System.IO.DirectoryInfo currentDir, TreeNode currentNode)
{
    //loop through each sub-directory in the current one
    foreach (System.IO.DirectoryInfo dir in currentDir.GetDirectories())
    {
            //create node and add to the tree view
            TreeNode node = new TreeNode(dir.Name, dir.FullName);
            currentNode.ChildNodes.Add(node);

            //recursively call same method to go down the next level of the tree
            TraverseTree(dir, node);
    }

    foreach (System.IO.FileInfo file in currentDir.GetFiles())
    {
        TreeNode node = new TreeNode(file.Name, file.FullName);
        currentNode.ChildNodes.Add(node);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:30:59.280

用于按需加载节点，这意味着只有在展开父节点时才会加载节点的子节点。执行以下步骤：

1 - 将[TreeView.ExpandDepth](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treeview.expanddepth.aspx)设置为*0*。这消除了在 中添加的`TreeNode`对象的扩展，并在属性设置为*true*的每个对象旁边`TreeView`显示扩展符号**[+]**。`TreeNode``TreeNode.PopulateOnDemand`

 *2- 将每个*分支的*[TreeNode.PopulateOnDemand](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treenode.populateondemand.aspx)设置为*True*。当集合为*空*时，扩展符号**[+]**将仅显示在属性设置为*true*的对象旁边。 *`TreeNode``TreeNode.ChildNodes`***`TreeNode``TreeNode.PopulateOnDemand`****

 *****3- 处理[TreeView.TreeNodePopulate](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treeview.treenodepopulate.aspx)事件以在展开时填充分支节点。当 a `TreeNode`-`TreeNode.PopulateOnDemand`设置为*true* - 在事件被触发之前被展开时，这个`TreeView.TreeNodeExpanded`事件将被触发。

来源：[ASP.NET TreeView 和按需加载数据](https://stackoverflow.com/questions/3839862/asp-net-treeview-and-loading-data-on-demand)******

# css - Stylus 变量范围如何跨文件工作？

> ID：14990369
> 
> 赞同：13
> 
> 时间：2013-02-20T21:33:58.177
> 
> 标签：css, stylus

理想情况下，我想设置一个文件“colors.styl”，我可以在其中定义整个站点使用的所有颜色，如下所示：

```
// --------------- GENERAL VARIABLE DEFINITIONS
$beige        = #F2F2F2
$darkGrey     = #282828
$errorRed     = #B94A48 
```

当我尝试在其他文件中访问这些变量时，我只是取回变量名而不是解析值：

```
body {
  background-color: $beige; 
```

我正在按顺序编译文件，所以 colors.styl 排在其余部分之前。变量是否会在 Stylus 中的文件中失去作用域？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-24T00:26:56.647

除了`@import "colors"`在每个文件中都做，您还可以制作一个主加载器文件，如下所示：

```
 @import "colors"

 @import "styles1"
 @import "styles2" 
```

在colors.styl 中定义的变量将在styles1.styl 和styles2.styl 中可用。stylus 的输出将是一个包含所有样式的大 css 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T22:04:04.690

是的，变量在文件中失去了作用域。

但是您可以[`@import color`](http://learnboost.github.com/stylus/docs/import.html)在其他文件中访问这些变量。

# macos - 在 Outlook 11 中使用 applescript 设置多个签名

> ID：14990370
> 
> 赞同：2
> 
> 时间：2013-02-20T21:33:59.170
> 
> 标签：macos, outlook, applescript, signatures

我正在尝试创建一个 Applescript 用于 Outlook 11 for Mac 中的外发电子邮件，以根据发件人地址动态设置邮件中的电子邮件签名。我在 Outlook 中有多个帐户，并想根据我正在使用的帐户更改签名。下面是我一直在尝试的代码，但没有任何成功。有什么建议吗？

```
tell application "Microsoft Outlook"
    if message sender contains {name:"emailaddress"} then
        set the message signature to signature {name:"signaturename"}
    else
        set the message signature to signature {name:"signaturename2"}
    end if
end tell 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:19:16.813

如果我理解您的问题，我认为 Outlook 2011 内置了此功能，无需任何脚本。

1.  单击 Outlook 菜单中的“Outlook”，然后单击“首选项...”
2.  点击“签名”图标
3.  如果您还没有这样做，请设置您需要的签名，并给它们起有意义的名字
4.  单击“默认签名...”按钮
5.  将相关签名与您需要的每个帐户相关联

使用它似乎有一点技巧。如果您希望帐户 X 的签名自动出现在新邮件中，则必须先从帐户 X 中选择一个文件夹，然后再创建新邮件。如果您这样做，则该消息应包含您为该帐户设置的正确签名。

# jsp - apache tile：表达式语言停止与 maven 一起工作

> ID：14990371
> 
> 赞同：0
> 
> 时间：2013-02-20T21:34:04.587
> 
> 标签：jsp, maven, el, tiles

我有一个 spring-3.2.1/tiles-3.0.1 项目，在那里我使用了表达式语言来处理瓷砖。这意味着诸如`${jukebox.name}`在平铺属性表达式中工作的表达式（`Metal Jukebox`例如打印）。这是我的`tiles.xml`文件：

```
<definition name="t.jukebox" extends="t.base">
    <put-attribute name="body" value="/WEB-INF/jsp/jukebox.jsp"/>
    <put-attribute name="title" expression="${jukebox.name} - lyricsBase"/>
</definition>

<definition name="t.song" extends="t.base">
    <put-attribute name="body" value="/WEB-INF/jsp/song.jsp"/>
    <put-attribute name="title" expression="${song.title} - ${song.author} in ${jukebox.name}"/>
</definition>

<definition name="t.static/about" extends="t.base">
    <put-attribute name="body" value="/WEB-INF/static/about.jsp"/>
    <put-attribute name="title" value="lyricsBase: about"/>
</definition> 
```

我的控制器如下所示 - 一个对象被传递给布局，它有一些特定的 getter 方法（例如 getName()）：

```
public ModelAndView handleRequest(
        HttpServletRequest httpServletRequest,
        HttpServletResponse httpServletResponse) throws Exception {
    return new ModelAndView("t.jukebox", "jukebox", facade);
} 
```

一切正常。最近，我决定搬到Maven。完成所有工作后，所有依赖项都已修复并成功构建，但我失去了动态切片表达式功能，找不到原因。有人建议添加

```
<%@ page isELIgnored="false" %> 
```

到页面，但我不知道具体在哪里。到基本平铺布局还是到子级？我有一个 include.jsp，包含在所有 jsp 文件中，其中我有所有标记库，但添加`elignored=false`没有帮助。

Maven很可能与这一切无关，我只是不知道在哪里寻找解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:03:03.787

好吧，它与maven有关。我忘了添加对[tiles-el.jar](http://mvnrepository.com/artifact/org.apache.tiles/tiles-el)的依赖。但是没有抛出异常 - 这使得很难发现问题。感谢[另一个帖子](https://stackoverflow.com/a/13237155/769384)

# facebook - facebook - 如何使用 phpsdk 和 js sdk 获取用户 ID

> ID：14990372
> 
> 赞同：0
> 
> 时间：2013-02-20T21:34:10.593
> 
> 标签：facebook, facebook-javascript-sdk

我正在实现我的 fb 应用程序，它已连接到它自己的 fb 粉丝专页。我需要获取用户名、ID 等用户信息，但是当我点击“Facebook 身份验证”链接时，我最终会转到一个空白页面？你可以在这里查看我的代码：http: [//codepad.org/f0Tuh63v](http://codepad.org/f0Tuh63v)

```
 error_reporting(E_ALL);
 ini_set('display_errors', true);

 require 'facebook/facebook.php';

   $facebook = new Facebook(array(
 'appId'  => '1',
 'secret' => '2',
));

// See if there is a user from a cookie
 $user = $facebook->getUser();

if ($user) {
  try {
   // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
   print_r($user_profile);
   } catch (FacebookApiException $e) {
   echo '<pre>'.htmlspecialchars(print_r($e, true)).'</pre>';
   $user = null;
 }
}
else{
$loginUrl = $facebook->getLoginUrl(
        array('scope' => 'user_about_me,user_birthday,email,publish_actions,offline_access,user_hometown,user_location',
              'redirect_uri' => "https://domain.net/intro.php"
        )
); // end of array

}
?>
 <!DOCTYPE html>
  <html xmlns:fb="http://www.facebook.com/2008/fbml">
  <body>
    <?php if ($user) { ?>
      Your user profile is
     <pre>
        <?php print htmlspecialchars(print_r($user_profile, true)) ?>
     </pre>
   <?php } else { ?>

  <a href="<?php echo $loginUrl; ?>">Facebook authenticate</a>
    <?php } ?>
   <div id="fb-root"></div>
   <script>
     window.fbAsyncInit = function() {
       FB.init({
        appId: '<?php echo $facebook->getAppID() ?>',
        cookie: true,
        xfbml: true,
        oauth: true,
      status: true
    });
    FB.Event.subscribe('auth.login', function(response) {
      //window.location.reload();
    });
    FB.Event.subscribe('auth.logout', function(response) {
      //window.location.reload();
    });
  };
  (function() {
    var e = document.createElement('script'); e.async = true;
    e.src = document.location.protocol +
      '//connect.facebook.net/en_US/all.js';
    document.getElementById('fb-root').appendChild(e);
  }());
</script>
   </body>
  </html> 
```

它也在这里[http://codepad.org/f0Tuh63v](http://codepad.org/f0Tuh63v) 我做错了什么？

还有一种方法可以在不使用 phpsdk 或 js sdk 的情况下获取 FB 用户 ID？还是我必须使用这些插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:30:38.600

我看不出你的代码有什么问题。但是，如果您使用的是 Javascript，我可以告诉您另一种方法来获得身份验证，然后获取您需要的信息。

我在按钮后面使用了以下代码，它验证了我的 Facebook 应用程序，然后将用户重定向到我的网站。它对我有用。

```
<a class="fb-login-button" align="center" target="_blank" href="https://www.facebook.com/dialog/oauth?client_id=CLIENT_ID&response_type=token&scope=PERMISSION_1,PERMISSION_2&redirect_uri=YOUR_WEBSITE"> TEXT </a> 
```

然后我提取了在重定向 URL 中返回的令牌。

```
var url_t; // Get the redirected URL.
access_token = url_t.split('=')[1].split('&')[0]; 
```

然后使用访问令牌发送 HTTP 请求以获取所需数据。我使用了 facebook 提供的 GRAPH API。例如：获取用户的名字：

```
var xhr = new XMLHttpRequest(); 
var f_url_new = "https://graph.facebook.com/fql?q=SELECT%20name%20FROM%20user%20WHERE%20uid%20=%20me()&access_token=" + access_token;
xhr.open("GET", f_url_new , true);
xhr.onreadystatechange = function() {
    if (xhr.readyState == 4) {
        obj1 = JSON.parse(xhr.responseText);
        var str = obj1.data[0].name.toString();
        var n=str.split(" ");
        document.getElementById("name").innerText = n[0];
    }
}
xhr.send(); 
```

希望它能给你一些关于替代方案的想法。这不是您问题的正确答案，但可以在思考过程中提供帮助。

# python - 重组模块时导入问题

> ID：14990376
> 
> 赞同：0
> 
> 时间：2013-02-20T21:34:36.373
> 
> 标签：python, import

我正在学习python（慢慢地）并且遇到了导入问题。我所有的模块都在同一个目录中。我有一个带有“Command”类和“Command”子类的模块（commandler.py）。它工作得很好，但我知道我会有更多的命令子类，所以我正在尝试重新组织并真正挣扎。

我正在尝试添加一个仅包含命令子类的新模块（shVRFCmd.py）。我希望 shVRFCmd.py 和 commandler.py 移动到子目录“commands”。我觉得我已经用尽了所有位置/导入的可能性，并且由于我的麻烦，我得到了一个非常模糊的错误：当我运行单元测试时，'module' object has no attribute test_commandler。

以下是实际文件。我会喜欢我能得到的任何指示。 [https://github.com/natemarks/CiscoXMLPexpect/tree/master/CiscoXMLPexpect](https://github.com/natemarks/CiscoXMLPexpect/tree/master/CiscoXMLPexpect)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:45:41.060

好吧，我想通了，但这有点尴尬。我的故障排除过程包括添加和更改一些导入。不幸的是，其中之一包括在包含我的超类的模块中添加一个不可能的子类导入。可悲的是，期望 python 错误消息将我从自己身上救出来实在是太过分了。

自我提醒：下一次要多 50% 的耐心和少 50% 的愚蠢

# .htaccess - 使用 htaccess 使用条件字符串检查文件

> ID：14990377
> 
> 赞同：0
> 
> 时间：2013-02-20T21:34:42.537
> 
> 标签：.htaccess, mod-rewrite

我正在使用以下内容传递服务器上潜在文件位置的详细信息，但第 3 行导致它失败。通过删除这一行，test.php 文件会看到由 %1/%2 建立的正确文件位置

```
RewriteCond %{HTTP_HOST} ^([a-z0-9\-\_]+)\.domain\.com?
RewriteCond %{THE_REQUEST} (images/.*)
RewriteCond %{HTTP_HOST}%1 ^([a-z0-9\-\_]+)\.domain\.com(images/.*)
RewriteCond %1/%2 -f
RewriteRule ^.* test.php?file=%1/%2 [L] 
```

一旦它工作，我将提供文件，如果它从新位置存在，如果不存在，下一个重写函数将构建图像并将其放置在下一次的位置。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:56:29.030

您的问题缺少一些必要的细节，但这里是对发生的事情的猜测。

如果请求是针对`http://abc123.domain.com/whatever/images/somefile.jpg`，那么：

RewriteCond 1 匹配 and `%1`= "abc123"。

RewriteCond 2 然后匹配 and `%2`= "images/somefile.jpg"。

RewriteCond 3 根本没有意义，因为您试图将“abc123.domain.comabc123”与“(something).domain.comimages/.*”匹配。

RewriteCond 4 尝试确保“abc123/images/somefile.jpg”作为真实文件存在。

所以，我猜你的目录结构是“/domainprefix/images”，所以使用上面的 URL，你试图确保图像存在于“/abc123/images/somefile.jpg”。如果是这种情况，那么 RewriteCond 3 和 4 应该修改为：

```
RewriteCond %{REQUEST_URI} /%1/%2
RewriteCond %{REQUEST_URI} -f 
```

同样，我不得不猜测你的目标是什么，但这至少应该更接近你的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T20:26:16.083

好的，我已经解决了这个问题，并且为了避免人们头疼几天，这是解决方案。

```
RewriteCond %{HTTP_HOST}%{THE_REQUEST} ^([a-z0-9\-\_]+)\.domain\.com.*?(/images[^\s]+)
RewriteCond %{DOCUMENT_ROOT}/%1%2 -f
RewriteRule ^.* %1%2 [L] 
```

文件检查需要文档根目录，我花了几天时间试图解决这个问题。最终结果是直接提供存在的文件，如果在上述操作之后它们没有再次重写，则可以获取请求并将文件放置在正确的位置。感谢您的帮助 David Ravetti，您现在可以希望了解我所追求的。

# spring - 如何将 spring-security 身份验证规则与数据库用户相关联

> ID：14990381
> 
> 赞同：1
> 
> 时间：2013-02-20T21:34:53.183
> 
> 标签：spring, spring-security

我从 spring in action 中阅读了有关 spring 安全性的信息，我想实现这一点：我有一个 Web 应用程序，其中有两种用户存储在数据库中：

1)管理员

2)客户

这是 spring-security.xml ：

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:beans="http://www.springframework.org/schema/beans" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/security
http://www.springframework.org/schema/security/spring-security-3.0.3.xsd">

<http auto-config="true">
    <intercept-url pattern="/welcome*" access="ROLE_USER" />
</http>

<authentication-manager>
  <authentication-provider>
    <user-service>
    <user name="name" password="password" authorities="ROLE_USER" />
    </user-service>
  </authentication-provider>
</authentication-manager>

 </beans:beans> 
```

那么如何关联：

`<user-service> <user name="name" password="password" authorities="ROLE_USER" /> </user-service>` 到数据库用户条目（管理员和客户）？我将此部分添加到 web.xml ：

```
 <!-- Spring Security -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>
       org.springframework.web.filter.DelegatingFilterProxy
    </filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T03:19:43.927

你不能像这样映射。

为此，您需要使用自定义[UserDetailsS​​ervice](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/core/userdetails/UserDetailsService.html)。使用 userDetailsS​​ervice 您可以从数据库加载用户并将其传递给 spring 安全框架。

```
public class UserDetailsServiceImpl implements UserDetailsService {
    public UserDetails loadUserByUsername(String userName)
            throws UsernameNotFoundException, DataAccessException {
        User user = getUser(userName); //Load user from database
        if (user == null) {
            throw new UsernameNotFoundException("User not found: " + userName);
        }
        return user;
    }
} 
```

安全.xml

```
<authentication-manager>
    <authentication-provider user-service-ref="userDetailsService" />
</authentication-manager> 
```

# java - 在 Android 上使用 GSON 解析 JSON

> ID：14990385
> 
> 赞同：3
> 
> 时间：2013-02-20T21:35:30.277
> 
> 标签：java, android, json, gson

我正在尝试使用[本教程](http://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html)作为基础，使用 GSON解析由[Redmine API生成的一些 JSON。](http://www.redmine.org/projects/redmine/wiki/Rest_api_with_curl)不幸的是，我不能给你我的 JSON 的 URL，因为它只在内部工作，但它看起来像这样：

```
{
  "limit": 25,
  "total_count": 653,
  "offset": 0,
  "time_entries": [
    {
      "spent_on": "2013-02-14",
      "activity": {
        "name": "Blah1",
        "id": 10
      },
      "project": {
        "name": "TEST",
        "id": 10
      },
      "id": 661,
      "hours": 1,
      "updated_on": "2013-02-14T14:32:19Z",
      "user": {
        "name": "USER1",
        "id": 7
      },
      "issue": {
        "id": 467
      },
      "comments": "COMMENT 1",
      "created_on": "2013-02-14T14:32:19Z"
    },
    {
      "spent_on": "2013-02-14",
      "activity": {
        "name": "Bla2",
        "id": 10
      },
      "project": {
        "name": "TEST TEST",
        "id": 10
      },
      "id": 660,
      "hours": 1,
      "updated_on": "2013-02-14T11:52:13Z",
      "user": {
        "name": "USER2",
        "id": 4
      },
      "issue": {
        "id": 466
      },
      "comments": "COMMENT 2.",
      "created_on": "2013-02-14T11:52:13Z"
    }
  ]
} 
```

我得到了一个`NullPointerException`，但我不确定是因为未能获取 JSON 还是建模错误。我担心我缺少与内部类有关的东西。如果它像错误地获取 JSON 一样简单，我会非常生气。

我的设备都是通过连接到内部网络的 WIFI 运行的，当我使用浏览器时可以看到 JSON，所以我认为这不是网络问题。

这是我的 LogCat：

```
02-20 21:11:11.175: E/AndroidRuntime(14450): FATAL EXCEPTION: main
02-20 21:11:11.175: E/AndroidRuntime(14450): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.javacodegeeks.android.json/com.javacodegeeks.android.json.JsonParsingActivity}: java.lang.NullPointerException
02-20 21:11:11.175: E/AndroidRuntime(14450):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-20 21:11:11.175: E/AndroidRuntime(14450):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-20 21:11:11.175: E/AndroidRuntime(14450):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-20 21:11:11.175: E/AndroidRuntime(14450):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-20 21:11:11.175: E/AndroidRuntime(14450):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-20 21:11:11.175: E/AndroidRuntime(14450):    at android.os.Looper.loop(Looper.java:137)
02-20 21:11:11.175: E/AndroidRuntime(14450):    at android.app.ActivityThread.main(ActivityThread.java:5041)
02-20 21:11:11.175: E/AndroidRuntime(14450):    at java.lang.reflect.Method.invokeNative(Native Method)
02-20 21:11:11.175: E/AndroidRuntime(14450):    at java.lang.reflect.Method.invoke(Method.java:511)
02-20 21:11:11.175: E/AndroidRuntime(14450):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-20 21:11:11.175: E/AndroidRuntime(14450):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-20 21:11:11.175: E/AndroidRuntime(14450):    at dalvik.system.NativeStart.main(Native Method)
02-20 21:11:11.175: E/AndroidRuntime(14450): Caused by: java.lang.NullPointerException
02-20 21:11:11.175: E/AndroidRuntime(14450):    at com.javacodegeeks.android.json.JsonParsingActivity.onCreate(JsonParsingActivity.java:46)
02-20 21:11:11.175: E/AndroidRuntime(14450):    at android.app.Activity.performCreate(Activity.java:5104)
02-20 21:11:11.175: E/AndroidRuntime(14450):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-20 21:11:11.175: E/AndroidRuntime(14450):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144) 
```

我的`JsonParsingActivity`：

```
public class JsonParsingActivity extends Activity {

    String url = "URL";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        InputStream source = retrieveStream(url);
        Gson gson = new Gson();
        Reader reader = new InputStreamReader(source);
        RedmineResponse response = gson.fromJson(reader, RedmineResponse.class);

        Toast.makeText(this, response.query, Toast.LENGTH_SHORT).show();

        List<Result> results = response.results;
        for (Result result : results) {
            if (result.comments != null) {
                Toast.makeText(this, result.comments, Toast.LENGTH_SHORT).show();   
            } else {
                Toast.makeText(this, "EMPTY", Toast.LENGTH_SHORT).show();
            }
        }
    }

    private InputStream retrieveStream(String url) {
        DefaultHttpClient client = new DefaultHttpClient();
        HttpGet getRequest = new HttpGet(url);

        try {
            HttpResponse getResponse = client.execute(getRequest);
            final int statusCode = getResponse.getStatusLine().getStatusCode();

            if (statusCode != HttpStatus.SC_OK) { 
                Log.w(getClass().getSimpleName(), "Error " + statusCode + " for URL " + url);
                return null;
            }

            HttpEntity getResponseEntity = getResponse.getEntity();
            return getResponseEntity.getContent();
        } catch (IOException e) {
            getRequest.abort();
            Log.w(getClass().getSimpleName(), "Error for URL " + url, e);
        }

        return null;
    }
} 
```

我的`Result`班级：

```
public class Result {

    @SerializedName("id")
    public String time_entry_ID;

    @SerializedName("spent_on")
    public String spent_on;

    @SerializedName("created_on")
    public String created_on;

    public Project project;

    @SerializedName("hours")
    public String hours;

    @SerializedName("comments")
    public String comments;

    @SerializedName("iso_language_code")
    public String isoLanguageCode;

    @SerializedName("to_user_id_str")
    public String toUserIdStr;

    public String source;
} 
```

我的`RedmineResponse`班级：

```
public class RedmineResponse {

    public List<Result> results;

    @SerializedName("limit")
    public int limit;

    @SerializedName("offset")
    public int offset;

    public String query;
} 
```

我的`Activity`班级：

```
public class Activity {

    @SerializedName("id")
    public String activity_ID;

    @SerializedName("name")
    public String activity_name;
} 
```

我的`Issue`班级：

```
public class Issue {

    @SerializedName("id")
    public String issue_ID;
} 
```

我的`Project`班级：

```
public class Issue {

    @SerializedName("id")
    public String issue_ID;
} 
```

我的`User`班级：

```
public class User {

    @SerializedName("id")
    public String user_ID;

    @SerializedName("name")
    public String user_name;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T21:55:22.727

您需要在映射中为`results`集合定义序列化属性名称：`RedmineResponse`

```
public class RedmineResponse {

    @SerializedName("time_entries") // This is the name you are using in JSON
    public List<Result> results;
} 
```

在一个完整的切线上，最好在你的 Javabeans 上定义属性（也就是带有 getter/setter 的私有变量），因为这有助于更好地封装它们。

# c# - ASP.NET：为异步操作制作同步控制器

> ID：14990391
> 
> 赞同：0
> 
> 时间：2013-02-20T21:35:47.997
> 
> 标签：c#, asp.net-mvc

为了向后兼容，我需要为异步操作创建控制器操作。

对于某些背景，当异步操作完成时，将修改一条数据库记录，表明操作已完成。

我可以使用 Thread.Sleep() 编写带有循环的控制器操作并在每次迭代时查询数据库，检查该记录是否已被处理？

如果有任何其他方法可以实现这一点，请记住这必须是同步的约束，我很乐意听到它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:42:56.480

你可以做一个递归函数。

完成异步函数后，使用不同的参数再次调用该函数。

Thread.Sleep 将不起作用（它最初会起作用，但是任何花费比睡眠长度更长的东西都会让一切烦恼）

# regex - 验证和分组excel公式格式

> ID：14990400
> 
> 赞同：0
> 
> 时间：2013-02-20T21:36:16.460
> 
> 标签：regex

我正在尝试使用以下正则表达式验证 excel 公式样式：

```
=SUM\(((?:\w+\d+)(?::\w+\d+)?)((?:,\w+\d+)(?::\w+\d+)?)*\) 
```

在这个来源：

应该通过

```
=SUM(A1,A11:A212,A12:A56,A342:A12,A3)
=SUM(A11:A12,A12:a12,A34:A3)
=SUM(A1,A2,A3)
=SUM(A1) 
```

应该失败

```
=SUM(A11:A212:A2,A12:A56,A4,A342:A12) 
```

而且我的验证部分正在工作，但我不知道如何对每个逗号分隔值进行分组。他们应该是：

我希望它们如何分组：

```
=SUM(A1,A11:A12,A12:A56,A3)     // Groups: $1 = A1 $2 = A11:A12 $3 = A12:A56 $4 = A3
=SUM(A11:A12,A10:A12,A34:A3)    // Groups: $1 = A11:A12 $2 = A10:A12 $3 = A34:A3
=SUM(A1,A2,A3)                  //Groups: $1 = A1 $2 = A2 $3 = A3
=SUM(A1)                        //Groups: $1 = A1 
```

他们目前的分组方式：

```
=SUM(A1,A11:A12,A12:A56,A3)     // Groups: $1 = A1 $2 = A3
=SUM(A11:A12,A10:A12,A34:A3)    // Groups: $1 = A11:A12 $2 = A34:A3
=SUM(A1,A2,A3)                  //Groups: $1 = A1 $2 = A3
=SUM(A1)                        //Groups: $1 = A1 
```

注意，它对第一个和最后一个进行分组。我对 REGEX 很陌生，所以如果我在这里做一些糟糕的事情，请指出我正确的方向。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:48:10.177

这是不可能的：`(...)(?:,(...))+`（2 组）总是会产生 2 个匹配，无论`+`匹配多少。

您需要（至少）两个步骤来完成：

```
value       :=  /\w+\d+(?::\w+\d+)?/

value_list  :=  /value(?:,value)*/

expression  :=  /=SUM\((value_list)\)/ 
```

现在匹配`expression`(the `value_list`) 中的第 1 组，并查找`value`此匹配中的所有匹配项。

PHP 中的快速演示：

```
$text = 'should pass

=SUM(A1,A11:A212,A12:A56,A342:A12,A3)
=SUM(A11:A12,A12:a12,A34:A3)
=SUM(A1,A2,A3)
=SUM(A1)

should fail

=SUM(A11:A212:A2,A12:A56,A4,A342:A12)';

$value      = "\w+\d+(?::\w+\d+)?";
$value_list = "$value(?:,$value)*";
$expression = "=SUM\(($value_list)\)";

preg_match_all("/$expression/", $text, $matches);

// iterate over $value_list from $expression (group 1)
foreach($matches[1] as $group1) {
  preg_match_all("/$value/", $group1, $m);
  print_r($m);
} 
```

印刷：

```
大批
(
    [0] => 数组
        (
            [0] => A1
            [1] => A11:A212
            [2] => A12:A56
            [3] => A342:A12
            [4] => A3
        )

)
大批
(
    [0] => 数组
        (
            [0] => A11:A12
            [1] => A12:a12
            [2] => A34:A3
        )

)
大批
(
    [0] => 数组
        (
            [0] => A1
            [1] => A2
            [2] => A3
        )

)
大批
(
    [0] => 数组
        (
            [0] => A1
        )

)
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:43:34.573

我实际上会先拆分字符串。就像是：

```
sub IsFormulaValid
{
    my $str = $_[0];
    (my $match) = $str =~ /^=SUM\(([^)]+)\)$/;
    my @sumArgs = split(/,\s*/, $match);
    my $valid = 1;
    foreach(@sumArgs){
        if($_ !~ /^[a-z]+\d+(?::[a-z]+\d+){0,1}$/i){
            $valid = 0;
            last;
        }
    }
    return $valid;
} 
```

请注意，您还可以检查匹配本身的有效性，以及设置时 @sumArgs > 0 `$valid`。使用您的输入在 perl 中进行测试：

```
my @testInput;

push(@testInput,'=SUM(A1,A11:A212,A12:A56,A342:A12,A3)');
push(@testInput,'=SUM(A11:A12,A12:a12,A34:A3)');
push(@testInput,'=SUM(A1,A2,A3)');
push(@testInput,'=SUM(A1)');
push(@testInput,'=SUM(A11:A212:A2,A12:A56,A4,A342:A12)');

foreach(@testInput){
    print "'$_'\n  ";
    print 'NOT ' if !IsFormulaValid($_);
    print "VALID\n\n";
} 
```

结果：

```
'=SUM(A1,A11:A212,A12:A56,A342:A12,A3)'
  VALID

'=SUM(A11:A12,A12:a12,A34:A3)'
  VALID

'=SUM(A1,A2,A3)'
  VALID

'=SUM(A1)'
  VALID

'=SUM(A11:A212:A2,A12:A56,A4,A342:A12)'
  NOT VALID 
```

# c++ - 安装位置缺少头文件

> ID：14990401
> 
> 赞同：2
> 
> 时间：2013-02-20T21:36:18.027
> 
> 标签：c++, visual-studio-2010, visual-studio-2008, include

最近我安装了Visual Studio Ultimate 2010，C:\Program Files\Microsoft Visual Studio 10.0\VC\include 下似乎没有头文件。

我在互联网上搜索这个问题，我发现的唯一页面是 [http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvc/thread/b8543ffb-7c4f-4b9e-8a6a-0dd195e8f680](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvc/thread/b8543ffb-7c4f-4b9e-8a6a-0dd195e8f680)。

遇到同样问题的人最终从朋友的 zip 中复制了 C++ 头文件。由于这不是一个很好的解决方案，我请你帮忙。

我应该怎么做才能完成这项工作？（我有 Windows 8 操作系统，但是上面链接的论坛讨论中的那个人有 Windows 7 所以......我不认为这是问题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:57:47.943

经过更多搜索，我发现了这个讨论。这似乎是一个古老的奇怪问题，有两种解决方案：1）安装新的 Windows 副本和 Visual Studio 的新副本 2）从安装了 Vsiaul Studio 的好版本的朋友那里复制 VC 文件夹

# python - 如何不需要 pip install -E 参数？

> ID：14990404
> 
> 赞同：0
> 
> 时间：2013-02-20T21:36:26.193
> 
> 标签：python, linux, ubuntu, pip

为什么我可以使用：

```
sudo pip install [package] 
```

在我的机器上，但在另一个我必须使用：

```
sudo -E pip install [package] 
```

我怎样才能使它不需要-E？

编辑：

我很确定它与为 root 设置环境变量有关。但是将路径、http_proxy、https_proxy、ftp_prxy 和 socks_proxy 添加到 /etc/environment 似乎也不起作用。

每个用户是否有某种方式可以覆盖环境变量？

# javascript - Cakephp 中的 Javascript 计算

> ID：14990408
> 
> 赞同：0
> 
> 时间：2013-02-20T21:36:52.397
> 
> 标签：javascript, cakephp

最近将一个 perl 应用程序转换为 cakephp 2.3。现在我被困在一个使用 javascript 执行一些计算的页面上。我把javascript拿出来放在一个单独的文件中，但我也直接在视图中尝试过。

有 6 个表格，每个表格有 5 个字段和一个计算按钮。每个表格第一列中的字段（milkconc 和 matdose）是用户输入的。一旦用户点击退出，它应该执行计算并将它们显示在第二列字段中。单击计算时，将在第 5 个字段中显示结果。![在此处输入图像描述](../Images/a3fdf1d1a5f97694671a92e2a25849f7.png)

当我从第一列字段中跳出时，我的 javascript 控制台显示：'Uncaught TypeError: Cannot read property 'milkconc' of undefined' 并且单击计算按钮会为相关字段提供类似的错误。我确定我需要更改 javascript 中的某些内容以适应 cakephp 的 forminput。我只是不知道是什么。在我的 default.ctp 中，我拥有`echo $this->Html->script('tid');`具有所有功能的文件。

我认为会发生的是 javascript 会将值放在适当的字段中，一旦单击保存，cakephp 就会将值 javascript 放在那里并将其放入数据库中。

编辑视图：

```
<?php
    echo $this->Html->css('style');
    echo $this->Html->script('tabs');
    echo $this->Html->script('tid');
?>
<?php echo $this->Form->create('Drug'); ?>
<i><b>These fields are currently under construction.</b></i>
  <table width="100%" border="0" cellspacing="2" cellpadding="2">
    <tr>
      <td><b>Adult Dose: </b></td>
    </tr>
    <tr>
      <td>
      <?php
        echo $this->Form->input('adultdose', array(
              'type' => 'text',
              'name' => 'adultdose',
              'size' => '24',
              'maxlength' => '250',
              'label'=> false, 
              //'class'=>'entryField'
        ));
      ?> </td>
    </tr>
    <tr>
      <td><b>RID Calculations:
      <script type="text/javascript">
         //Previously tried the javascript here.
    </script>
  </b></td>
    </tr>
    <tr>
      <td>
        <table>
          <tr>
            <td>
              <table class="border">
                <tr>
                  <td class="title">&nbsp;</td>
                  <td class="title" align="center" nowrap><b>Dose</b></td>
                  <td class="title" align="center" nowrap><b>mg/kg/day</b></td>
                  <td class="title">&nbsp;</td>
                  <td class="title" align="center" nowrap><b>RID</b></td>
                  <td class="title">&nbsp;</td>
                </tr>
                <tr>
                  <td nowrap>Milk Dose (ug/L)</td>
                  <td align="center">
                    <?php echo $this->Form->input('milkconc', array(
                                    'type' => 'text',
                                    'name' => 'milkconc',
                                    'label' => false,
                                    'size' => '7',
                                    'maxlength' => '125',
                                    'onblur' => 'milk_amount_calc(9);'
                            ));
                    ?>
                  </td>
                  <td align="center">
                    <?php echo $this->Form->input('theor_infa', array(
                                    'type' => 'text',
                                    'name' => 'theor_infa',
                                    'label' => false,
                                    'size' => '7',
                                    'maxlength' => '125',
                                    //'onblur' => 'milk_amount_calc(\'9\');'
                            ));
                    ?>
                  </td>
                  <td nowrap>mg/kg/day</td>
                  <td align="center">
                    <?php echo $this->Form->input('rid', array(
                                    'type' => 'text',
                                    'name' => 'rid',
                                    'label' => false,
                                    'size' => '7',
                                    'maxlength' => '250',
                                    //'onblur' => 'milk_amount_calc(\'9\');'
                            ));
                    ?>
                  </td>
                  <td><button name="buttonName" value="" type="button" onclick="calculate_rid('9');">Calculate</button></td>
                </tr>
                <tr>
                  <td>Mother's Dose (mg)</td>
                  <td align="center">
                    <?php echo $this->Form->input('matdose', array(
                                    'type' => 'text',
                                    'name' => 'matdose',
                                    'label' => false,
                                    'size' => '7',
                                    'maxlength' => '250',
                                    //'onblur' => 'mom_amount_calc(\'9\');'
                            ));
                    ?>
                  </td>
                  <td align="center">
                    <?php echo $this->Form->input('mdkg', array(
                                    'type' => 'text',
                                    'name' => 'mdkg',
                                    'label' => false,
                                    'size' => '7',
                                    'maxlength' => '250',
                                    //'onblur' => 'milk_amount_calc(\'9\');'
                            ));
                    ?>
                  </td>
                  <td>mg/kg/day</td>
                  <td>Reference...</td>
                  <td><!-- --></td>
                </tr>
              </table>
            </td>
/* Code removed to save size. Basically the code above times 5 and each next field is fieldname1,2,3, etc */
              </tr>
              </table>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
  <td class="actionTable"><?php echo $this->Form->submit('Save/Update & Previous', array('name'=>'Previous')); ?></td>
  <td class="actionTable"><?php echo $this->Form->submit('Save',array('style'=>'width:150px;')); ?></td>
  <td class="actionTable"><?php echo $this->Form->submit('Save/Update & Next', array('name'=>'Next')); ?>
  <?php echo $this->Form->end(); ?> 
```

Javascript：

```
 function milk_amount_calc(set) {
        if (set == 1) {
          var tmp = (document.form.milkconc1.value / 1000) *.15;
          var val = roundNumber(tmp, 4);
          document.form.theor_infa1.value = val;
        }
        else if (set == 2) {
          var tmp = (document.form.milkconc2.value / 1000) *.15;
          var val = roundNumber(tmp, 4);
          document.form.theor_infa2.value = val;
        }
        else if (set == 3) {
          var tmp = (document.form.milkconc3.value / 1000) *.15;
          var val = roundNumber(tmp, 4);
          document.form.theor_infa3.value = val;
        }
        else if (set == 4) {
          var tmp = (document.form.milkconc4.value / 1000) *.15;
          var val = roundNumber(tmp, 4);
          document.form.theor_infa4.value = val;
        }
        else if (set == 5) {
          var tmp = (document.form.milkconc5.value / 1000) *.15;
          var val = roundNumber(tmp, 4);
          document.form.theor_infa5.value = val;
        }
        else if (set == 9) {
          var tmp = (document.form.milkconc.value / 1000) *.15;
          var val = roundNumber(tmp, 4);
          document.form.theor_infa.value = val;
        }
      }

      function mom_amount_calc(set) {
        if (set == 1) {
          var tmp = document.form.matdose1.value /70;
          var val = roundNumber(tmp, 4);
          document.form.mdkg1.value = val;
        }
        else if (set == 2) {
          var tmp = document.form.matdose2.value /70;
          var val = roundNumber(tmp, 4);
          document.form.mdkg2.value = val;
        }
        else if (set == 3) {
          var tmp = document.form.matdose3.value /70;
          var val = roundNumber(tmp, 4);
          document.form.mdkg3.value = val;
        }
        else if (set == 4) {
          var tmp = document.form.matdose4.value /70;
          var val = roundNumber(tmp, 4);
          document.form.mdkg4.value = val;
        }
        else if (set == 5) {
          var tmp = document.form.matdose5.value /70;
          var val = roundNumber(tmp, 4);
          document.form.mdkg5.value = val;
        }
        else if (set == 9) {
          var tmp = document.form.matdose.value /70;
          var val = roundNumber(tmp, 4);
          document.form.mdkg.value = val;
        }
      }

      var set_0 = 0;
      var set_1 = 0;
      var set_2 = 0;
      var set_3 = 0;
      var set_4 = 0;
      var set_5 = 0;

      var low = 0;
      var high = 0;

      function calculate_rid(set) {
        if (set == 1) {
          if (document.form.theor_infa1.value == 0 || document.form.mdkg1.value == 0) {
            alert("Milk Dose and Mother's Dose are Required\nCan't Calculate the Relative Infant Dose(RID)");
            return;
          }
          set_1 = (document.form.theor_infa1.value / document.form.mdkg1.value) * 100;
          set_1 = roundNumber(set_1, 4);
          var val = set_1 + '%';
          document.form.rid1.value = val;
        }
        else if (set == 2) {
          if (document.form.theor_infa2.value == 0 || document.form.mdkg2.value == 0) {
            alert("Milk Dose and Mother's Dose are Required\nCan't Calculate the Relative Infant Dose(RID)");
            return;
          }
          set_2 = (document.form.theor_infa2.value / document.form.mdkg2.value) * 100;
          set_2 = roundNumber(set_2, 4);
          var val = set_2 + '%';
          document.form.rid2.value = val;
        }
        else if (set == 3) {
          if (document.form.theor_infa3.value == 0 || document.form.mdkg3.value == 0) {
            alert("Milk Dose and Mother's Dose are Required\nCan't Calculate the Relative Infant Dose(RID)");
            return;
          }
          set_3 = (document.form.theor_infa3.value / document.form.mdkg3.value) * 100;
          set_3 = roundNumber(set_3, 4);
          var val = set_3 + '%';
          document.form.rid3.value = val;
        }
        else if (set == 4) {
          if (document.form.theor_infa4.value == 0 || document.form.mdkg4.value == 0) {
            alert("Milk Dose and Mother's Dose are Required\nCan't Calculate the Relative Infant Dose(RID)");
            return;
          }
          set_4 = (document.form.theor_infa4.value / document.form.mdkg4.value) * 100;
          set_4 = roundNumber(set_4, 4);
          var val = set_4 + '%';
          document.form.rid4.value = val;
        }
        else if (set == 5) {
          if (document.form.theor_infa5.value == 0 || document.form.mdkg5.value == 0) {
            alert("Milk Dose and Mother's Dose are Required\nCan't Calculate the Relative Infant Dose(RID)");
            return;
          }
          set_5 = (document.form.theor_infa5.value / document.form.mdkg5.value) * 100;
          set_5 = roundNumber(set_5, 4);
          var val = set_5 + '%';
          document.form.rid5.value = val;
        }
        else if (set == 9) {
          if (document.form.theor_infa.value == 0 || document.form.mdkg.value == 0) {
            alert("Milk Dose and Mother's Dose are Required\nCan't Calculate the Relative Infant Dose(RID)");
            return;
          }
          set_0 = (document.form.theor_infa.value / document.form.mdkg.value) * 100;
          set_0 = roundNumber(set_0, 4);
          var val = set_0 + '%';
          document.form.rid.value = val;
        } 
        set_rid_range();
      }

      function set_rid_range() {
        var arr = new Array();
        var rng = new Array();

        arr[0] = replacer(document.form.rid.value); 
        arr[1] = replacer(document.form.rid1.value); 
        arr[2] = replacer(document.form.rid2.value); 
        arr[3] = replacer(document.form.rid3.value); 
        arr[4] = replacer(document.form.rid4.value); 
        arr[5] = replacer(document.form.rid5.value); 

        arr = arr.sort(sortNumber);

        var this_total = 0;
        for(a = 0; a < arr.length; a++) {
          this_total = this_total + parseFloat(arr[a]); 
          if (arr[a] > 0) {
            rng.push(arr[a]);
          }
        }
        if (this_total == 0) {
          document.form.rid_range.value =  '';  
          return;
        }
        rng = rng.sort(sortNumber);

        var low = rng[0];
        var high = rng.pop();

        if ((low == high) && (low == 0)) {
          document.form.rid_range.value =  '';     
          return;
        }

        if (low == high) {
          document.form.rid_range.value =  high + '%';
        }
        else {
          document.form.rid_range.value = low + '% - ' + high + '%';
        }
      }

      function sortNumber(a,b) {
        return a - b;
      }

      function replacer(d) {
        return d.replace('%','');
      }

      function roundNumber(rnum, rlength) {
        // Arguments: number to round, number of decimal places
        var newnumber = Math.round(rnum*Math.pow(10,rlength))/Math.pow(10,rlength);
        return newnumber;
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:48:09.090

加载文档时，您需要执行所有 javascript 代码：

```
window.onload = function() {
    // your js code here
}; 
```

说明: load 事件在文档加载过程结束时触发。此时，文档中的所有对象都在 DOM 中。因此，如果您的脚本在文档被解析之前执行，当您尝试读取某些属性时，您将收到错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:19:53.397

在通过正常的蛋糕设置（通过在 default.ctp 中声明脚本`echo $this->Html->script('tid');`）并仔细检查 javascript 控制台中给出的错误后，我再次检查了我是否有可用的脚本，然后我将问题缩小到了 javascript。事实证明，它试图从 cakephp 生成的表单中错误地访问值。

为了纠正这个问题，我只需要在 javascript 中进行更改，`document.form.fieldname.value`以便`document.getElementById('ModelFieldName').value`它根据蛋糕创建的 ID 访问正确的表单元素。

# c# - XElement后代不工作\ XElement.Parse（）

> ID：14990409
> 
> 赞同：1
> 
> 时间：2013-02-20T21:36:51.897
> 
> 标签：c#, xml, xml-parsing, linq-to-xml, xelement

这是我目前正在使用的（简化的）XML：

```
<svg xmlns:xlink="http://www.w3.org/1999/xlink" width="242.359" height="557.669" id="svg2" version="1.1" xmlns="http://www.w3.org/2000/svg">   
    <g transform="translate(71.9446563720703,1057.6692276001)">
        <!--nodes--> 
        <polygon stroke="#454545" stroke-opacity="1" stroke-width="1" fill="#00ff00" fill-opacity="1" points="11.35 -859.014 75 -822.719 138.65 -859.014 75 -895.31" />
        <text x="51.175" y="-852.249" font-family="Arial" font-size="16" fill="#121212">Node1</text>
        <ellipse fill="#00ff00" fill-opacity="1" stroke="#454545" stroke-opacity="1" stroke width="1" cx="0" cy="-571.945" rx="69.945" ry="69.945" />
        <text x="-61.945" y="-565.179" font-family="Arial" font-size="16" fill="#121212">Node2</text>
    </g>
</svg> 
```

在基本层面上，我想要完成的是获取所有“文本”元素，而不是形状。像这样简单的东西：

```
List<XElement> textList = xml.Descendants("text").ToList(); 
```

但是，这不起作用。我想到 XML 可能没有被正确序列化，但我认为情况并非如此。XML 当前是使用 XElement.Parse() 从字符串创建的。具体来说，该字符串实际上是一个 SVG 文件，但我看不出这会如何影响它充当 XML 的能力。如果这就是它不起作用的原因，那么很高兴知道这一点。

# jquery - 小轮播为可见项目添加类

> ID：14990411
> 
> 赞同：0
> 
> 时间：2013-02-20T21:37:03.543
> 
> 标签：jquery

我的轮播一次显示 2 个项目，总共有 6 个项目。

图片下方有一个编号选择器，但一次只突出显示一个。我如何突出显示（或向页面选择器添加类）到当前显示的 2 个图像。即，如果我正在查看图片 4 和 5 ，然后 1 2 3 "4 5" 6 - 4 & 5 将有一个附加类。

```
<div id="slider-code">
<a href="#" class="buttons prev">left</a>
<div class="viewport">
    <ul class="overview">
        <li><img src="images/picture7.jpg"></li>
        <li><img src="images/picture5.jpg"></li>
        <li><img src="images/picture6.jpg"></li>
        <li><img src="images/picture4.jpg"></li>
        <li><img src="images/picture3.jpg"></li>
        <li><img src="images/picture2.jpg"></li>                            
    </ul>
</div>
<a href="#" class="buttons next">right</a>
    <ul class="pager">
        <li><a rel="0" class="pagenum" href="#">1</a></li>
        <li><a rel="1" class="pagenum" href="#">2</a></li>
        <li><a rel="2" class="pagenum" href="#">3</a></li>
        <li><a rel="3" class="pagenum" href="#">4</a></li>
        <li><a rel="4" class="pagenum" href="#">5</a></li>
        <li><a rel="5" class="pagenum" href="#">6</a></li>
    </ul>
</div> 
```

我没有包含 JS，因为插件（小轮播）只有几个简单的选项。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:54:39.953

嗯...不确定您要做什么，但这是我的想法：

```
$('a').click( function(){
    $('a').removeClass('active');
    $(this).addClass('active').next('a').addClass('active');
}); 
```

这应该激活单击的项目和下一个项目。

# javascript - 如何在按钮单击时为搜索框设置动画？

> ID：14990416
> 
> 赞同：0
> 
> 时间：2013-02-20T21:37:27.677
> 
> 标签：javascript, jquery, dom, animation

我已经用搜索按钮创建了搜索框，但我希望搜索框只有在我点击带有动画（切换或其他东西......）的搜索按钮时才可见，例如[http://prntscr.com/tijo4](http://prntscr.com/tijo4)，网站：[http ://thenextweb.com/](http://thenextweb.com/)。

我只试过这个：http: [//jsfiddle.net/JHdzd](http://jsfiddle.net/JHdzd)

HTML：

```
 <div id="search">
        <input title="Search for..." id="forsearch" type="text" class="forsearch_products">
        <input class="search-button" type="submit" value="Search">
    </div> 
```

CSS：

```
#search {
    width: 250px;
    height: 28px;
    background-color: #C7D7E8;
    padding: 6px 0 6px 0px;
}

input#forsearch.forsearch_products {
    width: 135px;
    height: 18px;
    border: 2px solid #6B9DD3;
    margin: 0 3px 0 8px;
    float: left;
    padding: 3px;
}

input.search-button {
    width: 85px;
    height: 28px;
    border: 1px solid white;
    font-size: 12px;
    display: block;
    float: left;
    font-weight: bold;
    color: white;
    background: rgb(237,173,113); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:05:26.277

使用 jQuery，这非常简单。单击搜索按钮后，使用此代码将在您的搜索框（我已将其调整为最初隐藏）中淡出：

```
$("#search").click(function(){
    $("#forsearch").fadeIn(1000);
}) 
```

[查看此小提琴](http://jsfiddle.net/JHdzd/1/)以查看它的实际效果。我还调整了您的搜索框的位置，使其固定在右侧（如果您删除了我的样式更改，但最初将搜索框保持为隐藏状态，您可以了解原因）。您还可以[查看此页面](http://api.jquery.com/category/effects/)以了解有关 jQuery 效果的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-26T10:04:06.033

 ````
input[type="search"] {
     background: url("http://www.dreamtemplate.com/dreamcodes/web_icons/gray-classic-search-icon.png") no-repeat scroll 5px 50% #ffffff;
     border-radius: 4px;
     border: 1px solid #f1f1f1;
     color: transparent;
     cursor: pointer;
     font-family: Verdana,Geneva,sans-serif;
     font-size: 14px;
     padding: 12px 5px 12px 22px;
     transition: all 0.3s ease 0s;
     width: 22px;
} 
```

查看演示[http://cssdesk.com/Gsedv](http://cssdesk.com/Gsedv)`

# jquery - 带有标签的 jQuery UI 对话框

> ID：14990417
> 
> 赞同：0
> 
> 时间：2013-02-20T21:37:31.290
> 
> 标签：jquery, jquery-ui, dialog, jquery-ui-tabs

我正在使用带有 jQ​​uery UI 的选项卡式界面。那工作正常。每个选项卡实际上是一个表单。因此，当提交该表单时，该操作会将用户带回同一页面。但那时我想打开适当的标签。

所以，我正在使用一个看起来像这样的 URL。

domain.com/page.php#tab1

哪个工作正常并打开正确的选项卡。页面的滚动位置有一个小问题。这是由于页面上的锚点位置。我希望滚动条位于页面顶部，所以我使用类似这样的东西回到顶部。

```
$('html, body').animate({ scrollTop: 0 }); 
```

所以，一切都很好。但是，然后我打开一个模式对话框，由于发生了滚动，它的位置不正确。

我已经进行了研究，并发现了重新定位模态的建议：

```
$('my-selector').dialog('option', 'position', 'center'); 
```

但这似乎不起作用。

那么我怎样才能让这个玩得很好呢？

我的简化代码如下：

html

```
<div id="tester">
</div> 
```

脚本 - 准备好文档

```
$('html, body').animate({ scrollTop: 0 });#

jQuery('#tester').dialog
({
title: "Attribute " ,
minWidth: 840,
height:500
}); 
```

实际上，在真实版本中，对话框是通过点击处理程序打开的。因此，在打开对话框时，动画绝对是完整的。所以我对为什么模式出现在页面底部感到困惑。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:47:42.097

如果您确保在[`.animate()`](http://api.jquery.com/animate/)方法的完整回调上打开对话框，您应该没有任何问题。

可能发生的情况是，在打开对话框时动画仍处于过渡状态，因此对其位置的内部计算不正确。下面是一个基本示例：

```
$('#button').click(function () {
    $('html, body').animate({
        scrollTop: 0
    }, openDialog);
});

function openDialog() {
    jQuery('#tester').dialog({
        title: "Attribute ",
        minWidth: 840,
        height: 500
    });
} 
```

[jsfiddle](http://jsfiddle.net/4jNsY/)

# ruby-on-rails-3 - Ckeditor 在根 URI 中搜索资产，而它的应用程序位于子 URI 上

> ID：14990426
> 
> 赞同：2
> 
> 时间：2013-02-20T21:37:55.017
> 
> 标签：ruby-on-rails-3, ckeditor, asset-pipeline

过去两天我一直在尝试修复这个错误，但我真的没有更多的想法或工具来解决它。我想知道stackoverflow中是否有人可以帮助我。

我正在尝试修复使用 ckeditor gem 的网站源代码。ckeditor gem 提供了一个嵌入式 Web 文本编辑器。问题是当网站被放置在子目录中时，gem 并不能发挥作用。如果将网站放在像 www.domain.com 这样的根目录中，它可以完美运行，但是当我将它放在子目录中时，例如 www.domain.com/website，它不会显示文本编辑器。

没有显示编辑器的原因是应用程序试图在服务器的根目录中找到 ckeditor gem 的资产：

```
Failed to load resource: the server responded with a status of 404 (Not Found)             http://domain.com/assets/ckeditor/config.js?t=C3HA5RM
Failed to load resource: the server responded with a status of 404 (Not Found)             http://domain.com/assets/ckeditor/skins/kama/editor.css?t=C3HA5RM
Failed to load resource: the server responded with a status of 404 (Not Found)             http://domain.com/assets/ckeditor/lang/pt-br.js?t=C3HA5RM
Failed to load resource: the server responded with a status of 404 (Not Found)             http://domain.com/assets/ckeditor/plugins/embed/plugin.js?t=C3HA5RM
Failed to load resource: the server responded with a status of 404 (Not Found)             http://domain.com/assets/ckeditor/plugins/attachment/plugin.js?t=C3HA5RM 
```

当正确的地址是 www.domain.com/ **website** /assets/ckeditor/config.js?t=C3HA5RM

我真的在整个网络上搜索过，试图找到解决方案，但我发现的仅有的几个类似情况并没有为我提供解决方案。

在这个[问题](https://github.com/galetahub/ckeditor/issues/126)中，在 github，用户 jronallo 与我有完全相同的问题。但我试图实施他的解决方案但没有成功。在此提交中，在 ckeditor 存储库中，该错误似乎已修复，但即使在我的 gem（ckeditor 4.0.2 和 rails 3.2.2）上进行了此修复，它仍然缺少 SubUri 上的资产。

我也尝试过手动操作 CKEDITOR_BASEPATH 和 Ckeditor.relative_url，但又没有成功。

有谁知道如何解决它？我会非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:48:23.473

在您的 ckeditor 配置外部插件中删除。

加载资源失败：服务器响应状态为 404（未找到） [http://domain.com/assets/ckeditor/plugins/embed/plugin.js?t=C3HA5RM](http://domain.com/assets/ckeditor/plugins/embed/plugin.js?t=C3HA5RM) 加载资源失败：服务器响应404 状态（未找到） [http://domain.com/assets/ckeditor/plugins/attachment/plugin.js?t=C3HA5RM](http://domain.com/assets/ckeditor/plugins/attachment/plugin.js?t=C3HA5RM) 它的作品！

我的配置：

```
/*
Copyright (c) 2003-2011, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/

CKEDITOR.editorConfig = function( config )
{
    // Define changes to default configuration here. For example:
    config.language = I18n.locale;
    // config.uiColor = '#AADC6E';

  /* Filebrowser routes */
  // The location of an external file browser, that should be launched when "Browse Server" button is pressed.
  config.filebrowserBrowseUrl = "/ckeditor/attachment_files";

  // The location of an external file browser, that should be launched when "Browse Server" button is pressed in the Flash dialog.
  config.filebrowserFlashBrowseUrl = "/ckeditor/attachment_files";

  // The location of a script that handles file uploads in the Flash dialog.
  config.filebrowserFlashUploadUrl = "/ckeditor/attachment_files";

  // The location of an external file browser, that should be launched when "Browse Server" button is pressed in the Link tab of Image dialog.
  config.filebrowserImageBrowseLinkUrl = "/ckeditor/pictures";

  // The location of an external file browser, that should be launched when "Browse Server" button is pressed in the Image dialog.
  config.filebrowserImageBrowseUrl = "/ckeditor/pictures";

  // The location of a script that handles file uploads in the Image dialog.
  config.filebrowserImageUploadUrl = "/ckeditor/pictures";

  // The location of a script that handles file uploads.
  config.filebrowserUploadUrl = "/ckeditor/attachment_files";

  // Rails CSRF token
  config.filebrowserParams = function(){
    var csrf_token = jQuery('meta[name=csrf-token]').attr('content'),
        csrf_param = jQuery('meta[name=csrf-param]').attr('content'),
        params = new Object();

    if (csrf_param !== undefined && csrf_token !== undefined) {
      params[csrf_param] = csrf_token;
    }

    return params;
  };

  config.addQueryString = function (url, params) {
    var queryString = [];

    if (!params)
      return url;
    else {
      for (var i in params)
        queryString.push(i + "=" + encodeURIComponent(params[ i ]));
    }

    return url + ( ( url.indexOf("?") != -1 ) ? "&" : "?" ) + queryString.join("&");
  };

  // Integrate Rails CSRF token into file upload dialogs (link, image, attachment and flash)
  CKEDITOR.on('dialogDefinition', function (ev) {
    // Take the dialog name and its definition from the event data.
    var dialogName = ev.data.name;
    var dialogDefinition = ev.data.definition;
    var content, upload;

    if ($.inArray(dialogName, ['link', 'image', 'attachment', 'flash']) > -1) {
      content = (dialogDefinition.getContents('Upload') || dialogDefinition.getContents('upload'));
      upload = (content == null ? null : content.get('upload'));

      if (upload && upload.filebrowser['params'] == null) {
        upload.filebrowser['params'] = config.filebrowserParams();
        upload.action = config.addQueryString(upload.action, upload.filebrowser['params']);
      }
    }
  });

  /* Extra plugins */
  // works only with en, ru, uk locales
//  config.extraPlugins = "embed,attachment";

    //for orfografii
  config.disableNativeSpellChecker = false;
//  config.removePlugins = 'contextmenu';

  /* Toolbars */
  config.toolbar = 'Mini';
  config.toolbar_Mini =
    [
        ['Source','-','Preview'],
        ['Cut','Copy','Paste','PasteText','PasteFromWord'],
        ['Undo','Redo','-','SelectAll','RemoveFormat'],
//        ['Styles','Format'],
      ['Subscript', 'Superscript'],
//      ['Subscript', 'Superscript', 'TextColor'],
//        ['Maximize','-','About'],
        ['Bold','Italic','Underline'], ['NumberedList','BulletedList','-','Outdent','Indent','Blockquote']//,
//        ['JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock'],
//        ['Link','Unlink','Anchor'], ['Image', 'Attachment', 'Flash', 'Embed'],
//        ['Table','HorizontalRule','Smiley','SpecialChar','PageBreak']
    ];

  config.toolbar = 'VeryEasy';
  config.toolbar_VeryEasy =
    [
        ['Source','-','Preview'],
        ['Cut','Copy','Paste','PasteText','PasteFromWord'],
        ['Undo','Redo','-','SelectAll','RemoveFormat'],
//        ['Styles','Format'],
      ['Subscript', 'Superscript', 'TextColor'],
        ['Maximize','-','About'],
        ['Bold','Italic','Underline','Strike'], ['NumberedList','BulletedList','-','Outdent','Indent','Blockquote'],
//        ['JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock'],
//        ['Link','Unlink','Anchor'], ['Image', 'Attachment', 'Flash', 'Embed'],
        ['Table','HorizontalRule','Smiley','SpecialChar','PageBreak']
    ];

  config.toolbar = 'Easy';
  config.toolbar_Easy =
      [
        ['Source', '-', 'Preview'],
        ['Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord'],
        ['Undo', 'Redo', '-', 'SelectAll', 'RemoveFormat'],
        ['Styles', 'Format'],
        ['Subscript', 'Superscript', 'TextColor'],
        ['Maximize', '-', 'About'],
        '/',
        ['Bold', 'Italic', 'Underline', 'Strike'],
        ['NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', 'Blockquote'],
        ['JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock'],
        ['Link', 'Unlink', 'Anchor'],
        ['Image', 'Attachment', 'Flash', 'Embed'],
        ['Table', 'HorizontalRule', 'Smiley', 'SpecialChar', 'PageBreak']
      ];
  config.jqueryOverrideVal = true;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T23:05:49.353

*我在 ckeditor 在根目录*上搜索皮肤时遇到问题，因为我在整个页面加载后动态加载 ckeditor.js。

我在[这个线程](http://ckeditor.com/comment/125441#comment-125441) 中找到的解决方案是在调用 ckeditor.js 之前设置全局变量 CKEDITOR_BASEPATH。

# android - 隐藏应用程序（或在后台运行）而不使用服务

> ID：14990432
> 
> 赞同：1
> 
> 时间：2013-02-20T21:38:21.170
> 
> 标签：android

我正在对应用程序使用 USB_DEVICE_ATTACHED 意图。该应用程序运行良好，但我想用另一个应用程序打开它以开始使用该设备。

我希望应用程序在隐藏或后台启动（而不是在已经运行的应用程序之上启动）。我已经看到了一些使用服务，但看起来 USB_DEVICE_ATTACHED（和其他 USB 意图/权限）在服务上不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:40:32.283

让您的广播接收器在接收到该特定意图操作时调用该服务，然后启动您的服务。

## 更新

阅读 CommonsWare 提供的链接：

[http://developer.android.com/guide/topics/connectivity/usb/host.html](http://developer.android.com/guide/topics/connectivity/usb/host.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:28:49.913

最终使用了 NoDisplay 主题的活动。

# c - fgets() strtok()

> ID：14990434
> 
> 赞同：-1
> 
> 时间：2013-02-20T21:38:33.623
> 
> 标签：c, malloc, fgets, strtok

嘿，我的任务是从由空格分隔的文件中读取数据并对数据进行排序。我不断收到段错误，我无法弄清楚我的代码有什么问题。谢谢您的帮助。

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#define MAX_LINE 100
#define MAX_NAME 30
int countLinesInFile(FILE* fptr);
int findPlayerByName(char **names, char* target, int size);
int findMVP(int* goals, int* assists, int size);
void printPlayers(int* goals, int* assists, char** names, int size);
void allocateMemory(int **goals, int** assists, char*** names, int size);
void sortPlayersByGoals(int* goals, int* assists, char** names, int size);
void writeToFile(FILE *fptr, int* goals, int* assists, char** names, int size);
void readLinesFromFile(FILE* fptr, int* goals, int* assists, char** names, int        numLines);

int main(int argc, char **argv)
{
    FILE *fptr;
    int size;
    int* goals;
    int* assists;
    char** names;
    if(argc != 2)
    {
            printf("Invalid number of arguments\n");
            return 1;
    }
    fptr = fopen(argv[1], "r");
    if(fptr == NULL)
    {
            printf("Failed to open input file.\n");
            return 2;
    }
    size = countLinesInFile(fptr);
    allocateMemory(&goals, &assists, &names, size);
    int numLines;
    numLines = size;
    readLinesFromFile(fptr, goals, assists, names, numLines);
    printPlayers(goals, assists, names, size);

    return 3;
}
void printPlayers(int* goals, int* assists, char** names, int size)
{
    int i;
    for(i = 0; i < size; i++)
    {
    printf("%c     %d     %d", *(names + i), *(goals + i), *(assists + i));
    }

}
void readLinesFromFile(FILE* fptr, int* goals, int* assists, char** names, int numLines)
{
    char line[MAX_LINE];
    int i;
    char* value;

    for(i = 0; i < numLines; i++)
    {
            fgets(line, MAX_LINE, fptr);
            value = strtok(line, " ");
            *(*names + i) = atoi(value);
            value = strtok(line, " ");
            *(goals + i) = atoi(value);
            value = strtok(line, " ");
            *(assists + i) = atoi(value);
    }

}
void allocateMemory(int **goals, int** assists, char*** names, int size)
{

    *goals = malloc(sizeof(int)* size);
    *assists = malloc(sizeof(int)* size);
    *names = malloc(sizeof(char*)* MAX_NAME);

}
int countLinesInFile(FILE* fptr)
{
    int i;
    char line[MAX_LINE];
    i = 0;
    while(fgets(line, MAX_LINE, fptr) != NULL)
    {
    i++;
    }
    rewind(fptr);
    return i;
} 
```

- 插入 -

输入文件看起来像： Redden 2 0 Berglund 5 2 Jackman 2 0 Stewart 4 0 Oshie 3 5 McDonald 2 4 Pietrangelo 2 7 Perron 2 6 Tarasenko 5 5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:44:39.283

在 allocateMemory() 中，每个`*names`都是一个`char **`. 你需要分配两次

```
*names = malloc(...);
for (<each pointer in names>) {
    <pointer> = malloc(...);
} 
```

不要忘记释放两次

```
for (<each pointer in names>) {
    free(<pointer>);
}
free(*names); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:46:29.797

关于您的分段错误，您正在取消引用指针`**names`，但`*names`它是一个未初始化的指针。这会导致未定义的行为，因此在您的情况下会出现执行错误（并且可能是最糟糕的！）。要解决它，您必须分配一个二维数组，例如：

```
*a = malloc(numLines * sizeof **a);
for (i = 0; i < n; i++) (*a)[i] = malloc(NAME); 
```

此外，您的`strtok`使用似乎是错误的。这个函数保持一个指向你的数据的静态指针（因此它通常不是线程安全的）：你应该`NULL` 在下一次调用中使用这个值。否则，它将每次返回相同的地址。`man strtok`通过输入您最喜欢的网络搜索引擎来查看文档。

```
char line[MAX_LINE];
int i;

for (i = 0; i < numLines; i++)
{
    fgets(line, sizeof line, fptr);
    value = strtok(line, " ");
    (*names)[i] = atoi(value); /* This assignment looks strange. */
    value = strtok(NULL, " ");
    goals[i] = atoi(value);
    value = strtok(NULL, " ");
    assits[i] = atoi(value);
} 
```

不要忘记数组下标运算符！如果是真实世界的程序，`sscanf`看起来更合适。

# python - Django 重定向快捷方式

> ID：14990435
> 
> 赞同：2
> 
> 时间：2013-02-20T21:38:50.747
> 
> 标签：python, django

我尝试使用重定向快捷方式发出重定向，但出现以下错误

```
raise ImproperlyConfigured("The included urlconf %s doesn't have any patterns in it" % self.urlconf_name)
ImproperlyConfigured: The included urlconf webtools.urls doesn't have any patterns in it 
```

我的 urls.py 文件如下所示：

```
from django.conf.urls.defaults import patterns, include, url
from django.views.generic.simple import direct_to_template
from django.views.generic.base import RedirectView
from django.shortcuts import redirect

# Uncomment the next two lines to enable the admin:
# from django.contrib import admin
# admin.autodiscover()

urlpatterns = patterns('',
 url(r'^.*$', redirect(macmonster.views.home)),
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:44:56.783

您的 url 模式似乎有点奇怪，请尝试：

```
url(r'^(.*)$', redirect('macmonster.views.home')), 
```

# html - 嵌套时重叠 li 元素的文本

> ID：14990439
> 
> 赞同：0
> 
> 时间：2013-02-20T21:39:09.947
> 
> 标签：html, css, html-lists, menubar

我正在尝试使用 CSS/HTML 创建一个菜单栏，悬停时会在列表元素中触发。当我尝试将列表排列成两列时遇到问题。

这是示例代码：http: [//jsfiddle.net/Km922/1/](http://jsfiddle.net/Km922/1/)

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Experiment</title>
    <style media="all">
        .navigation ul
        {
            margin: 0px;
            padding: 0px;
            list-style: none;
            left: 300px;
            position: relative;
            top: 200px;
        }
        .navigation ul li ul .second
        {
            float: right;
            width: 200px;
            position: relative;
            overflow: hidden;
        }
        .navigation li
        {
            float: left;
            height: 30px;
            margin-left: 15px;
            margin-right: 15px;
            position: relative;
            top: 30px; /*clear:left;*/
        }
        .navigation li a
        {
            text-decoration: none;
        }
        .navigation li a:hover
        {
            text-decoration: underline;
        }
        .navigation li ul
        {
            margin: 0px;
            padding: 0px;
            position: absolute;
            left: -9999px;
            height: 30px;
            top: 30px; /*display:inline-block;*/
        }
        .navigation li:hover ul
        {
            left: 0;
            width: 160px;
            visibility: visible;
        }
        .header-container
        {
            background: url(Images/nav-bg4.png) repeat-x scroll 0 0 transparent;
            height: 136px;
            left: 0;
            position: absolute;
            right: 0;
            top: 0;
            z-index: 901;
        }
        #apDiv1
        {
            position: absolute;
            width: 200px;
            height: 115px;
            z-index: 902;
            top: 29px;
        }
        .navigation ul li ul .first
        {
            float: left;
            width: 200px;
            position: absolute;
            overflow: hidden;
        }
    </style>
</head>
<body background="Images/global-splash-map.jpg">
    <header class="header-container">
  <div id="apDiv1"><img src="Images/levis-logo.png" /></div>
</header>
    <div class="navigation">
        <ul>
            <li><a href="#">menu1</a>
                <ul>
                    <li class="second">Canada</li>
                    <li class="first">United States</li>
                    <li class="second">Mexico</li>
                </ul>
            </li>
            <li><a href="#">menu2</a>
                <ul>
                    <li class="second">Argentina</li>
                    <li class="second">Brazil</li>
                    <li class="second">Bolivia</li>
                    <li class="second">Chile</li>
                    <li class="second">Colombia</li>
                    <li class="second">Ecuador</li>
                    <li class="first">Panama</li>
                    <li class="first">Paraguay</li>
                    <li class="first">Peru</li>
                    <li class="first">Uruguay</li>
                    <li class="first">Venezuela</li>
                </ul>
            </li>
            <li><a href="#">menu3</a>
                <ul>
                    <li>sub menu item 1</li>
                    <li>sub menu item 2</li>
                    <li>sub menu item 3</li>
                    <li>sub menu item 4</li>
                </ul>
            </li>
            <li><a href="#">menu3</a>
                <ul>
                    <li>sub menu item 1</li>
                    <li>sub menu item 2</li>
                    <li>sub menu item 3</li>
                    <li>sub menu item 4</li>
                </ul>
            </li>
            <li><a href="#">menu4</a>
                <ul>
                    <li>sub menu item 1</li>
                    <li>sub menu item 2</li>
                    <li>sub menu item 3</li>
                    <li>sub menu item 4</li>
                </ul>
            </li>
        </ul>
    </div>
</body>
</html> 
```

当您将鼠标悬停在 menu1 上时，它会完美显示，但是当您将鼠标悬停在 menu2 上时，我看到应该出现在每一行中的列表元素正在出现并相互重叠。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:47:47.690

你有几个问题。首先，浮动和绝对定位不兼容：

```
.navigation ul li ul .first {
    float: left;
    position: absolute;
} 
```

接下来，您不能像这样堆叠列表项并将它们分成两列。花车不是这样工作的。

```
<ul>
  <li class="second">Argentina</li>
  <li class="second">Brazil</li>
  <li class="second">Bolivia</li>
  <li class="second">Chile</li>
  <li class="second">Colombia</li>
  <li class="second">Ecuador</li>
  <li class="first">Panama</li>
  <li class="first">Paraguay</li>
  <li class="first">Peru</li>
  <li class="first">Uruguay</li>
  <li class="first">Venezuela</li>
</ul> 
```

没有特定 HTML 的多列列表是一个挑战。这是一篇可能会让您入门的文章：http: [//alistapart.com/article/multicolumnlists](http://alistapart.com/article/multicolumnlists)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:56:12.947

如前所述，您不能在同一元素上同时使用浮动和绝对定位。没关系，因为我们不想要任何一个。获得完美列的秘诀是使用 CSS 列模块。

我在您的 CSS 中进行了大量清理工作：

[http://jsfiddle.net/uPzxb/4/](http://jsfiddle.net/uPzxb/4/)（不包括前缀）

```
.navigation ul {
    margin: 0px;
    padding: 0px;
    list-style: none;
    left: 30px;
    position: relative;
    top: 20px;
}
.navigation > ul > li {
    float: left;
    height: 30px;
    margin-left: 15px;
    margin-right: 15px;
    position: relative;
}
.navigation li a {
   text-decoration: none;
}
.navigation li a:hover {
   text-decoration: underline;
}
.navigation li ul {
    margin: 0px;
    padding: 0px;
    position: absolute;
    top: 30px;
    display: none;
}
.navigation li:hover ul {
    left: 0;
    width: 160px;
    display: block;
    columns: 2; /* this here is the key */
}
.header-container {
    background: url(Images/nav-bg4.png) repeat-x scroll 0 0 transparent;
    height: 136px;
    left: 0;
    position: absolute;
    right: 0;
    top: 0;
    z-index: 901;
}
#apDiv1 {
    position: absolute;
    width: 200px;
    height: 115px;
    z-index: 902;
    top: 29px;
} 
```

[http://caniuse.com/#feat=multicolumn](http://caniuse.com/#feat=multicolumn)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-08T20:27:46.800

对于将改变位置的元素，例如下拉列表项。将列表项从绝对定位更改为相对定位可能会更好。

```
position: relative; 
```

# php - PHP：“While”循环为变量的每次迭代返回相同的值

> ID：14990442
> 
> 赞同：0
> 
> 时间：2013-02-20T21:39:15.923
> 
> 标签：php, mysql, loops, foreach

提前感谢您提供的任何帮助。

我正在执行一个返回如下内容的查询：

```
route   |   busnumber
  2            300
  4            123
  2            455
 12            934 
```

我的目标是打印/回显所有“busnumber”为“route”=2 的列表。我知道我可以在数据库上进行查询来执行此操作，但我不想为每条路线运行此查询。结果集实际上是一个主复杂查询的一部分，因此我需要使用数组来完成我的目标。

查询正常工作并显示适当的信息。我还将结果返回到一个数组中。IE ...

```
 $query=("SELECT * from foo")
    $result=mysql_fetch_assoc($query); 
```

我当前的代码如下所示（注意我的评论）：

```
 mysql_data_seek( $result,0);  // because I'm previously iterating through $result
while ($i2=mysql_fetch_assoc($result)) {
$busnumber=$i2['busnumber']; 
$busroute=$i2['route'];
echo "<div class='businfo'>";
if ($busroute='2'){           // I only want this to happen if $busroute=2
echo "Current Route = $busroute</br>";
echo "Bus Number : $busnumber </br>";
}
echo "</div>";
} 
```

然而，我得到的是，它与每行相同的“$busroute”（2）但不同的“$busnumber”相呼应：

```
Current Route = 2
Bus Number : 194
Current Route = 2
Bus Number : 196
Current Route = 2
Bus Number : 2002
Current Route = 2
Bus Number : 2010
Current Route = 2
Bus Number : 2013 
```

问题是所有这些巴士号码都不是路线 2 的一部分。它是所有路线的巴士号码列表。如果 $routenumber=2，我只希望它执行 foreach 循环。

再次感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T21:41:10.457

```
if ($busroute='2'){ 
```

问题是您没有在这里检查它是否等于 2，而是将其分配为等于 2。将其更改为此就可以了：

```
if ($busroute=='2'){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:45:05.567

```
$query = "SELECT * from foo";
$result = mysql_query($query);

while($row = mysql_fetch_assoc($result)) {
    if ($row['route'] == 2) {
        // do your stuff
    }
} 
```

# hadoop - Elastic Map Reduce：继续出错？

> ID：14990445
> 
> 赞同：1
> 
> 时间：2013-02-20T21:39:21.843
> 
> 标签：hadoop, hadoop-streaming, amazon-emr, emr

我们非常广泛地使用 Elastic Map Reduce，并且正在使用它处理越来越多的数据。有时我们的工作会因为数据格式错误而失败。我们不断修改我们的地图脚本以处理各种异常，但有时仍然有一些格式错误的数据会设法破坏我们的脚本。

1.  即使某些地图或减少作业失败，是否可以将 Elastic Map Reduce 指定为“继续出错”？

2.  至少，是否有可能增加整个集群失败的最小失败任务数（有时，我们在 500 个左右的作业中只有 1 个失败的作业，我们希望至少获得这些结果并拥有集群继续运行。）

3.  此外，虽然我们可以修改 map 脚本来处理新的异常，但我们使用默认的 Hadoop“聚合”reducer，当它失败时，我们无法捕获异常。是否有任何特殊的方法来处理“聚合”reducer 中的错误，或者我们是否必须使用上面问题 #2 中可用的任何东西（增加失败任务的最小数量。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:06:43.840

您可以`Exception`在 mapper 和 reducer 中捕获，并且在 catch 块内有一个如下所示的计数器：

```
catch (Exception ex){
    context.getCounter("CUSTOM_COUNTER", ex.getMessage()).increment(1);
    System.err.println(GENERIC_INPUT_ERROR_MESSAGE + key + "," + value); // also log the payoad which resulted in the exception
    ex.printStackTrace();
} 
```

如果异常消息是您所期望的，并且计数器的值也是可以接受的，那么您可以很好地继续处理结果或调查日志。我知道不建议捕捉`Exception`，但如果你想“继续出错”，那几乎是一回事。由于这里的集群成本受到威胁，我认为我们最好捕捉`Excpetion`而不是特定的例外。

但是，它可能会产生副作用，例如您的代码可能会在完全错误的输入上运行，而且如果不是捕获它，它会更早地失败。但是发生这种事情的可能性很小。

**编辑：**

对于您的第 2 点，您可以使用以下命令设置每个跟踪器允许的最大故障数：

```
 conf.setMaxTaskFailuresPerTracker(noFailures); 
```

或者

您必须设置的配置是`mapred.max.tracker.failures`. 您可能知道默认值为 4。对于所有其他 mapred 配置，请参见[此处](http://hadoop.apache.org/docs/r1.0.4/mapred-default.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T23:36:03.207

如果我没有正确阅读您的问题，您可以让集群在失败时继续执行在基于 ruby​​ 的 emr 命令行工具中的 elastic-mapreduce 调用中定义的下一步

```
--jar s3://elasticmapreduce/libs/script-runner/script-runner.jar --args "s3://bucket/scripts/script.sh" --step-name "do something using bash" --step-action CONTINUE  \ 
```

# python - 为多个根目录调用 os.walk？

> ID：14990451
> 
> 赞同：2
> 
> 时间：2013-02-20T21:40:08.193
> 
> 标签：python, python-3.x

我注意到这里描述的 os.walk API：http: [//docs.python.org/2/library/os.html](http://docs.python.org/2/library/os.html) 是这样的：

```
for root, dirs, files in os.walk('C:\\Users\\Me\\Videos') 
```

无论如何我在同一个调用中将多个目录传递给这个 API？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T21:43:44.103

你不能只使用两个for循环吗？

```
for x in ("c:\\root1", "c:\\root2", "c:\\root3"):
    for root, dirs, files in os.walk(x):
        pass 
```

或凌乱的单线`itertools.chain()`：

```
for root, dirs, files in itertools.chain(*[os.walk(x) for x in ("c:\\root1", "c:\\root2", "c:\\root3")]):
    pass 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T21:43:16.710

一句话，没有。但是看做[`itertools.chain()`](http://docs.python.org/3.2/library/itertools.html#itertools.chain)你想做的，而不是你要求的。

# javafx-2 - Native Bundle 抛出 java.security.NoSuchAlgorithmException

> ID：14990455
> 
> 赞同：2
> 
> 时间：2013-02-20T21:40:15.323
> 
> 标签：javafx-2

我正在尝试构建一个本机捆绑包，专门用于 mac os x，但也在 Windows 中。在这两种环境中，.app、.dmg、.exe 都能正确生成，但是当我运行它们时，我得到了许多 java.security.NoSuchAlgorithmException 异常。例如： 原因：java.security.NoSuchAlgorithmException: SunTlsRsaPremasterSecret KeyGenerator 不可用

引起：java.security.NoSuchAlgorithmException：PBEWithMD5AndDES SecretKeyFactory 不可用

我的程序使用 TLS 来建立 xmpp 连接。而且我还有一个没有加载 HTTPS 的 webview。

有谁知道为什么会发生这种情况？我应该注意，如果我单独运行生成的 jar，它工作正常，它只发生在 .exe 和 .app 上。这是我的 build.xml fx:deploy 代码：

```
<fx:deploy width="${javafx.run.width}" height="${javafx.run.height}" 
          nativeBundles="all"
          outdir="${basedir}/${dist.dir}" outfile="${application.title}">
  <fx:application name="${application.title}" 
                  mainClass="${javafx.main.class}"/>
  <fx:resources>
      <fx:fileset dir="${basedir}/${dist.dir}"
                  includes="*.jar"/>
      <fx:fileset dir="${basedir}/${dist.dir}" includes="lib/*.jar"/>
  </fx:resources>
  <fx:info title="${application.title}" 
           vendor="${application.vendor}"/>
</fx:deploy> 
```

感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:21:06.563

我之前没看过这篇文章：[JavaFX WebView Not Loading HTTPS Page](https://stackoverflow.com/questions/13356633/javafx-webview-not-loading-https-page/13599131#13599131)

发生的情况是 jre 的捆绑包不包含 /ext 文件夹，因此您必须在构建捆绑包时使用脚本复制它。

# vb.net - 查找存储在 List(Of Point) 数据类型中的坐标之间的斜率

> ID：14990456
> 
> 赞同：1
> 
> 时间：2013-02-20T21:40:15.090
> 
> 标签：vb.net, list, point

我在 VB 2008 中工作。我使用 List(Of Point) 数据类型来存储位图中某些像素值的坐标：

```
'This code is in a loop
Dim bpCoordinates As New List(Of Point)
If pixelClr > 72 Then
bpCoordinates.Add(New Point(FrameNumber, y))
End If 
```

我想使用 (y2 - y1)/(x2 - x1) 计算列表中存储点之间的斜率。我遇到的问题是访问列表中的点。我不知道如何做到这一点。

我在网上查看，找不到从列表中提取单个坐标点的任何方法。有什么建议么。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:54:12.327

如果它们列在 List 中，您可以像在数组中一样直接访问元素 - 尽管这效率低下。

```
'Returns the nth list element
Dim p As Point = bpCoordinates(n) 
```

将它存储在数组中会好得多，尤其是如果您的列表很长。

```
Dim pointArray As Point() = bpCoordinates.ToArray 
```

之后只需正常遍历您的列表或数组即可。

```
Dim slope As Double

For index As Integer = 0 To pointArray.Length - 1
     slope = (pointArray(index + 1).Y - pointArray(index).Y) / (pointArray(index + 1).X - pointArray(index).X)
     'Do fun stuff with slope
Next 
```

# vb.net - 如何将最后一行、最后输入的 id 从表调用到 vba 表单

> ID：14990457
> 
> 赞同：0
> 
> 时间：2013-02-20T21:40:22.090
> 
> 标签：vb.net, sql-server-express

如果我的桌子是

```
 id      name       pwd     mob
 CL001   kiara      chopra  8809808
 CLoo2   James      Nicoles 0990889
 CL003   parineeti  pari    9094343 
```

，我如何读取最后输入的行的 ID？进入我的 Visual Basic 表单？

也就是说，我只需要阅读 CL003。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:44:56.137

对于 SQL Server - 假设该`Id`列是一个标识字段，您可以使用：

```
SELECT IDENT_CURRENT(‘tablename’) 
```

# android - 为什么 arm-linux-androideabi-gcc 强制执行 -fpic？

> ID：14990461
> 
> 赞同：3
> 
> 时间：2013-02-20T21:40:47.650
> 
> 标签：android, gcc, cross-compiling

我很惊讶地看到 gcc 强制代码与位置无关，即使在命令行中没有明确提供这样的标志。

我怀疑这可能与 Android 的动态加载器的某些期望有关（例如，对重定位类型的期望和将代码放在任何它想要的地方的自由），但我不确定。

任何人都可以解释为什么会这样吗？

```
$ arm-linux-androideabi-gcc --version | grep GCC
arm-linux-androideabi-gcc (GCC) 4.4.3

$ arm-linux-androideabi-gcc -v -S main.c |& grep fpic
 /home1/local64/android-toolchain/bin/../libexec/gcc/arm-linux-androideabi/4.4.3/cc1 -quiet -v -iprefix /home1/local64/android-toolchain/bin/../lib/gcc/arm-linux-androideabi/4.4.3/ -isysroot /home1/local64/android-toolchain/bin/../sysroot main.c -mbionic -fpic -quiet -dumpbase main.c -march=armv5te -mfloat-abi=soft -mfpu=vfp -auxbase main -version -o main.s 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T12:32:55.650

从 Android 4.1 开始，Google 强制使用完整的[ASLR](http://en.wikipedia.org/wiki/Address_space_layout_randomization)来克服常见的安全漏洞，请参阅[本文](https://blog.duosecurity.com/2012/07/exploit-mitigations-in-android-jelly-bean-4-1/)了解更多详细信息。

为此需要位置独立代码（PIC），但也需要 PIE（位置独立可执行文件）。

# php - WORDPRESS 简单查询

> ID：14990468
> 
> 赞同：0
> 
> 时间：2013-02-20T21:41:16.747
> 
> 标签：php, wordpress, foreach

我有一个类别查询，在我的类别查询中，我想通过查询的类别 ID（或名称或其他）获取产品（只有一个）我开始查询：

```
<?wpsc_start_category_query(array('category_group'=> get_option('wpsc_default_category'))); ?> 
```

然后尝试使用 get_posts() 函数获取产品：

```
$args = array(
 'post_type' => 'wpsc-product',
 'posts_per_page' => 1,
 'tax_query' => array(
  array(
  'taxonomy' => 'wpsc_product_category',
  'field' => 'id',
  'terms' => $aka
 )));
$cat1_posts = get_posts($args); 
```

$aka 是：

```
$aka = '[wpsc_category_id]'; 
```

但是当我回显 $cat1_posts[0]->ID; 它只显示每个类别的最后一个产品 ID。问题是什么？仅回显 [wpsc_category_id] 效果很好。在过去的几天里，我尝试了一切。我会给你买饼干寻求帮助

我必须知道，我需要 foreach 或类似的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:54:03.413

您可以使用 get_terms() 函数。所以像这样的东西（未经测试）

```
<?php
    //for each category, show latest post
    $cat_args=array(
      'orderby' => 'name',
      'order' => 'ASC'
       );
    $categories = get_terms( 'wpsc_product_category');
      foreach($categories as $category) { 
        $args=array(
          'showposts' => 1,
          'post_type' => 'wpsc-product',
          'wpsc_product_category' => array($category->slug)
        );
        $posts=get_posts($args);
          if ($posts) {
            echo '<p>Category: <a href="' . get_category_link( $category->term_id ) . '" title="' . sprintf( __( "View all posts in %s" ), $category->name ) . '" ' . '>' . $category->name.'</a> </p> ';
            foreach($posts as $post) {
              setup_postdata($post); ?>
              <p><a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title_attribute(); ?>"><?php the_title(); ?></a></p>
              <?php
            } // foreach($posts
          } // if ($posts
        } // foreach($categories
    ?> 
```

# php - PHP 仅显示已提交的字段

> ID：14990470
> 
> 赞同：0
> 
> 时间：2013-02-20T21:41:24.073
> 
> 标签：php, forms

我正在为鹿创建一个评分系统，并且我有一个要求测量的表格。我还有一个添加更多表格的选项（如果鹿有超过 4 个尖齿，或 4 个异常点）。现在，当我提交表单时，它会向它发送 /add.php。我有它，所以它显示原始表格，然后我想制作它，以便它显示添加表格。但只有当他们使用这种形式时。所以基本上我希望它仅在使用时才在字段中显示测量值。

```
<?php
  $a = $_GET['a'];
  $b = $_GET['b'];
  $c = $_GET['c'];
  $d = $_GET['d'];
  //....continueing on....//

  $answer = $a + $b + $c + $d + $e + $f + //....continue...//

?> 
```

我的 /add.php 中有上面的代码，可以从我的表单中提取信息。

```
<a href="#" id="link_d" onclick="new_field('file_e');hide_mais('link_d')">Add More</a> 
```

上面的代码是添加更多的字段（以及在表中设置的 ID）。

```
<input type="text" name="pp"> 
```

以上是我使用的一种形式的示例。

我想显示原始字段（a、b、c、d 等），然后如果有人单击“添加更多”并输入另一个字段。我也希望显示该字段（aa、bb、cc 等...）

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:07:59.280

如何让鹿使用电脑？

无论如何，对于您的问题：通过使用[`foreach()`](http://www.php.net/manual/en/control-structures.foreach.php). 试试这个让你开始。

```
foreach( $_GET as $key => $value ) {
    echo "var $key set to $value\n";
} 
```

# php - 为什么它吹过第一个？

> ID：14990473
> 
> 赞同：0
> 
> 时间：2013-02-20T21:41:38.790
> 
> 标签：php, foreach, require-once

我构建了一个函数，如果你给它一个路径数组，它将在每个路径中查找一个文件，如果你给它一个路径数组，它将只在该路径中查找文件。

我的问题是，当你给它一系列路径时，例如：

```
$array = array(
    'template_view_paths' => array(
        'path_name' => some/path/
        'path_name_two' => some/path/two/
    )
) 
```

它似乎找到了文件，但由于文件不存在`some/path/`而继续前进并吓坏了。`some/path/two/`如果它在停止在其他路径中查找的任何路径中找到文件，我将需要更改什么？

**代码 - 未重构**

```
public function render_view($template_name){
    if(!isset($this->_options['template_view_path'])){
        throw new AisisCore_Template_TemplateException('Not view path was set.');
    }

    if(is_array($this->_options['template_view_path'])){
        foreach($this->_options['template_view_path'] as $template=>$path){
            require_once($path . $template_name . '.phtml');
        }
    }else{
        if(!file_exists($this->_options['template_view_path'] . $template_name . '.phtml')){
            throw new AisisCore_Template_TemplateException('Could not find: ' . $template_name . '.phtml at ' . $path);
        }

        require_once ($this->_options['template_view_path'] . $template_name . '.phtml');
    }
} 
```

**注意：** *要关注的部分是`if(is_array()){}`循环*。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:43:33.403

不应该：

```
if(is_array($this->_options['template_view_path'])){
    foreach($templates as $template=>$path){
        require_once($path . $template_name . '.phtml');
    }
}else{ 
```

是：

```
if(is_array($this->_options['template_view_path'])){
    foreach($this->_options['template_view_path'] as $template=>$path){
        if (file_exists($filename = $path . $template_name . '.phtml')) {
            require_once($filename);
            return;
        }
    }

    throw new AisisCore_Template_TemplateException('Could not find: ' . $template_name . '.phtml in any paths');
}else{ 
```

你从来没有真正循环过`$this->_options['template_view_path']`。

# java - Grizzly 2.2.19 SSL 示例代码不起作用

> ID：14990474
> 
> 赞同：3
> 
> 时间：2013-02-20T21:41:39.617
> 
> 标签：java, ssl, grizzly

Grizzly 2.2 目前可用的文档很少，超出示例代码中存在的文档，我发现这与 SSL 实现有关，因此最难导航。我迫切需要这方面的一些指导。在查看了我的代码以确定我需要发布什么才能提出一个完整的问题后，我意识到首先巩固基础知识可能是最有益的。

下面是[Grizzly 项目](http://grizzly.java.net/)提供的三个类，用于演示 Grizzly 的 SSL 功能的示例实现。**除了删除注释之外，该代码与git://java.net/grizzly~git**中维护的 2.2.19 发布的代码库相同，也可[在此处](https://maven.java.net/content/repositories/releases/org/glassfish/grizzly/samples/grizzly-framework-samples/2.2.19/grizzly-framework-samples-2.2.19-sources.jar)获得。

***git 存储库还提供了引用的信任库和密钥库。***

### 回声过滤器：

```
public class EchoFilter extends BaseFilter{
    @Override
    public NextAction handleRead(FilterChainContext ctx)throws IOException {
        //|Peer address is used for non-connected UDP Connection
        final Object peerAddress = ctx.getAddress();
        final Object message = ctx.getMessage();
        ctx.write(peerAddress, message, null);
        return ctx.getStopAction();
    }
} 
```

### SSLEcho服务器：

```
public class SSLEchoServer{
    public static final String HOST = "localhost";
    public static final int PORT = 7777;

    public static void main(String[] args) throws IOException{
        //|Create a FilterChain using FilterChainBuilder
        FilterChainBuilder filterChainBuilder = FilterChainBuilder.stateless();
        //|Add TransportFilter, which is responsible for reading and writing data to the connection
        filterChainBuilder.add(new TransportFilter());

        //|Initialize and add SSLFilter
        final SSLEngineConfigurator serverConfig = initializeSSL();
        final SSLEngineConfigurator clientConfig = serverConfig.copy().setClientMode(true);

        filterChainBuilder.add(new SSLFilter(serverConfig, clientConfig));

        //|Add StringFilter, which will be responsible for Buffer <-> String transformation
        filterChainBuilder.add(new StringFilter(Charset.forName("UTF-8")));

        //|Use the plain EchoFilter
        filterChainBuilder.add(new EchoFilter());

        //|Create TCP transport
        final TCPNIOTransport transport = TCPNIOTransportBuilder.newInstance().build();

        //|Set filterchain as a Transport Processor
        transport.setProcessor(filterChainBuilder.build());

        try{
            //|Binding transport to start listen on certain host and port
            transport.bind(HOST, PORT);
            //|Start the transport
            transport.start();
            System.out.println("Press any key to stop the server...");
            System.in.read();
        }finally{
            System.out.println("Stopping transport...");
            //|Stop the transport
            transport.stop();
            System.out.println("Stopped transport...");
        }
    }

    private static SSLEngineConfigurator initializeSSL(){
        //|Initialize SSLContext configuration
        SSLContextConfigurator sslContextConfig = new SSLContextConfigurator();

        //|Set key store
        ClassLoader cl = SSLEchoServer.class.getClassLoader();
        URL cacertsUrl = cl.getResource("ssltest-cacerts.jks");
        if(cacertsUrl != null){
            sslContextConfig.setTrustStoreFile(cacertsUrl.getFile());
            sslContextConfig.setTrustStorePass("changeit");
        }

        //|Set trust store
        URL keystoreUrl = cl.getResource("ssltest-keystore.jks");
        if(keystoreUrl != null){
            sslContextConfig.setKeyStoreFile(keystoreUrl.getFile());
            sslContextConfig.setKeyStorePass("changeit");
        }

        //|Create SSLEngine configurator
        return new SSLEngineConfigurator(sslContextConfig.createSSLContext(), false, false, false);
    }
} 
```

### SSLEcho客户端：

```
public class SSLEchoClient{
    private static final String MESSAGE = "Hello World!";

    public static void main(String[] args) throws IOException{
        //|Create a FilterChain using FilterChainBuilder
        FilterChainBuilder filterChainBuilder = FilterChainBuilder.stateless();

        //|Add TransportFilter, which is responsible for reading and writing data to the connection
        filterChainBuilder.add(new TransportFilter());

        //|Initialize and add SSLFilter
        final SSLEngineConfigurator serverConfig = initializeSSL();
        final SSLEngineConfigurator clientConfig = serverConfig.copy().setClientMode(true);

        final SSLFilter sslFilter = new SSLFilter(serverConfig, clientConfig);
        filterChainBuilder.add(sslFilter);

        //|Add StringFilter, which will be responsible for Buffer <-> String transformation
        filterChainBuilder.add(new StringFilter(Charset.forName("UTF-8")));

        //|Add Filter, which will send a greeting message and check the result
        filterChainBuilder.add(new SendMessageFilter(sslFilter));

        //|Create TCP transport
        final TCPNIOTransport transport = TCPNIOTransportBuilder.newInstance().build();

        //|Set filterchain as a Transport Processor
        transport.setProcessor(filterChainBuilder.build());

        try{
            //|Start the transport
            transport.start();
            //|Perform async. connect to the server
            transport.connect(SSLEchoServer.HOST, SSLEchoServer.PORT);
            System.out.println("Press any key to stop the client...");
            System.in.read();
        }finally{
            System.out.println("Stopping transport...");
            //|Stop the transport
            transport.stop();
            System.out.println("Stopped transport...");
        }
    }

    private static class SendMessageFilter extends BaseFilter{
        private final SSLFilter sslFilter;

        public SendMessageFilter(SSLFilter sslFilter){
            this.sslFilter = sslFilter;
        }

        @Override
        @SuppressWarnings("unchecked")
        public NextAction handleConnect(FilterChainContext ctx) throws IOException{
            final Connection connection = ctx.getConnection();

            //|Execute async SSL handshake
            sslFilter.handshake(connection, new EmptyCompletionHandler<SSLEngine>(){

                //|Once SSL handshake will be completed - send greeting message
                @Override
                public void completed(SSLEngine result){
                    //|Here we send String directly
                    connection.write(MESSAGE);
                }
            });

            return ctx.getInvokeAction();
        }

        @Override
        public NextAction handleRead(FilterChainContext ctx) throws IOException{
            //|The received message is String
            final String message = (String) ctx.getMessage();

            //|Check the message
            if(MESSAGE.equals(message)){
                System.out.println("Got echo message: \"" + message + "\"");
            }else{
                System.out.println("Got unexpected echo message: \"" + message + "\"");
            }

            return ctx.getStopAction();
        }
    }

    private static SSLEngineConfigurator initializeSSL(){
        //|Initialize SSLContext configuration
        SSLContextConfigurator sslContextConfig = new SSLContextConfigurator();

        //|Set key store
        ClassLoader cl = SSLEchoClient.class.getClassLoader();
        URL cacertsUrl = cl.getResource("ssltest-cacerts.jks");
        if(cacertsUrl != null){
            sslContextConfig.setTrustStoreFile(cacertsUrl.getFile());
            sslContextConfig.setTrustStorePass("changeit");
        }

        //|Set trust store
        URL keystoreUrl = cl.getResource("ssltest-keystore.jks");
        if(keystoreUrl != null){
            sslContextConfig.setKeyStoreFile(keystoreUrl.getFile());
            sslContextConfig.setKeyStorePass("changeit");
        }

        //|Create SSLEngine configurator
        return new SSLEngineConfigurator(sslContextConfig.createSSLContext(), false, false, false);
    }
} 
```

### 执行时：

*运行 SSLEchoServer：*

> 按任意键停止服务器...

*运行 SSLEchoClient：*

> 按任意键停止客户端...

### 问题：

这段代码应该完成或演示什么？除了您在上面看到的控制台输出之外，这段代码对我没有任何作用。

在查看代码时，我的期望是客户端应该启动其 TCP 传输并将其连接到服务器。在建立该连接的过程中，之前添加到过滤器流中的*SendMessageFilter将执行其**handleConnect()*方法，我确认该方法确实执行了。但是，此代码从不执行*connection.write(MESSAGE)*语句。

很明显，这里的意图是在握手线程完成后执行*write()*方法，但似乎没有这样做，并且在检查[grizzly-framework-2.2.19](http://www.versioneye.com/package/org~glassfish~grizzly--grizzly-framework/version/2~2~19)中 SSLFilter 类中的*handshake()*方法时，我甚至无法确定重写的父*完成（）*方法的定义位置。

 *任何人都可以提供一些见解，这种断开是否是由于我对这里的某些内容缺乏理解，或者它是否可能是 Grizzly 提供的示例实现中的错误？我相信澄清这一点将大大促进我在这里的理解。先感谢您！*

# javascript - 如何判断 CSS 转换是否即将发生？

> ID：14990475
> 
> 赞同：3
> 
> 时间：2013-02-20T21:41:39.290
> 
> 标签：javascript, css

这是我的问题。假设我将 div 高度从 10px 更改为 50px，然后想要对其大小进行一些计算。

通常我只是更改值并获取，例如它的真实高度（这可能会受到它/它的任何父填充、最大高度、很多的影响。）。

但是，当这种变化通过过渡动画时，事情会变得复杂。我可以等待`transitionEnd`事件触发，然后检查元素大小，但我怎样才能确定转换即将发生？所以不是立即检查我知道我必须等待事件的高度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:42:27.570

测试转换属性的计算样式。如果它与您正在更改的属性匹配，请等待 transitionEnd 事件。

```
if(window.getComputedStyle(element).transitionProperty.match(/\bheight\b/))
{
  //handle transitionEnd event
}
else
{
  //do calculations now
} 
```

当然，您需要检查浏览器的特定前缀。

**编辑：**我还应该说一个元素可能有几个过渡属性集。确保您进行了相应的测试（代码已更新以反映这一点）。

# python - 为什么这个函数在用作装饰器时不起作用？

> ID：14990478
> 
> 赞同：0
> 
> 时间：2013-02-20T21:41:44.547
> 
> 标签：python, multiprocessing, pickle

**更新**：正如 Fooz 先生所指出的，包装器的功能版本有一个错误，所以我恢复到原来的类实现。我已经把代码放在了 GitHub 上：

[https://github.com/nofatclips/timeout/commits/master](https://github.com/nofatclips/timeout/commits/master)

有两个提交，一个工作（使用“导入”解决方法）第二个被破坏。

问题的根源似乎是`pickle#dumps`函数，它只是在函数上调用时吐出一个标识符。当我调用`Process`时，该标识符指向函数的修饰版本，而不是原始版本。

* * *

**原始信息**：

我试图编写一个函数装饰器来将一个长任务包装在一个进程中，如果超时到期，该进程将被终止。我想出了这个（工作但不优雅）版本：

```
from multiprocessing import Process
from threading import Timer
from functools import partial
from sys import stdout

def safeExecution(function, timeout):

    thread = None

    def _break():
        #stdout.flush()
        #print (thread)
        thread.terminate()

    def start(*kw):
        timer = Timer(timeout, _break)
        timer.start()
        thread = Process(target=function, args=kw)
        ret = thread.start() # TODO: capture return value
        thread.join()
        timer.cancel()
        return ret

    return start

def settimeout(timeout):
    return partial(safeExecution, timeout=timeout)

#@settimeout(1)
def calculatePrimes(maxPrimes):
    primes = []

    for i in range(2, maxPrimes):

        prime = True
        for prime in primes:
            if (i % prime == 0):
                prime = False
                break

        if (prime):
            primes.append(i)
            print ("Found prime: %s" % i)

if __name__ == '__main__':
    print (calculatePrimes)
    a = settimeout(1)
    calculatePrime = a(calculatePrimes)
    calculatePrime(24000) 
```

如您所见，我注释掉了装饰器并将修改后的 calculatePrimes 版本分配给了 calculatePrime。如果我尝试将其重新分配给同一个变量，则在尝试调用修饰版本时会收到“无法腌制：属性查找 builtins.function 失败”错误。

有人知道引擎盖下发生了什么吗？当我将装饰版本分配给引用它的标识符时，原始函数是否会变成不同的东西？

**更新**：为了重现错误，我只是将主要部分更改为

```
if __name__ == '__main__':
    print (calculatePrimes)
    a = settimeout(1)
    calculatePrimes = a(calculatePrimes)
    calculatePrimes(24000)
    #sleep(2) 
```

产生：

> ```
> Traceback (most recent call last):
>   File "c:\Users\mm\Desktop\ING.SW\python\thread2.py", line 49, in <module>
>     calculatePrimes(24000)
>   File "c:\Users\mm\Desktop\ING.SW\python\thread2.py", line 19, in start
>     ret = thread.start()
>   File "C:\Python33\lib\multiprocessing\process.py", line 111, in start
>     self._popen = Popen(self)
>   File "C:\Python33\lib\multiprocessing\forking.py", line 241, in __init__
>     dump(process_obj, to_child, HIGHEST_PROTOCOL)
>   File "C:\Python33\lib\multiprocessing\forking.py", line 160, in dump
>     ForkingPickler(file, protocol).dump(obj)
> _pickle.PicklingError: Can't pickle <class 'function'>: attribute lookup builtin
> s.function failed
> Traceback (most recent call last):
>   File "<string>", line 1, in <module>
>   File "C:\Python33\lib\multiprocessing\forking.py", line 344, in main
>     self = load(from_parent)
> EOFError 
> ```

PS我还写了一个安全执行的类版本，它具有完全相同的行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T22:27:23.800

将函数移动到脚本导入的模块。

如果函数是在模块的顶层定义的，则函数只能在 python 中进行选择。默认情况下，在脚本中定义的那些是不可挑选的。基于模块的函数被提取为两个字符串：模块的名称和函数的名称。它们是通过动态导入模块然后按名称查找函数对象来解开的（因此限制了仅顶级函数）。

可以扩展 pickle 处理程序以支持半泛型函数和 lambda 酸洗，但这样做可能会很棘手。特别是，如果您想正确处理诸如装饰器和嵌套函数之类的事情，则可能很难重建完整的命名空间树。如果你想这样做，最好使用 Python 2.7 或更高版本或 Python 3.3 或更高版本（早期版本的调度程序中有一个错误，`cPickle`并且`pickle`很难解决）。

[有没有一种简单的方法来腌制一个 python 函数（或者序列化它的代码）？](https://stackoverflow.com/q/1253528/25050)

[Python：酸洗嵌套函数](https://stackoverflow.com/q/12019961/25050)

[http://bugs.python.org/issue7689](http://bugs.python.org/issue7689)

***编辑***：

至少在 Python 2.6 中，如果脚本只包含`if __name__`块、脚本导入`calculatePrimes`和`settimeout`从模块中导入，并且内部`start`函数的名称是猴子补丁，那么酸洗对我来说很好：

```
def safeExecution(function, timeout):
    ...    
    def start(*kw):
        ...

    start.__name__ = function.__name__ # ADD THIS LINE

    return start 
```

第二个问题与 Python 的变量作用域规则有关。`thread`对内部变量的赋值`start`会创建一个影子变量，其范围仅限于对`start`函数的一次评估。它*不会*分配给`thread`在封闭范围内找到的变量。您不能使用`global`关键字来覆盖范围，因为您想要和中间范围，Python 仅完全支持操作最本地和最全局范围，而不是任何中间范围。您可以通过将线程对象放置在中间范围内的容器中来解决此问题。就是这样：

```
def safeExecution(function, timeout):
    thread_holder = []  # MAKE IT A CONTAINER

    def _break():
        #stdout.flush()
        #print (thread)
        thread_holder[0].terminate() # REACH INTO THE CONTAINER

    def start(*kw):
        ...
        thread = Process(target=function, args=kw)
        thread_holder.append(thread) # MUTATE THE CONTAINER
        ...

    start.__name__ = function.__name__ # MAKES THE PICKLING WORK

    return start 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:28:41.483

不确定你为什么会遇到这个问题，但要回答你的标题问题：为什么装饰器不起作用？

当您将参数传递给装饰器时，您需要构建稍微不同的代码。本质上，您必须将装饰器实现为带有 an`__init__`和 an的类`__call__`。

在 init 中，您收集发送给装饰器的参数，在调用中，您将获得您装饰的函数：

```
class settimeout(object):
    def __init__(self, timeout):
        self.timeout = timeout

    def __call__(self, func):
        def wrapped_func(n):
            func(n, self.timeout)
        return wrapped_func

@settimeout(1)
def func(n, timeout):
    print "Func is called with", n, 'and', timeout

func(24000) 
```

这至少应该让你在装饰器的前面。

# angularjs - 如何销毁 angularjs 应用程序？

> ID：14990480
> 
> 赞同：30
> 
> 时间：2013-02-20T21:41:46.133
> 
> 标签：angularjs

我需要能够动态加载/卸载角度应用程序而不会导致内存泄漏。在 jQuery 中，您可以执行`$("#elementHoldingMyWidget").remove();`正确的销毁代码，事件处理程序未绑定等。

我一直无法在 Angular 文档中找到任何提到一旦启动应用程序就可能将其拆除的内容。

我的第一次尝试是像这样破坏 rootScope：

```
var rootScope = $("body").scope();   
rootScope.$destroy(); 
```

但这似乎不起作用，我不确定即使这样做了如何清理注入器和服务。

这应该怎么做？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-06-04T14:11:48.193

使用 AngularJS 1.4.0，$rootScope.$destroy() 再次工作（因为它在 1.2 中被破坏了）。使用这个允许在几个 angularJS 应用程序之间切换：

```
var appManager = new function () {
    this.currentAppName;
    this.currentApp;

    this.startApp = function (appContainerId, appName) {
        if (this.currentApp) {
            this.destroyApp(this.currentApp, this.currentAppName);
        }
        var appContainer = document.getElementById(appContainerId);
        if (appContainer) {
            this.currentAppName = appName;
            this.currentApp = angular.bootstrap(appContainer, [appName]);
        }
    }

    this.destroyApp = function (app, appName) {
        var $rootScope = app.get('$rootScope');
        $rootScope.$destroy();
    }
}

// Call this when page is ready to rebootsrap app
appManager.startApp('divContainerId', 'app'); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-02-27T10:44:12.383

要在不通过 向用户显示白页的情况下拆除我的应用程序`$('body').empty`，我首先`$delete()`是子范围，然后从以下位置删除所有属性`$rootScope`：

```
/*
 * Iterate through the child scopes and kill 'em
 * all, because Angular 1.2 won't let us $destroy()
 * the $rootScope
 */
var scope = $rootScope.$$childHead;
while (scope) {
    var nextScope = scope.$$nextSibling;
    scope.$destroy();
    scope = nextScope;
}

/*
 * Iterate the properties of the $rootScope and delete 
 * any that possibly were set by us but leave the 
 * Angular-internal properties and functions intact so we 
 * can re-use the application.
 */
for(var prop in $rootScope){
    if (($rootScope[prop]) 
        && (prop.indexOf('$$') != 0) 
        && (typeof($rootScope[prop]) === 'object')) {
            $rootScope[prop] = null;
        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T20:06:50.500

**2013 年 3 月 10 日更新：**我发现 $('body').empty(); 不会关闭应用程序。它还活着。

**原帖：**

好吧，这篇文章：[https](https://github.com/angular/angular.js/issues/1537#issuecomment-10164971) ://github.com/angular/angular.js/issues/1537#issuecomment-10164971声称没有“官方”应用程序拆除（在撰写本文时），但您可以清空保存应用程序的元素如下：

```
$('body').empty(); 
```

如果这不是您正在寻找的内容，您可以通过以下步骤来临时解决您的应用程序崩溃： [https ://github.com/angular/angular.js/issues/1537#issuecomment-10184033](https://github.com/angular/angular.js/issues/1537#issuecomment-10184033)

# c++ - 在 C++ 中访问多维数组的整行

> ID：14990486
> 
> 赞同：7
> 
> 时间：2013-02-20T21:41:58.557
> 
> 标签：c++, multidimensional-array

如何访问多维数组的一整行？例如：

```
int logic[4][9] = {
    {0,1,8,8,8,8,8,1,1},
    {1,0,1,1,8,8,8,1,1},
    {8,1,0,1,8,8,8,8,1},
    {8,1,1,0,1,1,8,8,1}
};

// I want everything in row 2\. So I try...
int temp[9] = logic[2]; 
```

我的尝试引发了错误：

> 数组初始化需要花括号

我知道我可以使用 FOR 循环检索该行，但是我很好奇是否有更明显的解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T21:45:57.750

这不是数组/指针在 C++ 中的工作方式。

该数组存储在内存中的某个位置。为了引用相同的数据，您需要一个指向数组开头的指针：

```
int* temp = logic[2]; 
```

或者，如果您需要该数组的副本，则必须分配更多空间。

静态：

```
int temp[9];
for (int i = 0; i < 9; i++) {
    temp[i] = logic[2][i];
} 
```

动态：

```
// allocate
int* temp = new int(9);
for (int i = 0; i < 9; i++) {
    temp[i] = logic[2][i];
}

// when you're done with it, deallocate
delete [] temp; 
```

或者，由于您使用的是 C++，如果您不想担心所有这些内存内容和指针，那么您应该使用`std::vector<int>`动态大小的数组和`std::array<int>`静态大小的数组。

```
#include <array>
using namespace std;

array<array<int, 9>, 4> logic = {
  {0,1,8,8,8,8,8,1,1},
  {1,0,1,1,8,8,8,1,1},
  {8,1,0,1,8,8,8,8,1},
  {8,1,1,0,1,1,8,8,1}
}};

array<int, 9> temp = logic[2]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T21:53:43.283

除了将数组衰减为指针之外，您还可以将其绑定到引用：

```
int (&temp)[9] = logic[2]; 
```

这样做的一个优点是它允许您使用它基于 C++11 范围的 for 循环：

```
for (auto t : temp) {
  // stuff
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T21:45:02.720

直接分配是行不通的。C++ 不允许这样做。充其量您可以将它们分配为指向相同的数据 - `int *temp = logic[2]`. 你需要一个 for 循环或类似下面的东西。

我相信这会奏效：

```
int temp[9];
memcpy(temp, logic[2], sizeof(temp)); 
```

但我通常建议使用`std::vector`or`std::array`代替。

# jquery - 如何将不规则大小的图像放入 jQuery UI 按钮

> ID：14990489
> 
> 赞同：0
> 
> 时间：2013-02-20T21:42:06.617
> 
> 标签：jquery, jquery-ui, jquery-ui-button

给定一个固定大小的按钮和一个未知大小的图像（但尺寸比按钮小），我如何动态地将该图形放置到按钮上？

这个[例子只处理图标大小的东西](https://stackoverflow.com/questions/3224537/change-the-icon-of-a-jquery-ui-button-with-own-image)，就像这个[例子](https://stackoverflow.com/questions/11141607/add-an-image-to-the-jquery-button)一样。

我自己的尝试最终裁剪了右下角的图像。希望得到一些健壮的东西，适用于任何主题滚轮可以吐出的东西。这是一个演示问题的现场示例：http: [//jsbin.com/iliqih/2/edit](http://jsbin.com/iliqih/2/edit)

```
<html>
<head>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css"
/>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<script>

$(document).ready( function() {
var butt = $("<div class='butt' style='width:500; height:500px' />");
$('body').append(butt);
butt.button();

var cssKey = ".ui-icon.bigIcon";
$(".butt").button("option", {
    icons: {
        primary: 'bigIcon'
    },
    text: false
});

var imgUrl = "http://www.artisancomplete.com/wp-content/uploads/2011/03/testpattern-hd-1080-480x270.png";
var imgW = 480;
var imgH = 270;
var str = "<style type='text/css'> " + cssKey + " { background-image: url(" + imgUrl + ") !important; width:" + imgW + "px; height:" + imgH + "px; margin-left:-" + (imgW/2) + "; margin-top:-" + (imgH/2) + "} </style>";
$(str).appendTo("head");
});
</script>
</head>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:36:41.373

尝试调整背景大小，看看是否有帮助：

```
var str = "<style type='text/css'> " + cssKey + " { background-image: url(" + imgUrl + ") !important; width:" + imgW + "px; height:" + imgH + "px; margin-left:-" + (imgW/2) + "; margin-top:-" + (imgH/2) + "; background-size: " + (imgW-20) + "px " + (imgH-20) + "px;} </style>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T02:40:29.063

关键是

> 背景位置：0

以下是一个更完整的示例，其中`previewW`和`previewH`是您的图像的尺寸。

```
"<style type='text/css'>" + cssKey + " {width:" + previewW + "px; height:" + previewH + "px;margin-left:" + (-previewW/2) + "px;margin-top:" + (-previewH/2) + "px;background-position:0;background-image:url(" + imgSrc + ")!important;}</style>"); 
```

# javascript - 使用插件生成器创建 Mozilla firefox 插件

> ID：14990493
> 
> 赞同：2
> 
> 时间：2013-02-20T21:42:14.653
> 
> 标签：javascript, firefox, firefox-addon, mozilla, firefox-addon-sdk

我想使用在线插件生成器创建 FF 插件来访问浏览器历史记录、缓存内容。我可以通过在构建器的“name.js”文件中直接编写javascript代码来创建这样的插件吗？或者除了“name.js”之外还需要创建任何其他文件？我是这个插件开发的新手。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T06:32:29.163

有 2 种类型的插件

扩展：JavaScript 和 XUL。你可以从[这里开始。](https://developer.mozilla.org/en-US/docs/Building_an_Extension)

插件：NPAPI，Gecko 插件 API。[您可以在此处](https://developer.mozilla.org/en-US/docs/Gecko_Plugin_API_Reference)阅读完整指南。

有一个很好的生成扩展骨架的[向导](https://addons.mozilla.org/en-US/developers/tools/builder)。

基本上，如果您使用此向导，您将需要主要了解 JavaScript。

# asp.net-mvc - Google Maps 和 ASP .NET MVC - 将地图置于标记的中心

> ID：14990495
> 
> 赞同：0
> 
> 时间：2013-02-20T21:42:19.597
> 
> 标签：asp.net-mvc, google-maps-api-3, centering

我正在使用 Google MAP 构建一个页面，该页面具有一个侧边栏，其中动态创建的 div 链接到地图中标记的位置。

我将 ASP.NET MVC 与 JQuery 和 Google Maps API v3 一起使用。

这是它的外观。

![我的页面](../Images/72d33de6c3accebe8038cb1cfc4b4dc0.png)

此页面在启动窗口中加载并动态生成。

在后台页面中，用户在输入字段中键入州或城市，在我的控制器操作中，我搜索位于该区域的所有人并返回 JSON。我得到 JSON 并用标记填充地图，然后在侧栏中制作 div 列表。

我想向那些 div 添加一个功能，当单击它们时，地图将在标记处居中。

我想出了一个我无法完成的解决方案的想法。

我添加`class="clickable"`了属性“Lat”和“Lng”，其值等于与它们相关的标记中的值，我尝试使用 JQuery 获取他们的点击事件，然后使用它的 Lat 和 Lng 设置地图中心，如下所示：

```
$(".clickable div").click(function(){
    $('map_canvas').panTo($(this).attr('lat'), $(this).attr('lng'));
} 
```

这种方法有两个问题。- 首先，我不知道如何使用 JQuery 获取地图。我找到了两种使用 like 的方法，`$('map_canvas').gMap`但没有用。尝试了我在 Stackoverflow 中找到的更多东西，但也没有用。

第二 - JQuery 不会捕获来自 DIV 的事件点击。我在 Google Chrome 控制台上测试了 JQuery 代码并且它工作但我的代码不会触发点击。我`$(".clickable div").click(function(){ alert("test"); }`在谷歌浏览器上尝试过类似的东西并且它有效，但在我的脚本中它没有。

我还尝试`addDomListener`在我的代码中添加侦听器，但也无法解决。

任何人都可以告诉我什么是这样做的好方法，而无需在单击 div 时重新创建地图。

我也不喜欢将 Lat 和 Lng 属性添加到 div 的想法，我不知道这是否适用于任何浏览器，或者它是否是好的做法。我只是没有解决方案。

这是我正在使用的代码。（我删除了一些以使其更短且更易于阅读）

```
$(document).ready(function () {

    //Google Maps API V3 - Prepares the ajaxForm options.
    var options = {
        beforeSubmit: showRequestPesquisaAdvogados,
        success: showResponsePesquisaAdvogados,
        type: 'post',
        resetForm: false
    };
    $('#form-pesquisaAdvogado').ajaxForm(options);

    //$(".clickable").click(function () { alert($(this).attr('lat')) });
});

function showRequestPesquisaAdvogados(formData, jqForm, options) {
    $("#modal-processing-background").show(); //Shows processing splash window
}

function showResponsePesquisaAdvogados(responseText, statusText, xhr, $form) {

    $("#modal-processing-background").hide(); 
    //Hide processing window

    loadSplashWindow();
    CreateMap(responseText);
    CreateSideBar(responseText);
    }
}

function CreateMap(json) {

    var mapOptions = {
        center: new google.maps.LatLng(json[0].Endereco.Lat, json[0].Endereco.Lng),
        zoom: 5,
        mapTypeId: google.maps.MapTypeId.ROADMAP
        //  marker:true
    };

    var infoWindow = new google.maps.InfoWindow();

    var map = new google.maps.Map(document.getElementById("map-result"), mapOptions);

    for (i = 0; i < json.length; i++) {
        var data = json[i]
        var myLatlng = new google.maps.LatLng(data.Endereco.Lat, data.Endereco.Lng);
        var marker = new google.maps.Marker({
            position: myLatlng,
            map: map,
            title: data.Endereco.Logradouro
        });
        (function (marker, data) {                                
            // Attaching a click event to the current marker
            google.maps.event.addListener(marker, "click", function (e) {                    
                //  Prepare the infoWindows content. 
                var contentString = //my content; 
                infoWindow.setContent(contentString);
                infoWindow.open(map, marker);
            });

            //here I tried to add the listener to the div.
            google.maps.event.addDomListener($(".clickable")[i], 'click',
            function () {
                map.panTo(new google.maps.LatLng($(this).attr('lat'),
                     $(this).attr('lng')));
            });
        })(marker, data);
    }
}

function CreateSideBar(json) {
    $(".sideBarConteiner").empty();        

    for (i = 0; i < json.length; i++) {
        var contentString = 
            "<div class='clickable' lat='" + data.Endereco.Lat + 
            "' lng='" + data.Endereco.Lng + "' >" +
            //...div's content here
            "</div>";
        $(".sideBarConteiner").append(contentString);            
    }
} 
```

如果您对使代码更好或更好的实践有任何建议，因为我只有 3 个月的编程经验，所以我可能会在不知不觉中走错方向，所以如果您认为可以，请随时更改某些内容更好的方法。

我知道我的帖子有点长，我只想说清楚。

提前感谢您的支持。

问候，

塞萨尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:17:59.550

我找到了一种方法，方法是在 javascript 中创建一个全局变量并保留地图信息以便以后再次调用它。为此，我刚刚在 .

```
<script type="text/javascript">
    $.ajaxSetup({ cache: false }); //Forces IE to renew the cash for ajax.
    var zoom = 8;
    var mapOptions, map; 
```

然后调用一个方法平移到正确的点。我将属性 Lat 和 Lng 添加到 div 中，然后在 javascript 函数中传递 div 并从中获取属性。

```
function CreateSideBar(json) {
    $(".sideBarConteiner").empty();        

    for (i = 0; i < json.length; i++) {
        var contentString = 
            "<div class='clickable' data-lat='" + data.Endereco.Lat + 
            "' data-lng='" + data.Endereco.Lng + "' onclick='MarkerFocus(this)'>" +
            //...div's content here
            "</div>";
        $(".sideBarConteiner").append(contentString);            
    }
} 
```

在我的功能中：

```
function MarkerFocus(obj) {        
var myLatlng = 
    new google.maps.LatLng($(obj).attr('data-lat'), $(obj).attr('data-lng')); 
map.panTo(myLatlng);
} 
```

它对我有用。我希望它也能帮助你。

感谢大家的帮助和支持。

塞萨尔

# c# - 如何开始使用微风.js 和 DevForce 2012？

> ID：14990496
> 
> 赞同：1
> 
> 时间：2013-02-20T21:42:25.680
> 
> 标签：c#, asp.net-mvc, breeze, devforce

当 John Papa 发布有关MVC 4 Web API 应用程序[的](http://www.johnpapa.net/hottowel/)新 SPA 模板时，我对微风.js 非常好奇。

我目前正在开发一个应用程序，它使用 DevForce 2012 作为实体数据模型，并正在寻找这个模型如何支持微风.js。

我只是想构建一个简单的 MVC 4 项目，它能够从表中获取数据。

我想这可能是控制器的样子：

```
[BreezeController]
public class TodosController : ApiController
{
    // ~/api/todos/Metadata 
    [HttpGet]
    public string Metadata()
    {
        return // that's where I surely need help,
               // because breeze.js really needs this, I think
    }

    // ~/api/todos/CustomEntities 
    [HttpGet]
    public IQueryable<CustomEntity> CustomEntities()
    {
        var manager = MyStaticContext.EntityManager;
        return new EntityQuery<CustomEntity> {EntityManager = manager};

    }
} 
```

是否真的可以使用微风.js 运行 DevForce 2012？我现在在谷歌上搜索了很长时间，但很少产生像样的搜索结果。如果没有，我很抱歉，但是文档可能缺少这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:24:06.770

使用 Breeze 重构 DevForce 的最佳方法是将现有的实体框架模型共享（或复制）到 Breeze。正如您可能在文档中看到的那样，然后您使用 Breeze EFContextProvider 包装实体框架上下文，以将其公开为 WebAPI 端点： [http ://www.breezejs.com/documentation/web-api-controller](http://www.breezejs.com/documentation/web-api-controller)

由于各种技术原因，Breeze 不直接使用 DevForce 模型，但您确实可以通过子类化 EFContextProvider ( [http://www.breezejs.com/documentation/custom-efcontextprovider](http://www.breezejs.com/documentation/custom-efcontextprovider) ) 访问等效的保存拦截器，并且可以执行查询拦截在您的子类 ApiController ( [http://www.breezejs.com/documentation/web-api-controller](http://www.breezejs.com/documentation/web-api-controller) ) 中。

另请注意，Breeze 支持 EF 的复杂类型，但尚不支持 EF 继承或没有负载的 EF 多对多映射。**编辑**：从 v1.3.1 起，Breeze 现在支持继承。

希望这可以帮助！

# c - 在 Windows 核心文件上调用 fopen 返回 NULL 指针

> ID：14990498
> 
> 赞同：2
> 
> 时间：2013-02-20T21:42:34.560
> 
> 标签：c, windows, fopen

我正在尝试通过它们的绝对路径（在其他地方以编程方式确定）打开几个不同的文件，这样我就可以获得它们的 SHA1 哈希 *，其中一些是核心 Windows 文件。当我尝试按如下方式打开文件时，fopen() 在某些（但不是全部）文件上返回 NULL（通常文件名是通过 QueryFullProcessImageName 获取的，但我对其进行了硬编码以防万一）：

```
char * filename = "c:\\windows\\system32\\spoolsv.exe";
FILE * currFileRead = fopen(filename, "rb");
if (currFileRead == NULL)
{
    printf("Failed to open %s, error %s\n", filename, strerror(errno) );
}
else
{
    //hashing code
} 
```

报告的错误是 2：“没有这样的文件或目录”，但显然它们在那里。它也只对某些进程失败，如 spoolsv.exe 或 winlogon.exe，而 svchost.exe 和 wininint.exe 似乎可以正常打开。

我的程序具有管理权限，但我不明白为什么有些进程会失败，而其他进程会毫无问题地打开？

*我正在使用来自 LibTomCrypt ( [http://libtom.org/?page=features](http://libtom.org/?page=features) ) 的方法，该方法是具有许可许可证的开源方法。对 sha1_process 的调用接受 hash_state（库内部）、无符号字符缓冲区和缓冲区长度。我需要使用 fopen 读取文件以将文件放入内存中进行散列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T01:33:00.337

因为您的程序是一个 32 位进程，所以当您尝试打开时，`c:\windows\system32`您实际上会得到`c:\windows\syswow64`其中不包含所有相同文件的文件。

您可以使用[`IsWow64Process`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684139%28v=vs.85%29.aspx)来确定您是否在 64 位系统上运行。如果是，则可以在路径中替换`system32`为`sysnative`打开实际文件，除非您需要支持 Windows 2003 或 Windows XP。根据您的情况，您可能需要处理 Windows 文件夹不`c:\windows`存在的可能性和/或存在其他名为`system32`.

总的来说，拥有单独的 32 位和 64 位版本的应用程序会更加健壮，或者可能只是出现问题的特定部分。如果您不能让用户安装适当的版本，安装程序可以决定安装哪个，或者您可以始终安装两者并让 32 位版本在 64 上运行时自动启动 64 位版本位系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:00:54.917

拥有管理权限并不总是足够的，因为如果您要打开的文件正在使用中并且正在使用它的程序已锁定它，那么您将无法打开和读取该文件。

# vba - Excel 宏 - 拍摄特定范围的快照

> ID：14990503
> 
> 赞同：2
> 
> 时间：2013-02-20T21:42:52.203
> 
> 标签：vba, excel

我在我的 Excel 仪表板中遇到了一个非常奇怪的要求。

> 我在特定工作表的 Range 中有一些数据。我需要拍摄它的快照并将其显示为顶部所有其他工作表中的图像。

我知道我可以简单地复制和粘贴范围，但是这种标题在隐藏工作表上的列时会产生一些问题。

有同样的解决方案/技巧吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-20T21:55:18.573

Range 有一个 .CopyPicture 方法。

或使用相机工具：

```
Sub Tester() 
    Sheet1.Range("D5:E16").Copy 
    Sheet2.Activate
    Sheet2.Range("A1").Select 
    ActiveSheet.Pictures.Paste Link:=True 
    Application.CutCopyMode = False 
End Sub 
```

# windows-7 - EXE在构建后被锁定

> ID：14990508
> 
> 赞同：1
> 
> 时间：2013-02-20T21:42:59.550
> 
> 标签：windows-7, visual-studio-2012

我使用的是VS2012，每次构建程序时，exe文件都会被锁定大约5分钟。我无法手动删除文件或重命名它。我正在运行没有防病毒软件的 Windows 7 64 位。这在 VS2010 中从未发生过，它只是在我升级到 VS2012 时才开始发生。有没有其他人经历过这个？这是VS中的错误，还是我的设置有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:47:13.843

当我在 2010 年和 2012 年都没有正确终止我的线程时，我遇到了这种情况。在测试运行之后，我改变了一些东西并尝试构建。

对我来说，短期修复是杀死相关进程（不是 VS，而是你的 EXE 的主机进程）。寻找我忘记正确终止线程的长期修复。

但是这个问题/答案可能与您更相关：[Visual Studio locks output file on build](https://stackoverflow.com/questions/2002273/visual-studio-locks-output-file-on-build)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T22:39:53.527

为我解决这个问题的是启用应用程序体验服务。[以下](http://www.blackviper.com/windows-services/application-experience/)是对服务功能的描述。[这](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/fcdde3bc-43a1-4ab6-b0b5-9525fe4e84c8)是来自 Microsoft 的一个线程，它讨论了这个问题。

# php - 一会儿模板系统

> ID：14990509
> 
> 赞同：-1
> 
> 时间：2013-02-20T21:43:16.103
> 
> 标签：php, mysql, mysqli, template-engine

我试图在我循环的答案下方发表评论（就像stackoverflow上的答案一样）但我不知道如何将正确的评论放在正确的答案下方。我正在使用模板系统。就我目前拥有的而言，它只显示最后一个 $row['id'] 的查询注释

PHP代码：

```
<?php
//Query setup for answers
$answerquery = "SELECT a.id, a.post_id, a.username, a.date, a.text FROM answers_tbl AS a, posts_tbl AS p WHERE a.post_id = p.id";
$result = $mysqli->query($answerquery);

//Replace answers
$layout_a = file_get_contents("tpl/question_answer_layout.html");
$search_a = array("%username%", "%date_a%", "%text_a%");
$answer_r = NULL;
while($row = $result->fetch_array()){
    $replace_a = array($row['username'], $row['date'], $row['text']);
    $answer_r .= str_replace($search_a, $replace_a, $layout_a);

    //Query setup for comments of the question
    $commentquery = "SELECT c.username, c.comment
                        FROM answer_comments_tbl AS c
                        INNER JOIN answers_tbl AS a ON a.id = c.answer_id
                        WHERE answer_id =".$row['id'];
    $result2 = $mysqli->query($commentquery);

    //Replace comments
    $layout_c = file_get_contents("tpl/question_comment_layout.html");
    $search_c = array("%comment_c%", "%username_c%");
    $answer_c = NULL;
    while($row2 = $result2->fetch_assoc()){
        $replace_c = array($row2['comment'], $row2['username']);
        $answer_c = str_replace($search_c, $replace_c, $layout_c);
        $answer_r = str_replace("%answer_comment%", $answer_c, $answer_r);
    }
}

$template = str_replace("%answer_post%", $answer_r, $template);
?> 
```

question_answer_layout.html：

```
<div id="AnswerCarTop">

</div><!--Question-->

<div id="QuestionBottom">

<div id="QuestionTitle">%username%</div><!--QuestionTitle-->

<div id="Paragraph">%text_a%</div><!--Paragraph-->

%answer_comment% 
```

question_comment_layout.html：

```
<div id="CommentPlaced">
  <div id="Paragraph1">%comment% - <span class="bold">%username%</span></div>
<!--Paragraph--></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:13:38.337

您的代码存在一些问题，使其无法正常工作。

首先，检索评论的查询需要在您正在使用的两个表之间进行连接，否则它将执行两个表的笛卡尔积（每个答案都连接到每个评论，然后按位置过滤）。您应该将其重写为：

```
SELECT c.username, c.comment
FROM answer_comments_tbl AS c
INNER JOIN answers_tbl AS a ON a.id = c.answer_id
WHERE answer_id = $row['id'] 
```

当然，使用准备好的语句完全是另一回事。

第二个问题是您进行替换的顺序。基本结构（伪代码）应该是：

```
for each answer {
   for each comment {
       comment = apply the comment template
       comments_string += comment
   }
   apply the posts template, using the previously calculated comments_string
} 
```

第三个问题是对每个答案执行单独查询的一般方法。您可以只用 2 个查询（甚至一个查询，但这是一个更微妙的问题，肯定会在它自己的讨论中产生）来解决这个问题。更好的方法是获取帖子的所有答案，然后获取与该帖子相关的所有评论。之后，您可以将评论分组以了解每个评论的来源。

这是完全编辑的代码。我没有添加准备好的语句，因为它超出了这个答案的范围，但你绝对应该使用它们。

```
<?php
//Query setup for answers
$answerquery = "
    SELECT a.id, a.post_id, a.username, a.date, a.text
    FROM answers_tbl AS a
    INNER JOIN posts_tbl AS p ON a.post_id = p.id
    WHERE p.id = " . (int) $post_id;
$answerResult = $mysqli->query( $answerquery );

// Query setup for comments
$commentsQuery = "
    SELECT c.username, c.comment, c.answer_id
    FROM answer_comments_tbl AS c
    INNER JOIN answers_tbl AS a ON a.id = c.answer_id
    WHERE a.post_id = " . (int) $post_id;
$commentsResult = $mysqli->query( $commentsQuery );

// Group the comments by answer
$groupedComments = array();
while( $row = $mysqli->fetch_assoc( $commentsResult ) ) {
    if( ! isset( $groupedComments[ $row['answer_id'] ] ) ) {
        $groupedComments[ $row['answer_id'] ] = array();
    }
    $groupedComments[ $row['answer_id'] ][] = $row;
}

// Loading the template files only once
$layout_a = file_get_contents( 'tpl/question_answer_layout.html' );
$search_a = array( '%username%', '%date_a%', '%text_a%');

$layout_c = file_get_contents( 'tpl/question_comment_layout.html' );
$search_c = array( '%comment%', '%username%');

// This will hold the string with all the answers and their comments
$answers = null;
while( $row = $answerResult->fetch_assoc() ) {
    // This will hold all the comments for the current answer
    $answer_comment = null;
    foreach( $groupedComments[ $row['id'] ] as $comment ) {
        // Apply the comment layout
        $replace_c = array( $comment['comment'], $comment['username'] );
        $answer_comment .= str_replace( $search_c, $replace_c, $layout_c );
    }

    // Apply the answer layout
    $replace_a = array( $row['username'], $row['date'], $row['text'], $answer_comment );
    $answers .= str_replace( $search_a, $replace_a, $layout_a );
}

// Add all the answers and the comments to the main template
$template = str_replace( '%answer_post%', $answers, $template ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:25:34.663

这对我有用并解决了我的问题：

```
<?php
//Query setup for answers
$answerquery = "SELECT a.id, a.post_id, a.username, a.date, a.text FROM answers_tbl AS a, posts_tbl AS p WHERE a.post_id = p.id";
$result = $mysqli->query($answerquery);

//Replace answers
$layout_a = file_get_contents("tpl/question_answer_layout.html");
$search_a = array("%username%", "%date_a%", "%text_a%");
$answer_r = NULL;
while($row = $result->fetch_array()){
    $replace_a = array($row['username'], $row['date'], $row['text']);
    $answer_r .= str_replace($search_a, $replace_a, $layout_a);

    //Query setup for comments of the question
    $commentquery = "SELECT c.username, c.comment
                        FROM answer_comments_tbl AS c
                        INNER JOIN answers_tbl AS a ON a.id = c.answer_id
                        WHERE answer_id =".$row['id'];
    $result2 = $mysqli->query($commentquery);

    //Replace comments
    $layout_c = file_get_contents("tpl/question_comment_layout.html");
    $search_c = array("%comment%", "%username%");
    $answer_c = NULL;
    while($row2 = $result2->fetch_assoc()){
        $replace_c = array($row2['comment'], $row2['username']);
        $answer_c .= str_replace($search_c, $replace_c, $layout_c);
    }
        $answer_r = str_replace("%answer_comment%", $answer_c, $answer_r);
}

$template = str_replace("%answer_post%", $answer_r, $template);
?> 
```

# javascript - jqgrid - xmlstring - 如何替换/刷新单行？

> ID：14990511
> 
> 赞同：0
> 
> 时间：2013-02-20T21:43:20.837
> 
> 标签：javascript, jqgrid, grid

我有一个 jqgrid，它从 DOM 加载了一个 xmlstring。（只需要支持IE）。

在应用程序中，当用户执行某些操作时，一行数据被更改，并且 xml 响应或字符串可用。这个网格行需要用这个新的 xmlstring/response 更新。

出于性能原因，我不想重新加载整个网格。我不能轻易地预处理返回的 xml，因为这将涉及复杂的解析。理想情况下，我想使用网格的列模型和 jqgrid 的自定义格式化程序。

我尝试使用 addXMLData() 但这会替换整个网格。addXMLData() 需要一个数据对象，这意味着我将预处理 xml 响应。

处理这个问题的好方法是什么。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:50:57.603

尝试 setRowData 方法

jQuery("#your_grid_id").jqGrid('setRowData',rowid,modifiedRowdata);

[阅读更多](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3amethods)

# bash - bash 自动处理文件

> ID：14990520
> 
> 赞同：0
> 
> 时间：2013-02-20T21:43:45.340
> 
> 标签：bash, automation

我需要将一个大的排序文件分成更小的块，每个文件都包含一个排序的人名列表。现在我要保证同名的人不会出现在两个文件中，例如，

```
File1:
.
.
James
James
Kobe

File2:
Kobe
Nash
Nash
.
. 
```

我需要做到

```
File1:
.
.
James
James
Kobe
Kobe

File2:
Nash
Nash
.
. 
```

以前我使用 sed 手动执行此操作。现在我想编写一个 bash 脚本来自动执行此操作，但不熟悉 bash .. 有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:06:19.567

您需要将“当前”文件的最后一行与“下一个”文件的第一行进行比较。我假设您的文件名为“File1，File2，... FileN”。这是未经测试的。

```
n=1
while true; do
    current=File$n
    next=File$((++n)) 
    if [[ ! -f $next ]]; then
        break
    fi
    last=$(tail -1 "$current")
    first=$(head -1 "$next")
    while [[ $last == $first ]]; do
        echo "$last" >> "$current"    # append the name to the end of the current
        sed -i 1d "$next"             # remove the first line of the next file
        first=$(head -1 "$next")
    done
done 
```

这可能有点慢，因为您可能会反复从下一个文件中删除一行。这可能会更快一些：再次，未经测试。

```
n=1
while true; do
    current=File$n
    next=File$((++n)) 
    if [[ ! -f $next ]]; then
        break
    fi
    last=$(tail -1 "$current")
    first=$(head -1 "$next")
    num=$(awk -v line="$last" -v N=0 '$0 == line {N++; next} {print N; exit}' "$next")
    if (( num > 0 )); then
        for (( i=1; i<=num; i++ )); do
            echo "$last" >> "$current"
        done
        sed -i "1,$Nd" "$next"
    fi
done 
```

# java - 使用 java.text.DateFormat 格式化日期

> ID：14990522
> 
> 赞同：2
> 
> 时间：2013-02-20T21:43:51.437
> 
> 标签：java, android, date-format

我不想承认这一点，但我无法理解基本的日期格式。我知道我只是想多了，但我看到的文档完全想念我。例如，我要做的只是显示格式为*“2013 年 2 月 20 日，星期三”*的当前日期。到目前为止，我所拥有的是：

```
TextView textView = (TextView) findViewById(R.id.currentDate);
String now = DateFormat.getDateInstance().format(new Date());
textView.setText(now); 
```

这会产生类似*"2013-2-20"*的东西，这是很好的第一步，但不是我想要的。在查看文档时我很困惑，因为[`DateFormat`](http://developer.android.com/reference/java/text/DateFormat.html)文档都说使用整数来表示`SHORT`、`MEDIUM`、`LONG`或`DEFAULT`. 什么？确切地说，我会把这个论点放在哪里？以及如何 / 哪个整数表示`SHORT`vs `LONG`？这些都没有任何意义，我觉得自己像个彻头彻尾的白痴，因为我知道这很明显。我是从多年使用 PHP 的日期格式开始的，我确信我的旧习惯完全阻止了我看到它的简单性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T21:48:02.517

您可以将属性（SHORT、LONG 等）放在`DateFormat.getDateInstance();`这样的内部：

`DateFormat df = DateFormat.getDateInstance(DateFormat.LONG, Locale.FRANCE);`

SHORT 完全是数字，例如 12.13.52 或 3:30pm

MEDIUM 较长，如 1952 年 1 月 12 日

LONG 更长，例如 1952 年 1 月 12 日或下午 3:30:32

FULL 非常完整，例如 1952 年 4 月 12 日星期二或太平洋标准时间下午 3:30:42。

可以在[此处](http://developer.android.com/reference/java/text/DateFormat.html)找到此信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T22:08:22.350

如果您习惯于传统语言，那么您缺少的关键概念是 Java 中的日期/时间处理被严重破坏。不只是一次，而是两次，在破碎的两个不同的化身中。加上一些事后创可贴助手类，例如 DateUtils。您需要接受的关键见解是：与 Java 中的日期和时间无关是非常简单的。

尝试改用 SimpleDateFormat。不，它实际上并不简单。但是默认设置会产生一个可行的本地化日期/时间（如果不是一个漂亮的日期/时间）。

```
 DateFormat format = SimpleDateFormat.getDateTimeInstance(), 
```

while 产生：“Dec 31, 1969 4:00:00 PM”（或本地化等效项）。

# c# - MVC4 操作中的反序列化对象导致空值

> ID：14990533
> 
> 赞同：7
> 
> 时间：2013-02-20T21:44:57.110
> 
> 标签：c#, jquery, json, asp.net-mvc-4

我正在使用 jQuery 1.9.1 和 MVC 4。

我有以下 javascript：

```
$.ajax({
    url: '/Home/doSomething',
    type: 'POST',
    data: JSON.stringify({ devices: [{ Id: 123, Name: "something", MapName: "map" },{ Id: 321, Name: "a name", MapName: "another map" }] }),
    dataType: 'json',
    contentType: 'application/json'
} 
```

以及我的 HomeController 中的以下 c#：

```
[HttpPost]
public string doSomething( Device[ ] devices )
{
    //stuff consuming that array
} 
```

Device 类的定义如下：

```
[Serializable]
public class Device
{
    public long Id;
    public string Name;
    public string MapName;
} 
```

根据调试器，设备数组是一个 2 元素数组，每个设备元素的所有属性都为空。

根据chrome，post数据是这样的：

```
{
    "devices": [
        {
            "Id": 123,
            "Name": "something",
            "MapName": "map"
        },
        {
            "Id": 321,
            "Name": "a name",
            "MapName": "another map"
        }
    ]
} 
```

这里有什么问题让 MVC 上下发誓这些对象是空的，但仍然给我一个适当长度的数组？

我试过直接发布数组，而不是调用 JSON.stringify 。我已经尝试将数组作为一个名为“设备”的属性发布在一个对象内，但又没有对其进行区分。我已经尝试将数组作为一个名为“设备”的属性发布在一个对象中，同时只对数组本身进行字符串化。

所有这些都会导致一种或另一种形式的不良行为。要么 chrome 没有首先发布适当的数据，要么 MVC 没有反序列化它。

我已经在网上搜索过，似乎找不到任何应该破坏它的例子。

**编辑 2013-02-21 13:12 UTC-5：**

我也尝试过不使用 JSON 并让 jQuery 将其作为表单数据发布。这是代码：

```
var postData = { devices: [{ Id: 123, Name: "something", MapName: "map" }, { Id: 321, Name: "a name", MapName: "another map" }] };
$.ajax({
    url: '/Home/doSomething',
    type: 'POST',
    data: postData
}); 
```

C# 还是和上面一样。

不过，该行为仍然与使用 JSON 时相同。MVC 看到一个包含 2 个元素的数组，但该数组中对象的所有值都是默认值（整数为 0，字符串为 null）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T16:20:03.930

这就是最终奏效的...

首先，我更改了 javascript 以使用包含字符串化数组的名为“devices”的属性创建对象：

```
var postData = { devices: JSON.stringify([{ Id: 123, Name: "something", MapName: "map" }, { Id: 321, Name: "a name", MapName: "another map" }]) };
$.ajax({
    url: '/Home/doSomething',
    type: 'POST',
    dataType: 'json',
    data: postData
    } 
```

然后我让控制器操作采用一个名为“devices”的字符串，并使用 JSON.Net 手动反序列化它：

```
[HttpPost]
public string MakeMmLinks( string devices )
{
    List<Device> devicesList = JsonConvert.DeserializeObject<List<Device>>( devices );
    ...
} 
```

这很好用，但困扰我的是对象反序列化应该是 MVC 原生处理的东西。

如果有人对这里发生的事情或我做错了什么有任何见解，我很想听听。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T22:46:48.477

在这种情况下，我发现这`tradition: true`是非常重要的。不确定你需要字符串化

```
dataType: 'json',
traditional: true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T21:50:54.247

您正在发布一个具有包含 2 个设备数组的属性的**对象。**如果您只想发布设备阵列，请尝试以下操作。

```
var devices = [{ Id: 123, Name: "something", MapName: "map" }, { Id: 321, Name: "a name", MapName: "another map" }];
$.ajax({
    url: '/Home/doSomething',
    type: 'POST',
    data: JSON.stringify(devices),
    dataType: 'json',
    contentType: 'application/json'
}); 
```

# android - 安卓颜色选择器

> ID：14990535
> 
> 赞同：0
> 
> 时间：2013-02-20T21:45:03.190
> 
> 标签：android, color-picker

我正在寻找一种让我的用户选择图像颜色的方法。我已经编写了代码来将图像更改为我硬编码为选项的颜色，但是如果我的用户对我预先选择的选择不满意，我希望他们能够选择任何颜色。

我知道我以前在应用程序中看到过颜色选择器，但似乎 Android SDK 中没有内置颜色选择器，或者我错过了它。有人可以指出我正确的方向以获得可用于我的应用程序的颜色选择器吗？

# azure - Azure 自签名证书

> ID：14990538
> 
> 赞同：0
> 
> 时间：2013-02-20T21:45:05.960
> 
> 标签：azure, x509certificate, self-signed

“我可以”和“如何”在我的云服务的暂存部署中使用自签名证书吗？

是否需要特殊配置？我检查了几个教程，但他们只提到 https ......而且我不使用 HTTPS ......我想以编程方式加载自签名证书......

我确实可以加载证书...但我收到黄屏提示“X.509 证书 CN=mysite.com 不在受信任的人员存储中。”...我如何使用自签名证书？！？！

我正在以这种方式加载证书：
`X509Store store = new X509Store(StoreName.My, StoreLocation.CurrentUser);
store.Open(OpenFlags.ReadOnly | OpenFlags.OpenExistingOnly);
cert = store.Certificates.Find(X509FindType.FindByThumbprint, thumb, false);`

编辑：证书是为了使 WS-Federation 身份验证成为可能......

# jquery - Rails 上的 AJAX 对我不起作用

> ID：14990543
> 
> 赞同：0
> 
> 时间：2013-02-20T21:45:13.947
> 
> 标签：jquery, ruby-on-rails, ajax

所以我有@line_items，属于@cart。我想在不刷新页面的情况下清空我的购物车。我在购物车模板中设置了 button_to

```
<%= button_to 'Empty cart' , cart, :remote => true, :method => :delete,
:confirm => 'Are you sure?' %> 
```

carts_controller 中的销毁方法

```
def destroy
  @cart = current_cart
  @cart.line_items.destroy
  session[:cart_id] = nil
  respond_to do |format|
    format.html { redirect_to(store_url, :notice => 'Your cart is currently empty' ) }
    format.js
    format.xml { head :ok }
  end
end 
```

和destroy.js.erb

```
$('#cart').html("<%= escape_javascript(render(@cart)) %>"); 
```

仅在刷新后有效。我想，当按下按钮时，购物车被清空，所以当 rails 呈现 @cart 时，它应该显示为空。也许我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:50:52.437

在调用销毁操作后，@cart 对象可能为零（如果您通过 session[:cart_id] 获取 current_cart），因此您的 JS 部分无法正确呈现它。无论如何，您应该真正检查您的 development.log 以了解那里真正发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:27:50.763

好的，我找到了两种解决问题的方法

1）我认为更好，添加 :dependent => :destroy

```
has_many: line_items, :dependent => :destroy 
```

到 cart.rb 模型

2) 在销毁方法中调用 Cart.new 的方式

# api - 如何在 Node.js 中最好地创建 RESTful API

> ID：14990544
> 
> 赞同：45
> 
> 时间：2013-02-20T21:45:17.120
> 
> 标签：api, node.js, mongodb, architecture, express

我是 Node 的初学者（通常是所有后端 Web 开发），并且我已经开始在 Node.js 中编写一个 RESTful API。我正在努力解决一些问题。

我的应用程序使用 Express 和 Mongoose，并且我正在使用该`express-resource`模块轻松地为 API 资源创建我的 CRUD 路由。但是有几件事我不满意，我认为我可以做得更好。

第一个是猫鼬。如果我想为我的 API 编写测试，我无法通过存根 Mongoose 来强制它存储在内存数据中。然而，那里的所有教程似乎都指向猫鼬，我真的不确定我应该使用什么。

其次，我的资源似乎有很多样板代码。这真的是在 Node.js 中创建 RESTful API 的最佳方式吗？是否有其他模块可以帮助我创建我的 CRUD 路线？我相信有一些方法可以直接从您的架构创建 CRUD 路由，而无需更多代码，但我真的不确定如何。

我已经看到了诸如 Tower.js 和 CompoundJS（以前称为 RailwayJS）之类的项目，它们似乎是这些综合解决方案，解决的问题远不止我在这里的问题。也许我应该使用它们，但我真的只希望 Node.js 应用程序成为一个 API，仅此而已。我正在独立于 API 处理前端。

为了提供一些背景信息，这是我目前的情况。目前，我在 Mongoose 中定义了一个模型：

```
var mongoose = require('mongoose')
  , Schema = mongoose.Schema
  , Link

var LinkSchema = new Schema({
  uri: String,
  meta: {
    title: String,
    desc: String
  },
  shares: [{
    uid: Schema.Types.ObjectId,
    date: Date,
    message: String
  }]
})

Link = module.exports = mongoose.model('Link') 
```

接下来，我为 CRUD 路由定义控制器：

```
var mongoose = require('mongoose')
  , _ = require('underscore')
  , Link = mongoose.model('Link')

exports.load = function (req, id, fn) {
  Link.findById(req.params.link, function (err, link) {
    if (err) {
      return res.send(err)
    }

    fn(null, link)
  })
}

exports.index = function (req, res) {
  var filterByUser = req.query.user ? { 'shares.uid': req.query.user } : {}

  Link.find(filterByUser, function (err, links) {
    if (err) {
      return res.send(err)
    }

    res.send(links)
  })
}

exports.create = function (req, res) {
  var link = new Link(req.body)

  link.save(function (err) {
    if (err) {
      // TODO: send 404
      return res.send(err)
    }

    res.send(link)
  })
}

exports.show = function (req, res) {
  res.send(req.link)
}

exports.update = function (req, res) {
  req.link = _(req.link).extend(req.body)

  req.link.save(function (err, link) {
    if (err) {
      return res.send(err)
    }

    res.send(link)
  })
}

exports.patch = exports.update

exports.destroy = function (req, res) {
  req.link.remove(function (err) {
    if (err) {
      return res.send(err)
    }

    res.send()
  })
} 
```

最后，我使用该`express-resource`模块将这些控制器映射到 Express 应用程序顶部的必要 CRUD 路由。

```
app.resource('api/links', require('../resources/links')) 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-20T23:02:29.040

你应该看看[restify](http://mcavage.github.com/node-restify/)

如果你想使用 express，你也可以看看我做的这个项目——叫做[node-restful](https://github.com/baugarten/node-restful)。

这个库似乎更加成熟并且具有更多功能：[https ://github.com/jspears/mers](https://github.com/jspears/mers)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-07T20:33:35.873

[Strongloop Loopback](http://strongloop.com/node-js/loopback/)似乎是生成 Node/MongoDB API 的另一个不错的选择。它也可以生成[mocha 测试](https://github.com/strongloop/loopback-testing)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-06T11:26:37.900

看看[Hapi](http://hapijs.com/) ，它是一个以配置为中心的框架，用于构建 Web 应用程序和用作 restful 服务的 API。

其他选项是[sails.js](http://sailsjs.org/)和[actionhero](http://www.actionherojs.com/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-01-29T10:54:34.490

[Strapi](http://strapi.io/)是一个新的（2015 年）框架。

他们网站上的管理界面允许您创建 API 并指定模型之间的关系。（可以在他们的介绍视频中看到。）

然而，它被设计为在 Koa 服务器上运行，而不是在 Express 上运行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-20T20:12:02.453

我推荐 Baucis + Express。成千上万的用户，基于 Mongoose 的模型驱动设计，非常灵活，符合规范，支持 HATEOAS/Level 3。完美满足我的所有需求。但是，我是作者 :) [https://github.com/wprl/baucis](https://github.com/wprl/baucis)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-12-25T02:06:34.713

这是当今有关框架的问题。

当你从谷歌搜索“最佳”、“最快”框架等等时，人们会说“嘿，你应该试试这个sails.js、feathers、Derby 等等……”

好的问题是： - 你只是为了玩这些框架 - 如果是的话，你可以很容易地得到一个框架列表，然后开始对它们进行基准测试。

*   我假设大多数人是“我想做一个产品，建一个网站将来可以赚钱，或者至少它会变得流行”；

好吧，你这里搜索的关键词和注意力都是错误的，尝试搜索“production ready”、“enterprise ready”、“case study”这些关键词，或者去indeed.com搜索node.js，进一步挖掘出什么大多数公司使用的 node.js 框架，答案可能只是简单地说“express”。

如果是这样，从 node.js 堆栈中，框架将几乎缩小其中一些：Hapi、Strongloop，甚至是雅虎不流行的 Mojito

对于那些框架，至少你可以说 - “它们真的是生产或企业就绪的” - 因为他们一直在使用沃尔玛、雅虎、其他大巨头的形式，有些甚至几年了。

这可以解释为什么 Ruby on rails 和 Django 仍然主导着全栈框架市场吗？即使你看到许多“酷”的框架不断涌入市场，Meteor、Sails.js、Go 的 Revel、Java 的 Play Spark，随便你怎么称呼——这并不意味着这些框架比这两个框架更差，只是意味着它们需要时间赢得市场。

当前许多框架的另一个问题是“Ror”的一种一体式克隆；从最终用户的角度来看，他们只需要一个东西来帮助他们完成工作，需要高效，需要从头到尾工作的东西，比如 Ruby on Rails，MacOS，windows，就像任何经过测试的东西本身到那时，已经被人们日常使用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-12-24T01:57:35.377

看一下这个： [![在此处输入图像描述](../Images/0c787d328ebe5a152b52516a74af63eb.png)](https://i.stack.imgur.com/3bcS1.png)

> 使用 Feathers，您可以在几分钟内构建原型，并在几天内构建生产就绪的实时后端和 REST API。严重地。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-22T19:25:37.690

我一直在使用 Express 在 Node.js 上构建我的 RESTful API，并且在 Express 4 中添加了路由器，它甚至更容易构建它。这里有详细说明[http://www.codekitchen.ca/guide-to-structuring-and-building-a-restful-api-using-express-4/](http://www.codekitchen.ca/guide-to-structuring-and-building-a-restful-api-using-express-4/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-05T01:33:18.150

我很惊讶没有人提到[Nodal](http://www.nodaljs.com/)。

从网站：

> Nodal 是 Node.js 的 Web 服务器，针对快速高效地构建 API 服务进行了优化。
> 
> Nodal 拥有自己的固执、明确、惯用和高度可扩展的框架，为您和您的团队处理所有艰难的决定。这使您可以专注于在短时间内创建有效的产品，同时最大限度地减少技术债务

它得到积极维护，在 Github 上有 3800+ 颗星（在撰写本文时），内置了一个命令行工具来生成样板代码，并且总体上可以快速完成工作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-06-07T08:44:15.380

**这是在图书馆系统中执行 CRUD 操作的示例**

```
var schema=require('../dbSchema');
var bookmodel=schema.model('book');

exports.getBooks = function (req,res) {
    bookmodel.find().exec().then((data)=>{
        res.send(data)
    }).catch((err)=>{
        console.log(err);
    });
};

exports.getBook = function (req,res) {
var bkName=req.params.Author;
bookmodel.find({Name:bkName}).exec().then((data)=>{
    res.send(data)
}).catch((err)=>{
    console.log(err);
});
};

exports.getAutBooks = function (req,res) {
    bookmodel.find({},'Author').then((data)=>{
        res.send(data);
    }).catch((err)=>{
    console.log(err);
    });
};

exports.deleteBooks=function(req,res){
    var bkName=req.params.name;
    bookmodel.remove({Name:bkName}).exec().then((data)=>{
        res.status(200);
        console.log(bkName);
    }).catch((err)=>{
        console.log(err);
    });
    };

exports.addBooks=function(req,res){
    var newBook=new bookmodel({
        Name:req.body.Name,
       ISBN:req.body.ISBN,
       Author:req.body.Author,
       Price:req.body.Price,
       Year:req.body.Year,
       Publisher:req.body.Publisher
    });
    newBook.save().then(()=>{
        res.status(201);
    }).catch((err)=>{
        console.log(err);
    });
}; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-06-10T06:40:46.373

看看这个[链接](https://github.com/rahpal/RestOnNode)

该项目是使用相同的项目架构构建的，随后是 ASP.Net WebApi 2.0。这意味着它将拥有控制器、身份验证机制等。您需要做的就是创建自己的控制器。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-06-24T09:47:32.827

我是 express 的忠实粉丝，我一直在使用它在 Node.js 上构建更容易构建的 RESTful API。然而，当我们的应用程序开始增长时，我们最终遇到了一种情况，即 express 结构不能很好地扩展，并且随着更多的代码拆分，我们更难以维护。

我来自大量使用 SOLID 原则的 C#/Java 背景。类似的框架`Java Spring / C# WebAPI`已被证明可以创建企业级应用程序。我想有一个框架，我可以重用我现有的 C#/Java 技能 ( `reuse I mean MVC architecture, OOPS, SOLID, DI, Mocks ... yeah, strong typing`)。不幸的是，我没有找到符合我要求的框架（`It should have less learning curve, minimalist codebase size, completely express compatible`）。

我说的*完全兼容是什么意思？*无论 express 做什么，即使我在其上使用框架，我也必须能够做到，当我研究[Strongloop Loopback](http://loopback.io/)时，它使用起来非常好，但是它有很多文档要通过并且框架是耦合的，不是我想要的。

所以我创建了由 Typescript ( [)](https://www.npmjs.com/package/dinoloop)`has interfaces, classes, abstract classes and strong oops`驱动的 Dinoloop 。这个包现在很稳定。

使用 Dinoloop，您可以在可扩展的架构中构建企业级应用程序。它使用依赖注入框架，但您可以配置 typescript 中可用的任何 DI 框架。Dinoloop 使 typescript 可以用作 Nodejs REST 框架，它帮助我为项目`angular`和`node`项目维护通用的 typescript 代码库。

因此，Dinoloop 非常适合打字稿爱好者和 Angular 开发人员。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-12-15T14:41:26.150

尝试[https://hivepod.io/](https://hivepod.io/)并在完整的 MEAN 堆栈中生成您的示例。Hivepod 构建在 BaucisJS + ExpressJS + MongoDB + AngularJS 之上。

免责声明：我致力于构建 Hivepod。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2018-06-08T02:01:01.213

```
 var mongoose        = require('../DBSchema/SchemaMapper');
    var UserSchema      = mongoose.model('User');

    var UserController = function(){
        this.insert = (data) => {
            return new Promise((resolve, reject) => {
                var user = new UserSchema({
                    userName: data.userName,
                    password: data.password
                });
                user.save().then(() => {
                    resolve({status: 200, message: "Added new user"});
                }).catch(err => {
                    reject({status: 500, message: "Error:- "+err});
                })
            })

        }

        this.update = (id, data) => {
            return new Promise((resolve, reject) => {
                UserSchema.update({_id: id}, data).then(() => {
                    resolve({status: 200, message: "update user"});
                }).catch(err => {
                    reject({status: 500, message: "Error:- " + err});
                })
            })
        }

        this.searchAll = () => {
            return new Promise((resolve, reject) => {
                UserSchema.find().exec().then((data) => {
                    resolve({status: 200, data: data});
                }).catch(err => {
                    reject({status: 500, message: "Error:- " + err});
                })
            })
        }

        this.search = (id) => {
            return new Promise((resolve, reject) => {
                UserSchema.find({_id:id}).exec().then(user => {
                    resolve({status: 200, data: user});
                }).catch(err => {
                    reject({status: 500, message: "Error:- " + err});
                })
            })
        }

        this.delete = (id) => {
            return new Promise((resolve, reject) => {
                UserSchema.remove({_id:id}).then(() => {
                    resolve({status: 200, message: "remove user"});
                }).catch(err => {
                    reject({status: 500, message:"Error:- " + err});
                })
            })
        }
    }

    module.exports = new UserController();

    ///Route
    var express     = require('express');
    var router      = express.Router();
    var Controller  = require('./User.Controller');

    router.post('/', (req, res) => {
        Controller.insert(req.body).then(data => {
            res.status(data.status).send({message: data.message});
        }).catch(err => {
            res.status(err.status).send({message: err.message});
        })
    });

    router.put('/:id', (req, res) => {
        Controller.update(req.params.id, req.body).then(data => {
            res.status(data.status).send({message: data.message});
        }).catch(err => {
            res.status(err.status).send({message: err.message});
        })
    });

    router.get('/', (req, res) => {
        Controller.searchAll().then(data => {
            res.status(data.status).send({data: data.data});
        }).catch(err => {
            res.status(err.status).send({message: err.message});
        });
    });

    router.get('/:id', (req, res) => {
        Controller.search(req.params.id).then(data => {
            res.status(data.status).send({data: data.data});
        }).catch(err => {
            res.status(err.status).send({message: err.message});
        });
    });

    router.delete('/:id', (req, res) => {
        Controller.delete(req.params.id).then(data => {
            res.status(data.status).send({message: data.message});
        }).catch(err => {
            res.status(err.status).send({message: err.message});
        })
    })

    module.exports = router;

//db`enter code here`schema

var mongoose = require('mongoose');
const Schema = mongoose.Schema;

var Supplier =new Schema({

    itemId:{
        type:String,
        required:true
    },
    brand:{
        type:String,
        required:true
    },
    pno:{
        type:String,
        required:true
    },   
    email:{
        type:String,
        required:true
    }    

});

mongoose.model('Inventory',Inventory);
mongoose.model('Supplier',Supplier);

mongoose.connect('mongodb://127.0.0.1:27017/LAB', function (err) {
    if (err) {
        console.log(err);
        process.exit(-1);
    }
    console.log("Connected to the db");
});
module.exports = mongoose; 
```

# android - 我们如何获得 Activity 的主题？

> ID：14990545
> 
> 赞同：12
> 
> 时间：2013-02-20T21:45:20.817
> 
> 标签：android, android-activity, themes

我正在尝试检测用于活动的主题，但到目前为止我只能为整个应用程序找到它？有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-07-11T08:06:35.373

只需在您的活动中调用方法 getTheme()。例如。

```
public class MainActivity extends PreferenceActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Theme theme = this.getTheme();
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-20T21:52:05.920

我的第一个想法是[ContextThemeWrapper.getTheme()](http://developer.android.com/reference/android/view/ContextThemeWrapper.html#getTheme%28%29)，因为`Activity`extends`ContextThemeWrapper`

# java - 为什么这种计算二叉树大小的方法不起作用？

> ID：14990550
> 
> 赞同：1
> 
> 时间：2013-02-20T21:45:51.827
> 
> 标签：java, size, binary-tree

好的，这些二叉树现在让我发疯了。我做了一个方法来获取树中的节点数，但结果不正确。总是缺少一个节点。有任何想法吗？帮助将不胜感激，因为我不想成为一个讨厌树的人:)

```
public int size() {
    if (this == null) {
        return 0;
    } else {
        return 1 + (right != null ? right.size() : 0) 
                + (left != null ? left.size() : 0);
    }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:50:55.637

首先， if(this==null) 完全没用，可以在调用 this 方法时完全删除，因此它不为空。那么，您能否提供一些输入和输出数据以及预期的结果？我们只能在这里做出假设，代码看起来是合法的。

# wcf - WCF服务消费，完全没有响应

> ID：14990552
> 
> 赞同：0
> 
> 时间：2013-02-20T21:45:59.823
> 
> 标签：wcf, proxy

抱歉又打扰各位了。

我将在服务器上使用 WCF 服务。该服务是由外部创建的。如果我在浏览器中查看它，那很好。请看下图。

![服务。](../Images/b8c60f66b4c36321b45aed6c398927db.png)

为了使用它，我添加了服务引用。使用 url`http://wsvc01/BOERPI/BOERPI.svc` 然后我通过代码实例化代理。

```
BOERPI.PostPhoneCallResponse client = null;
client = new BOERPI.PostPhoneCallResponse();
double x = client.ActualCallCharge; // suppose to get a proper value but not 
```

该服务的一些代码是：

```
[ServiceContract]
public interface iBOERPI
{
    [OperationContract]
    PostPhoneCallResponse PostPhoneCall(PostPhoneCallRequest objCDRRequest);
[DataContract]
public class PostPhoneCallResponse
{
    [DataMember]
    public double ActualCallCharge = -1.0; 
```

我假设服务代码是 100% 正确的，当我使用服务时有什么问题吗？

当我右键单击 PostPhoneCallResponse 的定义时，它是：

```
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Runtime.Serialization", "4.0.0.0")]
[System.Runtime.Serialization.DataContractAttribute(Name="PostPhoneCallResponse", Namespace="http://schemas.datacontract.org/2004/07/nsBOERPI")]
[System.SerializableAttribute()]
public partial class PostPhoneCallResponse : object, System.Runtime.Serialization.IExtensibleDataObject, System.ComponentModel.INotifyPropertyChanged {

    [System.NonSerializedAttribute()]
    private System.Runtime.Serialization.ExtensionDataObject extensionDataField;

    [System.Runtime.Serialization.OptionalFieldAttribute()]
    private double ActualCallChargeField; 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:54:28.257

`client = new BOERPI.PostPhoneCallResponse();`您正在尝试使用您的`DataContract`此处而不是服务客户端。

在服务参考下检查您在客户端应用程序中使用的服务名称并使用它：

例如。

![在此处输入图像描述](../Images/fe5b9d114c918b1c2f390e5924071755.png)

```
using(var client = new BingMapsGeocodeService()) // This should be your service client name
{

} 
```

**更新：**

使用请求和响应对象发送和接收消息：

您需要根据您的操作显示创建一个请求对象：

```
var request = new PostPhoneCallRequest(){ // populate all your properties you need to send to the service};

var client = new BOERPI.MyClient(); // Instantiate your client with the name you have given for your service client.

PostPhoneCallResponse response = client.PostPhoneCall(request); // You are sending your request and getting a response as PostPhoneCallResponse object 
```

# php - 带有可变字段的PHP mysql交叉表

> ID：14990554
> 
> 赞同：2
> 
> 时间：2013-02-20T21:46:09.983
> 
> 标签：php, mysql

我正在努力制作数据透视表/交叉表。最后我想内联编辑它，但首先我想至少制作表格。

在表 'tarifs' 我有一个 Id、TarifCode 和 TarifDescr 喜欢：

```
1, A, Overnight
2, P, Room
3, V, Adult No discount
etc. 
```

在我的申请中，我填写了开始日期、结束日期和适用的关税代码的值（金额）。像：

```
2012-02-05, 2012-02-09, A:1, P:0, V:2 
```

提交 SQL 查询后，填写一个表 'Occupacion'，存在 ID、日期、关税代码、值，例如：

```
1, 2012-02-05, A, 1
2, 2012-02-05, V, 2
3, 2012-02-06, A, 1
4, 2012-02-06, V, 2
5, 2012-02-07, A, 1
6, 2012-02-07, V, 2
7, 2012-02-08, A, 1
8, 2012-02-08, V, 2
9, 2012-02-09, A, 1
10, 2012-02-09, V, 2 
```

这是我的问题：如何创建一个查询（或视图）来给我下一个输出：

```
-- 2012-02-05 | 2012-02-06 | 2012-02-07 | 2012-02-08 | 2012-02-09
A           1            1            1            1            1
V           2            2            2            2            2 
```

在与该主题相关的大多数帖子中，这些值都是已知的。就我而言，有时没有使用关税代码 A 或创建了新的关税代码。

最后，我想以 JSON 样式制作它，以便可以将其用于网格中的内联编辑。也许有人有这方面的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:52:11.113

如果您想使用 SQL 执行此操作，则可以使用聚合函数和表达式对 MySQL 中的数据进行*透视。*`CASE`这将获取`date`值并将它们转换为列：

```
select tarifcode,
  max(case when Date = '2012-02-05' then value end) `2012-02-05`,
  max(case when Date = '2012-02-06' then value end) `2012-02-06`,
  max(case when Date = '2012-02-07' then value end) `2012-02-07`,
  max(case when Date = '2012-02-08' then value end) `2012-02-08`,
  max(case when Date = '2012-02-09' then value end) `2012-02-09`
from yourtable
group by tarifcode 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/7030d/2)

如果日期未知，则可以使用类似于以下的准备好的语句：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'max(case when Date = ''',
      Date,
      ''' then value end) AS `',
      Date, '`'
    )
  ) INTO @sql
FROM  yourtable;

SET @sql = CONCAT('SELECT TarifCode, ', @sql, ' 
                  FROM yourtable 
                  GROUP BY TarifCode');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/7030d/3)。两个查询的结果是：

```
| TARIFCODE | 2012-02-05 | 2012-02-06 | 2012-02-07 | 2012-02-08 | 2012-02-09 |
------------------------------------------------------------------------------
|         A |          1 |          1 |          1 |          1 |          1 |
|         V |          2 |          2 |          2 |          2 |          2 | 
```

编辑，如果你想加入另一个表，那么你可以使用类似这样的东西：

```
select 
  t.tarifcode,
  max(case when Date = '2012-02-05' then value end) `2012-02-05`,
  max(case when Date = '2012-02-06' then value end) `2012-02-06`,
  max(case when Date = '2012-02-07' then value end) `2012-02-07`,
  max(case when Date = '2012-02-08' then value end) `2012-02-08`,
  max(case when Date = '2012-02-09' then value end) `2012-02-09`
from tarifs t
left join yourtable y
  on t.tarifcode = y.tarifcode
group by t.tarifcode 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/12e1d/1)

# mysql - 从数据库中获取行数，然后将其转换为数字

> ID：14990557
> 
> 赞同：1
> 
> 时间：2013-02-20T21:46:20.113
> 
> 标签：mysql, asp-classic

我为此使用经典的 ASP。我的目标是弄清楚在显示“抱歉注册已满”消息之前已经输入了多少条目。我认为仅计算数据库中的行数会很简单，但会出现类型不匹配错误。我不在乎行中的内容...只是在寻找原始数字。

```
Set ConnObj = Server.CreateObject("ADODB.Connection")
ConnObj.Provider="Microsoft.Jet.OLEDB.4.0;Data Source=my-database-here"
ConnObj.Open

mysql="SELECT COUNT(*) FROM Contest"

Set HowMany = ConnObj.Execute(mysql)

if HowMany > 50 then

response.Write "Sorry registration is full"

response.end

end if 
```

非常感谢提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:53:10.343

[`Execute`返回一个`RecordSet`，而不是一个`Integer`](http://msdn.microsoft.com/en-us/library/ms807027.aspx#workshp2_topic4)。

```
Set rs = ConnObj.Execute(mysql)
Set Howmany = rs(0)

if HowMany > 50 then 
```

但是，请注意，此解决方案并没有真正解决并发问题。

假设您目前有 49 个注册……并且有 10 个人同时注册。所有 10 个注册将被计算为 49...所以你最终将获得 59 个总数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:27:56.673

除了上述之外，您有时还需要确保您的对象是一个整数，例如

```
if Cint(HowMany) > 50 
```

# vb.net - 如何在 VB.NET 中声明和初始化多维数组？

> ID：14990561
> 
> 赞同：9
> 
> 时间：2013-02-20T21:46:34.563
> 
> 标签：vb.net, multidimensional-array

我想做这个：

```
Dim Numbers As Integer()() = {{1}, {2}, {3}, {4, 5, 6, 7}} 
```

IDE 的下划线`4, 5, 6, 7`和说`Array initializer has 3 too many elements`. 我究竟做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-20T21:49:25.817

以下应该有效：

```
Dim Numbers As Integer()() = {({1}), ({2}), ({3}), ({4, 5, 6, 7})} 
```

[作为Visual Basic 数组中的](http://msdn.microsoft.com/en-gb/library/vstudio/wak0wfyt.aspx)文档：

> 当您提供不同维度的嵌套数组文字时，您可以通过将内部数组文字括在括号中来避免错误。括号强制对数组文字表达式进行求值，结果值与外部数组文字一起使用

# javascript - 在 PHP 中删除 JavaScript 会话 Cookie

> ID：14990563
> 
> 赞同：1
> 
> 时间：2013-02-20T21:46:36.797
> 
> 标签：javascript, php, session, cookies

当浏览器关闭时，“浏览器”会话 cookie 会被删除。在 JavaScript 中设置“浏览器”会话 cookie 时，不包括到期日期。

```
document.cookie= "MyCookieName = MyValue; path=/"; 
```

我想删除 php.ini 中的“浏览器”会话 cookie。我试过这个：

```
setcookie('MyCookieName','', time() - 3600,'/'); 
```

不幸的是，cookie 没有被删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:01:44.387

首先，我认为 cookie 的创建方式（JS 或 PHP）没有任何区别。

您不能强制浏览器删除 cookie 文件。但是，您可以删除 cookie 的内容并将其过期。这正是您对上面的代码所做的事情。我可能会稍微调整一下：

```
setcookie('MyCookieName', '', 1, '/'); // no need to calculate one hour ago. 
```

假设 cookie 有一些价值，你可以检查你的代码是否生效：

```
if ($_COOKIE["MyCookieName"] == '') {
  echo 'cookie was deleted';
} 
```

在用户关闭浏览器之前，该文件仍然不会被删除。

要检查上述内容是否不起作用的另一件事是 cookie 路径（ 中的第四个参数`setcookie()`。可能仅设置了 cookie，例如 for `/blog`。您应该能够通过使用 Safari 检查 cookie 来推断这一点webkit 开发者工具或类似的东西。

# ruby-on-rails - rake routes 表示路由存在，但错误消息另有说明

> ID：14990564
> 
> 赞同：0
> 
> 时间：2013-02-20T21:46:37.773
> 
> 标签：ruby-on-rails

我正在关注 Railscast [http://railscasts.com/episodes/235-devise-and-omniauth-revised?view=comments](http://railscasts.com/episodes/235-devise-and-omniauth-revised?view=comments)关于在设计中实现omniauth，特别是添加Twitter 登录。当我将登录 Twitter 的链接添加到我的应用程序时，我在访问主页时收到此错误

```
 <li><%= link_to "Sign In With Twitter", user_omniauth_authorize_path(:provider) %></li>

No route matches {:controller=>"omniauth_callbacks", :action=>"passthru", :provider=>:provider} 
```

如果我做 rake 路由（见下文），它表明我有 'user_omniauth_callback' 路由，但它没有指定请求类型（GET、POST）等，我不确定这是否重要。

我在 SO 上搜索了这个错误，一个人遇到了类似的问题，原因是没有在 routes.rb 中包含以下代码，但我已经包含了。

```
devise_for :users, path_names: {sign_in: "login", sign_out: "logout"},
                   controllers: {omniauth_callbacks: "omniauth_callbacks"} 
```

在他添加omniauth控制器的情节部分之前出现了错误；我添加它只是为了确定，但我仍然遇到同样的错误：

```
class OmniauthCallbacksController < Devise::OmniauthCallbacksController

    def all
        request.env["omniauth.auth"]

    end

    alias_method :twitter, :all
end 
```

我不确定我还能看到什么。在设计初始化程序中，我为 Twitter 设置了配置

```
config.omniauth :twitter, ENV["TWITTER_KEY"], ENV["TWITTER_SECRET"] 
```

这是我的用户模型

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable, :omniauthable,
         :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me, :name, :image, :provider, :uid

  validates_uniqueness_of :name, :email, :case_sensitive => false
end 
```

你能就我可以做些什么来解决这个问题提出任何建议吗？

耙子路线

```
 new_user_session GET    /users/sign_in(.:format)               devise/sessions#new
            user_session POST   /users/sign_in(.:format)               devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)              devise/sessions#destroy
 user_omniauth_authorize        /users/auth/:provider(.:format)        devise/omniauth_callbacks#passthru {:provider=>/twitter/}
  user_omniauth_callback        /users/auth/:action/callback(.:format) devise/omniauth_callbacks#(?-mix:twitter)
           user_password POST   /users/password(.:format)              devise/passwords#create
       new_user_password GET    /users/password/new(.:format)          devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format)         devise/passwords#edit
                         PUT    /users/password(.:format)              devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)                devise/registrations#cancel
       user_registration POST   /users(.:format)                       devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)               devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)                  devise/registrations#edit
                         PUT    /users(.:format)                       devise/registrations#update
                         DELETE /users(.:format)                       devise/registrations#destroy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:02:41.383

错误是我传递 :provider 而不是 :twitter 作为链接中的参数。

不正确

```
<%= link_to "Sign In With Twitter", user_omniauth_authorize_path(:provider) %> 
```

正确的：

```
 <%= link_to "Sign In With Twitter", user_omniauth_authorize_path(:twitter) %> 
```

# c++ - 在 Windows C++ 中捕获 Nan 和 Inf

> ID：14990565
> 
> 赞同：8
> 
> 时间：2013-02-20T21:46:56.227
> 
> 标签：c++, math

我今天痛苦地得知**Nan**和**Inf**有严重的问题。例如，您是否知道 sqrtf(NaN)比 sqrtf(10.123132)**慢 15 倍以上**，而 sqrtf(-1)比 sqrtf(10.123132)**慢 30 倍**（！！）——这本身就是一个非常慢的浮点计算！？你计算垃圾，需要荒谬的时间，甚至没有意识到。

好的，在 Linux 下，您可以通过在发生异常时抛出异常来捕获 Nan 和 Inf 错误：

```
#include <fenv.h> 
feenableexcept(FE_DIVBYZERO | FE_INVALID | FE_OVERFLOW); 
```

你怎么能在 Windows 下做到这一点？

编辑：基准代码：

```
float a,b;
a = 1.0 / 0;   //inf
a = -10;         //also nice
long c=0;
long time = SDL_GetTicks();

for (long i=1;i<=1000000;i++) {
   b=sqrt(a); 
}

ostringstream Help; Help << SDL_GetTicks()-time;

//RESULT SHEET
//sqrt(1): 21ms
//sqrt(10): 21ms
//sqrt(10.123): 20ms
//sqrt(-10);   390ms
//sqrt(+-NaN): 174ms
//sqrt(inf):  174 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T23:57:53.043

`/fp:except`如果您使用的是 Visual Studio，则可以使用该选项打开浮点异常。请参阅[http://msdn.microsoft.com/en-us/library/e7s85ffb.aspx](http://msdn.microsoft.com/en-us/library/e7s85ffb.aspx)。

代码中的等价物是`#pragma float_control( except, on )`. 请参阅[http://msdn.microsoft.com/en-us/library/45ec64h6(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/45ec64h6(v=vs.110).aspx)。

在运行时，您可以使用类似`_controlfp( _MCW_EM, _MCW_EM )`. 请参阅[http://msdn.microsoft.com/en-us/library/vstudio/e9b52ceh(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/vstudio/e9b52ceh(v=vs.110).aspx)。

# bash - 使用 bash、sed、awk 解析像 .ini 这样的文件

> ID：14990567
> 
> 赞同：3
> 
> 时间：2013-02-20T21:47:00.883
> 
> 标签：bash, parsing, sed, awk

我有一个这样的文件：

```
[User1]  <- unique id
name=    <- values can be empty
pwd=
...
         <- empty line
[User2]
name=
pwd=
..

[User3]
name=
pwd=
.. 
```

我需要能力：获取字段值`User2` 以更改字段值（例如`pwd`）。

PS最好使用**bash**、**sed**或**awk**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:00:03.557

这是更改 pwd 值的简单解决方案。`pwd`如果是最后一个字段，这将在记录末尾添加一个额外的换行符。

```
awk '/^\[User2\]/ { sub( "\npwd=[^\n]*(\n|$)", 
    "\npwd=newvalue\n") } 1' ORS='\n\n' RS= input-file > output-file
mv output-file > input-file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T22:16:08.047

您可以使用这样的三个规则（兼容 nawk）来做到这一点：

```
awk -F= '
  /^\[/ { user=$1; gsub("[][]","",user) }
  user == "User2" && $1 == "pwd" { $0=$1"=some_pwd" }
  1
' 
```

输出：

```
[User1]
name=
pwd=
...

[User2]
name=
pwd=some_pwd
..

[User3]
name=
pwd=
.. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T22:15:49.533

这是 Python 与 AWK 的明显胜利，因为 Python 带有一个内置模块来解决这类问题。

模块名称从 Python 2.x 更改为 Python 3.x；`try`顶部的块应该允许它与 Python 2.x 或 Python 3.x 一起工作（我在我的计算机上对它进行了测试）。

编辑：我只是稍微改进了答案。现在它不是写入一个新文件，而是写入一个临时文件，当它成功完成后，它会删除原始文件并将临时文件重命名为原始文件名。在非 Windows 系统上，删除原始文件的步骤是可选的。

```
import os
import sys

try:
    import ConfigParser as cp
except ImportError:
    import configparser as cp

try:
    _, fname = sys.argv
except Exception:
    print("Usage: configedit <filename>")

temp_file = fname + ".tempfile"

c = cp.ConfigParser()
c.read(fname)

c.set("User2", "pwd", "XkcdApprovedLongerPassword")
with open(temp_file, "w") as f:
    c.write(f)

os.remove(fname)
os.rename(temp_file, fname) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-29T20:47:45.597

根据 sed 的要求：

```
sed -i "/\[User2\]/,/^$/{s/\(^pwd\)\=.*$/\1\=password/}" 
```

将上面一行中的“密码”更改为您想要在文件中更改密码的任何内容。

该脚本将在“[User2]”和下一个空白行之间进行搜索。然后它将找到以“pwd =”开头的行并在此之后更改任何内容。

对于那些仔细观察的人，我没有捕捉到请求者可读的“=”符号。

# c# - 有和没有 Kerberos 的 Active Directory 的区别？

> ID：14990569
> 
> 赞同：1
> 
> 时间：2013-02-20T21:47:03.917
> 
> 标签：c#, asp.net, active-directory, kerberos

我有一个我们客户的员工使用的 Web 应用程序 (ASP.NET/C#)，我们支持的身份验证方法之一是通过 LDAP 的外部 Active Directory。

我最近有一个请求来支持带有 AD 的 Kerberos。

从发展的角度来看，这意味着什么？我知道 Unix 世界中 Kerberos 的基础知识，但不确定它如何适应 AD/LDAP

目前，我使用标准 LDAP 与服务帐户绑定以查找用户，然后使用他们提供的凭据以该用户身份绑定以验证登录。

需要什么不同的方式来支持 Kerberos？我的 Google-fu 让我失望了。

为了清楚起见，应用服务器与 AD 服务器不在同一个域中。

**编辑：**

甚至可以通过 Internet 连接进行 Kerberos 身份验证吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:56:20.947

Greg 这是您需要查看的内容。如果您需要任何代码示例的帮助，请告诉我。我目前在`Active Directory`Group 工作，并且有 8 年以上的 C# 编码经验`AD and LDAP`

`you should still be able to validate user credentials if they sit on 2 different domains you want to look at the following PrincipalContext, 'UserPrincipal', 'GroupPrincipal if necessary', and ValidateCredentials which is probably the one you want the most`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:24:34.047

Kerberos 已成为 Windows 的标准超过 13 年（自 Windows 2000 起）。您需要做的就是在您的 IIS 中启用带有 SPNEGO/Kerberos 的 Windows Auth。如果您有胖客户端，则可以使用 SSPI 获取安全上下文并从中读取当前登录的 Kerberos UPN。我已经在 SO 上多次回答过这类问题。请搜索。

# java - 获取变更集中文件的完整路径

> ID：14990572
> 
> 赞同：3
> 
> 时间：2013-02-20T21:47:35.870
> 
> 标签：java, rtc, jazz

我正在搜索位于变更集的 .txt 文件。然后我需要在我的电脑上本地创建这个文件的完整路径目录。

例如，如果有一个名为“test.txt”的文件位于：Project1-->Folder1-->Folder2-->test.txt

直到现在我已经设法搜索到这个文件。现在我需要获取完整目录并在我的电脑上创建类似的目录：我的电脑上的结果：Folder1-->Folder2-->test.txt

这就是我在变更集中搜索文件并检索它的方法：

```
public IFileItem getTextFileFile(IChangeSet changeSet, ITeamRepository repository) throws TeamRepositoryException{
    IVersionableManager vm = SCMPlatform.getWorkspaceManager(repository).versionableManager();
    List changes = changeSet.changes();
    IFileItem toReturn = null;
    for(int i=0;i<changes.size();i++) {="" <br="">             Change change = (Change) changes.get(i);
        IVersionableHandle after = change.afterState();
        if( after != null && after instanceof IFileItemHandle) {
            IFileItem fileItem = (IFileItem) vm.fetchCompleteState(after, null);
            if(fileItem.getName().contains(".txt")) {
                   toReturn = fileItem;
                   break;
            } else {
               continue;
            }
        }
    }
    if(toReturn == null){
        throw new TeamRepositoryException("Could not find the file");
    }
    return toReturn;
} 
```

我使用 RTC:4 Win:XP

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T22:28:50.193

我有以下通过以下内容获取的 IConfiguration：

```
IWorkspaceManager workspaceManager = SCMPlatform.getWorkspaceManager(repository); 

IWorkspaceSearchCriteria wsSearchCriteria = WorkspaceSearchCriteria.FACTORY.newInstance(); 

wsSearchCriteria.setKind(IWorkspaceSearchCriteria.STREAMS); 

wsSearchCriteria.setPartialOwnerNameIgnoreCase(projectAreaName); 

List <iworkspacehandle> workspaceHandles = workspaceManager.findWorkspaces(wsSearchCriteria, Integer.MAX_VALUE, Application.getMonitor());　 

IWorkspaceConnection workspaceConnection = workspaceManager.getWorkspaceConnection(workspaceHandles.get(0),Application.getMonitor()); 

IComponentHandle component = changeSet.getComponent(); 

IConfiguration configuration = workspaceConnection.configuration(component); 

List lst = new ArrayList<string>(); 

lst=configuration.locateAncestors(lst,Application.getMonitor()); 
```

==========================================

现在要获取文件项的完整路径，我使用了以下方法：

[https://jazz.net/forum/questions/94927/how-do-i-find-moved-from-location-for-a-movedreparented-item-using-rtc-4-java-api](https://jazz.net/forum/questions/94927/how-do-i-find-moved-from-location-for-a-movedreparented-item-using-rtc-4-java-api)

==========================================

```
private String getFullPath(List ancestor, ITeamRepository repository) 

throws TeamRepositoryException { 

String directoryPath = ""; 

for (Object ancestorObj : ancestor) { 

IAncestorReport ancestorImpl = (IAncestorReport) ancestorObj; 

for (Object nameItemPairObj : ancestorImpl.getNameItemPairs()) { 

NameItemPairImpl nameItemPair = (NameItemPairImpl) nameItemPairObj; 

Object item = SCMPlatform.getWorkspaceManager(repository) 

.versionableManager() 

.fetchCompleteState(nameItemPair.getItem(), null); 

String pathName = ""; 

if (item instanceof IFolder) { 

pathName = ((IFolder) item).getName(); 

} 

else if (item instanceof IFileItem) { 

pathName = ((IFileItem) item).getName(); 

} 

if (!pathName.equals("")) 

directoryPath = directoryPath + "\\" + pathName; 

} 

} 

return directoryPath; 

} 
```

==========================================

# java - 如何捕获 iframe 重定向？

> ID：14990573
> 
> 赞同：3
> 
> 时间：2013-02-20T21:47:36.973
> 
> 标签：java, android, webview

我有一个内部带有 iframe 的 WebView。iframe 的内容会重定向到另一个不允许嵌入 iframe 的 URL。没问题，实际上，我只想在这种情况下启动外部浏览器活动。问题是我找不到拦截重定向的方法。shouldOverrideUrlLoading()、onPageStarted() 或 onLoadResource() 都没有被调用来进行重定向，因此我没有机会开始活动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T22:17:33.360

在 html 中更改 iframe 标记以在发生重定向时调用一些 javascript 函数

示例：[iFrame src 更改事件检测？](https://stackoverflow.com/questions/2429045/iframe-src-change-event-detection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T09:11:38.850

对于遇到此问题的其他人，我们找到了一个比调用 javascript 函数更简单的解决方案。只需将“target=_top”添加到 iframe 重定向（请参阅[http://www.w3schools.com/tags/att_a_target.asp](http://www.w3schools.com/tags/att_a_target.asp)）。然后会在 Android 代码中调用 shouldOverrideUrlLoading()。

# visual-studio-2012 - Visual Studio 代码覆盖率未显示所有程序集

> ID：14990577
> 
> 赞同：8
> 
> 时间：2013-02-20T21:47:58.413
> 
> 标签：visual-studio-2012, code-coverage

我的 .SLN 文件中有 20 个项目。我正在通过测试资源管理器运行我的单元测试并生成代码覆盖率。只有八个项目出现在报道中（见截图）。我正在使用一个运行设置文件，其中我已经注释掉了所有 <exclude> 标记的内容，如下所示：

```
 <PublicKeyTokens>
          <!-- Exclude Visual Studio extensions: -->
          <Exclude>
            <!--
            <PublicKeyToken>^B77A5C561934E089$</PublicKeyToken>
            <PublicKeyToken>^B03F5F7F11D50A3A$</PublicKeyToken>
            <PublicKeyToken>^31BF3856AD364E35$</PublicKeyToken>
            <PublicKeyToken>^89845DCD8080CC91$</PublicKeyToken>
            <PublicKeyToken>^71E9BCE111E9429C$</PublicKeyToken>
            <PublicKeyToken>^8F50407C4E9E73B6$</PublicKeyToken>
            <PublicKeyToken>^E361AF139669C375$</PublicKeyToken>
            -->
          </Exclude>
        </PublicKeyTokens> 
```

我无法弄清楚为什么其他 12 个项目没有显示在覆盖结果中。有任何想法吗？

**解决方案项目**：

![Visual Studio 项目清单](../Images/3af264a55693b0174d2a9973e078cfe6.png)

**代码覆盖结果**：

![在此处输入图像描述](../Images/340dd87a253ad845366d696e19dfaab0.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2019-03-20T17:49:07.317

添加`<DebugType>Full</DebugType>`到目标 .csproj 文件，为我工作

```
<PropertyGroup>
     <TargetFramework>netstandard2.0</TargetFramework>
     <DebugType>Full</DebugType>
</PropertyGroup> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-21T21:21:35.983

程序集未显示，因为它们在当前测试运行期间未加载。

添加一些在其他每个程序集中使用类型的简单测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T19:00:19.973

你能不能也补充一下：

```
 <CodeCoverage>
        <ModulePaths>
          <Include>
             <!--Include all loaded .dll assemblies and .exe executables-->
            <ModulePath>.*\.dll$</ModulePath>
            <ModulePath>.*\.exe$</ModulePath>
          </Include>
        </ModulePaths>            

      </CodeCoverage> 
```

# c++ - C++中的存储分配

> ID：14990584
> 
> 赞同：7
> 
> 时间：2013-02-20T21:48:14.810
> 
> 标签：c++, initialization, switch-statement

我正在阅读 C++ 第 6 章初始化和清理中的思考。作者说：

> 实际上，编译器更有可能遵循 C 中的做法，即在该范围的左大括号处为该范围分配所有存储空间。没关系，因为作为程序员，在定义之前您不能访问存储。尽管存储是在块的开头分配的，但构造函数调用直到定义对象的序列点才会发生，因为在此之前标识符不可用。编译器甚至会检查以确保您没有将对象定义放在序列点仅有条件地通过它的位置，例如在 switch 语句中或 goto 可以跳过它的地方。

然后作者举了一个例子如下：

```
class X {
public:
  X();
};

X::X() {}

void f(int i) {
  if(i < 10) {
   //! goto jump1; // Error: goto bypasses init
  }
  X x1;  // Constructor called here
 jump1:
  switch(i) {
    case 1 :
      X x2;  // Constructor called here
      break;
  // case 2 : // Error: case bypasses init
      X x3;  // Constructor called here
      break;
  }
} 

int main() {
  f(9);
  f(11);
}///:~ 
```

我不明白为什么上面的代码可以？据我了解，如果不是`x2`可以绕过初始化。`i``1`

***补充：***

这句话“实际上，编译器更有可能遵循 C 中的做法，在该范围的左大括号处为一个范围分配所有存储空间。” 也让我很困惑。

根据作者的描述，在 的左大括号处`switch`，编译器已经为`x2`and分配了空间`x3`。如果是这种情况，则有`x2`可能未初始化（不满足情况 1）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T21:54:03.893

> 根据我的理解，如果 i 不是 1，x2 可以绕过初始化。

不，要么`case 1`执行，然后在块`x2`末尾定义然后销毁`switch`，要么不执行任何情况，整个`switch`块什么都不做，所以`x2`不在范围内，所以它没有被初始化，但它不能被提到任何一个。所以要么它存在并且可以安全使用，要么它不存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T21:52:27.683

C++ 对象初始化和销毁​​语义是完全跳转安全的（包括异常、goto、switch 和循环结构）。

（唯一值得注意的例外是继承自 C 标准库（setjmp/longjmp））

> 6.6 跳转语句
> 
> ²从范围退出时（无论如何完成），已在该范围内构建的具有自动存储持续时间 (3.7.3) 的对象将按其构建的相反顺序销毁。[注：对于临时性，见 12.2。—结束注释]***转移出循环，转移出块，或回过具有自动存储持续时间的初始化变量涉及销毁具有自动存储持续时间的对象，这些对象在转移点的范围内但不在转移点的范围内***. （参见 6.7 中的转移到块）。[ 注意：但是，程序可以终止（例如，通过调用 std::exit() 或 std::abort() (18.5)）而不破坏具有自动存储持续时间的类对象。——尾注]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T21:58:43.467

不，即使is`x2`也无法绕过。的问题是，如果它被采用，则不会调用构造函数（请记住，构造函数在语句中被“调用” - 因为对构造函数的调用*高于*跳转目标，您将在仍在范围内的点。`i``1``goto``x1``X x1;`*`x1`*

 **但是*你不能跳过这条线`X x2;`并最终到达仍在范围内的点`x2`，所以没关系。

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T21:56:28.617

它的问题在于，当您退出其范围时，本地初始化变量会被破坏。c++ 认为 switch,if,while,for 在创建变量方面都是它们自己的范围。**

# .net - .NET 是否有拉式 JSON StreamReader 解析器？

> ID：14990590
> 
> 赞同：1
> 
> 时间：2013-02-20T21:48:40.650
> 
> 标签：.net, json, parsing, json.net, xmlpullparser

我需要从 JSON 反序列`StreamReader`化，而不为该流中的每个对象实例化中间对象。

*   [JSON.NET](https://github.com/JamesNK/Newtonsoft.Json)像这样调用`JsonConvert.DeserializeObject<T>(string json, JsonConverter[] converters)`
    1.  不接受`StreamReader`，并且
    2.  `Newtonsoft.Json.*`如内存分析器所示，在内存中为 JSON结构创建整个类集。_我实际上不确定是不是这样，因为我`JsonConverter`的 _
*   [JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)似乎也根本不支持`Stream`s。
    1.  甚至没有记录`new JsonSerializer().Deserialize(new JsonTextReader(streamReader))`

我想要的零方法是[SAX](http://en.wikipedia.org/wiki/Simple_API_for_XML)或[StAX](http://en.wikipedia.org/wiki/StAX)样式的 JSON 解析器。

理想情况下，我想要的是一个类似的 API

```
object JsonCooler.DeserializeObject<T>(
  StreamReader jsonStream, Converter[] converters) 
```

它将直接反序列化为 class 的新实例`T`，而不是将其所有中间类 DOM 对象保留在内存中。

这样的解串器存在吗？或者我在概念层面缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-24T02:28:07.843

我怀疑这是一个越来越频繁的用例。我正在考虑通过这个小工具支持它一段时间，我也努力保持简短和快速：

[https://github.com/ysharplanguage/FastJsonParser](https://github.com/ysharplanguage/FastJsonParser)

我仍然忙于首先使其稳定，但是如果您想在我有机会之前尝试在分叉中实现它，希望这足以稍微修改 Obj(int external) 和 Arr(int external ) 方法，以及向 TypeInfo 缓存添加（可选）“reviver”回调委托。这将允许应用程序决定流中的下一个对象“{ ... }”或数组“[ ... ]”是否/何时需要完全反序列化其内容。

'HTH，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:51:12.443

我`DataReader`在[LitJSON](http://litjson.sourceforge.net/doc/manual.html#quickstart.readerwriter.examples.jsonreader)中找到了一个，但它已经过时了。将接受任何更好的答案。

# jquery - 导航到锚标记以加载比正常显示更多的内容

> ID：14990591
> 
> 赞同：0
> 
> 时间：2013-02-20T21:48:47.570
> 
> 标签：jquery, html

这个问题是该线程的延续： [仅显示带有锚的特定 div](https://stackoverflow.com/questions/14988930/only-show-specific-div-with-anchor)

我有一个名为profiles.html的页面

它包含大约 20 个人的个人资料，所有这些人都包含在一个名为“profile”的类中，id 为“example-name1”、“example-name2”、“example-name3”等

导航到 profiles.html#example-name2 将仅显示该配置文件。

现在，当导航到profiles.html#example-name2 时，我想加载更多内容，例如div，这些内容不会仅显示在profiles.html 中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:53:10.007

您可以使用计时器每隔一秒左右重新检查一次锚点。如果有适当的锚文本，则显示适当的 div。

```
window.setInterval('functionName', 100);
function functionName() {
    var url_pieces = document.location.href.split('#');
    if( document.elementById(url_pieces[1]) )
        document.elementById(url_pieces[1]).style.display='';
} 
```

编辑：在 JSFiddle 中更彻底地填写这个粗略的例子：http: [//jsfiddle.net/La6AZ/](http://jsfiddle.net/La6AZ/)

# oauth - linkedin 访问令牌 oauth_expires_in VS 60 天到期

> ID：14990593
> 
> 赞同：1
> 
> 时间：2013-02-20T21:48:50.837
> 
> 标签：oauth, linkedin, access-token

[http://developer.linkedin.com/documents/authentication](http://developer.linkedin.com/documents/authentication)（部分：刷新访问令牌）

该段说

> LinkedIn 访问令牌可在 60 天内刷新

另一方面，它还表示客户端应用程序可以跟踪令牌创建日期并将其与`oauth_expires_in value`（以秒为单位）进行比较，并在需要时刷新令牌。

但是，`oauth_expires_in=599`当我调用请求令牌端点时，我只得到（秒）。

当我检索 request token: `oauth_token=xxxxx&oauth_token_secret=xxxxx&oauth_callback_confirmed=true&xoauth_request_auth_url=https://api.linkedin.com/uas/oauth/authorize&`时，我得到以下响应：`oauth_expires_in=599`

我没有收到响应访问令牌请求的此类参数： `https[://]www[.]linkedin[.]com/uas/oauth/authorize/submit?oauth_token=xxx&oauth_verifier=xxx`

有人可以解释一下吗？

PS：使用 [] 更改网址，因为由于缺乏声誉，它不允许我发布超过 2 个网址。

TIA。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T13:29:30.697

您以秒为单位的到期时间是 requestToken 的到期时间，而不是 accessToken 的到期时间。换句话说，如果您在接下来的 599 秒（10 分钟）内没有将该令牌与访问令牌交换，它将过期，您将需要获取一个新的 requestToken。

根据linkedin 文档，您收到的 oauth 令牌的有效期为 60 天。我希望这有帮助。

# ruby-on-rails - 视图中的 Rails 助手

> ID：14990595
> 
> 赞同：0
> 
> 时间：2013-02-20T21:49:08.953
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

在我看来，我经常重复使用以下 API 调用：

```
<%@products.each do |product|%>
        <%  url_raw = URI.parse("url=#{product.wmt_id}") %>
        <%  url = Net::HTTP.get_response(url_raw).body %>
        <%  if url.empty? %>
            <%  @title          = "Product Unavailable via API" %>
            <%  @url            = "Product Unavailable via API" %>
            <%  @cover_img      = "180X180.jpg" %>
            <%  @price          = "Product Unavailable via API" %>
        <% else %>
        <%  begin %>
        <%      @response1  = JSON.parse(url) %>
        <%  @title          = @response1["ProductName"]%>
        <%  @url            = "{@response1["ProductUrl"]}"%>
        <%  @cover_img      = @response1["ImagePath"]%>
        <%@price = @response1["currentItemPrice"]%>
        <%rescue%>
        <%end%>
        <%end%> 
```

什么是干涸我的代码的最有效方法，我将它定义为一种方法，以便我可以重用它。如果我在 3 个单独的视图文件中使用此代码，应该将它放在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:59:31.690

如果在同一个控制器中使用它，请查看`app/helpers/products_helper.rb`（如果您的控制器名称不同，请用产品替换您的控制器名称）。

如果这在它所属的许多控制器中使用，`app/helpers/application_helper.rb`那么所有视图都可以访问它。

我怀疑您可以显着减少对实例变量的使用，并且代码在帮助程序中会更加清晰。我建议将这些数据加载到*控制器*中，而不是视图或助手中。这样，视图只是使用它提供的信息而不是导致重复的 api 调用。这种急切加载对于您的情况可能不切实际，但至少这不应该出现在视图中。

# magento - MAGENTO - 从类别网格视图中删除项目名称和价格

> ID：14990596
> 
> 赞同：0
> 
> 时间：2013-02-20T21:49:12.193
> 
> 标签：magento, view, grid

很难弄清楚这一点。我的网页在这里：[http](http://www.the-shirt.co.uk/magento) ://www.the-shirt.co.uk/magento （对加载时间感到抱歉。我还没有开始优化这个）

类别产品视图显示项目图片，价格和一个非常大的边界！

我想做的只是有一张照片。我不想显示任何价格、名称或边界。我该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:04:04.387

乔恩，

我在这里回答了你的问题

[http://www.magentocommerce.com/boards/viewthread/307687/](http://www.magentocommerce.com/boards/viewthread/307687/)

我希望这有帮助！

# android-edittext - 将 EditText 传递给字符串

> ID：14990598
> 
> 赞同：0
> 
> 时间：2013-02-20T21:49:25.450
> 
> 标签：android-edittext

```
 EditText hi = (EditText) findViewById(R.id.editText1);
         String hi2 = hi.toString();

         editor.putString("user_email", hi2);   
     editor.commit(); 
```

我点击时上面的代码可以正常工作并且编译得很好但是当我进入我的设置时我得到的值是

```
androd.widget.EditText@414e4e70 
```

有谁知道我将值从用户输入框中传递到我的首选项的正确语法。

如果我使用

```
editor.putString("user_email","helloworld@google.com"); 
```

然后它可以工作，因为它是一个完整的字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:30:52.163

```
 EditText hi = (EditText) findViewById(R.id.editText1);
         String hi2 = hi.getEditableText().toString();

         editor.putString("user_email", hi2);   //put into the email settings the value from the user input
         editor.commit(); 
```

我错过了 getEditableText() 深夜编码:(

# linker - GCJ 链接错误：说错误：未定义对“main”collect2 的引用：错误：ld 返回 1 个退出状态

> ID：14990605
> 
> 赞同：1
> 
> 时间：2013-02-20T21:49:53.850
> 
> 标签：linker, ld, binutils, gcj

代码是这样的：

```
public class Thingy 
{
  public static void main(String[] args)
  {
    System.out.println(Math.random());
  }
} 
```

所以，绝对不是一个不寻常的案例，只是一个基本的例子。

当我尝试使用 GCJ 的`javac`实现来制作字节码而不是 OpenJDK 时，它工作正常。

```
neil@neil-Inspiron-M5030:~/javastuff$ javac Thingy.java
neil@neil-Inspiron-M5030:~/javastuff$ java Thingy
0.2794511843566371 
```

但是当我尝试让 GCJ 生成本机代码时，我得到了链接器错误。如果你愿意，我可以给你详细的输出：

```
neil@neil-Inspiron-M5030:~/javastuff$ gcj --verbose Thingy.java
Using built-in specs.
Reading specs from /usr/lib/gcc/x86_64-linux-gnu/4.7/libgcj.spec
rename spec startfile to startfileorig
rename spec lib to liborig
COLLECT_GCC=gcj
COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.7/lto-wrapper
Target: x86_64-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.7.2-1ubuntu1' --with-bugurl=file:///usr/share/doc/gcj-4.7/README.Bugs --enable-languages=c,c++,java --prefix=/usr --program-suffix=-4.7 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.7 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-time=yes --enable-gnu-unique-object --disable-libmudflap --enable-plugin --disable-browser-plugin --enable-java-awt=gtk --enable-gtk-cairo --with-java-home=/usr/lib/jvm/java-1.5.0-gcj-4.7/jre --enable-java-home --with-jvm-root-dir=/usr/lib/jvm/java-1.5.0-gcj-4.7 --with-jvm-jar-dir=/usr/lib/jvm-exports/java-1.5.0-gcj-4.7 --with-arch-directory=amd64 --with-ecj-jar=/usr/share/java/eclipse-ecj.jar --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
Thread model: posix
gcc version 4.7.2 (Ubuntu/Linaro 4.7.2-1ubuntu1) 
COLLECT_GCC_OPTIONS='-fsaw-java-file' '-v' '-fbootclasspath=./:/usr/share/java/libgcj-4.7.jar' '-g1' '-shared-libgcc' '-mtune=generic' '-march=x86-64'
 /usr/lib/gcc/x86_64-linux-gnu/4.7/ecj1 Thingy.java -g1 -fbootclasspath=./:/usr/share/java/libgcj-4.7.jar -g1 -fsource=1.5 -ftarget=1.5 -fzip-dependency /tmp/cckwg5AG.zip -fzip-target /tmp/ccbixA8G.jar
COLLECT_GCC_OPTIONS='-fsaw-java-file' '-v' '-fbootclasspath=./:/usr/share/java/libgcj-4.7.jar' '-g1' '-shared-libgcc' '-mtune=generic' '-march=x86-64'
 /usr/lib/gcc/x86_64-linux-gnu/4.7/jc1 /tmp/ccbixA8G.jar -fsource-filename=Thingy.java -fhash-synchronization -fno-use-divide-subroutine -fuse-boehm-gc -fnon-call-exceptions -fkeep-inline-functions -quiet -dumpbase Thingy.java -mtune=generic -march=x86-64 -auxbase Thingy -g1 -version -fsaw-java-file -fbootclasspath=./:/usr/share/java/libgcj-4.7.jar -faux-classpath /tmp/cckwg5AG.zip -o /tmp/cclZeoeJ.s
GNU Java (Ubuntu/Linaro 4.7.2-1ubuntu1) version 4.7.2 (x86_64-linux-gnu)
    compiled by GNU C version 4.7.2, GMP version 5.0.2, MPFR version 3.1.0-p3, MPC version 0.9
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
GNU Java (Ubuntu/Linaro 4.7.2-1ubuntu1) version 4.7.2 (x86_64-linux-gnu)
    compiled by GNU C version 4.7.2, GMP version 5.0.2, MPFR version 3.1.0-p3, MPC version 0.9
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
Class path starts here:
    /tmp/cckwg5AG.zip/ (zip)
    ./ (system)
    /usr/share/java/libgcj-4.7.jar/ (system) (zip)
COLLECT_GCC_OPTIONS='-fsaw-java-file' '-v' '-fbootclasspath=./:/usr/share/java/libgcj-4.7.jar' '-g1' '-shared-libgcc' '-mtune=generic' '-march=x86-64'
 as -v --64 -o /tmp/cczIy0oL.o /tmp/cclZeoeJ.s
GNU assembler version 2.22.90 (x86_64-linux-gnu) using BFD version (GNU Binutils for Ubuntu) 2.22.90.20120924
COMPILER_PATH=/usr/lib/gcc/x86_64-linux-gnu/4.7/:/usr/lib/gcc/x86_64-linux-gnu/4.7/:/usr/lib/gcc/x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/4.7/:/usr/lib/gcc/x86_64-linux-gnu/
LIBRARY_PATH=/usr/lib/gcc/x86_64-linux-gnu/4.7/:/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../lib/:/lib/x86_64-linux-gnu/:/lib/../lib/:/usr/lib/x86_64-linux-gnu/:/usr/lib/../lib/:/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../:/lib/:/usr/lib/
COLLECT_GCC_OPTIONS='-fsaw-java-file' '-v' '-fbootclasspath=./:/usr/share/java/libgcj-4.7.jar' '-g1' '-shared-libgcc' '-mtune=generic' '-march=x86-64'
 /usr/lib/gcc/x86_64-linux-gnu/4.7/collect2 --sysroot=/ --build-id --no-add-needed --as-needed --eh-frame-hdr -m elf_x86_64 --hash-style=gnu -dynamic-linker /lib64/ld-linux-x86-64.so.2 /usr/lib/gcc/x86_64-linux-gnu/4.7/../../../x86_64-linux-gnu/crt1.o /usr/lib/gcc/x86_64-linux-gnu/4.7/../../../x86_64-linux-gnu/crti.o /usr/lib/gcc/x86_64-linux-gnu/4.7/crtbegin.o -L/usr/lib/gcc/x86_64-linux-gnu/4.7 -L/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../x86_64-linux-gnu -L/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../lib -L/lib/x86_64-linux-gnu -L/lib/../lib -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib -L/usr/lib/gcc/x86_64-linux-gnu/4.7/../../.. /tmp/cczIy0oL.o -lgcc_s -lgcc -lgcj -lm -lpthread -lrt -lz -ldl -lgcc_s -lgcc -lc -lgcc_s -lgcc /usr/lib/gcc/x86_64-linux-gnu/4.7/crtend.o /usr/lib/gcc/x86_64-linux-gnu/4.7/../../../x86_64-linux-gnu/crtn.o
/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../x86_64-linux-gnu/crt1.o(.text+0x20): error: undefined reference to 'main'
collect2: error: ld returned 1 exit status 
```

所以，我想我的问题是，有没有人知道可能出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T14:14:11.410

我猜你需要添加`--main=Thingy`到命令中。由于几个类可能有一个“主”方法，因此需要告诉链接器使用哪一个。

此外，您可能需要添加`-o <name of executable>`，否则，您将获得一个“a.out”文件，这是 GNU 编译器（实际上是任何 C 编译器）的默认可执行文件名。

问候

# jquery - 为什么 div:hover 不能与 jquery .animate 一起使用？

> ID：14990609
> 
> 赞同：0
> 
> 时间：2013-02-20T21:50:28.920
> 
> 标签：jquery, css, hover

我想创建一个用 jquery 动画的搜索表单。**[我已经完成了](http://www.fuiba.com/ux/search/ndx.html)**，但是我有一个名为 .search-icon 的 div，其背景为 :hover 不起作用：

```
.search-icon:hover {
            background: url(search-icon-hover.png) no-repeat 50% 50% !important;
        } 
```

问题可能是jquery动画引起的：

```
$('.wrapper-simple .search-icon').animate({'left': '195px'}) 
```

但我不明白在哪里！
请帮忙！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:01:59.667

您的悬停效果很好，但您的提交按钮将其覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:56:58.870

从`pointer-events:none`_

```
.wrapper-simple .search-icon{
    pointer-events: none;
} 
```

这专门使指针事件（如鼠标悬停）被 CSS 忽略，仅在某些 Firefox / Webkit 浏览器上。

# c++ - C++ mciSendString()

> ID：14990611
> 
> 赞同：0
> 
> 时间：2013-02-20T21:50:38.793
> 
> 标签：c++, audio

我用 C++ 编写了一个游戏，正在播放音频

`mciSendString("play sounds/music.wav repeat", NULL, 0, NULL);`.

现在，在我大学的电脑（Windows 7，不确定是 32 位还是 64 位）上播放正常，但在我的家用电脑（Windows 7 64 位）上却没有声音。这怎么可能？我听说 Windows 7 中不包含 MCI 驱动程序，那么为什么它在我大学的 Windows 7 计算机上可以正常运行，但在我的家用计算机上却不能呢？我正在使用 Devc++，在有人提到它有多糟糕之前（我知道），我必须使用它，因为它是我的游戏的要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-14T00:41:35.813

在您的代码行中：

```
mciSendString("play sounds/music.wav repeat", NULL, 0, NULL); 
```

没有双引号，这就是问题所在。任何多媒体设备都无法识别此命令行。正确的语法是将路径和音频文件 (sounds/music.wav) 放在双引号内。这行代码应该可以工作：

```
mciSendString("play \"sounds/music.wav\" repeat", NULL, 0, NULL); 
```

当然你需要写'\'字符才能在字符串值中写引号字符'"'。

将您的旧代码行更改为此。如果它仍然不工作，那么你应该调用 mciGetErrorString 函数并找出命令没有执行的原因，以及你必须做些什么来解决你的问题。

# java - 从 Tika 获取 Word 和 PDF 的段落计数

> ID：14990619
> 
> 赞同：1
> 
> 时间：2013-02-20T21:50:59.293
> 
> 标签：java, pdf, docx, apache-tika, text-analysis

我有一个场景，我需要协调两个文档，一个 Word (.docx) 文档以及一个 PDF。两者应该是“相同的”（PDF 只是 DOCX 文件的 PDF 版本）；意味着它们应该包含相同的文本、内容等。

具体来说，我需要确保两个文档包含相同数量的段落。所以我需要阅读 DOCX，获取段落数，然后阅读 PDF 并获取其段落数。如果两个数字相同，那么我在做生意。

看起来 Apache Tika（**我对 1.3 感兴趣**）是适合这里工作的工具。我在[这个源文件](http://svn.apache.org/repos/asf/tika/trunk/tika-parsers/src/main/java/org/apache/tika/parser/odf/OpenDocumentMetaParser.java)中看到 Tika 支持段落计数的概念，但试图弄清楚如何从两个文档中获取计数。这是我最好的尝试，但我对连接一些最后的点感到窒息：

```
InputStream docxStream = new FileInputStream("some-doc.docx");
InputStream pdfStream = new FileInputStream("some-doc.pdf");

ContentHandler handler = new DefaultContentHandler();
Metadata docxMeta = new Metadata();
Metadata pdfMeta = new Metadata();
Parser parser = new OfficeParser();
ParseContext pc = new ParseContext();

parser.parse(docxStream, handler, docxMeta, pc);
parser.parse(pdfStream, handler, pdfMeta, pc);

docxStream.close();
pdfStream.close();

int docxParagraphCount = docxMeta.getXXX(???);
int pdfParagraphCount = pdfMeta.getXXX(???);

if(docxParagraphCount == pdfParagraphCount)
    setInBusiness(myself, true); 
```

所以我问：**我是否正确设置了这个，还是我离基地很远？**如果偏离基地，请给我一些帮助，让我回到正轨。如果我设置正确，那么如何从两个`Metadata`实例中获得所需的计数？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:45:59.977

首先，Tika 只会将文档中包含的元数据返回给您。它不会为你计算任何东西。因此，如果您的文档之一缺少段落计数元数据，那么您就不走运了。如果您的一份文件有 duff 数据（即，将文件写出的程序出错了），那么您将不走运。

否则，您的代码几乎就在那里，但并不完全。您很可能希望使用`DefaultParser`or `AutoDetectParser`-`OfficeParser`仅用于 Microsoft 文件格式，而其他文件格式会自动加载所有可用的解析器并选择正确的解析器。

您想要的属性是[PARAGRAPH_COUNT](http://tika.apache.org/1.3/api/org/apache/tika/metadata/Office.html#PARAGRAPH_COUNT)，它来自 Office 元数据命名空间。您的代码将类似于：

```
TikaInputStream docxStream = TikaInputStream.get(new File("some-doc.docx"));
TikaInputStream pdfStream = TikaInputStream.get(new File("some-doc.pdf"));

ContentHandler handler = new DefaultContentHandler();
Metadata docxMeta = new Metadata();
Metadata pdfMeta = new Metadata();
ParseContext pc = new ParseContext();

Parser parser = TikaConfig.getDefaultConfig().getParser();

parser.parse(docxStream, handler, docxMeta, pc);
parser.parse(pdfStream, handler, pdfMeta, pc);

int docxParagraphCount = docxMeta.getInt(Office.PARAGRAPH_COUNT);
int pdfParagraphCount = pdfMeta.getInt(Office.PARAGRAPH_COUNT); 
```

如果您根本不关心文本，只关心元数据，则传入一个虚拟内容处理程序

# c# - HttpHeaders.TryAddWithoutValidation 的目的是什么？

> ID：14990620
> 
> 赞同：10
> 
> 时间：2013-02-20T21:51:01.597
> 
> 标签：c#, .net

在 System.Net.Http.Headers 命名空间中，[HttpHeaders.TryAddWithoutValidation](http://msdn.microsoft.com/en-us/library/hh875107.aspx)和[HttpHeaders.Add](http://msdn.microsoft.com/en-us/library/hh158900.aspx)有什么区别？

具体来说，调用 Add 方法时会发生什么验证？Add() 的文档简单地说：

> “标头值将被解析和验证。”

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-20T21:56:05.350

使用 Reflector，这是**TryAddWithoutValidation**方法在内部执行的操作：

```
if (!this.TryCheckHeaderName(name))
{
    return false;
}
if (value == null)
{
    value = string.Empty;
}
AddValue(this.GetOrCreateHeaderInfo(name, false), value, StoreLocation.Raw);
return true; 
```

工作发生在`TryCheckHeaderName()`函数内部。

它归结为检查名称是否不为空以及它是否与 HTTP 协议的 RFC 匹配（即它不包含无效字符等），以及根据一组*不允许*的标头检查标头。

这是源代码：

```
bool TryCheckHeaderName(string name)
{
   if (string.IsNullOrEmpty(name))
   {
       return false;
   }
   if (HttpRuleParser.GetTokenLength(name, 0) != name.Length)
   {
       return false;
   }
   if ((this.invalidHeaders != null) && this.invalidHeaders.Contains(name))
   {
       return false;
   }
   return true;
} 
```

相比之下，**Add**方法具有与*异常*`TryCheckHeaderName`（双关语）类似的行为，即如果标头名称不符合函数中的任何一个条件，它就会引发异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T22:03:51.760

`TryAddWithoutValidation`不会尝试解析给出的值以查看它是否有效（例如，有效的“类型”值或单值标头的多个值）。 `Add`在尝试添加标头值之前首先解析值以执行前面提到的检查

# wordpress - WordPress 4 个字母的评论错误

> ID：14990623
> 
> 赞同：3
> 
> 时间：2013-02-20T21:51:30.113
> 
> 标签：wordpress

这是我见过的最奇怪的错误之一。我最近将 WordPress 上传到我的一个新网站[http://viewmixed.com/](http://viewmixed.com/)上，在发布四个字母的单词时出现了一个奇怪的错误。

起初我以为你根本不能发表评论，因为我一直试图用“测试”这个词发表评论。然后我意识到任何四个字母的单词似乎都会破坏评论，即“四”或“1234”，但任何其他字符串都可以很好地发布评论。

我已经尝试删除所有文件/数据库，然后重新安装 WP，但这并没有解决任何问题。我在最新的 WP 版本 3.5.1 上，我也尝试安装 3.4.2 和 3.1.4，但没有解决问题...

有人知道会发生什么吗？

编辑：我忘了提到我现在确实有一个自定义主题，但是在安装主题之前就存在这个错误，我也尝试过更改主题，但是 4 个字母的错误并没有消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:04:33.537

详细回答这个问题并不容易，因为出现此错误有几个原因，但正如您在标题中看到的那样，有一个错误`406 Not Acceptable`可能是一个`MOD_SECURITY`问题。

首先更改 WordPress 中的永久链接设置，然后查看错误是否仍然出现。

第二次尝试停用`MOD_SECURITY`。因此，您可以`.htaccess`在目录中添加一个文件`wp-admin`...

```
<IfModule mod_security.c>
SecFilterScanPOST Off
</IfModule> 
```

...或在 中添加一个`.htaccess`文件`root`以完全禁用它：

```
<IfModule mod_security.c>
SecFilterEngine Off
</IfModule> 
```

如果它仍然不起作用，我建议联系您的托管服务提供商为您执行此操作。

因为找到这样的解决方案并不容易（以及进一步阅读），我建议阅读[这篇](http://activeblogging.com/info/406-error-wordpress/)关于查找 406 错误的博文和[这篇博](http://techforworld.com/406-not-acceptable-error-wordpress-solution/)文，了解 WordPress 中的另一个类似解决方案。

希望这可能对您有所帮助。

# arrays - Google Maps MVCArray 与 Fusion Tables

> ID：14990628
> 
> 赞同：0
> 
> 时间：2013-02-20T21:52:10.247
> 
> 标签：arrays, google-maps-api-3, google-fusion-tables, heatmap

可能是一个菜鸟问题，目前我已经使用我的 HTML 文件中的硬编码位置创建了一个热图层 HTML 文件。下面是我的代码示例。我想要做的是用融合表中的数据替换“heatMapData”。目标是在 Fusion Table 更新时更新地图。任何帮助，将不胜感激。

```
var heatMapData = [{location: new google.maps.LatLng(42.071523,-72.624257), weight:4.2},
                   {location: new google.maps.LatLng(42.37686,-72.46914), weight:1.6}
                  ];

      function initialize() {
        var mapOptions = {
          zoom: 4,
          center: new google.maps.LatLng(38.82, -99.408660),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);

        pointArray = new google.maps.MVCArray(heatMapData);

        heatmap = new google.maps.visualization.HeatmapLayer({
          data: pointArray
        });

        heatmap.setMap(map);
      } 
```

使用 Molle 博士发布的示例站点，当我更改 Fusion Table ID 引用时，我似乎无法呈现热图（它具有相同的列名：Lat、Long、Hits）。有任何想法吗？

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Test Map</title>

  <script type='text/javascript' src='http://code.jquery.com/jquery-1.8.3.js'></script>
  <link rel="stylesheet" type="text/css" href="/css/normalize.css">

  <link rel="stylesheet" type="text/css" href="/css/result-light.css">

      <script type='text/javascript' src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=visualization&.js"></script>

  <style type='text/css'>

  </style>

<script type='text/javascript'>//<![CDATA[ 

      function initialize() {
        var mapOptions = {
          zoom: 4,
          center: new google.maps.LatLng(38.82, -99.408660),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);

        //query the fusiontable via ajax    
        $.ajax(
                {
                  dataType: 'jsonp',
                  url     : 'https://www.googleapis.com/fusiontables/v1/query',
                  data    : {
                              sql:'SELECT Lat,Long,Hits \
                                   from 1jsYEXL-Bz0dse02Llf9cUquXkU0MqH6JlUyNhLE',
                              key:'AIzaSyCoiF1SlcuQPqoRdbP58ZCi3YrPx4wvMfg'
                            },
                  success:  function(data){
                             var heatMapData=[];
                               //prepare the data
                             $.each(data.rows,function(i,r){
                               heatMapData.push({
                                   location:new google.maps.LatLng(r[0],r[1]),
                                   weight:Number(r[2])
                                 });
                             });
                               //create the weighted heatmap
                              new google.maps.visualization.HeatmapLayer({
                                  data: heatMapData,map:map
                                  });
                            }
               });
      }

      google.maps.event.addDomListener(window, 'load', initialize);
//]]>  

</script>

</head>
<body>
  <div id="map_canvas" style="height: 800px; width: 1000px;"></div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:36:55.520

您可以查询 fusionTable 并从响应中创建图层的数据。

示例（使用 jQuery 和 ajax）：

```
$.ajax(
                {
                  dataType: 'jsonp',
                  url     : 'https://www.googleapis.com/fusiontables/v1/query',
                  data    : {
                              sql:'SELECT Lat,Long,Hits \
                                   from 1LL0eWI89nGxJ17XZDbWKsWahPyzQCAH8MHoAPSk',
                              key:'yourKey'
                            },
                  success:  function(data){
                             var heatMapData=[];
                               //prepare the data
                             $.each(data.rows,function(i,r){
                               heatMapData.push({
                                   location:new google.maps.LatLng(r[0],r[1]),
                                   weight:Number(r[2])
                                 });
                             });
                               //create the weighted heatmap
                              new google.maps.visualization.HeatmapLayer({
                                  data: heatMapData,map:map
                                  });
                            }
               }); 
```

演示：http: [**//jsfiddle.net/doktormolle/RxMdf/**](http://jsfiddle.net/doktormolle/RxMdf/)

**注意：**当你使用 ajax 时，你必须使用 JSONP 来绕过浏览器的同源限制。
当然，您也可以在服务器端请求数据。

但是，它是否可以在您的应用程序中使用取决于数据量，因为完整的数据（位置和重量）必须由客户端下载。

# api - Box API 自动登录进行身份验证

> ID：14990630
> 
> 赞同：2
> 
> 时间：2013-02-20T21:52:10.697
> 
> 标签：api, box-api

这个问题以前[在这里](https://stackoverflow.com/questions/13878683/how-to-auto-login-using-box-api)被问过，但 OP 从未回应留下的评论，因此没有得到回答。我希望通过 API 登录特定的 Box 帐户，并希望有一种方法可以自动设置登录名和密码，而不是询问用户的密码。我正在用 PHP 编写我的应用程序，到目前为止，我使用的是要求用户登录的基本 OAuth2 过程（/auth/ticket&api_key）。到目前为止，我发现的唯一建议是将文件保存到本地存储，但这不是一个选择，因为我需要我的应用程序用户做尽可能少的工作才能进入。我只需要调整这个身份验证过程。有什么建议么？？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T08:22:41.403

这是我从 Box API 技术支持得到的答案：

> 不幸的是，目前没有办法做到这一点。您确实必须通过基于 Web 的登录来进行身份验证，但是一旦您第一次进行身份验证，您就可以自动刷新令牌，这样您就不必再做一次了。对此我深表歉意，如果您对此有任何疑问，请告诉我。

# ios - Xcode 4.6 上的 Mach-O 链接器错误

> ID：14990632
> 
> 赞同：16
> 
> 时间：2013-02-20T21:52:19.043
> 
> 标签：ios, xcode, xcode4.6

我在 Xcode 4.6 上有一个 iOS 应用程序，当我最近尝试在 iPhone 6.1 模拟器中构建和运行时，我遇到了“Mach-O 链接器错误”。它继续说：

ld：架构 i386 的 17 个重复符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

有谁知道如何解决这个问题？

非常感谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-20T22:32:35.993

只需转到“构建阶段”->“编译源”并查找类的副本。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-08-22T14:55:11.110

检查您的!中是否有“ ***.m** ”文件。`#import`看来是我的错...

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-07-05T07:39:07.497

1.  退出 Xcode
2.  重启系统
3.  选择 Xcode -> 首选项 -> 位置
4.  在位置中，您将看到“派生数据”。单击路径旁边的箭头图标。
5.  这将打开一个包含“派生数据”的文件夹，将其删除。
6.  清洁产品并运行

    如果仍然不起作用，那么

    **构建设置 > 启用位码 > 否** [![在此处输入图像描述](../Images/fcd60c7f7ec24787f52cb2222619a93c.png)](https://i.stack.imgur.com/xzVU5.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-07-15T23:11:08.527

在我的例子中，我声明

```
extern NSString const *keyString 
```

在两个不同的文件中。我重命名了其中一个，它解决了我的问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-03T05:42:59.473

就我而言，它是常数。

```
NSString *const cellID = @"cellID"; 
```

这一行写在两个 .m 文件中。在开始时附加`static`关键字后，问题得到解决。

这个问题也可以在新项目中重新创建。您会认为在不同的 .m 文件中定义常量不会产生任何影响，因为它们是私有的。但我不知道编译器如何处理幕后的东西。最重要的是，当您从问题导航器中点击问题时，它不会像处理任何其他问题那样在编辑器中打开页面。真令人沮丧。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T00:43:42.657

我不确定我能给你一个解决方案，但我会分享一个答案，因为我在 xCode 4.6 上也发生了同样的事情。我添加了一个 C 类头文件和实现文件，并将它们包含在 main.c 文件中。然后我决定删除那个新的 C 类头文件和实现。当我最终再次添加一个具有相同名称和函数调用的新 c 类/头文件时，我得到了你的错误。

坦率地说，这可能是一个错误。我修复它的唯一且最快的方法是开始一个新项目并将所有课程拉入。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-19T16:16:38.063

确保您在多个类中没有具有相同名称的非即时方法（例如，如果我有两个非常相似的视图控制器以便快速移动，我将代码从一个视图控制器复制并粘贴到第二个，它们都有方法称为相同的东西： NSMutableString *filteredStringFromStringWithFilter(NSString *string, NSString *filter)) 然后应用程序会混淆使用哪些方法，因为它们都是可用的，在第二个类上重命名它并更改任何调用该类上的方法，您已经消除了混乱。难道我们都不想让事情变得更清楚！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-14T04:17:48.803

如果您想在两个不同的类中更改一个值。请记住使用静态关键字进行标记。

否则clang会在下面抛出这样的错误，没有任何值解释。</p>

> Apple Mach-O Linker Error clang：错误：链接器命令失败，退出代码为 1

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-05-17T17:39:20.573

当你重构一个类函数时，你有时也会得到这个错误。只需转到产品-> 清理并重建。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-09-11T02:21:07.827

构建阶段”->“编译源”单击按钮“验证设置”

它会修复你的项目

# objective-c - 在对象类型“UITextField”上找不到属性“原点”

> ID：14990633
> 
> 赞同：0
> 
> 时间：2013-02-20T21:52:22.170
> 
> 标签：objective-c, cocoa-touch

当键盘出现在 iPhone 上时，我试图向上滚动文本框，我正在使用以下代码，但出现错误：

> 在对象类型“UITextField”上找不到属性“原点”

```
studentLoanTextBox.frame = CGRectMake(
    studentLoanTextBox.origin.x, 
    studentLoanTextBox.origin.y - 100.0, 
    studentLoanTextBox.frame.size.width, 
    studentLoanTextBox.frame.size.height
); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T21:55:39.140

`origin`是 的成员`CGRect`，您必须`CGRect`从您的视图中获得一个。看看 的`frame`属性`UIView`。

更改所有出现的`studentLoanTextBox.origin`to`studentLoanTextBox.frame.origin`

# vb.net - 将 vb.net 嵌套会话值放入 javascript 变量中

> ID：14990636
> 
> 赞同：0
> 
> 时间：2013-02-20T21:52:43.113
> 
> 标签：vb.net, session-variables

我有一个 vb.net aspx 页面，我需要在 javascript 中分配一个会话变量

如果我执行以下操作

```
var baz ="<%=Session("User")%>";
alert(baz); 
```

我收到的警报是班级名称

```
 "TheName.WebFramework.Security.AdvanceUser" 
```

我需要这个会话的嵌套值，并且不知道如何在 vb 中执行此操作

但是我确实知道如何在 C#/通用 http 处理程序中执行此操作

```
 ...
 public void ProcessRequest (HttpContext context) {
    IAdvanceUser user = context.Session["User"] as IAdvanceUser;
 ... 
    var ID = user.EntityID 
```

当然还有 php、RoR、ColdFusion 等

我试过这个，但失败得很惨

```
var baz ="<%=Session("User").("EntityId")%>";
alert(baz); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:56:25.493

试试这个：使用`CType(fromObjectHere, toObjectHere)`

```
var baz ="<%= CType(Session("User"), AdvanceUser).EntityID %>"; 
```

**更新**

您可能需要输入全名`TheName.WebFramework.Security.AdvanceUser`或导入命名空间

```
<%= CType(Session("User"), TheName.WebFramework.Security.AdvanceUser).EntityID %> 
```

# linux - 在 nasm 中指定起始地址？

> ID：14990641
> 
> 赞同：0
> 
> 时间：2013-02-20T21:53:06.400
> 
> 标签：linux, gcc, assembly, x86, nasm

考虑一个只有简单的 32 位 x86 汇编语句的文件：

```
call 0xc1066580 
```

如果我用 nasm -f elf 组装这个文件，我会得到：

```
 0:   e8 7c 65 06 c1          call   0xc1066581 
```

如果我使用 GCC 并指定 -Ttext=0 和 -nostdlib 我得到：

```
 0:   e8 7b 65 06 c1          call   c1066580 
```

-nostdlib 链接时不要使用标准的系统启动文件或库。没有启动文件，只有您指定的库被传递给链接器，并且指定系统库链接的选项（例如 -static-libgcc 或 -shared-libgcc）被忽略。

但是 -Ttext=0 到底是做什么的呢？我用它来指定 EIP 在加载/执行时开始的入口地址。我无法在手册页中找到 -Ttext，当我在线搜索时，我发现了这个：

"-Ttext 是 "--section-start=text" 的别名，读作：--section-start=sectionname=org 在输出文件中的 org 给出的绝对地址处找到一个节。您可以使用此选项在命令行中定位多个部分所需的次数。org 必须是单个十六进制整数；为了与其他链接器兼容，您可以省略通常与十六进制值相关联的前导 0x。注意：sectionname 之间不应有空格、等号 ("=") 和 org."

来自[http://www.linuxquestions.org/questions/linux-general-1/gcc-creating-a-huge-executable-image-redhat-2-6-18-8-el5-x86_64-linux-759302/](http://www.linuxquestions.org/questions/linux-general-1/gcc-creating-a-huge-executable-image-redhat-2-6-18-8-el5-x86_64-linux-759302/)

但是，我也没有在我的手册页中找到 --section 或 sectionname，当我尝试用 --section-name 替换 -Ttext 时，我发现这是一个无法识别的参数（如果相关，这是 GCC 4.7.2 ）。

有人能告诉我这个解释（-Ttext）是否准确，我可以在我的手册中找到它吗？如果它不准确，那么 -Ttext 究竟做了什么？

我的另一个问题是：如何将与 -Ttext 类似的参数指定为 nasm？或者换句话说，我需要做什么才能使 nasm 产生与 gcc 相同的输出？

我尝试在 64 位和 32 位系统上执行相同的汇编语句（使用 nasm 和 gcc），得到相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:17:21.217

运行`ld --help`给

```
-Ttext ADDRESS              Set address of .text section 
```

如果我们使用以下程序组装`gcc -Ttext=8 -nostdlib -o test test.s`

```
.globl _start
_start:
movl test,%ebx
test: 
```

并转储节标题 ( `objdump -h test`)：

```
Sections:
Idx Name          Size      VMA               LMA               File off  Algn
  0 .text         00000007  0000000000000008  0000000000000008  00200008  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, CODE 
```

..和代码（`objdump -d test`）：

```
0000000000000008 <_start>:
   8:   8b 1c 25 0f 00 00 00    mov    0xf,%ebx 
```

我们可以看到`.text`节的起始地址为 8，大小为 7。也就是说，节内所有对符号的引用都被我们指定的起始地址偏移了 (8)，但没有涉及填充（节由于更改了地址，大小没有增长）。

您应该能够通过使用[ORG 指令](http://www.nasm.us/doc/nasmdoc7.html)来完成与 NASM 相同的事情：*“NASM 的 ORG 完全按照指令所说的：起源。它的唯一功能是指定一个偏移量，该偏移量将添加到该部分内的所有内部地址引用中”*。

# php - wordpress 循环 - 第一篇文章的样式与以下不同（侧循环 get_posts()）

> ID：14990645
> 
> 赞同：0
> 
> 时间：2013-02-20T21:53:19.417
> 
> 标签：php, wordpress, loops, count

在我的 wordpress 主题中，我想在页脚中添加一个侧循环以获取最新帖子。此循环的第一个帖子显示拇指像素、标题和帖子预览。以下 5 个仅显示标题/链接。

由于我已经在主 div 中使用了常规`<?php if(have_posts()) : while(have_posts()) : the_post(); ?>` ，因此我必须使用基于 get_posts() 的侧循环

这是我想要得到的，但它不起作用：

```
<?php query_posts('cat=6&showposts=5'); ?>
<?php $posts = get_posts('category=6&numberposts=5'); 
$count = count($posts);
foreach ($posts as $post) : start_wp(); ?>
    <?php if ($count < 2) : ?>

        /// code for the 1st post (thumb etc..)

    <?php else : ?>

           /// code for the 4 following post (links to posts only)          

    <?php endif; ?>
<?php endforeach; ?> 
```

我知道如何为常规 wordpress 循环添加计数/条件，但不使用 get_posts() 函数。

你能帮我实现吗？

提前致谢 ;）

* * *

编辑：解决方案：

好的，我使用了 'offset' 参数来实现这一点：

```
<?php $posts = get_posts('numberposts=2&offset=0'); 
foreach ($posts as $post) : start_wp(); ?>

<a href="<?php the_permalink() ?>" title="<?php the_title(); ?>" class="footernews-thumb">
<?php if ( has_post_thumbnail()) : ?>
<?php the_post_thumbnail(thumbnail); ?>
<?php endif; ?>
</a>

<h2 class="footernews-title"><a href="<?php the_permalink() ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a></h2>
<p class="footernews-preview"><?php the_content_rss('', TRUE, '', 20); ?></p>

<?php endforeach; ?>        

<?php $posts = get_posts('numberposts=3&offset=1'); 
foreach ($posts as $post) : start_wp(); ?>                      
<h2 class="footernews-title"><a href="<?php the_permalink() ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a></h2>                        
<?php endforeach; ?> 
```

由于“循环”并不是真正的循环，我决定避免计算发生次数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:11:08.687

您正在设置`$count`您获得的帖子数量（5），因此它永远不会少于 2。

您需要将其更改为：

```
<?php query_posts('cat=6&showposts=5'); ?>
<?php $posts = get_posts('category=6&numberposts=5'); 
$first = true;
foreach ($posts as $post) : start_wp(); ?>
    <?php if ($first) : ?>

        /// code for the 1st post (thumb etc..)
        <?php $first = false; ?>
    <?php else : ?>

           /// code for the 4 following post (links to posts only)          

    <?php endif;?>

<?php endforeach; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:22:45.900

我会像这样使用简单的递增检查....

```
<?php query_posts('cat=6&showposts=5'); ?>
<?php $posts = get_posts('category=6&numberposts=5'); 
$i = 1;
foreach ($posts as $post) : start_wp(); ?>
<?php if ($i == 1) : ?>

    /// code for the 1st post (thumb etc..)

<?php else : ?>

       /// code for the 4 following post (links to posts only)          

<?php endif; ?>
<?php ++$i;
<?php endforeach; ?>
<?php unset($i); ?> 
```

这只会为您提供第一次迭代的额外输出，之后它将继续使用较少的代码。

# bash - Bash：拒绝对目录的重命名访问

> ID：14990646
> 
> 赞同：2
> 
> 时间：2013-02-20T21:53:22.500
> 
> 标签：bash, file-permissions

我已经`chmod 0000`在一个目录上使用过，但该目录仍然可以重命名。如何防止用户修改目录名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:57:31.447

删除父目录的写权限应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T22:02:35.413

如果您拥有一个文件（或目录），您仍然可以对其执行各种操作，无论权限如何，包括`mv`,`rm`和`chmod`. 其他用户无法根据写入权限执行这些选项。如果你想阻止*所有者*移动目录，你不能。所有者始终可以`chmod`在文件上使用。唯一的解决方案是更改文件的所有者或将文件移动到用户不拥有的写保护目录下。

# php - Symfony 2.1 - 自定义 Json 注释监听器

> ID：14990649
> 
> 赞同：2
> 
> 时间：2013-02-20T21:53:41.170
> 
> 标签：php, symfony, symfony-2.1

对于 Symfony 2.1 项目，我正在尝试创建一个新的注释 @Json()，它将注册一个侦听器，该侦听器将在我返回数组时自动创建 JsonResponse 对象。我已经让它工作了，但由于某种原因，*总是*调用监听器，即使在没有 @Json 注释的方法上也是如此。我假设我的方法有效，因为 Sensio 额外捆绑包使用 @Template 注释执行此操作。

这是我的注释代码。

```
<?php

namespace Company\Bundle\Annotations;

/**
 * @Annotation
 */
class Json extends \Sensio\Bundle\FrameworkExtraBundle\Configuration\ConfigurationAnnotation
{
    public function getAliasName()
    {
        return 'json';
    }
} 
```

这是我的监听器代码。

```
<?php

namespace Company\Bundle\Listener\Response\Json;

class JsonListener
{
    //..

    public function onKernelView(GetResponseForControllerResultEvent $event)
    {
        $request = $event->getRequest();
        $data = $event->getControllerResult();

        if(is_array($data) || is_object($data)) {
            if ($request->attributes->get('_json')) {
                $event->setResponse(new JsonResponse($data));
            }
        }
    }
} 
```

这是我对监听器的 yaml 定义。

```
json.listener:
            class:      Company\Bundle\Listener\Response\Json
            arguments:  [@service_container]
            tags:
                - { name: kernel.event_listener, event: kernel.view, method: onKernelView } 
```

我显然在这里遗漏了一些东西，因为它被注册为 kernel.view 监听器。如何更改它以便仅在控制器操作上存在 @Json() 注释时调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:47:38.937

不要假装是确定的答案。

我不确定你为什么要扩展[`ConfigurationAnnotation`](https://github.com/sensio/SensioFrameworkExtraBundle/blob/master/Configuration/ConfigurationAnnotation.php)：它的构造函数接受一个`array`，但你不需要为你的注解进行任何配置。相反，实施[`ConfigurationInterface`](https://github.com/sensio/SensioFrameworkExtraBundle/blob/master/Configuration/ConfigurationInterface.php)：

```
namespace Company\Bundle\Annotations;

use Sensio\Bundle\FrameworkExtraBundle\Configuration\ConfigurationInterface;

/**
 * @Annotation
 */
class Json implements ConfigurationInterface
{
    public function getAliasName()
    {
        return 'json';
    }

    public function allowArray()
    {
        return false;
    }
} 
```

Sensio[`ControllerListener`](https://github.com/sensio/SensioFrameworkExtraBundle/blob/master/EventListener/ControllerListener.php)来自 SensionFrameworkExtraBundle 将读取您的注释（将类与方法注释合并）并执行此检查：

```
if ($configuration instanceof ConfigurationInterface) {
    if ($configuration->allowArray()) {
        $configurations['_'.$configuration->getAliasName()][] = $configuration;
    } else {
        $configurations['_'.$configuration->getAliasName()] = $configuration;
    }
} 
```

设置以 . 为前缀的请求属性`_`。您正在正确检查`_json`，因此它应该可以工作。尝试`$request->attributes`在您的视图事件侦听器中转储。确保您的`json.listener`服务也正确加载（使用 转储它们`php app/console container:debug >> container.txt`）。

如果它不起作用，请尝试[在此处](https://github.com/sensio/SensioFrameworkExtraBundle/blob/master/EventListener/ControllerListener.php#L80)添加一些调试和打印语句（`ControllerListener.php`在您的供应商文件夹中查找）：

```
var_dump(array_keys($configurations)); // Should contain _json 
```

请记住在编辑之前对其进行复制，否则 Composer 会在更新依赖项时抛出错误。

# xpages - XPages 如何使用操作组中的操作来停止表单提交

> ID：14990653
> 
> 赞同：1
> 
> 时间：2013-02-20T21:53:48.903
> 
> 标签：xpages

我有一个基于操作组的按钮。我想要一个停止处理按钮的动作——停止触发下一个动作。

我尝试了确认操作，但用户可以单击确定，它将继续。我尝试了一个返回 false 的执行脚本，但没有做任何事情。

我一直在阅读有关事件处理程序的信息，但不确定如何将其合并到按钮的代码本身中。

这是按钮后面的当前代码：

```
<xp:button id="button1" value="Create Account">
    <xp:eventHandler event="onclick" submit="true"
        refreshMode="complete" id="eventHandler1">
        <xp:this.action>
            <xp:actionGroup>
                <xp:modifyField
                    name="ac_Key" value="#{javascript:@Unique()}"
                    var="document1">
                </xp:modifyField>
                <xp:saveDocument></xp:saveDocument>
                <xp:openPage
                    name="/successAccount.xsp">
                </xp:openPage>
            </xp:actionGroup>
        </xp:this.action>
    </xp:eventHandler>
</xp:button> 
```

感谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T08:23:13.263

此简单示例仅在用户选择确定时才使用确认操作继续。如果用户单击取消，则不会再发生任何事情。如果用户单击确定，浏览器将打开 index.xsp 页面。

```
<xp:button value="Label" id="button1">
    <xp:eventHandler event="onclick" submit="true" refreshMode="complete">
        <xp:this.action>
            <xp:actionGroup>
                <xp:confirm message="Sure?"></xp:confirm>
                <xp:openPage name="/index.xsp"></xp:openPage>
            </xp:actionGroup>
        </xp:this.action>
    </xp:eventHandler>
</xp:button> 
```

**更新：**此示例在 actionGroup 上使用一个条件，如果条件为 false，则可以阻止 actionGroup 执行：

```
<xp:actionGroup condition="#{javascript:validateSomething()}">
    <xp:save name="/opskrifter.xsp"></xp:save>
</xp:actionGroup> 
```

# ruby-on-rails - 在 Rails 模型中获取当前日期

> ID：14990656
> 
> 赞同：4
> 
> 时间：2013-02-20T21:54:00.267
> 
> 标签：ruby-on-rails, ruby, datetime

我试图在我的 rails 模型中获取当前日期，如下所示：

内部照片.rb

```
 Paperclip.interpolates :prefix  do |attachment, style|
      :today_date => Date.today.to_s
      "#{:today_date}/#{attachment.instance.image_file_name}"
  end 
```

当我从客户端向服务器发送照片时，我收到一个错误，并在服务器上显示以下控制台输出。这告诉我“日期”功能有问题

服务器控制台：

```
 Started POST "/photos.json" for 127.0.0.1 at 2013-02-20 13:47:35 -0800
 13:47:35 web.1  | 
 13:47:35 web.1  | SyntaxError 
             (/Users/AM/Documents/RailsWS/test/app/models/photo.rb:22: syntax 
               error, unexpected tASSOC, expecting keyword_end
 13:47:35 web.1  |      :today_date => Date.today.to_s
 13:47:35 web.1  |                    ^):
 13:47:35 web.1  |   app/controllers/photos_controller.rb:1:in `<top (required)>' 
```

我究竟做错了什么？如何将当前日期输入此变量？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T05:26:47.540

尝试：

```
Paperclip.interpolates :prefix  do |attachment, style|
  "#{Date.today.to_s}/#{attachment.instance.image_file_name}"
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T21:57:40.300

如果您尝试分配变量，则您使用的是哈希语法。它应该如下所示：

```
 Paperclip.interpolates :prefix  do |attachment, style|
      today_date = Date.today.to_s
      "#{today_date}/#{attachment.instance.image_file_name}"
  end 
```

# django - 表单中捕获的 URL 参数

> ID：14990659
> 
> 赞同：2
> 
> 时间：2013-02-20T21:54:04.243
> 
> 标签：django, django-users

我正在使用 Userena，我正在尝试捕获 URL 参数并将它们带到我的表单中，但我不知道如何做到这一点。

我想在我的模板中做的是：

```
<a href="/accounts/signup/freeplan">Free Plan</a><br/>
<a href="/accounts/signup/proplan">Pro Plan</a><br/>
<a href="/accounts/signup/enterpriseplan">Enterprise Plan</a><br/> 
```

然后在我的 urls.py

```
url(r'^accounts/signup/(?P<planslug>.*)/$','userena.views.signup',{'signup_form':SignupFormExtra}), 
```

然后，理想情况下，我想在我的 forms.py 中使用该 planslug 在配置文件中设置用户计划。

我不知道如何将捕获的 URL 参数放入自定义表单中。我可以使用 extra_context，我是否必须覆盖 Userena 注册视图？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-07-16T12:25:07.473

如果你使用基于类的视图，你可以覆盖 FormMixin 类的 def get_form_kwargs() 方法。在这里，您可以将所需的任何参数传递给表单类。

在 urls.py 中：

```
url(r'^create/something/(?P<foo>.*)/$', MyCreateView.as_view(), name='my_create_view'), 
```

在views.py中：

```
class MyCreateView(CreateView):
    form_class = MyForm
    model = MyModel

    def get_form_kwargs(self):
        kwargs = super( MyCreateView, self).get_form_kwargs()
        # update the kwargs for the form init method with yours
        kwargs.update(self.kwargs)  # self.kwargs contains all url conf params
        return kwargs 
```

在forms.py中：

```
class MyForm(forms.ModelForm):

    def __init__(self, foo=None, *args, **kwargs)
        # we explicit define the foo keyword argument, cause otherwise kwargs will 
        # contain it and passes it on to the super class, who fails cause it's not
        # aware of a foo keyword argument.
        super(MyForm, self).__init__(*args, **kwargs)
        print foo  # prints the value of the foo url conf param 
```

希望这可以帮助 ：-）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T22:02:34.020

您可以使用以下方式访问模板中的网址 -

```
{% request.get_full_path %} 
```

（有关更多信息，请参阅[文档](https://docs.djangoproject.com/en/1.4/ref/request-response/#django.http.HttpRequest.get_full_path)）。

但是，如果您只想获取`planslug`变量，则将其从视图传递到模板并在模板中访问它（它在视图中可用，因为它是 url 中的命名参数） -

```
def signup(request, planslug=None):
    #
    render(request, 'your_template.html', {'planslug':planslug} 
```

然后在你的模板中你得到它 -

```
{% planslug %} 
```

如果您使用基于类的视图，那么您需要[覆盖 get_context_data](https://docs.djangoproject.com/en/1.4/topics/class-based-views/#adding-extra-context)以将`planslug`变量添加到您的上下文中，然后再将其传递给模板 -

```
def get_context_data(self, *args, **kwargs):
    context = super(get_context_data, self).get_context_data(*args, **kwargs)
    context['planslug'] = self.kwargs['planslug']
    return context 
```

# n-gram - ngram建模，如何进行交叉验证

> ID：14990660
> 
> 赞同：4
> 
> 时间：2013-02-20T21:54:08.820
> 
> 标签：n-gram, cross-validation

我试图了解交叉验证在 ngram 模型的上下文中是如何工作的。我知道该模型本质上列出了训练中语料库中每个 ngram 的概率。但是，交叉验证如何工作？我应该调整的参数是什么？我知道我想在验证集上获得 100% 的准确度，但我不确定我需要调整什么才能使其正常工作。它与平滑有关吗？

# sql - SQL Server 2008 中的复杂联接

> ID：14990669
> 
> 赞同：0
> 
> 时间：2013-02-20T21:54:46.657
> 
> 标签：sql, sql-server-2008-r2, left-join

我正在尝试为符合以下 ID（626、1985、2511）的所有申请人打印所有规则。

它打印具有 626 作为第一条规则的申请人，但不打印只有 1985 和 2511 而没有 626 的申请人）。任何想法？

```
select DISTINCT AD1.AppID,

MAX(CASE WHEN (APDR1.SETTINGID= 626) THEN APDR1.reviewruletext    ELSE ' ' END)AS 'Rule1',
MAX(CASE WHEN (APDR2.SETTINGID= 1985)THEN APDR2.reviewruletext    ELSE ' ' END)AS 'Rule2', 
MAX(CASE WHEN (APDR8.SETTINGID= 2511) THEN APDR8.reviewruletext    ELSE ' ' END)AS 'Rule8' 

from  appdetail  ad1

LEFT OUTER JOIN AppPartyDetailRule   APDR1 on
  apdr1.AppID=ad1.AppID AND 
 apdr1.AppDetailID= ad1.AppDetailID and
 apdr1.AppDetailSavePointID= AD1.AppDetailSavePointID AND
 ad1.AppDetailSavePointID=0 AND
 APDR1.SettingID= 626 

LEFT OUTER JOIN AppPartyDetailRule APDR2on
 ad1.appid= apdr2.appid and 
 ad1.appdetailID= apdr2.appdetailID and 
 ad1.appdetailsavepointid= apdr2.appdetailsavepointid and
 ad1.appdetailsavepointid= 0 AND
 APDR2.SettingID= 1985

LEFT OUTER JOIN AppPartyDetailRule APDR8 on
 ad1.appid= apdr8.appid and 
 ad1.appdetailID= apdr8.appdetailID and 
 ad1.appdetailsavepointid= apdr8.appdetailsavepointid and
 ad1.appdetailsavepointid= 0 AND
 APDR8.SettingID= 2511 

 group by AD1.AppID,....  etc. (more fields) 
```

***表结构为：
AppID、AppDetailID、AppDetailsavepointID 构成 AD1 表中的主键，该表使用上面的 PK 链接到 APDR 几次，每次它为 settingID 提取不同的值。***

***期望的输出是：AppID 审查规则文本1，审查规则文本2，审查规则文本8***

review Rule Text1代表626，2代表1985，8代表2511，每个代表某条规则

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:05:16.613

我认为您可以将查询简化为：

```
select AD1.AppID,
       MAX(CASE WHEN (APDR1.SETTINGID = 626) THEN APDR1.reviewruletext ELSE ''
           END) AS 'Rule1',
       MAX(CASE WHEN (APDR1.SETTINGID = 1985) THEN APDR1.reviewruletext ELSE ''
           END) AS 'Rule2',  
       MAX(CASE WHEN (APDR1.SETTINGID = 2511) THEN APDR1.reviewruletext ELSE ''
           END) AS 'Rule8'
from appdetail ad1 LEFT OUTER JOIN
     AppPartyDetailRule APDR1
     on apdr1.AppID=ad1.AppID AND 
        apdr1.AppDetailID= ad1.AppDetailID and
        apdr1.AppDetailSavePointID= AD1.AppDetailSavePointID AND
        ad1.AppDetailSavePointID=0
group by ad1.appID
where APDR1.SettingID in (626, 1985, 2511) 
```

# payment-gateway - 使用网络资源的 SOAP API 时出错

> ID：14990671
> 
> 赞同：4
> 
> 时间：2013-02-20T21:54:47.553
> 
> 标签：payment-gateway, soapui

我正在尝试使用基于 SOAP 的 Cyber​​source 支付网关服务。目前我正在尝试使用 Cyber​​source 提供的测试环境来测试样本测试信用卡交易。

1.  使用 WSDL 在 SOAP UI 中创建了一个项目：[https ://ics2wstest.ic3.com/commerce/1.x/transactionProcessor/Cyber​​SourceTransaction_1.80.wsdl](https://ics2wstest.ic3.com/commerce/1.x/transactionProcessor/CyberSourceTransaction_1.80.wsdl)

2.  SOAP UI 生成了测试方法 runTransaction。

3.  我将 Cyber​​source 文档中提供的相同 SOAP 消息复制到 SOAP UI 中作为 SOAP 消息，如下所示。

4.  当我发送此请求时，我收到以下错误：

如果有人以前曾从事过此工作或遇到过此问题，请提供指点。谢谢！

内存

**回复：**

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <soap:Fault xmlns:wsse="http://schemas.xmlsoap.org/ws/2002/04/secext" xmlns:c="urn:schemas-cybersource-com:transaction-data-1.0">
         <faultcode>soap:Client</faultcode>
         <faultstring>Element ():requestMessage not supported.</faultstring>
      </soap:Fault>
   </soap:Body>
</soap:Envelope> 
```

**SOAP 消息：**

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Header>
      <wsse:Security soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/ wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken>
            <wsse:Username>username</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wssusername-token-profile-1.0#PasswordText">TQc3LSaKfGWfgccqYX3mGhXfhBqnjyVzf5g1aeP3mDPFoMlFDfyKrKnhrqt2bHm3QeXTF1l+Aku/v4sFwIctcGtMNkwZDTMjxAAvuqnmedTa/Q9YxCS8OlhdYWOpJOAQGdyvT6bb0496RuzWN07kQZsPExY8BQDBpll6jpLvdQ6qbBK7MFSnO/2YbFaAaZIaFd+EGqePJXN/mDVp4/eYM8WgyUUN/IqsqeGuq3ZsebdB5dMXWX4CS7+/iwXAhy1wa0w2TBkNMyPEAC+6qeZ51Nr9D1jEJLw6WF1hY6kk4BAZ3K9PptvTj3pG7NY3TuRBmw8TFjwFAMGmWXqOku91Dg==</wsse:Password>
         </wsse:UsernameToken>
      </wsse:Security>
   </soapenv:Header>
   <soapenv:Body>
      <urn:requestMessage xmlns="urn:schemas-cybersource-com:transaction-data-1.80">
         <urn:merchantID>username</urn:merchantID>
         <urn:merchantReferenceCode>MRC-123</urn:merchantReferenceCode>
         <urn:billTo>
            <urn:firstName>John</urn:firstName>
            <urn:lastName>Doe</urn:lastName>
            <urn:street1>1295 Charleston Road</urn:street1>
            <urn:city>Mountain View</urn:city>
            <urn:state>CA</urn:state>
            <urn:postalCode>94043</urn:postalCode>
            <urn:country>US</urn:country>
            <urn:email>null@cybersource.com</urn:email>
         </urn:billTo>
         <urn:item id="0">
            <urn:unitPrice>5.00</urn:unitPrice>
            <urn:quantity>1</urn:quantity>
         </urn:item>
         <urn:item id="1">
            <urn:unitPrice>10.00</urn:unitPrice>
            <urn:quantity>2</urn:quantity>
         </urn:item>
         <urn:purchaseTotals>
            <urn:currency>USD</urn:currency>
         </urn:purchaseTotals>
         <urn:card>
            <urn:accountNumber>4111111111111111</urn:accountNumber>
            <urn:expirationMonth>11</urn:expirationMonth>
            <urn:expirationYear>2020</urn:expirationYear>
         </urn:card>
         <urn:ccAuthService run="true"/>
      </urn:requestMessage>
   </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:05:52.033

检查服务器上的时间。我最近遇到了完全相同的问题，结果发现服务器时间关闭了 15 分钟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:12:24.890

我遇到了同样的消息。

不幸的是，确切的错误可能是什么还没有定论，但我发现我的错误是由于安全标头格式错误。（从错误消息来看，这不是很直观。）

我没有立即看到您的 Security 标头有任何问题，但您可能会仔细检查您的命名空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-05T08:23:43.230

您是否将其添加为服务参考或 Web 参考，应将其添加为 Web 参考。您还需要从 Microsoft 安装 WSE 3.0 服务才能获得`TransactionProcessorWse`

# ruby - 为什么我的 to_s 方法在 ruby 中返回 0？

> ID：14990672
> 
> 赞同：0
> 
> 时间：2013-02-20T21:54:49.913
> 
> 标签：ruby

我正在尝试用 ruby​​ 构建一个相对简单的应用程序。但是，除了调用它的时间之外`0`，我无法让我的对象返回任何内容。`puts obj.to_s`我了解代码的质量可能很差（并且不介意任何提示）。

请帮忙！

```
class Docpart
  def Docpart.new(inputAsString,typeAsInteger)
@value = inputAsString
@type = typeAsInteger.to_i # 0 = title, 1 = text, 2 = equation (can't be done yet), 3 = table
  end

  def Docpart.to_s
return "Type is #{@type}, value is #{@value}"
  end
end

module Tests
  def Tests.test1()
filetree = Array.new(0) 
filetree.push( Docpart.new("Title",0))
filetree.each{|obj| puts obj.to_s}
return filetree[0]
  end
end

puts Tests.test1.to_s
gets.chomp 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T22:02:09.143

因为您定义了类方法`to_s`而不是实例一。用 Ruby 编写构造函数也有点不同。你需要这样写：

```
class Docpart
  def initialize(inputAsString,typeAsInteger)
    @value = inputAsString
    @type = typeAsInteger.to_i # 0 = title, 1 = text, 2 = equation (can't be done yet), 3 = table
  end

  def to_s
    "Type is #{@type}, value is #{@value}"
  end
end

module Tests
  def self.test1
    filetree = []
    filetree << Docpart.new("Title",0)

    filetree.each{ |obj| puts obj.to_s }

    filetree[0]
  end
end

puts Tests.test1.to_s
gets.chomp 
```

PS 阅读任何关于 Ruby 的书和​​任何风格指南，例如[Githubbers](https://github.com/styleguide/ruby)或[bbatsov one](https://github.com/bbatsov/ruby-style-guide)。

# php - 使用 php 插入值后，如何获取行的自动递增 ID？

> ID：14990674
> 
> 赞同：0
> 
> 时间：2013-02-20T21:54:58.763
> 
> 标签：php, insert, information-retrieval

我有一个 MySQL 数据库，并且正在使用 httpRequest 将它与我的 Android 应用程序连接起来。我有一个 php 文件，它将通过 httpPost 插入值，它插入的表具有自动递增的 id 以保持每一行唯一。

我想要做的是能够通过 php 插入值并获得插入行的 ID，然后我将其用于另一个插入查询。任何想法如何通过php做到这一点？

这是我当前的代码：

```
<?php

/*
 * Following code will insert an order request
 */

// array for JSON response
$response = array();

// check for required fields
if (isset($_POST['table_ID']) && isset($_POST['MenuBook']) && isset($_POST['order_status'])&& isset($_POST['order_date'])&& isset($_POST['order_receipt'])) {

    $tableID = $_POST['table_ID'];
    $menuBook = $_POST['MenuBook'];
    $order_status = $_POST['order_status'];
    $order_date = $_POST['order_date'];
    $order_receipt = $_POST['order_receipt'];

    // inlude db connect class
    require_once __DIR__ . '/DBConnect.php';

    // connecting to db
    $db = new DB_CONNECT();

    // mysql inserting a new row
    $result = mysql_query("INSERT INTO orderdb(table_ID,MenuBook,order_status,order_date,order_receipt) VALUES('$table_ID', '$menuBook', '$order_status','$order_date','$order_receipt')");

    // check if row inserted or not
    if ($result) {
        // successfully inserted into database
        $response["success"] = 1;
        $response["message"] = "Order successfully created.";

        // echoing JSON response
        echo json_encode($response);
    } else {
        // failed to insert row
        $response["success"] = 0;
        $response["message"] = "Oops! An error occurred.";

        // echoing JSON response
        echo json_encode($response);
    }
} else {
    // required field is missing
    $response["success"] = 0;
    $response["message"] = "Required field(s) is missing";

    // echoing JSON response
    echo json_encode($response);
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:57:53.020

在插入查询之后，使用[mysql-insert-id](http://php.net/manual/en/function.mysql-insert-id.php)。

```
<?php 
...
$result = mysql_query("INSERT INTO orderdb(table_ID,MenuBook,order_status,order_date,order_receipt) VALUES('$table_ID', '$menuBook', '$order_status','$order_date','$order_receipt')");
$last_ID = mysql_insert_id();
...
?> 
```

来自 mysql_insert_id() 的文档：

> 上一个查询成功时为 AUTO_INCREMENT 列生成的 ID，如果上一个查询没有生成 AUTO_INCREMENT 值，则为 0，如果没有建立 MySQL 连接，则为 FALSE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T22:07:20.303

您可以调用一个函数，该函数将在自动增量列上返回上一个查询的 id。通常，每当您插入或更新并需要 ID 时，您都会调用它。

MySQL: $id = mysql_insert_id(); // 返回最后插入的 id

[http://php.net/manual/en/function.mysql-insert-id.php](http://php.net/manual/en/function.mysql-insert-id.php)

MySQLi: $id = $mysqli->insert_id

[http://www.php.net/manual/en/mysqli.insert-id.php](http://www.php.net/manual/en/mysqli.insert-id.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T21:58:21.893

查询后，您可以使用`mysql_insert_id()` [http://php.net/manual/en/function.mysql-insert-id.php](http://php.net/manual/en/function.mysql-insert-id.php)

但是你使用的mysql驱动已经过时了，所以也许你应该使用mysqli或pdo。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T22:00:38.740

只需`mysql_insert_id`如下所示使用，尽管您确实应该转换为`mysqli`or `PDO`，它们都具有相似的功能。

```
// mysql inserting a new row
$result = mysql_query("INSERT INTO orderdb(table_ID,MenuBook,order_status,order_date,order_receipt) VALUES('$table_ID', '$menuBook', '$order_status','$order_date','$order_receipt')");

// check if row inserted or not
if ($result) {
    $insert_id = mysql_insert_id($db);

    // successfully inserted into database
    $response["success"] = 1;
    $response["message"] = "Order successfully created.";

    // echoing JSON response
    echo json_encode($response);
} else { 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-20T22:00:41.947

```
used_id = mysql_insert_id($db); 
```

请考虑迁移到 mysqli 模块，mysql_query 很危险，并为 sql 注入打开了大门。

# windows-phone-7 - 带有项目模板的枢轴控制适用于模拟器，但不适用于实际设备

> ID：14990677
> 
> 赞同：1
> 
> 时间：2013-02-20T21:55:10.860
> 
> 标签：windows-phone-7, windows-phone, windows-phone-7-emulator

当我对模拟器进行测试时，我的页面正常显示有问题。但是，当我在我的设备上运行它时，页面是空的！

我正在使用项目模板制作枢轴控件，在 Pivot.ItemTemplate 内我也有一个 ListBox 和 ListBox.ItemTemplate

下面的代码应生成一个标题为“PIVOT TEST”的页面，其中包含 3 个枢轴项：“枢轴 1”、“枢轴 2”、“枢轴 3”。在每个枢轴内，应该有一个列表。对于“pivot 1”，列表中应该有 3 个项目：“name 1”、“name 2”、“name 3”。对于“枢轴 2”，列表中应该有 2 个项目：“名称 1”、“名称 2”。对于“枢轴 3”，列表中应该有 1 项：“名称 1”

这是xaml：

```
...
<controls:Pivot x:Name="pivot" Title="PIVOT TEST">
    <controls:Pivot.HeaderTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding TitleText}" />
        </DataTemplate>
    </controls:Pivot.HeaderTemplate>
    <controls:Pivot.ItemTemplate>
        <DataTemplate>
            <ListBox ItemsSource="{Binding List}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <TextBlock Text="{Binding Name}" />
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </DataTemplate>
    </controls:Pivot.ItemTemplate>
</controls:Pivot>
... 
```

这是整个页面的代码：

```
public partial class PivotTest : PhoneApplicationPage {
    private List<RandomObject> randomObjectList 
        = new List<RandomObject>();

    public PivotTest() {
        InitializeComponent();

        randomObjectList.Add(new RandomObject() {
            Name = "name 1"
        });
        randomObjectList.Add(new RandomObject() {
            Name = "name 2"
        });
        randomObjectList.Add(new RandomObject() {
            Name = "name 3"
        });

        BindPivot();
    }

    private void BindPivot() {
        pivot.ItemsSource = new[] {
            new {
                TitleText = "pivot 1",
                List = randomObjectList
            },
            new {
                TitleText = "pivot 2",
                List = randomObjectList.Take(2).ToList()
            },
            new {
                TitleText = "pivot 3",
                List = randomObjectList.Take(1).ToList()
            }
        };
    }
} 
```

我也有一类只是为了将随机数据填充到列表框中：

```
public class RandomObject {
  public string Name { get; set; }
} 
```

在模拟器上运行它会得到预期的结果，如下所示：

![枢轴 1 屏幕截图](../Images/7ead117ad37918c9bb171c4db54f1185.png) ![枢轴 2 屏幕截图](../Images/3d44e4ff57837796878f492f04f86f64.png) ![枢轴 3 屏幕截图](../Images/f3ee7aada47d072824967997bd54850f.png)

但是，当我在设备上运行它时，根本没有任何显示！它是一个空页面，唯一显示的是顶部的“PIVOT TEST”，它是枢轴控件的标题，但没有枢轴项目，并且没有列表框。

上面的代码不需要任何添加，你可以做一个测试项目，复制/粘贴上面的代码来检查。

这可能是什么原因？

提前致谢！

编辑：忘了说这是一个 Windows Phone OS 7.1 项目。我不知道这是否重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:19:13.427

在尝试了一些事情后，我发现使用匿名类型是导致页面未在设备上显示的原因，但我不知道为什么。当我声明我的类型化类并使用那些而不是匿名类型时，页面在设备上显示得很好。

# ruby - 以服装推送自定义 Google Analytics 事件

> ID：14990678
> 
> 赞同：0
> 
> 时间：2013-02-20T21:55:14.210
> 
> 标签：ruby, google-analytics, google-analytics-api, garb-gem

我只是希望能够推送类似于在 JS API 中用于谷歌分析的自定义事件，对应的 GARB 代码是什么：

`_gaq.push(['_trackEvent', 'Videos', 'Play', 'Gone With the Wind']);`

这来自 Google Analytics 的事件文档：

[https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)

GARB 是 Google Analytics 的 ruby​​ 包装器：

[https://github.com/vigetlabs/garb](https://github.com/vigetlabs/garb)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:52:36.323

有点难找，但是有一个非常简单的 Ruby 库来处理 Google Analytics 的服务器端事件：

[https://github.com/hybridgroup/gabba](https://github.com/hybridgroup/gabba)

上面的等效代码是

Gabba::Gabba.new("your-id", "yourdomain.you").event("视频", "播放")

希望这个问题能帮助其他人更快地找到这个有用的库：P

# ios - iOS AFNetworking 发生故障

> ID：14990682
> 
> 赞同：-1
> 
> 时间：2013-02-20T21:55:20.577
> 
> 标签：ios, objective-c, django, facebook, facebook-ios-sdk

错误：在 /login_or_signup 中找不到 MultiValueDictKeyError 键“名称”

未提及任何行号或页面，仅提及 Django 设置文件中的页面（不是我的代码）

此 iOS 代码块失败

```
 //Now pass this to our login
    NSURL *url = [NSURL URLWithString:BASE_URL];
    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
    NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                            name, @"name",
                            email, @"email",
                            fbid, @"fbid",
                            nil];

    NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST" path:@"/login_or_signup/" parameters:params];
    NSLog(@"PARAMS %@", params);
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
//do something
}failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        // your failure code here
        NSLog(@"FAILED %@", JSON);
    }] 
```

登录或注册查看代码：

```
@csrf_exempt
def login_or_signup(request):

    user = False;
    username = False;
    email = "tmp@app.com"
    password = "tmppass"

    displayname = request.POST['name']
    fbid = request.POST['fbid']

    #Do we already have this user?

    if "email" in request.POST:
        email = request.POST['email']
        username = email
        try:
            user = User.objects.get(email=email)
        except User.DoesNotExist:
            pass

    if fbid and not user:
        username = fbid
        try:
            user_profile = UserProfile.objects.get(fbid=fbid)
            user = user_profile.user
        except UserProfile.DoesNotExist:
            pass

    if not user:
        user = User.objects.create_user(fbid, email, password)

    #tastypie api_key
    api = ApiKey.objects.get(user=user)

    #Update user_profile:
    user_profile = user.get_profile()
    user_profile.username = displayname
    user_profile.fbid = fbid
    user_profile.save()

    dic = list()
    dic.append({
        'username':user_profile.username, 
        'user_profile_id':user_profile.id,
        'fbid':fbid,
        'api_username':user.username,
        'api_key':api.key
    })
    return HttpResponse(simplejson.dumps(dic, cls=DjangoJSONEncoder), mimetype='application/json') 
```

一些方便的 iOS 代码

```
- (void)request:(FBRequest *)request didLoad:(id)result {

    //Loading details about this FB user.  Send the details to Web App and create and/or login this user.

    NSLog(@"FACEBOOK RESULT %@ ", result);

    NSString * fbid = [result objectForKey:@"id"];
    NSString * email = [result objectForKey:@"email"];
    NSString * name = [result objectForKey:@"name"];

    [self loginOrSignup:name email:email fbid:fbid];
} 
```

另请注意，上面的 NSLog 确实有效，我可以看到 id、电子邮件、姓名等。

它被发送到 loginorsignup iOS 方法，该方法通过 AFNetworking 联系 url

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:11:26.963

尝试在您的包含中添加引号：

```
urlpatterns = patterns('',    
    url(r'^admin/', include(admin.site.urls)),        
    url(r'^upload/', 'image.views.upload_file'),
    url(r'^login_or_signup', 'image.views.login_or_signup'),  
    url(r'^api/', include('v1_api.urls')) // mark the quotes
) 
```

`from django.contrib import admin`如果您的 urls.py 顶部没有引号，请在 admin.site.urls 上使用引号

# matlab - 同一网络上两台计算机之间的 TCP/IP Matlab

> ID：14990686
> 
> 赞同：0
> 
> 时间：2013-02-20T21:55:31.903
> 
> 标签：matlab, networking, tcp

我正在尝试使用 Matlab 中的 TCP 将一些数据从一台计算机发送到同一网络上的另一台计算机。

目前这是我设置打开连接的方法。我正在尝试模拟点对点连接，因为它们需要相互发送和接收数据。当我使用 IPv4 和 IPv6 运行它时，它在我的本地计算机上运行良好。

```
 %code starts in one file
 openRecieve('0.0.0.0', 3000); %accept all connections
 openSend('10.32.41.235',3000); 
```

然后我在另一个文件中做同样的事情，我可以在我的机器上并行运行它们：

```
%code starts in other file
openSend('10.32.41.235',3000); %IPv4 of PC
openRecieve('0.0.0.0', 3000); %accept all connections 
```

IP 是伪造的......当在打开 2 个不同的 matlab 实例的情况下运行时，此代码在我的机器上工作。但是，它在两台不同的计算机之间不起作用。

openReceive 的代码：

```
function connectionServer = openRecieve(client, port)
t = tcpip('0.0.0.0', port, 'NetworkRole', 'Server');
set(t, 'InputBufferSize', 3000000); 
% Open connection to the client.
fopen(t);
fprintf('%s \n','Client Connected');
connectionServer = t;
set(connectionServer,'Timeout',.1);
end 
```

openSend 的代码：

```
function connectionSend = openSend(host, port)
d = tcpip(host, port, 'NetworkRole', 'Client');
set(d, 'OutputBufferSize', 3000000); % Set size of receiving buffer, if needed. 

%Trying to open a connection to the server.
while(1)
    try 
        fopen(d);
        break;
    catch 
        fprintf('%s \n','Cant find Server');
    end
end
connectionSend = d;
end 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T14:33:29.883

它现在正在运行，尽管我唯一更改的是从 3000 和 3000 到 3000 和 3001 的端口号............同样只使用 IPv4 是非常关键的，因为我的网络不允许使用 IPv6。

对于任何尝试在 Matlab 中编写 TCP 代码的人，如果您不关心谁在连接，只需使用“0.0.0.0”进行连接，因为它将接受所有尝试在该端口上连接的 IP #。

第一个文件的当前代码：

```
sConec = openSend('10.234.24.124', 3000); %IPv4 Address of comp your trying to connect to
rConec = openRecieve('0.0.0.0', 3001); %Accept all connections 
```

第二个文件的当前代码：

```
rConec = openRecieve('0.0.0.0', 3000); %Accept all connections
sConec = openSend('10.109.22.142', 3001); %IPv4 Address of computer your trying to connect to 
```

# ios - NSOutputStream/NSInputStream 相关性

> ID：14990688
> 
> 赞同：2
> 
> 时间：2013-02-20T21:55:39.243
> 
> 标签：ios, objective-c, bluetooth, nsstream

`NSOutputStream`关联通过 / 发送/接收的请求/响应的最佳方法是什么`NSInputStream`？

本质上，我正在与蓝牙设备进行通信，并已`NSStream`安排好从设备发送和接收命令。我想发出一个命令并等待响应将结果返回给调用者。

有推荐的方法吗？Apple 演示有一个通用的接收字节处理程序，但它与发出的请求无关。

谢谢！

# algorithm - 运行时间是多少：T(n) = 2T(n-1) + 3T(n-2)+ 1

> ID：14990689
> 
> 赞同：1
> 
> 时间：2013-02-20T21:55:47.747
> 
> 标签：algorithm, math, big-o, time-complexity, recurrence

我知道它类似于具有指数运行时间的斐波那契数列。然而，这种递归关系有更多的分支。的渐近界是`T(n) = 2T(n-1) + 3T(n-2)+ 1`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:04:35.177

通常，您需要对 T(0) 和 T(1) 做出一些假设，因为它们的数量会成倍增加，并且它们的值可能会决定 T(n) 的函数形式。但是在这种情况下，这似乎并不重要。

然后，这种形式的递推关系可以通过找到它们的特征多项式来解决。我发现这篇文章： http: [//www.wikihow.com/Solve-Recurrence-Relations](http://www.wikihow.com/Solve-Recurrence-Relations)

我得到了根为 3 和 1 的特征多项式，因此猜到了形式`T(n) = c_1*3^n + c_2`。特别是，`T(n) = 1/2*3^n - 1/4`满足递归关系，我们可以验证这一点。

```
1/2*3^n - 1/4 = 2*T(n-1) + 3*T(n-2) + 1
              = 2*(1/2*3^(n-1) - 1/4) + 3*(1/2*3^(n-2) - 1/4) + 1
              = 3^(n-1) - 1/2 + 1/2*3^(n-1) - 3/4 + 1
              = 3/2*3^(n-1) - 1/4
              = 1/2*3^n - 1/4 
```

因此它会给出那个`T(n) = Theta(3^n)`。但是，这可能不是满足递归的唯一函数，其他可能性也取决于您定义的值`T(0)`和`T(1)`，但它们都应该是`O(3^n)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-16T09:28:15.237

这种类型的递归称为：[非齐次递归关系](https://en.wikipedia.org/wiki/Recurrence_relation#Solving_non-homogeneous_recurrence_relations)，您必须在一开始就解决齐次递归（最后没有常数的递归）。如果您有兴趣，请阅读其背后的数学。

我会告诉你一个简单的方法。只需在[wolfram-alpha](http://www.wolframalpha.com/input/?i=T%28n%29%20%3D%202T%28n-1%29%20%2B%203T%28n-2%29%20%2B%201)中输入您的方程，您将得到：

[![在此处输入图像描述](../Images/5252472751a1d954a09e891579a64763.png)](https://i.stack.imgur.com/wm2XX.png),

这显然是指数级的复杂性：`O(3^n)`

# java - 从特定端口获取数据

> ID：14990690
> 
> 赞同：-1
> 
> 时间：2013-02-20T21:55:58.160
> 
> 标签：java, methods, serial-port

这是方法，我想从此方法中获取变量数据以在另一个方法中使用它。

```
 public synchronized void serialEvent(SerialPortEvent oEvent) {
    if (oEvent.getEventType() == SerialPortEvent.DATA_AVAILABLE) {
        try {
            int available = input.available();
            byte chunk[] = new byte[available];
            input.read(chunk, 0, available);

            // Displayed results are codepage dependent

            data =new String(chunk);

        } catch (Exception e) {
            System.err.println(e.toString());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:08:43.820

这取决于您要实现的目标，最简单的方法是`processData`直接从中调用另一个方法（说它的名称）`serialEvent`并将您从`COM`端口收到的数据传递给它，例如`processData(new String(chunk));`

这种方法的问题是，如果你的方法`processData`做一些繁重的事情，它会阻塞`serialEvent`.

另一种方法是单独`thread`处理该数据，您可以将其与`concurrent.BlockingQueue`. 所以在里面`serialEvent`你只需将数据推送到队列并继续而不等待`processData`完成。

只需使用 BlockingQueue 搜索 Producer/Consumer 模式，您就会发现大量代码示例。

# jsf - 数据表中的 JSF PrimeFaces inputText

> ID：14990692
> 
> 赞同：3
> 
> 时间：2013-02-20T21:56:12.913
> 
> 标签：jsf, jsf-2, primefaces

*JSF-2.0、Mojarra 2.1.19、PrimeFaces 3.4.1*

***问题总结**：有一个`p:inputText`inside`p:dataTable`和 inputText 动作，通过`p:remoteCommand`它传递 dataTable 行索引作为参数`f:setPropertyActionListener`。但它总是通过 dataTable 的最后一行，而不是包含当前 clicked 的行的索引`p:inputText`。*

* * *

从我之前的问题可以看出，我正在尝试`p:inputText`用作 Facebook 等状态的评论接受者。实现包括`p:dataTable`. 它的行代表每个状态。看起来像：

```
<p:dataTable id="dataTable" value="#{statusBean.statusList}" var="status"
                     rowIndexVar="indexStatusList">
    <p:column>
        <p:panel id="statusRepeatPanel">
            <p:remoteCommand name="test" action="#{statusBean.insertComment}"
                update="statusRepeatPanel">
                <f:setPropertyActionListener 
                    target="#{statusBean.indexStatusList}"
                    value="#{indexStatusList}">
                </f:setPropertyActionListener>
            </p:remoteCommand>
            <p:inputText id="commentInput" value="#{statusBean.newComment}"
                onkeypress="if (event.keyCode == 13) { test(); return false; }">
            </p:inputText>
        </p:panel>
    </p:column>
</p:dataTable> 
```

上面的代码说当按下回车键时，`p:remoteCommand`调用托管bean的插入方法的触发。

```
@ManagedBean
@ViewScoped
public class StatusBean {
    List<Status> statusList = new ArrayList<Status>();
    public int indexStatusList;
    public String newComment
    //getters and setters
    public void insertComment() {
        long statusID = findStatusID(statusList.get(indexStatusList));
        statusDao.insert(this.newComment,statusID)
    } 
```

一起调试吧；假设图中显示了*三个*状态，在*第二个*`p:dataTable`状态（索引为1）中单击`p:inputText`其中，输入“relax”并按回车键。

 *在调试控制台中，它正确显示“放松”，但它发现了错误的状态，因为**它**的`indexStatusList`值 2 属于. 它必须是 1，这是在 dataTable 行上单击的索引。 **`p:statusList``p:inputText`**

 **我认为问题在于`p:remoteCommand`屏幕上的最后一个索引。

* * *

**这个怎么运作？**

让我们想象有一个`p:commandLink`代替`p:remoteCommand`and `p:inputText`：

```
<p:commandLink action=#{statusBean.insertComment>
      <f:setPropertyActionListener target="#{statusBean.indexStatusList}"
          value="#{indexStatusList}"></f:setPropertyActionListener> 
```

这个组件成功地传递了`indexStatusList`当前点击的那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:28:02.460

此解决方案中的概念问题在于工作方式`p:remoteCommand`。它创建 JavaScript 函数，其名称在 的`name`属性中定义`p:remoteCommand`。当您将其放入`dataTable`时，它将迭代并创建 JavaScript 函数，该函数被调用`test`的次数与该表中的行数一样多，最后最后一个将只有一个。因此，解决方案可以是在名称处附加索引，`remoteCommand`但这很糟糕，因为您将拥有许多不必要的 JavaScript 函数。更好的方法是创建一个函数作为传递参数。所以`remoteCommand`在数据表之外定义：

```
<p:remoteCommand name="test" action="#{statusBean.insertComment}" update="statusRepeatPanel"> 
```

`test`并在您的`onkeypress`事件中调用这样的函数：

```
test([{ name: 'rowNumber', value: #{indexStatusList} }]) 
```

这将`rowNumber`在您的 AJAX 请求中传递参数。在支持 bean 的`insertComment()`方法中，您可以读取此参数并使用它做任何您想做的事情：

```
FacesContext context = FacesContext.getCurrentInstance();
Map map = context.getExternalContext().getRequestParameterMap();
Integer rowNumber = Integer.parseInt(map.get("rowNumber").toString()); 
```

注意：当您在每一行中更新面板时，也许您可​​以将`update`属性更改为`remoteCommand`，`@parent`这样这将适用于所有行。

编辑：您可以使用 Java 方法中的以下代码更新特定行中的特定面板：

```
RequestContext.getCurrentinstance().update("form:dataTable:" + rowNumber + ":statusRepeatPanel") 
```***

# eclipse - Eclipse：“声明的包与预期的包不匹配”，但 buildpath 确实定义了声明的包

> ID：14990697
> 
> 赞同：4
> 
> 时间：2013-02-20T21:56:41.113
> 
> 标签：eclipse, maven, buildpath

在一个名为 的 maven 项目`my-project`中，eclipse 一直在告诉我

**声明的包“com.myself”与预期的包“main.java.com.myself”不匹配**

虽然我验证了在项目的构建路径中，我有一个条目：

```
my-project/src/main/java
    Included: **/*.java
    Excluded: (None)
    Native library location: (None)
    Ignore optional compile problems: No 
```

**那可能是什么问题？**

**解决问题的最简单方法是什么？**

我怀疑eclipse设置文件有问题，因为在将项目导入工作区并将其转换为maven项目后，我不得不手动更改文件夹结构以获得maven web项目的常规文件夹结构。但可能是在这些更改期间，eclipse 无法正确理解某些内容。

此外，maven 能够构建我的项目（从 eclipse 中以及从命令行）。

我只是从 Eclipse 中得到那些编译错误。

PS我已经尝试过项目>清洁，但没有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-15T03:09:49.430

将 my-project/src/main/java 设置为源文件夹（项目 -> 属性 -> Java 构建路径 -> 项目 -> 添加文件夹）。删除旧的源文件夹。

如有必要，重新启动 eclipse。

简单来说，Eclipse 认为你的项目是从 my-project/src 开始的。因此，它期望所有包都从那里下降，从 main.java 开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-30T19:11:22.627

看起来该项目仍然不是 maven 性质...

按照步骤：

```
Right Click on the project folder -> Maven -> Update Project... 
```

或者，打开`command prompt`，转到根项目目录，然后键入以下命令：

```
mvn eclipse:clean eclipse:eclipse 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T22:26:24.767

1.  我将项目文件夹复制到我的 Eclipse 工作区之外的某个地方。
2.  然后我从 Eclipse 项目资源管理器和工作区中删除了该项目。
3.  现在我创建了一个新的同名java项目，并导入了我在（1）保存的原始项目。
4.  呸呸！没有编译错误。

# ruby-on-rails - 从 Rails 中的任务调用控制器方法

> ID：14990707
> 
> 赞同：0
> 
> 时间：2013-02-20T21:57:34.447
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试在 Rails 中创建一个调用我的控制器方法之一的任务。我在 SO 上发现了类似的问题（包括[几乎提出完全相同的问题的问题](https://stackoverflow.com/questions/2506896/how-can-i-call-a-controller-action-from-a-rake-task)），但答案几乎总是“将您的代码移动到模型中”。

我认为这不适用于我的情况，但也许我错了。

我的控制器中有一个方法，它使用 Instagram 的 API 获取一些数据，然后调用模型中的方法来存储数据。对我来说，这似乎是一种合乎逻辑的分离。但现在我想创建一个任务，在我的控制器中调用 fetch 方法。

1.  是否可以从任务中调用我的控制器中的 fetch 方法？
2.  可以通过 RESTful URL 访问 fetch 方法。我可以/应该从任务中调用它吗？
3.  我的获取代码应该移动到我的模型中吗？如果是这样，为什么？它似乎与数据库活动没有直接关系。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:00:11.810

您可以移动代码而不将其放在模型上：考虑将与 Instagram API 的任何交互封装到一个单独的类中，然后您的控制器和您的任务可以重用该类。

# spring - moxy cxf spring 继承

> ID：14990709
> 
> 赞同：2
> 
> 时间：2013-02-20T21:57:41.540
> 
> 标签：spring, inheritance, cxf, eclipselink, moxy

我有一个堆栈跟踪试图将继承与 moxy 一起使用，有人可以提供一些建议。下面是 Java 代码和堆栈错误的一些摘要。提前致谢！！！

**业务对象**

```
public abstract class ContactInfo {

} 
```

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name="address")
public class Address extends ContactInfo {

    private String street;

    public String getStreet() {
        return street;
    }

    public void setStreet(String street) {
        this.street = street;
    }

} 
```

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name="phonenumber")
public class PhoneNumber extends ContactInfo {

} 
```

```
import javax.xml.bind.annotation.XmlElementRef;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name="customer")
public class Customer {

    private ContactInfo contactInfo;

    @XmlElementRef
    public ContactInfo getContactInfo() {
        return contactInfo;
    }

    public void setContactInfo(ContactInfo contactInfo) {
        this.contactInfo = contactInfo;
    }

} 
```

**CXF 网络服务**

```
import javax.ws.rs.Consumes;

import javax.ws.rs.POST;

import javax.ws.rs.Path;

import javax.ws.rs.Produces;

import javax.ws.rs.core.MediaType;

import packagename.payment.ContactInfo;

import packagename.payment.Payment;

import packagename.payment.PaymentResponse;

@Path("/payment/")
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public interface PaymentServerRest {

    @POST
    @Path("aja1/")
    public PaymentResponse aja1(Customer customer);

}

import java.util.ArrayList;
import java.util.List;

import javax.ws.rs.Consumes;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

import packagename.payment.server.PaymentServerRest;

import packagename.payment.Address;

import packagename.payment.ContactInfo;

import packagename.payment.Customer;

import packagename.payment.PaymentResponse;

import packagename.payment.PhoneNumber;

@Path("/payment/")
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public class PaymentServerRestImpl implements PaymentServerRest {

    @Override
    @POST
    @Path("aja1/")
    public PaymentResponse aja1(Customer customer) {
        if (customer.getContactInfo() instanceof Address) {
            System.out.println("aja Address");
        } else if (customer.getContactInfo() instanceof PhoneNumber) {
            System.out.println("aja PhoneNumber");
        }
        return null;
    }

} 
```

**客户端网络服务**

```
import packagename.payment.server.PaymentServerRest;
import packagename.payment.Customer;
import packagename.payment.Payment;
import packagename.payment.PaymentResponse;

public class PaymentClientRest  {

    private static PaymentServerRest server = createClientServer(PaymentServerRest.class, "paymentrest/");

    public static PaymentResponse aja1(Customer customer) {
        try {
            return server.aja1(customer);
        } catch (Exception e) {
            return null;
        }

    }

} 
```

**测试用例**

```
import org.junit.Test;

import packagename.payment.Address;
import packagename.payment.Customer;
import packagename.payment.Payment;

public class PaymentClientRestTest {

    @Test
    public void testAja1() {
        Customer customer = new Customer();
        customer.setContactInfo(new Address());

        System.out.println(PaymentClientRest.aja1(customer));

        customer = new Customer();
        customer.setContactInfo(new PhoneNumber());

        System.out.println(PaymentClientRest.aja1(customer));

    }

} 
```

**spring 配置 beans.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jaxrs="http://cxf.apache.org/jaxrs"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://cxf.apache.org/jaxrs
        http://cxf.apache.org/schemas/jaxrs.xsd
        http://www.springframework.org/schema/util
        http://www.springframework.org/schema/util/spring-util.xsd">
    <import resource="classpath:META-INF/cxf/cxf.xml" />
    <!-- <import resource="classpath:META-INF/cxf/cxf-extension-jaxrs-binding.xml" /> -->
    <import resource="classpath:META-INF/cxf/cxf-servlet.xml" />

    <util:map id="jsonNamespaceMap" map-class="java.util.Hashtable">
        <entry key="http://localhost:8080/servicepath/paymentrest" value="payments"/>
       </util:map>

    <bean id="jsonMoxyProvider" class="org.eclipse.persistence.jaxb.rs.MOXyJsonProvider">
        <property name="attributePrefix" value="@" />
        <property name="formattedOutput" value="true" />
        <property name="includeRoot" value="true" />
        <property name="marshalEmptyCollections" value="false" />
        <property name="valueWrapper" value="$" />
        <!-- property name="namespaceSeparator" value="" /--> <!-- by default is point -->
        <property name="namespacePrefixMapper" ref="jsonNamespaceMap" />
    </bean>

     <!-- Payment RestFul service -->
    <jaxrs:server id="paymentrest" address="/paymentrest">
        <jaxrs:serviceBeans>
            <ref bean="paymentServerRest" />
        </jaxrs:serviceBeans>
        <jaxrs:providers>
            <ref bean="jsonMoxyProvider"/>
        </jaxrs:providers>
    </jaxrs:server>

    <bean id="paymentServerRest"
        class="packagename.payment.server.impl.PaymentServerRestImpl" />

</beans> 
```

**例外**

```
16:29:27.098 [Main Thread] ERROR o.a.cxf.jaxrs.client.AbstractClient - .Problem with writing the request message, class : class packagename.payment.Customer, ContentType : application/json.
org.apache.cxf.jaxrs.client.ClientWebApplicationException: org.apache.cxf.interceptor.Fault: .Problem with writing the request message, class : class packagename.payment.Customer, ContentType : application/json.
    at org.apache.cxf.jaxrs.client.AbstractClient.checkClientException(AbstractClient.java:501)
    at org.apache.cxf.jaxrs.client.AbstractClient.preProcessResult(AbstractClient.java:488)
    at org.apache.cxf.jaxrs.client.ClientProxyImpl.doChainedInvocation(ClientProxyImpl.java:531)
    at org.apache.cxf.jaxrs.client.ClientProxyImpl.invoke(ClientProxyImpl.java:205)
    at $Proxy13.aja1(Unknown Source)
    packagename.payment.client.PaymentClientRest.aja1(PaymentClientRest.java:61)
    packagename.payment.client.PaymentClientRestTest.testAja1(PaymentClientRestTest.java:100)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:21)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:232)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:61)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:223)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:684)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.apache.cxf.interceptor.Fault: .Problem with writing the request message, class : class packagename.payment.Customer, ContentType : application/json.
    at org.apache.cxf.jaxrs.client.ClientProxyImpl$BodyWriter.handleMessage(ClientProxyImpl.java:649)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:262)
    at org.apache.cxf.jaxrs.client.ClientProxyImpl.doChainedInvocation(ClientProxyImpl.java:526)
    ... 27 more
Caused by: org.apache.cxf.jaxrs.client.ClientWebApplicationException: .Problem with writing the request message, class : class packagename.payment.Customer, ContentType : application/json.
    at org.apache.cxf.jaxrs.client.AbstractClient.reportMessageHandlerProblem(AbstractClient.java:611)
    at org.apache.cxf.jaxrs.client.AbstractClient.writeBody(AbstractClient.java:406)
    at org.apache.cxf.jaxrs.client.ClientProxyImpl$BodyWriter.handleMessage(ClientProxyImpl.java:640)
    ... 29 more
**Caused by: javax.ws.rs.WebApplicationException: com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 1 counts of IllegalAnnotationExceptions
Invalid @XmlElementRef : Type "class packagename.payment.ContactInfo" or any of its subclasses are not known to this context.
    this problem is related to the following location:
        at public packagename.payment.ContactInfo packagename.payment.Customer.getContactInfo()
        at packagename.payment.Customer**

    at org.apache.cxf.jaxrs.provider.AbstractJAXBProvider.handleExceptionEnd(AbstractJAXBProvider.java:585)
    at org.apache.cxf.jaxrs.provider.AbstractJAXBProvider.handleJAXBException(AbstractJAXBProvider.java:597)
    at org.apache.cxf.jaxrs.provider.json.JSONProvider.writeTo(JSONProvider.java:361)
    at org.apache.cxf.jaxrs.client.AbstractClient.writeBody(AbstractClient.java:401)
    ... 30 more
Caused by: com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 1 counts of IllegalAnnotationExceptions
Invalid @XmlElementRef : Type "class packagename.payment.ContactInfo" or any of its subclasses are not known to this context.
    this problem is related to the following location:
        at public packagename.payment.ContactInfo packagename.payment.Customer.getContactInfo()
        at packagename.payment.Customer

    at com.sun.xml.bind.v2.runtime.IllegalAnnotationsException$Builder.check(IllegalAnnotationsException.java:106)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getTypeInfoSet(JAXBContextImpl.java:466)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:298)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:141)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImpl.java:1163)
    at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:145)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:203)
    at javax.xml.bind.ContextFinder.find(ContextFinder.java:363)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:574)
    at org.apache.cxf.jaxrs.provider.AbstractJAXBProvider.getClassContext(AbstractJAXBProvider.java:425)
    at org.apache.cxf.jaxrs.provider.AbstractJAXBProvider.getJAXBContext(AbstractJAXBProvider.java:409)
    at org.apache.cxf.jaxrs.provider.AbstractJAXBProvider.createMarshaller(AbstractJAXBProvider.java:510)
    at org.apache.cxf.jaxrs.provider.json.JSONProvider.marshal(JSONProvider.java:508)
    at org.apache.cxf.jaxrs.provider.json.JSONProvider.writeTo(JSONProvider.java:357)
    ... 31 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:44:03.060

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

我会帮助你解决这个问题。

**JSON 提供程序**

第一个问题是它似乎`MOXyJsonProvider`没有被选中，并且 CXF 默认为默认的基于 JAXB 的 JSON 绑定。这会导致抛出 JAXB Ri 异常。

> **引起：javax.ws.rs.WebApplicationException：com.sun.xml.bind.v2.runtime.IllegalAnnotationsException：1 个 IllegalAnnotationExceptions 计数无效 @XmlElementRef：类型“class packagename.payment.ContactInfo”或其任何子类未知在这种情况下。此问题与以下位置有关：在 public packagename.payment.ContactInfo packagename.payment.Customer.getContactInfo() at packagename.payment.Customer**
> 
> ```
> at org.apache.cxf.jaxrs.provider.AbstractJAXBProvider.handleExceptionEnd(AbstractJAXBProvider.java:585)
> at org.apache.cxf.jaxrs.provider.AbstractJAXBProvider.handleJAXBException(AbstractJAXBProvider.java:597)
> at org.apache.cxf.jaxrs.provider.json.JSONProvider.writeTo(JSONProvider.java:361)
> at org.apache.cxf.jaxrs.client.AbstractClient.writeBody(AbstractClient.java:401)
> ... 30 more 
> ```

**子类**

您需要让 MOXy 知道子类。一种方法是通过`@XmlSeeAlso`注释。

```
@XmlSeeAlso({PhoneNumber.class, Address.class})
public abstract class ContactInfo {

} 
```

* * *

**更新**

我在 EclipseLink 2.4.2 和 2.5.0 流中签入了一个修复程序，`MOXyJsonProvider`以修复在 RESTEasy 中运行时出现的问题。这可能与您在 CXF 中看到的问题有关，也可能无关。从 2013 年 2 月 22 日开始，该修复程序将在夜间版本中提供，地址如下：

*   [http://www.eclipse.org/eclipselink/downloads/nightly.php](http://www.eclipse.org/eclipselink/downloads/nightly.php)

# mysql - 在自身 sql 上留下连接表

> ID：14990713
> 
> 赞同：4
> 
> 时间：2013-02-20T21:57:48.890
> 
> 标签：mysql, sql, join, left-join

我在这里有一个简单的 sql 问题，我看到一些这样的查询：

```
SELECT 
    users.id, users.username, users.password
FROM
    users AS User
        LEFT JOIN
    users AS User0 ON ...
        LEFT JOIN
    users AS User1 ON ...
        LEFT JOIN
    users AS User2 ON ...
WHERE
    ...
ORDER BY ... DESC 
```

其中，正如您在上面看到的，同一张表`users`被左连接了 3 次。我的问题是，为什么有人想自己加入一张桌子？这样做的目的究竟是什么？

如果可能的话，请用清晰的例子给我最好的解释

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T22:00:23.903

这通常在您有层次结构时完成。

假设每个员工都有一个经理的员工表 - 经理用一个`ManagerId`字段表示，该字段是经理的员工 ID。

如果您想查看每个员工、他们的经理、经理的经理等，自联接将是编写查询的方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T22:02:14.377

假设您要跟踪用户，以及将他们引荐到您网站的用户。您可以设计一个用于存储用户的表，如下所示：

```
create table users (
    id int unsigned primary key auto_increment,
    name varchar(100),
    ...
    referredby int unsigned
); 
```

如果您想同时查看用户和推荐人，您需要将用户的被推荐人列加入到推荐人的 id 列。IE：

```
SELECT u.name user, r.name referrer
    FROM users u LEFT JOIN users r ON u.referredby = r.id 
```

所以这就是为什么你会这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T22:05:21.543

如果您有层次关系，则可以将表连接到自身，这是一个示例模式和查询：

```
CREATE TABLE category (
      id int NOT NULL auto_increment,
          primary key(id),
      category_name varchar(64) NOT NULL,
      parent_category_id int DEFAULT NULL,
          foreign key(parent_category_id) references category(id)
) engine=innodb; 
```

假设您有一家商店，其中包含产品可以包含的各种类别。假设在此示例中您正在浏览类别，并且您希望在其父类别下显示所有类别：

```
 SELECT parent_category.id AS parent_category_id, 
        parent_category.category_name AS parent_category_name,
        child_category.id AS category_id,
        child_category.category_name AS category_name
 FROM
        category AS parent_category
        LEFT OUTER JOIN category AS child_category ON child_category.parent_category_id = parent_category.id; 
```

在这种情况下，您将获得所有子类别及其有关父类别的信息。这种模式通常用于在关系数据库中存储层次结构。

# sql - 从不同表的另一列中的一列中搜索值

> ID：14990718
> 
> 赞同：1
> 
> 时间：2013-02-20T21:58:19.170
> 
> 标签：sql, oracle, oracle10g

我需要用另一个表的列值从一个表中搜索列值。

例如

```
 MyTable
    Col1 Col2
    AAA   1
    BBB   2
    CCC   3

  MyTable2
    Col1          Col2
    GHKGH AAAh      1
    dhsjsBvd        2
    bdnd CCC b      3 
```

我需要在 MyTable2 的 col1 值中搜索来自 MyTable 的 col1 值。

我不想对字符串进行硬编码，而是从表中获取值。

尝试使用`instr`and `regex_instr`，但这些函数不允许搜索模式中的列值。

我正在使用oracle 10g。TIA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T22:06:14.040

此处测试示例：[http ://sqlfiddle.com/#!4/037ffe/3](http://sqlfiddle.com/#!4/037ffe/3)

```
select 
  t1.col1 AS t1col1, t2.col1 AS t2col1
from 
  MyTable t1

  left join MyTable2 t2
  on t2.col1 like '%' || t1.col1 || '%' 
```

* * *

包含 DDL 的完整示例：

```
CREATE TABLE MyTable (col1 varchar2(9));

INSERT ALL 
    INTO MyTable (col1)
         VALUES ('AAA')
    INTO MyTable (col1)
         VALUES ('BBB')
    INTO MyTable (col1)
         VALUES ('CCC')
SELECT * FROM dual;

CREATE TABLE MyTable2 (col1 varchar2(18));

INSERT ALL 
    INTO MyTable2 (col1)
         VALUES ('GHKGH AAAh')
    INTO MyTable2 (col1)
         VALUES ('dhsjsBvd')
    INTO MyTable2 (col1)
         VALUES ('bdnd CCC b')
SELECT * FROM dual;

select 
  t1.col1 AS t1col1, t2.col1 AS t2col1
from 
  MyTable t1

  left join MyTable2 t2
  on t2.col1 like '%' || t1.col1 || '%' 
```

结果集：

```
T1COL1 T2COL1
AAA GHKGH AAAh
BBB（空）
CCC bdnd CCC b

```

# database - 如何为数据库项目创建msi安装包？

> ID：14990723
> 
> 赞同：0
> 
> 时间：2013-02-20T21:58:40.793
> 
> 标签：database, visual-studio-2010, windows-installer, project

我正在创建数据库项目，需要创建一个 MSI 安装程序包。我正在使用VS2010。我环顾四周，大多数都在使用 wix 包。但我正在寻找使用 MSI 安装程序的更标准的东西。有人研究过它并且可以帮助我开始吗？不过，我之前从未构建过 MSI 包..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:05:16.617

我不认为 Visual Studio 安装程序项目具有开箱即用的 Sql 数据库安装功能。您仍然需要编写自己的自定义操作来执行创建数据库和所有必需对象（表、视图、SP、用户、权限等）的脚本。虽然[`Wix`](http://wix.sourceforge.net/)学习曲线陡峭，但我认为值得投入时间和精力在里面，因为它很强大，从长远来看会帮助你。具有类似或为此目的设计的`Wix`特殊元素。一些可能对您有帮助的资源：`SqlDatabase``SqlScript`

*   [VS 数据库指南](http://vsdatabaseguide.codeplex.com/)；
*   [Wix DB安装的代码项目文章](http://www.codeproject.com/Articles/331368/WIXDataBase)；
*   [快速教程
    `SqlDatabase`和`SqlScript`](http://wix.tramontana.co.hu/tutorial/sql/creating-a-database)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:08:25.530

您是否考虑过创建一个 .dacpac 并使用命令行部署它？

# python - 相互检查字符串（Anagrams）

> ID：14990725
> 
> 赞同：13
> 
> 时间：2013-02-20T21:58:44.883
> 
> 标签：python, anagram

任务是编写一个程序，从用户那里接受两组单词，然后如果这两个单词是字谜（或者至少如果一个单词的所有字母都出现在另一个单词中），则打印一个“True”语句和一个“False”语句如果没有，则声明。

作为一个整体编程的新手，我不知道如何超越仅仅索引一个字符串并将所有部分相互比较。我强调我是初学者；我已经阅读了许多用 Python 和 Anagram 标记的其他帖子，它们都在我的脑海中，并参考了我没有被教过的东西。所以越简单越好。到目前为止，这是我的非工作代码：

```
s1 = input("Please enter a word:")
s2 = input("Please enter another word:")

for i in range(0, len(s1), 1):
    if i in range (0, len(s2), 1):
        print("The letters in your first word are present in your second word.") 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-20T22:12:18.200

为什么不只是对字符串进行排序？

```
>>> sorted('anagram')
['a', 'a', 'a', 'g', 'm', 'n', 'r']
>>> sorted('nagaram')
['a', 'a', 'a', 'g', 'm', 'n', 'r']
>>> sorted('anagram') == sorted('nagaram')
True 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-04-09T03:10:13.810

您可以使用收藏*库*中的魔术[**计数器。**](https://docs.python.org/2/library/collections.html#collections.Counter)从文档：

 *> 它是一个无序集合，其中元素存储为字典键，其计数存储为字典值

因此，您可以使用字符串（可迭代）初始化 Counter 对象，并与字符串中的另一个 Counter 进行比较

```
from collections import Counter

def is_anagram(str1, str2):
   return Counter(str1) == Counter(str2) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-20T22:07:06.687

您需要更多地考虑条件逻辑。循环在正确的轨道上，但是如果 s1 中有一个字母不在 s2 中，则应该`break`退出此循环并打印“False”语句。`all_s1_in_s2 = True`如果发现不匹配的字母，请考虑使用类似的变量，然后将其设置为 false。

其他一些提示：

*   `for l in s1`将遍历字符串 s1 让您按顺序访问每个字母`l`- 您不需要`range`或`len`根本不需要

*   该`if .. in`语句可以帮助测试一个字母是否存在于字符串中，例如`if letter in mystring:`是一个有效的语句，这可以帮助你很多，再次不需要`range`或`len`

*   您应该尽可能避免在变量名中使用数字 - 最好是`word_one`and `word_two`，例如

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-07T04:47:53.633

使用字典检查两个字符串是否是彼此的字谜：注意：偶数，特殊字符可以用作输入

```
def anagram(s):
    string_list = []
    for ch in s.lower():
        string_list.append(ch)

    string_dict = {}
    for ch in string_list:
        if ch not in string_dict:
            string_dict[ch] = 1
        else:
            string_dict[ch] = string_dict[ch] + 1

    return string_dict

s1 = "master"
s2 = "stream"

a = anagram(s1)
b = anagram(s2)

if a == b:
    print "Anagram"
else:
    print "Not Anagram" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-20T06:20:30.763

```
def is_anagram(w1, w2):
    w1, w2 = list(w1.upper()), list(w2.upper())
    w2.sort()
    w1.sort()
    return w1 == w2 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-12T22:33:05.150

```
>>> s1 = 'vivid'
>>> s2 = 'dvivi'
>>> s3 = 'vivid'
>>> def is_anagram(s1, s2):
...     if s1.lower() == s2.lower():
...         return False
...     return sorted(s1.lower()) == sorted(s2.lower())
...
>>> is_anagram(s1, s2)
True
>>> is_anagram(s1, s3)
False
>>> s2 = 'dvivii'
>>> is_anagram(s1, s2)
False
>>> s2 = 'evivi'
>>> is_anagram(s1, s2)
False
>>> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-12-03T08:23:08.360

您可以使用以下代码，它不会计算特殊字符，也不会计算数字，并且如果两个字符串中的总字符相同，则返回“它们是 anagrams”，因此会告诉字符串是否是 anagrams。

```
text = input('Enter a string: ')
text1 = input('Enter a string: ')
text,text1 = text.lower(),text1.lower()
count = 0
count1=0
for i in range(97,123):
    if chr(i) in text and chr(i) in text1:
    count1+=1
        if text.count(chr(i)) == text1.count(chr(i)):
             count +=1
if len(text) >= len(text1):
    num1 = len(text)
else:
    num1 = len(text1)
if count == count1:
    print("they are anagrams")
else :
    print("they are not anagrams") 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-12-27T16:20:24.210

如果你坚持使用 Python 字典并且不能使用函数式编程，这里有一个解决方案：

使用理解创建字典，并使用简单的运算符比较两个单词的字典`==`。

```
def isanagram2(wrd1, wrd2):

    wrd1_dict = {k: 0 for k in wrd1}
    wrd2_dict = {k: 0 for k in wrd2}

    for c1, c2 in zip(wrd1, wrd2):
        wrd1_dict[c1] += 1
        wrd2_dict[c2] += 1

    if wrd1_dict == wrd2_dict:
        return True
    return False 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-02-26T04:35:46.357

我想我们可以这样

* * *

```
s1 = "listen"
s2 = "silent"
s1=list(s1);s1.sort()
s2 = list(s2);s2.sort()
if s1 == s2:
   print ("Given Strings are Anagram")
else:
   print ("Given String are not anagrams") 
```

* * *

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-10-02T16:59:30.327

不确定它是否是在那里提出的，但我选择了：

```
def is_anagram(a, b):
    return sorted(a.lower()) == sorted(b.lower()) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-02-26T11:29:47.663

## 只是一个想法：

```
def check_(arg):
        mark = hash(str(set(sorted(arg))))
        return mark

def ana(s1, s2):
        if check_(s1) != check_(s2):
                pass
        elif len(s1) != len(s2):
                pass
        else:
             print("{0} could be anagram of  {1}".format(s1, s2))
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-04-04T17:12:02.083

# 这对我有用

```
str1="abcd"
str2="bcad"
word1=[]
word2=[]
for x in range(len(str1)):
    word1.append(str1[x])
for x in range(len(str2)):
    word2.append(str2[x])
if(len(word1)==len(word2)):
    for letter in word1:
        if letter in word2:
            word2.remove(letter)

if len(word2)==0:
    print "anagram"
else:
    print "not anagram" 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-05-31T22:40:26.643

```
 #An anagram is the result of rearranging the letters of a word to produce a new word. Anagrams are case insensitive
    #Examples:
    # foefet is an anagram of toffee
    # Buckethead is an anagram of DeathCubeK

    # The shortest my function style *************************************** 
    def is_anagram1(test, original):
        """Сhecks 'test' is anagram of 'original' strings based on:
        1\. length of the both string and length of the sets made from the strings is equivalent
        2\. then checks equivalents of sorted lists created from test and original strings

        >>> is_anagram1('Same','same')
        False
        >>> is_anagram1('toffee','foeftt')
        False
        >>> is_anagram1('foefet','toffee')
        True
        >>> is_anagram1("Buuckk",'kkkcuB')
        False
        >>> is_anagram1('Buckethead','DeathCubeK')
        True
        >>> is_anagram1('DeathCubeK','Buckethead')
        True
        """
        # check the length of the both string
        if len(test) != len(original):
            return False

        # check is the strings are the same
        t,o = test.lower(), original.lower()
        if t == o:
            return False

        # check the sorted lists
        return sorted(t) == sorted(o)

    # The final my one line code **************************************
    def is_anagram(test, original):
        """Сhecks 'test' is anagram of 'original' in one line of code

        >>> is_anagram('Same','same')
        False
        >>> is_anagram('toffee','foeftt')
        False
        >>> is_anagram('foefet','toffee')
        True
        >>> is_anagram("Buuckk",'kkkcuB')
        False
        >>> is_anagram('Buckethead','DeathCubeK')
        True
        >>> is_anagram('DeathCubeK','Buckethead')
        True
        """
        return False if len(test) != len(original) or test.lower() == original.lower() else sorted(test.lower()) == sorted(original.lower())

    if __name__ == "__main__":
        import doctest
        doctest.testmod(verbose=True)

### 2 items passed all tests:
### 6 tests in __main__.is_anagram
### 6 tests in __main__.is_anagram1
### 12 tests in 3 items.
### 12 passed and 0 failed.
### Test passed 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-12-06T21:07:11.510

最简单的最短解决方案

```
def anagram(word1, word2):
    return sorted(word1) == sorted(word2) 
```

查看

```
print(anagram("xyz","zyx"))
>>True

print(anagram("xyz","zyy"))
>>False 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-06-08T08:15:04.777

这是一个典型的分配解决方案：

```
def anagram(s1, s2):
""" (str, str) -> bool

Return True if s1 and s2 are anagrams

>>> anagram(s1, s2)
True
"""
    s1 = s1.replace(" ", "")
    s2 = s2.replace(" ", "")

    s1_new = list(s1)
    s2_new = list(s2)

    if len(s1_new) == len(s2_new):
        dupe_found = True
        while dupe_found:
            dupe_found = False
            for i in s1_new:
                for j in s2_new:
                    if i == j:
                        s1_new.remove(i)
                        s2_new.remove(j)
                        dupe_found = True
                        break
                break
    return s1_new == s2_new 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-06-26T12:45:28.713

```
def anagram(a,b):
x=[]
y=[]
for i in a:
    if i!=' ': # This will ignore the spaces in the sentence
        x+=[i] # Adds only letters into a list and ignore the spaces
for i in b:
    if i!=' ':
        y+=[i]
if len(x)==len(y): # if length of two lists are not same, They are not anagrams anyway. So it directly returns False.
    for i in range(len(x)):
        for j in range(len(y)):
            if x[i].lower()==y[j].lower(): 
                y.pop(j) # If the letter matched between first and second list, that letter is poped from that list.
                break
    return len(y)==0 # If the given sentences are anagrams, all the letters are poped out from the second list and function returns True(as the lenght of the second list is 0\. If not, function will return False.
return False 
```

字谜（a，b）

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-07-25T09:21:35.020

Anagram 的 Java 代码

```
static void anagram(String s1,String s2){
    if(s1.length()!=s2.length()){
        System.out.println("not anagram");
        return;
    }
    else{
        int []arr=new int[256];

        int size=s1.length();
        for(int i=0;i<size;i++){
            arr[s1.charAt(i)]++;
            arr[s2.charAt(i)]--;
        }
        for(int i=0;i<256;i++){
            if(arr[i]!=0){
                System.out.println("not anagram");
                return;
                }
        }
        System.out.println("anagram");
    }

} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-07-24T02:50:56.117

这是使用dict理解的解决方案。

```
def is_anagram(s1, s2):
    return {c:s1.count(c) for c in s1} == {c:s2.count(c) for c in s2} 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2013-05-14T22:25:04.657

字谜是由相同字符组成的两个不同单词： 例如：EAT 和 TEA 同样可以有很多例子。

查看给定两个单词或句子是否是字谜的一种好方法是设置一个大小为 256 的计数器数组，并最初将所有值设置为 0。（如果输入更大，至少比几个words) 现在开始读取第一个字符串（单词或句子），并将其在数组中的相应 ASCII 位置加一。对完整的字符串重复此操作。现在开始读取第二个字符串并不断减少数组中每个字母的相应 ASCII 计数器。最后，解析数组；如果所有值都为零，则输入是字谜，否则不是。以下是注释代码，以便更好地理解。

```
#include<iostream>
#include<string>

using namespace std;

bool is_anagram(string s1, string s2)
{
    //Following statement chechs the base condition; if either of the strings is empty,                                  
    //return False
    if(s1.length() == 0 || s2.length() == 0)
        return false;

    //initializing the counter array and setting it's values to 0
    int counter[256] = {0};

    //Calculating the lengths of both the strings
    int len1 = s1.length();
    int len2 = s2.length();

    //Following is also a base condition that checks whether the strings are equal in 
    //length, if not we return False
    if(len1 != len2)
        return false;

    //Following for loop increments the values of the counter array for the first  
    //string
    for(int i = 0; i < len1; i++)
    {
        counter[s1[i]]++;
    }

    //This for loop decrements the values of the counter array for the second string
    for(int i = 0; i < len2; i--)
    {
        counter[s2[i]]--;
    }
    //Now we check whether the counter array is empty/(or as it was initialized); if               
    //yes then the two strings are anagrams
    for(int i = 0; i < 256; i++)
    {
        if(counter[i] != 0)
            return false;
    }

    return true;
} 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2018-03-02T16:07:57.507

## Return True 回答“W2 是 w1 的子序列的字谜”这个问题

解释：在下面的代码中，我们可以回答两个问题：1）两个字符串是否是字谜，2）如果 w2 是 w1 的子序列的字谜。我们使用 O(1) 空间（常数）和 O(n) 时间。字典 d0 可以扩展为包含任何字符，并且我们保持在 O(1) 的空间范围内。

```
def anagrams(w1,w2):
       d0={chr(i):0 for i in range(ord('a'),ord('z'))}
       for char in w1:
           d0[char]+=1
       for char in w2:
           if d0[char]==0:
               return False
           else:
               d0[char]-=1
    return sum([d0[x] for x in d0])==0 #return True (for subseqence anagram) 
```

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2019-01-02T15:13:14.057

在这种情况下，我们检查每个排序字符串使用两个容器。

```
def anagram(s1, s2):
    str1 = ''
    str2 = ''

    for i in s1:
      str1 += i

    for j in s2:
      str2 += j

    if str1 == str2:
      return True

    return False 
```

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2019-11-10T20:35:16.257

```
str1='ohaha'
str2='hahao1'
set3=set(str1)
set4=set(str2)
if(len(set3.difference(set4))==0 and len(set4.difference(set3))==0):
     print('anagrams')
else:
     print('not anagrams') 
```

* * *

## 回答 #23

> 赞同：-2
> 
> 时间：2014-01-12T06:39:19.217

不使用排序的另一种解决方案：

```
s1 = "aaabbbccc"
s2 = "abcabcabc"

def are_anagram1(s1, s2):
   return [False, True][sum([ord(x) for x in s1]) == sum([ord(x) for x in s2])]

print are_anagram1(s1,s2) 
```

注意：这仅适用于字母而不是数字

* * *

## 回答 #24

> 赞同：-2
> 
> 时间：2019-02-08T19:12:44.380

我认为最短的方法可以是：

```
fstr=input("enter first string:")
sstr=input("enter second string:")

if(fstr==sstr[::-1]):
    print("it's anagram") 
```

* * *

## 回答 #25

> 赞同：-2
> 
> 时间：2021-06-23T11:57:41.847

```
def areAnagram(s1,s2):
    if len(s1) != len(s2):
        return False
    count = [0]*256
    for i in range(len(s1)):
        count[ord(s1[i])] += 1
        count[ord(s2[i])] -= 1

    for x in count:
        if x != 0: 
            return False
    return True

a = input("Enter a string:")
b = input("Enter b string: ")

print(areAnagram(a,b)) 
```

* * *

## 回答 #26

> 赞同：-2
> 
> 时间：2021-08-17T09:41:37.903

解决方案：

```
print('Strings are anagrams' if sorted(input("Enter 1st string: "))== sorted(input("Enter 2nd string: ")) else 'Strings are not anagrams') 
```*

# c++ - 为什么 c++ 的元编程没有添加到它的原生特性中？

> ID：14990730
> 
> 赞同：-1
> 
> 时间：2013-02-20T21:59:12.453
> 
> 标签：c++, c++11

在 c++ 11 TR 之后，我对 c++ 非常感兴趣，我期待 c++1y。我想知道为什么 c++ 的元编程没有添加到它的原生特性中。（我们知道 D 语言有静态 if 并且 D 大量使用它）（我对 D lang 了解不多。我只是听说过。）

C++ 的元编程使用了多年，至少有 8-10 年。但是，元编程可能会导致代码混乱。Boost 有 MPL，但不如 D lang 强大。

我是一个新手大学生，我不能评论这个标准。我只是想知道是否有人告诉委员会至少有一些人需要这个功能？

也许看看 Metatrace，使用了很多元编程（Metatrace 是一个 C++ 编译时光线追踪器）： [https ://github.com/phresnel/metatrace](https://github.com/phresnel/metatrace)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:02:13.653

有许多提议正在考虑为该语言添加额外的元编程工具。“静态如果”是正在考虑的此类功能之一；两篇提出此变体的论文是[N3322](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3322.pdf)和[N3329](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3329.pdf)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T22:03:04.020

请记住，C++ 的模板元编程大多是偶然发现的。他们在设计它时并没有考虑到图灵完备性，它只是发生了。这就是为什么元编程工具没有更多地融入语言本身的主要原因。

关于静态 if，我相信这是为以后的标准提出的（编辑：请参阅提案文件的其他回复）。随着 C++ 的发展（见 constexpr），C++ 正在慢慢地采用更多的元编程特性，我们希望在适当的时候看到更多。

# emacs - 在 ido 路径中的自动完成和逐字符输入之间切换

> ID：14990736
> 
> 赞同：1
> 
> 时间：2013-02-20T21:59:33.230
> 
> 标签：emacs

我在 Emacs 中使用 ido。有时，当我在 minibuffer 中打开一个路径时（例如，当我执行 Cx Cf 时），我想通过仅删除我已部分完成名称的目录的最后一个字符来编辑路径。但是，退格键始终备份完整的目录级别。我可以使用一个额外的 Cf（假设我的路径仅指定到一个目录和另一个目录之间的边界）来切换到逐个字符的条目，这将使我可以备份或键入其他字符。但是，此时，我无法查看以我键入的序列开头的目录内容。有没有办法，一旦我在“Cf模式”中输入了部分路径，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T05:51:55.567

您可以使用 编辑输入，`C-e`然后使用 切换回来`RET`。

# http - 在 Navigation Timing API 中，为什么在加载目标页面时会触发 unload 事件？

> ID：14990742
> 
> 赞同：0
> 
> 时间：2013-02-20T22:00:03.523
> 
> 标签：http, navigation, w3c

![在此处输入图像描述](../Images/511d320afac5ccd97ff1efe04e6f879a.png)

为什么卸载事件出现在序列的特定部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T00:48:30.207

unload 事件是当用户从一个页面转换到另一个页面时触发的初始事件。如果在该阶段有任何[同步请求](https://stackoverflow.com/questions/13384042/onbeforeunload-without-return-or-no-dialogbox-show/13999400#13999400)`beforeUnload`，则后续的卸载阶段将它们解除绑定并清空 DOM，作为对当前页面的请求的一部分。

# javascript - 在表单提交上传递对象而不是字段值

> ID：14990744
> 
> 赞同：0
> 
> 时间：2013-02-20T22:00:06.133
> 
> 标签：javascript, forms, backbone.js

我有一个backbone.js 应用程序，它在通过验证后通过用户将输入保存到它的数据模型中。我有一个标准的提交按钮（无 ajax），它提交到一个页面，默认情况下该页面使用来自 POST 的内容，就像表单一样。如何用来自主干.js 模型的数据替换该数据？在这种情况下是否有最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:19:19.003

我不确定关于backbone.js 框架模型的最佳实践，但我建议您使用Jquery 访问该表单的提交功能。

```
 $('#formid').submit( function (event) {

       //enter code here

    }); 
```

请注意，您还可以包含`event.preventDefault()`以防止自动提交表单，而是完全实现您自己的......虽然这样做基本上等同于在内部包含一个带有 Ajax 功能的常规按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T18:50:44.423

这篇文章展示了如何将其保存到您的模型中：[https](https://stackoverflow.com/a/8182418/222837) ://stackoverflow.com/a/8182418/222837 像这样：

```
var AppView = Backbone.View.extend({
  events: {
    "click #submit": "SubmitForm",
  },
  SubmitForm: function(){
    topic = $("#Topic").val();
    var subject_model = new App_Form();
    subject_model.save();
    return false;
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T22:02:42.403

我认为您最好的选择是使用 AJAX 进行发布。这将允许您以任何您喜欢的格式发布数据，而不是 HTML 表单默认提交的查询字符串格式。

# android - Android通过intentservice下载图片OK但无法在ImageVIew中设置

> ID：14990745
> 
> 赞同：2
> 
> 时间：2013-02-20T22:00:07.527
> 
> 标签：android, android-intent, event-handling, imageview, bitmapfactory

我正在为我的 Android 应用程序代码而苦苦挣扎......

我正在尝试下载图片（通过intentService），然后通过将ImageView 添加到LinearLayout 来显示它。

到目前为止一切顺利，我有管理下载的意图服务发送给我的绝对路径。我得到带有路径名的吐司。

但是我无法通过添加imageview来显示图片...而且我真的不知道为什么...

起初，我认为我的处理程序无法到达布局，但我设法使用 setImageResource 显示我的资源的随机图像。所以我猜这个问题来自 setimagebitmap 或 bitmapfactory decode ...

在我的 Intentservice 我有（输出是我的文件的名称）：

```
Messenger messenger = (Messenger) extras.get("MESSENGER");
Message msg = Message.obtain();
msg.arg1 = result;
msg.obj = output.getAbsolutePath();
try {
     messenger.send(msg);
} etc... 
```

回到我的主要活动，我有：

```
Private Handler handler = new Handler() {
    public void handleMessage(Message message) {

        // I Get the message
        Object path = message.obj;

        //Check if download went ok
        if (message.arg1 == RESULT_OK && path != null) {
        Toast.makeText(Update3sur3.this,
            "Downloaded" + path.toString(), Toast.LENGTH_LONG)
            .show();

            //Try to display the pic
            LinearLayout res2=(LinearLayout)findViewById(R.id.reslayout2);
        ImageView imgView2 = new ImageView(Update3sur3.this);
        Bitmap bitmap= BitmapFactory.decodeFile(path.toString());
        imgView2.setImageBitmap(bitmap);
        res2.addView(imgView2);
    } else {
        Toast.makeText(Update3sur3.this, "Download failed.",
            Toast.LENGTH_LONG).show();
      }
    };
  }; 
```

非常感谢你！

洛朗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:16:14.447

首先，我会尝试确保我是否可以正确访问该文件，即按照以下步骤操作：

1.  使用 decodeByteArray(byte[] data, int offset, int length) 方法而不是 BitmapFactory.decodeFile(path.toString())

2.  要使用这种新方法，您必须自己读取文件的字节数组，这将增加额外的步骤，但您将确保您正在正确读取文件。

3.  使用 FileInputStream 读取字节

文件 imageFile = 新文件（路径）；byte imageData[] = new byte[(int)imageFile.length()];

BufferedInputStream in = new BufferedInputStream(new FileInputStream(imageFile);

in.read(imageData, 0, (int)imageFile.length());

Log.d("", "图像文件大小：" + imageFile.length()); //检查这里你得到正确的文件大小吗？

// 现在 imageData 是您将用于生成图像的字节数组，因此：decodeByteArray(imageData, 0, (int) imageFile.length());

如果图像仍然没有出现，那么输入日志语句并打印图像的大小，看看它是否正确。

# php - 为什么 php_oauth.dll 模块不能在 Windows 7 上运行？

> ID：14990747
> 
> 赞同：0
> 
> 时间：2013-02-20T22:00:11.927
> 
> 标签：php, apache, oauth

我一直在努力将 PHP 的 OAuth 模块安装到 apache，但它根本不想工作。我尝试了很多组合，但我无法让它发挥作用：

1.  XAMPP

    *   XAMPP 默认不包含 oauth。因此，我从 PEAR websote 下载了模块，放在 ext 文件夹中，放在 php.ini 中。但是，当我尝试启动 apache 时，它​​说 oauth 和 PHP 是使用不同的 API 编译的！？。我也尝试过旧版本，但结果相同
2.  手动安装 Apache 和 PHP

    *   我还尝试分别安装 Apache 和 PHP。他们安装成功，但是当我尝试启动它时 apache 给出一个错误，说 php5apach2_2.dll 无法加载到服务器中。我设法以某种方式解决了这个问题并开始了补丁。但是，没有任何错误并且配置了 php.ini 和 httpd.conf，OAuth 模块不会加载，并且不会出现在 phpinfo() 中。
3.  微软 IIS

    *   最终，我安装了 IIS 并让它正常工作，直到上一次试验中的最后一个问题：不会出现在 phpinfo() 中，也不会在 PHP 脚本中工作。

我在几分钟内就让它在虚拟机上的 Ubuntu Linux 上工作，但作为 Web 开发人员在虚拟机上工作真的很痛苦。

我的操作系统是 Windows 7 x64。

我用来安装的文件：

*   php_oauth-1.2.3-5.5-ts-vc9-x 86.zip
*   php_oauth-1.2.2-5.4-ts-vc9-x86.zip
*   php_oauth-1.2.2-5.3-ts-vc9-x86.zip
*   php_oauth-1.1.1-dev-5.3-vc9-x86.zip
*   php-5.3.21.tar.gz
*   php-5.4.11-nts-Win32-VC9-x86.zip
*   php-5.3.21-src.zip
*   php-5.5.0alpha1.tar.bz2
*   Apache2.2.zip
*   和许多其他人......

有谁知道为什么会这样？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:41:09.157

我认为您遇到的问题是您的 OAuth DLL 是 32 位（x86），而您的操作系统是 x64。我正在处理一个类似的问题，寻找既是 x64 又是 PHP 5.4 的 OAuth DLL。

然而，我确实找到了适用于 PHP 5.3 的 x64 DLL。可在此处获得：[http](http://www.mediafire.com/php-win64-extensions) ://www.mediafire.com/php-win64-extensions 。只需确保获取名为 php_oauth-1.2.2-5.3-VC9-x64.zip 的文件，因为其他 OAuth DLL 不是线程安全的 (nts)。

如果您可以使用 PHP 5.3，那么该 DLL 应该适合您。

# java - 如何加载资源文件夹（maven）内的密钥库？

> ID：14990751
> 
> 赞同：6
> 
> 时间：2013-02-20T22:00:31.180
> 
> 标签：java, maven, resources, keystore, truststore

我有一个自定义 SSL 工厂，我在其中加载自己的信任库。

现在，当我将 truststore.jks 文件放入项目根文件夹时，它可以使用以下行：

```
ks.load(new FileInputStream("/truststore.jks", passphrase); 
```

但我希望我的信任库在我的资源文件夹中，该文件夹是用 maven 构建的，路径是**src/main/resources**。

然后我这样做了，但它不适用于以下行：

```
ks.load(this.getClass().getResourcesAsStream("/truststore.jks"), passphrase); 
```

虽然输入流存在。我检查了它。只有当我执行 ks.load(...) 时它才会失败。

我得到的例外是：

```
 java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty 
```

这是为什么？

问候，戴夫

* * *

## 回答 #1

> 赞同：-5
> 
> 时间：2013-02-21T00:14:42.713

奇怪，现在可以了...

我有

```
Properties systemProps = System.getProperties();
systemProps.put( "javax.net.ssl.trustStore", "/truststore.jks");
systemProps.put( "javax.net.ssl.trustStorePassword", "changeit");
System.setProperties(systemProps); 
```

并将第二行更改为

```
systemProps.put( "javax.net.ssl.trustStore", "src/main/resources/truststore.jks"); 
```

有谁知道为什么？这个解决方案好吗？

# c# - Google Translate API 如何使用 .NET 库翻译大文本（(414) Request-URI Too Large）

> ID：14990752
> 
> 赞同：0
> 
> 时间：2013-02-20T22:00:31.357
> 
> 标签：c#, .net, google-translate

我正在使用 .NET 库[http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Translate_API](http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Translate_API)来翻译文本，但我不能翻译大文本，只能翻译小文本。

我收到错误 (414) 请求 URI 太大。应该有一些方法可以做到这一点。

我有这个代码

```
 var service = new TranslateService();
        service.Key = this.ApiKey;

        var request = service.Translations.List(textToTranslate, this.LngDestination);
        request.Source = this.LngSource;

        TranslationsListResponse response = request.Fetch();

        foreach (TranslationsResource translation in response.Translations)
        {
            return translation.TranslatedText;
        } 
```

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:48:35.263

该项目的[文档](https://developers.google.com/translate/v2/using_rest#Translate)说，

> 注意：如果您想在单个请求中发送更多数据，也可以使用 POST 调用 API。POST 正文中的 q 参数必须少于 5K 个字符。要使用 POST，您必须使用 X-HTTP-Method-Override 标头告诉 Translate API 将请求视为 GET（使用 X-HTTP-Method-Override: GET）。

如果您需要帮助切换到，请包含来自您的对象`POST`的相关代码。`TranslateService()`

# node.js - .npm 文件夹的备用位置（以避免安装 NFS 的主目录）

> ID：14990753
> 
> 赞同：5
> 
> 时间：2013-02-20T22:00:33.080
> 
> 标签：node.js, npm, nfs

我有一个 NFS 挂载的主文件夹，并试图通过 npm 设置全局包，例如：

```
sudo npm install -g jshint 
```

这给了我一个错误，因为在 sudo 下我无法在远程服务器上创建任何东西（在 npm 之外尝试过）

```
npm ERR! Error: EACCES, open '/home/explunit/.npm/a02a2468-jshint.lock'
npm ERR!  { [Error: EACCES, open '/home/explunit/.npm/a02a2468-jshint.lock']
npm ERR!   errno: 3,
npm ERR!   code: 'EACCES',
npm ERR!   path: '/home/explunit/.npm/a02a2468-jshint.lock' }
npm ERR! 
npm ERR! Please try running this command again as root/Administrator. 
```

我敢肯定有人会在 2 分钟内出现并说“不要使用 sudo——真正的开发人员会明白如何在没有它的情况下设置 node/npm！”，但是 a) 我一直不清楚这是怎么回事考虑到[npm 自述文件](https://npmjs.org/doc/README.html)建议使用 sudo 和 b) 在这种情况下，我真的不想要任何与我的特定用户相关的东西（它是一个构建服务器）

所以我想真正的问题是如何让 npm 忽略我的主文件夹并为 .npm 使用其他位置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T00:44:54.473

尝试使用此更改缓存的位置。

```
npm config set cache /SOMEWHERE/ELSE 
```

/SOMEWHERE/ELSE 应该是运行命令的用户可以写入的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-25T11:18:46.160

我还遇到了在 nfs 挂载上执行 npm 的麻烦，对我来说，问题是，nfs 挂载没有挂载可执行文件，这通常适用于存储位置，因为它可以保护您免于执行从其他地方下载的潜在危险代码。

尽管如此，有时您还是需要从 nfs 挂载执行脚本。我建议使用单独的挂载点，然后挂载可执行文件。

这可以通过以下方式实现：

*   检查您的安装选项：

```
安装 | grep nfs
```

其中列出了您的 nfs 挂载，例如：

```
设备挂载点 nfs (rw, *noexec* ,nosuid,nodev,nolock,addr=...)
```

*   仔细查看选项部分。如果列出了“ ***noexec*** ”选项，则无论您使用 chmod 设置什么文件权限，您都无法从那里执行某些代码。

所以在'etc/fstab'里面，而不是例如

```
设备挂载点 nfs rw,nolock, *users*
```

利用

```
设备挂载点 nfs rw,nolock, *exec*
```

（'exec' 和 'users' 选项可能会相互干扰，如果需要，请参阅 'mount' 手册页以了解它们的正确顺序）

# php - sql更新语句，包括&和换行符

> ID：14990760
> 
> 赞同：0
> 
> 时间：2013-02-20T22:01:02.997
> 
> 标签：php, sql, line-breaks, ampersand, update-statement

我正在使用这个更新声明

```
$sql = "update questions set response = ?, `check` = ? where questionID = ? && starID = ?";
$qc = $pdo_conn->prepare($sql);
$qc->execute(array($_GET['response'], $_GET['check'], $_GET['questionID'], $_SESSION['starid'])); 
```

但是当响应值中有一个`&`时，例如`pop and r&b`，它最终在数据库中为`pop and r`。

此外，如果有换行符，它会删除所有空格，例如：

```
Bob
Jim 
```

最终在数据库中为`BobJim`

数据库中的响应类型是`varchar(10000)`

这是获取`$_GET['response']`值的javascript代码

```
var html = '';
$(document).ready(function(){
    $(".save_btn").live('click', function() {

        $('.response').each(function(){
            //alert($(this).attr('id'));
            //alert($(this).val());
            if ($(this).val() == '') {
                html = $.ajax({
                    url: "response.php?questionID=" + $(this).attr('id') + "&response=" + $(this).val() + "&check=0",
                    async: false
                }).responseText;
            }   
            if ($(this).val() !== '') {
                html = $.ajax({
                    url: "response.php?questionID=" + $(this).attr('id') + "&response=" + $(this).val($POST['response']) + "&check=1",
                    async: false
                }).responseText;
            }   

        }); 
        alert(html);
        location.reload();  
    });
}) 
```

if 的这一部分是这种情况下的重要部分：

```
 if ($(this).val() !== '') {
            html = $.ajax({
                url: "response.php?questionID=" + $(this).attr('id') + "&response=" + $(this).val($POST['response']) + "&check=1",
                async: false
            }).responseText;
        } 
```

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:05:40.543

您应该对 URL 的值进行编码：

```
escape($(this).val()) 
```

在`&`URL 中具有特殊含义，它用作参数之间的分隔符。

# objective-c - 将 CABasicAnimation 与“frameOrigin”的 keyPath 一起使用是否安全？

> ID：14990765
> 
> 赞同：0
> 
> 时间：2013-02-20T22:01:29.193
> 
> 标签：objective-c, macos, animation, core-animation, cabasicanimation

我正在尝试使用动画代理制作 NSView 帧的动画。我正在尝试自定义持续时间和时序曲线，并且我需要以适用于 Mac OSX 10.6 的方式执行此操作，因此我无法在 NSAnimationContext 中使用那些看起来非常多汁的方法。

根据我的研究，看来我需要做的是创建自己的 CAAnimation 对象并将其放入我想要动画的对象的动画字典中。这段代码很好用：

```
CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"frameOrigin"];
animation.duration = 1.0;
animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];

[self.myView setAnimations:[NSDictionary dictionaryWithObject:animation forKey:animation.keyPath]]; 
```

然后我可以继续移动视图，如下所示：

```
[[self.myView animator] setFrame:myNewFrame]; 
```

这段代码很好用。但是，我有点担心我没有正确使用 API，因为 Apple 在这里所说的动画 frame 属性：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/AnimatableProperties/AnimatableProperties.html#//apple_ref/doc/uid/TP40004514-CH11-SW1](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/AnimatableProperties/AnimatableProperties.html#//apple_ref/doc/uid/TP40004514-CH11-SW1)

他们说框架不是 CALayer 的动画属性。现在，我实际上并没有直接操作图层，但我认为 CABasicAnimation 对象可以。所以......我在这里玩火还是我做得对？

如果我做错了，我会非常感谢一个关于正确方法的指针……请记住，我只能使用 10.6 API。非常感谢！

# java - scala：为什么 1/0 是算术异常，但 1.0/0.0 = Double.Infinity

> ID：14990770
> 
> 赞同：6
> 
> 时间：2013-02-20T22:01:48.653
> 
> 标签：java, scala

`java.lang.ArithmeticException: / by zero`在 Scala 中，整数算术 div 由零抛出 a ，但浮点算术 ( `1.0/0.0`) 返回似乎不一致`Double.Infinity`。

我知道从类型的角度来看，同时拥有 Double.Infinity 和 Integer.Infinity 可能会很棘手，但我假设使用 scala 强大的类型系统，他们可以想出一些其他方法来解决问题的这方面。

还有什么我遗漏的东西可以更好地解释这两种不同的行为吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-20T22:04:18.553

这是硬件限制，而不是软件限制，原因很简单：IEEE754 浮点运算明确支持`+Inf`和`-Inf`，即有对应于这两个想法的位表示，因此将它们作为 的结果是有意义的`1.0/0.0`。

在通用处理器中实现的整数运算没有无穷大的内部表示，因此必须抛出错误。

您可以在软件中实现一个支持无穷大的整数类型，但它会更慢，因为除法运算不会直接对应于处理器的`div`指令。这在我看来是不明智的：整数除零错误*几乎总是*由于（a）算法的错误实现或（b）未能正确验证用户输入，这两个都是必须解决的基本问题在编译代码之前，而不是在运行时通过异常！另一方面，在 FP 算术中，当您不（并且真的不能）期望它时，您可能很容易遇到 div-by-zero：`1e-308/1e+308`具有正确的值，但`double`即使两个操作数都是，它也不能表示为 a。

# java - 从后端请求更新用户会话

> ID：14990773
> 
> 赞同：0
> 
> 时间：2013-02-20T22:01:50.247
> 
> 标签：java, google-app-engine, session

我有一个将用户数据存储在会话中的应用程序。每当我在后端对用户进行更改时，我必须记住还要更新会话数据。这很好，除非我对不是由他的操作发起的用户进行更改。然后我无法访问他的请求，因此无法访问他的会话。这意味着用户不会看到对其用户记录的更新，更糟糕的是，如果他在会话更新之前对用户记录进行了更改，他可能会清除系统所做的更改。

我唯一的解决方案是在保存更改时从数据存储区而不是会话中提取。这样我就永远不会用过时的数据覆盖好的数据。

一个简单的例子，如果 stackoverflow 像我的网站一样编码：

用户信誉号存储在会话中，如果有人对他们的答案之一进行投票，他们在数据存储中的信誉就会增加，但这不会传播到会话中。用户现在可以更新他们的 about 字段并消除他们刚刚获得的声誉。

希望这一切都有意义，请随时询问我可能错过的任何细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-02-04T14:24:40.947

将其插入 JSP 顶部以识别会话中的用户

```
if (session!=null && request.getSession().getAttribute("loggedin") != null) {
    if (request.getSession().getAttribute("role").equals("STUDENT")) {
        response.sendRedirect("index.jsp");
        return;
    } 

}else{
    response.sendRedirect("index.jsp");
    return;
}%>
<% if (request.getSession().getAttribute("loggedin") == null) {
    response.sendRedirect("index.jsp");
    return;
}
StudentDTO dto = (StudentDTO) request.getSession().getAttribute("user"); 
```

然后在 JSP 中插入以下代码以将新数据发布到 servlet

```
<form method="POST" action="EditUserServlet">

                    <div class="form-submit">   
                        My Information
                        <div class="submit-section">
                            <div class="form-row">

                                <div class="x">
                                    <label>Name</label>
                                    <input type="text" class="form-control" value="<%= dto.getName()%>" name="name">
                                </div>

                                <div class="x">
                                    <label>Email</label>
                                    <input type="email" class="form-control" value="<%= dto.getEmail()%>" name="email">
                                </div>

                            <div class="form-group x">
                                <button class="btn" type="submit">Save Changes</button>
                            </div>
                        </div>
                    </div>
                </form> 
```

在 EditUserServlet

```
@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

    try {
         StudentDB db = new StudentDB();

        StudentDTO dto = db.getStudentByID(((StudentDTO) request.getSession().getAttribute("user")).getId());

        dto.setName(request.getParameter("name"));
        dto.setEmail(request.getParameter("email"));

        db.updateStudent(dto);
        request.getSession().setAttribute("user", dto); 
```

在 StudentDB java 文件中插入这个以通过 Id 查找学生，然后更新学生 sql 文件

```
public StudentDTO getStudentByID(int id) {

    StudentDTO obj = null;
    String query = "Select * from students where id=?";
    PreparedStatement pst = null;
    ResultSet rs = null;

    try {
        pst = conn.prepareStatement(query);
        pst.setInt(1,id);
        rs = pst.executeQuery();
        if (rs != null) {
            if (rs.next()) {

                obj = new StudentDTO();
                obj.setId(rs.getInt(1));
                obj.setName(rs.getString(2));
                obj.setEmail(rs.getString(3));
                obj.setPassword(rs.getString(4));

} catch (SQLException ex) {
        Logger.getLogger(StudentDB.class.getName()).log(Level.SEVERE, null, ex);
    } finally {
        if (rs != null) {
            try {
                rs.close();
            } catch (SQLException ex) {
                Logger.getLogger(StudentDB.class.getName()).log(Level.SEVERE, null, ex);
            }
        }

public boolean updateStudent(StudentDTO obj)
{
    int affectedRows = 0;
    String query = "update `student` set name=? , email=lower(?)   where id=?";
    PreparedStatement pst = null;
    try {
         pst = conn.prepareStatement(query);
        pst.setString(1,obj.getName());
        pst.setString(2,obj.getEmail());

        pst.setInt(10, obj.getId());
        System.out.println(pst);

        affectedRows = pst.executeUpdate();

    } catch (SQLException ex) {
        Logger.getLogger(StudentDB.class.getName()).log(Level.SEVERE, null, ex);
    }
    return affectedRows > 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:07:02.150

为什么要将数据存储在会话中，IMO 您可以直接将其映射到数据存储区，这样您就不会拥有陈旧的旧数据，并且每次获取数据时都会更新数据源

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T22:33:04.793

你熟悉四人组观察者模式吗？也没有完全遵循您的用例......

# c++ - 文本文件中的行没有正确分配到二维数组中

> ID：14990775
> 
> 赞同：0
> 
> 时间：2013-02-20T22:01:51.980
> 
> 标签：c++

![调试截图](../Images/4950d4e0f41b1da4039927b022f3ee4f.png)

我正在创建二维字符数组以逐行从文件中写入文本当我将文件行读入缓冲区时，它会正确读取，并且我可以在控制台中看到输出。但是，尽管事实上我正在将每一行从文件写入信息数组，但当我观察 info[0] info[2] info[3]... 等的值时，我会得到最后一行文件写入其中的每一行。

有人可以指出我的问题吗？

PS 我知道在 C++ 中处理文件有更好的方法，但作为编程课程的一部分，我仅限于 fgets、fputs、fputc 和其他基本功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:10:56.890

您需要在循环中从缓冲区到 info[c] 执行 strcpy() 而不是当前正在执行的分配。

# signalr - SignalR：协商请求期间出错：未定义

> ID：14990789
> 
> 赞同：3
> 
> 时间：2013-02-20T22:02:49.753
> 
> 标签：signalr, signalr-hub, signalr.client

我一直在尝试让 javascript signal-r 客户端与自托管的 o​​win 服务器一起工作。我遇到了这个问题。我已经尝试了代理和没有代理方法，两者都具有相同的结果和错误“SignalR：协商请求期间错误：未定义”。

我已经能够让跨域示例运行而没有任何问题，并且无法弄清楚我做错了什么，有人有什么想法吗？

浏览器控制台获取尝试协商的日志，然后我得到了失败。

服务器/集线器

```
namespace SignalROwinHost
{
    class Program
    {
        static void Main(string[] args)
        {
            string url = "http://localhost:9000/";
            using (WebApplication.Start<Startup>(url))
            {
                Console.WriteLine("Server running on {0}", url);
                Console.ReadLine();
            }
        }

        public class Startup
        {
            public void Configuration(IAppBuilder app)
            {
                app.MapHubs();
            }

        }

        public class ChatHub : Hub
        {
            public void Send(string message)
            {
                Clients.All.send(message);
            }
        }
    }
} 
```

Javascript（无代理）：

```
<script type="text/javascript">
    $(function () {
        var connection = $.hubConnection('http://localhost:9000');
        var chat = connection.createHubProxy('chatHub');
        chat.on('send', function (message) {
            $('#chat').html($('#chat').html() + "\r\n" + message);
        });
        connection.logging = true;
        connection.start().done(function () {
            alert("Connection Complete");
            $('#sendBtn').click(function () {
                chat.invoke('send', $('#message').val());
            });
        }).fail(function (param) { alert(param); });
    });
</script> 
```

Javascript（代理）：

```
<script src="http://localhost:9000/signalr/hubs" type="text/javascript"></script>
      <script type="text/javascript">
        $(function () {
            var chat = $.connection.chatHub;
            chat.client.send = function (message) {
                alert(message);
            };

            $.connection.hub.logging = true;

            $.connection.hub.url = "http://localhost:9000/signalr";

            $.connection.hub.start()
                .done(function (param) {
                    chat.server.send("Connected");
                })
                .fail(function (param) {
                    alert("Could not Connect: " + param);
                });
        });

  </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T03:24:47.037

如果您使用的是 SignalR 1.0.0（您应该使用它，因为它现已正式发布），您需要更改您的调用`MapHubs`以启用跨域请求。这是假设您的网站*不是*从 localhost:9000 提供的。我猜这不是因为您将 url 传递给`$.hubConnection`.

```
app.MapHubs(new HubConfiguration { EnableCrossDomain = true }); 
```

在 1.0.0 的最终版本之前，默认情况下启用了 CORS。

# java - 比较扩展对象

> ID：14990790
> 
> 赞同：0
> 
> 时间：2013-02-20T22:02:52.570
> 
> 标签：java, oop

```
private List<Fruit> myFruit = new Vector<Fruit>(); 
```

好的，所以如果我有一个不同类型的水果对象的列表，我该如何浏览列表并比较不同的对象。

```
public class Fruit{
 String type;
 String color;

 }

 public class Grape extends Fruit{
  int seedCount;

   public Grape(Attributes attributes){
    this.type = attributes.getValue("type");
    this.color=attributes.getValue("color");
    this.seedCount=attributes.getValue("seedCount");

 }

 public class Banana extends Fruit{
    String color;

   public Banana(Attributes attributes){
    this.type = attributes.getValue("type");
    this.color=attributes.getValue("color");

 }

public load(localName name, Attributes attributes){
if (name.equalsIgnoreCase("grape"){
 Grape grape = new Grape(attributes);
 myFruit.add(grape);
  }
if (name.equalsIgnoreCase("banana"){
   Banana banana = new Banana(attributes);
   myFruit.add(banana);
  }
 } 
```

那么我将如何对 Fruit 列表进行排序并根据它们是什么类型的对象来显示这些对象的特定属性。IE。如果 type=Grape 则显示种子计数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T22:06:58.140

1.  如果要对 Fruit 进行排序，则需要为 Fruit 类实现 Comparable 接口。

2.  如果要显示属性，请在 Fruit 类中有一个抽象方法并在子类中提供实现。这种方式取决于 Fruit 的实例，它将显示相应的属性。

    公共抽象类 Fruit 实现 Comparable{

    ```
     public abstract void displayProperties();

        @Override
        public int compareTo(Fruit otherFruit){
            return 0;
        }

    }

    public class Banana extends Fruit {
        private int seedCount;
        @Override
        public void displayProperties() {
            // TODO Auto-generated method stub
            System.out.println(seedCount);
        }

    }

    public class Grape extends Fruit{
        private String color;
        @Override
        public void displayProperties() {
            // TODO Auto-generated method stub
            System.out.println(color);
        }

    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:06:57.173

您可以向 Fruit 添加一个抽象方法`displayProperties()`

然后您将被迫为所有类型的水果隐含该方法，然后在您的 for 循环中您只需调用`displayProperties()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T22:08:20.853

不建议这样做，但您可以使用

```
if(object instanceof Class) {
    Class temp = (Class) object
    //operate on object
} 
```

但是你应该做的是创建一个 Fruit 接口，它可以访问与所有水果相关的重要信息，一般来说你不应该为了获得额外的信息而沮丧。

虽然向下转型并不邪恶，但这可能意味着您没有充分利用多态性。为了利用多态性，应该确保子类型共享的超类型具有获取尽可能多的信息或行为的方法。

例如，假设您有一个 HousePets 列表，而 HousePets 包含子类型 Dog 和 Cat。您遍历此列表并想要摇摆所有可以摇尾巴的 HousePets 尾巴。为简单起见，有两种方法可以做到这一点，要么只有 Dog 有方法“wagTail()”（因为 Cats 不摇尾巴），或者 HousePets 有一个名为“wagTail()”的方法，由 Cats 和 Dogs 继承（但猫的版本什么都不做）。如果我们选择第一个示例，代码将如下所示：

```
 for(HousePet pet : petList)
     if(pet instanceof Dog) {
         ((Dog)pet).wagTail();
     } 
```

对于第二个示例，它看起来像这样：

```
 for(HousePet pet : petList)
     pet.wagTail(); 
```

The second example takes a little less code and is a little more streamlined. In the worst case scenario, if we go with the first option, we will need an if-block for each new subtype of HousePet, which will make the code bulkier/uglier/etc. Better yet we could have a HousePet method called "showHappiness", and the Dog would wag its tail while the cat purred.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T22:08:33.477

I think you need an `instanceof` operator. It allows you to check object type.

```
if (list.get(0) instanceof Grape) {
    // list.get(0) is Grape
} 
```

# mysql - MySQL AFTER INSERT 触发器“未知列”

> ID：14990797
> 
> 赞同：1
> 
> 时间：2013-02-20T22:03:17.477
> 
> 标签：mysql, triggers

我已经研究过这个问题，它通常与不匹配的列名有关。我检查并重新检查了我的列名以确保它们匹配。我不明白它为什么抱怨。也许我需要的只是第二双眼睛，或者长时间的午休？

**表：**

```
DROP TABLE IF EXISTS `User`;
CREATE TABLE `User` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `userType` varchar(20) NOT NULL,
  `firstName` varchar(20) NOT NULL,
  `lastName` varchar(40) NOT NULL,
  `email` varchar(40) DEFAULT NULL,
  `contributorRating` int(1) DEFAULT NULL,
  `dateCreated` timestamp DEFAULT CURRENT_TIMESTAMP,
  `isFlagged` bit(1) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `userType` (`userType`),
  CONSTRAINT `User_ibfk_1` FOREIGN KEY (`userType`) REFERENCES `UserType` (`userType`)  ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

DROP TABLE IF EXISTS `User_Project`;
CREATE TABLE `User_Project` (
  `projectID` int(11) NOT NULL,
  `userID` int(11) NOT NULL,
  `joinDate` timestamp DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`projectID`,`userID`),
  KEY `userID` (`userID`),
  CONSTRAINT `User_Project_ibfk_1` FOREIGN KEY (`projectID`) REFERENCES `Project` (`ID`) ON UPDATE CASCADE,
  CONSTRAINT `User_Project_ibfk_2` FOREIGN KEY (`userID`) REFERENCES `User` (`ID`) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

DROP TABLE IF EXISTS `Project`;
CREATE TABLE `Project` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `userID` int(11) NOT NULL,
  `projectName` varchar(40) NOT NULL,
  `frequencyType` varchar(10) DEFAULT NULL,
  `projectType` varchar(20) NOT NULL,
  `projectDescription` text NOT NULL,
  `dateCreated` timestamp DEFAULT CURRENT_TIMESTAMP,
  `startDate` timestamp DEFAULT 0,
  `endDate` timestamp DEFAULT 0,
  `isActive` tinyint(1) unsigned NOT NULL,
  `visibility` varchar(20) DEFAULT 'private',
  `region` varchar(20) NOT NULL,
  `isFlagged` bit(1) DEFAULT NULL,
  `lastUpdate` timestamp DEFAULT 0,
  PRIMARY KEY (`ID`),
  KEY `userID` (`userID`),
  KEY `frequencyType` (`frequencyType`),
  KEY `projectType` (`projectType`),
  CONSTRAINT `Project_ibfk_1` FOREIGN KEY (`userID`) REFERENCES `User` (`ID`) ON UPDATE CASCADE,
  CONSTRAINT `Project_ibfk_2` FOREIGN KEY (`frequencyType`) REFERENCES `Frequency` (`frequency`) ON UPDATE CASCADE,
  CONSTRAINT `Project_ibfk_3` FOREIGN KEY (`projectType`) REFERENCES `ProjectType` (`projectType`) ON UPDATE CASCADE,
  CONSTRAINT `Project_ibfk_4` FOREIGN KEY (`visibility`) REFERENCES `Visibility` (`visibility`) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

**扳机：**

```
 DROP TRIGGER IF EXISTS ins_Project;
 CREATE TRIGGER ins_Project AFTER INSERT ON `Project`
 FOR EACH ROW 
 BEGIN
  SET NEW.lastUpdate = NOW();
  INSERT IGNORE INTO User_Project(projectID,userID,joinDate) VALUES (NEW.ID,NEW.userID,NOW());
 END; 
```

**错误：**

```
ERROR 1054 (42S22): Unknown column 'NEW.ID' in 'field list' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T22:20:58.240

我对此不是 100% 肯定的，因为文档并没有真正涉及到这一点，但我认为你只是打算使用

```
SET NEW.lastUpdate = NOW(); 
```

或类似于为触发器`SET`中的插入行设置字段值。`BEFORE`

尝试将该部分拆分为`BEFORE INSERT`触发器，看看它是否有效。也许在触发后上下文中，在这样的记录字段上调用 ​​SET 会更新行并丢失导致错误的记录指针。

我这样说是因为 MySQL 文档仅明确指出您可以`SET`在前触发器期间使用行值。检查文档中的此报价：

> 在 BEFORE 触发器中，如果您具有 UPDATE 权限，您还可以使用 SET NEW.col_name = value 更改其值。这意味着您可以使用触发器来修改要插入新行或用于更新行的值。

# ios - 记录用户输入并翻译成文本 iPhone

> ID：14990800
> 
> 赞同：0
> 
> 时间：2013-02-20T22:03:24.863
> 
> 标签：ios, core-audio

我正在使用 maluuba API ( [Malubba Dev Site](http://dev.maluuba.com/) )，这是一种自然语言处理 API，但他们在文档中没有提到如何将用户对麦克风说的声音转换为实际文本。这是CoreAudio可以做的吗？如果是这样，我将如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:33:41.433

Core Audio 中没有任何东西（当前或公开的）可以对文本进行连续语音识别。（据报道，Siri 的工作原理是压缩一些录制的音频输入并将其发送到 Apple 或以前的 Nuance 的服务器，以便识别和处理成查询）。

核心音频对于录音部分很有用。

一个尝试在 iOS 上进行语音识别的开源项目是 OpenEars，它使用了 CMU 的 PocketSphinx 技术。报告因结果的质量而异。您也可以尝试联系 Nuance，看看他们是否可以付费使用他们的语音识别 API。

# c# - WebClient.DownloadDataAsync 真的会自己抛出异常吗？

> ID：14990801
> 
> 赞同：3
> 
> 时间：2013-02-20T22:03:29.837
> 
> 标签：c#, webclient

[MSDN 文档`WebClient.DownloadDataAsync`](http://msdn.microsoft.com/en-us/library/ms144191.aspx)列出了两个可能来自调用该方法的潜在异常。

例外：

*   ArgumentNullException - 地址参数为空。
*   WebException - 由 BaseAddress 和地址组合形成的 URI 无效。- 或 - 下载资源时出错。

虽然我不怀疑这些异常可能在调用此代码时的某个时刻发生，但它们实际上是否源自该执行行，或者它们只会出现在引发`DownloadDataCompleted`事件的`e.Error`属性中？

换句话说，a `try`/ `catch`around会`WebClient.DownloadDataAsync`真正捕获任何东西，还是它们只是描述可能出现的错误`e.Error`？

```
using (WebClient webClient = new WebClient()) {
    webClient.DownloadDataCompleted += (sender, e) => {
        if (e.Error != null) {
            // Exceptions definitely available here.
            Console.WriteLine(e.Error.Message);
        }
        else {
            Console.WriteLine("Success!");
        }
    };
    try {
        webClient.DownloadDataAsync(someUri);
    }
    catch {
        // Would this ever be hit?
        Console.WriteLine("Caught an exception from DownloadDataAsync.");
    }
} 
```

我尝试了一个简单的 404 错误，但没有命中 catch 块（而`e.Errors`代码是），但我不知道下载调用本身是否会引发其他情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:20:52.930

是的，`DownloadDataAsync`会直接扔`ArgumentNullException`。它也会抛出`NotSupportedException`和`UriFormatException`。但是任何`WebException`s 都会通过回调（即事件）来。

# objective-c - NSDictionary objectAtIndex 导致无法识别的选择器异常

> ID：14990803
> 
> 赞同：0
> 
> 时间：2013-02-20T22:03:45.493
> 
> 标签：objective-c, object, nsarray, nsmutabledictionary

我在名为 favToLoad 的 NSMutableDictionary 中有数组。我正在尝试使用 UITableView 的 indexPath.row 来一一获取数组。

**代码 ：**

```
NSArray* fav = [[NSArray alloc] init];
NSLog(@"IndexPath = %d", indexPath.row);
fav = [favToLoad objectAtIndex:indexPath.row];
NSLog(@"Fav = %@", fav); 
```

错误：

```
[NSCFDictionary objectAtIndex:]: unrecognized selector sent to instance 
```

**解决方案**

我通过使用 NSMutableArray 而不是 NSMutableDictionary 解决了我的问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T22:05:38.253

字典没有索引。你不能这样做。相反，您需要使用 -objectForKey: 和适当的键来获取您想要的值（您可以在调试器中使用 'po favToLoad' 来检查内容）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T22:34:42.420

你应该使用`objectForKey:`而不是`objectAtIndex:`

`objectAtIndex:`对`NSArray`班级有效

# mongodb - MongoDB 的 GridFS 分块是否仅适用于二进制数据？巨大的 K/V 文档呢？

> ID：14990812
> 
> 赞同：0
> 
> 时间：2013-02-20T22:04:32.733
> 
> 标签：mongodb, gridfs

我有超过 16MB 的文档。这些文档由许多键/值对及其包含的子文档（字典）和数组（列表）组成，它们可能嵌套了好几层。

如果我尝试插入其中一个超 16MB 文件，则会收到有关文档大小大于 16MB 的错误。所以，我开始研究 GridFS。GridFS 似乎非常适合分块文件，例如二进制数据。但是，我不清楚如何像上面描述的那样“分块”高度嵌套的 K/V 文档。我在想我可能只需要将这些巨大的文档分解成更小的文档并咬紧牙关并实施事务，因为在多个文档上插入没有原子性。

我对 GridFS 的理解有偏差吗？将文档分解为具有事务支持的较小文档是最好的前进方式，还是有办法在这里使用 GridFS？

非常感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:09:24.937

只是好奇为什么将键/值对存储在文档而不是集合中？

如果您需要其中很多，您可以将它们存储在一个集合中（假设它们都是唯一的，而不是任何类型的嵌套结构）。

或者，您可以将该数据迁移到 redis，这样在查找键/值时性能会更高，并且没有合理的限制。可以混合多个存储引擎。

针对评论 1 进行编辑：

如果您在文档中使用 16 兆的键值对，我实际上会质疑您现在如何对数据进行建模。仅仅因为数据库是无模式的并不意味着在 mongo 中存储键值的正确方法是在一个大文档中。

您能否提供更多关于您正在尝试做的事情的信息，以便我们更好地帮助了解您的需求并提供更好的答案？我相信我们可以为您提供的帮助远不止这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:09:35.847

GridFS 将文件视为不透明的二进制 blob。它不区分“键/值文档”和图像文件。

如果您想对文档中包含的值进行查询等，您需要自己手动将它们拆分为较小的文档。另一方面，如果您的文档实际上只是碰巧具有内部结构的不透明数据块（您只关心程序内部，而不关心数据库），那么 GridFS 是一个不错的选择。

另一个考虑是性能：你真的需要读写16MB+的巨型文档吗？还是您通常只处理每个文档的一个子集？如果是前者，则使用 GridFS；如果是后者，请将您的文档拆分到不同的集合中，并在它们之间进行引用。

# javascript - 如何通过扭曲切换响应图像的大小

> ID：14990813
> 
> 赞同：3
> 
> 时间：2013-02-20T22:04:33.667
> 
> 标签：javascript, jquery

我已经设置了我所追求的功能，但是当图像具有基于百分比的宽度时，我无法弄清楚如何获得相同的结果。

[http://jsfiddle.net/bs8Tw/](http://jsfiddle.net/bs8Tw/)

```
$('img').click(function() {

    var toggleWidth = $(this).width() == 350 ? '700px' : '350px';

    $('img').animate({ width: '350px' });
    $(this).animate({ width: toggleWidth });

}); 
```

如您所见，当单击图像时，它的宽度会加倍。再次单击它时，它会恢复到正常大小。然而，这里的关键是，如果单击一个图像，然后单击另一个图像，则第一个图像会在第二个图像增加之前恢复到正常大小。

基本上，我正在寻找这个确切的功能，但我希望图像在 50% 和 100% 宽度之间切换。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T22:09:22.583

我想您的问题更多是关于“我如何确定宽度是否为 50%”。嗯，这很简单：只需检查它是否是容器宽度的 50%。事实上，因为否则它将是宽度的 100%，您只需检查它是否小于容器宽度的 60%。

```
var toggleWidt = $(this).width() < $(this).parent().width() * .6 ? '100%' : '50%' 
```

这确实假设“容器”是您想要的图像的最大尺寸，但`.closest`如果它比父级更高，您可以随时使用。

[http://jsfiddle.net/bs8Tw/2/](http://jsfiddle.net/bs8Tw/2/)

# c# - 如何在 IronPython 中导入库？

> ID：14990814
> 
> 赞同：1
> 
> 时间：2013-02-20T22:04:36.613
> 
> 标签：c#, python, import, ironpython, music21

我目前正在开发一个用 C# 编写的应用程序，我正在嵌入该应用程序`IronPython`。

我想导入音乐库[music21](http://mit.edu/music21/) 这个库在正常工作`PyScripter`，但`IronPython`不是。我试过了

```
import sys
sys.path.append(r"c:\python24\lib") 
```

但它没有奏效。

我什至尝试将`music21`lib 文件夹复制到 lib 中`IronPython`并在`IronPython`控制台中输入：

```
from music import * 
```

我得到下一个错误：

```
Traceback (most recent call last):
File "(stdin)", line 1, in (module)
File "C:\ProgramFiles\IronPython 2.7\Lib\music21\__init__.py", line 123, in (module)
KeyError: abc 
```

我应该怎么办？

# php - 如何通过 PHP 在 Kloxo 中创建电子邮件帐户？

> ID：14990815
> 
> 赞同：1
> 
> 时间：2013-02-20T22:04:37.563
> 
> 标签：php, kloxo

我想用 PHP 动态创建电子邮件帐户 (email@myserver.com)，我有一个带有 HyperVM 和 Kloxo 的 VPS 服务器。我知道 Cpanel + Php 集成的解决方案，但对于 kloxo 我没有发现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-03T15:51:44.033

我不推荐使用 webcommand API，因为它不安全。（也许使用 php 会话就可以了）。

我通过 PHP exec 执行并直接调用 bash 脚本：

```
sh /script/add --parent-class=mmail --parent-name=example.com --class=mailaccount --name=dummy --v-password=123456 
```

你们中的一些人可能反对使用 PHP exec(); IMO 它可以安全使用。

干杯，H.

KimeraLive.com

# java - eclipse锁jar文件

> ID：14990820
> 
> 赞同：6
> 
> 时间：2013-02-20T22:05:16.177
> 
> 标签：java, eclipse, m2e, eclipse-indigo

我有一个`eclipse indigo`带有`m2e 1.2.0.20120903-1050`maven 插件的 maven 项目。该项目包含 maven`system`依赖项，并且这些 jar 文件被检入 git 存储库。

这一切都很好，直到我需要切换到另一个`system`依赖项发生变化的分支。由于文件被锁定，Git 无法更新内容。

这似乎是 eclipse 自己或代表 m2e 锁定 jar 库。我尝试关闭项目，但这无济于事，为了释放锁定，我必须重新启动 Eclipse。

那比较麻烦。是否有任何技巧可以在不重新启动 Eclipse 的情况下释放锁定？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-28T11:57:52.613

## 视窗

您可以`handle.exe`从[http://technet.microsoft.com/de-de/sysinternals/bb896655.aspx手动使用](http://technet.microsoft.com/de-de/sysinternals/bb896655.aspx)

1.  `handle.exe .jar`通过 all 的 handle-id 和 process-id 为您提供一个列表`jar's`。
2.  `handle.exe -c <handle-id> -p <process-id>`杀死句柄，可能会抛出异常，如果是这样，请向 Eclipse 的*错误报告系统填写**错误报告*，让我们知道死锁。

 *## 编辑：

使用管理员权限执行命令很重要（感谢 Paulo Merson）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T11:28:31.387

这不是 Windows 的问题。这是 Eclipse 正在做的事情的问题。它在 Eclipse 运行时保持文件打开。这是一种可怕的做法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-11T10:04:43.417

您可以[从 Microsoft 下载 Sysinternals Suite](http://technet.microsoft.com/en-gb/sysinternals/)并使用**handle.exe**或**procexp.exe**程序来查找哪个程序在 jar 上具有句柄。在 Eclipse 中关闭句柄似乎是安全的（我没有注意到任何副作用）。

sysinternals 站点上记录了如何使用[handle.exe](http://technet.microsoft.com/en-us/sysinternals/bb896655)，对于 procexp.exe，请使用*Find* -> *Find Handle 或 DLL*菜单选项。键入锁定的 jar 文件的名称，然后在子窗口中选择锁定过程。在主窗口中，它应该显示进程中文件的句柄，您可以检查该进程是否是您认为的进程，然后右键单击该句柄并选择*Close Handle*。

您应该以管理员权限运行这两项任务。

网上也有其他指南：

*   [http://www.timstall.com/2009/02/killing-file-handles-but-not-process.html](http://www.timstall.com/2009/02/killing-file-handles-but-not-process.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-09T17:51:47.307

我也有这方面的问题。事实证明，这是由 Windows 索引文件引起的。我使用的是 Windows 7。我去了控制面板并选择了索引选项。我确保删除了我的代码所在的任何文件夹。这解决了我的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-20T22:09:53.923

不，如果文件是打开的，git 不能删除它们。这是窗户的事情。

我建议您将它们安装在本地存储库中，而不是处理系统范围，

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-18T21:39:05.900

我在工作中使用 RAD(eclipse) 时遇到了同样的问题。在我的情况下，它发生在使用 JD-Eclipse (1.0.0) 插件反编译时。安装最新的 Eclipse Mars (4.5.1) 和 JD-Eclipse (1.0.0) 时没有问题。我怀疑工作时RAD版本中的eclipse（4.2.1）底层版本与JD-Eclipse（1.0.0）不兼容。*

# google-chrome-extension - tabs.captureVisibleTab 期间出错？在最近的 Chrome 更新之后

> ID：14990822
> 
> 赞同：0
> 
> 时间：2013-02-20T22:05:17.223
> 
> 标签：google-chrome-extension

在最近更新 chrome 后，我使用的一个旧应用程序 - 书签管理器停止了工作。更具体地说，获取缩略图的部分不起作用。错误信息是

> “tabs.captureVisibleTab 期间出错：无法访问 url “chrome://newtab/#20”的内容。扩展清单必须请求访问此主机的权限。“

据我所知， tabs.captureVisibleTab 不应该工作

> 铬合金：//

标签等

这是 manifest.json 权限：

```
"permissions": [ "storage","bookmarks", "tabs", "history", "management", "unlimitedStorage", "chrome://favicon/", "http://*/*", "https://*/*","<all_urls>", "contextMenus", "notifications" ], 
```

以下是在页面加载时触发缩略图的功能

```
 function getThumbnail(url, showInfoWarning) {
    chrome.tabs.getSelected( null,function(tab) { 
      speeddial.storage.removeThumbnail(url);
        localStorage['requestThumbnail'] = tab.id+'|||'+url; 
        openInCurrent(url); 
    }); 
}

function makeThumbnail(url,captureDelay) {
setTimeout(function() 
{
    chrome.tabs.captureVisibleTab(null,{format:'png'},function(dataurl)
    {
        var canvas = document.createElementNS( "http://www.w3.org/1999/xhtml", "html:canvas" );
        var ctx = canvas.getContext('2d');      
        var img = document.createElement('img');
        img.onload = function()
        {
            try
            {
                resized_width = 480; 
                quality = 0.72;

                if          (localStorage['options.thumbnailQuality']=='low')       { resized_width = 360; quality = 0.75;  }
                if          (localStorage['options.thumbnailQuality']=='high')      { resized_width = 720; quality = 0.65;  }

                resized_height =  Math.ceil((resized_width/img.width)*img.height);
                canvas.width=resized_width
                canvas.height=resized_height
                ctx.drawImage(img,0,0,resized_width,resized_height);

                localStorage.setItem(url, dataurl);
      // SPEED DIAL DB 
      // var speeddialdb = {};
      // speeddialdb.storage = {};
      // speeddialdb.storage.db = null;
      // var dbSize = 1 * 1024 * 1024; // 2MB
      // speeddialdb.storage.db = null;
      // speeddialdb.storage.db = openDatabase('bookmarks', '1.0', 'Speeddial2', dbSize);

      // speeddialdb.storage.db.transaction(function(tx) {
      //   tx.executeSql('DELETE FROM thumbnails WHERE url = ?', [url],function(){
      //     tx.executeSql('INSERT INTO thumbnails (url, thumbnail) values (?, ?)', [url, canvas.toDataURL("image/jpeg",quality)], null ,function(tx, e){alert('Something unexpected happened: ' + e.message ) });  
      //   });
      // });
            }
            catch(e){console.log(e)}            
        }
        img.src=dataurl;
    });
}, captureDelay);
}

chrome.tabs.onUpdated.addListener(function(id,object,tab) {
    if (tab.selected && tab.url) {
        if (localStorage['requestThumbnail']!='' && localStorage['requestThumbnail']!="undefined" && typeof localStorage["requestThumbnail"]!='undefined') {
      var requestThumbnail = localStorage['requestThumbnail'].split('|||');

      if (requestThumbnail[0] == tab.id) { 
        if ( tab.status=="complete" ) { 
            if (tab.url.indexOf('mail.google.com')>-1 || tab.url.indexOf('twitter.com')>-1) 
            {
                makeThumbnail(requestThumbnail[1],1000); 
            } else {
                makeThumbnail(requestThumbnail[1],500); 
            }
            localStorage['requestThumbnail']='';
        }
        requestThumbnail = null;
      }

    } 
    }
}); 
```

问题 - 大多数时候控制台会触发此错误消息。一旦进入蓝月亮，代码实际上将获得缩略图。据我所知，tabs.captureVisibleTab 在它打算之前触发。

我将考虑直接修复代码（更好）或如何使其更可靠的一般方向的有效答案。

我的系统 - Ubuntu 12.04、Chrome 24.0.1312.70

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:23:19.427

*   **`chrome.tabs.getSelected`**不推荐使用 chrome.tabs.query 代替。
*   不需要显式的 null 声明，`chrome.tabs.captureVisibleTab(null`默认为[**`current window`**](https://developer.chrome.com/extensions/windows.html#current-window).

# 参考

*   [chrome.tabs.query](https://developer.chrome.com/extensions/tabs.html#method-query)
*   [chrome.tabs.captureVisibleTab](https://developer.chrome.com/extensions/tabs.html#method-captureVisibleTab)

# ipad - Cocos2d 0.99.5 支持ipad 视网膜显示？

> ID：14990831
> 
> 赞同：0
> 
> 时间：2013-02-20T22:05:36.910
> 
> 标签：ipad, cocos2d-iphone, retina-display

我想知道cocos2d 0.99.5 是否支持iPad 视网膜显示。如果没有，有没有办法将这种支持包括在内？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:09:20.480

cocos2d 0.99.5 开箱即用不支持 iPad Retina。您可以使用我编写的一些[类别类来实现这一点。](https://github.com/sdesimone/iOSSnippets/blob/master/cocos2D/CCFileUtils+SDSDeviceSuffix.m)

有关（稍微）更多信息，请查看我的[博客文章](http://labs.freescapes.org/blog/main/cocos2d-and-the-new-retina-ipad-take-2/)。

希望能帮助到你。

# javascript - 三个 JS 着色器库 - 多个纹理

> ID：14990833
> 
> 赞同：1
> 
> 时间：2013-02-20T22:05:38.813
> 
> 标签：javascript, three.js, webgl

嗨，我正在尝试使用三个贴图（漫反射法线和镜面反射）制作网格，由于某种原因，这里的网格不会渲染是我创建网格的代码。

```
function initGlobe()
{
    var surfaceMap = {map:THREE.ImageUtils.loadTexture("images/earth_surface_2048.jpg")};
    var normalMap = {map:THREE.ImageUtils.loadTexture("images/earth_normal_2048.jpg")};
    var specularMap = {map:THREE.ImageUtils.loadTexture("images/earth_specular_2048.jpg")};

    var shader = THREE.ShaderLib[ "normalmap" ];
    var uniforms = shader.uniforms;
    uniforms["tDiffuse"].value = surfaceMap;
    uniforms["tNormal"].value = normalMap;
    uniforms["tSpecular"].value = specularMap;
    uniforms["enableDiffuse"].value = true;
    uniforms["enableSpecular"].value = true;

    var shaderMaterial = new THREE.ShaderMaterial(
        {fragmentShader:shader.fragmentShader,vertexShader:shader.vertexShader,
        uniforms:uniforms, lights:true}
    );
    // old ver - delete later var material = new THREE.MeshPhongMaterial(surfaceMap);
    var geometry = new THREE.SphereGeometry(1,32,32);
    geometry.computeTangents();
    return new THREE.Mesh(geometry, shaderMaterial);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-24T11:29:08.960

嗨，我和你有同样的问题，自从写了一本非常好的 WEB GL 启动和运行书以来，有很多三个变化。

我让它工作了，也许你可以使用它，它使用的是新的 THREE.TextureLoader，我找不到任何其他示例，所以我做了这个：

```
function MultiLoader(TexturesToLoad, LastCall, ReturnObjects) {
    if (TexturesToLoad.length == 0) return;
    if (!ReturnObjects) ReturnObjects = [];
    var loader = new THREE.TextureLoader()
    //Pop off the latest in the , 
    //you could use shift instead if you want to read the array from 
    var texture = TexturesToLoad.shift()

    loader.load(texture,

    function (texture) {
        ReturnObjects.push(texture);
        if (TexturesToLoad.length > 0) {
            MultiLoader(TexturesToLoad, LastCall, ReturnObjects)
        } else {

            LastCall(ReturnObjects)
        }

    },
    LoadProgress,
    LoadError);
}
function LoadProgress(xhr) {
    console.log(('Lodaing  ' + xhr.loaded / xhr.total * 100) + '% loaded ');
}

function LoadError(xhr) {
    console.log('An error happened  ');
} 
```

你可以这样称呼：

```
var TexturesToLoad = []
TexturesToLoad.push("images/earth_surface_2048.jpg")
TexturesToLoad.push("images/earth_normal_2048.jpg");
TexturesToLoad.push("images/earth_specular_2048.jpg");
args = [];
args.push(this);
ReturnedMaterials = [];
ReturnMaterials = [];
var that = this;
var LastCall = function (ReturnedMaterials) {
    var surfaceMap = ReturnedMaterials[0]; //THREE.ImageUtils.loadTexture( "images/earth_surface_2048.jpg" );
    var normalMap = ReturnedMaterials[1]; //THREE.ImageUtils.loadTexture( "images/earth_normal_2048.jpg" );
    var specularMap = ReturnedMaterials[2]; //THREE.ImageUtils.loadTexture( "images/earth_specular_2048.jpg" );

    var decalMaterial = new THREE.MeshPhongMaterial({
        map: surfaceMap,
        normalMap: normalMap,
        normalScale: new THREE.Vector2(1, 1),
        specularMap: specularMap,
        transparent: false,
        wireframe: false
    });

    var globeGeometry = new THREE.SphereGeometry(100.0, SPHERE_SIDES, SPHERE_SIDES);

 mesh = new THREE.Mesh(globeGeometry, decalMaterial); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:20:43.163

使用此模式：

```
var surfaceMap = THREE.ImageUtils.loadTexture( "images/earth_surface_2048.jpg" ); 
```

三.js r.56

# linux - 从本地工作站到远程服务器的代码库复制

> ID：14990834
> 
> 赞同：1
> 
> 时间：2013-02-20T22:05:54.850
> 
> 标签：linux, windows, workflow, replication, sync

我们的团队有以下结构：

*   在 Bitbucket 中使用带有中央存储的 Git；
*   使用开发远程服务器 (Debian)，其中包含来自主域 (project.example.com) 的“开发”分支的所有代码；
*   每个开发人员在服务器上都有自己的实例（实际上它是文档根目录中的一个子文件夹，其符号链接到 CMF 的不可更改的核心文件）和他自己的子域 (dev01.project.example.com)。

我们需要的是跟踪每个开发人员在远程实例中的所有本地代码库更改。

第一个最明显的解决方案是为此使用**Git** - 在开发服务器上创建一个远程存储库（-ies）并将更改从本地实例“推送”到远程实例。但这是最糟糕的解决方案，因为开发人员必须为每一个更改创建提交（包括调试消息和所有尝试修复某些错误输出），这将使 Git 的日志充满**大量无用的提交**，因此开发人员将失去所有本地存储库的好处 +在将更改推送到 Bitbucket 之前，必须**花费大量时间清理日志。**

第二种选择——**本地服务器**。但这也带来了问题，因为在我们的结构中，我们都使用单个 db，因此它会带来更多的复杂性，即**复制远程 db 并将其与本地更改**过于频繁地合并。此外，在本地工作站（基于 Windows）上**复制开发环境**也很困难。而且我个人不喜欢在每台机器上安装本地服务器的想法，因为工作站用于代码生产，而服务器用于代码在真实环境中工作。

第三个选项 - **FTP 同步**。我们都在使用 phpStorm，它可以选择通过 FTP 进行远程同步。当您更改代码并按 Ctrl+S 时，它就像一个魅力一样起作用 - 您所做的所有更改都会立即显示在远程实例上。但是，如果您通过 Git 拉取远程代码，则需要通过 FTP**将本地文件与远程文件同步- 这运行****速度太慢**（在我们的例子中为 15-20 分钟），因为 phpStorm 会比较所有文件的内容（我们有 ~目前我们项目中有 3k 个 php 文件）。当然，我们可以按大小进行比较，但这是不可靠的解决方案。

第四种解决方案**——Samba**。我们也试过了。它**并不比**带有两个子解决方案的 FTP 快多少：

1.  将本地文件与安装在 Samba 驱动器中的本地文件同步；
2.  直接在已安装的驱动器上工作

第二个更糟糕，因为我们遇到了互联网连接问题，并且 phpStorm 在那之后永远挂起......

我也在寻找现有的解决方案，但是我发现的大多数东西都是同步实用程序，例如[unison](http://www.cis.upenn.edu/~bcpierce/unison/)，它必须手动运行，实际上，它不是我要寻找的 - 我不需要同步，而是**复制实用程序**，它监视一些本地文件夹并将每个更改的文件（甚至更好 - 增量）推送到远程位置，而无需开发人员的交互。

因此，开发人员的工作流程必须尽可能简单：

*   IDE 中的 Ctrl+S 在远程复制；
*   git pull 在远程复制；
*   git checkout 在远程复制；
*   等等...

像 Dropbox 之类的东西，但可以同步任何文件夹 + 从复制中排除一些子文件夹，并且只能单向工作：本地 -> 远程。哪些工具可以满足我们的需求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:03:11.510

在又花了一天的时间尝试和失败之后，我终于找到了一个满足我需求的工具：[RealSync](https://github.com/DmitryKoterov/dklab_realsync) 它并不完美，但它的工作相当不错。所以，我可以为任何有同样问题的人提供建议。

**更新 19.08.13** 最后我找到了最佳解决方案：我们切换到**PhpStorm** IDE，并且有一个*部署*功能，它允许您配置部署服务器、映射部署路径、忽略同步中的一些文件和文件夹等。但最有用的选项在这里位于设置中：**部署 -> 选项 -> 将更改的文件自动上传到默认服务器（始终）+ 上传外部更改**

这种组合使得从 IDE 中删除 RealSync 并使用本机同步成为可能。

# ruby-on-rails - Rails：如何访问控制器中的子模型参数？

> ID：14990836
> 
> 赞同：0
> 
> 时间：2013-02-20T22:05:56.020
> 
> 标签：ruby-on-rails, ruby

我有两个**模型** `submission`，`upload`在哪里：

```
#Submission.rb
attr_accessible :id, :photo_id, :uploads_attributes
has_many :uploads, :dependent => :destroy
accepts_nested_attributes_for :uploads, :allow_destroy => true

#Upload.rb:
attr_accessible :id,:photo_type_id    
belongs_to :submission 
```

在我的`submissions_controller.rb`我可以访问`photo_id`：

`params[:submission][:photo_id]`,

但是我不知道如何访问它的子模型`photo_type_id`

我试过了

`params[:uploads_attributes][0][:package_type_id]`

但它不起作用，ig给了我：

```
NoMethodError (undefined method `[]' for nil:NilClass): 
```

在我的视图**页面源**中，我有：

```
name="submission[photo_id]"

**in fields_for:**

name="submission[uploads_attributes][0][photo_type_id]" 
```

知道应该改变什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:31:21.420

在这里找到答案：

[如何访问嵌套参数](https://stackoverflow.com/questions/2610263/how-to-access-nested-params)

就我而言，我使用了：

```
params[:submission][:uploads_attributes]["0"][:photo_type_id] 
```

只需要更改`[0]`为`["0"]`

# java - 如何从java中同一行的文件中输出数字列表

> ID：14990840
> 
> 赞同：-1
> 
> 时间：2013-02-20T22:06:02.793
> 
> 标签：java, bluej

到目前为止我所拥有的：

```
import java.io.*;
import java.util.*;
import javax.swing.JOptionPane;

public class FileEg
{
  public static void main (String [] args) throws Exception
  { int sum = 0, ctr = 0;
    double next;
    String line;
    String filename = "eg.txt";
    StringTokenizer st;
    PrintWriter outFile = new PrintWriter("eg.out");
    outFile.println("Output File");
    try
    { Scanner inFile = new Scanner(new FileReader (filename));
      while (inFile.hasNext())
      { line = inFile.nextLine();
        st = new StringTokenizer(line);
        while (st.hasMoreTokens())
        { next = Double.parseDouble(st.nextToken());
          sum += next;
          ctr++;
          outFile.println(next);          
        }
    }     
    outFile.println("number of integers read is " + ctr);
    outFile.println("average is " + sum/(double)ctr);
    outFile.close();
    }     //end of try
   catch(FileNotFoundException e)
   { System.out.println ("The file eg.dat was not found.");
   }
   catch(NumberFormatException e)
   { System.out.println ("sorry - number format error");
     System.out.println(e);
   }
  }
} 
```

* * *

我需要得到至少 2 行不同的输出，并且一行上的数字超过一个。到目前为止，它在输出文件中是这样出现的。

输出文件

2.5

6.2

9.3

1.2

3.5

6.1

5.0

8.0

4.0

8.0

读取的整数数为 10 平均为 5.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:05:08.997

请原谅答案列表，因为我还不能发表评论。但我认为 JB Nizet 试图让你做的是这样的事情（我还没有测试过这个提醒你，但它应该很接近）：

```
int numbCounter = 0;  
while (inFile.hasNext())     
  { line = inFile.nextLine();
    st = new StringTokenizer(line);
    while (st.hasMoreTokens())
    { next = Double.parseDouble(st.nextToken());
      sum += next;
      ctr++;
      if (numbCounter <5){
      outFile.print(next + " ");
      }
      else if(numbCounter == 5){
          outFile.println();
          outFile.print(next + " ");
      }
      else {
          outFile.print(next + " ");
      }

      numbCounter++;
    }
  } 
```

# powershell - 日历的 Powershell MaxDate 属性

> ID：14990843
> 
> 赞同：1
> 
> 时间：2013-02-20T22:06:13.960
> 
> 标签：powershell, calendar, maxdate

我有一个允许选择日期范围的 powershell 日历。MaxDate 属性设置为当前日期。我遇到的问题是我可以选择今天的日期，但不能作为范围的一部分。我可以选择多个日期，但只要我在选择中包含今天的日期，它就会只选择今天的日期。问题可能是 MaxDate 属性，因为如果我删除它，我可以选择今天的日期作为范围的一部分，但我不想这样做，因为这将允许选择未来几天。任何想法如何添加今天的日期并允许它成为所选范围的一部分？代码如下。谢谢。

```
 $Calendar = New-Object System.Windows.Forms.MonthCalendar 
    $Calendar.Location = New-Object System.Drawing.Size(10,80)
    $Calendar.ShowTodayCircle = $False
    $Calendar.MaxDate = Get-Date
    $Calendar.MinDate = $OldestLog
    $Calendar.MaxSelectionCount = "365"
    $MenuBox.Controls.Add($Calendar) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:50:13.313

似乎 的值`MaxDate`在某个范围内不可用。这可能是有原因的，但我们称它为错误。一种解决方法是使用第二天作为`MaxDate`手动处理未来日子的选择，如下所示：

```
#Handler to check and save selected date
$handler_Calendar_DateChanged= 
{
    Write-Host "$Calendar.SelectionRange"
    if ($Calendar.SelectionRange.End -gt (Get-Date)) {
        [System.Windows.Forms.MessageBox]::Show("You can't select a date in the future.", "Invalid date", [System.Windows.Forms.MessageBoxButtons]::OK ,[System.Windows.Forms.MessageBoxIcon]::Error)
        #Select todays date
        $Calendar.SetDate((Get-Date))
    } else {
        #Store selected daterange
        $global:daterange = $Calendar.SelectionRange
    }
}

#Later when you specify the calendar object
$Calendar.MaxDate = (Get-Date).AddDays(1)
$Calendar.add_DateChanged($handler_Calendar_DateChanged) 
```

# android - 解析 JSON：Googlebooks JSON 文件获取特定标识符

> ID：14990848
> 
> 赞同：0
> 
> 时间：2013-02-20T22:06:31.637
> 
> 标签：android, json, parsing, google-books

我正在编写一个查询 Google 图书的应用程序，它将解析 JSON 文件并显示图书的标题和作者以及 ISBN_10 标识符。例如，我正在尝试从以下[链接](https://www.googleapis.com/books/v1/volumes?q=isbn:9781558607125)解析 JSON 文件。到目前为止，我所取得的成就是获得了这本书的标题和作者，这很好。我想做的主要事情之一是获取 ISBN 10 编号，在本例中为“1558607129”。到目前为止，使用我当前的代码它返回以下结果：

```
{"type":"ISBN_10", "identifier":"1558607129"}
{"type":"ISBN_13", "identifier":"9781558607125"} 
```

上面的结果表明该函数解析了我不想要的“industryIdentifiers”JSON 数组中的所有内容。我只想要“1558607129”。

到目前为止，这是解析 JSON 的函数：

```
public void parseJson(String stringFromInputS)
{
    try 
    {
        JSONObject jsonObject= new JSONObject(stringFromInputS);

        JSONArray jArray = jsonObject.getJSONArray("items");
        for(int i = 0; i < jArray.length(); i++)
        {
            JSONObject jsonVolInfo = jArray.getJSONObject(i).getJSONObject("volumeInfo");
            String bTitle = jsonVolInfo.getString("title");

            JSONArray bookAuthors = jsonVolInfo.getJSONArray("authors");
            for(int j = 0; j < bookAuthors.length(); j++)
            {
                String bAuthor = bookAuthors.getString(i);
            }

            JSONArray jsonIndustrialIDArray = jsonVolInfo.getJSONArray("industryIdentifiers");
            for(int k = 0; k < jsonIndustrialIDArray.length(); k++)
            {
               String isbn10 = isbn10 + "\n" + jsonIndustrialIDArray.getString(k);
            }
       }
    }
} 
```

所以我想要做的是专门获取 ISBN_10 标识符，仅此而已。在这种情况下，它是“1558607129”。我想知道如何指定仅解析 isbn_10 数字，或者是否有人可以指出我这样做的正确方向。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:50:21.863

也许是这样的？

```
JSONArray jsonIndustrialIDArray = jsonVolInfo.getJSONArray("industryIdentifiers");
for(int k = 0; k < jsonIndustrialIDArray.length(); k++) {
    JSONObject isbn = jsonIndustrialIDArray.getJSONObject(k);
    if (isbn.getString("type").equals("ISBN_10")) {
         String isbn10 = isbn.getString("identifier");
         break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T00:19:20.537

完全像坚果一样，我将添加一个小例子

```
private void test() {
    try {
        JSONObject jso = new JSONObject("{ \"type\" : \"ISBN_10\" ,  \"identifiant\" : \"1558607129\" }");
        String type = jso.getString("type");
        int idNumber = jso.getInt("identifiant");
        System.out.println("RESULT=>  type: "+type+" and number: "+idNumber);
                //RESULT=>  type: IBSN_10 and number: 1558607129

    } catch (JSONException e) {
        e.printStackTrace();
    }
} 
```

:)

# mysql - Mysql：大文本类型字段的慢查询问题

> ID：14990849
> 
> 赞同：0
> 
> 时间：2013-02-20T22:06:40.763
> 
> 标签：mysql, phpmyadmin

我有一个超过 150k 行的表。表中的一列具有“文本”类型。此字段包含超过 50k 个字符的文本。这意味着我有 150k 的文本块，其中存储在该列中的字符超过 50k。

文本是不同网页的 HTML 源。因此，我不能使用 varchar 类型，因为我需要保留换行符。

在选择此列的位置或在 WHERE 子句中进行查询时，查询非常慢并且需要永远完成。

例如，做一个简单的查询，开头是：

```
SELECT my_text_column FROM my_table LIMIT 1000 
```

需要超过 30 秒。1/150 的桌子需要 30 秒，这真的很糟糕。

我尝试将索引添加到此列，但我似乎无法将索引添加到文本类型列。

我可以做些什么来优化此列并确保我的所有查询都能快速进行？

编辑：

完整的表结构是`：

```
CREATE TABLE IF NOT EXISTS `my_table` (
  `url_id` int(10) NOT NULL AUTO_INCREMENT,
  `url` varchar(500) NOT NULL,
  `source` text NOT NULL,
  `completed` tinyint(4) NOT NULL DEFAULT '0',
  PRIMARY KEY (`url_id`),
  KEY `completed` (`completed`),
  KEY `url` (`url`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=150775 ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T01:23:54.213

如果您的列值至少为 50K，那么您发布的查询将检索 50M 的结果集。如果是这样的话，需要很长时间也就不足为奇了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-20T22:34:32.283

你试过全文索引吗？与正常指数略有不同。msdn上有很多例子

# sql-server - 在 MDX 和 SSAS 中使用默认度量的 SOP

> ID：14990850
> 
> 赞同：0
> 
> 时间：2013-02-20T22:06:40.963
> 
> 标签：sql-server, ssas, mdx

我正在阅读为数不多的关于 MDX 的高评价书籍之一，*实用 MDX 查询*，这本书大量利用了您可以在 MDX 中使用默认度量的事实。就个人而言，我不喜欢这个功能，而且我认为它最终节省的按键数量是不值得的。明确说明您要查看的内容有什么害处？

```
select
from
[cube name] 
```

看起来你在自找麻烦，当你把东西扔进切片机时，情况会变得更糟。对此有何其他意见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:47:58.050

在某些情况下，您希望 MDX 查询考虑您在多维数据集配置中所做的更改，而无需重写它。

您仍然可以添加`[dim].[hierarchy].DefaultMember`切片器，但它没有用，并且使查询的可读性降低。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T06:38:23.383

以我的经验，依赖默认度量通常是不走运的。最好是明确的，避免以后出现意外。

# php - 使用 REGEXP 在 MySQL 中搜索

> ID：14990857
> 
> 赞同：0
> 
> 时间：2013-02-20T22:07:08.670
> 
> 标签：php, mysql, regex

我正在使用这样的查询创建搜索功能

```
SELECT personal_info.PersonalID, personal_info.FullName FROM personal_info

INNER JOIN skillset ON personal_info.PersonalID = skillset.PersonalID
INNER JOIN language ON personal_info.PersonalID = language.PersonalID

WHERE personal_info.FullName LIKE '%%'
AND skillset.SkillName REGEXP 'pl|google'
AND language.Language REGEXP 'ita|vol'

HAVING COUNT(*) 
```

此查询按预期返回结果，但是，当我更改它以确保

再次通过更改`skillset.Skillname REGEXP 'pl|google'`为`skillset.Skillname REGEXP 'pl|adafrtesd'`

当我认为它不会返回任何东西时，它返回相同的值，有人可以帮忙吗？我还在学习 MySQL。:D

我的表结构：

技能组
PersonalID | 技能名称130105
| PL
130105 | 谷歌

语言
PersonalID | 语言
130105 | 意大利
130105 | 沃拉普克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:35:19.940

如果没有聚合，您无法在一个查询中比较同一个表的两行。最好从 MySQL 中选择所有可能的有效行并使用 PHP 循环遍历数据，因为您将能够维护状态（例如，哪个人有什么技能），然后将最终结果与请求相匹配。

在 MySQL 中，您可以使用`GROUP_CONCAT`

```
SELECT personal_info.PersonalID, personal_info.FullName,
    GROUP_CONCAT(Language ORDER BY Language) AS languages,
    GROUP_CONCAT(SkillName ORDER BY SkillName) AS skills
FROM personal_info
JOIN skillset ON personal_info.PersonalID = skillset.PersonalID
JOIN language ON personal_info.PersonalID = language.PersonalID
AND skillset.SkillName REGEXP 'pl|google'
AND language.Language REGEXP 'ita|vol'
GROUP BY PersonalID
HAVING
    skills LIKE '%pl%' AND skills LIKE '%google%' 
```

# javascript - Highcharts 未定义

> ID：14990858
> 
> 赞同：1
> 
> 时间：2013-02-20T22:07:10.043
> 
> 标签：javascript, html

我有这样的代码：

```
 <html>
        <head>
    <title><%=sAtaskaitaTitle%></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name=vs_targetSchema content="http://schemas.microsoft.com/intellisense/ie5">
    <link rel="stylesheet" type="text/css" href="style.css">
    <style type=text/css>
            TH, TD.clTD, TABLE.thinTable 
            {
                border-right: 1px solid;
                border-top: 1px solid;
                border-left: 1px solid;
                border-bottom: 1px solid;
            }
    </style>
    <script language="vbscript">

        Sub OnLoadFunc()
            self.moveTo 0,0
            self.resizeTo window.screen.availWidth,window.screen.availHeight
            document.all.btnclose.focus()
        End Sub

    </script>

    <script type="text/javascript" src="javascript_charts/jquery.min.js"></script>
    <script type="text/javascript">
    $(function () {
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'column',
            margin: [ 50, 50, 100, 80]
        },
        title: {
            text: 'World\'s largest cities per 2008'
        },
        xAxis: {
            categories: [
                'Tokyo',
                'Jakarta'
            ],
            labels: {
                rotation: -45,
                align: 'right',
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Population (millions)'
            }
        },
        legend: {
            enabled: false
        },
        tooltip: {
            formatter: function() {
                return '<b>'+ this.x +'</b><br/>'+
                    'Population in 2008: '+ Highcharts.numberFormat(this.y, 1) +
                    ' millions';
            }
        },
        series: [{
            name: 'Population',
            data: [34.4, 21.8],
            dataLabels: {
                enabled: true,
                rotation: -90,
                color: '#FFFFFF',
                align: 'right',
                x: 4,
                y: 10,
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        }]
    });
});

});
</script>

</head>

<body onload="OnLoadFunc">

    <form id="FORM1" method="post" action="par_atask01.asp">
    <input type="hidden" name="CMD" id="CMD" value="">
    <table width="100%" style="position:absolute;top:10pt;left:10pt;" id="Table1">
        <tr>
            <td nowrap colspan="4" align="left">
                <input type="button"  name="btnclose" style="position:relative;" value=" &nbsp; &nbsp; &nbsp;Grįžti &nbsp; &nbsp; &nbsp;" onclick="window.close()" id="btnclose">
                <input type="button"  value="&nbsp;Spausdinti&nbsp;" name="btnprint" id="btnprint" language="VBscript" onclick="window.print()">
            </td>
        </tr>
        <tr>
            <td align="center" style="font-size:13px;">
                <b><i><%=sAtaskaitaTitle%></i></b>
                <br>
                <%=Left(Now(),10)%>
                <br>
            </td>
        </tr>
        <tr>
            <td>
                <%=GetAtaskaitaInfo(VYKDYTOJAS_SBJ_ID,KONTROLIERIUS_SBJ_ID)%>
            </td>
        </tr>
        <tr>
            <td>
                <br>

            </td>
        </tr>
    </table>
    </form>
    <br>

    <script src="javascript_charts/highcharts.js"></script>
    <script src="javascript_charts/exporting.js"></script>

    <div id='container' style='min-width: 400px; height: 400px; margin: 0 auto'></div>
</body> 
```

我收到这样的错误：

```
SCRIPT1024: Expected statement 
highcharts.js, line 1 character 1
SCRIPT1024: Expected statement 
exporting.js, line 1 character 1
SCRIPT5009: 'Highcharts' is undefined 
par_atask01.asp, line 105 character 9
SCRIPT5009: 'Highcharts' is undefined 
par_atask01.asp, line 105 character 9 
```

我根本没有更改 javascript 文件。路径定义正确。那么有什么理由呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:18:19.483

在黑暗中拍摄，将缺少的类型添加到脚本标签中。

```
<script type="text/javascript" src="javascript_charts/highcharts.js"></script>
<script type="text/javascript" src="javascript_charts/exporting.js"></script> 
```

设置类型，因为您只使用 IE VBScript。我想知道它是否认为您在那里使用 VBScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:19:11.750

你在定义 Highcharts`javascript_charts/highcharts.js`吗？如果是这样，请确保您没有在命名空间中执行此操作。

# forms - 引导向导中的表单验证

> ID：14990861
> 
> 赞同：0
> 
> 时间：2013-02-20T22:07:29.087
> 
> 标签：forms, twitter-bootstrap, jquery-validate

我看了很多例子，但没有一个对我有用。我在向导中有一个表单，并且我在整个网站上都使用了 Bootstrap，我看到并尝试了几个示例，但我没有运气。我希望有人可以帮助找出我做错了什么，提前

所以这是我的html：

```
<div class="input_align">
    <label class="control-label4" for="facility_name">Facility Name</label>

    <input type="text" class="input-largex3" name="facility_name" id="" required >
</div>

<div class="multi_align">
    <div class="input_align input_col1">
        <label class="control-label4" for="facility_npi">Facility NPI</label>
        <input type="text" class="input-mini" id="" name="facility_npi">
    </div>
    <div class="input_align input_col2">
        <label class="control-label2" for="fed_id">Fed ID</label>
        <input type="text" class="input-mini" id="" name="fed_id">
    </div>
    <div class="input_align input_col2">
        <label class="control-label2" for="medicare_id">Med ID</label>
        <input type="text" class="input-mini" id="" name="med_id">
    </div>
</div> 
```

还有我的J

```
$('#new-contract').validate({
        rules: {
          facility_name: {
            required: true,
          },
          facility_npi: {
            required: true,
          },
          fed_id: {
            minlength: 2,
            required: true
          }
        },

        highlight: function(label) {
            $(label).closest('input').removeClass ('success').addClass('error');
        },
        success: function(label) {
            label
                .text('OK!').addClass('valid')
                .closest('input').addClass('success');
        },
        errorPlacement: function(error, element) {
         error.appendTo( element.parents ('input') );
       }
      }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:53:39.670

**1）** 您的`input`元素**必须**包含在`<form></form>`标签中。否则 jQuery Validate 插件将无法工作。

**演示：http: [//jsfiddle.net/uL2Y8/](http://jsfiddle.net/uL2Y8/)**

**2)** 也许你忘了包含 jQuery 和/或 jQuery Validate 插件。查看“框架”和“外部资源”下的 jsFiddle 左侧面板。您是否收到任何 JavaScript 错误？

您应该有两行，按此顺序，其中`src`包含指向您放置这些文件的位置的正确 URL：

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="jquery.validate.js"></script> 
```

**3）** 你有各种各样的小错误。一些无效的 HTML（未封闭`input`的元素）并且您已经两次声明了一些规则。如果您已经`required`在您的`.validate({})`选项/规则中声明，那么您在这里**也不**需要它：

```
<input type="text" name="facility_name" required> 
```

**4)** 也许您不需要覆盖插件的默认`highlight`、`success`和`errorPlacement`回调函数。为这些使用自定义回调函数时，您会丢失错误消息。

[http://jsfiddle.net/uL2Y8/1/](http://jsfiddle.net/uL2Y8/1/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T02:47:34.330

请像下面这样包装您的表格：
检查 Jsfiddle[检查表格](http://jsfiddle.net/GeQ8G/1)

```
<div id="new-contract">
<div class="input_align">
    <label class="control-label4" for="facility_name">Facility Name</label>
    <input type="text" class="input-largex3" name="facility_name"
    id="" required>
</div>
<div class="multi_align">
    <div class="input_align input_col1">
        <label class="control-label4" for="facility_npi">Facility NPI</label>
        <input type="text" class="input-mini" id="" name="facility_npi">
    </div>
    <div class="input_align input_col2">
        <label class="control-label2" for="fed_id">Fed ID</label>
        <input type="text" class="input-mini" id="" name="fed_id">
    </div>
    <div class="input_align input_col2">
        <label class="control-label2" for="medicare_id">Med ID</label>
        <input type="text" class="input-mini" id="" name="med_id">
    </div>
</div> 
```

# delphi - 调用从接口和另一个祖先继承的类的方法

> ID：14990863
> 
> 赞同：5
> 
> 时间：2013-02-20T22:07:34.210
> 
> 标签：delphi, oop, interface, multiple-inheritance

我在实现某些类之间的关系时遇到问题。我得到了三个不同的课程，提供三种不同的形式。所有这些类都使用同一种语言，因此它们都继承自同一个名为`TAncestorServer`. 让我们称其后代`TForm1Server`为 ,`TForm2Server`和`TForm3Server`。`TAncestorServer`包含一个名为`Function1`, so `TForm1`,的抽象方法`TForm2`，并且`TForm3`可以通过继承自它的自己的类毫无问题地调用它，他们可以通过名为 的属性访问这些类`Server`。但问题在于另一种形式，称为`TForm4`！它与其他形式非常相似，但不像它们那样独立。它适用于`TForm2Server`or `TForm3Server`。仍然不是问题，但想象一下另一种方法，例如在和`Function2`中声明的`TForm2Server``TForm3Server`，`TForm4`需要打电话给他们。我可以这样走：

```
if Server is TForm2Server then
   TForm2Server(Server).Function2
else if Server is TForm3Server then
  TForm3Server(Server).Function2; 
```

但它可以变成一个无限的 if-else 子句！所以我认为像多重继承这样的东西可能会有所帮助。我声明了一个名为的接口`IForm4Server`，其中包含`Function2`. 所以`TForm2Server`and`TForm3Server`继承自`TAncestorServer`and `IForm4Server`。我认为这样的事情可以工作：

```
If Server is IForm4Server then
  IForm4Server(Server).Function2; 
```

但是编译器不这么认为，它说它不是有效的类型转换，因为`TAncestorServer`is not `IForm4Server`，这是绝对正确的。`TForm1Server`对实施一无所知`Function2`，必须将其留空。我也不能这样声明，因为`TForm4.Server`它代表了大量的方法和属性，但是我仍然不能将类型转换为.`IForm4Server``Function1``IForm4Server``TAncestorServer`

作为一种解决方案，我可以在`TForm4`like中定义两个不同的属性`GeneralServer: TAncestorServer`，`Form4Server: IForm4Server`然后为它们分配相同的`TForm2Server`or实例`TForm3Server`，但我对此感觉不好。我该怎么做？它有什么标准模式吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T22:51:19.113

实现一个或多个接口是正确的方法，但看起来您对正确的语法有点困惑，并且没有使用接口的经验。

基本的东西是：

*   对于任意数量的类，您都有一个共同的祖先类（或形式）。祖先声明了类以某种方式专门化的虚拟方法。
*   使用任意数量的方法声明一个接口。不要忘记将 GUID 添加到您的界面。
*   扩展您的表单声明以实现声明的接口，将接口添加到类声明并添加声明的方法。
*   您现在可以：
    *   使用祖先类多态调用任何虚方法
    *   询问任何表单是否实现了接口，如果实现，则检索对它的接口引用并调用任何接口方法。所有这些都可以使用[support](http://docwiki.embarcadero.com/Libraries/XE2/en/System.SysUtils.Supports)功能完成。

我做了一个我能想到的最简单的例子，使用表单的视觉继承和一个简单的界面。该示例的摘录如下：

### 共同祖先类：

```
type
  TServerForm = class(TForm)
  private
    { Private declarations }
  public
    { Public declarations }
    procedure Method1; virtual;
  end; 
```

### 界面：

```
type
  IMyInterface = interface
  ['{B7102C7E-F7F6-492A-982A-4C55CB1065B7}']
    procedure Method2;
  end; 
```

### 子形式：

这个继承自TServerForm，实现接口

```
type
  TServerForm3 = class(TServerForm, IMyInterface)
  public
    procedure Method1; override;
    procedure Method2;
  end; 
```

这个只是继承自 TServerForm

```
type
  TServerForm4 = class(TServerForm)
  public
    procedure Method1; override;
  end; 
```

而这个直接继承自TForm并实现接口

```
type
  TNoServerForm = class(TForm, IMyInterface)
  public
    procedure Method2;
  end; 
```

所有表单都是自动创建的，然后，我有这段代码来调用`OnClick`另一个表单（应用程序示例的主表单）上几个 for 按钮的方法：

调用基于多态的虚方法：

```
procedure TForm6.Button1Click(Sender: TObject);
var
  I: Integer;
begin
  for I := 0 to Screen.FormCount - 1 do
  begin
    if (Screen.Forms[I] is TServerForm) then
      TServerForm(Screen.Forms[I]).Method1;
  end;
end; 
```

调用基于接口实现的方法：

```
procedure TForm6.Button2Click(Sender: TObject);
var
  I: Integer;
  Intf: IMyInterface;
begin
  for I := 0 to Screen.FormCount - 1 do
  begin
    if Supports(Screen.Forms[I], IMyInterface, Intf) then
      Intf.Method2;
  end;
end; 
```

这些方法只显示消息，一切正常：

```
procedure TServerForm3.Method2;
begin
  ShowMessage(ClassName + '.Method2');
end; 
```

# ruby - Ruby - 如何从一组方法名称的循环中执行方法

> ID：14990866
> 
> 赞同：1
> 
> 时间：2013-02-20T22:07:47.123
> 
> 标签：ruby, ruby-on-rails-3, rspec-rails

我对 Ruby 和 rails 还很陌生，所以我不太确定如何“以正确的方式”做事，但我有几种来自 Rspec 的方法（get、post、put、delete），我想将它们传递到数组中所以我可以遍历它们以每次执行相同的代码。我认为这很容易，但我不知道该怎么做。

有谁知道这是否可能，良好的做法，以及如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T22:14:12.267

```
['get', 'post', 'put', 'delete'].each {|m| obj.send(m) } 
```

我在 Ruby 项目中经常看到这种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T19:08:23.743

```
 class Message
    def method1
      #something
    end

    def method2
      #something
    end   
  end

  message = Message.new
  methods = [ 'method1', 'method2' ]

  methods.each{ |method| message.send(method) } 
```

或者您可以在声明方法时使用符号而不是字符串，因为它更惯用

使用 public_send 而不是 send 也是最佳实践，除非您实际上是在尝试调用私有方法。

# java - 对 Sharepoint 2010 oData 的 Java HTTP 调用失败

> ID：14990869
> 
> 赞同：0
> 
> 时间：2013-02-20T22:07:56.190
> 
> 标签：java, sharepoint-2010, iis-7.5, odata, ntlmv2

我正在从 Java 调用 Sharepoint 2010 oData 服务，这会导致 400 错误。我可以通过相同的代码（使用 NTLM）成功连接到 XML 格式的 Sharepoint 2010 列表。

我看到一个相关的帖子[HttpClient 同时使用 SSL 加密和 NTLM 身份验证失败](https://stackoverflow.com/questions/9714615/httpclient-using-both-ssl-encryption-and-ntlm-authentication-fails)，其中谈到了相同的服务 (listdata.svc) 和 400 错误。

有谁知道使用什么确切设置来解决上面帖子中的错误？有谁知道他们是否指的是 IIS 中的 .NET 授权规则？

我们使用的是 IIS 7.5。

我的代码如下所示：

```
String responseText = getAuthenticatedResponse(Url, domain, userName, password);
System.out.println("response: " + responseText); 
```

该方法使用 Java 1.6 HTTPURLConnection：

```
private static String getAuthenticatedResponse(
    final String urlStr, final String domain, 
    final String userName, final String password) throws IOException {

    StringBuilder response = new StringBuilder();

    Authenticator.setDefault(new Authenticator() {

        @Override
        public PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication(
                domain + "\\" + userName, password.toCharArray());
        }
    });

    URL urlRequest = new URL(urlStr);
    HttpURLConnection conn = (HttpURLConnection) urlRequest.openConnection();
    conn.setDoOutput(true);
    conn.setDoInput(true);
    conn.setRequestMethod("GET");

    InputStream stream = conn.getInputStream();
    BufferedReader in = new BufferedReader(new InputStreamReader(stream));
    String str = "";
    while ((str = in.readLine()) != null) {
        response.append(str);
    }
    in.close();     

    return response.toString();
} 
```

我得到的错误是：

```
Response Excerpt:
HTTP/1.1 400 Bad Request..Content-Type: application/xml
<message xml:lang="en-US">Media type requires a '/' character.  </message> 
```

[Microsoft 社交媒体类型](http://social.msdn.microsoft.com/Forums/da/adodotnetdataservices/thread/e47ec51b-ea38-49f7-9814-d113907d4e3a)中提到了类似的问题。任何人遇到这个并知道如何解决这个问题？

任何帮助将非常感激！

瓦妮塔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T18:15:52.953

我的同事建议删除内容类型请求标头。从 curl 到 oData 的连接工作，比较请求标头。

**卷曲显示：**

```
> GET /sites/team-sites/operations/_vti_bin/listdata.svc/UBCal?=3 HTTP/1.1
> Authorization: NTLM <redacted>
> User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5
> Host: hostname
> Accept: */* 
```

**Java 在跟踪日志中显示以下内容：**

```
Accept: text/html, image/gif, image/jpeg, *;q=.2, */*; q=.2 
```

我将 Accept 请求标头设置为“ `*/*`”到 getAuthenticatedResponse 方法，如下所示：

```
 //Added for oData to work
conn.setRequestProperty("Accept", "*/*");

InputStream stream = conn.getInputStream();
.... 
```

这解决了 400 错误，我从 Sharepoint oData 服务获得了提要。似乎Java设置了一些干扰的默认请求标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T18:51:13.700

似乎您已经找到了一个可行的解决方案，但这里有一个使用 apache httpcomponents 库的替代方案。

有趣的是它们默认不包含 NTLM，请按照[这些](http://hc.apache.org/httpcomponents-client-ga/ntlm.html)步骤来实现它。

```
HttpContext localContext;

DefaultHttpClient httpclient = new DefaultHttpClient();
    httpclient.getAuthSchemes().register("ntlm", new NTLMSchemeFactory());
    NTCredentials creds = new NTCredentials(user_name, password, domain, domain);
    httpclient.getCredentialsProvider().setCredentials(AuthScope.ANY, creds);

    HttpHost target = new HttpHost(URL, Integer.parseInt(port), "http");
    localContext = new BasicHttpContext();

    HttpPost httppost = new HttpPost(list_name);
    httppost.setHeader("Accept", "application/json");
... 
```

# matlab - matlab从地图创建直方图

> ID：14990876
> 
> 赞同：1
> 
> 时间：2013-02-20T22:08:23.803
> 
> 标签：matlab, histogram

我在 matlab 中有一张地图：

```
containers.Map handle
Package: containers

Properties:
      Count: 3
    KeyType: 'char'
  ValueType: 'double' 
```

例如：

```
keys(dict)
ans = 
    'a'    'b'    'c'
values(dict)
ans = 
    [1]    [1]    [2] 
```

有没有一种简单的方法可以从这张地图构建直方图。我需要的是这样的：![在此处输入图像描述](../Images/60c85c8f2fe9c03f510fe5ad1abaee60.png)

我尝试过这样的事情：`hist(keys(dict), values(dict))`，但问题是`keys(dict)`and`values(dict)`是一个单元格，而 hist 仅适用于向量。

有没有一种简单的方法可以从地图中创建直方图，或者我应该遍历键和值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:49:45.063

刚刚找到正确答案：

```
bar( cell2mat( values(dict) ) ) 
```

试图找到如何为酒吧添加一个漂亮的图例......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T14:48:49.430

要将键添加为 x 标签，请使用：

```
set(gca,'XTick',[1:length(keys(dict))])
set(gca,'xticklabel', keys(dict)) 
```

# bash - 终端打开然后立即关闭

> ID：14990877
> 
> 赞同：-2
> 
> 时间：2013-02-20T22:08:22.237
> 
> 标签：bash

所以我有以下代码（WIP），当我尝试执行它时，终端会立即打开并再次关闭。我不太确定是什么原因造成的，所以如果有人能帮助我，我将不胜感激。代码如下：

```
#!/bin/bash

#displays a menu with options for user to select
showMenu () 

{

zenity --list \
--title="Menu - Choose an option" \
--column="Option No." --column="Option" \
--height="300" --width="475" \
1 "Install Gnome Disk Utility & gParted" \
2 "Create File - Demo.txt" \
3 "Remove File - Demo.txt" \
4 "Search for "BASH" in the .profile file (Case insensitive)" \
5 "Exit" 

}

while [ 1 ]
do

CHOICE="$(showMenu)"
case $CHOICE in
"1")
    #gets and installs gnome disk utility and gparted
    sudo apt-get install gnome-disk-utility
    sudo apt-get install gparted
    ;;
"2")
    #creates a blank text file on the desktop called            Demo.txt
    touch /home/admin/Desktop/Demo.txt
    zenity --info \
    --text="File Demo.txt created on Desktop" \
    ;;
"3")
    zenity --question \
    --text="Are you sure you want to remove Demo.txt?" \
    if ["$?" = 0]
    then
    #removes the Demo.txt file from the desktop
    rm /home/admin/Desktop/Demo.txt

    zenity --info \
    --text="File has been removed" \
    ;;
"4")
    #searches the .profile file for the word 'BASH' (Not case           sensitive)
    grep -i "BASH" /home/mintuser/.profile
    ;;
"5")
    echo "Are you sure you want to exit? Press y/n"
    read YN
    case "$YN" in
"y")
    exit
    ;;
"n")
    #command for 'ESC' in BASH. Clears the screen
    printf "\ec"
    ;;
*)
    echo "Invalid option"
    ;;
esac
done 
```

我有一个可以运行的脚本的命令行版本，但是当我使用 Zenity 小部件创建一个 GUI 时，问题就发生了。感谢您的阅读和我可能收到的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T22:41:35.863

你有一些错误，我在下面指出：

```
#!/bin/bash

#...

# [ is a command, just like any other. It just happens to be commonly used on if/while.
#while [ 1 ]
while true
do
    CHOICE="$(showMenu)"
    case $CHOICE in
    # ... 
    "3")
        zenity --question \
        --text="Are you sure you want to remove Demo.txt?" #\
        # Note the removal of the line continuation --------^
        # As I said, [ is a program. It therefore requires all arguments be separated by whitespace.
        # Also, = is for string comparison; use -eq for numeric.
        #if ["$?" = 0]
        if [ "$?" -eq 0 ]
        then
            # Indent properly so you see the missing terminators
            #removes the Demo.txt file from the desktop
            rm /home/admin/Desktop/Demo.txt

            zenity --info \
            --text="File has been removed" #\
            # Another line continuation we  ^ don't want
            # With the indentation, we can see you were missing a fi.
        fi
        ;;
    "4")
        #searches the .profile file for the word 'BASH' (Not case           sensitive)
        grep -i "BASH" /home/mintuser/.profile
        ;;
    "5")
        echo "Are you sure you want to exit? Press y/n"
        read YN
        case "$YN" in
        "y")
            exit
            ;;
        "n")
            #command for 'ESC' in BASH. Clears the screen
            printf "\ec"
            ;;
        *)
            echo "Invalid option"
            ;;
        esac
    # Missing a second esac
    esac
done 
```

# c++ - 使用 C++11 统一初始化时出现“结构初始化程序中的多余元素”错误

> ID：14990880
> 
> 赞同：10
> 
> 时间：2013-02-20T22:08:29.337
> 
> 标签：c++, c++11, copy-constructor, initializer-list, uniform-initialization

我对以下编译器错误感到惊讶：

```
template <typename T>
struct A
{
    A(T t): t_{t} {}

    T t_;
};

struct S
{
};

int main()
{
    A<S> s{S{}};
} 
```

错误是（带有clang）：

```
test.cpp:4:16: error: excess elements in struct initializer
    A(T t): t_{t} {}
               ^
test.cpp:15:10: note: in instantiation of member function 'A<S>::A' requested here
    A<S> s{S{}};
         ^ 
```

GCC 给出了类似的错误。

我希望表达式`t_{t}`尝试`t_`从`t`. 由于`S`有一个隐式生成的复制构造函数，我不认为这是一个问题。

有人可以解释这里发生了什么吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-20T22:13:40.717

`S`可能有一个隐式生成的复制构造函数，但`S`也是别的东西。一个*聚合*。因此，（几乎）任何使用`{}`都会对其执行聚合初始化。所以 的内容`{}`应该是聚合成员的值。而且由于您的聚合是空的...繁荣。

In template code, uniform initialization syntax should be avoided for exactly these reasons. For an unknown type `T`, you can't be sure exactly what `{...}` will do.

# javascript - 输入删除/撤消的事件处理程序

> ID：14990886
> 
> 赞同：8
> 
> 时间：2013-02-20T22:08:48.217
> 
> 标签：javascript, jquery

我需要检查所有会改变我的文本输入内容的事件。到目前为止，我有用于键入、剪切和粘贴的处理程序。但也可以通过突出显示文本并单击删除或撤消来更改内容。有没有办法监听这些事件？

```
$('#input').on('paste cut  keyup ',function() {
    //add delete and undo to listner
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T22:18:15.660

您还有更多问题，您还必须担心具有自动填充功能的浏览器等。因此，HTML5 已包含该[`input`](http://www.w3.org/html/wg/drafts/html/master/forms.html#event-input-input)事件，该事件已包含在现代浏览器中。

*有关捕获浏览器将让*您捕获的每个可能的更改事件（*）的方法，请参阅[此答案](https://stackoverflow.com/questions/7105997/javascript-change-event-on-input-element-fires-on-only-losing-focus)，而每次更改不会触发多次。

 *[(*) 看起来他们忘记了`cut`，所以也添加它。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T22:16:53.997

我建议使用`keydown`和`input`：http: [//jsfiddle.net/vKRDR/](http://jsfiddle.net/vKRDR/)

```
var timer;
$("#input").on("keydown input", function(){
    var self = this;
    clearTimeout(timer)
    // prevent event from happening twice
    timer = setTimeout(function(){
        console.log(self.value);
    },0);
}); 
```

keyup 不会捕获诸如 ctrl 之类的特殊键，输入将捕获诸如粘贴删除等之类的内容，即使是从上下文菜单中也是如此。

通过使用 keydown 和 input，事件立即发生，而不是等待用户释放按钮或模糊输入。

keydown 完成大部分工作，输入在 keydown 无法处理的地方拾取，例如上下文菜单删除/粘贴/剪切

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-08T14:00:00.270

使用这些，他们会得到所有的改变：

```
$(container).bind('keyup input propertychange paste change'), function (e){}); 
```

此外，您可以做一件事来检查此 onchange 事件中的值：

```
$(function(){
  $('input').on('keyup input propertychange paste change', function(){
      if ($(this).data('val')!=this.value) {
          alert('Something has been changed in the input.');
      }
      $(this).data('val', this.value);
  });
}); 
```

希望这适用于您的情况。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T22:15:31.547

您至少缺少按键和更改。我不知道“更改”是否适用于这些操作，我知道当输入元素失去焦点时通常会调用更改。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-20T22:14:28.113

使用更改事件。

`$('#input').on('change', function(){});`*

# joomla2.5 - 以编程方式填充 Joomla 用户 ID

> ID：14990888
> 
> 赞同：0
> 
> 时间：2013-02-20T22:08:51.087
> 
> 标签：joomla2.5, session-cookies, userid

在 Joomla 2.5 站点上使用 Cometchat 和跨域设置。

Cometchat 栏正确显示并且正在获取正确的会话信息，但未在 URL 中填充用户 ID。因此，当用户登录主站点时，他们并没有登录 Cometchat。

Cometchat提供的joomla库的head.php中的代码是：

`$buffer . = '<script> var userid = "USERID"; // Must be populated programmatically document.cookie = "cc_data="+userid; </script>'`

如上述脚本中所述，URL 以“basedata=USERID”结尾，而不是正确的用户 ID。如果手动更改错误部分中显示的链接以添加正确的用户 ID 日志，cometchat 将显示用户已登录。

我用来尝试动态提供用户 ID 的任何代码都会引发未知标识符或非法令牌的错误。

我一直在网上到处寻找这一点信息，但无济于事。帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T01:12:10.157

[http://docs.joomla.org/JFactory/getUser](http://docs.joomla.org/JFactory/getUser)

```
// this gets the user object
$user =& JFactory::getUser();

// if user is not a guest print the following user info
if (!$user->guest) {
  echo 'You are logged in as:<br />';
  echo 'User name: ' . $user->username . '<br />';
  echo 'Real name: ' . $user->name . '<br />';
  echo 'User ID  : ' . $user->id . '<br />';  // if you need id this is it
} 
```

# asp.net - 您可以将文字作为超链接的一部分吗？

> ID：14990891
> 
> 赞同：1
> 
> 时间：2013-02-20T22:09:03.333
> 
> 标签：asp.net, vb.net, hyperlink, literals

所以我的代码隐藏看起来像这样，并且作为文本正常工作。但我需要将值添加到超链接

```
If pt.SelectedValue = "1" Then
litTier.Text = "/link.aspx"
Else
litTier.Text = "link2.aspx"
End If 
```

我的超链接目前看起来像这样

```
<a href='/link.aspx' onclick="return newWindow2('/link.aspx','300','300');"> 
```

当我添加文字代替 /link.aspx 时，我收到错误“文本”不是“System.Web.UI.HtmlControls.HtmlAnchor”的成员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:20:26.300

您需要的是一个超链接 aspx 服务器控件，而不是任何文字控件

前任：

```
<asp:HyperLink id="hyp1" NavigateUrl="/link.aspx" 
 OnClientclick="return newWindow2('/link.aspx','300','300');" runat="server"/> 
```

然后在你的代码隐藏中

```
If pt.SelectedValue = "1" Then
hyp1.NavigateUrl = "/link.aspx"
Else
hyp1.NavigateUrl = "link2.aspx"
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T22:17:13.297

> 当我添加文字代替 /link.aspx 时，我收到错误“文本”不是“System.Web.UI.HtmlControls.HtmlAnchor”的成员。

错误消息（如您​​所料）是正确的：`Text`不是可用的属性。使用`InnerText`或`InnerHtml`代替。

[http://msdn.microsoft.com/en-US/library/system.web.ui.htmlcontrols.htmlanchor_properties(v=vs.80).aspx](http://msdn.microsoft.com/en-US/library/system.web.ui.htmlcontrols.htmlanchor_properties(v=vs.80).aspx)

但听起来你有更多的问题。例如，这个文字在哪里？

你应该：

*   `<asp:Hyperlink>`使用或在标记中声明超链接`<a runat="server">`
*   使用适当的属性设置 URL
*   使用适当的属性设置文本
*   `onclick`使用 Attributes 集合设置其他客户端属性（如）

# php - 如何使用 Selenium Server 测试 PHPUnit 中的 404 错误

> ID：14990894
> 
> 赞同：0
> 
> 时间：2013-02-20T22:09:07.657
> 
> 标签：php, magento, selenium, phpunit

我正在尝试使用 Selenieum Server 使用 PHP 单元编写测试，我要做的一项测试是检查图像和超链接的 404 错误页面

最困难的部分是测试是针对 Magento 设置的，因此它们有一个自定义的 404 错误页面，它实际上是一个 CMS 页面，但在您遇到 404 错误时在后端被选中，此外，我的本地服务器环境何时我查看的图像将 404 仅显示一个白页，在队友拥有的不同服务器环境上的同一浏览器中，他们显示文本说“错误请求”，两个 URL 相同，我们在完全相同的方式

当我尝试使用`$this->open('kjdasfhkfajdhkfjhafds')`which 转到 404 错误页面时，它似乎没有引发异常，我可以检查页面上的元素，看看它们是否与我会得到的预期 404 页面匹配，但正如我上面所说，查看图像给出了不同的页面，并且该页面在服务器之间也不同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:09:19.673

我的情况完全相同，我正在尝试寻找解决方案。到目前为止，似乎工作的一个是检查。

```
$this->check($url); 
```

似乎至少在 404 上返回一个错误，所以我现在就这样做。如果有人有更好的建议，请随时分享:-)

# java - Java中是否有没有else部分的条件运算符？

> ID：14990895
> 
> 赞同：2
> 
> 时间：2013-02-20T22:09:10.650
> 
> 标签：java, conditional-operator

我知道你可以在 Java 中使用这样的东西：

```
(a > b) ? a : b; 
```

没有其他部分是否有类似的东西？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-20T22:11:29.707

它是一个表达式，而不是一个语句，这意味着它总是会计算出一些东西。如果没有“其他部分”，那么如果测试为假，则表达式将没有任何东西可以评估。所以，不，没有 else 就没有类似的东西了。

我喜欢使用[条件运算符](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25)的一点是你可以分配类似的东西

```
foo =  a > b ? c : d; 
```

并且阅读它你知道 foo 得到了分配给它的东西，无论测试是否正确。因此，它为您提供了一种方法来指示分配的值取决于某些测试。

Groovy 有一些类似的运算符：

`?:`，Elvis 运算符，如果左侧的表达式为空，则将右侧的值分配为默认值。

`?.`，安全空运算符，如果左侧计算结果为 null，则计算结果为 null。这对于您有一系列可能为空的事物的情况很方便，例如`foo?.bar?.baz`，如果某些事物为空，您宁愿不使用 NPE 炸毁，但宁愿不输入所有的空检查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T22:11:51.893

不，没有。这没有任何意义。

`?:`是三元比较运算符 - 一个表达式。如果没有 else 语句，表达式的值是多少？C# 有一个速记版本`??`，但这只是语法糖，而 Java 没有这样的东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T22:22:20.610

我猜你是用它来给一个var赋值，我称之为“c”，这个想法是你只想在if语句为真时赋值。正常的方法是：

```
if(a > b) c = a; 
```

但是，如果您*真的*想使用三元语法，您可以编写：

```
c = a > b ? a : c; 
```

请注意，三元括号是可选的，所以我省略了它们。

# c# - EF4.1 使用 ICollection 属性的子项更新数据

> ID：14990898
> 
> 赞同：0
> 
> 时间：2013-02-20T22:09:14.373
> 
> 标签：c#, entity-framework

我正在尝试使用实体框架和 ICollection 子属性更新数据库数据。

对于 INSERT 情况，EF 会自动保存子数据，但对于 Updating 情况则不会。

所以我进行了手动更新，但我想有一种我不知道的自动更新方法。

请检查我的代码，并给我建议

```
public class Parent
{
    [Key]
    public int ID {get; set;}   
    public string Name {get; set;}

    public virtual ICollection<Child> Children{ get; set; }
}

public class Child
{
    [Key]
    public int ID {get; set;}
    public int ParentID { get; set; }
    public string Name {get; set;}
} 
```

// INSERT 的控制器方法

```
public void InsertTest(){
    //generate new Parent Data with child
    Parent parent = new Parent() { 
        Name = "Nancy"
    };

    parent.Children.Add(new Child()
    {
        Name = "First Son"
    });

    parent.Children.Add(new Child()
    {
        Name = "Second Son"
    });

    var parentRepository = unitofwork.parentRepository;
    parentRepository.insert(parent); //context.Set<Parent>().Add(parent);
    unitofwork.Save();
    // it save child entity well
} 
```

// UPDATE的控制器方法

```
public void UpateTest()
{
    //generate new Parent Data with child
    Parent parent = new Parent()
    {
        ID = 1,
        Name = "Nancy"
    };

    parent.Children.Add(new Child()
    {
        ID = 1,
        ParentID = 1,
        Name = "First Son Renamed"
    });

    parent.Children.Add(new Child()
    {
        ID = 2,
        ParentID = 1,
        Name = "Second Son"
    });

    // add new data
    parent.Children.Add(new Child()
    {
        Name = "Third Son"
    });

    var parentRepository = unitofwork.parentRepository;
    parentRepository.update(parent); //context.Set<Parent>().Attach(entityToUpdate); context.Entry(entityToUpdate).State = EntityState.Modified;
    unitofwork.Save();
    // it save parent data, but it does not change any for child data

    // *** To make work, I did like this, ***
    // var childRepository = unitofwork.childRepository;
    //foreach (Child c in parent.Children.ToList())
    //{
    //    if (c.ID < 1)
    //    {
    //        childRepository.update(c);
    //    }
    //    else
    //    {
    //        childRepository.insert(c);
    //    }
    //}

    //unitofwork.Save();

    // then it works.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:28:15.283

由于您没有直接附加所选内容并将它们标记为脏，因此 EF 无法在不丢失数据库原始值的情况下检测它们是否已更改。

从数据库中加载子项并将值注入其中（特别有用，如果您还想删除列表中不再选择的选项）或使用工作单元在附加它们后将已选择标记为已修改（但是，较少的 dB 操作，不会删除现有的孩子）。

从您的代码中，我假设 update() 方法是将实体标记为脏的方法。

# wordpress - 用于实时多站点的 WordPress 主题

> ID：14990901
> 
> 赞同：0
> 
> 时间：2013-02-20T22:09:20.527
> 
> 标签：wordpress, local

我想伸出手，看看是否有人能指出我正确的方向：

我有一个实时运行的多站点 WordPress 安装。我现在想开始为实时多站点编写一个主题，以便在我完成本地开发后安装主题。

问题是：最好的入门方法是什么？

*   我是否应该获取实时安装的整个根目录并设置我的本地环境以模拟多站点的实时版本？=> 这个问题是实时版本被烘焙到 wpengine 并且配置文件似乎附加到该框架。

    *   我是否应该从全新的 WordPress 本地安装开始，并在完全完成后将其迁移到实时多站点？=> 这是假设它不会与实时版本的多站点方面发生冲突。

任何帮助将不胜感激伙计们，想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:20:46.477

您可以考虑使用此插件[http://wpebooks.com/replicator/](http://wpebooks.com/replicator/)来复制和设置“临时”站点。然后我会在登台网站上开发主题，而不用担心搞砸“制作”/直播内容。

# php - 如何从已在 PHP 中覆盖的对象的父类运行方法？

> ID：14990904
> 
> 赞同：-1
> 
> 时间：2013-02-20T22:09:24.363
> 
> 标签：php, language-construct

这可能是重复的帖子，但寻找答案只是让我想到了 C、Java 和 ColdFusion 的方法......

给定带有方法的类 A`foo()`和类 B 扩展 A 并且还具有`foo()`，我想运行类似的东西：

```
$b = new B();
$b->A::foo(); (this is working C syntax, but that doesn't seem to work) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:13:47.497

您不能直接从对象调用它，您必须从内部调用它`A->foo()`，例如：

```
class A 
{
    function foo() 
    {
        echo "I am A::foo() and provide basic functionality.<br />\n";
    }
}

class B extends A 
{
    function foo() 
    {
        parent::foo();
    }
}

$b = new B;
$b->foo(); 
```

# c# - 如何将枚举传递给父类的静态函数以实例化子类？

> ID：14990906
> 
> 赞同：0
> 
> 时间：2013-02-20T22:09:25.170
> 
> 标签：c#, .net, oop, inheritance, constructor

我有 3 节课，`ParentClass`, `ClassA`, `ClassB`. `ClassA`和都是`ClassB`的子类`ParentClass`。我想尝试创建类型的对象`ClassA`或`ClassB`使用某种枚举来识别类型，然后将对象实例化为父类型。我怎样才能动态地做到这一点？请看下面的代码，以及说`//what do I put here?`. 谢谢阅读！

```
enum ClassType
{
    ClassA,
    ClassB
};
public abstract class ParentClass
{

    public ParentClass()
    {
        //....
    }

    public static ParentClass GetNewObjectOfType(ClassType type)
    {
        switch(type)
        {
            case ClassType.ClassA: 
                //What do I put here?
                break;
            case ClassType.ClassB:
                //What do I put here?
                break;
        }

        return null;
    }
}

public class ClassA:ParentClass
{
    //....
}
public class ClassB:ParentClass
{
    //.......
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T22:11:31.517

为什么不只是这个？

```
public class ParentClass 
{
    public static ParentClass GetNewObjectOfType(ClassType type)
    {
        switch(type)
        {
            case ClassType.ClassA: 
                return new ClassA();
                break;
            case ClassType.ClassB:
                return new ClassB();
                break;
        }

        return null;
    }
}

public class ClassA:ParentClass
{
    //....
}
public class ClassB:ParentClass
{
    //.......
} 
```

但是，如果您在子类上定义默认构造函数，这会简单得多......

```
public class ParentClass 
{
    private static Dictionary<ClassType, Type> typesToCreate = ...

    // Generics are cool
    public static T GetNewObjectOfType<T>() where T : ParentClass
    {
        return (T)GetNewObjectOfType(typeof(T));
    }

    // Enums are fine too
    public static ParentClass GetNewObjectOfType(ClassType type)
    {
        return GetNewObjectOfType(typesToCreate[type]);
    }

    // Most direct way to do this
    public static ParentClass GetNewObjectOfType(Type type)
    {
        return Activator.CreateInstance(type);
    }
} 
```

# python - 如何让 Python 检查文件是否存在，如果不存在则创建它？

> ID：14990907
> 
> 赞同：8
> 
> 时间：2013-02-20T22:09:32.990
> 
> 标签：python, file, python-3.x, py2app

如何让 Python 查看是否有它需要的文件以及是否没有创建一个文件？

基本上我希望 Python 查找我的文件名`KEEP-IMPORTANT.txt`，但是当我使用它创建我的应用程序时`py2app`它不起作用，因为它没有文件。当我尝试制作文件时它不起作用（我认为是因为 python 必须生成它）。

我希望 Python 检查文件是否存在，如果存在则不生成文件，否则生成文件。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-20T22:19:14.790

这个单线将检查文件是否存在，如果不存在则创建它。

```
open("KEEP-IMPORTANT.txt", "a") 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-20T22:16:49.023

[类似的问题](https://stackoverflow.com/questions/82831/how-do-i-check-if-a-file-exists-using-python)

这是最好的方法：

```
try:
    with open(filename) as file:
        # do whatever
except IOError:
    # generate the file 
```

还有 os.path.exists()，但这可能是一个安全问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-27T18:37:31.603

如果您只想检查和创建文件而不立即写入任何内容，那么另一个干净而小型的解决方案就是这个。

```
import os
if os.path.exists(file_path) == False:
    open(file_path, "w").close 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-12T00:54:37.787

```
import os.path
from os import path
    if path.exists('highScore.txt'):
         print("It exists")
    else:
         print("It doesn't exist") 
```

# php - 在 css 中从 db 更改背景颜色

> ID：14990908
> 
> 赞同：-1
> 
> 时间：2013-02-20T22:09:33.223
> 
> 标签：php, sql, css

我在 db sql 中有表

```
CREATE TABLE `Tools` (
    `Id_Tools` int(11) unsigned NOT NULL AUTO_INCREMENT,
    `N_Imagelogo` varchar(100),
    `Back_Co` varchar(15),
    PRIMARY KEY (`Id_Tools`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1; 
```

我有文件 css 它是 style.php

```
<?php header("Content-type: text/css");
 require_once('config.php');

mysql_select_db($database_config, $config);
$query_Tools = sprintf("SELECT * FROM Tools");
$Tools = mysql_query($query_Tools, $config) or die(mysql_error());
$row_Tools = mysql_fetch_assoc($Tools); 
?>
body {
background-color:<?php echo $row_Tools['Back_Co'];?>;
} 
```

连接到数据库正确输出也正确毕业但文件css（背景颜色）不起作用

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-20T22:44:39.397

您可能希望使用像[http://pcss.wiq.com.br/](http://pcss.wiq.com.br/)这样的 CSS 预处理器在服务器端生成 CSS 表，从您的数据库中提取。您将无法直接在常规 CSS 表中使用 php 变量或从 Mysql 表中提取的任何内容

# c# - 从 C# 将现有视频文件提供给 Skype 呼叫的最简单方法？

> ID：14990915
> 
> 赞同：6
> 
> 时间：2013-02-20T22:10:16.157
> 
> 标签：c#, webcam, skype

我在 SO 和其他地方都看过很多地方，但似乎没有任何东西可以直接回答我的问题（至少不使用我熟悉的术语）。

> **注意：**我们知道让视频自动回复器顺利工作并看起来不错的挑战，但这个问题与此无关。现在，我专注于将视频文件提供给 Skype 的直接技术问题。

**背景**
我被要求创建一个 Skype “自动回复”，用于支持音频和视频通话以及 IM 聊天的演示环境。

**问题**
为此创建一个 IM 聊天“机器人”相对容易，并且似乎存在用于通过呼叫播放音频文件的现有 Skype API，但没有用于播放视频文件的 API。

**做我的功课**
在 Skype API 中，还有一个名为 SkypeKit 的版本，据说它提供了一些与标准桌面 API 不同的功能。我已提交访问 SkypeKit 的请求，但尚未收到对此的回复。

除了 Skype API 的支持之外，我们的下一个想法是必须有虚拟网络摄像头组件可供下载/购买，以便我们播放视频，以便 Skype 相信它来自网络摄像头。我在 stackoverflow 上发现的与此更接近的问题之一是：

> [如何在 .NET 中使用虚拟网络摄像头驱动程序进行传输](https://stackoverflow.com/questions/9278341/how-to-transmit-with-a-virtual-webcam-driver-in-net)

但是，该帖子的作者将他的请求限制为免费/开源解决方案，而我可以选择使用商业组件（在合理范围内）。此外，对它的唯一回应意味着使用 DirectShow 构建您自己的虚拟网络摄像头。

在 SO 和其他网站上都有很多关于使用 DirectShow 构建自己的虚拟网络摄像头的讨论，但这似乎比仅仅花几百美元购买东西要昂贵得多。我对 DirectShow 或任何相关内容的经验为零，仅了解概念和术语就需要时间。有可能我可以花时间学习所有这些，但如果有更简单的解决方案，我会更喜欢。

就现有组件而言，我唯一能找到的是[Virtual Camera SDK](http://www.virtual-camera-sdk.com/)，但它似乎专注于捕获视频（来自屏幕或真实网络摄像头），而不是冒充其他应用程序的网络摄像头。他们的网站信息也比较模糊，这让我有点谨慎。

我发现了很多其他产品和讨论，但是在这里列出它们会很乏味且没有信息量。

**问题**
我的实际问题有两个部分：

1.  将视频文件流式传输到 Skype 通话的最佳方式是什么？
2.  如果答案是通过虚拟网络摄像头，那么完成此任务的最简单方法是什么（即良好的现成组件、示例代码等）？

> 顺便说一句，这里有人甚至建议只在屏幕上播放视频并设置一个真正的网络摄像头将图像流式传输到 Skype。您可以想象，完全编程的解决方案会更好。

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:42:35.457

使用当前技术，我想说最好的选择确实是使用虚拟网络摄像头实现。

有几种可用的解决方案（快速的 Google 搜索 - www.google.com/search?q=virtual+webcam - 返回了很多选项）。完整的 POC 解决方案将涉及：

*   初始化虚拟网络摄像头，让它为视频播放做好准备；
*   确保 Skype 使用虚拟网络摄像头作为视频源；
*   使用 Skype API 检测 Skype 来电；
*   使用 Skype API 接听电话，并使用虚拟设备作为目标开始视频播放。
*   清理：在视频结束时挂断，或者如果远程呼叫者挂断，则停止播放。

# c++ - 收到未初始化局部变量的警告

> ID：14990916
> 
> 赞同：0
> 
> 时间：2013-02-20T22:10:18.010
> 
> 标签：c++

我正在编写一个程序，我试图重载到 << 运算符。当我调试我的代码时，我收到一条错误消息，指出 p 未初始化。我觉得好像我在 for 语句中初始化 p，但我想我不是。似乎无法弄清楚我将如何初始化 p。这是我收到错误消息的代码。有什么建议吗？

```
ostream &operator <<( ostream &out, const LList & llist )
{

for( LList *p = p; p != 0; p = p -> next )
    out << p;

return out;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T22:12:35.003

你正在用它自己初始化 p ，它什么都不做，也许你的意思是把它指向正在传递给函数的 llist 参数？

也许是这样的？

```
for( const LList *p = &llist; p != 0; p = p -> next ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:17:37.837

```
 ostream &operator <<( ostream &out, const LList & llist )
 {
      for(const LList *p = llist ; p != 0; p = p -> next )
           out << p;
      return out;
 } 
```

首先，您应该使用 const 而不是非 const，其次 - 您需要将 p 分配给您发送的变量。

希望这会有所帮助，祝你有美好的一天:)

# wordpress - 我如何将画廊、帖子和页面从受损的 wordpress 安装复制到新的安装？

> ID：14990918
> 
> 赞同：0
> 
> 时间：2013-02-20T22:10:35.873
> 
> 标签：wordpress, backup, disaster-recovery

在我的一台服务器上安装的 Wordpress 已被入侵。以不会导出任何后门的方式导出图库、帖子和页面的最快方法是什么？那么如何将它们导入到全新的 Wordpress 安装中呢？

我想避免复制任何 php 文件，因为攻击者可能留下了后门。我还想避免复制整个数据库，因为攻击者也可能在那里留下了后门。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:48:36.130

Wordpress 内置导出（WordPress eXtended RSS 或 WXR）将包含您的帖子、页面、评论、自定义字段、类别和标签。图像可以从旧位置（必须是实时的）下载到新位置；请务必在导入时选中“下载和导入文件附件”框。

如果有由某个插件管理/创建的画廊，那么您必须更详细地查看使用的特定插件。

# html - Tumblr：如何让 div 环绕照片？

> ID：14990920
> 
> 赞同：0
> 
> 时间：2013-02-20T22:10:54.703
> 
> 标签：html, css, image

[这](http://dimashishkov.tumblr.com/)是网页。

如何使`div`图像紧密环绕？现在它在图像底部停留了 4px（见红线，我给了 div 红色背景）。

我不明白那些 4px 来自哪里以及如何摆脱它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:15:29.397

给出图像`vertical-align: bottom`或给出包含的 div `line-height: 0`。

这是由于图像的设置`inline-block`和`inline`元素的渲染方式。您还可以使图像成为块级元素。

你的选择。

# java - 它使用了很多内存哈希集或数组

> ID：14990923
> 
> 赞同：-4
> 
> 时间：2013-02-20T22:11:16.063
> 
> 标签：java, arrays, performance, memory, hashset

我创建了一个名为 randomQueue 的数据类型，它使任何对象入队，并随机从中出队随机项目生成器的 api 应该如下

```
enqueue(Item item)
dequeue()
isEmpty()
size()
private resize()
private shrink() 
```

运行时间应该摊销我认为两者的性能在两种实现中应该是相同的，但我想知道内存怎么样，有没有办法计算我的程序使用的内存而不是计算每一行代码的内存使用情况？PS我用java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:38:43.137

假设一个 32 位 HotSpot VM，a`java.util.HashSet`每个元素大约需要 32 个字节，而一个数组大约需要 4 个字节。如果您要重新实现其中一个结构，当然，这些数字对您没有任何用处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:14:41.830

这两种不同的结构在内存消耗方面确实没有明显的优势。哈希集通常会更快地检索数组，因为在数组中您必须遍历所有项，直到找到您要查找的项并将哈希集分组。

# c - 以 HDF5 格式表示可变长度二维数组？

> ID：14990924
> 
> 赞同：1
> 
> 时间：2013-02-20T22:11:21.337
> 
> 标签：c, multidimensional-array, hdf5

查看 HDF5 C API，我发现`H5Tvlen_create`用于创建 1d 可变长度数据类型。多维变长数据类型怎么样？他们受支持吗？

很明显，可变长度的一维数据类型可以组合起来创建二维数据类型。但是，有没有更直接的方法？我的问题是我有一个结构数组（复合类型），它们具有类型`int**`（或 2d int 数组）的属性。但是，二维数组的大小不是固定的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:33:44.770

# jquery - 如何根据先前的输入动态填充表单

> ID：14990926
> 
> 赞同：0
> 
> 时间：2013-02-20T22:11:25.893
> 
> 标签：jquery, ruby-on-rails, ajax, ruby-on-rails-3, padrino

我是 RoR/Padrino 的新手。我想向表单添加自动归档功能。假设输入用户 ID 时，用户的名称显示在名称字段中。And when a specific user type is selected a dropdown menu only shows entries matching the user type.

我需要使用什么样的技术？我读了很多关于 jQuery 和 AJAX 的文章，但我真的迷失在与这个“问题”相关的大量问题中。有人可以提示我在哪里阅读什么以及阅读什么以获得所需的知识吗？

在此先感谢帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:53:12.140

这是一个例子：

```
$('#your_model_user_id').on('change', function() {
  $.ajax({url: "/your_model/getname/" +  $(this).val(),type: 'get'});
}); 
```

然后在 your_model 中创建一个动作：

```
def getname
  @yourmodel = YourModel.find(params[:id])
end 
```

创建路线：

```
get '/your_model/getname/:id' => 'your_models#getname' 
```

创建文件 app/views/your_models/getname.js.erb：

$('#your_model_username').val('<%= @yourmodel.name %>');

简而言之

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:48:01.467

有几种方法可以做这种事情。

1.  编写自己的 javascript 并手动完成所有操作
2.  使用像[jQuery Tokeninput这样的库](http://loopj.com/jquery-tokeninput/)

这里有一些链接可能会有所帮助：

[http://railscasts.com/episodes/88-dynamic-select-menus](http://railscasts.com/episodes/88-dynamic-select-menus)

[http://blog.sandeep.me/2011/08/dynamic-select-menus-in-rails-3.html](http://blog.sandeep.me/2011/08/dynamic-select-menus-in-rails-3.html)

# c# - 如何在表单控件中显示打印预览？

> ID：14990937
> 
> 赞同：1
> 
> 时间：2013-02-20T22:12:15.937
> 
> 标签：c#, wpf, printing, wpf-controls

我不知道如何在控件中显示打印预览。

我有`class Printer : PrintDocument`它包含我想要打印的内容，但是如何以表单和控件显示它。

* * *

试过这个，它适用于 Windows 窗体应用程序，但我需要一些 WPF 应用程序。在这里，我使用了 PrintPreviewControl，但我不知道如何以 WPF 形式显示它。另外我更喜欢使用 DocumentViewer 来显示预览。任何人都可以帮助我吗？

```
 PrintPreviewControl ppc;
     //Here goes MouseDown I just used btn_Click for testing
     private void btnClick_Click(object sender, EventArgs e)
     {
         Printer p = new Printer();
         ppc = new PrintPreviewControl();
         ppc.Document = p;
         ppc.Location = new Point(10, 50);
         ppc.Width = 700;
         ppc.Height = 1000;
         ppc.Name = "PPC";

         this.Controls.Add(ppc);
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:21:20.403

应该是这样的：

```
var printDialog = new PrintPreviewDialog();

printDialog.Document = new Printer();
printDialog.ShowDialog(); 
```

# c++ - “美化”宏

> ID：14990946
> 
> 赞同：3
> 
> 时间：2013-02-20T22:13:12.337
> 
> 标签：c++, c++11, macros

观看 Herb Sutter 关于 C++ 及其他语言原子的演讲，我瞥见了他关于易于使用的锁定/解锁机制的想法，该机制可能会或可能不会出现在该语言的未来标准中。

该机制看起来像：

```
atomic{
// code here
} 
```

不想等待未来的标准我尝试自己实现这个，我想出的是：

```
#define CONCAT_IMPL(A, B) A ## B
#define CONCAT(A, B) CONCAT_IMPL(A, B)

# define atomic(a) { \
static_assert(std::is_same<decltype(a), std::mutex>::value,"Argument must be of type std::mutex !");\
struct CONCAT(atomic_impl_, __LINE__)\
{\
std::function<void()> func;\
std::mutex* impl;\
CONCAT(atomic_impl_, __LINE__)(std::mutex& b)\
{ \
    impl = &b;\
    impl->lock();\
}\
CONCAT(~atomic_impl_, __LINE__)()\
{ \
    func();\
    impl->unlock(); \
}\
} CONCAT(atomic_impl_var_, __LINE__)(a);\
CONCAT(atomic_impl_var_, __LINE__).func = [&]() 
```

和用法：

```
std::mutex mut;
atomic(mut){
    // code here
};} 
```

显然，问题是**};** 我想删除它。

这有可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T22:33:31.720

`if`您可以通过在语句中定义变量的技巧来做到这一点。

```
template <typename M>
struct atomic_guard_ {
  explicit atomic_guard_(M& m) : lock(m) {}
  atomic_guard_(M const&) =delete; // Since we unfortunately have to use uniform
  atomic_guard_(M&&) =delete;      // initialization, make it at least a little safe
  operator bool() const { return false; }
  std::lock_guard<M> lock;
};

#define atomic(m) \
  if (atomic_guard_<std::decay<decltype(m)>::type> _{m}) {} else

int main()
{
  std::mutex m;
  atomic(m) {
    std::cout << "a\n";
  }

  atomic(m) // this works too, but I think this is ok
    std::cout << "b\n";
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T22:30:02.390

使用[`lock_guard`](http://en.cppreference.com/w/cpp/thread/lock_guard). 如果你想涉及一个宏，我想你可以，它会节省你选择一个变量名，它会避免意外创建一个临时而不是变量的（非常容易的）错字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T23:07:42.720

一个更简单的版本将使用`for`和`std::unique_lock`：

```
#include <iostream>
#include <type_traits>
#include <mutex>

#define atomic(a) \
  for(auto lock=std::unique_lock<std::decay<decltype(a)>::type>(a); lock; lock.unlock())

int main()
{
  std::mutex m;
  atomic(m) {
    std::cout << "Hello, world!" << std::endl;
  }
} 
```

# ios - nib 中的 UIView 在 iPad 上是 nil，在 iPhone 上不是 nil

> ID：14990954
> 
> 赞同：3
> 
> 时间：2013-02-20T22:13:38.510
> 
> 标签：ios, nib, null, iboutlet

我的应用程序有一个奇怪的问题。我在运行时使用名为“LoginViewController”的 NIB 加载 VC。该 NIB 有一堆对`UIView`放置在 NIB 中的对象的出口，如下所示：

![在此处输入图像描述](../Images/d258f2c7c6d8e301a6b93fe82df6e10d.png)

在运行时，我将这些 UIView 对象作为标题动态放置在我的表格视图中。在这种情况下，每个单独`UIView`的（除了`UITableView`右边的那个）都被设置为像这样的 IBOutlet。当然，每个都有不同的名称：

```
@property (strong, nonatomic) IBOutlet UIView *connectionInProgressView; 
```

现在，在我的 VC`viewDidLoad`方法中，我运行了所有这四个单独的视图，并通过写入日志来确保它们存在：

```
NSLog(@"connection in progress view: %@", self.connectionInProgressView); 
```

我的问题是：`self.connectionInProgressView`在 iPad 上是 nil 而在 iPhone 上不是 nil。无论平台如何，所有其他视图都不是 nil 并且被实例化。我在 iOS 5.0、5.1 和 6.1 的模拟器中运行它。我可以在所有 iPad 模拟器上重现该问题。我的应用程序运行良好，并在 iPhone 上使用微调器加载视图，但在 iPad 上它无法加载该视图，因为它是零！为什么！？

我尝试了以下方法：

*   检查我的 NIB 的文件所有者是否指向正确的视图
*   不`self.connectionInProgressView`指向任何其他 IBOutlet
*   检查所有其他子视图是否以与违规视图相同的方式连接。他们是。
*   删除`self.connectionInProgressView`所有 NIB 连接后删除并重新创建它。
*   从视图中删除活动指示器并仅加载带有`UILabel`内部的视图。不走运，它不是活动指示器。
*   检查 VC 中可能引用的任何代码`self.connectionInProgressView`。没有（除了它的 nil 声明`viewDidUnLoad`）。
*   `UINavigationController`检查和的 AppDelegate 属性上的属性属性类型`LoginViewController`。
*   保留一份`LoginViewController`关于 AppDelegate 的副本，尽管这看起来很浪费并且对结果没有任何影响。

[编辑 2]

*问题：VC是如何加载的*

我的`UINavigationController`AppDelegate 上有一个属性。那`UINavigationController`是分配初始化的`applicationDidFinishLaunchingWithOptions`，我将我的 VC 作为根视图控制器传递给它。我在这一点上实例化了 VC。

```
// Create login/start up views
LoginViewController *loginViewController = [[LoginViewController alloc] initWithNibName:@"LoginViewController" bundle:nil];

self.loginViewNavigationController = [[UINavigationController alloc] initWithRootViewController:loginViewController];

if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad)
    self.loginViewNavigationController.modalPresentationStyle = UIModalPresentationFormSheet; 
```

请注意，这在 iPhone 上是有效的，尽管我稍后会`UINavigationController`在 iPad 上将其作为模式表单（不确定这是否会导致我的问题）呈现。

稍后在 AppDelegate 中，当一个不同的委托类抛出一个事件时，我将呈现这个 UINavigationController，我的 VC 以模态方式包含在其中。我这样做：

```
if (self.loginViewNavigationController != nil) {

    [self.window.rootViewController presentViewController:self.loginViewNavigationController animated:YES completion:nil];
} 
```

我正在疯狂地试图确定为什么这个特定的视图拖到我的 NIB 上并与所有其他视图一样连接起来，在 iPad 上是 nil 而不是在 iPhone 上是 nil。

[编辑 1] 在搜索重复问题时，我没有找到这个：

[一些指向 nil 的 IBOutlets](https://stackoverflow.com/questions/9202714/a-few-iboutlets-pointing-to-nil)

我并不孤单！

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T22:43:42.610

在构建通用应用程序时，您确定没有为 iPhone 和 iPad（通常）创建单独的 NIB`LoginViewController.xib`吗`LoginViewController~ipad.xib`？

或者您可能认为您只有一个 XIB，但在某些时候您有一个专用于 iPad 的 XIB，它被编译成一个 NIB，即使您在项目中删除了 XIB 文件，编译后的 iPad 专用 XIB 仍然在构建产品中.

无论如何，请尝试：

*   清理您的项目，甚至更好地清理您的构建产品目录
*   要执行后者，您可以删除派生数据文件夹（“组织者”窗口 -> “项目”选项卡 -> 在左侧选择您的项目 -> 单击“派生数据”旁边的“删除”按钮）
*   从所有模拟器中删除您的应用程序，以确保
*   再次构建并运行

如果这不起作用，一些想法可以帮助您调试和确定问题是否与使用不同 XIB 的 iPad 有关：

*   您可以尝试一些测试，例如修改另一个`IBOutlet`XIB，例如断开另一个`IBOutlet`不在`nil`XIB 中连接的视图的连接，这样当您再次运行您的应用程序时，它应该被记录为`nil`这次。如果它`nil`在 iPhone 模拟器上（正如您刚刚断开它所预期的那样）......但仍然不在`nil`iPad 模拟器上，那么这肯定意味着您为 iPhone 和 iPad 使用了不同的 XIB 文件。
*   您还可以在 XIB 中更改`UIView`正确连接到您的其中一个的我们的颜色`IBOutlet`，并查看更改是否反映在 iPhone 和 iPad 上或仅反映在 iPhone 上，因此请检查您正在编辑的此 XIB 是否相同在 iPad 上使用与否。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-06T14:50:01.803

我遇到了类似的问题，清理了我的项目，删除了派生数据，确保我没有为 iPad 使用单独的 xib；似乎没有任何效果。原来我的问题非常简单。我像这样初始化我的视图控制器：

```
// In Swift
let vc = MyViewController() 
```

而不是直接使用 nibName ：

```
let vc = MyViewController(nibName: "MyViewController", bundle: NSBundle.mainBundle()) 
```

由于我的 nil-outlet 错误似乎只在 iPad 上测试时出现，所以我从没想过检查控制器是如何初始化的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-29T15:26:45.457

对于这种特定情况，我遇到了一件奇怪的事情。我在 中`UITextField`成为了第一反应者`viewDidLoad`，并且我已经`NSNotifications`迷上了它`UITextField`来管理键盘框架等。但有趣的是，当通知在 中发送时`viewDidLoad`，仅在 iPad 上，插座为零（与 iPhone 不同）。奇怪的。

# sql - PostgreSQL - 查找具有特定值的最旧记录

> ID：14990958
> 
> 赞同：4
> 
> 时间：2013-02-20T22:13:57.907
> 
> 标签：sql, postgresql, group-by, greatest-n-per-group, distinct-on

我有一个文档管理系统，可以在历史表中记录所有历史事件。我被要求能够在给定日期为给定客户提供状态为 5 的最旧 doc_id。该表看起来像这样（为简单起见被截断）：

```
doc_history:
    id integer
    doc_id integer
    event_date timestamp
    client_id integer
    status_id integer 
```

client_id 和 status_id 列是事件发生后文档的值。这意味着由 doc_id 定义的文档的最大历史事件行将匹配文档表中的相同列。通过特定事件日期限制事件，您可以查看当时文档的值。因为这些值不是静态的，所以我不能简单地搜索 status_id 为 5 的特定 client_id，因为找到的结果可能与文档的 max(id) 不匹配。希望这有点道理。

我发现工作但很慢的是以下内容：

```
select
    t.*
from
    (select
        distinct on (doc_id),
        *
    from
        doc_history
    where
        event_date <= '2013-02-17 23:59:59'
    order by
        doc_id, id desc) t
where
    t.client_id = 9999 and
    t.status_id = 5
limit 1; 
```

基本上，我在给定的最大事件日期之前获取特定文档 ID 的最大 ID，然后验证该最大历史项目是否已分配给给定客户端，状态设置为 5。

以我的方式这样做的缺点是我正在扫描所有客户的所有历史记录以获取它们的最大值，然后找到我正在寻找的一个客户和状态。截至目前，这扫描了大约 1506 万行，在我的开发服务器上大约需要 90 秒（这不是很快）。

为了使事情变得更复杂，我需要在前一周的每一天都这样做，或者每次运行总共七次。此外，系统中的所有单据都以状态 5 开头，表示新单据。这使得该查询将只返回为该客户端输入的第一个文档：

```
select * from doc_history where client_id = 9999 and
    status_id = 5 and
    event_date <= '2013-02-17 23:59:59'
    order by id limit 1; 
```

我希望做的是扫描，直到找到与特定客户端和状态值匹配的特定文档的最大历史记录，而不必首先找到所有客户端的所有文档 ID 的最大 ID。我不知道这是否可以通过窗口函数（分区）或我目前没有看到的其他逻辑来完成。

doc_history 表中的事件之一的示例：

```
# select id, doc_id, event, old_value, new_value, event_date, client_id, status_id from doc_history where doc_id = 9999999 order by id;
    id    | doc_id  | event | old_value | new_value |         event_date         | client_id | status_id
----------+---------+-------+-----------+-----------+----------------------------+-----------+-----------
 25362415 | 9999999 |    13 |           |           | 2013-02-14 11:49:50.032824 |      9999 |         5
 25428192 | 9999999 |    15 |           |           | 2013-02-18 11:15:48.272542 |      9999 |         5
 25428193 | 9999999 |     7 | 5         | 1         | 2013-02-18 11:15:48.301377 |      9999 |         1 
```

事件 7 是状态改变，新旧值显示从 5 变为 1，这在 status_id 列中有所体现。对于小于或等于 2013-02-17 23:59:59 的 event_date，上述记录将是 status_id 为 5 的最旧的“NEW”文档，但在 2013 年 2 月 17 日之后就没有了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T02:31:35.833

这应该*更快*：

```
SELECT *
FROM   doc_history h1
WHERE  event_date < '2013-02-18 0:0'::timestamp
AND    client_id = 9999
AND    status_id = 5
AND NOT EXISTS (
   SELECT 1
   FROM   doc_history h2
   WHERE  h2.doc_id = h1.doc_id
   AND    h2.event_date < '2013-02-18 0:0'::timestamp
   AND    h2.event_date > h1.event_date  -- use event_date instead of id!
   )
ORDER  BY doc_id
LIMIT  1; 
```

我很难理解你的描述。基本上，正如我现在所理解的那样，您希望在给定时间戳之前具有给定时间戳最大的行`doc_id`，`(client_id, status_id)`其中`event_date`不存在具有更高`id`（等于 later `event_date`）相同的其他行`doc_id`。

请注意我如何替换您示例中的条件：

```
WHERE  event_date <= '2013-02-17 23:59:59' 
```

和：

```
WHERE  event_date < '2013-02-18 0:0' 
```

由于您有小数秒，因此您的表达式会因以下时间戳而失败：
`'2013-02-17 23:59:59.123'`

我在半连接中使用`h2.event_date > h1.event_date`而不是，因为我认为稍后假设更大的等于是不明智的。你可能应该独自依靠。`h2.id > h1.id``NOT EXISTS``id``event_date``event_date`

为了加快速度，您需要一个形式为（更新）的[**多列索引：**](http://www.postgresql.org/docs/current/interactive/indexes-multicolumn.html)

```
CREATE INDEX doc_history_multi_idx
ON doc_history (client_id, status_id, doc_id, event_date DESC); 
```

`doc_id, event_date DESC`我在您的反馈后切换了位置，这应该更好地适应`ORDER BY doc_id LIMIT 1`.

如果条件`status_id = 5`不变（您总是检查`5`），则[部分索引](http://www.postgresql.org/docs/current/interactive/indexes-partial.html)应该更快，但是：

```
CREATE INDEX doc_history_multi_idx
ON doc_history (client_id, doc_id, event_date DESC)
WHERE status_id = 5; 
```

和：

```
CREATE INDEX doc_history_id_idx ON doc_history (doc_id, event_date DESC); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T22:44:39.540

*在给定日期为给定客户端提供状态为 5 的最旧 doc_id*

这将做到：

```
select
    min(doc_id) doc_id
from
    doc_history
where
    client_id = 9999
    and status_id = 5
    and date event_date = '2013-02-17' 
```

我不止一次地阅读了你的问题，无法理解你在说什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T23:36:07.793

如果我做对了，您的等效且可能很快的查询将是：

```
select t.*
from doc_history
where event_date <= '2013-02-17 23:59:59' and
    t.client_id = 9999 and
    t.status_id = 5
order by doc_id, id desc
limit 1; 
```

# azure - 如何在 Windows Phone 8 上从 Azure 中的表中读取数据

> ID：14990959
> 
> 赞同：1
> 
> 时间：2013-02-20T22:14:01.457
> 
> 标签：azure, windows-phone-8

它是 Windows Phone 8 (Azure) 应用程序。我尝试将整个表 PicturesTable 获取到 PictureList。但我只有空行（行数与 Azure 数据库中的行数相同，因此它同步正确但没有值）。

```
public class PicturesTableItem
{
    public int Id { get; set; }

    [DataMember(Name = "name")]
    public string Name { get; set; }

    [DataMember(Name = "category")]
    public string Category { get; set; }

    [DataMember(Name = "address")]
    public string Address { get; set; }

}

public partial class MainPage : PhoneApplicationPage
{
    private MobileServiceCollectionView<PicturesTableItem> PicturesItems;
    private IMobileServiceTable<PicturesTableItem> PicturesTable = App.MobileService.GetTable<PicturesTableItem>();
    private List<PicturesTableItem> PictureList = new List<PicturesTableItem>();

    // Constructor
    public MainPage()
    {
        InitializeComponent();

        // Set the data context of the listbox control to the sample data
        DataContext = App.ViewModel;

        // Sample code to localize the ApplicationBar
        //BuildLocalizedApplicationBar();
    }

    private void RefreshPicturesTableItems()
    {
        PicturesItems = PicturesTable.ToCollectionView();
    }

    /*
     * Override
     */
    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        RefreshPicturesTableItems();
    }
} 
```

我想以这种方式展示它

```
string temp = "";
foreach (var element in PictureList)
{
    temp = temp + element.Address.ToString()+"\n";
}
MessageBox.Show(temp.ToString()); 
```

你能告诉我如何以好的方式做到这一点吗？

我不能去

```
PictureList = PicturesTable.ToListAsync(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:01:17.570

确保数据库中的**列**名与`DataMember`名称相同。就我而言，这是解决同一问题的方法。

# jsf - JSF 2 默认日期时间转换器模式

> ID：14990960
> 
> 赞同：4
> 
> 时间：2013-02-20T22:14:01.717
> 
> 标签：jsf, converter, datetime-format

我的 JSF 页面以这种格式显示来自托管 bean 的日期时间：“MM/dd/yyyy h:mm a”

我想避免在不同页面中重复转换器声明：`<f:convertDateTime type="both" pattern="MM/dd/yyyy h:mm a" dateStyle="short" timeStyle="medium" />`

有没有办法让所有 DateTime 字段的上述转换器默认？

（JSF 2 的经验：2 个月。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T00:27:52.173

只需扩展[`DateTimeConverter`](http://docs.oracle.com/javaee/6/api/javax/faces/convert/DateTimeConverter.html)后面的类`<f:convertDateTime>`并在构造函数中设置默认值。

```
@FacesConverter("defaultDateConverter")
public class DefaultDateConverter extends DateTimeConverter {

    public DefaultDateConverter() {
        setPattern("MM/dd/yyyy h:mm a");
    }

} 
```

用它作为`<f:converter converterId="defaultDateConverter" />`

请注意，我省略了其他属性，因为它们在指定时都会被忽略`pattern`。

# php - 从数据库中删除时，AJAX 脾气暴躁或速度慢

> ID：14990961
> 
> 赞同：0
> 
> 时间：2013-02-20T22:14:05.120
> 
> 标签：php, html, jquery, twig, redbean

当我使用 AJAX 通过 PHP 编辑 SQL 数据库时遇到问题。它有效，但您必须单击“删除”按钮，刷新页面以查看它没有工作，然后再次执行完全相同的操作，然后再工作，或者有时只需等待几秒钟再重新加载页面。这似乎很奇怪。

这是我的 HTML 和 JS

```
<html>
<script type="text/javascript">
$("#placeTable").on('click', 'button.remove', function(e){
    var targ = e.target;
    var id = $(targ).attr('data-id');
    bootbox.confirm("Are you sure you want to remove?", function(result) {
    if (result == true) {
            $.post('/removelocation', {lid : id}, function(){
                $(targ).closest('tr').remove();
            })
        }
    })
})
</script>
<table id="placeTable" class="table table-hover table-condensed">
    <tr>
        <th>Date</th>
        <th>Place</th>
        <th>Comments</th>
        <th>Actions</th>
    </tr>
    {% for locat in location %}
    <tr>
        <td data-id="{{locat.getID}}">{{locat.date}}<br/>{{locat.time}}</td>
        <td data-id="{{locat.getID}}">{{locat.name}}</td>
        <td data-id="{{locat.getID}}">{{locat.description}}</td>
        <td>
            <button data-id="{{locat.getID}}" class="remove btn btn-link"><i class="icon-remove"></i></button>
            <button data-id="{{locat.getID}}" class="edit btn btn-link"><i class="icon-edit"></i></button>
         </td>
    </tr>
    {% endfor %}
</table>
<div id="editmodal" class="modal hide fade">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    </div>
    <div class="modal-body">
        <form class="form-vertical" action="" method="POST">
            <div class="joshPad">
            <fieldset>
                <label for="logPlaceChange">Place Name</label>
                <input type="text" id="logPlaceChange" name="logPlaceChange"></input>
                <label for="logPlaceDescriptionChange">Comments</label>
                <textarea rows="3" id="logPlaceDescriptionChange" name="logPlaceDescriptionChange"></textarea>
                <label class="checkbox">
                    <input type="checkbox" name="logCurrentPlace"> Use my location</input>
                </label>
            </fieldset>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal" aria-hidden="true">Close</a>
        <a href="#" class="btn changeSubmit">Save changes</a>
    </div>
</div>
</html> 
```

这是我的 PHP

```
<?php

case 'removelocation' :
    R::trash(R::load('location', $_POST['lid']));

    //I HAVE ALSO TRIED THIS TO TRASH ELEMENT AND BEFORE USING AJAX WHEN USING A SIMPLE POST FORM BOTH WORK FOR ME;

    $locationID = $_POST['lid'];
    $locat = R::load('location', $locationID);
    $usery = R::load('user', $_SESSION['user']->getID());
    R::trash($locat);
    R::dependencies(array('location'=>array('user')));
    unset($usery->ownLocation[$locationID]);
    R::store($usery);

exit;

?> 
```

任何帮助弄清楚为什么它不能正常工作将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-22T15:22:25.647

我认为最接近的函数可能指向不同的选择器，我不知道您使用哪个 PHP 或 JS 工具来呈现表格数据，但一个好主意是封装您的 JS 代码以映射到文档就绪状态如果您的按钮在 jQuery 映射其点击功能之前没有被加载。

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#placeTable").on('click', 'button.remove', function(e){
            var id = $(this).data('id');
            bootbox.confirm("Are you sure you want to remove?", function(result) {
                if (result) {
                    $.post('/removelocation', {lid : id}, function(){
                        $('#placeTable tr[data-id="'+ id +'"]').remove();
                    });
                }
            });
        });
    });
</script> 
```

# regex - 带长度的正则表达式数字

> ID：14990962
> 
> 赞同：2
> 
> 时间：2013-02-20T22:14:06.350
> 
> 标签：regex, limit, numeric

如何创建带小数点分隔符的数字正则表达式，但也限制长度

我创建了这个：

```
^[0-9]([0-9]*[.]?[0-9]){1,10}$ 
```

那么 1234567890.1234567890 是有效的，但使用 20（+1 -> 小数分隔符）字符。

如何限制 10 个字符？

有效的：

```
1234567890
123456789.0
12345678.90
1234567.890
123456.7890
12345.67890
12345.67890
1234.567890
123.4567890
12.34567890
1.234567890 
```

无效：

```
12345678901
12345678901.
123456789.01
12345678.901
1234567.8901
123456.78901
12345.678901
12345.678901
1234.5678901
123.45678901
12.345678901
1.2345678901
.12345678901 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T22:22:33.650

```
^(?:\d{1,10}|(?!.{12})\d+\.\d+)$ 
```

**解释：**

```
^          # Start of string
(?:        # Either match...
 \d{1,10}  # an integer (up to 10 digits)
|          # or
 (?!.{12}) # (as long as the length is not 12 characters or more)
 \d+\.\d+  # a floating point number
)          # End of alternation
$          # End of string 
```

请注意（如在您的示例中）`.123`或`123.`无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T22:27:07.753

如果您不使用正则表达式来计算长度，它会更清晰甚至更快。测试它`^\d+(?:\.\d+)$`，删除点并取长度。

如果你真的需要它是一个正则表达式，你可以使用[前瞻](http://www.regular-expressions.info/lookaround.html)来分别检查格式*和*长度：

```
^\d{1,10}$|^(?=.{11}$)\d+\.\d+$ 
```

**解释：**

```
^          # At the start of the string
(?:        # either
 \d{1,10}  # up to 10 digits
|          # or
 (?=       # from here
  .{11}    # 11 characters
  $        # to the end
 )         # and as well
 \d+\.\d+  # two dot-separated digit sequences
)          # 
$          # 
```

# javascript - 跨浏览器偏移宽度

> ID：14990963
> 
> 赞同：7
> 
> 时间：2013-02-20T22:14:07.813
> 
> 标签：javascript, jquery, html, css, cross-browser

我在不同浏览器中使用 offsetWidth 时遇到问题。结果的这种差异导致了一些奇怪的布局。我创建了一个非常小的示例来显示我所看到的。

[jsbin](http://jsbin.com/ezefiv/2/edit "jsbin")

**HTML**

```
<table id="tbl">
  <tr>
    <td>Cell 1</td>
    <td>Cell 2</td>
  </tr>
</table>
<button onclick="calc()">Calculate Offset Width</button>

<div>Cell 1 offsetWidth: <span id="c1offWidth"></span></div> 
```

**js**

```
function calc(){
  document.getElementById('c1offWidth').innerHTML =
      document.getElementById('tbl').children[0].children[0].offsetWidth;
} 
```

**CSS**

[Erik Meyer 的重置 CSS](http://meyerweb.com/eric/tools/css/reset/)

当我在 chrome、safari 和 opera 上运行它时，单元格 1 的偏移宽度返回的值是 72。当我在 firefox 和 IE9-10 上运行它时，返回的值是 77。

我的印象是这是计算元素宽度的最佳方法，包括填充和边框。

是否存在始终返回相同结果的跨浏览器解决方案？我尝试使用 jQuery，但结果更加令人困惑。

**编辑** 因为每个人都在推荐outerWidth，所以我也为此制作了一个jsbin。结果仍然因浏览器而异。Chrome 返回 36；IE9-10 和 Firefox 返回 39。

[jsbin 更新了](http://jsbin.com/ezefiv/3/edit)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T22:19:03.093

由于您使用 jQuery 标记了帖子，我认为 jQuery 解决方案是可以接受的。有什么问题[`outerWidth()`](http://api.jquery.com/outerWidth/)？

例如：

```
function calc()
{
    var the_width = $('#tbl tr:eq(0) td:eq(0)').outerWidth();
    $('#c1offWidth').html(the_width);   
} 
```

使用 jQuery 为表格带来了许多优点（正如您可以从上面所需的代码量减少中看到的那样）。您还应该考虑使用非侵入式事件处理程序。例如，`onclick`从您的 中删除属性`button`，然后执行以下操作：

```
$(function() {  
    $('button').click(function() {  
        var the_width = $('#tbl tr:eq(0) td:eq(0)').outerWidth();
        $('#c1offWidth').html(the_width);  
    });
}); 
```

请参阅[**jsFiddle 演示**](http://jsfiddle.net/H2uGz/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-01T09:27:01.133

您的示例中的实际问题是不同的浏览器使用不同的默认字体进行渲染。单元格的大小由内容定义。如果您为元素设置了明确的宽度（如评论之一中正确说明的那样），您将获得明确且相等的结果。

ps：不能发表评论...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T22:16:22.913

`offsetWidth`是不可靠的跨浏览器。我会建议使用 jQuery[`outerWidth()`](http://api.jquery.com/outerWidth/)代替。

```
$("#your-element").outerWidth(); 
```

见[**演示**](http://jsfiddle.net/tNhqv/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T22:18:37.940

[`.outerWidth()`](http://api.jquery.com/outerWidth/)如果您需要获得跨浏览器计算的宽度，包括边框和边距等内容，您可以使用 jQuery 。

# asp.net - 在文本框中使用内联文本不替换

> ID：14990965
> 
> 赞同：0
> 
> 时间：2013-02-20T22:14:10.890
> 
> 标签：asp.net, inline

是否可以使用内联代码在文本框中呈现动态文本？我已经尝试了以下方法，但它会在文本框中打印整个块。

```
<asp:TextBox runat="server" ID="FirstName" ValidationGroup="" text='<%="test"%>' ></asp:TextBox> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:15:52.620

这是你想要的？

```
<input type="text" value="<%=test%>" /> 
```

# javascript - 角度 js 中继器中的上下文菜单

> ID：14990966
> 
> 赞同：2
> 
> 时间：2013-02-20T22:14:10.637
> 
> 标签：javascript, angularjs, contextmenu, right-click

我有一个项目，客户坚持使用右键菜单。问题是从右键菜单中的选项调用的函数需要访问模型的信息。这是一个示例小提琴[http://jsfiddle.net/7yCwW/1/](http://jsfiddle.net/7yCwW/1/) `$scope.junkDataSet = [{index:foo, color:bar}]`。基本上我需要的是一个带有显示颜色选项的上下文菜单。单击“显示颜色”后，会显示一条警报，说明右键单击的项目的颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:10:05.110

**原始答案**

您可以将相关数据绑定为元素内的专有属性，并让接收函数使用 el.getAttribute('mycolor'); 提取属性值；

[http://jsfiddle.net/7yCwW/3/](http://jsfiddle.net/7yCwW/3/)

```
<div ng-controller="Ctrl">
    <div ng-repeat="junk in junkDataSet" onclick="fooClick(event)" mycolor="{{junk.color}}" class="contextmenu">right click here</div>
</div>

<div id="myoutput" ></div> 
```

...

```
function fooClick(e){
   var e = e || window.event
   var t = e.target;
    var clr = t.getAttribute("mycolor")
    var el = document.getElementById('myoutput');
    el.innerHTML = "You picked " + clr;
    el.style.background = clr;
    if(clr == 'black' || clr == "blue'){
        el.style.color = "white";
    }
    else{
        el.style.color = "black";
    }
} 
```

**编辑** 我通过传递完整的对象引用并使用 ng-click 指令来玩弄。你*可以*使用

```
<div ng-repeat="{{junk in junkDataSet}}" onclick='fooClick({{junk}})' > ... </div>
// in JSFiddle becomes invalid markup, but is actually OK
<div onclick="{ "index" : 0, "color" : "red" }" > ... </div> 
```

使用 ng-click 是不行的，因为在上下文菜单上，您必须返回 false 以防止发生默认的浏览器右键单击操作。目前无法使用 ng-click 指令 b/c 来实现这一点，它解析为控制器方法，并且 return 语句混淆了该操作。

我玩过 ng-contextmenu，但该事件处理程序功能不存在。添加到 Angular 很容易，但不是核心产品的一部分

这会让你在哪里？使用原始答案（将数据绑定到特殊属性），或者您可以在 JS 变量中维护一些缓存引用到完整列表并仅绑定某个属性中的键。或者将密钥作为参数传递给您的函数。不优雅，但你不能在 v1 框架中拥有一切:)

# jquery - Tablesorter - 空单元格上的过滤功能

> ID：14990971
> 
> 赞同：1
> 
> 时间：2013-02-20T22:14:32.953
> 
> 标签：jquery, tablesorter

我正在使用带有过滤器功能小部件的 tablesorter 2.7.9（Mottie's fork），我希望内置的选择下拉列表能够选择空单元格值作为过滤器选项。除了在所有空单元格中放置假值之外，有谁知道这样做的简单方法？我的过滤器下拉列表已经包含 2 个空白选项：一个用于取消选择过滤器，一个用于匹配我表中的数据值，但当然将其设置为此只会取消选择过滤器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:38:53.147

遗憾的是，没有一种简单的方法可以使用过滤器小部件的编写方式来选择空单元格。主要问题是我们如何区分清除过滤器和搜索空表格单元格？

我可以添加一些方法来专门查找空表格单元格，或者如您所说，将“假”值添加到空表格单元格中 - 一种方法是`<span style="display:none">{empty}</span>`在空单元格内部添加。然后选择下拉菜单将包含一个`{empty}`条目，以便用户知道他们正在选择什么（[演示](http://jsfiddle.net/abkNM/417/)）。

这对你有用吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-12T16:45:21.823

您可以使用正则表达式搜索空字符串

```
var filters = [],
col = <insertColumnNumberHere>, // the column number to perform the search on
txt = "/^$/"; // ^$ = empty string
filters[col] = txt;
$.tablesorter.setFilters($('table'), filters, true); 
```

借助空字符串正则表达式的知识，您应该能够创建一个下拉列表，其中一个空白选项的值为`"/^$/"`.

# tomcat - ubuntu 上的 tomcat7 和 apache2 与某种代理集成

> ID：14990973
> 
> 赞同：2
> 
> 时间：2013-02-20T22:14:38.680
> 
> 标签：tomcat, ubuntu, apache2, apache

我在**ubuntu 12.10上运行 php5、** **apache 2.2**和**tomcat7** ， 它们都是由 apt-get 安装的。

 **我需要同时运行 .php 和 .jsp 文件。我可以在每个（tomcat和apache httpd）上分别运行它们

我搜索了谷歌，但找不到上述版本的全面且易于理解的解决方案。

朋友告诉我我需要一个代理（用户首先点击 apache httpd，如果它是 .jsp，它会转发给 tomcat，然后返回给 apache，然后再给用户。php 由 apache 以正常方式提供服务）

**1\. 我需要什么模块？2\. 什么设置（* *ALL****）像代理（很多我不知道），多个站点的虚拟主机我需要为tomcat 和apache。**

我认为谷歌或论坛本身缺乏具体的指南。

**研究：**

mod_proxy_ajp 替换 mod_jk

mod_php 已死

mod_php 用于旧系统，fcgid 用于 2.2，proxy_fcgi 用于 2.4

**编辑：**

1和2解决了。剩下3个

我在下面有以下虚拟主机文件。但我已经在 8080 上为 aplpinema“ **ROOT.war** ”运行了 tomcate `/home/ubuntu/tomcat/www/alpinemadotcom` （**不是在 webapps 文件夹中提取**，而是在缓存文件夹中（尽管自动部署：true）

**3-。我在哪里以及如何放置类似的东西：**

```
ProxyPass /apps/jira ajp://backend.example.com:8009/jira
ProxyPassReverse /apps/jira http://www.example.com/jira

<VirtualHost *:80>
        ServerAdmin info@alpinema.com
        ServerName  www.alpinema.com
        ServerAlias alpinema.com

        DocumentRoot /home/ubuntu/apache/www/alpinemadotcom
        <Directory />
                Options FollowSymLinks
                AllowOverride None
        </Directory>
        <Directory /home/ubuntu/apache/www/alpinemadotcom/>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride None
                Order allow,deny
                allow from all
        </Directory>

        ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
        <Directory "/usr/lib/cgi-bin">
                AllowOverride None
                Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
                Order allow,deny
                Allow from all
        </Directory>

        ErrorLog ${APACHE_LOG_DIR}/error.log

        # Possible values include: debug, info, notice, warn, error, crit,
        # alert, emerg.
        LogLevel warn

        CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:31:12.277

我经常做类似的事情。不再需要 mod_jk，因为 mod_proxy_ajp 正如您已经提到的那样替换了它。

首先，首先让您的应用程序完全启动并作为 LAMP 堆栈运行，这样您的所有 PHP 都可以正常工作。完成后，您需要 2 个模块才能使其余模块正常工作 mod_proxy 和 mod_proxy_ajp！

将它们添加到您的 LoadModule 列表中，然后您可以为您的虚拟主机创建各种别名

类似于以下内容：

```
ProxyPass /apps/jira ajp://backend.example.com:8009/jira
ProxyPassReverse /apps/jira http://www.example.com/jira 
```

通过首先为 php 设置 apache，一切都应该正常工作，但是一旦有人输入[http://www.example.com/jira/](http://www.example.com/jira/) * 的路径，它就会自动代理到您的 tomcat 服务器。ProxyPassReverse 对于重写后端 tomcat 服务器发送的 url 等非常有用，以便与您的实际托管位置更加相关。

要记住的一件非常重要的事情是，在您考虑使用代理模块之前，您需要保护您的 apache。作为互联网上的开放代理可能是一件非常糟糕的事情！

看到这个页面：[http ://httpd.apache.org/docs/2.2/mod/mod_proxy.html#access](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#access)

同一页面还详细说明了您可以使用代理模块进行的所有不同修改。

**========= 更新示例 =========**

```
<VirtualHost *:80>
    ServerAdmin info@alpinema.com
    ServerName www.alpinema.com
    ServerAlias alpinema.com
    DocumentRoot /home/ubuntu/apache/www/alpinemadotcom

    ProxyPass /alpinemadotcom http://www.alpinema.com:8080/
    ProxyPassReverse /alpinemadotcom http://www.alpinema.com/alpinemadotcom 

    <Directory />
        Options FollowSymLinks
        AllowOverride None
    </Directory>

    <Directory /home/ubuntu/apache/www/alpinemadotcom/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        allow from all
    </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/

    <Directory "/usr/lib/cgi-bin">
        AllowOverride None
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log
    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost> 
```**

# ios - iOS 层 Foundation 和 Core Foundation 框架属于什么？

> ID：14990975
> 
> 赞同：1
> 
> 时间：2013-02-20T22:14:40.170
> 
> 标签：ios, architecture

iOS 是一个分层架构，有以下几层：

*   可可触摸
*   媒体
*   核心服务
*   核心操作系统

我的问题是 Foundation 和 Core Foundation 框架位于哪些层？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:17:31.033

它们都是[核心服务层](http://developer.apple.com/library/ios/#documentation/miscellaneous/conceptual/iphoneostechoverview/CoreServicesLayer/CoreServicesLayer.html)的一部分。

# python - 如何在 PyQt4 中显示以父级为中心的 QMessageBox？

> ID：14990979
> 
> 赞同：4
> 
> 时间：2013-02-20T22:14:58.087
> 
> 标签：python, qt, pyqt, pyqt4, pyside

我试图显示一个以父级为中心的 QMessageBox，但它似乎显示在其父级的父级之上。以下代码在 2x2 网格中生成 4 个按钮。单击按钮时，我希望相应的消息框以单击的按钮（即父级）为中心显示。但是，它始终显示在包含小部件的中间。

```
from PyQt4 import QtCore, QtGui

class ClickHandler(QtCore.QObject):
    def __init__(self, parent=None):
        super(ClickHandler, self).__init__(parent)

    def onClicked(self):
        sender = self.sender()
        print sender

        QtGui.QMessageBox.information(sender, 'onClicked', 'Using static method')

        mb = QtGui.QMessageBox(sender)
        mb.setWindowTitle('onClicked')
        mb.setText('Using object and exec')
        mb.exec_()

if __name__ == '__main__':
    import sys

    app = QtGui.QApplication(sys.argv)

    ch = ClickHandler()

    layout = QtGui.QGridLayout()
    for i in xrange(4):
        pb = QtGui.QPushButton('button %d' % i)
        pb.clicked.connect(ch.onClicked)
        layout.addWidget(pb, i // 2, i % 2)

    w = QtGui.QWidget()
    w.setLayout(layout)
    w.resize(600, 600)
    w.show()

    sys.exit(app.exec_()) 
```

根据 QMessageBox 文档：

> parent 被传递给 QDialog 构造函数

根据 QDialog 文档：

> 如果它有父级，则其默认位置位于父级的顶部

不知道我做错了什么或我错过了什么。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T06:28:58.627

查看该[段](http://doc.qt.digia.com/4.7-snapshot/qdialog.html)的其余部分：

> 请注意，QDialog（具有 Qt::Dialog 类型的任何其他小部件）使用父小部件与 Qt 中的其他类略有不同。对话框始终是顶级小部件，但如果它有父级，则其默认位置位于**父级顶级小部件的顶部** （如果它本身不是顶级）。它还将共享父级的任务栏条目。

在您的情况下，*父*级将是`sender`，并且*父级的顶级小部件*将是定义为的小部件`w`

# c# - System.Runtime.Serialization.SerializationException：找不到程序集 MyAssembly

> ID：14990980
> 
> 赞同：12
> 
> 时间：2013-02-20T22:15:11.437
> 
> 标签：c#, serialization

所以我找到了一堆关于这个主题的主题，但我认为我还没有找到一个适用的主题。

基本上我的 .exe 加载一个 .dll (MyAssembly) 文件，该文件进行序列化和加载。显然它序列化得很好。

但是，当我去反序列化 MyAssembly.dll 文件中的文件时，它会因本文标题中的错误而爆炸。

有人有想法么？我不明白它怎么找不到调用代码的程序集！

我的代码：

```
// deserialize

 using (var target = new System.IO.FileStream(Path, System.IO.FileMode.OpenOrCreate))
 {
     var bin = new System.Runtime.Serialization.Formatters.Binary.BinaryFormatter();
     var Obj = bin.Deserialize(target);
     if (Obj != null)
     {
         ObjectToStore = (ObjectTypeInMyAssembly)Obj;
     }
 }

// serialize
 using (var target = new System.IO.FileStream(Path, System.IO.FileMode.OpenOrCreate))
 {
     var bin = new System.Runtime.Serialization.Formatters.Binary.BinaryFormatter();
     bin.Serialize(target, ObjectToStore);
 } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T01:52:45.143

DLL 是否与 EXE 位于同一文件夹中？
我看到您序列化/反序列化位于 DLL 中的对象（“MyAssembly”）。反序列化时，格式化程序从序列化数据中确定类型的名称，并尝试在程序集中的主可执行文件夹，即-EXE 文件夹中找到该类型。
解决方案 - 将 DLL 移动到 EXE 文件夹。有一种方法可以使格式化程序在另一个程序集中搜索，捕获事件`AppDomain.AssemblyResolve`并返回您的 DLL。请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-29T17:51:02.160

好吧，我使用了一个有效的技巧！

```
sealed class CustomizedBinder : SerializationBinder
{
    public override Type BindToType(string assemblyName, string typeName)
    {
        Type returntype = null;
        string sharedAssemblyName = "SharedAssembly, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null";
        assemblyName = Assembly.GetExecutingAssembly().FullName;
        typeName = typeName.Replace(sharedAssemblyName, assemblyName);
        returntype =
                Type.GetType(String.Format("{0}, {1}",
                typeName, assemblyName));

        return returntype;
    }

    public override void BindToName(Type serializedType, out string assemblyName, out string typeName)
    {
        base.BindToName(serializedType, out assemblyName, out typeName);
        assemblyName = "SharedAssembly, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null";
    }
} 
```

使用二进制格式化程序的活页夹，如下所示：

```
BinaryFormatter bf = new BinaryFormatter();
bf.Binder = new CustomizedBinder(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-23T19:28:50.520

我想以[Sean Ed-Man](https://stackoverflow.com/users/3310757/sean-ed-man)的[回答](https://stackoverflow.com/a/23939713/593090)为基础，这很好，但在我的情况下不起作用。

如果您可以*实例化*该类但`BinaryFormatter`无法解决它，这可能对您有用。

在我的例子中，调用程序集（`PluginAssembly`在本例中）作为插件从可执行文件以 zip 文件的形式运行。出于某种原因，我可以`NeededAssembly`在实例化时直接解析类（来自），但`BinaryFormatter`无法解析它。`NeededAssembly`当然，作为对`PluginAssembly`项目的引用包含在内，这就是我可以实例化的原因。我不知道为什么不`BinaryFormatter`一样。

无论如何，这对我有用：

```
public class PluginAssembly
{
    // (class code here)

    private sealed class CustomizedBinder : SerializationBinder
    {
        public override Type BindToType(string assemblyName, string typeName)
        {
            Type returntype = null;
            if (typeName.StartsWith("NeededAssembly.RemoteClient.MessagePayload"))
            {
                returntype = typeof(MessagePayload);
            }
            else if (typeName.StartsWith("NeededAssembly.RemoteClient.ResultsPayload"))
            {
                returntype = typeof(ResultsPayload);
            }
            else if (typeName.Equals("System.Collections.Generic.List`1[[NeededAssembly.ShortResult, NeededAssembly, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"))
            {
                returntype = typeof(List<ShortResult>);
            }
            else
            {
                returntype =
                        Type.GetType(String.Format("{0}, {1}",
                        typeName, assemblyName));
            }
            return returntype;
        }

        public override void BindToName(Type serializedType, out string assemblyName, out string typeName)
        {
            base.BindToName(serializedType, out assemblyName, out typeName);
            if (serializedType.ToString().Contains("NeededAssembly"))
            {
                assemblyName = typeof(MessagePayload).Assembly.FullName;
            }
        }
    }
} 
```

当然，不要忘记使用它：

```
BinaryFormatter bf = new BinaryFormatter();
bf.Binder = new CustomizedBinder(); 
```

基本上，我只是`typeof`为所需的课程获得了一个，它有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T23:58:38.997

我在您的序列化和反序列化代码中看到的是使用 System.IO.Path 类而不是文件的实际路径。我通常按​​如下方式执行：

```
 static void Main(string[] args)
    {
        string filepath = @"C:\FileLocation\";
        string filename = "datasaved.bin";
        MyClass something = new MyClass();

        // serialize
        using ( FileStream strm = File.OpenWrite(Path.Combine(filepath, filename)))
        {
            BinaryFormatter ser = new BinaryFormatter();
            ser.Serialize(strm, something);
        }

        // deserialize
        using (FileStream strm = File.OpenRead(Path.Combine(filepath, filename)))
        {
            BinaryFormatter ser = new BinaryFormatter();
            something = ser.Deserialize(strm) as MyClass;
        }
    } 
```

请注意两件事：执行*Deserialize as*将处理对象为 null 或不是预期类型。我也不会滥用 var。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-21T07:58:38.797

这个问题还有另一种解决方案，即在 App.config 中列出包含程序集的文件夹。您可以通过添加一个[`probing`](https://docs.microsoft.com/en-us/dotnet/framework/configure-apps/file-schema/runtime/probing-element)元素来做到这一点，如下所示：

```
<configuration>  
   <runtime>  
      <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">  
         <probing privatePath="bin;bin2\subbin;bin3"/>  
      </assemblyBinding>  
   </runtime>  
</configuration> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-04T14:25:05.713

我只是偶然发现了同样的问题，并发现我的错误是我的探测路径中存在该程序集的两个版本。如果您首先进行组装，然后修复构建后事件以将其移动到您真正需要的位置，通常会发生这种情况。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-14T11:03:32.553

我会检查 Marc Gravell 的回答是否[适用](https://stackoverflow.com/questions/13090955/deserialization-exception-unable-to-find-assembly "这里")......简而言之“一个选择是将类型移动到其他项目都引用的库 dll - 然后它只定义一次，它会很高兴”

就我而言，我暂时创建了一个我打算在开发早期序列化的类的副本（在进行序列化的程序集中），但是在反序列化时忘记了它！所以反序列化器永远无法访问与序列化相同的类！

还值得检查包含正在序列化的类的项目的属性 - 检查其程序集名称中的拼写错误。您可能还想尝试扁平化命名空间层次结构，看看是否有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-05T13:52:51.577

我遇到了这个例外的问题。我正在为第三方应用程序编写 WPF 插件。应用程序加载我的程序集，该程序集应该反序列化来自另一个 dll 的类型，例如 MyType，该程序集位于作为对我的插件的引用添加的私有程序集中，并且与插件 dll 位于同一目录中。

我觉得奇怪的是我可以在插件中实例化 MyType，但是在同一个类中反序列化时会抛出这个异常。

对我来说的解决方案是[RoadBump](https://stackoverflow.com/users/1313393/roadbump)建议的，非常简单，但我不明白为什么周围的代码可以找到程序集（如果它不能这个方法将不起作用）但是在同一代码中的反序列化调用，可以'吨。

```
AppDomain.CurrentDomain.AssemblyResolve += new ResolveEventHandler(MyTypeResolveEventHandler);

private Assembly MyTypeResolveEventHandler(object sender, ResolveEventArgs args)
{
    return typeof(MyType).Assembly;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-02-14T15:36:34.847

我有一个OP描述的SerializationException的具体案例，并找到了一个相对简单的解决方案。就我而言，我正在使用 BinaryFormatter 技术实现 DeepClone 扩展方法。我的应用程序还使用了我以编程方式加载的插件和程序集。为类包含在插件中的对象调用 BinaryFormatter.Deserialize 方法时，我遇到了 SerializationException。

我觉得这很奇怪，因为根据定义，包含程序集被加载到我的 AppDomain 中。（如果不是，我无法在对象上调用扩展方法！）显然，BinaryFormatter 不会检查 AppDomain 来解析程序集。

此处为解决此问题而建议的许多解决方案似乎都涉及将程序集或类的名称硬编码到自定义 SerializationBinder 中。这没有用，因为我希望我的 DeepClone 方法尽可能通用。我对这个问题的回答（如下所示）将 AssemblyResolve 事件挂接到当前 AppDomain 中，然后在 AppDomain（使用 LINQ）中搜索请求的程序集。不需要硬编码的程序集或类名。

这是代码：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Reflection;
using System.Runtime.Serialization.Formatters.Binary;
using System.Runtime.Serialization;

namespace StackOverflowDemo
{
    public static class Extend
    {
        /// <summary>
        /// Static initializer is used to register the Resolve Event Handler
        /// </summary>
        static Extend()
        {
            AppDomain.CurrentDomain.AssemblyResolve += ResolveEventHandler;
        }

        /// <summary>
        /// This resolver will find any Assembly that is already loaded into
        /// the current AppDomain and return it.
        /// <para/>
        /// You would think this would not be necessary, but the 
        /// BinaryFormatter.Deserialize method apparently can not 
        /// find an assembly that has been loaded programmatically
        /// as a plug-in, and whose DLL does not reside in the same
        /// folder as the executable file.
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="args"></param>
        /// <returns></returns>
        private static Assembly ResolveEventHandler( object sender, ResolveEventArgs args )
        {
            var assemblies = AppDomain.CurrentDomain.GetAssemblies();
            Assembly result = (from a in assemblies where args.Name.Equals(a.FullName) select a).FirstOrDefault();
            return result;
        }

        /// <summary>
        /// Slow, and requires that the source be marked as [Serializable], but 
        /// clones *everything* and is not complicated.
        /// <para/>
        /// Note that by itself, this method will fail if an attempt is made to
        /// create a deep copy of an object whose class is contained in an assembly
        /// that was loaded programmatically (i.e., loaded as a plug-in).
        /// <para/>
        /// See https://stackoverflow.com/a/1213649
        /// <para/>
        /// and https://stackoverflow.com/a/23017515
        /// </summary>
        /// <typeparam name="T"></typeparam>
        /// <param name="src"></param>
        /// <returns></returns>
        public static T DeepClone<T>( this T src )
        {
            if (!typeof(T).IsSerializable)
            {
                throw new ArgumentException(string.Format("[Extend.DeepClone] Type '{0}' is not Serializable", typeof(T).Name));
            }

            if (Object.ReferenceEquals(src, null))
            {
                return default(T);
            }

            using (Stream stream = new MemoryStream())
            {
                IFormatter formatter = new BinaryFormatter();
                formatter.Serialize(stream, src);
                stream.Seek(0, SeekOrigin.Begin);
                return (T)formatter.Deserialize(stream);
            }
        }
    }
} 
```

# c++ - 在 C、C++ 或 Objective C 中验证给定坐标

> ID：14990981
> 
> 赞同：0
> 
> 时间：2013-02-20T22:15:18.460
> 
> 标签：c++, validation, expression, coordinates

我正在尝试验证某些给定坐标（纬度，经度）是否有效。是否有任何功能可以做到这一点，或者我应该创建自己的正则表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T22:18:14.183

C/C++ 中没有类似的功能。确定它们是否存在并不难。

纬度和经度以度/分/秒表示，如果在赤道以南或本初子午线以西，则在前面加上减号。您可以检查您的输入是否符合这些要求。我假设您的输入是三个浮点数 - 度、分和秒。

纬度的度数应该在 -90 到 +90 的范围内，经度的度数应该在 -180 到 +180 的范围内。分和秒应大于 0 且小于 60。

在这里检查一下 - [http://msdn.microsoft.com/en-us/library/aa578799.aspx](http://msdn.microsoft.com/en-us/library/aa578799.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:18:43.370

坐标只是一对浮点数，没有什么特别的地方需要正则表达式。您可以使用谷歌地图 API 对坐标进行反向地理，看看它是否解析为一个位置。

# java - 无法理解为什么这个 java do while 循环不起作用

> ID：14990991
> 
> 赞同：0
> 
> 时间：2013-02-20T22:16:26.197
> 
> 标签：java

```
 do
 {
  ch = (char)System.in.read();
  System.out.print(ch);
 }while(ch != '\n'); 
```

我认为这个循环会重复，直到我输入一个新行？不知道我做错了什么，因为它在我输入一个字符后终止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:21:12.563

输入第一个字符后，while 循环条件会成功，它会在 do-while 中等待用户输入。如果您`enter`现在按下它的换行符，在这种情况下，while 条件将失败。简而言之，您的代码按预期工作。

**测试：**

```
aa(if you press enter  key now)
while condition failed. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T05:37:54.210

您的程序可以运行，但在您按下 之前，您的循环并没有真正**开始**`enter`。

`System.in.read`在控制台输入换行符之前的块。因此，如果您按 键`a` `b` `c` `\n`，程序将在`System.in.read()`-line 上停止，直到您按`enter`( `\n`)。

按下时`enter`，您的程序将启动并将该行回显给用户。

造成这种情况的原因是您的控制台的配置方式。通常，终端处于“cooked”模式，这允许您使用退格键并编辑您输入的字符。您还应该能够将控制台设置为“raw”模式（绕过行编辑并且不需要回车键）。这可能会产生你想要的结果。在 UNIX 系统上，“stty”命令可以改变模式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-20T23:30:32.107

尝试这个

**而（通道！= 13）；**

13是**enter的ASCI值**

# android-ndk - 在 Android NDK 中构建和使用静态库

> ID：14990992
> 
> 赞同：0
> 
> 时间：2013-02-20T22:16:31.613
> 
> 标签：android-ndk, native-activity

我正在尝试为我的 NativeActivity 应用程序构建一个库并使用它，但它给了我一个错误：

拥有这些文件：

```
-jni/
--android.mk
--application.mk
--main.cpp
--png/
---android.mk
---lodepng.c
---lodepng.h 
```

里面的 android.mk`jni/png/`是这样的：

```
LOCAL_PATH  := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := lodepng
LOCAL_SRC_FILES := lodepng.c
# LOCAL_C_INCLUDES  := $(LOCAL_PATH)
LOCAL_CFLAGS    := -DLODEPNG_NO_COMPILE_ENCODER -DLODEPNG_NO_COMPILE_DISK -DLODEPNG_NO_COMPILE_ANCILLARY_CHUNKS -DLODEPNG_NO_COMPILE_CPP

include $(BUILD_STATIC_LIBRARY) 
```

里面的 android.mk`jni/`是这样的：

```
LOCAL_PATH  := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := myapp
LOCAL_SRC_FILES := main.cpp
# LOCAL_C_INCLUDES  := $(LOCAL_PATH)/png
LOCAL_CFLAGS    := -DANDROID
LOCAL_LDLIBS    := -llog -landroid -lEGL -lGLESv1_CM
LOCAL_STATIC_LIBRARIES  := lodepng android_native_app_glue

include $(BUILD_SHARED_LIBRARY)

include $(LOCAL_PATH)/png/android.mk

$(call import-module,android/native_app_glue) 
```

（我已经评论了 C_INCLUDES，因为我不确定我是否需要它们。使用与否对结果没有区别）。

当我尝试编译它时，我得到的错误是这个：

```
C:\workspace\myapp> C:\cygwin\bin\bash --login -c "ndk-build -C ."
Compile++ thumb  : myapp <= main.cpp
Compile thumb  : lodepng <= lodepng.c
StaticLibrary  : liblodepng.a
SharedLibrary  : libmyapp.so
C:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/..
/lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe:
 ./obj/local/armeabi/objs/myapp/main.o: in function init():jni/main.cpp:194:
 error: undefined reference to 'lodepng_decode32(unsigned char**, unsigned int*,
 unsigned int*, unsigned char const*, unsigned int)'
C:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/..
/lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe:
 ./obj/local/armeabi/objs/myapp/main.o: in function init():jni/main.cpp:196:
 error: undefined reference to 'lodepng_error_text(unsigned int)'
collect2: ld returned 1 exit status
make: *** [obj/local/armeabi/libmyapp.so] Error 1 
```

在简历中，就像代码找不到此库的标头一样。尽管如此，它确实可以编译，所以这不是问题......

我应该编辑什么才能使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T07:03:28.747

我猜 C++ 名称修改是这里的问题。您的 lodepng.c 文件提供了`_lodepng_decode32`符号（因为它被编译为 C 代码），但您的 main.cpp 文件需要类似`_lodepng_decode32$asdaASd`符号的东西（因为它被编译为 C++ 代码）。

您应该重命名`lodepng.c`为`lodepng.cpp`.

或者你需要把`#include "lodepng.h"`你的`main.cpp`文件放在`extern "C" { ... } block`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T01:01:53.107

您可以在 jni/png 中更改 Android.mk。

```
LOCAL_PATH  := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE    := lodepng
LOCAL_SRC_FILES := lodepng.c
# LOCAL_C_INCLUDES  := $(LOCAL_PATH)
LOCAL_CFLAGS    := -DLODEPNG_NO_COMPILE_ENCODER -DLODEPNG_NO_COMPILE_DISK - DLODEPNG_NO_COMPILE_ANCILLARY_CHUNKS -DLODEPNG_NO_COMPILE_CPP
#include $(BUILD_STATIC_LIBRARY)
include $(PREBUILD_STATIC_LIBRARY) 
```

此模块应用作预构建静态库。

# git - 将 git 对二进制文件的选择覆盖为文本

> ID：14990993
> 
> 赞同：68
> 
> 时间：2013-02-20T22:16:35.480
> 
> 标签：git, text, binary

我见过几个问题，询问如何让 git 将文本文件视为二进制文件，但还没有看到相反的情况：

如何更改 git 将文本文件视为二进制文件的选择？我有一个文本文件，其中在某些配置字符串中使用 EOT 和 ETX 来分隔配置参数的各个部分。

例如，源代码包含如下行：

```
INPUT 'ScrollRemote[EOT]no[ETX]NumDown[EOT]0[ETX]CalcWidth[EOT]no[ETX]MaxWidth[EOT]80[ETX]FetchOnReposToEnd[EOT]yes[ETX].....' 
```

我希望将此文件视为文本，而不是二进制文件，以便我可以看到行更改的差异。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-02-21T17:57:06.390

文件在 Git 存储库中的实际存储方式与它们在显示时的处理方式无关。因此`git diff`，当被要求比较两个文件时，程序首先从存储库中获取两个完整的文件，然后对它们运行差异算法。

通常，`git diff`在文件中查找不可打印的字符，如果文件*看起来*可能是二进制文件，则拒绝显示差异。这样做的理由是二进制文件差异不太可能是人类可读的，并且如果显示可能会弄乱您的终端。

但是，您可以使用该选项指示`git diff`始终将文件视为文本。您可以为一个命令`--text`指定此项：`diff`

```
git diff --text HEAD HEAD^ file.txt 
```

您可以通过设置[`.gitattributes`](https://www.kernel.org/pub/software/scm/git/docs/gitattributes.html)包含以下内容的文件使 Git 始终使用此选项：

```
file.txt diff 
```

这里的`diff`属性意味着：

> 设置属性的路径`diff`被视为文本，即使它们包含通常不会出现在文本文件中的字节值，例如 NUL。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-20T22:28:52.890

查看[Git 属性](http://git-scm.com/book/en/v2/Customizing-Git-Git-Attributes)——它们可以通过指定将某个文件扩展名视为文本来帮助您。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-16T18:42:08.110

如果您尝试比较或合并文本文件并且 git 说它们是二进制文件，那么它们可能只是具有不同的编码（例如 UTF-8 和 ANSI）。请参阅[我在这篇文章中给出的答案](https://stackoverflow.com/questions/6855712/git-treats-text-file-as-a-binary/21170043#21170043)。

# windows - 扫描 COM 端口 批处理文件

> ID：14990996
> 
> 赞同：0
> 
> 时间：2013-02-20T22:16:52.653
> 
> 标签：windows, batch-file, serial-port

我正在寻找让我扫描串行 COM 的功能？我想创建一个批处理文件，向我输出可用的串行 COM。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T03:46:22.790

不带任何参数的 MODE 命令提供有关可用设备的信息，包括 COM 端口。您可以通过将输出管道传输到 FINDSTR 来快速过滤输出以查看可用端口。

```
mode | findstr "COM[0-9]:" 
```

您可以使用 FOR /F 解析输出。TOKENS 选项可能必须根据您的语言进行更改。这适用于英语。

```
for /f "tokens=4" %%A in ('mode^|findstr "COM[0-9]:"') do echo %%A 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-12T12:50:02.233

稍加修正以支持大于 9 的 COM 编号：

`for /f "tokens=4" %%A in ('mode^|findstr "COM[0-9]*:"') do echo %%A`

* 重复 0-9 模式

# c# - 如何使用调试器处理任务中的异常？

> ID：14990998
> 
> 赞同：8
> 
> 时间：2013-02-20T22:16:54.827
> 
> 标签：c#, .net, vb.net, exception, task-parallel-library

我[在 MSDN 上研究了这篇文章](http://msdn.microsoft.com/en-us/library/dd537614.aspx)，以及关于这个主题的一些问题/答案，但无法弄清楚为什么下面的代码不起作用（在示例控制台应用程序中）。

根据 MSDN，预计会抛出 AggregateException，其中包含一个带有`hello`消息的内部异常。相反，此`hello`异常未处理。它发生在调试器内部。

如果您按继续或独立运行，它会按预期工作。有什么办法可以避免在 VS 中一直按 continue 吗？毕竟，`Try...Catch`块中的任何内容都被认为是在单线程编程模型中*处理的。*否则，调试可能是一场噩梦。

**VB.NET**

```
Sub Main()
  Try
    Task.Factory.StartNew(AddressOf TaskThatThrowsException).Wait()
  Catch ex As AggregateException
    Console.WriteLine(ex.ToString) 'does not get here until you hit Continue
  End Try
End Sub

Private Sub TaskThatThrowsException()
  Throw New Exception("hello") 'exception was unhandled
End Sub 
```

**C＃**

```
namespace ConsoleApplication1 {
  class Program {
    static void Main(string[] args) {
      try {
        Task.Factory.StartNew(TaskThatThrowsException).Wait();
      }
      catch (AggregateException ex) {
        Console.WriteLine(ex.ToString()); //never gets here                
      }
    }

    static void TaskThatThrowsException() {
      throw new Exception("hello"); //exception was unhandled            
    }
  }
} 
```

我在这里有什么明显的遗漏吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:45:01.337

这很可能是因为您误解了 Visual Studio 对话框的含义。

异常是“用户未处理”，因为没有捕获它的用户代码（原始`Exception`），它被 TPL 捕获。因此，如果您让调试器继续运行，或者如果您在没有调试器的情况下运行应用程序，您将看到预期的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T19:06:45.730

“仅启用我的代码”设置对此有影响。在工具->选项下，调试->常规->启用仅我的代码。如果你打开它，如果*你的*代码没有处理它，它会认为异常未处理。尝试关闭此选项。

请参阅：http: [//msdn.microsoft.com/en-us/library/dd997415.aspx](http://msdn.microsoft.com/en-us/library/dd997415.aspx)