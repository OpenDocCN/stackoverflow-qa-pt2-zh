# StackOverflow 问答 15175000-15175999

# ios - 在 UIWebView 中关闭全屏视频会导致奇怪的行为（？）

> ID：15175007
> 
> 赞同：1
> 
> 时间：2013-03-02T13:28:01.983
> 
> 标签：ios, video, uiwebview, fullscreen

我有一个本地 MP4 视频像往常一样以全屏模式在 UIWebView 中运行，但最近它导致了这种荒谬的行为：几乎所有的 ViewControllers、TableViewControllers（XIB 文件）都被再次添加——加倍。我相信它从 iOS6 开始发生。

任何线索都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:17:53.393

不知道由于 iOS6 关闭全屏视频（嵌入在`UIWebView`我的案例中启动的 HTML 文件中）导致`viewWillAppear`在所有视图中执行 - 我的所有混乱都发生了，所以这个问题解决了。

同时我检测到另一个奇怪的行为：直接请求电影文件`UIWebView`（不像我以前那样嵌套在 HTML 文件中）并从全屏关闭它会导致`UIWebView`加载以前的文件（如`goBack`函数）。漏洞？

# arrays - 将数组转换为字符串并返回，而不会丢失信息

> ID：15175012
> 
> 赞同：1
> 
> 时间：2013-03-02T13:28:29.473
> 
> 标签：arrays, string, bash, shell

我需要运行一个生成 bash 数组的 ba​​sh 脚本，并以某种方式将此数组返回给 bash 调用脚本。返回给调用脚本的结果数组在各个方面都必须与原始数组相同：没有字符（如空格）需要特殊处理。此外，脚本必须是单独的进程，因为我无法在前者的上下文中执行其他脚本。

由于 bash 函数无法在没有 hack 的情况下接受或返回数组，因此这变得更加困难。尽管对数组进行编码/解码可能既复杂又缓慢，但最简单（最少编码）或最快（执行速度）的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T14:02:20.033

给定一个数组——关联与否：

```
$ typeset -a array
$ array=({1..10}) 
```

您的*序列化*数组将由以下方式给出：

```
$ typeset -p array
declare -a array='([0]="1" [1]="2" [2]="3" [3]="4" \
    [4]="5" [5]="6" [6]="7" [7]="8" [8]="9" [9]="10")' 
```

这将在*来*和*去*时都起作用，因为`typeset/declare -p name`它为您提供了已声明变量的确切构造命令。

结果是带有声明本身的字符串，您可以从中对数组*进行评估*——使用 GNU bash 4.2.24 版进行测试：

```
$ declaration=$(typeset -p array)
$ eval ${declaration} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-28T23:58:28.307

另一种干净利落的方法是使用 NUL 分隔的流，它的优点是您可以从 bash 以外的语言和工具中读取它。要生成该流：

```
printf '%s\0' "${your_array[@]}" 
```

...并且，阅读它：

```
your_array=()
while IFS='' read -r -d '' entry; do
  your_array+=( "$entry" )
done 
```

这还具有不需要信任生成数据的代码的优点，就像使用`eval`.

* * *

对于关联或稀疏数组，可以发出对：

```
for key in "${!your_array[@]}"; do
  printf '%s\0' "$key" "${your_array[$key]}"
done 
```

...并且，对于回读：

```
declare -A your_array # if associative
while IFS='' read -r -d '' key && IFS='' read -r -d '' value; do
  your_array["$key"]="$value"
done 
```

# screen - 用 vim 之类的诅咒恢复终端状态

> ID：15175013
> 
> 赞同：2
> 
> 时间：2013-03-02T13:28:38.890
> 
> 标签：screen, reset, curses

我正在编写一个使用诅咒在屏幕上显示信息的程序。

程序退出后，屏幕内容保持不变。在 vim 等程序中，终端恢复到程序运行之前的状态。

我想知道如何复制这种行为。

我打电话`endwin`来恢复终端设置。

# javascript - Chrome 扩展权限（读取网站中的数据）？

> ID：15175014
> 
> 赞同：2
> 
> 时间：2013-03-02T13:28:43.053
> 
> 标签：javascript, html, json, google-chrome, google-chrome-extension

我已经建立了一个网站和一个与之相关的 chrome 扩展。

我想读取我网站上的所有数据（例如读取和写入 cookie）

所以我写了清单（假设我的网站是example.com，但我也使用子域，例如sub.example.com）这段代码

```
"permissions": [
       "http://www.example.com/",
       "cookies"
], 
```

但是我很担心！例如，如果我需要关于 的任何数据`sub.example.com`，我将不得不添加`*.example.com`权限，这可能会导致禁用所有计算机上的扩展（当然，直到他们批准为止）。

有没有办法获得我所有网站的权限，包括子域、文件夹`www.example.com`和`example.com`一行。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:13:14.967

使用`*.example.com/*`是最好和最安全的方法。正如您所提到的，扩展程序将被禁用，但谷歌浏览器会弹出一条通知，要求您提供新权限（他们通常会单击“是”）。

`*.example.com/*`涵盖`www.example.com`以及`example.com`。它基本上是在说“主机上的任何 URL `example.com`.

有关更多信息，请访问[匹配模式页面](http://developer.chrome.com/extensions/match_patterns.html)。

# javascript - 通过 AJAX 在 Wordpress 中动态更改导航链接（下一个和上一个）

> ID：15175020
> 
> 赞同：6
> 
> 时间：2013-03-02T13:29:21.017
> 
> 标签：javascript, ajax, wordpress

在 single.php 的循环中，我有一个 select 标记，其中的选项是通过自定义查询返回的当前类别的帖子。

在更改所选选项时，我有许多运行良好的 javascript 函数，但其​​中的最后一个函数 ( `function f_next-previous`) 似乎不起作用。

此功能的目的是在不重新加载页面的情况下更新下一个和上一个链接。

这是模板中导航链接（下一个和上一个）的代码：

```
<div id="nav-above" class="navigation">

<div class="nav-previous"><?php previous_post_link( '%link', '<img height="34" src="' . get_bloginfo("template_directory") . '/images/previous.png" />' ); ?></div>

<div class="nav-next"><?php next_post_link( '%link', '<img height="34" src="' . get_bloginfo("template_directory") . '/images/next.png" />' ); ?></div>

</div><!-- #nav-above --> 
```

这个函数的javascript代码是：

```
function f_next-previous(id)
{
       $.ajax({  
       cache: true,  
       type: "GET",  
       timeout: 5000,   
       url: 'wp-content/themes/twentyten/pages/next-previous.php?p='+id,  
       success: function(msg)  
        {  

    $('#nav-above').html(msg);

        },  
        error: function(msg)  
        {  
           alert("Your browser broke!");
                return false;
        }  
});

} 
```

文件`next-previous.php`内容是：

```
<?php
$p=$_GET['p']; 
require( '../../../wp-load.php' );

$my_query = new WP_Query();
$my_query->query(array( 'post__in' => array($p)));

if ($my_query->have_posts()) : while ($my_query->have_posts()) : $my_query->the_post();  ?>

<div class="nav-previous"><?php previous_post_link( '%link', '<img height="34" src="' . get_bloginfo("template_directory") . '/images/previous.png" />' ); ?></div>
<div class="nav-next"><?php next_post_link( '%link', '<img height="34" src="' . get_bloginfo("template_directory") . '/images/next.png" />' ); ?></div>

<?php

endwhile;
endif;

?> 
```

在通过给 p 参数一个值来测试这个 php 文件时，它在浏览器中给出了逻辑结果。Jquery 和函数脚本都包含在内，我网站中的所有 AJAX 都可以。我在这项工作中缺少什么？？？？

**更新：** 请注意，我的 single.php 文件中负责触发 AJAX 调用的部分是：

```
 <form method="post" action="">  

    <select class="select2"  name="" id="" >
    <option value="<?php the_ID();?>"><?php the_title();?></option>

    <?php 
global $post;
$paged = get_query_var( 'paged' ) ? get_query_var( 'paged' ) : 1;
$myposts = get_posts("paged=$paged&category=4");

foreach($myposts as $post) :?>

        <option value="<?php the_ID();?>"><?php the_title();?></option>

        <?php endforeach;
        wp_reset_postdata(); ?> 

        </select>
        </form> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T19:37:05.473

首先，我想指出，根据几乎在 wordpress 中谈论 AJAX 的教程，我在问题中提到的方法很糟糕。所以我决定根据他的建议`hakre`和他的链接来改变它：http: [//codex.wordpress.org/AJAX_in_Plugins#Ajax_on_the_Viewer-Facing_Side](http://codex.wordpress.org/AJAX_in_Plugins#Ajax_on_the_Viewer-Facing_Side)。

换句话说，对于我的情况，最好的方法是使用 Wordpress 中的内置 AJAX，使用 wp-admin/admin-ajax.php。AJAX 请求应定向到此文件。我知道文件名的“admin”部分有点误导。但是前端（查看端）和管理面板中的所有请求都可以在 admin-ajax.php 中处理，有很多好处，尤其是在安全方面。

步骤是：

**1.提交AJAX请求的JavaScript代码应该是这样的：**

```
 $(document).ready(function() {
        $('.select2').change(function(e) {
    e.preventDefault();

    var v = $('.select2 option:selected').val(); 

            $.ajax({
                type: "GET",
                url: "wp-admin/admin-ajax.php", // check the exact URL for your situation
                dataType: 'html',
                data: ({ action: 'nextPrevious', id: v}),
                success: function(data){

                $('#nav-above').html(data);

                },
                error: function(data)  
                {  
                alert("Your browser broke!");
                return false;
                }  

            }); 

    }); 
}); 
```

请注意，您应该尊重 Wordpress 在放置 JS 脚本时的要求（通常在 wp-footer() 之前的 footer.php 中）

**2-处理动作：**

在`functions.php`您的主题中（或直接在您的插件文件中），添加：

```
add_action('wp_ajax_nextPrevious', 'nextPrevious');
add_action('wp_ajax_nopriv_nextPrevious', 'nextPrevious'); 
```

并在同一个文件中定义`nextPrevious`回调函数，如下所示：

```
function nextPrevious() {

$p= $_GET['id'];
$my_query = new WP_Query();

$my_query->query(array( 'post__in' => array($p)));

if ($my_query->have_posts()) : while ($my_query->have_posts()) : $my_query->the_post(); ?>

 <div class="nav-previous"><?php previous_post_link( '%link', '<img height="34" src="' . get_bloginfo("template_directory") . '/images/previous.png" />' ); ?></div>

<div class="nav-next"><?php next_post_link( '%link', '<img height="34" src="' . get_bloginfo("template_directory") . '/images/next.png" />' ); ?></div>

<?php endwhile;
endif;                  

wp_reset_query();

die();

} 
```

不要忘记模具功能，它是强制性的。

有关 Wordpress 中 AJAX 的更多详细信息，Google 第一页教程很好。

# javafx-2 - 在 JavaFX 上的同一场景中多次重用相同的 ImageView

> ID：15175022
> 
> 赞同：3
> 
> 时间：2013-03-02T13:29:37.710
> 
> 标签：javafx-2

我正在尝试构建一个 Twitter 样式的 ListView，但我无法在同一个列表中多次重用同一个 ImageView。加载多个副本似乎很浪费，并且由于 UI 虚拟化而导致滚动变慢。有什么解决方法吗？

```
public class TwitterCell extends ListCell<Object> {

private static HashMap<String, ImageView> images = new HashMap<String, ImageView>();

@Override
protected void updateItem(Object tweet, boolean empty) {
  super.updateItem(tweet, empty);
  Tweet t = (Tweet) tweet;
  if (t != null) {
    String message = t.getMessage();
    setText(message);
    String imageUrl = t.getImageUrl();
    if (!images.containsKey(imageUrl)) {
      images.put(imageUrl, new ImageView(imageUrl));
    }
    setGraphic(images.get(imageUrl));
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T16:45:19.570

场景图在 JavaFX中不能包含相同的`Node`两次，并且无法克隆节点（据我所知）。

一种解决方法可能是让您的地图成为`HashMap`商店`Image`而不是`ImageView`，并将最后一行更改为

```
setGraphic(new ImageView(images.get(imageUrl))); 
```

这样你至少会缓存实际的加载`Image`，这应该是最繁重的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:44:39.293

缓存图像是个好方法。

您还可以在后台加载图像，这大大提高了性能。

```
public Image getImage(String path, boolean backload) {
   image = imageCache.get(path);
   if (image == null) {
      image = new Image(path, backload);
      imageCache.put(path, image);
   }
   return image;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-25T17:01:12.340

做这样的事情：

```
ImageView image = ...
ImageView src   = ...
image.setImage(src.getImage()); 
```

# javascript - 在angularjs中的模型上添加监听器

> ID：15175025
> 
> 赞同：21
> 
> 时间：2013-03-02T13:30:16.367
> 
> 标签：javascript, angularjs

我目前有一个模型，它是搜索框的值。搜索操作执行完美，但我还希望在修改搜索文本时执行另一个功能。所以我想添加一个`listener`或`watch`模型变量。我该怎么做？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-02T14:06:34.577

您有 2 个选项来涵盖您的用例：

**使用[ng-change](http://docs.angularjs.org/api/ng.directive:ngChange)指令**

你可以这样写你的输入：

```
Search: <input ng-model="search.model" ng-change="changeHandler()"> 
```

其中`changeHandler`是在作用域上定义的函数。

**在示波器上使用手表**

通过在您的控制器中写入：

```
$scope.$watch('search.model', function(newVal, oldVal){
    console.log("Search was changed to:"+newVal);
    $scope.search.watch = newVal;
  }); 
```

这是一个说明两者的工作 plunk：[http ://plnkr.co/edit/Jgb2slcBFzLNKK0JFNyo?p=preview](http://plnkr.co/edit/Jgb2slcBFzLNKK0JFNyo?p=preview)

这两种方法之间的区别在于，它`ng-change`只会在用户与输入的迭代时`$watch`触发，而对于任何模型突变（从输入控件或对模型的任何其他更改触发）都会触发。因此，您可以精确地选择要对哪些事件做出反应。

# sql - 使用连接更新表列

> ID：15175028
> 
> 赞同：2
> 
> 时间：2013-03-02T13:30:31.290
> 
> 标签：sql, sql-server-2008, sql-update

任何人都可以帮助处理这个 sql 代码，我正在尝试将第一个匹配的表列 FirstURLForSite 更新为 1，但我正在努力处理代码，我只想更新第一个匹配。

任何人都可以帮助，希望你能理解我想要做什么。

```
update [dbo].[at_WebsitesSearch]
set [FirstURLForSite] = 1
where(

left outer join
select min(ID) as rowid, [BaseURL]
from [dbo].[at_WebsitesSearch]
group by [BaseURL]) as FirstMatch on
[dbo].[at_WebsitesSearch].id = FirstMatch.rowid
where FirstMatch.rowid is null 
```

数据示例

```
BasesURL                                FirstURLForSite
http://asia1x1.net/                         1
http://asia1x1.net/                         0
http://asia1x1.net/                         0

http://australia.bedandbreakfasts.net/      1
http://australia.bedandbreakfasts.net/      0
http://australia.bedandbreakfasts.net/      0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T13:35:42.930

 ~~试试看，*我正在尝试修复您当前的查询*。

```
UPDATE  a
SET     a.FirstURLForSite = 1
FROM    at_WebsitesSearch a
        LEFT JOIN 
        (
            SELECT  MIN(ID) AS rowid, BaseURL
            FROM    at_WebsitesSearch
            GROUP   BY BaseURL
        ) FirstMatch
            ON FirstMatch.rowid = a.id
WHERE   FirstMatch.rowid IS NULL 
```

 ~~**更新 1**

```
WITH records
AS
(
    SELECT  BasesURL, FirstURLForSite,
            ROW_NUMBER() OVER (PARTITION BY BasesURL ORDER BY BasesURL ASC) rn
    FROM    at_WebsitesSearch
)
UPDATE  records
SET     FirstURLForSite = CASE WHEN rn = 1 THEN rn ELSE 0 END 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!6/3f775/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:58:06.240

> 你必须做这样的事情。还要检查下面的 Fiddle Demo。

```
;WITH CTE  
AS  
(  
    SELECT  BasesURL, FirstURLForSite,  
        ROW_NUMBER() OVER (PARTITION BY BasesURL   
                            ORDER BY BasesURL DESC) RN  
    FROM    at_WebsitesSearch  
)  
UPDATE  CTE  
SET     FirstURLForSite = 1  
WHERE RN = 1 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!3/dedb4/1)~~~~

# c# - Automapper 中的行为不一致

> ID：15175029
> 
> 赞同：4
> 
> 时间：2013-03-02T13:30:46.300
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api, automapper

在我的项目中发生了非常奇怪的事情，我有一个非常简单的`CLR`对象，第一个是`Model`另一个是`ViewModel`，在我编译项目后，我运行我的`WebApi ASP.NET`项目，使用所需的参数，我可以看到我的`Model`返回数据。

一旦我可以看到 Mapper 映射正常，第二次它返回的所有东西都带有空值。不是一直发生的问题。

**非常重要：更新 14.03.2013**
***当我回收应用程序时它会停止这样做，但过了一段时间它又开始这样做了，我重新保存`web.config`文件然后它就可以了。***

这是我的模型/视图模型：

```
public class Gallery : Entity
{
    public override long Id { get; set; }
    public virtual Settings SiteOwner { get; set; }
    public virtual Category Category { get; set; }
    public virtual string PageTitle { get; set; }
    public virtual string TitleDescription { get; set; }
    public virtual string GalleryTitle { get; set; }
    public virtual IList<UIItem> GalleryItems { get; set; }
}

public class UIItem : Entity
{
    public override long Id { get; set; }
    public virtual Product Product { get; set; }
    public virtual Gallery Gallery { get; set; }
    public virtual string Name { get; set; }
    public virtual string Description { get; set; }
    public virtual string Price { get; set; }
    public virtual string ImageUrl { get; set; }
    public virtual string VideoUrl { get; set; }
    public virtual string FileUrl { get; set; }
}
public class GalleryViewModel
{
    public virtual string PageTitle { get; set; }
    public virtual string TitleDescription { get; set; }
    public virtual string GalleryTitle { get; set; }
    public virtual IList<UIItemViewModel> GalleryItems { get; set; }
}

public class UIItemViewModel
{
    public virtual long Id { get; set; }
    public virtual string Name { get; set; }
    public virtual string Description { get; set; }
    public virtual string Price { get; set; }
    public virtual string ImageUrl { get; set; }
    public virtual string VideoUrl { get; set; }
    public virtual string FileUrl { get; set; }
} 
```

这是我使用它的方式

```
// my apicontroller

// FindGalleryByAppIdAndCategoryId returns => Gallery 
var source = _galleryRepository.FindGalleryByAppIdAndCategoryId(appId, catId);
return Mapper.DynamicMap<GalleryViewModel>(source); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T13:38:22.330

1.  你为什么用`virtual`关键字标记你的非导航属性？只有涉及到一对一、一对多、多对多和复杂类型关系的属性可以用`virtual`关键字标记以应用*延迟加载*。

2.

```
Mapper.CreateMap<UIItem,UIItemViewModel>();
...
UIItemViewModel result = Mapper.Map<UIItem,UIItemViewModel>(your UIItem); 
```

如果你需要特殊的映射逻辑，你可以这样做：

```
Mapper.CreateMap<UIItem,UIItemViewModel>().ConvertUsing(new ModelToViewModelConverter());
...
UIItemViewModel result = Mapper.Map<UIItem,UIItemViewModel>(your UIItem);
... 
```

转换器将如下所示：

```
public class ModelToViewModelConverter : ITypeConverter<UIItem,UIItemViewModel>
    {
        public UIItemViewModel Convert(ResolutionContext context)
        {
            UIItem item = (UIItem)context.SourceValue;
            // Perform your convertion logic 
        }
    } 
```

以同样的方式，您可以将所有实体甚至集合映射到集合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T09:04:10.310

当 Gallery 和 UIItem 有交叉引用时，很可能会发生这种情况：

```
public class Gallery : Entity
{
    public virtual IList<UIItem> GalleryItems { get; set; }
}

public class UIItem : Entity
{
    public virtual Gallery Gallery { get; set; }
} 
```

你能在你的代码中测试这个案例吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T16:26:24.690

你可以尝试使用

```
Mapper.Map<Source,Destination>(source); 
```

或者

```
Mapper.Map(source); 
```

并确保您已声明

```
CreateMap<Source, Destination>(); 
```

当您可以声明两种类型的 CreateMap 时，我看不出您使用 Dynamic Map 的原因。您不应该以这种方式体验这种行为。

# c# - 在 Visual Studio 中使用 C# 或 VB 为 Mac、Windows 或 iOS 创建桌面应用程序

> ID：15175031
> 
> 赞同：5
> 
> 时间：2013-03-02T13:31:23.367
> 
> 标签：c#, ios, windows, macos, xamarin.mobile

我可以在 Visual Studio 中创建可以在 Mac、Windows 和 iOS 上运行的应用程序吗？我的客户要求我创建一个可以通过一键安装在 Mac、Windows 或 iOS 上运行的业务线应用程序，而他宝贵的应用程序是用 C# 开发的 Windows 应用程序，目前只能在 Windows 上运行。我看过xamarin，还有其他选择吗？任何帮助或建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T13:45:27.407

[Mono](http://www.mono-project.com/Main_Page)是一个跨平台的开源 .NET 框架，适用于此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T13:35:16.970

是和否；）

通过 Visual Studio 和 Mono（据我所知，它是 .NET 的开源实现）是可能的（并且是全新的），但你仍然需要一个 mac 来编译 iOS / OSX 版本，一个 iPhone / iPad / iPod touch在设备等上进行测试

老实说，我会分别创建一个 OSX 应用程序、iOS 应用程序和 Windows 应用程序。愿意一次做所有事情很好（通常是成本问题），但这不是一个真正的选择（除非成本是主要问题）。

即使在 iOS 和 OSX 之间也存在许多差异，不同的概念（在 OSX 上可以选择多个窗口/在 iOS 中只有一个窗口，即使对于常见的东西也有不同的 API，iOS 应用程序的“触摸”将使您的工作方式不同，屏幕大小会让您想到不同的功能，或者并非所有功能都适合 iOS 应用程序）。“用户友好性”是需要考虑的事情。windows用户和mac用户不习惯相同的界面，相同的应用程序概念，手机或触控板上的手势，mac应用程序通常不使用（F1，F2等键）等。

有诸如phoneGap之类的东西（好吧，不是您问题的桌面部分），它说一切都可以在所有手机上运行，​​但它并没有受益于平台的优势，它达到了较低的公分母，这意味着您的应用程序通常效率较低比本地制造的要好。

更危险的是，您从这些工具的错误中继承，有些可能很难理解（我的代码中是否有问题，在 phoneGap/xamarin 中？）并且您可能会在这些东西上浪费很多时间。

最后只是成本问题。

甚至 Microsoft 的 Excel 在 OSX 和 Windows 平台之间也有所不同，他们甚至修复了 excel 2011 for mac 中的一个错误，该错误仍然存​​在于 Windows 版本中；）（如果我没记错的话，它们有不同的业务部门）

所以是的，业务逻辑，但 Mac 应用程序不仅是 Objective-C，您可以在 Xcode 中导入/使用 C 或 C++ 文件。

只是我的 2 美分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T13:34:50.093

您可以创建一个独立于机器、架构的 Web 应用程序。

或者您需要为 Windows 和 Mac OSX 创建两个不同的平台应用程序，它们都共享存储在某个服务器或任何类型的机器中的相同数据库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T13:52:04.130

正如MusiGenesis 建议的那样，[Mono](http://www.mono-project.com/Main_Page)可能会为您解决问题。您仍然需要[Xamarin 的 MonoTouch](http://xamarin.com/monotouch) for iOS 支持，但如果您将业务逻辑分离到可以轻松重用的单独程序集。

您可能还想考虑为桌面版本制作两个不同的项目，一个使用[MonoMac](http://www.mono-project.com/MonoMac)，另一个使用 WPF（适用于 Windows），以便为您的用户提供更好的体验，但仍然在单独的程序集中使用实际逻辑，您可以在所有平台上重复使用.

# python - 在 Django 模板中显示图像

> ID：15175032
> 
> 赞同：16
> 
> 时间：2013-03-02T13:31:38.997
> 
> 标签：python, django, image, templates

有人可以帮我解决这个问题吗：我有一个 Django 项目，

**在 settings.py**

```
 MEDIA_ROOT = 'C:/Users/hl/workspace/beer/media'
 MEDIA_URL = '/media/'
 STATICFILES_DIRS = (
    'C:/Users/hl/workspace/beer/media'
 ) 
```

**在models.py中**

```
image1= models.ImageField(upload_to=settings.MEDIA_ROOT) 
```

**并在 url.py**

```
 (r'^media/(?P<path>.*)$', 'django.views.static.serve',{'document_root': settings.MEDIA_ROOT}), 
```

**在视图中**

```
def allBeer(request): 
      beers=Beer.objects.all().order_by("name")
      context={'beers': beers}
      return render_to_response('AllBeers.html',context,context_instance=RequestContext(request)) 
```

**并在 html**

```
 {%for beer in beers %}
    <p>
        <a href="/beers/{{beer.slug}}/">
            <img scr="{{beer.image1.url}}">{{beer}}
        </a>
    </p>
 {% endfor%} 
```

加载图像没有问题，但图像不会显示在 html 文件中。我已经从互联网上搜索并阅读了很多内容，但我仍然无法弄清楚。

谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-02T13:50:45.403

```
image1= models.ImageField(upload_to=images)

from django.conf.urls import patterns, include, url
from django.conf.urls.static import static
from django.contrib import admin
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
from project_name import settings

admin.autodiscover()
urlpatterns = patterns('',
    ...........
) + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)

urlpatterns += staticfiles_urlpatterns()

<img src="{{MEDIA_URL}}{{beer.image1}}"> 
```

**设置.py**

```
import os

PROJECT_ROOT = os.path.join(os.path.dirname(__file__), '..')
SITE_ROOT = PROJECT_ROOT

MEDIA_ROOT = os.path.join(SITE_ROOT, 'media')
MEDIA_URL = '/media/'

STATIC_ROOT = os.path.join(SITE_ROOT, 'static')
STATIC_URL = '/static/'

STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    os.path.join(SITE_ROOT, 'staticfiles'),
)

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    os.path.join(SITE_ROOT, 'templates'),
) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-02T13:39:01.160

你弄乱`src`了图像的属性。应该只是——

```
<img src="{{beer.image1.url}}" /> <!-- from the media url --> 
```

不要在最后添加任何东西 - django 知道提供图像的 url - 这就是模型上的 ImageField 所做的。

我不知道您的 url conf 实际上有什么问题，但[文档](https://docs.djangoproject.com/en/1.11/howto/static-files/#django.conf.urls.static.static)中推荐的模式是 -

```
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = patterns('',
    # ... the rest of your URLconf goes here ...
) + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-04-19T03:24:09.357

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-30T10:20:56.020

图片的位置很重要。它必须在静态文件夹中，并且必须在设置中定义。

# html - 两个复选框不会同时打开

> ID：15175035
> 
> 赞同：0
> 
> 时间：2013-03-02T13:31:52.603
> 
> 标签：html, css, checkbox, click

我怎样做？例如我有两个复选框，这两个框都不能工作。CSS 等等，但是我该怎么做呢？

```
<input id="val1" type="checkbox" />
<label for="val1">Value1</label>
<input id="val2" type="checkbox" />
<label for="val2">Value2</label> 
```

谢谢你的兴趣。干得好。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T15:26:47.743

听起来您想要两个无法同时选择的控件。在 HTML 中，这将是一个单选按钮，而不是一个复选框。您将使用相同的`name`属性使它们成为功能组：

```
<input id="val1" type="radio" name="foo" />
<label for="val1">Value1</label>
<input id="val2" type="radio" name="foo" />
<label for="val2">Value2</label> 
```

但是请注意，一旦用户选择了单选按钮，单选按钮集就不能重置为“无选择”状态，除非通过重置按钮（这实际上是一个破坏按钮，几乎任何时候都应该避免成本）或通过脚本。

因此，包含一个没有选择的虚拟条目通常很有用：

```
<input id="val0" type="radio" name="foo" checked="checked" />
<label for="val0">Not answered yet</label>
<input id="val1" type="radio" name="foo" />
<label for="val1">Value1</label>
<input id="val2" type="radio" name="foo" />
<label for="val2">Value2</label> 
```

# c# - 如何获取折线的每个像素的坐标？

> ID：15175039
> 
> 赞同：1
> 
> 时间：2013-03-02T13:32:15.127
> 
> 标签：c#, .net, wpf

我有 256x256`Canvas`和 a `Polyline`，第一个`Point`坐标`X`= 0，最后`Point`一个坐标 = `X`255。在运行时用户输入的中间可能有更多点。如何获得渲染的 0-255 范围内`Y`的每个坐标？`X``Polyline`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:50:54.947

假设折线的点是 (x[i], y[i])，对于 i = 0 到 n，其中 x 值按升序排列。所以，我们知道 x[0] = 0 和 x[n] = 255。然后假设给定了一个在 0 到 255 范围内的 x 值。我们首先找到一个索引 i，使得 x[i] < x <= x [i+1]。那么对应的y值由下式给出

```
y = y[i] + (y[i+1] - y[i])*(x - x[i])/(x[i+1] - x[i]) 
```

或者，等效地

```
y = ( (x[i+1] - x)*y[i] + (x - x[i])*y[i+1] ) / (x[i+1] - x[i]) 
```

当然，如果 x[i] = x[i+1] 会出现问题，所以这种特殊情况需要格外小心。

另外，请注意，这些公式将为您提供 y 的非整数值，这显然不直接对应于任何像素位置。究竟要渲染哪些像素取决于线的宽度和扫描转换算法的内部细节，我们无法知道。但是，如果将 y 值四舍五入为整数，则很有可能会渲染相应的像素。

# javascript - 谷歌地图 API v3，点击事件未在 Java 脚本中触发

> ID：15175040
> 
> 赞同：0
> 
> 时间：2013-03-02T13:32:16.113
> 
> 标签：javascript, google-maps, google-maps-api-3, event-listener, google-geocoding-api

我正在使用 google map api v3 for javascript。我设法在我的网页上找到了地图。现在我需要在用户点击地图时执行反向地理编码。为此，我编写了必要的事件监听器和反向地理编码代码

```
 <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=My_Key&sensor=false"></script>
 <script type="text/javascript"> 
    var map;
    function initialize() {
     var myLatlng = new google.maps.LatLng(-34.397, 150.644);
     var mapOptions = {
          zoom: 4,
          center: myLatlng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
         }
     map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    }
     google.maps.event.addListener(map, 'click', function(event) {
     placeMarker(event.latLng);
     var myLatLng = event.latLng;
     var lat = myLatLng.lat();
     var lng = myLatLng.lng();
     var latlng = new google.maps.LatLng(lat, lng);

     //Code to reverse geocode follows
     geocoder.geocode({'latLng': latlng}, function( results, status ) {
     if ( status == google.maps.GeocoderStatus.OK ) {
        if ( results[1] ) {
           map.setZoom( 11 );
           marker = new google.maps.Marker({
               position: latlng,
               map: map
           });
           infowindow.setContent( results[1].formatted_address );
           infowindow.open( map, marker );
           document.forms["wheregoing"]["start"].value=results[1].formatted_address;
        }
     } else {
        alert("Geocoder failed due to: " + status);
     }
   });
  });

  function placeMarker( location ) {
    var marker = new google.maps.Marker({
        position: location,
        map: map
    });
    map.setCenter(location);
  } 
```

上面提到的代码是用于java脚本的。在 HTML 中，我声明了一个应该显示地图的地方，如下所示

```
 <div id="map_canvas"></div> 
```

我面临的问题是，当用户单击地图时，应在该点放置一个地标，并且该地址应出现在 html 表单中名为“start”的文本框中，但事实并非如此。地图正在网站上加载，但未检测到点击事件。我正在本地主机上工作。我正在本地主机上测试地图的这个功能。请帮忙。告诉我哪里出错了，为什么它没有检测到点击事件。我是这方面的初学者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T13:52:22.543

初始化地图后，您需要在初始化函数中设置点击侦听器：

```
 <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=My_Key&sensor=false"></script>
    <script type="text/javascript"> 
    var map;
    var geocoder = new google.maps.Geocoder();
    var infowindow = new google.maps.InfoWindow();

    function initialize() 
    {
     var myLatlng = new google.maps.LatLng(-34.397, 150.644);
     var mapOptions = 
         {
          zoom: 4,
          center: myLatlng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
         }
     map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

     google.maps.event.addListener(map, 'click', function(event) {
      placeMarker(event.latLng);
      var myLatLng = event.latLng;
      var lat = myLatLng.lat();
      var lng = myLatLng.lng();
      var latlng = new google.maps.LatLng(lat, lng);

      //Code to reverse geocode follows
       geocoder.geocode({'latLng': latlng}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
         if (results[1]) {
          map.setZoom(11);
          marker = new google.maps.Marker({
            position: latlng,
            map: map
          });
          infowindow.setContent(results[1].formatted_address);
          infowindow.open(map, marker);
          document.forms["wheregoing"]["start"].value=results[1].formatted_address;
        }
       } else {
        alert("Geocoder failed due to: " + status);
       }
      });
     });
    }    

  function placeMarker(location) 
    {
    var marker = new google.maps.Marker({
    position: location,
    map: map
 });

  map.setCenter(location);
}
  </script>
  <body onload="initialize()"> 
```

[工作示例](http://www.geocodezip.com/v3_simpleMap_reverseGeocode.html)

# javascript - Jquery serialize() 不能在一个表单中使用两个 div

> ID：15175042
> 
> 赞同：0
> 
> 时间：2013-03-02T13:32:39.550
> 
> 标签：javascript, html, jquery

我想使用单一形式将用户信息分成两部分，然后序列化这些值。这是我在我的代码中执行此操作的方式-

```
 <form action="">
<div id="11">
First name: <input type="text" name="FirstName" value="" /><br>
Last name: <input type="text" name="LastName" value="" /><br>
</div>

<button id="b1" >Proceed to get next two values</button>

<div id="22" style="display:none">
First name2: <input type="text" name="FirstName2" value="" /><br>
Last name2: <input type="text" name="LastName2" value="" /><br>
</div>

</form>

<button id="b2"  style="display:none">Serialize all form values</button>
<div></div> 
```

因此，在上面的代码中，我想一次显示两个字段，同时隐藏另外两个字段。然后使用 jquery serialize() 序列化所有四个值。这是我试图在我的 Jquery 中处理这个问题的方法：

```
<script>
$(document).ready(function(){
  $("#b1").click(function(){
  $("#11").hide();
  $("#b1").hide();
  $("#22").show();
  $("#b2").show();
});
  $("#b2").click(function(){
    y = $("div").text($("form").serialize());
   alert("output" + y);
   });
});
</script> 
```

当我单击按钮（ID 为 11）时，div2 会显示，然后它会自动消失。不知道我在犯什么错误。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:52:08.657

问题无关`serialize`。

这段代码：

```
$("div").text($("form").serialize()); 
```

将替换每个`DIV`页面的内容。要针对特定​​对象`DIV`，请为其指定 ID。您还需要防止按钮在单击时触发浏览器提交表单。这可以通过设置或使用脚本`type`来`button`防止默认

演示：http: [//jsfiddle.net/rd5Ac/](http://jsfiddle.net/rd5Ac/)

如果您将按钮放置在表单`DIV`的

# c# - 如何使应用程序从后台服务执行？

> ID：15175044
> 
> 赞同：-2
> 
> 时间：2013-03-02T13:32:47.720
> 
> 标签：c#, windows-phone-8, background-service

我想问一下警报应用程序如何在移动设备上工作。因为它不会耗尽电池，我认为在我的问题（如下）中我可以使用相同的方法。而且我不知道如何使用后台服务，它以给定的时间执行主应用程序。我必须计算用户输入的每个时间段。如果结果与用户想要的相同（用户也输入），我需要向他展示结果。我必须如何申请：两个分开的应用程序（定时器/计算器和输入/输出）或一个应用程序？如果我写两个分开的应用程序，第一个计时器/计算器必须像控制台应用程序？

我的主要问题是：如何将“某物”设置为给定期间，我知道我的计算器将计算给定期间的某物？PS对不起我的英语。如果有任何错误，请原谅我的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:28:19.843

您不能在 Windows Phone 上任意时间在后台运行。您只能定期运行（每 30 分钟一次，最长执行时间为 25 秒）。即使这样，如果出现以下情况，您也不能保证运行：

*   你之前坠毁了两次。
*   用户关闭了您的服务。
*   省电模式已开启。...

请参阅[https://stackoverflow.com/a/13520869/694641](https://stackoverflow.com/a/13520869/694641)，了解更多关于当您的应用不在前台时可能发生的情况的详细信息。

# ssh - gitHub 如何仅使用 sshKey 限制访问？

> ID：15175049
> 
> 赞同：4
> 
> 时间：2013-03-02T13:33:35.487
> 
> 标签：ssh, ssh-keys

我在徘徊 gitHub 如何仅通过使用 sshKey 来限制 repo 访问。每个人都在使用“git”用户进行连接......但访问权限仅限于您的存储库。

那怎么可能呢？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T18:16:59.710

GitHub 正在利用 OpenSSH 的一项功能。请参阅 sshd(8) 手册页中的“AUTHORIZED_KEYS 文件格式”部分。它说`authorized_keys`文件中的每一行都包含以下内容：

```
<options> <keytype> <base64-encoded key> <comment> 
```

支持的选项之一是`command`：

> *   **`command="command"`** 指定`command`每当此密钥用于身份验证时执行。用户提供的命令（如果有）将被忽略。

`~git/.ssh/authorized_keys`因此，GitHub 可以在他们的文件中做这样的事情：

```
command="foo -u user1" <user1's key stuff here>
command="foo -u user2" <user2's key stuff here> 
```

现在，无论何时`user1`登录，服务器都会运行`foo -u user1`. 因此，`foo`脚本知道已`user1`登录，而不是其他用户。

# c - String 只记录第一个单词

> ID：15175051
> 
> 赞同：3
> 
> 时间：2013-03-02T13:33:45.193
> 
> 标签：c, string, word

我刚刚开始使用 C 语言进行编程，并且正在编写一个密码/解密程序。要求用户输入存储为 char * 的短语。问题是程序只存储字符串的第一个单词，然后忽略它之后的所有内容。这是获取字符串然后对其进行分析的代码部分

```
int maincalc(int k)                         //The Calculation Function for Cyphering
{
    char *s;
    s=(char*) malloc(sizeof(100));
    printf("Please enter the phrase that you would like to code: ");  
    fscanf(stdin,"%s %99[^\n]", s);
    int i=0;
    int n=strlen(s);

    while(i<n)
    {
        if(s[i]>=65&&s[i]<=90)              //For Uppercase letters
        {
            int u=s[i];
            int c=uppercalc(u,k);
            printf("%c",c);
        }
        else if(s[i]>=97&&s[i]<=122)    //For Lowercase letters
        {
            int u=s[i];
            int c=lowercalc(u,k);
            printf("%c",c);
        }
        else 
            printf("%c",s[i]);          //For non letters
        i++;
    }
    free(s);
    printf("\n");
    return 0;
} 
```

只需要知道如何让程序确认整个字符串的存在，而不仅仅是第一个单词。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T14:06:54.777

> 不，没有一个工作。使用 fscanf 不会等待用户输入。它只是打印“请输入短语...”然后退出 fgets 也做同样的事情，程序不等待输入，只是打印“请输入...”然后退出。

在该评论中，在编辑之前，您提到了一些先前的输入。我的精神调试能力告诉我，输入缓冲区中仍有来自先前输入的换行符。那会让

```
fgets(s, 100, stdin); 
```

和

```
fscanf(stdin, "%99[^\n]", s); 
```

立即返回，因为他们立即遇到表示输入结束的换行符。

在获取更多字符串输入之前，您需要使用缓冲区中的换行符。你可以使用

```
fscanf(stdin, " %99[^\n]", s); 
```

格式开头的空间消耗输入缓冲区中的任何初始空白，或清除输入缓冲区

```
int ch;
while((ch = getchar()) != EOF && ch != '\n);
if (ch == EOF) {
    // input stream broken?
    exit(EXIT_FAILURE);
} 
```

`fgets`在使用或获取输入之前`fscanf`。

# powershell - Powershell - 安装 Windows 更新？

> ID：15175054
> 
> 赞同：6
> 
> 时间：2013-03-02T13:34:04.753
> 
> 标签：powershell, powershell-2.0

这可能吗？

我想我们需要以某种方式调用 WUAgent 来运行检测，但我想基本上下载并安装更新，然后作为脚本的一部分重新启动。

这将是一个更大的脚本的一部分，基本上通过 Powershell 构建一个香草 2008R2 盒子到一个 DC。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-02T13:45:59.130

查看 PowerShell 的 PSWindowsUpdate 模块。

它位于[脚本中心](http://gallery.technet.microsoft.com/scriptcenter/2d191bcd-3308-4edd-9de2-88dff796b0bc)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-19T11:40:42.857

我建议使用这个脚本

```
Function WSUSUpdate {
$Criteria = "IsInstalled=0 and Type='Software'"
$Searcher = New-Object -ComObject Microsoft.Update.Searcher
try {
    $SearchResult = $Searcher.Search($Criteria).Updates
    if ($SearchResult.Count -eq 0) {
        Write-Output "There are no applicable updates."
        exit
    } 
    else {
        $Session = New-Object -ComObject Microsoft.Update.Session
        $Downloader = $Session.CreateUpdateDownloader()
        $Downloader.Updates = $SearchResult
        $Downloader.Download()
        $Installer = New-Object -ComObject Microsoft.Update.Installer
        $Installer.Updates = $SearchResult
        $Result = $Installer.Install()
    }
}
catch {
    Write-Output "There are no applicable updates."
    }
}

WSUSUpdate
If ($Result.rebootRequired) { Restart-Computer } 
```

来源：[https ://gist.github.com/jacobludriks/9ca9ce61de251a5476f1](https://gist.github.com/jacobludriks/9ca9ce61de251a5476f1)

# php - 使用标头会影响会话变量

> ID：15175061
> 
> 赞同：0
> 
> 时间：2013-03-02T13:34:49.963
> 
> 标签：php, session, header

标题和会话变量存在严重问题。阅读相关帖子，但没有一个对我有帮助。

我正在使用会话来存储有关登录用户的一些信息，例如名称、用户 ID 等。

首先，让我们说`$_SESSION['user_id']=6;`。

然后让我们坐下来，我想查看某人的个人资料。有一个下拉列表，您可以在其中选择要查看其个人资料的人员，然后单击`View`。处理页面会查找您选择的人的 user_id，并将您重定向到该人的个人资料。

代码是这样的：

```
<?php session_start();
$_SESSION['user_id']=1; //this is the user_id of the person logged in..
/*......many lines of code*/
?>
<select name="user_id">
<option value="4">George Thuo</option>
<!--other many options-->
</select>
<input type="submit" name="view" value="View"> 
```

然后这将引导您进入如下所示的处理页面：

```
$user_id=$_POST['user_id'];
header("Location: view.php?user_id=".$user_id); 
```

看到之前我们使用了标头，`$_SESSION['user_id']=1;` 但是在标头是用户之后，我不知道为什么但是`$_SESSION['user_id']=4;(the user_id passed via the $_POST method`

为什么会发生变化？

# algorithm - 给定 N 个整数的绝对值，求 N/2 个负值和 N/2 个正值的总和最接近 0 的组合

> ID：15175066
> 
> 赞同：3
> 
> 时间：2013-03-02T13:35:18.117
> 
> 标签：algorithm, integer, sum, permutation

假设我有一个包含 10 个数字的数组，其绝对值范围可以从 1 到 10。值可以重复。这方面的一个例子可能是

```
{2, 4, 2, 6, 9, 10, 1, 7, 6, 3}. 
```

我们可以为这些数字中的每一个分配一个正号或负号，但每个组合中应该始终有 5 个负数和 5 个正数，例如

```
{-2, -4, 2, -6, 9, 10, 1, 7, -6, -3}
{2, -4, -2, 6, -9, 10, -1, 7, -6, 3} 
```

是遵循此规则的可能排列。

我想在给定集合的半正和半负值的所有可能排列中找到其值最接近 0 的最小正或负和。

有什么建议么？我觉得这个问题在计算上非常密集，我不确定是否有一个不是蛮力的解决方案（例如枚举所有排列，然后应用最接近的 3Sum 的变体）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:29:06.083

首先对数组进行排序，然后将最大的数字放入负组，将第二大的放入正组。将最大数设置为正数组，直到它们的总和大于零。现在设置另一个负数。重复它，直到你设置 5 个负数。这是贪心算法。似乎你的问题是 np-complete，它看起来像 AST 问题，但是，你的问题的大小限制为 10，所以你可以通过暴力搜索来解决它，你只需要检查 C(10,5)<10^5 可能性这个数字对于今天的个人电脑来说很小。

此外，如果能够选择不同大小的集合，您的问题与可以在伪多项式时间内解决的子集和问题相同请[参阅](http://www.geeksforgeeks.org/dynamic-programming-subset-sum-problem/)：[1、2](https://stackoverflow.com/questions/4355955/subset-sum-algorithm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T20:31:46.383

这是 Haskell 中的一个示例，它列出并比较了所有 126 种可能的组合：

```
import Data.List
import Data.Ord

{-code by Will Ness-}
divide :: [a] -> [([a], [a])]
divide [] = [([],[])]
divide (x:xs) = go ([x],[],xs,1,length xs) where
  go (a,b,[],i,j) = [(a,b)]
  go (a,b, s@(x:xs),i,j) 
     | i>=j = [(a,b++s)]
     | i>0  = go (x:a, b, xs, i+1, j-1) ++ go (a, x:b, xs, i-1, j-1)
     | i==0 = go (x:a, b, xs,   1, j-1) ++ go (x:b, a, xs,   1, j-1)  

{-code by groovy-}       
minCombi list = 
  let groups = map (\x -> map (negate) (fst x) ++ snd x) (divide list)
      sums = zip (map (abs . sum) groups) groups
  in minimumBy (comparing fst) sums 
```

*Main> minCombi [2, 4, 2, 6, 9, 10, 1, 7, 6, 3]
(0,[-7,-10,-2​​,-4,-2,1,9,6, 6,3])

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T13:51:44.307

这是 amin k 描述的算法的 java 实现。

它没有 Haskell 实现那么酷，我没有正式的证据证明它在每种情况下都有效，但它似乎有效。

```
import java.util.Arrays;
import java.util.Random;

public class TestPermutations {

int[] values = new int[10];
int[] positives = new int[5];
int[] negatives = new int[5];

public static void main(String... args) {
    new TestPermutations();
}

public TestPermutations() {
    Random ra = new Random();
    System.out.println("generating sequence...");
    for (int i = 0; i < 10; i++) {
        values[i] = (ra.nextInt(10) + 1);
        System.out.print(values[i] + " ");
    }
    Arrays.sort(values);

    int sum = 0;
    int positiveIndex = 0;
    int negativeIndex = 0;
    for (int i = values.length - 1; i >= 0; i--) {
        if (i == values.length - 1) {
            negatives[negativeIndex] = - values[i];
            negativeIndex++;
            sum -= values[i];
        }
        else {
            if (sum <= 0) {
                if (positiveIndex < 5) {
                    positives[positiveIndex] = values[i];
                    positiveIndex++;
                    sum += values[i];
                }
                else {
                    negatives[negativeIndex] = - values[i];
                    negativeIndex++;
                    sum -= values[i];
                }
            }
            else {
                if (negativeIndex < 5) {
                    negatives[negativeIndex] = - values[i];
                    negativeIndex++;
                    sum -= values[i];
                }
                else {
                    positives[positiveIndex] = values[i];
                    positiveIndex++;
                    sum += values[i];
                }
            }
        }
    }

    System.out.print("\npositives ");
    for (int pos : positives) {
        System.out.print(pos + " ");
    }
    System.out.print("\nnegatives ");
    for (int neg : negatives) {
        System.out.print(neg + " ");
    }
    System.out.println("\nsum closest to 0: " + sum);
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T13:54:21.297

您是否尝试过计算差异？即：取第一个数字。找出差值最小的值，然后求和。继续直到完成。在最坏的情况下，算法是 O(n^2) 复杂度，这不是完全可取的，但它是一个起点

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T14:08:56.053

欢迎来到 NP 级问题的世界！

您可以通过蛮力或尝试一种轻松的方法（如单纯形算法）计算最佳解决方案，这将在多项式时间内为您提供平均情况复杂度的解决方案

# maven - 更改 Maven pom.xml 物理价值

> ID：15175068
> 
> 赞同：7
> 
> 时间：2013-03-02T13:35:27.607
> 
> 标签：maven, continuous-delivery, build-pipeline

我正在为几个相互依赖的项目构建部署管道。每个构建都会生成一个具有唯一版本号的新发布构建，该版本会部署到 Maven 存储库。然后以该新版本作为依赖项触发管道中的下游项目，并以类似的方式构建。

我需要的是在构建项目之前更改 pom.xml（或多模块项目中的所有 pom）中的属性值。例如，在以下代码中，“0.1.200”将更改为“0.1.345”（或任何最新的内部版本号）。使用系统属性不是一个选项，因为更新的 pom 将部署在 Maven 存储库中，因此更改必须是持久的。

```
<properties>
    <foo.version>0.1.200</foo.version>
</properties>

<dependencies>
    <dependency>
        <groupId>com.example</groupId>
        <artifactId>foo</artifactId>
        <version>${foo.version}</version>
    </dependency>
</dependencies> 
```

**是否有一些 Maven 插件可以通过一个命令行指令执行此操作？**否则，我将需要编写一个简短的脚本（例如在 Ruby 中）来解析和更改项目中的所有 pom.xml 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T11:05:20.733

可用的 Maven 插件不符合我的目的，所以我最终编写了以下 Ruby 脚本，它完全符合我的需要：

```
#!/usr/bin/env ruby
require 'rexml/document'

def change_property(pom, key, value)
  property = pom.elements["/project/properties/#{key}"]
  if property != nil
    puts "    #{key}: #{property.text} -> #{value}"
    property.text = value
  end
end

unless ARGV.length == 2
  puts "Usage: #{$0} KEY VALUE"
  exit 1
end
KEY = ARGV.shift
VALUE = ARGV.shift

Dir.glob("**/pom.xml") { |pom_path|
  puts pom_path

  pom = REXML::Document.new(File.new(pom_path))
  pom.context[:attribute_quote] = :quote
  change_property(pom, KEY, VALUE)

  File.open(pom_path, 'wb') { |file|
    pom.write(file)
  }
  puts
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T17:26:07.173

是的，存在一个[`maven-replacer-plugin`](https://code.google.com/p/maven-replacer-plugin/)能够做到这一点的人。

但是，如果您正在使用一些 CI 工具（显然您是），您也可以为此目的坚持使用自定义脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-14T08:34:06.450

我有类似的要求。除了更新 /project/properties 节点下的属性外，我还需要更新 /project/profiles/properties 节点下的属性，因此我修改了 Esko 的脚本以支持更新这两种情况。同时，它还支持在一个命令中更新多个属性，因此如果您需要更新同一个 pom.xml 中的多个属性，则无需多次运行它。

```
#!/usr/bin/env ruby
require 'rexml/document'

def change_profile_property(pom, profile_id, key, value)
  property = pom.elements["/project/profiles/profile[id='#{profile_id}']/properties/#{key}"]
  if property != nil
    puts "    #{profile_id}-#{key}: #{property.text} -> #{value}"
    property.text = value
  end
end

def change_property(pom, key, value)
  property = pom.elements["/project/properties/#{key}"]
  if property != nil
    puts "    #{key}: #{property.text} -> #{value}"
    property.text = value
  end
end

if ARGV.length == 0
  puts "Usage: #{$0} KEY=VALUE [-profile <profile id>] KEY=VALUE"
  exit 1
end

# parse the command line argument to get the key/value
global_properties = Array.new
profile_properties= Array.new

profile = nil
loop { case ARGV[0]
  when '-profile' then  ARGV.shift; profile=ARGV.shift
  when nil then break
  else 
    kv_str = ARGV.shift
    if profile == nil
      global_properties.push(kv_str)
    else
      profile_properties.push(kv_str)
    end
  end; 
}

Dir.glob("**/pom.xml") { |pom_path|
  puts pom_path

  pom = REXML::Document.new(File.new(pom_path))
  pom.context[:attribute_quote] = :quote

  # updating the global properties
  if global_properties.length != 0
    for kv in global_properties
      kv_array = kv.split('=')
        if kv_array.length == 2
          change_property(pom, kv_array[0], kv_array[1])
        end
    end
  end

  # updating the properties in profile
  if profile_properties.length != 0
    for kv in profile_properties
      kv_array = kv.split('=')
      if kv_array.length == 2
        if profile != nil
          change_profile_property(pom, profile, kv_array[0], kv_array[1])
        end
    end
    end
  end

  File.open(pom_path, 'wb') { |file|
    pom.write(file)
  }
  puts
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T14:26:26.853

你试过这个吗？

[版本 Maven 插件](http://mojo.codehaus.org/versions-maven-plugin/index.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-06T10:30:37.520

[Flatten Maven 插件](http://www.mojohaus.org/flatten-maven-plugin/)可用于更新变量。让我用一个例子来解释。

```
<groupId>groupid</groupId>
<artifactId>artifactid</artifactId>
<version>${ServiceVersion}</version>
<packaging>pom</packaging>

<properties>
    <foo.version>${ServiceVersion}</foo.version>
</properties> 
```

在 pom.xml 中，我使用“ServiceVersion”在构建期间获取值。foo.version 变量也将在构建期间更新。现在， foo.version 变量可以在任何依赖项中使用。

```
<dependencies>
    <dependency>
        <groupId>com.example</groupId>
        <artifactId>foo</artifactId>
        <version>${foo.version}</version>
    </dependency>
</dependencies> 
```

所以，最后在 pom.xml 中包含 Flatten Maven 插件

```
<plugin>
<groupId>org.codehaus.mojo</groupId>
<artifactId>flatten-maven-plugin</artifactId>
<version>1.0.0</version>
<configuration>
    <updatePomFile>true</updatePomFile>
</configuration>
 <executions>
    <execution>
        <id>flatten</id>
        <phase>process-resources</phase>
        <goals>
            <goal>flatten</goal>
        </goals>
    </execution>
    <execution>
      <id>flatten.clean</id>
      <phase>clean</phase>
      <goals>
        <goal>clean</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

现在提供服务版本。

```
clean install -DServiceVersion=0.1.345 
```

# ruby-on-rails - 如何使用 RSpec 对 Accepts_nested_attributes_for 进行单元测试？

> ID：15175069
> 
> 赞同：0
> 
> 时间：2013-03-02T13:35:30.340
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, ruby-on-rails-3.2

在我的 Rails 应用程序中，我有`Invoice`各种`Items`：

```
class Invoice < ActiveRecord::Base

  attr_accessible :date, :recipient, :items_attributes

  accepts_nested_attributes_for :items, :reject_if => :all_blank, :allow_destroy => true

end 
```

但是，我正在为该模型进行 RSpec 单元测试。例如，我想测试一个发票如果没有项目会引发错误。

这不起作用：

```
describe Invoice do

  it "is invalid without an item" do
    expect(build(:invoice, :items_attributes => {}).to have(1).errors_on(:items_attributes)
  end

end 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T00:27:32.230

来自 Accepts_nested_attributes_for[文档](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

```
You may also set a :reject_if proc to silently ignore any new record hashes if they fail to pass your criteria. 
```

文档没有详细说明它们的含义，**但**它可能不会引发异常......

尝试在项目模型属性上设置一些验证，存在肯定会引发一些异常，结束应该足够响亮，以使 rspec expect{..}.to 阻止工作。

# javascript - 使用 John Resig 的 JavaScript 类继承实现时打印子类名称而不是“类”

> ID：15175073
> 
> 赞同：-1
> 
> 时间：2013-03-02T13:35:56.150
> 
> 标签：javascript, inheritance

[我正在 John Resig 的类继承实现](http://ejohn.org/blog/simple-javascript-inheritance/)(javascript)之上构建一个系统

除了为了检查/调试目的（也许是为了稍后的类型检查，我想处理实例化类的实际名称。

例如：按照 John 的示例，返回`Ninja`而不是`Class`.

我知道这个名字来自，`this.__proto__.constructor.name`但这个道具是只读的。我想它必须是子类本身初始化的一部分。

任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:54:12.287

如果您仔细查看代码，您会看到如下几行：

```
Foo.prototype = new ParentClass;//makes subclass
Foo.prototype.constructor = Foo; 
```

如果省略第二行，则构造函数名称将是父类的名称。*name*属性可能是只读的，但不是`prototype`，`constructor`原型的属性也不是。这就是您可以设置*“类”* /构造函数的名称的方式。

另请注意，这`__proto__`不是获取对象原型的方法。最好使用这个片段：

```
var protoOf = Object && Object.getPrototypeOf ? Object.getPrototypeOf(obj) : obj.prototype;
//obviously followed by:
console.log(protoOf.constructor.name);
//or:
protoOf.addProtoMethod = function(){};//it's an object, thus protoOf references it
//or if all you're after is the constructor name of an instance:
console.log(someInstance.constructor.name);//will check prototype automatically 
```

就这么简单，真的。

# tooltip - 工具提示 echo $row->description

> ID：15175074
> 
> 赞同：0
> 
> 时间：2013-03-02T13:36:09.317
> 
> 标签：tooltip, jquery-ui-tooltip

我试图在 jquery ui 工具提示中回显 db $row->description 的结果。该工具提示将显示我的大多数其他 PHP $row 请求，例如图像和标题，但它不会回显我的数据库中的描述。当描述很长时，似乎有这个问题。

所以换句话说，工具提示在很短时会显示 $row->description，但如果描述很长，则根本不会显示任何内容。

我尝试在此使用 strip_tags($row->description) 但这似乎也不起作用。

有没有人有任何其他建议？感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:42:54.653

您可以尝试去除任何控制字符，例如换行符等。

# java - 无法将广告放置在线性布局的底部

> ID：15175078
> 
> 赞同：0
> 
> 时间：2013-03-02T13:36:15.290
> 
> 标签：java, android, admob

我正在尝试将广告永久置于布局底部。我正在使用 tabhost，当我将广告放在 freamelayout 上方时，它会在顶部显示广告。我想把这个广告放在底部。这是我的布局文件的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background_splash"
    >
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            />
            <com.google.ads.AdView android:id="@+id/adView"
                         android:layout_width="480dp"
                         android:layout_height="100dp"
                         ads:adUnitId="XXXXXXXXX"
                         ads:adSize="BANNER"
                         ads:testDevices="TEST_EMULATOR, XXXXXXXX"
                         ads:loadAdOnCreate="true"/>

        </LinearLayout>
</TabHost> 
```

当我将 adview 放在框架布局之前时，它会向我显示广告，但我想在 tabhost 的底部显示广告。

谢谢，阿曼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T13:37:38.297

问题是 FrameLayout 的高度设置为 match_parent。

您需要做的是将 FrameLayout 的 layout_height 设置为 0dip，然后将 layout_weight 分配为 1。这将指示它填充空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T13:43:38.293

试试这个代码：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background_splash">
   <LinearLayout
      android:orientation="vertical"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent">
    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        />
        <com.google.ads.AdView android:id="@+id/adView"
                     android:layout_width="480dp"
                     android:layout_height="100dp"
                     ads:adUnitId="a15131e8f06efd9"
                     ads:adSize="BANNER"
                     ads:testDevices="TEST_EMULATOR, XXXXXXXX"
                     ads:loadAdOnCreate="true"/>

    </LinearLayout> 
```

# javascript - DOM 更改上的 Twitter 引导更改附加偏移量

> ID：15175080
> 
> 赞同：1
> 
> 时间：2013-03-02T13:36:27.587
> 
> 标签：javascript, jquery, twitter-bootstrap, fixed, submenu

[Twitter bootstrap 更改词缀偏移量](https://stackoverflow.com/questions/12181136/twitter-bootstrap-change-affix-offset)可能会有所帮助。据说他基本上有同样的问题并发布了我的问题的解决方案，但不幸的是我无法让它工作。

这是 Bootstrap Affix 插件页面（如果你知道另一种/比使用这个插件更好的方法，我全都听好了——这个插件不是必需的）：http: [//twitter.github.com/bootstrap/javascript.html#词缀](http://twitter.github.com/bootstrap/javascript.html#affix)

[http://jsfiddle.net/rPsK8/1](http://jsfiddle.net/rPsK8/1)

这是一个有助于显示我的问题的小提琴......但由于某种原因我无法让 Bootstrap Affix 做任何事情。:|

```
$(function () {
  $('#contentbody-toolbar').addClass("affix-top").each(function (){
    var $self = $(this);
    if ($("#advanced-total-outer").is(":visible")) {
    var offsetFn = function () {
        var $p = $('#advanced-total-outer').outerHeight();
        var h = 175 + $p;
        return h;
    }
    $self.affix({offset: {top: offsetFn}});
 } else {
    var offsetFn = function () {
        var h = 175;
        return h;
    }
    $self.affix({offset: {top: offsetFn}});
}
  });
}); 
```

编辑：我将上面的代码简化为（应该做同样的事情）：

```
$(function () {
  $('#contentbody-toolbar').addClass("affix-top").each(function (){
    var $self = $(this);
     var offsetFn = function () {
        var $p = $('.wrapper.clearfix.no-bord').outerHeight();
        var h = 175 + $p;
        return h;
    $self.affix({offset: {top: offsetFn}});
};
  });
}); 
```

但无论如何，这就是我的页面的基本设置方式，当您向下滚动并且导航栏（#contentbody-toolbar）位于窗口顶部时，它会修复它。现在，问题是，如您所见，我隐藏了一个可以取消隐藏的 div。因此，当该元素没有以某种方式隐藏时，我需要更新偏移量。

如果用户愿意，标头也可以更改大小（高度），因此它也需要为此更新。我在上面发布的代码对我来说似乎是合乎逻辑的，并且在它识别偏移更改的意义上它似乎“工作”，但是如果有意义的话，附加插件显然不会更新 DOM 中的更改。滚动 175 像素后，它将始终固定。

几天来，我一直试图让这个工作，老实说，我很沮丧。我真的不知道该怎么做。提问时 Stackoverflow 的侧边栏似乎可以按我的意愿运行，但我找不到他们的 moveScroller 脚本。

感谢提供的任何帮助，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T19:20:17.550

所以，在那里我注意到/提到了我想要的 stackoverflow 的作品......好吧，我搜索并找到了他们的代码，这要感谢 Josh Lee @How [can I make a div stick to the top of once it's been scrolled to ?](https://stackoverflow.com/questions/1216114/how-can-i-make-a-div-stick-to-the-top-of-the-screen-once-its-been-scrolled-to)

使用了他列出的几乎相同的代码：

```
function moveScroller() {
    var move = function() {
        var st = $(window).scrollTop();
        var ot = $("#scroller-anchor").offset().top;
        var s = $("#scroller");
        if(st > ot) {
            s.css({
                position: "fixed",
                top: "0px",
                width: "61%"
            });
        } else {
            if(st <= ot) {
                s.css({
                    position: "relative",
                    top: "",
                    width: "auto"
                });
            }
        }
    };
    $(window).scroll(move);
    move();
}

<script type="text/javascript"> 
  $(function() {
    moveScroller();
  });
</script> 
```

# c - ntdll.dll 中导出方法的调用约定

> ID：15175083
> 
> 赞同：0
> 
> 时间：2013-03-02T13:36:38.850
> 
> 标签：c, windows

我从 Ntdll.dll 调用导出的方法有些麻烦

在 VS2012 的调试模式下，我得到：

> 运行时检查失败 #0 - ESP 的值未在函数调用中正确保存。这通常是调用使用一种调用约定声明的函数和使用另一种调用约定声明的函数指针的结果

这是我使用的代码（x86 平台，Windows 7）。

```
#include "stdafx.h"
#include <Windows.h>

typedef NTSTATUS (* NTAPI  ZwClose)(HANDLE handle);

int _tmain(int argc, _TCHAR* argv[])
{
    ZwClose close = (ZwClose) ::GetProcAddress(GetModuleHandle(L"ntdll.dll"), "ZwClose");
    close(INVALID_HANDLE_VALUE);  // Error happens here
        return -1;
} 
```

根据我的阅读，它应该可以工作。我也尝试过 __cdecl 和 __fastcall 作为备用调用约定，但没有任何效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T15:07:42.187

你的选角不好，应该是：

```
typedef NTSTATUS (NTAPI* ZwClose)(HANDLE handle); 
```

您的声明使指向函数的指针符合 C 约定。C 调用约定与 STDCALL 相同，只是调用者更正了堆栈。

```
;C
push arg1
call fun
add esp, 4 
...

; STDCALL

push arg1
call func 
```

在反汇编中你可以看到调用 ZwClose 后，正在检查 Esp 的值。由于您对 ZwClose 的调用是 C 约定的，因此调用者和函数本身更正了 esp 值，这会导致错误 ofc。

```
000F14C4  mov         esi,esp  
000F14C6  push        0FFFFFFFFh  
000F14C8  call        dword ptr [close]  
000F14CB  add         esp,4  
000F14CE  cmp         esi,esp  
000F14D0  call        @ILT+380(__RTC_CheckEsp) (0F1181h) ; Run-Time Check Failure #0 
```

# assembly - （ASM）如何使正整数为负？

> ID：15175086
> 
> 赞同：0
> 
> 时间：2013-03-02T13:37:30.397
> 
> 标签：assembly, mips

我正在做一些在线 MIPS ASM 练习，但其他 ASM 语言将是类似的。

我对以下问题有疑问。它需要我执行 13 倍。这很简单：

```
## Compute 13x

ori $8,$0,1     # $8 = x

sll $9,$8,2     # x*2^2 = 4x
sll $10,$8,3        # x*2^3 = 8x
addu $10,$9,$10     # 4x+8x = 12x
addu $10,$10,$8     # 12x+x = 13x 
```

但是，它接着说通过仅添加**一条**指令来计算 -13x。

我的想法是取两者的补码。但是，这是 2 条指令：

```
## Calculate -13x with one additional instruction

nor $11,$10,$0      # 
addiu $11,$11,1     # flip bits and +1 to get two's comp? 
```

**如何在一条附加指令中计算 -13x？**

我想这意味着我原来的 13x 代码不好，因为我似乎只用一条指令就可以做到这一点。

我可以想到“肮脏的黑客”来做到这一点，但我认为这不是教授想要的。

**注意：我只能使用以下说明：**

```
add     
sll
addi        
addiu   
addu        
and
andi        
or      
ori
nor
sub
subu
srl
xor
xori 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T14:15:09.010

没关系，我是笨蛋。

我刚刚解决了。只需 0 - 13 倍！？！？！？

```
subu $11,$0,$10 # 0 - 13x = -13x 
```

# c# - 如何停止从 C# 中的 windows.form 应用程序调用的类函数

> ID：15175089
> 
> 赞同：0
> 
> 时间：2013-03-02T13:37:41.877
> 
> 标签：c#, winforms

在 C# 中，我编写了一个为 CAD 程序 (Rhino) 创建几何图形的遗传算法。该算法包含在一个库中，我为 CAD 程序编写了一个小型 Windows 窗体插件。调用 GA.run() 函数将返回一个列表，该列表填充一个列表框，选择一个项目将在 CAD 程序中生成几何图形。

在 Windows 窗体应用程序中，我创建了一个 GA 类的实例，并通过单击开始按钮从窗体中收集各种 GA 设置并调用 GA.run() 函数。现在，由于这是一种遗传算法，它会在返回之前运行若干代。但是，我希望可以选择在它运行所有代之前停止该功能。如何从我的插件中停止 GA.run() 函数？当我点击运行按钮时，Windows 窗体应用程序“暂停”，直到 GA.run() 返回其列表...

我想有更好的方法来调用 GA.run()？..

停止按钮代码：

```
private void runBtn_Click(object sender, EventArgs e)
{
    // get rule settings
    SettingsHolder gaSettings = new SettingsHolder();
    gaSettings.GenMaxrun = (int)gensNUD.Value;
    ..

    gaAlgo = new GA(algoSettings);

    try
    {
        currentPopulation = paretoAlgo.run();
    }
    catch(Exception e)
    {
        MessageBox.Show("exc while trying run: " + e);
    }

    // iterate list and list in form
    popLB.Items.Clear();
    foreach (Chromosome c in currentPopulation)
    {
        popLB.Items.Add(new KeyValuePair<String, int> (c.present(), id));
    }
} 
```

GA.运行（）：

```
 public List<Chromosome> run()
    {
        try
        {
            initPop();

            // loop until genMaxrun or no new achieved
            do
            {
                // create geometries from chromosomes
                foreach (Chromosome chromo in population)
                {
                    chromo.embryogeny(Settings);
                }

                // step 2:Fitness

                // union the population and archive
                unionPop = new List<Chromosome>(population);
                unionPop.AddRange(archive);

                calculateDomination(unionPop);

                foreach(Chromosome chromo in unionPop)
                {
                    chromo.calculateRawFitness(unionPop);
                    chromo.calculateDensity(unionPop);
                    chromo.setFitness();
                }

                environmentalSelection();

                // increase Generation +1
                generation += 1;

                // create new population...
                population = reproduction(generation);                    
            }
            while (generation < Settings.GenMaxrun);

        }
        catch (Exception e)
        {
           throw new Exception("Error in SPEA run", e);
        }

        return archive;
    } 
```

有没有办法在 run() 的 while 循环中添加检查？表单应用程序中的停止按钮单击事件能否更改 GA 的参数（因为它正在执行 run() 函数）并且 run() 函数将中止？或者我可以从 GA.run() 检查调用者中的参数吗？还是我需要使用线程？

如果我需要更准确地解释某些事情，请告诉我。

干杯，埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:46:32.730

尽管您可以`Application.DoEvents`在循环中执行某些操作，但最好让该代码在 a`Task`或[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)中运行。其中任何一个都将启动在单独线程上运行的遗传算法，使表单保持活动状态。然后，您可以拥有一个`Cancel`停止后台处理的按钮。

`BackgroundWorker`完全支持取消并定期向表单报告进度。查看该页面上的示例。我想它会做你想要的。

有人说这`Task`是一个更好的解决方案，因为它使用了新的线程模型。一般来说，`Task`这是我用于生产程序的，因为它有一些我觉得有用的其他选项，但`BackgroundWorker`工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T14:56:44.057

有一种方法可以使您的 CA 处于紧密循环中。Windows 消息泵未执行，因此要说用户刚刚单击了取消按钮，您必须在 GA 循环中调用 DoEvents，然后轮询已单击取消的标志。相信我，你不想这样做，它效率低下、脆弱、凌乱，而且单元测试完全是 PIA。

你需要的是一个线程。您还需要决定您的表格是否可以在 GA 工作时使用。如果不只是模态地抛出一个“工作......”风格的表格并在其上放置一个 cacle 按钮。那在你的 UI 线程中，所以它会得到点击，然后你停止 GA 线程。

线程还有很多东西，但是.Net 有一些很好的东西可以用来处理这些东西。BackgroundWorker 将是一个很好的查找。

# mysql - MySQL 中的事务

> ID：15175092
> 
> 赞同：3
> 
> 时间：2013-03-02T13:38:18.410
> 
> 标签：mysql, sql, transactions, rdbms

**MySQL**将使用什么来处理事务？**MVCC（多版本并发控制）或行级锁定**。？
如果两者都有，我们怎么能从一个转移到另一个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T13:39:17.940

这不依赖于 MySQL 本身，而是依赖于使用的**引擎**，例如 InnoDB 或 MyIsam。

* * *

*在**InnoDB**事务模型中，目标是将多版本数据库的最佳属性与传统的两阶段锁定相结合。**InnoDB 在行级别上进行锁定**，默认情况下以非锁定一致性读取的形式运行查询，采用 Oracle 的风格。InnoDB 中的锁表的存储空间效率很高，因此不需要锁升级：通常，允许多个用户锁定 InnoDB 表中的每一行，或行的任何随机子集，而不会导致 InnoDB 内存耗尽。*

（来源：[http](http://dev.mysql.com/doc/refman/5.0/en/innodb-transaction-model.html) ://dev.mysql.com/doc/refman/5.0/en/innodb-transaction-model.html ）

* * *

MySQL**对 MyISAM、MEMORY 和 MERGE 表使用表级锁定，**一次只允许一个会话更新这些表，使它们更适合只读、多读或单用户应用程序。

（来源：[http](http://dev.mysql.com/doc/refman/5.1/en/internal-locking.html) ://dev.mysql.com/doc/refman/5.1/en/internal-locking.html ）

# pascal - 大模算法

> ID：15175096
> 
> 赞同：1
> 
> 时间：2013-03-02T13:38:44.453
> 
> 标签：pascal, divide-and-conquer

我正在尝试为我学校编程团队的在线评委制作一个 Pascal 程序。程序必须输出 a^b mod c，其中 a、b 和 c 作为输入给出。您不能使用蛮力，因为测试用例都有非常大的数字。

经过一番研究，事实证明我可以使用分而治之的策略。这是我想出的代码：

```
function pmod(a,b,c:longint):integer;
begin
     if b = 0 then
        pmod := 1;
     if b = 1 then
        pmod := a mod c;
     if b > 1 then
     begin
          if (b mod 2) = 0 then
             pmod := (pmod(a,b div 2,c) * pmod(a,b div 2,c)) mod c
          else
              pmod := (pmod(a,b-1,c) * (a mod c)) mod c;
     end;
end; 
```

但是，在线法官返回了错误的答案。有人能指出代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:23:29.403

您的算法基本上是合理的，应该可以工作。您的代码中肯定有一些小事情可以改进，但我不会称之为“错误”。让我们看看一些可能的问题。

1.  递归。它的优点是保持算法简单且相当容易阅读。然而，这是一种非常缓慢且低效的方法。由于相同的基本算法可以相当容易地进行迭代，因此法官可能已将您标记为低级。

2.  更好地处理无效输入是个好主意。如果有人为“b”输入负整数，则不会为 pmod 分配返回值。由于模数总是返回一个肯定的结果，我们可以制定一个约定，例如如果 b<0，则返回“-1”作为错误标志。

3.  注意 pmod 返回整数，但是模的最大值是 c-1，也就是 longint。所以使用的类型的大小不一定兼容，除非你做一些范围检查。但是，如果您使用两倍于 c 和 pmod 宽度的整数类型用于中间计算，则可以保证中间计算不会溢出。

我不确定您使用的是什么帕斯卡编译器。在较旧的（DOS）版本中，我认为整数是 16 位，而 longint 是 32 位。在 Delphi 中，整数和 longint 都是 32 位的，而 int64 是 64 位的。因此，根据编译器的不同，您可以为 a、b 和中间体设置 longint，为 c 和 pmod 设置整数（或者在较新的帕斯卡版本的情况下，a、b 和中间体的 int64 以及 c 和 pmod 的整数。

这是这些小改进的示例。

```
function pmod(a,b: int64; c:integer):integer;
var tmp: int64;
 begin
   if b < 0 then pmod := -1; {flag an error}
   if b = 0 then pmod := 1;
   if b = 1 then pmod := a mod c;
   if b > 1 then
    begin
      if (b mod 2) = 0 then
         begin
           tmp  :=pmod(a,b div 2,c) * pmod(a,b div 2,c);
           pmod := tmp mod c
         end
      else
         begin
           tmp  := pmod(a,b-1,c) * (a mod c);
           pmod := tmp mod c
         end
    end;
 end; 
```

# c# - 在新标签中显示图像

> ID：15175098
> 
> 赞同：-2
> 
> 时间：2013-03-02T13:38:50.673
> 
> 标签：c#, asp.net

我将数据列表上的图像缩略图显示为： ![在此处输入图像描述](../Images/b37ebfee14fde0fef8f88fa905a23370.png)

```
<asp:DataList ID="dtlistImages" runat="server" RepeatColumns="5" RepeatDirection="Horizontal"
                        BorderColor="#336699" BorderStyle="Solid" BorderWidth="2px">
            <ItemTemplate>
            <%--<img id="imgImageHtml" height="83px" width="150px" src="<%Eval("img_tb") %>" alt="Image not displyed" runat="server" />--%>
            <a href="" target="_blank">
                 <asp:Image ID="imgnewspaper" style="float:right; margin:5px; margin-left:10px; border:2px solid #BAB9BE;" Width="90px" Height="95px" runat="server" OnClick="MyPicture_Click"  AlternateText='<%# Eval("newspaperName") %>' ImageUrl='<%# Eval("img_tb") %>' Autopostback="true" />                 
                 </a>
                 </br>
                 <asp:Label ID="lblID" runat="server" Text='<%# Eval("pageNumber") %>' Font-Bold="true"
                            Font-Size="10pt" ForeColor="#336699" Width="100%"/>                            
                 </ItemTemplate>
                 <ItemStyle HorizontalAlign="Center" VerticalAlign="Top" />    
    </asp:DataList> 
```

现在我想在新标签上显示缩略图大图像。我能怎么做？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T13:44:52.083

我不知道你想做什么，你在用什么，你说的*新标签*是什么意思（新的网络浏览器标签？）

可能只是：

```
<a href="yourImg.jpg" target="_blank"> 
    <img src='yourImgSmall.jpg' alt='some thumbnail' />
</a> 
```

?

**编辑 ：**

在 RAZOR 中，您可以执行以下操作：

```
foreach (var i in Directory.GetFiles(galleryPath).Select(Path.GetFileName)){

 <a href="/Content/images/@i" target="_blank"> 
   <img src='/Content/images/thumbnail/@i' alt='some thumbnail' />
 </a>

} 
```

当然假设缩略图与完整图像具有相同的名称。

# php - 根据从数据库中提取的数据的前三个字母排序？

> ID：15175099
> 
> 赞同：-1
> 
> 时间：2013-03-02T13:38:54.153
> 
> 标签：php, database

如何根据前三个或五个或其他字母对从数据库中提取的数据进行排序？

```
$query = "SELECT * FROM macyayin ORDER BY channel, country"; 
```

例如对于这个例子。我想根据频道的三个字母排序..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:48:24.760

```
$query = "SELECT left(channel,3) as ch,channel,country FROM macyayin ORDER BY ch"; 
```

# java - 如何检查 ACTION_CALL 活动是否建立了连接？

> ID：15175106
> 
> 赞同：1
> 
> 时间：2013-03-02T13:39:52.777
> 
> 标签：java, android, android-intent, call

`ACTION_CALL`返回结果时如何检查是否建立了连接？我想排除用户取消通话的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-04T09:35:28.323

据我所知，你不能。你唯一能知道的就是通话的状态，比如我们`CALL_STATE_IDLE, CALL_STATE_OFFHOOK, CALL_STATE_RINGING`

您正在寻找的是超出 android 功能，至少具有当前权限。

# java - 为什么我们必须重写 Java 中的 equals() 方法？

> ID：15175109
> 
> 赞同：19
> 
> 时间：2013-03-02T13:40:13.900
> 
> 标签：java, overriding, equals

我对我们重写该`.equals`方法的原因有些困惑。

例如：

```
Test test1 = new Test(3);
Test test2 = new Test(3);

//The if comparison does the same thing that the overridden `.equals()` method does.
if(test1.equals(test2)){
    System.out.println("test1 and test2 are true in .equals()");
}

// Override .equals method.
public boolean equals(Object object) {
    if(object instanceof Test && ((Test)object).getValue() == this.t) {
        return true;
    } else {
        return false;
    }
} 
```

我不明白为什么我们必须重写该`.equals()`方法。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-02T13:53:25.337

从文章[*Override equals and hashCode in Java*](http://javarevisited.blogspot.in/2011/02/how-to-write-equals-method-in-java.html)：

> **java.lang.Object 提供的equals() 类的**默认实现****比较内存位置，并且仅**当两个引用变量指向相同的内存位置时才返回true，即本质上它们是相同的对象。**
> 
>  ****如果要通过逻辑方式或某些业务逻辑定义**相等， Java 建议**覆盖 equals**和 hashCode 方法：例如：
> 
>  **Java 标准库中的许多类确实覆盖了它，例如 String 覆盖了 equals，如果两个 String 对象的内容完全相同，其 equals() 方法的实现返回 true
> 
> 整数包装类覆盖等于执行数值比较等。****

 ***** * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-02T13:49:52.577

这应该足以回答您的问题： [http ://docs.oracle.com/javase/tutorial/java/IandI/objectclass.html](http://docs.oracle.com/javase/tutorial/java/IandI/objectclass.html)

> 该`equals()`方法比较两个对象是否相等，`true`如果相等则返回。类中提供的`equals()`方法`Object`使用标识运算符 ( `==`) 来确定两个对象是否相等。对于原始数据类型，这会给出正确的结果。然而，对于对象，它不是。提供的`equals()`方法`Object`测试对象*引用*是否相等，即比较的对象是否是完全相同的对象。
> 
> 要测试两个对象在等价意义上是否*相等*（包含相同的信息），您必须重写该`equals()`方法。

（部分引用 - 单击以阅读示例。）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-09-26T07:43:04.807

**.equals()**不会对大多数类执行智能比较，除非类覆盖它。如果它没有为（用户）类定义，它的行为与 == 相同。

参考： http: ~~[//www.leepoint.net/notes-java/data/expressions/22compareobjects.html](http://www.leepoint.net/notes-java/data/expressions/22compareobjects.html)~~ [http://www.leepoint.net/data/expressions/22compareobjects.html](http://www.leepoint.net/data/expressions/22compareobjects.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-02T15:07:04.087

java.lang.Object 的默认行为是比较引用，但这并不适用于每种对象。有些东西称为[值对象](http://martinfowler.com/bliki/ValueObject.html)（如 BigDecimal 或 String），其中具有相同值的对象被认为是可互换的，因此不希望使用 equals 的默认行为。这些类型的对象必须根据对象所取的值来实现 equals 和 hashcode。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-07-24T01:43:30.367

默认情况下 .equals() 使用 == 标识函数来比较哪个显然不起作用，因为实例 test1 和 test2 不一样。== 仅适用于原始数据类型，如 int 或 string。所以你需要通过比较Test类的所有成员变量来覆盖它以使其工作

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-02T13:53:11.750

要回答您的问题，首先我强烈建议您查看[文档](http://docs.oracle.com/javase/tutorial/java/IandI/objectclass.html)。

在不覆盖 equals() 方法的情况下，它的行为类似于“==”。当您在对象上使用“==”运算符时，它只是检查这些指针是否指向同一个对象。如果它们的成员包含相同的值，则不会。

我们重写以保持我们的代码干净，并将比较逻辑从 If 语句抽象到对象中。这被认为是一种很好的做法，并利用了 Java 的大量面向对象的方法。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-06-02T20:56:11.207

让我举一个我觉得很有帮助的例子。

您可以将参考视为一本书的页码。假设现在您有两个页面 a 和 b，如下所示。

> BookPage a = getSecondPage();
> 
> BookPage b = getThirdPage();

在这种情况下， a == b 会给你错误。但为什么？原因是 == 所做的就像比较页码一样。因此，即使这两个页面上的内容完全相同，您仍然会得到错误。

但是，如果您要比较内容，该怎么办？

答案是编写您自己的 equals 方法并指定您真正想要比较的内容。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-01-12T15:34:55.040

Object.equals() 方法只检查对象的引用，而不是原始数据类型或对象值（原始数据的包装类对象，简单的原始数据类型（字节、短、整数、长等））。因此，当我们基于原始数据类型比较对象时，我们必须重写 equals() 方法。****

# xcode - Dropbox OS X 框架的库未加载错误

> ID：15175115
> 
> 赞同：3
> 
> 时间：2013-03-02T13:40:49.663
> 
> 标签：xcode, sdk, path, dropbox

我已经从这个页面下载了 OS X Dropbox SDK [https://www.dropbox.com/developers/core/sdk](https://www.dropbox.com/developers/core/sdk)

并使用此 iOS 指令将其添加到我的项目中（[https://www.dropbox.com/developers/core/setup#ios](https://www.dropbox.com/developers/core/setup#ios)）：

```
...
2\. Navigate to where you uncompressed the SDK and drag the DropboxSDK.framework folder into your project in Xcode
3\. Make sure Copy items into destination group's folder is selected 
... 
```

当我运行我的应用程序时，我收到此错误：

> dyld：库未加载：@executable_path/../Frameworks/DropboxOSX.framework/Versions/A/DropboxOSX 引用自：/Users/ksoftware/Library/Developer/Xcode/DerivedData/Designer_Snapper-btgmsuibcccggidhnbajjezvhhhn/Build/Products/Debug/Designer Snapper.app/Contents/MacOS/Designer Snapper 原因：找不到图像

SDK 中包含的 DBRoletteOSX 应用程序运行良好。

为什么我会出现此错误，如何解决？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T09:38:54.027

问题是下载提供的文档是错误的。在声明添加新的构建阶段以将文件复制到资源的步骤中，您需要将其复制到框架。

如果您转到您的应用程序目标，请选择该部分应显示的`Build Phases`选项卡作为内容。`Copy Files``Destination --> Frameworks``DropboxOSX.framework`

完成此操作后，这次`Project --> Clean`再次构建它应该可以正常工作。

# java - 如何使用有效的方式创建一个 java 类来处理字符串

> ID：15175116
> 
> 赞同：-2
> 
> 时间：2013-03-02T13:40:59.380
> 
> 标签：java

一个名为 dna 的 java 类有 3 个变量：

*   存储序列的字符串
*   用于存储字符串中无效字符数的 int
*   用于存储字符串中有效字符数的 int。

一个以 dna 序列 (acgt) 作为参数的构造函数字符串。如何检查参数并计算有多少字符无效以及有多少字符有效并将计数存储在适当的变量中。**我不能在这里使用正则表达式**，所以我迷路了。如何在此处使用 String 的**charAt**方法和**if**语句。

请帮忙....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T13:46:51.080

使用 foreach 循环遍历每个值。如果给定的字符与 a OR c OR g OR T 都不匹配（我在那里给你线索），那么你可以增加相应的变量。如果没有 Regex，这是最有效的方法，因为您必须检查序列中的每个字母，才能确定您的值准确地反映了 DNA 字符串。

```
for(char c : dna)
{
    if(c == ..) // Compare against preset values.
    {
        // Update valid count.
    }
    else
    {
        // Update invalid count.
    }
} 
```

这和我一样慷慨，因为你需要自己开发这些基本概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:57:46.350

这是执行此操作的众多方法之一：

在你的课堂上保持一个常数

```
private static final String bases = "atcg"; 
```

以及这些其他字段来存储值

```
String dna;
Integer numValid;
Integer numInvalid; 
```

并在构造函数中像这样使用它们

```
public DNA(String dna) {
    this.dna = dna;
    for (char c : dna.toCharArray()) {
        if (bases.indexOf(c) < 0) {
            numInvalid++;
        } else {
            numValid++;
        }
    }
} 
```

使用这种实现获得的好处是，即使有效字符列表发生变化，您也无需修改`if`条件，如果列表变化很大，这可能看起来很糟糕。

# css - css 选择器预嵌套列表项

> ID：15175121
> 
> 赞同：0
> 
> 时间：2013-03-02T13:41:33.367
> 
> 标签：css, css-selectors

```
 <ul class="someclass">
        <li>
            <a>something arbitrary here</a><!--this is what I am trying to capture-->
            <ul>
                <li><a>list elemnts here</a></li>
                <li><a>list elemnts here</a></li>
                <li><a>list elemnts here</a></li>
                <li><a>list elemnts here</a></li>
           </ul>
       </li>
       <li>
           <a>something arbitrary here</a><!--this is what I am trying to capture-->
           <ul>
                <li><a>list elemnts here</a></li>
                <li><a>list elemnts here</a></li>
                <li><a>list elemnts here</a></li>
                <li><a>list elemnts here</a></li>
          </ul>
       </li>
  </ul> 
```

我正在尝试使用 CSS 来“提取”标记的第一个列表项。我应该使用哪些 CSS 选择器？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:43:45.873

用于`>`选择直接子元素：http: [//jsfiddle.net/v25s5/](http://jsfiddle.net/v25s5/)

```
.someclass > li > a {
    color: red;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-12T04:03:45.930

点击此链接了解有关 CSS 选择器的更多信息： [https ://code.tutsplus.com/tutorials/the-30-css-selectors-you-must-memorize--net-16048](https://code.tutsplus.com/tutorials/the-30-css-selectors-you-must-memorize--net-16048)

"8\. X > Y

```
div#container > ul {

border: 1px solid black;

} 
```

标准 XY 和 X > Y 的区别在于后者只会选择直接子代。例如，考虑以下标记。

```
<div id="container">
   <ul>
      <li> List Item
        <ul>
           <li> Child </li>
        </ul>
      </li>
      <li> List Item </li>
      <li> List Item </li>
      <li> List Item </li>
   </ul>
</div> 
```

#container > ul 的选择器将仅定位 ul，它们是 id 为容器的 div 的直接子级。例如，它不会针对作为第一个 li 的孩子的 ul。

出于这个原因，使用子组合器有性能优势。事实上，特别推荐在使用基于 JavaScript 的 CSS 选择器引擎时。”

# actionscript-3 - 外部 swf 中的 stage.scaleMode 导致 TypeError：错误 #1009

> ID：15175125
> 
> 赞同：-1
> 
> 时间：2013-03-02T13:42:14.303
> 
> 标签：actionscript-3

当我尝试使用此代码将外部 swf 加载到主文件中时

```
var imageLoader:Loader = new Loader(); 
var url:URLRequest = new URLRequest("Content.swf");
imageLoader.load(url);

imageLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, imageLoaded);
function imageLoaded(e:Event):void {
image.addChild(imageLoader);
} 
```

如果外部 swf 有这个代码，

```
 stage.scaleMode = StageScaleMode.NO_SCALE; 
```

然后我收到此错误：TypeError：错误＃1009：无法访问空对象引用的属性或方法。但是，如果 swf 中有 TLF 文本（或者至少只是一个没有字符的 TLF 文本字段），那么一切都很好。对于经典文本，错误仍然存​​在。为什么外部 swf 中存在 TLF 文本可以解决问题？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:57:38.207

`Event.ADDED_TO_STAGE`在您的外部 swf 中使用以确保该阶段是可访问的：

```
public function astest1()
{
    if(stage)
        init();
    else
        addEventListener(Event.ADDED_TO_STAGE, init);
}

protected function init(event:Event = null):void
{
    if(event)
        EventDispatcher(event.target).removeEventListener(event.type, arguments.callee);

    trace("stage = ", stage);
} 
```

至于 TLF 已经解决了这个问题，我猜可能是 RSL 的影响，flash 很可能会加载 tlf 运行时库，因此它会延迟调用你的 swf 的 costructor，所以主 swf 添加了带有外部 swf 的加载器（并使可`stage`访问到外部 swf），但肯定不稳定）在这两种情况下，我建议您`Event.ADDED_TO_STAGE`在舞台使用之前收听事件。

# android - 选择一个日期并在同一个按钮中显示，日期选择器 android

> ID：15175127
> 
> 赞同：0
> 
> 时间：2013-03-02T13:42:25.890
> 
> 标签：android, android-datepicker

我有一个用户必须输入出生日期的表格，有一个选择日期的按钮，当用户单击设置时，按钮将显示用户的结果，但我只有一个日期而不是时间，

```
private SQLiteDatabase database;
private DBHelper helper;
Button btnSave, btnDOB;
EditText addNama, addAddress, addBloodType, addHeight, addDrName, addDrContact,
         addGuardianName1, addGuardianContact1, addGuardianName2, 
         addGuardianContact2, addHospitalName, addHospitalContact;

DateFormat fmtDOBDate = DateFormat.getDateTimeInstance();
TextView lblDOBDate;
Calendar myDOBCalendar = Calendar.getInstance();

DatePickerDialog.OnDateSetListener d = new DatePickerDialog.OnDateSetListener() {
public void onDateSet(DatePicker view, int year, int monthOfYear,
        int dayOfMonth) {
myDOBCalendar.set(Calendar.YEAR, year);
myDOBCalendar.set(Calendar.MONTH, monthOfYear);
myDOBCalendar.set(Calendar.DAY_OF_MONTH, dayOfMonth);
updateLabelDOBDate();
}
};

private void updateLabelDOBDate() {
    lblDOBDate.setText(fmtDOBDate.format(myDOBCalendar.getTime()));
}

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.profile_add);

    btnSave = (Button)findViewById(R.id.btnSave);
    btnDOB = (Button)findViewById(R.id.dobbtn);
    addNama = (EditText)findViewById(R.id.editText1);
    addAddress = (EditText)findViewById(R.id.editText4);
    addBloodType = (EditText)findViewById(R.id.editText5);
    addHeight = (EditText)findViewById(R.id.editText6);
    addDrName = (EditText)findViewById(R.id.editText7);
    addDrContact = (EditText)findViewById(R.id.editText8);
    addGuardianName1 = (EditText)findViewById(R.id.editText9);
    addGuardianContact1 = (EditText)findViewById(R.id.editText10);
    addGuardianName2 = (EditText)findViewById(R.id.EditText01);
    addGuardianContact2 = (EditText)findViewById(R.id.EditText02);
    addHospitalName = (EditText)findViewById(R.id.editText11);
    addHospitalContact = (EditText)findViewById(R.id.editText12);

    helper = new DBHelper(this);
    database = helper.getWritableDatabase();

    btnSave.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            String name = addNama.getText().toString();
            String dob = btnDOB.getText().toString();
            String address = addAddress.getText().toString();
            String bloodtype = addBloodType.getText().toString();
            String height = addHeight.getText().toString();
            String drname = addDrName.getText().toString();
            String drcontact = addDrContact.getText().toString();
            String guardianname1 = addGuardianName1.getText().toString();
            String guardiancontact1 = addGuardianContact1.getText().toString();
            String guardianname2 = addGuardianName2.getText().toString();
            String guardiancontact2 = addGuardianContact2.getText().toString();
            String hospitalname = addHospitalName.getText().toString();
            String hospitalcontact = addHospitalContact.getText().toString();

            helper.insertDataProfile(database, name, dob, address, bloodtype, height, 
                    drname, drcontact, guardianname1, guardiancontact1,
                    guardianname2, guardiancontact2, hospitalname,
                    hospitalcontact);
            Toast.makeText(ProfileAdd.this, "Successfully Add", Toast.LENGTH_SHORT).show();

            Intent i = new Intent(ProfileAdd.this, ProfileMain.class);
            startActivity(i);

        }
    });

    lblDOBDate = (TextView) findViewById(R.id.dobbtn);
    Button btnStartDate = (Button) findViewById(R.id.dobbtn);
    btnStartDate.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            new DatePickerDialog(ProfileAdd.this, d, myDOBCalendar
                    .get(Calendar.YEAR), myDOBCalendar.get(Calendar.MONTH),
                    myDOBCalendar.get(Calendar.DAY_OF_MONTH)).show();
        }
    });

    updateLabelDOBDate();
}

public void onClickCancel(View v){
    startActivity (new Intent(getApplicationContext(), ProfileMain.class));
} 
```

当我只想显示时间时也是如此..请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:58:22.993

你需要实现如下：

```
private DatePickerDialog.OnDateSetListener datePickerListener = new DatePickerDialog.OnDateSetListener() {

            // when dialog box is closed, below method will be called.
            public void onDateSet(DatePicker view, int selectedYear,
                    int selectedMonth, int selectedDay) {
                int year = selectedYear;
                int month = selectedMonth;
                int day = selectedDay;

                your_button.setText(new StringBuilder().append(year).append("-")
                        .append(month + 1).append("-").append(day).append(" "));

            }
        }; 
```

像这样创建一个新的 DatePicker Dialog 对象：

```
Calendar cal=Calendar.getInstance();

        year=cal.get(Calendar.YEAR);
        month=cal.get(Calendar.MONTH);
        day=cal.get(Calendar.DATE);

 new DatePickerDialog(this, datePickerListener, year, month,day);  //Call this on button click 
```

# c#-4.0 - 在 Crystal Reports 中添加不同部分以获取详细信息

> ID：15175128
> 
> 赞同：0
> 
> 时间：2013-03-02T13:42:32.183
> 
> 标签：c#-4.0, crystal-reports-2010, sections

我知道如何添加部分、组等，但我只是想展示如下内容：

```
************************************Section1**************************************
Name:--------    LastName:---------------    Address:---------------------------
Phone:-------    Mobile:-----------------    Email:-----------------------------

************************************Section 2*************************************
Amount:--------------------------   Salary:----------------------- Slips:--------------
CarLoan:---------------- Associated Bank:----------------------------------------------

********************************Section 3*******************************************
CompanyName:------------------------ Address:--------------------------- Phone:--------
Correpondence:----------------------------------------  MailBox No:-------------------- 
```

如何实现这一点，部分大约有 10 个，我想在同一页面上显示它们，如果用户点击一个部分，那么它可以详细打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T11:18:16.393

好吧，我找到了一种方法，我添加了子报告，这对每个部分都很方便。

# android - Eclipse上导入的项目有错误

> ID：15175129
> 
> 赞同：0
> 
> 时间：2013-03-02T13:42:35.693
> 
> 标签：android, eclipse, adt

我最近更新了我的 ADT，现在 Eclipse 上的每个导入项目都需要导入语句。这是 的屏幕截图`OpenCV lib`。

[http://s21.postimage.org/l5ou8koif/srcshot.png](http://s21.postimage.org/l5ou8koif/srcshot.png)

**[编辑]** 我已经重新启动了 Eclipse、计算机和所有其他琐碎的解决方案，包括“修复项目属性”，到目前为止没有任何工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T08:50:29.233

我刚刚下载了 OpenCV 2.4.4，导入的库现在似乎工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:36:57.240

右键单击项目，然后Android工具->修复项目属性，然后项目->清理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T14:56:18.740

请参考本网站供您参考。我认为您错过了设置构建命令（[http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/O4A_SDK.html](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/O4A_SDK.html)）

# yii - 在 Yii 中使用数组为 post cDataProvider 设置 ID

> ID：15175130
> 
> 赞同：0
> 
> 时间：2013-03-02T13:42:39.310
> 
> 标签：yii

我必须表没有关系：

最喜欢的：

*   ID
*   用户身份
*   content_id

帖子：

*   ID
*   标题
*   内容

我将找到 user_id = 4 的所有 fav，并在 CDataProvider 中设置找到的 favs 数组，以查找所有在顶部数组中存在的 id 帖子。

我如何在 yii 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:02:18.160

```
$sql = "SELECT content_id FROM favs WHERE user_id = 4";  
$favs = Yii::app()->db->createCommand($sql)->queryAll();  
$criteria = new CDbCriteria();
$criteria->addInCondition('id', $favs);  
$posts = Post::model()->findAll($criteria); 
```

# html - 垂直居中跨度

> ID：15175132
> 
> 赞同：1
> 
> 时间：2013-03-02T13:42:50.417
> 
> 标签：html, css

所以我有这三栏内容。我在布局中使用 The [1140 Grid](http://cssgrid.net)。

这就是它通常（并且应该）的样子：

![http://imgur.com/KQfPr89](../Images/6c553c4b142ef4fdf1e0d88e4a5b1795.png)

但是当标题变成多行时，它是这样的：

![http://imgur.com/N8s96jA](../Images/81508b85bee0e645c0d8da7e99860cf8.png)

这是该位的 HTML 代码：

```
<div id="sub-hero" class="container">
    <div class="row">
        <div class="post fourcol">
            <a href="">
                <div class="thumb"><img src="http://lorempixel.com/380/160" alt="Placeholder"></div>
                <div class="meta">
                <span>
                    <h2>Making Sense Of This</h2>
                    <em class="byline">By Name Author</em>
                </span>
                </div>  
            </a>
        </div>
        <div class="post fourcol">
            <a href="">
                <div class="thumb"><img src="http://lorempixel.com/380/160" alt="Placeholder"></div>
                <div class="meta">
                <span>
                    <h2>How To Not Train A Megatron-sized Dragon</h2>
                    <em class="byline">By Name Author</em>
                </span>
                </div>          
            </a>

        </div>
        <div class="post fourcol last">
            <a href="">
                <div class="thumb"><img src="http://lorempixel.com/380/160" alt="Placeholder"></div>
                <div class="meta">
                <span>
                    <h2>Sample Post With A Super Long Headline</h2>
                    <em class="byline">By Name Author</em>
                </span>
                </div>              
            </a>
        </div>
    </div>
</div> 
```

这是相应的CSS代码：

```
.container#sub-hero .post .meta span { 
    display: inline-block; 
    margin-top: 0.5em; 
    vertical-align: middle; 
}

.container#sub-hero .post .meta { 
    color: #fff; 
    padding: 0.7em 1em 1em 1em; 
    position: absolute; 
    bottom: 0; 
    width: 100%; 
    z-index: 2; 
} 
```

有什么修复吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T15:12:52.500

好的，想通了，也感谢欧米茄的帮助。

这是我添加到代码中的内容：

```
.container#sub-hero .post .meta { 
    white-space:nowrap; /*expands the whole thing*/
    width: 100%; 
}

.container#sub-hero .post .meta span { width: inherit; } /*adjusts the byline, at least, to fit inside the box width and not overflow*/
.container#sub-hero .post .meta h2 { white-space:normal; } /*to reset the h2 to its normal fling*/ 
```

谢谢你的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T04:59:11.757

您应该设置`display: table-cell; text-align: center;`to`.row`和`display: block;`to`.meta`以及 to `span`element 并且不要忘记定义`display: block;`to `<a>`element。如果这不起作用，请添加您的完整 CSS 或像**[这样](http://jsfiddle.net/Y7PhV/101/)**添加小提琴。将您的 css 标签保留在那里并更新和分享。

# android - Android 闪屏崩溃（简单/菜鸟问题）

> ID：15175134
> 
> 赞同：0
> 
> 时间：2013-03-02T13:42:55.537
> 
> 标签：android, eclipse, android-intent, android-activity

我刚刚在我的应用程序中添加了一个启动画面（之前运行良好），我想知道这里是否有人足够聪明，可以发现我遇到的问题的根源。应用程序启动，启动屏幕显示，然后当它加载主布局（AppActivity.java / main.xml）时，应用程序强制关闭。: (

```
package com.mkyong.android;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;

public class SplashScreen extends Activity {

private static final int SPLASH_TIME = 3 * 1000;// 3 seconds

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splashscreen);

    new Handler().postDelayed(new Runnable() {

        @Override
        public void run() {

            Intent intent = new Intent(SplashScreen.this,
                    AppActivity.class);
            startActivity(intent);

            SplashScreen.this.finish();

            overridePendingTransition(R.anim.appear, R.anim.disappear);

        }
    }, SPLASH_TIME);

    new Handler().postDelayed(new Runnable() {
          @Override
          public void run() {
                 } 
            }, SPLASH_TIME);

}

@Override
public void onBackPressed() {
    this.finish();
    super.onBackPressed();
}
} 
```

日志猫：

```
03-02 13:32:41.936: E/Trace(2065): error opening trace file: No such file or directory (2)
03-02 13:32:42.116: D/dalvikvm(2065): GC_FOR_ALLOC freed 61K, 8% free 2404K/2608K, paused 51ms, total 54ms
03-02 13:32:42.166: I/dalvikvm-heap(2065): Grow heap (frag case) to 6.000MB for 3686416-byte allocation
03-02 13:32:42.316: D/dalvikvm(2065): GC_FOR_ALLOC freed <1K, 4% free 6003K/6212K, paused 144ms, total 144ms
03-02 13:32:42.477: D/dalvikvm(2065): GC_CONCURRENT freed <1K, 4% free 6003K/6212K, paused 8ms+6ms, total 167ms
03-02 13:32:43.216: I/Choreographer(2065): Skipped 30 frames!  The application may be doing too much work on its main thread.
03-02 13:32:43.246: D/gralloc_goldfish(2065): Emulator without GPU emulation detected.
03-02 13:32:46.046: D/AndroidRuntime(2065): Shutting down VM
03-02 13:32:46.046: W/dalvikvm(2065): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
03-02 13:32:46.086: E/AndroidRuntime(2065): FATAL EXCEPTION: main
03-02 13:32:46.086: E/AndroidRuntime(2065): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.mkyong.android/com.mkyong.android.AppActivity}; have you declared this activity in your AndroidManifest.xml?
03-02 13:32:46.086: E/AndroidRuntime(2065): at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1618)
03-02 13:32:46.086: E/AndroidRuntime(2065): at android.app.Instrumentation.execStartActivity(Instrumentation.java:1417)
03-02 13:32:46.086: E/AndroidRuntime(2065): at android.app.Activity.startActivityForResult(Activity.java:3370)
03-02 13:32:46.086: E/AndroidRuntime(2065): at android.app.Activity.startActivityForResult(Activity.java:3331)
03-02 13:32:46.086: E/AndroidRuntime(2065): at android.app.Activity.startActivity(Activity.java:3566)
03-02 13:32:46.086: E/AndroidRuntime(2065): at android.app.Activity.startActivity(Activity.java:3534)
03-02 13:32:46.086: E/AndroidRuntime(2065): at com.mkyong.android.SplashScreen$1.run(SplashScreen.java:24)
03-02 13:32:46.086: E/AndroidRuntime(2065): at android.os.Handler.handleCallback(Handler.java:725)
03-02 13:32:46.086: E/AndroidRuntime(2065): at android.os.Handler.dispatchMessage(Handler.java:92)
03-02 13:32:46.086: E/AndroidRuntime(2065): at android.os.Looper.loop(Looper.java:137)
03-02 13:32:46.086: E/AndroidRuntime(2065): at android.app.ActivityThread.main(ActivityThread.java:5041)
03-02 13:32:46.086: E/AndroidRuntime(2065): at java.lang.reflect.Method.invokeNative(Native Method)
03-02 13:32:46.086: E/AndroidRuntime(2065): at java.lang.reflect.Method.invoke(Method.java:511)
03-02 13:32:46.086: E/AndroidRuntime(2065): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-02 13:32:46.086: E/AndroidRuntime(2065): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-02 13:32:46.086: E/AndroidRuntime(2065): at dalvik.system.NativeStart.main(Native Method)
03-02 13:32:50.336: I/Process(2065): Sending signal. PID: 2065 SIG: 9 
```

显现：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mkyong.android"
    android:versionCode="1"
    android:versionName="1.0" >
<uses-sdk android:minSdkVersion="10" />

<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".SplashScreen"
            android:theme="@android:style/Theme.Black.NoTitleBar" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
     <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity android:name=".main2"></activity>
        <activity android:name=".home"></activity>
        <activity android:name=".App2Activity"></activity>
        <activity
            android:label="@string/app_name"
            android:name=".AppActivity" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>      
</application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T13:45:58.490

```
 Unable to find explicit activity class {com.mkyong.android/com.mkyong.android.AppActivity}; have you declared this activity in your AndroidManifest.xml? 
```

你是否？

将您的清单更改为：

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mkyong.android"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".SplashScreen"
            android:theme="@android:style/Theme.Black.NoTitleBar" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".main2" >
        </activity>
        <activity android:name=".home" >
        </activity>
        <activity android:name=".App2Activity" >
        </activity>
        <activity
            android:name=".AppActivity"
            android:label="@string/app_name" >

            <!-- <intent-filter> -->
            <!-- <action android:name="android.intent.action.MAIN" /> -->

            <!-- <category android:name="android.intent.category.LAUNCHER" /> -->
            <!-- </intent-filter> -->
        </activity>
    </application>

</manifest> 
```

你真的需要 2 个启动器吗？我评论了一个。（还要感谢@Raghav，没有注意到 2 个`<application>`标签）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:51:23.780

从文本本身来看，例外情况太明显了..

```
 have you declared this activity in your AndroidManifest.xml? 
```

请在您的清单文件中声明 AppActivity。并且只使用一个 Application 标签。

```
One android application holds only one Application tag 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T13:51:31.470

就像 Raghav Sood 评论和 Karan_Rana 回答一样。
Android 无法打开 Appactivity.class，因为 Android 不知道它的存在。
所以你需要在 Manifest 中声明它。所以Android知道它的存在以及它存在的位置。

```
 <activity android:name="com.mkyong.android/com.mkyong.android.AppActivity"></activity> 
```

如果您将其添加到应用程序标记中的清单中，它应该可以工作。或者你会因为另一个问题而得到另一个错误；）

# python - 构建 scipy 错误 cythonize 失败

> ID：15175135
> 
> 赞同：39
> 
> 时间：2013-03-02T13:43:22.643
> 
> 标签：python, scipy, cython

我正在尝试构建 scipy，但出现 RuntimeError：

```
$sudo python setup.py build
Processing scipy/cluster/_vq_rewrite.pyx
Traceback (most recent call last):
  File "tools/cythonize.py", line 172, in <module>
    main()
  File "tools/cythonize.py", line 168, in main
    find_process_files(root_dir)
  File "tools/cythonize.py", line 160, in find_process_files
    process(cur_dir, fromfile, tofile, function, hash_db)
  File "tools/cythonize.py", line 137, in process
    processor_function(fromfile, tofile)
  File "tools/cythonize.py", line 66, in process_pyx
    raise OSError('Cython needs to be installed')
OSError: Cython needs to be installed

Traceback (most recent call last):
  File "setup.py", line 209, in <module>
    setup_package()
  File "setup.py", line 202, in setup_package
    generate_cython()
  File "setup.py", line 147, in generate_cython
    raise RuntimeError("Running cythonize failed!")
RuntimeError: Running cythonize failed! 
```

有什么方法可以提供 cython 来纠正这个错误？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-03-02T16:03:11.273

Python setuptools 解决了这个问题。

[http://docs.cython.org/src/quickstart/install.html](http://docs.cython.org/src/quickstart/install.html)
`easy_install cython`或`pip install cython`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-24T14:21:58.760

如果您没有安装 Cython，请使用：`pip install Cython`. 但是，如果您确实像我一样安装了旧版本的 Cython，那么这就是为我解决的问题：`pip install --upgrade Cython`

# python - 使用小数模块不能超过 27 位小数

> ID：15175137
> 
> 赞同：1
> 
> 时间：2013-03-02T13:43:34.273
> 
> 标签：python, decimal, digit

谁能告诉我为什么超过 27 位小数会导致 TypeError？我查看了官方文档，但没有看到答案。错误消息提到浮动，但我在代码中看不到任何浮动。我特别摆脱了所有的花车。

```
Evaluate number e to n significant digits (up to 27): 28
Traceback (most recent call last):
  File "ex6.py", line 20, in <module>
    while (deci.Decimal(1) / deci.Decimal((math.factorial(step)))) >     deci.Decimal(eval(sigdig2)):
  File "<string>", line 1, in <module>
TypeError: unsupported operand type(s) for /: 'Decimal' and 'float' 
```

>

```
# imports necessary modules

import math
import decimal as deci

# defines variables

eul = 0
step = 0

# queries for input

sigdig = int(raw_input("Evaluate number e to n significant digits (up to 27): "))
sigdig2 = 'deci.Decimal(1)/' + str(deci.Decimal(10) ** deci.Decimal(sigdig))

deci.getcontext().prec = (sigdig + 1)

# evaluates e

while (deci.Decimal(1) / deci.Decimal((math.factorial(step)))) > deci.Decimal(eval(sigdig2)):
    eul += (deci.Decimal(1) / deci.Decimal((math.factorial(step))))
    step +=1

#prints the result

print
printer = '"e = %.' + str(sigdig) + 'f" % (eul)'
print eval(printer) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T14:02:18.933

```
>>> str(decimal.Decimal(10) ** 28)
'1.000000000000000000000000000E+28'  # <- not a decimal
>>> str(decimal.Decimal(10) ** 27)
'1000000000000000000000000000'     # <- also not a decimal, but Decimal/int is defined 
```

这就是你不使用的原因`eval`:)

没有`eval`：

```
import math
import decimal as deci

# defines variables

eul = 0
step = 0

# queries for input

sigdig = int(raw_input("Evaluate number e to n significant digits (up to 27): "))
sigdig2 = deci.Decimal(1) / deci.Decimal(10 ** sigdig)

deci.getcontext().prec = (sigdig + 1)

# evaluates e

while deci.Decimal(1) / deci.Decimal(math.factorial(step)) > sigdig2:
    eul += deci.Decimal(1) / deci.Decimal(math.factorial(step))
    step +=1

#prints the result

print
print 'e = %s' % eul 
```

```
$ python e.py
Evaluate number e to n significant digits (up to 27): 40

e = 2.7182818284590450907955982984276488423347

Evaluate number e to n significant digits (up to 27): 1000

e = 2.71828182845904523536028747135266249775724709369995957496696762772407663035
35475945713821785251664274274663919320030599218174135966290435729003342952605956
30738132328627943490763233829880753195251019011573834187930702154089149934884167
50924476146066808226480016847741185374234544243710753907774499206955170276183860
62613313845830007520449338265602976067371132007093287091274437470472306969772093
10141692836819025515108657463772111252389784425056953696770785449969967946864454
90598793163688923009879312773617821542499922957635148220826989519366803318252886
93984964651058209392398294887933203625094431173012381970684161403970198376793206
83282376464804295311802328782509819455815301756717361332069811250996181881593041
69035159888851934580727386673858942287922849989208680582574927961048419844436346
32449684875602336248270419786232090021609902353043699418491463140934317381436405
46253152096183690888707016768396424378140592714563549061303107208510383750510115
7477041718986106873969655212671546889570350362 
```

# python - 如何使用正则表达式进行多次替换？

> ID：15175142
> 
> 赞同：60
> 
> 时间：2013-03-02T13:43:48.490
> 
> 标签：python, regex, string

我可以使用下面的代码创建一个新文件，并使用正则表达式替换为`a`with 。`aa`

```
import re

with open("notes.txt") as text:
    new_text = re.sub("a", "aa", text.read())
    with open("notes2.txt", "w") as result:
        result.write(new_text) 
```

我想知道我是否必须`new_text = re.sub("a", "aa", text.read())`多次使用此行，但将字符串替换为我想要更改的其他字母，以便更改文本中的多个字母？

也就是说，所以`a`--> `aa`、`b`-->`bb`和`c`--> `cc`。

所以我必须为我想要更改的所有字母写那行，或者有更简单的方法。也许是为了创建一个翻译“词典”。我应该将这些字母放入数组中吗？如果我这样做，我不知道如何打电话给他们。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-03-02T13:53:31.903

@nhahtdh 提出的答案是有效的，但我认为比规范示例更少 pythonic，它使用的代码比他的正则表达式操作更不透明，并利用了 python 的内置数据结构和匿名函数特性。

在这种情况下，翻译词典是有意义的。事实上，Python Cookbook 就是这样做的，如本例所示（复制自 ActiveState [http://code.activestate.com/recipes/81330-single-pass-multiple-replace/](http://code.activestate.com/recipes/81330-single-pass-multiple-replace/)）

```
import re 

def multiple_replace(dict, text):
  # Create a regular expression  from the dictionary keys
  regex = re.compile("(%s)" % "|".join(map(re.escape, dict.keys())))

  # For each match, look-up corresponding value in dictionary
  return regex.sub(lambda mo: dict[mo.string[mo.start():mo.end()]], text) 

if __name__ == "__main__": 

  text = "Larry Wall is the creator of Perl"

  dict = {
    "Larry Wall" : "Guido van Rossum",
    "creator" : "Benevolent Dictator for Life",
    "Perl" : "Python",
  } 

  print multiple_replace(dict, text) 
```

因此，在您的情况下，您可以制作一个 dict `trans = {"a": "aa", "b": "bb"}`，然后将其`multiple_replace`与您要翻译的文本一起传递。基本上，该函数所做的只是创建一个包含所有要翻译的正则表达式的巨大正则表达式，然后当找到一个时，传递一个 lambda 函数`regex.sub`来执行翻译字典查找。

您可以在读取文件时使用此功能，例如：

```
with open("notes.txt") as text:
    new_text = multiple_replace(replacements, text.read())
with open("notes2.txt", "w") as result:
    result.write(new_text) 
```

我实际上在生产中使用了这种精确的方法，在我需要将一年中的月份从捷克语翻译成英语以进行网络抓取任务的情况下。

正如@nhahtdh 指出的那样，这种方法的一个缺点是它不是无前缀的：作为其他字典键前缀的字典键将导致该方法中断。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-02T13:49:59.080

您可以使用捕获组和反向引用：

```
re.sub(r"([characters])", r"\1\1", text.read()) 
```

把你想加倍的字符放在中间`[]`。对于小写`a`, `b`, `c`:

```
re.sub(r"([abc])", r"\1\1", text.read()) 
```

在替换字符串中，您可以`()`使用`\n`符号表示捕获组匹配的任何内容，其中`n`某个**正**整数（不包括 0）。`\1`指第一个捕获组。还有另一种表示法`\g<n>`，其中`n`可以是任何非负整数（允许为 0）；`\g<0>`将引用表达式匹配的整个文本。

* * *

如果要将除换行符以外的所有字符加倍：

```
re.sub(r"(.)", r"\1\1", text.read()) 
```

* * *

如果要将所有字符加倍（包括新行）：

```
re.sub(r"(.)", r"\1\1", text.read(), 0, re.S) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-08-27T15:58:21.283

您可以使用`pandas`库和`replace`函数。我用五个替换来代表一个示例：

```
df = pd.DataFrame({'text': ['Billy is going to visit Rome in November', 'I was born in 10/10/2010', 'I will be there at 20:00']})

to_replace=['Billy','Rome','January|February|March|April|May|June|July|August|September|October|November|December', '\d{2}:\d{2}', '\d{2}/\d{2}/\d{4}']
replace_with=['name','city','month','time', 'date']

print(df.text.replace(to_replace, replace_with, regex=True)) 
```

修改后的文字是：

```
0    name is going to visit city in month
1                      I was born in date
2                 I will be there at time 
```

[您可以在此处](https://predictivehacks.com/replace-a-list-of-characters-with-a-list-of-characters-of-text-in-python/)找到示例

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-10-27T03:11:05.213

使用[如何制作'stringy'类的](https://stackoverflow.com/questions/820742/how-to-bestow-string-ness-on-my-class)技巧，我们可以制作一个与字符串相同的对象，但需要一个额外的`sub`方法：

```
import re
class Substitutable(str):
  def __new__(cls, *args, **kwargs):
    newobj = str.__new__(cls, *args, **kwargs)
    newobj.sub = lambda fro,to: Substitutable(re.sub(fro, to, newobj))
    return newobj 
```

这允许使用构建器模式，它看起来更好，但仅适用于预定数量的替换。如果您在循环中使用它，那么创建额外的类就没有意义了。例如

```
>>> h = Substitutable('horse')
>>> h
'horse'
>>> h.sub('h', 'f')
'forse'
>>> h.sub('h', 'f').sub('f','h')
'horse' 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-05-22T10:02:22.377

如果您的模式本身就是正则表达式，那么其他解决方案都不起作用。

为此，您需要：

```
def multi_sub(pairs, s):
    def repl_func(m):
        # only one group will be present, use the corresponding match
        return next(
            repl
            for (patt, repl), group in zip(pairs, m.groups())
            if group is not None
        )
    pattern = '|'.join("({})".format(patt) for patt, _ in pairs)
    return re.sub(pattern, repl_func, s) 
```

可以用作：

```
>>> multi_sub([
...     ('a+b', 'Ab'),
...     ('b', 'B'),
...     ('a+', 'A.'),
... ], "aabbaa")  # matches as (aab)(b)(aa)
'AbBA.' 
```

请注意，此解决方案不允许您将捕获组放在您的正则表达式中，或在替换中使用它们。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-12-20T12:51:30.303

我发现我必须通过将 lambda 函数更改为使用 myDict.get(mo.group(1),mo.group(1)) 来修改 Emmett J. Butler 的代码。原始代码对我不起作用；如果找不到键，使用 myDict.get() 还可以提供默认值的好处。

```
OIDNameContraction = {
                                'Fucntion':'Func',
                                'operated':'Operated',
                                'Asist':'Assist',
                                'Detection':'Det',
                                'Control':'Ctrl',
                                'Function':'Func'
}

replacementDictRegex = re.compile("(%s)" % "|".join(map(re.escape, OIDNameContraction.keys())))

oidDescriptionStr = replacementDictRegex.sub(lambda mo:OIDNameContraction.get(mo.group(1),mo.group(1)), oidDescriptionStr) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-12-24T20:50:18.510

如果你处理文件，我有一个关于这个问题的简单 python 代码。更多信息[在这里](http://code.activestate.com/recipes/81330-single-pass-multiple-replace/)。

```
import re 

 def multiple_replace(dictionary, text):
  # Create a regular expression  from the dictionaryary keys

  regex = re.compile("(%s)" % "|".join(map(re.escape, dictionary.keys())))

  # For each match, look-up corresponding value in dictionaryary
  String = lambda mo: dictionary[mo.string[mo.start():mo.end()]]
  return regex.sub(String , text)

if __name__ == "__main__":

dictionary = {
    "Wiley Online Library" : "Wiley",
    "Chemical Society Reviews" : "Chem. Soc. Rev.",
} 

with open ('LightBib.bib', 'r') as Bib_read:
    with open ('Abbreviated.bib', 'w') as Bib_write:
        read_lines = Bib_read.readlines()
        for rows in read_lines:
            #print(rows)
            text = rows
            new_text = multiple_replace(dictionary, text)
            #print(new_text)
            Bib_write.write(new_text) 
```

# wordpress - URL 重定向搞砸了（WordPress 和 Opencart）

> ID：15175143
> 
> 赞同：2
> 
> 时间：2013-03-02T13:43:58.050
> 
> 标签：wordpress, .htaccess, url-rewriting, seo, opencart

我需要你的帮助来解决让我困惑的事情。

我在域根目录 (www.csillamvilag.com) 中安装了 WordPress，在子文件夹 (www.csillamvilag.com/shop/) 中安装了 OpenCart。

两种安装都是多语言的（WP 是通过 WPML 实现的多语言）。

在核心程序中部署了 OpenCart SEO URL，以及用于 OpenCart 的多语言 SEO URL Bundle 插件。

Opencart 的多语言插件创建了漂亮的 URL，例如 www.csillamvilag.com/shop/hu/ingyen-e-book，它们大多运行良好。

但是，匈牙利语（我们的主要语言）的 OpenCart 根却没有。www.csillamvilag.com/shop/hu/ 将我重定向到 www.csillamvilag.com/rolunk/husegprogram/ 这是一个 WordPress 页面。

在这一点上我应该注意：
*英文商店根工作正常 www.csillamvilag.com/shop/en/
*如果我将 husegprogram 的 slug 更改为不以 hu 开头的东西，那么我得到一个 404。
* RewriteBase在 OC .htaccess 中是正确的，并且在 WP .htaccess 中没有提到 hu

我在这里完全不知所措，非常感谢一些帮助。

使用
* WordPress 3.5.1
* OpenCart 1.5.4.1 和 vQmod 2.3.0
（只是为了澄清，WordPress 和 OpenCart 之间没有集成）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:51:14.657

结果对我来说，问题是有一个物理文件夹 /shop/hu/

我删除了它，现在 URL www.csillamvilag.com/shop/hu/ 正在由 OpenCart 的多语言 SEO URL 插件正确处理。

（这意味着 WordPress 劫持了 URL，因为在检查物理文件/文件夹时，它找到了一个，然后尽力处理它）

# php - 警告：mysql_query() 期望参数 1 是字符串

> ID：15175144
> 
> 赞同：-8
> 
> 时间：2013-03-02T13:43:59.873
> 
> 标签：php

错误：警告：mysql_query() 期望参数 1 是字符串，第 8 行 C:\wamp\www\cdij\editquantity.php 中给出的资源

这是代码：

```
<?php
$con=mysql_connect("localhost","root","","test");
$quantity=$_POST['txt_quantity'];
$name=$_POST['Fields'];
$table=$_POST['editwhat'];

$que="UPDATE `material` SET `material_quantity`='".$quantity."' WHERE `material_name`='".$name."'";
mysql_query($con,$que);
mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:49:04.293

您需要在 mysql_query 函数中交换 $con 和 $que 参数。

[http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T13:55:38.973

您正在使用**mysqli_query**语法但使用**mysql_query**！错误中最好的部分是，您需要升级到**mysqli_query**并且您已经完成了一半，这真的很棒。

mysql_query 已弃用。检查这个[链接](http://www.php.net/manual/en/mysqli.query.php)，你就在那里。干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T13:48:31.377

这可能意味着您没有连接到您的数据库。检查凭据并添加测试

```
 if($con)
  { 
     $mysql_query($que);
  }
  else
  {
    echo "connection error";
  } 
```

# c# - 内存中 Http POST 请求的只读标头（具有巨大的实体主体）

> ID：15175146
> 
> 赞同：1
> 
> 时间：2013-03-02T13:44:24.730
> 
> 标签：c#, asp.net, iis, iis-7

我正在使用 IIS 7/7.5。我有一个页面，用户可以上传大量数据。有时，我需要阅读 POST 正文，有时不需要。IIS/ASP.NET 中是否有任何方法可以推迟读取 POST 实体主体，直到我发出信号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T14:11:09.930

您可以安全地读取请求标头，而不必担心文件大小。让我详细说明。考虑以下允许将文件上传到`/upload.aspx`端点的 html 页面：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>
    <form action="/upload.ashx" method="post" enctype="multipart/form-data">
        <input type="file" name="file" />
        <button type="submit">OK</button>
    </form>
</body>
</html> 
```

然后我们可以有一个通用的处理程序：

```
public class Upload: IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        var request = context.Request;
        var response = context.Response;
        response.ContentType = "text/plain";
        response.Write(request.Headers.ToString());
    }

    public bool IsReusable
    {
        get { return true; }
    }
} 
```

然后确保我们在 web.config 中增加了请求限制，以允许上传大文件：

```
<httpRuntime maxRequestLength="10485760" /> 
```

和：

```
<system.webServer>
    <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="1073741824" />
      </requestFiltering>
    </security>
</system.webServer> 
```

现在让我们假设用户选择一个非常大的文件来上传（比如 5GB）并点击提交按钮。您的通用处理程序的`ProcessRequest`方法将立即被击中，这意味着您可以非常快速地访问标题：

```
public void ProcessRequest(HttpContext context)
{
    var fileSize = context.Request.ContentLength;
} 
```

如果你想读取这个文件的内容，你可以从文件的输入流开始读取，这显然需要很长时间才能上传整个文件：

```
public void ProcessRequest(HttpContext context)
{
    // We reach at that point pretty fast and we can read the headers here
    // and determine for example the total bytes to be uploaded
    var fileSize = context.Request.ContentLength;

    // now we can start reading the file which would obviously take quite a lot of time:
    context.Request.Files[0].InputStream.Read(...)
} 
```

但是你可能会问自己：但如果`ProcessRequest`用户点击提交按钮后立即点击方法当时上传的文件在哪里？实际上，当字节从客户端 IIS 到达时，它们会将它们分块到临时文件中（它不在内存中，你不应该担心）并且 InputStream 指向这个位置，所以当你开始从中读取时，你实际上会正在读取 IIS 已经从客户端接收并可供您使用的数据。当您开始从输入流中读取时，将创建这些临时文件。所以这就是你应该小心的地方，因为当你从这个流中读取数据时，你正在将数据加载到内存中。因此，如果您可能有来自客户端的非常大的数据，您应该始终以块的形式读取和处理它。`Stream.CopyTo`方法）。

# c - 使用 C 访问 USB 端口

> ID：15175148
> 
> 赞同：3
> 
> 时间：2013-03-02T13:44:37.200
> 
> 标签：c, usb

我知道 USB 中有 4 根线！我想对它们进行处理，即数据+和数据-、接地、电源！我用windows7。

我想使用c通过电线控制信号（可能是数字的二进制）！我想用键盘上的 4 个箭头键开车！

主要思想是将USB的4根线连接到汽车的遥控器，当我们按下任何箭头键时，开/关信号将被发送到特定的线确实会以这样的方式建立连接，当我按下forward 遥控器获取前进命令并传送到汽车，使其移动！

基本上，除了将 USB 连接到 c 程序并在特定命令中引导它之外，我已经准备好其他所有事情

我想要 6 个命令工作；

1.  向前
2.  落后
3.  右向前
4.  向右 n 向后
5.  左 n 向前
6.  左 n 向后

请帮忙！1！这玩意儿要死我了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T08:49:27.597

现代计算机上的 USB 端口不能以您描述的方式直接操作，因为处理器不会直接访问这些电线。有一个专用的主机控制器芯片可以完成大部分工作，通常是一个实现各种[主机控制器接口规范](http://en.wikipedia.org/wiki/Host_controller_interface_%28USB,_Firewire%29)之一的芯片。该芯片处理与各种设备的低级握手，并且可能只是拒绝使用没有连接正确 USB 设备的端口。

主 CPU 通过对主机控制器进行编程来访问 USB 端口，这对可以做什么和不可以做什么施加了一些限制。此外，我所知道的所有主要操作系统都有一个非常严格的接口来访问 USB 端口。即使 HCI 允许对 USB 端口进行直接信号操作，操作系统接口也不允许。

最后，将随机的非 USB 兼容硬件连接到 USB 端口是一种很好的方法来炸掉端口和可能的计算机。USB 旨在由计算机*和*设备实现。

如果您想使用 USB 端口控制硬件，那么您可以使用适配器连接到另一个端口接口（例如并行端口），或者在您的汽车控制器中加入支持 USB 连接的微控制器[。](http://en.wikipedia.org/wiki/Microcontroller)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-17T23:40:02.033

你可以试试学习汇编。

如果我没记错的话，您只需要传递两个参数 1\. 端口号 2\. 要发送的数据然后写“out”并将该数据发送到该设备。

在低级C中也几乎相同。问我是否没有意义希望我有帮助。

编辑对不起，我的回答完全没用且不正确，因为我当时没有经验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-22T10:46:22.497

事情解决了。我使用带有局域网线的 L293D IC，并通过串行端口将其连接到 Windows 98 PC。

它对我有用。感谢您的贡献。

我还获得了我所在大学的最佳项目。

# matrix - 斯坦福在线机器学习课程中的线性代数公式

> ID：15175152
> 
> 赞同：0
> 
> 时间：2013-03-02T13:44:52.657
> 
> 标签：matrix, machine-learning, linear-algebra

第 2 讲[http://see.stanford.edu/see/lecturelist.aspx?coll=348ca38a-3a6d-4052-937d-cb017338d7b1](http://see.stanford.edu/see/lecturelist.aspx?coll=348ca38a-3a6d-4052-937d-cb017338d7b1) 在 59:47 你可以在黑板上看到最后一个公式：

`$\bigtriangledown_A tr ABA^TC = CAB + C^TAB^T ... (1)$`

在此之上（在黑板中间）有：

`$\bigtriangledown_A tr AB = B^T ... (2) $`

将 (2) 应用于 (1) 并将 (2) 中的 $B$ 替换为 (1) 左侧的 $BA^TC$，我们可以得到

`$\bigtriangledown_A tr ABA^TC = \bigtriangledown_A tr A(BA^TC) = (BA^TC)^T = C^TAB^T$`

其中`$CAB$`缺少（1）中的项。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:26:24.420

表达式中有 2 个 A，因此您需要应用乘积规则。参见维基百科：[http ://en.wikipedia.org/wiki/Matrix_calculus#Scalar-by-matrix_identities](http://en.wikipedia.org/wiki/Matrix_calculus#Scalar-by-matrix_identities)

# sql - Rails 中的惰性作用域

> ID：15175156
> 
> 赞同：2
> 
> 时间：2013-03-02T13:45:15.460
> 
> 标签：sql, ruby-on-rails, activerecord, scope

众所周知，作用域在调用时开始加载。所以这个表达式

```
articles = Article.published
articles.newest 
```

得到 2 个查询。是的，我们可以这样做

```
articles = Article.published.newest 
```

但是如果我需要条件怎么办？如果 foo == bar 比继续链。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-02T14:13:02.610

你不正确。在您的示例中，这两行：

```
articles = Article.published
articles.newest 
```

这不会生成两个查询。您能够继续链接的原因是这些调用将返回一个`ActiveRecord::Relation`，它只会在遍历时执行查询或选择少数其他方法调用，如 count、sum 或其他聚合方法。

如果您从控制台查看此内容，则似乎每一行都在生成一个查询。这是因为在控制台中，`inspect`每次评估后都会调用一个隐式调用，这将生成一个查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:50:56.693

同一张表的条件？

```
@a = Article.where("published = true AND foo = bar").order("publishing_date desc").limit(1) 
```

如果您需要对多个表进行预加载，请使用该`includes(...)`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T13:51:48.227

你可以像下面这样：

```
articles = foo == bar ? Article.published.newest : Article.published 
```

# iphone - 滑动手势不适用于ios 6中的表格视图

> ID：15175161
> 
> 赞同：1
> 
> 时间：2013-03-02T13:45:43.740
> 
> 标签：iphone, ios, ipad

我刚刚在 tableview 上放了一个滑动手势。但是 tableview 检测到手势 20 次中的 1 次？为什么会这样？

最初，我使用以下代码将该控制器添加到另一个控制器上：

```
obj = [[RootViewController alloc] initWithNibName:@"RootViewController" bundle:nil];

CGRect rectFrame = obj.view.frame;
rectFrame.origin.x += 320.0f;
[obj.view setFrame:rectFrame];
[self.view addSubview:obj.view]; 
```

RootViewController 包含一个表格，当我们向左或向右滑动时需要滑动整个视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T16:08:52.343

几个想法：

1.  **基本过程：**鉴于您将表格视图添加到右侧，我假设您希望向左滑动以将其滑动到位。该手势应该在主视图上，而不是在表格视图上。然后假设您想要向右滑动以将其滑回右侧，那么该手势将在`obj`您的这个子控制器上进行。

2.  **处理 UIScrollView 子类时的标准手势警告：**注意，在 tableview 顶部滑动手势实际上并不是 100% 可靠的，因为当我们开始向左或向右手势时，手指很容易向上或向下滑动一点，然后作为 tableview 的平移而不是滑动手势来处理。但这是一个次要的 UI 问题。（顺便说一句，这就是为什么应用程序越来越多地将滑动/平移手势添加到屏幕顶部的导航栏，而不是 tableview 本身。）

3.  **改进：**如果您使用标准滑动手势，只需将 设置`direction`为`UISwipeGestureRecognizerDirectionLeft`或`...Right`，那么手势识别系统可以很好地正确检测您的手势，处理现实世界的变化等。如果您有任何代码用于验证自己做手势（或弄乱`touches`事件），然后如果您的逻辑过于严格（例如寻找零变化），您就可以看到您描述的行为`y`。

最重要的是，如果您仍然遇到问题，请分享您的手势创建代码（如果手势应用条件逻辑，那么手势代码本身也是如此）。

* * *

与您手头的问题无关，建议始终让 iOS 了解您的视图控制器。如果您看到[WWDC 2011 - Implementing View Controller Containment](https://developer.apple.com/videos/wwdc/2011/?id=102)，他们会警告您让视图层次结构与控制器层次结构不同步的危险。

简而言之，仅仅将控制器的视图添加为子视图是不够的。幸运的是，修复很简单：您可以实现视图控制器包含。因此，要[添加子控制器](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html#//apple_ref/doc/uid/TP40007457-CH18-SW13)，您需要做的就是在添加子视图之前，调用：

```
[self addChildViewController:obj]; 
```

添加子视图并完成其框架的配置后，告诉 iOS 你已经这样做了：

```
[obj didMoveToParentViewController:self]; 
```

如果您不执行这两个调用，则可能会有 iOS 事件不会传递到您的视图控制器。

# ruby-on-rails - 每个用户的预订总和

> ID：15175173
> 
> 赞同：1
> 
> 时间：2013-03-02T13:47:32.090
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我正在尝试获得`sum`每个用户的加班时间而**不是**每次预订，这就是它现在正在做的事情：[Imgur](http://i.imgur.com/dhGgzGz.png)

**控制器**

```
def index
    @users = User.all
    @hospital_bookings = HospitalBooking.scoped
  end
end 
```

**索引.html.erb**

```
<%@users.each do |user|%>
  <% user.hospital_bookings.each do |hospital_booking| %>
   {
      name:'<%= hospital_booking.user.try(:name)%>',
      data:[<%= @hospital_bookings.where(:user_id => 
     hospital_booking.user.id).all.sum(&:overtime)%>]
    },
  <% end %>
 <% end %> 
```

**楷模**

```
#User.rb
has_many :hospital_bookings

#hospital_booking
belongs_to :user 
```

**架构.rb**

```
create_table "hospital_bookings", :force => true do |t|
    t.string   "booking_reference"
    t.datetime "created_at",                                       :null => false
    t.datetime "updated_at",                                       :null => false
    t.integer  "hospital_id"
    t.integer  "user_id"
    t.date     "day"
    t.string   "shift_type"
    t.decimal  "overtime",          :precision => 10, :scale => 0
  end 
```

我尝试了以下方法，但这些似乎都不起作用。

```
**Attempt1**
<%= @hospital_bookings.where(:user_id => user.id, :hospital_booking =>
 hospital_id ).all.sum(&:overtime)%>

**Attempt2**
<%= HospitalBooking.where(user_id: user.id, 
 hospital_id: hospital.id).sum(:overtime) %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:11:16.173

您似乎要求给定用户的所有加班时间的总和`user`

```
user.hospital_bookings.sum(:overtime) 
```

并且仅限于给定的医院

```
user.hospital_bookings.where(:hospital_id => hospital.id).sum(:overtime) 
```

（但这应该与您的*Attempt2*相同）

*评论后编辑*：
您的第二次迭代创建了重复项。如果您仅对用户进行迭代并将他们的加班时间相加，您应该得到您想要的输出。

```
<% @users.each do |user|%>
   {
      name:'<%= user.name %>',
      data:[<%= user.hospital_bookings.sum(&:overtime)%>]
    },
 <% end %> 
```

# java - 我们应该对控制台输出进行单元测试吗？

> ID：15175175
> 
> 赞同：5
> 
> 时间：2013-03-02T13:47:42.283
> 
> 标签：java, junit, tdd, legacy, cobertura

我正在使用一些`System.out.print`本身有一些命令的遗留代码。我的 eCobertura 插件将此行显示为红色，因此我想对它们进行单元测试。

[在stackoverflow中](https://stackoverflow.com/questions/1119385/junit-test-for-system-out-println)，我找到了一种对控制台输出进行单元测试的方法，我觉得这很有趣。

我就是这样做的：

```
 private final ByteArrayOutputStream outContent = new ByteArrayOutputStream();

        @Before
        public void setUpStreams() {
            System.setOut(new PrintStream(outContent));
        }

        @After
        public void cleanUpStreams() {
            System.setOut(null);
        }

        @Test
        public void out() {
            System.out.print("Some message from the system");
            assertEquals("Some message from the system", outContent.toString());
        } 
```

到目前为止一切顺利，测试变为绿色，但是当我再次运行代码覆盖率插件时，我收到以下消息：

> net.sourceforge.cobertura.coveragedata.TouchCollector.applyTouchesOnProjectData(TouchCollector.java:186) 处的线程“Thread-0”java.lang.NullPointerException 中的异常 net.sourceforge.cobertura.coveragedata.ProjectData.saveGlobalProjectData(ProjectData.java:267) ) 在 net.sourceforge.cobertura.coveragedata.SaveTimer.run(SaveTimer.java:31) 在 java.lang.Thread.run(Thread.java:662)

我有些疑惑：

*   尝试进行单元测试是否正确`System.out.print()'s`？
*   eCoberturrain 是否与此类测试兼容？
*   如果 eCobertura 与此类测试不兼容，为什么它会显示红色线？
*   我的测试有问题吗？
*   我正在使用 jUnit 4.11 你认为这与它有关吗？
*   为什么 eCobertura 给我这个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T14:05:42.470

**尝试对 System.out.print() 进行单元测试是否正确？**

这在很大程度上取决于您要测试的内容。我认为没有必要测试 System.out.print() 本身，我希望 Sun/Oracle 已经做到了这一点。但是，如果您的应用程序将重要信息输出到控制台并且这是您验证输出的唯一方法，那么是的，您需要对其进行测试。如果您可以通过测试相应的类来测试您的代码，那么您可能不需要测试输出流本身。

例如，查看数据库：我不测试自身的 JDBC 驱动程序，但我会测试所有代码/功能，这些代码/功能是从数据库加载/保存数据的一部分。

红线仅表示代码行从未执行过。这可能没问题，或者这可能意味着您的测试没有触及它们应该触及的代码部分。提高测试覆盖率很重要，但可能并不总是需要以 100% 为目标（想想帕累托原则）

**至于你的空指针异常**

您`System.setOut(null);`将 System.out 设置为 null 的调用，eCobertura 可能会尝试向 Standard Out 写入一些内容，该标准输出现在为 null。您可能需要在 @Before 方法中保存原始输出流并在我们的 @After 方法中恢复它，以允许后面的代码使用 StdOut

**eCobertura 是否与此类测试不兼容？**

**如果 eCobertura 与此类测试不兼容，为什么它会显示红色线？**

**为什么 eCobertura 给我这个错误？**

eclipse 和 eCobertura 之间的通信可能是通过 Standard Out 进行的，但我不确定。如果是这种情况，那么如果您重定向标准输出，不仅您的输出而且来自 Cobertura 的输出都会被重定向，并且 GUI 不再看到执行的内容和不执行的内容，因此将其着色为红色

**我的测试有问题吗？**

可能需要确保正确恢复 StdOut。

**我正在使用 jUnit 4.11 你认为这与它有关吗？**

不，我不这么认为

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T13:56:37.100

如果在代码中使用 System.out.println 是正确的，那么（单元/集成）测试它们是正确的。

有一个有用的系统测试实用程序称为系统规则来测试这种代码。

[http://stefanbirkner.github.com/system-rules/](http://stefanbirkner.github.com/system-rules/ "系统规则")

# c++ - 如何抑制来自内部 Visual Studio 文件的警告

> ID：15175178
> 
> 赞同：8
> 
> 时间：2013-03-02T13:47:50.503
> 
> 标签：c++, visual-c++, visual-studio-2012, compiler-warnings

我在 Visual Studio 2012 和这个简单的程序中将警告级别设置为 EnableAllWarnings (/Wall)：

```
#include "math.h"

int main() {
    return 0;
} 
```

当我编译时，我收到了几个警告，例如：

> `1>C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include\math.h(161): warning C4514: 'hypot' : unreferenced inline function has been removed`

如果我更换`"math.h"`to，`"string.h"`我会继续收到有关 the 等的警告`string.h`。

有谁知道如何删除这些警告？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T23:24:02.947

仔细查看您实际收到的警告消息：

```
1> warning C4514: 'hypot' : unreferenced inline function has been removed 
```

如果你对自己说*“所以？！”* ，那么这正是我的观点。

[警告 C4514](http://msdn.microsoft.com/en-us/library/cw9x3tcf.aspx)是出了名的*无用*，实际上只是在呼吁全球压制。这是一个完全不可操作的项目，并描述了您使用图书馆时的预期案例。

[警告 C4711](http://msdn.microsoft.com/en-us/library/k402bt7y.aspx)（已选择内联扩展的函数）是您将看到的另一个嘈杂警告。当然，只有在启用优化的情况下编译时才会得到这个，这可能就是你还没有看到它的原因。

就像链接文档所说的那样，这些是“信息警告”，默认情况下它们被禁用。这很好，除了我和你一样，更喜欢在`/Wall`启用“所有警告”（）的情况下编译我的代码，而这些只会增加噪音。所以我将它们单独关闭。

您可以通过在 VS IDE 中将抑制添加到项目属性中来禁用这些警告，或者您可以在代码文件的顶部使用 pragma 指令（例如，在您的预编译头文件中）：

```
#pragma warning(disable: 4514 4711) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-29T22:48:21.347

也许这会成功：

```
// you can replace 3 with even lower warning level if needed 
#pragma warning(push, 3) 

#include <Windows.h>
#include <crtdbg.h>
#include "math.h"
//include all the headers who's warnings you do not want to see here

#pragma warning(pop) 
```

如果您计划将代码移植到非 MS 环境，那么您可能希望将所有使用的外部标头包装在特定标头中，以便在移植时可以更改它。

# iphone - ios字典到数组“键对象”

> ID：15175179
> 
> 赞同：-1
> 
> 时间：2013-03-02T13:48:00.020
> 
> 标签：iphone, ios, arrays, dictionary

我有一本字典，当我写它的元素时，就像

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <UrunListesi6Response xmlns="http://tempuri.org//Stok">
      <UrunListesi6Result>
        <Urun6>
          <UrunId>int</UrunId>
        </Urun6>
        <Urun6>
          <UrunId>int</UrunId>
        </Urun6>
      </UrunListesi6Result>
    </UrunListesi6Response>
  </soap:Body>
</soap:Envelope> 
```

要将 UrunIds 放入数组中，我使用

```
NSMutableArray *a = [[NSMutableArray alloc] init];

a = [[[[[myDictionary  objectForKey:@"soap"]objectForKey:@"UrunListesi6Response" ] objectForKey:@"UrunListesi6Result"] objectForKey:@"Urun6"] objectForKey:@"UrunId"];

NSLog(@"%@",a); 
```

但是结果为空，有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:50:24.400

那是一个xml文件，而不是字典。

将该 xml 读入 NSDictionary 然后尝试。

您可以使用任何可用的 XML 解析器。

解析 XML 文件有很多答案，今天才发布[这个](https://stackoverflow.com/questions/15172669/how-can-i-parse-this-xml-using-nsxmlparser-in-ios)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:50:05.170

有两个“肥皂”键：

```
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>

</soap:Body>
</soap:Envelope> 
```

# fingerprint - 指纹匹配

> ID：15175181
> 
> 赞同：0
> 
> 时间：2013-03-02T13:48:11.843
> 
> 标签：fingerprint, biometrics, interfacing

我正在建立一个工资系统，并想使用指纹扫描仪来控制考勤。

我想知道它如何与 java web 应用程序交互。有没有办法通过网络连接实时获取日志（当用户滑动手指并匹配时）？

我知道扫描仪附带的软件可以进行考勤，但我想将日志保存在我们的数据库中并管理数据。我需要设备做的就是匹配指纹并发送日志（ID、日期、时间……）

有没有人这样做过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:54:32.727

我已经这样做了两次。一台设备通过 USB 连接到 PC，我雇了一个人来研究 API 并编写一个 Visual Basic 应用程序将数据发布到一个网站，PHP+MySQL 接受并存储该条目。另一种设备通过以太网工作，集成起来更复杂。这完全取决于制造商、他们的 API 和通信方式。

如果我要再做一次，我会先看看 Arduino 类型的设备，例如[https://www.sparkfun.com/products/11651](https://www.sparkfun.com/products/11651)

# c# - 基/派生类型泛型参数

> ID：15175185
> 
> 赞同：1
> 
> 时间：2013-03-02T13:48:32.170
> 
> 标签：c#, generics

我想在抽象类和方法签名中有一个抽象方法，如下所示：

```
public abstract IEnumerable<SynchronizeItem<IDataItem>> Sync(IEnumerable<SynchronizeItem<IDataItem>> clientSyncItems); 
```

在派生类中我要定义方法类型安全：

```
public override IEnumerable<SynchronizeItem<AdItem>> Sync(IEnumerable<SynchronizeItem<AdItem>> clientSyncItems)
{
    // Do something with the AdItems
    _adHandler.Foo(clientItems):
} 
```

这是不可能的。还有其他实现相同行为的可能性吗？我不想将 IDataItem 的每个用法都转换为 AdHandler 类中的特定实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T13:52:26.977

尝试定义您的抽象方法，例如：

```
public  IEnumerable<SynchronizeItem<T>> Sync<T>(IEnumerable<SynchronizeItem<T>> clientSyncItems)  where T : IDataItem; 
```

您的另一种方法，即实现，是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T14:59:07.453

Renen 的回答不会完全符合您的要求，因为在我看来，您希望*子类*定义具体类型，而不是*caller*。为此，请将类型参数作为*基类*的一部分，而不是方法：

```
public class Base<T> where T : IDataItem
{
    public abstract IEnumerable<SynchronizeItem<T>> Sync(
        IEnumerable<SynchronizeItem<IDataItem>> 
        clientSyncItems);
} 
```

还有你的派生类：

```
public class Derived : Base<AdItem>
{
    public override IEnumerable<SynchronizeItem<AdItem>> Sync(
        IEnumerable<SynchronizeItem<AdItem>> 
        clientSyncItems) 
    { ... }
} 
```

# arrays - PostgreSQL unnest 与空数组

> ID：15175187
> 
> 赞同：21
> 
> 时间：2013-03-02T13:48:46.637
> 
> 标签：arrays, postgresql

我使用 postgreSQL 9.1。在我的数据库中有一个看起来像的表

```
id | ... | values
-----------------------
1  | ... | {1,2,3}
2  | ... | {} 
```

其中 id 是一个整数，而 values 是一个整数数组。数组可以为空。

我需要取消嵌套此列表。如果我查询

```
select id, ..., unnest(values)
from table 
```

我得到 id = 1 的三行（如预期的那样），没有 id = 2 的行。有没有办法得到类似的结果

```
id  | ... | unnest
-------------------
1   | ... | 1
1   | ... | 2
1   | ... | 3
2   | ... | null 
```

即一个查询，它还包含有一个空数组的行？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-02T14:24:41.347

```
select id, 
       case 
         when int_values is null or array_length(int_values,1) is null then null
         else unnest(int_values)
       end as value
from the_table; 
```

（请注意，我将列重命名`values`为`int_values`as`values`是保留字，不应用作列名）。

SQLFiddle：[http ://sqlfiddle.com/#!1/a0bb4/1](http://sqlfiddle.com/#!1/a0bb4/1)

* * *

Postgres 10 不再允许这样使用`unnest()`。

您需要使用横向连接：

```
select id, t.i
from the_table
   cross join lateral unnest(coalesce(nullif(int_values,'{}'),array[null::int])) as t(i); 
```

在线示例：[http ://rextester.com/ALNX23313](http://rextester.com/ALNX23313)

* * *

当使用左连接而不是交叉连接时，它可以进一步简化：

```
select id, t.i
from the_table
 left join lateral unnest(int_values) as t(i) on true; 
```

在线示例：[http ://rextester.com/VBO52351](http://rextester.com/VBO52351)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-04-09T15:37:00.207

这也适用于 Postgres 10：

```
SELECT id, UNNEST(CASE WHEN "values" <> '{}' THEN "values" ELSE '{null}' END) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-08T22:43:30.383

在重新审视这个问题时，我觉得这可以**更简单**、更快。
通过@a_horse颠倒[当前接受的解决方案的逻辑](https://stackoverflow.com/a/15175556/939860)：

```
SELECT id, CASE WHEN values <> '{}' THEN unnest(values) END AS value
FROM   tbl 
```

*   对于**空数组**和数组，这将返回一行`NULL`，因为只有包含元素的数组才会在 test中产生。`value`****`NULL`**`TRUE``values <> '{}'`**

***   适用于*任何*类型的数组，因为文字“{}”会自动强制转换为匹配类型。

    *   如果没有明确的`ELSE`分支，就会`CASE`返回`NULL`，这就是我们想要的。

    *   无论如何，带有`NULL`元素的数组都将返回行。
    **然而。**我在那里发现了一个异常并发布了一个关于此的问题：

    *   [转换 unnest() 的结果时丢失 NULL 元素](https://stackoverflow.com/questions/16452501/null-emements-lost-when-casting-result-of-unnest)

    原来是在我报告 pg 9.3+ 后修复的错误。** 

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T15:31:35.447

```
select id,
    unnest (
        "values"
        ||
        (array[null]::integer[])[1:(array_upper("values", 1) is null)::integer]
    )
from "table" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T14:18:04.983

您将需要使用 self `LEFT JOIN`，像这样（也在[SQL Fiddle](http://sqlfiddle.com/#!1/95bad/1)上）：

```
SELECT t.id, u.u
  FROM tab t
  LEFT JOIN (SELECT id, unnest(vals) u FROM tab) u
    USING (id); 
```

请注意，对于更大的表查询将表现不佳。**

# jquery - 如何使用 CSS 过渡动画下拉菜单？

> ID：15175191
> 
> 赞同：4
> 
> 时间：2013-03-02T13:49:11.663
> 
> 标签：jquery, css, drop-down-menu, css-transitions

我知道在更改类之间的显示模式时转换不起作用。

所以我想用jQuery来改变类。我在这里做了一个小提琴：http: [//jsfiddle.net/v8GTz/](http://jsfiddle.net/v8GTz/)但它似乎不能正常工作:(

看起来边框正在动画，但高度没有。并且`opacity`只动画一次。

我在这里做错了什么？

* * *

好的，我设法使淡入淡出效果起作用，但高度仍然没有动画：

[http://jsfiddle.net/XYD9K/](http://jsfiddle.net/XYD9K/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T13:59:18.870

具体来说，当您停止将鼠标悬停在“ul ul”上时，您并没有删除“扩展”类。您实际上是在再次添加它，我想这是一个意外错误！

# javascript - jquery下拉菜单重定向

> ID：15175200
> 
> 赞同：-4
> 
> 时间：2013-03-02T13:50:38.257
> 
> 标签：javascript, jquery, html, drop-down-menu

我需要一个学校项目的下拉菜单，我对javascript不太了解，所以我在这里问。当从下拉菜单中单击一个选项时，我只需要添加一个重定向。我将文件粘贴到pastie [http://pastie.org/6365493](http://pastie.org/6365493)和[http://pastie.org/6365495](http://pastie.org/6365495)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:56:28.347

```
HTML:
<select id="selectbox">
    <option value="https://www.yahoo.com/" selected>Option1</option>
    <option value="https://www.google.co.in/">Option2</option>
    <option value="https://www.gmail.com/">Option3</option>
</select>

JAVASCRIPT:
<script>  
    jQuery(function () {
        $("#selectbox").change(function () {
            location.href = $(this).val();
        })
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:56:53.173

这是我为你写的非常简单的东西：

[http://jsbin.com/ayomar/3](http://jsbin.com/ayomar/3)

HTML：

```
 <select id="redirect">
    <option>Where to cer?</option>
    <option value="http://www.google.com">Home</option>
  </select> 
```

JAVASCRIPT：jQuery

```
$("#redirect").on("change", function() {
   var self = $(this);
   // console.log(self.val());
   window.location.href = self.val();
}); 
```

# java - 在托管 bean 中获取 ui:param 值

> ID：15175201
> 
> 赞同：0
> 
> 时间：2013-03-02T13:50:43.150
> 
> 标签：java, jsf, jsf-2, facelets

我有以下内容`p:tabView`：

```
<p:tabView id="tabView" dynamic="true" cache="false" activeIndex="#{navigationController.activeTabIndex}"
    onTabChange="tabChangeCommand([{name:'index', value:index}])">
    <p:tab title="#{adbBundle['nav.manageUser']}" id="manageUserTab">
        <h:panelGroup layout="block">
            <h:form id="manageUserListForm">
                <ui:include src="/WEB-INF/includes/userList.xhtml">
                    <ui:param name="showOnlyActiveUsers" value="#{true}" />
                </ui:include>
            </h:form>
        </h:panelGroup>
    </p:tab>
    <p:tab title="#{adbBundle['nav.manageRole']}" id="manageRoleTab">
        <h:panelGroup layout="block">
            <h:form id="manageRoleListForm">
                <ui:include src="/WEB-INF/includes/userList.xhtml">
                    <ui:param name="manageRole" value="manageRole" />
                    <ui:param name="showOnlyActiveUsers" value="#{false}" />
                </ui:include>
            </h:form>
        </h:panelGroup>
    </p:tab>
</p:tabView> 
```

这两个选项卡都具有相同的包括，即`userList.xhtml`。在这里面，`userList.xhtml`我放置了一个用于测试目的`h:outputText`的值：`ui:param` `showOnlyActiveUsers`

```
<h:outputText id="showOnlyActiveUsers" value="#{showOnlyActiveUsers}" /> 
```

此值`h:outputText`从选项卡更改`true`变为`false`选项卡更改，反之亦然。

视图范围内的托管 bean`UserListController`是`userList.xhtml`. 由于它在视图范围内，它为所有这两个选项卡实例化一次。

我有一个`UserDataModel`扩展`LazyDataModel`Primefaces 的类。此类的一个实例存在于`UserListController`. 我正在尝试为 a`UserDataModel`的 getter 方法中的字段设置一个值`h:inputHidden`：

```
<h:inputHidden value="#{userListController.showActiveOnly}" /> 
```

这是`userList.xhtml`来自`UserListController`：

```
public String getShowActiveOnly() {
    ValueExpression expression = getFacesContext().getApplication().getExpressionFactory().createValueExpression(getFaceletContext(), "#{showOnlyActiveUsers}", Boolean.class);
    userDataModel.setShowOnlyActiveUsers(expression.getValue(getFaceletContext());
    return "";
} 
```

但是生成的值`expression.getValue(getFaceletContext()`始终是`false`。我想知道为什么从to`h:outputText`更改的值，但生成的值始终是？`true``false``ValueExpression``false`

我该如何解决这个问题。任何指针都会对我很有帮助。

## 编辑

```
protected final FaceletContext getFaceletContext() {
    return (FaceletContext) getFacesContext().getAttributes().get(FaceletContext.FACELET_CONTEXT_KEY);
} 
```

我想要实现的是将`ui:param`值传递给托管 bean 并从那里传递给数据模型。

## 编辑

`userList.xhtml`：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions">

    <h:form id="userListForm">
        <p:panel id="userListPanel" header="#{adbBundle['userList.panel.header']}" toggleable="true">
            <p:dataTable var="user" id="userTable" value="#{userListController.userDataModel}" lazy="true" paginator="true" rows="10"
                paginatorPosition="bottom"
                paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                rowsPerPageTemplate="10,50,100" widgetVar="userDataTable" styleClass="userTable" selectionMode="single">

                <f:facet name="header">
                    <p:outputPanel>
                        <h:panelGroup layout="block" id="resetFiter" styleClass="dataTableResetFilter">
                            <p:outputLabel value="#{adbBundle['filter.resetText']}" />
                            <p:spacer width="10" />
                            <p:commandButton icon="ui-icon-circle-close" actionListener="#{userListController.resetUserTable}"/>
                        </h:panelGroup>
                    </p:outputPanel>
                </f:facet>

                <p:column id="nameColumn" headerText="#{adbBundle['name']}" sortBy="#{user.fullName}" filterBy="#{user.fullName}" styleClass="name">
                    <h:outputText value="#{user.fullName}" />
                </p:column>

                <p:column id="statusColumn" headerText="#{adbBundle['status']}" sortBy="#{user.active}" styleClass="center status" filterBy="#{user.statusText}"
                    filterMatchMode="exact" filterOptions="#{userListController.statusOptions}">
                    <h:outputText value="#{user.statusText}" />
                </p:column>

                <p:column id="manageRoleColumn" headerText="#{adbBundle['role']}" sortBy="#{user.role}" styleClass="center manageRole" filterBy="#{user.role}"
                    filterOptions="#{userListController.roleOptions}" rendered="#{manageRole != null and manageRole != ''}">
                    <h:panelGroup layout="block">
                        <p:selectOneRadio id="roleRadio" value="#{user.role}" styleClass="roleRadio">
                            <f:selectItem itemValue="user" itemLabel="User" />
                            <f:selectItem itemValue="manager" itemLabel="Manager" />

                            <p:ajax listener="#{userListController.changeRole}" />
                            <f:attribute name="user" value="#{user}" />
                        </p:selectOneRadio>
                    </h:panelGroup>
                </p:column>
            </p:dataTable>
        </p:panel>

    </h:form>
</ui:composition> 
```

我想要的是`ui:param`从. 同样，当托管 bean 在视图范围内创建时，它只实例化一次。`userList.xhtml``datamodel``datamodel`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T17:18:47.563

你可以使用这样的东西来显示活跃用户，

```
<h:form id="userListForm">
    <p:panel id="userListPanel" header="#{adbBundle['userList.panel.header']}" toggleable="true">
        <p:dataTable var="user" id="userTable" value="#{userListController.userDataModel}" lazy="true" paginator="true" rows="10"
            paginatorPosition="bottom"
            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
            rowsPerPageTemplate="10,50,100" widgetVar="userDataTable" styleClass="userTable" selectionMode="single">

            <f:facet name="header">
                <p:outputPanel>
                    <h:panelGroup layout="block" id="resetFiter" styleClass="dataTableResetFilter">
                        <p:outputLabel value="#{adbBundle['filter.resetText']}" />
                        <p:spacer width="10" />
                        <p:commandButton icon="ui-icon-circle-close" actionListener="#{userListController.resetUserTable}"/>
                    </h:panelGroup>
                </p:outputPanel>
            </f:facet>
            <ui:fragment rendered="#{showOnlyActiveUsers and user.active}">
            <p:column id="nameColumn" headerText="#{adbBundle['name']}" sortBy="#{user.fullName}" filterBy="#{user.fullName}" styleClass="name">
                <h:outputText value="#{user.fullName}" />
            </p:column>

            <p:column id="statusColumn" headerText="#{adbBundle['status']}" sortBy="#{user.active}" styleClass="center status" filterBy="#{user.statusText}"
                filterMatchMode="exact" filterOptions="#{userListController.statusOptions}">
                <h:outputText value="#{user.statusText}" />
            </p:column>

            <p:column id="manageRoleColumn" headerText="#{adbBundle['role']}" sortBy="#{user.role}" styleClass="center manageRole" filterBy="#{user.role}"
                filterOptions="#{userListController.roleOptions}" rendered="#{manageRole != null and manageRole != ''}">
                <h:panelGroup layout="block">
                    <p:selectOneRadio id="roleRadio" value="#{user.role}" styleClass="roleRadio">
                        <f:selectItem itemValue="user" itemLabel="User" />
                        <f:selectItem itemValue="manager" itemLabel="Manager" />

                        <p:ajax listener="#{userListController.changeRole}" />
                        <f:attribute name="user" value="#{user}" />
                    </p:selectOneRadio>
                </h:panelGroup>
            </p:column>
             </ui:fragment>   
        </p:dataTable>
    </p:panel>

</h:form> 
```

您也可以使用这种格式的布尔表达式

```
<ui:param name="showOnlyActiveUsers" value="false" /> 
```

其他解决方案可能是将用户列表传递给您的 ui，包括。保留两个方法 'userListController.userList' 和 'userListController.activeUserList' 并将其作为 ui:param 传递给您的 usersList.xhtml

# c++ - 模板不能接受对象作为参数

> ID：15175203
> 
> 赞同：0
> 
> 时间：2013-03-02T13:50:52.120
> 
> 标签：c++, templates

为什么下面的代码是错误的？模板接受哪种类型的参数？

```
class MyClass
{
    int var;
};

template <MyClass a> struct s
{

};

int main()
{
    MyClass var;
    struct s<var>;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T13:51:49.107

非类型模板参数是有约束的，不是什么都可以用。特别是，它们必须是编译时常量，这不是你的情况。关于您的模板*定义*：

```
template <MyClass a> struct s
//        ^^^^^^^
{
}; 
```

请参阅 C++11 标准的第 14.1/4 段：

> 非类型模板参数**应具有以下类型之一（可选 cv 限定）**：
> 
> — 整数或枚举类型，
> 
> — 指向对象的指针或指向函数的指针，
> 
> — 对对象的左值引用或对函数的左值引用，
> 
> — 指向成员的指针，
> 
> — std::nullptr_t。

如您所见，不允许使用用户定义的类型。关于模板的*实例化*，然后：

```
struct s<var>;
//       ^^^ You most likely meant something like s<var> obj, but nevermind 
```

请参阅 C++11 标准的第 14.3.2/1 段：

> 非类型、非模板模板参数的模板参数**应为以下之一**：
> 
> — 对于整数或枚举类型的非类型模板参数，模板参数类型的转换常量表达式（5.19）；或者
> 
> — 非类型模板参数的名称；或者
> 
> — 一个常量表达式 (5.19)，它指定具有静态存储持续时间和外部或内部链接的对象或具有外部或内部链接的函数的地址，包括函数模板和函数模板 ID，但不包括非静态类成员，表示为 (忽略括号）作为 & id 表达式，但如果名称引用函数或数组，则 & 可以省略，如果相应的模板参数是引用，则应省略；或者
> 
> — 一个常量表达式，计算结果为空指针值 (4.10)；或者
> 
> — 一个常量表达式，其值为空成员指针值 (4.11)；或者
> 
> — 一个指向成员的指针，如 5.3.1 所述。

# javascript - 如何将 span 元素的 HTML 设置为自定义数据属性的内容？

> ID：15175209
> 
> 赞同：0
> 
> 时间：2013-03-02T13:51:19.943
> 
> 标签：javascript, jquery, custom-data-attribute

我想显示表中行数的计数。我已经用 PHP 计算了这个并输出了`<span>200 rows total</span>`，但我想使用 Javascript 来切换这个`<span>Showing 2 of 200 total rows</span>`表是否折叠。理想情况下，我想要这样的东西：

```
$(".collapse-count").html('Showing 2 of ' + $(this).data("count") + ' total rows'); 
```

带标记：

```
<span class="collapse-count" data-count="200">Showing 2 of 200 total rows</span> 
```

但这行不通。如何使用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T13:55:27.570

`this`在你的代码中没有引用`.collapse-count`元素，`html`方法接受一个函数，在这个函数的上下文中，`this`是指当前元素。

```
$(".collapse-count").html(function(index, oldHTML) {
   return 'Showing 2 of ' + $(this).data("count") + ' total rows';
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T13:55:33.643

您需要`this`在适当的上下文中使用。

```
$(".collapse-count").html(function() {
    return 'Showing 2 of ' + $(this).data("count") + ' total rows');
}); 
```

* * *

当您将回调传递给 时`.html()`，匹配的元素将被迭代，并将成为迭代`this`中当前元素的引用。

按照您的方式，您使用的是 . 的封闭值`this`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T13:56:11.027

`this`没有您使用它的方式的元素上下文。

您可以使用`html()`方法的回调函数参数：

```
$(".collapse-count").html(function(){
    return 'Showing 2 of ' + $(this).data("count") + ' total rows';
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T13:56:46.463

试试这个：

```
$(".collapse-count").html(function() {
return 'Showing 2 of ' + $(this).attr("data-count") + ' total rows';
}); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-02T13:55:30.673

与`SPAN`您一起工作必须使用`.text()`而不是`.html()`

# android - “标签页眉”中的 Android 操作栏图标太大

> ID：15175211
> 
> 赞同：1
> 
> 时间：2013-03-02T13:51:22.460
> 
> 标签：android, tabs, android-actionbar, actionbarsherlock, android-icons

我有三个标签应该使用片段显示在操作栏中，设置是这样的：

```
 ActionBar actionbar = getSupportActionBar();
    actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    ActionBar.Tab buddyTab = actionbar.newTab().setText("Buddys");
    ActionBar.Tab chatsTab = actionbar.newTab().setText("Chats");
    ActionBar.Tab schedularTab = actionbar.newTab().setText("Schedular");
    buddyTab.setIcon(R.drawable.buddylistwhite);
    chatsTab.setIcon(R.drawable.chatswhite);
    schedularTab.setIcon(R.drawable.schedularwhite);

    buddysFragment = new BuddysFragment();
    chatsFragment = new ChatsFragment();
    schedularFragment = new SchedularFragment();

    buddyTab.setTabListener(new TabListener(this, "buddys", buddysFragment));
    chatsTab.setTabListener(new TabListener(this, "chats", chatsFragment));
    schedularTab.setTabListener(new TabListener(this, "schedular", schedularFragment));

    actionbar.addTab(buddyTab);
    actionbar.addTab(chatsTab);
    actionbar.addTab(schedularTab); 
```

遗憾的是，图标显示为全尺寸（128 像素 x 128 像素）。当我使用以前的 tabhost 时，它“自动”被正确缩放，所以我得到了一个干净的外观，在标题中显示文本和图标。
如何使操作栏的行为相似，从而以适当的方式显示文本和图标？还是我只是做错了什么？

提前致谢。
最好的问候，
sMau

# entity-framework-5 - 如何升级项目以使用 Entity Framework 5 POCO 生成器

> ID：15175215
> 
> 赞同：0
> 
> 时间：2013-03-02T13:51:33.060
> 
> 标签：entity-framework-5, poco

我正在编写一个使用 Entity Framework 5 作为其 ORM 的 MVC 应用程序。实际上，我从现有应用程序中复制了 POCO 生成器类，并且正如该代码的所有者所说，该项目正在使用 EF 4 POCO 生成器类，我需要将其升级为使用 EF5 POCO 生成器。

任何人都知道如何实现这一目标？

很抱歉没有提供任何源代码，因为我不确定我应该提供什么！

任何人都可以使用我提供的信息来帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:26:39.147

没有从 EF4 POCO 生成器自动升级到 EF5 POCO 生成器。生成的实体类将非常相似，除了导航属性中的一些修复，但问题是上下文类将与完全不同的 API 完全不同。每个使用来自 EF4 POCO 生成器的派生上下文的数据访问相关代码`ObjectContext`都必须重写以使用`DbContext`来自 EF5 POCO 上下文的派生上下文，否则`IObjectContextAdapter`必须`DbContext`使用`ObjectContext`.

# c# - “System.ServiceModel.OperationContext”不包含采用“0”参数错误的构造函数

> ID：15175217
> 
> 赞同：1
> 
> 时间：2013-03-02T13:51:40.543
> 
> 标签：c#, constructor

在我的窗体中

```
 private OperationContext op = new OperationContext(); 
```

它没有给出错误，但是

在另一个项目中，我添加了这行代码（相同的机器，相同的 .NET 版本）它给出

> “System.ServiceModel.OperationContext”不包含采用“0”参数的构造函数

错误任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:53:53.817

您需要传入一个继承自`IContextChannel`. 该类`OperationContext`没有将 0 个参数作为重载的构造函数。

[http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontext.operationcontext.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontext.operationcontext.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:56:51.957

那么也许有不同的 OperationContext 类？您完全限定的只有一个[构造函数](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontext.operationcontext%28v=vs.90%29.aspx)，该构造函数确实带有参数。

# c - 使用浮点数和双精度时，c 中的 -0.0000 是什么？

> ID：15175218
> 
> 赞同：2
> 
> 时间：2013-03-02T13:51:44.780
> 
> 标签：c, gcc, floating-point, double

```
#include <stdio.h>
#include <stdlib.h>

#define answer 3.141593

void main(int argc, char **argv) {

        float a = (argc - 2)?: strtod(argv[1], 0);    
        printf("double = %lf ,float =  %f", a-answer , a-answer);

} 
```

当我这样运行它时：

```
./a.out 3.141593 
```

输出是

```
double = -0.000000 ,float =  -0.000000 
```

为什么呢`-0.00000`？我怎样才能让它输出`0.000000`？

我该怎么做`a == answer`？

* * *

如果它使用 2 的补码，怎么会有 -0 值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T14:01:32.657

浮点数不使用 2 的补码。它们有符号、指数和尾数，你的数字只有零和符号，或者更可能的是，你有一些像 -1.0e-15 这样的数字，打印为 -0.0000。尝试 %e 而不是 %f。微小的差异是由于无法以有限精度数据类型存储具有无限精度的数字（发生了一些舍入），并且当您将 double 更改为 float 时，必须进行额外的舍入。（请记住，3.141593 是二进制表示的无限周期数，这实际上取决于该数字存储在哪种类型中）

# verilog - Xilinx 中的模板错误

> ID：15175219
> 
> 赞同：-1
> 
> 时间：2013-03-02T13:51:45.747
> 
> 标签：verilog, xilinx

我在 xilinx 中编写了一个程序，此代码在其中编译得很好，`ModelSim`但是当我在 xilinx 中编译它时出现此错误。

`ERROR:Xst:899 - line 78: The logic for <iterator> does not match a known FF or Latch template. The description style you are using to describe a register or latch is not supported in the current software release.`

我不知道为什么我会收到这个错误。这是代码：

```
module BcdCounter( input clk,input reset, output reg [3:0]out
);

reg [23:0]iterator;

always @(posedge clk,negedge reset)
begin

if(~reset)
begin

out=0;
iterator=0;

end

else
// clock divider
if(iterator==50000000) // 50Mhz clock divider
begin

out<=out+1;
iterator=0;

end

iterator=iterator+1;

end

endmodule 
```

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T15:50:17.293

我注意到三（五）件事：

1) 我会在你的 always@ 语句中使用 'or' 而不是逗号来分隔 'clk' 和 'reset'

2）在真正的时钟逻辑中，您应该始终将阻塞分配用于您期望推断触发器的任何内容。阻塞赋值只能用于临时变量。

3）您将阻塞和非阻塞分配混合到“输出”。这是一个明确的禁忌。

4）您的迭代器增量超出了重置 if/else 的范围，这真的会在事物中抛出一个扳手。

5）顺便说一句，请缩进你的块。很难判断哪些行与哪个块相关联，并且所有内容都左对齐。

```
module BcdCounter (
   input            clk,
   input            reset,
   output reg [3:0] out
);

reg [23:0] iterator;

always @(posedge clk or negedge reset) begin
   if(!reset) begin
      out      <= 0;
      iterator <= 0;
   end else begin
      // 50MHz clock divider
      if (iterator == 50000000) begin
         out      <= out + 1;
         iterator <= 0;
      end else begin
         iterator <= iterator + 1;
      end
   end
end

endmodule 
```

# java - 想要使用数组元素作为属性，但引号会导致错误 Java

> ID：15175220
> 
> 赞同：0
> 
> 时间：2013-03-02T13:51:47.167
> 
> 标签：java

我真的被这个简单的问题难住了。

我有一个带有几种颜色的数组，例如：

```
String[] colors = {"BLACK", "YELLOW", "ORANGE"}; 
```

我想使用数组中的一种颜色，如下所示：

```
setBackground(Color.colors[1]); 
```

但我得到了错误

```
colors cannot be resolved or is not a field. 
```

我确定我的问题有一个简单的解决方案吗？

谢谢！

* * *

感谢大家的帮助！我应该在我的问题中提供更多细节，它实际上与 GUI 中的按钮有关。非常感谢 Igor Rodriguez，他的回答是正确的 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:56:55.323

您的数组不能是字符串类型。它必须是颜色类型：

```
Color[]  colors = new Color[] {Color.BLACK, Color.YELLOW, Color.ORANGE};
setBackground(colors[0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:53:24.430

假设您的意思是`java.awt.Color`，您的数组`color`不是该类的字段。采用：

```
setBackground(colors[1]); 
```

在这种情况下，[您将需要有效的`Color`对象](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setBackground%28java.awt.Color%29)而不是`Strings`，您可以使用：

```
Color[] colors = {Color.BLACK, Color.YELLOW, Color.ORANGE}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T13:54:07.380

只需使用数组表示法：

```
setBackground(colors[0]);
setBackground(colors[1]);
setBackground(colors[2]); 
```

但我认为你想要这样的东西：

```
object.setBackground(Color.black); 
```

其中 object 是您要更改颜色的元素。（假设您使用的是[java.awt.Color](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/class-use/Color.html)）

# jquery - jQuery mobile 跨域请求

> ID：15175223
> 
> 赞同：1
> 
> 时间：2013-03-02T13:51:59.717
> 
> 标签：jquery, ajax, json, cordova, jquery-mobile

我有 jQuery 移动应用程序，当用户成功登录时，我必须显示通过 Ajax 和 json 动态解析加载的多页模板内容。

现在，当我调用 Ajax 时，它总是只进入错误部分。但我在谷歌浏览器控制台中检查了错误部分收到了返回值。那么为什么它不会成功阻止

这是我的代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
        <title>Insert title here</title>

        <script>
            (function($) {

                $.fn.getPageData = function() {
                    var finalData = "";

                    $.ajax({
                        url : "http://india.msg91.com/api/androidRoute4.php?user=admin_sapna&password=***********",
                        type : "GET",
                        success : function(data) {

                            finalData = '<div id="index" data-role="page" data-url="index" tabindex="0" class="ui-page ui-body-c ui-page-active" style="min-height: 386px;"><div data-role="header" class="ui-header ui-bar-a" role="banner"><h3 class="ui-title" role="heading" aria-level="1">First Page</h3></div></div>';

                        },
                        error : function(result) {
                            finalData = '<div id="index" data-role="page" data-url="index" tabindex="0" class="ui-page ui-body-c ui-page-active" style="min-height: 386px;"><div data-role="header" class="ui-header ui-bar-a" role="banner"><h3 class="ui-title" role="heading" aria-level="1">Error Page</h3></div></div>';

                        }
                    });
                    this.append(finalData);

                };

            })(jQuery);
            $(document).ready(function() {

                $('body').getPageData();
                //$(a).appendTo("body");
            });
        </script>

    </head>
    <body>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T18:59:06.633

从您之前关于同一问题的帖子中，我认为问题在于您收到错误：Access-Control-Allow-Origin 不允许 Origin null。

当您的客户端尝试从与客户端所在域不同的服务器请求数据时，会出现此错误。您可能希望使用 CORS 或 JSONP 技术（仅支持 GET 请求）来处理此问题。

关于**CORS**，您可能需要阅读来自 Mozilla Developer Network的[Access_control_CORS文档。](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)

**JSONP**用于从位于不同域中的服务器请求数据。它允许客户端发出使用标准 AJAX 技术不允许的跨站点请求。我们需要这种技术来访问来自不同域的数据，更具体地说，如果协议、端口号、主机与请求数据的位置不同。这些跨站点请求与返回 JSON 格式数据以及一些额外填充的服务交互。这就是为什么它被称为 JSONP（JSON 和 Padding）。

JSON 有效负载类似于：`{ "id" : "test", "message": "test message"}`. JSONP 有效负载是包装在函数调用中的 JSON 格式对象，例如：`jsonpCallback( { "id" : "test", "message": "test messsage"});`

以下示例基于您的代码。您应该检查服务器上的服务是否返回了一个 JavaScript 函数调用（回调），其中 JSON 数据作为参数传入（例如：）`jsonpCallback( { "id" : "test", "message": "test messsage"});`。

```
<!doctype html>
<html lang="en">
   <head>
        <title>jQM JSONP Test</title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
        <script>
            function getData() {
                $.ajax({
                    type: 'GET',
                    url: "http://india.msg91.com/api/androidRoute4.php",
                    contentType: "application/json",
                    dataType: 'jsonp',
                    jsonp : "callback",
                    jsonpCallback: 'jsonpCallback',
                    success: function() {
                       alert('success');
                    },
                    error: function (xhr, ajaxOptions, thrownError) {
                        alert("Error: " + xhr.status + "\n" +
                               "Message: " + xhr.statusText + "\n" +
                               "Response: " + xhr.responseText + "\n" + thrownError);
                    }
                });
            }

            function jsonpCallback(data) {
                // do something with the response
                alert(data);
            }

            $(document).on( "pageinit", "#test-page", function( e ) {
                getData();
            });
        </script>
    </head>
    <body>
        <div id="test-page" data-role="page">
            <div data-role="header">
                <h1><a data-ajax="false" href="/">jQM JSONP Test</a></h1>
            </div>
            <div data-role="content">   
            </div>
        </div>
    </body>
</html> 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:08:59.387

添加数据类型

像这样，例如`dataType: "html"` 你的ajax func然后变成这样

```
$.ajax({
                    url : "http://india.msg91.com/api/androidRoute4.php?user=admin_sapna&password=!Passw0rd",
                    type : "GET",
                    dataType: "html",
                    success : function(data) {

                        finalData = '<div id="index" data-role="page" data-url="index" tabindex="0" class="ui-page ui-body-c ui-page-active" style="min-height: 386px;"><div data-role="header" class="ui-header ui-bar-a" role="banner"><h3 class="ui-title" role="heading" aria-level="1">First Page</h3></div></div>';

                    },
                    error : function(result) {
                        finalData = '<div id="index" data-role="page" data-url="index" tabindex="0" class="ui-page ui-body-c ui-page-active" style="min-height: 386px;"><div data-role="header" class="ui-header ui-bar-a" role="banner"><h3 class="ui-title" role="heading" aria-level="1">Error Page</h3></div></div>';

                    }
                }); 
```

您还可以`console.log("error" + result.status + result.statusText);` 在错误块中添加以尝试找出错误代码和原因

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T15:15:33.520

看看你必须做什么：

`form the docs:`

> 在 jQuery 中学习的第一件事是调用 $(document).ready() 函数中的代码，以便在加载 DOM 后立即执行所有内容。但是，在 jQuery Mobile 中，Ajax 用于在您导航时将每个页面的内容加载到 DOM 中，并且 DOM 就绪处理程序仅针对第一页执行。要在加载和创建新页面时执行代码，您可以绑定到 pageinit 事件。

脚本的顺序应该是这样的：

```
<script src="jquery.js"></script>
<script src="custom-scripting.js"></script>
<script src="jquery-mobile.js"></script> 
```

所以你的代码顺序应该是这样的：

```
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script>
   (function($) {

      $.fn.getPageData = function() {
          var finalData = "";

          $.ajax({
              url : "http://india.msg91.com/api/androidRoute4.php?user=admin_sapna&password=***********",
              type : "GET",
              dataType :'html', //<---------need to specify what should be expected.
              success : function(data) {

              finalData = '<div id="index" data-role="page" data-url="index" tabindex="0" class="ui-page ui-body-c ui-page-active" style="min-height: 386px;"><div data-role="header" class="ui-header ui-bar-a" role="banner"><h3 class="ui-title" role="heading" aria-level="1">First Page</h3></div></div>';

                    },
              error : function(result) {
                        finalData = '<div id="index" data-role="page" data-url="index" tabindex="0" class="ui-page ui-body-c ui-page-active" style="min-height: 386px;"><div data-role="header" class="ui-header ui-bar-a" role="banner"><h3 class="ui-title" role="heading" aria-level="1">Error Page</h3></div></div>';

              }
          });
          this.append(finalData);
        };
        })(jQuery);
        $(document).on('pageinit', function () {
            $('body').getPageData();
        });
    </script>
    <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script> 
```

# textbox - 按下回车时调用 ZK 方法

> ID：15175227
> 
> 赞同：0
> 
> 时间：2013-03-02T13:52:21.187
> 
> 标签：textbox, onchange, zk

我在 zk 中有一个文本框。如果我按下选项卡调用 onChanged 事件。按下回车键时调用 onChange 事件需要做什么？目前，当我按 Enter 时，根本没有发生任何事情。

```
<textbox id="inputWord" width="200px" apply="com.wb.controlers.WBControler" /> 
```

WBControler.java（扩展 GenericForwardComposer）

```
public void onChange$inputWord(Event event) throws Exception {
        Component c = event.getTarget();
        if (c instanceof Textbox) {
            wordTextbox = (Textbox)c;
        }
        if (wordTextbox != null) {
          // do something
        }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:15:57.910

`Enter`键触发 ZK 中的事件`onOK`（'O' 和 'K' 都是大写的）。

ZK 文档在[这里](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/UI_Patterns/Keystroke_Handling)讨论了细节。

使用 a`GenericForwardComposer`您将定义一个事件侦听器，如下所示：

```
public void onOK$inputWord(Event event) {
    // do something
} 
```

使用`SelectorComposer`（在 ZK 6.0 中引入）你可以像这样定义你的事件监听器：

```
@Listen(Events.ON_OK + " = #inputWord")
public void onEnterPressed(Event event) {
    // do something
} 
```

如果您想为多个事件执行单个代码，请查看[Event Forwarding](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/Event_Handling/Event_Forwarding)。例如..

```
// in your controller
@Listen("onQuery = #inputWord")
public void onQuery(Event event) {
    // do something
}

// in your zul file
<texbox id="inputWord" forward="onOK=onQuery, onChange=onQuery" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-12T09:03:11.550

试试这个，

```
<script>
    <![CDATA[

    $( window ).load(function() { 
    if(document.getElementsByClassName('textboxLogin')[0]!=null){
    document.getElementsByClassName('textboxLogin')[0].addEventListener('keyup',
    onKeyUpAcces, false); }

    if(document.getElementsByClassName('textboxLogin')[1]!=null){
        document.getElementsByClassName('textboxLogin')[1].addEventListener('keyup',
        onKeyUpAcces, false); }

    });

    function onKeyUpAcces(e) {
        console.log('onkeyUp');
        if (e.keyCode == 13) {
            if(document.getElementById('f')!=null){
                document.getElementById('f').submit();
            }
        }
    }

    ]]>
</script> 
```

# drupal - 2 个显示相同节点的菜单

> ID：15175230
> 
> 赞同：0
> 
> 时间：2013-03-02T13:52:35.607
> 
> 标签：drupal, drupal-7, drupal-navigation

我正在构建一个需要特定菜单结构的 Drupal 站点。

2 个菜单链接，“最近的工作”和“档案”

单击最近的工作时，“最近的文章”列表会显示为页面侧边栏中的菜单。但是，当单击该侧边栏中的链接标题时，我希望路径为 .com/recent-work/node-1 并且侧边栏的“最近工作”列表仍然存在。

单击存档时，所有节点的列表将显示在侧边栏中，单击链接标题后，完整节点将显示路径为 .com/archives/node-1，侧边栏的“存档”列表仍然存在。

这样做的目的是当用户查看特定节点类型时，使工作列表留在屏幕上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T06:02:41.130

假设侧边栏中的视图是放置在侧边栏区域中的块，我认为您可以这样做：

1.  使用 Path 模块（在核心中）为每个节点创建两个 URL 别名。所以 node/1 的别名是：
    *   最近的工作/1
    *   档案/1
2.  使用[Context 模块](http://drupal.org/project/context)，创建两个上下文，一个用于最近的工作，一个用于存档。这些将根据 URL 路径中的内容（使用通配符）影响页面布局。例如：
    *   最近工作上下文：如果 path = recent-work/* 然后在侧边栏中显示“最近工作”视图。
    *   档案上下文：如果 path = archives/* 然后在侧边栏中显示“档案”视图。
3.  确保每个视图中的链接指向相应的别名。这意味着如果链接位于最近工作视图中，则该链接应转到最近工作/1（对于档案视图也是如此）。去做这个：
    *   为“内容：Nid”的每个视图添加一个字段，但将其从显示中排除（需要它作为标记）
    *   编辑您作为链接显示的字段，然后转到*Rewrite Results > Output this field as a Link*。然后在您输入链接路径的地方，使用带有节点 ID 令牌的 URL。我认为它类似于：**archives/[nid]**（或**最近的工作/[nid]**，对于另一种观点）。

这应该涵盖你正在寻找的一切。如果在创建未来内容时，您能够从步骤 1 中自动构建别名，那将是非常巧妙的。如果您对此感兴趣，您可以从[这篇文章中获得一些想法。](http://drupal.org/node/457842)

# node.js - 节点 HTTP 代理路由表否则/未找到

> ID：15175232
> 
> 赞同：0
> 
> 时间：2013-03-02T13:52:39.767
> 
> 标签：node.js, node-http-proxy

我有一个`node-http-proxy`使用代理表配置的服务器：

```
var options = {
  router: {
    'a' : '127.0.0.1:81',
    'b': '127.0.0.1:82',
    'c': '127.0.0.1:83',
    'else' : '127.0.0.1:5000'
  }
};

httpProxy.createServer(options).listen(80); 
```

`hostname`如果既不是 a、b 或 c 来使用服务器，有没有办法运行它`else`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T11:59:42.070

在您提出问题时这可能是不可能的，但路由表现在支持正则表达式：

```
var options = {
  router: {
    'a' : '127.0.0.1:81',
    'b': '127.0.0.1:82',
    'c': '127.0.0.1:83',
    '.*' : '127.0.0.1:5000'
  }
}; 
```

# php - 快速 PHP/RegEx 函数查找字母

> ID：15175242
> 
> 赞同：-2
> 
> 时间：2013-03-02T13:53:42.260
> 
> 标签：php, regex

我有一个只能包含字母的字符串，所以我只需要一个小函数，如果只有字母，则返回 true，如果其中有数字，则返回 false。

我有：

```
function checkstring( $stringvar ){
   if(preg_match("/\d/", $stringvar))
   return false;
   return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:56:21.860

这应该有效。

```
function checkstring($stringvar){
  return ! preg_match("/[^a-zA-Z]/", $stringvar)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:07:13.863

你可以这样做：

```
function checkstring( $stringvar ) {
    return ( 1 == preg_match( '/^[a-z]*$/i', $stringvar ) );
} 
```

代表`[a-z]`字母。在这里，您可以添加您想要允许的任何字符。如果字符串包含不允许的字符，该函数将返回 false。and 处的修饰符`i`使您的字符不区分大小写，如果您想区分大小写，只需将其删除。

# xslt - 在 xslt 中的新节点下对元素进行分组

> ID：15175243
> 
> 赞同：1
> 
> 时间：2013-03-02T13:53:44.223
> 
> 标签：xslt, grouping

我需要将一些元素组合在一起并将它们放在一个新元素下。

下面是一个示例记录，我想将地址信息组合到一个附加层中。

这是原始记录-

```
 <Records>
    <People>
     <FirstName>John</FirstName>  
     <LastName>Doe</LastName>  
     <Middlename />
     <Age>20</Age>  
     <Smoker>Yes</Smoker>  
     <Address1>11 eleven st</Address1>  
     <Address2>app 11</Address2>
     <City>New York</City>
     <State>New York</State>
     <Status>A</Status>
    </People>
  </Records> 
```

预期结果：我需要将地址数据分组在一个新元素下 -

```
 <Records>
    <People>
     <FirstName>John</FirstName>  
     <LastName>Doe</LastName>  
     <Middlename />
     <Age>20</Age>  
     <Smoker>Yes</Smoker>
     <Address>       
       <Address1>11 eleven st</address1>  
       <Address2>app 11</address2>
       <City>New York</City>
       <State>New York</State>
     </Address>       
     <Status>A</Status>
    </People>
  </Records> 
```

任何帮助都会很棒！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:39:11.637

这应该这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="@* | node()" name="copy">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="People">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()[not(self::Address1 or 
                                                   self::Address2 or 
                                                   self::City or 
                                                   self::State)]" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="Smoker">
    <xsl:call-template name="copy" />
    <Address>
      <xsl:apply-templates select="../Address1 | 
                                   ../Address2 | 
                                   ../City | 
                                   ../State" />
    </Address>
  </xsl:template>
</xsl:stylesheet> 
```

在您的输入 XML 上运行时，这会产生：

```
<Records>
  <People>
    <FirstName>John</FirstName>
    <LastName>Doe</LastName>
    <Middlename />
    <Age>20</Age>
    <Smoker>Yes</Smoker>
    <Address>
      <Address1>11 eleven st</Address1>
      <Address2>app 11</Address2>
      <City>New York</City>
      <State>New York</State>
    </Address>
    <Status>A</Status>
  </People>
</Records> 
```

# php - 复选框数组 html php

> ID：15175246
> 
> 赞同：2
> 
> 时间：2013-03-02T13:54:03.497
> 
> 标签：php, html, forms, web

我在表单中获取复选框然后传递给 .php 文件时遇到了很多麻烦。html 看起来像

```
<td><label for="services">Services Requested:</label></td>
<td><form name="services" action="processForm.php" method="post">
          <input type="checkbox" name="services[]" value="Massage" />Massage
          <input type="checkbox" name="services[]" value="Facial" />Facial
          <input type="checkbox" name="services[]" value="Manicure" />Manicure
          <input type="checkbox" name="services[]" value="Pedicure" />Pedicure
          </form>
      </td></tr> 
```

我`$services = $_POST['services'];`马上在 processForm.php 中设置。但是这个存在于 processForm.php 中的错误仍然每次都会出现。

```
if(empty($services)) {
$errors[] = "You must choose at least one service."; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T14:14:38.680

尝试更改复选框的名称。它们与表单同名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T14:35:43.407

`submit`按钮只是代表它的标签`form`，所以只是为了确保你没有做这样的事情，是吗？

```
<form>
    <!-- HTML Tags -->
    <form name="services" action="form.php" method="post">
        <input type="checkbox" name="services[]" value="Massage" />Massage
        <input type="checkbox" name="services[]" value="Facial" />Facial
        <input type="checkbox" name="services[]" value="Manicure" />Manicure
        <input type="checkbox" name="services[]" value="Pedicure" />Pedicure
    </form>
    <!-- HTML Tags -->
    <input type="submit" value="enviar" />
</form> 
```

如果是这样，你不应该那样做。相反，只创建一个`form`包含所有字段的标签！

# c++ - 基于 GLSL 的投影/模型视图使对象不可见

> ID：15175250
> 
> 赞同：0
> 
> 时间：2013-03-02T13:54:21.530
> 
> 标签：c++, opengl, 3d, glsl, shader

因此，我正在尝试在 OpenGL 中迁移到更现代、基于着色器的渲染系统，据我所知，其中一部分是执行过去通过旧 OpenGL 中的内置矩阵堆栈完成的投影，而不是馈送我自己的矩阵到着色器。这是我的着色器（抱歉，由于某种原因，我无法让空格出现在代码格式中）：

```
//Vertex

attribute vec3 coord3d;
attribute vec3 v_color;
varying vec3 f_color;
uniform mat4 projection;
uniform mat4 model;
uniform mat4 view;

void main(void) 
{
        gl_Position = projection * view * model * vec4(coord3d, 1.0);
        f_color = v_color;
}

//Fragment

varying vec3 f_color;

void main(void) 
{
    gl_FragColor = vec4(f_color.x, f_color.y, f_color.z, 1.0);
} 
```

不过，我遇到了一些问题，因为投影和/或视图矩阵的乘法使我的测试对象消失了。如果我将着色器更改为：

```
gl_Position = model * vec4(coord3d, 1.0); 
```

对象按预期显示在屏幕上，平坦且相对于屏幕的 [-1, 1] 空间定位。让我们一步一步来。

我有三个相关的类，我们称它们为场景、对象和相机。在 Scene 的构造函数中，设置了这些 GLuint：

```
//Model - must be changed for each model
Object::ModelUniform = glGetUniformLocation(ObjectShader, "model");

//View - must be changed once per frame
m_ViewUniform = glGetUniformLocation(ObjectShader, "view");

//Projection - must only be set once    
m_ProjectionUniform = glGetUniformLocation(ObjectShader, "projection");
glm::mat4 projection = glm::perspective(60.0f, 1.33f, 0.1f, 512.f);
glUniformMatrix4fv(m_ProjectionUniform, 1, GL_FALSE, glm::value_ptr(projection)); 
```

然后，每帧一次（仍在场景中；我在后台有其他对象在旧着色器+glMultMatrixf（）代码上运行，但我认为两者之间没有任何交互）：

```
glm::vec3 Eye = glm::vec3(CameraPos.x, CameraPos.y, CameraPosz);

glm::vec3 Center = glm::vec3(ObjectPos.x, ObjectPos.y, ObjectPosz);

glm::vec3 Up = glm::vec3(0.0, 1.0, 0.0);

glm::mat4 view = glm::lookAt(Eye, Center, Up);
glUniformMatrix4fv(m_ViewUniform, 1, GL_FALSE, glm::value_ptr(view));
glUseProgram(ObjectShader);
Object->Cycle(); 
```

然后，在 Object::Cycle() 中：

```
glm::mat4 model = glm::translate(glm::mat4(1.0f), glm::vec3(Position.x, Position.y, Position.z));
glUniformMatrix4fv(Object::ModelUniform, 1, GL_FALSE, glm::value_ptr(model));
glEnableVertexAttribArray(CoordinateAttribute);
glBindBuffer(GL_ARRAY_BUFFER, m_VertexBuffer);
glVertexAttribPointer(CoordinateAttribute, 3, GL_FLOAT, GL_FALSE, 6 * sizeof(GLfloat), 0);

glEnableVertexAttribArray(ColorAttribute);
glBindBuffer(GL_ARRAY_BUFFER, m_VertexBuffer);
glVertexAttribPointer(ColorAttribute, 3, GL_FLOAT, GL_FALSE, 6 * sizeof(GLfloat), (GLvoid*) (3 * sizeof(GLfloat)));

glDrawArrays(GL_TRIANGLES, 0, 6);

glDisableVertexAttribArray(ColorAttribute);
glDisableVertexAttribArray(CoordinateAttribute);

glDisable(GL_BLEND);

glBindBuffer(GL_ARRAY_BUFFER, 0); 
```

*我使用的所有*矩阵都可以在旧 OpenGL 中使用已弃用的函数（如 glMultMatrixf()）正常工作。

如上所述，仅使用模型矩阵可以正常工作。旋转相机不会找到丢失的对象。

这里可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T16:39:27.870

这里：

```
glUniformMatrix4fv(m_ProjectionUniform, 1, GL_FALSE, glm::value_ptr(projection)); 
```

和这里

```
glm::mat4 view = glm::lookAt(Eye, Center, Up);
glUniformMatrix4fv(m_ViewUniform, 1, GL_FALSE, glm::value_ptr(view));
glUseProgram(ObjectShader);
Object->Cycle(); 
```

您正在设置视图，但在执行此操作*后*激活了着色器。也许您对投影矩阵有同样的问题，但我无法从您的代码中看出。着色器需要处于活动状态才能在其上设置制服。在设置这些时，您可能只是没有着色器绑定。另一方面，仅从您发布的位来看，着色器可能始终处于活动状态，因此这将在第一帧之后起作用。这是不可能告诉你的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T14:29:28.163

试试这个：

```
uniform mat4 ModelView;
uniform mat4 ProjectionView;

in vec4 position;

void main()
{
    gl_Position = ProjectionView * ModelView * position ;
} 
```

矩阵乘法在 OpenGL 中从右到左进行。

# python - 更改颜色条标题的位置

> ID：15175254
> 
> 赞同：1
> 
> 时间：2013-03-02T13:55:15.777
> 
> 标签：python, matplotlib, wxpython

我创建了一个水平颜色条，当我使用`set_title("blabla")`它时，将标题放在着色器上方。无论如何我可以在颜色栏的一侧有标题。因此，不要将标题放在 x 轴上方，而是将其放在 y 轴的一侧。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T14:17:56.307

我不确定这是否正是您想要的，但`set_title`您可以使用命令而不是使用该`set_ylabel`命令，因为这会将“标题”放在`y`-axis的一侧

```
 set_ylabel('blabla') 
```

或者，您可以使用[`position`](http://matplotlib.org/api/artist_api.html#matplotlib.text.Text.set_position)属性 ( `(0, 0) == (x=0, y=0)`)

```
 set_title('blabla', position=(0, 0)) 
```

但这并不能保证`colorbar`and`title`不会重叠。

# c++ - 管理器类中的共享指针损坏/不正确？

> ID：15175264
> 
> 赞同：1
> 
> 时间：2013-03-02T13:55:51.407
> 
> 标签：c++, shared-ptr

抱歉，如果这很明显，我会尝试提供一个最小的例子，因为我在过去的一个小时里一直在努力解决这个问题，我确信这很简单。

我有以下内容：

```
class Table { /* implementation superfluous */ };
typedef boost::shared_ptr<Table> TablePtr; 
```

后来，在一个数据库类中：

```
class Database{
    typedef std::map<std::wstring, TablePtr> table_map_type;
    table_map_type tableCache_;
}; 
```

我定义了一个运算符来获取一个表：

```
TablePtr Database::operator[](const std::wstring& name) {
    table_map_type::iterator it(tableCache_.find(name));
    if(it != tableCache_.end())
        return it->second;

    // not found, create
    TablePtr ret(new Table());
    tableCache_[name] = ret;
    return ret;
}; 
```

现在发生的事情是，在我第一次打电话时，这很好。没有找到具有给定表名的任何内容，它被创建 - 放置在地图中，并在共享指针中返回。

这个问题稍后会出现，当我回到同一个实例并寻找相同的名称时。它正确地找到它，然后返回`return it->second`。然而，对该对象的下一个直接调用飞入了恶魔和鼻子，并带有一个不是创建的对象。

我确定我遗漏了一些明显的东西。提前致谢。

**编辑**

由于我的最小代码示例有效，我将不得不更深入地挖掘。看来，即使是第一个插入也不能正常工作。在上述`operator[]`函数中，`TablePtr`构造函数在其中包含一个有效的表对象（因为内部名称显示为`L"_contract"`。我做了一个简单的测试行：

```
db::TablePtr first((*db)[L"_contract"]); 
```

在该函数中，表名是`_contract`. 在调试器中检查`first`，显示一个表名`L""`. 某处出了差错。试图获得更多代码以在实际类之外重现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:56:17.123

向所有善意评论的人道歉。像往常一样，当您盯着屏幕太久（该休息一下？）时会发生这种情况。事实证明，我在表中存储了对表名的引用，而不是复制它。这意味着当 (L"_contract") 超出范围（乱序？）时，它实际上已经死了——因此是后一个问题。

感谢所有困惑地看着这个问题的人。

# css - 上标列表项

> ID：15175269
> 
> 赞同：4
> 
> 时间：2013-03-02T13:56:20.207
> 
> 标签：css

我想要一个使用上标的有序列表，所以在我的html中是这样的：

```
<ol class="sup_n">
<li><p>Item 1</p></li>
<li><p>Item 2</p></li>
<li><p>Item 3</p><p>Item 3b</p></li>
</ol> 
```

但让它看起来像

^(1))第 1 项
^(2))第 2 项
^(3))第 3a
   项 第 3b 项

但是，现有解决方案仅显示它适用于仅包含文本的列表项。当有其他内容（跨度、div、p 标签、图像、其他列表和命名）时，结果并不完全正确。由于我的 html 包含列表“样式”的混合，（一些只有文本，各种标签的混合）我希望它足够灵活，可以处理 li 标签中的任何内容，就好像它是一个“普通”标签一样. 我希望我能说得通，说实话，我不是一个真正的 CSS 向导。

这是我使用的代码（在上面提到的页面上找到了结构思想，为上标添加了样式）：

```
ol.sup_n {
    counter-reset: item;
    margin: 0;
    padding: 0;
    list-style:none;
}

.sup_n li {
    display: block;
    margin-left: 1em;
}

.sup_n li:before {
    content: counter(item) ")";
    counter-increment: item;
    display: inline-block;
    text-align: right;
    width: 3em;
    padding-right: 0.5em;
    margin-left: -3.5em;       
    vertical-align:super;
    font-size:xx-small;
}
```

```
<ol class="sup_n">
<li><p>Item 1</p></li>
<li><p>Item 2</p></li>
<li><p>Item 3</p><p>Item 3b</p></li>
</ol>
```

但只有在列表项中没有子元素时它才能正常工作。如何使它与 li 中的多个不同元素一起使用？该示例仅使用 p 个标签，但实际上它可以是不同的标签。涵盖这些的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T22:14:44.900

在调整了一些东西之后，我自己发现了它。如果有人对这里的代码感兴趣。感谢所有人为我指明正确的方向

```
ol.super {
        counter-reset: item;
        padding: 0;
    	list-style:none;
    }

    .super li:before{
    	content: counter(item) ")";
        counter-increment: item;
    	position: absolute;	
    	vertical-align:super;
    	font-size:xx-small;
    	left: 1em;
    }

    .super li{
    	position: relative;
    	display: block;
    	padding: .0em .0em .0em 1.5em;
    }
```

```
<ol class="super">
<li><p>Item 1</p></li>
<li><p>Item 2</p></li>
<li><p>Item 3</p><p>Item 3b</p></li>
</ol>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:58:04.183

在这里找到了一个可能的解决方案：[http ://www.red-team-design.com/css3-ordered-list-styles](http://www.red-team-design.com/css3-ordered-list-styles)

用这样的代码完成了

```
.rounded-list a:before {
    content: counter(li);
    counter-increment: li;
    position: absolute;
    left: -1.3em;
    top: 50%;
    margin-top: -1.3em;
    background: #87ceeb;
    height: 2em;
    width: 2em;
    line-height: 2em;
    border: .3em solid #fff;
    text-align: center;
    font-weight: bold;
} 
```

通过这个例子，你应该能够做你自己的风格

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-02T14:52:25.627

```
.super span{
    vertical-align:super;
}
```

```
<ol class="super">
<li>Item <span>1</span></li>
<li>Item <span>2</span></li>
<li>Item <span>3</span></li>
</ol>
```

# android - Android二次方程，从编辑文本更改双精度值

> ID：15175273
> 
> 赞同：-1
> 
> 时间：2013-03-02T13:56:35.603
> 
> 标签：android, equation, quadratic

有人可以帮我吗，我正在尝试做一个简单的二次方程应用程序，但我不知道如何让双变量从编辑文本字段中输入的文本中获取值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T13:58:40.690

只需从 EditText 中获取字符串值并将其解析为 Double。

```
double value = Double.parseDouble(myEditText.getText().toString()); 
```

# usb - 安卓手机USB口发送字符

> ID：15175283
> 
> 赞同：1
> 
> 时间：2013-03-02T13:57:02.017
> 
> 标签：usb, uart

我的 android 设备 mmx a89 ninja 手机没有主机控制器。我希望开发一个应用程序，它只会在我的设备的 USB 端口上发送我按下的字符的 ascii 值。

不root设备可以吗？

ascii 值需要以简单的 UART 格式发送。

起始位--->数据--->停止位

如果可以使用 USB 转串口转换器将其转换为 UART，则也可以使用普通 USB 格式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:46:11.810

让我们先退后一步。由于您不是主机控制器，因此您的 USB 端口将连接到一个（可能通过集线器，但这只是管道）。您连接的主机控制器不会期望“起始位 -> 数据 -> 停止位”。这违反了USB规范。

USB-to-serial 转换器似乎可以工作。毕竟，它需要一个串行 USB 数据流，去除 USB 开销，并添加开始和停止位。但一般来说，USB 转串口转换器希望与主机控制器通信。

因此，您需要的是智能外围设备。例如，Raspberry Pi 确实同时具有 USB 主机控制器和 UART。

# java - Spring MVC（无法以正确的顺序实例化我的对象）

> ID：15175284
> 
> 赞同：0
> 
> 时间：2013-03-02T13:57:03.837
> 
> 标签：java, spring, jakarta-ee, spring-mvc, servlet-3.0

我想在我的项目初​​始化之后和任何其他控制器类加载到内存之前立即获取 ServletContext 的实例，然后我想使用 ServletContext 功能，例如：

```
getRealPath(); 
```

这是因为我想解析一个加载 RMI 信息（RMI HOST，RMI 端口）的重要文件

你的解决方案是什么？（请记住，我只需要创建一次该对象，并且应该在我的控制器类实例化之前创建一次，然后我想在我的控制器类方法中的项目中的任何地方获取对该对象的引用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:01:27.203

使用[ServletContextListener](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)。它在应用程序启动和销毁时调用。

# node.js - 我的 node.js + express + socket.io 应用程序有什么问题？

> ID：15175285
> 
> 赞同：0
> 
> 时间：2013-03-02T13:57:07.850
> 
> 标签：node.js, heroku, express, socket.io

我之前设置了我的应用程序，以便它可以正常工作。我最近改变了几件事的顺序，现在它坏了。我希望有人知道使用 socket.io（在 heroku 上）设置节点/快速应用程序的最佳方法。我想我错过了一些东西，因为我似乎无法让它工作。

这是我当前的 app.js 中断：

```
var express = require('express'), 
    app = express.createServer(express.logger()),
    io = require('socket.io'),
    routes = require('./routes'), 
    chatroom = require('./routes/chatroom'), 
    http = require('http'),
    path = require('path');

io.configure(function () {
  io.set("transports", ["xhr-polling"]);
  io.set("polling duration", 10);
});

var socket = io.listen(app);

app.configure(function(){
    app.set('port', process.env.PORT || 3000);
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.use(express.favicon());
    app.use(express.logger('dev'));
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(app.router);
    app.use(express.static(path.join(__dirname, 'public')));
});

app.get('/', routes.index);
app.get('/room/:chatroom', chatroom.create_room);
app.get('/privateroom/:chatroom', chatroom.create_private_room);

var port = process.env.PORT || 3000;
app.listen(port); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T20:22:48.260

这就是我所拥有的

```
/**
 * Module dependencies.
 */

var express = require('express')
  , http = require('http')
  , path = require('path')
  , io = require('socket.io');

var app = express()
  , server = http.createServer(app)
  , io = io.listen(server);

var db = require('./server/db');

/**
 * Config.
 */

    app.configure(function() {
      app.set('port', process.env.PORT || 3000);
      app.set('views', __dirname + '/public/views');
      app.set('view engine', 'ejs');
      app.use(express.favicon(__dirname + '/public/images/favicon.ico'));
      app.use(express.logger('dev'));
      app.use(express.bodyParser());
      app.use(express.methodOverride());
      app.use(express.cookieParser('any-text'));
      app.use(express.session({
        secret: 'any-text'
      }));
      app.use(app.router);
      app.use(express.static(path.join(__dirname, 'public')));
    });

    app.configure('development', function() {
      app.use(function(req, res, next){
        res.send(404, 'Sorry, page not found!');
      });
      app.use(express.errorHandler());
    });

/**
 * App.
 */

    require('./server/routes')(app, db);

    server.listen(app.get('port'), function() {
        console.log("Server listening on port " + app.get('port'));
    });

    require('./server/sockets')(io, db); 
```

有用的链接 [https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x) [http://socket.io/#how-to-use](http://socket.io/#how-to-use)

# xml - 如何合并两个 XML 文件

> ID：15175287
> 
> 赞同：1
> 
> 时间：2013-03-02T13:57:10.240
> 
> 标签：xml, xslt

我有两个xml文件，需要合并成一个xml。这是示例：

原始.xml文件：</p>

```
<employees>
  <employee id="1">
    <name> Name1 </name>
    <email> email1 <email>
  </employee>
  <employee id="2">
    <name> Name2 </name>
    <email> email2 <email>
  </employee>
</employees> 
```

更新.xml 文件：

```
<employees>
        <employee id="2">
            <name> Name2 </name>
            <email> email_New <email>
        </employee>
        <employee id="3">
            <name> Name3 </name>
            <email> email3 <email>
        </employee>
</employees> 
```

它们应该像这样合并到一个 xml 文件中：

```
<employees>
  <employee id="1">
    <name> Name1 </name>
    <email> email1 <email>
  </employee>  
  <employee id="2">
    <name> Name2 </name>
    <email> email_New <email>
  </employee>
  <employee id="3">
    <name> Name3 </name>
    <email> email3 <email>
  </employee>
</employees> 
```

实际上，我想使用 update.xml 来更新 orginal.xml ：

1.  update.xml 中的新员工应添加到 original.xml

2.  update.xml 中修改的员工信息应该覆盖相应的员工节点。

我对 XSLT 知之甚少，但我的知识不足以找出适合合并的 XSLT。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T14:59:12.347

请试一试：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:param name="fileName" select="'update.xml'" />
  <xsl:param name="updates" select="document($fileName)" />

  <xsl:variable name="updateEmployees" select="$updates/employees/employee" />

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="employees">
    <xsl:copy>
      <xsl:apply-templates select="employee[not(@id = $updateEmployees/@id)]" />
      <xsl:apply-templates select="$updateEmployees" />
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

当使用您的第一个 XML 作为输入并使用同一文件夹中存在的 update.xml 运行时，这会产生：

```
<employees>
  <employee id="1">
    <name> Name1 </name>
    <email>
      email1 </email>
  </employee>
  <employee id="2">
    <name> Name2 </name>
    <email>
      email_New
    </email>
  </employee>
  <employee id="3">
    <name> Name3 </name>
    <email>
      email3
    </email>
  </employee>
</employees> 
```

`fileName`并被`updates`声明为参数，因此如果更新位于名为“update.xml”以外的文件中，或者您想直接传递更新 XML，则无需对 XSLT 进行任何修改即可执行此操作。

# javascript - 使用 on change 事件选择值不会改变选项

> ID：15175291
> 
> 赞同：1
> 
> 时间：2013-03-02T13:57:28.523
> 
> 标签：javascript, html

我有问题，我有这个 html 代码

```
<div class="f300_sl">
   <select name="situacao_laboral" class="validate['required'] f300_sl2" onchange="alteraVencimento(this);">
<option> </option>
<option>Conta Própria</option>
<option>Prazo</option>
<option>Quadros</option>
<option>Outra</option>
  </select></div> 
```

我的变更事件如下

```
 function alteraVencimento(estado){
        if(estado.value= (should be ==) 'Conta Própria'){
            document.getElementById('vencimento').innerHTML = 'Volume de Negócio:';
        }
        else{
            document.getElementById('vencimento').innerHTML = 'Vencimento:';
        }
    } 
```

选择按钮不起作用，它总是将值放在“Conta Própria”上

编辑：没关系，= 而不是 ==

对不起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:59:11.737

您正在分配值而不是比较它，请尝试：

```
function alteraVencimento(estado){
    if(estado.value == 'Conta Própria'){
        document.getElementById('vencimento').innerHTML = 'Volume de Negócio:';
    }
    else{
        document.getElementById('vencimento').innerHTML = 'Vencimento:';
    }
} 
```

注意`==`而不是`=`.

`=`分配一个变量

`==`比较

# matlab - Matlab数据：删除列中的负值？

> ID：15175292
> 
> 赞同：0
> 
> 时间：2013-03-02T13:57:29.567
> 
> 标签：matlab

我有一组使用 textscan 从下面显示的代码中提取的数据列：

```
fid = fopen('wam1.txt','r');
C = textscan(fid,'%f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f','headerlines',4,'commentstyle','--');
fclose(fid);
x = C{1}; y1 = C{5}; y2 = C{3}; 
```

对于 y1 和 y2 列的主要部分，我的负值为 -1，没有读数。我的任务是将列中的这些 -1 值替换为 0。

我尝试使用`changem`，但似乎无法正常工作。

有人可以帮忙吗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T16:19:49.937

您可以获得所有 -1 元素的布尔向量`y1==-1`并将它们替换为 0：

```
y2( y2 == -1 ) = 0 
```

# oracle-adf - datacontrols.dcx 文件中包含什么？它是否包含在应用程序的 .war 文件中？

> ID：15175294
> 
> 赞同：-1
> 
> 时间：2013-03-02T13:57:39.773
> 
> 标签：oracle-adf

我知道它`databindings.cpx`有一个`dataControlUsages`节点，其中包含有关`datacontrols`应用程序使用的所有信息的信息。我还了解到，`databindings.cpx`它在运行时充当绑定上下文，其中包含的页面 def 元素在运行时充当每个页面的绑定容器。但也存在一个 datacontrols.cpx 文件。我的问题是：

1.  它是应用程序级文件吗？它的目的是什么？
2.  还是它`ADF specific`并不真正依赖于应用程序？换句话说，如果我使用 ADF 框架的预构建数据控件`datacontrols.cpx`，我的 Web 应用程序文件中是否会有一个文件？`.war`
3.  如果我`datacontrol`为我的应用程序写一个新的，这种情况会改变吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T19:37:15.990

```
回答您的问题
1)DataControls.dcx 不是应用程序级文件
  目的：
  DataControls.dcx 文件用于存储 Java Bean(POJO)、Web 服务的数据控件，
  EJB、URL 服务（即非 ADF BC 组件）

2) 是 DataControls.dcx 是 ADF 特定的，您在普通的 Java Enterprise 应用程序中找不到它

ADF 中没有预先构建的数据控件。数据控件是 ADF 应用程序的一部分
是 ADF 应用程序战争包含 DataControls.dcx 文件

3) 正如上面提到的 ADF 框架没有预建控件。
   如果您在应用程序中创建自己的数据控件，它将可用

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T01:31:03.760

当您创建基于 POJO、Web 服务、EJB 等的自定义数据控件时，datacontrols.dcx 就会存在。它描述或存储有关数据控件的元数据，本质上是通过数据控件面板公开底层服务（例如 POJO、Web 服务）所需的布线，以及运行时设置，以便 ViewController 层知道如何使用它。

此外，随着 JDeveloper 的发展，datacontrols.dcx 中内置了更多功能。您可能从 ADF BC 了解到，您可以为属性构建验证规则和控制提示。这些机制现在也被内置到自定义数据控件中，这样无论您在应用程序中使用哪种数据控件，它都会为消费者提供一组一致且复杂的功能（即 ViewController层）。

在 JDeveloper (11g) 的当前版本中，关于数据控制的文档有些缺乏，但是（没有承诺）这应该在 12c 版本中得到纠正。

# html - 如何通过自定义按钮打开 HTML 选择标签？

> ID：15175299
> 
> 赞同：2
> 
> 时间：2013-03-02T13:57:58.083
> 
> 标签：html, select, triggers

我正在为手机开发一个网页，我需要为选择标签实现自定义设计。我需要在选择标签附近（上方）放置一个按钮，它应该打开“启动”选项。

为了更好地理解，我做了一个截图：

![在此处输入图像描述](../Images/02523008dd1aae4cef1332e617321fad.png)

如果单击红色按钮，它应该打开选择标签。

我尝试了什么：

```
<style type="text/css">
#trigger_button { width:20px;height:20px;background:red;float:left;margin-left:-15px; }
</style>

<body>
    <p>Foo Select</p>

    <table>
    <tr><td>
       <select name='foo_select' style='float:left;' id='foo_select'>
          <option value='1'>test AAAAAAAAAAAAAAAAA 1</option>
          <option value='2'>test BBBBBBBBBBBBBBBBB 2</option>
          <option value='3'>test CCCCCCCCCCCCCCCCC 3</option>
        </select>

        <div id='trigger_button' onclick="$('#foo_select').trigger('click');"></div>
    </td></tr>
    </table>
</body> 
```

**注意！**

在 Android 操作系统上，Chrome 浏览器会像在 PC 上一样做出不同的反应！在 Android Chrome 上，选项显示在不同的可滚动框架中（如弹出窗口）。

这可能吗？我可以使用自定义按钮打开选择标签吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:03:36.170

不要认为这是可能的，但总有解决方法......看看这个

[是否可以使用 JS 打开 HTML 选择以显示其选项列表？](https://stackoverflow.com/questions/430237/is-it-possible-to-use-js-to-open-an-html-select-to-show-its-option-list)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T14:06:23.140

你检查过这个吗？

[http://www.designdim.com/2011/07/10-important-jquery-selectboxdropdown-plugins/](http://www.designdim.com/2011/07/10-important-jquery-selectboxdropdown-plugins/)

也可以使用 JavaScript 或 jQuery

# ruby-on-rails - Collection_Select 没有给我的模型赋值

> ID：15175302
> 
> 赞同：0
> 
> 时间：2013-03-02T13:58:15.360
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

[这是Can't Mass Assign Protected Attributes Error](https://stackoverflow.com/questions/15137173/cant-mass-assign-protected-attributes-error)的后续问题

我正在尝试使用 Colleciton_Select 以便我可以从下拉框中选择 TeacherType，而不是允许用户写入teacherType_id。

`<%= collection_select(:teacherType, :teacherType_id, TeacherType.order('title'), :id, :title, :prompt => true) %>`

但是，当我从下拉菜单中选择一个选项时，它总是说*教师已成功更新*，但教师模型没有任何变化。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:18:51.753

首先，我认为您正在尝试添加`teacherType`to`Teacher`而不是，`TeacherType`因此您应该使用

```
<%= collection_select(:teacher, :teacherType_id, TeacherType.order('title'), :id, :title, :prompt => true) %> 
```

现在，我想提到的第二点，如果您`has_many`在一个模型中具有关联，那么您应该始终在另一个模型中具有`belongs_to`关联。

所以修改`Teacher`模型中的关联定义

```
 has_one :teacherType 
```

至

```
 belongs_to :teacherType 
```

还有一点，将关联名称作为关联模型的下划线复数形式是一种很好的做法。`Convention over configuration is the way rails applications are supposed to be built.`如果在任何情况下您都不能拥有此名称，那么您必须`class_name`为关联定义指定属性。

# magento - Magento：向catalog_product添加静态属性，但不能确保将值保存到它

> ID：15175307
> 
> 赞同：1
> 
> 时间：2013-03-02T13:58:45.897
> 
> 标签：magento, magento-1.7

很多小时以来，我试图找出具有静态属性的 Magento 的奇怪行为。

过了一会儿，我找到了一种在设置脚本中添加静态属性的可靠方法

```
$installer = $this;

$setup = Mage::getModel( 'eav/entity_setup', 'core_setup' );

$installer->startSetup();

// adding the color code attribute as static attribute
$setup->addAttribute( 'catalog_product', 'color_code', array(
    'group'             => 'General',
    'label'             => 'Color Code',
    'note'              => 'the color code',
    'type'              => 'static',
    'input'             => 'text',
    'backend'           => 'eav/entity_attribute_backend_default',
    'source'            => '',
    'frontend'          => '',
    'required'          => false,
    'filterable'        => true,
    'global'            => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL
) );

$installer->getConnection()->addColumn(
    $installer->getTable( 'catalog/product' ),
    'color_code',
    array(
        'type'          => Varien_Db_Ddl_Table::TYPE_TEXT,
        'length'        => 64,
        'comment'       => 'Color Code'
    )
);

$installer->endSetup(); 
```

我要摸索的第一件事：有必要自己将列添加到实体表中......好的。给定的脚本允许我在管理后端有正确的输入，如果指定列中有一个值，它将出现在管理后端的相应输入字段中......这很好:-)

而现在……最大的谜团:-(

**如果我尝试将值保存到新属性，它将不起作用。**好吧，这并不完全正确。一开始它不保留新值。在将整个 Magento 调试到 Varien 和 Zend 类以找到它突然工作的原因之后，无需更改代码中的任何内容。在调试时，我经常重置我的模块并删除和读取属性，还清除缓存并重新索引目录。现在它可以完美运行，即使该属性被一次又一次地删除和读取 oO

为了理解发生了什么，我尝试了一个新的属性`foo`，并且发生了同样的奇怪行为……经过多次调试、检查、咖啡……它也突然起作用了。

对于所有具有测试属性的下一个测试用例`bar`，, `foobar`, `argh`, `grmph`... 一次又一次地发生完全相同的情况。

好的，让我们将安装脚本推送到另一个 Magento 安装，然后...？！...是的，同样的oO

这样我就不能确保我的安装脚本能做到，它的意思是:-(

*信息：我需要静态属性以避免不必要的连接，同时查找具有相同属性（颜色代码）值的其他产品。静态属性基本上在每个集合中都可用，而无需向集合添加特殊属性。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:28:34.450

知道了...

只需要添加

```
$installer->getConnection()->resetDdlCache(); 
```

在安装脚本的最后

# login - Typo3 登录，加盐和 rsa

> ID：15175308
> 
> 赞同：1
> 
> 时间：2013-03-02T13:59:00.270
> 
> 标签：login, rsa, typo3, saltedhash

我们有一个 Typo3 平台，它激活了 fe_login、salted 和 rsa。当我在 BE 中创建 FE 用户并检查 MySQL 用户是否有加盐密码时。在前端，用户使用 RSA 登录，但 fe_login 不起作用......

[http://dev.contextoo.net](http://dev.contextoo.net) - 也许有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:46:50.693

请确保您已在安装工具中为前端“[FE]”和后端“[BE]”设置了 RSA 功能。要检查所有配置是否正确，请查看“TYPO3 后端 -> 报告 -> 状态报告”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T14:02:20.507

你应该有一个存储 FE 用户的 Sys 文件夹，对吧？

您是否在登录表单插件设置中选择了该 Sys 文件夹作为“用户存储页面”？

或者，如果您想通过 TypoScript 进行设置，您可以使用这一行（将 123 替换为您的文件夹 uid）：

```
plugin.tx_felogin_pi1.storagePid = 123 
```

并且：FE 用户需要在 FE 用户组中才能登录！

[http://wiki.typo3.org/Felogin](http://wiki.typo3.org/Felogin)

# html - 增加超链接文本html的字体大小

> ID：15175312
> 
> 赞同：15
> 
> 时间：2013-03-02T13:59:12.760
> 
> 标签：html, css, anchor, font-size

我正在开发使用*href*的网络应用程序。但是与页面相比，它的默认字体太小了。所以我想增加字体的大小。

**我的输出页面如下所示：**

![在此处输入图像描述](../Images/626d541ffdf3ff3872dc118593f052ce.png)

我已经尝试了锚标记的字体大小，但它在字体标记之后没有显示任何效果。

**我试过的代码是：**

```
<font size="100px"><a href="selectTopic?html" style="text-decoration: none">HTML 5</a></font> 
```

那么如何更改字体大小呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-02T14:01:15.910

你可以这样做：

```
a {font-size: 100px} 
```

尽量避免使用字体标签，因为它已被弃用。改用上面的 CSS。您可以为您的锚指定特定类别并为它们应用任何样式。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-02T14:05:33.013

您的`font`标签不正确，因此在某些浏览器中不起作用。该`px`单元与 CSS 一起使用，而不是 HTML 属性。字体标签应如下所示：

```
<font size="100"> 
```

好吧，实际上它根本不应该存在。该`font`标签已弃用，您应该使用 CSS 来设置内容样式，就像您已经使用`text-decoration`:

```
<a href="selectTopic?html" style="font-size: 100px; text-decoration: none">HTML 5</a> 
```

要将内容与样式分开，您当然应该努力将 CSS 放在样式表中，而不是作为内联`style`属性。这样，您可以将一种样式应用于多个元素，而不必`style`在所有元素中放置相同的属性。

例子：

```
<a href="selectTopic?html" class="topic">HTML 5</a> 
```

CSS：

```
.topic { font-size: 100px; text-decoration: none; } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-23T18:05:14.780

增加字体的填充大小，然后尝试增加字体大小：-

```
style="padding-bottom:40px; font-size: 50px;" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T14:05:10.390

您也可以在锚标记中添加类，如下所示

```
.a_class {font-size: 100px} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-06T02:35:46.093

有一种更简单的方法。您将 href 放在刚刚为该 href 创建的段落中。例如：

HREF 名称

# python - Python有什么好的程序集生成模块吗？

> ID：15175315
> 
> 赞同：6
> 
> 时间：2013-03-02T13:59:28.183
> 
> 标签：python, assembly, emit

我正在为 Python 寻找一个好的程序集生成模块。我找到了这个： [PyAsm](http://codeflow.org/entries/2009/jul/31/pyasm-python-x86-assembler/)

但它运作不佳。我想为简单的操作（如加法、减法、除法和乘法）执行和生成汇编可执行文件。.NET 中的 Reflection.Emit 库之类的东西。

我正在Linux（Ubuntu 12.10 64bit）和Python2.7下开发。

例如，当我尝试使用 PyAsm 编译这个简单的子代码时，它给了我一个“分段错误（核心转储）”：

```
from ctypes import c_int
from pyasm import Program
from pyasm.instructions import push, mov, ret, pop, sub
from pyasm.registers import eax, esp, ebp

def test():
    prog = Program(
        push(ebp),
        mov(ebp, esp),
        mov(eax, ebp.addr+8),
        sub(eax, 10),
        pop(ebp),
        ret(),
    )
    fun = prog.compile(c_int, [c_int])
    assert fun(1234) == 1224

if __name__ == '__main__':
    test() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-01T17:22:05.280

不仅仅是一个很棒的名字：[https ://github.com/Maratyszcza/PeachPy](https://github.com/Maratyszcza/PeachPy)

看看它的用途：[http ://www.yeppp.info](http://www.yeppp.info)

# cmake - CMake：如何构建外部项目并包含其目标

> ID：15175318
> 
> 赞同：128
> 
> 时间：2013-03-02T13:59:47.510
> 
> 标签：cmake, external-project

我有一个将静态库作为目标导出的项目 A：

```
install(TARGETS alib DESTINATION lib EXPORT project_a-targets)
install(EXPORT project_a-targets DESTINATION lib/alib) 
```

现在我想将项目 A 用作项目 B 的外部项目并包含其构建目标：

```
ExternalProject_Add(project_a
  URL ...project_a.tar.gz
  PREFIX ${CMAKE_CURRENT_BINARY_DIR}/project_a
  CMAKE_ARGS -DCMAKE_INSTALL_PREFIX:PATH=<INSTALL_DIR>
)

include(${CMAKE_CURRENT_BINARY_DIR}/lib/project_a/project_a-targets.cmake) 
```

问题是项目B的CMakeLists运行时包含文件还不存在。

有没有办法让包含依赖于正在构建的外部项目？

***更新***：我根据这个和我遇到的其他常见问题编写了一个简短的[CMake by Example 教程。](https://mirkokiefer.com/cmake-by-example-f95eb47d45b1)

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-03-02T15:22:15.977

我认为您在这里混合了两种不同的范例。

如您所述，高度灵活的[`ExternalProject`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#module%3aExternalProject)模块在构建时运行其命令，因此您不能直接使用项目 A 的导入文件，因为它仅在安装项目 A 后创建。

如果您想要`include`项目 A 的导入文件，则必须*在*调用项目 B 的 CMakeLists.txt 之前手动安装项目 A - 就像以这种方式或通过`find_file`//添加的任何其他第三方依赖项一样。`find_library``find_package`

如果要使用`ExternalProject_Add`，则需要在 CMakeLists.txt 中添加类似以下内容：

```
ExternalProject_Add(project_a
  URL ...project_a.tar.gz
  PREFIX ${CMAKE_CURRENT_BINARY_DIR}/project_a
  CMAKE_ARGS -DCMAKE_INSTALL_PREFIX:PATH=<INSTALL_DIR>
)

~~include(${CMAKE_CURRENT_BINARY_DIR}/lib/project_a/project_a-targets.cmake)~~

ExternalProject_Get_Property(project_a install_dir)
include_directories(${install_dir}/include)

add_dependencies(project_b_exe project_a)
target_link_libraries(project_b_exe ${install_dir}/lib/alib.lib)
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2017-01-23T11:42:01.717

[这篇文章](https://crascit.com/2015/07/25/cmake-gtest/)有一个合理的答案：

`CMakeLists.txt.in`：

```
cmake_minimum_required(VERSION 2.8.2)

project(googletest-download NONE)

include(ExternalProject)
ExternalProject_Add(googletest
  GIT_REPOSITORY    https://github.com/google/googletest.git
  GIT_TAG           master
  SOURCE_DIR        "${CMAKE_BINARY_DIR}/googletest-src"
  BINARY_DIR        "${CMAKE_BINARY_DIR}/googletest-build"
  CONFIGURE_COMMAND ""
  BUILD_COMMAND     ""
  INSTALL_COMMAND   ""
  TEST_COMMAND      ""
) 
```

`CMakeLists.txt`：

```
# Download and unpack googletest at configure time
configure_file(CMakeLists.txt.in
               googletest-download/CMakeLists.txt)
execute_process(COMMAND ${CMAKE_COMMAND} -G "${CMAKE_GENERATOR}" .
  WORKING_DIRECTORY ${CMAKE_BINARY_DIR}/googletest-download )
execute_process(COMMAND ${CMAKE_COMMAND} --build .
  WORKING_DIRECTORY ${CMAKE_BINARY_DIR}/googletest-download )

# Prevent GoogleTest from overriding our compiler/linker options
# when building with Visual Studio
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)

# Add googletest directly to our build. This adds
# the following targets: gtest, gtest_main, gmock
# and gmock_main
add_subdirectory(${CMAKE_BINARY_DIR}/googletest-src
                 ${CMAKE_BINARY_DIR}/googletest-build)

# The gtest/gmock targets carry header search path
# dependencies automatically when using CMake 2.8.11 or
# later. Otherwise we have to add them here ourselves.
if (CMAKE_VERSION VERSION_LESS 2.8.11)
  include_directories("${gtest_SOURCE_DIR}/include"
                      "${gmock_SOURCE_DIR}/include")
endif()

# Now simply link your own targets against gtest, gmock,
# etc. as appropriate 
```

但是，它看起来确实很hacky。我想提出一个替代解决方案 - 使用 Git 子模块。

```
cd MyProject/dependencies/gtest
git submodule add https://github.com/google/googletest.git
cd googletest
git checkout release-1.8.0
cd ../../..
git add *
git commit -m "Add googletest" 
```

然后，`MyProject/dependencies/gtest/CMakeList.txt`您可以执行以下操作：

```
cmake_minimum_required(VERSION 3.3)

if(TARGET gtest) # To avoid diamond dependencies; may not be necessary depending on you project.
    return()
endif()

add_subdirectory("googletest") 
```

我还没有广泛尝试过，但它看起来更干净。

编辑：这种方法有一个缺点：子目录可能会运行`install()`您不想要的命令。[这篇文章有一种禁用它们的方法，](https://stackoverflow.com/questions/35344132/cpack-exclude-install-commands-from-subdirectory-googletest-directory)但它有问题并且对我不起作用。

编辑2：如果您使用`add_subdirectory("googletest" EXCLUDE_FROM_ALL)`它似乎意味着`install()`默认情况下不使用子目录中的命令。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-05-09T20:09:32.363

编辑：CMake 现在对此具有内置支持。请参阅使用[FetchContent的](https://cmake.org/cmake/help/latest/module/FetchContent.html)[新答案](https://stackoverflow.com/a/60606636/28275)。

您还可以在辅助 make 过程中强制构建依赖目标

请参阅我对相关主题[的回答。](https://stackoverflow.com/a/23570741/28275)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-06-07T15:09:55.727

我正在寻找类似的解决方案。此处的回复和顶部的教程提供了丰富的信息。我研究了这里提到的帖子/博客以成功建立我的。我发布了完整的 CMakeLists.txt 为我工作。我想，这将有助于作为初学者的基本模板。

`"CMakeLists.txt"`

```
cmake_minimum_required(VERSION 3.10.2)

# Target Project
project (ClientProgram)

# Begin: Including Sources and Headers
include_directories(include)
file (GLOB SOURCES "src/*.c")
# End: Including Sources and Headers

# Begin: Generate executables
add_executable (ClientProgram ${SOURCES})
# End: Generate executables

# This Project Depends on External Project(s) 
include (ExternalProject)

# Begin: External Third Party Library
set (libTLS ThirdPartyTlsLibrary)
ExternalProject_Add (${libTLS}
PREFIX          ${CMAKE_CURRENT_BINARY_DIR}/${libTLS}
# Begin: Download Archive from Web Server
URL             http://myproject.com/MyLibrary.tgz
URL_HASH        SHA1=<expected_sha1sum_of_above_tgz_file>
DOWNLOAD_NO_PROGRESS ON
# End: Download Archive from Web Server

# Begin: Download Source from GIT Repository
#    GIT_REPOSITORY  https://github.com/<project>.git
#    GIT_TAG         <Refer github.com releases -> Tags>
#    GIT_SHALLOW     ON
# End: Download Source from GIT Repository

# Begin: CMAKE Comamnd Argiments
CMAKE_ARGS      -DCMAKE_INSTALL_PREFIX:PATH=${CMAKE_CURRENT_BINARY_DIR}/${libTLS}
CMAKE_ARGS      -DUSE_SHARED_LIBRARY:BOOL=ON
# End: CMAKE Comamnd Argiments    
)

# The above ExternalProject_Add(...) construct wil take care of \
# 1\. Downloading sources
# 2\. Building Object files
# 3\. Install under DCMAKE_INSTALL_PREFIX Directory

# Acquire Installation Directory of 
ExternalProject_Get_Property (${libTLS} install_dir)

# Begin: Importing Headers & Library of Third Party built using ExternalProject_Add(...)
# Include PATH that has headers required by Target Project
include_directories (${install_dir}/include)

# Import librarues from External Project required by Target Project
add_library (lmytls SHARED IMPORTED)
set_target_properties (lmytls PROPERTIES IMPORTED_LOCATION ${install_dir}/lib/libmytls.so)
add_library (lmyxdot509 SHARED IMPORTED)
set_target_properties(lmyxdot509 PROPERTIES IMPORTED_LOCATION ${install_dir}/lib/libmyxdot509.so)

# End: Importing Headers & Library of Third Party built using ExternalProject_Add(...)
# End: External Third Party Library

# Begin: Target Project depends on Third Party Component
add_dependencies(ClientProgram ${libTLS})
# End: Target Project depends on Third Party Component

# Refer libraries added above used by Target Project
target_link_libraries (ClientProgram lmytls lmyxdot509) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-28T12:46:40.213

cmake`ExternalProject_Add`确实可以使用，但我不喜欢它 - 它在构建、连续轮询等期间执行某些操作……我更愿意在构建阶段构建项目，仅此而已。我曾`ExternalProject_Add`多次尝试覆盖，不幸的是没有成功。

然后我也尝试添加 git 子模块，但这会拖拽整个 git 存储库，而在某些情况下，我只需要整个 git 存储库的子集。我检查过的内容 - 确实可以执行稀疏 git checkout，但这需要单独的函数，我在下面写了。

```
#-----------------------------------------------------------------------------
#
# Performs sparse (partial) git checkout
#
#   into ${checkoutDir} from ${url} of ${branch}
#
# List of folders and files to pull can be specified after that.
#-----------------------------------------------------------------------------
function (SparseGitCheckout checkoutDir url branch)
    if(EXISTS ${checkoutDir})
        return()
    endif()

    message("-------------------------------------------------------------------")
    message("sparse git checkout to ${checkoutDir}...")
    message("-------------------------------------------------------------------")

    file(MAKE_DIRECTORY ${checkoutDir})

    set(cmds "git init")
    set(cmds ${cmds} "git remote add -f origin --no-tags -t master ${url}")
    set(cmds ${cmds} "git config core.sparseCheckout true")

    # This command is executed via file WRITE
    # echo <file or folder> >> .git/info/sparse-checkout")

    set(cmds ${cmds} "git pull --depth=1 origin ${branch}")

    # message("In directory: ${checkoutDir}")

    foreach( cmd ${cmds})
        message("- ${cmd}")
        string(REPLACE " " ";" cmdList ${cmd})

        #message("Outfile: ${outFile}")
        #message("Final command: ${cmdList}")

        if(pull IN_LIST cmdList)
            string (REPLACE ";" "\n" FILES "${ARGN}")
            file(WRITE ${checkoutDir}/.git/info/sparse-checkout ${FILES} )
        endif()

        execute_process(
            COMMAND ${cmdList}
            WORKING_DIRECTORY ${checkoutDir}
            RESULT_VARIABLE ret
        )

        if(NOT ret EQUAL "0")
            message("error: previous command failed, see explanation above")
            file(REMOVE_RECURSE ${checkoutDir})
            break()
        endif()
    endforeach()

endfunction()

SparseGitCheckout(${CMAKE_BINARY_DIR}/catch_197 https://github.com/catchorg/Catch2.git v1.9.7 single_include)
SparseGitCheckout(${CMAKE_BINARY_DIR}/catch_master https://github.com/catchorg/Catch2.git master single_include) 
```

我在下面添加了两个函数调用，只是为了说明如何使用该函数。

有人可能不喜欢检查主干/主干，因为那个可能被破坏了——那么总是可以指定特定的标签。

检出只会执行一次，直到您清除缓存文件夹。

# visual-c++ - CRC32C SSE 与 BOOST

> ID：15175324
> 
> 赞同：2
> 
> 时间：2013-03-02T13:59:58.727
> 
> 标签：visual-c++, boost, sse

我正在尝试优化我的一段运行 CRC32 检查的代码。

对于测试缓冲区，我执行了以下操作：

```
char *buff = new char[1024];
for (int i = 0; i < 1024; ++i)
    buff[i] = i; 
```

目前，我正在使用 boost 的 crc 实现，如下所示：

```
boost::crc_optimal<32, 0x1EDC6F41, 0, 0> crc;
crc.process_bytes(buff, 1024);
unsigned int boostCRC = crc(); 
```

这意味着多项式“0x1EDC6F41”，初始值为 0，最终异或为 0。

然后，我编写了最简单的 sse4.2 版本的 crc32c 算法：

```
unsigned int sseCRC = 0;
for (char *iter = buff, *end = buff + 1024; iter != end; ++iter)
    sseCRC = _mm_crc32_u8(sseCRC, *iter); 
```

问题是，即使多项式应该相同，最终值也不匹配。有没有人有这方面的经验？我对 sse 版本做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-18T10:19:07.190

根据[英特尔® SSE4 编程参考](http://softwarecommunity.intel.com/isn/Downloads/Intel%20SSE4%20Programming%20Reference.pdf)，CRC 指令执行位反射，在 boost CRC 模板中默认关闭。使用

```
boost::crc_optimal<32, 0x1EDC6F41, 0, 0, true, true> crc; 
```

代替

```
boost::crc_optimal<32, 0x1EDC6F41, 0, 0> crc; 
```

将产生与 SSE 版本相同的校验和。

# ios - 将 UIButton 放在 UIView 的顶部

> ID：15175326
> 
> 赞同：0
> 
> 时间：2013-03-02T14:00:13.397
> 
> 标签：ios, objective-c, uitableview, uibutton, storyboard

我计划有一个视图控制器、一个表格视图（3 个部分）和 3 个按钮。我不知道我是否可以将按钮 1 放在 table view 和 table view 的顶部（正好在第 1 部分的顶部），按钮 2 在第 2 部分的顶部，按钮 3 在第 3 部分的顶部.

而且我还希望当人们向下滚动时，按钮 1 仍然在顶部，直到它遇到按钮 2 -> 按钮 2 将在顶部，当它遇到按钮 3 时，按钮 3 将在顶部。

你能帮我做我想做的事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:07:35.623

这是一个可能适合您的示例。在你的`UITableViewController`，也应该是你的`UITableViewDelegate`，实现以下代码：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    UIButton *button = nil;
    UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0,self.view.frame.size.width, HEADER_HEIGHT)];
    switch (section) {
        case 0:
            button = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, BUTTON1_WIDTH, HEADER_HEIGHT)];
            [button addTarget:self action:@selector(SELECTOR1) forControlEvents:UIControlEventTouchUpInside];
            // do some more things
            break;
        case 1:
            button = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, BUTTON2_WIDTH, HEADER_HEIGHT)];
            [button addTarget:self action:@selector(SELECTOR2) forControlEvents:UIControlEventTouchUpInside];
            // do some more things
            break;
        case 2:
            button = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, BUTTON3_WIDTH, HEADER_HEIGHT)];
            [button addTarget:self action:@selector(SELECTOR3) forControlEvents:UIControlEventTouchUpInside];
            // do some more things
            break;
        default:
            // do default things
            break;
    }

    [headerView addSubview:button];
    return headerView;
} 
```

不要忘记实现这一点：

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return HEADER_HEIGHT;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:15:01.380

使用 bringSubviewToFront: 方法并在 viewDidLoad 方法中编写以下代码。

```
[self.view bringSubviewToFront:yourButton]; 
```

我想这会对你有所帮助。

# wpf - Windows Phone：在代码中编辑 DataTemplate 的项目

> ID：15175327
> 
> 赞同：0
> 
> 时间：2013-03-02T14:00:30.900
> 
> 标签：wpf, windows-phone-7, xaml, datatemplate

我的 xaml 中有这个 DataTemplate

```
<phone:PhoneApplicationPage.Resources>
    <DataTemplate x:Key="DataTemplate1">
        <Grid d:DesignWidth="485" d:DesignHeight="166" Height="104" Width="456">
            <StackPanel Margin="92,0,0,1">
                <TextBlock x:Name="nTitle" Text="{Binding title}" FontSize="18.667"/>
            </StackPanel>
        </Grid>
    </DataTemplate>
</phone:PhoneApplicationPage.Resources> 
```

我想在代码中编辑名为“nTitle”的 TextBlock 的 fontSize 属性。我这样做了，但后来我不知道该怎么做：

```
DataTemplate template = (DataTemplate)this.Resources["DataTemplate1"];
//template.??? 
```

实际上我想在用户按下按钮时增加字体大小。这是错误的做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:33:07.097

是的，这将是一个糟糕的方法。如果您想在按下按钮时更改某些内容，只需在模板中重新定义 Pressed 状态即可。看一个类似的问题：[在 WP7 中单击时如何更改按钮的颜色？](https://stackoverflow.com/questions/4731858/how-to-change-color-of-button-when-clicked-in-wp7)

# mysql - UNION 查询不起作用

> ID：15175329
> 
> 赞同：1
> 
> 时间：2013-03-02T14:01:02.743
> 
> 标签：mysql, sql, union-all

这是我的 UNION ALL 查询，但它不起作用，我不知道为什么，它似乎是正确的

```
 SELECT 
                ID AS IDzivotinja, zivotinja 
                FROM zivotinje WHERE IDveterinar=$ID
        UNION ALL
        SELECT 
                ID AS IDsimptom, simptom 
                FROM simptomi WHERE IDveterinar=$ID
        UNION ALL
        SELECT
                ID AS IDterminza, terminza
                FROM termniniza WHERE IDveterinar=$ID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:03:52.703

请注意，UNION 中的每个 SELECT 语句必须具有相同数量的列。这些列还必须具有相似的数据类型。此外，每个 SELECT 语句中的列的顺序必须相同。以下 SQL 查询应该可以工作。请尝试一下。

**编辑**：如果相应的列没有相同的数据类型，您可以将它们转换为相同的数据类型，如下所示：

```
 SELECT 
        ID AS IDzivotinja, CAST(zivotinja AS CHAR) AS Col2
        FROM zivotinje WHERE IDveterinar=$ID
UNION ALL
SELECT 
        ID AS IDzivotinja, CAST(simptom  AS CHAR) AS Col2
        FROM simptomi WHERE IDveterinar=$ID
UNION ALL
SELECT
        ID AS IDzivotinja, CAST(terminza AS CHAR) AS Col2
        FROM termniniza WHERE IDveterinar=$ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T14:05:11.423

列必须相互匹配。

```
SELECT  ID, zivotinja as ColName, 'zivotinje' tableName
FROM    zivotinje 
WHERE   IDveterinar=$ID
UNION ALL
SELECT  ID, simptom as ColName, 'simptomi' tableName
FROM    simptomi 
WHERE   IDveterinar=$ID
UNION ALL
SELECT  ID, terminza as ColName, 'termniniza' tableName
FROM    termniniza 
WHERE   IDveterinar=$ID 
```

还有一件事，*这只是一个猜测*。

如果列`zivotinja`, `simptom`,`terminza`只是用户定义的值（*它的目的是用来定义值来自哪里的表*），那么您需要用单引号将其括起来。

```
SELECT  ID, 'zivotinja' as ColName
FROM    zivotinje 
WHERE   IDveterinar=$ID
UNION ALL
SELECT  ID, 'simptom' as ColName
FROM    simptomi 
WHERE   IDveterinar=$ID
UNION ALL
SELECT  ID, 'terminza' as ColName
FROM    termniniza 
WHERE   IDveterinar=$ID 
```

# mysql - 在 mySQL 查询中使用正确的 Join

> ID：15175338
> 
> 赞同：1
> 
> 时间：2013-03-02T14:01:47.133
> 
> 标签：mysql, join

我有一个将几个表连接在一起的查询。

没有一个选定的列可以为空，那么最好的连接类型是什么？？？

这是查询：

```
SELECT ir.range_name, it.item_type, oi.itemQuantity, i.item_value
FROM orders o 
JOIN order_items oi ON oi.orderId = o.id 
JOIN items i ON i.id = oi.itemNumber
JOIN item_types it ON it.id = i.item_type
JOIN item_ranges ir ON ir.id = i.item_name
WHERE o.id = 1; 
```

如果我已经设法得到正确答案，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T14:08:37.287

您使用的语法是`INNER JOIN`. 这种类型的连接返回每个表中的匹配行。

这意味着您必须确保您`orders`的行与 in 匹配`order_items`，然后您的`order_items`行必须与 匹配`items`，等等。如果不匹配，那么您将不会返回任何行。

所以你可能不得不使用 a`LEFT JOIN`代替。A`LEFT JOIN`将返回表中的所有行，`orders`即使它所连接的表中没有匹配的行。

```
SELECT ir.range_name, 
  it.item_type, 
  oi.itemQuantity, 
  i.item_value
FROM orders o 
LEFT JOIN order_items oi ON oi.orderId = o.id 
LEFT JOIN items i ON i.id = oi.itemNumber
LEFT JOIN item_types it ON it.id = i.item_type
LEFT JOIN item_ranges ir ON ir.id = i.item_name
WHERE o.id = 1; 
```

如果您需要帮助学习正确的语法，这里有一个很好[的 join 可视化解释。](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

注意：您也可以混合使用这些`JOIN`类型。因此，您可以在and`INNER JOIN`之间使用a ，然后在其他一些表上使用 a 。这实际上取决于您的数据以及您尝试返回的结果。`orders``order_items``LEFT JOIN`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T14:03:44.530

您正在寻找的 JOIN 类型是`LEFT JOIN`.

解释它更短，`INNER JOIN`唯一检索在另一个表上具有至少一个匹配值的行。如果您要连接两个以上的表，则该行必须在每个表上至少有一个匹配项，以便记录显示在结果列表中。

但是，无论记录在其他表上是否没有匹配行，`LEFT JOIN`都会显示*LeftHand Side* ( *table ) 表上**的所有记录。`ORDERS`*

```
SELECT  ir.range_name, it.item_type, oi.itemQuantity, i.item_value
FROM    orders o 
        LEFT JOIN order_items oi ON oi.orderId = o.id 
        LEFT JOIN items i ON i.id = oi.itemNumber
        LEFT JOIN item_types it ON it.id = i.item_type
        LEFT JOIN item_ranges ir ON ir.id = i.item_name
WHERE   o.id = 1 
```

*   [SQLFiddle Demo（*记录可能与你的不同，但仍然有相同的想法*）](http://www.sqlfiddle.com/#!2/a9d63/2)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

# python - SQLAlchemy - 什么是 declarative_base

> ID：15175339
> 
> 赞同：46
> 
> 时间：2013-03-02T14:01:48.557
> 
> 标签：python, sqlalchemy

我正在学习`sqlalchemy`。
这是我的初始代码：

**用户.py**

```
from sqlalchemy import Column, Integer, Sequence, String
from sqlalchemy.ext.declarative import declarative_base
Base = declarative_base()

class User(Base):
   __tablename__ = 'users'
   id = Column(Integer,Sequence('user_seq'), primary_key=True)
   username = Column(String(50), unique=True)
   fullname = Column(String(150))
   password = Column(String(50))
   def __init__(self, name, fullname, password):
      self.name = name
      self.fullname = fullname
      self.password = password 
```

**主文件**

```
from sqlalchemy.orm import sessionmaker
from sqlalchemy import create_engine
from user import User
from sqlalchemy.ext.declarative import declarative_base
Base = declarative_base()

if __name__ == '__main__':
   engine = create_engine('mysql://root:password@127.0.0.1:3306/test', echo=True)
   Base.metadata.create_all(engine, checkfirst=True)
   Session = sessionmaker(bind=engine)
   session = Session()
   ed_user = User('ed', 'Ed Jones', 'edspassword')
   session.add(ed_user)
   session.commit() 
```

当我运行**main.py**时，它不会自动创建表并在`session.commit()`.

此外，当我将行移动`Base = declarative_base()`到任何不同的模块并在**main.py**和**user.py**`Base`中使用相同的变量时- 它会创建表。

 ****我的问题：“什么是`declarative_base`”？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-02T15:25:58.253

[`declarative_base()`](https://docs.sqlalchemy.org/en/latest/orm/extensions/declarative/api.html)是一个工厂函数，它为声明性类定义（`Base`在您的示例中分配给变量）构造一个基类。您在 user.py 中创建的一个与`User`模型相关联，而另一个（在 main.py 中）是一个不同的类，对您的模型一无所知，这就是`Base.metadata.create_all()`调用没有创建表的原因。您需要`Base`从 user.py导入

```
from user import User, Base 
```

`Base`而不是在 main.py中创建一个新类。****

# java - 我可以访问小部件、文本对象的私有字段吗？

> ID：15175342
> 
> 赞同：1
> 
> 时间：2013-03-02T14:02:00.977
> 
> 标签：java, reflection

我已经阅读了很多关于反射的帖子，所有的例子都只是简单的访问对象的字符串、双精度和整数等。但是，我想访问像 Widget、Text 甚至自定义对象这样的对象。我尝试过与字符串相同的方法，但失败了。

例如

```
class testPrivate{
    public boolean test()
    {
        return true;
    }

}

class button {
public button(){
    anc=new testPrivate();
}
    private testPrivate anc;

}

public class Testing {

    public static void main(String arg[]) throws Throwable{
    button bt=new button();
    Field field = bt.getClass().getDeclaredField("anc");
    field.setAccessible(true);
    System.out.println(field.test());
    }

} 
```

**这里，语句 System.out.println(field.test()) 中的 field.test(); 失败。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:15:13.440

`Field`是一个类，它引用*类*类型上的字段，而不是该类的任何特定实例。

为了调用方法，首先需要该类的实例，然后必须确保 anc 不为空。

例子：

```
button bt=new button();
Field field = bt.getClass().getDeclaredField("anc");
field.setAccessible(true);

//This sets the field value for the instance "bt"
field.set(bt, new testPrivate()); 
```

然后为了调用该方法，您需要获取该对象并在该对象上调用该方法：

```
//Since field corresponds to "anc" it will get the value
//of that field on whatever object you pass (bt in this example).
testPrivate tp = (testPrivate) field.get(bt);
System.out.println(tp.test()); 
```

同样在风格上，类应该以大写字母开头，例如`button`→<code>Button 和`testPrivate`→<code>TestPrivate

# android - 在 Android 上录制视频时分析帧

> ID：15175348
> 
> 赞同：2
> 
> 时间：2013-03-02T14:02:29.157
> 
> 标签：android, android-camera, android-image

我对 Android 编程相当陌生。我遇到了一个问题，直到现在我才找到解决方案。我想用安卓手机的摄像头录制一段视频，在录制这段视频并保存时，我想分析视频的单帧。在这里我只想对图像进行计算，我不想对图像进行操作并将它们写入视频。

我发现与 Android 上的视频录制有关的第一件事是 MediaRecorder，但似乎没有获取视频流图像的选项。

如果有人提示我如何解决这个问题，那就太好了。

问候，

纳瓦布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:28:47.093

假设您使用的是 Android 4+：

如果您对 OpenGL ES 感到满意，您可以实现[http://developer.android.com/reference/android/graphics/Sur](http://developer.android.com/reference/android/graphics/SurfaceTexture.OnFrameAvailableListener.html) ​​faceTexture.OnFrameAvailableListener.html 并获取 SurfaceTexture 对象。

从此对象中，与 SurfaceTexture 关联的纹理 ID 将更新为来自相机的最新预览帧。您还可以使用 glReadPixels() 将 RGB 纹理数据读回 CPU 进行进一步处理。

# android - 在 Android 4.1.x 上取消 ActionBar 溢出菜单时发出警告

> ID：15175352
> 
> 赞同：18
> 
> 时间：2013-03-02T14:02:53.083
> 
> 标签：android, warnings, android-optionsmenu

这是我收到的警告：

`03-02 14:38:43.980: W/InputEventReceiver(3961): Attempted to finish an input event but the input event receiver has already been disposed.`

我的菜单是从常规`res/menu/activity_menu.xml`文件生成的。我正在按照[http://developer.android.com/guide/topics/ui/menus.html#options-menu上的详细信息处理事件](http://developer.android.com/guide/topics/ui/menus.html#options-menu)

当我单击垂直的三个点以打开溢出菜单并取消它时，我收到了警告。似乎对如何抓住它的触发器知之甚少。有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-01-09T06:03:46.697

这与你的工作无关。

溢出菜单由 PopupWindow 实现。当用户触摸关闭 PopupWindow 时，ACTION_DOWN 事件排队到应用程序的消息队列中。然后通过 ViewPostImeInputStage 类传递给 View，最后 ViewPostImeInputStage 将此输入事件发送到 PopupWindow 的 onTouchEvent 监听器。

```
 @Override
    public boolean onTouchEvent(MotionEvent event) {
        final int x = (int) event.getX();
        final int y = (int) event.getY();

        if ((event.getAction() == MotionEvent.ACTION_DOWN)
                && ((x < 0) || (x >= getWidth()) || (y < 0) || (y >= getHeight()))) {
            dismiss();
            return true;
        } else if (event.getAction() == MotionEvent.ACTION_OUTSIDE) {
            dismiss();
            return true;
        } else {
            return super.onTouchEvent(event);
        }
    } 
```

dissmiss() 尝试先关闭 PopupWindow 和 PopupWindow::onDetachedWindow 调用 WindowInputEventReceiver::dispose() 。

然后 ViewPostImeInputStage 调用 WindowInputEventReceiver::finishInputEvent 来完成那个 ACTION_DOWN 事件。但是 WindowInputEventReceiver 实例已被释放，因此它会引发警告消息。

可以断点调试。打开InputEventReceiver.java（需要android源码在framework/base/）并在dispose方法处设置断点。

# git - Git diff：比较特定文件的特定版本

> ID：15175356
> 
> 赞同：1
> 
> 时间：2013-03-02T14:03:12.017
> 
> 标签：git

我已经克隆了 linux 内核 git 存储库：

```
git clone git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git 
```

我对特定文件的历史感兴趣：

```
git log net/core/sock_diag.c 
```

我看到几个提交：

```
commit 8e904550d0fffcda2b18d7ab12750b0c75757e89
Date:   Sat Feb 23 01:13:48 2013 +0000

commit 6e601a53566d84e1ffd25e7b6fe0b6894ffd79c0
Date:   Sat Feb 23 01:13:47 2013 +0000

commit 9f00d9776bc5beb92e8bfc884a7e96ddc5589e2e
Date:   Sat Sep 8 02:53:54 2012 +0000 
```

如何区分此文件的两个特定版本？可以说，我想区分 9 月 8 日和 2 月 23 日的版本我可以使用以下内容，但这给了我整个提交的差异（不仅仅是我的文件）

```
git diff 9f00d9776bc5beb92e8bfc884a7e96ddc5589e2e 6e601a53566d84e1ffd25e7b6fe0b6894ffd79c0 
```

有人可以建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T14:05:54.167

将文件名添加到您的 diff 命令中：

```
git diff 9f00d9776bc5beb92e8bfc884a7e96ddc5589e2e \
  6e601a53566d84e1ffd25e7b6fe0b6894ffd79c0 -- net/core/sock_diag.c 
```

如果您对提交之间的更改感兴趣，可以使用`git log -p`（或`--patch`）：

```
git log -p net/core/sock_diag.c 
```

# java - Arduino和Java之间的校验和功能

> ID：15175358
> 
> 赞同：2
> 
> 时间：2013-03-02T14:03:15.690
> 
> 标签：java, c, serial-port, arduino, checksum

我正在实现一个串行协议，用于从 Arduino 到 Java 的通信（一种方式）。

我从 Arduino 发送的每一帧都是这样的：

```
"G FF FF FFFF FFFF FFFF FFFF T" (The spaces are not part of the frame) 
```

*   `G`表示帧开始，唯一可能的值是`G`.
*   `F`s 是编码为 HEX 值的有效负载。可能的值：`[0-F]`
*   `T`是校验和。可能的值：`[H-Z]`

为了计算校验和，我为 Arduino 和 Java 编写了一个函数。然而，使用这些函数，当我在 Java 端收到它们时，我得到了大约 50% 的损坏帧。

我认为这个问题与 Java 变量不能无符号这一事实有关。你能发现错误吗？或者一个简单的串行连接是否有可能破坏我发送的 50% 的帧？`FRAME_LENGTH_WITHOUT_CRC`是 21。

Java代码：

```
char checksum(byte[] frame) {
    short sum = 0;
    for (short i = 0; i < Config.FRAME_LENGTH_WITHOUT_CRC; i++) {
        sum += (char)frame[i];
    }
    return (char) ('H' + sum % 16);
} 
```

Arduino C 代码：

```
char checksum(const char * str)
{
  uint8_t sum = 0;
  for (uint8_t i = 0; i < FRAME_LENGTH_WITHOUT_CRC; i++) {
    sum += (uint8_t)str[i];
  }
  return 'H' + sum % 16;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-30T13:15:35.213

我在所有数据到达之前读取缓冲区，因此我读取的数据少于我假设已经到达的 21 个字节。我假设`InputStream`在它返回之前`in.read(array[], offset, size)`读取所有`size`字节，但显然它没有。– 暗淡

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-02T14:13:46.373

消息是字符串，因此您必须从字符转换为数字。你很幸运，你有正确的校验和在 50%。

```
int charFromHex(char x)
{
   if ((x >= '0') && (x <= '9'))
   {
     return x - '0';
   }
   else if ((x >= 'A') && (x <= 'F'))
   {
      return x - 'A' + 10;
   }
   else
   {
     return 0; 
     //somehow handle error!
   }
{ 
```

# iphone - 表格编辑完成后，UISwitch 在 UITableViewCell 中仍然略微可见

> ID：15175359
> 
> 赞同：3
> 
> 时间：2013-03-02T14:03:24.353
> 
> 标签：iphone, ios, uitableview, editing, uiswitch

关闭表格编辑模式后，我有一个奇怪的问题`editingAccessoryView`。`UITableViewCell`

目前，我正在使用 a`UISwitch`作为编辑附件视图，并在按下导航栏的编辑按钮时让表格视图处理在屏幕上移动编辑视图的动画。

几乎所有的编辑附件视图都在屏幕外正确设置动画，但总有两个不能完全离开屏幕，然后当单元格出列并重用时它们会被重用，因此它们会在滚动过程中显示出来。

有没有其他人看到这个或者我在这里错过了什么？

我正在像这样设置单元格：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    AllStatCell *cell = [tableView dequeueReusableCellWithIdentifier:@"AllStatCell"];

    if (cell.editingAccessoryView == nil) {
        UISwitch *statSwitch = [[UISwitch alloc] initWithFrame:CGRectZero];
        [statSwitch addTarget:self action:@selector(saveSwitchState:) forControlEvents:UIControlEventValueChanged];
        cell.editingAccessoryView = statSwitch;
    }

    NSString *statName = [self statNameForIndexPath:indexPath];
    cell.statName.text = statName;
    [(UISwitch *)cell.editingAccessoryView setOn:[self switchValueForIndexPath:indexPath withStatNamed:statName]];

    if (tableView.editing) cell.statValue.hidden = YES;

    return cell;
} 
```

我已经尝试覆盖`setEditing`延迟后重新加载表数据的方法以允许动画完成，但它有时只有效

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
    [super setEditing:editing animated:animated];

    // Insert/delete the stat rows depending on editing mode
    [self rebuildTableDataAnimated:YES];

    double delayInSeconds = 0.5;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        // Trying to fix bug that shows part of a UISwitch on screen still even though editing mode is completed
        [self.tableView reloadData];
    });
} 
```

这是一个屏幕截图：

![错误图片](../Images/737a657a7ddeb5c0082da02e48caefae.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-21T21:31:21.450

旧线程，但在带有 UIStepper 的 Xcode 7 中存在同样的问题。我的解决方案是将它嵌入到 UIView 中，左右两边有一些填充，然后将父视图设置为editingAccessoryView。它可以工作，而且不是黑客攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T15:54:28.153

这感觉就像一个 hack，所以希望其他人有更好的解决方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    AllStatCell *cell = [tableView dequeueReusableCellWithIdentifier:@"AllStatCell"];

    NSString *statName = [self statNameForIndexPath:indexPath];

    // Hack fix for a bug that shows part of a UISwitch on screen still even though editing mode is completed
    // Configure stat on/off switches
    cell.editingAccessoryView = [self cellEditingAccessoryViewForEditing:tableView.editing];
    if (tableView.editing) [(UISwitch *)cell.editingAccessoryView setOn:[self switchValueForIndexPath:indexPath withStatNamed:statName]];

    cell.statName.text = statName;
    [cell.statValue setHidden:tableView.editing];

    return cell;
}

// Hack fix for a bug that shows part of a UISwitch on screen still even though editing mode is completed
- (UISwitch *)cellEditingAccessoryViewForEditing:(BOOL)tableIsEditing
{
    if (tableIsEditing) {
        UISwitch *statSwitch = [[UISwitch alloc] initWithFrame:CGRectZero];
        [statSwitch addTarget:self action:@selector(saveSwitchState:) forControlEvents:UIControlEventValueChanged];
        return statSwitch;
    }
    return nil;
} 
```

# asp.net-mvc - 将 MongoDB 与 ASP.NET Web API 一起使用

> ID：15175361
> 
> 赞同：0
> 
> 时间：2013-03-02T14:03:31.643
> 
> 标签：asp.net-mvc, mongodb, repository, crud, mongodb-.net-driver

我正在尝试按照[***将 MongoDB 与 ASP.NET Web API 一起使用***](http://blogs.msdn.com/b/henrikn/archive/2012/02/19/using-web-api-with-mongodb.aspx)中的步骤在 MVC Web Api 中实现 mongodb 我被困在“实现存储库”中，我在哪里将 2 块代码放在标题下？我创建了一个类 ContactRepository 如下：

```
public class ContactRepository : IContactRepository
{

} 
```

但是当我将这两个代码块放在“实施存储库”标题下时，它会显示错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:07:54.377

我最近实现了但使用 PHP & Doctrine ORM for Mongo。我为它做了这样的事情

```
/** @Entity(repositoryClass="Doctrine\Blog\ORM\BlogPostRepository") */
class BlogPost
{
/** @Id @Column(type="integer") */
  private $id;

/** @Column(type="string") */
  private $title;

/** @Column(type="text") */
  private $body;

// ...
} 
```

你可以使用注释吗？

# ios - 列出创建的类的所有实例

> ID：15175374
> 
> 赞同：0
> 
> 时间：2013-03-02T14:05:24.550
> 
> 标签：ios, objective-c

我想查看为一个类创建的所有实例的列表（使用`NSLog`）。任何想法？

编辑：我的意思是要求查看一个类的当前活动实例列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T14:06:18.293

为什么不直接将指向这些实例的指针添加到全局集合中。然后，当您想了解此类详细信息时，您可以参考该系列。

# c# - 在控制台程序中使用绘图命令创建图像文件的简单方法

> ID：15175375
> 
> 赞同：0
> 
> 时间：2013-03-02T14:05:24.987
> 
> 标签：c#, .net, drawing

我想创建一个控制台程序，该程序在运行时会创建一个带有一些以编程方式生成的图形的图像文件。它最终会读取一些带有数字参数的配置文件，然后通过算法创建图像。

我已经可以使用 HTML5 Canvas 和 Javascript 获得我想要的东西，使用诸如`fillRect()`等的绘图命令。

我已经查看了（过度）关于此的大量 .NET 文档，特别`System.Drawing`是`System.Windows.Media`命名空间，但似乎有很多方法可以使用这些类，我什至不知道从哪里开始。

我打算做的一个伪代码（不是实际的类名！！！）示例如下：

```
RasterImage raster = new RasterImage(width, height);
context = raster.getContext();
context.fillColor = 'white';
context.DrawRectangle(x,y,w,h);
context.saveAsPng('result.png'); 
```

我相信实际的解决方案会比这更冗长，但这是我需要执行的当前工作流程。此外，如果这个类不能过多地依赖 WPF（它是一个控制台程序），但如果可能的话实际上使用更通用的绘图类，这将是很有趣的。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T14:24:00.330

使用`System.Drawing.Bitmap`班级及其随行人员，您可以非常简单地做到这一点：

```
static void Main(string[] args) {

    int width = 512;
    int height = 512;

    int x, y, w, h;
    x = y = 10;
    w = h = 100;

    using (Bitmap bmp = new Bitmap(width, height)) {
        using (Graphics g = Graphics.FromImage(bmp)) {

            g.FillRectangle(
                brush: new SolidBrush(
                    color: Color.Blue
                ),
                rect: new Rectangle(x, y, w, h)
            );

            g.DrawRectangle(
                pen: new Pen(
                    color: Color.Black, 
                    width: 3
                ),
                rect: new Rectangle(x, y, w, h)
            );

            bmp.Save(@"D:\result.png", ImageFormat.Png);

        }
    }

} 
```

您将需要引用`System.Drawing`程序集并添加以下`using`子句：

```
using System.Drawing;
using System.Drawing.Imaging; 
```

# c - 处理中断：

> ID：15175381
> 
> 赞同：1
> 
> 时间：2013-03-02T14:05:45.690
> 
> 标签：c

```
In the following program:

Ctrl+z and ctrl+c both are interrupts.
The code is supposed to handle any interrupt.

Then why does only one of them(ctrl+c) work? 
```

代码：

```
#include <signal.h>
#include<stdio.h>
void handler(int sig)
{
    printf("Caught SIGINT\n");
    exit(0);
}

int main() 
{
    printf("\nYou can press ctrl+c to test this program\n");
    if (signal(SIGINT, handler) == SIG_ERR) 
    perror("signal error");

    pause(); /* wait for the receipt of a signal */

    exit(0);
} 
```

用户输入：必须是中断 输出必须是：捕获信号

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T14:07:37.200

因为 Ctrl-Z 导致 a `SIGTSTP`，而不是 a `SIGINT`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T14:09:17.970

Ctrl-Z 发送`SIGTSTP`.

阅读内容：

*   [http://en.wikipedia.org/wiki/Control-Z](http://en.wikipedia.org/wiki/Control-Z)
*   [http://en.wikipedia.org/wiki/SIGTSTP#SIGTSTP](http://en.wikipedia.org/wiki/SIGTSTP#SIGTSTP)

# emacs - 你如何处理对 elisp 中变量的引用？

> ID：15175385
> 
> 赞同：0
> 
> 时间：2013-03-02T14:06:08.743
> 
> 标签：emacs, elisp

我正在编写一个函数，我想对多个不同的全局变量之一进行操作（在本例中为全局标记列表、缓冲区标记列表或任意标记列表）。由于该函数是从表格菜单函数调用的，因此我需要将引用存储在缓冲区局部变量中以供以后访问。

处理此问题的最佳方法是 elisp？翻阅手册时提到了 defvaralias 和间接变量，但这似乎更多地设置为永久全局别名而不是临时参考。我是否错过了一些微妙的 lisp，这意味着这应该很容易？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T14:40:27.647

将变量的名称保存为符号并使用`symbol-value`or `eval`。

很多动态语言都有`eval`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T15:14:58.287

在 Emacs 的主干（成为 24.4）中，您还可以使用`gv-ref`and ，它们的工作方式与 C 的and`gv-deref`类似。`&``*`

# jquery - 具有 jquery mobile 样式的 JQuery-File-Upload 按钮

> ID：15175391
> 
> 赞同：6
> 
> 时间：2013-03-02T14:06:33.310
> 
> 标签：jquery, css, jquery-mobile

我将 jquery-file-upload 插件与 jquery-1.8.3 和 jquery-mobile-1.2 一起使用。它工作得很好。

但是今天更新到jquery-1.9和jquery-mobile-1.3，按钮样式也变了。

我已将它们添加到 jsfiddle。我希望它看起来像[这样](http://jsfiddle.net/gcoordinate/MRALZ/1/)

```
<span class="fileinput-button" data-role="button" data-icon="plus">
<span>添加文件</span>
<input type="file" name="files[]" multiple />
</span> 
```

但它看起来像[这样](http://jsfiddle.net/gcoordinate/X23dx/)

```
<span class="fileinput-button" data-role="button" data-icon="plus">
<span>添加文件</span>
<input type="file" name="files[]" multiple />
</span> 
```

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-02T16:00:57.260

在新版本中，jQuery Mobile 改变了它处理文件输入的方式。从[公告帖子](http://blog.jquerymobile.com/2013/02/20/jquery-mobile-1-3-0-released/)：

> 现在移动平台越来越支持文件输入类型，我们为这些类型添加了自动样式，作为 jQuery Mobile 的一部分。

事实上，它会围绕输入生成 HTML 代码：

```
<div class="ui-input-text ui-shadow-inset ui-corner-all ui-btn-shadow ui-body-c">
    <input type="file" name="files[]" multiple="" class="ui-input-text ui-body-c">
</div> 
```

一个解决方案是阻止 jQuery Mobile 为您的元素设置样式，只需添加属性`data-role="none"`

```
<input type="file" name="files[]" multiple data-role="none"/> 
```

在此处查看 jsFiddle：http: [//jsfiddle.net/X23dx/1/](http://jsfiddle.net/X23dx/1/)

**jQuery Mobile 1.4 更新**

要获得与 1.4 版本类似的结果，您需要在周围添加一些新类`<span>`：

```
<span class="ui-btn ui-icon-plus ui-btn-icon-left ui-corner-all fileinput-button">
    <span>添加文件</span>
    <input type="file" name="files[]" multiple data-role="none"/>
</span> 
```

查看更新的 jsFiddle：http: [//jsfiddle.net/X23dx/173/](http://jsfiddle.net/X23dx/173/)

# android - 参考|颜色和颜色的区别

> ID：15175396
> 
> 赞同：1
> 
> 时间：2013-03-02T14:06:58.880
> 
> 标签：android

我想知道，之间有什么区别吗

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

<attr name="titleColor" format="reference|color" />

</resources> 
```

* * *

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

<attr name="titleColor" format="color" />

</resources> 
```

* * *

无论哪种方式都适用于以下 2 个主题

```
<style name="AppTheme.MyDark" parent="android:Theme">
   <item name="titleColor">#FFFFFF</item>
</style> 
```

* * *

```
<style name="AppTheme.MyDark" parent="android:Theme">
   <item name="titleColor">@color/theColorReference</item>
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T15:40:46.440

好吧，如果您指定`reference|color`，那么您还将引用设置为除了颜色值之外的值。引用可以是值 XML 文件中的任何颜色或对系统颜色的引用...

# php - 从 PHP 发送到 Android 的 JSON 对象错误

> ID：15175397
> 
> 赞同：1
> 
> 时间：2013-03-02T14:07:04.453
> 
> 标签：php, android, json

我面临一个非常不寻常的问题。
我正在从 android 向 upOR.php 文件发送一个 http post 请求。但是，我从另一个 dlQues.php 文件中得到的 JSON 响应！！！android中引用的文件名是正确的，因为正在执行为将数据插入文件而编写的代码。其实upOR.php文件的代码似乎没什么问题。仅在浏览器上运行时，它会返回正确的 JSON。但是当从 android 调用时，它会从 dlQues.php 返回 JSON，即使 upOR.php 的代码被执行了！！。此外，当 dlQues.php 被删除时，它开始从另一个文件返回 JSON！。

请帮忙。这让我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T15:57:52.527

这不会发生，将是由于人为错误:)

1.  再次检查路径，看看它们是对还是错。

2.  从第一个文件中回显 ABCD 等简单文本，在第二个文件中回显 XYZ，然后从 ANdroid 运行它以查看它正在被调用。

一步一步调试它，这肯定是一个非常简单的错误！

# wordpress - WordPress，我无法直接访问上传的图片

> ID：15175398
> 
> 赞同：1
> 
> 时间：2013-03-02T14:07:08.677
> 
> 标签：wordpress, http-status-code-404

我有基于 Linux 主机和 WordPress 的博客。我创建帖子并添加我的图像，然后发布我的帖子。一切都很好，当我通过直接链接看到我的帖子时没有问题，我可以在帖子中看到我的图片。

我的问题是当我打开图像的直接链接时（例如：[http](http://www.kamalan.com/wp-content/uploads/2013/02/01.jpg) ://www.kamalan.com/wp-content/uploads/2013/02/01.jpg ）服务器显示以下错误（虽然我可以看到图像时我打开它的帖子）。

任何建议将不胜感激。谢谢

![在此处输入图像描述](../Images/9cb287fcfcbc4aee9a0ca6ad474f3e97.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T14:32:30.323

终于在 6 小时后，我找到了解决方案。对于那些有同样问题的人，解决方案是：

我假设你有 Linux 主机。

*   转到主机的根目录 ( `/public_html`) 并打开`.htaccess`文件。
*   删除此行：（`RewriteRule .*.(jpg|jpeg|gif|png|bmp)$ - [F,NC]`您可以在此命令前添加“#”将其注释掉）
*   保存存档。

# prolog - 在使用运算符时控制括号

> ID：15175400
> 
> 赞同：0
> 
> 时间：2013-03-02T14:07:14.027
> 
> 标签：prolog

当使用用户定义的运算符时，Prolog 有时会自动添加/删除涉及这些运算符的表达式的括号。有没有办法控制这个？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T01:33:55.183

括号只是通过描绘添加。它们不是代码内部表示的一部分。您可以覆盖描绘以更改事物的打印方式。见描绘文本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T17:36:30.277

运算符定义如下：

```
:- op(Precedence, Associativity, Operator). 
```

[This answer](https://stackoverflow.com/a/9340873/812818) to a similar question解释了这一点，但简短的回答是该`Associativity`选项控制它；`xfy`使运算符左结合`yfx`并使运算符右结合。告诉 Prolog在`Precedence`看到多个运算符时如何决定哪个运算符是子表达式。

# iphone - 动画 GIF 图像作为 iphone 中的初始屏幕

> ID：15175401
> 
> 赞同：2
> 
> 时间：2013-03-02T14:07:19.110
> 
> 标签：iphone, ios, objective-c, ios5

我有一个动画 GIF 图像，它必须用作启动画面。您能帮我弄清楚如何使用 GIF 开发动画启动屏幕吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T14:22:26.300

使用 UIImageView 的内置动画方法。你需要创建一个 UIImages 的 NSArray。在那之后：

```
myImageView.animationImages = myArrayOfImages;
myImageView.animationRepeatCount = 0;   // forever
[myImageView startAnimating]; 
```

要使用 GIF 执行此操作，您需要将动画 GIF 拆分为其单独的图像，然后为每个单独的 GIF 图像填充一个 UIImage 的 myArrayOfImages。UIImage 支持 PNG 或 JPEG 表示。

[编辑] 如果您真的必须保持动画 GIF 完整，那么创建一个 UIWebView 并加载该 GIF 图像的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T14:09:03.770

**笔记**

`GIF`中不支持图像`iOS`。

您可以在此任务之后使用多个带有动画的图像`didFinishLaunchingWithOptions`

按照这个[在 UIWebview 中加载 gif 图像的更多信息 - iPhone](https://stackoverflow.com/questions/14727281/loading-gif-image-in-uiwebview-iphone/14728666#14728666)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-14T12:57:47.697

您可以使用扩展名：[UIImage+AnimatedGif](https://github.com/mayoff/uiimage-from-animated-gif)

并做这样的事情：

```
+[UIImage animatedImageWithAnimatedGIFURL:(NSURL *)url] 
```

简单地说：

```
UIImage* mygif = [UIImage animatedImageWithAnimatedGIFURL:[NSURL URLWithString:@"http://en.wikipedia.org/wiki/File:Rotating_earth_(large).gif"]]; 
```

将其放置在 App Delegate 的 applicationDidFinishLaunching 或根视图控制器的 ViewDidLoad 中

# mysql - 无法创建表（错误号：150）

> ID：15175402
> 
> 赞同：0
> 
> 时间：2013-03-02T14:07:21.443
> 
> 标签：mysql, sql

我试图在 MySQL 中创建一个表：

```
CREATE TABLE band ( 
    id int NOT NULL AUTO_INCREMENT, 
    name varchar(255) NOT NULL ,
    frontman int NOT NULL ,   
    PRIMARY KEY(id), 
    FOREIGN KEY(frontman) references person(id)  
) 
```

新表将具有该表的外键：

```
CREATE TABLE person (
    id int NOT NULL AUTO_INCREMENT,
    nick varchar(255) NOT NULL,
    password varchar(255) NOT NULL,
    admin boolean,
    PRIMARY KEY(id)
) 
```

错误是：

```
#1005 - Can't create table 'apptestdb.band' (errno: 150) 
```

有什么想法有什么问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T18:11:00.637

我终于找到了解决方案。很简单。每个 CREATE TABLE 命令之后必须是一个分号来结束命令。我运行它的方式尝试使用下一个 CREATE TABLE 命令作为第一个命令的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:17:32.253

我从 stackoverflow 站点 [Error 150](https://stackoverflow.com/questions/9018584/error-code-1005-cant-create-table-errno-150)得到这个，请参考它可能会帮助您解决问题。

错误代码：1005 - 您的代码中存在错误的主键引用

通常是由于参考 FK 字段不存在。可能是您有拼写错误，或者检查大小写应该相同，或者字段类型不匹配。FK 链接字段必须与定义完全匹配。

一些已知的原因可能是：

两个关键字段类型和/或大小不完全匹配。例如，如果一个是 INT(10)，则关键字段也需要是 INT(10)，而不是 INT(11) 或 TINYINT。您可能希望使用 SHOW CREATE TABLE 确认字段大小，因为查询浏览器有时会直观地显示 INT(10) 和 INT(11) 的 INTEGER。您还应该检查一个未签名，另一个未签名。它们都需要完全相同。您尝试引用的关键字段之一没有索引和/或不是主键。如果关系中的某个字段不是主键，则必须为该字段创建索引。外键名称是已经存在的键的副本。检查您的外键名称在您的数据库中是唯一的。只需在密钥名称的末尾添加一些随机字符即可进行测试。您的一个或两个表是 MyISAM 表。为了使用外键，表必须都是 InnoDB。（实际上，如果两个表都是 MyISAM，那么您将不会收到错误消息 - 它只是不会创建密钥。）在查询浏览器中，您可以指定表类型。您已指定级联 ON DELETE SET NULL，但相关的关键字段设置为 NOT NULL。您可以通过更改级联或将字段设置为允许 NULL 值来解决此问题。

确保 Charset 和 Collat​​e 选项在表级别以及键列的单个字段级别都相同。

您的外键列上有一个默认值（即 default=0）

关系中的一个字段是组合（复合）键的一部分，并且没有自己的单独索引。即使该字段有一个索引作为复合键的一部分，您也必须仅为该键字段创建一个单独的索引才能在约束中使用它。

您的 ALTER 语句中有语法错误，或者您在关系中输入了错误的字段名称之一

10 您的外键名称超过了 64 个字符的最大长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T15:11:18.633

您正在将 FOREIGN KEY 设置为另一个表`person`，因此最好也共享此表。

**如果**您只想创建此表`band`然后删除`FOREIGN KEY`它会正常工作。

看这里[**演示**](http://sqlfiddle.com/#!2/ed884)。你的桌子工作得很好。

编辑。在这里你的工作桌和`person`桌子

```
 create table  person (
  id  int NOT NULL AUTO_INCREMENT ,
  PRIMARY KEY(id))
  ;

 CREATE TABLE band ( 
 id int NOT NULL , 
 name varchar(255) NOT NULL ,
 frontman int NOT NULL ,   

 FOREIGN KEY(frontman) references person(id)
 ); 
```

[**工作台演示**](http://sqlfiddle.com/#!2/149cb)

# r - 比较后排序

> ID：15175405
> 
> 赞同：-1
> 
> 时间：2013-03-02T14:07:47.207
> 
> 标签：r

我在创建公式时遇到了一些问题，该公式比较两个数字并在最后程序对所有数字进行排序。我创建（拥有）一个`x`带有值的向量：`x <- c(5, 10, 2, 35, 1)`和带有名称的函数： `SortFunc(x)`

最后的结果应该是这样的：

```
[1] 1 2 5 10 35 
```

我做了这个功能：

```
SortFunc <- function(x) {
  n <- length(x)
  repeat {
    spr <- FALSE
    n <- n-1
    for(i in 1:n) {
      if ( x[i] > x[i+1] ) {
        t <- x[i]
        x[i] <- x[i+1]
        x[i+1] <- t
        spr <- TRUE
      }
    }
    if (!spr) break;
  }
  x
} 
```

当我运行时`SortFunc(x)`，我收到此错误：

```
Error in if (x[i] > x[i + 1]) { : argument is of length zero 
```

有没有人解决？如果我像 * 那样改变矢量，`x <- c(5,8,7,30,1,100)`我会得到真正的解决方案`([1] 1 5 7 8 30 100)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T14:24:29.570

这是每个循环的函数输出：

```
R > SortFunc(c(5,10,2, 35, 1))
[1]  5  2 10  1 35
[1]  2  5  1 10 35
[1]  2  1  5 10 35
[1]  1  2  5 10 35
Error in if (x[i] > x[i + 1]) { (from #7) : argument is of length zero 
```

所以在 4 次循环之后，它已经被排序，但在最后一次循环期间，它们仍然改变了顺序，所以`spr`是`True`，因此它不会中断。相反，它继续尝试`n <- n-1`make `n = 0`，这导致了错误。

稍微修改了您的代码，它可以工作：

```
SortFunc <- function(x) {
  n <- length(x)
  repeat {
    spr <- FALSE
    for(i in 1:(n-1)) {
      if ( x[i] > x[i+1] ) {
        t <- x[i]
        x[i] <- x[i+1]
        x[i+1] <- t
        spr <- TRUE
      }
    }
    n <- n-1
    if (n == 1 | !spr) break;
  }
  x
} 
```

# graphics - glMultMatrixf(matrix, offset) 有什么作用？

> ID：15175414
> 
> 赞同：0
> 
> 时间：2013-03-02T14:08:24.067
> 
> 标签：graphics, opengl-es, matrix, translation

我正在阅读 Android SDK 中的代码。这是用于设置模型视图：

```
 // set-up modelview matrix
    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();
    gl.glTranslatef(0, 0, -3.0f);
    gl.glMultMatrixf(mRotationMatrix, 0); 
```

最后一行代码是什么意思？我在互联网上没有找到明确的答案。然而，关于 `void glMultMatrixf( const GLfloat *m )`.

旋转矩阵：

```
 private final float[] mRotationMatrix = new float[16];
    mRotationMatrix[ 0] = 1;
    mRotationMatrix[ 4] = 1;
    mRotationMatrix[ 8] = 1;
    mRotationMatrix[12] = 1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T15:45:47.497

我终于找到了正确的文档。

> matrix - 指定一个至少包含 16 个连续值的数组，其中前 16 个用作 4 × 4 列主矩阵的元素。offset - m 数组中的起始偏移量。

更多[在这里](http://docs.oracle.com/javame/config/cldc/opt-pkgs/api/jb/jsr239/javax/microedition/khronos/opengles/GL10.html#glMultMatrixf%28float%5B%5D,%20int%29)

# erd - Netbeans 7.3 中的 ERD

> ID：15175422
> 
> 赞同：0
> 
> 时间：2013-03-02T14:09:17.667
> 
> 标签：erd, netbeans-platform

如何在 Netbeans 中创建 ERD（实体关系图）？我安装了ERD插件，但不知道如何使用，在哪里可以找到这个功能。我需要创建 ERD，然后生成 SQL 脚本。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T12:55:55.093

可能您在谈论“实体关系图支持”（Org.netbeans.erdbeans73.nbm）。在这种情况下，不幸的是该插件不支持手动创建 ER 图。它只需要一个数据库模式并自动生成一个 ER 图。这样做你必须进入“新文件”->“持久性”->“ER-Diagram”并按照向导进行操作。

# css - 使用 Rails 安装 twitter 引导程序

> ID：15175424
> 
> 赞同：1
> 
> 时间：2013-03-02T14:09:19.837
> 
> 标签：css, ruby-on-rails, twitter-bootstrap, ruby-on-rails-2

我正在尝试在现有项目 Twitter Bootstrap 上安装

我试着这样做，遵循[这个](https://github.com/yabawock/bootstrap-sass-rails)：

```
group :assets do
  gem 'bootstrap-sass-rails'
end 
```

我明白了：

```
Bundler could not find compatible versions for gem "actionpack":
  In Gemfile:
    bootstrap-sass-rails (>= 0) java depends on
      actionpack (~> 3.1.0) java

    rails (= 2.3.14) java depends on
      actionpack (2.3.14)

Bundler could not find compatible versions for gem "rails":
  In Gemfile:
    bootstrap-sass-rails (>= 0) java depends on
      rails (~> 3.1.3) java

    rails (2.3.14) 
```

知道当我运行 rails -v 时，我会得到 rails 3.2.12。所以，按照文档，我尝试了这个

宝石安装引导-sass-rails

我被告知 gem 已成功安装，但我的 app 文件夹中没有看到任何新文件。顺便说一句，我试图在我的一个样式表中添加这个

```
**/*
 *= require twitter/bootstrap
 */
** 
```

但是我的布局似乎没有调用引导 css。有人可以帮忙吗？这是安装 Bootstrap 的正确方法吗？

更新：我刚刚注意到在我的 gem 文件中： gem "rails", "2.3.14"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T14:15:57.353

## 对于 Rails 3：

我已经安装了 bootstrap 和 fontawesome。这是我的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.12'

# ...

# jQuery
gem 'jquery-rails'

# Twitter Bootstrap
gem 'bootstrap-sass'
gem 'font-awesome-sass-rails'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails'
end 
```

如您所见，我使用不同的 gem 进行引导。编辑 Gemfile 后，只需键入`bundle`（或者可能`bundle update`是必要的）

* * *

这是我的 application.css.scss（在 app/assets/stylesheets/ 下）：

```
@import "bootstrap";
@import "font-awesome";
body { padding-top: 60px; }
@import "bootstrap-responsive"; 
```

* * *

和 application.js（在 app/assets/javascripts/ 下）：

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require_tree . 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T02:26:15.157

我在“ [http://railscasts.com/episodes/328-twitter-bootstrap-basics](http://railscasts.com/episodes/328-twitter-bootstrap-basics) ”之后遇到了问题，因为在我注意到“2013 年 2 月 6 日更新：设置自本集以来，twitter-bootstrap-rails 的流程发生了变化。查看 README 以获取有关如何设置它的详细信息。”

所以我跟着[https://github.com/seyhunak/twitter-bootstrap-rails](https://github.com/seyhunak/twitter-bootstrap-rails)并进行了以下安装步骤，它现在对我有用：

1.  创建一个新的 rails 3.2.x 应用程序，
    （如果您是 rvm 粉丝，请使用 rvm）
    rails new Store

2.  编辑 Gemfile 和以下内容：
    gem "therubyracer"
    gem "less-rails"

    gem 'twitter-bootstrap-rails'# *** *确实对我有用，所以我需要从源中提取

    gem 'twitter-bootstrap-rails' , :git => ' [https://github.com/seyhunak/twitter-bootstrap-rails.git](https://github.com/seyhunak/twitter-bootstrap-rails.git) '

3.  运行捆绑安装

4.  少安装引导程序，rails 生成引导程序：少安装

5.  安装 bootstrap static，
    rails 生成 bootstrap:install static

6.  将以下行复制并粘贴到您的“bootstrap_and_overrides.less”，
    @import“twitter/bootstrap/reset.less”；
    @import "twitter/bootstrap/variables.less";
    @import "twitter/bootstrap/mixins.less";
    @import "twitter/bootstrap/scaffolding.less";
    @import "twitter/bootstrap/grid.less";
    @import "twitter/bootstrap/layouts.less";
    @import "twitter/bootstrap/type.less";
    @import "twitter/bootstrap/forms.less";
    @import "twitter/bootstrap/wells.less";
    @import "twitter/bootstrap/component-animations.less";
    @import "twitter/bootstrap/buttons.less";
    @import "twitter/bootstrap/close.less";

    @import "twitter/bootstrap/navbar.less";
    @import "twitter/bootstrap/labels-badges.less";
    @import "twitter/bootstrap/hero-unit.less";
    @import "twitter/bootstrap/utilities.less";
    @import "twitter/bootstrap/responsive";

7.  生成固定或流动的布局，由您选择。

8.  生成模型，
    rails g 脚手架产品名称 price:decimal --skip-stylesheets
    rake db:migrate
    rails g bootstrap:themed Products -f

9.  使用 WEBrick、
    rails s在开发模式下运行

希望对某人有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T14:15:13.433

我不是一个铁轨的家伙，但是...你有没有通过

[http://railsapps.github.com/twitter-bootstrap-rails.html](http://railsapps.github.com/twitter-bootstrap-rails.html)

[http://www.opinionatedprogrammer.com/2011/11/twitter-bootstrap-on-rails/](http://www.opinionatedprogrammer.com/2011/11/twitter-bootstrap-on-rails/)

[http://blog.robertosoares.me/blog/2012/08/17/integrating-twitter-bootstrap-with-ruby-on-rails/](http://blog.robertosoares.me/blog/2012/08/17/integrating-twitter-bootstrap-with-ruby-on-rails/)

它看起来很整洁！

# javascript - 获取html标签之间的字符串

> ID：15175425
> 
> 赞同：0
> 
> 时间：2013-03-02T14:09:21.340
> 
> 标签：javascript, regex

我正在处理用户脚本，并且正在尝试获取这些粗体标签的内部文本。不幸的是，我不能使用 get getelementbyid 或任何 getelement 函数，因为有更多我不需要的粗体标签，所以我正在尝试正则表达式。我将如何获得 STRING123、STRING456 等？

我试过了`(?<=bold\"\>)(.*?)(?=\<\/b\>)`，但没有运气 `bold\"\>(.*)\<\/b\>`给我全部的刺痛，但我只想要内部。

```
<b style="color:#ffffff;text-transform:uppercase;font-size:10pt;font-weight:bold">STRING123</b>
<b style="color:#ffffff;text-transform:uppercase;font-size:10pt;font-weight:bold">STRING456</b>
<b style="color:#ffffff;text-transform:uppercase;font-size:10pt;font-weight:bold">STRING789</b>
<b style="color:#ffffff;text-transform:uppercase;font-size:10pt;font-weight:bold">STRING101112</b>
<b style="color:#ffffff;text-transform:uppercase;font-size:10pt;font-weight:bold">STRING131415</b> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:13:08.743

你的正则表达式很好。匹配将返回整个字符串，但您只需要`$1`= 特定匹配的第一组。因此，取决于编程语言，它要么是要么`result("$1")`等等`group(1)`。

**编辑**

```
var myString = "style=color:#ffffff;text-transform:uppercase;font-size:10pt...";
var myRegexp = /bold\"\>(.*)\<\/b\>/g;
var match = myRegexp.exec(myString);
alert(match[1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:13:25.047

我会这样尝试

```
/<b[^>]*bold[^>]*>([^<]*)<\/b>/g 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T19:44:01.693

如果所需`b`元素的字体粗细使用内联样式定义，如您的示例所示，您可以使用，例如

```
var i, b,
    bolds = document.getElementsByTagName('b');

for ( i = 0; i < bolds.length; i++ ) {
    b = bolds[i];  

    if ( b.style.fontWeight == 'bold' || b.style.fontWeight == '700' ) {
        console.log( b.innerText || b.textContent ); 
    }        
} 
```

# angularjs - angularjs获取先前的路由路径

> ID：15175429
> 
> 赞同：51
> 
> 时间：2013-03-02T14:09:41.943
> 
> 标签：angularjs, angularjs-routing

```
<h1>{{header}}</h1>
<!-- This Back button has multiple option -->
<!-- In home page it will show menu -->
<!-- In other views it will show back link -->
<a ng-href="{{back.url}}">{{back.text}}</a>
<div ng-view></div> 
```

在我的模块配置中

```
 $routeProvider.
  when('/', {
    controller:HomeCtrl,
    templateUrl:'home.html'
  }).
  when('/menu', {
    controller:MenuCtrl,
    templateUrl:'menu.html'
  }).
  when('/items', {
    controller:ItemsCtrl,
    templateUrl:'items.html'
  }).
  otherwise({
    redirectto:'/'
  }); 
```

控制器

```
function HomeCtrl($scope, $rootScope){
  $rootScope.header = "Home";
  $rootScope.back = {url:'#/menu', text:'Menu'};
}

function MenuCtrl($scope, $rootScope){
  $rootScope.header = "Menu";
  $rootScope.back = {url:'#/', text:'Back'};
}

function ItemsCtrl($scope, $rootScope){
  $rootScope.header = "Items";
  $rootScope.back = {url:'#/', text:'Back'};
} 
```

正如您在我的控制器中看到的那样，我已经硬编码了后退按钮 url 和文本（实际上我不需要文本作为使用图像）。通过这种方式，我发现在某些情况下后退按钮导航不正确。我不能使用`history.back()`我的后退按钮更改为主页视图中的菜单链接。

所以我的问题是如何在控制器中获取先前的路由路径，或者是更好的方法来实现这一点？

我创建了一个[Plunker](http://plnkr.co/edit/I8mzXdpMTsYQ1XqrGq5k?p=preview)演示我的问题。请检查一下。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-09-19T12:41:27.160

该替代方案还提供了后退功能。

模板：

```
<a ng-click='back()'>Back</a> 
```

模块：

```
myModule.run(function ($rootScope, $location) {

    var history = [];

    $rootScope.$on('$routeChangeSuccess', function() {
        history.push($location.$$path);
    });

    $rootScope.back = function () {
        var prevUrl = history.length > 1 ? history.splice(-2)[0] : "/";
        $location.path(prevUrl);
    };

}); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-07-23T23:44:34.610

使用[$locationChangeStart 或 $locationChangeSuccess 事件](http://docs.angularjs.org/api/ng.$location#events)，第三个参数：

```
$scope.$on('$locationChangeStart',function(evt, absNewUrl, absOldUrl) {
   console.log('start', evt, absNewUrl, absOldUrl);
});
$scope.$on('$locationChangeSuccess',function(evt, absNewUrl, absOldUrl) {
   console.log('success', evt, absNewUrl, absOldUrl);
}); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-04-21T07:09:12.863

**在您的 html 中：**

```
<a href="javascript:void(0);" ng-click="go_back()">Go Back</a> 
```

**在您的主控制器上：**

```
$scope.go_back = function() { 
  $window.history.back();
}; 
```

**当用户点击返回链接时，控制器功能被调用，它将返回到先前的路线。**

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-07-11T13:36:18.853

@andresh 对我来说，locationChangeSuccess 代替了 routeChangeSuccess。

```
//Go back to the previous stage with this back() call
var history = [];
$rootScope.$on('$locationChangeSuccess', function() {
    history.push($location.$$path);
});

$rootScope.back = function () {
          var prevUrl = history.length > 1 ? history.splice(-2)[0] : "/";
          $location.path(prevUrl);
          history = []; //Delete history array after going back
      }; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-02-23T09:15:02.390

这就是我目前在以下位置存储对先前路径的引用的方式`$rootScope`：

```
run(['$rootScope', function($rootScope) {
        $rootScope.$on('$locationChangeStart', function() {
            $rootScope.previousPage = location.pathname;
        });
}]); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-11-03T16:59:46.897

您需要将事件侦听器与 Angular 1.x 中的 $rootScope 耦合，但您可能应该通过不将先前位置的值存储在 $rootScope 上来稍微证明您的代码。存储价值的更好地方是服务：

```
var app = angular.module('myApp', [])
.service('locationHistoryService', function(){
    return {
        previousLocation: null,

        store: function(location){
            this.previousLocation = location;
        },

        get: function(){
            return this.previousLocation;
        }
})
.run(['$rootScope', 'locationHistoryService', function($location, locationHistoryService){
    $rootScope.$on('$locationChangeSuccess', function(e, newLocation, oldLocation){
        locationHistoryService.store(oldLocation);
    });
}]); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-06T05:34:02.527

只是为了记录：

回调参数`previousRoute`有一个名为的属性，该属性与服务`$route`非常相似`$route`。不幸的是`currentRoute`，争论是没有太多关于当前路线的信息。

为了克服这个问题，我尝试了这样的事情。

```
$routeProvider.
   when('/', {
    controller:...,
    templateUrl:'...',
    routeName:"Home"
  }).
  when('/menu', {
    controller:...,
    templateUrl:'...',
    routeName:"Site Menu"
  }) 
```

请注意，在上述路由配置`routeName`中，添加了一个名为的自定义属性。

```
app.run(function($rootScope, $route){
    //Bind the `$routeChangeSuccess` event on the rootScope, so that we dont need to 
    //bind in induvidual controllers.
    $rootScope.$on('$routeChangeSuccess', function(currentRoute, previousRoute) {
        //This will give the custom property that we have defined while configuring the routes.
        console.log($route.current.routeName)
    })
}) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-02-23T11:10:56.033

修改上面的代码：

```
$scope.$on('$locationChangeStart',function(evt, absNewUrl, absOldUrl) {
   console.log('prev path: ' + absOldUrl.$$route.originalPath);
}); 
```

# html - HTAccess 重定向广告

> ID：15175430
> 
> 赞同：0
> 
> 时间：2013-03-02T14:09:59.413
> 
> 标签：html, .htaccess, mobile

为基于移动的重定向寻找 .htaccess 代码。计划是让用户每 24 小时被重定向一次到一个名为 yyy.org 的网站。

我需要检查它们是否符合移动标准。如果有，请检查他们是否有 cookie。如果两者都是真的，给他们一个 cookie 并将他们重定向到 yyy.org 站点。

重写条件：

```
 $RewriteCond %{HTTP_USER_AGENT} (mobile|android|blackberry|brew|cldc|docomo|htc|j2me|micromax|lg|midp|mot|motorola|netfront|nokia|obigo|openweb|opera.mini|palm|psp|samsung|sanyo|sch|sonyericsson|symbian|symbos|teleca|up.browser|vodafone|wap|webos|windows.ce) [NC] 
```

其他可能的代码：这还没有完成：

```
 RewriteBase /
RewriteEngine On

# Check if mobile=1 is set and set cookie 'mobile' equal to 1
RewriteCond %{QUERY_STRING} (^|&)mobile=1(&|$)
RewriteRule ^ - [CO=mobile:1:%{HTTP_HOST}:1440]

# Check if mobile=0 is set and set cookie 'mobile' equal to 0
RewriteCond %{QUERY_STRING} (^|&)mobile=0(&|$)
RewriteRule ^ - [CO=mobile:0:%{HTTP_HOST}:1440]

# cookie can't be set and read in the same request so check
RewriteCond %{QUERY_STRING} (^|&)mobile=0(&|$)
RewriteRule ^ - [S=1]

# Check if this looks like a mobile device
RewriteCond %{HTTP:x-wap-profile} !^$ [OR]
RewriteCond %{HTTP_USER_AGENT} (mobile|android|blackberry|brew|cldc|docomo|htc|j2me|micromax|lg|midp|mot|motorola|netfront|nokia|obigo|openweb|opera.mini|palm|psp|samsung|sanyo|sch|sonyericsson|symbian|symbos|teleca|up.browser|vodafone|wap|webos|windows.ce) [NC]
RewriteCond %{HTTP:Profile}       !^$

# Check to make sure we haven't set the cookie before
RewriteCond %{HTTP:Cookie}        !\mobile=0(;|$)
# Now redirect to the mobile site
RewriteRule ^ http://yyyy.com%{REQUEST_URI} [R,L] 
```

这可能吗，剩下的代码是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:14:02.770

如果他们是移动客户端，您可以将它们重定向到本地脚本，然后检查脚本中的 cookie 并根据 cookie 值执行操作，但是作为用户，我发现我被重定向到我没有请求的页面很烦人

您也可以将 rewritecond 用于这样的 cookie：

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_COOKIE} lang=([^;]+) [NC]
RewriteRule ^(.*)$ /$1?lang=%1 [NC,L,QSA] 
```

有关 cookie 和 htacces 的更多信息：[http ://www.askapache.com/htaccess/htaccess-fresh.html#Cookie_Manipulation_Tests_mod_rewrite](http://www.askapache.com/htaccess/htaccess-fresh.html#Cookie_Manipulation_Tests_mod_rewrite)

# jquery - 网站与本地网站不同 - Jquery 的不同呈现

> ID：15175432
> 
> 赞同：0
> 
> 时间：2013-03-02T14:10:13.330
> 
> 标签：jquery, html, google-chrome, localhost

我创建了一个 JQuery 插件，它创建了一个易于使用的图片库。画廊在我的本地服务器上看起来很好（我正在使用 Wampserver），我上传了它，它被完美地渲染了。现在几周后，他们看起来应该在网络服务器上，但不是在我的本地服务器上。我尝试过创建新文档，但它们都呈现相同的内容。然后我上传了其中一个文档，因此它在虚拟主机上完美呈现，但又不在我的本地。为什么？我该如何解决这个问题？我在网上找不到任何有关此问题的信息，而且我确信肯定还有其他人也遇到了这个问题。**注意：据我所知，这只发生在谷歌浏览器中！我的本地和网络主机都使用相同版本的 JQUERY！**

**渲染问题：** 在我的画廊中，过渡效果之一是“幻灯片”。在我的本地，他们现在比他们应该滑的更多，他们的起始位置不是它应该在的位置。如果我从右侧滑动，它们的位置会在起始位置的左侧。但是在网络服务器上，它们从正常的起始位置开始，并且不会滑动超过应有的位置。

**我已经尝试过这些“修复”：**

*   在 Google Chrome 上清除我的缓存（CTRL + F5）
*   创建新文档
*   在 IE10 上尝试（如果那是 Win8 正在使用的那个） -**有效**
*   清除谷歌浏览器上的所有网络信息（浏览历史除外）
*   将其上传到网络 -**有效**

**我的问题：**为什么它不能在我的本地驱动器上呈现它应该的样子？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:14:38.263

我以前遇到过这个问题，必须安装一个 Chrome 扩展程序才能正确丢弃缓存。我使用了[Clear Cache](https://chrome.google.com/webstore/detail/clear-cache/fkpampcchocandlbgdffjaihmccjmlgk)，尽管很多应该可以工作。

# android - 无法通过 id 找到 gridview

> ID：15175433
> 
> 赞同：0
> 
> 时间：2013-03-02T14:10:25.373
> 
> 标签：android, gridview

我的代码找不到 GridView`android:id="@+id/grid"`

找到我使用的gridview：`GridView grid = (GridView) ViewAlbum.this.findViewById(R.id.grid);`

在一个`ASyncTask`我必须做`adapter`一个`mysql`表。`Mysql`工作正常，但是当我试图找到`gridview`.

这是`onPostExecute`部分：

```
 protected void onPostExecute(String result){
            // dismiss dialog
            pDialog.dismiss();      
            // Add adapter to the list
            ViewAlbumAdapter adapter = new ViewAlbumAdapter(ViewAlbum.this, photoList);
            GridView grid = (GridView) ViewAlbum.this.findViewById(com.example.whs.R.id.grid);
            grid.setAdapter(adapter);
            grid.setOnItemClickListener(new OnItemClickListener(){
                public void onItemClick(AdapterView<?> a, View v,
                        int position, long id) {
                // do something
                }
            });
        } 
```

和网格视图：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".ViewAlbum" >

    <GridView android:id="@+id/grid"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:columnWidth="50dp"
        android:horizontalSpacing="5dp"
        />   

</RelativeLayout> 
```

这是错误的日志：

```
03-02 18:07:43.545: E/AndroidRuntime(16432): FATAL EXCEPTION: main
03-02 18:07:43.545: E/AndroidRuntime(16432): java.lang.NullPointerException
03-02 18:07:43.545: E/AndroidRuntime(16432):    at com.example.whs.ViewAlbum$LoadAllItems.onPostExecute(ViewAlbum.java:139)
03-02 18:07:43.545: E/AndroidRuntime(16432):    at com.example.whs.ViewAlbum$LoadAllItems.onPostExecute(ViewAlbum.java:1)
03-02 18:07:43.545: E/AndroidRuntime(16432):    at android.os.AsyncTask.finish(AsyncTask.java:631)
03-02 18:07:43.545: E/AndroidRuntime(16432):    at android.os.AsyncTask.access$600(AsyncTask.java:177)
03-02 18:07:43.545: E/AndroidRuntime(16432):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
03-02 18:07:43.545: E/AndroidRuntime(16432):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-02 18:07:43.545: E/AndroidRuntime(16432):    at android.os.Looper.loop(Looper.java:137)
03-02 18:07:43.545: E/AndroidRuntime(16432):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-02 18:07:43.545: E/AndroidRuntime(16432):    at java.lang.reflect.Method.invokeNative(Native Method)
03-02 18:07:43.545: E/AndroidRuntime(16432):    at java.lang.reflect.Method.invoke(Method.java:511)
03-02 18:07:43.545: E/AndroidRuntime(16432):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
03-02 18:07:43.545: E/AndroidRuntime(16432):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
03-02 18:07:43.545: E/AndroidRuntime(16432):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:12:01.993

确保您没有导入 android.R（Eclipse 会建议这样做）。你应该导入你的包的 .R

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:48:20.783

```
GridView grid = (GridView) ViewAlbum.this.findViewById(com.example.whs.R.id.grid); 
```

您不会以这种方式获得视图。

如果您的异步任务是同一活动中的内部类，则像这样调用 get

```
GridView grid = (GridView) getActivity().findViewById(com.example.whs.R.id.grid); 
```

如果您的异步任务在单独的类中，则需要扩展视图以访问您的网格视图

# c++ - 模板参数中的类指针 - 这有什么用？

> ID：15175434
> 
> 赞同：0
> 
> 时间：2013-03-02T14:10:47.810
> 
> 标签：c++, templates

```
template <typename T> struct s
{

};

template <> struct s<MyClass *>
{

};

... in main function
struct s<MyClass*> obj; 
```

上面的代码可以编译，但我真的看不出完全专业化能做什么

```
template <> struct s<MyClass *>
{

}; 
```

我不能像这样添加指针变量（既不是常量也不是静态的）

```
template <> struct s<MyClass *obj > // ERROR
{

}; 
```

那么上面的专业化有什么意义呢？我不能使用 MyClass *“匿名”指针

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:17:57.760

> 我不能像这样添加指针变量（既不是常量也不是静态的）

```
template <> struct s<MyClass *obj > // ERROR
[...] 
```

你可能在这里有一个误解。*如果您关心希望提供指向用户定义类的实例的指针作为非类型模板参数的用例，那么这与模板专业化*无关。

特别是，根据 C++11 标准的第 14.3.2/1 段，考虑您*可以将指向类的***全局**实例的指针指定为模板参数：

> 非类型、非模板模板参数的模板参数应为以下之一：
> 
> ——对于整数或枚举类型的非类型模板参数，模板参数类型的转换常量表达式（5.19）；或者
> 
> — 非类型模板参数的名称；或者
> 
> — 一个常量表达式 (5.19)，它指定**具有静态存储持续时间和外部或内部链接的对象**或具有外部或内部链接的函数的地址，包括函数模板和函数模板 ID，但不包括非静态类成员，表示为 (忽略括号）作为 & id 表达式，但如果名称引用函数或数组，则 & 可以省略，如果相应的模板参数是引用，则应省略；或者
> 
> [...]

这可能是您想要实现的目标：

```
struct MyClass { };

MyClass c;

template<MyClass* p>
//       ^^^^^^^^ Non-type template argument 
struct s
{
    // Possibly work with p
};

int main()
{
    s<&c> obj;
} 
```

* * *

**关于模板专业化**：

关于您编写​​的代码，您的主模板可以处理*任何*类型：

```
template <typename T> struct s
{
    // Definition...
}; 
```

当用于*实例*化主模板的参数为`MyClass*`：

```
template <> struct s<MyClass *>
{
     // Definition when the template argument is `MyClass*`
}; 
```

例如，您可以这样做：

```
struct MyClass { };

template <typename T> struct s
{
    void print() { cout << "Primary template!" << endl; }
};

template <> struct s<MyClass *>
{
    void print() { cout << "Specialization for MyClass*!" << endl; }
};

int main()
{
    s<int> obj;
    obj.print(); // Will print "Primary template!"

    s<MyClass*> obj;
    obj.print(); // Will print "Specialization for MyClass*!"
} 
```

另请注意，专用模板的定义可能与主模板的定义*完全不同：*

```
template <typename T> struct s
{
    void print() { cout << "Primary template!" << endl; }
};

template <> struct s<MyClass *>
{
    void greet() { cout << "Specialization for MyClass*!" << endl; }
};

int main()
{
    s<int> obj;
    obj.print(); // Will print "Primary template!"

    s<MyClass*> obj;
    obj.greet(); // Will print "Specialization for MyClass*!"
    obj.print(); // ERROR! s<MyClass*> has no `print()` member function
} 
```

当然，这只是类模板特化如何工作的一个示例。以我的方式区分主要模板和专用模板的定义没有任何用处。

但是，存在许多用于此的实际用例。例如，可以针对某些特定类型以完全不同的方式优化和重写通用算法。

模板专业化的另一个重要应用是定义*特征*，您可能想了解它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:13:58.023

当您实例化模板（隐式或显式）时，您提供了一个类型：

```
s<int> s1;
s<float> s2;
s<MyClass> s3; 
```

这些对象都将是模板`s`的实例，分别`T`推导为`int`、`float`和`MyClass`。例如，如果`s`实际上是这样定义的：

```
template <typename T> struct s {
  T x;
}; 
```

然后该对象`s1`有一个名为`x`type的成员`int`，`s2`有一个名为`x`of type的成员`float`，还有一个名为 of type`s3`的成员。`x``MyClass`

您给出的显式特化的要点是提供`s`传递给模板参数的类型何时为 a 的不同实现`MyClass*`，如下所示：

```
s<MyClass*> s4; 
```

例如，考虑一个如下所示的显式特化：

```
template <> struct s<MyClass*>
{
  int x;
}; 
```

`s4`尽管它的模板参数是，但该对象将`MyClass*`有一个名为`x`type的成员`int`。我们特别说过“当模板参数类型为`MyClass*`时，结构将有一个成员`int x`。”

该`s4`对象将使用 的显式特化`s`，而不是更通用的版本。当您知道模板参数是一个`MyClass*`.

# android - android找到正确的电话号码

> ID：15175439
> 
> 赞同：1
> 
> 时间：2013-03-02T14:11:16.380
> 
> 标签：android, android-contacts

给定一个电话号码作为字符串，我如何找到它存储在联系人中的正确值？

示例：
给定电话号码：9743343954
联系人中的电话号码：+919743343954

编辑：数字的长度不固定。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T16:06:16.267

我不确定我是否理解您的意思，但也许这会对您有所帮助：

```
 //Find contact by given number
    Uri uri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, Uri.encode("9743343954"));
    String[] projection = new String[] { PhoneLookup.NUMBER, PhoneLookup.NORMALIZED_NUMBER };
    Cursor c = getContentResolver().query(uri, projection, null, null, null);
    if (c.moveToFirst()) {// while(c.moveToNext()){
        //get number assigned by user to given contact, in this case 9743343954
        String number = c.getString(c.getColumnIndexOrThrow(PhoneLookup.NUMBER));
        //get normalized E164 number, in this case +919743343954
        String normalized = c.getString(c.getColumnIndexOrThrow(PhoneLookup.NORMALIZED_NUMBER));
        Toast.makeText(getApplicationContext(), "Number: " + number + "; normalized: " + normalized,
                Toast.LENGTH_LONG).show();
    }
    c.close(); 
```

要使其正常工作，请向项目清单添加权限：

```
 <uses-permission android:name="android.permission.READ_CONTACTS" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T14:43:08.753

使用您的示例，电话号码的长度为 10 个字符，在联系人中为 13 个字符，并且您希望其中的最后 10 个字符匹配。所以，像：

```
// I am assuming that you've removed all spaces, full stops,
// dashes etc from the two input variables
public boolean numbersMatch(String numberToMatch, String numberFromContacts) {
    // Ensure that the both numbers are of a reasonable length
    if (numberToMatch.length() < 9) return false;
    if (numberFromContacts.length() < 9) return false;

    // Is the number to match hidden in the contacts number
    if (numberFromContacts.lastIndexOf(numberToMatch) != -1) return true;

    // Or is the contact number hidden in the number to macth
    if (numberToMatch.lastIndexOf(numberFromContacts) != -1) return true;

    // No match, so return false
    return false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T15:41:30.153

你为什么不这样做

假设给定的电话号码是

```
String a = "9123456789"; 
```

联系人中的一个是

```
String b = "+91-9123456789"; 
```

然后您可以通过这种方式轻松检查

```
if(b.contains(a))
{
//Do what you want!
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-20T11:56:22.867

如果您想获取关联的联系人（或相关信息），@Lecho 的答案似乎很好。此页面上的更多信息来自 android 文档[http://developer.android.com/reference/android/provider/ContactsContract.PhoneLookup.html](http://developer.android.com/reference/android/provider/ContactsContract.PhoneLookup.html)

据我所知，PhoneLookup.NORMALIZED_NUMBER 从 API 16 开始可用。

另一方面，如果您想比较 2 个数字以查看它们是否相同但以两种不同的方式格式化，您可以使用：

```
PhoneNumberUtils.compare(phoneNumber1, phoneNumber2) 
```

最好的，

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-02T15:28:44.440

第一步是删除所有多余的空格和多余的字符：

```
//Removes the extra characters from the incoming number
    private String removeExtraCharacters(String phoneNumber){
        try
        {
            phoneNumber = phoneNumber.replace("(", "");
            phoneNumber = phoneNumber.replace(")", "");
            phoneNumber = phoneNumber.replace("-", "");
            phoneNumber = phoneNumber.replace(" ", "");
            phoneNumber = phoneNumber.replace("+", "");

        }
        catch (Exception e) 
        {
            Log.e("Cal Reciever_R", e.toString());
        }
        return phoneNumber;
    } 
```

现在您可以使用 substring 方法获取 10 位数字并忽略前面的 +91，如下所示：

```
phoneNumber =phoneNumber .substring(phoneNumber .length()-10); 
```

# c - 谁能解释输出

> ID：15175441
> 
> 赞同：4
> 
> 时间：2013-03-02T14:11:41.493
> 
> 标签：c, macros, output, printf

```
#define power(a) #a
  int main()
  {
    printf("%d",*power(432));
     return 0;
  } 
```

谁能解释一下o/p？？
[o/p 是](http://ideone.com/7cromp)

52

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-02T14:13:01.913

它相当于：

```
printf("%d",*"432"); 
```

这相当于：

```
printf("%d", '4'); 
```

`'4'`的ASCII 值为`52`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T17:38:09.997

```
#define power(a) #a   //# is a stringization operation in macro
  int main()
  {
    printf("%d",*power(432));
     return 0;
  }

Hence after calling power(432), macro will return it "432" and applying * on it gives first value which is nothing but 52 (48 + 4) for '4' . 
```

# cocos2d-iphone - 如何像老虎机一样为 Lable 上的文本设置动画？

> ID：15175444
> 
> 赞同：0
> 
> 时间：2013-03-02T14:11:51.033
> 
> 标签：cocos2d-iphone, bitmap-fonts, cclabelttf

我想在标签文本上执行动画。我需要在标签上显示 10。标签应首先显示以 0 开头，然后 1 ,2 ,3 ....以 10 结尾。

示例：显示数字动画似乎在插槽轮中。

我应该如何做到这一点？cocos 2d有什么技巧吗？

有没有人知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:36:51.443

首先将标签设置为实例变量。

```
// In your .h
CCTabelTTF *_myLabeL; 
```

然后（假设您已经在项目中添加了它）为它创建一个更新方法

```
- (void)updateLabel {
    int currentVal = [_myLabel intValue];
    NSString *newString;

    currentVal += 1;
    newString = [NSString stringWithFormat:@"%i", currentVal];

    [_myLabel setString:newString];
} 
```

现在我们可以创建一个方法来调用您的更新：

```
- (void)startUpdatingLabel:(int)newValue {
    int curVal = [_myLabel intValue];
    int difference = newValue-curVal;
    for(int i=0; i > difference; i++) {
        [self performSelector:@select(updateLabel) withObject:nil afterDelay:1.0];
    }
} 
```

然后，每当您想更新标签（例如 10）时，您所要做的就是调用

```
[self startUpdatingLabel:10]; 
```

它会每 1 秒将您的标签更新 1，直到达到新值

# php - 产品移动算法排名（基于销售单位和净收入）

> ID：15175445
> 
> 赞同：0
> 
> 时间：2013-03-02T14:11:50.900
> 
> 标签：php, python, mysql, algorithm, ranking

我不完全确定这是否是问这个问题的正确地方。希望有人能给出答案或提供一些建议。

我经营一家销售商品的小商店。我有一个程序/电子表格，将列出最热门的移动项目。

我可以按售出的总数量对这些信息进行排序：

```
Product 1, 15  
Product 2, 12  
Product 3, 7 
```

...或按总销售额计算：

```
Product 2, $250.00   
Product 1, $75.00  
Product 3, $30.00 
```

我想在这两个值之间创建一个组合排名。我有编程（PHP、Python、Perl 等）和数据库经验。我想知道是否有某种方法可以通过收入和单位的综合价值来确定最重要的推动者。例如，产品 1 销售更多单位，但带来的收入更少。也许产品 2 更重要。也许是一个基于积分的系统，其中每售出一件商品可获得 1.5 分，每售出 1 美元可获得 2 分。（货币稍微重要）

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:51:32.147

我也不确定这是否是提出此类问题的正确地方。似乎您要求的是算法或**一些标准的业务规则**，但要求的是最终代码。

好吧，我发布了一种提出新想法的方法。我构建了一个算法列表并测试最高值：

```
import math

fs = [
 ('Plain coef',    lambda m: math.log(m[1]* units_coef)  
                           + math.log(m[2]* money_coef)  ),
 ('Coef into log', lambda m: m[1]* units_coef 
                           + m[2]* money_coef                       ),
 ('Coef out log',  lambda m: math.log(m[1])* units_coef  
                           + math.log(m[2]) * money_coef ),
 ('Coef out log2',  lambda m: math.log(m[1],2)* units_coef  
                           + math.log(m[2],2) * money_coef ),
]

movings = [ ( 'product1', 1500,    75.00 ),
            ( 'product2',    2, 90000.00 ),
            ( 'product3', 1200,  8000.00 ),
            ( 'product4',    6,  4000.00 ),
            ( 'product5',  500,  1000.00 ),
            ( 'product6',  800,  1200.00 ),
            ( 'product7',  300,   800.00 ),
           ]

units_coef = 1.1
money_coef = 0.04

for (n,f) in fs:
    print ''
    print n
    print '==============================================='
    for i in sorted( movings, 
                     key = lambda m: f(m) , 
                     reverse=True)[:3]:
        print i, f(i) 
```

结果：

```
$ python solds.py 

Plain coef
===============================================
('product3', 1200, 8000.0) 12.9537080114
('product6', 800, 1200.0) 10.6511229184
('product5', 500, 1000.0) 9.99879773234

Coef into log
===============================================
('product2', 2, 90000.0) 3602.2
('product1', 1500, 75.0) 1653.0
('product3', 1200, 8000.0) 1640.0

Coef out log
===============================================
('product1', 1500, 75.0) 8.21724195034
('product3', 1200, 8000.0) 8.15857239218
('product6', 800, 1200.0) 7.63667597387

Coef out log2
===============================================
('product1', 1500, 75.0) 11.8549742115
('product3', 1200, 8000.0) 11.7703319309
('product6', 800, 1200.0) 11.0173945564 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:24:46.447

假设您使用的是 MySQL，那么这个查询应该非常接近您正在寻找的内容：

```
SELECT Product, 
  CAST(1.5*UnitsSold as DECIMAL) + 2*DollarsSold OverallRank
FROM YourTable
ORDER BY OverallRank DESC 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/973bb/2)

如果没有，同样的概念应该在电子表格中起作用。

# javascript - Node.js：如何在提交时读取用户选择选项并在 textarea 中提供文件内容

> ID：15175446
> 
> 赞同：1
> 
> 时间：2013-03-02T14:11:54.950
> 
> 标签：javascript, html, node.js, web-applications, web

这里是 Node.js 初学者，请多多包涵。也许我有点慢，但我不知道如何在用户提交后读取选择框选项，然后根据选择的内容采取一些行动。基本上，我在 HTML 中有这样的东西

```
<select>
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi</option>
</select>
<input type="submit" value="Submit" />
<textarea id="textarea" rows="10" cols="100">
</textarea> 
```

现在我要做的就是当用户选择沃尔沃并提交时，从服务器读取一个文件（volvo.txt），该文件的内容包含在 textarea 中。用户是否被重定向到某个 /submit 子站点并且与起始页上显示的内容相同是无关紧要的。看起来这应该是一件容易的事，但也许我遗漏了一些明显的东西。谢谢你的帮助！

编辑：忘了提到我正在寻找一个利用 Node.js 的服务器端解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T14:22:35.957

您需要围绕您的选择一个标签，所有元素都需要一个`name`属性。然后就可以在 node.js 上处理数据了。我建议从[express.js](http://expressjs.com)开始。[本指南](http://www.hacksparrow.com/form-handling-processing-in-express-js.html)逐步解释了它的工作原理。

要读取文件并响应客户端，请参阅[nodejitsu 中的这篇文章](http://docs.nodejitsu.com/articles/file-system/how-to-read-files-in-nodejs)。

# php - 让tinymce显示我在textarea中输入的内容？

> ID：15175449
> 
> 赞同：1
> 
> 时间：2013-03-02T14:12:24.200
> 
> 标签：php, html, tinymce, textarea, tinyxml

目前，我能够将内容发布到数据库并通过 SQL 查询检索这些内容。

不幸的是，当我检索内容时，它在网页上显示为这样

```
&lt;p&gt;Shaun this is the record&lt;/p&gt; &lt;p&gt;The next line of the r... 
```

我知道这很可能与配置有关，我尝试了几种解决方案，但都失败了。

有人可以指导我在我的配置中应该有什么吗？

这是我当前配置的样子，它只是放在 php 文件的标签中：

```
<head>
<script language="javascript" type="text/javascript" src="/tinymce/jscripts/tiny_mce/tiny_mce.js"></script>
<script language="javascript" type="text/javascript">
tinyMCE.init({        
            theme : "advanced",       
            mode : "textareas",
            encoding : "xml"});
</script>
</head> 
```

感谢您的宝贵时间，任何解决方案都会很棒！

```
$sql = "SELECT * ".
   "FROM podContent ORDER BY id DESC ".
   "LIMIT $offset, $rec_limit ";

$podText = htmlspecialchars_decode($row['imageName']);

$retval = mysql_query( $sql, $con );
if(! $retval )
{
  die('Could not get data: ' . mysql_error());
}
while($row = mysql_fetch_array($retval, MYSQL_ASSOC))
{
echo "<div class=\"pods\">";
echo "<a href=\"/page.php?id={$row['id']}\">";
echo "<div class=\"podHeading\">";  
echo "{$row['heading']}</a> <br> ";
echo "</div>";
echo "<div class=\"podImage\">";    
echo "<img src=\"images/{$row['imageName']}\">";
echo "</div>";

$string = $podText;
if(strlen($string) > 100) {
echo substr($string, 0, 100).'...'.$hyperlink;}
else {
echo $string; 
```

}

您应该寻找 $podText 变量和 $string 变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:19:29.033

您可以使用 php 函数将这些字符解码回来

```
$variable_to_display = htmlspecialchars_decode($variable_from_database); 
```

尝试这个

```
$sql = "SELECT * ".
   "FROM podContent ORDER BY id DESC ".
   "LIMIT $offset, $rec_limit ";

$retval = mysql_query( $sql, $con );
if(! $retval )
{
  die('Could not get data: ' . mysql_error());
}
while($row = mysql_fetch_array($retval, MYSQL_ASSOC))
{

echo "<div class=\"pods\">";
echo "<a href=\"/page.php?id={$row['id']}\">";
echo "<div class=\"podHeading\">";  
echo "{$row['heading']}</a> <br> ";
echo "</div>";
echo "<div class=\"podImage\">";    
echo "<img src=\"images/{$row['imageName']}\">";
echo "</div>";

$podText = htmlspecialchars_decode($row['imageName']);

$string = $podText;
if(strlen($string) > 100) {
echo substr($string, 0, 100).'...'.$hyperlink;}
else {
echo $string; 
```

# opengl - OpenCL-OpenGL 互操作性（FBO 纹理作为 OpenCL 中的图像源）

> ID：15175450
> 
> 赞同：0
> 
> 时间：2013-03-02T14:12:31.507
> 
> 标签：opengl, interop, opencl, fbo

我已经使用像素缓冲区对象（用于后处理 OpenGL 结果图像）测试了 OpenCL-OpenGL 互操作性，这很好。但是，如果我使用纹理，我总是会出错，作为颜色组件附加到用于 offsreen 渲染的帧缓冲区对象。使用 FBO 纹理作为 OpenCL 图像缓冲区是否存在任何已知问题？调用 clEnqueueAcquireGLObjects 或 clEnqueueNDRangeKernel 时可能会出现错误。

# jquery - jquery ajax方法返回空值

> ID：15175452
> 
> 赞同：0
> 
> 时间：2013-03-02T14:12:41.003
> 
> 标签：jquery, asp.net, ajax, json

我有一个像这样的ajax函数：

```
 $.ajax({
        type: "POST",
        url: 'AjaxControls.aspx/CreateUserLevel',
        data: { LevelNameAddLevel: $('#LevelNameAddLevel').val() },
        dataType: "json",
        success: function (response)
        {
            console.log(response);
            if (response == "true")
            {
            $("#ErrorDivAddLevel").html('Level created  successfully!').fadeIn('slow');
             }
            else
             {
                $("#SuccessDivAddLevel").html('Level creation failed!').fadeIn('slow');
             }
         }
}); 
```

问题是响应返回了一个空值。

网络方法是：

```
<WebMethod(EnableSession:=False)>
Public Shared Function CreateUserLevel() As String
    Return "true"
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:24:40.860

首先你应该有 contentType 否则它不知道它的解析，例如`contentType: "application/json",` ，你应该对你的数据进行分类

```
data: JSON.stringify({ LevelNameAddLevel: $('#LevelNameAddLevel').val() }), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:38:34.707

您将参数（数据）发送到 Web 方法，那么为什么没有收到参数（数据）。

我认为这是问题所在，所以你能改变你的台词吗

```
Public Shared Function CreateUserLevel(LevelNameAddLevel As String) As String
    Return "true"
End Function 
```

# cassandra - 向现有集群添加新节点

> ID：15175453
> 
> 赞同：2
> 
> 时间：2013-03-02T14:12:41.833
> 
> 标签：cassandra

添加数据后，是否可以在 cassandra 1.2 中的现有集群中添加新节点而无需`nodetool cleanup`在每个单独的节点上运行？

可能不是，但我需要问一下，因为我正在尝试创建一个应用程序，其中每个用户的机器都是允许无限扩展的服务器。

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:10:43.197

对的，这是可能的。但是你应该意识到不这样做的副作用。

`nodetool cleanup`清除不再分配给该节点的键。根据[Apache 文档](http://wiki.apache.org/cassandra/Operations)，这些键会计入为该节点分配的数据，这可能会导致*下一个*节点的自动引导过程无法正确平衡环。因此，取决于您如何将新的用户机器带入环中，这可能是也可能不是问题。

还要记住，`nodetool cleanup`只需要在丢失密钥空间到新节点的节点上运行 - 即集群中的相邻节点，而不是所有节点。

# c# - 使用 Linq 和枚举进行 RavenDB 查询

> ID：15175457
> 
> 赞同：1
> 
> 时间：2013-03-02T14:12:48.373
> 
> 标签：c#, linq, ravendb

给定这个文档类：

```
public class Tea
{
   public String Id { get; set; }

   public String Name { get; set; }

   public TeaType Type { get; set; }

   public Double WaterTemp { get; set; }

   public Int32 SleepTime { get; set; }
}

public enum TeaType
{
    Black,
    Green,
    Yellow,
    Oolong
} 
```

我使用以下代码存储新茶：

```
using (var ds = new DocumentStore { Url = "http://localhost:8080/" }.Initialize())
using (var session = ds.OpenSession("RavenDBFirstSteps"))
{
    Tea tea = new Tea() { Name = "Earl Grey", Type = TeaType.Black, WaterTemp = 99d, SleepTime = 3 };
    session.Store(tea);
    session.SaveChanges();
    Console.WriteLine(tea.Id);
} 
```

茶将被成功保存，但是当我尝试使用 linq 查询所有红茶时，我没有得到任何结果：

```
using (var ds = new DocumentStore { Url = "http://localhost:8080/" }.Initialize())
using (var session = ds.OpenSession("RavenDBFirstSteps"))
{
    var dbTeas = from teas in session.Query<Tea>()
                    where teas.Type == TeaType.Black
                    select teas;

    foreach (var dbTea in dbTeas)
    {
        Console.WriteLine(dbTea.Id + ": " + dbTea.Name);
    }
} 
```

我还尝试使用以下命令将 Enum 保存为 Integer：

```
ds.Conventions.SaveEnumsAsIntegers = true; 
```

但是，结果是一样的。当我使用名称或 WaterTemp 时，一切正常。RavenDB 是否以这种方式支持枚举，或者我完全错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:11:28.293

似乎我得到了答案。始终不建议使用名称如 Type 的属性，它可以是保留关键字。

我重命名了 Type 并且一切正常，所以答案是：

```
public class Tea
{
   public String Id { get; set; }

   public String Name { get; set; }

   public TeaType TeaType { get; set; }

   public Double WaterTemp { get; set; }

   public Int32 SleepTime { get; set; }
} 
```

# c# - 与多个从站通信（基于 Modbus 协议）

> ID：15175461
> 
> 赞同：2
> 
> 时间：2013-03-02T14:13:23.050
> 
> 标签：c#, .net, modbus

我正在开发一个应用程序，让我们说 50-60 个 Modbus 支持设备（从站）连接到一个 Com 端口，这些设备在请求响应机制中与我的应用程序通信。

我想要每 15 分钟后。请求应该发送到每个仪表，并从仪表一个接一个地接收响应。与多个从站通信（基于 Modbus 协议）

为此，我使用 System.Timers.timer 来调用该方法，让我们在每 15 分钟后说 ReadAllSlave()。在 ReadAllSlave() 我使用 For 循环来发送请求并接收响应并使用 thread.sleep 来维持延迟..！但似乎它不工作并且循环以该死的有线方式执行。

```
private void StartPoll()
   {
      double txtSampleRate = 15 * 60 * 1000;
      timer.Interval = txtSampleRate;
      timer.AutoReset = true;
      timer.Start();
   }

void timer_Elapsed(object sender, ElapsedEventArgs e)
{
 for(int index = 0; index<meterCount; Index++)
 {
       //Sending request to connected meter..  
       mb.SendFc3(m_slaveID[0], m_startRegAdd[0], m_noOfReg[0], ref value_meter);
       if (mb.modbusStatus == "Read successful")
           {

                   //Some code for writing the values in SQL Express database
           }

       //Wait for some time so that will not get timeout error for the next 
       //request..
       Thread.Sleep(10000);

  }
} 
```

任何人都可以建议我实现相同的最佳方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T09:28:20.617

看起来你的问题是一个微不足道的问题......你总是在审问同一个奴隶！“索引”从未在您的代码中使用...

像这样的东西怎么样：

```
mb.SendFc3(m_slaveID[index], m_startRegAdd[index], m_noOfReg[index], ref value_meter); 
```

# jquery - 如何为 DataTable 中的每一行设置/获取自定义数据

> ID：15175463
> 
> 赞同：0
> 
> 时间：2013-03-02T14:13:26.267
> 
> 标签：jquery, datatables

有什么方法可以向 DataTable 中的每一行添加/获取一些自定义隐藏数据？每一行都是可点击的，点击后应该执行以 id 作为参数的函数，但这个 id 不应该显示在我的数据表中。

所以基本上，我正在搜索“输入类型=隐藏”之类的东西，但要搜索数据表。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:21:18.150

您可以通过以下命令隐藏列：

`fnSetColumnVis( 1, false );`

如此处所述：[jquery datatables hide column](https://stackoverflow.com/questions/5654633/jquery-datatables-hide-column)

# php - 使用带有非数组的 vsprintf 作为参数

> ID：15175464
> 
> 赞同：3
> 
> 时间：2013-03-02T14:13:35.797
> 
> 标签：php

```
echo vsprintf('%s', 'word'); 
```

根据手册，`vsprintf()`函数的第二个参数必须是数组。

但这有效，正常吗？这有时会导致一些错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T14:15:29.487

参数自动转换为`$args`数组：

```
$args = (array)$args;                            // = array('word'); 
```

# matlab - 使用 mrdivide 时出错

> ID：15175467
> 
> 赞同：0
> 
> 时间：2013-03-02T14:13:53.690
> 
> 标签：matlab

我从互联网上找到了这段代码，在运行代码时输出正确显示，但我仍然收到一个错误，这在将代码与 java 一起使用时会产生问题。

这是代码：

```
file_name='lena.bmp'; 
cover_object=double(imread(file_name)); 
mc=size(cover_object,1); 
nc=size(cover_object,2); 
file_name='dmg2.bmp'; 
message=double(imread(file_name)); 
mm=size(message,1); 
nm=size(message,2); 
[ca,ch,cv,cd]=dwt2(cover_object,'haar'); 
ca1=ca; 
qiangdu=1; 
for i=1:nm 
    for j=1:nm 
        if(message(i,j)==0) 
            ca1(i,j)=ca(i,j)+qiangdu; 
        end 
    end 
end 
watermarked_image=idwt2(ca1,ch,cv,cd,'haar'); 
watermarked_image_round=round(watermarked_image); 
watermarked_image_uint8=uint8(watermarked_image_round); 
imshow(watermarked_image_uint8);  
figure(2) 
imshow(watermarked_image_uint8,[]) 
title('watermarked image') 
imwrite(watermarked_image_uint8,'dwt_watermarked.bmp','bmp'); 
xsz=mc*nc*max(max(cover_object.^2))/sum(sum((cover_objectwatermarked_image_round).^2)); 
psnr=10*log10(xsz); 
```

这是我得到的错误：

```
Error using ==> mrdivide
Input arguments must be 2-D.

Error in ==> emb at 33
xsz=mc*nc*max(max(cover_object.^2))/sum(sum((cover_object-watermarked_image_round).^2)); 
```

编辑 1：为了将 java 与 matlab 链接，我使用了一个开源的 Matlab Control google 代码，从命令行 javac Dwtembed.java 运行此代码。如果你复制粘贴下面的代码并检查一下，你就会明白我实际上想要做什么

```
import matlabcontrol.*;
class Dwtembed
{
public static void main(String[] args) throws MatlabConnectionException, MatlabInvocationException
{
        //Create a proxy, which we will use to control MATLAB
        MatlabProxyFactory factory = new MatlabProxyFactory();
        MatlabProxy proxy = factory.getProxy();

        proxy.eval("file_name='lena.bmp';"); 
    proxy.eval("cover_object=double(imread(file_name));"); 
    proxy.eval("mc=size(cover_object,1);"); 
    proxy.eval("nc=size(cover_object,2);"); 
    proxy.eval("file_name='dmg2.bmp';"); 
    proxy.eval("message=double(imread(file_name));"); 
    proxy.eval("mm=size(message,1);"); 
    proxy.eval("nm=size(message,2);"); 
    proxy.eval("[ca,ch,cv,cd]=dwt2(cover_object,'haar');"); 
    proxy.eval("ca1=ca;"); 

    proxy.eval("qiangdu=1;"); 

    proxy.eval("for i=1:nm"); 
            proxy.eval("for j=1:nm"); 
                proxy.eval("if(message(i,j)==0)"); 
                    proxy.eval("ca1(i,j)=ca(i,j)+qiangdu;"); 
                proxy.eval("end"); 
            proxy.eval("end"); 
    proxy.eval("end"); 

    proxy.eval("watermarked_image=idwt2(ca1,ch,cv,cd,'haar');"); 
    proxy.eval("watermarked_image_round=round(watermarked_image);"); 
    proxy.eval("watermarked_image_uint8=uint8(watermarked_image_round);"); 
    proxy.eval("imshow(watermarked_image_uint8);"); 

    proxy.eval("figure(2);");
    proxy.eval("imshow(watermarked_image_uint8,[]);");
    proxy.eval("title('watermarked image');");
    proxy.eval("imwrite(watermarked_image_uint8,'dwt_watermarked.bmp','bmp');"); 
    proxy.eval("xsz=mc*nc*max(max(cover_object.^2))./sum(sum((cover_object-watermarked_image_round).^2));"); 
    proxy.eval("psnr=10*log10(xsz);");

        //Disconnect the proxy from MATLAB
        proxy.disconnect();
}
} 
```

# objective-c - 自定义 uitableviewcell 不会显示标签文本

> ID：15175472
> 
> 赞同：1
> 
> 时间：2013-03-02T14:14:25.747
> 
> 标签：objective-c, cocoa-touch, uitableview

标签的值也为空。

我不确定发生了什么。

这些是我的课程/代码

```
@interface CustomEventCell : UITableViewCell{

}

@property (nonatomic, weak) IBOutlet UILabel *participant1label;
@property (nonatomic, weak) IBOutlet UILabel *participant2label;
@property (nonatomic, weak) IBOutlet UILabel *status;

@end 
```

事件模型是

```
@interface Event : NSObject{
}
@property NSNumber *matchId;
@property NSString *participant1, *participant2,
-(id)init;
@end 
```

这是填满单元格的表格视图

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"EventCell";

    CustomEventCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell == nil)
    {
        cell = [[CustomEventCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // events is a NSMutableArray with Event instances
    Event *event = [events objectAtIndex:indexPath.row];

    cell.participant1label.text = event.participant1;

    return cell;
   } 
```

这是我的设置

![在此处输入图像描述](../Images/cfd93bf4789f676fb790d626690db7d3.png) ![在此处输入图像描述](../Images/dabfc2c996d1dae68b2ca1af4a961160.png)

![在此处输入图像描述](../Images/e949ac52eca906080517a72d4802eb16.png)

![在此处输入图像描述](../Images/4a0cc3a9dbed65ab9f3e938b7ef5f921.png)

我必须遗漏一些东西，因为我有另一个 uitableview 并且它可以毫无问题地填充自定义。我比较了它们，它们是相同的。我什至尝试回到常规标签，它会填满它，但不是这个自定义标签。

编辑：

修改了错误的复制代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:50:11.257

我编写了一个简单的小测试应用程序，试图复制您希望看到的工作。我已经使用 Storyboards[在这里提供了它。](http://ericgorr.net/cocoadev/iOSTableViewCustomCellSB.zip)如果您无法从中弄清楚，那么也许您可以使用测试应用程序并对其进行修改，以便它复制您所看到的不良行为。

关于可能发生的事情，我最好的猜测是，当您初始化单元格时，它没有连接到 xib 中的视图。

尝试在以下位置设置断点：

```
cell.participant1label.text = event.participant1; 
```

并通过以下方式验证 cell.participant1label 不为零：

```
NSLog( @"cell.participant1label: %@", cell.participant1label ); 
```

我有一个小错误，其中没有显示我的自定义标签，并且 cell.participant1label 为零。原因是我没有将自定义表格视图单元格的标识符设置为“EventCell”。因此，我可能会建议重新检查并确保标识符在您的代码和 XIB 之间确实匹配。

# java - 使用 GridLayout 对齐文本字段输入的问题

> ID：15175479
> 
> 赞同：0
> 
> 时间：2013-03-02T14:15:06.807
> 
> 标签：java, button, jtextfield, grid-layout

我想使用java框架制作一个表格。我有两个字段`Name`和`Age`. 输入详细信息后，单击按钮时，输入的数据必须显示如下所示，但我不确定如何对齐。

```
The entered data are:
     FirstName: abcd
     LastName: efg 
```

这是我到目前为止所拥有的：

```
import java.awt.*;
import java.awt.event.*;

public class DataEntry {
  public static void main(String[] args) {
         Frame frm=new Frame("DataEntry frame");
         Label lbl = new Label("Please fill this blank:");
         frm.add(lbl);
         frm.setSize(350,200);
         frm.setVisible(true);
         frm.addWindowListener(new WindowAdapter(){
             public void windowClosing(WindowEvent e){
                     System.exit(0);
         }
        });

       Panel p = new Panel();
       Panel p1 = new Panel();
       Label jFirstName = new Label("First Name");
       TextField lFirstName = new TextField(20);
       Label jLastName =new Label("Last Name");
       TextField lLastName=new TextField(20);
       p.setLayout(new GridLayout(3,1));
       p.add(jFirstName);
       p.add(lFirstName);
       p.add(jLastName);
       p.add(lLastName);
       Button Submit=new Button("Submit");
       p.add(Submit);
       p1.add(p);
       frm.add(p1,BorderLayout.NORTH);
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T14:25:59.550

首先，您需要在单击按钮时向按钮添加一个事件。

```
submit.addActionListener(new ActionListener() {
         public void actionPerformed(ActionEvent e)
         {
             // Add the code to output the relevant details. 
         }
    } 
```

然后由您将相关代码添加到方法体中。你应该阅读[文档](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JButton.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:28:18.807

为您的“提交”按钮添加一个监听器：

```
Submit.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        myLabelForShowingTheOutput.setText("<html><body>Name: " + lFirstName + "<br>Last name: " + lLastName + "</body></html>");
    }
}); 
```

请注意，“myLabelForShowingTheOutput”是您要打印的 JLabel。要打印的文本是基本的 HTML，因此标签可以显示多行。没有 HTML 的其他方法是为名称创建一个 JLabel，为年龄创建另一个。另请注意，我确实在输出中输入了姓氏，因为该年龄没有明显的 JTextField。

还要记住，变量的名称应该以小写开头，所以提交将是“提交”。

# node.js - Node.js + MongoDB：生成更短的 ID

> ID：15175486
> 
> 赞同：1
> 
> 时间：2013-03-02T14:15:59.023
> 
> 标签：node.js, mongodb

我想用 Node.js 和 MongoDB 创建论坛脚本，但是在 Mongo 的情况下，ID 很长。我已经在寻找解决方案，但除了我需要自己创建 ID 的帖子之外，我什么也没找到。我对 PHP 和 MySQL 了解更多，但除了论坛之外，我还需要 Node 来进行一些实时应用程序。我会使用生成的 ID 来识别论坛帖子，在它旁边是线程的标题 - 像这样：address.domain/1/my-new-thread。

你给我推荐什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T12:41:50.330

我使用[过 mongoose-pureautoinc](https://github.com/mylovecompany/mongoose-pureautoinc)，它可以正常工作。

# java - JAR 文件 tomcat-apr-5.5.23.jar 没有源附件

> ID：15175487
> 
> 赞同：0
> 
> 时间：2013-03-02T14:16:02.983
> 
> 标签：java, jar, attachment, unsatisfiedlinkerror

***客观的 ：***

我正试图解决一个问题。我在我的 JAVA 程序中使用了“tomcat-apr”库。该库的构建路径已正确配置，并且此 apr 项目中的类文件可由我使用的 java 类检测到。

***情况 ：***

现在，当我尝试编译使用此 apr 库的 .java 文件时，会生成一个名为：

> 线程“main”中的异常 java.lang.UnsatisfiedLinkError: org.apache.tomcat.jni.Time.now()J at org.apache.tomcat.jni.Time.now(Native Method) at com.nxLog.NxLog_t.nxlog_init (NxLog_t.java:88) 在 com.mainws.MainWs.main(MainWs.java:35)

现在，当我单击“*本机方法*”时

> org.apache.tomcat.jni.Time.now（本机方法）

它显示 JAR 文件 tomcat-apr-5.5.23.jar 没有源附件。我不明白当我将 jar 文件正确构建到我的项目时，为什么这个错误仍然存​​在（预计这是与 jar 文件配置相关的问题......）

帮助将不胜感激！！！！

# javascript - 从 javascript src 获取变量

> ID：15175499
> 
> 赞同：4
> 
> 时间：2013-03-02T14:18:17.163
> 
> 标签：javascript

我包括带有参数的javascript：

```
<script type="text/javascript" src="js/app.min.js?ver=1.13"></script> 
```

`ver`如何从此脚本中获取变量的值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T14:23:27.537

试试这个：
在脚本标签中添加一个 id：

```
<script type="text/javascript" src="js/app.min.js?ver=1.13" id="script_id"></script> 
```

进而：

```
var src=document.getElementById("script_id").src;
alert(src.split("ver=")[1]); 
```

请注意，我假设有一个参数，这个参数是 ver。

# php - curl重定向无法正常工作

> ID：15175500
> 
> 赞同：1
> 
> 时间：2013-03-02T14:18:18.430
> 
> 标签：php, redirect, curl

我的函数应该获取 $url 的目标 URL：

```
function getUrl($url)
{
    $user_agent='Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)';
    $ch = curl_init(); 
    $timeout = 10; // set to zero for no timeout 
    curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, $timeout); 
    curl_setopt ($ch, CURLOPT_URL, $url); 
    curl_setopt ($ch, CURLOPT_USERAGENT, $user_agent);
    curl_setopt ($ch, CURLOPT_HEADER, 1);
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
    curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, true);
    $curl = curl_exec($ch);
    $header = curl_getinfo($ch);
    curl_close($ch); 
    return $header;

}

function get_url_list() {

 $url = "http://www.webliste.ch/click.aspx?nr=148252";
 $result=getUrl($url);
 print_r($result);echo "<br>";
}

get_url_list(); 
```

这导致以下结果：

```
Array
(
    [url] => http://www.webliste.ch/click.aspx?nr=148252
    [content_type] => text/html; charset=iso-8859-1
    [http_code] => 200
    [header_size] => 320
    [request_size] => 139
    ...
    [redirect_time] => 0
    [certinfo] => Array
        (
        )

    [redirect_url] => 
) 
```

我不知所措，因为 URL 正在重定向，如果我回显 $ch，我会得到重定向的网站。

有谁知道这是什么原因？

以下也不起作用：

```
$final_url = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL); 
```

输出与 $result['url'] 相同，这不是我要找的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:23:56.553

我已经分析了实际发生的情况，现在我看到重定向不是由该页面上的重定向标头引起的，而是使用 JavaScript 立即提交表单并将您重定向到起始页面。

可能很难确定页面的 URL，但您可以做的是查找`<form>`标签，然后在其`action`属性中找到 URL。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de">
   <head id="Head1">
      <title></title>
      <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
      <meta name="ROBOTS" content="NOINDEX, NOFOLLOW" />
   </head>

   <body>
      <form id="form1" action="http://www.taxiherold.ch">
         <div id="panGo" align="center">
            <script type="text/javascript">
               document.getElementById('form1').submit();
            </script>
         </div>
      </form>
   </body>
</html> 
```

所以现在试试这个代码：

```
$ch = curl_init('http://www.webliste.ch/click.aspx?nr=148252');
curl_setopt ($ch, CURLOPT_USERAGENT, 'Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)');
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true); 
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, false);

$data = curl_exec($ch);

$dom = new DOMDocument();
@$dom->loadHTML($data);
$xpath = new DOMXPath($dom);

$url = $xpath->query('//body/form');
$url = ($url->length == 1 ? $url->item(0)->getAttribute('action') : null);

var_dump($url); 
```

将输出：

![在此处输入图像描述](../Images/928cd4ad21e6bbcbe774cc323ef90a41.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:34:18.263

我写的这门课可以帮助你

此类返回所有标头信息，例如重定向，...

```
 function HeaderProc($response,$Run="",$String=1/*[Is 1 IF Use for String Mode ]*/){
          print_r($response);
          if($String==1){
             $response=explode("\r\n",$response);  
          }
          $PartHeader=0;
          $out[$PartHeader]=array();
          while(list($key,$val)=each($response)){
              $name='';
              $value='';
              $flag=false;
              for($i=0;$i<strlen($val);$i++){
                  if($val[$i]==":"){
                      $flag=true;
                      for($j=$i+1;$j<strlen($val);$j++){
                        if($val[$i]=="\r" and $val[$i+1]=="\n"){    
                            break;
                        }
                        $value.=$val[$j];
                      }
                      break;
                  }
                  $name.=$val[$i]; 
              }
              if($flag){
                if($name=='' and $value==''){
                    $PartHeader++;  
                }else{
                  if(isset($out[$PartHeader][$name])){
                    if(is_array($out[$PartHeader][$name])){   
                        $out[$PartHeader][$name][]=$value;
                    }else{
                        $T=$out[$PartHeader][$name];
                        $out[$PartHeader][$name]=array();
                        $out[$PartHeader][$name][0]=$T;  
                        $out[$PartHeader][$name][1]=$value;  
                    }
                  }else{
                    $out[$PartHeader][$name]=$value;
                  }
                }
              }else{
                if($name==''){
                    $PartHeader++;  
                }else{
                    if(isset($out[$PartHeader][$name])){ 
                      if(is_array($out[$PartHeader][$name])){   
                        $out[$PartHeader][$name][]=$value;
                      }else{
                        $T=$out[$PartHeader][$name];
                        $out[$PartHeader][$name]=array();
                        $out[$PartHeader][$name][0]=$T;  
                        $out[$PartHeader][$name][1]=$name;  
                      }
                    }else{
                        $out[$PartHeader][$name]=$name; 
                    }
                } 
              }
              if($Run!=""){
                $Run($name,$value);  
              }
          }
          return $out;
}

 class cURL { 
    var $headers; 
    var $user_agent; 
    var $compression; 
    var $cookie_file; 
    var $proxy; 
    var $Cookie; 
    function CookieAnalysis($Cookie){//convert str cookie to array cookie 
       //echo $Cookie;
       $this->Cookie=array();
       preg_replace_callback("~(.*?)=(.*?);~si",function($m){$this->Cookie[trim($m[1])]=trim($m[2]);},' '.$Cookie.'; ');
       return $this->Cookie;
    }
    function cURL($cookies=false,$cookie='cookies.txt',$compression='gzip',$proxy='') {
         $this->headers[] = 'Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8';
         $this->headers[] = 'Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3'; 
         $this->headers[] = 'Accept-Encoding:gzip,deflate,sdch';
         $this->headers[] = 'Accept-Language:en-US,en;q=0.8';
         $this->headers[] = 'Cache-Control:max-age=0';
         $this->headers[] = 'Connection:keep-alive';
         $this->user_agent = 'User-Agent:Mozilla/5.0 (SepidarSoft [Organic Search Engine Crawler] Linux Edition) AppleWebKit/536.5 (KHTML, like Gecko) SepidarBrowser/1.0.100.52 Safari/536.5';
         $this->compression=$compression; 
         $this->proxy=$proxy; 
         $this->cookies=$cookies; 
         if ($this->cookies == TRUE) $this->cookie($cookie); 
    } 
    function cookie($cookie_file) { 
         if (file_exists($cookie_file)) { 
            $this->cookie_file=$cookie_file; 
         } else { 
            fopen($cookie_file,'w') or $this->error('The cookie file could not be opened. Make sure this directory has the correct permissions');
            $this->cookie_file=$cookie_file; 
            @fclose($this->cookie_file); 
         } 
    }
    function GET($url) { 
         $process = curl_init($url); 
         curl_setopt($process, CURLOPT_HTTPHEADER, $this->headers); 
         curl_setopt($process, CURLOPT_HEADER, 1); 
         curl_setopt($process, CURLOPT_USERAGENT, $this->user_agent); 
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEFILE, $this->cookie_file);
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEJAR, $this->cookie_file);
         curl_setopt($process,CURLOPT_ENCODING , $this->compression); 
         curl_setopt($process, CURLOPT_TIMEOUT, 30); 
         if ($this->proxy) curl_setopt($process, CURLOPT_PROXY, $this->proxy); 
         curl_setopt($process, CURLOPT_RETURNTRANSFER, 1); 
         curl_setopt($process, CURLOPT_FOLLOWLOCATION, 1); 
         $response = curl_exec($process);
         $header_size = curl_getinfo($process,CURLINFO_HEADER_SIZE);
         $result['Header'] = HeaderProc(substr($response, 0, $header_size),'',1);
         foreach($result['Header'] as $HeaderK=>$HeaderP){
           foreach($HeaderP['Set-Cookie'] as $key=>$val){
             $result['Header'][$HeaderK]['Set-Cookie'][$key]=$this->CookieAnalysis($val);
           }
         }
         $result['Body'] = substr( $response, $header_size );
         $result['HTTP_State'] = curl_getinfo($process,CURLINFO_HTTP_CODE);
         $result['URL'] = curl_getinfo($process,CURLINFO_EFFECTIVE_URL); 
         curl_close($process); 
         return $result; 
    }
    function POST($url,$data) { 
         $process = curl_init($url); 
         curl_setopt($process, CURLOPT_HTTPHEADER, $this->headers); 
         curl_setopt($process, CURLOPT_HEADER, 1); 
         curl_setopt($process, CURLOPT_USERAGENT, $this->user_agent); 
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEFILE, $this->cookie_file);
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEJAR, $this->cookie_file);
         curl_setopt($process, CURLOPT_ENCODING , $this->compression); 
         curl_setopt($process, CURLOPT_TIMEOUT, 30); 
         if ($this->proxy) curl_setopt($process, CURLOPT_PROXY, $this->proxy); 
         curl_setopt($process, CURLOPT_POSTFIELDS, $data); 
         curl_setopt($process, CURLOPT_RETURNTRANSFER, 1); 
         curl_setopt($process, CURLOPT_FOLLOWLOCATION, 1); 
         curl_setopt($process, CURLOPT_POST, 1);
         $response = curl_exec($process); 
         $header_size = curl_getinfo($process,CURLINFO_HEADER_SIZE);
         $result['Header'] = HeaderProc(substr($response, 0, $header_size),'',1);
         foreach($result['Header'] as $HeaderK=>$HeaderP){
           foreach($HeaderP['Set-Cookie'] as $key=>$val){
             $result['Header'][$HeaderK]['Set-Cookie'][$key]=$this->CookieAnalysis($val);
           }
         }
         $result['Body'] = substr( $response, $header_size );
         $result['HTTP_State'] = curl_getinfo($process,CURLINFO_HTTP_CODE);
         $result['URL'] = curl_getinfo($process,CURLINFO_EFFECTIVE_URL);
         curl_close($process); 
         return $result; 
    }
    function error($error) { 
         echo "<center><div style='width:500px;border: 3px solid #FFEEFF; padding: 3px; background-color: #FFDDFF;font-family: verdana; font-size: 10px'><b>cURL Error</b><br>$error</div></center>";
         die; 
    } 
 } 
```

样本：

```
 $cc = new cURL(); 
  print_r( $cc->POST('http://www.domain.com')); 
```

对于旧的 php

```
function HeaderProc($response,$Run="",$String=1/*[Is 1 IF Use for String Mode ]*/){
          if($String==1){
             $response=explode("\r\n",$response);  
          }
          $PartHeader=0;
          $out[$PartHeader]=array();
          while(list($key,$val)=each($response)){
              $name='';
              $value='';
              $flag=false;
              for($i=0;$i<strlen($val);$i++){
                  if($val[$i]==":"){
                      $flag=true;
                      for($j=$i+1;$j<strlen($val);$j++){
                        if($val[$i]=="\r" and $val[$i+1]=="\n"){    
                            break;
                        }
                        $value.=$val[$j];
                      }
                      break;
                  }
                  $name.=$val[$i]; 
              }
              if($flag){
                if($name=='' and $value==''){
                    $PartHeader++;  
                }else{
                  if(isset($out[$PartHeader][$name])){
                    if(is_array($out[$PartHeader][$name])){   
                        $out[$PartHeader][$name][]=$value;
                    }else{
                        $T=$out[$PartHeader][$name];
                        $out[$PartHeader][$name]=array();
                        $out[$PartHeader][$name][0]=$T;  
                        $out[$PartHeader][$name][1]=$value;  
                    }
                  }else{
                    $out[$PartHeader][$name]=$value;
                  }
                }
              }else{
                if($name==''){
                    $PartHeader++;  
                }else{
                    if(isset($out[$PartHeader][$name])){ 
                      if(is_array($out[$PartHeader][$name])){   
                        $out[$PartHeader][$name][]=$value;
                      }else{
                        $T=$out[$PartHeader][$name];
                        $out[$PartHeader][$name]=array();
                        $out[$PartHeader][$name][0]=$T;  
                        $out[$PartHeader][$name][1]=$name;  
                      }
                    }else{
                        $out[$PartHeader][$name]=$name; 
                    }
                } 
              }
              if($Run!=""){
                $Run($name,$value);  
              }
          }
          return $out;
}

class cURL { 
    var $headers; 
    var $user_agent; 
    var $compression; 
    var $cookie_file; 
    var $proxy; 
    var $Cookie; 
    function CookieAnalysis($Cookie){//convert str cookie to array cookie 
       //echo $Cookie;
       $this->Cookie=array();
       preg_match("~(.*?)=(.*?);~si",' '.$Cookie.'; ',$M);
       $this->Cookie[trim($M[1])]=trim($M[2]);
       return $this->Cookie;
    }
    function cURL($cookies=false,$cookie='cookies.txt',$compression='gzip',$proxy='') {
         $this->headers[] = 'Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8';
         $this->headers[] = 'Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3'; 
         $this->headers[] = 'Accept-Encoding:gzip,deflate,sdch';
         $this->headers[] = 'Accept-Language:en-US,en;q=0.8';
         $this->headers[] = 'Cache-Control:max-age=0';
         $this->headers[] = 'Connection:keep-alive';
         $this->user_agent = 'User-Agent:Mozilla/5.0 (SepidarSoft [Organic Search Engine Crawler] Linux Edition) AppleWebKit/536.5 (KHTML, like Gecko) SepidarBrowser/1.0.100.52 Safari/536.5';
         $this->compression=$compression; 
         $this->proxy=$proxy; 
         $this->cookies=$cookies; 
         if ($this->cookies == TRUE) $this->cookie($cookie); 
    } 
    function cookie($cookie_file) { 
         if (file_exists($cookie_file)) { 
            $this->cookie_file=$cookie_file; 
         } else { 
            fopen($cookie_file,'w') or $this->error('The cookie file could not be opened. Make sure this directory has the correct permissions');
            $this->cookie_file=$cookie_file; 
            @fclose($this->cookie_file); 
         } 
    }
    function GET($url) { 
         $process = curl_init($url); 
         curl_setopt($process, CURLOPT_HTTPHEADER, $this->headers); 
         curl_setopt($process, CURLOPT_HEADER, 1); 
         curl_setopt($process, CURLOPT_USERAGENT, $this->user_agent); 
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEFILE, $this->cookie_file);
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEJAR, $this->cookie_file);
         curl_setopt($process,CURLOPT_ENCODING , $this->compression); 
         curl_setopt($process, CURLOPT_TIMEOUT, 30); 
         if ($this->proxy) curl_setopt($process, CURLOPT_PROXY, $this->proxy); 
         curl_setopt($process, CURLOPT_RETURNTRANSFER, 1); 
         curl_setopt($process, CURLOPT_FOLLOWLOCATION, 1); 
         $response = curl_exec($process);
         $header_size = curl_getinfo($process,CURLINFO_HEADER_SIZE);
         $result['Header'] = HeaderProc(substr($response, 0, $header_size),'',1);
         foreach($result['Header'] as $HeaderK=>$HeaderP){
           if(!is_array($HeaderP['Set-Cookie']))continue;
           foreach($HeaderP['Set-Cookie'] as $key=>$val){
             $result['Header'][$HeaderK]['Set-Cookie'][$key]=$this->CookieAnalysis($val);
           }
         }
         $result['Body'] = substr( $response, $header_size );
         $result['HTTP_State'] = curl_getinfo($process,CURLINFO_HTTP_CODE);
         $result['URL'] = curl_getinfo($process,CURLINFO_EFFECTIVE_URL); 
         curl_close($process); 
         return $result; 
    }
    function POST($url,$data) { 
         $process = curl_init($url); 
         curl_setopt($process, CURLOPT_HTTPHEADER, $this->headers); 
         curl_setopt($process, CURLOPT_HEADER, 1); 
         curl_setopt($process, CURLOPT_USERAGENT, $this->user_agent); 
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEFILE, $this->cookie_file);
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEJAR, $this->cookie_file);
         curl_setopt($process, CURLOPT_ENCODING , $this->compression); 
         curl_setopt($process, CURLOPT_TIMEOUT, 30); 
         if ($this->proxy) curl_setopt($process, CURLOPT_PROXY, $this->proxy); 
         curl_setopt($process, CURLOPT_POSTFIELDS, $data); 
         curl_setopt($process, CURLOPT_RETURNTRANSFER, 1); 
         curl_setopt($process, CURLOPT_FOLLOWLOCATION, 1); 
         curl_setopt($process, CURLOPT_POST, 1);
         $response = curl_exec($process); 
         $header_size = curl_getinfo($process,CURLINFO_HEADER_SIZE);
         $result['Header'] = HeaderProc(substr($response, 0, $header_size),'',1);
         foreach($result['Header'] as $HeaderK=>$HeaderP){
            if(!is_array($HeaderP['Set-Cookie']))continue;
           foreach($HeaderP['Set-Cookie'] as $key=>$val){
             $result['Header'][$HeaderK]['Set-Cookie'][$key]=$this->CookieAnalysis($val);
           }
         }
         $result['Body'] = substr( $response, $header_size );
         $result['HTTP_State'] = curl_getinfo($process,CURLINFO_HTTP_CODE);
         $result['URL'] = curl_getinfo($process,CURLINFO_EFFECTIVE_URL);
         curl_close($process); 
         return $result; 
    }
    function error($error) { 
         echo "<center><div style='width:500px;border: 3px solid #FFEEFF; padding: 3px; background-color: #FFDDFF;font-family: verdana; font-size: 10px'><b>cURL Error</b><br>$error</div></center>";
         die; 
    } 
 } 
```

样本：

```
 $cc = new cURL(); 
  print_r( $cc->POST('http://www.domain.com')); 
```

雅虎网站示例标题输出

```
 [Header] => Array
    (
        [0] => Array
            (
                [HTTP/1.1 302 Found] => HTTP/1.1 302 Found
                [Date] =>  Sat, 02 Mar 2013 14:37:19 GMT
                [P3P] =>  policyref="http://info.yahoo.com/w3c/p3p.xml", CP="CAO DSP COR CUR ADM DEV TAI PSA PSD IVAi IVDi CONi TELo OTPi OUR DELi SAMi OTRi UNRi PUBi IND PHY ONL UNI PUR FIN COM NAV INT DEM CNT STA POL HEA PRE LOC GOV"
                [Cache-Control] =>  private
                [X-Frame-Options] =>  SAMEORIGIN
                [Set-Cookie] =>  fpc=d=a2polPzlISX4q5OZQBxq.CKduGwG2Wm1YrPD59ENCUl3uTzrs.8HlnpJROO8MWa6M.B8e1JuCsbW25qwqY5zEs.mA0_EVlAVPMhFCdfCxhZf6vWmmqpPm9bVzGYs8Y7IyTG7IFp9p0MN_FPQmzNM7I8XBu4iGCI8MbHWFvOMKmhN9MTkPC4KbNJ2izSK9xBXTedDnYw-&v=2; expires=Sun, 02-Mar-2014 14:37:19 GMT; path=/; domain=www.yahoo.com
                [Location] =>  http://en-maktoob.yahoo.com/?p=us
                [Vary] =>  Accept-Encoding
                [Content-Type] =>  text/html; charset=utf-8
                [Age] =>  0
                [Transfer-Encoding] =>  chunked
                [Connection] =>  keep-alive
                [Server] =>  YTS/1.20.13
            )

        [1] => Array
            (
                [HTTP/1.1 200 OK] => HTTP/1.1 200 OK
                [Date] =>  Sat, 02 Mar 2013 14:37:20 GMT
                [P3P] =>  policyref="http://info.yahoo.com/w3c/p3p.xml", CP="CAO DSP COR CUR ADM DEV TAI PSA PSD IVAi IVDi CONi TELo OTPi OUR DELi SAMi OTRi UNRi PUBi IND PHY ONL UNI PUR FIN COM NAV INT DEM CNT STA POL HEA PRE LOC GOV"
                [Cache-Control] =>  private
                [X-Frame-Options] =>  SAMEORIGIN
                [Set-Cookie] => Array
                    (
                        [0] => Array
                            (
                                [IU] => deleted
                            )

                        [1] => Array
                            (
                                [PH] => deleted
                            )

                        [2] => Array
                            (
                                [MSC] => t=1362235040X
                            )

                        [3] => Array
                            (
                                [fpc] => d=_7tfRPjaISWhpxKrzORZ47ywABwHrUd0vF3WBQH9UYD6KMC7fyjTBdcMMh1FYiufGwiXnhHgDV9gK_VrwVf.q.n_MoJj3B4OMV5Lw42TXrYN_xGhwsnsyUPvQTy79LJ.twkY0IQ3culhr0osKxe0MvGIPSRcYDWH13TUS5YhrnIP731WRyEDZlPh2gPUXxNc1nRtr7Y-&v=2
                            )

                        [4] => Array
                            (
                                [fpms] => p_30345347=%7B%22loc%22%3A%7B%22id%22%3A1940330%2C%22city%22%3A%22Abu+Dhabi%22%2C%22state%22%3A%22%22%2C%22country%22%3A%22UAE%22%7D%7D
                            )

                        [5] => Array
                            (
                                [fpc] => d=SaiDIsbaISXJV8ztcJqpafzGA13Lsq0TPQ7HJOn_.yLYWvNZF75ELqLKTLekfVYxmFj0OxOH_thzdIa9UNQIiwYXt99qJ8HNsqpWubAPIFaO1o36VbPBUz9Qu0Rzgzh6Qh.rJQnhPnj1m3NMeFlpYZ7kpVAsjL88RMdcGP82RMUEENd9mWXC7SkuY_CIR76Ne3pEgotZlVDVMABYyxJbM4N4jqG5zkC23Gy8epD4JzxcUuTWDyUn.LZaIqX1Gn6Fcn_f6de3&v=2
                            )

                        [6] => Array
                            (
                                [fpps] => _page=%7B%22wsid%22%3A%2221445690%22%7D
                            )

                        [7] => Array
                            (
                                [fpt] => d=Zc7DH53Xe9za_cphyvUoTpFDnmIFF977Sv9yIyBJtqtpcN4aLM18CC3FKuMd6AMXylr7FJjRBtWkJYiIdmrER9MPUOFt22FcF8rNk8Lu_kQMbAEra9CnHEhP0N8DVz6iKlRji6wGv_.3pOxmx_7Td1bq2D4RtVTE93P1kVGFgxlSV7Vtdf8JUxoRTq3dMKZuNQD5vY76rjiXf64lrQ89ONTWEpCGE3MxGVHnegZ71MiuKmYPLxH.AdNFzgw_EoD5QFWyxBxC3GNq7CarXzwJ5D4Uoiw690kzihlRQ66UgGj6sAdIIB_haiXQ6pJ7Q_w86gen6FBolLLiIBrDaujASks1fNzrWOfSH7HDn3GfqcCycIXcJDw_Xb8eGBgJVZFK2yuM0BF68NOW.nkACke1I.ufHsJXrvZH51Pg4dh9hMIsqeI-&v=1
                            )

                        [8] => Array
                            (
                                [fpc_s] => d=jbVQS4TaISWRQmb4Qu6ANMqdtfYe_QawTKJ.rdl.9vdhjLe6UHD_z3Pvh2HhUHGn2i4oPThLzibGfAmid4zCCnYjxdTbby8pCY566kgiSjnvroDbRszWKfTL4j8Bew5x1VnLUqLfpKWUq2jwAOj1WdBhiSajBzp_hg.8q8O1M0XO.hd7YXRtm66BnbOtcTli3arG1nfT96JakB5i8cyNrUMl1m4czoVB7MqJDipKCfQ.19r98RG0dJELW.fFXfry0AApcU8cweMqTTIuks1LAeVRngCAX7eRfB0eknd5DOqTpZlrMTmW.JjNnbI-&v=2
                            )

                    )

                [Vary] =>  Accept-Encoding
                [Content-Type] =>  text/html;charset=utf-8
                [Content-Encoding] =>  gzip
                [Age] =>  0
                [Transfer-Encoding] =>  chunked
                [Connection] =>  keep-alive
                [Server] =>  YTS/1.20.13
            )

    ) 
```

# android - 指针的起始位置

> ID：15175501
> 
> 赞同：0
> 
> 时间：2013-03-02T14:18:18.740
> 
> 标签：android, touch-event

我想得到每个指针的第一个位置（它不应该被改变`ACTION_MOVE`）

这是我的实际代码：

```
public boolean onTouchEvent(MotionEvent event) {
        pointers = event.getPointerCount();
        for(int a = 0; a < event.getPointerCount(); a++) {
            expos[a] = (int) event.getX(a);
            eypos[a] = (int) event.getY(a);
            if(event.getAction() == MotionEvent.ACTION_DOWN) pressed = true;
            if(event.getAction() != MotionEvent.ACTION_MOVE) {
                startexpos[a] = (int) event.getX(a);
                starteypos[a] = (int) event.getY(a);
            }
            if(event.getAction() == MotionEvent.ACTION_UP) pressed = false;
        }
        return true;
    } 
```

但如果指针数量发生变化，它总是会覆盖每个*起始位置。*

是否有任何方法可以获取特定指针的*起始位置或*

我怎么解决这个问题？

谢谢！

# php - Zend2 + Doctrine2 认证

> ID：15175504
> 
> 赞同：6
> 
> 时间：2013-03-02T14:18:37.107
> 
> 标签：php, authentication, doctrine-orm, zend-framework2

我想使用 Doctrine 2 和 ZF2 进行身份验证。为了获得一些帮助，我使用了[Zend 2 + dictionary 2 Auth Adapter](https://stackoverflow.com/questions/12092091/zend-2-doctrine-2-auth-adapter/15174551)，但每次我调用时`$authService->authenticate($adapter);`都会收到一个错误，即类 '' 不存在。

似乎我的 module.config.php 中的配置不会被使用。它显示如下：

```
'authenticationadapter' => array(
        'orm_default' => array(
            'objectManager' => 'doctrine.entitymanager.orm_default',
            'identityClass' => 'Profile\Entity\User',
            'identityProperty' => 'username',
            'credentialProperty' => 'password',
        ),
    ), 
```

但是如果我在 authService 上做了一个 var_dump，所有的集合都是空的。在我想要登录的服务中，我调用

```
$authAdapter = $this->getAuthAdapter();
$authAdapter->setIdentityValue($username);
$authAdapter->setCredentialValue($password); 
```

$authAdapter 的转储告诉我 IdentityValue 和 CredentialValue 设置正确。

$authAdabter 中的其他内容是：

```
protected 'options' => 
    object(DoctrineModule\Options\Authentication)[281]
      protected 'objectManager' => 
        object(Doctrine\ORM\EntityManager)[248]
          private 'config' => 
            object(Doctrine\ORM\Configuration)[250]
              ...
          private 'conn' => 
            object(Doctrine\DBAL\Connection)[252]
              ...
          private 'metadataFactory' => 
            object(Doctrine\ORM\Mapping\ClassMetadataFactory)[266]
              ...
          private 'repositories' => 
            array (size=0)
              ...
          private 'unitOfWork' => 
            object(Doctrine\ORM\UnitOfWork)[267]
              ...
          private 'eventManager' => 
            object(Doctrine\Common\EventManager)[242]
              ...
          private 'hydrators' => 
            array (size=0)
              ...
          private 'proxyFactory' => 
            object(Doctrine\ORM\Proxy\ProxyFactory)[268]
              ...
          private 'expressionBuilder' => null
          private 'closed' => boolean false
          private 'filterCollection' => null
      protected 'objectRepository' => null
      protected 'identityClass' => null
      protected 'identityProperty' => null
      protected 'credentialProperty' => null
      protected 'credentialCallable' => null
      protected 'classMetadata' => null
      protected 'storage' => null
      protected '__strictMode__' => boolean true
  protected 'authenticationResultInfo' => null 
```

getAuthAdapter 显示如下：

```
public function getAuthAdapter()
{
    if (null === $this->authAdapter) {
        $this->authAdapter = $this->getServiceManager()
            ->get('doctrine.authenticationadapter.ormdefault');
    }
    return $this->authAdapter;
} 
```

那么有人可以告诉我如何正确设置选项吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-02T15:17:41.313

看起来您使用了错误的配置值。如果您查看 DoctrineORM 文档，他们使用以下内容来设置身份验证适配器的配置：

```
'doctrine' => array(
    'authentication' => array(
        'orm_default' => array(
            'object_manager' => 'Doctrine\ORM\EntityManager',
            'identity_class' => 'Application\Entity\User',
            'identity_property' => 'email',
            'credential_property' => 'password',
        ),
    ),
) 
```

所以，不要在你的 module.config.php中使用`authenticationadapter`use ；`authentication`而不是使用`objectManager`use`object_manager`等。

* * *

在您的 Module.php 中，您需要添加以下内容：

```
use Zend\Authentication\AuthenticationService;

...

public function getServiceConfig()
{
    return array(
        'factories' => array(
            'Zend\Authentication\AuthenticationService' => function($serviceManager) {
                return $serviceManager->get('doctrine.authenticationservice.orm_default');

            }
        )
    );
} 
```

在您的控制器中，您可以使用以下方式访问适配器：

```
$authService = $this->getServiceLocator()->get('Zend\Authentication\AuthenticationService');

$adapter = $authService->getAdapter();
$adapter->setIdentityValue($data['login']);
$adapter->setCredentialValue($data['password']); 
```

请遵循[文档](https://github.com/doctrine/DoctrineModule/blob/master/docs/authentication.md)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T12:57:37.167

If you are using 'Zend\Authentication\AuthenticationService' in Module.php as suggested by Hohner, this will not work with the BjyAuthorize Module roles and ACL. BjyAuthorize will default to its own default configuration of the Authentication service which uses 'ZfcUser\Authentication\Storage\Db'. To get BjyAuthorize to use the Doctrine identity replace it with (or add ) 'zfcuser_auth_service' as follows:

```
'zfcuser_auth_service' => function ($serviceManager) {
    return  $authenticationService = $serviceManager->get('doctrine.authenticationservice.orm_default');
}, 
```

Then you also use it in the controller in a similar way:

```
$authService = $this->getServiceLocator()->get( 'zfcuser_auth_service' ); 
```

# jquery - 导入 jquery 库时不显示子菜单

> ID：15175505
> 
> 赞同：0
> 
> 时间：2013-03-02T14:18:39.830
> 
> 标签：jquery, ajax, styles, libraries, submenu

当我将 jquery 库导入我的网页时，我的网页运行良好。但它没有显示子菜单。
我用于导入 jquery 库的代码：（
`<script type="text/javascript" src="result/jquery.min.js"></script>`
在`jquert.min.js`结果文件夹中）。 ![子菜单未显示](../Images/1eaebfad535d8438c28bb4742468932d.png)

但是当我注释 java-script 以导入 jquery 库时，所有子菜单都显示出来了，CMS Pro 的一些默认样式也出现了。但是网页中的 jquery 不起作用。我的网站基于 CMS Pro。 ![子菜单正在显示](../Images/b411f30d4a2cb26b8d6ac2e725959689.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:36:16.730

你检查过你的控制台了吗？

> 未捕获的类型错误：对象函数 (a,b){return new c.fn.init(a,b)} 没有方法“jStyling” *（master.js，第 4 行）*

我看到两个直接的问题：

1.  您链接到 jQuery Twice，甚至链接到它的两个不同版本：
    *   类结果.php
        1.  第 20 行：`<script type="text/javascript" src="http://www.vtulife.com/assets/jquery.js"></script>`
        2.  第 146 行：`<script type="text/javascript" src="result/jquery.min.js"></script>`
2.  “jStyling”插件要么在 jQuery 之前加载/链接，要么根本不链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T15:03:23.697

主要问题是当您加载 jQuery.js 两次时，任何注册到第一个版本的插件都将被清除。

删除第二个版本，一切都应该没问题

# node.js - 在heroku上通过nodejs运行代理服务器

> ID：15175513
> 
> 赞同：4
> 
> 时间：2013-03-02T14:20:25.743
> 
> 标签：node.js, heroku

嗨，我尝试运行基于 nodejs 的代理服务器

[https://github.com/tec27/node-argyle](https://github.com/tec27/node-argyle)

刚刚发现

```
var argyle = require('argyle');

var server = argyle(8080, '127.0.0.1');
server.on('connected', function(req, dest) {
    req.pipe(dest);
    dest.pipe(req);
}); 
```

此代码适用于本地浏览器可以连接并运行

试图推它heroku并运行

过程文件：

```
worker: node app.js 
```

包.json

```
 {
  "name": "proxy",
  "version": "1.0.0",
  "dependencies": {
    "argyle": "*"
  },
  "engines": {
    "node": "0.8.x",
    "npm": "1.1.x"
  }
} 
```

我错过了什么或尝试打开指定的端口@heroku 不允许？

# java - 检测活动何时发生变化

> ID：15175518
> 
> 赞同：0
> 
> 时间：2013-03-02T14:20:51.520
> 
> 标签：java, android, android-activity

我正在尝试将保存对话框添加到`Activity`.

如果您按回，我已经捕获它并添加了一个保存对话框。

由于我有一个通用操作栏，有没有办法捕获活动事件的变化而不将其硬编码到活动变化本身？

我用谷歌搜索了一下，发现没有运气，`onDestroy`似乎`onStop`没有做我想做的事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T14:31:23.337

如果您想知道 Activity 何时不再可见（无论出于何种原因），请覆盖 onPause（请参阅[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)）。

顺便说一句，作为用户，我想要这种行为——如果我离开一个活动而不按后退按钮或退出，我希望它会默默地处理所有事情——即你使用 onPause （或替代品）来存储东西这样当活动恢复时，它就会拥有我离开时的一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T14:24:06.043

您可以这样做的一种方法是编写一个从 Activity 继承的类并在该类中实现行为。然后简单地为您的所有活动继承这个类。

您可以编写一个实现保存行为的类

```
class SaveActivity extends Activity {

    //...

    @Override
    public void onBackPressed() {
        // common behaviour you want
    }
} 
```

然后在你的活动中你可以这样做

```
class MyActivity extends SaveActivity {

    // code for this activity

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T15:39:37.253

`onPause()`可能是你应该看的。当任何活动到达此活动的顶部时调用它。

# erlang - Erlang 打字纪律

> ID：15175519
> 
> 赞同：2
> 
> 时间：2013-03-02T14:20:55.940
> 
> 标签：erlang, strong-typing

Erlang 的特点是强类型还是弱类型？根据[强类型的定义](http://en.wikipedia.org/wiki/Strong_typing)，Erlang 似乎同时具有强类型和弱类型。我的理解正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T19:29:12.770

Erlang 与 Python 一样具有强大的动态类型。

# magento - 具有日期属性的 Magento 预购产品

> ID：15175520
> 
> 赞同：0
> 
> 时间：2013-03-02T14:21:00.980
> 
> 标签：magento

我是 Magento 的新手，也许这是一个非常基本的问题，但我想在我的主页上显示预购产品。我创建了一个属性`Product_Release_Date`并将其设置为将来的日期。当我试图`Product_Release_Date`让它返回空白时。我做错了什么？

```
$_productCollection=$this->getLoadedProductCollection(); to get all products
foreach ($_productCollection as $_product):
<?php  $currentDate = Mage::getModel('core/date')->date('Y-m-d H:i:s'); to get current date for compare

echo $_product->getResource()->getAttribute('Product_Release_Date'); 
```

当我尝试将其显示为空白时，它会返回`productName`和其他内容。只有这个日期没有显示。请帮助或提供一些教程，其中显示如何启用预购。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:45:54.083

很可能产品属性“Product_Release_Date”不在加载的产品集合中。

如果您需要获取它，请从 Magento 产品资源模型中加载产品

```
$productCollection = Mage::getResourceModel('catalog/product_collection')->addAttributeToSelect('*');

foreach($productCollection as $product):
    echo '<br/>' . $product->getProductReleaseDate();
endforeach; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:37:57.613

该`$_product->getResource()->getAttribute('Product_Release_Date');`行仅加载属性集合。您可以在查看它包含的内容后执行此操作：`var_dump($_product->getResource()->getAttribute('Product_Release_Date'));`. 如果是，`NULL`请确保您的新属性确实设置为`Product_Release_Date`而不是`product_release_date`（小写）。

您可以使用“魔术获取”来检索值，如下所示：

```
echo $_product->getProductReleaseDate(); 
```

这是关于如何启用缺货商品显示的最新教程：

[http://www.inmotionhosting.com/support/edu/magento/103-magento-products-and-inventory-settings/how-to-display-products-that-are-out-of-stock-in-magento](http://www.inmotionhosting.com/support/edu/magento/103-magento-products-and-inventory-settings/how-to-display-products-that-are-out-of-stock-in-magento)

# javascript - 断开 node-xmpp 客户端

> ID：15175521
> 
> 赞同：2
> 
> 时间：2013-03-02T14:21:02.350
> 
> 标签：javascript, node.js, xmpp, node-xmpp

我正在查看[node-xmpp](https://github.com/astro/node-xmpp)和[node-simple-xmpp](https://github.com/arunoda/node-simple-xmpp)，我正在尝试制作一个简单的客户端。
一切正常，除了断开连接。

我在simple-xmpp[示例之后制作了以下文件：](https://github.com/arunoda/node-simple-xmpp/blob/master/examples/echo.js)

```
var xmpp = require('simple-xmpp');

xmpp.on('online', function() {
    console.log('Yes, I\'m connected!');
    xmpp.send('test2@example.com', 'Hello test');
    // OK UNTIL HERE, DISCONNECT NOW
});

xmpp.connect({jid: 'test@example.com/webchat', password: 'test', reconnect: 'false'}); 
```

但我不知道如何断开连接。我试图发送一个类型不可用的节：

```
stanza = new xmpp.Element('presence', {from: 'test@example.com', type: 'unavailable'});
xmpp.conn.send(stanza);
delete xmpp; 
```

这导致客户端暂时脱机，但问题是，它会在几秒钟后重新连接并继续发送“存在”节。

我也尝试过调用 xmpp.conn.end()，它也会断开连接，但之后会出现错误：

```
node_modules/simple-xmpp/node_modules/node-xmpp/lib/xmpp/connection.js:100
    if (!this.socket.writable) {
                    ^
TypeError: Cannot read property 'writable' of undefined 
```

那么，我做错了什么？我相信有一种简单的方法可以断开连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T17:14:24.270

在第一种情况下，`<presence type='unavailable'/>`并不总是与您断开连接；在您的服务器中，它看起来可能是，但您的客户端正在自动重新连接。 `delete xmpp`实际上并没有导致您的对象被清理，它只是将其从本地命名空间中删除。

在第二种情况下`send()`，不会立即将您的节写入底层套接字。如果您`end()`之后立即关闭套接字，则当实际发生写入时，套接字将关闭。

如果您在调用之后添加一个短暂的超时，那么`send()`在调用之前`end()`它将起作用。为了使它变得*更好*`send()`，您会希望您的库开发人员在实际写入套接字时给您一个回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-27T09:04:45.817

您还应该检查一下[https://www.rfc-editor.org/rfc/rfc7395](https://www.rfc-editor.org/rfc/rfc7395)

简而言之，如果客户端用来打开连接，它应该用来终止同一个连接。

更准确地说：

```
<close xmlns="urn:ietf:params:xml:ns:xmpp-framing" /> 
```

“Joe Hildebrand”的解决方案也解决了我的问题，但这对我来说似乎更合适。

# c++ - 我们可以从 netlib 中的 put 或 post 上传文件吗？

> ID：15175528
> 
> 赞同：4
> 
> 时间：2013-03-02T14:22:16.510
> 
> 标签：c++, boost, cpp-netlib

我想要一些服务器用于我的帖子或将请求放入 cpp。我选择了 netlib.. 所以我想知道我们可以从 netlib 中的 put 或 post 请求上传一些 xml 或 json 文件。

谁能回答这个问题。因为我对此感到震惊。

谢谢维什库马尔。

# vb.net - 用 Metro 风格的应用程序替换 Windows 登录屏幕

> ID：15175534
> 
> 赞同：0
> 
> 时间：2013-03-02T14:22:52.163
> 
> 标签：vb.net, microsoft-metro, winrt-xaml, .net-4.5

实际上，我正在开发一个基于 PC 安全性的 Metro 风格应用程序（WinRT 应用程序）。

因此，我希望运行我的 Metro 应用程序而不是 Windows 登录屏幕，因为这个 Metro 应用程序将提供不同的安全方法，例如人脸检测、触摸密码等。

大佬们帮帮我..

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:01:43.843

WinRT 应用程序无法访问足够的系统来充当登录屏幕。

# android - AngEngine 动态壁纸

> ID：15175535
> 
> 赞同：1
> 
> 时间：2013-03-02T14:23:09.510
> 
> 标签：android, andengine, live-wallpaper

在`AngEngine`使用`org.anddev.andengine`lib 和墙纸扩展`lib`时，我想使用计时器或更新程序不时更新场景背景，但找不到任何帮助。

我在用 ：

```
private void createSpriteSpawnTimeHandler()
{
    scene.registerPostFrameHandler(spriteTimerHandler = new TimerHandler(0.02f, new ITimerCallback() {
        @Override
        public void onTimePassed(TimerHandler arg0) {
            // TODO Auto-generated method stub
            scene.setBackground(new SpriteBackground(new Sprite(0,0,
                    HummingBirdLiveWallpaper.CAMERA_WIDTH,
                    HummingBirdLiveWallpaper.CAMERA_HEIGHT,
                    mCigaretteTextureRegion)));
        }

    }));
    spriteTimerHandler.onUpdate(0.02f);
} 
```

并从 调用`onLoadScene()`，但它不会改变背景。请帮帮我，如果有任何例子，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T23:20:29.733

我有类似的情况，对我有用的是更改“mCigaretteTextureRegion”。这与 andengine 示例“更新纹理”中使用的技术相同 [https://github.com/nicolasgramlich/AndEngineExamples/blob/GLES2/src/org/andengine/examples/UpdateTextureExample.java](https://github.com/nicolasgramlich/AndEngineExamples/blob/GLES2/src/org/andengine/examples/UpdateTextureExample.java)

您还可以获得额外的好处，即不需要每次都创建新的 SpriteBackground。

# python - Python - 在 Linux 上使用 cron 作业发送 KDE 结结消息？

> ID：15175537
> 
> 赞同：2
> 
> 时间：2013-03-02T14:23:13.283
> 
> 标签：python, linux, python-2.7, kde, kde4

我正在尝试从 cron 作业向 KDE 的节点发送通知。下面的代码工作正常，但是当我将它作为 cron 作业运行时，通知不会出现。

```
#!/usr/bin/python2
import dbus
import gobject

album = "album"
artist = "artist"
title = "title"
knotify = dbus.SessionBus().get_object("org.kde.knotify", "/Notify")
knotify.event("warning", "kde", [], title, u"by %s from %s" % (artist, album), [], [], 0, 0, dbus_interface="org.kde.KNotify") 
```

有人知道我如何将其作为 cron 作业运行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:28:41.823

您需要提供一个名为`DBUS_SESSION_BUS_ADDRESS`.

您可以从正在运行的 kde 会话中获取值。

```
$ echo $DBUS_SESSION_BUS_ADDRESS
unix:abstract=/tmp/dbus-iHb7INjMEc,guid=d46013545434477a1b7a6b27512d573c 
```

在您的 kde 启动（配置中的自动启动模块）中，创建一个脚本条目以在您的环境启动后运行。将此环境变量值输出到主目录中的临时文件，然后您可以在 cron 作业或临时文件中的 python 脚本中设置环境变量。

```
#!/bin/bash
echo $DBUS_SESSION_BUS_ADDRESS > $HOME/tmp/kde_dbus.session 
```

* * *

截至 2019 KDE5，它仍然有效，但结果略有不同：

```
$ echo $DBUS_SESSION_BUS_ADDRESS 
unix:path=/run/user/1863/bus 
```

要对其进行测试，您可以执行以下操作：

```
$ qdbus org.freedesktop.ScreenSaver /ScreenSaver SimulateUserActivity 
```

`qdbus-qt5`如果您仍然安装了旧的 kde4 二进制文件和 kde5，则可能需要使用。您可以确定应该使用以下哪个：

```
export QDBUS_CMD=$(which qdbus-qt5 2> /dev/null || which qdbus || exit 1) 
```

当我想阻止我的屏幕保护程序使用时，我会使用 sleep 语句运行它并且它可以工作。我从主计算机旁边的另一台计算机远程运行它。

对于那些想知道我如何锁定和解锁远程屏幕保护程序的人来说，这是一个不同的命令......

```
loginctl lock-session 1 
```

或者

```
loginctl unlock-session 1 
```

那是假设您的会话是第一个会话。您可以将脚本添加到屏幕保护程序启动和停止的 KDE 通知事件。希望此信息对想要在多台计算机上同步屏幕保护程序的人有所帮助。

我知道这是一个很长的答案，但我想提供一个示例供您测试，以及我今天使用它的实际用例。

# java - 与包含空格的 Pattern 一起使用时，Scanner 会抛出 NoSuchElementException

> ID：15175538
> 
> 赞同：3
> 
> 时间：2013-03-02T14:23:13.170
> 
> 标签：java, java.util.scanner

我正在尝试使用 a`Scanner`和 a从输入中读取指定的文件格式`Pattern`，如下所示：

```
Pattern p = Pattern.compile("\\d+\\sx\\s\\d+");
Scanner sc = new Scanner(System.in);
String input = "";
try {
    input = sc.next(p);
} catch(NoSuchElementException ne) {
    System.out.println("No such token");
}
sc.close();
System.out.println(input); 
```

但是当我`1 x 1`用作输入时，它会抛出`NoSuchElementException`
With the pattern being `\\d+x\\d+`and input `1x1`it works，但不是模式中的空格，我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T14:31:17.577

文档说：

> Scanner 使用分隔符模式将其输入分解为标记，默认情况下匹配空格。然后可以使用各种 next 方法将生成的标记转换为不同类型的值。

它还说：

> 公共字符串下一个（模式模式）
> 
> 如果它与指定的模式匹配，则返回下一个标记。

因此，您的代码会读取字符直到下一个空格，如果它们与您的模式匹配，则返回它们。情况并非如此，因为您的模式匹配包含空格的字符串，而令牌不能包含空格。

# git - 当我在 GIT 中签出一个分支然后在没有明确指定分支名称的情况下进行标记时会发生什么？

> ID：15175540
> 
> 赞同：2
> 
> 时间：2013-03-02T14:23:26.803
> 
> 标签：git, tags, branch

我希望这是一个非常简单的问题......但看似很难从文档中获得直接答案，或者在 GIT 的命令行中玩耍。这是场景，我有一个本地存储库并且在 master 中。我创建了一个名为 branch1 的分支，我签出了 branch1。然后我进行一些更改，添加/提交更改（暂存和提交）。在这一点上，我用“git tag 1.0”标记了 branch1。

我的问题是 - 该标签是否会自动获取我在 branch1 中的事实，因此仅适用于 branch1。或者我是否需要使用命令“git tag 1.0 branch1”明确命名它所引用的分支。我在 branch1 工作目录和主工作目录中尝试了“git branch --list”等，它们都列出了任何一种情况下的标签。如果我将 branch1 重新设置为 master，那么我不会对这个结果感到惊讶。但是暂时，如果不合并更改，我怎么能要求在命令行上只查看引用给定分支的标签（如果是这样的话）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T14:26:42.857

标签不引用分支。它们指的是提交。这与您所在的分支完全无关。您甚至可能根本不在分支*上*。

```
git tag foo branch1 
```

不将标签应用于`branch1`. 这是将其应用于`HEAD`提交的简写符号`branch1`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T14:26:13.497

标签不适用于分支，它们适用于提交。标签是标识单个提交的附加标签。当您切换到 master 时，该提交仍然具有该标记，因此在列表中看到它也就不足为奇了。

此外，分支也只是一个提交的标签。当您签出一个分支时，您将指定的提交作为您当前存储库的 HEAD。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T23:06:28.690

提交是一组更改；所以第一次提交从“无”变为某事，并且第一次提交之后的每次提交都会改变之前存在的内容。这样，每个提交都依赖于之前的提交，一直到第一个提交。回到开头的路径包括所有父提交，但由于合并提交有两个或更多父提交，它并不总是线性的。

在 git 中，有多种方法可以指定要引用的提交；默认是 SHA1 哈希——但还有其他的：

*   `HEAD`：当您在存储库中工作时，始终与您一起移动。也就是说，它总是指在工作目录中签出的当前提交。
*   `<branch>`: 是放置在提交上的标签——它所做的只是为提交命名。它有一个特殊的属性，就像 HEAD 一样，它会自动移动。在这种情况下，标签会在当前签出`<branch>`时创建时移至新创建的提交。`<branch>`通过这种方式，`<branch>`可以看出 不仅指单个提交，还指返回到开头的提交路径。但它始终是单个提交上的标签。
*   `<tag>`：这是标记提交的另一种方式。但是，不像`<branch>`a`<tag>`不动。它总是指它所放置的单个提交。
*   等：还有许多其他方式可以引用特定的提交，但以上内容与本次讨论相关。

当在 git 命令中使用上述任何内容时，它们首先由该命令转换为它们所指的提交。毕竟，它们只是用来指代提交的标签。每一个都完全独立于所有其他。

一次一个地处理您的各种但相关的问题：

**当我在 GIT 中签出一个分支然后在没有明确指定分支名称的情况下进行标记时会发生什么？**

标签不引用分支，它们都是引用提交的标签——彼此完全独立。所以你的问题在术语上有点“奇怪”；这似乎来自你读过的一本书。

手册页中的实际相关语法`git tag ...`： [git-tag Manual Page](https://www.kernel.org/pub/software/scm/git/docs/git-tag.html)

```
git tag <tagname> <commit> 
```

标签是通过指定标签名称和标签要附加到的提交来创建的。该提交可以通过散列、另一个标签、分支或其他其他方式指定。这不会在用于引用提交的标签和标签之间创建任何类型的连接——它只是引用一个提交。

因此，当未指定提交时会发生什么（通过分支或其他方式）。好吧，总是指定一个提交——如果git可以将该值默认为.git，则它允许省略命令参数`HEAD`。`HEAD`因此，如果您指定: ，会发生什么情况`git tag HEAD`。

同样，为了清楚起见，新创建的标签附加到当前引用的提交上，并且在它更改时`HEAD`不会移动。`HEAD`

**该标签是否会自动识别我在 branch1 中的事实，因此仅适用于 branch1？**

不。当一个标签被创建时，它被附加到一个特定的提交——提交也属于哪个分支（如果有的话）是无关紧要的。

**或者我是否需要使用命令“git tag 1.0 branch1”明确命名它所指的分支？

将分支名称添加到`git tag ...`命令只是`<branch>`用作对它当前引用的提交的引用并将标记附加到该提交。由于分支已签出（在您的示例中），`HEAD`因此也引用了相同的提交 - 所以 command`git tag <tagname>`和all 都引用了相同的提交`git tag <tagname> HEAD`并将`git tag <tagname> <branch>`产生相同的标签。

**我怎么能要求在命令行上只查看引用给定分支的标签（如果是这样的话）？**

同样，标签不指代分支，只是指提交——但是，除此之外，获取附加到单个分支的任何提交的所有标签的列表似乎不是一个命令。已经在几个问题中讨论过（至少）

*   [Git是否可以检索仅存在于某个分支中的标签列表？](https://stackoverflow.com/questions/10602780/is-it-possible-with-git-to-retrieve-a-list-of-tags-that-exist-only-in-a-certain)
*   [列出分支包含的标签](https://stackoverflow.com/questions/2381665/list-tags-contained-by-a-branch)

此外，来自对其他答案的评论的问题（忽略直接重复）：

**所以我关于你的回答的问题是，如果 GIT 完全没有区别，为什么它甚至还有“git tag”的语法？**

它没有这样的语法——这本书已经成为试图使主题变得更简单的牺牲品。`git tag <tagname> <commit>`有关正确语法的参考，请参见上一节。

**好的，所以你说 branch1 的 HEAD 提交（这听起来对我来说是正确的）所以它只适用于在变基之前的 branch1 对吗？**

首先，`HEAD`与分支的头部提交不同。我`HEAD`在上面定义为一个标签，它总是引用当前在工作目录中签出的提交。分支的头部是该分支中最近的提交——分支标签当前附加到的提交。

顺便说一句，标签不会通过变基移动。变基创建新的提交，任何引用旧提交的标签将继续引用它们。

**那么您是说，例如，我在 master 中提交，切换到 branch1（不进行任何提交）并执行“git 标记，然后它仍会标记 master 中的最后一次提交？**

创建的标签将附加到最新的提交中`branch1`—— `branch1`. 由于从 分支后没有创建任何提交，因此（其头部）中`master`的最新提交是相同的提交。`master`这只是处理相同提交的不同方式——仅此而已。

**我如何只查询以查看标签（提交）所指的分支？**

简短的回答是使用`git branch --contains <commit>`命令并将标签用作提交的引用，`git branch --contains <tagname>`.

在这个问题中更详细地讨论了这一点： [如何列出包含给定提交的分支？](https://stackoverflow.com/questions/1419623/how-to-list-branches-that-contain-a-given-commit)

我认为这涵盖了您所有独特的问题——希望它有所帮助。

# jquery - Codeigniter ajax 数据库查找在测试站点上工作，但不在生产环境中

> ID：15175542
> 
> 赞同：0
> 
> 时间：2013-03-02T14:23:32.180
> 
> 标签：jquery, ajax, codeigniter

我遵循了有关 ajax 查找的[教程](http://vortexdev.netii.net/article_17/Check_the_user_name_availability_with___Codeigniter_jQuery)，该教程会通知用户用户名是否已被使用。根据示例，我还在名为 login 的 localhost 文件夹中完成了本教程。我已经下载了他们所有的代码并应用了它。这可以正常工作`localhost/login`

如果我将代码移到我的实际 Web 应用程序中，`localhost/production`并从以下位置调整 check.js 文件中的语法：

```
url : baseurl + 'index.php/login/getResultfromdb/' + name, 
```

到：

```
url : baseurl + 'getResultfromdb/' + name, 
```

所有其他代码与以下相同。

我的问题是，当我在输入字段中输入数据并启动 jquery / ajax 时，结果总是是否定的。红十字会按照教程 css 显示。如果我输入一个已经被使用的用户名，它会返回它可用。

现在我在我的谷歌开发者工具（F12）中寻找错误并且看不到任何错误。唯一出现的是我在上面更正的 check.js 中的 url。

我的感觉是 jquery 没有正确获取输入值，因此数据库查询的值与输入的值不同。

这可能是我的 codeigniter 配置的问题吗？自动加载之类的？我已经检查了我所知道的所有内容，它似乎是正确的，但值仍然被错误地返回。

任何建议表示赞赏。

控制器语法是：

```
<?php
    class Login extends CI_Controller
    {
        function index()
        {
            $this->load->view('loginView');
        }
        function getResultfromdb($username){

        $this->db->where('username',urldecode($username));
        $query = $this->db->get('users')->num_rows();
        if($query == 0 ) echo 'userOk';
        else echo 'userNo';
    }
    } 
```

观点是：

```
<html>
    <head>
        <title>Check User Name</title>
        <link type="text/css" rel="stylesheet" href="<?=base_url()?>css/style.css"/>
    </head>

    <body>
        <form method="post" action="">

            <label for="username">Enter Your Name</label>
            <input type="text" id="username"/>
            <span class="checkUser" ></span>
            <input type="hidden" class="hiddenUrl"/>
        </form>

        <script type="text/javascript" src="<?=base_url()?>js/jquery-1.6.2.min.js"></script>
        <script type="text/javascript" src="<?=base_url()?>js/check.js"></script>

    </body>
</html> 
```

check.js 是：

```
$(document).ready(function(){

    $('#username').blur(function(){

        if( $('#username').val().length >= 3 )
            {
              var username = $('#username').val();
              getResult(username); 
            }
        return false;
    })
    function getResult(name){
        var baseurl = $('.hiddenUrl').val();
        $('.checkUser').addClass('preloader');
        $.ajax({
            url : baseurl + 'getResultfromdb/' + name,
            cache : false,
            success : function(response){
                $('.checkUser').removeClass('preloader');
                if(response == 'userOk') $('.checkUser').removeClass('userNo').addClass('userOk');
                else $('.checkUser').removeClass('userOk').addClass('userNo');;
            }
        })
    }
}) 
```

如前所述，这在我的 localhost/login 上效果很好，但在我的 localhost/production 上效果不佳？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:29:28.540

路径不正确。试试这个

```
url : baseurl + 'index.php/getResultfromdb/' + name, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T08:37:22.570

它是您生产服务器中的 .htaccess。你需要把那个放在你的本地主机中。

也尝试直接从浏览器浏览 url，看看是否可以访问它。

还要检查你是否启用了 csrf

RewriteCond 上的 RewriteEngine $1 !^(index.php|images|robots.txt) RewriteRule ^(.*)$ /index.php/$1 [L]

# haskell - 为 Haskell 堆栈编写 pop 和 push 函数

> ID：15175543
> 
> 赞同：7
> 
> 时间：2013-03-02T14:23:44.827
> 
> 标签：haskell, stack

嗨，我正在尝试为定义如下的 Haskell 堆栈创建 pop 和 push 函数：

```
data mystack = Empty | Elem Char mystack deriving Show 
```

如果我没有这个定义限制，我会像这样推动

```
push x mystack = (x:mystack) 
```

像这样流行

```
pop mystack = head mystack 
```

但是有了这个限制，我不知道如何实现这些功能。你能给我一些提示吗？我什至无法自己编写带有该描述的 Stack 类型。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-02T14:43:14.293

提示：这是使用内置列表实现堆栈操作的方法：

```
push :: a -> [a] -> ((),[a])  -- return a tuple containing a 'nothing' and a new stack
push elem stack = ((), (:) elem stack)

pop :: [a] -> (a, [a])  -- return a tuple containing the popped element and the new stack
pop [] = error "Can't pop from an empty stack!"
pop ((:) x stack) = (x, stack) 
```

`(:) x xs`是另一种写作方式`x:xs`。

要在您自己的`MyStack`类型上执行此操作，请注意您的`Empty`实际工作方式就像`[]`, 并且`Elem`等效于`(:)`. 我不会直接给你代码来做这件事，因为自己弄清楚是一半的乐趣！

# python - Django查询集：切片查询集后聚合不起作用

> ID：15175545
> 
> 赞同：4
> 
> 时间：2013-03-02T14:23:45.463
> 
> 标签：python, django, aggregate, slice, django-queryset

```
Car.objects.all() # 5 cars in db, every car costs 1000 $

Car.objects.all().aggregate(Sum("price")) # result: 5000

# aggregate only on a subset

Car.objects.all()[3:].aggregate(Sum("price")) # result: 5000!, not 3000

# with filter()[3:] i got the same results! 
```

为什么？切片不在数据库中评估？

我怎样才能用聚合来实现呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T15:01:24.613

似乎不可能在切片上使用聚合，因为这个开放票建议：[https ://code.djangoproject.com/ticket/12886](https://code.djangoproject.com/ticket/12886)

一种解决方案是执行两个不同的查询。第一个检索 Cars 的子集，第二个实际执行聚合：

```
qs = Car.objects.all()[:3]
sub_sum = Car.objects.filter(pk__in=qs).aggregate(Sum("price")) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T14:30:55.737

`aggregate`通过修改发送到数据库的查询来工作，导致在数据库端发生聚合。你有两个选择。

1.  您可以`filter`在使用之前减少 QuerySet `aggregate`，而不是通过切片来减少它。
2.  您必须在 Python 中进行聚合，例如`sum(car.price for car in cars)`在切片之后。切片后，查询将发送到数据库，因此您不能再通过 ORM（即 QuerySet 方法）进行聚合。

# c# - WPF 自定义数据网格列标题

> ID：15175546
> 
> 赞同：7
> 
> 时间：2013-03-02T14:23:47.980
> 
> 标签：c#, wpf, datagrid

我需要创建一个自定义 dataGrid DataGridTextColumn，如下图所示：

![草图](../Images/503da00957de81daa52d1f70e51178e6.png)

红色矩形是文本框，用于在列内进行搜索。

到目前为止，我已经实现了这样的数据网格（简化版本）：

```
 <DataGrid x:Name="CompassLogDataGrid"
              Grid.Row="1"
              Style="{DynamicResource ResourceKey=DataGridStyle}"
              IsTextSearchEnabled="True">

            <DataGrid.Columns>
                <DataGridTextColumn CellStyle="{StaticResource IdCell}"
                                x:Name="ID"
                                Header="ID"
                                Foreground="Black"
                                Binding="{Binding ID}"
                                DisplayIndex="0" />

                <DataGridTextColumn x:Name="DateGTC"
                                Header="Date"
                                Binding="{Binding DateString}"
                                CellStyle="{StaticResource DateGTCCell}" />
            </DataGrid.Columns

    </DataGrid 
```

我不知道如何创建这些文本框。任何线索将不胜感激

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-02T14:42:29.027

`DataGridTemplateColumn`就是你要找的。您可以根据需要自定义模板 -

```
 <DataGrid>
       <DataGrid.Columns>
           <DataGridTemplateColumn>
               <DataGridTemplateColumn.CellTemplate>
                   <DataTemplate>
                      <TextBox BorderBrush="Red" BorderThickness="3" Margin="5"/>
                   </DataTemplate>
               </DataGridTemplateColumn.CellTemplate>
           </DataGridTemplateColumn>
       </DataGrid.Columns>
    </DataGrid> 
```

通过示例`ItemsSource`，它看起来像 -

![在此处输入图像描述](../Images/0b234d0b6b71483aec43937f2151ce57.png)

**编辑**

如果您想自定义标题，您需要`HeaderTemplate`像这样为您的列提供 -

```
 <DataGrid>
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding Name}"
                                Header="{Binding HeaderName}">
                <DataGridTextColumn.HeaderTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <TextBlock Text="{Binding Content, RelativeSource=
                                         {RelativeSource Mode=TemplatedParent}}"
                                       Margin="5"/>
                            <TextBox BorderBrush="Red" BorderThickness="3"
                                     Width="50" Margin="5"/>
                        </StackPanel>
                    </DataTemplate>
                </DataGridTextColumn.HeaderTemplate>
            </DataGridTextColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

这是外观 -

![在此处输入图像描述](../Images/0578352ea9687d5fdd1d549237b6a614.png)

# vba - Excel VBA：对选择中的每一行进行排序

> ID：15175558
> 
> 赞同：0
> 
> 时间：2013-03-02T14:24:54.303
> 
> 标签：vba, excel

我正在尝试对选择中的每一行进行排序。例子：

排序前：

```
8 3 17
2 9 4
5 3 8 
```

排序后：

```
3 8 17
2 4 9
3 5 8 
```

我写了这段代码，但它不起作用：

```
Public Sub SortByString()
Dim row As Range
For Each row In Selection.Rows
    row.Sort Key1:=row, Order1:=xlAscending, Orientation:=xlSortColumns
Next row
End Sub 
```

我是VBA的新手。比我做错了吗？请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T15:17:47.777

问题在于您的 Orientation 参数。它应该是 xlSortRows 或 xlLeftToRight：

```
row.Sort Key1:=row, Order1:=xlAscending, Orientation:=xlSortRows 
```

或者

```
row.Sort Key1:=row, Order1:=xlAscending, Orientation:=xlLeftToRight 
```

第一个是有道理的，因为您实际上是在对行进行排序。第二个是我用宏记录器得到的。

# php - $.get() 在点击链接时不起作用

> ID：15175560
> 
> 赞同：0
> 
> 时间：2013-03-02T14:25:33.227
> 
> 标签：php, jquery, ajax, codeigniter

当用户单击链接时，我正在尝试更新数据库中的表。我想在不加载另一个页面的情况下做到这一点

```
<a href="#" onclick="capturehit()">Like</a> 
```

这是脚本

```
<script>
function capturehit() {
$.get("/sub/updatehit/?aid=<?php echo $article_id; ?>&uid=<?php echo $userid; ?>");
return false;
}
</script> 
```

sub 是我的控制器。我正在使用 Codeigniter。

问题是这不起作用。当我评论 $.get() 并添加一个警报（“Hello”）时，点击时会出现一个警报框。但我不知道为什么 $.get() 不起作用。

我之前在使用表单时也遇到过 ajax 和 jquery 的问题，在这些情况下，我不得不求助于加载整个页面。在这种情况下，我不能那样做，我不想那样做。请帮助我找出问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:59:35.573

你已经使用 jquery 了，为什么你不尝试使用 jquery click 功能呢？

```
 $(function(){
    $("#element").click(function(){
       $.get("/sub/updatehit/?aid=<?php echo $article_id; ?>&uid=<?php echo $userid; ?>");
       return false;
    }) 
 }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T15:00:16.897

试试这个 jQuery lib 和脚本的顺序：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script>
  function capturehit() {
    $.get("/sub/updatehit/?aid=<?php echo $article_id; ?>&uid=<?php echo $userid; ?>");
  }
</script> 
```

看来你是`missing the jQuery library at top of this script`。这就是为什么`alert()`会发生但你的函数调用没有被触发，因为`might not be jQuery available before this script`你的页面中有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T14:29:16.893

如果您返回 false，您将收到一个警告框。尝试从脚本中删除返回条件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T15:24:00.840

你说你使用**CodeIgniter**并且“sub”是一个控制器。所以，“updatehit”必须是你的控制器的一个方法。你想接收这两个参数：**aid**和**uid**

您的“子”控制器应如下所示：

```
<?php
class Sub extends CI_Controller {

    public function updatehit($aid, $uid)
    {

    }
} 
```

或这个：

```
<?php
class Sub extends CI_Controller {

    public function updatehit()
    {
        $aid = $this->input->get('aid');
        $uid = $this->input->get('uid');
    }
} 
```

这就是 CodeIgniter 的工作原理。请记住，**CodeIgniter 使用基于段的方法**。要调用您的 updatehit() 方法（并传递两个参数，例如aid = 2 和 uid = 3），URL 必须如下所示：

[http://www.example.com/sub/updatehit/2/3/](http://www.example.com/sub/updatehit/2/3/)

所以你的javascript代码变成：

```
function capturehit() {
    $.get("/sub/updatehit/<?php echo $article_id; ?>/<?php echo $userid; ?>");
    return false;
} 
```

以更恰当的方式，使用 jQuery click 事件（参见 EnterJQ 响应）：

喜欢

```
$(function(){
    $("a#like").click(function(){
        $.get("/sub/updatehit/<?php echo $article_id; ?>/<?php echo $userid; ?>/");
        return false;
    });
}) 
```

有关更多信息，请参阅[CodeIgniter URL](http://ellislab.com/codeigniter/user-guide/general/urls.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T14:35:41.540

那里没有错字吗？

```
/sub/updatehit.php/? //shoudn't that be updatehit.php?aid=... 
```

# java - 为什么以下使用来自 commons.dbcp 的池连接的简单 Java 代码会阻塞？

> ID：15175562
> 
> 赞同：1
> 
> 时间：2013-03-02T14:25:41.600
> 
> 标签：java, connection-pooling, hsqldb, apache-commons-dbcp, apache-commons-pool

我编写了一个简单的 Java 代码，它尝试将文件存储在 hsqldb 数据库中。它所做的只是从某个目录读取文件并将它们放入数据库中。它是单线程的，但我使用来自 apache commons.dbcp 的池连接，以便以后能够处理多线程访问。

问题是读取几个文件后代码块。

请在下面找到整个源代码。

**程序.java**

```
import java.io.File;
import java.io.IOException;
import java.sql.SQLException;

import javax.sql.DataSource;

import org.apache.commons.dbcp.ConnectionFactory;
import org.apache.commons.dbcp.DriverManagerConnectionFactory;
import org.apache.commons.dbcp.PoolableConnectionFactory;
import org.apache.commons.dbcp.PoolingDataSource;
import org.apache.commons.pool.KeyedObjectPoolFactory;
import org.apache.commons.pool.impl.GenericKeyedObjectPoolFactory;
import org.apache.commons.pool.impl.GenericObjectPool;

public class Program {
  public static DataSource getPoolingDataSource(String driverClass, String url, String user, String password) throws ClassNotFoundException {
    Class.forName(driverClass);
    ConnectionFactory connectionFactory = new DriverManagerConnectionFactory(url, user, password);
    GenericObjectPool connectionPool = new GenericObjectPool();
    KeyedObjectPoolFactory stmtPool = new GenericKeyedObjectPoolFactory(null);
    new PoolableConnectionFactory(connectionFactory, connectionPool, stmtPool, null, false, true);
    return new PoolingDataSource(connectionPool);
  }

  public static void main(String[] args) throws ClassNotFoundException, SQLException, IOException, InterruptedException {
    String root = args.length == 0 ? "c:/Work/java/ntxdb" : args[0];

    Runtime run = Runtime.getRuntime();
    Process pr = run.exec("cmd /c del /s/q c:\\tmp\\file.db*");
    pr.waitFor();
    DataSource ds = getPoolingDataSource("org.hsqldb.jdbcDriver", "jdbc:hsqldb:file:c:/tmp/file.db", "sa", "");
    HsqldbFileStorage fs = new HsqldbFileStorage(ds);
    putFiles(fs, new File(root));
  }

  private static void putFiles(HsqldbFileStorage fs, File parent) throws IOException, SQLException {
    for (File child : parent.listFiles()) {
      if (child.isDirectory()) {
        putFiles(fs, child);
      } else {
        System.out.println(child.getCanonicalPath());
        fs.put(child);
      }
    }
  }
} 
```

**HsqldbFileStorage.java**

```
import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;

import javax.sql.DataSource;

public class HsqldbFileStorage {
  private static final String SET_SQL = "MERGE INTO test" +
    "  USING (VALUES ?, CAST(? AS BLOB)) I (name, data)" +
    "  ON (test.name=I.name)" +
    "  WHEN MATCHED THEN UPDATE SET test.data = I.data" +
    "  WHEN NOT MATCHED THEN INSERT (name, data) VALUES (I.name, I.data)";
  private DataSource m_dataSource;

  public HsqldbFileStorage(DataSource dataSource) throws SQLException {
    super();
    m_dataSource = dataSource;
    Connection c = dataSource.getConnection();
    c.createStatement().execute("Create Cached Table IF NOT EXISTS test (name VARCHAR(256), data BLOB(10M));");
  }

  public void put(File file) throws IOException, SQLException {
    put(file.getCanonicalPath(), file);
  }

  public void put(String name, File file) throws IOException, SQLException {
    InputStream is = new BufferedInputStream(new FileInputStream(file));
    try {
      put(name, is);
    } finally {
      is.close();
    }
  }

  public void put(String name, InputStream data) throws SQLException, IOException {
    PreparedStatement set = m_dataSource.getConnection().prepareStatement(SET_SQL);
    try {
      set.setString(1, name);
      set.setBinaryStream(2, data);
      set.executeUpdate();
    } finally {
      set.close();
    }
  }
} 
```

代码依赖于 commons-dbcp 1.4、commons-pool 1.6 和 hsqldb 2.2.9

在项目目录本身上运行它应该在数据库中放置 62 个文件（我那里的文件比前面提到的两个源文件多得多），为每个文件打印一行。

不幸的是，它阻塞了第八个文件，并带有以下堆栈跟踪：

```
 at java.lang.Object.wait(Object.java:-1)
  at java.lang.Object.wait(Object.java:485)
  at org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1118)
  at org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:106)
  at HsqldbFileStorage.put(HsqldbFileStorage.java:41)
  at HsqldbFileStorage.put(HsqldbFileStorage.java:34)
  at HsqldbFileStorage.put(HsqldbFileStorage.java:28)
  at Program.putFiles(Program.java:42)
  at Program.putFiles(Program.java:39)
  at Program.putFiles(Program.java:39)
  at Program.main(Program.java:33) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T14:32:58.790

您正在调用：

```
m_dataSource.getConnection() 
```

在您的 put(String, InputStream) 方法中。这会创建一个您永远不会关闭的新连接。

因此，当您在某个阶段将 62 个文件放入其中时，它将达到池中的最大连接数，之后池将等待连接返回到池中。

如果您这样修改您的方法：

```
 public void put(String name, InputStream data) throws SQLException, IOException {
    Connection con = null;
    PreparedStatement set = null;
    try {
      con = m_dataSource.getConnection();
      set.prepareStatement(SET_SQL);
      set.setString(1, name);
      set.setBinaryStream(2, data);
      set.executeUpdate();
    } finally {
      if (set != null) {
        set.close();
      }
      if (con != null) {
        con.close();
      }
    }
  } 
```

请注意，当您通过池访问连接时，您仍然需要调用 close。这实际上不会关闭连接，而是将其返回到池中。

# c# - 由于选择了组合框索引导致表单加载错误

> ID：15175564
> 
> 赞同：0
> 
> 时间：2013-03-02T14:26:03.597
> 
> 标签：c#, winforms

我正在尝试根据组合框中选择的项目填充文本框。问题是它在加载时引发以下错误，我在visual studio中按下next ..next ..它做了我真正想做的事情。

![在此处输入图像描述](../Images/6c968da87aedf68421954b5c9c58986b.png) 如何解决负载问题。

表单加载代码是

```
private void UpdateProduct_Load(object sender, EventArgs e)
        {
            DataSet ds = GetAllItems();
            comboBox2.DataSource = ds.Tables[0];
            comboBox2.DisplayMember = "Product Name";
            comboBox2.SelectedIndex = 0;

        } 
```

组合框选定索引的代码是

```
private void comboBox2_SelectedIndexChanged(object sender, EventArgs e)
        {
           // string selectedText = this.comboBox2.GetItemText(this.comboBox2.SelectedItem);
            DataSet d = GetProductInfo(comboBox2.Text);
            if (d.Tables.Count > 0)
            {
                textBox2.Text = d.Tables[0].Rows[0]["Quantity"].ToString();
                textBox3.Text = d.Tables[0].Rows[0]["Color"].ToString();
                textBox4.Text = d.Tables[0].Rows[0]["Size"].ToString();
                textBox5.Text = d.Tables[0].Rows[0]["Price"].ToString();
            }

        } 
```

我只有在第一次加载表单时遇到问题。

获取产品信息代码

```
 public DataSet GetProductInfo(string product)
        {
            DataSet dataSet = new DataSet();
            OleDbConnection oleConn = new OleDbConnection(connString);

            try
            {
                oleConn.Open();
                string sql = "SELECT [Quantity], [Color], [Size], [Price] FROM [Product] WHERE [Product Name]= '" + product + "'";
                OleDbDataAdapter dataAdapter = new OleDbDataAdapter(sql, oleConn);
                dataAdapter.Fill(dataSet, "Product");
            }
            catch (Exception ex)
            {
                MessageBox.Show("An exception has been occured\n" + ex.ToString());
                Console.WriteLine(ex.ToString());
            }
            finally
            {
                oleConn.Close();
            }
            if (dataSet.Tables["Product"].Rows.Count <= 0)
                return null;

            return dataSet;
        } 
```

堆栈跟踪

```
System.NullReferenceException occurred
  HResult=-2147467261
  Message=Object reference not set to an instance of an object.
  Source=Purchase Management
  StackTrace:
       at Purchase_Management.UpdateProduct.comboBox2_SelectedIndexChanged(Object sender, EventArgs e) in c:\Users\Amrit\Desktop\Purchase Management\Purchase Management\UpdateProduct.cs:line 99
  InnerException: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:06:08.767

不要使用 SelectedIndexChanged，而是使用**SelectionChangeCommitted**事件。*这避免了所有这些问题，因为它仅在用户*更改所选项目时触发，而不是在您初始化组合框时触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:28:31.287

你的方法返回null。这就是为什么抛出错误

```
DataSet dstProduct = new DataSet();
dstProduct = GetProductInfo(comboBox2.Text); 
```

然后尝试

```
if(dstProduct.Tables.Count>0 && dstProduct.Tables[0].Rows.Count >0)
{
 // then do stuff. 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T14:29:27.453

因为`.Count`在`d = null`.

宣布`DataSet d = new DataSet();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T14:39:14.343

只需添加`if (!string.IsNullOrEmpty(productName))`语句，您就可以了：

```
private void comboBox2_SelectedIndexChanged(object sender, EventArgs e)
{
    var productName = comboBox2.Text;
    if (!string.IsNullOrEmpty(productName)) {

        DataSet d = GetProductInfo(productName);
        if (d.Tables.Count > 0)
        {
            textBox2.Text = d.Tables[0].Rows[0]["Quantity"].ToString();
            textBox3.Text = d.Tables[0].Rows[0]["Color"].ToString();
            textBox4.Text = d.Tables[0].Rows[0]["Size"].ToString();
            textBox5.Text = d.Tables[0].Rows[0]["Price"].ToString();
        }
    }
} 
```

# javascript - 检查多维数组中的重复元素并仅删除一个元素

> ID：15175570
> 
> 赞同：0
> 
> 时间：2013-03-02T14:26:38.423
> 
> 标签：javascript, arrays

我想删除更多维数组中的一个重复元素。到目前为止，这是我的代码：

```
for (var i = 0; i< blog.length; i++){
  for (var i = 0; i< blog.length; i++){
     var check1 = blog[i][1];
     var check2 = blog[j][1];
     //check1 = 120;;200  check2 = 130;;180
     if (check1 == check2){
        blog[i].splice(i, 1);
     }
  }
} 
```

*   我只想删除重复对的第一个元素。
*   你能给我一个更聪明的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:39:20.773

在数组上向下循环并将找到的值存储为*对象*中的键，以便您可以快速[`in`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/in)检查。

```
var blog = [['a', 0], ['b', 1], ['c', 2], ['d', 3], ['e', 0]]; // test var

var i = blog.length, // var to loop over
    o = {}, // obj to hold keys
    b2 = []; // temporary array
while (i--) { // looping down
    if (false === blog[i][1] in o) { // if not already seen
        o[blog[i][1]] = 1; // mark as seen
        b2[b2.length] = blog[i]; // add to temporary array
    }
}
blog = b2.reverse(); // temporary array is backwards so reverse it and set `blog`
// [["b", 1], ["c", 2], ["d", 3], ["e", 0]] 
```

# c - 如何翻译 printf 给出的 %a 的值？

> ID：15175573
> 
> 赞同：0
> 
> 时间：2013-03-02T14:27:02.473
> 
> 标签：c, floating-point, printf, double-precision

`0x1.921fb82c2bd7fp+1`人类可读的演示文稿中的价值是什么？我通过`printf`使用得到了这个值`%a`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T14:32:29.107

尾数是十六进制，指数是十进制值，表示尾数按比例缩放的 2 的幂。

# html - 跨同一浏览器的 CSS/HTML 兼容性问题

> ID：15175577
> 
> 赞同：0
> 
> 时间：2013-03-02T14:28:14.647
> 
> 标签：html, css, google-chrome, cross-browser

再会。

我有一个相当奇怪的问题。这是我第一次遇到这种情况。

我有一个 html/css 菜单（导航菜单），其中包含一个 ul 列表和锚标记。我正在使用边框底部突出显示悬停时的菜单...

现在问题：我有 2 台我工作的 PC - 两个 Windows 7，不同的版本。现在在**chrome**和 firefox 中，菜单显示正常。另外，我正在使用仅 IE 样式表来修复 IE 中的对齐问题。查看 Image1 以在上述浏览器中查看我的菜单...

现在在我雇主的 PC（Windows 8）和我的一位同事 PC 上，也是 Windows 8，**列表项向下移动 - 在 Chrome**中。同样在 IE 中（未在 FF 中测试） - 参见 Image2。

为什么 css 在我的 Chrome 浏览器上可以正常显示，但在他们的浏览器上却不行。页面上的所有其他内容在浏览器之间显示良好。

请参阅我的 CSS 定义菜单：

/*菜单父 div 的 CSS* /

```
#wrapper {
    margin: 0 auto;
    margin: 20px auto;
    text-align: center;
    width: 960px;
    background: #f5f5f5; /*url('/images/bgMain.png') repeat center;*/
    -moz-box-shadow:0 0 5px #999;
    -webkit-box-shadow:0 0 5px #999;
    box-shadow:0 0 5px #999;
}

#header {
    margin: 0 auto;
    /*background: url('/images/bg2.png') repeat-x center;*/
    background: #eee;
    text-align: center;
    border-bottom: 6px solid #f3911f;
} 
```

/**********************这里菜单CSS开始***************/

```
#menuNav {
    height: 100px;
    text-align: center;
    margin: 0 auto;
}
    #menuNav ul {
        list-style: none;

    }
    #menuNav ul li {
        display: inline-block;
        height: 100px;
        line-height: 178px;
    }
        #menuNav ul li a {
            padding: 0px 15px ;
            font-family: 'Myriad Pro', 'Open Sans', Arial, sans-serif;
            font-size: 22px;
            color: #3c3b3d;
            text-transform: uppercase;
            border-bottom: 6px solid #f3911f;
            text-decoration: none;
        }
            #menuNav ul li a.menuSmaller {
                font-size: 18px;
                padding-bottom: 2px;
            }
            #menuNav ul li a:hover {
                 border-bottom: 6px solid #7f2218;      
            }
            #menuNav ul li a:focus {
                border-bottom: 6px solid #7f2218;
            }

            /*LOGIN*/
            #menuNav ul li#login, #menuNav ul li#logout{                
                float: right;
                margin: 0px;
            }
                #menuNav ul li#login a, #menuNav ul li#logout a {
                    color: #7f2218;
                }

/*Show hover effect on selected/active menu*/
.activeMenu {
    border-bottom: 6px solid #7f2218 !important;      
} 
```

HTML：

```
<div id="wrapper" class="row-fluid">

        <div id="header" class="row-fluid">
            <div id="logo" class="span2">
                <div><a href="Home.aspx" title="Card Vault logo"><img src="images/logo.png" alt="CardVault Logo" /></a></div>
            </div>
            <div id="menuNav" class="span10">           
                <ul>
                    <li id="menuSignUp"><a href="SignUp.aspx">Sign Up</a></li>

                    <li id="menuPricing"><a href="Pricing.aspx">Pricing</a></li>
                    <li id="menuCorporate"><a href="Corporate.aspx">Corporate</a></li>
                    <li id="menuAbout"><a href="About.aspx">About</a></li>
                    <li id="menuPartners"><a href="Partners.aspx">Partners</a></li>

                    <li id="login"><a href="login.aspx">Login</a></li>                  
                </ul>             
            </div>
        </div> 
</div> 
```

注意：我使用 twitter bootstrap 作为主布局，但我不认为这会导致任何问题，它以前从未...

此外，我们都有最新的 Chrome 版本...

![Image1 - 在我的 Chrome 浏览器上显示正常](../Images/bf13278346827a074d5b868ec1f9561a.png)

![Image2 - 它如何在对方的 Chrome 上显示](../Images/0c77d699f8e9836c91ef1e055a4b7bad.png)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T02:17:04.287

我见过这种情况的唯一一次是在不同的操作系统之间。在这种情况下，它适用于 Windows 和 Linux，但不适用于 Mac。各种事件之间的唯一共同特征是呈现的菜单字体看起来不同。而且，是的，它也让我有些头疼。

您可能还想通过这样做来重置页面缩放，`CTRL-0`以防万一有人放大并且搞砸了。

起作用的是调整菜单项的填充，直到不正确的项正确显示并同时达到。不幸的是，我只能通过反复试验来做到这一点，因为相关系统无法访问开发服务器。

# d3.js - 居中力导向图

> ID：15175587
> 
> 赞同：1
> 
> 时间：2013-03-02T14:29:08.210
> 
> 标签：d3.js, force-layout

基于这个例子（[http://bl.ocks.org/mbostock/938288](http://bl.ocks.org/mbostock/938288)）我这样做了：

```
var data0 = [
      {name:'bob',  connections: ['jane', 'tom', 'sue']},
      {name:'jane', connections: ['bob', 'sue']},
      {name:'sue',  connections: ['tom', 'bob', 'jane', 'tom']},
      {name: 'tom', connections: []}
     ];

    var data1 = [
            {"name":"Salvation Army", "connections": []},
            {"name":"Northwestern University", "connections": []},
            {"name":"William Dicket", "connections": []},
            {"name":"Scott Saff", "connections": []},
            {"name":"City Co", "connections": []},
            {"name":"Action 1", "connections": []},
            {"name":"Action 2", "connections": []},
            {"name":"Action 3", "connections": []},
            {"name":"Action 4", "connections": []},
            {"name":"Action 5", "connections": []},
            {"name":"Action 6", "connections": []},
            {"name":"Action 7", "connections": []},
            {"name":"Action 8", "connections": []},
            {"name":"Action 9", "connections": []},
            {"name":"Action 10", "connections": []},
            {"name":"Action 11", "connections": []}
           ]   

    var w = 500,
        h = 500,
        angle = d3.scale.ordinal().domain(d3.range(0, data1.length)).rangeBands([0, 2 * Math.PI]);

        line = d3.svg.chord()
        .startAngle(function(d) { return (d.startAngle + d.endAngle) / 2; })
        .endAngle(function(d) { return (d.startAngle + d.endAngle) / 2; })
        .radius(h / 2 - 20);

        var angles = {},
        connections = [];

        data1.forEach(function(d, i) {
          var a = angle(i)
          angles[d.name] = { 
            startAngle: a, 
            endAngle: a + angle.rangeBand() / 2 
          }
        })

        data1.forEach(function(p) {
          p.connections.forEach(function(c) {
            connections.push({
              source: angles[p.name],
              target: angles[c]
            })
          })
        })

    var force = self.force = d3.layout.force()
    .nodes(data0)
    .distance(10)
    .charge(-100)
    .size([200, 200])
    .start();

    var vis = d3.select("body").append("svg:svg")
        .attr("width", w)
        .attr("height", h)
      .append("svg:g")
        .attr("transform", "translate(" + w / 2 + "," + h / 2 + ")");

        var node = vis.selectAll("g.node")
        .data(data0)
        .enter().append("svg:g")
        .call(force.drag);

        node.append("circle")
          .attr("r", 10); 

    var path = vis.selectAll("path")
        .data(data1)
      .enter().append("svg:path")
        .attr("d", d3.svg.arc()
        .innerRadius(h / 2 - 20)
        .outerRadius(h / 2 - 10)
        .startAngle(function(d, i) { return angles[d.name].startAngle })
        .endAngle(function(d, i) { return angles[d.name].endAngle; }))
        //.call(force.drag);

    force.on("tick", function() {
        node.attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });
        path.attr("transform", function(d) { return "translate( )"; });

    }); 
```

我的问题是：如何将内部节点移动到圆弧的中心？

谢谢你！

简

编辑：

我能够或多或少地将节点居中在中间。但是现在，我在外部段和内部节点之间添加链接时遇到了严重的问题。在这个 jsfiddle ( [http://jsfiddle.net/dinosaur/SFYrJ/](http://jsfiddle.net/dinosaur/SFYrJ/) ) 中，您可以看到，有一个指向外部段的链接，但链接长度太短......有人知道吗？

```
var data0 = [
  {name:'bob',  "connections": ['jane', 'tom', 'sue']},
  {name:'jane', "connections": ['bob', 'sue']},
  {name:'sue',  "connections": ['tom', 'bob', 'jane', 'tom']},
  {name: 'tom', "connections": []}
 ];

var data1 = [
        {"name":"City Co"},
        {"name":"Action 1"},
        {"name":"Action 2"},
        {"name":"Action 3"},
        {"name":"Action 4"},
        {"name":"Action 5"},
        {"name":"Action 6"},
        {"name":"Action 7"},
        {"name":"Action 8"},
        {"name":"Action 9"},
        {"name":"Action 10"},
        {"name":"Action 11"}
       ]

var links = [
             {"source":1,"target":6,"value":10},
             {"source":6,"target":7,"value":10},
             {"source":7,"target":8,"value":10},
             ]

var w = 500,
    h = 500,
    angle = d3.scale.ordinal().domain(d3.range(0, data0.length)).rangeBands([0, 2 * Math.PI]);

var data12 = data0.concat(data1)

    /*
    line = d3.svg.chord()
    .startAngle(function(d) { return (d.startAngle + d.endAngle) / 2; })
    .endAngle(function(d) { return (d.startAngle + d.endAngle) / 2; })
    .radius(h / 2 - 20);
    */
    var angles = {},
    connections = [];

    data0.forEach(function(d, i) {
      var a = angle(i)
      angles[d.name] = { 
        startAngle: a, 
        endAngle: a + angle.rangeBand() / 2 
      }
    })
/*
    data1.forEach(function(p) {
      p.connections.forEach(function(c) {
        connections.push({
          source: angles[p.name],
          target: angles[c]
        })
      })
    })
*/ 
```

非常感谢！简

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T04:02:27.390

您针对节点的索引与`data0`之前的节点数据集不同`data1`。因此，简单的解决方案如下：

```
var data12 = data1.concat(data0) 
```

而不是当前的：

```
var data12 = data0.concat(data1) 
```

[小提琴](http://jsfiddle.net/SFYrJ/1/)

但是，如果您现在想要在 data1 中的对象之间建立链接，它可能不是完美的解决方案。所以我建议使用自定义 id，就像在[这个例子](http://bl.ocks.org/emeeks/2432083)中所做的那样。

# wpf - 实体框架：在保存更改之前重新查询源

> ID：15175588
> 
> 赞同：-2
> 
> 时间：2013-03-02T14:29:09.443
> 
> 标签：wpf, vb.net, entity-framework

对。我的数据库表包含数千条记录，通过使用 EF 应用日期过滤器，我只读取了几十条记录。假设我的用户在 UI 中更改了其中一些，然后从 UI 更改日期范围以引入更多记录。日期过滤器控件直接绑定到我的 VM 的两个属性，称为 DateFrom 和 DateTo。这些属性依次执行此操作：

```
AllOrders = context.Orders.Where(Function(x) x.Date >= DateFrom AndAlso x.Date <= DateTo).ToList() 
```

AllOrders 是我的 UI 的 DataContext 绑定到的属性。我的问题是，这种重新查询是否会丢弃我的本地更改？我应该在重新查询之前调用 SaveChanges() 吗？如果我只想在用户明确按下保存按钮时保存内容怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:33:08.947

如果您在 ObjectContext 上，则可以使用[MergeOption](http://msdn.microsoft.com/en-us/library/system.data.objects.mergeoption.aspx)告诉 EF 如何处理实体。如果您在 DbContext 上，我相信您可以使用[.AsNoTracking()](http://msdn.microsoft.com/en-US/data/jj556203)。在任何情况下，您都应该考虑使用短期上下文而不是长期上下文。

# ruby - confluence4r 添加

> ID：15175589
> 
> 赞同：0
> 
> 时间：2013-03-02T14:29:14.983
> 
> 标签：ruby, confluence

我们使用 Jira/Confluence 作为我们的 wiki 站点。我很难弄清楚如何使用添加。我猜我错过了一些非常明显的东西。当我去这个网站：[https](https://confluence.atlassian.com/display/DISC/Confluence4r) ://confluence.atlassian.com/display/DISC/Confluence4r下载 confluence4r 文件，不知道我应该做什么之后。该文件包含一个模块，这很有意义，为什么它在运行时不做任何事情。但是我应该以某种方式使用 gem install 功能吗？当我只是尝试在 ruby​​ 脚本中使用它时，我收到以下错误：

```
conf.rb:15:in `<main>': uninitialized constant Confluence (NameError) 
```

我在哪里提供每个脚本所需的信息（URL、用户和密码在使用时包含正确的值）：

```
server = Confluence::Server.new("https://collab.sitename.com")
server.login("user", "pass")
puts server.getSpaces() 
```

任何如何获得工作的信息表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T06:02:56.053

Confluence4r 不是作为 ruby​​gem 分发的，它只是一个 ruby​​ 脚本，您可以将其放到文件系统中并直接引用。

如果您将 Confluence4r.rb 与您自己的脚本放在同一目录中，您需要像这样要求它：

```
require './confluence4r.rb' 
```

您不应该需要“confluence”和“confluence-client”rubygem 来使用 confluence4r；它只是 Confluence XML-RPC API 的一个非常薄的包装器。

# css - 编辑/替换 Wordpress TwentyTwelve 默认菜单

> ID：15175598
> 
> 赞同：0
> 
> 时间：2013-03-02T14:29:40.110
> 
> 标签：css, wordpress, wordpress-theming

我正在尝试编辑 Wordpress TwentyTwelve 主题的默认菜单。到目前为止，我已将子菜单设置为水平，但它们在 Firefox 中的对齐方式与在 Chrome 中的对齐方式不同。在 Ff 中，它看起来如我所愿，但在 Chrome 中，子菜单与先前单击的菜单项对齐，而不是在主菜单的最左侧。基本上，我想要一个水平的两行菜单。我无法正确获取“位置：”。这是它在两种浏览器中的外观：

以下是它在两个浏览器中的外观：Chrome：http: [//imageshack.us/photo/my-images/248/cssmenuchrome.jpg/](http://imageshack.us/photo/my-images/248/cssmenuchrome.jpg/)

我无法发布更多链接，因为我需要 10 个声望，但那里也需要第二张图片（Firefox 中的菜单）。

到目前为止，这是我的代码的一个小提琴：http: [//jsfiddle.net/ZN9my/](http://jsfiddle.net/ZN9my/)

```
.main-navigation li ul ul {
        top: 0;
        left: 100%;
    }
  .main-navigation .menu-item li {
        display: none;
        margin-right: 14px !important;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:29:22.430

正如您所说，您的问题是两种浏览器似乎以不同的方式处理您的问题`position:absolute;`。 `position:absolute`应该针对具有明确 set 的最新父元素进行计算`position`，这意味着它实际上是 Chrome 正在正确解释它。

在这种情况下，您给出`.main-navigation li`了一个`position:relative`，这意味着 Chrome 正在`li.sub-menu`相对于它定位子菜单 。如果您`position-relative`从 CSS for中删除`.main-navigation li`并将其添加到`ul#menu-main`，则将`li.sub-menu`相对于主导航 ul 定位，并且应该按照您希望的方式在浏览器中运行。您可能希望将`.main-navigation li ul`'s `top`from更改为类似的`100%`东西，`37px`以便它仍然位于正确的位置。

我也对您的 jsfiddle 进行了更改：http: [//jsfiddle.net/ZN9my/1/](http://jsfiddle.net/ZN9my/1/)。

# google-maps-api-3 - 来自 PHP 的 GMap V3 有效 JSON 作为 GDownloadUrl 的替代品

> ID：15175600
> 
> 赞同：0
> 
> 时间：2013-03-02T14:30:00.217
> 
> 标签：google-maps-api-3

在 V2 Gmap Api 中，我可以使用 GDownloadUrl 来读取我的 php 中生成的 JSON 值并处理该值并将它们很好地显示在地图上。我需要在 V3 中做同样的事情并且 GDownloadUrl 不存在，现在实现这一目标的最佳方法是什么？

# java - 从数据库中获取数据后 jTable 没有显示任何内容

> ID：15175608
> 
> 赞同：3
> 
> 时间：2013-03-02T14:30:56.027
> 
> 标签：java, swing, netbeans, jtable, defaulttablemodel

我一直在尝试从我的 Derby 数据库中获取数据并填充由 Netbeans GUI 构建器创建的 jTable。

我有一个帐户类，其中保留了以下代码：

```
public static DefaultTableModel buildTableModel() throws SQLException {
    Vector<Vector<Object>> data = new Vector<Vector<Object>>();
    Vector columns = new Vector();
    PreparedStatement ps = null;
    ResultSet rs = null;
    try {
        String stmt = "SELECT * FROM APP.DATAVAULT";
        ps = Main.getPreparedStatement(stmt);
        rs = ps.executeQuery();
        ResultSetMetaData metaData = rs.getMetaData();

        // names of columns
        Vector<String> columnNames = new Vector<String>();
        int columnCount = metaData.getColumnCount();
        for (int column = 1; column <= columnCount; column++) {
            columnNames.add(metaData.getColumnName(column));
        }
        // data of the table
        while (rs.next()) {
            Vector<Object> vector = new Vector<Object>();
            for (int columnIndex = 1; columnIndex <= columnCount; columnIndex++) {
                vector.add(rs.getObject(columnIndex));
            }
            data.add(vector);
        }
    } finally {
        try {
            ps.close();
        } catch (Exception e) {
        }
        try {
            rs.close();
        } catch (Exception e) {
        }
    }
    DefaultTableModel tableModel = new DefaultTableModel(data, columns);
    return tableModel;
} 
```

正如您所看到的，它返回一个带有两个参数、数据和列的 DefaultTableModel。

然后，在我的 GUI 类中，我有以下内容：

我的领域：

```
Account acc = new Account(); 
```

构造函数：

```
public SPPMainGUI() throws SQLException {
    initComponents();
    datavaultjTable.setModel(acc.buildTableModel());
} 
```

我的主要方法：

```
public static void main(String args[]) {
    java.awt.EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            try {
                new SPPMainGUI().setVisible(true);
            } catch (SQLException ex) {
                Logger.getLogger(SPPMainGUI.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    });
} 
```

代码设置为使用 datavault 表中的所有数据填充我的 jTable，无论是什么用户登录。

我的 datavault 表中有数据：

![在此处输入图像描述](../Images/a2de1bc3d645b0bc616116520b25848a.png)

这就是我运行程序并成功登录时 jTable 的样子：

![在此处输入图像描述](../Images/8e9a2127b3d0ec3cacea5d4d158b1a17.png)

这是它应该看起来的样子，但已填充：

![在此处输入图像描述](../Images/211bfea289ceb9b8e0651de780437da6.png)

我的代码哪里出错了？我已经为此困扰了 2 周了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T14:54:16.093

您需要将您添加`columnNames`到您的`columns`标题数据中，否则您的 : 中将不会出现任何内容`JTable`：

```
for (int column = 1; column <= columnCount; column++) {
   ...
}
columns.add(columnNames); <--- add this line 
```

`columnNames`您可以简单地将其用于您的模型，而不是为此数据使用冗余变量：

```
DefaultTableModel tableModel = new DefaultTableModel(data, columnNames); 
```

# c++ - 模板的模板参数 - 模棱两可的符号

> ID：15175613
> 
> 赞同：2
> 
> 时间：2013-03-02T14:31:51.647
> 
> 标签：c++, templates

我发现这个作为参数传递给模板的另一个模板的例子：

```
template<template<typename T> class AllocatePolicy>
struct Pool {
    void allocate(size_t n) {
        int *p = AllocatePolicy<int>::allocate(n);
    }
};

template<typename T> 
    struct allocator { static T * allocate(size_t n) { return 0; } };

int main()
{
    // pass the template "allocator" as argument. 

    Pool<allocator> test;

    return 0;
} 
```

这对我来说似乎完全合理，但 MSVC2012 编译器抱怨“分配器：不明确的符号”

这是编译器问题还是这段代码有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T14:34:32.690

你很可能有一个邪恶：

```
using namespace std; 
```

在您的代码中的某处，这使您的类模板与标准分配器`allocator`发生冲突。`std::allocator`

例如，除非您注释包含 using 指令的行，否则此代码不会编译：

```
#include <memory>

// Try commenting this!
using namespace std;

template<template<typename T> class AllocatePolicy>
struct Pool {
    void allocate(std::size_t n) {
        int *p = AllocatePolicy<int>::allocate(n);
    }
};

template<typename T>
struct allocator { static T * allocate(std::size_t n) { return 0; } };

int main()
{
    Pool<allocator> test;
} 
```

# php - Wordpress 分类只显示子级

> ID：15175622
> 
> 赞同：0
> 
> 时间：2013-03-02T14:33:08.530
> 
> 标签：php, wordpress

我正在尝试制作一个主题，该主题在输入类别存档时显示带有标题、链接和描述的子类别的概述。但是，我只想显示比当前类别低一级的子类别，而不是子类别的子类别。

我怎么做？

```
<?php
global $ancestor;
$childcats = get_categories('child_of=' . $cat . '&hide_empty=1');
foreach ($childcats as $childcat) {
  if (cat_is_ancestor_of($ancestor, $childcat->cat_ID) == false){
    echo '<li><h2><a href="'.get_category_link($childcat->cat_ID).'">';
    echo $childcat->cat_name . '</a></h2>';
    echo '<p>'.$childcat->category_description.'</p>';
    echo '</li>';
    $ancestor = $childcat->cat_ID;
  }
}
?> 
```

我找到了那个代码，但它只返回一个孩子。它返回。（Faa 和 Faq 是子类别）

*   法阿
*   常见问题 - 不显示

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:40:02.607

确保“常见问题解答”下面有帖子。如果您注意到“您找到的代码”正在传递参数“&hide_empty=1”，这意味着它不会返回为空的类别。

因此，您的选择是删除它或确保您的类别下有帖子。

# c++ - Xcode中的C ++编译错误

> ID：15175624
> 
> 赞同：0
> 
> 时间：2013-03-02T14:33:14.787
> 
> 标签：c++, xcode, compilation

编译时出现错误消息，即使我尝试将 libstdc++.dylib 添加到我的项目中。我可以知道我可以做些什么来修复它吗？

> 架构 x86_64 的未定义符号：

```
"std::ios_base::Init::Init()", referenced from:
  __GLOBAL__I_a in group.o
  __GLOBAL__I_a in image.o
  __GLOBAL__I_a in orthographic_camera.o
  __GLOBAL__I_a in raycast.o
  __GLOBAL__I_a in scene_parser.o
  __GLOBAL__I_a in sphere.o
"std::ios_base::Init::~Init()", referenced from:
  __GLOBAL__I_a in group.o
  __GLOBAL__I_a in image.o
  __GLOBAL__I_a in orthographic_camera.o
  __GLOBAL__I_a in raycast.o
  __GLOBAL__I_a in scene_parser.o
  __GLOBAL__I_a in sphere.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

# c++ - 用负索引索引 std::vector

> ID：15175626
> 
> 赞同：17
> 
> 时间：2013-03-02T14:33:23.810
> 
> 标签：c++, type-conversion, implicit-conversion

我尝试`vector`使用负索引来索引 a 。成员函数检查指定的`vector::at()`索引是否在向量的范围内，如果没有发生，`out_of_range`则抛出异常。

```
vector<float> array;   // sample vector
array.push_back(0.123);
array.push_back(1.234);
array.push_back(2.345);
array.push_back(3.456);
array.push_back(4.567);

int index = -1;
float f = array.at(index);
cout << f << endl; 
```

成员函数的签名`vector::at()`要求指定的参数是`vector<T>::size_type`类型的，而这个类型是`unsigned int`给向量的，所以编译器应该执行从`int`（`index`变量的类型）到的隐式转换`unsigned int`。由于`index`值`-1`在上面的例子中，隐式转换`index`为`4294967295`（即`unsigned int`类型的最大值）：这个值被传递给`vector::at()`成员函数，它会抛出`out_of_range`异常。

换句话说，这个异常不是因为`vector::at()`成员函数看到`index`小于零，而是因为隐式转换`index`的大于 的当前大小`vector`。这是一个正确的解释吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-02T14:46:06.133

是的，这是一个正确的解释。（通常`at`需要 a ，它是一些未指定的无符号整数类型（通常是系统上指针的位宽）。它在您的系统上是允许的，但标准没有强制要求；32 位和 64 位是常见的。 )`vector::size_type``std::size_t``unsigned int``unsigned int``size_t`

顺便说一句，注意无符号到有符号的转换：标准不要求它是一个往返有符号->无符号->有符号的负值，并且一些编译器以意想不到的方式*积极*优化。

# ios - 表达式不是iOS中的整数常量表达式

> ID：15175627
> 
> 赞同：3
> 
> 时间：2013-03-02T14:33:28.830
> 
> 标签：ios, objective-c

我在我的代码中这样做，它给了我这个错误：Expression is not an integer constant expression

代码：

```
//Tag for Database
#define kInsertIntoDatabase            @"Insert"
#define kDeleteFromDatabase            @"Delete"
#define kUpdateIntoDatabase            @"Update"
#define kQueryDatabase                 @"Query"

-(void)documentIsReady:(NSString *)sqlmethod{
    if(document.documentState == UIDocumentStateNormal)
    {
        context = document.managedObjectContext;
    }

    switch (sqlmethod) {
        case kInsertIntoDatabase:
            [self insertCoreDataModel];
            break;
        case kDeleteFromDatabase:
            [self deleteCoreDataModel];
            break;
        case kUpdateIntoDatabase:
            [self updateCoreDataModel];
            break;
        case kDeleteFromDatabase:
            [self deleteCoreDataModel];
            break;
        default:
            break;
    }

} 
```

怎么了？不知道出了什么问题。需要一些指导...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-02T14:41:34.807

如果你想使用开关，你应该选择一个枚举，这将使你在开关整数时保持可读性。

试试这个：

```
typedef enum {
    DatabaseMainFunctions_InsertIntoDatabase,
    DatabaseMainFunctions_DeleteFromDatabase,
    DatabaseMainFunctions_UpdateInto,
    DatabaseMainFunctions_Query
}DatabaseMainFunctions; 
```

然后像

```
switch (sqlmethod) {
    case DatabaseMainFunctions_InsertIntoDatabase:
        [self insertCoreDataModel];
        break;
    case DatabaseMainFunctions_DeleteFromDatabase:
        [self deleteCoreDataModel];
        break;
    case DatabaseMainFunctions_UpdateInto:
        [self updateCoreDataModel];
        break;
    case DatabaseMainFunctions_Query:
        [self deleteCoreDataModel];
        break;
    default:
        break;
} 
```

注意，您的案例删除在您的示例中写了两次，可能是一些复制粘贴错误。

**Nicolas Bouilleaud**在 github 上有一个****用于字符串**（实际上是对象）的目标 c 开关：[objcswitch](https://github.com/n-b/objcswitch)**

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T14:36:12.757

在 switch 语句中，您只能将**整数常量表达式**用作标签。没有浮点数，没有结构，没有指针，没有对象，什么都没有。只是整数常量。如果要基于`NSString`相等性做出决策，则需要使用嵌套`if-else`语句：

```
if ([sqlmethod isEqualToString:kInsertIntoDatabase]) {
    // do stuff
} else if ([sqlmethod isEqualToString:kDeleteFromDatabase]) {
    // etc.
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-02T14:35:20.977

所有这些

```
#define kInsertIntoDatabase            @"Insert"
#define kDeleteFromDatabase            @"Delete"
#define kUpdateIntoDatabase            @"Update"
#define kQueryDatabase                 @"Query" 
```

是`NSString`，并且`case`需要`integer`，

您的代码转换为

```
case @"Insert": 
```

这是`switch-case`语句的句法/句法错误。**

# ajax - 在 ajax 的 div.append 的 id 属性中添加一个变量

> ID：15175631
> 
> 赞同：2
> 
> 时间：2013-03-02T14:33:39.163
> 
> 标签：ajax, django, jquery, django-templates

我正在使用 Django 开发一个 Web 应用程序，并且我有这个 ajax，我正在从数据库中刷新一些图像，以便在模板中显示它们。

```
function refreshUploadedImages() {
    var inputs = ['Designer Name', 'Color', 'Fabric', 'Type', 'Tag', 'Subtag'];
    $.getJSON('/admin/image-uploader/images', function(data) {
        $('#uploadedFiles').empty();
        for (uiid in data) {
            ui = data[uiid];

            var div = $('<div>');
            div.data('id', ui.id);
            // image
            var image = new Image();
            image.src = ui.url
            image.width = 180;
            div.append($('<div>').append(image));
            // list
            var ul = $('<ul>')
            div.append(ul)
            // inputs
            for (input in inputs) {
                ul.append(
                    $('<li>').append(
                    $('<label>').append(
                    $('<span>').append(document.createTextNode(inputs[input] + ':'))
                ).append($('<input>')))); 
            }
            $('#uploadedFiles').append(div);
            div.append('<li><input type="button" class="delete-img-btn" id = <<ui.id>> img-id=image.id value="Delete"/></li>'); 
        }
        $(window).trigger('uploadedImagesRefresh');
    });

    $(function(){
    //
        $('.delete-img-btn').live('click', function() {

            //asign the image id from the button attribute 'img-id'
            var id= $(this).attr('img-id');
            //The data to be send via ajax the server will recieve 2 POST variables ie. 'action' and 'id'(which is the img id)
            var data={
            'action':'/admin/image-uploader/',
            'pk' : id,
            'success':refreshUploadedImages

            };
            //The ajax request.
            vary = $('.delete-img-btn').attr('id');
            $.post("/admin/image-uploader/delete/"+vary , data);

        });
    });
} 
```

我的问题是，在这一行

```
div.append('<li><input type="button" class="delete-img-btn" id = <<ui.id>> img-id=<<<image.id>>> value="Delete"/></li>'); 
```

我想为 id 分配一个变量，`ui.id`即 ( `id = <<ui.id>>`)，该变量在`div.append`. 你能帮我看看怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T14:43:04.577

这就是你想要做的吗？

```
div.append(
   '<li><input type="button" class="delete-img-btn" id="'
      + ui.id + '" img-id="'
      + image.id + '" value="Delete"/></li>'); 
```

`image.id`虽然没有定义。

# hibernate - Hibernate 可以在更新父对象时保存新实体吗

> ID：15175634
> 
> 赞同：1
> 
> 时间：2013-03-02T14:34:17.777
> 
> 标签：hibernate

```
 Collar collar = cat.getCollar();
    if(collar==null) {
        collar = new Collar(cat);
    }

    collar.setStuds(true);

    catDAO.mergeState(cat); 
```

这抱怨collar 是一个瞬态对象，必须在刷新事务之前保存它。

我可以通过这样做来解决这个问题：

```
 if(collar==null) {
        collar = new Collar(cat);
        catDao.makePersistent();
    } 
```

这个对吗？Hibernate 不应该为我保留我的新实体吗？

编辑：添加了更多细节。我正在使用 Spring MVC 版本 3.0.5 和 Hibernate 3。

```
 class Cat {
        ...
        @OneToOne(mappedBy="cat")
        public Collar getCollar() {
            return collar;
        }
        // etc
    }

    class Collar {
        @OneToOne(optional = false, cascade = { CascadeType.PERSIST,
            CascadeType.MERGE, CascadeType.REMOVE }, fetch = FetchType.LAZY)
        @JoinColumn(name="CAT_ID", nullable = false)
        public Cat getCat() {
            return cat;
        }
        // etc
    } 
```

我的 DAO 调用中的 mergeState() 方法`entityManager.merge(cat)`（`entityManager.flush()`如果需要）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:45:47.980

您实际上是在尝试将 Cat 实体保留在 catDAO.mergeState(cat); 行中。

并且如果您已经在 Cat 实体中定义了 Cat 和 Collar 之间的关系（例如...@OneToMany 等）......那么如果您坚持 cat 它也将保存子实体项圈。

是的，您还应该配置级联（全部等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:41:12.663

不，不应该，除非您的`mergeState()`方法调用`merge()`并且 Cat 和 Collar 之间的关联具有`cascade = MERGE`（或`ALL`）属性。

# html - HTML＆CSS：全宽元素，第一列固定宽度，第二列覆盖其余宽度

> ID：15175636
> 
> 赞同：1
> 
> 时间：2013-03-02T14:34:28.563
> 
> 标签：html, css, html-table

我想[在这里](http://jsbin.com/eyagoq/4/edit)实现这种行为（参见右示例） - 第一个孩子是固定宽度，第二个是响应式（覆盖其余宽度）

我可以用表格来做到这一点，但是 webheads 会争辩说表格对于这种布局等已经过时了。 + 表格显示资源很重。唔

知道如何在没有表格标记的情况下做到这一点吗？至少有 div 会很酷，但 display:table 应用于它们，但也没有成功（参见测试示例）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T14:41:48.510

你需要做这样的事情：

```
#left {
    width: 100px;
    float: left;
}

#right {
    overflow: hidden;
} 
```

## [jsFiddle](http://jsfiddle.net/yPQwL/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T14:36:40.467

放在`width: 200px; float: left;`第一个元素上，然后`overflow: hidden`放在第二个元素上。

# ruby-on-rails - Rails - 显示关联对象属性的列表

> ID：15175638
> 
> 赞同：0
> 
> 时间：2013-03-02T14:34:54.487
> 
> 标签：ruby-on-rails

我有一个列出小说的页面，我想显示每个相关插图的缩略图。我知道该关联正在工作，因为我可以显示每个关联插图对象的 toString 等效项。当我尝试遍历插图列表时，我得到：

```
undefined method `image_thumbnail_url' for #<ActiveRecord::Relation:0x007f023c07aa18> 
```

这是代码：

```
<% if notice %>
<p id="notice"><%= notice %></p>
<% end %>

<h1 style="padding-left:25px">Archive Overview</h1>

<% @novels.each do |novel| %>
<div class="row">
    <div class="span3" style="padding:0px 0px 25px 25px">
        <%= link_to novel.name, novel %>
    </div>
    <div class="span4">
        <p><%= novel.author%></p>
        <p><%= novel.publisher %></p>
        <p><%= novel.publication_date %></p>
    </div>
    <div class="span5">
        <div style="display: none;"><%= illustrations = @novels.map{ |novel| novel.illustrations} %>
        </div>
        <ul>    
            <% illustrations.each do |illustration| %>
            <li><%= illustration.image_thumbnail_url %></li>
            <% end %>
        </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:00:41.440

您在代码中做了一些非常奇怪的事情。首先，如果您想在不显示代码的情况下运行代码，您可以`<% ... %>`使用`<div style="display: none;"><%= ... %></div>`.

实际问题在这里：

```
illustrations = @novels.map{ |novel| novel.illustrations } 
```

这样做时，您不会得到一个包含插图对象的数组，而是一个包含插图对象集合的数组。并且集合没有方法`image_thumbnail_url`。

你已经在迭代小说，所以我建议你简单地这样做：

```
<div class="span5">
  <ul>    
  <% novel.illustrations.each do |illustration| %>
    <li><%= illustration.image_thumbnail_url %></li>
  <% end %>
  </ul>
</div> 
```

# drupal - 如何在drupal中显示pdf阅读器模块？

> ID：15175651
> 
> 赞同：1
> 
> 时间：2013-03-02T14:36:25.177
> 
> 标签：drupal, pdf-reader

我在drupal中安装了pdf阅读器并启用了它，接下来会发生什么？它没有出现在BLOCKS或任何地方？我该怎么办？我需要制作一个在本地（本地主机）运行的 pdf 查看器站点或电子书阅读器。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T21:34:29.713

我假设您使用该插件[http://drupal.org/project/pdf_reader](http://drupal.org/project/pdf_reader)。在该页面上，您可以阅读：

> PDF Reader 将使用选定的 PDF 渲染器渲染您的实体文件字段。

和

> **用法** 创建现有文件字段或将其附加到实体中，然后选择显示选项为 PDF 阅读器。

因此，您必须创建新的内容类型（或使用现有的内容类型）并将文件字段附加到它，然后当被问及该字段的显示选项时（我不记得它是否会默认询问您，或者您必须编辑添加后）选择PDF阅读器。然后，您将能够创建包含该字段的该内容类型的新节点并上传您的 PDF 创建它。完成后，您应该能够在节点页面上看到嵌入的 PDF。

更多信息：创建新内容类型：[http ://drupal.org/node/774728](http://drupal.org/node/774728)

字段： http: [//drupal.org/documentation/modules/field-ui](http://drupal.org/documentation/modules/field-ui) [http://drupal.org/node/774742](http://drupal.org/node/774742) [http://drupal.org/node/774798](http://drupal.org/node/774798) [http://drupal.org/documentation/modules /场地](http://drupal.org/documentation/modules/field)

# php - 如何使用 PHP 和 PDO 计算 MySQL 表中行子集的大小（以字节为单位）？

> ID：15175652
> 
> 赞同：4
> 
> 时间：2013-03-02T14:36:25.093
> 
> 标签：php, mysql, pdo, size, quota

首先，我正在使用带有 PDO 扩展的 PHP 5.4.11 和 MySQL 5.1.66（在 Debian Squeeze 上）开发共享托管服务。

目前我正在开发一项服务，用户在数据库中存储数据的配额有限。目前，只有一张表存储了用户数据，必须遵守有关配额的规定（但这可能会改变）。所有表都使用 InnoDB 存储引擎和文本列的 utf8_unicode_ci 排序规则。假设与配额相关的表具有以下列：

```
+--------------+-----------+
| Column name  |   Type    |
+--------------+-----------+
| id           | int       |
| userId       | int       |
| created      | timestamp |
| lastModified | timestamp |
| description  | varchar   |
| content      | text      |
+--------------+-----------+ 
```

现在我需要计算属于特定用户的所有行的字节大小。我搜索了文档并四处搜索，但只发现其他人提出了类似的问题而没有得到令人满意的答案。

我知道 MySQL`LENGTH()`函数，但由于它是一个字符串函数，它不会返回（固定长度）数字和日期/时间字段占用的空间。如果只考虑字符串字段，用户可能只是用空字符串填满数据库，永远不会达到他的配额。我也知道 MySQL 中每行的描述都有一些开销，但我不想将其包含在计算中。（作为等价物，我想计算实际文件大小，而不是磁盘上的文件大小。）

此外，我不想依赖特定的表结构，因为这可能会改变，并且必须记住更新计算配额的函数。

由于缺乏现有的解决方案，我想出了自己的（见下文）。但它有一些缺点，例如：

*   它需要表中使用的数据类型及其各自大小的列表。
*   它无法准确处理、 和`FLOAT(p)`数据`DECIMAL(M,D)`类型（尽管可以实现）。`NUMERIC(M,D)``BIT(M)`
*   它需要两个单独的查询。

所以现在，这就是我想出的：

```
$db = new PDO(...);
$tablename = 'users';
$userId = 1;

// Make a list of type sizes in bytes - null indicates string types of
// varying size. If there is a type used in the database which is not
// listed here, an exception will be thrown.
$typeSizes = array(
    'int' => 4,
    'timestamp' => 4,
    'varchar' => null,
    'text' => null
  );

// Get datatypes used in the table.
$sql = 'SELECT COLUMN_NAME, DATA_TYPE FROM INFORMATION_SCHEMA.COLUMNS '
     . 'WHERE TABLE_NAME=?';
$stmt = $db->prepare($sql);
$stmt->bindValue(1, $tablename);
$stmt->execute();
$colTypes = array_map('reset', array_map('reset',
                       $stmt->fetchAll(PDO::FETCH_GROUP|PDO::FETCH_ASSOC)));

// Iterate over the existing columns. Sum up sizes of fixed size columns to
// get a 'fixed-size-factor' for a row. Make a list of varying size columns.
$fixedSizeFactor = 0;
$varyingSizeCols = array();
foreach ($colTypes as $colName => $colType) {
  if (array_key_exists($colType, $typeSizes)) {
    if ($typeSizes[$colType] !== null) {
      $fixedSizeFactor += $typeSizes[$colType];
    } else {
      $varyingSizeCols[] = $colName;
    }
  } else {
    $msg = "Unhandled column type '$colType' - unable to calculate used "
         . 'storage. Probably the $typeSizes array needs to be updated.';
    throw new Exception($msg);
  }
}

// Get number of all records of the user and the size of his data in
// varying size columns.
$sumArgument = 0;
if (count($varyingSizeCols) > 0) {
  $sumArgument = 'LENGTH(' . implode(') + LENGTH(', $varyingSizeCols) . ')';
}
$sql = 'SELECT SUM(' . $sumArgument . ') AS size, COUNT(*) AS count FROM '
     . $tablename . ' WHERE userId=?';
$stmt = $db->prepare($sql);
$stmt->bindValue(1, $userId);
$stmt->execute();
$result = $stmt->fetch(PDO::FETCH_ASSOC);

// Calculate used storage.
$usedStorage = $result['count'] * $fixedSizeFactor + $result['size']; 
```

**我的问题是：**有没有更“原生”、不那么骇人听闻的方式来做到这一点？如果没有，您对性能优化有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:58:10.443

忘记数字和日期，真的，如果你因为这些字段而限制用户，那真是太便宜了……

使用`LENGTH`(for texts) 和`OCTET_LENGTH`(for blobs) 方法就足够了。

如果您的存储空间真的很短，并且您必须按用户准确地划分它，请不要忘记还有日志管理会增加磁盘空间，并且这些取决于用户在您的数据库中所做的使用......

# nullpointerexception - (oracle.jbo.JboException) JBO-29000：捕获到意外异常：java.lang.NullPointerException，msg=null

> ID：15175653
> 
> 赞同：0
> 
> 时间：2013-03-02T14:36:25.643
> 
> 标签：nullpointerexception, oracle-adf, jdeveloper

我正在使用 JDeveloper 创建 ADF，并且使用一种形式出现此错误：

```
(oracle.jbo.JboException) JBO-29000: Unexpected exception caught: java.lang.NullPointerException, msg=null 
```

详情如下：

```
(oracle.jbo.JboException) JBO-29000: Unexpected exception caught: java.lang.NullPointerException, msg=null
----- LEVEL 1: DETAIL 0 -----
(java.lang.NullPointerException) null 
```

堆栈跟踪是：

```
oracle.jbo.JboException: JBO-29000: Unexpected exception caught: java.lang.NullPointerException, msg=null
    at oracle.adf.model.binding.DCBindingContainer.reportException(DCBindingContainer.java:228)
    at oracle.adf.model.binding.DCBindingContainer.reportException(DCBindingContainer.java:274)
    at gui.operativniPlan.FormOperativniPlan.setBindingContext(FormOperativniPlan.java:187)
    at gui.operativniPlan.FormOperativniPlan.main(FormOperativniPlan.java:98)
## Detail 0 ##
java.lang.NullPointerException
    at gui.operativniPlan.FormOperativniPlan.jbInit(FormOperativniPlan.java:59)
    at gui.operativniPlan.FormOperativniPlan.setBindingContext(FormOperativniPlan.java:184)
    at gui.operativniPlan.FormOperativniPlan.main(FormOperativniPlan.java:98)

----- LEVEL 1: DETAIL 0 -----
java.lang.NullPointerException
    at gui.operativniPlan.FormOperativniPlan.jbInit(FormOperativniPlan.java:59)
    at gui.operativniPlan.FormOperativniPlan.setBindingContext(FormOperativniPlan.java:184)
    at gui.operativniPlan.FormOperativniPlan.main(FormOperativniPlan.java:98) 
```

知道我应该在哪里寻找问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:54:27.360

有时我收到异常，因为我创建了一个 ViewObjectImplementation 并在其中创建或编辑了一个方法，该方法可能会生成无法捕获的异常，因此 ADF 无法编写错误跟踪。

因此，我的建议是，如果您有一些 ADF 类实施，请查看它并用一些 try-catch 包围。

马科斯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-20T17:20:57.207

此错误主要是您的java方法中的SQL错误或编码错误引起的。如果您在 app 模块中公开您的自定义业务逻辑，请确保您在 appmoduleimpl 中创建的方法是正确的。使用 findViewObject 方法时，您必须将视图对象实例而不是实际视图对象（'VOI' 而不是 'VO'）作为字符串传递。希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-17T12:11:13.490

您需要添加 Java Options -Duser.timezone=+6:00 并且它会起作用。

# c++ - SQRT vs RSQRT vs SSE _mm_rsqrt_ps 基准

> ID：15175654
> 
> 赞同：0
> 
> 时间：2013-03-02T14:36:37.220
> 
> 标签：c++, benchmarking, simd, sse2

我还没有找到任何关于这个主题的明确基准，所以我做了一个。我会把它贴在这里，以防有人像我一样寻找这个。

我有一个问题。SSE 不应该比循环中的四个 fpu RSQRT 快 4 倍吗？它更快，但只有 1.5 倍。迁移到 SSE 寄存器是否会产生如此大的影响，因为我不进行大量计算，而只进行 rsqrt？还是因为 SSE rsqrt 更精确，我如何找到 sse rsqrt 的迭代次数？两个结果：

```
4 align16 float[4] RSQRT: 87011us 2236.07 - 2236.07 - 2236.07 - 2236.07
4 SSE align16 float[4]  RSQRT: 60008us 2236.07 - 2236.07 - 2236.07 - 2236.07 
```

**编辑**

`/GS- /Gy /fp:fast /arch:SSE2 /Ox /Oy- /GL /Oi`在 AMD Athlon II X2 270 上使用 MSVC 11 编译

测试代码：

```
#include <iostream>
#include <chrono>
#include <th/thutility.h>

int main(void)
{
    float i;
    //long i;
    float res;
    __declspec(align(16)) float var[4] = {0};

    auto t1 = std::chrono::high_resolution_clock::now();
    for(i = 0; i < 5000000; i+=1)
        res = sqrt(i);
    auto t2 = std::chrono::high_resolution_clock::now();
    std::cout << "1 float SQRT: " << std::chrono::duration_cast<std::chrono::microseconds>(t2-t1).count() << "us " << res << std::endl;

    t1 = std::chrono::high_resolution_clock::now();
    for(i = 0; i < 5000000; i+=1)
    {
         thutility::math::rsqrt(i, res);
         res *= i;
    }
    t2 = std::chrono::high_resolution_clock::now();
    std::cout << "1 float RSQRT: " << std::chrono::duration_cast<std::chrono::microseconds>(t2-t1).count() << "us " << res << std::endl;

    t1 = std::chrono::high_resolution_clock::now();
    for(i = 0; i < 5000000; i+=1)
    {
         thutility::math::rsqrt(i, var[0]);
         var[0] *= i;
    }
    t2 = std::chrono::high_resolution_clock::now();
    std::cout << "1 align16 float[4] RSQRT: " << std::chrono::duration_cast<std::chrono::microseconds>(t2-t1).count() << "us " <<  var[0] << std::endl;

    t1 = std::chrono::high_resolution_clock::now();
    for(i = 0; i < 5000000; i+=1)
    {
         thutility::math::rsqrt(i, var[0]);
         var[0] *= i;
         thutility::math::rsqrt(i, var[1]);
         var[1] *= i + 1;
         thutility::math::rsqrt(i, var[2]);
         var[2] *= i + 2;
    }
    t2 = std::chrono::high_resolution_clock::now();
    std::cout << "3 align16 float[4] RSQRT: "
        << std::chrono::duration_cast<std::chrono::microseconds>(t2-t1).count() << "us " 
        << var[0] << " - " << var[1] << " - " << var[2] << std::endl;

    t1 = std::chrono::high_resolution_clock::now();
    for(i = 0; i < 5000000; i+=1)
    {
         thutility::math::rsqrt(i, var[0]);
         var[0] *= i;
         thutility::math::rsqrt(i, var[1]);
         var[1] *= i + 1;
         thutility::math::rsqrt(i, var[2]);
         var[2] *= i + 2;
         thutility::math::rsqrt(i, var[3]);
         var[3] *= i + 3;
    }
    t2 = std::chrono::high_resolution_clock::now();
    std::cout << "4 align16 float[4] RSQRT: "
        << std::chrono::duration_cast<std::chrono::microseconds>(t2-t1).count() << "us " 
        << var[0] << " - " << var[1] << " - " << var[2] << " - " << var[3] << std::endl;

    t1 = std::chrono::high_resolution_clock::now();
    for(i = 0; i < 5000000; i+=1)
    {
        var[0] = i;
        __m128& cache = reinterpret_cast<__m128&>(var);
        __m128 mmsqrt = _mm_rsqrt_ss(cache);
        cache = _mm_mul_ss(cache, mmsqrt);
    }
    t2 = std::chrono::high_resolution_clock::now();
    std::cout << "1 SSE align16 float[4]  RSQRT: " << std::chrono::duration_cast<std::chrono::microseconds>(t2-t1).count()
        << "us " << var[0] << std::endl;

    t1 = std::chrono::high_resolution_clock::now();
    for(i = 0; i < 5000000; i+=1)
    {
        var[0] = i;
        var[1] = i + 1;
        var[2] = i + 2;
        var[3] = i + 3;
        __m128& cache = reinterpret_cast<__m128&>(var);
        __m128 mmsqrt = _mm_rsqrt_ps(cache);
        cache = _mm_mul_ps(cache, mmsqrt);
    }
    t2 = std::chrono::high_resolution_clock::now();
    std::cout << "4 SSE align16 float[4]  RSQRT: "
        << std::chrono::duration_cast<std::chrono::microseconds>(t2-t1).count() << "us " << var[0] << " - "
        << var[1] << " - " << var[2] << " - " << var[3] << std::endl;

    system("PAUSE");
} 
```

使用**浮点**类型的结果：

```
1 float SQRT: 24996us 2236.07
1 float RSQRT: 28003us 2236.07
1 align16 float[4] RSQRT: 32004us 2236.07
3 align16 float[4] RSQRT: 51013us 2236.07 - 2236.07 - 5e+006
4 align16 float[4] RSQRT: 87011us 2236.07 - 2236.07 - 2236.07 - 2236.07
1 SSE align16 float[4]  RSQRT: 46999us 2236.07
4 SSE align16 float[4]  RSQRT: 60008us 2236.07 - 2236.07 - 2236.07 - 2236.07 
```

**我的结论是，除非我们对不少于 4 个变量进行计算，否则不值得为 SSE2 烦恼。（也许这仅适用于 rsqrt 这里但它是一个昂贵的计算（它还包括多个乘法）所以它可能也适用于其他计算）**

**同样 sqrt(x) 比两次迭代的 x*rsqrt(x) 更快，而一次迭代的 x*rsqrt(x) 对于距离计算来说太不准确了。**

**所以我在一些板上看到的关于 x*rsqrt(x) 比 sqrt(x) 快的陈述是错误的。因此，除非您直接需要 1/x^(1/2)，否则使用 rsqrt 代替 sqrt 是不合逻辑的，也不值得损失精度。**

尝试不使用 SSE2 标志（如果它在正常 rsqrt 循环上应用 SSE，它会给出相同的结果）。

我的 RSQRT 是 quake rsqrt 的修改（相同）版本。

```
namespace thutility
{
    namespace math
    {
        void rsqrt(const float& number, float& res)
        {
              const float threehalfs = 1.5F;
              const float x2 = number * 0.5F;

              res = number;
              uint32_t& i = *reinterpret_cast<uint32_t *>(&res);    // evil floating point bit level hacking
              i  = 0x5f3759df - ( i >> 1 );                             // what the fuck?
              res = res * ( threehalfs - ( x2 * res * res ) );   // 1st iteration
              res = res * ( threehalfs - ( x2 * res * res ) );   // 2nd iteration, this can be removed
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T15:02:49.867

在 SSE 代码中很容易获得很多不必要的开销。

如果要确保代码高效，请查看编译器的反汇编。经常会影响性能的一件事（看起来它可能会影响您）是在内存和 SSE 寄存器之间不必要地移动数据。

在循环中，您应该将所有相关数据以及结果保存在 SSE 寄存器中，而不是保存在`float[4]`.

只要您正在访问内存，请验证编译器是否生成对齐的移动指令以将数据加载到寄存器或将其写回数组。

并检查生成的 SSE 指令之间没有很多不必要的移动指令和其他杂物。一些编译器在从内在函数生成 SSE 代码方面非常糟糕，因此密切关注它生成的代码是值得的。

最后，您需要查阅 CPU 的手册/规范，以确保它实际执行您使用的打包指令的速度与执行标量指令一样快。（对于现代 CPU，我相信他们会这样做，但一些较旧的 CPU 至少需要一些额外的时间来处理打包指令。不是标量指令的四倍，但足以让你无法达到 4 倍的加速)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T15:02:15.370

我的结论是，除非我们对不少于 4 个变量进行计算，否则不值得为 SSE2 烦恼。（也许这仅适用于 rsqrt 这里但它是一个昂贵的计算（它还包括多个乘法）所以它可能也适用于其他计算）

**同样 sqrt(x) 比两次迭代的 x*rsqrt(x) 更快，而一次迭代的 x*rsqrt(x) 对于距离计算来说太不准确了。**

**所以我在一些板上看到的关于 x*rsqrt(x) 比 sqrt(x) 快的陈述是错误的。因此，除非您直接需要 1/x^(1/2)，否则使用 rsqrt 代替 sqrt 是不合逻辑的，也不值得损失精度。**

# scala - 使用 <> 将投影映射到 Slick 中带有伴随对象的案例类

> ID：15175659
> 
> 赞同：5
> 
> 时间：2013-03-02T14:37:32.680
> 
> 标签：scala, slick

使用 Slick，我试图将数据库表条目直接投影到它们所代表的案例类中。按照[文档中的示例](http://slick.typesafe.com/doc/1.0.0/lifted-embedding.html#mapped-tables)，我使用运算符设置了映射投影`<>`：

```
case class SomeEntity3(id: Int, entity1: Int, entity2: Int)

val SomeEntityTable = new Table[SomeEntity3]("some_entity_table") {
  def id = column[Int]("id", O.PrimaryKey, O.AutoInc)
  def entity1 = column[Int]("entity1")
  def entity2 = column[Int]("entity2")

  def * = id ~ entity1 ~ entity2 <> (SomeEntity3, SomeEntity3.unapply _)
} 
```

现在，我想为 SomeEntity3 添加一些静态常量和辅助方法。为此，我创建了一个伴生对象。但只要我包括这条线

```
object SomeEntity3 
```

弹出一个非常疯狂的多行错误，用于定义`*`关于“重载方法值 <> 带有替代项”的内容难以辨认的定义。

伴生对象与 Slick 中的双向映射有何关系？我能以某种方式实现我的目标吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-02T15:28:14.003

修复非常简单：

```
def * = id ~ entity1 ~ entity2 <> (SomeEntity3.apply _, SomeEntity3.unapply _) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-03T12:29:24.020

案例类的伴随对象通常是从案例类的第一个参数列表到案例类的函数。所以如果你有

```
case class Fnord(a: A, b: B, c: C)(d: D) 
```

Scala 编译器会自动生成伴随对象，类似于

```
object Fnord extends ((A, B, C) => Fnord) {
  ...
} 
```

现在，只要您自己明确地拼写出有关伴生对象的内容，编译器就不再生成`FunctionN`扩展的东西。因此，大多数时候自己添加它是个好主意。在您的情况下，这意味着定义这样的同伴`SomeEntity3`：

```
object SomeEntity3 extends ((Int, Int, Int) => SomeEntity3) {
  ...
} 
```

这种行为也有一个（长期开放的）问题： [https ://issues.scala-lang.org/browse/SI-3664](https://issues.scala-lang.org/browse/SI-3664)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-29T20:58:08.793

另一种方法是将对象 apply 方法转换为元组并将其传递给 <> ，如下所示。

```
package models

import play.api._
import play.api.libs.json._
import scala.slick.driver.H2Driver.simple._

case class User(
  name: String,
  id: Option[Int] = None
)

object User {
  implicit val format = Json.format[User]
}

class UserTable(tag: Tag) extends Table[User](tag, "USERS") {
  def id = column[Int]("ID", O.PrimaryKey, O.AutoInc)
  def name = column[String]("NAME", O.NotNull)

  def * = (name, id.?) <> ((User.apply _).tupled, User.unapply)
}

object Users extends TableQuery(new UserTable(_)) {
  val findByID = this.findBy(_.id)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-26T12:15:05.440

就个人而言，`apply`案例类中的部分应用方法不适用于我的设置和 Slick 3.0。

然而，这有效，`tupled`间接地挖掘到正确的方法：

```
class WidgetTable(tag: Tag) extends Table[WidgetEntity](tag, "widget_tbl") {

    def id = column[Int]("id",O.PrimaryKey)
    def foo = column[String]("foo")

    override def * = (id,foo) <> ((WidgetEntity.apply _).tupled,WidgetEntity.unapply)
} 
```

查看完整详细信息：[https ://stackoverflow.com/a/38589579/564157](https://stackoverflow.com/a/38589579/564157)

# android - 无法重新启动由 PendingIntent 启动的活动

> ID：15175661
> 
> 赞同：2
> 
> 时间：2013-03-02T14:37:50.193
> 
> 标签：android, android-intent, android-pendingintent, launchmode

我无法重新启动由`PendingIntent`.

“无法重新启动”意味着什么，例如，当关于活动已经运行时，**永远不会调用****onCreate**或**onNewIntent 。****`startActivity()`**

 **名为 MainActivity 我无法重新启动的 Activity 是 **singleTop**并覆盖**onNewIntent**。

以下是关于`MainActivity`：

```
 <activity
            android:name="com.example.MainActivity"
            android:label="@string/app_name" 
            android:launchMode="singleTop">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

首先，它`MainActivity`是由具有未决意图的通知启动的。

我的 PendingIntent 是：

```
Intent iS = new Intent(this,MainActivity.class);
iS.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
PendindIntent pi = PendingIntent.getActivity(this, 0, iS, 
PendingIntent.FLAG_UPDATE_CURRENT); 
```

并`MainActivity`执行`startService()`，服务执行`sendBroadcast()`，广播类执行`startActivity(Intent(this,MainActivity.class))`

Jere 是 BroadcastClass：

```
public void onReceive(Context context, Intent intent) {
    Intent i = new Intent(context,MainActivity.class);

    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(i);
} 
```

然后`onNewIntent()`是......永远不会被调用`onCreate()`。

但是，当通过在 homeScreen 上按下图标启动程序时，`onNewIntent`in`MainActivity`被同一流程调用。

**编辑：** onNewIntent 在这里。

```
protected void onNewIntent(Intent intent) {  
   Log.d("onNewIntent","onNewIntent");
   String SOMETHING = intent.getStringExtra("SOMETHING");

    LinearLayout ll = (LinearLayout)findViewById(R.id.ll2);
    ll.removeAllViews();
    TextView textview1 = (TextView)getLayoutInflater().inflate(R.layout.textview, null);

    textview1.setText(SOMETHING);
    ll.addView(textview1);
} 
```

“onNewIntent”没有出现在 LogCat 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T16:45:45.647

这是[Android 中的一个错误](http://code.google.com/p/android/issues/detail?id=17137)。[也](http://code.google.com/p/android/issues/detail?id=4155)见此。

问题是Android中决定是否调用的代码`onNewIntent()`是使用中的标志`Intent`而不是检查清单中的标志。

您应该能够通过`Intent.FLAG_ACTIVITY_SINGLE_TOP`在从广播接收器启动活动时添加来解决此问题，如下所示：

```
public void onReceive(Context context, Intent intent) {
    Intent i = new Intent(context,MainActivity.class);
    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK|Intent.FLAG_ACTIVITY_SINGLE_TOP);
    context.startActivity(i);
} 
```

如果您在 google 代码上加注星标并评论这些问题，也会有所帮助。如果我们发出足够多的噪音，这可能会在 2020 年之前得到解决；-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-15T17:36:29.650

就我而言，我仅在重新启动后遇到了这个问题。很高兴知道为什么。为了让我`PendingIntent`的 s 在重启后工作，我在其`Intent`自身上添加了以下标志：

```
Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP 
```

而`PendingIntent.FLAG_CANCEL_CURRENT`对于`PendingIntent`. 这种行为很奇怪，因为在设备重新启动之前，未决意图可以正常工作。**

# magento - 电子邮件中的 Magento 动态消息

> ID：15175665
> 
> 赞同：0
> 
> 时间：2013-03-02T14:37:58.400
> 
> 标签：magento, magento-1.7

我具有必须将电子邮件发送到具有不同消息内容的两个不同电子邮件 ID 的功能。问题是相同的消息内容被发送到两个 id。任何人的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T15:12:52.533

它可以通过一个小的自定义编程/自定义模块轻松完成（因为几个月前我已经在一个项目中这样做了）。

1.  首先在您的系统->事务电子邮件下创建两个新的电子邮件模板让我们说 email_template1 和 email_template2，如果您想从管理面板管理您的内容，或者作为一种丑陋的方式，您还可以在自定义模块中硬编码您的电子邮件内容助手或模型类。我更喜欢第一个。

2.  然后通过其代码加载电子邮件模板。如果收件人电子邮件是 XXXX@YYY.com，则根据您的条件加载它，然后加载模板 1，否则加载模板 2

    ```
    $emailTemplate  = Mage::getModel('core/email_template')->loadByCode('email_template1'); 
    ```

3.  设置发件人姓名和电子邮件

    ```
    $emailTemplate
                ->setSenderName($sender_name)
                ->setSenderEmail($sender_email)
                ->setTemplateCode('email_template1')->save(); 
    ```

4.  然后设置自定义变量（如果有）并将其发送到收据

    ```
    $processedTemplate = $emailTemplate->getProcessedTemplate($emailTemplateVariables); 

        if($emailTemplate->isValidForSend()){
            /* Send the email */
                           $emailTemplate->send($recepient_email,$recepient_name,$processedTemplate);               
       } 
    ```

    很简单吧。通过这种方式，您可以实现您所要求的。

# drupal - drupal 错误：调用未定义的函数 Krumo

> ID：15175667
> 
> 赞同：1
> 
> 时间：2013-03-02T14:38:11.643
> 
> 标签：drupal, krumo

我正在 Drupal 中实现一个块，以在他/她的个人资料中显示用户的评论。

我正在使用`EntityFieldQuery`and`entity_load`并且查询工作正常。我正在尝试使用开发模块，但使用 Krumo 函数看不到结果。知道我的代码有什么问题或者我应该如何使用开发模块吗？

我收到了这个错误：

**致命错误：调用未定义函数 Krumo**

```
$items = entity_load('comment', array_keys($result['comment']));
krumo($items); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T08:22:32.380

您可以使用`kpr()`which 在模板区域之外打印输出，或者`drupal_debug()`（别名）在站点临时目录中`dd()`调用的文件中打印变量。`drupal_debug.txt`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T01:37:23.913

安装开发模块和我们`dpm($items);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-24T08:39:55.527

其他原因可以是，

*   您需要以管理员用户身份登录
*   或者您需要为您想要的角色授予“查看调试信息”权限。

# php - PHP preg_match 分割字符串由加号分隔

> ID：15175673
> 
> 赞同：0
> 
> 时间：2013-03-02T14:38:57.153
> 
> 标签：php, regex, string, preg-match

我对需要从搜索请求（可能包括数字和/或特殊字符）中提取由**加号**句子分隔的**两个查询**`php`的正则表达式感到困惑。**`+`**

 ****任何人都可以阐明这种行为吗？

```
$string = 'string1+String-2';

([a-zA-Z0-9-_]+[a-zA-Z0-9-_])

Array
(
    [0] => string1
    [1] => string1
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T14:55:15.157

另一种方法是使用`explode()`

```
$string = 'string1+String-2';

$parts=explode("+",$string);

print_r($parts); 
```

输出：

```
Array
(
    [0] => string1
    [1] => String-2
) 
```

在这里查看更多：

[http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T14:43:22.833

你可以这样做

```
/([\w-]+\+[\w-]+)/ 
```

方括号后面的未转义`+`表示：“一次或多次之前的表达式”转义`\+`代表纯`+`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T14:47:24.710

假设您正在使用函数[preg_match](http://au1.php.net/manual/en/function.preg-match.php)：

您的模式`([a-zA-Z0-9-_]+[a-zA-Z0-9-_])`是将任何字母或数字匹配一次或多次，然后是字母或数字。

所以它匹配 on`string`后跟`1`. 您看到的输出是函数按照它所说的做。

> 如果提供了匹配项，则将其填充为搜索结果。$matches[0] 将包含与完整模式匹配的文本，$matches [1](http://au1.php.net/manual/en/function.preg-match.php)将包含与第一个捕获的带括号的子模式匹配的文本，依此类推。

我猜您可能打算使用 preg_match_all 来获取所有匹配模式。****

# node.js - node-gyp 在 execvp() 处配置错误

> ID：15175675
> 
> 赞同：0
> 
> 时间：2013-03-02T14:39:13.150
> 
> 标签：node.js, node-gyp

在节点 0.8.20 下

[从这里](https://github.com/joyent/node/tree/master/test/addons/hello-world)编译节点插件

安装了 node-gyp、python 2.7.3 和 gcc。跑步时

```
node-gyp configure 
```

发生错误。以下是错误输出：

```
gyp info it worked if it ends with ok
gyp info using node-gyp@0.8.5
gyp info using node@0.8.20 | linux | arm
gyp ERR! configure error
gyp ERR! stack Error: Command failed: execvp(): Permission denied
gyp ERR! stack
gyp ERR! stack     at ChildProcess.exithandler (child_process.js:540:15)
gyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:99:17)
gyp ERR! stack     at maybeClose (child_process.js:638:16)
gyp ERR! stack     at Socket.ChildProcess.spawn.stdin (child_process.js:815:11)
gyp ERR! stack     at Socket.EventEmitter.emit (events.js:96:17)
gyp ERR! stack     at Socket._destroy.destroyed (net.js:358:10)
gyp ERR! stack     at process.startup.processNextTick.process._tickCallback (node.js:244:9)
gyp ERR! System Linux 3.6.11-7-ARCH+
gyp ERR! command "node" "/root/opt/node/bin/node-gyp" "configure"
gyp ERR! cwd /root/hello
gyp ERR! node -v v0.8.20
gyp ERR! node-gyp -v v0.8.5
gyp ERR! not ok 
```

我在 /root/opt/python/bin/python 安装了 python，在 /root/opt/node/bin/node 安装了节点。但我已经设置了 PATH 环境的路径。

我找不到问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:32:58.310

解决了。

我想将 python 的路径设置为`PYTHON_PATH`而不是`PYTHON`. 但是我犯了一个错误，我将python的路径设置为环境变量`PYTHON`。如果`PYTHON`已设置，`node-gyp`则将其视为 python exective 并且永远不会从`PATH`s 中查找 python。

因此，当`node-gyp`运行 python 脚本时，它会将目录的路径传递给 execvp 系统调用的第一个参数。因此，它得到了权限被拒绝的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T07:23:08.703

我的解决方案是设置 npm python 参数：

```
npm config set python /usr/bin/python2.7 
```

# forms - 如何将 TForm 作为参数传递给 DLL？

> ID：15175678
> 
> 赞同：3
> 
> 时间：2013-03-02T14:39:18.033
> 
> 标签：forms, delphi, dll

我想制作使用 tform 作为参数的 dll，简单的计划是如果该表单传递给 dll，则 dll 文件返回包含组件名称的数组。

可以将 tform 作为参数传递吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T14:44:23.887

很可能您的进程中有两个 VCL 实例，一个用于主机 exe，一个用于 DLL。这是一个太多的例子。主机 exe 中的 TForm 类与 DLL 中的 TForm 类不同。

基本规则是您不能跨模块边界共享 VCL/RTL 对象，除非所有模块都使用相同的 VCL/RTL 运行时实例。实现这一点的方法是使用包链接到 VCL/RTL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T14:03:58.703

我假设你有一个框架，你的表单上有一个 TMemo：

声明两种类型：

```
type
  PTform                                  = ^TForm;
  TStringArray                            = array of string; 
```

并使这些对 EXE 和 DLL 可见

.DPR 实施部分：

```
procedure dllcomplist(p_pt_form : PTForm;
                  var p_tx_component : TStringArray);
          stdcall;
          external 'dllname.dll'; 
```

...

```
var
  t_tx_component                          : TStringArray;
  t_ix_component                          : integer; 
```

...

```
 Memo1.Lines.Add('Call DLL to return componentlist');
  dllcomplist(pt_form,t_tx_component);
  Memo1.Lines.Add('Result in main program');
  for t_ix_component := 0 to pred(length(t_tx_component)) do
    Memo1.Lines.Add(inttostr(t_ix_component) + '=' + t_tx_component[t_ix_component]);
  setlength(t_tx_component,0); 
```

并在 DLL 的 .DPR 中

...

```
procedure dllcomplist(p_pt_form : PTForm;
                  var p_tx_component : TStringArray);
          stdcall;
var
  t_ix_component                          : integer;
  t_ix_memo                               : integer;
  t_tx_component                          : TStringArray;
begin with p_pt_form^ do begin
  setlength(t_tx_component,componentcount);
  setlength(p_tx_component,componentcount);
  for t_ix_component := 0 to pred(componentcount) do
  begin
    t_tx_component[t_ix_component] := components[t_ix_component].Name;
    p_tx_component[t_ix_component] := components[t_ix_component].Name;
    if components[t_ix_component].ClassName = 'TMemo' then
      t_ix_memo := t_ix_component;
  end;
  Tmemo(components[t_ix_memo]).lines.add('Within DLL...');
  for t_ix_component := 0 to pred(componentcount) do
    Tmemo(components[t_ix_memo]).lines.add(inttostr(t_ix_component) + ' ' 
            + t_tx_component[t_ix_component]);
  Tmemo(components[t_ix_memo]).lines.add('DLL...Done');
  setlength(t_tx_component,0);
end;
end; 
```

...

```
exports dllcomplist; 
```

{好的 - 这比严格需要的要复杂得多。我正在做的是在调用程序中建立一个动态数组，将其填充到 DLL 中，然后在调用者中显示结果

和

检测 DLL 中的 TMemo 并将数据从 DLL 中的相同动态数组写入调用者的 TMemo - 以显示数据相同}

# android - Android drawCircle 和 drawOval 缺陷

> ID：15175682
> 
> 赞同：2
> 
> 时间：2013-03-02T14:39:48.870
> 
> 标签：android, android-canvas

我正在尝试在`Canvas`. 包含画布的视图放大到 20 倍。下面是我目前得到的结果。我知道 Android 开发人员知道问题[和](https://code.google.com/p/android/issues/detail?id=23737)方法。这是因为这两种方法都使用了硬件渲染。`drawCircle``drawOval`

![在此处输入图像描述](../Images/f1a244b967f3e3c2041091aeef1b2241.png)

问题是如何达到图片最左边的结果。我试图禁用特定视图的硬件渲染：

```
setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

由于视图被缩放，我得到的只是一张像素化的图片（比如 4.1.2 AA）。

任何想法如何以简单的方式通过这个Android的缺陷？最低 SDK 设置为 13，因此我无法禁用 AA 并假设它可以在所有设备上运行。使用一些数学并逐点绘制圆我可以达到很好的效果，但它会寻找最后的解决方案。

# ruby-on-rails - 尝试在 Rails 应用程序中定义新模块时出错

> ID：15175683
> 
> 赞同：3
> 
> 时间：2013-03-02T14:39:59.547
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我正在尝试在我的 Rails 应用程序中加载一个模块，但出现以下错误：

> 预期 /Users/ha/Projects/MyProject/app/services/user.rb 来定义用户

我有这个文件夹结构

```
/app
   /controllers
      users_controller.rb
   /models
      ...
   /services
      web_services.rb
      user.rb 
```

**web_services.rb：**

```
module WebServices

  include HTTParty

  def test
     Rails.logger.debug 'webservices works!!!'
  end
end 
```

**用户.rb：**

```
module WebServices
  class User
     def test_user
        Rails.logger.debug 'user works'
     end
  end
end 
```

**当我尝试在 user_controller.rb 中实例化用户时出现错误：**

```
class UsersController < ApplicationController
  include WebServices

  def index
    user = WebServices::User.new
    user.test_user
  end

end 
```

**我尝试在 application.rb 中添加以下代码但没有成功**

```
config.autoload_paths += %W(#{config.root}/app/services)
config.autoload_paths += Dir["#{config.root}/app/services/**/"] 
```

**而且我尝试了以下代码但也没有工作（environment.rb）：**

```
Dir['../app/services/*'].each do |file|
  require file
end 
```

**Rails 3.2.11**和**Ruby 1.9.3p194**

有人帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:51:25.680

这是因为 Rails 尝试使用模块名（如果给定）和类名来查找包含类声明的文件，以内省文件的路径。当你这样做时：

```
WebServices::User.new 
```

Rails 将尝试`web_services`根据模块名称查找目录以及其中的文件`user.rb`。解决此问题的“快速”方法是在您的项目中创建以下目录结构：

```
app/
  services/
    web_services/user.rb
    web_services.rb 
```

请注意，您不需要`services`在配置中指定目录`autoload`，因为其中的任何目录`app`都已经在 Rails 加载路径中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T07:58:04.010

错误消息清楚地说，加载程序**能够**找到并尝试加载`user.rb`. 因此，玩`config.autoload_paths`不会解决问题。

当有人定义了意外映射到现有文件名的模型时，通常会发生此错误。尝试重命名`User`为 smth 非常不同：

```
~ cat …/myuser.rb
class MyUser
  def test_user
    Rails.logger.debug 'user works'
  end
end 
```

这应该使它工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T14:17:12.903

我过去在某个地方遇到过同样的问题，

在 user_services.rb 中（注意：文件名结构在 rails 中很重要）

```
module UserServices
  class User
    def test_user
      Rails.logger.debug 'user works'
    end
  end
end 
```

有两种方法可以解决这个问题。

用于 或`include UserServices`_`WebServices`

`Webservices.include UserServices`在 user_services.rb 的末尾

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T17:27:01.063

尝试

```
config.autoload_paths += Dir[
  "#{config.root}/app/services",
  "#{config.root}/app/services/**/"
] 
```

# objective-c - 获取 Segue 之间的变量

> ID：15175685
> 
> 赞同：0
> 
> 时间：2013-03-02T14:40:15.613
> 
> 标签：objective-c, xcode, webview, tableview, viewcontroller

我面临着我不知道如何实施的情况。我的项目非常简单，我有：

1.  一个 ViewController，它显示一个带有特定 URL 的 webview；
2.  在同一个视图控制器上，有一个按钮可以转到另一个由 segue 实现的视图控制器；
3.  第二个 VC 已经加载了一个 tableview，所以当用户选择一个单元格时，我得到值并返回到主 viewController (step.1)；

到目前为止它已经实现，那么我需要实现的是当回到主 ViewController（step.1）时，我需要恢复在 step.3 中选择的值，将值附加到 URL 并重新加载 WebView 组件。我怎样才能做到这一点？我想知道这很简单，但我在研究中找不到。

提前感谢您的任何帮助，非常欢迎。亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:57:28.670

我有同样的问题......通过大量的教程和书籍工作。这对我有用。它混合了两种方法，可能只需要一种。但至少我理解它并且可以轻松使用它。这些方法是委托和使用单例来保存您的全局变量。

我将代码粘贴到 Word 中，删除了不适用的内容，并留下了您需要的一切，我想。

首先，创建一个新的类文件。我的叫做 OptionsSingleton。这为您提供了 OptionsSingleton.h 和 OptionsSingleton.m。我的有更多变量，但这里适用于你：

OptionsSingleton.h

```
@interface OptionsSingleton : NSObject{
int gblRowPicked;

}

@property(nonatomic) int gblRowPicked;

+(OptionsSingleton *) singleObj;

@end 
```

OptionsSingleton.m

```
#import "OptionsSingleton.h"

@implementation OptionsSingleton
{
    OptionsSingleton * anotherSingle;
}
@synthesize gblRowPicked;

+(OptionsSingleton *)singleObj{

    static OptionsSingleton * single=nil;

    @synchronized(self)
    {
        if(!single)
        {
            single = [[OptionsSingleton alloc] init];
        }
    }
    return single;
}

@end 
```

如果您告诉他们单例的存在，所有其他视图控制器都可以看到 gblRowPicked。

```
//  ViewControllerThatCallsTheTableViewController.h

#import <UIKit/UIKit.h>
#import "OptionsSingleton.h"

@interface ViewControllerThatCallsTheTableViewController.h  : UIViewController 
{

    OptionsSingleton *optionsSingle;
} 
```

和...

```
//  ViewControllerThatCallsTheTableViewController.m

#import "ViewControllerThatCallsTheTableViewController.h"
#import "OptionsSingleton.h"

@interface ViewControllerThatCallsTheTableViewController ()

@end

@implementation ViewControllerThatCallsTheTableViewController

- (void)viewDidLoad
{

    optionsSingle = [OptionsSingleton singleObj];

    [super viewDidLoad];

}

-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if([segue.identifier isEqualToString:@"PickFromTable"]){

         TableViewController *viewController = segue.destinationViewController;
        viewController.delegate = self;
    }
}
-(void)done{
   [self dismissViewControllerAnimated:YES completion: nil];

    NSLog (@"Back in ViewControllerThatCallsTableViewController, Row picked is %i",optionsSingle.gblGamePicked);
   } 
```

通过单击 segue 并在属性检查器中对其进行命名，将 segue 标识符输入到情节提要中。关闭时 TableViewController 将调用 done 方法。它在这里所说的只是行值，以证明原始视图控制器知道该行。您的代码将从那里获取它。（如果需要，您可以在行中传递数据......您必须为此声明适当的全局变量。）

TableViewController 文件中有这些东西：

```
//  TableViewController.h

@protocol ViewControllerThatCallsTheTableViewControllerDelegate <NSObject>
-(void) done;
@end

@interface TableViewController 
```

该协议告诉 TableViewController “完成”方法在原始视图控制器中，而不是在 TableViewController 本身中。

```
//  TableViewController.m

#import "TableViewController.h"
#import "BeginningCell.h"  // used for the prototype cell
#import "OptionsSingleton.h"

@interface TableViewController ()

@end

@implementation TableViewController

- (void)viewDidLoad
{

      optionsSingle = [OptionsSingleton singleObj];

    //other stuff: arrays for filling the table, etc.
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

optionsSingle.gblRowPicked=indexPath.row+1;

     [self.delegate  done];

} 
```

你去...我希望我在我的工作程序中找到了适用于你情况的所有代码。对不起，如果我遗漏了什么。

-抢

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-02T16:06:59.937

由于您在单击单元格时从 tableview 移回，因此您可以在 tableview 控制器`viewWillDisappear`或`tableView:didSelectRowAtIndexPath:`（委托方法）中实现它。

你可以在第一个视图控制器中声明一个带有访问器的变量（比如 NSString 类型的返回值），然后在 viewWillDisappear 或 tableView:didSelectRowAtIndexPath:` 中你可以将变量传递给 presentingViewController 属性。

**第一视图控制器.h**

```
@interface FirstViewController: UIViewController{
    NSString *returnedValue;
}
@property (strong) NSString *returnedValue; 
```

**第一视图控制器.m**

```
@implementation FirstViewController
@synthesize returnedValue; 
```

在**SecondViewController.m 中**：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
  FirstViewController *firstVC = (FirstViewController *)[self presentingViewController];
  firstVC.returnedValue = @"The value you want to pass";
} 
```

然后在您的 FirstViewController 中，您可以在适当的方法中实现：

```
NSURL *url = [NSURL urlWithString:@"%@",returnedValue"]; //according to your business logic
[yourWebView loadURL:url]; 
```

# c# - 为什么我的 WCF 服务器这么慢

> ID：15175689
> 
> 赞同：-1
> 
> 时间：2013-03-02T14:40:24.827
> 
> 标签：c#, performance, wcf, task, wcf-binding

我创建了一个 WCF 服务器和一个 WCF 客户端来使用该服务。服务器的目的是将传入的 2 个数字相加，并在返回总和之前等待 X 毫秒。

客户端创建 Y 个任务并启动它们。每个任务都是服务器添加数字并等待 X 毫秒的请求。

当 x = 0 和 y = 1000 时，完成所有任务平均需要 6.2 秒。当 X = 0 和 Y = 10000 时，完成所有任务平均需要 61 秒。

为什么它这么慢，或者这可能是正常的？

谢谢达摩

**客户端 C# 方法**

```
private void radButtonTaskWithStatus_Click(object sender, EventArgs e)
        {
            try
            {
                var dateTime1 = DateTime.UtcNow;
                radProgressBarStatus.Maximum = int.Parse(radTextBoxFloodRequests.Text);
                radProgressBarStatus.Value1 = 0;

                Random rnd = new Random();

                Task<int>[] tasks = new Task<int>[int.Parse(radTextBoxFloodRequests.Text)];

                for (int i = 0; i < int.Parse(radTextBoxFloodRequests.Text); i++)
                {
                    int x = i;
                    tasks[i] = new Task<int>(() =>
                    {    

                        int FirstRandomNumber = rnd.Next(1, 20);
                        int SecondRandomNumber = rnd.Next(1, 20);

                        int result = TaskRequestWithResult(FirstRandomNumber, SecondRandomNumber, int.Parse(radTextBoxFloodDelay.Text), x);    

                        return result;
                    });
                }

                var continuation = Task.Factory.ContinueWhenAll(
                            tasks,
                            (antecedents) =>
                            {
                                var dateTime2 = DateTime.UtcNow;
                                var diffInSeconds = (dateTime2 - dateTime1).TotalSeconds;
                                this.radListView1.BeginInvoke((MethodInvoker)(() => this.radListView1.Items.Add((dateTime2 - dateTime1).TotalSeconds)));
                                //MessageBox.Show(diffInSeconds.ToString());

                                int total = 0;
                                for (int i = 0; i < int.Parse(radTextBoxFloodRequests.Text); i++)
                                    total = total + tasks[i].Result;
                                Debug.Print("Finished - Sum of all results is: " + total);
                                //RadMessageBox.Show("Finished - Sum of all results is: " + total);                     
                            });

                for (int i = 0; i < int.Parse(radTextBoxFloodRequests.Text); i++)
                {
                    tasks[i].Start();
                  //  System.Threading.Thread.Sleep(10); // Wait
                }

                TaskProgress(tasks, count => Invoke(new MethodInvoker(() => radProgressBarStatus.Value1 = count)));

                // Use next line if you want to block the main thread until all the tasks are complete
                //continuation.Wait();

            }
            catch (Exception ex)
            {

                MessageBox.Show(ex.Message.ToString());

            }
        }

        public static void TaskProgress(IEnumerable<Task> tasks, Action<int> callback)
        {
            int count = 0;
            foreach (var task in tasks)
                task.ContinueWith(t => callback(Interlocked.Increment(ref count)));
        }

        private int TaskRequestWithResult(int number1, int number2, int delay, int count)
        {

            try
            {

                ServiceReference1.WCFJobsLibraryClient Client = new ServiceReference1.WCFJobsLibraryClient();
                Client.Endpoint.Address = new System.ServiceModel.EndpointAddress(radTextBoxbaseAddress.Text);
                WCFClient.ServiceReference1.ReturnClass AddNumbers_Result;

                AddNumbers_Result = Client.AddNumbers(number1, number2, delay);

                if (AddNumbers_Result.ErrorCode < 0)
                {
                    // If exception happens, it will be returned here
                    MessageBox.Show(AddNumbers_Result.ErrorCode.ToString() + " " + AddNumbers_Result.ErrorMessage + " " + AddNumbers_Result.ExMessage);
                }

                else
                {
                    Debug.Print("Task Executing now: " + count.ToString());                   

                }

                return AddNumbers_Result.Result;

            }

            catch (Exception ex)
            {                
                MessageBox.Show(ex.Message.ToString());
                return -1;

            }
        }

    } 
```

**客户端 App.config**

```
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpEndpoint" closeTimeout="00:01:00" openTimeout="00:01:00"
                    receiveTimeout="00:10:00" sendTimeout="00:10:00" allowCookies="false"
                    bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="None">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost:8732/Design_Time_Addresses/WCFService/WCFJobsLibrary/"
                binding="basicHttpBinding" bindingConfiguration="BasicHttpEndpoint"
                contract="ServiceReference1.IWCFJobsLibrary" name="BasicHttpEndpoint" />
        </client>
    </system.serviceModel>
</configuration> 
```

**服务器 C# 方法**

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession, ConcurrencyMode = ConcurrencyMode.Multiple)]
public class WCFJobsLibrary : IWCFJobsLibrary
{

    public ReturnClass AddNumbers(int FirstNumber, int SecondNumber, int Delay) //Add two numbers and wait a predefined interval
    {
        Logging.Write_To_Log_File("Entry", MethodBase.GetCurrentMethod().Name, "", "", "", 1);
        ReturnClass myReturnClass = new ReturnClass(-1, null, null, 0);
        try
        {             

            myReturnClass.ErrorCode = 1;

            myReturnClass.Result = FirstNumber + SecondNumber;

            System.Threading.Thread.Sleep(Delay); // Wait
            Logging.Write_To_Log_File("Exit", MethodBase.GetCurrentMethod().Name, "", "", "", 1);
            return myReturnClass;

        }
        catch (Exception ex)
        {
            Logging.Write_To_Log_File("Error", MethodBase.GetCurrentMethod().Name, "", "", ex.ToString(), 2);
            myReturnClass.ErrorCode = -1;
            myReturnClass.ErrorMessage = ex.ToString();
            return myReturnClass;
        }

    }

//Add two numbers and wait defined interval
[OperationContract]
ReturnClass AddNumbers(int FirstNumber, int SecondNumber, int Delay); 
```

**服务器应用程序.config**

```
<configuration>
  <system.serviceModel>
  <services>
    <service name="WCFService.WCFJobsLibrary" behaviorConfiguration="Throttled" >
      <endpoint address="" binding="basicHttpBinding" bindingConfiguration=""
        name="BasicHttpEndpoint" contract="WCFService.IWCFJobsLibrary">
        <identity>
          <dns value="localhost" />
        </identity>
      </endpoint>
      <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      <host>
        <baseAddresses>
          <add baseAddress="http://localhost:8732/Design_Time_Addresses/WCFService/WCFJobsLibrary/" />
        </baseAddresses>
      </host>
    </service>
  </services>
  <behaviors>
    <serviceBehaviors>
      <behavior name="Throttled">
        <!-- To avoid disclosing metadata information, 
          set the value below to false and remove the metadata endpoint above before deployment -->
        <serviceMetadata httpGetEnabled="true" />
        <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
        <serviceDebug includeExceptionDetailInFaults="true" />
        <serviceThrottling maxConcurrentCalls="100000" maxConcurrentInstances="100000" maxConcurrentSessions="100000" />
      </behavior>
    </serviceBehaviors>
  </behaviors>
  </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T14:56:30.237

不是 WCF，而是你的架构让你慢了下来。

例如，您正在创建 1k 个任务，这些任务将尝试从 ThreadPool 中获取线程，每个任务仅在它从您的 WCF 服务获得响应时完成（它基于每个任务同步调用您的 WCF 服务）。

现在，您可能认为您将立即启动 1k 或 10k 个作业，但实际上，.NET 的线程池将从少量线程开始，fe。4 并在需要时随着时间的推移增加它们的数量，这可能需要一些时间。

您可以通过增加线程池应分配的*最小*线程数来快速检查这是否是瓶颈：

```
int min, io;
ThreadPool.GetMinThreads(out min, out io);
ThreadPool.SetMinThreads(1000, io); 
```

这只是如何规避你的问题，而不是解决它，你的架构应该不同，将你的工作分散在 2-4 个任务之间，而不是 10k ！

此外，您似乎正在为每个请求创建一个新客户端，基本上，您正在做很多管道工作，分配大量资源（#task！= #threads，但这些仍然相关），对于非常简单的任务，因此您不是真正衡量 WCF 工作，而是您的工作。

# - 添加事件监听器

> ID：15175694
> 
> 赞同：0
> 
> 时间：2013-03-02T14:40:43.543
> 
> 标签：

将事件侦听器添加到给定 DOM 节点的 DOM 事件方法

# android - 使用杰克逊解析并使用 ormlite android 将相同的对象插入到 sqlite

> ID：15175696
> 
> 赞同：7
> 
> 时间：2013-03-02T14:40:46.620
> 
> 标签：android, ormlite, foreign-collection

我正在使用来自 api 调用的**Jackson**解析 json 数据，并尝试使用**ormlite**在 sqlite 中插入数据。为此，我使用相同的模型类。这是我的模型类

```
public class Site {

@DatabaseField(generatedId=true,columnName="ID")
private int id;
@DatabaseField(columnName="NAME")
private String name;
@ForeignCollectionField(eager=true)
Collection<Visit> visits;
Site() {

}
public int getId() {
    return id;
}
public void setId(int id) {
    this.id = id;
}
public String getName() {
    return name;
}
@JsonProperty("name")
public void setName(String name) {
    this.name = name;
}
public Collection<Visit> getVisits() {
    return visits;
}
@JsonProperty("visits")
public void setVisits(Collection<Visit> visits) {
    this.visits = visits;
}

} 
```

这是访问模型类

```
@DatabaseTable(tableName = "VISIT")
public class Visit {

@DatabaseField(generatedId=true,columnName="ID")
private int id;
@DatabaseField(columnName="VISIT_DATE")
private Date visitDate;

@ForeignCollectionField(eager=false)
Collection<CheckListItem> checklistItems;
@DatabaseField(foreign=true,foreignAutoRefresh=true,columnName="FOREIGN_ID")
private Site site;

Visit(){}

public Site getSite() {
    return site;
}
public void setSite(Site site) {
    this.site = site;
}

public Date getVisitDate() {
    return visitDate;
}
@JsonProperty("date")
public void setVisitDate(Date visitDate) {
    this.visitDate = visitDate;
}

public Collection<CheckListItem> getChecklistItems() {
    return checklistItems;
}
@JsonProperty("checklist_items")
public void setChecklistItems(Collection<CheckListItem> checklistItems) {
    this.checklistItems = checklistItems;
}
public int getId() {
    return id;
}
public void setId(int id) {
    this.id = id;
}

} 
```

我可以通过以下方式将 json 数据解析为站点对象列表：

列出 siteList = objectMapper.readValue(jp, new TypeReference>(){});

这非常有效。现在我想通过使用 ormlite（带有急切的foreignCollection）将所有这些数据（站点对象列表）存储在数据库中。为此，我正在尝试这样：

```
for each site in siteList

Collection<Visit> vTemp=site.getVisits();
Dao<Site, Integer> siteListDao=getHelper().getSiteListDao();
s.visits=siteListDao.getEmptyForeignCollection("visits");
siteListDao.create(site);
for(Visit v:vTemp)
s.contacts.add(v); 
```

它将数据插入到 SITE 和 VISIT 表中。但是，当我尝试通过 SITE 表上的 queryForAll() 函数获取数据时，它返回一个 foreignCollection 对象（site.getVisits()），但它的大小为 0，尽管我设置了 eager=true。

我假设我在插入时做错了。请告诉我使用相同的模型类对象进行此插入的正确方法是什么。

# entity-framework - 在我的 EF 实现通用存储库中找不到 .Include() 方法

> ID：15175702
> 
> 赞同：8
> 
> 时间：2013-03-02T14:41:46.467
> 
> 标签：entity-framework, repository-pattern

我正在使用通用存储库从上层包装 DbContext 和 DbSet 类。但是，在某些查询中，我需要使用“.Include()”方法来包含导航属性。但我无法在returning IQueryable 的存储库方法中找到这些方法

像，

```
this.repository.GetQuery<GeneralCalendarDates>() 
```

这没有包含方法，尽管我可以在这里使用 .ToList() 。

知道这里可能有什么问题吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-02T15:03:40.513

`Include`for是在程序集`IQueryable<T>`的命名空间中实现的扩展方法。所以你的项目必须引用这个程序集，你必须添加`System.Data.Entity``EntityFramework.dll`

```
using System.Data.Entity; 
```

在代码文件的开头。它将使基于字符串和 lambda 的版本`Include`可用，以便您可以使用：

```
orderQuery.Include("Customer") 
```

或者

```
orderQuery.Include(o => o.Customer) 
```

# excel - Excel 2003：相同单元格的自动突出显示

> ID：15175704
> 
> 赞同：-5
> 
> 时间：2013-03-02T14:42:16.023
> 
> 标签：excel, highlight

我想自动突出显示相同列（例如 A 列）中的任何单元格。单元格包含字符（例如扶手椅）而不是值。有什么公式可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T14:59:55.887

如果您想突出显示所有重复实例（例如 - 如果 Arm Chair 在 A 列中存在两次，则两者都将突出显示）然后试试这个：

选择 A 列 > 条件格式 > 新规则 > 使用公式确定要格式化的单元格 > 键入此公式

`=COUNTIF(A:A,A1)>1`

然后选择所需的格式 > OK

这适用于数字或文本

如果要突出显示所有重复（但不是第一个实例），请更改此公式

`=COUNTIF(A$1:A1,A1)>1`

# java - 登录页面出现 EJBException NoResultException

> ID：15175705
> 
> 赞同：-1
> 
> 时间：2013-03-02T14:42:20.190
> 
> 标签：java, ejb

我开发了一个 Web 来从 login.xhtml 登录，但是当它验证用户不存在时，我在导航时遇到了问题。相反，该页面会引发异常（EJB NoResultException ,getsingle Result()）。当我输入正确的用户名和密码时，应用程序可以正常导航，但是当用户不存在时会出现异常页面。我只是想实现，当用户输入错误的密码时，他会被重定向到 login.xhtml .我的代码看起来像这样

```
//managed bean class
//session scoped

 private Admin ad = new Admin();
 private String username;
 private String password;
  //string setters getters

   // admin getters, setters

   public String login(){
   ad=  adminEJB.verifyUser(                                  
   username,password);
   If(ad!=null)
   return="welcome";
   else return ="login"; 

} 
```

当我使用正确的用户名和密码登录时，它会完美地导航到welcome.xhtml 页面，但是当我使用错误的密码对其进行测试时，它会显示错误页面Ejb noresult 异常。可能是什么问题，我希望它显示登录页面并显示错误密码或无效帐户的消息。使用 managedbean 作为 sessionscoped 登录的想法也是最佳实践吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:05:04.677

如果登录不正确，您的 EJB 似乎会引发异常，您可能需要捕获此异常并返回失败。

```
private UIComponent component;

    public UIComponent getComponent() {
        return component;
    }

    public void setComponent(UIComponent component) {
        this.component = component;
    }

           public String login(){

        try{
           ad=  adminEJB.verifyUser(                                  
           username,password);
           If(ad!=null)
              return="welcome";
           else {               
          FacesContext context = FacesContext.
               getCurrentInstance();
          context.addMessage(component.getClientId(),
              new FacesMessage("Login Failed")); 
          return "login";
         }

        }catch(EJBException e){
          FacesContext context = FacesContext.getCurrentInstance();
          context.addMessage(component.getClientId(),
            new FacesMessage(e.getMessage()));                                                                       return "login";
         }
      } 
```

然后`<h:message>`在您的登录页面中使用以显示登录错误。

```
 <html xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ui="http://java.sun.com/jsf/facelets" 
        >

        <h:body>

            <h:form>
             <h:message for="login"/>
                <h:commandButton id="login" 
 value="click me" action="#{componentMsgBean.doAction}" 
binding="#{componentMsgBean.component}" />
            </h:form>

        </h:body>
    </html> 
```

会话 Bean 是登录的好主意，因为您可以在用户会话中保存用户名和其他相关数据，如角色等，并从任何 xhtml 页面访问它。同样，由于每个用户会话都会发生一次，因此将其保持在会话范围内是有意义的。

# git - Git推送需要永远

> ID：15175715
> 
> 赞同：57
> 
> 时间：2013-03-02T14:43:28.693
> 
> 标签：git, ubuntu, github

当我试图推送到我的远程 git 存储库时，它需要永远并且没有任何反应。我等了这么久，但推送永远不会完成。我的操作系统是 Ubuntu 12.10。谢谢你。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-03-04T10:05:27.140

尝试使用该`--verbose`选项来查看实际发生的情况。即使你做了一些小的改动，一些内部的事情也可能导致 git 推送更多的数据。

看看[git gc](http://git-scm.com/docs/git-gc)。它会清理您的本地存储库并可能会加快速度，具体取决于您的问题。强烈建议备份。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-12-13T19:44:06.027

我有同样的问题。如果您使用的是 Bitbucket.org，我不知道为什么，但禁用 IPV6 连接解决了问题。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-18T20:33:09.973

**确保您使用正确的协议。**

根据您设置本地配置的方式，您可能需要使用`https`来连接。为此，请将远程存储库的协议从`git@github.com:[user]/[repo]`协议切换到`https://github.com/[user]/[repo].git`协议。

`https`此外，如果您无法使用该协议，反之亦然也值得尝试。在较旧的配置上，较旧的`git@github`用户身份验证通常允许您作为后备连接。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-06-15T02:53:50.120

确保您已通过 github 身份验证：对我来说，这是我的身份验证。我在 Windows 上使用 git bash 运行命令，出于某种原因，它没有提示我进行身份验证。当我用命令提示符运行它时，我得到了这个

```
Select an authentication method for 'https://github.com/':
1\. Web browser (default)
2\. Personal access token
option (enter for default): 
```

在我成功验证后，它工作正常

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-06-16T11:27:33.010

我使用 git bash 也遇到过类似的问题。使用这些命令会有所帮助。

```
git config --global core.preloadindex true  
git config --global core.fscache true 
git config --global gc.auto 256 
```

[https://blog.praveen.science/solution-to-git-bash-is-very-slow-in-windows/](https://blog.praveen.science/solution-to-git-bash-is-very-slow-in-windows/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-07T13:51:28.913

每次我重新安装或升级 Ubuntu（全部 3-4 次）时，我都必须转到我的互联网连接（以太网和 Wifi）的 DNS 设置，删除`Automatic`并添加`8.8.8.8`和`1.1.1.1`. 在重置`git push`和所有其他 git-origin-accessing 命令后，从 1 分钟下降到几秒钟。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-05-24T05:55:55.837

请检查远程目录的权限。在我的情况下，通过 设置正确的权限后`chown -R user.group /dir`，提交正确完成：

```
$ git push --verbose
Pushing to ssh://user@domain.zone:port/dir
user@domain.zone's password:
Counting objects: ...
...
Total 123 (delta 21), reused 16 (delta 12)
To ssh://domain.zone:port/dir
 * [new branch]      master -> master
updating local tracking ref 'refs/remotes/origin/master' 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-11-22T05:24:38.490

一种可能性可能是您在最新提交中提交了大型二进制文件。git 不擅长处理二进制文件。如果提交二进制文件是一个错误，您可以参考[以下答案](https://stackoverflow.com/a/58987943/8694152)以摆脱提交中的二进制文件。

[https://stackoverflow.com/a/58987943/8694152](https://stackoverflow.com/a/58987943/8694152)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-17T18:38:56.947

删除这些目录中与关键字“vcs”和“git”相关的每个设置文件（在搜索栏中搜索“vcs”和“git”并删除您在结果中看到的每个文件）：

1.  C:/Users/%USER%/AppData/Local/Google/AndroidStudio%VERSION%

2.  C:/Users/%USER%/AppData/Roaming/Google/AndroidStudio%VERSION%

然后重启IDE！

# sql - 如何按连续两列的较大值对数据集进行排序？

> ID：15175716
> 
> 赞同：2
> 
> 时间：2013-03-02T14:43:30.590
> 
> 标签：sql, delphi, ms-access

我有一个由`Room_Widths`和组成的房间数据库`Room_lengths`。我希望能够`TADOQuery`在 Delphi 中使用 a 对数据集进行排序，以便具有最长边的房间，无论是宽度还是长度，都将在数据集中排在第一位。我需要这个，以便以后可以对其执行装箱算法。

我希望，有些东西看起来与此非常相似：

```
ADORoomQuery.SQL.Add('ORDER BY GREATEST(Room_Width, Room_Length)'); 
```

例如，如果我有 3 个房间（9 x 9m）、（10 x 2m）和（5 x 12m）：

```
Room_Widths    Room_Lengths
-------------  -------------
9              9
10             2
5              12 
```

然后它将返回以下数据集：

```
Room_Widths    Room_Lengths
-------------  -------------
5              12
10             2
9              9 
```

我正在使用 MS Access 数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T15:01:57.790

也许是这样的：

```
 select 
     room_widths, 
     room_lengths, 
     iif(room_widths>room_lengths, room_widths, room_lengths) as longest
  from 
     yourtable
  where 
     <your select criteria>
  order by 
     3 desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T16:59:51.083

好的，谢谢你的建议。我最终使用@Tlama @GordanLinof @user582118 建议以已排序的状态返回数据集。

我使用的delphi语法和sql是：

```
with ADOLayoutQuery do
  begin
    SQL.Clear;
    SQL.Add('SELECT Room_Width,Room_Length,IIF(Room_Width > Room_Length, Room_Width, Room_Length) AS Longest');
    SQL.Add('FROM RoomDetails');
    SQL.Add('WHERE OrderNumber = ' + inttostr(OrderNum));
    SQL.Add('ORDER BY IIF(Room_Width > Room_Length, Room_Width, Room_Length) DESC, (Room_Width + Room_Length) DESC');
    Open;
  end; 
```

你们也许可以稍微浓缩一下，但这对我有用。再次感谢您的帮助，我期待着问我的下一个问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T20:27:58.060

您可以先尝试规范化您的数据。例如：

```
select
  RoomID
, 'W' as Dimension
, Room_Widths as DimensionValue
from yourtable
union all
select
  RoomID
, 'L' as Dimension
, Room_Lengths as DimensionValue
from yourtable
order by RoomID 
```

假设您将上述查询保存为 NormalisedRooms。这应该给你类似的东西：

```
RoomID  Dimension  DimensionValue
------  ---------  --------------
     1          W               9
     1          L               9
     2          W              10
     2          L               2
   ...        ...             ... 
```

现在你可以这样做：

```
select
  RoomID
, max(DimensionValue) as LongestSide
from NormalisedRooms
group by RoomID
order by 2 desc 
```

这应该给你：

```
RoomID  LongestSide
------  -----------
     3           12
     2           10
     1            9 
```

# php - Jasper 与 php 帮助放置从 ireport/modules/ext 复制的所有 jar 文件的位置

> ID：15175717
> 
> 赞同：0
> 
> 时间：2013-03-02T14:43:44.527
> 
> 标签：php, report

我是 jasperreport 的新手。

1.  谁能帮我从 ireport/modules/ext 复制 jar 文件的位置？
2.  只有 ireport/modules/ext 中的 jar 文件就足够了吗？
3.  如何与php连接。

谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:32:12.780

1.  谁能帮我从 ireport/modules/ext 复制 jar 文件的位置？将只有 ir 中的 jar 文件

**您必须将其复制到您的 java_home 目录。我使用的是 windows7，所以在我的情况下它将是 C:\Program Files\Java\jre7\lib\ext。确保你已经为你的 java_home 设置了类路径。（我希望你知道怎么做）**

1.  只有 ireport/modules/ext 中的 jar 文件就足够了吗？

**是的，这对你有用**

1.  如何与php连接。

浏览下面给出的示例

```
 include('../includes/javabridge.php');
java_set_file_encoding("UTF-8");

// Load the Jasper Report

$jrxml = new java("net.sf.jasperreports.engine.xml.JRXmlLoader");
$jasperTemplate = $jrxml->load(realpath("customer.jrxml"));

// Load the Query 

$_Query = new java("net.sf.jasperreports.engine.design.JRDesignQuery");
$_Query->setText("select * FROM customers");
$jasperTemplate->setQuery($_Query);

// Compile the Report after including the Query

$compile = new JavaClass("net.sf.jasperreports.engine.JasperCompileManager");
$report = $compile->compileReport($jasperTemplate);

// Connect to the database

$class = new JavaClass("java.lang.Class");
$class->forName("com.mysql.jdbc.Driver");
$mysqlDriver = new JavaClass("java.sql.DriverManager");
$conn = $mysqlDriver->getConnection("jdbc:mysql://localhost:3309/dbcustomer?user=root&password=");

// Now Fill the Report 
$jasperFill = new JavaClass("net.sf.jasperreports.engine.JasperFillManager");
$params = new Java("java.util.HashMap");
$params->put("title", "Customer");
$jasperPrint = $jasperFill->fillReport($report, $params, $conn);

// Now Export the Report to desired format 

$jasperExport = new java("net.sf.jasperreports.engine.JRExporter");

    // Change here to generate report in pdf , excel,docx etc.. 
$Format = "pdf";

switch ($Format)
{
    case 'xls':
        $outputPath = realpath(".") . "\\" . "output.xls";
        $jasperExport = new java("net.sf.jasperreports.engine.export.JRXlsExporter");
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.export.JRXlsExporterParameter")->IS_ONE_PAGE_PER_SHEET, java("java.lang.Boolean")->TRUE);
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.export.JRXlsExporterParameter")->IS_WHITE_PAGE_BACKGROUND, java("java.lang.Boolean")->FALSE);
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.export.JRXlsExporterParameter")->IS_REMOVE_EMPTY_SPACE_BETWEEN_ROWS, java("java.lang.Boolean")->TRUE);
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.JRExporterParameter")->JASPER_PRINT, $jasperPrint);
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.JRExporterParameter")->OUTPUT_FILE_NAME, $outputPath);
        header("Content-type: application/vnd.ms-excel");
        header("Content-Disposition: attachment; filename=output.xls");
        break;
    case 'csv':
        $outputPath = realpath(".") . "\\" . "output.csv";
        $jasperExport = new java("net.sf.jasperreports.engine.export.JRCsvExporter");
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.export.JRCsvExporterParameter")->FIELD_DELIMITER, ",");
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.export.JRCsvExporterParameter")->RECORD_DELIMITER, "\n");
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.export.JRCsvExporterParameter")->CHARACTER_ENCODING, "UTF-8");
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.JRExporterParameter")->JASPER_PRINT, $jasperPrint);
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.JRExporterParameter")->OUTPUT_FILE_NAME, $outputPath);
        header("Content-type: application/csv");
        header("Content-Disposition: attachment; filename=output.csv");
        break;
    case 'docx':
        $outputPath = realpath(".") . "\\" . "output.docx";
        $jasperExport = new java("net.sf.jasperreports.engine.export.ooxml.JRDocxExporter");
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.JRExporterParameter")->JASPER_PRINT, $jasperPrint);
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.JRExporterParameter")->OUTPUT_FILE_NAME, $outputPath);
        header("Content-type: application/vnd.ms-word");
        header("Content-Disposition: attachment; filename=output.docx");
        break;
    case 'html':
        $outputPath = realpath(".") . "\\" . "output.html";
        $jasperExport = new java("net.sf.jasperreports.engine.export.JRHtmlExporter");
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.JRExporterParameter")->JASPER_PRINT, $jasperPrint);
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.JRExporterParameter")->OUTPUT_FILE_NAME, $outputPath);
        break;
    case 'pdf':
        $outputPath = realpath(".") . "\\" . "output.pdf";
        $jasperExport = new java("net.sf.jasperreports.engine.export.JRPdfExporter");
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.JRExporterParameter")->JASPER_PRINT, $jasperPrint);
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.JRExporterParameter")->OUTPUT_FILE_NAME, $outputPath);
        header("Content-type: application/pdf");
        header("Content-Disposition: attachment; filename=output.pdf");
        break;
    case 'ods':
        $outputPath = realpath(".") . "\\" . "output.ods";
        $jasperExport = new java("net.sf.jasperreports.engine.export.oasis.JROdsExporter");
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.JRExporterParameter")->JASPER_PRINT, $jasperPrint);
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.JRExporterParameter")->OUTPUT_FILE_NAME, $outputPath);
        header("Content-type: application/vnd.oasis.opendocument.spreadsheet");
        header("Content-Disposition: attachment; filename=output.ods");
        break;
    case 'odt':
        $outputPath = realpath(".") . "\\" . "output.odt";
        $jasperExport = new java("net.sf.jasperreports.engine.export.oasis.JROdtExporter");
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.JRExporterParameter")->JASPER_PRINT, $jasperPrint);
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.JRExporterParameter")->OUTPUT_FILE_NAME, $outputPath);
        header("Content-type: application/vnd.oasis.opendocument.text");
        header("Content-Disposition: attachment; filename=output.odt");
        break;
    case 'txt':
        $outputPath = realpath(".") . "\\" . "output.txt";
        $jasperExport = new java("net.sf.jasperreports.engine.export.JRTextExporter");
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.export.JRTextExporterParameter")->PAGE_WIDTH, 120);
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.export.JRTextExporterParameter")->PAGE_HEIGHT, 60);
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.JRExporterParameter")->JASPER_PRINT, $jasperPrint);
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.JRExporterParameter")->OUTPUT_FILE_NAME, $outputPath);
        header("Content-type: text/plain");
        break;
    case 'rtf':
        $outputPath = realpath(".") . "\\" . "output.rtf";
        $jasperExport = new java("net.sf.jasperreports.engine.export.JRRtfExporter");
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.JRExporterParameter")->JASPER_PRINT, $jasperPrint);
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.JRExporterParameter")->OUTPUT_FILE_NAME, $outputPath);
        header("Content-type: application/rtf");
        header("Content-Disposition: attachment; filename=output.rtf");
        break;
    case 'pptx':
         $outputPath = realpath(".") . "\\" . "output.pptx";
        $jasperExport = new java("net.sf.jasperreports.engine.export.ooxml.JRPptxExporter");
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.JRExporterParameter")->JASPER_PRINT, $jasperPrint);
        $jasperExport->setParameter(java("net.sf.jasperreports.engine.JRExporterParameter")->OUTPUT_FILE_NAME, $outputPath);
        header("Content-type: aapplication/vnd.ms-powerpoint");
        header("Content-Disposition: attachment; filename=output.pptx");
      break;
}
$jasperExport->exportReport();

readfile($outputPath);
unlink($outputPath); 
```

# drupal - drupal 8 主题层中的 drupal 7 主题概念扩展

> ID：15175719
> 
> 赞同：0
> 
> 时间：2013-03-02T14:44:18.600
> 
> 标签：drupal, drupal-7, drupal-theming

我是兼职 wordpress 主题设计师。上周我开始学习 drupal 7 主题。我的问题是，drupal 7 主题概念是否会在 drupal 8 主题层或 drupal8 主题层与 drupal 7 层完全不同。无论我继续学习过程还是等到 2013 年 8 月，drupal 8 的代码冻结月。Drupal 专业知识请帮助我。我根据未来的预期寻求答案。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:18:52.850

按照我对 Drupal 的了解，我很确定最迟要到 2014 年第二季度，你才会发现人们在生产现场使用 D8。

与 D5 到 D6 的过渡相比，D6 到 D7 的过渡并没有那么复杂。但在 D8 中它会有所不同。[Drupal 将与Symphony](http://symfony.com/)握手，这肯定会影响 D8 主题层中的许多功能。

**d7 的当前场景**

D7 中引入的 Field API 及其格式化程序的灵活性（也称为复杂性）对主题层编程产生了很大影响。事实上，在 Drupal 中存在不止一种方法（比以往任何时候都存在）来主题化一个元素。另请注意，许多模块，如显示套件、面板、视图（是的视图）也可用于从 UI 配置布局。同样对于响应式设计，我们有 Mothership、Omega 和 Adaptive 主题，支持通过 UI 进行大量配置。

由于这些工作（UI）中的大部分通常会被延续到下一个 Drupal 版本，即 D8，如果您将它用于主题化，那么现在花时间在它上面是值得的。

如果您打算单独在主题层上花费大量时间，那么我相信您在 D8 中做项目时必须重新学习一些东西，但就像我之前所说的那样，您至少需要六个月的时间来练习它实际上会将其用于生产站点。

模板/主题引擎不是必需的

# c++ - 无法将统一浮点数组传递给片段着色器

> ID：15175725
> 
> 赞同：1
> 
> 时间：2013-03-02T14:44:50.770
> 
> 标签：c++, opengl, glsl, shader, uniform

我正在尝试将数组传递给片段着色器：

```
//c++ code
float filter[9] = {-1.0f,-1.0f,-1.0f, -1.0f,9.0f,-1.0f, -1.0f,-1.0f,-1.0f};           
glUniform1fv(glGetUniformLocation(imageShaderId, "filter"), 9, filter);

//inside fragment shader code
uniform float filter[9]; //global
if(filter[0]==-1.0) gl_FragColor = red;//in main() 
```

这对我不起作用..我看过很多例子，似乎都指向我的代码是正确的？我可以使用 glUniform1f 传递单个变量 float 而不会出现问题，但不能传递数组。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T15:51:43.130

这是我将浮点数组传递给片段着色器的方式：

C++

```
GLfloat params[3];
params[0] = 2.0f;
params[1] = 1.0f;
params[2] = 1.0f;

colorRampUniformLocation = glGetUniformLocation(glprog->getProgram(), "params");
glUniform1fv(colorRampUniformLocation, 3, params); 
```

在着色器中：

```
uniform float params[3]; 
```

# wordpress - 1 篇文章在类别页面上正确显示，而另一篇文章未出现在其类别页面上

> ID：15175726
> 
> 赞同：1
> 
> 时间：2013-03-02T14:45:09.743
> 
> 标签：wordpress, categories, custom-post-type

在 wordpress 中，我的 archive.php 页面将我的两个测试帖子显示为：

```
Post Name 1, and
This entry was posted in 'MyCategory1' on March 02, 2013 
```

第二个为：

```
Post Name 2; and
This entry was posted in 'MyCategory2' on March 02, 2013 
```

这两个帖子都已添加到名为 的自定义帖子类型下`projects`。

上面显示的都是链接，其目的地为`MyCategory1`：`MyCategory2`

`Mysite/category/MyCategory1`或`MyCategory2`第二个链接。

链接后`MyCategory1`正确显示帖子，它在存档页面上显示为标题和对其类别的引用，仅显示 MyCategory1 下的帖子，MyCategory2 不再出现，这是正确的。

但在第二个链接 MyCategory2 之后显示一条消息：

```
Nothing Found
Apologies, but no results were found. Perhaps searching will help find a related post. 
```

任何想法为什么会发生这种情况并且不显示此类别下的帖子？类别链接是动态创建的，所以我看不出为什么它没有在类别页面上找到第二个帖子，而是提供指向它的类别页面的链接？

请注意，我已将以下代码添加到 category.php 循环中，以从自定义帖子类型以及普通的标准 WP 帖子类型中查询要显示的帖子：

```
// Modify the default loop, include custom post types
global $wp_query;
$args = array_merge( $wp_query->query, array( 'post_type' => 'any' ) );
query_posts( $args );

while ( have_posts() ) : the_post(); 
```

任何帮助和建议表示赞赏。我访问了永久链接页面以尝试刷新它，以防出现问题但仍然没有结果。? 我有点困惑。

我也刚刚添加了第三个类别并尝试了这个。它也不会显示并返回“Nothing Found”。因此，唯一正确显示的帖子类别 `Sitename/category/MyCategoryName`是第一个。

永久链接下的“我的类别库”和“标签库”设置当前为空白，因此使用 WP 默认设置。

谢谢

* * *

我已经取得了一些进展。如果我`?post_type=projects`在 url 的末尾使用，那么该类别会正确显示该类别的项目帖子。所以我认为问题在于默认的 wp 类别没有在循环中成功地拉入自定义帖子类型“项目”帖子。

所以这个链接有效：

`http://localhost/Sitename/category/CategoryB?post_type=projects`

但是如何使下面的链接显示与上面的链接相同？

`http://localhost/Sitename/category/CategoryA`

我想我需要以某种方式查询帖子，以便它显示来自自定义项目帖子类型的帖子，而无需使用？post_type=projects。

?? 有任何想法吗？

# magento - 如何将 WYSIWYG 编辑器添加到 Magento 的自定义选项文本区域（前端）？

> ID：15175731
> 
> 赞同：2
> 
> 时间：2013-03-02T14:45:22.873
> 
> 标签：magento, wysiwyg, frontend

我正在尝试在 Magento 前端的自定义选项文本区域中添加一个所见即所得的编辑器...这样客户就可以更改字体等。你能建议最好的方法吗？我目前有来自 NicEdit 的以下代码，但是它会覆盖文本框，因此不会发布到购物车等。

```
<script type="text/javascript">bkLib.onDomLoaded(function() {
nicEditors.editors.push(
    new nicEditor().panelInstance(
        document.getElementById('options_6_text')
    )
 );
}); 
```

任何帮助将非常感激。

谢谢，马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:49:29.590

您可以尝试在虚拟文本区域上使用此所见即所得编辑器，并使用其他一些 javascript 将内容复制回（隐藏）选项文本区域。

# python - 迭代时追加到列表

> ID：15175732
> 
> 赞同：11
> 
> 时间：2013-03-02T14:45:23.317
> 
> 标签：python, list, iteration

我需要这种行为，但宁愿减少列表而不是增加列表。序列顺序对于此操作很重要。

```
for item in mylist:
    if is_item_mature(item):
        ## Process him
    else:
        ## Check again later
        mylist.append(item) 
```

但我宁愿让它更像这样。这和我想的一样吗？还有更好的方法吗？

```
while mylist:
    item = list.pop(0)
    if is_item_mature(item):
        ##Process
    else:
        mylist.append(item) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-02T14:56:41.853

我在您的方法中看到的唯一问题是一个不断增长的列表，根据您的使用情况可能会占用您的内存

我宁愿建议您使用[Queue](http://docs.python.org/2/library/queue.html)。队列的设计和灵活性足以处理结束的生产和消费

```
from Queue import Queue
q = Queue() #You can also specify the maximum size of the Queue here
# Assume your Queue was filled
while not q.empty():
    # It won;t block if there are no items to pop
    item = q.get(block = False) 
    if is_item_mature(item):
        #process
    else:
        #In case your Queue has a maxsize, consider making it non blocking
        q.put(item) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-02T14:47:02.297

您可以安全地将项目附加到列表中，并且迭代将包括这些项目：

```
>>> lst = range(5)
>>> for i in lst:
...     print i
...     if i < 3:
...         lst.append(i + 10)
... 
0
1
2
3
4
10
11
12 
```

但是，如果您更喜欢递减列表，那么您的`while`循环非常适合您的需求。

# c++ - 在 C++11 之前有没有类似于 std::function 的东西？

> ID：15175734
> 
> 赞同：7
> 
> 时间：2013-03-02T14:45:54.387
> 
> 标签：c++, c++11, std-function

`std::function<>`当 C++11 不可用时，应该使用什么构造作为代理？
替代方案基本上应该允许从另一个类访问一个类的私有成员函数，如下例所示（不使用 std::function 的其他特性）。Foo 类是固定的，不能改变太多，我只能访问类 Bar。

```
class Foo {
  friend class Bar; // added by me, rest of the class is fixed
  private:

  void doStuffFooA(int i);
  void doStuffFooB(int i);
};

class Bar {
  public:

  Bar( Foo foo, std::function< void (const Foo&, int) > func ) {
    myFoo = foo;
    myFooFunc = func;
  };

  private:

  doStuffBar( const &Foo foo ) {
    myFooFunc( foo, 3 );
  }

  Foo myFoo;
  std::function< void (const Foo&, int) > myFooFunc;
}

int main() {

  Foo foo(...);

  Bar barA( foo, &Foo::doStuffFooA );

  Bar barB( foo, &Foo::doStuffFooB );
  ...
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-02T14:47:00.883

> 在 C++11 之前有没有类似于 std::function 的东西？

**是**的。有 Boost.Function( `boost::function<>`)，它最近成为 C++ 标准库的一部分，并为`std::function<>`;提供了参考实现。同样，Boost.Bind( `boost::bind<>()`) 被标准采用并成为`std::bind<>()`.

它实现了一种称为*类型擦除*的技术，用于保存任何类型的可调用对象。这是一个可能的、说明性的实现，说明如何从头开始定义这样的类模板（不要在生产代码中使用，这只是一个示例）：

```
#include <memory>

template<typename T>
struct fxn { };

template<typename R, typename... Args>
struct fxn<R(Args...)>
{

public:

    template<typename F>
    fxn(F&& f) 
        : 
        _holder(new holder<typename std::decay<F>::type>(std::forward<F>(f)))
    { }

    R operator () (Args&&... args)
    { _holder->call(std::forward<Args>(args)...); }

private:

    struct holder_base
    { virtual R call(Args&&... args) = 0; };

    template<typename F>
    struct holder : holder_base
    {
        holder(F&& f) : _f(std::forward<F>(f)) { }
        R call(Args&&... args) { return _f(std::forward<Args>(args)...); }
        F _f;
    };

    std::unique_ptr<holder_base> _holder;
};

#include <iostream>

int main()
{
    fxn<void()> f = [] { std::cout << "hello"; };
    f();
} 
```

# bash - 如何使用正则表达式用 bash 重命名大量文件？

> ID：15175740
> 
> 赞同：1
> 
> 时间：2013-03-02T14:46:39.290
> 
> 标签：bash

我想用 bash 脚本重命名很多文件：

原来的：

```
Kassai_szemle_1885_00015.jpg 
Kassai_szemle_1885_00016.jpg 
Kassai_szemle_1885_00017.jpg 
```

它应该重命名为：

```
Kassai_Szemle_1885_00015.jpg 
Kassai_Szemle_1885_00016.jpg 
Kassai_Szemle_1885_00017.jpg 
```

只有“s”应该重命名为大写“S”。

我怎么能用 bash 做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T14:57:43.780

## 使用替换扩展

您实际上并不需要正则表达式，尽管您可以将其与非标准`rename`命令一起使用，或者通过使用 sed、awk 或 perl 解析文件名来使用。但是，您也可以只使用 Bash 的内置[参数扩展](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)来轻松处理此问题。例如：

```
for file in *_szemle_*
do
    mv "$file" "${file/_szemle/_Szemle}"
done 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-02T14:59:43.027

`rename`在 GNU/Linux 下有一个可用的实用程序（如 Ubuntu、Debian、RedHat ......而标准`perl`安装正常），这很容易。

您可以在包含所有提到的文件的文件夹中运行它，例如：

```
rename 's/^Kassai_s/Kassai_S/' Kassai_s*.jpg 
```

# c# - 如何将静态数组的元素传递给非静态方法？

> ID：15175741
> 
> 赞同：1
> 
> 时间：2013-03-02T14:46:45.707
> 
> 标签：c#, static

我有一个静态数组，我需要将它的任意元素传递给非静态方法。

我怎么做？

```
public class MyClass
{
    public static int[] staticArray = { 3, 11, 43, 683, 2731 };

    public void SomeMethod(int value)
    {
        //...stuff...
    }

    public static void staticMethod()
    {
         SomeMethod(staticArray[2]);    //error here
    }
} 
```

当我尝试类似的事情时，我得到了错误`An object reference is required for the non-static field, method, or property`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T15:01:06.933

您的代码很好，但是`'An object reference is required for the non-static field, method, or property'`当您尝试调用`instance`方法或访问非类实例以外的东西（例如从静态方法）上的非静态字段/属性时会发生。例如：

```
class MyClass
{
    private int imNotStatic;

    public static void Bar()
    {
        // This will give you your 'An object reference is required` compile 
        // error, since you are trying to call the instance method SomeMethod
        // from a static method, as there is no 'this' to call SomeMethod on.
        SomeMethod(5);

        // This will also give you that error, as you are calling SomeMethod as
        // if it were a static method.
        MyClass.SomeMethod(42);

        // Again, same error, there is no 'this' to read imNotStatic from.
        imNotStatic = -1;
    }

    public void SomeMethod(int x)
    {
        // Stuff
    }
} 
```

确保您没有执行上述任一操作。你确定你是`SomeMethod`从构造函数调用的吗？

# sql - 在文本中查找字符串

> ID：15175742
> 
> 赞同：0
> 
> 时间：2013-03-02T14:46:48.477
> 
> 标签：sql, postgresql, search

我有一个包含“company_name”列的表。现在，对于一些第三方应用程序，我会收到这样的短字符串：**Somebody has sent item to "stack-exchange"**。

我想从字符串中找到带有 stack-exchange company_name 列的行。（换句话说，我希望喜欢操作员以相反的方式工作）。这该怎么做？

编辑：如何检查表中 company_name 的任何值是否与我收到的字符串的一部分匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:56:29.900

**编辑**：由于您无法识别输入字符串的哪一部分是公司名称，因此您需要根据字符串检查表中 company_name 的现有值。例如，在 PHP 中：

```
$input = 'Somebody has sent item to "stack-exchange"';
$result = mysql_query('SELECT company_name FROM table');
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
    if strpos($input, $row['company_name']) === False {
        print "Company name is not in this row!" /* Substitute whatever action you want here */
    } else {
        print "Company name is in this row!" /* Substitute whatever action you want here */
    }
} 
```

**处理用户输入**

确保在将输入作为 SQL 查询的一部分之前对其进行了[清理。](https://stackoverflow.com/questions/129677/whats-the-best-method-for-sanitizing-user-input-with-php)否则，您的代码容易受到黑客攻击。

不幸的是，由于您收到的某些字符串是由用户输入的，因此您无法确定它们是否与您数据库中的内容相匹配。例如，`"stack-exchange"`可以合理地表示为`"Stack Exchange"`、`stack exchange`、`StackExchange`等。因此您需要标准化输入以匹配您在数据库中存储公司名称的方式。例如，您可以将所有字符设为小写，并将所有空格或标点符号替换为连字符。这并不排除诸如拼写错误或变体之类的极端情况，但这超出了本问题的范围。

~~如果您收到的第三方字符串可靠地包含双引号中的公司名称（并且双引号不用于指示这些字符串中的任何其他内容），您可以使用 PHP 检索公司名称。然后，您可以使用 SQL`WHERE`子句来获取相关行。~~

 ~~```
$input  = 'Somebody has sent item to "stack-exchange"';
$parts = explode('"', $input);
$company_name = $parts[1];
$sql_query = 'SELECT * FROM table WHERE company_name="' . $company_name . '"' 
```~~  ~~* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T15:09:04.240

我认为您需要更好地解释这个问题，因为我至少可以用两种方式解释这个问题：i) 电子邮件中提供的字符串与名为 company-name 的列中的某些数据部分匹配：无论哪种方式都使用 like 表达式左右，根据需要添加 % 例如，'%'+companyname+'%' like emailstring [它将从电子邮件中提供的'stack-exchange 中找到'stack-exchange company']

ii) 有多个列，每个列都以公司命名...例如，id、company1、company2、stack-exchange-company、company4

如果您的数据库支持动态 sql（例如，大多数 SQLServer 风格），您可以计算 sql 然后使用 set @sqlexpr = 'select stack-exchange from mytable' exec(@sqlexp)

否则，您需要在调用 db 之前动态创建 sql。~~

# c# - 如何改变很多TextBox.text的另一个线程而不是UI线程（使用相同的功能）？

> ID：15175743
> 
> 赞同：1
> 
> 时间：2013-03-02T14:46:53.603
> 
> 标签：c#, .net, multithreading

我的问题是要更改很多 TextBox.text 的另一个线程而不是 UI 线程。像这样：

```
string bufferSerial;
.
.
.
private void serialPort1_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
{
    bufferSerial += serialPort1.ReadLine();
    TextBox1.text = bufferSerial;
    TextBox2.text = bufferSerial;
    TextBox3.text = bufferSerial;
    TextBox4.text = bufferSerial;
    TextBox5.text = bufferSerial;
    TextBox6.text = bufferSerial;
    TextBox7.text = bufferSerial;
.
.
.
.
.
.
    TextBoxN.text = bufferSerial;
} 
```

如果我尝试这样做，我有一个错误：控件'textBox1'从创建它的线程以外的线程访问。

要更改单个 TextBox，我可以使用此解决方案：

```
delegate void SetTextCallback(string text);

private void SetText(string text)
{
  // InvokeRequired required compares the thread ID of the
  // calling thread to the thread ID of the creating thread.
  // If these threads are different, it returns true.
  if (this.textBox1.InvokeRequired)
  { 
    SetTextCallback d = new SetTextCallback(SetText);
    this.Invoke(d, new object[] { text });
  }
  else
  {
    this.textBox1.Text = text;
  }
} 
```

然后像这样调用函数：

```
private void serialPort1_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
{
  bufferSerial += serialPort1.ReadLine();
  SetText(bufferSerial);
} 
```

但是如果我需要更改很多 BoxText 我必须为每个创建一个函数？

谢谢你的帮助！此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:51:26.173

不，创建一个更改*所有*文本框的方法 - 并调用它：

```
// We assume this will always be called from a non-UI thread...
private void HandleDataReceived(object sender, SerialDataReceivedEventArgs e)
{
    bufferSerial += serialPort1.ReadLine();
    Action<string> d = SetAllTextBoxes;
    Invoke(d, bufferSerial);
}

private void SetAllTextBoxes(string text)
{
    textBox1.Text = text;
    textBox2.Text = text;
    textBox3.Text = text;
    textBox4.Text = text;
    ...
} 
```

理想情况下，您会将文本框放在一个集合中，以便您可以将其重写为：

```
private void SetAllTextBoxes(string text)
{
    foreach (var textBox in textBoxes)
    {
        textBox.Text = text;
    }
} 
```

# java - Slick2D 获取图像 x 和 y

> ID：15175746
> 
> 赞同：1
> 
> 时间：2013-03-02T14:47:02.997
> 
> 标签：java, eclipse, image, slick2d

好的，所以我有一辆你可以在我的游戏中驾驶的汽车。它基本上是一个在背景上驱动的图像，a 和 d 转动它，w 和 s 来回驱动。但我想在屏幕边缘做一些边框，这样它就不会一直开到什么都没有，但要做到这一点，我认为我必须获得图像的 x 和 y 位置。有谁知道如何获得这个/知道在 Slick2D 中制作边框的另一种方法？

谢谢，马可。

这是 GameplayState 代码：

```
package myprojects.main;

import org.newdawn.slick.GameContainer;
import org.newdawn.slick.Graphics;
import org.newdawn.slick.Image;
import org.newdawn.slick.Input;
import org.newdawn.slick.SlickException;
import org.newdawn.slick.Sound;
import org.newdawn.slick.state.BasicGameState;
import org.newdawn.slick.state.StateBasedGame;

public class GameplayState extends BasicGameState {

    int stateID = -1;
    Image imgBG = null;
    Image player = null;
    float scale = 1.0f;
    Sound ding = null;
    Sound gamemusic = null;
    int height;
    int width;
    private static int rightSide = 1200;
    private static int topSide = 800;
    float startGameScale = 1;
    float scaleStep = 0.001f;
    int[] duration = { 200, 200 };
    public Car car;
    // Animation car, driveUp, driveDown, driveRight, driveLeft;

    boolean hasWon;

    GameplayState(int stateID) {
        this.stateID = stateID;
    }

    @Override
    public int getID() {
        return stateID;
    }

    public void init(GameContainer gc, StateBasedGame sbg)
            throws SlickException {
        imgBG = new Image("myprojects/main/resources/land.png");
        player = new Image("myprojects/main/resources/playercar.png");
        ding = new Sound("myprojects/main/resources/ding.wav");
        gamemusic = new Sound("myprojects/main/resources/gamemusic.wav");
        car = new Car(300,300);

        /**
         * Image[] carUp = {new Image("myprojects/main/resources/carUp.png"),
         * new Image("myprojects/main/resources/carUp.png")}; Image[] carDown =
         * {new Image("myprojects/main/resources/carDown.png"), new
         * Image("myprojects/main/resources/carDown.png")}; Image[] carRight =
         * {new Image("myprojects/main/resources/carRight.png"), new
         * Image("myprojects/main/resources/carRight.png")}; Image[] carLeft =
         * {new Image("myprojects/main/resources/carLeft.png"), new
         * Image("myprojects/main/resources/carLeft.png")};
         * 
         * driveUp = new Animation(carUp, duration, false); driveDown = new
         * Animation(carDown, duration, false); driveRight = new
         * Animation(carRight, duration, false); driveLeft = new
         * Animation(carLeft, duration, false); player = driveDown;
         **/

    }

    public void render(GameContainer gc, StateBasedGame sbg, Graphics g)
            throws SlickException {
        imgBG.draw(0, 0);
        gc.setSoundVolume(0.05f);
        gamemusic.loop();
        g.drawString("Pause Game", 1100, 775);
        g.drawImage(car.getImage(), car.getX(), car.getY());

    }

    public void update(GameContainer gc, StateBasedGame sbg, int delta)
            throws SlickException {
        Input input = gc.getInput();
        // Check if outside left border
        if(car.x < 0) {
            car.setX(0);
        }
        // Check if outside top border
        if(car.y < 0) {
            car.setY(0);
        }
        // Check if outside right border
        if(car.x >= gc.getWidth() - car.getWidth()) {
            car.setX(gc.getWidth() - car.getWidth());
        }
        // Check if outside bottom border
        if(car.y >= gc.getHeight() - car.getHeight()) {
            car.setY(gc.getHeight() - car.getHeight());
        }

        int mouseX = input.getMouseX();
        int mouseY = input.getMouseY();
        boolean hasWon = false;

        if ((mouseX <= rightSide && mouseX >= rightSide - 100)
                && (mouseY <= topSide && mouseY >= topSide - 50)) {
            hasWon = true;
        }
        if (hasWon) {
            if (input.isMouseButtonDown(Input.MOUSE_LEFT_BUTTON)) {
                sbg.enterState(StarRacingGame.MAINMENUSTATE);
            } else {

            }
        }

        if (input.isKeyDown(Input.KEY_ESCAPE)) {
            ding.play();
            sbg.enterState(StarRacingGame.MAINMENUSTATE);
        }

        if (input.isKeyDown(Input.KEY_A)) {
            car.rotate(-0.2f * delta);
        }

        if (input.isKeyDown(Input.KEY_D)) {
            car.rotate(0.2f * delta);
        }

        if (input.isKeyDown(Input.KEY_S)) {
            float hip = 0.4f * delta;

            float rotation = car.getRotation();

            car.x -= hip * Math.sin(Math.toRadians(rotation));
            car.y += hip * Math.cos(Math.toRadians(rotation));

        }

        if (input.isKeyDown(Input.KEY_W)) {
            if (input.isKeyDown(Input.KEY_LSHIFT)) {
                float hip = 1.4f * delta;
                float rotation = car.getRotation();

                car.x += hip * Math.sin(Math.toRadians(rotation));
                car.y -= hip * Math.cos(Math.toRadians(rotation));
            } else {
                float hip = 0.4f * delta;
                float rotation = car.getRotation();

                car.x += hip * Math.sin(Math.toRadians(rotation));
                car.y -= hip * Math.cos(Math.toRadians(rotation));
            }
        }

    }

} 
```

车号：

```
 package myprojects.main;

import org.newdawn.slick.Image;
import org.newdawn.slick.SlickException;

public class Car {
public int x;
public int y;
public Image image;

public Car(int x, int y) throws SlickException{
    this.x = x;
    this.y = y;
    image = new Image("myprojects/main/resources/playercar.png");

}

public org.newdawn.slick.Image getImage() {
    return image;
}

public int getX() {
    return x;
}

public void setX(int x) {
    this.x = x;
}

public void setY(int y) {
    this.y = y;
}

public int getWidth() {
    return 100;
}

public int getHeight() {
    return 100;
}

public int getY() {
    return y;

}

public void rotate(float f) {
    image.rotate(f);
}

public float getRotation() {
    return image.getRotation();
}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:05:47.203

我要做的是创建一个具有图像的汽车类。使用此类，您可以使用 int 来保存表示汽车位置的 x 和 y 值以及汽车的图像。然后，您只需设置值或 x 和 y 并像您在示例中所做的那样旋转图像，除了 Car 对象。你可能已经这样做了，我不确定除了输入处理程序之外没有更多的代码。要绘制它，请在渲染中执行以下操作：

```
drawImage(car.getImage(), car.getX(), car.getY()); 
```

至于边界，假设您只是不希望您的汽车离开屏幕，您可以执行以下操作：

```
// Check if outside left border
if(car.getX() < 0) {
    car.setX(0);
}
// Check if outside top border
if(car.getY() < 0) {
    car.setY(0);
}
// Check if outside right border
if(car.getX() >= SCREEN_WIDTH - car.getWidth()) {
    car.setX(SCREEN_WIDTH - car.getWidth());
}
// Check if outside bottom border
if(car.getY() >= SCREEN_HEIGHT - car.getHeight()) {
    car.setY(SCREEN_HEIGHT - car.getHeight());
} 
```

在这种情况下，get width 和 get height 获取用于汽车的图像的宽度和高度，而 SCREEN_HEIGHT 和 SCREEN_WIDTH 是保持屏幕宽度和高度的常量。您可能需要根据游戏的运行方式进行微调。

```
public Class Car {
private int x;
private int y;
private Image image;

public Car(int x, int y) {
    this.x = x;
    this.y = y;
    image = new Image("location/car.png");
}

public int getX() {
    return x;
}

public void setX(int x) {
    this.x = x;
}

public int getY() {
    return y;
}

public void setY(int y) {
    this.y = y;
} 
```

# windows-phone-8 - 从字符串中删除不受支持的字符

> ID：15175748
> 
> 赞同：0
> 
> 时间：2013-03-02T14:47:30.793
> 
> 标签：windows-phone-8

我有一个从服务器返回的带有歌曲列表的 json 字符串，但它使用的编码与 WP7 的编码不同（我认为）。

当我将字符串加载到设备上的文本块中时，典型的窗口是空的白色方块，但是在元素检查器中的 VS 中它没有显示，当我在 sublime 中打开它时它也不在 json 文件中（应该有“cant”中 n 和 t 之间的一个字符）：

![崇高 3 文本](../Images/f99655d7db10a5ab296d45515bbc9bbd.png)

但是当我在十六进制编辑器中打开它时，我会看到：

![在此处输入图像描述](../Images/bae999dff733ecb09b4748d8440e564a.png)

所以我的问题是如何解决这个问题，而不是在每次获取 json 文件时都将不支持的字节列入黑名单并替换它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T05:58:56.383

Windows Phone 确实只支持 UTF-8 和 UTF-16。

但是，有一个[文本编码类生成器](http://www.hardcodet.net/2010/03/silverlight-text-encoding-class-generator)，它将为您生成代码来处理您的场景所需的特定编码。这可能会为您节省大量时间。

# ios - 带有块的 UIView 动画如何在幕后工作

> ID：15175750
> 
> 赞同：22
> 
> 时间：2013-03-02T14:47:34.193
> 
> 标签：ios, objective-c, uiview

我是 Objective-C/iOS 编程的新手，我试图了解 UIView 动画是如何在幕后工作的。

假设我有这样的代码：

```
[UIView animateWithDuration:2.0 animations:^{
    self.label.alpha = 1.0;
}]; 
```

作为`animations`参数传递的东西是一个可以执行的 Objective-C 块（类似于其他语言中的 lambdas/匿名函数），然后它将`alpha`属性`label`从当前值更改为 1.0。

但是，该块不接受动画进度参数（例如从 0.0 到 1.0 或从 0 到 1000）。我的问题是动画框架如何使用这个块来了解中间帧，因为块只指定最终状态。

编辑：我的问题是关于方法*的幕后*操作`animateWithDuration`而不是*使用它的方法*。

我对`animateWithDuration`代码如何工作的假设如下：

1.  `animateWithDuration`为所有视图对象激活某种特殊状态，其中实际上并未执行更改，而只是注册了更改。
2.  它执行块并注册更改。
3.  它查询视图对象的更改状态并取回初始值和目标值，因此知道要更改哪些属性以及在什么范围内执行更改。
4.  它根据持续时间和初始/目标值计算中间帧，并触发动画。

有人可以阐明是否`animateWithDuration`真的以这种方式工作吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-03T18:38:53.870

当然，我不知道幕后到底发生了什么，因为 UIKit 不是开源的，而且我不在 Apple 工作，但这里有一些想法：

在引入基于块的`UIView`动画方法之前，动画视图看起来像这样，这些方法实际上仍然可用：

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:duration];
myView.center = CGPointMake(300, 300);
[UIView commitAnimations]; 
```

知道了这一点，我们可以像这样实现我们自己的基于块的动画方法：

```
+ (void)my_animateWithDuration:(NSTimeInterval)duration animations:(void (^)(void))animations
{
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:duration];
    animations();
    [UIView commitAnimations];
} 
```

`animateWithDuration:animations:`...这将与现有方法完全相同。

从等式中取出块，很明显必须有某种全局动画状态，`UIView`然后当它们在动画块内完成时用于动画对其（可动画的）属性的更改。这必须是某种堆栈，因为您可以嵌套动画块。

实际的动画由 Core Animation 执行，它在层级工作——每个都有一个负责动画和合成`UIView`的支持实例，而视图主要只处理触摸事件和坐标系转换。`CALayer`

我不会在这里详细介绍 Core Animation 的工作原理，您可能需要阅读[Core Animation Programming Guide](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html)来了解它。本质上，它是一个在层树中动画变化的系统，无需显式计算每个关键帧（实际上从核心动画中获取中间值相当困难，您通常只需指定 from 和 to 值、持续时间等，然后让系统注意细节）。

因为`UIView`是基于 a 的`CALayer`，所以它的很多属性其实都是在底层实现的。例如，当您设置或获取时`view.center`，这`view.layer.location`与更改其中任何一个都会更改另一个。

层可以*显式地*进行动画处理`CAAnimation`（这是一个具有许多具体实现的抽象类，例如`CABasicAnimation`简单的事物和`CAKeyframeAnimation`更复杂的事物）。

那么`UIView`属性设置器可以做些什么来完成动画块中的“神奇”动画更改呢？让我们看看是否可以重新实现其中之一，为简单起见，让我们使用`setCenter:`.

`my_animateWithDuration:animations:`首先，这是上面使用 global的方法的修改版本`CATransaction`，以便我们可以在我们的方法中找出`setCenter:`动画应该花费多长时间：

```
- (void)my_animateWithDuration:(NSTimeInterval)duration animations:(void (^)(void))animations
{
    [CATransaction begin];
    [CATransaction setAnimationDuration:duration];

    animations();

    [CATransaction commit];
} 
```

请注意，我们不再使用`beginAnimations:...`and `commitAnimations`，所以不做任何其他事情，什么都不会被动画化。

现在，让我们`setCenter:`在`UIView`子类中覆盖：

```
@interface MyView : UIView
@end

@implementation MyView
- (void)setCenter:(CGPoint)position
{
    if ([CATransaction animationDuration] > 0) {
        CALayer *layer = self.layer;
        CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"position"];
        animation.fromValue = [layer valueForKey:@"position"];
        animation.toValue = [NSValue valueWithCGPoint:position];
        layer.position = position;
        [layer addAnimation:animation forKey:@"position"];
    }
}
@end 
```

在这里，我们使用 Core Animation 设置了一个*显式*动画，它为底层的`location`属性设置动画。动画的持续时间将自动从`CATransaction`. 让我们试一试：

```
MyView *myView = [[MyView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
myView.backgroundColor = [UIColor redColor];
[self.view addSubview:myView];

[self my_animateWithDuration:4.0 animations:^{
    NSLog(@"center before: %@", NSStringFromCGPoint(myView.center));
    myView.center = CGPointMake(300, 300);
    NSLog(@"center after : %@", NSStringFromCGPoint(myView.center));
}]; 
```

我并不是说这正是`UIView`动画系统的工作方式，只是为了展示*它*在原则上是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T15:58:52.093

未指定中间帧的值；值的动画（在这种情况下为 alpha，还有颜色、位置等）在先前设置的值和动画块内设置的目标值之间自动生成。您可以通过指定选项使用来影响曲线`animateWithDuration:delay:options:animations:completion:`（默认为`UIViewAnimationOptionCurveEaseInOut`，即值变化的速度将加速和减速）。

请注意，任何先前设置的动画值更改都将首先完成，即每个动画块都指定一个从前一个结束值到新值的新动画。您可以指定`UIViewAnimationOptionBeginFromCurrentState`从已经进行中的动画状态开始新动画。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T16:01:25.093

这会将块内指定的属性从当前值更改为您提供的任何值，并将在持续时间内线性执行。

因此，如果原始 alpha 值是 0，这将在 2 秒内淡入标签。如果原始值已经是 1.0，那么您根本看不到任何效果。

在幕后，`UIView`负责确定需要进行多少动画帧的更改。

您还可以通过将缓动曲线指定为 来更改更改发生的速率`UIViewAnimationOption`。再次`UIView`为您处理补间。

# mysqli - Mysqli 程序：如何执行查询以从同一字段中检索不同的可能值？

> ID：15175756
> 
> 赞同：0
> 
> 时间：2013-03-02T14:48:29.487
> 
> 标签：mysqli

下面的代码片段是好的。当字段不为空时，它给出了一个很好的结果。

```
$p_tag = '';

$query_pre = mysqli_prepare($bdd, 'SELECT  min , comments , p_tag , p_name  FROM pictures WHERE  tag != ? ');

mysqli_stmt_bind_param($query_pre, "s", $p_tag);    

mysqli_stmt_execute($query_pre); 

mysqli_stmt_bind_result($query_pre, $data['mini'], $data['comments'], $data['p_tag'] , $data['p_name']); 
```

***当标签字段*包含“父亲”或“母亲”或“兄弟”或“姐妹”或“阿姨”或“叔叔”等时，我想优化搜索和检索结果**...... （但不是朋友，同事...... .)

我是新手`Mysqli`，它似乎没有那么灵活，`Mysql`以至于我无法弄清楚如何执行我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T15:02:52.197

在我看来，您可以更改查询以仅选择具有这些值的结果。

```
SELECT  min , comments , p_tag , p_name  FROM pictures WHERE  tag in ('father','mother','brother','sister','aunt','uncle') 
```

# javascript - Mozilla 开发者网络 - 问号指的是什么？

> ID：15175759
> 
> 赞同：5
> 
> 时间：2013-03-02T14:49:10.940
> 
> 标签：javascript, ajax

下[`Properties->"onreadystatechange"->Type:Function?`](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#Properties)，

```
Attribute           Type       Description
------------------------------------------
onreadystatechange  Function?  [...]
                            ^ 
```

是什么`?`意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T14:55:53.503

我不确定，但我认为这意味着该值可以为空。

# android - Android捏缩放大图，内存高效不丢失细节

> ID：15175760
> 
> 赞同：11
> 
> 时间：2013-03-02T14:49:22.240
> 
> 标签：android, imageview, out-of-memory, large-files, pinchzoom

我的应用程序必须显示一些高分辨率图像（约 1900*2200 像素），支持捏缩放。为避免内存不足错误，我计划使用解码图像以显示全屏

```
options.inSampleSize = scale (scale was calculated as Power of 2 as Document) 
```

（我使用的视图是`TouchImageView`扩展的`ImageView`）

所以我可以快速加载图像并在屏幕（图像）之间平滑滑动。但是，当我捏​​缩放时，我的应用会因为缩放图像而丢失细节。如果我加载完整图像，我无法快速加载或平滑滑动，在捏缩放后拖动。然后我尝试仅在用户开始捏缩放时加载完整图像，但由于图像非常大，我仍然无法平滑拖动图像。Android 画廊甚至可以完美地完成 8Mpx 图像。

任何人都可以帮助我。提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-26T19:22:25.230

很抱歉回答一个老问题，但我刚刚完成了一个图像视图，该视图显示了来自资产或外部存储的图像并带有子采样，并在您捏放大时从图像中加载更高分辨率的图块。作为区域的高分辨率图像数据屏幕未加载应避免内存不足异常。

[https://github.com/davemorrissey/subsampling-scale-image-view](https://github.com/davemorrissey/subsampling-scale-image-view)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-06T14:24:43.730

我知道这个问题是很久以前提出的，但这个答案可能会帮助其他人在这个问题上苦苦挣扎。我有完全相同的问题。您应该考虑使用`WebView`并加载您的图像，即使它是本地图像。例如，要在*资产*中加载图像，请使用以下内容：

```
// Get a WebView you have defined in your XML layout    
WebView webView = (WebView) findViewById(R.id.webView1);  
// Fetch the picture in your folders using HTML             
String htmlData = "<img src=\"my_image.png\">";
webView.loadDataWithBaseURL("file:///android_asset/", htmlData, "text/html", "utf-8", null);
// Activate zooming
webView.getSettings().setBuiltInZoomControls(true); 
```

我承认`WebView`用于这样的任务很奇怪，这是我找到的唯一解决方案。至少你永远不会得到 OOM 异常。

# java - 在 HTMLparser HasAttributeFilter 参数中使用通配符（或正则表达式）

> ID：15175762
> 
> 赞同：0
> 
> 时间：2013-03-02T14:49:38.510
> 
> 标签：java, html-parsing, html-parser

我使用 org.htmlparser。如何通过类掩码接收节点列表？例如：

```
<span class="selection-link normal coeff816128@Result.draw">....</span>
<span class="selection normal coefd816154@Result.draw">....</span> 
```

我想接收所有具有“正常”类的标签。很遗憾

> 新的 HasAttributeFilter("class", "normal")

不工作。HTMLparser 是否允许类似的东西`new HasAttributeFilter("class", "\*normal*")`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T13:14:30.390

如果可能的话，你可以试试[jsoup——](http://www.jsoup.org)它是一个非常强大的开源 html 库。

这是一个示例，如何获取（和打印）具有*normal*类的每个元素：

**输入HTML：**

```
<span class="selection-link normal coeff816128@Result.draw">....</span>
<span class="selection-link coeff816128@Result.draw">....</span>
<span class="selection coefd816154@Result.draw">....</span>
<span class="selection normal coefd816154@Result.draw">....</span> 
```

*（这是你的，但有两个额外`span`的没有`normal`类）*

**汤：**

```
/* Input file - containing the html listed above.*/
final File f = new File("test.html");

/*
 * Parse the html into a jsoup document. In this example i get it from
 * the file, but its possible to parse from string or connect to a
 * website.
 */
Document doc = Jsoup.parse(f, null);

/* Iterate over eacht element */
for( Element element : doc.select("*.normal") )
{
    System.out.println(element);
} 
```

随着`*.normal`您选择每个带有 class 的元素`normal`。但是，如果您只不想使用带有`span`标签的那些`span.normal`。

有关 Jsoup 选择器 api 的文档，请参见此处：http: [//jsoup.org/cookbook/extracting-data/selector-syntax](http://jsoup.org/cookbook/extracting-data/selector-syntax)

顺便提一句。如果你想使用 DOM 选择器而不是`select()`：`doc.getElementsByClass("normal")`

# java - 从远程服务器检索数据

> ID：15175763
> 
> 赞同：0
> 
> 时间：2013-03-02T14:49:58.683
> 
> 标签：java, xml, json

我正在尝试找到一种方法来从远程 Web 应用程序中检索数据（xml 或 json 格式），然后在 Java 中解析相同的数据？有什么方法可以将 url 传递给远程主机，获取响应并以适合 Java 进一步处理的方式检索数据？

任何形式的帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:55:13.590

是的。您将发送一个 HTTP 请求，读取它的响应，然后解析它。这可以使用[URLConnection](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html#openConnection%28%29)来实现，或者如果您需要更大的灵活性，可以使用像 apache HttpCLient 这样的库。

# node.js - 大数据的node.js mongodb连接延迟

> ID：15175765
> 
> 赞同：0
> 
> 时间：2013-03-02T14:50:38.387
> 
> 标签：node.js, mongodb, mongoimport

我正在通过我的 node.js 应用程序使用 csv 类型进行 mongoimport。在本地主机上，结果非常好。当我将我的 nodejs 代码库和 mongodb 移动到服务器 env （都在同一台服务器中）时，结果并不那么令人满意，如下所示。这是无法解决的网络延迟问题还是我遗漏了什么？

```
Config:
RAM-8GB; csvdata-75000 rows = 9.12MB; Server-Windows server 2008; 
mongodb connection accepted time:- 
browser client localhost - 75000 rows - instantaneous 
browser client remote - 15 rows - instantaneous 
browser client remote - 10000 rows - 6 sec 
browser client remote - 20000 rows - 18 sec 
browser client remote - 40000 rows - 40 sec
browser client remote - 75000 rows - 75 sec 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:07:08.267

我怀疑瓶颈是远程客户端将 9.12mb csv 文件上传到运行 mongo 的服务器所花费的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:24:04.277

问题是网络速度；我被放入了 10Mbps 的带宽，这导致了延迟；当我的网络管理员将我切换回 100Mbps 时，来自远程浏览器客户端的数据加载是即时的！

# python - 如何存储在服务器上，并最有效地访问大词表？

> ID：15175767
> 
> 赞同：0
> 
> 时间：2013-03-02T14:50:47.373
> 
> 标签：python, database, dictionary, tree, store

我的 webapp 需要一个包含大约 200k 单词的单词列表文件，并且我想显示单词，它以某个子字符串开头，例如：'clo'。我应该将它存储在数据库中，然后通过简单的查询访问它吗？我考虑从这个词表创建一棵树并将其存储在缓存中，然后搜索这棵树以找到合适的词，在我看来，这应该是更好的解决方案，尤其是当涉及到每分钟更多的请求时。您将如何以最有效的方式解决此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:26:37.700

我会[试一试](http://en.wikipedia.org/wiki/Trie)；我已经在 C++ 中为 Ruzzle-solver 程序实现了这样的解决方案，我可以确认它*非常*有效 - 尽管在 Python 中你肯定会得到更差的性能，因为 Python 相当于这样的 trie 节点：

```
class AlphaTrie
{
    // Pointers for the next trie nodes
    std::auto_ptr<AlphaTrie> next[26];
    // true if the current node marks the end of a word
    bool final;
    // ...
}; 
```

将包含不那么琐碎的数据结构（例如，访问 Python 列表比直接存储在节点中的“哑”C 数组要慢），因此开销更大。

# regex - 无法解析正则表达式中的空格

> ID：15175768
> 
> 赞同：0
> 
> 时间：2013-03-02T14:50:48.010
> 
> 标签：regex

我想使用正则表达式从以下字符串中提取日期字符串 -`"Mon Feb 25 02:42:27 +0000 2013"`

所以给定一个正则表达式`"\d{3} \s \d{3} \s \d{1,2}"`和字符串`"Mon Feb 25 02:42:27 +0000 2013"`它应该返回`"Mon Feb 25"`。

我知道我在表达空白时做错了什么，有人能发现吗？（我正在使用java）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:53:28.477

1.  您正在使用`\d`字母字符。是为了数字。
2.  您在其中添加了不必要的空格。它们算作文字。

这是一个可以在.NET中工作的：

```
 \w{3}\s\w{3}\s\d{0,2} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:52:30.787

为什么`\d{3}`要解析单词 like 时要说`Mon`？“数字”不是“d”吗？

# python - 在python中使用正则表达式字符串替换使所有双字母等于同一个单词是否是一种快捷方式？

> ID：15175772
> 
> 赞同：0
> 
> 时间：2013-03-02T14:51:22.253
> 
> 标签：python, regex, string

所以本质上，我要问的是，是否有一种方法可以将句子中的所有双字母（aa、bb、cc、dd 等）替换为同一个单词，如“science”，而无需制作字典带有所有双字母并且必须替换它们。是否有使用正则表达式的一行代码可以在 Python 中实现这一点？

如果没有，我想我将有另外 26 行代码来执行此操作，哈哈。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T14:53:28.370

单线，按要求：

```
re.sub(r'([a-z])\1', 'science', inputString) 
```

如果你想`AA`被替换，但不是`aA`：

```
re.sub(r'([a-zA-Z])\1', 'science', inputString) 
```

如果要替换`AA`，请`aA`指定不区分大小写的标志`re.I`：

```
re.sub(r'([a-z])\1', 'science', inputString, flags = re.I) 
```

请注意，不区分大小写标志也会导致反向引用进行不区分大小写的比较。

**解释**

我建议您`[]`在阅读本说明之前阅读文档并掌握正则表达式的基本知识，尤其是字符类。

`(...)`, 后面的第一个字符不是`(`捕获*组*。嗯，是这个规则的一个例外，它也是一个*捕获组*，但是你可以给它一个名字，所以它被称为*命名捕获组*。捕获组将记录与内部模式匹配的部分文本，以便您稍后可以引用它们（在正则表达式或替换字符串中）。`?`*`(?P<name>..)`*

 ***反向引用`\number`，其中`number`为正数，用于检查当前文本是否与捕获组匹配的文本相同。（对于命名的捕获组，您将使用`(?P=name)`相同的功能但不同的语法）。

举`([a-z])\1`个例子。它捕获一个英文字母`[a-z]`（注意`()`它的周围）。紧接着，`\1`将检查下一个字符（或字符序列，在一般情况下）是否与捕获组匹配的字符相同`([a-z])`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T14:54:41.563

根本不需要使用字典，只需匹配双倍的字母：

```
>>> import re
>>> re.sub(r'(?P<letter>[a-z])(?P=letter)', 'science', 'some aa doubled dd letters')
'some science doubled science lescienceers' 
```

该`(?P<name>..)`组由`(?P=letter)`匹配引用，因此仅匹配双倍的字母。这是一种更详细的使用方式`r'([a-z])\1'`，它更能自我记录。***

# bundler - 如何在指南针创建中指定框架版本？

> ID：15175775
> 
> 赞同：4
> 
> 时间：2013-03-02T14:51:38.280
> 
> 标签：bundler, compass-sass, zurb-foundation

我安装了两个 gem 版本的基础框架。我想在创建项目之前指定框架的版本。

```
compass create <project-name> -r zurb-foundation --using foundation 
```

我现在只能使用当前的框架版本创建。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T00:46:10.747

您可以运行多个版本的基础。有一些关于如何做到这一点的文档：

[http://foundation.zurb.com/docs/sass.html](http://foundation.zurb.com/docs/sass.html)

在*运行多个版本下*

我想拥有最新版本的 Foundation 3 以及最新版本的 4。您可以在此处查看可用版本：

[https://rubygems.org/gems/zurb-foundation/versions](https://rubygems.org/gems/zurb-foundation/versions)

我看到 3.2.5 是最新版本。您可以通过运行 gem 来安装它。

`gem install zurb-foundation --version 3.2.5`

现在如果你跑`gem list`

`zurb-foundation (4.0.3, 4.0.2, 3.2.5)`你会在最后看到类似的东西

现在，如果你运行 compass，它会自动使用最新版本，所以我们需要使用 bundler。创建一个新目录并创建一个 Gemfile。

```
mkdir myApp
cd myApp
touch Gemfile 
```

然后使用您选择的编辑器编辑 Gemfile，使其看起来像这样：

```
source "https://rubygems.org"
# Replace 4.0.3 with the version of Foundation you want to use
gem "zurb-foundation", "3.2.5"
gem "compass" 
```

然后运行 ​​bundler 来执行 compass：

`bundle exec compass create . -r zurb-foundation --using foundation`

这将像 compass 通常一样构建所有内容，但使用您指定的特定版本。

# javascript - JavaScript：拆分逗号分隔的字符串但忽略花括号

> ID：15175776
> 
> 赞同：1
> 
> 时间：2013-03-02T14:51:56.237
> 
> 标签：javascript, regex, string, split

我有一个像`[{abc,1},{eee,2},{fff,5,jjj},{kkk,9}]`. 我想用花括号分割这个字符串。输出必须是，

```
abc,1

eee,2

fff,5,jjj

kkk,9 
```

我需要找出元素的数量。对于上面的例子，元素的数量是 4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:01:06.197

```
var a = "[{abc,1},{eee,2},{fff,5,jjj},{kkk,9}]".slice(2, -2).split('},{'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T14:57:06.490

制作一个正则表达式以删除`[`、`]`和字符。`{``}`

```
var str = "[{abc,1},{eee,2},{fff,5},{kkk,9}]";
str = str.replace(/[\[\]{}]/g, ""); 
```

工作示例：http: [//jsfiddle.net/72Kdd/](http://jsfiddle.net/72Kdd/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T15:25:41.627

试试这个

```
var x = '[{abc,1},{eee,2},{fff,5,jjj},{kkk,9}]';
var items = x.match( /\{[^{]*(?=\})/g );
for ( var i in items ) items[ i ] = items[ i ].replace( /^\{/, '' ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T14:55:34.613

你可以试试把牙套换掉。就像是：

```
String.replace("{").replace("}").split(","); 
```

或者，将其转换为 json 对象并遍历其成员。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T15:09:50.407

这就是我相信你想要的。

```
var str = "[{abc,1},{eee,2},{fff,5},{kkk,9}]";

Array.prototype.map.call( // for each of
    str // the string's
        .match(/\{(.*?)\}(?:,(?=\s*{)|]$)/g), // matches to a certain pattern
    function (e) {
        return e.slice(1,-2); // take the middle chars
    }
);
// Array ["abc,1", "eee,2", "fff,5", "kkk,9"] 
```

注意：这将给出`"a{bc,1}"`from`{a{bc,1}}`和 `"a{bc},1"`from因为在检查逗号后`{a{bc},1}`的期待。`(?=\s*{)`

# canvas - 找到最近点的有效方法？

> ID：15175777
> 
> 赞同：0
> 
> 时间：2013-03-02T14:52:03.133
> 
> 标签：canvas, trigonometry

假设我在 2D 画布上有很多点。大概有一种方法可以避免在所有坐标中搜索最接近特定坐标集的坐标（例如，单击鼠标）。在那儿？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T15:51:03.313

最佳算法取决于您希望比较的点数、移动和搜索这些点的频率、重新索引和搜索速度的重要性以及您使用的语言。正如@Sylvanus 指出的那样，可能有语言或库调用可以提供帮助。[四叉树](http://en.wikipedia.org/wiki/Quadtree)很可能是最容易理解的，同时尽可能地高效。@Shiva Kumar 提供了一套出色的综合可能性（尽管还有更多方法。）您应该进行谷歌搜索，以查看您正在编程的语言和环境如何解决问题。

# c# - OAuth 标头 Twitter 1.1 C# 获取推文

> ID：15175782
> 
> 赞同：1
> 
> 时间：2013-03-02T14:52:34.157
> 
> 标签：c#, json, twitter, windows-8, windows-runtime

在 Twitter 弃用他们的 Twitter API 1.0 之后，我尝试了几种方法以使 1.1 API 能够在我的 Windows 8 应用程序中运行。但是，您在下面看到的基本上是我最终得到的结果：

```
 public List<UserTweet.User> jsonFromTwitter;
    private async void fetchTweet()
    {
        var jsonTwitter = new Uri("http://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=stackoverflow&result_type=recent");

        HttpClient client = new HttpClient();

        var request = new HttpRequestMessage(HttpMethod.Get, jsonTwitter);

        var oAuthHeader = "OAuth oauth_consumer_key=\"XXXXX\", oauth_nonce=\"XXXXX\", oauth_signature=\"XXXXX\", oauth_signature_method=\"HMAC-SHA1\", oauth_timestamp=\"1318622958\", oauth_token=\"XXXXX-XXXXXX\", oauth_version=\"1.0\"";

        request.Headers.Add("Authorization", oAuthHeader);

        var response = await client.SendAsync(request);

        var responseString = await response.Content.ReadAsStringAsync();

        jsonFromTwitter = JsonConvert.DeserializeObject<List<UserTweet.User>>(await client.GetStringAsync(responseString));

        //listbox.ItemsSource = jsonFromTwitter;
    } 
```

但是，这不会有多大好处，它主要在几个错误之间切换。其中一个可以在下面看到，另一个是“无法验证用户”或类似的，据我所知，标题基本上有问题。

![出界或](../Images/d0dc11f83ed14c03abe6655ae1d4b85c.png)

有人对如何为此构建有效的 OAuth 标头有任何想法吗？我现在一无所知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T19:22:54.400

对于分配给 Authorization 标头的值，您还需要做很多事情 - 纯文本将不起作用。Twitter OAuth 文档中的以下页面可能会帮助您朝着正确的方向开始。

1.  [Twitter 的文档有一个关于身份验证的部分](https://dev.twitter.com/docs)
2.  [授权请求](https://dev.twitter.com/docs/auth/authorizing-request)
3.  [创建签名](https://dev.twitter.com/docs/auth/creating-signature)

# javascript - 搜索字符串的子部分时如何过滤 JSON？

> ID：15175783
> 
> 赞同：1
> 
> 时间：2013-03-02T14:52:39.130
> 
> 标签：javascript, json, search, filter

我想在客户端过滤一个 JSON 对象。在那之前，我在服务器端做了一个：

`SELECT * FROM table WHERE row1, row2, row3 LIKE %search%`

我想用 JSON 对象在客户端做同样的事情。

例如我可以有这个 JSON 对象：

```
[{'Key1' : 'Value1', 'Key2': 'Value2'}
{'Key3': 'Value3', 'Key4': 'Value4'}] 
```

当我使用过滤器“ue3”时，我希望它返回`[{'Key3': 'Value3', 'Key4': 'Value4'}]`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T15:03:43.757

> *“我想对一组对象进行所有字段搜索，并且只返回在其中一个字段中包含部分搜索字符串的对象。”*

```
var a = [{'Key1' : 'Value1', 'Key2': 'Value2'},
         {'Key3': 'Value3', 'Key4': 'Value4'}];

var b = filterValuePart(a, "ue3"); 
```

* * *

```
function filterValuePart(arr, part) {
    return arr.filter(function(obj) {
        return Object.keys(obj)
                     .some(function(k) { 
                               return obj[k].indexOf(part) !== -1; 
                           });
    });
}); 
```

*垫片，垫片，垫片*

* * *

使其不区分大小写：

```
function filterValuePart(arr, part) {
    part = part.toLowerCase();

    return arr.filter(function(obj) {
        return Object.keys(obj)
                     .some(function(k) { 
                               return obj[k].toLowerCase().indexOf(part) !== -1; 
                           });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T14:54:58.990

假设你有这个 JavaScript 对象：

```
var array = [
   {'Key1' : 'Value1', 'Key2': 'Value2'},
   {'Key3': 'Value3', 'Key4': 'Value4'}
]; 
```

然后你可以找到属性值包含字符串的对象

```
var searched = 'ue3';
var matches = array.filter(function(v) {
     for (key in v) {
        if (v[key].indexOf(searched)!=-1) return true;
     }
     return false;
});
var match = matches.length==0 ? null : matches[0]; 
```

请注意，IE 8 不支持过滤器，但[这篇 MDN 文章提供了 shim](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-05T09:20:26.217

@Ping - 您可以使用 javascript lib DefiantJS ( [http://defiantjs.com](http://defiantjs.com) )。有了它，您可以执行以下操作：

```
var data = [
   {
      "Key1": "Value1",
      "Key2": "Value2"
   },
   {
      "Key3": "Value3",
      "Key4": "Value4"
   }
].
res = JSON.search( data, '//*[contains(., 'ue3')]' );

console.log( res[0].key3 );
// Value3 
```

这是一个工作小提琴：http:
[//jsfiddle.net/hbi99/s8ZVg/](http://jsfiddle.net/hbi99/s8ZVg/)

请注意，引用了 JSON 结构，这与 JSON 一样。DefiantJS 使用称为“搜索”的方法和 XPath 查询（这是一种标准化的查询语言）扩展了全局对象 JSON，它返回数组中的匹配项（如果未找到匹配项，则返回空数组）。

# aspell - Aspell 使用管道将单词添加到个人词典

> ID：15175786
> 
> 赞同：1
> 
> 时间：2013-03-02T14:53:02.377
> 
> 标签：aspell

我正在通过管道使用 Aspell，并且想知道如何在我的个人词典中添加一个新单词。

例如，要检查单词“testt”的拼写，我使用：

```
echo tesst|aspell -a -p .aspell.en_US.pws 
```

[这里](http://aspell.net/man-html/Through-A-Pipe.html#Through-A-Pipe)解释说我可以使用“*word”将这个词添加到我的个人字典中：

```
echo *tesst|aspell -a -p .aspell.en_US.pws 
```

但事实并非如此。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:55:12.177

我无法让 Aspell6 与个人词典一起工作。相反，我必须创建额外的字典，正如我在[http://vouters.dyndns.org/tima/Linux-Windows-Perl-Aspell-Determining_the_country_of_a_Web_query.html](http://vouters.dyndns.org/tima/Linux-Windows-Perl-Aspell-Determining_the_country_of_a_Web_query.html)中解释的那样。否则我会从 Aspell 收到错误消息。如果您阅读上述 URL 中的 Perl 代码，它会使用 Aspell6 的“extra-dicts”功能。这是我对 Aspell 个人词典的唯一解决方法。

仅供参考：Perl 代码的目标是确定 Web 访问者在将其查询输入公司的 Web 搜索引擎时所说的语言。所有查询都存储在 xlsx Excel 文件中。最终目的是确定一家公司的英文书面 Web 文档的翻译在经济上是否值得将其翻译成当地方言。

希望这会对你有所帮助。Philippe Vouters（枫丹白露/法国）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:48:29.167

你有保存你的个人字典吗？

`A line prefixed with # will cause the personal dictionaries to be saved.`

希望这可以帮助

# node.js - 为什么当 url 路径超过两层深度时，Express 会在错误的位置查找静态文件？

> ID：15175788
> 
> 赞同：2
> 
> 时间：2013-03-02T14:53:08.890
> 
> 标签：node.js, express

Express 版本是最新的。

这是 app.js 文件，它被另一个 app.js 文件使用：

```
"use strict";
var express = require('express'), engine = require('ejs-locals');
var path = require('path'), map = require('../../app').map;
var register = require('./routes/register').register;   
var profile = require('./routes/profile').profile;      
var login = require('./routes/login').login;            

var app = module.exports = express();
app.configure(function() {
    app.engine('ejs', engine);
    app.set('views', __dirname + '/views');
    app.set('view engine', 'ejs');
    app.use('/assets', express.static(path.join(__dirname, 'assets')));
});

app.configure('development', function() {
    app.use(express.errorHandler());
});

app.map = map;
app.map(app, {
    '/seller': {
        '/password': {
            get: login.forgot, // Looks in the correct place /assets/css/... etc.
            '/forgot': {
                get: login.forgot // Looks in wrong place /seller/assets/... etc.
            },
            '/reset': {
                get: login.reset
            }
        }
    }
}); 
```

当请求 GET 时`http://localhost:3000/seller/password`，Express 在正确的位置查找静态文件，即***/assets/css/***。

但是当请求 GET 时`http://localhost:3000/seller/password/forgot`，Express 会在错误的位置查找静态文件，即***/seller/assets/css***，它甚至不存在。

这是地图功能。它取自 Express[路线图示例](https://github.com/visionmedia/express/blob/master/examples/route-map/index.js)。

```
function route_map(app, a, route) {
    route = route || '';
    for (var key in a) {
        switch (typeof a[key]) {
            case 'object': // { '/path': { ... }}
            app.map(app, a[key], route + key);
            break;
            case 'function': // get: function(){ ... }
            app[key](route, a[key]);
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T20:50:41.253

请求*错误*文件的东西应该是浏览器，而不是快递，快递是服务器。因此，您的客户端 html 可能是错误的，当您的 URL 有 2 个级别并且您的 css 请求有 2 个向上目录时，它可能会尝试`../../assets/css`正确，`/seller/password/`但是，当您的 URL 是时，`/seller/password/forgot`它会尝试向上 2 级它现在在，`/seller`所以它在`/assets/css`后面附加。

# c++ - type class Line 没有命名类型

> ID：15175792
> 
> 赞同：0
> 
> 时间：2013-03-02T14:53:22.800
> 
> 标签：c++, point

分配时类型有问题，例如我有类型点

```
class point:public pair<int, int>
{
    private: int index;
    public: point(int);

    point(int, int, int);

    int GetIndex();

    float GetDiff(point);

};

point::point(int Index): index(Index) {};

point::point(int x, int y, int Index): index(Index)
{
    first = x;
    second = y; 
}

int point::GetIndex()
{
    return index;
}

float point::GetDiff(point Point)
{
     return pow(pow(Point.first-first,2.0f) + pow(Point.second-second,2.0f),0.5f);
} 
```

它编译正确，并且运行良好 [我认为)] 但是当我想使用它时，我得到一个错误，它是使用这个类的代码

 `````
class Line
{
    public:
    Line();
    point firstPoint;
    point secondPoint;
};
Line::firstPoint = point(0); // i get error, same as on line 41
//and for example

struct Minimal
{
    Minimal();
    Line line();
    void SetFirstPoint(point p)
    {
        line.firstPoint = p;//41 line, tried point(p), same error. 
        UpdateDist();
    }
    void SetSecondPoint(point p)
    {
        line.secondPoint = p;
        UpdateDist();
    }
    void UpdateDist(void)
    {
        dist = line.firstPoint.GetDiff(line.secondPoint);
    }
    float dist;
}; 
```` 

`给我 gcc 编译器的错误在哪里`

 ````
|41|error: 'firstPoint' in 'class Line' does not name a type| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:56:02.610

请注意这一行：

```
Line line(); 
```

不声明类型的成员变量`Line`，而是声明一个`line`返回类型对象的函数`Line`。因此，无论是这段代码：

```
line.firstPoint = p; 
```

意味着如下（这没有什么意义，因为你会修改一个临时的）：

```
line().firstPoint = p; 
```

或者（很可能）上面的声明只是意味着：

```
Line line; // Without parentheses 
```

此外，您在这里收到错误的原因：

```
Line::firstPoint = point(0); 
```

那`firstPoint`不是`static`class 的成员变量吗`Line`？您首先需要一个可以修改其成员的*实例*。`Line``firstPoint```

# performance - 如何从我的服务配置中提高性能？

> ID：15175795
> 
> 赞同：0
> 
> 时间：2013-03-02T14:53:35.450
> 
> 标签：performance, wcf, silverlight, web-config

我的情况是，我有很多服务会在大型 Silverlight 应用程序中被频繁调用。经过一些非常简单的测试后，我们发现事情正在慢慢变慢。我怀疑它来自服务，因为它来自大量呼叫的大量数据。

我想减少调用次数，但没有从头开始完全重新设计，目前这只是部分可能。

我的所有服务都设置为在其服务行为中使用 PerCall，这是我的配置

```
 <services>
        <service name="MyServices.Service">
            <endpoint address="" binding="basicHttpBinding" bindingConfiguration="LargeBuffer" contract="MyServices.Interface.Service" />
        </service>
    </services>
    <bindings>
        <basicHttpBinding>
            <binding 
      name="LargeBuffer" 
      closeTimeout="00:10:00" 
      openTimeout="00:10:00" 
      receiveTimeout="00:10:00" 
      sendTimeout="00:10:00" 
      maxBufferSize="2147483647" 
      maxReceivedMessageSize="2147483647"
      >
      <security mode="None">
        <transport clientCredentialType="None" />
      </security>
                <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
            </binding>
        </basicHttpBinding>
    </bindings> 
```

很多这些服务不需要大的缓冲区绑定，这会影响我的性能吗？

编辑

调用本身正在高效运行，但是一旦我们收到几百个请求，事情就会变得爬行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T19:33:40.780

在性能非常重要的地方，我发现 FastInfoset 编码很有用。noemax 有一个非常好的商业实现（虽然它有免费试用版，但不是免费的）。

[http://www.noemax.com/products/wcfx/index.html](http://www.noemax.com/products/wcfx/index.html)

它还可以让您非常有效地进行良好的压缩。

免责声明 - 我只将它与 Windows 一起使用，而不是 Silverlight。它声称支持silverlight。

# php - 如何输出 MySQL 连接中包含的所有内容？

> ID：15175799
> 
> 赞同：-5
> 
> 时间：2013-03-02T14:54:20.103
> 
> 标签：php, html, mysql, database

到目前为止，我有

```
<?php

$con = mysql_connect("...", "...", "...")
or die(mysql_eror); 
```

但是我怎样才能输出（到 PHP/HTML）该 MySQL 中包含的所有内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T14:56:45.530

如果你的意思是`$con`对象，你可以写：

```
print_r($con); 
```

或者

```
var_dump($con); 
```

或者`<pre>`为了在浏览器中获得更好的可读性：

```
echo "<pre>";  // <pre> is HTML tag that will preserve line breaks in output
var_dump($con);
echo "</pre>"; 
```

或者

```
echo "<pre>";
print_r($con);
echo "</pre>"; 
```

这些函数将打印该对象内的所有属性（变量）（包括具有其结构的数组）。然而，这种对象包含函数（目标编程命名法中的方法），并且它们不能被打印。

要列出`mysql`类型对象内的方法，您必须查看文档。

还有一件非常重要的事情——请阅读[此处的红框（链接）](http://php.net/manual/en/function.mysql-db-query.php)并使用 mysqli_ 或 PDO 代替 mysql_。

# playframework - 连接池找不到合适的驱动程序

> ID：15175803
> 
> 赞同：4
> 
> 时间：2013-03-02T14:55:03.473
> 
> 标签：playframework, playframework-2.1

我有一个 play 2.1 应用程序，我正在使用 junit 进行单元测试。我的测试运行良好并且能够执行他们的数据库操作。显然驱动程序 ( `org.postgresql.Driver`) 已加载。

但是，在两次测试之间，连接池似乎无法访问驱动程序。以下是我日志中典型序列的摘录。有谁知道为什么当应用程序正常时连接池可能无法访问驱动程序？

```
[info] application - QuickWitness Server shutdown...
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 10\. Exception: null
[error] c.j.b.ConnectionHandle - Database access problem. Killing off all remaining connections in the connection pool. SQL State = 08001
[error] c.j.b.PoolWatchThread - Error in trying to obtain a connection. Retrying in 1000ms
java.sql.SQLException: No suitable driver found for jdbc:postgresql:qw
        at java.sql.DriverManager.getConnection(DriverManager.java:602) ~[na:1.6.0_26]
        at java.sql.DriverManager.getConnection(DriverManager.java:185) ~[na:1.6.0_26]
        at com.jolbox.bonecp.BoneCP.obtainRawInternalConnection(BoneCP.java:256) ~[bonecp.jar:0.7.1.RELEASE]
        at com.jolbox.bonecp.ConnectionHandle.obtainInternalConnection(ConnectionHandle.java:211) ~[bonecp.jar:0.7.1.RELEASE]
        at com.jolbox.bonecp.ConnectionHandle.<init>(ConnectionHandle.java:170) ~[bonecp.jar:0.7.1.RELEASE]
        at com.jolbox.bonecp.PoolWatchThread.fillConnections(PoolWatchThread.java:101) [bonecp.jar:0.7.1.RELEASE]
[info] application - QuickWitness Server has started
[debug] application - entering ensureTriggersAndStoredProceduresAreInstalled()
[debug] application - exiting ensureTriggersAndStoredProceduresAreInstalled()
[info] application - logging initialized
[info] application - Register user request from localhost:12345
[info] application - QuickWitness Server shutdown...
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 10\. Exception: null
[error] c.j.b.ConnectionHandle - Database access problem. Killing off all remaining connections in the connection pool. SQL State = 08001
[error] c.j.b.PoolWatchThread - Error in trying to obtain a connection. Retrying in 1000ms
java.sql.SQLException: No suitable driver found for jdbc:postgresql:qw
        at java.sql.DriverManager.getConnection(DriverManager.java:602) ~[na:1.6.0_26]
        at java.sql.DriverManager.getConnection(DriverManager.java:185) ~[na:1.6.0_26]
        at com.jolbox.bonecp.BoneCP.obtainRawInternalConnection(BoneCP.java:256) ~[bonecp.jar:0.7.1.RELEASE]
        at com.jolbox.bonecp.ConnectionHandle.obtainInternalConnection(ConnectionHandle.java:211) ~[bonecp.jar:0.7.1.RELEASE]
        at com.jolbox.bonecp.ConnectionHandle.<init>(ConnectionHandle.java:170) ~[bonecp.jar:0.7.1.RELEASE]
        at com.jolbox.bonecp.PoolWatchThread.fillConnections(PoolWatchThread.java:101) [bonecp.jar:0.7.1.RELEASE]
[info] application - QuickWitness Server has started 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:31:53.863

我有同样的问题。就我而言，问题发生是因为那里没有足够的数据库连接。似乎 play 不会关闭块末尾的连接。文档讲述的是另一个故事，所以也许这是一个错误？

解决方案 1：您可以通过更改（[http://www.playframework.com/documentation/2.1.0/SettingsJDBC](http://www.playframework.com/documentation/2.1.0/SettingsJDBC)）增加 application.conf 中的连接

```
db.default.partitionCount=2
db.default.maxConnectionsPerPartition=5
db.default.minConnectionsPerPartition=5 
```

解决方案 2：您可以在使用后关闭连接（[http://www.playframework.com/documentation/2.0/ScalaDatabase](http://www.playframework.com/documentation/2.0/ScalaDatabase)）

```
DB.withConnection { conn =>   
  // do whatever you need with the connection   
  conn.close()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T15:01:24.637

我对 squeryl 有同样的问题。我的代码似乎没有任何问题。我认为会发生这种情况：由于单元测试，我的应用程序连续多次启动和停止。Play 在停止应用程序时关闭连接。但是，如果您的机器足够快，它可以在应用程序启动时请求新连接，然后再关闭上次运行中使用的连接。这只是时间问题。您可以通过增加数据库连接的最大数量或在 Global 的 onStop 结束时简单地休眠一会儿来解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T00:53:13.850

我假设您已在 /Project/lib 文件夹中正确放置了所需的驱动程序

1）检查application.conf中的数据库url配置。

2）在application.conf中添加“evolutionplugin=disabled”

3）参考[http://digitalsanctum.com/2012/05/30/play-framework-2-tutorial-database-access/](http://digitalsanctum.com/2012/05/30/play-framework-2-tutorial-database-access/)，你在build.scala中添加依赖了吗？

谢谢，希望能帮上忙~~

# java - 跑了无法解决

> ID：15175808
> 
> 赞同：1
> 
> 时间：2013-03-02T14:55:21.440
> 
> 标签：java

我正在尝试编写一个代码，当我运行应用程序时，会有一个随机图像，当我点击它时，它会显示一个不同的随机图像，但我得到错误，我只有 1 天的经验和 Java 语言。

请帮忙。

```
 @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            int[] photos={R.drawable.img1, R.drawable.img2,R.drawable.img3,R.drawable.img4};

            ImageView image=(ImageView)findViewById(R.id.imageview1);

            Random rnd=new Random();
★1         int i=ran.nextInt(photos.length);
            image.setImageResource(photos[i]);
            image.setOnClickListener(new View.OnClickListener()
            {
                public void onClick(View v)
                {
★2               int k=ran.nextInt(photos.length);
★3               image.setImageResource(photos[k]);
                }
            }
            );

        } 
```

我添加了 ★ 来告诉你错误在哪里。

★1 “ran 无法解析” ★2 “不能在不同方法定义的内部类中引用非 final 变量 photos” “ran 无法解析” ★3 “不能在 an 内部类中引用 non-final 变量 image在不同方法中定义的内部类”“不能在不同方法中定义的内部类中引用非最终变量照片”

我试过刷新，也做了ctrl+shift+o，不知道问题出在哪里...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T14:57:27.980

1）您已经声明了一个变量`rnd`，但是您试图将其称为`ran`. 你需要保持一致。

2 和 3) 两者`photos`和`rnd`都需要声明为`final`变量，因为您在匿名内部类中使用它们。

在匿名内部类中使用局部变量时，它们是最终的业务基本上是因为匿名内部类的工作方式。基本上，当您构造一个实例时，它将局部变量值传递给匿名内部类的（生成的）构造函数，该构造函数保留这些变量的副本以供以后使用。通过将变量限制为`final`一个，它避免了变量可以在方法或匿名内部类中更改的情况，而这些更改在其他上下文中看不到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T14:58:52.207

1）我猜你的意思是 `rnd.nextInt(...` （'rnd'，而不是'ran'）

2）将`final`修饰符添加到`photos`and`rnd`变量以解决此问题：

```
final int[] photos={R.drawable.img1, R.drawable.img2,R.drawable.img3,R.drawable.img4}; 
```

3）在图像视图图像上相同：

```
final ImageView image=(ImageView)findViewById(R.id.imageview1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T14:57:15.587

改变

```
 Random rnd=new Random(); 
```

到

```
 final Random ran=new Random(); 
```

还有，改变

```
 int[] photos=...;
        ImageView image=...; 
```

到

```
 final int[] photos=...;
        final ImageView image=...; 
```

# ios - 如何检查后台是否有新电子邮件 - ios

> ID：15175810
> 
> 赞同：0
> 
> 时间：2013-03-02T14:55:34.673
> 
> 标签：ios, background, notifications

当我的应用程序在后台运行时，如何检查是否有新电子邮件并向用户显示警报？为了在应用程序未激活时推送通知，我必须设置通知的“显示”时间，但可以随时收到电子邮件......我需要在我的应用程序未激活时检查电子邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T21:44:38.890

当您的服务器检测到有新消息时，您应该使用[Apple 推送通知服务](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)发送推送消息。您手机上的应用程序不应该这样做，因为它会很快耗尽电池电量。

# c++ - C ++ 11：如何检查类型是否是“异构”非类型参数的给定类模板的实例化？

> ID：15175829
> 
> 赞同：7
> 
> 时间：2013-03-02T14:57:34.500
> 
> 标签：c++, templates, c++11, variadic-templates, template-meta-programming

我知道检查类型是否是采用**TYPE**参数的类模板的实例化很简单，如下所述：[如何检查类型是否是给定类模板的实例化？](https://stackoverflow.com/questions/11251376/how-can-i-check-if-a-type-is-an-instantiation-of-a-given-class-template)

但是......是否有可能有一个可变参数“is_instantiation_of__ntp<...>”（NTP 代表非类型参数），它可以接受具有任意数量的*异构* **非类型**参数的模板？例如：

```
template<char*, bool, long, size_t, char>
struct many_hetero_nontype_params_example {};

char HELLO_WORLD[] = "hello world";
using ManyHeteroNontypeParamsEx = many_hetero_nontype_params_example<HELLO_WORLD, false, -16, 777, 'x'>; 
```

并且可以按如下方式使用它：

```
is_instantiation_of__ntp<char*, bool, long, size_t, char, many_hetero_nontype_params_example, ManyHeteroNontypeParamsEx>::value 
```

我知道这对于非类型参数列表可以很容易地实现，这些参数列表是 1）“同质”（相同类型的值），或 2）少量参数（这样非可变解决方案是实用的）。我什至写了一个测试用例来演示这些特殊情况（使用 gcc 4.7.0 编译），以便更好地了解我在说什么：

```
namespace test__is_instantiation_of__
{
    // is_instantiation_of
    template< template<typename...> class Template, typename T >
    struct is_instantiation_of : std::false_type {};
    template< template<typename...> class Template, typename... Args >
    struct is_instantiation_of< Template, Template<Args...> > : std::true_type {};

    // is_instantiation_of__homogeneous_nontype_params__
    template< typename NTP, template<NTP...> class Template, typename T >
    struct is_instantiation_of__homogeneous_nontype_params__ : std::false_type {};
    template< typename NTP, template<NTP...> class Template, NTP... Args >
    struct is_instantiation_of__homogeneous_nontype_params__< NTP, Template, Template<Args...> > : std::true_type {};

    // is_instantiation_of__fixedcount_nontype_params__
    template< typename NTP1, typename NTP2, template<NTP1, NTP2> class Template, typename T >
    struct is_instantiation_of__fixedcount_nontype_params__ : std::false_type {};
    template< typename NTP1, typename NTP2, template<NTP1, NTP2> class Template, NTP1 v1, NTP2 v2 >
    struct is_instantiation_of__fixedcount_nontype_params__< NTP1, NTP2, Template, Template<v1, v2> > : std::true_type {};

    // type_params_example
    template<typename T1, typename T2, typename T3>
    struct type_params_example {};

    // homogeneous_nontype_params_example
    template<bool B1, bool B2, bool B3, bool B4>
    struct homogeneous_nontype_params_example {};

    // fixedcount_nontype_params_example
    template<long L, char C>
    struct fixedcount_nontype_params_example {};

    using /*.........*/ TypeParamsEx = /*..........*/ type_params_example<std::string, std::tuple<long, void*>, double>;
    using  HomogenousNontypeParamsEx = homogeneous_nontype_params_example<true, false, true, false>;
    using  FixedCountNontypeParamsEx = fixedcount_nontype_params_example<777, 'x'>;

    void run()
    {
        using std::cout;
        using std::endl;

        if ( is_instantiation_of<type_params_example, TypeParamsEx>::value ) {
            cout << "[TypeParamsEx] specializes [type_params_example]" << endl;
        }
        if ( is_instantiation_of<type_params_example, HomogenousNontypeParamsEx>::value ) {
            cout << "[HomogenousNontypeParamsEx] specializes [type_params_example]" << endl;
        }
        if ( is_instantiation_of<type_params_example, FixedCountNontypeParamsEx>::value ) {
            cout << "[FixedCountNontypeParamsEx] specializes [type_params_example]" << endl;
        }

        if ( is_instantiation_of__homogeneous_nontype_params__<bool, homogeneous_nontype_params_example, TypeParamsEx>::value ) {
            cout << "[TypeParamsEx] specializes [homogeneous_nontype_params_example]" << endl;
        }
        if ( is_instantiation_of__homogeneous_nontype_params__<bool, homogeneous_nontype_params_example, HomogenousNontypeParamsEx>::value ) {
            cout << "[HomogenousNontypeParamsEx] specializes [homogeneous_nontype_params_example]" << endl;
        }
        if ( is_instantiation_of__homogeneous_nontype_params__<bool, homogeneous_nontype_params_example, FixedCountNontypeParamsEx>::value ) {
            cout << "[FixedCountNontypeParamsEx] specializes [homogeneous_nontype_params_example]" << endl;
        }

        if ( is_instantiation_of__fixedcount_nontype_params__<long, char, fixedcount_nontype_params_example, TypeParamsEx>::value ) {
            cout << "[TypeParamsEx] specializes [fixedcount_nontype_params_example]" << endl;
        }
        if ( is_instantiation_of__fixedcount_nontype_params__<long, char, fixedcount_nontype_params_example, HomogenousNontypeParamsEx>::value ) {
            cout << "[HomogenousNontypeParamsEx] specializes [fixedcount_nontype_params_example]" << endl;
        }
        if ( is_instantiation_of__fixedcount_nontype_params__<long, char, fixedcount_nontype_params_example, FixedCountNontypeParamsEx>::value ) {
            cout << "[FixedCountNontypeParamsEx] specializes [fixedcount_nontype_params_example]" << endl;
        }
    }
} 
```

正如预期的那样，您得到的输出是：

```
[TypeParamsEx] specializes [type_params_example]
[HomeogenousNonTypeParamsEx] specializes [homogeneous_nontype_params_example]
[FixedCountNonTypeParamsEx] specializes [fixedcount_nontype_params_example] 
```

问题是这些模板都不适用于 many_hetero_nontype_params_example（上图）。即：一个单一的、可变的“is_instantiation_of__ntp”，它将接受具有任意数量的异构非类型参数的模板。

我认为如果不要求主模板在模板参数列表的末尾有参数包，那么这将很容易实现。或者是否可以使用包装结构/嵌套结构方法。这是我的（失败的）尝试：

```
namespace test__is_instantiation_of__nontypes__
{
    template<char*, bool, long, size_t, char>
    struct many_hetero_nontype_params_example {};

    char HELLO_WORLD[] = "hello world";
    using ManyHeteroNontypeParamsEx = many_hetero_nontype_params_example<HELLO_WORLD, false, -16, 777, 'x'>;

    /*
     * is_instantiation_of__nontypes_v1__ (version 1)
     * if uncommented, syntax error as expected ...
     *   error: parameter pack 'NTPs' must be at the end of the template parameter list
     *   error: parameter pack argument 'NTPs ...' must be at the end of the template argument list
     */
    //template< typename... NTPs, template<NTPs...> class Template, typename T >
    //struct is_instantiation_of__nontypes_v1__ : std::true_type {};
    //template< typename... NTPs, template<NTPs...> class Template, NTPs... NonTypeArgs >
    //struct is_instantiation_of__nontypes_v1__< NTPs..., Template, Template<NonTypeArgs...> > : std::true_type {};

    /*
     * is_instantiation_of__nontypes_v2__ (version 2)
     * no syntax error (but see instantiation errors below)
     */
    template<typename... NTPs>
    struct is_instantiation_of__nontypes_v2__
    {
        template< template<NTPs...> class Template, typename T >
        struct impl : std::false_type {};

        template< template<NTPs...> class Template, NTPs... NonTypeArgs >
        struct impl< Template, Template<NonTypeArgs...> > : std::true_type {};
    };

    void run()
    {
        /*
         * uncommented since "v1" template has syntax error, but this is how it would be used ...
         */
        //if ( is_instantiation_of__nontypes_v1__<char*, bool, long, size_t, char, many_hetero_nontype_params_example, ManyHeteroNontypeParamsEx>::value ) {
        //  std::cout << "yes" << std::endl;
        //}

        /*
         * "v2" template has no syntax error, but the following attempt to use it results in these errors ...
         *
         *   error: type/value mismatch at argument 1 in template parameter list for 'template<class ... NTPs> template<template<template<NTPs ...<anonymous> > class Template, class T> template<class ... NTPs> template<NTPs ...<anonymous> > class Template, class T> struct is_instantiation_of__nontypes_v2__<NTPs>::impl'
         *   error: expected a template of type 'template<class ... NTPs> template<NTPs ...<anonymous> > class Template', got 'template<char* <anonymous>, bool <anonymous>, long int <anonymous>, long unsigned int <anonymous>, char <anonymous> > struct many_hetero_nontype_params_example'
         */
        //if ( is_instantiation_of__nontypes_v2__<char*, bool, long, size_t, char>::impl<many_hetero_nontype_params_example, ManyHeteroNontypeParamsEx>::value ) {
        //  std::cout << "yes" << std::endl;
        //}
    }
} 
```

...

**是否有可能为此提供可变参数解决方案？**

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T15:04:22.883

您可能遇到了编译器错误。我试图将其简化为一个更简单的示例：

```
#include <iostream>

template<bool, char> struct A { };

template<typename... Ts>
struct test
{  
    template<typename T>
    struct impl : std::false_type {};

    template<Ts... Args>
    struct impl<A<Args...>> : std::true_type {};
};

int main()
{
    using IA = A<false, 'x'>;
    std::cout << ((test<bool, char>::impl<IA>::value) ? "Y" : "N");
} 
```

GCC 4.7.2 对此进行编译，但编译后的程序[会打印错误的输出](http://liveworkspace.org/code/3SpAkW%24115)( `N`)。另一方面，Clang 3.2 做到了这一点，编译后的程序[打印出正确的输出](http://liveworkspace.org/code/3SpAkW%24118)( `Y`)。

这是上述程序的一个稍作修改的版本，其中`test`类模板与您的类模板非常相似`is_instantiation_of__nontypes_v2__`：

```
#include <iostream>

template<bool, char> struct A {};

template<typename... Ts>
struct test
{  
    template<template<Ts...> class TT, typename T>
    struct impl : std::false_type {};

    template<template<Ts...> class TT, Ts... Args>
    struct impl<TT, TT<Args...>> : std::true_type {};
};

int main()
{
    using IA = A<false, 'x'>;
    std::cout << ((test<bool, char>::impl<A, IA>::value) ? "Y" : "N");
} 
```

当 Clang 编译它并且编译的程序打印正确的输出 ( `Y`) 时，GCC 发出以下编译错误：

> 预期类型的​​模板`'template<class ... Ts> template<Ts ...<anonymous> > class TT'`，得到`'template<bool <anonymous>, char <anonymous> > struct A'`。

看起来 GCC 不承认第一个模板模板参数应该有一个模板参数列表，该列表由`Ts`. 因此，在我看来，这是 GCC 的一个错误。

# ruby - Ruby 中的模块函数定义

> ID：15175833
> 
> 赞同：2
> 
> 时间：2013-03-02T14:57:52.473
> 
> 标签：ruby

我正在学习 1.9.3 版的 Ruby，遵循 LearnRubyTheHardWay 上的教程。

似乎当您在 a 中定义函数时`Module`，必须在函数名称前加上模块名称，如下所示：

```
module MyStuff
    def MyStuff.apple()
        puts "I AM APPLES!"
    end
end

MyStuff.apple() 
```

为什么你不能这样做：

```
module MyStuff
    def apple()
        puts "I AM APPLES!"
    end
end

MyStuff.apple() # this does not work 
```

在 Ruby 文档中，有[一个类似上述示例的示例](http://www.ruby-doc.org/core-1.9.3/Module.html)。

我怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T15:07:15.193

模块是将方法、类和常量组合在一起的一种方式。模块给您带来两大好处： 模块提供命名空间并防止名称冲突。模块实现了 mixin 工具。

取自（[http://www.tutorialspoint.com/ruby/ruby_modules.htm](http://www.tutorialspoint.com/ruby/ruby_modules.htm)）

您可以改为：

```
module MyStuff
    def self.apple
        puts "I AM APPLES!"
    end
end

MyStuff.apple # "I AM APPLES!" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T15:07:12.217

在第一种情况下，您创建了一个类级别的方法，这意味着您可以直接在类/模块上调用它：`MyStuff.apple`。在第二个中，您创建了一个实例级方法，这意味着您需要一个实例来访问该方法：

```
class MyKlazz
    include MyStuff
end

obj=MyKlazz.new
obj.apple 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T15:12:27.030

那是因为您在 MyStuff 上定义`apple`为*实例方法*，并且由于 MyStuff 不是其自身的实例，因此您无法调用`apple`它。

为了打电话`apple`，你有几个选择：

*   `MyStuff`如您所见，明确定义方法：

    ```
    module MyStuff
      def MyStuff.apple
        puts "I AM APPLES!"
      end
    end

    MyStuff.apple  #=> "I AM APPLES!" 
    ```

    但你不必*这么*明确，可以使用`self`代替`MyStuff`：

    ```
    module MyStuff
      def self.apple
        puts "I AM APPLES!"
      end
    end

    MyStuff.apple  #=> "I AM APPLES!" 
    ```

*   您可以`include`MyStuff 进入一个类并在该类的实例上调用该方法：

    ```
    module MyStuff
      def apple
        puts "I AM APPLES!"
      end
    end

    class Foo; include MyStuff; end

    Foo.new.apple  #=> "I AM APPLES!" 
    ```

*   您可以将`extend`MyStuff 放入一个类或模块中——这包括 MyStuff 本身：

    ```
    module MyStuff
      extend self

      def apple
        puts "I AM APPLES!"
      end
    end

    MyStuff.apple  #=> "I AM APPLES!"

    module OtherStuff; extend MyStuff; end

    OtherStuff.apple  #=> "I AM APPLES!" 
    ```

这与类的工作方式非常相似。例如，这也不起作用：

```
class Foo
  def bar; 42; end
end

Foo.bar  #=> #<NoMethodError: undefined method `bar' for Foo:Class> 
```

因为`bar`又是一个实例方法，所以你需要创建一个实例或创建`bar`一个类方法：

```
class Foo
  def bar; 42; end
  def self.bar; 24; end
end

Foo.bar      #=> 24
Foo.new.bar  #=> 42 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T15:10:04.277

第一个例子...

```
module MyStuff
  def MyStuff.apple()
    puts "I AM APPLES!"
  end
end 
```

...之所以有效，是因为您在模块上而不是在模块中定义方法，这就是您对第二个示例所做的事情：

```
module MyStuff
  def apple()
    puts "I AM APPLES!"
  end
end 
```

这类似于如果你有一堂课并做了同样的事情：

```
class Conrad
  def Conrad.apple()
    puts "I AM APPLES"
  end
end 
```

您也可以使用`def self.apple()`，这意味着相同：

```
class Conrad
  def self.apple()
    puts "I AM APPLES"
  end
end 
```

在这两种情况下，您都是在类本身而不是该类的实例上定义一个方法。

在模块的情况下，您定义了一个方法，如果您扩展了该类（即`Conrad.apple`），则该方法可用于该类，或者如果您包含该类的实例（即），则该方法可用于该类`Conrad.new.apple`。

# android - 显示不同的记录 sqlite android

> ID：15175836
> 
> 赞同：0
> 
> 时间：2013-03-02T14:58:12.193
> 
> 标签：android, sqlite

即使我将 distinct 设置为 true，我的光标也会返回两次记录：

**return myDataBase.query(true, DB_TABLE, new String[] {"rowid as _id", KEY_CONDITIONS}, builder.toString(), 症状, null, null, null, null);**

**供参考，**

```
 public Cursor getData(String[] symptoms) {
    String where = KEY_SYMPTOMS + "= ?";
    String orStr = " OR "; 

    StringBuilder builder = new StringBuilder(where);
    for(int i = 1; i < symptoms.length; i++)
        builder.append(orStr).append(where);

    return myDataBase.query(true, DB_TABLE, new String[] 
            {"rowid as _id", KEY_CONDITIONS}, builder.toString(), symptoms, null, null, null, null);

} 
```

或者我尝试更改为 rawQuery

```
 return myDataBase.rawQuery("SELECT DISTINCT " + KEY_CONDITIONS + " FROM " 
    + DB_TABLE + " " + builder.toString() + symptoms.toString(), null); 
```

我的 LogCat 说：

```
 03-02 22:57:02.634: E/AndroidRuntime(333): FATAL EXCEPTION: main
  03-02 22:57:02.634: E/AndroidRuntime(333): android.database.sqlite.SQLiteException: near "=": syntax error: , while compiling: SELECT DISTINCT conditions FROM tblSymptoms symptoms= ? OR symptoms= ?[Ljava.lang.String;@405550f8 
```

请帮助我确定这里似乎缺少什么。任何帮助都非常感谢。

![在此处输入图像描述](../Images/b1c09e928138b01fb00ccf5dccf6a76e.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T15:03:36.790

**解决方案**
您需要`DISTINCT`条件，但 Android 需要`_id`有问题的列，因为您不能混合和匹配：~~`SELECT _id, DISTINCT condition...`~~。但是，您可以改用该`GROUP BY`子句：

```
return myDataBase.query(DB_TABLE, new String[] {"rowid as _id", KEY_CONDITIONS}, 
        builder.toString(), symptoms, KEY_CONDITIONS, null, null); 
```

* * *

**说明**
此查询：

```
return myDataBase.rawQuery("SELECT DISTINCT " + KEY_CONDITIONS + " FROM " 
    + DB_TABLE + " " + builder.toString() + symptoms.toString(), null); 
```

由于您传入`String[] symptoms`了错误的参数而失败，请尝试：

```
return myDataBase.rawQuery("SELECT DISTINCT " + KEY_CONDITIONS + " FROM " 
    + DB_TABLE + " " + builder.toString(), symptoms); 
```

* * *

这个查询：

```
return myDataBase.query(true, DB_TABLE, new String[] {"rowid as _id", KEY_CONDITIONS}, builder.toString(), symptoms, null, null, null, null); 
```

失败，因为`DISTINCT`正在查看id 和 condition 列*。*它相当于：`SELECT DISTINCT(_id, conditions) ...`显然，您只想要不同的条件......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-18T07:55:39.717

你有两个通用选项两个做这个任务 **使用行查询**和**使用 DISTINCT 关键字**

对于使用**行查询**，您可以直接使用 mr.Sam 的功能，对于使用 DISTINCT 关键字，您可以使用

```
public Cursor query (boolean distinct, String table, String[] columns, 
                 String selection, String[] selectionArgs, String groupBy,
                 String having, String orderBy, String limit) 
```

因为查询 stucher 是`retuns`这样的：

```
query(false, table, columns, selection, selectionArgs, groupBy,
            having, orderBy, null /* limit */); 
```

在此代码中，第一个 arg 是 for`DISTINCT`所以将其提供为`true`. 所以你`query`会喜欢这样

```
Cursor cursor = db.query(true, YOUR_TABLE_NAME, new String[] { COLUMN1 ,COLUMN2, COLUMN_NAME_3 }, null, null, COLUMN2, null, null, null); 
```

基本上，如果**DISTINCT 关键字**出现一次以上，则仅返回一次列名。

# quickbooks - 为什么 Quickbooks Web 连接器不调用 closeConnection？

> ID：15175837
> 
> 赞同：3
> 
> 时间：2013-03-02T14:58:41.020
> 
> 标签：quickbooks, qbwc

我有一个 Quickbooks Web 连接器 (QBWC) 接口的工作原型实现。一切都按预期工作，*除了*closeConnection 方法大部分时间都没有被调用。

# 预期行为

[QuickBooks Web 连接器程序员指南](https://member.developer.intuit.com/qbSDK-current/doc/PDF/QBWC_proguide.pdf)规定如下（第 21 页）：

> 当 QBWC 得到这个字符串数组时会发生什么？如果字符串数组的第二个成员包含“none”或“nvu”，QBWC 将显示一条消息，调用 closeConnection 并停止会话。

此外，指南在“clientVersion 和身份验证回调”插图中指出了相同的信息（图 2-2，第 20 页）：

> 调用**authenticate**
> 如果返回为“none”或“nvu”，
> 显示消息，调用**closeConnection**并停止

# 实际行为

当 authenticate 方法返回值“none”时，将调用这些（并且只有这些）Web 方法（按列出的顺序）：

*   服务器版本
*   客户端版本
*   认证

请注意，这仅适用于没有可用于 QBWC/Quickbooks 的工作时。当有*工作*时，authenticate web 方法返回一个空字符串，QBWC 随后调用以下 web 方法：

*   发送请求Xml
*   接收响应Xml
*   关闭连接

编辑 1：在强制 clientVersion web 方法返回“E”结果后，它会停止更新过程，如程序员指南中所述，但在这些情况下也不会调用 closeConnection web 方法。有趣的是，QBWC在 clientVersion 返回“E”结果*后仍然调用 serverVersion Web 方法。*

# 故障排除工作

*   验证（通过跟踪）字符串数组的第二个成员确实包含值“none”。但是，该会话不会触发 closeConnection 回调。
*   仔细检查了 QBWC 客户端日志 (QWCLog.txt)，发现没有提及 closeConnection 被调用，因此没有与此类调用相关的错误。
*   验证用于 closeConnection 的方法代码与程序员指南（第 68 页）中的示例相同。

# 支持信息

对于它的价值，这里有一些实现的细节。

*   ASP.Net 3.5 (c#)
*   QBWC 2.0.0.139

# python - 为什么 Entry.insert 在没有事件的情况下执行？

> ID：15175838
> 
> 赞同：0
> 
> 时间：2013-03-02T14:58:46.263
> 
> 标签：python, tkinter, insert, tkinter-entry

我正在使用 python 3.2 和 Tkinter libery 编写一个简单的计算器。当我运行我的程序时，它会打印文本字段编号，这些编号仅在事件发生后才需要打印。我做错了什么？

```
from tkinter import Button, Entry, Tk, Widget
from calculate import calculate

def output():
    equation = text.get()
    result = calculate(equation)
    if result != False:
        text.delete(0, 100)
        text.insert(0, result)
    else:
        text.delete(0, 100)
        text.insert(0, 'Error')

def insert_num(i):
    text.insert(100, i)

root=Tk()
root.config(width=265, height = 320)

text=Entry(root, font='Arial 14')
text.config(width=22)
text.place(x=10, y=20)

class Num(Widget):
    def __init__(self, root, text, font, width, height, x, y, command):
        self.widget = Button(root, text=text, font=font, command=command)
        self.widget.config(width=width, height=height)
        self.widget.place(x=x, y=y)

font = 'Arial 14'
plus = Num(root, '+', font, 3, 1, 10, 50+10, None)
minus = Num(root, '-', font, 3, 1, 10, 100+10, None)
divide = Num(root, '/', font, 3, 1, 10, 150+10, None)
multiple = Num(root, '*', font, 3, 1, 10, 200+10, None)

list = ['','','','','','','','','']
x = 50+10; y = 100+10
for i in range(0, 9):
    list[i] = Button(root, text=i+1, font='Arial 14')
    list[i].bind('<Button-1>', insert_num(i+1))
    list[i].config(width = 3, height = 1)
    list[i].place(x=x, y=y)
    x = x + 50
    if i == 2 or i == 5:
        x = 50+10; y = y + 40+10

root.mainloop() 
```

输出：

```
123456789 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:33:52.080

的第二个参数`list[i].bind()`应该是一个函数，而不是对函数的调用。随着`insert_num(i+1)`您调用函数，并绑定`None`到 click 事件。替换`insert_num`为：

```
def insert_num(i):
    return lambda event: text.insert(100, i) 
```

# requirejs - RequireJs优化模板脚本

> ID：15175840
> 
> 赞同：2
> 
> 时间：2013-03-02T14:58:56.410
> 
> 标签：requirejs, playframework-2.1

我有一些客户端 javascript 和 scala 页面模板。

我必须在模板中初始化一些 js 东西（通过使用 scala 提供给模板的参数）。

但是现在我们尝试迁移到 requirejs 并且我们不想使用全局变量（比如`window.funnyVar`）并且我们想要在模块中做所有 js 的东西。

因此，存在以下问题：如何通过提供给 scala 模板的参数来初始化模块中的内容。

我按以下方式进行。在模板代码中，我定义了新模块并将所有参数传递给它：

```
define("templateModule", ["lib/helper"],
  function(helper){
    helper.init(@param);
    return {};
});
```

在主 js 文件中，我在初始化后执行所有其他操作：

```
require(["lib/helper", "templateModule"],
    function(helper, tpl) {
      // do stuff
    }
);
```

在我运行 prod 模式之前它工作正常。

在 prod 模式下，我有以下错误：

```
JavaException: java.io.FileNotFoundException: /home/gkalabin/app/target/scala-2.10/classes/public/javascripts-min/templateModule.js (No such file or directory)
In module tree:
    main 
```

我该如何解决这个问题？

**upd** 从模块 ( `define`) 切换到`require`. 但可能还有其他解决方案吗？

感谢您的关注。祝你有美好的一天！

# ios6 - 将 iOS 6 Twitter 和 Facebook 共享功能与响应式网站集成

> ID：15175843
> 
> 赞同：0
> 
> 时间：2013-03-02T14:59:11.843
> 
> 标签：ios6, responsive-design, social-media

我正在开发一个响应式网站。目前，当用户单击“Tweet”或“Like”按钮时，它会将用户带到另一个页面以完成这些步骤。我想知道是否有一种方法可以集成 iOS 6 的内置 Twitter 和 Facebook 功能，而不是将用户引导到另一个单独的页面。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:51:47.580

在撰写本文时，无法访问 iOS6 上可用的 Share Widget。

资料来源：[Apple Developer Search 上的搜索](https://developer.apple.com/search/index.php?q=share%20widget)

# module - Openerp 7.0 中自定义模块的路径

> ID：15175845
> 
> 赞同：0
> 
> 时间：2013-03-02T14:59:37.680
> 
> 标签：module, customization, openerp

我的 OpenERP 7.0 安装在`d:\openERP 7.0`Windows 7 上。我已将自定义模块复制到`D:\OpenERP 7.0\Server\server\openerp\addons`，但是当我更新模块列表时，我无法看到我的自定义模块。

我已经尝试使用过滤器“额外”和“未安装”的高级搜索选项，但仍然没有成功。

```
<data>

    <record model="ir.ui.view" id="notebook_tree_view">

        <field name="name">notebook.tree</field>

        <field name="model">notebook</field>

        <field name="type">tree</field>

        <field name="arch" type="xml">

            <tree string="Notebook">

                <field name="title"/>

                <field name="note"/>

                <field name="note_date"/>

            </tree>

        </field>

    </record>

    <record model="ir.ui.view" id="notebook_form_view">

        <field name="name">notebook.form</field>

        <field name="model">notebook</field>

        <field name="type">form</field>

        <field name="arch" type="xml">

            <form string="Notebook">

                <field name="title"/>

                <field name="note"/>

                <field name="note_date"/>

            </form>

        </field>

    </record>

    <record model="ir.actions.act_window" id="action_notebook_form">

        <field name="name">notebook</field>

        <field name="res_model">notebook</field>

    </record>

    <menuitem id="notebook_menu"
        name="Notebook"
        icon="terp-project"
    />

    <menuitem id="notebook_menu_mainform"
        name="Notes"
        action="action_notebook_form"
        parent="notebook_menu"
    />

</data> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:21:54.913

尝试以这种方式调试：

1）安装另一个插件模块，看看你是否可以这样做。如果你不能这样做，那么你可能把它放在错误的目录中。

您应该有 3 个主管，其中一个用于服务器、插件和网络

2）如果上述进展顺利，那么它的模块有问题。仔细检查您的*openerp* .py 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:18:17.200

对于表单视图，您需要添加一个属性`version='7.0'` 例如

```
<record model="ir.ui.view" id="notebook_form_view">
    <field name="name">notebook.form</field>
    <field name="model">notebook</field>
    <field name="arch" type="xml">
    <form string="Notebook" version="7.0">
        <field name="title"/>
        <field name="note"/>
        <field name="note_date"/>
    </form>
    </field>
</record> 
```

也不要在旧的 gtk 客户端中测试模块。openerp 7 没有 gtk 客户端

# sql - 如何处理从数据库中选择动态属性

> ID：15175856
> 
> 赞同：1
> 
> 时间：2013-03-02T15:00:23.077
> 
> 标签：sql, sql-server, tsql, pivot

我设计了一个小数据库，想法是我有一个表 products 并且每个产品都有其类别和动态属性列表（这些属性在另一个表中）：

```
ProductCategories{ProductCategoryId, Name}
Products{ProductId, Name, ProductCategoryId} 
```

我在这里为某个类别绑定产品。现在，每个 ProductCategory 都与另一个表相关，我可以在其中为该类别添加属性：

```
CategoryProperties{CategoryPropertyId, ProductCategoryId, Name} 
```

每个属性的值都在下表中：

```
ProductPropertyValues{ProductId, CategoryPropertyId, Value} 
```

问题是当我执行查询时：

```
select p.Name as ProductName, m.Name as Manufacturer, pc.Name as Category
from products p
left join dbo.Manufacturers m
on p.ManufactureId = m.ManufactureId
left join dbo.ProductCategories pc
on p.ProductCategoryId = pc.ProductCategoryId 
```

这给了我这样的结果：

```
| some product name | RedBull | Can | 
```

但我想获取该**产品类别的****所有相关属性**，这就是问题所在。当我尝试这个查询时：

 **```
select p.Name as ProductName, m.Name as Manufacturer, pc.Name as Category, cp.Name,  ppv.Value
from products p
left join dbo.Manufacturers m
on p.ManufactureId = m.ManufactureId
left join dbo.ProductCategories pc
on p.ProductCategoryId = pc.ProductCategoryId

left join dbo.CategoryProperties cp
on pc.ProductCategoryId = cp.ProductCategoryId

left join dbo.ProductPropertyValues ppv
on p.ProductId = ppv.ProductId 
```

在此查询**而不是结果中的一行**之后，我得到**“121”**结果。我不知道我做错了什么。我想得到如下结果：

```
| Product name      | Manufacturer | Category | prop1 | prop2     | prop3| Prop4          |      
| some product name | RedBull      | Can      | 34    | something | 45.6 | something else | 
```

我做错了什么或者这是不可能的？
据我了解，我在这里得到了一些交叉加入。 ![在此处输入图像描述](../Images/8389f7c0df8a586597fbd0a1e9f14472.png)

![在此处输入图像描述](../Images/6bc7974d11c2f4b7cab519f4699f6ee3.png) ![在此处输入图像描述](../Images/a6f353a45e6da0c99bd5befc2bae9156.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:37:09.017

听起来您正在尝试`PIVOT`数据。这将带您行值并将其转换为列。

如果您有一组要转换的属性，则可以将查询硬编码为类似于以下内容：

```
select *
from
(
  select p.Name as ProductName, 
    m.Name as Manufacturer, 
    pc.Name as Category, 
    cp.Name,
    ppv.Value
  from products p
  left join dbo.Manufacturers m
    on p.ManufactureId = m.ManufactureId
  left join dbo.ProductCategories pc
    on p.ProductCategoryId = pc.ProductCategoryId
  left join dbo.CategoryProperties cp
    on pc.ProductCategoryId = cp.ProductCategoryId
  left join dbo.ProductPropertyValues ppv
    on p.ProductId = ppv.ProductId
    and cp.CategoryPropertyId = ppv.CategoryPropertyId
) src
pivot
(
  max(value)
  for Name in ([Code], [Data], etc)
) piv 
```

如果您有未知数量的值，它会变得更加困难。您将不得不使用动态 sql 来执行此操作。我向您展示了一个静态版本，因为从硬编码版本转移到动态解决方案更容易。

动态版本的关键是获取列名。完整的脚本将与此类似：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(name) 
                    from dbo.CategoryProperties
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT ProductName, Manufacturer, Category,' + @cols + ' from 
             (
                select p.Name as ProductName, 
                  m.Name as Manufacturer, 
                  pc.Name as Category, 
                  cp.Name,  
                  ppv.Value
                from products p
                left join dbo.Manufacturers m
                  on p.ManufactureId = m.ManufactureId
                left join dbo.ProductCategories pc
                  on p.ProductCategoryId = pc.ProductCategoryId
                left join dbo.CategoryProperties cp
                  on pc.ProductCategoryId = cp.ProductCategoryId
                left join dbo.ProductPropertyValues ppv
                  on p.ProductId = ppv.ProductId
                  and cp.CategoryPropertyId = ppv.CategoryPropertyId
            ) x
            pivot 
            (
                max(value)
                for Name in (' + @cols + ')
            ) p '

execute(@query) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T15:18:54.327

要回答您关于交叉连接的问题，我认为问题在于您没有绑定`ProductPropertyValues`到`CategoryProperties`. `ProductPropertyValues`因此，您可以从每一`CategoryProperties`行的所有类别中获取所有属性。

现在，就获得您想要的格式而言......这就是所谓的“透视”，因为您想要获取一个垂直列表（所有属性）并“透视”它，水平渲染它。这很难动态完成，因为虽然 SQL Server 确实有一个 `PIVOT`命令，但它要求您知道在编码时要用于列名的所有值。如果您知道您的属性被称为“Prop 1”、“Prop 2”等，这会起作用，但我认为名称会因产品而异。

你有多大的决心把所有的属性都放在一排？可以做到，但会很复杂。**

# c - 如何在lua中检查用户数据

> ID：15175859
> 
> 赞同：16
> 
> 时间：2013-03-02T15:00:31.903
> 
> 标签：c, lua

我正在使用[inspect.lua](https://github.com/kikito/inspect.lua)来检查表到字符串。

但是，如果该值是一个用户数据，它只返回`<userdata 1>`

我真的需要知道 userdata 的类型是什么，userdata 的值是什么，这对于调试非常重要，我不想在任何 IDE 中这样做，我只想让打印人员可以帮助我调试。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-18T07:30:16.337

你不能。

从[手册](http://www.lua.org/manual/5.2/manual.html#2.1)：

> 提供 userdata 类型以允许将任意 C 数据存储在 Lua 变量中。用户数据值是指向原始内存块的指针。[...] 用户数据在 Lua 中没有预定义的操作，除了赋值和身份测试。

正如@Eric 所指出的，你可以从 Lua 做的唯一一件事就是检查元表：

```
print(inspect(getmetatable(someuserdata))) 
```

如果您使用的是 C API，您应该能够注册一个自定义函数来打印块所持有的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-28T22:52:07.833

如果创建的 userdata 元表`luaL_newmetatable`包含一个包含 userdatas 类型的条目`__name`（从 Lua 版本 5.3 开始），请参阅[https://www.lua.org/manual/5.3/manual.html#luaL_newmetatable](https://www.lua.org/manual/5.3/manual.html#luaL_newmetatable)。不幸的是，这个功能仍然没有被广泛使用。

# jquery - 如何在分页上调用javascript并记录数据表的选择？

> ID：15175863
> 
> 赞同：0
> 
> 时间：2013-03-02T15:00:52.080
> 
> 标签：jquery, pagination, jquery-datatables, raty

我正在使用[Datatables](http://www.datatables.net/)以表格形式显示数据。我正在使用[jQuery Raty 库](http://wbotelhos.com/raty/)在一列中显示 5 颗星。

问题是：在第一页上，Raty 库有效（因为存在 DOM 元素），但是当我在 Datatables 中分页、排序或选择页面大小时，图片中出现了以前不存在的新记录并且 Raty 不存在隐式工作。

我需要再次调用 Raty 进行分页、排序等操作。我该怎么做？有没有更好的方法来解决这个问题？

请帮助和指导。

编辑：

这是我的数据表初始化：

```
$('#mydatatable').dataTable({
            "sDom": "<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",
            "sPaginationType": "bootstrap",
            "oLanguage": {
                "sLengthMenu": "_MENU_ records per page",
                "oPaginate": {
                    "sPrevious": "Prev",
                    "sNext": "Next"
                }
            }
        }); 
```

而 Raty lib init 如下：

```
$('.star').raty({ 
                readOnly: true,
                score: 3.26
                }); 
```

在 HTML 标记中，比率列如下所示：

```
<td><div class="star" ></div></td> 
```

where 只是 Datatables 中的另一列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:17:38.913

可以尝试数据表中的[fnDrawCallback](http://datatables.net/usage/callbacks)吗？在此处查看它的使用情况：http: [//live.datatables.net/#preview](http://live.datatables.net/#preview)

虽然，这会在搜索期间的每次键入时发生，这可能会使您的应用程序变慢。

IE

```
$('#mydatatable').dataTable({
    "sDom": "<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",
        "sPaginationType": "bootstrap",
        "oLanguage": {
        "sLengthMenu": "_MENU_ records per page",
            "oPaginate": {
            "sPrevious": "Prev",
                "sNext": "Next"
        }
    },
        "fnDrawCallback": function (oSettings) {
// I would suggest adding some code here to conditionally check if it hasn't already
// been initialised on a particular .star element
        $('.star').raty({
            readOnly: true,
            score: 3.26
        });
    }
}); 
```

# grails - 带有多个对象的 Grails GORM 查询？

> ID：15175868
> 
> 赞同：1
> 
> 时间：2013-03-02T15:01:11.707
> 
> 标签：grails, grails-orm

我正在尝试在 Grails 中编写一个查询以从域类返回一组结果，但在这些结果中返回具有主类的 parentId 的单独类的相关结果。

```
 def query = Cars.where {
        (colour == 'red') 
    } 
```

然后在每个列表项中包含与该 CAR ID 相关的一组部分（作为我想要实现的示例，我知道代码不正确......

```
 query.each{ 
          this car. add(Parts.whereCarID{it.id})
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:34:13.417

如果你正确地定义了你的领域模型，你应该得到它而不涉及标准。据我了解，您需要`static hasMany = [parts: Parts]`在 Cars 域类和`static belongsTo = [car:Cars]`Parts 类中添加。

因此，例如，这里看起来可能是这样的：

```
class Cars {
    string colour
    static hasMany = [parts:Parts]
    // ... rest of your properties 
}

class Parts {
    static belongsTo = [car:Cars]
    // ... rest of your properties 
} 
```

为了得到你的结果，只需这样做：

```
def cars = Cars.findAllByColour('red') 
```

然后你可以这样做：

```
cars.each { car->
    println car.parts // <-- all the parts for each car is here

} 
```

# r - R中的广义缩减梯度（GRG2）算法

> ID：15175869
> 
> 赞同：10
> 
> 时间：2013-03-02T15:01:11.703
> 
> 标签：r, optimization

有谁知道哪个 R 包实现了广义缩减梯度 (GRG2) 算法？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T17:12:05.720

由于@BenBolker 已经完成了初步工作，找到了您希望复制的功能类型，因此我发布了一个可能有用的后续内容。最近在 Rhelp 上的一次交流以被提名为 R`fortunes`包的报价结束，尽管我不清楚它是否被接受：

```
"The idea that the Excel solver "has a good reputation for being fast
and accurate" does not withstand an examination  of the Excel solver's
ability to solve the StRD nls test problems. ...
Excel solver does have the virtue that it will always produce an
answer, albeit one with zero accurate digits."

"I am unaware of R being applied to the StRD, but I did apply S+ to the 
StRD and, with analytic derivatives, it performed flawlessly."

From:   Bruce McCullough <bdmccullough@drexel.edu>
Date:   February 20, 2013 7:58:24 AM PST 
```

以下是 McCullough 记录 Excel Solver 失败（我们现在知道它由 GRG2 算法的某些版本提供支持）的自引作品的链接： [www.pages.drexel.edu/~bdm25/chap8.pdf](http://www.pages.drexel.edu/~bdm25/chap8.pdf) 和测试问题的 NIST 网站链接在这里：[http](http://www.itl.nist.gov/div898/strd/nls/nls_info.shtml) ://www.itl.nist.gov/div898/strd/nls/nls_info.shtml和[http://www.itl.nist.gov/div898/strd /nls/nls_main.shtml](http://www.itl.nist.gov/div898/strd/nls/nls_main.shtml)

@jwg 的负面评论（通过反对票引起了我的注意）促使我重做 Bolker 建议的搜索。仍然没有命中`findFn( "GRG2")`. 我可以向求解器报告“GRG”的几个命中，但显然其中一个具有对“通用随机猜测模型”的吸引人的扩展，这让我很高兴。当我可以说没有答案的主旨是选择使用 Excel 的求解器让人们真正不确定解决方案的准确性时，这似乎特别有趣。对于发布的“答案”并没有完全提供所要求的内容，我不悔改，而是警告在这个统计/数学领域可能不虔诚地致力于微软方式的用户。分布式 R 开发人员没有做出任何努力来为 Excel 求解器提供替代品，这是值得认真考虑的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-02T11:32:04.963

一些相关的见解来自一位著名的统计科学家的[R-help 帖子：](https://stat.ethz.ch/pipermail/r-help/2003-August/037218.html)

> Excel 中的代码实际上称为 GRG2（2 确实很重要）。与 optim() 的任何方法不同，它可以处理非线性不等式约束并且不需要可行的初始解。
> 
> NEOS 优化指南中有关于它的简介： [http ://www-fp.mcs.anl.gov/otc/Guide/SoftwareGuide/Blurbs/grg2.html](http://www-fp.mcs.anl.gov/otc/Guide/SoftwareGuide/Blurbs/grg2.html)
> 
> 从这个简介来看，对于没有约束或框约束的问题，它将类似于 L-BFGS-B。-托马斯
> 
> 托马斯·拉姆利协会。u.washington.edu 生物统计学教授 tlumley 华盛顿大学，西雅图

所以在某些情况下，它可能适合`optim`像这样使用来代替 Excel 求解器：

```
optim(pars, 
      OptPars, 
      ... ,
      method = "L-BFGS-B") 
```

请注意，NEOS 优化指南现在在这里：[http](http://neos-guide.org/content/optimization-guide) : //neos-guide.org/content/optimization-guide 并且此页面上提到了 GRG2 ：http: [//neos-guide.org/content/reduced-gradient-methods](http://neos-guide.org/content/reduced-gradient-methods)它列出了 BFGS、CONOPT 和其他几个作为相关算法。文章将这些描述为“投影增强拉格朗日算法”。根据[优化 CTV](https://cran.r-project.org/web/views/Optimization.html)，这些算法可以在 nloptr、alabama 和 Rsolnp 中找到。

我在 Excel 求解器和使用`optimx`包的 R 之间有很好的匹配（到六个 sig figs），但是 YMMV。

# iphone - 在按钮操作时使用存储在 iOS 设备中的图像更改背景

> ID：15175871
> 
> 赞同：-5
> 
> 时间：2013-03-02T15:01:27.427
> 
> 标签：iphone, button, background, message

我正在开发一个消息传递应用程序，我想在点击按钮（如 Whatsapp）时更改聊天窗口的背景图像，并将图像存储在设备中。任何人都可以帮助我为此目的编写代码吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T20:53:14.443

首先，您需要从 XIB/NIB 或通过代码创建一个按钮。在该按钮的操作上，您需要更改视图控制器视图的背景图像。以下代码可能对您有所帮助。

```
-(void)changeBackgroundImage
{
    self.objImageView.image = [UIImage imageNamed:@"imageName.png"];
} 
```

**objImageView**是 UIImageView 的对象，您必须在其上显示图像。 **imageName.png**是要在 UIImageView 上显示的图像的名称。

# xml - XML 到 XML 使用 XSLT - 转换多个节点

> ID：15175873
> 
> 赞同：1
> 
> 时间：2013-03-02T15:01:49.587
> 
> 标签：xml, xslt

我有以下 XML：

```
<EMPLOYEE_LIST>
    <EMPLOYEES>
        <PERMANENT>
            <EMPID>650000</EMPID>
            <FIRST_NAME>KEITH</FIRST_NAME>
            <MIDDLE_NAME>H</MIDDLE_NAME>
            <LAST_NAME>ROGERS</LAST_NAME>
        </PERMANENT>
        <CONTRACTUAL>
            <EMPID>650001</EMPID>
            <FIRST_NAME>DARRYL</FIRST_NAME>
            <MIDDLE_NAME>Y</MIDDLE_NAME>
            <LAST_NAME>HANNAH</LAST_NAME>
        </CONTRACTUAL>
    </EMPLOYEES>
</EMPLOYEE_LIST> 
```

它给了我下面提到的输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<employees>
    <permanent>
        <emp_id>650000</emp_id>
        <f_name>KEITH</f_name>
        <m_name>H</m_name>
        <l_name>ROGERS</l_name>
    </permanent>
    <contractual>
        <emp_id>650001</emp_id>
        <f_name>DARRYL</f_name>
        <m_name>Y</m_name>
        <l_name>HANNAH</l_name>
    </contractual>
</employees> 
```

使用此 XSLT 进行转换时：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xml" encoding="UTF-8" indent="yes"/>
    <xsl:strip-space elements="*"/>
    <xsl:template match="/EMPLOYEE_LIST">
        <employees>
            <xsl:apply-templates select="EMPLOYEES/node()"/>
        </employees>        
    </xsl:template>    
    <xsl:template match="PERMANENT">
        <permanent>
            <xsl:apply-templates select="*"/>
        </permanent>
    </xsl:template>    
    <xsl:template match="EMPID">
        <emp_id>
            <xsl:value-of select="."/>
        </emp_id>
    </xsl:template>    
    <xsl:template match="FIRST_NAME">
        <f_name>
            <xsl:value-of select="."/>
        </f_name>
    </xsl:template>    
    <xsl:template match="MIDDLE_NAME">
        <m_name>
            <xsl:value-of select="."/>
        </m_name>
    </xsl:template>    
    <xsl:template match="LAST_NAME">
        <l_name>
            <xsl:value-of select="."/>
        </l_name>
    </xsl:template>

    <xsl:template match="CONTRACTUAL">
        <permanent>
            <xsl:apply-templates select="*"/>
        </permanent>
    </xsl:template>    
    <xsl:template match="EMPID">
        <emp_id>
            <xsl:value-of select="."/>
        </emp_id>
    </xsl:template>    
    <xsl:template match="FIRST_NAME">
        <f_name>
            <xsl:value-of select="."/>
        </f_name>
    </xsl:template>    
    <xsl:template match="MIDDLE_NAME">
        <m_name>
            <xsl:value-of select="."/>
        </m_name>
    </xsl:template>    
    <xsl:template match="LAST_NAME">
        <l_name>
            <xsl:value-of select="."/>
        </l_name>
    </xsl:template>
</xsl:stylesheet> 
```

这不是我想要实现的目标，因为我需要将上述 XML 转换为另一个显示以下输出的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<employees>
    <employee>
        <emp_id>650000</emp_id>
        <f_name>KEITH</f_name>
        <m_name>H</m_name>
        <l_name>ROGERS</l_name>
        <type>permanent</type>
        <emp_id>650001</emp_id>
        <f_name>DARRYL</f_name>
        <m_name>Y</m_name>
        <l_name>HANNAH</l_name>
        <type>contractual</type>
    </employee>
</employees> 
```

我是 xslt 的新手，任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:44:07.780

**这个短暂的转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my" exclude-result-prefixes="my">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <my:Renames>
  <n old="EMPLOYEES" new="employees"/>
  <n old="EMPID" new="emp_id"/>
  <n old="FIRST_NAME" new="f_name"/>
  <n old="MIDDLE_NAME" new="m_name"/>
  <n old="LAST_NAME" new="l_name"/>
  <n old="PERMANENT" new="permanent"/>
  <n old="CONTRACTUAL" new="contractual"/>
 </my:Renames>

 <xsl:variable name="vRenames" select="document('')/*/my:Renames/*"/>

 <xsl:template match="*/*" priority="-1">
     <xsl:element name="{$vRenames[@old = name(current())]/@new}">
       <xsl:apply-templates/>
     </xsl:element>
 </xsl:template>

 <xsl:template match="PERMANENT|CONTRACTUAL">
  <xsl:apply-templates/>
  <type><xsl:value-of select="$vRenames[@old = name(current())]/@new"/></type>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<EMPLOYEE_LIST>
    <EMPLOYEES>
        <PERMANENT>
            <EMPID>650000</EMPID>
            <FIRST_NAME>KEITH</FIRST_NAME>
            <MIDDLE_NAME>H</MIDDLE_NAME>
            <LAST_NAME>ROGERS</LAST_NAME>
        </PERMANENT>
        <CONTRACTUAL>
            <EMPID>650001</EMPID>
            <FIRST_NAME>DARRYL</FIRST_NAME>
            <MIDDLE_NAME>Y</MIDDLE_NAME>
            <LAST_NAME>HANNAH</LAST_NAME>
        </CONTRACTUAL>
    </EMPLOYEES>
</EMPLOYEE_LIST> 
```

**产生想要的正确结果**：

```
<employees>
   <emp_id>650000</emp_id>
   <f_name>KEITH</f_name>
   <m_name>H</m_name>
   <l_name>ROGERS</l_name>
   <type>permanent</type>
   <emp_id>650001</emp_id>
   <f_name>DARRYL</f_name>
   <m_name>Y</m_name>
   <l_name>HANNAH</l_name>
   <type>contractual</type>
</employees> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T15:08:23.707

这可以解决问题：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="xml" encoding="UTF-8" indent="yes"/>
  <xsl:strip-space elements="*"/>
  <xsl:template match="/EMPLOYEE_LIST">
    <employees>
      <xsl:apply-templates select="EMPLOYEES/node()"/>
    </employees>
  </xsl:template>

  <xsl:template match="PERMANENT">
    <xsl:apply-templates select="*"/>
    <type>permanent</type>
  </xsl:template>

  <xsl:template match="CONTRACTUAL">
    <xsl:apply-templates select="*" />
    <type>contractual</type>
  </xsl:template>

  <xsl:template match="EMPID">
    <emp_id>
      <xsl:value-of select="."/>
    </emp_id>
  </xsl:template>
  <xsl:template match="FIRST_NAME">
    <f_name>
      <xsl:value-of select="."/>
    </f_name>
  </xsl:template>
  <xsl:template match="MIDDLE_NAME">
    <m_name>
      <xsl:value-of select="."/>
    </m_name>
  </xsl:template>
  <xsl:template match="LAST_NAME">
    <l_name>
      <xsl:value-of select="."/>
    </l_name>
  </xsl:template>
</xsl:stylesheet> 
```

请注意，您只需定义模板以每次匹配 EMPID、FIRST_NAME 等。

在您的示例输入上运行时，这会产生：

```
<employees>
  <emp_id>650000</emp_id>
  <f_name>KEITH</f_name>
  <m_name>H</m_name>
  <l_name>ROGERS</l_name>
  <type>permanent</type>
  <emp_id>650001</emp_id>
  <f_name>DARRYL</f_name>
  <m_name>Y</m_name>
  <l_name>HANNAH</l_name>
  <type>contractual</type>
</employees> 
```

# java - 无法访问大型机类类型的封闭实例

> ID：15175875
> 
> 赞同：0
> 
> 时间：2013-03-02T15:02:11.380
> 
> 标签：java, class, tags, actionlistener, jmenuitem

`No enclosing instance of type mainframeclass is accessible`当我尝试在 Eclipse 中编译/启动我的程序时出现错误。这是代码：

```
public class mainframeclass {

    public static Object mainframemenuitem1;

    public static void main(String[] args) {
        JFrame mainframe = new JFrame(variables.mainframename);

        mainframe.setLayout(new GridLayout());

        mainframe.setSize(variables.mainframewith, variables.mainframeheight);
        mainframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        mainframe.setVisible(variables.mainframevisible);
        mainframe.setResizable(variables.mainframeresizable);

        JMenuBar mainframemenubar = new JMenuBar();
        JMenu mainframemenu = new JMenu("File");
        JMenuItem mainframemenuitem1 = new JMenuItem("Exit");
        mainframe.setJMenuBar(mainframemenubar);

        mainframemenubar.add(mainframemenu);
        mainframemenu.add(mainframemenuitem1);

        actionlistener listen = new actionlistener();
        mainframemenuitem1.addActionListener(listen);

        runningclass.running();
    }

    public class actionlistener implements ActionListener {
        public void actionPerformed(ActionEvent e) {
            if (e.getSource() == mainframemenuitem1)
                System.out.println("Test");
        }
    }
} 
```

看来我做错了什么：

```
actionlistener listen = new actionlistener(); 
```

但我不知道是什么。我是 Java 新手，希望能深入了解这个问题。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T15:06:25.493

您的`actionlistener`类（应该重命名以遵循 Java 命名约定并具有更有意义的名称）是一个*内部类*（与静态嵌套类相反），这意味着它仅对`mainframeclass`引用的封闭实例有效...它实际上并不*需要*，因为它指的`mainframemenuitem1`是无论如何都是静态的。

因此，您*可以*将其更改为：

```
public static class actionlistener implements ActionListener 
```

它应该可以工作。好吧，无论如何它都会编译。它实际上不会做你想要的，因为你有两个`mainframemenuitem1`变量 - 一个静态变量，然后是你方法中的一个*本地*`main`变量，所以静态变量永远不会被分配一个非空值。

我要么传递`mainframemenuitem1`到构造函数中`actionlistener`并仍然使其成为静态嵌套类，要么只是`mainframemenuitem1`在方法中使用 final`main`并为动作侦听器创建一个匿名内部类。

话说回来：

> 我对java有点陌生

在那种情况下，我实际上会暂时完全停止使用 GUI。在没有 GUI 引入的复杂性的情况下学习新语言要简单得多。编写控制台应用程序可以让您一次只专注于学习*一*件事。

# java - JMS 侦听器和发送器 - Spring 框架

> ID：15175878
> 
> 赞同：0
> 
> 时间：2013-03-02T15:02:43.160
> 
> 标签：java, spring-jms

我想了解一个 java 程序，需要修改使用 jms spring 框架开发的程序。通常它具有 JMS 接收器和发送器，它从请求队列接收消息，并在作业完成后调用作业（另一个 java 程序），发送器将向响应队列发送响应。有几个问题如下，

1.  在响应成功发布到响应队列之前，不会删除请求消息。它是如何实现的，其背后的逻辑是什么。
2.  我想在发件人无法发送消息时（通过捕获 JMS 异常）编写将响应写入平面文件的功能。一旦发送者队列启动并运行，我将读取平面文件并发送响应。我需要的原因是因为如果作业失败，它参与作业处理可能需要数小时，然后接收器将再次读取输入消息。我想避免重复处理。请在这里提出你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T15:38:47.987

在没有看到配置的情况下很难回答这些问题，但最好的猜测是＃1 是因为应用程序正在使用事务会话。这意味着在提交事务之前，该会话上的所有更新都不会完成。

只需捕获异常并写入数据；只要事务提交（因为您捕获了异常），输入消息就会被删除。

# ios - 如果我不使用 Xcode 启动应用程序，我可以显示应用程序中发生的错误吗？

> ID：15175883
> 
> 赞同：0
> 
> 时间：2013-03-02T15:03:07.223
> 
> 标签：ios, objective-c, xcode, ipad, error-handling

我的应用程序有问题：如果我用 Xcode 启动它一切顺利。如果我手动终止该应用程序，然后我尝试再次打开它（不是使用 Xcode 运行它，而是简单地点击图标按钮）而不是从头重新打开，该应用程序会显示我在终止它之前打开的最后一个屏幕并保持卡住，完全封锁。在那一刻，我不受 Xcode 控制台的控制：我如何才能看到最终发生的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:28:42.913

当您从 Xcode 运行您的应用程序时，它会将调试器附加到您的应用程序。这会阻止应用程序正常关闭。您需要在 Xcode 中按下停止按钮以分离调试器并让应用程序退出，以便您可以从 iPad 正常启动它。

# sql - TSQL 选择其中一列等于另一列

> ID：15175887
> 
> 赞同：1
> 
> 时间：2013-03-02T15:03:24.327
> 
> 标签：sql, sql-server, select

我正在尝试根据项目在同一个表中的位置创建搜索。

因此，如果我输入一个类似`a123`for column的`BoxNo`值，那么该列中的所有值`Goeswith`也会`a123`被选中。下面的代码是我的尝试，但不起作用。

```
SELECT *   
FROM Equipment 
WHERE (BoxNo LIKE '%') = GoesWith 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T15:11:59.273

如果您想要 BoxNo 和 GoesWith 具有相同值的所有行，那么它是这样的：

```
SELECT *
FROM Equipment
WHERE BoxNo = GoesWith 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T15:06:38.343

也许你的意思是，

```
SELECT  *
FROM    tableName
WHERE   'a123' IN (BoxNo, GoesWith) 
```

或者这个，

```
SELECT  *
FROM    tableName
WHERE   BoxNo LIKE '%a123%' AND
        BoxNo = GoesWith 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T15:08:27.860

如果要搜索列`a123`中的所有项目`BoxNo`：

```
SELECT * From Equipment WHERE BoxNo LIKE '%a123%' 
```

如果要`a123`在两列中搜索：

```
DECLARE @Search Varchar(50) = 'a123'
SELECT * From Equipment WHERE BoxNo = @Search AND GoesWith = @Search 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T15:12:19.167

我怀疑您的意思是“以及”，因此 OR：

从 BoxNo='a123' OR GoesWith='a123' 的设备中选择 *

如果您需要添加一些进一步的约束，请小心添加括号...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-28T14:06:07.610

您是否正在寻找具有另一个条目的所有 Box 记录的一般匹配项？如果是这样，那么您需要一个自联接（它使用别名来识别记录）：

```
select
  b.BoxNo,
  g.GoesWith
from
     equipment as b
inner join equipment as g on b.BoxNo = g.GoesWith 
```

这标识了具有匹配框的所有记录（以及它们与哪些东西一起使用）。更改为左连接以包含不匹配的记录。如果 Box 有多个 GoesWith 条目，它将产生多个匹配项，但通过返回 DISTINCT b.* 或 DISTINCT g.* 您可以获得单个匹配项的列表。

# actionscript-3 - File.copyTo 保留旧文件名

> ID：15175898
> 
> 赞同：2
> 
> 时间：2013-03-02T15:04:41.467
> 
> 标签：actionscript-3, apache-flex, air

我尝试使用以下代码将选定的文件复制到存储目录：

```
private function onAddFileClick():void
{
    m__file = new File();
    m__file.addEventListener(Event.SELECT, onFileSelect);
    m__file.browseForOpen("Select a sound", [c__filter]);
}

private function onFileSelect(e:Event):void 
{
    var l__target:File = File.applicationStorageDirectory.resolvePath("test.snd");
    m__file.copyTo(l__target, true);
} 
```

副本有效，但目标文件的名称保留原始文件的名称。如果我尝试复制文件名“Kalimba.mp3”，则该副本将命名为“Kalimba.snd”，而不是预期的“test.snd”。问题是，在复制之后，我对目标文件的引用不会导致任何事情，因为它`nativePath`坚持不存在的“test.snd”。

我使用 AIR 3.6 和 Flex 4.6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:11:04.513

重命名是用`File.moveTo()`. 先复制，然后使用 moveTo() 重命名它。除非只是移动它会为你做！明显地 ;）

所以在你复制之后：

```
var sourceFile:File = File.applicationStorageDirectory;
sourceFile = sourceFile.resolvePath("Kalimba.snd");
var destination:File = File.applicationStorageDirectory;
destination = destination.resolvePath("test.snd");

try  
{
    sourceFile.moveTo(destination, true);
}
catch (error:Error)
{
    trace("Error:" + error.message);
} 
```

# java - FileNotFoundException Jasper 报告

> ID：15175899
> 
> 赞同：2
> 
> 时间：2013-03-02T15:04:42.800
> 
> 标签：java, netbeans, jasper-reports, ireport

1.  我在 netbeans 中加载了一个 jrxml 文件，该文件已成功加载。
    但是当我将它部署为 jar 文件时，它会出现以下错误：

**错误**

```
 net.sf.jasperreports.engine.JRException: java.io.FileNotFoundException: src \Reports\print.jrxml(The system cannot find the path specified) 
```

**代码**

```
try
{   
 jasperdesign=JRXmlLoader.load("src/Reports/print.jrxml");
} 
catch(Exception error) 
{
Notify.showMessageDialog(null, ""+error+"", "Error Loading Appointment JasperForm", Notify.ERROR_MESSAGE); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:23:31.427

我怀疑命名的目录`src`在你的罐子里

尝试使用[ClassLoader 的方法 getResourceAsStream](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)将 InputStream 获取到打包的 jrmx 文件，并将其传递给[JRXmlLoader 的 load](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/xml/JRXmlLoader.html#load%28java.io.InputStream%29)方法，该方法将 InputStream 作为参数。

for 的参数`getResourceAsStream`应该是 jar 中 jrxml 的完整限定名。也就是说，包括包名。

# c++ - 如果条件为真则返回 if 条件，如果为真则返回

> ID：15175902
> 
> 赞同：3
> 
> 时间：2013-03-02T15:04:55.070
> 
> 标签：c++

当条件为真或假时，如何使其返回并再次提问，使用户重新输入值？这是我想要实现的：

```
#include <iostream>
#include <string>
#include <sstream>
using namespace std;

int main()
{
    int n;
    cout<<"Enter numbers. Press 5 to stop: ";
    cin>>n;
    bool tr=true;
    while(tr)
    {
        if(n!=5)
            cout<<"You entered "<<n; //How to make it return again, since its false? I keep getting infinite loops :( ;
        else 
            tr=false;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T15:08:17.830

您需要*在*while循环中提示用户，以便它在每次迭代中发生：

```
int n;
bool tr = true;
while(tr)
{
  cout << "Enter numbers. Press 5 to stop: ";
  cin >> n;
  if(n!=5) {
    cout << "You entered " << n;
  } else {
    tr = false;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T15:13:01.633

只需将所有代码（'n' 和 'tr' 定义除外）放入 while 循环中，如下所示：

```
int main()
{
int n;
bool tr=true;
while(tr)
{
cout<<"Enter numbers. Press 5 to stop: ";
cin>>n;
    if(n!=5)
        cout<<"You entered "<<n;

    else 
        tr=false;
}
return 0;

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T15:18:59.030

其他答案都有效，并且有一些关于改进程序流程的知识，但我相信你要求的技巧是`continue`关键字，它跳过了循环迭代的其余部分。

```
bool tr = true;
int n;
while (tr)
{
    cout << "Enter numbers...";
    cin >> n;
    if (n != 5)
        continue;
    else
        tr = false;
} 
```

编辑第 1 部分：关于`continue`关键字。

你想让你的代码尽可能的可读。在这个例子中，它的使用是不必要的（正如其他海报所示）；但这是对“如何在循环的此迭代中跳过其余处理并继续到下一个迭代？”问题的答案。通常，这种破坏流程的指令实际上会使代码更难阅读。但有时情况恰恰相反。`continue`任何可以用or完成的事情（或者，至少，几乎任何事情）都可以`break`在没有它们的情况下完成，所以如果你要使用它们，你需要有一个明确的理由这样做。通常，当我使用 时`continue`，这是因为我正在循环输入一组输入，并且只要输入不是我期望的格式，我就想跳过处理循环。像这样的东西（伪代码）......

```
foreach (Input i in ReceivedInputs)
{
    if (i.isBad())
    {
        cout << "Bad input";
        continue;
    }
    // Do massive block of calculating here.
} 
```

比这更容易阅读......

```
foreach (Input i in ReceivedInputs)
{
    if (i.isBad())
        cout << "Bad input";
    else
    {
        // Do massive block of calculating here.
    }
} 
```

因为如果您正在寻找大量计算块的末端，那么第二个版本会使您更难跟踪您所处的范围。在这种情况下，我通过 获得代码可读性`continue`，所以我使用它。但是简单的代码可能不应该使用它。关键字是相似的，尽管提出有益`break`的示例要容易得多。`break`

编辑第 2 部分：关于多次迭代

这只是设置循环的问题；这里没有神奇的关键字。我能想到的最短方法可能是这样的：

```
int n = 0;
int numberToTake = 10;

for ( int numbersTaken = 0; numbersTaken < numberToTake; ++numbersTaken)
{
    cout << "Enter numbers...";
    int n = 0;
    for (cin >> n; n != 5; cin >> n)
        cout << "Try again.";
    // Do whatever processing on n you want to do here.
} 
```

虽然我应该指出，这样做，你从用户那里得到的唯一值将是 5，如果他输入任何不适合整数的东西，你会得到意想不到的行为。

编辑3：更彻底地阅读评论后，我认为您只是在寻找更传统的`for`循环使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T15:43:01.737

不需要额外的`bool`变量。

成语可以是：无限循环，直到用户输入`5`：

```
for(;;) {  // Loops infinitely
  cout << "Enter numbers. Press 5 to stop: ";
  cin >> n;
  if(n == 5)
    break;  // Exits the loop
  cout << "You entered " << n;  // Before the if if you want to print 5 as well
} 
```

# joomla - Joomla 编辑器去除标签

> ID：15175903
> 
> 赞同：2
> 
> 时间：2013-03-02T15:04:58.873
> 
> 标签：joomla, joomla2.5

我正在尝试在 Joomla 2.5 中创建一个自定义组件，并努力让它阻止它从编辑器字段中剥离所有 html 标签 - 链接、新行、p 标签 - 完整的作品。表单域如下：

```
<field
    name="post"
    type="editor"
    label="COM_HELLO_WORLD_EDITOR_LABEL"
    description="COM_HELLO_WORLD_EDITOR_DESC"
    class="inputbox"
    filter="JComponentHelper::filterText"
    required="true"
    default=""
/> 
```

显然，在 SO 和 Joomla 论坛上都有很多关于此的帖子。然而，它们通常似乎有两个明确的主题。

1.  微小的 MCE 设置。在将我的默认编辑器设置为“无”（即只是一个文本区域）后，我已经检查过了，标签仍然被剥离
2.  Joomla 文本过滤器设置。我以全局管理员身份登录，超级用户设置为“无过滤”

我为此覆盖了模型的保存功能：

```
function store()
{
    $row =& $this->getTable();
    $input = new JInput();
    $data = $input->getArray($_POST);

    //Sets Users id as current logged in user if not set
    if(!$data['jform']['post_user']) {
        $data['jform']['post_user']=JFactory::getUser()->id;
    }

    // Bind the form fields to the post table
    if (!$row->bind($data['jform'])) {
        $this->setError($this->_db->getErrorMsg());
        return false;
    }

    // Make sure the hello is valid
    if (!$row->check()) {
        $this->setError($this->_db->getErrorMsg());
        return false;
    }

    // Store the hello table to the database
    if (!$row->store()) {
        $this->setError($this->_db->getErrorMsg());
        return false;
    }
    return true;
} 
```

我的直觉是它与 JInput 剥离 HTML 标签有关。但即使在保存文件中添加额外的行`$data['jform']['post']=$input->getHTML('post');`也没有任何反应。所以我不确定从这里去哪里。有任何想法吗？

* * *

**更新**

只是为了快速澄清一个问题 - 我想使用“全局配置”下预设的 Joomla“文本过滤器”设置，而不是手动设置组件中的每个标签！

* * *

**更新 2**

我将 filter="raw" 添加到编辑器表单字段中。现在，`<p>`当我转储变量时，我看到了 html 标记`$_POST['jform']['post'], null, 'HTML')`。然而，当只应用一个简单的 JInput 过滤器函数时——更不用说应用 Joomla 配置值了——我得到了空值。

```
 $input = new JInput();
    $data = $input->getArray($_POST);
    $data['jform']['post']=$input->get($_POST['jform']['post'], null, 'HTML'); 
```

[这里](http://developer.joomla.org/manual/chap-Joomla_Platform_Manual-Input.html)的句子是“HTML - 返回一个完整的 HTML 实体和标签的字符串，受过滤器中的白名单或黑名单的约束。” 描述引用全局配置文本过滤器设置的 JInput HTML 过滤器？只是为了确认？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:30:13.153

尝试这样的事情

```
$input_options = JFilterInput::getInstance(
        array(
            'img','p','a','u','i','b','strong','span','div','ul','li','ol','h1','h2','h3','h4','h5',
            'table','tr','td','th','tbody','theader','tfooter','br'
        ),
        array(
            'src','width','height','alt','style','href','rel','target','align','valign','border','cellpading',
            'cellspacing','title','id','class'
        )
    );

    $postData = new JInput($_POST,array('filter' => $input_options)); 
```

第一个数组是允许的标签，第二个数组是允许的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:28:42.140

这是关于什么的？filter="JComponentHelper::filterText"? 您是否编写了自定义过滤器？

与 Joomla 中的大多数东西（例如 acl）一样，默认过滤非常严格，因此如果您从不过滤中获得 xss，这是一个深思熟虑的选择，您没有在核心中做出安全风险。但是你的核心过滤应该被应用......除了你似乎已经被未知过滤器覆盖了。所以我怀疑给定这个未知的过滤器它正在回落到非常字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T14:29:22.150

过了一段时间，但只是为了记录，对于遇到同样问题的任何人，这里是我的解决方案。

对我来说，这个问题通过使用 JRequest 而不是 JInput 立即得到了解决。我相信它已被弃用，但它仍然在 JControllerForm 的 save() 函数中被 Joomla 2.5.14（目前最新的 Joomla 2.5）使用。

# html - 响应式设计和最小宽度（以像素为单位）

> ID：15175904
> 
> 赞同：0
> 
> 时间：2013-03-02T15:05:03.823
> 
> 标签：html, css, width, responsive-design

我正在学习新的“响应式设计”，我理解的第一件事是我们应该使用百分比来定义我们可以定义的任何内容，最重要的是，`width`.

假设我有 2 个`inline-block`div。

```
<div>
   //Left div
</div>
<div>
   //Right div
</div> 
```

第一个 div 有一个`width:50%`，第二个 div 有一个`width:40%`，这里一切都很好，它们彼此相邻，当你调整浏览器的大小时，它们会变小。

为了防止它们过度调整大小（在某些地方变得不可读），我们应该`min-width`以像素为单位使用。

如果我`min-width:200px;`为第一个 div 和`min-width:100px;`第二个 div 设置，并且当我调整窗口大小直到第二个 div 变为第一个 div 下时，一切似乎都很好。

但是，如果我调整 MORE 和 MORE 的大小，`width`则将保持固定，因为浏览器的大小小于`min-width`这些 div 的大小，这将导致滚动条的创建。

我正在调整大小，以便可以测试在较小分辨率（手机、平板电脑）上的外观，我在这里遗漏了什么吗？这是一切都停止并开始媒体查询的作用的地方吗？还是我可以做更多的事情来解决这个问题？

[**JSFIDDLE**](http://jsfiddle.net/9MxtT/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:12:53.563

> 这是一切都停止并开始媒体查询的作用的地方吗？

本质上，是的。当您觉得您的设计无法再挤入您提供的空间时，您需要使用媒体查询。在你谈论的时候，大约 300px 的窗口大小（加上边距？）你会想要使用媒体查询来改变你显示这些 div 的方式，也许这样它们是视口宽度的 100%，并且因此将一个堆叠在另一个之上，而不是并排放置。对于您的示例，这实际上会有效地覆盖最小宽度。

您想要实现的是一种无论视口大小都可以工作的设计，当视口太小或太大时，意味着用户难以使用或阅读布局，那么媒体查询提供了最好的现在可以“重置”布局以重新注入新维度集的可用性。

我想说您不必担心设置最小宽度；尽管使用它们来考虑 Internet Explorer 有一个强有力的论据，因为它不会处理旧版本中的媒体查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T15:13:59.570

您正在寻找的内容称为响应式布局。

这里有几个参考链接可以帮助您实现响应式布局。

[http://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

[http://www.elementfusion.com/tutorial-optimizing-your-website-for-mobile-devices](http://www.elementfusion.com/tutorial-optimizing-your-website-for-mobile-devices)

# html - width 100% 出现滚动时剪切元素

> ID：15175905
> 
> 赞同：0
> 
> 时间：2013-03-02T15:05:09.017
> 
> 标签：html, css

我有一个带有水平条的简单页面，应该与文档页面一样长。问题是，当我将浏览器窗口的大小调整到正文的最小高度以上时，滚动文档时没有显示部分栏。

搜索其他类似的问题，我发现问题可以通过将body style的margin和padding设置为0px来解决。

在我的情况下，如果我从栏的 css 中删除**position:absolute ，它就会起作用。**我怎样才能解决这个问题并保持酒吧绝对定位？

我需要使用绝对定位，因为我有一个占页面 100% 的背景图像的 div 元素（垂直和水平）。如果我将栏放在 div 元素之后，它不会保持原位。

```
<style type"text/css">

html, body
{  
    width: 100%;
    min-width:500px;
    height: 100%;
    min-height:700px;
    margin:0px;
    padding: 0px;  
}

#red {
    position:absolute;
     top:100px;
     width:100%;
     min-width:100%;
     height:37%;
     min-height:300px;
     max-height:330px;
     background: rgb(0,0,0);
     margin: 0px;
    padding: 0px;
}

#background
{
    position:fixed;
     width:100%;
     height:100%;
     background: rgb(56,54,0);
     margin: 0px;
     padding: 0px;
}

</style>

<body>

<div id="background"></div>
<div id="red"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:14:38.093

你可以`position:relative`在你的CSS中使用。

`absolute`和之间有区别`relative`

**绝对：** `The element is positioned relative to its first positioned (not static) ancestor element.`

**相对的：** `The element is positioned relative to its normal position, so "left:20" adds 20 pixels to the element's LEFT position.`

更多`position`关于[http://www.w3schools.com/cssref/pr_class_position.asp](http://www.w3schools.com/cssref/pr_class_position.asp)或[http://css-tricks.com/absolute-positioning-inside-relative-positioning/](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T15:20:28.307

如果您希望背景图像覆盖 100% 的身体，请添加

```
background-image: url(../yourImageHere.jpg) 
```

到页面主体的 css 并删除`#background`div。

您不需要将 html 和 body 的宽度和高度设置为 100%，因为无论如何它们都默认为这个。根据您的需要，我将 css 整理如下：

```
html, body    {  
    margin:0px;
    padding: 0px;
    background-image: url(../yourImageHere.jgp)  
}

#red {
     position:absolute;
     top:100px;
     left:0;
     width:100%;
     min-height:300px;
     max-height:330px;
     background: rgb(0,0,0);
     margin: 0px;
     padding: 0px;
} 
```

# python - 路由中的webapp2 python正则表达式

> ID：15175910
> 
> 赞同：1
> 
> 时间：2013-03-02T15:05:59.453
> 
> 标签：python, regex, google-app-engine, http, webapp2

我正在尝试让 webapp2 以以下形式处理 url：

```
/case/e3627 
```

其中 'e3627' 可以是任何字母数字字符串

这是我的路由参数：

```
app = webapp2.WSGIApplication([(r'/case/<:^\w+$>', ViewCase)],
                              debug=True) 
```

但是我的网址出现 404 错误

我也尝试`<:^[a-zA-Z0-9_]+$>`了正则表达式，但没有运气

例如，我的应用程序适用于常规网址，`/home`但不适用于正则表达式

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T15:09:12.827

我认为

```
app = webapp2.WSGIApplication([(r'/case/(\w+)', ViewCase)],
                              debug=True) 
```

应该足够了。

请注意，这`^`意味着字符串的开头，显然不会出现在`/case/`. 我认为这就是你的正则表达式不起作用的原因。

# qt - Qt 中如何获取系统默认字体大小？

> ID：15175913
> 
> 赞同：12
> 
> 时间：2013-03-02T15:06:09.667
> 
> 标签：qt, fonts

Qt 使用`9px`默认字体大小，但用户（在 Linux 上）可以使用`qtconfig`.

那么，如何获取系统默认字体大小呢？我阅读了文档，但找不到任何 API。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-02T15:18:55.740

获取默认字体 QFont 对象并从中读取大小。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-11-24T20:35:26.290

您的应用程序默认字体可以从 获取`QApplication::font()`，其中

> [返回默认的应用程序字体。](https://doc.qt.io/archives/qt-4.8/qapplication.html#font)

您可以使用`pointSize()`, `pointSizeF()`,`pixelSize()`等来收集它的大小。

# mongodb - MongoDB客户端间歇性连接错误

> ID：15175915
> 
> 赞同：0
> 
> 时间：2013-03-02T15:06:31.770
> 
> 标签：mongodb

我有一个副本集，其中有一个主节点和两个辅助节点。有时我无法连接到主服务器，我得到这个错误，大约一分钟后消失，我能够连接。任何想法为什么会发生这种情况？发生此错误时，我尝试连接到辅助服务器并执行 rs.status ，它表示主服务器仍然是同一台服务器并且运行正常。

以下是来自控制台的显示问题的命令文本。

```
mongo --host <hostname> --port 27017
MongoDB shell version: 2.2.2
connecting to: <hostname>:27017/test
Sat Mar  2 14:54:02 DBClientCursor::init call() failed
Sat Mar  2 14:54:02 Error: Error during mongo startup. :: caused by :: 10276 DBClientBase::findN: transport error: <hostname>:27017 ns: admin.$cmd query: { whatsmyuri: 1 } src/mongo/shell/mongo.js:93
exception: connect failed

mongo --host <hostname> --port 27017
MongoDB shell version: 2.2.2
connecting to: <hostname>:27017/test
rs0:PRIMARY> 
```

# ruby-on-rails - Ruby on Rails 中的 TCP 流交换监控工具 需要

> ID：15175916
> 
> 赞同：0
> 
> 时间：2013-03-02T15:06:33.027
> 
> 标签：ruby-on-rails, ruby, tcp, gem, monitoring

有人知道 Ruby gems 中的一些 tcp 数据监控工具，类似于C中的[tcpflow吗？](http://www.circlemud.org/jelson/software/tcpflow/)

我想使用此工具检查 Ruby on Rails 应用程序中的所有 http 标头和正文数据交换，而无需编写任何调试代码。我认为通过 Rails 应用程序查看标准日志就足以查看客户端和 Rails 应用程序之间的信息，但我还希望看到 Rails 应用程序与前端以外的其他外部网站之间的数据交换。例如，在后台交换的 Facebook/Google API 数据。

任何信息都应该感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:28:10.017

I think the tool you're looking for to inspect data exchange between web applications or with web APIs (at the HTTP level not TCP), is [Mitmproxy](https://github.com/cortesi/mitmproxy).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T06:51:01.557

到目前为止，我在 Ruby 领域找到的最接近的是[PcapRub](https://github.com/shadowbq/pcaprub)（它在引擎盖下使用 tcpdump 的 pcaplib）和[PacketFu](https://github.com/todb/packetfu)（它在引擎盖下使用 PcapRub）。

[然而，它们在与tcpdump](http://www.tcpdump.org)相同的抽象级别上运行：它们捕获单个数据包，但与 tcpflow 不同，它们不理解序列号，因此在重传或无序交付的情况下无法重建数据流。

我也会对实现 tcpflow 的 Ruby gem 非常感兴趣。我不介意它是否在引擎盖下使用本机 tcpflow，但会欣赏 gem 打包的便利。

# c - X509_NAME_oneline 返回的空闲字符串

> ID：15175917
> 
> 赞同：2
> 
> 时间：2013-03-02T15:06:33.983
> 
> 标签：c, string, openssl, free

我正在尝试使用一个简单的 SSL 示例。

这是一些代码：

```
void ShowCerts(SSL* ssl)
{
    X509 *cert;
    char *line;

    cert = SSL_get_peer_certificate(ssl); /* get the server's certificate */
    if ( cert != NULL )
    {
        printf("Server certificates:\n");
        line = X509_NAME_oneline(X509_get_subject_name(cert), 0, 0);
        printf("Subject: %s\n", line);
        free(line);       /* free the malloc'ed string */
        line = X509_NAME_oneline(X509_get_issuer_name(cert), 0, 0);
        printf("Issuer: %s\n", line);
        free(line);       /* free the malloc'ed string */
        X509_free(cert);     /* free the malloc'ed certificate copy */
    }
    else
        printf("No certificates.\n");
} 
```

`free(line)`程序在代码行中崩溃。没有这些行，程序可以正常工作而不会崩溃。如果我删除这些行，我担心在这种情况下某些分配的资源不会被释放——我该怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-16T11:45:23.473

不确定，也许你可以使用：

OPENSSL_free(线);

我只是在我的 Windows 客户端上使用此代码，它工作正常 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-17T09:10:35.877

根据[http://linux.die.net/man/3/x509_name_oneline](http://linux.die.net/man/3/x509_name_oneline)中函数 X509_NAME_oneline 的描述，如果指针`line`为`NULL`，则函数会为其动态分配内存。否则，它只返回指针`line`。

我想预先分配空间并手动释放。如下：

```
#define MAX_SIZE 1000
char* line = new char[ MAX_SIZE + 1 ];
printf( "%s\n", X509_NAME_oneline( X509_get_subject_name( cert ), line, MAX_SIZE ) );
delete[] line;   // thanks moowar's advice 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-27T10:53:05.290

我建议你尝试这样的事情：

```
#define MAX_DN_SIZE 2000 // whatever big enough size here

char line[MAX_DN_SIZE+1];
....
X509_NAME_oneline(X509_get_subject_name(cert), line, MAX_DN_SIZE ); // convert
line[MAX_DN_SIZE] = '\0'; // set paranoid terminator in case DN is exactly MAX_DN_SIZE long 
```

并删除“免费”。当然，这只会打印您的 DN 的前 MAX_DN_SIZE 个字符 :)

# asp.net-mvc - Kendo UI 树视图绑定

> ID：15175927
> 
> 赞同：2
> 
> 时间：2013-03-02T15:07:20.843
> 
> 标签：asp.net-mvc, data-binding, binding, kendo-ui, kendo-treeview

我想制作一个`TreeView`在第一次加载时显示所有节点的剑道。我正在使用 Kendo 'Binding to remote data' 示例，但它不能正常工作。它只显示第一级，传递给控制器​​操作的 id 始终为空。请帮我。

**查看代码：**

```
@(Html.Kendo().TreeView()
    .Name("treeview")
    .DataTextField("Title")
    .ExpandAll(true)
    .LoadOnDemand(false)
    .DataSource(dataSource => dataSource
    .Read(read => read.Action("Employees", "Follow").Data("addData"))))

 function addData(data) {
    return { id: data.id };
} 
```

**控制器代码：（**控制器`Follow`）

```
public System.Web.Mvc.JsonResult Employees(int? id)
{
    System.Collections.Generic.List<FollowType> List =
        new System.Collections.Generic.List<FollowType>();

    if (id.HasValue == true) {
        List = FollowTypeList.FindAll(current => current.ParentId == id);
    } else {
        List = FollowTypeList.FindAll(current => current.ParentId == null);
    }

    System.Collections.Generic.List<Kendo.Mvc.UI.TreeViewItemModel> NodeList =
        new System.Collections.Generic.List<Kendo.Mvc.UI.TreeViewItemModel>();

    foreach (CommonData.Domain.FollowType item in List)
    {
        NodeList.Add(new Kendo.Mvc.UI.TreeViewItemModel() { 
            Id = item.Id.ToString(), 
            Text = item.Title, 
            HasChildren = FollowTypeList.Exists(c => c.Id == item.ParentId) 
        });
    }

    return Json(NodeList, System.Web.Mvc.JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:34:03.130

我想在你的javascript代码中，`id`数据字段应该是`Id`（注意大写）：

```
return { id : data.Id }; 
```

# c++ - 实现动态矩阵类的错误

> ID：15175931
> 
> 赞同：0
> 
> 时间：2013-03-02T15:07:45.047
> 
> 标签：c++, arrays, pointers, matrix, operator-overloading

好的，我现在正在尝试实现一个简单的二维矩阵类。这是到目前为止的样子：

```
template <typename Type>
class dyMatrix {
    private:
        Type *mat;

        int width, height;
        int length;

    public:
        dyMatrix (int _width, int _height)
            : width(_width), height(_height), mat(0)
        {
            length = width * height;
            mat = new Type[length];
        };

        // ---

        int getWidth() {
            return width;
        };

        int getHeight() {
            return height;
        };

        int getLength() {
            return length;
        }

        // ---

        Type& operator() (int i, int j) {
            return mat[j * width + i];
        };

        Type& operator() (int i) {
            return mat[i];
        };

        // ---

        ~dyMatrix() {
            delete[] mat;
        };
}; 
```

为了测试它并与静态多维数组进行比较，我编写了以下代码片段：

```
#include <iostream>
using namespace std;

/* matrix class goes here */

struct Coord {
    int x, y;

    Coord()
        : x(0), y(0)
    {};

    Coord (int _x, int _y)
        : x(_x), y(_y)
    {};

    void print() {
        cout << x << ", " << y;
    };
};

int main() {
    dyMatrix<Coord> adabo(5, 7);
    Coord inakos[5][7];

    int i = 5, j = 0;

    adabo(i, j) = *(new Coord(i, j));
    inakos[i][j] = *(new Coord(i, j));

    inakos[i][j].print();
    adabo(i, j).print();

    return 0;
} 
```

“Adabo”和“Inakos”是任意选择的名称。执行时，打印其内容，但程序在执行任何操作`inakos`之前崩溃。`adabo`另一个有趣的事情是，如果我给出5`i`和`j`0 以外的值，例如分别为 5 和 1，它可以正常工作。

我不知道哪些确切的数字有效，哪些使程序失控，我只知道这里有不规则之处。我可能做错了什么？我是 C++ 的业余爱好者，所以我可能会或不会在任何结构中滥用某些东西。

如果有人也有时间，我非常想知道我的矩阵类中是否还有其他通知错误。任何可能与问题无关但仍然是谬误的事情。

我还使用以下 main() 对其进行了测试，但`inakos`在 [5][1] 中打印其内容后它仍然崩溃。也许它与 dyMatrix 无关，而是与松散实现的 Coord 无关？

```
int main() {
    dyMatrix<Coord> adabo(5, 7);
    Coord inakos[5][7];

    for (int i = 0; i < adabo.getHeight(); i++) {
        for (int j = 0; j < adabo.getWidth(); j++) {
            adabo(i, j) = *(new Coord(i, j));
            inakos[i][j] = *(new Coord(i, j));

            inakos[i][j].print();
            cout << "; ";
        }
        cout << "\n\n";
    }
    cout << "\n\n\n";

    Coord temp;
    for (int i = 0; i < 7; i++) {
        for (int j = 0; j < 5; j++) {
            temp = adabo(i, j);

            temp.print();
            cout << "; ";
        }
        cout << "\n\n";
    }

    return 0;
} 
```

编辑：它与坐标无关。刚刚用整数的 dyMatrix 和整数的静态矩阵进行了测试，但它在 [5][0] 之后崩溃了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:18:27.267

在您的第一个示例中，您声明`inakos[5][7]`索引范围从 0 到 4 和 0 到 6。 `inakos[5][0]`因此`inakos[5][1]`可能会崩溃。

在您的第二个示例中，您再次声明`inakos[5][7]`但您让第一个索引从 0 循环到 6。再次`inakos[i][j]`可能会崩溃。一种解决方法是切换您的索引（即，更改为`i<adabo.getWidth()`and `j<adabo.getHeight()`）。

# javascript - Javascript - 当用户点击 Facebook 中的图片时如何收听？

> ID：15175936
> 
> 赞同：0
> 
> 时间：2013-03-02T15:08:12.243
> 
> 标签：javascript, facebook, listener

我想知道当用户单击 facebook 新闻提要上的图像以执行某些操作时触发功能的有效方法。

我可以为每个图像添加一个侦听器，但这不是很有效。还有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T15:25:12.607

像这样的东西怎么样：http: [//jsfiddle.net/c24w/DJ2ax/4/](http://jsfiddle.net/c24w/DJ2ax/4/)

**HTML**

```
<div id="newsfeed">
    <img src="http://i46.tinypic.com/2cos8hw.png" id="1">
    <img src="http://i46.tinypic.com/2cos8hw.png" id="2">
    <img src="http://i46.tinypic.com/2cos8hw.png" id="3">
    <div><a href="#">Something else clickable</a></div>
</div> 
```

**JavaScript**

```
var newsfeed = document.getElementById('newsfeed');

newsfeed.onclick = function handleNewsfeedClick(e) {
    var el = e.srcElement;
    if (el.tagName === 'IMG') {
        console.log('Clicked image ' + el.id);
    }
}; 
```

它的作用是将点击事件侦听器附加到*新闻源*。单击新闻源的子元素时，该事件将向上传播到新闻源并被其单击侦听器捕获。然后检查点击事件的来源是否是图像。

输出到浏览器的控制台。（我在 Chrome 中对其进行了简短的测试。）

# ruby-on-rails - 缺少模板关系/创建，应用程序/创建与 {:locale=>[:en], :formats=>[:js, :html], :handlers=>[:erb, :builder, :coffee]}

> ID：15175941
> 
> 赞同：0
> 
> 时间：2013-03-02T15:08:34.037
> 
> 标签：ruby-on-rails, tdd, railstutorial.org

我在第 11 章的 Rspec 中遇到了 railstutorial.org 的问题。测试没有通过。

```
RS-MBP:sample_app rsoutar$ bundle exec rspec spec/
No DRb server is running. Running in local process instead ...
Rack::File headers parameter replaces cache_control after Rack 1.5.
FFFF.......................................................................................................................................................

Failures:

  1) RelationshipsController creating a relationship with Ajax should increment the Relationship count
     Failure/Error: xhr :post, :create, relationship: { followed_id: other_user.id }
     ActionView::MissingTemplate:
       Missing template relationships/create, application/create with {:locale=>[:en], :formats=>[:js, :html], :handlers=>[:erb, :builder, :coffee]}. Searched in:
         * "#<RSpec::Rails::ViewRendering::EmptyTemplatePathSetDecorator:0x007fbd0c6b5910>"
     # ./app/controllers/relationships_controller.rb:7:in `create'
     # ./spec/controllers/relationships_controller_spec.rb:14:in `block (4 levels) in <top (required)>'
     # ./spec/controllers/relationships_controller_spec.rb:13:in `block (3 levels) in <top (required)>'

  2) RelationshipsController creating a relationship with Ajax should respond with success
     Failure/Error: xhr :post, :create, relationship: { followed_id: other_user.id }
     ActionView::MissingTemplate:
       Missing template relationships/create, application/create with {:locale=>[:en], :formats=>[:js, :html], :handlers=>[:erb, :builder, :coffee]}. Searched in:
         * "#<RSpec::Rails::ViewRendering::EmptyTemplatePathSetDecorator:0x007fbd0fce9310>"
     # ./app/controllers/relationships_controller.rb:7:in `create'
     # ./spec/controllers/relationships_controller_spec.rb:19:in `block (3 levels) in <top (required)>'

  3) RelationshipsController destroying a relationship with Ajax should decrement the Relationship count
     Failure/Error: xhr :delete, :destroy, id: relationship.id
     ActionView::MissingTemplate:
       Missing template relationships/destroy, application/destroy with {:locale=>[:en], :formats=>[:js, :html], :handlers=>[:erb, :builder, :coffee]}. Searched in:
         * "#<RSpec::Rails::ViewRendering::EmptyTemplatePathSetDecorator:0x007fbd0ff07d68>"
     # ./app/controllers/relationships_controller.rb:16:in `destroy'
     # ./spec/controllers/relationships_controller_spec.rb:31:in `block (4 levels) in <top (required)>'
     # ./spec/controllers/relationships_controller_spec.rb:30:in `block (3 levels) in <top (required)>'

  4) RelationshipsController destroying a relationship with Ajax should respond with success
     Failure/Error: xhr :delete, :destroy, id: relationship.id
     ActionView::MissingTemplate:
       Missing template relationships/destroy, application/destroy with {:locale=>[:en], :formats=>[:js, :html], :handlers=>[:erb, :builder, :coffee]}. Searched in:
         * "#<RSpec::Rails::ViewRendering::EmptyTemplatePathSetDecorator:0x007fbd0fc5c460>"
     # ./app/controllers/relationships_controller.rb:16:in `destroy'
     # ./spec/controllers/relationships_controller_spec.rb:36:in `block (3 levels) in <top (required)>'

Finished in 9.88 seconds
155 examples, 4 failures

Failed examples:

rspec ./spec/controllers/relationships_controller_spec.rb:12 # RelationshipsController creating a relationship with Ajax should increment the Relationship count
rspec ./spec/controllers/relationships_controller_spec.rb:18 # RelationshipsController creating a relationship with Ajax should respond with success
rspec ./spec/controllers/relationships_controller_spec.rb:29 # RelationshipsController destroying a relationship with Ajax should decrement the Relationship count
rspec ./spec/controllers/relationships_controller_spec.rb:35 # RelationshipsController destroying a relationship with Ajax should respond with success
RS-MBP:sample_app rsoutar$ 
```

这是宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.12'
gem 'bootstrap-sass', '2.1'
gem 'bcrypt-ruby', '3.0.1'
gem 'faker', '1.0.1'
gem 'will_paginate', '3.0.4'
gem 'bootstrap-will_paginate', '0.0.6'
gem 'coffee-rails', '~> 3.2.2'
gem 'uglifier', '>= 1.2.3'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development, :test do
    gem 'sqlite3', '1.3.5'
    gem 'rspec-rails', '2.11.0'
    gem 'guard-rspec', '1.2.1'
    gem 'guard-spork', :github => 'guard/guard-spork'
    gem 'spork', '0.9.2'
    gem 'childprocess', '0.3.6'
end

group :development do
    gem 'annotate', '2.5.0'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.5'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

end

gem 'jquery-rails'

group :test do
    gem 'capybara', '1.1.2'
    gem 'rb-fsevent', '0.9.1', :require => false
    gem 'growl', '1.0.3'
    gem 'factory_girl_rails', '4.1.0'
    gem 'database_cleaner', '0.7.0'
end

group :production do
    gem 'pg', '0.12.2'
end

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

这是relationship_controller_spec.rb

```
require 'spec_helper'

describe RelationshipsController do

  let(:user) { FactoryGirl.create(:user) }
  let(:other_user) { FactoryGirl.create(:user) }

  before { sign_in user }

  describe "creating a relationship with Ajax" do

    it "should increment the Relationship count" do
      expect do
        xhr :post, :create, relationship: { followed_id: other_user.id }
      end.to change(Relationship, :count).by(1)
    end

    it "should respond with success" do
      xhr :post, :create, relationship: { followed_id: other_user.id }
      response.should be_success
    end
  end

  describe "destroying a relationship with Ajax" do

    before { user.follow!(other_user) }
    let(:relationship) { user.relationships.find_by_followed_id(other_user) }

    it "should decrement the Relationship count" do
      expect do
        xhr :delete, :destroy, id: relationship.id
      end.to change(Relationship, :count).by(-1)
    end

    it "should respond with success" do
      xhr :delete, :destroy, id: relationship.id
      response.should be_success
    end
  end
end 
```

这是关系控制器

```
class RelationshipsController < ApplicationController
  before_filter :signed_in_user

  def create
    @user = User.find(params[:relationship][:followed_id])
    current_user.follow!(@user)
    respond_to do |format|
      format.html { redirect_to @user }
      format.js
    end
  end

  def destroy
    @user = Relationship.find(params[:id]).followed
    current_user.unfollow!(@user)
    respond_to do |format|
      format.html { redirect_to @user }
      format.js
    end
  end
end 
```

我不知道我还应该在这个问题中包括什么。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:05:39.390

原来我错过了 create.js.erb 和 destroy.js.erb 这就是为什么我得到 Missing template Relations/ 错误

谢谢您的帮助。:)

# javascript - Javascript 中的表格

> ID：15175946
> 
> 赞同：0
> 
> 时间：2013-03-02T15:09:17.793
> 
> 标签：javascript, html

我目前正在使用一个名为 prototip 的 javascript 产品

他们的默认设置如下

```
<script type="text/javascript" language="javascript">
new Tip('test_style', 'Text for tooltip goes here', {
title: 'Title Goes Here',
style: 'protogrey'
});
</script> 
```

我目前正在寻找在我的工具提示中添加一个表格，但由于某种原因，当我将表格添加到工具提示的文本中时，它永远不会显示。

我尝试将 ' 交换为 " 认为它可能会发生冲突，我也尝试转义表格的结束标签但无济于事。我只是想知道上面的当前设置是否可以做到。

```
<script type="text/javascript" language="javascript">
new Tip('test_style', '<table><tr>
<td width="84">Test</td>
<td width="100">Test</td>
</tr></table>', {
title: 'Test',
style: 'protogrey'
});
</script> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:32:04.980

如果您要将 html 放入一个字符串并使用多行，则必须转义空格。

```
var html = '\
<h1>\
Hello\
</h1>'; 
```

# ruby-on-rails - 无法在 Rails 3.2 中使用复合唯一索引将记录添加到连接表

> ID：15175949
> 
> 赞同：2
> 
> 时间：2013-03-02T15:09:46.607
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

重要 - 阅读下面的编辑以获取有关问题的更新

当我尝试将新记录添加到 SQLite3 上具有唯一复合键索引的连接表时，我得到了我认为的虚假错误。请注意，对于我所做的所有（手动）测试，数据库已通过 db:drop 和 db:migrate 完全重建。

**错误：**

```
ActiveRecord::RecordNotUnique
  SQLite3::ConstraintException: columns adventurer_id, item_id are not unique: 
  INSERT INTO "adventurers_items" ("adventurer_id", "item_id") VALUES (1, 68) 
```

**产生错误的代码：**

```
class Adventurer < ActiveRecord::Base

  after_create :set_starting_skills
  after_create :set_starting_items

  has_and_belongs_to_many :items
  has_and_belongs_to_many :skills

  # automatically add starting skills on creation
  def set_starting_skills
    self.skills = self.profession.starting_skills
  end

  # automatically add starting items on creation
  def set_starting_items
    self.items = self.profession.items
  end 
```

**创建连接表 Adventurers_skills 的迁移：**

```
class AdventurersItems < ActiveRecord::Migration
  def change
    create_table :adventurers_items do |t|
      t.integer :item_id, :null => false
      t.integer :adventurer_id, :null => false
   end

add_index :adventurers_items, :item_id
add_index :adventurers_items, :adventurer_id
add_index :adventurers_items, [:adventurer_id, :item_id], :unique => true 
```

该表存在并且完全为空。为什么我的应用程序由于唯一性约束而无法插入此记录？我对等效表“adventurers_skills”也有同样的错误——我在架构上做错了吗？

**编辑**

系统正在尝试添加相同的项目/技能两次。当我将私有方法更改为此：

```
def set_starting_skills
  skills = profession.starting_skills
end 
```

它不会尝试在连接表中创建任何内容。但是将第一行恢复为 self.skills 如下尝试创建相同的技能 TWICE

```
def set_starting_skills
  self.skills = profession.starting_skills
end 
```

返回

```
(0.4ms)  INSERT INTO "adventurers_skills" ("adventurer_id", "skill_id") VALUES (4, 54)
(4.9ms)  INSERT INTO "adventurers_skills" ("adventurer_id", "skill_id") VALUES (4, 54)
SQLite3::ConstraintException: columns adventurer_id, skill_id are not unique: 
INSERT INTO "adventurers_skills" ("adventurer_id", "skill_id") VALUES (4, 54)
(3.2ms)  rollback transaction 
```

仅返回一项技能`profession.starting_skills`：

```
1.9.3-p194 :022 > Profession.find(7).starting_skills.each {|x| puts x.id}
54 
```

所以真正的问题变成了：为什么 Rails 会尝试两次添加这个 HABTM 记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T20:54:25.427

您需要将回调声明 ( `after_create :set_starting_skills`)放在关系声明 ( )**之后**`has_and_belongs_to_many :skills`。

即模型中线的顺序很重要，否则你会得到这个错误。

这太疯狂了，它有[一个 GitHub 问题](https://github.com/rails/rails/issues/3639)。

# android - Android中的自定义选择器

> ID：15175951
> 
> 赞同：1
> 
> 时间：2013-03-02T15:09:50.260
> 
> 标签：android, android-layout, android-widget

我正在关注链接[https://code.google.com/p/scroll-picker-view-for-android/](https://code.google.com/p/scroll-picker-view-for-android/)以开发自定义选择器。我正在使用代码中的滚动选择器视图。从下面的代码如何获得被选中的项目？

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        scrollPickerView = new ScrollPickerView(this);
        scrollPickerView.addSlot(getResources().getStringArray(R.array.custom_list), 1, ScrollPickerView.ScrollType.Ranged);
        scrollPickerView.setSlotIndex(0, 13);
        ViewGroup.LayoutParams params = new ViewGroup.LayoutParams(LayoutParams.FILL_PARENT, 200);
        this.setContentView(scrollPickerView, params);
    } 
```

我想在选择器下方添加一个按钮。一旦用户点击按钮，它应该提醒/敬酒选定的行文本。如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:20:35.473

**试试这个轮子选择器视图**

```
 public class MainActivity extends Activity
     // TODO: Externalize string-array
    String wheelMenu1[] = new String[]{"name 1", "name 2", "name 3", "name 4", "name 5", "name 6","name 7","name 8","name 9"};
    String wheelMenu2[] = new String[]{"age 1", "age 2", "age 3"};
    String wheelMenu3[] = new String[]{"10", "20","30","40","50","60"};

    // Wheel scrolled flag
    private boolean wheelScrolled = false;

    private TextView text;
    private EditText text1;
    private EditText text2;
    private EditText text3;

    @Override
    public void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            initWheel1(R.id.p1);
            initWheel2(R.id.p2);
            initWheel3(R.id.p3);

            text1 = (EditText) this.findViewById(R.id.r1);
            text2 = (EditText) this.findViewById(R.id.r2);
            text3 = (EditText) this.findViewById(R.id.r3);
            text = (TextView) this.findViewById(R.id.result);
        }

    // Wheel scrolled listener
    OnWheelScrollListener scrolledListener = new OnWheelScrollListener()
        {
            public void onScrollStarts(WheelView wheel)
                {
                    wheelScrolled = true;
                }

            public void onScrollEnds(WheelView wheel)
                {
                    wheelScrolled = false;
                    updateStatus();
                }
        };

    // Wheel changed listener
    private final OnWheelChangedListener changedListener = new OnWheelChangedListener()
        {
            public void onChanged(WheelView wheel, int oldValue, int newValue)
                {
                    if (!wheelScrolled)
                        {
                            updateStatus();
                        }
                }
        };

    /**
     * Updates entered PIN status
     */
    private void updateStatus()
        {
            text1.setText(wheelMenu1[getWheel(R.id.p1).getCurrentItem()]);
            text2.setText(wheelMenu2[getWheel(R.id.p2).getCurrentItem()]);
            text3.setText(wheelMenu3[getWheel(R.id.p3).getCurrentItem()]);

            text.setText(wheelMenu1[getWheel(R.id.p1).getCurrentItem()] + " - " + wheelMenu2[getWheel(R.id.p2).getCurrentItem()] + " - " + wheelMenu3[getWheel(R.id.p3).getCurrentItem()]);
        }

    /**
     * Initializes wheel
     * 
     * @param id
     *          the wheel widget Id
     */

    private void initWheel1(int id)
        {
            WheelView wheel = (WheelView) findViewById(id);
            wheel.setAdapter(new ArrayWheelAdapter<String>(wheelMenu1));
            wheel.setVisibleItems(2);
            wheel.setCurrentItem(0);
            wheel.addChangingListener(changedListener);
            wheel.addScrollingListener(scrolledListener);
        }

    private void initWheel2(int id)
        {
            WheelView wheel = (WheelView) findViewById(id);
            wheel.setAdapter(new ArrayWheelAdapter<String>(wheelMenu2));
            wheel.setVisibleItems(2);
            wheel.setCurrentItem(0);
            wheel.addChangingListener(changedListener);
            wheel.addScrollingListener(scrolledListener);
        }

    private void initWheel3(int id)
        {
            WheelView wheel = (WheelView) findViewById(id);

            wheel.setAdapter(new ArrayWheelAdapter<String>(wheelMenu3));
            wheel.setVisibleItems(2);
            wheel.setCurrentItem(0);
            wheel.addChangingListener(changedListener);
            wheel.addScrollingListener(scrolledListener);
        }

    /**
     * Returns wheel by Id
     * 
     * @param id
     *          the wheel Id
     * @return the wheel with passed Id
     */
    private WheelView getWheel(int id)
        {
            return (WheelView) findViewById(id);
        }

    /**
     * Tests wheel value
     * 
     * @param id
     *          the wheel Id
     * @param value
     *          the value to test
     * @return true if wheel value is equal to passed value
     */
    private int getWheelValue(int id)
        {
            return getWheel(id).getCurrentItem();
        }
} 
```

# c++ - 如何从 CMakeLists.txt 生成 cscope.files

> ID：15175955
> 
> 赞同：2
> 
> 时间：2013-03-02T15:10:14.560
> 
> 标签：c++, c, cmake, cscope

我正在使用 CMake 来构建我的代码。CMakeLists.txt 包含所有 .C 或 .CPP 文件和所有包含目录的列表。

如何实现 CMakeLists.txt 以便我可以有一个`make`选项为我生成 cscope.files，其中包含所有 .C 和 .CPP（或 .CXX）文件的列表以及包含目录中的所有 .h 文件它？

例如，我应该能够运行`make cscopefiles`，它会为我生成 cscope.files。

还是已经有这样的选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:44:27.047

您还可以通过 configure_file 调用扩展弗雷泽的答案，因此最终文件仅在其内容更改时才会更改。

```
file(WRITE
  ${CMAKE_BINARY_DIR}/cscope.files.in
  "${AllFiles}")
configure_file(
  ${CMAKE_BINARY_DIR}/cscope.files.in
  ${CMAKE_BINARY_DIR}/cscope.files
  COPYONLY) 
```

如果其他东西（自定义命令）依赖于 cscope.files 输出文件，这可能有助于最大限度地减少增量重建。如果结果与其当前内容不同，configure_file 调用只会更新输出文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T15:39:45.010

您可以通过添加以下内容在每次运行 CMake 时生成文件：（这假设您当前的文件列表位于 2 个名为`SourceFiles`and的变量中`HeaderFiles`）

```
set(AllFiles ${SourceFiles} ${HeaderFiles})
string(REPLACE ";" "\n" AllFiles "${AllFiles}")
file(WRITE ${CMAKE_BINARY_DIR}/cscope.files "${AllFiles}") 
```

# php - img src里面的PHP

> ID：15175957
> 
> 赞同：2
> 
> 时间：2013-03-02T15:10:28.433
> 
> 标签：php, redirect, image

尝试查看通过图像 src 调用的 PHP 脚本可以执行哪些操作，如下所示：

```
<img src="http://example.com/script.php" /> 
```

现在，我尝试在 script.php 中包含 PHP header() 函数：

```
<?php
header("Location: http://example.com"); 
```

我还尝试回显期望 img 显示它的图像 url，但它没有：

```
<?php
echo 'http://example.com/image.png'; 
```

有没有办法用在 img src 属性中调用的 PHP 脚本来做这些事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:12:13.593

> 有没有办法用在 img src 属性中调用的 PHP 脚本来做这些事情？

不。用作`src`img 标签的资源需要输出图像数据，仅此而已。

有一些例外，例如。`header("location: ....")`重定向，但重定向需要*指向另一个有效的图像资源*，而不是您在示例中显示的网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T15:18:58.243

签出`readfile()`作为从您的输出图像文件的方式`script.php`

```
readfile($file); 
```

在手册中阅读有关它的更多信息：

[http://php.net/manual/en/function.readfile.php](http://php.net/manual/en/function.readfile.php)

其中 Example #1 给出了如何设置标题的想法。

该手册还指出：

> readfile() 不会出现任何内存问题，即使在发送大文件时也是如此。

和

> URL 可用作此函数的文件名

**ps**：这是 Wordpress Multisite 用来打开用户上传（例如图像）文件的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T15:45:16.463

您的*script.php*应该返回带有正确标题的图像输出。例如：

```
<img src="/html/img/script.php" /> 
```

*// 脚本.php*

```
$file = "tiger.jpeg";
$type = "image/jpeg";
header("Content-Type: $type");
header("Content-Length: " . filesize($file));
readfile($file); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T15:45:16.910

你应该记住 src 标签应该直接指向一个图像文件。但是，可以使用 PHP 创建图像，例如使用 GD 库：

[http://php.net/manual/en/book.image.php](http://php.net/manual/en/book.image.php)

所以使用：

```
<img src="http://example.com/script.php" /> 
```

是可能的，只要 script.php 真正输出图像文件，例如使用此处描述的示例：

```
http://www.php.net/manual/en/image.examples-png.php 
```

我过去曾使用这种处理方法在经纪网站的 JPG 图像上叠加文本（例如新的、已售出的、出租的等）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-07T08:26:43.803

> 有没有办法用在 img src 属性中调用的 PHP 脚本来做这些事情？

**是**的，但如其他各种答案所述，PHP 脚本只能输出图像数据。

话虽如此，只需读取图像并将其输出到带有[readfile的流](https://www.php.net/manual/en/function.readfile.php)

```
header('Content-Type: image/png');
readfile($file);
exit(); 
```

我知道我可能晚了几年才能真正帮助你，但公认的答案是不正确的（不再）。

# java - 获取数组中的最后一个对象：O

> ID：15175958
> 
> 赞同：1
> 
> 时间：2013-03-02T15:10:43.573
> 
> 标签：java, list, arraylist

假设在另一个包含字符串的 ArrayList 中有一个 ArrayList。

```
private List<ArrayList<String>> strings = new ArrayList<ArrayList<String>>(); 
```

添加一些数组和字符串后，我想获取最后一个数组中的最后一个字符串，我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T15:12:19.497

好吧，您可以使用：

```
ArrayList<String> lastList = strings.get(strings.size() - 1);
String lastString = lastList.get(lastList.size() - 1); 
```

或使用[番石榴](http://guava-libraries.googlecode.com)（或您自己的`getLast`方法，这很容易编写......）：

```
String lastString = Iterables.last(Iterables.last(strings)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T15:13:03.093

```
List<String> lastInnerList = strings.get(strings.size() - 1);
String lastString = lastInnerList.get(lastInnerList.size() - 1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T15:12:32.710

```
String lastElement = strings.get(strings.size()-1).get(strings.get(strings.size()-1).size()-1); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-02T15:15:18.340

```
int outerListSize = strings.size();
ArrayList<String> lastInnerList = strings.get(outerListSize - 1);
int lastInnerListSize = lastInnerList.size();
String str = lastInnerList.get(lastInnerListSize - 1); 
```

# iphone - 在不重新加载数据的情况下强制在表中更新屏幕

> ID：15175961
> 
> 赞同：0
> 
> 时间：2013-03-02T15:11:16.963
> 
> 标签：iphone, ios, uitableview, reloaddata

我将自定义颜色放入可以根据情况更改的表格单元格中。下面的代码来回改变颜色。我不喜欢`reloadData`每次都必须做一个才能让颜色出现的事实。有没有更便宜的方法来强制单元格颜色更新？

这里还有其他代码已被删除。

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // testing for old selected color
    if (checkedIndexPath)
    {
        // returning old checked cell back to blue
        UITableViewCell *uncheckCell = [tableView cellForRowAtIndexPath:checkedIndexPath];
        uncheckCell.backgroundColor = [UIColor blueColor];
    }

    // changing selected cell background color
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    cell.backgroundColor = [UIColor greenColor];
    checkedIndexPath = indexPath;

    // reloadingtable data
    [self.tableVerseView reloadData];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T15:21:39.077

您不需要 reloadData 方法。有 reloadRowsAtIndexPaths 方法：

```
- (BOOL)tableView:(UITableView *)tableView shouldHighlightRowAtIndexPath:(NSIndexPath *)indexPath {
    return YES;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [(MyCellClass *)[self.tableView cellForRowAtIndexPath:indexPath] setBackgroundColor:[UIColor greenColor]];
    [self.tableView reloadRowsAtIndexPaths:[self.tableView indexPathsForVisibleRows]  withRowAnimation:UITableViewRowAnimationAutomatic];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T15:15:17.197

我认为除了`[... reloadData]`.

你需要按照你的方式去做。

编辑：

要更改字体颜色，请使用：

```
label.textColor=[UIColor redColor];
label.font=[UIFont fontWithName:@"Helvetica-Bold" size:12.0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T17:01:11.207

如果想在某些事件上改变你的细胞的颜色，你不需要`reloadData`，你只需要知道`indexPath`细胞。如果你能在你的***情况下***得到它，请按照以下步骤操作：

*   通过`cellForRowAthInedexPath`方法检索单元格

    ```
    - (UITableViewCell *) retriveCellForIndexPath : (NSIndexPath *) indexPath in : (UITableView *) tableView{
        return [tableView cellForRowAtIndexPath:indexPath];
    } 
    ```

*   现在`cell`以您想要的方式更新

*   您还可以更新单元格内的所有 UIContent，只需使用单元格引用检索它们，在标签的情况下，

    ```
     [cell.textLabel setTextColor:[UIColor redColor]]; 
    ```

# python - 为什么我在 flask.redirect 上收到 302 错误

> ID：15175965
> 
> 赞同：2
> 
> 时间：2013-03-02T15:11:32.287
> 
> 标签：python, flask

我有这段代码[https://github.com/italomaia/flask-empty/blob/master/src/0.8/main.py](https://github.com/italomaia/flask-empty/blob/master/src/0.8/main.py)我在文件末尾写了这段代码

```
def configure_before_request(app):
    @app.before_request
    def before_request():
        hash = pbkdf2_sha256.encrypt(app.config['PASSWORD'], rounds=8000, salt_size=10)
        if session.get('logged_in') != hash:
            return redirect(url_for('login'))
def configure_views(app):
    @app.route('/login/', methods=['GET', 'POST'])
    def login():
        if request.method == 'POST':
            hash = pbkdf2_sha256.encrypt(app.config['PASSWORD'], rounds=8000, salt_size=10)
            if request.form['login'] == app.config['USERNAME'] and pbkdf2_sha256.verify(request.form['password'], hash):
                session['logged_in'] = hash
                return redirect(url_for('index'))
            else:
                flash(u'Неверный логин или пароль')
        return render_template('login.html')

    @app.route('/', methods=['GET', 'POST'])
    def index():
        return 'index_page НАХ.' 
```

如果我运行此代码，我会收到 302 服务器错误（`ERR_TOO_MANY_REDIRECTS`），但如果我更改此行`return redirect(url_for('login'))`，则`return 'Hello!'`所有代码都可以正常工作！我做错了什么？

谢谢。

编辑解决方案问题。

更换 `if session.get('logged_in') != hash:` _ `if session.get('logged_in') != hash and request.endpoint != 'login':`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:21:50.923

好吧，我不是烧瓶专家。但显然您在请求被映射到处理程序之前使用信号来检查凭据，然后重定向到处理程序。但是重定向反过来会触发对您的应用程序的另一个请求并再次调用相同的函数，从而使您进入无限重定向循环。（错误 302 是针对这种情况的特定 http 错误）

我的建议：在每个处理函数的基础上检查凭据，或者至少对你的 before_request 函数做一个例外，即当**“登录/”**请求发生时它不会被调用。

也*可以*直接调用处理**登录/的函数**

# 3d - CUDA 中用于非线性扩散的 3D 索引访问

> ID：15175967
> 
> 赞同：1
> 
> 时间：2013-03-02T15:11:42.740
> 
> 标签：3d, cuda

我正在为 2D/3D 非线性扩散编写我的第一个 CUDA 代码。2D 案例工作正常，但我在 3D 案例中苦苦挣扎。基本上我在有限差分计算阶段得到了零，令人惊讶的是，'deltaN'（请参见下面的代码）给出了正确的答案，但其他的却不起作用（答案为零）。我正在尝试处理 256x256x256 卷。请问有什么建议吗？谢谢！

```
 #define BLKXSIZE 8
 #define BLKYSIZE 8
 #define BLKZSIZE 8
 #define idivup(a, b) ( ((a)%(b) != 0) ? (a)/(b)+1 : (a)/(b) )

void AnisotropDiff_GPU(double* A, double* B, int N, int M, int Z, double sigma, int iter, double tau, int type)
{ 
// Nonlinear Diffusion in 3D 
double *Ad;     

dim3 dimBlock(BLKXSIZE, BLKYSIZE, BLKZSIZE);           
dim3 dimGrid(idivup(N,BLKXSIZE), idivup(M,BLKYSIZE), idivup(Z,BLKYSIZE));    

cudaMalloc((void**)&Ad,N*M*Z*sizeof(double));  
cudaMemcpy(Ad,A,N*M*Z*sizeof(double),cudaMemcpyHostToDevice);  

int n = 1;
while (n <= iter) {    
anis_diff3D<<<dimGrid,dimBlock>>>(Ad, N, M, Z, sigma, iter, tau, type);  
n++;}
cudaMemcpy(B,Ad,N*M*Z*sizeof(double),cudaMemcpyDeviceToHost);
cudaFree(Ad);
} 
```

这是计算有限差分的部分

```
 __global__ void anis_diff3D(double* A, int N, int M, int Z, double sigma, int iter, double tau, int type)
{

 int xIndex = blockDim.x * blockIdx.x + threadIdx.x;
 int yIndex = blockDim.y * blockIdx.y + threadIdx.y;
 int zIndex = blockDim.z * blockIdx.z + threadIdx.z;

 if ( (xIndex < N) && (yIndex < M) && (zIndex < Z) )
 {
    int index_out = xIndex + M*yIndex + N*M*zIndex;

    double deltaN=0, deltaS=0, deltaW=0, deltaE=0, deltaU=0, deltaD=0;
    double cN, cS, cW, cE, cU, cD;

    int indexN = (xIndex-1) + M*yIndex + N*M*zIndex;
    int indexS = (xIndex+1) + M*yIndex + N*M*zIndex;
    int indexW = xIndex + M*(yIndex-1) + N*M*zIndex;
    int indexE = xIndex + M*(yIndex+1) + N*M*zIndex;
    int indexU = xIndex + M*yIndex + N*M*(zIndex-1);
    int indexD = xIndex + M*yIndex + N*M*(zIndex+1);

    if (xIndex>1)
        deltaN = A[indexN]-A[index_out];
    if (xIndex<N)
        deltaS = A[indexS]-A[index_out];    
    if (yIndex>1)
        deltaW = A[indexW]-A[index_out];    
    if (yIndex<M)
        deltaE = A[indexE]-A[index_out];
    if (zIndex>1)
        deltaU = A[indexU]-A[index_out];    
    if (zIndex<Z)
        deltaD = A[indexD]-A[index_out];

   A[index_out] = deltaN ; // works for deltaN but not for deltaS, deltaW... . 

 } 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T17:00:49.973

您尝试在内核中计算的某些值的索引越界。

如果您使用最后一行内核编译代码，如下所示：

```
A[index_out] = deltaS ; 
```

然后运行它`cuda-memcheck`，cuda-memcheck 将报告越界访问：

```
========= Invalid __global__ read of size 8
=========     at 0x000000b0 in anis_diff3D(double*, int, int, int, double, int, double, int)
=========     by thread (7,7,7) in block (31,31,31)
=========     Address 0x408100000 is out of bounds 
```

那么发生了什么？让我们看看你的指数计算：

```
int indexS = (xIndex+1) + M*yIndex + N*M*zIndex; 
```

对于网格中的最后一个线程（块 (31, 31, 31) 中的线程 (7,7,7)），此索引计算索引*超出*`A`了此行中内存数组的末尾：

```
 deltaS = A[indexS]-A[index_out]; 
```

您必须处理这些边界条件才能使事情正常运行。

当我们这样做的时候，如果你做了[错误检查](https://stackoverflow.com/questions/14038589/what-is-the-canonical-way-to-check-for-errors-using-the-cuda-runtime-api)，你的内核就会抛出一个错误。请注意，根据您选择在内核末尾存储的值，编译器可能会优化其他计算，从而使内核看起来运行正确（例如，如果您存储 deltaN 而不是 deltaS）。这是一个带有错误检查的代码示例：

```
#include <stdio.h>
#include <stdlib.h>

#define cudaCheckErrors(msg) \
    do { \
        cudaError_t __err = cudaGetLastError(); \
        if (__err != cudaSuccess) { \
            fprintf(stderr, "Fatal error: %s (%s at %s:%d)\n", \
                msg, cudaGetErrorString(__err), \
                __FILE__, __LINE__); \
            fprintf(stderr, "*** FAILED - ABORTING\n"); \
            exit(1); \
        } \
    } while (0)

 #define BLKXSIZE 8
 #define BLKYSIZE 8
 #define BLKZSIZE 8
 #define idivup(a, b) ( ((a)%(b) != 0) ? (a)/(b)+1 : (a)/(b) )
 #define sizeX 256
 #define sizeY 256
 #define sizeZ 256
 #define sizeT (sizeX*sizeY*sizeZ)

 __global__ void anis_diff3D(double* A, int N, int M, int Z, double sigma, int iter, double tau, int type)
{

 int xIndex = blockDim.x * blockIdx.x + threadIdx.x;
 int yIndex = blockDim.y * blockIdx.y + threadIdx.y;
 int zIndex = blockDim.z * blockIdx.z + threadIdx.z;

 if ( (xIndex < N) && (yIndex < M) && (zIndex < Z) )
 {
    int index_out = xIndex + M*yIndex + N*M*zIndex;

    double deltaN=0, deltaS=0, deltaW=0, deltaE=0, deltaU=0, deltaD=0;
    double cN, cS, cW, cE, cU, cD;

    int indexN = (xIndex-1) + M*yIndex + N*M*zIndex;
    if (indexN > ((N*M*Z)-1)) indexN = (N*M*Z) -1;
    if (indexN < 0) indexN = 0;
    int indexS = (xIndex+1) + M*yIndex + N*M*zIndex;
    if (indexS > ((N*M*Z)-1)) indexS = (N*M*Z) -1;
    if (indexS < 0) indexS = 0;
    int indexW = xIndex + M*(yIndex-1) + N*M*zIndex;
    if (indexW > ((N*M*Z)-1)) indexW = (N*M*Z) -1;
    if (indexW < 0) indexW = 0;
    int indexE = xIndex + M*(yIndex+1) + N*M*zIndex;
    if (indexE > ((N*M*Z)-1)) indexE = (N*M*Z) -1;
    if (indexE < 0) indexE = 0;
    int indexU = xIndex + M*yIndex + N*M*(zIndex-1);
    if (indexU > ((N*M*Z)-1)) indexU = (N*M*Z) -1;
    if (indexU < 0) indexU = 0;
    int indexD = xIndex + M*yIndex + N*M*(zIndex+1);
    if (indexD > ((N*M*Z)-1)) indexD = (N*M*Z) -1;
    if (indexD < 0) indexD = 0;    

    if (xIndex>1)
        deltaN = A[indexN]-A[index_out];
    if (xIndex<N)
        deltaS = A[indexS]-A[index_out];
    if (yIndex>1)
        deltaW = A[indexW]-A[index_out];
    if (yIndex<M)
        deltaE = A[indexE]-A[index_out];
    if (zIndex>1)
        deltaU = A[indexU]-A[index_out];
    if (zIndex<Z)
        deltaD = A[indexD]-A[index_out];

   A[index_out] = deltaS; // works for deltaN but not for deltaS, deltaW... .

 }
}
void AnisotropDiff_GPU(double* A, double* B, int N, int M, int Z, double sigma, int iter, double tau, int type)
{
  // Nonlinear Diffusion in 3D
  double *Ad;

  dim3 dimBlock(BLKXSIZE, BLKYSIZE, BLKZSIZE);
  dim3 dimGrid(idivup(N,BLKXSIZE), idivup(M,BLKYSIZE), idivup(Z,BLKYSIZE));

  cudaMalloc((void**)&Ad,N*M*Z*sizeof(double));
  cudaCheckErrors("cm1");
  cudaMemcpy(Ad,A,N*M*Z*sizeof(double),cudaMemcpyHostToDevice);
  cudaCheckErrors("cc1");
  int n = 1;
  while (n <= iter) {
    anis_diff3D<<<dimGrid,dimBlock>>>(Ad, N, M, Z, sigma, iter, tau, type);
    n++;
    cudaDeviceSynchronize();
    cudaCheckErrors("kernel");
  }
  cudaMemcpy(B,Ad,N*M*Z*sizeof(double),cudaMemcpyDeviceToHost);
  cudaCheckErrors("cc2");
  cudaFree(Ad);
}

int main(){

  double *A;
  A = (double *)malloc(sizeT * sizeof(double));
  if (A == 0) {printf("malloc fail\n"); return 1;}

  for (int i=0; i< sizeT; i++)
    A[i] = (double)(rand()/(double)RAND_MAX);

  printf("data:\n");
  for (int i = 0; i < 8; i++)
    printf("A[%d] = %f\n", i, A[i]);

  AnisotropDiff_GPU(A, A, sizeX, sizeY, sizeZ, 0.5f, 3, 0.5, 3);
  printf("results:\n");
  for (int i = 0; i < 8; i++)
    printf("A[%d] = %f\n", i, A[i]);

  return 0;
} 
```

**编辑** 我已经编辑了上面的代码以将索引计算限制在定义数组的边界。这应该可以防止越界访问。从算法的角度来看，我不知道这是否明智。

# php - 在表格 AJAX,PHP 中的每行显示独立的多个 ajax 查询结果

> ID：15175968
> 
> 赞同：0
> 
> 时间：2013-03-02T15:11:52.410
> 
> 标签：php, ajax, html-table

目标：
使用 AJAX 和 PHP 在下拉框中为表格中的每一行显示一组新的、唯一的选项。

详细信息：
我有一个用 PHP 编写的表，我在 for 循环中创建表的行：

代码：

```
<table>
foreach ($mylist as $i)
{
<tr>
  <td>
       echo '<select name="product[]" onchange="showItems(this.value,'.$i.')" >';
       echo "<option value='APPLE'>APPLE</option>";
       echo "<option value='ORANGE'>ORANGE</option>";
       echo "<option value='PLUM'>PLUM</option>";
       echo '</select>';
  </td>
  <td>
       echo '<select name="sales[]" id="txtHint">';
       echo '</select>';
  </td>
</tr>
}
</table> 
```

这将创建一个如下所示的表：

```
No.   Product                sales mode
---   -------                -------
 1    (Drop-down list here)  (drop-down list here)
 2    (Drop-down list here)  (drop-down list here) 
```

没有`N`。表行数。

当用户从下拉列表中选择特定选项时，例如“APPLE”，在`Product`列中`row 1`，然后使用 AJAX 使用与第一列中选​​择的产品相关的选项更新`sales mode`相同的相应列。`row 1``APPLE`

也就是说，根据`Product`列中的选项，列中的选项`sales mode`会改变。（反之亦然）。

我面临的问题是，每当我选择一个新的不同产品时，在表格的第二行中，第一行的`sales mode`列也会根据第二行的`Product`选择发生变化。

第一步：

```
No.  Product   sales mode
---  ----      ----------
 1   Apple     EXPRESS
 2   (Select)  (Select) 
```

当我接下来执行此操作时[`Orange`在`product`列中选择选项]：

```
No.  Product   sales mode
---  ----      ----------
 1   Apple     EXPRESS//This is the default option for Apple
 2   Orange    (select) 
```

它变成了这样：

```
No.  Product   sales mode
---  ----      ----------
 1   Apple     REGULAR//This is the default option for Orange 
 2   Orange    (select) 
```

AJAX 代码：

```
function showItems(str,val)
{
if (str=="")
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","getuser.php?q="+str+"&val="+val,true);
xmlhttp.send();
} 
```

我如何实现这一目标？[对 AJAX 相当陌生]

感谢您的帮助，建议。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:29:42.140

问题在于，在您的 html 中，您将`id`所有销售模式下拉列表设置为`txtHint`. 除了无效的 html 之外，它还会导致您的 ajax 回调始终使用该 id 更新它找到的第一个元素，在您的示例中恰好是 Apple 的那个。你想要做的是给他们每个人一个唯一的 id，并在你的回调中使用它。

# ruby-on-rails - 使用存根运行 rspec 测试时的未定义方法

> ID：15175970
> 
> 赞同：1
> 
> 时间：2013-03-02T15:11:59.620
> 
> 标签：ruby-on-rails, rspec, rspec-rails

我有一个模型，它有一个 to_csv 方法和一个 import 方法，试图在 rspec 中测试它以确保它做正确的事情但有问题。我收到以下错误：

```
Failures:

  1) Category Class import should create a new record if id does not exist
     Failure/Error: Category.import("filename", product)
     NoMethodError:
       undefined method `path' for "filename":String 
```

模型：

```
class Category
  ...<snip>

  def self.import(file, product)
    product = Product.find(product)
    CSV.foreach(file.path, headers: true, col_sep: ";") do |row|
      row = row.to_hash
      row["variations"] = row["variations"].split(",").map { |s| s.strip }
      category = product.categories.find(row["id"]) || Category.new(row)
      if category.new_record?
        product.categories << category
      else
        category.update_attributes(row)
      end
    end
  end

  def self.to_csv(product, options = {})
    product = Product.find(product)
    CSV.generate(col_sep: ";") do |csv|
      csv << ['id','title','description','variations']
      product.categories.each do |category|
        variations = category.variations.join(',')
        csv << [category.id, category.title, category.description, variations]
      end
    end
  end
end 
```

我的测试：

```
describe Category do

  describe 'Class' do
    subject { Category }

    it { should respond_to(:import) }
    it { should respond_to(:to_csv) }

    let(:data) { "id;title;description;variations\r1;a title;;abd" }

    describe 'import' do
      it "should create a new record if id does not exist" do
        product = create(:product)
        File.stub(:open).with("filename","rb") { StringIO.new(data) }
        Category.import("filename", product)
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T15:13:25.270

我只想`Category.import`取一个文件名：

```
Category.import("filename", product) 
```

然后`Category.import`只需将此文件名传递给`CSV.foreach`调用：

```
CSV.foreach(filename, headers: true, col_sep: ";") do |row| 
```

这样就没有必要存根`File.open`或任何爵士乐。

# string - 这个函数是怎么实现这种类型的参数输入的呢？

> ID：15175973
> 
> 赞同：0
> 
> 时间：2013-03-02T15:12:18.450
> 
> 标签：string, actionscript-3, function, parameters, optional

语言是 AS3，但没关系。几乎所有的代码都可以忽略，我只是有一系列关于函数格式的具体问题我从未见过，但是在探索bulkLoader时发现了这个函数：

以下问题与后续代码有关（被大量编辑，毫无意义），除了回答问题中要求的内容（几乎是 100% 的语法）之外，不需要进一步理解代码：

块 1，问题 1：在参数中分配数据类型 * 是什么意思？

块 2，问题 2：!url 与检查 url 参数是否为空值相同吗？

Chunk 3，问题3：这一步的目的是什么？我不知道用“或语句”分配值是什么意思（在这种情况下可能不是什么意思？），或者空的“{}”表示什么（替代空白数组“[]”？） . 是否允许在调用时输入带有字符串 ID 的参数（即块 5）

块 4，问题 4：函数如何突然将参数寻址为数组？这是 Chunk 3 所做的一部分吗？我假设这就是块 5 中“id”设置值的方式。

第5块，没问题。这是函数调用，它调用 ID 和优先级（函数中未显示），但似乎用户可以输入任意数量的参数，只要将它们标记为 function({foo: blah, bar: bleh }) 在函数中匹配字符串名称为 props["foo", "bar"]。

有谁知道这里发生了什么？这似乎很有用，但我只是对语法的理解不够，无法提供线索。

//块 1

```
public function add(url : *, props : Object= null ) : LoadingItem { 
```

//块 2

```
if(!url || !String(url)){
            throw new Error("[BulkLoader] Cannot add an item with a null url")
        } 
```

//块 3

```
props = props || {}; 
```

//块 4

```
 if (!props["id"] && _allowsAutoIDFromFileName){
            props["id"] = getFileName(url.url);
            log("Adding automatic id from file name for item:", item , "( id= " + props["id"] + " )");
        } 
```

}

//块 5

```
bulkLoader.add("images/image1.jpg", {id:"item1", priority:100}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:45:55.010

问题1： * 表示它可以接收任何数据类型作为参数

问题2：是的，它是一样的

问题 3：如果 Object 存在，则获取该 Object 或创建一个新 Object。`{} == new Object()`

问题 4：只是在对象中添加属性的另一种方式。`props["id"] == props.id`

# python - Python (pygame) Sin、Cos 和 Tan

> ID：15175976
> 
> 赞同：2
> 
> 时间：2013-03-02T15:12:24.490
> 
> 标签：python, pygame, trigonometry

我注意到 Python 中有一个`sin`,`cos`和`tan`函数。

所以，我想我会在我的游戏中使用这些来制定一种瞄准方式，不幸的是，、、、、、的单词`sin`描述`cos`非常混乱。 `tan``asin``acos``atan`

我知道如何做所有学校的`sin`规则`cos`和`tan`规则，我只需要将它们应用到代码中。所以，这就是我需要做的，我只需要知道我必须使用哪一个：

我有

1.  角度
2.  斜边
    （我只是保持我希望对象在再次blit之前行进多远的值）

从角度来看，我想解决相反和相邻的一个/两个。
斜边将是`sin/asin`和`cos/acos`。哪一个？我不知道。

如何输入我的数字？我只是做`aim = cos(angle,hyp)`还是必须应用其他一些计算？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T15:15:39.957

公式是：

```
adjacent = hypothenuse * math.cos(angle)
opposite = hypothenuse * math.sin(angle) 
```

哪里`angle`是弧度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T15:16:15.913

你的措辞有点令人困惑......但我的理解是你在 2D 空间中有一个点，你想将它推进一个特定的距离（斜边），瞄准地平线以上的指定角度。如果是这样的话：

```
newX = oldX + dist * cos(angle)
newY = oldY + dist * sin(angle) 
```

假设`angle`以弧度为单位，Y 轴向上为正，角度为 0，指向右侧，PI/2 指向顶部。如果不是这种情况，您可能需要稍微摆动一下标志。

# c++ - qtgraphicsscene 中的叠加项目

> ID：15175979
> 
> 赞同：1
> 
> 时间：2013-03-02T15:12:39.247
> 
> 标签：c++, qt, qgraphicsscene, qt4.8

我想在场景中绘制一些动态叠加元素。

通常我会选择视图中的paintEvent或前景绘画来进行叠加，但这次我需要与这些元素进行交互：它们就像场景中的所有其他项目......大多数情况下，这种选择来自于这些项目有些复杂，它们与其他 QGraphicsItem(s) 共享渲染。

问题是，被覆盖后，它们的处理方式与场景中的任何其他元素都有点不同：在*视图*坐标空间中渲染，而不是在场景坐标空间中渲染，并忽略视图矩形、拖放、橡皮筋选择中的变化，等等。

这个问题有点笼统：我怎么能将场景用于这样的事情？是否有更好的选择来进行叠加，例如使用多个场景并以某种神奇的方式在单个视图小部件中渲染它们？

# bash - Bash如何获取文件中的文本

> ID：15175981
> 
> 赞同：0
> 
> 时间：2013-03-02T15:12:45.063
> 
> 标签：bash

1.  我归档 /tmp/txt
2.  文件内容：aaa aaa aaa _bbb bbb bbb
3.  我需要保存文件 /tmp/txt_left: **aaa aaa aaa**
4.  我需要保存文件 /tmp/txt_right: **bbb bbb bbb**

！！！注意寻求不使用**变量**的解决方案！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:18:26.813

```
awk -F '_'  '{print $1> "/tmp/txt_left"; print $2 > "/tmp/txt_right" }' /tmp/txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T15:17:10.860

你可以试着剪断线，在下划线上剪开

```
Cat /tmp/txt | cut -d_ -f 1 > txt_left 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T16:05:46.807

### 一种 sed 方式：

更短更快：

```
sed -ne $'h;s/_.*$//;w /tmp/txt_left\n;g;s/^.*_//;w /tmp/txt_right' /tmp/txt 
```

解释：可以写成：

```
sed -ne '
    h;        # hold (copy current line in hold space)
    s/_.*$//; # replace from _ to end of line by nothing
    w /tmp/txt_left
              # Write current line to file
              # (filename have to be terminated by a newline)
    g;        # get (copy hold space to current line buffer)
    s/^.*_//; # replace from begin of line to _ by nothing
    w /tmp/txt_right
              # write
 ' /tmp/txt 
```

### 重击作为[重击](/questions/tagged/bash "显示标记为“bash”的问题")

这不是一个真正的变量，我使用第一个参数元素来完成这项工作并在完成后恢复参数列表：

```
set -- "$(</tmp/txt)" "$@"
echo >>/tmp/txt_right ${1#*_}
echo >>/tmp/txt_left ${1%_*}
shift 
```

我在参数行*中将*字符串放在第一位，在 , 上进行操作`$1`，而不是`shift`参数行，所以没有使用变量，并且很好，参数行返回到他的原始状态

...这是一个**纯粹`bash`**的解决方案;-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T14:58:44.367

使用 bash 进程替换、tee 和 cut：

```
tee -a >(cut -d _ -f 0 > /tmp/txt_left) >(cut -d _ -f 1 >/tmp/txt_right) < /tmp/txt 
```

# c++ - 使用多个参数调用构造函数

> ID：15175990
> 
> 赞同：5
> 
> 时间：2013-03-02T15:13:09.297
> 
> 标签：c++, constructor, arguments

我有

```
Triangle::Triangle()
{
    A = NULL;
    B = NULL;
    C = NULL;
}
Triangle::Triangle(Point& X,Point& Y, Point& Z)
{
    A = new Point;
    *A = X;
    B = new Point;
    *B = Y;
    C = new Point;
    *C = Z;
}

and 

istream& operator>>(istream& in, Triangle& T)
{
    Point X,Y,Z;
    in>>X>>Y>>Z;
    Triangle T(X,Y,Z);  
    return in;
} 
```

其中 Point 是另一个定义具有坐标 X 和 Y 的点的类。我不知道如何在重载函数中调用具有多个参数的构造函数。你能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T15:18:24.687

这就是你的做法：

```
Point px;
Point py;
Point pz;
Triangle trig(px, py, pz); 
```

`trig`将是对象，它是类的一个实例，`Triangle`上面将使用 3 个 Point 参数调用构造函数。

另一种方法是指针：

```
 Triangle *pTrig = new Triangle(pX, pY, pZ); 
```

另外，我建议，这会更好：

```
Triangle::Triangle()
   : A(NULL), B(NULL), C(NULL)
{
}

Triangle::Triangle(const Point& X,const Point& Y, const Point& Z)
 : A(new Point(X)), B(new Point(Y)), C(new Point(Z))
{
} 
```

假设 Point 有一个复制构造函数。

你想从`operator>>`函数内部调用它来更新参数 T，但这不起作用，因为你不能在已经构造的东西上调用构造函数。相反，您需要实现一个赋值运算符。请参阅[http://en.wikipedia.org/wiki/Assignment_operator_%28C%2B%2B%29](http://en.wikipedia.org/wiki/Assignment_operator_%28C%2B%2B%29)了解更多信息。

然后你可以做`T = Triangle(X,Y,Z);`

要实现赋值运算符，您可以这样做：

```
Triangle& Triangle::operator= (const Triangle& other)
{
    if (this != &other) // protect against invalid self-assignment
    {
        if (A != NULL) delete A;
        if (B != NULL) delete B;
        if (C != NULL) delete C;
        A = new Point(other.A);
        B = new Point(other.B);
        C = new Point(other.C);
    }
    return *this;
} 
```

假设 Point 有复制构造函数。要实现复制构造函数，请参阅[http://en.wikipedia.org/wiki/Copy_constructor](http://en.wikipedia.org/wiki/Copy_constructor)

复制构造函数如下所示，但您需要为 Point 执行此操作：

```
Triangle& Triangle::Triangle(const Triangle& other)
  : A(new Point(other.A)), B(new Point(other.B)), C(new Point(other.C))
{
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T15:25:32.780

前两个构造函数是默认构造函数的覆盖。第三个功能是运算符重载，它重载 >> 运算符。您只需要创建一个 Triangle 类的对象，如下所示：

```
Triangle tr(x,y,z); 
```

或者

```
Triangle* tr = new Triangle(x,y,z); 
```

其中 x、y 和 z 是 Point 类的对象。

顺便说一句，正如您在运算符重载（第三个函数）中看到的那样，您已经在创建类 Triangle 的对象 (Triangle T(X,Y,Z);)。

# java - 清除数独表

> ID：15175993
> 
> 赞同：1
> 
> 时间：2013-03-02T15:13:13.313
> 
> 标签：java, swing, methods, jbutton, sudoku

我正在研究这段代码，可以在

[http://pastebin.com/7bCFtUHL](http://pastebin.com/7bCFtUHL)

基本上，我想添加一个清除方法（按钮），在解决数独后清除它。我尝试过创建一个循环，遍历每个单元格并将其设置为 null，但我不完全确定如何准确连接它。我也不确定我必须在哪个类中创建它，以便它可以连接到我有另一个按钮的 GUI。

编辑：这是我目前得到的明确方法

```
public void clearCells(){
    for (int y = 0; y < 9; y++) {
        for (int x = 0; x < 9; x++) {
            cells[y][x] = null;
            cells[y][x].setText("");
        }
    }
} 
```

现在我需要将它附加到另一个类的 JButton 上，这怎么可能？

我的清除按钮看起来像这样

```
JButton clear = new JButton("Clear");

clear.addActionListener(new ActionListener() {

    public void actionPerformed(ActionEvent e)
    {
        //Code                    
    }        
    }
); 
```

我需要在 actionPerformed 方法中添加什么代码才能将它与我的 clearCells 方法连接起来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T15:36:34.273

同样，我会将 clear 方法的“肉”放在模型本身中。解决方案的一般形式是这样做：

```
clear.addActionListener(new ActionListener() {

  public void actionPerformed(ActionEvent e) {
       myModel.clearCells();
  }
}); 
```

Model 类将有一个公共`void clearCells()`方法迭代单元格并清除它们。

* * *

**编辑 1**
注意：是的，我确实查看了您的 pastebin 代码链接，我看到的一个大问题是您的 SwingSudokuBoard 类扩展了 SudokuBoard 类，这是对继承的滥用，您应该使用*组合*来代替。SwingSudokuBoard 类应该包含一个 SudokuBoard 对象的*实例*并在其上调用方法。

* * *

**编辑 2**
你问：

> 我不确定我能完全理解你。您希望我在获得按钮的同一类中使用 clear 方法，但是我无法调用单元格。我添加了 x.clearCells(); 而 x 是什么？我的主要课程如 SwingSudokuBoard.clearCells(); ? 不管怎样，如果我添加你所说的程序抱怨它希望 clearCells 方法和单元格是静态的。但如果我将它们设为静态，我会得到 NullPointerException。

我认为您需要使用模型-视图-控制 (MVC) 模式或其缩写版本，可能是因为您的程序很小，所以您可以将视图与控件结合起来。我建议你有一个单独的模型类，这里可能是 SudokuBoard 类，然后是视图类，这里可能是 SwingSudokuBoard 类。您的视图的控制方法（ActionListeners）将调用模型的`clearCells()`方法。并且不要在这里使用静态的*任何东西*。

* * *

**编辑 3**
你问：

> 我假设一些与这些相关的东西。型号：数独板；视图：SwingSudokuBoard；控制：SwingSudoKiller。那会怎样？我会在控件中发布上面的 actionListener。其他类会是什么样子？因为我假设 clear 方法位于您想要在 SudokuBoard 中的模型中，但它无法与那里的单元格连接。

我不是专业人士，也没有接受过正式的编程培训，所以理论是我的弱点之一，但我对 MVC 的解释是，视图会在模型通知它发生变化时监听模型并自行更新，并且控件监听视图并通过通知模型来响应视图更改。这种精确的模式有变化，不需要完全按照字母，但所有这一切的关键是在你的代码中尽可能地分离出单独的关注点，以便“耦合”（之间的直接连接的数量）类）低或“松散”，“内聚”（处理相同问题的代码）高或“紧”。

在您的程序中，我将再次通过使用匿名内部侦听器来组合视图和控件，就像您正在做的那样。我将拥有视图/控件，即 SwingSudokuBoard 类，将 SudokuBoard 类的实例作为类字段，并让视图/控件的匿名侦听器调用 SudokuBoard 字段上的方法。当我以前做过这种事情时，我通过给它一个 SwingPropertyChangeSupport 对象以及公共`addPropertyChangeListener(...)`和`removePropertyChangeListener(...)`方法来支持模型被观察。然后视图可以很容易地响应模型的变化。

你说：

> 因为我假设 clear 方法位于您想要在 SudokuBoard 中的模型中，但它无法与那里的单元格连接。

我不确定你的意思。该模型*包含*单元格。也许您不是指模型持有的*逻辑*单元格，而是视图持有的*显示*单元格。视图将向模型添加一个侦听器，并在收到模型更改通知时，会向模型询问其数据并使用它来更新可视化单元格。

* * *

**编辑 4**
例如：

```
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;

import javax.swing.*;
import javax.swing.event.SwingPropertyChangeSupport;

public class OverlySimpleModelView {

   private static void createAndShowGui() {
      Model model = new Model();
      ViewControl viewControl = new ViewControl(model);

      JFrame frame = new JFrame("OverlySimpleModelView");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(viewControl.getMainComponent());
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

class ViewControl {
   private JPanel mainPanel = new JPanel();
   private JTextField number1Field = new JTextField(5);
   private JTextField number2Field = new JTextField(5);
   private JTextField productField = new JTextField(5);

   private Model model;

   public ViewControl(Model model) {
      this.model = model;
      model.addPropertyChangeListener(new MyPropChngListener());
      productField.setEditable(false);
      productField.setFocusable(false);

      mainPanel.add(number1Field);
      mainPanel.add(new JLabel(" * "));
      mainPanel.add(number2Field);
      mainPanel.add(new JLabel(" = "));
      mainPanel.add(productField);

      CalculateAction calculateAction = new CalculateAction("Calculate", KeyEvent.VK_C);
      mainPanel.add(new JButton(calculateAction));
      number1Field.addActionListener(calculateAction);
      number2Field.addActionListener(calculateAction);
      mainPanel.add(new JButton(new ClearAction("Clear", KeyEvent.VK_L)));
   }

   public JComponent getMainComponent() {
      return mainPanel;
   }

   private class MyPropChngListener implements PropertyChangeListener {
      @Override
      public void propertyChange(PropertyChangeEvent evt) {
         number1Field.setText(String.valueOf(model.getNumber1()));
         number2Field.setText(String.valueOf(model.getNumber2()));
         productField.setText(String.valueOf(model.calculateProduct()));
      }
   }

   private class CalculateAction extends AbstractAction {

      public CalculateAction(String text, int keyCode) {
         super(text);
         putValue(MNEMONIC_KEY, keyCode);
      }

      @Override
      public void actionPerformed(ActionEvent evt) {
         try {
            double number1 = Double.parseDouble(number1Field.getText());
            double number2 = Double.parseDouble(number2Field.getText());

            model.setNumber1(number1);
            model.setNumber2(number2);
         } catch (NumberFormatException e) {
            e.printStackTrace();
         }
      }
   }

   private class ClearAction extends AbstractAction {

      public ClearAction(String text, int keyCode) {
         super(text);
         putValue(MNEMONIC_KEY, keyCode); // to allow buttons a mnemonic letter
      }

      @Override
      public void actionPerformed(ActionEvent evt) {
         model.clear();
      }
   }
}

class Model {
   public static final String NUMBERS_CHANGED = "numbers changed";
   private double number1 = 0.0;
   private double number2 = 0.0;
   private SwingPropertyChangeSupport propChngSupport = 
         new SwingPropertyChangeSupport(this);

   public double getNumber1() {
      return number1;
   }

   public double getNumber2() {
      return number2;
   }

   public void clear() {
      setNumber1(0.0);
      setNumber2(0.0);
   }

   // make number1 field a "bound" property, one that notifies listeners if it is changed.
   public void setNumber1(double number1) {      
      Double oldValue = this.number1;
      Double newValue = number1;
      this.number1 = number1;
      propChngSupport.firePropertyChange(NUMBERS_CHANGED, oldValue , newValue);
   }

   // ditto for the number2 field
   public void setNumber2(double number2) {
      Double oldValue = this.number2;
      Double newValue = number2;
      this.number2 = number2;
      propChngSupport.firePropertyChange(NUMBERS_CHANGED, oldValue , newValue);
   }

   public double calculateProduct() {
      return number1 * number2;
   }

   public void addPropertyChangeListener(PropertyChangeListener listener) {
      propChngSupport.addPropertyChangeListener(listener);
   }

   public void removePropertyChangeListener(PropertyChangeListener listener) {
      propChngSupport.removePropertyChangeListener(listener);
   }
} 
```

或者可能更好，因为它使用了一个数字数组：

```
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;

import javax.swing.*;
import javax.swing.event.SwingPropertyChangeSupport;

public class OverlySimpleModelView {

   private static void createAndShowGui() {
      Model model = new Model(5);
      ViewControl viewControl = new ViewControl(model);

      JFrame frame = new JFrame("OverlySimpleModelView");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(viewControl.getMainComponent());
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

class ViewControl {
   private JPanel mainPanel = new JPanel();
   private JTextField[] numberFields;
   private JTextField productField = new JTextField(5);

   private Model model;

   public ViewControl(Model model) {
      this.model = model;
      model.addPropertyChangeListener(new MyPropChngListener());
      productField.setEditable(false);
      productField.setFocusable(false);

      CalculateAction calculateAction = new CalculateAction("Calculate", KeyEvent.VK_C);

      numberFields = new JTextField[model.getNumberFieldsLength()];
      for (int i = 0; i < numberFields.length; i++) {
         numberFields[i] = new JTextField("0.0", 5);
         mainPanel.add(numberFields[i]);
         numberFields[i].addActionListener(calculateAction);

         if (i < numberFields.length - 1) {
            mainPanel.add(new JLabel(" + "));
         } else {
            mainPanel.add(new JLabel(" = "));
         }
      }
      mainPanel.add(productField);

      mainPanel.add(new JButton(calculateAction));
      mainPanel.add(new JButton(new ClearAction("Clear", KeyEvent.VK_L)));
   }

   public JComponent getMainComponent() {
      return mainPanel;
   }

   private class MyPropChngListener implements PropertyChangeListener {
      @Override
      public void propertyChange(PropertyChangeEvent evt) {
         for (int i = 0; i < numberFields.length; i++) {
            numberFields[i].setText(String.valueOf(model.getNumber(i)));
         }
         productField.setText(String.valueOf(model.calculateSum()));
      }
   }

   private class CalculateAction extends AbstractAction {

      public CalculateAction(String text, int keyCode) {
         super(text);
         putValue(MNEMONIC_KEY, keyCode);
      }

      @Override
      public void actionPerformed(ActionEvent evt) {
         try {
            double[] numbers = new double[numberFields.length];
            for (int i = 0; i < numbers.length; i++) {
               numbers[i] = Double.parseDouble(numberFields[i].getText());
            }

            model.setNumbers(numbers);
         } catch (NumberFormatException e) {
            e.printStackTrace();
         }
      }
   }

   private class ClearAction extends AbstractAction {

      public ClearAction(String text, int keyCode) {
         super(text);
         putValue(MNEMONIC_KEY, keyCode); // to allow buttons a mnemonic letter
      }

      @Override
      public void actionPerformed(ActionEvent evt) {
         model.clear();
      }
   }
}

class Model {
   public static final String NUMBERS_CHANGED = "numbers changed";
   private double[] numbers;
   private SwingPropertyChangeSupport propChngSupport = 
         new SwingPropertyChangeSupport(this);

   public Model(int length) {
      numbers = new double[length];
   }

   public void setNumbers(double[] numbers) {
      double[] oldValue = this.numbers;
      double[] newValue = numbers;
      this.numbers = numbers;
      propChngSupport.firePropertyChange(NUMBERS_CHANGED, oldValue , newValue);

   }

   public double calculateSum() {
      double sum = 0.0;
      for (double number : numbers) {
         sum += number;
      }
      return sum;
   }

   public double getNumber(int i) {
      return numbers[i];
   }

   public int getNumberFieldsLength() {
      return numbers.length;
   }

   public void clear() {
      double[] newNumbers = new double[numbers.length];
      setNumbers(newNumbers);
   }

   public void addPropertyChangeListener(PropertyChangeListener listener) {
      propChngSupport.addPropertyChangeListener(listener);
   }

   public void removePropertyChangeListener(PropertyChangeListener listener) {
      propChngSupport.removePropertyChangeListener(listener);
   }
} 
```

# php - 保存图片的php函数

> ID：15175995
> 
> 赞同：0
> 
> 时间：2013-03-02T15:13:17.360
> 
> 标签：php, image, function, save

我在我的网站上有一些用于用户头像的图像，例如[http://drksde.tk/images/avatar-Luxie.jpeg](http://drksde.tk/images/avatar-Luxie.jpeg) 我想添加一个链接，允许用户下载头像图像，当有人单击链接，应出现“另存为”对话框。

* * *

现在问题是图片没有正常下载，但是出现了对话框，下面是[头像下载](http://drksde.tk/images/user-Luxie.jpeg)链接，代码：

```
<?php
    $username = $_GET['username'];
    $size = $_GET['size'];
    $ext = $_GET['ext'];
    $border = $_GET['border'];
    $basename = basename($_SERVER['REQUEST_URI']);

    if(!isset($size)) { $size = 'small'; }
    if(!isset($ext)) { $ext = 'jpeg'; }
    if(!isset($border)) { $border = 'true'; }

$file = 'avatar-'.$size.'-'.$username.'.'.$ext;

    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.$basename);
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    #header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:39:11.217

您可以在此处查看 php.net 手册中的**示例 #1 ：**

[http://php.net/manual/en/function.readfile.php](http://php.net/manual/en/function.readfile.php)

它显示了如何强制下载图像。

您可以将其放入脚本`image.php`中并像这样使用它

```
 <a href="http://example.com/image.php?user=123">download avatar image</a> 
```

您可以将其与`$_GET['user']`参数一起使用以提供正确的用户图像文件。

只需记住验证 GET 输入。