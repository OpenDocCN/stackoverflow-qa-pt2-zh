# StackOverflow 问答 14399000-14399999

# mysql - 替换“MySQL数据库中的可变（变化）文本

> ID：14399002
> 
> 赞同：0
> 
> 时间：2013-01-18T12:29:11.507
> 
> 标签：mysql, database, joomla

这个问题可能很容易回答，或者根本没有答案。

我正在更新一个已经有很多文章的网站，以便与移动设备兼容。我遇到的问题之一是图像的大小。所以，我创建了一个新的 CSS 类，它负责以响应方式重新调整图像的大小。

我遇到的问题是大多数图像都包含`width="XXX"`and `height="XXX"`。为了使我的 CSS 类正常工作，我需要摆脱宽度和高度规范。

我在`Joomla`使用一个不错的数据库文本替换器组件时这样做，所以我不需要知道实际的 REPLACE 语法，而是如何定位所有不同的宽度和高度。

我当然可以做这样的事情：

```
Original: width="
Replace for: (empty) 
```

问题是如何定位所有进入`"`和`"`. 我曾尝试使用 *，但它不起作用。

您是否知道我可以通过这个组件或直接使用 MySQL 语法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:51:13.570

有一个`MySQL`名为 的用户定义函数[`REGEXP_REPLACE`](https://launchpad.net/mysql-udf-regexp)。唯一的缺点是您需要重建`MySQL`服务器。

另一种选择是创建一个粗略的 PHP 脚本，该脚本将遍历整个数据库以搜索属性并使用替换的字符串更新这些行。

# ios - 调用 [self.navigationController pushViewController:animated:] 时需要很长时间才能将 UIView 推送到 UINavigation Controller

> ID：14399004
> 
> 赞同：0
> 
> 时间：2013-01-18T12:29:23.033
> 
> 标签：ios, uinavigationcontroller

我试图通过调用以下方法将一个推`UIView`到另一个上：`UIView``UINavigationController`

```
signupPageObj = [[SignupPage alloc]initWithNibName:@"SignupPage" bundle:nil];
[self.navigationController pushViewController:signupPageObj animated:YES]; 
```

但是加载我的 SignUpPage 时卡住了一段时间`UIView`。我不知道是什么原因，但因为我没有太多的自定义`viewDidLoad`和方法`initWithNibName`。

整个代码`initWithNibName`如下：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

    if (self) 
    {
        statusArray=[[NSMutableArray alloc] init];
        UILabel *labelforNavigationTitle = [[UILabel alloc] initWithFrame:CGRectZero];
        labelforNavigationTitle.backgroundColor = [UIColor clearColor];
        labelforNavigationTitle.font = [UIFont fontWithName:FONTSAVINGSBOND size:30.0];
        labelforNavigationTitle.shadowColor = [UIColor colorWithWhite:0.0 alpha:0.5];
        labelforNavigationTitle.textAlignment = UITextAlignmentCenter;
        labelforNavigationTitle.textColor = [UIColor whiteColor]; // change this color
        self.navigationItem.titleView = labelforNavigationTitle;
        labelforNavigationTitle.text = NSLocalizedString(@"Sign Up", @"");
        [labelforNavigationTitle sizeToFit];

    }
    return self;

}

-(void)viewDidLoad
{

    [super viewDidLoad];

    self.fullPathToFile=@"";
    self.gender=@"";
    strForGender=self.gender;
    labelInDatePicker.font=[UIFont fontWithName:FONTCENTURYGOTHICBOLD size:17.0];

    UIImage* imageCancel = [UIImage imageNamed:@"cancelbtn.png"];
    CGRect frameimg = CGRectMake(0, 0, (imageCancel.size.width)/2, (imageCancel.size.height)/2);

    UIButton *cancelButton = [[UIButton alloc] initWithFrame:frameimg];
    [cancelButton setBackgroundImage:imageCancel forState:UIControlStateNormal];
    [cancelButton addTarget:self action:@selector(cancelButtonclickedInAvtar)
         forControlEvents:UIControlEventTouchUpInside];
    [cancelButton setShowsTouchWhenHighlighted:YES];

    self.pickerBirthdayView.frame=CGRectMake(0,460,320,252);
    [self.view addSubview:self.pickerBirthdayView];

    self.avtarView.frame=CGRectMake(0,460,320,460);
    [self.view addSubview:self.avtarView];
    cancelButtonInAvtarView=[[UIBarButtonItem alloc]initWithCustomView:cancelButton];

    self.termsAndConditionPage.frame=CGRectMake(0,460,320,460);
    [self.view addSubview:self.termsAndConditionPage];

    if ([self.navigationController.navigationBar respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)] ) 
    {
        UIImage *image = [UIImage imageNamed:@"titlebg.png"] ;
        [self.navigationController.navigationBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault];
    }
    [self performSelector:@selector(settingScrollView) withObject:nil afterDelay:1.0];

    scrollPrevButton.hidden=YES;
    scrollNextButton.hidden=NO;

    isSectionExpanded=NO;
    checkForImage=2;
    termsAndConditionChecked=2;
    checkForBackgroundImage=10;
    start=10;

    UIImage* image1 = [UIImage imageNamed:@"backbtn.png"];
    CGRect frameimg1 = CGRectMake(0, 0, (image1.size.width)/2, (image1.size.height)/2);

    UIButton *backButton = [[UIButton alloc] initWithFrame:frameimg1];
    [backButton setBackgroundImage:image1 forState:UIControlStateNormal];
    [backButton addTarget:self action:@selector(popToRootViewController)
         forControlEvents:UIControlEventTouchUpInside];

    //    UIImage* image2 = [UIImage imageNamed:@"submitbtn.png"];
    //    CGRect frameimg2 = CGRectMake(0, 0, (image2.size.width)/2, (image2.size.height)/2);

    //    UIButton *submitButton = [[UIButton alloc] initWithFrame:frameimg2];
    //    [submitButton setBackgroundImage:image2 forState:UIControlStateNormal];
    //    [submitButton addTarget:self action:@selector(submitButtonPressed:)forControlEvents:UIControlEventTouchUpInside];

    UIImage* imageforTermsandConditionPage = [UIImage imageNamed:@"backbtn.png"];
    CGRect frameimgforTermsandConditionPage = CGRectMake(0, 0, (imageforTermsandConditionPage.size.width)/2, (imageforTermsandConditionPage.size.height)/2);

    UIButton *backButtonforTermsandConditionPage = [[UIButton alloc] initWithFrame:frameimgforTermsandConditionPage];
    [backButtonforTermsandConditionPage setBackgroundImage:imageforTermsandConditionPage forState:UIControlStateNormal];
    [backButtonforTermsandConditionPage addTarget:self action:@selector(backtoSignupPage) forControlEvents:UIControlEventTouchUpInside];

    UIImage* imageforChooseIconPage = [UIImage imageNamed:@"backbtn.png"];
    CGRect frameimgforChooseIconPage = CGRectMake(0, 0, (imageforChooseIconPage.size.width)/2, (imageforChooseIconPage.size.height)/2);

    UIButton *backButtonforChooseIconPage = [[UIButton alloc] initWithFrame:frameimgforChooseIconPage];
    [backButtonforChooseIconPage setBackgroundImage:imageforTermsandConditionPage forState:UIControlStateNormal];
    [backButtonforChooseIconPage addTarget:self action:@selector(backtoSignupPage) forControlEvents:UIControlEventTouchUpInside];

    backButton1 = [[UIBarButtonItem alloc] initWithCustomView:backButton];
    self.navigationItem.leftBarButtonItem = backButton1;

    //    submitButton1=[[UIBarButtonItem alloc]initWithCustomView:submitButton];
    //    self.navigationItem.rightBarButtonItem=submitButton1;

    backButtonInTermsAndCondition=[[UIBarButtonItem alloc]initWithCustomView:backButtonforTermsandConditionPage];
    backButtonInChooseIcon=[[UIBarButtonItem alloc]initWithCustomView:backButtonforChooseIconPage];

    CALayer *layer = [self.objTextView layer];
    [layer setMasksToBounds:YES];
    [layer setCornerRadius:10.0];
    [layer setBorderWidth:0.0];
    [layer setBorderColor:[[UIColor lightGrayColor] CGColor]];
}

-(void)settingScrollView
{
    arrOfImages=[NSArray arrayWithObjects:@"Avtar0.png",@"Avtar1.png",@"Avtar2.png",@"Avtar3.png",@"Avtar4.png",@"Avtar5.png",@"Avtar6.png",@"Avtar7.png",@"Avtar8.png",@"Avtar9.png",nil];

    pageControl.numberOfPages = kNumberOfPages;
    pageControl.currentPage = 0;
    pageControl = [[PageControl alloc] initWithFrame:rect] ;
    pageControl.frame = rect;
    pageControl.delegate=self;
    pageControl.numberOfPages=[arrOfImages count];
    pageControl.currentPage = self.currentPage;
    [self.view addSubview:pageControl];

    scrollV = [[UIScrollView alloc]init];
    scrollV.frame=CGRectMake(35,55,250,246);
    scrollV.backgroundColor=[UIColor clearColor];
    scrollV.delegate=self;
    scrollV.pagingEnabled=YES;
    self.scrollV.contentSize = CGSizeMake(self.scrollV.frame.size.width *kNumberOfPages, 220);

    self.scrollV.showsHorizontalScrollIndicator = NO;
    self.scrollV.showsVerticalScrollIndicator = NO;
    self.scrollV.scrollsToTop = NO;
    self.scrollV.delegate = self;

    [self.avtarView addSubview:scrollV];

    for(int k =0;k<arrOfImages.count;k++)
    {

        UIButton *btn=[UIButton  buttonWithType:UIButtonTypeCustom];
        btn.tag=k;
        btn.imageView.contentMode= UIViewContentModeScaleAspectFit;
        [btn setImage:[UIImage imageNamed:[arrOfImages objectAtIndex:k]] forState:UIControlStateNormal];
        [btn setImage:[UIImage imageNamed:[arrOfImages objectAtIndex:k]] forState:UIControlStateHighlighted];
         btn.frame=CGRectMake((self.scrollV.frame.size.width * k),0, 250,241);
        [btn addTarget:self action:@selector(setImageInScrollView:) forControlEvents:UIControlEventTouchUpInside];
        [self.scrollV addSubview:btn];
    }

} 
```

如果有人对此有建议或解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:41:11.030

我注意到您`settingScrollView`正在加载一堆图像（特别是如果它们很大），这可能会很慢。这也是对内存的过度使用。这个问题有两种常见的解决方案：

1.  您可以使用异步图像加载。除了在主队列中加载图像，您可以使用 GCD（或任何并发技术）在后台加载图像，然后将图像视图`image`属性的设置分派回主队列。这解决了性能问题，但没有解决内存问题。

2.  更好的是，您可以使用延迟加载，仅加载当前可见图像的图像。然后将您的视图控制器配置为 a`UIScrollViewDelegate`并且当用户滚动到下一个图像时，然后加载它。您可以对此进行变体，加载当前图像和“下一个”图像，当用户滚动到下一个图像时，您会延迟加载新的“下一个”图像。大多数延迟加载技术也采用异步图像加载，这是我的第一个观察。

* * *

**更新：**

显然，如果您替换以下内容，您的屏幕演示将会得到改善：

```
[self performSelector:@selector(settingScrollView) withObject:nil afterDelay:1.0]; 
```

只需：

```
[self settingScrollView]; 
```

但我想你是因为某种原因延迟了那一秒。也许您不喜欢加载十张图像所花费的延迟，并且您不想因此减慢整个用户界面的速度。所以你可以使用我的第一个技术，图像的异步加载，在加载图像时不阻塞用户界面。如果你想这样做，你可以用类似的东西替换`for`循环：`settingScrollView`

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

for (int k = 0; k < arrOfImages.count; k++)
{
    UIButton *btn = [UIButton  buttonWithType:UIButtonTypeCustom];
    btn.tag = k;
    btn.imageView.contentMode = UIViewContentModeScaleAspectFit;
    dispatch_async(queue, ^{

        // retrieve the image in a background queue

        UIImage *image = [UIImage imageNamed:[arrOfImages objectAtIndex:k]];

        // and now update the image property in your UI in the main queue

        dispatch_async(dispatch_get_main_queue(), ^{
            [btn setImage:image forState:UIControlStateNormal];
            [btn setImage:image forState:UIControlStateHighlighted];

            btn.frame=CGRectMake((self.scrollV.frame.size.width * k),0, 250, 241);
            [btn addTarget:self action:@selector(setImageInScrollView:) forControlEvents:UIControlEventTouchUpInside];
            [self.scrollV addSubview:btn];
        });
    });
    // btn.frame=CGRectMake((self.scrollV.frame.size.width * k),0, 250, 241);
    // [btn addTarget:self action:@selector(setImageInScrollView:) forControlEvents:UIControlEventTouchUpInside];
    // [self.scrollV addSubview:btn];
} 
```

话虽如此，图像的加载`imageNamed`通常并没有那么慢（尽管如果图像真的很大，它可能会引入一个可观察到的，如果适度的话，延迟）。但是上面的代码将进一步最小化从持久存储加载图像所带来的用户界面延迟。假设您的图像大约为 250x241，性能提升是适度的（当然，它返回到我的用户界面的速度是原来的十倍，但是因为同步加载图像只需要 0.05 秒，而异步加载它们，我的 UI 返回0.005 秒）。这种技术在拍摄真正平滑的 tableview 滚动时非常有用，或者如果从 web 加载图像，但不清楚它是否值得在这里（除非你的图像很大）。

我不会解决我的第二点，图像的延迟加载，除非你告诉我们你有内存问题。如果是这种情况，我们将用（因为这是一个非常粗糙的缓存系统）替换该`imageNamed`方法，并将其包装在适当的延迟加载方案中。但是只有十张图像，您可能不需要去那里。所以我会推迟那个解决方案，除非你回来告诉我们你有严重的记忆问题。`imageWithContentsOfFile``imageNamed`

# python - 如何加快python中的迭代？

> ID：14399005
> 
> 赞同：2
> 
> 时间：2013-01-18T12:29:28.713
> 
> 标签：python, performance, iteration

我想知道你是否可以帮助我加快我的 python 脚本。

我有两个清单：

```
a=['a','b','c','d','e','f','g','h','i','j']

b=['b','f','g','j'] 
```

我想创建一个列表，其中将包含 b 的元素，但长度为 a，其中不在 b 中的元素替换为其他内容，比方说`'-999'`。另外，我不想使用实际元素（a，b，c ...），而是用 b 中的元素索引替换它。所以它看起来像这样：

```
c=['-999',0,'-999','-999','-999', 1, 2,'-999','-999',3] 
```

我现在的代码是：

```
c=[]

counter=0

for each in a:
    if each in b:
        c.append(counter)
        counter+=1
    else:
        c.append('-999') 
```

它工作正常，但是，在现实生活中，我的列表 a 有 600 000 个元素长，实际上有 7 个 b 列表我需要迭代它们，所有元素也在 3k 到 250k 之间。

关于如何加快速度的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T12:36:24.393

如果其中的元素`b`是唯一的，那么您可以尝试以下操作：

```
In [76]: a=['a','b','c','d','e','f','g','h','i','j']

In [77]: b=['b','f','g','j']

In [78]: dic={x:i for i,x in enumerate(b)}

In [79]: dic
Out[79]: {'b': 0, 'f': 1, 'g': 2, 'j': 3}

In [81]: [dic.get(x,'-999') for x in a]
Out[81]: ['-999', 0, '-999', '-999', '-999', 1, 2, '-999', '-999', 3] 
```

对于重复的项目，您可以使用`defaultdict(list)`：

```
In [102]: a=['a','b','c','d','e','f','g','b','h','i','f','j']

In [103]: b=['b','f','g','j','b','f']

In [104]: dic=defaultdict(list)

In [105]: for i,x in enumerate(b):
    dic[x].append(i)
   .....:     

#now convert every value(i.e list) present in dic to an iterator.

In [106]: dic={x:iter(y) for x,y in dic.items()}  

In [107]: [next(dic[x]) if x in dic else '-999' for x in a]  #call next() if the key 
                                                             #is present else use '-999'
Out[107]: ['-999', 0, '-999', '-999', '-999', 1, 2, 4, '-999', '-999', 5, 3] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:39:29.027

更简单的东西：

```
a=['a','b','c','d','e','f','g','h','i','j']

b=['b','f','g','j']

for i,x in enumerate(a):
    a[i] = b.index(x) if x in b else -999 
```

输出：

```
[-999, 0, -999, -999, -999, 1, 2, -999, -999, 3] 
```

* * *

**分析：**

OP的方法：

```
>>> 
len(a) = 10000
len(b) = 5000
Time = 0:00:01.063000 
```

方法一：

```
c=[]
for i,x in enumerate(a):
    c.append(b.index(x) if x in b else -999)

>>> 
len(a) = 10000
len(b) = 5000
Time = 0:00:01.109000 
```

Ashwini Chaudhary 方法：

```
>>> 
len(a) = 10000
len(b) = 5000
Time = 0:00:00 
```

# python - 在 python 中创建时扩展列表，如何？

> ID：14399007
> 
> 赞同：1
> 
> 时间：2013-01-18T12:29:32.473
> 
> 标签：python, list

这是示例字典一

```
one = {'a': 1,'b': 3} 
```

第二个字典是

```
second = {'x': 45,'y': 45} 
```

这是关键容器（类型`list`）

```
key_con = one.keys()
key_con = key_con.extend(second.keys()) 
```

一切都很好。但我尝试像这样缩短代码

```
key_con = one.keys().extend(second.keys()) 
```

现在，`key_con`我`NoneType` 想在一行代码中制作这个关键容器。如何实现呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T12:31:18.823

```
key_con = one.keys() + second.keys() 
```

`extend`就地修改列表并且不返回任何内容。你确定你的第一个片段有效吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:58:27.420

虽然[Pavel Anossov 的另一个答案](https://stackoverflow.com/a/14399044/722121)回答了您明确提出的问题，但我仍然认为这不是解决手头问题的最佳方法。字典是无序的，并且不能有重复的键，所以使用列表来存储键本质上是一种误导和一个坏主意。

相反，将这些数据存储在一个集合中是一个更好的主意 - 集合没有顺序，并且不能包含重复项，因此更有效地填补了这个角色。

在 Python 3.x 中，[`dict.keys()`](http://docs.python.org/3/library/stdtypes.html#dict.keys)提供[了一个类似集合的字典视图](http://docs.python.org/3/library/stdtypes.html#dict-views)，因此最好通过以下方式完成：

```
key_con = one.keys() | two.keys() 
```

我们使用`|`（二元或）运算符，它在集合和类似集合的对象上表示[联合（一个集合](http://docs.python.org/3.2/library/stdtypes.html#set.union)*或*另一个集合中的所有元素）。

在 2.7 中，可以通过以下方式获得相同的行为[`dict.viewkeys()`](http://docs.python.org/2.7/library/stdtypes.html#dict.viewkeys)：

```
key_con = one.viewkeys() | two.viewkeys() 
```

在旧版本中，我们可以使用[`dict.iterkeys()`](http://docs.python.org/2.6/library/stdtypes.html#dict.iterkeys)with [`set()`](http://docs.python.org/2.6/library/stdtypes.html#set)：

```
key_con = set(one.iterkeys()) | set(two.iterkeys()) 
```

# drupal - 如何定义自定义访问检查功能以查看用户是否可以在 Drupal 7 中创建节点？

> ID：14399010
> 
> 赞同：0
> 
> 时间：2013-01-18T12:29:37.153
> 
> 标签：drupal, drupal-permissions, drupal-nodes

在用户创建节点之前，我有几件事要检查。所以，如果用户访问 node/add/proposal 我想检查他是否可以这样做，所以我写了一个模块：

```
function proposals_menu() {

    $items['node/add/proposal'] = array(
        'title' => t('Proposal'),
        'access callback' => 'proposals_access',
    );

    return $items;
}

function proposals_access() {
    $cond1;
    $cond2;
    ...

    return cond1 && cond2 && ....;
} 
```

当我单击添加内容-> 提案时，我得到一个空白页。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:48:11.140

要覆盖现有的菜单项，您需要使用[`hook_menu_alter()`](http://api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_menu_alter/7)而不是`hook_menu()`. 例如

```
function proposals_menu_alter(&$items) {
  $items['node/add/proposal']['access callback'] = 'some_function';
} 
```

但是还有[`hook_node_access()`](http://api.drupal.org/api/drupal/modules!node!node.api.php/function/hook_node_access/7)一个更适合用于（顾名思义）检查节点访问的方法。例如

```
function proposals_node_access($node, $op, $account) {
  $type = is_string($node) ? $node : $node->type;

  if ($type == 'proposal' && $op == 'create') {
    if ($allow_access) {
      return NODE_ACCESS_ALLOW;
    }
    else {
      return NODE_ACCESS_DENY;
    }
  }
  return NODE_ACCESS_IGNORE;
} 
```

假设您`$allow_access`使用访问检查进行填充。请务必使用`$account`传递给挂钩的对象来验证针对该用户对象的操作。不要依赖当前登录的用户，这并不总是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:55:13.873

你得到一个空白页面，因为你没有告诉 drupal 如何渲染你正在创建的路径。为此，您需要向项目添加**页面回调**。正如[hook_menu 文档](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_menu/7)中所指定的，当用户访问路径时，将调用此函数来显示页面。

```
 ...
$items['node/add/proposal'] = array(
        ...
        'page callback' => 'proposals_display_function'
    );
 ... 
```

# sql - 向数据库中的表添加列时出现 oracle 错误（错误：00604）

> ID：14399011
> 
> 赞同：2
> 
> 时间：2013-01-18T12:29:42.987
> 
> 标签：sql, database, oracle

尝试向表中添加新列时出现此错误：

```
ALTER TABLE TBLCOMPANY ADD EVENTCATEGORYLEVEL NUMBER (20) DEFAULT 1
Error report:
SQL Error: ORA-00604: error occurred at recursive SQL level 1
ORA-29861: domain index is marked LOADING/FAILED/UNUSABLE
00604\. 00000 -  "error occurred at recursive SQL level %s"
*Cause:    An error occurred while processing a recursive SQL statement
           (a statement applying to internal dictionary tables).
*Action:   If the situation described in the next error on the stack
           can be corrected, do so; otherwise contact Oracle Support. 
```

我不知道为什么会这样。我试图用谷歌搜索它，但似乎没有人有答案。（分贝建议的行动是荒谬的）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T13:48:41.937

我发现了问题！这是因为我的用户没有创建索引的特权。我建议任何有同样问题的人运行下面的查询，看看他们是否有足够的权限来做他们想做的事情：

```
select * from session_privs; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:35:36.797

```
ORA-29861: domain index is marked LOADING/FAILED/UNUSABLE 
```

您有一个损坏或仍在加载的域（oracle 文本）索引。

运行它来查看它/他们：

```
select index_name, status from user_indexes
where index_type = 'DOMAIN' and table_name = 'TBLCOMPANY'; 
```

您必须重建或删除索引才能继续。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T12:33:12.900

尝试重建`TBLCOMPANY`表上的所有索引。

如何查找索引：

```
select index_name from dba_indexes where table_name='TBLCOMPANY'; 
```

重建索引：

```
alter index indexname rebuild; 
```

# java - 空指针异常、EJB、JPA webapp

> ID：14399013
> 
> 赞同：0
> 
> 时间：2013-01-18T12:29:51.210
> 
> 标签：java, jpa, nullpointerexception, ejb

我有空指针异常，我不知道为什么。在 DB 中，我有一张这样的表格（lekarz 在波兰语中是医生的意思）：

```
create table Lekarz(
idlekarz int unique not null primary key,
poziom int not null references Poziom_dostepu(idpoziom),
specjalnosc varchar(50) not null); 
```

这是实体类：

```
@Entity
@Table(name = "lekarz")
@DiscriminatorValue("lekarz")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Lekarz.findAll", query = "SELECT l FROM Lekarz l"),
    @NamedQuery(name = "Lekarz.findById", query = "SELECT l FROM Lekarz l WHERE l.idpoziom = :idpoziom"),
    @NamedQuery(name = "Lekarz.findBySpecjalnosc", query = "SELECT l FROM Lekarz l WHERE l.specjalnosc = :specjalnosc")})
public class Lekarz extends PoziomDostepu implements Serializable {
    private static final long serialVersionUID = 1L;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 50)
    @Column(name = "specjalnosc")
    private String specjalnosc;
    @JoinColumn(name = "idpoziom", referencedColumnName = "idpoziom")
    @ManyToOne(optional = false)
    private PoziomDostepu poziom;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "lekarz")
    private Collection<Pacjent> pacjentCollection;
    @JoinColumn(name = "osoba", referencedColumnName = "idosoba")
    @OneToOne(optional = false)
    private Osoba osoba;

    public Lekarz() {
    }

    public Osoba getOsoba() {
        return osoba;
    }

    public void setOsoba(Osoba osoba) {
        this.osoba = osoba;
    }

    public String getSpecjalnosc() {
        return specjalnosc;
    }

    public void setSpecjalnosc(String specjalnosc) {
        this.specjalnosc = specjalnosc;
    }

    public PoziomDostepu getPoziom() {
        return poziom;
    }

    public void setPoziom(PoziomDostepu poziom) {
        this.poziom = poziom;
    }

    @XmlTransient
    public Collection<Pacjent> getPacjentCollection() {
        return pacjentCollection;
    }

    public void setPacjentCollection(Collection<Pacjent> pacjentCollection) {
        this.pacjentCollection = pacjentCollection;
    }

    @Override
    public String toString() {
        return "pl.karta.epacjent.entities.Lekarz[ idlekarz=" + idpoziom + " ]";
    }

} 
```

正面：

```
@Stateless
public class LekarzFacade extends AbstractFacade<Lekarz> implements LekarzFacadeLocal {
    @PersistenceContext(unitName = "epacjentPU")
    private EntityManager em;

    @Override
    protected EntityManager getEntityManager() {
        return em;
    }

    public LekarzFacade() {
        super(Lekarz.class);
    }

} 
```

局部立面：

```
@Local
public interface LekarzFacadeLocal {
    void create(Lekarz Lekarz);
    void edit(Lekarz konto);  
    void remove(Lekarz konto);
    Lekarz find(Object id);
    List<Lekarz> findAll();
    List<Lekarz> findRange(int[] range);
    int count();
} 
```

抽象外观中的函数 findAll()：

```
public List<T> findAll() {
        javax.persistence.criteria.CriteriaQuery cq = getEntityManager().getCriteriaBuilder().createQuery();
        cq.select(cq.from(entityClass));
        return getEntityManager().createQuery(cq).getResultList();
    } 
```

我只是在bean中有这样的功能：

```
public List<Lekarz> getListaLekarzy()
    {
          return lekarzfacade.findAll();
    } 
```

空指针是因为这个函数（getListaLekarzy），但我确定 DB 中的 Lekarz 表中有 1 条记录，所以我应该得到这个记录的 1 元素列表。我对吗？

提前感谢所有帮助。

编辑 1：lekarzBean 中的门面：

```
@Stateless
@LocalBean
@ManagedBean(name = "LekarzBean")
@SessionScoped
public class LekarzBean {

    @EJB
    private EndpointLocal endpoint;
    private LekarzFacadeLocal lekarzfacade; 
```

堆栈跟踪

```
javax.faces.el.EvaluationException: java.lang.NullPointerException
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NullPointerException
    at pl.karta.epacjent.beans.ListaPacjentowBean.getListaLekarzy(ListaPacjentowBean.java:52)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.el.BeanELResolver.invokeMethod(BeanELResolver.java:779)
    at javax.el.BeanELResolver.invoke(BeanELResolver.java:528)
    at javax.el.CompositeELResolver.invoke(CompositeELResolver.java:257)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:248)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 32 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:10:54.343

添加`@EJB`注释到`private LekarzFacadeLocal lekarzfacade;`

```
@EJB
private EndpointLocal endpoint;  
@EJB
private LekarzFacadeLocal lekarzfacade; 
```

# c - 在 C 中处理丢包 UDP 套接字编程

> ID：14399014
> 
> 赞同：5
> 
> 时间：2013-01-18T12:29:52.377
> 
> 标签：c, sockets, udp

我想发送一个字节数组 X 次，直到达到缓冲区大小。我的客户端发送字节数组，直到缓冲区大小已满。但问题是数据包丢失，服务器只收到缓冲区大小的 8/10。

客户：

```
while(writeSize < bufferSize)
{
    bytes_sent += sendto(servSocket, package, sizeof(package), 0, (struct sockaddr *)&server, sizeof(server));
    writeSize+= sizeof(package);    
} 
```

服务器：

```
while(packetSize < bufferSize)
{
    bytes_recv += recvfrom(servSocket, package, sizeof(package), 0, (struct sockaddr*)&client, &size);
    packetSize += sizeof(package);
    printf("Bytes recieved: %d\n", bytes_recv);
} 
```

我真的无法想出解决这个问题的办法。当客户端已经发送了所有包，并且服务器遭受包丢失时，while循环不会结束，有什么想法可以解决这个问题吗？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:54:44.087

如果您*必须*使用 UDP 来传输较大的数据块，那么请设计一个小的*应用程序级*协议来处理可能的数据包丢失和重新排序（这是 TCP 为您所做的一部分）。我会用这样的东西：

*   数据报小于**MTU**（加上 IP 和 UDP 报头）的大小（比如 1024 字节）以避免 IP 碎片。
*   每个数据报的固定长度标头包括**数据长度**和**序列号**，因此您可以将数据重新拼接在一起，并检测丢失、重复和重新排序的部分。
*   **接收方对已成功接收和整理的内容的**确认。****
***   **当这些 ack 没有在适当的时间内到达时，发送端的**超时**和**重传。******

 ****干得好。我们再次开始构建 TCP ......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T12:37:21.023

嗯。您正在使用 UDP。对于这个协议，如果需要的话，丢弃数据包是完全可以的。因此，就“发送的将到达”而言，它是不可靠的。您在客户端中要做的是检查您需要的所有数据包是否到达，如果没有，请礼貌地与您的服务器交谈以重新发送您没有收到的数据包。实现这些东西并不是那么容易，你最终可能会得到一个解决方案，它的性能可能比使用普通的旧 tcp 套接字要低，所以我的建议是首先切换到 tcp 连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T08:50:08.197

在 sendto 之后，您可以等待 sendto 缓冲区达到零，您可以在每次 sendto 调用后使用以下 api。

```
void waitForSendBuffer(void)
{
int outstanding = 0;
while(1)
{
  ioctl(socketFd_, SIOCOUTQ, &outstanding);
  if(outstanding == 0)
    break;
  printf("going for sleep\n");
  usleep(1000);
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T15:30:01.043

当然 TCP 将是更好的选择，但如果您只有 UDP 选项，我会将数据包装到具有序列和 buf_length 字段的结构中。

这绝对不是一个最佳解决方案......它只是处理序列号以确保数据完全到达并具有正确的顺序。如果没有，就停止接收数据（它可以做一些更聪明的事情，比如要求发送重新发送片段并重建数据，尽管顺序错误，但它会变得非常复杂）

```
struct udp_pkt_s {
    int     seq;
    size_t  buf_len;
    char    buf[BUFSIZE];
}; 
```

发送方：

```
struct udp_pkt_s udp_pkt;

udp_pkt.seq = 0;

while(writeSize < bufferSize)
{
    // switch to the next package block
    // ...

    memcpy(udp_pkt.buf, package);
    udp_pkt.buf_len = sizeof(package);
    udp_pkt.seq++;

    bytes_sent += sendto(servSocket, &udp_pkt, sizeof(udp_pkt_s), 0, (struct sockaddr *)&server, sizeof(server));
    writeSize += sizeof(package);    
} 
```

接收方：

```
last_seq = 0;

while(packetSize < bufferSize)
{
    bytes_recv += recvfrom(servSocket, &udp_pkt, sizeof(udp_pkt_s), 0, (struct sockaddr*)&client, &size);

    // break it if there's a hole
    if (udp_pkt.seq != (last_seq + 1))
        break;

    last_seq = udp_pkt.seq;

    packetSize += udp_pkt.buf_len;

    printf("Bytes recieved: %d\n", udp_pkt.buf_len);
} 
```****

# ios - iPhone 上的核心数据存储限制、缓存限制、RAM 限制

> ID：14399015
> 
> 赞同：0
> 
> 时间：2013-01-18T12:29:55.850
> 
> 标签：ios, image, caching, core-data

我正在制作一个复杂的应用程序，其中每个细节都是小鬼。我有一些问题 1\. 如果我们计划将大文件保存在核心数据/缓存上，我们有多少存储限制。2\. iphone的内存限制是多少？实际上正在搜索一些可以提供有关 IOS 设备的详细信息的表。因为我需要处理内存警告并保护应用程序崩溃。3.最好将图像保存在缓存或核心数据中，假设您大约有很多图像。200-250。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:46:17.510

1) 我不知道任何存储限制。显然，您永远不会获得 64GB 或更多 - 因为没有更大的设备 ;-)。我妻子的 Facebook 应用程序目前消耗 >5GB... 我想他们做错了什么。唯一重要的一点是在存储已满时优雅地失败（显示对话框，清理一些空间，...）。

2) RAM 限制因 iPhone 型号和当前运行的应用程序而异。市场上也有一些内存较小的 iPod。30MB 应该是相当安全的。可以按照[此处](https://stackoverflow.com/questions/8032635/responding-to-ram-availability-in-ios/8072278#8072278)所述检索设备的总物理内存，而可以从[该](https://stackoverflow.com/questions/11427761/total-ram-in-iphone)问题中得出可用 RAM 的检索。

3）也许[这](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdPerformance.html%23//apple_ref/doc/uid/TP40003468-SW5)是一个很好的起点。我总是将图像数据写入文件系统，并将文件名存储在数据库中，如此处所建议[的](https://stackoverflow.com/questions/4158286/storing-images-in-core-data)。

# sql-server-2008 - 多个线程导致通过存储过程执行的插入语句中的间歇性失败

> ID：14399017
> 
> 赞同：0
> 
> 时间：2013-01-18T12:30:02.923
> 
> 标签：sql-server-2008

嗨，我正在从 .net 代码调用存储过程。存储过程根据从 .net 代码发送的参数计算某些值。在计算某些值之后，在存储过程的末尾执行三个插入到同一个表的语句。我发现有时这些插入语句不会在表中插入记录。这很奇怪，因为我已经彻底检查了存储过程是否被正确调用并且参数也被发送。此外，当只有 1 个线程运行时，不会出现问题。只有在我运行 9 个并行访问同一个存储过程的线程的情况下。

请建议是否需要检查某些设置或缺少某些设置。

我怀疑可能会出现死锁情况并阻止插入。但我不确定。我还检查了表索引中的 allow_row_locks 和 allow_page_locks，它们被设置为“ON”；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:33:59.967

我会说您的代码正在生成要插入的相同值，从而违反了表的约束。

表中是否有主键或唯一键？也许表中的触发器中有一些检查可能会导致这种情况？

# sql-server-2008 - 在sql server中使用动态sql将值存储在变量中

> ID：14399020
> 
> 赞同：2
> 
> 时间：2013-01-18T12:30:12.443
> 
> 标签：sql-server-2008, tsql

> **可能重复：**
> [将动态 sql 的结果分配给变量](https://stackoverflow.com/questions/6968512/assign-result-of-dynamic-sql-to-variable)

你能帮我在给定的例子中存储一个值吗？

```
DECLARE @variable VARCHAR(20)

declare @table_name varchar(20)='sample_table'

EXEC('SELECT '+@variable+'=SUM(CAST([Annual Plan & GM$] AS MONEY)) FROM '+@table_name+'') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:37:01.877

您可以使用以下命令返回类型化的输出参数`sp_executesql`：

```
declare @variable   money
declare @table_name varchar(20)='sample_table'

declare @sql nvarchar(255) = 'SELECT @variable=SUM(CAST([Annual Plan & GM$] AS MONEY)) FROM '+ @table_name
EXEC sp_executesql @sql, 
    N'@variable money OUTPUT',
    @variable OUTPUT

select @variable 
```

# java - JScrollPane 中的 JTable 在 Mac OS X 中无法正确显示

> ID：14399031
> 
> 赞同：1
> 
> 时间：2013-01-18T12:30:38.257
> 
> 标签：java, macos, swing, jtable, abstracttablemodel

以下代码在 Mac OS X 10.6.8 上不起作用，但在我测试的所有其他版本（Mac OS X Lion 和 Windows 7）上都起作用。显而易见的解释是 Apple 的 java.lang. 表格数据在 Mac 上无法正确显示（如果有的话）。这是代码

```
package com.dramble.dance;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.AbstractTableModel;
import java.awt.GridLayout;
import java.util.ArrayList;
import java.util.List;

public class TableDemo extends JPanel {

    public TableDemo() {
        super(new GridLayout(1,0));

        TableModel tableModel = new TableModel();

        JTable table = new JTable(tableModel);

        JScrollPane scrollPane = new JScrollPane(table);
        add(scrollPane);

        for(int i = 0 ; i <= 1900 ; i ++) {
            DataRow row = new DataRow(i,"Firstname"+i,"Lastname"+i);
            tableModel.appendRow(row);
            tableModel.fireTableRowsInserted(i, i);
        }
    }

    private static void createAndShowGUI() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        TableDemo newContentPane = new TableDemo();
        newContentPane.setOpaque(true);
        frame.setContentPane(newContentPane);

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }

    private class DataRow {
        private String fname, lname;
        private Integer id;
        public String getFname() {
            return fname;
        }
        public String getLname() {
            return lname;
        }
        public Integer getId() {
            return id;
        }
        public DataRow(Integer id, String fname, String lname) {
            super();
            this.fname = fname;
            this.lname = lname;
            this.id = id;
        }
    }

    private class TableModel extends AbstractTableModel {
        List<DataRow> data;
        private String[] columnNames = {"ID #","First Name","Last Name"};
        private Class[] columnTypes = {int.class, String.class, String.class};

        public TableModel() {
            this.data = new ArrayList<DataRow>();
        }

        @Override
        public int getColumnCount() {
            return columnNames.length;
        }

        @Override
        public String getColumnName(int col) {
            return columnNames[col];
        }

        @Override
        public int getRowCount() {
            return this.data.size();
        }

        @Override
        public Object getValueAt(int row, int col) {
            DataRow dataRow = this.data.get(row);
            Object returnValue = null;

            switch (col) {
            case 0:
                returnValue = dataRow.getId();
                break;
            case 1:
                returnValue = dataRow.getFname();
                break;
            case 2:
                returnValue = dataRow.getLname();
                break;
            }
            return returnValue;
        }

        public void appendRow(DataRow row) {
            this.data.add(row);
        }

        @Override
        public boolean isCellEditable(int rowIndex, int vColIndex) {
            return false;
        }

        @Override
        public Class getColumnClass(int col) {
            return columnTypes[col];
        }
    }
} 
```

这是在 Windows 中展示的预期行为的图像 ![Windows 上的工作台](../Images/64760ec1c3e95119f1df31f33e167e85.png)

这是 Mac OS X 10.6.8 上的相同代码 ![在 Mac OS X 上损坏](../Images/3b471130ac24a5e67c4b49dbacf58ebc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:27:59.453

问题在于 AbstractTableModel，出于某种原因，这让我感到惊讶，我认为它肯定与 EDT 和线程相关。问题出在我的数组中，用于`columnTypes`和 using `int.class`。改变这个来`Integer.class`解决我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T02:06:52.307

没有完整的例子，很难猜测。你所拥有的看起来不错，但有两件事很突出：

*   我很警惕`frame.setContentPane(newContentPane)`，它将框架的内容窗格*替换*`TableDemo`为您的. 作为`TableDemo`一个`JPanel`，它继承了一个因平台而异的 UI 委托。相反，考虑`frame.add(newContentPane)`，它*转发*到内容窗格。

*   你的`appendRowData()`方法`DanceTableModel`should `fireTableRowsInserted()`，所以调用者不能忘记这样做。

# android - Android：简单的 USSD 拨号器应用程序

> ID：14399033
> 
> 赞同：6
> 
> 时间：2013-01-18T12:30:43.697
> 
> 标签：android

我创建了一个简单的拨号器来快速帮助我拨打移动提供商服务，例如检查空气余额、从提供商处获取互联网设置

```
//example
phoneNum[1] = "*144#"; 
```

当我单击一个检查余额的按钮时，它显示正在拨号

```
 Dialing *144 
```

*144 并注意哈希不存在，但如果哈希可用，它应该作为 ussd 代码运行并返回余额而不是调用。如何将哈希添加到数组中？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T12:53:11.960

您应该使用 %23 转义 # 符号

`//example phoneNum[1] = "*144";`

```
String encodedHash = Uri.encode("#");
startActivity(new Intent("android.intent.action.DIAL",
              Uri.parse("tel:"+ phoneNum[1]+ encodedHash))); 
```

至于捕捉响应，你应该尝试

```
startActivityForResult(new Intent("android.intent.action.CALL", 
                   Uri.parse("tel:"+ phoneNum[1]+ encodedHash)), 1);
@Override
protected void onActivityResult(int requestCode, int resultCode,Intent data) {
    view.setText("USSD: " + requestCode + " " + resultCode + " " + data);
} 
```

看看这会给你带来什么。

# html - 带有缩放图像悬停功能的 Wordpress 图像插件

> ID：14399035
> 
> 赞同：1
> 
> 时间：2013-01-18T12:30:47.527
> 
> 标签：html, image, wordpress, plugins, gallery

我见过一些网站，当我将鼠标悬停在图像上时，图像会放大，是否有一个用于 wopress 的插件可以做到这一点，还是必须硬编码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T14:59:32.987

您可能会认为[SwinxyZoom](http://www.swinxyapps.com/pages/apps/swinxy-zoom/index.html)就像其他图像缩放插件一样，但也与 wordpress 编辑器集成，并且可以很好地与触摸设备配合使用。

# android - Spanable String 颜色 结果 黑色

> ID：14399039
> 
> 赞同：1
> 
> 时间：2013-01-18T12:31:07.073
> 
> 标签：android, colors

有没有人指导我为什么在 color.xml`String`中`Spanable`使用用户定义的颜色没有导致下面的预期结果是示例代码

```
 sorry_Span=new SpannableString("Sorry, you dont have any registered device, what you want to do ?");
    sorry_Span.setSpan(new ForegroundColorSpan(Color.BLUE), 36, 42, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    //sorry_Span.setSpan(new ForegroundColorSpan(R.color.blue_txt), 36, 42, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    sorry_Msg.setText(sorry_Span); 
```

使用`Color.Blue`it 运行时结果很好，但使用`R.color.blue_txt`it 运行时，文本会显示为空 提前感谢您的帮助

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-18T13:38:49.310

所以我自己找到了答案，希望这可以帮助那些可能想要使用自定义颜色的人

```
 sorry_Span=new SpannableString("Sorry, you dont have any registered device, what you want to do ?");
    sorry_Span.setSpan(new ForegroundColorSpan(Color.BLUE), 36, 42, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    //sorry_Span.setSpan(new ForegroundColorSpan(R.color.blue_txt), 36, 42, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    sorry_Msg.setText(sorry_Span); 
```

可以使用以下方法处理自定义颜色

```
Color.rgb(int red,int green,int blue) 
```

所以使用这个我制作了我自己的自定义 colr 如下

```
 sorry_Span=new SpannableString("Sorry, you dont have any registered device, what you want to do ?");

   // sorry_Span.setSpan(new ForegroundColorSpan(Color.rgb(34,141,65), 36, 42, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
sorry_Span.setSpan(new ForegroundColorSpan(getResource().getColor(R.color.mycolor), 36, 42, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    sorry_Msg.setText(sorry_Span); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T13:06:19.170

您的颜色 XML 应如下所示：

```
<?xml version="1.0" encoding="utf-8"?>

<resources>
    <color name="blue_color">#ff0000FF</color>    
</resources> 
```

编辑：更改为：

```
sorry_Span.setSpan(new ForegroundColorSpan(getResources().getColor(R.color.blue_txt)), 36, 42, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-02T04:00:17.267

getContext().getColor(R.color.black); 现在它自 android 6.0 (API 22+) 以来已被弃用

ContextCompat 是一个用基本上下文替换一些工作的类

```
 val wordTwo: Spannable = SpannableString("Your new message")

    wordTwo.setSpan(
        ForegroundColorSpan(ContextCompat.getColor(requireContext(), R.color.red)),
        0,
        wordTwo.length,
        Spannable.SPAN_EXCLUSIVE_EXCLUSIVE
    ) 
```

# database - JBPM 是否需要特定的数据库？

> ID：14399045
> 
> 赞同：1
> 
> 时间：2013-01-18T12:31:20.663
> 
> 标签：database, hibernate, jbpm

我正在尝试将 JBPM 与不同的数据库集成，所以我想问：

*   JBPM 是否需要任何特定的数据库？

*   如何在 JBPM 中维护数据库？

*   例如，如果我们需要执行删除语句，我们在哪里设置呢？在 JBPM 中还是在 Hibernate 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-24T18:38:07.000

JBPM默认配置了H2数据库，你可以通过

1.  persistence.xml 默认方言

    ```
    <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect" /> 
    ```

2.  在standalone.xml 上配置 DS

    ```
    <jta-data-source>java:jboss/datasources/jbpmDS</jta-data-source> 
    ```

当您启动 JBoss 实例时，它应该刷新您的数据库 ddl。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-31T17:06:49.600

JBPM 使用默认的内存 H2 数据库。但是您可以将其配置为使用其他关系数据库系统。到目前为止，我能够使用 Postgres 和 MS SQL。

请在官方文档中找到有关数据库配置的更多说明：[https ://docs.jboss.org/jbpm/release/7.3.0.Final/jbpm-docs/html_single/#_using_a_different_database](https://docs.jboss.org/jbpm/release/7.3.0.Final/jbpm-docs/html_single/#_using_a_different_database)

# c - c - 如何删除\n？

> ID：14399047
> 
> 赞同：0
> 
> 时间：2013-01-18T12:31:31.550
> 
> 标签：c, loops

> **可能重复：**
> [如何转到 C 代码中的上一行](https://stackoverflow.com/questions/4895541/how-to-go-to-the-previous-line-in-a-c-code)

我想删除最后`\n`一个

```
for(i = 0; i < 10; i++)
     printf("****\n"); 
```

这似乎`\b`不起作用。我应该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T12:33:09.847

最好的解决方案是根本不打印它：

```
for(i = 0; i < 10; i++) printf("****%s", ((i!=9)?"\n":"")); 
```

或者使用两个 printfs（具有相同的效果，只是代码多一点，更容易阅读）：

```
for(i = 0; i < 10; i++) {
  printf("****");
  if (i != 9 ) {
    printf("\n");
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T12:36:51.707

```
printf("****");
for(i = 0; i < 9; i++)
     printf("\n****"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T12:37:49.367

这与 Ivaylo 给出的答案基本相同，但您无需检查每次迭代的条件，而是将其完全移出：

```
for(i = 0; i < 9; i++)
    printf("****\n");

printf("****"); 
```

现在，您是否*需要*这种微优化是另一回事。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T13:33:47.013

没有由 C 标准定义的字符序列用于光标定位，将光标向上移动一行（或移至先前的文本缓冲区）。所以没有 100% 可移植的方式来做到这一点。

但是，根据您的平台，大多数终端控制台都支持[ANSI 转义码](http://en.wikipedia.org/wiki/ANSI_escape_code)，在这种情况下您可以执行以下操作：

```
for(i = 0; i < 10; i++) 
    printf("****\n");
printf("\033[A\033[C\033[C\033[C\033[C"); 
```

这使用转义序列将光标向上移动一行 ( `\033[A`)，然后将其向前移动一个字符 ( `\033[C`) 完成 4 次以移过 4 个星号。因此，您将获得在换行符上“向后”移动的效果。

在更清晰的意义上，您可以将其放在`#define`：

```
#define BACKUP_NEWLINE "\033[A\033[C\033[C\033[C\033[C"

for(i = 0; i < 10; i++)
    printf("****\n");
printf("%s", BACKUP_NEWLINE); 
```

更好的解决方案（至少硬编码较少）可能是在 Windows 上使用[curses 库或类似的库。](http://en.wikipedia.org/wiki/Curses_(programming_library))

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T13:10:18.957

替代方法：

1.  如果您使用的是符合 ansi 的终端，&
2.  您的 printf 不使用除 ' '（空格）以外的任何空白字符（例如 \t、\n、\v 等），

你可以使用下面的代码:-)

```
int t;
for(i = 0; i < 10; i++)
   t=printf("****\n");      // t would hold number of characters printed.
printf("\033M\033[%dC",t-1); 
```

它使用 2 个转义字符：

1.  <ESC>M : 移到上一行，但第一列
2.  <ESC>[<num>-C ：向右移动 <num> 个位置。

如果您的 printf 恰好包含其他空白字符，例如 \n、\t 等，则需要使用一些逻辑进行计算，以找到水平光标位置。

另一种方法是：

```
for(i = 0; i < 10; i++)
   printf("****\033[s\n");      // \033[s would save column number
printf("\033M\033[u"); 
```

有关 ANSI 转义字符的更多详细[信息](http://www.tldp.org/HOWTO/Bash-Prompt-HOWTO/x361.html)：-)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-18T12:38:54.403

没有明确定义的便携式方法可以做到这一点，您只能更改当前行的字符，如标准所述：

> **`\b`**（*退格*）将活动位置移动到当前行的前一个位置。如果活动位置在一行的初始位置，则显示设备的行为是未指定的。

其他答案已经证明了做你需要的不同方法。

# c - 在 Unix 中更改密码的 perl（或 C）程序？

> ID：14399048
> 
> 赞同：2
> 
> 时间：2013-01-18T12:31:34.983
> 
> 标签：c, perl

嗨，我正在尝试按照使用 perl 的答案中所述执行[此](https://stackoverflow.com/questions/714915/using-the-passwd-command-from-within-a-shell-script?lq=1)操作，但它不起作用。

```
#!/usr/bin/perl -w
$pipe="data";
$username="mukesh";
$password="mukesh";
open my $pipe, '|chpasswd' or die "can't open pipe: $!";
print {$pipe} "$username:$password";
close $pipe

[root@testgfs2 user_mgmt]# ./tess3.sh
Name "main::pipe" used only once: possible typo at ./tess3.sh line 2.
chpasswd: line 1: line too long
chpasswd: error detected, changes ignored 
```

任何机构都可以提出建议。出了什么问题。

因为 --stdin 在所有 *nix 上都不可用，所以我正在尝试使用它

**编辑**：C 中是否有任何程序可以执行此操作。因为如果 *nixes 可能对所有版本都有用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:29:22.583

你可以试试这个

```
system("$USERNAME:$PASSWORD | chpasswd"); 
```

[基于这个答案](https://stackoverflow.com/a/4318265/777425)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T12:24:14.727

代码没问题，因为您编写的代码对我来说很好。尝试检查引号匹配，我认为没有必要将文件 in.sh 扩展名，因为您有 #!/usr/bib/perl

# sharepoint - 通过 Microsoft Access 访问 Sharepoint 库

> ID：14399050
> 
> 赞同：0
> 
> 时间：2013-01-18T12:31:45.233
> 
> 标签：sharepoint, ms-access, sharepoint-2010, ms-access-2010, sharepoint-list

嗨，我有一个共享点库，它是一个**Infopath 表单库**

我在这里存储表单并显示一些列，并且使用 MS Access 修改了一些列值

现在我遇到的问题是，

**Access 仅在 WEB 浏览器显示所有记录的地方显示一些记录。**

我检查了安全性，但对于同一个用户来说，一切看起来都是正确的，可以完全控制该文档

**有人可以说我要去哪里错了吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:51:58.893

您是否知道链表与导入数据源。由于链接的工作方式，链接列表将隐藏一些字段。

![在此处输入图像描述](../Images/84d160ebfb65c4e5f6787d7bff94af00.png)

这方面也存在一些问题。一些数据类型不能很好地沟通。看;

*   [http://office.microsoft.com/en-us/access-help/how-access-converts-between-access-and-sharepoint-data-types-HP001047713.aspx](http://office.microsoft.com/en-us/access-help/how-access-converts-between-access-and-sharepoint-data-types-HP001047713.aspx)
*   [http://www.utteraccess.com/forum/Sharepoint-Linked-Access-t1958466.html](http://www.utteraccess.com/forum/Sharepoint-Linked-Access-t1958466.html)

# c# - ASP.NET 从 VStudio 发送电子邮件运行速度很快，但在 IIS 中速度很慢

> ID：14399056
> 
> 赞同：4
> 
> 时间：2013-01-18T12:31:57.927
> 
> 标签：c#, asp.net, performance, email, iis

使用 Visual Studio 从我的 ASP.NET 项目发送电子邮件非常快——只需一秒钟——但在同一台机器上的 IIS 7 中发布时，需要 50 秒或更长时间。有没有人遇到过这种速度降低？我已将 C# 代码和我的设置粘贴到 web.config 中。非常感谢你。

```
public static bool EnviarMail(String eOrigen, String eDestino, String asunto, String cueMensaje)
    {
        Boolean EstadoEnvio;
        MailMessage eMail = new MailMessage();
        eMail.From = new MailAddress(eOrigen);
        eMail.To.Add(new MailAddress(eDestino));
        eMail.Subject = asunto;
        eMail.IsBodyHtml = true;
        cueMensaje = cueMensaje.Replace("\r\n", "<BR>");
        eMail.Body = cueMensaje;
        eMail.Priority = MailPriority.Normal;

        SmtpClient clienteSMTP = new SmtpClient();
        try
        {   
            clienteSMTP.Send(eMail);
            EstadoEnvio = true;
        }
        catch 
        {
            EstadoEnvio = false;
        }
        return EstadoEnvio;            
    } 
```

在我的 web.config 中：

```
 <mailSettings>
        <smtp from="iso@hmoore.com.ar">
            <network host="174.120.190.6" port="25" userName="iso@hmoore.com.ar" password="-----" defaultCredentials="true"/>
        </smtp>
    </mailSettings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:46:26.427

在 ASP.NET 应用程序中发送电子邮件时，有时您不希望用户体验因为等待电子邮件发送而变慢。下面的代码示例是如何异步发送 System.Net.Mail.MailMessage 以便当前线程可以在辅助线程发送电子邮件时继续。

```
public static void SendEmail(System.Net.Mail.MailMessage m)
{
    SendEmail(m, true);
}

public static void SendEmail(System.Net.Mail.MailMessage m, Boolean Async)
{
    System.Net.Mail.SmtpClient smtpClient = null;
    smtpClient = new System.Net.Mail.SmtpClient("localhost");    
    if (Async)
    {
        SendEmailDelegate sd = new SendEmailDelegate(smtpClient.Send);
        AsyncCallback cb = new AsyncCallback(SendEmailResponse);
        sd.BeginInvoke(m, cb, sd);
    }
    else
    {
        smtpClient.Send(m);
    }
}

private delegate void SendEmailDelegate(System.Net.Mail.MailMessage m);
private static void SendEmailResponse(IAsyncResult ar)
{
    SendEmailDelegate sd = (SendEmailDelegate)(ar.AsyncState);

    sd.EndInvoke(ar);
} 
```

要使用它，只需`SendEmail()`使用对象调用方法`System.Net.Mail.MailMessage`。

# c# - DataGridTemplateColumn.HeaderTemplate 问题

> ID：14399059
> 
> 赞同：4
> 
> 时间：2013-01-18T12:32:09.660
> 
> 标签：c#, wpf, datagrid

请帮助解决这个问题，我不知道如何处理这个问题。

我有组合框和数据网格。当我选择了组合框值数据网格时，应该加载新数据并且效果很好。但是，当我选中所有带有复选框的列时，我已经选中了带有复选框的 DataGridTemplateColumn.HeaderTemplate，并且也选中了未选中的复选框。两者都很好。

现在我的问题是当我选择组合框时，应该取消选中 datagrid --> headertemplate 复选框。有什么我可以为此触发的事件吗？我的代码如下。

Combox 在数据网格之外。

```
 <DataGridTemplateColumn>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <CheckBox Name="checkadded" Margin="6,0" IsChecked="{Binding IsSelected, NotifyOnSourceUpdated=True, NotifyOnTargetUpdated=True, UpdateSourceTrigger=PropertyChanged}"  />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>

                        <DataGridTemplateColumn.HeaderTemplate>

                            <DataTemplate>
                                <CheckBox Name="ChkAllAdd" IsChecked="False" Width="50" Loaded="chkallLoaded" Checked="ChkAll_Checked"  Unchecked="ChkAll_Unchecked"  IsThreeState="False" Padding="4,3,4,3" HorizontalContentAlignment="Left" HorizontalAlignment="Center"  />
                            </DataTemplate>

                        </DataGridTemplateColumn.HeaderTemplate>

                        </DataGridTemplateColumn>

                    </DataGrid.Columns>                        

                    <DataGrid.Resources>

                        <Style TargetType="{x:Type DataGridColumnHeader}">
                            <Setter Property="Foreground" Value="#686868"/>
                            <Setter Property="FontWeight"  Value="Bold" />
                        </Style>

                        <Style TargetType="{x:Type DataGridCell}" >
                            <Style.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Foreground" Value="white"/>
                                    <Setter Property="Background" Value="#93A8A9"/>
                                    <Setter Property="FontWeight" Value="Bold"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>

                    </DataGrid.Resources>

                </DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:52:06.857

为内容控件创建一个 ControlTemplate 并将您的 DataGrid 和 ComboBox Xaml 放在其中。现在您可以为 Combobox 创建一个 EventTrigger，然后您可以在绑定中使用元素名称设置 CheckedBox Checked。[这](https://stackoverflow.com/questions/942548/setting-a-property-with-an-eventtrigger)可能会有所帮助。

# sql - 更新字段几何多边形 PostGIS PostgreSQL

> ID：14399060
> 
> 赞同：1
> 
> 时间：2013-01-18T12:32:15.420
> 
> 标签：sql, postgresql, geometry, sql-update, postgis

我在尝试更新字段时遇到了一些麻烦。

我创建了一个列`text`并存储了许多行`(lon,lat)`。现在我又创建了一个字段`Geometry(Polygon)`，我试图更新它，但没有成功。

数据是这样存储的：

```
POLYGON ((-16.6318775869111 -52.5925428149806, -16.6346393504709 -52.572542814981
        , -16.629462102066 -52.5525428149806, -16.6255191065928 -52.5455420519144
        , -16.6055191065928 -52.5488828022871, -16.6021791014778 -52.552542814981
        , -16.6108484688169 -52.5925428149806, -16.6255191065928 -52.599495926874
        , -16.6318775869111 -52.5925428149806)) 
```

我正在尝试这个命令

```
UPDATE field_as_text 
   SET field_as_geomtry = SELECT ST_GeomFromText(SELECT field_as_text); 
```

我收到此错误消息

```
错误：“选择”处或附近的语法错误
第 1 行：... 设置 field_as_geomtry = select (ST...

```

谁能启发我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T23:13:04.313

您需要先阅读[有关 SQL`UPDATE`命令](http://www.postgresql.org/docs/current/interactive/sql-update.html)的手册。
应该看起来像这样：

```
UPDATE table_name
SET    field_as_geomtry = ST_GeomFromText(field_as_text); 
```

# c# - 如何在 ControlParameter 中找到控件？ASP.NET C#

> ID：14399066
> 
> 赞同：0
> 
> 时间：2013-01-18T12:32:58.627
> 
> 标签：c#, asp.net, sql-server-2008

我使用 EditItemTemplate 在 GridView 中创建 DropDownList 以编辑数据库中的数据，但是当我选择值并单击编辑按钮时，我无法从 DropDownList 中获取值。

```
protected void GridView1_OnRowDataBound(object sender, GridViewRowEventArgs e)
{
    SqlDataAdapter dtAdapter;
    DataTable dt = new DataTable();

    strSQL2 = "SELECT distinct(gp.RespIndexID) RespIndexID,gr.RespDesc " +
            "FROM Login as gbl " +
            "LEFT JOIN Profile gp ON gbl.EmpID=gp.EmpID " +
            "LEFT JOIN ResponeIndex gr ON gp.RespIndexID=gr.IndexID " +
            "WHERE gbl.EmpDept=" + DropDownList3.SelectedValue.ToString() + " AND gbl.EmpSection=" + DropDownList4.SelectedValue.ToString() + " AND gbl.EmpUnit=" + DropDownList1.SelectedValue.ToString() + " AND gbl.Status is Null";
    try
    {
        dtAdapter = new SqlDataAdapter(strSQL2, objConn);
        dtAdapter.Fill(dt);

        for (int i = 0; dt.Rows.Count > i; i++)
        {

            if (GridView1.EditIndex == e.Row.RowIndex)
            {
                DropDownList ddlPosition = (DropDownList)e.Row.Cells[3].FindControl("ddlPosition");
                HiddenField HiddenField1 = (HiddenField)e.Row.Cells[3].FindControl("HiddenField1");
                ddlPosition.Items.Add(new ListItem((string)dt.Rows[i]["RespIndexID"].ToString(), dt.Rows[i]["RespIndexID"].ToString()));

                if (Page.IsPostBack == true)
                {
                    ddlPosition.SelectedValue = HiddenField1.Value;
                }
                //er.NewValues[i] = ddlPosition.SelectedValue.ToString();
            }
        }
    }
    catch (Exception err)
    {
        //Response.Write(strSQL2 + "<br />" + err); 
    }
} 
```

//GridView中的代码

```
<asp:TemplateField HeaderText="RespDesc" SortExpression="RespDesc">
                        <EditItemTemplate>
                            <asp:HiddenField ID="HiddenField1" runat="server" Value='<%# Bind("RespIndexID") %>'></asp:HiddenField>
                            <asp:DropDownList ID="ddlPosition" runat="server" AutoPostBack="false" AppendDataBoundItems="True"></asp:DropDownList>
                        </EditItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label1" runat="server" Text='<%# Bind("RespIndexID") %>'></asp:Label>
                        </ItemTemplate>
                        <HeaderStyle Width="100px" />
                        <ItemStyle HorizontalAlign="Left" />
                    </asp:TemplateField> 
```

//DataSource中的代码更新

```
UpdateCommand="UPDATE Profile SET RespIndexID = @ddlPosition WHERE (EmpID = @EmpID)">
<UpdateParameters>
  <asp:ControlParameter ControlID="ddlPosition" Name="RespIndexID" PropertyName="SelectedValue" Type="String" />
 <asp:Parameter Name="EmpID" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:39:15.673

首先，您应该注意您的代码对**[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)**是开放的，因此首先对查询进行参数化。

现在回答您的问题 - 您可以在代码隐藏中使用**[FindControl](http://msdn.microsoft.com/en-us/library/486wc64h.aspx)**方法来获取您的 DropDownList。注册到 RoweCommand 事件：

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{

     if (e.CommandName == "Edit")
     {
            GridViewRow row = (GridViewRow)(((LinkButton)e.CommandSource).NamingContainer);

            DropDownList ddl = (DropDownList)row.FindControl("ddlPosition");

            // Do whatever you want with the dropdownlist
     }
} 
```

其中“编辑”是您在 LinkBut​​ton 中使用的命令的名称

# php - PHP 错误未显示在浏览器中

> ID：14399067
> 
> 赞同：8
> 
> 时间：2013-01-18T12:32:59.037
> 
> 标签：php, ini

我面临一个奇怪的问题。我已经在 php.ini 文件中设置了所有内容。但我无法在浏览器中显示任何错误。我用谷歌搜索设置 .ini 文件并做了所有必需的事情。但我仍然无法在浏览器中显示错误消息。我的 PHP ini 设置，

```
display_errors = On
display_startup_errors = On
error_reporting = E_ALL | E_STRICT
log_errors = On
track_errors = On 
```

我尝试使用以下代码查看错误消息，

```
<?php
      require_once("sample.php");
 ?> 
```

实际上文件样本不可用。所以它必须显示致命错误。但它显示一个空白页。

你能指出我解决这个问题吗？我不知道我在这里缺少什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T12:37:42.627

您还可以将自定义错误报告添加到您的 php 并使用它进行测试：

```
<?php
    error_reporting( E_ALL );
    ini_set( "display_errors", 1 );
    require_once( "sample.php" );
?> 
```

如果您遇到致命问题，那么 php.ini 配置有问题（也许您有多个 php.ini 文件？）。如果您仍然一无所获，那么 php 可以找到该文件（也许您设置了一些*重定向*？也许是一些奇怪的扩展名？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T12:52:44.923

我发现了问题。实际上，PHP 安装了 XDebug 扩展。所以问题出在那个扩展上。即使我没有意识到这一点。因为这个系统以前有人用过。我使用新的支持版本卸载并再次安装。现在可以了。给朋友带来的不便，感谢和抱歉。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T13:37:25.990

尝试在您的`php.ini`文件中查找这些单词

**`display_errors`**
**`error_reporting`**

将默认值`display_errors`从更改**`Off`**为 将默认值从**XXXX**更改为**`On`**
`error_reporting`****`E_ERROR | E_PARSE`****

 **重启apache服务器。
请注意，它总是会显示错误。**

# ubuntu - 在 ubuntu 上使用 C++ opencv：cvCaptureFromAVI() 不起作用

> ID：14399073
> 
> 赞同：0
> 
> 时间：2013-01-18T12:33:14.490
> 
> 标签：ubuntu, opencv, arm, pandaboard

我正在尝试在 pandaboard ubuntu 12.04 上使用 OpenCV 库。

所以我安装了Opencv2.4.2版本，代码在下面。

```
#include <stdio.h>
#include <stdlib.h>
#include "opencv2/opencv.hpp"

int main*int argc, char** argv)
{
    cvNamedWindow("origin", CV_WINDOW_AUTOSIZE);

    CvCapture *capture = cvCaptureFromAVI("hkleecv-desktop:/home/hkleecv/OpenCV-2.4.2/samples/cpp/captured.avi");

    IplImage *frameOrigin;

    if(!capture0 return 1;

    int key = 0;
    int fps = (int)cvGetCaptureProperty(capture, CV_CAP_PROP_FPS);

    while(key != 'q')
    {
        frameOrigin = cvQueryFrame(capture);

        cvShowImage("origin", frameOrigin);

        key = cvWaitKey(1000/fps);
    }

cvReleaseCapture(&capture);

    cvDestroyWindow("origin");

} 
```

问题是这个程序不能从 avi 文件中抓取帧。（此代码在 VS2010 C++ 上运行良好）

当我使用 gdb 在 shell 上运行程序时，它只返回消息“Inferior 1 (process nnnn) exited with code 01”

我用谷歌搜索了这个错误，发现一个与我有类似问题的人发布的页面，但 cvCaptureFromAVI() 目前无法正常工作。

*   [http://cellprogramming.wordpress.com/2009/05/24/opencv-cvcapturefromavi-error-in-ubuntu-9-04/](http://cellprogramming.wordpress.com/2009/05/24/opencv-cvcapturefromavi-error-in-ubuntu-9-04/)
*   [http://gijs.pythonic.nl/blog/2009/may/3/getting-video-io-working-opencv-and-ubuntu-jaunty-/](http://gijs.pythonic.nl/blog/2009/may/3/getting-video-io-working-opencv-and-ubuntu-jaunty-/)

有人能告诉我我能从这里做些什么来使 cvaptureFromAVI() 工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:28:41.153

```
#include <stdio.h>
#include <stdlib.h>
#include <iostream>
#include <opencv2/core/core.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/highgui/highgui.hpp>

using namespace cv;
using namespace std;

int main()
{
    cvNamedWindow("origin", CV_WINDOW_AUTOSIZE);

    CvCapture *capture = cvCaptureFromAVI("C:\\j.avi");

    IplImage *frameOrigin;

    if(capture==NULL) {
        return -1;
        cout<<"VIDEO NOT READ"<<endl;
    }

    int key = 0;
    int fps = (int)cvGetCaptureProperty(capture, CV_CAP_PROP_FPS);

    while(key != 'q')
    {
        frameOrigin = cvQueryFrame(capture);

        if(frameOrigin == NULL)
            break;

        cvShowImage("origin", frameOrigin);
        key = cvWaitKey(1000/fps);
    }

    cvReleaseCapture(&capture);
    cvDestroyWindow("origin");

    return 0;

} 
```

试试上面的代码......它适用于我在windows平台上......正确放置avi fie地址......

# .net - 对于每个循环，迭代集合的第一个空元素

> ID：14399074
> 
> 赞同：0
> 
> 时间：2013-01-18T12:33:17.860
> 
> 标签：.net, vb.net, collections, iteration

我在 vb .net 集合中添加了 2 个元素。调试时我可以看到 .count = 2。

如果监视集合中的元素，我通常会看到零索引中的第一个空元素，然后是我添加的两个元素。

![在此处输入图像描述](../Images/a5abfc39ef720c3b7a0027af2552e658.png)

问题是，当我使用 For Each Next 循环迭代集合时，会迭代空元素而不会迭代最后一个元素。

这就是结构的声明方式

```
Structure bstCategory
    Dim categoryCode As String
    Dim categoryVersion As String
End Structure 
```

这就是集合的填充方式

```
 With ci.tItem.information
    .categories = New Collection
    Dim additionalClassification As bstCategory
    additionalClassification.categoryCode = "1"
    additionalClassification.categoryVersion = "A"
    .categories.Add(additionalClassification)
    additionalClassification.categoryCode = "2"
    additionalClassification.categoryVersion = "B"
    .categories.Add(additionalClassification)
End With 
```

这就是集合的迭代方式

```
For Each category As bstCategory In ci.tItem.information.categories
        ValidateCategory(categorycode)
Next 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:22:48.090

我无法重现您的问题，它适用于我在 vs2010 目标 .net 2.0 中使用 vb.net

这是我根据您的代码尝试的：

```
Module Module1

    Structure bstCategory
        Dim Code As String
        Dim Version As String
    End Structure

    Sub Main()

        Dim categories As New Collection()
        Dim c As New bstCategory
        c.Code = "1"
        c.Version = "1"
        categories.Add(c)
        categories.Add(c)

        For Each category As bstCategory In categories
            Console.WriteLine(category.Code)
        Next

    End Sub

End Module 
```

如果 For Each 给您带来了奇怪的行为，您可以将其更改为使用 For 。

```
For i As Integer = 1 To categories.Count
   Console.WriteLine(categories(i).Code)
Next 
```

无论如何，您所面临的情况很奇怪，我建议您在 Google 中查找 index 0 文本。我做到了，有一些页面在谈论这个，所以你的答案可能在那里。

谷歌：“为基于 1 的数组调整的空占位符”

希望有帮助！

这是一张图片，显示了集合中从 0 到 2 的 3 个值，但是，当迭代时，它只进入两次，打印出 1 两次。

![在此处输入图像描述](../Images/7d906bb4defe9cd9850d3914a86afa96.png)

# c# - 如何以编程方式将证书添加到 BizTalk 组和主机

> ID：14399075
> 
> 赞同：0
> 
> 时间：2013-01-18T12:33:19.517
> 
> 标签：c#, .net, biztalk

有人知道我如何使用 C# .NET 以编程方式将证书添加到 BizTalk 组和主机吗？或者是否有人至少知道它们存储在哪里，所以我可以以编程方式将它们放在那里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-16T10:18:50.270

请参考：[如何使用 C# 以编程方式安装证书](https://stackoverflow.com/questions/12337721/how-to-programmatically-install-a-certificate-using-c-sharp)

我使用过这种代码，它完成了这项工作。不确定您是否可以在编排中使用此代码。也许您需要从流程中调用 C# 类库助手。

如果您想进一步说明密钥的存储位置：[https ://seroter.wordpress.com/2007/03/05/building-a-complete-certificate-scenario-with-biztalk-server-2006/](https://seroter.wordpress.com/2007/03/05/building-a-complete-certificate-scenario-with-biztalk-server-2006/)

# java - 在 Java Swing 中，在其他组件之间插入组件的最快方法是什么？

> ID：14399080
> 
> 赞同：2
> 
> 时间：2013-01-18T12:33:42.433
> 
> 标签：java, swing, layout, components

我正在制作一种编辑器，它有一个块（JPanel）而不是单词（带有类似文本的流和光标 - 闪烁的 JPanel）。

在以下情况下，我需要一种在现有组件之间添加 Swing 组件（新块）的快速方法：

*   在 JPanel 之间单击鼠标以将光标放在那里
*   在现有元素之间添加新的块元素。

问题是，重建文档（.removeAll() 和 .add() 所有块）需要 3-4 秒，文档包含 300-400 个块。

通过在每个块之间插入空块并将光标放在那里，我可以轻松加快光标定位，但是如果我需要在现有块之间添加一个新的干净块怎么办？

我知道某种方法是创建我自己的“渲染引擎”，但我可以使用摆动组件更轻松地实现这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:43:22.027

我会说你应该只添加一个具有适当约束的块。然后 LayoutManager 的任务是在另一个块之间正确放置块并布局所有子组件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T12:59:07.047

您需要编写自己的 LayoutManager。

# multithreading - 使用 MS Office Word 打印到特定打印机（多线程，无默认打印机使用）

> ID：14399088
> 
> 赞同：0
> 
> 时间：2013-01-18T12:34:04.900
> 
> 标签：multithreading, printing, ms-word, ole

我想要实现的是使用 word 多线程打印到特定的打印机。它的工作方式

```
Word.Application.ActivePrinter = "printer name"; 
```

它会更改 Windows 上的默认打印机，并在我打印时使用它。但是，在多线程环境中，其他线程可以在其 word 对象上更改活动打印机，并且它将在所有 word.ActivePrinter 上更改它，因为它们被“绑定”到默认打印机。现在我刚刚在活动的 priter 和 printout() 方法上使用了 lock()。但是这种方法太慢了，整个更改活动打印机需要相当长的时间。并且锁定它会使整个程序变慢。

所以我要问的是，有没有一种方法可以在不使用/更改默认打印机的情况下打印到指定的打印机，如果是这样，我应该在哪里查找以及在哪里可以找到它？

亲切的问候

编辑：发现这个：

[http://support.microsoft.com/kb/216026](http://support.microsoft.com/kb/216026)

我的解决方案：

```
 object wordBasic = word.WordBasic;
 wordBasic.GetType().InvokeMember("FilePrintSetup",
     System.Reflection.BindingFlags.InvokeMethod,
     null,
     wordBasic,
     new object[] {PrinterName,true },
     null,
     null,
     new string[] {"Printer", "DoNotSetAsSysDefault" }); 
```

有了这个，我可以一次打印多个文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:56:19.600

解决方案：

```
object wordBasic = word.WordBasic;
wordBasic.GetType().InvokeMember("FilePrintSetup",
   System.Reflection.BindingFlags.InvokeMethod,
   null,
   wordBasic,
   new object[] {PrinterName,true },
   null,
   null,
   new string[] {"Printer", "DoNotSetAsSysDefault" }); 
```

位于：http: [//support.microsoft.com/kb/216026](http://support.microsoft.com/kb/216026)

# android - 如何缩放图像以使其占据整个屏幕

> ID：14399089
> 
> 赞同：2
> 
> 时间：2013-01-18T12:34:06.900
> 
> 标签：android, surfaceview

我正在开发一个积木游戏这里是代码

```
public class Sprite {
    private static final int NO_COLUMNS = 12;
    Bitmap bmp,bar,brick,scalebit;
    GameView gameview;
    int x,speedx=0,speedy=0;
    int no_bricksperline;
    private int currentFrame=0;
    private int width;
    private int height;
    int brwidth;
    int brheight;
    int init=0;
    float tempwidth;
    String[][] bricks;
    GameThread thread;
    private int y;
    Paint paint=new Paint();
    private int barx;
    private int bary;
    @SuppressLint("FloatMath")
    public Sprite(GameView gameview,GameThread thread,Bitmap bmp,Bitmap bar,Bitmap brick)
    {
        this.gameview=gameview;
        this.bmp=bmp;
        this.bar=bar;
        this.brick=brick;
        this.thread=thread;
        this.no_bricksperline=gameview.getWidth()/brick.getWidth()-2;
        bricks=new String[no_bricksperline][4];
        brwidth=brick.getWidth();
        brheight=brick.getHeight();
        paint.setColor(Color.BLACK);
        for (int i = 0; i < no_bricksperline; ++i)
            for (int j = 0; j < 4; ++j)
                bricks[i][j] = "B";

        String strwidth=String.valueOf(((float)(bmp.getWidth())/NO_COLUMNS));
        if(strwidth.contains("."))
        {
            scalebit=Bitmap.createScaledBitmap(bmp, (int)(Math.ceil(((float)bmp.getWidth())/NO_COLUMNS))*NO_COLUMNS, bmp.getHeight(), true);
        }
        else
        {
            scalebit=bmp;
        }
        this.width=scalebit.getWidth()/NO_COLUMNS;
        this.bary=gameview.getHeight()-100;
        this.height=scalebit.getHeight();
        Random random=new Random();
         x = random.nextInt(gameview.getWidth() - width);
         y = random.nextInt(gameview.getHeight() - height)-100;
         if(y<=100)
         {
             y=120;
         }
        speedx=random.nextInt(10)-5;
        speedy=random.nextInt(10)-5;
    }

    public void update()
    {

        if(x>gameview.getWidth()-width-speedx || x+speedx<0)
        {
            speedx=-speedx;
        }
        if(y>gameview.getHeight()-height-speedy || y+speedy<0)
        {
            speedy=-speedy;
        }
        if(y+height >= bary-bar.getHeight()) {

            if((x+width>barx-bar.getWidth()/2 && barx>x) ||  (x<barx+bar.getWidth()/2 && x>barx)) {
                speedy=-speedy;
            }
        }

        if(y>0 && y<=(5*brheight) && init==1)
        {
            if(x!=0){
                int x1=x;
                int y1=y;
                if(x1>(no_bricksperline+1)*brwidth)
                {
                    x1=(no_bricksperline)*brwidth;
                }
                if(x1<=brwidth)
                {
                    x1=brwidth;
                }
                if(y1<=brheight)
                {
                    y1=brheight;
                }
                if(y1>=(4*brheight) && y1<=(5*brheight))
                {
                    y1=4*brheight;
                }
                int posi=(int)Math.floor(x1/brwidth)-1;
                int posj=(int)Math.floor(y1/brheight)-1;
                if(bricks[posi][posj]=="B")
                {
                        bricks[posi][posj]="K";
                        speedy=-speedy;
                }   

            }
        }
        if(y+height>bary+bar.getHeight())
        {
        }
        x=x+speedx;
        y=y+speedy;
        currentFrame=++currentFrame%NO_COLUMNS;
    }
    @SuppressLint("DrawAllocation")
    public void onDraw(Canvas canvas)
    {
        checkFinish();
        update();
        for (int i = 0; i < no_bricksperline; ++i){
            for (int j = 0; j < 4; ++j) {
                // ourHolder.lockCanvas();

                if (bricks[i][j].contains("B"))
                    canvas.drawBitmap(brick, (i+1)*brick.getWidth(),(j+1)*brick.getHeight(),
                            null);
                init=1;
            }
        }

        int srcX=currentFrame*width;
        int srcY=0;
        Rect src=new Rect(srcX, srcY, srcX+width, srcY+height);
        Rect dest=new Rect(x,y,x+width,y+width);
        canvas.drawBitmap(scalebit,src,dest,null);
        canvas.drawBitmap(bar, barx-bar.getWidth()/2, bary-bar.getHeight(),null);
    }

    private void checkFinish() {
        int totalbricks=0;
        for (int i = 0; i < no_bricksperline; ++i){
            for (int j = 0; j < 4; ++j){
                if(bricks[i][j] == "K"){
                    totalbricks++;
                }
            }
        }
        if(totalbricks==(no_bricksperline*4))
        {
            thread.setRunning(false);}
        }

    public void onTouch(MotionEvent event) {
        barx= (int) event.getX();

    }

} 
```

问题是砖正在显示![在此处输入图像描述](../Images/d3a0653abd177233dc77a23f97a3806b.png)

当我直接使用砖图像时，它们会被像素化，并且只显示 2 块砖。所以我写了一个逻辑来显示最少的砖块

我在我的代码中使用了一些逻辑这里是代码

```
 String strwidth=String.valueOf(((float)(bmp.getWidth())/NO_COLUMNS));
        if(strwidth.contains("."))
        {
            scalebit=Bitmap.createScaledBitmap(bmp, (int)(Math.ceil(((float)bmp.getWidth())/NO_COLUMNS))*NO_COLUMNS, bmp.getHeight(), true);
        }
        else
        {
            scalebit=bmp;
        } 
```

但是墙和砖之间有一个缝隙。我怎样才能让砖块占据整个屏幕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:13:40.317

如果我对您的理解正确，您的问题是要调整砖块的宽度以填充整个屏幕。尝试使用这个

```
 DisplayMetrics metrics = new DisplayMetrics();
 getWindowManager().getDefaultDisplay().getMetrics(metrics);
 dispWidth=metrics.widthPixels;

 //make the dispWidth your gameView width 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T11:47:16.527

用这个

```
this.no_bricksperline=gameview.getWidth()/brick.getWidth(); 
```

代替

```
this.no_bricksperline=gameview.getWidth()/brick.getWidth()-2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T12:56:05.870

使用 imageview 属性

```
android:scaleType="..." 
```

# wcf - 将默认整数值传递给 Biztalk 中的 WCF 服务

> ID：14399092
> 
> 赞同：0
> 
> 时间：2013-01-18T12:34:20.787
> 
> 标签：wcf, biztalk, default-value

我通过“添加生成的项目”在 biztalk 中使用了 WCF 服务。WCF 中有一个采用整数参数的方法。在编排中，我想向该方法传递一个默认值，或者说我想对输入值进行硬编码。我怎么能做到这一点。我已经用谷歌搜索了这个问题，但没有得到任何足够的结果。

我所做的是声明一个整数变量为其分配一个值，然后我将该变量分配给整数类型的消息。

现在我如何将此消息分配给 WebService 请求类型的消息？或者我如何将整数类型消息转换为 WebService 请求类型消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:47:22.967

有很多方法可以做到这一点：

1.  如果您正在映射来自另一条消息的请求，您可以在映射中对其进行硬编码 - 单击映射编辑器的 RHS 中的字段，然后在`Value`属性框中设置硬编码值

2.  创建（虚拟）请求消息后，您可以`xpath()`使用~~表达~~消息*分配*形状

    `xpath(myRequestMessage, "//*[local-name()='NameOfFieldHere']") = 3; // Or set to it your variable`

3.  如果该字段在您的架构中是可区分的，您可以使用区分字段而不是 xpath，即在~~表达~~消息分配形状：

    `myRequestMessage.NameOfFieldHere = 3;`

（请注意，如果它是多部分消息，那么它将是`myRequestMessage.Part.NameOfFieldHere`OFC）

一个免责声明：我假设 WCF 服务请求消息是微不足道的，即只是一个整数字段。如果您的消息很大，`//local-name() ...`不建议使用，因为

1.  可能有多个节点同名`NameOfFieldHere`
2.  BizTalk 使用的 XSL 解析器在使用`//`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:19:46.367

Biztalk Scheduler Adapter 在这种情况下非常有用。它在用户预定义的计划集上生成所需的 XML。因此，用硬编码值填充您的 XML 并通过此适配器接收它们。

# php - 带有mysql fetch的while循环内的while循环

> ID：14399099
> 
> 赞同：0
> 
> 时间：2013-01-18T12:34:40.780
> 
> 标签：php, mysql, while-loop

我试图`while`在`while`. 当 while 循环运行时，可以说*第五次*，它检测到数据库中的一个项目。我希望它将项目打印到第五个循环。

但它会自我复制到循环结束（直到第 31 次）。

有人知道如何仅在第五次循环时将其打印到循环中吗？而不是循环结束？

```
$num = 31
$i=0;
while($i<$num){
  $i++;
  mysql_num_rows(mysql_query("SELECT * FROM webCalendar WHERE day='$i'"))
  $sql = mysql_query("SELECT * FROM webCalendar WHERE day='$i'");
  while($result = mysql_fetch_object($sql)) {
    $info.= <<<EOD
    $result->descrip
    EOD;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:46:15.527

1.  您可以随时[`break`](http://php.net/manual/en/control-structures.break.php)使用循环，或者测试循环条件中的标志（一旦找到结果就设置）；

2.  您不需要以这种方式搜索结果，因为 MySQL 可以为您完成（效率更高，特别是如果您定义了合适的索引）*；*

3.  你真的不应该再使用`ext/mysql`它了——它从 PHP v5.5.0 开始就被弃用了，将来会被删除。

将它们放在一起，例如使用 PDO：

```
$dbh = new PDO("mysql:dbname=$dbname", $username, $password);
$qry = $dbh->query('
  SELECT descrip FROM webCalendar WHERE day = (
    SELECT MIN(day) FROM webCalendar WHERE day BETWEEN 1 AND 31
  )
');
while (($descrip = $qry->fetchColumn()) !== false) $info .= $descrip; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:40:46.140

```
$num = 31
$i=0;
$is_found = false;
while($i<$num && $is_found == false){

  $i++;

  mysql_num_rows(mysql_query("SELECT * FROM webCalendar WHERE day='$i'"))
  $sql = mysql_query("SELECT * FROM webCalendar WHERE day='$i'");
  while($result = mysql_fetch_object($sql))
  {
    $info.= <<<EOD
    $result->descrip
    EOD;

    $is_found = true;

  }
} 
```

# visual-studio-2010 - TeamCity 警告：没有为此构建配置启用兼容代理

> ID：14399100
> 
> 赞同：1
> 
> 时间：2013-01-18T12:34:42.413
> 
> 标签：visual-studio-2010, nunit, teamcity

我正在尝试在我目前的工作地点建立持续集成。这不是我以前做过的事情，所以我相当肯定会有一些我没有做过的步骤或我不知道的事情。

我在构建服务器（Windows Server 2008 R2）上安装了 TeamCity Professional 7.1.3。我创建了一个简单的 .NET 应用程序，它没有数据库连接，只有三个 NUnit 测试。此应用程序使用 .NET 框架 4。

我使用 NUnit 设置了一个构建步骤并收到了许多错误，但我现在已经解决了它们，基本上是通过在构建服务器上安装 .NET 框架。

我现在使用 Visual Studio 添加了一个额外步骤，但 TeamCity 现在显示警告“没有为此构建配置启用兼容代理”。

这个问题看起来和我的很相似： [我需要什么才能在 TeamCity 中安装与 Visual Studio 2010 (sln) 兼容的构建代理？](https://stackoverflow.com/questions/3179921/what-do-i-need-to-install-a-visual-studio-2010-sln-compatible-build-agent-in-t) 它帮助我解决了我在使用 NUnit 时遇到的问题，但不适用于当前的问题。

我在设置过程中是否遗漏了什么？如果我正在使用 NUnit 构建和运行测试，我需要为这第二步操心吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:35:46.907

你安装了完整的框架，正确的——不仅仅是客户端？这是一个[TeamCity 论坛帖子](http://devnet.jetbrains.net/thread/311239)`Unmet requirements:DotNetFramework4.0_x86 exists`，介绍了在您之前安装框架时如何解决兼容性错误。

# java - 如何在 Java EE 应用程序中使用多线程环境

> ID：14399103
> 
> 赞同：0
> 
> 时间：2013-01-18T12:34:45.990
> 
> 标签：java, multithreading, jakarta-ee, web-applications, servlets

据我所知，**Servlet**是**多线程**的，以及像 Struts 这样的框架构建在 servlet 层次结构的顶部。所以我想知道：

**1：**是否有必要为 Java EE 开发人员学习多线程，如果是，那么

**a:**什么时候在 Java EE 应用程序中使用多线程？

**b:**哪种Java EE 应用程序通常使用多线程概念，您能否提供一些现实生活中的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:07:52.300

首先，我可能应该提到“Java EE 开发人员”的定义通常非常广泛。原因是您通常可能会使用 Java EE 堆栈中的一些技术，但这并不一定意味着您将在 Java EE 容器中运行您的代码，例如因为您的应用程序将是一个使用以下服务的独立客户端Java EE 容器。

**1.**一般来说，了解多线程概念并了解其一些实现细节对于 Java EE 开发人员来说非常重要。首先，正如您所提到的，许多框架都依赖于这些概念。其次，Java EE 容器也可能存在一些缺陷，如果有一天你遇到其中之一，你需要了解多线程来调试容器代码本身。

**一个。**您**永远不**应该在 Java EE 容器中运行的代码中启动任何`java.lang.Thread`实例`java.lang.Runnable`。我不记得在哪个特定规范中提到了这个限制，但它仍然存在。

**湾。**您可能有一些独立的应用程序，例如将文件导入数据库。您可能希望使其成为多线程的原因是确保它能够同时执行多个导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:39:50.843

**1：**没有。

但是，如果您了解多线程的基础知识，那么它会有所帮助。

# android - 错误 1 cocos2d x libgame.so

> ID：14399105
> 
> 赞同：0
> 
> 时间：2013-01-18T12:34:52.420
> 
> 标签：android, cygwin, cocos2d-x

过去 2 天我一直在尝试为 android 编译一个 helloworld 项目。到目前为止，它一直在给出不同的错误，但我通过使用用户在此处或在 stackoverflow 提出的不同问题找到了自己的方法。但是现在，我到处搜索，在任何地方都找不到合适的解决方案。

当我尝试在 cygwin 中运行 build_native.sh 时，它开始编译，但在 libgame.so 共享库中，它给出了退出代码 1 的错误。其他人也遇到过这种类型的错误，但他们的解决方案都不适合我. 我检查了 android.mk 并且参考是正确的。

我尝试的每一种方法都失败了。我需要认真的帮助:(

非常感谢 ：）

PS我使用的是windows8（64位）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:25:21.127

我没有在 main.c 文件中设置路径。它需要指向正确的文件夹（类） 不幸的是，没有文章或教程提到它，通过反复试验来管理它。

# android - 当我以编程方式添加 textview 时，如何给顶部空白？

> ID：14399107
> 
> 赞同：4
> 
> 时间：2013-01-18T12:35:03.397
> 
> 标签：android, android-layout, textview

我正在做一个类似whatsup的应用程序。我的问题是关于界面的。我可以得到一条消息 desc 并解析它。之后我可以以编程方式添加布局，但它一直在写相同的坐标。我尝试`tv.layout(l, t, r, b)`了 tv.setTop 但不起作用。

我的问题在哪里？

```
 bubbleLayout=(RelativeLayout)findViewById(R.id.layoutbubble);

  for(int i=0;i<msgid.length;i++){
      RelativeLayout relativeLayout = new RelativeLayout(this);
      RelativeLayout.LayoutParams rlp = new RelativeLayout.LayoutParams(
              RelativeLayout.LayoutParams.FILL_PARENT,
              RelativeLayout.LayoutParams.FILL_PARENT);

      // Creating a new TextView
      TextView tv = new TextView(this);
      tv.setText(msgdesc[i]);
      tv.setTop(20);        

      // Defining the layout parameters of the TextView
      RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
              RelativeLayout.LayoutParams.WRAP_CONTENT,
              RelativeLayout.LayoutParams.WRAP_CONTENT);
      lp.addRule(RelativeLayout.ALIGN_PARENT_LEFT);

      // Setting the parameters on the TextView
      tv.setLayoutParams(lp);

      // Adding the TextView to the RelativeLayout as a child
      bubbleLayout.addView(tv); 
```

我的 XML 文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="1300dip"
        android:layout_height="80dip"
        android:background="#084B8A" >

        <TextView
            android:id="@+id/messagetitle"
            android:layout_width="wrap_content"
            android:layout_height="90dip"
            android:layout_centerInParent="true"
            android:layout_marginTop="30dip"
            android:textColor="#ffffff"
            android:textSize="12pt" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/layoutbubble"
        android:layout_width="1300dip"
        android:layout_height="500dip"
        android:layout_marginTop="10dip" >
    </RelativeLayout>

    <RelativeLayout
        android:layout_width="1300dip"
        android:layout_height="80dip"
        android:layout_marginTop="10dip" >

        <EditText
            android:id="@+id/replytext"
            android:layout_width="1000dip"
            android:layout_height="90dip"
            android:layout_marginLeft="10dip" />

        <Button
            android:id="@+id/sendbutton"
            android:layout_width="200dip"
            android:layout_height="90dip"
            android:layout_marginLeft="1050dp"
            android:background="#084B8A"
            android:text="Send"
            android:textColor="#ffffff"
            android:textSize="12pt" />
    </RelativeLayout>

</LinearLayout> 
```

截屏

![](../Images/e6fba8c03b10d675316d5701bd301964.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T09:20:17.273

我解决了我的问题。在 xml 中`RelativeLayout`更改为`LinearLayout`

```
<LinearLayout
        android:id="@+id/layoutbubble"
        android:layout_width="1300dip"
        android:layout_height="500dip"
        android:layout_marginTop="10dip"
        android:orientation="vertical">
</LinearLayout> 
```

并将我的代码更改如下：

```
bubbleLayout=(LinearLayout)findViewById(R.id.layoutbubble);
for(int i=0;i<msgid.length;i++){  
    // Creating a new TextView
    TextView tv = new TextView(this);
    tv.setText(msgdesc[i]);
    tv.setPadding(30, 10, 0, 0);         
    bubbleLayout.addView(tv);         
} 
```

这就对了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T12:38:07.270

我认为您使用的是RelativeLayout 还是普通的LinearLayout？

尝试使用 LinearLayout`android:orientation="vertical"`

# android - 在 Android 应用程序中附加任何类型的文件？

> ID：14399119
> 
> 赞同：6
> 
> 时间：2013-01-18T12:35:57.810
> 
> 标签：android, android-layout, android-widget

我正在构建一个应用程序，当用户在应用程序上按下“浏览”按钮时，我想显示来自手机的文件夹，用户将在其中选择文件/图像。选择附件后，应用程序将在附件中显示文件名。我正在寻找的是文件附件机制如何在 android 中工作，因此非常感谢任何代码示例或片段。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T12:57:04.247

你真正想做的是执行 Intent.ACTION_GET_CONTENT。如果您将 type 指定为，`"file/*"`那么文件选择器将允许您从文件系统中选择任何类型的文件。

这里有几个读物：

*   [关于 ACTION_GET_CONTENT 的 Android 文档](http://developer.android.com/reference/android/content/Intent.html#ACTION_GET_CONTENT)
*   [一个工作示例](http://android-er.blogspot.co.uk/2011/03/pick-file-using-intentactiongetcontent.html)

这是从博客中提取的源代码（由 Android-er 提供）：

```
public class AndroidPick_a_File extends Activity {

 TextView textFile;

 private static final int PICKFILE_RESULT_CODE = 1;

   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       Button buttonPick = (Button)findViewById(R.id.buttonpick);
       textFile = (TextView)findViewById(R.id.textfile);

       buttonPick.setOnClickListener(new Button.OnClickListener(){

   @Override
   public void onClick(View arg0) {
    // TODO Auto-generated method stub

    Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
             intent.setType("file/*");
       startActivityForResult(intent,PICKFILE_RESULT_CODE);

   }});
   }

 @Override
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
  // TODO Auto-generated method stub
  switch(requestCode){
  case PICKFILE_RESULT_CODE:
   if(resultCode==RESULT_OK){
    String FilePath = data.getData().getPath();
    textFile.setText(FilePath);
   }
   break;

  }
 }
} 
```

获取所选文件的路径后，您将如何处理它取决于您：将路径存储在数据库中，将其显示在屏幕上等。

如果您想使用默认应用程序打开文件，请遵循[此博客](http://helloworldcodes.blogspot.co.uk/2011/10/android-open-folder-with-default.html)中的建议。同样，我提取了代码（由 Hello World Codes 提供）：

第一种方式：

```
String path="File Path";
Intent intent = new Intent();
intent.setAction(android.content.Intent.ACTION_VIEW);
File file = new File(path);

intent.setData(Uri.fromFile(file));

startActivity(intent); 
```

第二种方式：

```
String path="File Path";   
Intent intent = new Intent();
intent.setAction(android.content.Intent.ACTION_VIEW);
File file = new File(path);

MimeTypeMap mime = MimeTypeMap.getSingleton();
String ext=file.getName().substring(file.getName().indexOf(".")+1);
String type = mime.getMimeTypeFromExtension(ext);

intent.setDataAndType(Uri.fromFile(file),type);

startActivity(intent); 
```

请记得离开，感谢值得的人（-.

*   [http://android-er.blogspot.co.uk/2011/03/pick-file-using-intentactiongetcontent.html](http://android-er.blogspot.co.uk/2011/03/pick-file-using-intentactiongetcontent.html)
*   [http://helloworldcodes.blogspot.co.uk/2011/10/android-open-folder-with-default.html](http://helloworldcodes.blogspot.co.uk/2011/10/android-open-folder-with-default.html)

# javascript - 出于什么原因，一旦爬上他的父母，我就无法通过 ID 检索元素？

> ID：14399120
> 
> 赞同：0
> 
> 时间：2013-01-18T12:35:58.397
> 
> 标签：javascript, html

在 html 我有这样的代码

```
<body>
  <script src="debug.js"></script>   
  <button id="proof" onclick="debug('result:', this);">proof</button>
</body> 
```

在javascript中：

```
function debug(msg, e) 
{

    var log = document.getElementById("debuglog");

    if (!log)// If no element with the id "debuglog" exists, create one.
    {
        log = document.createElement("div"); /
        log.id = "debuglog";
        log.innerHTML = "<h1>Debug Log</h1>"; 
        document.body.appendChild(log); 
   }

    var pre = document.createElement("pre");
    var text = document.createTextNode(msg + e.parentNode.getElementById("proof")); //<--PROBLEM HERE
    pre.appendChild(text);
    log.appendChild(pre); 
    }
} 
```

请注意，如果我在文本节点中写入**msg + e.parentNode**，则代码有效，一旦我添加**.getElementById("proof")**，则不会检索到任何结果（我认为脚本在运行时阶段出错）。

我想要做的是“导航”通过 html 元素，调用他的父母和他的孩子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:56:23.567

`getElementById`是 的原型`document`，而不是每个元素（在文档中）的原型。
因此，如果您想限制`getElementById`搜索特定元素的子元素而不是搜索整个文档（就像`getElementsByTagName`使用特定元素作为父元素一样），您需要将自己的原型添加到所有元素（但 IE 不支持在 HTMLElement 上进行原型设计）或编写自己的函数。

请参阅[此页面](http://www.codingforums.com/showthread.php?t=38552)以获取一些建议，但请记住，一个 Id 在页面中应该始终是唯一的，因此仅使用`document.getElementById`在浏览器中内置和优化的 Id 仍然会更快。

**更新：**
这是我链接到的函数的重写，没有错误和更快的反向循环：

```
function GetChildById( dNode, id ) {
    var i, dResult = null;

    if ( dNode.getAttribute('id') === id ) { return dNode; }

    i=dNode.childNodes.length;
    while ( i-- ) {
        if ( dNode.childNodes[i].nodeType === 1 ) {
            dResult = GetChildById( dNode.childNodes[i], id );
            if ( dResult !== null )
                break;
        }
    }

    return dResult;
} 
```

用法：`GetChildById( node, 'id' )`

演示：[jsfiddle](http://jsfiddle.net/SEpfQ/)

但就像 axel.michel 说的：不要那样做，没用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:42:14.007

由于 ID 必须是页面上的唯一元素，因此您只需使用 document.getElementById('YOURID') 即可访问它。它是文档方法，因此您的脚本会引发错误。如果你想实现这样的东西，你必须通过自定义函数来实现：

```
function youShouldNotDoThis( element, id ) {
    var hit = null;
    if ( element.getAttribute('id') == id ) {
        return element;
    }
    for ( var i = 0, l = element.childNodes.length; i < l; i++ ) {
        if ( element.childNodes[i].nodeType == 1 ) {
            hit = youShouldNotDoThis( element.childNodes[i], id );
            if ( hit != null ) {
                break;
            }
        }
    }
    return hit;
} 
```

在您的脚本片段中：

```
var whyEver = youShouldNotDoThis(e.parentNode,'proof');
var text = document.createTextNode(msg + whyEver); //<--NO MORE PROBLEM HERE 
```

同样，您不应该通过属性 ID 执行此操作，因为 ID 应该是唯一的，但您可以轻松更改此功能以扫描与 ID 不同的内容。

# ios - 自定义表格部分页脚视图 - 标签不可见

> ID：14399122
> 
> 赞同：0
> 
> 时间：2013-01-18T12:36:03.890
> 
> 标签：ios, uitableview

我在 Xcode 中使用单个 UITableViewController 创建了一个新的单视图项目（使用故事板）。这是设置代码：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    _footerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 44, 44)];
    _footerView.autoresizingMask = UIViewAutoresizingFlexibleWidth;

    UILabel *l = [[UILabel alloc] initWithFrame:CGRectMake(60, 0, 44, 44)];
    l.text = @"Label Label Label Label Label Label Label Label Label";
    l.autoresizingMask = UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleWidth;
    l.backgroundColor = [UIColor clearColor];

    [_footerView addSubview:l];

    _footerView.backgroundColor = [UIColor lightGrayColor];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return 1;
}

- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section {
    return _footerView.frame.size.height;
}

- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section {
    return _footerView;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    return [tableView dequeueReusableCellWithIdentifier:@"Cell"];
} 
```

我希望在 x = 60 处绘制自定义表格页脚视图中的标签，但是当我运行项目时，起初标签是不可见的（纵向，附加屏幕）。然后，如果我旋转一次，它变得可见，如果我旋转回纵向，它是可见的。

我错过了什么？

![标签不可见](../Images/34bcad60040a067d0b9318942e8d529d.png) ![景观](../Images/14d63be019cf36a2b4b9120f393f37ef.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:44:29.047

您似乎正在使用 44px 的宽度和高度初始化您的页脚视图，但将标签添加到其边界之外。

请尝试以下操作：

```
_footerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, CGRectGetWidth(self.tableView.frame), 44)];

_footerView.autoresizingMask = UIViewAutoresizingFlexibleWidth;

UILabel *l = [[UILabel alloc] initWithFrame:CGRectInset(_footerView.bounds, 60.0f, 0.0f)];
l.text = @"Label Label Label Label Label Label Label Label Label";
l.autoresizingMask = UIViewAutoresizingFlexibleWidth;
l.backgroundColor = [UIColor clearColor];

[_footerView addSubview:l];

_footerView.backgroundColor = [UIColor lightGrayColor]; 
```

另外一点，`[UIColor clearColor]`如果可以的话，尽量不要用作标签背景颜色 - 它会显着降低滚动性能。在这种情况下，您应该使用`[UIColor lightGrayColor]`它以匹配其超级视图。

# java - 如何创建一个使用 Web 服务的 Java 客户端？

> ID：14399126
> 
> 赞同：2
> 
> 时间：2013-01-18T12:36:21.427
> 
> 标签：java, web-services, wsdl

好吧，我创建了一个 Web 服务，我可以在以下位置访问它：

http://127.0.0.1:8080/myapp/WSPA?wsdl

现在我需要通过从另一个 java 应用程序调用它来测试我的 web 服务，以验证它是否正常工作。我已经看到它在 eclipse 上使用来自 JBoss 插件的 WebService Client 工作。但问题是我有一个方法可以接收包含字符串和字节数组的 SoapFile 列表。我需要验证它是否工作。

```
@XmlType
public class SoapFile implements Serializable {

  private String fileName;
  private byte[] fileData;

  public String getFileName() {
     return fileName;
  }

  public void setFileName(String fileName) {
     this.fileName = fileName;
  }

  public byte[] getFileData() {
     return fileData;
  }

  public void setFileData(byte[] fileData) {
     this.fileData = fileData;
  }
} 
```

我还没有找到如何创建一个使用该服务进行测试的简单 Web 服务客户端。我想要一些指导......教程或一些解释如何一步一步制作它的网站。我如何为这个 web 服务创建一个 java 客户端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:43:31.133

Igor，只需`wsimport`与您的 Web 服务 url 一起使用 - 您将获得 WebService 的生成类，然后以这种方式调用服务：

```
ServiceGenerateFromWSImportWhichIsTheSameAsYour iService = 
   new ServiceGenerateFromWSImportWhichIsTheSameAsYour().
            getServiceGenerateFromWSImportWhichIsTheSameAsYourPort();

// now on iServie instance you can invoke method from your webservice
// but you have to use stub classes generated by wsimport

iService.myMethodWhichGetFileList(List<SoapFileStubGeneratedClass> sopaFiles); 
```

并且`wsimport`是 jdk 安装文件夹中的标准 java 工具

更多关于`wsimport`工具的信息，您可以在这里找到：

[wsimport 文档](http://docs.oracle.com/javase/6/docs/technotes/tools/share/wsimport.html)

在您的情况下使用`wsimport`将是：

```
wsimport -p generated_classes -s generated_sources http://127.0.0.1:8080/myapp/WSPA?wsdl 
```

你会在文件夹中找到 .class 文件，在文件夹中找到`generated_classes`.java 文件`generated-sources`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:45:41.420

您有 WSDL 文件吗？如果是，那么您可以使用 Eclipse 之类的 IDE 来生成客户端存根。

下面的链接也将是一个很好的起点

[http://docs.oracle.com/cd/E17802_01/webservices/webservices/reference/tutorials/wsit/doc/Examples_glassfish6.html](http://docs.oracle.com/cd/E17802_01/webservices/webservices/reference/tutorials/wsit/doc/Examples_glassfish6.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T14:20:21.650

[你可以在这里](http://java.dzone.com/articles/jax-ws-hello-world)`wsimport`找到 Jax-WS的“Hello World”教程

蒂姆

# javascript - JS showModalDialog 不能在 chrome 中作为模态工作

> ID：14399127
> 
> 赞同：1
> 
> 时间：2013-01-18T12:36:21.540
> 
> 标签：javascript, google-chrome, showmodaldialog

我`showModalDialog()`在我的应用程序中使用，让用户以模式弹出窗口的形式查看来自不同来源的文章。

它适用于 FF 和 IE，但在 chrome 中它的行为不像模态，我仍然可以进入父窗口并单击其中的任何元素。

我想让它和 IE 和 FF 一样工作。

我看过一些解决方法

1）`onfocus`在父窗口上设置事件，并再次关注子窗口。

```
 <script type="text/javascript">
        setInterval(checkFocus, 10);
        var mywindow;
        function openModal() {
            var a = new Array;
            a[0] = 1;
            a[1] = 4;
            mywindow = window.showModalDialog(myurl,
      a, "dialogwidth: 1000; dialogheight: 700; resizable: yes;center : yes;");
        }

        function checkFocus() {
            if (mywindow != null && mywindow != undefined) {
                if (window.focus) {
                    mywindow.focus();
                }
            }
        }
      </script> 
```

但这似乎没有按预期工作。

2）`onblur`在子窗口上设置事件，再次聚焦自己

我从一些在线资源中阅读了这个解决方案。如果仅从我的域中自定义子窗口，我可以应用此解决方案，但由于我的子窗口可以是任何`url`来自任何的子窗口`domain`，因此不适用于我的情况。

我需要让它工作，有人可以建议我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:47:15.057

Chrome 的实现存在严重的错误。最重要的是，Chrome 显示的窗口不是模态的（请参阅[Chromium 错误 #16045](http://code.google.com/p/chromium/issues/detail?id=16045)），这意味着用户能够在处理模态对话框之前与原始窗口进行交互。

# .net - 从函数返回退出 - 这可能吗

> ID：14399130
> 
> 赞同：0
> 
> 时间：2013-01-18T12:36:32.903
> 
> 标签：.net, vb.net

是否可以从函数返回退出？

这样我就可以使用函数 MyExit 退出 Page_Load 函数

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    MyExit()   'Exit

End Sub

Private Function MyExit() As Exit

    Return Exit 

End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:40:59.967

不，但您可以设置这样的标志：

```
Protected Sub Page_Load()
    Dim bExit as Boolean = MyExit()
    If bExit then Exit
End Sub

Private Function MyExit() As Boolean
    Dim bOk as Boolean

    '[...] 

    Return bOk
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:22:28.230

这个怎么样？

```
Private Sub MyExit()

    End

End Sub 
```

# c++ - c++ 中类的成员函数的 pthread - 为什么不是模板？

> ID：14399131
> 
> 赞同：2
> 
> 时间：2013-01-18T12:36:40.207
> 
> 标签：c++, multithreading, templates, pthreads

在 C++ 中将 pthread 与类的成员函数一起使用的“典型”方法是使用继承（如此处建议的[https://stackoverflow.com/a/1151615/157344](https://stackoverflow.com/a/1151615/157344)）。但为什么不这样：

```
#include <pthread.h>

template <class T, void * (T::*thread)()>
class Thread
{
public:
    int create(T *that) { return pthread_create(&_handle, nullptr, _trampoline, that); };
    pthread_t getHandle() const { return _handle; };

private:
    static void * _trampoline(void *that) { return (static_cast<T *>(that)->*thread)(); };

    pthread_t _handle;
}; 
```

它可以这样使用：

```
class SomeClassWithThread
{
public:
    int initialize() { return _thread.create(this); };

private:
    void * _threadFunction();
    Thread<SomeClassWithThread, &SomeClassWithThread::_threadFunction> _thread;
}; 
```

它的优点是不使用虚拟功能，因此不使用 vtable 并且使用的 RAM 更少（我正在为 MCU 开发它，而不是为 PC 开发，因此 RAM 的使用很重要）。它也不需要虚拟析构函数。

此外，我认为它更有意义，因为典型的对象而不是 HAS-A 线程（组合），而不是 IS-A 线程（继承），对吧？(;

与继承方法相反，这种设计是否有任何缺陷，因为我在任何地方都没有看到它建议？您肯定会为每个实例化获取 _trampoline() 的副本，但这与继承版本中的虚函数调用没有太大区别......我希望 create() 和 getHandle() 将被内联，因为没有理由不...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:44:54.730

正如[Useless 在他的回答中提到的](https://stackoverflow.com/a/14402485/12711)，严格来说，`pthread`库调用的线程函数需要是`extern "C"`。虽然静态成员函数几乎适用于所有情况，但从语言律师的角度和至少一种现实生活情况来看，它是不正确的。有关详细信息，请参阅[https://stackoverflow.com/a/2068048/12711](https://stackoverflow.com/a/2068048/12711)。

但是，您可以让`extern "C"`函数提供`pthread`库和类模板之间的接口，但这似乎需要一点点开销：

```
#include <pthread.h>

struct trampoline_ctx
{
    void* (*trampoline)(void*);
    void* obj;
};

extern "C"
void* trampoline_c(void* ctx)
{
    struct trampoline_ctx* t = static_cast<struct trampoline_ctx*>(ctx);

    return (t->trampoline)(t->obj);
}

template <class T, void * (T::*thread)()>
class Thread
{
public:
    int create(T *that) { 
        ctx.trampoline = _trampoline;
        ctx.obj = that;
        return pthread_create(&_handle, nullptr, trampoline_c, &ctx); 
    };
    pthread_t getHandle() const { return _handle; };

private:
    static void * _trampoline(void *that) { return (static_cast<T *>(that)->*thread)(); };

    pthread_t _handle;
    struct trampoline_ctx ctx;
}; 
```

我同意在大多数情况下，组合而不是继承可能是更好的线程模型。

当然，请记住 C++11 提供`std::thread`了模板化的非继承设计。看看`boost::thread`C++11 是否不是一个选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:08:49.893

这解决了“this”地址的问题

```
#include <pthread.h>

template <class T, void * (T::*thread)()>
class Thread
{
public:
    int create(T* passedThis) { return pthread_create(&_handle, nullptr, _trampoline, passedThis); };
    pthread_t getHandle() const { return _handle; };

private:
    static void * _trampoline(void *that) { return (static_cast<T*>(that)->*thread)(); };

    pthread_t _handle;
}; 
```

更新用法：

```
class SomeClassWithThread
{
public:
    int initialize() { return _thread.create(this); };

private:
    void * _threadFunction();
    Thread<SomeClassWithThread, &SomeClassWithThread::_threadFunction> _thread;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T15:47:56.837

你的`Thread::_trampoline`方法没有`extern "C"`链接，所以虽然这可能在实践中有效，但它是不正确的。由于您无法为模板函数提供正确的链接，因此除非您允许宏，否则没有简单的方法可以自动执行此操作。

> 此外，我认为它更有意义，因为典型的对象而不是 HAS-A 线程（组合），而不是 IS-A 线程（继承），对吧？(;

不，这取决于您的型号。

*   活动对象经常紧密地绑定到单个线程（因此您可以考虑比一个实例 IS-A 并发执行过程）
*   对于任务队列（或线程池），*任务*通常是对象，而线程与一些调度逻辑相关联（队列/池本身当然也可能是一个对象，但这似乎不是你想要的'建议）

老实说，如果您正在创建如此多不同的顶级线程函数，以至于担心 vtables 占用的内存，我怀疑您的设计首先是错误的。

# jboss - Liferay + jboss

> ID：14399133
> 
> 赞同：0
> 
> 时间：2013-01-18T12:36:50.120
> 
> 标签：jboss, liferay

我正在尝试启动 jboss，但出现错误。我使用 jboss 7.1.1 和 Liferay。怎么了？

```
12:25:26,707 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) JBA
S015877: Stopped deployment ROOT.war in 235420ms
12:25:35,754 ERROR [stderr] (com.liferay.portal.kernel.deploy.auto.AutoDeploySca
nner) Exception in thread "com.liferay.portal.kernel.deploy.auto.AutoDeployScann
er" java.lang.NoClassDefFoundError: org/apache/tools/ant/types/resources/FailFas
t
12:25:35,785 ERROR [stderr] (com.liferay.portal.kernel.deploy.auto.AutoDeploySca
nner)   at org.apache.tools.ant.types.resources.BaseResourceCollectionContainer.
iterator(BaseResourceCollectionContainer.java:142)
12:25:35,801 ERROR [stderr] (com.liferay.portal.kernel.deploy.auto.AutoDeploySca
nner)   at org.apache.tools.ant.taskdefs.Expand.execute(Expand.java:135)
12:25:35,801 ERROR [stderr] (com.liferay.portal.kernel.deploy.auto.AutoDeploySca
nner)   at com.liferay.util.ant.ExpandTask.expand(ExpandTask.java:33)
12:25:35,801 ERROR [stderr] (com.liferay.portal.kernel.deploy.auto.AutoDeploySca
nner)   at com.liferay.portal.tools.deploy.BaseDeployer.deployFile(BaseDeployer.
java:955)
12:25:35,801 ERROR [stderr] (com.liferay.portal.kernel.deploy.auto.AutoDeploySca
nner)   at com.liferay.portal.tools.deploy.BaseDeployer.deployFile(BaseDeployer.
java:889)
12:25:35,801 ERROR [stderr] (com.liferay.portal.kernel.deploy.auto.AutoDeploySca
nner)   at com.liferay.portal.tools.deploy.BaseDeployer.autoDeploy(BaseDeployer.
java:198) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-01T13:23:38.483

第 1 步：首先要为 Liferay 开发设置机器，您需要下载并安装所有必需的软件，如下所述。

```
JAVA (JDK & JRE)
    http://www.oracle.com/technetwork/java/javase/downloads/index.html
 Eclipse IDE   
    http://www.eclipse.org/downloads/
Liferay JBOSS bundle (Community Edition or Enterprise Edition as per your requirements and preferences), Liferay Tomcat bundle (For server run time selection), Liferay Plugin SDK (For Development of plugins like hooks, portlets, themes etc.
     http://www.liferay.com/downloads/liferay-portal/available-releases
Apache Ant (For build and deployment of projects). 
```

第 2 步：现在在您的机器中设置环境变量。设置 JAVA_HOME 设置 JBOSS_HOME 设置 LIFERAY_HOME 设置 ANT_HOME

第 3 步：打开 Eclipse 并安装 Liferay IDE。转到帮助 -> Eclipse Marketplace 搜索“Liferay”。安装 Liferay IDE 并重启 eclipse。

第 4 步：配置 Liferay Plugin-SDK 转到 Window -> Preferences -> Liferay
Add Liferay Plugin-SDK

```
 Here you will option to update build.<username>.properties file. Select
 prompt.

 That's it your system is ready with development environment for Liferay. 
```

第 6 步：在 Liferay Plugin-SDK 文件夹中会有一个名为 build.username.properties 的文件

```
 Set path of server to refer JBOSS directory. 
```

第 7 步：创建新的 Liferay 插件项目。在里面创建新的 Portlet 项目。
选择 Liferay Portal Runtime 作为 Tomcat，因为 Eclipse 不提供 JBOSS 应用服务器的运行时，所以使用一些棘手的方法来处理它。

```
After clicking on finish it will ask for updating build.<username>.properties file.
Select "No" option.

Okay Now you are done with project creation and Setting  deployment server
as JBOSS. 
```

第 8 步：部署 Liferay Portlet 项目。
步骤 9：从 JBOSS 的 bin 目录运行standalone.bat

有关更多详细信息，请关注此博客[http://liferaywithjboss.blogspot.in/](http://liferaywithjboss.blogspot.in/)。

如果您需要更多详细信息，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T19:35:25.427

检查 ROOT.war/WEB-INF/ 位置中的 jboss-deployment-structure.xml 文件，以查看其中提到的任何依赖模块使用 ant-*.jars。问题可能是由于类路径中有多个具有相同类名的 jar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-12T06:37:21.513

新的 liferay 版本提供了一个 wildfly 包......这可能是一个起点，但是 ClassNotFound 通常源于该特殊上下文中缺少的 jar，无论是物理上还是被 jboss 模块系统抑制（开始是部署结构文件，或者更糟糕的是您安装的模块目录），但最终像我这样的人决定经常在自愿潜入新的工作环境之前获得一个新的工作环境......

# php - 为 javascript ajax 响应添加不同的数据类型

> ID：14399138
> 
> 赞同：0
> 
> 时间：2013-01-18T12:37:10.870
> 
> 标签：php, javascript, ajax, jquery

我遇到了这个问题，是否有任何合理的方法可以以某种方式在一个 XHR 请求中返回两种类型的数据？例如，我想返回一个带有一些数据的 html，但除了 JSON 或纯文本中的一些变量。

在这种情况下，我正在处理 ajax 分页，有一个请求返回带有下一个结果的 html，但我还需要一个整数，其中包含从服务器返回的结果总数。

我看到两个选项：

*   发出另一个 XHR 请求只是为了从服务器获取总数
*   将数据放入 html 中的某个属性中

但这两种方式似乎都不优雅。

知道如何实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:46:13.530

返回一个 JSON 编码的数组。

```
$return = array(
    'html' => '<div><!-- insert a lot of html here --></div>',
    'productId' => 3,
    'someArray' => array(1, 2, 3, 'string')
);
echo json_encode($return); 
```

然后在javascript中：

```
obj = JSON.parse(data); // data is return from the ajax request. 
```

# sencha-touch - 在 mac 上安装 sencha-touch 2.1

> ID：14399139
> 
> 赞同：0
> 
> 时间：2013-01-18T12:37:10.727
> 
> 标签：sencha-touch, sencha-touch-2.1, sencha-cmd

我需要在我的 Mac 上安装 sencha touch 2.1 但我不能……</p>

我遵循本指南

```
 http://www.sencha.com/learn/getting-started-with-sencha-touch-2 
```

所以我安装了 sencha cmd 并将 sencha-sdk 文件夹复制到 apache 的 www/ 目录中。如果我这样做：

```
localhost/sencha-skd 
```

在我的浏览器上，我看到了 sencha 的文档，所以服务器工作正常..

但是如果我写命令从终端

```
sencha 
```

我明白了

```
-bash: sencha: command not found 
```

这发生在每个文件夹中……</p>

有人可以帮助我吗？多谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T16:06:44.400

下载并安装 Sencha Cmd：[http ://www.sencha.com/products/sencha-cmd/download](http://www.sencha.com/products/sencha-cmd/download)

然后确保 Sencha Cmd 的路径在您的`.bash_profile`：

`export PATH=/path/to/Sencha/cmd/3.0.0.250:$PATH`（它将位于您的“bin”目录中）

保存`.bash_profile`并重新启动终端。

**编辑：** 您也可以尝试将路径添加到您`.bashrc`的。然后重新启动终端并尝试`sencha`再次运行。

最后验证 Sencha Cmd 是否在您的路径中`echo $PATH`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:10:14.770

Sencha Touch Sdk 仅包含包含框架的类，以及示例和文档。如果您想从终端使用 Sencha 命令生成应用程序、编译它等，则需要安装 Sencha Cmd。那是一种不同的产品。

您可以在以下指南中阅读更多信息： [http ://docs.sencha.com/touch/2-1/#!/guide/command](http://docs.sencha.com/touch/2-1/#!/guide/command)

并从这里下载最新版本： [http ://www.sencha.com/products/sencha-cmd/download](http://www.sencha.com/products/sencha-cmd/download)

# json - 将 JSON 用于弹性数据网格

> ID：14399143
> 
> 赞同：0
> 
> 时间：2013-01-18T12:37:21.160
> 
> 标签：json, apache-flex, datagrid

服务器向我们返回以下 JSON，

```
[{"id":"11111","progress":,"date":"Jan 14, 2013 12:00:00, "count":1,"status":0},
 {"id":"22222","progress":,"date":"Jan 15, 2013 12:00:00, "count":4,"status":1}] 
```

所以它返回一个数组。我如何将它映射到 flex 数据网格。
我试过这个，

```
var jsonResult:Array = com.adobe.serialization.json.JSON.decode(e.result);
var dataArray:ArrayCollection = new ArrayCollection(jsonResult); 
```

所以datagrid的dataProvider是{dataArray}。但是，如果我将列的 dataField 提供为“id”或“progress”，它不会显示任何数据。
这里缺少什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T08:58:01.197

这很好用：

```
var arr:Array=(com.adobe.serialization.json.JSON.decode(event.result) as Array);
var dp:ArrayCollection=new ArrayCollection(arr);
flexDataGrid.dataProvider=dp; 
```

# sorting - extjs 列排序和排序箭头图标

> ID：14399145
> 
> 赞同：4
> 
> 时间：2013-01-18T12:37:22.013
> 
> 标签：sorting, extjs, extjs4, columnheader

我有一个项目清单。当我单击列标题时，该列已排序，并且列标题中会出现一个排序箭头图标。但是，即使在过滤记录之后（通过在过滤器文本字段中输入文本并按下过滤器按钮），该列也会保留排序和排序箭头图标。我希望每次过滤记录时从列中删除排序和排序箭头图标。我发现了一些关于在重新加载网格时清除排序箭头图标的帖子（请参阅下面的链接）。但是我怎样才能把它应用到我的情况呢？任何提示将不胜感激。

[http://www.sencha.com/forum/showthread.php?48437-Help-How-to-remove-sort-field-when-reload-grid](http://www.sencha.com/forum/showthread.php?48437-Help-How-to-remove-sort-field-when-reload-grid)

[http://www.sencha.com/forum/showthread.php?3098-Clear-grid-s-sort-arrow-icon](http://www.sencha.com/forum/showthread.php?3098-Clear-grid-s-sort-arrow-icon)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T13:54:49.073

在 Ext JS 4.x 中，您可以在过滤之前清除网格上的排序器。

```
grid.store.sorters.clear();
grid.store.filter("name", "Lisa"); 
```

这是一个工作小提琴：

[http://jsfiddle.net/Vandeplas/5aKdc/](http://jsfiddle.net/Vandeplas/5aKdc/)

更新：

如果您不过滤/进行更改，您可以使用以下命令强制 UI 更新：

```
grid.view.refresh(); 
```

示例：http: [//jsfiddle.net/Vandeplas/5aKdc/3/](http://jsfiddle.net/Vandeplas/5aKdc/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-28T05:22:14.793

**在列模型中使用以下选项（ExtJs 3.4）**

```
menuDisabled:true //there will be no any menu 
sortable:false // there will be menu but disabled sorting option 
```

# php - PHP ，在外部 javascript 文件中共享一个有价值的变量

> ID：14399146
> 
> 赞同：0
> 
> 时间：2013-01-18T12:37:26.670
> 
> 标签：php, javascript, ajax, variables, global

[http://www.shedlimited.debrucellc.com](http://www.shedlimited.debrucellc.com)

该站点允许用户通过 PHP 脚本 (ajaxupload.php) 上传图像，该脚本存储在 php 脚本内部的 $uploaded_img 中。我想将我新存储的图像的 PATH 传递给一个 JS 文件，而我发现的唯一方法是将值写入文本文件，这非常过分

```
file_put_contents("testFile.txt", "");
$myFile = "testFile.txt";
$fh = fopen($myFile, 'w') or die("can't open file");

$stringData = $upload_image;
fwrite($fh, $stringData);
$stringData = "\n";
fwrite($fh, $stringData);
fclose($fh); 
```

同时，我运行了一个外部 .js 文件，它加载了我的 html5 Canvas 等，

我在外部 .js 文件中设置了一个全局变量 sourcer ，我可以通过从我在 php 脚本中写入 url 的文件中读取 URL 来访问和更新 index.php ：

```
jQuery.get('scripts/testFile.txt', function(data) {
sourcer = data;
}); 
```

有什么方法可以将 URL 值传递给 sourcer 而无需手动将其插入文本文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:40:44.310

在你的 php 模板上添加一个块到你的头上。

```
<script type="text/javascript">
    var uploaded_img = '<?php echo json_encode($uploaded_img); ?>';
</script> 
```

json 编码确保变量被正确编码，即使它是一个对象或数组。

如果它纯粹是一个ajax的东西。只需在您的 ajax 响应中返回文件名。因此，发布到您的 ajax 上传，并让您的 ajax 脚本返回一个带有文件名的 json 对象。

所以在你的上传脚本中，在他的底部：

```
header('Content-type: application/json');
echo json_encode(array('filename'=>$uploaded_img)); 
```

并阅读 javascript 中的 response.filename。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:53:34.940

使用[会话变量](http://php.net/manual/fr/reserved.variables.session.php)来存储上传的图像和使用 ajax 响应怎么样？

我看到同时使用两者的优势：您可以在上传图片后直接在上传页面上使用该值。对于会话变量，如果您需要从另一个上下文访问它，它将确保服务器端始终能够获取该值。

# java - 如何在 App Engine 应用程序中处理 /_ah/bounce 端点通知

> ID：14399149
> 
> 赞同：5
> 
> 时间：2013-01-18T12:37:33.907
> 
> 标签：java, google-app-engine, email

我`/_ah/bounce`在我的 App Engine 应用程序中接收消息。我可以从管理控制台的 App Engine 日志中看到这一点。

似乎缺乏这方面的文档，一些对 App Engine 源代码的挖掘似乎表明存在 和 之类的类`BounceNotification`，`BounceNotificationParser`这些类仅在最新的 SDK 1.7.4 中引入。

有人可以解释一下：

1.  这个 /_ah/bounce 端点是否仅在特定电子邮件无法送达并被退回时调用。

2.  我需要在 appengine-web.xml 和 web.xml 中进行哪些设置来捕获此 /_ah/bounce 端点？

3.  如何使用 BounceNotification 类从传入请求中提取有关退回通知的信息

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T07:11:38.593

这些反弹电话过去在不知不觉中暴露给您。现在我们正式发布了退回邮件功能，这样您应该能够解析退回邮件（简单！）。有关详细信息，请参阅以下文档：

接收退回通知 ( [Python](https://developers.google.com/appengine/docs/python/mail/bounce) | [Java](https://developers.google.com/appengine/docs/java/mail/bounce) )

# postgresql - postgresql 检查约束的自定义错误消息

> ID：14399150
> 
> 赞同：1
> 
> 时间：2013-01-18T12:37:35.090
> 
> 标签：postgresql, error-handling, constraints

我的请求表上有“valid_id”检查约束。但是当它违反约束时，它会显示以下错误

> 错误：关系“请求”的新行违反检​​查约束“valid_name”详细信息：失败行包含...。

但不是那样，我想显示**“插入记录失败。需要名称”之类的消息。**

有什么方法可以在 PostgreSQL 中显示自定义错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:06:48.760

这是一种高级领域，因为您希望在开始之前非常熟悉 SQL 状态以及现有的错误消息。请注意，您希望适当地重新使用现有的 sql 状态，以便应用程序不知道您已经覆盖了检查约束。

但是您可以做的是创建一个运行检查并`raise exception`在检查失败时发出 a 的函数。就像是：

```
CREATE FUNCTION check_is_not_null(value text, column_name text) RETURNS BOOL 
LANGUAGE plpgsql AS $$
begin
   IF $1 IS NULL THEN
      RAISE EXCEPTION 'Error:  % is required', $2;
   END IF;
   RETURN TRUE;
END;
$$; 
```

如果您使用的是 8.4 或更高版本，则可以指定 SQL 状态。

# java - 不带重音的搜索必须返回带重音的单词

> ID：14399151
> 
> 赞同：3
> 
> 时间：2013-01-18T12:37:36.637
> 
> 标签：java, hibernate, search, hibernate-search, accent-insensitive

我有一个使用 Hibernate、Spring 和 Java 开发的 Web 应用程序，它可以访问 Informix 数据库......

想象一下，您正在搜索某条带有重音符号的记录，例如“María”，但您在搜索框中输入“Maria”......现在它没有显示任何结果，但它必须显示“María”记录，以及任何其他组合，例如“Maríá”或“Máríá”或“Mária”等...

我怎样才能实现它？提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:39:09.627

您需要使用 ascii 化字符串添加另一列，并将其与 ascii 化搜索字符串进行比较，但使用主字符串作为结果。无法说服 Informix 为您执行此操作，尤其是当您希望从索引中获取它时。

附带说明一下，如果您在 Java 内存中拥有所有字符串，则可以将 a`SortedMap`与自定义`Collator`的 -based一起使用`Comparator`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T17:51:05.907

当您需要通过 Hibernate 搜索数据库并且担心口音、对更好的自然语言匹配感兴趣，或者只是想探索自动建议或错字更正等选项时，您应该查看[Hibernate Search](http://search.hibernate.org)，它通过一对夫妇自动完成大部分操作的注释。

# android - 通过反射更改 Android-JDK 的 Java 类

> ID：14399153
> 
> 赞同：-2
> 
> 时间：2013-01-18T12:37:44.860
> 
> 标签：android, reflection, dalvik, intercept

我想知道这样的事情是否可能：

1.  应用 AA 使用 Androids 类[MediaPlayer](http://developer.android.com/reference/android/media/MediaPlayer.html)播放一些歌曲到 STREAM_MUSIC
2.  应用程序 BB 通过标准 Java 反射方法更改/替换 Android 类 MediaPlayer 中的一些方法
3.  应用程序 AA 的 MediaPlayer-instance 使用由应用程序 BB 替换的方法

我确信在一个简单的 java 应用程序中这可以工作（曾经，我通过反射替换了外部库中的一些方法）。

但我不确定这是否适用于Android。我认为这些应用程序是相互分离的，只能通过通知进行通信，因为这将是一个非常大的安全漏洞。

我的目的是找到一种从其他应用程序中获取音频的方法，我从近 1 年以来一直在搜索和尝试。

提前致以诚挚的问候和感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:45:00.047

> 我想知道这样的事情是否可能

幸运的是，没有。虽然进程共享初始类定义，但任何以某种方式修改这些定义的应用程序都将透明地在新的私有副本（Linux 写入时复制）上工作。

> 我的目的是找到一种从其他应用程序中获取音频的方法

幸运的是，出于明显的隐私和安全原因，这是不可能的。

# ruby-on-rails - Capybara 将 html 标签转换为用 javascript 编写的 html 实体

> ID：14399157
> 
> 赞同：2
> 
> 时间：2013-01-18T12:37:50.443
> 
> 标签：ruby-on-rails, selenium, capybara

我有一些用 javascript 代码编写的 html 标签，在浏览器中运行代码时效果很好，但是当使用 capybara 运行相同的代码时，html 标签已转换为 html 实体。

这是在浏览器中执行时运行良好的代码

```
var groups = [], prev_element = 0;
groups[0] = "<option value=''>Select Group</option><option value=1>Administrators</option><option value=2>Editors</option><option value=3>Managers</option><option value=4>group 1</option><option value=5>Group a1</option><option value=6>Group a2</option><option value=7>Group a3</option><option value=8>b1</option><option value=9>b2</option><option value=10>b3</option>"; 
```

但是对于 capybara，相同的代码被编译为

```
var groups = [], prev_element = 0;
groups[0] = "&lt;option value=''&gt;Select Group&lt;/option&gt;&lt;option value=1&gt;Administrators&lt;/option&gt;&lt;option value=2&gt;Editors&lt;/option&gt;&lt;option value=3&gt;Managers&lt;/option&gt;"; 
```

这件事打破了测试用例。

# c# - C# 中的 24 小时日期时间

> ID：14399166
> 
> 赞同：2
> 
> 时间：2013-01-18T12:38:12.237
> 
> 标签：c#, datetime

我目前有`Datetime`使用`AM`/的标准`PM`。我希望有 24 小时显示。在网上搜索给了我很多`String.Format()`选项。

问题是这会创建一个字符串对象来显示日期。我需要使用一个`datetime`对象，因为它用于表中，并且必须能够对日期列进行排序（asc/desc）。该表是一个`GridView`对象。

**代码示例**

目前，代码显示日期如下 8/21/2009 11:28:36 AM。我的完美情况将显示为 11:28:36 21/8/2009。我知道我可以使用以下代码获得该结果。

```
date.ToString("dd/MM/yyyy HH:mm:ss"); 
```

问题是这是一个字符串。字符串 get 被放入表中，如果我对日期列进行排序，它将首先按天而不是年份排序。显示以下降序列。

```
21/8/2009 11:28:36
20/1/2013 15:55:23 
```

为了能够正确地对列进行排序，插入的 objecttype 应该是 DateTime。对象类型由以下代码强制。

```
dateTable.Columns.Add(new DataColumn("Date", typeof(DateTime))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:39:53.670

根据[这篇文章](http://forums.asp.net/t/1001482.aspx/1)，您可以像这样使用boundfield：

```
<asp:boundfield datafield="Your_Date_Column" dataformatstring="{0:MMMM d, yyyy}" htmlencode="false" /> 
```

然后，您可以简单地使用此格式字符串：

```
"HH:mm" 
```

大写字母 H 表示 24 小时时间，而小写 h 表示 12 小时时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:42:11.763

您应该在 GridView 中使用`DataFormatString`属性`BoundField`

# php - 将值从一个 php 函数传递到另一个函数而不调用函数

> ID：14399167
> 
> 赞同：-1
> 
> 时间：2013-01-18T12:38:16.337
> 
> 标签：php, variables

> 使用**全局变量**如何在**不**调用函数的情况下使用一个函数的值传递给另一个函数？

**喜欢**

```
$toshik;
function one()
{
  global $toshik;
  $toshik=2;
}

function two()
{
 one();
  global $toshik;
  echo $toshik; [//this should give value as **2**]
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:42:19.963

第一：你可能是指`global $toshik;`你的功能。

第二：你不能那样做。一个函数是要被调用的。在你调用它之前它什么都不做，所以很自然地，变量没有设置。

如果您只需要函数中的单个变量而不需要其他变量，请设置一些条件，例如`function one( $set = false )`，然后更改函数以仅设置变量，如果`$set == true`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:41:14.630

尝试

```
$var = 1;
foo();     // outputs: 1
bar();     // outputs: 2
echo $var; // outputs: 3

function foo() {
    global $var;
    echo $var; // -> 1
    $var++;
}

function bar() {
    global $var;
    echo $var; // -> 2
    $var++;
} 
```

在我回答之后你更新了你的问题。您发布的内容应该有效。您当然必须调用这些函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T12:42:56.140

这里有 2 个场景（跟进您的代码）。

```
// file 1
two(); // echoes nothing
// file 2
one();
two(); // echo 2 
```

没有第三种方法。顺便说一句，你想完成什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T13:27:50.660

尝试参考 valriable....

```
`$toshik;
function one(&$toshik){
  global $toshik;
  $toshik=2;
}
function two(){
  global $toshik;
  one();
  echo $toshik; 
}
two();` 
```

# c# - Common.Logging 使用 PostSharp 和 NLog 2.0

> ID：14399169
> 
> 赞同：3
> 
> 时间：2013-01-18T12:38:21.190
> 
> 标签：c#, nlog, postsharp, common.logging

我使用 Common.Logging 作为 NLog 2.0 的包装器。我这样做是为了将来可以用另一个日志记录提供程序替换 NLog。

我还使用 PostSharp 来避免每次需要时都编写 try catch 块。我有一个继承 OnMethodBoundaryAspect 的类：

```
[Serializable]
public class LogMethodAttribute : OnMethodBoundaryAspect
{
    private ILog logger;

    public LogMethodAttribute()
    {
        this.logger = LogManager.GetCurrentClassLogger();
    }

    public override void OnEntry(MethodExecutionArgs args)
    {
        logger.Debug(string.Format("Entering {0}.{1}.", args.Method.DeclaringType.Name, args.Method.Name));
    }

    public override void OnExit(MethodExecutionArgs args)
    {
        logger.Debug(string.Format("Leaving {0}.{1}.", args.Method.DeclaringType.Name, args.Method.Name));
    }

    public override void OnException(MethodExecutionArgs args)
    {
        logger.Error(args.Exception.Message,args.Exception);
    }
} 
```

我在 web.config 中配置了 Common.Logging，如下所示：

```
<configSections>
<sectionGroup name="common">
  <section name="logging" type="Common.Logging.ConfigurationSectionHandler, Common.Logging" />
</sectionGroup>
</configSections>
<common>
<logging>
  <factoryAdapter type="Common.Logging.NLog.NLogLoggerFactoryAdapter, Common.Logging.NLog20">
    <arg key="configType" value="FILE" />
    <arg key="configFile" value="~/NLog.config" />
  </factoryAdapter>
</logging>
</common> 
```

NLog.Config 看起来像这样：

```
<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  throwExceptions="true"
  internalLogLevel="Debug"
  internalLogToConsoleError="true"
  internalLogFile="c:\new projects/nlog-app.txt"
>

<!-- 
See http://nlog-project.org/wiki/Configuration_file 
for information on customizing logging rules and outputs.
 -->
<targets>
<target name="database"
        xsi:type="Database"
        commandText="INSERT INTO LogEvent(EventDateTime, EventLevel, UserName, MachineName, EventMessage, ErrorSource, ErrorClass, ErrorMethod, ErrorMessage, InnerErrorMessage) VALUES(@EventDateTime, @EventLevel, @UserName, @MachineName, @EventMessage, @ErrorSource, @ErrorClass, @ErrorMethod, @ErrorMessage, @InnerErrorMessage)"

        dbProvider="System.Data.SqlClient">
  <connectionString>
    Data Source=...;Initial Catalog=myDB;User Id=user;Password=pass;
  </connectionString>
  <installConnectionString>
     Data Source=...;Initial Catalog=myDB;User Id=user;Password=pass;
  </installConnectionString>

    <!-- parameters for the command -->
  <parameter name="@EventDateTime" layout="${date:s}" />
  <parameter name="@EventLevel" layout="${level}" />
  <parameter name="@UserName" layout="${identity}" />
  <parameter name="@MachineName" layout="${machinename}" />
  <parameter name="@EventMessage" layout="${message}" />
  <parameter name="@ErrorSource" layout="${event-context:item=error-source}" />
  <parameter name="@ErrorClass" layout="${event-context:item=error-class}" />
  <parameter name="@ErrorMethod" layout="${event-context:item=error-method}" />
  <parameter name="@ErrorMessage" layout="${event-context:item=error-message}" />
  <parameter name="@InnerErrorMessage" layout="${event-context:item=inner-error-message}" />
  <!-- commands to install database -->
  <install-command>
    <text>CREATE DATABASE myDB</text>
    <connectionString> Data Source=...;Initial Catalog=myDB;User Id=user;Password=pass;</connectionString>
    <ignoreFailures>true</ignoreFailures>
  </install-command>

  <install-command>
    <text>
      CREATE TABLE LogEvent(
      EventId int primary key not null identity(1,1),
      EventDateTime datetime,
      EventLevel nvarchar(50),
      UserName nvarchar(50),
      MachineName nvarchar(1024),
      EventMessage nvarchar(MAX),
      ErrorSource nvarchar(1024),
      ErrorClass nvarchar(1024),
      ErrorMethod nvarchar(1024),
      ErrorMessage nvarchar(MAX),
      InnerErrorMessage nvarchar(MAX));
    </text>
  </install-command>

  <!-- commands to uninstall database -->
  <uninstall-command>
    <text>DROP DATABASE myDB</text>
    <connectionString> Data Source=...;Initial Catalog=myDB;User Id=user;Password=pass;</connectionString>
    <ignoreFailures>true</ignoreFailures>
  </uninstall-command>

</target>
</targets>

<rules>
<logger name="*" levels="Error" writeTo="database" />
</rules>
</nlog> 
```

问题是我的表中没有插入任何内容。例如，当我将记录器放入索引页面上的 HomeController 并调用我的 logger.Error("an error") 时，它会在我的表中添加一条记录。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:16:26.483

在你的类 Aspect 中添加一个静态属性记录器

```
public class LogAspect : OnMethodBoundaryAspect
{
    /// <summary>
    /// Gets or sets the logger.
    /// </summary>
    public static ILogger logger { get; set; } 
```

使用 ILogger 类在应用程序初始化方法中设置记录器变量，并使用 AttributeExclude 在此初始化之前排除所有方法。

```
 [LogAspect(AttributeExclude = true)]
    protected void Application_Start()
    {
        _windsorContainer = new WindsorContainer();
        ApplicationDependencyInstaller.RegisterLoggingFacility(_windsorContainer);
        LogAspect.logger = _windsorContainer.Resolve<ILogger>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T01:50:49.650

您是否使用您创建的 LogMethodAttribute 装饰您的控制器方法？

此外，您需要调整您的记录器规则，以包括“错误”之外的更多级别，否则您将记录的就是这些。

试试这个：

```
<rules>
<logger name="*" minLevel="Trace" writeTo="database" />
</rules> 
```

编辑：

您是否尝试过将记录器初始化移动到您的方法中？

```
public override void OnEntry(MethodExecutionArgs args)
{
     this.logger = LogManager.GetCurrentClassLogger();
     logger.Debug(string.Format("Entering {0}.{1}.", args.Method.DeclaringType.Name, args.Method.Name));
} 
```

根据 Donald Belcham 的 Pluralsight 课程，方面构造函数不会在运行时执行，因此您的记录器可能没有正确设置。

# git - 从 Bare Repo 克隆/拉取

> ID：14399182
> 
> 赞同：0
> 
> 时间：2013-01-18T12:39:13.223
> 
> 标签：git

我在我的 Ubuntu 服务器中设置了一个裸 GIT 存储库。

几天来，我已经对裸仓库进行了几次提交。

当我 cd 到裸仓库并执行 git log 时，我得到了几个提交的 SHA 代码以及提交消息。

如何使用 SHA 代码从裸仓库中克隆/拉取提交，以便我可以获取在该提交期间提交的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:43:07.280

您可以像往常一样克隆 repo `git clone`，然后，因为您在本地计算机中拥有整个 repo，所以使用 回滚到您想要的提交`git checkout HASH`。

# maven - 关于移动应用程序的 UML 建模客户端/服务器系统

> ID：14399183
> 
> 赞同：1
> 
> 时间：2013-01-18T12:39:25.467
> 
> 标签：maven, mobile, client-server, uml, argouml

我需要一些关于如何使用 UML 为客户端/服务器系统开发模型的建议。简而言之，该系统由一个在手机上运行的移动客户端组成。与大多数移动应用程序一样，移动应用程序连接到服务器以执行一些处理、记录备份以及连接到第三方应用程序。

我需要建议的是，设想整个系统，移动应用程序中的几乎所有类都复制到服务器应用程序中，少数类除外。同样在服务器应用程序中，它包含移动应用程序中的大多数相同类，除了一些其他类和一些额外功能。

举个例子，Mobile 应用程序有一个 User 类，它由参与者的个人详细信息和登录详细信息组成。同样，服务器应用程序有一个用户类，其成员与移动应用程序用户类中存在的成员相同，只是它具有一些移动应用程序中没有的功能/方法。

服务器应用程序还有一个连接到第三方应用程序以执行其计费功能/方法的类。这个类显然也在移动应用程序中复制，但是没有移动应用程序计费类具有连接到第三方的功能/方法。

好的，对于手头的问题，我觉得如果我要遵循 UML 建模的原则，我不应该复制这些类，而是应该在建模中使用 Reuse。当我使用包将移动应用程序与服务器应用程序分开时，我想这将涉及：

1.  在移动和服务器应用程序中拥有做同样事情的基本类（方法和成员）
2.  对于在任何移动或服务器应用程序中具有额外成员和功能的类，我应该使用继承依赖项来构建额外的类来处理它们。
3.  使用 << includes >> 依赖项将 #2 生成的类添加到 Mobile 和 Server 包中，或者使用 << includes >> 依赖项将 #1 生成的类添加到 mobile 和 Server 包中（视情况而定）。

请问我对如何实现建模的思路是正确的，因为我觉得复制相同的类会违背 UML 建模的理想。然而，它们是移动应用程序和服务器应用程序之间的分离，这一事实让我想沿着完全独立地为移动应用程序建模，然后为服务器应用程序单独建模。

再次，请是我的思路正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:58:00.657

在我看来，您只有一个带有三个包的模型：

*   包含在移动和服务器应用程序中使用的类的 commonComponents 包
*   包含移动应用程序中使用的类的移动包
*   包含服务器应用程序中使用的类的服务器包

移动和服务器包导入（<> 关系）commonComponents 包中包含的元素。例如，User commonComponents:User 类被导入到 server 包中，并由 serve:User 类扩展。请注意，由于包是名称空间，因此您可以拥有具有相同名称的类。

我希望这可以帮助你

[http://lowcoupling.com/post/47802411601/uml-diagrams-and-models-with-papyrus](http://lowcoupling.com/post/47802411601/uml-diagrams-and-models-with-papyrus)

# c# - 给我一个这种方法的例子？

> ID：14399189
> 
> 赞同：-1
> 
> 时间：2013-01-18T12:39:41.950
> 
> 标签：c#

请给我看一个简单的代码，其中类名作为方法中的返回类型？项目中的一些编码作为类名作为方法的返回类型？我不明白这是什么意思？

谁能给我一个关于那个的简要解释和简单的例子？

例如

```
public Dataset getEmployees()
{
-----
----
------
} 
```

在上面的代码中，我们使用 ( `Dataset`)（它基本上是一个类），但这里我们使用方法的返回类型`getEmployees`。

我想要和例子一样。而不是`Dataset`，用户定义的类应该作为返回类型。我希望你明白我的疑问是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:46:37.507

考虑一个用户定义的类：

```
public class Manipulator{
    class UserDefined{
      private int data;
      public int getData(){ return data;}
      public void setData(int d) {data = d;}
      public UserDefined(){ d = 0; }
    }

    public UserDefined returnUserDefined()
    {
       return new UserDefined();
    }

    public void doSomethingWithIt(UserDefined d)
    {
       d.setData(500);
    }

    public int getDataWithingUserDefined(UserDefined d)
    {
       return d.getData();
    }
} 
```

从以上方法可以看出，如何返回/使用`UserDefined`类型（或类）的对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:44:34.360

这会吗？

```
public class ExampleItem
{
    public string MyString;
    public ExampleItem(string stringToUse)
    {
       this.MyString = stringToUse;
    }

    public ExampleItem MakeExampleItem(string str)
    {
       return new ExampleItem(str);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T12:45:02.207

由于“getEmployees”暗示了不止一个结果，听起来你只是想要：

```
public List<Employee> GetEmployees() { ... } 
```

? 还是我理解了这个问题？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T12:50:32.420

我假设您想返回 a `List<Employee>`or `IEnumerable<Employee>`：

```
public class Employee
{
    public int EmpID { get; set; }
    public string Name { get; set; }
} 
```

和一个返回它的方法（假设 SQL-Server 作为 rdbms 用于演示目的）：

```
public static IEnumerable<Employee> getAllEmployees()
{
    string sql = "SELECT EmpID, Name FROM Employee ORDER BY Name";
    using (var con = new SqlConnection(Settings.Default.ConnectionString))
    {
        using (var cmd = new SqlCommand(sql, con))
        {
            con.Open();
            using (SqlDataReader dr = cmd.ExecuteReader())
            {
                var list = new List<Employee>();
                while (dr.Read())
                {
                    var emp = new Employee();
                    emp.EmpID = dr.GetInt32(0);
                    emp.Name = dr.GetString(1);
                    list.Add(emp);
                }
                return list;
            }
        }
    }
} 
```

# liferay - 如何获取提交表单的用户的 UserId

> ID：14399193
> 
> 赞同：0
> 
> 时间：2013-01-18T12:40:11.520
> 
> 标签：liferay, liferay-6

我正在使用 Liferay 6.1.1。

我创建了一个`<aui:form>`带有两个文本字段和一个按钮的 portlet。

在提交时，我想知道提交以下表单的用户 ID：

```
<aui:form action="<%=myUrl%>" method="post">
    <aui:input type="text" name="name"></aui:input>
    <aui:input type="text" name="addr"></aui:input>

    <aui:button type="submit" value="save"></aui:button>
</aui:form> 
```

如何获取用户 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:22:19.227

我希望用户在您向他们展示此表单之前登录到您的门户。

如果是，那么您可以查看[这个问题](https://stackoverflow.com/q/970986/1734150)的答案，其中显示了特定于 JSR-286 的方式和特定于 Liferay 的方式来获取`UserId`.

如果您显示此表单并让来宾用户（即任何匿名人员）提交此表单，那么显然您无法获得`UserId`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:42:36.250

您可以使用 PortalUtil。在控制器方面：

```
User user = PortalUtil.getUser(actionRequest) 
```

在你的jsp中：

```
User user = PortalUtil.getUser(renderRequest); 
```

不要忘记处理异常，或者用户不为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-04T13:07:29.657

在你的 java 代码中输入：

```
String userId=ParamUtil.getString(portletRequest, param); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-08T11:43:36.823

在您使用 java 代码时，

从请求中获取**ThemeDisplay (** *actionRequest* ) 并从 **themeDisplay.getUserId()中获取用户 ID**

# java - 如何在 Java 中添加环境变量？

> ID：14399194
> 
> 赞同：11
> 
> 时间：2013-01-18T12:40:12.637
> 
> 标签：java

> **可能重复：**
> [如何从 Java 设置环境变量？](https://stackoverflow.com/questions/318239/how-do-i-set-environment-variables-from-java)

我正在研究Java。我必须在 java 代码编程中添加一个环境变量，这样当我使用进程构建器获取列表时它就可用，如下所示：

```
import java.util.Map;
import java.util.Set;

class helloworld  {
    public static void main(String[] args) {

        ProcessBuilder pb = new ProcessBuilder("export MY_ENV_VAR=1");

        Map<String, String> envMap = pb.environment();

        Set<String> keys = envMap.keySet();
        for(String key:keys){
            System.out.println(key+" ==> "+envMap.get(key));
        }

    }
} 
```

但是通过上述试验，我无法正确获取环境变量。那么如何设置环境变量呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T12:43:08.497

```
 Map<String, String> env = pb.environment();
 env.put("MV_ENV_VAR", "1"); 
```

将设置 MY_ENV_VAR=1。在您通过以下方式调用流程之前

```
Process p = pb.start(); 
```

`export`只会被shell解释。

另请参见[ProcessBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)

一个完整的例子：

```
public static void main(String[] args) throws IOException {

    ProcessBuilder pb = new ProcessBuilder("CMD", "/C", "SET");
    Map<String, String> env = pb.environment();
    env.put("MYVAR", "myValue");
    Process p = pb.start();
    InputStreamReader isr = new InputStreamReader(p.getInputStream());
    char[] buf = new char[1024];
    while (!isr.ready()) {
        ;
    }
    while (isr.read(buf) != -1) {
        System.out.println(buf);
    }
} 
```

在其他环境值中打印：

```
MYVAR=myValue 
```

这应该证明创建的进程使用了​​被操纵的环境。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T12:45:31.953

您可以将所需的变量直接添加到`ProcessBuilder.environment()`地图中。下面的代码应该可以工作：

```
import java.util.Map;
import java.util.Set;

class helloworld  {
public static void main(String[] args) {

    ProcessBuilder pb = new ProcessBuilder("/bin/sh"); // or any other program you want to run

    Map<String, String> envMap = pb.environment();

    envMap.put("MY_ENV_VAR", "1");
    Set<String> keys = envMap.keySet();
    for(String key:keys){
        System.out.println(key+" ==> "+envMap.get(key));
    }

} 
```

}

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T12:45:27.847

您可以使用流程 Builder 对象获取环境变量：

```
 ProcessBuilder pb = new ProcessBuilder("myCommand", "myArg1", "myArg2");
    Map<String, String> env = pb.environment();
    env.put("VAR1", "myValue");
    env.remove("OTHERVAR");
    env.put("VAR2", env.get("VAR1") + "suffix"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T12:50:02.573

从 [how-do-i-set-environment-variables-from-java](https://stackoverflow.com/questions/318239/how-do-i-set-environment-variables-from-java)

减轻负担的一种可能方法是分解出一种方法

```
void setUpEnvironment(ProcessBuilder builder) {
    Map<String, String> env = builder.environment();
    // blah blah
} 
```

并`ProcessBuilders`在启动它们之前通过它。

此外，您可能已经知道这一点，但您可以使用相同的`ProcessBuilder`. 因此，如果您的子流程相同，则无需一遍又一遍地进行此设置。

# c# - 使用初始化程序遍历枚举会产生意想不到的结果

> ID：14399195
> 
> 赞同：2
> 
> 时间：2013-01-18T12:40:14.013
> 
> 标签：c#, enums, literals

我创建的枚举如下所示：

```
enum MonthOfTheYear : byte
{
    January,
    February,
    March,
    April,
    May,
    June,
    July = 0,
    August,
    September,
    October,
    November,
    December
} 
```

如您所见，July 的初始值设定项为 0。这有一些有趣的（副作用）：似乎存在整数值的“配对”。二月和八月现在的值为 1，三月和九月的值为 2，依此类推：

```
MonthOfTheYear theMonth = MonthOfTheYear.February;
Console.WriteLine(theMonth + " has integer value of " + (int)theMonth); 
```

和

```
MonthOfTheYear theMonth = MonthOfTheYear.August;
Console.WriteLine(theMonth + " has integer value of " + (int)theMonth); 
```

清楚地表明这一点。到目前为止，我觉得很奇怪，我愿意一起去。 **编辑：**我知道分配 7 月 0 日会使索引重新开始。我不明白为什么它们可以在同一个枚举中共存。

但！如果我然后循环遍历枚举并输出所有底层整数值，就会发生奇怪的事情。

```
MonthOfTheYear theMonth = MonthOfTheYear.January;

for (int i = 0; i < 12; i++)
{
    Console.WriteLine(theMonth + " has integer value of " + (int)theMonth++);
} 
```

输出

```
July has integer value of 0
February has integer value of 1
September has integer value of 2
April has integer value of 3
May has integer value of 4
June has integer value of 5
6 has integer value of 6
7 has integer value of 7
8 has integer value of 8
9 has integer value of 9
10 has integer value of 10
11 has integer value of 11 
```

我希望有人可以向我解释幕后发生的事情，因为整数值是连续的，所以我认为这是*按预期*输出的，但我还没有看到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T12:47:46.923

首先，当您在枚举的定义中指定一个值时，后续值将从那里连续编号 - 即使您指定`0`某处，第一个值也会从`0`. 因此，您的基本`byte`价值观是：

```
enum MonthOfTheYear : byte
{
    January = 0, // not specified, so starts at 0
    February = 1,
    March = 2,
    April = 3,
    May = 4,
    June = 5,
    July = 0, // specified, so starts numbering from 0 again
    August = 1,
    September = 2,
    October = 3,
    November = 4,
    December = 5
} 
```

当您使用 增加枚举值时`++`，它只会增加底层`byte`- 它*不会*查看 the 的定义`enum`并转到下一行的元素！

如果`byte`它没有对应的已定义条目，那并不意味着它根本无效 - 只是，当您将枚举值转换为字符串时，您会得到`byte`字符串形式的值。

如果`byte`有*几个*相应的已定义条目...实际上，我不确定将其转换为字符串的确切条目会给您，但显然不一定是第一个。

基本上`MonthOfTheYear.February == MonthOfTheYear.August`，无论您是调用`ToString`它还是只是在调试器中查看它，都不能保证一个不会被另一个切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:46:26.253

使用方法

```
Enum.GetName 
```

这是一个例子：

```
using System;

public class GetNameTest {
    enum Colors { Red, Green, Blue, Yellow };
    enum Styles { Plaid, Striped, Tartan, Corduroy };

    public static void Main() {

        Console.WriteLine("The 4th value of the Colors Enum is {0}", Enum.GetName(typeof(Colors), 3));
        Console.WriteLine("The 4th value of the Styles Enum is {0}", Enum.GetName(typeof(Styles), 3));
    }
}
// The example displays the following output:
//       The 4th value of the Colors Enum is Yellow
// 
```

你在这里得到一个完整的解释：

[http://msdn.microsoft.com/de-de/library/system.enum.getname.aspx](http://msdn.microsoft.com/de-de/library/system.enum.getname.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T12:59:01.413

[http://msdn.microsoft.com/en-us/library/system.enum.getname.aspx](http://msdn.microsoft.com/en-us/library/system.enum.getname.aspx)

> 如果多个枚举成员具有相同的基础值，则 GetName 方法保证它将返回这些枚举成员之一的名称。但是，它不保证它总是返回同一个枚举成员的名称。因此，当多个枚举成员具有相同的值时，您的应用程序代码不应依赖于返回特定成员名称的方法。

因此，总而言之，当您有多个具有相同值的成员时，您为特定值获得的名称是*具有该值的任何成员*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T12:52:33.767

您明确将 7 月设置为枚举中的第一个月。这把事情搞砸了。试试这个：

```
enum MonthOfTheYear : byte {
        January,
        February,
        March,
        April,
        May,
        June,
        July,
        August,
        September,
        October,
        November,
        December
    }

for (int i = 0; i < 12; i++) {
    Console.WriteLine(String.Format("{0} has integer value of {1}", Enum.GetName(typeof(MonthOfTheYear), i), i));
} 
```

因为您将 july 设置为零，所以它会从该点重置索引器。如果您希望这种奇怪的顺序到位，请考虑重新排列您的枚举中的顺序。

# ios - AFNetworking 使用 enqueueBatchOfHTTPRequestOperations 重试失败的操作

> ID：14399196
> 
> 赞同：2
> 
> 时间：2013-01-18T12:40:15.657
> 
> 标签：ios, afnetworking

我正在尝试使用异步操作请求，但在某些时候操作请求由于请求超时而失败。我如何形成我的块，以便在所有操作完成失败或完成但没有超时时重新发送超时操作并执行一些操作。

我真的需要弄清楚这一点，非常感谢！

```
[[SDAFParseAPIClient sharedClient] enqueueBatchOfHTTPRequestOperations:pagedOperations progressBlock:^(NSUInteger numberOfCompletedOperations, NSUInteger totalNumberOfOperations) {
                    NSLog(@"PAGED totalNumberOfOperations: %u  numberOfCompletedOperations: %u",totalNumberOfOperations,numberOfCompletedOperations);
                } completionBlock:^(NSArray *operations) {

                    NSMutableArray *retryops = [NSMutableArray array];

                    for(AFHTTPRequestOperation *operation in operations){
                        if(operation.error.code == -1001){
                            NSLog(@"error code %d",operation.error.code);

                            [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
                                NSLog(@"comp");
//actually original completion block is needed
                            } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                                NSLog(@"fail");
  //actually original fail block is needed
                            }];
                            [retryops addObject:operation];
                            //Do something with the response
                        }else{
                            //Handle the failure
                        }
                    }

                    if ([retryops count] == 0) {
                        NSLog(@"all paginated operations completed");
                    }
                    else {
                        [[SDAFParseAPIClient sharedClient] enqueueBatchOfHTTPRequestOperations:retryops progressBlock:
                         ^(NSUInteger numberOfFinishedOperations, NSUInteger totalNumberOfOperations) {

                         } completionBlock:
                         ^(NSArray *operations) {
                             NSLog(@"all retry paginated operations completed");
                         }];
                    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:49:04.677

我有同样的问题。我一直试图从 FTP 站点下载 200 多个文件，并且在下载第 100 个文件后，传递给 enqueueBatchOfHTTPRequestOperations 的 NSURLRequests 会一直超时。我最终完全放弃了 AFNetworking，因为它不需要并且使解决方案复杂化。这部分是其他几个 SO 答案的混合。

```
NSArray *requestsArray = // my array of [[NSMutableURLRequest alloc] initWithURL:url]'s
dispatch_queue_t downloadQueue = dispatch_queue_create("downloadQueue", NULL);
dispatch_async(downloadQueue, ^{
    NSURLResponse *response;
    NSError *requestError;
    for (NSURLRequest *request in requestsArray) {
        response = nil;
        requestError = nil;
        NSData *requestData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&requestError];
        if (response == nil) {
            // Check for problems
            if (requestError != nil) {

            }
        }
        else {
            // Data was received.. continue processing
            // Make sure to do any GUI related updates in main queue/thread,
            // not directly from here
        }
    }
}); 
```

这使用了一个串行调度队列，因此每个同步 NSURLRequest 一次执行一个。当每个请求完成时，我会处理其中的数据，而不是等待所有请求完成。因为这不在主队列上，所以它不会阻塞 GUI。

# sql - 不同行中两个日期之间的 SQL 持续时间

> ID：14399197
> 
> 赞同：3
> 
> 时间：2013-01-18T12:40:16.730
> 
> 标签：sql, tsql, sql-server-2000

如果有人可以帮助我构建一个 MSSQL Server 2000 查询，该查询将返回客户的 A 条目和他们的 B 条目之间的持续时间，我将非常感谢一些帮助。

并非所有客户都有 B 记录，因此不会返回任何结果。

*客户审核*

```
+---+---------------+---+----------+
| 1 | 彼得格里芬 | 一个 | 2013-01-01 15:00:00 |
| 2 | 马丁比格斯 | 一个 | 2013-01-02 15:00:00 |
| 3 | 彼得格里芬 | C | 2013-01-05 09:00:00 |
| 4 | 超级马里奥 | 一个 | 2013-01-01 15:00:00 |
| 5 | 马丁比格斯 | 乙| 2013-01-03 18:00:00 |
+---+---------------+---+----------+

```

我希望结果类似于：

```
+--------------+----------------+
| 马丁比格斯 | 1 天 3 小时 |
+--------------+----------------+

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T12:44:06.207

像下面这样的东西（不知道你的模式，所以你需要更改对象的名称）就足够了。

```
SELECT ABS(DATEDIFF(HOUR, CA.TheDate, CB.TheDate)) AS HoursBetween
FROM dbo.Customers CA
INNER JOIN dbo.Customers CB
ON CB.Name = CA.Name
AND CB.Code = 'B'
WHERE CA.Code = 'A' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:47:28.457

```
SELECT A.CUSTOMER, DATEDIFF(HOUR, A.ENTRY_DATE, B.ENTRY_DATE) DURATION
FROM CUSTOMERSAUDIT A, CUSTOMERSAUDIT B
WHERE B.CUSTOMER = A.CUSTOMER AND B.ENTRY_DATE > A.ENTRY_DATE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T14:27:21.160

这是 Oracle 查询，但据我所知，MS Server 中的所有功能都可用。我确信我不必告诉您如何连接输出以获得所需的结果。输出中的所有值都将位于单独的列中 - 天、小时等......而且在这里格式化输出并不总是那么容易：

```
SELECT id, name, grade
     , NVL(EXTRACT(DAY    FROM day_time_diff), 0) days
     , NVL(EXTRACT(HOUR   FROM day_time_diff), 0) hours
     , NVL(EXTRACT(MINUTE FROM day_time_diff), 0) minutes
     , NVL(EXTRACT(SECOND FROM day_time_diff), 0) seconds
  FROM
  (
   SELECT id, name, grade
       , (begin_date-end_date) day_time_diff
     FROM
     (
      SELECT id, name, grade
           , CAST(start_date AS TIMESTAMP)  begin_date
           , CAST(end_date AS TIMESTAMP)    end_date
        FROM
         (
          SELECT id, name, grade, start_date
               , LAG(start_date, 1, to_date(null)) OVER (ORDER BY id)  end_date 
            FROM stack_test
         )
     )
   )
   /

Output:

ID  NAME           GRADE    DAYS    HOURS   MINUTES SECONDS
------------------------------------------------------------
 1  Peter Griffin   A       0        0      0       0
 2  Martin Biggs    A       1        1      0       0
 3  Peter Griffin   C       2        17     0       0
 4  Super Mario     A      -3       -18     0       0
 5  Martin Biggs    A       2        3      0       0 
```

我使用的表结构/列 - 如果您提前处理好这个和数据，那就太好了：

```
CREATE TABLE stack_test
 (
  id        NUMBER
 ,name      VARCHAR2(50) 
 ,grade     VARCHAR2(3)
 ,start_date DATE
)
/ 
```

# asp.net - 设计 ASP.net 应用程序的界面哪个更好：拖放还是手动定位？

> ID：14399198
> 
> 赞同：1
> 
> 时间：2013-01-18T12:40:26.860
> 
> 标签：asp.net, visual-studio-2010, vb.net-2010

设计 ASP.net 应用程序的界面哪个更好：拖放还是手动定位？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:43:37.380

这定义了您如何定义“更好”。

* * *

“更好”的意思是即使是不熟练的开发人员也可以立即启动并运行网络表单：**使用拖放**。

* * *

“更好”的意思是它让熟练的开发人员对生成的 HTML 和 CSS 有更多的控制权，可能会导致

*   更强大的布局，与各种浏览器兼容，以及
*   由于缺少不必要的标签和属性，更易于维护：

**使用手动定位**和大量关于 HTML 和 CSS 的知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:15:49.213

**你可以使用它们**——任何东西来制作你想要的设计。

拖放，手动位置，调整更改，css 写入/更改/删除/重写，复制/粘贴，打开关闭十个程序，在谷歌上搜索其他 css，任何可以在纸上制作的东西 - 然后就不好了然后你重新开始。任何可以让你使用的东西。

# openerp - 如何在 Openerp 7.0 中根据供应商的交货订单创建草稿发票？

> ID：14399200
> 
> 赞同：0
> 
> 时间：2013-01-18T12:40:30.790
> 
> 标签：openerp

我已经创建了一个收货，并且我已经收到了这些物品。我记得在 Openerp 6.1 中，可以根据供应商收到的交货轻松创建草稿发票。在 7.0，当我转到“更多->创建草稿发票”时，即使我已将选项设置为 ![截屏](../Images/88aba4fedc139e0b6ccfd1b05acf4ce6.png)

它仍然给我这个错误“警告！这个领料单不需要发票。”

所以我必须通过再次重新输入每个项目来手动创建发票。

希望有人可以提供帮助，

非常欣赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:43:03.247

I found a way but I'm not sure whether it is the correct way or not.

I enabled "Developer Mode", then I go to "Incoming Shipment->Create" to open new form. then at the top, there is a droplist "Debug View#552->Edit FormView" and found there is a line...

`<field name="invoice_state" string="Invoice Control" groups="account.group_account_invoice" attrs="{'invisible':[('invoice_state', '=', 'none')]}"/>`

so I remove the `attrs="{'invisible':[('invoice_state', '=', 'none')]}"` and save, then the Invoice Control show up with few option such as Invoiced, To be invoice, Not applicable. I believe this can help to create the draft invoice but it looks like a hack to me.

any thought?

Thanks.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:31:26.747

这已被报告（并已修复）。

[https://bugs.launchpad.net/openobject-addons/+bug/1115933](https://bugs.launchpad.net/openobject-addons/+bug/1115933)上的详细信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T13:13:08.700

我刚刚使用 runbot.openerp.com 进行了一些测试，但它没有按预期工作，这不是配置问题，当前 7.0 版本存在错误，您应该在启动板上报告它。

# ios - root.plist 显示信息的动态变化

> ID：14399202
> 
> 赞同：0
> 
> 时间：2013-01-18T12:40:34.083
> 
> 标签：ios, objective-c, xcode, nsuserdefaults, root.plist

怎么可能在 settings.app 中显示信息段落？我会使用 root.plist 和 NSUserDefaults 组页脚。但是如何将这两者链接在一起，以便可以从应用程序动态修改信息？

我想显示如下信息：@“您的秘密用户代码是：%d”，userCode。并在每次用户购买某些东西时更改用户代码。

# r - 在 R 中实例化条件语句

> ID：14399204
> 
> 赞同：0
> 
> 时间：2013-01-18T12:40:35.230
> 
> 标签：r, if-statement, dataframe, pseudocode

我有一个看起来像这样的数据框：

```
> head(Data1A)
        Prime Target CorrectAnswer Accuracy   RT   Block TrialType
1     bezaaid barkme    PseudoWord        1 3450 Block 1        NA
2       hazen lemmet          Word        1 1108 Block 1        NA
3  bergtoppen slavin          Word        1 1160 Block 1        NA
4       wekte gareel          Word        1 1250 Block 1        NA
5      zessen studio          Word        1  557 Block 1        NA
6 nauwkeurige hotens    PseudoWord        1  882 Block 1        NA 
```

如您所见，该列`TrialType`必须被填充，我需要一个条件语句来完成它。我知道我想要什么，并且尽我所能用伪代码写下来，但我距离能够以正确的语法实现这一点还有很长的路要走。任何帮助深表感谢。

伪代码：

`Data1A$TrialType`如果Data1A $Block 中的对应单元格`Data1A$Block`等于“Block 4”或“Block 5”并且对应的单元格`Block 2`in等于如果 in 对应的单元格等于或，则对应的单元格 in将等于else 如果对应的单元格 in等于or并且对应的行等于OR，如果对应的单元格 in等于 or 并且对应的单元格等于`Block 3``Data1A$CorrectAnswer``Word``Data1A$CorrectAnswer``PseudoWord``TrialType``Regular``Data1A$Block``Block 1``Block 6``Data1A$Block``Block 2``Block3``Data1A$CorrectAnswer``pseudoWord``Data1A$Block``Block 4``Block 5``Data1A$CorrectAnswer``Word`那么对应的单元格`Data1A$TrialType`等于`Random`

我希望这是可以理解的。如果有人怀疑我对伪代码的意图，我将进行检查。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:34:00.033

我真的很想在这里简化你的逻辑。

但这应该有效。

我生成一些数据

```
dat <- read.table(text =        "Prime Target CorrectAnswer Accuracy   RT   Block TrialType
                  1     bezaaid barkme    PseudoWord        1 3450 'Block 4'        NA
                  2       hazen lemmet          Word        1 1108 'Block 5'        NA
                  3  bergtoppen slavin          Word        1 1160 'Block 4'        NA
                  1     bezaaid barkme    PseudoWord        1 3450 'Block 5'        NA
                  2       hazen lemmet          Word        1 1108 'Block 2'        NA
                  3  bergtoppen slavin          Word        1 1160 'Block 3'        NA
                  1     bezaaid barkme    PseudoWord        1 3450 'Block 2'        NA
                  2       hazen lemmet          Word        1 1108 'Block 3'        NA
                  3  bergtoppen slavin          Word        1 1160 'Block 1'        NA
                  4       wekte gareel          Word        1 1250 'Block 6'        NA
                  5      zessen studio          Word        1  557 'Block 1'        NA
                  6 nauwkeurige hotens    PseudoWord        1  882 'Block 3'        NA",header = T,row.names = NULL) 
```

然后我实现你的逻辑：

```
transform(dat,
          TrialType= ifelse(Block %in% c('Block 4','Block 5'),
                            ifelse(CorrectAnswer =="Word" ,"Random","Regular"),
                            ifelse(Block  %in% c('Block 2','Block 3'),
                                   ifelse(CorrectAnswer =="Word" ,"Regular","Random"),
                                   'Random'))) 
```

这里的结果

```
 row.names       Prime Target CorrectAnswer Accuracy   RT   Block TrialType
1          1     bezaaid barkme    PseudoWord        1 3450 Block 4   Regular
2          2       hazen lemmet          Word        1 1108 Block 5    Random
3          3  bergtoppen slavin          Word        1 1160 Block 4    Random
4          1     bezaaid barkme    PseudoWord        1 3450 Block 5   Regular
5          2       hazen lemmet          Word        1 1108 Block 2   Regular
6          3  bergtoppen slavin          Word        1 1160 Block 3   Regular
7          1     bezaaid barkme    PseudoWord        1 3450 Block 2    Random
8          2       hazen lemmet          Word        1 1108 Block 3   Regular
9          3  bergtoppen slavin          Word        1 1160 Block 1    Random
10         4       wekte gareel          Word        1 1250 Block 6    Random
11         5      zessen studio          Word        1  557 Block 1    Random
12         6 nauwkeurige hotens    PseudoWord        1  882 Block 3    Random 
```

# r - 在R中，如何使函数内的变量可用于该函数内的较低级别函数？（with，attach，environment）

> ID：14399205
> 
> 赞同：31
> 
> 时间：2013-01-18T12:40:37.960
> 
> 标签：r, function, environment-variables, with-statement, assign

**更新 2** @G。Grothendieck 发布了两种方法。第二个是改变函数内部的函数环境。这解决了我编码重复过多的问题。我不确定这是否是在将我的脚本放入包时通过 CRAN 检查的好方法。当我有一些结论时，我会再次更新。

**更新**

我试图将很多输入参数变量传递给`f2`并且不想将函数内的每个变量索引为`env$c, env$d, env$calls`，这就是我尝试使用`with`in`f5`和`f6`（修改后的`f2`）的原因。但是，`assign`不能在`with`内部使用`{}`，移到`assign`外部`with`可以完成这项工作，但在我的实际情况下，我`assign`在表达式中有一些 s `with`，我不知道如何`with`轻松地将它们移出函数。

这是一个例子：

```
## In the <environment: R_GlobalEnv>
a <- 1
b <- 2
f1 <- function(){
    c <- 3
d <- 4
f2 <- function(P){
    assign("calls", calls+1, inherits=TRUE)
    print(calls)
    return(P+c+d)
 }
calls <- 0
v <- vector()
for(i in 1:10){
    v[i] <- f2(P=0)
    c <- c+1
    d <- d+1
  }
 return(v)
}
f1() 
```

函数`f2`在里面`f1`，当被调用时，它会在环境中`f2`寻找变量。这就是我想要的。`calls,c,d``environment(f1)`

但是，当我还想`f2`在其他函数中使用时，我将在 Global 环境中定义这个函数，调用它`f4`。

```
f4 <- function(P){
  assign("calls", calls+1, inherits=TRUE)
  print(calls)
  return(P+c+d)
} 
```

这不起作用，因为它将`calls,c,d`在全局环境中而不是在调用函数的函数内部查找。例如：

```
f3 <- function(){
  c <- 3
  d <- 4
  calls <- 0
  v <- vector()
  for(i in 1:10){
    v[i] <- f4(P=0) ## or replace here with f5(P=0)
    c <- c+1
    d <- d+1
  }
  return(v)
}
f3() 
```

安全的方式应该`calls,c,d`在 的输入参数中定义`f4`，然后将这些参数传递给`f4`. 但是，在我的例子中，有太多的变量要传递给这个函数`f4`，我可以将它作为环境传递并告诉`f4`不要查看全局环境（`environment(f4)`），只查看调用`environment`时`f3`的内部。

我现在解决的方法是把环境当成列表，使用`with`函数。

```
f5 <- function(P,liste){
  with(liste,{
     assign("calls", calls+1, inherits=TRUE)
     print(calls)
     return(P+c+d)
     }
  )
}
f3 <- function(){
  c <- 3
  d <- 4
  calls <- 0
  v <- vector()
  for(i in 1:10){
    v[i] <- f5(P=0,as.list(environment())) ## or replace here with f5(P=0)
    c <- c+1
    d <- d+1
  }
  return(v)
}
f3() 
```

但是，由于不会修改原始对象，`assign("calls", calls+1, inherits=TRUE)`因此 now 无法正常工作。`assign`该变量`calls`与目标函数为 的优化函数相关联`f5`。这就是我使用而不是作为输入参数`assign`传递的原因。我也不清楚`calls`使用。`attach`这是我纠正`assign`问题的方法：

```
f7 <- function(P,calls,liste){
  ##calls <<- calls+1
  ##browser()
  assign("calls", calls+1, inherits=TRUE,envir = sys.frame(-1))
  print(calls)
  with(liste,{
    print(paste('with the listed envrionment, calls=',calls))
    return(P+c+d)
  }
  )
}
########
##################
f8 <- function(){
  c <- 3
  d <- 4
  calls <- 0
  v <- vector()
  for(i in 1:10){
    ##browser()
    ##v[i] <- f4(P=0) ## or replace here with f5(P=0)
    v[i] <- f7(P=0,calls,liste=as.list(environment()))
    c <- c+1
    d <- d+1
  }
  f7(P=0,calls,liste=as.list(environment()))
  print(paste('final call number',calls))
  return(v)
}
f8() 
```

我不知道这应该如何在 R 中完成。我的方向是否正确，尤其是在通过 CRAN 检查时？有人对此有一些提示吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-18T14:37:30.607

**(1) 通过调用者的环境。**您可以显式地将父环境和索引传递给它。尝试这个：

```
f2a <- function(P, env = parent.frame()) {
    env$calls <- env$calls + 1
    print(env$calls)
    return(P + env$c + env$d)
}

a <- 1
b <- 2
# same as f1 except f2 removed and call to f2 replaced with call to f2a
f1a <- function(){
    c <- 3
    d <- 4
    calls <- 0
    v <- vector()
    for(i in 1:10){
        v[i] <- f2a(P=0)
        c <- c+1
        d <- d+1
      }
     return(v)
}
f1a() 
```

**(2) 重置被调用函数的环境**我们可以重置in的环境，`f2b`如下`f1b`所示：

```
f2b <- function(P) {
    calls <<- calls + 1
    print(calls)
    return(P + c + d)
}

a <- 1
b <- 2
# same as f1 except f2 removed, call to f2 replaced with call to f2b
#  and line marked ## at the beginning is new
f1b <- function(){
    environment(f2b) <- environment() ##
    c <- 3
    d <- 4
    calls <- 0
    v <- vector()
    for(i in 1:10){
        v[i] <- f2b(P=0)
        c <- c+1
        d <- d+1
      }
     return(v)
}
f1b() 
```

**(3) 使用 eval.parent(substitute(...))** 的宏 另一种方法是定义一个类似宏的构造，该构造有效地将`f2c`inline 的主体注入`f1c1`. 除了`f2c`线（不需要）和`f2b`将整个身体包裹在. 除了调用被替换为对 的调用之外，其他相同。 `calls <- calls + 1``<<-``eval.parent(substitute({...}))``f1c``f1a``f2a``f2c`

```
f2c <- function(P) eval.parent(substitute({
    calls <- calls + 1
    print(calls)
    return(P + c + d)
}))

a <- 1
b <- 2
f1c <- function(){
    c <- 3
    d <- 4
    calls <- 0
    v <- vector()
    for(i in 1:10){
        v[i] <- f2c(P=0)
        c <- c+1
        d <- d+1
      }
     return(v)
}
f1c() 
```

**(4) defmacro** 这与最后一个解决方案几乎相同，只是它`defmacro`在 gtools 包中使用来定义宏而不是自己做。（另见另一个 defmacro 版本的 Rcmdr 包。）由于工作方式，`defmacro`我们也必须传递`calls`，但由于它是宏而不是函数，这只是告诉它替换`calls`，并且与传递`calls`给函数不同。

```
library(gtools)

f2d <- defmacro(P, calls, expr = {
    calls <- calls + 1
    print(calls)
    return(P + c + d)
})

a <- 1
b <- 2
f1d <- function(){
    c <- 3
    d <- 4
    calls <- 0
    v <- vector()
    for(i in 1:10){
        v[i] <- f2d(P=0, calls)
        c <- c+1
        d <- d+1
      }
     return(v)
}
f1d() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T13:59:20.870

一般来说，我会说函数内部需要的任何变量都应该通过它的参数传递。此外，如果以后需要它的值，您可以从函数中将其传回。不这样做会很快导致奇怪的结果，例如，如果有多个函数定义一个变量`x`，应该使用哪一个。如果变量的数量较大，您可以为其创建自定义数据结构，例如将它们放入命名列表中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-26T15:07:20.690

还可以使用一种功能来重新定义指定环境中的其他功能。

```
test_var <- "global"

get_test_var <- function(){
  return(test_var)
}

some_function <- function(){
  test_var <- "local"
  return(get_test_var()) 

}

some_function() # Returns "global". Not what we want here...

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

some_function2 <- function(){
  test_var <- "local"
  # define function locally
  get_test_var2 <- function(){
    return(test_var)
  }
  return(get_test_var2()) 
}

some_function2() # Returns "local", but 'get_test_var2' can't be used in other places.

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

add_function_to_envir <- function(my_function_name, to_envir) {
  script_text <- capture.output(eval(parse(text = my_function_name)))
  script_text[1] <- paste0(my_function_name, " <- ", script_text[1])
  eval(parse(text = script_text), envir = to_envir)
}

some_function3 <- function(){
  test_var <- "local"
  add_function_to_envir("get_test_var", environment()) 
  return(get_test_var()) 
}

some_function3() # Returns "local" and we can use 'get_test_var' from anywhere. 
```

这里`add_function_to_envir(my_function_name, to_envir)`捕获函数的脚本，在新环境中对其进行解析和重新评估。

注意：函数的名称`my_function_name`需要用引号引起来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-15T09:56:59.233

每当我使用嵌套函数并且不将变量作为参数传递，而是将它们传递给 with 时`...`，我在所有嵌套函数中使用以下函数从父环境中获取变量。

```
LoadVars <- function(variables, ...){
  for (var in 1:length(variables)) {
    v <- get(variables[var], envir = parent.frame(n=2))
    assign(variables[var], v, envir = parent.frame(n=1))
  }
} 
```

在嵌套函数中，我然后`LoadVars(c("foo", "bar"))`.

这种方法很有用，因为您只传递所需的变量，类似于通过参数传递变量。

**方法二**

但是，重写此函数以从父函数加载*所有*变量很简单，或者如果需要更高，只需将`n`in 的值`parent.frame`从其原始值增加`2`。

```
LoadVars <- function(){
  variables <- ls(envir = parent.frame(n=2))

  for (var in 1:length(variables)) {
    v <- get(variables[var], envir = parent.frame(n=2))
    assign(variables[var], v, envir = parent.frame(n=1))
  }
} 
```

* * *

**例子**

```
a <- 1

A <- function(...){
  b <- 2
  printf("A, a = %s", a)
  printf("A, b = %s", b)
  B()
}

B <- function(...){
  LoadVars()
  printf("B, a = %s", a)
  printf("B, b = %s", b)
}

A() 
```

如果您不加载变量`B`，则`B`可以加载`a`，因为它是全局环境变量，但不是`b`位于`A()`.

输出：

```
[1] "A, a = 1"
[1] "A, b = 2"
[1] "B, a = 1"
[1] "B, b = 2" 
```

# azure - 是否可以仅访问一个 blob，它依赖于另一个带有 SAS 的 blob

> ID：14399218
> 
> 赞同：0
> 
> 时间：2013-01-18T12:41:45.160
> 
> 标签：azure

我在这里将我的 html5 游戏上传到 Azure blobs 我的列表：

![容器和 Blob](../Images/0ebf77d62e8c7f19feda31f0953f51d1.png)

我将游戏容器状态更改为私有，我尝试通过将 SAS 策略添加到我的容器来访问 index.html，我查看了我的 html 文件但我看不到任何图像或 css，因为它依赖于其他文件但不能允许使用权。

我只想在我的网站上访问这个游戏，所以在我看来，当我将游戏容器状态设置为公共并且只有 index.html blob 状态为私有时（我不知道它在 Azure 存储资源管理器上是否可用），我可以访问这个游戏在我的网站上有 SAS 吗？我知道这是一个有点奇怪的问题，但我尝试以这种方式解决它，所以你知道只在我的网站上访问和打开这个游戏吗？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:14:20.357

不幸的是，您不能这样做，因为访问策略是在 blob 容器级别应用的，并且该 blob 容器中的所有 blob 都会继承该策略。一种可能的解决方案是将 css 和图像移动到公共容器中，并将您希望保持私有的 blob 仅保留在此容器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:41:15.897

谢谢你的回答 Gaurav，这对解决问题很有帮助，我试过了，但它没有解决我的问题，因为主页试图找到部署的容器目录：/ 所以我在我的 html中添加了[**“base href=..”**](http://www.w3schools.com/tags/tag_base.asp)文件，我提供了对其他容器文件的重定向。非常感谢所有的一切。

# php - cURL 的 ColdFusion 替代品

> ID：14399220
> 
> 赞同：2
> 
> 时间：2013-01-18T12:41:56.077
> 
> 标签：php, cookies, curl, coldfusion, cfhttp

我正在尝试在 ColdFusion 中重新创建一个 PHP 函数（因为我不了解 PHP），并且认为我的大部分函数都还不错，但是在处理 PHP 中的 cURL 函数时遇到了问题。

功能代码是

```
$cookie_string = $this->EASW_KEY."; ".$this->EASF_SESS ."; ".$this->PHISHKEY;
$ch = curl_init($search);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_COOKIE, $cookie_string);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
    'Content-Type: application/json',
    'x-http-method-override: GET',
    $this->XSID)
);

//Contains the JSON file returned
$EAPSEARCH = curl_exec($ch);
curl_close($ch);

unset (List of variables); 
```

我假设 CFHTTP 函数是我最好的盟友，但不确定如何处理重新编码。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T13:11:07.083

你是对的，CFHTTP 是要走的路。这是您上面转换为 CFHTTP 调用的调用版本：

```
<cfhttp url="http://some.server/path" method="POST" result="resultName>
  <cfhttpparam type="cookie" name="EASW_KEY" value="#EASW_VALUE#" />
  <cfhttpparam type="cookie" name="EASF_SESS" value="#EASF_SESS_VALUE#" />

  <cfhttpparam type="header" name="Content-Type" value="application/json" />
  <cfhttpparam type="header" name="x-http-method-override" value="GET" />

  <cfhttpparam type="body" value="#myJSONStringVariable#" />
</cfhttp>

<cfdump var="#resultName# /> 
```

cfhttp 标签记录在这里：[http ://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_g-h_09.html](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_g-h_09.html)

# ios - 自动调整 MULTILINE UILabel 的文本大小

> ID：14399222
> 
> 赞同：2
> 
> 时间：2013-01-18T12:41:57.437
> 
> 标签：ios, resize, uilabel

我想用 numberOfLines>1 自动调整 UILabel 的文本大小。UILabel 的宽度和高度必须是固定的。有没有更好的解决方案，而不是手动计算字符和设置大小？我正在使用iOS6。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T16:22:06.833

我修改了我找到的解决方案。现在可以在 UITableViewCell 中使用它：

```
- (void)resizeFontForLabel:(UILabel*)aLabel maxSize:(int)maxSize minSize:(int)minSize lblWidth: (float)lblWidth lblHeight: (float)lblHeight {
    // use font from provided label so we don't lose color, style, etc
    UIFont *font = aLabel.font;

    // start with maxSize and keep reducing until it doesn't clip
    for(int i = maxSize; i >= minSize; i--) {
        font = [font fontWithSize:i];
        CGSize constraintSize = CGSizeMake(lblWidth, MAXFLOAT);

//        NSString* string = [aLabel.text stringByAppendingString:@"..."];
        CGSize labelSize = [aLabel.text sizeWithFont:font constrainedToSize:constraintSize lineBreakMode:aLabel.lineBreakMode];

        if(labelSize.height <= lblHeight)
            break;
    }

    // Set the UILabel's font to the newly adjusted font.
    aLabel.font = font;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T05:02:59.090

下面的代码行将为您提供字符串的完整大小：

```
CGSize labelSize = [labelString sizeWithFont:label.font constrainedToSize:label.contentSize]; 
```

# python - 在 Lion-mountain (Mac OS X 10.8) 上安装 MYSQL-python 时出现 clang 错误

> ID：14399223
> 
> 赞同：1
> 
> 时间：2013-01-18T12:41:57.153
> 
> 标签：python, mysql, django, pip, mysql-python

当我尝试`mysql-python`使用以下命令安装时，

`macbook-user$ sudo pip install MYSQL-python`

我收到这些消息：

> /System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/pyconfig.h:891:1：警告：这是之前定义的位置
> 
> /usr/bin/lipo: /tmp/_mysql-LtlmLe.o 和 /tmp/_mysql-thwkfu.o 具有相同的架构（i386），不能在同一个胖输出文件中
> 
> **clang：错误：lipo 命令失败，退出代码为 1（使用 -v 查看调用）**
> 
> 错误：命令“clang”失败，退出状态为 1

有谁知道如何解决这个问题？请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:51:21.637

乍一看，它看起来像是损坏的 pip 包。您是否尝试过 easy_install 使用相同的软件包？

# xml - 使用 Linq 获取 XML 中的最后一个属性值

> ID：14399224
> 
> 赞同：1
> 
> 时间：2013-01-18T12:42:04.637
> 
> 标签：xml, linq, linq-to-xml, xml-attribute

我的 XML 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<dskh>
  <khachhang maso="kh01">
    <ten_kh>nhi</ten_kh>
    <tuoi_kh>15</tuoi_kh>
    <dchi_kh>dt</dchi_kh>
  </khachhang>

  <khachhang maso="kh02">
    <ten_kh>hung</ten_kh>
    <tuoi_kh>15</tuoi_kh>
    <dchi_kh>hcm</dchi_kh>
  </khachhang>
</dskh> 
```

我想获取**khachhang**元素的最后一个属性值。在这种情况下是**maso="kh02"**。因为我想当我插入新的**khachhang**元素时，**maso**属性会增加 auto。有人可以给我一些好的建议......非常感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:56:30.923

或者

```
var xdoc = XDocument.Load(path_to_xml);
var lastElement = xdoc.Root.Elements("khachhang").Last();
var value = lastElement.Attribute("maso").Value; 
```

请注意，我总是在访问我刚刚读取的元素或属性值之间进行空检查，以防万一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:50:27.180

```
var xdoc = XDocument.Load(path_to_xml);
var result = (string)xdoc.XPathSelectElement("//khachhang[last()]")
                         .Attribute("maso"); 
```

或者

```
var result = (string)xdoc.Descendants("khachhang").Last()
                         .Attribute("maso"); 
```

此外，如果您的 xml 中可能没有`khachhang`元素，您应该尝试获取最后一个元素。如果`khachhang`找到元素，则获取属性：

```
var lastKhachhang = xdoc.Descendants("khachhang").LastOrDefault();
if (lastKhachhang == null)
    // use default maso value
else
   maso = (string)lastKhachhang.Attribute("maso"); 
```

`LastOrDefault`在这种情况下使用很重要。否则你会得到一个例外。

# ruby-on-rails - 导轨安装

> ID：14399225
> 
> 赞同：0
> 
> 时间：2013-01-18T12:42:07.757
> 
> 标签：ruby-on-rails

我尝试在终端中使用以下命令在 OS X Lion 上安装 Rails：

```
sudo gem install rails 
```

但我收到以下错误：

```
 Building native extensions.  This could take a while...
    ERROR:  Error installing rails:
ERROR: Failed to build gem native extension.

   /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb
    mkmf.rb can't find header files for ruby at /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/ruby.h

 Gem files will remain installed in /Library/Ruby/Gems/1.8/gems/json-1.7.6 for inspection.
  Results logged to /Library/Ruby/Gems/1.8/gems/json-1.7.6/ext/json/ext/generator/gem_make.out 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:40:40.653

首先在最新的`Xcode-Version`.

然后运行`sudo gem install rails`

要安装命令行工具，请转到 XCode Preferences > Downloads。

# c# - 如果源代码可用而不是继承，为什么要使用扩展方法

> ID：14399227
> 
> 赞同：9
> 
> 时间：2013-01-18T12:42:08.657
> 
> 标签：c#, design-patterns, inheritance

我刚刚在 msdn/books 中读到，如果现有类源代码不可用，扩展方法对于向现有类添加方法很有用，但是我注意到在一些非常好的书面开源代码中，扩展方法仍然与继承一起使用（抽象，接口）在具有作者自己编写的源代码的类上。

这只是一般问题，这里没有源代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T13:51:34.363

这里已经有很多答案都很棒：我喜欢在可选行为和接口上使用扩展。还有其他几个很好的理由。

**避免抽象方法重载**。考虑以下接口：

```
public interface IUserService
{
    User GetUser(int userId);
    User GetUser(int userId, bool includeProfilePic);
} 
```

我们可以看到在从`IUserService`. 但是，使用接口上的这两种方法，它们可以以完全不同的方式实现（这种简单的方法*可能*不会，但我经常遇到这个问题）。使用扩展方法，重载**不能**有不同的行为：

```
public interface IUserService
{
    User GetUser(int userId, bool includeProfilePic);
}

public static class UserServiceExtensions
{
    public static User GetUser(this IUserService userService, int userId)
    {
        return userService.GetUser(userId, false);
    }
} 
```

**尊重封装。** 如果您想在一个类上添加一些附加功能，但它不需要对类的内部成员进行任何访问即可运行，并且不保存任何状态，那么使用扩展方法是可取的。对类内部成员和状态的了解越少，您的耦合就越少，从长远来看，维护代码就越容易。

**缺点：你不能 Moq Extension Methods** 很多时候这并不重要。这意味着，为了模拟扩展方法背后的行为，您通常需要知道扩展方法是如何工作的，并模拟它调用的虚拟方法。这会将您的测试与扩展方法的实现结合起来。如果您的扩展方法简单且不太可能改变，这只是烦人的。如果您的扩展方法封装了一些复杂的调用，这将非常糟糕。出于这个原因，我通常**只对相对简单的行为使用扩展方法**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T12:47:46.367

一个常见的原因是依赖管理：假设您有一个相当通用的类`User`和一个不那么通用的类`GravatarImage`。现在，能够调用`SomeUser.GravatarImage()`而不是`GravatarImage.ImageForUser(SomeUser)`. 这不仅是方便；在一个大型项目中，其他程序员可能很难找到做某事的“正确”方法。IntelliSense 将在这里提供很大帮助。

但是，User 类是一个“后端”类，不需要了解任何有关图像、视图、头像或 URL 的信息，因此您希望保持依赖关系干净。

类似的论点适用于 LINQ，它基本上由扩展方法组成。这些扩展方法，扩展了集合接口，所以你可以用非常小的接口创建很多功能。实现一种新类型`IEnumerable`非常容易，但您可以获得 LINQ 提供的所有功能。

`IEnumerable`接口，坚持这个例子，除了获得一个枚举器之外，没有更多的功能。`Count`您可以调用扩展方法来完成相同的任务，而不是要求每个实现者提供一个方法。

然而值得注意的是，类似的方法`IEnumerable.Count()`可能非常慢（它必须触及每个元素），而底层类的直接实现可能像返回一个简单的 int 一样简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T13:11:14.083

A good way to think of extension methods is like a plugin-type architecture - they give you the ability to include/exclude functionality for a particular type instance. To answer your question specifically:

> Why to use extension methods if source code is available instead of inheritance

The simplest answer to that would be **for optional functionality**. The most common, and probably the most important, reason for using extension methods is being able to extend a particular type without changing any core functionality. Deriving new types for the sake of adding a couple of methods is overkill, even if you had control over the source it would make *more* sense to make the type `partial` instead. Extension methods tend to be used to solve problems for particular scenarios and don't really merit going into the core code base. However, should you find yourself using them all over the place then that's a good indicator that your probably not using them correctly.

For example, consider the following extension:

```
var epochTime = DateTime.UtcNow.ToEpochTime(); 
```

`ToEpochTime` would return me the date time as [Unix Time](http://en.wikipedia.org/wiki/Unix_time). This would be useful as an alternative way of generating a timestamp or serializing the date. However, it's quite a specific function so it wouldn't make sense being part of `DateTime` but by making it an *extension* method it allows me to simply include this type of functionality if & when required.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T13:17:15.030

我可以想到将子类化作为扩展方法的替代方案有几个缺点：

1.  如果您只想添加几个轻量级方法，这可能会过分。
2.  如果您已经有一个复杂的继承结构（特别是如果您的类已经有子类），或者打算将来有一个，它可能会产生问题。

我经常使用扩展方法来桥接命名空间之间的边界，以提高可读性并保持关注点分离。例如`myObject.GetDatabaseEntity()`读起来很好，但代码`GetDatabaseEntity()`应该在代码的数据库部分，而不是在我的业务逻辑中。通过将此代码放在扩展方法中，我可以将所有内容保留在它所属的位置，而不会增加子类化的复杂性。

此外，如果`myObject`在传递给数据库代码之前在我的业务逻辑中实例化，那么业务逻辑将需要包含数据库命名空间。我更喜欢明确划分每个模块的职责，并且希望我的业务逻辑尽可能少地了解数据库。

扩展方法还有一些有用的技巧（其中一些已经在其他答案中提到过）：

1.  它们可以应用于接口（LINQ 经常使用它）。
2.  它们可以应用于枚举。
3.  如果您使用正确的签名创建它们，它们可以用作事件处理程序。（我不建议这样做，因为它可能会导致混乱，但它可以让您免于存储对对象的引用，否则您需要将这些引用粘贴在某个集合中 - 注意泄漏！）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-18T12:46:49.257

**在 C# 中，为接口**提供扩展方法通常是一种近似* [mixins](http://en.wikipedia.org/wiki/Mixin)的尝试。

> > 一个 mixin 也可以被看作是一个实现了方法的接口。

尽管 C# 不支持 mixins，但为接口类提供其他人可以实现的扩展方法是一种很好的“连接”功能的方式。

这是一个简单接口的真实示例，该接口具有作为 mixin 提供的固定功能：

```
public interface IRandomNumberGenerator
{
    Int32 NextInt();
}

public static class RandomNumberGeneratorExtensions
{
    public static Double NextDouble(this IRandomNumberGenerator instance)
    {
        return (Double)Int32.MaxValue / (Double)instance.NextInt();
    }
}

// Now any class which implements IRandomNumberGenerator will get the NextDouble() method for free... 
```

* *C# 对 mixins 的近似与真实的最大区别在于，在支持的语言中，mixins 可以包含私有状态，而 C# 中接口上的扩展方法显然只能访问公共状态。*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-18T13:27:34.263

这可能是一种特殊的情况，但我发现扩展方法在向现有类提供各种类型的“规则”时很有用。

假设您有一个`SomeDataContainer`包含大量成员和数据的类，并且您希望在某些情况下导出该数据的某些部分，而在其他情况下导出其他部分。

你可以做这样的事情`SomeDataContainer`：

```
if(ShouldIncludeDataXyz()){
    exportXyz();
}

(...) 

private bool ShouldIncludeDataXyz(){
    // rules here
}

private void ExportXyz(){ (...) } 
```

...但是我发现这有时会变得混乱，尤其是如果您有很多课程和许多规则等。

在某些情况下，我所做的是将规则放在单独的类中，每个“数据类”有一个“规则类”，并将规则创建为扩展类。

这只是在一个地方为我提供了一个与核心数据分开的规则层次结构——无论如何我觉得这种分离很有用。

生成的代码仍然与上面类似：

```
// This now calls an extention method, which can be found
// in eg. "SomeDataContainerRules.cs", along with other similar
// "rules"-classes:
if(this.ShouldIncludeDataXyz()){ 
    exportXyz();
} 
```

# c++ - GLUT 的替代品

> ID：14399228
> 
> 赞同：3
> 
> 时间：2013-01-18T12:42:10.157
> 
> 标签：c++, opengl, glut

GLUT 是一个非常古老的 OpenGL 框架，似乎对它有很多负面的态度。我听说 SDL 是一种替代方案，但据我了解，它不处理 OpenGL 的 3d 组件。什么是一个很好的选择（最好有好的文档，所以它很容易学习）可以做 GLUT 做的事情并提供更多的功能，例如。制作一个完整的3d游戏？我不喜欢使用预制的游戏引擎，我更愿意从头开始构建自己的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T13:10:27.787

原始 GLUT 已经很老了，我不会推荐它。但它的新版本：http: [//freeglut.sourceforge.net/](http://freeglut.sourceforge.net/)是相当有趣的框架。Is 与 GLUT 一样简单，但添加了更多功能：鼠标滚动、新几何对象等。

这个库的最后一个版本是 2012 年 1 月

这是一个有用的链接，其中包含几个 opengl 框架：[http ://www.opengl.org/resources/libraries/windowtoolkits/](http://www.opengl.org/resources/libraries/windowtoolkits/)

如果您想制作 w“整个”项目，我建议结合更多库：

*   [http://www.opengl.org/wiki/Related_toolkits_and_APIs#Context.2FWindow_Toolkits](http://www.opengl.org/wiki/Related_toolkits_and_APIs#Context.2FWindow_Toolkits)
*   [http://glsdk.sourceforge.net/docs/html/index.html](http://glsdk.sourceforge.net/docs/html/index.html)
*   用于纹理加载的 SOIL

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T12:48:41.247

如果您要使用现代 OpenGL GLFW 是管理上下文、窗口创建、用户输入的最佳选择。该库非常活跃，不断发布新版本。只是想补充一点，我从 GLUT 和 FREEGLUT 转移的考虑是缺乏为创建的上下文定义颜色、模板、深度位和 MSAA 样本的能力。GLFW 允许您这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T12:43:47.870

SDL 可以使用 OpenGL 上下文创建窗口（请参阅`SDL_WINDOW_OPENGL` [窗口标志](http://wiki.libsdl.org/moin.cgi/SDL_WindowFlags)），因此您可以使用 OpenGL 函数。[SFML](http://www.sfml-dev.org/)也可以，可能[Allegro](http://alleg.sourceforge.net/)也可以。

我个人推荐 SFML，尤其是版本 2（正在开发中），因为我发现它很容易设置和开始使用，无论是一般情况还是 OpenGL。

# android - 如何在 Java/Android 中播放不受支持的视频

> ID：14399230
> 
> 赞同：1
> 
> 时间：2013-01-18T12:42:13.420
> 
> 标签：android, video-streaming, android-videoview, codec

所以我尝试了 2 件事：1\. 插入了 MediaPlayer 和 2\. 在我的布局中插入了 VideoView，并尝试设置视频的 Url。

没有一个工作，无论是 MP4 和 FLV 文件。根据我在 SO 上阅读的内容，这些视频可能具有不受支持的编码等，我的猜测是我需要编解码器才能播放它们。

所以很自然，我有这些问题：

1.  如果我有 MP4 或 FLV 文件，我可以检查我需要哪些编解码器吗？
2.  一旦我知道我需要哪些编解码器，我将如何将它们添加到我的应用程序中？有没有开源的，还是我需要自己写？

注意：PC 上的 Chrome 可以正常播放这些视频。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T05:59:06.813

问题可能出在视频编码上。Android FROYO 和 Gingerbread 不支持“基线”H264 以外的 H264 格式。因此，如果您的视频是 Mp4 和 H264 编码，请确保其“ **AVC 基线**”编码。在 windows/Linux 中使用“媒体信息”等工具并检查您的视频编码。如果可能，将视频转换为基线。

另一种解决方法是跳过 Videoview 并使用**视频播放**意图并将播放重​​定向到应用程序。系统将提示用户选择一个播放器来处理播放。显然，如果视频视图无法播放文件，默认播放器也无法处理该文件。您可以选择其他一些已安装的播放器，例如 Mx-Player，它将完美地流式传输文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:35:39.217

视频无法播放的问题是手机没有支持的视频编解码器。这是因为视频是在具有特定编解码器（mpeg4）的某些设备中录制的，但录制的视频无法在没有该 mpeg4 编解码器的其他设备中播放。因此，为了克服这个问题，我们需要在手机上安装缺少的编解码器。这可以通过

1) 从 Google Play 商店安装 MX 视频播放器

2) 这个 MX Player 本身要求用户安装手机需要的编解码器。

3) 单击确定从 Google Play 商店安装编解码器。点击“安装”，然后点击“接受并下载”</p>

4) 点击 Keep Shopping 按钮开始下载。

5) 下载完成后。然后单击视频文件并在 MX Video Player 中打开以播放视频。

6) 如果要求升级播放器，请继续使用 Google Play 商店安装最新的 MX 播放器（继续步骤 3,4 和 5）

7) 否则视频将在 MX Video Player 上播放。

# c# - Task.CurrentId 是如何工作的？

> ID：14399232
> 
> 赞同：11
> 
> 时间：2013-01-18T12:42:17.313
> 
> 标签：c#, .net, windows-store-apps

我目前正在学习如何在 Windows 应用商店（“Metro”）应用程序中使用任务、异步和等待。我偶然发现了这处房产`Task.CurrentId`，并试图了解它是如何运作的。

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.currentid.aspx)，它返回*“系统分配给当前执行任务的整数”*。所以我将此值添加到我的自定义记录器中，但令我惊讶的是，我的测试应用程序都没有记录任何内容，除了`null`.

看这个例子：

```
private async void TestButton_Click(object sender, RoutedEventArgs e)
{
    int? id1 = Task.CurrentId;

    await Task.Delay(100);
    int? id2 = Task.CurrentId;

    StorageFolder folder = ApplicationData.Current.LocalFolder;
    StorageFile file = await folder.CreateFileAsync("test.txt", 
        CreationCollisionOption.OpenIfExists);
    int? id3 = Task.CurrentId;

    await FileIO.AppendTextAsync(file, "test");
    int? id4 = Task.CurrentId;

    await DoMoreAsync();
    int? id7 = Task.CurrentId;
}

private async Task DoMoreAsync()
{
    StorageFolder folder = ApplicationData.Current.LocalFolder;
    StorageFile file = await folder.CreateFileAsync("test.txt",
        CreationCollisionOption.OpenIfExists);
    int? id5 = Task.CurrentId;

    await FileIO.AppendTextAsync(file, "test");
    int? id6 = Task.CurrentId;
} 
```

所有这些 id 都是`null`. 为什么？这段代码确实创建了任务，不是吗？他们不应该有身份证吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-18T12:45:48.847

因为您正在使用`async / await`，所以您的所有`Task.CurrentId`调用都发生在 UI 线程上。

UI 线程不是 a `Task`，所以它有一个 null`CurrentId`

* * *

如果您创建一个`Task`，`CurrentId`它将被设置：

```
int? idTask = await Task.Run( () => Task.CurrentId ); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-18T14:42:07.237

> 根据 MSDN，它返回“系统分配给当前执行任务的整数”......这段代码确实创建了任务，不是吗？他们不应该有身份证吗？

那里的关键是“当前正在执行”。

s有两种类型`Task`：一种任务执行代码，另一种任务只是某种操作或事件的抽象表示。例如，`Task.Run`将创建一个代码执行任务，该任务将在线程池线程上执行其代码；`Task.Delay`将创建一个在计时器触发时完成的操作/事件任务。

方法返回的任务`async`代表方法本身，因此它们实际上是操作/事件任务而不是代码任务。方法中的代码`async`可以作为委托或几个不同的任务（或两者的混合）运行。即使您确实`CurrentId`从`async`方法中获得了一个（这表明您正在代码执行任务中运行），该 id 也将不同于该方法返回的任务的 id（它始终是一个操作/事件任务） .

# java - 幻数：检查幻数

> ID：14399234
> 
> 赞同：2
> 
> 时间：2013-01-18T12:42:25.583
> 
> 标签：java

我收到了关于 Sonar 的警告，认为这是违规行为。我需要适当的解决方案来从声纳中删除此警告。

我的代码是这样的：

```
void method(){
try {
  int x;
  x=5;
 }
 catch{
    //handling code
 }
} 
```

我收到此代码的警告，例如：

```
'5' is a magic number. 
```

所以，我想要适当的解决方案来消除这样的警告。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T12:44:29.570

幻数是代码中数字的直接使用（即代码中的硬编码数字在您的情况下直接使用 5）

摆脱警告试试这个：

```
 int x;
 static final int SOME_NUMBER=5;
 x=SOME_NUMBER; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-18T12:50:08.470

Sonar 要求您通过命名来记录您使用该特定号码的原因。您可以通过声明一个常量（使用富有表现力的名称）来做到这一点：

```
static final int NUMBER_OF_RETRIES = 5; 
```

然后使用该常数而不是“魔术”数字，从而更清楚地表达该分配的意图：

```
x = NUMBER_OF_RETRIES; 
```

这还有一个好处是，如果需要更改 NUMBER_OF_RETRIES，您可以在一个地方进行更改，而不是使用那个“神奇”数字的任何地方。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-02-09T15:28:17.967

好吧，我知道这个问题已经得到了令人满意的回答，但我想在这里添加自己的声纳解释，因为它已经很好地阐述了：

> 幻数是一个突然出现的数字，直接在语句中使用。幻数经常被使用，例如限制循环的迭代次数，测试属性的值等。
> 
> 当您编写一段代码时，使用幻数可能看起来很明显和直接，但在调试时它们就不那么明显和直接了。
> 
> 这就是为什么在使用之前必须首先将幻数分配给明确命名的变量来揭开幻数的神秘面纱。
> 
> -1、0 和 1 不被视为幻数。
> 
> **不合规代码示例**
> 
> ```
> public static void doSomething() {
>   for(int i = 0; i < 4; i++){                 // Noncompliant, 4 is a magic number
>       ...
>   }
> } 
> ```
> 
> **合规解决方案**
> 
> ```
> public static final int NUMBER_OF_CYCLES = 4;
> public static void doSomething() {
>   for(int i = 0; i < NUMBER_OF_CYCLES ; i++){
>     ...
>   }
> } 
> ```
> 
> **例外**
> 
> 此规则忽略 hashCode 方法。

# asp.net - 如何获取一个表标识列值以及如何在存储过程中使用该值

> ID：14399236
> 
> 赞同：0
> 
> 时间：2013-01-18T12:42:27.987
> 
> 标签：asp.net

我有两张桌子`UserInfo`和`UserContact`. `UserInfo`我使用标识列 ( ) 成功地将数据插入到表中`ID`。我正在使用存储过程将数据插入表中。

```
UserInfo (Id, FirstName, LastName, Address)   
Usercontact(Id, UserInfoId, ContactNumber) 
```

我想插入第二个表。如何从第一个表中获取 ID 以及如何在第二个表的存储过程中使用该 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:48:50.840

**对于 SQL SERVER：**使用[SCOPE_IDENTITY](http://msdn.microsoft.com/en-us/library/ms190315%28v=sql.100%29.aspx) (Transact-SQL)：返回插入到同一范围内的标识列中的最后一个标识值。范围是一个模块：存储过程、触发器、函数或批处理。因此，如果两条语句在同一个存储过程、函数或批处理中，则它们属于同一范围。

例如。：

```
Insert Into UserInfo (FirstName,LastName,Address) 
Values (@FirstName,@LastName,@Address);

Declare @id int
SELECT @id = SCOPE_IDENTITY();

Insert Into Usercontact (Id,UserInfoId,ContactNumber) 
Values (@id,@UserInfoId,@ContactNumber); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:57:48.500

您可以使用 Scope_identity() 或 IDENT_CURRENT('tablename')

**SELECT SCOPE_IDENTITY()**
它返回连接上和同一范围内的语句产生的最后一个 IDENTITY 值，而不管产生该值的表。SCOPE_IDENTITY() 与@@IDENTITY 一样，将返回在当前会话中创建的最后一个身份值，但它也会将其限制在您当前的范围内。换句话说，它将返回您显式创建的最后一个身份值，而不是由触发器或用户定义的函数创建的任何身份。

**SELECT IDENT_CURRENT('tablename')**
它返回表中生成的最后一个 IDENTITY 值，与创建该值的连接无关，也与生成该值的语句的范围无关。IDENT_CURRENT 不受范围和会话限制；它仅限于指定的表。IDENT_CURRENT 返回为任何会话和任何范围内的特定表生成的标识值。

*注意：为避免与稍后添加触发器相关的潜在问题，请始终使用 SCOPE_IDENTITY() 来返回 T SQL 语句或存储过程中最近添加的行的标识。*

有关更多信息，请参阅此博客文章

> [http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)

# android - 如何启用系统固件密钥

> ID：14399237
> 
> 赞同：4
> 
> 时间：2013-01-18T12:42:31.070
> 
> 标签：android

应该使用系统签名密钥来以系统权限签署我的应用程序，. 但是我不知道。所以我有问题；

*   如何使用系统固件密钥签署我的应用程序？
*   有什么要求？
*   我该怎么做，一步一步？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:49:02.597

除非您在手机上烧录了自己的固件，否则您将无法获得系统签名。如果是你自己的固件，那么你可以得到私钥

在 /build/target/product/security

[获取 platform.pk8 文件并使用此处](http://developer.android.com/tools/publishing/app-signing.html)描述的步骤为您的应用程序签名

# crontab - 为 boto-rsync 设置 cron

> ID：14399241
> 
> 赞同：1
> 
> 时间：2013-01-18T12:42:45.817
> 
> 标签：crontab, boto

我正在尝试`boto-rsync` 使用`script.sh`：

```
#!/bin/bash
echo `date`
echo "start"
boto-rsync -d 2 -a <access key> -s <secure key>  s3://db-dump/hourly/2013/ /mnt/dir
echo "stop" 
```

它工作得很好。但是当我使用 运行它时`crontab`，它会忽略`boto-rsync`行。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:41:37.060

十分之九，当您遇到问题在将其放入 cron 脚本之前运行良好时，根本问题是 cron 脚本作为不同的用户（通常是 root）运行并且环境未设置访问有问题的命令。因此，尝试执行“su”，然后键入“boto-rsync”，看看它是否能够找到该命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:16:59.840

我得到了解决方案。我们需要添加python和文件位置

```
#!/bin/bash
echo `date`
echo "start"
python <location of boto-rsync> -d 2 -a <access key> -s <secure key>  s3://db-   dump/hourly/2013/ /mnt/dir
echo "stop" 
```

# html - 在grails中使用g：select时如何设置选定的值

> ID：14399244
> 
> 赞同：7
> 
> 时间：2013-01-18T12:42:53.217
> 
> 标签：html, grails, selected, selectedvalue

我是 Grails 框架的新手。我有问题：

我的域是：“国家”。我想通过在 Grails 中使用 g:select 在选择标签中显示列表国家

## 例如：数据库中的数据存储如下

## 身份证名称

* * *

1 英格兰
2 加拿大
3 德国

现在，我想设置“加拿大”被选中。谁能帮我。请！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T13:22:21.587

使用 value 属性设置选中项：

```
<g:select name="user.company.id"
from="${Company.list()}"
value="${user?.company.id}"
optionKey="id" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-03T09:14:22.383

为什么不使用[`g:countrySelect`](http://grails.org/doc/2.3.7/ref/Tags/countrySelect.html)标签？这将节省一整个域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T14:16:39.747

使用 mpccolorado 提供的选择标签结构，然后默认选择加拿大，将其更改`value`为：

```
value="2" 
```

（加拿大的 ID）。

# php - Preg 用链接替换 URL：MIME 类型失败

> ID：14399246
> 
> 赞同：0
> 
> 时间：2013-01-18T12:42:57.857
> 
> 标签：php, regex, url, preg-replace, mime-types

我在 php 函数中使用以下正则表达式用正确的 HTML 链接替换 ​​URL：

```
return preg_replace('@(https?://([-\w\.]+[-\w])+(:\d+)?(/([\w/_\.#-]*(\?\S+)?[^\.\s])?)?)@', '<a href="$1" target="_blank">$1</a>', $s); 
```

但是当 $s 有一个像这样的字符串时

```
<li>http://www.link.com/something.pdf</li> 
```

函数返回

```
<li><a href="http://www.link.com/something.pdf</li">http://www.link.com/something.pdf</li></a></li> 
```

有谁知道如何修改正则表达式以获得预期的字符串，即

```
<li><a href="http://www.link.com/something.pdf">http://www.link.com/something.pdf</a></li> ? 
```

不排除由 '%', '?' 引入的 URL 的替换子字符串 或者 '＆' ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:54:19.503

非常简单的解决方案：

```
return '<li>'.preg_replace('@(https?://([-\w.]+[-\w])+(:\d+)?(/([\w-.~:/?#\[\]\@!$&\'()*+,;=%]*)?)?)@', '<a href="$1" target="_blank">$1</a>', $s).'</li>'; 
```

如果你真的想要一个正则表达式：

```
return preg_replace('@(https?://([-\w.]+[-\w])+(:\d+)?(/([\w-.~:/?#\[\]\@!$&\'()*+,;=%]*)?)?)@', '<a href="$1" target="_blank">$1</a>', $s); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:56:44.140

你 rpattern 是不够的（捕捉所有的链接），但无论如何，而不是`\S+`你可能想要的，`[^\s<>]+`因为前者捕捉了所有非空间。

同样适用于`[^\.\s]`。做这个`[^\s<>.]`。在字符类中使用时不需要转义点，所以*我*对这个组的添加基本上是大于和小于符号。

# ios - 将两个数组与公共元素和额外元素组合在一起

> ID：14399247
> 
> 赞同：-5
> 
> 时间：2013-01-18T12:42:58.563
> 
> 标签：ios, objective-c, xcode, nsmutablearray

我有两个数组如下

```
 firstArray={1,2,3,5,6,8,9,10,11} ;
  secondArray={1,2,3,4,7,8,10} ; 
```

从这两个数组中，我需要得到结果数组：

```
 resultant ={1,2,3,4,5,6,7,8,9,10,11}; 
```

我怎样才能做到这一点。请有任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T13:14:01.277

There are so many ways to do :

**You need to sort the array once two are merged, so as to produce the desired result**

Starting with the basic way :

```
NSArray *firstArray=@[@1,@2,@3,@5,@6,@8,@9,@10,@11];
NSArray *secondArray=@[@1,@2,@3,@4,@7,@8,@10];

NSMutableArray *merged=[NSMutableArray arrayWithArray:firstArray];
for (id element in secondArray) {
    if (![merged containsObject:element]) {
        [merged addObject:element];
    }
}

NSLog(@"Merged %@",merged); 
```

* * *

Using `Set`

```
NSSet *firstSet=[NSSet setWithArray:firstArray];
NSSet *secondSet=[NSSet setWithArray:secondArray];

NSMutableSet *unionFirstSecondSet=[NSMutableSet new];
[unionFirstSecondSet unionSet:firstSet];
[unionFirstSecondSet unionSet:secondSet];

NSLog(@"Merged %@",unionFirstSecondSet); 
```

* * *

Using `Dictionary`

```
NSMutableDictionary *mergeDict=[NSMutableDictionary dictionaryWithObjects:firstArray forKeys:firstArray];
for (id element in secondArray) {
    [mergeDict setObject:element forKey:element];
}
NSArray *mergedArray=[mergeDict allKeys];

NSLog(@"Merged %@",mergedArray); 
```

* * *

Using some array API tweaks

```
NSMutableArray *mergedArray=[[NSMutableArray alloc]initWithArray:firstArray];
[mergedArray addObjectsFromArray:secondArray];
for (id object in secondArray) {
    [mergedArray removeObjectIdenticalTo:object];
}
[mergedArray addObjectsFromArray:secondArray];

NSLog(@"Merged %@",mergedArray); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:47:03.073

```
NSMutableSet * wants = [NSMutableSet setWithArray:firstArray];
NSMutableSet * union = [[NSMutableSet setWithArray:secondArray] unionSet:wants];

NSMutableArray *array = [NSMutableArray arrayWithArray:[union allObjects]]; 
```

# php - $mysqli->insert_id 不能在 openSUSE 上使用 PHP

> ID：14399249
> 
> 赞同：0
> 
> 时间：2013-01-18T12:43:06.390
> 
> 标签：php, mysql, ubuntu, amazon-web-services, mysqli

我正在将`PHP`应用程序从`Ubuntu`服务器移动到`AWS openSUSE`实例。

该应用程序无法在 openSUSE 机器上运行。`API`任何具有`$mysqli->insert_id`. 调用使用`$mysqli`做的工作。

通过阅读，我注意到这通常会失败，因为`auto_increment`没有在 Database 列上实现。`MySQL`我从`Ubuntu`托管应用程序迁移了数据库。表模式似乎是相同的。

我还查看了服务器配置文件`php.ini`等，并且`MYSQLi`扩展似乎配置正确。

正是出于这个原因，我认为这是一个与 PHP 相关的问题。任何帮助将不胜感激。

编辑：根据要求提供更多信息。

每个失败的 API 调用的一般结构是。

1.  iOS 向 API 发送 POST
2.  API（内置 PHP）将信息插入到具有自动递增主键的表中。
3.  然后 API 使用 $case_id = $mysqli->insert_id;，获取这个主键的值。
4.  此值将返回给 iOS 应用程序。

重要 - $case_id 返回为 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:56:12.120

为了解决这样的问题，我首先要隔离问题发生的位置。架构错了吗？如果您使用 MySQL shell 登录到 MySQL 服务器并尝试手动插入一条记录，自动递增的（主键？）列为 NULL，新记录是否正确显示？如果您使用从 PHP/mysqli 组件生成并传递给服务器的相同底层 SQL 语句进行查询，它是否返回正确的行？

如果它在数据库服务器上使用 MySQL shell 工作，那么如果你从 API 服务器尝试相同的结果呢？是权限/ACL 还是网络问题？如果它可以在数据库服务器和 API（Web？）服务器上的 MySQL shell 中运行，那么它是否可以在您的 PHP 代码中运行？也许您可以重构您的 PHP 以允许您从命令行运行测试/诊断（而不是尝试通过额外的 Web/UI 层启动事务）。（无论如何，在编写 Web 应用程序时，这通常是一个好主意）。也许您可以将 web/form/ReST 处理（视图）与将数据传递回数据库（模型）的代码分开。因此，您可以将控制器代码与其他代码隔离开来，并可以将其重新用于诊断和监控。

如果即使从数据库服务器的唯一 MySQL shell 提示符下也无法使其正常工作，那么您的架构可能有问题。返回到工作数据库服务器并按照此处所述执行模式转储：http: [//forums.mysql.com/read.php?35,128003,128105](http://forums.mysql.com/read.php?35,128003,128105)

然后恢复那个。然后它应该是一个完全空的数据库，您的工作模式完好无损。如果这不起作用，那么它表明您有一些问题甚至更低（可能是 MySQL 版本和模块，缺少一些存储后端？）

# c++ - BREW 平台 - 未定义符号 main

> ID：14399254
> 
> 赞同：2
> 
> 时间：2013-01-18T12:43:30.257
> 
> 标签：c++, brew-framework, brewmp

我正在用 C++ 为 BREW 平台创建应用程序。我正在使用 Visual Studio，并且在 Brew Simulator 项目上运行良好。但是编译ARM编译器时出现错误：

> 错误：L6218E：未定义符号 main（来自 kernel.o）

我做了一些研究，我发现了这个：

> [http://brew.wardco.com/rvct.html](http://brew.wardco.com/rvct.html)

而且还是有这个错误。无论如何，我试图将虚拟 int main() 放在 AEEModGen.c 中。编译时没有错误，但应用程序当然不会启动。

> 一个虚拟的 main() 将不起作用，因为您仍在拖动所有这些 RTL 机器，并且它无法在 BREW 环境中成功初始化。

我不知道从哪里开始寻找我的问题，有人可以解决这个案例吗？

这是我在 AEEModGen.c 中输入的代码：

```
#ifndef AEE_SIMULATOR

#ifdef __cplusplus
extern "C"
{
#endif
    void * __aeabi_vec_ctor_nocookie_nodtor(    void* user_array,
                                               void* (*constructor)(void*),
                                               size_t element_size,
                                               size_t element_count) 

    {
        size_t ii = 0;
        char *ptr = (char*) (user_array);
        if ( constructor != NULL )
            for( ; ii != element_count ; ii++, ptr += element_size )
                constructor( ptr );
        return user_array;
    }
#ifdef __cplusplus
}
#endif
#endif 
```

# android - Android 如何获得两个给定点之间的所有点？

> ID：14399259
> 
> 赞同：0
> 
> 时间：2013-01-18T12:43:40.810
> 
> 标签：android, coordinates, points

我需要你的帮助，

如何获取 ArrayList 中两个屏幕坐标（ start(x,y) / end(x,y) ）之间的一条线的所有点（x,y）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:06:01.747

使用中点公式。让 Start(x1,y1) 和 End(x2,y2) 是两个点然后你可以得到 midpoint((x1+x2)/2,(y1,y2)/2) 中点 b/w start 和 end 使用这个公式直到你得到开始和结束的所有分数。

希望这将有希望。

# jquery - 使用 cssSandpaper 进行变换原点等价

> ID：14399261
> 
> 赞同：3
> 
> 时间：2013-01-18T12:43:50.400
> 
> 标签：jquery, css-transforms

可以使用 cssSandpaper 执行类似以下代码的操作吗？

```
-webkit-transform-origin:top left;
-moz-transform-origin:top left;
-o-transform-origin:top left;
-ms-transform-origin:top left;
transform-origin:top left; 
```

这不起作用：

```
-sandpaper-transform-origin:top left; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:45:47.833

**不**，这目前不是一项功能，但正在开发路线图中。在他们的网站上查看[这篇文章](http://www.useragentman.com/blog/2010/05/06/csssandpaper-now-supports-transform-translate-and-rgba-gradients/)：

> *还有更多我希望看到 cssSandpaper 支持*，包括： [...] **transform-origin**：修改元素转换的原点（例如，这将允许开发人员制作行星旋转的动画太阳，这将是所有行星的变换起点）。

此外，在最近的一篇文章中，开发人员在评论中指出：

> 在我实现 transform-origin CSS3 属性之前，您可能必须使用翻译来模拟这一点。

[在这个官方文档页面](http://www.useragentman.com/blog/csssandpaper-a-css3-javascript-library/)上查看他的评论。

# jquery - 在窗口调整大小时在 wordpress 中切换不同的模板部分

> ID：14399264
> 
> 赞同：0
> 
> 时间：2013-01-18T12:44:06.373
> 
> 标签：jquery, wordpress, if-statement, switch-statement, responsive-design

在我的 wordpress 模板中，我使用 wordpress 函数在 header.php 中添加了我的模板部分。

```
<?php get_template_part('desktop'); ?> 
```

我想为不同的屏幕尺寸以及移动屏幕添加不同的模板部分。如何根据设备分辨率或窗口重新大小自动获取窗口宽度？以及如何获得这些值作为切换模板部分的条件？我有我的不同模板命名 `ipad-portrait.php, ipad-landscape.php and tinymobile.php.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:26:28.813

使用 Jquery，我可以在重新调整大小时捕捉窗口的宽度：

我的jQuery：

```
<script type=text/javascript>
  $(window).resize(function() {
    var _my_window = $(window).width();
      alert(_my_window);
   }); 
</script> 
```

我认为直接传递这个jquery变量来存储它作为一个php变量并不容易。

# android - AndEngine 以不同的大小多次添加单个图像

> ID：14399265
> 
> 赞同：0
> 
> 时间：2013-01-18T12:44:08.050
> 
> 标签：android, textures, sprite, andengine, scene

我是 AndEngine 的新手。我正在使用以下代码来显示球的图像。

```
private ITextureRegion mBallTextureRegion;
private Sprite ball1;

@Override
public void onCreateResources() {
   ITexture ball = new BitmapTexture(this.getTextureManager(),
             new IInputStreamOpener() {
                    @Override
                public InputStream open() throws IOException {
                return getAssets().open("gfx/ball.png");
                        }
            });
  this.mBallTextureRegion = TextureRegionFactory.extractFromTexture(ring1);

  ....................
  ....................
}

@Override
protected Scene onCreateScene() {
   final Scene scene = new Scene();
   scene.attachChild(backgroundSprite);
   ...........
   ball1 = new Sprite(192, 63, this.mBallTextureRegion, getVertexBufferObjectManager());
   scene.attachChild(ball1);
   ..............
   ...........  

} 
```

现在，根据游戏级别，我想在场景中添加多个不同大小的球。是否可以添加`ITextureRegion mBallTextureRegion`不同大小的多个时间（使用不同的放大倍数）？如果是，那怎么办？请帮我这个示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:48:11.903

如果你想调整 Sprite、AnimatedSprite、Text 等的大小...

```
//the original image x2, 2f because the parameter is float
youSprite.setScale(2f); 
```

如果您在更多精灵中使用纹理区域：

```
Sprite youSprite; 
 //set deepCopy() in you texture to optimized memory
youSprite= new Sprite(0,0,youTexture.deepCopy(),mEnginge.getVertexTextureManager()); 
```

如果要生成每个球的随机位置，请使用“随机”变量。

此致。

# javascript - TinyMCE 的 addButton() 函数中所有可能的设置属性是什么？

> ID：14399267
> 
> 赞同：52
> 
> 时间：2013-01-18T12:44:23.693
> 
> 标签：javascript, button, user-interface, tinymce, wysiwyg

[文档](http://www.tinymce.com/wiki.php/API3:method.tinymce.Editor.addButton)对此不是很清楚。

> name - String - 要添加的按钮名称。
> 
> 设置 - 对象 - 带有标题、cmd**等**的设置对象。

“ETC”？真的吗？我在哪里可以看到其他可能的属性？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2014-02-06T15:33:24.783

*   `autofocus`：如果控件在渲染时应该聚焦，则为真
*   `border`：边框值示例：1 1 1 1
*   `classes`：要添加的类的空格分隔列表
*   `disabled`: 控件是否默认禁用
*   `hidden`: 控件是否默认隐藏
*   `icon`: 用于按钮的图标
*   `image`: 用于图标的图像
*   `margin`：边距框值示例：1 1 1 1
*   `minHeight`：控件的最小高度
*   `minWidth`：控件的最小宽度
*   `name`：控件实例的名称
*   `padding`：填充框值示例：1 1 1 1
*   `role`: 用于控制的 WAI-ARIA 角色
*   `size`：按钮大小小|中|大
*   `style`: 要添加的样式 CSS 属性
*   `text`：要在小部件内显示的文本
*   `tooltip`: 悬停时显示的工具提示文本

有关所有设置和方法的完整列表，请参阅[TinyMCE 文档页面](http://www.tinymce.com/wiki.php/api4%3aclass.tinymce.ui.Button)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-18T13:38:46.187

您想知道哪些设置可能适合设置对象（tinymce 3）。这里是：

```
title       --> title
label       --> label
scope       --> scope
onclick     --> function to be called onclick
menu_button --> flag, defines if the button is a menu button
cmd         --> tinymce command to get executed onClick
ui          --> paramter for the tinymce command cmd
value       --> value for the tinymce command cmd 
```

这些设置在`createButton`类的功能中分配`ControlManager`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-08-18T05:00:26.403

在尝试查找`addButton`V4 中的文档时遇到了同样的问题，我找到了链接，以防万一有人需要它。

[tinymce.ui.Button](https://www.tinymce.com/docs/api/tinymce.ui/tinymce.ui.button/)

希望它可以帮助某人！

# .htaccess - 使用附加参数重定向永久

> ID：14399268
> 
> 赞同：0
> 
> 时间：2013-01-18T12:44:25.097
> 
> 标签：.htaccess, redirect, permanent

我的目标是从 **/kontaktaufnehmen/kontakt.html**重定向到**/auftragsverwaltung/kontakt/?type=1** 并且必须将参数添加到新路径中。

我试过了

```
Redirect permanent /kontaktaufnehmen/kontakt.html /auftragsverwaltung/kontakt/?type=1 
```

但参数不会添加到重定向路径中。没有`?type=1`参数将被添加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:44:54.863

尝试：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} !type=1
RewriteRule ^/?kontaktaufnehmen/kontakt.html /auftragsverwaltung/kontakt/?type=1 [L,R=301,QSA]

RewriteCond %{QUERY_STRING} type=1
RewriteRule ^/?kontaktaufnehmen/kontakt.html /auftragsverwaltung/kontakt/ [L,R=301] 
```

这里重要的是`QSA`标志，这意味着任何已经存在的查询字符串都会被附加。mod_alias 指令`Redirect`不会为您执行此操作。第二条规则只是一个重定向，因为它看到`type=1`查询字符串已经存在，所以它不会添加另一个。

# ios - 改变 FPPopover 控制器的颜色

> ID：14399270
> 
> 赞同：0
> 
> 时间：2013-01-18T12:44:32.567
> 
> 标签：ios, iphone, objective-c, ipad, fppopover

我已经下载了 FPPopover 控制器代码表格[链接](https://github.com/50pixels/FPPopover)

它包括一些弹出颜色，如绿色、红色、黄色、浅灰色..

但在该代码中，我无法将弹出框颜色更改为 iPad 中的真实弹出框颜色

请通过上面[链接](https://github.com/50pixels/FPPopover)中的代码并帮助我...

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:54:28.380

嘿，这很简单，您只需要在此示例中更改此处的值

**FPPopoverView.h**

```
typedef enum {
    FPPopoverBlackTint,
    FPPopoverLightGrayTint,
    FPPopoverGreenTint,
    FPPopoverRedTint,
    FPPopoverDefaultTint = FPPopoverRedTint
} FPPopoverTint; 
```

`FPPopoverDefaultTint = FPPopoverRedTint`您可以使用with检查更改 `FPPopoverDefaultTint = FPPopoverLightGrayTint`

我刚刚测试过，我把`FPPopoverRedTint`

**输出是**

![在此处输入图像描述](../Images/946795071a2f658f7ab7abd26bb969b6.png)

# java - 春季登录页面

> ID：14399272
> 
> 赞同：0
> 
> 时间：2013-01-18T12:44:36.040
> 
> 标签：java, spring, spring-mvc, login

我是春天的新手。现在尝试做一个登录页面。我收到空指针异常。我不知道如何解决它。请帮助我。这是我得到的错误..

```
HTTP Status 500 - 

--------------------------------------------------------------------------------

type Exception report

message 

description The server encountered an internal error () that prevented it from fulfilling this request.

exception 

org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.NullPointerException
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:681)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:585)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause 

java.lang.NullPointerException
    com.sce.controller.LoginController.processForm(LoginController.java:29)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:585)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

**登录控制器.java：**

```
package com.sce.controller;
import com.sce.model.LoginData;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.validation.BindingResult;
import java.util.Map;
import javax.validation.Valid;

@Controller
@RequestMapping("login.html")
public class LoginController {
    @RequestMapping(method = RequestMethod.GET)
    public String showForm(Map model) {
        LoginData loginobj = new LoginData();
        model.put("loginobj", loginobj);
        return "login";
        }

    @RequestMapping(method = RequestMethod.POST)
    public String processForm(@Valid LoginData loginobj, BindingResult result,Map model) {
        String userName = "user";
        String password = "pass";
        if (result.hasErrors()) {
            return "login";
            }
        loginobj = (LoginData)model.get("loginobj");
        System.out.println("username:" +loginobj.getUserName());
        System.out.println("password:" +loginobj.getPassword());
        if (!loginobj.getUserName().equals(userName)||!loginobj.getPassword().equals(password)) {
            return "loginerror";
            }
        model.put("loginobj", loginobj);
        return "loginsucces";
        }
    } 
```

**登录数据.java：**

```
package com.sce.model; 

import javax.validation.constraints.Size; 
import org.hibernate.validator.constraints.NotEmpty; 

public class LoginData {
    @NotEmpty@Size(min = 1, max = 50)
    private String userName;
    @NotEmpty@Size(min = 1, max = 20)
    private String password;
    public String getUserName() {
        return userName;
    }
    public void setUserName(String userName) {
        this.userName = userName;
    }
    public String getPassword() {
        return password;
    }
    public void setPassword(String password) {
        this.password = password;
    }

} 
```

**index.jsp：**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Online Book Shopping</title>
</head>
<body>
<h1>Welcome to Online Book Shopping</h1>
<ul>
<li><a href="forms/login.html">Click here to Login</a></li>
</ul>
</body>
</html> 
```

**登录.jsp：**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Online Shopping</title>
</head>
<body>
<h3>Login Form</h3>
<form:form action="login.html" commandName="loginobj">
<table>
<tr><td>User Name:<FONT color="red">
<form:errors path="userName" /></FONT></td></tr>
<tr><td><form:input path="userName" /></td></tr>
<tr><td>Password:<FONT color="red">
<form:errors path="password" /></FONT></td></tr>
<tr><td><form:password path="password" /></td></tr>
<tr><td><input type="submit" value="Submit" /></td></tr>
</table>
</form:form>
</body>
</html> 
```

**登录成功.jsp：**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Online Shopping</title>
</head>
<body>
<h3>Login Form</h3>
<form:form action="login.html" commandName="loginobj">
<table>
<tr><td>User Name:<FONT color="red">
<form:errors path="userName" /></FONT></td></tr>
<tr><td><form:input path="userName" /></td></tr>
<tr><td>Password:<FONT color="red">
<form:errors path="password" /></FONT></td></tr>
<tr><td><form:password path="password" /></td></tr>
<tr><td><input type="submit" value="Submit" /></td></tr>
</table>
</form:form>
</body>
</html> 
```

**登录错误.jsp：**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
Username or password is wrong..
<table>
<tr><td><a href="login.html">Try again..</a></td></tr>
</table>
</body>
</html> 
```

**调度程序-servlet.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="
http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://www.springframework.org/schema/mvc
http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">
<!-- Enable annotation driven controllers, validation etc... -->
<mvc:annotation-driven />
<context:component-scan base-package="com.sce.controller" />
<bean id="viewResolver"
class="org.springframework.web.servlet.view.InternalResourceViewResolver">
<property name="prefix">
<value>/WEB-INF/jsp/</value>
</property>
<property name="suffix">
<value>.jsp</value>
</property>
</bean>
<bean id="messageSource"
class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
<property name="basename" value="/WEB-INF/messages" />
</bean>
</beans> 
```

**消息属性：**

```
NotEmpty.loginobj.userName=must not be blank.
Size.loginobj.userName=size must between 1 to 50 characters.
NotEmpty.loginobj.Password=must not be blank.Size.loginobj.
Password=size must between 1 to 20 characters. 
```

**网页.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/j2ee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2eehttp://java.sun.com/xml/ns/j2ee/web-app_2_5.xsd">
<display-name>OnlineShopping</display-name>
<servlet>
<servlet-name>dispatcher</servlet-name>
<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
<load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
<servlet-name>dispatcher</servlet-name>
<url-pattern>/forms/*</url-pattern>
</servlet-mapping>
<welcome-file-list>
<welcome-file>index.jsp</welcome-file>
</welcome-file-list>
</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:59:07.013

从您提供的代码来看，这似乎`loginobj`是导致`NullPointerException`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:00:54.727

根据堆栈跟踪并查看您的`processForm`方法，唯一可能导致 a 的对象`NullPointerException`是`loginobj`.

这一行应该实际返回一个`null`对象，当您打印用户的用户名时会在下一行引发异常。

```
loginobj = (LoginData)model.get("loginobj"); 
```

检查您是否在模型上正确设置了此对象，或者您是否使用不同的键访问它。

# android - 如何从主应用程序自动启动支持的应用程序

> ID：14399275
> 
> 赞同：1
> 
> 时间：2013-01-18T12:44:51.790
> 
> 标签：android, android-manifest

我有一个主应用程序 main1 和两个不同的提供程序应用程序 provider1、provider2。

mainapp 将通过 contentresolver 从 provider1,2 应用程序中获取数据。

所以我必须启动这个 provider1,2 应用程序，然后我将启动 mainapp 来填充数据。

当我们通过在主应用程序中添加 provider1,2 的 apk 来启动 mainapp.like 时，有什么方法可以自动触发 provider1,2 应用程序的启动。

请分享详细信息。

# python - 将事件驱动的龙卷风应用程序转换为线程或其他阻塞系统的选项有哪些？

> ID：14399278
> 
> 赞同：0
> 
> 时间：2013-01-18T12:44:54.287
> 
> 标签：python, tornado

我继承了一个相当大的代码库，它利用 tornado 来计算和服务大而复杂的数据类型（想象一个 1 MB 的 XML 文件）。目前有 8 个龙卷风实例正在运行以计算和提供这些数据。

这从一开始就是一个错误的设计决策，我面临着访问服务器的应用程序的许多超时。

我想在遗留代码库中更改尽可能少的代码行，因为我不想破坏任何已经在现场测试过的东西。我该怎么做才能将此系统转换为可以并行执行更多 xml 计算的线程系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:55:27.513

> 将此系统转换为可以并行执行更多 xml 计算的线程系统

如果有足够多的 Tornado 实例使计算资源饱和，那么迁移到线程模型可能不会获得太多性能。然而，摆脱阻塞代码有助于连接超时。

另一种选择是摆脱所有异步代码并使用`tornado.wsgi.WSGIApplication`. 这样，您可以在线程化的 WSGI 服务器上运行应用程序。[此处](http://www.tornadoweb.org/documentation/overview.html#wsgi-and-google-appengine)列出了 WSGI 模式中不可用的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:16:53.643

使用 Tornado 只接收非阻塞请求。要进行实际的 XML 处理，您可以生成另一个进程或使用像 celery 这样的异步任务处理器。使用 celery 将有助于您将来轻松扩展系统。事实上，使用这个模型，您只需要一个 Tornado 实例。

@Eren - 我不认为计算资源已经饱和。只是因为 Tornado 现在正在以阻塞模式服务请求，因此不会同时处理超过 8 个请求。

# request - 当我使用 HTTP 类型获取 RabbitMQ 消息时，出现“405 方法不允许”和“请求被中止”错误

> ID：14399280
> 
> 赞同：0
> 
> 时间：2013-01-18T12:44:59.570
> 
> 标签：request, httprequest, webclient, rabbitmq

我在 .NET VB.NET 中有这些代码：

```
Dim serverIP As String = "172.16.1.24"

    Dim localIP As String = "172.16.1.27-RMSDESKTOP"

    Dim port As Integer = 55672

    Dim apiAddr As String = "/api/queues/%2f/" & localIP & "/get"

    Dim requestAddr As String = "http://" & serverIP & ":" & port & apiAddr

    Debug.WriteLine(requestAddr)

    wb = New System.Net.WebClient

    While isConnect = True

    Dim postBody As String = My.Settings.body1    '' it is correct json parameters

wb.Headers.Add("Content-Type", "application/json")

    wb.Credentials = New System.Net.NetworkCredential("guest", "guest")

    Dim result As String = wb.UploadString(requestAddr, "POST", postBody)

    If result IsNot Nothing AndAlso result.Length > 0 Then

    Debug.WriteLine(Now.ToString & ":" & "RESPONSE:  " & result)

    End If 
```

`'405 Method not allowed' and 'request was aborted'`当我使用 HTTP 类型获取 RabbitMQ 消息时发生错误。

有时发生`'405 Method not allowed'`有时发生

```
'request was aborted' error. 
```

我们的用户名、密码、端口、队列名称和服务器 ip 都是正确的。我使用'PUT'方法尝试但也发生错误-->：底层连接已关闭，无法从传输连接读取数据。

参考：
[http ://hg.rabbitmq.com/rabbitmq-management/raw-file/rabbitmq_v3_0_1/priv/www/api/index.html](http://hg.rabbitmq.com/rabbitmq-management/raw-file/rabbitmq_v3_0_1/priv/www/api/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:58:28.710

利用：

```
Dim port As Integer = 15672 
```

代替

```
Dim port As Integer = 55672 
```

在 RabbitMQ 3.0 及更高版本中更改了端口 - 请参阅[RabbitMQ 博客](http://www.rabbitmq.com/blog/2012/11/19/breaking-things-with-rabbitmq-3-0/)

# android - 如何在样式中引用主题属性？

> ID：14399284
> 
> 赞同：12
> 
> 时间：2013-01-18T12:45:04.817
> 
> 标签：android, styles, themes

我有以下问题。我想自定义列表中行的外观，但在膨胀过程中抛出异常。

style.xml 中的一段代码

```
<style name="AppTheme.Main">     
    <item name="item_shadowColor">#000000</item>        
</style>
<style name="item_label">    
    <item name="android:shadowColor">?attr/item_shadowColor</item>        
</style> 
```

属性.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <attr name="item_shadowColor" format="color" />
</resources> 
```

list_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:id="@id/title"
        style="@style/item_label"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>

</LinearLayout> 
```

和例外

```
FATAL EXCEPTION: main
 android.view.InflateException: Binary XML file line #7: Error inflating class <unknown>
    at android.view.LayoutInflater.createView(LayoutInflater.java:606)
    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
    at ru.mts.goodok.adapter.CategoryListAdapter.getView(CategoryListAdapter.java:30)
    at android.widget.AbsListView.obtainView(AbsListView.java:2052)
    at android.widget.ListView.makeAndAddView(ListView.java:1820)
    at android.widget.ListView.fillDown(ListView.java:672)
    at android.widget.ListView.fillFromTop(ListView.java:732)
    at android.widget.ListView.layoutChildren(ListView.java:1673)
    at android.widget.AbsListView.onLayout(AbsListView.java:1882)
    at android.view.View.layout(View.java:11425)
    at android.view.ViewGroup.layout(ViewGroup.java:4232)
    at android.widget.RelativeLayout.onLayout(RelativeLayout.java:925)
    at android.view.View.layout(View.java:11425)
    at android.view.ViewGroup.layout(ViewGroup.java:4232)
    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
    at android.view.View.layout(View.java:11425)
    at android.view.ViewGroup.layout(ViewGroup.java:4232)
    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
    at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
    at android.view.View.layout(View.java:11425)
    at android.view.ViewGroup.layout(ViewGroup.java:4232)
    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
    at android.view.View.layout(View.java:11425)
    at android.view.ViewGroup.layout(ViewGroup.java:4232)
    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1516)
    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2505)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:154)
    at android.app.ActivityThread.main(ActivityThread.java:4945)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method)
 Caused by: java.lang.reflect.InvocationTargetException
    at java.lang.reflect.Constructor.constructNative(Native Method)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
    at android.view.LayoutInflater.createView(LayoutInflater.java:586)
    ... 39 more
 Caused by: java.lang.NumberFormatException: Invalid int: "?2130771972"
    at java.lang.Integer.invalidInt(Integer.java:138)
    at java.lang.Integer.parse(Integer.java:375)
    at java.lang.Integer.parseInt(Integer.java:366)
    at com.android.internal.util.XmlUtils.convertValueToInt(XmlUtils.java:123)
    at android.content.res.TypedArray.getInt(TypedArray.java:254)
    at android.widget.TextView.<init>(TextView.java:829)
    at android.widget.TextView.<init>(TextView.java:489)
    ... 42 more 
```

我做错了什么，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-19T15:20:16.453

问题已解决。我使用应用程序上下文创建适配器，当我将上下文更改为活动时，问题消失了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T12:56:33.263

尝试创建`themes.xml`文件并在其中添加以下行。

**主题.xml**

```
<style name="Theme">
   <item name="item_shadowColor">@style/item_label</item>
</style> 
```

**attrs.xml**
更改文件`format="reference"`中的。`attrs.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <attr name="item_shadowColor" format="reference" />
</resources> 
```

**样式.xml**

```
<style name="AppTheme.Main">     
    <item name="item_shadowColor">#000000</item>        
</style>

<style name="item_label">    
    <item name="android:shadowColor">#F240FF</item>        
</style> 
```

然后在将您的样式定义为 TextView 后，如下所示：

```
<TextView
    android:id="@id/title"
    style="@style/item_label"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"/> 
```

# ruby-on-rails - Rails 应用程序中杂志商店的数据模型

> ID：14399285
> 
> 赞同：0
> 
> 时间：2013-01-18T12:45:04.860
> 
> 标签：ruby-on-rails, ruby, database, model-view-controller, data-modeling

我想为在线杂志商店创建一个 rails 3.2.7 应用程序。我为这个应用程序设计了快速数据模型，但我不确定它是好是坏！？我有所有杂志的杂志表，我有特定杂志的所有版本的产品表，我有特定产品的所有页面的页面表。

`Magazine has_many :Product`

`Product has_many :Pages`和`belongs_to :Magazine`

`Page belong_to :product`

我创建了这个应用程序，但它有问题！例如在 routes.rb 我使用这个代码

```
resources :magazines do
  resources :products do
    resources :pages
  end
end 
```

但这不是真的！？我必须更改我的数据模型还是对这些应用程序有好处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:51:54.083

区分路线和模型之间的差异很重要。您创建的嵌入式路由只会更改每个模型所在的 url。它可用于跟踪对页面请求有用的参数。您应该确保为所有关系编写迁移。阅读[Rails 中的关系关联](http://guides.rubyonrails.org/association_basics.html)可能会有所帮助。

但基本上，您需要进行迁移，将相关项目的 id 添加到其关联字段。所以你最终会在你的表中添加一个`product_id`字段`magazines`

# symfony - 如何将 Assetic 与 CacheBustingWorker 和 twig 一起使用

> ID：14399288
> 
> 赞同：3
> 
> 时间：2013-01-18T12:45:14.477
> 
> 标签：symfony, twig, assetic

正如我所看到的，Assetic 在 CacheBusting 上取得了一些进展：
[https ://github.com/kriswallsmith/assetic#cache-busting](https://github.com/kriswallsmith/assetic#cache-busting)

但我真的不明白我应该如何使用它。
可以在树枝内使用吗：

```
{% stylesheets 'bundles/mybundle/css/fonts.css' 
               'bundles/mybundle/css/style.css'
               'bundles/mybundle/css/screen.css'
               filter='cssrewrite'
 %}
    <link rel="stylesheet" type="text/css" href="{{ asset_url }}" />
{% endstylesheets %} 
```

并使用通常的`assetic:dump`命令？

我必须将 CacheBustingWorker 挂在哪里？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-10-22T12:54:35.660

**Cache buster 现在是 symfony/AsseticBundle**（版本 >= 2.5.0）的一部分。

像这样在 composer.json 中更改 AsseticBundle 版本：

```
"symfony/assetic-bundle": "2.5.0", 
```

并像这样为您的 config.yml 文件中的资产激活缓存清除

```
assetic:
    workers:
        cache_busting: ~ 
```

我的 JS 文件现在看起来像这样：

```
web/bundles/js/projectname-876f9ee.js 
```

见[https://github.com/symfony/AsseticBundle/pull/119#issuecomment-28877145](https://github.com/symfony/AsseticBundle/pull/119#issuecomment-28877145)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-02T12:19:45.917

我最近一直在寻找如何做同样的事情。

我想出的解决方案是用我自己的类覆盖 Symfony 的 AssetFactory，并在其构造函数中添加 CacheBustingWorker。基本上，您创建一个如下所示的文件：

```
<?php
namespace YourSite\YourBundle\Factory;

use Symfony\Bundle\AsseticBundle\Factory\AssetFactory as BaseAssetFactory;
use Assetic\Factory\Worker\CacheBustingWorker;
use Symfony\Component\DependencyInjection\ContainerInterface;
use Symfony\Component\DependencyInjection\ParameterBag\ParameterBagInterface;
use Symfony\Component\HttpKernel\KernelInterface;

class AssetFactory extends BaseAssetFactory
{
    public function __construct(KernelInterface $kernel, ContainerInterface $container, ParameterBagInterface $parameterBag, $baseDir, $debug = false)
    {
        parent::__construct($kernel, $container, $parameterBag, $baseDir, $debug);
        // Add CacheBustingWorker
        $this->addWorker(new CacheBustingWorker(CacheBustingWorker::STRATEGY_CONTENT));
    }
} 
```

然后更改assetic.asset_factory.class 参数以指向配置中的这个新类。就我而言，我在 config.yml 中添加了以下内容：

```
parameters:
  assetic.asset_factory.class: YourSite\YourBundle\Factory\AssetFactory 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-07T11:15:37.537

使用当前的资产实现，我需要将您的代码更新为以下内容以使其正常工作。另请注意，如果您使用的是 xdebug，则必须将最大嵌套级别 - xdebug.max_nesting_level = 200 提高到 100 以上。

```
<?php

namespace YourSite\YourBundle\Factory;

use Symfony\Bundle\AsseticBundle\Factory\AssetFactory as BaseAssetFactory;
use Assetic\Factory\LazyAssetManager;
use Assetic\Factory\Worker\CacheBustingWorker;
use Symfony\Component\DependencyInjection\ContainerInterface;
use Symfony\Component\DependencyInjection\ParameterBag\ParameterBagInterface;
use Symfony\Component\HttpKernel\KernelInterface;

class AssetFactory extends BaseAssetFactory
{
    public function __construct(KernelInterface $kernel, ContainerInterface $container, ParameterBagInterface $parameterBag, $baseDir, $debug = false)
    {
        parent::__construct($kernel, $container, $parameterBag, $baseDir, $debug);
        // Add CacheBustingWorker
        $this->addWorker(new CacheBustingWorker(new LazyAssetManager(new BaseAssetFactory($kernel, $container, $parameterBag, $baseDir, $debug))));
    }
} 
```

希望这可以帮助某人

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-21T13:15:10.087

由于资产代码再次更改，主分支上的 LazyAssetManager 上不再需要 Stategy。

不要忘记更改您的`composer.json`文件：

```
{
    "kriswallsmith/assetic": "dev-master@dev",
    "symfony/assetic-bundle": "dev-master@dev"
} 
```

你现在只需要这个：

```
namespace YourSite\YourBundle\Factory;

use Symfony\Bundle\AsseticBundle\Factory\AssetFactory as BaseAssetFactory;
use Assetic\Factory\Worker\CacheBustingWorker;
use Symfony\Component\DependencyInjection\ContainerInterface;
use Symfony\Component\DependencyInjection\ParameterBag\ParameterBagInterface;
use Symfony\Component\HttpKernel\KernelInterface;

class AssetFactory extends BaseAssetFactory
{
    public function __construct(
        KernelInterface $kernel,
        ContainerInterface $container,
        ParameterBagInterface $parameterBag,
        $baseDir,
        $debug = false
    ) { 
        parent::__construct($kernel, $container, $parameterBag, $baseDir, $debug);
        // Add CacheBustingWorker
        $this->addWorker(new CacheBustingWorker());
    }
} 
```

不要忘记`php app/console cache:clear -e prod`在转储资产之前避免生成标准文件名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-10T13:14:42.583

```
assetic:
    workers:
        cache_busting: ~ 
```

是答案。

# android - 是否有选择地在清单中启用 android:enabled="@bool/tablet" 或 "@bool/phone" 的活动别名？

> ID：14399292
> 
> 赞同：1
> 
> 时间：2013-01-18T12:45:33.620
> 
> 标签：android, manifest, tablet

为了避免一些平板电脑/手机连接，我希望我的应用程序通过活动别名向自己发出一个意图，并使清单系统将其传递给主要活动（对于平板电脑）或新活动（对于手机）。

如果我的清单中有这个：

```
<activity-alias android:name="my.app.WebContent"
              android:targetActivity="my.app.activities.Home"/> 
```

那么一切都很好，并且

```
Intent {
    act=android.intent.action.VIEW dat=http://www.app.my/url
    cmp=my.app/.WebContent (has extras) } 
```

按预期交付。

但是，如果我的清单中有这个：

```
<activity-alias android:name="my.app.WebContent"
              android:enabled="@bool/has_one_pane"
              android:targetActivity="my.app.activities.WebContent"/>
<activity-alias android:name="my.app.WebContent"
              android:enabled="@bool/has_two_panes"
              android:targetActivity="my.app.activities.Home"/> 
```

在 values/res.xml 中有这个

```
<resources>
    <bool name="has_two_panes">false</bool>
    <bool name="has_one_pane">true</bool>
</resources> 
```

这在 values-large/res.xml 和 values-sw600dp/res.xml 中：

```
<resources>
    <item type="layout" name="content_frame">@layout/activity_item_twopane</item>
    <bool name="has_two_panes">true</bool>
    <bool name="has_one_pane">false</bool>
</resources> 
```

然后我的代码根据 PackageManager.resolveActivity() 将意图过滤为“无法交付”。

似乎 values/res.xml 覆盖了 values-anything/res.xml，即使 values-large 应该覆盖大型显示器的 values/res.xml。

这是Android中的错误，还是我误解了应该如何做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:44:32.400

不，它不受支持，因为诸如屏幕宽度（res/layout-w600dp）之类的东西可以随方向而变化，但谷歌显然没有注意到“最小宽度”（res/layout-sw600dp）不受此影响。请参阅[片段方向更改 - 比横向更好的测试](https://stackoverflow.com/questions/12513668/fragment-orientation-change-better-test-than-for-landscape)

[另请注意，如何指定仅适用于 Android 上的手机或平板电脑的活动中](https://stackoverflow.com/questions/13202805/how-to-specify-activities-that-are-only-for-phones-or-tablets-on-android/13202806#13202806)建议的解决方法不适用于竞争 <activity-alias> 因为您无法构造 ComponentName 以在名称名称的别名之间进行唯一选择。

（除非可以仅禁用一项目标活动并依靠清单中的排序来在备选方案之间进行交换，但这存在脆弱性问题。）

# javascript - p7EHCscript 与 tinymce

> ID：14399300
> 
> 赞同：2
> 
> 时间：2013-01-18T12:46:10.560
> 
> 标签：javascript, tinymce

我目前正在尝试弄清楚如何将外部脚本加载到 tinymce 中。该脚本是 p7EHCscript，用于根据较大 div 的高度使两个 div 等高。

我需要 p7EHC 脚本能够在 tinymce 编辑器中执行此操作，因此它看起来就像正在创建的最终页面。

我目前使用 tinymce 的设置是：

```
tinyMCE.init({

            // General options
            mode : "textareas",
            editor_selector : "mceEditor",
            editor_deselector : "mceNoEditor",
            remove_script_host : false,
            convert_urls : false,
            content_css : 'http://localhost/tmtphotography/css/mce.css',

            width: "1030",
            height : "480",

            theme : "advanced",
            plugins : "safari, pagebreak, style, layer, table, save, advhr, advimage, advlink, emotions, iespell, inlinepopups, insertdatetime, preview, media, searchreplace, print, contextmenu, paste, directionality, fullscreen, noneditable, visualchars, nonbreaking, xhtmlxtras, template,preview",
            file_browser_callback : "filebrowser",
            // Theme options
            theme_advanced_buttons1 : "save,preview,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect",
            theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
            theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
            theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,spellchecker,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,blockquote,pagebreak,|,insertfile,insertimage,imgae,media,link",
            theme_advanced_toolbar_location : "top",
            theme_advanced_toolbar_align : "left",
            theme_advanced_statusbar_location : "bottom",
            theme_advanced_resizing : true,

             theme_advanced_font_sizes : "10px,12px,13px,14px,16px,24px",
     font_size_style_values : "xx-small,x-small,12pt,medium,large,x-large,xx-large",

            // Skin options
            skin : "o2k7",
            // Example content CSS (should be your site CSS)

    });
  ` 
```

任何有助于理解如何进行此操作的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:49:28.570

我假设您想将 scipt 作为脚本标签添加到文档头：

```
 <script type="text/javascript" src="javascript/p7EHCscripts.js"></script> 
```

由于tinymce 使用自己的iframe 和自己的文档，我们需要处理这个iframe。这是必要的代码

```
var iframe_id = 'your_editor_id' + '_ifr'; // place your editor id here+'_ifr'
with(document.getElementById(iframe_id).contentWindow) {

  var h = document.getElementsByTagName("head");
  if (!h.length) return;
  var scripttag = document.createElement("script");
  scripttag.type = "text/javascript";
  scripttag.src = "http://myserver.com/my_dir1/my_dir2/javascript/p7EHCscripts.js"; // example
  h[0].appendChild ( scripttag );
} 
```

# css - CSS 元素调整时 a: hover

> ID：14399304
> 
> 赞同：2
> 
> 时间：2013-01-18T12:46:15.900
> 
> 标签：css, hover

我有一个`<li>`带有 2px 边框底部的菜单项作为下划线和一个粗体悬停，它使其他元素在悬停时移动。我试图更改悬停时的填充但没有结果。（我认为问题是边框底部添加的下划线）

```
#menu { 
     list-style: none outside none;
     margin-top:40px; 
     text-align: center}

#menu li { 
     margin-right: 26px;
     display:inline;}

#menu a:hover {
     border-bottom:2px solid #ac9962;
     font-size:16px;
     letter-spacing: -2px;
     white-space: nowrap;
     font-weight:bold;}

<ul id="menu">
        <li><a href="www.youtube.com">Menu1</a></li>
        <li><a href="www.youtube.com">Menu2</a></li>
        <li><a href="www.youtube.com">Menu3</a></li>
        <li><a href="www.youtube.com">Menu4</a></li>
      </ul> 
```

[http://jsfiddle.net/tGcfh/](http://jsfiddle.net/tGcfh/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:53:24.197

使悬停时间的字体大小与悬停时间的正常时间相同 font-size:16px 存在并且正常时间 font-size:14px 存在...并且悬停时间字体粗体粗体存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:54:24.043

尝试类似的东西：

**HTML**

```
<div id="menu_container">
  <ul>
    <li><a href="#">Link one</a></li>
    <li><a href="#">Link two</a></li>
    <li><a href="#">Link three</a></li>
  </ul>
</div> 
```

**CSS**

```
#menu_container {
  width: 100%;
  display: table;
}

#menu_container ul li {
  display: table-cell;
  text-align: center;
  vertical-align: middle;
  height: 50px;
}

#menu_container ul li a {
  font-size: 14px;
}

#menu_container ul li a:hover {
  font-size: 24px;
} 
```

这将按预期完美运行，但请记住，在 IE7 和以下版本中不支持 display:table。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T12:55:52.280

只需为悬停提供以下CSS。您已更改粗体、边框底部和大小，这会导致对齐问题。否则，您必须为每个链接指定指定宽度。

```
#menu2 a:hover {
text-decoration:underline;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T08:11:48.593

如果改变这个

```
#menu a:hover {
border-bottom:2px solid #ac9962;
font-size:16px;
letter-spacing: -2px;
white-space: nowrap;
font-weight:bold;} 
```

删除

```
font-size:16px;
letter-spacing: -2px;
font-weight:bold; 
```

这可能会解决您的问题

# linux - Nginx：如何查看处于下载状态的文件？

> ID：14399308
> 
> 赞同：1
> 
> 时间：2013-01-18T12:46:21.437
> 
> 标签：linux, web-services, web-applications, nginx

我还在等待答案。

我需要查看此时是否有人正在下载特定文件。最初的问题：我想知道何时有人中断下载文件。

服务器配置：

```
server 
{

    listen 80;
    server_name mysite.com;

    location /ugp/
    {
        alias /www/ugp/;
    }
    break;
} 
```

用户可以从[http://mysite.com/ugp/](http://mysite.com/ugp/)下载文件，例如[http://mysite.com/ugp/1.mp3](http://mysite.com/ugp/1.mp3)。

**更新**。

如何分析access.log并不那么明显。有些浏览器在用户停止下载（谷歌浏览器）时会发送 206 代码，有些则不会（HTC 播放器、移动应用程序）：

```
85.145.8.243 - - [18/Jan/2013:16:08:41 +0300] "GET /ugp/6.mp3 HTTP/1.1" 200 10292776 "-" "HTC Streaming Player htc_wwe / 1.0 / htc_ace / 2.3.5"
85.145.8.243 - - [18/Jan/2013:16:08:41 +0300] "GET /ugp/2.mp3 HTTP/1.1" 200 697216 "-" "HTC Streaming Player htc_wwe / 1.0 / htc_ace / 2.3.5"
85.145.8.243 - - [18/Jan/2013:16:09:44 +0300] "GET /ugp/7.mp3 HTTP/1.1" 200 4587605 "-" "HTC Streaming Player htc_wwe / 1.0 / htc_ace / 2.3.5" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:51:08.330

为了提供更大的灵活性，您可以添加 PHP 服务器，并发布 URL，例如

```
 http://mysite.com/download.php?file=2.mp3 
```

从它的`download.php`位置（例如）读取文件`/var/www/files/2.mp3`，有一个建议的代码。（[标题](http://php.net/manual/en/function.header.php)）

```
<?php

  // Here you know precisely that a download is requested

  $path = '/home/var/www/files';
  $file = "$path/" . $_GET['file']; // check user input!
  $size = filesize($file);
  $read = 0;

  $state = 'downloading ' . $file;

  // echo headers for a binary file download 

  @ $f = fopen ($file, 'r');
  if ( $f ) {
    // Output 100 bytes in each iteration
    while (($chunk = fread($f, 100)) !== false) {
      // specify somewhere $state, still downloading
      echo $chunk;
      $read += strlen($chunk);
    }
    fclose ($f);
  }
  if ($read >= $size) 
    $state = 'done';
  else
    $state = 'fail';
?> 
```

这是一个提供算法的例子——*根本没有*经过测试！但应该与下载代码非常接近（通常使用*readfile*，但它会一次性读取文件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:07:08.187

看看 nginx[扩展状态模块](http://wiki.nginx.org/Extended_status_module)。

# php - 清空数组的最有效方法

> ID：14399314
> 
> 赞同：5
> 
> 时间：2013-01-18T12:46:37.020
> 
> 标签：php

我有一个包含多个键、值、对象等的数组。我需要清空该数组，但我想以最有效的方式进行操作。

我能想到的最好的是：

```
foreach ($array as $key => $val) unset($array[$key]); 
```

但是我不喜欢必须循环遍历数组来清空它的想法。肯定有一种很好的巧妙/聪明的方法可以做到这一点，而不会浪费内存来创建一个新数组？

注意：我不确定自己在再次将数组创建为新数组时是否需要额外的内存。如果没有，则 $array = new array(); 将是“清空”它的好方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T12:47:40.127

只需尝试：

```
$array = array(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T12:54:58.830

这在很大程度上取决于你的意思。

要清空当前参考，您可以随时执行

```
$array = array(); 
```

从范围中完全删除当前实例

```
unset($array); 
```

不幸的是，这两种情况并不一定意味着与每个元素关联的内存被释放。

PHP 为您的变量使用称为“引用”的东西。您的变量实际上是指向数据的标签或引用，而不是数据的实际容器。PHP[垃圾收集器](http://php.net/manual/en/features.gc.collecting-cycles.php)可以提供有关此主题的更多见解。

现在看看这个[例子](http://php.net/manual/en/features.gc.refcounting-basics.php#example-387)，取自文档：

```
$a = "new string";
$c = $b = $a;
xdebug_debug_zval( 'a' );# a: (refcount=3, is_ref=0)='new string'
unset( $b, $c );
xdebug_debug_zval( 'a' );# a: (refcount=1, is_ref=0)='new string' 
```

不幸的是，这适用于您的所有变量。包括数组。恐怕清理与数组相关的内存是一个完全不同的主题。

* * *

我注意到评论中关于在每个单独的键上使用 unset() 的讨论更长。

这感觉是非常糟糕的做法。考虑以下代码：

```
class A{
    function __construct($name){$this->name=$name;}
    function __destruct(){echo $this->name;}
}

$a=array();
$b=array();
$c=array();
for($i=0;$i<5;$i++) {
    $a[]=new A('a');
    $b[]=new A('b');
    $c[]=new A('c');
}

unset($a);
$b=array();

echo PHP_EOL.'done'.PHP_EOL; 
```

这将输出：

```
aaaaabbbbb
done
ccccc 
```

当对特定数据结构的引用达到 0 时，它会从内存中清除。两者`=array()`都会`unset`做同样的事情。

现在，如果您实际上不需要`array()`，可以使用`null`：

```
$array=null; 
```

这会将标签保留在内存中，但会删除它对任何特定数据的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T12:49:04.353

这很简单：

```
$array = array(); 
```

$array 将是现有的数组类型（但为空），并且您的数据可以稍后从内存中被垃圾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T12:48:20.980

嗯...为什么不：`$array = array();`？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T12:57:59.230

正如 Suresh Kamrushi 指出的，我可以使用 array_keys：

```
foreach (array_keys($array) as $key) unset($array[$key]); 
```

这可能是目前最好的解决方案.. 但我相信很快有人会想出更好的东西:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-18T13:07:58.617

试试这个：

```
// $array is your original array

$array = array_combine( array_keys( $array ), array_fill( 0, count($array), 0 ) ); 
```

以上将使您的数组空白，保持键不变。

希望这可以帮助。

# xcode - XCODE 4.2.3 到 4.5.2 的迁移

> ID：14399326
> 
> 赞同：0
> 
> 时间：2013-01-18T12:47:06.670
> 
> 标签：xcode

我在 4.2.3 中开发了在模拟器上运行良好的应用程序，之后我将 Xcode 迁移到 4.5.2。

当我在 iphone 模拟器 6 上运行应用程序时，它运行良好，而在设备上运行时出现错误“无法启动应用程序没有这样的文件或目录 app.app/application_name”。

同时我创建了一个新项目并直接在设备上运行它运行良好。

它的意思是我必须设置旧文件？

有谁能够帮我？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:53:05.907

尝试以下步骤：

断开您的设备。

从您的设备中删除该应用程序。

退出xcode（不要只是简单地关闭窗口，退出它）

删除派生数据文件夹（~/Library/Developer/Xcode/DerivedData/- gbrvhlvwmpiobxdujegtghggrffp - 或类似的东西）

现在启动 Xcode，连接设备并运行项目。它应该可以正常工作。

它在那里。

# intuit-partner-platform - 如何获取 Intuit QB 公司 ID、QB Windows 的 agentid，就像在 QB 在线获取此 url https://qbo.intuit.com/qbo1/rest/user/v2/

> ID：14399327
> 
> 赞同：0
> 
> 时间：2013-01-18T12:47:10.717
> 
> 标签：intuit-partner-platform

如何获取 Intuit QB 公司 ID、Agentid、QB Windows 的登录名，就像在 QB 中通过此 url [https://qbo.intuit.com/qbo1/rest/user/v2/realmid在线获取](https://qbo.intuit.com/qbo1/rest/user/v2/realmid)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:55:58.440

QuickBooks 桌面无法通过 Intuit Data Services 获得这些信息。

其中一些信息甚至不适用：

*   公司 ID - 你不需要这个，你已经有一个来自 OAuth/OpenID 连接的 realmID

*   代理 ID - 不适用

*   LoginName - 不可用，有时不适用

# api - 超过 Google Geocode API 使用限制后如何解锁？

> ID：14399329
> 
> 赞同：4
> 
> 时间：2013-01-18T12:47:14.460
> 
> 标签：api, drupal-7, openlayers, google-geocoder

现在已经搜索了 2 天的答案，但运气不佳。

我正在开发一个 Drupal 7 站点，该站点具有使用 Google Geocoder API 从地址字段自动填充的 Geofield 字段，但几天前它停止工作：

> 例外：Google API 返回错误状态。\n状态：geocoder_google() 中的 OVER_QUERY_LIMIT（/home/.../modules/geocoder/plugins/geocoder_handler/google.inc 的第 52 行）。

我可以删除向 Google API 发送过多请求的邻近搜索过滤器，但我无法继续，因为每次尝试向数据库添加新记录时都会遇到上述错误（它只进行一次查找以获取来自地址字段的地理编码但失败）。有什么方法可以从 Google 的 API 中取消阻止我的网站或重置我的使用情况？我添加了一个 API 密钥，但无济于事。直到最近，这一切都很好，我想这是我在不知不觉中超过了使用限制的时候。

我的 API 经验有限，并且是 Drupal/PHP 初学者，所以请温柔一点！如果需要，很乐意提供更多信息、代码、错误消息等。正在使用的相关 Drupal 7 模块是 OpenLayers、OpenLayers Proximity、Geofield、GeoPHP 和 Geocoder。感谢任何人都可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T12:35:10.347

来自[谷歌地理编码文档](https://developers.google.com/maps/documentation/geocoding/#Limits "谷歌地理编码文档")：

> 使用 Google 地理编码 API 的查询限制为每天 2,500 个地理定位请求。（Google Maps API for Business 的用户每天最多可以执行 100,000 个请求。）强制执行此限制是为了防止滥用和/或重新利用 Geocoding API，并且此限制将来可能会更改，恕不另行通知。此外，我们强制执行请求速率限制以防止滥用服务。如果您超过 24 小时限制或以其他方式滥用服务，Geocoding API 可能会暂时停止为您工作。如果您继续超过此限制，您对 Geocoding API 的访问可能会被阻止。

所以，我猜你得等24小时，或者升级到商业版。

# android - 检测缺少后置摄像头

> ID：14399333
> 
> 赞同：8
> 
> 时间：2013-01-18T12:47:30.327
> 
> 标签：android, android-camera

我的应用具有需要后置摄像头的功能。是否有前置摄像头与我的需求无关。事实证明，在所有情况下，建立一个强大的程序来检测是否存在后置摄像头是很棘手的。例如，使用 HTC Evo 3D 的用户抱怨该应用程序说没有后置摄像头（显然有），我也收到了其他用户的许多类似投诉。

这是一件很难测试的事情，因为尽管我有很多设备，但我没有只有前置摄像头的设备，比如 Nexus 7，或者用户提到的任何型号。

这就是我所拥有的，这是取自本网站上其他答案的代码：

```
boolean rearCameraFound = false;
    if(BUILD_VERSION > 8){
        int cameraCount = 0;
        Camera cam = null;
        Camera.CameraInfo cameraInfo = new Camera.CameraInfo();
        cameraCount = Camera.getNumberOfCameras();
        for ( int camIdx = 0; camIdx < cameraCount; camIdx++ ) {
            Camera.getCameraInfo( camIdx, cameraInfo );
            if ( cameraInfo.facing == Camera.CameraInfo.CAMERA_FACING_BACK  ) {
                try {
                    cam = Camera.open( camIdx );
                    Log.d("TAG", "Rear camera detected");
                    rearCameraFound = true;
                } catch (RuntimeException e) {
                    Log.e("TAG", "Camera failed to open: " + e.getLocalizedMessage());
                }
            }
            if ( cameraInfo.facing == Camera.CameraInfo.CAMERA_FACING_FRONT ) {
                Log.d("TAG", "Front camera detected");
            }
        }
        return rearCameraFound;
    }else{
        if (context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA)){
            // this device has a camera
            return true;
        } else {
            // no camera on this device
            return false;
        }
    } 
```

我现在用这个更简单的版本替换了这段代码：

```
PackageManager pm = context.getPackageManager();
return pm.hasSystemFeature(PackageManager.FEATURE_CAMERA); 
```

但是，我不知道 Nexus 7 会发生什么，例如，只有前置摄像头。这会返回真实吗？

我正在寻找可以确定是否有后置摄像头的代码！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T12:54:27.177

Nexus 7（只有一个前置摄像头）返回 false `FEATURE_CAMERA`，您可以使用`FEATURE_CAMERA_FRONT`. 看看这个[讨论](https://stackoverflow.com/a/5266165/1626878)。

现在，通过使用上述方法，您可以确保至少有一个摄像头。所以现在，您可以查看手机中的摄像头数量，如果大于一个，那么肯定会有后置摄像头。

```
import android.hardware.Camera;

int numCameras = Camera.getNumberOfCameras();
if (numCameras > 1) {
  rearCamera = true;
} 
```

这是相当棘手的。但仅此而已，我现在能想到的。试一试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-13T08:34:30.153

使用这个片段。请注意，这只适用于 API 9 或更高版本。

```
private static boolean checkCameraFacing(final int facing) {
    if (getSdkVersion() < Build.VERSION_CODES.GINGERBREAD) {
        return false;
    }
    final int cameraCount = Camera.getNumberOfCameras();
    CameraInfo info = new CameraInfo();
    for (int i = 0; i < cameraCount; i++) {
        Camera.getCameraInfo(i, info);
        if (facing == info.facing) {
            return true;
        }
    }
    return false;
}

public static boolean hasBackFacingCamera() {
    final int CAMERA_FACING_BACK = 0;
    return checkCameraFacing(CAMERA_FACING_BACK);
}

public static boolean hasFrontFacingCamera() {
    final int CAMERA_FACING_BACK = 1;
    return checkCameraFacing(CAMERA_FACING_BACK);
}

public static int getSdkVersion() {
    return android.os.Build.VERSION.SDK_INT;
} 
```

这无需打开相机。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-06T08:58:16.873

对于前置摄像头

```
Context context = this; //If its Activity

// Context context=getActivity(); If its a Fragment

PackageManager packageManager = context.getPackageManager();

if (packageManager.hasSystemFeature(PackageManager.FEATURE_CAMERA_FRONT)) {

    Log.i("CameraLog", "Front Camera Available");

} else {

    Log.i("CameraLog", "No Front Camera Available");
      } 
```

用于后置摄像头

```
Context context = this; //If its an Activity

// Context context=getActivity(); If its a fragments 

PackageManager packageManager = context.getPackageManager();

if (packageManager.hasSystemFeature(PackageManager.FEATURE_CAMERA)) {

    Log.i("CameraLog", "Back Camera is Available");

} else {

    Log.i("CameraLog", "No Back Camera Available");

      } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-18T22:24:33.420

如果设备只有一个摄像头，它可以只有后置摄像头，或者只有前置摄像头，首先检查后置摄像头是否存在：

*   检查前置摄像头是否存在，但有两个摄像头的设备明显有前置摄像头
*   检查设备是否只有一个摄像头，但它可以有后置或前置摄像头
*   最终结果：如果设备有前置摄像头且只有一个摄像头，则后置摄像头不存在

```
private boolean backCameraExists() {
    boolean isFrontExists = getApplicationContext().getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA_FRONT);
    if (isFrontExists && (Camera.getNumberOfCameras()<2)) {
        return false;
    }
    return true;
} 
```

# ruby-on-rails - 如何将新闻源中的项目排序为 last_active_at？

> ID：14399334
> 
> 赞同：1
> 
> 时间：2013-01-18T12:47:31.067
> 
> 标签：ruby-on-rails, postgresql, database-design, social-networking, feed

在这个问题中，我有两个数据库表：

*   发布（has_many :comments）
*   ActivityFeed (belongs_to item, :polymorphic)
*   评论 (belongs_to :post)

假设在 facebook 的一个组内发生了以下顺序动作：

1.  用户 A 发布了状态“状态 1”
2.  用户 B 发布了状态“状态 2”

然后这两个**帖子**中的每一个都触发了该组的 FeedItem (Activity) 的创建。

现在，当用户加载页面时，提要活动按 created_at/updated_at 排序。提要活动是一组多态的对象（可以是帖子、照片、投票、文件...）。

如果稍后用户 A 评论了用户 B 的帖子，则提要的正确顺序现在应该是：

1.  “状态 2”
2.  “状态 1”

那么当用户 A 评论“状态 2”时会发生什么？我是否必须找到相关的帖子（添加评论的位置）并更新与帖子相关的活动的时间戳？

我需要一些建议。谢谢！

* * *

**更新**

```
class Comment < ActiveRecord:Base
  belongs_to :post, touch: true
end

class Post < ActiveRecord:Base
  has_many :comments
  act_as_activity -> on_create will create a Activity representing this object
end

class Activity < ActiveRecord:Base
  belongs_to :item, :polymorphic => true
  belongs_to :parent, :polymorphic => true
  belongs_to :user
end 
```

因此，提要查询将查找活动表，因为提要中可以有多种类型的对象。并且在评论帖子时必须刷新此表中的时间戳，因为查询是在 Activity 表中完成的：

```
SELECT * FROM Activity 
              ORDER BY updated_at 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:00:44.630

如果我理解正确，帖子应该以“最近”的顺序显示。在帖子上添加评论应该刷新“最近”时间。

Here's something to try. There's a options for an belongs_to association called :touch. By adding this option, the addition of a Comment on a Post should cause the updated_at field on the Post to be updated whenever a Comment is added (or deleted) from the association.

[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

For example:

```
class Comment < ActiveRecord:Base
  belongs_to :post, touch: true
end

class Post < ActiveRecord:Base
  has_many :comments
end 
```

then you do your sort on the Post instance's :updated_at field.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:56:17.000

Using bdares' idea of using an after_create callback it might look something like this.

```
class Comment
  belongs_to :post, touch: true
  after_create do 
     self.post.activity.last_update_at = Time.now
     self.post.activity.save!
  end
end 
```

This means that you're sorting `Activity` by that `last_update_at` field.

# eclipse - 如何在 Blackberry 10 模拟器中安装 .bar 文件

> ID：14399335
> 
> 赞同：7
> 
> 时间：2013-01-18T12:47:32.050
> 
> 标签：eclipse, eclipse-plugin, blackberry-simulator, blackberry-eclipse-plugin, blackberry-10

我有 1 个从 eclipse 插件生成的 .bar 文件。

现在我想在 Blackberry 10 模拟器中测试那个 .bar 文件。

如何测试该应用程序？

我已经成功安装了黑莓模拟器 10 Dev Alpha 并配置了 IP 地址。

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-24T04:37:37.457

签署 bar 文件后，请将以下行粘贴到命令行中 *

> blackberry-deploy -installApp 192.168.177.131 -password 1234 hello.bar

*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:52:40.523

我能够使用这个 tut 让剧本模拟器工作：

[http://blog.joelambert.co.uk/2012/02/07/getting-started-with-phonegap-on-blackberry-playbook/](http://blog.joelambert.co.uk/2012/02/07/getting-started-with-phonegap-on-blackberry-playbook/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T11:45:22.797

当您说您使用的是 Eclipse 插件时，您是指 QNX Momentics IDE（它是本机 BlackBerry 10 IDE，但基于 Eclipse）吗？如果是这样，这是我采取的步骤。

如果您正在运行模拟器，请确保打开了开发模式。

点击 Run Menu -> Run Configurations 为运行配置选择“Simulator-Debug”（注意模拟器需要运行 x86 编译的二进制文件而不是 ARM）你提到你已经设置了 IP 地址，所以模拟器应该显示为目标。

我也喜欢设置自动构建选项。

应用这些设置并关闭。

现在运行，IDE 应该构建代码，并将其部署到您的模拟器。![在此处输入图像描述](../Images/cbd2ba7122bcf306ce454ae67e5abf25.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T19:07:42.633

如果您只有 .bar，您可以使用 vnBB10 工具在设备或模拟器中安装应用程序。[http://forums.crackberry.com/blackberry-10-os-f269/how-get-bb10-hardware-id-sideload-app-bar-file-into-blackberry-10-a-780773/](http://forums.crackberry.com/blackberry-10-os-f269/how-get-bb10-hardware-id-sideload-app-bar-file-into-blackberry-10-a-780773/)

# linux - GWT 编译器在 Linux 和 Windows 中的行为不同

> ID：14399340
> 
> 赞同：1
> 
> 时间：2013-01-18T12:47:44.960
> 
> 标签：linux, windows, internet-explorer, gwt

我们有一个 GWT 应用程序。我们使用 Maven 3 构建并运行 GWT 应用程序。当我们在 Windows 7 上构建和运行并在 Windows 上的 IE 上进行测试时，该应用程序运行良好。但是，当我们在 Linux 上编译和运行应用程序，然后在 Windows 上的 IE 上进行测试时，应用程序看起来会有所不同。为了排除客户端问题：我们在完全相同的客户端上进行测试——Windows 7 上的 Internet Explorer。进一步调查显示，Linux 服务器上的 Javascript 与 Windows 服务器上的 Javascript 不同。

有谁知道为什么 GWT 在 Linux 和 Windows 上的行为不同？我们可以做什么让 GWT 在 Windows 和 Linux 上表现相同。我们使用 Maven 3 编译和运行 gwt。

这是GWT的插件配置：

```
<插件>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>gwt-maven-plugin</artifactId>
  <版本>2.5.0</版本>
  <执行>
    <执行>
      <目标>
        <目标>编译</目标>
        <goal>i18n</goal>
        <goal>generateAsync</goal>
      </目标>
    </执行>
  </执行>
  <配置>
    <runTarget>MyApplication.html</runTarget>
    <hostedWebapp>${webappDirectory}</hostedWebapp>
    <i18nMessagesBundle>nl.my.app.client.Messages</i18nMessagesBundle>
    <inplace>真</inplace>
  </配置>
</插件>

```

这是模块配置：

```
<?xml 版本="1.0" 编码="UTF-8"?>
<模块重命名为='MyApplication'>
    <inherits name='com.google.gwt.user.User' />
    <inherits name="com.google.gwt.i18n.I18N" />
    <继承名称='nl.my.module' />
    <inherits name="com.sencha.gxt.ui.GXT" />
    <inherits name="com.google.common.collect.Collect" />
    <inherits name='com.google.gwt.user.Debug' />
    <继承名称='nl.my.othermodule' />

    <入口点类='nl.my.MYApplication' />

    <源路径='客户端' />
    <源路径='共享' />

    <set-configuration-property name="UiBinder.useSafeHtmlTemplates" value="true" />

    <extend-property name="locale" values="nl_NL" />
</模块>

```

使用以下命令构建和运行应用程序：mvn gwt:run

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:52:08.913

您可能在两个不同的系统上有不同的 JDK。确保 maven 使用的 JDK 相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:29:10.337

我们发现了问题 -**兼容模式**：如问题中所述，问题仅发生在 Internet Explorer (IE) 中。当我们通过*非本地*地址访问应用程序时，会自动启用 IE 的兼容模式。在兼容模式下，IE 的行为略有不同。这就是为什么当我们确实通过*localhost*访问应用程序时- 在我们的开发工作站上 - IE 没有启用兼容模式并且应用程序看起来应该如此。

通过在应用程序的单个 html 文件的 head 部分添加以下内容解决了问题：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" > 
```

# c# - 如何从另一个html（客户端）按钮控件调用asp按钮控件单击事件？

> ID：14399341
> 
> 赞同：0
> 
> 时间：2013-01-18T12:47:45.523
> 
> 标签：c#, jquery, asp.net

我正在处理 ASP.NET Gridview 行删除，它工作正常。但是当我尝试添加弹出删除确认时，出现了一些问题。

我的删除按钮标签是：

```
<asp:TemplateField>
<ItemTemplate>
   <asp:Button  ID="btnDelete" runat="server" CssClass="CoolButtons" Text="Delete"           CommandName="Delete"  OnClick="btnEdit_Click" CommandArgument='<%# Container.DataItemIndex%>'/>
 </ItemTemplate>
</asp:TemplateField> 
```

现在，我为 popup 添加了一些脚本。注意：我使用隐藏字段来使用服务器端删除事件的值。

```
//***** 'Yes' button Click on Popup *****
            $("#btnYes").click(function (e) {
                HideDialog();
                e.preventDefault();
            });

            //***** 'No' Button click on Popup *****
            $("#btnNo").click(function (e) {

                $('input[id="hdnConfirmDelete"]').val("no");
                HideDialog();
                e.preventDefault();
            });

            //***** 'Delete' Button click on server ****
            $('input[value="Delete"]').click(function (e) {
               ShowDialog(true);
               e.preventDefault();

            });
 //**** Function to Open Dialog ***
            function ShowDialog(modal) {
                $("#overlay").show();
                $("#dialog").fadeIn(300);

                if (modal) {
                    $("#overlay").unbind("click");
                }
                else {
                    $("#overlay").click(function (e) {
                        HideDialog();
                    });
                }
            }
            //**** Function to Close Dialog ****
            function HideDialog() {
                $("#overlay").hide();
                $("#dialog").fadeOut(300);
            } 
```

现在的问题是我无法触发`OnClick="btnEdit_Click"`，我知道它的服务器端。`OnClick`当我单击`Yes`删除确认对话框上的“”按钮时，有什么方法可以触发删除按钮的事件？注意：对话框由简单的 HTML 标记组成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:09:54.983

当您编写`e.preventDefault()`它时，它会阻止按钮的原始工作意味着服务器端代码执行。
所以用这个

```
 $("#btnYes").click(function (e) {
            HideDialog();
        }); 
```

删除 e.preventDefault();
这是一个链接，您可以从中更好地理解

[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

编辑1： -

用这个

```
 $("#btnYes").click(function (e) {
            $('input[id="hdnConfirmDelete"]').val("yes");
            HideDialog();
        }); 
```

# javascript - 获取带有外部参数的 couchDB 文档

> ID：14399346
> 
> 赞同：-1
> 
> 时间：2013-01-18T12:48:12.357
> 
> 标签：javascript, rest, view, map, couchdb

我有一个包含不同文档的 couchDB 数据库。我需要在我的 Web 应用程序上使用它们，所以当用户在应用程序上输入一些词时，我会从数据库中获取该文档。这是我的 _desing 文件

```
{
   "_id": "_design/recuperar",
   "_rev": "3-6787751eb0ed728b482ef7b06658e8da",
   "language": "javascript",
   "views": {
       "grafos": {
           "map": "function(doc) {\n    var value;\n    if (doc.nome== 'Egypt') {         \n            value = [doc.nodos, doc.links];\n            emit(doc.nome, value);       \n    }\n}"
       }
   }
} 
```

它有效，但我想要的是“埃及”将是用户搜索内容的变量。那可能吗？？还是我必须为每个搜索/文档做不同的视图？？？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:54:58.270

您可以在查询 .../?user_search=foo 之后添加用户搜索参数，然后从您的视图中访问 var user_search，这有意义吗？您可以在此处查看更多信息： [http ://wiki.apache.org/couchdb/Formatting_with_Show_and_List](http://wiki.apache.org/couchdb/Formatting_with_Show_and_List)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T19:04:36.723

只需从您的视图中删除此条件并以标准方式`if (doc.nome== 'Egypt')`使用[查询 API ：](http://wiki.apache.org/couchdb/HTTP_view_API#Querying_Options)`?key='Egypt'`

# html - 本地主机和 Web 服务器之间的 DOMPDF 输出不同

> ID：14399361
> 
> 赞同：0
> 
> 时间：2013-01-18T12:49:20.487
> 
> 标签：html, codeigniter, dompdf

我刚刚在我们的应用程序中成功使用了 dompdf 函数库。我对它在 localhost 中的工作方式没有任何问题，我能够将我自己的设计 html 视图转换为 pdf，带有蓝色标题和使用 html 表格标签的表格格式输出。但是，当我在我们的 Web 服务器中上传文件时，它会在 localhost 中返回不同的输出。虽然它返回一个输出，但标题不再有颜色，表格格式也消失了。任何人都可以帮助找出并解决这个问题吗？非常感谢。下面显示了本地主机和服务器中的输出 ![本地主机输出在这里](../Images/7d68f8cafd789f01b71fa41ebee8cc57.png)

![在此处输入图像描述](../Images/b2dd8aa0fc8d668eb3d14e1b5a2b72bd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T21:56:01.993

如果您提供页面的 head 部分，那将有很大帮助。

如果您在 Windows 上：在本地，大写字母与否没有区别。但在网上确实很重要。所以检查是否

# knockout.js - 如何从父模板中的函数填充 foreach 模板？

> ID：14399363
> 
> 赞同：0
> 
> 时间：2013-01-18T12:49:46.253
> 
> 标签：knockout.js

我想要实现的是`LoadVenues()`填充嵌套 foreach 模板的函数：

我有一个 Providers 数组，其中有一个 Provider.ProviderVenues 集合 - 我不希望为每个 Provider 填充 ProviderVenues。我希望用户能够单击提供者，然后将单击的提供者的 ProviderVenues 集合填充为“按需”。

我有一个“提供者”的淘汰赛模板，从 Web 服务加载。

```
<tbody data-bind="foreach: {data: providers}"> 
```

该模板列出了每个 Provider，每个 Provider 都包含一个链接，单击该链接会展开 Bootstrap Accordion 并调用 ViewModel 函数`LoadVenues()`

```
<td>
    <a href="#"  data-toggle="collapse" data-bind="attr: { 'data-target': DomId }, click: $parent.LoadVenues">Click to expand and see Venues</a>

    <div data-bind="attr: { 'id': Id }" class="collapse" >
        Venues list:                                            
        <ul data-bind="foreach: {data: ProviderVenues}">
            <li data-bind="text: Name"></li>
        </ul>

    </div>
</td> 
```

并在 ProvidersViewModel...

```
function providersViewModel() {
    var obj = {};

    obj.providers = ko.observableArray();

    function loadProvidersFromSvc() {
        var url = '/api/providersvc/GetAllProviders';   
        $.getJSON(url,
            function (data) {            
                obj.providers.removeAll();
                var results = ko.observableArray();
                ko.mapping.fromJS(data.Records, {}, results);
                for (var i = 0; i < results().length; i++) {
                    obj.providers.push(results()[i]);
                };
            }
        );
    };

    function loadVenues(record) {
      alert('clicked ' + record.Id());
      //todo: call $.getJSON, get Venues by Provider Id and somehow get this data into the nested template.
    }

    obj.LoadVenues = loadVenues;
} 
```

我真正想做`loadVenues()`的是通过 Provider Id（我可以这样做）从 web 服务中提取 Venue 数据，并将*检索到的 ProviderVenues 数据绑定到被 clicked 的嵌套模板*。

我对如何做到这一点感到完全困惑，并认为我可能走错了路。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:57:01.570

将 LoadVenues 函数移动到 ProviderViewModel，因为它属于那里，然后从那里加载 observableArray。如果您真的，真的需要从父级执行，则单击处理程序将单击的视图模型作为参数，以便您可以使用引用加载数组

```
Example on the parent approach 
```

[http://jsfiddle.net/kMvGp/1/](http://jsfiddle.net/kMvGp/1/)

# razor - 捆绑和拆分咖啡脚本的捆绑助手

> ID：14399365
> 
> 赞同：1
> 
> 时间：2013-01-18T12:49:56.003
> 
> 标签：razor, asp.net-mvc-4, bundle, minify

我在 MVC4 中尝试使用 Bundle 和 Minification 并遇到了一个有趣的问题。我正在使用 Coffeescript，我想要一个与该`@Scripts.Render()`方法有点相似的渲染助手。

例如，假设我有这个捆绑配置：

```
new ScriptBundle("~/bundle/appfiles").Include(
    "~/Scripts/app/sample.js",
    "~/Scripts/app/myApp.js"); 
```

在 cshtml 中，当我这样做时，`@Scripts.Render()`我会根据 web.config 中的调试设置得到不同的结果。如果调试为真，我会**为每个文件获得一个脚本标签**，否则我会获得一个脚本标签，该标签会返回捆绑和缩小的 js。这可以。

现在让我们假设我想对我的 Coffeescripts 做同样的事情。我创建一个这样的包：

```
new Bundle("~/bundle/appfiles", new CoffeeBundler(), new JsMinify()).Include(
    "~/Scripts/app/sample.coffee",
    "~/Scripts/app/myApp.coffee"); 
```

现在的问题是，如果我使用`@Scripts.Render()`我在调试时得到每个文件一个脚本，但这根本**没有转换**。我能做的唯一用途是：

```
<script type="text/javascript" src="@(BundleTable.Bundles.ResolveBundleUrl("~/bundle/appfiles"))"></script> 
```

但是，即使在调试模式下，这也会将所有内容捆绑在一起然后缩小，这当然不是我想要的。

我试图创建一个`Coffee.Render()`类似于 Scripts 的帮助器，但它使用 System.Web.Optimization 程序集内部的 AssetManager 类。

我想知道您是否知道如何以干净的方式执行此操作（即：使用可用的公共类，不复制和粘贴整个 AssetManager 代码，在创建捆绑包时不做花哨的 Directory.EnumerateFiles）。

谢谢！

PS：我知道更快的解决方案是使用 Mindscape Workbench 并捆绑生成的 js 文件，我正在寻找使用框架所具有的东西，也许还避免不得不告诉团队安装人们可能不会安装的工具像...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T17:10:26.450

最后，我为此选择了 HtmlHelper 解决方案。仍处于早期阶段，但可以按照我的意愿工作。暂时在一篇[博](http://tallmaris.com/advanced-bundling-and-minification-of-coffeescripts-in-mvc4/)文中有详细介绍。

这是完整的 Helper 代码，以防博客丢失...

```
public static class HtmlHelperExtensions
{
    public static MvcHtmlString RenderCoffeeBundle(this HtmlHelper htmlHelper, string virtualPath)
    {
        if (String.IsNullOrEmpty(virtualPath))
            throw new ArgumentException("virtualPath must be defined", "virtualPath");

        var list = GetPathsList(virtualPath);

        //TODO: Nice and cleaner EliminateDuplicatesAndResolveUrls(list);

        var stringBuilder = new StringBuilder();
        foreach (string path in list)
        {
            stringBuilder.Append(RenderScriptTag(path));
            stringBuilder.Append(Environment.NewLine);
        }
        return MvcHtmlString.Create(stringBuilder.ToString());
    }

    private static IEnumerable<string> GetPathsList(string virtualPath)
    {
        var list = new List<string>();

        if (BundleResolver.Current.IsBundleVirtualPath(virtualPath))
        {
            if (!BundleTable.EnableOptimizations)
            {
                foreach (var path in BundleResolver.Current.GetBundleContents(virtualPath))
                {
                    var bundlePath = "~/autoBundle" + ResolveVirtualPath(path.Replace("coffee", "js"));
                    BundleTable.Bundles.Add(new Bundle(bundlePath, new CoffeeBundler()).Include(path));
                    // TODO: Get the actual CustomTransform used in the Bundle
                    // rather than forcing "new CoffeeBundler()" like here
                    list.Add(bundlePath);
                }
            }
            else
                list.Add(BundleResolver.Current.GetBundleUrl(virtualPath));
        }
        else
            list.Add(virtualPath);
        return list.Select(ResolveVirtualPath).ToList();
    }

    private static string RenderScriptTag(string path)
    {
        return "<script src=\"" + HttpUtility.UrlPathEncode(path) + "\"></script>";
    }

    private static string ResolveVirtualPath(string virtualPath)
    {
        return VirtualPathUtility.ToAbsolute(virtualPath);;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:05:07.923

抱歉，我没有回答您的确切问题，但我确实想在帖子末尾与您的 PS 交谈。

目前，我真的不认为我们有“没有工具”的故事，但我确实同意“使用框架拥有的东西”的观点。

为此，我强烈建议使用 TypeScript。您不必学习一门新语言（就像使用 CoffeeScript 一样），但它为您提供了一个强类型的 JavaScript 版本，您可以使用它更像 c#（带有类型验证等）。

您将需要 20 分钟来完成一些教程：

[http://www.typescriptlang.org/Playground/](http://www.typescriptlang.org/Playground/)

或者，更好的是，看看秋季的 BUILD 会议：

[http://channel9.msdn.com/Events/Build/2012/3-012](http://channel9.msdn.com/Events/Build/2012/3-012)

顺便说一句...如果这不是您想要的方向，请不用担心...我只是发现很多开发人员甚至都不知道 TypeScript 作为一种选择。

希望这有助于您为团队简化事情。

干杯。

# php - 不要从 mysql 数据库中提取当前用户信息

> ID：14399367
> 
> 赞同：-1
> 
> 时间：2013-01-18T12:50:01.387
> 
> 标签：php, mysql, sql

我之前在这里问了一个问题，这个问题很快得到了简洁的回答，谢谢你:)。但是现在我遇到了一个问题，我的搜索脚本在我不希望它时从数据库中拉出当前用户。假设我使用以下帐户登录：MrDare360。我不想从数据库中提取我的信息，只想使用我的搜索脚本提取其他人的信息。我尝试在我的 SQL 查询中使用 NOT LIKE 和 != 从数据库中删除我的结果，但它不起作用。

这是我当前的代码： http: [//pastebin.com/GXAbQJRb](http://pastebin.com/GXAbQJRb)

这是我的数据库： http: [//gyazo.com/4b725e7e283d963ad4d0652da0a52a92](http://gyazo.com/4b725e7e283d963ad4d0652da0a52a92)

什么是最简单或最好的方法？谢谢。

编辑：当前用户的用户名、电子邮件和 ID 存储在会话中，我想使用这些来限制搜索脚本提取您的帐户结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:56:46.240

这应该有效：

```
$your_username = $_SESSION['username'];

$query = $sqli_con->query("
    SELECT 
         id, username, avatar, first_name, last_name, 
         country, gender, user_level 
    FROM 
         members 
    WHERE 
         username LIKE '%$search_query%' AND 
         username NOT IN ('$your_username')
"); 
```

请注意，我假设您的用户名会话变量对于 SQL 是安全的。另请注意，无论何时处理外部数据，都应该使用准备好的语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:03:15.490

只写这个查询

```
SELECT id, username, avatar, first_name, last_name, country, gender, user_level 
FROM members WHERE username LIKE '%$search_query%' AND id!='$_SESSION[id]' 
```

然后获取所有没有登录用户名的用户

# azure - Azure 工作者的一次性作业

> ID：14399376
> 
> 赞同：1
> 
> 时间：2013-01-18T12:50:35.023
> 
> 标签：azure, azure-sql-database, azure-worker-roles

在 Azure 上完成一次性工作的最佳方式是什么？

假设我们想用双列扩展关联数据库中的表。所有新条目都将在插入时由工作人员计算出这个值，但必须有人处理表中已经存在的条目。我想到了两种选择：

1.  仅当数据库条目（例如，“JobRun”）设置为 true 时才由 worker 调用的方法，并且该方法会将条目翻转为 false。
2.  一个单独的应用程序完成这项工作，并使用远程桌面手动下载和运行（我无法将本地应用程序连接到 Azure SQL 服务器）。

第一种选择是乱七八糟的（我应该如何处理下一次部署的代码？删除它？评论它？留下它？还有，如果我将来有另一个工作怎么办？创建一个新的数据库条目“Job2Run”？ ）。第二个看起来像一个廉价的黑客。我敢肯定，我想不出更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:40:20.133

如果你想运行一次工作，你需要考虑以下几点：

*   并发：在作业运行时，确保没有其他工作人员接手并同时运行它（您可以为此使用租约。[更多信息在这里](http://blog.smarx.com/posts/managing-concurrency-in-windows-azure-with-leases)）。
*   作业完成后，您需要跟踪（在表存储、SQL Azure 等中）作业是否成功完成。下次工作人员尝试接手工作时，它会查看 Table Storage / SQL Azure / ...，它会看到工作已完成并跳过该工作。
*   失败：也许您的工人在工作期间崩溃了，这应该允许另一个工人毫无问题地接手工作。

在您的特定用例中，我还将考虑使用[dbup 之](http://code.google.com/p/dbup/)类的工具来管理对您的架构的更新以及使用 SQL 脚本的现有数据。此类工具通过将脚本添加到数据库中的表中来跟踪已执行的脚本。

# multithreading - 为什么我的 goroutine 相互等待而不是在完成后完成？

> ID：14399378
> 
> 赞同：3
> 
> 时间：2013-01-18T12:50:50.863
> 
> 标签：multithreading, concurrency, go, bubble-sort, goroutine

我对 Go 很陌生，我的代码中有一件事我不明白。我写了一个简单的冒泡排序算法（我知道它不是很有效；））。现在我想启动 3 个 GoRoutines。每个线程都应该独立于其他线程对他的数组进行排序。完成后，函数。应该打印一个“完成”的消息。

这是我的代码：

```
package main 

import (
    "fmt"
    "time" //for time functions e.g. Now()
    "math/rand" //for pseudo random numbers
)

/* Simple bubblesort algorithm*/
func bubblesort(str string, a []int) []int {
    for n:=len(a); n>1; n-- {
        for i:=0; i<n-1; i++ {
            if a[i] > a[i+1] {
                a[i], a[i+1] = a[i+1], a[i] //swap
            }
        }
    }
    fmt.Println(str+" done") //done message
    return a
}

/*fill slice with pseudo numbers*/
func random_fill(a []int) []int {
    for i:=0; i<len(a); i++ { 
        a[i] = rand.Int()
    }
    return a
}

func main() {
   rand.Seed( time.Now().UTC().UnixNano()) //set seed for rand.

   a1 := make([]int, 34589) //create slice
   a2 := make([]int, 42) //create slice
   a3 := make([]int, 9999) //create slice

   a1 = random_fill(a1) //fill slice
   a2 = random_fill(a2) //fill slice
   a3 = random_fill(a3) //fill slice
   fmt.Println("Slices filled ...")

   go bubblesort("Thread 1", a1) //1\. Routine Start
   go bubblesort("Thread 2", a2) //2\. Routine Start
   go bubblesort("Thread 3", a3) //3\. Routine Start
   fmt.Println("Main working ...")

   time.Sleep(1*60*1e9) //Wait 1 minute for the "done" messages
} 
```

这就是我得到的：

```
Slices filled ...
Main working ...
Thread 1 done
Thread 2 done
Thread 3 done 
```

线程 2 不应该先完成，因为他的切片是最小的吗？似乎所有线程都在等待其他线程完成，因为“完成”消息同时出现，无论切片有多大..

我的脑虫在哪里？=)

提前致谢。

*编辑：将“time.Sleep(1)”放入bubblesort func的for循环中时。它似乎工作..但我想用这段代码记录不同机器上的持续时间（我知道，我必须改变随机的东西），所以睡眠会伪造结果。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T13:01:27.823

事实上，对于你的 goroutine 的执行顺序没有任何保证。

但是，如果您通过明确让 2 个处理器内核运行来强制执行真正的并行处理：

```
import (
    "fmt"
    "time" //for time functions e.g. Now()
    "math/rand" //for pseudo random numbers
    "runtime"
)
...

func main() {
   runtime.GOMAXPROCS(2)

   rand.Seed( time.Now().UTC().UnixNano()) //set seed for rand.
... 
```

然后你会得到预期的结果：

```
Slices filled ...
Main working ...
Thread 2 done
Thread 3 done
Thread 1 done 
```

最好的祝福

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T11:05:32.353

重要的是在整个潜在的长时间运行的工作负载完成之前将处理器“让给”给其他进程的能力。这在单核上下文或多核上下文中也适用（因为[Concurrency 与 Parallelism 不同](http://blog.golang.org/2013/01/concurrency-is-not-parallelism.html)）。

这正是[runtime.Gosched()](http://golang.org/pkg/runtime/#Gosched)函数所做的：

> Gosched 产生处理器，允许其他 goroutine 运行。它不会暂停当前的 goroutine，因此会自动恢复执行。

请注意，“上下文切换”不是免费的：每次都会花费一些时间。

*   在我的机器上没有让步，你的程序在 5.1 秒内运行。
*   如果你在外循环（`for n:=len(a); n>1; n--`）中让步，它会在 5.2 秒内运行：开销很小。
*   如果你在内部循环（`for i:=0; i<n-1; i++`）中让步，它会在 61.7 秒内运行：巨大的开销！

这是正确产生的修改后的程序，开销很小：

```
package main

import (
    "fmt"
    "math/rand"
    "runtime"
    "time"
)

/* Simple bubblesort algorithm*/
func bubblesort(str string, a []int, ch chan []int) {
    for n := len(a); n > 1; n-- {
        for i := 0; i < n-1; i++ {
            if a[i] > a[i+1] {
                a[i], a[i+1] = a[i+1], a[i] //swap
            }
        }
        runtime.Gosched() // yield after part of the workload
    }
    fmt.Println(str + " done") //done message
    ch <- a
}

/*fill slice with pseudo numbers*/
func random_fill(a []int) []int {
    for i := 0; i < len(a); i++ {
        a[i] = rand.Int()
    }
    return a
}

func main() {
    rand.Seed(time.Now().UTC().UnixNano()) //set seed for rand.

    a1 := make([]int, 34589) //create slice
    a2 := make([]int, 42)    //create slice
    a3 := make([]int, 9999)  //create slice

    a1 = random_fill(a1) //fill slice
    a2 = random_fill(a2) //fill slice
    a3 = random_fill(a3) //fill slice
    fmt.Println("Slices filled ...")

    ch1 := make(chan []int) //create channel of result
    ch2 := make(chan []int) //create channel of result
    ch3 := make(chan []int) //create channel of result

    go bubblesort("Thread 1", a1, ch1) //1\. Routine Start
    go bubblesort("Thread 2", a2, ch2) //2\. Routine Start
    go bubblesort("Thread 3", a3, ch3) //3\. Routine Start
    fmt.Println("Main working ...")

    <-ch1 // Wait for result 1
    <-ch2 // Wait for result 2
    <-ch3 // Wait for result 3
} 
```

输出 ：

```
Slices filled ...
Main working ...
Thread 2 done
Thread 3 done
Thread 1 done 
```

正如我之前评论中所建议的，我还使用通道来实现集合点。

最好的祝福 ：）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-30T09:04:48.950

自 Go 1.2 发布以来，原程序无需修改*即可正常*~~运行。~~ 您可以在[Playground](http://play.golang.org/p/n3Mh86QfiC)中尝试一下。

 *这在[Go 1.2 发行](https://golang.org/doc/go1.2#preemption)说明中进行了解释：

> 在以前的版本中，一个永远循环的 goroutine 可能会饿死同一线程上的其他 goroutine，当 GOMAXPROCS 只提供一个用户线程时，这是一个严重的问题。在 Go 1.2 中，这部分得到了解决：调度程序在进入函数时偶尔被调用。*

# mongodb - MongoDB：按计算属性排序

> ID：14399379
> 
> 赞同：1
> 
> 时间：2013-01-18T12:50:57.447
> 
> 标签：mongodb

在我的数据库中，我有一个集合，其中文档有`score`一个浮点（`-1..1`）字段。我可以查询数据库以返回按分数排序的前 20 个结果。

我的问题是，我想根据以下字段修改带有时间惩罚的文档的分数`time_updated`：文档越老，分数应该越低。最大的问题是，我必须在运行时执行此操作。我可以遍历所有文档，更新分数，然后按分数排序。但这会花费太多时间，因为集合中有大量文档。

所以我的问题是：使用 MongoDB，我可以按计算属性排序吗？有没有办法做到这一点？或者是否有计划下一个版本的 MongoDB 的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:04:00.703

分数究竟是如何更新的？

如果它很简单并且可以放入[$add、$multiply 等术语](http://docs.mongodb.org/manual/reference/aggregation/#arithmetic-operators)中，那么聚合管道将运行良好。否则，您将需要使用简单的[MapReduce](http://docs.mongodb.org/manual/applications/map-reduce/) a 来进行分数更新。

```
var mapFunction = function() {
    emit(this._id, <compute score here from this.score and this.time_updated>);
};

var reduceFunction = function (values) {
    return values[0]; // trivial reduce function since incoming id's are unique.
}; 
```

对于 10000 行，无论是聚合管道还是简单的 MapReduce 都可能具有足够的性能。

对于更大的数据集，您可能需要使用更复杂的 MapReduce（实际上是减少）以提高内存效率。您可能还想利用[Incremental MapReduce](http://docs.mongodb.org/manual/applications/map-reduce/#incremental-map-reduce)。

# c# - 非泛型类中泛型类型的属性

> ID：14399384
> 
> 赞同：7
> 
> 时间：2013-01-18T12:51:07.690
> 
> 标签：c#, generics

**介绍**

我正在使用包含两个类的遗留代码：

*   我有一个存储其类型值的`System.Object`类。（我将这个类命名为`DomainItem`）
    *   它的 Identifier 属性指的是保存信息类型的枚举`DomainItem`（在业务领域的上下文中）。
*   还有一个类将这些项目存储为可枚举列表。( `DomainItems`)

更重要的是：

*   我不想将这些类更改为泛型。这段代码非常敏感，没有被测试覆盖。
*   为了得到`DomainItem`，我必须从`DomainItems.Items`收藏中得到它。

**代码**

类的代码等效如下：

```
public class DomainItem
{
    public Identifier Identifier { get; set; } // Readonly in the "real" code
    public object Value { get; set; }
}

public class DomainItems
{
    public IEnumerable<DomainItem> Items { get; set; }
} 
```

**问题是**

如何使用泛型扩展这些类，以在编译时解析 Value 属性的类型。甚至可能吗？

**示例案例**可能如下：

```
DomainItem price = new DomainItem { Value = 25.20d, Identifier = Identifier.Price };
// ....
double priceValue = price.ProperValue; // generic property of type T 
```

显然，上面的代码是概念性的，它显示了我想要实现的目标。任何建议如何解决？甚至可能吗？

**编辑**

我的想法是创建一个新`IEnumerable<DomainItem<T>>`的集合，其中集合由非通用`DomainItem`对象填充。由于类型`DomainItem.Value`是已知的，因此应该可以以某种方式进行此类收集。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T12:54:35.213

没有泛型属性之类的东西，但您可以轻松创建泛型*方法*：

```
public T GetValue<T>() { ... }

public void SetValue<T>(T value) { ... } 
```

然后，您可以`typeof(T)`在方法中检查以确保它适合您的标识符，最好将标识符设为只读。（作为构造函数参数会更好 - 我不希望拥有一个标识符随时间变化的域项目有任何意义。）

Alternatively, you *could* just make the type of the `Value` property `dynamic` instead of `object`, assuming you're using C# 4+ with .NET 4+. Then your example code would compile - but it would perform an implicit (dynamic) conversion to `double` at execution time. You wouldn't get much *safety* there, but it would compile...

# c# - IRtdServer.RefreshData 和格式化单元格

> ID：14399392
> 
> 赞同：0
> 
> 时间：2013-01-18T12:51:46.177
> 
> 标签：c#, excel, rtd

RefreshData 函数能否发送 Excel 单元格格式信息。我希望 excel 在他的单元格中显示箭头，我希望 RTD 服务器通知他要显示哪个箭头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:34:52.810

[我在 msdn social http://social.msdn.microsoft.com/Forums/en/exceldev/thread/36f483c0-e50c-40e6-985f-eef82cf3bf63](http://social.msdn.microsoft.com/Forums/en/exceldev/thread/36f483c0-e50c-40e6-985f-eef82cf3bf63)上找到了这个答案

# c# - Windows Azure 错误 C#

> ID：14399398
> 
> 赞同：0
> 
> 时间：2013-01-18T12:52:23.257
> 
> 标签：c#, visual-studio, azure, azure-storage

我收到此错误：

> f:Erro ao processar esta solicitação。| em System.Data.Services.Client.DataServiceContext.SaveResult.HandleBatchResponse() em System.Data.Services.Client.DataServiceContext.SaveResult.EndRequest() em System.Data.Services.Client.DataServiceContext.SaveChanges(SaveChangesOptions 选项) em AzureTableLayer .CRUDUserEntities.ADDUSociate(UserClientEntity entity) na \WindowsAzureProject1\AzureTableLayer\User\CRUDUserEntities.cs:linha 43 em mobile.Service1.addusr(String nome, String cidade, String cpf, String email, String telefone) na \Service1.svc。 CS：林哈 124

方法是：

```
 public string addusr(string nome, string cidade, string cpf, string email, string telefone)
    {
        try
        {
            if (nome.Length == 0)
                return "f:Preencha o campo nome.";

            if (cidade.Length == 0)
                return "f:Preencha o campo cidade.";

            if (cpf.Length == 0)
                return "f:Preencha o campo cpf.";

            if (!Valida(cpf))
                return "f:CPF Invalido.";

            if (email.Length == 0)
                return "f:Preencha o campo email.";

            Regex rg = new Regex(@"^[A-Za-z0-9](([_\.\-]?[a-zA-Z0-9]+)*)@([A-Za-z0-9]+)(([\.\-]?[a-zA-Z0-9]+)*)\.([A-Za-z]{2,})$");
            if (!rg.IsMatch(email))
            {
                return "f:Email Invalido";
            }

            List<UserEntity> lst = new List<UserEntity>();
            var _account = CloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue("Conn"));
            _account.CreateCloudTableClient().CreateTableIfNotExist("fiscal");
            var _context = new CRUDUserEntities(_account.TableEndpoint.ToString(), _account.Credentials);

            UserClientEntity entity = new UserClientEntity() { nome = nome, cidade = cidade, cpf = cpf, email = email, telefone = telefone };
            _context.ADDUSociate(entity);

            return "k";
        }
        catch (Exception exc)
        {
            string error =  "f:" + exc.Message + "|" + exc.StackTrace;
           // Trace.WriteLine("Erro no login: " + error , "Information");
            return error;
        }
    } 
```

ADDUSocate（我遇到错误的地方）

```
 public void ADDUSociate(UserClientEntity entity)
  {
      this.AddObject("UserEntities", new UserEntity { nome = entity.nome, cpf = entity.cpf, cidade = entity.cidade, email = entity.email, telefone = entity.telefone});
      this.SaveChanges();
  } 
```

编辑：问题出在 this.SaveChanges();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:57:50.407

会不会是[Azure 字符大小写问题](http://weblogs.asp.net/chanderdhall/archive/2010/07/10/dataservicerequestexception-was-unhandled-by-user-code-an-error-occurred-while-processing-this-request.aspx)？也许您没有为`"UserEntities"`.

**[更新]**

这可能是因为您获得了对`"fiscal"`表的引用，但您想将实体添加到`"UserEntities"`表中。

有一个很好的示例说明如何在此处添加实体：[CloudTableClient.CreateTableIfNotExist 方法](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.cloudtableclient.createtableifnotexist.aspx)

# jquery - Jquery 错误和正确的循环索引

> ID：14399399
> 
> 赞同：2
> 
> 时间：2013-01-18T12:52:24.143
> 
> 标签：jquery, ajax

说我有这个：

```
for( i = 0; i < 10; i++ )
{
    $.ajax({
        type: "POST",
        url: "geocode-items.php",
        async: true,
        data: {  
            key: i
        },
        success: function( data )
        {
            // data returns the index I passed into the script with the data property.
        },
        error( a, b, c )
        {
            alert( i ); // this obviously won't work
        }
    });    
} 
```

警报（我）；在错误部分不会提醒正确的索引。而在成功中，我可以将我放入 geocode-items.php 脚本的密钥传回，但我无法在错误部分传回任何内容。

你知道在触发错误方法时如何引用通过请求发送的原始数据吗？

像this.data.key这样的东西？所以我可以报告我卡住的特定对象的错误？而不是必须写一些通用的“有一个错误代码，但我不知道在哪里”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:55:41.980

您应该阅读有关 javascript 范围和闭包的内容。在您的情况下，每个错误回调的值`i`都是相同的，因为 ajax 是异步的`i`，所以它们都是 10。

javascript 只有基于函数的作用域，没有基于块的作用域。您可以做的是创建一个匿名函数，在其中将值传递给`(function(param1) { } )(value)`该函数会立即被调用。然后将函数的参数绑定到该函数调用。

```
for( i = 0; i < 10; i++ )
{
    (function(idx) {
       $.ajax({
           type: "POST",
           url: "geocode-items.php",
           async: true,
           data: {  
               key: idx
           },
           success: function( data )
           {
               // data returns the index I passed into the script with the data property.
           },
           error: function( a, b, c )
           {
               alert( idx ); // this obviously won't work
           }
        });
    })(i);   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:57:27.813

您可以存储`i`为变量。

```
for( i = 0; i < 10; i++ )
{
    var index=i;
    $.ajax({
        type: "POST",
        url: "geocode-items.php",
        async: true,
        data: {  
            key: i
        },
        success: function( data )
        {
            // data returns the index I passed into the script with the data property.
        },
        error( a, b, c )
        {
            alert( index ); // this obviously won't work
        }
    });    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T12:58:15.290

```
for (i = 0; i < 10; i++) {
    $.post("geocode-items.php", {key: i})
    .done(function (data) {
        // ...
    },
    .fail(function (i) {
        return function (a, b, c) {
            alert(i);
        };
    }(i));    
} 
```

关键是所有Ajax 回调都是异步调用的，即在循环完成运行*后调用它们。*将永远是这种情况。`for``i``9`

在成功回调的情况下，它从服务器的响应中知道其状态。它不在乎是什么`i`，因此它有效。

然而，错误回调没有响应。它需要一个闭包来维持`i`.

* * *

话虽如此，在 for 循环中拥有几乎相同的 Ajax 请求可能并不是最聪明的事情。将它们合二为一，发送一组值 (JSON)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T12:59:21.743

尝试使用 jqXHR 属性

[http://api.jquery.com/jQuery.ajax/#jqXHR](http://api.jquery.com/jQuery.ajax/#jqXHR)

在使用 beforeSend 事件或 ajaxSend() 方法进行 ajax 调用之前，将索引属性“i”放入 jqXHR

[http://api.jquery.com/ajaxSend/](http://api.jquery.com/ajaxSend/)

# wpf - 验证命令以仅允许在数据库中输入 1 行

> ID：14399401
> 
> 赞同：2
> 
> 时间：2013-01-18T12:52:27.273
> 
> 标签：wpf, entity-framework, mvvm, command

我正在创建一个应用程序，允许用户使用 MVVM 和 EF 将他们的详细信息输入数据库。我有一个用户控件，它允许用户在数据库中输入一组详细信息。

在此应用程序中，`view-model`包含属性、命令和 CRUD 操作。

我想要实现的是允许使用此应用程序的用户输入他们的详细信息，但是一旦将一行输入到数据库中，就`command`完全禁用它或抛出一个异常，说明已添加了一行。

我有一个`tab control`供用户输入他们的详细信息，然后数据网格让他们直观地查看添加的详细信息。

这有可能实现吗？这将如何完成？遍历行然后找到该行？

这是我的相关代码片段；

视图模型；

```
 private ICommand _AddCommand;
    public ICommand AddCommand
    {
        get
        {
            if (this._AddCommand == null)
            {
                this._AddCommand = new RelayCommand(this.SaveExecute, this.SaveCanExecute);
            }

            return this._AddCommand;
        }
    }

    private bool SaveCanExecute()
    {
            return !string.IsNullOrEmpty(Name);
    }

    private void SaveExecute()
    {
        InsertDetail();
    } 
```

xml;

```
 <Button Content="Save" Grid.Row="9" Name="btnSave" VerticalAlignment="Top" Grid.Column="1" Width="75"
        Command="{Binding AddCommand}" /> 
```

感谢任何帮助或指导，因为我是 WPF 和 MVVM 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:36:07.863

最简单的方法是在逻辑进入 SaveExecute() 方法后禁用按钮。这将阻止发出新命令。

之后，您可以启用它，或将其禁用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:49:15.220

您可以使用 EF 创建 aa`count`方法，然后在您的`SaveExecute()`命令方法中调用`count`，类似这样；

```
public int Count(int _ID)
{
    DBEntities context = new DBEntities();

        return (from o in context.Entities
                where o.EntityID == _ID
                select o.EntityID).Count();
} 
```

然后，在你的命令方法中；

```
 private void SaveExecute() //RelayCommand
    {
        if (Count(1) == 0)
        {
            InsertDetails(this); //Insert method using EF
            MessageBox.Show("Items have been addded.");
        }
        else
        {
            MessageBox.Show("An Item already exists, unable to add another one.");
        }
    } 
```

希望这可以帮助！

# c# - TwoWay 绑定一个实现 INotifyPropertyChanged 的 类，没有任何反应

> ID：14399404
> 
> 赞同：2
> 
> 时间：2013-01-18T12:52:36.457
> 
> 标签：c#, wpf, data-binding, datatemplate, inotifypropertychanged

我在微软网站上关注了几个例子，第一个涉及 ItemsSource：

[ItemsControl.ItemsSource 属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemssource%28v=VS.85%29.aspx) 之二：

[如何：实施属性更改通知](http://msdn.microsoft.com/en-us/library/ms743695%28v=vs.100%29.aspx)

将我已经到达的两个示例合并到我的示例中：

**XAML**

```
<Window x:Class="WpfSchede.Test.ItemsSourceTest"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:c="clr-namespace:WpfSchede.Test"
    Title="ItemsSourceTest" Height="352" Width="467">
<Window.Resources>
    <c:NameList x:Key="NameListData"></c:NameList>
    <DataTemplate x:Key="NameItemTemplate">
        <TextBlock Width="200" Text="{Binding Path=FullName, Mode=TwoWay}" />
    </DataTemplate>
</Window.Resources>                   
<Grid>
    <ListBox ItemsSource="{Binding Source={StaticResource NameListData}}" ItemTemplate="{StaticResource NameItemTemplate}" Margin="12,12,120,65" Name="listBoxNames" IsSynchronizedWithCurrentItem="True"> 
    </ListBox>
    <Button Content="Change First Name" Height="23" HorizontalAlignment="Left" Margin="12,270,0,0" Name="buttonChangeName" VerticalAlignment="Top" Width="163" Click="buttonChangeName_Click" />
    <Button Content="Change Full Name" Height="23" HorizontalAlignment="Left" Margin="193,270,0,0" Name="buttonChangeFullName" VerticalAlignment="Top" Width="163" Click="buttonChangeFullName_Click" />
</Grid> 
```

**XAML.CS**

```
using System.Windows;
namespace WpfSchede.Test
{
public partial class ItemsSourceTest : Window
{
    public ItemsSourceTest()
    {
        InitializeComponent();
    }

    private void buttonChangeName_Click(object sender, RoutedEventArgs e)
    {
        PersonName p = listBoxNames.SelectedItem as PersonName;
        p.FirstName = "Andrew";
    }

    private void buttonChangeFullName_Click(object sender, RoutedEventArgs e)
    {
        PersonName p = listBoxNames.SelectedItem as PersonName;
        p.FullName = "Andrea Rossi";
    }
  }
} 
```

**名称列表类**

```
using System.Collections.ObjectModel;
using System.ComponentModel;

namespace WpfSchede.Test
{
public class NameList : ObservableCollection<PersonName>
{
    public NameList()
        : base()
    {
        Add(new PersonName("Wil", "Cath"));
        Add(new PersonName("Isak", "Dinesen"));
        Add(new PersonName("Victor", "Hugo"));
        Add(new PersonName("Jules", "Verne"));
        Add(new PersonName("Leonardo", "Rossi"));
    }
}

public class PersonName : INotifyPropertyChanged 
{
    private string firstName;
    private string lastName;
    // Define the event
    public event PropertyChangedEventHandler PropertyChanged; 

    public PersonName(string first, string last)
    {
        this.firstName = first;
        this.lastName = last;
    }

    public string FirstName
    {
        get { return firstName; }
        set { 
            firstName = value; 
            OnPropertyChanged(value);
        }
    }

    public string LastName
    {
        get { return lastName; }
        set { lastName = value; }
    }

    public string FullName
    {
        set {
            string full = value as string;
            char[] sep = { ' ' };
            string[] n = full.Split(sep);
            this.FirstName = n[0];
            this.LastName = n[1];
            OnPropertyChanged(value);
        }
        get { return firstName + " " + lastName; }
    }

    protected void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(name));
        }

    }
 }
} 
```

我有两个问题。

首先）当单击其中一个按钮时，我希望 ListBox 反映更改，但没有任何反应！我错过了什么？

第二）在 DataTemplate 中，我绑定到 FullName（对于示例而言，仅绑定到 FirstName 会更容易，但在我看来太简化了）。所以我选择绑定到一个属性 FullName，为此我在 NameList 类和 DataTemplate 代码中编写了我的自定义代码。我的代码有什么问题？在 DataTemplate 中指定 Mode=TwoWay 是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:55:17.550

OnPropertyChanged(值); 是错的

它应该是 OnPropertyChanged("FirstName"); 并且还应该跟 OnPropertyChanged("FullName"); 导致

```
OnPropertyChanged("FirstName");
OnPropertyChanged("FullName"); 
```

LastName 设置函数应该有

```
OnPropertyChanged("LastName");
OnPropertyChanged("FullName"); 
```

最后设置功能应该有

```
OnPropertyChanged("FullName");
OnPropertyChanged("FirstName");
OnPropertyChanged("LastName"); 
```

# php - 如何将数组子值移动到父键？

> ID：14399405
> 
> 赞同：1
> 
> 时间：2013-01-18T12:52:36.997
> 
> 标签：php, arrays, array-splice

我需要弄清楚什么 PHP 函数可以实现我的目标。

这是我拥有的一个 PHP 数组：

```
Array
(
[0] => Array
    (
        [id] => 6
        [index] => 1
        [active] => 1
        [name] => MyName
    )

[1] => Array
    (
        [id] => 1
        [index] => 2
        [active] => 1
        [name] => YourName
    )

[2] => Array
    (
        [id] => 2
        [index] => 4
        [active] => 1
        [name] => TheirName
    )
} 
```

我想获取“索引”值并将其设为该数组父级的 KEY，因此该数组将变为：

```
Array
(
[1] => Array
    (
        [id] => 6
        [index] => 1
        [active] => 1
        [name] => MyName
    )

[2] => Array
    (
        [id] => 1
        [index] => 2
        [active] => 1
        [name] => YourName
    )

[4] => Array
    (
        [id] => 2
        [index] => 4
        [active] => 1
        [name] => TheirName
    )
} 
```

谁能告诉我如何在 PHP 中做到这一点？

先感谢您。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-06T23:21:18.950

你可以使用：array_column($array, null, 'index'); 是更好的解决方案，但仅适用于 >= 5.5 php 版本

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T12:59:55.310

不是最优雅的解决方案，但它可以工作（它实际上并没有移动数组，它只是生成一个符合您要求的新数组）：

```
$resultArr = array();
foreach ($mainArr as $value) {
    $resultArr[$value['index']] = $value;
}
unset($mainArr); // or $mainArr = $resultArr; 
```

这样您就不会覆盖原始数组中的任何现有键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T13:01:04.803

```
 $a =  array
 (
    0 => array
    (
        "id" => 6,
        "index" => 1,
        "active" => 1,
        "name" => "MyName"
        ),

    1 => Array
    (
        "id" => 1,
        "index" => 2,
        "active" => 1,
        "name" => "YourName"
        ),

    2 => Array
    (
        "id" => 2,
        "index" => 4,
        "active" => 1,
        "name" => "TheirName"
        )
);

 $newArray = array();
 foreach ($a as $foo) {
    $newArray[$foo['index']] = $foo;
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T13:01:09.910

您必须手动执行此操作：

```
$input  = array( /* your data */ );
$output = array();

foreach ( $input as $values ) {
  $output[ $values['index'] ] = $values;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-26T23:49:49.763

```
public static function normArray($key, $inputArray)
{
    $outputArray = array();
    foreach ($inputArray as $item) {
        $index = intval($item[$key]);
        $outputArray[$index] = $item;
    }
    return $outputArray;
} 
```

# python - 在 Python 中实现 SVG 圆弧曲线

> ID：14399406
> 
> 赞同：8
> 
> 时间：2013-01-18T12:52:39.577
> 
> 标签：python, math, svg, geometric-arc

我正在尝试在 Python 中实现 SVG 路径计算，但我遇到了 Arc 曲线的问题。

我认为问题在于从端点到中心参数化的转换，但我找不到问题。[您可以在SVG 规范](http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes)的 F6.5 部分中找到有关如何实现它的说明。我还查看了其他语言的实现，我也看不出它们有什么不同。

我的 Arc 对象实现在这里：

```
class Arc(object):

    def __init__(self, start, radius, rotation, arc, sweep, end):
        """radius is complex, rotation is in degrees, 
           large and sweep are 1 or 0 (True/False also work)"""

        self.start = start
        self.radius = radius
        self.rotation = rotation
        self.arc = bool(arc)
        self.sweep = bool(sweep)
        self.end = end

        self._parameterize()

    def _parameterize(self):
        # Conversion from endpoint to center parameterization
        # http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes

        cosr = cos(radians(self.rotation))
        sinr = sin(radians(self.rotation))
        dx = (self.start.real - self.end.real) / 2
        dy = (self.start.imag - self.end.imag) / 2
        x1prim = cosr * dx + sinr * dy
        x1prim_sq = x1prim * x1prim
        y1prim = -sinr * dx + cosr * dy
        y1prim_sq = y1prim * y1prim

        rx = self.radius.real
        rx_sq = rx * rx
        ry = self.radius.imag        
        ry_sq = ry * ry

        # Correct out of range radii
        radius_check = (x1prim_sq / rx_sq) + (y1prim_sq / ry_sq)
        if radius_check > 1:
            rx *= sqrt(radius_check)
            ry *= sqrt(radius_check)
            rx_sq = rx * rx
            ry_sq = ry * ry

        t1 = rx_sq * y1prim_sq
        t2 = ry_sq * x1prim_sq
        c = sqrt((rx_sq * ry_sq - t1 - t2) / (t1 + t2))
        if self.arc == self.sweep:
            c = -c
        cxprim = c * rx * y1prim / ry
        cyprim = -c * ry * x1prim / rx

        self.center = complex((cosr * cxprim - sinr * cyprim) + 
                              ((self.start.real + self.end.real) / 2),
                              (sinr * cxprim + cosr * cyprim) + 
                              ((self.start.imag + self.end.imag) / 2))

        ux = (x1prim - cxprim) / rx
        uy = (y1prim - cyprim) / ry
        vx = (-x1prim - cxprim) / rx
        vy = (-y1prim - cyprim) / ry
        n = sqrt(ux * ux + uy * uy)
        p = ux
        theta = degrees(acos(p / n))
        if uy > 0:
            theta = -theta
        self.theta = theta % 360

        n = sqrt((ux * ux + uy * uy) * (vx * vx + vy * vy))
        p = ux * vx + uy * vy
        if p == 0:
            delta = degrees(acos(0))
        else:
            delta = degrees(acos(p / n))
        if (ux * vy - uy * vx) < 0:
            delta = -delta
        self.delta = delta % 360
        if not self.sweep:
            self.delta -= 360

    def point(self, pos):
        if self.arc == self.sweep:
            angle = radians(self.theta - (self.delta * pos))
        else:
            angle = radians(self.delta + (self.delta * pos))

        x = sin(angle) * self.radius.real + self.center.real
        y = cos(angle) * self.radius.imag + self.center.imag
        return complex(x, y) 
```

您可以使用以下代码进行测试，该代码将使用 Turtle 模块绘制曲线。（最后的 raw_input() 只是为了在程序退出时屏幕不会消失）。

```
arc1 = Arc(0j, 100+50j, 0, 0, 0, 100+50j)
arc2 = Arc(0j, 100+50j, 0, 1, 0, 100+50j)
arc3 = Arc(0j, 100+50j, 0, 0, 1, 100+50j)
arc4 = Arc(0j, 100+50j, 0, 1, 1, 100+50j)

import turtle
t = turtle.Turtle()
t.penup()
t.goto(0, 0)
t.dot(5, 'red')
t.write('Start')
t.goto(100, 50)
t.dot(5, 'red')
t.write('End')        
t.pencolor = t.color('blue')

for arc in (arc1, arc2, arc3, arc4):
    t.penup()
    p = arc.point(0)
    t.goto(p.real, p.imag)
    t.pendown()
    for x in range(1,101):
        p = arc.point(x*0.01)
        t.goto(p.real, p.imag)

raw_input() 
```

问题：

**绘制的这四个弧中的每一个都应从起点绘制到终点。但是，它们是从错误的角度得出的。两条曲线从头到尾，两条曲线从 100,-50 到 0,0，而不是从 0,0 到 100, 50。**

部分问题是实现说明为您提供了如何将表单端点转换为中心的公式，但没有解释它在几何上做了什么，所以我并不完全清楚每个步骤的作用。对此的解释也会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T22:03:10.527

我想我在您的代码中发现了一些错误：

```
theta = degrees(acos(p / n))
if uy > 0:
    theta = -theta
self.theta = theta % 360 
```

条件`uy > 0`错误，正确的是（从到`uy < 0`的有向角如果 为负）：`(1, 0)``(ux, uy)``uy < 0`

```
theta = degrees(acos(p / n))
if uy < 0:
    theta = -theta
self.theta = theta % 360 
```

然后

```
if self.arc == self.sweep:
    angle = radians(self.theta - (self.delta * pos))
else:
    angle = radians(self.delta + (self.delta * pos)) 
```

这里不需要区分，`sweep`and`arc`参数已经在`theta`and中说明了`delta`。这可以简化为：

```
angle = radians(self.theta + (self.delta * pos)) 
```

最后

```
x = sin(angle) * self.radius.real + self.center.real
y = cos(angle) * self.radius.imag + self.center.imag 
```

这里`sin`和`cos`混淆了，正确的是

```
x = cos(angle) * self.radius.real + self.center.real
y = sin(angle) * self.radius.imag + self.center.imag 
```

经过这些修改后，程序按预期运行。

* * *

**编辑：**还有一个问题。该`point`方法不考虑可能的`rotation`参数。以下版本应该是正确的：

```
def point(self, pos):
    angle = radians(self.theta + (self.delta * pos))
    cosr = cos(radians(self.rotation))
    sinr = sin(radians(self.rotation))

    x = cosr * cos(angle) * self.radius.real - sinr * sin(angle) * self.radius.imag + self.center.real
    y = sinr * cos(angle) * self.radius.real + cosr * sin(angle) * self.radius.imag + self.center.imag
    return complex(x, y) 
```

（参见[SVG 规范](http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes)中的公式 F.6.3.1 。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T21:44:00.980

也许您可以查看下面的链接，似乎有关于如何计算弧线的分步指南（请参阅 参考资料`computeArc()`）：

[http://svn.apache.org/repos/asf/xmlgraphics/batik/branches/svg11/sources/org/apache/batik/ext/awt/geom/ExtendedGeneralPath.java](http://svn.apache.org/repos/asf/xmlgraphics/batik/branches/svg11/sources/org/apache/batik/ext/awt/geom/ExtendedGeneralPath.java)

或者

[http://java.net/projects/svgsalamander/sources/svn/content/trunk/svg-core/src/main/java/com/kitfox/svg/pathcmd/Arc.java](http://java.net/projects/svgsalamander/sources/svn/content/trunk/svg-core/src/main/java/com/kitfox/svg/pathcmd/Arc.java)

# wordpress - 保存单选按钮选项以便稍后在 wordpress 插件中访问它们

> ID：14399410
> 
> 赞同：1
> 
> 时间：2013-01-18T12:52:53.250
> 
> 标签：wordpress

这是我的单选按钮代码。我希望它们显示在设置页面中并保存以供将来使用。

```
<form method="post" action="options.php">  
<?php 
    wp_nonce_field('update-options'); 
    $rsp_position = get_option('rsp_position');
    if(empty($rsp_position)){
        $rsp_position = "true";
    } else {
        $rsp_position = get_option('rsp_position');
    }
?>  
<p><strong>Ad Placing:</strong><br />

<input type="radio" id="1" name="rsp_position" <?php if($rsp_position == 'true') echo 'checked="checked"'; ?> value="true" />yes <br />
<input type="radio" id="2" name="rsp_position" <?php if($rsp_position == 'false') echo 'checked="checked"'; ?> value="flase" />no <br />

<input type="text" name="publisher-id" size="45" value="<?php echo get_option('publisher-id'); ?>" />  
</p>  
<p><input type="submit" name="Submit" value="Save" /></p>  
<input type="hidden" name="action" value="update" />  
<input type="hidden" name="page_options" value="publisher-id" /> 
<?php 
    settings_fields( 'save_position' ); 
    register_setting( 'save_position', 'rsp_position');
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:11:20.840

您走的是正确的路线，但是您对 settings_fields 和 register_setting 的调用不在正确的位置。

阅读[Otto 的教程，](http://ottopress.com/2009/wordpress-settings-api-tutorial/)这是对设置 API 的一个很好的介绍。

基本上，添加一个 admin_init 操作并在回调中注册设置并使用 add_settings_field 创建表单项。

然后在 add_options_page 回调中调用 settings_fields 以显示使用 add_settings_field 创建的条目。

如果您在完成 Otto 的教程后仍然苦苦挣扎，请再次发帖。

**编辑：在 pastebin 条目之后。**

保存失败是您的验证函数未返回预期值的结果。preg_match 在保存之前没有找到正确的值并将字符串转换为 '' （无） - 所以看起来它没有保存，而实际上它什么也没保存。

您还可以查看以下可能有用的功能。

*   [提交按钮](http://codex.wordpress.org/Function_Reference/submit_button)

*   [设置错误](http://codex.wordpress.org/Function_Reference/settings_errors)

# iphone - 为使用的 App 名称查找 Bundle/Developer

> ID：14399411
> 
> 赞同：3
> 
> 时间：2013-01-18T12:52:56.060
> 
> 标签：iphone, ios, bundle

我正在尝试将应用程序上传到应用程序商店并收到以下错误（这很容易理解）：

`The App Name you have entered has already been used`

该应用程序不在 iTunes 上。有什么方法可以确定谁拥有该应用程序或它与哪个捆绑包 ID 相关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:03:09.033

这意味着该应用名称已被其他开发者注册。如果该开发者已经发布了该应用程序，那么您可以通过在 iTunes 商店中搜索应用程序名称来找到该应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:03:30.093

您可以使用相同的捆绑 ID ..您只需在应用商店中输入不同的名称。

无法找到与其关联的捆绑包 ID。因为它可能尚未在应用商店发布

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T13:14:37.437

应用名称可以保留 180 天（6 个月），详见此处：[iTunes Connect 开发人员指南](https://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/8_AddingNewApps/AddingNewApps.html#//apple_ref/doc/uid/TP40011225-CH13-SW20)

> 创建您的应用程序并处于准备上传或等待上传状态后，您有 180 天（6 个月）的时间从 iTunes Connect 中的创建日期开始向 Apple 提供二进制文件。如果您未在 180 天期限之前交付二进制文件，您的应用程序将从 iTunes Connect 中删除。由于此次删除，您的应用名称可以被其他开发者使用，并且您不能重复使用应用名称、SKU 或捆绑 ID。请参阅“删除应用程序”以了解有关应用程序删除后果的更多信息。

这可能是应用程序不在商店中的原因。没有官方方法可以找出谁拥有该名称或捆绑 ID 是什么。这对开发人员的开发帐户来说都是私有的。

# linux - Linux 主机每秒可以支持多少个请求

> ID：14399414
> 
> 赞同：-1
> 
> 时间：2013-01-18T12:53:08.350
> 
> 标签：linux, http, webserver, cgi-bin

我正在写网络游戏。假设有 500 个用户。每个用户每 5 秒发送一个 HTTP Get 请求。所以我每秒有 100 个请求。它是一个大数字吗？Ansi C Linux cgi-bin 程序在服务器端工作。每个请求从 2-3 个文件中读取/写入大约 100 个字节。

Linux 服务器可以支持多少个请求？有人可以推荐我快速的 Linux 主机吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:14:52.870

[Linux 操作系统本身](https://stackoverflow.com/questions/2350071/maximum-number-of-concurrent-connections-on-a-single-port-socket-of-server)的限制是一次有几千个连接，但它们的服务速度还不清楚。使用数据库后端的带有 wiki 引擎的专用非旧 Web 服务器可以轻松地每秒处理大约 10 个请求，甚至可能更多。

# ios - 显示键盘时尝试向上移动视图

> ID：14399419
> 
> 赞同：3
> 
> 时间：2013-01-18T12:53:28.647
> 
> 标签：ios, objective-c, cocoa-touch

我试图在键盘显示时将视图向上推（它覆盖了我希望用户在输入时看到的数据。我正在使用此代码：

**KBKeyboardHandler.h**：

```
@protocol KBKeyboardHandlerDelegate;

@interface KBKeyboardHandler : NSObject

- (id)init;

// Put 'weak' instead of 'assign' if you use ARC
@property(nonatomic, assign) id<KBKeyboardHandlerDelegate> delegate; 
@property(nonatomic) CGRect frame;

@end 
```

**KBKeyboardHandler.m**：

```
#import "KBKeyboardHandler.h"
#import "KBKeyboardHandlerDelegate.h"

@implementation KBKeyboardHandler

- (id)init
{
    self = [super init];
    if (self)
    {
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(keyboardWillShow:)
                                                     name:UIKeyboardWillShowNotification
                                                   object:nil];

        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(keyboardWillHide:)
                                                     name:UIKeyboardWillHideNotification
                                                   object:nil];
    }

    return self;
}

- (void)dealloc
{
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    [super dealloc];
}

@synthesize delegate;
@synthesize frame;

- (void)keyboardWillShow:(NSNotification *)notification
{
    CGRect oldFrame = self.frame;    
    [self retrieveFrameFromNotification:notification];

    if (oldFrame.size.height != self.frame.size.height)
    {
        CGSize delta = CGSizeMake(self.frame.size.width - oldFrame.size.width,
                                  self.frame.size.height - oldFrame.size.height);
        if (self.delegate)
            [self notifySizeChanged:delta notification:notification];
    }
}

- (void)keyboardWillHide:(NSNotification *)notification
{
    if (self.frame.size.height > 0.0)
    {
        [self retrieveFrameFromNotification:notification];
        CGSize delta = CGSizeMake(-self.frame.size.width, -self.frame.size.height);

        if (self.delegate)
            [self notifySizeChanged:delta notification:notification];
    }

    self.frame = CGRectZero;
}

- (void)retrieveFrameFromNotification:(NSNotification *)notification
{
    CGRect keyboardRect;
    [[[notification userInfo] objectForKey:UIKeyboardFrameEndUserInfoKey] getValue:&keyboardRect];
    self.frame = [[UIApplication sharedApplication].keyWindow.rootViewController.view convertRect:keyboardRect fromView:nil];
}

- (void)notifySizeChanged:(CGSize)delta notification:(NSNotification *)notification
{
    NSDictionary *info = [notification userInfo];

    UIViewAnimationCurve curve;
    [[info objectForKey:UIKeyboardAnimationCurveUserInfoKey] getValue:&curve];

    NSTimeInterval duration;
    [[info objectForKey:UIKeyboardAnimationDurationUserInfoKey] getValue:&duration];

    void (^action)(void) = ^{
        [self.delegate keyboardSizeChanged:delta];
    };

    [UIView animateWithDuration:duration
                          delay:0.0
                        options:curve
                     animations:action
                     completion:nil];    
}

@end 
```

**KBKeyboardHandlerDelegate.h**：

```
@protocol KBKeyboardHandlerDelegate

- (void)keyboardSizeChanged:(CGSize)delta;

@end 
```

示例**MyViewController.h**：

```
@interface MyViewController : UIViewController<KBKeyboardHandlerDelegate>
...
@end 
```

示例**MyViewController.m**：

```
@implementation MyViewController
{
    KBKeyboardHandler *keyboard;
}

- (void)dealloc
{
    keyboard.delegate = nil;
    [keyboard release];
    [super dealloc];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    keyboard = [[KBKeyboardHandler alloc] init];
    keyboard.delegate = self;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    keyboard.delegate = nil;
    [keyboard release];
    keyboard = nil;
}

- (void)keyboardSizeChanged:(CGSize)delta
{
    // Resize / reposition your views here. All actions performed here 
    // will appear animated.
    // delta is the difference between the previous size of the keyboard 
    // and the new one.
    // For instance when the keyboard is shown, 
    // delta may has width=768, height=264,
    // when the keyboard is hidden: width=-768, height=-264.
    // Use keyboard.frame.size to get the real keyboard size.

    // Sample:
    CGRect frame = self.view.frame;
    frame.size.height -= delta.height;
    self.view.frame = frame;
} 
```

我在[这里](https://stackoverflow.com/questions/1775860/uitextfield-move-view-when-keyboard-appears)找到的。我试图弄清楚为什么我的观点没有推高。键盘正在显示并`keyboardSizeChanged`启动，但视图没有移动。我打开了一个新项目并将 KBKeyboardHandler 和委托文件复制到它，实现了代码，并且在新项目中它工作正常，所以我知道这是在我的原始项目中搞砸的一个事实。知道它可能是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:28:29.313

如果您不使用 UITableView 使用 UIScrollView 作为元素的父视图，并根据需要在 Adjust 下面添加代码，

您将需要一个 NSArray 的 NSObjects，我调用了我的 scrollToObjects 并在 viewDidLoad 中将元素添加到需要滚动的数组中，这样当调用 keyboardWasShown 时，您可以检查是否应该滚动到当前选定的元素。

我使用 self.activeField 来存储我当前选择的元素，该元素在元素触发事件时设置（该事件需要是第一个调用的事件之一，并且总是被调用）

然后我检查 scrollToObjects 是否包含 activeField 以及它是否向上滚动 UIScrollView 然后在 activeField resignsFirstResponder 时向下滚动

```
// Call this method somewhere in your view controller setup code.
- (void)registerForKeyboardNotifications
{
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWasShown:) name:UIKeyboardWillShowNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillBeHidden:) name:UIKeyboardWillHideNotification object:nil];
}

// Called when the UIKeyboardDidShowNotification is sent.
- (void)keyboardWasShown:(NSNotification*)aNotification
{
    NSDictionary* info = [aNotification userInfo];
    CGSize kbSize = [[info objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue].size;

    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, kbSize.height, 0.0);
    self.scrollView.contentInset = contentInsets;
    self.scrollView.scrollIndicatorInsets = contentInsets;

    // If active text field is hidden by keyboard, scroll it so it's visible
    // Your application might not need or want this behavior.
    CGRect aRect = self.view.frame;
    aRect.size.height -= kbSize.height;
    // Wouldn't go true so used an array that contains text fields that need to be scrolled   to
    //    if (!CGRectContainsPoint(aRect, self.activeField.frame.origin) ) {
    //        CGPoint scrollPoint = CGPointMake(0.0, self.activeField.frame.origin.y-    kbSize.height);
    //        [self.scrollView setContentOffset:scrollPoint animated:YES];
    //    }
    if ([self.scrollToObjects containsObject:self.activeField]) {
        CGPoint scrollPoint = CGPointMake(0.0, self.activeField.frame.origin.y+    (self.activeField.frame.size.height*2)-kbSize.height);
        [self.scrollView setContentOffset:scrollPoint animated:YES];
    }
}

// Called when the UIKeyboardWillHideNotification is sent 
- (void)keyboardWillBeHidden:(NSNotification*)aNotification
{ 
    // self.scrollView.contentInset = UIEdgeInsetsZero;
    [self.scrollView setContentOffset:CGPointMake(0.0, 0.0) animated:YES];
    self.scrollView.scrollIndicatorInsets = UIEdgeInsetsZero;
} 
```

一个更简单的解决方案是使用以下代码或类似于对象的激活和停用的东西来处理下面的 UITextFieldDelegate 方法

```
-(void)textFieldDidBeginEditing:(UITextField *)textField
{
    CGPoint scrollPoint = CGPointMake(0.0, textField.frame.origin.y);
    [self.theScrollView setContentOffset:scrollPoint animated:YES];
}

-(void)textFieldDidEndEditing:(UITextField *)textField
{
    [self.theScrollView setContentOffset:CGPointMake(0.0, 0.0) animated:YES];
    self.theScrollView.scrollIndicatorInsets = UIEdgeInsetsZero;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:31:49.553

我会检查你的增量计算。

```
CGSize delta = CGSizeMake(self.frame.size.width - oldFrame.size.width,
                              self.frame.size.height - oldFrame.size.height); 
```

我的猜测是`oldFrame`并且`self.frame`可能具有相同的尺寸。

我试图思考是否还有其他可能遗漏的内容，例如将视图正确链接到这些对象或界面编辑器中的某些内容？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-08T22:19:13.463

问题出在keyboardSizeChanged：-您要调整的是frame.origin.y，而不是frame.size.height。至少那是*我*想要它做的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-12T22:32:16.623

您也可以尝试另一个库，它称为[TPKeyboardAvoiding](http://icodetricks.wordpress.com/2014/02/12/uitextfields-and-keyboard-issues/)。它工作得很好，而且很容易设置：

1.  将 UIScrollView 添加到视图控制器的 xib
2.  将滚动视图的类设置为 TPKeyboardAvoidingScrollView（仍在 xib 中，通过身份检查器）
3.  将所有控件放在该滚动视图中

它还自动连接键盘上的“下一步”按钮以切换文本字段。

# java - EDT 和更新状态 textArea

> ID：14399422
> 
> 赞同：0
> 
> 时间：2013-01-18T12:53:44.743
> 
> 标签：java

我想创建新线程（用于服务器）。我有 textArea 放置日志的地方，我创建了一个新的类状态来处理它。我为对象“服务器”运行新线程，我尝试将我的状态对象“交付”到服务器，然后 status.setStatus("blabal"); 但有个问题....

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at Server.<init>(Server.java:16)
at Main.MainPanelButtonStartActionPerformed(Main.java:154)
at Main.access$000(Main.java:9)
at Main$1.actionPerformed(Main.java:63)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.JToggleButton$ToggleButtonModel.setPressed(JToggleButton.java:308)
at 

javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at              java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:696)
    at java.awt.EventQueue$4.run(EventQueue.java:694)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at  java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:91)
Exception in thread "Thread-2" java.lang.NullPointerException
    at Server.run(Server.java:23)
    at java.lang.Thread.run(Thread.java:722)
BUILD SUCCESSFUL (total time: 3 seconds) 
```

我的代码： private void MainPanelButtonStartActionPerformed(java.awt.event.ActionEvent evt) {

```
 if(!serverCreated) {           
        server = new Server(Integer.parseInt(MainPanelTextPort.getText())); 
        server.setStatusObj(status);
        serverThread = new Thread(server);          
        //SwingUtilities.invokeLater(serverThread); don't know how to use it correctly
        serverThread.start();              
        MainPanelButtonStart.setText("Stop");
        serverCreated = true;
    } else {
        if(!(serverThread.isInterrupted()))
        {
            try {
                server.getServerSocket().close();
            } catch(IOException e) {}

            serverThread.interrupt();
            MainPanelButtonStart.setText("Start");
            serverCreated = false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:01:16.520

该变量`status`未在`Server`构造函数的这一行上实例化：

```
status.setStatus("Server Created."); 
```

假设这表示`RUNNING`,`STOPPED`等。这些可以在`Server`类内部设置，因为它将能够确定服务器本身的运行状态。

* * *

常规`Threads`不封装与`Event Dispatch Thread`. [SwingWorker](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)在这里会是一个更好的选择。这篇[文章](https://stackoverflow.com/questions/9588543/server-based-swingworker-does-not-stop)有一个例子。

*旁白：*给定[Java 代码约定](http://www.google.ie/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CCsQFjAA&url=http://www.oracle.com/technetwork/java/codeconv-138413.html&ei=yEf5UImoE8ODhQej3YCwCA&usg=AFQjCNHCDpOmT2td7Qb91n4Zmrftnv-pDw&bvm=bv.41248874,d.ZG4)，`MainPanelTextPort`将表示为`mainPanelTextPort`。

# c# - RedirectFromPage 不适用于 ReturnUrl 中的特殊字符

> ID：14399425
> 
> 赞同：0
> 
> 时间：2013-01-18T12:53:59.973
> 
> 标签：c#, ssrs-2008, form-authentication

我正在为 MS SQL 报告服务开发一个基于表单的身份验证模块，如下所述：

到目前为止一切顺利，但我遇到了这个问题。我调用的 URL 重定向到登录页面进行身份验证，然后页面重定向回返回 url。

URL 示例调用：

```
http://thor/ReportServer/Pages/ReportViewer.aspx?%2fSampleUserReport&rs:Command=Render 
```

此行崩溃：

```
FormsAuthentication.RedirectFromLoginPage(m_username, false); 
```

例外：

```
System.Web.HttpException: Der für die Umleitung von Anforderungen angegebene Rückgabe-URL ist ungültig.
   bei System.Web.Security.FormsAuthentication.GetReturnUrl(Boolean useDefaultIfAbsent)
   bei System.Web.Security.FormsAuthentication.GetRedirectUrl(String userName, Boolean createPersistentCookie)
   bei TQsoft.Windows.Products.SSRS.Authentication.Logon.ServerBtnLogon_Click(Object sender, EventArgs e) 
```

因此，在调查和调试之后，我发现我跳过`&rs:Command=Render`它是否有效。

所以我能想象到的唯一特殊字符就是`:`字符。

任何想法如何使它工作，因为报告服务正在与导航中的那些工作很多。

**更新**

事实证明，我必须像这样重定向自己：

```
Response.Redirect(Request.QueryString["ReturnUrl"].Replace(":","%3A"));
Context.ApplicationInstance.CompleteRequest(); 
```

但这引发了另一个异常：

```
System.Threading.ThreadAbortException: Der Thread wurde abgebrochen.
   bei System.Threading.Thread.AbortInternal()
   bei System.Threading.Thread.Abort(Object stateInfo)
   bei System.Web.HttpResponse.End()
   bei System.Web.HttpResponse.Redirect(String url, Boolean endResponse)
   bei System.Web.HttpResponse.Redirect(String url)
   bei TQsoft.Windows.Products.SSRS.Authentication.Logon.ServerBtnLogon_Click(Object sender, EventArgs e) 
```

我真的是asp.net 上的菜鸟，但是当RoR 赢得我的atm 时开始讨厌它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:38:44.340

我以前遇到过这个问题，但是我想使用 URL 链接传递希伯来字符。

尝试使用`%3A`.

**编辑**

我使用[谷歌翻译](http://translate.google.com)来转换这些字符：只需编写字符/字符串，点击翻译并复制 URL 中的相关部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:47:23.127

`Response.Redirect(HttpServerUtility.UrlEncode(Request.QueryString["ReturnUrl"]));`

这对您有用吗，替换问号 (?)、与号 (&)、斜线 (/) 和空格等字符。

[http://msdn.microsoft.com/it-it/library/zttxte6w.aspx](http://msdn.microsoft.com/it-it/library/zttxte6w.aspx)

# wordpress - WordPress 搜索查询

> ID：14399426
> 
> 赞同：-1
> 
> 时间：2013-01-18T12:54:08.010
> 
> 标签：wordpress, search, phpmyadmin

我想将现有的 wordpress 数据库与我自己的自定义 php 脚本一起使用，但搜索结果出现问题。如何使用 phpmyadmin sql 和 wordpress 搜索查询进行搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:14:24.240

您需要使用[$wpdb 对象](http://codex.wordpress.org/Class_Reference/wpdb)来创建自定义查询。

我不知道您要做什么，但值得记住的是，大多数查询都可以使用 WordPress 功能处理，请尝试使用谷歌搜索您想要实现的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:52:56.250

在 search.php 文件中使用 var_dump(get_defined_vars()) 找到它

对于搜索关键字我喜欢学习 php 的 sql 是

SELECT SQL_CALC_FOUND_ROWS wp_posts.ID FROM wp_posts WHERE 1=1 AND (((wp_posts.post_title LIKE '%i%') OR (wp_posts.post_content LIKE '%i%')) AND ((wp_posts.post_title LIKE '%love%' ) OR (wp_posts.post_content LIKE '%love%')) AND ((wp_posts.post_title LIKE '%to%') OR (wp_posts.post_content LIKE '%to%')) AND ((wp_posts.post_title LIKE '%learn %') OR (wp_posts.post_content LIKE '%learn%')) AND ((wp_posts.post_title LIKE '%php%') OR (wp_posts.post_content LIKE '%php%'))) AND wp_posts.post_type IN (' post', 'page', 'attachment') AND (wp_posts.post_status = 'publish' OR wp_posts.post_author = 1 AND wp_posts.post_status = 'private') ORDER BY wp_posts.post_date DESC LIMIT 0, 10

# php - 云站点中的 PHP 应用程序无法访问在云服务器上运行的 memcached - rackspace

> ID：14399427
> 
> 赞同：0
> 
> 时间：2013-01-18T12:54:12.677
> 
> 标签：php, yii, memcached, rackspace

我在 rackspace 云站点中运行一个 php 应用程序（Yii）。我已经在运行的 rackspace 云服务器上安装了一个 memcached 服务器。问题，我无法访问内存缓存。我收到以下错误

`Memcache::get() [<a href='memcache.get'>memcache.get</a>]: Server xx.xx.xxx.xxx (tcp 11211) failed with: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. (10060)`

```
netstat -an | grep ":11211"
tcp        0      0 0.0.0.0:11211               0.0.0.0:*     LISTEN
tcp        0      0 :::11211                    :::*          LISTEN
udp        0      0 0.0.0.0:11211               0.0.0.0:*                                                                                                              
udp        0      0 :::11211                    :::* 
```

请在以下位置找到缓存配置`main.php`

```
'cache'=>array(
        'class'=>'system.caching.CMemCache',
        'servers'=>array(
            array('host'=>' xx.xx.xxx.xxx', 'port'=>11211, 'weight'=>60),
        ),
    ), 
```

如何让它发挥作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:48:33.557

您是否尝试过通过 iptables 打开端口 11211？我不知道您使用的是哪个发行版，但这里有几个教程：

*   [http://www.rackspace.com/knowledge_center/article/rackspace-cloud-essentials-3-basic-cloud-server-security#iptables](http://www.rackspace.com/knowledge_center/article/rackspace-cloud-essentials-3-basic-cloud-server-security#iptables)
*   [http://www.rackspace.com/knowledge_center/article/sample-iptables-ruleset](http://www.rackspace.com/knowledge_center/article/sample-iptables-ruleset)

此外，由于您在 Rackspace 工作，因此您很可能能够通过实时聊天联系到可以提供帮助的工程师。我一直发现它们确实很有帮助！

# ios - Facebook 用户生成的照片异常 - iOS

> ID：14399434
> 
> 赞同：1
> 
> 时间：2013-01-18T12:54:44.667
> 
> 标签：ios, objective-c, facebook-graph-api, facebook-ios-sdk

我正在使用用户生成的照片将多张图片上传到 Facebook。当我上传 1 或 2 张图片时，一切都按预期工作。当我上传超过 2 个时，我收到以下异常：

```
2013-01-18 14:39:41.662 ByClick[4714:16a03] Error Domain=com.facebook.sdk Code=5 "The     
operation couldn’t be completed. (com.facebook.sdk error 5.)" UserInfo=0x86b5510 
{com.facebook.sdk:ParsedJSONResponseKey=<CFBasicHash 0x86b3ca0 [0x238fb48]>{type = 
mutable dict, count = 2,

entries =>
1 : <CFString 0x1304ac [0x238fb48]>{contents = "code"} = <CFNumber 0x86b3cd0 [0x238fb48]>{value = +400, type = kCFNumberSInt32Type}
2 : <CFString 0x1303ec [0x238fb48]>{contents = "body"} = <CFBasicHash 0x86b3e00 [0x238fb48]>{type = mutable dict, count = 1,

entries =>
11 : <CFString 0x86b4550 [0x238fb48]>{contents = "error"} = <CFBasicHash 0x86b3bf0 [0x238fb48]>{type = mutable dict, count = 3,

entries =>
2 : <CFString 0x86b3be0 [0x238fb48]>{contents = "type"} = <CFString 0x86b4020 [0x238fb48]>{contents = "OAuthException"}
3 : <CFString 0x86b3fc0 [0x238fb48]>{contents = "message"} = <CFString 0x86b3f50 [0x238fb48]>{contents = "(#3503) Missing required value for property "image:url"."}
6 : <CFString 0x86b4540 [0x238fb48]>{contents = "code"} = 3503

}
}
}
, com.facebook.sdk:HTTPStatusCode=400} 
```

但是，在 Graph Explorer 上，即使有 5 张图像，一切都很好。

这是我的 Params 字典的示例：

```
{
"access_token" = BAAB1cz5RzQUBAGoD1LeExTtPp8GqdfB9HbwzTuNuVocqtuuDS4Xhz7U6RtgijzHobZAShxT3TzrlmQlf4HqPt08g27iIdss14vAKtYZBgj1ZCgyMaKO9Q4AHe2V1UjeAcVYflSdEwZDZD;
campaign = "http://www.appmobil.com/byclick/fbPost.php?fb:app_id=129137827237125&og:type=byclick:campaign&og:title=SteakIt&og:description=\U05e1\U05d8\U05d9\U05d9\U05e7 \U05d1\U05e4\U05d9\U05ea\U05d4 \U05d7\U05d3\U05e9 \U05dc\U05d9\U05d3 \U05d4\U05e9\U05e2\U05d5\U05df \U05d1\U05d9\U05e4\U05d5 \n\U05dc\U05e4\U05e8\U05d8\U05d9\U05dd:  www.steakit.co.il&og:image=http://www.appmobil.com/byclick/upload/2848824820.jpg&body=test";
"image[0][url]" = "http://www.appmobil.com/byclick/upload/2848824820.jpg";
"image[0][user_generated]" = true;
"image[1][url]" = "http://www.appmobil.com/byclick/upload/1455803044.jpg";
"image[1][user_generated]" = true;
"image[2][url]" = "http://www.appmobil.com/byclick/upload/3926035232.jpg";
"image[2][user_generated]" = true;
"image[3][url]" = "http://www.appmobil.com/byclick/upload/1691072699.jpg";
"image[3][user_generated]" = true;
"image[4][url]" = "http://www.appmobil.com/byclick/upload/1982850946.jpg";
"image[4][user_generated]" = true;
message = "\U05e1\U05d8\U05d9\U05d9\U05e7 \U05d1\U05e4\U05d9\U05ea\U05d4 \U05d7\U05d3\U05e9 \U05dc\U05d9\U05d3 \U05d4\U05e9\U05e2\U05d5\U05df \U05d1\U05d9\U05e4\U05d5 \n\U05dc\U05e4\U05e8\U05d8\U05d9\U05dd:  www.steakit.co.il";

 } 
```

# python - 在 Django 中使用 formset_factory

> ID：14399435
> 
> 赞同：4
> 
> 时间：2013-01-18T12:54:52.407
> 
> 标签：python, django, django-forms

我是 Django 的新用户，我使用以下代码生成表单

```
class GetMachine(forms.Form):
    Machine_Name = forms.CharField(max_length=20) 
    Number_of_lines = forms.IntegerField(max_value=10)

class GetLine(forms.Form):
    Line_name = forms.CharField(max_length=20)

def install(request):
    if request.method == 'POST':
        form = GetMachine(request.POST) 
        if form.is_valid(): # All validation rules pass
            # Process the data in form.cleaned_data
            form = GetLine()
            return render_to_response('install.html', { 'form': form, })
    else:
        form = GetMachine() # An unbound form

    return render_to_response('install.html', { 'form': form, }) 
```

如何修改上面的代码，使得“Number_of_lines”用于创建n个“Line_Name”表单字段。

例如，如果 Number_of_lines 的值为 2，我想再次要求用户输入两行的名称为

第 1 行的名称：

第 2 行的名称：

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T23:07:08.517

从 POST 数据中获取 number_of_lines 后，您可以将该数字作为“额外”参数传递给表单集工厂。

```
from django.forms.formsets import formset_factory
...
        form = GetMachine(request.POST) 
        if form.is_valid(): # All validation rules pass
            number_of_lines = form.cleaned_data['Number_of_lines']

            GetLineFormSet = formset_factory(GetLine, extra=number_of_lines)
            formset = GetLineFormset()
            form = GetLine()
... 
```

**Protip：** 您还可以使用 max_num 参数将行数保持在合理的范围内：

```
GetLineFormSet = formset_factory(GetLine, extra=number_of_lines, max_num=10) 
```

# c# - 使用断点时代码的行为不同

> ID：14399438
> 
> 赞同：2
> 
> 时间：2013-01-18T12:55:02.080
> 
> 标签：c#, visual-studio-2010, debugging

> **可能重复：**
> [随机数生成器仅生成一个随机数](https://stackoverflow.com/questions/767999/random-number-generator-only-generating-one-random-number)
> [随机而不是随机](https://stackoverflow.com/questions/4858790/random-not-that-random)

这是我第一次尝试使用类和对象，我完全不知道如何处理我目前所处的情况。我正在创建一个需要在屏幕边缘生成敌人的游戏，所以我创建了一个创建 10 个对象并随机选择边缘和合适的坐标分配给它们的方法。

```
 private void spawner()
    {
        if (enemies.Count < 10)
        {
            int a;
            a = 10 - enemies.Count;

            for (int i = 0; i < a; i++)
            {
                int x, y, c;
                Random random = new Random();
                c = random.Next(0, 4);

                if (c == 0)
                {
                    x = random.Next(0, 839);
                    y = 1;
                }
                else if (c == 1)
                {
                    y = random.Next(0, 647);
                    x = 1;
                }
                else if (c == 2)
                {
                    x = 839;
                    y = random.Next(0, 647);
                }
                else
                {
                    y = 647;
                    x = random.Next(0, 839);
                }

                enemies.Add(new Enemy(5, 25, 3, new Point(x, y)));
                enemies[enemies.Count - 1].adjustPosition(player1.centreX, player1.centreY);
            }
        }
    } 
```

然后我调用 Enemy 类中的方法，使坐标更靠近 Player 控制对象的中心，并创建 3 个用于绘制敌人的新点：enemys[enemies.Count - 1].adjustPosition( player1.centreX, player1.centreY);

```
 public class Enemy
    {
        public int enemyLife { get; set; }
        public Point enemyCentre { get; set; }
        public int enemyRadius { get; set; }
        public double enemySpeed { get; set; }
        public Point[] enemyVertices { get; private set; }

        public Enemy(int life, int radius, double speed, Point centre)
        {
            enemyLife = life;
            enemyCentre = centre;
            enemyRadius = radius;
            enemySpeed = speed;
        }

        public void adjustPosition(int centreX, int centreY)
        {
            double vx = 0;
            double vy = 0;
            double mag = 0;
            int x, y;

            if (enemyCentre.X != 0)
            {
                vx = centreX - enemyCentre.X;
                vy = centreY - enemyCentre.Y;
                mag = Math.Sqrt(vx * vx + vy * vy); // length

                vx /= mag;
                vy /= mag;

                x = (int)((double)enemyCentre.X + vx * enemySpeed);
                y = (int)((double)enemyCentre.Y + vy * enemySpeed);
                enemyCentre = new Point(x, y);

                int px, py, px2, py2, px3, py3;
                double angle;

                vx = centreX - x;
                vy = centreY - y;
                mag = Math.Sqrt(vx * vx + vy * vy); // length

                vx /= mag;
                vy /= mag;

                px = (int)((double)x + vx * 20);
                py = (int)((double)y + vy * 20);

                angle = Math.Atan2(centreY - y, centreX - x);

                px2 = (int)(px + (-30 * Math.Cos(0.785398163 + angle)));
                py2 = (int)(py + (-30 * Math.Sin(0.785398163 + angle)));

                px3 = (int)(px + (-30 * Math.Cos(-0.785398163 + angle)));
                py3 = (int)(py + (-30 * Math.Sin(-0.785398163 + angle)));

                Point[] points = new Point[3];
                points[0] = new Point(px, py);
                points[1] = new Point(px2, py2);
                points[2] = new Point(px3, py3);

                enemyVertices = points;
            }
        }
    } 
```

问题是，当我尝试使用“开始调试”执行程序时，每个创建的对象都与最后添加到列表中的对象共享相同的中心坐标。然而，当我在将对象添加到列表之前添加断点并单步执行代码时，对象被分配了应有的随机值。此外，如果我在手动执行某些对象的代码后删除断点，手动运行的对象将包含随机值，而其余对象将共享相同的值。有谁知道是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T13:00:54.733

你的问题是新的 Random() 因为它的调用速度非常快它实际上不会是随机的，因为 .net 用于默认构造函数的随机种子不会改变（我认为他们使用了刻度或从中生成的一些哈希）

只需确保以调用之间有一段时间的方式调用 new Random()，如果您需要“快速”随机数，请使用 next()

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T13:07:43.680

那是因为您正在循环中重新创建 Random() 对象。该对象使用基于时间的种子生成伪随机数，因此在非常快速的循环中创建的几个 Random() 对象将以相同的顺序生成完全相同的值。

当您在循环中间放置断点时，会导致更改 Random() 对象的种子的延迟。

最简单的解决方案是为此方法只创建一次 Random() 对象，并在循环期间重用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T13:13:17.207

Move `Random random = new Random();` outside of the for loop.

It is only necessary to initialize the random number generator once. Perhaps you can make it even a static variable and initialize it only once per entire lifetime of the game. Random must be seeded. It will generate the same sequence of number for the same seed. If you do not specify seed, then current time is used as the seed. Making many calls of new Random() in a short time will create them with the same seed.

# jquery - 多个项目上的 jQuery 动画

> ID：14399441
> 
> 赞同：2
> 
> 时间：2013-01-18T12:55:20.393
> 
> 标签：jquery

在页面上我有多个拇指图像，每个都有它自己的 id，由 php 生成。

我需要为每个元素做 jQuery 动画。

我被困在这里，我如何检测`thumb_id-??`用户悬停的女巫并为其设置动画？

我知道我可以为 onmouseover/out 执行两个简单的 js 函数并传递 id .. 但是还有另一种使用 jQuery 的方法吗？

```
<script>
$(document).ready(function(){
    $('#thumb_id- ??? ').mouseover(function(){
                div = $('div.thumb-img-hover');
                div.animate({opacity: '1'}, 150);
    }).mouseout(function(){
                div.animate({opacity: '0'}, 150);
    });
});
</script> 
```

* * *

```
foreach($arr as $val){
    echo '  
    <a class="group1" text="TESTING" title="" href="'.$baseurl.'uploads/'.$val["filename"].'">
    <div class="thumb-img-container right">
    <div class="thumb-img" style="position:relative;background:url(\''.$baseurl.'uploads/thumbs/'.$val["filename"].'\') no-repeat center center;background-size: cover;">
    <div id="thumb_id-'.$val["id"].'" class="thumb-img-hover"><a href="'.$baseurl.'index.php?action=image&id='.$val["id"].'">test</a></div>
    </div>
    </div>
    </a>
    ';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:57:59.513

您可以使用以选择器开头的属性`$('div[id^=thumb_id]')`，但是为什么不使用类选择器呢？

```
$(document).ready(function(){
    $('div.thumb-img-hover').mouseenter(function(){
         $(this).stop().animate({opacity: '1'}, 150); // this refers to the current element
    }).mouseleave(function(){
         $(this).stop().animate({opacity: '0'}, 150);
    });
}); 
```

您还可以使用 CSS：

```
div.thumb-img-hover {
   opacity: 0.5;
   -webkit-transition: opacity 150ms;  
   -moz-transition: opacity 150ms; 
   -o-transition: opacity 150ms;  
   transition: opacity 150ms;
}
div.thumb-img-hover:hover {
    opacity: 1;
} 
```

# javascript - Knockout JS 更新 DOM 后如何运行代码

> ID：14399443
> 
> 赞同：33
> 
> 时间：2013-01-18T12:55:29.017
> 
> 标签：javascript, knockout.js

作为我观点的一部分，我有：

```
<ul data-bind="foreach: caseStudies">
    <li><a data-bind="text: title, attr: { href: caseStudyUrl }"></a></li>
</ul> 
```

一旦淘汰赛更新了 DOM，我想运行一些第 3 方代码。

```
caseStudies(data);
thirdPartyFuncToDoStuffToCaseStudyLinks(); <-- DOM not updated at this point. 
```

关于如何在正确的时间加入淘汰赛以调用它的任何想法？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-18T13:57:35.013

使用`afterRender`绑定可以帮助您。

```
<ul data-bind="foreach: { data:caseStudies, afterRender:checkToRunThirdPartyFunction }">
    <li><a data-bind="text: title, attr: { href: caseStudyUrl }"></a></li>
</ul>

function checkToRunThirdPartyFunction(element, caseStudy) {
    if(caseStudies.indexOf(caseStudy) == caseStudies().length - 1){
        thirdPartyFuncToDoStuffToCaseStudyLinks();
    }
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-18T13:36:26.923

一种准确的方法是使用 KnockoutJS 按顺序应用绑定的事实（因为它们在 html 中呈现）。您需要在“foreach-bound”元素之后定义一个虚拟元素，并定义调用您的第三方函数的“文本”绑定。

这是html：

```
<ul data-bind="foreach: items">
    <li data-bind="text: text"></li>
</ul>
<!-- ko text: ThirdParyFunction () -->
<!-- /ko --> 
```

这是代码：

```
 $(function () {
        var data = [{ id: 1, text: 'one' }, { id: 2, text: 'two' }, { id: 3, text: 'three' } ];

        function ViewModel(data) {
            var self = this;
            this.items = ko.observableArray(data);
        }

        vm = new ViewModel(data);
        ko.applyBindings(vm);
    });

    function ThirdParyFunction() {
        console.log('third party function gets called');
        console.log($('li').length);
    } 
```

# actionscript-3 - flex web应用程序中的子菜单？

> ID：14399449
> 
> 赞同：0
> 
> 时间：2013-01-18T12:55:45.417
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4.5

我们可以在 flex Web 应用程序的上下文菜单中创建子菜单吗？

我正在使用 flex sdk 4.5 并尝试在上下文菜单下创建子菜单项。

```
 private var myNativeMenu:ContextMenuItem = new ContextMenuItem("Menu",true);
 private var mysubmenu:NativeMenu = new NativeMenu();
 var contextMenu:ContextMenu = new ContextMenu();
 var subMenuItem:NativeMenuItem = new NativeMenuItem("Sub",false);
 subMenuItem.addEventListener(Event.SELECT, updateMe,false,0,true);
 mysubmenu.addItem(subMenuItem);
 myNativeMenu.submenu = mysubmenu;
 contextMenu.customItems.push(myNativeMenu); 
```

出现以下错误：-
- 第 4 行。参数数量不正确。预计不超过 0。
- 第 6 行调用可能未定义的方法 addItem
- 第 7 行访问未定义的属性子菜单

是否可以在 flex web app 中创建子菜单？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:23:13.410

我明白了……不，Adobe 说这是不可能的。

您唯一可以使用的是一组没有子菜单组的菜单命令。

![在此处输入图像描述](../Images/069d1525babe85351902f053f89c229c.png)

# c# - 使用 BindIPEndPointDelegate 指定源端口似乎不起作用

> ID：14399450
> 
> 赞同：4
> 
> 时间：2013-01-18T12:55:45.730
> 
> 标签：c#, httpwebrequest, servicepoint, servicepointmanager

我已经全面搜索了如何使用 BindIPEndPointDelegate 来更改我的 HttpWebRequest 的源端口。我在这方面找到了多个帖子：

[这里](https://stackoverflow.com/questions/11451559/how-to-properly-use-bindipendpointdelegate)和[这里](https://stackoverflow.com/questions/11451559/how-to-properly-use-bindipendpointdelegate/11900706#11900706)

但是，它似乎对我不起作用。我发现这个人也有同样的问题： [Define Outgoing/Calling Port for SOAP Web Service in Visual Studio 2010](https://stackoverflow.com/questions/13055386/define-outgoing-calling-port-for-soap-web-service-in-visual-studio-2010/13056014#13056014)

基本上，我想在连接到网页时更改我的源端口。BindIPEndPointDelegate 非常简单。

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
 req.ServicePoint.BindIPEndPointDelegate = (servicePoint, remoteEp, retryCount) =>
             {
                 return new IPEndPoint(IPAddress.Any, 8086);
             }; 
```

当我使用 netstat -n 查看连接时，我希望将 myipaddress:8086 视为源 IP 和目标 IP:80。我在 netstat 中看到的是它正在使用我指定的端口创建一个环回 (127.0.0.1:8086)。[查看netstat -n](http://www.ecrm-online.com/dl/netstat.jpg)的屏幕截图

由于这是我的第一篇文章，我无法发布图片。所以图片可以在[这里找到](http://www.ecrm-online.com/dl/netstat.jpg)

为什么 BindIPEndPointDelegate 创建一个环回连接，如何让我的 WebRequest 表现得像具有我指定端口的浏览器？

我在一个win7 Pro盒子上，没有本地防火墙，没有通过代理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:24:00.023

我今天遇到了类似的问题。我在 BindIPEndPointDelegate 中选择了一个特定的源端口，但使用 WireShark 我总是看到与我选择的源端口不同的源端口。然后我发现我通过使用[Fiddler2 Web Debugger](http://www.fiddler2.com/fiddler2/)隐式使用了代理。关闭 Fiddler 后，我开始在 WireShark 中看到我在 Bind 委托中请求的源端口号。

结果是，如果您在任何地方都有代理，您可能会看到同样的行为。

# c# - 如何在表单中模拟按钮按下的视觉效果？

> ID：14399453
> 
> 赞同：1
> 
> 时间：2013-01-18T12:55:50.547
> 
> 标签：c#, wpf, wpf-controls

我是 WPF 新手，对表单的行为有疑问。

我添加了一个按键事件来捕捉按下的返回键。

现在的问题是，没有视觉反馈。是否可以让按钮看起来像是被鼠标按下？

它应该看起来像我通过鼠标按下按钮，但是在按下返回之后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:09:07.597

也许解决方案将通过更改`KeyPressed`按钮的事件来解决。

请参阅此代码示例：

`At first, create a button:`

`<ButtonContent="ButtonPressed" Name="buttonPressed" />`

然后你应该添加`Resources`到你的 main.xaml 中，它将告诉按钮它的外观（如网页中的 CSS）。

```
<Window.Resources>
 <Style TargetType="Button">
        <Setter Property="SnapsToDevicePixels" Value="True" />
        <Setter Property="Foreground" Value="White" />
        <Setter Property="Background" Value="{StaticResource GlowFX}" />
        <Setter Property="Width" Value="150" />
        <Setter Property="Height" Value="35" />
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="{StaticResource GlowFXPressed}" />
            </Trigger>
        </Style.Triggers>
</Style> 
```

使用该`Background`属性，我正在更改按钮的默认背景。当`Trigger`您在按钮上方时启动，并且如您所见，它再次使用这两种样式更改背景**注意：将它们粘贴在 Button 样式之前：**

```
<RadialGradientBrush x:Key="GlowFX" GradientOrigin=".5,1" Center=".5,1">
        <GradientStop Offset="0" Color="#990000FF"></GradientStop>
        <GradientStop Offset=".3" Color="#660000DD"></GradientStop>
        <GradientStop Offset="1" Color="#33000000"></GradientStop>
    </RadialGradientBrush>
    <RadialGradientBrush x:Key="GlowFXPressed" GradientOrigin=".5,1" Center=".5,1">
        <GradientStop Offset="0" Color="#990000FF"></GradientStop>
        <GradientStop Offset=".3" Color="#880000DD"></GradientStop>
        <GradientStop Offset="1" Color="#33000000"></GradientStop>
    </RadialGradientBrush> 
```

这适用于 event `IsMoseOver`，但我认为 keypressed 是一样的。只看一点点；）

正如 Rachel 所说，您应该重写完整的模板，并告诉 Press 事件如何处理样式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T13:25:33.327

如果我理解，您想模拟按钮单击的视觉效果，那么，要实现这一点，您必须更改`IsPressed`按钮的属性，但它是只读的，那么，`System.Reflection`很有用：

事件`KeyDown`：

```
typeof(Button).GetMethod("set_IsPressed", BindingFlags.Instance | BindingFlags.NonPublic).Invoke(btnSimulate, new object[] { true }); 
```

和`KeyUp`：

```
typeof(Button).GetMethod("set_IsPressed", BindingFlags.Instance | BindingFlags.NonPublic).Invoke(btnSimulate, new object[] { false }); 
```

# c# - 如何在c#中模拟网页按钮点击

> ID：14399459
> 
> 赞同：0
> 
> 时间：2013-01-18T12:56:06.237
> 
> 标签：c#, browser, web

我知道它可以 `webBrower.Document.GetElementById("Id_Of_Element").InvokeMembers("Click")`通过我找不到它的 ID 的方法来完成。有没有其他方法可以做到这一点。网页 URL 是这个 [http://www.magtifun.ge/index.php?page=1&lang=en](http://www.magtifun.ge/index.php?page=1&lang=en) 我需要模拟按下“登录”按钮！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:04:09.150

If `webBrower.Document.GetElementById("Id_Of_Element").InvokeMembers("Click")` works then you can use this:

```
webBrower.Document.GetElementById('<%= YourElement.ClientID %>').InvokeMembers("Click") 
```

or you can try this:

```
document.getElementById('<%= YourElement.ClientID %>').click() 
```

Returning to the problem with IDs, starting from ASP.NET 4.0 you can use [ClientIDMode](http://msdn.microsoft.com/en-us/library/system.web.ui.clientidmode%28v=vs.100%29.aspx) property for you element. And if you set it into `Static` then the `ClientID` value will be set to the value of the ID property:

```
<asp:TextBox ID="TextBox1" runat="server" ClientIDMode="Static" /> 
```

will be rendered as something like this:

```
 <input id="TextBox1" name="ctl00$MasterPageBody$ctl00$TextBox1" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:58:38.247

你应该看看 webdriver 和 selenium。这些是用于自动化测试的工具。

[网络驱动程序和硒](http://code.google.com/p/selenium/)

# database - 是否在单个 Django 请求中运行的所有查询都在同一个数据库快照上运行？

> ID：14399460
> 
> 赞同：1
> 
> 时间：2013-01-18T12:56:18.117
> 
> 标签：database, django, transactions, consistency

[关于事务管理的Django 文档](https://docs.djangoproject.com/en/dev/topics/db/transactions/)侧重于写操作。我很困惑 Django 对读取一致性的保证是什么。如果一个请求执行多个读取查询，并且第二个请求在这些查询之间写入数据库，是否可以保证第一个请求不会看到修改？

用一个简单的例子来说明这个问题：

```
c1 = select count(*) from Users
   <--- here User added by some other request
c2 = select count(*) from Users
assert c1 == c2 <-- Is this always true? 
```

如果没有这样的保证，是否有可能实现这样的隔离？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:55:40.703

Django 不负责保证这些事情：这取决于数据库。但是默认情况下，Django 确实在其自己的事务中操作每个请求，这确实意味着它被隔离以供读取。

# linux - 未执行 .bashrc

> ID：14399464
> 
> 赞同：-1
> 
> 时间：2013-01-18T12:56:26.400
> 
> 标签：linux, bash

我创建了文件`$HOME/.bashrc`（因为它不存在），添加了一些命令，但它没有运行，这不是我在那里进行的所有设置。
如果您只是在控制台中键入这些命令，它就可以工作。

（托管不是我的）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T13:07:34.817

`.bashrc`问题是，如果将 bash 作为*登录 shell*调用，它将无法读取。（有时有一个系统范围的解决方法可以隐藏这种差异）。

在中添加以下命令`$HOME/.bash_profile`：

```
. "$HOME/.bashrc" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T13:02:38.780

属于超级用户，但因为这是一件相当容易的事情：

BASH 配置文件在创建/修改时不会自动加载 - 您必须重新打开 BASH 会话才能加载它们，或者`source ~/.bashrc`手动运行以加载内容。

# php - 在 php 中的 db 连接函数中的错误消息中显示 js 警报

> ID：14399470
> 
> 赞同：1
> 
> 时间：2013-01-18T12:56:37.397
> 
> 标签：php, javascript, mysql, class

嗨，我在**db 类中创建了一个函数**

```
FUNCTION DB_Class($dbname, $username, $password) {
          $this->db = MYSQL_CONNECT ('localhost', $username, $password)
           or DIE ("Unable to connect to Database Server");

          MYSQL_SELECT_DB ($dbname, $this->db) or DIE ("Could not select database");
     } 
```

如何在**连接**时在此函数中显示 js**警报**中的错误消息**失败**

 **** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:59:12.817

尝试

```
<?php
    FUNCTION DB_Class($dbname, $username, $password) {
        $this->db = MYSQL_CONNECT ('localhost', $username, $password);

        if (!$this->db)
            echo '<script> alert("Connection error1"); </script>';

        if (!MYSQL_SELECT_DB ($dbname, $this->db))
            echo '<script> alert("Connection error2"); </script>';
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:06:15.660

您将不得不停止使用 die() 的连接函数。trigger_error() 转储错误而不杀死脚本：

```
function DB_Class($dbname, $username, $password) {

    $this->db = mysql_connect ('localhost', $username, $password) 
            or trigger_error (mysql_error());

    mysql_select_db ($dbname, $this->db) 
            or trigger_error ("Could not select database");
} 
```

然后，在您的页面上，您需要访问数据库包装类的 $db 属性（我假设您的代码是某种客户数据库包装类的一部分）：

```
if(!is_resource($databaseObject->db)){
    echo '<script>alert("Unable to connect to Database Server!");</script>';
} 
```***

# jquery - 在 dataTable.net 绘制表格之前执行一个函数

> ID：14399477
> 
> 赞同：1
> 
> 时间：2013-01-18T12:56:46.257
> 
> 标签：jquery, ajax, datatable

我正在使用[dataTable.net](http://www.datatables.net/)插件在我的 html 页面上绘制表格，它工作正常。我想执行一个函数说它`xyz()`包含一个ajax调用（ajax调用也按我的意愿执行）。在绘制表格之前我想执行`xyz()`函数，但它是先绘制表格然后执行函数。我打电话`xyz()`给

```
 $(function () {
    xyz();

    // dataTable.net code.

    });

    xyz()
    {
       $.ajax(
       {
          // some code
       }); 
    } 
```

实际上，我正在从服务器获取一些数据，并尝试将其呈现给 dataTable.net，但 dataTable.net 首先是在 ajax 调用完成之后绘制表格，尽管我在 dataTable.net 之前调用 ajax。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:54:42.480

我不确定，但我认为 JavaScript 不等待 ajax 完成意味着返回一些数据，它只是在继续。我认为，它只是执行 ajax 功能并进一步发展。现在我通过在ajax成功中绘制dataTable来管理它，如果有人可以改进它，请编辑它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:08:05.647

试试这个 ：-

```
$(document).ready(function() {
      xyz();
        $('Your Div ID').load(function() {
           // // dataTable.net code.
         });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-11T07:17:59.337

[http://legacy.datatables.net/usage/callbacks](http://legacy.datatables.net/usage/callbacks)，使用回调“fnInitComplete”

```
$(document).ready( function() {
    $('#example').dataTable( {
        "fnInitComplete": function(oSettings, json) {
          //check first draw
            if (json.draw == 1) {
                xyz(); //call your function here
            }
        }
    });
}); 
```

# tfs - 导出测试用例和共享步骤

> ID：14399479
> 
> 赞同：1
> 
> 时间：2013-01-18T12:56:48.640
> 
> 标签：tfs, export

有没有办法使用数据库查询将测试用例和共享步骤从一个项目导出到 TFS 2012 中的另一个项目？

我已经尝试过 TFS 集成工具，但它没有像我预期的那样工作，所以我想知道是否有任何方法可以通过连接到 SQL Server 并将所有项目直接从数据库导出和导出到数据库来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-03T21:47:57.340

几天前，我需要为更新版本的 TFS (TFS 2013) 导出 Excel 测试用例。事实证明，仍然没有导出到 TFS 内置的 Excel 功能（与电子邮件和打印相反），并且这些工具随着时间的推移变得不兼容。

但我发现这个 Revival-Tool 似乎有效：

[https://github.com/jorupp/ExportTestCases](https://github.com/jorupp/ExportTestCases)

只是想指出这一点，即使它可能与 TFS2012 的这个主题没有直接关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:39:42.420

你不应该直接在数据库中工作，因为微软不支持它，你可能会伤害它很多。

我经常使用 TFS 集成平台工具来迁移 TFS2010 项目，但从未将它用于 TFS2012。我的经验很好，将所有测试用例和共享步骤迁移到另一个 TeamProject 应该不是问题。如果您在两个项目中具有相同的工作项类型定义，则无需创建字段映射。

另一种选择是将 Excel 用作“导出”和“导入”缓存，但您可能会丢失一些信息，因为并非所有内容都可以在 Excel 中显示，例如测试用例的步骤、历史记录、工作项链接。

如果您擅长使用 TFS API 进行编程，您可以编写自己的小型迁移器，但这可能需要付出很多努力。

总而言之，TFS 集成平台应该是最简单和最好的方式，那么您有哪些期望没有实现？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T07:09:57.410

您可以使用替代方法。

[首先使用“测试用例提取器”](http://testcaseextractor.codeplex.com)导出所有测试用例 。

[他们使用“测试用例导入工具”](http://tcmimport.codeplex.com)将它们导入新项目 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-28T12:35:35.093

除了上面提到的一点，对于导出测试用例，您可能会发现以下链接更有用： [http ://tfstestcaseexporttoexcel.codeplex.com/](http://tfstestcaseexporttoexcel.codeplex.com/)

我试了一下，发现它非常有用且易于使用。

# ios - 它如何调用新的导航设计 iOS

> ID：14399483
> 
> 赞同：1
> 
> 时间：2013-01-18T12:57:29.567
> 
> 标签：ios, templates

我正在寻找类似 facebook 中的模板或设计功能。如果您向左滑动导航，您可以选择另一个菜单点。如果你有名字或其他东西，我不知道我怎么能在互联网上寻找。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T13:05:34.510

这是通过使用字符串搜索 goole 的两个快速链接**`facebook menu item project iphone`**

1.  [适用于 iOS 的 JTRevealSidebar](http://www.cocoacontrols.com/platforms/ios/controls/jtrevealsidebar)
2.  [Facebook 侧边菜单易于使用的组件](http://www.chupamobile.com/products/details/338/Facebook+side-menu+easy+to+use+component/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:05:15.877

使用[Inferis](https://github.com/Inferis/ViewDeck)库。它允许您设置左、右、顶部和底部控制器。

# css - 如何在不同的导航器和操作系统中呈现 Segoe UI 字体

> ID：14399484
> 
> 赞同：3
> 
> 时间：2013-01-18T12:57:36.960
> 
> 标签：css, layout, font-face, webfonts

我有一些遵循微软 Metro 风格的 Web 应用程序（即：新前景）。但是我在使用我使用的字体时遇到了问题。默认字体是“Segoe”系列，当用户在具有桌面字体 Segoe UI 的系统中输入应用程序时，一切正常。但在某些情况下，用户使用的 Mac 或 Ubuntu 没有“Segoe UI”，并且导航器使用辅助字体（在我的例子中是 Tahoma）。

在新的 Outlook 中，无论您使用什么操作系统，它始终使用 Segoe UI 系列（我认为他们使用的是网络字体）

有些人跟我说话使用网络字体，但我没有找到任何地方（我在很多网络字体网站上搜索过）Segoe 家族的网络字体。

有人知道我如何解决这种情况吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T08:22:05.460

首先，每个浏览器都有不同类型的字体。为确保它适用于所有浏览器，您至少需要放置 3 种类型：eot、ttf、woff（和 svg）。获得这些的最佳方法是使用以下链接之一：[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)，[http://fontface.codeandmore.com/](http://fontface.codeandmore.com/)

这非常简单，您将获得一套现成的字体。下载您的字体集后，您将找到示例文件，您将在其中了解如何使用您的新字体。

在您的情况下，它可以是：

```
@font-face {
    font-family: 'Segoe';
    src: url('/font_path/Segoe.eot');
    src: url('/font_path/Segoe.eot?#iefix') format('embedded-opentype'),
         url('/font_path/Segoe.woff') format('woff'),
         url('/font_path/Segoe.ttf') format('truetype'),
         url('/font_path/Segoe.svg#Segoe') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

`/font_path/`是根据此 css 文件的字体的相对路径。通常是`../fonts/`.

为什么你需要所有这些？

ttf、otf - 适用于：FireFox、Chrome < 6、Safari 和 Opera

oet - 适用于：Internet Explorer < 9

svg - 适用于：Safari Mobile（iPhone、iPad for iOS < 4.2）、Android 浏览器

woff - 适用于：Internet Explorer >= 9、FireFox >= 3.6、Chrome >= 6

`Segoe.eot`- 和其他是那些字体文件的链接（在这种情况下是相对的）。

**编辑**

因为`fontsquirrel.com`不渲染某些字体，并且`fontface.codeandmore.com`有时已更改为商业字体您将不得不谷歌搜索其他字体`online font generator`。

**编辑**

如果`fontsquirrel.com`没有帮助您尝试使用：`http://www.font2web.com/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:14:51.913

使用 CSS 指定字体在操作系统中不可用时可以下载的位置。将此添加到 CSS 文件的开头：

```
@font-face {
    font-family: Segoe;
    src: url('/fonts/segoe.ttf');
} 
```

ttf 格式适用于大多数浏览器。对于 IE，将 eot 版本的位置添加到条件 IE 样式表中：

```
@font-face {
    font-family: Segoe;
    src: url('/fonts/segoe.eot');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T17:53:59.140

我们的用户面临与 Segoe 相同的问题。解决方案是使用 Fontforge 删除 TTF Names 中的字体外语

[http://fontface.codeandmore.com/blog/ie-7-8-error-with-eot-css3111/](http://fontface.codeandmore.com/blog/ie-7-8-error-with-eot-css3111/)

# grand-central-dispatch - ICarousel 视图未更新

> ID：14399493
> 
> 赞同：0
> 
> 时间：2013-01-18T12:58:02.327
> 
> 标签：grand-central-dispatch, icarousel

您好，我在我的应用程序中使用轮播来显示推文。虽然这个过程花费了很多时间来显示视图控制器，所以我使用 GDC 来加载视图控制器，然后在下载推文时更新轮播视图

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{
    if (!view)
    {
        //load new item view instance from nib
        //control events are bound to view controller in nib file
        view = [[[NSBundle mainBundle] loadNibNamed:@"Empty" owner:self options:nil] lastObject];

        //[self performSelectorInBackground:@selector(loadthetweets) withObject:nil ];
        //[self performSelectorInBackground:@selector(loadfromtheweb:) withObject:nil];
        //[self performSelectorOnMainThread:@selector(loadthetweets) withObject:nil waitUntilDone:YES];

        //[self performSelectorInBackground:@selector(loadthetweets) withObject:nil];
        /*
        NSString *feedname=@"http://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=shoplog1&count=20";

        NSURL *feedURL =[NSURL URLWithString:feedname];

        //The JSON Part
        NSData *data =[NSData dataWithContentsOfURL:feedURL];

        NSError* error;
        _tweets= [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableLeaves
                                                   error:&error];

        maintext=[[_tweets objectAtIndex:index]objectForKey:@"text"];
        NSArray *piecesOfOriginalString = [maintext componentsSeparatedByString:@"http"];
        NSString *firstetxt=[piecesOfOriginalString objectAtIndex:0];
        NSLog(@"The first text: %@",firstetxt);
        NSString *link=[@"http" stringByAppendingString:[piecesOfOriginalString objectAtIndex:1]];
        linktogo=[NSURL URLWithString:link];
        text.text=firstetxt;

        NSLog(@"The link text: %@",link);
        //NSDictionary *new =[[[tweets objectAtIndex:index]objectForKey:@"entities"]objectForKey:@"urls"];
        NSDictionary *retweeted=[[_tweets objectAtIndex:index]objectForKey:@"retweeted_status"];
        if (retweeted) {
            NSString *urlll=[[[[_tweets objectAtIndex:index]objectForKey:@"retweeted_status"]objectForKey:@"user"]objectForKey:@"profile_image_url"];
            NSURL *iiii=[NSURL URLWithString:urlll];
            usericon.image=[UIImage imageWithData:[NSData dataWithContentsOfURL:iiii]];
            username.text=[[[[_tweets objectAtIndex:index]objectForKey:@"retweeted_status"]objectForKey:@"user"]objectForKey:@"screen_name"];
        }else{
            username.text=@"Shoplog";
            usericon.image=[UIImage imageNamed:@"MyIcon copy_57.png"];
        }
         */
         [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];
        [Provideractivity startAnimating];
        [ContentActivity startAnimating];

        dispatch_queue_t concurrentQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

        dispatch_async(concurrentQueue, ^{

            [self loadthetweets];
            //[self loadfromtheweb:[NSNumber numberWithUnsignedInt:index ]];
            dispatch_async(dispatch_get_main_queue(), ^{
                //[self loadfromtheweb:[NSNumber numberWithUnsignedInt:index ]];
                maintext=[[_tweets objectAtIndex:index]objectForKey:@"text"];
                NSArray *piecesOfOriginalString = [maintext componentsSeparatedByString:@"http"];
                NSString *firstetxt=[piecesOfOriginalString objectAtIndex:0];
                NSLog(@"The first text: %@",firstetxt);
                NSString *link=[@"http" stringByAppendingString:[piecesOfOriginalString objectAtIndex:1]];
                linktogo=[NSURL URLWithString:link];
                text.text=firstetxt;

                NSLog(@"The link text: %@",link);
                //NSDictionary *new =[[[tweets objectAtIndex:index]objectForKey:@"entities"]objectForKey:@"urls"];
                NSDictionary *retweeted=[[_tweets objectAtIndex:index]objectForKey:@"retweeted_status"];
                if (retweeted) {
                    NSString *urlll=[[[[_tweets objectAtIndex:index]objectForKey:@"retweeted_status"]objectForKey:@"user"]objectForKey:@"profile_image_url"];
                    username.text=[[[[_tweets objectAtIndex:index]objectForKey:@"retweeted_status"]objectForKey:@"user"]objectForKey:@"screen_name"];
                    NSURL *iiii=[NSURL URLWithString:urlll];
                    usericon.image=[UIImage imageWithData:[NSData dataWithContentsOfURL:iiii]];

                }else{
                    username.text=@"Shoplog";
                    usericon.image=[UIImage imageNamed:@"MyIcon copy_57.png"];
                }

                [ContentActivity stopAnimating];
                [ContentActivity hidesWhenStopped];
                [Provideractivity stopAnimating];
                [Provideractivity hidesWhenStopped];

                 [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];
            });
        });

    }
    return view;

} 
```

这里的问题是 Carousel 的第 11 个元素已正确更新，其余部分为空白，我不知道为什么。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:50:01.217

在您的`if (!view) {...}`块中，仅创建视图，不要配置它。在此 if 语句之后和之外配置视图。传入的视图`- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view`可能已经创建，如果是，它不会进入您的 if 块，并且推文将永远不会被加载，因为 if 永远不会被配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T07:58:07.273

感谢您的回答 ！，虽然我已经设法将推文的下载放在一个函数之外， `(UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view` 并从视图控制器的 initfromnib 函数中调用它，但现在需要更少的时间！

# lua - 在 onButtonEvent 函数中 t.value 不更新

> ID：14399498
> 
> 赞同：0
> 
> 时间：2013-01-18T12:58:11.733
> 
> 标签：lua, coronasdk, lua-table

我正在为我正在开发的游戏设计一个奇数轮，每​​次按下按钮时，该`onButtonEvent`功能应该检查所选单词是否是奇数，然后用不同的单词刷新按钮。

文字正在更新，分配给每个按钮的值也在更新，我一直在将其打印到控制台。我认为问题在于，当我分配`right[num] = t.value`进入表格的唯一值是最初分配给按钮的前 3 个值时。为什么这个不更新？

```
local function onButtonEvent( event )
    local t = event.target
    --local phase = event.phase
    if event.phase == "release" then
        --num = num + 1
        displayBtns()
        right[num] = t.value
        print(right[1])
        print(right[2])
        print(right[3])
        print(right[4])
        -- --s3 = table.concat(right)
        --print(s3)
        if right[num] == answers[num].right then
                print("correct!")
        elseif right[num] == answers[num].wrong then
                -- t.alpha = 0
                -- select.alpha = 1
                print("incorrect!")
        elseif right[num] == answers[num].wrong2 then
        else
                print("incorrect!")
        end
        num = num + 1
        num2 = num2 + 1
        s3 = ""
        -- display.remove( btn3 )
        -- btn3 = nil
        -- display.remove( btn2 )
        -- btn2 = nil
        -- display.remove( btn1 )
        -- btn1 = nil
    end
    --num = math.random(1,#t)
    s3 = ""
end
 function displayBtns()
btn3 = widget.newButton{
    default = "images/Round4_blue_button.png",
    label = answers[num].right,
    fontSize = 22,
    labelColor = { default={ 255, 250, 250}, over={ 0, 0, 0,} },
    onEvent = onButtonEvent
}
 btn3.value = answers[num].right
print(btn3.value)
 btn2 = widget.newButton{
    default = "images/Round4_blue_button.png",
    label = answers[num].wrong2,
    fontSize = 22,
    labelColor = { default={ 255, 250, 250}, over={ 0, 0, 0,} },
    onEvent = onButtonEvent
}
btn2.value = answers[num].wrong2
print(btn2.value)
 btn1 = widget.newButton{
    default = "images/Round4_blue_button.png",
    label = answers[num].wrong,
    fontSize = 22,
    labelColor = { default={ 255, 250, 250}, over={ 0, 0, 0,} },
    onEvent = onButtonEvent
}
btn1.value = answers[num].wrong
print(btn1.value)
print("----------")
  --btn3.label = answers[num].right
-- p1Button = display.newImage("images/SinglePlayer_button.png", 90, 140)
-- p2Button = display.newImage("images/2Player_button.png", 90, 220)
 -- p1Button.touch = onSceneTouch
-- p1Button:addEventListener("touch", p1Button)
 -- p2Button.touch = onSceneTouch1
-- p2Button:addEventListener("touch", p2Button)
btn1.x = 90;  btn1.y = 245
btn2.x = 240; btn2.y = 245
btn3.x = 390; btn3.y = 245
-- p2Button.x = 240; p2Button.y = 260
 end
displayBtns() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:02:23.893

问题大概出在这里：

```
elseif right[num] == answers[num].wrong2 then
else
    print("incorrect!")
end 
```

`elseif`您在声明中没有设置任何内容。

# html - Sharer.php 获取错误的 html

> ID：14399499
> 
> 赞同：0
> 
> 时间：2013-01-18T12:58:11.593
> 
> 标签：html, facebook-sharer

当我尝试分享这个 [http://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fbit.ly%2F11E4n6g&t=AT%26B.+SRL](http://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fbit.ly%2F11E4n6g&t=A.T.%26B.+SRL) 来自[http://www的内容.biofach.de/de/](http://www.biofach.de/de/)将显示在帖子中。

[http://bit.ly/11E4n6g](http://bit.ly/11E4n6g) 实际上链接到 [http://m.biofach.de/de/ausstellersuche/?focus=exhibitor&focus2=155689&focus3=bio13](http://m.biofach.de/de/ausstellersuche/?focus=exhibitor&focus2=155689&focus3=bio13) 有 og:description 和 og:image 但未加载。

我们有一个针对非移动设备的重定向，但应该为带有“Facebook|Twitter|Bitly|Xing|Tweet”的用户代理禁用它。这种行为可以用 [http://m.biofach.de/de/ausstellersuche/?focus=exhibitor&focus2=155689&focus3=bio13&dononmobileredirect=false来模拟](http://m.biofach.de/de/ausstellersuche/?focus=exhibitor&focus2=155689&focus3=bio13&dononmobileredirect=false)

我的 Facebook 页面上的链接是正确的，但文本/图像不是来自所需页面，而是来自某个重定向页面。

现在我什至在我的日志文件中都看不到重定向的请求了。facebook 从哪里得到不正确的数据？

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:58:27.023

感谢囚徒：

[http://developers.facebook.com/tools/debug/og/object](http://developers.facebook.com/tools/debug/og/object)

可以帮助跟踪获取共享者 url 以进行显示的路由。

# git - 同时变基多个分支

> ID：14399504
> 
> 赞同：0
> 
> 时间：2013-01-18T12:58:24.507
> 
> 标签：git, rebase

第一：就我而言，我是唯一的开发人员，与其他开发人员的拉取、合并等冲突目前不是问题。

我有一个看起来像这样的分支 3。我有一个主分支和多个作为主分支子级的测试分支。但是，我所做的一些更改需要在 master 分支上应用，然后所有其他分支都使用它重新设置基础，以便具有与 master 变体相同的功能/错误。

在这种情况下，我通常的工作流程是：

1.  我向主人提交更改

    ```
    git commit -as 
    ```

2.  然后我必须遍历所有其他分支并使用 master 重新设置它们。

    ```
    git checkout test_1
    git rebase master
    git checkout test_2
    git rebase master
    git checkout test_3
    git rebase master
    git checkout test_4
    git rebase master
    ... 
    ```

有没有办法让它自动化。我在`ubuntu`，我使用`bash`外壳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:00:18.870

您可以通过留在 master 上来避免检查每个分支并执行以下操作：

```
git rebase master test_2 
```

剩下的，一个快速的 bash 命令就可以完成这项工作

```
for branch in test_1 test_2 test_N
do
   git rebase master $branch
done 
```

# sql - 用序列更新现有记录的最快方法是什么？

> ID：14399509
> 
> 赞同：6
> 
> 时间：2013-01-18T12:58:43.510
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-update

我有一个带有主键、外键和空序列值的数据集。根据外键向数据添加序列号的最快方法是什么？

`QuestionConditionId`是我的主键，`QuestionId`是外键。这是通过 on 选择 order 后的数据`QuestionId`：

![在此处输入图像描述](../Images/107ef605c2322565bc1edd43e57caa31.png)

更新后我的数据应该是这样的：

![在此处输入图像描述](../Images/4de76429c99b8b5e293131ecfcf86c74.png)

我可以为此编写一个循环，但我希望更小更高效。有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T13:01:26.330

```
WITH T
     AS (SELECT *,
                ROW_NUMBER() OVER (PARTITION BY QuestionId 
                                       ORDER BY QuestionConditionId ) AS RN
         FROM   YourTable)
UPDATE T
SET    Sequence = RN 
```

但是在插入、更新、删除之后保持此`Sequence`列同步可能比它的价值更麻烦。您也可以使用时间`ROW_NUMBER`计算`SELECT`而不是存储它。

# xcode - 将 SDL 与 xCode 4.5 一起使用

> ID：14399512
> 
> 赞同：1
> 
> 时间：2013-01-18T12:58:51.813
> 
> 标签：xcode, sdl

我知道对此有几个问题。我已经浏览了所有这些，但仍然没有找到答案。

我正在尝试在我的 Mac 上将 SDL 与 xCode 一起使用。我正在使用 xCode 4.5

我完全按照[本](http://lazyfoo.net/SDL_tutorials/lesson01/mac/xcode/index.php)教程进行了两次！我什至尝试了第二个教程，它基本上是一样的，但它仍然没有编译。

当我编译我得到这个错误：

```
Ld /Users/shardy/Library/Developer/Xcode/DerivedData/SDL_SetUp-efqnmqdzqqtkktbodsopeytuwjxt/Build/Products/Debug/SDL_SetUp normal x86_64
cd "/Users/shardy/Desktop/shardy/C++ Programs/GlutApps/SDL_SetUp"
setenv MACOSX_DEPLOYMENT_TARGET 10.7
     /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch x86_64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk -L/Users/shardy/Library/Developer/Xcode/DerivedData/SDL_SetUp-efqnmqdzqqtkktbodsopeytuwjxt/Build/Products/Debug -F/Users/shardy/Library/Developer/Xcode/DerivedData/SDL_SetUp-efqnmqdzqqtkktbodsopeytuwjxt/Build/Products/Debug -F/Library/Frameworks -filelist /Users/shardy/Library/Developer/Xcode/DerivedData/SDL_SetUp-efqnmqdzqqtkktbodsopeytuwjxt/Build/Intermediates/SDL_SetUp.build/Debug/SDL_SetUp.build/Objects-normal/x86_64/SDL_SetUp.LinkFileList -mmacosx-version-min=10.7 -stdlib=libc++ -framework SDL -framework Cocoa -o /Users/shardy/Library/Developer/Xcode/DerivedData/SDL_SetUp-efqnmqdzqqtkktbodsopeytuwjxt/Build/Products/Debug/SDL_SetUp

Undefined symbols for architecture x86_64:
"_main", referenced from:
  start in crt1.10.6.o
 (maybe you meant: _SDL_main)
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

其次是：

```
 "_main", referenced from:
 Start in crt1.10.6.o
 (maybe you meant:_SDL_main)
 Symbol(s) not found for architecture x86_64
    Linker command failed with exit code 1 (use -v to see invocation) 
```

我最初使用的是 xCode 4.3 并且它无法编译，所以我将 xCode 更新到 4.5 认为可能是 xCode 引起了问题并再次尝试了一切，但不幸的是，仍然没有编译......我没有足够的经验知道如何解决这个问题而且我没有相关的线程可以阅读...谢谢。

# vba - 如何使用 VBA 在 Excel 中移动图像？

> ID：14399514
> 
> 赞同：3
> 
> 时间：2013-01-18T12:58:55.197
> 
> 标签：vba, excel, excel-2007

我想使用 VBA 将图像从 excel 中的一个位置移动到另一个位置。

我们怎么能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T17:00:02.087

如果您需要更改图像在给定工作表中的位置，您可以使用以下内容：

```
ActiveSheet.Shapes.Range(Array("Picture 1")).Select
Selection.ShapeRange.IncrementLeft 100 
```

您可以通过更改 .Increment... 命令的参数来调整运动的方向和数量，例如为图像设置动画。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-10T15:13:32.580

另一个例子：垂直移动图片以与特定行对齐

```
Sheets(1).Shapes("Picture 1").Top = Sheets(1).Rows(24).Top 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T13:55:57.440

如果我们走得又快又脏，需要在床单之间移动，则以下工作

```
Sub CutAndPasteAPicture(shapeName As String, fromSheet As String, toSheet As String, toRange As String)
'Cut and Paste
Sheets(fromSheet).Shapes(shapeName).Cut
Sheets(toSheet).Paste Sheets(toSheet).Range(toRange)
End Sub

Sub Example()
  CutAndPasteAPicture "Picture 1", "Sheet1", "Sheet2", "D2"
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-23T10:46:52.720

这是首先将图片插入 Excel，然后调整或调整图片大小的代码。稍后将图片向下或向右移动

```
'Insert the Picture from the path if its not present already

Set myPict = Thisworkbook.sheets(1).Range("A1:B5").Parent.Pictures.Insert(ThisWorkbook.Path & "\" & "mypic.jpg")

'Adjust the Picture location
    myPict.Top = .Top
    myPict.Width = .Width
    myPict.Height = .Height
    myPict.Left = .Left
    myPict.Placement = xlMoveAndSize
    'myPict.LockAspectRatio = msoTriStateMixed

'Change the width of the Picture
    myPict.Width = 85
'change the Height of the Picutre
    myPict.Height = 85
End With

'Select the Picutre
myPict.Select

'Move down the picture to 3 points. Negative value move up

Selection.ShapeRange.IncrementTop 3

'Move towards right upto 5 points. Negative value moves towards right
Selection.ShapeRange.IncrementLeft 5 
```

# java - JPA 仅使用 PK 持久化

> ID：14399515
> 
> 赞同：0
> 
> 时间：2013-01-18T12:58:58.333
> 
> 标签：java, database, jpa, jpql, openjpa

我有一个控制数据 DB-TABLE 实体

```
@Table(name = "A")
class A {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)   
    @Column(name = "A_OID")
    private Long pk;
} 
```

和一个引用上述 DB-TABLE 和其他一些的 DB-VIEW 实体

```
@Table(name = "A_VIEW")
class ARef {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)   
    @Column(name = "A_OID")
    private Long pk;

    private String value;
} 
```

从其中`value`加入了一些。`pk`指的是同一行。我怎样才能保存我的实体`B`，指的是`ARef`，使用`A`，像这样：

```
class B {
    public ARef a;
}

A a = em.find(A.class, pk);
B b = new B();
b.a = a; // How to do this? Using pk somehow? 
```

还有更多的东西，所以不能简单地`ARef a = em.find(ARef.class, pk);`代替。

我知道 OpenJPA 中有某种类型的“本机 SQL”支持，但这太低级了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:01:10.817

First you should change ARef to public if You wanna use "b.a" to instantiate.

```
class B {
    public ARef a;
}

A a = em.find(A.class, pk);
B b = new B();
b.a = a; 
```

Backing to the problem.. I use to pass the reference as a parameter from the controller class to view class

Like this:

```
A a = new A();
ARef aref = new ARef(a); 
```

# java - 在android 4中设置墙纸可滚动

> ID：14399518
> 
> 赞同：1
> 
> 时间：2013-01-18T12:59:06.627
> 
> 标签：java, android, eclipse, wallpaper

早上好，我有一个代码可以正确设置壁纸，当我设置壁纸时，它是从网络下载的，大小为 1024 x 768 的 jpg，它分发到所有主屏幕，但从 android 4+ 开始，它们不可滚动，放置一个为所有主屏幕修复了部分图像我想解决这个问题，所以我希望你能帮助我

问候和对不起我英语

```
//path is a String with image's url
public int setWallpaper(String path) {          
    int width, height;
    Bitmap dbm, bm;         
    bm = null;
    dbm = null; 
    InputStream is = null;

    WallpaperManager wpm = wallpaperManager.getInstance(this);              

    //all images are 1024x 768 
    //to scale bitmap the widht have to be 1.33 bigger than screen's height
    if((wpm != null) && (dis != null)){ 
        height = dis.getHeight();
        width = (int) (height * 1.33);              

        try {           
            URLConnection conn = new URL(path).openConnection();                
            conn.connect();             
            is = conn.getInputStream();                 

            if (is != null) {                   
                bm = BitmapFactory.decodeStream(new FlushedInputStream(is));                    
                dbm = Bitmap.createScaledBitmap(bm, width, height, false);                  
                wpm.setBitmap(dbm); 

            }else {
                return 2;
            }

        } catch (MalformedURLException e) {                 
            e.printStackTrace();                
        } catch (IOException e) {               
            e.printStackTrace();                
        } finally {             
            if (is != null) {
                try {
                    is.close();
                }
                catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }           
        if(bm != null){
            bm.recycle();
        }
        if(dbm != null){
            dbm.recycle();  
        }           
    }else {
        return 1;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:31:26.930

它们在 android 4 上不再可滚动，但是，为了避免它们被放大，您可以执行以下操作：

```
// get screen dimensions
DisplayMetrics displaymetrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
int height = displaymetrics.heightPixels;
int width = displaymetrics.widthPixels;

wpm.suggestDesiredDimensions(width, height);
wpm.setBitmap(dbm); 
```

通过使用SuggestDesiredDimensions，您可以指定壁纸的大小。

来自开发者参考：

> 公共无效建议DesiredDimensions（int minimumWidth，int minimumHeight）
> 
> 自：API 级别 5 仅供当前家庭应用程序使用，以指定要使用的壁纸尺寸。这允许此类应用程序拥有比物理屏幕更大的虚拟壁纸，与其工作空间的大小相匹配。
> 
> 请注意似乎没有阅读此内容的开发人员。这是为了让主屏幕告诉他们想要什么尺寸的壁纸。其他人不应该打电话给这个！当然不是其他改变壁纸的非主屏幕应用程序。这些应用程序应该检索建议的尺寸，以便他们可以构建与之匹配的壁纸。

请记住，您还需要通过执行以下操作请求清单上的 SET_WALLPAPER_HINTS 权限：

```
<uses-permission android:name="android.permission.SET_WALLPAPER_HINTS"/> 
```

# java - 使用 JAVA 创建一个新的 mysql 表

> ID：14399522
> 
> 赞同：1
> 
> 时间：2013-01-18T12:59:23.757
> 
> 标签：java, mysql

我正在尝试创建一个类似于我之前创建的现成表（一个模板，如果你愿意的话）的表，其中唯一的变量应该是表名。

这是我到目前为止所尝试的：我将模板表导出到 mysql 代码并将代码复制到preparedStatement 对象，如下所示：

```
createNewLineTableStatement = constantLink.prepareStatement("CREATE TABLE IF NOT EXISTS ? (" +
                    "  `index` int(5) NOT NULL," +
                    "  `station` int(5) NOT NULL," +
                    "  PRIMARY KEY (`index`)," +
                    "  UNIQUE KEY `station` (`station`)" +
                    ") ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\");"); 
```

比我尝试通过调用以下函数来执行代码：

```
private static boolean createNewLineTable(String tableName) throws SQLException{
    createNewLineTableStatement.setString(1, tableName);
    if (createNewLineTableStatement.executeUpdate() == Statement.EXECUTE_FAILED)
        return false;
    return true;
} 
```

但我收到语法错误异常：

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''line_37_var_1' (  `index` int(5) NOT NULL,  `station` int(5) NOT NULL,  PRIMARY' at line 1 
```

如何修复代码？或者是否有更清洁、更好的方法来做同样的事情？也许创建一个带有用户变量的脚本？我想到了这一点，但我以前从未使用过 .sql 脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:05:51.410

问题1：不能使用prepared statement参数作为表名。

`");`问题 2：您的语句末尾有一个不匹配的括号和多余的字符。

您的查询字符串应类似于：

```
String query = "CREATE TABLE IF NOT EXISTS `" + tableName + "` (" +
    "  `index` int(5) NOT NULL," +
    "  `station` int(5) NOT NULL," +
    "  PRIMARY KEY (`index`)," +
    "  UNIQUE KEY `station` (`station`)" +
    ") ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:04:43.070

按照设计，TableName 和 ColumnNames 不能参数化。

如果您对此感到害怕`SQL Injection`，请创建一个自定义函数来检查恶意 tableName。如果值出现在您的应用程序内部，则它是安全的。

然后将其连接到字符串中，*为第一级防御添加反引号：D*

```
String tableName = "Your tableName";
String query = "CREATE TABLE IF NOT EXISTS `" + tableName + "` (" +
                    "  `index` int(5) NOT NULL," +
                    "  `station` int(5) NOT NULL," +
                    "  PRIMARY KEY (`index`)," +
                    "  UNIQUE KEY `station` (`station`)" +
                    ") ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T13:07:34.623

您缺少表名，我认为“？” 不应该在那里。

我会像

```
"CREATE TABLE IF NOT EXISTS YOURTABLE" + the following code 
```

# xcode - 仅在 Xcode/LLDB 中为某些线程设置条件断点

> ID：14399524
> 
> 赞同：5
> 
> 时间：2013-01-18T12:59:36.530
> 
> 标签：xcode, llvm, lldb

我正在使用一些 GCD 代码来调度一堆类似的异步块。我想通过单步调试其中一个块，所以我在块顶部附近的某处设置了一个断点，但是每次提交新块时调试器都会命中断点，所以我从来没有设法单步执行块，我只是在同一行上交换不同的线程。

我的问题是如何设置断点以使其以某个线程为条件？即它应该只在线程 4 上执行时触发？

**编辑**

我应该补充一点，我的块的代码非常耗时，所以调度程序在块内的下一行可以执行之前切换到另一个线程，并且轮到另一个新调度的 GCD 块，触发相同的断点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T21:09:58.007

我认为这不会通过 Xcode Breakpoints UI 公开，但在 lldb 中，您可以修改断点，以便仅在 (1) 线程名称匹配、(2) 调度队列名称匹配、(3) 线程 ID 匹配或(4) 线程索引号匹配。您可以在创建断点 ( `breakpoint set`) 时指定这些条件，也可以使用 将这些条件添加到现有断点`breakpoint modify`。在调试器控制台窗口中查看`help breakpoint modify`允许的参数列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:18:06.193

要在 GDC 代码中调试，您可以使用**$gdb invoke-block**。

对同一件事有更好的想法..

1.  [Blocks & Grand Central Dispatch 指南（以及 Cocoa API 的使用）](http://cocoasamurai.blogspot.in/2009/09/guide-to-blocks-grand-central-dispatch.html)

2.  [使用 GDB 进行调试](http://www.delorie.com/gnu/docs/gdb/gdb_30.html)

还有[应该如何使用 dispatch_debug ？](https://stackoverflow.com/a/5985910/790794)已经在那里指导。

# html - 菜单栏中活动项目的不同颜色

> ID：14399525
> 
> 赞同：0
> 
> 时间：2013-01-18T12:59:37.877
> 
> 标签：html, css

我正在尝试更改此菜单中第一项的颜色（用户知道是活动项的方式），有什么帮助吗？

```
<ul>
  <li><a href="#" class="current">jkfasdf</a></li>
  <li><a href="#">jkffasdf fjaskdfasfs jajklfd fjklasdfas</a></li>
</ul>

ul{
  background: red;
  border-top-left-radius: 5px;
  border-bottom-left-radius: 5px;
  border-top-right-radius: 5px;
  border-bottom-right-radius: 5px;
  float: left; #esto permite que se adapte el ancho del ul al contenido..
  # quizas por ello no se pueda centrar si se quiere :)
}

li {
  padding: 10px; display: inline-block;
  border-left: 1px solid white;
  width: 100px;
  text-align: center;
  vertical-align: middle;
}
li:first-child {border-left: none;}

li.current {
   background: yellow;
}

a {

} 
```

这是jsfiddle：

[http://jsfiddle.net/y3NCq/46/](http://jsfiddle.net/y3NCq/46/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:01:20.930

您缺少一个空格：`li .current {`. 如果没有空间，它会尝试将其应用于`li`类为 的项目`current`，您希望将其应用于`li`类为 的子项`current`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:00:47.517

您可以尝试以下方法

```
li a.current {
    background: yellow;
} 
```

# spring - 来自Gosu的春季批次

> ID：14399528
> 
> 赞同：0
> 
> 时间：2013-01-18T12:59:54.150
> 
> 标签：spring, batch-processing, spring-batch, gosu

我想使用 Spring Batch 作为 Gosu 的库。您是否有关于如何在 java 代码中连接 Spring 批处理作业的综合示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:05:24.050

Spring Batch 2.2 快照中有对 @Configuration 的新支持，但我不知道这对 Gosu 是否有帮助。[这里](https://github.com/SpringSource/spring-batch/blob/master/spring-batch-samples/src/main/java/org/springframework/batch/sample/config/RetrySampleConfiguration.java)的例子。如果您需要创建所有内容，请查看 SimpleJob 和 SimpleStepFactoryBean。

# java - Java ArrayList：复制构造函数和通过赋值复制之间的区别

> ID：14399531
> 
> 赞同：0
> 
> 时间：2013-01-18T13:00:01.723
> 
> 标签：java, list

我有两个列表，`ListA`我`ListB`想复制`ListB`到`ListA`.

就复杂性和结果而言，以下各项有什么区别：

1.  `ListA = ListB;`
2.  `ListA = new ArrayList(ListB);`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T13:01:25.780

，`listA = listB`只有一个列表。所以如果你打电话`listA.add(something);`，它也会增加`listB`。

有`listA = new ArrayList(listB);`两个列表（恰好包含相同的对象）。所以如果你打电话`listA.add(something);`，它不会添加任何东西到`listB`.

就复杂性而言，第一个是简单的赋值（即在恒定时间内运行），而第二个在 O(n) 中运行，n 是 的大小`listB`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-18T13:00:41.800

在第一种情况下，根本没有复制。只是**aliasing** :`listA`可以看作是同义词，别名为`ListB`.

这自然是由于 Java 对**引用类型**的独占使用。Java 中的任何类型实际上都不能将对象作为其值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T13:01:30.543

为了`ListA = ListB`

您没有复制列表，您只是为该对象分配了另一个别名（引用）。

# java - 使用 jstl 的 sql 查询的执行时间

> ID：14399533
> 
> 赞同：1
> 
> 时间：2013-01-18T13:00:08.810
> 
> 标签：java, mysql, jsp, servlets, jstl

我正在使用 jstl 访问数据库表。执行查询后，我需要使用 jstl 找到它的执行时间。我附上了我使用的代码：

```
<sql:update dataSource="${conn}" var="addresses">
    ${query}
</sql:update> 
```

有没有办法找到它？我使用 ${addresses} 来查找受影响的行数。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:28:51.037

一个简单的解决方案是：

```
<jsp:useBean id="beginUpdate" class="java.util.Date"/>
<sql:update dataSource="${conn}" var="addresses">
    ${query}
</sql:update>
<jsp:useBean id="endUpdate" class="java.util.Date"/>
<c:set var="updateDuration" value="${endUpdate.time - beginUpdate.time}"/> 
```

但这确实不是准确计时更新的最佳方式。但是，如果您所需要的只是对所需时间的一般度量，那么它可能没问题。

# python - setuptools setup.py 文件中 install_requires kwarg 的参考 requirements.txt

> ID：14399534
> 
> 赞同：373
> 
> 时间：2013-01-18T13:00:14.157
> 
> 标签：python, pip, setuptools, requirements.txt

我有一个`requirements.txt`与 Travis-CI 一起使用的文件。`requirements.txt`复制and中的要求似乎很愚蠢`setup.py`，因此我希望将文件句柄传递`install_requires`给`setuptools.setup`.

这可能吗？如果是这样，我应该怎么做？

这是我的`requirements.txt`文件：

```
guessit>=0.5.2
tvdb_api>=1.8.2
hachoir-metadata>=1.3.3
hachoir-core>=1.3.3
hachoir-parser>=1.3.4 
```

* * *

## 回答 #1

> 赞同：305
> 
> 时间：2013-05-18T13:18:24.863

You can flip it around and list the dependencies in `setup.py` and have a single character — a dot `.` — in `requirements.txt` instead.

* * *

Alternatively, even if not advised, it is still possible to parse the `requirements.txt` file (if it doesn't refer any external requirements by URL) with the following hack (tested with `pip 9.0.1`):

```
install_reqs = parse_requirements('requirements.txt', session='hack') 
```

This doesn't filter [environment markers](https://pip.pypa.io/en/stable/reference/pip_install/#requirement-specifiers) though.

* * *

In old versions of pip, more specifically [older than 6.0](https://github.com/pypa/pip/commit/7037443975ee5706ef829f14a52ac2fba7dbfff2), there is a public API that can be used to achieve this. A requirement file can contain comments (`#`) and can include some other files (`--requirement` or `-r`). Thus, if you really want to parse a `requirements.txt` you can use the pip parser:

```
from pip.req import parse_requirements

# parse_requirements() returns generator of pip.req.InstallRequirement objects
install_reqs = parse_requirements(<requirements_path>)

# reqs is a list of requirement
# e.g. ['django==1.5.1', 'mezzanine==1.4.6']
reqs = [str(ir.req) for ir in install_reqs]

setup(
    ...
    install_requires=reqs
) 
```

* * *

## 回答 #2

> 赞同：294
> 
> 时间：2015-11-13T04:21:24.610

`requirements.txt`从表面上看，这似乎`setup.py`是愚蠢的重复，但重要的是要理解，虽然形式相似，但预期的功能却大不相同。

包作者在指定依赖项时的目标是说“无论您在何处安装此包，这些都是您需要的其他包，以使该包正常工作。”

相比之下，部署作者（可能是不同时间的同一个人）有不同的工作，因为他们说“这是我们收集并测试过的软件包列表，我现在需要安装”。

包作者为各种各样的场景写作，因为他们将他们的工作放在那里以他们可能不知道的方式使用，并且无法知道哪些包将与他们的包一起安装。为了成为一个好邻居并避免与其他包的依赖版本冲突，他们需要指定尽可能广泛的依赖版本。这就是`install_requires`in`setup.py`所做的。

部署作者写了一个非常不同的、非常具体的目标：安装在特定计算机上的已安装应用程序或服务的单个实例。为了精确控制部署，并确保测试和部署正确的包，部署作者必须指定要安装的每个包的确切版本和源位置，包括依赖项和依赖项的依赖项。有了这个规范，一个部署可以重复地应用到多台机器上，或者在一台测试机器上进行测试，并且部署作者可以确信每次都部署了相同的包。这就是 a 的`requirements.txt`作用。

所以你可以看到，虽然它们看起来都像一个很大的包和版本列表，但这两个东西有非常不同的工作。而且很容易把它弄混并弄错！但是正确的思考方式是，这是对所有各种包文件`requirements.txt`中的要求所提出的“问题”的“答案” 。`setup.py`它不是手动编写的，它通常是通过告诉 pip 查看`setup.py`一组所需包中的所有文件，找到一组它认为符合所有要求的包，然后在安装后“冻结" 将该软件包列表放入一个文本文件中（这是`pip freeze`名称的来源）。

所以外卖：

*   `setup.py`应该声明仍然可行的最松散的可能依赖版本。它的工作是说明一个特定的包可以使用什么。
*   `requirements.txt`是定义整个安装作业的部署清单，不应被认为与任何一个包相关联。它的工作是声明一个详尽的列表，列出所有必要的包以使部署工作。
*   因为这两个东西有如此不同的内容和存在的理由，简单地把一个复制到另一个是行不通的。

### 参考：

*   [Python 打包用户指南中的install_requires 与需求文件](https://packaging.python.org/requirements/)。

* * *

## 回答 #3

> 赞同：125
> 
> 时间：2013-01-18T13:14:47.607

它不能接受文件句柄。`install_requires`参数只能是[字符串或字符串列表](http://peak.telecommunity.com/DevCenter/setuptools#new-and-changed-setup-keywords)。

当然，您可以在安装脚本中读取文件并将其作为字符串列表传递给`install_requires`.

```
import os
from setuptools import setup

with open('requirements.txt') as f:
    required = f.read().splitlines()

setup(...
install_requires=required,
...) 
```

* * *

## 回答 #4

> 赞同：66
> 
> 时间：2013-09-29T17:48:42.143

需求文件使用扩展的 pip 格式，这仅在您需要`setup.py`用更强的约束补充您的情况下才有用，例如指定某些依赖项必须来自的确切 url，或者将`pip freeze`整个包集冻结为已知工作的输出版本。如果您不需要额外的约束，请仅使用`setup.py`. 如果你觉得你真的需要运送一个`requirements.txt`，你可以把它写成一行：

```
. 
```

它将是有效的，并且完全引用`setup.py`同一目录中的内容。

* * *

## 回答 #5

> 赞同：39
> 
> 时间：2014-04-06T18:02:07.993

虽然不是这个问题的确切答案，但我推荐 Donald Stufft 在[https://caremad.io/2013/07/setup-vs-requirement/](https://caremad.io/2013/07/setup-vs-requirement/)上的博客文章，以便很好地解决这个问题。我一直在使用它取得了巨大的成功。

总之，`requirements.txt`不是`setup.py`替代品，而是部署的补充。在`setup.py`. 设置`requirements.txt`或更多它们以获取特定版本的包依赖项以用于开发、测试或生产。

例如，包含在 repo 中的软件包`deps/`：

```
# fetch specific dependencies
--no-index
--find-links deps/

# install package
# NOTE: -e . for editable mode
. 
```

pip 执行包`setup.py`并安装在`install_requires`. 没有重复性，并且保留了两个工件的目的。

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2014-03-26T01:31:31.973

使用`parse_requirements`是有问题的，因为 pip API 没有公开记录和支持。在 pip 1.6 中，该功能实际上正在移动，因此它的现有用途可能会中断。

消除`setup.py`和之间重复的一种更可靠的方法`requirements.txt`是指定您的依赖项`setup.py`，然后放入`-e .`您的`requirements.txt`文件中。`pip`此处提供了一位开发人员关于为什么这是一种更好的方法的一些信息： [https ://caremad.io/blog/setup-vs-requirement/](https://caremad.io/blog/setup-vs-requirement/)

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2015-04-15T16:33:09.957

上面的大多数其他答案都不适用于当前版本的 pip API。这是使用当前版本的 pip 执行此操作的正确*方法（撰写本文时为 6.0.8，也适用于 7.1.2。您可以使用 pip -V 检查您的版本）。

```
from pip.req import parse_requirements
from pip.download import PipSession

install_reqs = parse_requirements(<requirements_path>, session=PipSession())

reqs = [str(ir.req) for ir in install_reqs]

setup(
    ...
    install_requires=reqs
    ....
) 
```

* 正确，因为这是将 parse_requirements 与当前 pip 一起使用的方式。它仍然可能不是最好的方法，因为正如上面的海报所说，pip 并没有真正维护 API。

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2013-08-21T16:23:17.003

在 Travis 中安装当前包。这避免了使用`requirements.txt`文件。例如：

```
language: python
python:
  - "2.7"
  - "2.6"
install:
  - pip install -q -e .
script:
  - python runtests.py 
```

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2020-01-29T16:25:41.980

我不建议做这样的事情。正如多次提到的`install_requires`，`requirements.txt`绝对不应该是同一个列表。*但是，由于涉及pip*的私有内部 API 周围有很多误导性的答案，因此可能值得寻找更明智的替代方案......

*pip*不需要从*setuptools*脚本解析`requirements.txt`文件。setuptools项目已经在其*顶层*包*中*包含了所有必要的工具。 *`setup.py`**`pkg_resources`***

 ***它或多或少看起来像这样：

```
#!/usr/bin/env python3

import pathlib

import pkg_resources
import setuptools

with pathlib.Path('requirements.txt').open() as requirements_txt:
    install_requires = [
        str(requirement)
        for requirement
        in pkg_resources.parse_requirements(requirements_txt)
    ]

setuptools.setup(
    install_requires=install_requires,
) 
```

* * *

**警告**

如前所述，不建议这样做。文件和“`requirements.txt`安装依赖项”列表是两个不同的概念，不能互换。

但是，如果您确实编写了一个`setup.py`读取的安装脚本，请`requirements.txt`确保该`requirements.txt`文件包含在“源分发”（*sdist*）中，否则安装显然会失败。

* * *

**备注**：

*   另请参阅其他答案：[https ://stackoverflow.com/a/59971236/11138259](https://stackoverflow.com/a/59971236/11138259)
*   [https://caremad.io/posts/2013/07/setup-vs-requirement/](https://caremad.io/posts/2013/07/setup-vs-requirement/)

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2017-02-03T21:15:40.487

这种简单的方法从`setup.py`. 这是[Dmitiry S.](https://stackoverflow.com/a/50368460/832230)答案的变体。此答案仅与 Python 3.6+ 兼容。

根据[DS](https://caremad.io/posts/2013/07/setup-vs-requirement/)，`requirements.txt`可以记录具有特定版本号的具体要求，而`setup.py`可以记录具有松散版本范围的抽象要求。

下面是我的摘录`setup.py`。

```
import distutils.text_file
from pathlib import Path
from typing import List

def _parse_requirements(filename: str) -> List[str]:
    """Return requirements from requirements file."""
    # Ref: https://stackoverflow.com/a/42033122/
    return distutils.text_file.TextFile(filename=str(Path(__file__).with_name(filename))).readlines()

setup(...
      install_requires=_parse_requirements('requirements.txt'),
   ...) 
```

请注意，这`distutils.text_file.TextFile`将删除评论。此外，根据我的经验，您显然不需要采取任何特殊步骤来捆绑需求文件。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2018-05-16T10:28:31.243

以下接口在 pip 10 中被弃用：

```
from pip.req import parse_requirements
from pip.download import PipSession 
```

所以我将它切换为简单的文本解析：

```
with open('requirements.txt', 'r') as f:
    install_reqs = [
        s for s in [
            line.split('#', 1)[0].strip(' \t\n') for line in f
        ] if s != ''
    ] 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2014-08-08T10:33:52.750

如果你不想强迫你的用户安装 pip，你可以用这个来模拟它的行为：

```
import sys

from os import path as p

try:
    from setuptools import setup, find_packages
except ImportError:
    from distutils.core import setup, find_packages

def read(filename, parent=None):
    parent = (parent or __file__)

    try:
        with open(p.join(p.dirname(parent), filename)) as f:
            return f.read()
    except IOError:
        return ''

def parse_requirements(filename, parent=None):
    parent = (parent or __file__)
    filepath = p.join(p.dirname(parent), filename)
    content = read(filename, parent)

    for line_number, line in enumerate(content.splitlines(), 1):
        candidate = line.strip()

        if candidate.startswith('-r'):
            for item in parse_requirements(candidate[2:].strip(), filepath):
                yield item
        else:
            yield candidate

setup(
...
    install_requires=list(parse_requirements('requirements.txt'))
) 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2013-11-08T19:18:45.327

`from pip.req import parse_requirements`对我不起作用，我认为它适用于我的 requirements.txt 中的空白行，但此功能确实有效

```
def parse_requirements(requirements):
    with open(requirements) as f:
        return [l.strip('\n') for l in f if l.strip('\n') and not l.startswith('#')]

reqs = parse_requirements(<requirements_path>)

setup(
    ...
    install_requires=reqs,
    ...
) 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2014-07-26T18:44:20.577

**小心`parse_requirements`行为！**

请注意，这`pip.req.parse_requirements`会将下划线更改为破折号。在我发现它之前，这让我愤怒了几天。示例演示：

```
from pip.req import parse_requirements  # tested with v.1.4.1

reqs = '''
example_with_underscores
example-with-dashes
'''

with open('requirements.txt', 'w') as f:
    f.write(reqs)

req_deps = parse_requirements('requirements.txt')
result = [str(ir.req) for ir in req_deps if ir.req is not None]
print result 
```

生产

```
['example-with-underscores', 'example-with-dashes'] 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-12-23T02:12:47.227

我为此创建了一个可重用的函数。它实际上解析了需求文件的整个目录并将它们设置为 extras_require。

最新的总是在这里可用：[https ://gist.github.com/akatrevorjay/293c26fefa24a7b812f5](https://gist.github.com/akatrevorjay/293c26fefa24a7b812f5)

```
import glob
import itertools
import os

# This is getting ridiculous
try:
    from pip._internal.req import parse_requirements
    from pip._internal.network.session import PipSession
except ImportError:
    try:
        from pip._internal.req import parse_requirements
        from pip._internal.download import PipSession
    except ImportError:
        from pip.req import parse_requirements
        from pip.download import PipSession

def setup_requirements(
        patterns=[
            'requirements.txt', 'requirements/*.txt', 'requirements/*.pip'
        ],
        combine=True):
    """
    Parse a glob of requirements and return a dictionary of setup() options.
    Create a dictionary that holds your options to setup() and update it using this.
    Pass that as kwargs into setup(), viola

    Any files that are not a standard option name (ie install, tests, setup) are added to extras_require with their
    basename minus ext. An extra key is added to extras_require: 'all', that contains all distinct reqs combined.

    Keep in mind all literally contains `all` packages in your extras.
    This means if you have conflicting packages across your extras, then you're going to have a bad time.
    (don't use all in these cases.)

    If you're running this for a Docker build, set `combine=True`.
    This will set `install_requires` to all distinct reqs combined.

    Example:

    >>> import setuptools
    >>> _conf = dict(
    ...     name='mainline',
    ...     version='0.0.1',
    ...     description='Mainline',
    ...     author='Trevor Joynson <github@trevor.joynson,io>',
    ...     url='https://trevor.joynson.io',
    ...     namespace_packages=['mainline'],
    ...     packages=setuptools.find_packages(),
    ...     zip_safe=False,
    ...     include_package_data=True,
    ... )
    >>> _conf.update(setup_requirements())
    >>> # setuptools.setup(**_conf)

    :param str pattern: Glob pattern to find requirements files
    :param bool combine: Set True to set install_requires to extras_require['all']
    :return dict: Dictionary of parsed setup() options
    """
    session = PipSession()

    # Handle setuptools insanity
    key_map = {
        'requirements': 'install_requires',
        'install': 'install_requires',
        'tests': 'tests_require',
        'setup': 'setup_requires',
    }
    ret = {v: set() for v in key_map.values()}
    extras = ret['extras_require'] = {}
    all_reqs = set()

    files = [glob.glob(pat) for pat in patterns]
    files = itertools.chain(*files)

    for full_fn in files:
        # Parse
        reqs = {
            str(r.req)
            for r in parse_requirements(full_fn, session=session)
            # Must match env marker, eg:
            #   yarl ; python_version >= '3.0'
            if r.match_markers()
        }
        all_reqs.update(reqs)

        # Add in the right section
        fn = os.path.basename(full_fn)
        barefn, _ = os.path.splitext(fn)
        key = key_map.get(barefn)

        if key:
            ret[key].update(reqs)
            extras[key] = reqs

        extras[barefn] = reqs

    if 'all' not in extras:
        extras['all'] = list(all_reqs)

    if combine:
        extras['install'] = ret['install_requires']
        ret['install_requires'] = list(all_reqs)

    def _listify(dikt):
        ret = {}

        for k, v in dikt.items():
            if isinstance(v, set):
                v = list(v)
            elif isinstance(v, dict):
                v = _listify(v)
            ret[k] = v

        return ret

    ret = _listify(ret)

    return ret

__all__ = ['setup_requirements']

if __name__ == '__main__':
    reqs = setup_requirements()
    print(reqs) 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-07-20T19:12:41.007

另一种可能的解决方案...

```
def gather_requirements(top_path=None):
    """Captures requirements from repo.

    Expected file format is: requirements[-_]<optional-extras>.txt

    For example:

        pip install -e .[foo]

    Would require:

        requirements-foo.txt

        or

        requirements_foo.txt

    """
    from pip.download import PipSession
    from pip.req import parse_requirements
    import re

    session = PipSession()
    top_path = top_path or os.path.realpath(os.getcwd())
    extras = {}
    for filepath in tree(top_path):
        filename = os.path.basename(filepath)
        basename, ext = os.path.splitext(filename)
        if ext == '.txt' and basename.startswith('requirements'):
            if filename == 'requirements.txt':
                extra_name = 'requirements'
            else:
                _, extra_name = re.split(r'[-_]', basename, 1)
            if extra_name:
                reqs = [str(ir.req) for ir in parse_requirements(filepath, session=session)]
                extras.setdefault(extra_name, []).extend(reqs)
    all_reqs = set()
    for key, values in extras.items():
        all_reqs.update(values)
    extras['all'] = list(all_reqs)
    return extras 
```

然后使用...

```
reqs = gather_requirements()
install_reqs = reqs.pop('requirements', [])
test_reqs = reqs.pop('test', [])
...
setup(
    ...
    'install_requires': install_reqs,
    'test_requires': test_reqs,
    'extras_require': reqs,
    ...
) 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2019-07-24T21:53:49.710

交叉发布我从[这个 SO 问题](https://stackoverflow.com/a/57191701/3728233)的答案，以获得另一个简单的 pip 版本证明解决方案。

```
try:  # for pip >= 10
    from pip._internal.req import parse_requirements
    from pip._internal.download import PipSession
except ImportError:  # for pip <= 9.0.3
    from pip.req import parse_requirements
    from pip.download import PipSession

requirements = parse_requirements(os.path.join(os.path.dirname(__file__), 'requirements.txt'), session=PipSession())

if __name__ == '__main__':
    setup(
        ...
        install_requires=[str(requirement.req) for requirement in requirements],
        ...
    ) 
```

然后只需`requirements.txt`在项目根目录下输入您的所有要求。

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2016-12-15T19:42:19.937

另一个`parse_requirements`hack 也将环境标记解析为`extras_require`：

```
from collections import defaultdict
from pip.req import parse_requirements

requirements = []
extras = defaultdict(list)
for r in parse_requirements('requirements.txt', session='hack'):
    if r.markers:
        extras[':' + str(r.markers)].append(str(r.req))
    else:
        requirements.append(str(r.req))

setup(
    ...,
    install_requires=requirements,
    extras_require=extras
) 
```

它应该支持 sdist 和二进制 dist。

正如其他人所说，`parse_requirements`有几个缺点，所以这不是你应该在公共项目上做的，但它可能足以满足内部/个人项目。

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2020-03-24T03:38:46.483

我这样做了：

```
import re

def requirements(filename):
    with open(filename) as f:
        ll = f.read().splitlines()
    d = {}
    for l in ll:
        k, v = re.split(r'==|>=', l)
        d[k] = v
    return d

def packageInfo():
    try:
        from pip._internal.operations import freeze
    except ImportError:
        from pip.operations import freeze

    d = {}
    for kv in freeze.freeze():
        k, v = re.split(r'==|>=', kv)
        d[k] = v
    return d

req = getpackver('requirements.txt')
pkginfo = packageInfo()

for k, v in req.items():
    print(f'{k:<16}: {v:<6} -> {pkginfo[k]}') 
```

* * *

## 回答 #20

> 赞同：-4
> 
> 时间：2016-11-10T13:24:56.410

`pip 9.0.1`这是基于[Romain 的答案](https://stackoverflow.com/a/16624700/239247)的完整 hack（用 测试），`requirements.txt`它根据当前[环境标记](https://pip.pypa.io/en/stable/reference/pip_install/#requirement-specifiers)解析和过滤它：

```
from pip.req import parse_requirements

requirements = []
for r in parse_requirements('requirements.txt', session='hack'):
    # check markers, such as
    #
    #     rope_py3k    ; python_version >= '3.0'
    #
    if r.match_markers():
        requirements.append(str(r.req))

print(requirements) 
```***

# image - 如何使用 Grails 使用 imgscalr

> ID：14399537
> 
> 赞同：4
> 
> 时间：2013-01-18T13:00:36.950
> 
> 标签：image, grails, groovy, imgscalr

最近几天我才开始使用 Groovy 和 Grails。我之前没有任何 Java 经验，所以你必须原谅这个（可能）非常基本的问题。我搜索了 Google 和 Stack Overflow，但没有找到任何可以帮助我进行实际安装的东西。

我有一个图像上传工作，我将文件存储在服务器上。我使用 IBM Grails 教程来指导我完成它。这很好用。

我还想以大、中、小格式调整文件的大小。我想为此使用 imgscalr ，但我无法让它工作。我已经下载了包含各种 .jar 文件的 4.2 版。我需要把这些放在服务器上的某个地方并引用它们吗？我唯一做的就是将这些行添加到`buildConfig.groovy`

```
dependencies {
    // specify dependencies here under either 'build', 'compile', 'runtime', 'test' or 'provided' scopes eg.

    // runtime 'mysql:mysql-connector-java:5.1.20'
    compile 'org.imgscalr:imgscalr-lib:4.2'
} 
```

`import org.imgscalr.Scalr.*`在我的`PhotoController.Groovy`

这是我将文件保存到服务器的代码，我还想调整大小并保存图像。

```
def save() {
    def photoInstance = new Photo(params)

    // Handle uploaded file
    def uploadedFile = request.getFile('photoFile')
    if(!uploadedFile.empty) {
        println "Class: ${uploadedFile.class}"
        println "Name: ${uploadedFile.name}"
        println "OriginalFileName: ${uploadedFile.originalFilename}"
        println "Size: ${uploadedFile.size}"
        println "ContentType: ${uploadedFile.contentType}"

        def webRootDir = servletContext.getRealPath("/")

        def originalPhotoDir = new File(webRootDir, "/images/photographs/original")
        originalPhotoDir.mkdirs()
        uploadedFile.transferTo(new File(originalPhotoDir, uploadedFile.originalFilename))

        BufferedImage largeImg = Scalr.resize(uploadedFile, 1366);
        def largePhotoDir = new File(webRootDir, "/images/photographs/large")
        largePhotoDir.mkdirs()

        photoInstance.photoFile = uploadedFile.originalFilename
    }

    if (!photoInstance.hasErrors() && photoInstance.save()) {
        flash.message = "Photo ${photoInstance.id} created"
        redirect(action:"list")
    }
    else {
        render(view:"create", model:[photoInstance: photoInstance])
    }
} 
```

我得到的错误是`No such property: Scalr for class: garethlewisweb.PhotoController`

我显然做错了什么。任何指导表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-11T13:12:46.990

这是“如何在 grails 中使用 imgscalr”的第一个谷歌结果，我对谷歌搜索时缺乏信息和示例感到惊讶。虽然第一个答案很接近，但仍有一些错误需要纠正。

对于像我一样通过谷歌在这里结束的人，这里有一个更详细的示例，说明如何正确使用这个不错的插件：

首先，在文件中声明插件`BuildConfig.groovy`：

```
dependencies {
    // specify dependencies here under either 'build', 'compile', 'runtime', 'test' or 'provided' scopes eg.

    // runtime 'mysql:mysql-connector-java:5.1.20'
    compile 'org.imgscalr:imgscalr-lib:4.2'
} 
```

然后，安装后，只需将这段代码粘贴到您的控制器中，在接收带有上传图像的多部分表单的操作中。

```
def create() {

     def userInstance = new User(params)

     //saving image
     def imgFile = request.getFile('myFile')
     def webRootDir = servletContext.getRealPath("/")
     userInstance.storeImageInFileSystem(imgFile, webRootDir)  

     (...) 
} 
```

在我的域中，我实现了这个`storeImageInFileSystem`方法，它将调整图像的大小并将其存储在文件系统中。但首先，将其导入文件：

```
import org.imgscalr.Scalr
import java.awt.image.BufferedImage
import javax.imageio.ImageIO 
```

然后，实现方法：

```
def storeImageInFileSystem(imgFile, webRootDir){

    if (!imgFile.empty)
    {
        def defaultPath = "/images/userImages"
        def systemDir = new File(webRootDir, defaultPath)

        if (!systemDir.exists()) {
            systemDir.mkdirs()
        }

        def imgFileDir = new File( systemDir, imgFile.originalFilename)
        imgFile.transferTo( imgFileDir )

        def imageIn = ImageIO.read(imgFileDir);

        BufferedImage scaledImage = Scalr.resize(imageIn, 200);   //200 is the size of the image
        ImageIO.write(scaledImage, "jpg", new File( systemDir, imgFile.originalFilename )); //write image in filesystem

       (...)
    }
} 
```

这对我来说效果很好。根据需要更改任何细节，例如系统目录或图像大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-23T09:30:30.307

Put the jar file(s) in the 'lib' directory of your Grails application. You may then delete that line from `BuildConfig.groovy`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T13:14:41.620

代替

```
import org.imgscalr.Scalr.* 
```

你要

```
import org.imgscalr.Scalr
import javax.imageio.ImageIO 
```

然后`resize`需要一个`BufferedImage`（查看[JavaDocs](http://www.thebuzzmedia.com/downloads/software/imgscalr/javadoc/org/imgscalr/Scalr.html#resize%28java.awt.image.BufferedImage,%20int,%20java.awt.image.BufferedImageOp...%29)），所以尝试：

```
 def originalPhotoDir = new File(webRootDir, "/images/photographs/original")
    originalPhotoDir.mkdirs()
    def originalPhotoFile = new File(originalPhotoDir, uploadedFile.originalFilename)
    uploadedFile.transferTo( originalPhotoFile )

    // Load the image
    BufferedImage originalImage = ImageIO.read( originalPhotoFile )
    // Scale it
    BufferedImage largeImg = Scalr.resize(uploadedFile, 1366);

    // Make the destination folder
    def largePhotoDir = new File(webRootDir, "/images/photographs/large" )
    largePhotoDir.mkdirs()

    // Write the large image out
    ImageIO.write( largeImg, 'png', new File( largePhotoDir, uploadedFile.originalFilename ) 
```

当然，您必须注意覆盖现有图像的文件

# c++ - 模板类相互使用会产生歧义错误

> ID：14399539
> 
> 赞同：1
> 
> 时间：2013-01-18T13:00:45.793
> 
> 标签：c++, templates, visual-c++, forward-declaration

我在同一个头文件中有两个模板类 A 和 B，如下所示：

```
template <typename T>
class FirstClass {

public:
    bool convert(const FirstClass<T>& f){...}
    bool convert(const SecondClass<T>& s){...}

};

template <typename T>
class SecondClass {

public:
    bool convert(const FirstClass<T>& f){...}
    bool convert(const SecondClass<T>& s){...}

}; 
```

为了解决任何未知的类错误，我尝试添加一个前向声明：

```
template <typename T> class SecondClass ; //adding this to the beginning of the file 
```

我收到以下错误：

```
2 overloads have similar conversions 
could be 'bool FirstClass<T>::convert(const FirstClass<T>& )' 
or
could be 'bool FirstClass<T>::convert(const SecondClass<T>& )'
while trying to match the argument list '(FirstClass<T>)'
note: qualification adjustment (const/volatile) may be causing the ambiguity 
```

我假设这是因为我使用的是前向声明的类。除了将实现移动到 Cpp 文件（我被告知这很麻烦）之外，还有其他有效的解决方案吗？

我在 Windows 7 上使用 VisualStudio 2010

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:16:01.197

只需在定义两个类中的任何一个之前放置前向声明即可。

```
#include <iostream>    

template<typename> class FirstClass;
template<typename> class SecondClass;

template <typename T>
class FirstClass {

public:
    bool convert(const FirstClass<T>& f) { std::cout << "f2f\n"; }
    bool convert(const SecondClass<T>& s){ std::cout << "f2s\n"; }

};

template <typename T>
class SecondClass {

public:
    bool convert(const FirstClass<T>& f){ std::cout << "s2f\n"; }
    bool convert(const SecondClass<T>& s){ std::cout << "s2s\n"; }

};

int main()
{
    FirstClass<int> f;
    SecondClass<int> s;

    f.convert(f);
    f.convert(s);
    s.convert(f);
    s.convert(s);        
} 
```

在[Ideone上输出](http://ideone.com/IBYghc)

# entity-framework - 即使在查询中指定了“扩展”，Breeze.js 也不会返回相关表

> ID：14399547
> 
> 赞同：0
> 
> 时间：2013-01-18T13:00:57.563
> 
> 标签：entity-framework, breeze

我已经检查了我的 asp.net 代码，并且在我加载了“游戏”实体时，它也加载了相关的“游戏集”实体。

使用 chrome 的网络资源面板，我可以看到查询是从微风中运行的，它正在获取基本的“游戏”实体，但相关游戏集的“空”。

元数据查找的部分结果：

```
,\"navigationProperty\":[{\"name\":\"Sets\",\"relationship\":\"Self.GameSet_Game\" 
```

所以你可以看到“Sets”的存在。

这是它正在运行的查询：

```
 var query = new entityModel.EntityQuery()
            .from("Games")
            .expand("Sets")
            .orderBy("GameDateTime"); 
```

以下是微风查询的部分网络资源结果：

```
ID: 1
LeagueGame: true
MVP: null
MVP_PersonID: 3
Opponent: "Test Opponent"
Sets: null 
```

您还可以看到，MVP 的 1:1 关系没有从微风查询中得到，但是当我使用 asp.net 标准代码进行测试调用时……有人知道为什么会这样吗？Breeze 可以看到元数据中的关系，但它不会加载相关实体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:23:48.903

解决了。我使用了“BreezyDevices”Julie Lerman 示例，但由于某种原因，它没有“[BreezeController]”属性。我将此添加到我的控制器类和宾果游戏中，一切正常。:-)

# web-services - SoapUI load test, calculate cnt in variance strategy

> ID：14399563
> 
> 赞同：2
> 
> 时间：2013-01-18T13:01:36.250
> 
> 标签：web-services, soapui, load-testing

I work with SoapUI project and I have one question. In following example I've got 505 requests in 5 seconds with thread count =5\. I would like to understand how count has been calculated in this example.

![enter image description here](../Images/6b8722cbea9dd79cbd341d3cbd0151ac.png)

For example, if I want 1000 request in 1 minute what setting should I set in variance strategy?

Regards, Evgeniy

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T07:54:02.203

variance strategy as the name implies, it varies the number of threads overtime.Within the specified interval the threads will increase and decrease as per the variance value, thus simulating a realistic real time load on target web-service.

**How variance is calculated** : its not calculated using the mathematical variance formula. its just a multiplication. (if threads = 10 and variance = 0.5 then 10 * 0.5 = 5\. The threads will be incremented and decremented by 5)

For example:

```
Threads = 20
variance = 0.8
Strategy = variance
interval = 60
limit = 60 seconds 
```

the above will vary the thread by 16 (because 20 * 0.8 = 16), that is the thread count will increase to 36 and decrease to 4 and end with the original 20 within the 60 seconds.

if your requirement is to start with 500 threads and hit 1000 set your variance to 2 and so on.

refrence link:

[chek the third bullet - simulating different type of load - soapUI site](http://www.packtpub.com/web-services-testing-with-soapui/book)

Book for reference:

```
Web Service Testing with SoapUi by Charitha kankanamge 
```

# php - 高级自定义字段复选框

> ID：14399566
> 
> 赞同：2
> 
> 时间：2013-01-18T13:01:47.763
> 
> 标签：php, wordpress, checkbox

我在 wordpress 中使用高级自定义字段复选框功能。

我`<ul>`用四个创建了一个`<li>`

```
<ul class="post-icons">
  <li class="microphone" title="Alt text"></li>
  <li class="video" title="Alt text"></li>
  <li class="text" title="Alt text"></li>
  <li class="image" title="Alt text"></li>
</ul> 
```

我在高级自定义字段中创建了四个复选框。如果我在`class="(here)"`.

```
<?php echo implode(' ', get_field('field_name')); ?> 
```

它将复选框的值打印到类“”，但它会打印我创建的所有四个复选框值。我只想在正确的地方打印正确的。

最好的方法是使用`.active`类，但高级自定义字段不允许具有相同值的多个复选框。我的意思是，如果您选中**图像**和**文本**上的复选框，它将打印`.active`或明智的

```
<li class="image" title="Alt text"></li> and 
<li class="text" title="Alt text"></li> 

Like = <li class="image active" title="Alt text"></li> and <li class="text active" title="Alt text"></li> 
```

我有四个复选框

*   视频
*   文本
*   声音
*   图片

还有四个`<li>`

```
 - <li class="video"></li>
 - <li class="text"></li>
 - <li class="microphone"></li>
 - <li class="image"></li> 
```

麦克风 = 声音

我想`.active`在正确的`<li>` `class""`项目上打印。勾选对应的复选框时

我将链接到高级自定义字段的文档复选框 我不太了解如何创建我的项目所需的东西。

[文档](http://www.advancedcustomfields.com/docs/field-types/checkbox/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T16:30:12.523

从问题中并不清楚存在哪些字段。

对于 Checkbox 字段（检查[PHP 三元运算符](http://php.net/manual/en/language.operators.comparison.php)）：

```
// If checked, the string is 'active', otherwise empty
$image = ( get_field( 'image_field' ) ) ? 'active' : '';
$video = ( get_field( 'video_field' ) ) ? 'active' : ''; 

<li class="image <?php echo $image; ?>" title="Alt text"></li> 
<li class="video <?php echo $video; ?>" title="Alt text"></li> 
```

* * *

但是，更好的是允许多个选择的[Select 字段（检查](http://www.advancedcustomfields.com/docs/field-types/select/)[PHP in_array](http://php.net/manual/en/function.in-array.php)）：
![acf 选择多个](../Images/b7138bb5d7e969e2071df8116de6a1c7.png)

```
$get_field = get_field( 'field_name' ); 
$image = in_array( 'image', $get_field) ? 'active' : '';
$video = in_array( 'video', $get_field) ? 'active' : '';

<li class="image <?php echo $image; ?>" title="Alt text"></li> 
<li class="video <?php echo $video; ?>" title="Alt text"></li> 
```

# php - 在 HTML5 中拖放多个文件？

> ID：14399569
> 
> 赞同：1
> 
> 时间：2013-01-18T13:01:55.587
> 
> 标签：php, javascript, jquery, html, drag-and-drop

我已经有一个上传多个文件（HTML、JS、PHP）的系统。

现在，我有一个输入倍数。但我想在不改变系统 PHP 的情况下使用 Drag & Drop`$_FILES["uploadfile"]`有可能吗？

HTML

```
<input type="file" name="uploadfile[]" multiple="" style="position: absolute; margin: -5px 0px 0px -175px; padding: 0px; width: 220px; height: 30px; font-size: 14px; opacity: 0; cursor: pointer; display: none; z-index: 2147483583; top: 83px; left: 333px;">

<div id="dropzone" style="border: 3px solid #DDD; width: 400px; height: 400px;"></div> 
```

PHP

```
$uploaddir = 'uploads/';

$files = array();
foreach ($_FILES["uploadfile"]["error"] as $key => $error) {
    if ($error == UPLOAD_ERR_OK) {
        $path = $uploaddir . basename($_FILES['uploadfile']['name'][$key]);
        if (move_uploaded_file($_FILES['uploadfile']['tmp_name'][$key], $path)) {
            $files [] = array (
                'title' => $_FILES['uploadfile']['name'][$key],
                'url' => $path,
                'size' => $_FILES['uploadfile']['size'][$key]
            );
        }
    }
}

echo json_encode($files); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:08:31.800

看看这里，前端很容易理解，可以很容易地适应你的脚本

要实现的[源代码](http://www.inserthtml.com/2012/08/file-uploader/)

[演示](http://www.inserthtml.com/demo/file-upload/) 查看

# postgresql - 在存在于多个同名模式中的表上创建视图

> ID：14399572
> 
> 赞同：2
> 
> 时间：2013-01-18T13:02:05.840
> 
> 标签：postgresql

我正在尝试在存在于具有相同名称的多个模式中的表上创建一个视图（或在每个模式中使用而不进行修改的视图）

```
create schema company_1;
create schema company_2;
...
CREATE TABLE company_1.orders
(
  id serial NOT NULL,
  amount real,
  paid real,
  CONSTRAINT orders_pkey PRIMARY KEY (id )
)
WITH (
  OIDS=FALSE
);

CREATE TABLE company_2.orders
(
  id serial NOT NULL,
  amount real,
  paid real,
  CONSTRAINT orders_pkey PRIMARY KEY (id )
)
WITH (
  OIDS=FALSE
);

.... 
```

在不为每个视图指定架构或指定当前架构的情况下创建表订单视图的正确方法是什么？

我需要但未能得到的是

```
CREATE OR REPLACE VIEW
public.full_orders AS
SELECT id, amount FROM orders; 
```

或者

```
CREATE OR REPLACE VIEW
company_1.full_orders AS
-- company_2.full_orders AS
-- company_n.full_orders AS
SELECT id, amount FROM current_schema.orders; 
```

使用 PostgreSQL 9.2.2

编辑：我去的方式：

```
CREATE VIEW company_1.full_orders AS
SELECT id, amount FROM company_1.orders; 
```

[在这里](https://stackoverflow.com/q/12572088/1695418)讨论的模式副本上，我这样做

```
FOR src_table IN 
   SELECT table_name 
   FROM information_schema.TABLES 
   WHERE table_schema = source_schema AND table_type = 'VIEW'
LOOP
    SELECT view_definition 
    FROM information_schema.views 
    WHERE table_name = src_table AND table_schema = source_schema INTO q;
    trg_table := target_schema||'.'||src_table;
    EXECUTE 'CREATE VIEW ' || trg_table || ' AS '||replace(q, source_schema, target_schema);
END LOOP; 
```

仍在寻找更好的解决方案...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:56:06.033

用直截了当的观点是不可能的。该视图在创建时记录了基础表的身份，因此它不受稍后完成的架构设置的影响。

您可以使用使用动态 SQL 的集合返回函数来执行此操作，然后将其包装到视图中。但我认为这不是一个好的解决方案。

正如您一直在做的那样，我只会为视图创建准副本，并增强我的部署脚本以使它们全部保持最新。

# c++ - emplace_back 当循环同一个列表

> ID：14399573
> 
> 赞同：2
> 
> 时间：2013-01-18T13:02:06.980
> 
> 标签：c++, list, loops, vector, c++11

我向你展示我的问题

我有 2 个列表，分别命名为 A 和 B。

```
list<vector<int> > A = {{1},{2},{3}};
list<vector<int> > B = {{4},{5},{6}}; 
```

我想要的是 A = {{1,4},{1,5},{1,6},{2,4},{2,5},{2,6},{3,4} ,{3,5},{3,6}} 不使用任何 tmp 列表。

我在 Ubuntu 12.04 上使用 C++11 和 gcc 4.6.3

这样最小化代码：

```
auto A_begin = A.begin();
auto A_end = A.end();
auto B_begin = B.begin();
auto B_end = B.end();

for(auto i = A_begin; i != A_end; ++i) //loop on A
{
    for (auto j = B_begin;j != B_end; ++j) //loop on B
    {
        vector<int> tmp = (*i); // A[i]
        copy((*j).begin(),(*j).end(),back_inserter(tmp)); // append B[j] to A[i]
        A.emplace_back(tmp); //add it to A
    }
}
A.erase(A_begin,A_end); // remove {1},{2},{3} 
```

所以，我认为算法没问题，但它会在 A 上创建一个无限循环。我认为当我创建 A.emplace_back 时 A_end 会发生变化，但我保存了它，所以我真的不知道这里追加。

我的代码来识别问题：

```
auto A_begin = A.begin();
auto A_end = A.end();
auto B_begin = B.begin();
auto B_end = B.end();

int ii = A.size();

for(auto i = A_begin; i != A_end; ++i) //loop on A
{
    for (auto j = B_begin;j != B_end; ++j) //loop on B
    {
        vector<int> tmp = (*i);
        A.emplace_back(tmp);
    }
    cout<<--ii<<endl; // exit when print 0 ?
} 
```

这个打印负数，我必须再次^C。

编辑：我找到了解决方案：

```
auto A_begin = A.begin();
auto A_end =  A.end();
auto B_begin = B.begin();
auto B_end = B.end();

list<vector<int>> tmp_l;

for(auto i = A_begin; i != A_end; ++i) //loop on A
{
    for (auto j = B_begin;j != B_end; ++j) //loop on B
    {
        vector<int> tmp = (*i); // A[i]
        copy((*j).begin(),(*j).end(),back_inserter(tmp)); // append B[j] to A[i]
        tmp_l.emplace_back(move(tmp)); //add it to A
    }
}
 swap(tmp_l,A); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:13:21.510

这两行：

```
vector<int> tmp = (*i); // A[i]
copy((*j).begin(),(*j).end(),tmp.end()); // append B[j] to A[i] 
```

将调用未定义的行为。通过复制到 tmp.end()，您只是在 A[i] 结束后覆盖内存，而不是扩展 A[i]。您需要使用 back_insert 迭代器，例如：

```
vector<int> tmp = (*i); // A[i]
copy((*j).begin(), (*j).end(), back_inserter(tmp)); // append B[j] to A[i] 
```

您还需要包含标题以获取 back_inserter。

编辑：此外，A_end 迭代器指向列表的“结束”位置，因此无论您添加多少项目，它们总是添加在 A_end 前面，因此是无限循环。我不确定是否有解决此问题的好方法。不创建临时列表没有任何好处，无论哪种方式，您都在分配相同的内存，只需写入一个新列表即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T13:07:48.077

你的算法不好。

这 ：

```
copy((*j).begin(),(*j).end(),tmp.end()); 
```

会导致各种问题，因为您覆盖了一些随机内存。

您可能想做这样的事情来追加：

```
vector<int> tmp = (*i);
copy((*j).begin(),(*j).end(),std::back_inserter(tmp)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T14:01:09.010

> 编辑：我找到了解决方案：

该解决方案很好，使用临时向量并将其交换*比原地执行要好*`A`，因为您的原始版本（以及复制到向量末尾）以从头开始移动*每个*元素的方式完成。*`erase`*

 **但是您的解决方案可以改进：

```
// get rid of these iterators, they're useless
/*
auto A_begin = A.begin();
auto A_end =  A.end();
auto B_begin = B.begin();
auto B_end = B.end();
*/

list<vector<int>> tmp_l;

// use new for loops
for (auto& a : A)
{
    for (auto& b : B)
    {
// use auto
        auto tmp = a; // A[i]
// I find just inserting at the end simpler than using `back_inserter`
        tmp.insert(tmp.end(), b.begin(), b.end()); // append B[j] to A[i]
// then clear it the moved-from elements:
        b.clear();
// move the tmp vector into place, do not copy it.
        tmp_l.emplace_back(std::move(tmp));
    }
}
swap(tmp_l,A); 
```**

# c# - 除了并发连接总数之外，还有什么可能导致应用程序无法从池中获取连接？

> ID：14399574
> 
> 赞同：0
> 
> 时间：2013-01-18T13:02:07.670
> 
> 标签：c#, sql-server-2008

我看到以下错误：

> 超时已过。在从池中获取连接之前超时时间已过。这可能是因为所有池连接都在使用中并且达到了最大池大小。

根据 netstat 的数据，我的机器共有 7 个活动连接（其中 3 个来自 SQL Server Management Studio），但该应用程序实例无法建立连接。

我们已经审核了我们所有的代码，以确保每个代码都`SqlConnection`在一个`using`块中，并且在同一台机器上启动同一个应用程序的新实例可以正常工作（而损坏的仍然是损坏的）。

我还能看什么来诊断问题的原因？可能只是某处发生了一些过分热心的防火墙，还是我们的代码中的某些东西？

# jqgrid - 使用过滤器工具栏时，JqGrid 给出错误的记录数、页数和 rowNum 结果

> ID：14399575
> 
> 赞同：4
> 
> 时间：2013-01-18T13:02:16.107
> 
> 标签：jqgrid

在我的应用程序中，我使用 JQGrid 在 Grid 中呈现数据。

在这种情况下，我的 Grid 设置为`loadonce:true`并且它还提供了过滤器工具栏工具。

我的问题是，当我使用过滤器工具栏时，我的总页数、总记录数和网格的 rowNum 计数错误。

例如：我的网格共有 14 条记录，rowNum = 5。所以总共有 3 页，如下图所示。

![在此处输入图像描述](../Images/4e2ebb8f3ec48585f387b100bb8a4efa.png)

现在下面的代码在正常情况下对我来说可以正常工作（在我没有使用过滤器工具栏的情况下）。

```
var records =  $('#list10').getGridParam('records');
var rowNum =  $('#list10').getGridParam('rowNum');
var pageCount = Math.ceil( parseInt(records) / parseInt(rowNum)); 
```

但是当我使用过滤器时，上面编写的代码并没有给我更新的结果。例如，考虑下面的图像.. ![在此处输入图像描述](../Images/9c70a706f6873b2b322dff8a7ce9eb15.png)

在这种情况下，上面提到的代码给我的结果与 .. 总页数 =3 ，总行数 =14 和 rowNum = 5 相同。

谁能建议我当我使用过滤器工具栏时如何检索页面、总计、记录、rowNum 的更新值？

# r - 一式三份的平均值

> ID：14399576
> 
> 赞同：2
> 
> 时间：2013-01-18T13:02:17.973
> 
> 标签：r, dataframe, mean

我刚刚清理了我从 Excel 电子表格中抓取的数据框，其中包括从一些数字中删除百分比符号，请参阅[Removing Percentages from a Data Frame](https://stackoverflow.com/questions/14385060/removing-percentages-from-a-data-frame)。

数据有二十四行代表参数和来自一式三份进行的八次实验的结果。例如，一个人会从中得到什么，

```
DF1 <- data.frame(X = 1:24, Y = 2 * (1:24), Z = 3 * (1:24)) 
```

我想找到每个一式三份的平均值（幸运的是，它们是按顺序排列的）并创建一个具有八行和相同数量列的新数据框。

我尝试使用，

```
DF2 <- data.frame(replicate(3,sapply(DF1, mean))) 
```

这给了我每列的平均值作为行三次。我想得到一个可以给我的数据框，

```
data.frame(X = c(2,5,8,11,14,17,20,23), Y = c(4,10,16,22,28,34,40,23), Z = c(6,15,24,33,42,51,60,69)) 
```

我手工计算的；它应该是减少的结果。

谢谢， ...

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T13:18:15.570

codegolf 的好任务！

```
aggregate(DF1, list(rep(1:8, each=3)), mean)[,-1] 
```

更一般地说，您应该替换`8`为`nrow(DF1)`.

...或者，我最喜欢的，使用矩阵乘法：

```
t(t(DF1) %*% diag(8)[rep(1:8,each=3),]/3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T13:06:25.347

这有效：

```
foo <- matrix(unlist(by(data=DF1,INDICES=rep(1:8,each=3),FUN=colMeans)),
  nrow=8,byrow=TRUE)
colnames(foo) <- colnames(DF1) 
```

看`?by`。

# java - 无法将文本设置为隐藏输入

> ID：14399579
> 
> 赞同：2
> 
> 时间：2013-01-18T13:02:37.163
> 
> 标签：java, webdriver, selenium-webdriver

我正在尝试设置要输入的文本，然后单击隐藏的链接（听起来可能很愚蠢，但这是另一个问题的解决方法）。所以我尝试了类似的东西

```
WebElement element = webDriver.findElement(By.cssSelector("input[id$='inputId']"));
((JavascriptExecutor) webDriver).executeScript("arguments[0].style.visibility='visible';", element);
element.sendKeys(text); 
```

我也试过

```
((JavascriptExecutor) webDriver).executeScript("arguments[0].setText(" + text + ")", element);
or "arguments[0].text="someText" 
```

这些都不起作用，测试总是以

```
java.lang.IllegalArgumentException: Argument is of an illegal type: $Proxy30 
```

当我调试它时，我可以看到该元素已正确找到，但在执行脚本期间出现此异常。那么我在这里做错了什么？

PS我如何点击那个链接，我也必须使用JS Executor吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:12:01.963

在半固态浏览器中，您甚至可以通过 JavaScript 搜索元素，只需运行以下命令：

```
var elem = document.querySelector("input[id$='inputId']");
elem.value = "some text"; 
```

还要注意`value`. 我从未见过元素上的`setText()`方法或`text`属性，所以也许我弄错了。但我确信输入值是由`value`属性设置的。

在 WebDriver 中：

```
JavascriptExecutor js = (JavascriptExecutor)webDriver;
js.executeScript(
    "document.querySelector(\"input[id$='inputId']\").value = '" + someText + "';"); 
```

# c++ - for( ;; ) 的功能是什么？

> ID：14399582
> 
> 赞同：3
> 
> 时间：2013-01-18T13:02:52.277
> 
> 标签：c++, syntax

> **可能重复：**
> [“for(;;)”是否比“while (TRUE)”快？如果不是，人们为什么要使用它？](https://stackoverflow.com/questions/2611246/is-for-faster-than-while-true-if-not-why-do-people-use-it)

使用此 for 循环找到代码。例如，使用它的具体功能是什么`while(true)`？它使用更少的内存吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-18T13:03:39.223

`for(;;)`在功能上等同于`while(true)`但避免了某些编译器（包括 MSVC 的 cl）的“条件表达式是常量”警告

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T13:04:29.967

*Kernighan 和 Ritchie 在他们的C 编程语言*书（第 3.5 节）中推广了这种结构

> for 语句

```
for (expr1; expr2; expr3)
    statement 
```

> 如果 expr1 或 expr3 被省略，它只是从扩展中删除。如果测试 expr2 不存在，则认为它是永久正确的，所以

```
for (;;) {
    ...
} 
```

是一个“无限”循环，可能会被其他方式打破，例如 a `break`or `return`.

`for(;;)`和之间绝对没有区别`while(true)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T13:04:15.037

```
while(true)
{

} 
```

始终是我使用过的以及我看到其他人使用的必须手动破坏的循环。

一些编译器给你警告，这虽然织机可能是不正确的。但事实并非如此。

为两者生成的汇编代码完全相同。没有区别。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T13:09:42.087

**首先**，循环的使用取决于需求&基于此，我们只能决定何时使用哪一个。只需检查@Luchian 的要求，您就会知道。

**其次**，这显然取决于特定语言的解释器/编译器的特定实现。

That said, theoretically, any sane implementation is likely to be able to implement one in terms of the other if it was faster so the difference should be negligible at most.

# ios - 有时未收到 Apple 推送通知 (JavaPNS)

> ID：14399583
> 
> 赞同：0
> 
> 时间：2013-01-18T13:02:59.857
> 
> 标签：ios, notifications, apple-push-notifications, payload

我正在与通知服务聊天。有时通知不会到达我的设备。我正在使用 JavaPNS，所以我的代码不是很复杂，但是当我非常快速地（大约 10 条）从一台设备向另一台设备发送大量消息时，我没有收到所有通知。其中一些在途中丢失（通常是两个之一）。

这是我的代码：

```
PushNotificationPayload payload = PushNotificationPayload.complex();
payload.addAlert("Name : text"); payload.addSound("default");
payload.addBadge(1); 
payload.addCustomDictionary("type", NOTIF_MESSAGE);
Push.payload(payload, "******.p12", "password", false, URI); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:14:57.860

没关系。

> 重要提示：由于**无法保证交付**，因此您不应依赖远程通知工具通过有效负载将关键数据交付给应用程序。并且永远不要在有效负载中包含敏感数据。您应该只使用它来通知用户有新数据可用。

-[本地和推送通知编程指南](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:18:03.183

Apple 不保证所有消息都已送达。文档说：

> 通知的传递是“尽力而为”，不能保证。

# android - 从 Fragment 到 Activity 通信的数据不起作用

> ID：14399587
> 
> 赞同：1
> 
> 时间：2013-01-18T13:03:09.410
> 
> 标签：android, android-fragments

我已经有一段时间了，经过几次失败的尝试，我非常接近实现我所追求的目标。我从这个网站上挖掘了各种答案，最有帮助的是：-

[在片段及其容器活动之间传递数据](https://stackoverflow.com/questions/9343241/passing-data-between-a-fragment-and-its-container-activity)

我已经在我的程序中实现了所有 Harlo 的代码片段，但我遇到了一个问题。

当我运行应用程序时，我点击列表项以加载“核心”片段，当它崩溃时，我得到可怕的“不幸的是应用程序已停止”。

我的片段代码在下面，我突出显示了违规行，我还包括了 logcat 的相关部分。

任何帮助将不胜感激。

谢谢你

加里

```
import android.app.Activity;
import android.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.os.Bundle;
import android.widget.Button;
import android.widget.RelativeLayout;
import android.view.View.OnClickListener;

public class CoreFragment extends Fragment{

int index;
Button Button1,Button2,Button3;
String Str;
OnDataPass dataPasser;

@Override
public void onAttach(Activity a) {
    super.onAttach(a);
        dataPasser = (OnDataPass) a;
}

public static CoreFragment newInstance(int index) {
    CoreFragment coreFragment = new CoreFragment();
    coreFragment.index = index;
    return coreFragment;
}

public interface OnDataPass {
    public void onDataPass(String data);
}

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    if (container == null) {
        // We have different layouts, and in one of them this
        // fragment's containing frame doesn't exist. The fragment
        // may still be created from its saved state, but there is
        // no reason to try to create its view hierarchy because it
        // won't be displayed. Note this is not needed -- we could
        // just run the code below, where we would create and return
        // the view hierarchy; it would just never be used.
        return null;
    }
    RelativeLayout mRelativeLayout = (RelativeLayout) inflater.inflate(R.layout.corefragment,
            container, false);

    Button Button1 = (Button) mRelativeLayout.findViewById(R.id.Button1);
    Button1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
        Str = "I ";
        passData(Str);
            }

       public void passData(String data) {
            data = Str;
            dataPasser.onDataPass(data);
        }

    });
    return mRelativeLayout;
}
}//end 
```

日志猫

```
01-18 12:19:18.430: W/dalvikvm(1601): threadid=1: thread exiting with uncaught exception (group=0x40acf228)
01-18 12:19:18.440: E/AndroidRuntime(1601): FATAL EXCEPTION: main
01-18 12:19:18.440: E/AndroidRuntime(1601): java.lang.ClassCastException: com.epsilonitsystems.fragger.MainActivity cannot be cast to com.epsilonitsystems.fragger.CoreFragment$OnDataPass
01-18 12:19:18.440: E/AndroidRuntime(1601):     at com.epsilonitsystems.fragger.CoreFragment.onAttach(CoreFragment.java:25) 
```

嗨，TNR，谢谢你，正如我对 Fragment 所说的那样，它们被证明是一种真正的痛苦！我已经添加了您建议的行，现在我崩溃了！LogCat 如下。感谢您到目前为止的帮助，我很高兴能把这个整理好！！

```
01-23 15:30:40.659: W/dalvikvm(3098): threadid=1: thread exiting with uncaught exception (group=0x40acf228)
01-23 15:30:40.749: E/AndroidRuntime(3098): FATAL EXCEPTION: main
01-23 15:30:40.749: E/AndroidRuntime(3098): java.lang.NullPointerException
01-23 15:30:40.749: E/AndroidRuntime(3098):     at com.epsilonitsystems.fragger.MainActivity.onDataPass(MainActivity.java:33)
01-23 15:30:40.749: E/AndroidRuntime(3098):     at com.epsilonitsystems.fragger.CoreFragment$1.passData(CoreFragment.java:69)
01-23 15:30:40.749: E/AndroidRuntime(3098):     at com.epsilonitsystems.fragger.CoreFragment$1.onClick(CoreFragment.java:62)
01-23 15:30:40.749: E/AndroidRuntime(3098):     at android.view.View.performClick(View.java:3549)
01-23 15:30:40.749: E/AndroidRuntime(3098):     at android.view.View$PerformClick.run(View.java:14393)
01-23 15:30:40.749: E/AndroidRuntime(3098):     at android.os.Handler.handleCallback(Handler.java:605)
01-23 15:30:40.749: E/AndroidRuntime(3098):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-23 15:30:40.749: E/AndroidRuntime(3098):     at android.os.Looper.loop(Looper.java:154)
01-23 15:30:40.749: E/AndroidRuntime(3098):     at android.app.ActivityThread.main(ActivityThread.java:4945)
01-23 15:30:40.749: E/AndroidRuntime(3098):     at java.lang.reflect.Method.invokeNative(Native Method)
01-23 15:30:40.749: E/AndroidRuntime(3098):     at java.lang.reflect.Method.invoke(Method.java:511)
01-23 15:30:40.749: E/AndroidRuntime(3098):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-23 15:30:40.749: E/AndroidRuntime(3098):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-23 15:30:40.749: E/AndroidRuntime(3098):     at dalvik.system.NativeStart.main(Native Method) 
```

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:09:30.550

您正在尝试将 Activity 类型转换为接口。所以你得到了`ClassCastException`。检查您是否`MainActivity`正在实现`onDataPass`接口。如果它实现了`onDataPass`接口，那么你的问题就解决了。希望它有效。

**更新答案：**

如下更改您`onClick()`的。您已经编写`passData()`但从未调用它来将数据传递给`onDataPass()`这将 100% 肯定地解决您的问题。

```
@Override
public void onClick(View v) {
 Str = "I ";
 passData(Str);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:35:32.663

我不知道你为什么把这个弄得这么复杂。你为什么不这样做：

```
public void onClick(View v) {
    ((OnDataPass) CoreFragment.this.getActivity()).passData("I");
} 
```

显然，当然，活动必须是：

```
public class ActivityThatIncludesCoreFragment implements OnDataPass {    
    ....
} 
```

# r - R中的ifelse行为

> ID：14399591
> 
> 赞同：0
> 
> 时间：2013-01-18T13:03:37.147
> 
> 标签：r, if-statement

首先，我声明我检查了所有相关问题`ifelse`，但没有任何成功。我正在尝试`ifelse`根据月份在野生动物物种中添加一个因素（交配期）。DB的一个例子如下：

```
> DB <- data.frame(ID = 1:6, Month = 1:12)
colnames(DB) <- c("ID","Month") 
```

我尝试过的是：

```
Period<-with(DB,ifelse(Month==c(2,3,4,5,6,7,8,9,10),"M","R"))) 
```

但结果与条件不符：

```
(Period)[1] "R" "R" "R" "R" "R" "R" "R" "R" "R" "R" "R" "R" 
```

还有一个警告：

```
Warning message:
In Month == c(2, 3, 4, 5, 6, 7, 8, 9, 10) :
longer object length is not a multiple of shorter object length` 
```

令人惊讶的是，当我在真实数据库上启动脚本时，会发生两件事：

*   在新列 Period 中出现一些 M
*   没有警告出来

我现在对如何`ifelse`工作感到非常困惑。我希望有人能澄清这个函数是如何工作的，以及如何正确键入脚本以获得正确的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T13:09:36.480

使用`%in%`如下：

```
Period<-with(DB,ifelse(Month %in% c(2,3,4,5,6,7,8,9,10),"M","R"))
Period
 [1] "R" "M" "M" "M" "M" "M" "M" "M" "M" "M" "R" "R" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T13:11:21.733

你的比较是错误的形式。`ifelse`一次通过一个元素进行比较，而`Month == 2:10`将成对比较元素并返回一个向量，指示每个成对比较是真还是假。

您想使用`%in%`which 返回 true 或 false 取决于元素是否在向量中：

```
Period<-with(DB,ifelse(Month %in% 2:10,"M","R"))) 
```

# r - 我们可以改变 R-igraph 中的文本大小和节点大小吗？

> ID：14399594
> 
> 赞同：2
> 
> 时间：2013-01-18T13:03:43.357
> 
> 标签：r, resize, igraph, nodename

我们可以改变 R-igraph 中的文本大小和节点大小吗？如果是，我们可以使用什么属性？有什么例子吗？

（通过文本我的意思是节点名称）

![使用 iGraph 的网络](../Images/d2474cf5ebae5de3fd73506dc57091cb.png)

例如，我使用 igraph 函数在网络上方绘制如下：

```
plot.igraph(net,vertex.label=V(net)$name,layout=layout.fruchterman.reingold,
            edge.color="black",edge.width=Eweight,edge.curved=F) 
```

如果我们查看与每个节点对应的标签，每个节点都有相同的大小。我想根据它们相应的节点大小来改变这个标签大小。例如 size("w1") > size("w5") > size("w6") 等等。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T14:16:18.823

您可以使用 data.frame 创建可重现的示例

```
library(igraph)
dat  <- data.frame(name=c("Alice", "Bob", "Cecil"),age=c(48,33,45))
g<-graph.data.frame(dat) 
```

然后更改更改一些属性

```
 V(g)$label.cex <- seq(0.5,5,length.out=6)         ## text size
 V(g)$size      <- seq(10,60,length.out=6)         ## circle size proportional to text size 
```

最后的情节

```
plot(g, vertex.label = V(g)$name,
     vertex.shape="circle",
     vertex.color="red"
 ) 
```

![在此处输入图像描述](../Images/c5caceca7f0dbc5a29775c18b992cae5.png)

# android - Android错误致命异常：主要

> ID：14399602
> 
> 赞同：-3
> 
> 时间：2013-01-18T13:04:20.153
> 
> 标签：android, fatal-error

这是我在开始 aysncronic 任务时遇到的错误。

```
01-18 12:21:40.379: E/AndroidRuntime(1102): FATAL EXCEPTION: main
01-18 12:21:40.379: E/AndroidRuntime(1102): java.lang.RuntimeException: Unable to start activity ComponentInfo{ch.edocsyl.spesen/ch.edocsyl.spesen.SpesenActivity}: java.lang.NullPointerException
01-18 12:21:40.379: E/AndroidRuntime(1102):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-18 12:21:40.379: E/AndroidRuntime(1102):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-18 12:21:40.379: E/AndroidRuntime(1102):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-18 12:21:40.379: E/AndroidRuntime(1102):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-18 12:21:40.379: E/AndroidRuntime(1102):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-18 12:21:40.379: E/AndroidRuntime(1102):     at android.os.Looper.loop(Looper.java:137)
01-18 12:21:40.379: E/AndroidRuntime(1102):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-18 12:21:40.379: E/AndroidRuntime(1102):     at java.lang.reflect.Method.invokeNative(Native Method)
01-18 12:21:40.379: E/AndroidRuntime(1102):     at java.lang.reflect.Method.invoke(Method.java:511)
01-18 12:21:40.379: E/AndroidRuntime(1102):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-18 12:21:40.379: E/AndroidRuntime(1102):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-18 12:21:40.379: E/AndroidRuntime(1102):     at dalvik.system.NativeStart.main(Native Method)
01-18 12:21:40.379: E/AndroidRuntime(1102): Caused by: java.lang.NullPointerException
01-18 12:21:40.379: E/AndroidRuntime(1102):     at ch.edocsyl.spesen.SpesenActivity.onCreate(SpesenActivity.java:87)
01-18 12:21:40.379: E/AndroidRuntime(1102):     at android.app.Activity.performCreate(Activity.java:5104)
01-18 12:21:40.379: E/AndroidRuntime(1102):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-18 12:21:40.379: E/AndroidRuntime(1102):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-18 12:21:40.379: E/AndroidRuntime(1102):     ... 11 more 
```

我的代码：

```
public class SpesenActivity extends Activity {

ProgressDialog pDialog;
static ApiRestClient arc;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_spesen);

    final TextView text = (TextView) findViewById(R.id.textView1);

    RequestParams params = new RequestParams();
    //params.put("username", "james");

    pDialog = new ProgressDialog(SpesenActivity.this);
    pDialog.setMessage("Loading...");
    pDialog.setIndeterminate(false);
    pDialog.setCancelable(false);
    pDialog.show();

    arc.get("uebersicht.json", params, new JsonHttpResponseHandler() {
        public void onSuccess(String response) {
            text.setText(response);
            pDialog.dismiss();
        }
    }); 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:07:32.003

你还没有初始化`arc`。先创建arc的对象，然后试试。

```
arc = new ApiRestClient(); 
```

在使用之前添加上面的代码行`arc`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T13:06:22.463

您应该在使用它之前进行初始化`arc`：

```
arc = new ApiRestClient();
arc.get("uebersicht.json", params, new JsonHttpResponseHandler() {
    public void onSuccess(String response) {
        text.setText(response);
        pDialog.dismiss();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T15:01:08.333

第 1 步：阅读堆栈跟踪

第 2 步：识别异常

第 3 步：识别导致异常的类、方法和行

第 4 步：找到修复程序

第 5 步：如果找不到修复程序，请提出一个问题，提及前面所有 4 个步骤的结果

# algorithm - Chaitin-Briggs 算法解释

> ID：14399608
> 
> 赞同：7
> 
> 时间：2013-01-18T13:04:33.663
> 
> 标签：algorithm, graph

我用谷歌搜索了它，但我没有找到关于这个主题的一些好材料。

在哪里可以找到有关 Chaitin-Briggs 图形着色算法的更多信息？或者有人可以解释它是如何工作的吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-18T13:35:31.080

Chaitin 算法的关键见解称为度数 < R 规则，如下所示。

给定一个图 G，其中包含一个度数小于 R 的节点 N，如果图 G'（其中 G' 是移除了节点 N 的 G）是 R 可着色的，则 G 是 R 可着色的。证明在一个方向上是显而易见的：如果图 G 可以用 R 种颜色着色，则可以在不更改着色的情况下创建图 G'。在另一个方向，假设我们有 G' 的 R 着色。由于 N 的度数小于 R，因此与 N 相邻的节点必须至少有一种颜色未使用。我们可以用这种颜色为 N 着色。

算法如下：

```
While G cannot be R-colored
    While graph G has a node N with degree less than R
        Remove N and its associated edges from G and push N on a stack S
    End While 
    If the entire graph has been removed then the graph is R-colorable 
        While stack S contains a node N
            Add N to graph G and assign it a color from the R colors
        End While
    Else graph G cannot be colored with R colors
        Simplify the graph G by choosing an object to spill and remove its node N from G
        (spill nodes are chosen based on object’s number of definitions and references)
End While 
```

由于溢出问题，Chaitin-Briggs 算法的复杂度为 O(n2)。仅当简化图 G' 仅具有 R 度或更大度的节点时，图 G 才会无法 R 着色。当一个图很容易 R 着色时，单次迭代的成本是 O(n)，因为我们在图上进行了两次旅行，每次都删除或添加一个节点。但是溢出会带来额外的复杂性，因为我们可能需要在 G 变为 R-colorable 之前溢出任意数量的节点。对于我们溢出的每个节点，我们都会通过线性算法进行另一次旅行

你也可以通过这个[寄存器分配算法](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CDAQFjAA&url=http://www.cs.washington.edu/education/courses/csep521/07wi/prj/pardoe.docx&ei=eUr5UKPVJ9DrrQeLw4GgBw&usg=AFQjCNEbmlUreZvbbkItPuEl-tZATxPHqQ&sig2=noBV6MB7z1FQBToDF5WmCw&bvm=bv.41248874,d.bmk)

# php - 如果在键盘上按下姓名的第一个字母，则滚动到网页上的人名

> ID：14399610
> 
> 赞同：3
> 
> 时间：2013-01-18T13:04:36.400
> 
> 标签：php, jquery, keyboard, keyboard-shortcuts, usability

我有一个包含大约 500 个名称列表的页面。用户想`s`在他们的键盘上输入例如，然后页面将自动滚动到以 开头的名称`s`。

我应该将这些名称的第一个字母转换为`INT`，将该 INT 作为数据属性并将 jQuery 函数添加到页面还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T13:08:56.807

我建议使用适当的 div 将每个字符的名称列表嵌入到 div 中`id`，例如以*S*开头的名称：

```
<div id="S">
  ... names with S ...
</div> 
```

然后你可以使用 jQuery 对按键做出反应，然后做一个

```
location.href = '#S'; 
```

然后，浏览器会自动滚动到相应的`div`. 这样做的另一个好处是，您甚至可以使用 URL 将其放入您的收藏夹，因此如果您想直接跳转到所有带有*S*的人，您可以轻松做到这一点。

**更新：**由于`.keypress()`jQuery的函数只返回一个数字，而不是字符本身，你需要转换它。有关如何将字符转换为数字以及反之亦然的示例，请参阅[在 Javascript 中将字符转换为 ASCII 代码。](https://stackoverflow.com/a/9539389/1333873)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:08:40.100

如果您正在寻找更快的东西，您可以执行以下技巧（我认为名称是有序的）。

您将添加到具有特定字母的第一个元素，`id="letter_X"`当用户滚动时，您只需使用 id 作为锚点 ( `my_url#letter_X`)。

这是我知道的最快的方法，但只适用于一个字母。

PS：在 html5 中，锚点现在是元素 ID，可以添加到任何 html 元素上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T13:13:54.237

我认为您应该使用带有 id 的部分作为标签。然后从 jquery 做一个 $.scrollTop() 。

```
$(window).scrollTop($('section#user_id').offset().top); 
```

# svg - 在 Tilemill/Mapbox 中自定义 SVG 图标

> ID：14399611
> 
> 赞同：0
> 
> 时间：2013-01-18T13:04:40.227
> 
> 标签：svg, mapbox, tilemill

我在地图上添加了一个数据层，并使用 svg 图像来表示标记。

```
#points {
  point-file: url(marker2.svg);
  marker-width:10;
  marker-fill:#fff;
} 
```

因为它是 SVG 图像，所以我正在尝试自定义填充颜色，但它不起作用。`marker-fill`似乎只适用于他们提供的标记，但不适用于 SVG 图像。这可以使用 TileMill/Mapbox 吗？JS API可以吗？

**更新**

从[http://mapbox.com/blog/announcing-tilemill-0.10.0/](http://mapbox.com/blog/announcing-tilemill-0.10.0/)看来，使用`marker-fill`应该可以解决问题，但事实并非如此。问题可能出在我的 svg 图像上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:12:13.580

解决了，看起来如果你想自定义标记，你需要

`marker-file: url(marker2.svg);`代替 `point-file: url(marker2.svg);`

# android - 延迟加载实现错误

> ID：14399614
> 
> 赞同：1
> 
> 时间：2013-01-18T13:05:10.557
> 
> 标签：android, listview, android-listfragment, android-fragmentactivity, android-lazyloading

我正在尝试在选项卡片段中的列表视图上实现延迟加载以加载数组 abc 的元素。我正在尝试加载 10 个元素，然后当用户向下滚动时，将加载接下来的 10 个元素。但是我的应用程序无法运行，因为我无法跳转到 UI 线程以对其进行更新（runonUithread(returnRes); 无法正常工作）。你能[请看下面的代码并提出正确的方法来实现延迟加载。谢谢你。

片段类：

```
package com.example.abe;

import java.util.ArrayList;
import android.annotation.TargetApi;
import android.app.Activity;
import android.content.Context;
import android.os.Build;
import android.os.Bundle;
import android.support.v4.app.ListFragment;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AbsListView;
import android.widget.AbsListView.OnScrollListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;

@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public class Tab1Fragment extends ListFragment {
    ListView lv;
    Activity act = this.getActivity();
    Context ct = this.getActivity();
    XMLGettersSetters data;
    boolean loadingMore = false;
    String abc[] = new String[50];
    static int count = 0;
    int itemsPerPage = 10;
    ArrayList<String> myListItems;
    ArrayList<String> myListItems2;
    ArrayAdapter<String> adapter;
    static int size = 0;

    @SuppressWarnings("unused")
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        if (container == null) {
            return null;
        }
        myListItems2 = new ArrayList<String>();
        adapter = new ArrayAdapter<String>(getActivity().getBaseContext(),
                android.R.layout.simple_list_item_1, myListItems2);
        View root = inflater.inflate(R.layout.tab_frag1_layout, container,
                false);
        lv = (ListView) root.findViewById(android.R.id.list);
        lv.setAdapter(adapter);
        return root;
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        myListItems = new ArrayList<String>();
        View footerView = ((LayoutInflater) this.getActivity()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(
                R.layout.listfooter, null, false);
        this.getListView().addFooterView(footerView);
        this.setListAdapter(adapter);
        for (int i = 0; i < 50; i++) {
            abc[i] = "ab" + i;
        }
        this.getListView().setOnScrollListener(new OnScrollListener() {
            @Override
            public void onScrollStateChanged(AbsListView view, int scrollState) {
            }

            @Override
            public void onScroll(AbsListView view, int firstVisibleItem,
                    int visibleItemCount, int totalItemCount) {
                System.out.println(abc.length);
                System.out.println(count);
                int lastInScreen = firstVisibleItem + visibleItemCount;
                System.out.println(lastInScreen);
                if ((lastInScreen == totalItemCount) && !(loadingMore)) {
                    try {
                        Thread thread = new Thread(null, loadMoreListItems);
                        thread.start();
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }
            }
        });
        try {
            Thread thread = new Thread(null, loadMoreListItems);
            thread.start();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private Runnable loadMoreListItems = new Runnable() {
        @Override
        public void run() {
            loadingMore = true;
            myListItems = new ArrayList<String>();
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
            }
            size = abc.length;
            for (int i = 0; i < itemsPerPage; i++) {
                if (count < size) {
                    myListItems.add(abc[count].toString());
                    count = count + 1;
                } else {
                    break;
                }
            }
            Log.i("a", "b");
            try {
                act.runOnUiThread(returnRes);
            } catch (Exception e) {
                e.printStackTrace();
            }
            Log.i("a", "b");
        }
    };
    private Runnable returnRes = new Runnable() {
        @Override
        public void run() {
            if (myListItems != null && myListItems.size() > 0) {
                for (int i = 0; i < myListItems.size(); i++)
                    adapter.add(myListItems.get(i));
            }
            lv.setAdapter(adapter);
            Log.i("a", "b");
            adapter.notifyDataSetChanged();
            Log.i("a", "b");
            loadingMore = false;
        }
    };
} 
```

日志猫：

```
01-18 18:59:21.606: I/System.out(971): 50
01-18 18:59:21.606: I/System.out(971): 0
01-18 18:59:21.606: I/System.out(971): 0
01-18 18:59:21.926: I/System.out(971): 50
01-18 18:59:21.926: I/System.out(971): 0
01-18 18:59:21.926: I/System.out(971): 1
01-18 18:59:22.257: I/System.out(971): 50
01-18 18:59:22.257: I/System.out(971): 0
01-18 18:59:22.257: I/System.out(971): 1
01-18 18:59:22.676: I/a(971): b
01-18 18:59:22.676: W/System.err(971): java.lang.NullPointerException
01-18 18:59:22.715: W/System.err(971):  at com.example.abe.Tab1Fragment$1.run(Tab1Fragment.java:113)
01-18 18:59:22.936: W/System.err(971):  at java.lang.Thread.run(Thread.java:1019)
01-18 18:59:22.936: I/a(971): b 
```

片段活动类：

```
package com.example.abe;

import java.util.HashMap;
import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentTransaction;
import android.view.View;
import android.widget.TabHost;
import android.widget.TabHost.TabContentFactory;

public class TabsFragmentActivity extends FragmentActivity implements
        TabHost.OnTabChangeListener {

    private TabHost mTabHost;
    private HashMap<String, TabInfo> mapTabInfo = new HashMap<String, TabsFragmentActivity.TabInfo>();
    private TabInfo mLastTab = null;

    private class TabInfo {
        private String tag;
        private Class<?> clss;
        private Bundle args;
        private Fragment fragment;

        TabInfo(String tag, Class<?> clazz, Bundle args) {
            this.tag = tag;
            this.clss = clazz;
            this.args = args;
        }

    }

    class TabFactory implements TabContentFactory {

        private final Context mContext;

        public TabFactory(Context context) {
            mContext = context;
        }

        public View createTabContent(String tag) {
            View v = new View(mContext);
            v.setMinimumWidth(0);
            v.setMinimumHeight(0);
            return v;
        }

    }

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tabs_layout);
        initialiseTabHost(savedInstanceState);
        if (savedInstanceState != null) {
            mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab")); // set
                                                                                // the
                                                                                // tab
                                                                                // as
                                                                                // per
                                                                                // the
                                                                                // saved
                                                                                // state
        }
    }

    protected void onSaveInstanceState(Bundle outState) {
        outState.putString("tab", mTabHost.getCurrentTabTag()); // save the tab
                                                                // selected
        super.onSaveInstanceState(outState);
    }

    private void initialiseTabHost(Bundle args) {
        mTabHost = (TabHost) findViewById(android.R.id.tabhost);
        mTabHost.setup();
        TabInfo tabInfo = null;
        TabsFragmentActivity.addTab(this, this.mTabHost, this.mTabHost
                .newTabSpec("Tab1").setIndicator("ST"), (tabInfo = new TabInfo(
                "Tab1", Tab1Fragment.class, args)));
        this.mapTabInfo.put(tabInfo.tag, tabInfo);
        TabsFragmentActivity.addTab(this, this.mTabHost, this.mTabHost
                .newTabSpec("Tab2").setIndicator("CSI"),
                (tabInfo = new TabInfo("Tab2", Tab2Fragment.class, args)));
        this.mapTabInfo.put(tabInfo.tag, tabInfo);
        this.onTabChanged("Tab1");
        mTabHost.setOnTabChangedListener(this);
    }

    private static void addTab(TabsFragmentActivity activity, TabHost tabHost,
            TabHost.TabSpec tabSpec, TabInfo tabInfo) {
        tabSpec.setContent(activity.new TabFactory(activity));
        String tag = tabSpec.getTag();
        tabInfo.fragment = activity.getSupportFragmentManager()
                .findFragmentByTag(tag);
        if (tabInfo.fragment != null && !tabInfo.fragment.isDetached()) {
            FragmentTransaction ft = activity.getSupportFragmentManager()
                    .beginTransaction();
            ft.detach(tabInfo.fragment);
            ft.commit();
            activity.getSupportFragmentManager().executePendingTransactions();
        }
        tabHost.addTab(tabSpec);
    }

    public void onTabChanged(String tag) {
        TabInfo newTab = this.mapTabInfo.get(tag);
        if (mLastTab != newTab) {
            FragmentTransaction ft = this.getSupportFragmentManager()
                    .beginTransaction();
            if (mLastTab != null) {
                if (mLastTab.fragment != null) {
                    ft.detach(mLastTab.fragment);
                }
            }
            if (newTab != null) {
                if (newTab.fragment == null) {
                    newTab.fragment = Fragment.instantiate(this,
                            newTab.clss.getName(), newTab.args);
                    ft.add(R.id.realtabcontent, newTab.fragment, newTab.tag);
                } else {
                    ft.attach(newTab.fragment);
                }
            }
            mLastTab = newTab;
            ft.commit();
            this.getSupportFragmentManager().executePendingTransactions();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:11:41.637

使用无尽滚动列表视图。[这是链接](http://benjii.me/2010/08/endless-scrolling-listview-in-android/)。我已经实施了。如果你有任何疑问你可以问。

这是我的 TabActivity

```
import android.app.TabActivity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.widget.TabHost;
import android.widget.TabHost.OnTabChangeListener;
import android.widget.TabHost.TabSpec;

public class MainActivity extends TabActivity {

    Context context = MainActivity.this;

    TabHost tabHost;
    TabSpec spec;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        tabHost = getTabHost();
        // Android tab
        tabHost.addTab(tabHost
                .newTabSpec("Home")
                .setIndicator("Home",
                        getResources().getDrawable(R.drawable.home))
                .setContent(
                        new Intent(this, MyActivityGroup.class)
                                .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)));

        tabHost.addTab(tabHost
                .newTabSpec("Now Reading")
                .setIndicator("Now Reading",
                        getResources().getDrawable(R.drawable.now_reading))
                .setContent(
                        new Intent(this, NowReadingActivityGroup.class)
                                .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)));

        tabHost.addTab(tabHost
                .newTabSpec("Favorites")
                .setIndicator("Favorites",
                        getResources().getDrawable(R.drawable.favorites))
                .setContent(
                        new Intent(this, FavoriteActivityGroup.class)
                                .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)));

        tabHost.addTab(tabHost
                .newTabSpec("Profile")
                .setIndicator("Profile",
                        getResources().getDrawable(R.drawable.profile))
                .setContent(
                        new Intent(this, ProfileActivityGroup.class)
                                .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)));

        tabHost.setCurrentTabByTag("Home");

        tabHost.setOnTabChangedListener(new OnTabChangeListener() {

            @Override
            public void onTabChanged(String tabId) {

            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

这是 ActivityGroup 类

```
import java.util.Stack;
import android.app.Activity;
import android.app.ActivityGroup;
import android.app.LocalActivityManager;
import android.content.Intent;
import android.os.Bundle;
import android.os.Parcelable;
import android.util.Log;
import android.view.Window;

public class MyActivityGroup extends ActivityGroup {
    private Stack<String> stack;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if (stack == null) {
            stack = new Stack<String>();
        }

        push("1stStackActivity", new Intent(this, Home.class));

    }

    @Override
    public void finishFromChild(Activity child) {
        pop();
    }

    @Override
    public void onBackPressed() {

        pop();

    }

    public void push(String id, Intent intent) {
        Window window = getLocalActivityManager().startActivity(id,
                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
        if (window != null) {
            stack.push(id);
            setContentView(window.getDecorView());
        }
    }

    public void pop() {
        if (stack.size() == 1) {

            Home.BookTitle = null;
            Home.BookCoverPhotos = null;
            Home.BookAuther = null;
            Home.BookPublishDate = null;
            Home.language = "all";
            Home.bitmapArray = null;
            Home.BookIDs = null;
            Home.BookRating = null;
            Home.BookDescription = null;
            Home.BookCode = null;
            Home.userFName = null;
            Home.gridViewState = null;
            Home.initialIndex = 0;
            Home.CustomerID = -1;
            Home.checkBookCount = true;
            Home.str = null;
            Home.FlagSharedPreferences = false;

            BookSearchResultActivity.BookTitle = null;
            BookSearchResultActivity.BookCoverPhotos = null;
            BookSearchResultActivity.BookAuther = null;
            BookSearchResultActivity.BookPublishDate = null;
            BookSearchResultActivity.ImageByte = null;
            BookSearchResultActivity.bitmapArray = null;
            BookSearchResultActivity.BookIDs = null;
            BookSearchResultActivity.BookRating = null;
            BookSearchResultActivity.BookDescription = null;

            BookSearchResultActivity.startIndex = 0;
            BookSearchResultActivity.endIndex = 14;
            BookSearchResultActivity.listViewState = null;

            finish();
        }

        LocalActivityManager manager = getLocalActivityManager();
        manager.destroyActivity(stack.pop(), true);
        if (stack.size() > 0) {
            Intent lastIntent = manager.getActivity(stack.peek()).getIntent()
                    .setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            Window newWindow = manager.startActivity(stack.peek(), lastIntent);
            setContentView(newWindow.getDecorView());
        }
    }
} 
```

这是我的 Home Activty 类，它使用 EndlessLisnter 进行网格视图，但您也可以将其用于列表视图。

public class Home extends Activity { /** 首次创建活动时调用。*/ 静态最终字符串 URL = "http://www.shiaislamiclibrary.com/requesthandler.ashx";

```
static final String KEY_ITEM = "Book"; // parent node
static final String KEY_BOOKAUTHOR = "book_author";
static final String KEY_BOOKRATING = "BookRating";
static final String KEY_BOOKID = "BookID";
static final String KEY_BOOKDESC = "BookDescription";
static final String KEY_BOOKDATEPUBLISHED = "DatePublished";
static final String KEY_BOOKTITLE = "BookTitle";
static final String KEY_BOOKCODE = "BookCode";
static final String KEY_BOOKIMAGE = "BookImage";

static ArrayList<String> BookTitle = null;
static ArrayList<Integer> BookRating = null;
static ArrayList<String> BookDescription = null;
static ArrayList<String> BookCoverPhotos = null;
static ArrayList<String> BookAuther = null;
static ArrayList<String> BookIDs = null;
static ArrayList<String> BookCode = null;
static ArrayList<String> BookPageCount = null;
static ArrayList<String> BookPublishDate = null;
static ArrayList<Bitmap> bitmapArray = null;
static String str = null;

Context ctx = this;
Activity act = this;
Context context = Home.this;
URL bookImageURL = null;
Bitmap bitMapImage = null;
LayoutInflater inflater = null;

GridView gridView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // setContentView(R.layout.home_activity);
    View viewToLoad = LayoutInflater.from(this.getParent()).inflate(
            R.layout.home_activity, null);
    this.setContentView(viewToLoad);

    imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);

    gridView = (GridView) findViewById(R.id.gridview);
    gridView.setOnScrollListener(new EndlessScrollListener());

    if (gridViewState != null) {
        gridView.onRestoreInstanceState(gridViewState);
    }

public void checkConnection() {

    // Check Flight mode ON/OFF

    if (Settings.System.getInt(context.getContentResolver(),
            Settings.System.AIRPLANE_MODE_ON, 0) == 0) {

        if (cm.getActiveNetworkInfo() != null
                && cm.getActiveNetworkInfo().isAvailable()
                && cm.getActiveNetworkInfo().isConnected()) {
            // Avoid to reload the page again and again
            if (str == null) {
                str = "TempString";
                BookTitle = new ArrayList<String>();
                BookRating = new ArrayList<Integer>();
                BookDescription = new ArrayList<String>();
                BookIDs = new ArrayList<String>();
                BookCode = new ArrayList<String>();
                BookCoverPhotos = new ArrayList<String>();
                BookAuther = new ArrayList<String>();
                BookPublishDate = new ArrayList<String>();
                BookPageCount = new ArrayList<String>();
                bitmapArray = new ArrayList<Bitmap>();
                new UIThread().execute(URL, initialIndex + "");
            } else {

                ImageAdapter adapter = new ImageAdapter(context, act);
                gridView.setAdapter(adapter);
                if (gridViewState != null) {
                    gridView.onRestoreInstanceState(gridViewState);
                }
                btnLanguage.setText(language);

            }
        } else {

            connectionFailureDialog("CONNECTION FAILURE...!",
                    "No internet connection found");
        }
    } else {
        new DialogClass(getParent()).airplaneDialog("AIRPLANE MODE...!",
                "Please make sure Airplane mode is Turned Off", "Exit");
    }

}

@Override
protected void onStart() {

    checkConnection();

    gridView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int pos,
                long arg3) {

            Intent bookOverViewIntent = new Intent();
            bookOverViewIntent.setClass(getParent(), BookOverView.class);
            bookOverViewIntent.putExtra("BITMAP", bitmapArray.get(pos));
            bookOverViewIntent.putExtra("BOOK_TITLE", BookTitle.get(pos));
            bookOverViewIntent.putExtra("BOOK_AUTHOR", BookAuther.get(pos));
            bookOverViewIntent.putExtra("BOOK_PUBLISH_DATE",
                    BookPublishDate.get(pos));
            bookOverViewIntent.putExtra("BOOK_ID", BookIDs.get(pos));
            bookOverViewIntent.putExtra("BOOK_RATING", BookRating.get(pos));
            bookOverViewIntent.putExtra("BOOK_DESC",
                    BookDescription.get(pos));

            bookOverViewIntent.putExtra("PAGE_NO", "1");
            bookOverViewIntent.putExtra("BOOK_CODE", BookCode.get(pos));
            bookOverViewIntent.putExtra("BOOK_PAGE_COUNT",
                    BookPageCount.get(pos));

            bookOverViewIntent.putExtra("ACTIVITY", "Home");

            MyActivityGroup activityStack = (MyActivityGroup) getParent();
            activityStack.push("BookOverView", bookOverViewIntent);
            gridViewState = gridView.onSaveInstanceState();

        }
    });

private class listAdapter extends BaseAdapter {

    int size;

    @Override
    public int getCount() {

        if (btnFlag.equals("btnLanguage")) {
            size = getResources().getStringArray(
                    R.array.spnr_language_array).length;
        } else if (btnFlag.equals("btnBrowseBy")) {
            size = getResources().getStringArray(R.array.spnr_browse_array).length;
        }
        return size;
    }

    @Override
    public Object getItem(int position) {

        return null;
    }

    @Override
    public long getItemId(int position) {

        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View row = null;
        LayoutInflater inflater;
        if (btnFlag.equals("btnLanguage")) {
            inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(R.layout.itemslist, parent, false);
            TextView listText = (TextView) row.findViewById(R.id.textView2);
            listText.setText(getResources().getStringArray(
                    R.array.spnr_language_array)[position]);

        } else if (btnFlag.equals("btnBrowseBy")) {
            inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(R.layout.itemslist, parent, false);
            TextView listText = (TextView) row.findViewById(R.id.textView2);
            listText.setText(getResources().getStringArray(
                    R.array.spnr_browse_array)[position]);
        }

        return row;
    }

}

private class EndlessScrollListener implements OnScrollListener {

    private int visibleThreshold = 0;
    private int currentPage = 0;
    private int previousTotal = 0;
    private boolean loading = true;

    public EndlessScrollListener() {
    }

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem,
            int visibleItemCount, int totalItemCount) {
        if (loading) {
            if (totalItemCount > previousTotal) {
                loading = false;
                previousTotal = totalItemCount;
                currentPage++;
            }
        }
        if (!loading
                && (totalItemCount - visibleItemCount) <= (firstVisibleItem + visibleThreshold)) {

            if (checkBookCount) {
                new UIThread().execute(URL, initialIndex + "");
                Log.i("Reached If", "End");
            }

            loading = true;
            gridViewState = gridView.onSaveInstanceState();

        }
    }

private class UIThread extends AsyncTask<String, Integer, String> {

    ProgressDialog progressDialog;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        progressDialog = ProgressDialog.show(getParent(),
                "Acumlating Books from server...",
                "This may Take a few seconds.\nPlease Wait...");

    }

    @Override
    protected String doInBackground(String... params) {

        String URL = params[0];
        int lIndex = Integer.valueOf(params[1]);
        XMLParser parser = new XMLParser();
        String XMLString = null;
        XMLString = parser.getXmlFromUrl_FeaturedBooks(URL, lIndex,
                language);
        // Log.i("language = ", language);
        // Log.i("XMLString = ", XMLString);

        if (XMLString != null) {

            initialIndex = lIndex + 14;

            Document doc = parser.getDomElement(XMLString);
            NodeList nlBooksLimit = doc
                    .getElementsByTagName(KEY_ITEM_BOOKs_LIMIT);
            Element eLimit = (Element) nlBooksLimit.item(0);

            totalBookCount = 0;
            try {

                totalBookCount = Integer.valueOf(parser.getValue(eLimit,
                        KEY_ITEM_TOTAL_BOOKS));
                checkBookCount = true;
            } catch (NumberFormatException e) {

                checkBookCount = false;
                totalBookCount = totalBookCount + 0;
            }

            NodeList nl = doc.getElementsByTagName(KEY_ITEM);

            // looping through all item nodes <item>

            Bitmap imageNotFound = BitmapFactory.decodeResource(
                    getResources(), R.drawable.defaultcoverphoto);

            for (int i = 0; i < nl.getLength(); i++) {

                Element e = (Element) nl.item(i);

                try {
                    BookRating.add(Integer.valueOf(parser.getValue(e,
                            KEY_BOOKRATING)));

                } catch (Exception e2) {
                    BookRating.add(0);
                }

                BookDescription.add(parser.getValue(e, KEY_BOOKDESC));
                BookTitle.add(parser.getValue(e, KEY_BOOKTITLE));
                BookCoverPhotos
                        .add("http://shiaislamicbooks.com/books_Snaps/"
                                + parser.getValue(e, KEY_BOOKCODE)
                                + "/1_thumb.jpg");
                int tempCount = BookCoverPhotos.size() - 1;
                BookAuther.add(parser.getValue(e, KEY_BOOKAUTHOR));
                BookPublishDate.add(parser.getValue(e,
                        KEY_BOOKDATEPUBLISHED));
                BookIDs.add(parser.getValue(e, KEY_BOOKID));
                BookCode.add(parser.getValue(e, KEY_BOOKCODE));
                BookPageCount.add(parser.getValue(e, KEY_PAGE_COUNT));

                try {
                    bookImageURL = new URL(BookCoverPhotos.get(tempCount));
                } catch (MalformedURLException e1) {
                    // e1.printStackTrace();
                }

                try {
                    bitMapImage = BitmapFactory.decodeStream(bookImageURL
                            .openConnection().getInputStream());
                    bitmapArray.add(bitMapImage);

                } catch (IOException e2) {
                    // e2.printStackTrace();
                    bitmapArray.add(imageNotFound);
                }
                publishProgress(i + 1);
            }

        } else {
            publishProgress(5000);
        }

        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        super.onProgressUpdate(values);
        progressDialog.setMessage(values[0]
                + " Book(s) found \nPlease wait...");
        if (values[0] == 5000) {
            Toast.makeText(context,
                    "Rrequest Time out!\nNo or Slow Internet Connection!",
                    Toast.LENGTH_LONG).show();
        }
    }

    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);
        progressDialog.dismiss();
        ImageAdapter adapter = new ImageAdapter(context, act);
        gridView.setAdapter(adapter);
        if (gridViewState != null) {
            gridView.onRestoreInstanceState(gridViewState);
        }

    }
}

class ViewHolder {
    TextView txt_BooksTitle;
    ImageView img_BookCoverPhoto;
    }
} 
```

在这里您可以注意到，首先我从 Asynctask 填充我的 gridview，然后我将我的 gridview 设置为无尽的侦听器

```
gridView.setOnScrollListener(new EndlessScrollListener()); 
```

下次我从 Endless 监听器类中调用 asynctask。

```
 new UIThread().execute(URL, initialIndex + ""); 
```

你必须从那里完成所有任务。我在无尽的侦听器中将其称为上述行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:15:44.440

试试这种方式：

> ```
>  @Override
>  public View onCreateView(LayoutInflater inflater, ViewGroup container,
>         Bundle savedInstanceState) {
>     if (container == null) {
>         myListItems2 = new ArrayList<String>();
>         adapter = new ArrayAdapter<String>(getActivity().getBaseContext(), android.R.layout.simple_list_item_1, myListItems2);
>         View root = inflater.inflate(R.layout.tab_frag1_layout,
>                  container, false);  
>        lv = (ListView) root.findViewById(android.R.id.list); 
>        lv.setAdapter(adapter);        
>     return root;
> } 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T13:33:30.470

```
Activity act = this.getActivity(); 
```

这作为一个成员变量将得到你的空值，这导致 NPE 在

```
act.runOnUiThread(returnRes); 
```

尝试在运行时询问活动而不是成员变量：

```
getActivity().runOnUiThread(returnRes); 
```

# eclipse - Maven 构建失败：读取超时

> ID：14399619
> 
> 赞同：3
> 
> 时间：2013-01-18T13:05:30.717
> 
> 标签：eclipse, maven-3

我已经尝试了[这里](https://stackoverflow.com/questions/5074063/maven-error-failure-to-transfer)找到的所有可能的解决方案，包括：

1.  find ~/.m2 -name "*.lastUpdated" -exec grep -q "Could not transfer" {} \; -print -exec rm {} \;
2.  mvn -U 清洁

反正也不行，具体日志如下：

顺便说一句：我试图从[mkyong 站点运行 struts2 示例代码](http://www.mkyong.com/struts2/struts-2-hello-world-annotation-example/)

* * *

```
[DEBUG] =======================================================================
[DEBUG] com.mkyong.common:Struts2Example:war:com.mkyong.common
[DEBUG]    junit:junit:jar:3.8.1:test
[DEBUG]    org.apache.struts:struts2-core:jar:2.1.8:compile
[DEBUG]       com.opensymphony:xwork-core:jar:2.1.6:compile
[DEBUG]          org.springframework:spring-test:jar:2.5.6:compile
[DEBUG]             commons-logging:commons-logging:jar:1.1.1:compile
[DEBUG]       org.freemarker:freemarker:jar:2.3.15:compile
[DEBUG]       ognl:ognl:jar:2.7.3:compile
[DEBUG]       commons-fileupload:commons-fileupload:jar:1.2.1:compile
[DEBUG]       commons-io:commons-io:jar:1.3.2:compile
[DEBUG]       com.sun:tools:jar:1.5.0:system
[DEBUG]    org.apache.struts:struts2-convention-plugin:jar:2.1.8:compile
[DEBUG] Using connector WagonRepositoryConnector with priority 0 for http://repo
.maven.apache.org/maven2
Downloading: http://repo.maven.apache.org/maven2/org/apache/struts/struts2-core/
2.1.8/struts2-core-2.1.8.jar
[DEBUG] Writing resolution tracking file D:\ProgramData\apache-maven-repo\.m2\re
pository\org\apache\struts\struts2-core\2.1.8\struts2-core-2.1.8.jar.lastUpdated

[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 52:31.162s
[INFO] Finished at: Fri Jan 18 20:16:49 CST 2013
[INFO] Final Memory: 2M/5M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project Struts2Example: Could not resolve depe
ndencies for project com.mkyong.common:Struts2Example:war:com.mkyong.common: Cou
ld not transfer artifact org.apache.struts:struts2-core:jar:2.1.8 from/to centra
l (http://repo.maven.apache.org/maven2): GET request of: org/apache/struts/strut
s2-core/2.1.8/struts2-core-2.1.8.jar from central failed: Read timed out -> [Hel
p 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal o
n project Struts2Example: Could not resolve dependencies for project com.mkyong.
common:Struts2Example:war:com.mkyong.common: Could not transfer artifact org.apa
che.struts:struts2-core:jar:2.1.8 from/to central (http://repo.maven.apache.org/
maven2): GET request of: org/apache/struts/struts2-core/2.1.8/struts2-core-2.1.8
.jar from central failed
        at org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.getDe
pendencies(LifecycleDependencyResolver.java:210)
        at org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.resol
veProjectDependencies(LifecycleDependencyResolver.java:117)
        at org.apache.maven.lifecycle.internal.MojoExecutor.ensureDependenciesAr
eResolved(MojoExecutor.java:258)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:201)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProje
ct(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProje
ct(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBu
ild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(Lifecycl
eStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Laun
cher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.jav
a:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(La
uncher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:
352)
Caused by: org.apache.maven.project.DependencyResolutionException: Could not res
olve dependencies for project com.mkyong.common:Struts2Example:war:com.mkyong.co
mmon: Could not transfer artifact org.apache.struts:struts2-core:jar:2.1.8 from/
to central (http://repo.maven.apache.org/maven2): GET request of: org/apache/str
uts/struts2-core/2.1.8/struts2-core-2.1.8.jar from central failed
        at org.apache.maven.project.DefaultProjectDependenciesResolver.resolve(D
efaultProjectDependenciesResolver.java:189)
        at org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.getDe
pendencies(LifecycleDependencyResolver.java:185)
        ... 22 more
Caused by: org.sonatype.aether.resolution.DependencyResolutionException: Could n
ot transfer artifact org.apache.struts:struts2-core:jar:2.1.8 from/to central (h
ttp://repo.maven.apache.org/maven2): GET request of: org/apache/struts/struts2-c
ore/2.1.8/struts2-core-2.1.8.jar from central failed
        at org.sonatype.aether.impl.internal.DefaultRepositorySystem.resolveDepe
ndencies(DefaultRepositorySystem.java:375)
        at org.apache.maven.project.DefaultProjectDependenciesResolver.resolve(D
efaultProjectDependenciesResolver.java:183)
        ... 23 more
Caused by: org.sonatype.aether.resolution.ArtifactResolutionException: Could not
 transfer artifact org.apache.struts:struts2-core:jar:2.1.8 from/to central (htt
p://repo.maven.apache.org/maven2): GET request of: org/apache/struts/struts2-cor
e/2.1.8/struts2-core-2.1.8.jar from central failed
        at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolve(Def
aultArtifactResolver.java:538)
        at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArti
facts(DefaultArtifactResolver.java:216)
        at org.sonatype.aether.impl.internal.DefaultRepositorySystem.resolveDepe
ndencies(DefaultRepositorySystem.java:358)
        ... 24 more
Caused by: org.sonatype.aether.transfer.ArtifactTransferException: Could not tra
nsfer artifact org.apache.struts:struts2-core:jar:2.1.8 from/to central (http://
repo.maven.apache.org/maven2): GET request of: org/apache/struts/struts2-core/2.
1.8/struts2-core-2.1.8.jar from central failed
        at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap(W
agonRepositoryConnector.java:951)
        at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap(W
agonRepositoryConnector.java:941)
        at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.
run(WagonRepositoryConnector.java:669)
        at org.sonatype.aether.util.concurrency.RunnableErrorForwarder$1.run(Run
nableErrorForwarder.java:60)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExec
utor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor
.java:908)
        at java.lang.Thread.run(Thread.java:619)
Caused by: org.apache.maven.wagon.TransferFailedException: GET request of: org/a
pache/struts/struts2-core/2.1.8/struts2-core-2.1.8.jar from central failed
        at org.apache.maven.wagon.AbstractWagon.getTransfer(AbstractWagon.java:3
49)
        at org.apache.maven.wagon.AbstractWagon.getTransfer(AbstractWagon.java:3
10)
        at org.apache.maven.wagon.AbstractWagon.getTransfer(AbstractWagon.java:2
87)
        at org.apache.maven.wagon.StreamWagon.getIfNewer(StreamWagon.java:97)
        at org.apache.maven.wagon.StreamWagon.get(StreamWagon.java:61)
        at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.
run(WagonRepositoryConnector.java:601)
        ... 4 more
Caused by: java.net.SocketTimeoutException: Read timed out
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(SocketInputStream.java:129)
        at org.apache.maven.wagon.providers.http.httpclient.impl.io.AbstractSess
ionInputBuffer.read(AbstractSessionInputBuffer.java:187)
        at org.apache.maven.wagon.providers.http.httpclient.impl.io.ContentLengt
hInputStream.read(ContentLengthInputStream.java:176)
        at org.apache.maven.wagon.providers.http.httpclient.conn.EofSensorInputS
tream.read(EofSensorInputStream.java:138)
        at org.apache.maven.wagon.AbstractWagon.transfer(AbstractWagon.java:493)

        at org.apache.maven.wagon.AbstractWagon.getTransfer(AbstractWagon.java:3
39)
        ... 9 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:09:47.757

`Read timed out`说明你有网络问题。要么`repo.maven.apache.org`关闭（非常不可能），要么您的终端存在连接问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-05T15:00:16.277

读取超时错误也可能发生在慢速网络上的大依赖解析（您可能无法自己修复）。您可能还想考虑这个[其他线程](https://stackoverflow.com/questions/15837790/how-can-i-adjust-timeout-for-mvn-mirror-on-dependencyresolve-error-transferr)，在这里您将找到如何增加 Maven Wagon 超时，这将在这种情况下为您提供帮助。

另请查看[官方文档](http://maven.apache.org/guides/mini/guide-http-settings.html)以获取更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-08T03:22:51.040

但是使用 wget 我可以下载实例。这里几乎停了..等了超过15分钟..

INFO] [INFO] --- maven-checkstyle-plugin:2.13:check (validate-checkstyle) @ onos --- [DEBUG] 为[http://repo.maven.apache.org/maven2](http://repo.maven.apache.org/maven2)使用优先级为 0.0 的连接器 WagonRepositoryConnector 下载：[http:](http://repo.maven.apache.org/maven2/org/apache/maven/doxia/doxia-module-xhtml/1.2/doxia-module-xhtml-1.2.pom) //repo.maven.apache.org/maven2/org/apache/maven/doxia/doxia-module-xhtml/1.2/doxia-module-xhtml-1.2.pom 2/2 KB

问候， 巴拉

# twitter-bootstrap - 仅使用引导程序在移动屏幕上折叠 div/元素。示例图片

> ID：14399620
> 
> 赞同：6
> 
> 时间：2013-01-18T13:05:32.837
> 
> 标签：twitter-bootstrap, responsive-design, collapse

是否可以使用引导程序折叠侧边栏 div - 仅在手机上？我将如何做类似图像中的示例的事情？因此，在手机上，侧边栏会折叠并在单击时展开。我不明白媒体查询如何允许我这样做，因为涉及到 jquery。

[http://i46.tinypic.com/2mzxflu.jpg](http://i46.tinypic.com/2mzxflu.jpg)

在这里看到了一些类似的问题，但没有完全像这样。有人可以解释或至少指出我正确的方向吗？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-02T21:02:02.103

我最终偶然发现了这个问题并为它添加了一个 CSS 类：

```
.collapse-non-md {
    height: 0;
    display: none;
}
.collapse-non-md.collapsing {
    display: block;
}

@media (min-width: 992px) {
    .collapse-non-md {
        height: auto;
        display: block;
    }
} 
```

然后我设置了我想要在中等以下的屏幕上折叠的元素的类，`collapse-non-md`瞧，它在小型浏览器上折叠并在中等浏览器上打开。它仍然可以以正常方式打开和关闭（`.in`类覆盖`.collapse-non-md`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T01:34:52.707

一种快速而肮脏的方法：为要在桌面屏幕上显示的全尺寸侧边栏编写代码，并为折叠的侧边栏单独标记以显示在移动设备上。

然后选择何时显示任一版本的侧边栏，使用[引导程序提供的类](http://twitter.github.com/bootstrap/scaffolding.html#responsive)来隐藏和显示基于媒体查询的内容。

折叠侧边栏：`.hidden-desktop .hidden-tablet .visible-phone`

完整的侧边栏：`hidden-phone .visible-tablet .visible-desktop`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-06T07:16:16.870

我在使用 Bootstrap V3 时遇到了同样的问题。我按照官方文档上的教程进行操作，但无法让侧边栏在手机上默认折叠。

这来自 Bootstrap V3 源文件中的一个错误（2013/09/05 生成的自定义版本）。只需在原始 bootstrap.css 之后立即加载以下 CSS：

```
.collapse{display:none}.collapse.in{display:block}.collapsing{position:relative;height:0;overflow:hidden;-webkit-transition:height .35s ease;transition:height .35s ease}
@media screen and (min-width:768px){.nav-collapse.collapse{display:block!important;height:auto!important;overflow:visible!important}} 
```

（这些样式来自原始 Bootstrap V3 源代码的早期版本）。

否则，我唯一的错误就是在我的 HTML 页面中初始化折叠插件。因此，如果您的 HTML 源代码中有这样的内容：

```
<script type="text/javascript">
    $(document).ready(function(){
        $('.collapse').collapse();
    });
</script> 
```

...然后只需将其删除，折叠插件就会像魅力一样工作。

# qt - 将每个子目录的路径添加到 qt pro 文件变量

> ID：14399622
> 
> 赞同：0
> 
> 时间：2013-01-18T13:05:36.457
> 
> 标签：qt, qmake

我想将每个具有 .h 文件的子目录的路径添加到 qt pro 文件变量中我发现了这个[http://doc.qt.digia.com/qt/qmake-project-files.html#built-in-functions-and -control-flow](http://doc.qt.digia.com/qt/qmake-project-files.html#built-in-functions-and-control-flow)用于使用 for 循环，但不知道如何使用 if 来完成上述任务。

> INCLUDEPATH +=$$(MITK_INCLUDE_PATH)

当我写这个（路径变量只有外部目录的路径）时，它允许我在源代码中包含一个标题：

```
> #include"ITK-src/Code/BasicFilters/itkAbsImageFilter.h" 
```

并且 qmake 运行正常，但是当我构建这个项目时，它要求另一个 .h 依赖于上面的 .h 。在此之前，我一直在添加 3'rd 方库，在其中我将每个头文件位置的路径设置`INCLUDEPATH` [为此处，](https://stackoverflow.com/questions/13826735/qt-creator-mitk-linux/14232927#14232927)但如果有任何其他方式我想知道可能性。

# perl - 如何让 Perl 尊重 STDIN/STDOUT/STDERR 的语言环境编码，而不影响文件 IO？

> ID：14399629
> 
> 赞同：4
> 
> 时间：2013-01-18T13:06:14.693
> 
> 标签：perl, encoding, locale

确保 Perl 对 STDIN/STDOUT/STDERR 使用区域设置编码（如 LANG=en_US.UTF-8）而不影响文件 IO 的最佳方法是什么？

如果我使用

```
use open ':locale';
say "mañana";
open (my $f, '>', 'test.txt'); say $f "mañana"; 
```

那么语言环境编码用于 STDIN/STDOUT/STDERR，但也在 test.txt 中，这不是很好的行为：你不希望文件的编码依赖于你登录的方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T19:12:49.560

要将编码层添加到 STDIN、STDOUT 和 STDERR，您需要使用

```
use open ':std', ':locale'; 
```

代替

```
use open ':locale'; 
```

* * *

但这不仅仅是为 STDIN、STDOUT 和 STDERR 添加了编码层；它会导致将相同的图层添加到默认情况下在范围内打开的文件句柄中。所以我们需要用

```
open(my $fh, '>:encoding(UTF-8)', $qfn) 
```

或者

```
use open ':encoding(UTF-8)';
open(my $fh, '>', $qfn) 
```

* * *

全部一起：

```
use open ':std', ':locale';
use open ':encoding(UTF-8)';
open(my $fh_txt, '>',     $qfn);   # Text
open(my $fh_bin, '>:raw', $qfn);   # Binary 
```

或者

```
use open ':std', ':locale';
open(my $fh_txt, '>:encoding(UTF-8)', $qfn);   # Text
open(my $fh_bin, '>:raw',             $qfn);   # Binary 
```

结果：

```
my $s = chr(0xE9);

say         $s;      # U+E9 encoded as per locale
say $fh_txt $s;      # U+E9 encoded using UTF-8
say $fh_bin $s;      # Byte E9 
```

（如果您愿意，可以使用`binmode($fh);`而不是`:raw`二进制文件。）

# opengl - 如何通过 CPU 停止 glReadPixels 转换数据格式？

> ID：14399638
> 
> 赞同：0
> 
> 时间：2013-01-18T13:06:22.490
> 
> 标签：opengl, glreadpixels

众所周知，`glReadPixels()`会阻塞管道并使用 CPU 转换数据格式，尤其是当我想将深度值读取到系统 RAM 时。

我尝试了 Songho 提供的 PBO，但我发现它只有在 param of`glReadPixels()`设置为 GL_BGRA 时才有用。

*   当我将 PBO 与 param 一起使用时`GL_BGRA`，读取时间几乎为 0.1ms，CPU 使用率为 4%。
*   当我将参数更改为 时`GL_RGBA`，它读取 2ms，CPU 使用率为 50%。

我尝试时也是如此`GL_DEPTH_COMPONENT`。显然缓慢是由转换引起的，所以任何人都知道如何阻止它转换数据格式？

在我的程序中，我必须在不到一秒的时间内读取深度值并计算 16*25 次，所以 2ms 是不可接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:07:49.543

> so any one knows how to stop it converting data format?

D'uh, by reading a data format that does not need converting. On-screen framebuffers are typically formated as BGRA and if you want something different the data needs to be converted first.

You could use a FBO with texture/renderbuffer attachments that are in the format expected and render to that.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:11:31.237

# r - 显示 R 中关系的箱线图

> ID：14399641
> 
> 赞同：0
> 
> 时间：2013-01-18T13:06:35.833
> 
> 标签：r, boxplot

我正在对一些解释变量只能是 的数据使用回归模型`1,2,3,4 and 5`。有5个解释变量和一个因变量。例如，

```
set.seed(2)
x1 <- sample(rep(1:5,2))
x2 <- sample(rep(1:5,2))
x3 <- sample(rep(1:5,2))
x4 <- sample(rep(1:5,2))
x5 <- sample(rep(1:5,2))
y <- runif(10,-1,1)

model <- lm(y~x1 + x2 + x3 + x4 + x5) 
```

我想创建一个显示这些因变量和因变量之间关系的箱线图。我怎么能在 R 中做到这一点？

我设法使用@Ben 提供的代码创建了一个箱线图。但是，情节中有些地方我不明白。知道它们是干什么用的吗？这是情节![在此处输入图像描述](../Images/6febf4f876d12df9218ae4efd81d1347.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:57:57.197

如果你想要一个箱线图，你必须更详细地解释你想要它基于什么。（也就是说，这是一个*编程*站点；您需要说明您希望如何将回归结果转换为箱线图的参数（中心线、栅栏、晶须等）。）

也就是说，您可以使用包中的`coefplot`函数`arm`来绘制图形摘要

```
library(arm)
coefplot(model) 
```

![在此处输入图像描述](../Images/953800f2354aa7ed62b8edbaad9e08ca.png)

或者，再想一想，模型可能是一个红鲱鱼：也许你只是想绘制数据。

```
d <- data.frame(y,x1,x2,x3,x4,x5)
library(reshape2)
dm <- melt(d,id.var=1)
library(ggplot2)
ggplot(dm,aes(x=value,y=y))+geom_boxplot(aes(group=value))+
    facet_wrap(~variable,nrow=1) 
```

![在此处输入图像描述](../Images/9b75bb0e00dad40d902080fee0f75d27.png)

# android - 如果 USB 断开，警报不会响起

> ID：14399642
> 
> 赞同：1
> 
> 时间：2013-01-18T13:06:57.060
> 
> 标签：android, usb, alarmmanager

在我的应用程序中，我使用重复警报。如果设备（带有 Android 4.0.4 的 Trekstor SurfTab 微风 7.0）已连接以调试应用程序，则一切正常。一旦我断开设备，警报就不会响起。为了确保这是一个警报问题，我刚刚创建了一个简单的示例应用程序。

仅创建警报的示例活动：

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final AlarmManager am = (AlarmManager) this.getSystemService(Context.ALARM_SERVICE);
        if (am != null) {

            final Intent intent = new Intent(this, AlarmReceiver.class);

            // check if this intent already exists
            if (PendingIntent.getBroadcast(this, 0, intent, PendingIntent.FLAG_NO_CREATE) == null) {
                am.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), TimeUnit.SECONDS.toMillis(30),
                        PendingIntent.getBroadcast(this, 0, intent, 0));
            }
        }
    }
} 
```

报警接收器：

```
 public class AlarmReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(final Context context, final Intent intent) {
        Log.d("AlarmReceiver", "onReceive");
        final File mainDir = new File(Environment.getExternalStorageDirectory(), "AlarmTest");
        final File file = new File(mainDir, "alarmtest.txt");
        try {
            new FileWriter(file, true).append(new Date() + "\n").close();
        } catch (IOException e) {
            Log.d("AlarmReceiver", "Error writing alarmtest.txt", e);
        }
    }
} 
```

显现：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="ch.rse.alarmtest"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="14" />

<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="ch.rse.alarmtest.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver android:name=".AlarmReceiver" />
</application> 
```

这就是 logcat 所说的：

```
01-18 13:26:20.170: D/AlarmReceiver(4890): onReceive
01-18 13:26:50.170: D/AlarmReceiver(4890): onReceive
01-18 13:27:01.660: D/lights(183): ro.product.lights =65
01-18 13:27:01.660: D/lights(183): bright =97
01-18 13:27:01.670: D/lights(183): ro.product.lights =65
01-18 13:27:01.670: D/lights(183): bright =92
01-18 13:27:01.690: D/lights(183): ro.product.lights =65
01-18 13:27:01.690: D/lights(183): bright =88
01-18 13:27:01.700: D/lights(183): ro.product.lights =65
01-18 13:27:01.700: D/lights(183): bright =83
01-18 13:27:01.720: D/lights(183): ro.product.lights =65
01-18 13:27:01.720: D/lights(183): bright =79
01-18 13:27:01.740: D/lights(183): ro.product.lights =65
01-18 13:27:01.740: D/lights(183): bright =74
01-18 13:27:01.750: D/lights(183): ro.product.lights =65
01-18 13:27:01.750: D/lights(183): bright =70
01-18 13:27:01.770: D/lights(183): ro.product.lights =65
01-18 13:27:01.770: D/lights(183): bright =65
01-18 13:27:01.780: D/lights(183): ro.product.lights =65
01-18 13:27:01.780: D/lights(183): bright =65
01-18 13:27:01.800: D/lights(183): ro.product.lights =65
01-18 13:27:01.800: D/lights(183): bright =65
01-18 13:27:01.820: D/lights(183): ro.product.lights =65
01-18 13:27:01.820: D/lights(183): bright =65
01-18 13:27:01.830: D/lights(183): ro.product.lights =65
01-18 13:27:01.830: D/lights(183): bright =65
01-18 13:27:01.850: D/lights(183): ro.product.lights =65
01-18 13:27:01.850: D/lights(183): bright =65
01-18 13:27:01.870: D/lights(183): ro.product.lights =65
01-18 13:27:01.870: D/lights(183): bright =65
01-18 13:27:01.880: D/lights(183): ro.product.lights =65
01-18 13:27:01.880: D/lights(183): bright =65
01-18 13:27:01.900: D/lights(183): ro.product.lights =65
01-18 13:27:01.900: D/lights(183): bright =65
01-18 13:27:01.910: D/lights(183): ro.product.lights =65
01-18 13:27:01.910: D/lights(183): bright =65
01-18 13:27:01.930: D/lights(183): ro.product.lights =65
01-18 13:27:01.930: D/lights(183): bright =65
01-18 13:27:08.660: D/lights(183): ro.product.lights =65
01-18 13:27:08.660: D/lights(183): bright =65
01-18 13:27:08.680: D/lights(183): ro.product.lights =65
01-18 13:27:08.680: D/lights(183): bright =65
01-18 13:27:08.690: D/lights(183): ro.product.lights =65
01-18 13:27:08.690: D/lights(183): bright =65
01-18 13:27:08.710: D/lights(183): ro.product.lights =65
01-18 13:27:08.710: D/lights(183): bright =65
01-18 13:27:08.710: D/SensorHAL(183): +__control_activate: handle=0 enabled=0
01-18 13:27:08.710: D/SensorHAL(183): Active sensors=00000000, real=00000000
01-18 13:27:08.710: D/SensorHAL(183): +__control_set_delay: ns=66667000
01-18 13:27:08.730: D/SurfaceFlinger(168): About to give-up screen, flinger = 0xaff918
01-18 13:27:08.730: E/libEGL(168): validate_display:188 error 3008 (EGL_BAD_DISPLAY)
01-18 13:27:13.730: V/TransportControlView(183): Create TCV com.android.internal.widget.TransportControlView@41339418
01-18 13:27:13.830: D/dalvikvm(183): GC_FOR_ALLOC freed 1219K, 19% free 10550K/12935K, paused 58ms
01-18 13:27:13.850: V/LockScreen(183): updateResources(Context context)
01-18 13:27:13.860: V/LockScreen(183): Catch Exception
01-18 13:27:13.940: I/WindowManager(183): MediaPlayer.is not PlayingVideo
01-18 13:27:14.000: I/TabletStatusBar(249): DISABLE_CLOCK: yes
01-18 13:27:14.040: D/dalvikvm(249): GC_CONCURRENT freed 398K, 36% free 7845K/12103K, paused 2ms+3ms
01-18 13:27:20.170: D/AlarmReceiver(4890): onReceive
01-18 13:27:50.170: D/AlarmReceiver(4890): onReceive
01-18 13:28:04.580: D/dalvikvm(2717): Debugger has detached; object registry had 1 entries
01-18 13:28:04.580: D/dalvikvm(518): Debugger has detached; object registry had 1 entries
01-18 13:28:04.580: D/dalvikvm(2446): Debugger has detached; object registry had 1 entries
01-18 13:28:04.580: D/dalvikvm(317): Debugger has detached; object registry had 1 entries
01-18 13:28:04.580: D/dalvikvm(407): Debugger has detached; object registry had 1 entries
01-18 13:28:04.580: D/dalvikvm(437): Debugger has detached; object registry had 1 entries
01-18 13:28:04.580: D/dalvikvm(346): Debugger has detached; object registry had 1 entries
01-18 13:28:04.580: D/dalvikvm(865): Debugger has detached; object registry had 1 entries
01-18 13:28:04.580: D/dalvikvm(2703): Debugger has detached; object registry had 1 entries
01-18 13:28:04.580: D/dalvikvm(2762): Debugger has detached; object registry had 1 entries
01-18 13:28:04.580: D/dalvikvm(2730): Debugger has detached; object registry had 1 entries
01-18 13:28:04.580: D/dalvikvm(2797): Debugger has detached; object registry had 1 entries
01-18 13:28:04.580: D/dalvikvm(249): Debugger has detached; object registry had 1 entries
01-18 13:28:04.580: D/dalvikvm(3997): Debugger has detached; object registry had 1 entries
01-18 13:28:04.580: D/dalvikvm(330): Debugger has detached; object registry had 1 entries
01-18 13:28:04.580: D/dalvikvm(2688): Debugger has detached; object registry had 1 entries
01-18 13:28:04.580: D/dalvikvm(183): Debugger has detached; object registry had 1 entries
01-18 13:28:04.580: D/dalvikvm(362): Debugger has detached; object registry had 1 entries
01-18 13:28:04.580: D/dalvikvm(422): Debugger has detached; object registry had 1 entries
01-18 13:28:04.580: D/dalvikvm(4752): Debugger has detached; object registry had 1 entries
01-18 13:28:04.580: V/UsbDeviceManager(183): now time is Jan. 18 01:28:04:1358512084 nachm.
01-18 13:28:04.580: V/UsbDeviceManager(183): Delay time at Jan. 18 01:28:09:1358512089 nachm.  to send DISCONNECTED massage
01-18 13:28:04.590: D/dalvikvm(4772): Debugger has detached; object registry had 1 entries
01-18 13:28:04.590: D/dalvikvm(4890): Debugger has detached; object registry had 2519 entries
01-18 13:28:09.600: I/DynamicPManagerService(183): setCpuFrequnecyPolicy flag :2
01-18 13:28:09.600: V/UsbDeviceManager(183): now time is Jan. 18 01:28:09:1358512089 nachm.
01-18 13:28:09.600: D/UsbDeviceManager(183): disable UsbDeviceManager wakelock wlref = 1
01-18 13:33:16.985: D/AlarmReceiver(4890): onReceive
01-18 13:33:16.995: W/NetworkStats(183): found non-monotonic values; saving to dropbox
01-18 13:33:17.015: D/SensorHAL(183): +__control_activate: handle=0 enabled=1
01-18 13:33:17.015: D/SensorHAL(183): Active sensors=00000001, real=00000001
01-18 13:33:17.015: D/SensorHAL(183): +__control_set_delay: ns=200000000
01-18 13:33:17.015: D/SensorHAL(183): +__control_set_delay: ns=66667000
01-18 13:33:17.035: I//system/bin/memsicd(165): Algorithm Library Info:
01-18 13:33:17.035: I//system/bin/memsicd(165): Build date: 0d-01-12, 0d:21:11
01-18 13:33:17.035: I//system/bin/memsicd(165): NVM block size: 26
01-18 13:33:17.035: I//system/bin/memsicd(165): Version: 0100
01-18 13:33:17.035: I//system/bin/memsicd(165): Auto-Calibration: 1
01-18 13:33:17.035: I//system/bin/memsicd(165): CompassLib init result: 0
01-18 13:33:17.045: W/NetworkStats(183): found non-monotonic values; saving to dropbox
01-18 13:33:17.065: W/PowerUI(249): unknown intent: Intent { act=android.intent.action.ACTION_POWER_CONNECTED flg=0x10000010 }
01-18 13:33:17.065: I/StorageNotification(249): UMS connection changed to false (media state mounted)
01-18 13:33:17.165: D/dalvikvm(183): GC_CONCURRENT freed 628K, 16% free 10933K/12935K, paused 3ms+8ms
01-18 13:33:17.175: D/lights(183): ro.product.lights =65
01-18 13:33:17.175: D/lights(183): bright =65
01-18 13:33:17.175: I/WindowManager(183): Lock screen displayed!
01-18 13:33:17.185: D/lights(183): ro.product.lights =65
01-18 13:33:17.185: D/lights(183): bright =65
01-18 13:33:17.205: D/lights(183): ro.product.lights =65
01-18 13:33:17.205: D/lights(183): bright =65
01-18 13:33:17.225: D/lights(183): ro.product.lights =65
01-18 13:33:17.225: D/lights(183): bright =65
01-18 13:33:17.235: D/SurfaceFlinger(168): Screen about to return, flinger = 0xaff918
01-18 13:33:17.235: D/lights(183): ro.product.lights =65
01-18 13:33:17.235: D/lights(183): bright =65
01-18 13:33:17.265: D/lights(183): ro.product.lights =65
01-18 13:33:17.265: D/lights(183): bright =65
01-18 13:33:17.265: W/ThrottleService(183): unable to find stats for iface rmnet0
01-18 13:33:17.275: D/lights(183): ro.product.lights =65
01-18 13:33:17.275: D/lights(183): bright =65
01-18 13:33:17.295: D/lights(183): ro.product.lights =65
01-18 13:33:17.295: D/lights(183): bright =65
01-18 13:33:17.305: D/lights(183): ro.product.lights =65
01-18 13:33:17.305: D/lights(183): bright =65
01-18 13:33:17.325: D/lights(183): ro.product.lights =65
01-18 13:33:17.325: D/lights(183): bright =68
01-18 13:33:17.345: D/lights(183): ro.product.lights =65
01-18 13:33:17.345: D/lights(183): bright =74
01-18 13:33:17.355: D/lights(183): ro.product.lights =65
01-18 13:33:17.355: D/lights(183): bright =81
01-18 13:33:17.375: D/lights(183): ro.product.lights =65
01-18 13:33:17.375: D/lights(183): bright =88
01-18 13:33:17.395: D/lights(183): ro.product.lights =65
01-18 13:33:17.395: D/lights(183): bright =95
01-18 13:33:17.405: D/lights(183): ro.product.lights =65
01-18 13:33:17.405: D/lights(183): bright =102
01-18 13:33:18.985: V/UsbDeviceManager(183): now time is Jan. 18 01:33:19:1358512399 nachm.
01-18 13:33:18.995: I/DynamicPManagerService(183): setCpuFrequnecyPolicy flag :1
01-18 13:33:18.995: V/UsbDeviceManager(183): now time is Jan. 18 01:33:19:1358512399 nachm.
01-18 13:33:18.995: D/UsbDeviceManager(183): enable UsbDeviceManager wakelock wlref = 0
01-18 13:33:19.085: V/UsbDeviceManager(183): now time is Jan. 18 01:33:19:1358512399 nachm.
01-18 13:33:19.095: D/ViewRootImpl(249): pckname = com.android.systemui
01-18 13:33:19.095: V/UsbDeviceManager(183): now time is Jan. 18 01:33:19:1358512399 nachm.
01-18 13:33:19.095: D/UsbDeviceManager(183): enable UsbDeviceManager wakelock wlref = 1
01-18 13:33:19.095: I/StorageNotification(249): UMS connection changed to false (media state mounted)
01-18 13:33:19.135: D/MtpService(437): addStorageLocked 65537 /mnt/sdcard
01-18 13:33:19.135: D/MtpService(437): addStorageLocked 196609 /mnt/inet
01-18 13:33:19.135: D/MtpService(437): starting MTP server in MTP mode
01-18 13:33:19.135: D/MtpService(437): addStorageLocked 196609 /mnt/inet
01-18 13:33:19.135: D/MtpService(437): addStorageLocked 65537 /mnt/sdcard
01-18 13:33:19.175: I/StorageNotification(249): UMS connection changed to false (media state mounted)
01-18 13:33:20.165: D/AlarmReceiver(4890): onReceive
01-18 13:33:38.425: V/LockScreen(183): onTrigger = 0
01-18 13:33:38.455: I/WindowManager(183): MediaPlayer.is not PlayingVideo
01-18 13:33:38.465: W/InputManagerService(183): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@4126f1a0
01-18 13:33:38.495: I/TabletStatusBar(249): DISABLE_CLOCK: no
01-18 13:33:38.495: V/TabletStatusBar(249): setLightsOn(true)
01-18 13:33:44.375: D/dalvikvm(362): GC_CONCURRENT freed 421K, 35% free 8611K/13063K, paused 2ms+5ms
01-18 13:33:44.595: D/dalvikvm(362): GC_CONCURRENT freed 479K, 33% free 8819K/13063K, paused 2ms+5ms
01-18 13:33:44.685: D/dalvikvm(362): GC_FOR_ALLOC freed 322K, 34% free 8694K/13063K, paused 29ms
01-18 13:33:44.695: I/dalvikvm-heap(362): Grow heap (frag case) to 9.799MB for 1286224-byte allocation
01-18 13:33:44.745: D/dalvikvm(362): GC_FOR_ALLOC freed 1K, 24% free 9948K/13063K, paused 26ms
01-18 13:33:44.855: D/dalvikvm(362): GC_CONCURRENT freed 189K, 26% free 9780K/13063K, paused 2ms+10ms
01-18 13:33:45.085: D/dalvikvm(362): GC_FOR_ALLOC freed 1908K, 35% free 8596K/13063K, paused 38ms
01-18 13:33:45.085: I/dalvikvm-heap(362): Grow heap (frag case) to 9.705MB for 1286224-byte allocation
01-18 13:33:45.135: D/dalvikvm(362): GC_FOR_ALLOC freed 3K, 25% free 9849K/13063K, paused 28ms
01-18 13:33:45.225: D/dalvikvm(362): GC_CONCURRENT freed 4K, 25% free 9879K/13063K, paused 2ms+13ms
01-18 13:33:45.635: D/dalvikvm(362): GC_FOR_ALLOC freed 1369K, 30% free 9190K/13063K, paused 27ms
01-18 13:33:45.645: I/dalvikvm-heap(362): Grow heap (frag case) to 10.285MB for 1286224-byte allocation
01-18 13:33:45.695: D/dalvikvm(362): GC_FOR_ALLOC freed 5K, 21% free 10441K/13063K, paused 27ms
01-18 13:33:45.795: D/dalvikvm(362): GC_CONCURRENT freed 46K, 17% free 10921K/13063K, paused 2ms+4ms
01-18 13:33:45.895: D/dalvikvm(362): GC_FOR_ALLOC freed 2126K, 28% free 9442K/13063K, paused 27ms
01-18 13:33:45.895: I/dalvikvm-heap(362): Grow heap (frag case) to 10.531MB for 1286224-byte allocation
01-18 13:33:45.965: D/dalvikvm(362): GC_CONCURRENT freed 5K, 19% free 10693K/13063K, paused 2ms+3ms
01-18 13:33:46.505: I/ActivityManager(183): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.android.settings/.Settings} from pid 362
01-18 13:33:46.645: D/OpenGLRenderer(362): Flushing caches (mode 0)
01-18 13:33:46.705: W/InputManagerService(183): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@4139b200 (uid=10023 pid=362)
01-18 13:33:46.725: D/OpenGLRenderer(362): Flushing caches (mode 1)
01-18 13:33:49.205: I/ManageApplications(4752): onCreateOptionsMenu in ManageApplications{4109d208 #2 id=0x10202d4}: com.android.internal.view.menu.MenuBuilder@41076b88
01-18 13:33:49.365: I/ManageApplications(4752): onCreateOptionsMenu in ManageApplications{4109d208 #2 id=0x10202d4}: com.android.internal.view.menu.MenuBuilder@41076b88
01-18 13:33:50.005: D/dalvikvm(865): GC_CONCURRENT freed 415K, 8% free 6548K/7111K, paused 1ms+2ms
01-18 13:33:50.165: D/AlarmReceiver(4890): onReceive 
```

如您所见，13:28:09（拔出）和 13:33:16（重新插入）之间有很大的差距。中间好像什么都没发生。为了确保这不是日志记录问题，每次警报响起时，我都会在文件中写入一个简单的时间戳。该文件如下所示：

```
Fri Jan 18 13:25:50 MEZ 2013
Fri Jan 18 13:26:20 MEZ 2013
Fri Jan 18 13:26:50 MEZ 2013
Fri Jan 18 13:27:20 MEZ 2013
Fri Jan 18 13:27:50 MEZ 2013
Fri Jan 18 13:33:16 MEZ 2013
Fri Jan 18 13:33:20 MEZ 2013
Fri Jan 18 13:33:50 MEZ 2013 
```

同样的差距在这里...

任何想法我做错了什么？

# c# - Silverlight 3 在分块文件上传时出现内存不足异常

> ID：14399646
> 
> 赞同：0
> 
> 时间：2013-01-18T13:07:09.593
> 
> 标签：c#, silverlight, out-of-memory, file-transfer

我正在通过 Silverlight 上传大文件并实现了分块功能。它工作正常，但是，如果我连续上传三个大（500mb）文件，我仍然会出现内存不足的异常。下面是我的代码，你能发现有什么遗漏吗？

```
const int _ReadSize = 2097152;

byte[] _Buffer = new byte[_ReadSize];

    /// <summary>
    /// This method will do the initial read and write and send off the first chunk of data.
    /// This is where the filestream is opened from the file info.
    /// It also passes a set of parameters to the next call. These are:
    /// * bytesRead - the number of bytes that was actually read from the file with stream.Read
    /// * stream - This is the filestream
    /// * offset - This is the updated offset that has been moved to the position in the stream we are currently at
    /// </summary>
    void DoWork()
    {
        FileStream stream = _SelectedFile.OpenRead();

        ServerAvailable = false;

        bool startRead = true;

        int bytesRead = 0;

        bytesRead = stream.Read(_Buffer, 0, _ReadSize);

        int offset = bytesRead;

        List<object> args = new List<object>();
        args.Add(bytesRead);
        args.Add(stream);
        args.Add(offset);

        IDataManipulationService client = new DataManipulationServiceClient();
        client.BeginUploadLargeFile(_Buffer, (int)_SelectedFile.Length, FileName, startRead, offset - bytesRead, bytesRead, FinishedUploadPiece, args);
    }

    /// <summary>
    /// This method is called once the previous call to the web server has been completed.
    /// It will read the next chunk of the file and send that through to the web server next.
    /// If 0 bytes were read from the previous read on the stream; it will do the following:
    /// - Close the file stream
    /// - Dispose the file stream
    /// - set the FileInfo to null
    /// - Reset the FileSize, UploadProgress and FileName variables to default values
    /// - Make the buttons available for use
    /// </summary>
    /// <param name="result">The result contains the information about the outcome of the previous call. This also contains the args parameter sent through with the previous call.</param>
    void FinishedUploadPiece(IAsyncResult result)
    {
        if (result.IsCompleted)
        {
            List<object> args = (List<object>)result.AsyncState;

            int bytesRead = (int)args[0];
            FileStream stream = (FileStream)args[1];
            int offset = (int)args[2];

            if (bytesRead != 0)
            {
                UploadProgress += bytesRead;

                if (UploadProgress == FileSize)
                {
                    FileSize = 0;
                    UploadProgress = 0;
                    FileName = String.Empty;

                    ServerAvailable = true;
                    stream.Close();
                    stream.Dispose();
                    _SelectedFile = null;
                }
                else
                {
                    bytesRead = stream.Read(_Buffer, 0, _ReadSize);

                    offset += bytesRead;

                    args = new List<object>();

                    args.Add(bytesRead);
                    args.Add(stream);
                    args.Add(offset);

                    IDataManipulationService client = new DataManipulationServiceClient();
                    client.BeginUploadLargeFile(_Buffer, (int)_SelectedFile.Length, FileName, false, offset - bytesRead, bytesRead, FinishedUploadPiece, args);
                }
            }
        }
    } 
```

澄清一些事情：_SelectedFile 是 FileInfo 类型，每次我想通过它发送数据时，我都会创建一个到服务器的新连接，但我也尝试过使用全局注入连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:28:06.833

我会尝试重构代码以使用错误代码而不是传递流。

```
void DoWorkAsync()
{
    IDataManipulationService client = new DataManipulationServiceClient();

    try
    {
        using(FileStream stream = _SelectedFile.OpenRead())
        {
            int streamLength = (int)_SelectedFile.Length
            ServerAvailable = false;

            bool startRead = true;

            int bytesRead;
            int offset = 0;

            while((bytesRead = stream.Read(_Buffer, 0, _ReadSize)) > 0)
            {
                offset += bytesRead;
                UploadState state = await client.UploadChunk(_Buffer, streamLength, FileName, offset, bytesRead)

                if(state == UploadState.Error)
                    //error Handling

                if(state == UploadState.Corrupt)
                    //Retry send

                if(state == UploadState.Success)
                    continue;
            }
        }
    }
    catch(Exception e) {} //TODO: Replace Exception with some meaningful exception.
    finally
    {
        ServerAvailable = true;
    }
}

enum UploadState
{
    Success,
    Error,
    Corrupt
} 
```

异步/等待的替代方案：

请参阅[我应该怎么做才能在 .NET 2.0 中使用 Task<T>？](https://stackoverflow.com/questions/6550933/what-should-i-do-to-use-taskt-in-net-2-0)`async`对于/的轻量级实现`await`。

[Reactive Extensions](http://www.microsoft.com/en-us/download/details.aspx?id=26649)将提供一个实现，`System.Threading.dll`其中包含`Task`或者您可以使用[NuGet](http://nuget.org/packages/TaskParallelLibrary)。

这是一个示例实现：

```
void DoWork()
{
    IDataManipulationService client = new DataManipulationServiceClient();

    try
    {
        using(FileStream stream = _SelectedFile.OpenRead())
        {
            int streamLength = (int)_SelectedFile.Length
            ServerAvailable = false;

            bool startRead = true;

            int bytesRead;
            int offset = 0;

            while((bytesRead = stream.Read(_Buffer, 0, _ReadSize)) > 0)
            {
                offset += bytesRead;
                Task<UploadState> task = client.UploadChunk(_Buffer, streamLength, FileName, offset, bytesRead);

                while(true)
                {
                    if(task.IsCompleted)
                    {
                        UploadState state = task.Result;
                        break;
                    }

                    if(task.IsFaulted)
                    {
                        var exception = task.Exception;
                        //Deal with errors
                        break;
                    }
                }

                if(state == UploadState.Error)
                    //error Handling

                if(state == UploadState.Corrupt)
                    //Retry send

                if(state == UploadState.Success)
                    continue;
            }
        }
    }
    catch(Exception e) {} //TODO: Replace Exception with some meaningful exception.
    finally
    {
        ServerAvailable = true;
    }
}

enum UploadState
{
    Success,
    Error,
    Corrupt
} 
```

# javascript - 通过 XMLHttpRequest 读取文本文件会在文本文件中产生语法错误，很难

> ID：14399648
> 
> 赞同：1
> 
> 时间：2013-01-18T13:07:16.410
> 
> 标签：javascript, ajax, firefox, xmlhttprequest

我正在通过普通方式在 Firefox 中通过 XMLHttpRequest 读取文本文件，该文本文件由单行图片文件名组成，并用管道符号 ('|') 分隔。最后一切正常，我的图像列表被读取，我可以很好地解析它并加载我的图片。

这是好奇的代码。

```
bilderListeDatei.open("GET","./bilder/liste?nocachetrick="+jetzt.getTime(),true);

bilderListeDatei.onreadystatechange = function () 
{
    if (bilderListeDatei.readyState === 4) 
    {  
        if (bilderListeDatei.status === 200) 
        {  
            bilderListe = bilderListeDatei.responseText.split("|");
            elementeZuLaden += bilderListe.length;

            for(var i in bilderListe)
            {
                var j = bilder.push(new Image());
                bilder[j-1].onload = function() 
                                        {
                                            elementeGeladen++;
                                            if(elementeZuLaden == elementeGeladen){elementeLadenFertig = true;}
                                        }
                bilder[j-1].src = "./bilder/" + bilderListe[i];
                //alert(j);
            }
        }
    }
} 
```

如前所述，语法错误是在我的文本文件中产生的，而不是在完美运行的代码中产生的。知道如何摆脱（被程序的其余部分忽略）错误消息吗？

编辑：错误消息，因为它在评论中被弄乱了：

```
Zeitstempel: 18.01.2013 14:15:01
Fehler: Syntax-Fehler
Quelldatei: http://192.168.2.102/seitenbastel/bilder/liste?nocachetrick=1358514901070
Zeile: 1, Spalte: 1
Quelltext:
65.jpg|67.jpg|69.jpg|71.jpg|73.jpg|75.jpg|77.jpg|79.jpg|81.jpg|83.jpg|85.jpg|87.jpg|89.jpg|91.jpg|93.jpg|95.jpg|97.jpg 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:57:20.173

XMLHttpRequest 会尝试将结果解析为 XML，一般来说，创建`responseXML`对象。您的数据可能不是 XML。您要么需要告诉浏览器在您的`Content-Type`标头中（例如，`text/plain`在您的情况下将其设置为），要么告诉浏览器您实际上根本不需要解析的 DOM 表示，`responseType = "text"`如果您只打算使用 XHR 对象，则通过设置文本。

# java - 数组中丢失的对象

> ID：14399649
> 
> 赞同：3
> 
> 时间：2013-01-18T13:07:19.420
> 
> 标签：java, arrays

我正在制作一个 RPG 风格的程序，但我无法让我的宝藏对象阵列工作。我想保存我在阵列中找到的所有宝物，以便稍后打印出来。这是宝藏类的代码：

```
private static int x = 0;
Treasure treasureArray[] = new Treasure[20];

public void collectedTreasures(Treasure t){
treasureArray[x] = t;
x++;
} 
```

在主程序中：

```
GoldTreasure t = new Coin();
hero1.setPoints(t.getCoin());
t.collectedTreasures(t); 
```

宝物对象的创建是在无限循环中的一个开关内。当我打印出数组时，使用方法

```
public void printTreasures(){
        for (int y=0 ; y<x ; y++){
            System.out.print(treasureArray[y] + ", "); 
```

对于数组中应该有的宝藏，我只会得到“null”。如果我在 t.collectedTreasures(t) 之后打印出数组，我会看到只有最后一个宝藏在那里，并且该对象之前的索引为空。我做错了什么？

是的，我是新手。对人好点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T13:10:48.520

这段代码很可疑：

```
GoldTreasure t = new Coin();
hero1.setPoints(t.getCoin());
t.collectedTreasures(t); 
```

这意味着你是：

1.  创造新宝藏`t`；
2.  调用`collectedTreasures`那个实例。

您应该将宝藏阵列分配给英雄，而不是分配给宝藏本身。

另请注意，它`x`不应该是静态变量，因为它将在所有实例之间共享；显然不是你的意图，因为宝藏是逐实例的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:17:31.610

问题是您收集宝藏本身，因为您调用收集函数（属于宝藏）来收集自己。

稍后，当您在哪个对象中调用 printTreasures 时，它会运行什么？你是否创建了一个新的宝藏实例并要求它打印收集到的东西？如果是这样，结果是根据代码，没有问题，但逻辑有问题。

你应该做什么：英雄是收集宝藏的人，因此在英雄类中移动宝藏数组的定义、计数器和 2 个函数 -collectedTreasures 和 printTreasures。此外，使 X 不是静态的，因为它的值将在英雄之间共享。也许，更优雅的是，创建一个额外的类来处理宝藏并使用不同的类来组成你的英雄。

我可以建议将collectTreasures(Treasure t) 函数重命名为collectTreasure(Treasure t)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T13:17:57.240

我们需要查看您的完整代码才能为您提供详细的答案，但我怀疑您正在做的是创建大量`Treasure`子类并调用`collectedTreasure`每个子类。这将`x`每次增加您的全局计数器，而每个人`treasureArray`只有一个条目。

您可以将`collectedTreasure`方法移动到与您的对象对应的类`hero1`，同时摆脱静态（全局）`x`变量并用实现（例如）替换您的`Treasure`对象数组，它们都跟踪自己的大小，所以你不必。另外，当您获得超过 20 个宝藏时，您的代码不会崩溃！`List``ArrayList`

# java - 如何在visio中以编程方式绘制流程图

> ID：14399650
> 
> 赞同：1
> 
> 时间：2013-01-18T13:07:24.530
> 
> 标签：java, swt, ole, visio

在Java中使用SWT OLE自动化我通过逐行读取源代码以编程方式在visio中绘制流程图。但是只要有if-else条件以及嵌套if情况，我的逻辑就会出错。是否有任何标准算法我在 Visio 中绘制流程图时可以遵循。请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T22:44:08.493

请参阅Chris Roth 以[编程方式创建 Visio 流程图。](http://www.visguy.com/2006/09/13/create-visio-flowcharts-programmatically/)

# delphi - 启动时恢复以前打开的项目和页面

> ID：14399661
> 
> 赞同：14
> 
> 时间：2013-01-18T13:07:37.860
> 
> 标签：delphi, ide, breakpoints

一个愚蠢的问题。当我从 RAD Studio XE2 退出然后重新启动它时，我发现以前打开的所有东西现在都关闭了，我必须手动恢复它们。

我想找到已经打开的

*   上一课打开的项目组，
*   所有打开的页面（例如源文件、欢迎页面等）
*   断点
*   书签

所以我可以在不记得一切的情况下继续工作。

Eclipse 和 Visual Studio 执行此操作。如何**让 RAD Studio****在启动**时恢复所有这些（或其中一些）？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-18T21:28:10.083

尝试单击“工具/选项”对话框第一页上的“自动保存项目选项”。

从帮助文件：

> 关闭项目或退出产品时自动保存或更新项目桌面文件（.dsk 文件扩展名）。
> 
> .dsk 文件记录您的当前设置：
> 
> *   桌面布局
> *   断点
> *   观看项目
> *   当前在 IDE 中打开的文件
> 
> 当您稍后重新打开项目时，将读取 .dsk 文件，并且您的桌面布局、断点和监视都将恢复。此外，关闭项目时打开的所有文件都会再次打开，无论它们是否被项目使用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-10-01T20:09:51.003

从 10.3 Rio 开始，您可以在自动保存部分下的工具 > 选项 > IDE > 保存和桌面中找到此选项，[![在此处输入图像描述](../Images/8089b2747ecef040aecb1ddca863214b.png)](https://i.stack.imgur.com/7MOX0.png)

# seo - 如何为移动设备和桌面设备中具有不同页面的网站创建站点地图？

> ID：14399664
> 
> 赞同：1
> 
> 时间：2013-01-18T13:07:51.363
> 
> 标签：seo, sitemap, robots.txt

我有一个网站，它有两种不同的页面结构——一种用于移动访问者，一种用于桌面。这就是为什么我有两个站点地图文件——一个用于移动设备，一个用于桌面。
我想创建一个 robots.txt 文件，该文件将“告诉”搜索引擎机器人扫描移动站点的移动站点地图，以及桌面站点的桌面站点地图。
我怎样才能做到这一点？

我想创建一个指向这两个站点地图的站点地图索引文件，并将以下指令添加到 robots.txt 文件中：

sitemap: [sitemap-index-location]

这是正确的方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:37:34.133

我不能给你肯定，但我相信最好的做法是通知 robots.txt 中的两个站点地图。在移动站点地图中，您已经有标记`<mobile:mobile/>`报告移动版本。
另一个有趣的问题也许是创建站点地图索引：

```
<sitemapindex xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
    <sitemap>
        <loc>http://example.com/sitemap.desktop.xml</loc>
    </sitemap>
    <sitemap>
        <loc>http://m.example.com/sitemap.mobile.xml</loc>
    </sitemap>
</sitemapindex> 
```

您的 robots.txt 将如下所示：

```
# Sitemap index
Sitemap: http://example.com/sitemap.xml
# Other sitemaps. I know it is already declared in the sitemap index, but I believe it will do no harm also set here
Sitemap: http://example.com/sitemap.desktop.xml
Sitemap: http://example.com/sitemap.mobile.xml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T05:50:28.013

我想我会向您推荐响应式网站设计。

借助响应式网页设计技术，您可以使用 CSS3 媒体查询构建更改网页。在这里，无论访问它的设备如何，页面都有一个 HTML 代码。但是，它的显示会通过 CSS 媒体查询更改，以指定哪些 CSS 规则适用于浏览器以显示页面。

通过响应式网站设计，您可以将桌面和移动内容保留在一个 URL 上。您的用户可以更轻松地与您的 Web 内容进行交互、共享和链接，并且 Google 的算法可以更轻松地将索引属性分配给您的 Web 内容。

此外，Google 会有效地抓取您的内容，而无需使用不同的 Googlebot 用户代理来抓取网页。

您可以简单地定义一个站点地图并放入 robots.txt 文件中。它将为您的桌面和移动内容爬行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:11:07.107

除了在 r​​obots.txt 中说明文件外，您还应该登录 Google 网站管理员工具并在那里提交站点地图。那会告诉你

*   如果您提交的站点地图网址正确
*   站点地图文件具有正确的语法
*   有多少站点地图中的文件已被爬取
*   站点地图中有多少文件已被索引

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T01:29:44.947

robots.txt并没有告诉搜索引擎哪个移动端哪个是你的PC端，他只能声明一个sitemap。这样就够了好吧，我觉得你可以在html页眉中加个判断，pc端pc side web mobile end mobile page，这样不好么？Site Map 有页面就有链接，然后多推广收录。

# wpf - 选择/取消选择网格中的所有行

> ID：14399668
> 
> 赞同：0
> 
> 时间：2013-01-18T13:08:03.413
> 
> 标签：wpf, c#-4.0, silverlight-4.0, wpfdatagrid

我有一个 wpf 形式的 DataGrid。它有带有复选框的行。我想选择/取消选择选中/取消选中标题复选框的所有行。

但我收到此错误：chk.IsChecked = false 上的“对象引用未设置为对象的实例”。

![在此处输入图像描述](../Images/80fe823ade6921fa828e3399f3730fa4.png)

c#代码：

```
private void myDataGrid_LoadingRow(object sender, DataGridRowEventArgs e)
    {
        CheckBox chk = (CheckBox)this.myDataGrid.Columns[0].GetCellContent(e.Row);
        chk.IsChecked = false;
        checkboxes.Add(chk);
    } 
```

xml代码是：

```
<Window x:Class="WpfApplication1.Grid"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Grid" Height="300" Width="300">
<Grid>
    <DataGrid x:Name="myDataGrid"
              VerticalAlignment="Top"
              Grid.Column="0"
              AutoGenerateColumns="False"
              LoadingRow="myDataGrid_LoadingRow"
              Loaded="myDataGrid_Loaded">
        <DataGrid.Columns>
            <DataGridTemplateColumn Width="80">
                <DataGridTemplateColumn.Header>
                    <CheckBox HorizontalAlignment="Center"
                              Click="chk_Click"
                              VerticalAlignment="Center"
                              Name="chckAll">
                    </CheckBox>
                </DataGridTemplateColumn.Header>

                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <CheckBox x:Name="chk"
                                  HorizontalAlignment="Center"
                                  HorizontalContentAlignment="Center"></CheckBox>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>

            <DataGridTextColumn Header="First Name"
                                Width="100"
                                Binding="{Binding FirstName}"></DataGridTextColumn>
            <DataGridTextColumn Header="Last Name"
                                Width="100"
                                Binding="{Binding LastName}"></DataGridTextColumn>
        </DataGrid.Columns> 
    </DataGrid>
</Grid> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:30:23.653

您可以按照他们在此[链接](https://stackoverflow.com/questions/1976087/wpf-datagrid-set-selected-row)上所说的去做。

因为你应该是这样的：

```
DataGridRow row = (DataGridRow)dataGrid.ItemContainerGenerator.ContainerFromIndex(dataGrid.SelectedIndex);
CheckBox chk = (CheckBox)this.myDataGrid.Columns[0].GetCellContent(e.Row); 
```

我想，暂时不尝试。

# vba - 通过 VBA 中的 Excel 查询从 Access 执行查询

> ID：14399672
> 
> 赞同：2
> 
> 时间：2013-01-18T13:08:21.847
> 
> 标签：vba, excel, ms-access-2007, adodb

**Access**已保存使用名为“myQuery”的查询生成器设计的查询。数据库通过 ODBC 连接连接到系统。宏全部启用。

**Excel**建立了一个 ADODB 连接以通过以下方式连接到数据库

```
Dim con As ADODB.Connection
Dim rs As ADODB.Recordset
Set con = New ADODB.Connection
With con
 .Provider = "Microsoft.ACE.OLEDB.12.0"
 .Open "MyDatabase.accdb"
End With 
```

通常你会继续写你的SQL，这很好，然后就做类似的事情

```
Dim sqlQuery As String
sqlQuery = "SELECT * FROM myTable"
Set rs = New ADODB.Recordset
rs.Open sqlQuery, con, ... 
```

但我想访问我保存在访问数据库中的查询。那么如何在我刚刚连接的数据库中调用保存的查询。

**已经试过了**

1.  *con.Execute("EXEC myQuery")*但那个告诉我找不到 myQuery。
2.  *rs.Open "myQuery", con*但那个是无效的，需要从中选择 SELECT/etc 语句

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T13:32:00.267

我认为您可以将其视为存储过程。

如果我们在之前开始`Dim sqlQuery As String`

```
 Dim cmd as new ADODB.Command
 cmd.CommandType = adCmdStoredProc
 cmd.CommandText = "myQuery"
 cmd.ActiveConnection = con

 Set rs = cmd.Execute() 
```

然后在此之后拾取您的记录集工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T13:26:11.583

你快到了：

```
Dim con As ADODB.Connection
Dim rs As ADODB.Recordset
Set con = New ADODB.Connection
With con
 .Provider = "Microsoft.ACE.OLEDB.12.0"
 .Open "z:\docs\MyDatabase.accdb"
End With
con.Execute "MyQuery" 
```

只需省略 Exec。

您也可以添加参数，这有点旧，但应该会有所帮助：[使用 Excel 数据和可能的宏更新 Access 数据库中的 2 个字段](https://stackoverflow.com/questions/11411522/update-2-fields-in-access-database-with-excel-data-and-probably-a-macro/11412084#11412084)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-13T20:27:40.757

我能够使用以下命令运行已保存在 Access 中的更新查询：

```
Connection.Execute "My_Update_Query_Already_Saved_In_Access", adExecuteNoRecords, adCmdStoredProc 
```

这给了我错误，直到我在 Access 数据库和执行语句中都用下划线替换了查询名称中的空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-15T21:31:04.277

这是一种黑客工作，但您可以查询查询。也就是说，将您的 sql 字符串替换为以下内容：

```
sqlQuery = "SELECT * FROM QueryName;" 
```

在运行此之前，必须确保已保存 Access 数据库，即。按 Ctrl+S（仅在 Access 中运行查询是不够的）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-18T16:51:56.950

自从创建此线程以来已经很长时间了。如果我理解正确，我可能会添加一些有用的东西。我已经为 OP 描述的内容命名，即使用保存在 ACCDB 中的查询中的 SQL 以通过 DAO 或 ADOBD 在 VBA 中运行的过程。我给它起的名字是“对象属性提供者”，即使在我的笔记中有首字母缩写词 OPP，对象名称前缀/后缀也是如此。

这个想法是 ACCDB 中的现有对象（通常是查询）提供了您需要在 VBA 中使用的属性（通常是 SQL）。我拼凑了一个函数，只是为了从查询中吸出 SQL；见下文。预警：抱歉，不过这都是在DAO，我对ADODB用处不大。希望您仍然会发现这些想法很有用。

我什至设计了一种在来自这些 OPP 查询的 SQL 中使用/插入可替换参数的方法。然后我在 VBA 中使用 SQL 之前使用 VBA.Replace() 进行替换。

ACCDB中查询的SQL的DAO对象路径如下：

```
mySqlStatement = Access.Application.CurrentDb.QueryDefs("myQueryName").SQL 
```

我使用可替换参数的方式是评估需要替换的内容，并为在真实数据库中不可能存在的参数选择一个不寻常的名称。在大多数情况下，我所做的唯一替换是字段名或表名，或者 WHERE 和 HAVING 子句的表达式。所以我将它们命名为“{ReplaceMe00000001}”，然后使用 Replace() 函数来完成工作......

```
sqlText = VBA.Replace(sqlText, "{ReplaceMe00000001}", "SomeActualParameter") 
```

...然后在 VBA 中使用 sqlText。这是一个工作示例：

```
Public Function MySqlThing()
    Dim sqlText as String
    Dim myParamater as String
    Dim myExpression as String

    'Set everything up.
    sqlText = getSqlTextFromQuery("myQuery")
    myParameter = "{ReplaceMe00000001}"
    myExpression = "SomeDateOrSomething12/31/2017"

    'Do the replacement.
    sqlText = VBA.Replace(sqlText, myParameter, myExpression)

    'Then use the SQL.
    db.Execute sqlText, dbFailOnError
End Function

Function getSqlTextFromQuery(ByVal oppName As String) As String

    Dim app As Access.Application
    Dim db As DAO.Database
    Dim qdefs As DAO.QueryDefs
    Dim qdef As DAO.QueryDef
    Dim sqlText As String

    Set app = Access.Application
    Set db = app.CurrentDb
    Set qdefs = db.QueryDefs
    Set qdef = qdefs(oppName)

    oppGetSqlText = qdef.SQL

End Function 
```

# ios - CoreImage CIHardLightBlendMode 问题

> ID：14399674
> 
> 赞同：3
> 
> 时间：2013-01-18T13:08:28.897
> 
> 标签：ios, core-image

我想使用过滤器 CIHardLightBlendMode 但它似乎不像苹果网站上解释的那样工作：

> 如果源图像样本颜色浅于 50% 灰色，则背景变亮，类似于加网。如果源图像样本颜色比 50% 灰色深，则背景变暗，类似于相乘。如果源图像样本颜色等于 50% 灰度，则源图像不会改变

我尝试使用 50% 的灰色叠加图像，结果更暗。我尝试了 73% 的灰色，几乎没有影响（因为它应该是 50%）

问题是我有很多现有的叠加图像，我目前使用 ImageMagick 并且它工作正常（叠加图像也可以在使用强光叠加模式的 Photoshop 或 Gimp 上工作）为了更快地处理图像，我想使用CoreImage 但它没有按我预期的那样工作。

我怎样才能使用过滤器，因为它是解释的？

这是我的代码：

```
CIContext *context = [CIContext contextWithOptions:nil];
CIImage *sourceImage = [CIImage imageWithContentsOfURL:[NSURL fileURLWithPath:imgSource]];
CIImage *overlayImage = [CIImage imageWithContentsOfURL:[NSURL fileURLWithPath:imgOverlay]];
CIImage *outputImage;

CIFilter *filter = [CIFilter filterWithName:@"CIHardLightBlendMode"];
[filter setDefaults];
[filter setValue:overlayImage forKey:kCIInputImageKey];
[filter setValue:sourceImage forKey:kCIInputBackgroundImageKey];
outputImage = [filter outputImage];

CGImageRef cgimg = [context createCGImage:outputImage fromRect:[outputImage extent]];
self.processedImage = [UIImage imageWithCGImage:cgimg];
CGImageRelease(cgimg); 
```

谢谢

# javascript - 在 UrbanAirship 中为 Phonegap 获取传入

> ID：14399676
> 
> 赞同：25
> 
> 时间：2013-01-18T13:08:35.240
> 
> 标签：javascript, ios, cordova, urbanairship.com

当我的应用程序最小化时，当我在手机上收到推送通知时，如果我单击通知启动我的应用程序，调用

```
window.pushNotification.getIncoming( callback ) 
```

返回`{"message":"","extras":{}}`而不是我单击的通知的数据。

这是正确的行为吗？如果是这样，有没有办法获得我想要的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-05T12:01:58.970

**使用以下代码进行 PhoneGap 推送通知**

```
window.LocalNotification.add({
                    message : "hello",
                    ticker : "New Notification",
                    repeatDaily : false,
                    id : 4
                }, newNotification);

function newNotification(e) {
if (e != null && e.event == "newLocalNotification") {
    // add my Appointment page
    window.location = "#redirectPageId";

} 
```

}

使用“redirectPageId”重定向页面

# windows-phone-7 - 在 WP 中，如何在不显示软键盘的情况下保持插入符号位置光标可见？

> ID：14399684
> 
> 赞同：0
> 
> 时间：2013-01-18T13:08:53.843
> 
> 标签：windows-phone-7, soft-keyboard

这是一个非常不寻常的问题，但我需要这个功能。在 Windows Phone 中，如何在不显示软键盘（虚拟键盘）的情况下保持给定 TextBox 的插入符号位置光标可见？在 Android 中这是很有可能的，但我在 WP 中没有找到任何东西。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:26:59.633

这是不可能的。插入符号仅可见并与关注该控件相关联。这同样适用于软键盘。

# c# - 异步 void 测试用例异常期间 WPToolkitTestFx 应用程序崩溃

> ID：14399687
> 
> 赞同：0
> 
> 时间：2013-01-18T13:09:04.897
> 
> 标签：c#, unit-testing, windows-phone-8, async-await

当标有“异步”的测试用例失败时，就会出现问题。在这种情况下，应用程序只是崩溃，出现未处理的 TargetInvocationFail 异常。据我了解，测试应用程序应该处理这些异常，因为如果出现异常，它应该将相应的情况标记为失败。这正是正常测试用例所发生的情况（其中没有 async / await 的东西）。

我也为此创建了一个问题报告，请参阅[http://phone.codeplex.com/workitem/10751](http://phone.codeplex.com/workitem/10751)。如果您有同样的问题，请点赞该问题。如果您碰巧知道一些解决方法，请在这里告诉我。

**编辑**：正如斯蒂芬克利里在评论中提到的那样，这个问题是由于我的测试用例过程是异步无效的，而不是异步任务造成的。然后我将这个问题重新表述如下：为什么改变测试用例的返回类型会改变异常处理的行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:14:58.953

一个好的一般准则是“避免`async void`”。造成这种情况的一个原因是异常处理的差异：`async Task`方法会将任何异常放在其返回的 上`Task`，这可以在 ed 时观察`Task`到`await`。方法将直接在方法启动时的当前事件`async void`上引发异常。`SynchronizationContext``async void`

要记住的另一件事是，这`async`主要是编译器转换。如果您（或其他任何人）`async Task`在运行时反映了一个方法，您只会看到一个返回类型为`Task`;的方法。类似地，一个`async void`方法只有一个返回类型`void`。

因此，当测试运行程序看到一个方法返回`void`（不知道它是一个`async void`方法）时，它会执行它并看到它返回而没有（直接）引发异常，因此它将其标记为“通过”。同时，该`async void`方法抛出的异常直接在`SynchronizationContext`（包括 MSTest 在内的大多数测试运行程序提供线程池`SynchronizationContext`）上引发，并且此异常可能导致测试运行报告非特定错误 - 或者可能会被忽略，如果测试运行足够快地完成。

现代测试运行器（包括 VS2012 的 MSTest）`async Task`通过检测 的返回类型来理解方法，并且在考虑测试方法“完成”并将其标记为通过（或失败，如果返回包含异常）之前`Task`将等待完成.`Task``Task`

我[在我的博客上的 MSTest 中有这种行为的示例](http://nitoprograms.blogspot.com/2012/02/async-unit-tests-part-1-wrong-way.html)（包括显示竞争条件的两个输出的屏幕截图），但请注意，这些博客条目已有将近一年的历史，并且谈论`async`使用 VS2010 进行单元测试。MSTest 已使用 VS2012 进行了更新，因此它具有合理的`async Task`方法行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:47:14.953

我们遇到的 SL/WP 工具包崩溃的主要问题是由于在测试失败后断言或调用 TestComplete 或调用 TestComplete 两次引起的。示例：假设您使用超时属性标记了一个测试，并且您正在等待一个比超时时间更长的网络请求。如果 webrequest 没有失败，只是速度很慢，它仍然会在单元测试框架认为完成后返回并调用 TestComplete()。我不知道如何测试测试是否超时，所以我可以编写测试来防止这种情况发生，所以我建议不要在其中一些场景中使用它。

另一种情况是您等待两个事件，例如“完成”和“失败”事件，如果其中任何一个被引发，您会做不同的事情，但它们都调用 TestComplete：假设您的代码意外引发了两个事件 = > 你刚刚调用了测试完成并且你的代码失败了。第三种情况是您有一个共享对象，假设您没有在每个测试中重新创建一个 WebClient 实例：现在第一个测试侦听 DownloadString 并执行此操作。下一个测试在运行时也会开始侦听 DownloadString，但由于旧的没有从中解脱，它的 DownloadStringCompleted 事件处理程序将再次运行，导致单元测试崩溃。

正如斯蒂芬所提到的，您不能在 SL 和 WP 单元测试框架中返回 Task 。我已经设法将其破解到 Silverlight 单元测试运行程序中，您可以在此处阅读：http: [//www.sharpgis.net/post/2012/12/21/Hacking-the-Silverlight-Unit-Tests-to -support-returning-Task.aspx](http://www.sharpgis.net/post/2012/12/21/Hacking-the-Silverlight-Unit-Tests-to-support-returning-Task.aspx) 我也很乐意为 Windows Phone 单元测试这样做，但它的源代码不可用，但请在此处投票支持此版本的发布：[http://phone .codeplex.com/workitem/10642](http://phone.codeplex.com/workitem/10642)

还请投票支持在此处向单元测试框架添加对 Task 的支持： [http](http://phone.codeplex.com/workitem/10727) ://phone.codeplex.com/workitem/10727（WinPhone）和此处： [http](http://silverlight.codeplex.com/workitem/11457) ://silverlight.codeplex.com/workitem/11457 （Silverlight）

# python - matplotlib：在忽略缺失数据的点之间画线

> ID：14399689
> 
> 赞同：72
> 
> 时间：2013-01-18T13:09:12.610
> 
> 标签：python, matplotlib

我有一组数据，我想将其绘制为折线图。对于每个系列，都缺少一些数据（但每个系列都不同）。目前 matplotlib 不绘制跳过缺失数据的线条：例如

```
import matplotlib.pyplot as plt

xs = range(8)
series1 = [1, 3, 3, None, None, 5, 8, 9]
series2 = [2, None, 5, None, 4, None, 3, 2]

plt.plot(xs, series1, linestyle='-', marker='o')
plt.plot(xs, series2, linestyle='-', marker='o')

plt.show() 
```

产生一个线条中有间隙的图。如何告诉 matplotlib 通过间隙画线？（我宁愿不必插入数据）。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-01-18T13:18:36.283

您可以通过这种方式屏蔽 NaN 值：

```
import numpy as np
import matplotlib.pyplot as plt

xs = np.arange(8)
series1 = np.array([1, 3, 3, None, None, 5, 8, 9]).astype(np.double)
s1mask = np.isfinite(series1)
series2 = np.array([2, None, 5, None, 4, None, 3, 2]).astype(np.double)
s2mask = np.isfinite(series2)

plt.plot(xs[s1mask], series1[s1mask], linestyle='-', marker='o')
plt.plot(xs[s2mask], series2[s2mask], linestyle='-', marker='o')

plt.show() 
```

这将导致

![阴谋](../Images/02a199174395f1b276df4598e4bc780d.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-09-13T16:40:49.257

引用@Rutger Kassies（[链接](https://stackoverflow.com/a/22454191/1085495)）：

> Matplotlib 仅在连续（有效）数据点之间绘制一条线，并在 NaN 值处留下间隙。

如果您使用**Pandas**的解决方案，则：

```
#pd.Series 
s.dropna().plot() #masking (as @Thorsten Kranz suggestion)

#pd.DataFrame
df['a_col_ffill'] = df['a_col'].ffill()
df['b_col_ffill'] = df['b_col'].ffill()  # changed from a to b
df[['a_col_ffill','b_col_ffill']].plot() 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-07-31T13:34:49.947

熊猫的解决方案：

```
import matplotlib.pyplot as plt
import pandas as pd

def splitSerToArr(ser):
    return [ser.index, ser.as_matrix()]

xs = range(8)
series1 = [1, 3, 3, None, None, 5, 8, 9]
series2 = [2, None, 5, None, 4, None, 3, 2]

s1 = pd.Series(series1, index=xs)
s2 = pd.Series(series2, index=xs)

plt.plot( *splitSerToArr(s1.dropna()), linestyle='-', marker='o')
plt.plot( *splitSerToArr(s2.dropna()), linestyle='-', marker='o')

plt.show() 
```

在 Pandas 中绘图时，该`splitSerToArr`功能非常方便。这是输出：[![在此处输入图像描述](../Images/61c7d4336e89bad28ad3bec700b10115.png)](https://i.stack.imgur.com/cLC0F.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-18T13:22:53.850

如果没有插值，您需要从数据中删除无。这也意味着您需要删除与系列中无对应的 X 值。这是一个（丑陋的）这样做的衬里：

```
 x1Clean,series1Clean = zip(* filter( lambda x: x[1] is not None , zip(xs,series1) )) 
```

lambda 函数对 None 值返回 False，从列表中过滤 x,series 对，然后将数据重新压缩回其原始形式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T15:50:33.400

对于它可能是值得的，经过一些试验和错误，我想对 Thorsten 的解决方案添加一个澄清。希望为尝试过这种方法后寻找其他地方的用户节省时间。

使用时我无法成功解决相同的问题

```
from pyplot import * 
```

并试图与

```
plot(abscissa[mask],ordinate[mask]) 
```

似乎需要使用它`import matplotlib.pyplot as plt`来获得正确的 NaN 处理，尽管我不能说为什么。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-14T12:41:13.663

pandas DataFrames 的另一种解决方案：

```
plot = df.plot(style='o-') # draw the lines so they appears in the legend
colors = [line.get_color() for line in plot.lines] # get the colors of the markers
df = df.interpolate(limit_area='inside') # interpolate
lines = plot.plot(df.index, df.values) # add more lines (with a new set of colors)
for color, line in zip(colors, lines):
  line.set_color(color) # overwrite the new lines colors with the same colors as the old lines 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-20T01:21:47.087

我遇到了同样的问题，但是遮罩消除了两者之间的点，并且线条被切割（我们在图片中看到的粉红色线条是唯一不是连续的 NaN 数据，这就是线条的原因）。这是屏蔽数据的结果（仍然有差距）：

```
xs  = df['time'].to_numpy()
series1 = np.array(df['zz'].to_numpy()).astype(np.double)
s1mask = np.isfinite(series1)

fplt.plot(xs[s1mask], series1[s1mask], ax=ax_candle, color='#FF00FF', width = 1, legend='ZZ') 
```

[![在此处输入图像描述](../Images/98cd46173774d372d436d178d4f7d3b3.png)](https://i.stack.imgur.com/6DN0v.jpg)

也许是因为我使用 finplot（绘制蜡烛图），所以我决定用线性公式 y2-y1=m(x2-x1) 制作缺少的 Y 轴点，然后制定生成 Y 值的函数缺失点之间。

```
def fillYLine(y):
    #Line Formula
    fi=0
    first = None
    next = None
    for i in range(0,len(y),1):
        ne = not(isnan(y[i]))
        next = y[i] if ne else next

        if not(next is None):
            if not(first is None):
                m = (first-next)/(i-fi) #m = y1 - y2 / x1 - x2
                cant_points = np.abs(i-fi)-1
                if (cant_points)>0:
                    points = createLine(next,first,i,fi,cant_points)#Create the line with the values of the difference to generate the points x that we need    
                    x = 1
                    for p in points:
                        y[fi+x] = p
                        x = x + 1
            first = next
            fi = i
        next = None
    return y

def createLine(y2,y1,x2,x1,cant_points):
    m = (y2-y1)/(x2-x1) #Pendiente
    points = []
    x = x1 + 1#first point to assign
    for i in range(0,cant_points,1):
        y = ((m*(x2-x))-y2)*-1
        points.append(y)
        x = x + 1#The values of the line are numeric we don´t use the time to assign them, but we will do it at the same order
    return points 
```

然后我使用简单的调用函数来填补 like 之间的空白`y = fillYLine(y)`，我的 finplot 就像：

```
x = df['time'].to_numpy()
y = df['zz'].to_numpy()
y = fillYLine(y)
fplt.plot(x, y, ax=ax_candle, color='#FF00FF', width = 1, legend='ZZ') 
```

[![在此处输入图像描述](../Images/00277d5b246427cf6b2f248ee9d80714.png)](https://i.stack.imgur.com/Ec0Sy.jpg)

您需要认为 Y 变量中的数据仅用于绘图，我需要操作中的 NaN 值（或从列表中删除它们），这就是我从 pandas dataset 创建一个 Y 变量的原因`df['zz']`。

注意：我注意到在我的情况下数据被消除了，因为如果我不屏蔽 X (xs) 值在图表中向左滑动，在这种情况下它们变为连续而不是 NaN 值，它绘制连续线但缩小到剩下：

```
fplt.plot(xs, series1[s1mask], ax=ax_candle, color='#FF00FF', width = 1, legend='ZZ') #No xs masking (xs[masking]) 
```

[![在此处输入图像描述](../Images/b979019d18e8faa1ef999dc253c24782.png)](https://i.stack.imgur.com/xAv7D.jpg)

这让我觉得有些人使用蒙版的原因是因为他们只绘制那条线，或者非蒙版数据和蒙版数据之间没有太大区别（很少有差距，不像我的数据有很多）。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-01-21T20:33:57.407

也许我错过了重点，但我相信 Pandas 现在[会自动执行此操作](http://pandas.pydata.org/pandas-docs/stable/visualization.html)。下面的例子有点牵强，需要上网，但中国的线路早年有很多空白，因此是直线段。

```
import pandas as pd 
import numpy as np 
import matplotlib.pyplot as plt

# read data from Maddison project 
url = 'http://www.ggdc.net/maddison/maddison-project/data/mpd_2013-01.xlsx'
mpd = pd.read_excel(url, skiprows=2, index_col=0, na_values=[' ']) 
mpd.columns = map(str.rstrip, mpd.columns)

# select countries 
countries = ['England/GB/UK', 'USA', 'Japan', 'China', 'India', 'Argentina']
mpd = mpd[countries].dropna()
mpd = mpd.rename(columns={'England/GB/UK': 'UK'})
mpd = np.log(mpd)/np.log(2)  # convert to log2 

# plots
ax = mpd.plot(lw=2)
ax.set_title('GDP per person', fontsize=14, loc='left')
ax.set_ylabel('GDP Per Capita (1990 USD, log2 scale)')
ax.legend(loc='upper left', fontsize=10, handlelength=2, labelspacing=0.15)
fig = ax.get_figure()
fig.show() 
```

# javafx-2 - 我如何让一个圈子在事件上移动？

> ID：14399690
> 
> 赞同：4
> 
> 时间：2013-01-18T13:09:13.297
> 
> 标签：javafx-2

我对 javafx 很陌生，所以我想在这里学习，所以请保持理智，不要拒绝我的问题，我真的很感谢任何帮助，谢谢！

我想知道如何移动一个对象，比如说这个圆圈在不同的事件上，比如按键或鼠标点击、鼠标移动等等。

```
Circle circle = new Circle();
circle.setCenterX(100.0f);
circle.setCenterY(100.0f);
circle.setRadius(50.0f); 
```

我是否需要使用我在 javafx 网站教程中看到的那个 KeyFrame 东西，或者它是如何工作的？

老实说，如果我没有感到如此失落，我就不会在这里问这个问题。所以要明确一点：使用事件移动我创建的对象的代码是什么？

编辑：通过移动它，我的意思是，按向上键，它向上移动几个像素，可能用另一个键对其进行变换，或者单击场景中的某个位置并使其立即移动到那里或以一定的速度移动到那里。我不必像使用 html5 画布那样重绘它，我希望，对吧？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-19T01:05:18.603

> 我不必像使用 html5 画布那样重绘它，我希望，对吧？

如果您使用的是标准[JavaFX 场景图](http://docs.oracle.com/javafx/2/scenegraph/jfxpub-scenegraph.htm)而不是[JavaFX 画布](http://docs.oracle.com/javafx/2/canvas/jfxpub-canvas.htm)，则不会。

> 我想知道如何移动一个对象，比如说这个圆圈在不同的事件上，比如按键或鼠标点击、鼠标移动等等

[移动Shape](http://docs.oracle.com/javafx/2/api/javafx/scene/shape/Shape.html)有三种方法：

1.  您可以调整形状的几何形状（例如圆的[centerX](http://docs.oracle.com/javafx/2/api/javafx/scene/shape/Circle.html#centerXProperty) /centerY 属性）。
2.  您可以调整形状的布局（例如它的[layoutX](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#layoutXProperty) /layoutY 属性）。
3.  您可以调整形状的平移（例如它的[translateX](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#translateXProperty%28%29) /translateY 属性）。

您可以将布局视为对象的起始位置；即它通常应该在它的父组的上下文中。您可以将其平移变换视为对象的临时位置（通常在对象被动画时使用）。

如果您使用的是布局窗格，例如[VBox](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/VBox.html)或[TilePane](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/TilePane.html)，那么布局窗格将为您处理设置子节点的布局坐标。如果您使用的是简单的[Group](http://docs.oracle.com/javafx/2/api/javafx/scene/Group.html)或普通的[Pane](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/Pane.html)或[Region](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/Region.html)，那么您有责任为子节点设置正确的布局值。

要侦听事件，请在[Nodes](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html)或[Scenes上设置](http://docs.oracle.com/javafx/2/api/javafx/scene/Scene.html)[事件处理程序](http://docs.oracle.com/javafx/2/events/jfxpub-events.htm)。

这是一个演示上述内容的[小型示例应用程序。](https://gist.github.com/4569878)它将要移动的对象放置在 a 内，并根据各种事件`Group`修改对象在 a 内的位置。`Group`

![运动事件](../Images/c4ac625b760f6a0582fd6e6937c29f84.png)

# c++ - send() 不传递所有字节？

> ID：14399691
> 
> 赞同：3
> 
> 时间：2013-01-18T13:09:17.597
> 
> 标签：c++, networking, tcp, byte, winsock

为什么不保证交付您请求`send()`的`winsock`所有字节？

这是 TCP，它正在阻塞套接字。

同样，在非阻塞时也会发生这种情况。你怎么能保证你发送的一切？

我注意到`recv()`做同样的事情。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T13:11:03.810

If it didn't send everything, just call `send` again on the rest. If blocking, you can do it immediately. If non-blocking, you can either wait or use a socket discovery method (like `select` or I/O completion ports). The same goes for `recv`. If you didn't get all you wanted, call `recv` again. This is one of the reasons both `recv` and `send` return the number of bytes sent or received.

The number of bytes you pass to `send` or `recv` is just a limit. It can send less than that (though, unless non-blocking, usually won't). But it can definitely receive less than that. (The OS has no control over how much data it receives or when it receives it.)

TCP is implemented for you. But if you have an application protocol that involves application-level messages, then the application has to implement them. It won't happen by magic. TCP doesn't "glue the bytes together" into a message for you. TCP is a byte-stream protocol, not a message protocol. If you want messages, you have to implement them.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T13:17:59.730

这种行为是“设计使然”。

您可以使用外部循环，如本例所示：

```
int sendBuffer (SOCKET ClientSocket, const char *buf, int len, int flags) 
  {
    int num_left = len;
    int num_sent;
    int err = 0;
    const char *cp = buf;

    while (num_left > 0) 
      {
        num_sent = send(ClientSocket, cp, num_left, flags);

        if (num_sent < 0) 
          {
            err = SOCKET_ERROR;
            break;
          }

        assert(num_sent <= num_left);

        num_left -= num_sent;
        cp += num_sent;
      }

    return (err == SOCKET_ERROR ?  SOCKET_ERROR : len);
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T13:13:03.763

`send` tells you what it was able to send via its return value. Loop until `send` has cumulatively sent all the data or returns an error.

# java - 通过 REST Json 的 JavaFX2 客户端-服务器

> ID：14399693
> 
> 赞同：0
> 
> 时间：2013-01-18T13:09:22.517
> 
> 标签：java, json, rest, client-server, javafx

使用 Json 数据包进行通信创建 JavaFX 客户端-服务器应用程序的方法是什么？我应该在两个不同的远程 JavaFX 实例（比如在聊天中）之间实时交互，从一侧发送到另一侧 Json 格式的消息。有这样做的例子吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:35:53.480

如果您需要对如何完成此操作进行高级概述，那么您需要一个用于 http 的库（您想通过 http 发送 JSON，对吗？）和一些用于处理 JSON 的库。我认为 JavaFX2 在这个问题上不是这样，你可以在任何 Java 应用程序中做到这一点。

有一个名为[Apache HttpComponents](http://hc.apache.org/)的好东西可以与 http 一起使用。他们网站上的教程应该为您提供一些关于如何实现服务器和客户端功能的提示。

要使用 JSON，您可以使用例如 Google 的 GSON 库。可以在[此处](https://stackoverflow.com/questions/338586/a-better-java-json-library)找到有关 JSON 库的一些讨论。

乍一看，您需要形成一个代表 JSON 的 Java 对象，转换为 String 并将其打包成一个 http POST 请求。

希望这会有所帮助。

# ruby-on-rails - 修改后的destroy方法的优势？（敏捷 RoR）

> ID：14399706
> 
> 赞同：0
> 
> 时间：2013-01-18T13:10:15.160
> 
> 标签：ruby-on-rails, ruby, agile

我正在[使用 Rails 进行敏捷 Web 开发](https://rads.stackoverflow.com/amzn/click/com/1934356549)

在 E3 部分中，它说要替换以下方法：

```
def destroy
  @cart = Cart.find(params[:id])
  @cart.destroy 
```

和

```
def destroy
  @cart = current_cart
  @cart.destroy 
```

在哪里

```
def current_cart
  Cart.find(session[:cart_id])
rescue ActiveRecord::RecordNotFound
  cart = Cart.create
  session[:cart_id] = cart.id
  cart
end 
```

我的问题是，使用第二种方法比第一种方法有什么优势？我看不到第二个会失败的任何情况？这是从以下位置调用方法：

```
<%= button_to 'Delete Cart', method: :destroy %> 
```

从购物车视图中。它不是总是隐含地传递正确的cart_id吗？或者这个修改是为了将来使用而销毁，例如当我们试图从另一个视图中删除购物车时？如果后一种解释是正确的，我们是否需要始终将 id 存储在 :session 哈希中？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:22:32.947

对于初学者来说，它提供了一些保护，防止有人恶意修改 url 和`passing &cart_id=ID_TO_CART_I_DONT_OWN`. 请参阅[https://www.owasp.org/index.php/Top_10_2010-A4](https://www.owasp.org/index.php/Top_10_2010-A4)。

您还可以通过从会话中获取购物车来为自己节省数据库查找[尽管默认情况下，rails 非常适合使用 db 缓存]。关于它可能会失败，如果在您点击“删除购物车”按钮时记录不再存在怎么办？`Cart.find(params[:id])`将引发您未处理的异常，第二种方法将处理异常并安静地失败；这不一定总是一件好事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:23:02.580

由于您正在处理实时应用程序，例如`Shopping Cart`，很有可能两个或多个用户同时访问该应用程序并购买相同的产品。虽然`params[:id]`每个用户都是唯一的，但任何用户都可以通过黑客恶意进入其他用户，这将导致严重的缺陷。

这样，您的应用程序为每个用户创建了一个**会话**，您可以在其中存储少量数据，这些数据将在该用户的请求之间持久化。为每个用户管理会话可以保持一致性，并且有一个很好的资源管理。这不会造成任何破坏。

# compiler-errors - 需要普通的 Coffeescript 编辑器

> ID：14399712
> 
> 赞同：3
> 
> 时间：2013-01-18T13:10:49.440
> 
> 标签：compiler-errors, coffeescript, editor

我必须在工作中使用 CoffeeScript。这是一个很大的障碍，因为我经常不明白它应该写什么以及错误在哪里。

目前我只使用在线转换工具，如 js2coffee.org 和桌面应用程序 - RubyMine 编辑器。两者都很难给我提示语法应该是什么，甚至在源文本中实际错误所在的位置。

您能否推荐一些像 js2coffee.org 那样具有完美错误反馈甚至更好的像样的 CoffeeScript 编辑器 - 可以即时转换为 JavaScript？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T13:28:30.653

实际上，一个不错的调试器仍然是使用 Coffeescript 时的一大缺点。但是，我发现使用在 Node.js 上运行的 Coffeescripts 模块就足够了。有几个步骤要征服，但当你最终到达那里时，Coffeescript 的工作环境非常愉快。

下载并安装[NodeJS](http://nodejs.org/)以及[npm](https://npmjs.org/)，这通常是 NodeJS 附带的。跑

```
npm install -g coffee-script 
```

在你的命令行上安装 Coffeescript。移动到您想要的目录，创建一个`test.coffee`文件并运行

```
coffee -cwb test.coffee 
```

现在您可以使用您喜欢的编辑器（我更喜欢[Notepad++](http://notepad-plus-plus.org/)）编辑 test.coffee 文件，并且编辑后的 ​​coffeescript 文件在任何更改时都会被编译。最重要的是，Coffeescript 模块会输出一些或多或少有用的错误消息，以更有效地解决您的问题。

有关如何从命令行运行 Coffeescript 的更多信息，请查看[Coffeescript 的主页](http://coffeescript.org/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T04:25:05.340

看起来这个 JetBrains 功能可能正适合您。

[http://confluence.jetbrains.com/display/RUBYDEV/Debugging+CoffeeScript+Code](http://confluence.jetbrains.com/display/RUBYDEV/Debugging+CoffeeScript+Code)

# android - Android - 在 Nexus 7 上将文件写入卡的问题

> ID：14399713
> 
> 赞同：0
> 
> 时间：2013-01-18T13:10:49.573
> 
> 标签：android

我在 Nexus 7 上运行我的应用程序时遇到了一些麻烦，我想知道这个设备是否有某种怪癖可以解决，因为它在 HTC Wildfire S 上运行良好。

我正在尝试将midi文件写入SD卡，然后将相同的midi文件调用到android MediaPlayer中。问题是，该文件仅在我关闭应用程序后才写入，这对我的目的没有好处。

在 Wildfire 上，它会实时写入文件，然后立即将其调用到媒体播放器中，没有任何问题。

这是代码

```
try{
         mf.writeToFile ("/mnt/sdcard/temp.mid");

         }
         catch (IOException e){
         Toast.makeText(getApplicationContext(), e.getMessage(), Toast.LENGTH_SHORT).show();
         }

    String PATH_TO_FILE = "/mnt/sdcard/temp.mid";    
    mediaPlayer = new  MediaPlayer();

    try {
   mediaPlayer.setDataSource(PATH_TO_FILE);
   mediaPlayer.prepare(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:12:33.323

do not hard code the path.

Instead try this,

```
 String PATH_TO_FILE =   Environment.getExternalStorageDirectory().getAbsolutePath()+File.separator+"temp.mid"; 
```

the same way for writetoFile() also.

# php - 使用 PHP/Curl 登录 gmail

> ID：14399714
> 
> 赞同：2
> 
> 时间：2013-01-18T13:10:49.937
> 
> 标签：php, curl, gmail

我无法使用以下脚本登录 gmail 帐户：

```
$email="email@gmail.com";
$password="password";
$gacookie="";

$ch = curl_init();

$postdata="Email=$email&Passwd=$password&continue=https://www.mail.google.com";
curl_setopt ($ch, CURLOPT_URL,"https://www.gmail.com");
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6");
curl_setopt ($ch, CURLOPT_TIMEOUT, 60);
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt ($ch, CURLOPT_COOKIEJAR, $gacookie);
curl_setopt ($ch, CURLOPT_COOKIEFILE, $gacookie);
curl_setopt ($ch, CURLOPT_REFERER, 'https://www.google.com');
curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata);
curl_setopt ($ch, CURLOPT_POST, 1);
$result = curl_exec ($ch);
curl_close($ch);
echo $result;<br> 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:14:13.180

There is probably a redirect in there at which point your post data is gone.

Try adding `CURLOPT_POSTREDIR => 2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:14:04.413

Try using the open inviter. Open source

[http://openinviter.com](http://openinviter.com)

# javascript - 通过单击菜单更改正文 css

> ID：14399715
> 
> 赞同：0
> 
> 时间：2013-01-18T13:10:53.647
> 
> 标签：javascript, jquery, html, parallax

我目前正在开发我的新网站，我需要帮助。

当您打开该站点时，您会看到一个带有图标（类似于菜单栏）的登录页面，并且您无法滚动。
当您单击时，tadaaaa 它是一个单页设计。我正在考虑一种`javascript`/`jquery`一种脚本。

当前的CSS：

```
body {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
    overflow: hidden;
} 
```

示例`jquery`：

```
$("nav").on("click", function(e) {
    $('html, body').css('overflowY', 'visible');
} 
```

我对此很陌生，所以不要怪我写了奇怪的剧本。我正在努力学习`javascript`和`jquery`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:16:33.590

为此，您应该向页面添加一个类以指示其状态，然后更改样式表中的样式。

HTML：显示整个页面

恭喜。您正在查看页面

JS：

```
$(document).ready(function () {

  $("#loadpage").click(function () {
        $("html").addClass("loaded");
  });

}); 
```

CSS：

```
#page { display: none; }
html.loaded #page { display: block; }
html.loaded #loadpage { display: none; } 
```

演示：http: [//jsfiddle.net/FHPzb/](http://jsfiddle.net/FHPzb/)

# android - android上自动完成文本视图的光标适配器实现

> ID：14399719
> 
> 赞同：0
> 
> 时间：2013-01-18T13:11:12.377
> 
> 标签：android, textview, android-cursoradapter, android-cursor

在我的应用程序中，我需要在自动完成文本视图中填充联系人的电子邮件 ID。我使用内容解析器在光标中获得了电子邮件 ID。现在我必须为自动完成文本视图实现光标适配器，以便从光标填充电子邮件 ID。我已经尝试了以下代码，但它没有从光标加载电子邮件 ID。

我的光标适配器类如下：

```
public class AutoEmailAdapter extends CursorAdapter{
private LayoutInflater inflater;

public AutoEmailAdapter(Context context, Cursor c) {
    super(context, c);
    inflater = LayoutInflater.from(context);
    Log.e("adapter", "18");
}

@Override
public void bindView(View view, Context context, Cursor cursor) {
    Log.e("","bindview");
    String t = cursor.getString(1);
    Log.e("adapter @ 23", t);
    ((TextView) view).setText(t);
}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    Log.e("","newview");
    inflater = LayoutInflater.from(context);
    final TextView view = (TextView) inflater.inflate(android.R.layout.simple_dropdown_item_1line, parent, false);
    String te = cursor.getString(1);
    Log.e("@33",te);
    view.setText(te);
    return view;
}

@Override
public String convertToString(Cursor cursor) {
    Log.e("","convertTostring");
    return cursor.getString(1);
}

} 
```

android没有超越构造函数。未调用 bindView、newView 和 convertToString 方法。

在我的主类中，我按以下方式调用了适配器类：

```
 AutoEmailAdapter adapter = new AutoEmailAdapter(MainActivity.this, cursor_emailIds);
  emailId.setAdapter(adapter); 
```

我不知道我的代码没有在自动完成文本视图中加载电子邮件的原因。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:15:25.940

谢谢大家我已经通过使用资源光标适配器解决了。

# python - 使用 ListProperties 更改 dev_server 上的 GAE db.Model 架构？错误值错误

> ID：14399722
> 
> 赞同：3
> 
> 时间：2013-01-18T13:11:18.080
> 
> 标签：python, google-app-engine, google-cloud-datastore

我对更改 db.Model 模式的理解是，如果您添加一个属性然后尝试获取没有该属性的旧实体，这“无关紧要”。

实际上，将以下属性添加到我`SiteUser`在 dev_server 上运行的 db.Model 中：

`category_subscriptions = db.StringProperty()`

仍然允许我检索没有此属性的旧 SiteUser 实体（通过 GQL 查询）。

但是，将属性更改为列表属性（StringListProperty、ListProperty 之一）：

`category_subscriptions = db.StringListProperty()`

当我尝试检索用户时导致以下错误：

`BadValueError: Property category_subscriptions is required`

这是在 SDK 开发服务器版本 1.7.4 上。为什么会这样，我将如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:05:09.240

这是我让它在 dev_server 上运行的解决方法：

1）在生产中更新您的模型并部署它

2) 使用`appcfg.py download_data`并获取您已更新类型的所有实体

3) 使用`appcfg.py upload_data`所有实体并将其推送到本地数据存储中

瞧.. 您的本地数据存储实体现在可以在不生成的情况下检索`BadValueError`

# database - 具有多个数据库的 ERD

> ID：14399730
> 
> 赞同：1
> 
> 时间：2013-01-18T13:11:44.013
> 
> 标签：database, database-design, erd

我想知道，如何设计两个不同数据库的 ERD 图，它们之间有很强的逻辑联系。

更具体地说，我喜欢对 evoting 系统的数据库进行建模。

出于安全原因，我有两个不同的数据库。第一个包含实体投票者、候选人、投票，第二个数据库只有一个包含三个值的表。第一个是加密的候选人ID、投票号和选民ID。

我想对这两个数据库进行建模。据我所知，ER 仅用于对一个数据库进行建模。我如何也可以为第二个数据库建模？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:56:09.243

逻辑实体关系图不显示特定的数据库或数据库。您只需对实体和关系进行建模。

```
Vote
--------
Vote Number
Voter ID
Candidate ID 

Voter
----------
Voter ID

Candidate
-----------
Candidate ID
Candidate Name

Office
---------------
Office ID
Office Name

Ballot Section
---------------
Ballot Section ID
Ballot ID
Office ID
Candidate ID

Ballot
------------
Ballot ID
Ballot Name 
```

我不确定您是否需要选民表。在选举中，选民信息与投票信息分开保存。

第一列是表的主键。

与主键同名的后续列是外键。

# matlab - 在输出函数的matlab gui中用uiwait处理结构为空

> ID：14399734
> 
> 赞同：2
> 
> 时间：2013-01-18T13:12:15.190
> 
> 标签：matlab, user-interface, matlab-guide

我想根据这个[示例代码](http://www.mathworks.de/de/help/matlab/creating_guis/making-multiple-guis-work-together.html#brav1u1)使用 uiwait在 guis 之间共享数据。但是，如果我称`uiwait(handles.figure1);`句柄结构在`uitest_OutputFcn`.

```
function varargout = uitest(varargin)

% Begin initialization code - DO NOT EDIT
gui_Singleton = 1;
gui_State = struct('gui_Name',       mfilename, ...
                   'gui_Singleton',  gui_Singleton, ...
                   'gui_OpeningFcn', @uitest_OpeningFcn, ...
                   'gui_OutputFcn',  @uitest_OutputFcn, ...
                   'gui_LayoutFcn',  [] , ...
                   'gui_Callback',   []);
if nargin && ischar(varargin{1})
    gui_State.gui_Callback = str2func(varargin{1});
end

if nargout
    [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
else
    gui_mainfcn(gui_State, varargin{:});
end
% End initialization code - DO NOT EDIT

% --- Executes just before uitest is made visible.
function uitest_OpeningFcn(hObject, eventdata, handles, varargin)

% Choose default command line output for uitest
handles.output = hObject;

% Update handles structure
guidata(hObject, handles);

% UIWAIT makes uitest wait for user response (see UIRESUME)
% --> enable to generate error
% uiwait(handles.figure1);

% --- Outputs from this function are returned to the command line.
function varargout = uitest_OutputFcn(hObject, eventdata, handles) 
% varargout  cell array for returning output args (see VARARGOUT);
% hObject    handle to figure
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Get default command line output from handles structure
varargout{1} = handles.output;

% --------------------------------------------------------------------
function menuClose_Callback(hObject, eventdata, handles)
% hObject    handle to menuClose (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

uiresume(handles.figure1);

close(handles.figure1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:41:48.843

关闭函数中不得删除图形：

```
% --- Outputs from this function are returned to the command line.
function varargout = uitest_OutputFcn(hObject, eventdata, handles) 
% varargout  cell array for returning output args (see VARARGOUT);
% hObject    handle to figure
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Get default command line output from handles structure
varargout{1} = handles.output;

% The figure can be deleted now
delete(handles.figure1);

% --------------------------------------------------------------------
function menuClose_Callback(hObject, eventdata, handles)
% hObject    handle to menuClose (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

close(handles.figure1);

% --- Executes when user attempts to close figure1.
function figure1_CloseRequestFcn(hObject, eventdata, handles)
% hObject    handle to figure1 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hint: delete(hObject) closes the figure
if isequal(get(hObject, 'waitstatus'), 'waiting')
    % The GUI is still in UIWAIT, us UIRESUME
    uiresume(hObject);
else
    % The GUI is no longer waiting, just close it
    delete(hObject);
end 
```

# c# - Server Control Render inside Server Control

> ID：14399735
> 
> 赞同：0
> 
> 时间：2013-01-18T13:12:15.693
> 
> 标签：c#, servercontrols

I have 2 server control

One create Items the other one create a List of items.

So i have a public Item with a viewstate in the first in the page when i add the server control name (Server control name 1) to a panel it render (with a `createChildControls`) and add to a public `List<Server Name 1>` that is a view state in the server control 2.

so i make

```
foreach  (ServerControl_1 a in ServerControl_2)

output += a; 
```

the result is the namespace of the item not the text.

So i must have to render it first and then add to the output... But i just dont know how...

Someone help me?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:21:13.330

使用类似的东西

```
 protected String displayName(Object item)
        {
            String name = "";
            if (item != null && item.hasOwnProperty("name")) {
                name = item["name"];
            }
            return name;
        } 
```

在你的 for 循环中调用它。

```
output += displayName(a) 
```

# php - php mvc structure with database variables

> ID：14399743
> 
> 赞同：2
> 
> 时间：2013-01-18T13:13:00.260
> 
> 标签：php, mongodb, naming-conventions, variable-assignment, nosql

I am *experimenting* on a **sort-of** MVC structure PHP project.

Suppose I have a model for users, that looks like this: (I am using **pseudocode**)

```
function addUser($name, $surname) {
  mysql_query("insert into users name=$name surname=$surname");
  return true;
}

function getUser($id) {
  $object = mysql_query("select from users where id=$id limit 1");
  return $object;
} 
```

and in my controller I have:

```
$user = getUser("foo"); 
```

so I can access user information to be printed out easily like this:

```
$name = $user["name"]; 
```

so far, so easy. The problem which I suppose I might face if I keep going this way is that, if one day I will have to change the column 'name' into say, just 'n', all the components that are getting the object returned by getUser() will have to be modified to reflect that change.

How does it work in this cases to avoid such problem?

P.S. I know this is not exactly MVC but a VMC-ish structure; it's just to get the idea on how to do it. If I made any mistake explaining please be patient and don't freak out: we are humans and not robots and most importantly we are here to LEARN.

* * *

why I said that is that I am actually not using mysql but mongodb, which as the object structure like this: {name:"foo", surname:"fuu"} that is basically repeated for every object so I thought that to save space in the db I might just decide to change it one day from 'name' to just 'n', saving 3 ascii chars per object! It's out of the scope of the question but I think you understand now why I need to use this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:35:57.657

您可以在模型类中使用 getter 和 setter：

```
<?php
class User {

    public function setName($name) {
        $this->n= $name;
    }

    public function getName() {
        return $this->n;
    }
} 
```

或者你可以使用`__get`和`__set`魔法函数：

```
<?php
class User {

    public function __get($key) {
        if ($key == 'name') {
            return $this->n;
        }
        else {
            return $this->$key;
        }
    }

    public function __set($key, $value) {
        if ($key == 'name') {
            $this->n = $value;
        }
        else {
            $this->$key = $value;
        }
    }
} 
```

但是，您真的*不*应该更改数据库列名，绝对*不*应该更改像“n”这样的单个字母。这种模棱两可只是**自找麻烦**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:49:30.717

您希望将数据库的结构与您在其余代码中使用的变量/索引/属性名称*分离*，在系统的这两个部分之间有一个绝缘层，可以在它们之间进行转换。最好使用对象来完成：

```
class User {

    protected $name;

    public function __construct($name) {
        $this->setName($name);
    }

    public function setName($name) {
        $this->name = $name;
    }

    public function getName() {
        return $this->name;
    }

} 
```

从数据库获取数据的函数现在不会按原样返回该数据，具体取决于数据库今天返回数据的感觉，但它返回特定的已定义对象的实例`User`：

```
function getUser() {
    $data = query('SELECT ...');
    return new User($data['n']);
} 
```

如果您更改数据库中的列名，您只需更改从数据库获取的这一层中的代码，而不是在整个代码库中的任何地方。您可以在没有对象的情况下完成这项工作，而是使用创建定义格式的数组结构的函数。但是很难超越对象为您提供的*类型安全性。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T13:51:53.130

我想对您的代码提出一些建议。但至于更改列名，为什么要更改它呢？如果你做了是，你必须更正查询。我有点担心您的函数的卫生以及 PHP 5.0 + 中已删除的 mySQL 的使用。您可能想查看 mySQLi，它是等效的替代品。我在基于过程的代码方面不是那么出色，所以如果我犯了任何错误，请原谅我。

使用您的函数，无需返回 true；或返回 mysql_query。这些是在没有回报的情况下遵守的。此外，在您的查询中，最好将关键字大写，例如：`SELECT, FROM, WHERE, INSERT INTO, LIMIT`. 即使您选择了所有列，也应始终声明您的选择列。查询字符串示例：

```
"SELECT * FROM table WHERE id = '{$id}'"//Variables should be entered in this way
//I don\'t know why they just do lol 
"SELECT id,name FROM table WHERE table.id = '{$id}'"//This will only return the id and name from the table named table 
```

因此，对于您的脚本，我建议使用 mysqli 程序样式。这是程序样式：

```
$DBH = new mysqli('localhost','user','pass','optional Database selection');
mysqli_select_db($DBH,'selection of the data can be done this way also');
mysqli_prepare($DBH,"SELECT * FROM table WHERE id = ?");//note the question mark instead of your $id variable.
mysqli_bind_param($DBH,'i',$id);//this replaces your question mark with the variable $id. This is a lot more sanitised that your example.
//bind_param() expects 3 parameters. first the database, second the variables datatype
// 'iiss' would be int int string string third comes your vars 
mysqli_execute($DBH);
mysqli_bind_results($tableID,$tableName,$otherColumns);//your columns will be returned in order. Selecting * will return all columns. Selecting id,name will return only id and name column.
while(myslqi_fetch_result($DBH)){
    //this is basically saying while there are results fro the database.
    echo $tableID.' '.$tableName.' '.$otherColumns;
} 
```

现在，我还建议您使用 OOP（面向对象程序）来构建函数。看起来有点像这样：

```
Class users{
    private $DBH;//makes sure our database handler is secure 
    public function __construct(){
        //public so that this function is ran at the start of the class
        $this->DBH;//how to access your variables and functions in OOP in other words
        //$addUser->DBH; which would be private and inaccessible. 
        $this->DBH = new mysqli('local','user','pass','database');
    }
    public function addUser($name,$surname){
        $query = $this->DBH->prepare('INSERT INTO users VALUES(NULL,?,?');
        $query->bind_param('ss',$name,$surname);
        $query->execute();
        //you can also run a check query returned true function :)
    }
    public function returnUser($id){
        $data = array();
        $query = $this->DBH->prepare('SELECT * FROM users WHERE id = ?');
        $query->bind_param('i',$id);
        $query->execute();
        $query->bind_result($ID,$name,$surname,$other);
        while($query->fetch_result()){
            $data[] = array('ID'=>$ID,'name'=>$name,'surname'=>$surname,'other'=>$other);
        }
        return $data;
    }
}
$userHandler = new users(); //adding an instance of the class users();
$usersInfo = $userHander->returnUser($id);//userinfo will now contain an array of arrays of users that have an id of $id. Depends how you use it :p 
```

抱歉，如果我一口气做了太多，或者你已经知道了，我只是个家伙，哈哈，我希望我对你的程序的 mysqli 查询和结构有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T15:12:02.480

> 为什么我这么说是因为我实际上不是使用mysql而是mongodb，它作为像这样的对象结构：{name:"foo", surname:"fuu"} 基本上对每个对象都重复所以我认为这是为了节省空间在数据库中，我可能决定有一天将其从“name”更改为“n”，每个对象节省 3 个 ascii 字符！

哇整整三个 ASCII 字符。

对不起，只是有些人真的把 MongoDB 的整个存储东西走得太远了。

它不会减少索引的大小，也不会停止碎片化，事实上由于奇怪的文档大小，它可能会增加这一事实（导致文档大小不规则的字段的非标准名称）。当 MongoDB 来映射文件时，如果您的系统在虚拟内存方面很难完成，那么您将看到的唯一真正好处可能是几个字节。

认真地为自己省去麻烦，我怀疑您是否会达到您的收藏包含如此多文档的程度，以至于这种微优化实际上会产生效果；我的意思是我们在这里谈论的可能是在一个分片上的数十亿个文档（你为什么要这样做？？）。

`username`事实是大多数字段缩短已经发生，因为人们有一种奇怪的想法，即出于某种原因，几个字节（如和之间的差异`n`）将对存储和内存使用以及索引大小产生一些深远的影响（MongoDB 不会将键名存储在索引...）以及所有虚假的东西，但实际上并非如此。

如果你要命名一个字段`my_awesome_really_long_field_that_is_good`，那么是的，很容易有一个案例来缩短你的字段，但是通常，理智的命名字段和单个字母字段之间的区别是，在大多数情况下，nout。

单字母字段的用例减少到如此之少，以至于我怀疑您是否会达到使用它对您有益的程度，即使您这样做了，您也会为像 Doctrine 或您的 ORM 这样的 ORM 处理太多数据自己以高效的方式执行此操作，因此无论如何这个问题都存在。

所以我不是在开玩笑，不要理会这个。您在 PHP 应用程序中浪费的资源将比在数据库端节省的资源多。

# php - PHP三元运算符错误

> ID：14399745
> 
> 赞同：2
> 
> 时间：2013-01-18T13:13:08.637
> 
> 标签：php, ternary-operator

> **可能重复：**
> [PHP 三元运算符未按预期工作](https://stackoverflow.com/questions/14214427/php-ternary-operator-not-working-as-expected)

我不知道我的代码有什么问题？我的 PHP 版本是 5.4.7。

```
$b = 'a';
$c = 'd';
echo $b == 'a' ? 2: $c == 'a' ? 1 : 0; 

output 1 
```

正确答案应该是2.....

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T13:15:09.743

您需要添加一些括号。

```
$b = 'a';
$c = 'd';
echo ($b == 'a') ? 2 : ($c == 'a' ? 1 : 0); 
```

# jquery - Jquery append don't function in Firefox

> ID：14399748
> 
> 赞同：0
> 
> 时间：2013-01-18T13:13:20.213
> 
> 标签：jquery, firefox, incompatibility

Please, why this code dont function in Firefox?

```
var path = 'http://www.facedabeauty.com.br/teste/0/display/' 
var i = 2; 

$('.gallery a').click(function(){
    event.preventDefault();
    $('.lightbox').removeClass('preloader').fadeIn();
    $('.display').html('<img src="'+path+i+'.jpg" />').addClass('imgdisplay'); 
```

In Mozilla,is oppened the image in browser, not append the img tag.

You can see an example in: [http://codepen.io/Mpleandro/full/CaAip](http://codepen.io/Mpleandro/full/CaAip)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T13:15:47.360

你打电话`event.preventDefault()` ，这会产生一个错误，因此其余的代码不会被执行。你需要改变这个：

```
$('.gallery a').click(function(event){
        event.preventDefault(); 
```

jQuery 将其事件对象作为第一个参数传递给回调函数。全局对象`event`并不存在于每个浏览器中，因此不应使用。始终使用作为第一个参数传递给回调函数的 jquery 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:16:17.827

更改`event.preventDefault()`为`e.preventDefault()`，并将`e`参数添加到您的匿名函数回调中。

```
var path = 'http://www.facedabeauty.com.br/teste/0/display/' 
var i = 2; 

$('.gallery a').click(function(e){
    e.preventDefault();
    $('.lightbox').removeClass('preloader').fadeIn();
    $('.display').html('<img src="'+path+i+'.jpg" />').addClass('imgdisplay'); 
```

# security - Moving old passwords to new hashing algorithm?

> ID：14399750
> 
> 赞同：13
> 
> 时间：2013-01-18T13:13:32.320
> 
> 标签：security, passwords

I'm switching a site over to rails. It's quite a large site with 50k+ users. The problem is, the existing password hashing method is *extremely* weak. I have two options:

1) Switch to a new algorithm, generate random passwords for everyone and then email them those passwords and require the change immediately after

2) Implement new algorithm but use the the old one before and then hash the result. For example:

Password: abcdef =Algorithm 1=> xj31ndn =Algorithm 2=> $21aafadsada214

Any new passwords would need to go through the original algorithm (md5) and then have the result of that hashed if that makes any sense? Is there any disadvantage to this?

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-18T15:46:16.297

通常不需要重新设置密码，只需等待用户下次登录即可。

1.  首先尝试使用新算法验证输入的密码。新密码和已转换的密码将不再需要更长的时间进行验证。
2.  如果不匹配，则将其与旧的哈希算法进行比较。
3.  如果旧的哈希值匹配，那么您可以计算并存储新的哈希，因为您知道密码。

每个密码存储系统都必须具有切换到更好的哈希算法的选项，您的问题不是一次性迁移问题。像 BCrypt 这样好的密码哈希算法有一个成本因素，有时您必须增加这个成本因素（因为更快的硬件），然后您需要与迁移所需的完全相同的过程。

如果您的第一个算法真的很弱，并且您想立即提供更多保护，那么使用散列旧哈希的选项 2 是一件好事。在这种情况下，您可以计算双哈希并用新的双哈希替换数据库中的旧哈希。

```
$newHashToStoreInTheDb = new_hash($oldHashFromDb) 
```

您还应该标记此密码哈希（[查看原因](https://security.stackexchange.com/a/103403/8343)），以便您可以将其识别为双重哈希。这可以在单独的数据库字段中完成，或者您可以包含您自己的签名。现代密码散列函数还包括算法的签名，以便它们可以升级到更新的算法，并且仍然可以验证旧的散列。该示例显示了 BCrypt 哈希的签名：

```
$2y$10$nOUIs5kJ7naTuTFkBy1veuK0kSxUFXfuaOKdOKf9xYT0KKIGSJwFa
___
 |
 signature of hash-algorithm = 2y = BCrypt 
```

验证将像这样运行：

1.  确定它是否是双重哈希。
2.  如果是新的哈希，调用新的哈希函数来验证输入的密码，就完成了。
3.  如果是双散列，则与双散列算法进行比较`new_hash(old_hash($password))`。
4.  如果双哈希值匹配，那么您可以计算并存储新的哈希。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-18T16:53:00.267

The simplest solution is probably to add a "password hash type" column to the database. Set it initially to "old"; when a user logs in, re-hash the password using the new algorithm and set the database type to "new".

A variant of this method is to store the hash type as *part of* the hash string. This works just as well, as long as you can unambiguously tell the different hash formats apart, and has the advantage that you can also include any other needed parameters (such as the [salt](http://en.wikipedia.org/wiki/Salt_%28cryptography%29) and the work factor for [key stretching](http://en.wikipedia.org/wiki/Key_stretching)) in the same string without having to add extra fields for each to your database.

For example, this is the approach typically used by [modern Unix crypt(3) implementations](http://en.wikipedia.org/wiki/Crypt_%28Unix%29#Modular_crypt.283.29_Algorithms) (and the corresponding functions in various high-level languages like [PHP](http://php.net/manual/en/function.crypt.php)): a classic DES-based (and horribly weak) password hash would look something like `abJnggxhB/yWI`, while a (slightly) more modern hash might look like `$1$z75qouSC$nNVPAk1FTd0yVd62S3sjR1`, where `1` specified the hashing method, `z75qouSC` is the salt and `nNVPAk1FTd0yVd62S3sjR1` the actual hash, and the delimiter `$` is chosen because it cannot appear in an old-style DES hash.

* * *

The method you suggest, where the new hashes are calculated as:

```
 hash = new_hash( old_hash( password ) ) 
```

*can* be useful in some cases, since it allows all existing records to be updated without having to wait for users to log in. However, it's only safe if the old hash function preserves enough of the entropy in the passwords.

For example, even a fairly old and weak cryptographic hash function, like unsalted [MD5](http://en.wikipedia.org/wiki/MD5), would be good enough, since its output depends on the entire input and has up to 128 bits of entropy, which is more than almost any password will have (and more than enough to withstand a brute force attack, anyway). On the other hand, trying to apply this construction using the old DES-based crypt(3) function as the old hash would be *disastrous*, since old crypt(3) would ignore all but the first 8 characters of each password (as well as the most significant bits of even those characters).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T13:24:43.290

您可以为所有使用新密码方法更新密码的用户创建一个新密码字段，并使用您的选项 2 更新每个人。

结合使用旧密码方法强制所有用户在登录时更新密码将自动将所有活动用户移动到新密码方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T13:25:32.267

另一种方法是在数据库的不同列中保持两个散列可用于迁移阶段：

*   如果登录时新哈希不存在，请检查旧哈希并保存新哈希并删除旧哈希。
*   如果新哈希存在，则仅使用它来验证。

因此，一段时间后，您将只剩下新的哈希值 - 至少对于那些至少登录一次的用户而言。

# hibernate - 关于 JBPM 的查询

> ID：14399752
> 
> 赞同：3
> 
> 时间：2013-01-18T13:13:32.667
> 
> 标签：hibernate, android-activity, process, jbpm, migrate

1）例如我们需要执行删除语句，我们在哪里设置它？在 JBPM 中还是在 Hibernate 中？

2) JBPM 是否需要特定的数据库？

3) 如何在 JBPM 中归档数据？

4) 如何在JBPM 中维护数据库？

5) 如何在 JBPM 中重新启动失败的活动/任务？公共和流程类型示例

6) 是否可以从 3.0 迁移到 5.0？

```
 6.1 )   Are they compatible?    
 6.2 )   How to migrate from 3.0 to 5.0
 6.3 )   What are the things/changes to be considered upon migration.
 6.4 )   What are the possible impacts of migrating from 3.0 to 5.0
 6.5 )    What would be the impact in the existing library of the 3.0? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T11:39:10.943

Q) 如何在 JBPM 中归档数据？

A）存档历史记录的集合或它们所在的物理位置 [https://community.jboss.org/message/622804#622804](https://community.jboss.org/message/622804#622804) 根据上面的链接，存储过程是存档旧数据的最佳选择不再需要了。或 - 不关心旧历史，只需删除/删除。- 有 BAM 报告，所以必须保留，然后迁移到不同的格式/位置/db，以便继续报告。- 应用企业流程（例如，我在一家应用数据仓库技术的企业工作）来收集和存储所有历史数据以报告 - 保留它，但要准备好最终必须扩大您的数据库机器！;-)

```
http://docs.jboss.com/jbpm/v3/userguide/jpdl.html 
```

JPDL 指定了一个 xml 模式和将所有流程定义相关文件打包到流程存档中的机制。部署流程档案可以通过 3 种方式完成：使用流程设计器工具、使用 ant 任务或以编程方式。

Q ) 如何在 JBPM 中重新启动失败的活动/任务？

A ) 任务永远不会自动启动，而总是手动启动。如果服务器关闭时任务正在进行中，则事务应回滚并且该任务应再次在任务列表中可用。如果 jBPM 与调用方法（在第一种情况下发出信号的方法）在同一个事务中运行，则也将回滚。因此完全支持“事务管理”。

Q ) 是否可以从 3.0 迁移到 5.0？它们兼容吗？如何从 3.0 迁移到 5.0 迁移时需要考虑哪些事项/更改。从 3.0 迁移到 5.0 的可能影响是什么

A ) 是的，可以从 3.0 迁移到 5.0，实际上迁移项目正处于开发阶段。因此，它是否兼容，我们目前无法对此发表评论。迁移的步骤也将在以后知道，哪些事情/需要考虑的变化也将在以后知道，以及它的影响。

作为参考，请点击此链接，因为此快速指南可以为您提供帮助，您将在此处获得疑问/问题的答案。

```
http://www.schabell.org/2011/10/jbpm-migration-tooling-available-in.html

www.schabell.org . 
```

Q ) 例如我们需要执行删除语句，我们在哪里设置它？在 JBPM 中还是在 Hibernate 中？JBPM 是否需要特定的数据库？如何在 JBPM 中维护数据库？

A ) 现在 JBPM 与 Spring 的集成仍然存在，所以如果我们能够做到这一点，那么我们可以轻松地在项目中执行任何数据库查询，并且 JBPM 非常灵活，我们可以通过更改持久性来使用项目中的任何数据库.xml文件，即通过添加我们需要的数据库方言和驱动程序，默认情况下jbpm使用H2数据库。

Q ) 现在我们可以在我们的项目中使用两个数据库吗？

一种 ） -

Q) 如何在 JBPM 中维护数据库？

一种 ） -

# facebook - 从公共 Facebook 页面查询旧链接返回一个空集

> ID：14399754
> 
> 赞同：0
> 
> 时间：2013-01-18T13:13:39.543
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我正在尝试获取一段时间前发布在公共 Facebook 页面上的链接，例如 2011 年。具体来说，facebook上的阿拉伯语CNN页面：http: [//www.facebook.com/CNNArabic](http://www.facebook.com/CNNArabic)

我试过的东西：
1-图形API，这样的查询：
[CNNArabic/links?fields=id,name,link,created_time&limit=25&until=2012-05-15](http://developers.facebook.com/tools/explorer?method=GET&path=102581028206/links?fields=id,name,link,created_time&limit=25&until=2012-05-15)

2- FQL
**SELECT link_id, url, created_time FROM link WHERE owner = 102581028206 and created_time < 1337085958 LIMIT 100**

当该日期或之前的页面上有数据时，两者都会给出一个空数据集。

我注意到的其他事情：
1-如果我将日期更改为 2013-01-17 （即昨天），它可以正常工作。
2-如果我将日期更改为 2012-12-17（大约一个月前），则会返回一个空数据集，但是如果我按照上面第 1 号查询中返回的数据集中的下一页链接，直到我通过这个日期我实际上得到了数据。

我尝试编写一直跟随下一页指针的代码，直到我到达我想要的日期的链接。但是我需要更旧的数据（比如 2011 年），结果集比现在早 2 或 3 个月就用完了，换句话说，没有更多的下一个链接被返回，所以我实际上永远无法获得旧数据。

简而言之：有没有一种方法可以查询在指定日期之前发布在公共页面上的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:28:43.933

`feed`在 Graph API 中查询页面的作品：

```
/102581028206/feed?fields=id,link,name,created_time&limit=25&until=2012-05-15 
```

这将返回所有帖子。*应该*有一种方法可以使用[字段扩展](https://developers.facebook.com/docs/reference/api/field_expansion/)来过滤它，但我无法得到我尝试工作的一些东西。

您可以仅在`stream`表格上使用 FQL 过滤链接：

```
SELECT message, attachment, created_time FROM stream WHERE source_id = 102581028206 
    AND created_time < strtotime('2012-05-15') AND type=80 LIMIT 10 
```

链接是`type=80`.

# magento - Magento: Rewritten controller can not redirect to Login page after Session time out

> ID：14399762
> 
> 赞同：0
> 
> 时间：2013-01-18T13:14:14.773
> 
> 标签：magento, magento-layout-xml

We have purchased the Embedded ERP Extension for Magento. We have customized it, and have rewritten few controllers also. here is a snippet from my config.xml file

```
 <admin>
    <routers>
        <mdn_extended>
            <!-- should be set to "admin" when overloading admin stuff (?) -->
            <use>admin</use>
            <args>
                <module>MDN_Extended</module>
                <!-- This is used when "catching" the rewrite above -->
                <frontName>mdn_extended</frontName>
            </args>
        </mdn_extended>
    </routers>

</admin>

  <global>
   <rewrite>
        <mdn_extended_advancedstock_warehouse>
            <from><![CDATA[#^/AdvancedStock/Warehouse/#]]>
            </from>
            <to>/mdn_extended/AdvancedStock_Warehouse/</to>  <!-- THIS IS AJAX CASE  -->
         </mdn_extended_advancedstock_warehouse>

        <mdn_extended_advancedstock_stockmovement>
            <from><![CDATA[#^/AdvancedStock/StockMovement/#]]></from>
            <to>/mdn_extended/AdvancedStock_StockMovement/</to> <!-- this is page REFRESH CASE   -->
        </mdn_extended_advancedstock_stockmovement>
    </rewrite>
 </global> 
```

Now we have an interesting issue here. in first rewrite case if you make any action like sorting / filtering on the grid. It sends and ajax call. In normal case, if session is gone the server returned a denied json like following format

```
{"ajaxExpired":1,"ajaxRedirect":"http:\/\/upgrade.magento.com\/index.php\/admin\/index\/login\/key\/90d3e0a32ecc2cb8e4183ecde51a0d54\/"} 
```

But in first case, the denied json comes in following format, the url is changed

```
{"ajaxExpired":1,"ajaxRedirect":"http:\/\/upgrade.magento.com\/index.php\/AdvancedStock\/index\/login\/key\/2e96b02d545ee3fddaea963ae6ec5d35\/"} 
```

Due to this user goes to 404 page.

**Now consider the second rewrite Rule.**

In this case, if session is timed out and if you make any actions on grid it refreshes the page but instead of going to login page it reports fatal error (trying to get username) After hours of Debugging we found that its the issue of layout handles.

In normal case, if route name is `module/controller/action` then magento loads layout handle `<module_controller_action>` from xml file also loads `<admin_index_login>`

due to that finally `<admin_index_login>` is rendered. In case of second rewrite magento is not loading `<admin_index_login>` handle therefore it shows the fatal error.

I'd appreciate any hint or help in this direction. If you guys need any other info I'll be happy to provide you. Thank you so much!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T09:29:37.197

有点迟到的答案，但我们在另一个覆盖 sales_order 操作的模块上也遇到了这个问题。我们基本上通过覆盖我们的自定义控制器的构造来解决它，如下所示：

```
protected function _construct() {
    Mage::getSingleton('core/session', array('name'=>'adminhtml'));
    if (!Mage::getSingleton('admin/session')->isLoggedIn()) {
        $this->_forward('adminhtml/index/login');
        return;
    } else {
       parent::_construct();
    }
} 
```

虽然这解决了手头的问题，但核心问题似乎与`Mage_Adminhtml_Controller_Action`拒绝操作调用的类有关`$this->_redirect('*/index/login');`，在您的情况下，它基本上重定向到`mdn_extended/index/login`. 这实际上可能会导致一些安全风险，所以我建议你总是像这样覆盖控制器，或者将核心类更改为重定向到`adminhtml/index/login`.

# maven - Hierarchical maven project versions

> ID：14399765
> 
> 赞同：0
> 
> 时间：2013-01-18T13:14:26.530
> 
> 标签：maven, version

I have an intricated Maven project with modules and subprojects up to four level of inheritance. Furthermore, some modules depend on modules which are not in the same "subtree" and I am wondering if I can avoid to express the version every time I have module dependency.

For example I have

```
a
 -b
   -c
 -d
   -e 
```

Supposing module `e` depends on `c`, what is the best way to specify the version in a DRY manner?

If inside the pom.xml of module `e` I don't specify which version of the `c` module I want, my build will fail. Is there a smart way to handle this versioning problem?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:34:40.097

groupId 和 artifactId 表示 maven 中的单个项目，但必须指定版本（或从父 pom 继承）以确定该项目 maven 需要引用的版本。它看起来是多余的，但它是必要的，特别是如果有许多不同的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T16:26:12.710

最好的方法是在项目根目录的 dependencyManagement 块中定义所有工件及其适当的版本号，例如：

```
a (pom.xml)
 -b
   -c
 -d
   -e 
```

具有以下内容：

```
<dependencyManagement>
  <dependencies>
    <dependency>
      <groupId>project</groupId>
      <artifactId>b</artifactId>
      <version>${project.version}</version>
    </dependency>

    <dependency>
      <groupId>project</groupId>
      <artifactId>c</artifactId>
      <version>${project.version}</version>
    </dependency>

    <dependency>
      <groupId>project</groupId>
      <artifactId>d</artifactId>
      <version>${project.version}</version>
    </dependency>

    <dependency>
      <groupId>project</groupId>
      <artifactId>e</artifactId>
      <version>${project.version}</version>
    </dependency>
  </dependencies>
</dependencyManagement> 
```

但是对于给定的结构：

```
a (pom.xml)
 -b
   -c
 -d
   -e 
```

a 必须包含模块列表（打包 pom）、b（打包 pom）和 d（打包 pom），这意味着 a、b 和 d 永远不会用作依赖项，这意味着您可以从上面的块中省略它们。

# c - 输入 Ctrl+C 时的信号问题

> ID：14399767
> 
> 赞同：2
> 
> 时间：2013-01-18T13:14:28.293
> 
> 标签：c, linux, signals

我是Linux编程的新手。我从一本书中复制了以下代码：

```
#include <signal.h>
#include <stdio.h>
#include <unistd.h>

void ouch (int sig)
{
    printf("OUCH! - I got signal %d\n", sig);
    (void) signal(SIGINT, SIG_DFL);
}

int main ()
{
    (void) signal(SIGINT, ouch);

    while(1)
    {
        printf("Hello World!\n");
        sleep(1);
    }

} 
```

输入时预计会打印一些东西。`Ctrl+C`但它除了 print 什么都不做`Hello World!`。

* * *

**编辑：**`Ctrl+C`很 抱歉，我已将`copy`. 很抱歉造成的麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:16:57.477

我的建议是不要`printf`在信号处理程序（*ouch*）中使用，它可能是未定义的行为。异步信号安全函数： [可以在信号处理程序手册页中调用的安全函数列表](http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html)。

> It is not safe to call all functions, such as printf, from within a signal handler. A useful technique is to use a signal handler to set a flag and then check that flag from the main program and print a message if required.

[Reference: [Beginning Linux Programming, 4th Edition](http://mirror.lzu.edu.cn/docs/ebooks/linux-unix/Linux_EN_Original_Books/%5BLinux%E8%8B%B1%E6%96%87%E5%8E%9F%E7%89%88%E5%9B%BE%E4%B9%A6%E7%B3%BB%E5%88%97%5D.WILEY-Beginning_Linux_Programming_Third_Edition.pdf),In this book exactly your code is explained, Chapter 11: Processes and Signals, page 484]

An additional helpful link:
Explanation: [**Use reentrant functions for safer signal handling**](http://www.ibm.com/developerworks/linux/library/l-reent/index.html#N101CA)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T13:50:26.393

Sorry, I can't see a question here... but I can guess what you are interested in.

printf() is a stateful function, thus not reentrant. It uses a FILE structure (variable name is 'stdin') to keep it's state. (It is like calling fprintf(stdin,format,...)).

That means, dependant on implementation and 'luck', calling printf() from a signal handler may print what you expect, but also may print nothing or may even crash or worse, smash your memory! Anything could happen.

So, just don't call functions from within a signal handler that are not explicitely marked 'signal-safe'. You will avoid lot's of headaches in the long term.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T13:19:37.160

Put an `fflush(stdout)` in your signal handler. It was just buffered, then the second SIGINT exited the program before the buffer could be flushed.

# c# - ASP.NET Web API 抛出异常

> ID：14399772
> 
> 赞同：3
> 
> 时间：2013-01-18T13:14:42.513
> 
> 标签：c#, javascript, asp.net-web-api

我试图从我的 Web API 控制器中抛出异常。问题是我的 JavaScript 代码没有取回任何数据。

```
throw new HttpResponseException(HttpStatusCode.NoContent); 
```

在我的 jQuery ajax 函数中，我没有得到任何回报。我从 ajax 调用中得到未定义的返回。那么基本上处理服务器错误的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:17:07.363

我现在觉得很愚蠢，我尝试了不同的 StatusCode，现在我真的得到了一些数据。我假设每个 statusCode 都会返回一些值。此状态代码字面上返回 NoContent。

# java - m2e wtp 部署测试依赖项

> ID：14399773
> 
> 赞同：1
> 
> 时间：2013-01-18T13:14:44.423
> 
> 标签：java, m2e, eclipse-wtp

我有一个多项目 Maven Web 项目，我正在使用 Eclipse June 和 M2E 和 WTP。我的`test`项目定义了一个`hibernate.properties`文件（在 /src/main/resources 中），其中包含与我的测试数据库的连接参数。如果我将`test`作为普通编译范围的 Maven 依赖项添加到主项目中，它`hibernate.properties`会成功部署（在 Eclipse 中，在 Web 部署程序集下，我看到`test`项目作为 JAR 部署到 WEB-INF/lib）。

现在，因为`hibernate.properties`只包含测试数据，我不希望它被真正部署。当我将依赖项的范围更改`test`为“测试”时，m2e 不再将其包含在部署程序集中。有什么办法可以改变这个吗？

我可以复制`hibernate.properties`到每个需要它的子项目中，但我希望能够避免需要复制各种测试配置文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:16:12.920

您可以移至`hibernate.properties`/src/test/resources。这是测试相关资源的地方，它们将在 process-test-resources 阶段复制到目标/测试类。

# iphone - 从基本视图控制器继承视图

> ID：14399774
> 
> 赞同：0
> 
> 时间：2013-01-18T13:14:44.527
> 
> 标签：iphone, objective-c

在我正在进行的一个项目中，我需要一个基本的 UI。所以我制作了一个baseViewController，在xib文件中制作了视图，并将baseViewController的视图设置为xib文件中的视图。

然后我想将该视图从 xib 文件继承到我的其他控制器，但它不起作用。这是不可能的吗？或者我只是错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:17:56.853

```
Example:

//common
 playagain = [[game alloc] initWithNibName:@"game" bundle:nil];

//depends on what you use
[[self view] addSubview: [playagain view]]; 
```

在其他控制器中使用它并确保将控制器导入其他控制器......该函数是 initWithNibName ，您的 nibName 进入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:50:06.597

我最终做的是创建一个带有 nib 的容器视图控制器，然后在需要时将所有其他视图控制器添加为子视图控制器，并在我完成它们时删除它们。请参阅本教程：[http ://www.cocoanetics.com/2012/04/ contains-viewcontrollers/](http://www.cocoanetics.com/2012/04/containing-viewcontrollers/)

# ruby - 从 1.8.7 (rvm) 升级到 ruby 1.9.3

> ID：14399776
> 
> 赞同：0
> 
> 时间：2013-01-18T13:14:47.840
> 
> 标签：ruby, rubygems, rvm

我必须从 ruby​​ 1.8.7 升级到 ruby​​ 1.9.3；我正在尝试安装炼油厂 cms，它使用 truncate_html gem，这取决于 ruby​​ (>= 1.9)。我已经安装了 ruby​​ 1.9.3-p374 而没有删除 ruby​​ 1.8.7。

我已经使用了该命令`rvm --default use 1.9.3`并发出了结果

```
Using /usr/share/ruby-rvm/gems/ruby-1.9.3-p374 
```

但是当我输入`ruby -v`它时，它又是 1.8.7。

如何升级到 ruby​​ 1.9.3？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:08:30.233

You are using RVM Ubuntu package which is broken, use this instructions to update [https://stackoverflow.com/a/9056395/497756](https://stackoverflow.com/a/9056395/497756)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T16:03:08.127

尝试

`ruby1.9.1 <filename.rb>`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-18T13:26:27.700

您是否在项目中使用 .rvmrc 文件？如果是这样，它可能会选择特定的 Ruby 而不是默认值。

`./.rvmrc`如果存在，则打开并删除（根据需要）任何`rvm use...`引用。

# ios - 通知中心的图像预览

> ID：14399781
> 
> 赞同：4
> 
> 时间：2013-01-18T13:15:13.400
> 
> 标签：ios, image, preview, notificationcenter

是否可以将图像添加到推送通知的有效负载中？我已经在照片和消息应用程序中看到了它。我希望这不是一些私有的 Apple API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-14T15:10:49.893

不可能

根据推送通知编程指南，有效负载最大大小不应超过 256 字节：

文档摘录：

> 有效负载长度——按网络顺序（即大端）的有效负载长度。有效负载不得超过 256 字节，并且不得以空值结尾。

这是 Apple 文档链接：

[https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/CommunicatingWIthAPS.html#//apple_ref/doc/uid/TP40008194-CH101-SW1](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/CommunicatingWIthAPS.html#//apple_ref/doc/uid/TP40008194-CH101-SW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T16:11:26.423

您可以尝试使用我使用的解决方法。

而不是推送图像\声音（大小限制问题），您可以只推送一个 URL 并捕获推送事件。之后，您有了要推送的图像\声音文件的地址，只需下载它（在收到的推送通知事件中）就可以了。

# php - 60秒后Nginx 504网关超时

> ID：14399782
> 
> 赞同：5
> 
> 时间：2013-01-18T13:15:18.233
> 
> 标签：php, nginx, fastcgi

> **可能重复：**
> [如何使用 Nginx 防止网关超时](https://stackoverflow.com/questions/561946/how-do-i-prevent-a-gateway-timeout-with-nginx)

我正在使用现有的 SOAP API 通过 XML 导入数据。有时，当 XML 太大时，我会在 60 秒后收到 504 网关超时。

我尝试在 nginx.conf 中将 fastcgi_read_timeout 设置为 300，但它不起作用。我已将 maximum_execution_time 更改为 3600

有人知道我如何更改超时？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T14:24:01.667

您需要设置 send_timeout 因为这指定了对客户端的响应超时。

```
send_timeout 300 
```

我认为是这种情况，因为 send_timeout 适用于客户端读取操作，这正是您想要做的。

# php - PHP 注意：未定义的属性：Tpl::$lbName

> ID：14399783
> 
> 赞同：0
> 
> 时间：2013-01-18T13:15:19.637
> 
> 标签：php, templates, properties, eval, undefined

我有一个类`Tpl`来使用这个函数挂载模板（template.php）

```
function Set($var, $value){
     $this->$var = $value;
  } 
```

调用函数的 php 文件，例如 (form.php)：

```
$t->Set("lbAddress","Address"); 
```

以及带有标签的模板的 html 文件 (template.html)

```
<tr><td>[lbAdress]</td></tr> 
```

要打印 html 我有这个函数 (template.php) - 通知指向这个函数

```
function Show_Temp($ident = ""){
     // create array
     $arr = file($this->file);
     if( $ident == "" ){
        $c = 0; 
        $len = count($arr); 
        while( $c < $len ){
           $temp = str_replace("[", "$" . "this->", $arr[$c]);
           $temp = str_replace("]", "", $temp);
           $temp = addslashes($temp);
           eval("\$x = \"$temp\";");
           echo $x;
           $c++;
        }
     } else {
        $c = 0;
        $len = count($arr);
        $tag = "*=> " . $ident;
        while( $c < $len ){
           if( trim($arr[$c]) == $tag ){
              $c++;
              while( (substr(@$arr[$c], 0 ,3) != "*=>" ) && ($c < $len) ){
                 $temp = str_replace("[", "$" . "this->", $arr[$c]);
                 $temp = str_replace("]", "", $temp);
                 $temp = addslashes($temp);
                 eval("\$x= \"$temp\";"); //this is the line 200
                 echo $x;
                 $c++;
              }
              $c = $len;
           }
           $c++;
        }
     }
  } 
```

如果模板 .html 有一行而我在 php 代码中`[lbName]`没有该行，我会收到错误。我找到的解决方案是添加类似的行，但是如果我在 HTML 中有 50 个我不在 PHP 中使用的标签，我必须添加所有 50 个。迁移到 PHP 5 后发生错误。有人可以帮助我吗？谢谢`$t->Set("lbName","Name");``PHP Notice: Undefined property: Tpl::$lbName in ../template.php(200) : eval()'d code on line 1``$t->Set("lbName","");``$t->Set("tag_name","");`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:24:54.240

也许更好的方法仍然是不依赖于动态评估`eval`（通常最好`eval`在可能的情况下避免），而是`[lbName]`在需要时直接替换为对象中存储的值。如果您可以替换`[lbName]`为`$this->lbName`，那么您当然也可以将其替换为`lBName`您即时查找的值吗？

* * *

但是，要回答您的原始问题：

如果我理解正确，您正在设置这样的值：

```
$t->Set('foo', 'bar'); 
```

并且 - 有效地 - 让他们像这样：

```
$t->foo; 
```

如果是这样，您可以实现一种`__get`方法来拦截属性引用并提供您自己的逻辑来检索值；例如：

```
public function __get($key)
{
    // You can adapt this logic to suit your needs.
    if (isset($this->$key))
    {
        return $this->$key;
    }
    else
    {
        return null;
    }
} 
```

在这种情况下，您最好使用关联数组作为后备存储，然后使用`__get`and`__set`访问它；例如：

```
class Template
{
    private $values = array();

    public function __get($key)
    {
        if (array_key_exists[$key, $this->values])
        {
            return $this->values[$key];
        }
        else
        {
            return null;
        }
    }

    public function __set($key, $value)
    {
        $this->values[$key] = $value;
    }
} 
```

# c# - 显示在导航站点地图节点中

> ID：14399791
> 
> 赞同：-2
> 
> 时间：2013-01-18T13:16:06.310
> 
> 标签：c#, c#-4.0

我正在使用 sitemapa 节点并绑定它。如果 SiteMapNode 的 ShowInNavigation 标志为 false，我不会显示它。SiteMap.RootNode.ChildNodes 没有 ToList 方法。这个怎么查询？

```
 SiteMapNodeCollection coll = SiteMap.RootNode.ChildNodes;
 rptMainMenu.DataSource = coll;
 rptMainMenu.DataBind(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:20:46.973

在转发器的事件处理程序中`ItemDataBound`，您可以访问当前项目实例并根据您自己的逻辑对输出进行条件化。或者，您可以首先过滤传递给 DataSource 的数据。所以，像其中任何一个......

条件中继器输出：

```
void rptMainMenu_ItemDataBound(Object Sender, RepeaterItemEventArgs e) {
  var data = e.Item.DataItem as SiteMapNode;
  if (data != null && data.ShowInNavigation) {
    // proceed to populate the repeater item
  } else {
    // do something else
  }
} 
```

在绑定之前使用 Linq 过滤节点：

```
SiteMapNodeCollection coll = SiteMap.RootNode.ChildNodes
  .Where(smn => smn.ShowInNavigation);
rptMainMenu.DataSource = coll;
rptMainMenu.DataBind(); 
```

# java - 使用 rest api 将块 blob 列表放在 azure 存储上时，指定的 XML 不是语法上有效的错误

> ID：14399792
> 
> 赞同：1
> 
> 时间：2013-01-18T13:16:10.447
> 
> 标签：java, xml, rest, azure, storage

我正在尝试将块 blob 列表放入 azure 存储，但出现“指定的 XML 在语法上无效”错误。我在java中使用REST API。

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<BlockList>
  <Latest>AA==</Latest>
  <Latest>AQ==</Latest>
  <Latest>Ag==</Latest>
  <Latest>Aw==</Latest>
  <Latest>BA==</Latest>
  <Latest>BQ==</Latest>
  <Latest>Bg==</Latest>
  <Latest>Bw==</Latest>
  <Latest>CA==</Latest>
  <Latest>CQ==</Latest>
  <Latest>Cg==</Latest>
  <Latest>Cw==</Latest>
  <Latest>DA==</Latest>
  <Latest>DQ==</Latest>
  <Latest>Dg==</Latest>
  <Latest>Dw==</Latest>
  <Latest>EA==</Latest>
  <Latest>EQ==</Latest>
  <Latest>Eg==</Latest>
  <Latest>Ew==</Latest>
  <Latest>FA==</Latest>
  <Latest>FQ==</Latest>
  <Latest>Fg==</Latest>
  <Latest>Fw==</Latest>
  <Latest>GA==</Latest>
  <Latest>GQ==</Latest>
  <Latest>Gg==</Latest>
</BlockList> 
```

我正在使用`HttpRequest.put(url).send(...)`

有什么想法可能是这里的问题吗？

更新：放置没有任何块的块列表时没有错误：

```
<?xml version="1.0" encoding="utf-8"?>
<BlockList>
</BlockList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-12T07:08:15.130

我在没有库的情况下直接针对 REST API 实施同样的问题。默认 API 版本（除非您指定替代版本）不支持此 xml 架构进行分段上传。切换到`x-ms-version: 2011-08-18`为我解决了这个问题。

# php - symfony 1.4 列表视图中的 AJAX 编辑

> ID：14399793
> 
> 赞同：0
> 
> 时间：2013-01-18T13:16:14.220
> 
> 标签：php, jquery, doctrine, symfony-1.4, symfony-forms

我正在寻找一种在 Symfony 1.4 管理员生成器后端 CRUD 界面的列表视图中编辑行的方法。

而不是单击编辑并进入编辑表单，然后必须单击保存并返回列表视图，我希望能够编辑列表视图本身中每一行的列条目。

我曾经有一篇关于这个的文章，我相信可能是一些德国或荷兰的工程师正在研究它，但在我的快速拨号崩溃后永远失去了它。

虽然我知道原则上将如何做到这一点，但是否有人知道任何资源或对如何做到这一点有任何实用的技术建议（如果它首先是可行的）？

# java - 替换 HTTP 请求字符串中的主机

> ID：14399799
> 
> 赞同：1
> 
> 时间：2013-01-18T13:16:53.200
> 
> 标签：java, regex, string, http

给定一个 HTTP 请求：

```
Client: GET /Default.aspx HTTP/1.1
Accept: image/gif, image/jpeg, image/pjpeg, image/pjpeg, application/x-shockwave
-flash, application/x-ms-application, application/x-ms-xbap, application/vnd.ms-
xpsdocument, application/xaml+xml, */*
Accept-Language: en-us
User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Trident/4.0; .NET
 CLR 2.0.50727; .NET CLR 3.0.04506.648; .NET CLR 3.5.21022)
Accept-Encoding: gzip, deflate
Host: logan-pc:8080
Connection: Keep-Alive 
```

如何以`Host`编程方式更改线路？我尝试过使用正则表达式（[以此](https://stackoverflow.com/questions/4154239/java-regex-replaceall-multiline)为指导）并且无法找出正确的模式。

这是我现在使用的模式：

```
".*?Host:.*?:" + <dynamic port number goes here>+ ".*?" 
```

编译模式时，我使用`Pattern.DOTALL`链接问题中建议的标志。

**更新：**我直接从浏览器获取请求字符串，这就是我现在使用的：

```
int len = 0;
while((len = ConnHandler.this.clientIn.read(buf)) > 0)
{
    System.out.println(".*?Host:.*?:" + ConnHandler.this.serverport+".*?");
    String in = new String(buf, 0, len);
    in.replaceAll(".*?Host:.*?:" + ConnHandler.this.serverport+".*?", "localhost:" + ConnHandler.this.serverport);
    //...
} 
```

但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:25:49.783

你的模式是正确的。这段代码对我有用：

```
String string = "Accept-Encoding: gzip, deflate\nHost: logan-pc:8080\nConnection: Keep-Alive";
System.out.println(string.replaceAll(".*?Host:.*?:8080.*?", "Host: NEW_HOST:8080")); 
```

输出：

> 接受编码：gzip，放气
> 
> 主机：NEW_HOST：8080
> 
> 连接：保持活动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-20T22:19:15.980

将：替换`/static/cache/gettheme_whiteboard_` 为：`/static/cache/gettheme_cust`

# php - 如何在没有fork的情况下在不同函数甚至不同进程之间使用PHP中的命名管道？

> ID：14399801
> 
> 赞同：4
> 
> 时间：2013-01-18T13:17:00.743
> 
> 标签：php, named-pipes, blocking

我想编写一个 Ajax Web 应用程序，具体来说是一个游戏。两个 Web 客户端必须通过 PHP 服务器相互通信。我解决这个问题的方法是在客户端和服务器以及服务器和客户端之间使用 Ajax。每个客户端使用 Ajax 创建一个单独的服务器进程。我希望这两个服务器进程通过 MySQL 和命名管道进行通信。我需要命名管道来立即响应整个应用程序。

我不能使用一个服务器进程，它首先创建一个管道，然后分叉成两个使用管道的进程。Web 应用程序在 Web 浏览器发送请求时创建服务器进程。所以，我需要命名管道，每个进程只知道命名管道的文件名。他们不能交换文件句柄（至少我不知道如何）。

我的问题是 PHP 方式的命名管道确实可以工作，只要它们在同一个函数中使用：

```
public function writeAndReadPipe_test(){
    $pipeA = fopen("testpipe",'r+');
    fwrite($pipeA, 'ABCD');

    $pipeB = fopen("testpipe",'r+');
    $content = fread($pipeB, 4);
    echo "[" . $content . "]<br>\n";
}

public function testingPipes_same_function(){
    posix_mkfifo("testpipe", 0777);
    $this->writeAndReadPipe_test();
} 
```

但是，当我使用不同的功能时，该**`fread($pipeB, 4)`**命令会阻止整个应用程序：

```
public function writePipe_test(){
    $pipeA = fopen("testpipe",'r+');
    fwrite($pipeA, 'ABCD');
}

public function readPipe_test(){
    $pipeB = fopen("testpipe",'r+');
    $content = fread($pipeB, 4);
    echo "[" . $content . "]<br>\n";
}

public function testingPipes_different_functions(){
    posix_mkfifo("testpipe", 0777);
    $this->writePipe_test();
    $this->readPipe_test();
} 
```

有人知道为什么吗？在第一步中，我该怎么做才能使其在不同功能之间工作？在第二步中，它甚至应该在不同的进程之间工作！我发现当作者在读者读取管道之前关闭管道时，我也会遇到问题。我想该函数在结束时会自动关闭它，但这只是一个猜测。

如果 PHP 的方式不起作用，我打算让 PHP 打开一个命令行，生成 BASH 命令并让它们执行。只要我的网络服务器在 LAMP 环境中工作，这在任何情况下都应该有效。缺点是它不能在 WAMP 环境中工作。

那么，有人对此有什么想法吗？

PS：我需要阻塞管道让读者等到一个事件被发送。我知道管道可以在非阻塞模式下使用

```
stream_set_blocking($pipe,false); 
```

大约是这样，但整个想法是在不使用管道进行轮询的情况下做到这一点，一旦事件被触发，它就会唤醒阅读器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T16:39:56.817

只是一个简短的声明，我实际上找到了一个使用命名管道的好解决方案：

```
public function createPipe_test(){
    posix_mkfifo("testpipe", 0777);
}

public function writePipe_test($value){
    $pipeA = fopen("testpipe",'w');
    $valueString = number_format($value);
    $valueLen = number_format(strlen($valueString));
    fwrite($pipeA, $valueLen);
    fwrite($pipeA, $valueString);
}

public function readPipe_test(){
    $pipeB = fopen("testpipe",'r');
    $valueLen = fread($pipeB, 1);
    return fread($pipeB, $valueLen);
} 
```

我有两个过程。

如果进程 1 调用**writePipe_test()，**那么它会等到进程 2 调用 **readPipe_test()**从管道中读取数据。

如果进程 1 调用**readPipe_test()，**那么它会一直等到进程 2 调用 **writePipe_test()**将某些内容写入管道。

诀窍是 'w' 和 'r' 而不是 'r+'。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:11:22.580

当您在这样的单独函数中使用管道时，写入管道 A 似乎再次被关闭/丢弃（$pipeA 的本地范围）。假设必须打开管道以进行读取和/或写入以保留任何信息，这确实很有意义。虽然我不知道内在的魔法。

当您从另一个进程（如 echo magic >> testpipe）提供管道时，您还可以观察到阻塞读取调用成功。所以你已经完成了第 2 步，但你需要一些管道句柄管理。

如果您按以下方式更改它，它将起作用：

```
 private $pipeA;
    public function writePipe_test(){
        $this->pipeA = fopen("testpipe",'r+');
        fwrite($this->pipeA, 'ABCD');
    } 
```

编辑：或将 $pipeA 设置为具有全局范围，就此而言..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T02:04:01.240

我不确定我是否理解你的第二个帖子..

但是要评论最后一个，如果我没有误解，TCP可能会更复杂，因为您必须先建立连接才能读取或写入，因此您有不同的开销

至于在函数结束时关闭的管道句柄，我假设您将面临与套接字相同的问题；但管道文件仍然存在！

持久存储（文件，数据库）将使客户端在时间上独立，如果您想使用阻塞调用，那么文件实际上可能是一种方法......

# javascript - 我在 javascript 中创建数组函数时遇到问题

> ID：14399802
> 
> 赞同：0
> 
> 时间：2013-01-18T13:17:02.980
> 
> 标签：javascript, arrays, variables, shopping-cart

我制作了这个简单的购物车，您可以从下拉列表中选择数量，然后添加这些数字，然后您会获得所有产品的总数和产品本身的总数。

但我希望它用价格和名称写下数量，并将其写在放置在网站上的 div 中，以便用户很容易看到他添加了产品。我通过将产品一一添加来进行计算部分，因为我没有排列它们。但是对于下一部分，我只是没有找到适合我需要的方法。这只是来自我的测试页面，所以我只有几个值，但在另一个页面中，我列出了 70 多个，如下所示：

```
<div id="radioAlert">
<script type="text/javascript">
//calculator
function updatesum() {
document.form.sum.value =
(document.form.sum0.value -0) *99 +
(document.form.sum1.value -0) *99 +
(document.form.sum2.value -0) *99;

document.form.smu.value =
(document.form.prod0.value -0)*99  +
(document.form.prod1.value -0) *99 +
(document.form.prod2.value -0) *99 +
(document.form.prod3.value -0) *99 +
(document.form.prod4.value -0) *99;
document.form.totalsum.value =
(document.form.sum.value -0) +
(document.form.smu.value -0); //not a typo i was just lazy with the name

//arrays

//This one i did not get to work.
var myArray = newArray();
myArray[0]=document.form.sum2.value;
myArray[1]=document.form.prod0.value;
myArray[2]=document.form.prod1.value;
myArray[3]=document.form.prod2.value;
myArray[4]=document.form.prod3.value;
myArray[5]=document.form.prod4.value;

for (var i = 0; i < myArray.length; i++) {
        alert(myArray[i]);
}

//this part works but i want it to add its value only once and then replace its value if its updated again, if its 0 i want it to be completely removed.

var prod1 = document.form.sum2.value;
var prod2 = document.form.sum1.value;

var radioAlert = document.getElementById("radioAlert");
var radioAlert2 = document.getElementById("radioAlert"); 

if  (document.form.sum2.value>0) {
//document.write("pilotjakke pelsforet small  " +   prod1 + "  stk");
radioAlert.innerHTML += ("pilotjakke pelsforet small  " +   prod1 + "  stk");
alert("pilotjakke pelsforet medium  " +   prod1 + "  stk");
}

if  (document.form.sum1.value>0) {
//document.write("pilotjakke pelsforet small  " +   prod1 + "  stk");
radioAlert2.innerHTML += ("pilotjakke pelsforet medium  " +   prod2 + "  stk");

}
}
</script>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:19:09.500

JavaScript 中默认没有`newArray`函数。

改变

```
var myArray = newArray(); 
```

到

```
var myArray = []; 
```

或者

```
var myArray = new Array();
// Note space ---^ 
```

使用的形式`[]`通常是优选的。除了更简洁之外，它还不容易有人重新定义`Array`构造函数。

请注意，如果您愿意，也可以使用元素初始化数组：

```
var myArray = [
    document.form.sum2.value,
    document.form.prod0.value,
    document.form.prod1.value,
    document.form.prod2.value,
    document.form.prod3.value,
    document.form.prod4.value
]; 
```

# php - 不通过我的浏览器创建文件

> ID：14399804
> 
> 赞同：-1
> 
> 时间：2013-01-18T13:17:08.393
> 
> 标签：php, file, createfile

当我在本地主机上运行我的页面时，它不会创建文件。我已授予文件夹站点的读写权限。我使用了系统和执行功能，当我通过终端运行页面时，它会创建一个文件，但通过我的浏览器它不会。

```
$my_file = '/var/www/site/file.txt';
$handle = fopen($my_file, 'w') or die('Cannot open file:  '.$my_file); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:21:54.930

以下命令将正确地将权限应用于目录。

```
cd /var/www/site
sudo chmod 664 *
sudo find . -type d -exec chmod 755 {} \; 
```

如果错误仍然存​​在，请发布任何抛出的 PHP 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:19:13.323

你试过亲戚地址吗？

```
$my_file = 'site/file.txt'; 
```

# java - 扩展 1000 个子类时的类序列化

> ID：14399805
> 
> 赞同：-2
> 
> 时间：2013-01-18T13:17:13.077
> 
> 标签：java, serialization

当一个类 [say A] 被序列化时，所有扩展 A 的子类都将被序列化。假设在类 A 扩展 2000 个类的情况下，序列化对象是否包含所有子类对象。通过覆盖子类中的“private void writeObject”，我们完全消除了父对象的序列化。请确认。

谢谢和问候， Subbu

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T13:43:09.690

> 当一个类 [say A] 被序列化时，所有扩展 A 的子类都将被序列化

不，只要保持序列化的一般合同，类`A`及其***实例变量就会被序列化。***

> 假设在类 A 扩展 2000 个类的情况下，序列化对象是否包含所有子类对象。

类的序列化表示*确实* [包含有关其超类型](http://docs.oracle.com/javase/6/docs/platform/serialization/spec/protocol.html)的信息。但不是它的子类。

> 通过覆盖子类中的“private void writeObject”，我们完全消除了父对象的序列化。请确认。

不，覆盖`private void writeObject`不会阻止父对象被序列化。参考[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html)：

> writeObject 方法负责为其特定类写入对象的状态，以便相应的 readObject 方法可以恢复它。该方法不需要关注属于对象的超类或子类的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T23:02:24.460

> 当一个类 [say A] 被序列化时，所有扩展 A 的子类都将被序列化。

废话。但是，如果类 A 是可*序列化*的，则其所有派生类都将是可*序列化的。*

> 假设在类 A 扩展 2000 个类的情况下，序列化对象是否包含所有子类对象。

更多的废话。然而，任何序列化的结果都包含序列化类及其所有可序列化*基*类的数据。

> 通过覆盖子类中的“private void writeObject”，我们完全消除了父对象的序列化。

不。

你读过对象序列化规范吗？都在里面。

# sql - SQL插入行并增加其他行

> ID：14399808
> 
> 赞同：4
> 
> 时间：2013-01-18T13:17:16.057
> 
> 标签：sql, sqlite

我想插入一行并在之后的所有其他行中增加一个值。有没有办法在单个 sql 插入中做到这一点？

```
id |  value
------------
a  |  0
b  |  1
c  |  2 
```

插入 d | 2应该使数据库看起来像这样：

```
id |  value
------------
a  |  0
b  |  1
d  |  2
c  |  3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T13:23:02.970

您可以尝试创建一个插入前触发器，该触发器将相应地更新旧值。您的数据库是否支持触发器？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T13:41:22.537

我同意[乔治·弗雷梅斯库](https://stackoverflow.com/users/584377/george-vremescu)的观点。[`AFTER INSERT TRIGGER`](http://www.sqlite.org/lang_createtrigger.html)听起来像是要走的路。

```
CREATE TRIGGER <triggername> AFTER  
INSERT ON <tablename> WHEN 
(
   -- Update logic here
) 
```

要获取最后插入的行 ID，您应该使用[`last_insert_row()`](http://www.sqlite.org/lang_corefunc.html).

# javascript - jQuery 选择框被裁剪滚动窗格

> ID：14399812
> 
> 赞同：1
> 
> 时间：2013-01-18T13:17:36.207
> 
> 标签：javascript, html, css, jscrollpane, drop-down-menu

我为我的网站使用了两个 jQuery 插件：`jquery.selectbox.js`和`jquery.jscrollpane.js`.

**`selectbox.js`**将我的选择转换为`div`s集合`jscrollpane.js`并向内容添加自定义滚动条。当我将选择框放入`jscrollpane`. *`jscrollpane`*裁剪所有超出其边界的内容 - 甚至选择框下拉菜单。你能帮我解决这个问题吗？

![图二](../Images/b4485b3ba1b1ebfb03241cc5d0158deb.png) ![图一](../Images/6b8aff197696e55ec8ccc3239c3e75fe.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:32:57.570

`.jscrollpane`,`overflow:scroll`在 css 类定义中。

这就是破坏您的演示文稿的原因，因为具有定义溢出的包装器元素不会真正允许子元素超过它自己的尺寸。

您可以尝试将`position`选择框的属性设置为`absolute`出现下拉菜单时，但是您必须弄乱元素相对于文档的位置的计算，以便将其放置在正确的位置。

# asp.net-mvc - 如何从 DevExpress MVCxGridView 网格中获取当前客户端排序和筛选设置？

> ID：14399813
> 
> 赞同：1
> 
> 时间：2013-01-18T13:17:45.677
> 
> 标签：asp.net-mvc, devexpress

我有一个简单的 DevExpress ASP.MVC GridView，我想生成网格中数据的 PDF 导出。我已经弄清楚如何导出所有数据，但我希望能够只导出出现在网格中的数据。这将允许用户对数据进行排序和过滤，并且只有该数据出现在导出中。

排序和过滤似乎都发生在客户端，我搜索了 DevExpess 文档并检查了客户端网格对象，但找不到我需要的信息。我也尝试过处理网格的客户端事件。我在这里取得的唯一成功是处理`ColumnSorting`事件。使用它，我可以记录每个排序，但这并不能告诉我排序的方向，以及排序是仅应用于事件中提供的列还是作为多列排序的一部分应用于该列。

我剩下的唯一选择是使用网格外部的其他表单控件来控制排序和过滤。我真的不想这样做，因为我的客户非常热衷于内置的排序和过滤功能。

请有人告诉我如何捕获用户应用的当前排序和过滤设置，以便我可以将它们传递给将生成 PDF 的控制器操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:20:37.160

通过在 DevExpress 示例之一中看到一些代码，我已经弄清楚了这一点：

[http://mvc.devexpress.com/GridView/Editing](http://mvc.devexpress.com/GridView/Editing)

在 Grid 的局部视图的代码中如下：

```
settings.ClientLayout = (s, e) =>
{
    if(e.LayoutMode == ClientLayoutMode.Loading) {
        if(Session["GridState"] != null)
            e.LayoutData = (string)Session["GridState"];
    }
    else
        Session["GridState"] = e.LayoutData;
}; 
```

通过将 存储`LayoutData`在会话状态中，可以使用相同的代码将其`GridViewSettings`应用于用于生成 PDF 导出的 。这解决了我的问题，但我不确定这有多大用处，因为`LayoutData`它必须被解析，因为它的格式类似于以下：

```
page1|sort1|a0|filter[Title] Like '%Test%'|conditions1|1|3|visible9|t0|t1|t2|t3|t4|t5|t6|t7|t8|width9|e|e|e|e|e|e|e|e|e 
```

# maps - 搜索 Routes/Directions 软件，但离线（使用 API）

> ID：14399820
> 
> 赞同：0
> 
> 时间：2013-01-18T13:18:00.460
> 
> 标签：maps, mappoint

我需要将路线规划集成到我的软件中......

我在找某事。就像微软的 google-directions-api 或 MapPoint 一样，但到目前为止还没有运气.. 你知道吗，或者你以前用过这样的东西吗？

谷歌方向或必应地图等在线服务不是替代品，因为它们对我来说太慢了..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:11:17.010

您可以为此目的使用 MapPoint。我不建议将它用于服务器应用程序，尽管您可以将它与运行 Asp.Net 应用程序的服务器集成。在服务器应用程序的情况下，您可以使用 API 将地图生成为图像，并使用 AJAX 将其发送到客户端，并进行实时缩放、平移等。

# c# - 将 Brightcove 视频链接更改为 Https

> ID：14399822
> 
> 赞同：0
> 
> 时间：2013-01-18T13:18:03.260
> 
> 标签：c#, asp.net, api, https, brightcove

我们正在使用 Brightcove API 访问视频和静止图像。然而，视频和图像的链接以 Http 形式出现。下面的例子

```
http://brightcove.vo.llnwd.net/e1/pd/16116593001/106593001_20213001_th-50ca1eeae4b00202ed60-1471893001.jpg?pubId=16435545593001 
```

有没有办法强制 bighcove 将链接返回为 https ？

这是因为该网站位于 https 上，并且它显示来自 Brightcove 云的图像/视频。如果在 https 上提供图像/视频会容易得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:23:32.567

您需要就此联系 Brightcove。该文件位于仅针对 HTTP 配置的 CDN 上，因此您无法直接执行任何操作。

# sql - 函数可以出现在 PostgreSQL 的什么地方？

> ID：14399824
> 
> 赞同：1
> 
> 时间：2013-01-18T13:18:06.730
> 
> 标签：sql, database, postgresql

给定 PostgreSQL 中的一个函数`xyz()`，我在哪里以及如何实际使用它？

以函数`current_database()`为例。然后我可以执行以下查询：

```
SELECT current_database();
SELECT * FROM current_database(); 
```

在这种情况下，两者都会导致输出：

```
 current_database
------------------
 cassava
(1 row) 
```

还有其他地方可以使用这个功能吗？

**特别是：**我怎样才能编写以下内容，以便它工作（因为它目前的情况，它没有）。

```
GRANT ALL ON DATABASE current_database() TO GROUP wheel WITH GRANT OPTION; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:16:38.827

您不能在纯 SQL 中执行 GRANT ALL 示例，因为语法需要标识符 - 而不是返回标识符的表达式。

任何可以在 SQL 语句中使用表达式的地方都应该可以使用函数。

除此之外，您将需要使用 plpgsql（或其他过程语言之一）来动态构建查询字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:45:25.543

Richard Huxton 是对的：只要在 SQL 语句中可以使用*表达式*，就应该可以使用函数。

然而， PostgreSQL 有[DO 扩展](http://www.postgresql.org/docs/current/static/sql-do.html)，它允许您运行过程语言而无需创建函数。这使得构建动态查询变得容易。

对于特定情况（省略`WITH GRANT OPTION`）：

```
DO $$
    BEGIN
    EXECUTE 'GRANT ALL ON DATABASE ' || current_database() || ' TO GROUP wheel';
    END;
$$; 
```

这有效地使您可以在任何地方使用函数。

# android - 在 ListView 项目中设置图像多个可点击区域？

> ID：14399829
> 
> 赞同：0
> 
> 时间：2013-01-18T13:18:34.957
> 
> 标签：android, android-listview, android-arrayadapter, clickable-image

点击[[这里]](http://wiresareobsolete.com/wordpress/2011/08/clickable-zones-in-listview-items/)本教程

嗨，我是 android 新手，我找到了制作具有多个可点击区域的列表的教程。在具有多个用户可以触摸的交互式位置的 ListView 中，而不是只有一个可点击的行。

我的项目中需要这种列表，但我无法在列表的每一行上设置不同的图像。

请帮我 。

```
public class MyActivity extends Activity implements AdapterView.OnItemClickListener, View.OnClickListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ListView list = new ListView(this);
        setContentView(list);

        String[] items = {"Tom", "Sally", "Bill", "John", "Santiago", "Isabella"};
        //Supply this adapter with either R.layout.row_button, R.layout.row_view, or R.layout.row_view_noparent
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.row_view, R.id.text, items) {
            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                View row =  super.getView(position, convertView, parent);

                View left = row.findViewById(R.id.left);
                left.setTag(position);
                left.setOnClickListener(MyActivity.this);
                View right = row.findViewById(R.id.right);
                right.setTag(position);
                right.setOnClickListener(MyActivity.this);

                return row;
            }
        };

        list.setAdapter(adapter);
        list.setOnItemClickListener(this);
    }

    @Override
    public void onClick(View v) {
        switch(v.getId()) {
        case R.id.left:
            Toast.makeText(this, "Left Accessory "+v.getTag(), Toast.LENGTH_SHORT).show();
            break;
        case R.id.right:
            Toast.makeText(this, "Right Accessory "+v.getTag(), Toast.LENGTH_SHORT).show();
            break;
        default:
            break;
        }
    }

    @Override
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
        Toast.makeText(this, "Item Click "+position, Toast.LENGTH_SHORT).show();
    }
} 
```

> ```
>  <?xml version="1.0" encoding="utf-8"?>
>   <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
>     android:layout_width="fill_parent"
>     android:layout_height="?android:attr/listPreferredItemHeight"
>     android:orientation="horizontal" >    
>     <ImageView
>         android:id="@+id/left"
>         android:layout_width="?android:attr/listPreferredItemHeight"
>         android:layout_height="fill_parent"
>         android:background="@drawable/mybutton"
>         android:clickable="true"
>         android:scaleType="center"
>         android:src="@drawable/icon" />    
>     <TextView
>         android:id="@+id/text"
>         android:layout_width="fill_parent"
>         android:layout_height="fill_parent"
>         android:layout_weight="1"
>         android:gravity="center"
>         android:textAppearance="?android:attr/textAppearanceLarge" />
>     <ImageView
>         android:id="@+id/right"
>         android:layout_width="?android:attr/listPreferredItemHeight"
>         android:layout_height="fill_parent"
>         android:background="@drawable/mybutton"
>         android:clickable="true"
>         android:scaleType="center"
>         android:src="@drawable/icon" /></LinearLayout> 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:27:31.810

使用自定义适配器，然后在 getview 方法中获取 imageview 的 id 并应用 onclicklistener。
参考[自定义列表](http://www.framentos.com/en/android-tutorial/2012/07/16/listview-in-android-using-custom-listadapter-and-viewcache/)

# java - 如何让 Hadoop 客户端在安全（Kerberos）集群中使用正确的凭据

> ID：14399831
> 
> 赞同：9
> 
> 时间：2013-01-18T13:18:36.613
> 
> 标签：java, hadoop, active-directory, kerberos

我有一个 Hadoop (CDH412) 集群设置，已启用 Kerberos 进行身份验证和授权。我让一切正常工作（Hdfs、mapred、zookeeper、hbase、hive 等）。但是，我在从 java 应用程序中访问 hdfs 数据时遇到问题。

我的 Java 应用程序是在后台运行的服务。因此，无法输入密码，我必须使用密钥表文件。应该不是问题。如果我先做一个'kinit'，它会很好，唉......

```
kinit -kt /home/fred/kerberostest/krb5.keytab myprinc/myserver.com@MY.REALM 
```

但是，如果我尝试在 java 代码中执行此操作（我已阅读 LoginContext.logon 将执行与 kinit 相同的操作），它会失败。

为了尝试对此进行测试，我编写了以下代码片段......

```
System.setProperty("java.security.krb5.realm", "MY.REALM");
System.setProperty("java.security.kdc", "kdc.server.com");
System.setProperty("javax.security.auth.useSubjectCredsOnly", "false");
System.setProperty("java.security.auth.login.config", "/home/fred/kerberostest/jaas.conf");

LoginContext context = new LoginContext("Client");
context.login();

Configuration conf = new Configuration();
FileSystem fs = FileSystem.get(conf);

InputStream in = fs.open(new Path("/mytestfile"));
int b = in.read();
in.close(); 
```

我的 jaas.conf 文件看起来像这样.....

```
Client {
   com.sun.security.auth.module.Krb5LoginModule required
   debug=true
   useKeyTab=true
   keyTab="/home/fred/kerberostest/krb5.keytab"
   principal="myprinc/myserver.com@MY.REALM"
   useTicketCache=false;
} 
```

当我运行上面的 java 代码时，LoginContext.login 似乎工作正常......我得到一个调试语句，上面写着

```
Login successful for user myprinc/myserver.com@MY.REALM using keytab file /home/fred/kerberostest/krb5.keytab 
```

但是，当代码尝试打开 HDFS 文件 (fs.open) 时，应用程序失败并出现 PriviledgedActionException，说明：

```
ERROR security.UserGroupInformation: PriviledgedActionException as :fred (auth:KERBEROS) cause:javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)] 
```

因此，它试图使用“fred”（我的 linux 登录）来访问这些文件，而不是我从 keytab 文件中获取的主要信息。同样，如果我先做一个 kinit，它工作正常....但是 LoginContext 不应该做同样的事情吗？

注意：这是 Kerberos 的 ActiveDirectory“版本”。它不使用信任...只是直接到 ActiveDirectory。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:31:31.823

我将此归咎于我们的 Active Directory 实施。我用 MIT Kerberos 做到了这一点，它运行良好。关闭。

# javascript - 带有 for 循环的简单倒计时

> ID：14399834
> 
> 赞同：1
> 
> 时间：2013-01-18T13:18:43.150
> 
> 标签：javascript

嗨，我正在尝试创建一个简单的倒计时。
这是我的代码，但它不起作用。
你能帮我找出问题吗？

```
function count() {
    for (var cc=20,cc > 0,cc--) {
        document.getElementById("cco").innerHTML=cc;
    }
}
count(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-18T13:20:29.517

您使用的是逗号而不是分号。

```
for (var cc=20,cc > 0,cc--) 
```

应该

```
for (var cc=20;cc > 0;cc--) 
```

然而，这可能不会像你想象的那样做，因为循环会立即一直计数到 0（所以用户甚至不会看到倒计时）。我猜你想要类似的东西：

```
var cc = 20;

var interval = setInterval(function()
{
    document.getElementById("cco").innerHTML = -- cc;

    if (cc == 0)
        clearInterval(interval);

}, 1000); 
```

有关详细信息，请参阅[setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)和[clearInterval](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T13:24:08.943

有（至少）两个错误。

第一个是语法：在 for 循环中，参数由分隔`;`而不是分隔`,`。语法正确的代码如下所示：

```
function count() {
  for (var cc=20;cc > 0;cc--) {
    document.getElementById("cco").innerHTML=cc;
 }
} 
```

其次，您没有倒计时，而是一遍又一遍地覆盖相同的元素，没有任何时间让用户看到结果。

更好的方法是在[`setTimeout()`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)这里使用，它看起来像这样：

```
var cc = 20;
function count() {
  document.getElementById("cco").innerHTML=cc;
  if ( cc > 0 ) {
    setTimeout( count, 1000 );
  }
}

setTimeout( count, 1000 ); 
```

该`setTimeout()`方法为浏览器留出了一些时间来实际呈现您的修改（并让用户看到它）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T13:20:25.957

`','`在你的`';'`for 循环中更改

```
function count() {
  for (var cc=20;cc > 0;cc--) {
    document.getElementById("cco").innerHTML=cc
  }
}
count(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T13:27:44.320

另一个递归版本[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)：

```
(function count(cc) {
  document.getElementById("cco").innerHTML = cc;
  if (cc > 0)
    setTimeout(function() { count(--cc); }, 1000);
})(10); 
```

**演示：http:** [//jsfiddle.net/DgWgx/](http://jsfiddle.net/DgWgx/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-07T13:24:21.440

倒计时时确保开始和结束元素是正确的。

计数：

```
for (var x=0;x < 10;x++) console.log(x); 
```

从**0 到 9**

倒计时错误：

```
for (var x=10;x > 0;x--) console.log(x); 
```

从**10 到 1**

正确倒计时：

```
for (var x=10-1;x >= 0;x--) console.log(x); 
```

从**9 到 0**

# android - 如何在不剪裁边界的情况下旋转 TextView？

> ID：14399835
> 
> 赞同：10
> 
> 时间：2013-01-18T13:18:57.770
> 
> 标签：android, android-canvas

我正在尝试轮换我的`TextView`using子类`canvas.rotate()`：

```
canvas.save();

final int w = getWidth();
final int h = getHeight();

float px = w/2f;
float py = h/2f;
canvas.rotate(mAngle, px, py);

super.draw(canvas);

canvas.restore(); 
```

TextView 被旋转，但是我的视图的边界被剪裁了：

![插图](../Images/702452505e2c53e5ea50a8ee5945e992.png)

我知道这是因为我的视图的大小 - 它在旋转期间不会改变，而它应该。但是，如果我要更改宽度\高度，`onMeasure`问题仍然存在 - 我正在使用`LayoutParams.WRAP_CONTENT`，所以`TextView`只需根据 中提供的值更改它的大小`setMeasuredDimensions`。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T16:46:39.690

我认为这里的整个问题是您正在使用 WRAP_CONTENT。当您这样做时，视图的剪辑矩形是文本内容的大小。解决问题的最简单方法是使用填充。像这样的东西，对我来说很好：

```
<com.example.twistedtext.TwistedTextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="30dp"
    android:gravity="center"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    twistedtext:rotation="30.0f"
    android:text="@string/hello_world" /> 
```

当然，如果你这样做，你将不得不为每个内容选择一个稍微不同的填充。如果您不能这样做，请覆盖 onMeasure，这样就可以完全按照 TextView 的 onMeasure 所做的那样，然后根据需要添加相应的填充以进行旋转。

后来补充：实际上，这很有趣。我有以下onMeasure，效果很好：

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    int w = getMeasuredWidth();
    int h = getMeasuredHeight();
    w = (int) Math.round(w * cosA + h * sinA);
    h = (int) Math.round(h * cosA + w * sinA);
    setMeasuredDimension(w, h);
} 
```

唯一剩下的问题是文本会根据旋转前的尺寸进行换行。你也必须解决这个问题......

设置 mAngle 时计算 sinA 和 cosA。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T15:03:14.283

好的，如果您无法在当前视图层次结构中旋转 textView，则应该在另一个视图层次结构中对其进行动画处理。

创建您的 textView 的位图表示。使用此位图的支架，例如 ImageView。将 imageView 连接到另一个布局，该布局位于顶部且不会被裁剪。隐藏你的文本视图。在 ImageView 上运行动画。动画完成后，更新 textView 表示，显示 textView 并删除 ImageView。

我找不到您想要的确切代码示例，但请看一下[这个](http://code.google.com/p/android-drag-and-drop-listview/source/browse/trunk/src/com/andrefy/ddviewlist/DDListView.java)。交集的地方是：

```
mWindowManager = (WindowManager)context.getSystemService(Context.WINDOW_SERVICE);
mWindowManager.addView(YOUR_VIEW_WITH_ANIMATION, mWindowParams); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T13:31:07.573

G. Blake Meike 提供的第一眼解决方案是一个很好的开始方式，但随之而来的是很多问题。

要克服问题，还有另一种方法。这很简单，但通常不应该使用（因为我刚刚从原始 android 源中删除了对我来说不必要的东西）。要控制混凝土的绘制，`View`您可以覆盖`drawChild`其父级的方法（是的，您需要自己的子类`ViewGroup`或更具体的东西，例如`FrameLayout`）。这是我的解决方案的一个示例：

```
@Override
protected boolean drawChild(Canvas canvas, View child, long time) {
    //TextBaloon - is view that I'm trying to rotate
    if(!(child instanceof TextBaloon)) {
        return super.drawChild(canvas, child, time);
    }

    final int width = child.getWidth();
    final int height = child.getHeight();

    final int left = child.getLeft();
    final int top = child.getTop();
    final int right = left + width;
    final int bottom = top + height;

    int restoreTo = canvas.save();

    canvas.translate(left, top);

    invalidate(left - width, top - height, right + width, bottom + height);
    child.draw(canvas);

    canvas.restoreToCount(restoreTo);

    return true;
} 
```

主要想法是我将非剪辑画布授予孩子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T15:25:01.693

您可以查看[https://github.com/grantland/android-autofittextview](https://github.com/grantland/android-autofittextview) 尤其是它的 refitText() 方法。

毕竟，旋转您的 Textview 应该会调用 onMeasure() 方法，这是所有魔法的开始。

# android - Android：如果片段不可见，为什么会启动它们？

> ID：14399838
> 
> 赞同：0
> 
> 时间：2013-01-18T13:19:07.543
> 
> 标签：android, android-fragments, android-lifecycle

我的`Activity`. 第一个是横向模式，包含两个`FrameLayout`，第二个是纵向模式，只包含一个`FrameLayout`。片段被动态添加到各自的`FrameLayouts`!! 我不明白为什么当我以纵向模式旋转屏幕时，`onStart()`会`onResume()`调用 Fragment 的方法（不再可见！！！！）。我知道 Android 会复制`Activity`其所有片段的回调，但这种行为对我来说是毫无意义的！`onStart()`并且`onResume()`只有在片段可见时才被调用！！！！

这个问题已经在这篇[文章](https://stackoverflow.com/questions/8032565/problems-with-fragment-lifecycle-and-oncreate-being-called-on-non-existent-fragm)中讨论过了。但我想了解为什么 Android 会有这种行为！！

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:44:30.843

尝试在您的清单中设置 android:configChanges="orientation"，这表明您希望自己管理方向更改并且不需要默认的自动管理。这将允许您覆盖 onConfigurationChanged，查看详细信息：http: [//developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)

# jsf - Primefaces 从 p:rowEditor 更改图标

> ID：14399842
> 
> 赞同：4
> 
> 时间：2013-01-18T13:19:24.710
> 
> 标签：jsf, primefaces, icons, editor

我想从`<p:rowEditor>`. 不是 ui-icon-pencil，而是 ui-icon-check 和 ui-icon-close。

我的 CSS

```
.ui-icon-check {
    background-image: url(../images/success_icon_16x16.png) !important; 
}
.ui-icon-close {
    background-image: url(../images/cancel.png) !important;
} 
```

但是当我编辑某些行时，我看不到任何图标。

任何想法？谢谢蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:36:12.453

这可能是因为您的 CSS 类没有覆盖 jQuery UI css 样式表。这是因为您的样式表是在声明 jQuery UI 样式表之前放置在`<head>`标记中的。

本质上，jQuery UI 样式表覆盖了您的样式表。

确保您的样式表覆盖其他声明的样式的最简单方法是将您的样式表放在其中`<h:body>`。除非有一些属性`<h:outputStylesheet>`允许您订购与较新版本的 JSF 中的其他 ` 对象相比它在文档中的呈现方式，否则这是我能想到的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-09T13:31:10.007

我有一个类似的问题，我可以覆盖除铅笔图标之外的所有内容，检查并关闭。我的问题是高度和宽度。所以我不得不覆盖它。

```
 .ui-icon-pencil {
  background-image: url(../images/pencil.png) !important;
  height: 20px;
  width:20px;
 } 
```

# java - AbstractRegionPainter Java 7 动态导入

> ID：14399843
> 
> 赞同：2
> 
> 时间：2013-01-18T13:19:26.743
> 
> 标签：java, swing, nimbus

如您所知， [nimbus 包](http://docs.oracle.com/javase/7/docs/technotes/guides/swing/enhancements-7.html)在 java 7 中发生了变化。我在我的应用程序的服务器端使用带有 java6 的 AbstractRegionPainter，而我的应用程序的客户端必须在 java 6 和 7 中工作。所以我如何动态导入这个抽象类取决于客户端的 java版本。导入文本必须更改为 java 版本。或者我必须动态扩展它的另一个解决方案属于java版本。

# java - 玩！框架 JPA 和 GroupBy

> ID：14399848
> 
> 赞同：1
> 
> 时间：2013-01-18T13:20:07.067
> 
> 标签：java, jpa, playframework, group-by, ebean

玩！框架没有按功能分组。这种缺乏功能真的开始让我恼火。我该如何解决这个问题？我想`byRouteId`按trip_headsign 分组。简单的原始查询如下所示：

```
SELECT *
FROM trips
WHERE route_id = 1070
GROUP BY trip_headsign 
```

这是我的 Trip.java

```
@Entity  
@Table(name="trips")
public class Trip extends Model {

    @Constraints.Required
    public String route_id;
    @Constraints.Required
    public String service_id;
    @Id
    public String trip_id;
    public String trip_headsign;
    public String direction_id;
    public String block_id;
    public String shape_id;

    @ManyToOne
    @JoinColumn(name="route_id")
    public TRoute troute;

    public static List<Trip> byRouteId(String route_id) {
        List<Trip> trips = 
            Trip.find
            .fetch("troute") // fetch TRoute properties.
            .where().like("route_id", route_id)
            .findList();
        return trips;
    }

    public static Finder<String, Trip> find = new Finder(
            String.class, Trip.class
    );

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:32:25.763

您可以改用原始 SQL 查询，方法是使用 javax.persistence 中 EntityManager 类的 createNativeQuery 函数。

```
EntityManager em = play.db.jpa.JPA.em();
List<Trip> tripList = em.createNativeQuery("insert raw sql query here").getResultList(); 
```

# android - Android 布局问题 - ListView 项

> ID：14399854
> 
> 赞同：1
> 
> 时间：2013-01-18T13:20:34.600
> 
> 标签：android, android-layout

我有一个列表视图，每个项目都呈现如下

```
<?xml version="1.0" encoding="utf-8"?>
<!--  Single List Item Design -->
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"       
        android:layout_height="?android:attr/listPreferredItemHeight"
        android:padding="6dip">

   <ImageView  
        android:id="@+id/projectImage"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_marginRight="6dip"
        android:src="@drawable/project_icon" 
        android:contentDescription = "@string/projectIcon" />       

   <LinearLayout
        android:id="@+id/projectDetails"
        android:orientation="vertical"
        android:layout_width="0dip"
        android:layout_weight="1"
        android:layout_height="0dip">    

   <TextView
        android:id="@+id/topText"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:padding="10dip"
        android:textSize="16sp"
        android:textStyle="bold"        
        android:textColor="@color/text_color"
        android:gravity="center_vertical" />   

   <TextView
            android:id="@+id/bottomText"
            android:layout_width="fill_parent"
            android:layout_height="0dip"                
            android:paddingLeft="10dip"                
            android:textSize="14sp"         
            android:singleLine="true"           
            android:textColor="@color/locationText_color"
            android:ellipsize="marquee" />
   </LinearLayout>   
</LinearLayout> 
```

但是我的列表视图没有正确呈现列表项太短并且没有显示任何内容见下文

![在此处输入图像描述](../Images/f7583356dd2bcec11746e22372484f19.png)

我确实使用自定义样式。我也试过改变

```
android:layout_height="?android:attr/listPreferredItemHeight" 
```

到

```
android:layout_height="100dip" 
```

但它没有用。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:02:06.433

首先，正如我在评论中所说，`inflate()`当您扩充行布局文件时，您应该始终使用此版本的方法，以便`LayoutParams`为行视图设置正确的：

```
inflater.inflate(R.layout.row_layout, parent, false) 
```

关于`TextViews`没有出现的两个，我不确定您希望它们如何放置。这是我的想法：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"       
        android:layout_height="?android:attr/listPreferredItemHeight"
        android:padding="6dip">

   <ImageView  
        android:id="@+id/projectImage"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_marginRight="6dip"
        android:src="@drawable/project_icon" 
        android:contentDescription = "@string/projectIcon" />       

   <LinearLayout
        android:id="@+id/projectDetails"
        android:orientation="vertical"
        android:layout_width="0dip"
        android:layout_weight="1"
        android:layout_height="fill_parent">    

   <TextView
        android:id="@+id/topText"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="10dip"
        android:textSize="16sp"
        android:textStyle="bold"        
        android:textColor="@color/text_color"
        android:gravity="center_vertical" />   

   <TextView
            android:id="@+id/bottomText"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"                
            android:paddingLeft="10dip"                
            android:textSize="14sp"         
            android:singleLine="true"           
            android:textColor="@color/locationText_color"
            android:ellipsize="marquee" />
   </LinearLayout>   
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:35:34.943

您已将 TextViews 的高度设置为 0dp。

```
 android:layout_height="0dip" 
```

将其更改为`wrap_content`或设置您的 TextViews 的权重。父 LinearLayout 的权重不适用于它们。

# sql - 如何在以下代码中组合两个选择查询？

> ID：14399855
> 
> 赞同：2
> 
> 时间：2013-01-18T13:20:36.380
> 
> 标签：sql, sql-server

我可以将最后两个选择查询合并为一个查询吗？

```
DECLARE @AttributeLink table(qeaId int,nQeaId int)

insert into @AttributeLink values(100,200)
insert into @AttributeLink values(101,201)
insert into @AttributeLink values(102,202)

declare @prmVar varchar(200)

select @prmVar = COALESCE(@prmVar + ',', '') + cast(nQeaId as varchar) 
    from @AttributeLink  
    where qeaId in (100, 101)   

select @prmVar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T11:58:03.867

怎么用

```
UNION / UNION ALL 
```

桌子之间

那么你至少有一个结果。如果所选字段相同，则可以使用它。

看看这里：http: [//msdn.microsoft.com/en-us/library/ms180026.aspx](http://msdn.microsoft.com/en-us/library/ms180026.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T22:16:46.897

如果你只是这样做呢？

```
select COALESCE(@prmVar + ',', '') + cast(nQeaId as varchar) 
from @AttributeLink  
where qeaId in (100, 101) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T18:45:16.370

设置`@prmVar`声明时的值，然后您可以使用选择一个。

```
DECLARE @AttributeLink table(qeaId int,nQeaId int)

insert into @AttributeLink values(100,200)
insert into @AttributeLink values(101,201)
insert into @AttributeLink values(102,202)

declare @prmVar varchar(200) = ( 

    stuff
        (
            (
                select ', ' + convert(nvarchar(max),nQeaId)
                from @AttributeLink al
                where al.qeaId in (
                    100
                    ,101
                )
                for xml path('')
            )
            ,1
            ,1
            ,''
        )

    ) 

select @prmVar 
```

# bash - 需要 bash 函数中的循环建议

> ID：14399858
> 
> 赞同：0
> 
> 时间：2013-01-18T13:20:55.607
> 
> 标签：bash, loops, centos

我正在尝试编写一个脚本来检查几个函数返回，如果返回 1 写入日志文件并向我发送电子邮件，但循环没有按预期工作：

1.  如果成功打印一切都很好
2.  如果更新失败，它会在日志中写入“失败”和“完成”两行并向我发送电子邮件。

你能帮忙找出错误吗？

```
w2log() {
if [[ $? = 0 ]] ; then
   echo "=== Everything looks good ! DONE `date` ==="  >> $LOG;
else
   echo "=== Something went wrong ! FAILED `date` ==="  >> $LOG && errmail
fi
}

updaterepos() {
   syn6332
   syn5864
   for repo in syn6332 syn5864; do
      w2log
   done
}

updaterepos 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:27:57.480

也许是这样的（如果你想要`w2log`每个命令的报告）：

```
updaterepos() {
    for repo in syn6364 syn5864 ; do
        $repo
        w2log
    done
} 
```

`$?`应在命令返回状态后立即调用函数检查。函数调用也设置`$?`了——这就是为什么你在第二次调用时得到第二个“完成”行的原因`w2log`。

# c++ - 在 C++ 中迭代类的向量

> ID：14399862
> 
> 赞同：-1
> 
> 时间：2013-01-18T13:21:37.407
> 
> 标签：c++, class, methods, vector, iterator

Song 是一个类，我想访问它的一个公共方法

```
class RadioManager {

    std::vector<Song> all_songs;
public:

void addSong(const Song& song);

}

void mtm::RadioManager::addSong(const Song& song){

vector<Song>::iterator i;

    for (i = all_songs.begin(); i != all_songs.end(); ++i) {

    i->getSongName(); // When i type i-> i don't get the list of methods in the class song;

} 
```

为什么它没有显示迭代器的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:27:54.230

如果它没有向您显示内容，您可以帮助他。（他是你的 IDE）

```
for (i = all_songs.begin(); i != all_songs.end(); ++i) 
{
    Song& song = *i;
    song.getSongName(); 
} 
```

代码的作用几乎相同，但是您可以在调试器中快速观看并使用关于 Song 类型的对象歌曲的 AutoCompletion。

# r - 如何使用 for 循环制作矢量

> ID：14399868
> 
> 赞同：20
> 
> 时间：2013-01-18T13:22:06.230
> 
> 标签：r, loops, vector, indexing, sequence

我对 R （和一般编程）非常陌生，几天来我一直在这个问题上（可能非常简单）......

如何`3 6 12 24 48 96 192 384 768`用`for`循环制作矢量？

到目前为止，我设法想出的只是以下几点：

```
x=numeric()
for (i in 1:8) (x=2*i[-1]) 
```

但是，这是行不通的。我认为主要问题之一是我不明白如何按顺序索引数字。

如果有人能指出我正确的方向，那将是一个很大的帮助！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-18T14:29:50.873

```
x=c()
x[1] = 3
for (i in 2:9) { 
    x[i]=2*x[i-1]
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-18T13:39:41.707

好的，您需要知道的第一件事是如何将内容附加到向量。您想要的功能很容易是`append`：

```
x <- c(1, 2)
x <- append(x, 3) 
```

将使向量 x 包含`(1, 2, 3)`就像你已经完成一样`x <- (1, 2, 3)`。您需要意识到的下一件事是目标向量的每个成员都是之前的两倍，这在 for 循环中很容易做到

```
n <- 1
for (i in 1:8)
{
    n <- n*2
} 
```

每个循环都会有 n 个加倍。显然，您可以通过将其他语句放在语句之前或之后，以加倍或尚未加倍的形式使用它`n <- n*2`。

希望您可以将这两件事放在一起来制作您想要的循环。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-18T15:41:37.867

真的，伙计们。坚持隐藏在 Arun 评论中的解决方案。

```
Rgames> 3*2^(0:20)
 [1]       3       6      12      24      48      96     192     384     768
[10]    1536    3072    6144   12288   24576   49152   98304  196608  393216
[19]  786432 1572864 3145728 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-14T13:23:13.073

你可以，如果你知道 python 使用包 reticulate 来做这将比在 r 中容易得多（这就是我做类似任务的方式）。

如果您没有包裹，请执行以下操作：

```
install.packages('reticulate') 
```

那么如果你这样做，你可以做到

```
library('reticulate')

py_run_string('vector = [n*2 for n in range(1, 9, 1)']
#Then you can call the vector by:

print(py$vector)

#And do whatever you want with it. 
```

我知道这比 r 更像是 python，并且它变得更复杂一些，但对我个人而言，我发现 python 比 r 更容易处理向量（或列表，python 等价物）。我希望这能回答你的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-30T23:03:09.993

sapply(1:9, 函数(i) 3*2**(i-1) )

# php - 用于多个文件上传的多个 mysql 查询

> ID：14399869
> 
> 赞同：0
> 
> 时间：2013-01-18T13:22:14.957
> 
> 标签：php, mysql

我有一个用 php 上传的多个文件，我想为每个上传的文件创建插入一个 mysql 行。例如，如果上传了 3 个文件：a.txt、b.txt 和 c.txt，它将创建 3 个插入查询，其中 $filename 是 a.txt，第二个是 b.txt，第三个是 3.txt。这可能吗？

```
$target = "test/";

    if($target[strlen($target)-1]!='/')
            $target=$target.'/';
        $count=0;
        foreach ($_FILES['uploaded']['name'] as $filename)
        {
            $temp=$target;
            $tmp=$_FILES['uploaded']['tmp_name'][$count];
            $count=$count + 1;
            $temp=$temp.basename($filename);
            move_uploaded_file($tmp,$temp);
            $temp='';
            $tmp='';
        }

//for each file uploaded    mysql_query("INSERT INTO files VALUES('','$date','$filename')"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:26:10.753

是的。

而且由于您已经在循环上传的文件。我会在同一个循环中执行 sql 查询。

并且：*指向[http://php.net/manual/en/function.mysql-query.php的大红框](http://php.net/manual/en/function.mysql-query.php)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:27:38.223

肯定是有可能的。只需在 foreach 块的末尾添加您的 mysql_query 即可。

# asp.net-mvc-3 - 通过 jquery $.ajax 调用简单 jsonresult 方法时未收到状态代码或未授权消息

> ID：14399871
> 
> 赞同：0
> 
> 时间：2013-01-18T13:22:16.873
> 
> 标签：asp.net-mvc-3, entity-framework, c#-4.0, membership-provider

我正在开发 MVC3 应用程序，其中实现了 EF 的成员资格。这里的成员资格应用于具有 [Authorize] 属性的每个控制器的所有操作方法。但不适用于 JsonResult 方法，此处 Actionresult 方法仅用于显示页面，而 jsonresult 方法用于通过异步调用进行验证。

例如。在查看页面中有下拉菜单，当更改其选项时，它会通过异步调用进行验证。所以当会话到期时。并且用户从下拉菜单中更改选项，然后通过 $.ajax 方法进行异步调用，该方法无法返回 403 之类的代码。所以我需要如何获取此代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:58:03.843

如果我正确理解您的问题，您：

*   保护控制器上的大多数方法`[Authorize]`
*   具有用于验证的不受保护的 JsonResult 方法，并且
*   如果用户的会话过期，想要从 Json 方法返回 403？

我想我不明白为什么你不只是`[Authorize]`使用 Json 方法，但你可以这样做：

```
if (!User.Identity.IsAuthenticated)
    return new HttpStatusCodeResult(System.Net.HttpStatusCode.Forbidden); 
```

干杯。

# google-analytics - Google Analytics 可以显示点击了哪个链接或 div？

> ID：14399874
> 
> 赞同：0
> 
> 时间：2013-01-18T13:22:24.227
> 
> 标签：google-analytics

我的网站使用谷歌分析，我需要知道是否可以监控用户点击了哪些链接或 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:47:42.827

您可能可以使用[Analytics 事件跟踪](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)：

```
<a href="#" onClick="_gaq.push(['_trackEvent', 'Videos', 'Play', 'Baby\'s First Birthday']);">Play</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T23:34:49.960

您还应该检查[增强的链接归因](http://support.google.com/analytics/bin/answer.py?hl=en&answer=2558867)。

# vb.net - UAC 错误 (VB.NET)

> ID：14399875
> 
> 赞同：0
> 
> 时间：2013-01-18T13:22:31.307
> 
> 标签：vb.net, uac

我在 windows 7 和 vista 中遇到 UAC 权限问题。我的应用程序将它自己复制到 C:/file.exe 。问题是应用程序说 "Access to path is denied" ，所以我已将清单文件中的 "requestedExecutionLevel" 更改为 "requireAdministrator" ，并且效果很好。但是我在禁用 UAC 的机器上遇到了问题，它再次显示“拒绝访问路径”，那么如何在禁用 UAC 的机器上解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:08:53.540

It is because the C:/, actually the driver which the OS is installed to, folder is a protected folder that requires administrator privileges for writing operations. This also happens in some other folders like Program Files folder and its all subfolders.

Thus, simply move your file to somewhere else.

# css - 是否可以添加 margin-bottom 来扩大正文的大小？

> ID：14399877
> 
> 赞同：0
> 
> 时间：2013-01-18T13:22:42.470
> 
> 标签：css

我有一个`div`彩色背景和一个绝对位于页面底部的页脚。我正在尝试将 margin-bottom 添加到 div 以便在 div 和页脚之间添加一些空间。但它没有任何效果。我认为这是因为边距相对于另一个元素。在这种情况下，什么是好的解决方案？

```
<body> <!--white background-->
  <div> <!--colored background-->
   <!--THe content of the page -->
  </div>
  <footer>
   "links"
  </footer>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:29:57.623

看起来您需要的是“粘滞页脚”，搜索 SO 或 Google，您不想解决已经解决了 100 次的问题 :-)。由于页脚是绝对定位的，因此为其添加边距或内容 div 将无济于事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:30:33.393

尝试添加显示：块。

或者，如果这不起作用，请尝试使用 padding-bottom 而不是 margin-bottom。

其中之一应该工作！

编辑：抱歉，如果您将 DIV 的底部填充/边距设置为页脚的高度，再加上您要达到的间隙高度，它应该可以工作。绝对定位的页脚不会被 div 推送到任何地方，因为当您将其设置为绝对时，它会从页面流中取出。

# java - Android（或Java）不熟悉的“抛出”用法

> ID：14399884
> 
> 赞同：-4
> 
> 时间：2013-01-18T13:23:13.453
> 
> 标签：java, android, function, exception, throws

我在 Android 示例代码中发现了一个不熟悉的“抛出”用法，如下所示。

```
public Void handleResponse(HttpResponse response) throws IOException
{
  ...
} 
```

我只想知道在这种情况下这个“抛出”是如何工作的。我发布了这个，因为很难找到合适的搜索词去谷歌。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T13:27:39.123

我认为您正在混合`throws`和`throw`.

`throws`在方法的签名中表明它可以`IOException`在某些情况下抛出一个。 `throw new IOException()`将抛出实​​际的异常。

该`throws`关键字可以在每个 Java 程序中看到，`try {} catch(){}`如果异常是已[检查异常，则强制您将方法调用封装在块中](http://en.wikibooks.org/wiki/Java_Programming/Checked_Exceptions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T13:27:07.540

方法声明后的`throws`关键字表示该方法**可能会**抛出该异常。这意味着任何调用方法都必须确保它们捕获此异常，如下所示：

```
...
try {
  var.handleResponse(response);
catch (IOException e) {
  // oops, something went wrong
  e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T13:25:25.360

在函数体的某处，`handleResponse()`可能*会*抛出 IOException。当您调用该函数时，您需要将其包围在`try..catch`块中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T13:25:33.487

`IOException`是一个检查异常，因此`throws IOException`如果您的方法内的代码可以抛出一个`IOException`（并且您没有在方法内捕获它），则需要它。`IOException`如果是 RuntimeException（如`NullPointerException`），则不需要这样做。也许你应该看看[这个](https://stackoverflow.com/questions/6115896/java-checked-vs-unchecked-exception-explanation)问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T13:26:51.450

您应该从[Java 教程](http://docs.oracle.com/javase/tutorial/essential/exceptions/index.html)开始。从同一个教程：

> 所有方法都使用 throw 语句来引发异常。throw 语句需要一个参数：一个可抛出的对象。Throwable 对象是 Throwable 类的任何子类的实例。这是一个 throw 语句的示例。

```
 throw someThrowableObject; 
```

# installation - 如何从不同的文件夹在 NSIS 中添加文件

> ID：14399885
> 
> 赞同：6
> 
> 时间：2013-01-18T13:23:26.387
> 
> 标签：installation, nsis

我已经设置并工作了以下内容：

```
File file1.bat
File file2.xml
File common.file1.dll
File common.file2.dll
File common.file3.exe 
```

为了避免将公共文件保留在源目录中，我想要的是从父目录中引用它们，如下所示：

```
File file1.bat
File file2.xml
File ..\common.file1.dll
File ..\common.file2.dll
File ..\common.file3.exe 
```

**编辑：**当我再次尝试时，这实际上有效。

*但显然，这是不被认可的。
还有其他方法可以引用这些文件吗？*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-18T14:11:17.503

文件是相对于 .nsi 和 ..\xyz 应该工作...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-25T06:51:06.247

您可以为 File 命令指定单独的输出文件路径和源文件路径：

```
File /oname=$INSTDIR\common.file3.exe ..\common.file3.exe 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T15:01:02.633

您可以定义一个环境变量，指向您想要保留依赖项的文件夹。然后在您的 nsi 脚本中使用该环境变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T13:32:30.493

尝试在脚本中添加以下行：

```
File file1.bat
File file2.xml
SetOutpath "<source directory path>"
File common.file1.dll
File common.file2.dll
File common.file3.exe 
```

# submit - 如何在 QSqlTableModel 中只提交一行？

> ID：14399886
> 
> 赞同：1
> 
> 时间：2013-01-18T13:23:28.580
> 
> 标签：submit, row, qsqltablemodel

我使用 QSqlTableModel 和 OnManualSubmit 编辑策略。
我有可能使用 revertRow() 方法恢复某些行的更改。
但是我怎样才能只提交一行表格呢？我只有 submitAll() 方法。
我可以使用 insertRowIntoTable()，但它是受保护的，我不想继承 QSqlTableModel。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:56:50.373

我可以将所有脏单元格中的数据保存到某个 QMap 中。
然后调用revertAll()，将新行插入模型并调用submitAll()。
然后将列表中未保存的数据复制回模型。
但是这个解决方案非常难看:(似乎唯一的方法是继承QSqlTableModel并使用insertRowIntoTable()。

UPD。我已经尝试过 insertRowIntoTable()，不幸的是它将行插入数据库但没有插入模型:(

# php - 页面渲染 & 代替 &

> ID：14399889
> 
> 赞同：-2
> 
> 时间：2013-01-18T13:23:50.090
> 
> 标签：php, html, wordpress

我的 wordpress 安装中有一些代码。我编写了一个函数来在我的主题中的某个位置显示帖子标题。我想从我的函数中获取 html 作为帖子标题重定向。

我命名标题`"A &amp; B"`。但是我在我的主题中得到了确切 `A &amp; B`的信息，而不是`A & B`. 我究竟做错了什么？是否有任何 php 功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:30:55.670

如果我理解你，你可能需要[htmlspecialchars($string)](http://php.net/manual/en/function.htmlspecialchars.php)函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:53:50.213

只需在帖子标题中使用 &。

然后根据您的输出方式使用[WordPress 验证和转义](http://codex.wordpress.org/Data_Validation)（可能是[esc_html](http://codex.wordpress.org/Function_Reference/esc_html)，或者更好的是[the_title 过滤器](http://codex.wordpress.org/Plugin_API/Filter_Reference/the_title) ）。

如果您使用 the_title(); 您无需执行任何操作，只需让 WordPress 完成工作即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-07T19:08:41.273

只需使用 A & B 代替。定义标题时使用 &。

# android - Android 无法执行 Http get 或 post 请求

> ID：14399892
> 
> 赞同：0
> 
> 时间：2013-01-18T13:24:06.170
> 
> 标签：android

我正在尝试从 Internet 上的教程之一执行非常简单的示例。但无法执行。它在向服务器发送 http get 请求时给了我例外......代码运行良好，直到将请求发送到服务器。

**Http示例类：**

```
 public class HttpExample extends Activity {

        TextView httpStuff;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.httpex);
            httpStuff = (TextView) findViewById(R.id.tvHttp);
            GetMethodEx test = new GetMethodEx();
            String returned;
            try {
                returned = test.getInternetData();
                httpStuff.setText(returned);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                Toast.makeText(HttpExample.this, "Failed", Toast.LENGTH_LONG)
                        .show();
            }

        }

        public class GetMethodEx {

            public String getInternetData() throws Exception {
                BufferedReader in = null;
                String data = null;
                try {
                    HttpClient client = new DefaultHttpClient();
                    URI website = new URI("http://www.mybringback.com/");
                    HttpGet request = new HttpGet();
                    request.setURI(website);
                    HttpResponse response = client.execute(request);
                    // Toast.makeText(HttpExample.this, "Here",
                    // Toast.LENGTH_LONG).show();

                    in = new BufferedReader(new InputStreamReader(response
                            .getEntity().getContent()));
                    StringBuffer sb = new StringBuffer("");
                    String l = "";
                    String nl = System.getProperty("line.separator");
                    while ((l = in.readLine()) != null) {
                        sb.append(l + nl);
                    }
                    in.close();
                    data = sb.toString();
                    return data;
                } finally {
                    if (in != null) {
                        try {
                            in.close();
                            return data;
                        } catch (Exception e) {
                            e.printStackTrace();
                        }
                    }
                }
            }

        }

    } 
```

**Android Manifest.xml** : 我也启用了 Internet 权限

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.example.httpclient"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="16" />

        <uses-permission android:name="android.permission.INTERNET" />
        <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

        <application
            android:allowBackup="true"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity
                android:name="com.example.httpclient.HttpExample"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
        </application>

    </manifest> 
```

我不知道是什么问题，因为我已经运行了很多其他代码来从服务器发送或接收数据，但它们也没有执行可能是模拟器或其他东西的问题......请指导我这是类代码和清单……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:34:27.993

选项1：

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
 StrictMode.setThreadPolicy(policy); 
```

选项 1 只适合测试它。但是你应该避免真正使用这种方法并`AsyncTask`为它做一个

//================================================= ============================
选项2：

使用本教程制作正确的 ASyncTask：[http ://www.elvenware.com/charlie/development/android/SimpleHttpGetThread.html](http://www.elvenware.com/charlie/development/android/SimpleHttpGetThread.html)

//================================================= ============================
使用 ASyncTask 作为最终任务（选项 2）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:27:08.600

检查您的 logcat 输出，它说**`NetworkOnMainThreadException`**，这意味着您正在直接在主线程上执行长时间运行的任务（网络调用）。

要实现这样长时间运行的任务，您可以实现[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)或 Threading 实现来进行网络调用。

仅供参考，AsyncTask 被称为 Painless Threading，这意味着您无需担心任何线程处理过程。

在其中一种方法中实现您的网络调用， [AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)文档`doInBackground()`中已经给出了一个示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T13:37:11.807

检查从您的设备与互联网连接。

如果您为 textview 设置文本，请尝试下载简单文本：[http ://weather.yahooapis.com/forecastrss?w=2502265](http://weather.yahooapis.com/forecastrss?w=2502265)

# asp.net-mvc - DropDownListFor 不选择元素

> ID：14399894
> 
> 赞同：0
> 
> 时间：2013-01-18T13:24:09.553
> 
> 标签：asp.net-mvc

我的控制器：

```
var types = _opportunityTypeService.GetAll(); //has id 1,2,3,4
viewmodel.OpportunityTypes = new SelectList(types, "Id", "Name", recipe.Id); //recipe.Id is 4

return View(viewmodel); 
```

和我的观点： ![在此处输入图像描述](../Images/60f8a76e36f355e9dee2ef620ae883cf.png)

和html结果：

![在此处输入图像描述](../Images/0521ca1863865fcf12d2130dfef1881f.png)

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:35:45.723

`Html.DropDownListFor`为属性创建一个下拉列表。在你的情况下为财产`m.OpportunityType`。

所以所选项目将是`m.OpportunityType`. SelectList 中的 Selected 属性将在您使用时使用`Html.DropDownList`。

所以你的代码是：

```
var types = _opportunityTypeService.GetAll(); //has id 1,2,3,4
viewModel.OpportunityType = 4;
viewmodel.OpportunityTypes = new SelectList(types, "Id", "Name"); //recipe.Id is 4

return View(viewmodel); 
```

# php - 我正在尝试美化 Yii 中的 URL

> ID：14399896
> 
> 赞同：0
> 
> 时间：2013-01-18T13:24:19.100
> 
> 标签：php, yii

由于我已经完成了我的项目，只是无法理解 url 美化。假设这是我的网址：

```
localhost/wowwaylabs/trunk/mpi_v1/index.php?r=products/index&catId=1 
```

其中 products 是控制器， index 是该控制器的操作。catId 是我通过 url 传递的参数。我需要美化网址

```
localhost/wowwaylabs/trunk/mpi_v1/this-is-india-1 
```

其中 1 是我通过的 catId。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:44:24.377

为了使 url 美观，您需要在 .htaccess 文件中添加以下代码行，该文件应位于项目的根文件夹中：

```
 Options +FollowSymLinks
    IndexIgnore */*
    RewriteEngine on

    # if a directory or a file exists, use it directly
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    # otherwise forward it to index.php
    RewriteRule . index.php 
```

它会在没有 ?r 的情况下保留您的网址。

现在取消注释以下以启用路径格式的 URL（在 protected/config/main.php 中）

```
/*
'urlManager'=>array(
    'urlFormat'=>'path',
    'rules'=>array(
    '<controller:\w+>/<id:\d+>'=>'<controller>/view',
    '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
    '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
  ),
),
*/ 
```

然后添加`'showScriptName'=>false,`同一文件的“urlManager”。它将从 url 中删除 index.php。

有关更多信息，请查看以下链接：
[http ://www.yiiframework.com/doc/guide/1.1/en/topics.url](http://www.yiiframework.com/doc/guide/1.1/en/topics.url)
[http://www.sniptrichint.com/tip-of-the-day/beautiful-url-in -yii-无索引/](http://www.sniptrichint.com/tip-of-the-day/beautiful-url-in-yii-without-index/)

我认为它会解决你的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T16:22:06.997

假设`this-is-india`是一个变量或任意长度（即类别名称可能在长度或语法上大不相同，正如 Pitchinnate 在评论中所建议的那样），那么您可以纯粹使用 url 管理器来执行此操作，而无需像这样编辑您的 htaccess：

```
'urlManager'=>array(
    ...
    'rules'=>array(
        '<catName:[0-9a-zA-Z_\-]+>-<catId:\d+>'=>'products/index',
        ...
    ),
    ...
), 
```

这将采用末尾带有数字的字符的任意组合，并将末尾的数字用作`catId`，例如：

```
localhost/wowwaylabs/trunk/mpi_v1/this-is-india-1 
```

将解决

```
localhost/wowwaylabs/trunk/mpi_v1/index.php?r=products/index&catId=1&catName=this-is-india 
```

相似地;

```
localhost/wowwaylabs/trunk/mpi_v1/this-is-another-title-or-category-or-whatever-999 
```

将解决：

```
localhost/wowwaylabs/trunk/mpi_v1/index.php?r=products/index&catId=999&catName=this-is-another-title-or-category-or-whatever 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T13:28:15.833

通过 htaccess :)

```
<IfModule mod_rewrite.c>
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$/? index.php?r=$1 [PT,L]

</IfModule> 
```

`localhost/wowwaylabs/trunk/mpi_v1/products/index/&catId=1`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T14:40:15.560

如果您已经在使用 Yii 的 URL 管理器（如果没有按照 Workonphp 的说明打开它）尝试创建一个规则并将其添加到规则的顶部，如下所示：

```
'<category_id:\w+>' => 'products/index', 
```

这会做什么，如果在 url 中只传递一个参数（即类别名称和 id）并且它是一个字符串/单词（:\w+ 指定这个）而不是一个数字（:\d+），它将默认为产品控制器和索引操作。然后它将`$category_id`作为变量传递给控制器​​。然后，您将需要修改该操作以将 id 从字符串中拉出，如下所示：

```
public function actionIndex($category_id) {
    $pieces = explode('-',$category_id);
    $cat_id = end($pieces); //actual category id seperated from name
    //...rest of code for this function
} 
```

# php - 使用电子邮件 ID 的 Facebook 个人资料图片？

> ID：14399901
> 
> 赞同：0
> 
> 时间：2013-01-18T13:24:49.420
> 
> 标签：php, facebook

我只想通过使用电子邮件 ID 显示 facebook 个人资料图像...
我已经使用用户 ID 完成了此操作，但我需要使用电子邮件 ID 显示...

/** 下面是带有用户 ID 的工作代码，但我需要带有电子邮件 ID 的代码 **/

```
<?php 
    $t  = "11"; 
    if(isset($_POST['email_id'])) 
    { 
         $t=$_POST['email_id'];     
    } 
?> 

<form name="sample_form" action="" method="post"> 
    <table> 
    <tr> 
        <td></td> 
        <td>
            <img src="https://graph.facebook.com/&lt;?php echo $t; ?>/picture?type=large" alt="" />
        <td> 
    </tr> 
    <tr> 
        <td>Username / User ID :</td> 
        <td> 
            <input type="text" value="" name="email_id" />
        </td> 
    </tr>
    <tr>
        <td>
        <td>
            <input type="submit" value="Find FB profile image" />
        </td>
    </tr>
    </table>
</form> 
```

谁能知道 speako.com 是如何工作的
，它可以使用电子邮件 ID 获取 facebook 个人资料图片
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:28:28.000

如果不征得用户的许可，这是不可能的。

但是，如果您有一个有效的访问令牌，我相信这个端点可能会满足您的需求： `https://graph.facebook.com/search?q={EMAIL}&type=user`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-25T10:28:35.183

**这在 2011 年之后是不可能的，因为在那之后，用户可以将电子邮件设为私有，因此您无法借助电子邮件 ID 获取数据。**

# android - 从 telnet 发送到模拟器的 SMS 以奇怪的字符显示

> ID：14399902
> 
> 赞同：0
> 
> 时间：2013-01-18T13:24:51.597
> 
> 标签：android, android-emulator, sms, telnet

我尝试从 telnet 向模拟器发送短信

使用这个命令：`sms send (number) (body)`

由于某些原因，有时会以普通英文查看消息，而有时会以汉字查看消息！

例如，当我尝试这个时，我得到了完美的信息：

```
sms send 123 hey man what's up 
```

当我尝试这个时，我得到了汉字：

```
sms send 123 car id =5, latitude = 4343.343, longitude =23112 
```

这是我的代码：

```
public class SmsReceiver extends BroadcastReceiver {

ArrayList<SmsReceivedListener> listeners = new ArrayList<SmsReceivedListener>();
private static SmsReceivedListener listener;
private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";

@SuppressLint("NewApi") @Override
public void onReceive(final Context context, final Intent intent) {

    if (intent != null && SMS_RECEIVED.equals(intent.getAction())) {

        final SmsMessage smsMessage = extractSmsMessage(intent);

    if(getSmsReceivedListener()!=null)
    {
        String body =  smsMessage.getMessageBody();
        Toast.makeText((Context) context, body, 
                Toast.LENGTH_LONG).show();
     }

    }
}

@SuppressLint("NewApi") private SmsMessage extractSmsMessage(final Intent intent) {

    final Bundle pudsBundle = intent.getExtras();
    final Object[] pdus = (Object[]) pudsBundle.get("pdus");
    final SmsMessage smsMessage = SmsMessage.createFromPdu((byte[]) pdus[0]);

    return smsMessage;

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T21:16:51.183

我在 telnet 会话期间发现了与默认消息传递应用程序相同的问题。

问题通常在于您的 telnet 客户端和 androids telnet 服务器之间的通信。

打字时：

```
sms send 123 hello<Enter> 
```

立即正确接收到消息。

但是，如果您键入：

```
sms send 123 ha<Backspace>ello<Enter> 
```

您的 telnet 会话将显示与以前完全相同，但在消息应用程序中收到的消息包含中文字符。这来自未正确传输到服务器的字符。其他字符可能会产生相同的问题。

# python - py.test SetUp/TearDown 用于整个测试套件

> ID：14399908
> 
> 赞同：19
> 
> 时间：2013-01-18T13:25:04.533
> 
> 标签：python, unit-testing, pytest, xvfb

我有一个需要访问 X11 的 Python 包。我想使用 Xvfb，这样我就不必在构建机器上安装真正的 X11——在这种情况下是 Hudson。所以，我想在 py.test 启动时启动一个 Xvfb 服务器，使用该服务器进行所有测试，然后将其关闭。

我怎样才能做到这一点？

* * *

**注意**：我可以在每个测试类的 SetUp(TearDown) 中启动（停止）一个 Xvfb 服务器，但这有两个问题：首先，它很浪费。`Fatal IO error 0 (Success) on X server`其次，如果我正确终止服务器或者我挂起不会死的 Xvfb 进程，它会因为奇怪而不起作用。如果有人感兴趣， 这是使用[xvfbwrapper 。](https://github.com/cgoldberg/xvfbwrapper)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-18T14:22:16.773

你可以使用[pytest-xvfb](https://pypi.python.org/pypi/pytest-xvfb/1.1.0)而不是弄乱这个……这样会更容易。

* * *

这实际上相当简单。在您的项目根目录中创建一个名为的文件`conftest.py`，其中包含以下内容：

```
import pytest
import os
import subprocess
import tempfile

@pytest.fixture(scope="session", autouse=True)
def start_xvfb_server (request):
    tempdir = tempfile.mkdtemp()
    xvfb_cmd = ['Xvfb',
                ':1022',
                '-screen', '0', '800x600x24',
                '-fbdir', tempdir,
                '-noreset'
    ]
    xvfb_proc = subprocess.Popen(xvfb_cmd,
            stdout=open(os.devnull),
            stderr=open(os.devnull),
            shell=False
    )
    request.addfinalizer(xvfb_proc.kill) 
```

现在，您所要做的就是设置每个测试以将 DISPLAY 设置为 1022，这很简单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-15T12:42:34.917

或者，您可以简单地定义`setUpClass`/`tearDownClass`方法，如`unittest`模块文档中所述： [https ://docs.python.org/2/library/unittest.html#unittest.TestCase.setUpClass](https://docs.python.org/2/library/unittest.html#unittest.TestCase.setUpClass)

从 py.test v2.4 开始，完全支持它们。这个官方文档页面还记录了所有 xunit 样式的兼容方法： [https ://pytest.org/latest/xunit_setup.html](https://pytest.org/latest/xunit_setup.html)

# javascript - AjaxDoc - 如何配置？

> ID：14399909
> 
> 赞同：1
> 
> 时间：2013-01-18T13:25:18.350
> 
> 标签：javascript, documentation, sandcastle, shfb

我想记录我的项目。一切正常，但我无法让 AjaxDoc 正常工作。

拜托，有人可以给我写一些如何使用它们的简短教程吗？

我在 Visual Studio 中集成了 SHFB。[然后我从http://ajaxdoc.codeplex.com/](http://ajaxdoc.codeplex.com/)下载了 WebApp 项目，并将它们作为现有网站添加到我的解决方案中。我已经建立了这个站点，并且他的 URL 写入了 AjaxDoc 插件。

现在，AjaxDoc 默认配置为从 MicrosoftAjax.js 获取评论，它适用于我。但我尝试添加我自己的 MyJavaScript.js 并在 Projects 文件夹中创建 MyJavaScript.project.xml 但它不起作用。

JScript.project.xml：

```
<?xml version="1.0" encoding="utf-8" ?>

<project xmlns:scriptdoc="http://www.w3.org/2001/XMLSchema-instance"
  scriptdoc:noNamespaceSchemaLocation="ScriptDocProject.xsd">
  <scripts>
    <script path="projects/JScript.js"/>
  </scripts>
  <namespaces>
    <namespace>TestScript</namespace>
  </namespaces>
</project> 
```

JScript.js：

```
 /// <reference path="_references.js" />

    Type.registerNamespace("TestScript");

    TestScript.JavaScriptClass = function demoScript$JavaScriptClass() {
        /// <summary>
        /// This is a summary for the singleton
        /// </summary>

        /// <field name="field1" type="String" >This is a demo field.</field>

        this._property1Value = 1;
    }

    TestScript.JavaScriptClass.prototype = {
        method: function (param1, param2) {
            /// <summary>
            /// This is a demo method of <see cref="JavaScriptClass" />.
            /// </summary>
            /// <param name="param1" type="Number" integer="true">This is parameter 1 of the demo method <see cref="JavaScriptClass.method" />.</param>
            /// <param name="param2" type="String">This is parameter 2 of the demo method <see cref="JavaScriptClass.method" />.</param>
            /// <returns type="String">Returns a demo result.<returns>
            return "Hello world";
        },
        get_Property1: function () {
            /// <value type="Number" integer="true">This is a demo property.</value>
            return this._property1Value;
        },
        set_Property1: function (value) {
            this._property1Value;
        },
        field1: null
    };

    demoScript.JavaScriptClass.registerClass("TestScript.JavaScriptClass"); 
```

我从互联网上找到的一些项目中复制了这个......

我做错了什么？我如何评论我自己的项目，而不仅仅是 AjaxDoc/Projects 文件夹中的脚本？

感谢您的回复。

# javascript - Phonegap 下载 html 文件并替换它（来源）

> ID：14399918
> 
> 赞同：2
> 
> 时间：2013-01-18T13:25:56.400
> 
> 标签：javascript, html, cordova, download

我想弄清楚如何用下载的文件替换或添加 Phonegap 的一些源文件。

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <script type="text/javascript" charset="utf-8" src="cordova-2.3.0.js"></script>
        <script type="text/javascript">
               function onBodyLoad()
            {
                document.addEventListener("deviceready", onDeviceReady, false);
            }

            function downloadFile(){
                window.requestFileSystem(
                                         LocalFileSystem.PERSISTENT, 0,
                                         function onFileSystemSuccess(fileSystem) {
                                         fileSystem.root.getFile(
                                                                 "dummy.html", {create: true, exclusive: false},
                                                                 function gotFileEntry(fileEntry){
                                                                 var sPath = fileEntry.fullPath.replace("dummy.html","");
                                                                 var fileTransfer = new FileTransfer();
                                                                 fileEntry.remove();

                                                                 fileTransfer.download(
                                                                                       "https://dl.dropbox.com/u/xxxxx/index_2.html",
                                                                                       sPath + "index_aerosoft.html",
                                                                                       function(theFile) {
                                                                                       console.log("download complete: " + theFile.toURI());
                                                                                       showLink(theFile.toURI());
                                                                                       },
                                                                                       function(error) {
                                                                                       console.log("download error source " + error.source);
                                                                                       console.log("download error target " + error.target);
                                                                                       console.log("upload error code: " + error.code);
                                                                                       }
                                                                                       );
                                                                 },
                                                                 fail);
                                         }, 
                                         fail);

            }

            function showLink(url){
                alert(url);
                var divEl = document.getElementById("ready");
                var aElem = document.createElement("a");
                aElem.setAttribute("target", "_blank");
                aElem.setAttribute("href", url);
                aElem.appendChild(document.createTextNode("Ready! Click To Open."))
                divEl.appendChild(aElem);

            }

            function fail(evt) {
                console.log(evt.target.error.code);
            }

            function onDeviceReady()
            {
                downloadFile();
            }

            </script>
    </head>
    <body onload="onBodyLoad()">
            <br />
            <p>
            DOWNLOADING FILE...<br />
            <span id="ready"></span>
            </p>
            </body>
</html> 
```

我可以下载和访问该文件，但我可以在某处将下载路径设置为 Phonegap 中的“www”文件夹吗？或者我如何找出文件的路径（所以我可以链接到该路径）

Xcode 控制台告诉我 `file://localhost/var/mobile/Applications/1AE34410-C57E-4896-8616-042E386552E0/Documents/index_2.html`

我可以以某种方式链接到那个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-26T16:06:40.580

你不能替换源代码中的代码......
因为android资产文件夹是只读的，你写的html放在那里......如果你可以编程java我建议将html文件从资产处理到sdcard然后运行代码从那里
你可以修改它

但我在phonegap-build（在dreamweaver中）做了这个，它对我有用：

```
// retrive html data as String in Var : MY_Data
window.localStorage.setItem("mydiv_update", My_Data);
document.getElementById("your_div").innerHtml = My_Data; 
```

然后每次加载页面时检查是否`window.localStorage.getItem("mydiv_update")`存在。如果是，则更改 div 的 innetHTML 。像这样 ：

```
if(window.localStorage.getItem("mydiv_update")){
  document.getElementById("your_div").innerHtml = window.localStorage.getItem("mydiv_update");
} 
```

并且不要忘记存储权限：

***权限***

* * *

**安卓**

应用程序/res/xml/config.xml：

```
<plugin name="File" value="org.apache.cordova.FileUtils" />
<plugin name="FileTransfer" value="org.apache.cordova.FileTransfer" /> 
```

应用程序/AndroidManifest.xml ：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

**八达**

不需要任何权限。

* * *

**黑莓网络工程**

www/plugins.xml：

```
<plugin name="File" value="org.apache.cordova.file.FileManager" />
<plugin name="FileTransfer" value="org.apache.cordova.http.FileTransfer" /> 
```

www/config.xml：

```
<feature id="blackberry.io.file" required="true" version="1.0.0.0" />
<feature id="blackberry.utils"   required="true" version="1.0.0.0" />
<feature id="blackberry.io.dir"  required="true" version="1.0.0.0" />
<rim:permissions>
    <rim:permit>access_shared</rim:permit>
</rim:permissions> 
```

* * *

**iOS：**
配置.xml：

```
<plugin name="File" value="CDVFile" />
<plugin name="FileTransfer" value="CDVFileTransfer" /> 
```

* * *

**webOS：**
不需要权限。

* * *

**Windows Phone：**
不需要权限。

# java - 十进制格式四舍五入到小数点后四位

> ID：14399919
> 
> 赞同：0
> 
> 时间：2013-01-18T13:26:05.897
> 
> 标签：java, decimalformat

我试图将我的双数转换为十进制。每次我敬酒我四舍五入的数字时，都会显示“java.text.decimalformat@0java.text.decimalformat@0”。这是我的代码。希望你能帮我弄清楚我四舍五入的数字。

```
gps = new GPSTracker(Test.this);
    double lat = gps.getLatitude();
    DecimalFormat lat2 = new DecimalFormat();
    lat2.setMaximumFractionDigits(4);
    lat2.format(lat);

    double lng = gps.getLongitude();
    DecimalFormat lng2 = new DecimalFormat();
    lng2.setMaximumFractionDigits(4);
    lng2.format(lng);

    super.onCreate(savedInstanceState);
    setContentView(R.layout.abc);

    Bundle extras = getIntent().getExtras();
    String ItemChosen = extras.getString("s");

    String latIndex = extras.getString("latt");
    double la = Double.parseDouble(latIndex);
   DecimalFormat la2 = new DecimalFormat();
   la2.setMaximumFractionDigits(4);
    la2.format(la);

    String lngIndex = extras.getString("lng");
    double ln = Double.parseDouble(lngIndex);
   DecimalFormat ln2 = new DecimalFormat();
  ln2.setMaximumFractionDigits(4);
   ln2.format(ln);

        Toast.makeText(getApplicationContext(),ln2 + " " + la2, 
        Toast.LENGTH_LONG).show();

        Toast.makeText(getApplicationContext(),lng2 + " " + lat2, 
                Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T13:28:05.463

你没有`DecimalFormat`正确使用。这个想法不是您将`DecimalFormat`对象本身转换为字符串，就像您在这里所做的那样：

```
ln2 + " " + la2 
```

...这是您调用`format` *并使用返回值*。

（目前您正在调用`format`但忽略返回值，这使其无用。）

所以你要：

```
ln2.format(ln) + " " + la2.format(la) 
```

您可能想要的不止这些，但这是您当前代码中最基本的问题。

# vb.net - 如何在 VB.Net 中扩展类的构造函数？

> ID：14399922
> 
> 赞同：1
> 
> 时间：2013-01-18T13:26:18.370
> 
> 标签：vb.net, constructor, extension-methods

假设我有：

```
Public Class clsTest
   Public Sub New()
   End Sub

   Public Sub New(name_ As String)
      '...
   End Sub
End Class 
```

我想扩展这个类：

```
<System.Runtime.CompilerServices.Extension> _
Public Sub methodA(t1 As clsTest, i As Integer)
    '...
End Sub 
```

但我不能将构造函数扩展为：

```
<System.Runtime.CompilerServices.Extension> _
Public Sub New(t1 As clsTest, name_ As String, i As Integer)
    '...
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T13:32:15.243

您[不能](https://stackoverflow.com/questions/4782034/is-it-possible-to-create-constructor-extension-method-how)使用扩展方法扩展构造函数。`static`扩展方法与（`shared`在 VB 中）允许编写的方法几乎相同

```
instanceOfMyClass.SomeExtension(someParameter) 
```

代替

```
MyClass.SomeExtension(instanceOfMyClass, someParameter) 
```

如果你没有访问权限`clsTest`（你真的应该改变你的[**命名**](http://msdn.microsoft.com/en-us/library/ms229002.aspx)）但你想扩展它，你也可以创建一个继承自它的新类：

```
Public Class Foo ' consider this as your clsTest
    Public Sub New()
    End Sub
    Public Property Name As String
    Public Property Number As Int32
    Public Sub New(name As String)
        Me.Name = Name
    End Sub
End Class

Public Class Bar
    Inherits Foo

    Public Sub New(name As String, i As Integer)
        MyBase.Name = name
        MyBase.Number = i
    End Sub
End Class 
```

最后，也许您不需要扩展类，但您只是在寻找一种方便的方法来在单行中初始化它：

```
Dim foo = New Foo("test") With {.Number = 4711} 
```

# unit-testing - 使用 Jasmine 测试 jQuery UI“对话框”逻辑

> ID：14399923
> 
> 赞同：1
> 
> 时间：2013-01-18T13:26:25.457
> 
> 标签：unit-testing, jquery-ui-dialog, jasmine

在我的 JS 视图代码中，我使用[jQuery UI 对话框](http://jqueryui.com/dialog/)组件来呈现弹出窗口。

我这样实例化它：

```
var popupDialog = $("#myPopupDiv").dialog({
    title: "My dialog",
    dialogClass: "myDialogClass",
    create: createHandler,
    draggable: false,
    width: width,
    height: height,
    autoOpen: false
}); 
```

请注意，它的 autoOpen 设置为“false”。我在“创建”处理程序中打开它：

```
var createHandler = function(event, ui) {
    //Vi venter litt for å sikre at popupen er "klar"
    setTimeout(function () {
        popupDialog.dialog("open");
    }, 5);
}; 
```

开放逻辑包含在 a`setTimeout`中以确保弹出窗口已准备就绪。

该代码在浏览器应用程序中运行良好，但是当我使用[Jasmine 测试框架](http://pivotal.github.com/jasmine/)运行此代码时出现错误：

> 错误：无法在初始化之前调用对话框上的方法；试图调用方法“打开”

测试实际上通过了，所以清楚地呈现了该项目。但是我不喜欢运行测试时出现的错误！

我怀疑由于 Jasmine 测试运行得如此之快，组件还没有时间进行自我初始化。那么**如何确保组件已初始化呢？**我认为将这个逻辑放在“创建”处理程序中会处理这个问题，因为该事件是“*在创建对话框时触发。* ”，但显然情况并非如此。

这是我测试它的方法：

```
it("should show my popup", function () {

    var myPopupLink = $('.popupLink');

    myPopupLink.click();

    //Wait until popup is shown
    waitsFor(function () {
        return !$('.myDialogClass').is(":hidden");
    }, "Popupen didn't show", 1000);

    //Check that the DOM is as expected
    expect($('.myDialogClass .popupContentDiv')).toExist();
    expect(...

    //Close popup
    myPopupLink.click();
    expect($('.myDialogClass .popupContentDiv')).not.toExist();

}); 
```

有人知道如何验证弹出对话框的初始化状态吗？还是有其他解决方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T11:54:40.340

您的测试的问题在于，它更像是验收测试而不是单元测试。您尝试测试的大部分内容都是 jQueryUi 的功能。您真正想要测试的是`createHandler`延迟打开对话框。所以你`popupDialog.dialog`应该是一个间谍，在那里你可以检查它是否在延迟后被调用。

目前你的代码真的很难测试，因为它直接基于 jquery。您应该考虑拥有可以[注入](http://martinfowler.com/articles/injection.html)依赖关系的函数，而不是依赖全局变量，例如`popupDialog`.

这是一个关于如何模拟所有依赖项的示例：

```
//mock out setTimeout so you dont have to wait in your test
jasmine.Clock.useMock();

//create a mock that will return from $().dialog()
var mockDialog = jasmine.createSpy('dialog');
// mock $ to return {dialog: mock that return {dialog: mockDialog}}
var mock$ = spyOn(window, '$').andReturn({
  dialog:jasmine.createSpy('$').andReturn({
    dialog: mockDialog
  })
})

expect(mock$).toHaveBeenCalled();

// call the create function    
window[mock$.mostRecentCall.args[0].create]();

jasmine.Clock.tick(4999);
expect(mockDialog$).not.toHaveBeenCalled();
jasmine.Clock.tick(5001);
expect(mockDialog$).toHaveBeenCalledWith('open'); 
```

如您所见，模拟所有 jQuery 依赖项非常复杂。因此，您可以重写代码以获得更好的可测试性，或者使用 selenium capybara 等将这些东西作为验收测试进行测试。

# c++ - 我应该使用公共变量还是私有变量？

> ID：14399929
> 
> 赞同：37
> 
> 时间：2013-01-18T13:26:44.910
> 
> 标签：c++, oop, abstraction, getter-setter, data-access

我第一次做一个大项目。我有很多类，其中一些具有公共变量，一些具有带有 setter 和 getter 方法的私有变量，并且同样具有两种类型。

我决定重写这段代码，主要只使用一种类型。但我不知道我应该使用哪个（仅用于同一对象中的方法的变量始终是私有的，不是这个问题的主题）。

我知道公共和私人意味着什么的理论，但在现实世界中使用的是什么，为什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-18T13:28:16.167

`private`数据成员通常被认为是好的，因为它们提供了封装。

为它们提供 getter 和 setter 打破了这种封装，但它仍然比`public`数据成员更好，因为只有一次访问该数据的点。

您会在调试过程中注意到这一点。如果它是私有的，你**知道**你只能修改类内部的变量。如果它是公开的，您将不得不搜索整个代码库以查找*可能*被修改的位置。

尽可能禁止 getter/setter 和 make properties `private`。这遵循了信息隐藏的原则——你不应该关心一个类有什么属性。它应该是独立的。当然，在实践中这是不可行的，如果可行，那么遵循这一点的设计将比不遵循这一点的设计更加混乱和难以维护。

这当然是一个经验法则——例如，我只使用 a `struct`（相当于具有`class`公共访问权限的 a ），比如说，一个简单的点类：

```
struct Point2D
{
   double x;
   double y;
}; 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-18T13:51:52.533

既然您说您知道理论，并且其他答案已经深入探讨了公共/私有、getter 和 setter 的含义，我想专注于为什么使用访问器而不是创建公共属性（C++ 中的成员数据） .

假设您在物流项目中有一个卡车类：

```
class Truck {
public:
    double capacity;

    // lots of more things...
}; 
```

如果您是北美人，您可能会使用加仑来表示卡车的容量。想象一下，您的项目已经完成，它运行良好，尽管`Truck::capacity`已经完成了许多直接使用。实际上，您的项目取得了成功，因此一些欧洲公司要求您调整您的项目以适应他们；不幸的是，该项目现在应该使用公制系统，因此应该使用升而不是加仑来表示容量。

现在，这可能是一团糟。当然，一种可能性是只为北美准备一个代码库，只为欧洲准备一个代码库。但这意味着应该在两个不同的代码源中应用错误修复，这被认为是不可行的。

解决方案是在您的项目中创建配置可能性。用户应该能够设置加仑或升，而不是固定的、硬连线的加仑选择。

使用上面看到的方法，这将意味着大量工作，您将必须跟踪 的所有用途`Truck::capacity`，并决定如何处理它们。这可能意味着修改整个代码库中的文件。作为替代方案，让我们假设您决定采用更多`theoretic`方法。

```
class Truck {
public:
    double getCapacity() const
        { return capacity; }

    // lots of more things...
private:
    double capacity;
}; 
```

一个可能的替代更改不涉及对类接口的修改：

```
class Truck {
public:
    double getCapacity() const
        { if ( Configuration::Measure == Gallons ) {
            return capacity;
          } else {
             return ( capacity * 3.78 );
          }
        }

    // lots of more things...
private:
    double capacity;
}; 
```

（请注意，有很多方法可以做到这一点，一种只是一种可能性，这只是一个例子）

您必须创建全局实用程序类配置（但无论如何您都必须这样做），并在`truck.h`for中添加一个包含`configuration.h`，但这些都是本地更改，您的代码库的其余部分保持不变，从而避免了潜在的错误。

最后，你还说你现在在一个大项目中工作，我认为这些原因实际上更有意义。请记住，在大型项目中工作时要牢记的目标是创建可维护的代码，即您可以更正并使用新功能扩展的代码。您可以忘记个人小型项目中的 getter 和 setter，尽管我会尽量让自己习惯它们。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-18T13:50:08.020

对于什么应该是私有的/公共的或受保护的，没有硬性规定。

这取决于您的班级的角色及其提供的内容。

*   构成类内部工作的所有方法和成员都应设为**私有**。
*   一个班级向外界提供的一切都应该是**公开**的。
*   可能必须在此类的特化中扩展的成员和方法可以声明为**protected**。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-18T14:08:00.997

从 OOP 的角度来看，getter/setter 有助于封装，因此应始终使用。当您调用 getter/setter 时，该类可以在幕后为所欲为，并且该类的内部不会暴露在外部。

另一方面，从 C++ 的角度来看，如果类在您只想获取/设置一个值时做了很多意想不到的事情，这也可能是一个劣势。人们想知道某些访问是否会导致巨大的开销或是否简单高效。当您访问公共变量时，您确切地知道您得到了什么，当您使用 getter/setter 时，您不知道。

尤其是如果你只做一个小项目，花时间编写 getter/setter 并在你决定更改变量名称/类型/时相应地调整它们会产生大量的忙碌工作而收效甚微。你最好把时间花在编写有用的代码上。

当 C++ 代码不提供真正的收益时，它们通常不使用 getter/setter。如果您设计一个 1,000,000 行的项目，其中包含许多必须尽可能独立的模块，这可能是有道理的，但对于您每天编写的大多数正常大小的代码来说，它们是多余的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-18T14:00:28.803

有一些数据类型的唯一目的是保存明确指定的数据。这些通常可以编写为具有公共数据成员的结构。除此之外，一个类应该定义一个抽象。公共变量或琐碎的 setter 和 getter 表明设计没有经过充分考虑，导致聚集了一些没有抽象任何东西的弱抽象。与其考虑数据，不如考虑**行为**：这个类应该做 X、Y 和 Z。从那里，决定需要哪些内部数据来支持所需的行为。一开始这并不容易，但要不断提醒自己重要的是行为，而不是数据。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-18T13:29:04.243

通常不鼓励使用公共变量，更好的形式是将所有变量设为私有并使用 getter 和 setter 访问它们：

```
private int var;

public int getVar() {
  return var;
}

public void setVar(int _var) {
  var = _var;
} 
```

Eclipse 等现代 IDE 提供“实现 Getter 和 Setter”和“封装字段”等功能（用相应的 getter 和 setter 调用替换所有对变量的直接访问），从而帮助您做到这一点。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-18T16:36:08.883

私有成员变量优于公共成员变量，主要是出于上述原因（封装、明确指定的数据等）。它们还提供了一些数据保护，因为它保证没有外部实体可以在需要时通过 setter 的正确通道来更改成员变量。

getter 和 setter 的另一个好处是，如果您使用的是 IDE（如 Eclipse 或 Netbeans），则可以使用 IDE 的功能来搜索代码库中调用该函数的**每个**位置。它们提供了关于该特定类中的一条数据在何处被使用或修改的可见性。此外，您可以通过使用内部互斥锁轻松地使对成员变量的访问成为线程安全的。getter/setter 函数将在访问或修改变量之前获取此互斥锁。

我支持抽象到它仍然有用的程度。为了抽象而抽象通常会导致比它的价值更复杂的混乱。

# jquery - 创建动态 div 和表单以与 fancybox 一起使用

> ID：14399930
> 
> 赞同：0
> 
> 时间：2013-01-18T13:26:45.593
> 
> 标签：jquery, fancybox

我有一个链接很少的页面。每个链接都应在 Fancybox 上打开一个表单，从中发送邮件。所有链接的形式基本相同，只是标题和邮件地址不同。我需要 jQuery 来构建一个动态表单，其中隐藏的字段将保存一个锚点以从数据库中获取邮件地址。我需要 jQuery 根据链接 ID 或链接名称为每个 Fancybox 设置标题。我找到了一些教程并对其进行了一些更改。它可以工作，但如果我将 js 脚本分离到不同的文件，我会收到一个带有错误消息的 Fancybox，“无法加载请求的内容。请稍后再试。”

```
<!doctype html>
<head>
  <link rel="stylesheet" type="text/css" media="all" href="fancybox/jquery.fancybox.css">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
 <script type="text/javascript" src="fancybox/jquery.fancybox.js"></script>

</head>

<body>
<div id="wrapper">
    <p>Send Email from Fancybox form.</p>

    <p><a class="modalbox" href="#inline">click to open</a></p>
</div>

<script type="text/javascript">
function validateEmail(email) { 
        var reg = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return reg.test(email);
    }
    var $div = $( "<div id='inline'><h2>Send us a Message</h2></div>").hide();
    var $contact = $("<form id='contact' name='contact' action='#' method='post'><label for='email'>Your E-mail</label><input type='email' id='email' name='email' class='txt'><br><label for='msg'>Enter a Message</label><textarea id='msg' name='msg' class='txtarea'></textarea><button id='send'>Send E-mail</button></form>");
    $div.append($contact);
    $("body").append($div);

    $(document).ready(function() {
        $(".modalbox").fancybox({

          closeEffect : 'none',
                        'afterClose':function () {
                        window.location.reload();
                        },
        });

        $("#contact").submit(function() { return false; });

        $("#send").on("click", function(){
            var emailval  = $("#email").val();
            var mailvalid = validateEmail(emailval);

            if(mailvalid == false) {
                $("#email").addClass("error");
            }
            else if(mailvalid == true){
                $("#email").removeClass("error");
            }

            if(mailvalid) {

                // first we hide the submit btn so the user doesnt click twice
                $("#send").replaceWith("<em>sending...</em>");

                $.ajax({
                    type: 'POST',
                    url: 'sendmessage.php',
                    data: $("#contact").serialize(),
                    success: function(data) {
                        if(data == "true") {
                            $("#contact").fadeOut("fast", function(){
                                $(this).before("<p><strong>Success! Your feedback has been sent, thanks :)</strong></p>");
                                setTimeout("$.fancybox.close()", 1000);
                            });
                        }
                    }
                });
            }
        });
    });

</script>

</body>
</html> 
```

当我将 js 分离到不同的文件时，原始 html 有效：

```
<div id="wrapper">
    <p>Send Mail from Fancybox form.</p>

    <p><a class="modalbox" href="#inline">click to open</a></p>
</div>

<!-- hidden inline form -->
<div id="inline">
    <h2>Send Mail</h2>

    <form id="contact" name="contact" action="#" method="post">
        <label for="email">Your E-mail</label>
        <input type="email" id="email" name="email" class="txt">
        <br>
        <label for="msg">Enter a Message</label>
        <textarea id="msg" name="msg" class="txtarea"></textarea>

        <button id="send">Send E-mail</button>
    </form>
</div> 
```

从链接创建动态 div 和表单的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:58:50.830

我设法解决它，通过 data-* 字段传递变量。设法打开fancybox：

```
content: $div.html(), 
```

欢迎任何更正。的HTML：

```
<div id="wrapper">
    <p>Send Email from Fancybox form.</p>

    <p><a class="modalbox" href="#inline" data-title='Email Tom Jhones' data-mail='testyoav'>click to open</a></p>
</div> 
```

js：

```
function validateEmail(email) { 
          // validation code ...
          return true;
           }

$(".modalbox").live('click', function() { 

    var $title = $(".modalbox").data('title');
    var $mail = $(".modalbox").data('mail');

    // create div with title from link data-title filde
    var $div = $( "<div id='inline'><h2>" + $title + "</h2></div>").hide();

    // create contact form with hidden fildes from data-* fildes
    var $contact = $("<form id='contact' name='contact' action='#' method='post'><label for='email'>Your E-mail</label><input type='email' id='email' name='email' class='txt'><br><label for='msg'>Enter a Message</label><textarea id='msg' name='msg' class='txtarea'></textarea><button id='send'>Send E-mail</button>"+
                     "<input name='name' type='hidden' value=" + $title + ">" +
                     "<input name='mail' type='hidden' value=" + $mail + ">" +
                     "</form>");

    $div.append($contact);

     $.fancybox({
         content: $div.html(),
         closeEffect : 'none',
                     'afterClose':function () {
                     window.location.reload();
                     },
     });

    $("#contact").submit(function() { return false; });

    $("#send").on("click", function(){
        var emailval  = $("#email").val();
        var mailvalid = validateEmail(emailval);

        if(mailvalid == false) {
            $("#email").addClass("error");
        }
        else if(mailvalid == true){
            $("#email").removeClass("error");
        }

        if(mailvalid) {
            // first we hide the submit btn so the user doesnt click twice
            $("#send").replaceWith("<em>sending...</em>");

            $.ajax({
                type: 'POST',
                url: 'sendmessagetest.php',
                data: $("#contact").serialize(),
                success: function(data) {
                if (data=='true') {                         
                        $("#contact").fadeOut("fast", function(){
                            $(this).before("<p><strong>Success! Your Mail has been sent, thanks :)</strong></p>");
                            setTimeout("$.fancybox.close()", 1000);
                        });
                    } else {
                        $("#contact").fadeOut("fast", function(){
                            $(this).before("<p><strong>Sending Mail Failed, Please try again later :(</strong></p>");
                            setTimeout("$.fancybox.close()", 10000);
                        });
                    }
                }
            });
        }
    });
}); 
```

# sql - Symfony2 在自定义存储库类中使用查询

> ID：14399935
> 
> 赞同：4
> 
> 时间：2013-01-18T13:27:02.567
> 
> 标签：sql, symfony, doctrine, doctrine-orm, dql

我有一个带有调用自定义查询的方法的存储库类。当我尝试`findAllWithRating()`从控制器内部调用时，出现以下异常：

```
[2/2] QueryException: [Syntax Error] line 0, col 156: Error: Unexpected 'NULL' 
```

如果我尝试在 phpmyadmin 中调用查询，则查询效果很好！

任何想法？

```
<?php
namespace Anchorbrands\Bundle\MessageBundle\Entity;

use Doctrine\ORM\EntityRepository;

class MessageRepository extends EntityRepository
{

    public function findAllWithRating() {
        return $this->getEntityManager()
            ->createQuery("SELECT id, user_id, title, slug, content, question, image_name, created_at, updated_at,
                    MAX(CASE WHEN rating = '1' THEN totalCount ELSE NULL END) 'Rating 1',
                    MAX(CASE WHEN rating = '2' THEN totalCount ELSE NULL END) 'Rating 2',
                    MAX(CASE WHEN rating = '3' THEN totalCount ELSE NULL END) 'Rating 3'
            FROM
            (
                SELECT  a.id, a.user_id, a.title, a.slug , a.content, a.question, a.image_name, a.created_at, a.updated_at,
                        rating, COUNT(*) totalCount
                FROM    AnchorbrandsMessageBundle:Message a
                        LEFT JOIN AnchorbrandsMessageBundle:Rating b
                            ON a.id = message_id
                GROUP BY a.id, a.user_id, a.title, a.slug, a.content, a.question, a.image_name, a.created_at, a.updated_at, rating
            ) r
            GROUP BY id, user_id, title, slug, content, question, image_name, created_at, updated_at")->getResult();
    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T17:27:22.643

您似乎混合了 DQL 和 SQL。您可以在[此处查看](http://docs.doctrine-project.org/en/latest/reference/dql-doctrine-query-language.html#from-join-and-index-by)DQL 的功能。

查看您的查询，我建议您使用 SQL 而不是 DQL。

如何在存储库中执行 SQL 查询的示例：

```
$sql = 'SELECT * FROM table WHERE id = :id';
$params = array(
    'id' => 4,
);

return $this->getEntityManager()->getConnection()->executeQuery($sql, $params)->fetchAll(); 
```

# php - 为什么这个 jquery 脚本不工作代码点火器

> ID：14399952
> 
> 赞同：0
> 
> 时间：2013-01-18T13:27:57.277
> 
> 标签：php, javascript, jquery, ajax, codeigniter

我正在使用代码点火器..我正在制作五行..实际上我正在做的是根据第一个选择框显示在第二个选择框中的选项..如果我不使用循环制作五行然后脚本工作正常但如果我把它们放在一个循环中..选择不起作用..在萤火虫中它给我的回应是错误的并说

```
 localhost/......./controller/get_items/undefined... 
```

我不知道该代码有什么问题

```
<?php 
for ($i = 0; $i < 5; $i++) {
?>
<?php echo form_dropdown('cat_id', $records2, '#', "id='category_".$i."'");?>

<?php echo form_dropdown('item_id', $records3, '#', "id='items_".$i."'"); ?>

<script type="text/javascript">
// <![CDATA[
$(document).ready(function()
{  
    for (var i= 0; i<5; i++)
    {
        $('#category_'+ i).change(function()
        {
            $('#items_'+ i > option").remove(); 
            var category_id = $('#category_'+ i).val(); 

            $.ajax({
                type    : "POST",
                url     : "stockInController/get_Items/"+category_id, 
                success : function(items)
                {
                    $.each(items,function(item_id,item_name) 
                    {
                        var opt = $('<option />'); 
                        opt.val(item_id);
                        opt.text(item_name);
                        $('#items_'+ i).append(opt); 
                    });
                }

            });
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:05:37.657

据我了解您的问题是解决方案。

你的功能应该是这样的

```
function getCategories(obj)
{

    var category_id = obj.id      ;
    $.ajax({
         type    : "POST",
         url     : "stockInController/get_Items/"+category_id, 
         success : function(data)
         {
             $('#'+id).html(data);// here you should provide 2nd dropdown id so that it can be replaced
         }
    });
} 
```

控制器方法

```
function get_Items()
{
    $id =   $this->uri->segment(3);
    $data['result'] = $this->somemodel->getProducts($id);
        $this->load->view('options',$data);
} 
```

看法

选项.php

```
foreach($result as $row){
?> <option value = "<?php echo $row->item_id?>"><?php echo $row->item_name?></option><?php    
} 
```

在每个类别的下拉列表中，您都应该调用此函数。

```
<?php echo form_dropdown('cat_id', $records2, '#', "id='category_".$i."' onclick = "getCategories(this)"");?> 
```

# python - Django Gunicorn 长轮询

> ID：14399958
> 
> 赞同：0
> 
> 时间：2013-01-18T13:28:09.277
> 
> 标签：python, django, event-handling, gunicorn

使用带有 gunicorn 的 Django 是否被认为是使用事件/异步服务器（如 Tornado、Node.js 等）的替代品？此外，这对处理长轮询/彗星服务有帮助吗？

最后，Gunicorn 是否只是用轻量级线程替换了消耗内存的 Apache 线程（在 Apache/mod-wsgi 的情况下），还是有额外的好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:15:35.363

默认情况下，Gunicorn 会生成常规的同步 WSGI 进程。但是，您可以告诉它生成使用 gevent、eventlet 或 tornado 的进程。我只熟悉 gevent，它当然可以用来代替 Node.js 进行长轮询。

mod_wsgi 和 gunicorn 的每个进程的内存占用量大致相同（根据我的有限经验），但是你会得到更多关于 gunicorn 的花里胡哨。如果您将默认工作类更改为 gevent（或 eventlet 或 tornado），您还可以从每个进程中获得更多性能。

# cruisecontrol.net - 如何将 exec 的输出分配给 NAnt 中的属性

> ID：14399962
> 
> 赞同：10
> 
> 时间：2013-01-18T13:28:20.803
> 
> 标签：cruisecontrol.net, nant

我的目标是用命令“git describe”的输出填充属性。我有一个财产：

```
<property name="build.version" value = ""/> 
```

我想用以下命令的输出填充它：**git describe**

我试过：

```
<exec program='${git.executable}' outputproperty='build.version'>
  <arg value='describe' />
</exec> 
```

但与 Ant 不同，NAnt 不支持**outputproperty** :( 仅**输出**（到文件）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-19T08:24:21.293

你是对的。您有`resultproperty`属性来保存退出代码和`output`属性来重定向输出。

为什么不重定向输出，然后通过`loadfile`任务加载文件：

```
<target name="foo">
  <property
    name="git.output.file"
    value="C:\foo.txt" />
  <exec program="${git.executable}" output="${git.output.file}">
    <arg value="describe" />
  </exec>
  <loadfile
    file="${git.output.file}"
    property="git.output" />
</target> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-07T09:01:49.043

使用修剪，您可以摆脱最后的回车符。例如，在上面的示例中，在末尾添加一行来修剪字符串

```
<target name="foo">
  <property
    name="git.output.file"
    value="C:\foo.txt" />
  <exec program="${git.executable}" output="${git.output.file}">
    <arg value="describe" />
  </exec>
  <loadfile
    file="${git.output.file}"
    property="git.output" />

  <property name="git.ouput.trimmed" value="${string::trim(git.output)}" />

</target> 
```

# android - 如何更改带有背景的图像按钮的位置

> ID：14399973
> 
> 赞同：1
> 
> 时间：2013-01-18T13:28:45.143
> 
> 标签：android, android-layout

我有以下视图，并想更改门的位置，使其顶部有一点填充。但是在我看来， padding top 属性并没有改变任何东西。那会是什么？

这是我的看法

[http://pbrd.co/UV4YsY](http://pbrd.co/UV4YsY)

和代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="100dp"
        android:background="@drawable/attach_header"
        android:orientation="horizontal"
         >

        <ImageButton
            android:id="@+id/btn_logout"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_gravity="right"
            android:layout_marginLeft="220dp"
            android:layout_marginRight="5dp"
            android:layout_marginTop="2dp"
            android:background="@drawable/logout"
            android:onClick="logoutAction"
            android:paddingTop="100dp" />

        <ImageButton
            android:id="@+id/btn_settings"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_gravity="right"
            android:layout_marginRight="2dp"
            android:layout_marginTop="2dp"
            android:background="@drawable/settings_blau"
            android:onClick="startSettingsAction"
            android:paddingLeft="5dp" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:54:19.210

尝试

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="100dp"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="100dp"
        android:layout_height="50dp"
        android:background="@drawable/furst"
        android:orientation="horizontal" 
        android:gravity="left"/>

    <ImageButton
        android:id="@+id/btn_logout"
        android:layout_width="98dp"
        android:layout_height="50dp"
        android:layout_gravity="right"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="5dp"
        android:layout_marginTop="2dp"
        android:background="@drawable/sec"
        android:onClick="logoutAction"
        android:paddingTop="100dp" />

    <ImageButton
        android:id="@+id/btn_settings"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:layout_marginRight="2dp"
        android:layout_marginTop="0dp"
        android:background="@drawable/thir"
        android:onClick="startSettingsAction" />

</LinearLayout> 
```

![在此处输入图像描述](../Images/91feac5d84e45b73b845fca1b4ba6a99.png)

# api - Soundcloud API：如何编写有关日期/ID 的条件？

> ID：14399975
> 
> 赞同：0
> 
> 时间：2013-01-18T13:28:48.483
> 
> 标签：api, soundcloud

我有这个用例，我没有通过 soundcloud 文档页面弄清楚：我获取了最近 10 首曲目。2小时后，我想看看有没有新的曲目。所以从技术上讲，我想问“给我 created_at 大于我最后获取的曲目的 created_at 的曲目”。如何使用当前的 Soundcloud API 规范做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:44:58.327

您可以`created_at[from]`在请求中发送参数，这将允许您为查询设置最小创建日期。

例如 `/users/x/tracks.json?created_at[from]=2012-11-01%2016%3A02%3A00`

[有关更多信息，请检查每个资源](http://developers.soundcloud.com/docs/api/reference#tracks)下方的过滤器标题:)

# asp.net-mvc - 用于本地虚拟化的 Kendo Grid ASP.Net MVC 服务器包装器

> ID：14399976
> 
> 赞同：0
> 
> 时间：2013-01-18T13:28:59.660
> 
> 标签：asp.net-mvc, telerik, kendo-grid

我正在查看 Kendo Grid 本地虚拟化演示页面，我注意到该演示没有包含 Asp.Net MVC 服务器包装器的示例。这是否意味着网格的本地虚拟化模式没有一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:39:58.153

> 这是否意味着网格的本地虚拟化模式没有一个？

在本地版本中，顾名思义，不需要服务器。数据存储在 javascript 变量中，并且仅存在于客户端上。我不明白你在问什么服务器端包装器。您所需要的只是一个将正确标记发送到客户端的服务器。从这一刻起，一切都在本地发生。

# jquery - .remove() 无法与 ajax 加载的内容一起正常工作

> ID：14399977
> 
> 赞同：0
> 
> 时间：2013-01-18T13:29:03.987
> 
> 标签：jquery

我有一个链接，点击它会在 div 上加载 ajax 内容：

html:

```
<div class="noticiaAberta"></div> 
```

ajax函数：

```
$('#feedbackNoticia a').click(function(){
    $.post('teste.php', function(data){
        $('#noticiasBox .descricao').fadeOut(200);
        $('#noticiasBox .noticiaAberta').delay(200).fadeIn(200).html(data);
    })
}); 
```

这是ajax文件：

```
<div class="ajax">
    <a class="close"></a>
    <img src="assets/images/temp/noticia-clicada.jpg" alt="">
    <h1>teste adf asdf laskdfjl aksdjfl kasjdflk jasdlfk jasldkf jasd asdfk lahsdfkl jhasdkfj hasdfkhj</h1>
    <div class="pNoticias">
        <p>teste</p>
    </div>
</div>
<script type="text/javascript">
    $('.ajax .close').click(function(){
        $('.ajax').remove();
    })
</script> 
```

ajax 工作正常，但删除功能不能正常工作，当我点击它时，只删除`.close`链接

有人知道它是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:32:35.963

将Javascript更改为：

```
$(document).on('click','.ajax .close', function(){
    $('.ajax').remove();
}) 
```

这样，您将确保与指定选择器匹配的任何动态创建的元素都将附加处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T13:35:13.133

您的函数应该在 JQuery 中定义，并且您应该使用委托来自动绑定来自 Ajax 结果的所有新元素。

```
 $(function(){
     $(document).delegate('.ajax, .close', 'click', function(){
         $('.ajax').remove();    
     });
  }); 
```

有关更多信息，请参阅此帖子：[动态添加元素并尝试使用选择器 .click 事件 Jquery](https://stackoverflow.com/questions/13384588/dynamically-adding-elements-and-trying-to-use-the-selectors-click-event-jquery)

[http://jsfiddle.net/fTk6t/](http://jsfiddle.net/fTk6t/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T14:50:25.597

我刚刚解决了这个问题。问题是`.ajax`div 没有高度，我放了一个`float:left`并解决了问题-.-

谢谢大家！

# c# - 多层架构中的异常处理最佳实践

> ID：14399979
> 
> 赞同：2
> 
> 时间：2013-01-18T13:29:06.547
> 
> 标签：c#, java, design-patterns, multi-tier, three-tier

我有一个三轮胎架构的应用程序。而且我不明白如何在这种情况下处理异常。我收集了一些问题：

1\. 我是否需要创建一个通用异常，例如`PersistentException`，并使所有 DAO 类方法仅抛出一种类型的异常 - `PersistentException`？即在每个 DAO 方法（CRUD）中都这样做：

```
 public create(Entity instance) {
       try {
        ...// all operations here
       } catch(Exception e) {
          throw new PersistentException(e);
       }
    } 
```

2\. 可以为*每个*EJB 服务创建一个异常类（每个 EJB 接口一个异常）吗？

即假设我有一个 EJB bean，例如`PersonManagementBean`, `OrganizationManagementBean`，`EmployeeManagementBean`具有相应的`@local`和`@remote`接口。它们暴露给客户端，即实际上它们是会话外观（因此它们位于服务层）。所以为每个 bean ( `PersonManagementException`, `OrganizationManagementException`, `EmployeeManagementException`) 创建相应的异常类是个好主意吗？

或者最好只调用一个异常`ServiceException`（如 DAO 的情况）？

3\. 什么类型的异常可以抛出我的服务（繁忙）级别（*通常情况下*）？我可以将 DAO ( `PersistentException`) 异常传播给客户端吗？IE

```
public void relocatePerson() {
   try {
      Person p = personDao.getPerson(); // can throw PersistentException
      ....
      if (someCondition) {
         throw new PersonManagementException(); // throwing same PersonManagementException
      }
      ....
   } catch(PersonManagementException e) {
       throw e; //don't need to rewrap same exception
   } catch(PersistentException e) {
       throw e; // DO I need to throw it as PersistentException to client? Or it's better to rewrap it as  PersonManagementException?
   } catch(Exception e) {
       throw new PersonManagementException(e) //throwing all exception as service specific exception
   }

} 
```

或者我需要将所有异常（在常见情况下）重新抛出为特定于服务的异常？

*   “在一般情况下”我的意思是我知道在某些情况下，某些方法可能会抛出带有一些有用信息的额外异常（例如`ValidationException`有关哪些对象未通过验证规则的信息）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:02:16.620

For any exception that signals **failure**, use just one exception. Rationale: the client can't do anything in this case but log the stacktrace and/or report the error to the user.

I some special circumstances you'll need to throw an exception just to signal that an alternative approach to serving the request is needed. **Only these cases need a specific exception**.

The remote client will almost never want to know anything else than that a failure occurred; be **very careful** not to burden your remote interface with redundant exception classes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:54:59.307

是的，您应该使所有 DAO 类方法仅抛出一种类型的异常 - `PersistentException`。因为它可以帮助您将每种与数据库相关的异常捕获为一种类型。此外，您可以设置有关特定异常的消息，同时使用参数化构造函数将其设置为 PersistantException。`i.e. throw new PersistentException("Exception while opening a connection",e);`

您的第二个问题完全取决于您的要求。如果您想显示不同的错误并显示不同的错误页面并希望分别处理它们（每个 bean 的错误），那么您应该为每个 bean 创建单独的异常类。

你的第三个问题，根据我的观点，它很好。您可以将 PersistentException 传播到首先调用 DAO 或 Helpers 的级别 - 即 ActionBean 或 servlet。在那里你可以设置你的错误消息，然后你可以把它们扔给你的架构级处理程序（通常在配置或 xml 文件中配置）

在处理异常时不要忘记“早扔，晚赶”

# gcc - 让 CMake 使用 gccfilter

> ID：14399984
> 
> 赞同：4
> 
> 时间：2013-01-18T13:29:21.713
> 
> 标签：gcc, cmake, gccfilter

[GCCFilter](http://www.mixtion.org/gccfilter/)是一个简洁的 perl 脚本，它允许为 GCC 的输出着色，从而使调试更有趣，更重要的是，更快。

您可以通过调用将 GCCFilter 与 CMake 生成的 Makefile 一起使用

```
gccfilter -a -c make 
```

但是，这种方法有一些缺点： CMake 状态信息的延迟输出，CMake 命令中没有颜色是最明显的。

问题：有没有办法编写一些 CMake 模块来搜索`gccfilter`编译器是否为`gcc`，检查是否`COLOR_CXX`已设置（很容易到这里），然后告诉 CMake 替换对`gcc`by 的所有调用`gccfilter -a -c gcc`。

CMake 提供了变量`CMAKE_CXX_COMPILER`，但更改此变量将不允许 CMake 找到正确的包含路径等。`project()`在每次调用之前添加前缀的命令之后，我们可能会更改一些变量`gcc`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T13:40:24.677

您可以通过将[RULE_LAUNCH_COMPILE](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#prop_dir:RULE_LAUNCH_COMPILE)`gccfilter`属性指向使用所需选项调用的包装脚本来使用 CMake。`gccfilter`

`gccfilter_wrap`在最外层的 CMake 项目目录中创建一个可执行的 shell 脚本，其内容如下：

```
#!/bin/sh
exec gccfilter -a -c "$@" 
```

请务必设置文件的可执行位。然后在您的 中`CMakeLists.txt`，在添加目标之前设置`RULE_LAUNCH_COMPILE`目录属性：

```
project (HelloWorld)

set_directory_properties(PROPERTIES RULE_LAUNCH_COMPILE
   "${PROJECT_SOURCE_DIR}/gccfilter_wrap")

add_executable(HelloWorld HelloWorld.cpp) 
```

然后，生成的 makefile 规则将在每个编译器调用前加上`gccfilter_wrap`脚本。或者，该`RULE_LAUNCH_COMPILE`属性也可以设置为目标属性或全局属性。

该`RULE_LAUNCH_COMPILE`属性仅适用于基于 Makefile 的 CMake 生成器。

* * *

## 蒂洛编辑

这就是我最终解决问题的方式 - 基本上是这个解决方案的改写版本：

```
# GCCFilter, if appliciable
if(CMAKE_COMPILER_IS_GNUCXX OR CMAKE_COMPILER_IS_GNUCPP)
  option(COLOR_GCC "Use GCCFilter to color compiler output messages" ON)
  set(COLOR_GCC_OPTIONS "-c -r -w" CACHE STRING "Arguments that are passed to gccfilter when output coloring is switchend on. Defaults to -c -r -w.")
  if(COLOR_GCC)
    set_property(GLOBAL PROPERTY RULE_LAUNCH_COMPILE "${PROJECT_SOURCE_DIR}/cmake/gccfilter ${COLOR_GCC_OPTIONS}")
  endif()
endif() 
```

# bash - 打印 TERM、PATH 和 HOME 错误！重击

> ID：14399987
> 
> 赞同：1
> 
> 时间：2013-01-18T13:29:28.497
> 
> 标签：bash, unix

我写了一个很长的脚本，其中一部分打印了 TERM、PATH 和 HOME 变量的值。

```
$Var1="$TERM"
echo "TERM $Var1"

$Var2="$PATH"
echo "PATH $Var2"

$Var3="$HOME"
echo "Home $Var3"
echo 
```

但是，在脚本中，这给了我这个错误：

```
userinfo.sh: line 55: =xterm: command not found
TERM
userinfo.sh: line 58: =/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/home/student/ch399/bin: No such file or directory
PATH
userinfo.sh: line 61: =/home/student/ch399: No such file or directory
Home 
```

它正在打印我想要的值，但是之后它会立即打印一个错误。知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T13:33:36.757

`$`从变量的初始化中删除：

改变 ：

```
$Var1="$TERM"
echo "TERM $Var1"

$Var2="$PATH"
echo "PATH $Var2"

$Var3="$HOME"
echo "Home $Var3"
echo 
```

到：

```
Var1="$TERM"
echo "TERM $Var1"

Var2="$PATH"
echo "PATH $Var2"

Var3="$HOME"
echo "Home $Var3"
echo 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T13:36:59.213

你做错了^^

```
$Var1="$TERM"
echo "TERM $Var1" 
```

$Var1 ：这**输出**变量 Var1 的内容（这里它最初看起来是空的，所以它会输出：“”）

$TERM ：这将**输出**变量 XTERM 的内容（在这里您似乎将其设置为：“xterm”）

所以你对外壳说：

```
 =$TERM
 echo "TERM " 
```

创建输出（第一个是错误，第二个是回声）：

```
=xterm: command not found
TERM 
```

您应该改用：

```
Var1="$TERM"
echo "TERM $Var1"
Var2="$PATH" 
(etc.) 
```

# objective-c - 如何在命名类别中声明私有属性？

> ID：14399991
> 
> 赞同：11
> 
> 时间：2013-01-18T13:30:04.850
> 
> 标签：objective-c, properties, private, objective-c-category, associated-object

我知道通过将私有属性放在该类的实现（`.m`）文件中声明的该类的未命名类别中来声明该类的私有属性的可能性。那**不是**我想做的。

我正在处理一个为该类添加一些功能的类的命名类别。对于此功能，在我的类别中使用私有属性对我有很大帮助-因此实现此功能的通常方法（如上所述）似乎对我不起作用。或者是吗？请赐教！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-19T10:29:10.963

在您的类别的实现文件中，声明另一个类别并将其命名为`MyCategoryName_Private`，并在那里声明您的私有属性。使用关联对象提供`-propertyName`和方法的实现。`-setPropertyName:`

例如，您的实现文件可能如下所示：

```
#import "SomeClass+MyCategory.h"
#import <objc/runtime.h>

@interface SomeClass (MyCategory_Private)

@property (nonatomic, strong) id somePrivateProperty;

@end

@implementation SomeClass (MyCategory_Private)

static void *AssociationKey;

- (id)somePrivateProperty 
{
    return objc_getAssociatedObject(self, AssociationKey);
}

- (void)setSomePrivateProperty:(id)arg
{
    objc_setAssociatedObject(self, AssociationKey, arg, OBJC_ASSOCIATION_RETAIN);
}

@end

@implementation SomeClass (MyCategory)

// implement your publicly declared category methods

@end 
```

# java - 在 JDBC 中将密码哈希转换为密码

> ID：14399992
> 
> 赞同：0
> 
> 时间：2013-01-18T13:30:15.470
> 
> 标签：java, jdbc

我正在查询我的数据库以获取密码。但我得到了密码哈希。有没有办法将它转换为字符串。

```
SELECT passwordhash FROM userTable WHERE userID = 21600 
```

我没有任何带密码的字段。

请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T13:32:03.750

如果有办法，那将意味着正在使用损坏的散列算法。换句话说，不，没有办法从哈希返回到原始密码。

关键是使用相同的算法从输入的密码生成哈希，并将其与数据库中的哈希进行比较。这样，您可以通过将密码存储在数据库中来进行身份验证，而不会影响密码安全性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T13:33:28.533

> 我正在查询我的数据库以获取密码。

那么*要么*你会失败*，要么*你的系统不安全。您不应该以可逆的形式存储密码。

> 但我得到了密码哈希。

好的！这表明该系统是安全设计的。

存储密码哈希的全部*目的*是避免以*任何*可以反转的形式存储密码本身。

如果有人入侵了您的系统并获取了您的所有私钥，我不希望他们能够找到我的密码。如果他们只有散列 - 如果散列算法已被适当地选择 - 那么他们应该无法在合理的时间内从散列中恢复到原始密码。

同样，它也会阻止信任*您系统*的任何人知道密码。请记住，人们（不幸地）重复使用密码。由于密码存储不安全，X 公司不希望 Y 公司的某个用户作为其用户之一登录。（不幸的是，有太多地方*确实*存储甚至通过电子邮件发送明文密码 - 但不应该这样做。）

从根本上说，你应该退后一步——想想你*为什么*要尝试获取密码，以及你可以采取哪些不需要密码的替代方法。更改系统以*获取*用户的明文密码不应被视为可行的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T13:33:53.690

如果它真的是一个哈希，那么算法是单向的，你无法取回原始密码，除非使用[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)或一些蛮力工具。

# web-services - 生成 WSDL 名称的大型机 Web 服务

> ID：14399994
> 
> 赞同：0
> 
> 时间：2013-01-18T13:30:21.637
> 
> 标签：web-services, wsdl, mainframe

当我使用 WSDL 为大型机（IBM）创建 Web 服务时，服务上的名称是否应该与字帖上的名称匹配？

我刚刚创建了一项服务，但无法将 Web 服务上的属性与字帖上的字段匹配

如果他们不一样，我该怎么做

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T03:54:09.733

我想您说的是[CICS Web Services](http://pic.dhe.ibm.com/infocenter/cicsts/v4r2/index.jsp?topic=/com.ibm.cics.ts.webservices.doc/topics/dfhws_startHere.html)。

> 当我使用 WSDL 为大型机（IBM）创建 Web 服务时，服务上的名称是否应该与字帖上的名称匹配？

简短的回答：没有。

如果您从 WSDL 生成字帖，则字段名称可能不是您为其生成字帖的源语言中的有效变量名。

如果您从字帖生成 WSDL，则源语言中的字段名称可能不是有效的 XML 字段名称。

在任一情况下，生成的字帖都有注释，指示字帖中的哪些字段对应于 WSDL 中的哪些字段。

# arrays - PHP如何对数组进行分页

> ID：14399996
> 
> 赞同：0
> 
> 时间：2013-01-18T13:30:25.207
> 
> 标签：arrays, key, pagination

您好如何订购我的新阵列

```
array(2=>'test',5=>'bla',333=>'finish') 
```

到

```
array(0=>'test',1=>'bla',2=>'finish') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:33:29.253

您可以使用`array_values`： http: [//php.net/manual/fr/function.array-values.php](http://php.net/manual/fr/function.array-values.php)

```
array_values(array(2=>'test',5=>'bla',333=>'finish')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:32:28.447

我更喜欢[array_chunk](http://php.net/manual/en/function.array-chunk.php)函数，只需阅读文档