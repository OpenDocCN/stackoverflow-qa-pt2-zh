# StackOverflow 问答 14601000-14601999

# magento - 谷歌分析漏斗可视化没有正确报告 Magento OnePage 结帐过程

> ID：14601000
> 
> 赞同：1
> 
> 时间：2013-01-30T09:52:31.730
> 
> 标签：magento, google-analytics

我正在运行一个使用 OnePage 结帐方法的 Magento 网站。我已将以下脚本添加到 /app/design/frontend/< my site >/template/checkout/onepage.phtml：-

```
<script type="text/javascript">
Checkout.prototype.gotoSection = function(section) {
try {
_gaq.push(['_trackPageview', 'checkout/onepage/' + section]);
} catch(err) { }
section = $('opc-'+section);
section.addClassName('allow');
this.accordion.openSection(section);
};
</script> 
```

我在 Google Analytics 中设置了一个目标，它执行以下操作：-

```
Goal URL: /checkout/onepage/success/
Match Type: Head Match
Step 1: /checkout/cart/ - Cart
Step 2: /checkout/onepage/ - Login or Register
Step 3: /checkout/onepage/billing - Billing Address
Step 4: /checkout/onepage/shipping - Shipping Address
Step 5: /checkout/onepage/shipping_method/ - Shipping Method
Step 6: /checkout/onepage/payment/ - Payment Details
Step 7: /checkout/onepage/review/ - Review 
```

我遇到的问题是，虽然目标转换被正确报告，但我通过漏斗可视化收到不正确的报告结果，例如登录或注册阶段出现的 /checkout/onepage/billing，这意味着我在此阶段之后丢失了数据到人们离开的地方。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:41:39.433

这是我当前的设置，没有任何问题

![在此处输入图像描述](../Images/964a8ea862a1c8f97b5a9a3700392e11.png)

# sql - 将 18 小时添加到 getdate() 结果

> ID：14601001
> 
> 赞同：0
> 
> 时间：2013-01-30T09:52:31.837
> 
> 标签：sql, datetime, scalar

我试图在 18:00:00 时间获得昨天的日期。

我试过这个：

```
DECLARE @YesturdayDate datetime = DATEADD(D, 0, DATEDIFF(D, 0, GETDATE()-1));

select dateadd(h,18,@YesturdayDate) 
```

但是运行 select 语句时出现错误：

"必须声明标量变量 "@YesturdayDate"。"

这是为什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:54:40.150

您使用的是什么版本的 sql-server？我假设是 2005 年，那么您不能在声明它的同一行中初始化变量。

```
DECLARE @YesturdayDate datetime;
SET @YesturdayDate = DATEADD(D, 0, DATEDIFF(D, 0, GETDATE()-1));

select dateadd(hh,18,@YesturdayDate); 
```

（你也必须使用`dateadd(hh...`代替`dateadd(h...`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:55:41.643

你可以用一个`DATEADD`/`DATEDIFF`对来做到这一点：

```
DATEADD(day,DATEDIFF(day,'20010102',GETDATE()),'2001-01-01T18:00:00') 
```

这利用了两个恒定日期时间值之间的关系。它是“将 2001 年 1 月 2 日到现在的总天数加到 2001 年 1 月 1 日的 18:00”。这与“昨天给我 18:00”相同。

* * *

至于您报告的原始错误 - 如果它是*唯一*`GO`发生的错误，我唯一能想到的是您的两个语句实际上是分开的批次（通过命令彼此分开）

# symfony - Silex：设置防火墙会话生命周期

> ID：14601002
> 
> 赞同：2
> 
> 时间：2013-01-30T09:52:32.100
> 
> 标签：symfony, silex

一旦用户登录，我正在尝试延长默认生命周期。对于登录，我正在使用安全服务提供商，如下所示：

```
 $app = $this->_app;             
    $this->_app->register(new Silex\Provider\SecurityServiceProvider(), array(
        'security.firewalls' => array(
            'default' => array(
                'pattern' => '^.*$',
                'anonymous' => true, // Needed as the login path is under the secured area
                'form' => array('login_path' => '/signup/', 'check_path' => 'login_check', 'failure_path' => 'login_failure'),
                'logout' => array('logout_path' => '/logout/'), // url to call for logging out
                'users' => $this->_app->share(function() use ($app)
                    {
                        // Specific class App\User\UserProvider is described below
                        return new UserProvider($app['db']);
                    }),
            ),
        ),
        'security.access_rules' => array(
            array('^/restricted/$', 'ROLE_USER'),
        )
    )); 
```

我尝试过像这样设置会话生命周期（cookie）：

```
 $this->_app->register(new Silex\Provider\SessionServiceProvider(), array(
        'session.storage.options' => array('cookie_lifetime' => (60 * 60 * 12)), // 12 hours
    )); 
```

但还是一无所获。会话在 15 分钟左右后自行删除。

如何将登录安全防火墙寿命延长至 12 小时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:46:26.893

我想我终于让它工作了：

在数据库中保存会话似乎可以解决问题。

SQL：

```
 CREATE TABLE `session` (
      `session_id` varchar(255) NOT NULL,
      `session_value` text NOT NULL,
      `session_time` int(11) NOT NULL,
      PRIMARY KEY (`session_id`)
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

PHP：

```
 /* SESSION IN DB */
    $this->_app->register(new Silex\Provider\SessionServiceProvider());
    $this->_app['session.db_options'] = array(
        'db_table' => 'session',
        'db_id_col' => 'session_id',
        'db_data_col' => 'session_value',
        'db_time_col' => 'session_time',
    );
    $this->_app['session.storage.handler'] = $this->_app->share(function ()
        {
            return new PdoSessionHandler(
                $this->_app['db']->getWrappedConnection(), $this->_app['session.db_options'], $this->_app['session.storage.options']
            );
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-28T04:28:16.683

如果您不想在数据库中存储会话，这是一个解决方案：只需增加`session.gc_maxlifetime`php.ini。

当会话存储在文件中时，它们（默认情况下）被放入`/var/lib/php/sessions/`目录。很明显，这个目录必须不时清除。为了实现这一点，配置了一个 cron 作业，每 30 分钟`/etc/cron.d/php5`触发一次脚本。`/usr/lib/php5/sessionclean`此脚本接受 php 配置并`session.gc_maxlifetime`从那里获取，然后删除比此变量中指定的文件更旧的文件。

问题是：默认情况下`session.gc_maxlifetime`等于 1440 秒或 24 分钟。您可以将其增加到适合您的任何值，例如 24 小时（并通过会话 cookie 生命周期限制您的会话）。

# scala - 如何为Scala中的任何Traversable实现通用算法？

> ID：14601004
> 
> 赞同：9
> 
> 时间：2013-01-30T09:52:42.193
> 
> 标签：scala, generics, collections, implicit-conversion, scala-collections

我正在实现一个通用算法来返回一个基于其他两个集合的集合。问题可以简化为

```
def add[Repr <: Traversable[_]](coll1: Repr, coll2: Repr) = coll1 ++ coll2 
```

当我将算法应用于我定义为的集合 A 时出现问题

```
class A[T] extends Iterable[(Int,T)] with IterableLike[(Int,T), A[T]] { ... } 
```

即，A 的类型参数与继承的 Iterable 不同。Map 使用了类似的方法。

**地图示例：**

```
scala> val m1 = Map("a" -> 1, "b" -> 1, "c" -> 1)
m1: scala.collection.immutable.Map[java.lang.String,Int] = Map(a -> 1, b -> 1, c -> 1)

scala> val m2 = Map("a" -> 2, "c" -> 1)
m2: scala.collection.immutable.Map[java.lang.String,Int] = Map(a -> 2, c -> 1) 
```

以 m1 和 m2 作为参数应用 add 会产生一个 List：

```
scala> add(m1,m2)
res3: Traversable[Any] = List((a,1), (b,1), (c,1), (a,2), (c,1)) 
```

...而想要的结果类似于直接使用 ++ 方法：

```
scala> m1 ++ m2
res0: scala.collection.immutable.Map[java.lang.String,Int] = Map(a -> 2, b -> 1, c -> 1) 
```

使用定义为的集合 B 不会发生此问题：

```
class B[T] extends Iterable[T] with IterableLike[T, B[T]] { ... } 
```

例如，队列以类似的方式实现。

**队列示例：**

```
scala> val q1 = Queue(9,2,5)
q1: scala.collection.immutable.Queue[Int] = Queue(9, 2, 5)

scala> val q2 = Queue(7,3,1)
q2: scala.collection.immutable.Queue[Int] = Queue(7, 3, 1) 
```

在 q1 和 q2 上应用 add 可以得到想要的结果：

```
scala> add(q1,q2)
res4: Traversable[Any] = Queue(9, 2, 5, 7, 3, 1) 
```

**问题：** 有没有一种方法可以实现add，使得对各种travesables（包括类似于Map实现的集合）的结果与直接使用++方法时的结果相同？我一直在尝试在 A 类的伴随对象中实现隐式 CanBuildFrom，但没有成功。在我看来，问题在于算法，而不是集合实现，因为它也不适用于 Map。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T10:47:18.900

鉴于这`add`只不过是 的别名`TraversableLike.++`，第一步也是查看`++`的签名：

```
trait TraversableLike[+A, +Repr] extends ... {
  ...
  def ++:[B >: A, That](that: TraversableOnce[B])(implicit bf: CanBuildFrom[Repr, B, That]): That
  ...
} 
```

那么你所要做的就是把`this`第一个参数`that`变成第二个参数：

```
import collection.TraversableLike
import collection.generic.CanBuildFrom
def add[A, Repr, B >: A, That](coll1: TraversableLike[A, Repr], coll2: TraversableOnce[B])(implicit bf: CanBuildFrom[Repr, B, That]): That = {
  coll1 ++ coll2
} 
```

* * *

**更新**：我还调查了您需要做些什么才能`A`在`add`. 就目前而言（不做任何特殊的事情），在`A`返回的实例上添加应用`Iterable`而不是`A`：

```
import collection.{IterableLike, TraversableLike}
// Dummy `A` implementation, for illustration
class A[T]( val inner: Seq[(Int, T)] ) extends Iterable[(Int,T)] with IterableLike[(Int,T), A[T]] {
  def iterator: Iterator[(Int, T)] = inner.iterator
  override protected[this] def newBuilder: scala.collection.mutable.Builder[(Int, T),A[T]] = ???
  def :+(elem: (Int, T) ): A[T] = new A[T]( inner :+ elem )
}
object A  {
  def apply[T]( elems: (Int, T)* ) = new A( elems )
}
val a1 = A( 1-> "one", 2 -> "two" )
val a2 = A( 3-> "three", 4 -> "four", 5 -> "five" )
add(a1, a2) 
```

结果是：

```
res0: Iterable[(Int, String)] = List((1,one), (2,two), (3,three), (4,four), (5,five)) 
```

这是我通过 tibkering 发现的`CanBuildFrom`。我不能保证这是最好的例子，但它确实有效（我的意思是我们`A`在调用时得到一个结果`add`）：

```
import collection.IterableLike
import collection.generic.CanBuildFrom
import collection.mutable.Builder

class A[T]( val inner: Seq[(Int, T)] ) extends Iterable[(Int,T)] with IterableLike[(Int,T), A[T]] {
  def iterator: Iterator[(Int, T)] = inner.iterator
  override protected[this] def newBuilder: scala.collection.mutable.Builder[(Int, T),A[T]] = new A.ABuilder[T]
  def :+(elem: (Int, T) ): A[T] = new A[T]( inner :+ elem )
}
object A  {
  private val _empty = new A[Nothing]( Nil )
  def empty[T]: A[T] = _empty.asInstanceOf[A[T]]
  def apply[T]( elems: (Int, T)* ) = new A( elems )

  class ABuilder[T] extends Builder[(Int,T), A[T]] {
    protected var elems: A[T] = empty
    def +=(x: (Int, T)): this.type = { elems = elems :+ x; this }
    def clear() { elems = empty }
    def result: A[T] = elems
  }

  implicit def canBuildFrom[T]: CanBuildFrom[A[_], (Int,T), A[T]] = new CanBuildFrom[A[_], (Int,T), A[T]] {
    def apply(from: A[_]) = apply()
    def apply() = new ABuilder[T]
  }
} 
```

现在结果是：

```
res0: A[String] = ((1,one), (2,two), (3,three), (4,four), (5,five)) 
```

# javascript - 使一个 div 的大小等于另一个

> ID：14601005
> 
> 赞同：1
> 
> 时间：2013-01-30T09:52:47.540
> 
> 标签：javascript, jquery, html

我有两个 div，box 和 stylewidth。stylewidth 是 box 的子对象，我试图在函数中使其与 stylewidth 一样大。为此，我添加了这一行。

```
$("#box").width(("#styleWidth").width); 
```

问题是，盒子的大小没有改变，我不知道为什么。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T09:53:45.300

您忘记了内部 width() 函数和美元符号上的括号，并确保将其包装在 document.ready 中或在元素加载到 DOM 后添加它：

```
$("#box").width( $("#styleWidth").width() ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:56:03.307

您忘记了 jQuery 美元符号（在#styleWidth 之前）并且 .width 是一个函数，所以它需要 ()。

```
$("#box").width($("#styleWidth").width()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T09:55:13.533

你确定你不能用css解决这个问题吗？

您可以简单地使用`width:100%`假设定位和文档结构允许这样做。

# node.js - Windows 64 位中的 Testacular 无法启动浏览器

> ID：14601006
> 
> 赞同：2
> 
> 时间：2013-01-30T09:52:50.027
> 
> 标签：node.js, windows-8, 64-bit, yeoman, karma-runner

我正在尝试在 Windows 8 64 位中使用 Testacular 测试 AngularJS 应用程序。

当我运行“yeoman test”或“testacular start”命令时，我收到一条错误消息；“该系统找不到指定的路径”：

```
C:\Users\me\Dropbox\GitHub\Studentportalen\studentportalen>yeoman test

Running "test" task
info: Testacular server started at http://localhost:8080/
info (launcher): Starting browser PhantomJS
warn (watcher): Pattern "C:/Users/me/Dropbox/GitHub/Studentportalen/st
udentportalen/test/mock/**/*.js" does not match any file.
error (launcher): Cannot start PhantomJS
    CreateProcessW: The system cannot find the path specified.

info (launcher): Trying to start PhantomJS again.
error (launcher): Cannot start PhantomJS
    CreateProcessW: The system cannot find the path specified.

info (launcher): Trying to start PhantomJS again.
error (launcher): Cannot start PhantomJS
    CreateProcessW: The system cannot find the path specified.

info: Disconnecting all browsers
<WARN> Command failed:  Use --force to continue. </WARN>

Aborted due to warnings. 
```

我尝试将 Testacular 设置为使用 Chrome 而不是 PhantomJS，但得到了同样的错误。所以 PhantomJS 不是问题。

我听说这是因为 Node.js 不喜欢 64 位 Windows (?)。一种解决方法是设置一个 32 位 VM 进行测试，但这显然不是最优的。

这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T03:13:09.573

我也刚遇到这个问题。我发现要运行 Chrome 版本，我必须创建一个名为“CHROME_BIN”的系统变量，指向我的 chrome.exe 文件。所以我只是尝试创建一个指向我的 phantom.cmd 文件的“PHANTOMJS_BIN”变量，并且“hey presto”它起作用了:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:47:00.017

根据我的经验，testacular/Node.js 在 64 位 Windows 中运行良好。问题是大多数浏览器的启动配置文件在浏览器的文件路径中使用“ProgramFiles”环境变量。在 64 位 Windows 上，这指向安装大多数浏览器的“程序文件”而不是“程序文件 (x86)”。

有两种解决方案：

*   正如 johngeorgewright 建议的那样，使用指向正确位置的 [BROWSER]_BIN 环境变量：[Testacular Browser Configuration](http://testacular.github.com/0.6.0/config/browsers.html)
*   更改启动配置文件。这些纯 JS 文件位于 testacular 安装的子目录“lib\launchers”中。

# rendering - Highcharts IE10 支持

> ID：14601009
> 
> 赞同：1
> 
> 时间：2013-01-30T09:52:55.777
> 
> 标签：rendering, highcharts, internet-explorer-10, imagedownload

我正在使用 highcharts，并且在 Internet Explorer 10.01 的功能上遇到问题。

对于极坐标图，在您将鼠标悬停在图表上之前，该系列不会加载。如果您有一个系列是一个区域（填充），您需要先关闭该系列，然后再打开它才能显示。（版本 2.3.5 未修复此问题）

从图标中保存呈现的图像与图表无法正确呈现。您可以将其作为雷达图，但无法识别任何值或颜色。它们往往是灰色的。（版本 2.3.5 修复了这个问题）

这些问题已知吗？

这些问题/解决方法是否有解决方案？它与SVG有关吗？我可以强制它使用 VML 吗？

是否有针对这些的计划修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:37:39.307

现在这是 highcharts 公认的问题，将在适当的时候修复

[https://github.com/highslide-software/highcharts.com/issues/1499](https://github.com/highslide-software/highcharts.com/issues/1499)

更新：与此同时，一个黑客解决方法是在您使用 JavaScript 渲染后在图表上隐藏和显示单个系列

```
 if(chart.series.length>0)
    {
        chart.series[0].hide();
        chart.series[0].show();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:55:54.773

使用版本 2.3.5 它已修复 IE10 支持。

# c# - System.Xml.Serialization.XmlSerializer.Deserialize

> ID：14601011
> 
> 赞同：0
> 
> 时间：2013-01-30T09:53:05.520
> 
> 标签：c#, serialization, salesforce

**在System.Xml.Serialization.XmlSerializer.Deserialize**中获取错误，此 XML 文件接收表单 Salesfroce 并且在 binding.Query() 方法中发生异常。

```
string xml = @"<?xml version='1.0' encoding='UTF-8'?>
                <soapenv:Envelope xmlns:soapenv='http://schemas.xmlsoap.org/soap/envelope/' 
                        xmlns='urn:enterprise.soap.sforce.com' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' 
                        xmlns:sf='urn:sobject.enterprise.soap.sforce.com'>
                        <soapenv:Body>
                            <queryResponse>
                                <result>
                                    <done>true</done>
                                    <queryLocator xsi:nil='true'/>
                                    <records xsi:type='sf:Contact_Transaction__c'>
                                        <sf:Id xsi:nil='true'/>
                                        <sf:Is_in_SLA__c>Yes</sf:Is_in_SLA__c>
                                    </records>
                                    <records xsi:type='sf:Contact_Transaction__c'>
                                        <sf:Id xsi:nil='true'/>
                                        <sf:Is_in_SLA__c>Yes</sf:Is_in_SLA__c>
                                    </records>
                                </result>
                            </queryResponse>
                        </soapenv:Body>
                    </soapenv:Envelope>"; 
```

上层 XML 文档是在获取自定义对象数据时从 salesforce 接收的肥皂响应消息。此 XML 消息是有效的 XML 消息。如果我尝试使用反序列化方法手动反序列化对象，那么还会出现 XML 内部文档错误

**我的完整堆栈跟踪**:: [FormatException: 输入字符串的格式不正确。] System.Number.ParseDouble(String value, NumberStyles options, NumberFormatInfo numfmt) +9416251 System.Double.Parse(String s, NumberStyles style, IFormatProvider provider) +36 System .Xml.XmlConvert.ToDouble(String s) +99 Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderSforceService.Read16_NullableOfDouble(Boolean checkType) +146 Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderSforceService.Read511_Contact_Transaction__c(Boolean is903 Microsoft, Boolean is903 Microsoft) .Xml.Serialization.GeneratedAssembly.XmlSerializationReaderSforceService.Read579_sObject(Boolean isNullable, Boolean checkType) +8124 Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderSforceService.Read14_QueryResult(Boolean isNullable,Boolean checkType) +1855 Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderSforceService.Read722_queryResponse() +594 Microsoft.Xml.Serialization.GeneratedAssembly.ArrayOfObjectSerializer111.Deserialize(XmlSerializationReader reader) +75 System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader字符串 encodingStyle、XmlDeserializationEvents 事件）+130

[InvalidOperationException：XML 文档中存在错误 (1, 461)。] System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader, String encodingStyle, XmlDeserializationEvents events) +630 System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader , String encodingStyle) +33 System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse(SoapClientMessage message, WebResponse response, Stream responseStream, Boolean asyncCall) +1007 System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[]参数）+221

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:14:34.473

看看您的模型对象“queryResponse”，它接缝无法设置 Double 类型的字段，因为收到的值没有有效的格式。可能是该值为空（nil='true'）并且该字段不可为空。

# javascript - 淘汰赛启用 javascript

> ID：14601015
> 
> 赞同：1
> 
> 时间：2013-01-30T09:53:19.223
> 
> 标签：javascript, knockout.js

我试图理解淘汰赛。还有一点我不明白。我们有html：

```
<p>
<input type='checkbox' data-bind="checked: hasCellphone" />
I have a cellphone</p>

<p>
Your cellphone number:
<input type='text' name='cell' data-bind="value: cellphoneNumber, enable: hasCellphone" /></p>

<button data-bind="enable: document.getElementsByName("cell")[0].value != '555'">
Do something</button> 
```

和 JS：

```
function AppViewModel() {   
this.hasCellphone = ko.observable(false);
this.cellphoneNumber = ko.observable("");}

ko.applyBindings(new AppViewModel()); 
```

因此，启用输入有效，但不适用于按钮，即使我在输入中输入“555”，它仍然保持启用状态。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T10:08:34.537

淘汰页面上的示例有点误导。enable 绑定采用*任何*值，但对于自动更新，它必须是可观察的。`document.getElementsByName("cell")[0].value != '555'`不是可观察的。

`cellphoneNumberValid`您可以通过向模型添加一个基于 observable 值的 observable 来轻松修复代码`cellphoneNumber`：

## html

```
<p>
    <input type='checkbox' data-bind="checked: hasCellphone" />
    I have a cellphone
</p>

<p>
    Your cellphone number:
    <input type='text' name='cell' data-bind="
            value: cellphoneNumber,
            valueUpdate: 'afterkeydown',
            enable: hasCellphone" />
</p> 
```

做点什么

## js

```
function parseAreaCode(s) {
    // just a dummy implementation
    return s.substr(0, 3);
}

function AppViewModel() {   
    this.hasCellphone = ko.observable(false);
    this.cellphoneNumber = ko.observable("");
    this.cellphoneNumberValid = ko.computed(function() {
        return parseAreaCode(this.cellphoneNumber()) != '555';
    }, this);
}

ko.applyBindings(new AppViewModel()); 
```

## jsfiddle

[http://jsfiddle.net/bikeshedder/eL26h/](http://jsfiddle.net/bikeshedder/eL26h/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T10:04:40.647

您需要启用条件是可观察的，否则淘汰赛不会检查该值是否已更改。您刚刚将它绑定到一个 html 元素，当它的值发生变化时，它不会通知敲除。如果您尝试：

```
<button data-bind="enable: cellphoneNumber() != '555'">Do something</button> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T06:00:09.017

这是解决此问题的最简单方法，尤其是在您不想更改模型的情况下。非常感谢[bikeshedder](https://stackoverflow.com/users/994342/bikeshedder "自行车架")的回答。

[http://jsfiddle.net/NickBunich/C5vfV/2/](http://jsfiddle.net/NickBunich/C5vfV/2/)

```
<p><input type='checkbox' data-bind="checked: hasCellphone" />
I have a cellphone</p>
<p>Your cellphone number:
<input type='text' data-bind="value: cellphoneNumber, valueUpdate: 'afterkeydown', enable: hasCellphone" /></p>
<button data-bind="enable: cellphoneNumber().trim().substr(0,3) !='555'">Do something</button>

function AppViewModel() {   
this.hasCellphone = ko.observable(false);
this.cellphoneNumber = ko.observable("");}
ko.applyBindings(new AppViewModel()); 
```

# java - 使用 map.get() 时使用 java Map.containsKey() 是多余的

> ID：14601016
> 
> 赞同：97
> 
> 时间：2013-01-30T09:53:21.657
> 
> 标签：java, performance, code-readability, map

一段时间以来，我一直想知道在最佳实践中是否允许避免使用`containsKey()`on 方法`java.util.Map`，而是对来自`get()`.

我的理由是，对值进行两次查找似乎是多余的——首先是 the `containsKey()`，然后是`get()`。

另一方面，`Map`缓存最后一次查找的大多数标准实现可能是缓存，或者编译器可以以其他方式消除冗余，并且为了代码的可读性，最好保留该`containsKey()`部分。

非常感谢您的意见。

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2013-01-30T09:56:39.377

某些 Map 实现允许具有空值，例如 HashMap，在这种情况下，如果`get(key)`返回`null`它不保证在映射中没有与此键关联的条目。

因此，如果您想知道地图是否包含密钥 use `Map.containsKey`。如果您只需要映射到键的值，请使用`Map.get(key)`. 如果此映射允许 null 值，则返回值为 null 并不一定表示该映射不包含该键的映射；在这种情况下`Map.containsKey`是无用的并且会影响性​​能。此外，在并发访问地图的情况下（例如`ConcurrentHashMap`），在您测试之后`Map.containsKey(key)`，该条目有可能在您调用之前被另一个线程删除`Map.get(key)`。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-01-30T09:57:08.477

我认为这是相当标准的写法：

```
Object value = map.get(key);
if (value != null) {
    //do something with value
} 
```

代替

```
if (map.containsKey(key)) {
    Object value = map.get(key);
    //do something with value
} 
```

它的可读性并不低，效率也更高，所以我看不出有什么理由不这样做。显然**，如果您的地图可以包含 null，则这两个选项的语义不同**。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-30T17:29:45.803

正如 assylias 所指出的，这是一个语义问题。通常，Map.get(x) == null 是您想要的，但在某些情况下使用 containsKey 很重要。

一种这样的情况是缓存。我曾经在一个 Web 应用程序中处理性能问题，该应用程序经常查询其数据库以查找不存在的实体。当我研究该组件的缓存代码时，我意识到它正在查询数据库 if cache.get(key) == null。如果数据库返回 null（未找到实体），我们将缓存该键 -> null 映射。

切换到 containsKey 解决了这个问题，因为映射到空值实际上意味着什么。到 null 的键映射与不存在的键具有不同的语义。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-10-06T17:08:49.683

*   `containsKey``get`仅当我们先验地知道永远不会允许空值时，后跟 a才是多余的。如果 null 值无效，则调用`containsKey`会带来不小的性能损失，并且只是开销，如下面的基准所示。

*   Java 8`Optional`习惯用法 -`Optional.ofNullable(map.get(key)).ifPresent`或`Optional.ofNullable(map.get(key)).ifPresent`- 与普通的空检查相比会产生不小的开销。

*   A`HashMap`使用`O(1)`常量表查找，而 a`TreeMap`使用`O(log(n))`查找。当在`containsKey`a 上调​​用时，后跟`get`成语的速度要慢得多`TreeMap`。

## 基准

见[https://github.com/vkarun/enum-reverse-lookup-table-jmh](https://github.com/vkarun/enum-reverse-lookup-table-jmh)

```
// t1
static Type lookupTreeMapNotContainsKeyThrowGet(int t) {
  if (!lookupT.containsKey(t))
    throw new IllegalStateException("Unknown Multihash type: " + t);
  return lookupT.get(t);
}
// t2
static Type lookupTreeMapGetThrowIfNull(int t) {
  Type type = lookupT.get(t);
  if (type == null)
    throw new IllegalStateException("Unknown Multihash type: " + t);
  return type;
}
// t3
static Type lookupTreeMapGetOptionalOrElseThrow(int t) {
  return Optional.ofNullable(lookupT.get(t)).orElseThrow(() -> new 
      IllegalStateException("Unknown Multihash type: " + t));
}
// h1
static Type lookupHashMapNotContainsKeyThrowGet(int t) {
  if (!lookupH.containsKey(t))
    throw new IllegalStateException("Unknown Multihash type: " + t);
  return lookupH.get(t);
}
// h2
static Type lookupHashMapGetThrowIfNull(int t) {
  Type type = lookupH.get(t);
  if (type == null)
    throw new IllegalStateException("Unknown Multihash type: " + t);
  return type;
}
// h3
static Type lookupHashMapGetOptionalOrElseThrow(int t) {
  return Optional.ofNullable(lookupH.get(t)).orElseThrow(() -> new 
    IllegalStateException("Unknown Multihash type: " + t));
} 
```

```
Benchmark (iterations) (lookupApproach) Mode Cnt Score Error Units

MultihashTypeLookupBenchmark.testLookup 1000 t1 avgt 9 33.438 ± 4.514 us/op
MultihashTypeLookupBenchmark.testLookup 1000 t2 avgt 9 26.986 ± 0.405 us/op
MultihashTypeLookupBenchmark.testLookup 1000 t3 avgt 9 39.259 ± 1.306 us/op
MultihashTypeLookupBenchmark.testLookup 1000 h1 avgt 9 18.954 ± 0.414 us/op
MultihashTypeLookupBenchmark.testLookup 1000 h2 avgt 9 15.486 ± 0.395 us/op
MultihashTypeLookupBenchmark.testLookup 1000 h3 avgt 9 16.780 ± 0.719 us/op

```

### TreeMap 源参考

[https://github.com/openjdk-mirror/jdk7u-jdk/blob/master/src/share/classes/java/util/TreeMap.java](https://github.com/openjdk-mirror/jdk7u-jdk/blob/master/src/share/classes/java/util/TreeMap.java)

### HashMap 源码参考

[https://github.com/openjdk-mirror/jdk7u-jdk/blob/master/src/share/classes/java/util/HashMap.java](https://github.com/openjdk-mirror/jdk7u-jdk/blob/master/src/share/classes/java/util/HashMap.java)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-06-24T14:42:43.513

我们可以使用 Java8 Optional 使@assylias 的答案更具可读性，

```
Optional.ofNullable(map.get(key)).ifPresent(value -> {
     //do something with value
};) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-06-04T12:32:25.790

在 Java 中，如果您检查实现

```
public boolean containsKey(Object key) {
    return getNode(hash(key), key) != null;
}

public V get(Object key) {
    Node<K,V> e;
    return (e = getNode(hash(key), key)) == null ? null : e.value;
} 
```

两者都使用 getNode 来检索匹配项，主要工作在此完成。

冗余是上下文相关的，例如，如果您将字典存储在哈希映射中。当您想检索单词的含义时

正在做...

```
if(dictionary.containsKey(word)) {
   return dictionary.get(word);
} 
```

是多余的。

但是如果你想根据字典检查一个单词是否有效。正在做...

```
 return dictionary.get(word) != null; 
```

超过...

```
 return dictionary.containsKey(word); 
```

是多余的。

如果您检查内部使用 HashMap 的[HashSet](https://github.com/openjdk-mirror/jdk7u-jdk/blob/master/src/share/classes/java/util/HashSet.java)实现，请在 'contains' 方法中使用 'containsKey'。

```
 public boolean contains(Object o) {
        return map.containsKey(o);
    } 
```

# jquery - 用 jQuery 隐藏复选框，然后在服务器端检查它是否可见

> ID：14601017
> 
> 赞同：0
> 
> 时间：2013-01-30T09:53:24.793
> 
> 标签：jquery, vb.net, checkbox, visible

我的页面上有几个 asp:CheckBox。
我正在使用 jQuery 来隐藏其中的一些（以各种方式）。
然后，按下提交按钮将我带到服务器端，我试图（以各种方式）确定特定复选框是否可见。
但出于某种原因，在服务器端，所有复选框始终可见！我怎么知道哪些是隐藏的？

客户端代码 - 其中之一：

```
$("#cb1").hide(); 
$("#cb1").css("display", "none"); 
$("#cb1").css("visibility", "hidden"); 
```

服务器代码 - 其中之一：

```
myCheckBox.Visible               '- always True 
myCheckBox.Attributes("display") '- always "nothing" 
myCheckBox.Style("visibility")   '- always "nothing" 
myCheckBox.Style("visible")      '- always "nothing" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:06:49.747

您正在提交表格，对吗？当您隐藏复选框时，更改它的值。然后，在服务器端检查该值。我不知道 ASP 是否可以检查样式属性，但由于它是 GET 或 POST，它可以获取值。

# javascript - Javascript 在 Internet Explorer 8 中不起作用

> ID：14601019
> 
> 赞同：0
> 
> 时间：2013-01-30T09:53:31.183
> 
> 标签：javascript, internet-explorer-8

我有一个 javascript 要求用户确认他们想离开我的网站。这是它的外观：

```
 function confirmLeave()
  {
    if(confirm("Do you want to leave my webpage?")) {
      return true;
    } else {
      if(window.event) {
        window.event.returnValue = false;
      } else {
        e.preventDefault();
      }
      return false;
    }
  }

function initiate ()
{
    var links = document.getElementsByClassName("external-link");
    for (var i = 0; i < links.length; i++) {
        links[i].onclick = confirmLeave;
    }   

}
window.onload = initiate; 
```

它适用于 Firefox 和 Chrome，但不适用于 IE8。我知道这`document.getElementsByClassName`不起作用，我尝试使用重新制作我的代码，`document.getElementsbyTakeName`但没有让它工作。这就是我想出的：

```
function confirmLeave()
      {
        if(confirm("Do you want to leave my webpage?")) {
          return true;
        } else {
          if(window.event) {
            window.event.returnValue = false;
          } else {
            e.preventDefault();
          }
          return false;
        }
      }

funciton initiate ()
{
    if(document.getElementsByClassName)
    {   
    var links = document.getElementsByClassName("external-link");
    for (var i = 0; i < links.length; i++) {
        links[i].onclick = confirmLeave;
    } 
    } else {
     var links = document.getElementsByTagName("external-link");
    for (var i = 0; i < links.length; i++) {
        links[i].onclick = confirmLeave;
    }
    }
}
window.onload = initiate; 
```

这`external-link`是我用于离开我的网页的链接的类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:03:08.307

尝试使用`document.querySelectorAll(".external-link")`

[来源](https://stackoverflow.com/questions/9568969/getelementsbyclassname-ie8-object-doesnt-support-this-property-or-method)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:00:00.730

如果这对您来说是一个可行的选择，请考虑包括 jQuery 库。那么你可以这样写：

```
$('.external-link').click(function() { confirmLeave() }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:01:28.617

这里的问题是它`document.getElementsByTagName()`需要一个元素作为输入，例如`div`,`span`或`a`。`external-link`不是一个元素，所以它永远不会返回任何东西。

对于 IE8，您可以使用`document.querySelectorAll(".external-link")`. 它需要一个 CSS 选择器作为输入。

如果您也需要支持较旧的浏览器，您可以尝试使用[https://gist.github.com/2397759](https://gist.github.com/2397759)，它是一种 polyfill，可以在原生`getElementsByClassName`不支持它的浏览器上工作。

# java - 为什么不能从静态上下文引用非静态变量 - reg

> ID：14601020
> 
> 赞同：1
> 
> 时间：2013-01-30T09:53:32.920
> 
> 标签：java, class

> **可能重复：**
> [不能从静态上下文（java）引用非静态变量](https://stackoverflow.com/questions/2559527/non-static-variable-cannot-be-referenced-from-a-static-context-java)

```
public class DemoJava {

    public class Hello {

        void fun()
        {
            System.out.println("This is static fun man!!");    
        }
    }

    public static void main(String[] args) {

        Hello hello = new Hello();
        hello.fun();
    }
} 
```

在这个例子中，它会给我一个错误，因为我试图从一个静态方法访问一个非静态类。美好的。例如，如果我`Hello`在另一个文件中有相同的类并且我做同样的事情，它不会给我一个错误。

即使在那种情况下，我们也试图从静态方法访问非静态类。但这并没有给出任何错误。为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T10:04:08.490

是的，它会给你错误，正确的做法是

```
public class DemoJava {

    public class Hello {

        void fun()
        {
            System.out.println("This is static fun man!!");    
        }
    }

    public static void main(String[] args) {

        DemoJava demoJava = new DemoJava();
        Hello  hello = demoJava.new Hello(); //you need to access your inner class through instance object
        hello.fun();
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-30T09:55:46.360

> 在这个例子中，它会给我一个错误，因为我试图从一个静态方法访问一个非静态类。

不，它会给你一个错误，因为当你没有封闭类的实例时，你试图创建一个内部类的实例（它隐式地引用了封闭类的*一个**实例*） 。

 *问题不在于调用`fun()`- 它是构造函数调用。

例如，您可以使用以下方法解决此问题：

```
DemoJava demo = new DemoJava();
Hello hello = demo.new Hello(); 
```

或者您可以通过将*类*声明更改为：

```
public static class Hello 
```

阅读[JLS 的第 8.1.3 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.3)了解有关内部类的更多信息，阅读[第 15.9.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.9.2)了解确定类实例创建表达式的封闭实例：

> 否则，C 是内部成员类（第 8.5 节），然后：
> 
> *   如果类实例创建表达式是非限定类实例创建表达式，则：
>     
>     
>     *   如果类实例创建表达式出现在静态上下文中，则会发生编译时错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T09:55:01.420

您必须创建一个实例，`Outer class`以便创建您的`inner class`.

从[文档](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)：

> 要实例化内部类，您必须先实例化外部类。

**句法：**

```
OuterClass.InnerClass innerObject = outerObject.new InnerClass();

DemoJava demoInst=new DemoJava();
Hello hello = demoInst.new Hello();
        hello.fun(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T09:56:52.897

使类`Hello`静态

```
public static class Hello {

    void fun()
    {
        System.out.println("This is static fun man!!");    
    }
} 
```

您的内部类`Hello`不需要访问外部类的实例，`DemoJava`因此可以将其设为静态。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T10:04:01.160

您始终可以在没有实例的情况下调用类的静态函数

你好.fun();

应该管用！*

# android - 如何在列表视图中制作可触摸和可移动的滚动条

> ID：14601025
> 
> 赞同：3
> 
> 时间：2013-01-30T09:53:44.723
> 
> 标签：android, android-listview, scroll, scrollbar, sectionindexer

我创建了一个列表视图，其中包含大量数据。[传统滚动](http://developer.android.com/design/building-blocks/scrolling.html#indicator)很慢。

我想创建可触摸的滚动视图，以便用户可以触摸滚动条并将其移动到任何位置，从而快速滚动列表。那么，有没有办法让滚动条可以拖动到列表中的任何位置。

一种方法（我能想到的）是使用[Section Indexer](http://developer.android.com/reference/android/widget/SectionIndexer.html)

> 应在适配器上实现的接口，以在列表的各个部分之间启用 AbsListView 中的快速滚动。部分是一组要跳转到的列表项，它们有一些共同点。例如，它们可能以相同的字母开头，或者它们可能是来自同一位艺术家的歌曲。

但是在这种情况下我填充的列表不一定按任何顺序排序（甚至不是按字母顺序）。那么，有没有其他有效的方法可以在 ListView 中实现可拖动的滚动视图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T09:31:58.180

也许你可以看看这里：[https ://github.com/nolanlawson/CustomFastScrollViewDemo](https://github.com/nolanlawson/CustomFastScrollViewDemo)

您还可以查看其他类似的帖子：[ListAdapter 和 SectionIndexer 的快速滚动显示问题](https://stackoverflow.com/questions/3225092/fast-scroll-display-problem-with-listadapter-and-sectionindexer)

祝你好运

# java - 调整包含 JSVGCanvas 的 JComponent 的大小时出现 Batik IllegalStateException

> ID：14601027
> 
> 赞同：1
> 
> 时间：2013-01-30T09:53:45.890
> 
> 标签：java, dom, dynamic, illegalstateexception, batik

我的程序似乎运行良好，但是当我尝试调整组件大小时，我不断收到“IllegalStateExceptions：RunnableQueue 未启动或已退出”。我已将 documentState 设置为 ALWAYS_DYNAMIC，并且我读到您应该使用 JSVGCanvas 的 UpdateManager 并调用 invokelater()。我了解它在第一次之后可用

```
gvtBuildCompleted(GVTTreeBuilderEvent e) 
```

被调用，所以我在使用它之前检查它是否正在运行，但我仍然得到异常。下面的方法被一个线程反复调用，似乎导致了异常：

```
private void updateDomTree(final SVGComponent component, final Document doc)
{
if(component.getSvgCanvas().getUpdateManager() != null && component.getSvgCanvas().getUpdateManager().isRunning())
{
    component.getSvgCanvas().getUpdateManager().getUpdateRunnableQueue().invokeLater(new Runnable() 
    {
        public void run() 
        {
            final Node newNode = doc.getChildNodes().item(0).getFirstChild();
            //could be easier to get this value, but ... it works.
            String newNodeId = newNode.getAttributes().getNamedItem("id").getFirstChild().getNodeValue();

            NodeList nodes = component.getSvgDocument().getDocumentElement().getChildNodes();
            Node updateNode = findElementById(nodes, newNodeId);
            resizeComponent(component, doc);
            component.getSvgCanvas().getSVGDocument().adoptNode(newNode);
            component.getSvgCanvas().getSVGDocument().getDocumentElement().replaceChild(newNode, updateNode);
            component.refreshSVGCanvas();
        }
    });
}
} 
```

实际调整大小在这里完成：

```
protected void resizeComponent(SVGComponent component, Document doc)
{
    Element svgRoot = doc.getDocumentElement();
    final int svgWidth = Integer.parseInt(svgRoot.getAttribute("width"));
    final int svgHeight = Integer.parseInt(svgRoot.getAttribute("height"));
    String[] viewBox = svgRoot.getAttribute("viewBox").split(" ");
    int viewBoxLeft = Integer.parseInt(viewBox[0]);
    int viewBoxTop = Integer.parseInt(viewBox[1]);
    final float factor = component.getScaleFactor();
    String[] viewBoxOld = component.getSvgDocument().getDocumentElement().getAttribute("viewBox").split(" ");
    int viewBoxLeftOld = Integer.parseInt(viewBoxOld[0]);
    int viewBoxTopOld = Integer.parseInt(viewBoxOld[1]);
    int xDiff = (int) ((viewBoxLeftOld - viewBoxLeft)*factor);
    int yDiff = (int) ((viewBoxTopOld - viewBoxTop)*factor);

    if ( viewBoxLeftOld != viewBoxLeft ) //If there is additional content left
    {
        component.setLocation(component.getLocation().x - xDiff, component.getLocation().y);
    }
    if ( viewBoxTopOld != viewBoxTop ) //If there is additional content right)
    {
        component.setLocation(component.getLocation().x, component.getLocation().y - yDiff);
    }

    component.getSvgDocument().getDocumentElement().setAttribute("width",""+svgWidth);
    component.getSvgDocument().getDocumentElement().setAttribute("height",""+svgHeight);
    component.getSvgDocument().getDocumentElement().setAttribute("viewBox", ""+viewBoxLeft+" "+viewBoxTop+" "+svgWidth+" "+svgHeight);
    component.setSize((int)(svgWidth*factor),(int)(svgHeight*factor));
} 
```

方法

```
refreshJSVGCanvas() 
```

来电

```
JSVGCanvas.setDocument(Document);
JSVGCanvas.setSize(int, int); 
```

这是完整的堆栈跟踪：

```
Exception in thread "AWT-EventQueue-0" java.lang.IllegalStateException: RunnableQueue not started or has exited
at org.apache.batik.util.RunnableQueue.invokeLater(RunnableQueue.java:277)
at org.apache.batik.swing.svg.AbstractJSVGComponent.updateRenderingTransform(AbstractJSVGComponent.java:1057)
at org.apache.batik.swing.gvt.AbstractJGVTComponent$1.componentResized(AbstractJGVTComponent.java:237)
at java.awt.AWTEventMulticaster.componentResized(Unknown Source)
at java.awt.Component.processComponentEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$200(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

在此先感谢，我到处搜索并尝试了很多，但找不到解决方案。

编辑：这是 Batik 的 invokeLater-Method 实际抛出异常的地方：

```
public void invokeLater(Runnable r) {
    if (runnableQueueThread == null) {
        throw new IllegalStateException
            ("RunnableQueue not started or has exited");
    }
    synchronized (list) {
        list.push(new Link(r));
        list.notify();
    }
} 
```

runnableQueueThrad 设置在该类的 run()-Method 中，并在最后设置为 null。所以我想我必须做一些同步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:15:12.170

猜测一下，“public void run()”代码不应该在另一个方法中，实际上是一个线程类/接口对象，所谓的构造函数（实际上是接口版本）。

将其移至其自己的类（例如嵌套子类以保留范围）并在该类上实现“线程可运行”接口以将“run()”方法放置在其中以供使用。

堆栈跟踪说 run 方法不可用，因为它实际上没有这样的方法（或至少没有正确声明），因此它处于“非法状态”。

# tcl - TCL 脚本：变量作为函数的参数

> ID：14601030
> 
> 赞同：1
> 
> 时间：2013-01-30T09:53:55.503
> 
> 标签：tcl

我正在尝试使用 Amira 编写一些简单的脚本，它使用 TCL，但我不能保证它是标准版本。我想从一个对象中读取一个属性并将其分配给另一个对象。

在命令窗口中，过程如下：

> Image1 获取转换

0.1 0.2 0.3 0 0 0 0 0 0 1

> Image2 设置变换 0.1 0.2 0.3 0 0 0 0 0 0 1

我想在不手动复制粘贴 getTransform 的结果的情况下做同样的事情

以下不起作用（就是说 setTransform 是在没有参数的情况下执行的）

```
Image2 setTransform [Image1 getTransform] 
```

或者

```
set myT=Image1 getTransform
Image2 setTransform $myT 
```

我确定我只需要适当地使用 $ [ { ，但到目前为止我尝试过的并没有给出任何结果

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T12:04:44.117

如果您使用的是 Tcl 8.5 或更新版本，则使用`{*}`参数扩展：

```
Image2 setTransform {*}[Image1 getTransform] 
```

这正是你想要的。

如果您使用的是旧版本的 Tcl，那么您必须使用`eval`，这是一个非常有用的命令，如果使用不当，很多事情都会出错：

```
eval [linsert [Image1 getTransform] 0 Image2 setTransform] 
```

在`linsert`这里用于建立一个propper列表以避免双重替换（这几乎总是不好的）。

# javascript - 使用 Javascript 和 jQuery 更改部分名称

> ID：14601034
> 
> 赞同：3
> 
> 时间：2013-01-30T09:54:05.263
> 
> 标签：javascript, jquery

我的页面上有一些`select`元素，我想删除名称的一部分。

他们的名字看起来像这样：

```
ctl02$fieldname 
```

我要删除的部分是：`ctl02$`。所以它只剩下我了`fieldname`。

我要删除的那部分总是以一个以 .`ctl`结尾的两位数开头`$`。

我用下面的代码试过了，但没有奏效：

```
$(".elements select").each(function() {
    this.setAttribute("name", this.getAttribute("name").replace(/ctl([0-9]+)\$$/, ""));
}); 
```

有人知道我该怎么做吗？

这是一个演示：[http ://tinkerbin.com/Klvx5qQF](http://tinkerbin.com/Klvx5qQF)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T09:55:32.613

只是正则表达式中的一个错误。我不知道您为什么将 , 正则表达式末尾的 a 加倍`$`具有`$`特定含义，这不是您想要的。

这是固定版本：

```
$(".elements select").each(function() {
    this.setAttribute("name", this.getAttribute("name").
       replace(/ctl[0-9]+\$/, ""));
}); 
```

你不需要捕获任何东西，这就是为什么我也删除了括号。

如果您想确保仅在名称开头删除 ctl 事物，则可以将正则表达式更改为`/^ctl[0-9]+\$/`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T09:58:54.833

我想这里不需要正则表达式：

```
$(".elements select").attr("name", function(i, attr) {
    return attr.substring(attr.indexOf("$") + 1);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:07:03.787

用这个 ：

```
$(function() {
    $("select").each(function() {
        var name = $(this).attr("name");

        $(this).attr("name", name.replace(/(ctl[0-9]+)/g, ""));

    });
}); 
```

见演示：[链接](http://jsfiddle.net/yfV79/)

# java - 将项目导入eclipse

> ID：14601041
> 
> 赞同：1
> 
> 时间：2013-01-30T09:54:27.360
> 
> 标签：java, eclipse

我在 C 盘中名为 DIW 的文件夹中创建了我的项目。
该文件夹包含所有类文件和源文件。现在我想将整个项目导入eclipse并在那里运行，我应该怎么做？
我在谷歌上搜索过相同的结果，但没有得到确切的结果，我希望能从这里得到一些帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:55:48.953

Eclipse -> 导入选择`FileSystem`和你的源

或者

Eclipse -> 创建新项目 ->`Create from Existing Source`

或者

如果您有 maven 类型 mvn eclipse:eclipse ，则导入到 Eclipse

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:03:39.690

Eclipse -> 导入 -> 常规 -> 现有项目到工作区

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:44:35.417

文件--> 导入--> 常规--> 现有项目到工作区

# asp.net - 水晶在安装时报告silverlight应用程序错误

> ID：14601045
> 
> 赞同：0
> 
> 时间：2013-01-30T09:54:39.987
> 
> 标签：asp.net, .net, iis-7, silverlight-4.0, crystal-reports

我已经发布了一个 Silverlight 应用程序，该应用程序在 IIS 服务器中有水晶报告，它向我显示了以下错误，任何人都可以帮助我解决

```
Configuration Error
    Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately.

Parser Error Message: Could not load file or assembly 'CrystalDecisions.ReportAppServer.Controllers, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304' or one of its dependencies. The system cannot find the file specified.

Source Error:

Line 32:         <add assembly="log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304" />
Line 33:         <add assembly="CrystalDecisions.ReportSource, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304" />
Line 34:         <add assembly="CrystalDecisions.ReportAppServer.Controllers, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304" />
Line 35:         <add assembly="CrystalDecisions.ReportAppServer.DataDefModel, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304" />
Line 36:         <add assembly="CrystalDecisions.CrystalReports.Engine, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T04:23:05.013

根据错误消息，您系统上安装的水晶报告版本似乎与您在代码中使用的水晶报告版本不匹配。请仔细检查，以便您可以同步您网站的水晶报表版本。

此外，正常运行 Crystal Report 有几个要求：

1.  请确保服务器上安装的 CR 版本与您在应用程序/网站上使用的版本匹配
2.  请确保在您的 web.config 中正确引用了服务器上安装的 CR 的程序集
3.  请确保您将应用程序的应用程序池设置为在 LOCAL SERVICE 权限下运行
4.  请确保在您的操作文件夹上启用了完全信任模式
5.  请确保将 crystalreportviewer 和 aspnet_client 文件夹复制到您的操作文件夹。

我使用水晶报表已经有一段时间了。我还尝试了最新的 Crystal Report for VS 2010，最初，我遇到了像你现在一样的问题。通过执行上述所有步骤，您的 CR 肯定会正常工作。如果您仍然有问题，您可以考虑使用 ashostcentral.com 托管它

如果对您有帮助，请将此回复标记为“答案”。多谢！

# logging - NSTextView、NSTextStorage 和循环日志？

> ID：14601047
> 
> 赞同：0
> 
> 时间：2013-01-30T09:54:50.473
> 
> 标签：logging, size, fixed, nstextview, nstextstorage

我在应用程序窗口中有一个 NSTextView，它显示了串行端口的传入数据日志。我在日志到达应用程序时将文本附加到日志中：

```
NSAttributedString* attrString = [[NSMutableAttributedString alloc] initWithString: text];
NSTextStorage *textStorage = [SerialOutput textStorage];
[textStorage beginEditing];
[textStorage appendAttributedString:attrString];
[textStorage endEditing]; 
```

例如，我想将文本限制为 1000 行，以免应用程序崩溃，因为它会无限期地运行。

现在我有一个临时解决方案，基于每周清除日志的 NSTimer，它可以工作，但我更喜欢实施一个聪明的方法，只是限制文本大小并创建一个循环日志。

任何的想法 ？也许使用方法 insertAttributedString ？

问候，琼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T07:06:43.700

最后我找到了方法，当我将文本附加到 NSTextStorage 时，我只是控制长度是否超过阈值并清理日志开头的一些空间：

```
// updates the textarea for incoming text by appending text
- (void)appendToIncomingText: (id) text {
  // add the text to the textarea
  NSAttributedString* attrString = [[NSMutableAttributedString alloc] initWithString: text];
  NSTextStorage *textStorage = [SerialOutput textStorage];
  [textStorage beginEditing];
  [textStorage appendAttributedString:attrString];
      //Max. size of TextArea: LOG_SIZE characters
      if ([textStorage length] > LOG_SIZE){
          [textStorage deleteCharactersInRange:NSMakeRange(0, [attrString length])];
      }
  [textStorage endEditing];

  // scroll to the bottom
  NSRange myRange;
  myRange.length = 1;
  myRange.location = [textStorage length];
  NS[SerialOutput scrollRangeToVisible:myRange];
} 
```

正如我想要的那样，它可以用作循环日志。

# hadoop - 运行 hive 查询，并收集作业信息

> ID：14601052
> 
> 赞同：3
> 
> 时间：2013-01-30T09:55:03.053
> 
> 标签：hadoop, automation, hive

我想运行生成的 HIVE 查询列表。对于每个，我想检索 MR job_id（或 ids，如果是多个阶段）。然后，使用此 job_id，从作业跟踪器收集统计信息（累积 CPU、读取字节......）

如何从 bash 或 python 脚本发送 HIVE 查询，并检索 job_id(s) ？

对于第二部分（收集作业的统计信息），我们使用的是 MRv1 Hadoop 集群，所以我没有[AppMaster REST API](http://hadoop.apache.org/docs/current/hadoop-yarn/hadoop-yarn-site/MapredAppMasterRest.html)。我即将从 jobtracker web UI 收集数据。有更好的主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T21:57:40.997

您可以通过运行此命令获取执行的作业列表，

hadoop 作业 - 列出所有

然后对于每个作业 ID，您可以使用命令 hadoop job -status job-id 检索统计信息

为了将作业与查询相关联，您可以获取 job_name 并将其与查询匹配。像这样， [如何获取当前正在运行的 hadoop 作业的名称？](https://stackoverflow.com/questions/5892495/how-to-get-names-of-the-currently-running-hadoop-jobs)

希望这可以帮助。

# javascript - Ext.onReady() 与 $(document).ready()

> ID：14601054
> 
> 赞同：9
> 
> 时间：2013-01-30T09:55:05.290
> 
> 标签：javascript, jquery, dom, extjs, extjs4

有什么不同？我有 $(document).ready 函数，它应该检查是否加载了 extjs，但主要问题是 extjs 没有按时加载并且 $(document).ready 中的东西开始执行，extjs 创建产生主要错误的函数'无法在 Ext.create("...", {..}) 上执行 create of undefined'；线。如果我像这样仔细检查：

```
$(document).ready(function() {
    Ext.onReady(function() {
        Ext.create('Ext.Button', {...});
    });
}); 
```

事情神奇地起作用。现在我正在使用 ext-all.js，它缩小了 ~1.3MB，这是相当大的恕我直言......当他进行第二次检查时，事情会神奇地加载......但我认为这两个函数与它们不一样定义表明，因为如果我放另一个 $(document).ready 而不是 Ext.onReady() 行，事情就会再次中断。我认为 Ext.onReady({}); 函数还有其他一些 $(document).ready() 没有的黑魔法，如果有人知道这种魔法是什么，我很感兴趣？

因为它起作用了，我不知道为什么会杀了我。

感谢您阅读帖子。=）附言。我正在使用 ExtJS 大约一天，所以我对它很陌生。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-30T10:04:52.943

不，它们不一样，第一个将在您的 jQuery 库加载时触发，Ext.onReady(.. 将在您的 ExtJS 库加载时触发。

如果你想组合它们，你可以这样做：

```
var extReady = false;
var jQueryReady = false;

var librariesReady = function () {
    if (jQueryReady && extReady) {
        //They're both ready
    }
};

$(document).ready(function () {
    jQueryReady = true;
    librariesReady();    
});
Ext.onReady(function () {
    extReady = true;
    librariesReady();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-09T02:56:27.627

`Ext.onReady()`并且`$(document).ready()`与当前接受的答案所暗示的加载任何一个库无关。

根据文档，两者都是关于正在加载和准备好的 DOM。

## 文档

*   分机 JS：[https ://docs.sencha.com/extjs/6.7.0/modern/Ext.html#method-onReady](https://docs.sencha.com/extjs/6.7.0/modern/Ext.html#method-onReady)
*   jQuery：[https ://api.jquery.com/ready/](https://api.jquery.com/ready/)

## 对您案件的答复

您可能在脚本触发后加载 Ext JS 资源，但 jQuery 已经在您的脚本上方加载。因此，使用 jQuery 等待 DOM 加载可保证 DOM 已加载，因此到那时 Ext JS 也已加载。

如果您尝试反转它们并首先使用 Ext JS，您可能会遇到错误。

根据文档，他们正在做同样的事情，所以你不需要嵌套它们

### 此场景的修复

**如果您像这样加载资源**：

1.  jQuery
2.  你的脚本
3.  分机JS

**最好按以下顺序加载它们**：

1.  jQuery 和/或 Ext JS
    *   订单不重要，因为他们可以自己站立而无需其中一个
2.  你的脚本

## 附加说明

由于 DOM 在读取脚本时是如何加载和解析的，它保证了 jQuery 和 Ext JS 可用。这就是您可以在脚本中引用它们的库的原因；您无需等待它们加载它们已经存在并且可以使用，这就是您可以调用它们并使用它们的就绪调用的原因。

您需要使用其中一个库的 ready 事件来保证所有元素都加载到 DOM 中并且可以访问。在准备好之前，您也不应该尝试向 DOM 添加任何内容，尽管您可以附加到已加载到元素/脚本标签上方的当前元素。最好的做法是在 DOM 完成加载之前不要触摸它。

## 没有人要求的额外解释

处理 DOM 准备就绪比这些库所涉及的更多，这就是为什么它们都包含这样的事件处理程序。

以下链接使用 vanilla JS 解释了如何不仅添加事件侦听器，还需要检查它是否已经触发，当您为 DOM 准备好添加事件侦听器时。这是使用事件处理的常见情况 - 您创建一个竞争条件，在您开始侦听之前可能会触发一个事件 - 然后如果没有其他方法检查，您不知道它曾经发生过。

[https://developer.mozilla.org/en-US/docs/Web/Events/DOMContentLoaded#Checking_whether_loading_is_already_complete](https://developer.mozilla.org/en-US/docs/Web/Events/DOMContentLoaded#Checking_whether_loading_is_already_complete)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:02:57.867

它们都检查 DOM 何时准备就绪。如果你在使用jQuery的时候需要加载Ext，试试把逻辑倒过来（不知道能不能用，没试过）。

```
Ext.onReady(function() {
    $(document).ready(function() {
        Ext.create('Ext.Button', {...});
    });
}); 
```

关于这个主题的另一个 StackOverflow 问题：[Extjs + jQuery together](https://stackoverflow.com/questions/7216478/extjsjquery-together)

# git - git clone vs git pull

> ID：14601060
> 
> 赞同：5
> 
> 时间：2013-01-30T09:55:41.460
> 
> 标签：git, github, repository, git-pull, git-clone

对于我的项目，我`github`在两台计算机（比如 A、B）上保留了一个在线存储库和本地存储库，我在其中编写代码和运行测试，还在其他三台计算机（比如 C、D、E）上运行测试。

现在，发生了几次，每当我想在 C、D、E 上下载更新的代码时就会发生冲突，而这样做是`git pull origin $someBranch`行不通的，这可能是由于我对本地源代码进行了一些小修改，只是为了测试目的，我不想保留。

在这种情况下我该怎么办？我应该总是这样做`git clone $URLofMyRepository`还是有不那么激进的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T09:58:28.503

**如果您不想保留它们**，您可以删除对分支的更改：

```
git checkout . 
```

这应该会删除对您的工作目录的所有未保存的更改，从而允许您执行拉取操作。

```
git pull origin $someBranch 
```

如果您想将更改保留在您的分支中，请尝试存储它们，然后运行 ​​pull 命令。

```
git stash 
```

假设没有发生其他存储，这些更改可以在以后通过执行来应用：

```
git stash apply 
```

# java - ExecutorService.Submit(可调用 ) 为 Future 返回空值 目的

> ID：14601066
> 
> 赞同：5
> 
> 时间：2013-01-30T09:55:59.950
> 
> 标签：java, nullpointerexception, executorservice

我`ExecutorService`用来生成线程来执行不同的任务。当`submit(Callable<T>)`方法被创建时，它应该返回一个`Future<T>`对象。相反，它返回 null。结果，当`Future<T>.get()`调用方法时，它将失败并显示`NullPointerException`.

有没有人遇到过这个问题？或者，我做错了什么？

```
ArrayList<Boolean> resultsList = new ArrayList<Boolean> ();
ExecutorService excutorService  = Executors.newCachedThreadPool();
for(ClassImplementingCallable myClassImplementingCallable : listOfClassesImplementingCallable) {
    resultsList.add( excutorService.submit( myClassImplementingCallable ) );
}
excutorService.shutdown();
for ( Future< Boolean > result : resultList ) {
    result.get(); // getting exception here..
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:02:17.237

令人惊讶的是您可以编译您的代码：您正试图将一些添加`Future<Boolean>`到`List<Boolean>`...

`resultsList`应声明为：

```
List<Future<Boolean>> resultsList = new ArrayList<Future<Boolean>> (); 
```

`myClassImplementingCallable`除此之外，除非其中一个为`listOfClassesImplementingCallable`空，否则您不应按原样收到带有代码的 NPE 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:13:06.673

你应该使用`List<Future<Boolean>> resultsList = new ArrayList<Future<Boolean>>();`

```
 for ( Future< Boolean > result : resultList ) {
    result.get(); // getting exception here..
} 
```

resultsList 不是代码中的数组

# java - 比赛条件可能吗？

> ID：14601069
> 
> 赞同：0
> 
> 时间：2013-01-30T09:56:04.573
> 
> 标签：java, thread-safety

我正在包装 java 邮件传输类并调用我的方法来处理发送电子邮件的有效地址。

**运输类**

```
 public class Transport  extends javax.mail.Transport {

private static final String  CLASSNAME = Transport.class.getName();

private static final Logger LOGGER = Logger.getLogger(CLASSNAME);

public Transport(Session session, URLName urlname) {
    super(session, urlname);
}

@Override
public void sendMessage(Message msg, Address[] addresses) throws MessagingException {
    Dispatcher.processMailSending(msg,addresses);
    send(msg,addresses);
}

public static void send(Message msg , Address[] addresses) throws MessagingException{
    Dispatcher.processMailSending(msg,addresses);
    javax.mail.Transport.send(msg,addresses);
}

public static void send(Message msg) throws MessagingException{
    Dispatcher.processMailSending(msg);
    javax.mail.Transport.send(msg);
}

} 
```

**调度员类**

```
 public class Dispatcher{
       public static void processMailSending(Message msg , Address[] address){
           Validator v = new Validator();
           v.validate();
       }

       public static void processMailSending(Message msg) throws MessagingException{
           Validator v = new Validator();
           v.validate();
             //TOD: do validation
       }
  }

 class Validator{
      private Message msg;
      private Address[] address;

      public Validator(Message msg , Address address){
             this.msg = msg;
             this.address = address;
      }

      public void validate(){
          checkSpam(msg.getFrom());
      }
 } 
```

我阅读了oracle论坛帖子。他们说`Transport.send`是线程安全的。

[https://forums.oracle.com/forums/thread.jspa?threadID=1589778&tstart=2865](https://forums.oracle.com/forums/thread.jspa?threadID=1589778&tstart=2865)。

**我的问题**

线程`Dispatcher.processMailSending`安全吗？

我避免`syncrhonized`在`processMailSending`. 这个方法会被频繁调用。

请提出您的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:58:46.750

您没有提供任何实现，`Dispatcher.processMailSending`因此无法说。如果`Dispatcher`. 请注意，通过使用`static`方法，您立即增加了共享状态的可能性——您可以`Dispatcher`为每个调用实例化 a 吗？

但是，任何同步的影响都将大大超过将邮件发送到邮件服务器所花费的时间，而且我认为您过早地进行了优化。确保您的代码是线程安全的（使用同步或其他更高级别的解决方案，如`Executors`），然后担心优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:59:21.400

是的。这是因为没有共享的、可变的状态在`Dispatcher`. 只要您不在其中使用静态变量`Dispatcher`，它本身就不是线程安全的，那么就可以了。AtomicInteger、ConcurrentHashMap、Vectors 等线程安全对象的使用很好。

# zpt - 在 PyScripter 中配置文件扩展名

> ID：14601072
> 
> 赞同：1
> 
> 时间：2013-01-30T09:56:11.983
> 
> 标签：zpt, pyscripter

如何为 PyScripter 中的语法高亮配置文件扩展名列表？

特别是我喜欢在 HTML 文件列表中包含扩展名为 .pt 的 Zope 页面模板文件 (ZPT) 以显示正确的语法突出显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:47:04.733

终于明白了：

您需要修改 HTML 文件的文件过滤器以在工具 > 选项 > IDE 选项中包含 .pt 扩展名。

# android - 在 Android 中加载图像效果需要很多时间？

> ID：14601079
> 
> 赞同：2
> 
> 时间：2013-01-30T09:56:57.833
> 
> 标签：android, image-processing

我正在做一个基于图像处理的项目，我正在编辑任何具有 40 多种不同效果（如棕褐色、浮雕、雕刻等）的单个图像。现在的问题是，每当我使用任何高分辨率高清图像时，都会花费大量时间至少 15 分钟才能加载该图像上的所有效果。如何减少这个时间，我没有使用 OpenCV API。下面是我的代码。

```
 public class Image_add_effects extends Activity implements OnClickListener{
ImageView image;
HorizontalScrollView view;

ImageView mSwitcher;
ArrayList<Bitmap>array_image;
Bitmap image_compress;
 BitmapDrawable drawable,drawable_image;
 Bitmap changed_image;
 Gallery g;
 ImageView img1,img2,img3,img4,img5;
 Bitmap bit1,bit2,bit3,bit4,bit5;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.add_effects);
    setBodyUi();
    System.loadLibrary("PhotoProcessing");

     changed_image=Image_effects.image_change;
     ByteArrayOutputStream stream = new ByteArrayOutputStream();
     //System.out.println("yourSelectedImage"+yourSelectedImage);
     changed_image.compress(Bitmap.CompressFormat.JPEG, 100, stream); 

    new SendImage().execute();
}

public class SendImage extends AsyncTask<String, Process, String> {

    ProgressDialog pb;
    String the_string_response;
    String image_str;

    @Override
    public void onPreExecute() {

        pb = ProgressDialog
                .show(Image_add_effects.this, null, "Processing....");

    }

    @Override
    protected String doInBackground(String... params) {

        bit1=(Effects_change.doInvert(image_compress));
        bit2=(Effects_change.doHighlightImage(image_compress));
        bit3=(Effects_change.applyGaussianBlur(image_compress));
        bit4=(Effects_change.sharpen((image_compress),20));
        bit5=(Effects_change.applyMeanRemoval(image_compress));
        bit6=(Effects_change.smooth((image_compress),8));
        bit7=(Effects_change.emboss(image_compress));
        bit8=(Effects_change.engrave(image_compress));
        bit9=(Effects_change.applyHueFilter((image_compress),9));

        bit10=(Effects_change.doGreyscale(image_compress));
        bit11=(Effects_change.doGamma((image_compress),0.6, 0.6, 0.6));
        bit12=(Effects_change.doGamma((image_compress),1.8, 1.8, 1.8));
        bit13=(Effects_change.doColorFilter((image_compress), 1.0, 0, 0));
        bit14=(Effects_change.doColorFilter((image_compress), 0, 1, 0));
        bit15=(Effects_change.doColorFilter((image_compress), 0, 0, 1));
        bit16=(Effects_change.doColorFilter((image_compress), 0.5, 0.5, 0.5));
        bit17=(Effects_change.doColorFilter((image_compress), 1.5, 1.5, 1.5));
        bit18=(Effects_change.createSepiaToningEffect((image_compress),100, 1.5, 0.6, 0.12));
        bit19=(Effects_change.createSepiaToningEffect((image_compress),200, 0.88, 2.45, 1.43));
        bit20=(Effects_change.createSepiaToningEffect((image_compress),255, 1.2, 0.87, 2.1));

        return null;
    }

    @Override
    public void onPostExecute(String result) {
        super.onPostExecute(result);

        img1.setImageBitmap(bit1);
        img2.setImageBitmap(bit2);
        img3.setImageBitmap(bit3);
        img4.setImageBitmap(bit4);
        img5.setImageBitmap(bit5);

        pb.dismiss();
    }

} 
```

我在上面的代码中使用这个链接：http: [//xjaphx.wordpress.com/2011/06/21/image-processing-grayscale-image-on-the-fly/](http://xjaphx.wordpress.com/2011/06/21/image-processing-grayscale-image-on-the-fly/)

当我正在制作一个 Android 应用程序时，由于我是图像处理的新手，所以我做同样的事情变得越来越困难。如何为图像添加效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T01:19:17.850

尝试使用[Catalano 框架](https://code.google.com/p/catalano-framework/)。这是解释如何使用的[文章。](http://www.codeproject.com/Articles/656059/Catalano-Framework)

# performance - 使用静态或上下文相关的 VPD 策略来限制特定用户的表访问？

> ID：14601084
> 
> 赞同：0
> 
> 时间：2013-01-30T09:57:09.163
> 
> 标签：performance, oracle, oracle11g

假设有两个数据库用户： (1) 一个名为 APP 的用户，他经常连接到数据库，并在自己的 schema 中查询和修改许多表。(2) 一个叫WEB的用户，很少连接数据库，只查询和修改APP schema中的几张表。

我需要根据数据限制两个用户的表访问。我正在使用 Oracle 虚拟专用数据库 (VPD) 功能（有时也称为细粒度访问控制）来执行此操作。对于这个问题，只有限制APP用户的规则很重要。限制 WEB 用户的规则需要在单独的 VPD 策略中（我稍后可能会针对该策略提出类似的问题）。

以下两种实现中哪一种会为 APP 用户提供更好的查询和 DML 性能？

1）使用policy_type创建策略`dbms_rls.SHARED_CONTEXT_SENSITIVE`并像这样实现策略功能：

```
FUNCTION get_predicate(i_schema IN VARCHAR2, i_object IN VARCHAR2)
RETURN VARCHAR2
AS
BEGIN
  IF SYS_CONTEXT('USERENV', 'SESSION_USER') = 'WEB' THEN
    RETURN NULL;
  END IF;

  RETURN 'some_id_column = SYS_CONTEXT(''APP'', ''some_id'')';
END get_predicate; 
```

2）使用policy_type创建策略`dbms_rls.SHARED_STATIC`并像这样实现策略功能：

```
FUNCTION get_predicate(i_schema IN VARCHAR2, i_object IN VARCHAR2)
RETURN VARCHAR2
AS
BEGIN
  RETURN 'SYS_CONTEXT(''USERENV'', ''SESSION_USER'') = ''WEB'' OR some_id_column = SYS_CONTEXT(''APP'', ''some_id'')';
END get_predicate; 
```

请注意，APP 用户使用客户端连接池（由 ODP.NET 提供），因此它应该只为每个应用程序使用会话打开几个连接。大约有 100 个客户端将连接到数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:31:08.473

STATIC 谓词只会为会话评估一次，而 CONTEXT_SENSITIVE 谓词将在每次中间层（或应用程序）重新设置上下文时重新评估。如果大多数连接是通过同一个用户 (APP) 进行的，那么您可能不会有很多上下文更改（取决于您在连接层中管理事物的方式）。

但是，即使您有大量上下文更改，如果重新评估 CONTEXT_SENSITIVE 谓词的开销是连接总成本的一个显着因素，我也会感到非常惊讶。几乎可以肯定，您可以在架构的其他部分获得更大的性能提升。

因此，请选择更容易理解或提供更大灵活性的选项。只有您可以决定哪些标准很重要。例如，如果您在包中构建策略字符串生成器（而不是发布的独立函数）并且该包不保存状态，您可以动态更改策略，而不会中断会话。但是，除非您终止会话，否则不会应用 STATIC 策略。

# unit-testing - Testing WebSecurity.Login() problems

> ID：14601085
> 
> 赞同：0
> 
> 时间：2013-01-30T09:57:10.090
> 
> 标签：unit-testing, asp.net-mvc-4, security

I'm trying to test my ASP.NET MVC4 Application within Visual Studio and I am running into problems when testing `WebSecurity.Login()`. It seems to work perfectly when running my application but throws out an error when testing.

Method to test:

```
[HttpPost]
        [AllowAnonymous]
        [ValidateAntiForgeryToken]
        public ActionResult Login(HomeModels.LoginModel model)
        {
            if (ModelState.IsValid)
            {
                try
                {
                    var username = model.Username;
                    var password = model.Password;

                    if (WebSecurity.Login(username, password, true))
                    {

                        if (Roles.Provider.IsUserInRole(username, "admin"))
                        {
                            return RedirectToAction("AdminHome");
                        }
                        else if (Roles.Provider.IsUserInRole(username, "user"))
                        {
                            return RedirectToAction("LoginSuccessful");
                        }

                    }
                    else
                    {
                        //String errorMessage = "Login was not successful.";
                    }
                }
                catch (MemberAccessException e)
                {
                    ModelState.AddModelError("", e);
                }
            }
            return View(model);
        } 
```

Test Method:

```
[TestMethod]
        public void TestLoginAdminSuccessfulView()
        {
            HomeController controller = new HomeController();
            Ecommerce.Models.HomeModels.LoginModel login = new Ecommerce.Models.HomeModels.LoginModel();
            login.Username = "sgupta";
            login.Password = "sgupta2189";
            var result = (RedirectToRouteResult) controller.Login(login);
            Assert.AreEqual("AdminHome", result.RouteName);
        } 
```

Error Message:

```
Test method EcommerceUnitTests.Controllers.HomeControllerTest.TestLoginAdminSuccessfulView threw exception: 
System.InvalidOperationException: To call this method, the "Membership.Provider" property must be an instance of "ExtendedMembershipProvider". 
```

Error Stack Trace:

```
WebMatrix.WebData.WebSecurity.VerifyProvider()
WebMatrix.WebData.WebSecurity.Login(String userName, String password, Boolean persistCookie)
Ecommerce.Controllers.HomeController.Login(LoginModel model)
EcommerceUnitTests.Controllers.HomeControllerTest.TestLoginAdminSuccessfulView() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:21:23.793

copy the working web.config to app.config in the project containing your tests. Make sure your Test project references assembly that is / contains your custom member provider. If the main project is working, check what references it has.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T12:17:05.993

I ended up restructuring it all and using ASP.NET's default membership provider.

# uml - 将映射器用于数据库时是否泛化类

> ID：14601090
> 
> 赞同：0
> 
> 时间：2013-01-30T09:57:24.353
> 
> 标签：uml, class-design

假设我有以下课程：

客户、申请人、代理机构、合作伙伴

我需要使用数据库并使用映射器将对象映射到数据库。我的问题是，我可以用类人概括这些类并为这个类实现一个映射器吗？基本上它看起来像这样：

![在此处输入图像描述](../Images/7a040c23dcd4863f18bf2ba7ab535869.png)

而不是这个：

![在此处输入图像描述](../Images/19592aace08cd8b2f4193f288fef193a.png)

映射器类使用 orm 来保存和编辑数据库中的字段，我使用它们是因为我正在做的应用程序必须在未来进一步开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:19:45.763

如果每个类（`Partner`、`Applicant`等）具有不同的属性，则不能只有一个映射器用于所有类（当然可以，但是您必须使用元编程从类中检索信息降低层次结构）。解决方案还取决于如何以及由谁来管理您的数据库：您是否可以控制它的设计方式还是您无法更改的东西？在第二种情况下，我肯定会为每个类使用一个映射器，以允许 DB 和应用程序之间完全解耦。在第一种情况下，您可以使用某种映射层次结构。而且，这取决于您使用的语言/框架。

祝你好运！

# ember.js - Ember.js 排序和过滤父路由中 hasMany 关系的子级

> ID：14601092
> 
> 赞同：22
> 
> 时间：2013-01-30T09:57:27.670
> 
> 标签：ember.js, ember-data, ember-router

**更新#2**

我发现当我将过滤逻辑重构为在 PostController 中的复合计算属性中而不是在单个路由中时，我能够让它工作。该解决方案最终依赖于由特定 #linkTo 路由操作设置的单个动态变量，该操作触发 PostController 计算属性中的过滤更改。我有很多工作要赶上，所以我现在不能发布这个特定问题的解决方案，但是当我可以的时候，我会在下面详细解释解决方案。现在我已经将@twinturbo 的答案标记为正确，因为他在下面给出了部分但非常有用的指导。再次感谢大佬！！非常感激！！

**更新#1**

最新的小提琴位于[http://jsfiddle.net/aZNRu/14/](http://jsfiddle.net/aZNRu/14/)，在 @twinturbo 的帮助下，在其 Post 父控制器中对 Comments 的“rank”属性进行排序，以及基本过滤。在过滤路线中并创建新评论时，仍然存在无法自动更新视图的问题。

**原始问题**

我看到[有人谈论将可排序的 mixin 与过滤功能相结合](https://github.com/emberjs/ember.js/pull/1562)，但是现在，正如您在我的[jsfiddle 示例](http://jsfiddle.net/aZNRu/9/)中看到的那样，我在排序和过滤方面都遇到了问题：

1）我不知道如何在其父控制器中按特定子属性排序。如果我们有：

```
App.Post = DS.Model.extend({
    title: DS.attr('string'),
    post: DS.attr('string'),
    comments: DS.hasMany('App.Comment')
});

App.Comment = DS.Model.extend({
    post: DS.belongsTo('App.Post'),
    description: DS.attr('string'),
    isActive: DS.attr('boolean'),
    rank: DS.attr('number')
});

App.Router.map(function() {
  this.resource("posts", { path: "/" }, function() {
    this.resource('post', { path: ':post_id' }, function() {
        this.route('active');
        this.route('inactive');
     });
   });
}); 
```

我希望能够通过它的“排名”属性按升序对每个帖子的评论进行排序。我想做类似的事情：

```
App.PostController = Ember.ObjectController.extend({
    sortProperties: ['comments.rank'] 
```

但一方面，我认为 sortProperties 仅适用于 arrayControllers，而且我认为它的工作深度不能超过一层。我怎么能做到这一点？

2）第二个问题是在过滤路由时没有自动更新视图。例如，如果您查看 jsfiddle 并通过单击“Active Comments”进入活动过滤路由，您将获得对当前数据的良好过滤效果。但是，如果您保留在活动路线中并通过单击“添加新评论”创建一条处于活动状态的新记录，则该记录不会自动呈现在“活动”下，并且仅当您单击另一条路线然后返回该路线时才会出现。

我是在路由中错误地设置路由过滤还是在模板中引用错误？

```
App.PostActiveRoute = Ember.Route.extend({
  setupController: function() {
    var post = this.controllerFor('post').get('model'),
    comments = post.get('comments');

    var activeComments = comments.filter(function(comment) {
      if (comment.get('isActive')) { return true; }
    });

    this.controllerFor('post').set('filteredComments', activeComments);
  }
});

<ul>
    {{#each comment in filteredComments}}
        <li>{{comment.rank}} {{comment.description}} - isActive: {{comment.isActive}}</li>
    {{/each}}
</ul> 
```

您可以就这些问题提供任何见解，我们将不胜感激！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-11T21:40:38.253

> 但一方面，我认为 sortProperties 仅适用于 arrayControllers，而且我认为它的工作深度不能超过一层。我怎么能做到这一点？

您是正确的， sortProperties 仅适用于`Ember.ArrayController`.

你真的不需要做任何花哨的事情来实现这一点。只需将 comments 数组包装在一个`ArrayProxy`包含可排序 mixin 的新数组中。然后，您可以对评论进行排序。然后您不需要嵌套属性，因为您正在对一组注释进行排序。

请不要延长`DS.ManyArray`。没有必要这样做。

至于排序和过滤，这里需要用到合成。这意味着创建类似`filteredContent`and的东西`sortedContent`。然后就可以`sortedContent`使用了`filteredContent`。

更新：

```
PostController = Ember.ObjectController.extend({
  comments: (function() {
    return Ember.ArrayProxy.createWithMixins(Ember.SortableMixin, {
      sortProperties: ['rank'],
      content: this.get('content.comments')
    });
  }).property('content.comments') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-30T21:28:31.987

这也可以通过计算属性宏来完成。

```
PostController = Ember.ObjectController.extend({
 commentSortProperties: ['rank:desc', 'createdAt:asc'],
 comments: Em.computed.sort('model.comments', 'commentSortProperties')
}); 
```

[看看这里的代码](https://github.com/emberjs/ember.js/blob/v1.8.0/packages/ember-runtime/lib/computed/reduce_computed_macros.js#L627)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:49:06.520

也许您可以通过扩展存储并在 createManyArray 方法中添加可排序的 mixin 来使您的多数组可排序？（我没有测试它是否有效）

```
App.store = DS.Store.create({
  createManyArray: function (type, clientIds) {
    var array = DS.ManyArray.create(Ember.SortableMixin, { type: type, content: clientIds, store: this });

    clientIds.forEach(function (clientId) {
        var recordArrays = this.recordArraysForClientId(clientId);
        recordArrays.add(array);
    }, this);

    return array;
  }
}); 
```

然后您可以绑定到数组的排列内容

```
{#each comment in filteredComments.arrangedContent}} 
```

# jquery - 如何在javascript的click函数中编写if else

> ID：14601096
> 
> 赞同：0
> 
> 时间：2013-01-30T09:57:37.823
> 
> 标签：jquery

我有一个“post”类的 div，里面有一堆没有指定高度的文本。

```
.post {
    width: 100%;
    margin: 0 0 2% 0;
    background-color: #AAA;
    overflow: hidden;
} 
```

使用 jQuery，我想最初添加第二个类“postLess”，指定高度为 300 像素。因此隐藏了部分文本。

```
.postLess {
    height: 300px;
} 
```

单击“阅读更多”按钮时，我想删除“postLess”并添加“postMore”，以便将高度设置为“auto”并显示全文。

```
.postMore {
    height: auto;
} 
```

然后我当然希望它在第二次单击按钮时删除类“postMore”并添加回类“postLess”。这是我的 jQuery。我究竟做错了什么？

```
 $('.post').addClass('postLess');
    $('.readMore').click(function() {
        if ($('.post').hasClass('postLess')) {
            $('.post').removeClass('postLess').addClass('postMore');
        }
        else if ($('.post').hasClass('postMore')) {
            $('.post').removeClass('postMore').addClass('postLess');
        }
    }); 
```

这是我的 HTML 的重要部分，一直到前两个“.post”

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Switchback</title>
        <link href="css/styles.css" type="text/css" rel="stylesheet">
        <script src="js/jquery-1.9.0.min.js" type="text/javascript"></script>
    </head>
    <body>
        <header>
        </header>
        <div id="content">
            <div id="sidebar">
                <p>
                    Ut neque tellus, dapibus bibendum tempor quis, gravida vitae nisl.     Pellentesque erat elit, ullamcorper in accumsan id, ullamcorper in lectus. Nullam nec augue 
                </p>
                <p>
                    Nunc facilisis lacus vel enim fringilla consequat. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Curabitur vitae sem mauris. 
                </p>
            </div> <!-- end div id="sidebar" -->
            <div id="posts">
                <div class="post">
                    <div class="postImg" style="background-image: url('img/pic1.png');">
                    </div>
                    <p>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse purus lorem, viverra sed blandit non, vulputate in sem. Donec laoreet turpis id lectus 
                        <a href="javascript:;" class="readMore">read&nbsp;more&nbsp;&raquo;</a>
                    </p>
                </div>
                <div class="post">
                    <div class="postImg" style="background-image: url('img/pic2.png');">
                    </div>
                    <p>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed nec felis 
                    </p>
                    <p>
                        Sed ornare, velit ac dignissim lacinia, dui mauris suscipit enim, quis viverra metus elit id quam. Sed quis tellus nulla. Nam pulvinar ante at felis lobortis eleifend. 
                        <a href="#" class="readMore">read&nbsp;more&nbsp;&raquo;</a>
                    </p>
                </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:59:25.040

如果元素以一个类开始，并且您想删除该类并添加一个不同的类，反之亦然，只需使用 toggleClass() 切换两个类，它应该为您完成这项工作：

```
$('.readMore').on('click', function() {
    $('.post').toggleClass('postLess postMore');
}); 
```

如果有多个`.post`元素，则需要单独定位它们。

如果 .post 元素是 .readMore 元素的父元素，则可以使用 close() ：

```
$('.readMore').on('click', function() {
    $(this).closest('.post').toggleClass('postLess postMore');
}); 
```

如果是孩子，您可以使用 context ：`$('.post', this).toggleClass('postLess postMore');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:00:27.280

这是一种更有效的方法，只需将类切换为关闭 no if 语句

```
$('.post').addClass('postLess');
    $('.readMore').click(function() {
           $('.post').toggleClass('postLess postMore');
            return false;      
    }); 
```

此外，如果您的帖子更多按钮位于帖子 div 中，您可以执行以下操作。这意味着您可以让 post div 的多个实例独立运行。

```
$('.post').addClass('postLess');
        $('.readMore').click(function() {
               $(this).parent().toggleClass('postLess postMore');
               return false;      
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:00:47.877

您只需要针对您要阅读的帖子进行操作，不要使用`$('.post')`而是使用`$(this).parents('.post')`。

所以完整的解决方案是：

```
$('.readMore').on('click', function() {
    $(this).parents('.post').toggleClass('postLess postMore');
}); 
```

是wordpress博客吗？我非常喜欢这个主意，我可以试试我的！

# web-services - Google 地球：动态参数化 KML 可能吗？

> ID：14601097
> 
> 赞同：1
> 
> 时间：2013-01-30T09:57:38.190
> 
> 标签：web-services, kml, google-earth

我制作了一个大的 KML 文件。23 MB 长。谷歌地球渲染它很长一段时间，滞后并占用 1GB 内存等等。在较慢的计算机上，它也可能不渲染某些区域。

因此，想法是使用参数化的 GET 请求向服务器返回仅针对具有指定边界的区域的 kml 数据。

GoogleEarth 可以发起和使用此类请求吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:10:54.893

您所要求的可以通过 NetworkLink 完成。如果您从 servlet、Web 服务、脚本等动态生成 KML，那么您可以指示 Google 地球发送其视图的边界框，您可以从中生成要返回的 KML。这种方法需要在应用程序服务器/Web 服务器上托管一个自定义“服务”，该服务可以生成 KML 以响应 Google 地球发送的请求。

在您的根级 NetworkLink 中，您需要定义 refreshMode= *onChange*以在视图与 servlet 的 URL 一起更改时刷新。建议使用 viewRefreshTime 元素设置 viewRefreshMode= *onStop*，以便在用户停止缩放/移动后仅 1 秒获取数据，否则数据会不断刷新。还需要 viewFormat 来指示 Google Earth 返回视图的边界框。在此示例中，BBOX 参数被添加到 HTTP GET 请求中发送到 servlet 的 HTTP 参数中。

```
<Link>
      <href>servlet-url</href>
      <refreshMode>onChange</refreshMode>
      <viewRefreshMode>onStop</viewRefreshMode>
      <viewRefreshTime>1</viewRefreshTime>
      <viewFormat>BBOX=[bboxWest],[bboxSouth],[bboxEast],[bboxNorth]</viewFormat>
</Link> 
```

如果您的数据跨越较大区域，那么您可以将数据分解为单独的 KML 文件，然后在父 KML 文件中指定基于区域的 NetworkLink。这种方法将允许您将数据作为静态 KML 文件生成一次，并且仅根据用户的视图提供哪些数据是“活动的”。

相关教程：

[https://developers.google.com/kml/documentation/regions#regionbasednl](https://developers.google.com/kml/documentation/regions#regionbasednl)

参考：

[https://developers.google.com/kml/documentation/kmlreference#networklink](https://developers.google.com/kml/documentation/kmlreference#networklink) [https://developers.google.com/kml/documentation/kmlreference#region](https://developers.google.com/kml/documentation/kmlreference#region) [https://developers.google.com/kml/documentation/kmlreference#视图格式](https://developers.google.com/kml/documentation/kmlreference#viewformat)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:13:55.603

是的，这根本不是问题。您在 Google 地球中将 KML 的源 URL 添加为带有参数的 URL，然后将其作为多个单独的源加载。使用这种方法虽然您只是在将 KML 添加到 GE 时“动态地”提供标准，但从那时起，它看起来就像您将加载的任何其他静态 KML 文件一样。

**编辑**我现在看到（登录到 GE）它实际上调用了@JasonM1 描述的这些网络链接（在 Add->NetworkLink 下）

# mysql - mysql将两个日期字段与两个日期字符串进行比较

> ID：14601099
> 
> 赞同：1
> 
> 时间：2013-01-30T09:57:45.730
> 
> 标签：mysql, sql, date

```
select
start_date,stop_date_original
from dates
where 
start_date is not null
and stop_date_original is not null 
and start_date > str_to_date('10/10/2009','%d/%m/%Y')
/*and stop_date_original < str_to_date('01/24/2013','%d/%m/%Y')*/ 
```

此查询工作正常，但是当我取消注释最后一行或使用它来替换结果不受影响之前的最后一行或我得到一个空的结果集时。

这种方法是否存在可能导致这种行为的问题？

此外，空检查是否在不同的数据库系统中本质上是必需的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:05:28.910

停止日期必须是`24/01/2013`，而不是`01/24/2013`：

```
select
  start_date,
  stop_date_original
from
  dates
where 
  start_date is not null
  and stop_date_original is not null 
  and start_date > str_to_date('10/10/2009','%d/%m/%Y')
  and stop_date_original < str_to_date('24/01/2013','%d/%m/%Y') 
```

或者你必须在你的函数上反转日期和月份`str_to_date('01/24/2013','%m/%d/%Y')`。

此外，如果`start_date`为空，或者如果`stop_date_original`为空，则条件无论如何都会被评估为空，因此您无需检查它们是否不为空，尽管这使事情更具可读性。

# c++ - 使用 pion-net c++ 的 HTTP 客户端请求响应

> ID：14601100
> 
> 赞同：2
> 
> 时间：2013-01-30T09:57:50.297
> 
> 标签：c++, http, boost-asio, pion-net

我想用[pion-net](https://github.com/cloudmeter/pion "先锋网")创建一个简单的 HTTPClient （Pion-net 利用 boost::asio.）。
引导版本 1.49 Pion-net 版本 4.11

我的客户应该能够：

*   发送 HTTP 请求（这是有效的）
*   接收 HTTP 响应（不工作）
*   异步代码不是必须的，同步就可以了

这就是我得到的：

```
#include <iostream>
#include "boost/asio.hpp"
#include "boost/thread.hpp"
#include "pion/net/HTTPRequestWriter.hpp"
#include "pion/net/HTTPResponseReader.hpp"

void FinishedResponseReading(pion::net::HTTPResponsePtr httpResponsePtr,
                             pion::net::TCPConnectionPtr tcpConnectionPtr,
                             const boost::system::error_code& errorCode_ref)
{
    // ***************************
    // this code is never reached!
    // ***************************
    std::cout << errorCode_ref << std::endl;
    std::cout << httpResponsePtr->getContent() << std::endl;

    tcpConnectionPtr->finish();
    tcpConnectionPtr->close();
}

void FinishedRequestSending(const boost::system::error_code& error_code_ref,
                            pion::net::TCPConnectionPtr tcpConnectionPtr,
                            pion::net::HTTPRequest* httpRequest_ptr)
{
    // ***************************
    // this code is never reached!
    // ***************************
    pion::net::HTTPResponseReader::FinishedHandler fh =
        boost::bind(FinishedResponseReading, _1, _2, _3);
    pion::net::HTTPResponseReaderPtr httpResponseReaderPtr =
        pion::net::HTTPResponseReader::create(tcpConnectionPtr,
                                              *httpRequest_ptr,
                                              fh);
    httpResponseReaderPtr->receive();
}

int main()
{
    boost::asio::io_service io_service;

    // create and configure HTTPRequest
    pion::net::HTTPRequest* httpRequest_ptr = new pion::net::HTTPRequest();
    pion::net::HTTPRequestPtr httpRequestPtr(httpRequest_ptr);
    httpRequest_ptr->setResource("/someService");
    httpRequest_ptr->setMethod("PUT");

    // create TCPConnection
    pion::net::TCPConnection* tcpConnection_ptr =
        new pion::net::TCPConnection(io_service);
    pion::net::TCPConnectionPtr tcpConnectionPtr(tcpConnection_ptr);

    // create HTTPRequestWriter
    pion::net::HTTPRequestWriterPtr httpRequestWriterPtr(
        pion::net::HTTPRequestWriter::create(tcpConnectionPtr,
                                             httpRequestPtr,
                                             boost::bind(FinishedRequestSending, _1,
                                                         tcpConnectionPtr, 
                                                         httpRequest_ptr)));
    // needed?
    tcpConnection_ptr->setLifecycle(pion::net::TCPConnection::LIFECYCLE_KEEPALIVE);
    // connect to server
    tcpConnection_ptr->connect("192.168.1.14", 8080);
    // send payload
    httpRequestWriterPtr << "{\"someService\": \"something\"}";
    httpRequestWriterPtr->send();

    // ***********************************
    // working fine so far! server is getting payload and is sending a HTTP Response
    // but FinishedRequestSending is never reached
    // ***********************************

    // this is just to not exit immediately
    boost::this_thread::sleep(boost::posix_time::milliseconds(15000));

    // cleanup
    delete(httpRequest_ptr);
    delete(tcpConnection_ptr);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T12:41:03.707

如果你想同步通信，你可以这样做：

```
int main()
{
    boost::asio::io_service io_service
    pion::net::TCPConnection tcpConnection(io_service);

    pion::net::HTTPRequest httpRequest;
    httpRequest.setResource("/server/resource");
    httpRequest.setMethod("PUT");
    httpRequest.setMinor(1);
    httpRequest.setMajor(1);
    httpRequest.setContent("test");

    boost::system::error_code ec;
    ec = tcpConnection.connect("192.168.1.1", 80); // blocks till connected or timed out
    if (!ec)
    {
        httpRequest.send(tcpConnection, ec); // never blocks
        if (!ec)
        {
            pion::net::HTTPResponse(httpRequest);
            httpResponse.receive(tcpConnection, ec); // this might block forever :-(
            // httpResponse.receive seems to be IO dependent, you can set your socket to timeout
            if (!ec)
            {
                httpResponse.write(std::cout, ec);
            }
        }
    }
} 
```

* * *

但是，如果您需要更复杂的方法，则可以`pion::net::HTTPResponseReader`等待异步服务器响应。
标题：

```
class MyHTTPClient {
public:
    void close();
    pion::net::HTTPResponsePtr blockingReceiveOrTimeout(pion::net::HTTPRequest httpRequest, boost::system::error_code& ec_ref);
    MyHTTPClient(boost::asio::ip::address aServerIP, unsigned int aServerPort);
    virtual ~MyHTTPClient();
private:
    boost::asio::ip::address            mp_serverIP;
    unsigned int                    mp_serverPort;
    boost::asio::io_service             mp_ioService;
    pion::net::TCPConnectionPtr         mp_tcpConnectionPtr;
    pion::net::HTTPResponsePtr          mp_curr_httpResponsePtr;
    boost::system::error_code           mp_curr_errorCode;

    void finishedReceiveResponse(pion::net::HTTPResponsePtr httpResponsePtr, const boost::system::error_code& error_code_ref);

}; 
```

cp:

```
MyHTTPClient::MyHTTPClient(boost::asio::ip::address aServerIP, unsigned int aServerPort) : mp_serverIP(aServerIP), mp_serverPort(aServerPort)
{
    mp_tcpConnectionPtr.reset(new pion::net::TCPConnection(mp_ioService));
    mp_tcpConnectionPtr->setLifecycle(pion::net::TCPConnection::LIFECYCLE_KEEPALIVE);
}

MyHTTPClient::~MyHTTPClient()
{
     mp_tcpConnectionPtr->close();
}

void MyHTTPClient::close()
{
    mp_tcpConnectionPtr->close();
}

pion::net::HTTPResponsePtr MyHTTPClient::blockingReceiveOrTimeout(pion::net::HTTPRequest httpRequest, boost::system::error_code& error_code_ref)
{
    // reinit
    mp_curr_httpResponsePtr.reset();
    mp_ioService.reset();
    error_code_ref.clear();

    // connect to server if not already connectec
    if (!mp_tcpConnectionPtr->is_open())
    {
        error_code_ref = mp_tcpConnectionPtr->connect(mp_serverIP, mp_serverPort);
    }
    if (!error_code_ref)
    {
        // send Request
        httpRequest.send(*mp_tcpConnectionPtr.get(), error_code_ref, false);

        if (!error_code_ref)
        {
            // asynchronously wait for response (times out automatically)
            pion::net::HTTPResponseReader::FinishedHandler responseReaderFinishHandler = boost::bind(&MyHTTPClient::finishedReceiveResponse, this, _1, _3);
            const pion::net::HTTPRequest constHTTPRequest = httpRequest;
            pion::net::HTTPResponseReaderPtr httpResponseReaderPtr = pion::net::HTTPResponseReader::create(
                    mp_tcpConnectionPtr,
                    constHTTPRequest,
                    responseReaderFinishHandler);
             httpResponseReaderPtr->receive();
             mp_ioService.run();
        }
    }
    return mp_curr_httpResponsePtr;
}

void MyHTTPClient::finishedReceiveResponse(pion::net::HTTPResponsePtr httpResponsePtr, const boost::system::error_code& error_code_ref)
{
    mp_curr_httpResponsePtr = httpResponsePtr;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-21T06:09:12.653

Martin 为 PION 5.0.3 更新的代码：

httpClient.hpp：

```
#ifndef httpClient_HPP_INCLUDED
#define httpClient_HPP_INCLUDED

#include <pion/error.hpp>
#include <pion/http/response.hpp>
#include <pion/tcp/connection.hpp>
#include <pion/http/response_reader.hpp>
#include <boost/asio.hpp>

class httpClient
{
public:
    void close();
    pion::http::response_ptr blockingReceiveOrTimeout(pion::http::request httpRequest, boost::system::error_code& ec_ref);
    httpClient(boost::asio::ip::address aServerIP, unsigned int aServerPort);
    virtual ~httpClient();

private:
    boost::asio::ip::address mp_serverIP;
    unsigned int mp_serverPort;
    boost::asio::io_service mp_ioService;
    pion::tcp::connection_ptr mp_tcpConnectionPtr;
    pion::http::response_ptr mp_curr_httpResponsePtr;
    boost::system::error_code mp_curr_errorCode;

    void finishedReceiveResponse(pion::http::response_ptr httpResponsePtr, const boost::system::error_code& error_code_ref);

};

#endif // httpClient_HPP_INCLUDED 
```

httpClient.cpp：

```
#include "httpClient.hpp"

httpClient::httpClient(boost::asio::ip::address aServerIP, unsigned int aServerPort) : mp_serverIP(aServerIP), mp_serverPort(aServerPort)
{
    mp_tcpConnectionPtr.reset(new pion::tcp::connection(mp_ioService));
    mp_tcpConnectionPtr->set_lifecycle(pion::tcp::connection::LIFECYCLE_KEEPALIVE);
}

httpClient::~httpClient()
{
     mp_tcpConnectionPtr->close();
}

void httpClient::close()
{
    mp_tcpConnectionPtr->close();
}

pion::http::response_ptr httpClient::blockingReceiveOrTimeout(pion::http::request httpRequest, boost::system::error_code& error_code_ref)
{
    // reinit
    mp_curr_httpResponsePtr.reset();
    mp_ioService.reset();
    error_code_ref.clear();

    // connect to server if not already connectec
    if (!mp_tcpConnectionPtr->is_open())
    {
        error_code_ref = mp_tcpConnectionPtr->connect(mp_serverIP, mp_serverPort);
    }
    if (!error_code_ref)
    {
        // send Request
        httpRequest.send(*mp_tcpConnectionPtr.get(), error_code_ref, false);

        if (!error_code_ref)
        {
            // asynchronously wait for response (times out automatically)
            pion::http::response_reader::finished_handler_t responseReaderFinishHandler = boost::bind(&httpClient::finishedReceiveResponse, this, _1, _3);
            const pion::http::request constHTTPRequest = httpRequest;
            pion::http::response_reader_ptr httpResponseReaderPtr = pion::http::response_reader::create(
                    mp_tcpConnectionPtr,
                    constHTTPRequest,
                    responseReaderFinishHandler);
             httpResponseReaderPtr->receive();
             mp_ioService.run();
        }
    }
    return mp_curr_httpResponsePtr;
}

void httpClient::finishedReceiveResponse(pion::http::response_ptr httpResponsePtr, const boost::system::error_code& error_code_ref)
{
    mp_curr_httpResponsePtr = httpResponsePtr;
} 
```

为了完整性 main.cpp：

```
#include <iostream>
#include "httpClient.hpp"

int main (int argc, char *argv[])
{
    pion::http::request request;
    std::string requestData = "asdf";
    request.set_content(requestData);
    httpClient client(boost::asio::ip::address::from_string("10.1.1.100"), 80);
    pion::http::response_ptr response;
    boost::system::error_code ec;
    response = client.blockingReceiveOrTimeout(request, ec);
    response->write(std::cout, ec);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T22:40:38.227

我对 pion-net 不熟悉。但是，根据我认为按照命名约定使用的[版本](https://github.com/cloudmeter/pion/tree/112ba9a6188a7bdded4e110b79fa673dbf85ea07)，快速扫描 pion-net 代码看起来好像[`io_service.run()`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/io_service/run/overload1.html)需要在应用程序代码中调用。我发现 pion-net 显式调用的唯一地方`io_service.run()`是`PionScheduler`类型使用的`Server`类型。

# three.js - 通过 Three.js 操作 Blender 元信息

> ID：14601103
> 
> 赞同：0
> 
> 时间：2013-01-30T09:58:03.290
> 
> 标签：three.js, blender

我需要使用 webGL 显示一些搅拌机模型。那么我需要知道的是，**是否可以在 Blender 中添加一些我们可以使用 webGL 操作的元信息？**

例如：

*   **在Blender**中添加关于灯光位置的元信息
*   使用**Three.js** (webGL)，将灯光代替来自 Blender 的灯光元信息

我希望我能很好地表达我的需要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:28:30.787

在 Blender 中，您可以命名对象，在三中，您可以按名称搜索对象、灯光和相机。然后，您可以隐藏、删除、替换、修改或克隆这些对象。

我已经用 Collada/DAE 场景做到了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:37:08.490

除了网格，Three.js 的 Blender 导出器支持开箱即用地导出灯光和相机（以及显然是非网格的纯 Object3D）。导出时只需勾选对应的选项和场景导出选项，使用[SceneLoader](http://mrdoob.github.com/three.js/docs/55/#Reference/Loaders/SceneLoader)进行加载即可。如果您需要除此之外的其他内容，则需要修改导出器。

# android - 如何将点击事件放在单个按钮上，以便它转到android中的上一个活动

> ID：14601104
> 
> 赞同：-1
> 
> 时间：2013-01-30T09:58:10.153
> 
> 标签：android, button, android-intent, back

我已经创建了一个应用程序，因为我有一个包含 TextView 和一个按钮的活动。现在这个活动在应用程序中被多次使用，所以我想要的是当我单击该活动中的后退按钮时，它应该转到上一个活动.简而言之，它应该作为设备的后退按钮。我的代码如下：

此活动用于 4 个活动，

所以我尝试如下：

**Advance_help.java**

```
package com.theappgeeks.kevingreenwealth;

import java.text.BreakIterator;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class AdvanceHelp extends Activity implements OnClickListener{
Button btn;
Calculator_1Activity cal1 =new Calculator_1Activity();
Calculator2 cal2 =new Calculator2();
Calculator_3Activity cal3 =new Calculator_3Activity();
Calculator_4Activity cal4 =new Calculator_4Activity();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_advance_help);
        btn=(Button)findViewById(R.id.button1);
        /*btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                if(btn.)
            Intent i1=new Intent(AdvanceHelp.this,Calculator_1Activity.class);  
            startActivity(i1);

            }
        });*/
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_advance_help, menu);
        return true;
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        if(v.equals(cal1)){
            btn.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Intent i1= new Intent(AdvanceHelp.this,Calculator_1Activity.class);
                    startActivity(i1);
                }

            });

        }
        else if(v.equals(cal2)){
            btn.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Intent i1= new Intent(AdvanceHelp.this,Calculator2.class);
                    startActivity(i1);
                }

            });

        }

        else if(v.equals(cal3)){
            btn.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Intent i1= new Intent(AdvanceHelp.this,Calculator2.class);
                    startActivity(i1);
                }

            });

        }

        else if(v.equals(cal4)){
            btn.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Intent i1= new Intent(AdvanceHelp.this,Calculator2.class);
                    startActivity(i1);
                }

            });

        }
        else
        {
            Intent i = new Intent(AdvanceHelp.this,MainMenuActivity.class);
            startActivity(i);
        }
    }
} 
```

请尽快帮助我..提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:04:41.540

糟糕的编程习惯，

正如你已经`implements OnClickListener`

```
btn=(Button)findViewById(R.id.button1);
btn.setOnClickListener(this); 
```

并删除

```
 btn.setOnClickListener(new OnClickListener() { 
```

从

```
@Override
    public void onClick(View v) { 
```

而对于

```
i want is that when i click the back button in that activity ,it should go to the previous
activity.In short it should work as back button of device.My code is as below: 
```

`finish()`只需在您想要的按钮的 click() 中调用 Activity ..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:18:53.273

在您的`onClick(View v)`方法调用中`super.OnBackPressed()`模拟被按下的后退按钮，或调用`finish()`结束当前活动并返回到上一个正在运行的活动

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:04:08.997

只需调用 Method `onBackPressed()`。当您按下后退按钮时也会调用此方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T10:14:05.093

对于支持和完成上述答案是正确的，但这不是一个合适的问题，你有一个按钮，你想调用 4 不可能的活动......！！！！因为您正在将它与 id 进行比较，并且只有当您拥有多个按钮时才重要.....!!!!!!

# .net - 如何列出正在运行的 silverlight 应用程序

> ID：14601106
> 
> 赞同：1
> 
> 时间：2013-01-30T09:58:11.980
> 
> 标签：.net, silverlight, profiling, profiler

有没有办法找出在所有 Internet 浏览器（包括 IE）上运行的 silverlight 应用程序。事实上，我是分析的新手，我想制作一个自定义的 .NET Applications Profiler。是否有 API 与 Silverlight 应用程序通信？哪个版本的 silverlight 最容易分析（根据提供的 API）？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:12:30.013

几个月前，我做了一个列举所有 .NET 和 SL 进程的小项目。你可以在这里找到它[http://iobservable.net/blog/?p=107](http://iobservable.net/blog/?p=107)

# iphone - viewWithTag 故障。

> ID：14601107
> 
> 赞同：0
> 
> 时间：2013-01-30T09:58:22.697
> 
> 标签：iphone, ios, objective-c, uiview

我通过情节提要设计了 tableView，在一个单元格中我有一个按钮和一个标签。按钮在 storyboard.in cellForRowAtIndexPath 上有标签 1 和标签有标签 2 我正在访问这些，如下所示

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@" i am back in cellForRowAtIndexPath");  

    static NSString *CellIdentifier = nil;
   // UILabel *topicLabel;
    NSInteger rows=indexPath.row;
    NSLog(@"row num=%i",rows);
    if (rows % 2==0)
    {
        CellIdentifier=@"LeftTopicCell";
    }
    else
    {
        CellIdentifier=@"RightTopicCell";

    }

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    UIButton *topicButton=(UIButton *)[cell viewWithTag:1];
    UILabel  *topicScoreLabel=(UILabel *)[cell viewWithTag:2];

    NSString *topicNameLabel=[[NSString alloc]init];

    //some logic processing

            topicNameLabel= topicItem.topicTitle;

            [topicButton setTitle:topicNameLabel forState:UIControlStateNormal];
        [topicButton setTag:indexPath.row ];
            [topicButton setTitle:topicNameLabel forState:UIControlStateHighlighted];
            [topicButton addTarget:self action:@selector(topicButtonSelected:) forControlEvents:UIControlEventTouchDown];

        [topicScoreLabel setText:[NSString stringWithFormat:@"%d/%d",correctAnswers,[answerResults count]]];
    }

    return cell;
} 
```

第一次它工作得很好，但是当我回到这个视图控制器时，我又重新加载了这个，但这次它工作了两行。但是对于第三行，它为此行返回 UIButton 而不是 UILabel ，`UILabel *topicScoreLabel=(UILabel *)[cell viewWithTag:2];`因此它给出异常“无法识别的选择器“[UIButton setText]””；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T10:17:47.693

因为您将按钮和标签设置为标签 1 和 2，然后再次将标签值设置为 indexpath.row，这就是它产生问题的原因

```
 [topicButton setTag:indexPath.row ]; 
```

因此，只需为您的按钮和标签设置一些其他标签值，例如 1000。

然后你访问

```
UIButton *topicButton=(UIButton *)[cell viewWithTag:1000];
UILabel  *topicScoreLabel=(UILabel *)[cell viewWithTag:1001]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:11:30.510

我得到了答案，因为我正在根据行号通过 cellForRowAtIndexPath 中的 setTag 方法更新按钮标签，它将标签设置为按钮为 2，这就是它返回 UIButton 的原因

# c# - 如何为富文本框中的某些文本设置 FontStyle？

> ID：14601111
> 
> 赞同：4
> 
> 时间：2013-01-30T09:58:42.037
> 
> 标签：c#

我有一个 RichTextBox。我想更改所选文本的字体样式而不更改 FontFamily。

我使用此代码

```
 RTBMain.SelectionFont = new Font(RTBMain.SelectionFont, FontStyle.Bold); 
```

这是更改字体样式，但我的问题是：

当我选择更改 fontfamily 的文本时，出现错误

> 你调用的对象是空的。

因为

```
RTBMain.SelectionFont=null 
```

例如 ：

我的文字是“我有一个学生”

“a”的 FontFamily 是“Tahoma”

“学生”的字体家族是“探戈”

然后我选择“a student”：FontFamily 为空。

但是当我选择“a”或“student”时：字体系列不是空的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:10:09.863

```
if(RTBMain.SelectionFont != null)
{
 RTBMain.SelectionFont = new Font(RTBMain.SelectionFont, FontStyle.Bold);
} 
```

或者

```
if (RTBMain.SelectionLength > 0)
{
 RTBMain.SelectionFont = new Font(RTBMain.SelectionFont, FontStyle.Bold);
} 
```

**[参考](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.selectionfont%28v=vs.71%29.aspx)**

```
private void ToggleBold()
{
 if (richTextBox1.SelectionFont != null)
 {
  System.Drawing.Font currentFont = richTextBox1.SelectionFont;
  System.Drawing.FontStyle newFontStyle;

  if (richTextBox1.SelectionFont.Bold == true)
  {
     newFontStyle = FontStyle.Regular;
  }
  else
  {
     newFontStyle = FontStyle.Bold;
  }

  richTextBox1.SelectionFont = new Font(
     currentFont.FontFamily, 
     currentFont.Size, 
     newFontStyle
  );
 } 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:01:23.860

例如：

```
richTextBox1.Find("Text", RichTextBoxFinds.MatchCase);

richTextBox1.SelectionFont = new Font("Verdana", 12, FontStyle.Bold);
richTextBox1.SelectionColor = Color.Red; 
```

首先，您需要选择要更改格式的文本。

并且`SelectionFont`不能同时是两种字体。

# html - 2 列 div 中的行分隔符

> ID：14601119
> 
> 赞同：0
> 
> 时间：2013-01-30T09:59:02.140
> 
> 标签：html, css

我想像这样在 html div 中放置行分隔符：如下所示的黑线 Z 形“镜像”，我尝试设置最后一个左侧 div 和第一个右侧 div 边框，但我无法想到我怎么能绘制垂直线，**以非常聪明的方式使用 CSS**

![在此处输入图像描述](../Images/8d8ba49490b7c8b0135236c45c6bb702.png)

我试过这个：-

```
<div id="wrap">
        <div>
            <div class="left_col">Industry:</div>
            <div class="right_col" style="border-Top: 1px solid black">Insurance</div>
        </div>
        <div >
            <div class="left_col" >Co. Size:</div>
            <div class="right_col">201 - 500 Employees</div>
        </div>
        <div >
            <div class="left_col">Working Hours:</div>
            <div class="right_col">Regular hours, Mondays-Fridays</div>
        </div>
        <div >
            <div class="left_col">Benefits:</div>
            <div class="right_col">Medical, Education support, Loans, Dental</div>
        </div>
        <div >
            <div class="left_col" style="border-bottom: 1px solid black">Spoken Language:</div>
            <div class="right_col">English</div>
        </div>
    </div> 
```

**示例**在这里：[jsfiddle](http://jsfiddle.net/B6ypc/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:11:23.893

用两个dis包裹左右两列

这是满足您要求的CSS

```
 #wrap{margin:10px;}
.left{
   width:50%; display:table-cell;
    border-bottom: 1px solid black; 
    border-right: 1px solid black; 
    padding:15px
}
.right{
    display:table-cell;
    border-top: 1px solid black; 
    vertical-align:top;  width:50%;
    padding:15px
} 
```

**[更新的演示](http://jsfiddle.net/VgGDp/7/)**

# eclipse-rcp - 贡献编辑器菜单的推荐方式是什么

> ID：14601131
> 
> 赞同：1
> 
> 时间：2013-01-30T09:59:30.080
> 
> 标签：eclipse-rcp

当我阅读 Eclipse 帮助时，[有](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/editors_actions.htm&cp=2_0_13_8)一个使用contributorClass 的贡献菜单示例。这是关于行动甚至重新定位行动。另外还有一段文字：

> 要了解编辑器如何将自己注册到工作台并为工作台菜单栏提供操作，请参阅讨论[org.eclipse.ui.editors](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/workbench_basicext_editors.htm)的部分。我们不会在这里重复这些信息。

该链接将您带到一个与contributorClass 甚至与操作无关的部分，您必须使用命令为他们所说的编辑器提供菜单。

此外，在 Eclipse 中，帮助不再与动作和重定向动作有关，因为它们已被 AFAIK 弃用。我很困惑。为编辑提供菜单的正确方法是什么？为什么不弃用contributorClass？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:09:31.760

AFAIK Eclipse 4.x 不推荐使用这些操作（请参阅[错误 285089](https://bugs.eclipse.org/bugs/show_bug.cgi?id=285089)），您应该在任何地方使用命令。eclipse 帮助并没有真正的帮助，因为它不是最新的。Vogella[的网站](http://www.vogella.com/eclipse.html)为您在 eclipse 插件开发或 eclipse rcp 中所需的基本内容提供了更准确的信息和教程。

# java - 如何获取从 resteasy web 服务返回的 hashmap？

> ID：14601133
> 
> 赞同：0
> 
> 时间：2013-01-30T09:59:33.953
> 
> 标签：java, resteasy

我喜欢从一个简单的 Web 服务返回一个 hashmap 对象..但是我无法从客户端获取 hashmap 对象（在我的情况下..它是一个托管 bean）。当我尝试使用以下代码获取该 hashMap 时...

```
ClientRequest  clientRequest = new ClientRequest("MyserviveURL");
ClientResponse clientResponse = clientRequest.get(new GenericType <HashMap<String, Boolean>>(){});

HashMap myHash = (HashMap<String, Boolean>) clientResponse.getEntity(); 
```

我收到类似 Unable to find a MessageBodyReader for HashMap 之类的错误...请帮助我摆脱这个错误。

而且我还想知道从客户端获取 hashmap 对象的最佳方法。它可以通过 xml 或 json

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:03:09.867

如果你使用杰克逊

用户映射器

```
ObjectMapper mapper = new ObjectMapper();
String json = mapper.writeValueAsString(myHash); 
```

现在将其返回`json`为“应用程序/json”

# windows - Windows 任务计划不能正确执行作业？

> ID：14601137
> 
> 赞同：0
> 
> 时间：2013-01-30T09:59:41.273
> 
> 标签：windows, sql-server-2008-r2, scheduled-tasks, admin, system-administration

我有一个 sql server 2008 R2 express edition 。我写了一个批处理文件，它备份了我所有的快递版数据库。通过手动执行它可以正常工作。我已将此批处理文件安排在任务计划程序中的任务中，但问题是它无法从任务计划程序中正常工作。只有较少的数据库正在备份，或者有时没有。我在脚本或任务调度程序中找不到任何错误。

请让我知道如何解决此问题。

谢谢，

尼特什·库马尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:03:30.027

[您可以使用我们的SQLBackupAndFTP](http://sqlbackupandftp.com/)工具为指定用户安排数据库备份。可以为 Windows 调度程序创建备份作业或使用其自己的调度程序服务（完整、差异和事务日志备份）。

# iphone - 在所有视图控制器中使用 AudioUnit 初始化

> ID：14601146
> 
> 赞同：2
> 
> 时间：2013-01-30T09:59:59.723
> 
> 标签：iphone, ios, objective-c

我正在开发应用程序，我在其中引用来自苹果的 aurioTouch 应用程序来显示波形。我必须在每个视图控制器的顶部显示波形。所以，我在 firstViewController 的 viewDidLoad 方法中设置了 AudioUnit。

```
 XThrowIfError(AudioSessionInitialize(NULL, NULL, rioInterruptionListener, self), "couldn't initialize audio session");

    UInt32 audioCategory = kAudioSessionCategory_PlayAndRecord;
    XThrowIfError(AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(audioCategory), &audioCategory), "couldn't set audio category");
    XThrowIfError(AudioSessionAddPropertyListener(kAudioSessionProperty_AudioRouteChange, propListener, self), "couldn't set property listener");

    Float32 preferredBufferSize = .005;
    XThrowIfError(AudioSessionSetProperty(kAudioSessionProperty_PreferredHardwareIOBufferDuration, sizeof(preferredBufferSize), &preferredBufferSize), "couldn't set i/o buffer duration");

    UInt32 size = sizeof(hwSampleRate);
    XThrowIfError(AudioSessionGetProperty(kAudioSessionProperty_CurrentHardwareSampleRate, &size, &hwSampleRate), "couldn't get hw sample rate");

    XThrowIfError(AudioSessionSetActive(true), "couldn't set audio session active\n");

    XThrowIfError(SetupRemoteIO(rioUnit, inputProc, thruFormat), "couldn't setup remote i/o unit"); 
```

在这里我可以显示输入声音的波形，现在**当我点击 secondTab 时，在 FirstviewController 的 viewWillDisappear 方法中我正在停止 AudioUnit。**

```
-(void)viewWillDisappear:(BOOL)animated
{
[super viewWillDisappear:YES];
AudioOutputUnitStop(rioUnit);
AudioUnitUninitialize(rioUnit);
AudioSessionSetActive(false);
  //[self performSelectorOnMainThread:@selector(disposeCoreAudio) withObject:nil waitUntilDone:NO];
//[eaglView stopAnimation];
} 
```

在 secondViewController 我再次尝试初始化 AudioUnit

```
XThrowIfError(AudioSessionInitialize(NULL, NULL, rioInterruptionListener, self), "couldn't initialize audio session"); 
```

但它显示异常： **即将抛出'init'：无法初始化音频会话错误：无法初始化音频会话（'init'）**

在第一个 viewController 中，我能够停止 AudioUnit 的实例，但无法在 secondViewController 中再次对其进行初始化。谁能帮我摆脱这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:42:25.263

不要让您的音频单元受视图控制器的控制，制作一个仅处理它的单例控制器。然后，您可以从任何音频单元获取该控制器的共享实例。

顺便说一句，我强烈建议在该控制器中使用[Novacaine](https://github.com/alexbw/novocaine)，它使音频单元的使用更加有趣：更少的 C++，更多的 ObjC。:-)

# iphone - 如何激活 CCMenuItem 并通过一次触摸移动 CCSprite

> ID：14601150
> 
> 赞同：3
> 
> 时间：2013-01-30T10:00:04.787
> 
> 标签：iphone, cocoa-touch, cocos2d-iphone, ccmenuitem

块引用

我有一个`CCMenuItem`我希望能够按下的按钮，然后在仍然按下的同时，将创建一个新的按钮，`CCSprite`可以在仍然使用相同的按下时将其拖走。基本上你按下按钮并拖出一个可以在屏幕上移动的新精灵。

我已经进行了子类`CCMenuItemImage`化以在按下时创建新的精灵，但是如果不抬起并开始新的触摸，新的精灵不会检测到任何触摸。我可以让这个精灵看到或使用我现有的触摸按钮来让我在不抬起手指的情况下将它拖走吗？

任何想法将不胜感激。

我的子类`CCMenuItemImage`可以正常参考是：

```
@interface CCMenuItemImageAdvanced : CCMenuItemImage {    
}

-(void) selected;
-(void) unselected;

@end

@implementation CCMenuItemImageAdvanced

-(void) selected {
[super selected];

// Method that creates the ccsprite
[_sharedGameHud createSprite:self];
}

-(void) unselected {
[super unselected];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:44:11.800

调查

```
[CCMenu ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event] 
```

你可以继承 CCMenu 而不是调用

```
[selectedItem_ selected]; 
```

在上述方法中，您可以在 CCMenuItemImageAdvanced 中创建一个新方法

```
- (void)selectedWithTouch:(UITouch*)touch; 
```

然后使用该触摸移动精灵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:54:20.500

也许您可以在加载时创建隐藏的 CCSprite，并在触摸移动时检查 CCSprite 是否可见以及是否使其跟随手指。CCButton 只需取消隐藏 CCSprite，使其可用于移动。

# php - 在三元简写中使用 php 标头重定向？

> ID：14601151
> 
> 赞同：1
> 
> 时间：2013-01-30T10:00:08.683
> 
> 标签：php, header, shorthand

我想知道是否可以复制：

```
if ($a = 1) {
    header('Location: http://google.com');
    exit;
} else {
    header('Location http://yahoo.com');
    exit;
} 
```

使用短手？也许...

```
$a = 1 ? header('Location: http://google.com') : header('Location http://yahoo.com');
exit; 
```

这似乎不起作用，这意味着我总是被重定向到谷歌。=(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:01:13.380

```
if ($a = 1) { 
```

它应该是

```
if ($a == 1) { 
```

和

```
$a = 1 ? 
```

应该

```
$a == 1 ? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:03:18.667

我会保持原样。

在这里使用三元组对于可读性来说是很糟糕的——对于继承你的代码的新程序员来说，哪个代码块会更容易和更快地理解？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:01:51.010

尝试这个：

```
header ( 'Location: ' . ( $a == 1 ? 'http://google.com' : 'http://yahoo.com' ) ); 
```

请注意，这`$a = 1`是一个分配，并且总是评估为`true`。你需要`==`实现比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T10:01:59.320

```
$location= $a == 1 ? "http://google.com" : "http://yahoo.com";
header("Location: $location"); 
```

赋值`=`运算符也不是比较运算符。那应该是`==`或`===`

# javascript - 使用jQuery将事件绑定到特定ID内的类

> ID：14601160
> 
> 赞同：0
> 
> 时间：2013-01-30T10:00:39.850
> 
> 标签：javascript, css, events, jquery

我有 3 个结构相同的元素

```
<div id="Chatbox1">
    <div class="chatboxhead">            
        <div class="chatboxoptions">
            <a href="javascript:void(0)" class="ToggleChatBoxGrowth" title="Minimize chat box">-</a>
        </div>
    </div>                
</div> 
```

唯一的区别是他们每个人都有不同的ID（Chatbox1，Chatbox2，Chatbox3）。

我试图将“点击”事件绑定到`.ToggleChatBoxGrowth`每个类：

```
$('#chatbox_' + id + ' > .chatboxhead > .chatboxoptions > .ToggleChatBoxGrowth').click(function ()
    {
        ChatBox.ToggleChatBoxGrowth(id);
    }); 
```

但问题是它们都受同一个点击事件的约束。
所以当我点击`ChatBox1`一个时，我会得到点击事件`id = ChatBox3`

你能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T10:04:52.850

我什至会将点击绑定到`ToggleChatBoxGrowth`使用类选择器，然后遍历 DOM 以接收父母 ID。

```
$(".ToggleChatBoxGrowth").click(function(){
   var parentId = $(this).parents(".chatboxhead").parent().attr("id");
   ChatBox.ToggleChatBoxGrowth(parentId);
}); 
```

示例：http: [//jsfiddle.net/6C2aQ/](http://jsfiddle.net/6C2aQ/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T10:08:46.813

```
$('.ToggleChatBoxGrowth', '[id^="chatbox_"]').on('click', function() {
  ChatBox.ToggleChatBoxGrowth( $(this).closest('[id^="chatbox_"]').attr('id') );
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T10:04:40.147

试试这个：http: [//jsfiddle.net/MSxhy/](http://jsfiddle.net/MSxhy/)

```
ChatBox.ToggleChatBoxGrowth($(this).parents('[id="Chatbox'+id+'"]').attr('id')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T10:05:32.513

根据您的描述，您似乎正在使用循环来绑定事件。这是正确的吗？如果是这样，“id”将具有循环最后一次迭代的值。如果你想保留它，你可以通过闭包来做到这一点

```
while(id<3){
  (function(){
      var localId = id;
      $('#chatbox_' + id+ ' > .chatboxhead > .chatboxoptions > .ToggleChatBoxGrowth').click(function ()
       {
          ChatBox.ToggleChatBoxGrowth(localId);
       });
   })();
   id++;
} 
```

# magento - Magento：getVisibleStatusHistory() 输出未正确排序

> ID：14601161
> 
> 赞同：1
> 
> 时间：2013-01-30T10:00:41.280
> 
> 标签：magento, sorting, comments

我在下面有一个代码（简化），可以在客户帐户 -> 订单 -> 视图（订单详细信息）中为当前订单添加评论。

代码工作正常。唯一的问题是，在处理表单和调用发送的评论后`getVisibleStatusHistory()`，所有评论都按日期/时间（降序）正确排序，除了客户最近添加的评论。该注释被添加为结果中的最后一条 - 这与结果的降序排序不对应`getVisibleStatusHistory()`。重新加载页面后，它已正确排序。

所有代码都在自定义 view.phtml 中

我有一个发送评论的表格：

```
<form action="" method="post">
  <textarea name="ordercomment" maxlength="1000"></textarea>
  <input type="submit" value="Send" />
</form> 
```

它也由 view.phtml 处理：

```
$ordcomment = $_POST['ordercomment'];
$_order->addStatusHistoryComment($ordcomment)->setIsVisibleOnFront(1);
$_order->save(); 
```

并在该脚本之后打印所有可见的评论：

```
<?php $_history = $this->getOrder()->getVisibleStatusHistory() ?>
<?php if (count($_history)): ?>
<div class="order-additional order-comments">
    <h2 class="sub-title"><?php echo $this->__('About Your Order') ?></h2>
    <dl class="order-about">        
        <?php foreach ($_history as $_historyItem): ?>
            <dt><?php echo $this->formatDate($_historyItem->getCreatedAtStoreDate(), 'medium', true) ?></dt>
           <dd><?php echo $this->escapeHtml($_historyItem->getComment()) ?></dd>
        <?php endforeach; ?>
    </dl>
</div>
<?php endif; ?> 
```

有谁知道是什么原因，为什么最后添加的评论没有在其他评论中正确排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:29:57.817

这种奇怪排序的原因是，当您向订单的状态历史集合添加新的历史项目时，订单会加载现有集合（已排序）并将新项目添加到其末尾。

要正确输出集合，您可以重新加载 order 对象，这样历史集合将以正确的顺序获取：

```
<?php 
$orderNew = Mage::getModel('sales/order')->load($this->getOrder()->getId());
$_history = $orderNew->getVisibleStatusHistory() ?> 
```

# ios - 推送通知被发送到不同的应用程序

> ID：14601167
> 
> 赞同：2
> 
> 时间：2013-01-30T10:00:54.887
> 
> 标签：ios, push-notification, apple-push-notifications

我正在为 iTunes 中的两个应用程序实现推送通知。我已经在我的 iPhone 中安装了这两个应用程序。当他们注册到我的提供商（服务器）时，我可以看到两个应用程序的设备 ID 和设备令牌是相同的。

我从提供商向应用程序 A 发送了一个推送通知，但它在我的 iPhone 上传递给了应用程序 B。这显然是因为两个应用程序都注册了相同的设备令牌。

APNS 不应该提供唯一的设备令牌吗？我可以向 APNS 发送任何其他参数来区分应用程序吗？我为这两个应用程序生成了不同的证书，并且我正在使用相应的证书来推送通知。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T11:02:55.490

设备令牌对于在同一设备上运行的所有应用程序都是相同的。您可以通过为不同的应用程序使用不同的证书来区分应用程序。该证书让 APN 服务器知道应该将消息传递给哪个 App。

# php - 在 PHP 中包装 Jquery

> ID：14601168
> 
> 赞同：-4
> 
> 时间：2013-01-30T10:01:03.490
> 
> 标签：php, javascript, jquery

出于安全原因，我想将我的 Jquery/javascript 包装在 PHP 中，我认为 PHP 比客户端脚本更难访问。我用谷歌搜索了这个主题，但信息真的不多，一些例子并没有具体说明，仅此而已。为了处理我的实际脚本，我真的只需要一个开始的想法。例如，假设我有这个：

```
<script>
    $("p").click(function () {
      $(this).slideUp();
    });
</script> 
```

像这样就够了吗：

```
<?php

<script>
    function click{
            $("p").click(function () {
              $(this).slideUp();
            }); 
    }
        </script> 
?>

    echo click() 
```

我要求对此有一个基本的了解，因为我从谷歌中一无所获。关于我的代码的 anwser 将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T10:03:30.130

您不能对用户隐藏 jQuery 代码。它始终是发送到用户浏览器的 HTML 页面的一部分，用户可以随时打开源代码视图并查看它。必须这样，因为 jQuery 是 JavaScript，它是由浏览器执行的，而不是服务器。如果你不告诉浏览器该做什么，它就做不到。就那么简单。

显然你可以使用 PHP 生成 jQuery 代码，但最终它还是会传输到用户的浏览器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T10:04:01.330

你试图做的事情是没有意义的。最终，您的 jquery 代码将位于客户端。你不能隐藏它。PHP 无法为 JS 添加安全性，因为 JS 在客户端运行，而 PHP 在服务器端运行。

> 客户端编程包括任何编码或计算或效果或动画或您的网站通过浏览器与用户执行的任何类型的交互。但是服务器端编程仅在服务器中执行所有任务。所以用户没有意识到这一点。
> 
> 例如，PHP 用于服务器端编程。您使用 HTML 设计一个网站并在其中使用 JavaScript 从用户那里获取一些输入并以任何方式对其进行修改。更具体地说，如果您创建了一个博客网站，并且希望指定用户最多可以发布 5000 个字符。然后你用 JavaScript 做一些客户端编程来计算字符数和任何过滤或任何东西。但是您需要将这些帖子发送到服务器。然后服务器执行一些服务器端任务，可能使用 PHP，以清理 SQL 注入的输入并将其保存到数据库中。
> 
> 用户只会知道在浏览器中发生了什么，而不是在服务器中发生了什么。这些是后台任务。

[阅读更多](https://stackoverflow.com/questions/7407374/client-side-vs-server-side-basics)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T10:03:23.633

PHP 对增加 javascript 的安全性没有任何帮助。javascript在客户端运行。你不能做任何事情让它在服务器端运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T10:04:21.027

无论如何，您的 JS 必须到达浏览器才能执行。没有办法解决这个问题。

您拥有的最佳选择可能是混淆它。JS 没有漏洞是无法保护的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-30T10:06:09.343

不，脚本仍会显示。如果您想在 PHP 文件中编写 Javascript，则需要回显脚本的每一行：

```
<?php
    echo '<script>';
    echo 'function click({'; 
```

等等。

但是，这仍然会在页面上显示 Javascript 而不会隐藏任何内容 - 您无法在您的网站上隐藏 Javascript，因为它需要下载到客户端的浏览器才能运行（出于同样的原因，您无法隐藏任何页面上的 HTML）。

如果你真的想让人们难以理解你的 Javascript 代码，你可以尝试缩小或混淆它，但这仍然不会停止复制和粘贴。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-30T10:09:50.180

你可以：

*   掩盖
*   缩小
*   [base64 用 php 编码](http://php.net/manual/en/function.base64-encode.php)，[base64 用 javascript 解码](http://phpjs.org/functions/base64_decode/)然后运行`eval()`

[这个编译器](http://closure-compiler.appspot.com/home)允许你模糊和缩小你的代码，让你很难阅读你在做什么。Base64 编码使它更难一些。

虽然，它使您的代码**难以**阅读，**但您无法完全隐藏 javascript**。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-11T16:42:25.247

这就是你要找的：

```
<?php
echo "<script>";
echo "$(\"p\").click(function () {";
echo "$(this).slideUp();";
echo "});";
echo "</script>";
?> 
```

您想使用 PHP “echo” 语句来传递您的 JavaScript。确保在 JavaScript 中使用斜杠“转义”任何引号，否则 PHP 处理器会将引号解释为 PHP“echo”语句的一部分。

您可能希望使用 PHP 来交付 JavaScript 的原因是您可以在 PHP 中处理安全性。这样，如果用户没有得到正确的身份验证，PHP 脚本将根本不提供任何内容。这是一个例子：

```
<?php
if ( $_COOKIE['password'] > '') {
    echo "<script>";
    echo "$(\"p\").click(function () {";
    echo "$(this).slideUp();";
    echo "});";
    echo "</script>";
}
else {
    echo "Password not set";
}
?> 
```

# rest - Spring RESTful Web 服务未映射的 URI 异常处理

> ID：14601169
> 
> 赞同：2
> 
> 时间：2013-01-30T10:01:03.473
> 
> 标签：rest, spring-mvc, exception-handling

我正在开发一个简单的 Spring REST Web 服务。根据我所做的研究，可能有两种类型的 404 异常。例如，

```
@Controller
@RequestMapping("/person")
@Transactional(readOnly=true)
public class PersonController {     
    @RequestMapping(value="/data", method={RequestMethod.GET,RequestMethod.POST})
    @ResponseStatus(value=HttpStatus.OK)
    public Person getPerson() {
        return service.getPerson();
    }
} 
```

类型 1：`http://localhost/myws/person/get`将从 Web 服务中抛出 404。
类型 2：`http://localhost/myws/idontexist`将从 Web 服务器容器中抛出 404。就我而言，它是tomcat。

为了处理类型 1，我尝试扩展`DefaultHandlerExceptionResolver`和覆盖`handleNoSuchRequestHandlingMethod`
为了处理类型 2，我在我的`web.xml`

```
<错误页面>
        <错误代码>404</错误代码>
        <location>/WEB-INF/pages/notfound.jsp</location>
    </错误页面>
    <错误页面>
        <exception-type>java.lang.Throwable</exception-type>
        <location>/WEB-INF/pages/notfound.jsp</location>
    </错误页面>
```

我的 servlet xml 看起来像，

```
    <context:component-scan base-package="com" />
    <bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
        <property name="ignoreAcceptHeader" value="true" />
        <property name="order" value="1" />
        <property name="contentNegotiationManager">
            <bean class="org.springframework.web.accept.ContentNegotiationManager">
                <构造函数参数>         
                    <bean class="org.springframework.web.accept.ParameterContentNegotiationStrategy">
                        <构造函数参数>
                            <地图>
                                <entry key="json" value="application/json"/>
                                <entry key="xml" value="application/xml"/>
                            </地图>
                        </constructor-arg>
                    </豆>
                </constructor-arg>
            </豆>
        </属性>
        <property name="defaultViews">
            <列表>

                <bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />
                <bean class="org.springframework.web.servlet.view.xml.MarshallingView">
                    <构造函数参数>
                        <bean class="org.springframework.oxm.xstream.XStreamMarshaller">
                            <property name="autodetectAnnotations" value="true"/>
                        </豆>
                    </constructor-arg>
                </豆>
            </列表>
        </属性>
    </豆>

    <bean id="viewResolver"
              class="org.springframework.web.servlet.view.InternalResourceViewResolver" >
              <property name="order" value="2" />
              <属性名称="前缀">
                  <value>/WEB-INF/pages/</value>
               </属性>
              <属性名称="后缀">
                 <value>.jsp</value>
              </属性>
        </豆>
    <!--处理内部服务器错误-->
    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerExceptionResolver">
        <property name="order" value="1"/>
    </豆>
    <bean class="org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver" >
        <property name="order" value="2"/>
    </豆>
    <!--RestExceptionHandler 扩展 DefaultHandlerExceptionResolver -->
    <bean class="com.rest.exception.RestExceptionHandler">
        <property name="order" value="3"/>
    </豆>   
    <!-- 数据源和 Daos...-->

```

当我点击 Type 2 URL 时，我得到以下异常。 `WARN org.springframework.web.servlet.PageNotFound - No mapping found for HTTP request with URI [/myws/WEB-INF/pages/notfound.jsp] in DispatcherServlet with name 'restservlet'`

但我的 JSP 存在于上述位置。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:26:36.527

这就是我所做的。我创建了一个`controller`来处理 404，而不是`JSP`因为我无法解决 JSP 的问题。它按预期工作。

# visual-studio-2010 - SSRS 报告项目模板在 Visual Studio 2010 中不可用

> ID：14601170
> 
> 赞同：0
> 
> 时间：2013-01-30T10:01:03.593
> 
> 标签：visual-studio-2010, sql-server-2008, sharepoint-2010, reporting-services

我正在使用 Visual Studio 2010 构建 SharePoint 2010 应用程序，数据库是 SQL Server 2008 R2，企业版。现在我需要在我们的应用程序中创建 SSRS 报告。我需要为报告创建一个单独的项目，但可以找到报告项目模板，甚至找不到商业智能部分。有人可以指导我在指定环境中创建 SSRS 报告并连接到 SharePoint 2010。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:12:54.177

要创建 SSRS 2008 和 SSRS 2008R2 项目，您将使用在 Visual Studio 2008 中运行的 BIDS（商业智能开发人员工作室）。如果您安装 SQL 2012 开发人员工具，它将与 Visual Studio 2010 集成，您可以针对 SSRS 2008R2 . 如果您无法访问 2012，那么您将被 VS2008 困住。

# android - 在 Android 中创建自定义 ROM

> ID：14601176
> 
> 赞同：17
> 
> 时间：2013-01-30T10:01:27.703
> 
> 标签：android

我是初学者级别的 Android 开发人员，我想通过编码而不是手动将库存 ROM 制作为自定义 ROM。有没有可能做到这一点。有人请指导我正确的路径。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-30T10:15:52.470

> 我想通过编码而不是手动将库存 ROM 制作为自定义 ROM。有没有可能做到这一点。

通过以下链接，它将为如何设置自定义 ROM 提供很好的演示，

[为 Android 创建您自己的自定义 ROM](http://theunlockr.com/2010/03/26/how-to-create-your-own-custom-rom-for-android-part-1-setting-up-the-kitchen/)

还可以看看[Getting started with create custom ROMs](https://stackoverflow.com/q/6232620/1626878)，它包含一些有用的链接来说明如何做到这一点。

# ember.js - ember.js 中的路由器或状态管理器或两者

> ID：14601178
> 
> 赞同：1
> 
> 时间：2013-01-30T10:01:34.897
> 
> 标签：ember.js

当前的 ember 文档几乎没有提及状态。这是否意味着现在不应该使用它，而应该只使用构建在顶部的路由器？

我有点不清楚应用程序状态将如何进行。我正在考虑的问题的一个示例是从登录屏幕转到取决于登录成功的两个或三个位置之一，然后登录用户的管理员权限

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:00:41.027

谢天谢地，没有`StateManager`更多了，相反，我们只是使用路由器来做所有事情。例如，您可以从任何控制器更改为您选择的路线，方法是：

```
this.transitionTo('login.invalid'); 
```

这将带你进入`LoginInvalidRoute`,`LoginInvalidController`和`LoginInvalidView`。因此，如果用户输入了不正确的凭据，您可以将它们转发到该路由。

但是，如果用户成功登录，那么您可以将他们带到他们的帐户页面：

```
this.transitionTo('account.default'); 
```

如果他们是管理员，请到管理员仪表板：

```
this.transitionTo('account.administrator'); 
```

如果您的路由器配置如下：

```
App.Router.map(function() {
    this.resource('login', function() {
        this.route('index');
        this.route('invalid');
    });
    this.resource('account', function() {
        this.route('default');
        this.route('administrator');
    })
}); 
```

# java - Primefaces 处理程序到倒数标签

> ID：14601179
> 
> 赞同：1
> 
> 时间：2013-01-30T10:01:37.230
> 
> 标签：java, javascript, jsf, jsf-2, primefaces

我决定使用向导组件。[此组件上的链接](http://www.primefaces.org/showcase/ui/wizard.jsf)

我有条件，而不是复选框“跳到最后”，我应该使用按钮。如果我按下这个按钮就可以了，但是当我转到倒数选项卡时，我想生成确认选项卡的内容，

```
public void generatePreview() {

        for (CompetitionTypeBean competitionType : competitionTypeList) {
            if (competitionType.getId().equals(competitionTypeId)) {
                tournamentBean.setCompetitionTypeBean(competitionType);
            }
        }
 if (teamList != null && !teamList.isEmpty()) {
            List<TeamBean> teams = new ArrayList<TeamBean>();
            for (TeamBean team : teamList) {
                for (Long teamId : teamListSelected)
                    if (team.getId().equals(teamId)) {
                        teams.add(team);
                        break;
                    }
            }
            tournamentBean.setTeams(teams);
        }
    } 
```

这意味着我应该`skip in true`为此设置我决定编写js函数`will work on onnext event of wizard`

```
<script type="text/javascript">
        function setHiddenValue(formId, componentId, new_value) {

            var tabId = 'competitionId';
            if (tabId != 'predLast') {
                document.getElementsByName('wiz').next();
            } else {
                var fullComponentId = formId + ":" + componentId;
                document.getElementById(fullComponentId).value = new_value;
            }
        }
    </script> 
```

在那里我发现了新问题

首先我不知道，因为我可以获得当前的 Tab Id。其次，我不知道如何借助帮助 js 为 Wizard 制作下一个事件`document.getElementsByName('wiz').next();`。我尝试查看生成的 html 代码。每个选项卡都是`<li>`，当以 css 样式选择此选项卡时，我会添加“ui-state-hightlight”

也许我尝试开发循环。但我找不到其他解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:22:39.643

1.  要在 javascript 中获取当前步骤的索引，请使用该`getStepIndex()`函数。要获取支持 bean 中当前步骤的**名称**，您需要在视图中获取对向导的引用，然后调用`getStep()`（返回`id`下一个选项卡的属性）或`getStepToProcess()`（返回实际的下一个`Tab`对象，您可以从中获取当前选项卡的名称）。

2.  `<p:wizard/>`具有`onnext`和`onback`事件回调，您可以使用它们来处理 javascript（或支持 bean 代码`<p:remoteCommand/>`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:35:55.410

我只是在处理程序中添加下一行

```
public String onFlowProcess(FlowEvent event) throws Exception {
        if ((skip == true)) {
            skip = false;   //reset in case user goes back
            generatePreview();
            return CONFIRM_TAB_ID;
        } else {
            String newTab = event.getNewStep();
            if (CONFIRM_TAB_ID.equals(newTab)) {
                generatePreview();
            }

            return newTab;
        }
    } 
```

我认为使用常量 CONFIRM_TAB_ID 很正常，因为我从未决定更改此 tabId。

# python - Python Popen 读取实时输出（Linux）

> ID：14601183
> 
> 赞同：0
> 
> 时间：2013-01-30T10:01:53.663
> 
> 标签：python, parsing, popen

> **可能重复：**
> [逐行读取子进程标准输出](https://stackoverflow.com/questions/2804543/read-subprocess-stdout-line-by-line)

我编写了一个 C++ 程序，可以在 Linux 控制台中生成所有文本。

我正在使用 python 脚本来解析这个 C++ 的输出。我这样做是这样的：

```
cmd = ["./starter"] 

p = subprocess.Popen(cmd, 
    stdout=subprocess.PIPE)

for line in p.stdout:

    strLine = str(line).rstrip()
    print(">>> " + strLine ) 
```

这是有效的。但是我有一个主要问题，输出不是实时的。我的意思是，在启动脚本后什么都没有打印出来，但只有在几秒钟之后才会出现..这几乎就像 python 正在等待最大字符数然后一次打印它们......

有没有办法告诉 python 在 C++ 程序打印后尽快打印一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:03:15.273

您将`stdout`文件用作迭代器，并且使用较大的缓冲区，从而延迟打印。改为使用`.readline()`；您仍然可以使用`iter()`哨兵将其变为循环：

```
for line in iter(p.stdout.readline, ''):
    strLine = str(line).rstrip()
    print(">>> " + strLine ) 
```

您还可以添加`flush=True`到您的打印功能调用：

```
print(">>> " + strLine, flush=True) 
```

或者，如果您使用的是 Python 2 而不是 Python 3（其中`print`是语句，而不是函数），则可以直接刷新`stdout`缓冲区：

```
import sys

sys.stdout.flush() 
```

默认情况下，`stdout`是行缓冲的，因此 python 通常应该在打印换行符时刷新缓冲区。

# ruby-on-rails - 是否存在用于显示存储在实例变量中的 haml 的等价物

> ID：14601187
> 
> 赞同：0
> 
> 时间：2013-01-30T10:02:00.497
> 
> 标签：ruby-on-rails, haml

在`/views/documents/show.html.haml`中，我有：

```
= raw @document.content 
```

如果@document.content 存储HTML，例如`<p>foo</p>`，我看到“foo”被格式化为一个段落。

但是如果`@document.content`存储 HAML，例如`%p foo`，我会看到输入的代码，而不是格式化为段落的“foo”。

如果我使用...也会发生同样的情况

```
 = @document.content 
```

...没有`raw`.

有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:32:07.163

答案是：

```
- engine = Haml::Engine.new(@document.content)
= engine.render 
```

# c#-4.0 - 如何将已移除的实体回滚到之前的状态？

> ID：14601192
> 
> 赞同：1
> 
> 时间：2013-01-30T10:02:12.137
> 
> 标签：c#-4.0, entity-framework-4.1

考虑以下情况：

```
public class EntityA
{
    public int Id { get; set; }
}

public class EntityB
{
    public int Id { get; set; }

    public virtual EntityA EntityA { get; set; }
}

public class Context : DbContext
{
    public Context()
        : base("EF_SPIKE")
    {
    }

    public IDbSet<EntityA> EntityAs { get; set; }

    public IDbSet<EntityB> EntityBs { get; set; } 
}

static void Main(string[] args)
{
    using (var context = new Context())
    {
        var a = context.EntityAs.Create();
        context.EntityAs.Add(a);

        var b = context.EntityBs.Create();
        b.EntityA = a;
        context.EntityBs.Add(b);

        context.SaveChanges();

        using (var transaction = new TransactionScope())
        {
            context.EntityBs.Remove(b);
            context.SaveChanges();
        }

        Trace.Assert(b.EntityA == null);
        Trace.Assert(context.EntityBs.Local.All(x => x.Id != b.Id));
        Trace.Assert(context.EntityBs.Any(x => x.Id == b.Id));
    }
} 
```

因此，尽管事务回滚并且实体仍然存在于数据库中，但实体框架实体`b`不再存在于本地缓存中，丢失了其所有外键引用并且`b`无法再使用。

这种行为对我来说似乎很奇怪，因为虽然我已经回滚，但我的实体仍然死了。

是否有任何标准的解决方法，以便：

```
Trace.Assert(context.EntityBs.Local.Any(x => x.Id == b.Id)); 
```

通过？

# android - 像 WhatsApp 一样发送图片

> ID：14601198
> 
> 赞同：5
> 
> 时间：2013-01-30T10:02:25.580
> 
> 标签：android, chat, image-uploading, file-transfer

我做了一个聊天应用程序。我想在我的应用程序中添加**照片/文件共享**概念，与 WhatsApp 相同。我已经使用当前应用程序制作了应用程序`Xmpp/Openfire`，现在我正在使用此功能进行照片共享，但这并不完全可靠：

```
public void sendFile(final String path, final String receiver) {

        Thread thread = new Thread() {

            public void run() {

                ServiceDiscoveryManager sdm = ServiceDiscoveryManager
                .getInstanceFor(connection);

                if (sdm == null)
                    sdm = new ServiceDiscoveryManager(connection);

                sdm.addFeature("http://jabber.org/protocol/disco#info");
                sdm.addFeature("jabber:iq:privacy");

                // Create the file transfer manager
                FileTransferManager manager = new FileTransferManager(
                        connection);
                FileTransferNegotiator.setServiceEnabled(connection, true);

                // Create the outgoing file transfer
                OutgoingFileTransfer transfer = manager
                .createOutgoingFileTransfer(receiver + "/Smack");

                System.out.println("Receiver of the file is "+receiver+"/smack");

                Log.i("transfere file", "outgoingfiletransfer is created");

                try {

                    OutgoingFileTransfer.setResponseTimeout(30000);
                    transfer.sendFile(new File(path), "Description");
                    Log.i("transfere file", "sending file");
                    while (!transfer.isDone()) {
                        try {
                            Thread.sleep(1000);
                            Log.i("transfere file", "sending file status "
                                    + transfer.getStatus() + "progress: "
                                    + transfer.getProgress());
                            if (transfer.getStatus() == Status.error) {
                                Log.i("transfere file", "Errorrr isss: "
                                        + transfer.getError());
                                transfer.cancel();
                                break;
                            }
                        } catch (InterruptedException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }

                } catch (XMPPException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                Log.i("transfere file", "sending file done");
            }
        };
        thread.start();

    } 
```

我想像 WhatsApp 或任何其他好方法一样做。请提出一个好的解决方案

谢谢

# python - 为什么从 Python 内部调用某些 Unix 命令时不起作用？（找不到相关命令）

> ID：14601203
> 
> 赞同：3
> 
> 时间：2013-01-30T10:02:48.380
> 
> 标签：python, shell, unix, command

我经常希望从 Python 内部执行 Unix 命令，但我最近发现有些命令找不到。一个例子是“限制”命令：

```
$ echo $SHELL
/bin/tcsh
$ limit vmemoryuse 1000m
$ python
Python 2.7.3 (default, Aug  3 2012, 20:09:51) 
[GCC 4.1.2 20080704 (Red Hat 4.1.2-50)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import os
>>> os.system("echo $SHELL")
/bin/tcsh
0
>>> os.system("limit vmemoryuse 1000m")
sh: limit: command not found
32512
>>> 
```

另一个例子是“setenv”命令。为什么这些命令在 Python 中不起作用？我曾尝试同时使用“os”和“subprocess”模块，但均未成功。有人知道另一个模块或方法可以让我从 Python 内部成功调用这些命令吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T10:21:51.337

那是因为有些 shell 命令并不是真正的程序，而是内部 shell 命令。

经典的例子是`cd`：如果它是一个外部程序，它会改变新进程的当前目录，而不是 shell 的目录，所以它不能是一个外部程序。

粗略地说，有两种类型的内部 shell 命令：

1.  为了效率而由 shell 实现的命令，但它仍然作为独立程序存在：`true`, `false`, `test`, `sleep`...
2.  改变 shell 环境的命令，因此不能从子进程中完成：`cd`, `umask`, `setenv`, `ulimit`...

第一类中的命令是特定于 shell 的。第二类的命令，不多。

有关详细信息，请参阅相关 shell 的手册页（`man bash`例如）。

如果您想了解特定命令运行：

```
$ type -a <command> 
```

类型是*bashism*，我不知道 tcsh 中的等价物，但`which`它是一个外部程序，所以这个：

```
$ which -a <command> 
```

将显示您的命令是否作为外部程序存在，但它对 shell 内部结构一无所知。

如果您需要 Python 程序中的内部命令（上述类型 2）的功能，则需要使用相关的系统调用。希望它已经在某些模块中可用。如果没有，您将需要用 C 编写自己的包装器。

关于您的特定命令：

*   环境 ( `setenv`and `getenv`) 可以使用`os.environ`or `os.getenv`,`os.putenv`等来操作。
*   对于进程限制 ( `limit`)，请查看[资源](http://docs.python.org/3.3/library/resource.html)模块。

# android - 更新 android 联系人提供程序中的联系人图片

> ID：14601209
> 
> 赞同：4
> 
> 时间：2013-01-30T10:03:06.343
> 
> 标签：android, android-contentprovider, android-contacts

我创建了一个应用程序来读取、更新、删除联系人详细信息。这是更新 Contact_Image 的问题。

当没有图像的应用程序外部的设备添加了新联系人时。那么我们无法更新联系人图片。我的更新代码是。

```
 ops.add(ContentProviderOperation.newUpdate(Data.CONTENT_URI)
                .withSelection(Data.CONTACT_ID+"= ? AND "+ContactsContract.Data.MIMETYPE+"=?",new String[]{id,ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE})
                .withValue(ContactsContract.CommonDataKinds.Photo.PHOTO, imageInByte)
                .build()); 
```

请为此提供解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T20:42:25.940

您将有不同的代码来更新照片，然后将照片添加到没有照片的联系人。根据您上面的描述，我相信您正在尝试插入图像而不是更新图像，但这是两者的代码：

```
 if(hasPhoto(resolver, id) == true)
        {
            int photoRow = -1;
            String where = ContactsContract.Data.RAW_CONTACT_ID + " = " + id + " AND " + ContactsContract.Data.MIMETYPE + " =='" + ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE + "'"; 
            Cursor cursor = resolver.query(ContactsContract.Data.CONTENT_URI, null, where, null, null);
            int idIdx = cursor.getColumnIndexOrThrow(ContactsContract.Data._ID);
            if (cursor.moveToFirst()) {
                photoRow = cursor.getInt(idIdx);
            }
            cursor.close();

            // Update current photo
            ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
            ops.add(ContentProviderOperation.newUpdate(ContactsContract.Data.CONTENT_URI)
                    .withSelection(ContactsContract.Data._ID + " = ?", new String[] {Integer.toString(photoRow)})
                    .withValue(ContactsContract.Data.RAW_CONTACT_ID, id)
                    .withValue(ContactsContract.Data.IS_SUPER_PRIMARY, 1)
                    .withValue(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE)
                    .withValue(ContactsContract.Data.DATA15, photoBytes)
                    .build());

            try {
                resolver.applyBatch(ContactsContract.AUTHORITY, ops);
            } catch (RemoteException e) {

            } catch (OperationApplicationException e) {
            // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        else
        {
            // Create new photo entry
            int rawContactId = -1;
            Cursor cursor = resolver.query(ContactsContract.RawContacts.CONTENT_URI, null, ContactsContract.RawContacts.CONTACT_ID + "=?", new String[] {id}, null);

            if(cursor.moveToFirst())
            {
                rawContactId = cursor.getInt(cursor.getColumnIndex(ContactsContract.RawContacts._ID));

                if(rawContactId > -1)
                {
                    ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
                    ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                            .withValue(ContactsContract.Data.RAW_CONTACT_ID, rawContactId)
                            .withValue(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE)
                            .withValue(ContactsContract.CommonDataKinds.Photo.PHOTO, photoBytes)
                            .build());

                    try 
                    {
                        resolver.applyBatch(ContactsContract.AUTHORITY, ops);
                    } catch (RemoteException e) {

                    } catch (OperationApplicationException e) {
                    // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
            }
        } 
```

不同之处在于，如果您要更新现有照片，则使用 newUpdate 功能，但如果要将照片插入从未有过的联系人，则使用 newInsert

# ios - 为我们的客户创建定制的 iOS 应用程序

> ID：14601210
> 
> 赞同：-3
> 
> 时间：2013-01-30T10:03:06.603
> 
> 标签：ios, app-store

> **可能重复：**
> [没有 AppStore 的 iPhone 应用](http://facebook.stackoverflow.com/questions/982476/iphone-app-without-appstore)

我在一家为客户创建定制应用程序的软件公司工作——目前只是 ASP.NET 内部应用程序。由于移动设备的发展，我们一直在考虑为客户创建移动应用程序。这些应用程序将非常特定于客户，因此我们不希望这些应用程序出现在任何应用程序商店中。

虽然使用 Android 这显然相对简单，但鉴于 iOS 应用程序的分发仅限于 App Store（据我所知！），我们将无法创建 iOS 应用程序。我是否遗漏了任何东西 - 即有没有办法在不使用 App Store 的情况下分发应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:59:30.540

考虑构建一个 HTML5 应用程序。通过这种方式，您可以自己分发它（用户可以轻松地将其作为链接添加到他们的设备中（看起来像一个应用程序图标）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:19:52.603

针对这种情况设计了两种方案。

首先，有[Enterprise](https://developer.apple.com/support/ios/enterprise.html)。这（有点）类似于交付*临时*构建。有限制，但它不会通过 App Store 或审核流程。

最近，还有一个特殊的[B2B 渠道](https://developer.apple.com/programs/volume/b2b/)。您的客户从 App Store 下载，但该应用程序不公开。除了必须经过审查之外，另一个缺点是该计划并非在所有国家/地区都可用。当然，这对您来说可能不是问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:34:07.417

我为之工作的许多客户都希望在应用商店中获得“宣传”，但不希望每个人都可以访问。解决此问题的方法是创建一个需要登录的应用程序，并使用您控制服务器端的凭据。

# html - 使用 html5 进行垃圾收集

> ID：14601214
> 
> 赞同：2
> 
> 时间：2013-01-30T10:03:08.977
> 
> 标签：html, garbage-collection, local-storage

我知道 html5 添加了一个字符，我们有至少 5MB 的本地存储空间可供使用；但我找不到如何为本地存储进行垃圾收集？浏览器会为客户端做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:06:42.327

来自： [网络存储编辑草稿](http://dev.w3.org/html5/webstorage/#disk-space)

当达到配额时，用户代理可能会提示用户，允许用户授予站点更多空间。例如，这使站点能够在用户的计算机上存储许多用户创建的文档。

测试是否超出限制：

```
function test(value, name) {
  try {
    localStorage.name = value;
    return true;
  } catch (e) {
    return false;
  }
} 
```

清除本地存储：

```
localStorage.clear(); 
```

看起来没有任何垃圾收集：

[本地存储配额测试](http://arty.name/localstorage.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:07:10.110

是的浏览器本身会这样做（垃圾收集），如果您打开浏览器的调试器窗口（按 f12 ）并启动时间线，您可以看到 gc 事件自动触发，

# three.js - threejs 等角下半球投影

> ID：14601215
> 
> 赞同：0
> 
> 时间：2013-01-30T10:03:14.570
> 
> 标签：three.js, render, projection

我正在尝试用threejs做一个平面/线/圆的立体投影项目。
非常类似于这个网站：[http ://app.visiblegeology.com/stereonetApp.html](http://app.visiblegeology.com/stereonetApp.html)

尽管作者使用了three.js，但他们不遗余力地混淆了javascript，使得无法看到投影是如何制作的。

关于如何使用 three.js 渲染它的任何建议？我会渲染到纹理然后包裹到球体的底部吗？我应该尝试与渲染引擎交互并在某处实际转换 3d 点吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:38:29.783

我用来将 3D 向量投影到 2D 平面的函数如下：假设向量在单位球面上。

```
function project(vector){
    vector = vector.clone();
    if(vector.z>0){vector.negate();}
    if(this.netType === 0){//Wulff Net
        vector.set(vector.x/(1-vector.z), vector.y/(1-vector.z), 0);
    }else if(this.netType  === 1){//Equal Area Net
        vector.set(vector.x*Math.sqrt(1/(1-vector.z)), vector.y*Math.sqrt(1/(1-vector.z)), 0);
    }
    return vector;
} 
```

至于渲染，这取决于您是否想在 3D 中看到立体网络。如果您只对 2D 视图感兴趣，我不建议使用 Three.js，而是可能渲染到画布或 SVG/VML。

（Visible Geology 是用 GWT 编写的，所以是 Java，因此是精简的代码和疯狂的东西。不过，我主要用 JavaScript 重写了 Stereonet）

# servlets - javax.servlet.ServletException: SRVE0207E

> ID：14601217
> 
> 赞同：2
> 
> 时间：2013-01-30T10:03:15.813
> 
> 标签：servlets

在 WAS7.0 服务器上发布 EAR 文件时，我遇到了异常。

我已将所有必需的 jars 放在 WEB-INF/lib 中，多次重建应用程序但无法解决它...

```
com.ibm.wsspi.webcontainer.extension.WebExtensionProcessor createServletWrapper 
Servlet action is currently unavailable: SRVE0203E: Servlet [action]: Action Servlet 
was found, but is missing another required class.
SRVE0206E: This error typically implies that the servlet was originally compiled 
with classes which cannot be located by the server.

SRVE0187E: Check your class path to ensure that all classes required by the servlet 
are present.SRVE0210I: This problem can be debugged by recompiling the servlet using 
only the classes in the application's runtime class path

com.ibm.wsspi.webcontainer.extension.WebExtensionProcessor createServletWrapper Error 
occured while preparing the servlet for initialization. 
javax.servlet.ServletException: SRVE0207E: Uncaught initialization exception created 
by servlet 
```

我应该怎么做才能解决这个问题？当我在服务器上点击应用程序时得到 404。我的 web.xml 文件已经过验证并且没有错误。

请告诉我解决此异常的可能解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-10T23:40:21.863

这是因为兼容性问题。

当我包含球衣罐时，我收到了这个错误。一些罐子需要最低 jdk 1.7

我在 pom.xml 中减少了我的 jar 版本。

它对我来说很好。

# java - 如何从 Java 中的 InputStream 构造 TTransport 对象

> ID：14601220
> 
> 赞同：0
> 
> 时间：2013-01-30T10:03:18.777
> 
> 标签：java, python, inputstream, thrift

我想将一段python代码重写为java。Python代码如下：

```
transport = StringIO(thrifts_data)        
transport.seek(0)
transport = TTransport.TBufferedTransport(transport)
protocol = TBinaryProtocol.TBinaryProtocol(transport)
....
doc = StreamItem()
doc.read(protocol) 
```

在上面的代码中，thrifts_data 是从文件中读取的二进制流。现在我需要用java重写，我在网上搜索过，但没有找到任何有用的东西。在 java 中，TTransport 是一个抽象类，它有一些子类，但我不确定我应该选择哪个，因为它们中没有一个包含采用 inputstream 参数的构造方法。谁能帮我？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:55:43.960

`TIOStreamTransport`有一个带`InputStream`参数的构造函数。

您可能还对`TMemoryInputTransport`和感兴趣`TFileTransport`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T06:21:47.270

对于有人可能会担心，我在java中解决了如下问题：

```
TTransport transport;
transport = new TMemoryInputTransport(byte_data);
TBinaryProtocol tbp = new TBinaryProtocol(transport);
StreamItem si = new StreamItem();
si.read(tbp); 
```

# ios - 使用 Cocoapods 的 Kiwi 测试目标

> ID：14601228
> 
> 赞同：1
> 
> 时间：2013-01-30T10:03:30.417
> 
> 标签：ios, unit-testing, cocoapods, kiwi

我通过 Cocoapods 添加了 Kiwi。这是 podfile 的内容

```
platform :ios, '5.0'

pod 'BlocksKit'
pod 'ViewUtils'
pod 'AwesomeMenu'

target :KiwiUnitTest, :exclusive => true do
      pod 'Kiwi'
end 
```

我可以毫无问题地运行该应用程序。但是如果我点击 cmd+u 来运行测试目标（KiwiUnitTest）我会得到一些错误。应该测试的类（ParticleView）使用 BlocksKit（通过 Cocoapods 包含）。所以我将 ParticleView 添加到测试目标（KiwiUnitTest）并且错误说“没有可见的界面......声明选择器......似乎测试目标对Cocoapods一无所知。

我已经添加`$(inherited)`到`FRAMEWORK_SEARCH_PATHS`并添加`$(BUNDLE_LOADER)`到了测试主机。从 podfile 中删除`:exclusive =>`true 没有帮助

我删除了所有内容并从头开始设置整个 cocoapod 和测试目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T16:58:58.057

`:exclusive`从主目标文件中删除并添加相同的导入`.pch`到猕猴桃单元测试`.pch`文件解决了这个问题

```
platform :ios, '5.0'

pod 'BlocksKit'
pod 'ViewUtils'
pod 'AwesomeMenu'

target :KiwiUnitTest do
      pod 'Kiwi'
end 
```

# iphone - JSON 数组和排序

> ID：14601229
> 
> 赞同：2
> 
> 时间：2013-01-30T10:03:32.270
> 
> 标签：iphone, ios, xcode, json, uipickerview

我有这个我在下面概述的 json 数组。我想知道如何仅获取“名称”键下的所有字符串并将其放置在某个数组中，按名称按字母顺序排序，然后根据名称中的第一个字母拆分为更多数组。任何执行此操作的指南将不胜感激，谢谢。我正在通过 github 和 NSJSONserialization 使用 json 工具包。

```
 {
   "proj_name": "Ant",
   "id": 
      [
          {
             "name": "David"
          },
          {
             "name": "Aaron"
          }
      ]
 },
 {
    "proj_name": "Dax",
    "id": 
         [
           {
             "name": "Adrian"
           },
           {
             "name": "Dan"
           }
         ]
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:20:22.433

转到[http://json.bloople.net/](http://json.bloople.net/)在此链接中，您可以看到 JSON 响应的结构。

从上面的回复中，我可以看到回复如下：

项目名称：达克斯

id : 0 名称 : 阿德里安

```
 1  name : Dan 
```

因此，您可以使用`NSjsonserialization`Apple 的课程。无需使用 JSON 套件。

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"Your URL"]]];
  NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

    NSLog(@"url=%@",request);

id jsonObject = [NSJSONSerialization JSONObjectWithData:response options:NSJSONReadingAllowFragments error:nil];

if ([jsonObject respondsToSelector:@selector(objectForKey:)])

    {
    Nsstring *projectname=[jsonObject objectForKey:@"proj_name"];
    NSArray *name_array=[jsonObject objectForKey:@"id"];

     NSLog(@"projectname=%@",projectname);
     NSLog(@"name_array=%@",name_array);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T10:31:01.137

这是仅选择名称并按字母顺序排序的示例。将 responseData 替换为您的数据对象。

```
NSMutableArray *names = [[NSMutableArray alloc] init];

NSError* error;
NSArray* json = [NSJSONSerialization 
    JSONObjectWithData:responseData
    options:kNilOptions 
    error:&error];

for (NSDictionary *proj in json) {
    NSArray *ids = [proj objectForKey: @"id"];

    for (NSDictionary *name in ids)
    {
        [names addObject: [name objectForKey: @"name"];
    }
}

NSArray *sortedNames = [names sortedArrayUsingSelector: @selector(localizedCaseInsensitiveCompare:)]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:36:55.473

假设您已经成功地将 JSON 解析为 NSArray，您可以大大简化事情：

```
NSArray *names = [parsedArray valueForKeyPath:@"@distinctUnionOfArrays.id.name"]; 
```

names 数组现在应该包含所有扁平化为单个数组的名称。要对它们进行排序，您可以执行以下操作：

```
NSArray *sortedNames = [names sortedArrayUsingDescriptors:@[[NSSortDescriptor 
                                      sortDescriptorWithKey:@"description" ascending:YES]]]; 
```

或一次全部：

```
 NSArray *sortedNames = [[parsedArray valueForKeyPath:@"@distinctUnionOfArrays.id.name"]
                          sortedArrayUsingDescriptors:@[[NSSortDescriptor 
                                                 sortDescriptorWithKey:@"description"
                                                             ascending:YES]]]; 
```

sortedNames 数组现在将包含：

```
<__NSArrayI 0x713ac20>(
Aaron,
Adrian,
Dan,
David
) 
```

# sql - SQL LEFT JOIN、Average 和 WHERE

> ID：14601232
> 
> 赞同：3
> 
> 时间：2013-01-30T10:03:41.050
> 
> 标签：sql, sql-server-ce, left-join, average

所以我已经尝试了一个多星期，我把它搁置了，因为我无法让它工作，但这就是我想要做的；

从数据库中选择一个产品 > 使用 LEFT OUTER JOIN 加载其评级并对其进行平均 > 使用 INNER JOINs 获取不同的信息（不是很重要，但我还是会说）。

这是我的查询的简化（但准确）副本 - 原件很长并且其中包含不同的语言单词，因此可能会有点混乱；

```
SELECT 
PRODUCT.name AS Name,
PRODUCT.price AS Price,
BRAND.name AS Brand,
AVG(RATING.rating) AS Rating
FROM PRODUCT
LEFT OUTER JOIN RATING ON RATING.product_id = PRODUCT.product_id
INNER JOIN BRAND ON BRAND.brand_id = PRODUCT.brand_id
GROUP BY PRODUCT.name, PRODUCT.price, BRAND.name 
```

上述工作，但它错过了评级的“过滤”。我希望添加`WHERE AVG(RATING.rating) > 3`会起作用，但遗憾的是它没有。这有可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:04:58.683

尝试`HAVING AVG(RATING.rating) > 3`你的`GROUP BY`.

有关详细信息，请参阅[MSDN 上的 HAVING 。](http://msdn.microsoft.com/en-us/library/ms180199.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:05:42.057

您应该使用该**[`HAVING`子句](http://msdn.microsoft.com/en-us/library/ms173260.aspx)**。该**[`WHERE`子句](http://technet.microsoft.com/en-us/library/ms173294%28v=sql.90%29.aspx)***在分组之前*过滤结果集，而 HAVING 子句在分组和聚合*之后过滤最终结果集。*所以 in`WHERE`子句你不能使用聚合（`AVG(RATING.rating)`在这种情况下），而在`HAVING`，你可以这样做。

```
SELECT 
PRODUCT.name AS Name,
PRODUCT.price AS Price,
BRAND.name AS Brand,
AVG(RATING.rating) AS Rating
FROM PRODUCT
LEFT OUTER JOIN RATING ON RATING.product_id = PRODUCT.product_id
INNER JOIN BRAND ON BRAND.brand_id = PRODUCT.brand_id
GROUP BY PRODUCT.name, PRODUCT.price, BRAND.name
HAVING AVG(RATING.rating) > 3 
```

# gcc - 告诉 ld 在编译期间在哪里寻找依赖的共享库

> ID：14601233
> 
> 赞同：3
> 
> 时间：2013-01-30T10:03:43.057
> 
> 标签：gcc, arm, shared-libraries, cross-compiling, ld

我正在尝试为 ARM 处理器交叉编译一些库，特别是：

DirectFB，它依赖于libpng，它依赖于zlib。

libpng 与 zlib 链接，但由于构建系统上的路径与目标系统上的路径不匹配，ld 在 DirectFB 的编译过程中找不到 libpng 链接的 zlib。

我已将问题简化为以下示例：testb 依赖于 libb，后者依赖于 liba。

构建 liba：

```
gcc -Wall -fPIC -c a.c
gcc -shared -Wl,-soname,liba.so.1 -o liba.so.1.0 a.o

ln -fs liba.so.1.0 liba.so.1
ln -fs liba.so.1 liba.so 
```

内置测试：

```
gcc -Wall -I. -L. testa.c -la -o testa
LD_LIBRARY_PATH=. ./testa
a: 0 
```

构建库：

```
gcc -Wall -fPIC -I. -L. -c b.c -la
gcc -shared -Wl,-soname,libb.so.1 -o libb.so.1.0 b.o

ln -fs libb.so.1.0 libb.so.1
ln -fs libb.so.1 libb.so 
```

到目前为止，一切都很好。但是，构建 testb 失败：

```
gcc -Wall -I. -L. testb.c -lb -o testb 
```

结果是：

```
./libb.so: undefined reference to `a'
collect2: ld returned 1 exit status
make: *** [testb] Error 1 
```

所以 ld 无法在 liba 中找到 a 的定义，即使 libb 与 liba 链接，并且两者都在当前目录中，当前目录是用“-L”传递的。

使用 -v 运行 gcc 会导致：

```
gcc -v -Wall -I. -L. testb.c -lb -o testb
Using built-in specs.
Target: i486-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu 4.4.3-4ubuntu5.1' --with-bugurl=file:///usr/share/doc/gcc-4.4/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --enable-shared --enable-multiarch --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.4 --program-suffix=-4.4 --enable-nls --enable-clocale=gnu --enable-libstdcxx-debug --enable-plugin --enable-objc-gc --enable-targets=all --disable-werror --with-arch-32=i486 --with-tune=generic --enable-checking=release --build=i486-linux-gnu --host=i486-linux-gnu --target=i486-linux-gnu
Thread model: posix
gcc version 4.4.3 (Ubuntu 4.4.3-4ubuntu5.1) 
COLLECT_GCC_OPTIONS='-v' '-Wall' '-I.' '-L.' '-o' 'testb' '-mtune=generic' '-march=i486'
 /usr/lib/gcc/i486-linux-gnu/4.4.3/cc1 -quiet -v -I. testb.c -D_FORTIFY_SOURCE=2 -quiet -dumpbase testb.c -mtune=generic -march=i486 -auxbase testb -Wall -version -fstack-protector -o /tmp/ccqAkMFb.s
GNU C (Ubuntu 4.4.3-4ubuntu5.1) version 4.4.3 (i486-linux-gnu)
    compiled by GNU C version 4.4.3, GMP version 4.3.2, MPFR version 2.4.2-p1.
GGC heuristics: --param ggc-min-expand=98 --param ggc-min-heapsize=128244
ignoring nonexistent directory "/usr/local/include/i486-linux-gnu"
ignoring nonexistent directory "/usr/lib/gcc/i486-linux-gnu/4.4.3/../../../../i486-linux-gnu/include"
ignoring nonexistent directory "/usr/include/i486-linux-gnu"
#include "..." search starts here:
#include <...> search starts here:
 .
 /usr/local/include
 /usr/lib/gcc/i486-linux-gnu/4.4.3/include
 /usr/lib/gcc/i486-linux-gnu/4.4.3/include-fixed
 /usr/include
End of search list.
GNU C (Ubuntu 4.4.3-4ubuntu5.1) version 4.4.3 (i486-linux-gnu)
    compiled by GNU C version 4.4.3, GMP version 4.3.2, MPFR version 2.4.2-p1.
GGC heuristics: --param ggc-min-expand=98 --param ggc-min-heapsize=128244
Compiler executable checksum: 2349e080d2b2f3f970047e63bbe98cb2
COLLECT_GCC_OPTIONS='-v' '-Wall' '-I.' '-L.' '-o' 'testb' '-mtune=generic' '-march=i486'
 as -V -Qy -o /tmp/ccc6ux7S.o /tmp/ccqAkMFb.s
GNU assembler version 2.20.1 (i486-linux-gnu) using BFD version (GNU Binutils for Ubuntu) 2.20.1-system.20100303
COMPILER_PATH=/usr/lib/gcc/i486-linux-gnu/4.4.3/:/usr/lib/gcc/i486-linux-gnu/4.4.3/:/usr/lib/gcc/i486-linux-gnu/:/usr/lib/gcc/i486-linux-gnu/4.4.3/:/usr/lib/gcc/i486-linux-gnu/:/usr/lib/gcc/i486-linux-gnu/4.4.3/:/usr/lib/gcc/i486-linux-gnu/
LIBRARY_PATH=/usr/lib/gcc/i486-linux-gnu/4.4.3/:/usr/lib/gcc/i486-linux-gnu/4.4.3/:/usr/lib/gcc/i486-linux-gnu/4.4.3/../../../../lib/:/lib/../lib/:/usr/lib/../lib/:/usr/lib/gcc/i486-linux-gnu/4.4.3/../../../:/lib/:/usr/lib/:/usr/lib/i486-linux-gnu/
COLLECT_GCC_OPTIONS='-v' '-Wall' '-I.' '-L.' '-o' 'testb' '-mtune=generic' '-march=i486'
 /usr/lib/gcc/i486-linux-gnu/4.4.3/collect2 --build-id --eh-frame-hdr -m elf_i386 --hash-style=both -dynamic-linker /lib/ld-linux.so.2 -o testb -z relro /usr/lib/gcc/i486-linux-gnu/4.4.3/../../../../lib/crt1.o /usr/lib/gcc/i486-linux-gnu/4.4.3/../../../../lib/crti.o /usr/lib/gcc/i486-linux-gnu/4.4.3/crtbegin.o -L. -L/usr/lib/gcc/i486-linux-gnu/4.4.3 -L/usr/lib/gcc/i486-linux-gnu/4.4.3 -L/usr/lib/gcc/i486-linux-gnu/4.4.3/../../../../lib -L/lib/../lib -L/usr/lib/../lib -L/usr/lib/gcc/i486-linux-gnu/4.4.3/../../.. -L/usr/lib/i486-linux-gnu /tmp/ccc6ux7S.o -lb -lgcc --as-needed -lgcc_s --no-as-needed -lc -lgcc --as-needed -lgcc_s --no-as-needed /usr/lib/gcc/i486-linux-gnu/4.4.3/crtend.o /usr/lib/gcc/i486-linux-gnu/4.4.3/../../../../lib/crtn.o
./libb.so: undefined reference to `a'
collect2: ld returned 1 exit status
make: *** [testb] Error 1 
```

将 LD_LIBRARY_PATH 和/或 LIBRARY_PATH 设置为当前目录并不能解决问题。

使用 -la 编译可以，但不是必须的，因为 libb 与 liba 相关联。例如，在本机构建环境中链接 libpng 时（正确的路径，ld.so.conf 中的库路径）不需要 -lz。

此外，设置额外的库来链接是一件痛苦的事，因为我必须为每个依赖于另一个库的库的编译修补 Makefile。

总而言之，我如何告诉 ld 在编译期间在哪里寻找依赖的共享库？

我的问题与这两个类似： [ARM/QNX 的交叉链接因间接/传递依赖而失败](https://stackoverflow.com/questions/9621179/cross-linking-for-arm-qnx-fails-with-indirect-transitive-dependencies) [如何在编译期间解决共享库链接（GCC）？](https://stackoverflow.com/questions/1926716/how-to-resolve-shared-library-linking-during-compilation-gcc)

两者都没有建议不需要添加 -la 的解决方案，在我看来这不是必需的。

* * *

**使用的文件：**

交流：

```
int a() {
    return 0;
} 
```

liba.h：

```
#ifndef LIBA_H
#define LIBA_H

    int a();

#endif 
```

testa.c:

```
#include <stdio.h>
#include <liba.h>

int main() {
    printf("a: %d\r\n", a());
    return 0;
} 
```

公元前：

```
#include <liba.h>

int b() {
    return a();
} 
```

libb.h：

```
#ifndef LIBB_H
#define LIBB_H

    int b();

#endif 
```

测试b.c：

```
#include <stdio.h>
#include <libb.h>

int main() {
    printf("b: %d\r\n", b());
    return 0;
} 
```

生成文件：

```
# Makefile for shared library test

all:

liba:
    gcc -Wall -fPIC -c a.c
    gcc -shared -Wl,-soname,liba.so.1 -o liba.so.1.0 a.o

    ln -fs liba.so.1.0 liba.so.1
    ln -fs liba.so.1 liba.so

testa: liba
    gcc -Wall -I. -L. testa.c -la -o testa

runtesta: testa
    LD_LIBRARY_PATH=. ./testa

libb: liba
    gcc -Wall -fPIC -I. -L. -c b.c -la
    gcc -shared -Wl,-soname,libb.so.1 -o libb.so.1.0 b.o

    ln -fs libb.so.1.0 libb.so.1
    ln -fs libb.so.1 libb.so

testb: libb
    gcc -v -Wall -I. -L. testb.c -lb -o testb

runtestb: testb
    LD_LIBRARY_PATH=. ./testb

clean:
    # clean up
    rm -rf *.o
    rm -rf liba.s*
    rm -rf libb.s*
    rm -rf testa testb 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:43:21.370

您必须将 -la 添加到 lb 的链接阶段（下面的第二行是必不可少的）：

```
$ gcc -Wall -fPIC -I. -L. -c b.c -la
$ gcc -L. -shared -o libb.so b.o -la
$ LD_LIBRARY_PATH=. gcc -Wall -I. -L. testb.c -lb -o testb
$ LD_LIBRARY_PATH=. ./testb
b: 0 
```

此外 -la on 编译并不是真正需要的，我留下它只是因为它在您的原始示例中。而是第一行

```
$ gcc -Wall -fPIC -I. -L. -c b.c 
```

就足够了。

通用规则是——链接器是人，需要库，而不是编译器。

# ios - 如何在 iOS 中播放 HTML5 视频？

> ID：14601235
> 
> 赞同：1
> 
> 时间：2013-01-30T10:03:47.113
> 
> 标签：ios, objective-c, uiwebview

[我想通过以编程方式压缩和解压缩此链接http://enhancelearning.co.in/downloads/HTML5.zip](http://enhancelearning.co.in/downloads/HTML5.zip)的文件来播放 html 5 文件中的视频 此文件包含 4 个 html 文件 zip 和解压缩成功创建但视频未在网络中播放查看这里是我的代码

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docspath = [paths objectAtIndex:0];
    paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    // NSString *cachePath = [paths objectAtIndex:0];

    NSString *zipFile = [docspath stringByAppendingPathComponent:@"001.html"];

    NSURL *url = [NSURL fileURLWithPath:zipFile];
    [webVew loadRequest:[NSURLRequest requestWithURL:url]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:35:50.540

首先尝试将此 html 文件放在网络中的某个位置，看看当您从 safari 转到此页面时是否播放视频。
这可能是 HTML-Safari-ios 的问题，这样更容易调试。

# facebook - 如何从我拥有的 apikey 中获取 Facebook 密钥？

> ID：14601237
> 
> 赞同：-1
> 
> 时间：2013-01-30T10:03:49.547
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-fql

我有应用程序的 api 密钥，而不是密钥。有没有办法使用 restapi/fql 或其他方式来动态获取它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:28:07.550

不，你不能。

是公开的`API Key`，所以假设如果这是可能的，那么任何用户都可以拥有`APP secret`任何应用程序。

# android - 使用图像和文本项对自定义 ListView 进行排序

> ID：14601243
> 
> 赞同：0
> 
> 时间：2013-01-30T10:04:07.117
> 
> 标签：android, android-listview

我`ListView`在我的 android 应用程序中有自定义。它由图像和标题以及字幕和价格等内容组成。在这里，我想对我`ListView`的价格基础进行排序。任何人都可以帮助我吗？如何排序`ListView`。例如，如果可能的话，请参考以下链接以程度为基础对列表进行排序......

[http://www.codeproject.com/Articles/507651/Customized-Android-ListView-with-Image-and-Text](http://www.codeproject.com/Articles/507651/Customized-Android-ListView-with-Image-and-Text)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:28:37.000

首先像这样对您的数据进行排序

```
Collections.sort(myList, new Comparator<WeatherData>() {

        @Override
        public int compare(WeatherData lhs, WeatherData rhs) {

            return lhs.degree.compareTo(rhs.degree);
        }
    }); 
```

然后将其应用于您的适配器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:12:12.970

在列表视图中设置之前，您需要对数据结构进行排序。这只是我认为的可能方式

# android - Android-在相对布局中动态添加按钮时的类转换异常

> ID：14601247
> 
> 赞同：0
> 
> 时间：2013-01-30T10:04:15.517
> 
> 标签：android, android-layout, android-relativelayout

我想动态创建按钮并将它们放在布局上，但这给了我一些错误。我是第一次这样做，所以对这些事情的了解很少。

**我的 XML 文件**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    android:orientation="vertical"
    android:id="@+id/parentRelativeLayout"

            <LinearLayout
                    xmlns:android="http://schemas.android.com/apk/res/android"
                    android:layout_height="fill_parent"
                    android:layout_width="fill_parent"
                    android:orientation="vertical"
                    android:id="@+id/deptKeyslayout">
     <com.hellovx100.in.HorizontalPager
        android:id="@+id/horizontal_pager"
        android:layout_width="fill_parent"
        android:layout_height="0px"
        android:layout_marginTop="5dp"
        android:layout_marginLeft="310dp"
        android:layout_weight="1">
        <ScrollView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">
            <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:id="@+id/keyslayout1">
            </RelativeLayout>

        </ScrollView>
        <ScrollView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">
            <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:id="@+id/keyslayout2">
            </RelativeLayout>

        </ScrollView>
        <ScrollView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">
            <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:id="@+id/keyslayout3">
            </RelativeLayout>

        </ScrollView>
        <ScrollView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">
            <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:id="@+id/keyslayout4">
            </RelativeLayout>

        </ScrollView>
    </com.hellovx100.in.HorizontalPager>
        </LinearLayout>

   <!--  <include layout="@layout/keys_layout"
                 android:layout_toRightOf="@+id/subtotalbox"/> -->

</RelativeLayout> 
```

**下面是我从数据库中获取记录列表并将这些按钮放在布局上的类。我的 MainClass.java**

```
package com.hellovx100.in;

import java.util.List;
import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.view.ViewPager.LayoutParams;
import android.util.Log;
import android.widget.AbsoluteLayout;
import android.widget.Button;
import android.widget.DigitalClock;
import android.widget.RadioGroup;
import android.widget.RelativeLayout;

public class MainSaleScreen extends Activity{
    private HorizontalPager mPager;
    private RadioGroup mRadioGroup;
    Cursor mCursor;
    DatabaseHandler db;
    RelativeLayout parentLayout;
    RelativeLayout keysLayout1;
    RelativeLayout keysLayout2;
    RelativeLayout keysLayout3;
    RelativeLayout keysLayout4;
    com.hellovx100.in.HorizontalPager horizontalPager;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_sale_screen);
        parentLayout=(RelativeLayout)findViewById(R.id.parentRelativeLayout);
        keysLayout1=(RelativeLayout)findViewById(R.id.keyslayout1);
        keysLayout2=(RelativeLayout)findViewById(R.id.keyslayout2);
        keysLayout3=(RelativeLayout)findViewById(R.id.keyslayout3);
        keysLayout4=(RelativeLayout)findViewById(R.id.keyslayout4);
        DigitalClock dc = (DigitalClock) findViewById(R.id.digitalClock1);
         mPager = (HorizontalPager) findViewById(R.id.horizontal_pager);
         mPager.setOnScreenSwitchListener(onScreenSwitchListener);
         db=new DatabaseHandler(this);
         try{
             // Reading all contacts
            Log.d("Reading: ", "Reading all contacts..");
            List<Contact> contacts = db.getAllContacts();  
          final Button dept[]=new Button[100];
         RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.FILL_PARENT);
            for (Contact cn : contacts) {
                int id=cn.getID();
                String deptName=cn.getName();
                if(id==1){
                    dept[id]=new Button(this);
                    dept[id].setText(deptName);
                    dept[id].setId(id);
                    keysLayout1.setLayoutParams(params);
                      keysLayout1.addView(dept[id]);
                                        }
                else if(id>=2 && id<=7 ){
                    dept[id]=new Button(this);
                    dept[id].setText(deptName);
                    dept[id].setId(id);
                    params.addRule(RelativeLayout.RIGHT_OF,dept[id].getId()-1);
                    keysLayout1.setLayoutParams(params);
                    keysLayout1.addView(dept[id]);
        }
                else if(id==8){
                    dept[id]=new Button(this);
                    dept[id].setText(deptName);
                    dept[id].setId(id);
                    keysLayout2.addView(dept[id]);
        }
                else if(id>=9 && id<=14){
                    dept[id]=new Button(this);
                    dept[id].setText(deptName);
                    dept[id].setId(id);
                    params.addRule(RelativeLayout.RIGHT_OF,dept[id].getId()-1);
                    keysLayout2.setLayoutParams(params);
                    keysLayout2.addView(dept[id]);
        }
                else if(id==15){
                    dept[id]=new Button(this);
                    dept[id].setText(deptName);
                    dept[id].setId(id);
                    keysLayout3.addView(dept[id]);
                    Log.d("I am in 5th if", ""+deptName);
                }
                else if(id>=16 && id<=21){
                    dept[id]=new Button(this);
                    dept[id].setText(deptName);
                    dept[id].setId(id);
                    keysLayout3.setLayoutParams(params);
                    params.addRule(RelativeLayout.RIGHT_OF,dept[id].getId()-1);
                    keysLayout3.addView(dept[id]);
                    Log.d("I am in 6th if", ""+deptName);
                }
                else{
                    Log.d("I am in else", ""+id);
                    String log = "Id: "+cn.getID()+" ,Name: " + cn.getName() + " ,Phone: " + cn.getPhoneNumber();
                    // Writing Contacts to log
                    Log.d("Name: ", log);
                }

            }

         }
         catch(Exception e){
            e.printStackTrace();
         }

     }
     private final HorizontalPager.OnScreenSwitchListener onScreenSwitchListener =
         new HorizontalPager.OnScreenSwitchListener() {
             @Override
             public void onScreenSwitched(final int screen) {
                 // Check the appropriate button when the user swipes screens.
                 switch (screen) {
                     case 0:
                        mPager.setCurrentScreen(0, true);
                         break;
                     case 1:
                        mPager.setCurrentScreen(1, true);
                       break;
                     case 2:
                        mPager.setCurrentScreen(2, true);
                        break;
                     default:
                         break;
                 }
             }
         };

     } 
```

**现在Logcat在下面**

```
01-30 15:08:51.970: E/AndroidRuntime(274): FATAL EXCEPTION: main
01-30 15:08:51.970: E/AndroidRuntime(274): java.lang.ClassCastException: android.widget.RelativeLayout$LayoutParams
01-30 15:08:51.970: E/AndroidRuntime(274):  at android.widget.FrameLayout.onLayout(FrameLayout.java:288)
01-30 15:08:51.970: E/AndroidRuntime(274):  at android.widget.ScrollView.onLayout(ScrollView.java:1205)
01-30 15:08:51.970: E/AndroidRuntime(274):  at android.view.View.layout(View.java:7035)
01-30 15:08:51.970: E/AndroidRuntime(274):  at com.hellovx100.in.HorizontalPager.onLayout(HorizontalPager.java:198)
01-30 15:08:51.970: E/AndroidRuntime(274):  at android.view.View.layout(View.java:7035)
01-30 15:08:51.970: E/AndroidRuntime(274):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1249)
01-30 15:08:51.970: E/AndroidRuntime(274):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1125)
01-30 15:08:51.970: E/AndroidRuntime(274):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1042)
01-30 15:08:51.970: E/AndroidRuntime(274):  at android.view.View.layout(View.java:7035)
01-30 15:08:51.970: E/AndroidRuntime(274):  at android.widget.RelativeLayout.onLayout(RelativeLayout.java:909)
01-30 15:08:51.970: E/AndroidRuntime(274):  at android.view.View.layout(View.java:7035)
01-30 15:08:51.970: E/AndroidRuntime(274):  at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
01-30 15:08:51.970: E/AndroidRuntime(274):  at android.view.View.layout(View.java:7035)
01-30 15:08:51.970: E/AndroidRuntime(274):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1249)
01-30 15:08:51.970: E/AndroidRuntime(274):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1125)
01-30 15:08:51.970: E/AndroidRuntime(274):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1042)
01-30 15:08:51.970: E/AndroidRuntime(274):  at android.view.View.layout(View.java:7035)
01-30 15:08:51.970: E/AndroidRuntime(274):  at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
01-30 15:08:51.970: E/AndroidRuntime(274):  at android.view.View.layout(View.java:7035)
01-30 15:08:51.970: E/AndroidRuntime(274):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1045)
01-30 15:08:51.970: E/AndroidRuntime(274):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
01-30 15:08:51.970: E/AndroidRuntime(274):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-30 15:08:51.970: E/AndroidRuntime(274):  at android.os.Looper.loop(Looper.java:123)
01-30 15:08:51.970: E/AndroidRuntime(274):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-30 15:08:51.970: E/AndroidRuntime(274):  at java.lang.reflect.Method.invokeNative(Native Method)
01-30 15:08:51.970: E/AndroidRuntime(274):  at java.lang.reflect.Method.invoke(Method.java:521)
01-30 15:08:51.970: E/AndroidRuntime(274):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-30 15:08:51.970: E/AndroidRuntime(274):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-30 15:08:51.970: E/AndroidRuntime(274):  at dalvik.system.NativeStart.main(Native Method) 
```

指导我在哪里做错了。我从数据库中获取了正确的数据，并且工作正常。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:09:08.060

如果您将按钮添加到一个地方的相对布局，所有按钮都将创建。我的意思是第二个按钮将在第一个按钮上创建。采用 LinearLayout 而不是 relativelayout。然后它将一个一个地创建..或..并排。根据你的方向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T10:40:32.087

在为 View 设置 LayoutParams 时，需要为其父视图定义 LayoutParams 对象。在这种情况下，您正在为父级为 ScrollView 的 keyslayout1 设置 LayoutParams。因此，您应该使用 ViewGroup.LayoutParams（或适用于 ScrollView 的 LayoutParams 对象，以正确者为准）而不是 RelativeLayout.LayoutParams。

# php - 以编程方式在 Magento 目录提升规则中创建嵌套条件

> ID：14601254
> 
> 赞同：1
> 
> 时间：2013-01-30T10:04:44.060
> 
> 标签：php, magento, nested, conditional-statements

希望您能帮助我，我想以编程方式将嵌套条件添加到 Magento 目录促销规则中，我有以下代码：

```
$oMainCondition = Mage::getModel('catalogrule/rule_condition_combine')
                ->setType('catalogrule/rule_condition_combine')
                ->setAggregator('all');

        $oFirstCondition = Mage::getModel('catalogrule/rule_condition_combine')
                ->setType('catalogrule/rule_condition_combine')
                ->setAggregator('any');

        $oProdCondition1 = Mage::getModel('catalogrule/rule_condition_product')
                ->setType('catalogrule/rule_condition_product')
                ->setAttribute('sku')
                ->setOperator('==')
                ->setValue("2595040015");

        $oProdCondition2 = Mage::getModel('catalogrule/rule_condition_product')
                ->setType('catalogrule/rule_condition_product')
                ->setAttribute('sku')
                ->setOperator('==')
                ->setValue("2595040019");

        $oFirstCondition->addCondition($oProdCondition1);
        $oFirstCondition->addCondition($oProdCondition2);
        $oMainCondition->addCondition($oFirstCondition);
        $oCatalogPriceRule->getConditions()->addCondition($oMainCondition); 
```

我想实现以下目标：一个主要的组合条件，条件 ALL 这个主要的组合条件将有一个孩子；结合条件与条件 ANY 这个孩子将有 2 个孩子；产品 SKU 必须为 2595040015 或产品 SKU 必须为 2595040019 的规则

（注意；我意识到在这种情况下，使它成为嵌套条件还没有意义，但我希望在使我的代码更复杂之前让它工作）

但; 使用上面的代码，仅创建以下内容：

1 个主要组合条件，条件为 ALL 1 个子组合条件，再次条件为 ALL（而不是 ANY）

关于我的产品 SKU 的 2 条规则根本不会在后端返回。

有人知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-28T11:38:05.800

我建议你看看这篇文章[http://www.demacmedia.com/magento-commerce/mini-tutorial-creating-shopping-cart-rules-programatically/](http://www.demacmedia.com/magento-commerce/mini-tutorial-creating-shopping-cart-rules-programatically/)

您需要使用此块：

```
 $item_found = Mage::getModel('salesrule/rule_condition_product_found')
  ->setType('salesrule/rule_condition_product_found')
  ->setValue(1) // 1 == FOUND
  ->setAggregator('all'); // match ALL conditions
  $rule->getConditions()->addCondition($item_found);
  $conditions = Mage::getModel('salesrule/rule_condition_product')
  ->setType('salesrule/rule_condition_product')
  ->setAttribute('sku')
  ->setOperator('==')
  ->setValue($sku);
  $item_found->addCondition($conditions); 
```

希望这可以帮助。我用同样的方法来创建这样的规则。

# java - 使用 OAuth-Signpost 和 Apache HttpComponents 签署 POST 请求的正确方法是什么？

> ID：14601256
> 
> 赞同：13
> 
> 时间：2013-01-30T10:04:51.713
> 
> 标签：java, oauth, http-post, apache-httpcomponents, signpost

我目前正在使用 OAuth-Signpost Java 库对从客户端发送到实现 OAuth 身份验证的服务器的请求进行签名。当发出 GET 请求（使用 HttpURLConnection）时，一切正常：请求被签名，参数被包含并且签名在目的地匹配。但是，它似乎不适用于 POST 请求。我知道使用 HttpURLConnection 签署 POST 时可能出现的问题，因此我将这些请求移至 Apache HttpComponents 库。我在以下示例中发送的参数是纯字符串和类似 XML 的字符串 ('rxml')。我的代码如下：

```
public Response exampleMethod(String user, String sp, String ep, String rn, String rxml){

   //All these variables are proved to be correct (they work right in GET requests)
    String uri = "...";
    String consumerKey = "...";
    String consumerSecret = "...";
    String token = "...";
    String secret = "...";

  //create the parameters list
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("user", user));
    params.add(new BasicNameValuePair("sp", sp));
    params.add(new BasicNameValuePair("ep", ep));
    params.add(new BasicNameValuePair("rn", rn));
    params.add(new BasicNameValuePair("rxml", rxml));

   // create a consumer object and configure it with the access
   // token and token secret obtained from the service provider
    OAuthConsumer consumer = new CommonsHttpOAuthConsumer(consumerKey, consumerSecret);
    consumer.setTokenWithSecret(token, secret);

   // create an HTTP request to a protected resource
    HttpPost request = new HttpPost(uri);

   // sign the request      
    consumer.sign(request);       

   // set the parameters into the request
    request.setEntity(new UrlEncodedFormEntity(params));

   // send the request
    HttpClient httpClient = new DefaultHttpClient();
    HttpResponse response = httpClient.execute(request);

   //if request was unsuccessful
    if(response.getStatusLine().getStatusCode()!=200){
        return Response.status(response.getStatusLine().getStatusCode()).build();
    }

   //if successful, return the response body
    HttpEntity resEntity = response.getEntity();
    String responseBody = "";

    if (resEntity != null) {
        responseBody = EntityUtils.toString(resEntity);
    }

    EntityUtils.consume(resEntity);

    httpClient.getConnectionManager().shutdown();

    return Response.status(200).entity(responseBody).build();

} 
```

当我向服务器发送 POST 请求时，我收到一条错误消息，指出签名（我发送的签名和服务器自行计算的签名）不匹配，所以我猜这与他们正在签名的基本字符串有关以及 POST 签名的工作方式，因为它们在双方处理相同的密钥和秘密（已检查）。

我已经读过一种解决方法是将参数设置为 URL 的一部分（如在 GET 请求中）。但它对我不起作用，因为 XML 参数可能超过 URL 长度，所以它需要作为 POST 参数发送。

我想我在签署 POST 请求或处理参数时做错了，但我不知道它是什么。拜托，你能帮帮我吗？

PS：如果我缺少有关此问题的上下文、错误跟踪或其他信息，我深表歉意，但我是这里的新手。因此，如果您需要，请随时向我询问更多信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T15:46:00.183

**一些背景故事/解释**

这两天我也遇到了类似的问题，差点放弃了。直到我听说我公司的那个正在提供我正在与之通信的服务的人已经将它们配置为从查询字符串而不是标头参数中读取 OAuth 信息。

因此，当您将其传递给请求以进行签名时，而不是从标头参数 Authorization 中读取它，例如`[Authorization: OAuth oauth_consumer_key="USER", oauth_nonce="4027096421883800497", oauth_signature="Vd%2BJEb0KnUhEv1E1g3nf4Vl3SSM%3D", oauth_signature_method="HMAC-SHA1", oauth_timestamp="1363100774", oauth_version="1.0"]`，尝试读取查询字符串的服务，例如`http://myservice.mycompany.com?oauth_consumer_key=USER&oauth_nonce=4027096421883800497&oauth_signature=Vd%2BJEb0KnUhEv1E1g3nf4Vl3SSM%3D&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1363100774&oauth_version=1.0`。

这样做的问题是，当我尝试对 url 签名然后用它构建一个 HttpPost 请求时，**url 得到一个带有前缀 GET 而不是 POST 的基字符串，它给出了另一个签名，然后是服务计算的那个**。Signpost 没有做错任何事情，它的 url 签名方法默认设置为 GET，没有其他开箱即用的可能性。之所以如此，是因为您在执行 POST 时应该读取标头参数，而不是查询字符串（去鸡蛋我的那个“同事”的房子），并且 Signpost 在签署请求时添加这些您在执行 POST 时应该执行的操作。

可以在 Signpost 中的 SigningBaseString 类方法生成中观察到signingbasestring。

**解决方案**

现在我就是这样做的，但其他方式可能是可能的，甚至更好。

1.  获取路标源代码并将其添加到您的项目中。可以在[这里获取](https://github.com/mttkay/signpost)
2.  找到`OAuthConsumer`该类并更改签名方法，以便您可以传递请求应该是 POST 的信息。就我而言，我添加了一个像这样的布尔值`public String sign(String url, boolean POST)`
3.  现在您需要更改类`sign`中的方法`AbstractOAuthConsumer`，其中`CommonsHttpOAuthConsumer`并`DefaultOAuthConsumer`扩展。在我的情况下，我将布尔变量添加到方法中，并`if(POST) request.setMethod("POST");`在方法调用之前添加以下内容`sign(request);`
4.  现在请求是一个 Signpost 特定对象 HTTPRequest，所以这将引发错误。您需要更改它并添加方法`public void setMethod(String method);`。
5.  这将导致以下`HttpURLConnectionRequestAdapter`类`HttpRequestAdapter`和`UrlStringRequestAdapter`. 您需要将方法实现添加到所有这些中，但风格不同。首先，您将添加

    ```
    public void setMethod(String method){
    try {
     this.connection.setRequestMethod(method);
     } catch (ProtocolException e) {

        e.printStackTrace();
     }
    } 
    ```

    第二个你会添加

    ```
    public void setMethod(String method){

       try {
           RequestWrapper wrapper = new RequestWrapper(this.request);
           wrapper.setMethod(method);
           request = wrapper;
       } catch (org.apache.http.ProtocolException e) {
        e.printStackTrace();
        }   
    } 
    ```

    最后你会添加

    ```
    public void setMethod(String method){
       mMethod = method;
    } 
    ```

    请注意，我只使用并尝试了第一个和最后一个。但这至少让你知道如何解决这个问题，如果你和我有同样的问题。

希望这无论如何都会有所帮助。

-德累斯顿先生

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-07T09:00:48.230

`oauth-signpost`使用and对POST 请求进行签名`HttpURLConnection`是可行的，但它需要一些技巧：

诀窍是对 POST 参数进行百分比编码，并使用 method 将它们添加到 OAuth 库中`setAdditionalParameters()`。

有关示例，请参见[本文。](http://zewaren.net/oauth-java.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-03T15:51:04.710

这个[答案](https://stackoverflow.com/a/59765764/8430173)帮助了我。

但对于`PALINTEXT`方法，您不需要参数和 url。
他们不会更改签名。签名是恒定的并且基于秘密。

但对于 SHA1（和其他方法），您可以使用上述答案。

# php - 如何使用linkedin API 获取数据？

> ID：14601259
> 
> 赞同：0
> 
> 时间：2013-01-30T10:04:52.157
> 
> 标签：php, api, linkedin

尽管我已在 Linkedin API 中授予 fullprofile 权限，但无法获取用户的完整个人资料数据？我已向我的网络应用程序授予 r_fullprofile 权限，并且我正在为我获取完整的个人资料数据，但我无法获取我的连接的完整数据。为什么会这样？我的应用程序有什么不同的权限吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:46:46.510

Linkedin API 仅允许您为自己的个人资料获取完整的个人资料数据，而不是为您的连接的个人资料。

# c# - 如何在asp.net mvc3中获取下拉列表的选定值？

> ID：14601261
> 
> 赞同：0
> 
> 时间：2013-01-30T10:04:54.943
> 
> 标签：c#, asp.net-mvc, sql-server-2008, html-select

这是我的代码[在asp.net MVC3中将数据库中的数据显示到DropDownList中，](https://stackoverflow.com/questions/14600467/display-data-from-the-database-into-dropdownlist-in-asp-net-mvc3) 在此我现在可以将数据库中的数据显示到下拉列表中，但是现在我希望如果我从下拉列表数据中选择任何东西，我希望该选择的值在我的存储过程中传递. 我知道可能有相同的问题可用或已经被问到，但我没有得到我想要的答案。如果有人可以逐步解释我或提供一些有用的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:44:43.250

此代码未经过完全测试和实施。

您可以`onchange`使用`dropdownlist`.

```
@Html.DropDownListFor(x => x.SelectedItemValue,new {@onchange="passvalue(this);"}) 
```

使用 javascript 和 ajax 处理它

```
<script type="text/javascript">
  function passvalue(e){
      $.ajax({
         type: 'POST',
         dataType: 'json',
         url: '@Url.Action("Index", "Home")',
         data: ({ selectedValue: e.innerHTML }),
         success: function (result) {
                                    },
         error: function (result) {
                    alert('error');
                }
      });
  }
  </script> 
```

现在您可以将选定的值传递给控制器

```
[HttpPost]
public ActionResult Index(int selectedValue)
{
   // do whatever you want with `selectedValue`
} 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:11:18.093

这是实现此目的的一种方法：

订阅下拉列表的[更改](http://api.jquery.com/change/)事件并调用将所选值传递给存储过程的操作方法（例如使用[ajax ）。](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:14:46.917

有几种方法。最简单的方法之一是拥有一个 ViewModel，其中包含要在下拉列表中呈现的 SelectListItems 集合和一个用于选择的项目。在下面的示例代码中，我当然使用硬编码值等来演示这一点！

**视图模型**

```
public class TestViewModel
{
    public IEnumerable<SelectListItem> TestListItems
    {
        get
        {
            return new List<SelectListItem>
            {
                new SelectListItem { Text = "Item 1", Value = "1" },
                new SelectListItem { Text = "Item 1", Value = "1" },
                new SelectListItem { Text = "Item 1", Value = "1" },
            };
        }
    }

    public string SelectedItemValue { get; set; }
} 
```

**看法**

```
<p>@Html.DropDownListFor(x => x.SelectedItemValue, new SelectList(Model.TestListItems, "Value", "Text"))</p> 
```

**控制器**

```
public ActionResult Index()
{
    var viewModel = new TestViewModel();
    return View(viewModel);
}

[HttpPost]
public ActionResult Index(TestViewModel viewModel)
{
    string youChose = viewModel.SelectedItemValue;
    // ...
} 
```

此外，要突出显示集合不一定是`SelectListItem`并且可能是另一种类型。然后，您需要做的就是更改视图以执行 a`.Select`转换为`SelectListItem`. 为简单起见，我只是让 ViewModel 直接使用它。

# r - 从 R 中的多个 JPEG 生成 PDF

> ID：14601264
> 
> 赞同：3
> 
> 时间：2013-01-30T10:05:04.620
> 
> 标签：r, pdf-generation

我有一个包含多个 JPEG 文件的文件夹。如何从 R 中的这些 JPEG 生成 PDF 文件？

一个 JPEG = 1 个 PDF 页面。图像大小相同。

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:07:37.067

您可以使用 Latex 轻松完成此操作。这很好，因为这样你就可以使用 Sweave 来完成整个事情。

您可以按照以下方式进行操作：

```
% This is some Sweave file
\documentclass{article}
\usepackage{graphicx}
\begin{document}

<<results=tex,echo=FALSE>>=
mypics <- dir('mypics')
for(i in mypics){
cat("\\includegraphics{", i, "}\n\n", sep = "")
}
@
\end{document} 
```

好的，您必须设置您的 Sweave 管道，但是通过一些调整，您可以轻松地自动化整个过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:28:43.060

如果您坚持使用 R（其他工具更合适），请尝试以下操作（缓慢，未经测试）：

```
 lf = list.files(pattern = "jpeg") # image filenames

   library(jpeg)
   jpegs = lapply(lf, readJPG)

   library(grid)
   pdf("output.pdf", width=8, height=4)
   grid.raster(jpegs[[1]])
   lapply(jpegs[-1], function(x) {grid.newpage() ; grid.raster(x)} ) -> bquiet
   dev.off() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:11:45.870

如果您坚持使用 R 来执行此操作，那么您可以打开一个`pdf`绘图设备，`par`设置边距（默认可能是大而不是居中），然后在循环中使用`plot.new`开始一个新页面并`plot.window`设置坐标，等不绘制轴等，使用 ReadImages 包中的`read.jpeg`功能（或其他工具/包来读取，EBImage 是另一种可能性）然后`rasterImage`将 jpeg 绘制到 pdf 设备（或用其他图像绘制功能替换其中一些步骤，如ReadImages中的plot方法）。

但总体而言，使用为这类事情设计的更好的工具可能更容易/更快/更好/...。我想到了 ImageMagick 程序套件，还提到了 LaTeX，可能还有其他工具。

# iphone - 为什么要保留负值计数？

> ID：14601270
> 
> 赞同：4
> 
> 时间：2013-01-30T10:05:14.317
> 
> 标签：iphone, ios, objective-c, memory-management, retaincount

> **可能重复：**
> [NSString 保留计数](https://stackoverflow.com/questions/1390334/nsstring-retain-count)

是否有可能任何对象的**保留计数**为负值？

我有这个代码

```
NSString *str = [[NSString alloc] initWithString:@"Hello World"];
NSLog(@"String Retain Count: %i", [str retainCount]); 
```

这将返回**保留计数**-1。

为什么会这样？

我也这样做过

```
NSString *str = [[NSString alloc] init] 
```

**仍然在保留计数**中返回负值。

这是怎么回事？

请帮助理解这件事！！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T10:07:46.377

[`retainCount`不返回对象的引用计数。](http://whentouseretaincount.com)- 它返回无关的废话。

（出于性能原因，不可变的常量字符串在复制时返回`self`。如果将指针与`@""`and进行比较`[[NSString alloc] initWithString:@""]`，它们将相等。）

# python - 使用 perl 或 python 将阿拉伯字符“ا”替换为一个单词中的“a”，但另一个单词中的“ә”

> ID：14601271
> 
> 赞同：9
> 
> 时间：2013-01-30T10:05:16.917
> 
> 标签：python, regex, perl, arabic

我需要将纯文本 UTF8 文档从 R 语言更改为 L 语言到拉丁语。不幸的是，它不像字符-字符音译那么容易。
例如，R 到 L 语言 (ا) 中的“a”可以是“a”或“ә”，具体取决于单词的组成。

在带有 ag、k、e 或 hamza（گ،ك،ە، ء）的单词中，
我需要将所有 a、o、i、u（ا،و،ى،ۇ）更改为拉丁文 ә、ѳ、i、 ü（称为“软”元音）。
例如。سالەم 变成 sәlêm, ءۇي 变成 üy, سوزمەن 变成 sѳzmên

在没有 ag、k、e 或 hamza（گ،ك،ە، ء）
的单词中，a、o、i、u 变为拉丁字符 a、o、i、u（称为“硬”元音）。
例如。الما 变成 alma，ۇل 变成 ul，ورتا 变成 orta。

本质上，
g、k、e 或 hamza 充当阿拉伯语脚本中的发音指南。
在拉丁语中，我需要两组不同的元音，具体取决于阿拉伯语脚本中的原始单词。

我在想我可能需要将“软”元音词作为第一步，然后对文档的其余部分进行单独的查找和替换。但是，我如何使用 perl 或 python 进行这样的查找和替换？

这是一个 unicode 示例： \U+0633\U+0627\U+0644\U+06D5\U+0645 \U+0648\U+0631\U+062A\U+0627 \U+0674\U+06C7 \U+064A \U+0633\U+0648\U+0632\U+0645\U+06D5\U+0645 \U+0627\U+0644\U+0645\U+0627 \U+06C7\U +0644 \U+0645\U+06D5\U+0646\U+0649\U+06AD \U+0627\U+062A\U+0649\U+0645 \U+0634\U+0627\U+0644 \U+0642\U+0627\U+0631。

它应该看起来像：“sәlêm orta üy sѳzmên alma ul mêning atim xalқar”。（注意：字母 ڭ，即 U+06AD 实际上以两个字母 n+g 结尾，发出“-ng”音）。它不应该看起来像“salêm orta uy sozmên alma ul mêning atim xalқar”，也不应该像“sәlêm ѳrtә üy sѳzmên әlmә ül mêning әtim xәlқәr”。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T11:12:38.810

您可以使用序数映射构建自己的翻译表来替换字符，对于每组字符，您需要一个单独的表（用于元音）。这只是一个部分示例，但应该让您知道如何去做。

* * *

*请注意*，您需要为其他字符指定转换表。如果需要，您还可以将一个阿拉伯字符翻译成多个拉丁字符。如果您将输出与您的请求进行比较，似乎翻译表中的所有字符都正确匹配。

```
import re

s1 = {u'ء',u'ە',u'ك',u'گ'} # g, k, e, hamza

t1 = {ord(u'ا'):u'ә',  # first case
      ord(u'و'):u'ѳ',
      ord(u'ى'):u'i',
      ord(u'ۇ'):u'ü',
      ord(u'ڭ'):u'ng'} # with double

t2 = {ord(u'ا'):u'a',  # second case
      ord(u'و'):u'o',
      ord(u'ى'):u'i',
      ord(u'ۇ'):u'u',
      ord(u'ڭ'):u'ng'} # with double

def subst(word):    
    if any(c in s1 for c in word):
        return word.translate(t1)
    else:
        return word.translate(t2)

s = u'سالەم ورتا ءۇي سوزمەن الما ۇل مەنىڭ اتىم شالقار'

print re.sub(ur'(\S+)', lambda m: subst(m.group(1)), s)

# output:    سәلەم oرتa ءüي سѳزمەن aلمa uل مەنing aتiم شaلقaر

# requested: sәlêm orta üy sѳzmên alma ul mêning atim xalқar 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T14:13:44.760

命令：

```
$ echo سالەم ورتا ءۇي سوزمەن الما ۇل مەنىڭ اتىم شالقار | ./arabic-to-latin 
```

输出：

```
sәlêm orta üy sѳzmên alma ul mêning atim xalқar 
```

要使用文件而不是标准输入/标准输出：

```
$ ./arabic-to-latin input_file_with_arabic_text_in_utf8 >output_latin_in_utf8 
```

哪里`arabic-to-latin`文件：

```
#!/usr/bin/perl
use strict;
use warnings;
use utf8;
use open qw(:std :utf8);
#XXX normalization

sub replace_word {
    my ($word) = @_;
    $_ = $word;
    if (/ء|ە|ك|گ/) { # g, k, e, or hamza in the word
        tr/اوىۇ/әѳiü/; # soft
    } else {
        tr/اوىۇ/aoiu/; # hard
    }
    tr/سلەمرتزنشق/slêmrtznxқ/;
    s/ءüي/üy/g;
    s/ڭ/ng/g;
    $_;
}

while (my $line = <>) {
    $line =~ s/(\w+)/replace_word($1)/ge;
    print $line;
} 
```

使`arabic-to-latin`文件可执行：

```
$ chmod +x ./arabic-to-latin 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:42:32.750

我不会说 perl 或 python（或阿拉伯语），但这是您可以使用的基本思想（使用 Javascript，但应该可以翻译成任何已替换为回调的语言）：

```
//replace [a-z] with the proper unicode range for arabic
input.replace(/[a-z]+/, function(word){
  //replace `[gkeh]` with their arabic equivalents
  if(/[gkeh]/.test(word){
    return word.replace(/./, function(c){
      return withSoftVowels[c]
    })
  }else{
    return word.replace(/./, function(c){
      return withHardVowels[c]
    })
  }
}) 
```

也就是说，将输入拆分为单词，然后根据该单词是否包含特定字符，使用两个翻译表之一替换该单词中的每个符号。正则表达式可用于两者，或者您可以按单词边界拆分并在单词内进行替换（同时使用等效的`indexOf`for 分支）。

这是没有回调的方法（如果 Javascript 中的字符串是可变的）：

```
var words = input.split(' ');
var table;
for(var i=0; i<words.length; i++){
  if(words[i].test([gkeh]){
    table = softTable;
  }else{
    table = hardTable;
  }
  for(var j=0; j<words[i].length; j++){
    if(words[i][j] in table){
      words[i][j]=table[words[i][j]];
    }
  }
}
return words.join(' '); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T11:00:42.810

此 python 代码基于 Jan Dvorak 的代码，应该提供一个起点：

```
import re
import codecs

def replace_word(word):
    if re.search(ur'[gkeh]', word):
        # hard vowels
        word = word.replace(u'a', u'ә')
        word = word.replace(u'o', u'ѳ')
        word = word.replace(u'i', u'i')
        word = word.replace(u'u', u'ü')
    else:
        # soft vowels
        word = word.replace(u'a', u'a')
        word = word.replace(u'o', u'o')
        word = word.replace(u'i', u'i')
        word = word.replace(u'u', u'u')
    return word

with codecs.open('input.txt', 'w', 'utf-8') as fh:
    input = fh.read()

output = re.sub(ur'(\S+)', lambda m: replace_word(m.group(1)), input)

with codecs.open('output.txt', 'w', 'utf-8') as fh:
    fh.write(output) 
```

# java - 带有 JS 的 Java 自定义标签

> ID：14601282
> 
> 赞同：2
> 
> 时间：2013-01-30T10:05:45.393
> 
> 标签：java, javascript, jsp, servlets, custom-tags

我有自定义标签，其中包含`form`with`text input`和`submit`。我想`text input`使用 JS 来验证这一点，所以我的自定义标签输出应该如下所示：

```
<script type="text/javascript">
    function validate(form) {
        var text = form.textInput;
        // validation code
    }
</script>

<form onsubmit='return validate(this);'>
    <input type='text' name='textInput'/>
    <input type='submit'/>
</form> 
```

*（注意，此代码已简化！）*

当我想在页面上使用此标签两次或更多次时出现我的问题 - 我想`form`再次在页面上打印，但不是 JS 验证代码！验证码在页面上必须是唯一的。我怎样才能存档呢？我的自定义标签扩展`javax.servlet.jsp.tagext.TagSupport`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:13:30.867

我找到了最适合我的解决方案。

类`javax.servlet.jsp.tagext.TagSupport`包含`pageContext`提供...页面上下文的受保护字段！我可以轻松访问`javax.servlet.jsp.PageContext`. 所以，我把下一个代码放在我的自定义标签中：

```
public int doStartTag() throws JspException {
    if (pageContext.getAttribute("validated") == null) {
        // validation code writing
        pageContext.setAttribute("validated", true);
    }
    ...
} 
```

如果每页渲染只能达到一次条件。

希望它对某人有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T12:42:47.720

我建议您尝试将该 JavaScript 函数嵌入到某个 .js 文件中并导入该文件。如果您不想这样做，出于某种原因，您应该尝试动态定义该函数，如果它没有定义：

```
if (typeof window.validateMyForm === 'undefined') {
    window.validateMyForm = function(form) {
        var text = form.textInput;
        // validation code
    }
} 
```

正如您猜想的那样，只有在尚未定义的情况下才应该定义函数。

第一个答案是正确的，但这意味着程序员必须知道代码中已经插入自定义标签的位置，并据此将该参数设置为 true 或 false。那么代码更改呢，您必须始终考虑整个页面并修改页面上所有使用的标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T11:56:59.077

使自定义标签接受一个参数来打开或关闭验证，当然它会根据参数的值生成不同的代码。

# ruby-on-rails - 是否可以使用 Rails 3 更改 MongoDB 中的默认时区？

> ID：14601283
> 
> 赞同：3
> 
> 时间：2013-01-30T10:05:47.593
> 
> 标签：ruby-on-rails, mongodb, datetime, timezone, mongoid

我有这样的麻烦：当我创建对象并设置一些日期时间时，它将数据库保存在 UTC 时区中。这是示例：

```
//showing full list of object properties 
 Grant _id: 5108ee29e6b564611400000, start_date: 2013-01-30 09:56:27 UTC
 //then showing a.start_date
 Wed, 30 Jan 2013 13:56:27 +0400 
```

我试图禁止数据库使用 UTC。这是 mongoid.yml：

```
development:
  options:
    raise_not_found_error: false
  sessions:
    default:
      use_activesupport_time_zone: true
      use_utc: false
      database: test_mongoid_production
      hosts:
        - localhost:27017
      options:
        consistency: :strong 
```

在 application.rb 中：

```
config.time_zone = 'Moscow' 
```

但它不起作用。

有人可以帮忙解决这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T10:07:50.803

您可以更改应用程序的时区，以便 ruby​​ 的日期对象自动配置日期。MongoDB 将始终以 UTC 存储时间。

MongoDB 没有关于时区的内部知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:10:07.270

`config.time_zone`不设置“服务器时间”，通常由您的操作系统控制。

Rails 始终将您的日期以 UTC 格式存储在数据库中（除非您更改不同的设置）。

# asp.net-mvc-4 - HtmlHelper 是连接安全的

> ID：14601285
> 
> 赞同：0
> 
> 时间：2013-01-30T10:05:58.170
> 
> 标签：asp.net-mvc-4

我正在构建一个`MVC4`助手，并想从`HtmlHelper`课堂上找出请求是否来自安全（`https`）连接（`http`）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:11:40.273

像这样的东西，假设 helper 是类型`HtmlHelper<T>`或`HtmlHelper`

```
helper.ViewContext.RequestContext.HttpContext.Request.IsSecureConnection; 
```

或者也许是捷径

```
helper.ViewContext.HttpContext.Request.IsSecureConnection; 
```

# php - php不显示重复的ID

> ID：14601291
> 
> 赞同：0
> 
> 时间：2013-01-30T10:06:16.383
> 
> 标签：php, mysql, sql, database

首先对不起我的英语，感谢您的帮助。

我试图解释。

我有 3 张桌子

```
miele
CREATE TABLE `miele` (
`id`(11) INT NOT NULL  AUTO_INCREMENT,
`datamiele` DATE NOT NULL  ,
`codmiele` VARCHAR(10) NOT NULL  ,
`postazimiele` varchar(20) NOT NULL,
`nomemiele` VARCHAR(20) NOT NULL  ,
`totmiele` INT(7) NOT NULL  ,
`resultmiele` INT(7) NOT NULL  ,
`resmiele` INT(7) NOT NULL  ,
`notemiele` VARCHAR(300) NOT NULL  ,
PRIMARY KEY  (`id`)
) DEFAULT CHARSET=utf8;

confmiele
CREATE TABLE `confmiele` (
`idconf` INT(11) NOT NULL  AUTO_INCREMENT,
`dataconfmiele` DATE NOT NULL  ,
`codconfmiele` VARCHAR(10) NOT NULL  ,
`nomeconfmiele` VARCHAR(20) NOT NULL  ,
`boxconfmiele` VARCHAR(20) NOT NULL  ,
`pesoconfmiele` INT(7) NOT NULL  ,
`numconfmiele` INT(4) NOT NULL  ,
`totconfmiele` INT(7) NOT NULL  ,
`resparzconfmiele` INT(7) NOT NULL  ,
`tottotconfmiele` INT(7) NOT NULL  ,
`resultconfmiele` INT(7) NOT NULL  ,
`resconfmiele` INT(7) NOT NULL  ,
`totnumconfmiele` INT(7) NOT NULL  ,
`resultnumconfmiele` INT(7) NOT NULL  ,
`resnumconfmiele` INT(7) NOT NULL  ,
`noteconfmiele` VARCHAR(300) NOT NULL  ,
PRIMARY KEY  (`idconf`)
) DEFAULT CHARSET=utf8;

fattmiele
CREATE TABLE IF NOT EXISTS `fattmiele` (

`idfatt` int(11) NOT NULL AUTO_INCREMENT,

`datafattmiele` date NOT NULL,

`tipodocfattmiele` varchar(50) NOT NULL,

`numfattmiele` int(10) NOT NULL,

`nomedittfattmiele` varchar(50) NOT NULL,

`denodittfattmiele` varchar(50) NOT NULL,

`pivadittfattmiele` varchar(11) NOT NULL,

`codfisdittfattmiele` varchar(16) NOT NULL,

 `ibamdittfattmiele` varchar(27) NOT NULL,

`abancdittfattmiele` varchar(50) NOT NULL,

`viadittfattmiele` varchar(20) NOT NULL,

`cittadittfattmiele` varchar(50) NOT NULL,

`provdittfattmiele` varchar(3) NOT NULL,

`capdittfattmiele` int(5) NOT NULL,

`nazdittfattmiele` varchar(20) NOT NULL,

`teldittfattmiele` varchar(20) NOT NULL,

`celdittfattmiele` varchar(20) NOT NULL,

`emaildittfattmiele` varchar(50) NOT NULL,

`nomeclifattmiele` varchar(50) NOT NULL,

`denoclifattmiele` varchar(50) NOT NULL,

`pivaclifattmiele` varchar(11) NOT NULL,

`codfisclifattmiele` varchar(16) NOT NULL,

`viaclifattmiele` varchar(20) NOT NULL,

`cittaclifattmiele` varchar(50) NOT NULL,

`provclifattmiele` varchar(3) NOT NULL,

`capclifattmiele` int(5) NOT NULL,

`nazclifattmiele` varchar(20) NOT NULL,

`telclifattmiele` varchar(20) NOT NULL,

`dest1clifattmiele` varchar(200) NOT NULL,

`noteproddittfattmiele` varchar(300) NOT NULL,

`pagfattmiele` varchar(20) NOT NULL,

`cod1conffattmiele` varchar(10) NOT NULL,

`nome1conffattmiele` varchar(10) NOT NULL,

`nome1sfusofattmiele` varchar(30) NOT NULL,

`kg1sfusofattmiele` decimal(10,3) NOT NULL,

`resparz1sfusofattmiele` int(7) NOT NULL,

`eurokg1sfusofattmiele` decimal(7,2) NOT NULL,

`box1conffattmiele` varchar(20) NOT NULL,

`peso1conffattmiele` int(7) NOT NULL,

`num1conffattmiele` int(7) NOT NULL,

`tot1pesoconffattmiele` decimal(10,3) NOT NULL,

`vend1numconffattmiele` int(7) NOT NULL,

`unit1eurofattmiele` decimal(7,2) NOT NULL,

`euro1fattmiele` decimal(7,2) NOT NULL,

`cod2conffattmiele` varchar(10) NOT NULL,

`nome2conffattmiele` varchar(10) NOT NULL,

`nome2sfusofattmiele` varchar(30) NOT NULL,

`kg2sfusofattmiele` decimal(10,3) NOT NULL,

`resparz2sfusofattmiele` int(7) NOT NULL,

`eurokg2sfusofattmiele` decimal(7,2) NOT NULL,

`box2conffattmiele` varchar(20) NOT NULL,

`peso2conffattmiele` int(7) NOT NULL,

`num2conffattmiele` int(7) NOT NULL,

`tot2pesoconffattmiele` decimal(10,3) NOT NULL,

`vend2numconffattmiele` int(7) NOT NULL,

`unit2eurofattmiele` decimal(7,2) NOT NULL,

`euro2fattmiele` decimal(7,2) NOT NULL,

`cod3conffattmiele` varchar(10) NOT NULL,

`nome3conffattmiele` varchar(10) NOT NULL,

`nome3sfusofattmiele` varchar(30) NOT NULL,

`kg3sfusofattmiele` decimal(10,3) NOT NULL,

`eurokg3sfusofattmiele` decimal(7,2) NOT NULL,

`resparz3sfusofattmiele` int(7) NOT NULL,

`box3conffattmiele` varchar(20) NOT NULL,

`peso3conffattmiele` int(7) NOT NULL,

`num3conffattmiele` int(7) NOT NULL,

`tot3pesoconffattmiele` decimal(10,3) NOT NULL,

`vend3numconffattmiele` int(7) NOT NULL,

`unit3eurofattmiele` decimal(7,2) NOT NULL,

`euro3fattmiele` decimal(7,2) NOT NULL,

`cod4conffattmiele` varchar(10) NOT NULL,

`nome4conffattmiele` varchar(10) NOT NULL,

`nome4sfusofattmiele` varchar(30) NOT NULL,

`kg4sfusofattmiele` decimal(10,3) NOT NULL,

`eurokg4sfusofattmiele` decimal(7,2) NOT NULL,

`resparz4sfusofattmiele` int(7) NOT NULL,

`box4conffattmiele` varchar(20) NOT NULL,

`peso4conffattmiele` int(7) NOT NULL,

`num4conffattmiele` int(7) NOT NULL,

`tot4pesoconffattmiele` decimal(10,3) NOT NULL,

`vend4numconffattmiele` int(7) NOT NULL,

`unit4eurofattmiele` decimal(7,2) NOT NULL,

`euro4fattmiele` decimal(7,2) NOT NULL,

`cod5conffattmiele` varchar(10) NOT NULL,

`nome5conffattmiele` varchar(10) NOT NULL,

`nome5sfusofattmiele` varchar(30) NOT NULL,

`kg5sfusofattmiele` decimal(10,3) NOT NULL,

`eurokg5sfusofattmiele` decimal(7,2) NOT NULL,

`resparz5sfusofattmiele` int(7) NOT NULL,

`box5conffattmiele` varchar(20) NOT NULL,

`peso5conffattmiele` int(7) NOT NULL,

`num5conffattmiele` int(7) NOT NULL,

`tot5pesoconffattmiele` decimal(10,3) NOT NULL,

`vend5numconffattmiele` int(7) NOT NULL,

`unit5eurofattmiele` decimal(7,2) NOT NULL,

`euro5fattmiele` decimal(7,2) NOT NULL,

`cod6conffattmiele` varchar(10) NOT NULL,

`nome6conffattmiele` varchar(10) NOT NULL,

`nome6sfusofattmiele` varchar(30) NOT NULL,

`kg6sfusofattmiele` decimal(10,3) NOT NULL,

`eurokg6sfusofattmiele` decimal(7,2) NOT NULL,

`resparz6sfusofattmiele` int(7) NOT NULL,

`box6conffattmiele` varchar(20) NOT NULL,

`peso6conffattmiele` int(7) NOT NULL,

`num6conffattmiele` int(7) NOT NULL,

`tot6pesoconffattmiele` decimal(10,3) NOT NULL,

`vend6numconffattmiele` int(7) NOT NULL,

`unit6eurofattmiele` decimal(7,2) NOT NULL,

`euro6fattmiele` decimal(7,2) NOT NULL,

`cod7conffattmiele` varchar(10) NOT NULL,

`nome7conffattmiele` varchar(10) NOT NULL,

`nome7sfusofattmiele` varchar(30) NOT NULL,

`kg7sfusofattmiele` decimal(10,3) NOT NULL,

`eurokg7sfusofattmiele` decimal(7,2) NOT NULL,

`resparz7sfusofattmiele` int(7) NOT NULL,

`box7conffattmiele` varchar(20) NOT NULL,

`peso7conffattmiele` int(7) NOT NULL,

`num7conffattmiele` int(7) NOT NULL,

`tot7pesoconffattmiele` decimal(10,3) NOT NULL,

`vend7numconffattmiele` int(7) NOT NULL,

`unit7eurofattmiele` decimal(7,2) NOT NULL,

`euro7fattmiele` decimal(7,2) NOT NULL,

`cod8conffattmiele` varchar(10) NOT NULL,

`nome8conffattmiele` varchar(10) NOT NULL,

`nome8sfusofattmiele` varchar(30) NOT NULL,

`kg8sfusofattmiele` decimal(10,3) NOT NULL,

`eurokg8sfusofattmiele` decimal(7,2) NOT NULL,

`resparz8sfusofattmiele` int(7) NOT NULL,

`box8conffattmiele` varchar(20) NOT NULL,

`peso8conffattmiele` int(7) NOT NULL,

`num8conffattmiele` int(7) NOT NULL,

`tot8pesoconffattmiele` decimal(10,3) NOT NULL,

`vend8numconffattmiele` int(7) NOT NULL,

`unit8eurofattmiele` decimal(7,2) NOT NULL,

`euro8fattmiele` decimal(7,2) NOT NULL,

`cod9conffattmiele` varchar(10) NOT NULL,

`nome9conffattmiele` varchar(10) NOT NULL,

`nome9sfusofattmiele` varchar(30) NOT NULL,

`kg9sfusofattmiele` decimal(10,3) NOT NULL,

`eurokg9sfusofattmiele` decimal(7,2) NOT NULL,

`resparz9sfusofattmiele` int(7) NOT NULL,

`box9conffattmiele` varchar(20) NOT NULL,

`peso9conffattmiele` int(7) NOT NULL,

`num9conffattmiele` int(7) NOT NULL,

`tot9pesoconffattmiele` decimal(10,3) NOT NULL,

`vend9numconffattmiele` int(7) NOT NULL,

`unit9eurofattmiele` decimal(7,2) NOT NULL,

`euro9fattmiele` decimal(7,2) NOT NULL,

`cod10conffattmiele` varchar(10) NOT NULL,

`nome10conffattmiele` varchar(10) NOT NULL,

`nome10sfusofattmiele` varchar(30) NOT NULL,

`kg10sfusofattmiele` decimal(10,3) NOT NULL,

`eurokg10sfusofattmiele` decimal(7,2) NOT NULL,

`resparz10sfusofattmiele` int(7) NOT NULL,

`box10conffattmiele` varchar(20) NOT NULL,

`peso10conffattmiele` int(7) NOT NULL,

`num10conffattmiele` int(7) NOT NULL,

`tot10pesoconffattmiele` decimal(10,3) NOT NULL,

`vend10numconffattmiele` int(7) NOT NULL,

`unit10eurofattmiele` decimal(7,2) NOT NULL,

`euro10fattmiele` decimal(7,2) NOT NULL,

`cod11conffattmiele` varchar(10) NOT NULL,

`nome11conffattmiele` varchar(10) NOT NULL,

`nome11sfusofattmiele` varchar(30) NOT NULL,

`kg11sfusofattmiele` decimal(10,3) NOT NULL,

`eurokg11sfusofattmiele` decimal(7,2) NOT NULL,

`resparz11sfusofattmiele` int(7) NOT NULL,

`box11conffattmiele` varchar(20) NOT NULL,

`peso11conffattmiele` int(7) NOT NULL,

`num11conffattmiele` int(7) NOT NULL,

`tot11pesoconffattmiele` decimal(10,3) NOT NULL,

`vend11numconffattmiele` int(7) NOT NULL,

`unit11eurofattmiele` decimal(7,2) NOT NULL,

`euro11fattmiele` decimal(7,2) NOT NULL,

`cod12conffattmiele` varchar(10) NOT NULL,

`nome12conffattmiele` varchar(10) NOT NULL,

`nome12sfusofattmiele` varchar(30) NOT NULL,

`kg12sfusofattmiele` decimal(10,3) NOT NULL,

`eurokg12sfusofattmiele` decimal(7,2) NOT NULL,

`resparz12sfusofattmiele` int(7) NOT NULL,

`box12conffattmiele` varchar(20) NOT NULL,

`peso12conffattmiele` int(7) NOT NULL,

`num12conffattmiele` int(7) NOT NULL,

`tot12pesoconffattmiele` decimal(10,3) NOT NULL,

`vend12numconffattmiele` int(7) NOT NULL,

`unit12eurofattmiele` decimal(7,2) NOT NULL,

`euro12fattmiele` decimal(7,2) NOT NULL,

`cod13conffattmiele` varchar(10) NOT NULL,

`nome13conffattmiele` varchar(10) NOT NULL,

`nome13sfusofattmiele` varchar(30) NOT NULL,

`kg13sfusofattmiele` decimal(10,3) NOT NULL,

`eurokg13sfusofattmiele` decimal(7,2) NOT NULL,

`resparz13sfusofattmiele` int(7) NOT NULL,

`box13conffattmiele` varchar(20) NOT NULL,

`peso13conffattmiele` int(7) NOT NULL,

`num13conffattmiele` int(7) NOT NULL,

`tot13pesoconffattmiele` decimal(10,3) NOT NULL,

`vend13numconffattmiele` int(7) NOT NULL,

`unit13eurofattmiele` decimal(7,2) NOT NULL,

`euro13fattmiele` decimal(7,2) NOT NULL,

`cod14conffattmiele` varchar(10) NOT NULL,

`nome14conffattmiele` varchar(10) NOT NULL,

`nome14sfusofattmiele` varchar(30) NOT NULL,

`kg14sfusofattmiele` decimal(10,3) NOT NULL,

`eurokg14sfusofattmiele` decimal(7,2) NOT NULL,

`resparz14sfusofattmiele` int(7) NOT NULL,

`box14conffattmiele` varchar(20) NOT NULL,

`peso14conffattmiele` int(7) NOT NULL,

`num14conffattmiele` int(7) NOT NULL,

`tot14pesoconffattmiele` decimal(10,3) NOT NULL,

`vend14numconffattmiele` int(7) NOT NULL,

`unit14eurofattmiele` decimal(7,2) NOT NULL,

`euro14fattmiele` decimal(7,2) NOT NULL,

`cod15conffattmiele` varchar(10) NOT NULL,

`nome15conffattmiele` varchar(10) NOT NULL,

`nome15sfusofattmiele` varchar(30) NOT NULL,

`kg15sfusofattmiele` decimal(10,3) NOT NULL,

`eurokg15sfusofattmiele` decimal(7,2) NOT NULL,

`resparz15sfusofattmiele` int(7) NOT NULL,

`box15conffattmiele` varchar(20) NOT NULL,

`peso15conffattmiele` int(7) NOT NULL,

`num15conffattmiele` int(7) NOT NULL,

`tot15pesoconffattmiele` decimal(10,3) NOT NULL,

`vend15numconffattmiele` int(7) NOT NULL,

`unit15eurofattmiele` decimal(7,2) NOT NULL,

`euro15fattmiele` decimal(7,2) NOT NULL,

`cod16conffattmiele` varchar(10) NOT NULL,

`nome16conffattmiele` varchar(10) NOT NULL,

`nome16sfusofattmiele` varchar(30) NOT NULL,

`kg16sfusofattmiele` decimal(10,3) NOT NULL,

`eurokg16sfusofattmiele` decimal(7,2) NOT NULL,

`resparz16sfusofattmiele` int(7) NOT NULL,

`box16conffattmiele` varchar(20) NOT NULL,

`peso16conffattmiele` int(7) NOT NULL,

`num16conffattmiele` int(7) NOT NULL,

`tot16pesoconffattmiele` decimal(10,3) NOT NULL,

`vend16numconffattmiele` int(7) NOT NULL,

`unit16eurofattmiele` decimal(7,2) NOT NULL,

`euro16fattmiele` decimal(7,2) NOT NULL,

`cod17conffattmiele` varchar(10) NOT NULL,

`nome17conffattmiele` varchar(10) NOT NULL,

`nome17sfusofattmiele` varchar(30) NOT NULL,

`kg17sfusofattmiele` decimal(10,3) NOT NULL,

`eurokg17sfusofattmiele` decimal(7,2) NOT NULL,

`resparz17sfusofattmiele` int(7) NOT NULL,

`box17conffattmiele` varchar(20) NOT NULL,

`peso17conffattmiele` int(7) NOT NULL,

`num17conffattmiele` int(7) NOT NULL,

`tot17pesoconffattmiele` decimal(10,3) NOT NULL,

`vend17numconffattmiele` int(7) NOT NULL,

`unit17eurofattmiele` decimal(7,2) NOT NULL,

`euro17fattmiele` decimal(7,2) NOT NULL,

`cod18conffattmiele` varchar(10) NOT NULL,

`nome18conffattmiele` varchar(10) NOT NULL,

`nome18sfusofattmiele` varchar(30) NOT NULL,

`kg18sfusofattmiele` decimal(10,3) NOT NULL,

`eurokg18sfusofattmiele` decimal(7,2) NOT NULL,

`resparz18sfusofattmiele` int(7) NOT NULL,

`box18conffattmiele` varchar(20) NOT NULL,

`peso18conffattmiele` int(7) NOT NULL,

`num18conffattmiele` int(7) NOT NULL,

`tot18pesoconffattmiele` decimal(10,3) NOT NULL,

`vend18numconffattmiele` int(7) NOT NULL,

`unit18eurofattmiele` decimal(7,2) NOT NULL,

`euro18fattmiele` decimal(7,2) NOT NULL,

`cod19conffattmiele` varchar(10) NOT NULL,

`nome19conffattmiele` varchar(10) NOT NULL,

`nome19sfusofattmiele` varchar(30) NOT NULL,

`kg19sfusofattmiele` decimal(10,3) NOT NULL,

`eurokg19sfusofattmiele` decimal(7,2) NOT NULL,

`resparz19sfusofattmiele` int(7) NOT NULL,

`box19conffattmiele` varchar(20) NOT NULL,

`peso19conffattmiele` int(7) NOT NULL,

`num19conffattmiele` int(7) NOT NULL,

`tot19pesoconffattmiele` decimal(10,3) NOT NULL,

`vend19numconffattmiele` int(7) NOT NULL,

`unit19eurofattmiele` decimal(7,2) NOT NULL,

`euro19fattmiele` decimal(7,2) NOT NULL,

`cod20conffattmiele` varchar(10) NOT NULL,

`nome20conffattmiele` varchar(10) NOT NULL,

`nome20sfusofattmiele` varchar(30) NOT NULL,

`kg20sfusofattmiele` decimal(10,3) NOT NULL,

`eurokg20sfusofattmiele` decimal(7,2) NOT NULL,

`resparz20sfusofattmiele` int(7) NOT NULL,

`box20conffattmiele` varchar(20) NOT NULL,

`peso20conffattmiele` int(7) NOT NULL,

`num20conffattmiele` int(7) NOT NULL,

`tot20pesoconffattmiele` decimal(10,3) NOT NULL,

`vend20numconffattmiele` int(7) NOT NULL,

`unit20eurofattmiele` decimal(7,2) NOT NULL,

`euro20fattmiele` decimal(7,2) NOT NULL,

`sommafattmiele` decimal(10,2) NOT NULL,

`impfattmiele` decimal(10,2) NOT NULL,

`valscontofattmiele` int(2) NOT NULL,

`scontofattmiele` decimal(10,2) NOT NULL,

`valtaxfattmiele` int(2) NOT NULL,

`taxfattmiele` decimal(10,2) NOT NULL,

`toteurofattmiele` decimal(10,2) NOT NULL,

`traspfattmiele` varchar(25) NOT NULL,

`numcollofattmiele` int(7) NOT NULL,

`collotipofattmiele` varchar(20) NOT NULL,

PRIMARY KEY (`idfatt`)

) ENGINE=MyISAM  
DEFAULT CHARSET=utf8  ; 
```

我创建了一个表格以获得以下结果：

*   按 3 表的顺序选择所有记录`datamiele, dataconf, datafatt`。
*   从表哪里来的`miele`，喜欢。`nomemiele``codmiele``$myvalue`
*   从表哪里来的`confmiele`，喜欢。`nomeconfmiele``codconfmiele``$myvalue`
*   来自 table`fattmiele`和like or nome2conftattmiele 和 cod2confattmiele like $myvalue etc for 20 cod and name `nome1conffattmiele`。`cod1conffattmiele``$myvalue`

是的，我知道下一步分为`fattmiele`两张表，一张是产品 e，一张是发票数据。但首先我想解决这个问题，所以我用 3 个表中的 2 个尝试了第一个。

```
$query="SELECT miele.* , confmiele.*  FROM miele , confmiele WHERE 
  datamiele  BETWEEN ('".$datamieleusDA."') AND  ('".$datamieleusA."') AND dataconfmiele  BETWEEN ('".$datamieleusDA."') AND  ('".$datamieleusA."')
  AND codmiele LIKE ('".$codmiele."') AND nomemiele LIKE ('".$nomemiele."') AND codconfmiele LIKE ('".$codmiele."') AND nomeconfmiele LIKE ('".$nomemiele."')   ORDER BY 2 ";
$res = mysql_query($query) or die ('Error updating database: ' . mysql_error());
{    
}

while($row=mysql_fetch_assoc($res)){ 
```

工作，但我看到每个数据的重复 id`confmiele`总是重复`miele`数据。

请有些人可以帮助我。

一些解决方案或 MySQL 或 PHP 方式。

请我希望你原谅我的英语并耐心等待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:11:13.503

简明扼要地解释清楚。没有人有耐心看这个乱七八糟的帖子。

# java - 如何将 Sling serlvet 中的 sling.servlet.resourceTypes 设置为相对于自身的路径（相对于 serlvet 的资源）？

> ID：14601292
> 
> 赞同：3
> 
> 时间：2013-01-30T10:06:19.207
> 
> 标签：java, servlets, aem, sling

如果我以错误的方式提出问题，我将首先说出我想要实现的目标：

我在 CQ5 中具有以下组件结构：/apps/TEST/components/DatabaseConnection（DatabaseConnection 是组件名称）/apps/TEST/components/DatabaseConnection/src/ServletDatabaseConnection（这是我用于处理来自 TEST 的 POST 请求的 serlvet /组件/数据库连接。

在我的 servlet sling.servlet.resourceTypes 设置为 TEST/components/DatabaseConnection)

所以，我设置了sling.servlet.resourceTypes的相对路径，servlet会在/apps/TEST/components/DatabaseConnection和/libs/TEST/components/DatabaseConnection/下寻找resourceType

但是我希望能够将我的组件 DatabaseConnection 移动到任何其他文件夹，并且在 servlet 和应用程序中都不会更改任何内容。但如果我现在这样做，我将不得不将 sling.servlet.resourceTypes 更改为新的 resourceType

考虑到 Sling 中的一切都是资源，而不是我的 servlet 也是资源，对吧？那么，可能可以将 sling.servlet.resourceTypes 设置为相对于 servlet 的 resourceType 吗？

那么，我可以相对于这个 servlet 的资源类型设置 sling.servlet.resourceTypes 吗？如果不是，是否有任何其他方法可以使我的组件“可移动”，这样我就不必更改 servlet 中的任何内容？

我发现这两个资源非常有用： http: [//www.pro-vision.de/content/medialib/pro-vision/production/adaptto/2012/adaptto2012-apache-sling-basic-concepts-rainer-bartl -peter-manne/_jcr_content/renditions/rendition.file/adaptto2012-apache-sling-basic-concepts-rainer-bartl-peter-mannel.pdf](http://www.pro-vision.de/content/medialib/pro-vision/production/adaptto/2012/adaptto2012-apache-sling-basic-concepts-rainer-bartl-peter-manne/_jcr_content/renditions/rendition.file/adaptto2012-apache-sling-basic-concepts-rainer-bartl-peter-mannel.pdf) [http://sling.apache.org/site/resources.html](http://sling.apache.org/site/resources.html) 但我还是想不出解决办法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T15:41:53.227

7 个月过去了，在查看同事的代码后，我发现了如何实现我想要实现的目标 :)

所以我想让组件和它的 servlet 一起移动。

为此，我们不需要使用 resourceType，但我们需要使用 sling.servlet.paths。 [http://sling.apache.org/documentation/the-sling-engine/servlets.html](http://sling.apache.org/documentation/the-sling-engine/servlets.html)

为了让它发挥作用，我们需要做三件事。

1) 在我们要发送到 Servlet 的表单中，设置一些动作。例子：

```
<form name="name" id="id" action="/someaction/dothis" method="POST">
<button name="submit"> Submit </button>
</form> 
```

2) 在 servlet 中设置 sling.servlet.paths。在我们的例子中：

```
@Component(immediate = true)
@Service(value=javax.servlet.Servlet.class)
@Properties(value = {
@Property(name="sling.servlet.methods", value={ "POST" }),
//
@Property(name="sling.servlet.paths", value={"/someaction/dothis"})
})
public class ServletEvaluation extends SlingAllMethodsServlet {
...
} 
```

3) 在 OSGi 控制台 /system/console/configMgr 中配置 Apache Sling Servlet/Resource Resolver：将 sling.servlet.path 添加到执行路径。在我们的例子中，将执行路径设置为 /someaction

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:27:11.663

您是否尝试设置绝对路径而不是资源类型？例如，如果您将路径设置为 /bin/TEST/DatabaseConnection，那么资源类型是什么并不重要。

# android - PhoneGap Build 推送通知：当应用关闭时，Android 推送不起作用

> ID：14601299
> 
> 赞同：2
> 
> 时间：2013-01-30T10:06:39.010
> 
> 标签：android, cordova, push-notification

我为PhoneGap Build实现了一个推送通知插件，等了这么久

[https://build.phonegap.com/blog/introducing-genericpush-plugin](https://build.phonegap.com/blog/introducing-genericpush-plugin)

但是，我遇到了 Android 应用程序没有在后台运行的问题。关闭应用程序时未收到推送通知。应用程序运行时一切正常。有人用安卓试过吗？有什么需要做的修复吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T13:10:24.863

这与 GenericPush 插件本身无关。这与 Android 管理应用程序的方式有关。如果您的用户手动关闭应用程序，则意味着他不想再接收消息。这就是为什么即使 GCM BroadcastReceiver 也停止并且设备没有收到通知的原因。

以下是一些有用的链接：

*   [Android GCM 谷歌群组](https://groups.google.com/forum/embed/#!topicsearchin/android-gcm/after$3A2012$2F08$2F01$20before$3A2012$2F08$2F31/android-gcm/MqVlA3Sj26c)
*   [类似的问题，仅与 Android 相关（本机）](https://stackoverflow.com/questions/12073449/android-gcm-push-notification-device-doesnt-receive-notification-if-applicat)

# android - 看门狗大哥在看 - 这是什么？

> ID：14601308
> 
> 赞同：-4
> 
> 时间：2013-01-30T10:07:06.363
> 
> 标签：android, android-logcat

我想知道这是什么：

> 带看门狗（1396）：看门狗老大哥观看：com.android.server.WindowManagerService

当我将 LG P970 连接到 PC 时，我在 logcat 中收到了这条消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:18:04.590

这是windowManagerService的看门狗定时器的Log。看门狗的概念通常用于检查系统是否没有阻塞，你为什么会担心呢！

# vim - 我怎样才能让vim并排格式化矩阵

> ID：14601309
> 
> 赞同：2
> 
> 时间：2013-01-30T10:07:06.703
> 
> 标签：vim, formatting

我正在使用 vim 记录我的很多日常工作。我通常有很多矩阵的结果。当我在一天结束时粘贴这些时，我有（有时）0ne 或 2 列矩阵的页面

我的问题是如何让 vim 以编程方式格式化它：

```
R) DT = data.frame(x=rnorm(6),y=rnorm(6))
R) DT
           x       y
1 -0.0007499  0.7661
2  1.5559552 -0.6664
3  0.2082094 -0.1598
4 -0.1684766 -0.0536
5  3.1014233 -0.7439
6  0.1985104  2.0415
R) DT2 = data.frame(x=rnorm(7),y=rnorm(7))
R) DT2
          x       y
1 -0.005116 -0.4388
2  2.317381  0.6597
3  0.359883  0.4770
4 -1.426220  0.4911
5  0.468820 -0.3260
6  0.626147 -0.6254
7 -1.086660  2.1973 
```

对此：并排

```
R) DT = data.frame(x=rnorm(6),y=rnorm(6)) R) DT2 = data.frame(x=rnorm(7),y=rnorm(7))
R) DT                                     R) DT2
           x       y                                x       y
1 -0.0007499  0.7661                      1 -0.005116 -0.4388
2  1.5559552 -0.6664                      2  2.317381  0.6597
3  0.2082094 -0.1598                      3  0.359883  0.4770
4 -0.1684766 -0.0536                      4 -1.426220  0.4911
5  3.1014233 -0.7439                      5  0.468820 -0.3260
6  0.1985104  2.0415                      6  0.626147 -0.6254
                                          7 -1.086660  2.1973 
```

* * *

编辑：谢谢大家，肯特解决方案有效，奇怪的是在`set ve=all`我`C-Q`不允许选择像这样的块之前

```
############
###############
#########
#########
######### 
```

我无法到达第二行的最后一列（使用`gvim`on `win XP`）。

现在效果很好我也会使用`Ingo Karkat`插件”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:34:20.507

这其中的关键是分*块视觉模式*。转到第二个块的开头（应该成为第一个块旁边的右列），按`Ctrl+V`（在 Windows 上，这通常重新映射到），使用和`Ctrl+Q`创建选择。. .，然后用 . 删除。然后转到第一个块的第一行，转到行尾，（可选附加填充空白），然后粘贴. 第二个块应粘贴到光标的右侧。最后，您可以删除第二个块所在的空行。`$``j``j``j``d``$``p`

* * *

我的[UnconditionalPaste 插件](http://www.vim.org/scripts/script.php?script_id=3355)简化了这个任务：然后你可以简单地用`dd`or删除第二个块`V``j``j``j`。. . ，并使用插件的映射`d`强制以块模式粘贴。`gdp`

* * *

如果您找到一种方法来确定块的大小（`}`跳转到下一个空行的键在这里可能会派上用场），那么您可以将所有步骤放入自定义映射中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:46:48.387

尝试以下步骤：

```
:set ve=all 
```

将光标移动到行首`R) DT2 = data.frame(x=rnorm(7),y=rnorm(7))`

按`C-V`，然后使用运动魔法选择第二块

按`d`

将光标移动到第一行，即要粘贴第二个块的位置。类型`p`

如果您的文本始终采用这种格式，您可以尝试以下映射：

```
:nnoremap <leader>mt :let &ve='all'<cr>gg/^R)<CR>n<c-v>G$dgg$3lp 
```

然后您可以在正常模式下键入`<leader>mt`进行转换。

**笔记**

*   我没有在 windows 上使用 vim 的经验......所以你可能需要更改 windows 块选择的映射。`<C-Q>`? 没有把握。

*   我假设文件的第一行是`R)...`

*   这会将第二个块粘贴到位置：第一行末尾后的 3 个空格，如果要调整它，请更改映射中的数字 3

![在此处输入图像描述](../Images/7952f8da7a1f2ad48d6e4e499eca629f.png)

# database - Django ORM模型对象的主键中的空值

> ID：14601312
> 
> 赞同：2
> 
> 时间：2013-01-30T10:07:22.980
> 
> 标签：database, django, postgresql, orm, django-models

我有一个需要与旧数据库集成的 Django ORM 模型。模型是通过 生成`manage.py inspectdb`的，类定义如下：

```
class ClientJob(models.Model):
    id = models.AutoField(primary_key=True, db_column="id")
    CustomerGuid = models.CharField(max_length=40, db_column='CustomerGUID', blank=True)
    JobGuid = models.CharField(max_length=40, db_column='JobGUID', blank=True)
    AgentGuid = models.CharField(max_length=40, db_column='AgentGUID', blank=True)

    class Meta:
        db_table = u'ClientJob' 
```

主键`id`最初定义为`models.IntegerField(primary_key=True)`，但根据我对 Django 的理解，如果我希望它自动递增因此需要更改为 AutoField。

我可以毫无问题地查询对象，但是当我尝试创建和保存新对象时遇到麻烦。以下代码抛出`IntegrityError`消息“列“id”中的空值违反非空约束”。

```
new_job = ClientJob.objects.create(CustomerGuid=customer_guid, JobGuid=str(uuid4()), AgentGuid=agent_guid)
new_job.save() 
```

我怀疑（但绝不肯定）这可能是因为我的 ClientJob 表的主键取决于自定义序列。序列的定义如下：

```
CREATE SEQUENCE seq_client_job_id
  INCREMENT 1
  MINVALUE 1
  MAXVALUE 9223372036854775807
  START 11020
  CACHE 1;
ALTER TABLE seq_client_job_id
  OWNER TO ssa; 
```

任何有助于阐明这一点的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T10:11:53.313

只需删除或取消注释模型类中的`id`行 - 它应该像魅力一样工作。

```
class ClientJob(models.Model):
    #id = models.AutoField(primary_key=True, db_column="id")
    CustomerGuid = models.CharField(max_length=40, db_column='CustomerGUID', blank=True)
    JobGuid = models.CharField(max_length=40, db_column='JobGUID', blank=True)
    #... 
```

# unix - 更改 UNIX 进程的系统时间？

> ID：14601316
> 
> 赞同：5
> 
> 时间：2013-01-30T10:07:33.287
> 
> 标签：unix, datetime, time, process, timezone

我需要测试我的 C++ 程序，它使用系统时间。该程序很大，它使用可能也使用系统时间的第三方库。

我想看看我的程序在不同日期/时间的表现如何。

是否可以仅更改 UNIX 中一个正在运行的进程的系统时间？

非常感谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T10:35:46.200

嗯，我自己找到了答案。

在 unix shell 中有一个环境变量 TZ 是时区，它被所有 C/C++ 时间函数使用。

可以操纵此变量以将当前 unix shell 中的时间设置为任意时间（限制为秒数，而不是毫秒），甚至更改日期。

例子：

```
export TZ=A-02:10:20 
```

（从现在开始将时间移动 2 小时 10 分 20 秒）。

```
export TZ=A+02:10:20 
```

（同样向后移动）

如果要更改日期，可以使用大量小时数，例如：

```
export TZ=A-72:10:20 
```

不幸的是，它不会让您过多地更改日期，从我的实验来看，它最多可以向后/向前几天。因此，对于更改月份/年份，这不起作用。

（设置 TZ 变量后，使用“日期”命令检查当前日期/时间）。

要取消所有更改，请使用

```
export TZ= 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T10:11:16.687

我想你可以使用[libfaketime](http://archive09.linux.com/feature/147801)。

# python - Mongoengine 使用 only() 查询引用字段列表

> ID：14601321
> 
> 赞同：4
> 
> 时间：2013-01-30T10:07:39.503
> 
> 标签：python, mongodb, mongoengine

我有两个文件

```
class Book(Document):
    title = StringField()
    publication = StringField()
    no_of_pages = IntField()
    desc = StringField()
    reviews = ListField(ReferenceField(Review))
    ...

class Author(Document):
    name = StringField()
    books = ListField(ReferenceField(Book))
    desc = StringField()
    ... 
```

我想写一个查询，给出一个作者的名字来找到他所有的书的瓷砖。

如您所见，这两个文档都有很多列，我不想获取所有列。因此我的必填字段是

```
`req_fields = ['name', 'books']` 
```

我查询如下

```
author = Author.objects.filter(name='xyz').only(*req_fields) 
```

如果我打印`author`对象，我会得到：

```
{
_id=ObjectId('50fcf9682c345a0427000019'),
_cls='Author',
name='xyz',
books=[DBRef('Book', ObjectId('50fcd9682c441e0427000019')), 
DBRef('Book', ObjectId('50fcd9682c361e0427000020'))]
} 
```

我希望查询返回标题的字符串列表，而不是书籍对象的列表。我该如何修改这个？使得结果对象如下

```
{
_id=ObjectId('50fcf9682c345a0427000019'),
_cls='Author',
name='xyz',
books=['Title One', 'Title Two']
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T10:47:23.483

如果您需要取消引用的书籍，`select_related` 例如：

```
author = Author.objects.filter(name='xyz').only(*req_fields).select_related() 
```

# php - php中的未定义索引（我已经在互联网上搜索了所有内容，并在stackoverflow上进行了几乎所有尝试）

> ID：14601322
> 
> 赞同：-6
> 
> 时间：2013-01-30T10:07:39.247
> 
> 标签：php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:21:37.000

此错误显示在较新版本的 PHP 中。

有多种方法可以消除错误：

1.  您可以为此使用错误抑制方法
2.  检查变量是否为空或将其设置为 0，例如`choice_spc_port=0`在开始时
3.  Isset 方法也很好用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:10:26.237

用于此，当and为空且未设置`isset`时，它不会给您未定义的索引通知。`$_POST['txtSpace']``$_POST['txtLocation']`

```
if(isset($_POST['txtSpace']))
{
     $choice_spc_port = $_POST["txtSpace"];  
}
if(isset($_POST['txtLocation']))
{  
     $choice_loc = $_POST["txtLocation"];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:15:38.913

执行此操作以获取任何 Post 变量：

```
if(isset($_POST['txtSpace'])){$choice_spc_port = $_POST["txtSpace"];}
if(isset($_POST['txtLocation'])){$choice_loc = $_POST["txtLocation"];} 
```

对你的 SQL 语句：

```
$insert = "INSERT INTO dbForm (db_space_portion, db_animal_location) VALUES ({'$choice_spc_port'}, {'$choice_loc'})"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T10:18:08.103

使用此查询。

```
if(isset($_POST['txtSpace'])) {
    $choice_spc_port = $_POST['txtSpace'];
}
if(isset($_POST['txtLocation'])) {
    $choice_loc = $_POST['txtLocation'];
}

$insert = mysql_query("INSERT INTO dbForm (db_space_portion, db_animal_location) VALUES ('{$choice_spc_port}', '{$choice_loc}')"); 
```

# c# - 并行聚合多个双打

> ID：14601323
> 
> 赞同：1
> 
> 时间：2013-01-30T10:07:42.743
> 
> 标签：c#, parallel-processing

如何并行化聚合多个双精度的循环？

可以将其作为两个或多个`Parallel.For`循环执行，其中对单个双精度求和，但是，在我的情况下，这将需要重复两个变量共有的昂贵函数。

单线程形式的简化示例：

```
static void Main()
{
    double sum1 = 0.0;
    double sum2 = 0.0;
    for (int i = 2; i < 10; i++)
    {
        double result = function1(i);
        sum1 += result;
        sum2 += function2(result);
    }
    Console.WriteLine(sum1 + " " + sum2);
    Console.ReadLine();
}

private static double function1(int x)
{
    return Math.Exp((double)x);
}

private static double function2(double x)
{
    return Math.Pow(x, 2);
} 
```

这里的函数 1 和 2 实际上非常昂贵，因此只能评估一次。

我发现用于聚合一个双精度的代码：

```
 object lockObject = new object();
        double sum = 0.0d;

        Parallel.For(0, 10,
            () => 0.0d,

            (x, loopState, partialResult) =>
            {
               return (double)x / 100.0 + partialResult;
            },

            (localPartialSum) =>
            {
               lock (lockObject)
               {
                 sum += localPartialSum;
               }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:53:40.647

您可以使用`Parallel.For`线程本地数据：

```
object sync = new object();
double sum1 = 0.0;
double sum2 = 0.0;
Parallel.For<Tuple<double, double>>(2, 10,
    () => { return new Tuple<double, int>(0.0, 0.0); },
    (i, pls, state) =>
    {
        double result = function1(i);
        state = new Tuple<double, double>( state.Item1 + result, state.Item2 + function2(result))
        return state;
    },
    state => { lock (sync) { sum1 += state.Item1; sum2 += state.Item2; } }
); 
```

如果您使用包含两个`double`s 而不是 s的可变类`Tuple`，则可以稍微简化代码。

# opencv - Cairo python中有基于svg注释的图像裁剪功能吗？

> ID：14601328
> 
> 赞同：1
> 
> 时间：2013-01-30T10:07:52.027
> 
> 标签：opencv, image-processing, svg, python-2.7, cairo

我有JPG图像和inputsvgdraw，一个用于图像注释的Flash工具（[http://www.mainada.net/inputdraw](http://www.mainada.net/inputdraw)）。

作为 Gimp 或 Picasa，当我裁剪图像并将裁剪的部分另存为新图像时。我需要一个以 svg 路径（代表新图像边界）作为参数的函数，然后在此基础上创建新图像。

svg数据：

```
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 488 325"><g fill="none"   stroke-miterlimit="6" stroke-linecap="round" stroke-linejoin="round"><path d="M 307 97 l 0 -1 l -2 -1 l -10 -2 l -20 -1 l -25 5 l -22 9 l -10 9 l 0 9 l 2 12 l 16 18 l 25 11 l 25 5 l 17 -1 l 6 -4 l 3 -7 l -1 -12 l -6 -16 l -7 -13 l -11 -12 l -11 -14 l -9 -5" opacity="1" stroke="rgb(170,37,34)" stroke-width="5"/></g></svg>. 
```

如何提取并保存在圆形部分图像内的新图像中？有没有处理这个的图书馆？有一种方法可以将这些数据转换为 python 图像库中的函数并裁剪图像？

# php - php 脚本在 360 秒后停止并显示大文件的 500 服务器错误

> ID：14601330
> 
> 赞同：1
> 
> 时间：2013-01-30T10:08:05.070
> 
> 标签：php, mysql

我正在处理 csv 文件上传。它适用于 3MB 文件。但是当我尝试上传 8MB 文件时，它会在 360 秒后停止脚本并显示 500 内部服务器错误。我也更改了 max_execution_time 和 memory_limit 以及所有其他参数。但没有将完整数据导入数据库。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:12:50.167

查看`"post_max_size"`和`"upload_max_size"`在您的 .ini 文件中。您还可能需要通过`"max_input_time"`和延长脚本的执行时间`"max_execution_time"`。

# php方式

```
ini_set('upload_max_filesize', '10M');
ini_set('post_max_size', '10M');
ini_set('max_input_time', 300);
ini_set('max_execution_time', 300); 
```

# .htaccess 方式

```
php_value upload_max_filesize 10M
php_value post_max_size 10M
php_value max_input_time 300
php_value max_execution_time 300 
```

[阅读更多](http://www.sitepoint.com/upload-large-files-in-php/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T10:12:14.253

尝试在循环内设置 max_execution_time 代码

```
ini_set ( 'max_execution_time', WHATEVER_TIMING); 
```

并根据需要设置 WHATEVER_TIMING

我的意思是试试这个

```
 foreach($records as $record ){
       set_time_limit(250);
       // Other Execution code
 } 
```

设置时间限制（250）；每次你的循环将执行记录

可能会解决您的超时问题。

# robotlegs - 我应该在事件名称中包含单词模型、服务、中介吗

> ID：14601332
> 
> 赞同：1
> 
> 时间：2013-01-30T10:08:08.327
> 
> 标签：robotlegs

如果一个事件是由服务分派的，我应该在事件类名中包含“服务”这个词吗？例如`TwitterServiceEvent`。这同样适用于模型和调解员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:32:34.450

在robotlegs 书“Actionscript Developers Guide to Robotlegs”中，他们没有那样使用它：

```
_remoteService.addEventListener(TwitterEvent.OVER_CAPACITY, dispatchOverCapacity); 
```

但是，如果您想要它并且它可以帮助您，那么您可以拥有它，为什么不呢。我使用信号，但是当我命名信号时，我将它们命名为与命令命名相同的不同后缀：

```
ConfigureViewSignal
ConfigureViewCommand 
```

另外，您是否查看了机器人腿的 AS3 Signals 和 SignalCommandMap？ [https://github.com/robertpenner/as3-signals](https://github.com/robertpenner/as3-signals) [https://github.com/robertpenner/robotlegs-extensions-SignalCommandMap](https://github.com/robertpenner/robotlegs-extensions-SignalCommandMap)

# android - 如何在父布局中获取视图 ID？

> ID：14601333
> 
> 赞同：0
> 
> 时间：2013-01-30T10:08:15.757
> 
> 标签：android, android-layout, android-view

如何在父布局中获取视图 ID？我可以通过 id 获取视图，但是如果我可以通过视图获取 id 呢？

更新：我在做什么

我创建并添加到 LinearLayout 一些视图：

```
 LinearLayout ll = new LinearLayout();

// add few View
for (int i=0;i<100;i++){
    MyView mView = new MyView(this);

 // MyView has time field, and at creation time MyView stack ordered by time-field
    mView.setTime(anyTime+i);

 // When I click on mView - opens screen where I can modify time
    mView.setOnClickListener(listener);

 ll.addView(mView)
} 
```

因此，在修改 mView 后，我将 mView 移动到正确的位置，为此我需要知道当前 MyView 的 LinearLayout (ll) 中的索引，上一个和下一个 MyView 的索引

更新 2：也许我需要 List 我将对 MyView 进行排序并重绘所有 LinearLayout

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:13:13.653

**XML**

```
<ImageView
android:id="@+id/image1"
android:layout_height="WRAP_CONTENT"
android:layout_width="FILL_PARENT"
/> 
```

* * *

```
ImageView imageView = new ImageView(this);
String imageName = "image1"// Your ImageView id name
int id = getResources().getIdentifier(imageName, "id", getPackageName()); 
```

[获取标识符说明](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)

希望对你有所帮助！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:16:52.450

在我看来 - 没有 ID 你无法访问视图。你可以去 tag.for 那个在视图中你可以 setTag() 并且你可以 getTag()。在某些情况下我们也可以使用 tag 作为 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:49:47.433

int ViewGroup.indexOfChild(View child) 会帮助我。当我测试所有的决定时，我会写更多。

# java - update-alternatives 中抛出的错误

> ID：14601334
> 
> 赞同：11
> 
> 时间：2013-01-30T10:08:15.863
> 
> 标签：java, linux

我正在尝试为 32 位操作系统安装 jdk。按照以下步骤，

1.  `wget --no-cookies --header "Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com" http://download.oracle.com/otn-pub/java/jdk/6u38-b05/jdk-6u38-linux-i586.bin`

2.  `chmod u+x jdk-6u34-linux-i586.bin`

3.  `./jdk-6u34-linux-i586.bin`

4.  `mkdir -p /usr/lib/jvm /usr/bin/java /usr/bin/javac /usr/bin/javaws`

5.  `mv jdk1.6.0_3.`/usr/lib/jvm/`

6.  `update-alternatives --install "/usr/bin/java" "java" "/usr/lib/jvm/jdk1.6.0_38/bin/java" 1`

7.  `update-alternatives --install "/usr/bin/javac" "javac" "/usr/lib/jvm/jdk1.6.0_38/bin/javac" 1`

8.  `update-alternatives --install "/usr/bin/javaws" "javaws" "/usr/lib/jvm/jre1.6.0_38/bin/javaws" 1`

但是在运行 cmd 6 时，我遇到了错误。任何帮助，将不胜感激。

```
update-alternatives: warning: forcing reinstallation of alternative /usr/lib/jvm/jdk1.6.0_38/bin/java because link group java is broken.
update-alternatives: warning: not replacing /usr/bin/java with a link.
update-alternatives: warning: forcing reinstallation of alternative /usr/lib/jvm/jdk1.6.0_38/bin/javac because link group javac is broken.
update-alternatives: warning: not replacing /usr/bin/javac with a link.
update-alternatives: error: alternative path /usr/lib/jvm/jre1.6.0_38/bin/javaws doesn't exist. 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-30T10:22:57.193

如果您需要在 Ubuntu 中安装 java，您可以尝试使用以下命令，您将在 synaptic 包管理器中获得 oracle-java-installer，单击它并安装它。

```
sudo add-apt-repository ppa:webupd8team/java 
```

否则请尝试以下步骤

```
 $ wget http://download.oracle.com/otn-pub/java/jdk/6u34-b04/jre-6u34-linux-i586.bin
 $ chmod u+x jre-6u34-linux-i586.bin
 $ ./jre-6u34-linux-i586.bin
 $ sudo mkdir -p /usr/lib/jvm
 $ sudo mv jre1.6.0_34 /usr/lib/jvm/
 $ sudo update-alternatives --install "/usr/bin/java" "java" "/usr/lib/jvm/jre1.6.0_34/bin/java" 1
 $ sudo update-alternatives --install "/usr/lib/mozilla/plugins/libjavaplugin.so" "mozilla-javaplugin.so" "/usr/lib/jvm/jre1.6.0_34/lib/i386/libnpjp2.so" 1
 $ sudo update-alternatives --install "/usr/bin/javaws" "javaws" "/usr/lib/jvm/jre1.6.0_34/bin/javaws" 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T10:16:35.573

问题是您在 /usr/bin 中创建了一个名为“java”的文件夹。从 /usr/bin 中删除该文件夹并再次运行该命令。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T10:09:46.750

而不是第 4 步：4。`mkdir -p /usr/lib/jvm /usr/bin/java /usr/bin/javac /usr/bin/javaws`

只需使用

`$mkdir -p /usr/lib/jvm`

并确保将文件移动到 usr/lib/jvm ，以供使用

`$mv -v jre1.6.0_34 /usr/lib/jvm/`

这样您就可以看到详细信息，并在安装后通过以下方式更改 java 和 javaws 的配置：

`$update-alternatives --config java`

类似地从选项中选择，

`$update-alternatives --config javaws`

如果您已经安装了另一个 java，这应该可以工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-07T13:22:40.540

从**/usr/bin**中删除文件夹**java**并重试

# asp.net-mvc - 将资源插入提交值

> ID：14601338
> 
> 赞同：3
> 
> 时间：2013-01-30T10:08:27.233
> 
> 标签：asp.net-mvc, string, localization, interpolation

我想本地化 ASP.NET MVC 应用程序中的提交按钮，但不知道如何将其插入到 value 属性中。

```
<input type="submit" value="Resources.Global.Create" /> 
```

它在表单上打印 Resources.Global.Create，但它应该打印本地化值而不是变量名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T10:10:39.980

您缺少神奇的 Razor 字符 ( `@`)：

```
<input type="submit" value="@Resources.Global.Create" /> 
```

# information-extraction - 从多个网站提取的聚合和重复数据删除信息

> ID：14601346
> 
> 赞同：1
> 
> 时间：2013-01-30T10:08:59.483
> 
> 标签：information-extraction, deduplication

我正在建立一个从多个网站提取的餐厅时间和地址信息数据库。由于同一餐厅的信息可能出现在多个网站中。所以在数据库中我会有一些几乎重复的副本。

由于餐厅的数量很大，比如 100000。然后对于每个新条目，我必须进行 100000^2 的比较，以检查是否已经存在任何名称几乎相似的餐厅信息。所以我问是否有比这更好的有效方法。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:43:01.180

基本上，您正在寻找[记录链接](http://en.wikipedia.org/wiki/Record_linkage)工具。这些工具可以索引记录，然后为每条记录快速定位一小组潜在候选人，然后对这些进行更详细的比较。这避免了 O(n^2) 问题。它们还支持在比较之前清理您的数据，以及更复杂的比较器，如 Levenshtein 和 q-gram。

维基百科上的记录链接页面上曾经有一个工具列表，但它被删除了。如果您想查找它，它仍然存在于版本历史记录中。

我为此编写了自己的工具[Duke](http://code.google.com/p/duke/)，它使用 Lucene 进行索引，并内置了详细的比较器。我已经成功地使用它对 220,000 家酒店进行了重复数据删除。我可以在笔记本电脑上使用四个线程在几分钟内运行重复数据删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:04:11.413

一种方法是构建相似性函数，以便您可以查找一小组现有餐厅来比较您的新餐厅。此查找将使用数据库中的索引并且应该很快。

如何定义相似函数是棘手的部分:) 通常您可以将每条记录转换为一系列标记，在数据库中查找每个标记以找到可能相似的记录。

请参阅这篇[博文](http://blog.scrapinghub.com/2012/07/23/finding-similar-items/)，我写这篇博文是为了描述我构建的一个系统，用于在抓取的数据中查找附近的重复项。这听起来与您想要做的非常相似，并且由于您的用例更小，我认为您的实现应该更简单。

# cuda - 在 GPU 中打印设备中的值而不启动内核

> ID：14601348
> 
> 赞同：1
> 
> 时间：2013-01-30T10:09:02.337
> 
> 标签：cuda

我已将数据从 CPU 复制到 GPU：

```
 cudaMemcpy(d_signal, h_signal, sizeof(int) *1024, cudaMemcpyHostToDevice); 
```

现在我想检查设备内存中是否到达了正确的数据。是否可以在不启动内核且不显式 GPU-CPU 复制的情况下做到这一点？如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:39:23.723

如何将数据从设备复制回主机然后打印出来？

```
cudaMemcpy(h_signal_out, d_signal, sizeof(int) *1024, cudaMemcpyDeviceToHost);

copy(d_signal_out, d_signal_out+1024, std::ostream_iterator<int>(std::cout," "));
std::cout<<std::endl; 
```

# mysql - 关系型数据库 mysql

> ID：14601350
> 
> 赞同：1
> 
> 时间：2013-01-30T10:09:07.577
> 
> 标签：mysql

我在加入两张桌子时遇到了问题。这些表是 spelling_answer_key ，其中包含拼写的答案键及其相应的问题，另一个是 user_spell_answers ，其中存储了所有用户的答案。现在我想加入这两个表，但无法正确处理。

第一个表 user_spell_answers 看起来像这样

```
+--------+-------------+------+-----+---------+----------------+
| Field  | Type        | Null | Key | Default | Extra          |
+--------+-------------+------+-----+---------+----------------+
| id     | int(11)     | NO   | PRI | NULL    | auto_increment |
| userid | int(11)     | NO   | MUL |         |                |
| qid    | int(11)     | NO   | MUL |         |                |
| ans    | varchar(20) | YES  |     | NULL    |                |
+--------+-------------+------+-----+---------+----------------+ 
```

第二个表 spelling_answer_key 看起来像这样

```
+-----------------+------------+------+-----+---------+----------------+
| Field           | Type       | Null | Key | Default | Extra          |
+-----------------+------------+------+-----+---------+----------------+
| spell_ans_keyid | int(11)    | NO   | PRI | NULL    | auto_increment |
| spell_qid       | int(11)    | YES  | MUL | NULL    |                |
| answer_key      | varchar(1) | NO   |     |         |                |
+-----------------+------------+------+-----+---------+----------------+ 
```

现在我想从 user_spell_answers 和 spelling_answer_key 中选择 qid、ans 和 userid 我想根据用户在指定问题上回答的正确答案来选择 spell_qid 和 answer_key。

请帮忙

# javascript - 传递价值 和期权价值

> ID：14601355
> 
> 赞同：0
> 
> 时间：2013-01-30T10:09:33.120
> 
> 标签：javascript, html

我早些时候寻求帮助并让它正常工作，我非常感谢。但现在我想做一些更深入的。

我的问题是，我有一个`<li>`用作下拉列表的下拉列表，稍后会打开一个包含选择的主体，以及我将 url 值放入的选项值。

但我宁愿看看`<li>`我首先选择哪个，然后根据我使用的选项值增加更多价值，这样我就得到了一个完整的 url。

示例： `<li>`设置`http://localhost/someplace/api/stop/` 和选项值设置 ~/api/stop/all?format=excel 因为我选择了 excel 格式作为选项。

然后我有一个带有按钮的js

```
$(".get-data").on("click",function() {
  var location = $('#dd-files').val();
  if(location) {
    window.open(location);
  }
}); 
```

但是我如何将`<li>`值和选项值传递给这个。

感谢您的任何指点！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:22:50.717

您可以将 onclick 事件添加到列表项，然后使用 $(this) 获取文本或获取名称或 ID 或任何您想要的。

```
$('#dd li').click(function(){
alert($(this).text());
}); 
```

[http://jsfiddle.net/32ZEx/](http://jsfiddle.net/32ZEx/)

这对你有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:14:11.777

U 可以得到`li`如下值：

HTML：

```
<li class="selected">Value</li> 
```

JS：

```
$("li.selected").text(); // gives u the text inside li 
```

# jquery - 使用 jQuery 修改 JSON 对象

> ID：14601358
> 
> 赞同：1
> 
> 时间：2013-01-30T10:09:39.873
> 
> 标签：jquery, json, parsing

我的 API 使用以下 JSON 结构响应我的调用：

```
[
    {
        "order": {
            "total": "240.0",
            "completed_at": 1358432545000
        }
    },
    {
        "order": {
            "total": "720.0",
            "completed_at": 1359474090000
        }
    }
] 
```

但是，我希望这个 JSON 的结构是这样的，以便在 Flot Graphs 中使用我的数据：

```
 {
        "label":"Order",
        "dataBar":[
            [
                1358432545000,
                240.0
            ],
            [
                1325635200000 ,
                720.0
            ]
        ]
    } 
```

我已经尝试过以下代码，但它返回所有以逗号分隔的数据，没有 '[' 和 ']'

```
var flotData = $.map(API_Response, function(i){ return [i.order.completed_at, parseInt(i.order.total)] }); 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T10:11:37.603

你可以这样做：

```
var data2 = {
    label: 'Order',
    dataBar: data.map(function(v){return [
         v.order.completed_at,
         parseFloat(v.order.total)
    ]})
}; 
```

[演示](http://jsbin.com/ivaseh/1)（打开控制台查看data2）

但请注意，没有什么可以称为“JSON 结构”或“JSON 对象”。

您拥有的是一个纯 JavaScript 对象，即使它是以 JSON 编码发送到您的浏览器。

* * *

现在假设您不知道对象的属性被调用`order`，那么您可以使用

```
var label;
for (var k in data[0]) {
   label = k[0].toUpperCase()+k.slice(1);
   break;
}
var data2 = {
    label: label,
    dataBar: data.map(function(v){return [
         v[k].completed_at,
         parseFloat(v[k].total)
    ]})
}; 
```

（如果不支持 IE 8 会更干净，因为我本来可以使用`Object.keys`.）

# sql - 一个月中超过 24/28 天时的 SQL 日期

> ID：14601362
> 
> 赞同：0
> 
> 时间：2013-01-30T10:10:01.867
> 
> 标签：sql, vertica

我有一列，用户可以在其中插入当月的天数。让我们称之为 DAY_OF_PERIOD 列，可以在其中插入数字 1-31。

例如，我想知道当插入数字 31 时会发生什么。但是这个月只有28天。28日开始查询时，数字29、30和31仍然需要出现在选择中（如果是一个月的最后一天）

当每个月的天数相同时，这将起作用：p DAY_OF_PERIOD=dayofmonth(sysdate)

有人对此有优雅的解决方案吗？

最好的问候

编辑：添加了更多信息

用户首先插入频率标志：每天、每周、每月。然后基于第一个标志 day_of_period 选项意味着不同的东西。1-7（每周）或 1-31（每月）。还有一些其他的调度信息。并且基于该信息，表格循环，例如，每小时。因此，当用户在其中输入 31（带有每月标志）时，我必须在每个月和第 31 天将其包含在查询中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:21:09.830

使用日期选择器插入日期。

[链接到可在 asp 和 html 中使用的 Javascript datepicker](http://www.codeproject.com/Articles/11941/JavaScript-DatePicker)

你也可以使用 JQuery DatePicker。将日期头痛传递给日期组件。这始终是最好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:14:01.357

如果您知道用户输入日期间的月/年，您可以使用该`lastday()`功能来确定它是否有效。

```
SELECT day(last_day('2013-01-20') 
```

将返回 31。

```
SELECT day(last_day('2013-02-20') 
```

将返回 28。

您可以在插入数据验证部分中使用上述内容在提交之前确认输入。

# php - PHP在特定字符处剪切字符串

> ID：14601364
> 
> 赞同：12
> 
> 时间：2013-01-30T10:10:04.300
> 
> 标签：php, character

```
$string = "aaa, bbb, ccc, ddd, eee, fff"; 
```

我想在第三个之后剪切字符串，所以我想从字符串中获取输出：

```
aaa, bbb, ccc 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-30T10:11:31.257

您可以为此使用`strpos()`和。`substr()`看

*   [http://php.net/strpos](http://php.net/strpos)
*   [http://php.net/substr](http://php.net/substr)

    `$string = substr($string, 0, strpos($string, ', ddd'));`

使用爆炸的替代方法：

```
$arr = explode(',', $string);
$string = implode(',',array_slice($arr, 0, 3); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-30T10:15:36.683

```
$x = explode(',', $string);
$result = "$x[0], $x[1], $x[2]"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T10:20:48.873

如果您不确切知道要计算的字符数，我会建议`Implode` `Explode`这样：

```
$string = "aaa, bbb, ccc, ddd, eee, fff";
$arr = explode(',' , $string);
$out = array();
for($i = 0; $i < 3; $i++)
{
  $out[] = $arr[$i];
}
$string2 = implode(',', $out);
echo $string2; // output is: aaa, bbb, ccc 
```

# 更新

这是一个[phpfiddle](http://phpfiddle.org/main/code/ueq-gty)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-30T10:19:37.757

如果它特定于直到第三个字符串而不是尝试，

```
$output = implode(array_slice(explode(",",$string), 0, 3),","); 
```

[演示](http://codepad.org/BRjN6X4y)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-30T10:22:46.867

```
$string = "aaa, bbb, ccc, ddd, eee, fff";
$arr = explode(", ", $string);
$arr = array_splice($arr, 0, 3);
$string = implode($arr, ", ");

echo $string; // = "aaa, bbb, ccc" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-30T10:15:41.070

您可以使用explode() 和implode() PHP 函数来获取它。

# jquery - jqgrid 图像单元格自定义格式化程序

> ID：14601366
> 
> 赞同：0
> 
> 时间：2013-01-30T10:10:07.330
> 
> 标签：jquery, jqgrid

我有一个问题，我需要在一行的每个单元格中显示带有一些细节的图像。为了实现这一点，我对单元格使用了自定义格式化程序。

![在此处输入图像描述](../Images/7fb5f0076568148a758d81b9f5ff555d.png)

单元格值将提供图像源。但是如何以自定义格式化程序方法获取信息**名称**和**电话**。

网格的客户端代码。

```
var functionsMapping = {
        "abc": function (cellValue, opts, rowObject) {
            var tbl = "<table><tr><td><a href='/home1/About'><img src='" + cellValue + "' alt='a' /></a></td></tr>";
            tbl += "<table><tr><td>Name :aaa</td></tr>";
            tbl += "<table><tr><td>Phone :8888</td></tr></table>";
            return tbl;
        }
    };

    $(document).ready(function () {
        $.ajax({
            type: "POST",
            async: true,
            url: "/home1/GetGridModel",

            success: function (data) {
                colMM = data.colmodel;
                ColNN = data.colN;
                for (i = 0; i < colMM.length; i++) {
                    cm = colMM[i];
                    if (cm.hasOwnProperty("formatter") && functionsMapping.hasOwnProperty(cm.formatter)) {
                        cm.formatter = functionsMapping[cm.formatter];
                    }
                }
                jQuery("#mygrid").jqGrid({
                    url: '/home1/GetImageGridData',
                    datatype: "json",
                    mtype: "POST",
                    colNames: ColNN,
                    colModel: colMM,
                    rowNum: 4,
                    width: 700,
                    height: '300',
                    pager: $("#pager")
                });
            }
        });
    }); 
```

控制器代码：

```
[HttpPost]
        public JsonResult GetImageGridData(FormCollection frmcl)
        {
            int icol = 3;

            // it gives array of data
            object[] entity = this.FetchData();

            string[] colnames = new string[icol];

            for (int icount = 1, ilength = icol; icount <= ilength; icount++)
            {
                colnames[icount - 1] = "Col" + icount.ToString();
            }

            var eee = this.ToExpandoObject();
            object[] data1 = null;
            data1 = (from s in eee
                     select new
                     {
                         id = 1,
                         cell = GetColumns(s,colnames)
                     }).ToArray();

            var jsonData = new
            {
                total = data1.Count() / 4,
                page = 1,
                records = data1.Count(),
                rows = data1,
                userData = "aaa"
            };
            return Json(jsonData);
        }

        private object[] GetColumns(object s, string[] colnames)
        {
            object[] row = new object[colnames.Length];
            IDictionary<string, object> propertyValues = (IDictionary<string, object>)s;
            int i = 0;
            foreach (string col in colnames)
            {
                row[i++] = propertyValues[col].ToString();
            }
            return row;
        }
        public List<dynamic> ToExpandoObject()
        {
            var result = new List<dynamic>();

            int icol = 3;
            object[] entity = this.FetchData();
            string imagefieldname = "ImageSrc1";
            string[] colnames = new string[icol];

            for (int irow = 0; irow < entity.Count(); irow++)
            {
                dynamic e = new ExpandoObject();
                var d = e as IDictionary<string, object>;
                for (int collength = 0; collength < icol; collength++)
                {
                    d.Add("Col" + (collength+1).ToString() , entity[irow].GetType().GetProperty(imagefieldname).GetValue(entity[irow], null));
                }
                result.Add(e);
            }
            return result;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:46:08.527

您可以包含任何正确的 HTML 数据片段作为自定义格式化程序的输出。您当前使用许多开放标签`<table>`，而没有`</table>`. 它将破坏 jqGrid。您可以示例使用`<br/>`and`<hr/>`在数据片段中完全没有，或者您可以使用必须通过从每个字符串中删除并附加数据`<tables>`来修复返回的字符串。`<table>``</table>`

**更新**：您发布的代码仍然会生成错误的 HTML 片段。该函数`functionsMapping.abc`返回包含**三个** `<table>`且仅**一个** `</table>`的字符串。

此外，您的服务器代码非常错误：

*   您从服务器返回的数据包含**所有行都****相同`id = 1`**的行。的值`id`必须是唯一的，因此对于不同的行它必须是不同的。
*   您的服务器部分放置`userData`属性的代码而不是`userdata`.
*   属性的值`userData`应该是*对象*，而不仅仅是一个字符串。
*   您应该添加`gridview: true`到 jqGrid 列表中并使用`pager: "#pager"`而不是以`pager: $("#pager")`获得更好的性能。
*   `rowNum: 4`不指定任何的用法`rowList`似乎我不好。

如果您想为每一行发送一些自定义信息，您可以将所有信息按 id 放置在`userdata`对象内。例如，如果您发布带有 ids 的行，`"i10"`那么可能就像`"i20"``"i30"``userdata`

```
var jsonData = new {
        page = 1,
        ...
        userdata = new {
            i10: { ... }, // custom data for the row i10
            i20: { ... }, // custom data for the row i20
            i30: { ... }  // custom data for the row i30
        }
    }; 
```

`userdata`当然，您可以轻松地为动态对象生成值，而不是像上面的示例中那样静态。我只想向你解释这个想法。

来自`userdata`您的数据将在`jqGrid`大多数 as的回调中看到`$(this).jqGrid("getGridParam", "userData")`。

# java - 按级别分隔 logback 日志

> ID：14601369
> 
> 赞同：1
> 
> 时间：2013-01-30T10:10:16.050
> 
> 标签：java, slf4j, logback

是否可以单独记录每个级别，以便使用 Logback 获得 DEBUG.log、WARN.log、INFO.log...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:22:03.433

无需编写新过滤器， [LevelFilter](http://logback.qos.ch/manual/filters.html)将很快适合您的情况：

```
 <configuration>
          <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
            <filter class="ch.qos.logback.classic.filter.LevelFilter">
              <level>INFO</level>
              <onMatch>ACCEPT</onMatch>
              <onMismatch>DENY</onMismatch>
            </filter>
            <encoder>
              <pattern>
                %-4relative [%thread] %-5level %logger{30} - %msg%n
              </pattern>
            </encoder>
          </appender>
          <root level="DEBUG">
            <appender-ref ref="CONSOLE" />
          </root>
        </configuration> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T10:25:44.920

您可以编写一个[过滤器](http://logback.qos.ch/manual/filters.html)，例如

```
import ch.qos.logback.classic.Level;
import ch.qos.logback.classic.spi.ILoggingEvent;
import ch.qos.logback.core.filter.Filter;
import ch.qos.logback.core.spi.FilterReply;

public class WarnFilter extends Filter<ILoggingEvent> {

    @Override
    public FilterReply decide(ILoggingEvent event) {
        if (Level.DEBUG.equals(event.getLevel())) {
            return FilterReply.ACCEPT;
        } else {
            return FilterReply.DENY;
        }
    }

} 
```

然后使用过滤器为其配置一个附加程序

```
<appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <filter class="logback.WarnFilter" />
    <encoder>
        <pattern>%date{yyyy-MM-dd HH:mm:ss.SSS} [%t] %p %c - %m [%class %M %L] %ex{full} %n</pattern>
    </encoder>
</appender> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:40:45.893

像这样配置 log4j.properties

```
log4j.rootLogger=InfoAppender, DebugAppender
# setup Info
log4j.appender.InfoAppender=org.apache.log4j.RollingFileAppender
log4j.appender.InfoAppender.Threshold=INFO
log4j.appender.InfoAppender.File=quiet.log
...

# setup debug
log4j.appender.DebugAppender=org.apache.log4j.RollingFileAppender
log4j.appender.DebugAppender.Threshold=DEBUG
log4j.appender.DebugAppender.File=loud.log 
```

# php - Yii MANY_MANY 附加连接条件

> ID：14601370
> 
> 赞同：0
> 
> 时间：2013-01-30T10:10:17.120
> 
> 标签：php, yii, many-to-many

关系：

```
'users' => array(self::MANY_MANY, 'Users', 'comments_views(comment_id, user_id)', 'together' => true), 
```

SQL：

```
LEFT OUTER JOIN "comments_views" "users_users"
ON (
       "t"."id"="users_users"."comment_id"
)
LEFT OUTER JOIN "users" "users"
ON (
       "users"."id"="users_users"."user_id"
) 
```

如何修改关系以获取此 sql：

```
LEFT OUTER JOIN "comments_views" "users_users"
ON (
       "t"."id"="users_users"."comment_id"
   AND "users_users"."user_id" = <param>
)
LEFT OUTER JOIN "users" "users"
ON (
       "users"."id"="users_users"."user_id"
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:06:22.823

你应该使用`on`not `condition`。

```
'users' => array(
              self::MANY_MANY, 
              'Users', 
              'comments_views(comment_id, user_id)', 
              'together' => true
           ), 
```

变成

```
 'users' => array(
              self::MANY_MANY,
              'Users',
              'comments_views(comment_id, user_id)',
              'together' => true,
              'on'=>'users_users.user_id=:user_id',
              'params'=>array(':user_id' => $user_id)‌,
           ), 
```

理想情况下，`users_users`应替换为关系的名称。

# regex - POWERSHELL：正则表达式查找和替换

> ID：14601371
> 
> 赞同：0
> 
> 时间：2013-01-30T10:10:20.440
> 
> 标签：regex, powershell

我想使用正则表达式搜索和替换部分 UserObject 路径。

如果您在窗口中查询本地组中的用户，它将返回成员，如下例所示。本地用户显示为与域相关的前缀，我想找到此域前缀并将其从本地用户路径中删除。

```
Return Value:

\\MyDomain\PCTest\John Doe   #(Local User)
\\MyDomain\Julie Doe         #(Domain User)

After Formating: (how can i do this?)

\\PCTest\John Doe             #(Local User)
\\MyDomain\Julie Doe          #(Domain User) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:53:44.073

如果路径包含两个以上的元素，这将删除第一个元素：

```
'\\MyDomain\PCTest\John Doe','\\MyDomain\Julie Doe' | Foreach-Object{

    if( ($items = $_.Split('\',[System.StringSplitOptions]::RemoveEmptyEntries)).Count -gt 2)
    {
        '\\'+ ($items[1..$items.count] -join '\')

    }
    else
    {
        $_
    }
}

\\PCTest\John Doe
\\MyDomain\Julie Doe 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:17:53.457

假设您的值存储在 c:\temp\users.txt ：

```
gc C:\temp\users.txt |%{if ($_ -match "local"){$_.replace("MyDomain\","")}} 
```

编辑 ：

```
$slices="\\MyDomain\PCTest\John Doe".split('\')
if($slices.Count -eq 5){wh "\\$($slices[3])\$($slices[4])"} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:07:25.750

```
"\\MyDomain\PCTest\John Doe", "\\MyDomain\Julie Doe" | % {
  $_ -replace '\\MyDomain(\\.*\\)', '$1'
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:00:53.343

另一种可能：

```
'\\MyDomain\PCTest\John Doe','\\MyDomain\Julie Doe' |
ForEach-Object {
'\\{0}\{1}' -f $_.split('\')[-2,-1]
} 
```

# bash - 用于用户输入的 Bash 包装脚本提示

> ID：14601376
> 
> 赞同：0
> 
> 时间：2013-01-30T10:10:41.413
> 
> 标签：bash

我有一个内部调用 Ruby 脚本的 bash 脚本，根据情况有时 Ruby 脚本会提示用户选择；我怎样才能做到这一点？

主 Bash 脚本：

```
#!/usr/bash  
for host_name in `./myruby.rb -a xxx -b xxx`    
do  
    echo -e "$host_name"
done 
```

包装 myruby.rb

```
#!/usr/bin/ruby  
.....  
......   
puts "enter your selection ?"  
user_selection = $stdin.gets 
```

如果我直接运行 Ruby，它可以正常工作，但是当我从 bash 运行它时，它不会提示用户输入；而是挂着。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:36:26.597

ruby 脚本从标准输入读取，因此即使从 bash 调用，您也需要在标准输入上提供一些内容。你可以这样做：

```
$(rubyscript <<< "selection") 
```

$() 构造与反引号相同 <<< 提供字符串“选择”作为 ruby​​script 标准输入的输入。

或者您可以在 bash 脚本“挂起”时自己输入答案

# mysql - 问mysql数据库设计

> ID：14601378
> 
> 赞同：0
> 
> 时间：2013-01-30T10:10:56.270
> 
> 标签：mysql, database

我是 mysql 的新手。我想问一下数据库设计，我会附上我的设计（对不起，我已经阻止发布图片）。所以我会输入数据库。你能告诉我哪个更好，以及原因..或者这种数据库有更好的设计吗？？

第一个设计：

```
tbl_member:
- id
- name

tbl_member_parent:
- id
- id_member
- parents_name

tbl_member_sibling:
- id
- id_member
- sibling_name 
```

* * *

或第二种设计：

```
tbl_member:
- id
- name

tbl_relation_type:
- id
- relation:"parent","sibling" 

tbl_member_relation:
- id
- id_member
- id_relation_type
- name_value 
```

* * *

也许接下来，我会在 relative_type 中添加 (10-20) 行（如朋友、邻居）。

在我看来，我应该使用第二个，但我不太确定.. 哈哈

对不起，如果我的英语不好..

多谢..

* * *

@inhan
ic2 .. 是的，我也这么认为..
这是我的迷你数据库设计..

原来的：

> 性别表
> - id INT auto_increment PK
> - 性别 varchar：“男性”、“女性”
> 
> 状态表：
> - id INT auto_increment PK
> - 状态 varchar :"active","notActive","problem"
> 
> 权限表：
> - id INT 自动递增 PK
> - 权限 varchar:"manager","moderator","member"
> 
> 国家表：
> - id INT auto_increment PK
> - 国家 varchar
> 
> city table:
> - id INT auto_increment PK
> - city varchar
> - id_country INT, FK(to country table.id)
> 
> 作业表：
> - id INT auto_increment PK
> - 作业 varchar
> 
> 成员表：
> - id INT auto_increment PK
> - member_name varchar
> - 出生日期
> - id_sex INT, FK（到 sex table.id）
> - id_status INT,FK（到 status table.id）
> - id_privilige INT, FK（到 privilege table.id）
> - address varchar
> - id_city INT, FK（到city table.id）

因为，人们可以有多个昵称、兄弟姐妹、朋友、工作、国籍等

> memberJob 表：
> - id INT auto_increment PK
> - id_member INT，FK（到成员 table.id）
> - id_job INT，FK（到 job table.id）
> 
> memberNationality 表：
> - id INT auto_increment PK
> - id_member INT, FK（到 member table.id）
> - id_country INT, FK（到 country table.id）
> 
> 然后制作 memberNickname 表；memberSiblings 表；memberFriends 表等

我想更改 memberJob 的表格设计；成员国籍；成员兄弟姐妹；会员朋友

* * *

我想这样做：

> 关系表
> - id INT auto_increment PK
> - 关系类型 varchar : "siblings", "freinds", "job", "nationality",
> 
> memberDetail
> - id INT auto_increment PK
> - id_member INT, FK (到成员 table.id)
> - id_relation INT, FK (到关系 table.id)
> - id_value INT, FK (如果 id_relation: 兄弟和朋友然后 id_value FK 到成员 table.id ; 如果 id_relation:job 那么 id_value FK 到 job table.id; 如果 id_relation:nationality 然后 id_value FK 到 country table.id)
> 
> memberNickname
> - id INT PK auto_increment
> - id_member INT FK（到成员 table.id）
> - 昵称 varchar

这有什么问题吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:22:54.373

`members`具有以下列的单个表就可以了。

*   `id`INT auto_increment PK
*   `name`
*   `parent_id`INT 默认 NULL, FK (to `id`)

因此，当您查询时，您需要做的就是使用同一张表进行连接。那些没有`parent_id`将是最高级别的成员，而其他人将是孩子。要找到兄弟姐妹，您需要做的就是找到指向同一个父母的孩子。

**[编辑 1]**

如果您想拥有其他类型的关系，那么您可以创建 2 个其他表并忽略`parent_id`上表中的列。

`relationshipTypes`桌子

*   `id`INT auto_increment PK
*   `rel_name`

和`relationships`表：

*   `id`智力PK
*   `user_id`INT，FK（到`members.id`）
*   `rel_type_id`INT，FK（到`relationshipTypes.id`）

因此，您可以从中选择用户`members`，然后在 中查找所有匹配的记录`relationships`，将其加入，`relationshipTypes`以便您拥有所有信息。

**[对OP的评论]**

以下言论是我个人的想法。

1.  您的`sex`, `status`,`privilege`表是不必要的，因为每个成员只能有 1 个性别（性别）、1 个身份和 1 个特权，所有这些都可以`ENUM`在表中枚举（从技术上讲）`member`。
2.  另外，我会忘记多个国籍并让用户选择 1 个国籍。所以这些数据也可以移动到`member`表中。
3.  我将再次将`city`数据保留在表中（作为 VARCHAR），同时为to表`member`保留 FK 。此信息的机会可能很大，因此看起来不可行。对于您的系统，如果您想专注于特定国家（目标市场），那么您可以有一个包含该国家城市列表的枚举列，加上一个“其他”选项并为该“其他”城市创建一个附加列，可以是 datatype 。`country``country``VARCHAR`
4.  处理工作由您决定。我不知道您希望您的视觉形式是什么样的。

# mysql - 数据库：如果任何行中的字段 X 具有值 Y，则排除“分组依据”组

> ID：14601379
> 
> 赞同：4
> 
> 时间：2013-01-30T10:11:00.427
> 
> 标签：mysql, group-by, notin

我正在为此使用 MySQL。

（我正在剥离不相关的连接以保持更清晰）

我正在尝试选择公司的地址，按 company_id 分组，但如果整个用户在特定国家/地区有任何地址（ID 242），则排除整个用户

所以我尝试的第一个查询是：

```
SELECT c.company_id
FROM companies c
NATURAL JOIN addresses a
WHERE a.country_id != 15
GROUP BY c.company_id 
```

据我了解，这首先进行选择，然后排除 country_id 为 15 的行，然后返回其余行的 company_id，这些行是不同的，因为它们已被分组。

因此，这将返回任何在 15 国以外拥有至少一个地址的公司。我需要排除在该国家/地区拥有地址的任何公司。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:29:48.267

```
SELECT c.company_id
FROM companies c
NATURAL JOIN addresses a
WHERE NOT EXISTS 
   (SELECT * FROM addresses a1 
    WHERE c.company_id = a1.company_id AND a1.country_id = 15)
GROUP BY c.company_id 
```

或者，您可以使用另一个联接而不是存在子查询。您可以使用它获得更好的性能，因为子查询只解析一次。

```
SELECT c2.company_id
FROM (SELECT c.company_id
    FROM companies c
    NATURAL JOIN addresses a
    GROUP BY c.company_id) AS c2
LEFT JOIN addresses a2
ON a2.company_id = c2.company_id AND a2.country_id = 15
WHERE a2.company_id IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:13:15.150

```
SELECT
  c.company_id
FROM
  companies c
  LEFT JOIN addresses a
  on c.company_id = a.company_id and a.country_id=15
WHERE a.country_id is null
GROUP BY c.company_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:13:29.547

试试这个：

```
SELECT c.company_id
FROM companies c
    LEFT JOIN addresses a
        ON c.AddressId = a.Id
WHERE a.country_id != 15
   OR a.country_id IS NULL
GROUP BY c.company_id 
```

# c++ - 这个 C++ [out] 参数是指向枚举的指针，还是只是一个值？

> ID：14601382
> 
> 赞同：0
> 
> 时间：2013-01-30T10:11:02.357
> 
> 标签：c++, enums, directshow, directshow.net

目前我正在使用[DirectShow.NET](http://directshownet.sourceforge.net/)，这是 Microsoft 的 DirectShow (C++) 的非官方 .NET“端口”。

IAMAnalogVideoDecoder和[IAMTVTuner](http://msdn.microsoft.com/en-us/library/windows/desktop/dd389102(v=vs.85).aspx)[都](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375974(v=vs.85).aspx)声明了方法`get_AvailableVideoFormats`。这是官方文档中定义该方法的方式：

```
HRESULT get_AvailableTVFormats(
  [out]  long *lAnalogVideoStandard
); 
```

我不清楚这个参数是指向单个的指针`AnalogVideoStandard`还是枚举。不幸的是，我对 C++ 缺乏经验，无法完全理解文档。由于方法名称，我希望它是一个枚举，但它是吗？

我问这个的原因是因为在.NET 库中，这个参数不是枚举，只是一个值。我觉得这很奇怪，因为我希望在这里获得多种“可用的视频格式”。

* * *

顺便说一句，`AnalogVideoStandard`是一个枚举。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:22:05.910

> 我不清楚这个参数是指向单个 AnalogVideoStandard 的指针还是枚举。

它既不是¹：

> 指向从 AnalogVideoStandard 枚举接收零个或多个标志的按位或的变量的指针。

它是一个指向代表零个或多个`AnalogVideoStandard`s 的值的指针。

[这个答案](https://stackoverflow.com/questions/1448396/how-to-use-enums-as-flags-in-c)应该解释其余的。您应该能够[将此答案](https://stackoverflow.com/questions/8447/enum-flags-attribute)应用于您的 .NET 代码。

¹从技术上讲，它可能是C# 中*的*枚举值，因为`enum`类型可以`FlagsAttribute`应用于它们，但在 C++ 中没有等价物，您只是`|`将值放在一起，没有特别的宣传。

# php - 单击按钮时未加载 Extjs-Store

> ID：14601384
> 
> 赞同：0
> 
> 时间：2013-01-30T10:11:12.190
> 
> 标签：php, extjs4

我需要进行搜索操作。我添加了一个用于搜索的文本字段和按钮。我通过将搜索条目从文本框中获取到 extraParam 来做到这一点。当我没有在网格中搜索任何必须显示所有内容的内容时。现在我的问题是网格不加载数据我的 js 看起来像这样

```
Ext.require([
    'Ext.grid.*',
    'Ext.data.*',
    'Ext.form.*',
    'Ext.util.*',

    ]); 

Ext.define('MyModel', {
    extend: 'Ext.data.Model',
    fields: [{
        name: 'id_job',
        mapping: 'id_job',
        type: 'int'
    }, {
        name: 'job_name',
        mapping: 'job_name',
        type: 'string'
    }, {
        name: 'error_message',
        mapping: 'error_message',
        type: 'string'
    },
    {
        name: 'status',
        mapping: 'status',
        type: 'string'
    },
    {
        name: 'starttime',
        mapping: 'starttime',
        type: 'string'
    },
    {
        name: 'endtime',
        mapping: 'endtime',
        type: 'string'
    },
      {
        name: 'last_updated_time',
        mapping: 'last_updated_time',
        type: 'string'
    },

]
});
Ext.onReady(function(){
    // Ext.QuickTips.init();
    var store = new Ext.data.JsonStore({
        model: MyModel,

        proxy: new Ext.data.HttpProxy({
            url: 'job_audit.php',
            // method: 'GET',
            type: 'ajax',
            extraParams:{
             JobName:'test'
           },
        reader:new Ext.data.JsonReader({ 
            type:'json',
            root:'jobdisplay',
            totalProperty:'Count'

        })
   }) , 
        autoLoad:false,
        idProperty: 'id'
    });
  var formPanel=Ext.create('Ext.form.Panel', {
    title: 'Search',
    width:300,
    bodyPadding: 10,
     submitOnAction: true,
      activeItem: 1,
   //renderTo: Ext.getBody(),
    items: [{
        xtype: 'textfield',
        name: 'JobName',
        id:'JobName',
        fieldLabel: 'JobName',
        allowBlank: false,
         anchor:'95%'// requires a non-empty value
    }, {
        xtype: 'button',
        name: 'search',
        fieldLabel: 'Search',
         text: 'Search',
        width:100,
       listeners:{
           click:function(){
            //var textValue=formPanel.items.get('JobName').getValue();
            var text=Ext.getCmp('JobName').getValue();
               store.proxy.extraParams={JobName : text};

          store.load();
        }
       }
    }]

});
formPanel.render('paging-grid');
    // baseParams:{task: "LISTING"}

    var grid=new Ext.grid.GridPanel({

        store: store,

        columns: [

        {
            header: 'id_job', 
            width: 50, 
            hidden:true,
             filterable:true,
            sortable: true, 
            dataIndex: 'id_job'

        },

        {
            header: 'JobName', 
            width: 150, 
            sortable: true, 
            dataIndex: 'job_name',
             renderer:function(myValue, myDontKnow, myRecord) {
                           var id=myRecord.get('id_job');
                            return '<a href=index.php?show=JobErrors&id=' + id +'>' + myValue + '</a> ';
                        }

        },
          {
            header: 'Start Time', 
            width: 150, 
            sortable: true, 
            dataIndex: 'starttime'
        },
         {
            header: 'End Time', 
            width: 150, 
            sortable: true, 
            dataIndex: 'endtime'
        },
         {
            header: 'tatus', 
            width: 200, 
            sortable: true, 
            dataIndex: 'status'
        },
        {
            header: 'Error_Message', 
            width: 150, 
            sortable: true, 
            dataIndex: 'error_message'
        },
        {
            header: 'Last_Updated_Time', 
            width: 150, 
            sortable: true, 
            dataIndex: 'last_updated_time'
        },

        ],
          autoExpandable:true,
        stripeRows: true,

        height:600,

        width:950,

        title:'JobDetails',

        bbar: new Ext.PagingToolbar({

          pageSize:25,

            store: store,

            displayInfo: true,

            displayMsg: 'Displaying topics {0} - {1} of {2}',

            emptyMsg: "No topics to display"

        })

    });
  store.load();

    grid.render('paging-grid');

}); 
```

我在 php 端获取参数值，也检索记录，但没有加载到网格中。我想正确加载存储以便加载

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:02:02.203

我解决了这个问题。Json 编码了所有的“回声”（在 php 中）。我已经给出了一些回声用于测试目的。我已经删除了所有，我的问题得到了解决。

# java - jsf成功打开对话框

> ID：14601386
> 
> 赞同：0
> 
> 时间：2013-01-30T10:11:13.533
> 
> 标签：java, jsf, primefaces

我的 JSF 页面中有一个用于保存项目的按钮。

```
<p:commandButton id="saveB" actionListener="#{projectsController.create}" value="Projeyi Kaydet" icon="ui-icon-check"  onsuccess="infDialog.show()" onerror="infDialog.hide()"/> 
```

当我单击它时，它会保存项目并打开对话框并说它已保存。这是我的对话框：

```
<p:dialog id="msgDialog" header="Bilgi" widgetVar="infDialog" resizable="true" showEffect="explode" hideEffect="explode" appendToBody="true" modal="true" closable="false">
    <h:form>
        <h:panelGrid id="display" columns="2" cellpadding="10" style="margin:0 auto;">  
            <f:facet name="header">
                <center>
                    <h:outputText value="Proje kaydedildi." />
                </center>
            </f:facet>

            <h:outputText value="Projeye döküman eklemek için aşağıdaki paneli kullanabilirsiniz." />

            <f:facet name="footer">
                <center>
                    <h:form enctype="multipart/form-data">  

                        <p:fileUpload fileUploadListener="#{fileUploader.handleFileUpload}"  
                                      mode="advanced"  
                                      update="messages"  
                                      auto="false"  
                                      sizeLimit="100000000"  
                                      multiple="true"
                                      allowTypes="/(\.|\/)(gif|jpe?g|png|pdf|avi|mpeg|mp4)$/"/>  

                        <p:growl id="messages" showDetail="true"/>  

                    </h:form>
                </center>
            </f:facet>
            <br />
            <br />
            <center>
                <p:commandButton value="Proje Eklemeyi Tamamla" onclick="window.location.replace(window.location.href);"/>
            </center>

        </h:panelGrid>  
    </h:form>
</p:dialog> 
```

我的问题是，当我没有填写任何字段时，它仍然显示并说项目已创建，而不是说您再次检查表单。

我怎样才能做到这一点？感谢您的任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:25:40.447

首先，您的结构不被认为是正确的，因为您有嵌套`<form>`标签。这在 HTML 中不正确，因此在 JSF 中也不正确。

第二个`onerror`回调没有任何表单验证，但在 AJAX 请求中有错误。你应该改变`onsuccess`和`onerror`使用这样的东西：

```
oncomplete="handleSave(xhr, status, args)" 
```

并像这样定义 JavaScript 函数：

```
if (args.validationFailed) {
    infDialog.hide()
} else {
    infDialog.show()
} 
```

`validationFailed`是 ajax 回调参数，如果存在一些验证错误，Primefaces 将其隐式设置为 true。如果需要，您还应该将`required="true"`属性添加到`p:fileUpload`标签。

# xpages - 查看搜索（备注错误：查询无法理解）

> ID：14601395
> 
> 赞同：2
> 
> 时间：2013-01-30T10:11:39.517
> 
> 标签：xpages, xpages-ssjs, xpages-extlib

我正在尝试在应用程序中创建 Xpage 视图搜索，仅针对以下查询我收到错误**“注释错误：查询不可理解代码”**

**代码：**
var strQuery="Field cc_number=\"DADM20121012174051\"";
返回字符串查询；

对于我创建的其他查询，搜索工作正常。
谁能告诉我为什么会出现这个错误。我在网上看到搜索查询的大小限制是 1024 字节。链接：[http](http://www-01.ibm.com/support/docview.wss?uid=swg1LO68462) ://www-01.ibm.com/support/docview.wss?uid=swg1LO68462 。我认为上面的查询没有超过 1024bytes..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:04:04.257

这不会给我一个客户端错误，但在我的理解中，语法是：

```
FIELD cc_number CONTAINS DADM20121012174051 
```

或者

```
[cc_number]=DADM20121012174051 
```

试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:23:59.990

对于大多数全文搜索问题，我建议首先在 Notes 客户端中进行测试，看看您会得到什么结果。

在这种情况下你想试试。

```
Field cc_number="DADM20121012174051" 
```

那样有用吗？如果不是，则可能与 UNK 表有关，请参阅以下[问题](https://stackoverflow.com/questions/9151448/lotus-domino-after-changing-type-of-a-field-full-text-search-wont-work-for-th)。

之后对服务器上的 notes.ini 进行以下调试。

```
CONSOLE_LOG_ENABLED=1
Debug_FTV_Search=1
DEBUG_THREADID=1 
```

当您现在进行搜索时，它将为该搜索生成调试，并将其保存在 IBM_TECHNICAL_SUPPORT 文件夹下的 console.log 文件中。将调试输出添加到您上面的问题中，我可以对其发表评论（删除任何可能出现的机密内容）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T16:07:25.873

@Simons 的方式是正确的，在较长的查询的情况下，您可以将字段 cc_number 替换为方括号，使其变为 [cc_number] 并完成这样的查询 [cc_number]="DADM20121012174051" 再一个可能导致您看到的错误的事情：数据库或视图中是否有任何文档在 cc_number 项中存储数字而不是字符串值？如果是这种情况，FTSearch 可能会被您的指令混淆，即搜索字符串并找到包含数字值的候选者，然后通过抛出错误来寻求帮助。我建议仅在此处可能出现这种情况时才解决...

# matlab - matlab gui 通过网络摄像头捕捉图片。我不知道如何保存不同名称的图像

> ID：14601403
> 
> 赞同：0
> 
> 时间：2013-01-30T10:11:54.500
> 
> 标签：matlab, matlab-figure, matlab-guide

我正在使用 matlab gui 通过网络摄像头捕捉图片。我不知道如何保存不同名称的图像..

我的代码是

```
function pbPreview_Callback(hObject, eventdata, handles)

vid = videoinput('winvideo', 1, 'YUY2_176x144');

% only capture one frame per trigger, we are not recording a video

vid.FramesPerTrigger = 1;

% output would image in RGB color space

vid.ReturnedColorspace = 'rgb';

% tell matlab to start the webcam on user request, not automatically

triggerconfig(vid, 'manual');

% we need this to know the image height and width

vidRes = get(vid, 'VideoResolution');

% image width

imWidth = vidRes(1);

% image height

imHeight = vidRes(2);

% number of bands of our image (should be 3 because it's RGB)

nBands = get(vid, 'NumberOfBands');

% create an empty image container and show it on axPreview

hImage = image(zeros(imHeight, imWidth, nBands), 'parent', handles.axPreview);

% begin the webcam preview

preview(vid, hImage);

% --- Executes on button press in pbCapture.

function pbCapture_Callback(hObject, eventdata, handles)

% hObject    handle to pbCapture (see GCBO)

% eventdata  reserved - to be defined in a future version of MATLAB

% handles    structure with handles and user data (see GUIDATA)

vid = videoinput('winvideo', 1, 'YUY2_176x144');

vid.FramesPerTrigger = 1;

vid.ReturnedColorspace = 'rgb';

triggerconfig(vid, 'manual');

vidRes = get(vid, 'VideoResolution');

imWidth = vidRes(1);

imHeight = vidRes(2);

nBands = get(vid, 'NumberOfBands');

hImage = image(zeros(imHeight, imWidth, nBands), 'parent', handles.axPreview)

preview(vid, hImage);

 x=1;

 %while 1

% prepare for capturing the image preview
start(vid); 

% pause for 3 seconds to give our webcam a "warm-up" time

pause(3); 

% do capture!

trigger(vid);

% stop the preview

stoppreview(vid);

% get the captured image data and save it on capt1 variable

capt1 = getdata(vid);

% now write capt1 into file named captured.png

imwrite(capt1, 'captured.png');

% just dialog that we are done capturing

warndlg('Done!');

function pushbutton3_Callback(hObject, eventdata, handles)

imshow('C:\Documents and Settings\Anita\My Documents\MATLAB\captured.png'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T14:06:36.657

每次按下按钮时以不同方式存储这些图像时，请包含以下代码

```
%// this is where and what your image will be saved
counter  = 1;
baseDir  = 'E:\SCHOOL BASED FOLDERS\MATLAB\MATLAB ASSIGNMENTS\';
baseName = 'Wysla_'; % Note that 'wysla is the name i have chosen for my images'
newName  = [baseDir baseName num2str(counter) '.jpg'];
while exist(newName,'file')
counter = counter + 1;
newName = [baseDir baseName num2str(counter) '.jpg'];
end    
imwrite(img, newName); 
```

这些应该对我有用

# sql - 使用带有 CTE 的游标

> ID：14601407
> 
> 赞同：21
> 
> 时间：2013-01-30T10:12:21.230
> 
> 标签：sql, sql-server, common-table-expression

我需要一个用于以下查询的游标，以便我可以循环获取/更新/插入一些其他数据。有人可以帮我吗？

```
DECLARE @FROMDATE DATETIME
DECLARE @TODATE DATETIME
SELECT @FROMDATE = Getdate()
SELECT @TODATE = Getdate() + 7

;WITH DATEINFO(DATES)
     AS (SELECT @FROMDATE
         UNION ALL
         SELECT DATES + 1
         FROM   DATEINFO
         WHERE  DATES < @TODATE)
SELECT *
FROM   DATEINFO
OPTION (MAXRECURSION 0) 
```

我尝试了很多方法，但没有找到任何有效的方法。

我正在使用

```
declare @adate datetime
DECLARE @FROMDATE DATETIME 
DECLARE @TODATE DATETIME 
select @FROMDATE=getdate()
select @TODATE =getdate()+7

declare @weekdates cursor for
WITH DATEINFO(DATES) AS (SELECT @FROMDATE UNION ALL SELECT DATES + 1 FROM DATEINFO WHERE DATES < @TODATE) 
SELECT * FROM DATEINFO OPTION (MAXRECURSION 0)

open @weekdates
fetch next from @weekdates into @adate
while @@fetch_status=0
begin
print 'success'
fetch next from @weekdates into @adate
end
close @weekdates
deallocate @weekdates 
```

我仍然遇到错误

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-30T10:20:00.713

只需将它放在公用表表达式之前：

```
DECLARE @FROMDATE DATETIME 
DECLARE @TODATE DATETIME 
select @FROMDATE=getdate()
select @TODATE =getdate()+7

declare boris cursor for

WITH DATEINFO(DATES)
     AS (SELECT @FROMDATE
         UNION ALL
         SELECT DATES + 1
         FROM   DATEINFO
         WHERE  DATES < @TODATE)
SELECT *
FROM   DATEINFO
OPTION (MAXRECURSION 0) 
```

（但是，插入关于游标几乎总是错误的工作工具的常见警告。如果您能找到一种方法以基于集合的方式完成整个操作，它通常是可取的，并且可能会执行得更好（或至少更多适合性能调整））

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-30T16:05:46.857

可以`@`在游标名称中使用，但您使用的语法是错误的。

```
DECLARE @adate DATETIME
DECLARE @FROMDATE DATETIME
DECLARE @TODATE DATETIME

SELECT @FROMDATE = getdate()

SELECT @TODATE = getdate() + 7

DECLARE @weekdates CURSOR;

SET @weekdates = CURSOR FOR
WITH DATEINFO(DATES)
     AS (SELECT @FROMDATE
         UNION ALL
         SELECT DATES + 1
         FROM   DATEINFO
         WHERE  DATES < @TODATE)
SELECT *
FROM   DATEINFO
OPTION (MAXRECURSION 0) 

OPEN @weekdates

FETCH next FROM @weekdates INTO @adate

WHILE @@fetch_status = 0
  BEGIN
      PRINT 'success'

      FETCH next FROM @weekdates INTO @adate
  END 
```

当声明为局部`@`变量时，游标会在变量超出范围时自动关闭并释放。

# entity-framework - EF代码中的外键关系首先不返回数据

> ID：14601408
> 
> 赞同：1
> 
> 时间：2013-01-30T10:12:22.903
> 
> 标签：entity-framework, ef-code-first, foreign-key-relationship

我希望有人能够帮助我解决问题。

我首先使用实体​​框架代码，但我正在努力处理外键关系。

关系是这样建立的：

```
public class ExpScen
{
    [Key]
    [DisplayName("Exposure Id")]
    public int ExpId { get; set; }
    [DisplayName("Request Id")]
    [Required(ErrorMessage = "Request Id is required")]
    public int ReqId { get; set; }
    [DisplayName("Quantity")]
    [MaxLength(50, ErrorMessage = "The maximum length for Quantity is 50 characters")]
    public string Quantity { get; set; }
    [DisplayName("No. Exposed")]
    [MaxLength(1, ErrorMessage = "The maximum length for No. Exposed is 1 character")]
    public string Number { get; set; }
    [DisplayName("Categories")]
    public string Categories { get; set; }
    [DisplayName("Others")]
    public string Others { get; set; }
    [DisplayName("Why Exposed")]
    public string WhyExposed { get; set; }

    public virtual ICollection<ActScen> ActScens { get; set; }
}

public class ActScen
{
    [Key]
    [ForeignKey("ExpScen")]
    [DisplayName("Exposure Id")]
    public int? ExpId { get; set; }
    [DisplayName("Activity No")]
    public string ActNo { get; set; }
    [DisplayName("Method")]
    public string Method { get; set; }
    [DisplayName("Area")]
    public string Area { get; set; }
    [DisplayName("Exposure")]
    public string Exposure { get; set; }

    public ExpScen ExpScen { get; set; }

}

protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        modelBuilder.Entity<ExpScen>().HasOptional(e => e.ActScens); 
} 
```

一个 ExpScen 可以有 0 到多个 ActScen。如果我对 ExpScen 进行简单查询： return _context.ExpScens.Where(r => r.ReqId == reqId).ToList();

ActScens 作为 null 返回，当我检查对象时可以看到这些错误：

```
{"Unable to cast object of type 'Infrastructure.Models.ActScen' to type   'System.Collections.Generic.ICollection`1[Infrastructure.Models.ActScen]'."}

{"Unable to set field/property ActScens on entity type System.Data.Entity.DynamicProxies.ExpScen_83F73B45A46F6AC263EB586EA84603C8228AF8B2673F23BF020CAC9C52BE4FE3\. See InnerException for details."} 
```

有人知道我在哪里出错了吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:32:59.380

您的`ActScen`模型存在许多问题。这些问题如下。

1.  需要`virtual`付出`ExpScen`

2.  不能有`null-able`数据类型`Primary key`

3.  `[ForeignKey]`使用以下方式时无需提供 属性

4.  当使用 EF 约定`Id`作为主键时，如下所示。

    ```
    public class ActScen
    {
    [Key]
    [DisplayName("Exposure Id")]
    public int Id { get; set; }
    [DisplayName("Activity No")]
    public string ActNo { get; set; }
    [DisplayName("Method")]
    public string Method { get; set; }
    [DisplayName("Area")]
    public string Area { get; set; }
    [DisplayName("Exposure")]
    public string Exposure { get; set; }

    public virtual ExpScen ExpScen { get; set; } 
    ```

    }

# multithreading - 主线程中的关键部分

> ID：14601409
> 
> 赞同：1
> 
> 时间：2013-01-30T10:12:23.183
> 
> 标签：multithreading, delphi

我正在开发一个简单的多线程网络爬虫。我正在使用 sqlite 数据库来存储将被扫描的 url。我只有一个数据库句柄问题是主线程查询数据库以产生新线程。线程正在访问相同的句柄，但主线程还。

我已经为每个线程定义了关键部分，包括主线程。但是即使线程也处于临界区，主线程也会继续执行代码。

这是一些代码：

```
 CreateDb;

  InitializeCriticalSection(critical);

  index := 0;

  repeat
   if threads < THREADS_MAX then
   begin
     EnterCriticalSection(critical);
     try
       sqldb.query('SELECT * FROM urls WHERE vizitat=0 AND id>' + IntToStr(index));
       urlcount:= sqldb.rowcount;

       for i:= 1 to urlcount do
       begin
         WriteLn(sqldb.Fs('adresa'));
         sqldb.next;
         index := sqldb.Fi('id');
         with TPageCrawl.Create(@threads,sqldb.Fs('adresa'),index,sqldb) do;
         if threads = THREADS_MAX then break;
       end;
       LeaveCriticalSection(critical);
     except
       LeaveCriticalSection(critical);
       Continue;
     end;
   end;

   Write(logo);
   Sleep(1000);
  until (threads = 0) and (urlcount  < 1); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T10:14:32.457

> 我为每个线程定义了关键部分

它们都必须使用相同的临界区才能正确锁定。如果它们都有自己的临界区，那么锁只适用于它们自己。

我假设您的线程在 中`TPageCrawl`，您可以在调用中传递关键部分：

```
TPageCrawl.Create(critical,@threads,sqldb.Fs('adresa'),index,sqldb) 
```

然后在你的线程过程中`EnterCriticalSection()`，你可以`LeaveCriticalSection()`根据需要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T10:14:45.680

> 我已经为每个线程定义了关键部分，包括主线程。

这不是它的工作原理。您需要有一个共享的关键部分对象。每个线程必须使用相同的临界区才能使序列化工作。您需要在关键部分对象和需要保护的资源之间建立一对一的关系。

从[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682530.aspx)中：

> 临界区对象一次只能由一个线程拥有，这对于保护共享资源不被同时访问非常有用。

# c++ - 将 UTF8 转换为 std::wstring 的跨平台方法

> ID：14601413
> 
> 赞同：4
> 
> 时间：2013-01-30T10:12:36.857
> 
> 标签：c++, utf-8, cross-platform

> **可能重复：**
> [UTF8 到/从 STL 中的宽字符转换](http://stackoverflow.com/questions/148403/utf8-to-from-wide-char-conversion-in-stl)

我知道如何使用[MultiByteToWideChar](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319072%28v=vs.85%29.aspx)将 UTF8 转换为 std::wstring ：

```
std::wstring utf8to16( const char* src )
{
    std::vector<wchar_t> buffer;
    buffer.resize(MultiByteToWideChar(CP_UTF8, 0, src, -1, 0, 0));
    MultiByteToWideChar(CP_UTF8, 0, src, -1, &buffer[0], buffer.size());
    return &buffer[0];
} 
```

但它是特定于 Windows 的，是否有一个跨平台的 C++ 函数可以做同样的事情，只使用 stdio 或 iostream？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:26:32.637

我建议使用[utf8-cpp 库](http://utfcpp.sourceforge.net/ "utf8-cpp 库")，它很简单，而且涉及到 utf8 字符串。

此代码读取 UTF-8 文件并为每一行创建一个 utf16 版本，然后转换回 utf-8

```
#include <fstream>
#include <iostream>
#include <string>
#include <vector>
#include "utf8.h"
using namespace std;
int main(int argc, char** argv)
{
    if (argc != 2) {
        cout << "\nUsage: docsample filename\n";
        return 0;
    }

    const char* test_file_path = argv[1];
    // Open the test file (contains UTF-8 encoded text)
    ifstream fs8(test_file_path);
    if (!fs8.is_open()) {
        cout << "Could not open " << test_file_path << endl;
        return 0;
    }

    string line;
    while (getline(fs8, line)) {

        // Convert the line to utf-16
        vector<unsigned short> utf16line;
        utf8::utf8to16(line.begin(), end_it, back_inserter(utf16line));

        // And back to utf-8
        string utf8line; 
        utf8::utf16to8(utf16line.begin(), utf16line.end(), back_inserter(utf8line));
    }
    return 0;
} 
```

# c++ - 精神解析器属性传播规则问题

> ID：14601416
> 
> 赞同：3
> 
> 时间：2013-01-30T10:12:52.197
> 
> 标签：c++, visual-c++, boost, boost-spirit, boost-spirit-qi

我有一个精神上的小解析器。问题在于属性规则。该规则应该能够同时解析

**@ATTRIBUTE 数字 NUMERIC**

**@ATTRIBUTE 测试 {你好，世界}**

```
typedef std::string::iterator string_iter_t;
qi::rule<string_iter_t, string()> ident_r= lexeme['"' >> +(char_("a-zA-Z0-9- ")) >> '"'] | lexeme[+char_("a-zA-Z0-9-")];
qi::rule<string_iter_t, string(), space_type> relation_rule = 
    no_case["@RELATION"] >> ident_r;
qi::rule<string_iter_t, optional<vector<string>>(), space_type> attr_val_rule = 
    no_case["NUMERIC"] |
    ('{' >> ident_r % ',' >> '}');

qi::rule<string_iter_t, tuple<string, optional<vector<string>>>(), space_type> attr_rule =
    no_case["@ATTRIBUTE"] >> ident_r >> attr_val_rule; 
```

当我尝试使用上面的代码进行编译时，我收到一个关于类型与最后一条规则不匹配的大编译错误。

当我将最后一条规则更改为读取时，错误消失了

```
qi::rule<string_iter_t, vector<string>(), space_type> attr_rule =
    no_case["@ATTRIBUTE"] >> ident_r >> attr_val_rule; 
```

但是当我尝试解析时出现运行时错误

**@ATTRIBUTE 测试数字**

由于未设置参数，因此触发了 boost::optional 中的断言。我得到以下

```
Assertion failed: this->is_initialized(), file c:\Libs\boost_1_52_0\boost/option
al/optional.hpp, line 630 
```

谁能帮我理解我错过了什么？

我编译时遇到的错误

```
c:\Libs\boost_1_52_0\boost/spirit/home/qi/detail/assign_to.hpp(152) : error C244
0: 'static_cast' : cannot convert from 'const std::basic_string<_Elem,_Traits,_A
lloc>' to 'std::tuple<<unnamed-symbol>,_V0_t>'
    with
    [
        _Elem=char,
        _Traits=std::char_traits<char>,
        _Alloc=std::allocator<char>
    ]
    and
    [
        <unnamed-symbol>=std::string,
        _V0_t=boost::optional<std::vector<std::string>>
    ]
    No constructor could take the source type, or constructor overload resol
ution was ambiguous
    c:\Libs\boost_1_52_0\boost/spirit/home/qi/detail/assign_to.hpp(170) : se
e reference to function template instantiation 'void boost::spirit::traits::assi
gn_to_attribute_from_value<Attribute,T>::call<T>(const T_ &,Attribute &,boost::m
pl::false_)' being compiled
    with
    [
        Attribute=std::tuple<std::string,boost::optional<std::vector<std::st
ring>>>,
        T=std::basic_string<char,std::char_traits<char>,std::allocator<char>
>,
        T_=std::basic_string<char,std::char_traits<char>,std::allocator<char
>>
    ] ..... and goes on and on 
```

我正在使用的程序的副本

```
 int main(void)
    {
using boost::trim_left;
using boost::istarts_with;
using boost::optional;
namespace qi = boost::spirit::qi;
using qi::no_case;
using qi::ascii::space;
using qi::char_;
using qi::lexeme;
using qi::ascii::space_type;

typedef std::string::iterator string_iter_t;
qi::rule<string_iter_t, string()> ident_r= lexeme['"' >> +(char_("a-zA-Z0-9- ")) >> '"'] | lexeme[+char_("a-zA-Z0-9-")];
qi::rule<string_iter_t, string(), space_type> relation_rule = 
    no_case["@RELATION"] >> ident_r;
qi::rule<string_iter_t, optional<vector<string>>(), space_type> attr_val_rule = 
    no_case["NUMERIC"] |
    ('{' >> ident_r % ',' >> '}');
qi::rule<string_iter_t, vector<string>(), space_type> attr_rule =
    no_case["@ATTRIBUTE"] >> ident_r >> attr_val_rule;
string ss1 = "@ATTRIBUTE test NUMERIC";

vector<string> ans1;
bool ret1 = qi::phrase_parse(ss1.begin(), ss1.end(), attr_rule, space, ans1);
cout << boolalpha << ret1 << endl;

optional<vector<string>> ss;
string ss2 = "{hello, world}";
bool ret2 = qi::phrase_parse(ss2.begin(), ss2.end(), attr_val_rule, space, ss);
cout << ret2 << endl;

return 0;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T23:23:04.387

Anand 发布的解决方法在某种程度上有效。然而，一个更方便的答案就在眼前。

```
#include <boost/fusion/adapted.hpp>
// or specificly for std::tuple:
#include <boost/fusion/adapted/std_tuple.hpp> 
```

例如，当您不想或不能更改属性数据类型时，请考虑一下。

这是一个演示，其中一些样式问题已在**[http://liveworkspace.org/code/Mwpah](http://liveworkspace.org/code/Mwpah)****上实时**删除。

输出：

```
=======================================
Trying to parse '@attribute ident1 numeric'
parse success
data: ident1 
=======================================
Trying to parse '@attribute ident2 { field1, field2, field3 }'
parse success
data: ident2 field1 field2 field3 
=======================================
Trying to parse '@attribute ident3 { }'
parse failed: '@attribute ident3 { }'
trailing unparsed: '@attribute ident3 { }' 
```

完整代码：

```
#include <boost/fusion/adapted.hpp>
#include <boost/optional.hpp>
#include <boost/variant.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/karma.hpp>

namespace qi    = boost::spirit::qi;
namespace karma = boost::spirit::karma;

typedef std::string rel_t;
typedef boost::optional<std::vector<std::string>> fields_t;
typedef std::tuple<std::string, fields_t> attr_t;
typedef boost::variant<attr_t, rel_t> parsed_t;

template <typename It, typename Skipper = qi::space_type>
    struct parser : qi::grammar<It, attr_t(), Skipper>
{
    parser() : parser::base_type(attr_rule)
    {
        using namespace qi;

        ident_r       = lexeme // technically redundant since the rule is skipperless
            [
                  ('"' >> +char_("a-zA-Z0-9- ") >> '"') 
                | +char_("a-zA-Z0-9-") 
            ];

        relation_rule = no_case["@RELATION"]      >> ident_r;
        attr_val_rule = no_case["NUMERIC"] | ('{' >> ident_r % ',' >> '}');
        attr_rule     = no_case["@ATTRIBUTE"]     >> ident_r >> attr_val_rule;
        start         = attr_rule | relation_rule;

        BOOST_SPIRIT_DEBUG_NODE(start);
        BOOST_SPIRIT_DEBUG_NODE(attr_rule);
        BOOST_SPIRIT_DEBUG_NODE(attr_val_rule);
        BOOST_SPIRIT_DEBUG_NODE(relation_rule);
        BOOST_SPIRIT_DEBUG_NODE(ident_r);
    }

  private:
    qi::rule<It, std::string()> ident_r;
    qi::rule<It, fields_t(), Skipper> attr_val_rule;
    qi::rule<It, rel_t()   , Skipper> relation_rule;
    qi::rule<It, attr_t()  , Skipper> attr_rule;

    qi::rule<It, parsed_t(), Skipper> start;
};

bool doParse(std::string const& input)
{
    auto f(std::begin(input)), l(std::end(input));

    parser<decltype(f), qi::space_type> p;

    std::cout << "=======================================\n";
    std::cout << "Trying to parse '" << input << "'\n";

    try
    {
        attr_t data;
        bool ok = qi::phrase_parse(f,l,p,qi::space,data);
        if (ok)   
        {
            std::cout << "parse success\n";
            std::cout << "data: " << karma::format_delimited(karma::auto_, ' ', data) << "\n";
        }
        else      std::cerr << "parse failed: '" << std::string(f,l) << "'\n";

        if (f!=l) std::cerr << "trailing unparsed: '" << std::string(f,l) << "'\n";
        return ok;
    } catch(const qi::expectation_failure<decltype(f)>& e)
    {
        std::string frag(e.first, e.last);
        std::cerr << e.what() << "'" << frag << "'\n";
    }

    return false;
}

int main()
{
    assert(true == doParse("@attribute ident1 numeric"));
    assert(true == doParse("@attribute ident2 { field1, field2, field3 }"));
    assert(false== doParse("@attribute ident3 { }"));
    //// enable relation_rule (requires tuple IO streaming for test output)
    // assert(true == doParse("@relation rel1"));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:58:33.480

上面代码的问题是使用的元组。std::tuple 默认不适合用作 boost::fusion 序列。将元组切换为 boost::fusion::tuple 解决了这个问题。

# java - 从java在远程linux中运行命令

> ID：14601420
> 
> 赞同：0
> 
> 时间：2013-01-30T10:13:01.607
> 
> 标签：java, linux, shell, ssh

我想对 Linux 系统做一个远程 shell 并运行各种命令，例如进程`ps`和`grep`进程并杀死它们。
我假设我可以做类似的事情：`rsh`Linux 脚本做的对吗？这对我来说是最好的选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T10:25:04.717

[`rsh`未加密](http://en.wikipedia.org/wiki/Remote_Shell)，因此不再广泛使用，并且可能在您要连接的远程系统上关闭。

[使用`SSH`](http://en.wikipedia.org/wiki/Secure_Shell)会更好。 [JSch 是一个开源的纯 Java 库](http://www.jcraft.com/jsch/)，它将为您建立 SSH 连接并运行命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:42:31.257

JSch 是执行此类任务的不错选择。

# java - 集成 R 和 Hadoop（使用 JRI）

> ID：14601421
> 
> 赞同：2
> 
> 时间：2013-01-30T10:13:05.280
> 
> 标签：java, r, hadoop, mapreduce, rjava

我已经看到了一些集成 R 和 hadoop 的选项，例如：RHadoop、RHipe、Hadoop Sreaming、RHive。

我在 R 中没有任何经验，但我在 Hadoop 中确实有很好的经验。我正在谈论的方法可能不可行或其他......

但是任何人都可以分享他们对这种方法的看法 -

我们可以使用 JRI 集成 R 和 Hadoop：因为可以从 Java 代码（使用 JRI）调用 R 函数。？我们可以这样做：用 Java 编写一个 hadoop mapreduce 程序，如果我们需要 R 中存在的一些功能，那么在 Java Mapreduce 程序中调用该 R-Function？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T21:01:59.897

完成这项工作的步骤是：

*   在每个数据节点上安装 R 和 rJava。
*   在 map/reduce 作业的 setup 函数中，使用初始化 R

代码：

```
private String[] Rargs = { "--vanilla" };

private Rengine re = null;
private REXP rn = null;
re = new Rengine(Rargs, false, null); 
```

*   然后在实际地图中调用 R 或使用减少代码

代码：

```
rn = re.eval("result<-\"Hello world\"");
if( rn != null ){
            System.out.println("Result is :"+rn.toString());
        } 
```

*   最后，运行使用类似：

代码：

```
hadoop jar HelloWorld.jar com.example.HelloWorld -files libjri.so,libR.so,libRblas.so  -libjars JRI.jar -Dmapred.child.env="R_HOME=/usr/lib64/R" 
```

您可以在以逗号分隔的 -files 参数中包含更多文件，如 R 文件、数据文件等，它将被发送到分布式缓存。确保用于`re.eval("sapply(\"file.R\",source)");`从 Java 访问 file.R 中的函数

# html - Bootstrap navbar justify / span 占据全宽的菜单项

> ID：14601425
> 
> 赞同：29
> 
> 时间：2013-01-30T10:13:10.413
> 
> 标签：html, twitter-bootstrap, navbar

我使用默认的 Twitter Bootstrap 响应式导航栏（没有徽标和搜索），但我希望菜单项能够跨越，占据菜单栏的整个宽度。

这是我现在拥有的默认 Bootstrap 导航栏（参见 --- 作为空格）：

```
[home | menu item 1 | menu item 2 | menu item 3 | contact------------------------] 
```

以及我喜欢的结果（菜单项占据整个宽度）：

```
[--home-- | ---menu item 1--- | ---menu item 2--- | ---menu item 3--- | -contact-] 
```

我希望有人能帮帮忙。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-09T21:54:27.927

看看 Bootstrap 的[官方例子](http://getbootstrap.com/examples/justified-nav/)：

```
/* Customize the navbar links to be fill the entire space of the .navbar */
.navbar .navbar-inner {
    padding: 0;
}

.navbar .nav {
    margin: 0;
    display: table;
    width: 100%;
}

.navbar .nav li {
    display: table-cell;
    width: 1%;
    float: none;
}

.navbar .nav li a {
    font-weight: bold;
    text-align: center;
    border-left: 1px solid rgba(255, 255, 255, .75);
    border-right: 1px solid rgba(0, 0, 0, .1);
}

.navbar .nav li:first-child a {
    border-left: 0;
    border-radius: 3px 0 0 3px;
}

.navbar .nav li:last-child a {
    border-right: 0;
    border-radius: 0 3px 3px 0;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-27T20:04:03.270

官方示例可以完美运行，直到您想将这些菜单项与本机下拉调用一起使用。下拉列表成为所有下拉项目组合的宽度。

*注意“>”，它将使样式停止流入 .dropdown-menu 子集。

```
/* Customize the navbar links to be fill the entire space of the .navbar */

.navbar .navbar-inner {
    padding: 0;
}

.navbar .nav {
    margin: 0;
    display: table;
    width: 100%;
}

.navbar .nav > li {
    display: table-cell;
    width: 1%;
    float: none;
    text-align: center;
}

.navbar .nav li:first-child a {
    border-left: 0;
    border-radius: 3px 0 0 3px;
}

.navbar .nav li:last-child a {
    border-right: 0;
    border-radius: 0 3px 3px 0;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-21T09:55:48.203

```
.nav {
  display:table;
}
.nav > li{
  width: auto;
  display:table-cell;
} 
```

" **width: auto;** " 为我解决了这个问题

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-05-08T21:06:24.870

另一种解决方案：为每个项目调整菜单填充的媒体查询：

```
@media (max-width: 1200px) {

  .navbar .nav > li {
      padding: 0 4px 0 3px;
  }

}

@media (min-width: 1200px) {

  .navbar .nav > li {
      padding: 0 20px 0 20px;
  }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-25T20:15:17.437

这最后一个例子对我也不起作用，下拉菜单总是出现在第一个 li 元素处。

用 jquery 设置主要 li 元素的宽度是唯一对我有用的东西，沿着

```
setNavWidth: function(){
    var wi = parseInt(($('#navcontainer').width()-48)*.25);
    for( var i = 0 ; i < 4; i++){
        $('#carvernavli_'+i).width(wi);
    }

} 
```

所以我有 4 个主要的 li 元素并给了它们一个 id，“navcontainer”就是将导航直接包裹在“navbar-inner”下面的容器。您还必须在调整窗口大小时调用此函数，而不是它的工作原理！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-27T20:47:59.023

我最终使用了一个轻微的变体，我不喜欢使用`display:table`并想使用它`flexbox`。

CSS：

```
.navbar .nav {
    margin: 0;
    display: flex;
    flex-direction: row;
    width: 85%;
}

.navbar .nav li {
    flex: 1;
}

.navbar .nav li a {
    font-weight: bold;
    text-align: center;
    flex: 1;
} 
```

html:

```
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container-fluid">
      {% block header %}
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">MySite</a>
      </div>
      <div id="navbar" class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li><a href="/">Home</a></li>
          <!-- <li><a href="/submit">Submit</a></li> -->
          <li><a href="/vendors">Vendors</a></li>
          <li><a href="/news">News</a></li>
          <li><a href="/about">About</a></li>
          <form class="navbar-form navbar-left" action="/action_page.php">
            <div class="input-group">
              <input type="text" class="form-control" placeholder="Search">
              <div class="input-group-btn">
                <button class="btn btn-default" type="submit">
                  <i class="glyphicon glyphicon-search"></i>
                </button>
              </div>
            </div>
          </form>
        </ul>
      </div><!--/.nav-collapse -->
      {% endblock %}
    </div>
  </nav> 
```

结果： [![结果.gif](../Images/0b2be4c59c5529783ba9f9494cf30459.png)](https://i.stack.imgur.com/dQmrp.gif)

# python - Putty (plink) - 在远程 Linux 服务器上执行 Python

> ID：14601426
> 
> 赞同：0
> 
> 时间：2013-01-30T10:13:12.767
> 
> 标签：python, ssh, putty, plink

我有一个 Ubuntu 服务器，它有一个运行基于终端命令的界面的 python 脚本。我正在使用 plink 登录并立即执行 python 脚本：

```
plink.exe -ssh -l goomuckel -pw greenpepper#7 192.168.1.201 "python server.py" 
```

但是，我收到以下消息：

```
TERM environment variable not set. 
```

所以我在 Ubuntu 机器上创建了一个 sh 脚本（server.sh）：

```
export TERM=xterm
python server.py 
```

使用以下 plink 命令：

```
plink.exe -ssh -l goomuckel -pw greenpepper#7 192.168.1.201 "sh server.sh" 
```

现在我不再收到警告，似乎 python 脚本正在执行。但不是显示我在 python 脚本中打印的终端界面，而是只打印以下字符：

```
←[H←[2J 
```

奇怪的是，当使用 Putty 手动登录并执行 python 脚本时，一切正常。我尝试将 -t 标志添加到 plink 然后执行脚本。但是，我使用颜色来打印终端文本，并且颜色作为文本打印，而不是像在 Putty 中观察到的那样更改文本的颜色。

有什么想法我能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:17:14.250

您不需要在 python 脚本中执行此操作。

您可以简单地修改`.profile` - 这是系统将在每次登录时执行的文件 - 使用您在 python 脚本中使用的相同表达式

```
export TERM=xterm 
```

（如果你使用 bash）

```
setnv TERM xterm 
```

（对于 c-shell 和类似的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T19:23:35.843

在命令消除*未设置的 TERM 环境变量之前，我遇到了同样的问题并设置了 TERM 变量。*错误信息：

```
plink.exe -ssh -l goomuckel -pw greenpepper#7 192.168.1.201 "export TERM=xterm; python server.py" 
```

如果您无法修改*.profile*文件，这很方便...

# c - 如何在 bash 脚本中运行 ac 程序并为其提供 2 个参数？

> ID：14601430
> 
> 赞同：8
> 
> 时间：2013-01-30T10:13:23.583
> 
> 标签：c, bash, shell

我有一个 C 语言程序，它有 2 个参数，文件名和文本。我想在 bash 中编写一个脚本，该脚本还接受 2 个参数，路径和文件扩展名，将遍历给定路径中的所有文件，并将 C 语言中的程序作为参数文件提供给仅具有给定扩展名和文本的参数文件。

这是我的 C 程序，没什么特别的：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char **argv)
{
    if(argc < 3)
    {
        fprintf(stderr, "Give 2 args!\n");
        exit(-1);
    }

    char *arg1 = argv[1];
    char *arg2 = argv[2];

    fprintf(stdout, "You gave: %s, %s\n", arg1, arg2);

    return 0;
} 
```

和我的 bash 脚本：

```
#!/bin/bash

path=$1
ext=$2
text=$3

for file in $path/*.$ext
do
    ./app | 
    {
        echo $file 
        echo $text
    }
done 
```

我像这样使用它：`./script /tmp txt hello`它应该将所有`txt`文件作为参数提供，`/tmp`并将“你好”作为文本提供给我的 C 程序。不，它只显示`Give 2 args!`:(请帮忙。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T10:15:51.010

现在，您实际上并没有在脚本中将任何参数传递给程序。

只需正常传递参数：

```
./app "$file" "$text" 
```

I put the arguments in double-quotes to make the shell see the variables as single arguments, in case they contain spaces.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T10:15:57.037

Your arguments come from the command line rather than through standard input. Hence you would use:

```
./app "$file" "$text" 
```

If it *were* coming in via standard input (one argument per line), you could use:

```
( echo "$file" ; echo "$text" ) | ./app 
```

but that's not the case - you need to pass the arguments on the command line for them to show up in `argv`.

One other point, you'll notice I've put quotes around the arguments. That's a good idea to preserve whitespace just in case it's important. You should also do that in your lines:

```
path="$1"
ext="$2"
text="$3" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T10:15:51.690

Your invocation of the application is wrong. It should read

```
./app $file $text 
```

# mongodb - mongodb 以前的发布日期

> ID：14601439
> 
> 赞同：5
> 
> 时间：2013-01-30T10:13:54.957
> 
> 标签：mongodb

我需要有关某些重要版本的 mongodb 发布时间的信息。某种时间线可以帮助我将 mongodb 书籍与当时的实际 mongodb 版本进行映射。

有人知道或者可能有一些历史数据吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T10:19:00.993

[这里](http://dl.mongodb.org/dl/osx/x86_64)是 osx 的发布列表。

[您可以通过单击此页面](http://www.mongodb.org/downloads)底部的“列表”为您的操作系统获取另一个操作系统的列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-24T13:05:02.880

MongoDB在其网站上提供了[过去和未来版本的列表](https://jira.mongodb.org/browse/SERVER?selectedTab=com.atlassian.jira.jira-projects-plugin:versions-panel&subset=-1)

# c# - GridView 在数据绑定期间不可滚动？

> ID：14601441
> 
> 赞同：1
> 
> 时间：2013-01-30T10:13:55.497
> 
> 标签：c#, xaml, data-binding, gridview, windows-8

我正在创建一个 Windows 8 应用程序（不是桌面应用程序）。我的问题如下：我有一个 GridView 有很多项目（从数据库接收）。当您到达显示此 GridView 的页面时，您将立即看到其中的一些数据，但根据您的硬件，您将无法在开始时滚动它，只有几秒钟后（在 Surface这是 2-3 秒）。这当然是糟糕的用户体验。我想，我会向用户使用一些进度条或活动指示器，但我不知道什么时候停止显示它。

是否有一些属性、方法、事件或其他东西可以帮助我找出什么时候我可以真正开始滚动`GridView`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:39:53.660

我没有完美的答案，如果存在我也想知道，但这里有几个建议：

*   尽可能使用虚拟化。我们在 Surface 上也遇到了严重的性能问题，切换到虚拟化面板有很大帮助。

*   您可以尝试在 GridView 中的每个项目上侦听 Loaded 事件，一旦加载了 100% 的项目，启用滚动或隐藏进度 UI 应该是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:26:20.770

**例子 ：**

```
<Window x:Class="WpfApplication1.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" Height="300" Width="300">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <ScrollViewer VerticalScrollBarVisibility="Auto" Grid.Row="1">
            <ListView Name="listView" Margin="5" Grid.Row="1">

                <ListView.View>
                    <GridView AllowsColumnReorder="True">
                        <GridViewColumn DisplayMemberBinding="{Binding Path=.}" Header="Whatever" Width="140"/>
                    </GridView>
                </ListView.View>
            </ListView>
        </ScrollViewer>
    </Grid>
</Window> 
```

# ios - ios 6.1 如何发送好友请求以试用我的应用

> ID：14601446
> 
> 赞同：-1
> 
> 时间：2013-01-30T10:14:14.530
> 
> 标签：ios, facebook, request, invitation

我正在开发一个 ios 应用程序。有了这个应用程序，我可以登录 facebook 用户，这很有效。

第二步是在我的提要上发送一个类似“用户已经开始使用用户应用程序.. ecc”的帖子，这很有效。

下一步是邀请朋友加入我的申请。我不想在他们的墙上发布帖子，我想发送一个“请求”......类似于旅行顾问，我的生日等......我该怎么办？

我正在使用最新版本的 facebook ios sdk .. 3.1

感谢你并致以真诚的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:43:14.473

您需要使用 apprequests 对话框：

```
[facebook dialog:@"apprequests" andParams:params andDelegate:self]; 
```

更多关于[这里的所有参数](https://developers.facebook.com/docs/reference/dialogs/requests/)

# python - 如何摆脱 _BaseValue

> ID：14601449
> 
> 赞同：3
> 
> 时间：2013-01-30T10:14:34.190
> 
> 标签：python, google-app-engine, google-cloud-datastore

我正在使用自己的 ndb 属性子类，因此可以向它们添加自己的属性。当我检索存储在 ndb 中的数据时，我经常（并非总是）检索 _BaseValue 包装器中的数据。如何避免返回 _BaseValues？
目前，当我想使用数据时，我必须将其传递给函数以首先获取 b_val。

请求参数

```
INFO     2013-02-01 08:15:05,834 debug.py:24] discount_application          
INFO     2013-02-01 08:15:05,835 debug.py:24] url_name                      10
INFO     2013-02-01 08:15:05,835 debug.py:24] name                          10%
INFO     2013-02-01 08:15:05,835 debug.py:24] discount.amount               10
INFO     2013-02-01 08:15:05,835 debug.py:24] discount_type                 discount
INFO     2013-02-01 08:15:05,836 debug.py:24] free_text_discount            
INFO     2013-02-01 08:15:05,836 debug.py:24] discount.currency             euro 
```

使用自定义函数从数据存储接收的数据

```
created                       _BaseValue(datetime.datetime(2013, 1, 31, 10, 41, 6, 757020))
updated                       _BaseValue(datetime.datetime(2013, 2, 1, 8, 13, 34, 924218))
name                          _BaseValue('10%')
active                        _BaseValue(True)
name_lower                    _BaseValue('10%')
url_name                      _BaseValue('10_')
discount_type                 _BaseValue('free_text_discount')
discount                      _BaseValue(Discount(amount=0, currency=u'euro'))
free_text_discount            _BaseValue('Krijg nu 10% korting')
discount_application          _BaseValue(' ') 
```

解析请求参数后的数据

```
created                       2013-01-31 10:41:06.757020
updated                       2013-02-01 08:13:34.924218
name                          u'10%'
active                        True
name_lower                    u'10%'
url_name                      u'10_'
discount_type                 u'discount'
discount                      Discount(amount=1000, currency=u'euro')
free_text_discount            u''
discount_application          u' ' 
```

据我所知，数据的存储方式是我想要的还是不是随机的。放样后收到相同实例后的数据如下图所示。放置后的数据也显示为 discount.discount.amount 和 discount.discount.currency 而不仅仅是 discount.amount 和 discount.currency

```
created                       _BaseValue(datetime.datetime(2013, 1, 16, 14, 29, 52, 457230))
updated                       _BaseValue(datetime.datetime(2013, 2, 1, 8, 14, 29, 329138))
name                          _BaseValue('20%')
active                        _BaseValue(True)
name_lower                    _BaseValue('20%')
url_name                      u'20_'
discount_type                 _BaseValue('discount')
discount                      _BaseValue(Discount(discount=Expando(amount=2000L, currency='percent')))
free_text_discount            _BaseValue(' ')
discount_application          _BaseValue('') 
```

动作看起来像这样

```
# BaseModel has some default properties and inherits from CleanModel
class Action(BaseModel):
    _verbose_name = _("Action")
    max_create_gid = gid.ADMIN
    max_list_gid = gid.ADMIN
    max_delete_gid = gid.ADMIN

    # And some additional irrelevant properties
    # properties is a module containing custom properties,
    # which have some additional properties and functions
    discount = properties.StructuredProperty(Discount,
            html_input_type="small_structure",
            verbose_name=_("Discount"),
            help_message=_("Set a minimum discount of 10%% or € 1,00"),
            max_edit_gid=gid.ADMIN)

    def validate(self, original=None):
        return {} 
```

折扣看起来像这样

```
# CleanModel has some irrelevant functions and inherits from ndb.Model
class Discount(common_models.CleanModel):
    amount = EuroMoney.amount.update(
            verbose_name=_("Discount"))
    currency = EuroMoney.currency.update(
            choice_dict=cp_dict(EuroMoney.currency._choice_dict,
                                            updates={CURRENCY_PERCENT: "%%"}),
            max_edit_gid=gid.ADMIN) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-19T19:20:42.523

_values 永远不应该被使用。应该改用 getattr。
循环遍历模型属性的示例：

```
entity = Model(**kwargs)
for name in entity._properties:
    val = getattr(entity, name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-17T13:18:15.863

不知道这里是否是这种情况，但我遇到了同样的问题，因为我正在制作实体属性的本地副本，编辑它们，然后将它们放回实体中（下面的示例）：

```
# I had wanted to store a list of strings, so I made this class
# (it was intended to store things like ["a", "b", "c"], etc.
class lists(ndb.Model):
        thisList = ndb.StringProperty(repeated=True)

def lets_go():
    with ndbclient.context():
        # Get the entity I want
        entity = ndb.Key(lists, "id").get()
        # Put it's existing data into a variable called 'local_list'
        local_list = entity.thisList
        # Append data to that variable
        local_list.append("d")
        # Assign the updated list back to the entity property
        entity.thisList = local_list 
```

这会给你一个像这样的列表：["_BaseValue('a')", "_BaseValue('b')"...] 而不是 ["a", "b"...]，这就是问题所在.

如果我没记错的话，这实际上曾经在旧版本的 Google Cloud Datastore（大约 2018 年）中工作。但是，它现在给出了此处问题中提到的那种“_BaseValue”问题。这是我解决问题的方法——我直接编辑了 ndb 实体，没有制作列表的本地副本：

```
def lets_go():
    with ndbclient.context():
        # Get the entity I want
        entity = ndb.Key(lists, "id").get()
        # And append data to it directly
        entity.localList.append("d") 
```

这会将一个实际列表（如 ["a", "b"...]）放入实体中。

# opencart - 你如何在 Opencart 中获取当前登录用户的用户角色？

> ID：14601450
> 
> 赞同：0
> 
> 时间：2013-01-30T10:14:37.300
> 
> 标签：opencart, user-roles

我想在 Opencart 中获取当前登录用户的用户角色 ID，以便对产品列表进行必要的调整。我可以尝试深入挖掘 opencart 以查看，但希望有人可以节省我的时间。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:20:52.123

只需使用

```
$this->customer->getCustomerGroupId() 
```

这将返回您想要的值

# scala - 重定向到引用者忽略用户条目

> ID：14601453
> 
> 赞同：0
> 
> 时间：2013-01-30T10:14:48.590
> 
> 标签：scala, playframework, playframework-2.0

当用户输入无效数据时，我试图显示错误消息（业务逻辑）。

我有一个包含几个字段的模板。字段值作为查询参数发送。

在我的操作中，我检查字段，每当发现错误时，我都会重定向到添加错误消息的同一页面：

```
request.headers.get(REFERER).getOrElse("/main").flashing("error" -> "Some error") 
```

显示消息，但用户输入的所有条目都消失了！这很烦人，用户需要再次输入所有数据。

我更新了相应模板中显示的对象，但未显示此新信息。

我知道我可以尝试使用表单，但在这种情况下，字段是动态生成的。

有没有办法重定向到同一页面，使用用户提供的 dava 进行更新，并显示错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:49:22.327

重定向到相同的 URL 不等于呈现具有相同数据的表单。当您执行重定向时，它与用户刚刚从外部访问您的表单相同。

[检查处理绑定失败](http://www.playframework.org/documentation/2.0.4/ScalaForms)部分中的表单文档

# xcode - XCode 4.6 断点不起作用

> ID：14601456
> 
> 赞同：5
> 
> 时间：2013-01-30T10:14:52.963
> 
> 标签：xcode, breakpoints

我刚刚升级到 XCode 4.6 和 iOS 6.1，并且断点在模拟器（未测试的设备）中停止工作。将调试器更改为 GDB 可以修复它，但我通常使用 LLDB。

项目中没有任何变化，他们只是在升级后停止工作。我已经清理并删除了派生数据并检查了所有调试设置，但没有任何问题。

有其他人得到这个吗？

最大限度

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T22:37:35.790

我们的 iOS 项目遇到了同样的问题。这似乎是 LLDB 或 XCode 4.6 中的一个新错误。我刚刚向 Apple 提交了一份错误报告，并建议您也这样做。

Apple Dev 论坛中的此主题表明该问题可能与项目目录层次结构中源文件的位置有关：[https ://devforums.apple.com/message/754512](https://devforums.apple.com/message/754512)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T22:35:26.840

另一个愚蠢的“用户错误”发生在我身上——我覆盖了一个类别中的方法，但继续在不再被调用的代码上放置断点。当然没有被击中。捂脸！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T07:39:29.487

我发现，至少对我们来说，这个问题与我们的编译方式有关。我们使用“统一”编译理论，将项目拆分为子项目，每个子项目都有一个包含所有其他源文件的源文件。我们的问题似乎是 LLDB 不会中断包含的 cpp 文件。这是由于编译器内联文件的方式。

解决方案在这里：[https ://stackoverflow.com/a/17693317/683614](https://stackoverflow.com/a/17693317/683614)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-15T10:57:28.893

亲爱的，请打开 xcode --> 产品 --> 调试 --> 激活断点。

它肯定会奏效。

****** 请享用 *****

![在此处输入图像描述](../Images/2b06e4ab7bf1a8d429ea900b53dfea8b.png)

![在此处输入图像描述](../Images/3d3a6e2a1694fccdddf75540b71da77f.png)

# c - 具有 ip-range 字符串作为参数并返回包含 'C' 中 ips 列表的数组的函数

> ID：14601457
> 
> 赞同：1
> 
> 时间：2013-01-30T10:14:56.750
> 
> 标签：c, arrays, multidimensional-array, function-pointers

我是使用 C 的 2 个月大的孩子。我有一个简单的问题，就是将 ip-range 作为参数传递给 main 函数并获得一个带有独立 ips 的数组。

例如。func-ip-range 应该将 1.1.1.1-10 作为 argv 并返回一个数组 [1.1.1.1, 1.1.1.2, 1.1.1.3 ......... 1.1.1.10]。

我解决这个问题的方法如下，我无法调试“分段错误”，因为我不知道代码在哪里阻塞。

非常感谢任何帮助来拯救这个孩子。

方法是将命令行参数传递给 *ip_str 并逐字符读取此字符串。一旦我遇到第一个'。我增加计数'c'，当计数c == 3时，我想将字符串从那里存储到一个新的字符串变量，直到我达到'-'，然后在达到'-'之后将字符串的其余部分存储到一个新的字符串中。但是我对程序编写和调试的接触有严重的问题。

除此之外如何解决问题的方向对我的学习非常有帮助。

```
 void array_ip(char *ip_str,char **iplist)
    {
    for(i=0,j=0;*(ip_str+i) != '\0';i++)
    {
            if(*(ip_str+i)=='.')
            {c++;
            }
            if(c==3 && (*(ip_str+i )!= '-'))
            {
            *(a+j) = *(ip_str+i);
            j++;
            }
            if(*(ip_str+i) == '-')
            {
            break;
            }
    }
    for(k=0;*(ip_str+i) != '\0';k++,i++)
    {
    *(b+k)=*(ip_str+i);
    }

    printf("the starting last octet is %s \n",a);
    printf("the Ending last octet is %s \n",b);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:24:11.970

您可以使用的另一个函数是使用“-”作为分隔符的[strtok 。](http://pubs.opengroup.org/onlinepubs/009604599/functions/strtok.html)一旦你有了你的两个字符串，你就知道你必须提供什么限制来提供 ips 的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:21:42.553

为什么不使用的帮助？[strrchr()](http://www.kernel.org/doc/man-pages/online/pages/man3/strchr.3.html)

如果您使用的是 linux，请在您的 linux 上执行 man 3 strrchr

**编辑**：`strtok`改用：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
int main()
{
        char str[] = "1.1.1.1-10";
        char * temp;

        temp = strtok(str,"-");
        temp = strtok(NULL,"-");
        int number = atoi(temp);
        printf("%d",number);
return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:42:41.447

我建议只使用[`sscanf()`](http://linux.die.net/man/3/sscanf)开始：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
   int a, b, c, d, len;

   if(argc != 2)
     exit(1);

   if(sscanf(argv[1], "%d.%d.%d.%d-%d", &a, &b, &c, &d, &len) == 5)
   {
     pintf("Got IP range\n");
   }
   return EXIT_SUCCESS;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T06:17:13.017

感谢大家抽出一些时间来指导我。这真的很有帮助，因为我通过您的输入学到了很多新东西。我只是粘贴我为获取前缀 (11.1.1.) 和 startValue (251) - endValue (254) 而编写的代码。我将使用 strcat 连接并将结果传递给数组。我仍然不太习惯将指针参数传递给函数并从指针中获取数组，但很快我就会了。

再次感谢 ！！

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>
int main()
{
char str[]="11.1.1.251-254";
char *temp, *a,*b,*c,*temp2,*q;
char prefix[50];
int i,count,k;
temp = strrchr(str,'.');
if(temp!=NULL)
{
printf("found a '.' as %s\n",temp);
}

b = strtok(temp,"-");
c = strtok(NULL,"-");       
b = strtok(b,".");

for(i=0,k=0,count=0;count<3;i++,k++)
{

prefix[k]=str[i];
if(str[i]=='.')
{
count++;
}
}
printf("%s \n",prefix);
printf("%s \n",b);
printf("%s \n",c);
return 0;
} 
```

# log4net - Windows Server 2012 上的 Log4net 问题

> ID：14601458
> 
> 赞同：1
> 
> 时间：2013-01-30T10:14:58.080
> 
> 标签：log4net, windows-server-2012

我在 Windows Server 2012 上登录 log4net 时遇到问题。安装了 IIS 8。Log4net 配置正确，因为在其他环境中写入了日志文件。看起来这个问题与 2012 Server 上的一些额外安全性有关。有没有人遇到过这样的问题？我找不到未写入日志文件的原因。

另一条评论是，只有当我将它重命名为 web.config.txt 应用程序启动时，IIS 8 才看到我的 web.config 文件。这对我来说看起来很奇怪，因为我之前没有使用过 Server 2012 和 IIS 8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:08:07.770

在编写日志文件时，我倾向于不尝试将日志文件写入程序文件目录中的任何位置或任何虚拟目录中的任何内容，这仅仅是因为我之前遇到过安全问题。目前，我对所有 log4net 日志文件都使用如下内容：

```
<file type="log4net.Util.PatternString" value="${ALLUSERSPROFILE}/<Product Name>/Logs/<Program Name>/<Program Name>.log" /> 
```

`${ALLUSERSPROFILE}`是上面的关键。该目录通常没有虚拟目录和程序文件目录的安全限制。我发现自从我使用这条路径以来我没有遇到任何问题。

此环境变量将您带到`ProgramData`Windows Vista、7、8、Server 2008 等中的目录。我认为 XP 将您带到不同的地方，但仍然是一个权限较宽松的目录。

# ckeditor - CKEditor 在 IE 中不显示工具栏

> ID：14601459
> 
> 赞同：0
> 
> 时间：2013-01-30T10:14:59.300
> 
> 标签：ckeditor

我正在使用ckeditor显示一些信息。它在chrome和firefox中工作正常。但在IE中它没有显示工具栏。它显示为：

![在此处输入图像描述](../Images/7d4c0fc3a62d1792ee2d94f5c56c7833.png)

请帮忙！！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:17:05.690

当我升级到 CKEditor4 时，工具栏在 IE8 中显示正常，但是一半的按钮在 FF 中根本没有显示。我清除了缓存并解决了问题。可能只是你遇到的同样的问题。

# knockout.js - 条件验证不适用于匿名敲除验证规则

> ID：14601463
> 
> 赞同：12
> 
> 时间：2013-01-30T10:15:04.773
> 
> 标签：knockout.js, knockout-validation

我的视图模型中有以下使用淘汰赛验证的属性，其中之一是自定义验证以检查密码匹配。

```
model.Password = ko.observable()
                  .extend({ required: { message: "Password is required.", 
                        params: true,
                        onlyIf: function () { return model.IsCredentialsRequired(); }}
                    });

model.ConfirmPassword = ko.observable().
                        extend({ validation: { validator: mustEqual,
                        message: 'Passwords do not match.',
                        params: model.Password,               
                        onlyIf: function () { return model.IsCredentialsRequired(); } }
                    }); 
```

自定义验证功能的代码

```
var mustEqual = function (val, other) {
                return val == other();
            }; 
```

我发现该`OnlyIf`条件适用于`model.Password`取决于 `model.IsCredentialsRequired()`但不适用于`model.ConfirmPassword`，有人可以帮助我为什么会发生这种情况吗？有没有其他方法可以对自定义规则使用条件验证？

提前致谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-30T10:35:53.250

淘汰验证目前不支持匿名规则的“onlyIf”。但它支持自定义规则。因此，您可以创建自定义规则并使用 onlyIf ：

```
ko.validation.rules['confirmPasswordMatches'] = {
    validator: function (val, params) {
        var otherValue = params;
        return val === ko.validation.utils.getValue(otherValue);
    },
    message: 'Passwords do not match.',
};
ko.validation.registerExtenders();

function ViewModel() {
    var self = this;

    self.IsCredentialsRequired = ko.observable(true);

    self.Password = ko.observable()
        .extend({
            required: {
                message: "Password is required.",
                params: true,
                onlyIf: self.IsCredentialsRequired
            }
    });

    self.ConfirmPassword = ko.observable().
    extend({
            confirmPasswordMatches: {
            params: self.Password,
            onlyIf: self.IsCredentialsRequired
        }
    });

} 
```

小提琴：http: [//jsfiddle.net/delixfe/mFAEx/](http://jsfiddle.net/delixfe/mFAEx/)

# iphone - 如何指定格式化的 NSString 常量

> ID：14601465
> 
> 赞同：-3
> 
> 时间：2013-01-30T10:15:09.767
> 
> 标签：iphone, ios, nsstring, uikit, stringwithformat

我有一些**预定义的字符串**格式，我想在运行时填充值并呈现给用户。我想将它们存储为`constants`或`defines`，以更适合的方式存储。

就像是：

```
@% has sent you a message on @%-@%-@%. 
```

在运行时，上面将获取发件人的姓名和 mm-dd-yy 以准备所需的字符串：

```
James Bond has sent you a message on 12-31-2050. 
```

谁能指出实现这种事情的代码？

编辑：与许多人（尤其是反对者！）相信的相反：

这不仅仅是一个[字符串格式问题](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/FormatStrings.html#//apple_ref/doc/uid/20000943)。发布它是为了确保：

*   字符串格式存储是内存高效的（静态 vs 定义 vs 其他），因为我想永久存储格式，而不仅仅是使用时间
*   运行时的值替换是高效的（stringWithFormat 与其他选项）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:29:50.073

试试这个..也许它会帮助你。

```
 NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"dd-MM-yyyy"];
    NSDate *now = [[NSDate alloc] init];

    NSString *theDate = [dateFormat stringFromDate:now];
     NSLog(@"theDate..%@",theDate);
    NSString *str = @"yourString";
    NSString *new =  [NSString stringWithFormat:@"%@ has sent you a message on %@", str, theDate]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:18:36.993

采用`[NSString stringWithFormat:@"%@ has sent you a message on %@", who, date]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T10:38:43.833

你可以这样做：

在顶部，

```
#define MESSAGE @"%@ has sent you a message on %@-%@-%@." 
```

然后，每当您想使用该消息时，请使用以下语法：

```
[NSString stringWithFormat:MESSAGE, <sender_name>, <date>, <month>, <year>]; 
```

sender_name,date,month,year 是动态值。

希望，你有一个想法。

快乐编码！

干杯!

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T10:56:20.517

首先，您需要获取当前日期

```
NSDateFormatter *date= [[NSDateFormatter alloc] init];
    [date setDateFormat:@"MM-dd-yyyy"];
    NSDate *thisDate= [[NSDate alloc] init];

NSString *currentDate= [date stringFromDate:thisDate];
 NSLog(@"Current date is..%@",currentDate); 
```

现在您可以在运行时输入任何字符串

```
 NSString *strng = @"whatever kind of string which you want to add at runtime";
    NSString *newString=  [NSString stringWithFormat:@"%@ has sent you a message on %@", strng, currentDate]; 
```

“newString”的值将为您提供所需的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T10:46:00.380

使用 #define messageString(x,y,z) [NSString stringWithFormat:@"%@ 已在 %@-%@-%@ 上向您发送了一条消息。",x,y,z]

# ios - UISegmentControl 作为 NavigationController

> ID：14601467
> 
> 赞同：1
> 
> 时间：2013-01-30T10:15:13.593
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, uisegmentedcontrol

我正在尝试制作一些自定义视图，我想知道如何在你有 UISegmentControl （或类似的东西）并且你在不同的视图控制器之间切换但段控制保持在同一个位置的情况下实现这样的东西（不介意图片大小不同）。就像一个导航控制器，但有一个段而不是它。任何想法将不胜感激。谢谢

![在此处输入图像描述](../Images/b25863c8e820ac3136b3c1a279ac4bc3.png) ![在此处输入图像描述](../Images/61054fe266bc8593ee5334d314e29db9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:16:12.897

这很容易做到。您只需要使用导航控制器，但**在所有视图上隐藏导航栏**。然后你可以使用

`[self.navigationController pushViewController:@"Your viewController to which you want to navigate" animated:YES];`

在选择段索引上。并且要从任何这些视图控制器返回，您只需要实现这个

`[self.navigationController popViewControllerAnimated:YES];`在选定段索引的按钮操作上。我希望这会对你有所帮助。快乐编码..!!!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:49:48.583

您可以使用段控制和数组创建 ViewController，其中将包含其他控制器。在段更改时，您应该从数组中的一个控制器查看视图，并将其像子视图一样添加到父 ViewControllerView。这看起来像这样

```
//in ViewControllerView.m
-(void)touchUpInsideSegmentIndex:(NSUInteger)segmentIndex {
   //delegate is your ViewController
    UIView * newToolView = [delegate viewAtIndex:segmentIndex];
    //contentView declared in ViewControllerView.h
    if (newToolView != contentView && newToolView) {
        [contentView removeFromSuperview];
        [contentView release];
        contentView = [newToolView retain];
        [self addSubview:contentView];
        [self setNeedsLayout];
    }
}

//in ViewController.m
- (UIView*)viewAtIndex:(NSInteger)index {
    //yourControllersArray is an array of your controllers
    if (index < 0 || index >= [yourControllersArray count]) {       
        NSLog(@"View At Wrong Index %d (max=%d)", index, [yourControllersArray count]);
        return nil;
    }
    return [[yourControllersArray objectAtIndex: index] view];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:49:58.917

1.  在导航栏中定位 UISegmentedControl。
2.  设置导航栏透明。
3.  在 UISegmentedControl 方法中，从 UINavigationController 堆栈推送和弹出视图控制器，或显示和关闭模式

# c++ - 如果传入 std::swap 的对象在交换期间抛出异常怎么办？

> ID：14601469
> 
> 赞同：6
> 
> 时间：2013-01-30T10:15:15.153
> 
> 标签：c++, exception, c++11, standards, swap

C++ 标准保证`std::swap`不会抛出异常。但是，如果要交换的对象在交换期间抛出异常怎么办？接下来，调用者应该如何发现异常发生了？来电者应该采取什么措施？

PS：构造函数抛出异常是很常见的。

```
struct A
{
    A(const A&)
    {
        throw 1;
    }

    A& operator =(const A&)
    {
        throw 2;
        return *this;
    }
};

int main()
{
    A a1, a2;
    std::swap(a1, a2); // An exception happened, but the caller doesn't know.
    // How to do here ???
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-30T10:23:09.053

> C++ 标准保证 std::swap 不会抛出异常。

不，它没有。见 20.2.2 或[参考](http://en.cppreference.com/w/cpp/algorithm/swap)。两个重载有两个 noexcept 规范`std::swap`：

```
template<class T> void swap(T& a, T& b)
noexcept(noexcept(
    std::is_nothrow_move_constructible<T>::value &&
    std::is_nothrow_move_assignable<T>::value
))

template<class T, size_t N>
void swap(T (&a)[N], T (&b)[N])    
noexcept(noexcept(swap(*a, *b))) 
```

当这些条件不满足时，`std::swap`可以扔也可以接住。

* * *

在您提供的类的情况下，谓词`std::is_nothrow_move_constructible`和`std::is_nothrow_move_assignable`是错误的，因此实例化`std::swap<A>`没有不抛出保证。从这个交换中捕获异常是完全合法的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-30T10:27:18.503

该标准通常不保证交换不会抛出。

从 20.2.2/1 开始：

> 模板无效交换（T＆a，T＆b）noexcept（*见下文*）；
> 
> 备注：noexcept 里面的表达式等价于：
> 
> ```
>  is_nothrow_move_constructible<T>::value &&
>  is_nothrow_move_assignable<T>::value 
> ```

# sql-server - 搜索查询 sql server 的索引

> ID：14601472
> 
> 赞同：0
> 
> 时间：2013-01-30T10:15:23.350
> 
> 标签：sql-server, stored-procedures, indexing

我有一个调用存储过程的搜索，该过程最多接受 5 个参数。查询中有许多表，但参数都在查询中的单个表上进行过滤。问题是最好为每个参数（表中的字段）或一个涵盖所有参数的索引建立一个索引，显然还有其他查询可能出于自己的目的使用这些字段中的一个或多个，所以也许是值得为每个字段留下一个索引。

抱歉，如果这不是一个明确的问题

**问题**：有一个覆盖索引是否更好 - 覆盖所有搜索字段。或每个索引

哪个是更好的做法？

任何帮助非常感谢

纳特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:52:35.627

我怀疑答案取决于最常指定“最多”5 个参数的方式。如果它们通常以特定的增加特异性的顺序指定（例如，clientid 的记录，或 clientid + accountid，或 clientid + accountid + 月份等），那么如果您按该顺序构建覆盖查询，则大多数 <5查询仍然能够有效地使用它。

如果，OTOH，指定了哪些特定的参数，哪些不是相对随机的，并且您有其他进程想要在其中一些列上建立索引，那么您也可以单独索引每一列。

当然，在理想的世界中，您将拥有一个性能测试平台来凭经验找出正确的决定。但是很少有项目是在理想世界中构建的。即便如此，即使您的 DEV 装备看起来与生产完全不同，您也无法通过一点测试。

# .net - 事件处理程序中吞噬的异常

> ID：14601473
> 
> 赞同：0
> 
> 时间：2013-01-30T10:15:24.230
> 
> 标签：.net, vb.net, visual-studio

在 winforms 中，使用 vb.net 和 .NET 4.0 32bit，我制作了一个带有自定义事件的用户控件，当我单击位于自定义控件中的控件时会触发这些事件（基本上只是在经过一些处理后从底层控件冒泡事件） .

我有这个控件，我们称之为`child`第二个自定义控件，比如说`Parent`，我将其加载到主窗体上的选项卡控件中。在父母我做这样的事情：

```
Public Class Parent : Inherits ParentBase

    Public Sub Child_SnapToObject(byval sender ..., byval e ...) Handles Child.SnapToObject

         ' Do stuff here

    End Sub

    Public Sub Child_ScaleChanged(byval sender ..., byval e ...) Handles Child.ScaleChanged

         ' Do stuff here

    End Sub

End Class 
```

事件处理程序执行得很好，但其中发生的任何异常都会被吞没，使其成为调试的噩梦。这是所有事件的情况

`Child`在单独的项目中定义。我检查了事件处理程序，这些事件处理程序正在从底层控件中冒泡处理事件以及所有这些燕子异常。另一方面，构造函数会抛出异常。

我找不到任何表明这是正常行为的东西......有人知道这是一个错误还是什么，以及如何修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:17:13.293

问题似乎是由于我的用户控件位于不同的项目中。启用菜单选项“当异常跨越 appDomain 或托管/本机边界时中断...”（在工具 -> 选项 -> 调试 -> 常规中）后，异常不再被吞没。

我认为这应该默认启用。由于我的项目是从 VS2003 项目转换而来的，因此我假设该设置在转换过程中被关闭。

# .net-3.5 - 使用 BackgroundWorker 时 GUI 挂起

> ID：14601478
> 
> 赞同：1
> 
> 时间：2013-01-30T10:15:39.210
> 
> 标签：.net-3.5, backgroundworker

我无法让这个 BackgroundWorker 为我工作。我在[这里使用](https://stackoverflow.com/questions/363377/c-sharp-how-do-i-run-a-simple-bit-of-code-in-a-new-thread)**m3rLinEz**的示例

问题是 GUI 没有响应并且百分比没有更新。

我正在使用母版页，并且已`async="true"`在内容页的标题中设置。
我还缺少其他东西吗？

**ASPX 代码：**

```
<asp:Button ID="btnGo" runat="server" Text="Go" OnClick="btnClick_Go" />&nbsp;
<asp:Label runat="server" id="textUpdate" text="0%" /> 
```

后面的代码

```
protected void btnClick_Go(object sender, EventArgs e)
{    
    BackgroundWorker bw = new BackgroundWorker();

    // this allows our worker to report progress during work
    bw.WorkerReportsProgress = true;

    // what to do in the background thread
    bw.DoWork += new DoWorkEventHandler(
    delegate(object o, DoWorkEventArgs args)
    {
        BackgroundWorker b = o as BackgroundWorker;

        // do some simple processing for 10 seconds
        for (int i = 1; i <= 10; i++)
        {
            // report the progress in percent
            b.ReportProgress(i * 10);
            Thread.Sleep(1000);
        }

    });

    // what to do when progress changed (update the progress bar for example)
    bw.ProgressChanged += new ProgressChangedEventHandler(
    delegate(object o, ProgressChangedEventArgs args)
    {
        textUpdate.Text = string.Format("{0}%", args.ProgressPercentage);
    });

    // what to do when worker completes its task (notify the user)
    bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(
    delegate(object o, RunWorkerCompletedEventArgs args)
    {
        lblSuccess.Visible = true;
    });

    bw.RunWorkerAsync();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:18:03.837

`BackgroundWorker`通常与客户端 UI 一起使用 - WPF、WinForms 等。

在您的代码中，您尝试*在将响应发送回客户端后*更新 UI 。如果没有客户端向服务器发出稍后的请求，您希望它如何工作？

对于 Web 应用程序，您需要使用 AJAX 来不断更新 UI。可能有一些很好的方法可以使 AJAX 易于管理，但您不能只`BackgroundWorker`在服务器端使用并希望它能够正常工作。

# emacs - 将 ctrl 键重新映射为双击 l-shift 键

> ID：14601481
> 
> 赞同：4
> 
> 时间：2013-01-30T10:15:47.783
> 
> 标签：emacs

我正在使用 Emacs，`Ctrl`关键位置有点问题。

我发现的唯一解决方案是`Caps-Lock`作为附加`Ctrl`密钥。这很好，但我也希望偶尔使用`Caps-Lock`key。所以我的解决方案是重新绑定`Caps-Lock`到双击`Shift`键。

我的问题是如何在 Windows 和 Linux 中实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-19T23:55:54.747

你可以在windows下使用[autohotkey](http://www.autohotkey.com/)。似乎有一个等效的 linux 程序（[autokey](https://code.google.com/p/autokey/)），但我从未使用过它。

这个 .ahk 脚本应该可以解决问题：

```
~SHIFT::
if (A_PriorHotkey <> "~SHIFT" or A_TimeSincePriorHotkey > 400)
{
    ; Too much time between presses, so this isn't a double-press.
    KeyWait, Esc
    return
}
Send {CapsLock}
return 
```

来源：[在 AutoHotkey [stackoverflow] 中检测双键按下](https://stackoverflow.com/a/1794299/4266296)

# python - 在 Cygwin 中创建 virtualenv 时出错

> ID：14601482
> 
> 赞同：1
> 
> 时间：2013-01-30T10:15:48.537
> 
> 标签：python, cygwin, virtualenv

我已经在我的 Win7 机器上安装了 Cygwin；我还安装了 python2.7、setuptools、easy_install、pip 等...我使用 easy_install 安装了 virtualenv 和 virtaulenvwrapper。

问题是，当我现在尝试创建一个 virtualenv 时，我得到以下信息：

```
 $ mkvirtualenv --distribute --no-site-packages --python=/usr/bin/python2.7.exe temp
Running virtualenv with interpreter /usr/bin/python2.7.exe
New python executable in temp/bin/python2.7
Also creating executable in temp/bin/python.exe
Traceback (most recent call last):
  File "/usr/lib/python2.7/site-packages/virtualenv-1.8.4-py2.7.egg/virtualenv.py", line 2560, in <module>
    main()
  File "/usr/lib/python2.7/site-packages/virtualenv-1.8.4-py2.7.egg/virtualenv.py", line 964, in main
    never_download=options.never_download)
  File "/usr/lib/python2.7/site-packages/virtualenv-1.8.4-py2.7.egg/virtualenv.py", line 1065, in create_environment
    site_packages=site_packages, clear=clear))
  File "/usr/lib/python2.7/site-packages/virtualenv-1.8.4-py2.7.egg/virtualenv.py", line 1506, in install_python
    raise e
OSError: [Errno 2] No such file or directory 
```

我也尝试不使用任何选项，`mkvirtualenv temp`但我得到了完全相同的错误。我还在 python2.7.exe 和 python.exe 之间创建了一个符号链接......再次，没有运气。

我在网上搜索但我无法弄清楚....有什么想法吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:25:54.270

cygwin 在 1.8.3 和 1.8.4 版本中出现了问题。使用旧版本可以解决问题。

如果您不想使用旧版本，则 git 存储库 ( [https://github.com/pypa/virtualenv](https://github.com/pypa/virtualenv) ) 的当前开发分支可以正常工作。这个命令会给你：

`pip install https://github.com/pypa/virtualenv/tarball/develop`

或者

`easy_install https://github.com/pypa/virtualenv/tarball/develop`

这在理论上意味着下一个版本，应该是 1.8.5，也将修复这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:40:44.443

不是一个明确的答案，但这解决了我的问题： [链接](http://cygwin.com/ml/cygwin/2012-12/msg00141.html)

显然，最新版本中存在错误，因此回滚到以前的版本并不是一件坏事，至少如果您像我一样使用 Cygwin。

# django - 具有多个注册表单的 Userena（表单向导）

> ID：14601490
> 
> 赞同：0
> 
> 时间：2013-01-30T10:16:16.773
> 
> 标签：django, django-forms, django-formwizard

我正在尝试为[django-userena](http://www.django-userena.org/)注册设置多个表单。

所以从[django-docs](https://docs.djangoproject.com/en/1.1/ref/contrib/formtools/form-wizard/)我可以这样做：

**表格.py：**

```
class Form1(forms.Form):
    some_field = forms.CharField(max_length=100)
    email = forms.EmailField()

class Form2(forms.Form):
    some_field_2 = forms.CharField(widget=forms.Textarea) 
```

**视图.py：**

```
class Wizard(SessionWizardView):
    def done(self, form_list, **kwargs):
        return render_to_response('done.html', {
            'form_data': [form.cleaned_data for form in form_list],
        }) 
```

**网址.py：**

```
(r'^signup/$', Wizard.as_view([Form1, Form2])), 
```

它就像一个表单，放在两个页面上，带有“下一个”和“上一个”按钮。

* * *

但是userena代码有一些不同，应该是这样的：

**视图.py：**

```
if userena_settings.USERENA_WITHOUT_USERNAMES and (signup_form == SignupForm):
    signup_form = SignupFormOnlyEmail

form = signup_form()

if request.method == 'POST':
    form = signup_form(request.POST, request.FILES)
    if form.is_valid():
        user = form.save()

        # Send the signup complete signal
        userena_signals.signup_complete.send(sender=None,
                                             user=user)

        if success_url: redirect_to = success_url
        else: redirect_to = reverse('userena_signup_complete',
                                    kwargs={'username': user.username})

        # A new signed user should logout the old one.
        if request.user.is_authenticated():
            logout(request)
        return redirect(redirect_to)

if not extra_context: extra_context = dict()
extra_context['form'] = form
return ExtraContextTemplateView.as_view(template_name=template_name,
                                        extra_context=extra_context)(request) 
```

**网址.py：**

```
url(r'^accounts/signup/$', 'userena.views.signup', {'signup_form': SignupFormExtra}), 
```

所以我的大问题在这里 - 整合这两件事，但我什至不知道我应该从什么开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:22:19.637

可能更好的主意是使用类似[http://wbotelhos.com/stepy](http://wbotelhos.com/stepy)的东西并在单页上显示您的表单？

# image-processing - 使用 openCV 检测图案区域

> ID：14601491
> 
> 赞同：0
> 
> 时间：2013-01-30T10:16:19.800
> 
> 标签：image-processing, opencv, emgucv, opencvsharp

我正在处理一些图像处理问题，我必须检测具有特定图案的区域。除了图案之外，图像中绝对没有其他可用信息——没有颜色、无法进行模板匹配、可怕的光照条件变化、阴影等等。使用 sobel 算子，我得到一个相对一致的图像。

[这是一个例子](http://i.tinyuploads.com/QtI4qF.jpg)

我可以使用什么方法来检测这些交叉区域？图像上有很多其他的东西，所以基于强度的斑点检测是没有选择的。

任何帮助或提示都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:46:36.750

一种简单的方法是结合定向线性滤波器，例如 DoG 或 Sobel 内核。如果您事先知道阴影线的方向，则可以创建两个具有这些方向的内核，并且具有足够的伸长率以从实际直线中分出噪声。这为您提供了两个过滤器响应图像。您现在可以在这些响应图像上使用形态膨胀来将响应扩展到线之间的区域。最后，您可以制定一个由两部分组成的标准，要求两个响应都必须高于某个水平，并且它们必须在幅度上相互可比。

如果您事先不知道方向，则存在类似的解决方案，但您需要更大的滤波器组和更复杂的标准（例如，垂直于最大响应方向的响应必须至少是最大响应的 70%） .

# javascript - 将 JSON 转换为数组 Javascript

> ID：14601494
> 
> 赞同：9
> 
> 时间：2013-01-30T10:16:23.153
> 
> 标签：javascript, jquery, ajax, json

我目前正在从我的应用程序的服务器端接收一个 JSON 对象，结果是这样的

```
{"tags":"[{value: 2,label: 'Dubstep'},{value: 3,label: 'BoysIIMen'},{value: 4,label:'Sylenth1'}]"} 
```

但是我真的不需要结果中的“标签”和双引号。

所以我想要的是那个 JSON 对象的数组表示

因此我将如何转换它

```
{"tags":"[{value: 2,label: 'Dubstep'},{value: 3,label: 'BoysIIMen'},{value: 4,label:'Sylenth1'}]"} 
```

对此

```
[{value: 2,label: 'Dubstep'},{value: 3,label: 'BoysIIMen'},{value: 4,label:'Sylenth1'}] 
```

这是创建数组的循环

```
String k = "["; 
        List<Tag> tg = audioTaggingService.findTagsByName(q);
        for(int i = 0; i<audioTaggingService.findTagsByName(q).size();i++){
            Tag t = tg.get(i);
            if(i == (tg.size() - 1)){
                k+="{value: "+t.getId()+",label:'"+t.getName()+"'}";
            }else{
                k+="{value: "+t.getId()+",label:'"+t.getName()+"'}";
            }
        }
        k+="]"; 
```

上面代码的结果是这样的

```
[{value: 2,label: 'Dubstep'},{value: 3,label: 'BoysIIMen'},{value: 4,label:'Sylenth1'}] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T10:19:02.997

假设您在一个名为的 javascript 对象中获得了服务器端响应，您可以使用该函数`response`解析`tags`字符串属性。`$.parseJSON`但首先您需要修复服务器端代码，以便它为 tags 属性返回一个有效的 JSON 字符串（在 JSON 中，属性名称必须用引号括起来）：

```
// This came from the server
var response = {"tags":"[{\"value\": 2,\"label\": \"Dubstep\"},{\"value\": 3,\"label\": \"BoysIIMen\"},{\"value\": 4,\"label\":\"Sylenth1\"}]"};

// Now you could parse the tags string property into a corresponding
// javascript array:
var tags = $.parseJSON(response.tags);

// and at this stage the tags object will contain the desired array
// and you could access individual elements from it:
alert(tags[0].label); 
```

如果由于某种原因您无法修改服务器端脚本以在`tags`属性中提供有效的 JSON，您仍然可以使用`eval`而不是`$.parseJSON`：

```
var tags = eval(response.tags); 
```

这不是推荐的方法，通常你应该避免使用`eval`，因为它会执行任意的 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T17:51:33.620

```
initSelection: function (element, callback) {
                    var data = $(element).val();
                    callback($.parseJSON(data));
                } 
```

# php - 如何删除具有相同前缀名称的多个目录？

> ID：14601495
> 
> 赞同：0
> 
> 时间：2013-01-30T10:16:31.020
> 
> 标签：php, filesystems, directory, rmdir

我知道我们可以使用以下功能删除目录：

```
rmdir($path); 
```

但是我想删除一组具有相同前缀的目录。例如有目录：

A_Folder1、A_Folder2、A_Folder3、B_Folder1、B_Folder2、B_Folder3

然后我想删除所有带有前缀“A_”的文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:57:08.460

例如，它可以实现如下：

```
<?php

    $dir = '/path/to/some/dir/'; // notice: trailing slash!
    if ($handle = opendir($dir)) {
        while (false !== ($entry = readdir($handle))) {
            if (is_dir($dir . $entry) && strtolower(substr($entry, 0, 2)) == 'a_') {
                rmdir($dir . $entry);
            }
        }
        closedir($handle);
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:19:59.180

至少有两种简单的方法：

```
exec('rm -rf PREFIX*'); 
```

或者你可以使用`glob`和`is_dir`功能

# android - 如何在android的Webview中获取媒体控件？

> ID：14601496
> 
> 赞同：0
> 
> 时间：2013-01-30T10:16:31.227
> 
> 标签：android, webview, mediacontroller

我在 android 中有 Webview，目前正在播放来自 Url 的 youtube 视频。在 webview 的顶部，有一个`actionbar`. 我想`actionbar`在视频播放时隐藏并在视频播放`actionbar`时显示`onPause`。有什么方法可以获取`webview`. 或者我可以`mediaControls`在`webview`. 这是我的 webview 代码：

```
 mVideoView.getSettings().setJavaScriptEnabled(true);
        mVideoView.getSettings().setPluginsEnabled(true);
        mVideoView.getSettings().setAllowFileAccess(true);
        mVideoView.setWebChromeClient(new ChromeClient());
        mVideoView.setWebViewClient(webViewClient);
        mVideoView.loadUrl("http://www.youtube.com/embed/" + video_id); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:16:57.970

尝试

mVideoView.getSettings().setPluginState(PluginState.ON_DEMAND);

# eclipse - Pax Exam 2.6.0 + Karaf 2.3.0 - 在 Eclipse 中调试失败 - NotBoundException

> ID：14601497
> 
> 赞同：0
> 
> 时间：2013-01-30T10:16:33.030
> 
> 标签：eclipse, debugging, integration-testing, apache-karaf, pax-exam

我一直在使用 Pax Exam 2.6.0 通过**Karaf Exam Container**在 Apache Karaf 2.3.0 上运行集成测试。

一切都按预期工作，除了来自 Eclipse 的集成测试的本地调试（不是远程）。我在这里找到了一个建议的解决方案：http: [//team.ops4j.org/wiki/display/paxexam/FAQ#FAQ-WhydoestheJavadebuggernotstopatabreakpointIsetinmyPaxExamJUnittest%3F](http://team.ops4j.org/wiki/display/paxexam/FAQ#FAQ-WhydoestheJavadebuggernotstopatabreakpointIsetinmyPaxExamJUnittest%3F)

> 使用 Pax Runner 容器时，您要处理两个 Java VM 进程，一个运行测试驱动程序，一个运行 OSGi 框架。JUnit 类的执行流程实际上是在两个 VM 之间拆分的，并且您的测试方法的主体在远程 VM 上执行。
> 
> 因此，您需要在 @Configuration 方法中使用 vmOption() 为生成的 VM 启用远程调试，例如
> 
> vmOption("-Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=5005"), systemTimeout(0)

不幸的是，这不起作用，当我尝试在调试模式下从 Eclipse 启动 JUnit 测试时，我不断收到每个 @Test 运行的这些错误 - 带注释的方法：

```
java.rmi.NotBoundException: c59ea59a-f771-47fe-aac8-aa7f5c72b17d
    at sun.rmi.registry.RegistryImpl.lookup(RegistryImpl.java:136)
    at sun.rmi.registry.RegistryImpl_Skel.dispatch(Unknown Source)
    at sun.rmi.server.UnicastServerRef.oldDispatch(UnicastServerRef.java:409)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:267)
    at sun.rmi.transport.Transport$1.run(Transport.java:177)
    at sun.rmi.transport.Transport$1.run(Transport.java:174)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:173)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:553)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:808)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:667)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
    at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:273)
    at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:251)
    at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:377)
    at sun.rmi.registry.RegistryImpl_Stub.lookup(Unknown Source)
    at org.ops4j.pax.exam.rbc.client.intern.RemoteBundleContextClientImpl.getRemoteBundleContext(RemoteBundleContextClientImpl.java:263)
    at org.ops4j.pax.exam.rbc.client.intern.RemoteBundleContextClientImpl.waitForState(RemoteBundleContextClientImpl.java:234)
    at org.apache.karaf.tooling.exam.container.internal.KarafTestContainer.waitForState(KarafTestContainer.java:599)
    at org.apache.karaf.tooling.exam.container.internal.KarafTestContainer.start(KarafTestContainer.java:183)
    at org.ops4j.pax.exam.spi.reactors.AllConfinedStagedReactor.invoke(AllConfinedStagedReactor.java:67)
    at org.ops4j.pax.exam.junit.JUnit4TestRunner$2.evaluate(JUnit4TestRunner.java:285)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
    at org.ops4j.pax.exam.junit.JUnit4TestRunner.run(JUnit4TestRunner.java:94)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

控制台视图中唯一显示的是以下行：

> 在地址监听传输 dt_socket：5005

我的系统详细信息如下：

*   操作系统：Windows 7 64 位
*   Java版本：Oracle Java 7 Update 9 64bit
*   Pax 考试版本：2.6.0
*   IDE：Eclipse 4.2

这个问题每次都会发生。

作为结论：我的目标是能够直接从 Eclipse IDE 在调试模式下运行 jUnit 集成测试。有人有建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:47:16.677

将此添加到您的 Option [] cfg 中。

KarafDistributionOption.debugConfiguration("8889", true)

# c++ - C++ 应用程序构建时间/日期保存

> ID：14601500
> 
> 赞同：1
> 
> 时间：2013-01-30T10:16:36.763
> 
> 标签：c++, linux, g++

我知道在 NetBeans 和 Visial 中，您可以以某种方式静态保存应用程序的日期和构建时间。我正在使用 g++ 在远程服务器上构建一些软件，我想知道是否有一种方法可以创建例如这样的东西：

```
#define BUIL_DATE <here should be the compilation date> 
```

我可以稍后在应用程序中使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:20:28.497

和`__TIME__`( `__DATE__`GCC-specific) 宏是您正在寻找的。例如：

```
#define BUILDSTAMP ( __DATE__ " " __TIME__ ) 
```

见： http: [//gcc.gnu.org/onlinedocs/cpp/Standard-Predefined-Macros.html](http://gcc.gnu.org/onlinedocs/cpp/Standard-Predefined-Macros.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:23:06.607

尝试：

```
#define BUIL_DATE                                                           \
    do {                                                                    \
        std::cout << " compiled on " __DATE__ " : " __TIME__ << "\n";       \
    } while (0)

int main(int argc, char* argv[])
{
    BUIL_DATE;  
    return 0;
} 
```

# javascript - 流星模板中的简单数据反射

> ID：14601506
> 
> 赞同：1
> 
> 时间：2013-01-30T10:16:58.777
> 
> 标签：javascript, node.js, mongodb, meteor, handlebars.js

我是流星的新手，对模板如何处理数据反射有一个很大的误解。例如，我在数据库中有一些数据，如下所示：

```
{name: {firstName: "foo",
lastName: "bar"},
father: "buz"} 
```

我能反映它的方式对我来说真的很可怕。我只能这样反映：

JS：

```
var Products = new Meteor.Collection("Products");

if (Meteor.isClient) {
  Template.DataTry.dataTryArr = function(){
     return DataTry.find({father: "buz"});
  };
} 
```

html:

```
<head><title>...</title></head>
<body>{{>DataTry}}</body>
<template name="DataTry">
  {{#each dataTryArr}}
    <p>Mr. {{father}} has a son {{name.firstName}}. They are both {{name.lastName}}</p>
  {{/each}}
</template> 
```

它正在工作和反思。但我无法理解，`{{#each}}`为什么我需要`dataTryArr`！is 不工作 w/o `dataTryArr`,`{{#if dataTryArr}}`等等`Template.DataTry = function(){...}`。总之它不能工作 w/o `{{#each}}`（在那里迭代什么？！）

请帮助我了解如何以这种方式反映简单数据

```
<head><title>...</title></head>
<body>{{>DataTry}}</body>
<template name="DataTry">
    <p>Mr. {{father}} has a son {{name.firstName}}. They are both {{name.lastName}}</p>
</template> 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:44:00.637

您必须使用其中一个`{{#each}}`或`{{#with}}`块帮助器来迭代从模板帮助器返回的值。

如果您的模板助手从集合中返回一堆数据，您可能需要`{{#each}}`迭代器，以便在 DOM 中呈现返回的值。如果模板助手返回单个对象，在这种情况下`{{#with}}`可以使用块。

你已经建议了这个：

```
<body>{{>DataTry}}</body>
<template name="DataTry">
    <p>Mr. {{father}} has a son {{name.firstName}}. They are both {{name.lastName}}</p>
</template> 
```

这不会以任何方式起作用，如果返回对象数组，您应该将 inside 块括`<p> ... </p>`起来。`{{#each}}``Template.DataTry.dataTryArr()`

```
<template name="DataTry">
  {{#each dataTryArr}}
    <p>Mr. {{father}} has a son {{name.firstName}}. They are both {{name.lastName}}</p>
  {{/each}}
</template> 
```

简而言之，`{{#each dataTryArr}}`将调用该`dataTryArr`方法并遍历返回的值。

# java-me - 尝试设置播放器的媒体时间时出现媒体异常

> ID：14601510
> 
> 赞同：1
> 
> 时间：2013-01-30T10:17:18.010
> 
> 标签：java-me

我正在开发视频播放器。我也在做这个流媒体：

```
String url="rtsp://v1.cache5.c.youtube.com/CjYLENy73wIaLQm8E_KpEOI9cxMYDSANFEIJbXYtZ29vZ2xlSARSBXdhdGNoYLm0hv_ig5HRTww=/0/0/0/video.3gp";
VideoComponent videoComponent = VideoComponent.createVideoPeer(url);
Player player = (Player) videoComponent.getNativePeer();
player.realize();
player.prefetch();
player.start();
player.setMediaTime(9000000); // set the starting media time as 9 sec . 
```

当我设置媒体时间时，它会引发媒体异常。但是当我从资源文件夹中显示视频时，它可以成功运行。但是当我进行流式传输时，它会引发错误。
设置媒体时间的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:45:23.843

rtsp 代表[实时流协议](http://en.wikipedia.org/wiki/Real_Time_Streaming_Protocol)。根据该页面（PLAY 会话）上的信息，您可以使用 Range 请求属性。
请尝试使用`HttpConnection`并调用，然后使用此流而不是url `setRequestProperty("Range", "9")`创建您的。`VideoComponent``String`

# javascript - 标题按钮中的中心文本

> ID：14601514
> 
> 赞同：0
> 
> 时间：2013-01-30T10:17:21.880
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我有这样的事情：

![在此处输入图像描述](../Images/0c7cf12b56cd4ad1983549d1e9b10ca9.png)

如何使文本与符号高度相同？

注销和收藏应该在“X”按钮旁边。

一些代码：

HTML：

```
<div  data-role="page" data-hash="false" id="companyPage" >
        <div data-role="header" data-position="fixed" data-theme="a">
            <h1>&nbsp;</h1>
            <a onclick="logout()"  data-role="button"  data-transition="none" data-icon="delete">Logout</a>
            <a id="favpage"  onclick="getfav()" data-role="button" data-transition="none" data-icon="star">Fav</a>
        </div>
        <!-- /header -->

        <div data-role="content">
            <ul data-transition="none" data-role="listview" data-filter="true" id="companies" data-inset="true" data-filter-placeholder="Search Company..." data-split-icon="gear" data-split-theme="d" data-filter-theme="d" data-divider-theme="b">
            </ul>
        </div>
        <!-- /content -->
</div> 
```

CSS：

```
.ui-header .ui-btn-inner  { font-size: 14px;  height:35px; padding: .6em 10px; min-width: .75em; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:20:19.337

您可以更改文本的行高以匹配按钮的高度。

如果按钮高 30 像素，并且文本在`a`元素中，那么您的 CSS 将是：

```
a {
    height: 30px;
    line-height: 30px;
    display: block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:46:03.320

如果这是按钮的 css，那么：

```
.ui-header .ui-btn-inner  { 
        font-size: 14px;  
        height:35px; 
        padding: .6em 10px; /* here .6em = 12px */
        line-height:47px;
        min-width: .75em; 
} 
```

因此您可以`line-height`对此应用价值：`12px+height`即`47px`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:22:52.467

据我了解，您的图标正在定义按钮的高度。如果它是真的，您应该将文本高度定义为等于图标，然后将垂直对齐设置为中间。

# php - 将动态文本框中的值存储到 javascript 变量中

> ID：14601515
> 
> 赞同：0
> 
> 时间：2013-01-30T10:17:26.203
> 
> 标签：php, javascript, mysql

嗨，我是 php 新手，我有一个表单，它在按钮单击时添加了一个动态表行，我能够保存它以及检索它，但是当我用我创建的数据检索动态行时问题就来了隐藏的文本框，用于存储添加的行的计数器，但问题是当我尝试将其值存储到我的 javascript 变量中时，它显示 NaN 而没有存储的计数器值我无法将值保存到我的数据库中我只是一个新手所以请帮助我这是我的javascript代码

```
<script language="javascript" type="text/javascript">
                        var jj= document.getElementByName('hh').value;
                        alert(jj);
                        function addRow()
                        {
                            //alert(jj)
                            var tbl = document.getElementById('zimtable');
                            var lastRow = tbl.rows.length;
                            var iteration = lastRow - 1;
                            var row = tbl.insertRow(lastRow);

                            var firstCell = row.insertCell(0);
                            var el = document.createElement('input');
                            el.type = 'text';
                            el.name = 'zimname_' + jj;
                            el.id = 'zimname_' + jj;
                            el.size = 40;
                            el.maxlength = 40;
                            firstCell.appendChild(el);

                            var secondCell = row.insertCell(1);
                            var el2 = document.createElement('input');
                            el2.type = 'text';
                            el2.name = 'zimmob_' + jj;
                            el2.id = 'zimmob_' + jj;
                            el2.size = 13;
                            el2.maxlength = 13;
                            secondCell.appendChild(el2);

                            // alert(i);
                            //$('#hh').val(jj); 
                            jj++;
                            makhtab.hh.value=jj;

                             alert(jj);
                        }
                    </script> 
```

这是我的 php 代码，它选择数据 n 显示输出

```
 $zim = mysql_query("SELECT * FROM `makhzim` WHERE makhcode='$newsid' ORDER BY srno")or die(mysl_error());
                            $ctrzim= 0;
                            while ($zrow = mysql_fetch_array($zim)){
                                 $ctrzim++;
                                       echo"<tr>";
                                        echo "<td><input name='zimname_$ctrzim' type='text'  size='40' maxlength='20' value=$zrow[name] /></td>";
                                        echo "<td><input name='zimmob_$ctrzim'  type='text'   size='13' maxlength='20' value=$zrow[mobile] /></td>";
                                        echo "</tr>";
                            }echo "</table>";
                            echo "<input type='button' value='Add' onclick='addRow();' /><input id=\"hh\" name=\"hh\" type='hidden' value='$ctrzim'/>";
                            ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:47:06.933

尝试使用 document.getelementbyid

```
var hiddenvalue = document.getElementById('hh').value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:30:44.480

尝试改变：

```
var jj = document.getElementByName('hh').value; 
```

至：

```
var jj = document.getElementsByName('hh')[0].value; 
```

*请注意：*函数的名称是`getElementsByName()`. 注意复数“getElements”。

*更新*了 jsFiddle：http: [//jsfiddle.net/aazev/Ct76z/](http://jsfiddle.net/aazev/Ct76z/)

显示的 PHP 代码仅用于说明目的。

# php - 从 MySQL 中的单个表中查找与给定结果相似的结果

> ID：14601516
> 
> 赞同：0
> 
> 时间：2013-01-30T10:17:41.280
> 
> 标签：php, mysql, sql

我有一个包含这些列的表：

> id - 姓名 - 性别 - 年龄 - 国家

我想显示所有具有相同名称的人`gender`，`age`以及`country`MySQL 和 PHP 中的某个人。

什么是最好的 MySQL 查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:30:45.613

尝试这个：

```
SELECT p1.Name
FROM peoplenames p1
INNER JOIN
(
  SELECT Gender, Age, Country
  FROM peoplenames p1
  GROUP BY Gender, Age, Country
  HAVING COUNT(*) > 1
) p2  ON p1.Gender  = p2.Gender
     AND p1.Age     = p2.Age
     AND p1.Country = p2.Country; 
```

这将忽略那些没有`Gender, Age, Country`.

这将为您提供具有相同的名称`Gender, Age, Country`。但如果这种组合`Gender, Age, Country`只出现一次，那么这些名称将被忽略。

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/6efde/5)

例如，让我们有以下示例数据：

```
| ID |     NAME | GENDER | AGE | COUNTRY |
------------------------------------------
|  1 |    Ahmed |   Male |  20 |   Egypt |
|  2 | Mohammed |   Male |  20 |   Egypt |
|  3 |      ali |   Male |  20 |   Egypt |
|  4 |     Saly | Female |  25 |  Jordan |
|  5 |     Sara | Female |  25 |  Jordan |
|  6 | Mohammed |   Male |  60 |   Egypt |
|  7 |   Khalid |   Male |  20 |     KSA | 
```

`Ahmed`, `Mohammed`(id 为 2) 并且`ali`具有相同的`Gender`,`Age`和`Country`: `Male, 20, Egypt`。

与`saly`和相同`Sara`。将仅选择五个名称：

```
|     NAME |
------------
|    Ahmed |
| Mohammed |
|      ali |
|     Saly |
|     Sara | 
```

而其他人：

```
|  6 | Mohammed |   Male |  60 |   Egypt |
|  7 |   Khalid |   Male |  20 |     KSA | 
```

没有其他行具有相同的`Gender, Age, Country`，因此它们被忽略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T10:30:48.127

```
SELECT
yt.*
FROM yourTable AS yt
JOIN 
(SELECT * FROM yourTable yt2 WHERE id = $id) yt3
ON yt.Gender = yt3.Gender AND yt.Age = yt3.Age AND yt.Country = yt3.Country 
```

**看它[现场表演](http://www.sqlfiddle.com/#!2/6efde/2/0)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T10:24:57.827

```
SELECT Name 
FROM table_name
WHERE Gender  = (SELECT Gender FROM  table_name WHERE id = $x) AND 
      Age     = (SELECT Age FROM  table_name WHERE id = $x) AND 
      Country = (SELECT Country FROM  table_name WHERE id = $x); 
```

`$x`将是特定人的 id。

根据@fthiella 评论

```
SELECT Name 
FROM table_name
WHERE (Gender, Age, Country) = (SELECT Gender, Age, Country FROM table_name WHERE id = $x) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T10:26:23.940

```
select `name` from `tablename` group by `gender`,`age `,`country`; 
```

# ios - iOS：使用蓝牙音频输出 (kAudioSessionProperty_OverrideCategoryEnableBluetoothInput) AudioSession

> ID：14601517
> 
> 赞同：6
> 
> 时间：2013-01-30T10:17:42.557
> 
> 标签：ios, bluetooth, core-audio, audiosession, a2dp

我对与几个蓝牙任务相关的 CoreAudio AudioSession 框架有几个问题，我希望有人可以帮助我解决这些问题，或者至少可以确认我的最新发现。用例是一个导航应用程序，它想要连接支持 HFP 和 A2DP 的蓝牙收音机。我已经阅读了整个 AudioSession 编程指南，但我仍然有一些未解决的问题，尤其是通过蓝牙使用音频输出。

1.  蓝牙 HFP 音频输出 (kAudioSessionOutputRoute_BluetoothHFP) 仅在设置了 AudioSession kAudioSessionCategory_PlayAndRecord 并且您覆盖以下属性的情况下才有可能：kAudioSessionProperty_OverrideCategoryEnableBluetoothInput。这是真的？如果没有，我如何将 MediaPlayback 会话作为示例路由到 kAudioSessionOutputRoute_BluetoothHFP 路由。

2.  类别 kAudioSessionCategory_PlayAndRecord 无法在后台模式下输出音频。因此，如果我在后台，我无法通过蓝牙 HFP 路由播放声音。这是真的？如果应用程序在后台，有没有办法通过蓝牙 HFP 协议发送音频？

3.  如果有支持 A2DP 的设备可用，我的音频路由将始终自动切换到 kAudioSessionOutputRoute_BluetoothA2DP 路由。如何防止此路线更改？另外我如何指定我现在想要的输出路线。使用 iOS5，可以通过 kAudioSessionProperty_AudioRouteDescription 标志查询所有这些路由目的地，但我不知道如何设置它，因为我想要它。有没有可能实现这一目标？

我希望你们中的一些人可以帮助我解决这些问题。它真的会帮助我全面了解 CoreAudio，尤其是 AudioSession 框架。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-30T21:41:52.480

AudioSession 是一件棘手的事情。

> 1.Bluetooth HFP 音频输出 (kAudioSessionOutputRoute_BluetoothHFP) 仅在设置了 AudioSession kAudioSessionCategory_PlayAndRecord 并且您覆盖以下属性的情况下才有可能：kAudioSessionProperty_OverrideCategoryEnableBluetoothInput。这是真的？如果没有，我如何将 MediaPlayback 会话作为示例路由到 kAudioSessionOutputRoute_BluetoothHFP 路由。

如果您连接了蓝牙耳机，那就是真的。您将需要 kAudioSessionCategory_PlayAndRecord 音频会话集和 kAudioSessionProperty_OverrideCategoryEnableBluetoothInput 集才能从蓝牙耳机中播放音频。EnableBluetoothInput 根据[this](http://lists.apple.com/archives/coreaudio-api/2009/Oct/msg00030.html/)影响输入和输出。另请记住，由于蓝牙输入设备的限制，音频将以 8000 Hz 的频率播放。对于连接的支持 A2DP 的设备，您可以将其保留在音频会话 kAudioSessionCategoryMediaPlayback 中，它将以 44100 Hz 的采样率播放。

> 2.kAudioSessionCategory_PlayAndRecord 类别无法在后台模式下进行音频输出。因此，如果我在后台，我无法通过蓝牙 HFP 路由播放声音。这是真的？如果应用程序在后台，有没有办法通过蓝牙 HFP 协议发送音频？

只要您在应用程序列表中设置了背景音频模式键，就可以在后台通过蓝牙 HFP 播放音频。[在这里](https://developer.apple.com/library/ios/documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)查看更多。

> 3.如果有支持 A2DP 的设备可用，我的音频路由将始终自动切换到 kAudioSessionOutputRoute_BluetoothA2DP 路由。如何防止此路线更改？另外我如何指定我现在想要的输出路线。使用 iOS5，可以通过 kAudioSessionProperty_AudioRouteDescription 标志查询所有这些路由目的地，但我不知道如何设置它，因为我想要它。有没有可能实现这一目标？

您希望音频转到哪里？您可以尝试将音频会话设置为 PlayAndRecord 以防止其进入 A2DP。不过，这可能超出您的控制范围，Audio Session 将使用它认为对用户而言直观的内容。如果他们只是连接了 A2DP 设备而您只是输出音频，则将使用 A2DP 设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:14:33.227

他们提到它只适用于 USB 配件。

[http://developer.apple.com/library/ios/#documentation/AudioToolbox/Reference/AudioSessionServicesReference/Reference/reference.html](http://developer.apple.com/library/ios/#documentation/AudioToolbox/Reference/AudioSessionServicesReference/Reference/reference.html)

# linux - 隐藏期望的输出

> ID：14601526
> 
> 赞同：24
> 
> 时间：2013-01-30T10:17:59.590
> 
> 标签：linux, expect

这是期望脚本的一部分

```
#/usr/bin/expect 

spawn -noecho kwalletcli -f Passwords -e keyofmypassword
expect ".*"
set passwd $expect_out(buffer)

# do some thing
# ... 
```

它从 kwalletcli 读取密码，并存储在变量中`passwd`。所以我可以用这个连​​接到服务器`passwd`。

但是，kwalletcli 的输出是通过 expect 并在控制台上显示的。我怎么能隐藏它。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-02-01T20:44:03.997

尝试添加

```
log_user 0 
```

到你的脚本。那应该关闭显示到标准输出。

如果您想为程序的“做某事”部分再次打开它，请重新启用它

```
log_user 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:51:49.040

使用这个命令：

```
exec >log 2>&1 
```

您可以将输出转发到文件，也可以将其传递给 dev/null

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-02T16:58:36.963

与 -stty 和 stty

stty -echo send_user "密码：" expect_user -re "(.*)\n" 设置密码 $expect_out(1,string) stty echo

# vim - 键入错误拼写时 Vim 自动更正

> ID：14601532
> 
> 赞同：1
> 
> 时间：2013-01-30T10:18:04.920
> 
> 标签：vim, vim-plugin

在我完成输入该单词后立即自动将第一个建议替换为第一个建议，如何使 vim 自动更正拼写？我试过了

`:imap <Space> <Space><ESC>h1z=<End>I<End>`

但这会用错误的单词替换所有正确的单词。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T10:41:03.083

我不认为自动更正是一个好主意（你如何处理 Vim 还不知道的单词？），但我有这个插入模式映射来快速更正最后一个拼写错误的单词。只需`<C-Z>`在键入时出现红色波浪线时按下：

```
:inoremap <C-z> <Esc>[s1z=gi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T13:58:49.440

您可能会考虑使用[https://github.com/panozzaj/vim-autocorrect](https://github.com/panozzaj/vim-autocorrect)来尝试在您键入后立即自动更正许多 Vim 拼写错误的方法。

# c# - WPF中的HTML弹出窗口

> ID：14601536
> 
> 赞同：0
> 
> 时间：2013-01-30T10:18:17.127
> 
> 标签：c#, .net, wpf, silverlight

如何在 WPF 中弹出 html 弹出窗口？在 Silverlight 中，我尝试过如下所示，效果很好。

```
 HtmlPopupWindowOptions options = new HtmlPopupWindowOptions()
        {
            Directories = false,
            Location = false,
            Menubar = false,
            Status = false,
            Toolbar = false,
            Resizeable = true,
            Width = 1024,
            Height = 640,
        };

        HtmlPage.PopupWindow(new Uri(strUrl), "_blank", options); 
```

但是在 wpf 中没有与`HtmlPopupWindowOptions`类相关的引用。如何在 WPF 中显示 html 弹出窗口？

# asp.net - 动态绑定数据时设置 DataKeyNames 属性有意义吗？

> ID：14601539
> 
> 赞同：1
> 
> 时间：2013-01-30T10:18:36.267
> 
> 标签：asp.net, gridview

我是 asp.net 的新手，想知道在动态绑定数据时设置 DataKeyNames 属性是否有意义？我使用以下代码绑定数据

```
gvCategory.DataSource = objCategoryInfo;
gvCategory.DataBind(); 
```

这里 gvCategory 是我在 designview 创建的网格视图，而 objCategoryInfo 是我的数据源。是否需要在设计时设置 DataKeyNames 属性。？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:23:48.257

如果您希望能够使用 GridView 更新或删除数据库中的数据，我认为您只需要设置 DataKeyNames。因此，如果您需要使用 GridView 来执行此操作，则设置它是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:23:30.753

> 是否需要在设计时设置 DataKeyNames 属性。？

仅当您希望自动更新或删除功能与 GridView 一起使用时

[GridView.DataKeyNames 属性 - MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.datakeynames.aspx)

> 使用 DataKeyNames 属性指定表示数据源主键的一个或多个字段。**您必须设置 DataKeyNames 属性才能**使 GridView 控件的自动更新和删除功能起作用。

# python - Plone - 覆盖 Zope Schema 字段

> ID：14601544
> 
> 赞同：1
> 
> 时间：2013-01-30T10:18:48.617
> 
> 标签：python, schema, plone, zope

在使用 Plone 时，我已将[DocumentViewer 产品](http://plone.org/products/document-viewer)集成到我的 Plone 应用程序中，以帮助查看 PDF 文件。文档查看器附加产品定义了一组模式/字段，可以在控制面板设置中查看，即**站点设置**->**文档查看器设置**。

[您可以在此处](https://github.com/collective/collective.documentviewer/blob/master/collective/documentviewer/interfaces.py)查看字段/模式的定义方式

`IGlobalDocumentViewerSettings`现在我想通过在我的 example.product 中覆盖它来向界面添加另一个字段。

我认为我不能使用[SchemaExtender](http://pypi.python.org/pypi/archetypes.schemaextender)，因为它们不是原型。我也尝试按照[此链接](http://plone.org/products/collective.examples.userdata)提供的说明进行操作，但无济于事。我可以重新安装我的产品，但未显示我添加的字段。

这是我的代码示例：

```
from collective.documentviewer.interfaces import IGlobalDocumentViewerSettings
from collective.documentviewer.interfaces import IDocumentViewerSettings
from zope import schema
from zope.interface import implements

class DocViewerSchemaProvider(object):
    implements(IGlobalDocumentViewerSettings)

    def getSchema(self):
        """
        """
        return IEnhancedDocumentViewerSchema

class IEnhancedDocumentViewerSchema(IDocumentViewerSettings):
    """ 
    Use all the fields from the default schema, and add various extra fields.
    """

    folder_location = schema.TextLine(
        title=u"Default folder location",
        description=u'This folder will be created in the Plone root folder. '
                    u'Plone client must have write access to directory.',
        default=u"files_folder") 
```

谁能帮助我如何覆盖这个特定的界面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T21:22:04.903

由于作者（我）没有让覆盖它变得简单，所以覆盖它会有点复杂。以下步骤是您需要执行的操作。警告，这都是伪代码，所以你可能需要调整以使其适合你。

首先，通过扩展您要自定义的界面来提供您的自定义界面：

```
class IEnhancedDocumentViewerSchema(IGlobalDocumentViewerSettings):
    """ 
    Use all the fields from the default schema, and add various extra fields.
    """

    folder_location = schema.TextLine(
        title=u"Default folder location",
        description=u'This folder will be created in the Plone root folder. '
                    u'Plone client must have write access to directory.',
        default=u"files_folder") 
```

然后，创建用于存储和检索架构设置的设置适配器：

```
from collective.documentviewer.settings import Base
class CustomSettings(Base):
    implements(IEnhancedDocumentViewerSchema)
    use_interface = IEnhancedDocumentViewerSchema 
```

然后，注册您的适配器::

```
<adapter 
    for="Products.CMFPlone.interfaces.IPloneSiteRoot"
    provides="my.product.interfaces.IEnhancedDocumentViewerSchema"
    factory=".somewhere.CustomSettings" /> 
```

然后，使用您的自定义架构创建一个表单::

```
from z3c.form import field
from plone.app.z3cform.layout import wrap_form
from collective.documentviewer.views import GlobalSettingsForm
class CustomGlobalSettingsForm(GlobalSettingsForm):
    fields = field.Fields(IEnhancedDocumentViewerSchema)
CustomGlobalSettingsFormView = wrap_form(CustomGlobalSettingsForm) 
```

然后，为您的产品创建一个自定义层，扩展文档查看器层。这将需要 2 个步骤。首先，添加图层接口::

```
from collective.documentviewer.interfaces import ILayer as IDocumentViewerLayer
class ICustomLayer(IDocumentViewerLayer):
    """
    custom layer class
    """ 
```

并使用通用设置注册您的图层。使用以下内容将 xml 文件 browserlayer.xml 添加到您的配置文件中（确保重新安装产品以便注册该层）::

```
<?xml version="1.0"?>
<layers name="" meta_type="ComponentRegistry">
    <layer name="my.product" 
           interface="my.product.interfaces.ICustomLayer" />
</layers> 
```

最后，使用您为您的产品注册的层使用您的自定义表单覆盖全局设置视图：

```
<browser:page
    name="global-documentviewer-settings"
    for="Products.CMFPlone.interfaces.IPloneSiteRoot"
    class=".somewhere.CustomGlobalSettingsFormView"
    layer=".interfaces.ICustomLayer"
    permission="cmf.ManagePortal" /> 
```

哇，那太难了。

# java - 使用 XSL FO 文件使用 iText 布局 PDF

> ID：14601549
> 
> 赞同：7
> 
> 时间：2013-01-30T10:18:56.177
> 
> 标签：java, xslt, pdf, itext, apache-fop

我需要将图形（Java2D 对象）和一些表格转换为 PDF。我还需要 PDF 是交互式的。牢记这些要求，我得出一个结论，我应该为此目的使用 iText。现在我还需要提供使用 XSL FO 布局文件的能力。我知道 Apache FOP 提供了使用 XSL FO 呈现 PDF 的能力，但它不支持添加注释（如注释、链接）。

有没有办法用 iText 做到这一点（使用 XSL 布局）？
即使有一种方法可以同时使用这两个库并达到目的，这也会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-08T14:22:16.557

不，iText 不是 XSLFO 处理器。因此，这不是直接可能的。但是，您可以首先通过 FO 处理器（如 Apache FOP 或 RenderX XEP）生成 PDF，然后在第二步中使用 iText 对其进行后处理以添加注释等注释。

# .htaccess - 基于 url 部分的 htaccess 条件规则

> ID：14601553
> 
> 赞同：0
> 
> 时间：2013-01-30T10:19:09.303
> 
> 标签：.htaccess, mod-rewrite

我有一个类似 domain.com/category/ 的 url 不知何故，谷歌已经选择了 domain.com/category/category/ 最终在其他地方结束。我想创建的规则的“类别”总是相同的，所以我想做的是找到我们的是否匹配，然后删除其中一个。然后该网址将转到正确的位置。

即 domain.com/category/category/ 如果 /category/ 与第二个 /category/ 匹配，则应该像 domain.com/category/ 一样结束

这可能在一个简单的条件下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:22:04.307

是的，可以使用`\1`反向引用的简单条件：

```
RewriteCond %{REQUEST_URI} ^/([^/]+)/\1/
RewriteRule ^/?([^/]+)/([^/]+)/(.*)$ /$1/$3 [L,R=301] 
```

或者您可以在规则中完成所有操作：

```
RewriteRule ^/?([^/]+)/\1/(.*)$ /$1/$2 [L,R=301] 
```

# c++ - 如何使用模板函数和CUDA

> ID：14601555
> 
> 赞同：5
> 
> 时间：2013-01-30T10:19:21.637
> 
> 标签：c++, cuda

所以我有以下代码：

文件：Cuda.cu

```
template <typename T>
__global__ void xpy( int n, T *x, T *y, T *r )
{
    int i = blockIdx.x * blockDim.x + threadIdx.x;
    if (i < n) r[i] = x[i] + y[i];
}

mtx_mtx_add( float *a1, float *a2, float *r, const int &numElements )
{
// snip
xpy<<<numBlocks, blockSize>>>(numElements, a1, a2, r); 
}
mtx_mtx_add( int *a1, int *a2, int *r, const int &numElements ) {:::}
mtx_mtx_add( long long *a1, long long *a2, long long *r, const int &numElements ) {:::} 
```

文件：调用代码

```
extern "C" bool mtx_mtx_add( float *a1, float *a2, float *r, int &numElements );
extern "C" bool mtx_mtx_add( float *a1, float *a2, float *r, int &numElements );
extern "C" bool mtx_mtx_add( float *a1, float *a2, float *r, int &numElements );

int main()
{
... ...
mtx_mtx_add(...);
} 
```

现在我想要的是模板化 mtx_mtx_add 函数。这可能吗？如果可以，怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T10:43:00.870

CUDA 中的编程基本上是 C++。您可以像在标准 C++ 程序中一样使用 C++ 语言的所有功能。

您可以按如下方式创建函数模板：

```
template<typename T>
bool mtx_mtx_add(T *a1, T *a2, T *r, const int &numElements)
{
   xpy<T><<<numBlocks, blockSize>>>(numElements, a1, a2, r);
} 
```

然后，您可以将函数模板专门用于不同的数据类型：

```
template bool mtx_mtx_add<float>(float* a1, float* a2, float* r, const int& numElements);
template bool mtx_mtx_add<int>(int* a1, int* a2, int* r, const int& numElements); 
```

# android - 按下按钮时如何设置按钮突出显示状态直到我按下另一个按钮？

> ID：14601556
> 
> 赞同：0
> 
> 时间：2013-01-30T10:19:20.693
> 
> 标签：android, button, onclick, highlight

嗨，我有这样的 UI 要求-

有四个按钮：`Popular`, `A-z`, `NearBy`,`Category`

可以一次按下其中任何一个。假设如果`Popular`按钮被按下，那么其余的按钮看起来就像没有被按下。

现在我希望它保持这种状态，直到我按下其余三个按钮之一。一旦按下三个中的任何一个，该特定按钮应突出显示，其余按钮应正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:44:02.950

为此，您应该使用单选按钮，并且您需要有一个选择器来为不同的状态定义不同的可绘制对象。这是您如何拥有选择器的方法。将其命名为**button_selector**并将其放入可绘制文件夹。并且您的按钮需要有两个不同的可绘制对象，分别是**正常**状态和**按下**状态。将其命名为**button**和**button_selected**。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true" android:drawable="@drawable/button_selected"></item>

    <item android:state_checked="true" android:drawable="@drawable/button_selected"></item>
    <item android:drawable="@drawable/button"></item>
</selector> 
```

至于单选按钮；

```
<RadioGroup
    android:id="@+id/radio_group_card_selector"
    android:layout_width="wrap_content"
    android:layout_height="28dp"
    android:layout_gravity="center_horizontal|center_vertical"
    android:gravity="center_horizontal"
    android:orientation="horizontal" >

    <RadioButton
        android:id="@+id/radio_group_highlights"
        android:layout_width="69dp"
        android:layout_height="28dp"
        android:layout_gravity="left"
        android:background="@drawable/button_selector"
        android:button="@null"
        android:gravity="center_vertical|center_horizontal"
        android:text="@string/Highlights"
        android:textColor="#21596c"
        android:textSize="10sp"
        android:textStyle="normal" >
    </RadioButton>

    <RadioButton
        android:id="@+id/radio_group_products"
        android:layout_width="69dp"
        android:layout_height="28dp"
        android:layout_gravity="left"
        android:background="@drawable/button_selector"
        android:button="@null"
        android:gravity="center_vertical|center_horizontal"
        android:text="@string/All"
        android:textColor="#21596c"
        android:textSize="10sp"
        android:textStyle="normal" >
    </RadioButton>

    <RadioButton
        android:id="@+id/radio_group_mycards"
        android:layout_width="69dp"
        android:layout_height="28dp"
        android:background="@drawable/button_selector"
        android:button="@null"
        android:checked="true"
        android:gravity="center_vertical|center_horizontal"
        android:text="@string/My_Cards"
        android:textColor="#21596c"
        android:textSize="10sp"
        android:textStyle="normal" >
    </RadioButton>
</RadioGroup> 
```

**所以这样你就不需要在运行时处理代码了。**

**编辑：**如果您只想使用颜色而不是可绘制对象，那么您可以使用下面的代码来更好地理解它是如何工作的。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:state_pressed="true"> <!-- pressed -->
    <shape>
        <gradient
            android:startColor="#058CF5"
            android:centerColor="#0273ED"
            android:centerY="0.75"
            android:endColor="#015DE6"
            android:angle="270" />
    </shape>    
</item>

<item android:state_checked="true"> <!-- focused -->
    <shape>
        <gradient
            android:startColor="#058CF5"
            android:centerColor="#0273ED"
            android:centerY="0.75"
            android:endColor="#015DE6"
            android:angle="270" />
    </shape>    
</item>

<item>      <!-- default -->
    <shape>
        <solid android:color="#E6E6E6" />
    </shape>
</item> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:41:19.323

```
private TextView[] viewsArray;
public void onCreate(Bundle bundle){
      super.onCreate(bundle);
      setContentView(R.layout.mylayout);
      TextView[] array // all your buttons
      for (TextView view : array) {
        view.setOnClickListener(mListener);
      }

     viewsArray = array;
}
private OnClickListener mListener = new OnClickListener(){
     public void onClick(View view){
                    resetViews();
                    view.setBackgroundResource(R.drawable.selected);
    }
};
private void resetViews(){
 for(TextView view : viewsArray){
         view.setBackgroundResource(R.drawable.notselected);
  }
} 
```

# ruby-on-rails - 带有条件的查询的 Rails、Heroku 和 PG 语法错误

> ID：14601557
> 
> 赞同：0
> 
> 时间：2013-01-30T10:19:28.520
> 
> 标签：ruby-on-rails, postgresql, heroku

我一直在尝试用两个条件`start`和`end`日期时间进行简单的查询。

在开发模式下我没有任何问题，它似乎运行良好（SQLite）

但是在生产模式下我有以下错误：

```
 ActionView::Template::Error (PG::Error: ERROR:  syntax error at or near "end"
 LINE 1: ...ions"  WHERE (start >= '2013-01-30T10:12:24Z' AND end >= '20...
: SELECT COUNT(*) FROM "missions"  WHERE (start >= '2013-01-30T10:12:24Z' AND end >= '2013-01-30T10:12:24Z')):
                                                              ^
     6:                 <li class="mission clearfix">
     1: <h4 class="heading-sep"><%= t(".upcoming_missions")%></h4>
     2: <div class="missions-timeline">
     3:     <ul class="mission-list">
   app/views/users/show.html.erb:12:in `_app_views_users_show_html_erb___1717297229253226868_63256380'
     7:                     <div class="mission-wrap clearfix">
     4:         <% if @upcoming_missions.any? %>

     5:             <% @upcoming_missions.each do |mission| %>
   app/views/users/_mission_timeline.html.erb:4:in `_app_views_users__mission_timeline_html_erb__2786253018340202740_62779040' 
```

在我的控制器中，我有以下查询：

```
@upcoming_missions = Mission.where("start >= ? AND end >= ?", Time.now, Time.now).order("created_at DESC")

@current_missions = Mission.where("start <= ? AND end >= ?", Time.now, Time.now).order("created_at DESC")

@past_missions = Mission.where("start <= ? AND end <= ?", Time.now, Time.now).order("created_at DESC") 
```

我尝试了其他建议，包括`.utc`以防 PG 读取时间与 SQLite 不同......但我不确定问题出在哪里。

谢谢您的帮助

奥雷连

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T23:26:12.393

该问题的解决方案是该词`end`是[PostgreSQL 的保留关键字](http://www.postgresql.org/docs/7.3/static/sql-keywords-appendix.html)。感谢 Micapam 的回答和链接。

就我而言，我的 Missions 表有名为`start`and的日期时间列`end`。在开发模式下使用 SQLite 运行时，它没有返回任何错误，并且以正确的方式对我的任务进行排序。奇怪的是，`end`它也是[SQLite 中的保留关键字，](http://www.sqlite.org/lang_keywords.html)但仍然让我运行我的查询。

为了解决这个问题，我只是在迁移中重命名了我的列

```
class ChangeStartAndEndFromMission < ActiveRecord::Migration
  def change
    change_table :missions do |t|
      t.rename :start, :start_time
      t.rename :end, :end_time
    end
  end
end 
```

最好检查这些保留关键字以确保没有冲突。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-21T05:42:34.483

我没有足够的代表来添加到 Aurelien 的答案中，但我只是想说你也可以`table_name.end`在你的情况下使用，而不仅仅是`end`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:00:00.300

我认为这可能是恼人的 Postgres 的日期和时间之间的“T”。尝试使用 strftime 查找 Postgres 喜欢的格式 - 例如：

```
Time.now.strftime('%F %T') 
```

这会给你一个日期/时间字符串，比如`2013-01-30 21:58:07`.

# linux - Linux shell脚本对文件进行计数并在它们超过数字时删除

> ID：14601560
> 
> 赞同：0
> 
> 时间：2013-01-30T10:19:36.883
> 
> 标签：linux, shell

我想运行一个 cron 作业，当它超过一个数字时删除目录中的所有文件。

例如，当它变成 1000 个文件时，则删除该目录中的所有文件。

目标是清除缓存目录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:32:55.753

```
#!/bin/bash
CACHE_DIR=/home/cache
if [[ `ls -al $CACHE_DIR | wc -l` -ge 1000 ]] ; then 
     find $CACHE_DIR -t file -exec rm -f {} \; 
fi; 
```

如果文件数大于等于 1000，则删除 /home/cache 中的所有常规文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-30T16:33:29.393

典型的最近最少使用 (LRU) 缓存不会删除所有文件，而是删除那些最近不使用的旧条目并保留最近使用的条目。

```
ls -ut1 | tail -n+1001 | xargs -n 50 rm 
```

这将按访问时间对目录中的所有文件进行排序，最近最少访问到底部。Tail 省略了前 1000 个并将其余的发送到删除 em 的“xargs rm”。如果文件名很长并导致单个命令长度超过 ARG_MAX，则可能需要 xargs 的“-n 50”选项。

如果文件少于 1000 个，则“xargs rm”会抱怨。清除它；

```
ls -ut1 | tail -n+1001 > /tmp/files$$
if [[ `cat /tmp/files$$ | wc -l` -ge 1001 ]] ; then
  while read line ; do
    rm "$line"
  done < /tmp/files$$
fi
rm /tmp/file$$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T20:59:02.777

再次，`xargs`救援！

```
(echo ; ls -1 ) | head -n -1000 | head -n 1 | xargs -r rm -f * 
```

第一部分创建目录中所有文件的列表，但前面有一个空行

其次，保留最后 1000 行以外的所有行。如果少于 1000 个文件，则不保留任何内容！

第三，只保留第一行 - 这是空行或什么都没有（如果少于 1000 个文件）

最后，`rm -f *`仅当至少有一行输入时才运行命令（这是`-r`选项）

编辑：

好的，显然这`*`在脚本中不起作用。所以使用 fedorqui 的想法，你可以使用这个：

```
(echo ; ls -1 ) | head -n -1000 | head -n 1 | xargs -r ls -1 | xargs rm -f 
```

因此，只有在有超过 1000 个文件时才这样做（并将输出`rm -f *`放入）`ls -1``rm`

# c# - 在 Orchard CMS 中，是否有与管理菜单的“本地导航”等效的前端菜单？

> ID：14601564
> 
> 赞同：0
> 
> 时间：2013-01-30T10:19:52.953
> 
> 标签：c#, orchardcms

通过实现`INavigationProvider`，我可以添加到管理菜单中的菜单项。我还可以调用该`.LocalNav()`方法来创建本地菜单项（即显示在管理页面顶部的位置敏感选项卡，例如主题或模块页面上的选项卡）。

我需要为前端菜单实现类似的东西。我想将“本地导航”项目添加到特定页面，然后让它们显示在页面上的特定菜单中。

到目前为止，我发现我需要实现`INavigationFilter`动态添加菜单项。但是，我不确定`.LocalNav()`在这种情况下是否有等效项。

任何人都可以对此有所了解吗？

# jquery - 使用 Dev 刷新 Internet Explorer 中 jQuery 的怪异之处。工具

> ID：14601567
> 
> 赞同：0
> 
> 时间：2013-01-30T10:19:56.150
> 
> 标签：jquery, internet-explorer

我已经开发了一个 Joomla 模块，但我的问题是关于 Internet Explorer ......

这是网址：http: [//j25.wasen.net/index.php/news](http://j25.wasen.net/index.php/news)

在此页面的右侧，您将看到我称之为“简单文件列表器”的文件列表。如果您将鼠标悬停在文件上方，应该会有一个“工具提示”显示整个文件名，如果您单击图像，FancyBox 应该会打开。

这在 Chrome、Opera、Safari 中运行良好，但不能直接在 Internet Explorer 中运行。我已经在三个不同的 Windows 安装上测试了这个（虽然都是 IE9）。当我在 IE 中加载页面时，悬停效果和 FancyBox 不起作用。我尝试刷新并前后切换，但没有任何帮助。我在IE中按F12打开开发者工具，看看是否有错误。在 IE 中，您必须点击刷新才能启用脚本视图，刷新后一切正常。

然后我再次测试同样的事情，如果我打开 Dev.tools（按 F12）并刷新所有工作但没有 Dev.tools 它不起作用。在我的所有三台 Windows 机器上都一样...

如果我在 IE 中打开了 Dev.tools，为什么它只在 IE 中有效？

这很奇怪...如果您认为这可能是问题所在，我会使用“livequery”...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:14:40.730

我昨天遇到了这个问题，事实证明添加`<meta http-equiv="X-UA-Compatible" content="IE=9" />`对我有帮助。显然很多电脑上的 IE 都会触发 ie7 兼容模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:29:34.907

删除代码中的 console.log 语句解决了这个问题！

感谢您为我指明正确的方向，kidwon！

# python - 按特定顺序对文件进行排序

> ID：14601570
> 
> 赞同：2
> 
> 时间：2013-01-30T10:20:00.373
> 
> 标签：python, sorting, python-2.7

我想知道如何对目录中的文件名进行排序。例如，我有以下名称：

```
1_00000_6.54.csv
2_00000_1.70.csv
3_00000_1.70.csv
...
10_00000_1.70.csv
11_00000_1.70.csv
... 
```

使用以下 python 代码，我得到以下顺序：

```
 def get_pixelist(path):
     return [os.path.join(path,f) for f in os.listdir(path) if f.endswith('.csv')]

 def group_uniqmz_intensities(path):
     pxlist = sorted(get_pixelist(path)) 
```

给出：

```
1_00000_6.54.csv
10_00000_1.70.csv
11_00000_1.70
...
2_00000_1.70.csv
...
3_00000_1.70.csv
... 
```

我想要之前显示的顺序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:28:24.753

最简单的方法是在排序时对文件名进行零填充：

```
def group_uniqmz_intensities(path):
    pxlist = sorted(get_pixelist(path), key=lambda f: f.rjust(17, '0')) 
```

`0`这将在排序时将每个文件名填充为 17 个字符；so`1_00000_6.54.csv`被填充到`01_00000_6.54.csv`while`10_00000_1.70.csv`保持原样。按字典顺序，`01`排序在`10`.

我选择 17 作为硬编码值来简化事情；您可以使用它来自动找到所需的值：

```
def group_uniqmz_intensities(path):
    padsize = max(len(f) for f in pxlist)
    pxlist = sorted(get_pixelist(path), key=lambda f: f.rjust(padsize, '0')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:37:46.100

基于[此答案](https://stackoverflow.com/a/2669523/50065)进行字母数字排序：

```
def group_uniqmz_intensities(path):
    pxlist = sorted(get_pixelist(path), key=lambda filename: int(filename.partition('_')[0])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:32:44.530

由于 '1' < '_' 你得到第二个排序。您可以通过为 sorted 提供关键功能来实现您的目标：

```
 def group_uniqmz_intensities(path):
     pxlist = sorted(get_pixelist(path), key=lambda x: int(x.split("_")[0])) 
```

请确保您的所有文件都遵循相同的命名方案 ({number}_{rest}.csv)，否则会出现 ValueError。

编辑：Martijn Pieters 提供了一个更优雅的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T10:40:22.500

这是一个简单的自然排序实现，假设你的字段都被分割`_`：

```
def int_if_possible(s):
    try:
        return int(s)
    except:
        return s

>>> sorted(s, key=lambda s: map(int_if_possible, s.split('_')))
['1_00000_6.54.csv',
 '2_00000_1.70.csv',
 '3_00000_1.70.csv',
 '10_00000_1.70.csv',
 '11_00000_1.70.csv'] 
```

此实现利用了列表逐个元素进行比较的事实。如果元素可转换为整数，我们将它们作为整数进行比较，否则我们将退回到字符串比较。

* * *

**编辑**：这里介绍了一个更精细的自然排序解决方案：[自然字符串排序](http://code.activestate.com/recipes/285264-natural-string-sorting/)。

它非常聪明：它使用正则表达式`\d+\D+`将输入字符串拆分为交替数字和非数字。然后数字按数字进行比较，非数字按字母顺序进行比较。

# javascript - 我应该保护我的 Angular 控制器/服务不受全局命名空间的影响吗？

> ID：14601571
> 
> 赞同：0
> 
> 时间：2013-01-30T10:20:02.833
> 
> 标签：javascript, angularjs

我有一个控制器/服务等定义如下：

```
function IndexController($scope, shoppingItems) {
     $scope.items = shoppingItems;
 } 
```

然后我想知道我所有的 JS 是否应该像这样从全局命名空间中保护起来：

```
 (function() {

     function IndexController($scope, shoppingItems) {
         $scope.items = shoppingItems;
     }
 }); 
```

我的应用程序不再工作，你能解释一下我是否需要这样做，如果需要，如何让它工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:22:55.370

您最后缺少一对括号，使您的函数成为立即评估的函数：

```
(function() {
     function IndexController($scope, shoppingItems) {
         $scope.items = shoppingItems;
     }
 })(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:10:17.167

我建议您使用新样式的注册控制器（至少从 开始`1.0.3`，可能也是`1.0.1`如此）

```
(function() {
  //this will simulate creating the app with all needed dependencies
  var app = angular.module('app', ['my.dependecy1', 'my.dependecy1']);
  //...init code maybe
});

(function() {
  //this will only retrieve it or create if it it doesn't exist
  //I suggest you create it in another place passing all needed dependencies
  var app = angular.module('app');

  //I also recommend listing injectable variables manually,
  //this way if you ever need minification you're safe
  app.controller('IndexController', ['$scope', 'shoppingItems', 
     function IndexController($scope, shoppingItems) {
         $scope.items = shoppingItems;
     }
  ]);

}()); 
```

# actionscript-3 - 如何在 Flash CS5 中调整 ProgressBar 的大小。

> ID：14601577
> 
> 赞同：0
> 
> 时间：2013-01-30T10:20:15.910
> 
> 标签：actionscript-3, progress-bar, flash-cs5

我在 Flash CS5 中使用“ProgressBar”组件来创建我的游戏的级别进度条。我知道如何更改栏的颜色和大小。但我想重塑'ProgressBar'末端的锋利边缘以平滑圆形边缘。有没有办法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:07:33.557

不，您必须制作自己的关卡进度条。[组件](http://help.adobe.com/en_US/ActionScript/3.0_UsingComponentsAS3/WS5b3ccc516d4fbf351e63e3d118a9c65b32-7fa4.html)。

看看[这个](http://www.kirupa.com/developer/flashcs3/preloader_as3_pg1.htm)。

# javascript - 如何使用 Hogan.JS 从外部文件加载模板？

> ID：14601578
> 
> 赞同：9
> 
> 时间：2013-01-30T10:20:18.923
> 
> 标签：javascript, templates, external, mustache, hogan.js

我使用[Hogan.JS](http://twitter.github.com/hogan.js/)作为 JavaScript 模板库。它应该从外部文件加载 JavaScript 模板。可以将多个模板外包在一个外部 JavaScript 文件中。

有谁知道这是怎么做到的吗？

我有以下代码示例：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Hogan.JS Test</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script src="js/jquery-1.9.0.min.js"></script>
    <script src="js/hogan-2.0.0.min.js"></script>
    <script id="scriptTemplate" type="text/mustache">
      <p>Your text here: {{text}}</p>
    </script>
  </head>
  <body>
    <script>
      var data = {
        text: 'Hello World'
      };

      var template = $('#scriptTemplate').html();
      var compiledTemplate = Hogan.compile(template);
      var renderedTemplate = compiledTemplate.render(data);

      var box = document.createElement('div');
      box.innerHTML = renderedTemplate;
      document.body.insertBefore(box,document.body.childNodes[0]);
    </script>
  </body>
</html> 
```

使用 ID，我可以处理模板，但我总是需要一个单独的内联脚本。:-(

这如何处理外部文件？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-07T23:53:32.340

您有两个选项来加载外部模板：

1.  预编译模板（Hogan.js 恕我直言的最佳功能）或
2.  使用[require.js](http://requirejs.org/)的[文本插件](http://requirejs.org/docs/api.html#text)加载模板字符串

不幸的是，预编译 Hogan.js 模板的文档不存在。如果你有[Github repo](https://github.com/twitter/hogan.js)的副本，那么在`bin`目录中是一个名为的脚本`hulk`，它将完成这项工作。它需要安装[nodejs](http://nodejs.org/)以及一些[npm](https://npmjs.org)模块（即`nopt`和`mkdirp`）。

一旦你`nodejs`安装了这些模块，给定一个模板文件 Test.hogan：

```
<p>Your text here: {{text}}</p> 
```

您可以使用以下命令预编译脚本：

```
hulk Test.hogan 
```

产生以下文本：

```
if (!!!templates) var templates = {};
templates["Test"] = new Hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<p>Your text here: ");t.b(t.v(t.f("text",c,p,0)));t.b("</p>");return t.fl(); },partials: {}, subs: {  }}); 
```

将其保存到一个名为`templates.js`

现在在您的 HTML 页面中，您将加载该`templates.js`文件并创建一个全局对象`templates`，该对象称为已编译的模板函数位于键“Test”中的位置。您也可以省略该`hogan.js`文件，因为那是编译器（并且您的模板现在已经预编译），只包含`template.js`分发中的文件。

```
<!DOCTYPE html>
<html>
  <head>
    <title>Hogan.JS Test</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script src="js/template.js"></script>
    <script src="js/templates.js"></script>
  </head>
  <body>
    <script>
      var data = {
        text: 'Hello World'
      };

      var compiledTemplate = templates['Test'];
      var renderedTemplate = compiledTemplate.render(data);

      var box = document.createElement('div');
      box.innerHTML = renderedTemplate;
      document.body.insertBefore(box,document.body.childNodes[0]);
    </script>
  </body>
</html> 
```

*注意：*`master`我在使用Github 存储库的当前分支时确实遇到了一些问题，因为它生成的模板使用的构造函数与 2.0.0 模板版本中使用的构造函数不同。*如果您使用，请`hulk`务必使用`template.js`文件`lib`夹中的文件。*

或者，您可以使用 require.js 和文本插件。下载它们并将它们保存到您的`js`文件夹中。然后你需要添加一个`require`语句来加载模板文本：

```
<!DOCTYPE html>
<html>
  <head>
    <script src="js/hogan-2.0.0.js"></script>
    <script src="js/require.js"></script>
  </head>
  <body>
    <script>
      var data = {
        text: 'Hello World'
      };

      require(['js/text!Test.hogan'], function(testHoganText) {
        // testHoganText contains the text of your template
        var compiled = Hogan.compile(testHoganText);
        var renderedTemplate = compiled.render(data);

        var box = document.createElement('div');
        box.innerHTML = renderedTemplate;
        document.body.insertBefore(box,document.body.childNodes[0]);
      });
    </script>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-18T19:51:11.960

如果您不使用 node 也不想要依赖 require.js，还有另一种方法非常有效

您可以简单地使用 jQuery $.get 来获取模板文件的路径。所以一个例子看起来像这样：

```
$.get('templates/book.hogan', function(templates){
            var extTemplate = $(templates).filter('#book-tpl').html();
            var template = Hogan.compile(extTemplate);
            var rendered = template.render(datum);
            $('.marketing').append(rendered);
}); 
```

模板可以简单地是一个 .html 文件（我只使用 .hogan），并且模板中的所有 html 都应该包含在一个具有唯一 id 的脚本标签中，以便您可以在此处获取 id。基准来自 on('typeahead:selected') 但这无关紧要，我只是想我应该解释一下，因为它在代码中，没有其他参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-06T20:24:47.573

我有同样的问题，最后得到了与 Phuong 不同的做事方式，我想我会分享它。

服务器端，我编译模板并将其保存到具有以下脚本的文件中：

```
// template will be a string
var template = hogan.compile(
    '<span>{{text}}</span>',
    { asString: true }
);

// prepare the content of the file we are about to create
var content =
    'if(!templates) var templates = {};' +
    'templates.example = ' + template + ';';

// write to a file that will be called by the client
fs.writeFile('compiledTemplate.js', content, function(err){
    if(err){ console.log('Oops !') }
}); 
```

和客户端，我这样做：

```
<!DOCTYPE html>
<html>
  <head>
    <script src="js/hogan-2.0.0.js"></script>
    <script src="js/compiledTemplate.js"></script>
  </head>
  <body>
    <script>

      var data = {
        text: 'Hello World'
      };

      var template = new Hogan.Template(templates.example),
          html = template.render(data);

      var box = document.createElement('div');
      box.innerHTML = html;
      document.body.insertBefore(box,document.body.childNodes[0]);

    </script>
  </body>
</html> 
```

我希望它有帮助！

# javascript - 在浏览器大小上更改谷歌地图的中心

> ID：14601581
> 
> 赞同：0
> 
> 时间：2013-01-30T10:20:21.533
> 
> 标签：javascript, google-maps, google-maps-api-3

我是一个 js 菜鸟，我想输入一行代码，一旦我的浏览器小于 675px，就会改变我的谷歌地图的中心点。我正在使用 Google 地图 API 的 v3。

到目前为止，我有这段代码似乎不起作用。

```
$(function() {  
  if($('#pgWidth').width() <= 675){
  map.setCenter(new google.maps.LatLng(51.50000 , -0.30000));
  } else {
  map.setCenter(new google.maps.LatLng(51.50000, -0.30200));
  };
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:26:18.320

您需要处理调整大小事件，而不是仅在准备好文档时运行代码：

```
$(window).resize(function() {
  if($(window).width() <= 675) {
    map.setCenter(new google.maps.LatLng(51.50000 , -0.30000));
  } else {
    map.setCenter(new google.maps.LatLng(51.50000, -0.30200));
  };
}); 
```

# mysql - MySql 错误 1103

> ID：14601584
> 
> 赞同：1
> 
> 时间：2013-01-30T10:20:28.900
> 
> 标签：mysql, mysql-workbench

早上好，

我正在使用 MySql Workbench 创建我的一些数据库，自这个星期一以来我没有遇到任何问题。

当我正在“Forward Engeneer”我的模型时，所有表的创建都没有问题，除了这里的这个人：

```
Executing SQL script in server
ERROR: Error 1103: Incorrect table name '1'

CREATE  TABLE IF NOT EXISTS `sigemV2`.`macro` (
  `MACRO_ID` INT(11) NOT NULL AUTO_INCREMENT ,
  `MACRO_ADDRESS` VARCHAR(255) NOT NULL ,
  `MACRO_DESCRIPTION` VARCHAR(255) NOT NULL ,
  `MACRO_MACRO_KIND_ID` INT(11) NOT NULL ,
  PRIMARY KEY (`MACRO_ID`) ,
  INDEX `fk_MACRO_MACRO_KIND1_idx` (`MACRO_MACRO_KIND_ID` ASC) ,
  CONSTRAINT `MACRO_KIND_ID`
    FOREIGN KEY (`MACRO_MACRO_KIND_ID` )
    REFERENCES `sigemV2`.`macrokind` (`MACRO_KIND_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
INDEX DIRECTORY = '1' 
```

我很习惯 MySql 工作台，但这让我发疯:(。

我也在 phpMyAdmin 上尝试过，但我有同样的错误（1103），但不同的是 phpMyAdmin 将问题指向“**主键（'MACRO_ID'）** ”行。

我提前感谢您的帮助！

山姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:26:27.467

`INDEX DIRECTORY = '1'`索引目录必须引用有效目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:25:34.770

问题似乎出在 INDEX DIRECTORY 选项中。那必须指向一个文件。有关创建表的完整语法手册，请参见[https://dev.mysql.com/doc/refman/5.5/en/create-table.html](https://dev.mysql.com/doc/refman/5.5/en/create-table.html)。

该页面中关于 INDEX DIRECTORY 的章节：

> 通过使用 DATA DIRECTORY='directory' 或 INDEX DIRECTORY='directory' 您可以指定 MyISAM 存储引擎应该将表的数据文件和索引文件放在哪里。目录必须是目录的完整路径名，而不是相对路径。
> 
> 这些选项仅在您不使用 --skip-symbolic-links 选项时有效。您的操作系统还必须有一个有效的、线程安全的 realpath() 调用。有关更完整的信息，请参阅第 8.11.3.1.2 节，“在 Unix 上为 MyISAM 表使用符号链接”。
> 
> 如果创建没有 DATA DIRECTORY 选项的 MyISAM 表，则在数据库目录中创建 .MYD 文件。默认情况下，如果 MyISAM 在这种情况下找到一个现有的 .MYD 文件，它会覆盖它。这同样适用于没有 INDEX DIRECTORY 选项创建的表的 .MYI 文件。要抑制这种行为，请使用 --keep_files_on_create 选项启动服务器，在这种情况下，MyISAM 不会覆盖现有文件并返回错误。
> 
> 如果使用 DATA DIRECTORY 或 INDEX DIRECTORY 选项创建 MyISAM 表并找到现有的 .MYD 或 .MYI 文件，则 MyISAM 总是返回错误。它不会覆盖指定目录中的文件。

# html - 如何在html中设置单元格宽度？

> ID：14601585
> 
> 赞同：-1
> 
> 时间：2013-01-30T10:20:30.350
> 
> 标签：html

我有一个有 2 行的表格，如下所示，但无法固定单元格宽度，如下所示我们如何修复单元格宽度？当我尝试修复 cell3 宽度时，它也会自动修复 cell1 宽度

```
Cell1          |   cell2
Cell3    |    cell4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:26:09.213

尝试这个：

## HTML：

```
<table>
    <caption>Table Name</caption>
    <thead>
        <tr>
            <th>Heading 1</th>
            <th>Heading 2</th>
        </tr>
    </thead>
    <tfoot>
        <tr>
            <td colspan="2">&nbsp;</td>
        </tr>
    </tfoot>
    <tbody>
        <tr>
            <td>Data 1</td>
            <td>Data 2</td>
        </tr>
        <tr>
            <td>Data 3</td>
            <td>Data 4</td>
        </tr>
    </tbody>
</table> 
```

## CSS：

```
th {
    width: 100px; /* or the width you want */
} 
```

操纵s`th`会使其对应`td`的 s 进行相应的调整。只需确保您`th`的 s 的数量与您的 s 的数量相对应`td`。如果要合并s 或s，也可以使用`colspan` *（参见 中的示例`tfoot`）*。`th``td`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:37:59.740

您可以为此使用 table 的 colspan 属性。

```
<table>

 <col width="20px" />
 <col width="30px" />
 <col width="40px" />
 <tr>
<td>text</td>
<td colspan=2>text</td>
<td>text</td>

</tr>
<tr> 
<td colspan=2>text</td>
<td >text</td>
</tr>

<table> 
```

看起来像这样

```
 text text    text
 text     text 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:25:58.163

您可以尝试使用 col 标记在一个位置为所有行设置表格样式，但您需要在表格或表格 css 类上设置表格布局：固定样式并为单元格设置溢出样式

[http://www.w3schools.com/TAGS/tag_col.asp](http://www.w3schools.com/TAGS/tag_col.asp)

```
<table class="fixed">
<col width="20px" />
<col width="30px" />
<col width="40px" />
<tr>
    <td>text</td>
    <td>text</td>
    <td>text</td>
</tr> 
```

这就是你的 CSS

```
table.fixed { table-layout:fixed; }
table.fixed td { overflow: hidden; } 
```

# javascript - 用 d3 制作日历

> ID：14601588
> 
> 赞同：1
> 
> 时间：2013-01-30T10:20:39.940
> 
> 标签：javascript, calendar, d3.js, google-calendar-api

我正在尝试构建一个插件来显示谷歌日历帐户上事件的年度视图，我正在尝试使用 D3 构建此视图并从谷歌日历 API 获取数据（这部分听起来很简单），但我我一直试图在 d3 中实际构建视图，这是我目前所拥有的：

我的代码：

```
var margin = {top: 40, right: 40, bottom: 40, left: 40},
    width = 960,
    height = 500;

var x = d3.time.scale()
.domain([new Date(2013, 0, 1), new Date(2014, 0, 1)])
.range([0, width])

var y = d3.time.scale()
.domain([new Date(2013,0,1), new Date(2013, 0,31)])
.range([0, height])

var xAxis = d3.svg.axis()
.scale(x)
.orient("top")

var yAxis = d3.svg.axis()
.scale(y)
.orient("left")
.ticks(d3.time.days, 1)
.tickFormat(d3.time.format('%e'))

 var svg = d3.select(".container").append("svg")
 .attr("width", width + margin.left + margin.right)
.attr("height", height + margin.top + margin.bottom)
 .append("g")
.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

function makeXaxis() {
return d3.svg.axis()
.scale(x)
.orient("top")
}

function makeYaxis() {
return d3.svg.axis()
.scale(y)
.orient("left")
.ticks(d3.time.days, 1)
.tickFormat(d3.time.format('%e'))
 }

 svg.append("g")
  .attr("class", "x axis")
  // .attr("transform", "translate(0," + height + ")")
  .call(xAxis);

svg.append("g")
.attr("class", "y axis")
.attr("transform", "translate(0,0)")
.call(yAxis);

 svg.append("g")
 .attr("class", "grid")
.call(makeYaxis()
  .tickSize(-width, 0, 0)
  .tickFormat("")
  .tickPadding(8)
  )

svg.append("g")
.attr("class", "grid")
.call(makeXaxis()
  .tickSize(-height, 0, 0)
  .tickFormat("")
  ) 
```

它呈现什么： [实际视图日历](http://i45.tinypic.com/j9n5gi.png)

![在此处输入图像描述](../Images/550882a8ebe611311ec3b0f6b52c14c2.png)

我要实现的目标： [目标日历](http://i48.tinypic.com/2yob8th.jpg)

![在此处输入图像描述](../Images/c01d821097ffd7d228213850e370fa35.png)

我的代码有一些问题，

*   首先是我的 y 域是 31 天的任意月份，我不知道如果它是时间尺度，我的数据是否会很好地放置在图表上，我应该使用 31 的线性尺度吗？

*   如果没有 2013 年和 2014 年，我怎么能只渲染一月...十二月

*   如何在每行的中间顶部显示月份，而不是在每个刻度上显示它们？

*   好吧，考虑到我已经要求很多，我不会要求更多。

谢谢大家，我对d3完全陌生，我已经阅读了很多tuts tho。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:48:30.423

我的方法（不是唯一的方法）：

对两个轴使用线性数值域。换句话说：

```
x.domain( [0, 11] );    // months, zero-indexed
y.domain( [1, 31] );    // days of month 
```

为了正确渲染月份，您将不得不做一些古怪的事情，例如：

```
var monthFormatter = d3.time.format( "%B" );  // %B = Month name
function makeYaxis() {
    return d3.svg.axis()
    .scale(y)
    .orient("left")
    .tickFormat( function(d) { return monthFormatter( d.date ) } )
 } 
```

至于这些值的对齐方式，此[https://groups.google.com/forum/?fromgroups=#!topic/d3-js/1gCrn0taKw8](https://groups.google.com/forum/?fromgroups=#!topic/d3-js/1gCrn0taKw8)描述了这是一个不平凡的问题。您最好手动调整 x 值。

我没有看到用于在屏幕上呈现数据的代码，但您可以使用以下代码：

```
svg.selectAll( rect ).data( myData ).append( "rect" )
  .attr( "x", function(d) { return x( d.date.getMonth() ); } )
  .attr( "y", function(d) { return x( d.date.getDate() ); } ) 
```

我想“堆叠”数据（并排）会有问题，但我们稍后会处理。

# javascript - zclip 的 Flash 电影没有与按钮正确绑定

> ID：14601589
> 
> 赞同：1
> 
> 时间：2013-01-30T10:20:46.460
> 
> 标签：javascript, jquery, css, zclip

我在使用 zclip 时遇到以下问题。在我的应用程序中，我有一个文本框，然后是一个按钮。单击按钮时，将复制只读文本框中的值。我的html代码是：-

```
<input type="text" readonly="readonly" value="<%= linkbunch_url(@link.link) %>" class="span3" id="url_copy" /><br>
 <button type="button" id="copy_link" class="btn btn-success"><i class="icon-share" ></i>&nbsp;&nbsp; Copy To ClipBoard</button> 
```

我的javascript代码如下：-

```
$('#copy_link').zclip(
               {
                   path: '/assets/ZeroClipboard10.swf',
                   copy: function(){ return $('#url_copy').val(); },

                   afterCopy: function()
                   {   
                       alert("Link was successfully copied");
                       console.log( "Test was copied to clipboard");
                   }
               }); 
```

大多数情况下，单击按钮会复制框中的文本。但有时并非如此。然后我检查了萤火虫中的所有东西，并在图片中显示了这个东西。 ![在此处输入图像描述](../Images/b9931c23db8174a802c051cef7f6a464.png)

这里的链接“df...”只是一个测试数据，没有别的。现在我的问题是，如图所示，当我单击按钮时没有任何反应。但我发现有一个 div 是我的不可见 flash 对象，它出现在“df...”链接的顶部。它的边框在图片中可见。该代码在萤火虫中也可见。单击该页面的该部分，将再次复制文本。那么，为什么会这样？？H

# lua - 模式匹配和捕获 lua 中的单词列表

> ID：14601598
> 
> 赞同：1
> 
> 时间：2013-01-30T10:21:25.853
> 
> 标签：lua, pattern-matching

使用 lua 模式匹配，我想匹配和捕获“/egg/”或“/spam/”字

**预期的 string.find(haystack, pattern) 结果：**

```
"/spam/"    -> captures "spam"
"/egg/"     -> captures "egg"
"/spamegg/" -> returns nil and captures nothing
"/foo/"     -> returns nil and captures nothing 
```

我知道如何匹配“鸡蛋”或“垃圾邮件”，但找不到表达逻辑 OR 的方法（尽管它看起来很简单）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:32:13.493

Lua 模式不支持 OR。

# unit-testing - 检测（由 cobertura）@Decorator bean 无法被 OpenEJB 验证以进行单元测试

> ID：14601601
> 
> 赞同：0
> 
> 时间：2013-01-30T10:21:29.940
> 
> 标签：unit-testing, java-ee-6, code-coverage, cobertura, openejb

为了获得代码覆盖率报告，我通过 cobertura maven 插件对 @Decorator bean 进行了检测。在 OpenEJB 容器中运行我的单元测试时。容器在启动期间报告了一些错误（新的初始上下文）。

引起：org.apache.webbeans.exception.WebBeansConfigurationException：装饰器：MyDecorator，名称：null，WebBeans 类型：DECORATOR，API 类型：[org.apache.commo ns.configuration.Configuration,net.sourceforge.cobertura.coveragedata.HasBeenInstrumented ,org.apache.commons.configuration.AbstractConfiguration,MyDecorator,org.apache.commons.configuration.event.EventSource,java.lang.Object]，限定符：[javax.enterprise.inject.Any,javax.enterprise.inject.Default ] 代表必须实现所有装饰器装饰类型，但装饰器类型接口 net.sourceforge.cobertura.coveragedata.HasBeenInstrumented 不能从接口 org.apache.commons.configuration.Configuration 的委托类型分配

# 细节：

我有一个装饰器要进行单元测试。就像是

导入 org.apache.commons.configuration.AbstractConfiguration；

导入 org.apache.commons.configuration.Configuration；

@装饰器

公共类 MyDecorator 扩展 AbstractConfiguration {

```
@Inject
@Delegate
private Configuration conf; 
```

......

}

在 cobertura 检测之后，代码如下：（我反编译）

***导入 net.sourceforge.cobertura.coveragedata.HasBeenInstrumented；***

@装饰器

公共类 MyDecorator 扩展 AbstractConfiguration ***实现 HasBeenInstrumented*** {

```
@Inject
@Delegate
private Configuration conf; 
```

......

}

如您所见，cobertura 为我的装饰器增加了一个界面。当 OpenEJB 加载和部署这个检测类时，会报错：

引起：org.apache.webbeans.exception.WebBeansConfigurationException：装饰器：MyDecorator，名称：null，WebBeans 类型：DECORATOR，API 类型：[org.apache.commo ns.configuration.Configuration,net.sourceforge.cobertura.coveragedata.HasBeenInstrumented ,org.apache.commons.configuration.AbstractConfiguration,MyDecorator,org.apache.commons.configuration.event.EventSource,java.lang.Object]，限定符：[javax.enterprise.inject.Any,javax.enterprise.inject.Default ] 代表必须实现所有装饰器装饰类型，但装饰器类型接口 net.sourceforge.cobertura.coveragedata.HasBeenInstrumented 不能从接口 org.apache.commons.configuration.Configuration 的委托类型分配

错误日志说 @Decorator 和 @Delegate 应该实现相同的类型。但是在instrument之后，待测类多了一个接口。

然后我尝试检测 org.apache.commons.configuration.AbstractConfiguration 和 org.apache.commons.configuration.Configuration。（通过 cobertura 命令行检测 commons-configuration-1.9.jar）并修改我的代码，如：

@装饰器

公共类 MyDecorator 扩展 AbstractConfiguration {

```
@Inject
@Delegate
private AbstractConfiguration conf; 
```

......

} //我使用 AbstractConfiguration 而不是 Configuration，因为 Configuration 是一个 //无法检测的接口。

经过这一切，问题就解决了。但这不是一个好方法。

根本原因是 maven cobertura 插件通过向原始类添加接口来识别类文件，我适用于大多数情况。但不适用于在容器中运行的 @Decorator bean。

我应该为 maven-cobertura-plugin org 创建评论吗？

有人对如何对@Decorators 进行单元测试有一些建议。并且容易获得覆盖率报告？可能是我的单元测试没有以好的方式实现，也许 openejb 不适合这个？

通常你如何对你的@Decorators 进行单元测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:32:40.293

Cobertura 不检测接口。出于这个原因，建议将非插桩类放在插桩类之后的类路径中。

所以在instrumenting的时候，先用maven正常编译，然后把自己放到需要instrument的类的源码所在的目录下，然后运行如下命令：mvn cobertura:instrument。

这将使 cobertura 检测所有类，并且 maven 将自动添加未检测的文件。检测代码将位于“.\target\generated-classes\cobertura”。

你需要运行'jar -cvf [name-of-jar].jar *'，然后你会得到你的检测 jar。

# javascript - 如果在浏览器中禁用了 javascript，则另一种选择

> ID：14601603
> 
> 赞同：0
> 
> 时间：2013-01-30T10:21:31.353
> 
> 标签：javascript, jquery, browser

当您的浏览器中禁用 javascript 时，是否有其他方法可以调用 javascript？

意味着如果我使用 ajax 和 jquery 验证，这是进一步处理所必须的，但我的 javascript 在浏览器中被禁用。所以我该怎么做 ？如何验证并获取 ajax 调用的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T10:22:20.457

不，如果 javascript 被禁用，那么您无法在没有用户帮助的情况下启用或使用它。

但是您应该考虑到这是非常罕见的情况，并且决定禁用 javascript 的用户支持他们的决定，您无能为力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T10:25:48.823

> 当您的浏览器中禁用 javascript 时，是否有其他方法可以调用 javascript？

否。已禁用已禁用。

> 意味着如果我使用 ajax 和 jquery 验证，这是进一步处理所必须的，但我的 javascript 在浏览器中被禁用。所以我该怎么做 ？如何验证并获取 ajax 调用的值？

执行验证服务器端。

通过在服务器上生成一个新的 HTML 文档来呈现数据处理的结果。

遵循[渐进增强](http://en.wikipedia.org/wiki/Progressive_enhancement)和[不显眼的 JavaScript原则](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T10:30:51.747

如果 javascript 被禁用，您将无法执行任何 javascript 控制器（当然）。

然而，一些 HTML5 属性可以强制浏览器做一些基本的控制。这样`type="email"`或`type="url"`。

在一些最近的浏览器中，这些验证也可以在禁用 js 的情况下使用。

# asp.net - 剑道 UI 与 asp.net

> ID：14601604
> 
> 赞同：0
> 
> 时间：2013-01-30T10:21:32.623
> 
> 标签：asp.net, kendo-ui

嗨，有人能告诉我如何将 Kendo UI 与 asp.net Web 应用程序一起使用吗？

因为当我尝试创建一个 asp.net 应用程序并在我的 bin 文件夹中添加 kendo.mvc.dll 时。现在我添加了

```
<%= Html.Kendo().Calendar().Name("calendar")  %> 
```

在我的 default.aspx 页面中。现在它说“当前上下文中不存在名称 HTML”

有人可以帮我解决问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:36:07.473

当您的 Web 应用程序不是 MVC 时，您正在尝试将 Kendo 用于 MVC。

您需要使用 Kendo UI WEB

[http://www.kendoui.c​​om/download.aspx](http://www.kendoui.com/download.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:35:36.023

为什么不按照文档中的这些简单步骤进行操作？

[http://docs.kendoui.c​​om/getting-started/using-kendo-with/aspnet-mvc/introduction#manually-add-kendo-ui-to-aspnet-mvc-applications](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/introduction#manually-add-kendo-ui-to-aspnet-mvc-applications)

特别是我指的是步骤 7，您必须在其中添加 namespece `web.config`：

```
 <namespaces>
     <add namespace="System.Web.Mvc" />
     <add namespace="System.Web.Mvc.Ajax" />
     <add namespace="System.Web.Mvc.Html" />
     <add namespace="System.Web.Routing" />
     <add namespace="System.Linq" />
     <add namespace="System.Collections.Generic" />
     <add namespace="Kendo.Mvc.UI" />
 </namespaces> 
```

# maven - 为 Maven 依赖声明多个范围的正确方法？

> ID：14601607
> 
> 赞同：70
> 
> 时间：2013-01-30T10:21:38.297
> 
> 标签：maven, maven-3

我有一个要在`test`范围内使用的依赖项（以便在我运行单元测试时它位于类路径中）和`runtime`范围内（以便我可以在 WAR/EAR/其他打包中包含它以进行部署，但不影响依赖工件的传递依赖查找）。

一个真实的例子是 SLF4J 的实现 JAR（例如`Logback`）。当我运行测试时，我希望它存在于类路径中，并且我希望它包含在我的 WAR/EAR 中，但我不希望依赖于我的项目的项目将其包含在传递依赖项查找中。

我尝试使用`<scope>test,runtime</scope>`但 Maven 3 产生警告：

```
[WARNING] 'dependencies.dependency.scope' for org.slf4j:jcl-over-slf4j:jar 
must be one of [provided, compile, runtime, test, system] but is 'test,runtime'. 
```

在这种情况下声明依赖范围的正确方法是什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-10T22:13:36.417

运行时范围还使工件在测试类路径上可用。只需使用运行时。（请参阅 Maven[文档](https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)。）

为了避免依赖传递地解决，还可以通过以下方式使其成为[可选](https://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html)`<optional>true</optional>`：

```
<dependency>
  <groupId>ch.qos.logback</groupId>
  <artifactId>logback</artifactId>
  <version>0.5</version>
  <scope>runtime</scope>
  <optional>true</optional>
</dependency> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-30T10:55:08.723

`<scope/>`每个标签只能定义一个范围值。

恐怕您想做的事情不能仅通过使用范围来实现。如果您定义 的范围`test`，则它仅在测试期间可用；如果您定义提供的范围，这意味着您希望项目的依赖项在编译和测试期间都得到解决和使用，但它不会包含在您的 WAR 文件中。无论哪种方式，这都不是你想要的。

因此，我建议您查看[maven-assembly-plugin](http://maven.apache.org/plugins/maven-assembly-plugin/)，您可以使用它来实现它，但它仍然需要一些尝试。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-12-21T16:06:40.773

声明[范围](https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)为的依赖项`runtime`可确保库在编译期间不可用。

将依赖声明为[可选](https://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html)会导致依赖解析过程中断；取决于您的库的项目将需要明确包含依赖项本身。

因此，声明这一点的正确方法是：

```
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>jcl-over-slf4j</artifactId>
  <version>1.7.13</version>
  <scope>runtime</scope>
  <optional>true</optional>
</dependency> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-12-17T06:56:58.813

不确定这是否仍能帮助仍在寻找简单方法的人 - [https://howtodoinjava.com/maven/maven-dependency-scopes/](https://howtodoinjava.com/maven/maven-dependency-scopes/)此链接帮助我添加了正确的范围。这是范围映射的摘要以及我们需要依赖项的阶段。

1.  编译 - 构建、测试和运行
2.  提供 - 构建和测试
3.  运行时 - 测试并运行
4.  测试 - 编译和测试

因此，当我在测试和运行时需要依赖项时，我将范围指定为“运行时”并且它按预期工作。

# java - Eclipse 没有找到我已经在运行的 Android 模拟器

> ID：14601611
> 
> 赞同：0
> 
> 时间：2013-01-30T10:21:41.937
> 
> 标签：java, android, eclipse, emulation

*配置*

操作系统：OSX

IDE：Eclipse 朱诺

我不知道为什么，但是当我尝试再次运行我的 Android 应用程序时，**“Android 设备选择器”**框架会打开，但我的模拟器未显示在**“选择正在运行的 Android 设备”**部分中。我应该怎么办 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T10:27:53.627

转到 DDMS 视图并尝试重置 ADB，如图所示——

![在此处输入图像描述](../Images/3363485219f4d3e1a67eab999a93e4b8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:27:48.333

*   请检查应用程序和设备上所需的 API 级别。

*   尝试在终端中运行以下命令来更新 adb 服务器状态：

    adb kill-server
    adb start-server

*   您可以尝试[通过 wifi 使用 adb，这样](http://forum.xda-developers.com/showthread.php?t=1685736)就不需要电缆了。

# sql-server - SQL Server 复制代理安全设置错误

> ID：14601614
> 
> 赞同：0
> 
> 时间：2013-01-30T10:21:51.210
> 
> 标签：sql-server, replication, sql-server-2012, merge-replication

当我尝试在合并复制发布中更改快照代理的帐户时，我收到此错误：

```
Cannot save changes to agent security settings.

An exception occurred while executing a Transact-SQL statement or batch.      (Microsoft.SqlServer.ConnectionInfo)

The current transaction cannot be committed and cannot support operations that write to the log file. Roll back the transaction.
The current transaction cannot be committed and cannot be rolled back to a savepoint. Roll back the entire transaction.
Changed database context to <removed>. (Microsoft SQL Server, Error: 3930) 
```

该帐户对分发数据库和源数据库具有 db_owner 权限，并且还可以完全控制复制共享。我也尝试使用域管理员帐户设置它并得到相同的错误，所以我认为我已经排除了权限问题。

# javascript - 如何在 JavaScript 中禁用 ESC 键的功能？

> ID：14601616
> 
> 赞同：4
> 
> 时间：2013-01-30T10:21:55.523
> 
> 标签：javascript, javascript-events

在我的聊天应用程序中，有一些文本字段可以获取用户登录详细信息。

填写用户详细信息时，如果用户突然按下ESC键，数据将丢失。

我需要禁用ESC键的功能吗？我需要使用哪个事件？我怎样才能做到这一点。

我的 Java 脚本代码是

```
function esc(e){
    e = e || window.event || {};
    var charCode = e.charCode || e.keyCode || e.which;
    if(charCode == 27){
    return false;
    }
} 
```

在堆栈溢出和谷歌中搜索了很多。没有任何效果。请任何人帮助我做到这一点。谢谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T10:29:55.870

您可以将事件侦听器绑定到您的输入字段以在`Esc`按下事件时捕获事件并抑制它。

```
document.querySelector("input").addEventListener("keydown",function(e){
    var charCode = e.charCode || e.keyCode || e.which;
    if (charCode == 27){
         alert("Escape is not allowed!");
        return false;
    }
}); 
```

[例子](http://jsfiddle.net/ZcdZm/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T11:49:36.857

我得到了使用以下代码控制“F5、Esc、BackSpace(BS)”键的解决方案。

我的 Java Script 代码将是，

```
document.attachEvent("onkeydown", win_onkeydown_handler);

function win_onkeydown_handler() {
    switch (event.keyCode) {

    case 116 : // 'F5'
         event.returnValue = false;
         event.keyCode = 0;
         break;  

    case 27: // 'Esc'
        event.returnValue = false;
        event.keyCode = 0;
        break;

    case 08: // 'BackSpace'
        if (event.srcElement.tagName == "INPUT"
                || event.srcElement.tagName == "TEXTAREA") {
        } else {
            event.returnValue = false;
            event.keyCode = 0;
        }
        break;

    }
} 
```

感谢所有支持我这样做的人以及您的建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T10:40:53.030

我已将其用于登录弹出代码：

```
jQuery(document).keyup(function(e){
    if(e.keyCode==27 && popupStatus==1){
    // alert('not allowed !!!');
        // or any other code
     return false;
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T10:28:21.573

我使用 jquery 做了类似的事情来限制输入数字

```
 $(inputBox).keydown(function(event) {
        // Allow only backspace and delete
        var allowed_keys = [
            46, // delete
            8, // backspace
                 ];
        if ($.inArray(event.keyCode, allowed_keys) != -1) {
            // let it happen, don't do anything
        }
        else {
            // Ensure that it is a number and stop the keypress
            if (event.keyCode < 48 || event.keyCode > 57 ) {
                event.preventDefault(); 
            }   
        }
    }); 
```

# regex - Powershell 正则表达式接下来的四个字符

> ID：14601620
> 
> 赞同：-1
> 
> 时间：2013-01-30T10:22:03.870
> 
> 标签：regex, powershell, powershell-2.0

我试图想出一个正则表达式来获取**< Time >**后跟接下来的四个字符。

我正在读取一个文件，可以找到**< Time >**部分，但无法获取接下来的四个字符。正则表达式中这个的语法是什么？

这是我目前的语法：

```
[string] $RunTimeLine = (Select-String -Path $IDCSwiftFlowXMLFile -pattern "<time>")
$RunTime = [regex]::match($RunTimeLine,"'<Time>".Groups[0].Value 
```

我尝试在时间标签之后直接添加 {4} 但这没有返回任何内容。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-11T14:47:48.723

像这样的正则表达式查询会起作用吗 `(?<=\<Time\>).{4}`

应该代表捕获 4 个字符，只要它在前面。希望我解释正确。

我很抱歉评论过时的帖子。我只是认为它没有答案，并想提供帮助。我将来会注意这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:34:06.203

您的文档似乎是 XML 文档。为什么要使用正则表达式来访问节点值？

```
$myDoc = [xml] (Get-Content $IDCSwiftFlowXMLFile)
$timeNodes = $myDoc.GetElementsByTagName("time")
foreach ($node in $timeNodes)
{
    $time = $node.InnerXML
} 
```

# javascript - javascript 对象文字使用它自己的字段

> ID：14601624
> 
> 赞同：1
> 
> 时间：2013-01-30T10:22:07.823
> 
> 标签：javascript, object, static, literals

我想为某个组件创建一个包含整个配置的对象。我也认为它是这样的：

```
var ObjectConfig = {
    fieldKeys : {
        name: "Obj. name",
        state: "Obj. state",
        color: "Obj. color"
    },
    templates : {
        basicTemplate :  [ ObjectConfig.fieldKeys.name, ObjectConfig.fieldKeys.state ],
        altTemplate : [ ObjectConfig.fieldKeys.name, ObjectConfig.fieldKeys.color ]
    }
} 
```

但这以正确的方式做到这一点 - 它不起作用。我怎样才能实现我的目标？

编辑：对不起，我是匆忙手写的，这就是语法错误的来源。现在它是正确的。我得到的错误是`Uncaught TypeError: Cannot read property 'fieldKeys' of undefined`. 我想这样做是不可能的——那么最好的选择是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:09:33.037

您的问题是该对象是在将其分配给变量*之前从文字构造的。*`ObjectConfig`因此，`ObjectConfig.fieldKeys`在文字内部访问会导致错误。

最好的解决方案是只构造第一个对象，然后依次添加更多属性：

```
var ObjectConfig = {
    fieldKeys: {
        name: "Obj. name",
        state: "Obj. state",
        color: "Obj. color"
    }
};
ObjectConfig.templates = {
    basicTemplate:  [ ObjectConfig.fieldKeys.name, ObjectConfig.fieldKeys.state ],
    altTemplate: [ ObjectConfig.fieldKeys.name, ObjectConfig.fieldKeys.color ]
}; 
```

另一种（更短的）方法是为 keys 对象添加一个额外的变量，该变量是在构造模板对象之前分配的：

```
var keys, ObjectConfig = {
    fieldKeys: keys = {
        name: "Obj. name",
        state: "Obj. state",
        color: "Obj. color"
    },
    templates: {
        basicTemplate: [ keys.name, keys.state ],
        altTemplate: [ keys.name, keys.color ]
    }
}; 
```

要解决全局范围内的额外变量，您可以使用[IEFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)。一个更具可读性的解决方案可能如下所示：

```
var ObjectConfig = (function() {
    var keys = {
        name: "Obj. name",
        state: "Obj. state",
        color: "Obj. color"
    };
    return {
        fieldKeys: keys,
        templates: {
            basicTemplate: [ keys.name, keys.state ],
            altTemplate: [ keys.name, keys.color ]
        }
    };
})(); 
```

# c# - 单击listview c#时填充RadioButton

> ID：14601628
> 
> 赞同：-1
> 
> 时间：2013-01-30T10:22:24.977
> 
> 标签：c#, binding, radio-button

我创建了一个表单应用程序，其中包含来自文本框、日期时间选择器和单选按钮的大量条目。一旦用户填写了这些信息，他们就可以单击一个按钮将其填充到列表视图中。然后我想要它，所以当用户单击列表视图时，它会用他们输入的内容填充文本框、日期时间选择器和单选按钮。我能够轻松地为文本框和日期时间选择器执行此操作，但我正在努力找出如何选择他们在输入数据时选择的单选按钮。我的代码是这样的：

```
private void lview_Bonds_Click(object sender, EventArgs e)
    {
        if (lview_Bonds.SelectedItems.Count > 0)
        {
            txt_Cusip.Text = lview_Bonds.SelectedItems[0].Text;
            txt_Ticker.Text = lview_Bonds.SelectedItems[0].SubItems[1].Text;
            txt_Name.Text = lview_Bonds.SelectedItems[0].SubItems[2].Text;
            cld_Maturity.Text = lview_Bonds.SelectedItems[0].SubItems[3].Text;
            txt_Coupon.Text = lview_Bonds.SelectedItems[0].SubItems[4].Text;
            cmb_PrimaryBook.Text = lview_Bonds.SelectedItems[0].SubItems[5].Text;
            cmb_AssignedBook.Text = lview_Bonds.SelectedItems[0].SubItems[6].Text;

            if (lview_Bonds.SelectedItems[0].SubItems[7].Text == "Fixed")
            {
                rdbtn_Fixed.Text = lview_Bonds.SelectedItems[0].SubItems[7].Text;
            }
            else
            {
                rdbtn_Zero.Text = lview_Bonds.SelectedItems[0].SubItems[7].Text;
            }

            txt_Position.Text = lview_Bonds.SelectedItems[0].SubItems[8].Text;
        }

    } 
```

单选按钮的 if 语句不起作用。从研究来看，我似乎需要对绑定做一些事情，但这对我来说是一个新概念！我只做了大约 2 周的 c#，所以我不太确定如何将这些数据从列表视图绑定到输入字段！

任何帮助或建议都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:30:02.543

当您要选择/检查单选按钮时，请查看：

[MSDN RadioButton.Checked 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.radiobutton.checked.aspx)

```
if (lview_Bonds.SelectedItems[0].SubItems[7].Text == "Fixed")
{
    rdbtn_Fixed.Checked = true;
}
else
{
    rdbtn_Zero.Checked = true;
} 
```

# solr - 无法在 Solr 中使用 ICUTokenizerFactory

> ID：14601631
> 
> 赞同：4
> 
> 时间：2013-01-30T10:22:44.853
> 
> 标签：solr, lucene, schema, tokenize, analyzer

我正在尝试在 Solr 模式中使用 ICUTokenizerFactory。这就是我定义`field`和的方式`fieldType`。

```
<fieldType name="text_icu" class="solr.TextField" positionIncrementGap="100">
    <analyzer>
        <tokenizer class="solr.ICUTokenizerFactory"/>
    </analyzer>
</fieldType>

<field name="fld_icu" type="text_icu" indexed="true" stored="true"/> 
```

而且，当我启动 Solr 时，我得到了这个错误

```
Plugin init failure for [schema.xml] fieldType "text_icu": Plugin init failure for [schema.xml] analyzer/tokenizer: Error loading class 'solr.ICUTokenizerFactory' 
```

我已经搜索过了，但没有成功。我不知道我是否遗漏了什么或者架构中有问题。如果有人尝试过 ICUTokenizerFactory 那么请提出可能是什么问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T13:38:10.247

在 solrconfig.xml 的顶部添加：

```
<config>
  <lib dir="${user.dir}/../contrib/analysis-extras/lucene-libs/" />
  <lib dir="${user.dir}/../contrib/analysis-extras/lib/" /> 
```

这假设您从示例目录运行，并将 solr.solr.home 设置为您的实例。否则，只需使用 Solr 安装的绝对路径。

您还可以将所有这些 jar 复制到 lib 目录中（在您的核心目录下，而不是 solr home 目录下）。但上面是一种更简单的方法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-30T12:04:46.397

来自维基：

> Lucene 使用 analysis-extras contrib 模块中的 solr.ICUTokenizerFactory 支持将这些语言分割成音节。要使用此标记器，请参阅 solr/contrib/analysis-extras/README.txt 以获取有关需要将哪些 jar 添加到 SOLR_HOME/lib 的说明

# http - 如何使用 vhosts 将图像文件 PUT 和 POST 到 Apache2？（没有 PHP）

> ID：14601637
> 
> 赞同：0
> 
> 时间：2013-01-30T10:22:51.263
> 
> 标签：http, rest, apache2, http-post

我想`test.com`使用 apache2 简单地将图像文件 POST 和 PUT 到服务器。这应该会导致将图像文件存储在所需的位置。让我们说`/srv/web/images/`

什么是有效的虚拟主机配置？是否有需要激活的模块？我在 ubuntu 12.04 服务器上使用 apache2。

我认为默认情况下，由于明显的原因，这在 apache 中被禁用，nobdoy 应该能够在默认配置中写入服务器。

我想用http auth（“user1”/“pass1”）简单地保护它。

我发现的所有文档和问题都与 PHP 相关，但我认为应该可以仅使用 REST URI 和 apache2 而无需 PHP、cgi 或 C 程序。

（注意：我对没有 webdav 的解决方案感兴趣（但我不确定 webdav 模块是否支持 HTTP PUT，这可以）。这个问题与表单或浏览器无关，例如上传可以使用程序`curl`。）

更新：我发现这条消息：

[http://mail-archives.apache.org/mod_mbox/ant-ivy-user/201004.mbox/%3C4BBCA487.8000401@nitido.com%3E](http://mail-archives.apache.org/mod_mbox/ant-ivy-user/201004.mbox/%3C4BBCA487.8000401@nitido.com%3E)

似乎曾经有一个模块 mod_put，它不再在 ubuntu 的 repos 中。而那个 webdav 已经内置了 PUT 和 DELETE 的功能。

如果是这样，我仍然无法理解如何为简单的 FILE PUT 操作进行正确的 VHOST 配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:58:28.403

我认为现在对于这种东西，您可以使用 WebDAV 配置 apache。

# oracle-adf - 将在 adf 融合应用程序的 jazn-data.xml 文件中创建和保存的用户映射/关联到数据库表

> ID：14601646
> 
> 赞同：0
> 
> 时间：2013-01-30T10:23:02.217
> 
> 标签：oracle-adf

有什么方法可以将我在 adf 应用程序的 jazn-data.xml 文件中创建的用户映射到数据库表。想在 via 方法或 bean 返回参数中使用查询结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:52:43.180

您需要在 WebLogic 服务器（在安全领域）中配置一个 sqlauthenticator。如果你得到了这个工作，你应该能够使用默认的 ADF 安全设置从你的 WLS 与你的用户一起登录。

# php - 如何将 PHP 文件作为文本文件读取到数组中？

> ID：14601650
> 
> 赞同：0
> 
> 时间：2013-01-30T10:23:25.937
> 
> 标签：php

这是我的情况。假设我有一个名为的 PHP 文件：

```
myfunctions.php 
```

是否可以使用可用的 PHP 函数在另一个脚本中读取该 PHP 文件 (myfunctions.php) 的内容？

我在读取这个 PHP 文件时使用了以下函数，但没有成功：

```
file_get_contents()
file() 
```

它只是返回空白。一种可能的成功方法是将这个 PHP 文件作为文本文件读取，但我不知道该怎么做。如果有人有其他方法，请分享。理想情况下，我希望输出是一个数组，这样我想获得的数据将很容易被操纵以供使用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:25:33.983

你需要[fread](http://php.net/manual/en/function.fread.php)。要将其放入数组中，您可能会查看[explode](http://php.net/manual/en/function.explode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:29:34.590

如果我是你，我会将“myfunctions.php”的扩展名更改为“myfunctions.txt”并使用这些函数

```
file_get_contents()
file() 
```

但我不知道您是否可以更改文档的名称。

```
file() - Reads entire file into an array
fgets() - Gets line from file pointer
fread() - Binary-safe file read
readfile() - Outputs a file
file_put_contents() - Write a string to a file
stream_get_contents() - Reads remainder of a stream into a string
stream_context_create() - Creates a stream context 
```

# c++ - 二维向量分配器问题

> ID：14601654
> 
> 赞同：0
> 
> 时间：2013-01-30T10:23:40.893
> 
> 标签：c++, stdvector, allocator

```
#include <iostream>
#include <vector>

int main()
{
    std::vector<double> test1(1);

    test1[100] = 5.;

    std::vector< std::vector <double > > test2(1, std::vector<double>(1,0));

    test2[50][100] = 5.;
} 
```

`test1`: 很好地调整大小和分配内存

`test2`: `"Segmentation fault (core dumped)"`. 为什么？

**注意**：不能使用矩阵，因为行大小不相等。

**摘要**: `at(int)`: 检查边界并在必要时抛出异常 - 无需调整大小

`operator[](int)`：不检查边界 - 不调整大小

`push_back()`：`capacity()`如果当前容量很小，调整大小会增加一倍

`size()`: 元素个数`vector`

`capacity()`: 在重新分配之前要持有的最大元素是必要的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:25:35.327

您访问大小为 1 的向量的索引为 100 的元素。您不应访问向量边界之外的索引。事实是，它在第​​一种情况下起作用是纯粹的运气，而不是在第二种情况下不起作用。

向量在调用`resize()`or时扩展`push_back`，但简单地访问索引不会扩展向量的大小。相反，它会导致未定义的行为。

要修复代码（更改构造向量时使用的大小）：

```
#include <iostream>
#include <vector>

int main()
{
    std::vector<double> test1(101);

    test1[100] = 5.;

    std::vector< std::vector <double > > test2(51, std::vector<double>(101,0));

    test2[50][100] = 5.;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:30:27.097

> test1 : 很好地调整大小和分配内存

[std::vector 将在调用std::vector::push_back](http://en.cppreference.com/w/cpp/container/vector)时调整大小并分配内存，但不是通过随机访问运算符随机

> test2：“分段错误（核心转储）”。为什么？

下面的代码访问了 test1、test2 的边界：

```
test1[100] = 5.0;
test2[50][100] = 5.0; 
```

您可以在访问之前测试矢量大小

```
if (test1.size() > 100))
{
    test1[100] = 5.0;
} 
```

或者可以将[std::vector::at](http://en.cppreference.com/w/cpp/container/vector/at)函数与 try/catch 块一起使用：

```
try
{
    test2.at(50).at(100) = 5.0;
}
catch(const std::exception& e)
{
   std::cout << e.what() << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T10:25:21.067

您正在访问每个向量的边界之外：

```
std::vector<double> test1(1); // size 1 vector
test1[100] = 5.; // out of bounds access 
```

结果是未定义的行为。如果要制作大小为 100 的向量，请执行以下操作：

```
std::vector<double> test1(101); // size 101 vector
test1[100] = 5.; // OK, access 101th element
test.push_back(42); // push element, size is now 102 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T11:32:14.167

如果您希望 operator[] 自动扩展/插入，请使用 std::map：

```
#include <iostream>
#include <map>

int main()
{
    std::map<double> test1;

    test1[100] = 5.; // Will insert one element into test1

    std::map< std::map <double > > test2;

    test2[50][100] = 5.; // will create a new map<double> and insert one element into it.
} 
```

# javascript - Google Places Autocomplete - 在 Enter 键上选择第一个结果？

> ID：14601655
> 
> 赞同：37
> 
> 时间：2013-01-30T10:23:45.720
> 
> 标签：javascript, google-maps, google-maps-api-3, google-places-api, google-places

我正在使用 Google Places Autocomplete，我只是希望它在表单字段中按下回车键并且存在建议时选择结果列表中的顶部项目。我知道以前有人问过这个问题：

[Google 地图 Places API V3 自动完成 - 输入时选择第一个选项](https://stackoverflow.com/questions/7865446/google-maps-places-api-v3-autocomplete-select-first-option-on-enter)

[Google maps Places API V3 自动完成 - 在输入时选择第一个选项（并保持这种状态）](https://stackoverflow.com/questions/10772282/google-maps-places-api-v3-autocomplete-select-first-option-on-enter-and-have)

但是这些问题的答案似乎并没有真正起作用，或者它们解决了特定的附加功能。

看起来像下面这样的东西应该工作（但它没有）：

```
$("input#autocomplete").keydown(function(e) {
  if (e.which == 13) {          
    //if there are suggestions...
    if ($(".pac-container .pac-item").length) {
      //click on the first item in the list or simulate a down arrow key event
      //it does get this far, but I can't find a way to actually select the item
      $(".pac-container .pac-item:first").click();
    } else {
      //there are no suggestions
    }
  }
}); 
```

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2016-05-11T14:48:19.043

在发现最好的答案是[这个](https://stackoverflow.com/a/11703018/1422096)之前，我已经阅读了这个问题的许多答案以及链接问题的答案很多次（注意：遗憾的是，这不是公认的答案！）。

我已经修改了 2 或 3 行**代码，将其变成了一个随时可用的函数，您可以在代码中复制/粘贴，**`input`并在需要时应用于许多元素。这里是：

```
var selectFirstOnEnter = function(input) {  // store the original event binding function
    var _addEventListener = (input.addEventListener) ? input.addEventListener : input.attachEvent;
    function addEventListenerWrapper(type, listener) {  // Simulate a 'down arrow' keypress on hitting 'return' when no pac suggestion is selected, and then trigger the original listener.
        if (type == "keydown") { 
            var orig_listener = listener;
            listener = function(event) {
                var suggestion_selected = $(".pac-item-selected").length > 0;
                if (event.which == 13 && !suggestion_selected) { 
                    var simulated_downarrow = $.Event("keydown", {keyCode: 40, which: 40}); 
                    orig_listener.apply(input, [simulated_downarrow]); 
                }
                orig_listener.apply(input, [event]);
            };
        }
        _addEventListener.apply(input, [type, listener]); // add the modified listener
    }
    if (input.addEventListener) { 
        input.addEventListener = addEventListenerWrapper; 
    } else if (input.attachEvent) { 
        input.attachEvent = addEventListenerWrapper; 
    }
} 
```

用法：

```
selectFirstOnEnter(input1);
selectFirstOnEnter(input2);
... 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-13T21:31:01.427

我正在从[Google maps Places API V3 自动完成重新发布我的答案 - 在输入时选择第一个选项](https://stackoverflow.com/questions/7865446/google-maps-places-api-v3-autocomplete-select-first-option-on-enter)：

似乎有一个更好更干净的解决方案：使用`google.maps.places.SearchBox`而不是`google.maps.places.Autocomplete`. 代码几乎相同，只是从多个地方获取第一个。按 Enter 后，将返回正确的列表 - 因此它开箱即用，无需破解。

请参阅示例 HTML 页面：

[http://rawgithub.com/klokan/8408394/raw/5ab795fb36c67ad73c215269f61c7648633ae53e/places-enter-first-item.html](http://rawgithub.com/klokan/8408394/raw/5ab795fb36c67ad73c215269f61c7648633ae53e/places-enter-first-item.html)

相关的代码片段是：

```
var searchBox = new google.maps.places.SearchBox(document.getElementById('searchinput'));

google.maps.event.addListener(searchBox, 'places_changed', function() {
  var place = searchBox.getPlaces()[0];

  if (!place.geometry) return;

  if (place.geometry.viewport) {
    map.fitBounds(place.geometry.viewport);
  } else {
    map.setCenter(place.geometry.location);
    map.setZoom(16);
  }
}); 
```

该示例的完整源代码位于：[https ://gist.github.com/klokan/8408394](https://gist.github.com/klokan/8408394)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-07-19T14:04:30.687

侦听用户是否已开始使用键盘向下导航列表而不是每次触发错误导航的工作解决方案

[https://codepen.io/callam/pen/RgzxZB](https://codepen.io/callam/pen/RgzxZB)

这是重要的部分

```
// search input
const searchInput = document.getElementById('js-search-input');

// Google Maps autocomplete
const autocomplete = new google.maps.places.Autocomplete(searchInput);

// Has user pressed the down key to navigate autocomplete options?
let hasDownBeenPressed = false;

// Listener outside to stop nested loop returning odd results
searchInput.addEventListener('keydown', (e) => {
    if (e.keyCode === 40) {
        hasDownBeenPressed = true;
    }
});

// GoogleMaps API custom eventlistener method
google.maps.event.addDomListener(searchInput, 'keydown', (e) => {

    // Maps API e.stopPropagation();
    e.cancelBubble = true;

    // If enter key, or tab key
    if (e.keyCode === 13 || e.keyCode === 9) {
        // If user isn't navigating using arrows and this hasn't ran yet
        if (!hasDownBeenPressed && !e.hasRanOnce) {
            google.maps.event.trigger(e.target, 'keydown', {
                keyCode: 40,
                hasRanOnce: true,
            });
        }
    }
});

 // Clear the input on focus, reset hasDownBeenPressed
searchInput.addEventListener('focus', () => {
    hasDownBeenPressed = false;
    searchInput.value = '';
});

// place_changed GoogleMaps listener when we do submit
google.maps.event.addListener(autocomplete, 'place_changed', function() {

    // Get the place info from the autocomplete Api
    const place = autocomplete.getPlace();

    //If we can find the place lets go to it
    if (typeof place.address_components !== 'undefined') {          
        // reset hasDownBeenPressed in case they don't unfocus
        hasDownBeenPressed = false;
    }

}); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-07-26T06:49:17.927

在我的站点中，为了实现相同的功能，我需要 jQuery 模拟插件（[https://github.com/jquery/jquery-simulate](https://github.com/jquery/jquery-simulate)），然后附加事件：

```
$("input#autocomplete").focusin(function () {
    $(document).keypress(function (e) {
        if (e.which == 13) {
            $("input#autocomplete").trigger('focus');
            $("input#autocomplete").simulate('keydown', { keyCode: $.ui.keyCode.DOWN } ).simulate('keydown', { keyCode: $.ui.keyCode.ENTER });
        }
    });
}); 
```

该插件将模拟按下 DOWN 然后 ENTER 键的动作，ENTER 本身不起作用，我找不到另一种选择第一个选项的方法。

希望这可以帮助

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-02-22T14:20:04.063

这是解决我的最简单方法：

```
autocomplete.addListener('place_changed', function() {
  if(event.keyCode == 13 || event.keyCode == 9) { // detect the enter key
    var firstValue = $(".pac-container .pac-item:first").text(); // assign to this variable the first string from the autocomplete dropdown
     }
    $('#search-address').val(firstValue); // add this string to input
    console.log(firstValue); // display the string on your browser console to check what it is
   //(...) add the rest of your code here
  });
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-03-07T07:24:40.980

这就是我所做的并且有效：

**HTML：**

```
<input name="location" id="autocomplete" autocomplete="off" type="text" class="textbx" placeholder="Enter Destination" required> 
```

**googleautocompletecustomized.js：**

```
 function initialize() {
      // Create the autocomplete object, restricting the search
      // to geographical location types.
      if($('#autocomplete').length){
          autocomplete = new google.maps.places.Autocomplete(
              (document.getElementById('autocomplete')),
              {
                types: ['(regions)'],
                componentRestrictions: {country: "in"}
              });
          google.maps.event.addListener(autocomplete, 'place_changed', function() {
            $('#autocomplete').closest('form').data('changed', true);
            fillInAddress();
          });         
      }

    //select first result
        $('#autocomplete').keydown(function (e) {
            if (e.keyCode == 13 || e.keyCode == 9) {
                $(e.target).blur();
                if($(".pac-container .pac-item:first span:eq(3)").text() == "")
                    var firstResult = $(".pac-container .pac-item:first .pac-item-query").text();
                else
                    var firstResult = $(".pac-container .pac-item:first .pac-item-query").text() + ", " + $(".pac-container .pac-item:first span:eq(3)").text();

                var geocoder = new google.maps.Geocoder();
                geocoder.geocode({"address":firstResult }, function(results, status) {
                    if (status == google.maps.GeocoderStatus.OK) {
                        placeName = results[0];
                        e.target.value = firstResult;
                        fillInAddress(placeName);
                        $('#datetimepicker1 .input-group-addon').click();
                    }
                });
            }

        });
    }

// [START region_fillform]
function fillInAddress(place) {
  // Get the place details from the autocomplete object.
  if(!place)
    var place = autocomplete.getPlace();

  for (var component in componentForm) {
    document.getElementById(component).value = '';
    document.getElementById(component).disabled = false;
  }

  // Get each component of the address from the place details
  // and fill the corresponding field on the form.
  for (var i = 0; i < place.address_components.length; i++) {
    var addressType = place.address_components[i].types[0];
    if (componentForm[addressType]) {
      var val = place.address_components[i][componentForm[addressType]];
      document.getElementById(addressType).value = val;

    }
  }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-09T14:07:49.663

如果您使用的是**Angular 2,4, 5 & 6**，请在下面的链接中找到答案

**[Angular 6，AGM 在谷歌自动完成中选择第一个地址](https://stackoverflow.com/questions/51759264/angular-6-agm-selects-first-address-in-google-autocomplete)**

[Angular AGM 自动完成第一个地址建议](https://stackoverflow.com/questions/51759264/angular-6-agm-selects-first-address-in-google-autocomplete)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-12-03T11:25:27.320

将输入元素放在表单元素之外。使用 javascript 填充表单。

```
document.getElementById("adress").value = place.formatted_address; 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-07-26T05:14:01.463

我做了一些解决这个问题，现在我可以使用角度 js 和角度自动完成模块从谷歌地方强制选择第一个选项。
感谢[kuhnza](https://github.com/kuhnza/angular-google-places-autocomplete)
我的代码

```
<form method="get" ng-app="StarterApp"  ng-controller="AppCtrl" action="searchresults.html" id="target" autocomplete="off">
   <br/>
    <div class="row">
    <div class="col-md-4"><input class="form-control" tabindex="1" autofocus g-places-autocomplete force-selection="true"  ng-model="user.fromPlace" placeholder="From Place" autocomplete="off"   required>
    </div>
        <div class="col-md-4"><input class="form-control" tabindex="2"  g-places-autocomplete force-selection="true"  placeholder="To Place" autocomplete="off" ng-model="user.toPlace" required>
    </div>
    <div class="col-md-4"> <input class="btn btn-primary"  type="submit" value="submit"></div></div><br /><br/>
    <input class="form-control"  style="width:40%" type="text" name="sourceAddressLat" placeholder="From Place Lat" id="fromLat">
    <input class="form-control"  style="width:40%"type="text" name="sourceAddressLang" placeholder="From Place Long" id="fromLong">
    <input class="form-control"  style="width:40%"type="text" name="sourceAddress" placeholder="From Place City" id="fromCity">
    <input class="form-control"  style="width:40%"type="text" name="destinationAddressLat" placeholder="To Place Lat" id="toLat">
    <input class="form-control"  style="width:40%"type="text" name="destinationAddressLang" placeholder="To Place Long"id="toLong">
    <input class="form-control"  style="width:40%"type="text" name="destinationAddress"placeholder="To Place City" id="toCity">
</form> 
```

这是一个[Plunker](http://plnkr.co:80/sESZUA)
谢谢。

# sparql - Jena Sparql 输出为 .txt 或 .xls 文件

> ID：14601657
> 
> 赞同：2
> 
> 时间：2013-01-30T10:23:54.990
> 
> 标签：sparql, jena

我想知道如何从 Jena SPARQL 查询的结果中创建 .txt 或 .xls 文件输出。任何人都可以帮忙吗？

这里是代码的一部分

```
InputStream in = new FileInputStream(new File("./src/myfile.owl"));

                Model model = ModelFactory.createOntologyModel(OntModelSpec.OWL_MEM_MICRO_RULE_INF, null);
                model.read(in, null);
                in.close();

                String queryString = 
                        "prefix : <http://www.semanticweb.org/thato/ontologies/2012/10/9/thesis_ontology_1try#> "  +    
                        "prefix rdfs: <" + RDFS.getURI() + "> "           +
                        "prefix owl: <" + OWL.getURI() + "> "             +
                        "prefix rdf: <" + RDF.getURI() + "> "             +
                        "select  ?Model  " +
                        "where {" +
                        "{?Model rdf:type :ApplicationModel. "      +
                        "?Model :hasDomain ?domain.    "                  +
                        "?domain :domainCode ?domaincode. "               +
                        "FILTER (?domaincode =" + "'"+ domainElement.getAttribute(attrDomain) + "'"+ ")"               +
                        "?Model :hasPhase ?phase." +
                        "?phase :name ?phasecode. "               +
                        "FILTER (?phasecode = "+ "'"+ phaseElement.getAttribute(attrPhase)+"'"+")"  +
                        "?Model :hasLevelOfDetail ?lod." +
                        "?lod :name ?lodcode."               +
                        "FILTER (?lodcode = "+ lodElement.getAttribute(attrLOD) +")"    +
                        "}"
                        ;
                Query query = QueryFactory.create(queryString);
                QueryExecution qe = QueryExecutionFactory.create(query, model);
                ResultSet results = qe.execSelect();
                ResultSetFormatter.out(System.out, results, query);
                qe.close();

        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T10:34:49.710

您还没有真正解释您希望输出的格式是什么样的，但无论如何我都会尝试回答。

Jena 将生成基于文本的结果序列化，它是 ASCII 表格样式，您可以通过以下方式获得：

```
ResultSetFormatter.out(System.out, results, query); 
```

这是您的代码已经执行的操作，所以我假设这种格式对您不满意？

您不能直接生成 Excel 电子表格，但可以生成 CSV，当然可以将其导入 Excel：

```
ResultSetFormatter.outputAsCSV(System.out, results); 
```

然而，CSV 序列化是有损序列化，它不会将 URI 缩短为缩写形式 - 请参阅[SPARQL 1.1 查询结果 CSV 和 TSV](http://www.w3.org/TR/sparql11-results-csv-tsv/)以了解此规范。

如果您想写入实际文件，只需切换`System.out`到适当的`OutputStream`实现，例如`FileOutputStream`

# junit - 如何提高单元测试的效率？

> ID：14601658
> 
> 赞同：1
> 
> 时间：2013-01-30T10:23:56.890
> 
> 标签：junit, phpunit, performance, xunit

我们正在为我们现有的代码库创建*单元测试用例，在创建**测试用例*的过程中，测试文件的大小越来越大，并且执行时间很长。

*我知道单元测试*的局限性，我也做了一些研究来提高效率。在研究过程中，我发现了一个有用的想法来收紧提供的数据集。

我还在寻找更多关于如何提高运行/创建单元测试用例效率的想法？我们可以保留在此范围之外增加服务器资源的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:05:08.763

由于您的问题很笼统，我将介绍一些常见的选择。但大多数加速技术都有缺点。

如果您依赖外部组件（Web 服务、文件系统等），您可以通过模拟它们来获得加速。无论如何，这通常是单元测试所需要的。您仍然需要使用真实组件进行测试的集成/功能测试。

如果测试数据库，您可以通过使用内存数据库获得相当大的加速（sqlite 可以很好地与 PHP 的 PDO 配合使用；使用 java 可能是 H2？）。这可能有[缺点](https://stackoverflow.com/questions/14423613/suggestions-to-avoid-db-deps-when-using-an-in-memory-sqlite-db-to-speed-up-unit)，除非数据库可移植性已经是设计目标。（我即将开始针对 MySQL 和 sqlite 运行一组单元测试。）完全模拟数据库（见上文）可能会更好。

PHPUnit 允许您在每个测试中指定[@group 。](http://www.phpunit.de/manual/current/en/appendixes.annotations.html#appendixes.annotations.group)您可以检查并用 标记较慢的测试`@group slow`，然后使用`--exclude-group`命令行标志在大多数测试运行中排除它们，并将它们包含在隔夜构建中。（您还可以在 phpunit.xml.dist 文件中[指定要包含/排除的组](http://www.phpunit.de/manual/current/en/appendixes.configuration.html#appendixes.configuration.groups)。（我不认为 jUnit 有这个选项，但 TestNG 有；对于 C#，[NUnit 提供](http://www.nunit.org/index.php?p=category&r=2.2)了这个类别。）

一次创建夹具，然后在测试之间共享它们比在每次测试之前创建夹具要快。XUnit 测试模式用整章的篇幅介绍这种方法的优缺点（主要是缺点）。

我知道在您的问题中明确禁止*向其投掷硬件*，但请再次查看@group，并考虑它如何允许您将测试拆分到多台机器上。或者按目录拆分测试，并在 LAN 上的多台机器上处理一个目录。（PHPUnit 是单线程的，因此您可以在同一台机器上运行多个实例，每个实例都有自己的目录：请注意夹具需要如何独立（包括您创建的数据库的唯一名称、模拟文件系统等）如果你走这条路。）

# ios - 获取对 UITableviewCell 的引用的替代方法？

> ID：14601663
> 
> 赞同：0
> 
> 时间：2013-01-30T10:24:12.783
> 
> 标签：ios, cocoa-touch

我正在开发的应用程序的设计，特别是 tableview 部分非常复杂。大约有 5-6 种方法，我需要从表格视图中获取对特定单元格的引用。我不喜欢的是我必须使用

```
-tableview:cellForRowAtIndexPath 
```

这是一种数据源方法，做了很多繁重的工作。自定义单元格配置、出列、获取特定单元格的数据..等等。关键是所有这些代码都会再次执行，即使它根本没有任何意义。单元对象已经完全加载。我的观察是否正确，如果是，是否有有效的测试和轻量级解决方案？

也许可能存在对所有单元格的引用索引。问它，我会立即得到没有数据源代码的参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:31:06.060

UITableView 有`cellForRowAtIndexPath:`方法。

从[UITableView 参考：](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)

> 返回指定索引路径处的表格单元格。
> 
> ```
> - (UITableViewCell *)cellForRowAtIndexPath:(NSIndexPath *)indexPath 
> ```
> 
> **参数**
> *indexPath*
> 在接收器中定位行的索引路径。
> 
> **返回值**
> 表示表格单元格的对象，或者`nil`该单元格不可见或 indexPath 超出范围。

# entity-framework - 必须先将连接字符串传递给 EF 5 DbContext 代码，否则命令异常

> ID：14601665
> 
> 赞同：2
> 
> 时间：2013-01-30T10:24:13.433
> 
> 标签：entity-framework, entity-framework-5

我只是在使用 EF 5.0，并且我重新创建了一个非常简单的 DbContext，它与 EF 4.1 一样工作。

这里的上下文和模型

```
public class AgenciesDatabaseContext : DbContext 
{
   public DbSet<Agency> Agencies { get; set; }
}

[Table("QryAgency")]
public class Agency
{
   [Key]
   public string CardCode { get; set; }
   public string DisplayName { get; set; }
   public string CardFName { get; set; }
   public string Address { get; set; }
   public string ZipCode { get; set; }
   public string City { get; set; }
} 
```

我将此上下文的 global.asax 初始化程序设置为 null 因为表已经存在

```
Database.SetInitializer<ExtranetCentralizerContext>(null); 
```

这是 web.config 中的连接字符串：

```
<add name="AgenciesDatabase" providerName="System.Data.SqlClient" connectionString="..."/> 
```

当我尝试在存储库中使用 DbContext 时，我收到此错误：

```
InnerException = {"Invalid column name '...'.\r\n Invalid column name '...'.\r\nInvalid column name '...'."} 
```

这很奇怪，因为我可以看到我的数据库没有连接。

我不明白的是，如果我将连接字符串传递给这样的上下文，我可以使它工作：

```
 public class AgenciesDatabaseContext : DbContext 
 {
     public DbSet<Agency> Agencies { get; set; }

     public AgenciesDatabaseContext ()
            : base("AgenciesDatabase")
     {

     }
 } 
```

那里一切正常。所以我的问题是：EF 不应该使用与其名称匹配的连接字符串（在本例中为 AgenciesDatabase）？？？是什么让它在这种情况下失败？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:48:52.200

在您的 app.config 中，名称应该是 AgenciesDatabaseContext，而不仅仅是 AgenciesDatabase。

# c - ALSA：防止扬声器欠载的方法

> ID：14601666
> 
> 赞同：7
> 
> 时间：2013-01-30T10:24:16.827
> 
> 标签：c, linux, audio, alsa

我在非交错模式下播放单声道音频。当我将音频数据写入扬声器时，我遇到了不足：`ALSA lib pcm.c:7339:(snd_pcm_recover) underrun occurred`

这是我的写作方式：

```
 printf("%d",snd_pcm_avail (spkhandle));  
    ret = snd_pcm_writen(spkhandle, pSpeakerBuf , framesIn18Millisec);
    if(ret < 0)
    {
        snd_pcm_recover(spkhandle, ret, 0);
    } 
```

有哪些不同的方式/参数配置可以防止 ALSA under run ？

（我使用的是 Linux 3.0、ARM）

编辑：这是使用 snd_pcm_avail() API 进行的缓冲区测量

```
 snd_pcm_avail = 2304      << snd_pcm_writen call 1 success
      snd_pcm_avail = 2160      << snd_pcm_writen call 2 success
      snd_pcm_avail = 2016      << snd_pcm_writen call 3 success
      snd_pcm_writen error -32 Broken pipe  << snd_pcm_writen call 4 failure
      ALSA lib pcm.c:7339:(snd_pcm_recover) underrun occurred  << And displays this message 
```

这是 Marko 要求的输出：

```
snd_output_t* out;
....
// Do alsa parameters init .... 
....
snd_output_stdio_attach(&out, stderr, 0);
snd_pcm_dump_sw_setup(spkhandle, out);

  tstamp_mode  : NONE
  period_step  : 1
  avail_min    : 144
  period_event : 0
  start_threshold  : 288
  stop_threshold   : 2304
  silence_threshold: 0
  silence_size : 0
  boundary     : 1207959552 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T15:30:28.793

我假设这段代码在一个紧密的循环中运行，并且旨在阻止`snd_pcm_writen()`. 没有给出采样率；我假设为 48kHz，因为这些数字都很好地划分。

我认为这里的情况如下：

*   `snd_pcm_write()`不保证写入提供的所有帧（返回值只检查错误情况）。从记录来看，`snd_pcm_avail()`它实际上是消耗`avail_min`或`144`每个框架。这是 3ms 的音频。
*   假设此时音频没有运行，两次写入后，缓冲区中的帧数等于`start_threshold`- at `288`samples；音频输出开始
*   调用`printf()`阻塞，我似乎记得`snd_pcm_avail()`必须与音频输出硬件同步，也可能阻塞。由于您现在比播放时间提前了 6 毫秒，因此在第三次调用`snd_pcm_writen()`

总而言之，您此时不应该打电话，并且您可能需要补偿没有消耗所有帧的`printf()`事实`snd_pcm_writen()``pSpeakerBuf`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:33:08.330

这是缓冲区欠载，您可以尝试通过在 ~/.asoundrc 文件中明确提及来增加缓冲区大小？

# android - TextWatcher 没有达到其目的

> ID：14601669
> 
> 赞同：-1
> 
> 时间：2013-01-30T10:24:42.527
> 
> 标签：android, textwatcher

以下代码片段用于文本观察器...它不起作用...一切正常，直到最后一行代码...

```
private TextWatcher mobileTextWatcher = new TextWatcher() {
    @Override
    public void onTextChanged(CharSequence s, int start, int before,
            int count) {

    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
    }

    @Override
    public void afterTextChanged(Editable s) {
        String number = s.toString();
        number = AppConstants.convertToOnlyDigits(number);
        Editable temp = new SpannableStringBuilder(
                AppConstants.formatPhoneNumber(number));
        s = temp;
    }
}; 
```

之后，新的不会分配给 s.. 或者换句话说，我看不到编辑文本中文本的变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:33:34.470

与`s`函数参数一样，您不能重新分配它并保存超出函数范围的新值。

如果我理解你的目标正确 - 你应该`EditText`通过`setText()`方法分配 temp 值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:33:39.520

参数不作为引用传递，所以 s = temp; 不会更改edittext中的文本。

像这样试试

```
private TextWatcher mobileTextWatcher       =   new TextWatcher() {
        boolean inWatcher = false;
        @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {

    }
    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,int after) {
    }
    @Override
    public void afterTextChanged(Editable s) {
        if(inWatcher) { inWatcher = false; return; }
        String number   =   s.toString();
        number          =   AppConstants.convertToOnlyDigits(number);
        Editable temp   =   new SpannableStringBuilder(AppConstants.formatPhoneNumber(number));
        inWatcher = true;
        your_edit_text.setText(temp);
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:34:04.747

您实际上必须使用 setText() 方法再次设置 EditText 的文本。

在执行此操作之前，您可能需要添加一个简单的布尔检查作为“mFormatting”，以确保在进行更改后不会进入 textWatcher 调用自身的无限循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T10:37:07.127

您没有更改 中的对象`s`，而是将变量替换为`s`另一个对象。

尝试这样的事情：

```
boolean recurseProtection = false;
@Override
public void afterTextChanged(Editable s) { 
    if(!recurseProtection) {
        String number = s.toString();
        number = AppConstants.convertToOnlyDigits(number);
        recurseProtection = true;
        s.clear();
        s.append(AppConstants.formatPhoneNumber(number));
        recurseProtection = false;
    }
} 
```

请注意，我添加了一些保护以`afterTextChanged`在您更改`s`对象时停止被调用（我假设它上面放置了一个 DataObserver）。递归保护不在我的脑海中，所以可能需要调整。

希望这可以帮助。

# dynamics-crm-2011 - CRM 2011 本地化渲染问题

> ID：14601670
> 
> 赞同：1
> 
> 时间：2013-01-30T10:24:41.397
> 
> 标签：dynamics-crm-2011

在 CRM 2011 中，激活与英语不同的语言后，然后单击某些下拉菜单，页面未正确呈现 - 请参见图像。这是保加利亚语，我有报告说法语也会出现同样的问题。

关于问题是什么或如何解决这个问题的任何建议？

![在此处输入图像描述](../Images/ac3d0d62ce32c9d9c7bc905cef9059c5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:29:33.787

I can't reproduce the issue on my server so I'd guess it's a localized problem at **your** installation. You might be just of of luck and you'll have to reinstall the production environment.

I'd suggest that you create a shadow organization on the same server and copy over the data. For the users, there wont be any difference (seemingly).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T19:14:44.157

该问题取决于 MUI 包汇总是否丢失。

因此，您必须检查您的服务器是否具有与您的 MUI 包汇总相同的汇总。

因此，如果您在基础语言之后有 3 种语言，则所有这些语言都必须具有 MUI 包汇总等于服务器汇总。

我希望你明白，

阿尔贝托

# javascript - 提取要在 jquery 函数中使用的链接 ID

> ID：14601673
> 
> 赞同：1
> 
> 时间：2013-01-30T10:24:53.017
> 
> 标签：javascript, jquery, this, simplemodal

全部。

我知道这相对简单，但我对 javascript 的经验不足。背景是我正在尝试在同一页面上将 SimpleModal 与单独的模式一起使用。之前已经解释过这种事情（[http://code.google.com/p/simplemodal/issues/detail?id=32](http://code.google.com/p/simplemodal/issues/detail?id=32)），但是我对**this.id**的理解不够好，代码也不是在职的。

我认为我的术语在这里甚至不正确，但是*选择器*没有正确检索我的链接想法并使用“#osx_”字符串对其进行解析。我在使用警报后（字面意思是几小时后）意识到了这一点。

```
$('a.osx').click(function () {
$('#osx_' + this.id).modal();
}); 
```

我知道我的 HTML 设置正确，如果我将“#osx_newsletter”硬编码到两个位置，它就可以正常工作。这显然会杀死我需要的动态 id。

这是代码。有人可以让我知道我在这里做错了什么吗？我将*不胜*感激！谢谢！

```
/*
 * SimpleModal OSX Style Modal Dialog
 * http://simplemodal.com
 *
 * Copyright (c) 2013 Eric Martin - http://ericmmartin.com
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 */

jQuery(function ($) {
    var OSX = {
        container: null,
        init: function () {
            $("a.osx").click(function (e) {
                e.preventDefault(); 
alert('#osx_'+$(this).attr('id'));
                $('#osx_' + 'donate').modal({
                    overlayId: 'osx-overlay',
                    containerId: 'osx-container',
                    closeHTML: null,
                    minHeight: 80,
                    opacity: 65, 
                    position: ['0',],
                    overlayClose: true,
                    onOpen: OSX.open,
                    onClose: OSX.close
                });
            });
        },
        open: function (d) {
            var self = this;
            self.container = d.container[0];
            d.overlay.fadeIn('slow', function () {
                $('#osx_' + 'donate', self.container).show();
                var title = $("#osx-modal-title", self.container);
                title.show();
                d.container.slideDown('slow', function () {
                    setTimeout(function () {
                        var h = $("#osx-modal-data", self.container).height()
                            + title.height()
                            + 20; // padding
                        d.container.animate(
                            {height: h}, 
                            200,
                            function () {
                                $("div.close", self.container).show();
                                $("#osx-modal-data", self.container).show();
                            }
                        );
                    }, 300);
                });
            })
        },
        close: function (d) {
            var self = this; // this = SimpleModal object
            d.container.animate(
                {top:"-" + (d.container.height() + 20)},
                500,
                function () {
                    self.close(); // or $.modal.close();
                }
            );
        }
    };

    OSX.init();

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:30:57.657

你可以这样尝试：

```
$('a.osx').click(function () {
    $('[id="osx_' + this.id+'"]').modal();
}); 
```

# linq - LINQ to Entities 不支持指定的类型成员“日期”。只有初始化器、实体成员和实体导航属性

> ID：14601676
> 
> 赞同：156
> 
> 时间：2013-01-30T10:25:03.797
> 
> 标签：linq, entity-framework-4, linq-to-entities

**在实体框架**中使用此代码我收到以下错误。我需要获取特定日期的所有行，`DateTimeStart`是这种格式的 DataType 类型`2013-01-30 12:00:00.000`

代码：

```
 var eventsCustom = eventCustomRepository.FindAllEventsCustomByUniqueStudentReference(userDevice.UniqueStudentReference)
                    .Where(x =>  x.DateTimeStart.Date == currentDateTime.Date); 
```

* * *

错误：

> base {System.SystemException} = {“LINQ to Entities 不支持指定的类型成员 'Date'。仅支持初始化程序、实体成员和实体导航属性。”}

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：301
> 
> 时间：2013-01-30T10:29:53.540

`DateTime.Date`无法转换为 SQL。使用[EntityFunctions.TruncateTime](http://msdn.microsoft.com/en-us/library/dd395596.aspx)方法获取日期部分。

```
var eventsCustom = eventCustomRepository
.FindAllEventsCustomByUniqueStudentReference(userDevice.UniqueStudentReference)
.Where(x => EntityFunctions.TruncateTime(x.DateTimeStart) == currentDate.Date); 
```

更新：正如@shankbond 在评论中提到的，Entity Framework 6[`EntityFunctions`](http://msdn.microsoft.com/en-us/library/system.data.objects.entityfunctions%28v=vs.110%29.aspx)已过时，您应该使用[`DbFunctions`](http://msdn.microsoft.com/en-us/library/system.data.entity.dbfunctions%28v=vs.113%29.aspx)Entity Framework 附带的类。

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2014-03-12T21:50:02.053

You should now use `DbFunctions.TruncateTime`

```
var anyCalls = _db.CallLogs.Where(r => DbFunctions.TruncateTime(r.DateTime) == callDateTime.Date).ToList(); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-04-20T06:06:13.697

`EntityFunctions`已过时。考虑`DbFunctions`改用。

```
var eventsCustom = eventCustomRepository.FindAllEventsCustomByUniqueStudentReference(userDevice.UniqueStudentReference)
   .Where(x => DbFunctions.TruncateTime(x.DateTimeStart) == currentDate.Date); 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2014-02-26T09:58:21.610

我想添加一个解决方案，帮助我在实体框架中解决这个问题：

```
var eventsCustom = eventCustomRepository.FindAllEventsCustomByUniqueStudentReference(userDevice.UniqueStudentReference)
                .Where(x =>  x.DateTimeStart.Year == currentDateTime.Year &&
                             x.DateTimeStart.Month== currentDateTime.Month &&
                             x.DateTimeStart.Day == currentDateTime.Day
    ); 
```

我希望它有所帮助。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-06-13T17:32:34.080

始终对 x.DateTimeStart 和 currentDate 使用 EntityFunctions.TruncateTime()。如 ：

```
var eventsCustom = eventCustomRepository.FindAllEventsCustomByUniqueStudentReference(userDevice.UniqueStudentReference).Where(x => EntityFunctions.TruncateTime(x.DateTimeStart) == EntityFunctions.TruncateTime(currentDate)); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-01-30T10:46:47.293

只需使用简单的属性。

```
var tomorrow = currentDateTime.Date + 1;  
var eventsCustom = eventCustomRepository.FindAllEventsCustomByUniqueStudentReference(userDevice.UniqueStudentReference)
                            .Where(x =>  x.DateTimeStart >= currentDateTime.Date 
                                   and x.DateTimeStart < tomorrow); 
```

如果您的应用程序中不可能有未来的日期，那么**>= x.DateTimeStart >= currentDateTime.Date**就足够了。

如果您有更复杂的日期比较，请检查[规范函数](http://msdn.microsoft.com/en-us/library/bb738626.aspx) 以及是否有 EF6+ [DB 函数](http://msdn.microsoft.com/en-us/library/system.data.entity.dbfunctions%28v=vs.113%29.aspx)

更一般地 - 对于搜索问题的人[EF 中支持的 Linq 方法](http://msdn.microsoft.com/en-us/library/bb738550) 可以解释与在内存基础列表上工作但在 EF 中不工作的 linq 语句类似的问题。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-12-01T08:00:24.740

**简化：**

```
DateTime time = System.DateTime.Now;
ModelName m = context.TableName.Where(x=> DbFunctions.TruncateTime(x.Date) == time.Date)).FirstOrDefault(); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-05-15T15:40:05.543

使用下面的代码来使用 EF6：

```
(DbFunctions.TruncateTime(x.User.LeaveDate.Value) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-08-25T04:01:29.750

我有同样的问题`Entity Framework 6.1.3`

但是有不同的场景。我的模型属性是可为空的`DateTime`

```
DateTime? CreatedDate { get; set; } 
```

所以我需要查询今天的日期以检查所有记录，所以这对我有用。这意味着我需要截断两条记录以获得正确的查询`DbContext`：

```
Where(w => DbFunctions.TruncateTime(w.CreatedDate) == DbFunctions.TruncateTime(DateTime.Now); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-01-16T08:16:12.453

另一种解决方案可能是：

```
var eventsCustom = eventCustomRepository.FindAllEventsCustomByUniqueStudentReference(userDevice.UniqueStudentReference).AsEnumerable()
   .Where(x => x.DateTimeStart.Date == currentDate.Date).AsQueryable(); 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2021-07-13T08:38:22.443

我也遇到过同样的问题，似乎它确实是由 Where 方法中对 .Date 属性的任何调用引起的。删除后，错误消失。考虑在比较运算符的任何一侧调用 .Date 属性会导致此错误。在 Where 方法之外和之前调用 .Date 属性足以解决此错误。

# git - 为不同的服务器提供不同的 .htaccess 文件的最佳方式？

> ID：14601678
> 
> 赞同：1
> 
> 时间：2013-01-30T10:25:07.047
> 
> 标签：git, .htaccess, .htpasswd

我有一个受源代码控制（Git）控制的网站，并为两个不同的服务器使用两个分支。`master`分支反映了生产网站，分支`develop`是部署到我们的测试服务器的内容。

但是，测试服务器是可公开访问的，但到目前为止，它一直受到**.htaccess**和**.htpasswd**的保护。

**.htaccess**文件中有很多`RewriteRule`指令，想知道：让两台服务器使用相同的**.htaccess**规则但测试站点也有**.htpassw**规则的最佳方法是什么？

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:18:47.773

1.  **明显的方式**- 不同分支中的不同 .htaccess，合并时合并文件
2.  **Git 风格的方式**- 涂抹/清洁过滤器，它（过滤器后面的脚本）将*公共关键字*转换为最终代码，具体取决于分支（以及反向转换）
3.  **独立于 SCM 的方式**- 共享代码，在交付阶段由使用的 build-deploy 处理并获取可用文件（如果网站不是 repos 的工作目录）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:15:04.850

通常，代码存储库中根本不应该有任何与密码相关的信息。

也就是说，假设您从开发合并到主控，您实际上不能只有一个文件位于开发分支和主控中。您也许可以在签出 master 时使用 git 挂钩（可能是接收后，具体取决于您的机器的设置方式）来删除文件，但这非常脆弱。

更好的方法是根本不将文件放在 git 中，而是手动维护它。你可以在测试服务器上有一个 git 钩子，它从其他地方复制 .htpasswd 文件。或者，您甚至可以将该文件保存在单独的存储库中，并将其符号链接到测试服务器的目录中。******

# java - 通过java查询MS SCOM服务器有效配置

> ID：14601681
> 
> 赞同：1
> 
> 时间：2013-01-30T10:25:19.027
> 
> 标签：java, windows, monitoring

简短版本：我们的 Windows 服务器由 SCOM 2007 管理。我们希望通过 java 将每个服务器的有效监控配置拉入我们的系统管理基础架构。

Export-SCOMEffectiveMonitoringConfiguration 看起来不错，但它适用于 2010 年，而我们使用的是 2007 R2。我还没有计划升级的日期。SCOM 人员与我们的系统管理人员在 IT 的不同方面已经结束了。我发现的所有命中要么是 1) 关于监视 java 进程、webapps、WASen 等，要么是 2) 需要 VB 或 C#，或者 3) 关于订阅我们已经通过 SCOM-BEM 桥接的警报。

顺便说一句，我可以在 VB 中编写代码，但该团队是基于 java 的，因此对于持续支持来说是个问题。我们已经为我们的 unix 和其他服务器拥有的代码都在 java 中。所以最好的情况可能是弯腰用 VB/C# 编写一个独立的应用程序来生成我们的 java 可以使用的东西？eta：j-Interop 看起来很有用。

SCOM WSDL 是否允许我们查询服务器的有效配置？

如果您能指出正确的 FM，欢迎 RTFM 回答。目前我在一个曲折的小 URL 的迷宫中，都指向错误的信息。

# java - 购物车jsp错误

> ID：14601685
> 
> 赞同：-1
> 
> 时间：2013-01-30T10:25:31.583
> 
> 标签：java, html, jsp

我正在尝试制作一个购物车，下面是显示代码。如果用户没有购物车，它会创建一个购物车并显示所有行，例如产品的 pip 和 ean 数。

> ```
> <%-- 
>     Document   : DisplayShoppingCart
>     Created on : Jan 24, 2013, 12:48:06 PM
>     Author     : Faiza
> --%>
> <%@ page language="java" import="model.*,java.util.*,java.text.*" %>
> 
> <%-- Show the header with the shopping cart image --%>
> <table border="0">
> <tr><td><img src="Drug-basket-icon.png"><td><h1>Shopping Cart</h1>
> </table>
> 
> <%
> // Get the current shopping cart from the user's session.
>     ShoppingCart cart = (ShoppingCart) session.getAttribute("ShoppingCart");
> 
> // If the user doesn't have a shopping cart yet, create one.
>     if (cart == null)
>     {
>         cart = new ShoppingCart();
>         session.setAttribute("ShoppingCart", cart);
>     }
> // Get the items from the cart.
>     Vector items = cart.getItems();
> 
> // If there are no items, tell the user that the cart is empty.
>     if (items.size() == 0)
>     {
>         out.println("<h3>Your shopping cart is empty.</h3>");
>     }
>     else
>     {
> %>
> <%-- Display the header for the shopping cart table --%>
> <br>
> <table border=4>
> <tr><th>EAN</th><th>PIP</th><th>Name</th><th>Description</th><th>Supplier ID</th><th>Price</th><th>Quantity</th></tr>
> <%
> 
>         int numItems = items.size();
> 
> // Get a formatter to write out currency values.
>         NumberFormat currency = NumberFormat.getCurrencyInstance();
> 
>         for (int i=0; i < numItems; i++)
>         {
>             Item item = (Item) items.elementAt(i);
> 
> // Print the table row for the item.
>             out.print("<tr><td>");
>             out.print(item.EAN);
>             out.print("</td><td>");
>             out.print(item.PIP);
>             out.print("</td><td>");
>             out.print(item.name);
>             out.print("</td><td>");
>             out.print(item.description);
>             out.print("</td><td>");
>             out.print(item.SupplierID);
>             out.print("</td><td>");
>              out.print(item.price);
>             out.print("</td><td>");
>              out.print(item.quantity);
>             out.print("</td><td>");
>             out.print(currency.format(item.price));
> 
> // Print out a link that allows the user to delete an item from the cart.
>             out.println("</td><td>"+
>                 "<a href=\"/shoppingcart/RemoveItemServlet?item="+
>                 i+"\">Remove</a></td></tr>");
>         }
>     }
> %>
> </table> 
> ```

我得到的错误如下我已经尝试了一切但我不明白这意味着什么

> ```
> pe Exception report
> 
> message
> 
> description The server encountered an internal error () that prevented it from fulfilling this request.
> 
> exception
> 
> org.apache.jasper.JasperException: Unable to compile class for JSP: 
> 
> An error occurred at line: 14 in the generated java file
> Syntax error on token ";", delete this token
> 
> Stacktrace:
>   org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:102)
>   org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:331)
>   org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:469)
>   org.apache.jasper.compiler.Compiler.compile(Compiler.java:378)
>   org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
>   org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
>   org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)
>   org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)
>   org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
>   org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
>   javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
>   org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)** 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:58:36.157

去除 ; 从导入语句。

# ruby-on-rails - Ruby on Rails 中的 application.rb 和 environment.rb 有什么区别？

> ID：14601690
> 
> 赞同：8
> 
> 时间：2013-01-30T10:25:39.257
> 
> 标签：ruby-on-rails

我是 Rails 新手，我对 ASP.net 有很好的了解。在 ASP.net Web 应用程序中，我有一个`web.config`来完成我的所有设置，但在 Rails 中有几个配置文件，我现在想知道它们之间有什么区别以及这些文件的用途是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:32:42.120

基本上，不同的配置文件构建在一起，`web.config`正如您从 ASP.net 中所知道的那样。

`environment.rb`

Rails 有不同的运行级别，就像 ASP.net 也有它的环境。在`environment.rb`文件中配置这些运行级别。例如，您可以使用它为您的开发阶段进行一些特殊设置，这对调试很有用。

`application.rb`

这个文件的目的是为整个应用程序配置一些东西，比如编码。

[您可以在指南](http://guides.rubyonrails.org/initialization.html#config-environment-rb)中找到更多信息，就像 davids 提到的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:32:29.123

从[指南](http://guides.rubyonrails.org/initialization.html#config-environment-rb)：

> **配置/环境.rb**
> 
> 这个文件是config.ru（rails server）和Passenger需要的通用文件。这就是这两种运行服务器的方式相遇的地方；在此之前的所有内容都已设置好 Rack and Rails。
> 
> 该文件以需要 config/application.rb 开头。
> 
> **配置/应用程序.rb**
> 
> 此文件需要 config/boot.rb，但前提是之前不需要它，rails 服务器中会出现这种情况，但Passenger 不会出现这种情况。
> 
> 然后乐趣开始了！

# wpf - 无法在 WPF 中设置 DataGrid 的 CanUserAddRows 属性

> ID：14601697
> 
> 赞同：0
> 
> 时间：2013-01-30T10:25:49.753
> 
> 标签：wpf, datagrid, controls

我`DataGrid`在这样的 WPF 窗口中有一个：

```
<DataGrid AutoGenerateColumns="False" HorizontalAlignment="Stretch" 
          Name="dataGrid1" VerticalAlignment="Stretch" CanUserAddRows="True" 
          CanUserDeleteRows="True" >
    <DataGrid.Columns>
        <DataGridTextColumn Header="X"></DataGridTextColumn>
        <DataGridTextColumn Header="Y"></DataGridTextColumn>
    </DataGrid.Columns>
</DataGrid> 
```

当我转到属性面板`DataGrid`并尝试检查该`CanUserAddRows`属性时，它仍然未选中！但是它会添加`CanUserAddRows="True"`到 XAML。同样的事情也发生在`CanUserDeleteRows`财产上。

到底是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:51:36.017

检查我是否正确理解了这个问题：即使您`CanUserAddRows="True"`在 XAML 中设置了属性，当您签入后面的代码时，相同的属性是`False`.

您可能绑定到某种只读集合。确保您绑定到类似`ObservableCollection<T>`使这些功能工作的东西。

如果根本没有指定源，`DataGrid`则无法在其中创建新行。

# permutation - 寻找完全不同的排列

> ID：14601700
> 
> 赞同：2
> 
> 时间：2013-01-30T10:25:58.057
> 
> 标签：permutation

对于具有 n 个不同元素的序列，例如 {0, 1, 2, ..., n-1}，其中 n 是偶数，可以识别序列中彼此完全不同的 n 个排列。如果 n 是奇数，则可以识别 n-1 个这样的排列。请注意，这只是一种说法，还不是事实。

通过完全不同（可能不准确），我的意思是没有“相邻且有序的对”元素，如（0,1），（2,3）和（n-3，n-2），来自在任何剩余排列中重复的特定排列。

例如：

如果 n=2，那么我们可以将 {0, 1} 和 {1, 0} 识别为两个完全不同的排列。

如果 n=3，那么我们可以将 {0, 1, 2} 和​​ {2, 1, 0} 识别为两个完全不同的排列。

如果 n=4，那么我们可以将 {0, 1, 2, 3}, {1, 3, 0, 2}, {2, 0, 3, 1} 和 {3, 2, 1, 0} 识别为四个完全不同的排列。

如果n=5，那么我们可以识别{0, 1, 2, 3, 4}, {1, 4, 2, 0, 3}, {3, 0, 2, 4, 1}, {4, 3, 2, 1, 0} 作为四个完全不同的排列。

我想知道：

1) 给定一个序列，是否有一个通用规则或算法可以找到该序列的任何 n（如果 n 是偶数）或 n-1（如果 n 是奇数）完全不同的排列？

2）这个问题有正式的定义吗？

# java - 将delphi二进制操作函数移植到java

> ID：14601701
> 
> 赞同：4
> 
> 时间：2013-01-30T10:26:03.670
> 
> 标签：java, delphi, porting

让我开始说我对Delphi一无所知......

我正在尝试将一个用 delphi 编写的旧应用程序移植到 java，但事情不正常......

我有这个函数可以对两个字节进行一些二进制操作。Delphi 中的代码如下：

```
function  TMainForm.mixthingsup(x, y: byte): word;
var
counter: byte;
answer1, answer2: byte;

begin
answer1             := $9D xor x;

for counter := 1 to 8 do
begin
    if (answer1 and $80) = $80 then
        answer1 := (answer1 shl 1) xor $26
    else
        answer1 := (answer1 shl 1);
end;

answer2             := answer1 xor y;

for counter := 1 to 8 do
begin
    if ((answer2 and $80) = $80) then
        answer2 := ((answer2 shl 1) xor $72)
    else
        answer2 := (answer2 shl 1);
end;

Result := (answer1 shl 8) or answer2;
end; 
```

这是我的java代码：

```
public static String mixthingsup(String data)
{
 byte[] conv=null;
 byte c9d;
 byte c80;
 byte c26;
 byte c72;
 byte x,y;
 byte res1, res2;
 byte res;

 conv=hexStringToByteArray(data.substring(0, 2));
 x=conv[0];
 conv=hexStringToByteArray(data.substring(2, 4));
 y=conv[0];
 conv=hexStringToByteArray("9d");
 c9d=conv[0];
 conv=hexStringToByteArray("80");
 c80=conv[0];
 conv=hexStringToByteArray("26");
 c26=conv[0];
 conv=hexStringToByteArray("72");
 c72=conv[0];

 res1=(byte) (c9d ^ x);

 for(int i=1; i<9; i++) 
 {
  if((res1 & c80) == c80)
      res1=(byte) ((res1 << 1) ^ c26);
  else
      res1=(byte) (res1 << 1);
 }

 res2=(byte) (res1 ^ y);
 for(int i=1; i<9; i++) 
 {
  if((res2 & c80) == c80)
      res2=(byte) ((res2 << 1) ^ c72);
  else
      res2=(byte) (res2 << 1);

 }

 res=(byte) ((res1 << 8) | res2);

 return Integer.toHexString(res);
} 
```

例如，当 delphi 函数返回 A8 77 的 CA BA 时，java 函数返回 FF FF FF BA

有什么想法吗？有什么帮助吗？

谢谢，佩德罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:35:21.823

看看这一行：

```
res=(byte) ((res1 << 8) | res2); 
```

当您将其转换为时，`byte`您会将 16 位值截断为 8 位，因此会丢失`res1`。

您应该转换为 2 字节值，`short`.

也就是说，在数组中返回两个字节可能更容易。像这样：

```
public static byte[] MixThingsUp(byte x, byte y)
{
    byte answer1 = (byte) (0x9D ^ x);
    for (int i=0; i<8; i++)
        if ((answer1 & 0x80) == 0x80)
            answer1 = (byte) ((answer1 << 1) ^ 0x26);
        else
            answer1 = (byte) (answer1 << 1);

    byte answer2 = (byte) (answer1 ^ y);
    for (int i=0; i<8; i++)
        if ((answer2 & 0x80) == 0x80)
            answer2 = (byte) ((answer2 << 1) ^ 0x72);
        else
            answer2 = (byte) ((answer2 << 1));

    return new byte[] { answer1, answer2 };
} 
```

如果我是你，我会将按位操作和与字符串的转换分开。您在问题中提出的方式混合了这两个问题。

# facebook - 如何知道 FB API 调用完成？

> ID：14601702
> 
> 赞同：-1
> 
> 时间：2013-01-30T10:26:01.550
> 
> 标签：facebook, api

我现在有点问题。场景是，我使用我是使用 FQL 的管理员的 pageid。获取页面 id 后，我想遍历这些 id 并调用以下函数：

```
FB.api('/'+id+'/tabs?fields=image_url,name,application', function(response) {
// Other stuff here
}); 
```

从这里我获取每个页面的标签 ID 和其他详细信息。

问题是我不知道每个页面 id 获取标签的请求是否已经结束。我必须手动设置这样的东西：

```
setTimeout(loadAllNow, 5000); 
```

假设所有页面的请求都是在我调用下一个函数之前等待的时间内完成的。

有什么方法可以让我知道循环是否结束，所有 API 调用都返回了我想要的结果。因为在 for 循环中调用 api 时，它只是将所有 API 调用几乎一起发送，而不是等待前一个调用结束。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:40:25.363

为此，您可以像这样手动检查-

```
pagesCount = NO_OF_PAGES;

FB.api('/'+id+'/tabs?fields=image_url,name,application', function(response) {

      count++;                // initialize this count to 0 before starting the loop
      if(count == pagesCount) // this is the final response
      {
          // Other stuff here 
      }
}); 
```

# python - 来自 MySQL 的 utf-8 文本未显示在 IPython Notebook 中

> ID：14601704
> 
> 赞同：3
> 
> 时间：2013-01-30T10:26:10.447
> 
> 标签：python, mysql, utf-8, ipython-notebook

我是编程新手，但我知道如何谷歌，所以在经过大量试验和错误之后，我敢于向你寻求帮助。

我有一个带有 utf-8 编码文本（瑞典语）的 MySQL 数据库（数据库名称：文本，表名：文本），我想使用 mysql-python（MySQLdb）将其提取到 IPython Notebook 中以进行进一步处理。

我已经阅读了关于 Unicode 和 UTF-8 的 python 文档（[http://docs.python.org/2/howto/unicode.html](http://docs.python.org/2/howto/unicode.html)），但我无法找到具体的代码示例，即使这必须是一个非常琐碎的问题。

我只希望瑞典语文本以特殊字符 åäö 等显示在 IPython Notebook 中。如您所见，我已经或多或少地放入了我在网上找到的关于 Unicode 和 UTF-8 的每个代码片段，但我不明白我在哪里做错了？

有人可以帮我吗？

```
# -*- coding: utf-8 -*-
import MySQLdb
db = MySQLdb.connect('localhost', 'user', 'password', 'text', charset='utf8', use_unicode=False)
db.set_character_set('utf8')
cursor = db.cursor()
cursor.execute('SET NAMES utf8')
cursor.execute('SET CHARACTER SET utf8')
cursor.execute('SELECT title, body FROM text LIMIT 5') 
result=cursor.fetchall()
 print result 
```

更新：这是我从 Print 语句中得到的：(('F\xc3\xb6rsta rubriken', 'H\xc3\xa4r \xc3\xa4r lite text p\xc3\xa5 svenska'), ('Andra rubriken' , 'Ytterligare 精简版文本 p\xc3\xa5 ett annat spr\xc3\xa5k'))

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:36:00.833

您正在打印游标调用的结果，它是一个元组；你正在看到它的 Python 表示。

如果您遍历它，您将看到预期的结果：

```
>>> for i in result:
...    print "{} {}".format(*i)
... 
Första rubriken Här är lite text på svenska
Andra rubriken Ytterligare lite text på ett annat språk 
```

如果您的输出与上述不匹配，这意味着您的终端不支持 UTF-8。

# php - 计算给定时间段内的空闲日期数量

> ID：14601711
> 
> 赞同：1
> 
> 时间：2013-01-30T10:26:28.930
> 
> 标签：php, mysql

我有一个有趣的给你。我有一个包含日期列 free_from 和 free_until 的数据库。我需要找到的是从现在到今天 1 个月之间免费的天数。例如，如果当前日期是 2013/01/15，并且列如下：

```
free_from | free_until
2013/01/12| 2013/01/17
2013/01/22| 2013/01/26
2013/01/29| 2013/02/04
2013/02/09| 2013/02/11
2013/02/14| 2013/02/17
2013/02/19| 2013/02/30 
```

答案是 16，因为 2 + 4 + 6 + 2 + 2 + 0 = 16

*   第一行仅从 15 号而不是 12 号开始计数，因为 15 号是当前日期。
*   最后一行被打折，因为没有一个日期在当前日期的一个月内。
*   必须将日期计算在内，因为`free_from`日期包括在内，日期不包括在内`free_until`。

我假设`DATEDIFF()`将在某个地方使用，但我不能，为了我的生活，解决这个问题。

谢谢你的时间！

编辑：这将进入 PHP mysql_query，因此可能会限制您对 MYSQL 可以做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:53:14.653

```
SET @today = "2013-01-15";
SET @nextm = DATE_ADD(@today, INTERVAL 1 month);
SET @lastd = DATE_ADD(@nextm, INTERVAL 1 day);

SELECT 
 DATEDIFF(
   IF(@lastd> free_until, free_until, @lastd), 
   IF(@today > free_from, @today, free_from)
 )
FROM `test` 
WHERE free_until >= @today AND free_from < @nextm 
```

那应该行得通。至少对于您的测试数据。但是 2013/02/30 是哪一天？:-)

不要忘记更改@today = CURDATE();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:53:00.613

我能想到的最好的是：

```
WHERE free_until > CURDATE()
AND free_from < CURDATE() + INTERVAL '1' MONTH 
```

这将消除任何不必要的行。然后在第一行用 PHP 做：

```
date_diff(date(), free_until) 
```

在最后一行，执行：

```
date_diff(free_from, strtotime(date("Y-m-d", strtotime($todayDate)) . "+1 month")) 
```

然后在中间日期做：

```
date_diff(free_from, free_until) 
```

大意是这样的，但这似乎非常笨拙和令人费解......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:41:53.833

从我的脑海中...首先做一个：

```
SELECT a.free_from AS a_from, a.free_until AS a_until, b.free_from AS b_from
FROM availability a
INNER JOIN availability b ON b.free_from > a.free_until
ORDER BY a_from, b_from 
```

这可能会返回一组行，对于每个行间隔，您有下一个，即更大的间隔。结果按战略顺序排列。然后，您可以通过以下方式将结果包装在部分组中：

```
SELECT * FROM (
SELECT a.free_from AS a_from, a.free_until AS a_until, b.free_from AS b_from
FROM availability a
INNER JOIN availability b ON b.free_from > a.free_until
ORDER BY a_from, b_from
) AS NextInterval
GROUP BY a_from, b_until 
```

在上面的查询中，添加一个 DATE_DIFF 子句（`SUM()`如有必要，将其包装起来）：

```
DATE_DIFF(b_until, a_from) 
```

# php - Facebook 如何通知并立即显示新评论，或者 Stackoverflow 是如何做到的？

> ID：14601714
> 
> 赞同：15
> 
> 时间：2013-01-30T10:26:53.140
> 
> 标签：php, database, node.js, sockets

我是一名 PHP 开发人员，标题基本上说明了一切。但是，我希望获得一些更深入的信息，因为我开始对我所从事的项目的流程应该如何进行感到困惑。

对于（网络）应用程序，我需要实现像 Facebook 这样的功能，它会通知用户有关回复/评论并立即显示这些内容。

我想我可以对 ajax 请求使用长轮询，但这似乎不是一个好的解决方案，因为通知从来都不是即时的，而且资源很重。

因此，如果我理解正确，我应该使用某种形式的套接字，Node.Js 将是一个不错的选择。因此，基于最后一个假设，我现在对工作流程感到困惑。

我想到了两种可能的解决方案：

1) 在我看来，如果我使用 Node.Js，我可以完全跳过使用 PHP，而仅将应用程序基于 Node.js。

2）或者我可以使用 PHP 作为基础，只使用 Node.js 来通知用户并立即显示消息，但使用 PHP 和 Mysql 保存数据。

这两种可能性让我感到困惑，我无法决定什么是“最好的”和最干净的方式。

我对 Node.js 没有太多经验，玩了一段时间。但是在 Node.js 中管理和保存数据似乎很困难，所以这就是我提出选项 2 的原因。

我知道 Facebook 是基于 PHP 构建的，所以我假设他们通过 PHP 保存数据并通过 Node.js 通知/立即显示回复和评论。

有人可以帮我解决这个问题吗？

提前致谢！

**编辑：** 我刚刚注意到，Stackoverflow 做了类似的事情。我在左上角收到一条通知，在我的问题下方有一个带有“此问题的新答案”的框。我对所使用的技术非常感兴趣。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-30T10:46:27.923

好吧，您可以将 node.js 用于通知，将 PHP 用于您的应用程序。通过谷歌搜索，我发现了关于[real-time-notifications 的](http://gonzalo123.com/2011/03/14/real-time-notifications-with-php/)内容。您也可以将[node.js 与 socket.io 一起](http://www.codesizzle.com/node-js-and-socket-io/)使用，但这意味着您必须学习新技术，因为您提到您没有使用 node 的经验。

我没有使用它，但你可以检查[这个项目](http://socketo.me/)，用于 PHP 中的 websockets。

当您有想要通知用户的更新时，您可以使用发布[订阅者模式](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)来通知对此更新感兴趣的人。也可以看看[Gearman](http://gearman.org/)。

就我个人而言，我使用了[redis 的 pubsub 机制](http://redis.io/topics/pubsub)，使用 node.js+socket.io 构建了一个通知系统。每当记录有更新时，就会在相应的频道上发布。如果频道有听众，那么他们会收到通知。我还将最后 20 条通知存储在 Redis 列表中。

> 该应用程序是用 PHP 构建的。通知系统内置在 node.js 中。它们是看到相同数据的不同应用程序。通信通过 redis 进行。例如在 Facebook 上下文中： 1) 用户更新他的状态。2) PHP 将此存储到数据库和 Redis 3) Redis 知道此更新必须发布到特定用户的状态通道，并且确实如此。4）特定用户的所有朋友都在监听他的状态频道（这里是node.js） 5）node.js用socket.io在浏览器中推送通知

至于 facebook，我读过一篇文章，它使用长轮询来支持旧版浏览器。不过不确定，需要引用...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:31:28.287

AFAIK 这将通过两种简单的方法：

1.  第一个可能非常简单的方法是向每条记录添加一个布尔列，以确定它是否已收到通知。

2.  第二种方法是创建一个表来插入所有通知。

但是，我不确定是否有更好的性能替代方法，但第一种方法是我自己通常做的。但我认为 Facebook 使用的是第二种方法，因为它必须将每个人通知给很多用户。

您的问题可能与以下问题重复：
[Facebook 之类的通知跟踪（DB 设计）](https://stackoverflow.com/questions/1887602/facebook-like-notifications-tracking-db-design)
[用于存储用户通知的数据库设计](https://stackoverflow.com/questions/2231886/database-design-to-store-notifications-to-users)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:56:08.250

您可以使用[服务器端事件](http://www.html5rocks.com/en/tutorials/eventsource/basics/)，它涉及一些 JavaScript，但我认为没有什么过于复杂。

The main bulk of this method is PHP though, so you would just use the PHP to query your DB for notifications and SSE will push them to the user.

It does have some limitations though, most notably it's not supported by IE (huge surprise) thought i'd mention it anyway to let you know of other possibilities.

Hope this helps

# python - 如何查询服务状态？

> ID：14601716
> 
> 赞同：0
> 
> 时间：2013-01-30T10:26:59.073
> 
> 标签：python, linux

我正在以 apache 用户身份通过​​浏览器执行 shell 命令。

是否可以不使用服务命令找出服务状态？

实际上，Apache 没有执行“service dovecot status”的权限。所以请让我知道查找鸽舍状态的其他方法。

# seo - 我网站的每个页面都在多个域名下被 Google 索引。如何用 .htaccess 解决这个问题？

> ID：14601719
> 
> 赞同：0
> 
> 时间：2013-01-30T10:27:05.947
> 
> 标签：seo

我网站的每个页面都在 Google 中被索引在多个带有冗余条目的域名下。我假设这是一个问题。我会使用 .htaccess 来解决这个问题吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:53:56.073

使用[规范 URL](http://googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html)指定每个页面的主 URL。

# actionscript-3 - Flex/air mobile - 显示来自 SD 卡的所有 mp3 歌曲以及 id3 信息和海报图像

> ID：14601720
> 
> 赞同：2
> 
> 时间：2013-01-30T10:27:11.557
> 
> 标签：actionscript-3, apache-flex, air, adobe, mp3

我正在尝试从 SD 卡中获取所有 mp3 歌曲。我只想显示 .mp3 文件，而不是任何文件夹/子文件夹。我需要 SD 卡中存在的每首 mp3 歌曲以及如何从加载的 mp3 歌曲中获取 ID3 信息。

非常感谢您的反馈……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T06:58:22.160

我正在寻找同样的问题！我认为这应该对你也有帮助：）

这是一个绝对的 AIR 解决方案，可以从 sdcard 的不同文件夹中获取任何文件格式。

试试这个： http: [//myappsnippet.com/file-browser-air-extension/](http://myappsnippet.com/file-browser-air-extension/)

# makefile - Makefile 作为 make 目标的依赖项

> ID：14601721
> 
> 赞同：1
> 
> 时间：2013-01-30T10:27:15.790
> 
> 标签：makefile

将 Makefile 作为 make 目标的依赖项是不是一个坏主意？

例如。

```
hello.o: hello.cxx Makefile
    $(CXX) -c  $(CFLAGS) $< -o $@ 
```

这样，只要修改了 Makefile，就会重新编译目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:07:32.910

不，这不是一个坏主意。传统上我们从不这样做，但如果你有 makefile 调用其他 makefile 那么包含它会是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T02:46:17.717

我相信您要做的就是在修改 Makefile 时运行干净（或其他等效目标）。

可以这样实现。（我一直在我的几个 C/C++ 项目中使用这个配方）。

```
CLEANUP_TRIGGER := .makefile
BASE_MAKEFILE := $(firstword $(MAKEFILE_LIST))
FINAL_TARGET := hello.o

all: $(CLEANUP_TRIGGER) $(FINAL_TARGET)

hello.o : hello.c
    $(CXX) -c $(CFLAGS) $< -o $@

$(CLEANUP_TRIGGER): $(BASE_MAKEFILE)
    if [ -f $(CLEANUP_TRIGGER) ]; then $(MAKE) clean; fi
    touch $@

clean:
    rm -rf *.o
    rm -f $(CLEANUP_TRIGGER)

.PHONY: all clean 
```

本质是确保 CLEANUP_TRIGGER 是通常被调用的规则的一部分，只要 Makefile 比 CLEANUP_TRIGGER 更新，就运行 make clean。

# php - codeigniter 库 ION AUTH 中的用户身份验证

> ID：14601728
> 
> 赞同：0
> 
> 时间：2013-01-30T10:27:33.997
> 
> 标签：php, codeigniter, ion-auth

我正在尝试使用 codeigniter 开发一个 Web 应用程序，其中将存储一些信息。要查看这些信息，用户必须创建一个帐户并登录。但注册后用户需要管理员批准。如果管理员批准用户注册请求，则用户可以登录并查看信息。否则，如果用户尝试登录，他/她将收到一条错误消息。

我已经使用 codeigniter 库“ION AUTH”成功开发了用户注册和登录系统，但问题是它需要管理员批准，我不知道如何使用“ION AUTH”库来做到这一点。请有人帮我做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T17:14:17.757

在`application/config/ion_auth.php`集合

```
$config['email_activation']           = FALSE;  // Email Activation for registration    
$config['manual_activation']          = TRUE;  // Manual Activation for registration 
```

这样用户在注册后就不会处于活动状态。`function activate()`现在管理员可以使用和`function deactivate()`在`auth`控制器中从后端手动启用帐户。此功能已在 中实现。`function index()`您还可以向管理员发送有关新用户注册的邮件。

# android - 如何获取视图的侦听器

> ID：14601729
> 
> 赞同：14
> 
> 时间：2013-01-30T10:27:37.693
> 
> 标签：android, listener

我编写与其他应用程序交互的服务。它在已经有监听器的视图（按钮、文本视图、...）上注册监听器。我需要用我自己的听众（作品）替换它们，做一些事情，然后注销我的听众并恢复旧的听众。

1.  一个带有 onClickListener 按钮的 App 正在运行
2.  我的服务在 UI-Thread 中注册了一个 onClickListener + 做一些事情
3.  我的服务恢复了旧的监听器

如果有 - 方法，那将很容易`view.getOnClickListener`。然后我可以保存旧的并在完成后替换新的听众。

有什么方法可以从视图中获取侦听器，或者将多个相同类型的侦听器绑定到一个视图？

```
Button btn = (Button) findViewById(R.id.btn1);
btn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            //do something
        }
    });
// I need to do, but found no solution for that.
View.OnClickListener oldListener = btn.getOnClickListener(); 
```

如果我将新侦听器注册到视图，旧的侦听器将被覆盖，对吗？如果两个侦听器（“新”和“旧”）同时存在也可以。只有旧的不能消失。

编辑：不幸的是，我无法将听众保存在分配中。我需要从视图组件中向后获取它。

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-31T10:21:40.633

感谢 mihail 的提示（感谢 :)））使用*隐藏的 API*，我找到了一个解决方案，可以在分配后让听众回来：

该类`android.view.View`有一个嵌套类`static class ListenerInfo`，它将所有侦听器存储在视图上（API 14+）。在旧版本中，侦听器是 `android.view.View`.

可以通过反射访问该字段。就我而言（API 14+），

```
// get the nested class `android.view.View$ListenerInfo`
Field listenerInfoField = null;
listenerInfoField = Class.forName("android.view.View").getDeclaredField("mListenerInfo");
if (listenerInfoField != null) {
    listenerInfoField.setAccessible(true);
}
Object myLiObject = null;
myLiObject = listenerInfoField.get(myViewObj);

// get the field mOnClickListener, that holds the listener and cast it to a listener
Field listenerField = null;
listenerField = Class.forName("android.view.View$ListenerInfo").getDeclaredField("mOnClickListener")
if (listenerField != null && myLiObject != null) {
    View.OnClickListener myListener = (View.OnClickListener) listenerField.get(myLiObject);
} 
```

在那段代码之后（我错过了很多 try-catch-blocks），myListener 对象保存了 onClickListener 的实例，该实例之前已匿名声明给视图。它也适用于任何其他侦听器，只需将“mOnClickListener 参数”替换为您在反射中需要的参数并正确投射即可。

请注意，即将发布的版本中的代码更改可能使其不再起作用。

在此处找到最终教程：[http ://andwise.net/?p=161](http://andwise.net/?p=161)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T10:50:07.433

创建实现的类`OnClickListener`

```
public static class MyClickListener1 implements OnClickListener{
    Activity mActivity;
    MyClickListener1(Acivity activity){
      mActivity=activity;
    }
    @Override
    public void onClick(View v) {
            //do something
    }
}

public static class MyClickListener2 implements OnClickListener{
    @Override
    public void onClick(View v) {
            //do something
    }
} 
```

在您的代码中，您可以轻松地使用它们：

```
btn.setOnClickListener(new MyClickListener1(this));
btn.setOnClickListener(new MyClickListener2()); 
```

或者您可以创建实例并重用它们：

```
OnClickListener listener1 = new MyClickListener1(this);
OnClickListener listener2 = new MyClickListener2();
btn.setOnClickListener(listener1);
btn.setOnClickListener(listener2); 
```

您还可以定义一个构造函数来传递这些类中所需的任何内容。我通常会像这样通过活动`MyClickListener1`

**编辑：**如果你想在按钮中有像对象一样的监听器，你可以使用标签。

```
btn.setTag(listener1);
btn.setOnClickListener(listener1); 
```

然后让它使用

```
OnClickListener old_listener = (OnClickListenr)btn.getTag(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:48:54.667

创建两个 OnCLickListener 实例并将第一个或第二个分配给按钮：

```
 Button b = (Button) findViewById(R.id.Button1);

    OnClickListener listener_new =  new OnClickListener() {
        @Override
        public void onClick(View v) {
            Log.d("APP", "NEW CLICK LISTENER ACTIVE");
        }
    };

    OnClickListener listener_old =  new OnClickListener() {
        @Override
        public void onClick(View v) {
            Log.d("APP", "OLD CLICK LISTENER ACTIVE");
        }
    };

    //setting listener
    b.setOnClickListener(listener_old);
    b.callOnClick();

            //changing listener
    b.setOnClickListener(listener_new);
    b.callOnClick();

            //return your old listener!
        b.setOnClickListener(listener_old);
        b.callOnClick(); 
```

添加：

OnClickListener 是 Button 类的受保护字段，继承自 View 类。字段名称“mOnClickListener”。即使通过反思，我也无法得到它。

```
void getListener(Button b) {
java.lang.reflect.Field field =  getClass().getSuperclass().getSuperclass().getDeclaredField("mOnClickListener");
} 
```

因此，如果您无权访问它创建的代码，则无法获取 Button 的现有侦听器。

但是，如果您可以访问 Activity 的对象（并且我们知道您有，因为将新的侦听器设置为按钮），您可以在该活动上添加您的按钮和您的侦听器。使现有按钮不可见。而不是在必要时回滚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-23T15:52:54.283

```
public abstract class ReflectionUtils {

    private static final String listenerInfoFieldName = "mListenerInfo";
    private static final String onCLickListenerFieldName = "mOnClickListener";

    public static OnClickListener getOnClickListener(View view){
        Object listenerInfo = ReflectionUtils.getValueFromObject(view, listenerInfoFieldName, Object.class);
        return ReflectionUtils.getValueFromObject(listenerInfo, onCLickListenerFieldName, View.OnClickListener.class);
    }

    public static <T> T getValueFromObject(Object object, String fieldName, Class<T> returnClazz){
        return getValueFromObject(object, object.getClass(), fieldName, returnClazz);
    }

    private static <T> T getValueFromObject(Object object, Class<?> declaredFieldClass, String fieldName, Class<T> returnClazz){
        try {
            Field field = declaredFieldClass.getDeclaredField(fieldName);
            field.setAccessible(true);
            Object value = field.get(object);
            return returnClazz.cast(value);
        } catch (NoSuchFieldException e) {
            Class<?> superClass = declaredFieldClass.getSuperclass();
            if(superClass != null){
                return getValueFromObject(object, superClass, fieldName, returnClazz);
            }
        } catch (IllegalAccessException e) {
        }
        return null;
    }

} 
```

调用将为您提供`OnClickListener onClickListener = ReflectionUtils.getOnClickListener(myView);`您正在寻找的听众。`myView``myView`

# android - 处理程序类如何在 Android 中工作

> ID：14601730
> 
> 赞同：29
> 
> 时间：2013-01-30T10:27:36.313
> 
> 标签：android, handler

我是 android 新手，正在阅读官方 android 网站上的演示应用程序。我遇到了一个`Handler`名为的类方法`postDelayed(Runnable r, long milliseconds)`。

谁能解释一下这种方法的作用？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-30T10:38:34.133

您可以查看[文档](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)。

但是要理解文档，首先要了解几个概念：[Message、Message Queue、Handler 和 Looper](https://stackoverflow.com/a/5193981/1365960)，以及它们之间的[关系](https://stackoverflow.com/questions/12877944/what-is-the-relationship-between-looper-handler-and-message-queue)。

下面说明 Looper 是如何工作的，它表明 Looper 是一个线程本地对象以及它与 MessageQueue 的关系：

```
class Looper{
    public static final void prepare() {
        if (sThreadLocal.get() != null) {
            throw new RuntimeException("Only one Looper may be created per thread");
        }
        sThreadLocal.set(new Looper());
    }

    public static final void loop() {
        Looper me = myLooper();
        MessageQueue queue = me.mQueue;
        while (true) {
            Message msg = queue.next(); // might block
            if (msg != null) {
                if (msg.target == null) {
                    // No target is a magic identifier for the quit message.
                    return;
                }
                msg.target.dispatchMessage(msg);
                msg.recycle();
            }
        }
    }
} 
```

几点说明：

Looper 是一个线程本地对象，因此每个线程都有一个 Looper。每个 Looper 都与一个消息队列相关联。looper 不断地从队列中获取messagese("tasks", "commands" 或任何你喜欢的名字)，并将消息分派到它的目标，它是一个处理该消息的处理程序(例如，通过回调包含在消息）。当队列中没有消息时，线程会阻塞，直到有新消息。要停止 Looper，您必须在其上调用 quit() （这可能不会立即停止循环，而是设置一个从循环中定期检查的私有标志，指示它停止）。

Android 框架提供了 Handler 类来简化事情。当您创建一个 Handler 实例时，它（默认情况下）绑定到已经附加到当前线程的 Looper。（处理程序知道要附加到哪个 Looper，因为我们之前调用了 prepare()，它将对 Looper 的引用存储在 ThreadLocal 中。）

使用处理程序，您只需调用 post() 即可“将消息放入线程的消息队列”（可以这么说）。Handler 将处理所有 IdleHandler 回调的东西，并确保您发布的 Runnable 被执行。（如果您延迟发布，它也可能会检查时间是否正确。）

下面的代码展示了我们使用它们的典型方式。

```
class LooperThread extends Thread {
  public Handler mHandler;

  public void run() {
      Looper.prepare();

      mHandler = new Handler() {
          public void handleMessage(Message msg) {
              // process incoming messages here
          }
      };

      Looper.loop();
  } 
```

}

Handler在Android服务中被广泛使用。Android 支持应用程序间通信。通常，当我们实现一个不需要处理多线程的服务时，我们会实现一个 Handler，它接收来自客户端的每个调用的回调。然后创建一个 Messenger 对象（对 Handler 的引用），它是一个 Binder 对象，并在客户端绑定此服务时将此对象返回给客户端。因此客户端可以使用这个 Messenger 将消息（进入线程本地队列，通过 Looper 发送到处理程序）发送到该服务，并在处理程序中处理它们。附上代码示例：

```
public class MessengerService extends Service {
    /** Command to the service to display a message */
    static final int MSG_SAY_HELLO = 1;

    /**
     * Handler of incoming messages from clients.
     */
    class IncomingHandler extends Handler {
        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {
                case MSG_SAY_HELLO:
                    Toast.makeText(getApplicationContext(), "hello!", Toast.LENGTH_SHORT).show();
                    break;
                default:
                    super.handleMessage(msg);
            }
        }
    }

    final Messenger mMessenger = new Messenger(new IncomingHandler());

    @Override
    public IBinder onBind(Intent intent) {
        Toast.makeText(getApplicationContext(), "binding", Toast.LENGTH_SHORT).show();
        return mMessenger.getBinder();
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-30T10:31:43.507

`postDelayed (Runnable r, long delayMillis)`

使`Runnable r`被添加到消息队列中，并在经过指定的时间后运行。将`runnable`在附加此处理程序的线程上运行。

*   **Runnable**表示可以执行的命令。

*   **delayMillis**表示应该执行的时间。

基本上，它会将命令（可能是某些代码）的执行延迟特定时间段（`delayMillis`），以便在指定时间后执行命令。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-06-26T02:47:21.390

```
public class ApiHandler {

  public static final String BASE_URL = "http://xxx.yyy/xx/";

  private static final long HTTP_TIMEOUT = TimeUnit.SECONDS.toMillis(120);
  private static Webservices apiService;

  public static Webservices getApiService() {

    if (apiService == null) {

        OkHttpClient okHttpClient = new OkHttpClient();
        okHttpClient.setConnectTimeout(HTTP_TIMEOUT, TimeUnit.MILLISECONDS);
        okHttpClient.setWriteTimeout(HTTP_TIMEOUT, TimeUnit.MILLISECONDS);
        okHttpClient.setReadTimeout(HTTP_TIMEOUT, TimeUnit.MILLISECONDS);

        RestAdapter restAdapter = new RestAdapter.Builder()
                .setLogLevel(RestAdapter.LogLevel.FULL)
                .setEndpoint(BASE_URL)
                .setClient(new OkClient(okHttpClient))
                .setConverter(new GsonConverter(new Gson()))
                .build();
        apiService = restAdapter.create(Webservices.class);

        /*RestAdapter.Builder builder = new RestAdapter.Builder();
        builder.setConverter(new StringConverter())
                .setEndpoint(BASE_URL)
                .setClient(new OkClient(new OkHttpClient()))
                .setLogLevel(RestAdapter.LogLevel.NONE);
        RestAdapter adapter = builder.build();

        apiService = adapter.create(Webservices.class);*/

        return apiService;
    } else {
        return apiService;
    }
  }
} 
```

# android - Android动画格式？方法？

> ID：14601738
> 
> 赞同：0
> 
> 时间：2013-01-30T10:28:08.250
> 
> 标签：android, animation

嗨，我正在为应用程序的设计师完成一些自定义图形。我想要一个动画启动画面。它可以用什么文件格式完成？我以前没有做过动画，最好的方法是什么？制作 gif 并使用网络视图？

一个动画可以是什么格式，设计师想知道给我什么。文件类型等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:41:32.303

查看[链接](http://www.codeproject.com/Articles/113831/An-Advanced-Splash-Screen-for-Android-App)以获取动画初始屏幕。本教程将提供创建动画闪屏的指南。

我希望它会帮助你。

**编辑：**

Android 支持的媒体格式[在这里](http://developer.android.com/guide/appendix/media-formats.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:46:48.397

你可以使用这个库

[http://developer.android.com/reference/android/view/animation/package-summary.html](http://developer.android.com/reference/android/view/animation/package-summary.html)

或者使用 imageview 以 gif 格式显示动画。

# jpa - 有没有办法只加载实体/实体的 ID 以避免 FetchGroup 策略？

> ID：14601739
> 
> 赞同：0
> 
> 时间：2013-01-30T10:28:09.927
> 
> 标签：jpa, eclipselink

在某些情况下，需要仅加载实体的 ID 或实体集合的 ID（例如，在关系中）。例如，我有一个实体**Parent**和其中的一组**孩子**

```
class Parent { 
    private List<Child> children; 
} 
```

所以，当我想加载**孩子**时，我只想在某些情况下加载 id，而不是孩子的整个状态。我进行了一项研究，并通过命名 FetchGroup 找到了一种方法，这意味着如果我想实现它，我必须为每个实体注释添加 @FetchGroup(name="id", attributes = {@FetchAttribute(name = "id") }）。当然，这适用于我只想将其应用于实体的情况。对于**儿童**情况，还应配置**LoadGroup**。

这里的问题是：当请求一个或多个实体时，是否有另一种专门用于加载唯一 ID 的策略？或者一种方式来表明这一点？在这里，我想避免使用 @FetchGroup 注释我想应用的所有实体，仅用于加载 ID。当然，创建像“SELECT ID FROM Parent WHERE ...”或“SELECT child.id FROM Parent INNER JOIN Parent.children WHERE ...”这样的查询也不是一个解决方案，因为应该始终定义所有关系和实体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:26:53.163

如果您只想要一个实体，您可以在 EntityManager 上使用 getReference()。

如果是查询或关系，那么在 EclipseLink 中获取组是您唯一的选择。

# c# - 当查询包含连接时，如何在 crm sdk 2011 linq 查询中使用谓词？

> ID：14601742
> 
> 赞同：2
> 
> 时间：2013-01-30T10:28:21.037
> 
> 标签：c#, linq, dynamics-crm-2011

`.Contains`阅读后，我发现在使用SDK Linq 提供程序查询 CRM 2011 时无法使用该方法。这是一个问题，因为我需要查询属于从我的应用程序传递的 Guid 集合的记录。经过更多调查后，我发现了 LinqKit 和 Predicate Builder；伟大的！在查询中使用单个实体集，谓词可以正常工作：

```
var visits = Context.Crm_scheduled_visitSet.AsExpandable().Where(predicate); 
```

我遇到的问题是，当我扩展查询以包含与另一个实体集的连接时，当我包含谓词时，我无法运行查询。这是我的查询，没有运行正常的谓词，但我需要在`Crm_scheduled_visitSet`Guid 的集合上过滤：

```
var scores = Context.Crm_scheduled_visitSet
    .Join(Context.crm_business_risk_scoreSet, v => v.Crm_scheduled_visitId.Value, s => s.crm_business_risk_score_id.Id, (v, s) => new
    {
        OrgID = v.Crm_client_id.Id,
        VisitStartdate = object.Equals(null, v.crm_actual_start_date) ? new DateTime() : v.crm_actual_start_date.Value,
        SectionId = s.crm_business_risk_section_id.Id,
        RisLevelId = s.crm_business_risk_level_id.Id,
        RiskRatingId = s.crm_business_risk_rating_id.Id
    }); 
```

我需要做的但这不运行：

```
var scores = base.Context.Crm_scheduled_visitSet.AsExpandable().Where(predicate)
    .Join(base.Context.crm_business_risk_scoreSet, v => v.Crm_scheduled_visitId.Value, s => s.crm_business_risk_score_id.Id, (v, s) => new
    {
        OrgID = v.Crm_client_id.Id,
        VisitStartdate = object.Equals(null, v.crm_actual_start_date) ? new DateTime() : v.crm_actual_start_date.Value,
        SectionId = s.crm_business_risk_section_id.Id,
        RisLevelId = s.crm_business_risk_level_id.Id,
        RiskRatingId = s.crm_business_risk_rating_id.Id
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:02:51.447

我无法让它工作，求助于使用查询表达式。我希望 CRM sdk Linq 提供程序在未来得到改进，更加符合 Linq to Entities 提供的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:06:34.017

好。您可以先单独进行访问，然后将其与另一个实体一起加入，但与另一个实体一起

编码方式如下。

```
var visits = Context.Crm_scheduled_visitSet.AsExpandable().Where(predicate);

var scores = from v in visits join r in Context.crm_business_risk_scoreSet
             on v.Crm_scheduled_visitId.Value equals r.crm_business_risk_score_id.Id
         select new {}; 
```

注意：确保在连接中使用单词“equal”而不是使用此运算符“=”。

试试看，等待您的反馈！

# javascript - 找不到未定义的函数 - CommonJS 模式

> ID：14601747
> 
> 赞同：0
> 
> 时间：2013-01-30T10:28:30.953
> 
> 标签：javascript, node.js, module

```
var revealed = function(){
   var a = [1,2,3];
   function abc(){
     return (a[0]*a[1])+a[2]);
   }

   return {
      name: 'revealed',
      abcfn: abc
   }

   module.exports = revealed;
}(); 
```

如何将 CommonJS 模式与 Revealing Module 模式结合使用？当我尝试做`module.exports = revealed;`并尝试将模块包含在某处以调用该函数时，它会抛出错误消息`function not found`。

```
var module = require('module');
module.abc(); 
```

无法调用未定义的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T11:10:50.560

您在分配给 module.exports 之前返回对象！

你想要的是这样的：

```
var revealed = function(){
   var a = [1,2,3];
   function abc(){
     return (a[0]*a[1])+a[2]);
   }

   return {
      name: 'revealed',
      abcfn: abc
   }
}();

module.exports = revealed; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T11:10:51.243

在您的模块功能内部，未定义显示。

您可能会这样做：

```
var revealed = function(){
   var a = [1,2,3];
   function abc(){
     return (a[0]*a[1])+a[2]);
   }

   return module.exports = {
      name: 'revealed',
      abcfn: abc
   }
}(); 
```

# sql - 在 SQL 中的 2 个日期之间拆分数据

> ID：14601750
> 
> 赞同：3
> 
> 时间：2013-01-30T10:28:30.313
> 
> 标签：sql, sql-server-2008

我的表中有两个名为 Start_date 和 End_date 的日期列。我需要首先找出这两个日期之间的周数并拆分数据。

--例如，如果数据如下所示，

```
ID  Start_date  End_date   No_Of_Weeks
1   25-Apr-11   8-May-11     2
2   23-Apr-11   27-May-11    6 
```

--我需要这样的结果：

```
ID  Start_date       End_date

1       25-Apr-2011     01-May-2011
1       02-May-2011     08-May-2011  

2       23-Apr-2011     24-Apr-2011
2       25-Apr-2011     01-Apr-2011
2       02-May-2011     08-May-2011
2       09-May-2011     15-May-2011
2       16-May-2011     22-May-2011
2       23-May-2011     27-May-2011 
```

请帮我查询。我的一周开始日期是星期一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:33:27.520

您可以使用定义周数的日历表并将其加入您的数据。

我为以下内容创建了一个[sql fiddle](http://sqlfiddle.com/#!3/dc8e1/6)：

```
CREATE TABLE Calendar_Weeks (
  week_start_date date,
  week_end_date date )

CREATE TABLE Sample_Data (
  id int,
  start_date date,
  end_date date )

INSERT Calendar_Weeks (week_start_date, week_end_date) VALUES ('2011-04-18','2011-04-24')
INSERT Calendar_Weeks (week_start_date, week_end_date) VALUES ('2011-04-25','2011-05-01')
INSERT Calendar_Weeks (week_start_date, week_end_date) VALUES ('2011-05-02','2011-05-08')
INSERT Calendar_Weeks (week_start_date, week_end_date) VALUES ('2011-05-09','2011-05-15')
INSERT Calendar_Weeks (week_start_date, week_end_date) VALUES ('2011-05-16','2011-05-22')
INSERT Calendar_Weeks (week_start_date, week_end_date) VALUES ('2011-05-23','2011-05-29')

INSERT Sample_Data (id, start_date, end_date) VALUES (1, '2011-04-25','2011-05-08')
INSERT Sample_Data (id, start_date, end_date) VALUES (2, '2011-04-23','2011-05-27')

SELECT id, week_start_date, week_end_date
FROM Sample_Data CROSS JOIN Calendar_Weeks
WHERE week_start_date BETWEEN start_date AND end_date
UNION
SELECT id, week_start_date, week_end_date
FROM Sample_Data CROSS JOIN Calendar_Weeks
WHERE week_end_date BETWEEN start_date AND end_date 
```

我不得不承认，在集合的开头或结尾包含行`UNION`的查询*感觉*有点骇人听闻，因此您可能更喜欢使用 Ravi Singh 的解决方案。

`INNER JOIN`如果你喜欢，你也可以使用：

```
SELECT id, week_start_date, week_end_date
FROM Sample_Data INNER JOIN Calendar_Weeks
ON week_start_date BETWEEN start_date AND end_date
UNION
SELECT id, week_start_date, week_end_date
FROM Sample_Data INNER JOIN Calendar_Weeks
ON week_end_date BETWEEN start_date AND end_date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:22:46.577

根据最后的理解，这将起作用：

```
with demo_cte as 
(select id,
 start_date,
 dateadd(day,6,DATEADD(wk, DATEDIFF(wk,0,start_date), 0)) end_date,
 end_date last_end_date,
 no_of_weeks no_of_weeks from demo

 union all

 select id,dateadd(day,1,end_date),
   dateadd(day,7,end_date),

 last_end_date
 ,no_of_weeks-1 from demo_cte

 where no_of_weeks-1>0)

 select id, start_date,
case
when end_date<=last_end_date then end_date
else
last_end_date
end
end_date
from demo_cte order by id,no_of_weeks desc 
```

[SQL小提琴](http://sqlfiddle.com/#!6/d2df4/17)

如果周数不可用，请使用：

```
with demo_cte as 
(select id,
 start_date,
 dateadd(day,6,DATEADD(wk, DATEDIFF(wk,0,start_date), 0)) end_date,
 end_date last_end_date
 --,no_of_weeks no_of_weeks
 from demo

 union all

 select id,dateadd(day,1,end_date),
   dateadd(day,7,end_date),

 last_end_date
 --,no_of_weeks-1 
 from demo_cte

 where --no_of_weeks-1>0
 dateadd(day,7,end_date)<=last_end_date 
)

 select id, start_date,
case
when end_date<=last_end_date then end_date
else
last_end_date
end
end_date
from demo_cte order by id,start_date
--,no_of_weeks desc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T18:00:50.863

设置环境测试

```
 declare @dt table (ID int,Start_date datetime,
                       End_date datetime,No_Of_Weeks int)

    insert into @dt (ID,Start_date,End_date,No_Of_Weeks)
    select 1,   '25-Apr-11',   '8-May-11',     2
    union all
    select 2,  '23-Apr-11' ,  '27-MAy-11' ,   6; 
```

尝试这个...

```
 with cte as (select d.ID
                       ,d.Start_date
                       ,(select MIN([end]) from (values(d.End_date),(DATEADD(day,-1,DATEADD(week,DATEDIFF(week,0,d.Start_date)+1,0))))V([end])) as End_date
                       ,d.End_date as end_of_period
                 from @dt d
                 union all select d.ID
                      ,DATEADD(day,1,d.End_date) as Start_date
                       , case when d.end_of_period < DATEADD(week,1,d.End_date) then d.end_of_period else DATEADD(week,1,d.End_date) end as End_date
                       ,d.end_of_period as end_of_period
                 from cte d
                 where end_of_period <> End_date
                )
    select ID
          ,cast(Start_date as DATE) Start_date
          ,cast(End_date as date) End_date 
    from cte
    order by cte.ID,cte.Start_date
    option(maxrecursion 0) 
```

结果集达到...

```
 ID  Start_date  End_date
    1   2011-04-25  2011-05-01
    1   2011-05-02  2011-05-08
    2   2011-04-23  2011-04-24
    2   2011-04-30  2011-05-01
    2   2011-05-07  2011-05-08
    2   2011-05-14  2011-05-15
    2   2011-05-21  2011-05-22
    2   2011-05-28  2011-05-27 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T11:37:42.607

试试这个查询，希望它能工作

**如果您的一周从星期日开始，请在下面使用**

```
set datefirst 7

declare @FromDate datetime = '20130110'
declare @ToDate datetime = '20130206'

select datepart(week, @ToDate) - datepart(week, @FromDate) + 1 
```

**如果您的一周从星期一开始，请在下面使用**

```
set datefirst 1

declare @FromDate datetime = '20100201'
declare @ToDate datetime = '20100228'

select datepart(week, @ToDate) - datepart(week, @FromDate) + 1 
```

**注意：两个查询都会产生不同的结果，因为它们的开始日期不同。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T17:19:29.340

享受！

```
WITH D AS (
SELECT id
     , start_date
     , end_date
     , start_date AS WEEK_START
     , start_date + 7 - DATEPART(weekday,start_date) + 1
       AS week_end
 FROM DATA
), W AS (
SELECT id
     , start_date
     , end_date
     , WEEK_START
     , WEEK_END
 FROM D
UNION ALL
SELECT id
     , start_date
     , end_date
     , WEEK_END + 1 AS WEEK_START
     , WEEK_END + 7 AS WEEK_END
 FROM W
WHERE WEEK_END < END_DATE
)
SELECT ID
     , WEEK_START AS START_DATE
     , WEEK_END AS END_DATE
 FROM W
 ORDER BY 1, 2; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-20T16:51:55.487

这是一个使用***datepart***函数来*说明您的**周从星期一开始***的事实的解决方案：

```
with demo_normalized as 
(
 select id,
  start_date,
  (datepart(dw,start_date) + 5) % 7 as test,
  dateadd(d,
       0 - ((datepart(dw,start_date) + 5) % 7),
       start_date
  ) as start_date_firstofweek,
  dateadd(d,
       6 - ((datepart(dw,start_date) + 5) % 7),
       start_date
  ) as start_date_lastofweek,
  end_date,
  dateadd(d,
       0 - ((datepart(dw,end_date) + 5) % 7),
       end_date
  ) as end_date_firstofweek,
  dateadd(d,
       6 - ((datepart(dw,end_date) + 5) % 7),
       end_date
  ) as end_date_lastofweek,
  datediff(week,
      dateadd(d,
          0 - ((datepart(dw,start_date) + 5) % 7),
          start_date
      ),
      dateadd(d,
          6 - ((datepart(dw,end_date) + 5) % 7),
          end_date
      )
  ) as no_of_weeks
 from demo
),
demo_cte as
(
  select
    id,
    dateadd(day,7,start_date_firstofweek) as start_date,
    dateadd(day,7,start_date_lastofweek) as end_date,
    end_date_firstofweek,
    no_of_weeks   
  from demo_normalized
  where no_of_weeks >= 3
  UNION ALL select
    id,
    dateadd(day,7,start_date) as start_date,
    dateadd(day,7,end_date) as end_date,
    end_date_firstofweek,
    no_of_weeks   
  from demo_cte
  where
    (dateadd(day,8,start_date) < end_date_firstofweek)
),
demo_union as
(
  select id, start_date, end_date, no_of_weeks from demo_normalized where no_of_weeks = 1
  union all
  select id, start_date, start_date_lastofweek as end_date, no_of_weeks
  from demo_normalized where no_of_weeks >= 2  
  union all
  select id, start_date, end_date, no_of_weeks from demo_cte
  union all
  select id, end_date_firstofweek as start_date, end_date, no_of_weeks
  from demo_normalized where no_of_weeks >= 2  
)
select
  d0.id,
 d0.no_of_weeks,
 convert(varchar, d0.start_date, 106) as start_date,
 convert(varchar, d0.end_date, 106) as end_date
from demo_union d0
order by d0.id, d0.start_date 
```

**编辑**（在这之间的几周内添加了 CTE）：这是[**sqlfiddle 的链接**](http://sqlfiddle.com/#!3/805c5/11)。

*注意*：此解决方案不需要额外的 DDL - 无需创建和维护额外的实体。简而言之，它不会重新发明日历。所有日历逻辑都包含在查询中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-23T07:07:56.013

您应该使用类似于 Jeff Moden 在[“数字”或“计数”表中建议的类型的日期计数表：它是什么以及它如何替换循环](http://www.sqlservercentral.com/articles/T-SQL/62867/)（需要登录）。

> Tally 表只不过是一个表，其中包含从 0 或 1 开始（我的从 1 开始）并上升到某个数字的非常好的索引序列号的单列。Tally 表中的最大数字不应该只是一些随意的选择。它应该基于您认为您将使用它的目的。我将 VARCHAR(8000) 与我的分开，所以它必须至少有 8000 个数字。由于我偶尔需要生成 30 年的日期，因此我将大部分生产 Tally 表保持在 11,000 或更多，即超过 365.25 天乘以 30 年。

我从 Tony 的 SQL Fiddler 开始，但实现了`DateInformation`一个更通用的表。这可能是您可以重复使用的东西。

```
--Build Test Data, For production set the date 
--range large enough to handle all cases.
CREATE TABLE DateInformation (
    [Date] date,
    WeekDayNumber int,
)

--From Tony
CREATE TABLE Sample_Data (
id int,
start_date date,
end_date date )

DECLARE @CurrentDate Date = '2010-12-27'

While @CurrentDate < '2014-12-31'
BEGIN
    INSERT DateInformation VALUES (@CurrentDate,DatePart(dw,@CurrentDate))
    SET @CurrentDate = DATEADD(DAY,1,@CurrentDate)
END

--From Tony
INSERT Sample_Data VALUES (1, '2011-04-25','2011-05-08')
INSERT Sample_Data VALUES (2, '2011-04-23','2011-05-27') 
```

这是使用 CTE 将示例数据连接到`DateInformation`表的解决方案。

```
--Solution using CTE
with Week (WeekStart,WeekEnd) as
(
  select d.Date 
        ,dateadd(day,6,d.date) as WeekEnd
  from DateInformation d
  where d.WeekDayNumber = 2
)

select 
  s.ID
  ,case when s.Start_date > w.WeekStart then s.Start_Date 
    else w.WeekStart end as Start_Date
  ,case when s.End_Date < w.WeekEnd then s.End_Date
    else w.WeekEnd end as End_Date
from Sample_Data s
join Week w on w.WeekStart > dateadd(day,-6,s.start_date)
            and w.WeekEnd <= dateadd(day,6,s.end_date); 
```

请参阅[SQL Fiddle 中的解决方案](http://sqlfiddle.com/#!3/f19db/1/0)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-24T08:57:45.047

```
set datefirst 1
GO

with cte as (
    select ID, Start_date, End_date, Start_date as Week_Start_Date, (case when datepart(weekday, Start_date) = 7 then Start_Date else cast(null as datetime) end) as Week_End_Date, datepart(weekday, Start_date) as start_weekday, cast(0 as int) as week_id
    from (
        values (1, cast('25-Apr-2011' as datetime), cast('8-May-2011' as datetime)),
                (2, cast('23-Apr-2011' as datetime), cast('27-May-2011' as datetime))
    ) t(ID, Start_date, End_date)

    union all

    select ID, Start_date, End_date, dateadd(day, 1, Week_Start_date) as Week_Start_Date, (case when start_weekday + 1 = 7 then dateadd(day, 1, Week_Start_date) else null end) as Week_End_date, (case when start_weekday = 7 then 1 else start_weekday + 1 end) as start_weekday, (case when start_weekday = 7 then week_id + 1 else week_id end) as week_id
    from cte
    where Week_Start_Date != End_date
)
select ID, min(Week_Start_Date), isnull(max(Week_End_Date), max(End_Date))
from cte
group by ID, Week_id
order by ID, 2
option (maxrecursion 0) 
```

如果您想获得周数，可以将 cte 之后的选择更改为：

```
select ID, Start_date, End_date, count(distinct week_id) as Number_Of_Weeks
from cte
group by ID, Start_date, End_date
option (maxrecursion 0) 
```

显然，要更改使用的数据，将更改正在使用 values() 的 cte 的锚点（第一部分）。

这使用星期一作为一周的第一天。给我们一个不同的日子，更改`set datefirst`顶部的声明 - -- [http://msdn.microsoft.com/en-gb/library/ms181598.aspx](http://msdn.microsoft.com/en-gb/library/ms181598.aspx)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-30T10:36:14.047

您应该考虑使用[DATEDIFF](http://msdn.microsoft.com/en-gb/library/ms189794.aspx)函数。

我不确定您在问题的第二部分中要求什么，但是一旦您了解了日期之间的差异，您可能想看看在 DATEDIFF 的结果上使用 CASE。

# java - 在mac中使用ProcessBuilder从java调用node.js脚本

> ID：14601751
> 
> 赞同：0
> 
> 时间：2013-01-30T10:28:31.920
> 
> 标签：java, macos, node.js, process, processbuilder

我对 mac 及其目录结构非常陌生。

我的桌面上有一个 node.js 脚本，它的路径是：`/Users/username/Desktop/webserver`

我想在 Mac OSX 中使用 ProcessBuilder 在 java 中运行这个脚本（连同一个参数）。

在使用运行时的 Windows 中，我会执行以下操作：

```
String [] env=null;
String[]callAndArgs= {"node","server.js",argument};

Process p = Runtime.getRuntime().exec(callAndArgs,env,
new java.io.File("Path to my server.js file"));

BufferedReader stdInput = new BufferedReader(new 
InputStreamReader(p.getInputStream()));//getting the input

BufferedReader stdError = new BufferedReader(new 
InputStreamReader(p.getErrorStream()));//getting the error

interface_name = stdInput.readLine();//reading the output 
```

如何在 mac 中完成相同的操作，当我输入`/Users/username/Desktop/webserver`node.js 脚本的 as 路径时，我收到一条错误消息

```
java.io.IOException: error=2, No such file or directory 
```

任何帮助将非常感激。

提前非常感谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-30T10:32:03.270

Java 是独立于平台的。因此，除非该`java`进程无权访问该文件，否则 Mac 路径应该可以正常工作。

确保权限正常。

# android - 如何从 Application 对象调用活动方法完成（）？

> ID：14601756
> 
> 赞同：3
> 
> 时间：2013-01-30T10:28:57.767
> 
> 标签：android, android-context, activity-finish

我有一段代码可以删除数据库中的项目。我从两个不同的活动中调用相同的代码。所以为了避免代码重复，我想将代码转移到 Application 对象。其中一项活动中的代码如下所示：

```
private void deleteItem() {
    AlertDialog.Builder alert = new AlertDialog.Builder(Activity1.this);
    alert.setTitle(R.string.confirmTitle);
    alert.setMessage(R.string.confirmMessage);
    alert.setPositiveButton(R.string.delete_btn,
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int button) {
                    final DbHelper db = new DbHelper(Activity1.this);
                    AsyncTask<Long, Void, Object> deleteTask = new AsyncTask<Long, Void, Object>() {
                        @Override
                        protected Object doInBackground(Long... params) {
                            db.deleteItem(params[0]);
                            return null;
                        }

                        @Override
                        protected void onPostExecute(Object result) {
                            finish();
                        }
                    };
                    deleteTask.execute(new Long[] { rowID });
                }
            });
    alert.setNegativeButton(R.string.cancel_btn, null).show();
} 
```

现在把它放在应用程序对象中，我将函数更改为 public，给它两个输入参数：Context 和 rowID。但是在 AsyncTask 的 onPostExecute 方法中，我必须关闭活动。在活动中，我通过finish() 做到了这一点。在这种情况下我该怎么做？我还在应用程序对象中附加了代码。

```
public void deleteItem(final Context context, final long rowID) {
    AlertDialog.Builder alert = new AlertDialog.Builder(context);
    alert.setTitle(R.string.confirmTitle);
    alert.setMessage(R.string.confirmMessage);
    alert.setPositiveButton(R.string.delete_btn,
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int button) {
                    final DbHelper db = new DbHelper(context);
                    AsyncTask<Long, Void, Object> deleteTask = new AsyncTask<Long, Void, Object>() {
                        @Override
                        protected Object doInBackground(Long... params) {
                            db.deleteItem(params[0]);
                            return null;
                        }

                        @Override
                        protected void onPostExecute(Object result) {
                            finish();
                            }
                    };
                    deleteTask.execute(new Long[] { rowID });
                }
            });
    alert.setNegativeButton(R.string.cancel_btn, null).show();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T10:33:01.417

与其将其转移到应用程序，不如创建一个 BaseActivity（扩展 Activity 类）类，您的所有活动都扩展 BaseActivity .. 并且公共代码将放在 BaseActivity 中

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T10:31:49.170

`Context`可以转换为`Activity`：

```
Activity activity = (Activity) context; 
```

而不仅仅是使用：

```
activity.finish(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T10:35:08.743

我认为您尝试做的事情从根本上说不是一个好主意。

在 Activity 代码之外，不能保证 Activity 仍然存在 - 内存管理器可能已经清理它，用户可能已经按下 Back 等。

最终的设计决定取决于您，但我建议您考虑是否真的有必要。

如果可以提高程序的稳定性和可靠性，我认为稍微冗余是可以的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T10:32:19.713

它很简单，也添加活动实例

```
public void deleteItem(final Context context, Activity activity,final long rowID){
activity.finish();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T10:33:23.250

不可能`Application.finish()`像在 C# 中那样调用。你可以使用这样的方法： `Activityname.finish();`

这是一个很好的解决方案。我希望我有所帮助。

# css - CSS/XHTML：在特定的表格行数之后显示 div

> ID：14601757
> 
> 赞同：1
> 
> 时间：2013-01-30T10:29:01.277
> 
> 标签：css, xhtml, princexml, oxygenxml

这是我得到的：

*   使用 Oxygen XML 从 XML 和 XSL 文件转换的 XHTML 文件
*   正文开头的 10 个 div，用 CSS 隐藏
*   之后：一张有 100 个 trs 的桌子

看起来像这样：

```
<div id="div1" style="display:none;">content1</div>
<div id="div2" style="display:none;">content2</div>

<table id="table1">
 <tr><td>conent3</td></tr>
 <tr><td>conent4</td></tr>
 <tr><td>conent5</td></tr>
</table> 
```

现在我正在做两个项目。
1) CSS 屏幕。这很好。单击表格内的链接时，div 会显示在一个精美的框中。
2) CSS 打印。这就是我在这里问的原因。使用 Prince XML 将 XHTML 转换为 PDF - 好的。在印刷版中，隐藏的 div 应显示在特定位置，例如：

```
1\. TABLE ROW
2\. TABLE ROW
3\. TABLE ROW
1\. DIV
4\. TABLE ROW
5\. TABLE ROW
2\. DIV 
```

我的梦想是在文档（XHTML 或 CSS）的任何位置，确定一个 div 应该显示多少个 trs 后的位置。

也许您已经知道如何解决。谢谢你。贝尔利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:57:01.610

最简单的解决方案是将表格拆分为多个表格并将 div 放在它们之间，或者将每个 div 包含在表格内您希望它出现的单独行中。

如果您不想更改文档标记，则始终可以在生成 PDF 时使用 JavaScript 动态执行此操作，只需记住使用 --javascript 选项运行 Prince 以启用脚本执行，或应用外部脚本文件--脚本=文件.js。

# javascript - 面向对象的 Javascript 概念

> ID：14601758
> 
> 赞同：0
> 
> 时间：2013-01-30T10:29:03.167
> 
> 标签：javascript, oop

我最近开始尝试在使用它时使用更多的 javascript 和稍微更面向对象的编程风格。我正在努力掌握一些可能非常基本的概念，所以我想知道是否有人可以帮助我。

下面是我从 Stack Overflow 中提取的一段代码，我将其用作示例：

```
var Person = (function () {
             // private static
             var nextId = 1;

                // constructor
                var cls = function () {
                    // private
                    var id = nextId++;
                    var name = 'Unknown';

                    // public (this instance only)
                    this.get_id = function () { return id; };

                    this.get_name = function () { return name; };
                    this.set_name = function (value) {
                            if (typeof value != 'string')
                                    throw 'Name must be a string';
                            if (value.length < 2 || value.length > 20)
                                    throw 'Name must be 2-20 characters long.';
                            name = value;
                    };
                };

                // public static
                cls.get_nextId = function () {
                    return nextId;
                };

                // public (shared across instances)
                cls.prototype = {
                                announce: function () {
                                    alert('My id is ' + this.get_id() + ' and my name is "' + this.get_name() + '"\r\n' +
                                    'The next id will be ' + Person.get_nextId());
                                }
                };

                return cls;
        })(); 
```

我有几个问题都与这段代码有关：

1) 双组圆括号表示什么 var Person =(function(){...})();

2）变量 nextId 是静态的，并且每次创建 Person 对象时都不会重新创建？javascript中是否有某种对象缓存（如加载的类）？

3) 如果我使用 new Person() 创建 Person 对象，它实际上是一个 cls 对象吗，因为那是函数返回的内容？

4）如果我以这种方式创建对象，那么将方法附加到原型是否有任何意义，因为我可以在 cls 对象中声明announce函数，并且所有实例都会有它，不是吗？

5) 在 cls 函数内部，“this”实际上指的是什么？它是在“return cls;”行从该函数本身返回的新创建的对象吗？

这些问题很基础，但是 javascript 中的 OO 真的让我很困惑！我通常以面向对象的风格进行编程，但在 java 中它似乎更有意义......

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:41:10.463

> 1) 双组圆括号表示什么 var Person =(function(){...})();

这是一个在前面执行的函数。它使函数内部的局部变量不会在全局范围内声明。

例子：

```
tmp = function() { CODE };
tmp() 
```

...与...基本相同

```
(function() { CODE })(); 
```

您只需要在函数周围添加额外`()`内容，否则会出现语法错误。

> 2）为什么变量 nextId 是静态的并且每次创建 Person 对象时都不会重新创建？javascript中是否有某种对象缓存（如加载的类）？

由于 nextId 是在函数范围内创建的（参见 1），因此在从代码访问时它始终是同一个变量。

> 3) 如果我使用 new Person() 创建 Person 对象，它实际上是一个 cls 对象吗，因为那是函数返回的内容？

该函数（参见 1）返回`cls`在内部创建的。所以是的，`Person`并且`cls`实际上是同一件事。

> 4）如果我以这种方式创建对象，那么将方法附加到原型是否有任何意义，因为我可以在 cls 对象中声明announce函数，并且所有实例都会有它，不是吗？

不同之处在于原型在所有实例之间*共享*，而在构造函数中添加它们基本上是一个*副本*。使用原型更快，内存效率也更高。

> 5) 在 cls 函数内部，“this”实际上指的是什么？它是在“return cls;”行从该函数本身返回的新创建的对象吗？

不。当你打电话时，`new Person()`你实际上是在打电话`new cls()`。New 创建一个新对象并调用`this`设置为该对象的函数。因此，函数`this`内部`cls`是您正在创建的实际对象实例。

* * *

顺便一提。如果您真的想使用 JavaScript 进行一些 OOP 编程，我建议您使用来自 JohnResig 的优秀代码片段：http: [//ejohn.org/blog/simple-javascript-inheritance/](http://ejohn.org/blog/simple-javascript-inheritance/)

# c# - 将颜色转换为字节值

> ID：14601759
> 
> 赞同：1
> 
> 时间：2013-01-30T10:29:11.717
> 
> 标签：c#, image, hex

在 C# 中，如何将`Color`对象转换为`byte`值？

例如，颜色`#FFF`将转换为值`255`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T10:44:01.487

`Color`您可以通过以下方式获取 .NET对象的字节值：

```
byte red = color.R;
byte green = color.G;
byte blue = color.B; 
```

这给了你 3 个字节。我不知道您希望如何获得单字节值。颜色（AFAIK）几乎从不由单个字节表示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T10:31:15.207

您可以使用以下[`ColorTranslator.FromHtml`](http://msdn.microsoft.com/en-us/library/system.drawing.colortranslator.fromhtml.aspx)功能：

```
Color color = ColorTranslator.FromHtml("#FFF"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T10:32:47.773

您可以使用类中的[`ConvertFromString()`](http://msdn.microsoft.com/en-us/library/system.windows.media.colorconverter.convertfromstring.aspx)方法[`ColorConverter`](http://msdn.microsoft.com/en-us/library/ms653060.aspx)。

> 尝试将字符串转换为颜色。

```
Return Value
Type: System.Object
A Color that represents the converted text. 
```

* * *

```
ColorConverter c = new ColorConverter();
Color color = (Color)c.ConvertFromString("#FFF");
Console.WriteLine(color.Name); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T10:33:50.187

试试这个，

```
string colorcode = "#FFFFFF00";
int argb = Int32.Parse(colorcode.Replace("#", ""), NumberStyles.HexNumber);
Color clr = Color.FromArgb(argb); 
```

另请参阅[如何使用 .NET 从十六进制颜色代码中获取颜色？](https://stackoverflow.com/questions/2109756/how-to-get-color-from-hex-color-code-using-net)

# jquery - ajax 成功时的 jQuery .on()

> ID：14601761
> 
> 赞同：7
> 
> 时间：2013-01-30T10:29:20.930
> 
> 标签：jquery, ajax, events

我想绑定`.on()`到一个 ajax“事件”，这意味着我希望在成功检索到 ajax 响应时触发它。我不明白我怎么能绑定`.on()`到这样的事件。我需要这样使用`load`吗？

```
$(document).on('load','#elementInsertedByAjax',function(){
    // will do something
}); 
```

PS 我确实需要使用`.on()`，因为整个页面是通过 ajax 调用插入的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-30T10:33:54.227

您可以使用[`.ajaxSuccess()`](http://api.jquery.com/ajaxSuccess/)

```
$(document).ajaxSuccess(function() {
// will do something
}); 
```

或绑定到

```
$(document).on('ajaxSuccess','#elementInsertedByAjax',function(){
    // will do something
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:32:10.123

您可以使用 ajax 全局事件[jQuery.ajaxSuccess](http://api.jquery.com/ajaxSuccess/)

```
$(document).ajaxSuccess(function() {
    $( ".log" ).text( "Triggered ajaxSuccess handler." );
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:34:06.780

```
$,ajax({
  url:'yoururl',
  type : 'GET', /*or POST*/
  data: {'d1',data1}, /*if any*/
  success:function(returndatafromserver){
         //here you can check the success of ajax
  },error:function(errormsg){

   //error if any

  }

}); 
```

# xmpp - 如何阻止谷歌随机化 xmpp 资源

> ID：14601763
> 
> 赞同：5
> 
> 时间：2013-01-30T10:29:28.483
> 
> 标签：xmpp, google-talk

在 XMPP（即 gtalk）中，我们可以将资源设置为我们想要的（指定机器/位置/等），这适用于所有/大多数服务器和客户端。但在谷歌的情况下，它并不能完全按预期工作，因为每次用户连接谷歌都会将随机字符串附加到用户设置的资源中。这尤其令人讨厌，因为许多客户端通过 jid 和资源部分来区分用户聊天，这会导致在重新连接（并生成新资源）后打开多个窗口/选项卡。

tl;博士 - 有没有办法阻止谷歌将随机字符串附加到用户设置的资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:55:31.683

除了@Alex 的正确答案，不要在语义上使用资源。对于聊天，客户真的不应该再将每个资源视为单独的对话。我们在十多年前就吸取了这一教训。要识别客户端，请使用[XEP-0115](http://xmpp.org/extensions/xep-0115.html)而不是硬编码资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:48:03.640

简短的回答，没有办法。出于安全原因，资源应该是不可预测的。GTalk 服务器通过向您的资源添加随机字符串来强制执行此操作。

# testing - 仅 TFS 2012 备份和还原 BuildDefinitions

> ID：14601766
> 
> 赞同：1
> 
> 时间：2013-01-30T10:29:28.753
> 
> 标签：testing, backup, restore

我安装了一个 TFS2012 作为测试系统，并在我们投入生产之前进行了一些测试。这包括定义许多 BuildDefinitions，这是很多工作。

测试成功后，将安装一个带有 TFS2012 的新服务器。

对于这个新服务器 - 然后作为生产系统运行 - 我想从测试系统恢复 BuildDefinitions。但只有 BuildDefinitions，而不是整个 TeamCollections。因为我运行了测试签入，我不想在我的生产服务器上运行这些。

现在，是否可以仅备份和恢复 BuildDefinitions？

也许可以直接通过 Sql 数据库？但我有点害怕那里的引用，指向其他一些表。

最好的问候，彼得布赫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-13T10:11:11.563

最后我决定不碰数据库，因为有很多其他表的引用。

我使用了 TFS API v11 (TFS2012) 和一点 C# 代码，我从这个基础上满足了我的需求：[如何复制 TFS 2010 构建定义？](https://stackoverflow.com/questions/2909416/how-can-i-copy-a-tfs-2010-build-definition)

它将所有构建定义从一个 TFS2012 服务器复制到另一个。对于这两个服务器，都需要指定一个 TeamCollection 和一个 TeamProject。

因此，必须按 TeamProject 完成复制任务。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Microsoft.TeamFoundation.Build.Client;
using Microsoft.TeamFoundation.Client;
using Microsoft.TeamFoundation.VersionControl.Client;

namespace TFSBuildDefinitionCreator
{

internal class Program
{
    private static void Main(string[] args)
    {
        // Copies build definitions from one server to another.
        // Uses the TeamFoundation API V11 (TFS2012).
        // Code was used to copy b uild definitions from a test server to a productive.

        string sourceServer = "http://testTfs:8080/tfs/MyTeamCollection";
        string sourceTeamProject = "MyTeamProject";

        string targetServer = "https://productiveTfs:8080/tfs/MyTeamCollection";
        string targetTeamProject = "MyTeamProject";

        // DropLocation for defininitions: Share on which the build should be dropped.
        string defaultDropLocation = "\\\\MyBuildserver\\Builds$";

        // Change the DefaultProcessTemplate in the following method below:         GetDefaultProcessTemplateByServerPathFromBuildServer.

        CopyBuildDefinitions(sourceServer, sourceTeamProject, targetServer, targetTeamProject, defaultDropLocation);

        Console.Read();
    }

    private static IBuildServer GetBuildServerFromServerUrl(string serverUrl)
    {
        var tfs = TeamFoundationServerFactory.GetServer(serverUrl);
        return (IBuildServer)tfs.GetService(typeof(IBuildServer));
    }

    private static IBuildController GetDefaultBuildControllerFromBuildServer(IBuildServer buildServer)
    {
        return buildServer.QueryBuildControllers()[0];
    }

    private static IProcessTemplate GetDefaultProcessTemplateByServerPathFromBuildServer(IBuildServer buildServer, string teamProject)
    {
        var processTemplates = buildServer.QueryProcessTemplates(teamProject);
        var result = processTemplates.First(t => t.ServerPath.Contains("/BuildProcessTemplates/MyDefaultTemplate.xaml"));

        return result;
    }

    private static void CopyBuildDefinitions(string sourceServer, string sourceTeamProject, string targetServer,
                                             string targetTeamProject, string defaultDropLocation)
    {
        var sourceBuildServer = GetBuildServerFromServerUrl(sourceServer);
        var sourceBuildDetails = sourceBuildServer.QueryBuildDefinitions(sourceTeamProject);

        foreach (var sourceBuildDetail in sourceBuildDetails)
        {
            CopyBuildDefinition(sourceBuildDetail, targetServer, targetTeamProject, defaultDropLocation);
        }
    }

    private static void CopyBuildDefinition(IBuildDefinition buildDefinition, string targetServer, string targetTeamProject, string defaultDropLocation)
    {
        var targetBuildServer = GetBuildServerFromServerUrl(targetServer);

        var buildDefinitionClone = targetBuildServer.CreateBuildDefinition(targetTeamProject);

        buildDefinitionClone.BuildController = GetDefaultBuildControllerFromBuildServer(targetBuildServer);
        buildDefinitionClone.ContinuousIntegrationType = buildDefinition.ContinuousIntegrationType;
        buildDefinitionClone.ContinuousIntegrationQuietPeriod = buildDefinition.ContinuousIntegrationQuietPeriod;

        // Noch ändern.
        //buildDefinitionClone.DefaultDropLocation = buildDefinition.DefaultDropLocation;
        buildDefinitionClone.DefaultDropLocation = defaultDropLocation;

        buildDefinitionClone.Description = buildDefinition.Description;
        buildDefinitionClone.Enabled = buildDefinition.Enabled;

        //buildDefinitionClone.Name = String.Format("Copy of {0}", buildDefinition.Name);
        buildDefinitionClone.Name = buildDefinition.Name;

        //buildDefinitionClone.Process = buildDefinition.Process;
        buildDefinitionClone.Process = GetDefaultProcessTemplateByServerPathFromBuildServer(targetBuildServer, targetTeamProject);

        buildDefinitionClone.ProcessParameters = buildDefinition.ProcessParameters;

        foreach (var schedule in buildDefinition.Schedules)
        {
            var newSchedule = buildDefinitionClone.AddSchedule();
            newSchedule.DaysToBuild = schedule.DaysToBuild;
            newSchedule.StartTime = schedule.StartTime;
            newSchedule.TimeZone = schedule.TimeZone;
        }

        foreach (var mapping in buildDefinition.Workspace.Mappings)
        {
            buildDefinitionClone.Workspace.AddMapping(
                mapping.ServerItem, mapping.LocalItem, mapping.MappingType, mapping.Depth);
        }

        buildDefinitionClone.RetentionPolicyList.Clear();

        foreach (var policy in buildDefinition.RetentionPolicyList)
        {
            buildDefinitionClone.AddRetentionPolicy(
                policy.BuildReason, policy.BuildStatus, policy.NumberToKeep, policy.DeleteOptions);
        }

        buildDefinitionClone.Save();
    }
} 
```

}

希望对其他人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T04:26:00.233

构建定义不受源代码控制。唯一的选择是依赖 TFS 数据库备份，在该备份中可以恢复或查看**Tfs_DefaultCollection数据库中的****tbl_BuildDefinition***表。

 **此功能有用户声音，您也可以使用 TFS API 来完成。

**添加对 uservoice 的投票：**

[提供一种版本控制构建定义的方法](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2037625-Provide-a-way-to-version-control-build-definitions)

**使用 TFS API**

[如何复制 TFS 2010 构建定义？](https://stackoverflow.com/questions/2909416/how-can-i-copy-a-tfs-2010-build-definition)**

# php - Symfony2 控制器、视图和 JavaScript

> ID：14601767
> 
> 赞同：0
> 
> 时间：2013-01-30T10:29:32.180
> 
> 标签：php, javascript, symfony, controller, twig

我在 Symfony2 下做一个项目。我在同一个控制器（历史，日历）中有两个动作和两个视图。

我的历史操作调用日历操作，默认值为本周。然后它渲染历史视图，它自己渲染日历视图。

第一个问题，它的工作，但在日历 HTML 视图之前，symfony 已经添加了一句话：`HTTP/1.0 200 OK Cache-Control: no-cache Date: Wed, 30 Jan 2013 10:17:13 GMT`我怎样才能删除这句话？

我这样做是因为我得到了一些 JavaScript 链接，它们通过调用日历控制器（与上一周或下周不同）使日历在上周或下周运行，并在他的 div 中打印新日历。这有点工作，但我有一些奇怪的行为。我已将 JavaScript 代码放在日历视图中。我第一次加载页面 JavaScript 显示在代码源中，然后工作。如果我按下上一周或下一周按钮，日历控制器会返回新的日历视图，但没有 javascript。我在萤火虫中再也看不到JS了。但是（这是最奇怪的部分），JavaScript 仍然有效（如果我按下按钮它会重新加载日历 div）。

这是我的一些代码：

日历.html.twig：

```
<script type="text/javascript">
$('.nextWeek').live('click', function () {
    $.ajax({
        url: 'prof_calendrier/{{ nextWeek }}',
        success: function (html) {$('.calendrier').html(html);}
    });
});
$('.lastWeek').live('click',function () {
    $.ajax({
        url: 'prof_calendrier/{{ lastWeek }}',
        success: function (html) {$('.calendrier').html(html);}
    });
});
</script>
<p>Week from {{datesWeek.0}} to {{datesWeek.6}}</p>
[...] display rest of informations 
```

prof_calendrierAction（日历动作）：

```
public function prof_calendrierAction ($date) {
        $erreur='';
        $message='';
        $session = $this->container->get('session');

        [...] // lot of operations

    return $this->render('CDUserBundle:Default:prof_calendrier.html.twig', array(
        'next_cours' => $liste_prochains_cours,
        'today' => date('D'),
        'nextWeek' => $nextWeek,
        'lastWeek' => $lastWeek,
        'datesWeek' => $datesWeek
    ));
} 
```

有人能帮助我吗 ？*

编辑：为避免 HTTP 消息，我的历史操作不再调用日历操作。我渲染了历史，并且在历史视图中，我得到了 ajax init，它将检查今天星期的日历动作。但是当我用上周或下周按钮刷新 JavaScript 时，html 会发生变化，但 JavaScript 不会更新。JavaScript 是写在日历视图中的，所以为什么日历动作不会比第一次返回更多的 JS。

编辑²：我做了几个测试。我的上/下周按钮的 JavaScript 在日历视图中。就像在这个视图中编写的所有 JS 行都被捕获并缓存了一段时间。我的意思是我下周第一次按，它显示下周没问题。第二次，萤火虫向我展示了两个 ajax 请求，一个针对同一周，一个针对之后的一个。就像第一行 JavaScript 行被保留和缓存，然后在下周的第二次按下时，它调用旧的，然后是新的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:39:36.793

您可以使用 Symfony 的响应组件从您的控制器发送特定的响应。添加

```
use Symfony\Component\HttpFoundation\Response; 
```

然后构建您的“html”变量响应并像这样发送它：

```
return new Response($return,200,array('Content-Type'=>'application/json')); 
```

这里，$return 是一个 json 实体。200 是响应的状态码，'Content-Type'=>'application/json' 必须匹配 $return 的类型。

这就是我使用[Symfony2 日历的](http://www.symfocal.com)方式，它运行良好。

编辑 JS：您不能使用 twig 通过 ajax 更改您的 javascript。您应该在您的 javascript 中定义全局变量，并按照您需要的任何参数进行操作。当您处理 ajax 响应时，这些全局变量可以在您的 javascript 中访问。例如，您可以在 twig 中执行以下操作：

```
<script>
var globalMonth = {{ month }}; // set up the starting month
... 
```

然后当 ajax 发送响应时，您更新 globalMonth 并将其用于下一个 ajax 调用。

阿尔班

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:10:59.163

我想我知道你的 JS 发生了什么。当您有 ajax 响应时，您可能会将新操作绑定到 nextWeek 链接上的 click 事件。但在添加该动作之前，你必须做

```
$('#nextWeek').unbind(); 
```

为了摆脱以前的绑定事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:19:24.943

而不是`$this->render()`，调用`$this->renderView()`你的第二个控制器。

为了更好地使用 Symfony，请使用控制器中的[路径](http://symfony.com/doc/2.0/book/templating.html#linking-to-pages)或 url 函数来生成 url。

# c# - 正则表达式在 C# 中返回浮点列表

> ID：14601770
> 
> 赞同：-3
> 
> 时间：2013-01-30T10:29:45.013
> 
> 标签：c#, .net, regex, .net-4.5

我对正则表达式真的很陌生。你能告诉我在以下字符串中查找亚马逊费用的正则表达式是什么。所以它给了我浮动列表。

```
 private static List<float> GetAmazonFees(string text)
 {
      //Regular expression to fine list of fees
 } 
```

.

```
Order ID: 102-8960168-7248227

Please ship this order using Standard shipping.

Ship by: 12/19/2012
Item: Ridata 8GB Class 10 SDHC Card - Secure Digital High Capacity -
Lightening Series - RDSDHC8G-LIG10
Condition: New
Condition note: This item is sealed and brand new! SHIPS IN ONE BUSINESS DAY
Listing ID: 1213M39KPDB
SKU: 7S-5JMI-HO98
Quantity: 1
Order date: 12/17/2012
Price: $8.60
Amazon fees: -$1.14
Shipping: $4.49
Your earnings: $11.95Ship by: 12/19/2012Item: RiDATA Lightning Series 16GB Secure Digital High-Capacity (SDHC)Condition: NewCondition note: This item is sealed and brand new! SHIPS IN ONE BUSINESS DAYListing ID: 1204MRSEY95SKU: HJ-EYF8-EZVRQuantity: 1Order date: 12/17/2012Price: $15.97Amazon fees: -$1.78Shipping: $4.99Your earnings: $19.18- - - - - - - - - - - - - - - - - - -NEXT STEPS FOR THIS ORDER:1) Print the packing slip:Log into your seller account and go to the Order Details page for thisorder: https://www.amazon.com/manageorderdetails?orderID=102-8960168-7248227.Click "Print order packing slip" next to the order number at the top of thepage.2) Buy shipping (optional):You may ship the item using any carrier and method you prefer. Want toavoid a trip to the post office? Click "Buy shipping" at the bottom of theOrder Detail page to purchase and print shipping labels from your home oroffice. Delivery confirmation is also available. To learn more, search"shipping" in seller Help.3) Confirm shipment:Click "Confirm shipment" at the bottom of the Order Detail page and entershipping details. Once confirmed, we'll charge the buyer, notify them theirorder has shipped, and transfer the order payment into your seller account.To lea 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T10:35:35.243

这是相当简单的。您需要的正则表达式将类似于`Amazon fees: (\-?)\$(\d+\.?\d*)\D`.

所以使用这个我们可以做到：

```
var matches = Regex.Matches(INPUT_STRING,@"Amazon fees: (\-?)\$(\d+\.?\d*)\D",RegexOptions.Compiled | RegexOptions.IgnoreCase | RegexOptions.Multiline); 
```

这为我们提供了所有匹配项的列表。然后我们为浮点数处理它：

```
var fees = new List<float>();

foreach(Match match in matches) {
   float fee = 0;

   if (match.Groups[1].Value == "") {
       fee = float.Parse(match.Groups[2].Value);
   } else {
       fee = float.Parse('-' + match.Groups[2].Value);
   }
   fees.Add(fee);
} 
```

我捕获了负数，尽管我们可以假设所有费用都是负数，但我宁愿检查它并返回正确的负浮点数。

我认为这应该给你你想要的。我在这里忽略了很多错误检查，但你明白了。

# app-store - 从私钥生成 CSR 的 OpenSSL 错误

> ID：14601774
> 
> 赞同：0
> 
> 时间：2013-01-30T10:29:51.433
> 
> 标签：app-store, openssl, csr

我有一个从 .p12 文件中导出的私钥。该密钥已用于成功签署应用程序本身。

现在我需要从密钥生成 CSR。该站点建议对任务使用以下命令：

```
req -out CSR.csr -key privateKey.key -new 
```

这会产生以下错误：

> 无法加载私钥
> 
> 6420：错误：0D0680A8：asn1 编码例程：ASN1_CHECK_TLEN：错误标签：.\crypto\asn1\tasn_dec.c:1319：
> 
> 6420:error:0D06C03A:asn1 编码例程:ASN1_D2I_EX_PRIMITIVE:nested asn1 错误:.\crypto\asn1\tasn_dec.c:831:
> 
> 6420:error:0D08303A:asn1 编码例程:ASN1_TEMPLATE_NOEXP_D2I:nested asn1 错误:.\crypto\asn1\tasn_dec.c:751:Field=version, Type=RSA
> 
> 6420：错误：04093004：rsa 例程：OLD_RSA_PRIV_DECODE：RSA lib:.\crypto\rsa\rsa_ameth.c:115：
> 
> 6420：错误：0D0680A8：asn1 编码例程：ASN1_CHECK_TLEN：错误标签：.\crypto\asn1\tasn_dec.c:1319：
> 
> 6420:error:0D06C03A:asn1 编码例程:ASN1_D2I_EX_PRIMITIVE:nested asn1 错误:.\crypto\asn1\tasn_dec.c:831:
> 
> 6420:error:0D08303A:asn1 编码例程:ASN1_TEMPLATE_NOEXP_D2I:nested asn1 错误:.\crypto\asn1\tasn_dec.c:751:Field=version, Type=PKCS8_PRIV_KEY_INFO
> 
> 6420:error:0907B00D:PEM 例程:PEM_READ_BIO_PRIVATEKEY:ASN1 lib:.\crypto\pem\pem_pkey.c:132: req 中的错误

错误与我尝试相同

```
rsa -noout -text -in privateKey.key 
```

该文件确实存在。我做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:06:58.807

另一种可行的解决方案。

1、从原来的.p12创建一个.pem文件（提示时输入密码）

```
openssl pkcs12 -in my.p12 -nocerts -out my.pem -nodes 
```

2、从.pem创建请求：

```
openssl req -new -key my.pem -out my.csr 
```

系统将提示您输入国家、州、地区、组织、单位和常用名称以及您的电子邮件地址和其他属性（挑战密码和可选的公司名称）。

完毕。

**编辑：**也在 CERN 证书颁发机构的[准备续订证书签名请求（CSR）与 OpenSSL](https://ca.cern.ch/ca/Help/?kbid=023011)。

# android - 使用 1) 纹理图像和 2) ColorFilter 绘制非矩形形状

> ID：14601780
> 
> 赞同：2
> 
> 时间：2013-01-30T10:30:22.517
> 
> 标签：android, graphics, paint, shapedrawable, colorfilter

![在此处输入图像描述](../Images/926dd04f03d50e30bf593307072b8b22.png)

这就是我想画的。它有

*   我想要的形状（来自四个 [x/y] 坐标）
*   我想要的纹理（来自 bmp）
*   我想要的颜色（使用 ColorFilter）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:29:06.410

以编程方式，这就是我最终实现目标的方式：

```
Path path = new Path();
    path.moveTo(coord0X, coord0Y);
    path.lineTo(coord1X, coord1Y);
    path.lineTo(coord2X, coord2Y);
    path.lineTo(coord3X, coord3Y);
    path.lineTo(coord0X, coord0Y);

ShapeDrawable shapeDrawable = new ShapeDrawable(new PathShape(path, dx, dy));
shapeDrawable.setBounds(x, y, x+dx, y+dy);

shapeDrawable.getPaint().setStyle(Paint.Style.FILL);
Shader fillShader = new BitmapShader(myTextureBitmap, Shader.TileMode.REPEAT, Shader.TileMode.REPEAT);          
shapeDrawable.getPaint().setShader(fillShader); 
```

我现在得到了一个用我的纹理 BMP 绘制的平行四边形。

添加颜色过滤器：

```
shapeDrawable.setColorFilter(myColorFilter); 
```

# ios - iOS中现有appid的推送通知

> ID：14601784
> 
> 赞同：4
> 
> 时间：2013-01-30T10:30:35.637
> 
> 标签：ios, objective-c, xcode

我是新手`PushNotifications`。我在启用现有的推送通知时遇到了一个问题`AppID`。

很久以前，我`Provisioning profile`为一个应用程序创建了证书。当时我没有启用推送通知。要启用推送通知，我已登录`Apple Developer Account`并在其中`AppIds`单击了启用推送通知的检查。然后配置按钮已启用。如果我点击生产中的配置，它会要求我创建证书。但我已经有一个 Certificate 。我无法删除现有证书，因为我的大多数应用程序都使用现有证书。所以请帮我启用推送通知。

1.  如果我删除证书会影响设备上已安装的应用程序吗？如果我的问题不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T10:35:20.987

首先，完全可以撤销您的开发或发布证书并制作新证书，而不会影响您当前在应用商店中发布的应用。这可以随时完成。

但是，要设置推送通知，您需要设置更多证书。这些证书实际上并没有与您的应用程序捆绑在一起，而是供您的推送通知系统使用。您创建一个用于开发的证书和一个用于发布的证书。

将来如果您需要撤销这些推送证书，您可以这样做并创建新证书，而不会影响商店中的应用程序。您需要先将新的推送证书上传到您的推送通知系统，然后才能将推送通知发送到商店中的应用程序，但您不需要发布应用程序的新版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:34:33.600

要发送推送通知，您必须创建 SSL 证书。那是另一回事，与无论如何您必须创建和维护的“常规”证书无关。

您将不得不刷新 ssl 证书。每年一次。该证书甚至没有链接到应用程序。在将推送通知准确发送到 Apple 服务的服务器上是必需的。

我的建议：只需按照说明进行操作，不要与任何其他证书混淆。当然没有必要删除现有的应用程序证书。

# php - 为什么 Imagick 无法显示我的缩略图？

> ID：14601785
> 
> 赞同：0
> 
> 时间：2013-01-30T10:30:39.530
> 
> 标签：php, imagick

我尝试使用 Imagick 制作缩略图。为了使问题更简单，我有以下测试代码：

```
//loading picture
$image = new Imagick('/home/ytg/temp/blank.png');
//checking image size
echo "width: {$image->getimagewidth()}\n";
echo "height: {$image->getimageheight()}\n";
//creating thumbnail
$image->thumbnailImage(220, 220, true);
//checking image size
echo "new width: {$image->getimagewidth()}\n";
echo "new height: {$image->getimageheight()}\n"; 
```

这给了我以下结果：

```
width: 300
height: 300
new width: 219
new height: 220 
```

为什么它会使缩略图图像宽度变小一个像素？我怎样才能防止这种情况发生？我不想使用 的最后一个`$fill`参数`thumbnailImage()`，因为输入图像并不总是具有相同的宽度和高度，并且我不喜欢在这些情况下填充缩略图。

( `PHP Version => 5.4.6-1ubuntu1.1; imagick module version => 3.1.0RC1`)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-05T07:41:37.567

现在我正在解决这个解决方案：

```
$image = new Imagick('/home/ytg/temp/blank.png');
//checking image size
echo "width: {$image->getimagewidth()}\n";
echo "height: {$image->getimageheight()}\n";
//creating thumbnail
$image->thumbnailImage(220, 220, true);
//checking image size
echo "new width: {$image->getimagewidth()}\n";
echo "new height: {$image->getimageheight()}\n";        
$image->thumbnailImage($width, $height, true);                                                
if (($width == $height) && ($image->getImageWidth() != $image->getImageHeight())) {
    $image->thumbnailImage($width, $height, true, true);            
} 
```

但它并不完美，因为它仅适用于方形图像的特定情况。但在那种特殊情况下，它解决了我的问题。

# javascript - 从相机三js获取两个物体的距离

> ID：14601804
> 
> 赞同：0
> 
> 时间：2013-01-30T10:31:18.843
> 
> 标签：javascript, position, three.js

我在空间中有两个正方形，它们类似于立方体的前墙和后墙，有顶点

```
x=-2 y=-1138 z=-2;
x=-2 y=-1134 z=-2;
x=2 y=-1138 z=-2;
x=2 y=-1134 z=-2 
```

第二

```
x=-2 y=1134 z=2;
x=-2 y=1138 z=2;
x=2 y=1134 z=2;
x=2 y=1138 z=2 
```

当我像这样从相机计算距离时

```
var point1 = this.camera.matrixWorld.getPosition().clone();
var point2 = this.mesh.cubePlane3.children[0].matrixWorld.getPosition().clone();
var distance = point1.distanceTo( point2 ); 
```

我对 20,09 的距离总是相同的。这些方块在空间中旋转，所以只改变了旋转，我需要以某种方式找出哪个墙更靠近相机才能做一些事情，在立方体 3 中靠近相机的墙不会显示，接下来的 3 墙会显示。

显然我不明白这背后的数学原理，例如为什么彼此相邻的墙壁具有 y 的正坐标和下一个负坐标 + 为什么距离是相同的值，当 z 轴上的一个比第二个更近时。你能请有人帮我怎样才能靠近墙壁吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:53:21.393

每个几何图形都有一个 computeBoundingBox 函数。所以你可以这样做： var bbox = geometry.computeBoundingBox(); 对于您感兴趣的每个几何图形，然后使用 bbox.center() 获取几何图形的中心。更快的计算是在几何体上使用 computeBoundingSphere。然后，您只需将中心的关系与您的相机位置进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:58:01.547

我在这段代码中使用了 computeBoundingBox

```
 this.mesh[cubePlane[0]].children[0].geometry.computeBoundingBox();

    var position = new THREE.Vector3();
    position.sub( this.mesh[cubePlane[0]].children[0].geometry.boundingBox.max, this.mesh[cubePlane[0]].children[0].geometry.boundingBox.min );
    position.multiplyScalar( 0.5 );
    position.addSelf(this.mesh[cubePlane[0]].children[0].geometry.boundingBox.min );

    this.mesh[cubePlane[0]].children[0].matrixWorld.multiplyVector3( position );

    var point1 = this.camera.matrixWorld.getPosition().clone();
    var point2 = position;
    var distance = point1.distanceTo( point2 ); 
```

它有效，所以谢谢你的建议:)

# r - 在R中选择帧数据的多个条件

> ID：14601806
> 
> 赞同：1
> 
> 时间：2013-01-30T10:31:31.823
> 
> 标签：r

1.  加载这个数据集（只需启动 R，因为它已经默认加载）：

    空气质量

2.  在这里，有`Ozone Solar.R Wind Temp Month Day`153 个观察值的列。

3.  我想选择以下组合：

    *   臭氧 > 50

    *   太阳能.R > 50

    *   被定义（id est，删除 NA）。

我在 R 的控制台中尝试过`airquality[airquality$O > 50 && airquality$S > 50,]`，但结果是错误的。

问：如何返回具有良好条目的行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T10:41:27.653

这是一种使用的方法`subset`（仅推荐用于交互式使用，这就是您所描述的）：

```
subset(airquality[complete.cases(airquality), ], Ozone > 50 & Solar.R > 50) 
```

这里的想法是首先删除`NA`s `complete.cases`，然后根据您的条件进行子集化。

* * *

坚持使用`[`符号，我想您也可以分两步完成，如下所示：

```
temp <- with(airquality, airquality[Ozone > 50 & Solar.R > 50, ])
temp[complete.cases(temp), ] 
```

# serial-port - 从 PC 到 PLC 的 RS232 连接比使用 USB2RS232 电缆慢？

> ID：14601807
> 
> 赞同：2
> 
> 时间：2013-01-30T10:31:33.650
> 
> 标签：serial-port, plc

我有一台 PC 通过 USB2RS232 电缆连接到 PLC（Mitsubishi Q 系列）。电缆插入 PC 端，然后插入串行电缆，然后插入 PLC。我将波特率设置为 19200，一切正常。我的问题是，PC 时不时会在我身上出现蓝屏。当我检查转储文件时，问题似乎与 USB2RS232 电缆 (ftdi) 的驱动程序有关。我更新到最新的驱动程序，但仍然蓝屏（PC 运行的是 Windows 7）。

无论如何，我用另一台具有专用 RS232 端口的 PC 替换了 PC。现在我不断收到由 PLC 的响应指示的通信问题。碰巧我将 PC 和 PLC 的波特率都降低到了 9600。这个问题似乎已经消失了。

我的问题是为什么移除 USB2RS232 电缆会导致我不得不减慢通信速度？两种设备都可以以大于 19200 的速度进行通信，我认为使用串行电缆从串行端口 (PC) 到串行端口 (PLC) 会更好。

编辑：问题可能已解决 - 仍在测试

感谢你们的一些意见，我可能已经解决了这个问题。以下是我在使用直接 RS232 转 RS232 时将速度恢复到 19200 的以下几点。

*   即使在设备上没有检测到噪音，也使用了屏蔽电缆。
*   PC 程序将在向 PLC 发送数据之间等待 100 毫秒。我在某处读到 100 毫秒是 PLC 扫描时间的一个很好的近似值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T06:25:47.137

现代 PLC 和现代计算机之间的 RS232 通信通常很麻烦。这些是我认为它不起作用的一些事情：

电缆。许多电缆是非标准的，并且具有非标准的内部跳线和诸如此类的东西，这会增加错误率并降低吞吐量。您的 USB 转换器可能更先进，并且正在使用您的电缆自动检测某些东西并对其进行补偿。

PC 上的操作系统。比 Windows 98 更新的 Windows 版本似乎对串行通信没有最好的支持。

干涉。尤其要小心通讯线附近的驱动器。如果您使用的是非屏蔽电缆，间歇性运行的驱动器可能会导致您描述的问题，您会遇到间歇性故障，但在设备空闲并检查时完全没有噪音。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T11:26:36.083

根据您的描述，我猜您的设备处于“嘈杂”的环境中 - 从之前的蓝屏和现在常规 RS232 的问题来看。

您是否尝试过使用相同的硬件但其他环境在其他地方运行设置？

看看您是否可以获得更好的隔离串行电缆和/或使用 EMF 计来测量您的设置周围的电场/磁场。

另外值得一试的是在 PC 中插入另一张 RS232 卡，看看那里是否有问题，可能是你运气不好，RS232 坏了。

编辑：你确定USB转换器的速度高于9600吗？也许它已经协商了速度？（免责声明：不确定您使用的是什么品牌以及它的智能程度）。

# android - MapView 不显示数据

> ID：14601810
> 
> 赞同：0
> 
> 时间：2013-01-30T10:31:44.577
> 
> 标签：android

我在 中创建了简单的`MapView`示例`android`，但它没有在模拟器中显示任何内容

Logcat 数据是：

```
01-30 10:24:53.976: W/System.err(1033): IOException processing: 26
01-30 10:24:53.983: W/System.err(1033): java.io.IOException: Server returned: 3
01-30 10:24:54.003: W/System.err(1033):     at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115)
01-30 10:24:54.020: W/System.err(1033):     at android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)
01-30 10:24:54.022: W/System.err(1033):     at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)
01-30 10:24:54.022: W/System.err(1033):     at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994)
01-30 10:24:54.022: W/System.err(1033):     at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702)
01-30 10:24:54.032: W/System.err(1033):     at java.lang.Thread.run(Thread.java:856)
01-30 10:24:54.263: W/Trace(1033): Unexpected value from nativeGetEnabledTags: 0
01-30 10:24:54.263: W/Trace(1033): Unexpected value from nativeGetEnabledTags: 0
01-30 10:24:54.343: W/Trace(1033): Unexpected value from nativeGetEnabledTags: 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:45:00.153

我认为地图 API 密钥是错误的。尝试重新生成密钥：

[https://developers.google.com/maps/documentation/android/v1/mapkey](https://developers.google.com/maps/documentation/android/v1/mapkey)

# javascript - html5 PostMessage 跨域-相反版本

> ID：14601820
> 
> 赞同：0
> 
> 时间：2013-01-30T10:32:11.273
> 
> 标签：javascript, html, postmessage

我创建了从一个域到另一个域的 PostMessage。

在域 AI 中有域 B 的框架。我可以从 A 向 B 发送消息。现在我想做相反的事情。我需要框架中的按钮（在弹出窗口上）。当我点击那里时，我需要从 B 向 A 发送消息。

在域 A 上：

```
 <iframe id="frameId" src="http://b.net/2.html" onload="sendCommand();"> </iframe>

            <script  type="text/javascript"> 
                        function sendCommand() {
                        var receiver;
                        receiver = document.getElementById('frameId').contentWindow;
                        receiver.postMessage(receiver, 'http://b.net');
                        }
                </script>
        </body>
    </html> 
```

在域 B 中：

```
 <!DOCTYPE HTML>
    <html>
    <head>
    <script>
    var F= function(){}
    </script>

    </head>
    <body>
    Hello THere
     <button onclick="F()">Click me</button>
     <script>
            window.addEventListener('message', function(event) {
            alert(event.origin);
    }, false);

    </script>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:06:21.707

我解决了这个问题：

这是一个好的解决方案吗？

```
<!DOCTYPE HTML>
    <html>
    <head>
    <script>
        var t;  
        function load (){       
                 window.addEventListener('message', function(event) {
                        console.log(event.data) ;                   
                        window.clearInterval(t);
                        return;
                }, false);
       }     
    </script>
    </head>
  <body onload="load()">
            <iframe id="frameId" src="http://b.net/2.html"  onload="sendCommand();">  No Frame!</iframe> 
            <script  type="text/javascript"> 
                    function sendCommand() {
                       //  post massage to domain B
                         var receiver = document.getElementById('frameId').contentWindow;
                         receiver.postMessage("Start listening", 'http://b.net');
                    } 
            </script> 
    </body>
</html>

<!DOCTYPE HTML>
<html>
<head>
<script>
var F= function(){  
    // Send message from Iframe Page to domain A
    parent.postMessage("From Iframe Page ","*");
}
</script>
</head>
<body>
Hello There
 <button onclick="F()">Click me</button>
 <script>
        // Listen events
        window.addEventListener('message', function(event) {
        console.log(event.data)
        }, false);

</script>
</body>
</html> 
```

# java - 使用 AST 解析选定的代码

> ID：14601822
> 
> 赞同：0
> 
> 时间：2013-01-30T10:32:08.303
> 
> 标签：java, eclipse

我选择了一段代码，我想用 AST 进行解析，目的是识别所选代码中的方法。

```
public void run(IAction action) {
    SelectedText selectedText;      
    IEditorPart editor = getActiveEditor();

    if (editor instanceof AbstractTextEditor) {
        selectedText = getSelectedText(editor);
        creteAST(selectedText);
    }           
}

private void creteAST(SelectedText selectedText) {
    CompilationUnit parse = parse(selectedText);
    MethodVisitor visitor = new MethodVisitor();
    parse.accept(visitor);

    System.out.println("Printing methods from the selected code");
    for (MethodDeclaration method : visitor.getMethods()) {
        System.out.println("Method name: " + method.getName()+ ". Return type: " + method.getReturnType2());
        System.out.println(method);
    }
}

private static CompilationUnit parse(SelectedText selectedText) {
    String s_text = selectedText.getSelectedText();
    char[] c_text = s_text.toCharArray();
    ASTParser parser = ASTParser.newParser(AST.JLS3);
    parser.setKind(ASTParser.K_COMPILATION_UNIT);
    parser.setSource(c_text);
    parser.setResolveBindings(true);
    return (CompilationUnit) parser.createAST(null);
  } 
```

如您所见，我必须在解析之前将类型从`SelectedText`更改为。`char[]`

我做错了什么，因为解析器没有找到任何方法。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:38:14.333

ASTParser.setResolveBindings() 的 javadoc 说：

> 绑定信息是从 Java 模型中获得的。这意味着编译单元必须相对于 Java 模型定位。当源代码来自 setSource(ICompilationUnit) 或 setSource(IClassFile) 时，这会自动发生。当源由 setSource(char[]) 提供时，必须通过调用 setProject(IJavaProject) 和 setUnitName(String) 显式显示该位置。请注意，影响文档注释检查的编译器选项也可能影响是否为文档注释中的节点解析任何绑定。

```
IJavaProject javaProject = ...obtain it somehow, possibly through getAdapter() on editor?
String name = ...from editor?...

ASTParser parser = ASTParser.newParser(AST.JLS3);
parser.setKind(ASTParser.K_COMPILATION_UNIT);
parser.setSource(c_text);
parser.setResolveBindings(true);
parser.setProject(javaProject);
parser.setUnitName(name);
return (CompilationUnit) parser.createAST(null); 
```

# websocket - 无法使用 WebSocket4Net 连接到 websocket 服务器

> ID：14601832
> 
> 赞同：0
> 
> 时间：2013-01-30T10:32:39.617
> 
> 标签：websocket, wss, mochiweb, websocket4net

我有一个 mochiweb 作为 WebSocket 服务器；随着 ws 客户端的顺利进行（打开、发送消息、关闭），使用**Chrome**浏览器中的JavaScript 进行连接。但是，当我尝试使用**websocket4Net**从 C# 连接时，我总是从**mochiweb**得到以下错误。

> =CRASH REPORT==== 30-Jan-2013::16:57:41 === crasher: 初始调用: mochiweb_acceptor:init/3 pid: <0.228.0> registered_name: [] 异常错误: 没有 case 子句匹配{error,timeout} in function mochiweb_http:websocket_init_with_origin_validated/4 (mochiweb_http.erl, line 292) in call from mochiweb_http:headers_ws_upgrade/4 (mochiweb_http.erl, line 192) 祖先：[cim_https,<0.166.0>] 消息：[ ] 链接：[<0.167.0>] 字典：[] trap_exit：false 状态：运行 heap_size：1597 stack_size：24 减少：1585

我的 C# 片段：

> ```
>  webSocketClient = new WebSocket("wss://localhost:8080/login");
>                     webSocketClient.Error += new EventHandler<SuperSocket.ClientEngine.ErrorEventArgs>(webSocketClient_Error) ;
>         webSocketClient.AllowUnstrustedCertificate = true;
>         webSocketClient.Opened += new EventHandler(webSocketClient_Opened);
>         webSocketClient.Closed += new EventHandler(webSocketClient_Closed);
>         webSocketClient.MessageReceived += new EventHandler<MessageReceivedEventArgs>(webSocketClient_MessageReceived);
>         webSocketClient.Open(); 
> ```

有没有我错过的参数？关于如何追踪这个的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:27:04.523

发现问题。显然，Mochiweb 仅支持 websocket4net 中称为 Hybi00 的内容 - 尚不支持 RFC 6455。好像现在我必须修补我的 mochiweb。

# php - PHP页面未将数据发送到.csv

> ID：14601840
> 
> 赞同：0
> 
> 时间：2013-01-30T10:32:59.613
> 
> 标签：php

我创建了一个 PHP 页面（参见下面的代码），该页面应该在提交之前验证输入到 web 表单中的信息，以确保所有字段都已完成。如果任何字段留空，则应该显示错误消息；如果所有字段都已填写，则应该将数据发送到 .csv 文件。问题是它没有验证字段，也没有将数据发送到 .csv。我尝试删除 .csv 然后提交网络表单；它创建一个用逗号分隔条目的 .csv，但没有条目（即没有文本，只有逗号）。

有人知道为什么会这样吗？

任何援助将不胜感激。

提前致谢！

这是代码：

```
<form action="form_mailer.php" method="post">

<table>
<tr><td>Which is your name?</td>
<td><input type="text" name="formName" maxlength="50" value="<?=$varName;?>"></td></tr>     

<tr><td>What is your occupation?</td>              
<td><input type="text" name="formOccupation" maxlength="50" value="<?=$varOccupation;?>"></td></tr>  
</table>
<input type="submit" name="formSubmit" value="Submit">
</form> 

<?php
if($_POST['formSubmit'] == "Submit") 
{  
$errorMessage = "";   

if(empty($_POST['formName']))   
{    
$errorMessage .= "<li>You forgot to enter your name!</li>";  
}  
if(empty($_POST['formOccupation']))   
{    
$errorMessage .= "<li>You forgot to enter your occupation!</li>";  
}   

$varName = $_POST['formName'];  
$varOccupation = $_POST['formOccupation'];   

if(!empty($errorMessage))   
{    
echo("<p>There was an error with your form:</p>\n");    
echo("<ul>" . $errorMessage . "</ul>\n");  
}  

}    
?>

<?php
if($errorMessage != "") 
{  
echo("<p>There was an error:</p>\n");  
echo("<ul>" . $errorMessage . "</ul>\n");
} 
else
{  
$fs = fopen("data.csv","a");  
fwrite($fs,$varName . ", " . $varOccupation . "\n");  
fclose($fs);   
}
?> 
```

**更新：**

你好，

非常感谢您的回复。

我已经意识到我现在哪里出错了............我的表单操作为“form_mailer.php”，它不是表单页面本身，而是另一个页面，它使用提供的数据执行进一步的操作网络表单。

我现在已经将“form_mailer”编码带入 webform .php 并更改了 webform 页面的“操作”，以便它有效地提交给自己，但现在我需要在成功提交 webform 后重定向到 form_mailer 页面或显示感谢信息........**不要以为有人知道我该怎么做吗？** 如果您可以提供有关如何同时执行这两种操作的说明，那将是很好的，因为我可以选择最适合我需要的一种。

再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:42:28.030

可能您应该将这些变量设为全局变量：

```
<?php
global $varName, $varOccupation
... 
```

...可能在两个`<?php`街区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:38:37.790

我已经检查了您的代码，它工作正常，并且还将数据存储在 csv 文件中。

# html - 导航子菜单时将父 li 作为类悬停

> ID：14601842
> 
> 赞同：0
> 
> 时间：2013-01-30T10:33:01.213
> 
> 标签：html, css

我为此构建了一个[jsFiddle](http://jsfiddle.net/tQesS/)。我要做的是，一旦您导航到子菜单，它就会在父 li 项目周围保持填充。目前，如果您将鼠标悬停在 li 上，您可以看到填充。

我的CSS如下：

```
#access {
    margin-top: 45px;
}

#access ul#menu-top_nav {
    margin:0 0 10px 15px;
}

#access ul#menu-top_nav li {
    font-size: 15px;
    position: relative;
    display: inline-block;
}

#access ul#menu-top_nav li a {
    color: #336c82;
    padding: 10px;
}

#access ul#menu-top_nav ul {
    display: none;
}

#access ul#menu-top_nav li a:hover {
    background: #336c82;
    color: #fff;
    text-decoration: none;
}

#access ul#menu-top_nav li:hover > ul {
    display: block;
    position: absolute;
    top: 30px;
    left: -25px;
    background: #336c82;
}

#access ul#menu-top_nav ul.sub-menu li {
    display: block;
    width: 200px;
    padding: 10px;
}

#access ul#menu-top_nav ul.sub-menu li a {
    color: #fff;
    padding: 0;
}

#access ul#menu-top_nav ul.sub-menu li a:hover {
    padding: 0;
    text-decoration: underline;
} 
```

我的 HTML 是：

```
<div role="navigation" id="access">
<ul id="menu-top_nav" class="menu">
    <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17" id="menu-item-17">
        <a href="#">Our Business</a>
        <ul class="sub-menu">
            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-73" id="menu-item-73"><a href="#">About Us</a></li>
            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-72" id="menu-item-72"><a href="#">Careers</a></li>
        </ul>
    </li>
</ul>
</div> 
```

但是进一步进入子菜单，悬停效果就会消失。

我怎样才能使父 li 始终有效悬停？

提前致谢。希望我已经解释得当。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:38:08.687

更改`#access ul#menu-top_nav li a:hover`为`#access ul#menu-top_nav li:hover a`

```
 #access ul#menu-top_nav li:hover a{
    background: #336c82;
    color: #fff;
    text-decoration: none;
} 
```

[**演示**](http://jsfiddle.net/tQesS/3/)

**[这里](http://userinterfacehome.blogspot.in/2012/11/pure-css-dropdown-menu.html)**是 CSS 下拉菜单的详细示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:38:14.083

[这看起来像如何在鼠标位于下拉菜单中的子菜单时保持父菜单悬停](https://stackoverflow.com/questions/3103857/how-to-keep-the-parent-menu-hovered-while-the-mouse-in-child-menu-in-a-dropdown?rq=1)的副本

无论如何，将悬停伪类放在`li`- 更改

```
#access ul#menu-top_nav li a:hover {
    background: #336c82;
    color: #fff;
    text-decoration: none;
} 
```

到：

```
#access ul#menu-top_nav li:hover a {
    background: #336c82;
    color: #fff;
    text-decoration: none;
} 
```

# couchdb - CouchDB 在视图中的链接文档

> ID：14601845
> 
> 赞同：4
> 
> 时间：2013-01-30T10:33:07.230
> 
> 标签：couchdb

我很难理解 CouchDB 的[链接文档](http://wiki.apache.org/couchdb/Introduction_to_CouchDB_views#Linked_documents)功能。

我有两个`types`数据存储在一个 CouchDB 数据库中：

```
{
  "id":"1",
  "type": "track",
  "title": "Bohemian Rhapsody"
}

{
  "id":"2",
  "type": "artist",
  "name": "Queen",
  "tracks": ["1"]
} 
```

我的印象是我可以编写如下视图并发出以下文档：

```
{
  "id":"2",
  "type": "artist",
  "name": "Queen",
  "tracks": [
    {
      "id":"1",
      "type": "track",
      "title": "Bohemian Rhapsody"
    }
  ]
} 
```

我一直在尝试这种观点，但它没有按我预期的方式工作：

```
function(doc) {
  if(doc.type == 'artist') {
    var tracks = [];
    for(var i = 0; i < doc.tracks.length; i++) {
      tracks.push({_id:doc.tracks[i]});
    }

    newdoc = eval(uneval(doc));
    newdoc.tracks = tracks;

    emit(doc._id,newdoc);
  }
} 
```

这里的例子：http: [//jphastings.iriscouch.com/_utils/database.html ?music/_design/test/_view/linked](http://jphastings.iriscouch.com/_utils/database.html?music/_design/test/_view/linked)

这不是我希望的回报 - 你有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T11:37:15.583

好的，我终于明白你要做什么了。是的，这是可能的。这就是方法。

您有 2 个文件

```
{
"_id":"anyvalue",
"type": "track",
"title": "Bohemian Rhapsody"
}

{
"_id":"2",
"type": "artist",
"name": "Queen",
"tracks": ["anyvalue"]
} 
```

您做错的事情是没有在轨道值（数组中的项目）周围加上引号。

2）参考 id 必须是 _id 才能工作。差异值得注意，因为您可以有 id 字段但只有 _id 用于识别文档。

对于您想要的结果，此视图就足够了

```
function(doc) {
    if (doc.type === 'artist') {
        for (var i in doc.tracks) {
            var id = doc.tracks[i];
            emit(id, { _id: id });
        }
    }
} 
```

你想要做的是在 for 循环中使用一个发出函数来发出每个艺术家的“轨道”的 id 字段。

然后您想使用 include_docs=true 参数查询沙发数据库视图。这是您在 iris 沙发上创建的数据库的最终结果。

[http://jphastings.iriscouch.com/music/_design/test/_view/nested?reduce=false&include_docs=true](http://jphastings.iriscouch.com/music/_design/test/_view/nested?reduce=false&include_docs=true)

```
 {
"total_rows": 3,
"offset": 0,
"rows": [
 {
  "id": "0b86008d8490abf0b7e4f15f0c6a50a7",
  "key": "0b86008d8490abf0b7e4f15f0c6a463b",
  "value": {
    "_id": "0b86008d8490abf0b7e4f15f0c6a463b"
  },
  "doc": {
    "_id": "0b86008d8490abf0b7e4f15f0c6a463b",
    "_rev": "3-7e4ba3bfedd29a07898125c09dd7262e",
    "type": "track",
    "title": "Boheniam Rhapsody"
  }
},
{
  "id": "0b86008d8490abf0b7e4f15f0c6a50a7",
  "key": "0b86008d8490abf0b7e4f15f0c6a5ae2",
  "value": {
    "_id": "0b86008d8490abf0b7e4f15f0c6a5ae2"
  },
  "doc": {
    "_id": "0b86008d8490abf0b7e4f15f0c6a5ae2",
    "_rev": "2-b3989dd37ef4d8ed58516835900b549e",
    "type": "track",
    "title": "Another one bites the dust"
  }
},
{
  "id": "0b86008d8490abf0b7e4f15f0c6a695e",
  "key": "0b86008d8490abf0b7e4f15f0c6a6353",
  "value": {
    "_id": "0b86008d8490abf0b7e4f15f0c6a6353"
  },
  "doc": {
    "_id": "0b86008d8490abf0b7e4f15f0c6a6353",
    "_rev": "2-0383f18c198b813943615d2bf59c212a",
    "type": "track",
    "title": "Stripper Vicar"
  }
 }
]
} 
```

杰森在这篇文章中很好地解释了它

[在 CouchDB 中进行一对多“JOIN”的最佳方式](https://stackoverflow.com/questions/3033443/best-way-to-do-one-to-many-join-in-couchdb)

这个链接也有助于沙发数据库中的实体关系

[http://wiki.apache.org/couchdb/EntityRelationship](http://wiki.apache.org/couchdb/EntityRelationship)

# php - php mktime 需要本月前24个月的列表

> ID：14601849
> 
> 赞同：0
> 
> 时间：2013-01-30T10:33:23.910
> 
> 标签：php

我需要一份本月前 24 个月的清单。这是我的代码：

```
<?php
$monthbefore1  = mktime(0, 0, 0, date("m"), date("d"), date("Y"));
$monthbefore2  = mktime(0, 0, 0, date("m")-1, date("d"), date("Y"));
$monthbefore3  = mktime(0, 0, 0, date("m")-2, date("d"), date("Y"));
$monthbefore4  = mktime(0, 0, 0, date("m")-3, date("d"), date("Y"));
$monthbefore5  = mktime(0, 0, 0, date("m")-4, date("d"), date("Y"));
$monthbefore6  = mktime(0, 0, 0, date("m")-5, date("d"), date("Y"));
$monthbefore7  = mktime(0, 0, 0, date("m")-6, date("d"), date("Y"));
$monthbefore8  = mktime(0, 0, 0, date("m")-7, date("d"), date("Y"));
$monthbefore9  = mktime(0, 0, 0, date("m")-8, date("d"), date("Y"));
$monthbefore10 = mktime(0, 0, 0, date("m")-9, date("d"), date("Y"));
$monthbefore11 = mktime(0, 0, 0, date("m")-10, date("d"), date("Y"));
$monthbefore12 = mktime(0, 0, 0, date("m")-11, date("d"), date("Y"));
$monthbefore13 = mktime(0, 0, 0, date("m")-12, date("d"), date("Y"));
$monthbefore14 = mktime(0, 0, 0, date("m")-13, date("d"), date("Y"));
$monthbefore15 = mktime(0, 0, 0, date("m")-14, date("d"), date("Y"));
$monthbefore16 = mktime(0, 0, 0, date("m")-15, date("d"), date("Y"));
$monthbefore17 = mktime(0, 0, 0, date("m")-16, date("d"), date("Y"));
$monthbefore18 = mktime(0, 0, 0, date("m")-17, date("d"), date("Y"));
$monthbefore19 = mktime(0, 0, 0, date("m")-18, date("d"), date("Y"));
$monthbefore20 = mktime(0, 0, 0, date("m")-19, date("d"), date("Y"));
$monthbefore21 = mktime(0, 0, 0, date("m")-20, date("d"), date("Y"));
$monthbefore22 = mktime(0, 0, 0, date("m")-21, date("d"), date("Y"));
$monthbefore23 = mktime(0, 0, 0, date("m")-22, date("d"), date("Y"));
$monthbefore24 = mktime(0, 0, 0, date("m")-23, date("d"), date("Y"));

echo date("F", $monthbefore24);
echo date("F", $monthbefore23);
echo date("F", $monthbefore22);
echo date("F", $monthbefore21);
echo date("F", $monthbefore20);
echo date("F", $monthbefore19);
echo date("F", $monthbefore18);
echo date("F", $monthbefore17);
echo date("F", $monthbefore16);
echo date("F", $monthbefore14);
echo date("F", $monthbefore13);
echo date("F", $monthbefore12);
echo date("F", $monthbefore11);
echo date("F", $monthbefore10);
echo date("F", $monthbefore9);
echo date("F", $monthbefore8);
echo date("F", $monthbefore7);
echo date("F", $monthbefore6);
echo date("F", $monthbefore5);
echo date("F", $monthbefore4);
echo date("F", $monthbefore3);
echo date("F", $monthbefore2);
echo date("F", $monthbefore1);
?> 
```

为什么结果看起来像这样？**三月三月**四月五月六月七月八月九月十二月一月**三月*三月*四月五月六月七月八月九月十月十一月十二月一月

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:37:29.730

今天是 1 月 30 日，2 月没有 30 天，所以在日期上加了 2 天，结果是 3 月 看看 PHP 日期函数手册[http://www.php.net/manual /en/function.date.php](http://www.php.net/manual/en/function.date.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:54:31.587

您最有可能获得重复的三月，因为您使用今天的第 30 天，并非所有月份都有 30 天。你可以使用这些

```
 $months = array();
    $date = mktime(0, 0, 0, date('n'), 1);
    for($i = -1; $i >= -24; $i--) {
        $months[] = date('F', strtotime($i.' month', $date));
    }
    print_r($months); 
```

为了便于使用，我已将结果放入数组中，但您可以简单地回显结果：

```
 $date = mktime(0, 0, 0, date('n'), 1);
    for($i = -1; $i >= -24; $i--) {
        echo date('F', strtotime($i.' month', $date));
    } 
```

第一行创建一个时间戳，其中包含今天的月份和年份，但包含该月的第一天。然后第三行从日期中删除 $i 个月数，并将生成的时间戳转换为月份的字符串表示形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:41:50.193

```
for ($i=-1; $i--; $i>-24)
{
      echo date("F", strtotime($i." months"));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T10:37:07.807

尝试查找 date() 手册并描述您想要获得的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T11:00:46.600

我会以不同的方式解决你的问题。我的问题是：你对今年第 0 个月有什么期望？还是今年的-1 月？查看 date() 的文档以找出答案。

我会使用 PHP 提供的日期计算。日期时间包。

这是一个例子：

```
// Get an instance of DateTime with current time (no argument)
$date = new DateTime();

// Create a DateInterval (that may be a bit confusing) by one month
$interval = new DateInterval('P1M');
# Same as: $interval = DateInterval::createFromDateString('1 month')

// What date do we have now?
echo $date->format('F');

// What date is it if we substract one month and print it?
echo $date->sub($interval)->format('F');
echo $date->sub($interval)->format('F');
echo $date->sub($interval)->format('F');
echo $date->sub($interval)->format('F');
echo $date->sub($interval)->format('F');
echo $date->sub($interval)->format('F');
echo $date->sub($interval)->format('F');
echo $date->sub($interval)->format('F');
echo $date->sub($interval)->format('F');
echo $date->sub($interval)->format('F'); 
```

# ios - 在 plist 文件 ios 中保存从日期选择器读取的日期

> ID：14601852
> 
> 赞同：-3
> 
> 时间：2013-01-30T10:33:34.397
> 
> 标签：ios, objective-c, plist

我如何从选择器中选择日期格式（yyyy/mm/dd）并将其保存在 plist 文件中？以及如何实现 plist 文件？我是 ios 开发的初学者，需要将日期保存在文件中以进行一些计算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:51:46.497

您必须实现 UIDatePicker 功能。例如，您已经有 UIDatePicker * datePicker。1\. 保存日期到 plist（使用 Documents 文件夹）

```
 NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]; 
```

创建文件名：

```
 NSString *filePath = [docDir stringByAppendingPathComponent:@"myPlistFile.plist"]; 
```

通过 NSDictionary 保存日期：

```
 NSDictionary* dict = [NSMutableDictionary dictionaryWithObject:[datePicker date] forKey:@"date"]; 
```

将字典写入文件：

```
 [dict writeToFile:filePath atomically:YES]; 
```

然后您可以从文件中获取保存的日期：

```
 NSDictionary *dic = [NSDictionary dictionaryWithContentsOfFile:filePath];
NSDate * savedDate = [dic objectForKey:@"date"]; 
```

创建日期（格式（yyyy/mm/dd））：

```
 NSDateFormatter* formatter = [[NSDateFormatter new] autorelease];
    [formatter setDateFormat: @"yyyy/MM/dd"];
NSString * strSavedDate = [formatter stringFromDate:savedDate]; 
```

# ruby-on-rails - Rails 3.1：CSS 更新不会反映在网站中

> ID：14601853
> 
> 赞同：1
> 
> 时间：2013-01-30T10:33:37.550
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, asset-pipeline, assets

我有一个用 Rails 3.1 编写的应用程序，我需要完全更改项目中的 CSS 样式。`assets/stylesheets`我买了一个模板，从（包括）中删除了当前的 CSS 样式`application.css`并将新的 CSS 文件推送到那里。

此外，我`stylesheet_link_tag`用新的 CSS 文件的名称修改了 。

然后，当我用应用程序打开浏览器时，刷新应用程序 - 没有加载新文件。当我查看生成的源代码时，仍然有旧 CSS 文件的路径。

我已经读过这可能会对我有所帮助`rake assets:precompile`- 但这对于每次来说都是不切实际的，当我更改 CSS 文件以运行此命令时（我猜这需要 2 分钟）。

有没有更好的处理方法？

谢谢

**编辑： **在`<head>`标签中：

```
<%= javascript_include_tag "jquery" %>
<%= javascript_include_tag "jquery-ui" %>
<%= stylesheet_link_tag "application", :media => "all" %>
<%= stylesheet_link_tag "http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/redmond/jquery-ui.css" %>
<%= javascript_include_tag "bootstrap" %>
<%= javascript_include_tag "application" %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:42:04.700

除非您决定关闭资产管道（我不建议这样做，因为它实际上非常好），否则您将不得不自己构建一个新的`application.css`. 如果您不这样做，您的 CSS 文件将根本无法被识别。

只需将其视为每个 CSS 文件的清单。您可以将其用作模板。

```
/*
 *= require cssfile1
 *= require cssfile2
 */ 
```

然后，将样式表链接标记恢复为布局中的原始形式。在您的 `application.html.erb' 中，删除对 CSS 文件的任何引用并改用它：

```
<%= stylesheet_link_tag "application", :media => "all" %> 
```

是的，将新资产文件导入 Rails 应用程序并不是一个简单的提议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:41:15.467

*   它可能只是浏览器缓存吗？尝试强制重新加载（ctrl+f5）。
*   尝试删除`<your_app>/tmp/cache`并重新启动服务器。

# .net - SQL CLR 执行错误

> ID：14601855
> 
> 赞同：4
> 
> 时间：2013-01-30T10:33:42.267
> 
> 标签：.net, sql, sql-server, clr, sqlclr

我正在使用 Visual Studio 2012 和 MS SQL Server 2012。我创建了 SQL CLR 项目并按照以下链接执行步骤 [http://blogs.interfacett.com/how-create-net-stored-procedure-sql-server](http://blogs.interfacett.com/how-create-net-stored-procedure-sql-server)

现在，当我在附加触发器的表中插入数据时，数据已插入，但出现以下错误。“**请求‘System.Net.WebPermission, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089’类型的权限失败。** ”

谁能告诉我，我该如何解决？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T10:40:48.593

不要通过触发器进行网络调用。使用队列将事务性数据操作与非事务性 HTTP 调用分离。不要从 SQL CLR 内部进行 Web 调用。使用进行 HTTP 调用的外部进程。

[遵循CLR 集成代码访问安全](http://msdn.microsoft.com/en-us/library/ms345101.aspx)中所述的代码访问权限要求：

> **EXTERNAL_ACCESS**程序集还具有以下权限和值：
> ...
> **WebPermission** Connect：允许到 Web 资源的出站连接。

# php - 这个编码是错误的吗？它不能正常工作

> ID：14601856
> 
> 赞同：0
> 
> 时间：2013-01-30T10:33:42.880
> 
> 标签：php, mysql

下面的脚本将数据输入到数据库中，这会从表单中获取一些信息，然后将它们存储到数据库中。而且我还使用 uplodify 上传图像文件并将文件名存储在数据库中，但我的问题是这个数据处理脚本不断更新行 ID 一个永远不会跳到第二行我尝试了每件事都可以有人帮助我这个或告诉我我做错了什么。

这也会检查 ID，如果它不等于 1，则插入，如果它相等则更新它，但这不会发生。

ID 是自动递增的。

**我的剧本**

```
<?php

/**
 * @author SiNUX
 * @copyright 2013
 */

include ('connect.php');

$getId = mysql_query("SELECT ID FROM poiinfo ORDER BY ID DESC LIMIT 1");
$row = mysql_fetch_array($getId);

$poiName = $_REQUEST['Name'];
$poiDes = $_REQUEST['Descrip'];
$poiCon = $_REQUEST['ConInfo'];
//$poiId = $_REQUEST['pID'];

if($row['ID'] != "1"){
    $dbData = "INSERT INTO poiinfo(`Name`, `Des.`, `Contact`) VALUES ('$poiName','$poiDes','$poiCon')";        
    $putData = mysql_query($dbData);

    if ($putData){
        echo "Data inserted";
    }else {
        echo "Not Done";
    }

}else {
    $updLn = "UPDATE `poiinfo` SET `Name`='$poiName',`Des.`='$poiDes',`Contact`='$poiCon'";
    $updDone = mysql_query($updLn);

    if ($updDone){
        echo "Data inserted";
    }else {
        echo "Not Done";
    }
 }       
?> 
```

我尝试了你的建议，但现在我的更新代码仍然是这样的。

```
$updLn = "UPDATE `poiinfo` SET `Name`='$poiName',`Des.`='$poiDes',`Contact`='$poiCon' WHERE `ID`='".$row['ID']."'"; 
```

但它仍然继续与 ID 1 约会，而不是移动到下一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:37:08.280

您的更新查询缺少 WHERE 子句。尝试这个：

```
$updLn = "UPDATE `poiinfo` SET `Name`='$poiName',`Des.`='$poiDes',`Contact`='$poiCon' WHERE ID = '".$row['ID']."'"; 
```

还要提防 MySQL 注入：[http ://en.wikipedia.org/wiki/SQL_injection](http://en.wikipedia.org/wiki/SQL_injection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:37:17.913

```
 $updLn = "UPDATE `poiinfo` SET `Name`='$poiName',`Des.`='$poiDes',`Contact`='$poiCon'"; 
```

您需要此 sql 中的 where 子句来指定要更新的记录。目前它正在更新所有记录。

```
 $updLn = "UPDATE `poiinfo` SET `Name`='$poiName',`Des.`='$poiDes',`Contact`='$poiCon' WHERE `ID` = ".$row['id']";"; 
```

您需要设置一个 $id 变量才能使其正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:38:19.887

要检查更新失败的原因，您应该`mysql_error`在最后一个`else`子句中调用：

```
} else {
    echo mysql_error();
} 
```

至于第一个问题：如果您从不插入新记录（提供您的代码，我看不出这是怎么发生的），您将永远不会有 ID 为 2 的记录。

# java - 将 Intellij 配置为使用来宾 VM 的 Jvm，这可能吗？

> ID：14601857
> 
> 赞同：5
> 
> 时间：2013-01-30T10:33:43.250
> 
> 标签：java, intellij-idea

我想知道是否可以在主机中使用 intellij 来编译和构建驻留在来宾 VM 中的 java 源代码。

例如，我正在使用带有虚拟框的 Windows 机器。如果我更喜欢在这个操作系统中安装 Intellij 并将源代码保留在来宾操作系统（在 Virtual Box 上运行的 ubuntu）上，java 和 maven 配置在哪里。所以我可以使用 ubuntu 的 java/maven 来处理 ubuntu 上的代码，但可以远程使用 de IDE。

在这种情况下，我只是想知道是否可以将 IDE 首选项设置为在远程机器/VM 中使用 java 编译器和解释器以及 maven

有道理吗？

如果存在这种可能性，这是阅读它的资源吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-05-24T01:20:46.927

据我了解，这是不可能的，因为 IntelliJ 需要使用安装在主机上的本地 JVM。它不能使用远程或虚拟 PC 的 JVM。

# visual-studio - 如何使用 Visual Studio 在一个实例中打开文件？

> ID：14601859
> 
> 赞同：3
> 
> 时间：2013-01-30T10:33:51.783
> 
> 标签：visual-studio

我直接从 FTP 编辑文件并喜欢使用 Visual Studio，但是 VS 似乎在新的 VS 实例而不是新选项卡中打开每个文件。我相信这是因为它是一个没有解决方案/项目的文件。

如何强制 VS 在一个多选项卡窗口中打开多个单独的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T19:04:54.147

您也许应该查看此命令行选项： http: [//msdn.microsoft.com/en-US/library/aa991989 (v=vs.100).aspx](http://msdn.microsoft.com/en-US/library/aa991989(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-06T08:45:16.307

我有同样的问题这对我有用：

在 Filezilla 中，转到“使用自定义编辑器”单选按钮上的“编辑”>“设置”>“文件编辑”，输入以下内容： **注意：引号和正斜杠之间的空格很重要** **“/edit**

```
"C:\Program Files\Microsoft Visual Studio 8\Common7\IDE\devenv.exe" /edit 
```

或者

```
"C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\devenv.exe" /edit 
```

# macos - 确定 OS X 沙箱下符号链接指向的文件的大小

> ID：14601863
> 
> 赞同：3
> 
> 时间：2013-01-30T10:34:02.213
> 
> 标签：macos, cocoa, sandbox, nsfilemanager

为了确定文件的大小，我一直使用：

```
NSDictionary *fileAttributes = [[NSFileManager defaultManager] attributesOfItemAtPath:path error:nil];
unsigned long long size = [fileAttributes fileSize]; 
```

但是，该方法`attributesOfItemAtPath:error:` *不遍历符号链接*。苹果建议：

> 如果路径上的项目是符号链接——即`NSFileType`属性字典中键的值是`NSFileTypeSymbolicLink`——你可以使用该`destinationOfSymbolicLinkAtPath:error:`方法来检索链接所指向的项目的路径。

如果沙盒不阻止我访问指定的文件，那就太好了：

> 拒绝文件读取 xattr`/path/to/the/original/file`

所以，我的问题是：如何获得 OS X 沙箱下的符号链接指向的文件的大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T08:06:16.313

这似乎是一个错误。如果用户专门将符号链接拖到应用程序，这是用户意图的明确声明，您希望可以访问符号链接和目标。事实上，我可以访问原始文件并读取其内容，但不能读取*其属性*。所以我提交了错误报告 #13143810。

**编辑：**我的错误报告已作为#12991152 的副本关闭，它实际上是“打开的”。

# ruby-on-rails - 嵌套模块和方法挂钩

> ID：14601867
> 
> 赞同：1
> 
> 时间：2013-01-30T10:34:06.540
> 
> 标签：ruby-on-rails, ruby

我是`ruby`（java背景）的新手，所以如果这是一个非常愚蠢的问题，我很抱歉。

我正在阅读一些关于模块的教程，它们看起来有点类似于静态类。我难以理解的一点是为什么你会做如下的事情：

```
module ExampleModule

  def self.included(base)
      base.extend(ClassMethods)
  end

  module ClassMethods
      def myMethod
      end
  end
end 
```

为什么不直接将方法`ClassMethods`放入`ExampleModule`并保存添加方法挂钩。我确定我错过了一些非常基本的东西，但我已经有一段时间了，所以我觉得有必要问一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:20:32.213

这是一个红宝石成语。当您想要一个模块时，它很有用：

*   向类添加一些实例方法
*   同时添加类方法/类似Java静态方法/

在同一时间

例子：

```
module ExampleModule
  def self.included(base)
    puts 'included'
    base.extend(ClassMethods)
  end

  def foo
    puts 'foo!'
  end

  module ClassMethods
    def bar
      puts 'bar!'
    end
  end
end

class ExampleClass
  include ExampleModule
end

ExampleClass.bar

ExampleClass.new.foo 
```

如果你只想添加类方法，你不需要这个习惯用法，你可以在你的模块中添加一个方法并“扩展”它而不是包含它。

在 Rails 上，这个习惯用法已经过时了，你应该改用 ActiveSupport::Concern。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:21:10.623

当类方法和实例方法都通过 ruby​​ 中的模块包含时，您在此处使用的模式很常见。它为您提供了只需编写的优势

```
include ExampleModule 
```

包括实例方法和扩展类方法，而不是

```
# include instance methods
include ExampleModule
# extend class methods
extend ExampleModule::ClassMethods 
```

所以，如果只是用一些方法来扩展类，我个人的偏好是`extend`直接使用。

```
module ExtensionAtClassLevel
  def bla
    puts 'foo'
  end
end

class A
  extend ExtensionAtClassLevel
end

A.bla #=> 'foo' 
```

如果同时添加了实例和类方法，我将使用您描述的包含挂钩。

一些 ruby​​ists 倾向于通过 include 钩子来使用 extend 到 pure `extend`，如果您只是像示例中那样添加类方法，这是没有理由的。

# c# - 具有 2 种行的列表框

> ID：14601875
> 
> 赞同：0
> 
> 时间：2013-01-30T10:34:37.603
> 
> 标签：c#, silverlight, windows-phone-7

我使用此代码在`ListBox`以下位置创建`XAML`：

```
<ListBox Margin="20,96,20,20" ItemsSource="{Binding Items}" Name="ResultsListBox" SelectionChanged="ResultsListBox_SelectionChanged">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding}" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

这是我插入字符串的代码（列表是`List`字符串的一个）：

```
ResultsListBox.ItemsSource = list; 
```

现在我希望可以使用包含以下项的数组创建此列表框： 字符串名称 字符串 id 字符串 imageurl

我可以将这个组合到列表中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:34:18.707

像这样创建一个类

```
public class SomeClass
{
   string name { get; set; }
   string id { get; set; }
   string imageurl { get; set; }
} 
```

然后像这样更改您的xaml

```
<ListBox Margin="20,96,20,20" ItemsSource="{Binding Items}" Name="ResultsListBox" SelectionChanged="ResultsListBox_SelectionChanged">
  <ListBox.ItemTemplate>
     <DataTemplate>
        <StackPanel Orientation="Horizontal">
           <TextBlock Text="{Binding name}" />
           <TextBlock Text="{Binding id}" /> <!-- ignore id if you don't want -->
           <TextBlock Text="{Binding imageurl}" />
        </StackPanel>
     </DataTemplate>
  </ListBox.ItemTemplate>
</ListBox> 
```

现在，生成一个集合或列表以绑定到列表框

```
List<SomeClass> list = new List<SomeClass>();
list.Add(new SomeClass() { name = "some name", id = "some id", imageurl = "some url" });
list.Add( .....);

ResultsListBox.ItemsSource = list; 
```

# jaxb - 使用没有 ns2 前缀的 JDK 的 JAXB

> ID：14601877
> 
> 赞同：12
> 
> 时间：2013-01-30T10:34:46.617
> 
> 标签：jaxb, xml-namespaces

在阅读了 Oracle 论坛、Stackoverflow、java.net 上所有关于此的帖子后，我终于在这里发帖了。我正在使用 JAXB 创建 XML 文件，但问题是它在我的元素之前添加了著名的**ns2**前缀，我已经尝试了所有没有人为我工作的解决方案。java -version 给出“1.6.0_37”

**解决方案 1：使用 package-info.java**

我在我的包中创建了包含 @Xml* 注释类的文件，其内容如下：

```
@XmlSchema(
    namespace = "http://mynamespace",
    elementFormDefault = XmlNsForm.QUALIFIED,
    xmlns = {
        @XmlNs(namespaceURI = "http://mynamespace", prefix = "")
    }
)
package com.mypackage;
import javax.xml.bind.annotation.XmlNs;
import javax.xml.bind.annotation.XmlNsForm;
import javax.xml.bind.annotation.XmlSchema; 
```

**解决方案 2：命名空间前缀映射器**

我创建了以下类并将映射器设置为编组器：

```
// Change mapper to avoid ns2 prefix on generated XML
class PreferredMapper extends NamespacePrefixMapper {
    @Override
    public String getPreferredPrefix(String namespaceUri, String suggestion, boolean requirePrefix) {
        return "";
    }
}
NamespacePrefixMapper mapper = new PreferredMapper();
try {
    marshaller.setProperty("com.sun.xml.bind.namespacePrefixMapper", mapper);
}
catch (PropertyException e) {
   logger.info("No property for com.sun.xml.bind.namespacePrefixMapper found : " + e.getMessage());
} 
```

对于*com.sun.xml.bind.namespacePrefixMapper*没有任何反应，对于*com.sun.xml.internal.bind.namespacePrefixMapper*，它会抛出异常。

我还在我的 pom 中添加了 maven 依赖项，但似乎 JRE 版本具有更高的优先级：

```
<dependency>
    <groupId>com.sun.xml.bind</groupId>
    <artifactId>jaxb-impl</artifactId>
    <version>2.2.4</version>
</dependency> 
```

你能帮我解决这个问题吗？

PS：出于构建原因，我不能直接将 jar 包含在我的类路径中。PS2：我不能使用 JDK7。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-28T15:33:30.857

没有 MOXy 的实施是不可能的。如果首选前缀是“”，则 JAXB 会生成一个新前缀。

我过去也遇到过同样的问题，我为每个 package-info.java 配置了每个前缀。

**NamespacePrefixMapper 在 JAVADOC 中说**

```
null if there's no prefered prefix for the namespace URI.
In this case, the system will generate a prefix for you.

Otherwise the system will try to use the returned prefix,
but generally there's no guarantee if the prefix will be
actually used or not.

return "" to map this namespace URI to the default namespace.
Again, there's no guarantee that this preference will be
honored.

If this method returns "" when requirePrefix=true, the return
value will be ignored and the system will generate one" 
```

**否则，如果使用包信息**

```
we know we can't bind to "", but we don't have any possible name at hand.
generate it here to avoid this namespace to be bound to "". 
```

我希望我已经给了你关于你的问题的所有答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-12T23:04:52.773

我今天遇到了同样的问题。生产机器有 Java 6，当我部署我的应用程序时，我得到了 ns2 前缀。这就是我解决它的方法。生产服务器只有 Java 1.6 补丁 21

1.  我确保我的包中有一个 package-info.java 文件，其中所有类都是使用 Jaxb 生成的。我检查了它，@XmlSchema 都是自动生成的，所以我没有搞砸这些。不要使用命名空间映射器，这让我很困惑。

2.  在我的 pom.xml 文件中，我添加了 jaxb-impl 依赖项：com.sun.xml.bind jaxb-impl 2.2.5-b04

    并将源和目标指定为 1.6。做了一个 Maven 干净安装和打包并部署到生产中，一切看起来都很好。下一步是确保生产机器升级到 Java 7。希望这会有所帮助:)

# java - Apache commons math PolynomialSolver：如何获得所有根？

> ID：14601880
> 
> 赞同：1
> 
> 时间：2013-01-30T10:34:53.617
> 
> 标签：java, polynomial-math, apache-commons-math

您好尝试使用 commons-math 的 PolynomialSolver 类的基本问题。

根据此处的文档[http://commons.apache.org/math/userguide/analysis.html](http://commons.apache.org/math/userguide/analysis.html)以及 API，求解方法通常采用以下形式

```
double c = solver.solve(100, function, 1.0, 5.0, AllowedSolution.LEFT_SIDE); 
```

我显然遗漏了一些东西，但鉴于代数的基本定理是 n 次多项式有 n 个根，我如何得到所有根？

根求解器返回一个双精度有什么好处？

我在此线程中注意到在[Java 中查找多项式的根，](https://stackoverflow.com/questions/13805644/finding-roots-of-polynomial-in-java)解决方案中提供的方法返回一个复数数组。这是我所期望的，所以有人可以解释为什么公共数学多项式求解器返回一个双根吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:26:42.907

这些数值算法中的大多数都在通用函数（即不一定是多项式）上运行，并且很少对它们做出假设。如果我们不知道给定函数的确切性质是什么，我们甚至不能指望推断它可能有多少根。

那里的一些算法做出了额外的假设，即给定的函数是可微的。这使它们更快，但需要您提供一些额外的信息，例如派生值，因此您不能再将它们用于任何功能。

LaguerreSolver 额外假设给定函数是多项式。在这种情况下，是否可以找到所有根，因此可以使用 solveAllComplex() 方法。但它是唯一专门研究多项式的算法。所有其他算法都更加通用。

# java - 在 BufferedImage (Java) 中查找红色的平均值

> ID：14601886
> 
> 赞同：0
> 
> 时间：2013-01-30T10:35:09.633
> 
> 标签：java, rgb

我想找到 MyImage 的平均红色 RGB 值（扩展 BufferedImage）。我将图像中每个像素的红色值保存到数组 red[] 中。最后，我想将这些 ut 相加以找到红色的平均值。但是当我在 MyImage 上运行这段代码时，它只打印 0。我怎样才能让这个方法正常工作？（此处未包含的代码可以正常工作）

```
public class MyImage extends BufferedImage {

    public MyImage(int width, int height, int imageType) {
        super(width, height, imageType);
    }

    public void findAverageRedValue(){

        int height = this.getHeight();
        int width = this.getWidth();
        int[] red = new int[height*width];

        Map m = new HashMap();
        for(int i=0; i < width ; i++)
        {
            for(int j=0; j < height ; j++)
            {
                ColorModel colorModel = this.getColorModel();
                int rCol = colorModel.getRed(j*i);
                red[red.length - 1] = rCol;
            }               
        }

        int sum = 0;
        for(int i = 0; i < red.length; i++)
            sum += red[i];

        int averageRed = sum/red.length;
        System.out.println(averageRed);
    }        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:39:52.157

您将数组的元素分配为：

```
red[red.length - 1] = rCol; 
```

在所有可能的情况下，这将只分配数组的最后一个元素。数组的长度属性不像`size()`集合的；它是一个静态值，基于数组的初始化维度。

因此，除了一个数组条目之外的所有条目都将为零。因此，最后，`sum`将在 0 到 255 之间 - 当除以（可能）更大的数字时，结果为零。（这里可能存在一个问题，因为您正在进行整数除法，但这可能并不重要）。

要解决此问题，您需要更改分配给的数组索引。您可以为数组索引保留一个单独的计数器 - 或者，利用现有的`i`和`j`做：

```
red[i * width + j] = rCol; 
```

无论哪种方式，这都会将每个像素的红色分量放入一个*单独*的数组位置，从而使您能够正确地对它们求和。

[整数除法](http://mindprod.com/jgloss/division.html)是 Java 中的一个潜在问题，这就是你最后要做的。通过 获得小数平均值可能会更好`sum / (float)red.length`，但只要您知道发生了什么并且您乐于截断到最接近的整数，这可能没有必要。

# git - 菜鸟 Git 问题

> ID：14601890
> 
> 赞同：-3
> 
> 时间：2013-01-30T10:35:28.890
> 
> 标签：git, git-clone

安装 git 后，我​​正在与另一个开发人员一起使用它。我不确定如何使用 git，但由于某种原因，它一直告诉我我感兴趣的文件夹在我执行“ `git sync`”之后已经同步。我不确定我做错了什么，而且 git 的事情对我来说不是很清楚。我想删除所有子文件夹（全部带有红色标记和绿色标记）并简单地克隆项目，使其与网络上的内容同步。我怎样才能做到这一点？（使用 bitbucket.org）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:02:10.470

我不确定你想做什么。如果您已经克隆了存储库，则无需同步它（实际上通常您不必这样做）。我建议你阅读[Git Reference](http://gitref.org/)，这是一个简短的指南，你将在其中学习有关 git 的基础知识以及如何每天使用它。

# asp.net-mvc - ASP.net MVC4 和 Razor：得到 403 错误

> ID：14601891
> 
> 赞同：2
> 
> 时间：2013-01-30T10:35:32.957
> 
> 标签：asp.net-mvc, iis, razor, http-status-code-403

我有同样的问题： [403 Forbidden when Deploying asp.net 4.0 MVC 3 site to IIS 7](https://stackoverflow.com/questions/10166528/403-forbidden-when-deploying-asp-net-4-0-mvc-3-site-to-iis-7)

我的配置相同。当我在我的电脑上工作并加热`F5`时，没关系，该网站通过以下网址可见：`localhost:8754`

但是当我尝试通过网络继续它时，我有一个`403`错误。

我正在运行`IIS7`，我的池应用程序是`4.0`.

我的网站是由`VS2012`. 我没有改变它的任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:39:36.523

将此添加到您的 web.config

```
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"></modules>
    <handlers>
      <remove name="UrlRoutingHandler"/>
    </handlers>
  </system.webServer> 
```

[http://www.iis.net/learn/get-started/introduction-to-iis/iis-modules-overview#Precondition](http://www.iis.net/learn/get-started/introduction-to-iis/iis-modules-overview#Precondition)

# c# - 如何从一个弹出窗口导航到另一个弹出窗口

> ID：14601892
> 
> 赞同：1
> 
> 时间：2013-01-30T10:35:33.600
> 
> 标签：c#, javascript

我有一个弹出窗口

```
function validateDropDown(obj){   
 if(document.getElementById(obj).value=='4')   
 {    alert('Do you want to view Service Details?');    
 return false;   
 }   
 } 
```

现在，当弹出窗口询问“你想查看服务详细信息吗？” 如果我同意，那么它应该带我到另一页。请帮助我如何合并它，

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:36:55.487

如果需要，您需要返回 true `postback`，使用确认而不是`alert`获取用户选择。`confirm`如果是，将返回 true，否则返回 false。如果要打开新页面，请使用[window.open](http://www.w3schools.com/jsref/met_win_open.asp)功能。

```
function validateDropDown(obj){   
  if(document.getElementById(obj).value=='4')   
  {   
      choice = confirm('Do you want to view Service Details?'); 
      if(choice)
         window.open("http://somesite/newWindow.aspx", "_blank", "height=500, width=575, left=150,top=150, " +"location=no, menubar=no, resizable=no, " + "scrollbars=no, titlebar=no, toolbar=no", true);   
      return false;
  }   
} 
```

# asp.net - 电话号码正则表达式

> ID：14601907
> 
> 赞同：1
> 
> 时间：2013-01-30T10:36:10.017
> 
> 标签：asp.net, regex, phone-number

我需要电话号码的正则表达式。

（从`0`到`9`）（共 10 位）
示例：`"0123456789"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:37:24.773

这很简单：

```
\d{10} 
```

`\d`允许数字，并`{10}`指示电话号码的长度必须恰好为 10 位。

正如您在评论中提到的，您还需要一个正则表达式`012-345-6789`，`(\d{3}-){2}\d{4}`可以完成这项工作。

`(\d{3}-)`将验证前 3 位数字，并且 a`-`

`(\d{3}-){2}`将查找上述组的两次出现。因此将验证：012-345-

最后`\d{4}`将查找最后 4 位数字

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T10:38:13.193

使用此模式并匹配它：

```
\d{10} 
```

`\d`: 只有数字。

`{n}`: 出现次数。

您可以参考这篇文章了解更多信息。[电话号码的正则表达式](https://stackoverflow.com/questions/123559/a-comprehensive-regex-for-phone-number-validation)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T10:51:25.500

通常一个 \d{10} 会做的伎俩。但这是懒人的验证方式，因为“0000000000”会传递一个有效条目。

但是，如果您对域和规则有更多了解（我的意思是，如果您的电话号码属于特定国家/地区）并且您想确保该号码符合当地规则，那么您可以更具体一点。

例如，如果所有数字都以前导零开头，您可以这样做

0\d{9}

或者，如果前缀是众所周知的......您可以制作一个表达式，允许电话号码仅以某些前缀开头。

(017|016|019|012)\d{7}

这将只允许列表中的那些前缀以及其他 7 位数字。

# c# - 如何设置默认数据类型

> ID：14601908
> 
> 赞同：2
> 
> 时间：2013-01-30T10:36:11.683
> 
> 标签：c#, silverlight, xaml, silverlight-4.0, silverlight-5.0

我有一个 ItemsControl，其中除类型之外的所有项目`AType`都应具有相同的视图。我怎么能那样做？

我试过`object`了，`DataType`但它是被禁止的（下面有简化的例子）：

```
<ItemsControl>
    <ItemsControl.Resources>
        <DataTemplate DataType="AType">                                                
            <TextBox />                                             
        </DataTemplate>
        <DataTemplate DataType="System:Object">
            <Border>     
                <TextBlock Text="{Binding}" />                                           
            </Border>
        </DataTemplate>
    </ItemsControl.Resources>                                    
</ItemsControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:48:49.883

最好的办法是使用一个模板选择器，[就像这个](http://www.codeproject.com/Articles/92439/Silverlight-DataTemplateSelector)

这样您就可以根据您喜欢的任何条件轻松指定模板。

# c++ - << 运算符重载作为 C++ 中的类方法

> ID：14601915
> 
> 赞同：1
> 
> 时间：2013-01-30T10:36:43.120
> 
> 标签：c++, operator-overloading

我想为我的类 Complex 重载 << 运算符。

原型如下：

```
void Complex::operator << (ostream &out)
{
    out << "The number is: (" << re <<", " << im <<")."<<endl;
} 
```

它有效，但我必须这样称呼它：object << cout 用于标准输出。我该怎么做才能让它向后工作，比如 cout << object?

我知道'this'指针默认是发送给方法的第一个参数，所以这就是二进制运算符只能工作的原因 obj << ostream。我将它作为全局函数重载，没有问题。

有没有办法将 << 运算符重载为方法并将其称为 ostream << obj？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:46:09.150

我只会使用通常的 C++ 模式的*free function*。如果你想让类的私有数据成员对它可见，你可以让它`friend`进入你的类，但通常复数类会公开实部和虚部系数的公共 getter。`Complex``Complex`

```
class Complex
{
  ....

   friend std::ostream& operator<<(std::ostream &out, const Complex& c);
private:
   double re;
   double im;
};

inline std::ostream& operator<<(std::ostream &out, const Complex& c)
{
    out << "The number is: (" << c.re << ", " << c.im << ").\n";
    return out;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:38:29.827

您可以编写一个自由支架`operator<<`功能，尝试：

```
std::ostream& operator<< (std::ostream &out, const Complex& cm)
{
    out << "The number is: (" << cm.re <<", " << cm.im <<")." << std::endl;
    return out;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:42:54.207

您可以定义一个全局函数：

```
void operator << (ostream& out, const Complex& complex)
{
     complex.operator<<(out);
} 
```

# c# - 值更改时Datagrid更改单元格颜色

> ID：14601919
> 
> 赞同：2
> 
> 时间：2013-01-30T10:36:49.043
> 
> 标签：c#, wpf, datagrid, colors, cell

我知道在使用转换器填充数据网格时如何更改单元格的文本颜色，但是在单元格值更改为某个值后，我找不到与更改文本颜色相关的任何内容。我需要从代码中执行此操作，因为我需要检查的值并不总是相同的。

```
public class NameToBrushConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        DataGridCell cell = values[0] as DataGridCell;
        Session_Counter.CoreWindow.BindableDynamicDictionary row = values[1] as Session_Counter.CoreWindow.BindableDynamicDictionary;
        CoreWindow.Fields field = CoreWindow.fields.Find(o => o.name == cell.Column.Header.ToString());

        if (cell != null && row != null && field.color != null)
        {
            foreach (string str in field.color)
            {
                List<string> str2 = new List<string>(str.Split(new string[] { "<&p>" }, StringSplitOptions.None).ToList());
                if (str2[0].ToString().StartsWith("VALUE = "))
                {
                    if (str2[0].Substring(8) == row[cell.Column.Header.ToString()].ToString())
                        return new SolidColorBrush((Color)ColorConverter.ConvertFromString(str2[5]));
                }
            }
        }

        return Brushes.Black;
    }
    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

XAML：

```
<DataGrid AutoGenerateColumns="False" Name="dgwDataMain" CellEditEnding="dgwDataMain_CellEditEnding" SelectionChanged="dgwDataMain_SelectionChanged" PreviewKeyDown="dgwDataMain_PreviewKeyDown" CanUserAddRows="False" Grid.Row="2" Width="Auto" MaxColumnWidth="300" Height="Auto" CanUserReorderColumns="False" CanUserResizeRows="False" >
                        <DataGrid.CellStyle>
                            <Style TargetType="DataGridCell">
                                <Setter Property="Foreground">
                                    <Setter.Value>
                                        <MultiBinding Converter="{StaticResource nameToBC}">
                                            <Binding RelativeSource="{RelativeSource Self}"/>
                                            <Binding Path="."/>
                                        </MultiBinding>
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <Trigger Property="DataGridCell.IsSelected" Value="True">
                                        <Setter Property="Background" Value="#CCDAFF" />
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </DataGrid.CellStyle>
                    </DataGrid> 
```

# gedit - 如何将 gedit 设置为“继续我离开的地方”？

> ID：14601923
> 
> 赞同：1
> 
> 时间：2013-01-30T10:36:59.530
> 
> 标签：gedit, gedit-plugin

如何将 gedit 设置为“继续我离开的地方”，打开之前关闭的所有文件？任何gedit插件？

我至少知道一个技巧，为`gedit < file1 > < file2 > ...`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:42:15.123

我知道的两个用于执行此还原选项卡插件的插件和 Session Saver 插件

您可以在此处找到还原选项卡的链接：[https ://live.gnome.org/Gedit/Plugins#third_party](https://live.gnome.org/Gedit/Plugins#third_party)

会话保护程序带有来自 Ubuntu 存储库的 gedit-plugins 包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-20T16:12:16.390

现在接受的答案在 2021 年对我不起作用，但我发现这个插件在 gedit 3.38.0 (Ubuntu 20.10) 中工作。

死者：[https ://github.com/jefferyto/gedit-ex-mortis](https://github.com/jefferyto/gedit-ex-mortis)

# magento-1.7 - 当magento商店发送邮件时触发哪个事件？

> ID：14601927
> 
> 赞同：0
> 
> 时间：2013-01-30T10:37:07.473
> 
> 标签：magento-1.7

我想存储由 magento 商店发送的所有电子邮件信息。为此，我想在 magento 商店发送电子邮件后触发一个事件。有很多这样的动作，比如向用户发送电子邮件时喜欢忘记密码、注册、时事通讯订阅、愿望清单分享等。我心中有一个想法，如果 magento 中存在这样的事件，比如 email_send_after，我可以在观察者文件中添加我的 custum 编码，并让该事件是否触发。但我不知道有没有什么活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:52:56.383

[您可能对此](http://www.emaildirect.com/magento)感兴趣，但您始终可以按照[此处](http://www.magentocommerce.com/knowledge-base/entry/configuration-general-store-email-addresses)所述配置商店电子邮件部分另外查看此[博客文章](http://inchoo.net/ecommerce/magento/last-things-first/)- v 有帮助

# android - 在 Android 中的 Spinner 上设置古吉拉特语文本

> ID：14601935
> 
> 赞同：7
> 
> 时间：2013-01-30T10:37:34.943
> 
> 标签：android, fonts, spinner

我正在用古吉拉特语开发一个 Android 应用程序，需要在 Spinner 小部件上设置古吉拉特语文本。[所以，我从这里](http://polyclefsoftware.blogspot.in/2009/06/how-to-change-your-spinner-typeface.html)学习了如何在 Spinner 上设置自定义字体。

但问题是我得到的是盒子而不是实际的文本。我的微调器文本来自字符串资源。附上我的代码。

```
public class SpinnerExActivity extends Activity {
Spinner mySpinner; 
Typeface myFont;

String[] items; 
MyArrayAdapter ma;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_spinner_ex);
    mySpinner = (Spinner) findViewById(R.id.spinner1);
     items=getResources().getStringArray(R.array.items);
     myFont = Typeface.createFromAsset(getAssets(), "fonts/SHRUTIB.TTF");
     ma=new MyArrayAdapter(this, R.layout.my_spinner_style); 
     ma.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

}
private class MyArrayAdapter extends ArrayAdapter {

    public MyArrayAdapter(Context context, int textViewResourceId) {
    super(context, textViewResourceId);
    }

    public TextView getView(int position, View convertView, ViewGroup parent) {
    TextView v = (TextView) super.getView(position, convertView, parent);
    v.setTypeface(myFont);
    v.setText(items[position]);
    return v;
    }

    public TextView getDropDownView(int position, View convertView, ViewGroup parent) {
    TextView v = (TextView) super.getView(position, convertView, parent);
    v.setTypeface(myFont);
    return v;
    }

    } 
```

当我在模拟器上尝试这个时，我得到了盒子。但是当我在平板电脑上尝试时，我什么也没得到。

任何帮助都是不言而喻的。

**编辑** 这个作品:: 感谢[这个。](https://stackoverflow.com/questions/5483495/how-to-set-font-custom-font-to-spinner-text-programmatically)

```
public class SpinnerExActivity extends Activity {
Spinner mySpinner; 
Typeface myFont;

String[] items; 

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_spinner_ex);
    mySpinner = (Spinner) findViewById(R.id.spinner1);
     items=getResources().getStringArray(R.array.items);
     myFont = Typeface.createFromAsset(getAssets(), "fonts/SHRUTIB.TTF");

     ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
             R.layout.my_spinner_style, items) {

  public View getView(int position, View convertView, ViewGroup parent) {
          View v = super.getView(position, convertView, parent);

          Typeface externalFont=Typeface.createFromAsset(getAssets(), "fonts/SHRUTIB.TTF");
          ((TextView) v).setTypeface(externalFont);
          ((TextView) v).setText(items[position]);
          ((TextView) v).setTextColor(Color.BLACK);
          return v;
  }

  public View getDropDownView(int position,  View convertView,  ViewGroup parent) {
           View v =super.getDropDownView(position, convertView, parent);

          Typeface externalFont=Typeface.createFromAsset(getAssets(), "fonts/SHRUTIB.TTF");
          ((TextView) v).setTypeface(externalFont);
          ((TextView) v).setText(items[position]);

          return v;
   }
   };

     adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);                                 
     mySpinner.setAdapter(adapter);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T05:39:38.187

你必须看看这个：

![在此处输入图像描述](../Images/3892161a15b734cd0109f503c95f9807.png)

检查以下代码：

```
package com.example.main.util;

import android.app.Activity;
import android.graphics.Typeface;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Spinner;
import android.widget.TextView;

import com.example.testapp.R;

public class testActivity extends Activity {

    private static final String[] COUNTRIES = new String[] { "Belgium",
            "France", "Italy", "Germany", "Spain" };
    private Spinner mySpinner;
    private Typeface myFont;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.newlay);

        mySpinner = (Spinner) findViewById(R.id.spinner1);
        myFont = Typeface.createFromAsset(getAssets(), "gujarti.ttf");
        MyArrayAdapter ma = new MyArrayAdapter(this);
        mySpinner.setAdapter(ma);
    }

    private class MyArrayAdapter extends BaseAdapter {

        private LayoutInflater mInflater;

        public MyArrayAdapter(testActivity con) {
            // TODO Auto-generated constructor stub
            mInflater = LayoutInflater.from(con);
        }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return COUNTRIES.length;
        }

        @Override
        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            final ListContent holder;
            View v = convertView;
            if (v == null) {
                v = mInflater.inflate(R.layout.my_spinner_style, null);
                holder = new ListContent();

                holder.name = (TextView) v.findViewById(R.id.textView1);

                v.setTag(holder);
            } else {

                holder = (ListContent) v.getTag();
            }

            holder.name.setTypeface(myFont);
            holder.name.setText("" + COUNTRIES[position]);

            return v;
        }

    }

    static class ListContent {

        TextView name;

    }
} 
```

**好运！**

# objective-c - 如何在 IOS5 的自动完成结果中突出显示搜索字符串？

> ID：14601936
> 
> 赞同：2
> 
> 时间：2013-01-30T10:37:36.770
> 
> 标签：objective-c, ios5, xcode4.5

谷歌自动完成会加粗我们搜索的内容

例如：如果我们搜索*地狱*，我们会看到“ **hell** o”

我想我需要属性字符串，所以我的代码是：

```
- (NSMutableAttributedString*) highlightSearchString:(NSString*)substringToHighlight{

    NSMutableAttributedString * mutableAttributedString = [[ NSMutableAttributedString alloc]initWithString:self];
    NSUInteger count = 0, length = [mutableAttributedString length];
    NSRange range = NSMakeRange(0, length);

    count = 0,
    length = [mutableAttributedString length];
    range = NSMakeRange(0, length);
    while(range.location != NSNotFound)
    {
        range = [[mutableAttributedString string] rangeOfString:substringToHighlight options:0 range:range];
        if(range.location != NSNotFound) {

            //[mutableAttributedString setTextColor:[UIColor blueColor] range:NSMakeRange(range.location, [word length])];
            NSString *boldFontName = [[UIFont boldSystemFontOfSize:12] fontName];
            NSDictionary * dict = @{NSFontAttributeName:boldFontName};
            NSRange  rangeHighlight = NSMakeRange(range.location, substringToHighlight.length);
            [mutableAttributedString setAttributes:dict range:rangeHighlight];
            range = NSMakeRange(range.location + range.length, length - (range.location + range.length));
            count++;
        }
    }
    return mutableAttributedString;
} 
```

但它不起作用，因为`NSFontAttributeName`仅在`iOS6`.

之后我需要更新 tableViewCell

```
cell.textLabel.text=text; 
```

有一些利用归属文本的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:45:44.223

只需使用字体的 CoreText 定义：

```
UIFont *font = [UIFont boldSystemFontOfSize:12]; 
CTFontRef ctFontRef = CTFontCreateWithName((__bridge CFStringRef)font.fontName, font.pointSize, NULL);
NSDictionary * dict = @{(NSString *)kCTFontAttributeName : (__bridge id) ctFontRef}; 
```

对于秒问题：

`UILabel`iOS SDK 中的默认设置仅支持`NSAttributedString`iOS 6。因此，在 iOS 5 中，您要么必须`NSAttributedString`使用 CoreText 绘制自己，要么获取一些支持的第三方标签，`NSAttributedString`例如：[`TTTAttributedLabel`](https://github.com/mattt/TTTAttributedLabel)。

# haskell - cabal install 在安装shakespeare-css 时失败，并出现Haskell 错误

> ID：14601939
> 
> 赞同：1
> 
> 时间：2013-01-30T10:37:38.913
> 
> 标签：haskell, cabal, cabal-install

我对 Haskell 平台非常陌生，遇到的麻烦比我希望的要多得多。

我想我越来越近了，因为一切都很顺利，直到 cabal 尝试安装`shakespeare-css`和派生。

我正在使用`Ubuntu 11.10`with`ghc-7.4.2`和 cabal-install`1.16.0.2`

当我输入命令

```
~/.cabal/bin$ ./cabal -v install derive 
```

我得到以下输出

```
Reading available packages...
Choosing modular solver.
Resolving dependencies...
Ready to install derive-2.5.11
Waiting for install task to finish...
Extracting
/home/tamarin/.cabal/packages/hackage.haskell.org/derive/2.5.11/derive-2.5.11.tar.gz
to /tmp/derive-2.5.11-29920...
Updating derive.cabal with the latest revision from the index.
Configuring derive-2.5.11...
Dependency base ==4.5.1.0: using base-4.5.1.0
Dependency bytestring ==0.9.2.1: using bytestring-0.9.2.1
Dependency containers ==0.4.2.1: using containers-0.4.2.1
Dependency directory ==1.1.0.2: using directory-1.1.0.2
Dependency filepath ==1.3.0.0: using filepath-1.3.0.0
Dependency haskell-src-exts ==1.13.5: using haskell-src-exts-1.13.5
Dependency pretty ==1.1.1.0: using pretty-1.1.1.0
Dependency process ==1.1.0.1: using process-1.1.0.1
Dependency syb ==0.3.7: using syb-0.3.7
Dependency template-haskell ==2.8.0.0: using template-haskell-2.8.0.0
Dependency transformers ==0.2.2.0: using transformers-0.2.2.0
Dependency uniplate ==1.6.10: using uniplate-1.6.10
Using Cabal-1.16.0.3 compiled by ghc-7.0
Using compiler: ghc-7.4.2
Using install prefix: /home/tamarin/.cabal
Binaries installed in: /home/tamarin/.cabal/bin
Libraries installed in: /home/tamarin/.cabal/lib/derive-2.5.11/ghc-7.4.2
Private binaries installed in: /home/tamarin/.cabal/libexec
Data files installed in: /home/tamarin/.cabal/share/derive-2.5.11
Documentation installed in: /home/tamarin/.cabal/share/doc/derive-2.5.11
Using alex version 2.3.5 found on system at: /usr/bin/alex
Using ar found on system at: /usr/bin/ar
No c2hs found
Using cpphs version 1.16 found on system at: /home/tamarin/.cabal/bin/cpphs
No ffihugs found
Using gcc version 4.6.1 found on system at: /usr/bin/gcc
Using ghc version 7.4.2 found on system at: /usr/local/bin/ghc
Using ghc-pkg version 7.4.2 found on system at: /usr/local/bin/ghc-pkg
No greencard found
Using haddock version 2.11.0 found on system at: /usr/local/bin/haddock
Using happy version 1.18.6 found on system at: /usr/bin/happy
No hmake found
Using hpc version 0.6 found on system at: /usr/local/bin/hpc
Using hsc2hs version 0.67 found on system at: /usr/local/bin/hsc2hs
No hscolour found
No hugs found
No jhc found
Using ld found on system at: /usr/bin/ld
No lhc found
No lhc-pkg found
No nhc98 found
Using pkg-config version 0.26 found on system at: /usr/bin/pkg-config
Using ranlib found on system at: /usr/bin/ranlib
Using strip found on system at: /usr/bin/strip
Using tar found on system at: /bin/tar
No uhc found
creating dist/build
creating dist/build/autogen
Building derive-2.5.11...
Preprocessing library derive-2.5.11...
Building library...
creating dist/build
/usr/local/bin/ghc --make -fbuilding-cabal-package -O -odir dist/build -hidir dist/build -stubdir dist/build -i -idist/build -i. -idist/build/autogen -Idist/build/autogen -Idist/build -optP-include -optPdist/build/autogen/cabal_macros.h -package-name derive-2.5.11 -hide-all-packages -package-conf dist/package.conf.inplace -package-id base-4.5.1.0-8a237511fef48b8f180babb0282b28e3 -package-id bytestring-0.9.2.1-ac1c20630117630ba32abcac9cdbbce8 -package-id containers-0.4.2.1-59c8844d535e4a3bdd1569d60336e3b7 -package-id directory-1.1.0.2-ef4eca075618605e644c6184b111f96f -package-id filepath-1.3.0.0-954c43b4f109cbd4121f1231c14d5cff -package-id haskell-src-exts-1.13.5-3e91c3c2a4a723d046d79dc6b2b3a8bd -package-id pretty-1.1.1.0-867dcdeb02592f3d2a707618561c7b86 -package-id process-1.1.0.1-bd6d91995b2ae2680669549cb63f15b4 -package-id syb-0.3.7-a269c050536d4890f37a20513844e800 -package-id template-haskell-2.8.0.0-785b225a803e6279a067560929c36633 -package-id transformers-0.2.2.0-7f9cf1f6994d36648f58249fe35d1cf2 -package-id uniplate-1.6.10-e06ac94679c647f08eee64b44109aecc -XHaskell98 Data.DeriveMain Data.DeriveTH Data.DeriveDSL Data.Derive.All Data.Derive.DSL.Apply Data.Derive.DSL.Derive Data.Derive.DSL.DSL Data.Derive.DSL.HSE Data.Derive.DSL.SYB Data.Derive.Instance.Arities Data.Derive.Class.Arities Data.Derive.Class.Default Language.Haskell Language.Haskell.Convert Language.Haskell.TH.All Language.Haskell.TH.Compat Language.Haskell.TH.Data Language.Haskell.TH.ExpandSynonym Language.Haskell.TH.FixedPpr Language.Haskell.TH.Helper Language.Haskell.TH.Peephole Data.Derive.Arbitrary Data.Derive.ArbitraryOld Data.Derive.Arities Data.Derive.Binary Data.Derive.BinaryDefer Data.Derive.Bounded Data.Derive.Data Data.Derive.DataAbstract Data.Derive.Default Data.Derive.Enum Data.Derive.EnumCyclic Data.Derive.Eq Data.Derive.Fold Data.Derive.Foldable Data.Derive.From Data.Derive.Functor Data.Derive.Has Data.Derive.Is Data.Derive.JSON Data.Derive.LazySet Data.Derive.Lens Data.Derive.Monoid Data.Derive.NFData Data.Derive.Ord Data.Derive.Read Data.Derive.Ref Data.Derive.Serial Data.Derive.Serialize Data.Derive.Set Data.Derive.Show Data.Derive.Traversable Data.Derive.Typeable Data.Derive.UniplateDirect Data.Derive.UniplateTypeable Data.Derive.Update Data.Derive.Internal.Derivation Data.Derive.Internal.Instance Data.Derive.Internal.Traversal Derive.Main Derive.Derivation Derive.Flags Derive.Generate Derive.Test Derive.Utils
[ 1 of 65] Compiling Language.Haskell.TH.Compat ( Language/Haskell/TH/Compat.hs, dist/build/Language/Haskell/TH/Compat.o )
[ 2 of 65] Compiling Language.Haskell.TH.Data ( Language/Haskell/TH/Data.hs, dist/build/Language/Haskell/TH/Data.o )
[ 3 of 65] Compiling Language.Haskell.TH.ExpandSynonym ( Language/Haskell/TH/ExpandSynonym.hs, dist/build/Language/Haskell/TH/ExpandSynonym.o )
[ 4 of 65] Compiling Language.Haskell.TH.FixedPpr ( Language/Haskell/TH/FixedPpr.hs, dist/build/Language/Haskell/TH/FixedPpr.o )

Language/Haskell/TH/FixedPpr.hs:404:9:
    Not in scope: data constructor `StarK'
    Perhaps you meant `StarT' (imported from Language.Haskell.TH.Syntax)

Language/Haskell/TH/FixedPpr.hs:405:10:
    Not in scope: data constructor `ArrowK'
    Perhaps you meant `ArrowT' (imported from Language.Haskell.TH.Syntax)
Failed to install derive-2.5.11
World file is already up to date.
cabal: Error: some packages failed to install:
derive-2.5.11 failed during the building phase. The exception was:
ExitFailure 1 
```

在我看来，这似乎是一个奇怪的编译错误

至于安装shakespeare-css

```
./cabal -v install shakespeare-css 
```

我明白了

```
Reading available packages...
Choosing modular solver.
Resolving dependencies...
Ready to install shakespeare-css-1.0.2
Waiting for install task to finish...
Extracting
/home/tamarin/.cabal/packages/hackage.haskell.org/shakespeare-css/1.0.2/shakespeare-css-1.0.2.tar.gz
to /tmp/shakespeare-css-1.0.2-2963...
Updating shakespeare-css.cabal with the latest revision from the index.
Configuring shakespeare-css-1.0.2...
Dependency base ==4.5.1.0: using base-4.5.1.0
Dependency parsec ==3.1.3: using parsec-3.1.3
Dependency process ==1.1.0.1: using process-1.1.0.1
Dependency shakespeare ==1.0.3: using shakespeare-1.0.3
Dependency template-haskell ==2.8.0.0: using template-haskell-2.8.0.0
Dependency text ==0.11.2.3: using text-0.11.2.3
Dependency transformers ==0.2.2.0: using transformers-0.2.2.0
Using Cabal-1.16.0.3 compiled by ghc-7.0
Using compiler: ghc-7.4.2
Using install prefix: /home/tamarin/.cabal
Binaries installed in: /home/tamarin/.cabal/bin
Libraries installed in:
/home/tamarin/.cabal/lib/shakespeare-css-1.0.2/ghc-7.4.2
Private binaries installed in: /home/tamarin/.cabal/libexec
Data files installed in: /home/tamarin/.cabal/share/shakespeare-css-1.0.2
Documentation installed in:
/home/tamarin/.cabal/share/doc/shakespeare-css-1.0.2
Using alex version 2.3.5 found on system at: /usr/bin/alex
Using ar found on system at: /usr/bin/ar
No c2hs found
Using cpphs version 1.16 found on system at: /home/tamarin/.cabal/bin/cpphs
No ffihugs found
Using gcc version 4.6.1 found on system at: /usr/bin/gcc
Using ghc version 7.4.2 found on system at: /usr/local/bin/ghc
Using ghc-pkg version 7.4.2 found on system at: /usr/local/bin/ghc-pkg
No greencard found
Using haddock version 2.11.0 found on system at: /usr/local/bin/haddock
Using happy version 1.18.6 found on system at: /usr/bin/happy
No hmake found
Using hpc version 0.6 found on system at: /usr/local/bin/hpc
Using hsc2hs version 0.67 found on system at: /usr/local/bin/hsc2hs
No hscolour found
No hugs found
No jhc found
Using ld found on system at: /usr/bin/ld
No lhc found
No lhc-pkg found
No nhc98 found
Using pkg-config version 0.26 found on system at: /usr/bin/pkg-config
Using ranlib found on system at: /usr/bin/ranlib
Using strip found on system at: /usr/bin/strip
Using tar found on system at: /bin/tar
No uhc found
creating dist/build
creating dist/build/autogen
Building shakespeare-css-1.0.2...
Preprocessing library shakespeare-css-1.0.2...
Building library...
creating dist/build
/usr/local/bin/ghc --make -fbuilding-cabal-package -O -odir dist/build -hidir dist/build -stubdir dist/build -i -idist/build -i. -idist/build/autogen -Idist/build/autogen -Idist/build -optP-DGHC_7_4 -optP-include -optPdist/build/autogen/cabal_macros.h -package-name shakespeare-css-1.0.2 -hide-all-packages -package-conf dist/package.conf.inplace -package-id base-4.5.1.0-8a237511fef48b8f180babb0282b28e3 -package-id parsec-3.1.3-f18640e50f9a9d34865e30e42bb377e6 -package-id process-1.1.0.1-bd6d91995b2ae2680669549cb63f15b4 -package-id shakespeare-1.0.3-a36c3be30cdeba4668fd1e4115e40bde -package-id template-haskell-2.8.0.0-785b225a803e6279a067560929c36633 -package-id text-0.11.2.3-7427aa3daf930bd36d392386f0ef5048 -package-id transformers-0.2.2.0-7f9cf1f6994d36648f58249fe35d1cf2 -XHaskell98 Text.Cassius Text.Lucius Text.MkSizeType Text.Css Text.IndentToBrace Text.CssCommon -Wall
[1 of 6] Compiling Text.MkSizeType  ( Text/MkSizeType.hs, dist/build/Text/MkSizeType.o )
[2 of 6] Compiling Text.IndentToBrace ( Text/IndentToBrace.hs, dist/build/Text/IndentToBrace.o )
[3 of 6] Compiling Text.Css         ( Text/Css.hs, dist/build/Text/Css.o )
[4 of 6] Compiling Text.CssCommon   ( Text/CssCommon.hs, dist/build/Text/CssCommon.o )
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
Loading package bytestring-0.9.2.1 ... linking ... done.
Loading package transformers-0.2.2.0 ... linking ... done.
Loading package mtl-2.0.1.0 ... linking ... done.
Loading package array-0.4.0.0 ... linking ... done.
Loading package deepseq-1.3.0.0 ... linking ... done.
Loading package text-0.11.2.3 ... linking ... done.
Loading package parsec-3.1.3 ... linking ... done.
Loading package filepath-1.3.0.0 ... linking ... done.
Loading package old-locale-1.0.0.4 ... linking ... done.
Loading package old-time-1.1.0.0 ... linking ... done.
Loading package unix-2.5.1.1 ... linking ... done.
Loading package directory-1.1.0.2 ... linking ... done.
Loading package process-1.1.0.1 ... linking ... done.
Loading package containers-0.4.2.1 ... linking ... done.
Loading package pretty-1.1.1.0 ... linking ... done.
Loading package template-haskell ... linking ... done.
Loading package shakespeare-1.0.3 ... linking ... done.

Text/CssCommon.hs:159:1:Failed to install shakespeare-css-1.0.2
World file is already up to date.
cabal: Error: some packages failed to install:
shakespeare-css-1.0.2 failed during the building phase. The exception was:
ExitFailure 11 
```

这里有什么问题？

# sql-server-2005 - 如何使用查找和替换在 Access 中插入 NULL 字段

> ID：14601941
> 
> 赞同：0
> 
> 时间：2013-01-30T10:37:42.807
> 
> 标签：sql-server-2005, ms-access-2007

我想知道是否可以使用查找和替换将 NULL 值添加到 Access 中的空字段中。我正在将我的 Access DB 移动到 SQL，但是当复制到 SQL 时，Access 中的空字段没有写入 NULL，我必须将 NULL 复制并粘贴到 SQL 中的所有空字段中。

有没有办法使用查找和替换来使空字段成为 NULL 字段？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:47:07.747

导入后运行此查询

```
 UPDATE myTable set MyColumn = NULL WHERE MyColumn = '' 
```

# php - PHP照片否则/如果采摘

> ID：14601943
> 
> 赞同：1
> 
> 时间：2013-01-30T10:37:47.150
> 
> 标签：php

你好，如果我想不出“else if”的话，我对 else 没什么问题，如果

```
$photo = 'http://www.localhost/uploads/'.$usersInfo['image_id'].'.jpg';
$photoModeImage = 'http://www.localhost/uploads/thumbs/'.$usersInfo['image_id'].'.jpg'; 
```

出错了，否则如果应该选择照片

```
<?php
require_once '../../../common/server/php/settings.php';

//Connect to users database
$db = mysql_connect('localhost','root','123456') or die(mysql_error());
mysql_select_db('registracija',$db) or die(mysql_error());

//Init request parameters
$userName = (isset($_REQUEST["user_name"])) ? urldecode($_REQUEST["user_name"]) : "";
$password = (isset($_REQUEST["password"])) ? urldecode($_REQUEST["password"]) : "";
$uid = (isset($_REQUEST["uid"])) ? urldecode($_REQUEST["uid"]) : "";
$pwdmd5 = md5($password);

//Check if user filled login and password in the login screen (Chat authorization)
if($userName != "" && $password != "")
{
  $sql = "SELECT * FROM users WHERE username='".$userName."' AND password='".$pwdmd5."'";
}
//session/cookie base authorization (Auto login)
else if ($_SESSION['user_id']!="")
{
  $sql = "SELECT * FROM users WHERE Profile_id='".$_SESSION["user_id"]."'";
}
// Non session/cookie based autologin authorization
else if ($uid!="")
{
  $sql = "SELECT * FROM users WHERE id='".$_GET['uid']."'";
}
else
{
  echo '<auth error="AUTH_ERROR" />';
  exit;
}

//Select user data
$result = mysql_query($sql,$db);

if(mysql_num_rows($result)==1)
{
  //User found. get user info
  $usersInfo = mysql_fetch_array($result);
  if($userInfo['image_id'] ==''){
    $photo = FLASHCOMS_HTTP_ROOT.'common/images/User1_120.png';
    $photoModeImage = FLASHCOMS_HTTP_ROOT.'common/images/User1_40.png';  
  }
  else{
    $photo = 'http://127.0.0.1:8082/uploads/'.$usersInfo['image_id'].'.jpg';
    $photoModeImage = 'http://127.0.0.1:8082/uploads/thumbs/'.$usersInfo['image_id'].'.jpg';
  }
  $answer = '<auth>';
  $answer .= '<userName><![CDATA['.$userName.']]></userName>';
  $answer .= '<gender>male</gender>';
  $answer .= '<age>'.$userInfo['age'].'</age>';
  $answer .= '<level>regular</level>';
  $answer .= '<photo><![CDATA['.$photo.']]></photo>';
  $answer .= '<photoModeImage><![CDATA['.$photoModeImage.']]></photoModeImage>';
  $answer .= '</auth>';
  echo $answer;
  exit;
}
else 
{
  //User not found OR authorization failed
  echo '<auth error="AUTH_ERROR" />';
  exit;
}

?> 
```

我需要让它工作的是

```
else if ($photo['$image_id']!='')
    {

    $photo = FLASHCOMS_HTTP_ROOT.'common/images/no_photo.png';
    $photoModeImage = FLASHCOMS_HTTP_ROOT.'common/images/no_photo.png'; 
```

但图像没有显示。

```
-- ----------------------------
-- Table structure for `users`
-- ----------------------------
DROP TABLE IF EXISTS `users`;
CREATE TABLE `users` (
  `id_user` int(11) NOT NULL auto_increment,
  `name` varchar(128) NOT NULL,
  `email` varchar(64) NOT NULL,
  `age` varchar(16) NOT NULL,
  `username` varchar(16) NOT NULL,
  `password` varchar(32) NOT NULL,
  `confirmcode` varchar(32) default NULL,
  `gender` varchar(32) NOT NULL,
  `country` varchar(20) NOT NULL,
  `city` varchar(20) NOT NULL,
  `about_me` varchar(200) NOT NULL,
  `image_id` varchar(10000) NOT NULL,
  PRIMARY KEY  (`id_user`)
) ENGINE=MyISAM AUTO_INCREMENT=3 DEFAULT CHARSET=latin1;

-- ----------------------------
-- Records of users
-- ----------------------------
INSERT INTO `users` VALUES ('1', '', 'localhost@myemail.com', '', 'Mentro', '5f4dcc3b5aa765d61d8327deb882cf99', 'y', '', '', '', '', '1'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:48:41.287

我认为您正在尝试`no_photo.png`为没有用户图片的用户进行设置。如果我是对的，那么请执行以下操作：

1）确保`FLASHCOMS_HTTP_ROOT.'common/images/no_photo.png'`存在。

2）将其更改为：

```
if(mysql_num_rows($result)==1)
{
  //User found. get user info
  $usersInfo = mysql_fetch_array($result);
  if($userInfo['image_id'] ==''){
    $photo = FLASHCOMS_HTTP_ROOT.'common/images/User1_120.png';
    $photoModeImage = FLASHCOMS_HTTP_ROOT.'common/images/User1_40.png';    
  }
  else{
    $photo = 'http://127.0.0.1:8082/uploads/'.$usersInfo['image_id'].'.jpg';
    $photoModeImage = 'http://127.0.0.1:8082/uploads/thumbs/'.$usersInfo['image_id'].'.jpg';
  }
  $answer = '<auth>';
  $answer .= '<userName><![CDATA['.$userName.']]></userName>';
  $answer .= '<gender>male</gender>';
  $answer .= '<age>'.$userInfo['age'].'</age>';
  $answer .= '<level>regular</level>';
  $answer .= '<photo><![CDATA['.$photo.']]></photo>';
  $answer .= '<photoModeImage><![CDATA['.$photoModeImage.']]></photoModeImage>';
  $answer .= '</auth>';
  echo $answer;
  exit;
}
else 
{
  //User not found OR authorization failed
  echo '<auth error="AUTH_ERROR" />';
  exit;
}

?> 
```

# css - 我的网站在 Chrome 和 IE 中显示不同的内容

> ID：14601944
> 
> 赞同：1
> 
> 时间：2013-01-30T10:37:52.103
> 
> 标签：css, internet-explorer, google-chrome

我创建了一个网站，在首页上有一个图像滑块。你可以在这里看到它，[http://www.ikuben.no/](http://www.ikuben.no/)。

在 Chrome 中，它工作正常![在此处输入图像描述](../Images/43c1ad8192e7eec6200a22ff28832379.png)

在 IE 中，我得到了这个![在此处输入图像描述](../Images/d1dc3c1a3d1fcc2db40d3d5e0dce3e14.png)

这是我使用的 CSS，

```
.flex-caption {
    width:50%; 
    padding:0; 
    overflow:hidden; 
    margin: 0; 
    position: absolute; 
    left:49%; 
    top:20%; 
    background:none; 
    color: #fff; 
    font-size: 15px; 
    line-height:20px; 
    font-family:Arial, Tahoma, Helvetica, Verdana, sans-serif; 
    font-weight:normal;
}
.flex-caption span {
    font-size:30px; 
    line-height:30px; 
    font-weight:bold; 
    font-family:'helvetica_neuebold', Arial, Tahoma, sans-serif;
} 
```

我确实在 6 种不同的浏览器中测试了该网站，Chrome、Opera、Firefox、Windows 版 Safari、SeaMonkey 和 IE。我只在 IE 中得到这个结果。

有任何想法吗？？瑞马丁斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:47:32.613

刚刚注意到您添加：

```
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#4C000000,endColorstr=#4C000000) 
```

在 .flex-caption css 上。介意您删除它以查看是否有问题吗？泰

# c - 无法从结构数组中取回引用

> ID：14601945
> 
> 赞同：1
> 
> 时间：2013-01-30T10:37:58.397
> 
> 标签：c, pointers

我有一个图书馆的以下结构：

```
typedef struct
{
    unsigned char pin;              //!< Module pin.
    unsigned char function;         //!< Module function.
} gpio_map_t[]; 
```

现在，在我的代码中，我创建了一个这样的结构实例：

```
gpio_map_t display_spi_pins = {
        {1,1},
        {2,2},
        {3,3},
        {4,4}
    }; 
```

然后我创建一个这样的指针：

```
gpio_map_t* spi_pins_pointer = &display_spi_pins; 
```

直到这里一切顺利，没有编译错误。

我想知道如何取回对 display_spi_pins 的引用。我尝试这样：

```
gpio_map_t display_spi_pins_new_reference = *spi_pins_pointer; 
```

但我得到一个编译错误说：

> 数组初始化器必须是初始化器列表

**编辑：** 不要忘记 typedef sstruct ... 来自库，我无法修改它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:40:42.097

在这种情况下，您不能通过指针访问数据，您可以直接使用数组访问它 `display_spi_pins`

```
for(i=0; i<sizeof(display_spi_pins)/sizeof(display_spi_pins[0]); i++) {
    printf("pin[%d]=%X, function[%d]=%X\n",
           i, display_spi_pins[i].pin,
           i, display_spi_pins[i].function);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:43:20.307

问题是您将其定义`gpio_map_t`为长度未定义的结构数组。做类似的事情：

```
typedef struct
{
    unsigned char pin;              //!< Module pin.
    unsigned char function;         //!< Module function.
} gpio_map_t;

gpio_map_t[] display_spi_pins = {
    {1,1},
    {2,2},
    {3,3},
    {4,4}
};

gpio_map_t** spi_pins_pointer = &display_spi_pins;
gpio_map_t* display_spi_pins_new_reference = *spi_pins_pointer; 
```

（请记住 a`gpio_map_t*`非常接近 a `gpio_map_t[]`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:42:26.750

不要将类型别名声明`gpio_map_t`为数组类型。相反，当需要结构的数组时，将*变量*声明为数组，并仅将指针用于引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T05:44:01.783

这是你想要的：

```
typedef struct
{
    unsigned char pin;              //!< Module pin.
    unsigned char function;         //!< Module function.
} gpio_map_t[]; 

void main()
{
    gpio_map_t display_spi_pins = {{1,1}, {2,2}, {3,3}, {5,6}};
    gpio_map_t* spi_pins_pointer = &display_spi_pins;
    gpio_map_t* display_spi_pins_new_reference = spi_pins_pointer;

    int i;    

    for(i=0;i<4;i++){
        printf("%d: %d  %d\n",i,(display_spi_pins+i)->pin,(display_spi_pins+i)->function);

        if(((display_spi_pins+i)->pin != (*spi_pins_pointer+i)->pin) ||
            ((display_spi_pins+i)->pin != (*display_spi_pins_new_reference+i)->pin) ||
            ((display_spi_pins+i)->function != (*spi_pins_pointer+i)->function) ||
            ((display_spi_pins+i)->function != (*display_spi_pins_new_reference+i)->function))  
            printf("Reference ERROR\n");
    }
} 
```

# c# - 通过 c# 在 Yammer 中发布提要

> ID：14601953
> 
> 赞同：3
> 
> 时间：2013-01-30T10:38:08.860
> 
> 标签：c#, yammer

我对 yammer 很陌生。

我需要开发在 yammer 中发布提要的 ac# 应用程序，只需说“Hello World”。

我看到了几个博客和论坛。

如果有人发布小样本或一些以结构化方式解释的参考资料，我会很高兴。

提前致谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-22T10:14:24.287

你可以查看这个 github 项目：[Yammer.SimpleApi](https://github.com/RaynaldM/Yammer.SimpleAPI) 或者你可以直接使用这个[nuget 包](https://www.nuget.org/packages/Yammer.SimpleAPI/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:33:04.817

[这里](https://github.com/kdavie/yammer.net)的代码很有用。一些 API 端点，如 Post、Like、Follow 在该项目中运行良好。参考Yammer 提供的[API 文档](http://developer.yammer.com/restapi/)，将旧版本的 API 替换为较新版本的 API 。您是否阅读过[https://developer.yammer.com/introduction/](https://developer.yammer.com/introduction/)和[https://developer.yammer.com/authentication/](https://developer.yammer.com/authentication/)上的文档？还有一个[快速入门](https://developer.yammer.com/oauth2-quickstart/)。

加入 Yammer 开发网络以获得一些指导。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-03T04:13:54.583

对于开发应用程序的新手来说，[这](http://sunnybahree.blogspot.com/2012/05/yammer-api-call-from-dot-net-c.html?showComment=1380264363886#c7902016442486500336)可能很有用。

# android - Android 相机 - 在纵向模式下，屏幕的一半是黑色的

> ID：14601954
> 
> 赞同：0
> 
> 时间：2013-01-30T10:38:10.073
> 
> 标签：android, camera, surfaceview, surfaceholder

我试图创建相机应用程序，但我遇到了这个问题：在横向模式下使用相机时一切正常，但在纵向使用 setDisplayOrientation(90) 方法时会出现这个问题：

一半的屏幕是黑色的。

图片在这里：http: [//i.stack.imgur.com/sPTex.jpg](http://i.stack.imgur.com/sPTex.jpg)

表面创建方法：

```
@Override
    public void surfaceCreated(SurfaceHolder holder) {
        try {
            this.camera = Camera.open();
            this.camera.setDisplayOrientation(90);
            this.camera.setPreviewDisplay(this.holder);
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

我的 XML 布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <FrameLayout
        android:id="@+id/cameraPreview"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="1" >
    </FrameLayout>
    <Button
        android:id="@+id/analyzeButton"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/analyze" />
</LinearLayout> 
```

顺便说一句，在使用 ADB 拍摄的屏幕截图中 - 相机正常显示。在 Xperia ST27i 和三星 Galaxy Pocket 上进行测试 - 结果相同。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:46:45.797

```
public void surfaceCreated(SurfaceHolder holder)
{
// The Surface has been created, acquire the camera and tell it where to draw.
mCamera = Camera.open();

Parameters params = mCamera.getParameters();

if (this.getResources().getConfiguration().orientation != Configuration.ORIENTATION_LANDSCAPE)
{
params.set("orientation", "portrait");
mCamera.setDisplayOrientation(90);
}

try
{
mCamera.setPreviewDisplay(holder);
}
catch (IOException exception)
{
mCamera.release();
mCamera = null;
}

} 
```

试试这些代码的朋友............

# security - Symfony2 getToken() 在工厂为空

> ID：14601958
> 
> 赞同：0
> 
> 时间：2013-01-30T10:38:13.230
> 
> 标签：security, symfony, token

我有一个工厂来返回用户的帐户。在我的工厂里，我有这样的论点`"security.context"`：

```
 ml.account.factory:          
        class: MYLAPS\AccountBundle\Factory\AccountFactory
        arguments:
          context: "@security.context" 
```

当我想从安全上下文中获取令牌时，它是空的。当我在控制器中调用 security.context 服务然后要求`getToken()`它不为空时，我看到了我的用户。

看起来我的工厂在`security.context`正确初始化之前被调用了。有没有办法解决这个问题？

先感谢您。

史蒂文。

# php - 从 Magento 自定义模块调用 web 服务的最佳实践

> ID：14601966
> 
> 赞同：0
> 
> 时间：2013-01-30T10:38:33.287
> 
> 标签：php, magento, webservice-client

谁能告诉我，从 Magento 自定义模块调用 web 服务的最佳实践是什么？Magento / Zend 框架中是否有任何功能？还是应该使用标准的 PHP 功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:46:39.853

Zend Framework 为 REST 和 SOAP Web 服务提供客户端。

检查 lib/Zend/Rest 和 lib/Zend/Soap

# regex - 我应该使用哪个 Excel VBA RegEx 表达式来计算小数位数？

> ID：14601967
> 
> 赞同：1
> 
> 时间：2013-01-30T10:38:33.307
> 
> 标签：regex, vba, excel-2003

**问：**我应该使用哪个 Excel VBA RegEx 表达式来计算小数位数？

**所需输出**
这是一个包含一些示例输入字符串和所需输出的表格。

```
输入所需的输出
字符串最大值单位小数位
--------------------------------------------------
200A 200A 0
110kV 110kV 0
38,1兆瓦 38,1兆瓦 1
38,1 无功 38,1 无功 1
0-130℃ 130℃ 0
20-130℃ 130℃ 0
2000A 2000A 0
10 千伏 10 伏 0
34,6兆瓦 34,6兆瓦 1
34,6 无功 34,6 无功 1
600A 600A 0
114,3 兆瓦 114,3 兆瓦 1
114,3 无功 114,3 无功 1
2500A 2500A 0
300A 300A 0
500 A 500 A 0
100A 100A 0

```

**到目前为止我所做**
的 在这里您可以看到一个独立的 Excel VBA 代码。第一个子仅用于测试。
功能`RegEx`是我的问题。

```
Sub TestRegEx()
    strArray = Array("200 A", "200 A", "110 kV", "38,1MW", "38,1Mvar", _
            "0-130°C", "2000 A", "10 kV", "34,6MW", "34,6Mvar", "600 A", _
            "114,3 MW", "114,3 Mvar", "2500 A", "300 A", "500 A", "100 A")

    For i = 0 To UBound(strArray)
       Call RegEx(strArray(i))
    Next
End Sub

Function RegEx(ByVal strInput As String)

    Dim objRegEx As Object
    Set objRegEx = CreateObject("VBScript.RegExp")
    objRegEx.IgnoreCase = True
    objRegEx.Global = True

    'Show me the value
    objRegEx.Pattern = "[^0-9_,]"
    Debug.Print objRegEx.Replace(strInput, "")

    'Show me the unit
    objRegEx.Pattern = "[^A-Z_°]"
    Debug.Print objRegEx.Replace(strInput, "")

    'Show me the decimal places
    objRegEx.Pattern = "?????"
    Debug.Print objRegEx.Replace(strInput, "")

End Function 
```

**提示**

*   我想避免像 InStr 这样的普通 VBA 方法或循环遍历每个字符。
*   也许VBA`Len`方法可以用来计算字符串的长度。但是如果小数点为零，它将失败，或者？
*   对我来说，正则表达式很难阅读。我所有的知识都基于[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms974570.aspx)。

感谢您对我最初关于如何计算小数位的问题的任何帮助。

* * *

PS：如果您对我的另外两个 RegEx 字符串*unit*和*value*有建议，请告诉我。例如，我的*值*正则表达式在“20-130°C”上失败。我不知道如何删除“-”中剩下的所有内容以仅提取值“130”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-18T22:04:40.150

Cylian 的函数 GetDecPlaces 可以在不使用参数 decmark$ 的情况下重写。这可以通过表达式“ **[.,] \d+$”中的正则表达式字符类****[.,]**来实现（$ 符号表示“可搜索字符串的结尾”）。这允许句点小数和逗号小数。

 **```
Function GetDecPlaces(strInput$) As Integer
    'add a reference to Microsoft VBScript Regular Expressions 5.5
    Dim re As New RegExp, mts As MatchCollection, mt As Match
    With re
        .Global = True
        .Pattern = "[.,]\d+$"
        Set mts = .Execute(strInput)
        If mts.Count > 0 Then
            Set mt = mts.Item(0)
            .Pattern = "\d"
            Set mts = .Execute(mt.Value)
            GetDecPlaces = mts.Count
        Else
            GetDecPlaces = 0
        End If
    End With
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:42:58.350

这里不需要正则表达式！事实上，你可以用纯 Excel 公式做到这一点。假设您的值在 A 列中，从第 2 行开始，请尝试以下公式：

*   B2 - 删除空间：`=SUBSTITUTE(A2," ","")`
*   C2 - 删除 - 之前的数字：`=IFERROR(MID(B2,SEARCH("-",B2)+1,LEN(B2)-SEARCH("-",B2)),B2)`
*   D2 - 最后一个数字的位置：'=MAX(NOT(ISERROR(VALUE(LEFT(C2,ROW($A$2:$A$11)))))*ROW($A$2:$A$11))`（输入作为数组公式，即按`Ctrl`- `Shift`-`Enter`而不是`Enter`)
*   E2 - 最大值：`=VALUE(LEFT(C2,D2))`
*   F2 - 单位：`=RIGHT(C2,LEN(C2)-D2)`
*   G2 - 小数位：`=IFERROR(D2-SEARCH(",",C2),0)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:53:07.463

**试试这个：**

```
Function RegExTest(ByVal strInput As String)
    Dim objRegEx As Object, ret$
    Set objRegEx = CreateObject("VBScript.RegExp")
    With objRegEx
        .IgnoreCase = True
        .Global = True
        'printing value
        .Pattern = "[^0-9_,]"
        Debug.Print .Replace(strInput, "")
        ret = .Replace(strInput, "") & vbTab

        'printing unit
        .Pattern = "[^A-Z_°]"
        Debug.Print .Replace(strInput, "")
        ret = ret & .Replace(strInput, "") & vbTab

        'printing decimal places
        .Pattern = ","
        Debug.Print .Execute(strInput).Count
        ret = ret & CStr(.Execute(strInput).Count)
    End With
    RegExTest = ret
End Function 
```

**更新**

要删除之前的部分`-`，请使用以下功能：

```
Function RegExTest(ByVal strInput As String)
    Dim objRegEx As Object, ret$
    Set objRegEx = CreateObject("VBScript.RegExp")
    With objRegEx
        .IgnoreCase = True
        .Global = True

        'printing value
        .Pattern = "[^0-9_,-]"'///<--do not delete hyphen now.
        Dim temp$
        temp = .Replace(strInput, "")
        .Pattern = "^.*?-"'///<-remove hyphen according to your need
        temp = .Replace(temp, "")
        Debug.Print temp
        ret = temp & vbTab

        'printing unit
        .Pattern = "[^A-Z_°]"
        Debug.Print .Replace(strInput, "")
        ret = ret & .Replace(strInput, "") & vbTab

        'printing decimal places
        .Pattern = ","
        Debug.Print .Execute(strInput).Count
        ret = ret & CStr(.Execute(strInput).Count)
    End With
    RegExTest = ret
End Function 
```

**更新 2**

计算小数位数的功能：

```
Function GetDecPlaces(strInput$, Optional decmark$ = ",") As Integer
    'add a reference to
    'Microsoft VBScript Regular Expressions 5.5
    Dim re As New VBScript_RegExp_55.RegExp, mt As Match
    With re
        .Global = True
        .Pattern = decmark & "\d+"
        For Each mt In .Execute(strInput)
            .Pattern = "\d"
            GetDecPlaces = .Execute(mt.Value).Count
        Next mt
    End With
End Function 
```

***希望这可以帮助。*****

# c# - 建议另一种访问 win32_processor 的方法

> ID：14601969
> 
> 赞同：1
> 
> 时间：2013-01-30T10:38:34.630
> 
> 标签：c#, .net, wmi

以下代码用于访问 Win32 处理器信息....是否有任何其他方法可以获取 Win32 处理器信息（如使用不同的类）。在这里，我使用了类`WqlObjectQuery`和`ManagementObjectSearcher`.

```
WqlObjectQuery wquery = new WqlObjectQuery("select * from Win32_Processor");
        ManagementObjectSearcher searcher1 = new ManagementObjectSearcher(wquery);
        foreach (ManagementObject mo1 in searcher1.Get())
        {
            Console.WriteLine(mo1.ToString());
        } 
```

我们可以使用任何其他类来获取win32处理器的属性吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:55:44.070

获取机器上运行的当前处理器名称

检查 WMI Explorer 以及它是使用[WMI 查询工具的一个非常好的工具](http://www.techrepublic.com/blog/window-on-windows/build-queries-and-explore-the-windows-wmi-database-with-wmi-explorer/5007)

[MSDN WMI 查询](http://msdn.microsoft.com/en-us/library/ms186146%28v=vs.80%29.aspx)

[WMI 查询语言](http://www.codeproject.com/Articles/46390/WMI-Query-Language-by-Example)

```
ManagementObjectSearcher mos = new ManagementObjectSearcher("SELECT * FROM Win32_Processor")
foreach (ManagementObject mo in mos.Get())
{
    Console.WriteLine(mo["Name"]);
} 
```

//获取名称、制造商、计算机名称等...

```
ManagementObjectSearcher mosQuery = new ManagementObjectSearcher("SELECT * FROM Win32_OperatingSystem");
ManagementObjectCollection queryCollection1 = mosQuery.Get();
foreach (ManagementObject manObject in queryCollection1)
{
    Console.WriteLine("Name : " + manObject["name"].ToString());
    Console.WriteLine("Version : " + manObject["version"].ToString());
    Console.WriteLine("Manufacturer : " + manObject["Manufacturer"].ToString());
    Console.WriteLine("Computer Name : " + manObject["csname"].ToString());
    Console.WriteLine("Windows Directory : " + manObject["WindowsDirectory"].ToString());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:03:53.917

是的，绝对有可能使用 WMI 获得硬件和软件……微软提供了一个工具来导航 WMI 类和函数。该工具是Windows management Instrumentation tester。它可以通过在命令提示符下键入 wbemtest 打开。您可以使用该工具进行实验。此外，您可以查看此[链接](http://www.terminally-incoherent.com/blog/2010/02/18/collecting-hardware-information-using-c-and-wmi/)和此[链接](http://www.ithastobecool.com/2009/12/18/wbemtest-handy-tool-for-testing-your-wmi-queries/)，并尝试从您的角度进行一些研究。

除此之外，您可以将查询用作“select * from Win32_Processor where DeviceID=CPU0”，因为您想获取有关单处理器的信息

# ajax - codeigniter rest api 和 ajax

> ID：14601976
> 
> 赞同：0
> 
> 时间：2013-01-30T10:38:47.377
> 
> 标签：ajax, json, codeigniter-restserver

我正在尝试访问我创建的 rest api。当我输入以下内容时，它工作得很好：

```
http://localhost:8080/rest/index.php/api/practice/test/name/Peter/surname/Potter/format/json 
```

我得到了正确的 json 响应。现在我有一个网站，只是想使用 ajax 访问其余的 api。这是代码：

```
$(document).on('pagebeforeshow','#page2',
    function(){
                $('#submit').click(function() 
                {
                    var name = $("#username").val();
                    var surname = $("#usersurname").val();

                    alert(name + " " + surname);
                    //alert("http://localhost:8080/rest/index.php/api/practice/test/name/"+name+"/surname/"+surname);

                    $.getJSON({ 
                           type: "GET",
                           crossDomain: true,
                           dataType: "jsonp",
                           url: "http://localhost:8080/rest/index.php/api/practice/test/name/"+name+"/surname/"+surname,
                           success: function(data)
                           {        
                             alert("workings");
                           }
});
                });         
              }); 
```

现在，当我使用此代码时，我得到一个 404 not found 响应。当我到达那个 url 时，我知道一个事实，我打算得到一个 json 响应。这是来自其余 api 的我的控制器：

```
<?php  
require(APPPATH.'libraries/REST_Controller.php');  
class practice extends REST_Controller 
{  
    function test_get()
    {
        //echo "working fine ";
        $name = $this->get('name');
        $surname = $this->get('surname');
        //echo $name." ".$surname;
        $result = array('result' => "Working likes a boss ".$name." ".$surname);
        $this->response($result,200);
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:51:52.003

在您的通话`$.getJSON(...)`中，您有 URL

```
url: "http://localhost:8080/rest/index.php/api/practice/test/name/"+name+"/surname/"+surname 
```

错过了`/format/json`上面的部分。

你也有

```
dataType: "jsonp", 
```

这不是`json`。

**更新**：

我刚抬头[`jQuery.getJSON()`](http://api.jquery.com/jQuery.getJSON/)，电话是

> jQuery.getJSON( url [, data ] [, success(data, textStatus, jqXHR) ] )

看来您必须将呼叫更改为

```
$.getJSON("http://localhost:8080/rest/index.php/api/practice/test/name/"+name+"/surname/"+surname + "/format/json",
          function(data) { alert("workings"); }); 
```

或使用[`jQuery.ajax()`](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-29T15:18:48.497

您应该将标头设置为 json ：

```
<?php  
require(APPPATH.'libraries/REST_Controller.php');  
class practice extends REST_Controller 
{  
    function test_get()
    {
        //echo "working fine ";
        $name = $this->get('name');
        $surname = $this->get('surname');
        //echo $name." ".$surname;
        $result = array('result' => "Working likes a boss ".$name." ".$surname);
        header('Content-Type: application/json');
        echo json_encode( $result );
    }
}
?> 
```

# xcode - 在 ios 中的应用购买中，EXC_BAD_ACCESS

> ID：14601977
> 
> 赞同：3
> 
> 时间：2013-01-30T10:38:49.280
> 
> 标签：xcode, ios5, in-app-purchase, exc-bad-access

我想在我的 ios 应用程序中实现 In-App-Purchase，我有 UPGRADE 按钮，当用户点击升级时，我使用 SKPayment SKProductsRequest 发送产品请求，并添加了它的委托方法，代码如下所示，每当我点击在升级按钮上，2-3 秒后，它给我的错误是“执行错误访问”。它仅在 sendRequest 方法中给出错误。请给我解决方案。

```
-(void)sendRequest
{
    if ([SKPaymentQueue canMakePayments])
    {

        SKProductsRequest *request = [[SKProductsRequest alloc] initWithProductIdentifiers:[NSSet setWithObject:@"thisIsMyProdID"]];
        request.delegate = self;
        [request start];
    }
}
-(void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{
    for (SKPaymentTransaction *transaction in transactions)
    {
        switch (transaction.transactionState)
        {

            case SKPaymentTransactionStatePurchasing:
                NSLog(@"Processing...");
                break;

            case SKPaymentTransactionStatePurchased:
            {
                [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
                //statusLabel.text = @"Done!";
                UIAlertView *tmp = [[UIAlertView alloc]
                                    initWithTitle:@"Complete"
                                    message:@"You have unlocked Feature 2!"
                                    delegate:self
                                    cancelButtonTitle:nil
                                    otherButtonTitles:@"Ok", nil];
                [tmp show];

            }
                               break;

            case SKPaymentTransactionStateRestored:
            {
                [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
                // remove wait view here
            }
                break;

            case SKPaymentTransactionStateFailed:
            {
                if (transaction.error.code != SKErrorPaymentCancelled) {
                    NSLog(@"Error payment cancelled");
                }
                [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
                // remove wait view here

            }
                break;

            default:
                break;
        }
    }
}

-(void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response
{
    NSArray *products = response.products;
    if (products.count != 0)
    {
        product = products[0];

        SKPayment *payment = [SKPayment paymentWithProduct:product];

        [[SKPaymentQueue defaultQueue] addTransactionObserver:self];
        [[SKPaymentQueue defaultQueue] addPayment:payment];

    }
    else
    {
        UIAlertView *tmp = [[UIAlertView alloc]
                            initWithTitle:@"Not Available"
                            message:@"No products to purchase"
                            delegate:self
                            cancelButtonTitle:nil
                            otherButtonTitles:@"Ok", nil];
        [tmp show];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-29T11:11:54.517

问题出在我的代码中，我没有处理 SKPayment 的对象，所以在得到苹果的响应之前，我的 SKPayment 对象被释放了，所以我得到了那个糟糕的访问错误，我全局声明了这个对象，然后它工作正常。这只是我的愚蠢错误，对此感到抱歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:14:35.683

由于 SKProductRequest 是 SKRequest 的子类，您将需要实现委托

*   (void)request:(SKRequest *)request didFailWithError:(NSError *)error

要获得任何错误，这可能会将您指向正确的位置。来自 raywenderlich.com ( [http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial](http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial) ) 的教程中有一个很好的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-28T09:59:24.547

```
@property (strong, nonatomic) SKProductsRequest *request;
@property (strong, nonatomic) SKPaymentQueue *skPaymentQueue; 
```

您可以通过将其定义为 viewDidLoad 中的属性来保留内存

```
self.skPaymentQueue = [SKPaymentQueue defaultQueue]; 
```

# playframework-2.0 - 我可以在 Play 中使用什么 SBT 构建设置！2 框架，将在类路径上包含来自源树的特定资源

> ID：14601982
> 
> 赞同：4
> 
> 时间：2013-01-30T10:39:23.897
> 
> 标签：playframework-2.0, sbt

我想在构建中添加一个设置，该设置将从 src 树中的某个位置复制特定文件，以便它们在开发和生产模式下的类路径上可用。我不想将它们放在`public`文件夹中，因为我不希望它们可供下载。而且我不想将它们放在`conf`文件夹中，因为我想为配置文件保持清洁。

例如：

```
app
  -- views
     -- website
        -- view.scala.html
        -- header-module.widget
        -- footer-module.widget 
```

编译应用程序时，我希望类路径包含两个`*.widget`文件，`classpath:views/website/`而不是，`view.scala.html`因为它是单独处理的。

我想通过添加一个可以提供过滤器的 sbt 设置来做到这一点，我已经尝试过这个和一些变体，但到目前为止还没有工作：

```
val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
  // Add your own project settings here
  unmanagedResources in Compile <++= (sourceDirectory in Compile) map {
    base: File => ( base / "views" ** "*. widget ").get
}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T22:16:23.873

以下内部`.settings()`应该工作：

```
// Add app folder as resource directory so that widget files are in the classpath
unmanagedResourceDirectories in Compile <+= baseDirectory( _ / "app" ),
// but filter out java and html files that would then also be copied to the classpath
excludeFilter in Compile in unmanagedResources := "*.java" || "*.html" 
```

我有…… 在我们的 Build.scala 中像这样在类路径中有 mybatis xml 文件，它对我们有用。

# dll - 共享相同的dll时服务和进程不能一起运行

> ID：14601983
> 
> 赞同：0
> 
> 时间：2013-01-30T10:39:25.980
> 
> 标签：dll, windows-services, access-rights

我有一个作为 Windows 服务（用户 = 系统）启动的进程 A。我还有一个进程 B，我在自己的帐户下启动（在管理员组中）。

我观察到了几种行为：

1-进程A首先作为Windows服务（用户系统）启动。然后进程 B 将不会运行（用户是管理员）：它可以启动但它会立即关闭而不会出现错误，即使在 Windows 事件中也是如此。

2-首先启动进程B（用户是管理员），它运行正常。然后进程A作为Windows服务（用户系统）启动，一切正常。

3-进程A首先作为Windows服务启动（以管理员身份运行）。然后启动进程 B（用户是管理员），一切正常。

4-进程A首先作为Windows服务（用户系统）启动。然后进程 B 也作为 Windows 服务启动（用户系统）。一切正常。

在我看来，某些权限的配置有问题，但我找不到哪一个。此外，进程 A 和进程 B 使用一些共同的 DLL，所以问题可能存在，但我再次找不到哪个是有故障的 dll。

我希望你们中的一些人能帮助我解决这个问题！我要运行的用例是数字 1。

弗雷德里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:56:58.593

问题是其中一个 dll 使用共享内存和互斥锁。如果进程 A 以超级用户身份运行，则使用超级用户权限创建共享内存和互斥锁。

以较低用户权限启动的进程 B 将无法初始化或重新使用共享内存和互斥锁，因为它没有足够的权限来执行此操作。

我的解决方案：解决方案 1- 停止在 dll 中使用共享内存和互斥锁。解决方案 2-即使无法创建/访问共享内存或互斥体，也能够以降级模式继续。解决方案 3- 使用同一用户运行这两个进程。

我将采用解决方案 2，因为它最适合我的用例。

# java - Maven Surefire @BeforeClass 在每次测试之前执行

> ID：14601984
> 
> 赞同：3
> 
> 时间：2013-01-30T10:39:28.690
> 
> 标签：java, maven, junit, maven-surefire-plugin

我正在尝试使用`@BeforeClass`注释来初始化数据库数据和连接。但是当我启动我的测试时，`mvn test`我注意到`@BeforeClass`每个测试都会执行注释的静态方法。

我不明白为什么静态方法没有为测试类执行一次？

我的父 pom 包含 maven surefire 插件的以下配置：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.13</version>
    <configuration>
        <useSystemClassLoader>false</useSystemClassLoader>
        <systemPropertyVariables>
            <properties.path>${properties.path}</properties.path>
            <dico.path>${dico.path}</dico.path>
        </systemPropertyVariables>
        <!-- On ne joue pas les tests d'integrations -->
        <excludes>
            <exclude>**/**ITCase.java</exclude>
        </excludes>
    </configuration>
</plugin> 
```

# java - 将外部类中的新数据插入 Jtable

> ID：14601985
> 
> 赞同：2
> 
> 时间：2013-01-30T10:39:29.037
> 
> 标签：java, swing, jtable

我是 Stack Overflow 的新手，正在寻找我在大学一直在研究的 Java 应用程序的一些帮助。

我的问题是，如何使用按钮操作侦听器事件将 Jtextfield（在外部类中）中的整数插入 Jtable。

我的代码是：

**将 jtextfield 整数插入表的外部类按钮代码**

```
 package banknew;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import javax.swing.event.TableModelListener;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableModel;

public class CheckingAccount extends BANKNEW
{

final JButton DepositAmount = new JButton("Deposit");  
final JTextField tAmount = new JTextField();

    public void CheckingAccount() {
        String title = "Checking Account";
        JFrame checkingAccount = new JFrame(title);

        checkingAccount.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        checkingAccount.setSize(400, 200);
        checkingAccount.setLocation(checkingAccount.getHeight() / 2, checkingAccount.getWidth() / 2);

        final JLabel error = new JLabel("");
        checkingAccount.add(error, BorderLayout.SOUTH);
        error.setVisible(true);
        error.setLocation(5, 600);

        JMenuItem file1 = new JMenuItem("Checking Account");
        JMenuItem file2 = new JMenuItem("Checking Accounts");
        JMenuItem file3 = new JMenuItem("Checking Accounts");
        JMenuItem file4 = new JMenuItem("Bank Account");
        JMenuItem file5 = new JMenuItem("Close");

        JMenu filemenu = new JMenu("File");
        filemenu.add(file1);
        filemenu.add(file2);
        filemenu.add(file3);
        filemenu.addSeparator();
        filemenu.add(file4);
        filemenu.addSeparator();
        filemenu.add(file5);

        JMenuBar menubar = new JMenuBar();
        menubar.add(filemenu);
        checkingAccount.setJMenuBar(menubar);
        BorderLayout border = new BorderLayout();
        filemenu.setLayout(border);
        checkingAccount.setVisible(true);

        /**
         * ****************************************
         * Create Second JPanel - Buttons & ComboBox .
 *****************************************
         */
        JPanel abuttons1 = new JPanel();
        checkingAccount.add(abuttons1);
        //abuttons1.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        abuttons1.setBorder(BorderFactory.createTitledBorder(""));

        JButton Withdraw = new JButton("Withdraw");
        JLabel transBankName1 = new JLabel("Account Name:");
        JLabel transAmount = new JLabel("Amount:");

        final JTextField tBankName1 = new JTextField(20);
        final JComboBox AccountName = new JComboBox();
        AccountName.setEditable(false);
        AccountName.setMaximumSize(new java.awt.Dimension(100, 20));
        AccountName.setBorder(javax.swing.BorderFactory.createEtchedBorder());

        transBankName1.setMaximumSize(new java.awt.Dimension(100, 20));
        transAmount.setMaximumSize(new java.awt.Dimension(100, 20));
        tAmount.setMaximumSize(new java.awt.Dimension(100, 20));
        tBankName1.setMaximumSize(new java.awt.Dimension(00, 20));

        abuttons1.setLayout(new GridLayout(5, 1, 5, 5));
        abuttons1.add(transBankName1);
        abuttons1.add(AccountName);
        abuttons1.add(transAmount);
        abuttons1.add(tAmount);

        abuttons1.add(Withdraw);
        abuttons1.add(DepositAmount);
        abuttons1.setLocation(0, 0);
        abuttons1.setSize(300,200);

         DepositAmount.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                if (table.getSelectedRow() > -1) {
                    // assuming from your code that you want to set the
                    // textfield's value at the table's selected row
                    try {
                        Integer amount = Integer.parseInt(tAmount.getText());
                        table.getModel().setValueAt(amount, table.getSelectedRow(), 4);
                    } catch (NumberFormatException nfe) {
                        // User did not provide a number.
                        // do nothing? show dialog? you name it!
                    }
                }
            }
        });
    }

    } 
```

*   External 类有一个带有文本字段和“存款”按钮的 GUI。
*   主类有一个带有 5 列 JTable 的 GUI

我想要做的就是拥有一个带有按钮的外部扩展类，然后在按钮上单击将本地文本字段中的数量插入到主 Jtable 中，如带有“abc”表模型的代码所示。

我搜索了谷歌和堆栈溢出，但大多数帖子都与 SQL 或数据库链接有关。

如果有人能指出我正确的方向，我将不胜感激。

谢谢

**编辑2：复制并粘贴代码并尝试上传主类，复制后告诉我...**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T11:14:21.567

我有点不确定你的课程是否更全球化。但如果 CheckingAccount 应该写入表，则需要在其构造函数中提供对表的引用。

```
public class CheckingAccount {
    final JButton depositAmount = new JButton("Deposit");  
    final JTextField tAmount = new JTextField();

    //Provide the JTable to the CheckingAccount when you construct it!
    public CheckingAccount(final JTable table) {
        depositAmountButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                if (table.getSelectedRow() > -1) {
                    // assuming from your code that you want to set the
                    // textfield's value at the table's selected row
                    try {
                        Integer amount = Integer.parseInt(textField.getText());
                        table.getModel().setValueAt(amount, table.getSelectedRow(), 4);
                    } catch (NumberFormatException nfe) {
                        // User did not provide a number.
                        // do nothing? show dialog? you name it!
                    }
                }
            }
        });
    }
} 
```

要了解有关如何使用 Swing 的更多信息，请查看[Oracle 教程](http://docs.oracle.com/javase/tutorial/uiswing/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-15T05:38:11.180

谢谢你，你的代码确实给了我们一个方向，它确实是最有价值的。

我已将此代码作为组件工作。关键在于：

```
final static 
```

* * *

[![在此处输入图像描述](../Images/6f1beb4f2ff10d8ab33d3c465d5f3004.png)](https://i.stack.imgur.com/UvYES.png)

表格组件和按钮组件

重要提示：单击添加按钮时，我已成功添加新行。但添加不是从 1/0 开始，而是从第二行开始

```
import java.awt.Component;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JTable;
import javax.swing.table.DefaultTableModel;

public class AmendingTable {
    final static JButton        addData         = new JButton("Add");

    static String a;
    static String b;
                                                                //Don't introduce row here otherwise it will add 1 empty row at start
    final static DefaultTableModel model = new DefaultTableModel(null, new String [] {"Products", "Prices" });
    final static JTable table = new JTable(model);

    public static Component table() {
        model.setRowCount(0);
        table.setRowHeight(30);
        return table;
    }
    //ORGINAL
    public static Component addingRowse(final JTable table) {   
        addData.addActionListener(new ActionListener() {
            @Override
                public void actionPerformed(ActionEvent e) {

                            a = String.valueOf(TextFields.jtfProdName.getText());
                            b = String.valueOf(TextFields.jtfProdPrice.getText());

                            String [] row = {a, b};             

                            model.addRow(row);

                }
        });

        return addData;
    }
} 
```

我如何在我的 Java 面板中调用它们。此处调用的表

```
public static Component orderLister() {
    jpOrderLister = new JPanel();

    jpOrderLister.setBounds(5, 105, 450, 300);
    jpOrderLister.setBackground(Color.GREEN);
    jpOrderLister.setLayout(new GridLayout(1,1,0,0)); //Border : Top / Left / Bottom / Right / Colour
    jpOrderLister.setBorder(BorderFactory.createMatteBorder(1, 5, 1, 5, Color.LIGHT_GRAY));

    //
    JScrollPane sPane = new JScrollPane();
    sPane.setPreferredSize(new Dimension(200, 150));
    sPane.getViewport().add(AmendingTable.table);
    sPane.setBackground(Color.white);

    jpOrderLister.add(sPane);

    return jpOrderLister;
} 
```

Java面板中这样调用的按钮

```
public static Component buttons() {
    jpButtons = new JPanel();
    jpButtons.setBounds(200, 410, 100, 50);
    jpButtons.setLayout(new GridLayout(1,1,0,0));
    jpButtons.setBackground(Color.GRAY);

    jpButtons.add(AmendingTable.addingRowse(AddingRowsToJTable.table));

    return jpButtons;
} 
```

# php - 在单选按钮的情况下奇怪的 PHP 不当行为

> ID：14601986
> 
> 赞同：-1
> 
> 时间：2013-01-30T10:39:31.470
> 
> 标签：php

这是html表单；

```
<div class="formText">
    <input type="radio" name="txtNumber" value="100" onclick="uncheck();"/>100
    <input type="radio" name="txtNumber" value="200" onclick="uncheck();"/>200
    <input type="radio" name="txtNumber" value="500" onclick="uncheck();"/>500
    <input type="radio" name="txtNumber" value="other" onclick="check(this);"/>other
    <input type="text" name="other_field" id="other_field" onblur="checktext(this);"/>
</div> 
```

这是php编码

```
if(isset($_POST['txtNumber']))
    {
        $choice_no = $_POST["txtNumber"];
    } 
```

& 插入查询 $insert = "INSERT INTO dbForm (db_number) VALUES ('{$choice_no}')";

现在这个表格显示了 4 个单选选项，3 个是固定的，一个是隐藏的。当这个人点击“其他”单选按钮时，最后一个是可见的。

Now when above three radio buttons with value 100, 200 or 500 are chosen, they are good and the values are going into database.

使用此代码，它不会选择“其他”字段的值，而是始终在数据库中插入“0”。我很惊讶。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:42:29.427

您尚未为其他字段复选框定义值。使用这个也许它会帮助你。

```
 <input type="text" name="other_field" id="other_field" value="value" onblur="checktext(this);"/> 
```

# jquery - 如何使用html5 css jquery动画使div中的图像被向下拖动？

> ID：14601987
> 
> 赞同：1
> 
> 时间：2013-01-30T10:39:35.013
> 
> 标签：jquery, css, html, animation, draggable

我需要在 div 标签中向下拖动图像并将其恢复到正常位置，而图像不会超出 div 标签的顶部。我已使用此属性“溢出-y：隐藏”仅在 y 轴上拖动。

但是我没有满足我的要求如下 1\. 图像不应该被拖动到 div 标签的顶部之外。它应该固定在那里。2\. 图像只能向下拖动到一定程度，不能完全向下拖动。

这个用例可以想象成一个车窗关闭和打开的地方（关闭边距是固定的，打开只完成了 90% 没有完全完成）

请尽快帮助解决这个问题。我会很高兴的！谢谢

下面是代码：

JavaScript.js

```
 $(function() {
$( "#draggable" ).draggable({ axis: "y" });

});

<div id="container">
        <img  id="draggable" src="img/car.jpg" width="400px" height="300px" alt="Click this image to drag it down" >
    </div> 
```

样式.css -----

```
#draggable
{
    margin-bottom:20px;
    cursor:pointer;
}                                                                 

 #container
{ 
    position: absolute;
    left: 10%;
    top: 10%;
    overflow-y: hidden; 
    containment: 'parent'
    height: 320px; 
    width: 400px; 
    border: solid 1px black;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:20:45.327

你能提供你工作的 JSFiddle 吗？没有它我只能给你jQuery的例子：可拖动效果。

```
 $(document).ready(function(){
    $('#car').draggable(); ); 
```

我还看到了使用填充来下推 CSS 中的元素，而无需将其从 div 标签中删除。请提供 JSFiddle，以便我了解更多您想要了解的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:16:50.343

我得到了我的问题的解决方案:-) 我所要做的就是以下列方式编辑我的 js 代码

javascript代码

```
 $(function() {
$( "#draggable" ).draggable({ axis: "y", containment: [ 0, 67, 0, 320] });

}); 
```

# regex - boost::regex_search 上的“没有匹配函数”错误，我做错了吗？

> ID：14601990
> 
> 赞同：0
> 
> 时间：2013-01-30T10:39:42.507
> 
> 标签：regex, boost

代码：

```
#include <string>
#include <boost/regex.hpp>
int main() {
  boost::smatch what;
  boost::regex regex("some +", boost::regex::icase);
  std::string mystring = "some     string";
  bool search_result = boost::regex_search(mystring.begin(),mystring.end(), what, regex);
} 
```

错误消息很长，这里只有第一行：

```
<stdin>: In function 'int main()':
<stdin>:7:88: error: no matching function for call to 'regex_search(std::basic_string<char>::iterator, std::basic_string<char>::iterator, boost::smatch&, boost::regex&)'
<stdin>:7:88: note: candidates are:
In file included from d:\boost/boost/regex/v4/regex.hpp:148:0,
                 from d:\boost/boost/regex.hpp:31,
                 from <stdin>:2: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:37:52.940

*在上面扩展我的评论*

[此处](http://www.boost.org/doc/libs/1_52_0/libs/regex/doc/html/boost_regex/ref/regex_search.html)的示例显式声明了类型变量`std::string::const_iterator`，然后将它们传递给`boost::regex_search`，因此没有歧义。（和 llonesmiz 做的一样）

或者，如果您使用的是 C++11，则可以调用`cbegin`并`cend`消除歧义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:29:03.687

我了解您正在尝试在整个字符串中搜索正则表达式；如果是这样，这应该工作。

```
#include <string>
#include <boost/regex.hpp>
int main() {
  boost::smatch what;
  boost::regex regex("some +", boost::regex::icase);
  std::string mystring = "some     string";
  bool search_result = boost::regex_search(mystring, what, regex);
} 
```

然后根据需要使用结果。

# django - 无法在设置 django 中导入名称

> ID：14601996
> 
> 赞同：2
> 
> 时间：2013-01-30T10:40:15.690
> 
> 标签：django, django-forms, django-views

我试图`process`在我的设置中调用一个函数，但它给了我这个错误：

`Could not import the name: payusaepay.views.process`

以下是我的看法：

```
# coding: utf-8
from decimal import Decimal, ROUND_UP, ROUND_DOWN
import re, time, math, random, hashlib
import urlparse, urllib, httplib, urllib2, pycurl

from django.conf import settings
from utils import logger

def trunc(f, n):
    '''Truncates/pads a float f to n decimal places without rounding'''
    return ('%.*f' % (n + 1, f))[:-1]

class Transaction(object):
    """USAePay Transaction Class"""

    VALID_COMMANDS = set('sale credit void preauth postauth check checkcredit'.split())

    VALID_REQUEST_KEYS = [
        'UMamount',
        'UMauthCode',    # required if running postauth transaction.
        'UMcard',    # the entire amount that will be charged to the customers card 
        'UMexpir',    # expiration date 4 digits no /
        'UMbillamount',
        'UMamount',    # the entire amount that will be charged to the customers card 
        'UMinvoice',    # invoice number.  must be unique.  limited to 10 digits.  use orderid if you need longer. 
        'UMorderid',    # invoice number.  must be unique.  limited to 10 digits.  use orderid if you need longer. 
        'UMponum',    # Purchase Order Number
        'UMtax',    # Tax
        'UMnontaxable',    # Order is non taxable. True -> 'Y', False -> do not specify this key
        'UMtip',    # Tip
        'UMshipping',    # Shipping charge
        'UMdiscount',    # Discount amount (ie gift certificate or coupon code)
        'UMsubtotal',    # if subtotal is set, then 
        'UMcurrency',    # Currency of $amount
        'UMname',    # name of card holder
        'UMstreet',    # street address
        'UMzip',    # zip code
        'UMdescription',    # description of charge
        'UMcomments',    # Addit
        'UMcvv2',    # cvv2 result
        'UMclerk',
        'UMbillzip',
        'UMshipstreet',
        'UMxid',
        'UMip',    # Tip
        'UMcheckimageback',    # Check back, you need to encode it with base64
        'UMtestmode',    # test transaction but don't process 
        'UMcheckimagefront',    # Check front, you need to encode it with base64
        'UMrecurring',    # (obsolete,  see the addcustomer)
        'UMdukpt',    # DUK/PT for PIN Debit
        'UMbillsourcekey', # True -> 'yes', False -> not specify this field
        'UMshipzip',
        'UMbillcity',
        'UMbillstate',
        'UMcardauth',
        'UMshipstate',
        'UMwebsite',
        'UMallowPartialAuth',    #set to 'Yes' if a partial authorization (less than the full $amount)  will be accepted
        'UMbillphone',
        'UMepcCode',
        'UMdlstate',    # drivers license issuing state
        'UMterminal',    # The type of terminal being used:  Optons are  POS - cash register, StandAlone - self service terminal,  Unattended - ie gas pump, Unkown  (Default:  Unknown)
        'UMschedule',    # 
        'UMbillstreet2',
        'UMbillcompany',
        'UMignoreDuplicate',    # prevent the system from detecti
        'UMrestaurant_table',    #
        'UMshipfname',
        'UMmicr',
        'UMaccounttype',    # Checking or Savings
        'UMsoftware',    # Allows developers to ident
        'UMaccount',    # bank account numbertimuryan
        'UMbillstreet',
        'UMstart',    #  When to start the
        'UMrefNum',    # refer
        'UMchecknum',    # Check Number
        'UMcustemail',    # customers email add
        'UMmagsupport',    # Support for mag stripe reader:   yes, no, contactless, unknown  (default is unknown unless magstripe has been sent)
        'UMauxonus',
        'UMcontactless',    # Support for mag stripe reader:   yes, no, contactless, unknown  (default is unknown unless magstripe has been sent)
        'UMshiplname',
        'UMsession',
        'UMeci',    # manually specify loc
        'UMbilllname',
        'UMaddcustomer',    # (obsolete,  see the addcustomer)
        'UMsignature',    # Signature Capture data
        'UMnumleft',    #  The number of times to 
        'UMrouting',    # bank routing number
        'UMisRecurring', # True -> 'Y', False -> do not specify this key
        'UMbillamount',
        'UMshipcountry',
        'UMbillcountry',
        'UMbillfname',
        'UMcustid',    # Alpha-numeric id that uniquely identifies the customer.
        'UMdigitalGoods',    #digital goods indicator (ecommerce)
        'UMtermtype',    # The type of terminal being used:  Optons are  POS - cash register, StandAlone - self service terminal,  Unattended - ie gas pump, Unkown  (Default:  Unknown)
        'UMmagstripe',    # mag stripe data.  can be either Track 1, Track2  or  Both  (Required if card,exp,name,street and zip aren't filled in)
        'UMcardpresent',    # Must be set to '1' if processing a card present transaction  (Default is false)
        'UMshipstreet2',
        'UMbilltax',
        'UMshipcompany',
        'UMcheckformat',    # Override default check record format
        'UMexpire',    #  When to stop running transactions. Default is to run forever.  If both end and num
        'UMfax',
        'UMcustreceipt',    # send customer a receipt
        'UMemail',    # customers email add
        'UMshipphone',
        'UMcustreceiptname',    # name
        'UMdlnum',    # drivers license number (required if not using ssn)
        'UMpares',    # 
        'UMcavv',
        'UMshipcity',
        'UMssn',    # social security number
        'UMticketedEvent',    # ID of Event when
    ]
    VALID_CUSTOM_KEY_PATTERN = re.compile('UMcustom[\d+]')

    _line_nums = '|'.join(str(i) for i in range(1, 21))
    VALID_GOODS_KEYS_PATTERN = re.compile('UMline[%s][sku|name|description|cost|qty|taxable|prodRefNum]' % _line_nums)

    class GoodsDescriptionError(Exception):
        pass

    class UnknownCommand(Exception):
        pass

    class DataError(Exception):
        pass

    class ResponseError(Exception):
        pass

    def __init__(self, UMkey = settings.USAEPAY_API_KEY,
            UMpin = None,
            gatewayurl = None,
            usesandbox = settings.USAEPAY_USE_SANDBOX, 
            ignoresslcerterrors = settings.USAEPAY_IGNORE_SSL_CERT_ERRORS,
            cabundle = settings.CABUNDLE,
            usaepay_rsa_key = settings.USAEPAY_RSA_KEY,
            UMtestmode = settings.USAEPAY_TEST_MODE):
        self.gatewayurl = gatewayurl
        self.usesandbox = usesandbox
        self.UMkey = UMkey
        self.UMpin = str(UMpin).strip() if UMpin else None
        self.ignoresslcerterrors = ignoresslcerterrors
        self.cabundle = cabundle
        self.usaepay_rsa_key=usaepay_rsa_key
        self.UMtestmode = UMtestmode

    def get_gateway_url(self, usesandbox = False):
        if self.usesandbox or usesandbox:
            return "https://sandbox.usaepay.com/gate"
        elif self.gatewayurl:
            return self.gatewayurl
        else:
            return "https://www.usaepay.com/gate"

    def check_command(self, command):
        if command not in self.VALID_COMMANDS:
            raise self.UnknownCommand(command)

    def check_data(self, command, data):
        """"
        Verify that all required data has been set
        """

        for key in data:
            contains = key in self.VALID_REQUEST_KEYS or self.VALID_CUSTOM_KEY_PATTERN.match(key) or \
                self.VALID_GOODS_KEYS_PATTERN.match(key)
            if not contains:
                raise self.DataError("Unknown key %s" % key)

        if command in ('check', 'checkcredit'):
            if not 'account' in data:
                raise self.DataError("Account Number is required")
            if not 'routing' in data:
                raise self.DataError("Routing Number is required")

    def prepair_data(self, command, initial_data, goods_lines):
        # Goods descriptions:
        # list ot dict(sku='', name='', description='', cost=0.0, qty=0, taxable='', prodRefNum=0)

        data = initial_data.copy()
        data['UMkey'] = self.UMkey

        if 'UMcheckimagefront' in data or 'UMcheckimageback' in data:
            data['UMcheckimageencoding'] = 'base64'

        if self.UMtestmode:
            data.setdefault('UMtestmode', self.UMtestmode)

        for index, line in enumerate(goods_lines, 1):
            for key in line:
                data['UMline%s%s' % (index, key)] = line[key]

        # Create hash if pin has been set.
        if self.UMpin:
            # generate random seed value
            seed = trunc(time.time(), 4) + trunc(random.random(), 10)[2:]
            # assemble prehash data
            prehash = ':'.join( (command, self.UMpin, str(data['UMamount']), str(data['UMinvoice']), seed) )
            # sha224 hash
            data['UMhash'] = 's/' + seed + '/' + hashlib.sha1(prehash).hexdigest()

        return data

    def process(self, command, initial_data, goods_lines = [], usesandbox = False):
        """
        Send transaction correspond to 'command' name to the USAePay Gateway and parse response
        goods_lines - list with good item descriptions
        """

        data = self.prepair_data(command, initial_data, goods_lines)
        gatewayurl = self.get_gateway_url(usesandbox)

        self.check_command(command)
        self.check_data(command, initial_data)

        # Post data to Gateway
        response=self.http_post(gatewayurl, data)

        if response.status != 200:
            raise self.ResponseError('Wrong response status %s', response.status)

        # decode response content
        result = urlparse.parse_qs(response.content)
        logger.debug('Decoded response: %s', result)

        # Check response errors
        if not 'UMversion' in result:
            raise self.ResponseError('UMversion is missed in the response')
        if not 'UMstatus' in result:
            raise self.ResponseError('UMstatus is missed in the response')

        error_description = tuple(result.get(key, None) for key in 'UMerrorcode UMerror UMcustnum'.split())
        if any(error_description):
            raise self.ResponseError('Errors : %s %s %s' % error_description)

        if not result['UMresult'] == ['A']:
            raise self.ResponseError('Wrong response status %s' % result['UMresult'])

        return result

    def http_post(self, url, data):
        'Post request to payment server via stream'

        data = urllib.urlencode(data)
        logger.debug('stream post request: %s', data)

        headers = {
            "Content-type": "application/x-www-form-urlencoded",
            "Content-length": len(data)
        }
        conn = httplib.HTTPSConnection("sandbox.usaepay.com", 443, self.usaepay_rsa_key, self.cabundle, False, 45)
        conn.request("POST", "/gate.php", data, headers)
        response = conn.getresponse()
        response.content = response.read()
        logger.debug('stream post response: status=%s %s', response.status, response.content)

        return response 
```

在设置中

```
SHOP_HANDLER_PAYMENT = "payusaepay.views.process" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:06:29.773

因为`process`不是视图方法，它是`Transaction`类的方法，所以你可以有一个实例`Transaction`来调用`process`方法。

# r - 如何增加r中图例的间隔？

> ID：14601997
> 
> 赞同：2
> 
> 时间：2013-01-30T10:40:22.023
> 
> 标签：r, plot

我正在使用这个命令（包字段）来绘制我的数据：r。

```
image.plot((r),main = " RMSD", add = FALSE,legend.shrink = 0.9,
           legend.width = 1.2,  legend.mar =  5.1, graphics.reset = FALSE, 
           horizontal = FALSE, xlab = "Longitude", ylab = "Latitude", 
           bigplot = NULL, smallplot = NULL, legend.only = FALSE, 
           lab.breaks = NULL, axis.args = NULL) 
```

但是图例上显示的数字（间隔）是这样的

```
 0   0.1   0.2  0.3  0.4 
```

我很感谢任何人告诉如何将其更改为类似

```
 0   0.05   0.1  0.15   0.2  0.25  0.3  0.35 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:10:23.600

由于未提供示例数据，因此使用了函数`image.plot()`帮助文件中提供的数据。

```
x<- 1:10
y<- 1:15
z<- outer( x,y,"+") 
```

要手动设置中断，您应该使用参数`breaks=`，然后使用参数`col=`来提供颜色（颜色数必须比中断数少一）。参数`lab.breaks=`也用于在图例中设置相同的中断。

```
image.plot(x,y,z,breaks=seq(2,24,2),col = terrain.colors(11),
   lab.breaks=seq(2,24,2)) 
```

![在此处输入图像描述](../Images/fc0e13e65879396c4f4faf51b2efbf4d.png)