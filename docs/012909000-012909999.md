# StackOverflow 问答 12909000-12909999

# java - log4j 属性更改未反映在 Eclipse 中

> ID：12909000
> 
> 赞同：1
> 
> 时间：2012-10-16T06:50:10.437
> 
> 标签：java, eclipse, log4j

这是我用于项目的 log4j 文件，直到我将项目签入到 SVN 存储库。这工作正常，我在 Eclipse 的控制台上看到了日志信息

```
log4j.rootLogger=debug, stdout, R

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout

# Pattern to output the caller's file name and line number.
log4j.appender.stdout.layout.ConversionPattern=%d - %p %t %C.%M (%F:%L) %m%n

log4j.appender.R=org.apache.log4j.RollingFileAppender
log4j.appender.R.File=x.log

 log4j.appender.R.MaxFileSize=100KB
 # Keep one backup file
log4j.appender.R.MaxBackupIndex=1

log4j.appender.R.layout=org.apache.log4j.PatternLayout
log4j.appender.R.layout.ConversionPattern=%d - %p %t %C.%M (%F:%L) %m%n 
```

我从存储库中签出我的项目并通过在我的 log4j 属性文件中进行此更改来禁用日志记录。

```
#log4j.rootLogger=debug, stdout, R
log4j.rootLogger=OFF 
```

但是这个改动并没有按预期进行，我还是在 Eclipse 的控制台上得到了日志信息。当我在终端上交叉检查时，很好，我没有在终端上获得日志信息。Eclipse有什么问题吗？我在这个问题上搜索了很多，没有得到任何解决方案。帮我找出这里有什么问题！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T14:03:45.863

这里有两个可能的问题：

1.  配置应该说（告诉它没有附加程序，而不是寻找关闭附加程序）：

    log4j.rootLogger=

2.  Eclipse 正在使用该文件的旧版本，可能是因为您在 Eclipse 之外编辑了该文件。只需刷新文件（右键单击/刷新），它就会开始按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T14:09:45.367

使用该`-Dlog4j.debug`属性输出log4j-internal调试信息，查看启动时真正加载了哪些日志配置

你会得到一些这样的信息（对于基于 xml 的配置，但我想你会得到与属性文件配置类似的信息）：

```
log4j: Trying to find [log4j.xml] using context classloader sun.misc.Launcher$AppClassLoader@11b86e7.
log4j: Using URL [file:/C:/develop/workspace/foobar/target/classes/log4j.xml] for automatic log4j configuration.
log4j: Preferred configurator class: org.apache.log4j.xml.DOMConfigurator 
```

该`'log4j: Using URL ...'`行来自[LogManager](http://grepcode.com/file/repo1.maven.org/maven2/log4j/log4j/1.2.8/org/apache/log4j/LogManager.java)类。

# asp.net-mvc-3 - 没有“IEnumerable”类型的 ViewData 项 ' 有关键的“学生”。错误

> ID：12909002
> 
> 赞同：1
> 
> 时间：2012-10-16T06:50:34.640
> 
> 标签：asp.net-mvc-3

我正在使用 ASP.Net MVC3 Razor，

我有一个绑定数据的控制器

```
public Actionresult Index()
    {
        ViewBag.student= new SelectList(db.Collection, "ID", "Name"); 
ViewBag.student1= new SelectList(db.Collection, "ID", "Name"); 
return view(); 
  } 
```

这是我的看法

```
<table>
<tr>
    <td>
    @Html.DropDownList("student")

    </td>
    <td>

    @Html.DropDownList("student1")
    </td>
    </tr>
</table> 
```

我的代码有什么问题，任何人都可以帮助我......提前谢谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:56:35.257

```
public Actionresult Index()
{
    ViewBag.studentList = new SelectList(db.Collection, "ID", "Name"); 
    ViewBag.student1List = new SelectList(db.Collection, "ID", "Name"); 
    return view(); 
}

<table>
<tr>
    <td>
    @Html.DropDownList("student", (SelectList)ViewBag.studentList)

    </td>
    <td>

    @Html.DropDownList("student1", (SelectList)ViewBag.student1List)
    </td>
    </tr>
</table> 
```

# iphone - 如何在 iPhone SDK 中找到关闭路径（两条线的交点）？

> ID：12909008
> 
> 赞同：2
> 
> 时间：2012-10-16T06:51:22.157
> 
> 标签：iphone, ios, uibezierpath

请看图片。如何获得两条线的交点（即绿色圆点）？我想裁剪图像的内部部分。关闭路径是行中的任何位置。

```
context = UIGraphicsGetCurrentContext();
CGContextBeginPath(context);
CGContextSetLineWidth(context, 1.0 * self.scale);
CGContextSetLineCap(context, kCGLineCapRound);
[[UIColor redColor] setStroke];

CGPoint firstPoint = CGPointFromString([self.touchPoints objectAtIndex:0]);
CGContextMoveToPoint(context, firstPoint.x, firstPoint.y);

for (NSString *pointString in self.touchPoints) {
    CGPoint point = CGPointFromString(pointString);
    CGContextAddLineToPoint(context, point.x, point.y);
}

CGContextStrokePath(context); 
```

此代码用于绘制线条。线条画工作正常，裁剪也工作正常......但交点是我的主要问题。请帮我。

![在此处输入图像描述](../Images/005caa1e6259bcb7f74e60f86e9eff91.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:29:05.883

想法，检查以 firstline<>lastline、firstline<>secondlastline ... firstline<>thirdline => secondline<>lastline 等开头的交叉点。这应该给你最外面的交叉点。

以下代码未经测试，但应该可以帮助您解决问题。

```
typedef struct {
    CGPoint startPoint;
    CGPoint endPoint;
} Line;

#define CGPointNULL CGPointMake(NAN, NAN)

#define Line(_i_) {CGPointFromString(touchPoints[_i_-1]), CGPointFromString(touchPoints[_i_])};

CGPoint LineIntersects(Line *first, Line *second) {
    int x1 = first->startPoint.x; int y1 = first->startPoint.y;
    int x2 = first->endPoint.x; int y2 = first->endPoint.y;

    int x3 = second->startPoint.x; int y3 = second->startPoint.y;
    int x4 = second->endPoint.x; int y4 = second->endPoint.y;

    int d = (x1-x2)*(y3-y4) - (y1-y2)*(x3-x4);

    if (d == 0) return CGPointNULL;

    int xi = ((x3-x4)*(x1*y2-y1*x2)-(x1-x2)*(x3*y4-y3*x4))/d;
    int yi = ((y3-y4)*(x1*y2-y1*x2)-(y1-y2)*(x3*y4-y3*x4))/d;

    return CGPointMake(xi,yi);
}

static inline BOOL CGPointIsValid(CGPoint p) {
    return (p.x != NAN && p.y != NAN);
}

- (CGPoint)mostOuterIntersection:(NSArray *)touchPoints {
    CGPoint intersection = CGPointNULL;
    int touchCount = [touchPoints count];

    for(int i = 1; i<touchCount; i++) {
        Line first = Line(i);
        for(int j = touchCount-1; j>i+1; j--) {
            Line last = Line(j);
            intersection = LineIntersects(&first, &last);
            if(CGPointIsValid(intersection)) {
                break;
            }
        }
    }
    return intersection;
} 
```

# ios - 在opengl中混合重叠的三角形

> ID：12909011
> 
> 赞同：0
> 
> 时间：2012-10-16T06:51:30.933
> 
> 标签：ios, opengl-es, alphablending

我正在用三角形构建一条粗线。我遇到的问题是，当曲线是半透明的并且一些三角形重叠时，我会得到图片中的效果。我希望不要添加三角形 alpha。

我正在使用这个混合功能：

```
glBlendFuncSeparate(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA, GL_CONSTANT_ALPHA, GL_CONSTANT_ALPHA); 
```

![我所看到的](../Images/7521737746736e1aedded2b3742d5b79.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:18:32.147

您可以使用完全不透明度渲染曲线以分离渲染目标，然后使用自定义 Alpha 绘制该目标。否则你应该避免重叠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T04:13:10.070

您可以使用模板测试来阻止绘制已绘制的片段（从一开始就阻止混合）

# windows-8 - Windows 8 Metro 应用程序标题未显示

> ID：12909013
> 
> 赞同：0
> 
> 时间：2012-10-16T06:51:54.130
> 
> 标签：windows-8, winrt-xaml

我的应用程序的标题由于某种原因没有显示。它昨天还在工作，我确实将更改与 TFS 进行了比较，但没有真正改变会导致页面标题隐藏。页面标题确实出现在设计视图上，但在我运行应用程序时却没有。页面标题确实出现在其他页面上，所以我认为它不是问题`LayoutAwarePage`。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:35:46.197

我发现了问题，页面顶部有一个进度条导致标题隐藏。这有点奇怪，因为进度条一开始就在那里，并且标题显示正确。但无论如何，我必须将进度条放在其他网格行中才能使标题正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:24:28.617

尝试将进度条和标题部分都放在堆栈面板中......可能这会起作用..并且不要改变它的方向它默认是垂直的

# java - 为什么 Java 的时间不同

> ID：12909016
> 
> 赞同：0
> 
> 时间：2012-10-16T06:52:14.757
> 
> 标签：java

我想知道为什么这段代码返回不同的时间：

我的输出是：

```
Time1: 511 Time2: 228 for N: 100000000
Time1: 509 Time2: 229 for N: 100000001
Time1: 503 Time2: 229 for N: 100000002 
```

我有：

```
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.4) (6b24-1.11.4-1ubuntu0.12.04.1)
OpenJDK Server VM (build 20.0-b12, mixed mode)
Intel® Pentium(R) CPU B960 @ 2.20GHz × 2 
Linux Ubuntu 12.04 
```

我的代码如下所示：

```
public class test {

    public static void main(String[] arg)
    {
        for(long N=100000000;N<2000000000;++N){

            long time2 = System.currentTimeMillis();
            double d = 1.0; 
            double z = 1.0/3.0;
            for(long i = 0; i < N; i++)
            {
                d = d*z;
            }
            long result2 = System.currentTimeMillis() - time2;

            long time1 = System.currentTimeMillis();
            double x = 1.0;
            double f = 1.0/3.0;
            for(long i = 0; i < N; i++)
            {
                x = x*f;
            }
            long result1 = System.currentTimeMillis() - time1;

            System.out.println("Time1: " + result1 + " Time2: " + result2 + " bigger: " + (result1 > result2) + " for N: " + N);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T06:58:44.613

在 Java 中对代码进行基准测试**是很困难的**。

JVM在后台做*了很多事情：*

*   它动态优化代码，
*   在调用一定次数后编译方法（因此方法可能会突然变得更快，但编译会消耗资源，因此在一段时间内一切都可能变慢），
*   如果它认为合适，它可以将变量移到循环之外，
*   如果它发现它什么都不做，它甚至可以简单地删除一些代码（例如：你正在计算`d`，但你没有用它做任何事情，那么为什么要计算它？允许 JVM 简单地删除该代码；阅读“逃逸分析”）。
*   可能还会发生一些垃圾收集等。

此外，您的操作系统可能会干扰 JVM 的执行等。

因此，底线是：如果不深入研究 JVM 和您的操作系统的工作原理，就忘记进行*精确*的基准测试。你不能期望得到有意义的结果。

有关更多信息，请查看[此问题和答案](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java)。它包含指向非常好的论文的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T06:58:47.157

您是否多次重复此代码？你得到的时代媒介是什么？时间可能因多种原因而有所不同：例如，您的进程和线程共享相同的 CPU（1 个或更多）和计算机的其他资源。每次你都会得到不同的值，并且差异并不重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T07:00:02.283

请记住：在现代操作系统上运行应用程序有一个副作用：其他应用程序也在其中运行。操作系统调度不同的应用程序并在 CPU 上分配每个进程的时隙。每次执行应用程序时，它都会以不同的顺序与不同的其他进程一起执行。这会影响总执行时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T06:59:00.347

**您的系统可用性不受 Java 控制。**

如果您注意到，您的所有结果都在**同一范围内。**这是你可以期待的最好的。

如果即使在 JVM 中也发生了其他一些事情，例如`Garbage Collection`，您的时间可能会有所不同。

# c++ - std::for_each 使用 g++ 编译错误，而不是 VS2012

> ID：12909017
> 
> 赞同：2
> 
> 时间：2012-10-16T06:52:16.313
> 
> 标签：c++, visual-c++, c++11, g++

我有以下代码（尽可能简化）：

```
#include <vector>
#include <algorithm>

using std::vector;

enum class Foo {
    BAR, BAZ
};

void print_to_file(const vector<const vector<Foo> >& sequences) {
    std::for_each(sequences.begin(), sequences.end(), [](const vector<Foo>& sequence) {
    });
}

int main(int argc, char **argv) {
    return EXIT_SUCCESS;
} 
```

编译时`g++ (SUSE Linux) 4.7.1 20120723 [gcc-4_7-branch revision 189773]`出现`g++ --std=c++11 test.cpp`以下错误消息：

```
In file included from /usr/include/c++/4.7/x86_64-suse-linux/bits/c++allocator.h:34:0,
                 from /usr/include/c++/4.7/bits/allocator.h:48,
                 from /usr/include/c++/4.7/vector:62,
                 from test.cpp:1:
/usr/include/c++/4.7/ext/new_allocator.h: In instantiation of ‘struct __gnu_cxx::new_allocator<const std::vector<Foo> >’:
/usr/include/c++/4.7/bits/allocator.h:89:11:   required from ‘class std::allocator<const std::vector<Foo> >’
/usr/include/c++/4.7/bits/alloc_traits.h:89:43:   required from ‘struct std::allocator_traits<std::allocator<const std::vector<Foo> > >’
/usr/include/c++/4.7/ext/alloc_traits.h:109:10:   required from ‘struct __gnu_cxx::__alloc_traits<std::allocator<const std::vector<Foo> > >’
/usr/include/c++/4.7/bits/stl_vector.h:76:28:   required from ‘struct std::_Vector_base<const std::vector<Foo>, std::allocator<const std::vector<Foo> > >’
/usr/include/c++/4.7/bits/stl_vector.h:208:11:   required from ‘class std::vector<const std::vector<Foo> >’
test.cpp:11:25:   required from here
/usr/include/c++/4.7/ext/new_allocator.h:83:7: error: ‘const _Tp* __gnu_cxx::new_allocator<_Tp>::address(__gnu_cxx::new_allocator<_Tp>::const_reference) const [with _Tp = const std::vector<Foo>; __gnu_cxx::new_allocator<_Tp>::const_pointer = const std::vector<Foo>*; __gnu_cxx::new_allocator<_Tp>::const_reference = const std::vector<Foo>&]’ cannot be overloaded
/usr/include/c++/4.7/ext/new_allocator.h:79:7: error: with ‘_Tp* __gnu_cxx::new_allocator<_Tp>::address(__gnu_cxx::new_allocator<_Tp>::reference) const [with _Tp = const std::vector<Foo>; __gnu_cxx::new_allocator<_Tp>::pointer = const std::vector<Foo>*; __gnu_cxx::new_allocator<_Tp>::reference = const std::vector<Foo>&]’ 
```

相同的代码在 VS2012 上编译得很好，但在 g++ 下严重失败，我一点也不知道如何解释错误消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T07:28:07.387

我很惊讶您在其他地方没有遇到问题，因为这`vector<const vector<Foo> >`不是可能的数据类型。

a 的 value_type`std::vector`必须至少是可复制构造 (C++03) 或可移动 (C++11)。如果它是 const，则不能分配或移动它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T08:03:10.963

用于标准容器的分配器要求不允许`const`容器持有对象。C++11 17.6.3.5“分配器要求”概述了使用以表 27 开头的一组表的标准分配器的要求。在表 27 中，第一个定义是针对“描述性变量” ，`T`定义为“任何*非常量*、非引用对象类型”。用于分配器类定义的描述性变量和是：`U``C`*`X``Y`*

 *> `X`- 类型的分配器类`T`
> 
> `Y`- 对应类型的分配器类`U`

总之，标准分配器是根据非常量类型的参数化定义的。

有一个旧的 GCC/libstdc++ 错误（已解决为无效）可以追溯到 2004 年（C++2003 对在容器中存储 const 对象有类似的限制，但它更容易显示，因为 2003 标准更直接地说存储在容器中的对象必须是“可分配的”）。

*   [http://gcc.gnu.org/bugzilla/show_bug.cgi?id=16875](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=16875)*

# xul - 如何在 XULRunner 应用程序中设置全局首选项

> ID：12909019
> 
> 赞同：1
> 
> 时间：2012-10-16T06:52:21.103
> 
> 标签：xul, xulrunner

通常我们设置 XULRunner 应用首选项：

```
var pref = Cc["@mozilla.org/preferences-service;1"].getService(Ci.nsIPrefBranch);
pref.setBoolPref(name,value); 
```

但是这些首选项存储在用户配置文件中。这意味着如果您创建新的 XULRunner 应用程序配置文件，首选项将丢失。

有没有办法在全球范围内设置偏好或在个人资料之间共享偏好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:24:13.073

XULRunner 将所有数据存储在配置文件中——创建新配置文件时从头开始是它的重点。您真的应该重新考虑将数据存储在用户配置文件之外，这通常是出乎意料的，而且是个坏主意。

但是，如果您真的想这样做，那么您就得靠自己了，您需要在用户配置文件之外的某个地方存储一个自定义文件。例如，您可以将文件存储在用户的主目录中：

```
Components.utils.import("resource://gre/modules/FileUtils.jsm");
var file = FileUtils.getFile("Home", ["data.txt"]);
// Write to file here 
```

该文件将为该计算机用户的所有配置文件共享。有关详细信息，请参阅[文档](https://developer.mozilla.org/en-US/docs/Code_snippets/File_I_O)。

请注意，即使这种方法也无法让您在同一台计算机上的不同用户之间共享首选项 - 通常没有保证所有用户都具有写访问权限的目录。

# macos - “快速安装 Gem”不适用于 RubyMine

> ID：12909028
> 
> 赞同：2
> 
> 时间：2012-10-16T06:53:11.290
> 
> 标签：macos, osx-mountain-lion, rubymine

我刚刚完成了 RubyMine 4.5 的全新安装，以便快速入门 Rails 开发。

每当我尝试使用**Tools > Quick Install Gem...**命令安装任何 Gem 时，我都会收到以下错误（以下特定于 flickraw gem）

> 安装宝石失败
> 
> 未安装以下 gem：
> 
> flickraw(0.9.6): 在执行 gem 时...
> 
> (Errno::EACCESS)
> 
> 权限被拒绝 - /Users/Andy/.rvm/gems/ruby-1.9.3-p194/cache/flickraw-0.9.6.gem

我想我知道这是一个权限错误......但为什么会发生，这不应该有效吗？我该如何解决？

我在最新版本的 OSX Mountain Lion 上运行它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T07:17:32.110

我以前也遇到过类似的问题，原来是因为 sudo 是我正在使用的 rvm ruby​​ 安装中安装的一些 gem 的所有者。我想我偶然用 sudo 安装了一些东西，我不知道——但是去检查一下`/Users/Andy/.rvm/gems/ruby-1.9.3-p194/cache`，`/Users/Andy/.rvm/gems/ruby-1.9.3-p194/gems`看看 sudo 是否拥有`cache/flickraw-0.9.6.gem`或任何文件夹`gems`，如果需要，将所有者和组改回给你......我实际上有很多搞砸了选择仅删除并重建该红宝石。

# c++ - C++ 部分互斥锁/临界区锁

> ID：12909029
> 
> 赞同：3
> 
> 时间：2012-10-16T06:53:17.390
> 
> 标签：c++, events, mutex, critical-section

我在 VS2010 中使用 C++，我有一个带有一堆属性（getter 和 setter）的容器类（实际上是一堆具有属性的对象——但让我们简化它并假设它只是容器类上的一个属性。

在这个容器类上有一个 Update 函数，重要的是在 Update 方法执行时阻塞 setter 方法。

该应用程序是多线程的，所以我想使用互斥锁/事件/关键部分来处理这个问题。

我的问题是：如何在 Update 方法运行时锁定/阻止 setter，而不让 setter 方法相互阻止？此外，我还需要设置器来阻止 Update 方法。

换句话说，我需要一个正常的临界区机制，除了 setter 不应该互相阻塞。

在此先感谢，马丁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T07:08:21.710

如果不需要同时保护设置器（例如：setPropertyX(value)），则可以使用单个信号量和手动可重置事件来实现，其中初始资源计数是您要防范的属性数量。

在任何给定的设置器中：

*   等待设置的 NoUpdatePendingEvent。
*   获取信号量资源 (1)
*   更新属性值
*   释放信号量资源（一）

在主更新例程中

*   NoUpdatePending 事件清除
*   获取信号量资源 (n)
*   做更新
*   释放信号量资源 (n)
*   NoUpdatePending 事件集

其中 (n) 是您拥有的属性的数量。NoUpdatePending 的初始状态已设置，等待它不会重置它（因此只有手动重置要求）。只要有任何属性正在更新，您就无法输入更新。一旦您输入更新代码并清除 NoUpdatePending 事件，传入的 prop-updates 将停止该事件并且不会消耗信号量资源。所有正在运行的 prop-sets 最终都会释放更新继续所需的资源。

综上所述，仍然单独考虑属性并发性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T07:00:17.213

您可以为每个属性设置一个关键部分。在设置器中，您获取特定于属性的关键部分并完成您的工作，这样每个属性就不会相互阻塞。

在进行更新之前，在该`Update`方法中获取所有特定于属性的关键部分。如果有人在您更新时调用它们，这将导致设置器现在阻止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-11T20:53:30.110

这是一个仅使用临界区和整数的选项，并不关心您有多少个 setter：

在每个二传手：

*   获取临界区 csUpdate
*   InterlockedIncrement(&countSettersActive)
*   发布临界区 csUpdate
*   更新属性
*   InterlockedDecrement(&countSettersActive)

在主更新例程中：

*   获取临界区 csUpdate
*   while (InterlockedCompareExchange(&countSettersActive, 0, 0) != 0) { sleep(1); }
*   做更新
*   发布临界区 csUpdate

# c# - 项目架构

> ID：12909031
> 
> 赞同：0
> 
> 时间：2012-10-16T06:53:27.703
> 
> 标签：c#, .net, architecture

我已经完成了一个 Windows 项目，其中有一个简单的下载按钮，可以从外部门户网站下载内容。在这里，我已经完成了用于 CRUD 操作的数据访问类。现在我需要分离 UI 和业务逻辑层。我的 UI 代码看起来有点凌乱。所以我需要创建一个 BLL。对于BLL，我可以编写html解析方法（ProcessHtml）和使用httpwebrequest获取网页html输出的方法（SendHTTPRequest）和使用html内容写入doc文件的方法（WriteToFile）。这有意义吗？我可以在 BLL 中使用以下方法。

```
 BLL  
  ProcessHtml()
SendHTTPRequest()
WriteToFile() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:02:39.657

这里层的边界太细了，这取决于你想如何编码你的项目。

**在这种情况下，我**要做的是介绍一些：*BridgeLayer*，它将 UI 数据转换为适合从某个商店存储/检索信息的格式。在那个层我会推`HtmlAgilityPack`。

如果你熟悉`MVVM`设计，换句话说就是`ModelView`层：知道如何用数据制作对话 UI，考虑到它们的*格式*可能完全不同。

# java - 使用 Hibernate 检索特定记录

> ID：12909032
> 
> 赞同：1
> 
> 时间：2012-10-16T06:53:30.543
> 
> 标签：java, hibernate

我想使用 Hibernate 从数据库中检索特定记录。我想要做的在函数下面注释。

```
public List<Customer> showCustomer(long customerIdFromCustomerListPage)
        throws Exception {

    Session session = HibernateUtil.getSessionFactory().openSession();
    Transaction transaction = null;
    List<Customer> customerList = new ArrayList<Customer>();
    try {
        transaction = session.beginTransaction();

        **//Select * from Customers where customerId="customerIdFromCustomerListPage"**

        transaction.commit();
    } catch (HibernateException e) {
        transaction.rollback();
        e.printStackTrace();
    } finally {
        session.close();
    }
    return customerList;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:25:05.790

尝试这样的事情

```
 public Customer getCustomer(Long customerIdFromCustomerListPage)
    throws Exception {

      Session session = HibernateUtil.getSessionFactory().openSession();
      Customer customer = (Customer )session.get(Customer.class, customerIdFromCustomerListPage); 
      return customer ;

} 
```

# knockout.js - Knockout js 这个可以轻松建模吗

> ID：12909037
> 
> 赞同：1
> 
> 时间：2012-10-16T06:53:43.553
> 
> 标签：knockout.js

是否可以使用淘汰赛 js 对这种情况进行建模？

假设我有 3 个字段：

`Current Income`：如果我更改此值，则`Retirement Income`需要更新为`(Current Income * Percentage of Current Income) / 100`

`Retirement Income`：如果我更改此值，则`Percentage of Current Income`需要更新为`(Retirement Income/Current Income) * 100`

`Percentage of Current Income`：如果我更改此值，则`Retirement Income`需要更新为`(Current Income * Percentage Of Current Income) / 100`

这是某种循环依赖吗？可以用knockout js建模吗？我假设所有字段都需要计算......但我不确定如何设置默认值或使用尚未声明的计算 observables。

jsfiddle 起点：http: [//jsfiddle.net/LkqTU/4482/](http://jsfiddle.net/LkqTU/4482/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:02:32.603

您可以使用`read/write computed`：

```
var ViewModel = function() {
    var self = this;

    self.currentIncome = ko.observable(1000);
    self.currentIncomePercent = ko.observable(5);

    self.retirementIncome = ko.computed({
        read: function() {
            var result = self.currentIncome() * self.currentIncomePercent() / 100;
            return result.toFixed(2);
        },
        write: function(value) {
            var result = value / self.currentIncome() * 100;
            self.currentIncomePercent(result.toFixed(2));
        }
    });
};

ko.applyBindings(new ViewModel()); 
```

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/LkqTU/4503/](http://jsfiddle.net/vyshniakov/LkqTU/4503/)

# java - 使用正弦和余弦绘制斜角正方形

> ID：12909040
> 
> 赞同：2
> 
> 时间：2012-10-16T06:53:56.147
> 
> 标签：java, graphics, drawing, awt, trigonometry

这是我第一次在论坛上发帖。但我想我会跳进去问.. 我正在尝试用 x、y、宽度、高度和角度绘制一个矩形。我不想创建图形 2D 对象并使用变换。我认为这是一种低效的方法。我正在尝试使用 for 循环绘制一个带旋转的正方形以迭代到正方形宽度，在正方形高度处绘制每次迭代的线条。我对三角的理解真的很缺乏，所以......我当前的代码绘制了一个时髦的三角形。如果还有其他这样的问题，对重复的答案感到抱歉。如果您对我的编码有任何指示，我会喜欢一些更正或指示。

/编辑：抱歉没有问题。我需要知道如何使用正弦和余弦来绘制正方形或矩形，旋转中心在正方形或矩形的左上角。通过使用带角度的 sin 和 cos 来获取坐标 (x1,y1)，然后使用带角度加 90 度的 sin 和 cos 函数来获取 (x2,y2) 的坐标。使用 counter 变量从左到右绘制随角度变化的从上到下的线条。

```
for (int s = 0; s < objWidth; s++){

       int x1 = (int)(s*Math.cos(Math.toRadians(objAngle)));
       int y1 = (int)(s*Math.sin(Math.toRadians(objAngle)));

       int x2 = (int)((objWidth-s)*Math.cos(Math.toRadians(objAngle+90)));
       int y2 = (int)((objHeight+s)*Math.sin(Math.toRadians(objAngle+90)));

       b.setColor(new Color((int)gArray[s]));
       b.drawLine(objX+x1, objY+y1, objX+x2, objY+y2);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:24:43.893

它被称为[旋转矩阵](http://en.wikipedia.org/wiki/Rotation_matrix)。如果您的线条在旋转前具有以下坐标：

第 1 行：(0, 0) - (0, 高度)

第 2 行：(1, 0) - (1, 高度)

...

线宽：(width, 0) - (width, height)

然后应用旋转矩阵变换将帮助您：

```
for (int s = 0; s < objWidth; s++){
  int x1 = cos(angle)*s
  int y1 = sin(angle)*s

  int x2 = s * cos(angle) - objHeight * sin(angle)
  int y2 = s * sin(angle) + objHeight * cos(angle) 

//the rest of code
} 
```

希望我没有犯错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:29:57.603

你的意思是像“菱形”吗？[http://en.wikipedia.org/wiki/Rhombus](http://en.wikipedia.org/wiki/Rhombus)（只能站着，可以这么说）

如果是这样，你可以只画四条线，水平线的 x 相差 xdiff = height*tan(objAngle)。

这样您的菱形将由带有点的线组成

```
p1 = (objX,objY) (lower left corner)
p2 = (objX+xdiff,objY+height) (upper left corner)
p3 = (objX+xdiff+width,objY+height) (upper right corner)
p4 = (objX+xdiff+width,objY) (lower right corner) 
```

你将画线从 p1 到 p2 到 p3 到 p4 再回到 p1。

或者你有什么其他的想法？

# objective-c - 无法使用 removeFromSuperView 删除 MPMoviePlayerController

> ID：12909042
> 
> 赞同：0
> 
> 时间：2012-10-16T06:54:04.093
> 
> 标签：objective-c, ios, ipad

我需要从视图中删除 MPMoviePlayerController。我试过这个。

```
[moviePlayerController stop];
[moviePlayerController.view removeFromSuperview]; 
```

视频停止，但视图未删除。我猜`[moviePlayerController.view removeFromSuperview];`是行不通的。可能是什么原因 ？这个问题的任何解决方案..？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T20:42:00.513

这是一个已知问题，您使用的是 ARC，然后您必须将播放器添加到您的 .h 中，因为如果您在本地声明它仍然会被释放。

```
@property (nonatomic, strong) MPMoviePlayerController* controller; 
```

添加视图：

```
self.controller = [[MPMoviePlayerController alloc] initWithContentURL:YOURVIDEOURL];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(moviePlayBackDidFinish:)
                                             name:MPMoviePlayerPlaybackDidFinishNotification
                                           object:self.controller];

self.controller.controlStyle = MPMovieControlStyleDefault;
self.controller.shouldAutoplay = YES;

[self.view addSubview:self.controller.view];
[self.controller setFullscreen:YES animated:YES]; 
```

然后删除视图：

```
- (void) moviePlayBackDidFinish:(NSNotification*)notification {

if (UIDeviceOrientationIsLandscape([UIDevice currentDevice].orientation))
{

    [[UIApplication sharedApplication] setStatusBarOrientation:UIDeviceOrientationPortrait animated:NO];

}

MPMoviePlayerController *player = [notification object];
[[NSNotificationCenter defaultCenter]
 removeObserver:self
 name:MPMoviePlayerPlaybackDidFinishNotification
 object:player];

if ([player
     respondsToSelector:@selector(setFullscreen:animated:)])
{
    [player.view removeFromSuperview];
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-20T12:49:04.553

这个问题通常是因为播放器被释放。解决方案是在.h中声明播放器实例，属性为“strong”。

```
@property (nonatomic,strong) MPMoviePlayerController* mpController; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T07:15:40.170

不完全确定，但由于我遇到了由于自动解除分配而导致电影播放器​​没有出现的问题，我想你可以设置`moviePlayerController = nil;`.

不完全确定视图是否会消失，但值得一试！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T07:21:40.353

尝试dismissViewController:animated: 这可能会奏效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T07:27:26.107

```
[moviePlayerController stop];
[moviePlayerController setContentURL:nil];
[moviePlayerController.view removeFromSuperview]; 
```

这在我的项目中运行良好

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T12:33:27.690

对我来说，我尝试了所有这些： `[moviePlayer stop]; [moviePlayer setContentURL:nil]; [moviePlayer.view removeFromSuperview]; moviePlayer = nil;`

没有任何效果。我发现它必须由于我的 MPMoviePlayerController 进入全屏。修复？

```
 [moviePlayer setFullscreen:NO animated:YES]; 
```

# javascript - 是否可以在javascript的提示警报中提供多个输入框？

> ID：12909044
> 
> 赞同：8
> 
> 时间：2012-10-16T06:54:09.387
> 
> 标签：javascript, jquery

我有一种情况，我必须在 JavaScript 或 jQuery 的提示框中输入多个输入框，有什么办法可以做到这一点。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-16T06:56:55.607

看看[jQuery UI Dialog](http://jqueryui.com/dialog/)，尤其是模态表单[示例](http://jqueryui.com/dialog/#modal-form)。

```
$(document).ready(function() {
    $("#dialog").dialog({
        close: function(event, ui) { 
            // do whatever you need on close
        }
    });
});
```

```
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<div id="dialog">
  <input type="text" id="input1" />
  <input type="text" id="input2" />
</div>
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T06:58:50.357

您无法调整浏览器的“提示框”，但是您可以使用`jquery ui dialog box`

```
$( "#dialog" ).dialog(); 
```

# indexing - HBase 是否使用主索引？

> ID：12909045
> 
> 赞同：6
> 
> 时间：2012-10-16T06:54:10.713
> 
> 标签：indexing, hbase, lookup-tables, database-scan

HBase 如何执行查找和检索记录？例如，RDBMS 的 B 树在 HBase 中的等价物是什么？

[编辑]

我了解 HBase 如何解析 -ROOT- 和 .META。表以找出哪个区域保存数据。但是本地查找是如何执行的呢？

为了更好地说明，这里有一个例子：

1.  我正在使用键 77 开始搜索（获取或扫描）记录。
2.  HBase 客户端认为密钥包含在由 RegionServer X 持有的 50-100 区域中。
3.  HBase 客户端联系 RegionServer X 以获取数据。

RegionServer X 如何找到记录 77 的位置？

RegionServer 是否使用某种查找表（例如 RDBMS 的 B 树？）作为区域的键？或者它是否需要读取 StoreFiles 的所有内容，从 50 到 77 的记录？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T19:24:49.817

**TL;DR：**它看起来像 HBase（像 BigTable），用作类似于 B+ 树的结构来进行查找。所以行键是主索引（默认情况下是 HBase 中任何排序的唯一索引。）

**长答案：**从这篇[关于 HBase 写入路径的 Cloudera 博客文章](http://www.cloudera.com/blog/2012/06/hbase-write-path/)中，看起来 HBase 的操作方式如下：

> 每个 HBase 表都由一组服务器托管和管理，这些服务器分为三类：
> 
> *   一台活动的主服务器
> *   一台或多台备份主服务器
> *   许多区域服务器
> 
> 区域服务器有助于处理 HBase 表。因为 HBase 表可能很大，所以它们被分成称为区域的分区。每个区域服务器处理一个或多个这些区域。

下一段有更多细节：

> 由于行键是排序的，因此很容易确定哪个区域服务器管理哪个键。...每个行键属于由区域服务器提供服务的特定区域。因此，基于 put 或 delete 的键，HBase 客户端可以找到合适的区域服务器。首先，它从 ZooKeeper quorum 中找到托管 -ROOT- 区域的区域服务器的地址。客户端从根区域服务器中找出托管 -META- 区域的区域服务器的位置。从元区域服务器中，我们最终找到为请求区域提供服务的实际区域服务器。这是一个三步过程，因此缓存区域位置以避免这一系列昂贵的操作。

从[另一篇 Cloudera 博客文章](http://www.cloudera.com/blog/2012/06/hbase-io-hfile-input-output/)来看，用于将 HBase 保存在文件系统上的确切格式似乎在不断变化，但上述行键查找机制应该或多或少是一致的。

这种机制非常非常类似于[Google BigTable 的查找](http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en/us/archive/bigtable-osdi06.pdf)（您将在 PDF 的第 4 页末尾开始的第 5.1 节中找到详细信息），它使用三级层次结构来查询行键位置：Chubby ->根平板电脑 -> METADATA 平板电脑 -> 实际平板电脑

更新：回答关于区域服务器内部查找的问题：我不确定，但由于行键是排序的，并且 HBase 知道开始键和结束键，我怀疑它使用[二进制搜索](http://en.wikipedia.org/wiki/Binary_search)或[插值搜索](http://en.wikipedia.org/wiki/Interpolation_search)，两者都非常快 - 分别是 log(n) 和 log(log(n))。我认为 HBase 不需要扫描从起始行键到需要查找的行，因为对排序键的搜索是众所周知的问题，它有几个有效的解决方案。

# c# - Windows 8 Metro 应用程序 C# - 在文本框中的字符串中滑动符号？

> ID：12909046
> 
> 赞同：0
> 
> 时间：2012-10-16T06:54:15.160
> 
> 标签：c#, windows, textbox

我正在制作一个敦促输入金额的文本框。因此，当用户在该 TextBox 中键入 1000 时，它会在 TextBox 中自动变为 1,000。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:20:20.723

我不喜欢基于长度的解决方案（您需要为更大的数字实现更多代码）。

在 google 上找到的一种解决方案是：

在 XAML 文件上：

```
<code>
<textbox x:name="PurchasePriceTextBox" text="$0.00" keydown="CurrencyTextBox_KeyDown" lostfocus="CurrencyTextBox_LostFocus" />
</code> 
```

在 CS 文件上：

```
private void CurrencyTextBox_KeyDown(object sender, KeyRoutedEventArgs e)
{
char key = Convert.ToChar(e.Key);
//if the key is not 0-9 prevent the event from being handled further
if (!(key >= '0' && key <= '9'))
   e.Handled = true;  
}
private void CurrencyTextBox_LostFocus(object sender, RoutedEventArgs e)
{
   var textBox = (TextBox)sender;
   decimal value = 0;
   //if the textbox is not already formatted as currency, format it
   if(Decimal.TryParse(textBox.Text.Trim(), NumberStyles.Number | NumberStyles.AllowCurrencySymbol, CultureInfo.CurrentUICulture, out value))
   {
      textBox.Text = string.Format("{0:C}", value);
   }
} 
```

[资源](http://blog.evanrosebrook.com/2012/09/xaml-metro-style-numeric-only-currency.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:07:38.573

利用文本框的 textbox_TextChanged 事件，如下所示：

```
private void textbox_TextChanged(object sender, TextChangedEventArgs e)
    {
        if (textbox.Text.Length ==4)
        {
            textbox.Text = textbox.Text.Insert(1, ",");
            return;
        }        
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T07:28:31.287

在 Focus Leave 事件中，只需根据您的长度循环：

```
if (textbox.Text.Length <4)
{
    return;
}
int i = 2;
if textbox.Text.Length%2 ==0)
{
    i = 1;
}
l = textbox.Text.Length;
while(l > 3)
{
    textbox.Text = textbox.Text.Insert(i, ",");
    i+=2;
    l-=2;
}
return; 
```

# xml - 如何针对我的 Visual Studio 项目中已包含的 xsd 文件在线验证 xml 文档

> ID：12909048
> 
> 赞同：1
> 
> 时间：2012-10-16T06:54:17.763
> 
> 标签：xml, validation, xsd, runtime, project

如何针对我的 Visual Studio 项目中已包含的 xsd 文件在线验证 xml 文档。谢谢

# python - 如何以 django 形式覆盖模型字段

> ID：12909051
> 
> 赞同：1
> 
> 时间：2012-10-16T06:54:29.573
> 
> 标签：python, django

在我的模型中，我有这个

```
description = tinymce_models.HTMLField(help_text='A short descripton') 
```

现在我想将此字段呈现为普通文本区域而不是 tinymece 字段。我无法编辑模型文件。

有什么办法可以覆盖表单中的相同字段。

像这样

```
description = forms.widgets.Textarea(attrs={'rows':4, 'cols':40}) 
```

我试过这个但没有奏效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:58:33.243

您可以指定要在`modelform`s`Meta`类中使用的小部件。例如：

```
class MyModelForm(ModelForm):
    class Meta:
        model = MyModel
        widgets = {
            'description': Textarea(attrs={'rows': 4, 'cols': 40}),
        } 
```

参考：[覆盖默认字段类型或小部件](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#overriding-the-default-field-types-or-widgets)

# silverlight - 未处理异常的代码不起作用

> ID：12909054
> 
> 赞同：0
> 
> 时间：2012-10-16T06:54:44.923
> 
> 标签：silverlight, windows-phone-7, exception

我正在使用以下代码处理未处理的异常。

```
private void Application_UnhandledException(object sender, ApplicationUnhandledExceptionEventArgs e)
    {
        if (System.Diagnostics.Debugger.IsAttached)
        {
            // An unhandled exception has occurred; break into the debugger
           System.Diagnostics.Debugger.Break();
        }

        e.Handled = true;
        Error.Exp = e.ExceptionObject;
        (RootVisual as Microsoft.Phone.Controls.PhoneApplicationFrame).Source = new Uri("/Error.xaml", UriKind.Relative);
    } 
```

此代码应将控件定向到`Error.xaml`页面，但它会以异常的错误消息进入 Visual Studio（即使在注释掉`if`块之后）。这里有什么问题？

错误的来源是

```
GeneralTransform generalTransform1 = canvas1.TransformToVisual(start_rec); 
```

错误消息是“未处理参数异常。参数不正确。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:17:52.843

```
 try
        {
                   // do something with your crash , report it or write log
        }
        catch
        {
        }
        if (System.Diagnostics.Debugger.IsAttached)
        {
            // An unhandled exception has occurred; break into the debugger
            System.Diagnostics.Debugger.Break();
        } 
```

调试到异常抛出的地方。

# google-analytics - 使用外部支付网站进行 Google Analytics（分析）广告系列跟踪

> ID：12909055
> 
> 赞同：2
> 
> 时间：2012-10-16T06:54:47.763
> 
> 标签：google-analytics, e-commerce, user-tracking

我有一个网上商店，用户来自许多不同的其他网站和时事通讯。为了跟踪人们的来源，我们使用 Google Analytics 中的广告系列。现在我们正在实施我们自己的外部支付网站。

用户下订单后，他们将被重定向到我们的支付网站。成功付款后，应将其重定向回原始站点。在原始网站上，电子商务值将被发送到 Google Analytics（分析）中。

当我像上面描述的那样执行此操作时，我在插入电子商务数据时丢失了广告系列。如何确保这些信息不会丢失？

[编辑]
我发现添加 'utm_nooverride' 应该可以解决问题。但是，我无法在 Google Analytics 文档中清楚地找到它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:48:48.237

解决上述问题：

在这两个网站上（是的，支付网站也应该有一个 GA），你需要设置`_setAllowLinker`to`true`和`_setDomainName`to `'none'`。

IE：

```
<script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-XXXXX-YY']);
    _gaq.push(['_trackPageview']);

    _gaq.push(['_setAllowLinker', true]);
    _gaq.push(['_setDomainName', 'none']);

    (function () {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script> 
```

# ruby-on-rails - 将 Rails 应用程序从 SQLite 切换到 Postgres 以进行本地开发

> ID：12909058
> 
> 赞同：0
> 
> 时间：2012-10-16T06:55:03.427
> 
> 标签：ruby-on-rails, sqlite, postgresql

我有一个部署在 Heroku 上的小 Rails 应用程序。他们需要一个 Postgres 数据库，从他们这边切换 SQLite3 不是问题，但是现在我无法在每次我想查看更改时不推送到 Heroku 的情况下进行本地开发。我下载并安装了所有 Postgres 资产，包括保持服务器运行的小 MenuBar 应用程序，并且已经完成了所有文档。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:00:02.720

尝试这个

写在你的gemfile中

```
group :development do
  gem "sqlite3"
end
group :production do
 gem 'pg'
end 
```

当你在开发模式下工作时，它使用 sqlite3，当你在生产模式下工作时，它使用 pg

# c++ - 我可以使用 C++ 删除 Stacks 中的特定位置数据吗？

> ID：12909065
> 
> 赞同：2
> 
> 时间：2012-10-16T06:55:34.447
> 
> 标签：c++

我开始在 C++ 中使用 Stack。我制作了推送和弹出的功能。当我们调用 pop 函数时，它会删除堆栈中的顶部数据或信息。

是否可以先找到堆栈中的数据位置并删除该位置的数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T06:59:06.900

不，堆栈的全部意义在于它是先进先出或先进先出。无论您推入堆栈的任何数据都无法访问，直到顶部的数据已从堆栈中弹出。

如果您需要访问顶层之下的数据，那么您只需要使用另一个数据结构，例如数组或列表。

我建议您花一些时间阅读有关[C++ 数据结构](http://www.dreamincode.net/forums/topic/10157-data-structures-in-c-tutorial/)的内容。这将使您更好地了解每种数据结构的用途，以及何时应该使用特定的数据结构。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:05:37.157

如果您自己从头开始实现堆栈，是的。如何做到这一点取决于它是如何实现的。如果是平面内存，则需要将要删除的元素之后的元素移动到该元素的位置，从而覆盖它。如果是链表，则需要使要删除的元素之前的元素指向它之后的元素。

但对于堆栈来说这是一个不常见的操作（堆栈通常只支持压入末端并从中弹出）。也许你想要的只是一个数组或链表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T07:17:54.410

首先我要说，你必须听那些家伙说stack不是你需要这样玩的DS。堆栈被设计为遵循推送和弹出操作。如果我们尝试从任何位置删除任何元素，那么完全为了这个目的而拥有一个单独的数据结构有什么意义，您可以只使用数组列表或链表。

话虽如此，是的，您所要求的可以做到，但是仅仅因为可以做到，就不应该做到，否则，它就违背了拥有这样一个 DS 的全部目的。您可以轻松找到堆栈的大小，当您这样做时，您只需要遍历它并从该位置删除特定元素。但我宁愿，你不要用 stack 那样做。

# javascript - 如果地址是 x 则运行脚本？

> ID：12909075
> 
> 赞同：3
> 
> 时间：2012-10-16T06:56:17.820
> 
> 标签：javascript, jquery

几个月前我为我的客户建立了一个网站，当用户点击导航上的链接时，新内容将滑动可见，而旧内容将被隐藏。我还为客户建立了一个网上商店，他想要一个指向他的主站点图片库的链接。但是，由于该站点实际上只有一个页面，其中包含完整的内容，并且新内容使用 javascript 显示，因此键入[http://yoursite.com/#gallery](http://yoursite.com/#gallery)实际上会加载第一页。是否可以做类似的事情

```
$(document).ready(function(){
   $(page).load(function(){
      $('#page1').slideUp();
      $('#page2').slideUp();
   });
}); 
```

并根据输入的地址显示想要的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:08:31.110

```
$(function(){
   if (document.location.hash == '#gallery') {
       $('#gallery').show();
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:12:20.957

```
$(function(){
    var activePage = window.location.hash;  // Gets the active page via location hash
    $('[id^="page"]').not(activePage).slideUp();  // Slides up all inactive pages
    $(activePage).slideDown();  // Slides down the active page
}); 
```

# ios - self.customView.backgroundColor 分配导致泄漏？

> ID：12909077
> 
> 赞同：0
> 
> 时间：2012-10-16T06:56:33.603
> 
> 标签：ios, memory-leaks, retain

我正在为我正在开发的应用程序以编程方式创建自己的自定义视图模板。为了实现这一点，我有一个自定义视图控制器`MyVC`，`myView`上面添加了一个自定义视图，这是`MyVC`. 该类看起来像这样：

```
MyVC.h   
#import <UIKit/UIKit.h>

@interface MyVC : UIViewController{
MyCustomView *myView;
}

@property(nonatomic, retain) MyCustomView *myView

@end 
```

在实现中，我想为“myView”分配背景颜色，并在 viewDidLoad 中执行类似的操作（在合成我的 corse 属性之后）

```
-(void)viewDidLoad{
self.myView = [[MyCustomView alloc] initWithFrame:someFrame];

self.myView.backgroundColor = [UIColor clearColor];  

} 
```

现在，当我分析我的代码时，我在分配颜色时收到“对象可能泄漏”的消息。是因为 myView 或背景颜色或两者都被保留了吗？无论如何，我想知道如何在没有潜在泄漏的情况下正确完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:25:22.750

如果您不使用 ARC，您应该释放保留的财产：

```
-(void)viewDidLoad{
//allocate and initialize myView

self.myView = [[[MyCustomView alloc] initWithFrame:someFrame] autorelease];
self.myView.backgroundColor = [UIColor clearColor];  
} 
```

# windows - svn：如何从 svn 命令行列出最后一个标签？

> ID：12909079
> 
> 赞同：6
> 
> 时间：2012-10-16T06:56:34.690
> 
> 标签：windows, svn, tags, tortoisesvn

他已经构建了一个打包器，它在 svn 中区分最后到期标签并准备目录折叠并将“diff”文件复制到正确的 plave 中。

但是我们必须在命令行中输入两个标签名称，因此我们必须查阅修订图（来自 windows）。

有没有办法从 svn 命令行客户端列出标签？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-16T10:56:12.190

这将在 Windows、Mac 或 Linux 上从命令行运行，但它要求当前工作目录位于工作副本中：

```
svn ls "^/tags" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-07T12:33:32.307

带电源外壳：

```
$path = (([Xml] (svn log --xml $Url --verbose --username $Username --password $Password)).Log.LogEntry.Paths.Path |
? { $_.action -eq 'A' -and $_.kind -eq 'dir' -and $_.InnerText -like '*tags*'} |
Select -Property @(
    @{N='date'; E={$_.ParentNode.ParentNode.Date}},
    @{N='path'; E={$_.InnerText}} )|
Sort Date -Descending |
Select -First 1).path 
```

$Url 是你标签的 url

# opengl - 以后可以重用 glsl 顶点着色器输出吗？

> ID：12909081
> 
> 赞同：5
> 
> 时间：2012-10-16T06:56:46.230
> 
> 标签：opengl, glsl, vertex-shader

我有一个巨大的网格（100k 三角形），需要绘制几次并将每一帧融合在一起。是否可以重用网格第一遍的顶点着色器输出，并在以后的遍中跳过顶点阶段？我希望在顶点管道和光栅化上节省一些成本。

面向 OpenGL 3.0，可以使用变换反馈等功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T07:42:12.417

我会先回答你的基本问题，然后再回答你真正的问题。

是的，您可以存储顶点变换的输出以供以后使用。这称为变换反馈。它需要 OpenGL 3.x 级硬件或更好的硬件（又名：DX10 硬件）。

它的工作方式分为两个阶段。首先，您必须将程序设置为具有基于反馈的变化。你用[`glTransformFeedbackVaryings`](http://www.opengl.org/wiki/GLAPI/glTransformFeedbackVaryings). 这必须在链接程序*之前*完成，类似于[`glBindAttribLocation`](http://www.opengl.org/wiki/GLAPI/glBindAttribLocation).

完成后，您需要将缓冲区（根据您设置变换反馈变化的方式）绑定到`GL_TRANSFORM_FEEDBACK_BUFFER`with `glBindBufferRange`，从而设置将数据写入哪些缓冲区。然后您使用 glBeginTransformFeedback 开始您的反馈操作并正常进行。您可以使用[原始查询对象](http://www.opengl.org/wiki/Query_Object#Primitive_queries)来获取写入的原始数量（以便以后可以使用 绘制`glDrawArrays`），或者如果您有 4.x 级硬件（或 AMD 3.x 硬件，所有这些都支持 ARB_transform_feedback2），您可以[在不查询基元数量的情况下进行渲染](http://www.opengl.org/wiki/Vertex_Rendering#Transform_feedback_rendering)。这样可以节省时间。

现在对于您的*实际问题*：它可能不会帮助您购买任何真正的性能。

您正在绘制地形。地形并没有真正得到任何转变。通常你有一个或两个矩阵乘法，可能有法线（尽管如果你正在渲染阴影贴图，你甚至没有那个）。就是这样。

很有可能，如果你用这样一个简单的着色器将 100,000 个顶点向下推到 GPU 上，你可能已经饱和了 GPU 渲染它们的能力。您可能会在原始装配/设置上遇到瓶颈，而且速度不会更快。

所以你可能不会从中得到太多。反馈通常用于*生成*三角形数据以供以后使用（有效的伪计算着色器），或用于保存*复杂*变换的结果，如使用双四元数的矩阵调色板蒙皮等。一个简单的矩阵乘法运算几乎不会成为雷达上的一个亮点。

如果你喜欢，你可以试试。但很有可能你不会有任何问题。通常，最好的解决方案是采用某种形式的延迟渲染，这样您只需为对象投射的每个阴影渲染一次 + X（其中 X 由阴影映射算法确定）。而且由于阴影贴图需要不同的变换，因此无论如何您都不会从反馈中获得任何收益。

# javascript - 如何使用 Knockout-sortable 跟踪排序索引？

> ID：12909082
> 
> 赞同：2
> 
> 时间：2012-10-16T06:56:48.847
> 
> 标签：javascript, knockout.js

我正在使用[Knockout-sortable](https://github.com/rniemeyer/knockout-sortable)拖放/排序表中的记录，但我遇到了问题。我不知道如何跟踪元素排序索引中的位置。（即元素 A、B 和 C 以该顺序出现，并分别以 1、2、3 作为索引，但如果 B 高于 A，则正确的索引将是 2、1、3）

我的代码中没有任何东西是自定义的：我只包含了可淘汰排序并且它是即插即用的。我通常总是包含一个代码片段，但我觉得这没什么用。我唯一知道的是我可能需要一个`ko.computed()`，但我不知道用什么来填充它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:35:27.793

如果您查看示例[http://jsfiddle.net/rniemeyer/Jr2rE/](http://jsfiddle.net/rniemeyer/Jr2rE/)，您可以看到该插件通过更新可观察的数据数组来工作。因此，您不必跟踪索引值。从技术上讲，记录的顺序为您提供了所需的所有信息。

话虽如此，我在去年遇到了同样的问题。为了解决我的问题，我为可观察数组中的每个对象添加了一个连续编号的索引属性。然后，当 sortable 插件重新排列 observable 数组的内容时，我只需读出新的 index 属性即可知道排序顺序。

# c# - 在服务器端实现 MD5halsh 加盐算法时如何在客户端加密密码

> ID：12909087
> 
> 赞同：1
> 
> 时间：2012-10-16T06:57:16.423
> 
> 标签：c#, md5, salt

我已经实现了一个 md5 哈希加盐算法。

使用此算法，我已将散列密码和盐值保存到数据库中。然后在登录页面上检索登录用户的盐值，获取密码字节添加盐值和计算的哈希值并将结果与​​保存的密码匹配，它工作正常但我仍然能够以明文形式看到我的密码值在客户端。

如何在客户端与 md5 哈希加盐算法一起加密密码值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:02:20.167

你做对了。在不知道盐的情况下，您将无法在客户端散列密码（并且将盐传递给客户端不是一个好主意）。如果您希望客户端发送的数据是安全的，请使用[ssl](http://en.wikipedia.org/wiki/Transport_Layer_Security)。

**注意：**如果你使用 ssl 客户端仍然会`able to see my password value in clear text`因为数据只会在发送前被加密。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:05:44.737

您可以使用[数据保护 API (DPAPI)](http://msdn.microsoft.com/en-us/library/ms995355.aspx)在客户端安全地存储密码。使用 SafeString 类将密码存储在内存中，并且正如 @PLB 已经提到的，使用加密连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T07:22:03.970

有很多不同的方法可以解决这个问题，我现在能想到的最简单的方法就是使用某种挑战；服务器发送一个值，客户端必须用作盐。服务器确保该值是唯一的，没有过期，并且只使用一次（这确保了重放攻击是不可能的。）

这样可以确保不发送纯文本密码，而只发送散列密码。服务器可以信任（与进行纯文本身份验证时一样信任）客户端不会简单地重新发送一些旧哈希，因为需要明文密码才能使用“一次性盐”计算哈希。

另一种更复杂（和安全）的方法是从服务器拥有公钥和客户端私钥的密码生成 RSA 密钥对。客户端还拥有服务器公钥的副本。用户输入密码，只有正确的密码才能得到正确的rsa-key。

然后，用户使用服务器的公钥对请求进行加密，然后使用用户的私钥对请求进行签名。然后只有服务器可以解密请求，并且服务器可以通过使用用户的公钥验证签名来验证发送者确实是正确的用户。而反应恰恰相反。为了增加一些安全性，您应该添加一些独特的“盐”，就像我之前写的那样，以确保重放攻击是不可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T07:08:27.437

如果您担心在文本框中输入的密码。然后将文本框的TextMode更改为密码

像这样

```
<asp:TextBox ID="txtPassword" runat="server" TextMode="Password"></asp:TextBox> 
```

# redirect - 在 playframework 中重定向 URL

> ID：12909088
> 
> 赞同：0
> 
> 时间：2012-10-16T06:57:23.203
> 
> 标签：redirect, playframework-2.0

我的 AJAX 代码正在播放框架中生成以下 GET 请求

```
'GET /localhost:8080/geoserver/rest/proxy?url=http://localhost:8080/geoserver/wms?REQUEST=GetFeatureInfo&EXCEPTIONS=application/vnd.ogc.se_xml&BBOX=-74.084108,40.737824,-73.862875,40.817377&X=656&Y=271&INFO_FORMAT=text/html&QUERY_LAYERS=tiger:tiger_roads&FEATURE_COUNT=50&Layers=tiger:tiger_roads&Styles=&Srs=EPSG:4326&WIDTH=1168&HEIGHT=420&format=image/png' 
```

我希望将上述请求重定向到路由文件或控制器文件中的**/localhost/geoserver**。有人可以帮我实现上述目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:39:31.690

使用控制器中的[重定向](http://www.playframework.org/documentation/api/1.2.4/play/mvc/Controller.html#redirect%28java.lang.String%29)方法来实现这一点。

`redirect(url);`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-16T07:30:40.523

如果你想实现任何重定向，你只需要修改你的*路由*文件。如果你有

```
GET    /link1     Application.Controller1 
```

在您的路由文件中，如果您点击`http://localhost:9000/link1`，这将导致 Controller1（在您的 Application.java 文件中）方法运行。如果您想在执行此控制器后返回任何 html 内容（这可能是整个 div/span/table/paragraph/etc。您可以在运行时将其放入 html 中），您需要使用`renderHtml("<>...</>")`. 更重要的是，如果你想运行这个控制器并将 html 放入你当前通过 JavaScript-Jquery 显示的页面中，你需要使用类似的东西；

```
$.load("/link1", {parameter1:"the value"}, function(result){
    $("#div1").html(result);
}); 
```

您可以通过这种方式实现任何重定向并实现任何类型的 AJAX 请求。

要从控制器重定向，您可以简单地调用`redirect(another_page)`，或者您可以调用静态控制器方法，例如`index(param)`（在控制器类中定义）

要获取当前 URL，play 提供了[@request.path](http://www.playframework.com/documentation/2.0.3/api/java/play/mvc/Http.RequestHeader.html#path%28%29)

# if-statement - 在批处理脚本中使用 IF 语句

> ID：12909095
> 
> 赞同：1
> 
> 时间：2012-10-16T06:57:45.093
> 
> 标签：if-statement, batch-file

我是批处理编程的新手。我正在尝试在我的一个批处理脚本中使用 IF 条件。代码看起来像这样。

```
:rmfile
:: removes the file based on it's age.
::                     
SETLOCAL
set file=%~1
set age=%~2
set thrshld_days=40
if %age% LSS 40 
echo.%file% is %age% days old 
EXIT /b 
```

现在的问题是，即使文件的年龄超过 40 年，我也会打印文件。这实际上不应该发生。

请在这方面帮助我..谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:06:21.210

要么把它放在一行：

```
if %age% LSS 40 echo.%file% is %age% days old 
```

或使用块分隔符：

```
if %age% LSS 40 (
    echo.%file% is %age% days old
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:07:37.493

```
if %age% LSS 40 
echo.%file% is %age% days old 
```

被解释为具有空主体（第一行）和无条件`echo`（第二行）的条件表达式。您需要将它们放在一行中：

```
if %age% LSS 40 echo.%file% is %age% days old 
```

或使用括号创建块（但左括号**必须与 位于同一行**）`if`：

```
if %age% LSS 40 (
   echo.%file% is %age% days old
) 
```

# namespaces - C++/CLI：跨多个文件使用一个命名空间

> ID：12909096
> 
> 赞同：2
> 
> 时间：2012-10-16T06:57:46.990
> 
> 标签：namespaces, c++-cli

我有一个关于在 C++/cli 中创建命名空间的问题。

我想在单独的文件中有 3 个自己的类，但我想把它放在一个命名空间中。是否可以？如何。或者我可以只在每个文件中编写具有相同名称的命名空间并将它们全部链接在一起吗？

谢谢，K。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T12:42:28.987

是的，你回答了你自己的问题。命名空间是开放的，它们可以存在于文件和不同的程序集中。如您所说，只需使名称空间具有相同的名称即可。

# templates - T4 模板生成不需要的输出文件

> ID：12909097
> 
> 赞同：3
> 
> 时间：2012-10-16T06:57:56.893
> 
> 标签：templates, t4

我有一个名为 ParentTemplate 的 T4 模板，其中包括另一个名为 ChildTemplate 的 T4 模板。这个想法是每次调用 ChildTemplate 时都会调用我的 ParentTemplate 并生成一个文件。但是，我的 ParentTemplate 还创建了一个我不需要的文件 (.cs)。ParentTemplate 的 Build Action 设置为“None”，Custom Tool 设置为“TextTemplatingFileGenerator”。以下代码来自 ParentTemplate：

```
<#@ template debug="false" hostspecific="true" language="C#" #>
<#@ import namespace="System.IO" #>
<#
    for (int i = 0; i < 3; i++)
    {
#>
<#@ include file="ChildTemplate.t4" #>
<#
    string filename = Path.Combine(path, String.Format("{0}i.txt", myFile));
    File.WriteAllText(filename, this.GenerationEnvironment.ToString());
    this.GenerationEnvironment.Remove(0, this.GenerationEnvironment.Length);
    }
#> 
```

ChildTemplate 中只有文本“Hello World”。所以我想要的输出是 3 个 .txt 文件，内容是“Hello World”，就是这样。所以没有像 ParentTemplate.cs 这样的其他文件。

知道如何防止 ParentTemplate.cs 的生成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T10:32:52.933

只需清除`Custom Tool`属性值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-09T23:21:58.863

从[这里](https://stackoverflow.com/a/13878689/2415099)它说您可以执行以下操作来欺骗 Visual Studio 不为使用生成器的 .tt 文件生成输出文件。

```
<#@ output extension="/" #> 
```

或者

```
<#@ output extension="\\" #> 
```

**注意**：这是一个 hack，仍然会产生警告。
**注意**：清除`Custom Tool`属性值不会达到您想要的效果，因为这将完全避免运行模板。

您还可以采取更迂回（且耗时）的方法：

*   在生成期间从 VSProject 中删除文件`DTEEnv`（仅在 Visual Studio 中运行时可用）。
*   使用构建任务在生成后删除和删除项目（使用[MSBuild](https://msdn.microsoft.com/en-us/library/bb651786(v=vs.90).aspx)）。

# redis - redis数据库还原显示没有记录

> ID：12909100
> 
> 赞同：4
> 
> 时间：2012-10-16T06:58:05.987
> 
> 标签：redis

希望这是一个简单的问题：

我正在尝试将 redis 数据库从一台机器（M1）复制到另一台机器（M2）。两台机器运行相同版本的redis。这就是我所做的：-

1.  在 M1 上，发出“保存”。据我了解，这会创建我的数据集的时间点磁盘文件。根据我的配置文件（redis.conf），这会写入一个名为“dump.rdb”的文件。

2.  在 M2 上，我关闭了 redis 并删除了该机器上的 dump.rdb 文件。然后我从 M1-->M2 复制 dump.rdb（到 M2 的 redis.conf 中指定的预期位置）并在 M2 上重新启动 redis 实例。

在 M2 redis 实例上发出一些“hgetall”查询时，没有记录。在 M1 上重复相同的操作会给出预期的正确结果。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T12:41:03.907

你在更高的层次上没有做错任何事。可能您无意中犯了一些错误...确保文件在复制后具有相同的 MD5 和。确保第二个 Redis 配置为使用 dump.rdb 作为持久性方法，而不是 AOF。读取 Redis 日志以检查它是否读取数据库文件。至于你也用*同一个*数据库号吗？也许您的数据存储在 DB5 上，但您正在查询 DB0？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T23:49:33.017

我有同样的问题。我最终意识到我从中复制 dump.rdb 的 redis 实例运行的是 2.4.x，但目标 redis 实例运行的是 2.2.x。2.2.x 实例启动时，没有出现无法读取 rdb 文件的警告。但是`DBSIZE`, `INFO`,`KEYS *`等都表示一个空数据库。

一旦我将第二个实例升级到 2.4.x，我就能够按预期打开数据库。我知道你已经说过你的机器运行的是相同的版本，但我想在这里添加它以确保其他人知道如果他们的版本不匹配，他们会看到相同的症状。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T07:01:22.977

我建议您使用[redis-dump](http://code.google.com/p/redis-dump/)进行 redis 备份和恢复

以下是用法：

```
 $ redis-dump 
    $ redis-dump -u 127.0.0.1:6371 > db_full.json
    $ redis-dump -u 127.0.0.1:6371 -d 15 > db_db15.json

    $ < db_full.json redis-load 
    $ < db_db15.json redis-load -d 15 
```

要安装 redis 转储：

```
 $ gem install redis-dump 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-26T22:42:11.330

从 redis 2.6 开始，还有 MIGRATE 语句，您可以使用 COPY 选项运行它：

[迁移](http://redis.io/commands/migrate)

我想我会提到这个功能，因为有时您可能只想复制部分数据。

我不会将它用于完整的数据库转储和加载，已经提到的方法更适合这种情况。

# c - 使用 OpenSSL API 验证 Authenticode 签名的可执行文件和 DLL

> ID：12909102
> 
> 赞同：5
> 
> 时间：2012-10-16T06:58:12.227
> 
> 标签：c, cryptography, openssl, rsa, authenticode

我已经安装了**openssl**，现在**rsa_test.c**运行良好。我想做的是：

1.  打开任何 exe 或 dll 数字证书。提取**指纹**和**公钥**。公钥也包含**指数**（如果您熟悉 ASN1 编码）。

2.  现在我已经计算了文件的**SHA-1**哈希值并将其与 MD 字段进行比较以发现它是正确的。所以现在我想将**Thumbprint**、**PublicKey->m**和**PublicKey->e**传递给**RSA_public_decrypt**函数来计算文件的解密**SHA-1**哈希值。

我应该将什么**填充算法**传递给函数？当我通过**RSA_NO_PADDING**时，它会解密但给我 128 字节长的散列，这根本不正确。对于所有其他填充算法选项，它返回未找到填充的错误。

请您教我或告诉我正确的参数以通过示例或良好的示例链接传递函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T22:06:12.517

您应该使用[PKCS7_verify](http://www.openssl.org/docs/crypto/PKCS7_verify.html)函数来验证整个 PKCS #7 signedData 块。

您需要两个步骤来完全验证签名（请参阅[Microsoft 规范](http://msdn.microsoft.com/en-US/windows/hardware/gg463183)）：

1.  验证 PKCS #7 签名的完整性和身份。
2.  计算消息摘要并将其与签名中指定的进行比较。

请注意，摘要不限于规范中的 SHA-1。摘要算法包含在签名的摘要算法字段中。

# android - 在android中将命令从Activity发送到Service

> ID：12909115
> 
> 赞同：5
> 
> 时间：2012-10-16T06:58:45.170
> 
> 标签：android, service, android-activity, communication

我有一个活动课程和一个带有媒体播放器的服务。用户从他们想要播放的 SD 卡中选择 mp3。我使用 Intent extra 将该 mp3 的路径从活动发送到服务。

在服务中，媒体播放器可以启动并播放用户选择的 mp3。但是一个问题。如果用户按下暂停按钮，媒体播放器应该暂停并稍后在暂停的相同位置恢复歌曲。如何将命令从活动发送到应该暂停歌曲的服务？

将 mediaplayer 实例放在 Activity 中要容易得多。这样我就可以在那里放置一个 onclick 监听器和一个按钮。使用由服务运行的媒体播放器，它在活动之外，不能只是在屏幕上放一个按钮让他们按下暂停。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T07:05:18.250

两种选择：

1.  如果您的服务是本地服务（这里应该是这种情况），您可以绑定活动和服务。有关如何执行此操作的示例，请参阅[服务类文档](http://developer.android.com/reference/android/app/Service.html#LocalServiceSample)

2.  您也可以使用广播。基本上，您的服务中将有一个广播侦听器，它将期望广播操作，例如“com.mypackage.mediaplayer.Stop”、“com.mypackage.mediaplayer.Pause”、“com.mypackage.mediaplayer.Next”、.. . 然后，当单击按钮时，您的活动会简单地发送正确的广播消息。

您还应该查看[android stock music player source code](https://github.com/android/platform_packages_apps_music)。

完成相同类型的项目后，我建议使用选项#2。

# hadoop - hbase 中的数字类型值无法被 hive 识别

> ID：12909118
> 
> 赞同：3
> 
> 时间：2012-10-16T06:58:57.003
> 
> 标签：hadoop, client, integration, hbase, hive

我有一个 hive/hbase 集成表，定义如下。

```
create table user_c(user_id int, c_name string, c_kind string, c_industry string,
c_jobtitle string, c_workyear int, c_title string, c_company string)
stored by 'org.apache.hadoop.hive.hbase.HBaseStorageHandler'
WITH SERDEPROPERTIES ("hbase.columns.mapping" = ":key,cf1:c_name,cf1:c_kind,cf1:c_industry,cf1:c_jobtitle,cf1:c_workyear,cf1:c_title,cf1:c_company")
TBLPROPERTIES ("hbase.table.name" = "user_c"); 
```

在我的 java 代码中，我创建了一个`Put`并用从 db 读取的值填充它。代码如下所示：

```
final Put to = new Put(getByte(from, keyColumn));
for (final IColumn column : table.getColumns()) {
    if (column.equals(keyColumn)) continue;
    to.add(Bytes.toBytes(column.getColumnFamily()), Bytes.toBytes(column.getDestName()), getByte(from, column));
}
return to; 
```

是一种将`getByte`值转换为 的方法`byte[]`。看起来像

```
byte[] getByte(final Map<String, Object> map, IColumn column) {
    final Object val = map.get(column.getName());
    if (val instanceof Integer) {
        return Bytes.toBytes((Integer) val);
    }
    ...
} 
```

然后放到hbase中。

我可以从 hbase shell 扫描记录。

```
hbase(main):001:0> scan 'user_c'
ROW                                COLUMN+CELL                                                                                      
\x00\x0A\x07\x0D                  column=cf1:c_workyear, timestamp=1350298280554, value=\x00\x00\x07\xD8                         
\x00\x0A\x07\x0D                  column=cf1:c_industry, timestamp=1350298280554, value=120
... 
```

Row key 是一种`Integer`类型，当被方法处理时应该自动解箱为原始`int`类型`getByte`。不仅行键，而且其他数字类型列(cf1:c_workyear) 都显示`\x00\x0A\x07\x0D`为字节数组。

同时`String`type column(cf1:c_industry) 只显示它的值。

这样可以吗？

当我从 hive 查询记录时，它只给我一个`NULL`而不是数字类型列的值。

```
hive> select c_industry, c_workyear from user_c limit 1;
Total MapReduce CPU Time Spent: 10 seconds 370 msec
OK
120     NULL
Time taken: 46.063 seconds 
```

似乎 c_workyear 值无法被 hive 识别。我想这是因为那种类型不正确。但是不应该将`int`字节数组存储为`int`值，而不是字节数组吗？

有人知道如何解决这个问题吗？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T00:51:52.023

在你的表定义中试试这个

```
"hbase.columns.mapping" = ":key,cf1:c_name,cf1:c_kind,cf1:c_industry#b,cf1:c_jobtitle,cf1:c_workyear#b,cf1:c_title,cf1:c_company" 
```

注意使用`#b`after binary fields 。我们已经成功使用了一段时间了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-19T12:18:25.733

我们遇到了同样的问题，并在列映射参数中使用#b 解决了 - ("hbase.columns.mapping" = ":key,C1:Name,C1:marks#b")

列“标记”存储为实际长类型的 bytearray。

@scarcer，以字符串类型存储所有字段将不是一个有效的解决方案。

# android - 在 Motorola Droid Razr M 中使用蓝牙 HDP 配置文件

> ID：12909124
> 
> 赞同：0
> 
> 时间：2012-10-16T06:59:07.203
> 
> 标签：android, bluetooth, bluetooth-lowenergy, motorola-droid

我有一个摩托罗拉 Droid Razr M。我想编写一个应用程序，使用蓝牙 HDP 配置文件将我的手机与健康设备连接起来。

Android 4.0 平台 API 支持 HDP 配置文件。但是 Droid Razr M 的规范显示它不支持 HDP 配置文件：http: [//developer.verizon.com/content/vdc/en/verizon-devices/pages/mot_droidrazr_m.html](http://developer.verizon.com/content/vdc/en/verizon-devices/pages/mot_droidrazr_m.html)

所以我不可能在这部手机上运行我的应用程序，不是吗？

任何人的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-11T03:04:01.437

只需下载 android BluetoothHDP 示例并尝试。顺便说一句，您必须调整代码：

```
else if (prevState == BluetoothHealth.STATE_CHANNEL_CONNECTING && newState == BluetoothHealth.STATE_CHANNEL_CONNECTED) {
if (config.equals(mHealthAppConfig)) 
{
    mChannelId = channelId;
    sendMessage(STATUS_CREATE_CHANNEL, RESULT_OK);
    (new ReadThread(fd)).start();
} 
else 
{
        sendMessage(STATUS_CREATE_CHANNEL, RESULT_FAIL);
} 
```

到 BluetoothHDPService.onHealthChannelStateChange()。

更多信息： [蓝牙 HDP android 4.0 真的有效吗？](https://stackoverflow.com/questions/8522190/bluetooth-hdp-android-4-0-really-works)

# c# - 如何调用wsdl中存在的方法？

> ID：12909126
> 
> 赞同：1
> 
> 时间：2012-10-16T06:59:10.930
> 
> 标签：c#, wcf, wsdl

我有 wsdl 文件。我使用“svrutil”创建 C# 文件并将此文件添加到我的代码中。现在我不知道如何调用这个 wsdl 中的方法。

我不知道我实际上是如何调用将进行 Web 服务调用的方法。我如何进行此调用？

我尝试简单地拨打这个电话 - 但我没有在嗅探器中看到出现任何网络通信（没有发出 http 请求）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:06:54.660

使用“svcutil”创建的文件是代理类。确保您为方法调用提供了有效的服务 URL。如果您放置一些代码来将您的问题传达给贡献者，那就太好了。

# facebook - 禁用墙帖的共享链接

> ID：12909127
> 
> 赞同：2
> 
> 时间：2012-10-16T06:59:18.153
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph, postmessage

我正在开发一个应用程序，该应用程序将使用 Open Graph 发布在私人 Facebook 群组的墙上。如果我在该组中有一般帖子，则没有“共享”链接的视图，但使用 Open Graph 可以。我需要的是禁用从该组中“共享”此帖子的可能性，例如禁用帖子下的“共享”链接。是否可以通过 Open Graph API 实现这种行为？还是有其他解决方案？

# html - 如何将图像移动到 li manu 的右侧？

> ID：12909129
> 
> 赞同：1
> 
> 时间：2012-10-16T06:59:22.873
> 
> 标签：html, css

我有图像（橙花），我想把它移到 li 的右侧。

嵌入`<a>`标签中的图像和我写的`float:right;`，但它不工作。

我不知道为什么，我需要帮助，非常感谢。

[演示 jsFiddle](http://jsfiddle.net/centerwow/5gGum/22/)

```
 <ul id="menu">
                    <li><a href="index.html">home</a></li>
                    <li><a href="learnmore.html">פרטים נוספים</a></li>
                    <li><a href="services.html">learnmore</a></li>
                    <li><a href="about_us.html">about_us</a></li>
                    <li><a href="prices.html">prices</a></li>
                    <li><a href="location.html">location</a></li>
            </ul>​
* { 
    margin:0; padding:0;
    border:0; diraction:rtl;
}
 body{
     text-align:right;
     font-family:Arial;
     font-size: 20px;
     border:1px solid red;
     font:13px Arial, Helvetica, sans-serif; color:#a7a7a7;
     line-height:20px
}
#menu { width:100%;
        border: 5px solid green;
        padding:18px 30px 0 0; border-bottom:1px solid #e2e2e2;}
#menu li { 
    border: 5px solid brown;float:right;padding-right:30px;}
#menu li a{ 

    right:0;
 text-transform:uppercase; text-decoration:none; 
 color:#2c2c25; font-size:18px; line-height:20px;
    float:right; right:0;
     background:url(http://t0.gstatic.com/images?q=tbn:ANd9GcRP4bAv-ruMbgWa8rTLZhWOITQk6aGOI8L_YMrmsRbacuIR502w) 
    7px 1px no-repeat;

}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:02:22.040

您添加此样式为

```
a{
   display:block;
 } 
```

并删除`right:0`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:03:25.033

认为你会想尝试

```
background-position:right; 
```

对于`#menu li`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T07:03:27.250

用`background-position: right;`在里。

```
#menu li {
border: 5px solid brown;float:right;padding-right:30px;
background:url(http://t0.gstatic.com/images?q=tbn:ANd9GcRP4bAv-ruMbgWa8rTLZhWOITQk6aGOI8L_YMrmsRbacuIR502w)
7px 1px no-repeat;
background-position: right;
   } 
```

演示[jsfiddle](http://jsfiddle.net/5gGum/23/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T07:03:50.667

**背景速记**错了，试试

```
background:url(http://t0.gstatic.com/images?q=tbn:ANd9GcRP4bAv-ruMbgWa8rTLZhWOITQk6aGOI8L_YMrmsRbacuIR502w) 
    no-repeat center right; 
```

[`Working Demo`](http://jsfiddle.net/5gGum/27/)用最少的 CSS

[参考](https://developer.mozilla.org/en-US/docs/CSS/Shorthand_properties)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T07:04:24.550

您的图像本身不是标签，因为您将其作为背景图像添加到链接中，这就是为什么`float:right`不起作用。所以你需要：

```
background:url("http://t0.gstatic.com/images?q=tbn:ANd9GcRP4bAv-ruMbgWa8rTLZhWOITQk6aGOI8L_YMrmsRbacuIR502w") top right no-repeat; 
```

定位图像。或者`bottom right`，如果您愿意。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-16T07:04:33.350

像这样：

```
background:url(http://t0.gstatic.com/images?q=tbn:ANd9GcRP4bAv-ruMbgWa8rTLZhWOITQk6aGOI8L_YMrmsRbacuIR502w) 
**right** 1px no-repeat; 
```

我将背景中的“7px”更改为“right”，这意味着它将水平放置在右侧，距离顶部 1 px。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-16T07:13:06.873

添加`background-position:right;`on`#menu li a`并调整填充，例如`padding-right:10px;`on`#menu li`和`padding-right:15px;`on `#menu li a`。

你可以在这里看到它：http: [//jsfiddle.net/5gGum/29/](http://jsfiddle.net/5gGum/29/)

# jquery - 如何每隔一小时获取用户的当前位置？

> ID：12909134
> 
> 赞同：0
> 
> 时间：2012-10-16T06:59:38.197
> 
> 标签：jquery, cordova, sencha-touch

我对 phoneGap 非常陌生，并且正在使用以下代码来查看用户的位置。

```
var options = { enableHighAccuracy:true , frequency : 30000 };
watchID = navigator.geolocation.watchPosition(onSuccess, onError, options); 
```

但问题是每隔一秒触发一次成功回调。我只想每隔一小时占据用户的位置。请建议我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:28:05.523

这个怎么样：

```
var controller=this;
navigator.geolocation.watchPosition(controller.onLocationUpdate, controller.onLocationError, {enableHighAccuracy:true, maximumAge: 3600000, timeout: 5000}); 
```

以下是上面将根据更新或错误调用的两个函数的示例：

```
onLocationUpdate: function(geo) {
    console.log('location update');
    this.latitude = geo.coords.latitude, this.longitude = geo.coords.longitude, this.accuracy = geo.coords.accuracy, this.altitude = geo.coords.altitude, this.altitudeAccuracy = geo.coords.altitudeAccuracy, this.heading = geo.coords.heading, this.speed = geo.coords.speed;
},
onLocationError: function() {
    console.log('Location Error');
} 
```

# objective-c - 静态库不想使用 .h 文件只想使用 .a 文件

> ID：12909135
> 
> 赞同：-2
> 
> 时间：2012-10-16T06:59:40.463
> 
> 标签：objective-c, c, static-libraries, header-files

我创建了一个包含大量类的静态库。我想在我当前的项目中使用那个静态库。我想避免在我的应用程序中使用大量 .h 文件。

有没有办法只使用 .a 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T07:13:36.587

如果您不告诉它可能使用的接口，其他用户代码就无法使用您的库。

如果您不想将大量接口暴露给使用您的库的代码，那么您只需要更好地构建它。

创建一个`mylib-interface.h`文件，其中包含您要导出的所有接口，并添加所有您必须的接口，例如`struct`，为使所需接口工作必须可见的声明。从您的其他 .h 文件中删除所有这些接口，并将其包含`mylib-interface.h`在所有这些文件的顶部。

现在，任何想要使用您的库的应用程序只需要使用一个文件，`mylib-interface.h`.

# php - 从 1 到 1000 的 csv 数字的正则表达式

> ID：12909137
> 
> 赞同：-1
> 
> 时间：2012-10-16T06:59:59.490
> 
> 标签：php, javascript, regex

我需要一个正则表达式，它可以匹配以逗号分隔的从 1 到 1000 的数字字符串。

> 例如：12,56,100,190,900,1000

我在前端使用 javascript，在后端使用 php 进行验证。理想情况下，我需要一个通用的正则表达式，它适用于两者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T07:14:10.587

1-1000 范围内的数字（以逗号分隔）匹配

```
(?<=,|^)([1-9][0-9]{0,2}|1000)(?=,|$) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T07:20:17.013

如果你想匹配整行，那么应该这样做：

```
^([1-9][0-9]{0,2}|1000)(,([1-9][0-9]{0,2}|1000))*$ 
```

根据您的要求，您可能还希望在逗号的开头、结尾和/或之后允许空格。

这将允许开头有空格：
`^\s*([1-9][0-9]{0,2}|1000)(,([1-9][0-9]{0,2}|1000))*$`

这将允许最后有空格：
`^([1-9][0-9]{0,2}|1000)(,([1-9][0-9]{0,2}|1000))*\s*$`

这将允许逗号后的空格：
`^([1-9][0-9]{0,2}|1000)(,\s*([1-9][0-9]{0,2}|1000))*$`

根据自己的喜好组合这些。

**编辑2：**如果你想在分箱中或最后允许逗号，那么你的正则表达式变成

```
^,?([1-9][0-9]{0,2}|1000)(,\s*([1-9][0-9]{0,2}|1000))*,?$ 
```

在这里，`,?`表示您可以有 0 或 1 个逗号。

**编辑：**按要求解释：

*   `^`在开头和`$`结尾是输入标记的开始/结束 - 它们确保我们测试整个输入
*   括号的工作方式与您期望的一样
*   `[1-9]`匹配数字 1 到 9，同样`[0-9]`匹配数字 0 到 9
*   `{0,2}`表示前一部分（在我们的例子中`[0-9]`）出现在 0 到 2 次之间
*   `|`是一个逻辑`OR`- 匹配之前的部分或匹配之后的部分

因此，在第一组括号中，我们匹配数字 1 到 9，然后是 0、1 或 2 个数字 0 到 9——这给了我们 1 到 999 之间的数字——或者我们匹配 1000。

然后我们匹配一个逗号，后跟与上述相同的块 - 并且该批次匹配 0 次或更多次 - 如`*`括号后的字符所示。

# c - 可以使用 Mingw 构建 Windows 应用商店应用程序吗？

> ID：12909139
> 
> 赞同：21
> 
> 时间：2012-10-16T07:00:01.753
> 
> 标签：c, windows-8, mingw, cross-compiling, windows-store-apps

有没有办法使用[Mingw](http://mingw.org/)工具链构建 Windows Store 应用程序？（最终在 Linux 上从 mingw[交叉编译](http://mxe.cc/)它们，因为如果它在一个 Mingw 工具链中工作，它应该在另一个工具链中工作。）

我想一个要求是[坚持Windows 应用商店应用沙箱中](http://msdn.microsoft.com/en-us/library/windows/apps/br205757.aspx) [允许的 API：s](http://msdn.microsoft.com/en-us/library/windows/apps/br211369.aspx)，但在分发到商店之前还有哪些其他事项需要考虑？XAML？32 位还是 64 位代码？

由于 Mingw C++ 与 MSVC++ 的链接不兼容，我认为没有[WRL](http://msdn.microsoft.com/en-us/library/vstudio/hh438466.aspx)的纯 C 程序将是实现这一目标的最简单方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T08:43:32.133

您需要直接使用[Windows 运行时 C++ 模板库](http://msdn.microsoft.com/en-us/library/vstudio/hh438466.aspx)(WRL)，您将无法使用[C++/CX](http://en.wikipedia.org/wiki/C++/CX)，因为 Mingw 不支持它。除此之外，我认为您只需要[Windows 8 SDK](http://msdn.microsoft.com/en-us/windows/hardware/hh852363.aspx)，然后您需要配置 Mingw 以使用头文件和库。此外，您将无法使用[XAML](http://en.wikipedia.org/wiki/Windows_Runtime_XAML_Framework)来描述您的用户界面，您必须在代码中手动创建您的 UI。

与其尝试使用 mingw 编写整个应用程序并使用 linux 进行交叉编译，不如使用 mingw 编写核心库，然后使用 Visual Studio Express（免费）在库上编写一个简单的 UI 包装器。这样你就可以使用所有的好东西，比如 XAML 和 ref-counted 实例。

这是我采用的方法 - 使用用 C++ 编写的库，然后使用引用其他库的单独 UI 项目（使用 XAML）。它运作良好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-09-12T22:01:20.007

MinGW-w64 具有对随 VS2013 分发的 UWP C 运行时的实验性支持。与通用 VS2013 crt 链接的 C dll 也可以与 VS2015 和 VS2017 UWP 工具链一起使用（UWP 项目应具有“Microsoft Visual C++ 2013 Runtime Package for Windows Universal”作为依赖项）。
MinGW-w64 提供`winstorecompat`库来用用户定义的实现替换 UWP 平台上一些禁止的 API 调用。`winstorecompat`在与系统库链接之前，应先链接到用户的库。
此外，还需要使用自定义标志构建 MinGW C dll`-Wl,--dynamicbase`以通过 Windows 10 应用商店认证工具包安全检查，并将`appcontainer`位标志设置为与 Windows 10 应用商店二进制要求兼容。
这是[链接](https://github.com/status-im/mingw-windows10-uwp)对于示例项目，我研究了如何将纯 C MinGW Dll 用于 Windows 10 C# UWP 应用程序、来自 C dll 的 PInvoke 方法并通过认证工具包安全检查以在 Windows 应用商店中发布。我已经引用[了 libVLC](https://code.videolan.org/videolan/vlc-winrt/blob/master/libvlc/compile.sh) WinRT 构建实现。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-11-09T14:25:08.903

看看使用 C++/WinRT 和 clang 编译器而不是 MinGW：

[https://github.com/Microsoft/cppwinrt](https://github.com/Microsoft/cppwinrt)
[https://moderncpp.com/](https://moderncpp.com/)

“C++/WinRT 是仅在头文件中实现的 Windows 运行时的标准 C++ 语言投影。它允许您使用任何符合标准的 C++ 编译器来创作和使用 Windows 运行时 API。”

“C++/WinRT 依赖于 C++17 语言功能，因此您需要告诉 C++，您的项目需要 C++17 语言标准。”

“虽然 Visual C++ 仍然是我们的主要目标，但我们使用 Clang 作为辅助编译器以确保符合标准。在此更新中进行了许多小的更改，以支持 Clang 构建并修复仅在 Clang 构建中发现的正确性错误。”

# .net - 用于测量 .NET winform 应用程序中每个方法的执行持续时间的库

> ID：12909141
> 
> 赞同：2
> 
> 时间：2012-10-16T07:00:06.437
> 
> 标签：.net, winforms

我需要测量我的 winform .NET 应用程序中每种方法的执行持续时间。输出到文件中。

我不需要为每个 .NET 方法设置代码开始时间和结束时间，我想知道是否有一个库可以通过更改配置文件来打开/关闭它。

谢谢。

科龙克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:44:03.473

您可以使用 C# 的 AOP 库，如[postsharp](http://www.sharpcrafters.com/)。

postsharp 文档中的修改示例：

```
/// <summary>
/// Aspect that, when applied on a method, emits a trace message before and
/// after the method execution.
/// </summary>
[Serializable]
public class TraceAttribute : OnMethodBoundaryAspect
{
    private string methodName;
    private DateTime startTime;

    /// <summary>
    /// Method executed at build time. Initializes the aspect instance. After the execution
    /// of <see cref="CompileTimeInitialize"/>, the aspect is serialized as a managed 
    /// resource inside the transformed assembly, and deserialized at runtime.
    /// </summary>
    /// <param name="method">Method to which the current aspect instance 
    /// has been applied.</param>
    /// <param name="aspectInfo">Unused.</param>
    public override void CompileTimeInitialize(MethodBase method, AspectInfo aspectInfo)
    {
        this.methodName = method.DeclaringType.FullName + "." + method.Name;
    }

    /// <summary>
    /// Method invoked before the execution of the method to which the current
    /// aspect is applied.
    /// </summary>
    /// <param name="args">Unused.</param>
    public override void OnEntry(MethodExecutionArgs args)
    {
        startTime = DateTime.Now;
        Trace.TraceInformation("{0}: Enter", this.methodName);
        Trace.Indent();
    }

    /// <summary>
    /// Method invoked after successfull execution of the method to which the current
    /// aspect is applied.
    /// </summary>
    /// <param name="args">Unused.</param>
    public override void OnSuccess(MethodExecutionArgs args)
    {
        Trace.Unindent();
        var duration = DateTime.Now - startTime;
        Trace.TraceInformation("{0}: Success, Duration: {1}ms", this.methodName, duration.TotalMilliseconds);
    }
} 
```

要将其应用于项目中的每个方法，您只需编辑 assemblyinfo.cs 并添加：

```
 [assembly: SomeNamespace.TraceAttribute()] 
```

这样做的积极方面是它完全是非侵入性的，并且不需要更改您现有的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:41:17.760

尝试以可以轻松添加这种横切关注点的方式设计您的应用程序。例如，将单个用例的业务逻辑/行为放在一个类中，并用通用接口装饰它：

```
public interface IUseCaseHandler<TUseCase>
{
    void Handle(TUseCase useCase);
} 
```

用例的定义是一个简单的DTO（数据传输对象）：

```
public class MoveCustomerUseCase
{
    public int CustomerId { get; set; }

    public Address Address { get; set; }
} 
```

实现可能如下所示：

```
public class MoveCustomerUseCaseHandler
    : IUseCaseHandler<MoveCustomerUseCase>
{
    public void Handle(MoveCustomerUseCase useCase)
    {
        // todo: business logic
    }
} 
```

你在这里得到了什么？好吧，当所有用例处理程序都实现了接口时，您可以为所有处理程序`IUseCaseHandler<T>`编写一个[装饰器：](http://en.wikipedia.org/wiki/Decorator_pattern)

```
public class DurationMeasuringUseCaseHandlerDecorator<TUseCase>
    : IUseCaseHandler<TUseCase>
{
    private readonly IUseCaseHandler<TUseCase> decoratedInstance;
    private readonly ILogger logger;

    public DurationMeasuringUseCaseHandlerDecorator(
        IUseCaseHandler<TUseCase> decoratedInstance, 
        ILogger logger)
    {
        this.decoratedInstance = decoratedInstance;
        this.logger = logger;
    }

    public void Handle(TUseCase useCase)
    {
        var stopwatch = System.Diagnostics.Stopwatch.StartNew();

        try
        {
            // call the real use case handler
            this.decoratedInstance.Handle(useCase);
        }
        finally
        {
            this.logger.Log(typeof(TUseCase).Name + 
                " executed in " + 
                stopwatch.ElapsedMiliseconds + " ms.");
        } 
    }
} 
```

这似乎有很多代码用于一点点日志记录，不是吗？不，实际上不是。这是唯一一次您必须编写该代码，并且您不必更改任何用例处理程序来添加测量。您可以像这样包装所有处理程序：

```
// Composing the object graph
IUseCaseHandler<MoveCustomerUseCase> handler = 
    newMoveCustomerUseCaseHandler(
        new MoveCustomerUseCaseHandler(),
        new Logger());

// Using the object (somewhere else in the code)
handler.Handle(new MoveCustomerUseCase { CustomerId = id, Address = adr }); 
```

但是现在我们每次想要使用它时仍然必须将对象图连接在一起？这就是 IoC 容器发挥作用的地方。例如，使用[Simple Injector](http://simpleinjector.codeplex.com)，只需一行代码即可在系统中注册所有用例处理程序：

```
container.RegisterManyForOpenGeneric(typeof(IUseCaseHandler<>),
    typeof(IUseCaseHandler<>).Assembly); 
```

[RegisterManyForOpenGeneric](http://simpleinjector.codeplex.com/wikipage?title=Advanced-scenarios#Batch_Registration)方法遍历程序集中的所有公共类型，并通过其封闭的泛型表示（例如 ）注册实现接口的所有具体`IUseCaseHandler<T>`类型`IUseCaseHandler<MoveCustomerUseCase>`。

用装饰器包装所有处理程序只是另一种方法：

```
container.RegisterDecorator(typeof(IUseCaseHandler<>),
    typeof(DurationMeasuringUseCaseHandlerDecorator<>)); 
```

使用此配置，我们可以请求`container`for an `IUseCaseHandler<MoveCustomerUseCase>`，它会以`MoveCustomerUseCaseHandler`用 a 包裹的形式返回`DurationMeasuringUseCaseHandlerDecorator<MoveCustomerUseCase>`：

```
var handler =
    container.GetInstance<IUseCaseHandler<MoveCustomerUseCase>>();

handler.Handle(new MoveCustomerUseCase 
{
    CustomerId = id, Address = adr
}); 
```

# iphone - 创建类似于新的 iOS 6 按钮共享的自定义共享视图

> ID：12909147
> 
> 赞同：6
> 
> 时间：2012-10-16T07:00:18.467
> 
> 标签：iphone, objective-c, ios, sharekit, uiactivityviewcontroller

在新的 iOS 6 中，Apple 添加了新的 UIActivityViewController (image A) 共享菜单，其中有小图标按钮可供共享，而不仅仅是旧的 UIActionSheet 文本按钮。

我想显示一个 UIActivityViewController 但带有自定义按钮。我知道他们有一个可以显示的默认应用程序列表（邮件、消息、Facebook、Twitter 等），但我想自定义单击这些按钮时会发生什么。当您单击邮件共享图标时，它会打开带有新消息的邮件应用程序，例如，如果单击邮件应用程序时，它会打开 Twitter 应用程序（不是真的，只是与默认设置不同） . 现在我似乎找不到在按钮后面添加我自己的方法的方法。

使用最新的 ShareKit，他们添加了 Instagram 共享，当您选择与其共享时，会显示一个新视图，该视图看起来与 UIActivityViewController 屏幕完全相同（图 B）。他们似乎已经知道如何添加自定义按钮来执行自定义操作。我搜索了 ShareKit 代码，但似乎找不到它在哪里或如何工作。

也许我要问的甚至还不可能，但感谢您的帮助！

图像 A![图像 A](../Images/e45c9c8cf784b1a028bd3d43b850e0c5.png)

图像 B![图像 B](../Images/dd24b46d458417932a6836c3918f965b.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T07:06:20.253

看看这个[链接](http://oleb.net/blog/2012/09/the-state-of-sharing-in-ios-6/)。这是在 iOS 6 上分享的一个很好的介绍。

以下引用来自此博客文章：

> 您甚至可以添加对您自己的自定义共享选项的支持，并且仍然让`UIActivityViewController`处理与用户的交互。为此，将抽象`UIActivity`类子类化并覆盖所需的方法（有关详细信息，请参阅文档）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T07:16:49.667

Sharekit 是一种抽象，无法以您希望使用的方式进行定制。Apple 控制这些服务的接口。

不幸的是，如果您想自定义共享及其工作方式，您将需要实现自己的 sharekit 版本，以及这些服务的 UI 和 API 入口点。

Sharekit 存在，因此您不必这样做。随着时间的推移，需求会发生变化，我预计 Apple 会随意添加和删除服务。

“按原样”使用 API 是您最明智的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T21:33:02.707

我发现了这个很棒的教程。效果很好，

[自定义 UIActivityView 控制器](http://www.albertopasca.it/whiletrue/2012/10/objective-c-custom-uiactivityviewcontroller-icons-text/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T19:20:18.030

图片 B 实际上使用的是 Instagram 文档交互代码，而不是带有自定义 UIActivity 的 UIActivityViewController。您可以在此处阅读有关 Instagram 的“挂钩”的更多信息……[自定义 iphone 挂钩](http://instagram.com/developer/iphone-hooks/)

一个 UIActivity 已由 Instagram 的第 3 方创建，您可以在[此处](http://uiactivities.com/post/32317159969/instagram)找到……这将打开与 ShareKit 相同的菜单，因为这是将图像直接传递到 Instagram 的唯一方法。

# objective-c - 位置服务在 Lion os x 上不起作用

> ID：12909148
> 
> 赞同：1
> 
> 时间：2012-10-16T07:00:34.357
> 
> 标签：objective-c, macos, osx-lion

一个简单的定位服务程序在我的机器上运行良好，但突然停止工作。在进一步探索该问题后，我意识到某些进程在系统偏好设置->安全和隐私->隐私中禁用了定位服务

我检查了“启用位置服务”，但它再次被自动禁用。

经过一番研究，我发现，不仅仅是我的程序，甚至内置系统功能也因为这个问题而失败，例如：系统偏好->日期和时间->时区无法获取当前位置，

每次我检查“启用位置服务”时，我都会在控制台日志中看到以下错误：

```
16/10/12 11:23:15.636 AM [0x0-0x42042].com.apple.systempreferences: ERROR,Time,372059595.636,Function,"CLInternalSetLocationServicesEnabled",CLInternalSetLocationServicesEnabled failed
16/10/12 11:23:15.638 AM [0x0-0x42042].com.apple.systempreferences: STACK,Time,372059595.636,1   CoreLocation                        0x00007fff8f9957be CLInternalSetLocationServicesEnabled + 110 
```

其他一些指示：-wifi 已打开。-我没有安装ios模拟器，-我使用xcode版本4.5（4G182），-我使用新兵训练营并做了我的mbp双启动（mac lion和win7）-我只做mac开发而不是ios

有人能帮我吗？

# python - 如何在 web.py python 中的浏览器上显示验证消息

> ID：12909149
> 
> 赞同：1
> 
> 时间：2012-10-16T07:00:37.023
> 
> 标签：python, validation, web.py

我正在使用 web.py 框架来设计一个小型 Web 应用程序，目前我已经创建了一个登录页面，代码如下

**索引.py**

```
import web
from web import form
from web.contrib.auth import DBAuth
import MySQLdb as mdb

render = web.template.render('templates/')

urls = (
  '/',   'Login',
  '/projects',  'Projects',
  '/logout',   'Logout',
)

app = web.application(urls, globals()) # Creating an instance(object) app which is the mediator between our classes and the web.It will handle browser requests and serve your pages

web.config.debug = False
db = web.database(dbn='mysql', db='Python_Web', user='root', pw='redhat')
settings = {}

if web.config.get('_session') is None:
    session = web.session.Session(app,web.session.DiskStore('sessions'),initializer={'user':'anonymous','loggedin':False})
    web.config._session = session
else:
    session = web.config._session

auth = DBAuth(app, db, session,**settings)

def logged():
    if session['loggedin'] == 1:
        return True
    else:
        return False
class Login:

    # field validators
    username_required = form.Validator("Username not provided", bool)
    password_required = form.Validator("Password not provided", bool)

    # form validators
    login_details_required = form.Validator("Please Enter Login Details", lambda f: f["username"] or f["password"])

    login_form = form.Form( 
        form.Textbox('username', username_required),
        form.Password('password',password_required,description="Password"),
        form.Button('Login'),
        )

    def GET(self):
        if logged():
            raise web.seeother('/projects')
        else:
            form = self.login_form()
            return render.login(form)

    def POST(self):

        if not my_form.validates(dict(username="", password="small")):
            return render.login(form)

        i = web.input()
        username = i.username.strip()
        password = i.password.strip()
        user = auth.authenticate(username, password)
        if not user:
            session.loggedin = False
            return render.login_error(form) 
        else:
            auth.login(user)
            session.loggedin = True
            session.user = i.username.strip()
            raise web.seeother('/projects')

if __name__ == "__main__":
    web.internalerror = web.debugerror
    app.run() 
```

在上面的代码中，我的意图是

`"Username not provided"`1.如果没有提供用户名，点击登录时应该显示

2.如果没有提供密码`"password not provided"`，点击登录时会显示

3.如果提供了密码但长度小于7个字符，`"Password length should be minimum 7 characters"`点击登录时应该显示（当然这个验证概念适合`creating a user`选择密码时）

4.如果两者都没有提供它应该`"Please Enter Login Details"`在点击登录时显示

5.如果登录详细信息不匹配，`"Invalid Username or Password"`单击登录时应显示，如果登录详细信息匹配应重定向到下一页

在上面的代码中，当登录详细信息成功匹配重定向到下一页时，如果没有显示`Invalid username or password`通过（我从页面 `return render.login_error(form)`复制了相同的 html 代码并在其中添加了额外的行）`login(form)``login_error(form)``"Invalid Username or Password"`

我还创建了一个`regex`用于密码验证的表达式，并希望它能正常工作（我仔细检查过），因为如果密码长度小于 7 个字符，它不会重定向到下一页而是重定向到同一个登录页面，但同时我想显示在浏览器上，就像`"Password length should be minimum 7 characters"`我无法做的消息一样（不知道该怎么做）

另外，如上所述，我`form.notnull()`在创建时已将用户名作为验证`Form`，当我尝试单击登录时，它正在检查表单是否验证，如果没有重定向到同一登录页面，但我想显示消息`"Please enter the username"`，如果没有，也显示密码假如

1.  上述正则表达式是否能正常工作（直到现在我都在使用正则表达式）

2.  如果浏览器上未提供用户名、密码，如何在浏览器上显示上述验证消息，因为我创建了另一个 html 页面，只是为了让`Invalid username or password`消息在详细信息不正确时出现在浏览器上

我们是否可以在单个 html 文件（如`login.html`）本身中进行所有这些验证？，我已经尝试了很多，但我无法捕捉到这里正在进行的过程，如果是这样，我们可以节省为单个消息创建多个 html

谁能告诉我如何解决上述常见问题？不要介意我的查询，因为这是我在 Web 应用程序中的第一步，而且我以前曾在 Web 应用程序上工作过

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:18:38.647

您可以将许多验证器添加到同一个输入字段，并且还有表单级别的验证。

```
from web import form

# field validators
username_required = form.Validator("Username not provided", bool)
password_required = form.Validator("Password not provided", bool)
password_length = form.Validator("Password length should be minimum 7 characters", lambda p: p is None or len(p) >= 7)

# form validators
login_details_required = form.Validator("Please Enter Login Details", lambda f: f["username"] or f["password"])

def check_login(f):
    # check for login here
    return False
valid_credentials = form.Validator("Invalid username or password", check_login)

login_form = form.Form(
    form.Textbox('username', username_required),
    form.Password('password', password_required, password_length, description="Password"),
    form.Button('Login'),
    validators=[login_details_required, valid_credentials],
)

my_form = login_form()
if not my_form.validates(dict(username="", password="small")):
    print my_form.render_css()

if not my_form.validates(dict(username="notnull", password="just-enough")):
    print my_form.render_css() 
```

请注意，`login_details_required`不会触发，因为只有在所有字段验证器都通过时才会触发表单级验证。

# alfresco - 如何在 Alfresco 中查找超过特定天数的内容

> ID：12909151
> 
> 赞同：0
> 
> 时间：2012-10-16T07:00:38.777
> 
> 标签：alfresco

我正在 Alfresco 中开发一些计划任务。其中一项任务应仅在某个日期属性早于固定天数的节点上运行。我研究了范围查询：`date:[MIN TO NOW]`，但我不想使用现在，而是过去*x*天的日期。

这可以在查询中指定吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:18:53.567

嗨，是的，这很容易。让任务触发 Javascript。

只需做一些Javascript：

```
 var days = 7;
 var time = date.getTime();
 var add = 86400000 * days;
 var newDate = new Date(time - add);

 var dateString = utils.toISO8601(newDate); 
```

现在在查询中使用 dateString，例如`"date:[MIN - " + dateString + "]"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T05:11:48.930

计划任务在 Spring 配置文件中定义。A`CronScheduledQueryBasedTemplateActionDefinition`执行查询并对每个结果执行操作。主要问题是向查询添加动态日期范围。

然而，它实际上并不是一个查询，而是一个**查询模板**，它是用 FreeMarker 处理的。用于处理模板的模型是由另一个 bean 创建的，`TemplateActionModelFactory`.

我们的解决方案是对该工厂进行子类化，以便为模板提供更丰富的模型：添加了一个函数来计算动态日期范围：

```
public class CustomTemplateActionModelFactory extends FreeMarkerWithLuceneExtensionsModelFactory {

    /**
      * Function to calculate a date range based on the number of days in the past.
      */
    private static class LuceneDateRangeOlderThanDays implements TemplateMethodModelEx {

        @SuppressWarnings("rawtypes")
        public Object exec(List args) throws TemplateModelException {
            if (args.size() == 1) {
                int days = ((TemplateNumberModel) args.get(0)).getAsNumber().intValue();
                Date date = new Date(System.currentTimeMillis() - days * 24L * 3600 * 1000);

                StringBuilder builder = new StringBuilder();
                builder.append("[2001-01-01 TO ");
                builder.append(DefaultTypeConverter.INSTANCE.convert(String.class, date));
                builder.append("]");

                return builder.toString();
            } else {
                throw new TemplateModelException("Invalid parameters.");
            }
        }
    }

    @Override
    public Map<String, Object> getModel() {
        // Extend the parent model with our custom function
        Map<String, Object> model = super.getModel();
        model.put("luceneDateRangeOlderThanDays", new LuceneDateRangeOlderThanDays());
        return model;
    }
} 
```

在 Alfresco 存储库的 Spring 配置中，定义您自己的 TemplateActionModelFactory 并在其余配置中使用它。

```
<bean id="customTemplateActionModelFactory" class="com.db.cms.repository.util.DBTemplateActionModelFactory">
    <property name="serviceRegistry">
        <ref bean="ServiceRegistry" />
    </property>
</bean> 
```

# arrays - 如何比较压缩数组

> ID：12909153
> 
> 赞同：1
> 
> 时间：2012-10-16T07:00:53.110
> 
> 标签：arrays, perl, pack

我有一组像这样打包的数组：

```
sub pack_key {
     return pack 'N' . ('w/a*' x @_), scalar(@_), @_;
} 
```

因为我将它们用作散列中的多值键（即：散列的键是数组）。

有没有什么快速的方法来比较打包数组中的前 n 个元素是否相同？或者相反 - 比较最后 m 个元素是否不同？

有一个明显的解决方案，即解包，并使用 smartmatch 运算符 (~~)，但我正在寻找直接在打包数组上运行的东西。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:17:52.010

因为您已经打包了嵌入长度的任意长度数据，所以答案是否定的，没有快速的方法来比较两个字符串。您必须一次通过字符串一个组件。

这是一个有效的解决方案。

*警告：*这取决于您使用单字节字符编码安装 Perl。这通常是正确的，但如果不是，请查看[Encode](http://perldoc.perl.org/Encode.html)以确保这些字符串被视为字节。

```
use strict;
use warnings;

my @arr1 = (1,2,3,4,5);
my @arr2 = (1,2,3,4,8);

sub pack_key {
     return pack 'N' . ('w/a*' x @_), scalar(@_), @_;
}

sub n_elements_equal {
    my ($compare_length,$k1,$k2) = @_;
    my $length1 = unpack('N',$k1);
    my $length2 = unpack('N',$k2);
    if ($length1<$compare_length or $length2<$compare_length) { return 0; }

    my $curr_pos = 4;
    my $curr_element = 1;

    while ($curr_element++ <= $compare_length)
    {
        my $el1 = unpack('w/a*',substr($k1,$curr_pos));
        my $el2 = unpack('w/a*',substr($k2,$curr_pos));
        if ($el1 ne $el2) { return 0; }
    $curr_pos += (unpack('w',substr($k1,$curr_pos)) + 1);       
    }
    return 1;
}

my $key1 = pack_key(@arr1);
my $key2 = pack_key(@arr2);

for (1..5)
{
    print "First $_ elements are " . 
        (n_elements_equal($_,$key1,$key2) ? '' : 'not ') . "equal.\n"; 
} 
```

这比仅仅打开包装并进行智能匹配更好吗？如果您的数组真的很长，那么它会更快，因为您不必解压缩整个数组。它只遍历字符串，直到确定匹配状态。如果数组不是很长，它可能不会为您节省任何东西。

最好通过更改设计来解决这个问题。但这取决于你在做什么。

# unix - UNIX中ln命令的目的是什么

> ID：12909159
> 
> 赞同：-1
> 
> 时间：2012-10-16T07:01:34.097
> 
> 标签：unix

**ln**命令的目的是什么？**软链接**和硬链接有**什么**区别？

如果删除原始文件，软链接/硬链接会有所帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T07:04:57.873

谷歌是你的朋友。查看 Wikipedia [ln (Unix)](http://en.wikipedia.org/wiki/Ln_%28Unix%29)条目，该条目是搜索“ln”时的最高搜索结果。

来自维基文章：

> 有两种类型的链接，它们都是由 ln 创建的：
> 
> *   **符号链接**，它指的是指示另一个文件的抽象位置的符号路径，以及
> *   **硬链接**，指物理数据的具体位置。
> 
> 当移动或删除链接源（链接到的内容）时，这些链接的行为会有所不同。符号链接不会更新（它们只包含一个字符串，它是其目标的路径名）；硬链接始终引用源，即使移动或删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T07:06:35.983

ln 是生成链接的命令。链接就像文件别名。

软链接是指您有文件的路径，因此文件可能存在或不存在，并且即使文件位于不同的分区中也可以链接文件。

硬链接是指向相同内容的节点的链接，因此如果您删除原始文件，内容仍然存在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T07:06:37.873

*ln*的目的是创建链接。链接的用例包含例如。

*   版本控制
    您可以安装多个库、程序等，并“指向”当前的一个
*   Windows桌面中的快捷方式
*   创建集合而不复制数据

这些通常是“指针”，即软链接。
硬链接和软链接的区别在于，当原始文件的硬链接副本被删除时，文件仍然存在。该功能是通过计算对每个文件的引用来实现的。然后必须删除所有引用，即硬链接或原始文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T07:21:34.183

要在文件之间建立链接，我们需要使用**ln**命令。符号链接（也称为软链接或符号链接）由一种特殊类型的文件组成，用作对另一个文件或目录的引用。类 Unix/Linux 操作系统经常使用符号链接。**如果您创建链接，那么您的原始文件将不会被删除。**

有两种类型的链接。

1.  **软链接**：引用一个符号路径，指示另一个文件的抽象位置
2.  **硬链接**：参考物理数据的具体位置。

一些参考

[http://www.unixtutorial.org/commands/ln/](http://www.unixtutorial.org/commands/ln/)

[http://manpages.ubuntu.com/manpages/lucid/man1/ln.1.html](http://manpages.ubuntu.com/manpages/lucid/man1/ln.1.html)

# java - 在java中解码编码的磅符号

> ID：12909161
> 
> 赞同：8
> 
> 时间：2012-10-16T07:02:07.487
> 
> 标签：java

我们正在使用外部服务以 CSV 格式获取数据。我们正在尝试将数据写入响应，以便可以将 csv 下载到客户端。不幸的是，我们正在获取以下格式的数据。

```
Amount inc. VAT      Balance
Â£112.83             Â£0.0
Â£97.55              Â£0.0
Â£15.28              Â£0.0 
```

我们无法解码内容。有没有办法在java中解码`Â£`和显示。`£`

是否有任何 String Utils 可用于解码字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T07:03:11.280

该文件似乎以 UTF-8 编码。您应该将其阅读为 UTF-8。

如果您使用`java.io.FileReader`and company，则应打开 a`FileInputStream`并改用 an `InputStreamReader`：

```
// Before: Reader in = new FileReader(file)
Reader in = new InputStreamReader(new FileInputStream(file), "UTF-8"); 
```

如果您正在使用其他方法来读取文件（可能是外部或内部类库？），请查看其文档是否允许指定用于读取文件的文本编码。

**更新：**如果您已经有一个类似 mojibake 的字符串`Â£97.55`并且无法修复它的读取方式，则重新编码的一种方法是将字符串转换回字节并将字节重新解释为 UTF-8。此过程不需要任何外部“StringUtils”或编解码器库；Java 标准 API 足够强大：

```
String input = ...obtain from somewhere...;
String output = new String(input.getBytes(/*use platform default*/), "UTF-8"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T09:05:13.230

**问题：** 当我们在字符串上使用 getBytes() 时，它会尝试使用默认编码器进行解码。一旦字符串被编码，如果我们使用默认解码器，解码可能无法正常工作。

**解决方案：apache 的一个** StringUtils 将帮助我们在回写响应时解码这些字符。这个类在`org.apache.commons.codec.binary`包中可用。

```
String CSVContent = "/* CSV data */";
/**
 *  Decode the bytes using UTF8\.  
 */
String decodedStr = StringUtils.newStringUtf8(CSVContent.getBytes("UTF-8"));
/**
 *  Convert the decoded string to Byte array to write to the stream  
 */
Byte [] content = StringUtils.getBytesIso8859_1(decodedStr); 
```

Maven 2.0 依赖项。

```
<dependency>
     <groupId>commons-codec</groupId>
     <artifactId>commons-codec</artifactId>
     <version>1.6</version>
</dependency> 
```

**解决方案：两个**

根据@Joni，使用标准 API 的更好解决方案：

```
content = CSVContent.getBytes("ISO-8859-1"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T07:14:01.350

我们很幸运现在拥有 Java 7。您可以使用 、 和 执行[`Paths`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Paths.html)以下[`Files`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html)操作[`StandardCharsets`](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/StandardCharsets.html)：

```
Path path = Paths.get("/tmp", "input.txt");
List<String> lines = Files.readAllLines(path, StandardCharsets.UTF_8);
for (String line : lines) {
    System.out.println(line);
} 
```

# pervasive - 从数据文件重新创建 ddf 文件 (Pervasive SQL)

> ID：12909166
> 
> 赞同：2
> 
> 时间：2012-10-16T07:02:20.797
> 
> 标签：pervasive

我继承了一个通过 btrieve 接口使用 pervasiveSQL 数据库的项目。随着时间的推移，已经有一些数据文件的复制。看起来 btrieve 并不真的需要 ddf 文件；它对单独的数据文件感到满意，因此并不总是与它们一起复制 ddf 文件。随着时间的推移，这导致了在某些安装中 ddf 文件和数据文件不匹配的问题（即 ddf 的数据定义与实际表结构不匹配）。这对于程序的运行版本没有问题，但是当需要更改数据库结构时，就会成为维护问题。

那么问题来了：有没有一种方法/工具可以从数据文件中重新创建 ddf 文件？对我来说这似乎是可能的，因为数据文件中似乎有结构信息。我不介意重新创建的 ddf 是否会丢失实际的字段和索引名称。

如果有帮助：表之间没有定义关系（数据中有外键，但没有告知数据库）。所以我实际上只需要字段和索引定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:16:07.693

没有通用工具可以从数据文件重新创建 DDF。您可以使用 DDF Builder 根据数据文件重新创建表定义，但您需要了解记录布局。

Btrieve 数据文件不存储字段结构信息。DDF 具有该信息，生成数据文件的应用程序存储该信息，但数据文件本身不存储任何字段信息。Btrieve 文件中唯一与元数据相关的是索引信息。

我的建议是使用 CREATE TABLE / ALTER TABLE 语句（或 DTI/DTO）通过 DDF 维护数据文件，而不是先更改数据文件，然后再更新 DDF。通过使用 ALTER TABLE 语句修改表，DDF 和数据文件始终保持同步。

# ios - 在 RubyMotion 中，当点击返回链接时如何取消列表刷新？

> ID：12909168
> 
> 赞同：3
> 
> 时间：2012-10-16T07:02:23.597
> 
> 标签：ios, grand-central-dispatch, dispatch, rubymotion

我是 RubyMotion 的新手，正在努力掌握一些 API。

我的应用程序是一个非常基本的 UITable 列表系列，如果您选择一个项目，您将进入该项目的列表，这是通过推送一个新控制器来实现的。

这一切都很好，但在我的列表控制器之一的 viewDidLoad 方法中，我正在调用一个方法，该方法从互联网刷新列表的数据。我在异步调度队列中运行刷新，所以 viewDidLoad 看起来像这样：

```
def viewDidLoad
  super

  loadItems

  Dispatch::Queue.concurrent.async do
    refreshItems
  end
end 
```

我遇到的问题是，如果我进入此列表，等待刷新完成（通过拖尾调试日志）然后返回并进入另一个列表很好，但如果我进入并立即退出并进入另一个列表之前刷新已完成，应用程序崩溃并出现无法描述的错误，我可靠地告知这是一个段错误。

所以我很确定我需要在关闭控制器之前等待刷新完成，或者在关闭控制器之前以某种方式从调度队列中终止刷新线程。所以我的问题是：

1.  当您按下左上角返回并关闭当前控制器时，如何捕捉“返回”事件？推动控制器时，您可以免费获得此功能，但我不确定如何捕获返回事件。

2.  哪种方法是正确的，在关闭控制器之前杀死刷新线程还是等待它完成？杀死它似乎有点不安全，也许我可以向它发送一条消息，要求它完成正在做的事情并退出，然后等待它回复说好的完成。

3.  您如何获得问题 2 的正确答案？如果我知道如何从 Dispatch'd 线程将消息发送回主线程，这将使这更简单一些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T13:48:18.053

你能让视图监听“刷新完成”通知吗？

在 viewDidLoad 中，视图将自己注册为通知的侦听器，然后启动后台刷新。

刷新开始处理。

用户触摸回来，在 viewDidUnload 中，视图停止监听通知，并消失。

刷新完成（在我的应用程序中，这会写入 CoreData），并发送通知是否存在视图。

如果视图存在，则视图中的通知处理程序会获取数据并刷新 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T21:33:06.480

在异步调用之外设置一个实例变量并在刷新循环中检查它。离开时将其设置为“false”。

```
def viewDidLoad
  super

  loadItems

  @refresh = true

  Dispatch::Queue.concurrent.async do
    refreshItems
  end
end

def refreshItems
  # inside your loop
    if @refresh
      # stuff
    end
  # end loop
end

def viewWillDisappear(animated)
  @refresh = false

  super
end 
```

# c++ - Boost ASIO socket 消耗文件描述符

> ID：12909170
> 
> 赞同：1
> 
> 时间：2012-10-16T07:02:27.873
> 
> 标签：c++, linux, boost, boost-asio

我正在使用 Boost ASIO 套接字与 linux 下的一些远程设备进行通信，但是当端点无法访问时我遇到了问题。首先，这是显示此问题的代码部分：

```
try {
   if(mysocket == NULL)
   {
      mysocket = new boost::asio::ip::tcp::socket(io_service);
   }
   mysocket->connect(boost::asio::ip::tcp::endpoint(boost::asio::ip::address::from_string("192.168.0.12"), 1));
   printf("connected\n");
   return 0;
}
catch (std::exception &e)
{
   boost::system::error_code ec;
   mysocket->close(ec);
   delete mysocket;
   mysocket = NULL;
   printf("not connected %s\n", e.what());
} 
```

通过在我的类中使用这段代码，我得到了越来越多的 eventfd 类型的文件描述符，直到所有可用的 fd 都被使用并且应用程序崩溃。上面的代码有问题吗？为什么 boost 不关闭文件描述符？我什至删除了套接字！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:55:20.847

问题是由于没有释放资源，例如 boost sockets。这些套接字留下了打开的文件，逐渐达到我系统中的打开文件限制，因此尝试打开其他文件导致错误。实际异常是由 boost UUID 生成器引发的，它无法打开文件！

# c# - 为什么 WPF 绑定不调用 PropertyMetadata 中定义的 propertyChangedCallback，而代码隐藏中的 setter 呢？

> ID：12909173
> 
> 赞同：2
> 
> 时间：2012-10-16T07:02:34.137
> 
> 标签：c#, wpf, data-binding, dependency-properties

我制作了一个用户控件，并在其中定义了一个依赖属性，如下所示：

```
public static readonly
DependencyProperty SourceProperty =
    DependencyProperty.Register(
        "Source",
        typeof( ObservableCollection<object> ),
        typeof( SingleLineChart ), 
        new PropertyMetadata(
            default( ObservableCollection<object> ),
            lineAffectedPropertyChanged ) ); 
```

我也有一个普通的属性，它包装了上面的属性。在它的设置器中，我只是调用该`SetValue( SourceProperty, value );`方法。

当我`Source`从调用和执行的代码隐藏文件中设置它时`lineAffectedPropertyChanged`，一切都很好；但是当我使用简单的数据绑定时，什么也没有发生。

```
 <Line:SingleLineChart
        Name="bestFitnessDisplayer"
        Source="{Binding Path=bestFitnessHistory}"
        Margin="20"/> 
```

我想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:05:39.667

我知道已经晚了。我猜想绑定属性的泛型类型不是对象类型。.Net 无法在 和 的类型之间进行`ObservableCollection<object>`转换`ObservableCollection<Something>`。最好创建不带泛型参数的 IEnumerabe/ICollection 或 IList 类型的 DependencyProperty。

# iphone - 如何在iphone中旋转相机预览模式

> ID：12909179
> 
> 赞同：0
> 
> 时间：2012-10-16T07:02:44.970
> 
> 标签：iphone

我正在尝试在`UIImage`使用相机拍摄图像时旋转一段时间。但是，我`portrait`只能在模式下获得预览。如何在`landscape`模式下显示预览图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:10:52.990

[阅读文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)揭示了`UIImagePickerController`这个有趣的花絮：

> UIImagePickerController 类仅支持纵向模式。此类旨在按原样使用，不支持子类化。

尽管有 Apple 的警告，但仍有一种处理方式：

您可以在委托类中订阅轮换通知：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications]; 
```

然后，根据设备的当前旋转，您可以将 a 应用`CGAffineTransform`到覆盖视图。可以[在此处找到](https://stackoverflow.com/questions/8039383/custom-camera-rotation-problems)此类转换的示例。该特定答案在 iOS 6 中对您没有帮助，因为`shouldAutorotateToInterfaceOrientation`永远不会对您的`UIViewController`子类进行调用。您最好的版本策略是订阅通知。请记住，您将在这里进行全手动操作，最好的办法是找出一种仅支持纵向模式的方法。

此外，请确保在完成后平衡通知调用与此调用：

```
[[UIDevice currentDevice] endGeneratingDeviceOrientationNotifications]; 
```

# android - 如何在 Android 中检查请求是 POST 还是 GET

> ID：12909185
> 
> 赞同：3
> 
> 时间：2012-10-16T07:03:12.507
> 
> 标签：android, android-webview

我想检查从网页到 Android 设备的请求，`whether it is POST request or GET request as in Google Chrome browser`. 请告诉我该怎么做。

![在此处输入图像描述](../Images/36c6d3cd5ab184eaa42b60428e2ab7ef.png)

**注意：**我想在任何`WebView's Override method`.

```
if request.method == 'GET':
    do_something()
elif request.method == 'POST':
    do_something_else() 
```

**编辑1：**我试图登录谷歌。我得到了如下的“POST”。我已经尝试过使用 Android WebView 使用 onFormResubmission 方法。但没有调用。

```
@Override
public void onFormResubmission(WebView view, Message dontResend, Message resend) {          
    super.onFormResubmission(view, dontResend, resend);
    } 
```

![在此处输入图像描述](../Images/6c2ccfee3c53a391735bfdcf1052e93c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-22T08:28:29.967

```
HttpURLConnection con = (HttpURLConnection) url.openConnection();
String reqMethod = con.getRequestMethod(); 
```

这样就可以得到准确的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:17:46.957

使用自定义[WebViewClient](http://developer.android.com/reference/android/webkit/WebViewClient.html#onFormResubmission%28android.webkit.WebView,%20android.os.Message,%20android.os.Message%29)如下

```
 WebView webview = new WebView(this){

        @Override
        public void loadData(String data, String mimeType, String encoding) {
            Log.d("TAGloadData", data+" ==> "+mimeType+" "+encoding);
            super.loadData(data, mimeType, encoding);
        }

        @Override
        public void loadUrl(String url, Map<String, String> extraHeaders) {
            Log.d("TAGloadUrl", " ==> "+extraHeaders);
            super.loadUrl(url, extraHeaders);

        }

        @Override
        public void loadDataWithBaseURL(String baseUrl, String data,
                String mimeType, String encoding, String historyUrl) {
            Log.d("TAGloadUrlB", " ==> "+data);
            super.loadDataWithBaseURL(baseUrl, data, mimeType, encoding, historyUrl);
        }

        @Override
        public void loadUrl(String url) {

            if(!url.startsWith("method"))
                Log.d("TAGForm", " ==> using Post method");
            else{
                url = url.replaceFirst("method","");
                Log.d("TAGForm", " ==> using Get method"+url);
            }

            super.loadUrl(url);
            Log.d("TAGloadUrl", " ==> "+url);
        }

    }; 
```

# iphone - 如何在 UIImageView 中插入 UITextView 并使其成为可移动视图

> ID：12909190
> 
> 赞同：-1
> 
> 时间：2012-10-16T07:03:36.093
> 
> 标签：iphone, objective-c, ios, xcode

我想在图像视图中显示文本字段的内容，并且还需要使其在主视图中可移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:39:56.553

如果我没听错的话...

例如：
`myImageView`- 你的 UIImageView 对象，
`textView`- 你的 UITextView 对象，
`textField`- 你的 UITextField 对象。

首先 - 您需要将 textView 添加到 myImageView：

```
CGRect textviewFrame = CGRectZero;
textviewFrame.size = myImageView.frame.size;
textView.frame = textviewFrame;
textView.scrollEnabled = YES; // To enable scroll
textView.editable = NO; 
```

然后你需要实现 UITextField 委托方法来更新 textView 文本：

```
- (void)textFieldDidEndEditing:(UITextField *)textField
{
    textView.text = textField.text;
} 
```

所以，这就是你所需要的。

# c++ - 将无符号字符读入字符串

> ID：12909193
> 
> 赞同：0
> 
> 时间：2012-10-16T07:03:44.133
> 
> 标签：c++, strcmp, unsigned-char, memcmp

我有一个无符号字符数组：

```
unsigned char buffer[BUFFER_SIZE]; 
```

我想将该数组中的前 N ​​个无符号字符读入一个字符串，但是在查看之后`strncpy()`，这似乎只需要指向有符号字符的指针。

我应该看`memcpy()`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:12:26.820

不确定确切的语法，但如果可能，您应该使用：

```
reinterpret_cast<char *>(buffer[i]); 
```

另见：

[有没有从 unsigned char* 转换为 char* 的好方法？](https://stackoverflow.com/questions/4708444/is-there-a-good-way-to-convert-from-unsigned-char-to-char)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:06:18.590

`strcmp`并`memcmp`比较数据，他们不会复制它...

无论如何，只需转换`char *`并使用任何有意义的 stdlib 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T07:52:16.527

如果用字符串表示一个字符数组，那么 C++ 中最简单的方法就是使用 std::copy，无需转换任何内容：

```
unsigned char buffer[BUFFER_SIZE];
char dest[BUFFER_SIZE]

std::copy( buffer, buffer + N, dest ); 
```

如果您的意思是 std::string，只需使用迭代器样式构造函数：

```
std::string dest( buffer, buffer + N ); 
```

# java - 获取 java.lang.NoSuchFieldError：可调用线程中的 LINUX？

> ID：12909194
> 
> 赞同：0
> 
> 时间：2012-10-16T07:03:45.427
> 
> 标签：java, firefox, exception, selenium, callable

我正在使用 Callable 线程运行 Selenium 测试用例，当我尝试运行测试用例时，我在**executerService.submit(callable).get()这一行得到****java.lang.NoSuchFieldError: LINUX**异常。

 **我的测试用例是可调用的，对于每个测试用例，我都会创建可调用对象并提交它，但是在提交之后我得到了

```
 java.util.concurrent.ExecutionException: java.lang.NoSuchFieldError: LINUX
        at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
        at java.util.concurrent.FutureTask.get(FutureTask.java:111)
        at com.xyz.TestManager.startTest(TestManager.java:142)
        at com.ensarm.crawler.socket.SocketServerThread.run(SocketServerThread.java:57)
        at java.lang.Thread.run(Thread.java:679)
    Caused by: java.lang.NoSuchFieldError: LINUX
        at org.openqa.selenium.firefox.FirefoxBinary.isOnLinux(FirefoxBinary.java:60)
        at org.openqa.selenium.firefox.FirefoxBinary.startProfile(FirefoxBinary.java:72)
        at org.openqa.selenium.firefox.FirefoxBinary.clean(FirefoxBinary.java:225)
        at org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:80)
        at org.openqa.selenium.firefox.FirefoxDriver.startClient(FirefoxDriver.java:215)
        at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:106)
        at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:154)
        at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:150)
        at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:97)
        at com.ensarm.crawler.web.browser.FirefoxBrowser.initialize(FirefoxBrowser.java:308)

at com.xyz.navigator.IpProxyNavigator.initialize(IpProxyNavigator.java:46)
        at com.xyz.tests.TestThread.call(TestThread.java:56)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 
```

我正在使用以下罐子： **selenium-firefox-driver-2.20.0.jar、webdriver-common-0.9.7376.jar、webdriver-firefox-0.9.7376.jar**，我的 fireFox 版本是**3.6.23**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:14:00.407

**根本原因**
源中 引用的[Platform.LINUX](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/Platform.html)字段不存在。

**修复**
需要升级到最新版本的 selenium jar。**

# java - Junit希望在一定时间后停止该方法

> ID：12909196
> 
> 赞同：3
> 
> 时间：2012-10-16T07:04:00.590
> 
> 标签：java, junit

我有一个 junit 测试类。测试类读取一个文件并向 telnet 服务器发送一条消息。根据文件中的消息数量，处理可能需要 1 小时到 5 小时。我希望这个测试类在一定数量后停止在属性文件中配置的时间。下面是我的代码。

```
public void sendMessage() throws InterruptedException {
        final long timetorun = Long.valueOf(props.getMap().get("timetorun"))
                .longValue();

        try {

            System.out.println("duration : " + duration);
            while (duration < timetorun) {
                endTime = System.currentTimeMillis();
                duration = endTime - startTime;
                logger.info("Sending Message");
                telnetUtils.run(telnetClient);
                // sendMessage();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

假设 timetorun 是 1hr 这里的问题是如果 telnetUtils.run(telnetClient); 需要超过 1 小时这个逻辑不起作用。

任何人都可以就如何实现这一目标提供一些帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T09:32:10.503

您可以在测试用例上设置超时。例如：

```
import org.junit.After;
import org.junit.Before;
import org.junit.Test;

public class TestTimeout {
    private long startAt;
    @Before
    public void before() {
        this.startAt = System.currentTimeMillis();
    }
    @After
    public void after() {
        System.out.println(String.format("Total time: %1$d ms", System.currentTimeMillis() - startAt));
    }
    @Test(timeout=1000)
    public void timeout() throws InterruptedException {
        Thread.sleep(2000);
    }
} 
```

由于超时，测试失败。它在标准输出中写入：

```
Total time: 1001 ms 
```

# filepicker.io - 如果在 DOM 加载后插入 filepicker.io 小部件将不起作用

> ID：12909197
> 
> 赞同：2
> 
> 时间：2012-10-16T07:04:10.387
> 
> 标签：filepicker.io

我刚刚与 filepicker.io 集成，我正在使用他们提供的第一个示例，其中包含拖放小部件。

```
<input type="filepicker-dragdrop"/> 
```

如果页面加载时已存在于 html 中，则自定义输入将正确转换。但是，如果您稍后动态地向页面添加一个，您所得到的只是一个无特色的默认输入：

```
// Inserts generic featureless text input
$('#some_div').html('<input type="filepicker-dragdrop"/>'); 
```

有没有办法强制文件选择器重新处理 DOM 并转换新插入的小部件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T19:40:48.760

当 dom 元素被创建并插入到 DOM 中时，您会希望对它使用 constructWidget 调用。请参阅[https://developers.filepicker.io/docs/web/#widgets-programming](https://developers.filepicker.io/docs/web/#widgets-programming)

# excel - 最大化打开 Excel 电子表格

> ID：12909200
> 
> 赞同：6
> 
> 时间：2012-10-16T07:04:24.643
> 
> 标签：excel, excel-2010, vba

为了获得更好的用户体验，我想通过用户的桌面 MS Excel 2010 程序打开从 Web 下载的电子表格最大化。

这可以通过首选项配置来实现还是涉及宏？

谢谢！车

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-16T08:53:44.027

这是一个简单的宏，可以满足您的要求。您需要将其放入工作簿模块中。

```
Private Sub Workbook_Open()
    Application.WindowState = xlMaximized 'maximize Excel
    ActiveWindow.WindowState = xlMaximized 'maximize the workbook in Excel
End Sub 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-09-14T07:23:54.397

1.  从开始菜单打开excel
2.  启动excel时，最大化窗口。当时，没有打开任何文档的excel。
3.  将扩展名为 .xls 的文档拖到 Excel 中
4.  关闭excel

现在，从资源管理器中打开任何文档，您会看到 excel 电子表格最大化

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2016-09-09T10:20:07.933

首先，如果我因为精通法语而出现拼写或语法错误，请原谅，我是黎巴嫩人。与Excel相比，我遇到了同样的问题，Excel（Excel 2010）无法在全窗口（最大化）中打开，我多次尝试定位Excel，我无法解决问题，我认为问题是由office与其他软件冲突。

最后，我解决了这个问题。如何？- 我有另一个硬盘驱动器 (HDD)，我在该磁盘上安装了 Windows。- 我安装了 Office (Microsoft Office) - 我复制了这张新的 Office 光盘 2 - 我擦除（删除）了光盘 1 - 我粘在了 Office 光盘 1 上 问题解决了。

提示：下次安装 Office 时，建议在硬盘驱动器的另一部分保留此 Office 的副本，以在遇到问题时替换原始副本。

# c++ - 如何在 C++ 中调用 void foo(int (&)[]) {}？

> ID：12909213
> 
> 赞同：4
> 
> 时间：2012-10-16T07:05:32.180
> 
> 标签：c++, arrays, overloading

```
void f1(int (&)[8])
{}

void f2(int (&)[])
{}

int main()
{
    int a[8];

    f1(a); // OK

    f2(/* What should I put here? */); // ???

    return 0;
} 
```

**我怎么称呼f2？**

PS： void f2(int (&)[]) {} 在 VC++ 2012 下是合法的。

考虑以下：

```
template<class T>
struct A
{};

template<class T>
struct A<T[]>
{};

template<class T, size_t size>
struct A<T[size]>
{}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T07:13:48.853

“f2”首先不应该编译。如果 [] 是第一级间接，则只能省略数组参数的大小，可以这么说，在这种情况下，它实际上不是数组而是指针。在这种情况下，第一级间接是 &，所以你不能省略 [] 中的大小。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T07:32:06.700

C++ 有一个明确的规则，它不允许引用或指向无边界数组的指针作为参数（但这些都是有效的类型）。以下将是此类参数的有效参数

```
extern int arg[]; 
```

请注意，您不能使用具有大小的数组。C++ 没有类型兼容性的概念。C 有，并使没有大小的数组类型与相应的有大小的数组类型兼容。在 C++ 中，类型系统更加严格，类型具有链接，并且不存在无原型函数类型，因此类型兼容性不是真正需要的，因此 C++ 放弃了它。

# c++ - 就性能而言，获取线程 ID 是否昂贵？

> ID：12909215
> 
> 赞同：5
> 
> 时间：2012-10-16T07:05:37.040
> 
> 标签：c++, multithreading, caching

我需要从我无法控制的线程中访问线程 ID（它在异步回调函数中，并且从一组不同的线程中调用）。

我想知道在性能方面访问线程 ID 是否昂贵？

我打算使用任何一个`boost::this_thread::get_id()`或`GetCurrentThreadId()`从 Windows 中使用。

澄清一下，当数据从我的回调到达时，我需要准备一些本地缓存数组，我计划避免错误和锁定，为每个线程使用本地缓存，并使用线程 id 访问正确的缓存. 也因为进来的数据总是大小不一，所以不能入栈，想避免一直创建和删除堆数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T07:28:25.670

Windows 将所有线程特定信息存储在所谓的[TEB](http://en.wikipedia.org/wiki/Thread_Environment_Block)中。在 x86 中，`fs`寄存器指向此结构的开头，在 x64 中，它是`gs`寄存器。

在 x86 窗口中，线程 id 存储在`FS:[0x24]`，大概访问起来应该相当便宜。将信息存储在线程本地存储中涉及一个额外的间接（我们从 TEB 获取 TLS 的地址），因此它与您的手动私有缓存基本相同 - 对您来说工作量更少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T07:12:48.077

为什么不使用线程本地存储？ [http://www.boost.org/doc/libs/1_35_0/doc/html/thread/thread_local_storage.html](http://www.boost.org/doc/libs/1_35_0/doc/html/thread/thread_local_storage.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-05T16:40:39.187

根据[MSDN (DevDiv#1039430)](https://blogs.msdn.microsoft.com/vcblog/2015/07/14/stl-fixes-in-vs-2015-part-2/)，在 VS2015 之前

> this_thread::get_id() 太慢了

他们没有说有多慢。

# java - 扩展过滤器截获的图像

> ID：12909219
> 
> 赞同：2
> 
> 时间：2012-10-16T07:05:49.833
> 
> 标签：java, mongodb, tomcat, richfaces, myfaces

我最近将我的数据和文件存储移植到了我开始真正喜欢的 Mongodb。我现在有一个看起来很奇怪的问题。

当我的应用程序尝试从 GridFS 为用户写入图像时，T​​omohawk 中的文件扩展过滤器似乎正在拦截。我只希望过滤器支持我的文件上传 - 当系统将图像推送给用户时它不应该处于活动状态。关于如何阻止它拦截这些文件的任何想法都会非常有帮助。

更多细节：

我使用 Tomohawk 文件上传，并在我的 web.xml 中启用了扩展过滤器，以便使用它。我在 RichFaces MediaOutput 控件中显示图像，该控件提供了一个输出流，您可以将媒体字节流写入该输出流。当我将图像存储为文件或在 MySql 中时，一切正常。

现在我正在使用 GridFSDBFile writeTo: OutputStream 方法将我的图像写入 RichFaces MediaOutput 控件。当我尝试显示我的图像时，文件扩展过滤器似乎拦截了它，然后 Tomcat 抛出了 TokenMgrException。

我只希望过滤器支持我的文件上传 - 当系统将图像推送给用户时它不应该处于活动状态。关于如何阻止它拦截这些文件的任何想法都会非常有帮助。

这是错误：

```
Oct 16, 2012 2:17:29 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [Faces Servlet] in context with path [/ilearn] threw exception [Servlet execution threw an exception] with root cause
org.apache.tomcat.util.http.parser.TokenMgrError: Lexical error at line 1, column 1\.  Encountered: "{" (123), after : ""
    at org.apache.tomcat.util.http.parser.HttpParserTokenManager.getNextToken(HttpParserTokenManager.java:434)
    at org.apache.tomcat.util.http.parser.HttpParser.jj_consume_token(HttpParser.java:267)
    at org.apache.tomcat.util.http.parser.HttpParser.Type(HttpParser.java:64)
    at org.apache.tomcat.util.http.parser.HttpParser.MediaType(HttpParser.java:16)
    at org.apache.catalina.connector.Response.setContentType(Response.java:806)
    at org.apache.catalina.connector.Response.checkSpecialHeader(Response.java:1140)
    at org.apache.catalina.connector.Response.setHeader(Response.java:1460)
    at org.apache.catalina.connector.ResponseFacade.setHeader(ResponseFacade.java:535)
    at com.sun.faces.context.ExternalContextImpl.setResponseHeader(ExternalContextImpl.java:777)
    at javax.faces.context.ExternalContextWrapper.setResponseHeader(ExternalContextWrapper.java:717)
    at org.richfaces.resource.ResourceHandlerImpl.handleResourceRequest(ResourceHandlerImpl.java:211)
    at javax.faces.application.ResourceHandlerWrapper.handleResourceRequest(ResourceHandlerWrapper.java:125)
    at org.apache.myfaces.custom.captcha.CAPTCHAResourceHandlerWrapper.handleResourceRequest(CAPTCHAResourceHandlerWrapper.java:208)
    at javax.faces.application.ResourceHandlerWrapper.handleResourceRequest(ResourceHandlerWrapper.java:125)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:591)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

这是我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID" version="3.0">
    <display-name>iLearn</display-name>
    <welcome-file-list>
        <welcome-file>index.jsf</welcome-file>
    </welcome-file-list>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>
    <context-param>
        <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>server</param-value>
    </context-param>
    <context-param>
        <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
        <param-value>resources.application</param-value>
    </context-param>
    <listener>
        <listener-class>org.jboss.weld.environment.servlet.Listener</listener-class>
    </listener>
    <context-param>
        <param-name>javax.faces.CONFIG_FILES</param-name>
        <param-value>/WEB-INF/beans.xml</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>org.richfaces.SKIN</param-name>
        <param-value>ruby</param-value>
    </context-param>
    <context-param>
        <param-name>org.richfaces.CONTROL_SKINNING</param-name>
        <param-value>enable</param-value>
    </context-param>
  <filter>
    <filter-name>AccessFilter</filter-name>
    <filter-class>com.iLearn.security.AccessFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>AccessFilter</filter-name>
    <url-pattern>/restricted/*</url-pattern>
  </filter-mapping>
  <filter>
        <filter-name>Extensions Filter</filter-name>
        <filter-class>org.apache.myfaces.webapp.filter.ExtensionsFilter</filter-class>
        <init-param>
            <description>
            Set the size limit for uploaded files.
                Format: 10  - 10 bytes
                        10k - 10 KB
                        10m - 10 MB
                        1g  - 1 GB
        </description>
            <param-name>uploadMaxFileSize</param-name>
            <param-value>100m</param-value>
        </init-param>
        <init-param>
            <description>
            Set the threshold size - files below this limit are stored 
            in memory, files above this limit are stored on disk.
                Format: 10  - 10 bytes
                        10k - 10 KB
                        10m - 10 MB
                        1g  - 1 GB
        </description>
            <param-name>uploadThresholdSize</param-name>
            <param-value>100k</param-value>
        </init-param>
        <init-param>
            <description>
            Set the path where the intermediary files will be stored.
        </description>
            <param-name>uploadRepositoryPath</param-name>
            <param-value>/iLearnData/temp/</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>Extensions Filter</filter-name>
        <servlet-name>Faces Servlet</servlet-name>
    </filter-mapping>
</web-app> 
```

# exception - Sonar Ant 无法识别新的端口映射，BootstrapException: Connection denied

> ID：12909220
> 
> 赞同：0
> 
> 时间：2012-10-16T07:05:56.580
> 
> 标签：exception, ant, sonarqube

我将声纳更改为在 localhost:9100 而不是默认的 localhost:9000 上运行。我重新启动了服务器，我可以浏览到新地址。但是，当我使用 Ant 执行 Sonar 时，出现以下异常。

```
org.sonar.batch.bootstrapper.BootstrapException: Connection refused 
```

查看 Sonar Ant 日志，它清楚地指出：

```
[sonar:sonar] Sonar server: http://localhost:9000 
```

为什么 Ant 仍然尝试在 9000 端口执行 Sonar？该端口仅在 Sonar 服务器启动时读取的 Sonar 属性文件中定义（和更改）。因此，该端口未在 Ant 目标脚本或属性中定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:07:32.723

您必须指定以下属性

```
sonar.host.url=http://localhost:9100 
```

，如果您希望 Sonar 批处理连接到正确的 URL。

您可以将其设置为 Ant 脚本中的属性或 JVM 参数。

# ruby-on-rails - 使用 ActiveRecord 进行条件链接

> ID：12909221
> 
> 赞同：4
> 
> 时间：2012-10-16T07:06:02.473
> 
> 标签：ruby-on-rails, activerecord

我试图实现条件链接，这就是我得到的：

控制器索引动作代码：

```
@range_start = params[:range_start]
@range_stop = params[:range_stop]
Contract.within_range(@range_start, @range_stop) 
```

型号代码：

```
def self.within_range(range_start = Date.today - 1.month, range_stop = nil)
  self.started_after(range_start).started_before(range_stop)
end

def self.started_after(range_start)
  if range_start.blank?
    self
  else
    self.where('start_date >=?', range_start)
  end
end

def self.started_before(range_stop)
  if range_stop.blank?
    self
  else
    self.where('start_date<=?', range_stop)
  end
end 
```

它有效，但看起来不太好。我尝试使用 对其进行一些改进`tap`，但没有成功。如何改进此代码？

更新： in 可以转换为内联条件，但也许可以改进其他的东西？

```
range_start.blank? ? self : self.where('start_date >=?', range_start) 
```

UPDATE2：如果`range_stop`没有设置，这个代码不是真的有效，`started_after`条件不适用。

我必须`started_before`从不放松的首要条件是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-21T12:06:08.583

时间已经过去，denis.peplin 的解决方案已经被弃用。否则它是正确的，你需要一个用于链接的关系。因此，`scoped`您应该`all`像这样使用，而不是使用：

```
def self.started_before(range_stop)
  if range_stop.blank?
    all
  else
    where('start_date<=?', range_stop)
  end
end 
```

但是您也可以将其写为更简洁的范围：

```
scope :started_before, ->(range_stop){ range_stop.blank? ? all : where('start_date<=?', range_stop) } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T08:49:32.927

在红宝石世界中，有一种东西叫做`scope`可以做你想做的事。

```
scope :started_after, lambda {|x| where("start_date >=?", x) }
scope :started_before, lambda{|x| where("start_date <=?", x) } 
```

或者在一行

```
scope :starts_between, lambda{|start,finish| where("start_date >=? AND start_date <= ?", start, finish) } 
```

范围是一个活跃的记录功能，所以你可以简单地调用：

```
Contract.starts_between(date1, date2) 
```

当您希望第二个参数有条件时：

```
def self.within_range(start, finish = nil)
  data = Contract.started_after(start)
  data = data.started_before(finish) unless finish.nil?
  data
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-08T16:33:44.767

我想尝试澄清以这种方式进行条件链接的目的：想法是将条件隐藏在某些方法中，并链接方法，因此生成的方法将很简单。

这是可能的，但 ActiveRecord::Base 类的子级不能被链接起来。只有关系可以链接。

所以不要这样做：

```
def self.started_before(range_stop)
  if range_stop.blank?
    self
  else
    self.where('start_date<=?', range_stop)
  end
end 
```

应该这样做：

```
def self.started_before(range_stop)
  if range_stop.blank?
    scoped
  else
    self.where('start_date<=?', range_stop)
  end
end 
```

只有一个变化：`self`被替换为`scoped`，并且 now 方法总是返回一个范围，并且可以被链接。

感谢这篇文章的提示：[http ://blog.mitchcrowe.com/blog/2012/04/14/10-most-underused-activerecord-relation-methods/](http://blog.mitchcrowe.com/blog/2012/04/14/10-most-underused-activerecord-relation-methods/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-13T16:39:42.090

我添加了这个：

```
scope :dynamic, -> (chain=nil) { chain.present? ? chain.call : nil } 
```

现在你可以像这样使用它

```
conditional_scope = x ? Model.scope1 : Model.scope2
Model.scope3.dynamic(conditional_scope).scope4 
```

# xcode - 告诉 git 将 pbxproj 视为文本

> ID：12909222
> 
> 赞同：2
> 
> 时间：2012-10-16T07:06:09.043
> 
> 标签：xcode, git, merge

我正在使用 Mapbox-ios-sdk 并尝试将 Github 中源的差异合并到我的本地 hack。

现在我试图告诉 Git 通过编写将 pbxproj 文件视为文本

```
*.pbxproj text -crlf -diff -merge union 
```

到一个新文件 ./git/info/attributes

它`git diff MapView/MapView.xcodeproj/project.pbxproj`仍然将其视为二进制：

```
diff --git a/MapView/MapView.xcodeproj/project.pbxproj b/MapView/MapView.xcodeproj/project.pbxproj
index d91c5b9..d8d04df 100755
Binary files a/MapView/MapView.xcodeproj/project.pbxproj and b/MapView/MapView.xcodeproj/project.pbxproj differ 
```

我也尝试将其编写为 .gitattributes 但它仍将文件视为二进制文件。这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:23:39.880

从[man`gitattributes`手册页](http://git-scm.com/docs/gitattributes)看，似乎与一种将文件制作`-crlf`为*二进制*文件的方法有关。`-diff`

 *所以这应该更接近标记（有点像[这个配置](https://github.com/cruppstahl/hamsterdb/pull/12/files)）：

```
*.pbxproj text -merge union 
```*

# iphone - 从 UIWebView 中的链接下载和保存图像

> ID：12909230
> 
> 赞同：0
> 
> 时间：2012-10-16T07:06:38.070
> 
> 标签：iphone, ios, uiwebview

我正在尝试将图像从在 uiwebview 中打开的网站保存到照片库。该链接不仅仅是可以使用 NSURLConnection 下载的图像链接。我想通过长按 UIWebView 中的图像来实现下载就像在 Safari 中一样。我怎样才能做到这一点..这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:40:00.613

```
NSURL *url = [NSURL URLWithString:link];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];

[请求 setHTTPMethod:@"POST"];

NSURLResponse *响应 = NULL;

NSError *requestError = NULL;

NSData *responseData = [NSURLConnection sendSynchronousRequest:request returnedResponse:&response error:&requestError];

NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

```

响应字符串包含完整信息

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-16T07:18:55.060

很抱歉问，但你为什么使用 UIWebView 只加载图像。UIImageView 类构造函数 imageWithContentsOfURL: 可以完美地完成这项工作。

然后，您可以使用 UIPopoverController 来呈现带有 UIButton 的 UIViewController 调用 UIImageWriteToSavedPhotosAlbum (http://goo.gl/uAJYS) 将 UIImage 从 UIImageView 直接保存到用户相机胶卷中。

为了优化使用 UITableViewController 而不是 UIViewController - 更多的是默认的 iOS 外观 - 并通过覆盖 UIImageView 上的 UIResponder 方法以一小段延迟呈现 UIPopoverController。

// 编辑：如果你的意思是如何获得 Safari 的确切行为以将任何图像保存在 dom 树中，我有点难过。也许其他人可以为此提供一些信息。

# mysql - 从子查询mysql中选择数据

> ID：12909232
> 
> 赞同：3
> 
> 时间：2012-10-16T07:06:39.167
> 
> 标签：mysql, sql, subquery

```
select t1.table1 from table1 as t1
where t1.column1 
in 
(
    select t2.column2 from table2 as t2 
    join 
    table3 as t3  on t2.column1=t3.column1 
    where t3.columnx=5
); 
```

以上是我正在触发的 mysql 查询。还想要子查询表中的一些数据。

例如说表 t2 中的 columnxy。

失败的查询

```
select t1.table1,t2.columnxy from table1 as t1
where t1.column1 
in 
(
    select t2.column2 from table2 as t2 
    join 
    table3 as t3  on t2.column1=t3.column1 
    where t3.columnx=5
); 
```

如果我使用外部查询的选择添加它们会给出错误“未知列”，这确实有意义。

是正确的方法还是应该用连接重写查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T07:10:58.413

用连接重写查询：

```
SELECT t1.table1, t.columnxy
FROM   table1 AS t1 JOIN (
  SELECT t2.column2, t2.columnxy
  FROM   table2 AS t2 JOIN table3 AS t3 USING (column1)
  WHERE  t3.columnx = 5
) t ON t1.column1 = t.column2 
```

或者：

```
SELECT t1.table1, t2.columnxy
FROM   table1 AS t1
  JOIN table2 AS t2 ON t1.column1 = t2.column2
  JOIN table3 AS t3 ON t2.column1 = t3.column1
WHERE  t3.columnx = 5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T07:10:50.227

此时 t2 不可用。您应该为此使用连接。使用 t1.column1=t2.column2 应该可以做到。

# c# - 如何在 JavaScript 中的 CheckBox 上启用和禁用 Ajax 评级控制

> ID：12909233
> 
> 赞同：0
> 
> 时间：2012-10-16T07:06:39.853
> 
> 标签：c#, javascript, asp.net, ajax

如何在 JavaScript 中的 CheckBox CheckBox 上启用和禁用 Ajax 评级控制？

目前我正在以这种方式启用和禁用 CheckBox Check In JavaScript 上的文本框

```
function Del_Checked(DelEnabled) {
    var DelStatus = document.getElementById("<%= cb_foodDelStatus.ClientID %>");
    if (DelStatus.checked === true) {
        document.getElementById("<%= tb_DelTime.ClientID %>").disabled = false;
    }
    else {
        document.getElementById("<%= tb_DelTime.ClientID %>").disabled = true;
    }
}

onclick = "Del_Checked(this.checked);"  // Added this to Checkbox 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T07:30:17.377

您可以通过 jquery 将 Ajax Rating 控件的只读属性设置为：

```
if($("#checkboxID").is(':checked'))
 $find("RatingBehaviourID").set_ReadOnly(true); 
```

# unity3d - 在 unity3d 中动态创建演练

> ID：12909241
> 
> 赞同：0
> 
> 时间：2012-10-16T07:07:33.520
> 
> 标签：unity3d

我想将 Unity3d 框架用于创建演练的项目。但是客户希望它是动态的。

我们将从 3DMax 获得最终的 fbx 文件，当添加到特定文件夹时，应该会自动创建演练。我浏览了 Unity3D 网站上的帮助文件，但没有找到任何关于如何以编程方式使用 Unity3D 框架的文档。

谁能让我知道怎么做？即使为资源提供了链接，它也会对我们有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:37:14.980

Unity 3D 具有在运行时加载模型的内置方法，但这应该使用资源文件夹 ( `Resources.Load()`) 或使用资源包 ( `AssetBundle.Load()`) 完成，如下所述：http: [//docs.unity3d.com/Documentation/Manual/LoadingResourcesatRuntime .html](http://docs.unity3d.com/Documentation/Manual/LoadingResourcesatRuntime.html)

这两种方法在 Unity 编辑器中执行，您需要在运行时加载任意 3D 模型文件，对于这种情况，您需要一个插件。我唯一知道的是[ObjReader](http://www.starscenesoftware.com/Utilities.html#ObjReader)。

# jquery - Ajax 成功部分不起作用？

> ID：12909247
> 
> 赞同：0
> 
> 时间：2012-10-16T07:07:51.727
> 
> 标签：jquery, ajax, codeigniter

我正在使用带有 ajax 和 jquery 的 codeigniter 框架

这是我的ajax代码

```
$('#email').blur(function(){
    var email=$("#email").val();    

    $.ajax({
        url: "http://localhost/paymybill/ajax/email_check",
        global: false,
        type: "POST",
        data: email,
        success: function(data) {
           alert('working ......');
           alert(data);
        }

    });
}); 
```

这是我的控制器代码

```
public function email_check(){

    echo "xxxxx";
    return;
} 
```

问题是它不会在“成功：”部分 ajax 代码中提醒消息，请帮助我（如果我将在控制器中出现任何错误，两条消息都显示，但第二条消息带有错误消息）请帮助我，我是新手阿贾克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:17:48.717

```
$('#email').blur(function(){
      var email=$("#email").val();  

        $.ajax({
            url: "http://localhost/paymybill/ajax/email_check",
            global: false,
            type: "POST",
            data: {
                    'email':email, // you should give a key to the variable
                  },
            success: function(data) {
               alert('working ......'); 
               alert(data); // gives xxxxx
            }

    });

public function email_check(){

         $email = $_POST['email']; //gives the entered email id
         echo "xxxxx"; // no need to return anything.just echoing is fine
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:10:18.117

```
data: email, 
```

应该是键值格式..

```
data: { 'email' : email}, 
```

还要指定返回类型。也许是 'json' ， 'html'

```
dataType:'json' 
```

还添加错误功能以检查错误可能是什么..

# android - 在另一个活动上调用一个函数

> ID：12909248
> 
> 赞同：0
> 
> 时间：2012-10-16T07:07:54.330
> 
> 标签：android, function, call

我创建了一个函数

```
public void setTabHome(int index) {  } 
```

在**main.java**页面上。此功能是按索引设置页面。

默认情况下，索引为**0**。我想**从 main1.java 调用 main.java 页面，**参数`index`设置为**1**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:15:47.090

在课堂上创建你的`main.java`类的实例`main1.java`。使用此实例，您可以调用`main.java`. 像这样

```
Main main = new Main();
main.yourfunctionName(); 
```

但最好你在其中创建另一个函数`main1.java`并使用这个函数。因为您在一项活动中使用的参数可能无法在另一项活动中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:16:13.673

1.  `public static void setTabHome(int index) { }`

2.  `main.setTabHome(indexnumber)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T07:12:01.723

您可以将方法设置为静态，然后再次调用它。

我只想在 main1.java 中再次插入该方法¯_(ツ)_/¯

甚至更好地通过 Intent 访问 main1.java。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-19T03:10:29.817

main.java 在类中定义一个公共静态实例

```
 public class Menu extends Activity{

        public static Menu instance = null;

        @Override
        public void onCreate(Bundle savedInstanceState) {        
             instance = this;
        }

        public void setTabHome(int index) { }
    } 
```

main1.java 调用如下：

```
 Menu.instance.setTabHome(number); 
```

# php - PHP结果集显示格式

> ID：12909249
> 
> 赞同：1
> 
> 时间：2012-10-16T07:07:59.667
> 
> 标签：php, sql

嗨，我有一个查询，目前将产生三行结果。我需要以某种方式向他们展示，但我不能那样展示。你能给我一些想法，我需要如何处理它。

我会将所有结果集保存在数据库中的数组中。

```
1\. client name |RO NO |  channel  
2\. a           | abc  |   x
3\. a           | abc  |   y
4\. a           | abc  |   z 
```

结果集如上所示，但我需要在表格中显示如下

```
1\. client      a
2\. RO         abc  
3\. Channel     x,y,z 
```

我不想重复每行中常见的重复。我该怎么做。任何人都可以告诉我如何进行...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:18:51.273

您可以使用[`group_concat`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)：

```
select `client name` as `client`, `RO NO` as `RO`, group_concat(channel) as `Channel`
from table_name
group by `client` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:19:16.923

# PHP

使用结果作为数组键：

```
$arr[$result] = true;
echo implode(',', array_keys($arr)); 
```

# MySQL

将 concat 与 distinct 分组：

```
select group_concat(distinct ...) from ...; 
```

# windows-phone-7 - 如何在我的 Windows Phone 应用程序中显示大量数据。？

> ID：12909252
> 
> 赞同：1
> 
> 时间：2012-10-16T07:08:09.510
> 
> 标签：windows-phone-7

我必须在我的 Windows Phone 应用程序中显示大量数据。但是当我调试它时，我只能在模拟器屏幕上获得有限数量的数据。其余的被隐藏起来。我是否需要使用一些滑块选项，或者在 Windows 手机中使用时它会自行显示？代码是：

```
 <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0"></Grid>
    <TextBlock Height="100" HorizontalAlignment="Left" Margin="196,54,0,0"    Name="textBlock1" Text="Astro App" VerticalAlignment="Top" Width="272" FontWeight="Bold" FontSize="48" Foreground="#FFAE720E" Grid.Row="1" />
    <Image Height="148" HorizontalAlignment="Left" Margin="12,6,0,0" Name="image1" Stretch="Fill" VerticalAlignment="Top" Width="160" Source="/Astrology;component/Images/Mitra-Chinese-Astrology.png" Grid.Row="1" />
    <TextBlock 
       TextWrapping="Wrap" 
       Text="The ruling planet for number nine people is Mars. These people are the most humanitarian and generous of all.They have a set of ideals, values and a foresight to visualize the betterment of the people of the society. These people have their own warmth and charisma or fascination. They usually make their impression. These people have high tolerance power and are bless with good imagination, and remarkable creativity. They do not have traces of selfishness store in them, with compassion, kindness, generosity, and humbleness ingrained in their temperament. They are at most of the times self sacrificing and romantic at heart. They can give up their favourites and share it with others as they have immense love for people around them. These people care a lot for people around them. They are distinguished and benevolent people. Adherent to discipline, they are open minded and straight forward in their approach. They amalgamate and orchestrate with everyone. They do not bother for spending their money, their valuable time, and energy if it is spend for the welfare of the society and its people. These people are temperamental, aggressive, and self-assured. They get entangled into the trap of anger and fury. They encounter mood swings. They are shy and unpredictable.  These people are casual and careless with money matters. Lucky Days – Tuesday. Lucky Dates – 9th,18th,27th. Lucky Colours – Red. Lucky Stones – Coral. Lucky Metal – Copper" 
       Style="{StaticResource PhoneTextNormalStyle}" 
       Margin="6,160,0,0" 
       Grid.Row="1" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T08:22:50.450

为了解决这个问题，您可以将`TextBlock`内部包裹起来`ScrollViewer`- 这将允许用户上下滚动您的文本。

但是...在 WP7 中对于任何单个控件都有一个最大高度 - 我似乎记得这是 2048 像素。如果您的控件高于此值，则不会呈现该控件的底部。如果是这种情况，那么您必须将文本分成更小的部分并使用单独的控件。

# npapi - NPAPI 范围参数到 NPN_Evaluate 的目的是什么

> ID：12909254
> 
> 赞同：2
> 
> 时间：2012-10-16T07:08:13.237
> 
> 标签：npapi

真正的范围参数是`NPN_Evaluate`什么？在[这个问题](https://stackoverflow.com/questions/543533/restricting-eval-to-a-narrow-scope)中，解释说您不能限制`eval()`. 我以为`NPN_Evaluate()`相当于`eval()`？

我打电话`NPN_Evaluate`给不同`NPObjects`的范围，我看不出有什么区别。我的脚本是`alert(this.name)`并且我期望这`this`将是我`NPN_Evaluate`作为范围传递的对象。但`this`实际上`window`，不管我传入什么。`NPN_Evaluate`网络上使用的示例显示人们总是使用窗口对象......

我有点不确定发生了什么，所以我还没有排除我的代码中的错误，但是从我所看到的情况来看，上述情况似乎是这样。任何有关范围参数预期用途的信息都将受到欢迎。

# java - Tangosol.coherence.xml 在启动时加载

> ID：12909266
> 
> 赞同：1
> 
> 时间：2012-10-16T07:08:59.977
> 
> 标签：java, oracle-coherence

我有一个使用一致性缓存的应用程序，但在启动时出现此错误：

> 2012-10-16 09:25:52,153 错误 [resmanThreadExecutor-49] getItem -（包装：无法加载操作配置：/tangosol-coherence.xml）java.io.IOException：缺少操作配置：“/tangosol- coherence.xml", loader=weblogic.utils.classloaders.ChangeAwareClassLoader@122ccff 查找器：weblogic.utils.classloaders.CodeGenClassFinder@2794e3 注释：com.tangosol.util.Base 上的 ResponseManagerNew@ResponseManager-0.1.0.BUILD-SNAPSHOT.war .ensureRuntimeException(Base.java:288) 在 com.tangosol.run.xml.XmlHelper.loadResourceInternal(XmlHelper.java:341) 在 com.tangosol.run.xml.XmlHelper.loadResource(XmlHelper.java:251) 在 com。 com.tangosol.coherence.component 上的 tangosol.coherence.component.application.console.Coherence.loadConfiguration(Coherence.CDB:19)。application.console.Coherence.getServiceConfig(Coherence.CDB:13) 在 com.tangosol.coherence.component.application.console.Coherence.ensureRunningLogger(Coherence.CDB:15) 在 com.tangosol.coherence.component.application.console。 Coherence.debugOutput(Coherence.CDB:1) at com.tangosol.coherence.Component._trace(Component.CDB:3) at com.tangosol.coherence.component.util.SafeService.ensureRunningService(SafeService.CDB:37) at com .tangosol.coherence.component.util.safeService.SafeCacheService.ensureRunningCacheService(SafeCacheService.CDB:3) at com.tangosol.coherence.component.util.SafeNamedCache$CacheAction.run(SafeNamedCache.CDB:3) at java.security.AccessController com.tangosol 的 javax.security.auth.Subject.doAs(Subject.java:337) 的 .doPrivileged(Native Method)。coherence.component.util.SafeNamedCache.restartNamedCache(SafeNamedCache.CDB:8) 在 com.tangosol.coherence.component.util.SafeNamedCache.ensureRunningNamedCache(SafeNamedCache.CDB:33) 在 com.tangosol.coherence.component.util.SafeNamedCache。 getRunningNamedCache(SafeNamedCache.CDB:1) at com.tangosol.coherence.component.util.SafeNamedCache.get(SafeNamedCache.CDB:1) at com.ttech.rbm.coherence.commoncache.blockage.CacheManager.getItem(CacheManager.java: 36) 在 com.tcell.resman.util.WebServiceUtil.callWriteResponseListWS(WebServiceUtil.java:152) 在 com.tcell.resman.service.successmessage.impl.SuccessMessageFlow.processAccepted(SuccessMessageFlow.java:669) 在 com.tcell.resman .service.successmessage.impl.SuccessMessageFlow.start(SuccessMessageFlow.java:281) 在 com.tcell.resman。service.successmessage.impl.SuccessMessageFlow.execute(SuccessMessageFlow.java:78) at com.tcell.resman.service.successmessage.impl.SuccessMessageFlow$$FastClassByCGLIB$$79bf8ebe.invoke() at net.sf.cglib.proxy.MethodProxy .invoke(MethodProxy.java:204) 在 org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:688) 在 org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150) 在org.springframework.aop.interceptor.AsyncExecutionInterceptor$1.call(AsyncExecutionInterceptor.java:80) at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) at java.util.concurrent.FutureTask.run(FutureTask .java:138) 在 java.util.concurrent.ThreadPoolExecutor$Worker。runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java:619)

Coherence jar 在我的 war 文件中，我不想将它放在 weblogic 启动类路径中。xml 文件在 jar (coherence.jar) 中。它的版本是 3.7.1.5

有任何想法吗？

# google-maps - 在日本找不到公交路线

> ID：12909269
> 
> 赞同：2
> 
> 时间：2012-10-16T07:09:11.133
> 
> 标签：google-maps

[在Google Maps](https://www.google.com/maps?saddr=35.443708,139.638026&daddr=35.689487,139.691706&hl=en&sll=35.56736,139.66452&sspn=0.293232,0.54451&geocode=FfzTHAIdCrVSCA;FQ-UIAIduoZTCA&ttype=dep&date=10/15/12&time=11:54pm&noexp=0&noal=0&sort=def&mra=ls&t=m&z=11&start=0)上搜索从**35.443708,139.638026** 到**35.689487,139.691706**的路线会 产生结果，但是对路线 API 的查询不会：

[https://maps.googleapis.com/maps/api/directions/json?sensor=true&departure_time=1350456190&destination=35.689487,139.691706&origin=35.443708,139.638026&mode=transit](https://maps.googleapis.com/maps/api/directions/json?sensor=true&departure_time=1350456190&destination=35.689487,139.691706&origin=35.443708,139.638026&mode=transit)

有人有想法么？好像是日本特有的。如果您实际上是在对此进行测试，您需要将上述的离开时间更新到现在。

我已经向谷歌提交了这个错误，但我宁愿发现我的查询有问题：[http ://code.google.com/p/gmaps-api-issues/issues/detail?id=4498](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4498)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T07:29:20.213

不幸的是，如果您查看[**此电子表格**](http://gmaps-samples.googlecode.com/svn/trunk/mapcoverage_filtered.html)，您会发现日本无法通过 API 获得驾车（和公交）路线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T23:20:53.690

确实：根据[https://developers.google.com/maps/faq#transit_directions_countries](https://developers.google.com/maps/faq#transit_directions_countries) 它不可用...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-11T02:32:28.090

只是一个更新，我们最近对此进行了调查，直到现在（2015 年 2 月），使用方向 api 在日本似乎只有驾驶和步行可用

交通不可用根据[地图常见问题解答](https://developers.google.com/maps/faq#transit_directions_countries)

根据[地图覆盖范围不能骑自行车](https://developers.google.com/maps/coverage)

我也尝试使用 javascript Directions 服务。出行模式 TRANSIT 和 BIKING 仍然不起作用

# iphone - 在 xcode 的 UIlabel 中显示 NSMutableArray

> ID：12909270
> 
> 赞同：2
> 
> 时间：2012-10-16T07:09:19.460
> 
> 标签：iphone, xcode4

我必须在 UIlabel 中显示 NSmutableArray 数据。但只有最后一个索引文本被添加。这是我的代码

```
marray:
(
{ 
ID=1;
}
{
ID="2"
}
)

 for(int i=0;i<[marray count];i++)
    {
        eventName=[[arr2 objectAtIndex:i]objectForKey:@"Code"];
       label.text=[NSString stringWithFormat:@"ID :%@",eventName ];        
    } 
```

我必须在 UIlabel 中将这些 ID 显示为：1、2

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:14:59.830

您正在运行一个 for 循环，它将继续执行直到它的最后一个增量。因此将显示数组中的最后一个值。所以你可以做的是你可以添加一个计时器而不是一个 for 循环，如果你想`NSmutableArray`在`UILabel`.

**编辑：**

```
-(IBAction) rotate3
{
    NSString *number = [self.dayArray description];
    NSArray *array = [[NSArray alloc] initWithObjects: @"0", @"1", @"2", @"3", @"4", @"5" ,@"6", @"7", @"8",@"9",@"10",@"11",@"12",@"13", @"14", @"15", @"16", @"17", @"18", @"19",nil];
    numberCount++;
    timer=[NSTimer scheduledTimerWithTimeInterval:5.0 target:self selector:@selector(rotate3 )userInfo:nil repeats:YES];    
    self.dayArray = array;
    [array release];

    label.text = [NSString stringWithFormat:@"Day %@  ", number];
} 
```

还要检查这些链接[如何在 iOS 中以编程方式更新 UILabel](https://stackoverflow.com/questions/11884786/how-to-update-uilabel-programmatically-in-ios)和[如何在 UILabel 中显示 NSArray 并使用计时器](https://stackoverflow.com/questions/8018688/how-to-display-an-nsarray-in-a-uilabel-and-use-timer)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:21:43.580

您可以将字符串附加到 NSString 对象，而不是在标签中使用该对象，如下所示

```
NSMutableString *lblstr=@"ID :";

for (int i=0; i<[marray count]; i++) {
    eventName=[[arr2 objectAtIndex:i]objectForKey:@"Code"];
    [lblstr appendString:[NSString stringWithFormat:@"%@",eventName ]];
}
label.text=lblstr; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T07:18:30.287

```
Try the below Code. 
NSString *temp=@"";
for(int i=0;i<[marray count];i++)
    {

        //eventName=[[arr2 objectAtIndex:i]objectForKey:@"Code"];
        temp=[temp stringByAppendingString:[[arr2 objectAtIndex:i]objectForKey:@"Code"]];

        temp=[temp stringByAppendingString:@" ,"];
    } 
 temp = [temp substringToIndex:[temp length]-1];
label.text=[NSString stringWithFormat:@"ID :%@",temp ]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T07:39:10.553

```
NSMutableString *str = [[NSMutableString alloc] init];

for(int i=0;i<[marray count];i++)
{
   NSString *temp = [NSString stringWithFormat:@"%d - %@\n",i+1, [[arr2 objectAtIndex:i]objectForKey:@"Code"]];

  [str appendString:[NSString stringWithFormat:@"%@",temp]];

   //sleep(0.05); //Remove comment this line may help ! **Tricky Line**
}

label.text = str;

[str release]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T07:52:32.497

您可以创建一个对象数组（索引）并使用`componentsJoinedByString:`

`NSString* str = [array componentsJoindeByString: @", "];`

或使用您的代码，替换

```
label.text=[NSString stringWithFormat:@"ID :%@",eventName ]; 
```

和：

```
label.text=[label.text stringByAppendingFormat:@", %@", eventName]; 
```

# visual-studio-2010 - devenv 命令行不显示有缺陷项目的错误

> ID：12909271
> 
> 赞同：0
> 
> 时间：2012-10-16T07:09:20.697
> 
> 标签：visual-studio-2010, continuous-integration, devenv

我们使用 Jenkins 自动构建我们的解决方案。我们通过命令行调用 devenv (Visual Studio 2010)：devenv PathToProject\Project.sln /build Release

当解决方案包含有缺陷的项目（*.vdproj、*.csproj）时，在 Visual Studio IDE 中打开解决方案将导致出现错误消息。但是在使用上述命令行构建解决方案时，根本没有显示任何错误消息，因此 Jenkins 报告成功。

如果您想重现该问题，只需在编辑器中打开 vdproj 文件，然后删除文件中某处的 }。

怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T00:42:10.023

在 Visual Studio 2012 上，`/Out`将生成消息写入文本文件。

```
devenv.exe YourVisualStudioSolution.sln /build "Debug|Win32" /Out "YourLogFile.txt" 
```

[根据 MSDN](http://msdn.microsoft.com/en-us/library/vstudio/xee0c8y7%28v=vs.100%29.aspx)，此开关也应该在 Visual Studio 2010 上工作。

# objective-c - iOS6 UIViewControllerHierarchyInconsistency on Button click

> ID：12909275
> 
> 赞同：0
> 
> 时间：2012-10-16T07:09:44.067
> 
> 标签：objective-c, ipad, ios-simulator, ios6

我在 iOS 6 iPad 中遇到问题

1.  单击按钮-> 使用 UITable 打开弹出框
2.  在选择一行 - > modalviewcontroller 打开。
3.  关闭 modalviewcontroller（它工作正常）
4.  然后再次单击按钮，单击按钮时应用程序崩溃（第一步）

此问题仅在 iOS 6 中。它在 iOS 5、iOS 4.3 中运行良好

```
*** Terminating app due to uncaught exception 'UIViewControllerHierarchyInconsistency', reason: 'A view can only be associated with at most one view controller at a time! View <UITableView: 0xb847400; frame = (0 0; 185 104); clipsToBounds = YES; autoresize = W+H; gestureRecognizers = <NSArray: 0xa469e50>; layer = <CALayer: 0xa469f00>; contentOffset: {0, 0}> is associated with <UIViewController: 0xa462f60>. Clear this association before associating this view with <UIViewController: 0xa5dac40>.'
*** First throw call stack:
(0x2769012 0x1d0be7e 0x2768deb 0xca1309 0xd385ac 0xd34a90 0x69b19 0x1d1f705 0xc56920 0xc568b8 0xd17671 0xd17bcf 0xd16d38 0xc8633f 0xc86552 0xc643aa 0xc55cf8 0x29a2df9 0x29a2ad0 0x26debf5 0x26de962 0x270fbb6 0x270ef44 0x270ee1b 0x29a17e3 0x29a1668 0xc5365c 0x24ca 0x23d5)
libc++abi.dylib: terminate called throwing an exception 
```

**添加代码**

```
listTable.frame = CGRectMake(0, 0, listWidth, listItemHeight*[listArray count]-1);
UIViewController* popoverContent = [[UIViewController alloc] init];
popoverContent.view = listTable;
popoverContent.contentSizeForViewInPopover = CGSizeMake(listWidth, listItemHeight*[listArray count]);
listPopOver = [[UIPopoverController alloc] initWithContentViewController:popoverContent];
[listPopOver setDelegate:self];
[listPopOver setPopoverContentSize:listTable.frame.size];
[listPopOver presentPopoverFromRect:self.frame inView:self.superview permittedArrowDirections:arrowDirection animated:YES];
[listTable reloadData];
[popoverContent release]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T21:06:35.177

更仔细地检查您的异常：

```
'UIViewControllerHierarchyInconsistency', reason:
'A view can only be associated with at most one view controller at a time!
View UITableView: 0xb847400; frame = (0 0; 185 104); clipsToBounds = YES;
autoresize = W+H; gestureRecognizers = NSArray: 0xa469e50; layer = CALayer: 0xa469f00;
contentOffset: {0, 0} is associated with UIViewController: 0xa462f60.
Clear this association before associating this view with UIViewController: 0xa5dac40.' 
```

具体来说：

```
A view can only be associated with at most one view controller at a time!
View UITableView: 0xb847400
is associated with
UIViewController: 0xa462f60\. 
Clear this association before associating this view with 
UIViewController: 0xa5dac40. 
```

这意味着您有一个视图控制器，并且它的`.view`属性设置为您的 listTable 对象。然后，在不破坏该关联的情况下，您使用另一个视图控制器并尝试将其`.view`属性设置为 listTable 对象。这违反了视图层次规则，Apple 从 iOS 6.0 开始更加严格地执行该规则，以至于现在它会引发异常并使您的应用程序崩溃。

所以这里真正的问题是你使用同一个 listTable 对象和两个视图控制器，特别是`popoverContent`. 这意味着当您的代码第二次执行时，您的旧 popoverContent 仍然存在，这就是它在第二次运行而不是第一次运行时崩溃的原因。我猜想在尝试创建新弹出框之前，您的代码并没有完全释放和销毁旧弹出框；如果您确保发生这种情况，您可能会没事。

我还注意到，显然，您对两个弹出框都使用了相同的 listTable。您是否想为每个弹出窗口懒惰地创建这个 listTable 而不是保留它？

如果您想进行更多调查，可以在代码中设置断点，并使用`po`命令打印不同视图和视图控制器的描述，以查看哪些十六进制地址与随后将出现在您的异常中的地址匹配，并获得更多信息有关问题的信息。或者，您甚至可以直接使用十六进制地址打印描述：`po 0xa469e50`例如（尽管可能需要进行类型转换）。

除此之外，您还没有真正提供足够的代码供某人查看并说出问题所在:) 但以上内容应该可以帮助您解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T01:27:36.340

您可以将 ' 添加为子视图，而不是替换`popoverContent`' 的`listTable`视图吗？

不确定这是否会完全完成您正在寻找的内容，但它可能会避免层次结构不一致错误。

# tinymce - 在 TinyMCE 中替换“(”) 失败

> ID：12909276
> 
> 赞同：3
> 
> 时间：2012-10-16T07:09:51.193
> 
> 标签：tinymce, special-characters

我在使用 ["] <- 登录 tinyMCE (v3.5.7) 时遇到问题。它实际上并没有被替换为实际需要的 [& quot;]。它所做的实际上是将其替换为 [& #8 2 2 2 ;] 而是 „ 符号！.. 这发生在所有 ["] 字符上，无论它们位于文本中的哪个位置。

我已经尝试过改变编码类型（命名、数字、原始）并使用/不使用清理选项。不幸的是没有效果。

想法？

问候

# android - 另一个 close() 从未在数据库上显式调用

> ID：12909277
> 
> 赞同：0
> 
> 时间：2012-10-16T07:10:10.867
> 
> 标签：android, android-sqlite

是的，我知道这个问题已经问了很多，但似乎我检查的所有问题都不能解决我的问题。所以我会直奔主题。

这是数据库类

> SQLHandler.java

```
public class SQLHandler {
    public static final String KEY_ROOMMOVEHOLDER = "roommoveholder";
    public static final String KEY_ROOM = "room";
    public static final String KEY_ROOMWEIGHT = "roomweight";

    public static final String KEY_MOVENAME = "movename";
    public static final String KEY_ID1 = "_id";
    public static final String KEY_ID2 = "_id";

    public static final String KEY_MOVEDATE = "movedate";
    public static final String KEY_TOTALMOVEWEIGHT = "totalmoveweight";
    public static final String KEY_TOTALITEM = "totalitem";

    private static final String DATABASE_NAME = "mymovingfriend";
    private static final int DATABASE_VERSION = 1;

    public static final String KEY_TODOMOVE = "todomove";

    private static final String DATABASE_TABLE1 = "movingname";
    private static final String DATABASE_TABLE2 = "movingrooms";

    public static final String CREATE_TABLE_1 = "CREATE TABLE " + DATABASE_TABLE1 + " (" + 
            KEY_ID1 + " INTEGER PRIMARY KEY AUTOINCREMENT," + 
            KEY_MOVEDATE + " TEXT NOT NULL, " + 
            KEY_TOTALMOVEWEIGHT + " TEXT NOT NULL, " + 
            KEY_TOTALITEM + " INTEGER NOT NULL, " +
            KEY_MOVENAME + " TEXT NOT NULL);";

    public static final String CREATE_TABLE_2 = "CREATE TABLE " + DATABASE_TABLE2 + " (" + 
            KEY_ID2 + " INTEGER PRIMARY KEY AUTOINCREMENT," + 
            KEY_ROOMMOVEHOLDER + " TEXT NOT NULL, " + 
            KEY_ROOMWEIGHT + " TEXT NOT NULL, " + 
            KEY_ROOM + " TEXT NOT NULL);";

    private DbHelper ourHelper;
    private final Context ourContext;
    private SQLiteDatabase ourDatabase;

    private static class DbHelper extends SQLiteOpenHelper{

        public DbHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            db.execSQL(CREATE_TABLE_1);
            db.execSQL(CREATE_TABLE_2);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldversion, int newversion) {
            // TODO Auto-generated method stub
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE1);
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE2);
            onCreate(db);
        }
    }

    public SQLHandler(Context c){
        ourContext = c;
    }

    public SQLHandler open() throws SQLException{
        ourHelper = new DbHelper(ourContext);
        ourDatabase = ourHelper.getWritableDatabase();
        return this;
    }

    public void close(){
        ourHelper.close();
    }

    public void renameRoom(String movename, String roomname){
        ContentValues cv = new ContentValues();
        cv.put(KEY_ROOM, roomname);
        ourDatabase.update(DATABASE_TABLE2, cv, KEY_ROOMMOVEHOLDER + "='" + movename + "'" + " AND " + KEY_ROOM + "='" + roomname + "'", null);
    }

} 
```

这是我的活动

> 开始移动.java

```
public class StartMoving extends Activity {

    Button returnBack, addmove, set, setCancel;
    SQLHandler startmoving;

    EditText newMove;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.start_moving);

        initializer();
        itemInitializer();

        Intent i = getIntent();     
        currentMove = i.getStringExtra("moveName");

        buttonLoad();
        currentMoveName.setText(currentMove);

        currentRoom = "None";
        roomName.setText(currentRoom);

        buttonSet();
        itemButton();
        checktodo();
        roomSpinner();      

        SharedPreferences tut_pref = PreferenceManager.getDefaultSharedPreferences(StartMoving.this);
        btut = tut_pref.getString("gettut", "null");

        if (btut.equals("yes")) {
            AlertDialog help1 = new AlertDialog.Builder(StartMoving.this).show();
            help1.setContentView(R.layout.add_room_tut);
            next = true;
            managehelp = true;
            tut_pref = PreferenceManager.getDefaultSharedPreferences(StartMoving.this);
            SharedPreferences.Editor tut = tut_pref.edit();
            tut.putString("gettut", "no");
            tut.commit();
        }else {

        }

    }

    private void buttonLoad() {
        try {

            ArrayList<String> sb = startmoving.loadRooms(currentMove);
            String[] rb = (String[]) sb.toArray(new String[sb.size()]);
            for (int i = 0; i < rb.length; i++) {
                final Button nb = new Button(StartMoving.this);
                nb.setText(rb[i]);
                row.addView(nb);
                nb.setOnClickListener(new OnClickListener() {

                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        currentRoom = nb.getText().toString();
                        roomName.setText(currentRoom);

                        String displayname = startmoving.getItemName(currentMove, currentRoom);
                        String displayvalue = startmoving.getItemValue(currentMove, currentRoom);
                        String displayweight = startmoving.getItemWeightLBS(currentMove, currentRoom);
                        String displaytotalweight = startmoving.getTotalWeightLBS(currentMove);
                        String displayroomweight = startmoving.getRoomWeightLBS(currentMove, currentRoom);
                        int displaytotalitem = startmoving.getTotalItem(currentMove);
                        roomContent.setText(displayname);
                        itemValue.setText(displayvalue);
                        itemWeight.setText(displayweight);
                        totalweight.setText(displaytotalweight);
                        roomweight.setText(displayroomweight);
                        totalitem.setText("" + displaytotalitem);
                    }
                });
            }
            addRooms.addView(row);
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    private void initializer() {

        startmoving = new SQLHandler(StartMoving.this);
        startmoving.open();

    }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.activity_main, menu);
        return true;
    }

    @SuppressLint("SdCardPath")
    @SuppressWarnings({ "deprecation" })
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        super.onOptionsItemSelected(item);
        boolean retval = true;
        switch (item.getItemId()) {

        case R.id.menu_rename:
            final View view;
            LayoutInflater inf = LayoutInflater.from(StartMoving.this);
            view = inf.inflate(R.layout.rename, null);

            final EditText newname = (EditText) view.findViewById(R.id.etNewRoomName);

            new AlertDialog.Builder(StartMoving.this)
            .setView(view)
            .setTitle("Rename")
            .setMessage("Enter new name for room " + currentRoom)
            .setPositiveButton("Ok", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub
                    if (currentRoom.equals(newname.getText().toString())) {
                        Toast.makeText(StartMoving.this, "This name is already present. Please enter another name", Toast.LENGTH_LONG).show();
                    }else{
                        try {
                            String newroomname = newname.getText().toString();
                            startmoving.renameRoom(currentMove, newroomname);
//                          Intent intent = getIntent();
//                          finish();
//                          startActivity(intent);
                        } catch (Exception e) {
                            String error = e.toString();
                            Toast.makeText(StartMoving.this, error, Toast.LENGTH_SHORT).show();
                        }
                    }
                }
            })
            .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub

                }
            })
            .show();

            break;
        default:
            break;
        }
        return retval;
    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        startmoving.close();
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        // TODO Auto-generated method stub
        super.onSaveInstanceState(outState);
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onRestoreInstanceState(savedInstanceState);

        roomName.setText("Hello world");
    }

    public void onBackPressed(){
        super.onBackPressed();

    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event)  {
        if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
            // do something on back.
            if (check == 1) {
                merge.setVisibility(View.GONE);
                main.setVisibility(View.VISIBLE);
                check = 0;
            }else if (check == 2) {
                main.setVisibility(View.VISIBLE);
                roomButtons.setVisibility(View.GONE);
                check = 0;
            }else {
                //              this.finish();
                Intent i = new Intent(StartMoving.this, ListMovingNames.class);
                startActivity(i);
            }
            return true;
        }

        return super.onKeyDown(keyCode, event);
    }
} 
```

谁能指出我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:13:08.600

像这样更改您的关闭方法：

```
public void close(){
    ourDatabase.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:21:37.447

您的更改方法没有关闭`SQLiteDatabase`参考。拳头关闭它，然后`DbHelper`像这样关闭您的参考：

```
public void close(){
    ourDatabase.close();
    ourHelper.close();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T07:22:28.480

请尝试：（在您的 DbHelper 关闭方法中）

```
public void close(){
     ourDatabase.close();
     ourHelper.close();
} 
```

您需要关闭可写数据库，然后关闭帮助程序。

**更新**尝试：

```
String[] whereClause = {movename, roomname};
ourDatabase.update(DATABASE_TABLE2, cv, KEY_ROOMMOVEHOLDER + "=? AND " + KEY_ROOM + "=?", whereClause); 
```

updaet 语句使用准备好的语句。

# xcode - Xcode Provisioning：应用程序标识符不匹配，即使它们相同

> ID：12909278
> 
> 赞同：2
> 
> 时间：2012-10-16T07:10:11.317
> 
> 标签：xcode, provisioning

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T07:17:05.317

检查您的钥匙串列表。可能存在重复的配置文件，因为您已经安装了新的配置文件而不是旧的配置文件。如果您发现重复的配置文件，请删除旧的配置文件并删除您的“DerivedData”（在 xcode 4.3/ xcode 4.5 的情况下）或“Build”文件夹，然后为您的目标设置配置文件设置并尝试重建。

当您选择配置文件时，可能会创建相同配置文件的重复。

# azure - Azure 连接失败错误

> ID：12909279
> 
> 赞同：1
> 
> 时间：2012-10-16T07:10:14.950
> 
> 标签：azure, acs

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T23:31:57.753

这个错误：

> ACS60018：URI 'https://xxx.accesscontrol.windows.net/v2/mgmt/service' 无效，因为它不是基于 'https://xxxx.accesscontrol.windows.net/v2/mgmt/service /'。跟踪 ID：ed498472-6a04-4d51-a6ba-4786f0c67212。时间戳：2012-10-16 07:07:09Z

是由于管理 URI 上缺少尾随斜杠引起的（OData 规范对此特别关注）。

# java-me - LWUIT HtmlComponent NoSuchElementException

> ID：12909281
> 
> 赞同：2
> 
> 时间：2012-10-16T07:10:18.613
> 
> 标签：java-me, lwuit

解析后，我从 Rss 文件中获取 HtmlString。我想删除所有 html 标记，并且只需要在我的表单上显示纯文本，为此我提到了 LWUIT HtmlComponent 类，我使用了以下代码：

```
 private void displayCompleteNewsScreen(News detailNews) {
        html.removeAll();
        form2.removeAll();
        form2.repaint();
        form2.addCommand(m_backCommand);
        form2.addCommandListener(new ActionListener() {

            public void actionPerformed(ActionEvent ae) {
                form1.show();
            }
        });
    String content= detailNews.getDescription();
    html.setPreferredSize(new Dimension(300,300));
    html.setHTML(content, null, null, false);
    form2.addComponent(html);
    form2.show();
} 
```

我能够在我的 LWUITform 上成功显示文本，但是每次我在表单上显示我的文本时都会抛出以下异常

例外1：

```
Uncaught exception: java.util.NoSuchElementException
    at java.util.Vector.lastElement(Vector.java:456)
 - com.sun.lwuit.html.HTMLComponent.popContainer(HTMLComponent.java:3667)
 - com.sun.lwuit.html.HTMLComponent.processTag(HTMLComponent.java:2825)
 - com.sun.lwuit.html.HTMLComponent.rebuildPage(HTMLComponent.java:1653)
 - com.sun.lwuit.html.HTMLComponent.documentReady(HTMLComponent.java:1113)
 - com.sun.lwuit.html.HTMLComponent$1.run(HTMLComponent.java:770) 
```

* * *

例外2：

```
Uncaught exception: 
  java.lang.OutOfMemoryError
   (stack trace incomplete)
java.lang.OutOfMemoryError
   (stack trace incomplete) 
```

* * *

例外3：

```
Uncaught exception: java.lang.IllegalArgumentException: Component is already contained in Container: Container[x=0 y=0 width=0 height=0, layout = BoxLayout, scrollableX = false, scrollableY = false, components = [Container]]
 - com.sun.lwuit.Container.insertComponentAt(Container.java:370)
 - com.sun.lwuit.Container.addComponent(Container.java:334)
 - com.sun.lwuit.html.HTMLComponent.newLine(HTMLComponent.java:1878)
 - com.sun.lwuit.html.HTMLComponent.processTag(HTMLComponent.java:2826)
 - com.sun.lwuit.html.HTMLComponent.rebuildPage(HTMLComponent.java:1653)
 - com.sun.lwuit.html.HTMLComponent.documentReady(HTMLComponent.java:1113) 
```

**注意**：我的 HtmlString 将不包含任何图像和 src 标签

谁能帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:56:29.883

HTML 代码中似乎存在解析错误。它是包含实际 HTML 标签、正文等的全套 HTML 吗？

# java - DriverManager如何获取jdbc驱动类的实例

> ID：12909287
> 
> 赞同：4
> 
> 时间：2012-10-16T07:10:51.143
> 
> 标签：java, design-patterns, jdbc

`Class.forName`用于实例化驱动程序类。 `Class.forName`没有对象，它只是实例化驱动类实例。如果是这样的话，DriverManager类将如何获取实例化的驱动类的引用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T14:11:35.473

Class.forName("X") 导致名为 X 的类被动态加载，基本上对 forName("X") 的调用导致名为 X 的类被初始化（即，JVM 在类加载后执行其所有静态块）。

要回答您的问题，JVM 会执行静态块，并且驱动程序会将自身注册到 DriverManager。

这个过程在以下链接中得到了很好的解释： [http ://www.xyzws.com/Javafaq/what-does-classforname-method-do/17](http://www.xyzws.com/Javafaq/what-does-classforname-method-do/17)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:25:20.227

请参阅接口的[javadoc](http://docs.oracle.com/javase/7/docs/api/java/sql/Driver.html)。`Driver`

它说，

> 当一个 Driver 类被加载时，它应该创建一个自身的实例并将其注册到 DriverManager。这意味着用户可以通过调用来加载和注册驱动程序
> 
> Class.forName("foo.bah.Driver")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T07:21:10.757

来自[javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/sql/DriverManager.html)

> 当调用 getConnection 方法时，DriverManager 将尝试从初始化时加载的驱动程序和使用与当前小程序或应用程序相同的类加载器显式加载的驱动程序中找到合适的驱动程序。

初始化时加载的驱动程序：DriverManager 类将尝试加载“jdbc.drivers”系统属性中引用的驱动程序类

显式加载驱动程序:: 通过 Class.forName("driver.name");

# java - 我无法完成线程（可运行），它是怎么回事？

> ID：12909288
> 
> 赞同：0
> 
> 时间：2012-10-16T07:10:51.003
> 
> 标签：java, multithreading, concurrency, runnable

```
Thread thread;     

public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_yippi);  
final Handler hn=new Handler();
final TextView text=(TextView)findViewById(R.id.TextView01);
final Runnable r = new Runnable()
{
    public void run() 
    {
        text.settext("hi");
    }
};
thread = new Thread()
{

    @Override
    public void run() {
        try {
            while(true) {
                sleep(1750);
                hn.post(r);
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
};
    thread.start();
thread.stop();} 
```

代码在这里。我无法停止可运行线程。此外，`thread.stop()`并且`thread.destroy()`已弃用。有人可以帮助我吗？而且我不明白如何用该`thread.interrupt()`方法停止线程。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:25:37.547

Thread.stop() 的 JavaDoc 列出了以下文章来解释为什么不推荐使用 stop()：http: [//docs.oracle.com/javase/6/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html](http://docs.oracle.com/javase/6/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html)

> 停止的大多数用法应该由简单地修改一些变量以指示目标线程应该停止运行的代码替换。目标线程应该定期检查这个变量，如果变量指示它要停止运行，则以有序的方式从它的 run 方法中返回。为了确保停止请求的及时通信，变量必须是易失的（或对变量的访问必须同步）。

interrupt() 更适合阻止某些线程等待某事，这可能不再来了。如果要结束线程，最好让它的run()方法返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:19:02.177

创建一个布尔变量来停止线程并使用它来`while(boolean)`代替`while(true)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:04:11.700

您可以使用 Thread.interrupt() 在您的线程中触发 InterruptedException。我在下面添加了代码来演示该行为。mainThread 是您的代码所在的位置，计时器线程仅用于演示延迟触发中断。

```
public class Test {

    public static void main(String[] args) {

        final Thread mainThread = new Thread() {

            @Override
            public void run() {
                boolean continueExecution = true;

                while (continueExecution) {
                    try {
                        sleep(100);
                        System.out.println("Executing");
                    } catch (InterruptedException e) {
                        continueExecution = false;
                    }
                }

            }
        };

        mainThread.start();

        Thread timer = new Thread() {
            @Override
            public void run() {

                try {
                    sleep(1000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }

                System.out.println("Stopping recurring execution");
                mainThread.interrupt();

            }
        };
        timer.start();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T09:02:06.983

您可以使用 Thread 的中断方法来尝试停止线程，如下面的代码。可能对你有用。

```
public class InterruptThread {

    public static void main(String args[]){

      Thread thread = new Thread()
      {

        @Override
        public void run() {
            try {
                while(true) {
                    System.out.println("Thread is Runing......");
                    sleep(1000);
                }
            } catch (InterruptedException e) {
                // restore interrupted status
                System.out.println("Thread is interrupting");
                Thread.currentThread().interrupt();
            }
        }
       };
      thread.start();

      try {
          Thread.sleep(5000);
      } catch (InterruptedException e) {
          e.printStackTrace();
     }

     System.out.println("Will Interrupt thread");
     thread.interrupt();
  } 
```

}

# javascript - 以 Phonegap 作为子项目的 Xcode 项目

> ID：12909292
> 
> 赞同：0
> 
> 时间：2012-10-16T07:10:59.790
> 
> 标签：javascript, objective-c, xcode, cordova

我可以有这样的设置吗？

我想创建一个普通的 xcode 项目并将 Cordovalib.xcodeproj 添加到 xcode 项目中？

就像这个一样。[http://mobiledan.net/2012/05/02/compile-phonegap-source-code-in-your-ios-phonegap-project/](http://mobiledan.net/2012/05/02/compile-phonegap-source-code-in-your-ios-phonegap-project/)

但是，我不会从一开始就创建一个 Cordova 项目，而是创建一个普通和标准的 Xcode 项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:23:17.280

是的，你可以，它已经存在很长时间了，我想是从 iOS 上的 phonegap 1.5 开始。这叫切菜刀。

要查看如何使用和配置，请点击此[链接](http://docs.phonegap.com/en/2.1.0/guide_cordova-webview_ios.md.html#Embedding%20Cordova%20WebView%20on%20iOS)（对于 phonegap 2.1），在其他版本中可能会有所不同，步骤包含在`.dmg`phonegap 安装中的 pdf 中

# java - 寻找并发地图支持事件

> ID：12909300
> 
> 赞同：3
> 
> 时间：2012-10-16T07:11:29.570
> 
> 标签：java, concurrency, map, event-handling

我正在寻找支持事件通知的并发映射，例如，我可以为特定键注册回调，这些键在放置或删除此类键时调用。整个事情不仅是原子的，而且与 ConcurrentHashMap 一样显示出良好的并发度。

我的第一次尝试是从 ConcurrentHashMap 中窃取基于段的解决方案，并将一些事件注册表添加到段类中。但事实证明，这比预期的要难。计算段偏移似乎不是那么简单。如果你不了解它是如何工作的（你错过了一些细节，你的东西最终会出现错误），那么从 ConcurrentHashMap 中窃取解决方案并不是那么容易。也许有人知道一些解释 ConcurrentHashMap 中的段解决方案如何工作的论文？比我能完成的工作。

在我的 map put 或 remove 方法中放置一个大的同步块很容易，这样监听器的 put 或 remove 和调用都发生在一个同步块中。但这最终会降低并发性，使解决方案成为一种具有单个段的 ConcurrentHashMap。

我希望有人知道某些地图或事件注册表实现可以执行我想要的操作，或者某些文件的链接解释了 COncurrentHashMap 中的这种分段算法是如何工作的。

谢谢，奥利弗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:17:16.157

最直接的解决方案是拦截对 a 的调用以`ConcurrentHashMap`获得您注册的事件的通知。一种方法是继承 ConcurrentHashMap，如下例所示：

```
class ConcurrentHashMapWithEvent<K, V> extends ConcurrentHashMap<K, V> {
  ...
  @Override public V put(K key, V value) {
    System.out.println("This is right before put(" + k + ", " + v + ")");
    super.put(k, v);
    System.out.println("This is right after put(" + k + ", " + v + ")");
  }
  ...
  public void registerCallback(EventCondition cond, Callback callback) { ... }
} 
```

取而代之的是`println`，您将有一些逻辑来检查地图的状态或其他内容是否匹配某些`k`，并启动相应的回调。`v``EventCondition`

这种*模式*，即拦截方法调用以执行一些代码之前和之后的一些代码，称为[**面向方面编程**](http://en.wikipedia.org/wiki/Aspect-oriented_programming)。

# android - Android：使用 Fragments 的更好方法

> ID：12909304
> 
> 赞同：3
> 
> 时间：2012-10-16T07:12:07.763
> 
> 标签：android, android-fragments

我想不出更好的问题标题:(

在我的应用程序中，我需要一个像提问者一样有 10 多个问题的东西，每次 1 个问题。

我所做的是：

1.  有 1 个活动说 MainActivity，在其 onCreate() 中以编程方式添加一个片段说 Frag_1

2.  在 Frag_1 中，我有一个接口，该接口`onButtonClickedListener`带有一种方法`onClicked`来回调 Activity 以了解单击了哪个选项等..，

3.  在我的 MainActivity 中实现了该接口的 onClicked 方法，在该方法中我将 Fragment 更改为 Frag_2（第二个问题）等等。

问题是：

我最终得到了 10 个片段，而我的 MainActivity 实现了 10 个接口，每个片段都有 1 个。将来我可能有 30-40 个问题。

**编辑：**

每个问题都不会相似。问题的答案选项是 EditText/Spinner/RadioButtons 等，所以我不能使用相同的片段而只是更改问题和答案选项文本。

有没有更好、更有效的方法来解决这个问题

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:10:55.247

您快到了。为 MainActivity 实现一个更广泛/通用的接口。也许是这样的`public void fragClickCallback(int fragId, Bundle data);`

这样，在您的实施中，您可以`switch() case`知道来自哪个问题，并且您的捆绑包可以为不同类型的答案打包不同的键（int 用于单选按钮/微调器，String 用于开放答案等）。

并确保在您`.replace(...)`之前用于删除片段的每个片段事务中。

**编辑**

此外，还有一些巧妙的方法可以让您构建片段，而不必创建数十亿个片段。可以有多少种不同类型的问题？算一算：

*   多项选择（单选）-> 整数（索引）
*   多项选择（多个答案）-> 整数（标志）
*   数字输入 -> 浮点数/双精度数
*   编辑文本 -> 字符串
*   日期选择器 -> 长（纪元）
*   时间选择器 -> 3 个整数（？）

所以我们有 6 个片段和 6 种处理方式`switch statement`，现在只需将正确的参数传递给片段

**编辑：**

```
 @Override
   public void onSaveInstanceState(Bundle outState) {
       super.onSaveInstanceState(outState);
       outState.putInt("curChoice", mCurCheckPosition);
   } 
```

然后在您的 Fragment ActivityCreated()

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    if (savedInstanceState != null) {
        // Restore last state for checked position.
        mCurCheckPosition = savedInstanceState.getInt("curChoice", 0);
    }
} 
```

[这些代码是从http://developer.android.com/reference/android/app/Fragment.html](http://developer.android.com/reference/android/app/Fragment.html)复制的，我建议您进一步阅读该页面。该示例正在恢复光标位置，但您可以使用它来恢复以前的用户答案（文本、整数、浮点数等）。

# php - 将具有相交日期的数组分组以用于日历日视图

> ID：12909306
> 
> 赞同：2
> 
> 时间：2012-10-16T07:12:12.303
> 
> 标签：php, arrays, date, calendar, intersect

做一个个人项目，只用 php 做一个日历。我根本想不出一种方法来根据相交日期对数组进行分组，以便我可以在网格上绘制它们。看起来像这样的东西

[http://calendar.oregonstate.edu/docs/img/day_view_advanced.gif](http://calendar.oregonstate.edu/docs/img/day_view_advanced.gif)（还不能发布图片）

原始数组

```
array
0 => 
    array (size=7)
      'ID' => string '6188' (length=4)
      'name' => string 'test' (length=32)
      'dt_start' => string '2012-10-04 10:00:00' (length=19)
      'dt_end' => string '2012-10-04 11:00:00' (length=19) 
```

假设有几个事件的重叠日期最多。这是我用来检查日期是否相交并且有效的函数。

```
function Intersect ($date, $cDate, $start, $end) {
    return ($date == $start) || ($date > $start ? $date <= $end : $start < $cDate);
} 
```

我对实际绘图没有问题，但尝试对数组进行分组，以便将它们适当地放置在网格上。

```
 //$e is the events
    foreach ($e as $k => $a) {
        $oStart1 = new DateTime( $a ['dt_start'] );
        $oEnd1 = new DateTime( $a ['dt_end'] );
        foreach ($e as $i => $b) {
            if ( $a['ID'] == $b['ID'] )
                continue;
            $oStart2 = new DateTime( $b ['dt_start'] );
            $oEnd2 = new DateTime( $b ['dt_end'] );
            if ( Intersect ($oStart1, $oEnd1, $oStart2, $oEnd2) ) {
                $intersect[$a['ID']] = $a;
            }
        }

    } 
```

这将所有相互交叉的日期分组。这一直让我发疯，因为我只是想不出一种方法将 $intersect 数组拆分为不同的组，以便我可以正确设置宽度。最好我希望得到的数组看起来像这样

```
 $group[ 1 ] = array (
        array (
            'start_time' => '2012-10-04 10:00:00',
            'end_time' => '2012-10-04 12:00:00'
        ),
        array (
            'start_time' => '2012-10-04 10:30:00',
            'end_time' => '2012-10-04 11:40:00'
        ),
        array (
            'start_time' => '2012-10-04 11:00:00',
            'end_time' => '2012-10-04 12:00:00'
        )
    ); 

    $group[ 2 ] = array (
        array (
            'start_time' => '2012-10-04 13:00:00',
            'end_time' => '2012-10-04 14:00:00'
        ),
        array (
            'start_time' => '2012-10-04 13:30:00',
            'end_time' => '2012-10-04 13:40:00'
        )
    ); 
```

我知道有一个库可以做到这一点，即 jquery 完整日历插件非常好，但我正在尝试学习更多关于编程的知识。任何帮助或指向我正确方向的链接都会很棒。

# iphone - SQLite 数据库副本

> ID：12909307
> 
> 赞同：0
> 
> 时间：2012-10-16T07:12:19.027
> 
> 标签：iphone, objective-c, ios, sqlite, ios5

> 是否需要将我本地的 Database.sqlite 复制到 ios 环境中的 Documents 目录中？如果是.,那么请解释或参考链接..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T07:21:01.273

你需要复制它，因为如果你把它放在你的应用程序主包中，它将是只读的，这不是你想要的。因此，您必须将 .sqlite 复制到 Documents 目录或您具有写入权限的任何目录中。

# php - 如何将 php 生成的数字转换为 jQuery 计数器？

> ID：12909310
> 
> 赞同：0
> 
> 时间：2012-10-16T07:12:33.627
> 
> 标签：php, jquery

我已经建立了一个简单的 php 访问者计数器来计算网站的访问者数量。

```
$count_my_page = (text file);
$hits = file($count_my_page);
$hits[0] ++;
$fp = fopen($count_my_page , "w");
fputs($fp , "$hits[0]");
fclose($fp);
echo $hits[0]; 
```

我试图把它变成里程表风格的 jQuery 计数器或苹果风格的 jQuery 翻转计数器，而不是出现无聊的数字。

[http://cnanney.com/journal/code/apple-style-counter-revisited/](http://cnanney.com/journal/code/apple-style-counter-revisited/)

如何获取“ `$hits[0];`”并将其转移到 jQuery？我用谷歌搜索了很多，但也许我对 php 的理解不够，因为我的搜索结果是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:15:20.733

把它放在一个隐藏变量中

```
<input type="hidden" id="hits" value="<?php echo $hits[0];  ?>" /> 
```

并像这样使用 jquery 访问

```
$('#hits').val(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:20:21.787

您也可以直接在脚本中回显它：

```
var hits = '<?php echo $hits[0]; ?>'; 
```

# ruby - EventMachine 连接之间的消息传递

> ID：12909314
> 
> 赞同：1
> 
> 时间：2012-10-16T07:12:48.607
> 
> 标签：ruby, eventmachine, stomp

我正在尝试使用 EventMachine 编写聊天服务器。如何以线程安全的方式将消息从一个 EventMachine 连接传递到另一个？

我看到支持消息传递协议 (Stomp)，但我不知道如何使用它。任何帮助表示赞赏。

EventMachine 中的 Stomp - [http://eventmachine.rubyforge.org/EventMachine/Protocols/Stomp.html](http://eventmachine.rubyforge.org/EventMachine/Protocols/Stomp.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T10:03:21.150

见[http://eventmachine.rubyforge.org/EventMachine/Channel.html](http://eventmachine.rubyforge.org/EventMachine/Channel.html)

您可以尝试以下几行：

```
require 'eventmachine'

class Chat < EventMachine::Connection  
  def initialize channel
    @channel = channel
  end

  def post_init
    send_data 'Hello'
    @sid = @channel.subscribe do |msg|
      send_data msg
    end
  end

  def receive_data(msg)
    @channel.push msg
  end

  def unbind
    @channel.unsubscribe @sid
  end
end

EM.run do
  @channel = EventMachine::Channel.new
  EventMachine.start_server '127.0.0.1', 8081, Chat, @channel
end 
```

编辑：另请查看[https://github.com/eventmachine/eventmachine/tree/master/examples/guides/getting_started](https://github.com/eventmachine/eventmachine/tree/master/examples/guides/getting_started) - 有一个不错的聊天室示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:26:17.117

尝试从内存消息调度程序开始。

```
require 'thread'

class Room
  def initialize
    @users = []
  end

  def join(user)
    @users << user
  end

  def leave(user)
    @user.delete(user)
  end

  def broadcast(message)
    @users.each do |user|
      user.enqueue(message)
    end
  end
end

class User

  def initialize
    @mutex = Mutex.new
    @queued_messages = []
  end

  def enqueue(message)
    @mutex.synchronize do
      @queued_message << message
    end
  end

  def get_new_messages
    @mutex.synchronize do
      output = @queued_messages
      @queued_messages = []
    end
    return output
  end

end 
```

**更新**

```
ROOM = Room.new

class Connection
  def user_logged_in
    # @user = ...
    ROOM.join(@user)
  end

  def received_message(message)
    ROOM.broadcast(message)
  end

  def receive_send_more_messages_request(req)
    messages = @user.get_new_messages
    # write messages
  end

  def connection_closed
    ROOM.leave(@user)
  end
end 
```

# ruby-on-rails - Ruby aws-sdk - 向所有用户授予权限

> ID：12909315
> 
> 赞同：10
> 
> 时间：2012-10-16T07:12:49.917
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, amazon-s3

我正在编写代码以向使用**aws-sdk** gem 的所有用户授予 READ 权限。在 gem 的文档中，我发现了以下内容：

```
bucket.objects.each do |object|
  puts object.key
  acl = object.acl
  acl.grant(:read).to("TODO: how can I specify 'ALL'???")
  object.acl = acl.to_xml
end 
```

这一切都说得通，但是我不太确定如何告诉**所有**用户授予读取权限？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-19T03:57:48.613

您拥有的示例可以工作，但更适合复杂的 ACL（访问控制列表）。Amazon S3 有许多可用于对象的标准 acl。以下代码段将更新存储桶中所有对象的 ACL，以便任何人都可以读取它们。

```
bucket.objects.each{|obj| obj.acl = :public_read } 
```

或者，您可以在上传（或复制）对象时为其设置 ACL。

```
# upload a file and set the acl so the world can download it
obj = bucket.objects['object-key'].write(file, :acl => :public_read)

puts obj.public_url
#=> 'https://..." 
```

# multithreading - 如何在黑莓中检测线程何时完成执行？

> ID：12909316
> 
> 赞同：1
> 
> 时间：2012-10-16T07:12:56.323
> 
> 标签：multithreading, blackberry

如何检测以下代码/线程何时在 Blackberry 中完成执行：

```
UiApplication.getUiApplication().invokeAndWait(new Runnable() {
        public void run() {              
            EventInjector.KeyEvent inject = new EventInjector.KeyEvent  
                    (EventInjector.KeyEvent.KEY_DOWN,Characters.ENTER, 0);
                      inject.post();
                      inject.post();
        }
    }); 
```

我可以在该线程执行时收到通知以便我可以启动另一个线程吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:57:43.910

你需要一个同步块，[这里](http://www.javamex.com/tutorials/synchronization_wait_notify.shtml)是它如何工作的简短描述。

“睡眠”线程必须锁定一个对象，并在其上调用 wait()。另一个线程锁定同一个对象，并发送一个 notify() 或 notifyAll() 来唤醒第一个对象。

如果你显式地启动线程（不是在这种情况下），你可以简单地调用它 join() ，并同步等待它完成。

**- 编辑：在线程上使用 join()**

假设您已经有一个可运行的对象：

```
Thread myThread = new Thread(myRunnable);
myThread.start();
doOtherStuff();
myThread.join(); 
```

但是，如果出现问题，您将被卡在 join() 调用上，因为 BlackBerry 没有此调用的超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:16:13.037

通常，join() 方法用于确定线程何时完成。调用 join() 通常会阻塞，因此请谨慎使用。

[这](http://www.blackberry.com/developers/docs/4.3.0api/java/lang/Thread.html#join%28%29)是一个参考。

# c# - 字典包含不可为空类型“System.Int32”的参数“id”的空条目

> ID：12909319
> 
> 赞同：3
> 
> 时间：2012-10-16T07:13:21.623
> 
> 标签：c#, asp.net-web-api

当我尝试通过 HTTP URL 发布一些订单时出现此错误

> 参数字典包含“DatabaseService_WebAPI.Controllers.ProductController”中方法“DatabaseService_WebAPI.Models.Product GetProduct(Int32)”的不可空类型“System.Int32”的参数“id”的空条目。可选参数必须是引用类型、可空类型或声明为可选参数。

我使用 ASP.NET Web API 上提供的教程制作我的 api 控制器。

这是我的网址

```
http://localhost:3325/api/Product/PostProduct?User=Haris2&ShopName=Dwatson&city=RYK&OrderDate=28/9/2012&OrderDetail=Strips 
```

**产品.cs**

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using System.Web;

namespace DatabaseService_WebAPI.Models
{
    public class Product
    {
        [ScaffoldColumn(false)]
        public int Id { get; set; }
        [Required]
        public string User { get; set; }
        public string ShopName { get; set; }
        public string city { get; set; }
        public string OrderDate { get; set; }
        public string OrderDetail { get; set; }
    }
} 
```

**产品控制器.cs**

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Data.Entity.Infrastructure;
using System.Linq;
using System.Net;
using System.Net.Http;
using System.Web;
using System.Web.Http;
using DatabaseService_WebAPI.Models;

namespace DatabaseService_WebAPI.Controllers
{
    public class ProductController : ApiController
    {
        private ProductContext db = new ProductContext();

        // GET api/Product
        public IEnumerable<Product> GetProducts()
        {
            return db.Products.AsEnumerable();
        }

        // GET api/Product/5
        public Product GetProduct(int id)
        {
            Product product = db.Products.Find(id);
            if (product == null)
            {
                throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotFound));
            }

            return product;
        }

        // PUT api/Product/5
        public HttpResponseMessage PutProduct(int id, Product product)
        {
            if (ModelState.IsValid && id == product.Id)
            {
                db.Entry(product).State = EntityState.Modified;

                try
                {
                    db.SaveChanges();
                }
                catch (DbUpdateConcurrencyException)
                {
                    return Request.CreateResponse(HttpStatusCode.NotFound);
                }

                return Request.CreateResponse(HttpStatusCode.OK);
            }
            else
            {
                return Request.CreateResponse(HttpStatusCode.BadRequest);
            }
        }

        // POST api/Product
        public HttpResponseMessage PostProduct(Product product)
        {
            if (ModelState.IsValid)
            {
                db.Products.Add(product);
                db.SaveChanges();

                HttpResponseMessage response = Request.CreateResponse(HttpStatusCode.Created, product);
                response.Headers.Location = new Uri(Url.Link("DefaultApi", new { id = product.Id }));
                return response;
            }
            else
            {
                return Request.CreateResponse(HttpStatusCode.BadRequest);
            }
        }

        // DELETE api/Product/5
        public HttpResponseMessage DeleteProduct(int id)
        {
            Product product = db.Products.Find(id);
            if (product == null)
            {
                return Request.CreateResponse(HttpStatusCode.NotFound);
            }

            db.Products.Remove(product);

            try
            {
                db.SaveChanges();
            }
            catch (DbUpdateConcurrencyException)
            {
                return Request.CreateResponse(HttpStatusCode.NotFound);
            }

            return Request.CreateResponse(HttpStatusCode.OK, product);
        }

        protected override void Dispose(bool disposing)
        {
            db.Dispose();
            base.Dispose(disposing);
        }
    }
} 
```

**路由配置.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Http;
using System.Web.Mvc;
using System.Web.Routing;

namespace DatabaseService_WebAPI
{
    public class RouteConfig
    {
        public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = RouteParameter.Optional }
            );

            routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            );
        }
    }
} 
```

**全球.asax**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Http;
using System.Web.Mvc;
using System.Web.Optimization;
using System.Web.Routing;
using DatabaseService_WebAPI.App_Start;

namespace DatabaseService_WebAPI
{
    // Note: For instructions on enabling IIS6 or IIS7 classic mode, 
    // visit http://go.microsoft.com/?LinkId=9394801

public class MvcApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        System.Data.Entity.Database.SetInitializer(new DatabaseService_WebAPI.Models.ProductContextInitializer());

       // WebApiConfig.Configure(GlobalConfiguration.Configuration);

        AreaRegistration.RegisterAllAreas();

        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
    }
} 
```

}

> 我的调用方法是错误的还是我必须做其他事情才能跳过 id？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:53:51.653

尝试将以下属性添加`[FromUri]`到您的 POST 方法中：

```
 // POST api/Product
    public HttpResponseMessage PostProduct([FromUri]Product product)
    { 
```

您的相对 URL 应该是

```
http://localhost:xxxx/api/Product 
```

这应该允许您使用此 URL 发布您的模型：

```
http://localhost:xxxx/api/Product?User=Haris2&ShopName=Dwatson&city=RYK&OrderDate=28/9/2012&OrderDetail=Strips 
```

还可以考虑使用 JSON`[FromBody]`有效负载：

```
 // POST api/Product
    public HttpResponseMessage PostProduct([FromBody]Product product)
    { 
```

请求如下：

```
User-Agent: Fiddler
Host: localhost:55805
Content-Length: 98
Content-Type: application/json

POST: http://localhost:xxxx/api/product

BODY: {"User":"Haris2","ShopName":"Dwatson","city":"RYK","OrderDate":"28/9/2012","OrderDetail":"Strips"} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T16:03:30.487

两件事情：

1.  如果要从 Url 传递此复杂类型，则需要在 Product 参数上使用 [FromUri]：

    ```
    // POST api/Product
    public HttpResponseMessage PostProduct(Product product)
    {...} 
    ```

2.  您需要在 Uri 中添加一个接受操作名称的 Http 路由（因为您提供的 uri 中包含“PostProduct”...）

    ```
     config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
    ```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2016-12-08T14:04:54.413

您必须在操作链接中添加表单方法

```
 @Html.ActionLink("عرض التفاصيل", "JobDetails","Job",  new { id = item.UniqueId },***FormMethod.Get or post***) 
```

# android - Android：Achartengine 中的条形图和饼图

> ID：12909320
> 
> 赞同：0
> 
> 时间：2012-10-16T07:13:29.830
> 
> 标签：android, achartengine

我正在使用 achartengine 库绘制条形图和饼图来表示其中的各种应用程序名称。

当我实例化 CategorySeries 对象时，它需要一个系列标题：

```
CategorySeries series = new CategorySeries("title") //IN BAR CHART 
CategorySeries series = new CategorySeries("title") //IN PIE CHART 
```

与饼图不同，应用程序名称不会在条形图底部膨胀，如果是饼图，则如下所示：

(1) 申请1

(2) 申请2

(3) 应用...最多

(10) 申请 10。

但是在 bar char 的情况下它没有显示，而是显示为：

(1) NUMBER OF APPLICATIONS ---->>>（这是我在实例化 CategorySeries 对象时作为参数传入的系列标题）

* * *

请建议我同时显示条形图的键，我在下面附上了代码片段

* * *

```
if (c.getCount() > 0) {
                if (! mPieChart) {
                    series = new CategorySeries("NUMBER OF APPLICATIONS");
                    getActivity().startManagingCursor(c);
                    c.moveToPosition(-1);
                     //series.clear();
                    while (c.moveToNext()) {

                        recievedBytes = c.getLong(ApplicationDataCounterDao.CONTENT_RECEIVED_COLUMN);
                        sentBytes = c.getLong(ApplicationDataCounterDao.CONTENT_SENT_COLUMN);
                        totalBytes = (recievedBytes + sentBytes) / (1024 * 1024);
                        if (totalBytes > 0) {
                            applicationInfo
                                    .add(new ApplicationDataUsage(
                                            c.getString(ApplicationDataCounterDao.CONTENT_APPLICATION_NAME_COLUMN),
                                            Double.toString(totalBytes)));
                        }
                    }

                    int size = applicationInfo.size();
                    for (int i = 0; i < size; ++i) {
                        Log.v("BAR CHART", "data added are " + applicationInfo.get(i).mApplicationName);
                        double value = Double.parseDouble(applicationInfo
                                .get(i).mDataUsage);
                        series.add("BAR", value);

                    }

                    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();

                    dataset.addSeries(series.toXYSeries());
                    XYSeriesRenderer renderer = new XYSeriesRenderer();
                    renderer.setDisplayChartValues(true);
                    renderer.setChartValuesSpacing((float) 0.5);
                    renderer.setColor(Color.CYAN);

                    XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();
                    mRenderer.setBarSpacing(0.5);
                    mRenderer.getBarSpacing();
                    mRenderer.setXTitle("Application Number");
                    mRenderer.setYTitle("Data Usage");
                    mRenderer.setAxesColor(Color.GREEN);
                    mRenderer.setZoomButtonsVisible(true);
                    mRenderer.setInScroll(true);
                    mRenderer.setLabelsColor(Color.RED);
                    mRenderer.addSeriesRenderer(renderer);

                    if (mChartViewBar == null) {
                        Log.v(LOG_TAG, "chart view is null");
                        mChartViewBar = ChartFactory
                                .getBarChartView(getActivity(), dataset,
                                        mRenderer, Type.DEFAULT);
                        mRenderer.setClickEnabled(true);
                        mRenderer.setSelectableBuffer(10);
                        mChartViewBar
                                .setOnClickListener(new View.OnClickListener() {
                                    @Override
                                    public void onClick(View v) {
                                        SeriesSelection seriesSelection = mChartViewBar
                                                .getCurrentSeriesAndPoint();
                                        CategorySeries series22 =new CategorySeries("333");
                                        mChartViewBar.repaint();
                                        if (seriesSelection == null) {
                                            Toast.makeText(
                                                    getActivity(),
                                                    "No chart element was clicked",
                                                    Toast.LENGTH_SHORT).show();
                                        } else {
                                            Toast.makeText(
                                                    getActivity(),
                                                    "APPLICATION NAME : "
                                                            + series22.getTitle()
                                                            + 1
                                                            + " was clicked"
                                                            + " DATA USAGE : "
                                                            + seriesSelection
                                                                    .getXValue(),
                                                    Toast.LENGTH_SHORT).show();
                                        }
                                    }
                                });
                        mChartLayout.removeAllViews();
                        mChartLayout.addView(mChartViewBar, new LayoutParams(
                                LayoutParams.FILL_PARENT,
                                LayoutParams.FILL_PARENT));
                    } else {
                        mChartLayout.removeAllViews();
                        mChartLayout.addView(mChartViewBar, new LayoutParams(
                                LayoutParams.FILL_PARENT,
                                LayoutParams.FILL_PARENT));
                        mChartViewBar.repaint();
                    }
                } else if (mPieChart) {
                    CategorySeries seriesPie = new CategorySeries("Pie Graph");
                    getActivity().startManagingCursor(c);
                    c.moveToPosition(-1);
                    while (c.moveToNext()) {
                        long recievedBytes = c .getLong(ApplicationDataCounterDao.CONTENT_RECEIVED_COLUMN);
                        Long sentBytes = c.getLong(ApplicationDataCounterDao.CONTENT_SENT_COLUMN);
                        totalBytes = (recievedBytes + sentBytes)
                                / (1024 * 1024);
                        if (totalBytes > 0) {
                                applicationInfo
                                        .add(new ApplicationDataUsage(
                                                c.getString(ApplicationDataCounterDao.CONTENT_APPLICATION_NAME_COLUMN),
                                                Double.toString(totalBytes)));
                        }
                    }
                    int size = applicationInfo.size();
                    for (ApplicationDataUsage data_value : applicationInfo) {
                        Log.v("PIE CHART", "data added are " + data_value.mApplicationName);
                        double dataUsage = Double
                                .parseDouble(data_value.mDataUsage);
                        seriesPie.add(data_value.mApplicationName, dataUsage);
                    }

                    for (int i = 0; i < size; ++i) {
                        prepareColors();
                    }
                    DefaultRenderer renderer = new DefaultRenderer();
                    for (int fillColor : colorList) {
                        // Log.d("1111111111",
                        // "FILL COLOUR TILL SIZE OF COLORLIST");
                        SimpleSeriesRenderer r = new SimpleSeriesRenderer();
                        r.setColor(fillColor);
                        renderer.addSeriesRenderer(r);
                    }
                    renderer.setInScroll(true);
                    renderer.setChartTitle("APPLICATION WISE PIE CHART");
                    renderer.setChartTitleTextSize(20);
                    renderer.setApplyBackgroundColor(true);
                    renderer.setBackgroundColor(Color.BLACK);
                    renderer.setZoomButtonsVisible(true);

                    if (mChartViewPie == null) {
                        Log.v(LOG_TAG, "chat view is null");
                        // series.clear();
                        mChartViewPie = ChartFactory.getPieChartView(
                                getActivity(), seriesPie, renderer);
                        renderer.setClickEnabled(true);
                        renderer.setSelectableBuffer(10);
                        mChartViewPie
                                .setOnClickListener(new View.OnClickListener() {
                                    @Override
                                    public void onClick(View v) {
                                        SeriesSelection seriesSelection = mChartViewPie
                                                .getCurrentSeriesAndPoint();
                                        mChartViewPie.repaint();
                                        if (seriesSelection == null) {
                                            ToastHelper.showToastMessage(
                                                    "No item was Clicked",
                                                    getActivity());
                                        } else {
                                            ToastHelper.showToastMessage(
                                                    "Application number "
                                                            + seriesSelection
                                                                    .getPointIndex()
                                                            + " was clicked and it's Data Usage is "
                                                            + seriesSelection
                                                                    .getValue(),
                                                    getActivity());
                                        }
                                    }
                                });
                        /*if (mChartViewBar != null) {
                            mChartLayout.removeView(mChartViewBar);
                        }
                        if (mChartViewPie != null) {
                            mChartLayout.removeView(mChartViewPie);
                        }*/
                        mChartLayout.addView(mChartViewPie, new LayoutParams(
                                LayoutParams.FILL_PARENT,
                                LayoutParams.FILL_PARENT));
                    } else {
                    /*  if (mChartViewBar != null) {
                            mChartLayout.removeView(mChartViewBar);
                        }
                        if (mChartViewPie != null) {
                            mChartLayout.removeView(mChartViewPie);
                        }*/
                        mChartLayout.removeAllViews();
                        mChartLayout.addView(mChartViewPie, new LayoutParams(
                                LayoutParams.FILL_PARENT,
                                LayoutParams.FILL_PARENT));
                        mChartViewPie.repaint();
                    }
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:31:45.553

您将图例与 X 轴标签混淆了。这`BarChart`是一个`XYChart`，这意味着它同时获得了图例和 x 轴标签。`PieChart`不是，`XYChart`所以它没有得到 X 轴和 Y 轴。

正如您所提到的，系列标题属于传奇。

在 X 轴中，系列值索引默认为。但是，您可以隐藏默认标签并添加自己的自定义标签：

```
renderer.setXLabels(0);
renderer.addXTextLabel(1, "label);
renderer.addXTextLabel(2, "label);
... 
```

# javascript - 我想删除打开？

> ID：12909322
> 
> 赞同：1
> 
> 时间：2012-10-16T07:13:47.077
> 
> 标签：javascript

我做了一些示例文章，并添加到我的案例中，然后想删除。删除不起作用！有谁知道为什么会这样？

[http://jsfiddle.net/8YP94/1/](http://jsfiddle.net/8YP94/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:15:17.200

**原因：** `.delete`加载 DOM 的时候不存在，后来添加到 DOM 中，所以我们称它为 future 节点，所以使用`.live`

```
$(".delete").live('click', function() { 
```

对于**jQuery 1.8**，您可以使用[`.on`](http://api.jquery.com/on/)

```
$(document).on('click', '.delete',function() { 
```

[`live DEMO`](http://jsfiddle.net/8YP94/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:15:30.010

**click(callback)**函数更改为**live("click", callback)** ok。

所以; 如果您想知道什么是实时功能，请参阅

样本和结果：http: [//jsfiddle.net/8YP94/2/](http://jsfiddle.net/8YP94/2/)

[http://api.jquery.com/live/](http://api.jquery.com/live/)

别紧张。

# php - 将文件上传器添加到 Joomla 管理组件

> ID：12909324
> 
> 赞同：3
> 
> 时间：2012-10-16T07:13:48.817
> 
> 标签：php, xml, model-view-controller, joomla, joomla2.5

我根据 Joomla 指南制作了 Joomla 管理组件 - [http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Developing_a_Basic_Component](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Developing_a_Basic_Component)

在那我需要有文件上传器，让用户上传单个文件。

在 administrator\components\com_invoicemanager\models\forms\invoicemanager.xml 我已经定义

```
<field name="invoice" type="file"/> 
```

在控制器管理员\组件\com_invoicemanager\controllers\invoicemanager.php 中，我试图检索该文件，如下所示。但它不起作用（无法检索文件）

我在哪里做错了？

如何获取文件并将其保存在磁盘上？

```
class InvoiceManagerControllerInvoiceManager extends JControllerForm
{
    function save(){
        $file = JRequest::getVar( 'invoice', '', 'files', 'array' );
        var_dump($file);
        exit(0);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T07:41:31.713

确保您已将`enctype="multipart/form-data"`提交的文件包含在表单中。这是一个常见的错误

```
/// Get the file data array from the request.
$file = JRequest::getVar( 'Filedata', '', 'files', 'array' ); 

/// Make the file name safe.
jimport('joomla.filesystem.file');
$file['name'] = JFile::makeSafe($file['name']);

/// Move the uploaded file into a permanent location.
if (isset( $file['name'] )) {

/// Make sure that the full file path is safe.
$filepath = JPath::clean( $somepath.'/'.strtolower( $file['name'] ) );

/// Move the uploaded file.
JFile::upload( $file['tmp_name'], $filepath );} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:39:30.173

认为我找到了解决方案:)

```
$file = JRequest::getVar('jform', null, 'files', 'array'); 
```

这里提到了保存部分 - [http://docs.joomla.org/Secure_coding_guidelines](http://docs.joomla.org/Secure_coding_guidelines)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-14T13:18:04.583

要从组件上传文件，您需要在控制器文件中编写代码，并且可以扩展 save() 方法。检查下面给出的代码 -

```
public function save($data = array(), $key = 'id')
{
    // Neccesary libraries and variables
    jimport('joomla.filesystem.file');

    //Debugging
    ini_set("display_error" , 1);
    error_reporting(E_ALL);

    // Get input object
    $jinput = JFactory::getApplication()->input;

    // Get posted data
    $data  = $jinput->get('jform', null, 'raw');
    $file  = $jinput->files->get('jform');

    // renaming the file
    $file_ext=explode('.',JFile::makeSafe($file['invoice']['name'])); // invoice - file handler name
    $filename = round(microtime(true)) . '.' . strtolower(end($file_ext));
    // Move the uploaded file into a permanent location.
    if ( $filename != '' ) {

        // Make sure that the full file path is safe.
        $filepath = JPath::clean( JPATH_ROOT."/media/your_component_name/files/". $filename );

        // Move the uploaded file.
        if (JFile::upload( $file['invoice']['tmp_name'], $filepath )) {
              echo "success :)";
        } else {
              echo "failed :(";
        }

        $data['name'] =  $filename ; // getting file name
        $data['path'] =  $filepath ; // getting file path
        $data['size'] =  $file['invoice']['size'] ; // getting file size
    }
    JRequest::setVar('jform', $data, 'post');
    $return = parent::save($data);
    return $return;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-17T15:47:22.630

Joomla 2.5 & 3 风格：

```
$app = JFactory::getApplication();
$input = $app->input;
$file= $input->files->get('file');

if(isset($file['name']))
{
    jimport('joomla.filesystem.file');
    $file['name'] = strtolower(JFile::makeSafe($file['name']));
    $fileRelativePath = '/pathToTheRightFolder/'.$file['name'];
    $fileAbsolutePath = JPath::clean( JPATH_ROOT.$fileRelativePath);
    JFile::upload( $file['tmp_name'], $fileAbsolutePath );
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-04T08:01:59.713

[http://docs.joomla.org/How_to_use_the_filesystem_package](http://docs.joomla.org/How_to_use_the_filesystem_package)

有一个完整的上传示例。

> 管理员选择文件类型或全部的小示例，输入用户以访问表单上传。Joomla 目录或绝对路径上传文件的文件夹。只有选定的用户才能访问表单上传。

# java - Java中的HashSet冲突

> ID：12909325
> 
> 赞同：11
> 
> 时间：2012-10-16T07:13:50.227
> 
> 标签：java, hashset, collision

我有一个用于我的 Java 类的程序，我想在其中使用 hashSets 来比较文本文档的目录。本质上，我的计划是为每篇论文创建一个字符串的 hashSet，然后将其中两个论文 hashSet 一起添加到一个 hashSet 中，并找到相同的 6 字序列的数量。

我的问题是，我是否必须手动检查和处理冲突，还是 Java 会为我这样做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T07:15:50.163

Java Hash Maps/Sets 自动处理 Hash 冲突，这就是为什么覆盖 the`equals`和`hashCode`方法很重要的原因。因为它们都被 Sets 用来区分重复或唯一的条目。

同样重要的是要注意，这些哈希冲突会影响性能，因为多个对象被同一个哈希引用。

```
public class MyObject {
private String name;

//getter and setters

public int hashCode() {
   int hashCode = //Do some object specifc stuff to gen hashCode
   return int;
}

public boolean equals(Object obj) {
   if(this==obj) return true;
   if(obj instanceOf MyObject) {
       if(this.name.equals((MyObject)obj.getName())) {
           return true;
       }
   return false;
}
}
} 
```

注意：标准 Java 对象（例如 String）已经实现了 hashCode 和 equals，因此您只需为您自己的数据对象类型执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:27:24.120

我认为您没有要求哈希冲突，对吗？问题是当 HashSet a 和 HashSet b 例如通过 a.addAll(b) 添加到单个集合中时会发生什么。

答案是一个将包含所有元素并且没有重复项。对于字符串，这意味着您可以在添加之前使用 a.size() 计算集合中相等字符串的数量 - 在 add + b.size() 之后使用 a.size()。

如果某些字符串具有相同的哈希码但不相等，这甚至无关紧要。

# css - 浮动列表有间隙

> ID：12909329
> 
> 赞同：3
> 
> 时间：2012-10-16T07:14:03.893
> 
> 标签：css, css-selectors, html-lists

HTML

```
<ul>
<li>The quick brown fox jumps over the lazy dog and the cat ran</li>
<li>sample 2</li>
<li>sample 3</li>
<li>sample 4</li>
<li>sample 7</li>
<li>sample 8</li>
<li>sample 9</li>
<li>The quick brown fox jumps over the lazy dog</li>
<li>sample 11</li>
<li>sample 12</li>
<li>sample 13</li>
<li>sample 14</li>
</ul> 
```

CSS

```
ul {width:400px;}
ul li {width:196px;float:left;border:1px solid blue;height:100%;} 
```

我的上下都有空隙，我怎样才能做到没有空隙？这是一个示例[jsfiddle](http://jsfiddle.net/XgUYf/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:21:17.417

给出一些固定的高度，例如 height: 40px;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:41:36.290

列表中骑行侧的边界导致了差距，因为：

*   边框在元素客户区之外，有自己的布局空间。所以一个有边框的元素会比一个没有边框的元素占用更多的空间。

*   右侧列表项的数量大于左侧。所以右侧列表的总空间（总高度）大于左侧列表。

`margin`为了解决这个问题，可以使用负数来补偿边框使用的布局空间。以下是相关更改的 CSS：

```
ul li {width:196px;float:left;border:1px solid blue;margin:-1px;height:100%;} 
```

# javascript - 如何注销我使用 OAuth2 登录 Google 的应用程序？

> ID：12909332
> 
> 赞同：94
> 
> 时间：2012-10-16T07:14:09.503
> 
> 标签：javascript, api, oauth-2.0

在我的应用程序中，我使用 jsapi 实现了 Google 注销。

我使用网址[https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=xxxxxx](https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=xxxxxx)连接到 Google，然后使用[https://www.googleapis.com/plus/v1/people/xxxxxx](https://www.googleapis.com/plus/v1/people/xxxxxx)获取用户数据来自谷歌个人资料。

现在，我需要在单击应用程序中的按钮时从 Google 注销用户。我如何在 JavaScript 中实现这一点，或者至少每次用户登录时它都必须询问 Google 登录页面。

我试过`approval_prompt=force`了，但似乎没有工作。

* * *

## 回答 #1

> 赞同：272
> 
> 时间：2012-10-16T07:28:36.630

## **OAuth 概述：他/她所说的用户是他/她吗？：**

我不确定您是否使用 OAuth 登录 Stack Overflow，例如“使用 Google 登录”选项，但是当您使用此功能时，Stack Overflow 只是询问 Google 是否知道您是谁：

> “谷歌，这个 Vinesh 家伙声称 vinesh.e@gmail.com 就是他，这是真的吗？”

如果您已经登录，Google 会说“是”。如果没有，谷歌会说：

> “等一下 Stack Overflow，我会验证这个家伙的身份，如果他可以为他的 Google 帐户输入正确的密码，那就是他”。

当你输入你的谷歌密码时，谷歌会告诉 Stack Overflow 你就是你所说的那个人，而 Stack Overflow 会让你登录。

## **当您注销您的应用程序时，您正在注销*您的*应用程序：**

这就是 OAuth 新手有时会感到困惑的地方...... Google 和 Stack Overflow、Assembla、Vinesh's-very-cool-slick-webapp 都是不同的实体，Google 对您在 Vinesh 很酷的 webapp 上的帐户一无所知，反之亦然反之亦然，除了通过您用来访问个人资料信息的 API 公开的内容。

*当您的用户退出时，他或她并未退出 Google，他/她正在退出您的应用程序、Stack Overflow、Assembla 或任何使用 Google OAuth 对用户进行身份验证的 Web 应用程序。*

事实上，我可以注销我所有的 Google 帐户，但仍然可以登录 Stack Overflow。一旦您的应用知道用户是谁，该用户就可以退出 Google。不再需要谷歌。

话虽如此，您要求做的是将用户从真正不属于您的服务中注销。想一想：作为用户，如果我用我的 Google 帐户登录 5 个不同的服务，那么当我第一次退出其中一个时，我必须登录到我的 Gmail 帐户，你认为我会有多恼火再次因为那个应用程序开发人员决定，当我退出他的应用程序时，我也应该退出谷歌？那会很快变老的。简而言之，你*真的不想这样做*......

## **是的，无论如何，我仍然想将用户从 Google 中注销，请告诉我该怎么做？**

话虽如此，如果您*仍然*想将用户从 Google 中注销，并意识到您很可能会破坏他们的工作流程，您可以从他们的 Google 服务注销按钮之一动态构建注销 url，然后使用img 元素或脚本标签：

```
<script type="text/javascript" 
    src="https://mail.google.com/mail/u/0/?logout&hl=en" /> 
```

或者

```
<img src="https://mail.google.com/mail/u/0/?logout&hl=en" /> 
```

或者

```
window.location = "https://mail.google.com/mail/u/0/?logout&hl=en"; 
```

如果您将用户重定向到注销页面，或从不受跨域限制的元素调用它，则该用户将退出 Google。

请注意，这并不一定意味着用户将退出*您的*应用程序，只有 Google。:)

## 概括：

您需要记住的重要一点是，当您注销您的应用程序时，您不需要让用户重新输入密码。这就是重点！它针对 Google 进行身份验证，因此用户不必在他或她使用的每个 Web 应用程序中一遍又一遍地输入他或她的密码。这需要一些时间来适应，但要知道，只要用户登录 Google，您的应用就无需担心用户是否是他/她所说的那个人。

我在项目中的实现与您相同，使用带有 OAuth 的 Google 个人资料信息。我尝试了您想要尝试的相同方法，当人们不得不一遍又一遍地登录 Google 时，它​​确实开始让人们生气，因此我们停止了将他们从 Google 中注销。:)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-09-15T12:59:41.573

您可以注销并重定向到您的站点：

```
var logout = function() {
    document.location.href = "https://www.google.com/accounts/Logout?continue=https://appengine.google.com/_ah/logout?continue=http://www.example.com";
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-04-23T13:32:16.743

对我来说，它有效（java - android）

```
void RevokeAcess()
{
    try{
    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost("https://accounts.google.com/o/oauth2/revoke?token="+ACCESS_TOKEN);
    org.apache.http.HttpResponse response = client.execute(post);
    }
    catch(IOException e)
    {
    }
    CookieManager.getInstance().removeAllCookie(); // this is clear the cookies which tends to same user in android web view
} 
```

您必须在 android 的 AsyncTask 中调用此函数

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-02T09:42:25.000

这可以让用户退出应用程序，但不能让 Google 退出。

```
var auth2 = gapi.auth2.getAuthInstance();
auth2.signOut().then(function () {
  console.log('User signed out.');
}); 
```

来源：[https ://developers.google.com/identity/sign-in/web/sign-in](https://developers.google.com/identity/sign-in/web/sign-in)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-01-12T14:24:27.387

您可以简单地创建一个注销按钮并将此链接添加到其中，它最终会将您从应用程序中注销并重定向到您想要的站点：

[https://appengine.google.com/_ah/logout?continue=http://www.YOURSITE.com](https://appengine.google.com/_ah/logout?continue=http://www.YOURSITE.com)

*只需在您的网站上切换您的网站*

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-12-25T14:15:01.893

仅退出应用程序而不退出 Gmail：

```
window.gapi.load('auth2', () => {
      window.gapi.auth2
        .init({
          client_id:
            '<Your client id configired on google console>'
        })
        .then(() => {
          window.gapi.auth2
            .getAuthInstance()
            .signOut()
            .then(function() {
              console.log('User signed out.');
            });
        });
    }); 
```

我在我的 ReactJs 代码中使用了上面的内容。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-09-09T17:52:21.877

Ouath 只是让谷歌实例为空，因此你离开了谷歌。现在这就是架构的制作方式。退出谷歌，如果你退出你的应用程序是一项肮脏的工作，但如果要求规定相同，则无济于事。因此，将以下内容添加到您的 signOut() 函数中。我的项目是一个 Angular 6 应用程序：

document.location.href = " [https://www.google.com/accounts/Logout?continue=https://appengine.google.com/_ah/logout?continue=http://localhost:4200](https://www.google.com/accounts/Logout?continue=https://appengine.google.com/_ah/logout?continue=http://localhost:4200) ";

这里 localhost:4200 是我的应用程序的 URL。如果您的登录页面是 xyz.com，请输入。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-09-26T06:30:10.920

此代码将用于退出

```
 <script>
      function signOut() 
      {
        var auth2 = gapi.auth2.getAuthInstance();
        auth2.signOut().then(function () {   
        console.log('User signed out.');   
        auth2.disconnect();   
      }); 
        auth2.disconnect();
      } 
    </script> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-01-17T10:03:52.913

我希望我们可以通过在登录时将令牌存储在会话中并在他单击注销时访问令牌来实现这一点。

```
 String _accessToken=(String)session.getAttribute("ACCESS_TOKEN");
    if(_accessToken!=null)
    {
        StringBuffer path=httpRequest.getRequestURL();
        reDirectPage="https://www.google.com/accounts/Logout?
        continue=https://appengine.google.com/_ah/logout?
        continue="+path;
    }
    response.sendRedirect(reDirectPage); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-09-17T03:26:50.000

看起来谷歌最近用他们的撤销东西破坏了一些东西（它开始为我们返回 400 个错误）。你现在必须打电话

auth2.disconnect();

在我们的例子中，我们必须等待几秒钟以完成断开连接调用，否则登录代码将在完成之前重新授权。如果谷歌从断开方法返回一个承诺会很好。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-12-17T12:03:48.690

如果有人想要它在 Java 中，[这是我的答案](https://stackoverflow.com/a/65340328/7608371)，为此你必须调用另一个线程。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-05-13T19:23:27.227

```
1\. Try this code, if you are using onSignIn() function
2.
        <script src="https://apis.google.com/js/platform.js?onload=onLoad" async defer></script>
       <script>
       function signOut() {
       onLoad();
       var auth2 = gapi.auth2.getAuthInstance();
       auth2.signOut().then(function () {
       console.log('User signed out.');
       if(auth2.isSignedIn)
       {
          auth2.isSignedIn.set(false);
       }
       });
       }
       function onLoad() {
          gapi.load('auth2', function() {
            gapi.auth2.init();
          });
        }
        </script> 
```

# python - 如何使用 python 脚本将文件从客户端传输到服务器计算机？

> ID：12909334
> 
> 赞同：2
> 
> 时间：2012-10-16T07:14:11.203
> 
> 标签：python

*   我正在编写一个 python 脚本来将 python（比如 ABC.py）文件从一个目录复制到另一个目录，其文件夹名称（比如 ABC）与脚本名称（不包括 .py）相同。
*   在本地系统中，它可以正常工作，并通过创建同名文件夹将文件从一个目录复制到其他目录。
*   但实际上我想将这些文件从我的本地系统（Windows XP）复制到位于我执行脚本的其他国家的远程系统（Linux）。但是我收到
    错误，因为“找不到目标路径”意味着我无法连接到远程
    ，这就是原因。
*   我使用 SSH 安全客户端。
*   我使用 IP 地址和端口号连接到远程服务器。
*   然后它会询问用户 ID 和密码。

    但是我无法通过我的 python 脚本连接到远程服务器。

任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T07:23:01.973

[`paramiko`](http://www.lag.net/paramiko/docs/)提供了一个`SFTPClient`可以用来做到这一点的。

```
import paramiko

source = r'C:\Somedir\somefile.txt'
dest = r'/home/user/file.txt'
hostname = 'linux.server.com'
port = 22 # default port for SSH
username = 'user'
password = 'secret'

try:
    t = paramiko.Transport((hostname, port))
    t.connect(username=username, password=password)
    sftp = paramiko.SFTPClient.from_transport(t)
    sftp.put(source, dest)
finally:
    t.close() 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-03-23T04:02:51.730

我使用了相同的脚本，但我的主机没有响应。我的主机在不同的网络中。

WinError 10060] 连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应

# asp.net-mvc - 正在恢复中。等待恢复完成

> ID：12909335
> 
> 赞同：0
> 
> 时间：2012-10-16T07:14:28.760
> 
> 标签：asp.net-mvc, database, sql-server-2008

我已经使用 Asp.net sql server 和 Jquery Ajax 开发了一个应用程序它给了我

正在恢复中。等到恢复完成。

为什么这个消息来了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:13:15.400

这是由于崩溃恢复运行：[http ://technet.microsoft.com/en-us/magazine/2009.02.logging.aspx](http://technet.microsoft.com/en-us/magazine/2009.02.logging.aspx)

您可以在 dba 堆栈交换中找到有关此类事情的更多详细信息。正如这个问题的特点：[https ://dba.stackexchange.com/questions/9063/database-mydb-is-being-recovered-waiting-until-recovery-is-finished](https://dba.stackexchange.com/questions/9063/database-mydb-is-being-recovered-waiting-until-recovery-is-finished)

# sql - 游标中更新的奇怪运行时行为

> ID：12909336
> 
> 赞同：1
> 
> 时间：2012-10-16T07:14:29.463
> 
> 标签：sql, oracle, cursor, oracle11g

我有一张旧桌子和一张新桌子。在旧表中，有一`VARCHAR2`列名为`number`，其值类似于`11-38D402342`和`11-38D402342/43`。还有一些糟糕的数据，但永远不会为空。

在新表中，有两`VARCHAR2`列`number_left`和`number_right`。这两个是从旧表的数字列中填充的：

```
number_left  = nvl(substr(number,1,instr(number,'/',1)-1),number)
number_right = substr(number,1,instr(rtrim(number,'/'),'/',1)-length(substr(number,instr(number,'/'))))||substr(number,decode(instr(number,'/'),0,null,instr(number,'/')+1)) 
```

经过其他一些决定，我们现在只需要一列。为了确保正确设置复制的数字，我决定使用旧表的数字和使用的转换来识别匹配的行。

我有一个映射但不能使用它，因为 number_left 和 number_right 可以由应用程序复制到新行中，并且也必须获取旧号码。因此，可以将许多旧表复制到新表中的多行中。

我尝试使用此代码：

```
declare
    left_num varchar2(255 char) := '';
    right_num varchar2(255 char) := '';
    pos number := 0;
    CURSOR c_number is
        select number from old_table;
begin
    for cur in c_number loop
        left_num := nvl(substr(cur.number,1,instr(cur.number,'/',1)-1),cur.number);
        if instr(cur.number,'/') = 0 then
          pos := null;
        else
          pos := instr(cur.number,'/')+1;
        end if;
        right_num := substr(cur.number,1,instr(rtrim(cur.number,'/'),'/',1)-length(substr(cur.number,instr(cur.number,'/'))))||substr(cur.number, pos);

        update new_table n
            set n.number = cur.snummer
            where n.number_left = left_num
            and (
              n.number_right = right_num
              or (
                n.number_right is null
                and right_num is null
              )
            );
    end loop;
end; 
```

在旧表中，我有 170.000 行，而在新表中，我有 180.000 行，因为还有一些新数据。花生。

但奇怪的部分来了：一切似乎都运行良好，但在前 14.000 行之后，它变得非常慢，可能在一秒钟内 3 行。而且我认为它变得越来越慢。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:50:38.657

您应该学习如何跟踪数据库中 SQL 的性能，而不是让一堆随机的猜测者猜测。有几种不同的方法可以让您深入了解语句的性能，但您将需要某种级别的 DBA 类型的访问权限。

这是[官方文档](http://docs.oracle.com/cd/E11882_01/server.112/e16638/sqltrace.htm#i4170)中涵盖的领域，但我建议您从 Tim Hall 的出色概述开始。 [在这里找到它](http://www.oracle-base.com/articles/10g/sql-trace-10046-trcsess-and-tkprof-10g.php)。

# asp.net - 在 ASP.NET MVC 中编辑列表时如何保留输入 ID？

> ID：12909337
> 
> 赞同：1
> 
> 时间：2012-10-16T07:14:29.720
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我正在使用 ASP.NET MVC 4，但我认为这对于这个问题的目的并不重要。

我的编辑视图有一个相对复杂的模型。像这样：

```
public class Recipe_model
{
    public string Name { get; set; }

    public List<Recipe_Ingredient_model> Ingredients { get; set; }
} 
```

成分在哪里

```
public class Recipe_Ingredient_model
{
    public int RecipeID { get; set; }

    public int? UnitID { get; set; }

    public double? Quantity { get; set; }

    public Ingredient_model Ingredient { get; set; }
} 
```

它本身包含成分模型。

当我为此创建一个表单时，内置对 .`Html.EditorFor()`属性之外的任何内容都不起作用`Recipe_model`，因此我使用局部视图来显示每个子模型的编辑器。

就界面而言，这很好用，但是当我将表单提交到控制器并尝试绑定到`Recipe_model`自动使用时

```
 [HttpPost]
    public ActionResult Edit(Recipe_model model)
    {
        return View(model);
    } 
```

它失败是因为部分视图中输入元素的 id 不符合正确的模式（我认为 ParentModel_Property）。

除了在局部视图中硬编码 id 或从`FormCollection`控制器中手动绑定之外，是否有某种方法可以在局部视图中生成正确的 id，以便模型在提交时自动绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:30:20.303

这是常见的问题。而不是简单的部分，使用`EditorTemplates`（模型的特殊文件夹）和绑定将自动工作。

例如看这个问题：[在同一视图中更新多个项目](https://stackoverflow.com/questions/12837288/updating-multiple-items-within-same-view/12837674#12837674)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:37:31.830

除了@WebDeveloper 给出的答案之外，
您还可以尝试创建一个自定义模型绑定器，虽然稍微复杂一些，但从长远来看，这会增加发布和绑定表单值到对象的便利性，
看看这里[http:// patrickdesjardins.com/blog/asp-net-mvc-model-binding](http://patrickdesjardins.com/blog/asp-net-mvc-model-binding)

您将不得不手动获取所有表单值并将它们绑定到`model`一次，然后您将能够使用`@HtmlFrom`剃须刀上的方法做任何事情，您将随心所欲地获取对象内的所有值`action methods`。

# sql-server - SQL Server 2005 Express SP 3 的命令行安装错误

> ID：12909340
> 
> 赞同：1
> 
> 时间：2012-10-16T07:14:36.850
> 
> 标签：sql-server, sql-server-2005, command-line, installation

在 Windows XP SP3（德国操作系统）机器上安装 SQL Server Express 2005 时，我遇到了一个奇怪的问题。

PFB 说明：

1.  我正在通过 .bat 文件执行 SQL Server 2005 的静默安装。
2.  安装命令如下：

    ```
    start /wait Setup.exe /qn INSTANCENAME=<instance name> ADDLOCAL=SQL_Engine SAPWD="strong password>" SECURITYMODE=SQL SQLACCOUNT="NT-AUTORITÄT\SYSTEM" DISABLENETWORKPROTOCOLS=0 TARGETDIR="C:\Program Files\Microsoft SQL Server \" 
    ```

3.  SQLACCOUNT 参数是在运行时派生的，用于检查操作系统的语言。英文是“NT AUTHORITY\SYSTEM”，德文是“NT-AUTORITÄT\SYSTEM”

4.  如果我直接将上述命令提供给命令行，那么安装成功。但是，如果我将相同的命令放在 bat 文件中，则安装失败。

5.  日志文件中提到的失败原因是系统无法识别本地系统帐户。

6.  在日志文件中，我检查了当传递的参数是“NT-AUTORITÄT\SYSTEM”时，SQL 日志包含的参数名称为“NT-AUTORIT-T\SYSTEM”。此参数无效，因此安装失败。

![不同场景的截图](../Images/5555366f9f76ce7d2379a9d2099f1774.png)

我也尝试提供“.\LocalSystem”作为参数，但安装仍然失败。

请注意：

在同一台机器上安装 SQL Server 2008 Express 时，我遇到了类似的问题。我将安装命令从“NT-AUTORITÄT\SYSTEM”更改为“NT AUTHORITY\SYSTEM”，问题就解决了。

# video - OpenCV：如何对 GMM 计算的概率进行分类

> ID：12909343
> 
> 赞同：0
> 
> 时间：2012-10-16T07:14:50.547
> 
> 标签：video, opencv, model, background, gaussian

我正在使用 opencv EM 算法借助 opencv 文档中的示例代码获取 GMM 模型，如下所示：

```
cv::Mat capturedFrame
const int N = 5; 
int nsamples = 100;
cv::Mat samples ( nsamples, 2, CV_32FC1 );
samples = samples.reshape ( 2, 0 );
cv::Mat sample ( 1, 2, CV_32FC1 );
CvEM em_model;
CvEMParams params;

for ( i = 0; i < N; i++ )
{           
//from the training samples
cv::Mat samples_part = samples.rowRange ( i*nsamples/N, (i+1)*nsamples/N);
cv::Scalar mean (((i%N)+1)*img.rows/(N1+1),((i/N1)+1)*img.rows/(N1+1));
cv::Scalar sigma (30,30);
cv::randn(samples_part,mean,sigma);                     

}
samples = samples.reshape ( 1, 0 );
//initialize model parameters
params.covs         = NULL;
params.means        = NULL;
params.weights      = NULL;
params.probs        = NULL;
params.nclusters    = N;
params.cov_mat_type = CvEM::COV_MAT_SPHERICAL;
params.start_step   = CvEM::START_AUTO_STEP;
params.term_crit.max_iter = 300;
params.term_crit.epsilon  = 0.1;
params.term_crit.type   = CV_TERMCRIT_ITER|CV_TERMCRIT_EPS;     
//cluster the data
em_model.train ( samples, Mat(), params, &labels ); 
```

作为 GMM 和 openCV 的新手，现在我有一些问题：

**首先**，在执行上述代码后，我可以得到如下问题：

```
cv::Mat probs = em_model.getProbs(); 
```

那么如何才能得到元素最多和最少的模型，即最大和最小的模型呢？

**其次**，我的样本数据在这里只有100，就像opencv的示例代码一样，但是我正在读取一个大小为600x800的帧，我想对其中的所有像素进行采样，即480000。但是大约需要10毫秒这 100 个样本，这意味着如果我设置它会太慢：

```
int nsamples = 480000; 
```

我在这里走对了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:56:39.723

如果我的问题是正确的，那么您所说的“最大”和“最小”模型是指混合物中每个高斯的权重。您可以使用 获取与高斯相关的权重[`EM::getWeights`](http://docs.opencv.org/modules/legacy/doc/expectation_maximization.html?#cvem-getweights)。

Concerning second question, if you train your model using 480000 samples instead of 100, yes, it will be definitely longer. Being "too slow" depends on your requirements. But EM is a classification model, so what is usually done is that you must train the model, using a sufficient amount of sample. This is a long process, but usually done "offline". Then, you can use the model to "predict" new samples, i.e. get the probabilities associated with new input samples. When you call `getProbs()` function, you get the probabilities associated with your training samples. If you want to get probabilities for unknown samples, typically pixels in your video frame, call the function [`predict`](http://docs.opencv.org/modules/legacy/doc/expectation_maximization.html?#cvem-predict).

# google-analytics - Google Analytics 根据数据库中的条目更新计数器

> ID：12909344
> 
> 赞同：0
> 
> 时间：2012-10-16T07:14:55.937
> 
> 标签：google-analytics, counter

是否有可能，如果可以，如何在 GA 中创建“自定义”计数器条目，这基本上是基于数据库条目的计数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:47:39.443

在不了解您的具体用例的情况下很难说，但 Google Analytics（分析）支持[事件](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)。您可以在每次页面加载时向 Analytics 发送自定义事件。然后，您可以考虑具有不同类别和标签的结构，您可以在其中过滤它们。

如果你只是想显示一个表中条目数量的变化，你也可以考虑使用像[munin](http://munin-monitoring.org/)这样的监控软件。考虑一下您的数据是否与您的其他 Analytics 数据一起有意义，或者您是否只想将随时间的变化与您的其他服务器健康参数一起显示。

# asp.net-mvc - ValidationMessage 中的换行符

> ID：12909351
> 
> 赞同：16
> 
> 时间：2012-10-16T07:15:29.463
> 
> 标签：asp.net-mvc, asp.net-mvc-3, newline, line-breaks, validationmessage

我正在测试 null 的事物列表。每次我找到一个时，我都会将它保存在一个数组中以在验证消息中实现它。

我想要的输出如下所示：

字段 1 是必需的
字段 4 是必需的
等等...

但我似乎无法开始新的生产线。

现在，它看起来像这样：

字段 1 为必填项 字段 4 为必填项

有谁知道如何实现这一目标？

编辑：

控制器：

```
IDictionary<int, String> emptyFields = new Dictionary<int, String>();

foreach (Something thing in AnotherThing.Collection)
{
    if (thing.Property == null)
        emptyFields.add(thing.Index, thing.Name);                   
}

if (emptyFields.Any())
    throw new CustomException() { EmptyFields = emptyFields }; 
```

这个异常在这里处理：

```
catch (CustomException ex)
{                   
    ModelState.AddModelError("file", ex.GetExceptionString());
    return View("theView");
} 
```

自定义异常：

```
public class CustomException: Exception
{
    public IDictionary<int,String> EmptyFields { get; set; }
    public override String Label { get { return "someLabel"; } }
    public override String GetExceptionString()
    {
        String msg = "";
        foreach (KeyValuePair<int,String> elem in EmptyFields)
        {
            msg += "row: " + (elem.Key + 1).ToString() + " column: " + elem.Value + "<br/>";      
        }
        return msg;        
    }
} 
```

看法：

```
<span style="color: #FF0000">@Html.Raw(Html.ValidationMessage("file").ToString())</span> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-10-01T21:08:48.563

你可以用这一个班轮做到这一点：

```
@Html.Raw(HttpUtility.HtmlDecode(Html.ValidationMessageFor(m => m.Property).ToHtmlString())) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-16T07:50:34.243

您将需要编写一个自定义助手来实现这一点。内置`ValidationMessageFor`帮助器自动对值进行 HTML 编码。这是一个例子：

```
public static class ValidationMessageExtensions
{
    public static IHtmlString MyValidationMessageFor<TModel, TProperty>(
        this HtmlHelper<TModel> htmlHelper, 
        Expression<Func<TModel, TProperty>> ex
    )
    {
        var htmlAttributes = new RouteValueDictionary();
        string validationMessage = null;
        var expression = ExpressionHelper.GetExpressionText(ex);
        var modelName = htmlHelper.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName(expression);
        var formContext = htmlHelper.ViewContext.ClientValidationEnabled ? htmlHelper.ViewContext.FormContext : null;
        if (!htmlHelper.ViewData.ModelState.ContainsKey(modelName) && formContext == null)
        {
            return null;
        }

        var modelState = htmlHelper.ViewData.ModelState[modelName];
        var modelErrors = (modelState == null) ? null : modelState.Errors;
        var modelError = (((modelErrors == null) || (modelErrors.Count == 0)) 
            ? null 
            : modelErrors.FirstOrDefault(m => !String.IsNullOrEmpty(m.ErrorMessage)) ?? modelErrors[0]);

        if (modelError == null && formContext == null)
        {
            return null;
        }

        var builder = new TagBuilder("span");
        builder.MergeAttributes(htmlAttributes);
        builder.AddCssClass((modelError != null) ? HtmlHelper.ValidationMessageCssClassName : HtmlHelper.ValidationMessageValidCssClassName);

        if (!String.IsNullOrEmpty(validationMessage))
        {
            builder.InnerHtml = validationMessage;
        }
        else if (modelError != null)
        {
            builder.InnerHtml = GetUserErrorMessageOrDefault(htmlHelper.ViewContext.HttpContext, modelError, modelState);
        }

        if (formContext != null)
        {
            bool replaceValidationMessageContents = String.IsNullOrEmpty(validationMessage);
            builder.MergeAttribute("data-valmsg-for", modelName);
            builder.MergeAttribute("data-valmsg-replace", replaceValidationMessageContents.ToString().ToLowerInvariant());
        }

        return new HtmlString(builder.ToString(TagRenderMode.Normal));
    }

    private static string GetUserErrorMessageOrDefault(HttpContextBase httpContext, ModelError error, ModelState modelState)
    {
        if (!String.IsNullOrEmpty(error.ErrorMessage))
        {
            return error.ErrorMessage;
        }
        if (modelState == null)
        {
            return null;
        }

        var attemptedValue = (modelState.Value != null) ? modelState.Value.AttemptedValue : null;
        return string.Format(CultureInfo.CurrentCulture, "Value '{0}' not valid for property", attemptedValue);
    }
} 
```

进而：

```
public class MyViewModel
{
    [Required(ErrorMessage = "Error Line1<br/>Error Line2")]
    public string SomeProperty { get; set; }
} 
```

在视图中：

```
@model MyViewModel
@using (Html.BeginForm())
{
    @Html.EditorFor(x => x.SomeProperty)
    @Html.MyValidationMessageFor(x => x.SomeProperty)
    <button type="submit">OK</button>
} 
```

如果您想在 ValidationSummary 中显示错误消息，您还可以编写一个自定义帮助程序，它不会对错误消息进行 HTML 编码，如[`this post`](https://stackoverflow.com/a/8158918/29407).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T07:34:54.837

试试这个

在每条错误消息后附加标签并使用**Html.Raw()**方法显示您的内容 Html.Raw 将解码 HtmlContent。

```
you message like 
 Field 1 is required <br/>Field 4 is required<br/> 

In View

Html.Raw("Yore Error Message") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-29T19:40:25.070

如果有人正在寻找它，以下是如何为验证摘要执行此操作：

```
@Html.Raw(HttpUtility.HtmlDecode(Html.ValidationSummary(true).ToHtmlString())) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T07:45:05.797

您是否在验证摘要中显示它们？我认为它不支持用于换行等的 html。我会根据显示 html 的验证摘要创建一个自定义 html 助手。

这同样适用于验证消息，因此可能需要为此创建一个自定义助手

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-15T18:51:18.760

我所做的就是将它们放在一个 div 中

```
 <div class="Errors">

        @Html.ValidationMessageFor(m => m.Name)<br/>
        @Html.ValidationMessageFor(m => m.LName)<br />
      </div> 
```

然后创建一个类

```
 .Errors {
          color: red;
          font-size: 10px;
          font-weight: bold;
          } 
```

但是如果你想做一个多行错误，那么 Leinel 提到的是最好的方法。我把它们捆绑在一起的原因是一些用户不会看到长表单的错误，他们会开始给我们打电话.. ^^,

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-29T10:00:14.973

感谢我参加这个聚会有点晚了，但是刚刚遇到了这个问题并且使用普通的旧 css 也很有效：

```
<style>
    .field-validation-error::after {
        content: "\a";
        white-space: pre;
    }
</style> 
```

# html - 如何成为使用 div 强烈格式化的段落

> ID：12909359
> 
> 赞同：0
> 
> 时间：2012-10-16T07:15:52.007
> 
> 标签：html, css

我有一个网站 (http://www.theqlick.com/festivalfreaks.php)，在某些浏览器上 p 标签似乎不起作用。

它似乎向上射击而​​不是停留在正确的位置。我想知道如何创建一个带有严格填充的 div。

我的 CSS/HTML 代码如下：

```
 .pinboard2 {position:absolute; margin-top:150px; left:300px; width:200px; height:25px;}

                 .intro1 {   position:relative;
                 font-family: Noteworthy, Comic MS Sans;
                 font-size:16pt;
                 margin-top:-860px;
                 left:-290px;
                 width:520px;
                 text-align:center;
                color:white;}

                <DIV class="pinboard2">
<p id="intro1" class="intro1">Want to become a Chat! Member? Click <a href="home.php"> Here </a> to Login/Register. </p>
   <p class="intro"><br><b>We, at Qlick</b>, have decided that nothing is more important than the benefit of music. Music is a massive part of our lives. Music makes us who we are and people can tell your personality with music. <br><br>

<b>With us working on a way of expressing music </b> in a fantastic way, we have developed and built a way in which people can feel at home regarding festivals.<br><br>

   <b>Festivals are events and parades for music</b>, where people can come together and enjoy it. FestivalFreaks declares itself the Place for Festivals, in which more and more festivals are being added and supported for the platform of FestivalFreaks. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:54:16.250

我不确定在旧 IE 中打开它时会发生什么，但你这样做的方式非常糟糕。
这样的事情会好的

```
<style>.pinboard2 {background: url("yourbg.png") no-repeat;}</style> 
```

# android - 如何使用不支持的 Ndef 写入/读取 NFC 卡？

> ID：12909361
> 
> 赞同：1
> 
> 时间：2012-10-16T07:16:10.703
> 
> 标签：android, nfc, mifare

我已经成功地使用`NdefRecord`. 但你知道，我有不同的 nfc 卡。技术是：

*   Mifare 经典 1k
*   核糖核酸
*   NdefFormatable

我现在很好奇，为什么那张`Ndef`卡片里没有。这是否意味着我不能写 using`NdefRecord`和读 using `NdefMessage`？

我现在不能读/写，因为我没有 keyA 和 keyB。但我在这里建立一个理论。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:48:42.927

`NdefFormatable`意味着该卡可以被格式化以包含`NdefMessage`并且之后将具有`Ndef`可用的技术。您实际上可以格式化卡并`NdefMessage`同时使用[`format()`](http://developer.android.com/reference/android/nfc/tech/NdefFormatable.html#format%28android.nfc.NdefMessage%29).

包含 NDEF 的格式化仅在卡处于默认配置时才有效，例如当它来自工厂时（即，对于 MIFARE Classic 卡，所有扇区的默认密钥 A 和 B）。

# hibernate - 每个关系的数据库模型表？

> ID：12909365
> 
> 赞同：0
> 
> 时间：2012-10-16T07:16:28.820
> 
> 标签：hibernate, database-design, jpa

我有一个问题在我的数据库中建模关系。

我有一个表“评论”和三个表“用户”、“汽车”、“房子”。每个用户都可以评论用户、汽车和房屋。

通常这会导致所有 fk 都保存在表“注释”中，如 car_id、house_id、user_id。但是这些关系是排他性的，因此不可能有属于汽车和房屋的评论。

现在将所有 fks 都放在评论表中是否明智？因此，如果我们想要扩展（例如图片上的评论），它可能会导致很多可以为空的 fks。

或者为每个关系（如“UserComment”、“CarComment”和“HouseComment”）创建一个新表是一个不错的选择。

我希望这不是重复的，但我发现很难搜索这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:15:23.567

为了避免您的数据库中的冗余和不必要的空值，我建议使用继承，如果在您使用的数据库中可能的话。然后，您创建名为“commented_objects”或类似名称的父表和 3 个从父表继承的具有相同递增序列的表。在这种情况下，您只需要一个在父表和注释表之间的引用表。

如果您的数据库不允许使用组合和公共序列，您可以模拟继承。

所以代码看起来像（对于 PostgreSQL）：

```
CREATE TABLE commented_objects(
    id int,
    comment text
);

CREATE TABLE cars(
    some_fields text
) INHERITS (commented_objects);

CREATE TABLE houses(
    some_fields text
) INHERITS (commented_objects);

CREATE TABLE users(
    some_fields text
) INHERITS (commented_objects);

CREATE TABLE ref_table(
    id int,
    comment_id
); 
```

如果您愿意，可以通过添加新的继承表轻松扩展结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:17:12.593

在 Roman 的回答中，它不一定是表名。确实存在鉴别器的想法。

所以就表格而言，这看起来像：

```
create table house ( id .., ..., primary key (id) )
create table user ( id .., ..., primary key (id) )
create table car ( id .., ..., primary key (id) )
create table comment( id ..., commenter ..., commented_id ..., commented_type ... ) 
```

有几种方法可以将歧视应用于这样的一组关系。

首先是您可以使 Comment 本身成为一个层次结构并使用基于鉴别器的子类化。这种方法的缺点是子类完全没有价值，只服务于持久性的需要。这种方法的优点是它可以与任何 JPA 提供程序一起使用。要使用这种方法，您将拥有：

```
@Entity
@Table( name="comment" )
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name="commented_type")
public abstract class Comment {
    @Id
    @Column( name="id" )
    private Long id;
    ...
}

@Entity
public class HouseComment extends Comment {
    @ManyToOne
    @JoinColumn(name="commented_id")
    private House getHouse();
    ...
}

etc... 
```

就像我说的，有点丑。

Hibernate，专门为您提供了其他选项来处理此问题。例如，使用其“任何”映射的概念：

```
@Entity
@Table( name="comment" )
public class Comment {
    @Id
    @Column( name="id" )
    private Long id;

    @Any( metaColumn = @Column( name="commented_type" ) )
    @AnyMetDef(
        idType = "long"
        metaValues = {
            @MetaValue( value="C", targetEntity=Carclass ),
            @MetaValue( value="H", targetEntity=House.class ),
            @MetaValue( value="U", targetEntity=User.class )
        }
    )
    pubic Commentable getCommentTarget { ... }
}

public interface Commentable {
    ...
}

@Entity
public House implements Commentable {
   ...
}

etc... 
```

# vim - 如何将项目符号点视为vim中的空白字符？

> ID：12909369
> 
> 赞同：3
> 
> 时间：2012-10-16T07:16:49.087
> 
> 标签：vim, text, indentation

使用自动格式化选项时

```
set formatoptions=taw 
```

在 vim 中，以项目符号字符开头的段落格式如下：

```
• This is an
item of a list. 
```

如何告诉 vim 将行首的 '•' 视为空白字符以获取

```
• This is an
  item of a list. 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T08:09:30.477

您可以设置`comments`选项（`:set fo+=cq`必需）：

```
:set fo+=cq
:set com+=fb:• 
```

您还可以设置`formatlistpat`选项（`:set fo+=n`必需）：

```
:set fo+=n
:set flp=^\\s*•\\s* 
```

[*注：*用于`\\`获取`\`]

# zend-framework - Zendframework 更新查询不起作用

> ID：12909370
> 
> 赞同：0
> 
> 时间：2012-10-16T07:17:02.830
> 
> 标签：zend-framework

我无法找到我的查询不起作用的原因

```
 $data['active']=1
 $bind=$this->_db->quoteInto('id = ?', $id);
 $returnval= $this->_db->update($this->_name,$data,$bind);

`UPDATE `discount_rule` SET `isActive` = ? WHERE (rule_id = 20)` 
```

为什么 ”？” !. 我尝试了很多方法，但我无法以这种方式实现。$this_db 是 Zend_DB_Adapter_abstract 类型。要么是愚蠢的错误，要么我无法理解如何使用 Zend_Db_Table_Abstract - update() ！

更多细节

```
class demo_Model_price extends Zend_Db_Table_Abstract{
      public function update($data,$id){
        $where='id ='.$id; //i changed it to see if this work 
        try{
           $returnval= $this->update($this->_name,$data,$where);
           return $returnval;
        }catch(Exception $e)
        {
            echo $e->getMessage();
        }
     }
} 
```

有人可以确定我的查询中有什么问题吗？这是一个简单的查询，它应该可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:24:56.463

希望你正在使用`Models`

一些一般要点

总是用大写字母开始上课`Demo_Model_price`

`update`是一个关键字的函数`zend`

试试下面的代码

```
class Demo_Model_price extends Zend_Db_Table_Abstract{
      public function updateData($data,$id){
        $where = $this->getAdapter()->quoteInto('id = ?',$id);
        try{
           $returnval= $this->update($data,$where);
           return $returnval;
        }catch(Exception $e)
        {
            echo $e->getMessage();
        }
     } 
```

}

# grails - Grails 应用缺少资源？

> ID：12909375
> 
> 赞同：0
> 
> 时间：2012-10-16T07:17:16.250
> 
> 标签：grails, resources, cloud-foundry

我正在创建一个 Grails Web 应用程序，当我在本地部署应用程序时一切正常，它启动时没有问题，但是当我尝试部署到 Heroku 或 CloudFoundry 时，我从 CF 中的日志中收到以下错误：

```
2012-10-15 12:14:15,865 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /bootstrap/css/bootstrap-responsive.css
2012-10-15 12:14:15,866 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /kickstart/css/docs.css
2012-10-15 12:14:15,867 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /kickstart/css/kickstart.css
2012-10-15 12:14:15,867 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /datepicker/css/datepicker.css
2012-10-15 12:14:15,868 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /bootstrap/js/bootstrap.js
2012-10-15 12:14:15,868 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /datepicker/js/bootstrap-datepicker.js
2012-10-15 12:14:15,869 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /kickstart/js/kickstart.js
2012-10-15 12:14:17,506 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /bootstrap/css/bootstrap.css
2012-10-15 12:14:17,506 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /bootstrap/css/bootstrap-responsive.css
2012-10-15 12:14:17,507 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /kickstart/css/docs.css
2012-10-15 12:14:17,507 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /kickstart/css/kickstart.css
2012-10-15 12:14:17,508 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /datepicker/css/datepicker.css
2012-10-15 12:14:17,508 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /bootstrap/js/bootstrap.js
2012-10-15 12:14:17,509 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /datepicker/js/bootstrap-datepicker.js
2012-10-15 12:14:17,509 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /kickstart/js/kickstart.js
2012-10-15 12:14:19,042 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /bootstrap/css/bootstrap.css
2012-10-15 12:14:19,043 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /bootstrap/css/bootstrap-responsive.css
2012-10-15 12:14:19,043 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /kickstart/css/docs.css
2012-10-15 12:14:19,044 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /kickstart/css/kickstart.css
2012-10-15 12:14:19,044 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /datepicker/css/datepicker.css
2012-10-15 12:14:19,045 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /bootstrap/js/bootstrap.js
2012-10-15 12:14:19,045 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /datepicker/js/bootstrap-datepicker.js
2012-10-15 12:14:19,045 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /kickstart/js/kickstart.js
2012-10-15 12:14:20,248 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /bootstrap/css/bootstrap.css
2012-10-15 12:14:20,249 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /bootstrap/css/bootstrap-responsive.css
2012-10-15 12:14:20,249 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /kickstart/css/docs.css
2012-10-15 12:14:20,250 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /kickstart/css/kickstart.css
2012-10-15 12:14:20,250 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /datepicker/css/datepicker.css
2012-10-15 12:14:20,251 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /bootstrap/js/bootstrap.js
2012-10-15 12:14:20,251 [http-28586-1] ERROR resource.ResourceMeta  - Resource not found: /datepicker/js/bootstrap-datepicker.js
2012-10-15 12:14:20,252 [http-28586-1] ERROR resource.ResourceMeta  - Resource not 
```

这个应用程序使用位于根目录下名为“plugins”的文件夹中的内嵌插件。**然后我在BuildConfig.groovy**中有这段代码来引用插件：

```
grails.plugin.location.'spring-security-ui'="plugins/grails-spring-security-ui"
grails.plugin.location.'kickstart-with-bootstrap'="plugins/ui" 
```

一旦我使用内联插件，我才开始遇到将应用程序部署到云端的问题，以前从未遇到过这个问题：-S 谁能帮我解决这个问题，因为它非常烦人，我相信它是由“资源”引起的插入。

请注意，我已确保以下代码位于**config.groovy**文件中：

```
grails.resources.adhoc.patterns = ['/images/*', '/css/*', '/js/*', '/plugins/*'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:59:26.340

我通过将资源移动到正确的位置来解决这个问题，因为它们位于不同的地方：S

谢谢您的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:39:37.240

您是否尝试过使用与此处解释的解决方案类似的方法；

[Heroku，Grails：如果使用多个 Web dyno，则缺少资源](https://stackoverflow.com/questions/8881978/heroku-grails-missing-resources-if-using-multiple-web-dynos)

无论关注多个测功机，它看起来都可能是一个类似的问题。

# r - 从单个数据集中循环 R 多个样本

> ID：12909381
> 
> 赞同：5
> 
> 时间：2012-10-16T07:17:35.627
> 
> 标签：r, loops, for-loop, stata

我正在尝试在 R 中创建一个简单的循环，其中我有一个大数据集，我想从这个数据集中创建多个较小的样本并将它们导出到 excel：

我认为它会像这样工作，但它没有：

```
 idorg <- c(1,2,3,4,5)
 x <- c(14,20,21,16,17)
 y <- c(31,21,20,50,13)
 dataset <- cbind (idorg,x,y)

 for (i in 1:4)
 {
 attempt[i] <- dataset[sample(1:nrow(dataset), 3, replace=FALSE),]
 write.table(attempt[i], "C:/Users/me/Desktop/WWD/Excel/dataset[i].xls", sep='\t')
 } 
```

在 Stata 中，您需要在执行这样的循环时保存和恢复您的数据，但这在 R 中是否也有必要？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T07:23:22.030

您有以下问题：

1.  未声明尝试，因此`attempt[i]`无法分配给。要么将其作为矩阵填充在循环中（如果要保留样本），要么将其用作临时变量`attempt`。
2.  文件名取文学名，你需要在文件名中使用`paste()`或`sprintf()`包含变量的值`i`。

这是代码的工作版本：

```
idorg <- c(1,2,3,4,5)
x <- c(14,20,21,16,17)
y <- c(31,21,20,50,13)
dataset <- cbind (idorg,x,y)

for (i in 1:4)  {
  attempt <- dataset[sample(1:nrow(dataset), 3, replace=FALSE),]
  write.table(attempt, sprintf( "C:/Users/me/Desktop/WWD/Excel/dataset[%d].xls", i ), sep='\t')
} 
```

Excel 能够读取这样一个制表符分隔的表格吗？我不确定; 我会制作一个逗号分隔的表格并将其另存为`.csv`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T09:48:17.203

与 Stata 不同，您无需为 R 中的此类操作保留和恢复数据。

我认为一月份的解决方案可以解决您的问题，但我想分享另一种选择：使用`lapply()`获取数据集所有样本的列表：

```
set.seed(1) # So you can reproduce these results
temp <- setNames(lapply(1:4,
                        function(x) { 
                          x <- dataset[sample(1:nrow(dataset),
                                              3, replace = FALSE), ]; x }),
                 paste0("attempt.", 1:4)) 
```

这创建了一个`list()`包含四个`data.frame`s 的命名“temp”。

```
temp
# $attempt.1
#      idorg  x  y
# [1,]     2 20 21
# [2,]     5 17 13
# [3,]     4 16 50
# 
# $attempt.2
#      idorg  x  y
# [1,]     5 17 13
# [2,]     1 14 31
# [3,]     3 21 20
# 
# $attempt.3
#      idorg  x  y
# [1,]     5 17 13
# [2,]     3 21 20
# [3,]     2 20 21
# 
# $attempt.4
#      idorg  x  y
# [1,]     1 14 31
# [2,]     5 17 13 
# [3,]     4 16 50 
```

列表在 R 中非常方便。你现在可以用`lapply()`它来做其他有趣的事情，比如如果你想找出行的总和，你可以做`lapply(temp, rowSums)`. 或者，如果您想输出单独的 CSV 文件（可由 Excel 读取），您可以执行以下操作：

```
lapply(names(temp), function(x) write.csv(temp[[x]],
                             file = paste0(x, ".csv"))) 
```

# python - SQLAlchemy - 同一张表中的父子关系

> ID：12909389
> 
> 赞同：5
> 
> 时间：2012-10-16T07:17:54.767
> 
> 标签：python, mysql, python-3.x, sqlalchemy

我想在同一张表中有父子关系。以下是我所拥有的，但它不起作用。通过“不工作”，我的意思是当我调用`.children`某个`Item`对象时，它给了我`[]`. 我的代码中有什么错误以及如何正确执行？谢谢。

```
parents_children = Table('parents_children', Base.metadata,
                         Column('parent_id', bigint, ForeignKey('items.id', name='a'), primary_key=True),
                         Column('child_id', bigint, ForeignKey('items.id', name='b'), primary_key=True)
                         )

class Item(Base):
    __tablename__ = 'items'
    id = Column(bigint, primary_key=True, autoincrement=True)
    name = Column(types.String(80), default="")
    display_name = Column(types.String(80), default="")
    version = Column(types.String(80), default="")
    discriminator = Column(item_tag_enum, nullable=False)
    children = relationship('Item',
                            secondary=parents_children,
                            primaryjoin=id == parents_children.c.parent_id,
                            secondaryjoin=id == parents_children.c.child_id,
                            backref='parents')
    __mapper_args__ = {'polymorphic_on' : discriminator}

 # Item subclasses omitted because that's irrelevant to the question. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:01:32.167

我认为有一种更简单的方法......（我就是这样做的）

```
def adopt(parent_id,child_id):
    parent = DBSession.query(Item).get(parent_id)
    child  = DBSession.query(Item).get(child_id)
    parent.children.append(child) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:43:19.590

好的，问题解决了。

我正在创建一个插入语句对象但没有执行它。

我有什么：

```
def adopt(parent_id, child_id):
    print('{} adopts {}'.format(parent_id, child_id))
    parents_children.insert(values=dict(parent_id=parent_id, child_id=child_id)) 
```

我现在拥有的：

```
def adopt(parent_id, child_id):
    print('{} adopts {}'.format(parent_id, child_id))
    i = parents_children.insert(values=dict(parent_id=parent_id, child_id=child_id))
    conn = engine.connect()
    conn.execute(i) 
```

现在一切都按预期工作。

所以问题出在我在原始帖子中包含的片段之外的其他地方。请随时删除问题。

# java - 为什么会发生此 ArrayIndexOutOfBounds 异常？

> ID：12909392
> 
> 赞同：1
> 
> 时间：2012-10-16T07:18:08.850
> 
> 标签：java, arrays, hash, indexoutofboundsexception

我正在尝试使用哈希表实现字典（不使用 Java 提供的哈希表类，而是从头开始制作）。下面是`insert()`我的 Dictionary 类中的方法，用于将元素插入到包含在特定数组位置的链表中。

我正在运行一个提供的测试程序来确定我的 Dictionary 类是否有效，但是`ArrayIndexOutOfBoundsException: -5980`在达到某个点时我遇到了。下面包括特定的测试。为什么会出现这个异常？（如果需要，我可以提供更多代码！）

插入：

```
public int insert(DictEntry pair) throws DictionaryException {
    String entryConfig = pair.getConfig();
    int found = find(entryConfig);

    if (found != -1) {
        throw new DictionaryException("Pair already in dictionary.");
    }

    int entryPosition = hash(entryConfig);

    if (dict[entryPosition] == null) { //Dictionary.java:54
        LinkedList<DictEntry> list = new LinkedList<DictEntry>();
        dict[entryPosition] = list;
        list.add(pair);
        return 0;
    } else {
        LinkedList<DictEntry> list = dict[entryPosition];
        list.addLast(pair);
        return 1;
    }
} 
```

考试：

```
 // Test 7: insert 10000 different values into the Dictionary
    // NOTE: Dictionary is of size 9901
    try {
        for (int i = 0; i < 10000; ++i) {
            s = (new Integer(i)).toString();
            for (int j = 0; j < 5; ++j) s += s;
            collisions += dict.insert(new DictEntry(s,i)); //TestDict.java:69
        }
        System.out.println("   Test 7 succeeded");
    } catch (DictionaryException e) {
        System.out.println("***Test 7 failed");
    } 
```

异常堆栈跟踪：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: -5980
    at Dictionary.insert(Dictionary.java:54)
    at TestDict.main(TestDict.java:69) 
```

哈希函数：

```
private int hash(String config) {
int expBase = 41;
int exp;
int ASCIIChar;
int hashedConfig = 0;

    for (int i = 0; i < config.length(); i++) {
        ASCIIChar = (int)config.charAt(i);
        exp = (int)Math.pow(expBase, i);
        hashedConfig = hashedConfig + (ASCIIChar * exp);
    }

    hashedConfig = hashedConfig % dictSize;
    return hashedConfig;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T07:28:50.437

您的

```
exp = (int)Math.pow(expBase, i);
hashedConfig = hashedConfig + (ASCIIChar * exp); 
```

将溢出整数范围，因此生成负数。`Math.abs`在返回 hashedConfig 之前添加一个。

您可能应该分析这如何影响散列函数的分布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:25:34.247

对 - 正如所怀疑的那样，问题出在`hash()`. 这：

```
hashedConfig = hashedConfig % dictSize; 
```

...不保证它会是积极的。如果一开始是负数，你仍然会得到一个负数。你可以使用：

```
hashedConfig = Math.abs(hashedConfig % dictSize); 
```

或者：

```
hashedConfig = hashedConfig % dictSize;
if (hashedConfig < 0) {
    hashedConfig += dictSize;
} 
```

两者都会为您提供正确范围内的值，但您*可能会*发现后者更统一。

请注意，您的哈希代码也非常低效。根本不清楚你为什么不使用`String.hashCode()`开始。（您仍然需要将任意 32 位整数转换为数组元素范围内的值，但至少散列本身会更快。）

# wpf - 如何在 WPF DataGridTextColumn 中只允许正十进制值

> ID：12909394
> 
> 赞同：0
> 
> 时间：2012-10-16T07:18:20.693
> 
> 标签：wpf

我只想在 DataGridTextColumn 中允许正十进制值，如果用户输入 .369，系统将显示 0.369 怎么可能。我是 WPF 的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:58:04.920

为此，您可能必须`StringFormat`在 TextColumn 的`Binding`.

尝试这个...

```
 <Controls:DataGridTextColumn Header="Quantity"
                                Binding="{Binding Quantity, 
                                         StringFormat='{}{0:0.####}'}"/> 
```

所以现在**如果用户输入 .897 并按 enter**，单元格值将显示为“0.897”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:28:25.993

尝试这个

XAML：

```
 <Window x:Class="SandBox.Window4"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:local="clr-namespace:SandBox"
            Title="Window4" Height="300" Width="300">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition></RowDefinition>
            </Grid.RowDefinitions>
            <DataGrid x:Name="dg" Grid.Row="0" >
                <DataGrid.Columns>
                    <DataGridTemplateColumn Header="Quantity" Width="100">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBox Text="{Binding Path=Qty, Mode=TwoWay}" x:Name="tb" TextChanged="tb_TextChanged">

                                </TextBox>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
        </Grid>
    </Window> 
```

这是代码隐藏：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Windows;
    using System.Windows.Controls;
    using System.Windows.Data;
    using System.Windows.Documents;
    using System.Windows.Input;
    using System.Windows.Media;
    using System.Windows.Media.Imaging;
    using System.Windows.Shapes;
    using System.Collections.ObjectModel;

    namespace SandBox
    {
        /// <summary>
        /// Interaction logic for Window4.xaml
        /// </summary>
        public partial class Window4 : Window
        {
            public ObservableCollection<ItemClass> Collection = new ObservableCollection<ItemClass>();
            public Window4()
            {
                InitializeComponent();
                //Collection.Add(new ItemClass("123"));
                //Collection.Add(new ItemClass("456"));
                Collection.Add(new ItemClass("123"));
                Collection.Add(new ItemClass("456"));
                dg.ItemsSource = Collection;
            }

            private void tb_TextChanged(object sender, TextChangedEventArgs e)
            {
                int result = 0;
                TextBox txt = sender as TextBox;
                if (txt != null)
                {
                    if (!int.TryParse(txt.Text, out result))
                    {
                        if(result >= 0)
                        {
                            txt.Text = txt.Text.Substring(0, txt.Text.Length - 1);
                            txt.CaretIndex = txt.Text.Length;
                        }
                    }
                }
            }
        }

        public class ItemClass
        {
            public string Qty { get; set; }
            public ItemClass(string qty)
            {
                Qty = qty;
            }
        }
    } 
```

# objective-c - stringByTrimmingCharactersInSet：正在删除太多字符

> ID：12909395
> 
> 赞同：0
> 
> 时间：2012-10-16T07:18:25.330
> 
> 标签：objective-c, nsstring, uilabel

我有一个字符串，它代表从 rss 提要获得的文章的标题。字符串末尾有空格，所以我需要修剪字符串。

```
cell.title.text = [untrimmedTitle stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]]; 
```

但是，新字符串不会显示整个标题。例如，“最新酒吧之夜的堕胎主题”剪辑为“最新”。

标题存储在通常是多行的 UILabel 中，我注意到标题总是在倒数第二行的末尾被截断。我在 Interface Builder 中将最大行数设置为“0”，并将换行符设置为 Word Wrap。

编辑：

这是代码的较大部分。

```
 NSString *untrimmedTitle = [[stories objectAtIndex: storyIndex] objectForKey: @"title"];
cell.title.text = [untrimmedTitle stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
CGSize maximumLabelSize = CGSizeMake(296,9999);
CGSize expectedLabelSize = [cell.title.text sizeWithFont:cell.title.font constrainedToSize:maximumLabelSize];

//adjust the label to the the new height.
CGRect newFrame = cell.title.frame;
newFrame.size.height = expectedLabelSize.height;
cell.title.frame = newFrame; 
```

# java - 我不知道如何重写程序以使用对象而不是整数值，几乎没有问题

> ID：12909399
> 
> 赞同：-2
> 
> 时间：2012-10-16T07:18:37.133
> 
> 标签：java, object

我得到了一个程序，它使用整数输入来计算优先级队列。

如何重写代码来表示对象而不是整数？

我修改的问题是我的修改无法运行并说

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:22:00.053

您的对象不是字符串，而是整数（长整数）。所以不要试图解析它们。

你可以改变

```
 if( Long.parseLong((String) item) > Long.parseLong((String) queArray[j]) ) 
```

到

```
 if ((Long) item) > (Long) queArray[j]) ) 
```

你也可以改变

```
public void insert(Object item) 
```

到

```
public void insert(Long item) 
```

为了避免演员。

但这不适用于 Long 以外的其他类型的对象，因此可能对您没有用处。

如果您希望能够比较任何类型的对象，您可以提供一个[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)：

您将定义`PriorityQ`为`PriorityQ<T>`（使用泛型），添加一个`setComparator(Comparator comparator)`方法，并像这样定义您的插入方法：

```
 public void insert(T item)
 ...

 if ((comparator.compare(item, queArray[j])>0) { 
```

这意味着还将 queArray 数组更改为一种`T[]`类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:24:46.827

问题是您`insert(Object item)`使用整数类型值调用该函数。

然后您尝试以这种方式将其转换为 String：`(String) item`.

这行不通。用于`item.toString()`将某些内容**转换**为字符串。

当您阅读它时，您应该阅读以下内容：[Java 类型转换](http://www.javabeginner.com/learn-java/java-object-typecasting)

# c# - C#：如何向 DataTable 添加详细信息并将其显示在 DataGridView 上而不存储在数据库中

> ID：12909400
> 
> 赞同：0
> 
> 时间：2012-10-16T07:18:39.087
> 
> 标签：c#, .net, datagridview, datatable

我想在按下按钮时将详细信息存储到 DataTable 中，并在按下添加按钮时将其显示在 DataGridView 上。我怎样才能做到这一点。请帮我。非常感谢。

我试过这段代码。但我需要一种将它与数据网格绑定的方法。

```
 DataRow dr;
        DataTable dt=new DataTable();

        dt.Columns.Add("LoginId", typeof(int));

        dt.Columns.Add("UserFirstName", typeof(string));
        dt.Columns.Add("LastName", typeof(string));

        dt.Columns.Add("Password", typeof(string));
        dt.Columns.Add("EmailId", typeof(string));

        dt.Columns.Add("Role", typeof(string));
        dt.Columns.Add("Description", typeof(string));

        dr = dt.NewRow(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:25:33.343

这是绑定的`DataTable`方法`DataGridView`

```
myDataGrid.DataSource = myDataTable;
myDataGrid.DataBind(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:31:17.703

您可以根据需要向数据表中添加列，然后添加行，如下所示：

```
 DataTable dt = new DataTable();
    int value = 0;
    private void Form1_Load(object sender, EventArgs e)
    {
        dataGridView1.AutoGenerateColumns = true;

        dt.Columns.AddRange(new DataColumn[]
            {
                new DataColumn("column1", typeof(string)),
                new DataColumn("column2", typeof(int)),
            });
    }

    private void button1_Click(object sender, EventArgs e)
    {

        dt.Rows.Add("str value", value++);
        dataGridView1.DataSource = dt;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T07:35:51.847

在您给定的代码中，您没有在数据表中添加新创建的行，您可以像这样在数据表中添加行

```
 dr = dt.NewRow();

    dt.Rows.Add(dr);

    GridView1.DataSource = dt;
    GridView1.DataBind(); 
```

# php - 群发邮件php

> ID：12909409
> 
> 赞同：0
> 
> 时间：2012-10-16T07:18:52.640
> 
> 标签：php, email, smtp, massmail

我有一个包含 534 封注册电子邮件（时事通讯）的小型数据库。

我知道如何从我的数据库向所有电子邮件地址发送电子邮件，但问题在于页面托管的限制。我限制在 200 封电子邮件/小时，如果我强制发送到所有地址，我可能会被禁止。

一开始我使用循环发送（ for() 和 foreach() ），我选择了所有电子邮件而不是使用 smtp 发送消息。

昨天我在查看我的通知时，我看到了来自网络托管公司的警告窗口，我可能会被禁止，因为我试图在不到 1 小时内发送超过 500 封电子邮件！

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:27:58.550

如果您使用 mail() （没有代码我无法判断）然后从 php.net 阅读...

> 笔记：
> 
> 值得注意的是，mail() 函数不适合循环处理大量电子邮件。此函数为每封电子邮件打开和关闭一个 SMTP 套接字，效率不高。
> 
> 如需发送大量电子邮件，请参阅 » PEAR::Mail 和 » PEAR::Mail_Queue 包。

梨在我的书中并不有趣。我倾向于同意[这篇文章](https://stackoverflow.com/questions/1118154/sending-mass-email-using-php)，比如[SwiftMailer](http://swiftmailer.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:31:14.830

您可以像这样在一个电话中发送多封电子邮件

`CC = "emailaddress1@xxxx.com; emailaddress2@xxxxx.com"`. `BCC = "Firstemailaddress; secondemailaddress"`

但它也有一个限度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T07:31:24.037

您可以每小时运行一次脚本，并在您的`select`语句中更改`limit`值以在您的范围内工作，您可以将这些值保存在数据库中并在完成后将其设置回 0，甚至可以在创建然后重置的简单文件中在所有电子邮件都已循环之后。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T07:35:07.813

以下步骤会有所帮助。

1.  首先在表中添加一个参考作为状态标志，无论电子邮件是否发送给该特定客户。您可以为此使用布尔值。
2.  编写电子邮件发送脚本以仅运行 200 个循环，您应该在其中获得 200 个电子邮件尚未发送的电子邮件地址。（未发送标志的地方）
3.  在循环内部，在向每个用户发送电子邮件时，将他们的标志更新为数据库中的发送。

完成上述脚本后，您所要做的就是设置一个可以每小时执行一次的 cronjob 并在其中调用您的 php 脚本。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T02:08:24.833

我们为我们的 Web 应用程序使用外部电子邮件系统。我个人推荐[SendGrid](http://sendgrid.com/)，它处理缩放并提供一些非常有用的分析（非常方便追踪坏地址）。

# java - 如何在没有 servlet 引擎或 web.xml 的情况下使用 Wicket 呈现 html？

> ID：12909410
> 
> 赞同：0
> 
> 时间：2012-10-16T07:18:52.000
> 
> 标签：java, servlets, wicket

我需要用 Wicket 创建一堆 html 邮件。但是 afaik Wicket 需要一个 servlet 上下文。

所以我正在寻找一种方法来使用 Wicket 作为 html 的简单渲染器。也就是说，渲染我的`Page`对象，而无需启动 servlet 引擎。

在本质上：

```
 String renderPageToHtml (Page page) { 
     /* 
        1\. Instantiate wicket. 
        2\. Render page to String
        3\. Return it.
      */
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T07:28:38.277

没有测试过，但你可以试试[WicketTester](https://wicket.apache.org/apidocs/1.5/org/apache/wicket/util/tester/WicketTester.html)。这个类实际上是用来休息的，但允许在没有 servlet 容器的情况下实例化组件。

```
WicketTester tester = new WicketTester(new MyApplication();
tester.startPage(MyPage.class);
String MyPageAsString = tester.getLastResponseAsString(); 
```

正如我所说，使用风险自负，我没有对此进行测试。

# php - 为什么我的 node.tpl.php 在 drupal 7 上不起作用？

> ID：12909413
> 
> 赞同：1
> 
> 时间：2012-10-16T07:18:57.497
> 
> 标签：php, drupal-7

我是drupal的初学者。我建立了一个没有子主题的新主题，文件结构如下：

```
sites/
|-all/
  |-themes/
    |-mytheme/
      |-templates/
      | |-maintenance-page.tpl.php
      | |-node.tpl.php
      | |-page--front.tpl.php
      | |-page--node.tpl.php
      | |-page.tpl.php
      |-template.php
      |-mytheme.info 
```

我用 FirePHP 调试并打开`http://localhost/?q=node/1`，发现 page--node.tpl.php 包含在内，而 node.tpl.php 没有。为什么我的 node.tpl.php 没有被包括在内，我该怎么办？（PS我已经清除了缓存）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:57:04.887

当时只能使用一个模板文件，并且根据请求的页面 Drupal 决定使用 page--node.tpl.php。它被称为模板建议，您可以在[此处](http://drupal.org/node/1089656)阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:26:20.720

这些模板是**覆盖**。这意味着您的 node--TYPE.tpl.php 文件将覆盖它的基本模板，即 node.tpl.php 文件。
所以基本模板不会被使用。

# php - PHP yii 中的图表、图形和数据导出 excel

> ID：12909415
> 
> 赞同：1
> 
> 时间：2012-10-16T07:19:07.483
> 
> 标签：php, excel, charts, yii-extensions

我使用数据和 javascript 图表库（如 highcharts）生成报告。我正在尝试将报告导出为带有多个工作表和 excel 图表的 excel 格式。我可以将图表和数据导出为单独的 xls 文件。我使用了 Yii php 框架。

是否可以在单个 Excel 报告中导出？

# excel - 在所有目录和子目录中替换 Excel 和 Powerpoint 文件中的特定链接

> ID：12909417
> 
> 赞同：0
> 
> 时间：2012-10-16T07:19:15.767
> 
> 标签：excel, replace, hyperlink, powerpoint

我们刚刚将所有文件（尤其是 Excel 和 Powerpoint）从网络驱动器（“O:/...”）迁移到了 Sharepoint 站点（“http://sharepoint.company.com/....”） .

其中许多文档仍然包含引用“O:/..”的超链接，需要替换才能正常工作。

我们谈论的是 200 个文件，因此替换过程需要自动化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:35:01.067

如上所述，PPT可以自动化。

在我的 PPT FAQ 网站上，我有 VBA 代码，用于对您所追求的超链接进行搜索/替换。

[搜索/替换 PowerPoint 超链接](http://www.pptfaq.com/FAQ00773_Batch_Search_and_Replace_for_Hyperlinks-_OLE_links-_movie_links_and_sound_links.htm)

你可以很容易地把它修改成一个以PPT文件名作为参数的子程序，打开文件，执行S/R，保存文件。从枚举要修复的文件的另一个子中调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:35:15.653

Excel 和 Powerpoint 支持自动化。你可以用多种语言编写一个程序，使用自动化来完成这项工作。

# iphone - 从多个图像或 iPhone 图像动画创建 gif 图像或电影文件

> ID：12909419
> 
> 赞同：1
> 
> 时间：2012-10-16T07:19:25.267
> 
> 标签：iphone, objective-c, ios, animation, animated-gif

我在谷歌上搜索了很多，但没有找到任何适合目标 c 和 iphone 的东西。

我想问是否有任何方法可以从多个 png 图像创建单个 gif（动画）图像或电影文件。

我有多个图像，并且可以像视频一样以动画形式显示它们。

现在我必须以 gif 格式或电影格式保存它。

有人可以给我任何建议或编码帮助。

任何建议将不胜感激！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:35:32.580

您需要一个实用程序来创建像[TexturePacker](http://www.codeandweb.com/texturepacker/tutorials)或[Zwoptex](http://www.codeandweb.com/texturepacker)这样的精灵表：

# c# - 无法使用 C# Web 项目连接到 SQL Server 2008 r2，错误：连接字符串无效

> ID：12909420
> 
> 赞同：1
> 
> 时间：2012-10-16T07:19:34.357
> 
> 标签：c#, asp.net, sql-server-2008-r2, connection-string

我已经使用 C# 在 ASP.net 中创建了基本的登录模块。为此，我正在使用 C# Web 应用程序。

之前我使用 SQL Server 2008 Express 作为数据库。当时应用程序运行良好。

但后来我卸载了该数据库并安装了 SQL Server 2008 R2。

从那时起，我收到错误：

> *建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：25 - 连接字符串无效）*

我发现`config.xml`我的代码如下：

```
<connectionStrings>
    <add name="ApplicationServices"
         connectionString="data source=.\SQLEXPRESS ;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true"
         providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

我的 SQL Server 在哪里被调用`MSSQLSERVER`。

这个连接字符串一定是问题所在。但我无法解决这个问题。

我的结论是否正确，我能得到一些帮助吗？

PS：我的 SQL Server 2008 R2 安装正确。

但是每当我尝试连接 SQL Server 2008 R2 时，它都会连接到 2008，它已被卸载但具有相同的名称。（早期和此服务器具有相同的名称，即我的计算机名称。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T08:05:56.670

最有可能的是，您的 SQL Server 2008 Express 版本已作为`SQLEXPRESS`实例安装 - 因此您的连接字符串将类似于：

```
server=.\SQLEXPRESS;database=......... 
```

或类似的东西（也许你有机器名称而不是`.`代表“本地计算机”的机器名称）。

新的 SQL Server 2008 R2 实例必须是**不同**的实例名称 - 取决于您的安装方式。如果您使用默认实例，则该实例没有特定名称，您的连接字符串应如下所示：

```
server=.;database=.........
server=(local);database=.........
server=YourMachineName;database=......... 
```

如果您使用特定实例名称安装了 SQL Server 2008 R2（这是**您**必须知道的 - 我们无法为您知道......）然后在您的连接字符串中使用该实例名称：

```
server=.\INSTANCENAME;database=.........
server=(local)\INSTANCENAME;database=.........
server=YourMachineName\INSTANCENAME;database=......... 
```

**更新**：啊哈！！有你的问题！

> *此版本的SQL Server不**支持****用户实例登录标志。***

 **您的连接字符串包含：

```
.....;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true"
      **************************************************************** 
```

这个“特性”（我喜欢称之为**缺陷**）**仅**在 SQL Server 的 Express 版本中可用。

因此，当您升级到**完整**版 SQL Server 后，您需要：

*   将数据库附加到服务器
*   使用其逻辑名称连接以使用它（并且**不**提供`.mdf`文件名）

因此，将文件附加`ASPNETDB.MDF`到 SQL Server 2008 R2 实例后，请将连接字符串更改为：

```
data source=.;database=ASPNETDB;Integrated Security=SSPI; 
```

（或可能`GIS`用作您的数据源/服务器名称），然后您应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:36:11.970

我认为“.\SQLEXPRESS MSSQLSERVER”不是您的数据源。也许只有“.\SQLEXPRESS”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T04:47:04.293

我使用了以下连接字符串：

```
<connectionStrings>
    <add name="ApplicationServices"
         connectionString="Server=EGT-GIS;Integrated Security=True;Database=C:\inetpub\wwwroot\AddMarker\Map\Map\App_Data\ASPNETDB.MDF; Asynchronous Processing=False;" />
  </connectionStrings> 
```

它奏效了！！！

但只有一个问题，这个连接对于登录数据库是否安全？

从 Connection String 获得连接字符串帮助，感谢 Marc_s**

# objective-c - 如何同时阻止 c 特征和目标 C 对象？

> ID：12909421
> 
> 赞同：1
> 
> 时间：2012-10-16T07:19:36.467
> 
> 标签：objective-c, block

块的[文档](http://developer.apple.com/library/ios/documentation/cocoa/Conceptual/Blocks/Articles/bxOverview.html#//apple_ref/doc/uid/TP40007502-CH3-SW2)是这样说的：

> 尽管块可用于纯 C 和 C++，但块也始终是 Objective-C 对象。

该[文件](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/00_Introduction.html)还说：

```
Block objects are a C-level syntactic and runtime feature. 
```

它如何既是 ac 运行时特性又是一个客观的 C 对象？

我知道大多数对象objective-C 对象都是从NSObject 派生的以具有内存管理例程。我们还有 NSProxy 类，它不是从 NSObject 派生的。

由于 NSObject 的内部实现是 ac struct，我认为由于块是 ac 运行时特性，因此可以将块作为目标 C 对象。但是它们是如何被归类为客观 C 对象的呢？什么样的客观 C 对象是块？

# java - ArrayList 中未添加 XML 元素

> ID：12909422
> 
> 赞同：0
> 
> 时间：2012-10-16T07:19:42.583
> 
> 标签：java, android, xml-parsing

我需要解析一个内联元素可用的 XML。例如：

```
<states>
  <state name ="Alaska" colour="#ff0000" >
    <point lat="70.0187" lng="-141.0205"/>
    <point lat="70.1292" lng="-141.7291"/>
    <point lat="70.4515" lng="-144.8163"/>
    <point lat="70.7471" lng="-148.4583"/>
    <point lat="70.7923" lng="-151.1609"/>
</state>
  <state name ="Alabama" colour="#ff0000" >
    <point lat="35.0041" lng="-88.1955"/>
    <point lat="34.9918" lng="-85.6068"/>
    <point lat="32.8404" lng="-85.1756"/>
    <point lat="32.2593" lng="-84.8927"/>
  </state>
</states> 
```

我能够显示所有值，但是当我尝试将它们添加到数组列表时，它不会添加它们。下面是我在 SAX Parser 中解析 XML 代码的代码：

```
// Event Handlers
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
        // reset
        tempVal1 = "";
        tempVal2 = "";
        Log.e("SAX Details", "localName: " + localName + " qName: " + qName
                + " name: " + attributes.getValue(0));
        if (qName.equalsIgnoreCase("state")) {
            // create a new instance of state
            tempState = new States();
            tempVal1 = attributes.getValue(0);
            tempVal2 = attributes.getValue(1);
            Log.e("SAX StateDetails", "localName: " + localName + " qName: "
                    + qName + " name: " + attributes.getValue(0) + " color: "
                    + attributes.getValue(1));

        } else if (qName.equalsIgnoreCase("point")) {
            // create a new instance of point
            tempPoint = new Points();
            tempVal1 = attributes.getValue(0);
            tempVal2 = attributes.getValue(1);
            Log.e("SAX pointDetails", "localName: " + localName + " qName: "
                    + qName + " lat: " + attributes.getValue(0) + " lng: "
                    + attributes.getValue(1));
        }

    }

    public void endElement(String uri, String localName, String qName)
            throws SAXException {
        Log.e("SAX Details", "localName: " + localName + " qName" + qName);
        if (qName.equalsIgnoreCase("state")) {
            // add it to the list
            tempState.setStateName(tempVal1); // getting Exception
            tempState.setColor(Integer.parseInt(tempVal2));// getting Exception
            states.add(tempState);

        } else if (qName.equalsIgnoreCase("point")) {
            // add it to the list
            tempPoint.setLatitude(Long.parseLong(tempVal1));// getting Exception
            tempPoint.setLongitude(Long.parseLong(tempVal2));// getting Exception
            points.add(tempPoint);

        }
        tempState.setPoints(points);// getting Exception        
        Log.e("States", "" + states.size());
        Log.e("points", "" + points.size());

    } 
```

arrayList 中没有添加任何内容 这是实现 setter 和 getter 方法的示例代码：States.java

```
public class States {
    private String stateName;
    private int color;
    private ArrayList<Points> points;

    public String getStateName() {
        return stateName;
    }

    public void setStateName(String stateName) {
        this.stateName = stateName;
    }

    public int getColor() {
        return color;
    }

    public void setColor(int color) {
        this.color = color;
    }

    public ArrayList<Points> getPoints() {
        return points;
    }

    public void setPoints(ArrayList<Points> points) {
        this.points = points;
    }

} 
```

点数.java

```
public class Points {

    private long latitude;
    private long longitude;

    public long getLatitude() {
        return latitude;
    }

public void setLatitude(long latitude) {
    this.latitude = latitude;
}

public long getLongitude() {
    return longitude;
}

public void setLongitude(long longitude) {
    this.longitude = longitude;
}

public String getPointsDetails() {
    String result = latitude + ": " + longitude;
    return result;
} 
```

}

请帮助我如何在 ArrayList 中添加这些元素。

更新代码：

```
 public class SAXXMLHandler extends DefaultHandler {

        public static ArrayList<States> states;
        public static ArrayList<Points> points;
        public String tempVal1;
        public String tempVal2;
        public String tempVal3;
        public String tempVal4;
        public States tempState;
        public Points tempPoint;

        public SAXXMLHandler() {
            states = new ArrayList<States>();
            points = new ArrayList<Points>();
        }

        // Event Handlers
        public void startElement(String uri, String localName, String qName,
                Attributes attributes) throws SAXException {
            // reset
            tempVal1 = "";
            tempVal2 = "";
            tempVal3 = "";
            tempVal4 = "";

            tempState = new States();
            tempPoint = new Points();

            if (qName.equalsIgnoreCase("state")) {
                // create a new instance of state
                tempVal1 = attributes.getValue("name");
                tempVal2 = attributes.getValue("colour");
                tempState.setStateName(tempVal1);
                tempState.setColor(tempVal2);
                states.add(tempState);

            } else if (qName.equalsIgnoreCase("point")) {
                // create a new instance of point
                tempVal3 = attributes.getValue("lat");
                tempVal4 = attributes.getValue("lng");
                tempPoint.setLatitude(Double.parseDouble(tempVal3));
                tempPoint.setLongitude(Double.parseDouble(tempVal4));
                points.add(tempPoint);
            }

        }

        static int statesSize = 0;

        public void endElement(String uri, String localName, String qName)
                throws SAXException {
            Log.e("NAmes", "" + localName + " : " + qName);
            if (qName.equalsIgnoreCase("state")) {
                // add it to the list
                statesSize = states.size();
                            if (statesSize == states.size()) {
                    tempState.setPoints(points);
                }
//here the size of points is displayed w.r.t states i.e., 5 and 4
                Log.e("Points size", "" + tempState.getPoints().size());

            } else if (qName.equalsIgnoreCase("point")) {
                // add it to the list
//here the size of points is displayed as zero.
Log.e("Points size", "" + tempState.getPoints().size());
                            }
            if (statesSize == states.size()) {
                points.clear();
            }

        }

        public ArrayList<States> getStates() {
            return states;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:30:40.760

如果您收到 numberformatexception，则将纬度和经度更新为 double 并将颜色更新为 String

```
class XMLParsingSAX extends DefaultHandler {

    public static void main(String[] args) {
        new XMLParsingSAX().parseDocument();
    }

    private void parseDocument() {

        // get a factory
        SAXParserFactory spf = SAXParserFactory.newInstance();
        try {

            // get a new instance of parser
            SAXParser sp = spf.newSAXParser();

            // parse the file and also register this class for call backs
            sp.parse("NewFile.xml", this);

        } catch (SAXException se) {
            se.printStackTrace();
        } catch (ParserConfigurationException pce) {
            pce.printStackTrace();
        } catch (IOException ie) {
            ie.printStackTrace();
        }

        System.out.println(states.toString());
        System.out.println(states.get(0).getPoints().toString());
        System.out.println(states.get(1).getPoints().toString());
    }

    Points tempPoint;
    String tempVal1;
    String tempVal2;

    States tempState;

    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
        // reset
        tempVal1 = "";
        tempVal2 = "";
        System.out.println("localName: " + localName + " qName: " + qName
                + " name: " + attributes.getValue(0));
        if (qName.equalsIgnoreCase("state")) {
            // create a new instance of state
            tempState = new States();
            points = new ArrayList<Points>();
            tempState.setStateName(attributes.getValue(0));
            tempState.setColor(Integer.parseInt(attributes.getValue(1)));
            tempVal1 = attributes.getValue(0);
            tempVal2 = attributes.getValue(1);
            System.out.println("localName: " + localName + " qName: "
                    + qName + " name: " + attributes.getValue(0) + " color: "
                    + attributes.getValue(1));

        } else if (qName.equalsIgnoreCase("point")) {
            // create a new instance of point
            tempPoint = new Points();
            tempVal1 = attributes.getValue(0);
            tempVal2 = attributes.getValue(1);
            System.out.println("localName: " + localName + " qName: "
                    + qName + " lat: " + attributes.getValue(0) + " lng: "
                    + attributes.getValue(1));
        }

    }

    public void endElement(String uri, String localName, String qName)
            throws SAXException {
        System.out.println("localName: " + localName + " qName" + qName);
        if (qName.equalsIgnoreCase("state")) {
            // add it to the list
//            tempState.setStateName(tempVal1); // getting Exception
//            tempState.setColor(Integer.parseInt(tempVal2));// getting Exception
            states.add(tempState);

        } else if (qName.equalsIgnoreCase("point")) {
            // add it to the list
            tempPoint.setLatitude(Long.parseLong(tempVal1));// getting Exception
            tempPoint.setLongitude(Long.parseLong(tempVal2));// getting Exception
            points.add(tempPoint);

        }
        tempState.setPoints(points);// getting Exception        
        System.out.println("" + states.size());
        System.out.println("" + points.size());

    }

       ArrayList<States> states = new ArrayList<States>();
       ArrayList<Points> points = new ArrayList<Points>();

}

 class States {
    private String stateName;
    private int color;
    private ArrayList<Points> points;

    public String getStateName() {
        return stateName;
    }

    public void setStateName(String stateName) {
        this.stateName = stateName;
    }

    public int getColor() {
        return color;
    }

    public void setColor(int color) {
        this.color = color;
    }

    public ArrayList<Points> getPoints() {
        return points;
    }

    public void setPoints(ArrayList<Points> points) {
        this.points = points;
    }

    @Override
    public String toString() {
        return "States [stateName=" + stateName + ", color=" + color + "]";
    }

}

 class Points {

        private long latitude;
        private long longitude;

        public long getLatitude() {
            return latitude;
        }

    public void setLatitude(long latitude) {
        this.latitude = latitude;
    }

    public long getLongitude() {
        return longitude;
    }

    public void setLongitude(long longitude) {
        this.longitude = longitude;
    }

    public String getPointsDetails() {
        String result = latitude + ": " + longitude;
        return result;
    }

    @Override
    public String toString() {
        return "Points [latitude=" + latitude + ", longitude=" + longitude
                + "]";
    }

    } 
```

# android - 将 Aac+player 应用设置为后台服务

> ID：12909425
> 
> 赞同：0
> 
> 时间：2012-10-16T07:19:52.047
> 
> 标签：android

嗨，我正在使用[http://code.google.com/p/aacdecoder-android/](http://code.google.com/p/aacdecoder-android/)这里是我的主要活动完整代码： http: [//pastebin.com/FmaVgfNP](http://pastebin.com/FmaVgfNP)但现在我想将该应用程序放在后台，所以当人们按下后退按钮应用程序保持流式传输音频我尝试使用这个：基本上该应用程序有两个活动一个列表视图然后当我单击一个项目时它会自动播放该站的流但是当我按下返回按钮时我的流停止，我试图创建一个像这样的服务：

```
public class MyService extends Service {
    private static final String TAG = "AACPlayerActivity";

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
        Toast.makeText(this, "My Service Created", Toast.LENGTH_LONG).show();
        Log.d(TAG, "onCreate");

        //player = MediaPlayer.create(this, R.raw.braincandy);
        //player.setLooping(false); // Set looping
    }

    @Override
    public void onDestroy() {
        Toast.makeText(this, "My Service Stopped", Toast.LENGTH_LONG).show();
        Log.d(TAG, "onDestroy");
        //player.stop();
    }

    @Override
    public void onStart(Intent intent, int startid) {
        Toast.makeText(this, "My Service Started", Toast.LENGTH_LONG).show();
        Log.d(TAG, "onStart");
        //player.start();
    }
} 
```

我尝试使用此代码在我的活动中配置服务：

```
startService(new Intent(this, MyService.class)); 
```

在 aacplayer 启动时我的主要活动中

然后当停止时我把这个：

```
stopService(new Intent(this, MyService.class)); 
```

我尝试在 MyService.class oncreate 中添加该功能`multiPlayer.playAsync( getUrl());`，以便在人们按下后退按钮时音频流继续播放。

但我收到此错误：

```
10-16 02:02:07.760: E/AndroidRuntime(25638): java.lang.RuntimeException: Unable to start service com.spoledge.aacplayer.MyService@41b40ca0 with Intent { cmp=com.spoledge.aacplayer/.MyService }: java.lang.NullPointerException 
```

我不知道我的逻辑是否正确我不太清楚我的播放器何时流式传输音频我可以将该操作注册为服务，以便它保持在后台。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:38:50.813

在使用绑定服务之前，我已经这样做了。绑定更好，因为它允许您轻松实现暂停/停止/播放等。如果您的活动在后台被系统杀死，它可以在用户将其重新启动时重新绑定到服务，这重新启用播放控制。

我不确定将链接发布到我自己的博客是否是不好的做法，但完整的源代码在[http://www.speakingcode.com/2012/02/22/creating-a-streaming-audio-app -for-android-with-android-media-mediaplayer-android-media-audiomanager-and-android-app-service/](http://www.speakingcode.com/2012/02/22/creating-a-streaming-audio-app-for-android-with-android-media-mediaplayer-android-media-audiomanager-and-android-app-service/)

如果链接不是首选，我将在这里复制解决方案，但它很长:-) 祝你好运，编码愉快！

如果您想使用您正在做的启动服务，并失去绑定服务的好处，那么您需要将您的 MediaPlayer 对象完全移入服务并移出活动。您可以在 onCreate() 中实例化 MediaPlayer，但最好在 onStartCommand() 方法中启动它（调用 playAsync()）。

# php - mysql主键自动递增问题

> ID：12909429
> 
> 赞同：3
> 
> 时间：2012-10-16T07:20:04.467
> 
> 标签：php, mysql, primary-key

我有一个 `(entry_id, user_id, event_id)`entry_id 设置为自动递增的表。但我忘记了`entry_id`作为主键。现在我有大约 400 个相同的条目`entry_id`。它没有增加。如何更改它以使 entry_id 是唯一的而不删除表？

如果我执行以下查询，我会丢失任何东西吗？

```
ALTER TABLE your_table
ADD PRIMARY KEY (entry_id); 
```

请注意，所有 my`entry_id`的值都为 1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T07:25:28.433

尝试使用自动增量值创建一个新表，然后`INSERT SELECT`将现有表（不包括具有不正确键值的列）放入新表中。那应该自动填充密钥。最后，删除旧表并重命名新表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T07:27:30.423

我认为，首先您应该运行一个脚本，该脚本循环遍历每一行并以自动递增的方式设置 entry_id。并运行查询

```
ALTER TABLE your_table
ADD PRIMARY KEY (entry_id); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T07:27:32.597

您可以使用行号来设置您的主键列：

```
update your_table set entry_id=@curRow; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T08:11:46.160

1.  将所有值重置`entry_id`为 NULL
2.  使字段`entry_id`PRIMARY+AUTO_INCREMENT，MySQL 将为您做任何事情。

这是一个脚本 -

```
UPDATE your_table SET entry_id = NULL;

ALTER TABLE your_table
  CHANGE COLUMN entry_id entry_id INT(11) NOT NULL AUTO_INCREMENT,
  ADD PRIMARY KEY (entry_id); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T07:27:41.717

您不会丢失任何东西，因为查询不会运行：

```
mysql> alter table test add primary key (entry_id);
ERROR 1062 (23000): Duplicate entry '1' for key 'PRIMARY' 
```

要么重新编号你的`entry_id`列，要么将整个表格复制到一个新的（正确的）表格中，`entry_id`然后让它`AUTO_INCREMENT`为你服务。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-16T07:30:50.787

总是有一个表的备份并在这个查询中工作它不会影响任何表。此外，如果你有`auto increment as 1`，一旦你添加记录，它会在.so中返回一个`error as duplicate`if`1 is exists``table``maximum`

如果错了请纠正我

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-16T07:31:24.843

或者，您可以分两步执行此操作：

运行以下 SQL 以增加您的 ID：

```
begin
declare entry_id_upd, numberOfRecords, cursor int;
set numberOfRecords = (select count(*) from mytable);
set cursor = 0;
while cursor <= numberOfRecords do
set entry_id_upd = ( select entry_id from mytable where id = cursor ) + 1;
update mytable set entry_id = entry_id_upd where id = cursor;
set cursor = ( cursor + 1 );
end while;
end 
```

然后设置主键：

```
ALTER TABLE mytable ADD PRIMARY KEY (entry_id); 
```

# java - glDrawArrays Exception_Access_Violation

> ID：12909432
> 
> 赞同：2
> 
> 时间：2012-10-16T07:20:18.153
> 
> 标签：java, opengl

我正在尝试实现一种在 OpenGL 和 Java 中使用 vertexBufferObjects 绘制一堆立方体的方法，但是在调用 glDrawArrays 命令时遇到了问题。

本质上，该程序所做的是循环通过 x、y、z 坐标并从那里计算以该坐标为中心的立方体的顶点所在的位置，然后将这些顶点输入到浮点缓冲区。（注意我现在只输入一个面的顶点数据，以保持代码在完善的同时保持简单）

发生的错误是：

`EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x000000006056ec90, pid=6424, tid=7696`

```
int verticesPerObject = 12; //number of vertices per square
int chunkSizeX = 4; //number of cubes in x direction
int chunkSizeY = 4; //number of cubes in y direction
int chunkSizeZ = 4; //number of cubes in z direction
FloatBuffer vertexData = BufferUtils.createFloatBuffer(chunkSizeX * chunkSizeY * chunkSizeZ * verticesPerObject);

    for (int x = 0; x < chunkSizeX; x++) {
        for (int y = 0; y < chunkSizeY; y++) {
            for (int z = 0; z < chunkSizeZ; z++) {
                vertexData.put(new float[]{
                        (float)x * blockWidth - blockWidth/2, (float)y * blockHeight - blockHeight/2, (float)z * blockDepth + blockDepth/2,
                        (float)x * blockWidth + blockWidth/2, (float)y * blockHeight - blockHeight/2, (float)z * blockDepth + blockDepth/2,
                        (float)x * blockWidth + blockWidth/2, (float)y * blockHeight + blockHeight/2, (float)z * blockDepth + blockDepth/2,
                        (float)x * blockWidth - blockWidth/2, (float)y * blockHeight + blockHeight/2, (float)z * blockDepth + blockDepth/2
                });
            }
        }
    }

    vertexData.flip();

    int vboVertexHandle = glGenBuffers();
    glBindBuffer(GL_ARRAY_BUFFER, vboVertexHandle);
    glBufferData(GL_ARRAY_BUFFER, vertexData, GL_STATIC_DRAW);
    glBindBuffer(GL_ARRAY_BUFFER, 0);

    glBindBuffer(GL_ARRAY_BUFFER, vboVertexHandle);
    glVertexPointer(verticesPerObject, GL_FLOAT, 0, 0L);

    glEnableClientState(GL_VERTEX_ARRAY);
    glDrawArrays(GL_QUADS, 0, verticesPerObject);
    glDisableClientState(GL_VERTEX_ARRAY); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T07:57:03.810

你的电话`glVertexPointer`是错误的。它的第一个参数不是整体浮点数，而是单个顶点的浮点数（或更确切地说是组件），在您的情况 3 中。访问冲突的原因只是，`glVertexPointer`调用失败`glDrawArrays`然后使用默认参数，它可能为每个顶点指定 4 个组件，或者不使用您的缓冲区对象或使用与您的顶点数据不匹配的其他未指定参数。所以只需将其替换为

```
glVertexPointer(3, GL_FLOAT, 0, 0L); 
```

变量名`verticesPerObject`无论如何有点误导，因为它不包含顶点数，而是浮点数，但这只是化妆品，其余用法是正确的。

# mysql - 如何编写这个 mysql 查询

> ID：12909435
> 
> 赞同：0
> 
> 时间：2012-10-16T07:20:30.237
> 
> 标签：mysql

## 表结构

```
id | term | result
==================
1  | t1   | 0
2  | t2   | 0
3  | t1   | 34
4  | t1   | 23
5  | t2   | 10
6  | t2   | 10
7  | t3   | 20 
```

该表用于搜索表，其中 term 是某人正在搜索的关键字，result 是当时返回的结果数。现在，我需要从这个表中检索 1) 一个术语被搜索的次数和 2) 最后一次搜索时返回的结果数。

对于第一个我可以做`count(term) group by term`，对于 2 可能`ORDER by id DESC`，但我不知道如何在一个查询中做这两个。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T07:25:40.720

你想要[分组最大值](http://dev.mysql.com/doc/en/example-maximum-column-group-row.html)：

```
SELECT term, count, result
FROM   my_table NATURAL JOIN (
         SELECT term, COUNT(*) count, MAX(id) id FROM my_table GROUP BY term
       ) t 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/c8304/1/0)上查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:38:28.773

```
 select term, count(*), (select result from my_table where id = max(t.id)) 
   from my_table t 
   group by term 
```

请参阅[SQL 小提琴](http://sqlfiddle.com/#!2/d8516/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T07:37:02.233

您可以使用 GROUP_CONCAT() 函数来聚合结果字段，然后使用 SUBSTRING_INDEX 来取回您想要的。

`SELECT COUNT(term), SUBSTRING_INDEX(GROUP_CONCAT(result ORDER BY id DESC), ',', 1) FROM table GROUP BY term`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-16T07:36:39.803

使用以下查询

```
 select id,term,count(*) as 'count',result from (select * from table33 
 order by id desc) as abc group by term 
```

# internet-explorer - CSS3 Pie Border-radius Circle显示细边框

> ID：12909436
> 
> 赞同：0
> 
> 时间：2012-10-16T07:20:39.400
> 
> 标签：internet-explorer, css, css3pie

我使用 css3 边界半径和 css3pie 创建了一个圆。这是一个链接：

[http://www.jamfactory.co.za/tools/circle.html](http://www.jamfactory.co.za/tools/circle.html)

问题在于 IE 上的背景颜色超过边框颜色 1px，这在任何其他浏览器中都不会发生。有谁知道方法或修复？

这是代码：

```
<html>
<head>
<style>
#OuterCircle {
position:relative;
width:50px;
height:50px;
border: 5px solid #FFFFFF;
background:#e21e36;
}
.circle {
-webkit-border-radius: 60px;
-moz-border-radius: 60px;
border-radius: 60px;
behavior: url(PIE.htc);
}
</style>
</head>
<body>
<div id="OuterCircle" class="circle">
</div>
</body>
</html> 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:43:15.873

让它正常工作。

使用了包装器和绝对定位的组合

谢谢

# facebook - 脸书社区

> ID：12909437
> 
> 赞同：3
> 
> 时间：2012-10-16T07:20:55.277
> 
> 标签：facebook, facebook-graph-api

如何使用 facebook API 查找 facebook url 是社区 url 或个人资料 url

例如 [http://www.facebook.com/adelphi.panthers](http://www.facebook.com/adelphi.panthers)

[http://www.facebook.com/BryantAthletics](http://www.facebook.com/BryantAthletics)

哪个是个人资料网址，哪个是社区网址，如何找到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:27:23.590

> 您提供的链接是针对 Facebook 用户和 Facebook 页面的。我将假设您所说的“社区网址”是指 Facebook 页面......

好的，所以我认为根据用户名（或 ID）检测什么是 Facebook 页面以及什么是用户将非常简单。

您所要做的（在这些情况下）就是使用用户名查询 Graph API -

```
https://graph.facebook.com/adelphi.panthers

{
  "id": "1360823630", 
  "name": "Adelphi Panthers", 
  "first_name": "Adelphi", 
  "last_name": "Panthers", 
  "link": "https://www.facebook.com/adelphi.panthers", 
  "username": "adelphi.panthers", 
  "gender": "female", 
  "locale": "en_US", 
  "updated_time": "2012-10-09T12:51:38+0000"
} 
```

如您所见，此 API 调用返回了一个性别参数。页面不能有性别，因此我们可以假设这是 Facebook 用户。

```
https://graph.facebook.com/BryantAthletics

{
  "name": "Bryant Athletics", 
  "is_published": true, 
  "website": "bryantbulldogs.com", 
  "username": "BryantAthletics", 
  ...
  "category": "School sports team", 
  ...
} 
```

您可以在这里看到更多信息正在返回给我们。我认为 Category 参数很好地表明此特定用户名与页面相关。用户不能为自己选择一个类别...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T07:46:58.743

正如@Lix 建议的那样，您可以执行以下操作：

**请求：** [https ://graph.facebook.com/BryantAthletics?fields=gender](https://graph.facebook.com/BryantAthletics?fields=gender)

**HTTP 响应：** 400 错误请求

**JSON响应：**

```
{
   "error": {
      "message": "(#100) Unknown fields: gender.",
      "type": "OAuthException",
      "code": 100
   }
} 
```

这告诉我们它不是用户对象。但是它可能是一个组或一个页面。所以您需要使用组或页面唯一的属性发出另一个请求。根据您提出请求的方式，您可以决定相应地处理结果。

考虑，

**请求：** [https ://graph.facebook.com/adelphi.panthers?fields=gender](https://graph.facebook.com/adelphi.panthers?fields=gender)

**HTTP 响应：** 200 OK

**JSON响应：**

```
{
   "gender": "female",
   "id": "1360823630"
} 
```

现在这告诉我们性别属性存在于这个 Facebook 对象中，所以它肯定是一个用户。

我假设您正在使用 JQuery 来捕获和解析响应。然后，您将检查 JSON 变量中的错误属性以确定对象类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T10:46:01.957

```
If you are working with java then don't pass any parameter of gender type.
it will automatically accept.
I had the same problem but now its resolved. 

My working code is: 

User user = client.fetchObject("username", User.class);
        System.out.println("Gender: " + user.getGender()); 
```

# javascript - 在发布前使用未压缩的 javascript 文件进行开发

> ID：12909438
> 
> 赞同：1
> 
> 时间：2012-10-16T07:20:56.357
> 
> 标签：javascript

这个问题是如此简单和常见，但我仍然无法找到一个好的解决方案。所以我想也许 Stackoverflow 的一些专家可以指导我了解最佳实践。

假设我有几个 Javascript 模块并将它们分别放在一个单独的文件中：

```
a.js
b.js
c.js
d.js 
```

在发布软件时，我将它们连接在一起并缩小它们：

```
//pseudo command:
cat a.js b.js c.js d.js | minify > all.js 
```

然后我在我的 html 文件中包含对 all.js 的引用，如下所示：

```
<script src="all.js"></script> 
```

到目前为止，一切都很好。问题是，在开发软件时，我希望看到文件未缩小且未合并。一种解决方案是消除过程中的缩小，并这样做：

```
//pseudo command:
cat a.js b.js c.js d.js > all.js 
```

并将其包含在`<script>`标签中。这可行，但我更希望将文件单独包含在内。所以我必须在我的 html 文件中这样做：

```
<script src="a.js"></script>
<script src="b.js"></script>
<script src="c.js"></script>
<script src="d.js"></script> 
```

这个按我的意图工作，但是在发布代码时，我必须检查所有的 html 文件并用这 4 个`<script>`标签替换`<script src="all.js"></script>`，这对我的项目来说工作量太大了，因为有很多 html 文件，而且我们定期进行调试/发布周期.

一种解决方案是为所有文件添加脚本标签：

```
<script src="a.js"></script>
<script src="b.js"></script>
<script src="c.js"></script>
<script src="d.js"></script>
<script src="all.js"></script> 
```

但这会在运行时导致 4 个错误请求。（因为在发布时只有 all.js 可用）。

你将如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:26:32.623

为什么不使用像[headjs](http://headjs.com/)这样的 javascript 加载器并动态提供文件？

然后当你投入生产时，你只需要修改 headJs 调用并只包含缩小的 js 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:38:09.160

由于我使用的是 ASP.NET，因此我将通过以下方式解决问题：

*默认.aspx：*

```
<%
if (ConfigurationManager.AppSettings["IsDebug"] == "true")
{
%>
<script src="Scripts/Application/Core/Constants.js" type="text/javascript"></script>
...
<script src="Scripts/Application/Core/Application.js" type="text/javascript"></script>
<%
} else {
%>
<script src="Scripts/compressed.js" type="text/javascript"></script>
<%
}
%> 
```

*网络配置：*

```
<configuration>
  <appSettings>
    <add key="IsDebug" value="true"/>
  </appSettings>
</configuration> 
```

我正在使用[Google Closure Compiler](https://developers.google.com/closure/compiler/)将我所有的 JS 合并到一个文件中。

* * *

因此，如果您的客户遇到错误，您可以要求他更改`IsDebug`并`true`检查控制台输出（如果您正在使用它）以获取错误来源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T07:38:45.270

我们所做的是将 替换`<script src="xxx.js">`为服务器端函数，例如`<% Require("xxx.js"); %>`.

该函数被配置为渲染该文件的常规脚本引用，或者在缩小模式下，确定文件属于哪个聚合组（您只有一个组，称为“全部”，但这种方法支持多个聚合组）并为该聚合文件添加脚本引用（如果其他`Require()`调用尚未要求） 。

这允许我们在开发过程中随意在聚合（+minified）和非聚合模式之间切换。发布版本默认配置为使用聚合模式，而开发版本使用原始模式。

伪代码：

```
string RequireScript(string filename) 
{
    if (!IsAggregated)
    {
        return "<script src='$(filename)'>";
    }
    else 
    {
        var group = FindAggregationGroupFor(filename); 
        if (group in _requiredGroups) return "";

        _requiredGroups.Add(group);
        return "<script src='/aggregated/$(group).js'>";
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T07:40:36.943

您也可以只编写一个头文件，然后将其动态地包含在您网站的每一页中，作为一个基本的模板系统。

因此，您只需修改一个文件即可编辑所有页面。

这是一个例子：[http ://www.davidjrush.com/blog/2009/08/php-header-and-footer-templates/](http://www.davidjrush.com/blog/2009/08/php-header-and-footer-templates/)

# c# - C# WebBrowser 控件拦截从 PHP 脚本在新窗口中下载

> ID：12909441
> 
> 赞同：2
> 
> 时间：2012-10-16T07:21:00.627
> 
> 标签：c#, download, browser, controls

我正在尝试自动与单击按钮时以 CSV 格式重新运行数据的网站进行交互。我正在使用带有 C#.net 的 WebBrowser 控件我可以使用 HtmlElement 对象单击网页上的按钮。我的 HtmlElement 对象称为 HtmlEl。我调用单击按钮： HtmlEl.InvokeMember("click"); 这将导致一个新的 IE 窗口打开，然后显示下载对话框。我一直在尝试找到一种方法来控制此下载，以便它可以自动化，但运气不佳。我找到了一些方法，如果我有一个下载的 URL 链接就可以完成，但这没有任何链接。我从一个单独的 PHP 页面收到一个 CSV 结果，该页面由我按下的按钮调用。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-08T18:40:31.640

查看 webbrowser 控件中的 NewWindow 事件。这将使您能够通过下载对话框访问窗口的 DOM。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.newwindow(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.newwindow(v=vs.110).aspx)

# android - 如果设备启动，我的应用后台进程将停止

> ID：12909442
> 
> 赞同：4
> 
> 时间：2012-10-16T07:21:02.593
> 
> 标签：android, notifications

我的应用程序后台进程在设备重新启动时停止。在设备启动后如何使其始终运行。因为我的通知没有在设备启动时显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:26:34.883

你必须使用广播接收器。并在此类中调用您的流程。在你的清单中，

```
<receiver android:name=".BroadCastClass">
  <intent-filter>
    <action android:name="android.intent.action.BOOT_COMPLETED" />
  </intent-filter>
</receiver> 
```

并添加使用权限。

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:30:58.870

用于操作您的应用程序的示例代码`onBoot`-

```
public class OnBootReceiver extends BroadcastReceiver 
{
   @Override
   public void onReceive(Context context, Intent intent) {
      Log.d("OnBootReceiver", "Hi, Mom!");
   }
} 
```

添加以下`onBoot`服务权限 -

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

而且，在您的清单文件中，您必须添加`OnBootReceiver`用于注册它的类，如下所示 -

```
<receiver android:name=".OnBootReceiver">
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
</receiver> 
```

[GitHub 上](https://github.com/commonsguy/cw-omnibus/tree/master/SystemEvents/OnBoot)提供的[Commonsware](https://stackoverflow.com/users/115145/commonsware)的完美示例

# c# - 内存分析

> ID：12909443
> 
> 赞同：0
> 
> 时间：2012-10-16T07:21:04.200
> 
> 标签：c#, memory-leaks, dottrace

我正在使用 dotTrace Memory 试图找出应用程序泄漏内存的原因。

问题是快照中显示的内存使用情况并没有接近使用的内存（perfmon 中的私有工作集）。

我是否错误地配置了 dotTrace，或者这是否意味着额外的内存来自 dotTrace 无法跟踪的非托管资源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T11:48:03.493

这可能是由几个原因造成的：

*   dotTrace Memory 不适用于本机内存，它仅支持托管内存分析，

*   不跟踪程序集使用的内存，

*   GC 回收内存，但它没有被记录为空闲。

# vb.net - 什么是自动实现的字段

> ID：12909444
> 
> 赞同：0
> 
> 时间：2012-10-16T07:21:08.307
> 
> 标签：vb.net, visual-studio, visual-studio-express

我有一个`Class`包含以下内容的vb `Property`：

`Public Property Buses As Integer`

这是否相当于更详细的属性？

编译器是否真的在后台将这行代码转换为`Property`包含字段的更详细的结构`_Buses`？

`_Buses`因此，只要我使用该结构而不实际声明，`Public Property x AS y`那么这些字段之一将可用？

* * *

**编辑**
实际上不太确定是否可以添加比[MSDN 上的 HERE更多的内容](http://msdn.microsoft.com/en-us/library/dd293589.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:30:31.837

### 简短的答案

**问：**编译器是否真的在后台将这行代码转换为包含字段的更详细的 Property 结构`_Buses`？
**答：**是的

**问：**没有实际声明`_Buses`，只要我使用结构 Public Property x AS y 那么这些字段之一将可用？
**答：**是的

* * *

### 解释（长答案）

自动实现的属性通常是您没有为属性的`Get`和`Set`部分明确指定代码的属性。自动实现属性的一般定义如下：

```
Public Property Age As Integer 
```

或者

```
Public Property Age As Integer = 5 
```

在这两种情况下，编译器都会自动为您生成所有支持字段和初始化程序。

考虑以下具有两个自动实现的属性 (`Name`和`Age`) 和一个常规属性 ( `Address`) 的类。

```
Public Class Person

    Dim _address As String

    Public Sub New()
        _address = "4, Hutchinson Road"
    End Sub    

    Public Property Name As String
    Public Property Age As Integer = 3
    Public Property Address As String
        Get
            Return _address
        End Get
        Set(value As String)
            _address = value
        End Set
    End Property

    Public Overrides Function ToString() As String
        Return _Name & " Age: " & Me.Age.ToString()
    End Function
End Class 
```

编译器自动为和属性生成支持字段以及`Get`和`Set`方法。生成的字段与前面带有下划线的属性名称相同。因此，属性的支持字段是，属性的​​支持字段是。`Name``Age``Name``_Name``Age``_Age`

自动生成的字段还附加了`DebuggerBrowsable(DebuggerBrowsableState.Never)`和属性。`CompilerGenerated`

这些`DebuggerBrowsable`属性可防止该字段显示在代码编辑器的“自动完成”列表中。但是，这并不妨碍您直接在代码中访问该字段，正如您`ToString`在我直接使用该`_Name`字段的方法中看到的那样。
该`CompilerGenerated`属性表明该字段是由编译器创建的。

该`Age`属性（以及所有带有初始化程序的自动实现的属性）在类的默认构造函数中进行初始化。

上述类的反编译版本如下所示：

```
Public Class Person
    ' Methods
    Public Sub New()
        Me.Age = 3
        Me._address = "4, Hutchinson Road"
    End Sub

    Public Overrides Function ToString() As String
        Return String.Join(" ", New String() { Me._Name, Me.Age.ToString })
    End Function

    ' Properties
    Public Property Address As String
        Get
            Return Me._address
        End Get
        Set(ByVal value As String)
            Me._address = value
        End Set
    End Property

    Public Property Age As Integer
        <DebuggerNonUserCode> _
        Get
            Return Me._Age
        End Get
        <DebuggerNonUserCode> _
        Set(ByVal AutoPropertyValue As Integer)
            Me._Age = AutoPropertyValue
        End Set
    End Property

    Public Property Name As String
        <DebuggerNonUserCode> _
        Get
            Return Me._Name
        End Get
        <DebuggerNonUserCode> _
        Set(ByVal AutoPropertyValue As String)
            Me._Name = AutoPropertyValue
        End Set
    End Property

    ' Fields
    Private _address As String
    <CompilerGenerated, DebuggerBrowsable(DebuggerBrowsableState.Never)> _
    Private _Age As Integer
    <DebuggerBrowsable(DebuggerBrowsableState.Never), CompilerGenerated> _
    Private _Name As String
End Class 
```

如您所见，这些字段`_Name`和`_Age`是自动为您生成的，因此您可以在代码中使用它们而不会出现任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:57:27.440

好吧，回答：是的，在内部这被转换为一个完整的属性部分。您甚至可以`_Buses`在您的代码中访问。

但是你也应该最好地设置一个默认值（虽然不是强制性的）：

```
Public Property Buses As Integer = 0 
```

使用这种简短语法的缺点是您无法在其期间对值执行验证`Set()`（您当然可以在需要使用该值时执行此操作，但这种或部分违背了使用属性的目的）。如果您正在构建用户控件，您可能会在 上执行`Invalidate`诸如此类的操作`Set()`，因此尽管在眼睛（和手指）上更容易，但通常最好使用完整部分恕我直言。

# java - 在 Java 中返回通用对象（例如列表）的更简洁的解决方案

> ID：12909447
> 
> 赞同：3
> 
> 时间：2012-10-16T07:21:11.953
> 
> 标签：java, generics, jpa, casting

我正在使用 JPA API（由 Hibernate 支持），并具有以下代码：

```
public List<?> getGenericListing(Class<?> clazz) {
    //Other logic comes before...
    Query qry = entityManager.createNativeQuery(sql, clazz);
    return qry.getResultList(); //Returns an untyped list, part of JPA spec
}

public List<SpecificObject> getSpecificListing() {
    return (List<SpecificObject>) getGenericListing(SpecificObject.class);
} 
```

`List<?>`除了针对特定对象列表进行类型转换之外，有没有更好的方法来返回它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T07:23:31.610

您可以将演员表放入`getGenericListing`：

```
public <T> List<T> getGenericListing(Class<T> clazz) {
    //Other logic comes before...
    Query qry = entityManager.createNativeQuery(sql, clazz);
    return (List<T>) qry.getResultList(); //Returns an untyped list, part of JPA spec
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T08:04:33.103

你的sql的性质是什么？如果您不需要动态查询功能，那么您可以使用此解决方案：

```
public <T> List<T> getGenericListing(Class<T> clazz) {
    //Other logic comes before...
    TypedQuery<T> qry = entityManager.createNamedQuery(sql, clazz);
    return qry.getResultList();
} 
```

其中 'sql' 是 NamedNativeQuery 的名称，例如声明为

```
@NamedNativeQuery( 
    name="sql_name", 
    query="SELECT * " + 
          "FROM foo_table t " + 
          "WHERE t.foo_field = ? ", 
    resultClass=fooEntityClass.class 
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-19T10:11:28.690

这里不需要转换结果，namedQueryName 只是命名查询的名称。

```
public <T> List<T> getGenericListing(final String namedQueryName,Class<T> clazz) {
      TypedQuery<T> qry = em.createNamedQuery(namedQueryName, clazz);
      return qry.getResultList(); 
} 
```

此外，我更喜欢使用 xml 来存储命名查询而不是 java 类中的字符串 - 它更易于维护，因此我的 persistence.xml 具有：

```
 <mapping-file>META-INF/Finders.xml</mapping-file> 
```

按照这种方法，您可以在不编译项目的情况下更改查询，我认为这很有帮助，摘自 Finder.xml

```
<named-query name="Country.findCountryByShortNameAndLocale">
    <query>
        SELECT c FROM Country c WHERE c.Country.shortName = :shortName AND c.language.locale = :locale
    </query>
</named-query> 
```

# javascript - 动态选择框在js中动态添加和删除其选项

> ID：12909448
> 
> 赞同：2
> 
> 时间：2012-10-16T07:21:12.597
> 
> 标签：javascript, dom, html-select

我有一个点击按钮，我正在用 4 个选项动态创建一个选择框，第一个选项将是“选择值”，其余的是“aaa”，“bbb”，“ccc”现在我需要的是，当我在选择框中选择 aaa 作为选项时，现在当我单击按钮时，我将获得第二个选择框，但 aaa 选项不应该存在，并且当我将第一个选择选项从 aaa 更改为 bbb 时aaa 选项应再次出现在选择框中。其余同上。请为此提供解决方案。任何帮助，将不胜感激。

```
<button id="addIdButton" style="display:block;" onclick="addId()">clickMe</button>
<div id="place"></div>
<script>
    function addId() {
        var location = document.getElementById("place"); 
        var div = document.createElement("div");
        var span = document.createElement("span");
        var select = document.createElement("select");
        select.setAttribute("id","selectID" );
        select.setAttribute("onchange","hideId(this.value,'selectID','option0','option1')" );
        var option0 = document.createElement("option");
        option0.setAttribute("id","option0" );
        option0.innerHTML="select";
        select.appendChild(option0);
        var option1 = document.createElement("option");
        option1.setAttribute("id","option1" );
        option1.innerHTML="aaaa";
        select.appendChild(option1);
        var option2 = document.createElement("option");
        option2.innerHTML="bbbb";
        select.appendChild(option2);
        var option3 = document.createElement("option");
        option3.innerHTML="cccc";
        select.appendChild(option3);
        span.appendChild(select);
        div.appendChild(span);
        location.appendChild(div);
    }    
</script> 
```

我真的不明白该怎么做并检查所有条件。以上是创建代码，请帮忙删除代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:57:06.210

你可以这样做。我对*addId*做了一些修改并写了*hideId*

```
var select_count = 0;

function hideId()
{
    var selectedIndexes = [];
    for(var i=0; i<select_count; i++)
    {
        var select = document.getElementById("select-" + i);

        for(var j=0; j<select.options.length; j++)
        {
            select.options[j].disabled = false;
        }

        for(var j=0; j<selectedIndexes.length; j++)
        {
            var index = selectedIndexes[j];
            select.options[index].disabled = true;

            if(select.selectedIndex == index)
            {
                select.selectedIndex = 0;
            }
        }

        selectedIndexes.push(select.selectedIndex);
    }
}

function addId() {
    var location = document.getElementById("place"); 
    var div = document.createElement("div");
    var span = document.createElement("span");
    var select = document.createElement("select");

    select.setAttribute("id","select-" + select_count );
    select_count++;

    select.setAttribute("onchange","hideId()");
    var option0 = document.createElement("option");
    option0.setAttribute("id","option0" );
    option0.innerHTML="select";
    select.appendChild(option0);
    var option1 = document.createElement("option");
    option1.setAttribute("id","option1" );
    option1.innerHTML="aaaa";
    select.appendChild(option1);
    var option2 = document.createElement("option");
    option2.innerHTML="bbbb";
    select.appendChild(option2);
    var option3 = document.createElement("option");
    option3.innerHTML="cccc";
    select.appendChild(option3);
    span.appendChild(select);
    div.appendChild(span);
    location.appendChild(div);

    if(select_count > 0)
        hideId();
} 
```

**更新：**

如果你需要它来处理 n 个元素，你可以这样做。要添加更多元素，只需将它们添加到 select_values。此外，我已经修改*了 hideId*，因此它不会隐藏第一个值（“select”）。

```
var select_count = 0;
var select_values = ["select", "aaa", "bbb", "ccc", "ddd", "eee"];

function hideId()
{
    var selectedIndexes = [];
    for(var i=0; i<select_count; i++)
    {
        var select = document.getElementById("select-" + i);

        for(var j=0; j<select.options.length; j++)
        {
            select.options[j].disabled = false;
        }

        for(var j=0; j<selectedIndexes.length; j++)
        {
            var index = selectedIndexes[j];

            select.options[index].disabled = true;

            if(select.selectedIndex == index)
            {
                select.selectedIndex = 0;
            }
        }

        if(select.selectedIndex != 0)
            selectedIndexes.push(select.selectedIndex);
    }
}

function addOption(select, id, value)
{
    var option1 = document.createElement("option");
    option1.setAttribute("id", id);
    option1.innerHTML = value;
    select.appendChild(option1);
}

function addId()
{
    var location = document.getElementById("place"); 
    var div = document.createElement("div");
    var span = document.createElement("span");
    var select = document.createElement("select");

    select.setAttribute("id","select-" + select_count );
    select_count++;

    select.setAttribute("onchange","hideId()");

    for(var i=0; i<select_values.length; i++)
        addOption(select, "option" + i, select_values[i]);

    span.appendChild(select);
    div.appendChild(span);
    location.appendChild(div);

    if(select_count > 0)
        hideId();
} 
```

**更新 2：**

要以任何顺序工作（不仅仅是从倒置），请使用以下*hideId()*版本：

```
function hideId()
{
    var selectedIndexes = [];

    for(var i=0; i<select_count; i++)
    {
        var select = document.getElementById("select-" + i);

        for(var j=0; j<select.options.length; j++)
        {
            select.options[j].disabled = false;
        }

        if(select.selectedIndex != 0)
            selectedIndexes.push({ index: select.selectedIndex, select: select });
    }

    for(var i=0; i<select_count; i++)
    {
        var select = document.getElementById("select-" + i);

        for(var j=0; j<selectedIndexes.length; j++)
        {
            var selected = selectedIndexes[j];

            if(selected.select != select)
            {
                select.options[selected.index].disabled = true;

                if(select.selectedIndex == selected.index)
                    select.selectedIndex = 0;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:51:28.710

您不需要创建新元素。您可以显示/隐藏它。这样，您将有一个优势，即如果客户端的浏览器不支持 JavaScript，该表单将保持可用。尝试这样的事情：

```
<select id="s1">
    <option>select value</option>
    <option>aaaa</option>
    <option>bbbb</option>
    <option>cccc</option>
    <option>dddd</option>
</select>
<select id="s2">
    <option>select value</option>
    <option>aaaa</option>
    <option>bbbb</option>
    <option>cccc</option>
    <option>dddd</option>
</select>
<button type="button" id="b1">press me</button>
<script>
(function(){
    var s1 = document.getElementById('s1');
    var s2 = document.getElementById('s2');
    s2.style.display = 'none';
    document.getElementById('b1').onclick = function(){
        s2.style.display = '';
    }
    s1.onchange = function(){     
        for(var i = 0; i < s2.options.length;i++)
        {
            s2.options[i].style.display = '';
            if(s1.selectedIndex && (i == s1.selectedIndex))
            {
                s2.options[i].style.display = 'none';
            }
        }
    }
})();
</script> 
```

这是一个[例子](http://jsfiddle.net/mYMXv/1/)。

# android - android：Http post总是将登录页面作为响应

> ID：12909454
> 
> 赞同：0
> 
> 时间：2012-10-16T07:21:24.063
> 
> 标签：android, apache, post, http-post

嗨，我对此感到厌烦和厌倦，无法在网上找到任何解决方案，所以这是我的问题。我正在使用 Apache HTTP 帖子登录网站。提供我的凭据。但是无论我从网络上使用什么代码片段，无论我做什么，它总是会再次返回我的登录页面作为响应。这是我的代码，请提供解决方案。

```
HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(url);

        try {
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("username", "xxx"));
            nameValuePairs.add(new BasicNameValuePair("password", "xxx"));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            HttpResponse response = httpclient.execute(httppost);

            Log.i("Response num:", "" + response.getStatusLine().toString());

            Log.i("response page:", "" + responseHandler(response));

            Log.i("Headers:", "" + response.getHeaders("Location").toString());

        } catch (ClientProtocolException e) {

        } catch (IOException e) {

        } 
```

php脚本是：

```
<?php  

session_start();

include('Connectdb.php');

$result = mysql_query("SELECT * FROM user_accounts where username ='".$_POST["username"]."' AND password ='".$_POST["password"]."'");

if($row = mysql_fetch_array($result))

  {

   $_SESSION['Suserid']=$row['hospital_id'];

 // mysql_close($con);

  if ($row['acc_type']=="patient"){
$_SESSION['verifiedUserType']="patient";

 header('Location:./home_P.php');
 }

 else

 if ($row['acc_type']=="admin"){

     $_SESSION['verifiedUserType']="admin";

 header('Location:./home_admin.php');}
 else
 if ($row['acc_type']=="doctor"){

     $_SESSION['verifiedUserType']="doctor";

 header('Location:./home_doc.php');}

 exit;

  }

else

{

mysql_close($con);

//session_start();

 header('Location:./index.php?failed=1');

}

?> 
```

如何在登录后获取页面并在用户登录后通过获取 cookie 来维护会话？ps 即使我输入错误的用户名或密码，我也会得到 http 1.1 200 OK 状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:41:18.480

您需要在应用程序中实现响应处理。这是我的第一个应用程序的登录凭据片段，它与您的非常相似，并且对我有用。

```
 case R.id.login_login_but:
        Toast.makeText(this, "Logging in...", Toast.LENGTH_SHORT).show();

        ArrayList<NameValuePair> postLogin = new ArrayList<NameValuePair>();
        postLogin.add(new BasicNameValuePair("post_user", "User"));
        postLogin.add(new BasicNameValuePair("post_pass", "Pass));

        try {
            String response = null;
            response = CustomHttpClient.executeHttpPost(
                    "http://giveaway.synamegames.com/appfiles/login.php", postLogin);
            String res = response.toString();
            res = res.replaceAll("\\s+", "");

            if (res.equals(1)) {
            // logged in
            } else {
            // incorrect user or password
            }

        } catch (Exception e) {
            Toast.makeText(this, "Server timeout please try again later. You must have internet.", Toast.LENGTH_SHORT).show();
        }
    break; 
```

而我使用的 PHP 脚本是...

```
<?php
$username=$_POST['post_user'];
$password=$_POST['post_pass'];
$user = 'db_user';
$pswd = 'db_password';
$db = 'db_name';
$server = 'www.domain.com';
$conn = mysql_connect($server, $user, $pswd);
mysql_select_db($db, $conn);
$query=mysql_query("SELECT * FROM users  WHERE  pass =('$password') AND user = $username")or die(mysql_error());

if(mysql_num_rows($query)==1) {
echo 1;
} else {
echo 0;
}
mysql_close($conn);
?> 
```

PS。如果它有效，请标记为正确:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:32:48.853

建立连接后，设置一些条件来检查名称和密码是否为 null 。

```
if(users != null && password != null){
            try{
                // send the name and password along with the url
                                // and authenticate the values.

            }catch (JSONException e) {
                e.printStackTrace();
            }
        } 
```

如果已经登录，那么下次此条件将自动验证并打开第二页..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T07:38:44.763

您可以从您的登录请求中获取 cookie 列表，如下所示：

```
List<Cookie> cookies = httpclient.getCookieStore().getCookies(); 
```

并使用请求发送正确的 cookie：

```
CookieStore store = new BasicCookieStore();
store.addCookie(yourCookie);
httpclient.setCookieStore(store); 
```

* * *

我建议您使用 md5 将您的密码存储在数据库中。您永远不应该以明文形式保存密码。也许它是 md5，这就是它不起作用的原因？

# haskell - Haskell，如何在函数中打印值和返回

> ID：12909456
> 
> 赞同：4
> 
> 时间：2012-10-16T07:21:27.850
> 
> 标签：haskell, iteration

我尝试编写带有数组并对其进行迭代的自定义函数，我需要打印每个数字并递归启动相同的函数，但出现错误

> 解析输入“主”错误

代码：

```
firstitem n = if n /= [] n firstitem( tail n )

main = do
    print(firstitem [1,2,3]) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T07:37:25.560

您的第一个问题是您的`if`语句语法错误。你应该写

```
firstItem n = if {- condition-}
    then {- do this -}
    else {- do that -} 
```

其次，不清楚该功能`firstItem`应该做什么。听起来它应该返回列表的第一项，但是您的描述看起来好像您想要遍历列表的所有元素。

您可以将迭代和打印组合成一个函数，如下所示：

```
printAll xs = if null xs        -- If the list is empty
    then return ()              -- then we're done, so we quit.
    else do print (head xs)     -- Otherwise, print the first element
            printAll (tail xs)  -- then print all the other elements.

main = printAll [1,2,3] 
```

如果列表为空，该函数`null`返回`True`，否则返回`False`。您可以将语句`return ()`想象为“没有什么要处理的，所以现在停止函数并且不返回任何结果”。第三行和第四行包含一个“do 块”。do 块基本上是一种胶水，将两个动作绑定在一起`print (head xs)`，`printAll (tail xs)`形成一个动作。您可以用花括号编写它以使其更清晰：

```
do {
  print (head xs);
  printAll (tail xs)
} 
```

尽管您实际上并不需要它们-缩进指定了您的意思。

这解决了你的问题，但它有点笨拙。毕竟，Haskell 应该是一门漂亮的语言——所以让我们让你的代码更漂亮吧！最好使用模式匹配将列表分成头部和尾部：

```
printAll []     = return ()
printAll (x:xs) = do print x
                     printAll xs 
```

那好多了。但它可以更加模块化。嘿，也许我们可以创建一个通用函数，将动作作为输入，并对列表的每个元素执行该动作：

```
repeatedly f []     = return ()
repeatedly f (x:xs) = do f x
                         repeatedly f xs

printAll xs = repeatedly print xs 
```

那很整齐。但实际上，已经有一个函数可以做到这一点。它被称为`mapM_`（它被称为这个是有充分理由的，但我现在不会进入它）并且它在`Control.Monad`模块中：

```
import Control.Monad

printAll xs = mapM_ print xs 
```

实际上，您可以省略`xs`参数，编译器可以推断它应该存在：

```
printAll = mapM_ print 
```

最后，你的代码很漂亮。希望有点帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:29:29.267

在 Haskell 中，`if`总是需要有一个`else`分支。您还缺少 a `then`，即您需要某种形式的东西`if CONDITION then TRUE_VAL else FALSE_VAL`。

`if`您可以通过使用模式匹配来完全避免这种情况。

要在执行期间打印出进度，您可以使用[`Writer`monad](http://learnyouahaskell.com/for-a-few-monads-more)。

# jquery - 表单提交（）上的访问被拒绝

> ID：12909461
> 
> 赞同：4
> 
> 时间：2012-10-16T07:21:45.407
> 
> 标签：jquery, forms, internet-explorer

我使用 jquery 表单插件（http://jquery.malsup.com/form），在 IE 8 和 9 上它不起作用。IE 拒绝访问`form.submit();`作者页面上的示例是可以的，我不是。我需要为 IE 进行额外配置吗？

```
$(parent + ' form').ajaxForm({
    success: function(data) {
        $("#cont").html(data);
    },
    beforeSubmit: function(arr, f, o) {
        o.dataType = "html";
    },
    iframeSrc: urlTab['upload']
}); 
```

这不是服务器问题，请不要提出请求。没有跨域等常见问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:59:44.710

这是[小提琴](http://jsfiddle.net/KvXK4/1/)。简单的表单提交。它适用于 IE 7、8 和 9。由于 jsFiddle 上不存在 test.html，因此流程转到错误函数。但是在 IE 上发生了 No access denied 错误。

我正在使用`form.submit();`它工作正常。

我有你的问题

这是一个链接，可解决您[在尝试访问以编程方式创建的文档对象（仅限 IE）时出现“访问被拒绝”JavaScript 错误的问题](https://stackoverflow.com/questions/1886547/access-is-denied-javascript-error-when-trying-to-access-the-document-object-of)

您可以通过添加此代码查看表单插件日志。

```
$.fn.ajaxSubmit.debug = true; 
```

这是完整的代码

```
$.fn.ajaxSubmit.debug = true;

$(document).ajaxError(function(ev,xhr,o,err) {
    alert(err);
    if (window.console && window.console.log) console.log(err);
});

$('form').ajaxForm({
    dataType:'html',
    iframe:true,
    iframeSrc : "javascript:'<html><body><p>Hello<\/p><script>do things;<\/script>'",
    success: function(data) {

    },
    beforeSubmit: function(arr, f, o) {

    },
    error: function(responseText){
        alert(responseText.status+'  ::  '+responseText.statusText);
    }
});
$('#submitBtn').click(function(){
    $('form').submit();
}); 
```

# ios - 将 NSString 的子字符串更改为粗体

> ID：12909462
> 
> 赞同：0
> 
> 时间：2012-10-16T07:21:51.983
> 
> 标签：ios, objective-c, nsattributedstring

我有一个`NSString`, 包含标签`[strong][\strong]`。在这个标签中，这个词必须是**粗体**才能显示在a中`UITextView`，然后在格式化单词后删除所有容器标签，我不能使用`UIWebView`。我想我必须使用`attributedString`s，但我不确定如何实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:51:43.733

`UITextView`您可以使用高级`UILabel`的而不是使用[OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel)或[CoreTextAttributedLabel](https://github.com/umerh/CoreTextAttributedLabel)。下载样本，它很好，很干净。您可以更改字符串部分的颜色、字体、大小、下划线以及几乎所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:51:43.157

**对于 iOS 6.0**

属性字符串会帮助你！

```
NSString* string = @"[strong]yourString[/strong]";
string = [string stringByReplacingOccurrencesOfString:@"[strong]" withString:@""]
string = [string stringByReplacingOccurrencesOfString:@"[\strong]" withString:@""];
UIFont *font = [UIFont fontWithName:@"Helvetica-Bold" size:30.0f];
NSMutableAttributedString * attrString = [[NSMutableAttributedString alloc] initWithString:string];
[attrString addAttribute:NSFontAttributeName value:fontName range:NSMakeRange(0, _stringLength)]; 
```

确保将标签文本设置为属性。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T07:41:33.290

```
if([[yourString substringToIndex:8] isEqual:@"[strong]")
{
NSString *newString = [yourString substringFromIndex:8];
NSString *newerString = [newString substringToIndex:[newString length]-9];

//Insert to label and change label format to bold.

} 
```

# php - php mktime() 和/或 php date() 的问题 - 1901 年之前的几年 - 64 位

> ID：12909463
> 
> 赞同：1
> 
> 时间：2012-10-16T07:21:54.437
> 
> 标签：php, date, 64-bit, mktime

我知道 php mktime()、32 位系统和年份 <1901 或 >2038 存在问题，但是，我的问题是，如果在 64 位系统上运行，这个问题是否仍然存在？

[我使用了这里](https://stackoverflow.com/questions/8891304/how-to-find-out-if-a-shared-hosting-is-running-32-or-64-bit-with-php)提到的代码并确定我的主机运行的是 64 位系统。

我从以下格式的用户输入中收集日期：

$m = 用户选择的月份（2 位数）；$d = 用户选择的日期（2 位数）；$y = 用户选择的年份（4 位数字）

这是我用来将输入日期转换为 unix 时间戳的代码：

```
$npt_date=mktime(0,0,0,$m,$d,$y); 
```

然后代码以基本格式 xx-xx-xxxx 重新显示日期

```
$date_str=date('m-d-Y',$npt_date); 
```

该代码适用于日期 > 1901，但是，当 $y < 1901 时，date() 函数的输出返回不正确的日期。

任何关于我做错了什么的建议，如果这甚至可以使用 mktime() 和 date() 函数和/或可能的解决方法，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:26:07.777

开始使用[`DateTime`](http://www.php.net/manual/en/class.datetime.php). 只是到1000年的有限的backwords。
而且在未来到2038年也是有限的，而未来`time()`也不会有问题。 这是[有关该主题的一些阅读材料](http://code.openark.org/blog/mysql/timestamp-vs-datetime-which-should-i-be-using)。`date()``DateTime`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:33:57.200

据推测，如果您要存储较新的日期，您将永远不需要超过 256 个可能的年份值，这恰好适合一个字节。这为您节省了大量空间：与其使用多个字节来存储整数 1901（在许多情况下可以认为其中的 1900 年是多余的），MySQL 在内部将其仅视为数字 1，并将其显示为 1901 以使您受益。

如果您需要更多年，请使用基于 INT 的类型。

另请参阅此[MySQL 是否支持历史日期（如 1200）？](https://stackoverflow.com/questions/2487543/does-mysql-support-historical-date-like-1200)

# jsf - 如何放弃 PrimeFaces Dialog 的透明度？

> ID：12909471
> 
> 赞同：5
> 
> 时间：2012-10-16T07:22:24.377
> 
> 标签：jsf, mobile, jsf-2, dialog, primefaces

我正在尝试在我的 JSF 页面中使用**Primefaces Dialog**组件显示警报。我可以显示对话框，但我的问题在于该对话框的透明度/不透明度。我已经通过设置覆盖了对话框的样式属性`opacity: 1.0`，但它不起作用。我想放弃对话框的透明度。我怎样才能以简单的方式实现这一目标？

我的 JSF 页面：

```
<f:view xmlns="http://www.w3.org/1999/xhtml"
....
renderKitId="PRIMEFACES_MOBILE">
....
<pm:page title="Mobile Reports">
<pm:view id="reports" swatch="b">
<h:form>
<pm:content>
<div>
<h:form>
    ....
    <p:dialog id="myDialog"
        header="ERROR"
        widgetVar="dlg"
        modal="true"
        style="opacity: 1.0;"
        appendToBody="true">
        <p:commandButton id="decline" value="Couldn't display the report!"
            onclick="dlg.hide()" type="button" />
    </p:dialog>
    ....
    <p:commandButton id="contractInfo" action="ContractInfo.xhtml"
        value="Contract Information" style="width:100%;"
        onerror="dlg.show();">
    </p:commandButton>
    ....
</h:form>
</div>
</pm:content>
</h:form>
</pm:view>
</pm:page>
</f:view> 
```

输出：

![在此处输入图像描述](../Images/7d77cc85dc369bc1a51bd29e55c17979.png)

GPRS 显示在 JSF 页面中，它不是对话框的一部分。但是，它是可见的，因为对话框是透明的。

**注意：** 我使用的是**primefaces-mobile-0.9.3.jar**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T07:47:50.790

我已经尝试在我的 JSF 页面中覆盖对话框组件的 css 样式（备注**!important**表达式）：

```
<p:dialog id="myDialog" header="ERROR" widgetVar="dlg" modal="true"
        style="background: gray !important;" appendToBody="true">
        <p:commandButton id="decline" value="Couldn't display the report!"
            onclick="dlg.hide()" type="button" />
</p:dialog> 
```

不知何故，现在对话框更好了，它看起来像：

![在此处输入图像描述](../Images/4d845dc6aa4b664c3c04996d49805a50.png)

但是，在我的项目中覆盖 PrimeFaces 库的一般样式表可能会帮助我更多地自定义对话框。

我的动态 Web 项目中样式表的路径：**WebContent/assets/css/style.css** 这可以作为面临类似问题的人的参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:52:50.693

提供自定义主题时，您应该创建一个主题文件。PrimeFaces 的默认主题是 Aristo。有关如何创建自定义主题的更多信息，请参阅[PrimeFaces 指南](http://primefaces.googlecode.com/files/primefaces_users_guide_3_3.pdf)或[移动 PrimeFaces 指南](http://primefaces.googlecode.com/files/primefaces_mobile_users_guide_0_9_3.pdf)。

但是，如果您不想创建完整的主题，则应用默认主题。要覆盖应用主题中的样式，您需要使用`!important`. （不过，您已经发现了这一点。）

我使用的一个有用的工具是 FireBug。FireBug 显示哪些 CSS 规则应用于元素以及哪些规则被覆盖。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-02T21:38:46.370

对于遇到此问题的每个人，我只是找到了一个解决方案：

```
<p:dialog header="Header" widgetVar="dlg1" showEffect="pop"
            styleClass="ui-page-theme-a ui-bar-inherit"> 
```

将primefaces继承类添加到对话框中，它会默认出现。

# algorithm - 二分搜索性能分析

> ID：12909483
> 
> 赞同：0
> 
> 时间：2012-10-16T07:23:26.543
> 
> 标签：algorithm, search, binary-tree

鉴于二叉搜索算法的比较树的叶子都在相同或相邻的级别上，我们可以说在搜索 n 项列表中所做的键的比较`log(n)`在最坏情况下的上限是加 1，并且是`log(n) + 1`在一般情况下？

我从一本书上看到说它大约`log(n) + 1`是最坏和`log(n)`平均的，我认为当给定n时最坏的情况是固定的，所以不需要给出一个近似值，平均值应该加一。

代码如下：

```
Error_code recursive_binary_1(const Ordered_list &the_list, const Key &target, int bottom, int top, int &position)
{
 Record data;
 if(bottom < top) {
   int mid = (bottom + top)/2;
   the_list.retrieve(mid, data);
   if(data < target)
     return recursive_binary_1(the_list, target, mid + 1, top, position);
   else
     return recursive_binary_1(the_list, target, bottom, mid, position);
  }
  else if(top < bottom)
    return not_present;
  else {
    position = bottom;
    the_list.retrieve(bottom, data);
    if(data == target) return success;
    else return not_present;
  }
} 
```

如果我不是，请纠正我。

# c# - 从数据库构建树

> ID：12909487
> 
> 赞同：1
> 
> 时间：2012-10-16T07:23:55.343
> 
> 标签：c#, asp.net

我是 asp.net 的新手，我正在尝试从数据库中构建一个树视图来学习 asp.net，我从互联网上下载了一些代码并尝试运行它。但有一些错误，我真的不明白问题是什么

这是桌子

```
 CREATE TABLE [dbo].[node](
    [id] [int] NOT NULL,
    [title] [varchar](255) NULL,
    [parent_id] [int] NULL,
    [oid] [int] NULL,
    [display] [tinyint] NULL,
 CONSTRAINT [PK_note] PRIMARY KEY CLUSTERED 
(
    [id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

我添加了一些更改的代码

```
public partial class index : System.Web.UI.Page
{
    private static TreeView TreeView1 = new TreeView();

    protected void Page_Load(object sender, EventArgs e)
    {
        buildTree();
    }

    private void buildTree()
    {

        SqlConnection dbCon = new SqlConnection(ConfigurationManager.ConnectionStrings["earchConnectionString"].ConnectionString);
        dbCon.Open();
        string sql = "Select * from [node]";
        SqlDataAdapter adapter = new SqlDataAdapter(sql, dbCon);

        DataSet ds = new DataSet();

        adapter.Fill(ds);
        dbCon.Close();

        ds.Relations.Add("NodeRelation", ds.Tables[0].Columns["id"], ds.Tables[0].Columns["parent_id"]);
        foreach (DataRow dbRow in ds.Tables[0].Rows)
        {
            if (dbRow["parent_id"]=="0")
            {
                TreeNode newNode = CreateNode(dbRow["title"].ToString(), dbRow["id"].ToString(), true);
                TreeView1.Nodes.Add(newNode);
                PopulateSubTree(dbRow, newNode);

            }
        }
    }

    private void PopulateSubTree(DataRow dbRow, TreeNode node)
    {

        foreach (DataRow childRow in dbRow.GetChildRows("NodeRelation"))
        {
            TreeNode childNode = CreateNode(childRow["title"].ToString(), childRow["id"].ToString(), true);

            node.ChildNodes.Add(childNode);
            PopulateSubTree(childRow, childNode);
        }
    }

    //
    private TreeNode CreateNode(string text, string id, bool expanded)
    {
        TreeNode node = new TreeNode(); ;
        node.Text = text;
        node.Value = id;
        node.Expanded = true;
        return node;

    }
} 
```

错误：

```
This constraint cannot be enabled as not all values have corresponding parent values.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.ArgumentException: This constraint cannot be enabled as not all values have corresponding parent values.

Source Error: 

Line 32:         dbCon.Close();
Line 33: 
Line 34:         ds.Relations.Add("NodeRelation", ds.Tables[0].Columns["id"], ds.Tables[0].Columns["parent_id"]);
Line 35:         foreach (DataRow dbRow in ds.Tables[0].Rows)
Line 36:         {

Source File: c:\inetpub\web1\index.aspx.cs    Line: 34 

Stack Trace: 

[ArgumentException: This constraint cannot be enabled as not all values have corresponding parent values.]
   System.Data.ConstraintCollection.AddForeignKeyConstraint(ForeignKeyConstraint constraint) +1932628
   System.Data.ConstraintCollection.Add(Constraint constraint, Boolean addUniqueWhenAddingForeign) +468
   System.Data.DataSetRelationCollection.AddCore(DataRelation relation) +947
   System.Data.DataRelationCollection.Add(DataRelation relation) +169
   System.Data.DataRelationCollection.Add(String name, DataColumn parentColumn, DataColumn childColumn) +47
   index.buildTree() in c:\inetpub\web1\index.aspx.cs:34
   index.Page_Load(Object sender, EventArgs e) in c:\inetpub\web1\index.aspx.cs:17
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
   System.Web.UI.Control.OnLoad(EventArgs e) +91
   System.Web.UI.Control.LoadRecursive() +74
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207 
```

任何人都可以定义问题吗？我现在将 parent_id 更改为 null 可以（并且检查根不是 0 而不是 null），但最后，如何在网页中显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:35:39.460

问题是有些节点（第一级节点）没有父ID。当您尝试创建 de 关系时，内部代码默认创建一个 froeing 键。添加“false”作为第四个参数以避免这种情况。

```
ds.Relations.Add("NodeRelation", ds.Tables[0].Columns["id"],.Tables[0].Columns["parent_id"], false); 
```

PS：对不起我的英语，西班牙语

# android - Ormlite 在 4.0.3 (ICS) 上的性能

> ID：12909489
> 
> 赞同：0
> 
> 时间：2012-10-16T07:24:04.440
> 
> 标签：android, performance, android-4.0-ice-cream-sandwich, ormlite

我在 HTC Sensation 上体验了 android 2.3.4 和 4.0.3 之间的巨大性能差异。

一些附加信息：

*   ormlite 版本 4.42
*   为了获得 dao，我使用 DaoManager 和一个 dao 单例。
*   使用批处理任务插入
*   我正在尝试创建或更新 30 个对象（仅创建需要相同的时间）
*   这些是单个对象（没有关系），但具有长字符串字段。

时间日志：

ICS (4.0.3)

```
10-16 09:17:06.206: 1 getting dao
10-16 09:17:06.206: 2 got dao
10-16 09:17:06.206: 2 start call batch task
10-16 09:17:06.216: 3 start initializing batch_task
10-16 09:17:06.326: 121 finished initializing batchtask  
10-16 09:17:06.836: 623 end batch task 
```

2.3.4

```
10-16 09:20:00.355: 0 getting dao
10-16 09:20:00.355: 1 got dao
10-16 09:20:00.355: 1 start call batch task
10-16 09:20:00.355: 1 start initializing batch_task
10-16 09:20:00.435: 87 finished initializing batchtask  
10-16 09:20:00.445: 96 end batch task 
```

正如您在 ICS 上看到的那样，需要花费更多时间。

我应该怎么做才能在 ICS 上获得类似的性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T16:39:03.993

所以在评论中反复讨论之后，事实证明，Android ICS 中的性能差异可能是由于默认情况下，在该版本中，SQLite 可能以“TRUNCATE”日志模式运行。从[Sqlite 文档](http://www.sqlite.org/pragma.html)：

> TRUNCATE 日志模式通过将回滚日志截断为零长度而不是删除它来提交事务。在许多系统上，截断文件比删除文件要快得多，因为不需要更改包含目录。

相比之下，2.3.4 以[Write-Ahead-Logging](http://www.sqlite.org/wal.html) (WAL) 模式运行它。我猜 WAL 更快。

要更改[ORMLite](http://ormlite.com/)中的日志，您需要执行以下操作（我猜）：

```
someDao.rawExecute("PRAGMA journal_mode = WAL;"); 
```

有关更多示例，请参阅[Sqlite PRAGMA 文档](http://www.sqlite.org/pragma.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T06:39:39.577

最后，我找到了解决方案：

```
getHelper().getDao();
SQLiteDatabase db = getHelper().getWritableDatabase();
Cursor cursor = db.rawQuery("PRAGMA journal_mode = WAL;", null); 
```

只有这种方式有效。

此问题的其他附加信息：

*   我有 2 个 HTC Sensation，都更新到 ICS，所以更新到 4.0.3
*   但是软件编号不一样！！（3.33.401.53 和 3.33.401.6），并且设备上没有可用的更新（这很奇怪）。我真的不明白发生了什么，也许他们在构建之间更改了默认日记模式？

因此，如果您遇到缓慢的数据库功能，请检查 db 上的第一个日志模式。谢谢格雷，你的帮助。

# ruby-on-rails - 在 Ruby on rails Collection_select 中包含多列值。同时格式化日期

> ID：12909492
> 
> 赞同：1
> 
> 时间：2012-10-16T07:24:19.337
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

早些时候我正在使用此代码

```
<%= select "selected_payment", "id", @shifts.map {|u| [' ' +u.start_time.strftime("%I:%M %p") + '-' + u.end_time.strftime("%I:%M %p")+' ',u.id]} %>   to make a dropdown. 
```

现在我必须对 collection_select 做同样的事情。但我不知道该怎么做。它将类似于下面给出的：

```
<%= f.collection_select :shift_id, @shifts,:id, :start_time, :prompt => true %> 
```

我什至无法格式化日期并同时使用两个值。请帮助，在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T07:33:04.940

参考[这个](http://api.rubyonrails.org/v2.3.8/classes/ActionView/Helpers/FormOptionsHelper.html#M002297)在你的模型中，例如：-`Shift`

```
def start_end_time
 ' ' +self.start_time.strftime("%I:%M %p") + '-' + self.end_time.strftime("%I:%M %p")+' '
end 
```

在视图中

```
<%= f.collection_select :shift_id, @shifts,:id, :start_end_time, :prompt => true %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-16T21:33:30.100

我发现自己有同样的问题，我解决了这个问题......

在我的 user.rb

```
 def first_and_last_name    
    "#{self.first_name} " " #{self.last_name}"   
  end 
```

在我看来

```
<%= f.collection_select(:user_id, User.all, :id, :first_and_last_name, {}, class: 'ui search dropdown' ) %> 
```

# mysql - 在 ubuntu 上使用 rdfproc 将 .nt 文件导入 MYSQL

> ID：12909495
> 
> 赞同：1
> 
> 时间：2012-10-16T07:24:28.913
> 
> 标签：mysql, ubuntu, rdf

我正在尝试将从 dbpedia 下载的 .nt 文件导入到我的 mysql[中](http://wiki.dbpedia.org/Downloads38#dbpedia-ontology)。我正在使用 ubuntu 服务器，所以我运行以下命令来安装 rdfproc

*   apt-get 更新
*   apt-get 安装 redland-utils

现在，要导入我正在运行以下命令的文件：

```
rdfproc -n -s mysql -t "host='localhost',database='wikicats',user='root',password='abcd'" dbpedia parse category_labels_en.nt ntriples 
```

但是，我收到以下错误：

```
rdfproc: invalid argument `mysql' for `-s / --storage' 
```

所以我用命令检查了可用的存储

```
rdfproc --storage help 
```

我得到以下输出：

```
hashes      Indexed hashes
trees       Balanced trees
memory      In memory lists
file        Local file based store
uri         URI store (read-only) 
```

请建议我应该怎么做才能完成这个 .nt 文件导入到 mysql 数据库？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:24:14.687

这意味着 Redland 在没有 MySQL 支持的情况下编译。

[文档](http://librdf.org/docs/api/redland-storage-module-mysql.html)声明它仅在 MySQL 3 或 4 可用时编译。它没有说明 MySQL 5。

# android - 构建 AOSP 后无法启动模拟器

> ID：12909496
> 
> 赞同：5
> 
> 时间：2012-10-16T07:24:33.450
> 
> 标签：android, android-source

在 Ubuntu 10.0.4 上重建 Android 开源项目后，我无法运行“模拟器”。请查看以下错误详细信息，然后告诉我您是否知道如何操作。谢谢。

> 找不到命令“模拟器”，您的意思是：来自包“qemulator”（宇宙）模拟器的命令“qemulator”：找不到命令

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-07-11T23:11:23.687

后：

```
source build/envsetup.sh 
```

请尝试运行：

```
set_stuff_for_environment 
```

然后看看模拟器命令是否有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-16T18:48:40.613

`emulator`是一个二进制文件，应该位于`prebuilts/android-emulator/<platform>/`，例如`prebuilts/android-emulator/linux-x86_64/`。如前所述，该`lunch`命令会将此目录添加到您的`PATH`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T07:24:33.450

运行时模拟器被添加到当前路径

```
source build/envsetup.sh
lunch full-eng 
```

# ruby-on-rails - Rails 执行存储过程

> ID：12909504
> 
> 赞同：3
> 
> 时间：2012-10-16T07:24:56.483
> 
> 标签：ruby-on-rails, stored-procedures

我正在尝试从**rails console执行****oracle 存储过程**。使用以下代码

 **```
ActiveRecord::Base.connection.execute("execute change_name('shanison', 'shanison_test'); 
```

并不断收到以下错误

```
ActiveRecord::StatementInvalid: OCIError: ORA-00900: invalid SQL statement: execute si.change_name('shanison', 'shanison_test'); 
```

我尝试直接在**oracle sql developer**中运行查询，它运行良好，这意味着**我的存储过程很好**。

```
execute change_name('shanison', 'shanison_test'); 
```

我确实向我正在使用的 rails 的数据库用户授予了执行权限。我尝试在 Rails 2 和 3 下运行它，两者都不起作用并显示相同的错误消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T08:19:15.983

以下语句有效：

```
OracleTableBase.connection.execute("begin change_user_name('shanison', 'shanison_test');end;") 
```

尽管很多文档表明使用 exec 或 call 应该可以工作。[通过 Rails 调用存储过程？](https://stackoverflow.com/questions/4779400/calling-stored-procedure-through-rails)**

# android - 在 VideoView 中播放 Youtube 视频（在应用程序内）

> ID：12909515
> 
> 赞同：0
> 
> 时间：2012-10-16T07:25:36.633
> 
> 标签：android, youtube, android-videoview

从过去的 2-3 周开始，我正在寻找一种在 videoview 中播放 youtube 视频的方法，并且我尝试了几乎所有在 stackoverflow 中发布的方法。（几乎每一个......而且我必须告诉很多）。但似乎没有一个对我有用。

我什至也尝试过 android-youtube-player 但这对我不起作用。

**我的要求：** 在 VideoView 中播放 Youtube 视频，因为我不想打开 Youtube 应用程序（很多原因）

如果有人愿意分享一个工作代码，那将有很大的帮助。我几乎尝试了所有方法并且厌倦了编码。希望有人可以在这里帮助我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-29T08:15:04.950

如前所述，您可以使用打开[的](http://code.google.com/p/android-youtube-player/) **youtube player 播放 youtube 视频**。

我在[这里](https://docs.google.com/open?id=0B5DWvLxzcddHQmhKemxkaW93NTg)附上了工作样本。（驱动器是我想到的最佳解决方案，您可以按 ctrl+s 保存 rar 文件）。在那里你会发现两个项目。

1.  YouTubeTester - 我做过的示例应用
2.  OpenYouTubeActivity - 在[此处下载表单的 youtube 播放器](http://code.google.com/p/android-youtube-player/)

我已将 OpenYouTubeActivity 项目的 jar 文件包含到我的项目中，如果您愿意，可以将 OpenYouTubeActivity 项目作为项目的库引用（如果您将项目作为库引用，请确保删除 jar 文件。）。OpenYouTubeActivity 的下载源已更新为问题[列表中的提及](http://code.google.com/p/android-youtube-player/issues/detail?id=3)

```
VideoStream.java (Line: 30)
change: mUrl = lArgMap.get("url");
to:  mUrl = lArgMap.get("url") + "&signature=" + lArgMap.get("sig"); 
```

现在回到示例项目。

**清单文件**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.youtubetester"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
    <!--INTERNET and  ACCESS_WIFI_STATE permissions are required. -->
    <uses-permission android:name="android.permission.INTERNET" /> 
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".YouTubeTest"
            android:label="@string/title_activity_you_tube_test" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <!-- You should include following part orientation is your choice-->
        <activity
            android:name="com.keyes.youtube.OpenYouTubePlayerActivity"
            android:screenOrientation="landscape" >
        </activity>
    </application>

</manifest> 
```

**YouTubeTest 活动课**

```
package com.youtubetester;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

import com.keyes.youtube.OpenYouTubePlayerActivity;

public class YouTubeTest extends Activity {

    private Button button;
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_you_tube_test);
        button =(Button) findViewById(R.id.play);
        /*
         * The Youtube URL that we get is something like following.
         * http://www.youtube.com/watch?v=J467jzLlDcc
         * We need the last part of the URL or id of the video-J467jzLlDcc **/

        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent lVideoIntent = new Intent(null, Uri
                        .parse("ytv://"+"J467jzLlDcc"),
                        YouTubeTest.this,
                        OpenYouTubePlayerActivity.class);
                startActivity(lVideoIntent);
                /*
                 * Please note only the id has been passed and prefix is "ytv" NOT "ytpl"*/
            }
        });
    }

} 
```

**布局 - activity_you_tube_test.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/play"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world"
        tools:context=".YouTubeTest" />

</RelativeLayout> 
```

希望这会有所帮助。请询问您是否有任何问题。我对 OpenYouTubeActivity 项目没有深入了解，但我可以提供帮助。

# static-libraries - 如何在 Makefile.am 中包含从 D 源构建的静态库？

> ID：12909516
> 
> 赞同：1
> 
> 时间：2012-10-16T07:25:39.370
> 
> 标签：static-libraries, automake, d

我正在编写一个`libdog-dev`用于 D 语言编程的实用程序库，这里是`Makefile.am`：

```
sited2dir = /usr/include/d2/site
lib32dir = ${libdir}/i386-linux-gnu
# lib64dir = ${libdir}/x86_64-linux-gnu

lib32_LIBRARIES = \
    i386/libdog.a

# lib64_LIBRARIES = \
#     x86_64/libdog.a

i386/libdog.a:
    mkdir -p i386
    dmd -lib -m32 -of$@ -op -Hdi386/include/ `find src/ -name '*.d'`

x86_64/libdog.a:
    mkdir -p x86_64
    dmd -lib -m64 -of$@ -op -Hdx86_64/include/ `find src/ -name '*.d'`

# Since the header files for i386/x86_64 are the same, let's just pick the i386 one.
install-data-hook: 
    mkdir -p $(DESTDIR)$(sited2dir)
    rsync -av i386-linux-gnu/include/ $(DESTDIR)$(sited2dir) 
```

它正在工作，但是，我仍然不清楚：

*   我需要包含`AC_PROG_CC`and `AC_PROG_RANLIB`in `configure.ac`，这应该是不必要的，因为这个项目中没有 c/c++ 源代码。缺少这两个语句将导致错误。

*   我只能`libdog.a`在`Makefile.am`. 我在上面的代码中注释掉了 x86-64 之一，如果我包含它，automake 将显示错误：

    ```
    cd . && /bin/bash /home/lenik/tasks/1-uni/devel/libdog-dev/missing --run automake-1.11 --gnu Makefile
    Makefile.am: object `libdog.$(OBJEXT)' created by `x86_64/libdog.c' and `i386/libdog.c'
    make: *** [Makefile.in] Error 1 
    ```

    我想在一个包中包含 i386 和 x86-64 的两个版本，就像`dmd`Debian 的官方包一样：

    ```
    ...                              (install tree of the dmd-2.059-0 package)
    |-- lib/
    |   |-- i386-linux-gnu/
    |   |   `-- libphobos2.a
    |   `-- x86_64-linux-gnu/
    |       `-- libphobos2.a 
    ```

*   我已经硬编码了拱名`i386-linux-gnu`并`x86_64-linux-gnu`在 Makefile 源代码中，但是，它应该以某种方式生成..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:36:00.037

1.  Automake 将尝试为`_LIBRARIES`目标中列出的文件查找 C/C++ 源。因此，只需将它们更改为`_DATA`目标：

    ```
    lib32_DATA = \
        i386/libdog.a

    lib64_DATA = \
        x86_64/libdog.a 
    ```

2.  您可以通过运行以下命令生成主机系统的名称`i386-linux-gnu`或名称：`x86_64-linux-gnu`

    ```
    dpkg-architecture -qDEB_HOST_GNU_TYPE 
    ```

    您还可以从`/etc/ld.so.conf`和获取库路径`/etc/ld.so.conf.d/*`。

# objective-c - 无法在 ios6 中获取 facebook 访问令牌

> ID：12909520
> 
> 赞同：0
> 
> 时间：2012-10-16T07:26:00.160
> 
> 标签：objective-c, facebook, ios6, facebook-social-plugins

在 iOS6 中，我正在使用在这里发布消息，`ACAccountType and SlRequest`但 d=为此我需要检索访问令牌以进行某些操作，

以下是我用来获取数据的代码

```
ACAccountType *FBaccountType= [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

            // Specify App ID and permissions
        NSDictionary *dictFB = @{
    ACFacebookAppIdKey:kAppId,
    ACFacebookPermissionsKey: @[@"email",@"publish_stream", @"publish_actions"],
    ACFacebookAudienceKey: ACFacebookAudienceFriends
        };

    [accountStore requestAccessToAccountsWithType:FBaccountType options:dictFB completion:
     ^(BOOL granted, NSError *e) {
         if (granted) {
             NSArray *accounts = [accountStore accountsWithAccountType:FBaccountType];
//              it will always be the last object with single sign on
             facebookAccount = [accounts lastObject];
             NSLog(@"facebook account = %@",facebookAccount);

         } else {
                 //Fail gracefully...
             NSLog(@"error getting permission %@",e);
         }
     }]; 
```

但从上面的代码中，我只得到以下数据 1]type 2]account description 3]username 4]objectid 5]properties 6]parent account

如何在 ios6 中使用上述代码获取访问令牌

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:20:14.730

此处问题已通过更新的 Facebook SDK 3.1.1 库修复

# ant - 如何在 Ant 中重用多个 zipfileset 元素？

> ID：12909530
> 
> 赞同：1
> 
> 时间：2012-10-16T07:26:34.183
> 
> 标签：ant, zip, fileset

我们想要构建多个 zip 文件，其中一些文件的内容与其他文件相同。而不是为每个 zip 指定完整的文件列表（它们实际上非常大），我想我会尝试得到一些重用。

所以我尝试使用`<union>`这个：

```
<project name="test" default="zips">
  <target name="zips">
    <union id="common">
      <zipfileset prefix="." dir="." includes="1"/>
      <zipfileset prefix="3" dir="." includes="2"/>
    </union>
    <zip zipfile="1.zip">
      <resources refid="common"/>
    </zip>
    <zip zipfile="2.zip">
      <resources refid="common"/>
    </zip>
  </target>
</project> 
```

这确实会生成两个包含“1”和“2”的 zip 文件，但两个文件中都缺少“3”前缀。

我究竟做错了什么？

我们还有一个在内部使用 zipfileset 的自定义任务。我也试图让它与 union 一起工作，但不知道如何获得前缀值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T14:02:56.427

试试这个为你的`common`资源收集：

```
<union id="common">
  <fileset dir="." includes="1"/>
  <mappedresources>
      <fileset dir="." includes="2"/>
      <globmapper from="*" to="3/*"/>
  </mappedresources>
</union> 
```

a 中的`prefix`参数`zipfileset`仅在从参数指定的存档中读取文件时使用`src`，否则将被忽略 - 这是您看到的行为。为了您的使用，您正在尝试在创建的存档中指定前缀。为此，您需要一个映射器。

*另请参阅：Ant 文档[`mappedresources.`](http://ant.apache.org/manual/Types/resources.html#mappedresources)*

# c# - sql查询中的自定义排序

> ID：12909531
> 
> 赞同：3
> 
> 时间：2012-10-16T07:26:36.913
> 
> 标签：c#, sql

我正在编写一份需要按声明自定义订单的报告。我有 5 个类别用于该`order by`子句。这些是我的列名学生开支、零用现金开支、家庭开支、日常开支、公平开支。我想以这种方式在报告中订购它们：

```
Pettycash
DailyExpense
Home Expense
Fair Expense
Cash Expense 
```

此外，如果添加了不会影响此顺序并在最后添加的新类别。我试过按 asc 和 desc 排序，也搜索了一些论坛，但它并没有清除我的概念。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:28:19.767

尝试以下操作：

```
ORDER BY
CASE Category
   WHEN 'Pettycash' THEN '1'
   WHEN 'DailyExpense' THEN '2'
   WHEN 'Home Expense' THEN '3'
   WHEN 'Fair Expense' THEN '4'
   WHEN 'Cash Expense' THEN '5'
   ELSE '6' 
END 
```

[在此处](http://msdn.microsoft.com/en-us/library/ms188385%28v=sql.105%29.aspx#2)找到的文档。

# ios - RestKit POST 发送 JSON 不包含映射路径/类名

> ID：12909533
> 
> 赞同：0
> 
> 时间：2012-10-16T07:26:47.537
> 
> 标签：ios, json, post, restkit

我正在使用 RestKit 将对象发布到服务器或获取它。GET 非常适合映射。但 POST 没有。

这是接收到的 JSON 的形式：

```
{"user":{"id":98,"notification":false,"id":98,"token_session":"506934689"}} 
```

问题是当发送的 JSON 的 post 对象具有以下形式时：

```
{"id":98,"notification":false,"id":98,"token_session":"506934689"} 
```

如您所见，缺少“用户”类名！（我无法更改 serverur API 以使用两种 JSON 格式）

如果有人可以帮助我，这是我的代码！

```
 RKObjectMapping* mapping = [RKObjectMapping mappingForClass:[UserObject class]];
    [mapping mapKeyPath:@"id" toAttribute:@"id"];
    [mapping mapKeyPath:@"token_session" toAttribute:@"token_session"];
    [mapping mapKeyPath:@"notification" toAttribute:@"notification"];

    [[RKObjectManager sharedManager].mappingProvider setMapping:mapping forKeyPath:@"user"];
    [[RKObjectManager sharedManager].mappingProvider registerMapping:mapping withRootKeyPath:@"user"];
    [[RKObjectManager sharedManager].mappingProvider setSerializationMapping:[mapping inverseMapping] forClass:[UserObject class]];
//Route :
    [[RKObjectManager sharedManager].router routeClass:[UserObject class] toResourcePath:@"user"]; 
```

以及对象的帖子：

```
RKObjectManager * manager = [RKObjectManager sharedManager];
[manager postObject:user usingBlock:^(RKObjectLoader* loader)
{
    loader.delegate = self;
}]; 
```

非常感谢。

编辑 ：

我试过这个：

```
RKObjectManager * manager = [RKObjectManager sharedManager];
    [manager postObject:[CurrentSession sharedInstance].user usingBlock:^(RKObjectLoader* loader)
    {
        loader.sourceObject = [NSDictionary dictionaryWithObject:[CurrentSession sharedInstance].user forKey:@"user"];
        loader.resourcePath = url;
        loader.delegate = self;
    }]; 
```

但是 JSON 所以发送是空的:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:48:22.677

我发现了我的错误！

```
[[RKObjectManager sharedManager].mappingProvider setMapping:mapping forKeyPath:@"user"];
[[RKObjectManager sharedManager].mappingProvider registerMapping:mapping withRootKeyPath:@"user"]; 
```

RestKit 似乎不喜欢这两行。我只保留了第一行，发送 JSON 变成了我的预期

```
{"user":{"id":98,"notification":false,"id":98,"token_session":"506934689"}} 
```

# linux - ldd 会打印运行时使用的所有 .so 文件吗？

> ID：12909534
> 
> 赞同：1
> 
> 时间：2012-10-16T07:26:52.903
> 
> 标签：linux, ldd

我曾经在 Linux 上看到一个二进制文件（比如 xyz），当它运行时，我可以看到它加载了一个 .so 文件（比如 abc.so），但是当我运行“#ldd xyz”时，不包含 abc.so在ldd的输出中。

谁能帮忙解释一下？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T07:31:34.667

ldd 只显示在程序“bootstrap”中加载的共享库。程序可以随意使用 dlopen(3) 加载其他共享库，因此 ldd(1) 和 lsof(8) 可以显示加载的共享库的不同列表。

# java - 获取 Pop3message 的负大小

> ID：12909535
> 
> 赞同：0
> 
> 时间：2012-10-16T07:26:57.607
> 
> 标签：java, jakarta-mail, pop3

我要求我应该阅读邮件，并且我应该从邮件内容中获取一些标题信息。

为此，我正在以下列方式阅读邮件..

```
POP3Message objMsg = (POP3Message) instFolder.getMessage(totCount);   // line 1
String size = objMsg.getSize();                          // line 2
System.out.println("size :: "+size);                      // line 3 

Multipart multipartLevel_1 = (Multipart) objMsg.getContent();   // line 14 
int nmultiCount = multipartLevel_1.getCount();                  // line 15 
```

在第 3 行，我得到 :: size :: -1050

在第 15 行我收到 MessagingException 说..

## javax.mail.MessagingException：没有来自数据源的输入流

你能告诉我为什么我的消息大小为负，它应该返回消息的字节数

在获取多部分对象时为什么我会收到 MessagingException

感谢提前拉杰什五世

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:08:33.047

这是答案 - 谷歌确实有帮助：

> 问：为什么在使用POP3 时getSize 方法返回一个负数？
> 
> A: 你的 POP3 服务器坏了。POP3 提供程序使用 TOP 命令来获取消息的标头，并使用 LIST 命令来确定整个消息的大小。然后它减去这两个值以确定消息正文的大小。如果服务器错误地报告了整个消息的大小，您可能会得到一个负数。您可以将属性“mail.pop3.disabletop”设置为“true”以禁用 TOP 命令，但请注意，这将导致对邮件头的任何访问都获取整个邮件。

来自[Oracle JavaMailAPI 常见问题解答](http://www.oracle.com/technetwork/java/javamail/faq-135477.html#pop3size)

# jquery - 无法使用 ClientID 从 jQuery 访问文本框

> ID：12909549
> 
> 赞同：-1
> 
> 时间：2012-10-16T07:27:44.387
> 
> 标签：jquery, asp.net

> **可能重复：**
> [处理 ASP.NET 的 ClientID 的最佳方法是什么](https://stackoverflow.com/questions/12614042/whats-the-best-way-to-deal-with-asp-nets-clientid)

我有以下 jQuery 语句

```
<script type="text/javascript">
    $(document).ready($('#<%=email.ClientID%>').keydown(function ()
    {
    alert("dsadsd");
    }
    )
        );
</script> 
```

文本框是-->

```
<asp:TextBox name="email" runat="server" ID="email" CausesValidation="True" 
                            ValidationGroup="email" ></asp:TextBox> 
```

我键入时它不执行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:31:58.667

```
<asp:TextBox name="email" ClientIDMode="Static" runat="server" ID="email" CausesValidation="True" ValidationGroup="email" ></asp:TextBox>

   $(document).ready(function(){
       $('#email').keydown(function(){
        alert("test");
      })    
   }); 
```

# php - 您将如何为此类课程编写测试？

> ID：12909550
> 
> 赞同：2
> 
> 时间：2012-10-16T07:27:44.447
> 
> 标签：php, unit-testing, testing, phpunit

```
class Documentation
{
    private $_text;

    public function __construct($text)
    {
        $this->_text = $text;
    }

    public function generate()
    {
        return new \DOMElement('documentation', $this->_text);
    }
} 
```

我能想到的显而易见的解决方案是创建 new `DOMDocument`，附加`generate()`函数调用的结果并使用 与预期的元素进行比较`$this->assertEqualXMLStructure`，但由于某种原因，我不喜欢它，并且确信还有其他选择。

有任何想法吗？

**UPD**：似乎我错过了一些重要的事情：我要确保的是返回具有特定内容的特定类型的元素。怎么做？

**更新 2**：

这是我目前可以创建的，但它很丑，不是吗？

```
public function testGenerate()
{
    $expected = new \DOMDocument();
    $expected->loadXML('<?xml version="1.0" encoding="utf-8"?><documentation>foo</documentation>');

    $documentation = new Documentation('foo');
    $actual = new \DOMDocument('1.0', 'utf-8');
    $actual->appendChild($documentation->generate());

    $this->assertEqualXMLStructure($expected, $actual);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T07:34:11.890

这是一个如此简单的类，几乎没有任何可能出错的地方。代码中根本没有分支，所有方法的圈复杂度都是1。真的没有必要为这么简单的类编写测试套件。

但是，您可以使用 PHPUnit 断言 generate() 方法返回一个 DOMElement 对象，并且该元素的子节点是一个文本对象，并且该文本对象与输入文本匹配。

真的没有什么意义。

**编辑添加**：这是进行测试的示例方法（假设 PHPUnit 作为测试运行器）。它没有经过测试，因此语法可能是错误的，但它应该让您对测试过程有所了解。

As you can see, this method is longer than the class being tested! I'm a big fan of unit testing, but in this particular case it seems to be overkill. Unless you have a code-coverage quota you must hit, or unless you're especially cautious and want some assurance regarding your class, I just wouldn't bother in this particular case.

```
public function testGenerate ()
{
    $expected = 'The quick brown fox jumps over the lazy dog';
    $this -> object = new Documentation ($expected);
    $actual = $this -> object -> generate ();

    // Check we got a DOM Element object
    $this -> assertInstanceOf ('\DOMElement', $actual);

    // Check that our DOM element is of the Documentation type
    $this -> assertEquals ('documentation', $actual -> tagName);

    // Check that our Documentation element has a single text node child
    $this -> assertEquals (1, $actual -> childNodes -> length);
    $this -> assertInstanceOf ('\DOMText', $actual -> firstChild);

    // Check that the text node has the value we passed in originally
    $this -> assertEquals ($expected, $actual -> firstChild -> wholeText);
} 
```

# javascript - 在没有客户端脚本的情况下刷新页面后如何重置隐藏的输入值？

> ID：12909554
> 
> 赞同：0
> 
> 时间：2012-10-16T07:27:53.480
> 
> 标签：javascript, html, browser-cache

我的页面中有一个隐藏的输入，其默认值为 0。我正在我的 Javascript 代码中更改此输入的值。当我尝试使用 ctrl + r、f5 和 ctrl + f5 刷新页面时，当我在刷新隐藏输入的值后使用 ctrl + r 和 f5 时，我的 javascript 函数中的最后一个值会更改。但是如果我使用 ctrl f5 隐藏输入的值将变为默认值，即 0。我试图避免这种情况，我希望隐藏输入在使用所有可能的方法刷新后返回默认值。如果不使用客户端脚本，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:47:14.983

这是不可能的。您需要使用 javascript 来记住它。也许您可以通过 javascript 将此变量传递给 cookie。

看看这里也许[http://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)

# android - 如何设置进度条？

> ID：12909561
> 
> 赞同：0
> 
> 时间：2012-10-16T07:28:29.790
> 
> 标签：android

```
public class AndroidXMLParsingActivity extends Activity {

    public int currentPage = 1;
    public ListView lisView1;
    static final String KEY_ITEM = "docdetails";
    static final String KEY_NAME = "heading";
    public Button btnNext;
    public Button btnPre;
    public static String url = "http://dev.taxmann.com/TaxmannService/TaxmannService.asmx/GetNotificationList";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // listView1
        lisView1 = (ListView) findViewById(R.id.listView1);

        // Next
        btnNext = (Button) findViewById(R.id.btnNext);
        // Perform action on click
        btnNext.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                currentPage = currentPage + 1;
                ShowData();
            }
        });

        // Previous
        btnPre = (Button) findViewById(R.id.btnPre);
        // Perform action on click
        btnPre.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                currentPage = currentPage - 1;
                ShowData();
            }
        });

        ShowData();
    }

    public void ShowData() {
        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(url); // getting XML

          Document  doc = parser.getDomElement(xml);

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);

        int displayPerPage = 5; // Per Page
        int TotalRows = nl.getLength();
        int indexRowStart = ((displayPerPage * currentPage) - displayPerPage);
        int TotalPage = 0;
        if (TotalRows <= displayPerPage) {
            TotalPage = 1;
        } else if ((TotalRows % displayPerPage) == 0) {
            TotalPage = (TotalRows / displayPerPage);
        } else {
            TotalPage = (TotalRows / displayPerPage) + 1; // 7
            TotalPage = (int) TotalPage; // 7
        }
        int indexRowEnd = displayPerPage * currentPage; // 5
        if (indexRowEnd > TotalRows) {
            indexRowEnd = TotalRows;
        }

        // Disabled Button Next
        if (currentPage >= TotalPage) {
            btnNext.setEnabled(false);
        } else {
            btnNext.setEnabled(true);
        }

        // Disabled Button Previos
        if (currentPage <= 1) {
            btnPre.setEnabled(false);
        } else {
            btnPre.setEnabled(true);
        }

        // Load Data from Index
        int RowID = 1;
        ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();
        HashMap<String, String> map;

        // RowID
        if (currentPage > 1) {
            RowID = (displayPerPage * (currentPage - 1)) + 1;
        }

        for (int i = indexRowStart; i < indexRowEnd; i++) {
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map = new HashMap<String, String>();
            map.put("RowID", String.valueOf(RowID));
            map.put(KEY_NAME, parser.getValue(e, KEY_NAME));

            // adding HashList to ArrayList
            menuItems.add(map);

            RowID = RowID + 1;

        }

        SimpleAdapter sAdap;
        sAdap = new SimpleAdapter(AndroidXMLParsingActivity.this, menuItems,
                R.layout.list_item, new String[] { "RowID", KEY_NAME },
                new int[] { R.id.ColRowID, R.id.ColName });
        lisView1.setAdapter(sAdap);
    }

} 
```

这是我的源代码，我想设置 ProgressBar 这个活动是从按钮单击上的另一个活动调用的 我想在数据加载时设置 ProgressBar 我们用于解析打印和分页的 ShowData() 函数我尝试了很多，但我不能把 ProgressBar 用于加载数据请告诉我如何实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:33:11.163

有一些很好的教程可用（例如[http://eagle.phys.utk.edu/guidry/android/progressBarExample.html](http://eagle.phys.utk.edu/guidry/android/progressBarExample.html)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:48:39.590

试试这个代码，它会工作..

```
public class AndroidXMLParsingActivity extends Activity {

    public int currentPage = 1;
    public ListView lisView1;
    static final String KEY_ITEM = "docdetails";
    static final String KEY_NAME = "heading";
    public Button btnNext;
    public Button btnPre;
    public static String url = "http://dev.taxmann.com/TaxmannService/TaxmannService.asmx/GetNotificationList";
    SimpleAdapter sAdap;
    ProgressDialog progressDialog;
    Activity mActivity;
    ArrayList<HashMap<String, String>> menuItems;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mActivity = this;
        // listView1
        lisView1 = (ListView) findViewById(R.id.listView1);

        // Next
        btnNext = (Button) findViewById(R.id.btnNext);
        // Perform action on click
        btnNext.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                currentPage = currentPage + 1;
                new backProcess().execute();
            }
        });

        // Previous
        btnPre = (Button) findViewById(R.id.btnPre);
        // Perform action on click
        btnPre.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                currentPage = currentPage - 1;
                new backProcess().execute();
            }
        });

        new backProcess().execute();
    }

    public void ShowData() {
        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(url); // getting XML

        Document doc = parser.getDomElement(xml);

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);

        int displayPerPage = 5; // Per Page
        int TotalRows = nl.getLength();
        int indexRowStart = ((displayPerPage * currentPage) - displayPerPage);
        int TotalPage = 0;
        if (TotalRows <= displayPerPage) {
            TotalPage = 1;
        } else if ((TotalRows % displayPerPage) == 0) {
            TotalPage = (TotalRows / displayPerPage);
        } else {
            TotalPage = (TotalRows / displayPerPage) + 1; // 7
            TotalPage = (int) TotalPage; // 7
        }
        int indexRowEnd = displayPerPage * currentPage; // 5
        if (indexRowEnd > TotalRows) {
            indexRowEnd = TotalRows;
        }

        // Disabled Button Next
        if (currentPage >= TotalPage) {
            btnNext.setEnabled(false);
        } else {
            btnNext.setEnabled(true);
        }

        // Disabled Button Previos
        if (currentPage <= 1) {
            btnPre.setEnabled(false);
        } else {
            btnPre.setEnabled(true);
        }

        // Load Data from Index
        int RowID = 1;
        menuItems = new ArrayList<HashMap<String, String>>();
        HashMap<String, String> map;

        // RowID
        if (currentPage > 1) {
            RowID = (displayPerPage * (currentPage - 1)) + 1;
        }

        for (int i = indexRowStart; i < indexRowEnd; i++) {
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map = new HashMap<String, String>();
            map.put("RowID", String.valueOf(RowID));
            map.put(KEY_NAME, parser.getValue(e, KEY_NAME));

            // adding HashList to ArrayList
            menuItems.add(map);

            RowID = RowID + 1;

        }

    }

    public class backProcess extends AsyncTask<Void, Void, Void> {

        @Override
        protected void onPostExecute(Void result) {
            if (progressDialog != null)
                progressDialog.dismiss();
            sAdap = new SimpleAdapter(AndroidXMLParsingActivity.this,
                    menuItems, R.layout.list_item, new String[] { "RowID",
                            KEY_NAME },
                    new int[] { R.id.ColRowID, R.id.ColName });
            lisView1.setAdapter(sAdap);
            super.onPostExecute(result);
        }

        @Override
        protected void onPreExecute() {
            progressDialog = ProgressDialog.show(mActivity, "Wait",
                    "Loading...");
            super.onPreExecute();
        }

        @Override
        protected Void doInBackground(Void... params) {
            ShowData();
            return null;
        }

    }

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T07:38:20.397

使用异步任务加载数据

```
private class Data extends AsyncTask<Object, Integer, Object> {

        @Override
        protected void onPreExecute() {

             ProgressDialog progress = ProgressDialog.show(Activity.this, "",
                    "Loading...");

            super.onPreExecute();
        }

        @Override
        protected Object doInBackground(Object... params) {
            //do hard work here
                            ShowData();
                                return null;
        }

        @Override
        protected void onProgressUpdate(Integer... values) {
            progress.getProgress();

        }

        @Override
        protected void onPostExecute(Object result) {

            progressBar.dismiss();

            super.onPostExecute(result);
        }
    } 
```

并在 onclick 方法上

```
new Data().execute(). 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-16T08:34:14.647

将异步类设为公共静态，然后您可以从任何地方访问它。

```
private class Data extends AsyncTask<Object, Integer, Object> {

    @Override
    protected void onPreExecute() {

         ProgressDialog progress = ProgressDialog.show(Activity.this, "",
                "Loading...");

        super.onPreExecute();
    }

    @Override
    protected Object doInBackground(Object... params) {
        //do hard work here
                        ShowData();
                            return null;
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        progress.getProgress();

    }

    @Override
    protected void onPostExecute(Object result) {

        progressBar.dismiss();

        super.onPostExecute(result);
    }
} 
```

# objective-c - 通过应用程序使类变量成为全局变量

> ID：12909569
> 
> 赞同：0
> 
> 时间：2012-10-16T07:28:55.897
> 
> 标签：objective-c, global-variables

在我的应用程序中，一些视图控制器中有很多视图控制器，一些变量是我想在其他类中使用的。我的变量不存在于应用程序委托文件中，所以我可以让它全局使用我的应用程序中的每个地方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:54:18.397

在我看来，使用单例模式怎么样？因此，当您想使用该类的变量时，只需获取实例然后使用变量即可。

```
@interface MySingletonViewController : UIViewController
{
  //here your variables
  int globalVariables;
}
@property (nonatomic, assign) int globalVariables;
+ (MySingletonViewController *)sharedSingleton;
@end

@implementation MySingletonViewController
@synthesize globalVariables;
static MySingletonViewController *sharedSingleton = nil;
+ (MySingletonViewController *)sharedSingleton
{
  @synchronized(self)
  {
    if (sharedSingleton == nil)
      sharedSingleton = [[MySingleton alloc] init];

    return sharedSingleton;
  }
}

@end 
```

UIViewController 实际上是类，所以我们可以这样做:) 希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:54:51.713

当然可以，但是在整个应用程序中使用全局变量肯定是破坏了架构设计。

作为基于 C 的 Objective-C，您可以在实现部分之外的任何 *.m 文件中定义变量（在您的情况下 - 指向类的指针）：

```
MyVeryOwnClass *g_MyVeryOwnClassPointer = nil; 
```

并以以下方式访问它：

```
extern MyVeryOwnClass *g_MyVeryOwnClassPointer;
/* do some operations with your pointer here*/ 
```

或者将 extern 声明移动到头文件。

PS：你可以使用单例。它们不是最好的解决方案，但比使用原始变量更好。

# c# - 在 windows phone 7 上使用 MediaPlayerLauncher 播放多个文件

> ID：12909570
> 
> 赞同：0
> 
> 时间：2012-10-16T07:29:02.520
> 
> 标签：c#, windows-phone-7

MediaPlayer 启动器使用“下一曲目”和“上一曲目”控件启动播放，但没有响应。如何在播放多个曲目时使用这些控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:47:25.630

[MediaPlayerLauncher](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.mediaplayerlauncher%28v=vs.92%29.aspx)类本身不允许您访问**Next**和**Previous**控件。

如果您在谈论[MediaPlayer](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.media.mediaplayer%28v=xnagamestudio.40%29.aspx)类，那就另当别论了。该类的行为是循环的，因此只要有媒体要播放，它就会在调用**Next**或**Previous**时遍历轨道。您所说的无响应行为是什么？是否有可以在队列中播放的曲目？

# c# - 边缘成本不对称时的最近邻，一些疑问

> ID：12909574
> 
> 赞同：0
> 
> 时间：2012-10-16T07:29:39.493
> 
> 标签：c#, algorithm, graph-algorithm, nearest-neighbor, knn

*为了澄清我的帖子，我根据评论对其进行了编辑。*

我在考虑如何在边缘成本不对称时*有效地实现最近邻搜索。*我正在考虑一系列城市，例如从 100 到 12000。

更详细地，作为示例，从城市**A**到城市**B**的旅行（例如步行）的成本为 COST 1，而**从[B]**到 A 的旅行**（**例如**乘火车**）的成本为**COST** **[1]** **/10 。**换句话说，我在这里看到的问题是，如果我有一个代表旅行城市之间成本的不对称矩阵**C并且我选择一个点****A**，那么如何*有效*地发现三个最近的相邻城市**B** **[1]**、**B** **[2]**和**B** **[3]***************在旅行费用方面？我想重复运行查询。预处理时间，即使不是很长，也可以。*************

 *****效率思考让我想到了类似[kd 树](http://en.wikipedia.org/wiki/K-d_tree)的东西，当城市之间的成本是*对称的时，它有助于在**O(lg(n))*时间内找到*k*个最近邻居。在我的情况下，这是一个只有基本 kd 树的障碍，因为在任何两个城市之间的两个方向上的旅行成本通常都不相同。事情的要旨似乎是，在不对称的情况下，我怎么能做类似 k 近邻的事情？

 **为了纠正上述对称性假设，我认为我不只是一棵树，而是构建了两棵树，以便在两个方向上计算成本，然后我对这两棵树进行搜索。然后我开始怀疑，有没有人知道是否已经有专门用于不对称成本的东西和/或使用两棵树作为一个想法完全误入歧途？

它也可能是二维的 kd 树不一定是最合适的解决方案。所以也欢迎指向其他数据结构和算法的指针。特别是如果有人对我的问题大小有实践经验。维基百科列出[了很多方法](http://en.wikipedia.org/wiki/Nearest_neighbor_search#See_also)，甚至可能近似的解决方案对我正在尝试做的事情有好处（这是一个用于学习目的的小型游戏）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:41:08.583

对于每个点，您需要计算所有可用旅行类型（步行、旅行、..）的成本，导致一个单位，比较并获得最小值。您可以在搜索算法中使用此成本。*******

# java - 在 Crystal Reports Server 上从 Java 应用程序运行报表并以编程方式导出为 PDF

> ID：12909575
> 
> 赞同：1
> 
> 时间：2012-10-16T07:29:51.450
> 
> 标签：java, pdf, web, crystal-reports

根据我们其中一个 Java Web 应用程序中的部署模型，我们拥有 SAP Crystal Reports Server 2011，它根据来自应用程序的请求托管和运行所有报表。

我想知道是否可以从 Java Web 应用程序请求在 Crystal 服务器上运行的报表并将其导出为 PDF，以便应用程序可以将其发送回浏览器。

我们需要在 Crystal 服务器上运行报表，而不是在 Java Web 应用程序中运行，以便后者不会加载太多，因此希望采用这种方法。

# iphone - 如何异步更新 UIImageView？

> ID：12909576
> 
> 赞同：0
> 
> 时间：2012-10-16T07:29:52.790
> 
> 标签：iphone, ios, cocoa-touch

我有一个带有很多 UIButton 的 UITableView。按钮中显示的大型本地图像。我使用此代码异步加载大图像（UIButton 的类别）：

```
- (void)asyncLoadImageAtPath:(NSString *)fullPath forState:(UIControlState)state
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        UIImage *image = [[UIImage alloc] initWithContentsOfFile:fullPath];
        dispatch_async(dispatch_get_main_queue(), ^{
            [self setImage:image forState:state];
        });
    });
} 
```

initWithContentsOfFile: 在其他线程中运行，同时通过 setImage:forState: 在主线程中更新 UI。但是 setImage:forState: 耗时太长，导致 UITableView 滚动不流畅。

那么有什么方法可以异步更新 UIImageView 或 UIButton 的 UI 呢？

特别感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:37:30.180

查看[SDWebImage](https://github.com/rs/SDWebImage)，该库为 UIImageVIew 提供了一个类别，支持来自网络的远程图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:39:32.300

对于我使用[AsyncImageView](https://github.com/nicklockwood/AsyncImageView)的异步图像，它在 tableViews 上运行良好

# android - 安卓相机滤镜

> ID：12909580
> 
> 赞同：2
> 
> 时间：2012-10-16T07:30:33.160
> 
> 标签：android, graphics, camera, android-camera

我希望将相机滤镜应用于相机预览。据我了解，解决方案可以是处理从相机传入的字节流，将其从 YUV 格式解码为位图，然后将帧传递给表面视图，但对我来说，不清楚如何自定义它。我如何创建相机滤镜（例如在 Instagram 或其他相机应用中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:30:22.047

我知道这是一个老问题，但也许有人会寻找同样的东西，并且可能会发现这很有用....

如果要在实时预览中应用滤镜，这并不容易，因为从 YUV 到 RGB 的转换成本很高，并且在 android 设备上性能较低。请查看我关于此主题[的其他答案和其他](https://stackoverflow.com/questions/8371055/apply-custom-filters-to-camera-output/8372731#8372731)[类似问题](https://stackoverflow.com/questions/8350230/android-how-to-display-camera-preview-with-callback)。

如果您只想将滤镜应用于单个拍摄的图像，那应该不是问题，这只是图像处理的问题。该代码将类似于链接问题中的示例。

# xsd - 在 XSD 中定义的单个复杂类型是否可以有多个名称？

> ID：12909586
> 
> 赞同：0
> 
> 时间：2012-10-16T07:30:55.877
> 
> 标签：xsd

我正在创建一个定义复杂类型的 XSD：

```
<xs:complexType name="TimeBasicComponents">
    <xs:sequence>
        <xs:element name="Hours" type="xs:int"></xs:element>
        <xs:element name="Minutes" type="xs:int"></xs:element>
        <xs:element name="Seconds" type="xs:int"></xs:element>
        <xs:element name="MilliSeconds" type="xs:int"></xs:element>
    </xs:sequence>
</xs:complexType> 
```

我定义了另一种复杂类型：

```
<xs:complexType name="TimeOfDay">
    <xs:sequence>
        <xs:element name="BasicComponents" type="TimeBasicComponents"></xs:element>
        <xs:element name="Zone" type="xs:string"></xs:element>
    </xs:sequence>
</xs:complexType> 
```

现在，我想要另一种复杂类型的持续时间。但是，实际上不需要为此定义另一个复杂类型，它将与“TimeBasicComponents”完全相同。所以，我想知道是否有办法在 XSD 中为单个复杂类型定义多个名称？

-桑迪普

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T08:12:54.437

您是说您也想`TimeBasicComponents`用作持续时间吗？据我所知，您不能为 a 使用别名，但您可以使用以下构造`complexType`实现非常相似的效果：`<xs:extension...`

```
<xs:complexType name="TimeDuration">
    <xs:complexContent>
        <xs:extension base="TimeBasicComponents" />
    </xs:complexContent>
</xs:complexType> 
```

这样，您将有效地拥有别名，而无需重新定义`TimeBasicComponents`复杂类型。

干杯，

# linux - ksh无法分配内存linux

> ID：12909587
> 
> 赞同：0
> 
> 时间：2012-10-16T07:30:56.967
> 
> 标签：linux, ksh

我有两个大字符串数组（**每个都有 ~90000 elems**）。 我用命令
创建它们。`set -A`而且我需要弄清楚第一个数组中的哪些字符串在第二个中没有相等的字符串。
我的代码：

```
for i in {0..${#hard_drive_files[*]}}; do          

    has_reference=false
    for j in {0..${#files_in_db[*]}}; do    
        if [[ ${files_in_db[j]} == ${hard_drive_files[i]} ]]; then
            has_reference=true
            break
        fi  
    done 

    if [[ $has_reference == false ]]; then
        echo "${hard_drive_files[i]}"
    fi     
done 
```

这部分代码“吃掉”了太多的内存。
在执行结束时已用内存的值约为 80000 MB
在这部分代码之后，我尝试归档一些文件但得到`cannot fork [Cannot allocate memory]`
这样的问题有解决方案吗？

PS kshVersion=Version AJM 93t+ 2010-02-02
为了计算出使用了多少 ram 内存，我执行`free -m`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:34:33.040

我认为在 Ksh 中有特定的理由这样做吗？尝试对此类表需要多少内存做出一些近似，并与 RAM 和 SWAP 的数量进行比较。我敢打赌，这不是一个专门的程序，而是limits.conf或sysctl.conf中的一些每个进程的内存/交换使用限制。

您还可以尝试按概念将数据拆分到某些组，例如名称的第一个字母或其他内容，以减少所需的内存量。您的代码可能远非最佳，最好首先收集您需要的所有信息然后重用它，而不是像您尝试做的那样在嵌套循环中重复整个过程。

# facebook - Facebook API 错误代码：Facebook 应用程序上的 191

> ID：12909589
> 
> 赞同：0
> 
> 时间：2012-10-16T07:31:02.600
> 
> 标签：facebook, facebook-php-sdk

我正在开发一个 Facebook 应用程序。当我尝试获取访问令牌时，我收到以下消息：

```
An error occurred with test. Please try again later.

API Error Code: 191
API Error Description: The specified URL is not owned by the application
Error Message: Invalid redirect_uri: Given URL is not allowed by the Application configuration. 
```

[https://apps.facebook.com/fb_invite_app/-----](https://apps.facebook.com/fb_invite_app/-----) > URL 我已经配置了

站点 URL [https://safe-gorge-5005.herokuapp.com/](https://safe-gorge-5005.herokuapp.com/) 画布 URL 与上面的画布页面 URL 相同，我的 php 代码已定义（“FACEBOOK_CANVAS_URL”，“URL”）；

是什么导致了这个错误，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:30:09.023

您是否在应用设置页面中提供了**应用域**，这可能是出现此错误的原因之一

# sql - 如何将固定值添加到选择列表？

> ID：12909594
> 
> 赞同：0
> 
> 时间：2012-10-16T07:31:22.693
> 
> 标签：sql, oracle

```
Select Column1 From Table1; 
```

输出 ：

```
x1
x2
x3
x4 
```

输出将在 Column1 中。

我希望结果是：

```
OTHERS 
x1 
x2 
x3 
x4 
```

我想将“其他”值添加到 Column1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:40:49.580

这样做的最简单方法：

```
select column1 from table1
union all
select 'OTHERS' from dual 
```

嗯，可能是第二简单的方法，因为最简单的方法是：

```
insert into table1 (column1) values 'OTHERS'; 
```

尽管毫无疑问，您有一些铁的商业规则，为什么您不想这样做。

要获得您想要的订单：

```
select * from (
    select column1 from table1
    union all
    select 'OTHERS' from dual
)
order by decode(column1, 'OTHERS', 1, 2), column1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:40:11.457

使用联合：

```
Select 'OTHERS' AS Column1 From DUAL
UNION
Select Column1 From Table1 
```

# asp.net-mvc - 没有任何预选值的 MVC Razor RadioButtonList

> ID：12909595
> 
> 赞同：0
> 
> 时间：2012-10-16T07:31:23.787
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, radiobuttonlist

我在 MVC Razor 项目中使用 RadioButtonList 生成我的单选按钮。这是我的代码示例：

```
@Html.RadioButtonList(n => n.HouseType) 
```

出于某种原因，我的单选按钮列表获得了预选值。第一个复选框总是被选中，这让我的 UI 有点混乱。

如何以一种好的方式禁用它？

一种方法是使用 Jquery 遍历整个页面并取消选择每个框。但这不是一个很好的解决恕我直言的工作。

**编辑：** 这是关于 HouseType 的更多信息，它是一个自定义枚举。

```
 public enum HouseType
{
    House,
    Apartment,
    Garage
}; 
```

并使用这条线调用它

```
public HouseType HouseType { get; set; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:34:57.740

您可以`HouseType`在视图模型上将该属性设为可为空的类型。例如，如果它是枚举类型：

```
public HouseTypes? HouseType { get; set; } 
```

或者如果它是一个整数：

```
public int? HouseType { get; set; } 
```

* * *

更新：

看来您正在使用[`following helper`](http://pastebin.com/gT52mqZQ). 此帮助程序不支持可为空的枚举值。所以适应它：

```
public static class RaidioButtonListHelper
{
    /// <summary>
    /// Create a radiobutton list from viewmodel.
    /// </summary>
    public static MvcHtmlString RadioButtonList<TModel, TResult>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TResult>> expression, IEnumerable<SelectListItem> listOfValues = null)
    {
        var typeOfProperty = expression.ReturnType;

        // Added by Darin Dimitrov to support nullable enums
        var underlyingType = Nullable.GetUnderlyingType(typeOfProperty);
        if (underlyingType != null)
        {
            typeOfProperty = underlyingType;
        }
        // End of addition

        if (listOfValues == null && typeOfProperty.IsEnum)
        {
            listOfValues = new SelectList(Enum.GetValues(typeOfProperty));
        }

        var metaData = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);

        // Ctreat table
        TagBuilder tableTag = new TagBuilder("table");
        tableTag.AddCssClass("radio-main");

        // Create tr:s
        var trTagLable = new TagBuilder("tr id=\"" + metaData.PropertyName + "Lables\"");
        var trTagRadio = new TagBuilder("tr id=\"" + metaData.PropertyName + "Radios\"");

        foreach (SelectListItem item in listOfValues)
        {
            var text = item.Text;
            var value = item.Value ?? text;

            // Generate an id to be given to the radio button field 
            var id = string.Format("{0}_{1}", metaData.PropertyName, value);

            // Create the radiobuttons
            var radioTag = htmlHelper.RadioButtonFor(expression, value, new { id = id }).ToHtmlString();

            // Create the label for the radiobuttons.
            var labelTag = htmlHelper.Label(id, HttpUtility.HtmlEncode(text));

            // Add the lables and reaiobuttons to td:s
            var tdTagLable = new TagBuilder("td style=\"padding-left: 10px; text-align: center\"");
            var tdTagRadio = new TagBuilder("td style=\"padding-left: 10px; text-align: center\"");
            tdTagLable.InnerHtml = labelTag.ToString();
            tdTagRadio.InnerHtml = radioTag.ToString();

            // Add tds: to tr:s
            trTagLable.InnerHtml += tdTagLable.ToString();
            trTagRadio.InnerHtml += tdTagRadio.ToString();

        }

        // Add tr:s to table
        tableTag.InnerHtml = trTagLable.ToString() + trTagRadio.ToString();

        //Return the table tag
        return new MvcHtmlString(tableTag.ToString());
    }
} 
```

现在它将使用可为空的枚举，如果相应属性的值为空，它将不会选择任何单选按钮。

# javascript - 如何在 Ruby 中使用 Google 地图库？

> ID：12909600
> 
> 赞同：0
> 
> 时间：2012-10-16T07:31:37.153
> 
> 标签：javascript, ruby, google-maps, google-maps-api-3

[https://developers.google.com/maps/documentation/javascript/libraries](https://developers.google.com/maps/documentation/javascript/libraries) 在文档中，鉴于可以通过此引导 URL 加载地图 API 的 java 脚本代码。我的应用程序在 Ruby 上运行。但我想使用上面链接中列出的库。有人可以告诉我如何在 Ruby 中使用这些 java 对象/方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T07:42:58.947

Ruby 通常是一种服务器端语言。它在服务器本身上运行和解释。Google Javascript 库在浏览器中运行。它们在客户端进行解释。因此，您不能直接在 Ruby 中使用 Javascript 库。

但是，如果您的 Ruby 应用程序生成 HTML 页面，您可以在 HTML 模板中使用 Google 库并显示地图等。

# android - 通过 Intent 将整数值传递给另一个活动。剂量不起作用

> ID：12909601
> 
> 赞同：0
> 
> 时间：2012-10-16T07:31:38.513
> 
> 标签：android, android-intent

我是 Android 新手，正在尝试学习如何通过 Intents 将一些变量从活动传递到另一个活动。问题是当我在回答完我的问题后运行应用程序时，它会将我带到具有 AskQusetions 活动结果的摘要活动（是和否的计数）

这是我的 AskQuestion 活动：

```
 package com.example.quizapp;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.util.Log;
import android.view.View;
import android.widget.TextView;

public class AskQuestions extends Activity {

    private String[] messages;
    private int yesCount;
    private int noCount;
    private int messageNum;
    public final static String EXTRA_MESSAGE = "com.example.quizapp.MESSAGE";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.ask_questions);

    }

    @Override
    public void onStart() {
        super.onStart();
        messages = getResources().getStringArray(R.array.lblask_questions);
        messageNum = 0;
        setYesCount(0);
        setNoCount(0);

        TextView lblQuestion = (TextView)findViewById(R.id.lblask_questions);
        lblQuestion.setText(messages[messageNum]);
    }

    public void onYes(View view) {
        Log.i("Quiz App", "viewing next question");

        setYesCount(getYesCount() + 1); // count yes
        messageNum++;
        if (messageNum >= messages.length) { // if the questions finished got to summary
            // go to summary
            Intent summaryIntent = new Intent(this, Summary.class);
            //int messageYes = getYesCount();
            summaryIntent.putExtra("value", getYesCount());
            startActivity(summaryIntent);
        }

        TextView lblQuestion = (TextView)findViewById(R.id.lblask_questions);
        lblQuestion.setText(messages[messageNum]);
    }

    public void onNo(View view) {
        Log.i("Quiz App", "viewing next question");

        setNoCount(getNoCount() + 1); // count not
        messageNum++;
        if (messageNum >= messages.length) { // if the questions finished got to summary
            // go to summary
            Intent summaryIntent = new Intent(this, Summary.class);
            summaryIntent.putExtra("value", getNoCount()); 
            startActivity(summaryIntent);
        }

        TextView lblQuestion = (TextView)findViewById(R.id.lblask_questions);
        lblQuestion.setText(messages[messageNum]);
    }

    public int getYesCount() {
        return yesCount;
    }

    public void setYesCount(int yesCount) {
        this.yesCount = yesCount;
    }

    public int getNoCount() {
        return noCount;
    }

    public void setNoCount(int noCount) {
        this.noCount = noCount;
    }

} 
```

这是我的总结活动：

```
package com.example.quizapp;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.util.Log;
import android.view.View;
import android.widget.TextView;

/**
 * @author ***
 *
 */
public class Summary extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //Bundle extras = getIntent().getExtras();
        //String value = extras.getString(AskQuestions.EXTRA_MESSAGE);

        setContentView(R.layout.summary);

    }
    @Override
    public void onStart() {
        super.onStart();

        //String value = "HELLO";

        TextView lblYes = (TextView)findViewById(R.id.yes_result);
        lblYes.setText(getIntent().getExtras().getString("value"));

        TextView lblNo = (TextView)findViewById(R.id.no_result);
        lblNo.setText(getIntent().getExtras().getString("value"));

    }

} 
```

错误（应用程序崩溃）：

![截图应用程序崩溃](../Images/ae93d26c164b6bb68703d16abbeb05c4.png)

控制台输出：

[2012-10-16 01:28:04 - QuizApp] Android 发布！[2012-10-16 01:28:04 - QuizApp] adb 运行正常。[2012-10-16 01:28:04 - QuizApp] 执行 com.example.quizapp.MainActivity 活动启动 [2012-10-16 01:28:04 - QuizApp] 自动目标模式：使用现有模拟器 'emulator-5554'运行兼容的 AVD 'firstDevice' [2012-10-16 01:28:05 - QuizApp] 尝试将调试器连接到端口 8621 上的 'com.example.quizapp' [2012-10-16 01:28:07 - QuizApp] : 开始: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.example.quizapp/.MainActivity } [2012-10-16 01:28:08 - QuizApp]应用程序已部署。无需重新安装。[2012-10-16 01:28:08 - QuizApp] 在设备模拟器 5554 上启动活动 com.example.quizapp.MainActivity [2012-10-16 01:28：

Logcat报错（重启eclipse后）：

```
10-16 02:17:34.469: D/AndroidRuntime(1496): Shutting down VM
10-16 02:17:34.469: W/dalvikvm(1496): threadid=1: thread exiting with uncaught exception (group=0xb3f68288)
10-16 02:17:34.479: E/AndroidRuntime(1496): FATAL EXCEPTION: main
10-16 02:17:34.479: E/AndroidRuntime(1496): java.lang.IllegalStateException: Could not execute method of the activity
10-16 02:17:34.479: E/AndroidRuntime(1496):     at android.view.View$1.onClick(View.java:3591)
10-16 02:17:34.479: E/AndroidRuntime(1496):     at android.view.View.performClick(View.java:4084)
10-16 02:17:34.479: E/AndroidRuntime(1496):     at android.view.View$PerformClick.run(View.java:16966)
10-16 02:17:34.479: E/AndroidRuntime(1496):     at android.os.Handler.handleCallback(Handler.java:615)
10-16 02:17:34.479: E/AndroidRuntime(1496):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-16 02:17:34.479: E/AndroidRuntime(1496):     at android.os.Looper.loop(Looper.java:137)
10-16 02:17:34.479: E/AndroidRuntime(1496):     at android.app.ActivityThread.main(ActivityThread.java:4745)
10-16 02:17:34.479: E/AndroidRuntime(1496):     at java.lang.reflect.Method.invokeNative(Native Method)
10-16 02:17:34.479: E/AndroidRuntime(1496):     at java.lang.reflect.Method.invoke(Method.java:511)
10-16 02:17:34.479: E/AndroidRuntime(1496):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-16 02:17:34.479: E/AndroidRuntime(1496):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-16 02:17:34.479: E/AndroidRuntime(1496):     at dalvik.system.NativeStart.main(Native Method)
10-16 02:17:34.479: E/AndroidRuntime(1496): Caused by: java.lang.reflect.InvocationTargetException
10-16 02:17:34.479: E/AndroidRuntime(1496):     at java.lang.reflect.Method.invokeNative(Native Method)
10-16 02:17:34.479: E/AndroidRuntime(1496):     at java.lang.reflect.Method.invoke(Method.java:511)
10-16 02:17:34.479: E/AndroidRuntime(1496):     at android.view.View$1.onClick(View.java:3586)
10-16 02:17:34.479: E/AndroidRuntime(1496):     ... 11 more
10-16 02:17:34.479: E/AndroidRuntime(1496): Caused by: java.lang.ArrayIndexOutOfBoundsException: length=5; index=5
10-16 02:17:34.479: E/AndroidRuntime(1496):     at com.example.quizapp.AskQuestions.onYes(AskQuestions.java:56)
10-16 02:17:34.479: E/AndroidRuntime(1496):     ... 14 more
10-16 02:17:38.499: E/Trace(1604): error opening trace file: No such file or directory (2)
10-16 02:17:39.020: D/gralloc_goldfish(1604): Emulator without GPU emulation detected. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:48:44.757

putExtra() 的第一个参数是一个字符串，其中包含应用程序的包名称和值的名称，例如“com.example.quizapp.yesValues”或“com.example.quizapp.noValues”

然后，您通过检索值

```
getIntent().getExtras().getInt("com.example.quizapp.yesValues", -1);
getIntent.getExtras().getInt("com.example.quizapp.noValues", -1); 
```

注意 getInt() 中的第二个参数是默认值

您的第二个错误是由于 IndexOutOfBoundsException。您正在尝试访问数组中不存在的索引：

```
lblQuestion.setText(messages[messageNum]); 
```

在您的 onYes() 和 onNo() 方法中。请注意，在它的正上方，您检查了 messageNum >= messages.length，然后在您通过它寻址数组之后立即进行检查。在支票内执行此操作

```
if(messageNum < messages.length) 
```

祝你好运，编码愉快！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:33:16.907

我相信您会因为这行代码而收到异常：

```
lblQuestion.setText(messages[messageNum]); 
```

在`onYes(View view);`方法中

```
messageNum value = 5; 
```

其中消息数组中的项目总数为 5

```
message.length() = 5; 
```

因此一个`ArrayIndexOutOfBounds Exception`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T07:37:33.560

你必须使用：

```
Intent summaryIntent = new Intent(this, Summary.class);
Bundle b=new Bundle();
b.putInt("Integer", IntValue);
summaryIntent.putExtras(b);
startActivity(summaryIntent); 
```

要接收整数值，请使用：

```
Bundle b = getIntent().getExtras();
mInt= b.getInt("Integer"); 
```

这段代码对我有用。

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T08:00:26.880

您正在尝试在 TextView 中设置一个 int 值。我认为这可能会有所帮助：

```
 TextView lblYes = (TextView)findViewById(R.id.yes_result);
    lblYes.setText(Integer.toString(getIntent().getExtras().getInt("value"))); 
```

你应该像这样把额外的东西放在包中：

```
 Bundle bundleObj = new Bundle();     
    bundleObj.putInt("value", getYesCount()); 
    summaryIntent.putExtras(bundleObj); 
```

# asp.net - 母版页中的用户代码未处理 nullreferenceexception

> ID：12909604
> 
> 赞同：0
> 
> 时间：2012-10-16T07:31:51.450
> 
> 标签：asp.net, master

我有母版页。下面是设计器部分。

```
<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title></title>
    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
            <asp:Label ID="lblMaster" runat="server" Text=""></asp:Label>
        </asp:ContentPlaceHolder>
    </div>
    </form>
</body>
</html> 
```

在 Master Page 的 page_load 中，我写 lblMaster.Text = "Master";

在我的 Asp.Net 页面中，

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site1.Master" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="MasterPractice.WebForm1" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
    <asp:Label ID="lblfrm" runat="server" Text="Label"></asp:Label>
</asp:Content> 
```

在我的 page_load 我得到，

```
lblfrm.Text = "Form"; 
```

我在我的母版页上收到上述错误。

请指导我提到的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:35:12.737

因为`Label`是在`ContentPlaceHolder`控件内部，所以您必须首先获取对 的引用`ContentPlaceHolder`，然后使用它的`FindControl`方法来定位`Label`。

```
ContentPlaceHolder Content2;
Label  lblfrm;
Content2 = (ContentPlaceHolder)Master.FindControl("Content2");
if(Content2 != null)
{
    lblfrm = (Label) Content2.FindControl("lblfrm");
    if(lblfrm != null)
    {
        lblfrm.Text = "Form";
    }
} 
```

[如何：参考 ASP.NET 母版页内容](http://msdn.microsoft.com/en-us/library/xxwa0ff0%28v=vs.100%29.aspx)

**编辑**：`lblMaster`按照评论中的要求查找：

```
ContentPlaceHolder ContentPlaceHolder1;
Label  lblMaster;
ContentPlaceHolder1 = (ContentPlaceHolder)Master.FindControl("ContentPlaceHolder1");
if(ContentPlaceHolder1 != null)
{
    lblMaster = (Label) ContentPlaceHolder1.FindControl("lblMaster");
    if(lblMaster != null)
    {
        lblMaster.Text = "Master";
    }
} 
```

# python - django：如何针对嵌套模型保存价值

> ID：12909605
> 
> 赞同：0
> 
> 时间：2012-10-16T07:31:55.167
> 
> 标签：python, django, django-models

我有嵌套多对多关系的模型

**IndependentTest与****Protocols**有多对多的关系

 **和**Protocols与****Format**有多对多的关系。

所以我需要针对**IndependentTests**保存特定**用户的****测试结果**。

 ******编辑：**这里是模型

```
class IndependentTest(models.Model):
    name = models.CharField(max_length=1000)
    choice = models.ManyToManyField(to=TestChoice, null=True, blank=True)
    required = models.BooleanField()
    testType = models.CharField(max_length=200,
                                choices=Values.CUSTOM_ATTRIB_TYPES)

class TestProtocol(models.Model):
    name = models.CharField(max_length=200)
    description = models.CharField(max_length=1000)
    independent_test = models.ManyToManyField(IndependentTest,
                                              through='PIOrder')

class PIOrder(models.Model):
    protocol = models.ForeignKey(TestProtocol)
    independent = models.ForeignKey(IndependentTest)
    order = models.IntegerField()

class TestFormat(models.Model):
    name = models.CharField(max_length = 100)
    test_protocol = models.ManyToManyField(TestProtocol, through='FPOrder')

class FPOrder(models.Model):
    format = models.ForeignKey(TestFormat)
    protocol = models.ForeignKey(TestProtocol)
    order = models.IntegerField() 
```

**编辑：**我不知道这是否是一个好方法，但我可以开设一个新课程

```
class CandidateTest (models.Model):
    test_value  = models.CharField(max_length = 200)
    candidate   = models.ForeignKey(Candidate)
    test        = models.ForeignKey(IndependentTest)
    testProtocol = models.ForeignKey(TestProtocol)
    testFormat  = models.ForeignKey(TestFormat) 
```

虽然结果将保存在 test_value 中，但其他数据，如测试日期或地点呢？******

# pagination - CakePHP 1.3：在单个视图中合并两个模型分页？

> ID：12909608
> 
> 赞同：0
> 
> 时间：2012-10-16T07:32:23.433
> 
> 标签：pagination, cakephp-1.3

我有两个模型，它们之间没有关系，我需要使用 cakephp 分页或自定义分页在单个视图文件中显示它。

请帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:31:17.333

如果我是你，请在 mysql 中创建一个视图，它是相关表的 UNION。然后为该视图创建一个模型并对其进行分页。

可能是最简单的方法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:42:13.483

使用导入，[http://book.cakephp.org/1.3/view/936/Importing-Controllers-Models-Components-Behaviors-](http://book.cakephp.org/1.3/view/936/Importing-Controllers-Models-Components-Behaviors-) 然后你可以对两者进行分页。请注意，我认为您必须进行某种 jquery/ajax 分页才能使两者在单个页面上正常工作。

# ios - 使用 UIWebView 共享 googleplus

> ID：12909610
> 
> 赞同：1
> 
> 时间：2012-10-16T07:32:29.923
> 
> 标签：ios, google-plus, sharing

我使用[https://developers.google.com/+/mobile/ios/](https://developers.google.com/+/mobile/ios/) 来分享 url-link 到 Google plus 的墙。用于使用 Safari 对 iOS 版 Google+ 平台进行授权。我如何使用 UiWebView？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:17:36.837

目前，oauth 对话总是链接到 Safari，无法通过 UIWebView 运行 auth 对话。如果您希望将来看到该请求，请将该请求与平台问题列表一起提交：[https ://code.google.com/p/google-plus-platform/issues/list](https://code.google.com/p/google-plus-platform/issues/list)

# ios - 自定义navigationitem titleview错帧

> ID：12909611
> 
> 赞同：0
> 
> 时间：2012-10-16T07:32:36.140
> 
> 标签：ios, navigationitem, titleview

嗨，我只是制作了一个自定义导航项标题视图，但看起来有点不对劲。
这是自定义视图，它基于 uiview

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        _titleLabel=[[[UILabel alloc] init] autorelease];
        [self addSubview:_titleLabel];

        _actionButton=[UIButton buttonWithType:UIButtonTypeCustom];
        [self addSubview:_actionButton];
        [_actionButton setImage:[UIImage imageNamed:@"arrow_cal_right"] forState:UIControlStateNormal];

    }
    return self;
}
-(void)layoutSubviews{
    [super layoutSubviews];

    [_titleLabel sizeToFit];
    [_actionButton sizeToFit];

    CGFloat height=44;//MAX(_titleLabel.frame.size.height, _actionButton.frame.size.height);
    self.frame=CGRectMake(self.frame.origin.x,
                          0,
                          _titleLabel.frame.size.width+_actionButton.frame.size.width+kMargin,
                          height);
    _titleLabel.frame=CGRectMake(0,
                                 (height-_titleLabel.frame.size.height)/2,
                                 _titleLabel.frame.size.width,
                                 _titleLabel.frame.size.height);
    _actionButton.frame=CGRectMake(_titleLabel.frame.size.width+kMargin,
                                   (height-_actionButton.frame.size.height)/2,
                                   _actionButton.frame.size.width,
                                   _actionButton.frame.size.height);
} 
```

但是当应用程序运行时，它喜欢这样，标题不在中心
屏幕截图中：http:
[//i.stack.imgur.com/yQVLr.png](http://i.stack.imgur.com/yQVLr.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:36:10.537

将 titleLabel 背景颜色设置为`[UIColor clearColor]`;

# android - 如何在android中添加双击按钮

> ID：12909612
> 
> 赞同：0
> 
> 时间：2012-10-16T07:32:36.957
> 
> 标签：android

我想为button.doble单击事件。任何人都可以给我一个想法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:35:27.353

为什么不用长按？还是您已经将其用于其他用途？长按比双按的优势：

1.  长按是 UI 指南中推荐的交互方式，而不是双击。
2.  这是用户的期望；用户可能不会找到双击操作，因为他们不会去寻找它
3.  它已经在 API 中处理。
4.  实现双点触控会影响单点触控的处理，因为您必须等待查看每个单点触控是否会变成双点触控，然后才能处理它。

如果你想双击：你可以使用 GestureDetector。

请参阅以下代码：

```
public class MyView extends View {

GestureDetector gestureDetector;

public MyView(Context context, AttributeSet attrs) {
    super(context, attrs);
            // creating new gesture detector
    gestureDetector = new GestureDetector(context, new GestureListener());
}

// skipping measure calculation and drawing

    // delegate the event to the gesture detector
@Override
public boolean onTouchEvent(MotionEvent e) {
    return gestureDetector.onTouchEvent(e);
}

private class GestureListener extends GestureDetector.SimpleOnGestureListener {

    @Override
    public boolean onDown(MotionEvent e) {
        return true;
    }
    // event when double tap occurs
    @Override
    public boolean onDoubleTap(MotionEvent e) {
        float x = e.getX();
        float y = e.getY();

        Log.d("Double Tap", "Tapped at: (" + x + "," + y + ")");

        return true;
    }
}
} 
```

# java - 去除字符串中的特殊字符

> ID：12909614
> 
> 赞同：-1
> 
> 时间：2012-10-16T07:32:51.617
> 
> 标签：java

如何去除给定字符串中的所有特殊字符。我尝试使用 charAt(i) 检查每个字符。但它很脏。有没有更好的方法来实现同样的目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T07:34:11.723

```
String.replaceAll(regexp, replaceChar) 
```

并检查字符串/正则表达式文档以了解转义字符和强大的正则表达式的其余部分！

# ios - 如何从 ipad 中的应用程序启动设置应用程序中的应用程序设置选项卡

> ID：12909615
> 
> 赞同：2
> 
> 时间：2012-10-16T07:32:51.130
> 
> 标签：ios, ipad

有什么方法可以直接从我的应用程序打开我的应用程序设置选项卡，就像我们将用来打开推特设置一样

```
([[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=TWITTER"]]). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:07:11.687

通过显示带有标准 iOS 社交框架的**Facebook**或**Twitter作曲家，将向我们展示一个 AlertView，****如果**未设置帐户，则可以选择直接转到用户的 FB 或 Twitter 设置。**因此，当您希望您的用户通过设置**应用程序登录他们时，如果他们没有这样做，这将很有帮助。

已经在 iPad 上的 iOS 6 上通过 FB 和 Twitter 对此进行了测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T00:27:08.020

避免在发推文之前使用 canSendTweet 方法进行检查，只需显示 ViewController。如果您使用的是 iOS6，也应该适用于 Social 框架。下面的例子。

```
TWTweetComposeViewController *tweetSheet = [[TWTweetComposeViewController alloc] init];
[self presentModalViewController:tweetSheet animated:YES];

//If the user doesn't have twitter enabled then an alertview will pop up giving them to option to go straight to settings. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-02T16:11:36.427

从 iOS 8 开始：

```
[[UIApplication sharedApplication] openURL:UIApplicationOpenSettingsURLString]; 
```

我认为不支持打开除您自己的应用程序（包括 Twitter 和 Facebook 配置页面）以外的任何应用程序的设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-02T16:06:32.920

只显示作曲家。如果没有可用的 FB 帐户，它将显示一个警报视图以转到设置。适用于 iOS 8

```
var controller = SLComposeViewController(forServiceType: SLServiceTypeFacebook)
controller.setInitialText("My Post")
self.presentViewController(controller, animated: true, completion: nil) 
```

# objective-c - Xcode：更改 Bundle ID 时权限被拒绝

> ID：12909616
> 
> 赞同：1
> 
> 时间：2012-10-16T07:32:55.910
> 
> 标签：objective-c, ios, xcode, macos, interface-builder

尝试更改 Xcode 项目的 Bundle ID（启用了 iCloud）并且在 Xcode 中更改 Bundle Identifier 后立即收到“无法启动应用程序，权限被拒绝”。在改变它之前，它工作得很好。供应配置文件似乎很好，权利文件也是如此。真的很迷茫。还做了一个干净和删除的 /developer/xcode/derivedData。有什么帮助吗？

扎克

# jquery - jquery移动导航栏

> ID：12909617
> 
> 赞同：1
> 
> 时间：2012-10-16T07:32:59.483
> 
> 标签：jquery, jquery-mobile

jquery mobile 中的导航栏可以快速为移动设备创建水平菜单，此处：http: [//jquerymobile.com/test/docs/toolbars/docs-navbar.html](http://jquerymobile.com/test/docs/toolbars/docs-navbar.html)

我从垂直屏幕更改为水平屏幕后遇到的问题，我看到导航栏在右侧有一个间隙。它的宽度应该是 100%。

见下图： ![在此处输入图像描述](../Images/fd3673aceb976914129514c1a9f17094.png)

任何知道这个问题的人都可以帮忙解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:46:50.727

默认情况下，如果您的导航栏中有 4 个选项卡，它们的宽度均为 25%。但是，例如，如果您的 div 或设备大小为 102 像素，则每个选项卡的宽度为 25 像素，并且会有 2 像素的间隙。
我看到你的屏幕是 609 像素宽度，也许它来自这里。尝试调整边距/填充/边框，使整个东西可以被 4 整除。

# iphone - 如何在游戏中心禁用挑战好友按钮？

> ID：12909618
> 
> 赞同：0
> 
> 时间：2012-10-16T07:33:00.057
> 
> 标签：iphone, ios, ios5, ios6, game-center

![在此处输入图像描述](../Images/80dd6bcc67c1a3d5f982569f939e15b4.png)

如何禁用挑战好友按钮？请帮我！！！

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:20:36.013

我很确定，那是不可能的。

当您向应用程序添加对成就或排行榜的支持并且该应用程序在 iOS 6+ 上运行时，“挑战”将可供用户使用。

请注意，不要将挑战与多人游戏混淆，要支持 iOS 6 下的挑战，您无需更改代码中的任何内容；）

# javascript - 设置范围：startContainer 错误

> ID：12909622
> 
> 赞同：1
> 
> 时间：2012-10-16T07:33:12.707
> 
> 标签：javascript, jquery, range

这是我的代码：

```
var range = editor.selection.getRng();
range.setStart(range.startContainer, 2); 
```

对于 Chrome，一切正常，但在 Firefox 中，我收到错误索引或大小为负数或大于允许的数量。在 Chrome 中，range.startContainer 是一个文本元素，而在 Firefox 中，它是 HtmlParagraphElement。

为什么在 FF 中会发生这种情况以及如何将此段落标签转换为文本？

我试过了：

```
range.setStart(range.startContainer.firstChild, 2); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:39:04.917

火狐的`startContainer`报道没有错，只是不同而已。`startContainer`理论上可以引用任何类型的节点，并且不同的浏览器如何选择表示某些类型的选择存在一些变化。

如果您想在编辑器的文本内容中根据字符偏移量来做所有事情，您可以使用类似[这个 answer](https://stackoverflow.com/a/4812022/96100)的东西。如果您只是想要针对这种特殊情况的解决方案，我建议您只需检查`startContainer`' 节点类型。请注意，以下假设您的元素的第一个子`<p>`元素是文本节点：

```
var range = editor.selection.getRng();
var startNode = range.startContainer;
if (startNode.nodeType !== 3) {
    startNode = startNode.firstChild;
}
range.setStart(startNode, 2); 
```

# c# - Window 8 metro Popup 带雾化

> ID：12909624
> 
> 赞同：1
> 
> 时间：2012-10-16T07:33:13.800
> 
> 标签：c#, windows-8, microsoft-metro

我在屏幕的垂直中心有一个**弹出**窗口（它填充了大约 1/3），并使用自定义内容水平拉伸以与用户交互。**当像MessageDialog**一样显示弹出窗口时，我想让当前帧淡入灰色（例如，仍然无法发布图像）

有一些将**DoubleAnimation**对象应用于**Windows.Current.Content的解决方法，但结果与****MessageDialog**的雾化略有不同。

当像**MessageDialog那样显示****Popup**时，是否有一种标准方法可以实现当前帧变灰？

 **提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:02:17.653

是的 - 让弹出窗口占据整个屏幕并在您的实际弹出窗口下方放置一个网格，它是黑色的并且不透明度 =~0.5。

看看这里 - 为您处理所有这些（和动画）的弹出窗口的完整源代码：

[http://socialeboladev.wordpress.com/2012/10/14/turn-any-usercontrol-into-a-pleeasing-dialogflyout-in-windows-8/](http://socialeboladev.wordpress.com/2012/10/14/turn-any-usercontrol-into-a-pleasing-dialogflyout-in-windows-8/)**

# jquery - Sammy mustache - 不工作（双括号中的变量未替换为值）

> ID：12909629
> 
> 赞同：3
> 
> 时间：2012-10-16T07:33:35.390
> 
> 标签：jquery, mustache, couchapp, sammy.js

我正在尝试使用 sammy 和 mustache 模板编写我的第一个 web 应用程序。模板似乎无法正确呈现（双括号中的变量不会被值替换）。这是 index.html 的相关部分——

```
 <script language="javascript" type="text/javascript" src="jquery-1.4.4.min.js"></script>
  <script language="javascript" type="text/javascript" src="sammy/sammy.js"></script>
  <script language="javascript" type="text/javascript" src="site.js"></script>

  <a href="#/hello">Hello</a>

  <div id="container">
  </div> 
```

以及 site.js 的相关部分——

```
$(function () { 
  app.s = $.sammy("#container", function () {
    this.use('Mustache', 'ms');
    // Index of all databases
    this.get('', app.index);
    this.get("#/", app.index);
    this.get("#/hello", function(context) {
        context.name = "Ram";
        context.partial('hello.ms', {name:"Ram"});
    });
  })
  app.s.run();
}); 
```

这是我的简单模板（hello.ms）——

```
Hello {{name}}. 
```

当我单击 Hello 链接时，它呈现为

> 你好{{name}}。

我期望的是：

> 你好拉姆。

任何提示我在这里做错了什么？谢谢。

PS。基本结构是使用“couchapp锅炉myapp”生成的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:07:29.630

愚蠢的我，我忘了包括“sammy.mustache.js”。我认为执行 this.use('Mustache') 会自动加载它！

# ios - 如何在IOS中用“*”字符调用（拨号）？

> ID：12909631
> 
> 赞同：3
> 
> 时间：2012-10-16T07:33:37.090
> 
> 标签：ios, character, phone-call, uiapplication

我希望用 * 字符调用。例如> *711313。

目前，我正在使用以下代码：

```
NSString *str = [NSString stringWithFormat:@"tel:%@", tmp];

[[UIApplication sharedApplication] openURL:[NSURL URLWithString:[str stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]]; 
```

我测试了两种情况：

1.  tmp = @"719929292"; //还行吧。打电话。

2.  tmp = @"*7128282"; //app没有反应。不要打电话。

我怎样才能用*（星号）打电话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:36:33.877

可能必须对星号进行编码才能在 URL 中使用。尝试`%2A`代替`*`.

`stringByAddingPercentEscapesUsingEncoding:`由于`*`是一个有效的 URL 字符，尽管具有特殊含义，但该替换并未完成。

# google-maps - IndexSizeError 使用谷歌地图 v3：使用 google.maps.Marker

> ID：12909632
> 
> 赞同：3
> 
> 时间：2012-10-16T07:33:38.930
> 
> 标签：google-maps, firefox, google-maps-api-3, maps

我正在使用 jquery 和谷歌地图 v3 创建一个页面，并且我试图在谷歌地图上显示一个标记。出于某种原因，我在使用 Firefox 时遇到错误（并且标记未显示在地图上）：

```
Error: IndexSizeError: Index or size is negative or greater than the allowed amount Source 
File: http://maps.gstatic.com/intl/en_us/mapfiles/api-3/9/17/main.js
Line: 96 
```

事实： * 它适用于 Safari * 如果我更改 MarkerImage url，它会起作用

我用来添加标记的代码如下：

```
var marker = new google.maps.Marker({
    map: map,
    icon: new google.maps.MarkerImage(
        "/gfx/icons/poi.png",
        new google.maps.Size(22,22),
        new google.maps.Point(0,0),
        new google.maps.Point(11,11),
        new google.maps.Size(22,22)),
    position: point
}); 
```

我的测试可以在这里看到：

[http://geoape.com/_wp.php](http://geoape.com/_wp.php)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T19:45:28.473

似乎问题出在 google.maps.MarkerImage 对象中，在图像的实际大小与代码中定义的不一样的情况下，确切地说是在第五个（scaledSize）参数中。由于某种原因，如果图像大小定义不正确并且 scaledSize 与实际大小匹配但与图像大小不匹配，则 Firefox 无法处理缩放。

更准确地说：图像 /gfx/icons/poi.png 不是 22 x 22 像素，而是 30 x 30 像素。所以要克服这个问题，有三种解决方案：

*   a) 相应地更改第二个参数（大小为 google.maps.Size(30,30)）；
*   b) 相应地更改第五个参数（scaledSize 为 google.maps.Size(30,30)）；
*   c) 删除将调整标记图像大小的第五个参数 (new google.maps.Size(22,22))。

在 a) 的情况下，markerImage 将被缩放到定义的尺寸 (22x22)，在 b) 和 c) 的情况下，22x22 将从原始的 30x30 尺寸中裁剪出来。

# python - 在python中使用字符串扩展切片

> ID：12909634
> 
> 赞同：4
> 
> 时间：2012-10-16T07:33:50.663
> 
> 标签：python, slice

```
>>>"helloworld"[::1]
'helloworld'

>>>"helloworld"[::-1]
'dlrowolleh' 
```

根据语法`str[start:end:step]`。在这两种情况下，开始默认为 0。在第一种情况下，字符串从索引值 0 开始打印。但在第二种情况下，字符串从索引值 -1 开始打印。

我的问题是为什么在后一种情况下从 -1 打印字符串，为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T07:50:52.793

根据[文档](http://docs.python.org/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)（强调添加）：

> 步骤 k 从 i 到 j 的 s 切片定义为具有索引 x = i + n*k 的项目序列，使得 0 <= n < (ji)/k。换句话说，索引是 i、i+k、i+2*k、i+3*k 等等，当达到 j 时停止（但从不包括 j）。如果 i 或 j 大于 len(s)，则使用 len(s)。**如果 i 或 j 被省略或没有，它们将成为“结束”值（结束取决于 k 的符号）**。注意，k 不能为零。如果 k 为无，则将其视为 1。

这意味着如果切片步幅为正，则省略的切片开始是序列的开始，而省略的切片结束是序列的结尾。如果切片步幅为负，则相反。如果您填写以下两个值之一，您可以看到这一点：

```
>>> '0123456'[:3]
'012'
>>> '0123456'[:3:-1]
'654'
>>> '0123456'[3:]
'3456'
>>> '0123456'[3::-1]
'3210' 
```

考虑这一点的一种方法是将序列可视化为一个循环，其中起点和终点是同一点。当您省略切片的一端时，您只是指定使用这个“两端点”作为端点，而不是从那里往哪个方向走。步幅标志告诉您要走哪条路，这决定了您是将“两端点”视为序列的开始还是结束。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T07:48:35.217

扩展切片组件都默认为 None （相对于 0 和`sys.maxint`简单切片）：

```
>>> class A:
...   def __getitem__(self, s):
...     return s
... 
>>> A()[::-1]
slice(None, None, -1)
>>> A()[:]
slice(0, 9223372036854775807, None) 
```

因此，没有自动假定切片应该默认从零开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T07:50:35.183

可视化这个

记住切片如何工作的最佳方法是将索引视为字符之间的指向，第一个字符的左边缘编号为 0。然后，n 个字符的字符串的最后一个字符的右边缘具有索引 n，例如：

```
 +---+---+---+---+---+ 
 | H | e | l | l | o |
 +---+---+---+---+---+ 
 0   1   2   3   4   5 
-5  -4  -3  -2  -1 
```

**索引可以是负数，从右开始计数。** 但是注意-0其实和0是一样的，所以从右数不算！

```
In [105]: "helloworld"[-0] 
Out[105]: 'h'

In [106]: "helloworld"[0]
Out[106]: 'h' 
```

即为什么反向索引从-1开始

```
In [107]: "helloworld"[-1] 
Out[107]: 'd' 
```

用于获取字符串的倒数第二个索引，`[-2]`即，需要最后一个字符的负步进，添加该步进以获取下一个索引

```
In [108]: "helloworld"[-1 + -1]
Out[108]: 'l' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T07:44:57.073

在 python 中，字符串索引如下所示。

```
"H e l l o"
0 1 2 3 4
-4 -3 -2 -1 0 
```

将使用的索引取决于您所取切片的方向。因为您给出的步骤是相反的方向，所以它使用下面的索引。但是，这在文档中没有明确说明。

编辑：

我实际上重新检查并有趣

```
str[::-1]
str[0::-1]
str[-1::-1] 
```

所有返回相同的值。所以我在原始帖子中所说的似乎是错误的。它看起来更像是语言中的错误或特殊情况处理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T07:36:09.443

使用 step = 1，不出所料，您将获得原始字符串。

在 step = -1 的情况下，python 可能实现了一种特殊情况：颠倒顺序。

毕竟， slice `[start:end]`， as`[:]`返回完整的 slice，这是预期的行为。所以将其视为两阶段操作：获取切片（在您的情况下为完整副本），应用步进（在您的情况下反向）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T07:46:03.673

您所看到的称为`striding`：

```
>>> 'helloworld'[::1] 
```

返回所有元素同时

```
>>> 'helloworld'[::2]
'hlool' 
```

返回每个第二个元素。所以，现在试试：

```
>>> 'helloworld'[::-2]
'drwle' 
```

这从最后返回每 2 个元素。因此，自然地，从末尾开始的所有元素都是反转的字符串：

```
>>> 'helloworld'[::-1]
'dlrowolleh' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-16T07:47:15.030

`-1`如果在字符串反转时start 不是隐式的，那将毫无意义。`-1`如果您尝试使用显式索引，您将看到在用作步骤时起始索引必须位于结束索引的右侧：

```
>>> "helloworld"[0:-1:-1]
''
>>> "helloworld"[-1:0:-1]
'dlrowolle' 
```

就像在正常方式切片时，范围包括起点而不包括终点，所以`h`at index`0`不是范围的一部分。这是（AFAIK）切片符号的限制，它不可能对整个字符串进行显式反转，因为这不起作用：

```
>>> "helloworld"[-1:-1:-1]
'' 
```

所以切片和反转函数必须有一个特殊情况：

```
def slice_and_reverse(s, a, b):
    "Return a slice of s from a to but not including b, reversed."
    if a == 0:
        return s[b - 1::-1]
    else:
        return s[b - 1:a - 1:-1] 
```

# c# - C# 对话框选择多个文件和文件夹

> ID：12909640
> 
> 赞同：3
> 
> 时间：2012-10-16T07:34:21.997
> 
> 标签：c#, file, directory, openfiledialog

> **可能重复：**
> [选择多个文件和文件夹 .NET 所需的对话框](https://stackoverflow.com/questions/3576769/required-dialog-for-selecting-multiple-files-and-folders-net)

我正在寻找一个对话框，它允许用户在一个对话框中选择多个文件和文件夹。我在互联网上搜索过，但没有运气找到可以解决问题的东西，只有适用于 C++ 的东西。

如果那里已经有答案，请纠正我，因为我已经认真地花时间试图找到一个已解决的问题。

我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:43:40.883

你试过[Ookii.Dialogs](http://www.ookii.org/software/dialogs/)吗？

它应该符合您的所有要求，或者至少是一个很好的起点。

也通过这个：[C# - 如何自定义 OpenFileDialog 以选择多个文件夹和文件？](https://stackoverflow.com/questions/11628021/c-sharp-how-to-customize-openfiledialog-to-select-multiple-folders-and-files)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:41:26.293

请参阅文档中的[OpenFileDialog::Multiselect](http://msdn.microsoft.com/en-us/library/system.windows.forms.openfiledialog.multiselect.aspx)属性：

> 获取或设置一个值，该值指示对话框是否允许选择多个文件。

要获取所选文件的列表，您应该使用[OpenFileDialog::FileNames](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.filenames.aspx)属性。

添加样式**OFN_ALLOWMULTISELECT**，请参阅这篇文章[Multiple File Selection without Any Extra Code](http://www.codeguru.com/cpp/w-d/doc_view/misc/article.php/c6119/)

CodeProject 文章：[SelectDialog - 多文件和文件夹选择对话框](http://www.codeproject.com/Articles/28015/SelectDialog-A-Multiple-File-and-Folder-Select-Dia)

**添加：**请参阅此添加的 C# 中的多个文件选择示例代码：

```
OpenFileDialog d = new OpenFileDialog();
d.Filter = "All files|*.*";
d.Multiselect = true;
if (d.ShowDialog() == System.Windows.Forms.DialogResult.OK)
{
    foreach (string fileName in d.FileNames)
    {
       // ... do something ...
    }
} 
```

**对于多个文件夹选择**，

您可以通过使用以下参考使用目录结构填充 TreeView 控件来使用它：

[使用文件系统目录结构填充 TreeView](https://stackoverflow.com/questions/6239544/c-sharp-how-to-populate-treeview-with-file-system-directory-structure)

其次，您可以允许使用 TreeView 控件的 SelectedNodes 来选择多个文件夹来进行多选。

[C# TreeView 多选](http://www.codeproject.com/Articles/2756/C-TreeView-with-multiple-selection)

**[FolderBrowserDialog 控件](http://www.ssware.com/articles/folderbrowserdialog-unmasked-everything-you-wanted-to-know-about-the-folder-browser-component-from-dotnet-framework.htm)**

希望对你有帮助！

# mysql - 使用 mysql 表数据进行散列

> ID：12909642
> 
> 赞同：0
> 
> 时间：2012-10-16T07:34:32.190
> 
> 标签：mysql, arrays, hash

我不确定如何在 PHP 中执行散列。我正在尝试使用文本进行搜索，该文本将存储在 mysql 表中。但我希望使用一些散列技术完成搜索，而不是使用 WHERE 子句搜索来匹配它假设查找 ID 并匹配数据的文本会更快。所以我有一个想法将这些数据排序并存储在数组中的表中并执行散列。但我不确定。如何在 PHP 中做到这一点？

假设我有这样的表

```
id工程语言
____ ______________ __________
1化学马来语
2 电气英语

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:58:13.920

```
 CREATE INDEX id_index ON table_name (engineering) USING BTREE; 
```

比较 BTREE 和 HASH

[参考](http://dev.mysql.com/doc/refman/5.5/en/index-btree-hash.html)

# ocean - 观察数据的自定义 PropertyVersions

> ID：12909651
> 
> 赞同：1
> 
> 时间：2012-10-16T07:35:04.977
> 
> 标签：ocean, petrel

有谁知道是否可以使用 Ocean 为观察到的数据创建自定义属性版本？

我想存储 2 组基于相同模板的观察值。

干杯，

尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:03:42.450

抱歉，Petrel 和 Ocean 都没有提供这个功能。您可以使用唯一预定义的 ObservedDataVersionSelection[s]，可用选项列表可以通过 Petrel 的导入数据对话框获得，或者您可以通过 ObservedDataSetForWell.AllObservedDataVersionSelections 以编程方式检索它（注意：您可以从任何 ObservedDataSetForWell 检索此列表，例如，您可以获得它来自刚刚创建的“空”集）

# jquery - 从服务器获取 Jsonp 的响应后，Jquery Ajax 回调未执行

> ID：12909653
> 
> 赞同：1
> 
> 时间：2012-10-16T07:35:10.600
> 
> 标签：jquery, ajax, asynchronous, jsonp

我正在尝试对服务器进行 jsonp 调用，代码如下所示：

```
功能我的回调（数据）{
  变种自我=这个；
  var currentId = data.ID;
  if(currentId == self.latestId){
    console.log("最新请求响应，做点什么");
    self.latestId = new Date().getTime();
  } 别的 {
    console.log("旧请求已响应，所以我们不在乎");
  }
};

函数 makeCall() {
  变种自我=这个；
  self.latestId = new Date().getTime();
  var url = serverUrl + "&ID="+ self.latestId;
  $.ajax（网址，{
   数据类型：“jsonp”，
   超时：10000，
   缓存：真，
   jsonp:"回调",
   jsonpCallback：“我的回调”，
   错误：函数（id）{
     返回函数（）{
         如果（id == self.latestId）{
           console.log("latest request errored out");//可能是由于超时
           self.latestId = new Date().getTime(); // 更新 latestid 所以 mycallback 忽略这个请求
         }
         别的 {
           console.log("旧请求出错，所以我们不再关心");
         }
     }
   }(self.latestId)
  });
};

```

来自服务器的响应类似于 myCallback({some_data...});

当只有一个请求被触发时，它按预期工作，但是当我用相同的数据触发 4-5 个请求时，ID 控制既不会转到 myCallback 也不会出错，而服务器及时成功响应。这不会始终如一地发生，因此看起来像是一个同步问题。在进行多个查询时使用命名回调是否会出现任何同步问题。如果有多个查询，只有最后一个应该获胜，但看起来不像在这里工作。由于每个请求的回调名称相同，这可能是一个问题吗？

我对这里发生的事情一无所知，有人遇到过这样的事情吗？

编辑：看起来这与提到的并行请求的回调名称有关[jQuery 中的并行 JSONP 请求不会触发多个“回调事件”？](https://stackoverflow.com/questions/10289501/parallel-jsonp-requests-in-jquery-do-not-trigger-multiple-callback-events)

# java - 在 MigLayout 中翻转行和列？

> ID：12909656
> 
> 赞同：0
> 
> 时间：2012-10-16T07:35:22.033
> 
> 标签：java, swing, layout, miglayout

在 MigLayout 的文档中写道：

> 完全支持从左到右和从下到上的布局。

这是否意味着我可以在行中而不是从左到右添加组件，但也可以在列中添加组件？所以我的意思是：

```
JPanel p = new JPanel(new MigLayout("flip_rows_and_columns"));
p.add(new JButton("A"));
p.add(new JButton("B"), "wrap");
p.add(new JButton("C")); 
```

将产生：

```
[A][C]
[B] 
```

代替

```
[A][B]
[C] 
```

对于某些布局，它可能会容易得多。还是可以以某种方式实现这种行为？可能有什么技巧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T08:43:40.400

布局约束 "flip_rows_and_columns" 是 "flowy" ，如：

```
MigLayout layout = new MigLayout("wrap 2, debug, flowy");
JComponent content = new JPanel(layout);
content.add(new JButton("A"));
content.add(new JButton("B"));
content.add(new JButton("C")); 
```

也可用于细胞。

# javascript - 如何在单个html文件中添加多个页面

> ID：12909661
> 
> 赞同：1
> 
> 时间：2012-10-16T07:35:43.643
> 
> 标签：javascript, html

我想制作一个网络应用程序，其中有多个页面但是没有使用ancchor标记的没有java脚本的onclick函数

```
 <html>
     <head>
      <script>
     function show(shown, hidden) {
     document.getElementById(shown).style.display='block';
      document.getElementById(hidden).style.display='none';
     return false;
     }
    </script>
    </head>
   <body>

   <div id="Page1">
     Content of page 1
     <a href="#" onclick="return show('Page2','Page1');">Show page 2</a>
    </div>

    <div id="Page2" style="display:none">
    Content of page 2
     <a href="#" onclick="return show('Page1','Page2');">Show page 1</a>
    </div>

   </body>
   </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:42:37.043

[您可以使用 CSS 和复选框来获得此SITE](http://www.inserthtml.com/2012/04/css-click-states/)上所写的这种行为。

复选框是唯一具有两种不同状态的 HTML 元素，可以通过`:checked`属性由 CSS 导出/评估。

引用自[http://www.inserthtml.com/2012/04/css-click-states/](http://www.inserthtml.com/2012/04/css-click-states/)：
HTML：

```
<form class="clickable"> 
  <label for="the-checkbox">Click Me!</label>
  <input type="checkbox" id="the-checkbox" /> 
  <!-- This is the div we want to appear and disappear -->
  <div class="appear">Some text to appear</div>
</form> 
```

CSS：

```
.clickable .appear { 
  display: none;
}

.clickable input:checked ~ .appear {
  display: block;
} 
```

查看该页面底部的演示。

要在两个以上的页面中进行选择，您可以使用单选按钮。未经测试，仅作为一个想法；）

# java - 如何在 Java 中从 XML 中删除 CDATA 并进行一些转换？

> ID：12909664
> 
> 赞同：0
> 
> 时间：2012-10-16T07:36:07.277
> 
> 标签：java, xml

我正在尝试创建将修改现有 XML 的 Java Servlet。

这是我原始 XML 的一部分：

```
<customfieldvalues>
<div id="errorDiv" style="display:none;"/>
<![CDATA[ 
 Vinduer, dører
 ]]>
</customfieldvalues> 
```

我想得到以下结果：

```
<customfieldvalues>
<div id="errorDiv" style="display:none;"/>
Vinduer, d&#248;rer
</customfieldvalues> 
```

我使用以下方法遍历 XML 结构：

```
Document doc = parseXML(connection.getInputStream());
NodeList descNodes = doc.getElementsByTagName("customfieldvalues");
for (int i=0; i<descNodes.getLength();i++) {
    Node node = descNodes.item(i);
    // how to ?
} 
```

所以，我需要删除`CDATA`和转换内容。我看到我可以用[它](http://commons.apache.org/lang/api/org/apache/commons/lang3/StringEscapeUtils.html)来进行转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:18:19.323

javax.xml.parsers.DocumentBuilderFactory.setCoalescing API

*   指定此代码生成的解析器将
*   将 CDATA 节点转换为 Text 节点并将其附加到
*   相邻（如果有）文本节点。默认情况下，此值设置为
*   `false`

# xml - 是否可以在 XSD 中将属性的默认值设置为其他属性的值？

> ID：12909668
> 
> 赞同：0
> 
> 时间：2012-10-16T07:36:13.113
> 
> 标签：xml, xsd, xml-attribute

假设我有一个这样的 XML：

```
<foo ...>
   <bar a="s1" b="s2" />
   <bar a="s3" />
</foo> 
```

我想在 XSD 中定义的是属性的默认值`b`应该是属性的值`a`。那可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T09:55:22.007

简短的回答：没有。

中等答案，根据“XML Schema Part 1: Structures Second Edition”，“3.2.1 属性声明模式组件”部分：“*默认*指定属性无条件地出现在·post-schema-validation infoset·中，带有当属性实际不存在时使用的提供值”

长而实用的答案：关键是“后模式验证信息集”。所以问问自己，你需要模式文档做什么？

*   如果您需要它来验证传入的 XML 文档，那么只需使用`use="required"`for 属性`b`
*   如果您需要它来构建对象（例如，使用一些（非）编组技术，如 Java 的 JAXB 或 .NET 的`XmlSerializer`），那么您必须明确添加一些满足此“post-schema-validation-infoset”术语的后处理 - 您应该检测 的值`b`是否未设置并自行设置 - 这是您的*业务需求*
*   如果您需要传达您的意图（*我/我的应用程序会将空`b`视为具有与 相同的值`a`）添加文档。XML Schema 没有这样的概念。使用外推法 - 这与“的值`b`将是当前美元/欧元比率”的要求相同 - 它只是计算值

# arrays - Eigen 的 Map<> 作为类成员

> ID：12909675
> 
> 赞同：0
> 
> 时间：2012-10-16T07:36:37.640
> 
> 标签：arrays, initialization, default-constructor, eigen, class-members

我正在尝试拥有一个包含数组但通过特征与它们具有接口的类。

```
class A {
public:
  array<double,3> xa;
  Map<Matrix<double,3,1>> x;
  A() : x(xa.data(),xa.size()) {}
}; 
```

这不起作用：

```
A a;
a.xa[0] = 0.12;
cout << a.x ; 
```

我认为问题是因为 Map<> 没有默认构造函数。[http://eigen.tuxfamily.org/dox/TutorialMapClass.html#TutorialMapPlacementNew](http://eigen.tuxfamily.org/dox/TutorialMapClass.html#TutorialMapPlacementNew)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T07:11:08.140

您提供的示例对我有用（Eigen 3.0.1 和 GCC 4.6.1）

```
#include <Eigen/Core>
#include <array>
#include <iostream>

using namespace std;
using namespace Eigen;

class A {
public:
  array<double,3> xa;
  Map<Matrix<double,3,1>> x;
  A() : x(xa.data(),xa.size()) {}
};

int main()
{
    A a;
    a.xa[0] = 0.12;
    cout << a.x ;    
} 
```

编译时

```
g++ test.cpp -std=c++0x -o test -I/usr/include/eigen3 
```

调用生成的测试可执行文件时，我得到以下输出：

```
[/tmp]% ./test        
0.12
2.07717e-317
0% 
```

# jquery - 如何在画布上绘制时包含贝塞尔曲线

> ID：12909679
> 
> 赞同：2
> 
> 时间：2012-10-16T07:36:54.573
> 
> 标签：jquery, html, canvas

我有一个可以在画布元素上绘制的插件。但是因为我对画布元素的功能部分不熟悉。我想知道我应该在哪里编写贝塞尔曲线方法来改进画布上绘制的曲线。这是示例代码：

```
jQuery( window ).load(function(){
            setTimeout(
                function(){
                    window.scrollTo( 0, 0 );
                },
                100
            );
        }
    );

    // When The DOM loads, initialize the scripts.
    jQuery(function( $ ){

    var restorePoints = [];
    var canvas = $( "canvas" );
    var a=false;
    var b,c="";
    var d=document.getElementById("can");
    var e=d.getContext("2d");
    e.strokeStyle="black";
    e.lineWidth=3;
    e.lineCap="round";
    e.fillStyle="rgba(0, 0, 200, 0)";
    e.fillRect(0,0,d.width,d.height);
    $("#bsz").change(function(a){e.lineWidth=this.value; });
    $("#bcl").change(function(a){e.strokeStyle=this.value; window.location.hash = '#';});

        //$("#can").mousedown(function(d){saveRestorePoint();a=true;e.save();b=d.pageX-this.offsetLeft;c=d.pageY-this.offsetTop});

        $(document).click(function(){a=false});

        var isIPhone = (new RegExp( "iPhone", "i" )).test(
            navigator.userAgent
        );

        var getCanvasLocalCoordinates = function( pageX, pageY ){
            var position = canvas.offset();

            return({
                x: (pageX - position.left),
                y: (pageY - position.top)
            });
        };

        var getTouchEvent = function( event ){
            return(
                isIPhone ?
                    window.event.targetTouches[ 0 ] :
                    event
            );
        };

        var onTouchStart = function( event ){

            window.location.hash = '#';

            var touch = getTouchEvent( event );
            var localPosition = getCanvasLocalCoordinates(
                touch.pageX,
                touch.pageY
            );

            saveRestorePoint();
            a=true;
            e.save();
            b=localPosition.x;
            c=localPosition.y;

            if(a==true){
            e.beginPath();
            e.moveTo(localPosition.x,localPosition.y);
            e.lineTo(localPosition.x+1,localPosition.y+1);
            e.stroke();
            e.closePath();
            b=localPosition.x;
            c=localPosition.y;
            }

            lastPenPoint = {
                x: localPosition.x,
                y: localPosition.y
            };

            canvas.bind(
                (isIPhone ? "touchmove" : "mousemove"),
                onTouchMove
            );

            canvas.bind(
                (isIPhone ? "touchend" : "mouseup"),
                onTouchEnd
            );
        };

        var OnClick = function( event ){
            var touch = getTouchEvent( event );
            var localPosition = getCanvasLocalCoordinates(
                touch.pageX,
                touch.pageY
            );

            lastPenPoint = {
                x: localPosition.x,
                y: localPosition.y
            };

            if(a==true){
            e.beginPath();
            e.moveTo(localPosition.x,localPosition.y);
            e.lineTo(localPosition.x+1,localPosition.y+1);
            e.stroke();
            e.closePath();
            b=localPosition.x;
            c=localPosition.y;
            }

        };

        var onTouchMove = function( event ){
            var touch = getTouchEvent( event );
            var localPosition = getCanvasLocalCoordinates(
                touch.pageX,
                touch.pageY
            );

            lastPenPoint = {
                x: localPosition.x,
                y: localPosition.y
            };

            if(a==true){
            e.beginPath();
            e.moveTo(localPosition.x,localPosition.y);
            e.lineTo(b,c);
            e.stroke();
            e.closePath();
            b=localPosition.x;
            c=localPosition.y;
            }

        };

        var onTouchEnd = function( event ){
            canvas.unbind(
                (isIPhone ? "touchmove" : "mousemove")
            );

            canvas.unbind(
                (isIPhone ? "touchend" : "mouseup")
            );
        };

        canvas.bind(
            (isIPhone ? "touchstart" : "mousedown"),
            function( event ){
                onTouchStart( event );
                return( false );
            }); 
```

# sql - 在 T-SQL 中访问同一级别的父节点

> ID：12909683
> 
> 赞同：1
> 
> 时间：2012-10-16T07:37:12.063
> 
> 标签：sql, tsql

假设我有一个这样的数据库模式：

```
RowId   ParentId   Name
------ ---------- ------
1       NULL      Level1
2       NULL      Level2
3       1         Leaf1
4       1         Leaf2
5       2         Leaf1
6       3         LeafX 
```

基本上，树看起来像这样：

```
Level1
       Leaf1
             LeafX
       Leaf2
Level2
       Leaf1 
```

我需要以最有效和最动态的方式提取 LeafX 的所有祖先级别。

所以会输出： Leaf1, Leaf2, and Leaf1 (of Level2)

如何在 T-SQL 中执行此操作？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T08:52:50.247

这会给你你想要的结果。

```
;with C as
(
  select T.rowid,
         T.parentid,
         T.name,
         1 as Lvl
  from YourTable as T
  where T.parentid is null
  union all
  select T.rowid,
         T.parentid,
         T.name,
         C.Lvl + 1
  from YourTable as T
    inner join C
       on T.parentid = C.rowid
)
select *
from C
where C.Lvl = (
               select C.lvl-1
               from C
               where C.name = 'LeafX'
              ) 
```

**更新**
这对你来说可能更快。你必须测试你的数据。

```
declare @Level int;

with C as
(
  select T.rowid,
         T.parentid
  from @t as T
  where T.name = 'LeafX'
  union all
  select T.rowid,
         T.parentid
  from @t as T
    inner join C
       on T.rowid = C.parentid
)
select @Level = count(*) - 1
from C;

with C as
(
  select T.rowid,
         T.parentid,
         T.name,
         1 as Lvl
  from @t as T
  where T.parentid is null
  union all
  select T.rowid,
         T.parentid,
         T.name,
         C.Lvl + 1
  from @t as T
    inner join C
       on T.parentid = C.rowid
  where C.Lvl < @Level
)
select *
from C
where C.Lvl = @Level; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:41:45.793

有几种方法可以做到这一点。我最喜欢的是创建特殊的表 Trees_Parents，您将在其中存储每个父节点的所有节点。所以如果有这样的结构

```
RowId   ParentId   Name
------ ---------- ------
1       NULL      Level1
2       NULL      Level2
3       1         Leaf1
4       1         Leaf2
5       2         Leaf1
6       3         LeafX 
```

你的 Trees_Parents 表看起来像

```
RowId   ParentId
------ ----------
1       1     
2       2     
3       3
3       1        
4       4
4       1        
5       5
5       2        
6       6
6       1
6       3 
```

然后当您需要检索所有孩子时，您只需编写

```
select RowID from Trees_Parents where ParentId = 1 
```

我将行 self 存储在此表中以避免联合，如果您不需要它，您可以编写

```
select RowID from Trees_Parents where ParentId = 1 and ParentId <> RowId 
```

对于所有的父母，你会写

```
select ParentId from Trees_Parents where RowId = 6 and ParentId <> RowId 
```

您还可以将 Table_Name 存储在表 Trees_Parents 中，以便将其用于不同的表

另一种方法是编写递归 WITH 子句，但是如果您的树很大并且它不经常更改，我认为最好将父数据存储在附加表中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T08:06:01.253

那么你可以使用递归解决方案。您需要获取所有节点的深度 = 您节点的深度 - 1

```
declare @Temp table (RowId int, ParentId int, Name nvarchar(128))

insert into @Temp
select 1, null, 'Level1' union all
select 2, null, 'Level2' union all
select 3, 1, 'Leaf1' union all
select 4, 1, 'Leaf2' union all
select 5, 2, 'Leaf3' union all
select 6, 3, 'LeafX';

with Parents
as
(
    select T.RowId, 0 as Depth from @Temp as T where T.ParentId is null
    union all
    select T.RowId, P.Depth + 1
    from Parents as P
        inner join @Temp as T on T.ParentId = P.RowId
)
select T.Name
from Parents as P
    outer apply (select TT.Depth from Parents as TT where TT.RowId = 6) as CALC
    left outer join @Temp as T on T.RowId = P.RowId
where P.Depth = CALC.Depth - 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T08:19:36.417

```
declare @t table(rowid int, parentid int, name varchar(10))
insert @t values(1,NULL,'Level1')
insert @t values(2,NULL,'Level2')
insert @t values(3,1,'Leaf1')
insert @t values(4,1,'Leaf2')
insert @t values(5,2,'Leaf1')
insert @t values(6,3,'LeafX')

;with a as
(
select rowid, parentid, 0 level from @t where name = 'leafx'
union all
select t.rowid, t.parentid, level + 1 from @t t
join a on a.parentid = t.rowid
), b as
(
select rowid, parentid,name,  0 level from @t where parentid is null
union all
select t.rowid, t.parentid,t.name, level + 1 
from b join @t t on b.rowid = t.parentid
)
select rowid, parentid, name from b
where level = (select max(level)-1 from a)

rowid   parentid    name
5   2   Leaf1
3   1   Leaf1
4   1   Leaf2 
```

# oracle - 如果我输入任何一个变量，如何自动显示结果？

> ID：12909684
> 
> 赞同：1
> 
> 时间：2012-10-16T07:37:12.830
> 
> 标签：oracle, plsql

我希望它在执行时显示变量之一或所有变量或变量 2。我该怎么做？

```
 declare @sql varchar(8000)
declare @sql_where varchar(8000)

declare @ww varchar(10)
declare @plant varchar(10)
declare @plnr_id varchar(10)

set @plant = 'CS58'
set @ww = '201240'  
set @plnr_id = ''

set @sql_where = ''
set @sql = 'select * from  rout_sub_doi '

if len(@plant) > 0
    set @sql_where = 'where plant IN('''+ @plant +''') '

if len(@ww) > 0
    set @sql_where = @sql_where + 'AND sys_intel_ww IN ('''+  @ww +''') '

if len(@plnr_id) > 0 

    set @sql_where = @sql_where + 'AND  plnr_id IN (''' + @plnr_id + ''') '

print @sql
print @sql_where

exec (@sql + @sql_where ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:57:48.510

试试这个代码：

```
SET SERVEROUTPUT ON
declare 
  vsql varchar(8000);
  sql_where varchar(8000);
  ww varchar(10);
  plant varchar(10);
  plnr_id varchar(10);
begin
  plant := 'CS58';
  ww := '201240';  
  plnr_id := '';
  sql_where := '';
  vsql := 'select * from  rout_sub_doi ';

  if (length(plant) > 0)
  then
    sql_where := 'where plant IN('''||plant||''') ';
  end if;

  if (length(ww) > 0)
  then
    sql_where := sql_where ||'AND sys_intel_ww IN ('''||ww||''')';
  end if;

  if (length(plnr_id) > 0 )
  then
    sql_where := sql_where + 'AND  plnr_id IN ('''||plnr_id||''') ';
  end if;

  dbms_output.put_line(vsql);  
  dbms_output.put_line(sql_where);  

  vsql:=vsql+vsql_where;

  execute immediate vsql;    
end;
/ 
```

# javascript - 探索此示例错误

> ID：12909687
> 
> 赞同：-4
> 
> 时间：2012-10-16T07:37:16.273
> 
> 标签：javascript, this

我正在努力了解`this`javascript 的工作原理，并在教程中遇到了这个示例。这个例子为我生成了一个语法错误，所以我希望有人能解释错误的原因。代码：

```
 <!DOCTYPE html><html lang="en">
        <body>
            <script>
                var myObject = {
                   myProperty:'Icanseethelight',
                   myMethod:function() {
                       var that=this; 
                       var helperFunctionfunction(){
                            function() { 
                                console.log(that.myProperty);
                                console.log(this);
                            }();
                    }
                }

                myObject.myMethod(); // invoke myMethod

        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:40:44.213

```
var myObject = {
    myProperty:'Icanseethelight',
    myMethod:function() {
       var that=this; 
       var helperFunction = function(){
           console.log(that.myProperty);
           console.log(this);
       }
    }
}
myObject.myMethod(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:39:30.530

你应该用 var`helperFunctionfunction(){` 替换`var helperFunction = function(){`

# wordpress - 我可以从侧边栏中隐藏类别（及其子类别）吗？

> ID：12909688
> 
> 赞同：0
> 
> 时间：2012-10-16T07:37:20.617
> 
> 标签：wordpress

我将小部件类别放在仪表板的主侧边栏上。比，在代码上，我使用：

```
<?php get_sidebar('left'); ?> 
```

并为类别创建代码。现在，我想隐藏 tag_ID=6 的类别及其所有子类别。

我该怎么做？

试过这个[教程](http://www.lancelhoff.com/how-to-hide-wordpress-categories/)，但似乎我没有这`$cat_args = "orderby=name&show_count={$c}&hierarchical={$h}";`条线？我使用的是 WordPress 的最新版本，3.4.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:40:48.397

该教程似乎过时了，所以我不会依赖它。没有必要在 WordPress 源代码中进行修改 - 创建一个简单的插件，它可以连接到正确的过滤器。

在您的情况下，这些过滤器是`widget_categories_dropdown_args`（当您在小部件选项中选择“显示为下拉菜单”时）和[`widget_categories_args`](http://codex.wordpress.org/Plugin_API/Filter_Reference/widget_categories_args)（如果小部件将列表显示为带有链接的普通文本）。

有了这些知识，您现在可以编写实际的插件（我称它为 Myplugin，我认为您应该重命名它） - 只需将该 PHP 代码放入文件中`wp-content/plugins/myplugin.php`：

```
<?php
/**
 * @package Myplugin
 * @version 1.0
 */
/*
Plugin Name: Myplugin
Plugin URI: http://example.com
Description: 
Author: You
Version: 1.0
Author URI: http://example.com
*/

// Create a list with the ID's of all children for 
// the given category-id
function myplugin_recursive_filter($catid) {
    $result = array($catid);

    $cats = get_categories(array(
        'child_of' => $catid,
    ));

    foreach($cats as $category) {
        $result[] = $category->cat_ID;
    }

    return implode(",", $result);
}

// Actual filter function. Just set the "exclude" 
// entry to a comma separated list of category ID's 
// to hide.
function myplugin_filter_categories_args($args) {
    // 6 is the "tag_ID"
    $args['exclude'] = myplugin_recursive_filter(6);

    // or hard code the list like that:
    //$args['exclude'] = '6,10,11,12';
    // but you'd have to include the ID's of the
    // children, because "eclude" is not recursive.
    return $args;
}

// Register the filter to the relevant tags
add_filter('widget_categories_dropdown_args',
    'myplugin_filter_categories_args', 10, 1);

add_filter('widget_categories_args',
    'myplugin_filter_categories_args', 10, 1); 
```

该函数`myplugin_recursive_filter`是必需的，因为`exclude`-entry 不是递归的（除非您在小部件选项中选中“显示层次结构”）。如果您的类别没有太大变化，您可以用硬编码的 ID 列表（与孩子）替换函数调用以获得更好的性能。

# python - wxPython：GridBagSizer 的问题

> ID：12909690
> 
> 赞同：2
> 
> 时间：2012-10-16T07:37:24.687
> 
> 标签：python, wxpython

我是 wxpython 的新手，它似乎是构建 GUI 的非常强大的工具，但我有一个关于 GridBagSizer 的问题。您能否告诉我如何将放置在 GridBagSizer 中的项目的大小调整为它们应该放置的框架的大小。我在最后附上了示例：从 8 到 13 的按钮超出了框架，但我想要的是使按钮的大小自动调整大小以适应框架。任何意见和建议表示赞赏。

最好的问候，尼基塔

```
import wx

class Frame ( wx.Frame ):
   def __init__( self ):
      wx.Frame.__init__ ( self, None, id = wx.ID_ANY, title = wx.EmptyString, pos =                wx.DefaultPosition, size = wx.Size( 500,300 ), style = wx.DEFAULT_FRAME_STYLE & ~   (wx.MAXIMIZE_BOX|wx.MINIMIZE_BOX|wx.RESIZE_BORDER) )
      nums = (('1',(0,3)), ('2',(2,3)), ('14', (3,3)), ('15',(4,3)), ('16',(5,3)), ('17',(6,3)), ('18',(7,3)),
        ('3',(1,0)), ('4',(1,1)), ('5',(1,2)), ('6',(1,3)), ('7',(1,4)), ('8',(1,5)), ('9',(1,6)), ('10',(1,7)),
        ('11',(1,8)), ('12',(1,9)), ('13',(1,10)))

      panel = wx.Panel(self,-1)
      panel.SetBackgroundColour("green")
      grid = wx.GridBagSizer(2,2)

      for num, pos in nums:
         button = wx.Button(panel, wx.NewId(), label = num)
         grid.Add(button, pos, flag=wx.EXPAND)

      bs2 = wx.BoxSizer(wx.VERTICAL)
      bs2.Add(grid, 0, wx.EXPAND,0)

      panel.SetSizer(bs2)
      panel.Layout()
      self.mainSizer = wx.BoxSizer(wx.VERTICAL)
      self.mainSizer.Add(panel, 0, wx.EXPAND, 0)
      self.SetSizer(self.mainSizer)
      self.Layout()

if __name__=='__main__':
   app=wx.PySimpleApp()
   app.frame = Frame()
   app.frame.Center()
   app.frame.Show(True)
   app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T08:12:29.340

您必须通过调用允许列增长`AddGrowableCol`：

```
 for i in range(11):
      grid.AddGrowableCol(i) 
```

现在，它们可以增长，但它们不会缩小到超出初始大小！因此，您还应该减小它们的起始大小：

```
 for num, pos in nums:
     button = wx.Button(panel, wx.NewId(), size=(10,-1), label = num)
     #original code was:  button = wx.Button(panel, wx.NewId(), label = num)
     grid.Add(button, pos, flag=wx.EXPAND) 
```

这是完整的清单：

```
import wx

class Frame ( wx.Frame ):
    def __init__( self ):
       wx.Frame.__init__ ( self, None, id = wx.ID_ANY, title = wx.EmptyString, pos =
                         wx.DefaultPosition, size = wx.Size( 500,300 ),
                         style = wx.DEFAULT_FRAME_STYLE & ~   (wx.MAXIMIZE_BOX|wx.MINIMIZE_BOX|wx.RESIZE_BORDER) )
       nums = (('1',(0,3)), ('2',(2,3)), ('14', (3,3)), ('15',(4,3)), ('16',(5,3)), ('17',(6,3)), ('18',(7,3)),
         ('3',(1,0)), ('4',(1,1)), ('5',(1,2)), ('6',(1,3)), ('7',(1,4)), ('8',(1,5)), ('9',(1,6)), ('10',(1,7)),
         ('11',(1,8)), ('12',(1,9)), ('13',(1,10)))

       panel = wx.Panel(self,-1)
       panel.SetBackgroundColour("green")
       grid = wx.GridBagSizer(2,2)

       for num, pos in nums:
           button = wx.Button(panel, wx.NewId(), size=(10,-1), label = num)
           grid.Add(button, pos, flag=wx.EXPAND)

       for i in range(11):
           grid.AddGrowableCol(i)

       bs2 = wx.BoxSizer(wx.VERTICAL)
       bs2.Add(grid, 0, wx.EXPAND,0)

       panel.SetSizer(bs2)
       panel.Layout()
       self.mainSizer = wx.BoxSizer(wx.VERTICAL)
       self.mainSizer.Add(panel, 0, wx.EXPAND, 0)
       self.SetSizer(self.mainSizer)
       self.Layout()

if __name__=='__main__':
    app=wx.PySimpleApp()
    app.frame = Frame()
    app.frame.Center()
    app.frame.Show(True)
    app.MainLoop() 
```

# html - 如何在html5中缩放后显示部分画布

> ID：12909699
> 
> 赞同：1
> 
> 时间：2012-10-16T07:37:50.260
> 
> 标签：html, canvas, scaling

**如何在html5中缩放后显示部分画布**

例如：

```
var c =document.getElementById("mycanvas");
var canvas = c.getContext("2d");
canvas.scale(4,4);
    canvas.drawImage(img,0,0);
    canvas.drawImage(img,200,200); 
```

`img`是一些图像。

在这里我已经缩放了一些值，现在它显示画布的左上角区域（只有左上角图像）但是如果我希望它显示右下角区域（只有右下角图像）或根据到我给它的坐标。我怎样才能做到这一点？

有人可以帮我吗？我将不胜感激......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:14:38.067

您可以通过以下方式使用 drawImage：

```
drawImage(
    image,
    sourceX,
    sourceY,
    sourceWidth,
    sourceHeight,
    destinationX,
    destinationY,
    destinationWidth, 
    destinationHeight
 ); 
```

您确定所需的源区域，然后确定要将其放置在画布上的位置。

你可以在这里找到一些信息：[MDN Draw image documentation](https://developer.mozilla.org/en-US/docs/Canvas_tutorial/Using_images#Slicing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:17:41.710

~~如果你正在缩放，你必须记住，你用来定位的坐标也会被放大，所以如果你按比例缩放，`4`你的坐标将会是`200 * 4`而不是`200`。要单独缩放图像，您可以使用调用`drawImage(img,x,y,width,height)`并使用...~~

 ~~```
var c = document.getElementById("mycanvas");
var ctx = c.getContext("2d");
var scale = 4;
var width = img.width * scale;
var height = img.height * scale;
ctx.drawImage(img, 0, 0, width, height);
ctx.drawImage(img, 200, 200, width, height); 
```~~ 

或者您需要将坐标除以比例因子...

```
var c = document.getElementById("mycanvas");
var ctx = c.getContext("2d");
var scale = 4;
ctx.scale(scale, scale);
ctx.drawImage(img, 0, 0);
ctx.drawImage(img, 200 / scale, 200 / scale); 
```

我整理了一个小提琴，展示了使用剪辑的后一种方法，以确保图像保持在其象限[http://jsfiddle.net/ujtd2/](http://jsfiddle.net/ujtd2/)

**使用状态堆栈进行编辑**，您可以避免自己进行转换。

```
var c = document.getElementById("mycanvas");
var ctx = c.getContext("2d");
var scale = 4;

// add a new item to the context state stack
ctx.save();
ctx.scale(scale, scale);
ctx.drawImage(img, 0, 0);

// discard the previous state be restoring the last state
// back to normal scale
ctx.restore();

// Set translation
ctx.translate(200, 200);

// Repeat for second image
ctx.save();
ctx.scale(scale, scale);
ctx.drawImage(img, 0, 0); 
```

 ~~我现在跟着。要从特定坐标放大并显示场景的一部分，请使用平移。

```
ctx.scale(4, 4);
ctx.translate(-200, -200);
ctx.drawImage(img, 0, 0);
ctx.drawImage(img, 200, 200); 
```

这将放大 4 倍，然后通过将绘图坐标向上和向左平移 200 像素，将可见部分向下和向右移动 200 像素。~~

# c# - 如何用 RadWindow 替换警报消息框

> ID：12909701
> 
> 赞同：3
> 
> 时间：2012-10-16T07:38:04.437
> 
> 标签：c#, asp.net, telerik

我的代码：

```
<telerik:RadWindow ID="UpdateFavoriteRadWindow" Width="300" Height="150" VisibleOnPageLoad="false" CssClass="radwindow" runat="server">
    <ContentTemplate>
        <div align="center" class="addFavoriteborder">
            <br /><br />
            <div>
                <asp:Label ID="lblUpdateFavorite" runat="server" Text="Changes Updated"></asp:Label>
            </div>
            <br />
        </div>
    </ContentTemplate>
</telerik:RadWindow>

protected void btnUpdateReport_Click(object sender, ImageClickEventArgs e)
{
    // code to update
    Response.Write("<script>alert('Changes Updated')</script>"); // how to replace this message box with RadWindow
} 
```

我想显示 RadWindow 而不是警报消息框。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:42:37.563

**编辑**

RAD 警报框

```
protected void Button1_Click(object sender, EventArgs e)
  {
      RadWindowManager windowManager = 
               FindControl(this, "WindowManager") as RadWindowManager;
   windowManager.RadAlert("MessageText", 400, null, "title", null);                   
  } 
```

更多详细信息：[在按钮单击事件上打开 RadWindow](http://www.telerik.com/community/forums/aspnet-ajax/window/open-radwindow-on-button-click-event.aspx)

有关更多详细信息，请查看 RAD 网站上的此讨论：[http ://www.telerik.com/community/forums/aspnet-ajax/window/problem-with-radwindows-confirm-and-alert.aspx](http://www.telerik.com/community/forums/aspnet-ajax/window/problem-with-radwindows-confirm-and-alert.aspx)

# unix - 拆分文件或提取基于模式不同的行

> ID：12909705
> 
> 赞同：2
> 
> 时间：2012-10-16T07:38:11.347
> 
> 标签：unix, sed

我有一个这样的制表符分隔文件：

```
Supercontig_1.1 400  1500  1       4
Supercontig_1.1 400  1500  2       4
Supercontig_1.1 20000  138566  1       1
Supercontig_1.1 20000  138566  2       1
Supercontig_1.2 300  1000  1       2
Supercontig_1.2 300  1000  2       2
Supercontig_1.2 1300  15000  1       2
Supercontig_1.2 1300  15000  2       2
Supercontig_1.3 0  10000  1       5
Supercontig_1.3 0  10000  2       5 
```

我想将基于模式“Supercontig_1.X”的所有行提取到一个单独的文件中。即一个文件中所有带有 Supercontig_1.1 的行，另一个文件中带有 Supercontig_1.2 的所有行...我尝试查看“sed”命令，但是当搜索模式不同时我不确定如何使用它所有行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T07:44:54.150

一种使用方式`awk`：

```
awk '{ print $0 >$1 }' infile 
```

这会产生：

```
==> Supercontig_1.1 <==
Supercontig_1.1 400  1500  1       4
Supercontig_1.1 400  1500  2       4
Supercontig_1.1 20000  138566  1       1
Supercontig_1.1 20000  138566  2       1

==> Supercontig_1.2 <==
Supercontig_1.2 300  1000  1       2
Supercontig_1.2 300  1000  2       2
Supercontig_1.2 1300  15000  1       2
Supercontig_1.2 1300  15000  2       2

==> Supercontig_1.3 <==
Supercontig_1.3 0  10000  1       5
Supercontig_1.3 0  10000  2       5 
```

我没有看到您的字段用逗号分隔，只有空格。`FS`如果是这种情况，请更改字段分隔符 ( )，例如：`BEGIN { FS=","; }`在脚本的开头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T08:23:27.353

这可能对您有用（GNU sed）：

```
sed -r ':a;$!N;s/^((\S*)\s.*)\n\2.*/\1/;ta;s/(\S*).*/\/^\1\/w\1/;P;D' file | 
sed -nf - file 
```

这仅在文件已排序时才有效。

如果文件未排序，请使用：

```
sort -u -k1,1 file | sed -r 's#^(\S*).*#/^\1/w\1#' | sed -nf - file 
```

# android - 使用 android 自定义强化规则

> ID：12909710
> 
> 赞同：0
> 
> 时间：2012-10-16T07:38:29.430
> 
> 标签：android, rules, fortify

我想编写一个强化规则，在 android 代码库中查找“addJavascriptInterface”的实例。

```
<?xml version="1.0" encoding="UTF-8"?>
<RulePack xmlns="xmlns://www.fortifysoftware.com/schema/rules">
    <RulePackID>80B927D2-5408-41B4-B47C-B4958DAAECBD</RulePackID>
    <SKU>SKU-80B927D2-5408-41B4-B47C-B4958DAAECBD</SKU>
    <Name><![CDATA[android.xml]]></Name>
    <Version>1.0</Version>
    <Description><![CDATA[Description for android.xml]]></Description>
    <Rules version="3.13">
        <RuleDefinitions>
            <SemanticRule formatVersion="3.13" language="java">
                <MetaInfo>
                    <Group name="Accuracy">5.0</Group>
                    <Group name="Impact">5.0</Group>
                    <Group name="RemediationEffort">15.0</Group>
                    <Group name="Probability">5.0</Group>
                </MetaInfo>
                <RuleID>CC4B8F82-0824-4DF1-8A5F-513DC6820B99</RuleID>
                <VulnCategory>Testjsinterface</VulnCategory>
                <DefaultSeverity>5.0</DefaultSeverity>
                <Description/>
                <Type>default</Type>
                <FunctionIdentifier>
                    <NamespaceName>
                        <Pattern>\w*</Pattern>
                    </NamespaceName>
                    <ClassName>
                        <Pattern>WebView</Pattern>
                    </ClassName>
                    <FunctionName>
                        <Pattern>addJavascriptInterface</Pattern>
                    </FunctionName>
                    <ApplyTo implements="true" overrides="true" extends="true"/>
                </FunctionIdentifier>
            </SemanticRule>
        </RuleDefinitions>
    </Rules>
</RulePack> 
```

当我尝试针对代码库运行 fortify 时，我得到以下信息：-

```
[warning]: The following references to java classes could not be resolved. Please make sure to supply all the required jar files that contain these classes to SCA.
    Override
    android.app.Activity
    android.content.res.AssetManager
    android.os.Bundle
    android.util.Log
    android.view.KeyEvent
    android.webkit.WebSettings
    android.webkit.WebView
    android.webkit.WebViewClient 
```

所以我尝试按如下方式运行强化：-

```
bin/sourceanalyzer ~/repos/android-rule-tests/WebViewTest -cp ~/android-sdks/platforms/android-16/android.jar 
```

警告消失了，但规则似乎仍然没有触发——可能出了什么问题？

编辑为清楚起见，WebViewTest 是一个使用 addJavascriptInterface 的示例项目。

EDIT2 为清楚起见添加了一些代码

```
package org.infil00p.phoneTest;

import java.io.IOException;

import com.infil00p.phoneTest.R;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.KeyEvent;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.content.res.AssetManager;

public class TestActivity extends Activity {

    WebView appView;
    TestWebViewClient testClient;
    String TAG="FAILTAG";
    Bolt data = new Bolt();
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        testClient = new TestWebViewClient();

        appView = (WebView) findViewById(R.id.appView);
        appView.getSettings().setDatabaseEnabled(true);
        appView.getSettings().setJavaScriptEnabled(true);
        appView.addJavascriptInterface(data, "test");

        appView.setWebViewClient(testClient);

        appView.loadUrl("file:///android_asset/index.html");

    }
    .... 
```

EDIT3 我对此进行了一些尝试，最终得出结论，在我的特定情况下，语义规则不会触发，直到它看到在同一文件中的类中定义的函数。获取 android 源并复制 WebView.java 的源会导致规则触发（这是一件可怕的事情，但我只是在玩耍）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-27T21:37:17.230

1.  清理缓存：~/sourceanalyzer -b test -clean

2.  TRANSLATE（代码翻译时无需提及-filter、-rules、-project-template）：~/sourceanalyzer -b test -source 1.6 ~/repos/android-rule-tests/WebViewTest -cp ~/android-sdks/platforms /android-16/android.jar

3.  SCAN（指定规则/过滤器/模板）：~/sourceanalyzer -b test -filter 'absolute_path_file.txt' -rules 'absolute_path_rulename.xml' -scan -f myResults.fpr

如果将 custom_rule.xml 放置到 FORTIFY_HOME/Core/config/rules/ 目录（连同 HP 规则包），则可以在扫描期间省略 -rules 参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T11:23:28.560

首先，我建议命名空间的模式为`.*`. 其次，您将自定义规则文件保存到哪里？如果不在，`<SCA install>/Core/config/customrules`则需要使用`-rules`选项指定。此外，您缺少构建 ID，您的命令应类似于：

```
sourceanalyzer -b test -clean
sourceanalyzer -b test -source 1.6 ~/repos/android-rule-tests/WebViewTest -cp ~/android-sdks/platforms/android-16/android.jar -rules /path/to/rules/file.xml
sourceanalyzer -b test -scan -f myResults.fpr 
```

我认为使用 Android 时还会在运行时创建一个 R 类文件。因为 SCA 不这样做，所以应该首先构建项目，以便可以在某个地方的类路径中指定它。

# readability - APL 可读性

> ID：12909711
> 
> 赞同：4
> 
> 时间：2012-10-16T07:38:41.523
> 
> 标签：readability, maintainability, apl

我必须在 APL 中编码。由于代码将长期维护，我想知道是否有一些包含启发式/技巧/示例的论文/书籍来帮助设计干净易读的 APL 程序。

这是与使用其他编程语言进行编码不同的体验。例如，制作一个函数。小无助：这样的函数可以包含一行代码，完全看不懂。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-14T14:46:22.357

首先，欢迎来到 APL 的精彩世界。

编写可读和可维护的 APL 代码与用任何语言编写可读和可维护的代码没有太大区别。任何关于编写干净代码的好书都像任何其他语言一样适用于 APL，甚至可能更适用。我推荐Robert C. Martin 的[Clean Code](https://rads.stackoverflow.com/amzn/click/com/0132350882)。

考虑一下本书中的指导方针，即函数中的所有代码都应该处于相同的抽象级别。这适用于 APL 100 倍以上。例如，如果您有一个名为 DoThisBigTask 的函数，它应该只有很少的 APL 原始符号，而且肯定没有长的复杂单行代码。它应该只是对其他较低级别函数的一系列调用。如果这些更高级别的函数都具有良好的名称和良好的定义，那么即使不了解 APL 的人也应该很容易确定一般漂移。最低级别的函数将只是原语，并且对于非 APLer 来说是难以理解的。根据它们的编写方式，它们甚至可能最初对经验丰富的 APLer 来说是难以理解的。但是，这些低级函数应该很短，没有副作用，

一般来说，让你的函数保持简短、命名良好、定义明确且切中要害。并保持代码行更短。拥有定义良好且记录良好的函数比拥有编写良好或记录良好的代码行更重要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-10T16:13:56.417

由于您要求提供书籍和其他参考资料，我可以建议：

*   *Norman D. Thomson 和 Raymond P. Polivka 深入了解 APL2 *。*我与 Ray Polivka 共事多年，他是我认识的最好的 APL 老师之一。*
**   Leonard Gilman 和 Allen J. Rose的经典*APL: An Interactive Approach*对核心语言很有用，但相当过时，并且没有包含太多与可读性真正相关的内容。*   *James A. Brown 和 Sandra Pakin 的*APL 2 概览在某些方面是对 Gilman 和 Rose 的更新。*它涵盖了对 APL 的嵌套操作和其他更新，但没有特别针对可读性。不过，如果您遵循此处的示例，您将编写可读的代码。***   *APL is Easy* by STSC 和 Jerry R. Turner 是专门针对 APL*Plus 系列的介绍。同样，关于可读性的具体内容不多，但模型通常是精心设计的可读代码。*   *精通 Dyalog APL：* Bernard Legrand 的 Dyalog APL 完整介绍如果您专门从事 Dyalog APL 工作，则非常好，如果您正在使用其他版本之一，例如 APL*Plus（来自 APL2000），则不然**

 **我认为 APL 作为“只写语言”的声誉被夸大了。确实需要习惯于原语和用于表示它们的符号。但随后需要习惯许多其他语言环境中的语法和各种库函数。我已经看到 C、C++ 和 Java 中的复杂代码与任何 APL 一样难以遵循。当然，它不是好的 C、C++ 或 Java，即使它很聪明。

一些忠告：

*   编写“单行代码”是测试一个人对语言的掌握程度的一种方法，但对于生产代码 来说是**非常糟糕的实践。**
*   注释以使算法，尤其是正在使用的数据结构清晰。与任何代码一样，注释应该添加一些无法从代码本身轻松读取的内容，或者引起对复杂或晦涩代码的注意。
*   如果可能，请避免晦涩的代码，因此无需解释。这通常是可能的。
*   让每个功能只做一项工作，界面清晰。在大多数情况下避免使用全局变量，并记录任何需要的变量。
*   在顶部记录任何功能的接口、用途和效果。如果可能，制作没有副作用的实用程序黑匣子。如果副作用是必不可少的，请将其记录为界面的一部分。开发标准的标题注释结构。
*   动态构建的动态代码可以为解决方案增加灵活性，但如果出现问题，通常很难调试。尽可能使此类代码防弹，并内置可选的日志记录以在出现问题时提供帮助。

You can use an OOP-like style if you wish. But there is no need to do so. If you do, it should IMO be used fairly pervasively through an application, except perhaps for low-level utilities. But OOP-style code can be at least as convoluted as non-OOP code, and APL doesn't have built-in inheritance or other OOP-supporting syntax.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T16:55:55.107

（我将在这里使用“A”而不是注释，“'”而不是符号。）

* * *

嗯，我开发 APL 一年了，我只用过[Aplusdev.org](http://www.aplusdev.org/)。

你甚至不需要更多。诀窍是尝试**像 OOP 一样思考**。你应该有——如果我没记错的话——**用作类数据的结构化字段**`obj.attribute1`，比如 {'attribute1 'attribute2, {value,value2}}，这样你就可以像在 c++中一样轻松地将它们挑选出来。（这里是'属性 Pick 对象，仅在类函数中使用 :)）

此外，使用命名空间函数：

```
namespace_classname.method(this, arg1)
namespace_classname._private_method(this, arg1, arg2) 
```

和许多简单的工具功能，而不是漂亮的长线。性能下降并不显着，您可以稍后优化说阵列，一旦您发现某些东西可能会更快。

在任何事情之前：想想没有 for 循环的**matlab 和 mathematica ！**:) 它有很大帮助。

## 我对健壮、可维护的代码的建议：

*   **使用广泛的实用函数集**而不是使用那些不可读的符号来使您的代码始终切中要害。

*   **try-catch 块**有一个内置的异常处理，可以在这里使用，

    尝试开始（）；
    一个尝试过的代码，可能在额外的括号中不要忘记最后的 try_end() 。

    try_end();
    捕捉（某事，function_here）；

    可以很好地实现。（你会看到，捕捉错误非常重要）

*   **粗略的类型检查**：实现一个标准并用于不那么多次调用的函数......（你可以在函数定义之后放置一个具有灵活参数的函数）
    语法：

    函数（point2i，ch）：{类型
    检查（{{'int，[1 2]}，'char}）；A do some assertions in typecheck...
    // 你的函数放在这里
    }

*   **lambda 函数**可以非常有效，你可以做一些反射来实现 lambdas。

*   **总是用“return”声明退货！**

*   **基于 try-catch**测试您编写的每个函数的单元测试。

*   我还使用了很多来自mathematica的' **apply** '和' **map** '，实现了我自己的版本，它们在这里非常非常有效。

*   我写了 matlab 思维，因为你可以在这里有一个变量中的*结构化字段*列表（=类数据）。如果你想保持 for-loop-less（你想，相信我），你会写很多这样的东西。为此，您需要有一个标准的命名约定，比如用复数表示：

    namespace_class.method（对象，arg1，arg2）

最后：另外，我编写的 inputBox 和 messageBox 就像 Javascript 或 VisualBasic 中的一样，它们可以很容易地组合简单的工具或检查状态。messageBox 的唯一问题，它不能暂停功能流，所以你需要

```
 AA documentation of f1
 f1():
 {
     A  do sth

     msgbox.call("Hi there",{'Ok, {'f2}}); 
 }
 f2():
 {
     A  continue doing stuff
 } 
```

您可以使用 gawk/sed 组合在 bash 中编写自动文档，以将其放入网页中。创建 HTML 格式的代码也有助于打印。;)

我希望这是一个很好的大纲，可以进行适当的构建。在编写自己的工具之前，请尝试从遗留代码库中挖掘可用的工具......由于当时的混乱，函数通常甚至用不同的名称实现 4 次。**

# c# - 在 WPF 复选框列表中设置焦点

> ID：12909715
> 
> 赞同：1
> 
> 时间：2012-10-16T07:38:46.633
> 
> 标签：c#, wpf, xaml, mvvm

我有一个包含汽车模型的 WPF 复选框列表。当我进入列表时，会发生以下情况：

1）在**第一次按tab**键时，列表项被选中

2) 在**第二个 tab**键按下时，实际的复选框被选中，允许我使用**空格**键设置 IsChecked 状态。

选择列表项时是否可以自动将光标移动到复选框？（尽量避免两次点击标签）

**XAML：**

```
<ListBox ItemsSource="{Binding Cars}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <CheckBox Content="{Binding Make}" IsChecked="{Binding IsChecked,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" />
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:45:08.237

尝试将此添加到您的`ListBox`：

```
 <ListBox.ItemContainerStyle>
          <Style TargetType="Control">
            <Setter Property="Focusable" Value="False" />
          </Style>
        </ListBox.ItemContainerStyle> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:33:45.457

尝试了 Dan 的解决方案，它可以工作，但是在选择第一个复选框后它会将焦点移出 ListBox 控件，我正在寻找可以防止将焦点设置到所选列表框项目同时仍然允许通过选项卡浏览所有复选框的东西列表。

以下链接帮助了我 -[键盘焦点到 WPF 中的列表框项目](https://stackoverflow.com/questions/3156122/keyboard-focus-to-list-box-items-in-wpf)

我进行了一些更改以创建边框以及垂直滚动条，下面是完整的 XAML：

```
<Border BorderThickness="0.8" BorderBrush="Gray">
        <ScrollViewer ScrollViewer.VerticalScrollBarVisibility="Auto" Margin="1">
            <ItemsControl ItemsSource="{Binding Cars}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <CheckBox Content="{Binding Make}" IsChecked="{Binding IsChecked,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" />
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </Border> 
```

# ruby - 验证请求参数的最佳 Ruby 库

> ID：12909718
> 
> 赞同：2
> 
> 时间：2012-10-16T07:38:51.640
> 
> 标签：ruby, validation

我正在设计一个 REST API，并且想要验证请求参数的存在、长度等。

例如，我想验证以下内容：

*   是请求中提供的“名称”
*   是“名称”< 200 个字符
*   “年龄”是否有数值
*   是否提供了任何未知参数
*   如果“name”不存在，则必须提供“customer_id”

然后检查如下参数：

```
request.valid? 
```

我正在考虑使用 DataMapper（或 Virtus+Aequitas）或类似的东西。但是 DataMapper 或其他 ORM 只是提供了很多我不需要的功能。

如果使用您可以推荐的 ORM（基于依赖项的数量和所需的“验证代码”），您将如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:52:57.923

`name`使用已经为,提供了由 rails 验证`age`。参考[`this`](http://thelucid.com/2010/01/08/sexy-validation-in-edge-rails-rails-3/)

```
 validates :name, presence: true, :length => { :maximum => 200 }
  validates :age,  allow_blank: true, :numericality => {:greater_than => 18, :less_than => 100} 
```

对于自定义验证，请使用以下

```
validate :some_validation_method

def some_validation_method

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:05:27.023

您可以使用[ActiveModel::Validations](http://api.rubyonrails.org/classes/ActiveModel/Validations.html)。

它允许进行大量验证，例如接受、关联、确认、排除、格式等。例如：

```
class Person
  include ActiveModel::Validations

  validates :name, :surname, presence: true
  validates :city, length: { minimum: 5 }
  validates :age, numericality: { greater_than: 18 }
end

# Example: 
p = Person.new
p.valid? # => false 
```

我建议您看一下[ActiveRecord Validations & Callbacks Rails 指南](http://guides.rubyonrails.org/active_record_validations_callbacks.html)。

通常，这些验证与`ActiveRecord`ORM 一起使用，但您可以在没有 ActiveRecord 的情况下使用它，正如您[在此 ActiveModel RailsCast](http://railscasts.com/episodes/219-active-model)中看到的那样。因此，您只需包含`ActiveModel::Validations`.

# python - 如何使用python语言读写mifare卡中的数据

> ID：12909732
> 
> 赞同：5
> 
> 时间：2012-10-16T07:39:37.177
> 
> 标签：python, python-2.7, mifare

谁能告诉我，如何使用 python 语言读取和写入 Mifare 4k 卡中的数据。

我正在使用带有 mifare 4k 卡的 Omnikey USB 读卡器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-12T16:14:55.490

看来你走运了

您目前可以在以下网址找到一个人：[http](http://rfidiot.org/) ://rfidiot.org/ ，他为您的需要创建了一个脚本库

```
"devices, such as the Omnikey CardMan are also supported. I am curently testing with a CardMan 5321" 
```

你可以找到他的 Github 帐户的详细信息： [https ://github.com/AdamLaurie/RFIDIOt](https://github.com/AdamLaurie/RFIDIOt)

这包含您开始使用您的设备和 python 所需的所有脚本，看起来他自 2006 年以来一直在从事这个项目，但我没有看过他的代码。

如果这能让您入门，请给我们并更新！

# javascript - javascript 为什么我无法从文件数组中获取文件名？

> ID：12909733
> 
> 赞同：0
> 
> 时间：2012-10-16T07:39:41.390
> 
> 标签：javascript, file, file-upload

我有关于输入|文件对象的简单 javescript：

```
 var upfiles=new Array();

  function addfile(files){
      upfiles.push(files);
      alert(upfiles[0].name);  //undefined
      alert(files[0].name);    //can get file name
      upfiles[0].prop("name"); //can get file name
      alert(upfiles.length);    //1
  } 
```

我不知道为什么`upfiles[0].name`只给我返回undefined，而`upfiles[i]).prop("name")`工作。两种方法的区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:43:41.250

你试过了吗

```
upfiles[0][0] 
```

看到您将一组文件推入另一个数组等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:45:30.367

您可能希望使用`concat`而不是`push`这里来创建一维数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:23:31.600

我希望我可以评论...

我会在 chrome 中尝试这个，然后放

```
console.log(upfiles); 
```

在您的警报之前......并且只需检查控制台中对象的结构。当我使用一个没有详细文档的框架时，我不得不经常检查它们的函数输出。

# javascript - js分割，在一行的末尾

> ID：12909738
> 
> 赞同：2
> 
> 时间：2012-10-16T07:39:57.753
> 
> 标签：javascript, jquery

我正在制作一个网页，它将获取它自己的 html 代码，然后替换所有有害的 html 代码，例如`<`并将`>`它们更改为 ascii 对应项，这样它就不会歪曲它，但它看起来也会写给用户。

我需要它通过使用断行html代码`<br />`或其他方式来分隔行，我知道我有多少行使用`themehtml.split("\n");`

所以问题是'我需要一种在行尾添加换行符的方法'

这是我的大部分 js 代码，对这个问题有点帮助

```
$(".edit_html_button").click(function()
                {
                    var themehtml = $(".wrapper").html();
                    var oldhtml = _grubber_blog.html();

                    themehtml = themehtml.replace(/</g, "&#60;"); //slowly removing html codes
                    themehtml = themehtml.replace(/>/g, "&#62;"); //slowly removing html codes
                    themehtml = themehtml.split(' ').join('&#32;');//slowly removing html codes

                    themehtml = ("<div class='numberboxleft'></div><div class='edit_theme' contenteditable='true'>"+themehtml+"</div>");

                    themehtml = themehtml.split("\n");  

                    //alert(themehtml);

                    _grubber_blog.css("background-color", "#fff");
                    $("#tiptip_holder").remove();   
                    $("._grubber_blog_customize").html(" ");    
                    $("._grubber_blog_customize").html(themehtml);

                    //adds the numbers up the left side

                    var e = 0;
                    var lenght = themehtml.length;
                    var numbers = "";

                    while (e < lenght){
                        numbers = $(".numberboxleft").html();
                        $(".numberboxleft").html(numbers + e + "<br />");
                        e++;
                    }

                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:47:13.517

所以我`$.each`像这样使用了这个功能......

```
$.each(themehtml, function(){
                        var grad =  $("._grubber_blog_customize").html();                   
                        $("._grubber_blog_customize").html(grad+this+"<br />");             
                    }); 
```

这将逐渐将条纹 html 代码添加到 div 并使其看起来像它的一行一行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:03:45.547

要使用 html 换行符替换换行符，您可以在换行符上拆分，然后使用 html 换行符加入数组：

```
themehtml.split("\n").join('<br>') 
```

# android - Android - 以编程方式定位视图

> ID：12909741
> 
> 赞同：6
> 
> 时间：2012-10-16T07:40:18.103
> 
> 标签：android, textview

我想弄清楚如何在android中以编程方式定位视图。例如，假设我们有这个 XML 代码。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:id="@+id/mainLayout">
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="121dp"
    android:layout_marginTop="140dp"
    android:text="Results" /></RelativeLayout> 
```

如何在 android 中以编程方式实现此布局？因为我想要我的文本视图的随机位置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T07:44:08.913

将[RelativeLayout.LayoutParams](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html)与 TextBox 的 setLayoutParams 方法一起使用

```
RelativeLayout.LayoutParams p = (RelativeLayout.LayoutParams)textView1.getLayoutParams();
p.leftMargin = xxx; // in PX
p.topMargin = xxx; // in PX
textView1.setLayoutParams(p) 
```

如果您想使用 dp 值，请查找 dp 到 px 的转换

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T07:52:20.177

检查这个..

```
 RelativeLayout main = new RelativeLayout(this);
    main.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT));

    TextView textV = new TextView(this);
        textV.setGravity(Gravity.LEFT);
    RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(
                                RelativeLayout.LayoutParams.WRAP_CONTENT,RelativeLayout.LayoutParams.WRAP_CONTENT);

    layoutParams.setMargins(121, 140, 0, 0);
    textV.setLayoutParams(layoutParams);
    text.setText("Result ");

main .addView(text); 
```

# android - 解析url时出现异常

> ID：12909744
> 
> 赞同：0
> 
> 时间：2012-10-16T07:40:24.070
> 
> 标签：android, url-parsing

我在解析来自 am url 的内容时遇到异常。我得到的例外如下。

```
10-16 12:46:59.373: E/AndroidRuntime(4362): FATAL EXCEPTION: Thread-12
10-16 12:46:59.373: E/AndroidRuntime(4362): java.lang.NullPointerException
10-16 12:46:59.373: E/AndroidRuntime(4362):     at com.android.gyan.SearchResults$4.run(SearchResults.java:162)
10-16 12:46:59.373: E/AndroidRuntime(4362):     at java.lang.Thread.run(Thread.java:1019)
10-16 12:46:59.783: E/WindowManager(4362): Activity com.android.gyan.SearchResults has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4056d3b0 that was originally added here
10-16 12:46:59.783: E/WindowManager(4362): android.view.WindowLeaked: Activity com.android.gyan.SearchResults has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4056d3b0 that was originally added here
10-16 12:46:59.783: E/WindowManager(4362):  at android.view.ViewRoot.<init>(ViewRoot.java:258)
10-16 12:46:59.783: E/WindowManager(4362):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
10-16 12:46:59.783: E/WindowManager(4362):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
10-16 12:46:59.783: E/WindowManager(4362):  at android.view.Window$LocalWindowManager.addView(Window.java:424)
10-16 12:46:59.783: E/WindowManager(4362):  at android.app.Dialog.show(Dialog.java:241)
10-16 12:46:59.783: E/WindowManager(4362):  at android.app.ProgressDialog.show(ProgressDialog.java:107)
10-16 12:46:59.783: E/WindowManager(4362):  at android.app.ProgressDialog.show(ProgressDialog.java:95)
10-16 12:46:59.783: E/WindowManager(4362):  at com.android.gyan.SearchResults.ParsingCall(SearchResults.java:147)
10-16 12:46:59.783: E/WindowManager(4362):  at com.android.gyan.SearchResults.onCreate(SearchResults.java:137)
10-16 12:46:59.783: E/WindowManager(4362):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-16 12:46:59.783: E/WindowManager(4362):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
10-16 12:46:59.783: E/WindowManager(4362):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
10-16 12:46:59.783: E/WindowManager(4362):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-16 12:46:59.783: E/WindowManager(4362):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-16 12:46:59.783: E/WindowManager(4362):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-16 12:46:59.783: E/WindowManager(4362):  at android.os.Looper.loop(Looper.java:130)
10-16 12:46:59.783: E/WindowManager(4362):  at android.app.ActivityThread.main(ActivityThread.java:3683)
10-16 12:46:59.783: E/WindowManager(4362):  at java.lang.reflect.Method.invokeNative(Native Method)
10-16 12:46:59.783: E/WindowManager(4362):  at java.lang.reflect.Method.invoke(Method.java:507)
10-16 12:46:59.783: E/WindowManager(4362):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-16 12:46:59.783: E/WindowManager(4362):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-16 12:46:59.783: E/WindowManager(4362):  at dalvik.system.NativeStart.main(Native Method) 
```

我用来解析的是这个。

```
public void ParsingCall(final String urlFirst) {
    final Bundle b = new Bundle();
    progressDialog = ProgressDialog.show(SearchResults.this, " ",
            "Searching.....", true, false);
    progressDialog.setIcon(-1);

    progressDialog.setIcon(R.drawable.logo);
    new Thread(new Runnable() {

        public void run() {
            LyricsData dataContent = null;

            dataContent = LyricsParse.Parse(urlFirst);
            Message msg = new Message();
            {

                {
                    if(dataContent.contentList != null) {
                        b.putStringArrayList("contentList",
                            dataContent.contentList);
                    }else {
                        //dataContent.contentList[0] = {"No value"};
                        b.putString("contentList",
                                "No value");
                    }
                    if(dataContent.optionNameArrayList != null)
                    b.putStringArrayList("optionNameArrayList",
                            dataContent.optionNameArrayList);
                    else
                        b.putString("optionNameArrayList",
                                "No value");
                }
            }

            msg.setData(b);

            handler.sendMessage(msg);

        }
    }).start();
} 
```

我还编写了一个处理程序，它将获取消息并从中获取数据并将这些设置为我在活动中拥有的视图。请注意，并非每次都会出现此异常。它变得非常罕见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:04:25.950

您的运行方法中有错误。将调试点放在运行方法的开始处，您将得到一个初始化为 NULL 的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:45:33.173

删除一行..

```
progressDialog.setIcon(-1);

progressDialog.setIcon(R.drawable.logo); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T07:49:03.593

根据这一行，您将获得文件的`NullPointerException`第 147`SearchResults.java`行：

```
10-16 12:46:59.783: E/WindowManager(4362):  at com.android.gyan.SearchResults.ParsingCall(SearchResults.java:147) 
```

请确保此行上的所有变量都已初始化且未设置为 null。我猜你正在打电话`ProgressDialog.show()`，但你还没有初始化你的`ProgressDialog`变量或者你的初始化超出了范围。

# java - 调用 System.gc() 是否会重置分代收集的统计数据？

> ID：12909745
> 
> 赞同：0
> 
> 时间：2012-10-16T07:40:33.760
> 
> 标签：java, garbage-collection

换句话说：

我需要知道在调用`System.gc()`对象实例（未收集的）之后是否以与调用之前相同的方式在代之间分布`System.gc()`。

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T07:45:32.470

在 System.gc() 可能触发也可能不触发的 Full GC 之后，

*   伊甸园空间将是空的，因此其中的任何东西都将被移出或清理。
*   幸存者空间会将对象从有对象的空间交换到空的空间，并且
*   Tenured 空间将具有与之前相同的保留对象，但有些可能已被清理，有些可能是该代的新对象。

简而言之，唯一一次 System.gc() 不会在几代之间改变对象是什么时候

*   它什么也没做，因为它被忽略了
*   自上次 Full GC 以来没有对象被创建或丢弃。

> 如果这可能是调用 System.gc() 是邪恶的另一个原因

主要是因为它会损害性能并且您获得的回报很少。注意：RMI 可以定期触发完整收集以确保清理分布式对象，但它会尝试将其保持在最低限度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:46:32.207

首先，这`System.gc()`只是对 JVM 的一个提示，你想要一个 GC，它可能不会触发一个（例如，如果`-XX:+DisableExplicitGC`与 Hotspot 一起使用），你不应该依赖它来做任何事情——无论如何，JVM 通常知道得更好。

如果它确实触发了 GC，那么它就像任何其他 GC 一样，并且如果对象满足条件（例如，在幸存者空间中花费了足够多的代），则对象可能会从年轻代提升到老年代。

# regex - 正则表达式删除以“，”或“。”结尾的数字

> ID：12909754
> 
> 赞同：0
> 
> 时间：2012-10-16T07:41:16.073
> 
> 标签：regex

我正在尝试在 java 中生成正则表达式以从字符串中解析金融实体。我需要以数字以“。”结尾的方式编写正则表达式。或“，”应删除，如

> 15,
> 15.

好像价值观一样

> 15,303(货币)
> 15.55(汇率)

应采取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:48:54.023

这应该这样做：

```
/^\d+[,.]$/ 
```

[你可以在这里](http://rubular.com/r/nsXMDzQtAG)玩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:48:51.967

您可能正在寻找类似的东西：

```
(\d+)[\.,][^\d] 
```

该组捕获数字后跟`.`或`,`不继续其他数字的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T07:50:32.783

`\d+(\.|,)\d+`因为你应该采取价值观

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T07:57:48.433

要删除此类数字（Python 中的示例，但应该适用于几乎任何正则表达式风格）：

```
>>> import re
>>> regex = re.compile(r"\d+[.,](?!\d)")
>>> regex.sub("", "15 15,0 15, 15\. 15.0 15")
'15 15,0   15.0 15' 
```

只找到“正确”的数字：

```
>>> regex = re.compile(r"\d+(?:[.,]\d+)?(?![\d.,])\b")
>>> regex.findall("15 15,0 15, 15\. 15.0 15")
['15', '15,0', '15.0', '15'] 
```

# c# - WinRT 中的 ICMP Ping - 可能吗？

> ID：12909755
> 
> 赞同：3
> 
> 时间：2012-10-16T07:41:16.020
> 
> 标签：c#, networking, windows-runtime, icmp

如何在 WinRT Modern UI 应用程序中执行 ICMP ping？

Ping 目前没有在 WinRT 中实现（请参阅[此处](https://stackoverflow.com/questions/10952346/is-it-possible-to-write-a-ping-class-in-c-sharp-that-will-run-within-windows-8-m)的相关问题），Silverlight 中以前的策略是：

*   使用 WCF 服务
*   调用 Javascript，然后调用 ActiveX 组件
*   放弃（[这里](https://stackoverflow.com/questions/1893743/tcp-ping-in-silverlight)）

Vasily[在这里](https://github.com/christophwille/winrt-vasily#readme)使用 http 在特定端口上使用 StreamSocket 来“ping”网络服务器，StreamSocket 支持使用 TCP 套接字的网络通信。

如果我想为 WinRT 编写自己的 ICMP 库，也许[Windows.Networking.Socket是我必须使用的最高级别的 API。](http://msdn.microsoft.com/library/windows/apps/BR226960)

[此](http://www.pcreview.co.uk/forums/icmp-using-raw-socket-not-working-vista-t3235397.html)实现使用 System.Net.Sockets 发出 ICMP 回显请求 - 在标准 .NET 中

[此](http://code.msdn.microsoft.com/windowsapps/DatagramSocket-sample-76a7d82b#content)WinRT 示例使用 Windows.Networking.Sockets.DatagramSocket 类创建 UDP 套接字。我认为我需要的是原始套接字来执行 ICMP。

这甚至可以在 WinRT 沙盒中进行 ICMP ping 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:16:46.427

就像是：

```
try
            {
                using (var tcpClient = new StreamSocket())
                {
                    await tcpClient.ConnectAsync(
                        new Windows.Networking.HostName(HostName),
                        PortNumber,
                        SocketProtectionLevel.PlainSocket);

                    var localIp = tcpClient.Information.LocalAddress.DisplayName;
                    var remoteIp = tcpClient.Information.RemoteAddress.DisplayName;

                    ConnectionAttemptInformation = String.Format("Success, remote server contacted at IP address {0}",
                                                                 remoteIp);
                    tcpClient.Dispose();
                }
            }
            catch (Exception ex)
            {
                if (ex.HResult == -2147013895)
                {
                    ConnectionAttemptInformation = "Error: No such host is known";
                }
                else if (ex.HResult == -2147014836)
                {
                    ConnectionAttemptInformation = "Error: Timeout when connecting (check hostname and port)";
                }
                else
                {
                    ConnectionAttemptInformation = "Error: Exception returned from network stack: " + ex.Message;
                }
            }
            finally
            {
                ConnectionInProgress = false;
            } 
```

完整来源： [github](https://github.com/christophwille/winrt-vasily)

# opengl - 从水晶球界面转换为 FPS 风格的相机？

> ID：12909762
> 
> 赞同：1
> 
> 时间：2012-10-16T07:41:35.943
> 
> 标签：opengl, graphics, camera, frame-rate

我目前有一个水晶球接口相机设置，相机总是看着原点，然后按左、右、上、下键简单地围绕对象移动。

我想改变这一点，以便相机可以在 3D 环境中自由移动。

我目前有两个功能，LEFT 和 UP，它们已作为我提到的 CB 接口实现。

我希望左右键向左/向右扫射，而向上/向下则用于升降相机。我将如何改变它？

另外..向前和向后移动相机的正确方法是什么？我在想也许拖动鼠标可能等同于向前/向后移动？

```
void Transform::left(float degrees, vec3& eye, vec3& up) {
eye = eye*rotate(degrees, up);
}

void Transform::up(float degrees, vec3& eye, vec3& up) {
vec3 ortho_axis = glm::cross(eye, up);
ortho_axis = glm::normalize(ortho_axis);

eye = eye*rotate(degrees, ortho_axis);
up = up*rotate(degrees, ortho_axis);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:33:57.957

基本上扔掉整个代码并重新开始。场景中的相机的行为与任何其他对象一样，因此具有位置和方向。（或一个变换矩阵。）您需要做的就是应用与相机变换相反的变换。

```
glTransformf(-camera.x, -camera.y, -camera.z);
glRotatef(-camera.angle, camera.axis.x, camera.axis.y, camera.axis.z); 
```

你明白了。

我在我的代码中所做的是，因为我有四元数用于旋转并将其转换为矩阵或轴和角度是昂贵的，所以我计算相机的前向和向上向量并将其输入 gluLookAt。

```
Vector3f f = transform(camera.orientation, Vector3f(1, 0, 0));
Vector3f u = transform(camera.orientation, Vector3f(0, 0, 1));
Vector3f p = camera.position;
Vector3f c = p + f;
gluLookAt(p.x, p.y, p.z, c.x, c.y, c.z, u.x, u.y. u.z); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T22:30:44.420

FPS 控件的常见设置是将移动绑定到键（向左/向右移动、向前/向后移动）并与鼠标绑定环视（x 轴：向左/向右旋转，y 轴：向上/向下倾斜） .

高温高压

# android - 如何设置listview逐项滚动

> ID：12909763
> 
> 赞同：-3
> 
> 时间：2012-10-16T07:41:40.610
> 
> 标签：android, listview, scroll

是否可以一一设置列表视图滚动？能给我举个例子吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:45:53.063

尝试这个

```
listView.setOverScrollMode(View.OVER_SCROLL_NEVER); 
```

隐藏滚动条：

```
listView.setVerticalScrollBarEnabled(false); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-16T07:45:10.120

文档：[ListView](http://developer.android.com/reference/android/widget/ListView.html) 示例：[示例 ListView](http://windrealm.org/tutorials/android/android-listview.php)

# excel - 如何使用日期自动筛选？

> ID：12909765
> 
> 赞同：0
> 
> 时间：2012-10-16T07:41:47.283
> 
> 标签：excel, vba

这里有什么问题

```
Dim dt1 As Date
dt1 = DateSerial(2012, 9, 1)
r0.Columns(6).AutoFilter
r0.Columns(6).AutoFilter field:=1, Criteria1:=dt1, VisibleDropDown:=False 
```

r0 是一个范围 - 9 列和 1300 行
r0.Columns(6) 具有日期格式
第 6 列中的许多单元格的值为 1.9.2012（在公式栏中可见）
结果是没有一个单元格具有此值。r0 中的所有行都被折叠。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:12:21.370

试试这个

```
r0.Columns(1).AutoFilter Field:=1, Operator:= _
    xlFilterValues, Criteria2:=Array(0, Format(dt1, "mm/dd/yyyy")) 
```

此外，请确保第 6 列中的数据是`DateSerial`而不是*看起来*像日期的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:04:11.480

使用以下代码对其进行了测试：

```
Public Sub test()
  Dim dt1 As Date
  dt1 = DateSerial(2012, 9, 1)
  Dim r0 As Range
  Set r0 = Tabelle1.Range("A1:C23")
  'r0.Columns(3).AutoFilter
  r0.Columns(3).AutoFilter field:=1, Criteria1:=dt1, VisibleDropDown:=False
End Sub 
```

在这个数据上：

```
HeaderA | HeaderB| HeaderC
stuff   | stuff  | 01.09.2012
stuff   | stuff  | 01.09.2012
stuff   | stuff  | 02.09.2012
stuff   | stuff  | 04.04.2012
stuff   | stuff  | 01.02.2012
stuff   | stuff  | 07.09.2012
stuff   | stuff  | 01.09.2012
stuff   | stuff  | 08.10.2012
stuff   | stuff  | 01.09.2012
stuff   | stuff  | 01.09.2012 
```

工作得很好。

# cakephp - CakePHP 2.x：ACL 行为与 ACL 组件

> ID：12909766
> 
> 赞同：2
> 
> 时间：2012-10-16T07:41:51.687
> 
> 标签：cakephp, acl

[我已阅读有关ACL 行为](http://book.cakephp.org/2.0/en/core-libraries/behaviors/acl.html)和[ACL 组件](http://book.cakephp.org/2.0/en/core-libraries/components/access-control-lists.html)的 book.cakephp 文章，但我仍然不清楚它们的区别。

即，什么时候最好同时使用两者？仅 ACL 行为？仅 ACL 组件？如果您可以提供一些简单的使用示例来强调这三种不同的情况，那肯定会帮助我理解...

我的具体场景，如果你想微调你的答案：我想实现一个带有嵌套用户组的 HABTM ACL；我计划借助[TinyAuth](http://www.dereuromark.de/2011/12/18/tinyauth-the-fastest-and-easiest-authorization-for-cake2/)或[Ceeram 的 Authorize 插件](https://github.com/ceeram/Authorize)来实现这一点。

注意：我相信我确实掌握了一般行为与组件之间的区别；我只是对它们的 ACL 实现感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:31:26.700

您将需要同时使用 ACL 行为和 ACL 组件来在您的应用程序中实现访问控制列表。ACL 行为在模型中使用，您可以在其中声明`public $actsAs`变量以告诉行为充当请求者 (ARO) 或该模型应该是`controlled`(ACO) 或两者兼而有之。ACL 组件是一个设置权限（等）或检查权限的工具`$this->Acl->allow`...`$this->Acl->denay`如果`$this->Acl->check`您想深入研究这个主题，我建议您阅读[本](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html) 教程...

# java - NoClassDefFoundError 是如何抛出的

> ID：12909767
> 
> 赞同：0
> 
> 时间：2012-10-16T07:41:59.383
> 
> 标签：java, eclipse, classpath, noclassdeffounderror

我在 Eclipse 中构建了一个名为“com.hello”的包，并编写了一个简单的 HelloWorld 程序。Eclipse 自动添加了“package com.hello;” 在我的程序之上。并且 HelloWorld.java 被放入

```
F:\workspace\helloWorld\src\com\hello; 
```

HelloWorld.class 被放入

```
F:\workspace\helloWorld\bin\com\hello. 
```

它在 Eclipse 中运行良好。但是当我进入目录“ `F:\workspace\helloWorld\bin\com\hello`”并使用带有“java HelloWorld”的命令行时，我得到了`NoClassDefFoundError`. 我知道它可能与类路径有关。但我不太确定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T07:44:40.037

你的班级在一个包`com.hello`中。要运行它，您必须确保包的**基本目录**（`F:\workspace\helloWorld\bin`在您的情况下）位于类路径中。

尝试像这样运行它：

```
java -cp F:\workspace\helloWorld\bin com.hello.HelloWorld 
```

您也可以转到目录`F:\workspace\helloWorld\bin`，然后运行它

```
java com.hello.HelloWorld 
```

这将起作用，因为 Java 将使用当前目录作为默认目录（如果您没有`CLASSPATH`设置环境变量）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:44:35.030

转到 F:\workspace\helloWorld\bin\ 并以这种方式运行它：

```
java -cp .; com.hello.HelloWorld 
```

# ios - UIView animatewithDuration - 删除动画

> ID：12909773
> 
> 赞同：1
> 
> 时间：2012-10-16T07:42:43.153
> 
> 标签：ios, uiview, uiviewanimation

我有一个递归 UIView animatewith duration: 委托运行动画。当视图消失时，我应该停止这个动画。[self.view.layer removeAllAnimation] 似乎没有帮助。还有其他停止动画的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:57:58.377

使用方法 [UIView animateWithDuration:animations:completion:] 怎么样？如果视图消失了，您可以检查完成块内部。如果没有 - 再运行一次动画迭代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:08:27.560

我遇到的这个解决方案是基于 UIObject 的。我在开始动画时将 UIObject 添加到 NSMutableArray 中。当我离开该视图时，调用 [NSMutableArray * removeObject]; 在 viewDidDisappear 里面。

# jquery - Yii 就地 crud 文本小部件

> ID：12909782
> 
> 赞同：5
> 
> 时间：2012-10-16T07:43:20.057
> 
> 标签：jquery, ajax, yii, crud

我正在使用 Yii 框架为自己构建一个穷人的项目跟踪系统。目标是拥有一个类似于[basecamp 的](https://basecamp.com/)便笺小部件的“crud”小部件/表单，以显示带有标题和内容字段的便笺。（我不再使用大本营，因此无法发布他们的笔记小部件的图像：-（）

使用 Yii，我有一个客户端模型，我想在一个 div 中显示与该客户端对应的所有注释，并在同一`webroot/client/view/client_id`页面中为这些注释提供 CRUD 功能。

我在网上找到的最接近的实现纯粹是在 jquery、[jeditable](http://www.appelsiini.net/projects/jeditable)中完成的，但缺少创建和删除功能。此外，它不支持 Yii 模型（CActiveRecord），这意味着需要硬连线控制器代码中来回传输的数据，而不利用 Yii 的 MVC 设置。

我现在拥有的：通过 AJAX (forcCreation) 提交的隐藏表单和笔记的 Zii CListView 小部件(用于检索)，它利用了内置的 zii 小部件更新功能`$.fn.yiiListView.update('clistview_id');`，但我相当坚持游戏的 U 和 D 部分使用 Yii/Zii 小部件、jquery 或它们的组合。

我的 client/view.php 片段：

```
<div class="note_create">
    <?php echo CHtml::button('Add new note',array('class'=>'create-note-button')) ?>
    <div class="create-note-form" style="display: none;">
    <!-- _createNote is just a CActiveForm with a CHtml::ajaxSubmitButton-->
    <?php $this->renderPartial('_createNote', array('client' => $model, 'note' => $note)); ?>
    </div>
</div>
<div class="note_browser">
    <?php $this->widget('zii.widgets.CListView', array(
        'id' => 'clist_note_browser',
        'dataProvider' => $model->noteSearch(),
        'itemView' => '_note', // refers to the partial view named '_note'
        'emptyText' => 'No notes found.',
        'sortableAttributes' => array(
            'note.title',
            'note.last_modify'
        ),
        ));
    ?>
</div> 
```

一个非常简单的 Note 模型：

```
<?php

/**
 * This is the model class for table "note".
 *
 * The followings are the available columns in table 'note':
 * @property string $nid
 * @property string $title
 * @property string $content
 * @property string $first_create
 * @property string $last_modify
 *
 * The followings are the available model relations:
 * @property ClientNote $client  ClientNote an intermediate table with two columns: nid, cid
 */
class Note extends CActiveRecord
{
    ...
    public function relations()
    {   
        return array('client' => array(self::HAS_ONE, 'ClientNote', 'nid'),);
    }
    ...
} 
```

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:42:22.200

开始检查这个，它可以帮助您了解您想要的方式：

[http://help.discretelogix.com/php/yii/enable-in-place-editing-in-yii-grid.htm](http://help.discretelogix.com/php/yii/enable-in-place-editing-in-yii-grid.htm)

after you understood, you need to create your own widget that does this

you can check out existing extensions that tries to do what you are after: [http://www.yiiframework.com/extension/editablegridview/](http://www.yiiframework.com/extension/editablegridview/)

[http://yiitutorials.net/easy/creating-a-widget-with-the-yii-framework](http://yiitutorials.net/easy/creating-a-widget-with-the-yii-framework)

[http://www.yiiframework.com/extension/escrollablegridview/](http://www.yiiframework.com/extension/escrollablegridview/)

You need to study all these, and understand how they work, so you should be able to take one and extend to fit your needs. Good luck.

# javascript - js函数中的默认参数

> ID：12909783
> 
> 赞同：4
> 
> 时间：2012-10-16T07:43:20.227
> 
> 标签：javascript, function

我在这里阅读了一些关于此的问题：

1.  这很好

    ```
    function(a, b) {
        a = (typeof a === 'undefined')? 'default_val' : a;
        b = (typeof b === 'undefined')? 'default_val' : b;
    } 
    ```

2.  这有点麻烦（适用于布尔值以外的任何东西）

    ```
    function(a, b) {
        a = a || 'default_val';
        b = b || 'default_val';
    } 
    ```

    如果你通过 false 它会破坏逻辑。所以这应该被标记为一个坏习惯

3.  有几个问题，但我从来没有看到过这个问题的答案（没有人直接回答这个问题）：这个（最后一种方法）好​​吗（有没有人看到它有任何问题）？

    ```
    function(a = 'default_val', b = 'default_val') {
        // your code
    } 
    ```

我已经测试了这第三种方法，但找不到任何问题。我想要最后一种方法。它更干净，看起来更像其他语言的结构。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:48:25.357

在当前的 ECMAScript 实现中，没有办法像 3 那样做到这一点。我也非常希望这样。它在下一个实施中提出，所谓的“和谐”在这里 [http://wiki.ecmascript.org/doku.php?id=harmony:parameter_default_values](http://wiki.ecmascript.org/doku.php?id=harmony:parameter_default_values)

我也想到了我实际上是如何做的。例如，通常我将参数作为对象传递，

> var 选项 = { x : 20, y : 30 }

然后我在函数中做

> ```
> function iAcceptDefaults(options) {
>     var defaults = {
>         x: 40 
>     }
>     var newParameters = $.extend({},options, defaults) // here we using jQuery method extend to mix defaults parameters with options
> 
> } 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:52:19.083

在大多数现代浏览器中，第三个示例在语法上是不正确的。目前它只能在 FireFox 中工作（这是一个固定的[问题](https://bugzilla.mozilla.org/show_bug.cgi?id=757676)），因为这种语法是尚未批准的[ECMAScript Harmony 标准](http://wiki.ecmascript.org/doku.php?id=harmony%3aparameter_default_values)的一部分。

# c# - 由于 Android 布局，Visual Studio 崩溃

> ID：12909786
> 
> 赞同：2
> 
> 时间：2012-10-16T07:43:27.980
> 
> 标签：c#, visual-studio-2010, android-layout, xamarin.android

我在这里的一个小 android 项目有一点问题。

每次我加载某个项目时，VS 都会在几秒钟后崩溃。好吧...我已将每个类添加到一个新项目中并打开它以查看 VS 何时崩溃，但我发现问题不是类，布局使 VS 崩溃。以下两个（几乎完全相同）代码使其单独崩溃。你能告诉我他们有什么问题吗？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:minWidth="25px"
    android:minHeight="25px">
  <TableLayout
      android:minWidth="25px"
      android:minHeight="25px"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:id="@+id/tableLayout1">
    <TableRow
        android:id="@+id/tableRow1">
      <TextView
          android:text="@string/lbEqID"
          android:textAppearance="?android:attr/textAppearanceSmall"
          android:layout_column="0"
          android:id="@+id/lbEqID" />
      <TextView
          android:text="Small Text"
          android:textAppearance="?android:attr/textAppearanceSmall"
          android:layout_column="2"
          android:id="@+id/lbEqIDVar" />
    </TableRow>
    <TableRow
        android:id="@+id/tableRow2">
      <TextView
          android:text="@string/lbEqDesc"
          android:textAppearance="?android:attr/textAppearanceSmall"
          android:layout_column="0"
          android:id="@+id/lbEqDesc" />
      <TextView
          android:text="Small Text"
          android:textAppearance="?android:attr/textAppearanceSmall"
          android:layout_column="2"
          android:id="@+id/lbEqDescVar" />
    </TableRow>
    <TableRow
        android:id="@+id/tableRow3">
      <TextView
          android:text="@string/lbTaskID"
          android:textAppearance="?android:attr/textAppearanceSmall"
          android:layout_column="0"
          android:id="@+id/lbTaskID" />
      <TextView
          android:text="Small Text"
          android:textAppearance="?android:attr/textAppearanceSmall"
          android:layout_column="2"
          android:id="@+id/lbTaskIDVar" />
    </TableRow>
    <TableRow
        android:id="@+id/tableRow4">
      <TextView
          android:text="@string/lbTaskDesc"
          android:textAppearance="?android:attr/textAppearanceSmall"
          android:layout_column="0"
          android:id="@+id/lbTaskDesc" />
      <TextView
          android:text="Small Text"
          android:textAppearance="?android:attr/textAppearanceSmall"
          android:layout_column="2"
          android:id="@+id/lbTaskDescVar" />
    </TableRow>
    <TableRow
        android:id="@+id/tableRow5">
      <TextView
          android:text="@string/lbTaskDate"
          android:textAppearance="?android:attr/textAppearanceSmall"
          android:layout_column="0"
          android:id="@+id/lbTaskDate" />
      <TextView
          android:text="Small Text"
          android:textAppearance="?android:attr/textAppearanceSmall"
          android:layout_column="2"
          android:id="@+id/lbTaskDateVar" />
    </TableRow>
  </TableLayout>
</LinearLayout> 
```

和这个

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TableLayout
        android:minWidth="25px"
        android:minHeight="25px"
        android:id="@+id/tableLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content">
            <TextView
                android:text="Small Text"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:id="@+id/textView1"
                android:layout_column="0" />
            <TextView
                android:text="Small Text"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:layout_column="2"
                android:id="@+id/textView11"
                android:layout_height="wrap_content" />
        </TableRow>
        <TableRow
            android:id="@+id/tableRow3" />
        <TableRow
            android:id="@+id/tableRow4">
            <TextView
                android:text="Small Text"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:layout_column="0"
                android:id="@+id/textView12" />
            <TextView
                android:text="Small Text"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:layout_column="2"
                android:id="@+id/textView13"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content" />
        </TableRow>
        <TableRow
            android:minWidth="25px"
            android:minHeight="25px"
            android:id="@+id/tableRow5" />
        <TableRow
            android:id="@+id/tableRow6">
            <TextView
                android:text="Small Text"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:layout_column="0"
                android:id="@+id/textView26" />
            <TextView
                android:text="Small Text"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:layout_column="2"
                android:id="@+id/textView28"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content" />
        </TableRow>
        <TableRow
            android:minWidth="25px"
            android:minHeight="25px"
            android:id="@+id/tableRow7" />
        <TableRow
            android:id="@+id/tableRow8">
            <TextView
                android:text="Small Text"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:layout_column="0"
                android:id="@+id/textView27" />
            <TextView
                android:text="Small Text"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:id="@+id/textView29"
                android:layout_column="2"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content" />
        </TableRow>
    </TableLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:03:52.463

不幸的是，VS 真的无法说出问题所在，因此要在这里找到解决方案，您可以创建一个空布局并开始一个一个地添加元素。在您的情况下，问题是在每个 TableRow 中添加两个 TextViews 列 0 和 2。如果将第二个列更改为“1”，Visual Studio 不会崩溃，我知道这将是您期望的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:25:32.710

我看到了一些问题，但没有找到可重现的样本。

鉴于这看起来像一个错误，而不是一个编程问题：

[使用http://bugzilla.xamarin.com/](http://bugzilla.xamarin.com/)和 support@xamarin.com将其记录为 Xamarin 的可重复错误- 他们应该将其标记为在即将发布的版本中修复，并且可能能够在此期间协助解决问题。

# php - 如何获取 DOMElement 节点的 html 代码？

> ID：12909787
> 
> 赞同：39
> 
> 时间：2012-10-16T07:43:32.037
> 
> 标签：php, dom, domdocument, dom-node

我有这个 html 代码：

```
<html>
    <head>
    ...
    </head>
<body>
    <div>
    <div class="foo" data-type="bar">
        SOMECONTENTWITHMORETAGS
    </div>
    </div>
</body> 
```

我已经可以用这个函数得到“foo”元素（但只有它的内容）：

```
private function get_html_from_node($node){
  $html = '';
  $children = $node->childNodes;

  foreach ($children as $child) {
    $tmp_doc = new DOMDocument();
    $tmp_doc->appendChild($tmp_doc->importNode($child,true));
    $html .= $tmp_doc->saveHTML();
  } 
  return $html;
} 
```

但我想返回 DOMElement 的所有 html 标签（包括它的属性）。我怎么能这样做？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-10-16T07:51:57.893

使用可选参数[`DOMDocument::saveHTML`](http://php.net/manual/en/domdocument.savehtml.php)：这表示“仅输出此元素”。

```
return $node->ownerDocument->saveHTML($node); 
```

请注意，该参数仅适用于 PHP 5.3.6。在此之前，您需要改为使用[`DOMDocument::saveXML`](http://php.net/manual/en/domdocument.savexml.php)。结果可能略有不同。此外，如果您已经参考了该文档，则可以这样做：

```
$doc->saveHTML($node); 
```

* * *

## 回答 #2

> 赞同：-10
> 
> 时间：2012-10-16T07:52:34.603

[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)应该可以胜任！

# objective-c - 究竟 willMoveToParentViewController: 和 didMoveToParentViewController: 做什么？

> ID：12909788
> 
> 赞同：20
> 
> 时间：2012-10-16T07:43:33.613
> 
> 标签：objective-c, ios, uiviewcontroller, pushviewcontroller

我知道从 iOS5 和新的 UIViewController 包含方法开始，您应该将这些方法与**addChildViewController:**、**removeFromParentViewController:**和转换方法一起调用。我也知道在三种情况下调用它们的正确顺序。我不知道这些方法到底是做什么的？

如果这些只是 UIViewController 子类的覆盖点，我想我们在覆盖时不需要调用**super**。如果我在删除视图控制器或**didMoveToParentViewController: self**之前不调用***willMoveToParentViewController: nil***会出现什么问题？

 *** * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T08:20:25.447

除了已经说过的，它们确实调用了一些委托方法：

`addChildViewController`来电`[child willMoveToParentViewController:self]`

并`removeFromParentViewController:`打电话`[child didMoveToParentViewController:nil]`

此外，他们修改了`childViewControllers`属性，该属性包含一组子视图控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:11:31.197

对此有很多答案：

1.  他们在那里，你应该在适用的地方称呼他们，以始终坚持这种模式。这样，如果您将超类更改`UIViewController`为您自己的视图控制器，您就不必担心您在哪里遵循了整个模式。

2.  它们是比告诉每个人都覆盖更好的地方`addChildViewController:`。正如你所说，管理不善`willMoveToParentViewController:`听起来不像管理不善那么危险`addChildViewController:`，特别是如果你忘记打电话`super`。

3.  `UIViewController`可能取决于你坚持的模式。如果它知道它已经收到`addChildViewController:`但从未收到其他两条消息，它可能会认为状态不一致。发生这种情况是因为`UIViewController`做簿记以诱使您坚持完整的模式，还是您真的弄乱了它的内部状态，这是一个有趣的猜谜游戏，但在任何 iOS 版本中都可能发生变化。事情可能会很糟糕。这就是为什么存在这种模式的原因，Apple 告诉你，只要你这样做，无论如何我们都会保持工作正常。

质疑一个模式是好的，但有很多潜在的负面影响试图削减你对模式的一致性。除非模式被荒谬地涉及，否则通常更容易符合它。**

# c# - 使用 Linq 对 Xml 元素进行分组

> ID：12909799
> 
> 赞同：0
> 
> 时间：2012-10-16T07:44:22.673
> 
> 标签：c#, asp.net, xml, linq, grouping

我有以下 xml。我需要做的是，我想使用他们使用 linq`group`在每个表中的行。`locid`

```
<taxdata schema="3" nextrowid="812" timesaved="0" calcmode="1" calcneeded="0">
  <table name="aatbl_entity" id="1" ver="102" ddtime="11-10-2012 17:57:08" locs="" /> 
  <table name="aatbl_entityactivity" id="2" ver="102" ddtime="11-10-2012 17:57:08" locs="" key0="2">
        <row name="" locid="100" rows="71" rowid="71" Ks0="1"> </row>
        <row name="" locid="48" rows="52" rowid="52" Ks0="8"> </row>
        <row name="" locid="6148" rows="216" rowid="216" Ks0="16"> </row>
        <row name="" locid="6148" rows="217" rowid="217" Ks0="17"> </row>
        <row name="" locid="6148" rows="218" rowid="218" Ks0="18">  </row>
        <row name="" locid="6154" rows="219" rowid="219" Ks0="19">  </row>
        <row name="" locid="6154" rows="220" rowid="220" Ks0="20">  </row>
        <row name="" locid="6154" rows="221" rowid="221" Ks0="21">  </row>
        <row name="" locid="6154" rows="222" rowid="222" Ks0="22">  </row>
        <row name="" locid="6154" rows="223" rowid="223" Ks0="23">  </row>
        <row name="" locid="6209" rows="224" rowid="224" Ks0="24">  </row>
        <row name="" locid="6127" rows="233" rowid="233" Ks0="32">   </row>
        <row name="" locid="6127" rows="234" rowid="234" Ks0="33">  </row>
        <row name="" locid="6127" rows="235" rowid="235" Ks0="34">  </row>
        <row name="" locid="36" rows="236" rowid="236" Ks0="35">  </row>
        <row name="" locid="36" rows="244" rowid="244" Ks0="43">  </row>
        <row name="" locid="111" rows="266" rowid="266" Ks0="51">  </row>
        <row name="" locid="111" rows="752" rowid="752" Ks0="59">  </row>
        <row name="" locid="6192" rows="361" rowid="361" Ks0="55">  </row>
        <row name="" locid="10" rows="810" rowid="810" Ks0="60"> </row>
        <row name="" locid="10" rows="811" rowid="811" Ks0="61"> </row>
        <row name="" locid="10" rows="812" rowid="812" Ks0="62">  </row>
  </table> 
 <table name="aatbl_entityactivitydetail" id="13" ver="102" ddtime="11-10-2012 17:57:09" locs="" key0="2" key1="5">
        <row name="" locid="6327" rows="90" rowid="90" Ks0="1" Ks1="1">  </row>
        <row name="" locid="6327" rows="104" rowid="104" Ks0="1" Ks1="2">  </row>
        <row name="" locid="6327" rows="118" rowid="118" Ks0="1" Ks1="3">  </row>
        <row name="" locid="6327" rows="133" rowid="133" Ks0="1" Ks1="4">  </row>
        <row name="" locid="6327" rows="522" rowid="522" Ks0="3" Ks1="1">  </row>
        <row name="" locid="6327" rows="529" rowid="529" Ks0="3" Ks1="2">  </row>
        <row name="" locid="6327" rows="536" rowid="536" Ks0="3" Ks1="3">  </row>
        <row name="" locid="6327" rows="543" rowid="543" Ks0="3" Ks1="4">  </row>
        <row name="" locid="101" rows="177" rowid="177" Ks0="1" Ks1="5">  </row>
        <row name="" locid="101" rows="563" rowid="563" Ks0="3" Ks1="5">  </row>
        <row name="" locid="105" rows="185" rowid="185" Ks0="1" Ks1="6">  </row>
        <row name="" locid="105" rows="564" rowid="564" Ks0="3" Ks1="6">  </row>
        <row name="" locid="106" rows="186" rowid="186" Ks0="1" Ks1="7">  </row>
        <row name="" locid="106" rows="565" rowid="565" Ks0="3" Ks1="7">  </row>
        <row name="" locid="106" rows="2" rowid="2" Ks0="3" Ks1="7"> </row>
  </table>
  <table name="aatbl_entityactivityasset" id="14" ver="102" ddtime="11-10-2012 17:57:09" locs="" key0="2" key1="9" 
</taxdata> 
```

我试过跟着bur它没有用，

```
const string filePath = @"D:\XJH\11-10-2012_17_57_08.xml";

XDocument doc = XDocument.Load(filePath);

var tableIds =
    doc
        .Descendants("table")
        .Select(table => new { id = table.Attributes("id").ToString() });

foreach (var id in tableIds)
{
   var rowgroups =doc.Descendants("table")
                     .Elements()
                     .Where(row => row.Ancestors()
                            .Attributes("id").ToString() == id.ToString())
                     .GroupBy(row => new { ids = row.Attributes("locid") })
                     .Select(row => row);
} 
```

我不知道这种分组方法是否正确，请帮助....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:05:38.023

尝试以这种方式替换您的代码：

```
string[] tableIds = doc.Descendants("table").Select(t => t.Attribute("id").Value).ToArray<string>();

foreach (var id in tableIds)
{
    var rowgroups = doc.Descendants("table").Elements()
        .Where(row => row.Parent.Attribute("id").Value.Equals(id))
        .GroupBy(row => row.Attribute("locid").Value)
        .Select(row => row);
    // ... do something ...
    // Here you will have all the Grouped XElements in rowgroups
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:59:06.853

这是你想要的吗：

```
var query =
    from xe in doc.Element("taxdata").Elements("table")
    from gr in xe.Elements("row").GroupBy(_ => _.Attribute("locid").Value)
    select new
    {
        id = xe.Attribute("id").Value,
        locid = gr.Key,
        rows = gr.Count(),
    }; 
```

我得到以下结果：

![结果](../Images/204f8a1734ccbd07d650034a4b3db2d1.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:17:15.583

你可以试试这个，我认为它有效：

```
var xe = doc.Descendants("table")
            .Elements("row")
            .GroupBy(a => a.Attribute("locid").Value)
            .Select(a => new { Value = a.Key, Count = a.Count() }); 
```

# ajax - 跨域问题（在 IE 中工作而不是在其他浏览器中）

> ID：12909803
> 
> 赞同：1
> 
> 时间：2012-10-16T07:44:36.407
> 
> 标签：ajax, jquery, cross-domain

我正在使用 AJAX 调用从 URL 获取数据。它给了我一个 json 对象。

当我运行该应用程序时，该页面在 IE 中运行良好，表明该页面正在访问不受其控制的信息。

> 这会带来安全风险。你要继续吗？

但这不适用于其他浏览器，如 Firefox、Chrome、Safari 等。

我不知道是什么问题。请向我解释它为什么会发生以及如何解决这个问题？

**我的代码：**

```
<!DOCTYPE html>
<html>
<head>
    <title>Search Engine</title>
    <script src="JS/jquery-1.4.2.min.js"></script>
    <script>
    $(document).ready(function () {
        $.support.cors = true;
        // create a script tag element
        var script = document.createElement("script");
        // set the attribute, using the URL to pass data via query parameters
        script.setAttribute("src", "http://192.168.13.111:7090/?uname=bhagirathip&wt=json&fl=*,score");
        script.setAttribute("type", "text/javascript");
        // add the script tag to the document head, forcing an HTTP request
        document.getElementsByTagName("head")[0].appendChild(script);
    });
    function Search() {
        function callbackJsonHandler(data) {
             alert(data);  // This is the JSON data
        }
    }
</script>
</head>
<body>
    <form id="form">
        <div style="text-align: center">
        <input type="search" id="searchInput" autofocus />
        <input type="button" id="btnSearch" onclick="Search()" value="Search" />
    </div>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:55:56.657

您不能跨域进行跨域 AJAX 调用。这是 Web 浏览器中的一项安全功能，可防止恶意 JavaScript 代码抓取网页中呈现的数据，然后将其发送到其他域上的某个流氓网站。

通过将 AJAX 请求限制在同一域中，浏览器供应商确保从其他来源导入的 JavaScript 不能将数据发送到提供 HTML 页面的服务器以外的任何服务器。

在 Internet Explorer 中，它会提示您，但任何遇到此类消息的聪明用户都可能会拒绝。向您的用户展示此类警告消息*不是*一个好的设计实践，也不会激发您对应用程序合法性的信心。

您可以跨域发送数据的唯一方法是使用一种称为“脚本标记远程处理”的浏览器黑客技术，该技术本质上涉及使用不受相同域策略限制的 HTML 元素。例如，`script`标签可以向任何服务器发出 HTTP GET 请求：

```
// create a script tag element
var script = document.createElement("script");

// set the attribute, using the URL to pass data via query parameters
script.setAttribute("src","http://192.168.9.11/userInput/?key="+userInput);
script.setAttribute("type","text/javascript");

// add the script tag to the document head, forcing an HTTP request
document.getElementsByTagName("head")[0].appendChild(script); 
```

使用此方法，您可以将数据发送到远程服务器。请注意，要取回 JSON 数据，您必须将其包装或填充到 JavaScript 函数中，并在 JavaScript 代码中定义回调以处理响应：

```
function callbackJsonHandler(data) {
    alert(data);  // This is the JSON data
} 
```

并且您的服务器端代码必须返回内容文本/javascript，调用处理程序，并将您的 JSON 作为参数传递：

```
callbackJsonHandler({"key":"value","key1":"value2"}); 
```

当浏览器将 JavaScript 下载到浏览器时，JavaScript 会立即运行，从而为您提供一个挂钩来访问响应中的 JSON。

* * *

由于您使用的是 jQuery，因此您还可以查看[jQuery JSONP](https://github.com/jaubourg/jquery-jsonp)或带有 Padding 的 JSON，它可用于生成 JavaScript 响应，以便您可以处理从这些请求到远程服务器的回调。请注意，必须设置服务器以处理 JSONP 请求才能正常工作，类似于上述设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:10:28.333

从 HTML 文档从 exampleA.com 提供给域为 exampleB.com 的服务器的浏览器发出跨域请求的另一个解决方案是使用代理。

假设您正在使用的 HTML 文档是从 exampleA.com 提供的。您拥有 exampleA.com，您可以访问服务器端和客户端代码。另一方面，exampleB.com 是由其他人拥有或控制的远程服务器。exampleB.com 有一些您想在 exampleA.com 中使用的数据。

我们知道 AJAX 不会起作用，因为同源策略是为了保护流氓应用程序不会对人们的数据做坏事。但是，服务器不限于相同的域策略。这意味着您的应用可以执行以下操作：

```
||exampleA.com/test.html|| ---> http req --> ||exampleA.com/getData|| --http req --> ||exampleB.com/getJSON|| 
```

**服务器端：（如在*您的*服务器中，exampleA.com）：**

换句话说，在您用于提供 HTML 的服务器上，您编写了一些代码，从您的服务器向第三方服务器发出 HTTP 请求：

```
// JSON URL which should be requested
$json_url = 'http://www.exampleB.com/getJSON';

// Initializing curl
$ch = curl_init( $json_url );

// Configuring curl options
$options = array(
CURLOPT_RETURNTRANSFER => true,
CURLOPT_HTTPHEADER => array('Content-type: application/json') 
);

// Setting curl options
curl_setopt_array( $ch, $options );

// Getting results
$result =  curl_exec($ch); // Getting JSON result string 
```

有关更多详细信息，请参阅[使用 PHP Curl 获取 JSON 数据](http://themekraft.com/getting-json-data-with-php-curl/)。每个服务器端平台都能够与服务器建立 HTTP 连接。

```
// now, send the data in the response
HttpResponse::status(200);
HttpResponse::setContentType('application/json');
HttpResponse::setData($result);
HttpResponse::send(); 
```

请参阅[PHP HTTPResponse](http://php.net/manual/en/httpresponse.send.php)。同样，您使用的任何语言都应该能够从字符串返回数据。

假设您使用的是 PHP，请将上面的代码放在一个名为“getJSON.php”的文件中。`<?php`确保文档的开头和开头之间没有空格；否则，您将无法设置标题。发送此响应可能有更好的方法，但由于未指定您的平台，我将把它作为练习留给读者。

**客户端代码：**

```
 var searchURL = "/getJSON.php"; //From this URL json formatted data is present.
    $.ajax({
        url: searchURL,
        type: 'GET',
        dataType: 'json',
        contentType: 'application/json; charset=utf-8',
        success: function (data) {
            try {
               alert(data);
            }
            catch (err) {
               alert(err);
            }
        }
    }); 
```

现在，在上面的 JavaScript 代码中，您向*服务器 exampleA.com**发出同域 AJAX 请求*，然后您的服务器代表您向 exampleB.com 发出请求以获取数据，然后 exampleA.com 将数据返回对浏览器的响应。

# php - 按颜色对 10,000 张图像进行排序

> ID：12909805
> 
> 赞同：5
> 
> 时间：2012-10-16T07:44:40.553
> 
> 标签：php, sorting, image-processing

我有 10,000 张图像我想按颜色分类以打印。

我已经走得很远了。我已经平均了它们的颜色，所以现在我有两个目录：一个包含所有原始图像 (original_images/)，另一个包含其平均颜色 (averages/) 的同名 jpeg。

接下来，我使用 PHP 对平均图像进行排序：

```
// $images is an array with all the filenames.
$sorted_images = array();
$loop_limit = count($images);
for($i = 0; $i < $loop_limit; $i++) {
    $image = imagecreatefromjpeg("averages/" . $images[$i]);
    $rgb = imagecolorat($image, 50, 50);
    imagedestroy($image);
    $r = ($rgb >> 16) & 0xFF;
    $g = ($rgb >> 8) & 0xFF;
    $b = $rgb & 0xFF;
    $hsv = rgb_to_hsv($r, $g, $b); // function to convert rgb to Hue/Sat/Value
    $h = (string) $hsv['H'];
    if(isset($sorted_h[$h])) {
        $duplicates++;
        echo("oh no! " . $h . " is a dupe! found " . $duplicates . " duplicates so far.<br>");
    }
    $sorted_h[$h] = $images[$i];
}

// sort the array by key:
ksort($sorted_images, SORT_NUMERIC); 
```

**编辑**问题是键的`$h`范围从（显然）-0.1666666667 到 1 左右。我的直觉说存在重复值的机会非常小，但实际上有超过 6000 个重复键。我尝试将`$h`值转换为字符串，因为我认为数组键可能是四舍五入的？

但这没有用。这是将 rgb 转换为 HSV 的函数。我在没有任何文档的地方找到了它...

```
function RGB_TO_HSV ($R, $G, $B) { 
    $HSV = array();

    $var_R = ($R / 255);
    $var_G = ($G / 255);
    $var_B = ($B / 255);

    $var_Min = min($var_R, $var_G, $var_B);
    $var_Max = max($var_R, $var_G, $var_B);
    $del_Max = $var_Max - $var_Min;

    $V = $var_Max;

    if ($del_Max == 0)
    {
        $H = 0;
        $S = 0;
    }
    else
    {
        $S = $del_Max / $var_Max;

        $del_R = ( ( ( $max - $var_R ) / 6 ) + ( $del_Max / 2 ) ) / $del_Max;
        $del_G = ( ( ( $max - $var_G ) / 6 ) + ( $del_Max / 2 ) ) / $del_Max;
        $del_B = ( ( ( $max - $var_B ) / 6 ) + ( $del_Max / 2 ) ) / $del_Max;

        if ($var_R == $var_Max) $H = $del_B - $del_G;
        else if ($var_G == $var_Max) $H = ( 1 / 3 ) + $del_R - $del_B;
        else if ($var_B == $var_Max) $H = ( 2 / 3 ) + $del_G - $del_R;

        if (H<0) $H++;
        if (H>1) $H--;
    }

    $HSV['H'] = $H;
    $HSV['S'] = $S;
    $HSV['V'] = $V;

    return $HSV;
} 
```

所以现在的问题是：

1.  rgb_to_hsv() 函数是否正确？
2.  我如何确保数组中的键不会被覆盖，但值是（密切）维护的？例如; 如果两个图像的 $h 值为 0.01111111111，当第二个被推入数组时，它的键应该是 0.01111111112？

（旧编辑:) **编辑：**我已更改`rename()`为，`copy()`因此每次出错时我都不必重新上传 10,000 张图像；-)。我还习惯`ini_set("max_execution_time", 300);`将最大执行时间从 60 提高到 300，添加`imagedestroy($image)`以减少内存使用并通过更改`$i < count($images)`为`$loop_limit = count($images)`.

**编辑2：**好的，我发现了一个问题。图像的 $h (Hue) 值时不时地相同。因此 using`sorted_images[$h] = $images[$i]`会覆盖数组中该键的值。实际上; 原来有超过 6000 个重复值......我将如何解决这个问题，而不会过多地弄乱 $h 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:46:31.817

您可能会遇到 max_execution_time - 允许脚本运行的时间限制。尝试设置更高的值。

[http://php.net/manual/de/function.set-time-limit.php](http://php.net/manual/de/function.set-time-limit.php)

你没有收到任何错误信息吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:44:44.440

您是否尝试过启用错误消息？

```
error_reporting(E_ALL);
ini_set('display_errors', 1); 
```

至于本地与主值。'local' 表示当前运行的脚本正在使用 300 秒的超时。'master' 适用于所有其他请求（除非明确修改）

Cron 将是一种方法，但我认为这不应该每 X 秒/分钟/小时执行多次？您可以简单地自己使用命令行来执行此操作。在这里查看更多信息：[http ://www.php.net/manual/en/features.commandline.usage.php](http://www.php.net/manual/en/features.commandline.usage.php)

看到脚本有效，很可能是以下问题之一：

memory_limit 不够高。应该在启用错误的情况下给出 PHP 错误。执行时间不够长。应该在启用错误的情况下给出 PHP 错误。

使用 init_set 方法来增加两者，如果您“只是”希望脚本运行，请将超时设置为 0 秒并将内存限制设置为尽可能高。如果您想真正了解确切原因，您可能会考虑查找“xdebug”以查看是否存在任何内存泄漏或哪些命令执行时间最长。查看代码，我假设它的复制命令需要一段时间才能执行（超过 1 毫秒，这在 10000 次迭代之后很多）

如果无法修改这些值，或者您只是想在资源有限的情况下使用高内存、长执行时间的脚本，请尝试重写脚本以批量执行重命名并设置一个 cron 来执行脚本每 X 分钟（只需在所有图像完成后删除 cron）

祝你好运 ：）

# mahout - naivebayes Mahout 0.7

> ID：12909818
> 
> 赞同：2
> 
> 时间：2012-10-16T07:45:28.243
> 
> 标签：mahout

我正在研究推文的情绪分析。我正在使用 mahout 朴素贝叶斯分类器。我正在创建一个目录“数据”。在“数据”内部，我正在创建另外三个名为“正”、“负”、“不确定”的目录。然后我保留了 151 个文件（总共151Mb）在这些正面、负面和不确定的目录中的每一个上。然后我将数据目录保存在 hdfs 中。下面是我运行的一组命令来生成模型和标签索引。

```
bin/mahout seqdirectory -i ${WORK_DIR}/data -o ${WORK_DIR}/data-seq

bin/mahout seq2sparse -i ${WORK_DIR}/data-seq -o ${WORK_DIR}/data-vectors -lnorm -nv -wttfidf

bin/mahout split -i ${WORK_DIR}/data-vectors/tfidf-vectors --trainingOutput ${WORK_DIR}/data-train-vectors --testOutput ${WORK_DIR}/data-test-vectors --randomSelectionPct 40 --overwrite --sequenceFiles -xm sequential

bin/mahout trainnb -i ${WORK_DIR}/data-train-vectors -el -o ${WORK_DIR}/model -li ${WORK_DIR}/labelindex -ow $c 
```

在使用“testnb”命令对同一组数据进行测试后，我得到了混淆矩阵，如下所示：

```
 bin/mahout testnb -i ${WORK_DIR}/data-train-vectors -m ${WORK_DIR}/model -l ${WORK_DIR}/labelindex -ow -o ${WORK_DIR}/data-testing $c

Confusion Matrix
-------------------------------------------------------
a           b        c       <--Classified as
151         0        0   |  151         a     = negative
0           151      0   |  151         b     = positive
0           0       151  |  151         c     = uncertain 
```

然后我以相同的方式创建了另一个目录“data2”，并将一些随机数据（这是训练数据的子集（30 个文件（每个文件总大小 30MB）））放在其中的正、负、不确定目录中。然后我使用下面给出的“seq2sparse”命令从中创建了一个向量：-

bin/mahout seqdirectory -i ${WORK_DIR}/data2 -o ${WORK_DIR}/data2-seq

bin/mahout seq2sparse -i ${WORK_DIR}/data2-seq -o ${WORK_DIR}/data2-vectors -lnorm -nv -wttfidf

使用下面给出的命令从前一组数据创建的模型/标签索引运行“testnb”：-

```
bin/mahout testnb -i ${WORK_DIR}/data2-vectors/tfidf-vectors/part-r-00000 -m ${WORK_DIR}/model -l ${WORK_DIR}/labelindex -ow -o ${WORK_DIR}/data2-testing $c 
```

我得到这样的混淆矩阵。

```
Confusion Matrix
-------------------------------------------------------
a       b       c           <--Classified as
0      30       0       |  30       a     = negative
0      30       0       |  30       b     = positive
0      30       0       |  30       c     = uncertain 
```

谁能告诉我为什么会这样。我使用正确的方法来测试模型还是 mahout 0.7 中的错误。如果不是正确的方法，请提出解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:47:12.753

你可以试试这个：</p>

```
bin/mahout testnb -i ${WORK_DIR}/data2-vectors/tfidf-vectors -m ${WORK_DIR}/model -l ${WORK_DIR}/labelindex -ow -o ${WORK_DIR}/data2-testing $c 
```

（删除“part-r-00000”）

# matlab - 如何优雅地确定长度为 N 的数组中给定距离 M 的中心间隔？

> ID：12909820
> 
> 赞同：1
> 
> 时间：2012-10-16T07:45:29.433
> 
> 标签：matlab

我有一个数组`x=1:N`。我想可视化由 决定的曲线的中心部分`x`，只说部分`xx=N/2-M/2:N/2+M/2`。我知道如果我对所有内容进行四舍五入（N 和 M 可以是任何内容），我可以做到这一点，但这会使简单的索引操作变得非常冗长且不可读。有没有更优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:07:02.580

调整你的想法，用它的“半径”（称之为`m`）而不是它的“直径”（`M`）来表达间隔的大小，瞧

```
xx = median(x)-m:median(x)+m 
```

这样更优雅，不是吗！因为您可能希望到处都是整数，请尝试

```
xx = floor(median(x)-m):ceil(median(x)+m) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T08:18:01.547

MATLAB 对整数类型隐式进行舍入，因此您可以简单地将`M`和转换`N`为整数：

```
N = uint32(N);
M = uint32(M);
xx = N/2-M/2:N/2+M/2; 
```

# jquery - jQuery 移动控制组

> ID：12909823
> 
> 赞同：2
> 
> 时间：2012-10-16T07:45:45.570
> 
> 标签：jquery, jquery-mobile

我有一个包含 jQuery-mobile 的自定义模板。问题是大多数按钮都在`data-role="controlgroup"`- 这很好，因为它还调整元素大小和居中，但现在我有一个表格，我需要在其中使用一些按钮，因此 jQuery mobile 尝试在一组中显示它圆角。

```
<div data-role="fieldcontain">
    <fieldset data-role="controlgroup">
        <table>
            <tr><td></td><td>Name</td><td></td></tr>
            <tr><td>1</td><td>ADS</td><td><a href="#" data-role="button" data-ajax="false">Run</a></td></tr>
            <tr><td>2</td><td>ASDF</td><td><a href="#" data-role="button" data-ajax="false">Run</a></td></tr>
            <tr><td>3</td><td>ASD</td><td><a href="#" data-role="button" data-ajax="false">Run</a></td></tr>
            <tr><td>4</td><td>ASDF</td><td><a href="#" data-role="button" data-ajax="false">Run</a></td></tr>
        </table>
    </fieldset>
</div> 
```

![角落](../Images/dcf067792ebb54bbd9f24e489ae745eb.png)

那么是否可以`data-role="controlgroup"`在表格中使用而不显示圆角或显示每个圆角？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:28:39.487

您需要为表格列中的控件组中的按钮编写自己的 CSS 规则。您还需要将这些规则放在**原始**的jQuery Mobile CSS 定义之后（即在`jquery-mobile.css`您自己的 CSS 文件的末尾或包含在 jQuery Mobile 之后）。这些方面的东西：

```
table td .ui-controlgroup-controls .ui-corner-top, table td .ui-controlgroup-controls .ui-corner-bottom {
        -moz-border-radius: .6em /*{global-radii-blocks}*/;
        -webkit-border-radius: .6em /*{global-radii-blocks}*/;
        border-radius: .6em /*{global-radii-blocks}*/;
        -moz-border-radius: .6em /*{global-radii-blocks}*/;
        -webkit-border-radius: .6em /*{global-radii-blocks}*/;
        border-radius: .6em /*{global-radii-blocks}*/;
} 
```

# gwt - 如何将 GWT 或 Vaadin 与 Play Framework 2.0 集成

> ID：12909826
> 
> 赞同：14
> 
> 时间：2012-10-16T07:45:58.387
> 
> 标签：gwt, playframework-2.0, vaadin

**是否可以使用 GWT 或 Vaadin 实现 Play Framework 2.x Web 应用程序的客户端？**

Play 1.x 有一个提供 GWT 集成的特殊模块，但我在 Play 2.x 版本中找不到这些技术一起使用的示例。这些技术可以集成吗？是否有模块，或者必须使用其他方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-04T15:02:24.010

GWT 和 Play2 可以无缝协同工作，就像 GWT 可以与 python 和 go 后端一起使用一样。

在 Play2 中使用 GWT 有两个部分，*提供静态文件*和*客户端-服务器通信*。

*   对于 GWT 生成的静态文件（js、css、img..），您只需将它们添加到 Play2`public`目录，它们就可以根据路由配置进行访问。

*   对于客户端-服务器通信，最好的办法是使用纯 json-rest 方法，因为 request-factory、gwt-rpc 对 J2EE servlet 有一些依赖。

有很多用 Play2 提供 json/REST API 的例子，还有很多用 GWT 与 json/REST API 交互的例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-05T12:26:00.450

Henri Kerola 最近对 play 2.x 进行了演示，并将在今年的 javaone 上发表演讲： [http ://www.youtube.com/watch?v=IwuqAh0VSek](http://www.youtube.com/watch?v=IwuqAh0VSek)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-03T20:09:01.473

我在 github 上找到了一个将 Vaadin 与 Play 2.2 集成的项目： [https ://github.com/henrikerola/play-vaadin-integration](https://github.com/henrikerola/play-vaadin-integration)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-17T16:00:01.880

您不能将 Vaadin 与 play2 一起使用。Vaadin 基本上是一个 Java EE servlet，它必须存在于 Java EE 容器（如 Tomcat）中。

Play 不是基于 Java EE，它使用自己的服务器。至于 GWT，所有服务器端代码都需要一个 Java EE 容器。但是，如果您只想要客户端，那么它完全有可能与任何 Web 框架一样。只需创建 json Web 服务并删除服务器依赖项。以 php 为例：http: [//gwtquickstart.blogspot.fr/2009/11/call-php-script-from-gwt.html](http://gwtquickstart.blogspot.fr/2009/11/call-php-script-from-gwt.html)

# vba - 循环工作簿时复制不同的范围

> ID：12909828
> 
> 赞同：0
> 
> 时间：2012-10-16T07:46:02.817
> 
> 标签：vba, excel

使用以下代码，我可以同时浏览多个 excel 文件并将它们粘贴到彼此下方的单张纸上，所以我的问题是它复制了所有内容，包括它们的标题，但问题是我只希望它复制第一个文件标题和其余部分它必须只复制数据而不是标题并将其粘贴在彼此下方，因为它们的所有标题都是相同的。

示例： eg1**姓名,姓氏,年龄**
Kgotso,Smith,20

eg2**姓名、姓氏、年龄**

布赖恩，棕色，32

结果： **姓名、姓氏、年龄**

Kgotso，史密斯，20

布赖恩，棕色，32

```
Sub Button4_Click()
    Dim fileStr As Variant
    Dim wbk1 As Workbook, wbk2 As Workbook
    Dim ws1 As Worksheet
     fileStr = Application.GetOpenFilename(FileFilter:="microsoft excel files (*.xlsx), *.xlsx", Title:="Get File", MultiSelect:=True)
    Set wbk1 = ActiveWorkbook
    Set ws1 = wbk1.Sheets("Sheet3")

    For i = 1 To UBound(fileStr)
    MsgBox fileStr(i), , GetFileName(CStr(fileStr(i)))
    Set wbk2 = Workbooks.Open(fileStr(i))
    wbk2.Sheets(1).UsedRange.Copy ws1.Cells(ws1.Range("A" & Rows.Count).End(xlUp).Row + 2, 1)
    wbk2.Close
    Next i

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:55:06.913

这将是我对此的快速尝试：

```
Sub Button4_Click()
Dim fileStr As Variant
Dim wbk1 As Workbook, wbk2 As Workbook
Dim ws1 As Worksheet
 fileStr = Application.GetOpenFilename(FileFilter:="microsoft excel files (*.xlsx), *.xlsx", Title:="Get File", MultiSelect:=True)
Set wbk1 = ActiveWorkbook
Set ws1 = wbk1.Sheets("Sheet3")

'handling first file seperately
MsgBox fileStr(1), , GetFileName(CStr(fileStr(1)))
Set wbk2 = Workbooks.Open(fileStr(1))
wbk2.Sheets(1).UsedRange.Copy ws1.Cells(ws1.Range("A" & Rows.Count).End(xlUp).Row + 2, 1)
wbk2.Close

For i = 2 To UBound(fileStr)
MsgBox fileStr(i), , GetFileName(CStr(fileStr(i)))
Set wbk2 = Workbooks.Open(fileStr(i))
'using offset to skip the header - not the best solution,  but a quick one
wbk2.Sheets(1).UsedRange.Offset(1,0).Copy ws1.Cells(ws1.Range("A" & Rows.Count).End(xlUp).Row + 2, 1)
wbk2.Close
Next i

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:55:58.283

试试这个

```
If i = 1 then
     ' Do your copy as is
Else
    ' Offset past firt row
    wbk2.Sheets(1).UsedRange.Offset(1, 0).Copy ...
    ' This will copy one blank line too
    ' Too avoid this extra line use instead
    Set rng2 = wbk2.Sheets(1).UsedRange.Offset(1, 0)
    Set rng2 = rng2.Resize(rng2.Rows.Count - 1)
    rng2.Copy ...
End If 
```

# android - Android 模拟漫游

> ID：12909832
> 
> 赞同：2
> 
> 时间：2012-10-16T07:46:12.893
> 
> 标签：android

我有一个应用程序，它在电话收到漫游事件时采取某些行动。为了测试它是否完美工作，我可以模拟 SIM 漫游事件。实际上我不可能这样做

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T07:49:06.883

Eclipse 中的 DDMS 可以模拟所有情况，...低电量、漫游、无信号......

# url - 支柱2。将路径添加到 url

> ID：12909833
> 
> 赞同：0
> 
> 时间：2012-10-16T07:46:13.580
> 
> 标签：url, struts2

我正在使用struts2。一个外部应用程序使用 url 调用我的应用程序

```
http://localhost:8080/present/jsp/mi.action?cod=02021 
```

但是由于我的 JSP 文件系统，我的操作结果在

```
http://localhost:8080/present/jsp/ALTE/mi.action?cod=02021 
```

（注意 ALTE 的区别）。

JSP 有一些行

```
<%@ include file="../comuns/comunCssyJs.jsp"%> 
```

第一个../是出去ALTE。如果我使用第一个链接访问，则页面已加载，但未找到包含文件。但是，使用第二个链接没有问题。

有人知道我能做什么吗？我知道我可以更改我的 JSP-s dir-s，但我更愿意将 ALTE 路径“自动添加”到 url。那可能吗？

提前致谢。乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:55:02.360

Use Struts2 `<s:include>` tag [http://struts.apache.org/2.x/docs/include.html](http://struts.apache.org/2.x/docs/include.html) with `<s:url>` tag [http://struts.apache.org/2.x/docs/url.html](http://struts.apache.org/2.x/docs/url.html).

# javascript - Oracle Apex 4.2 移动应用程序问题

> ID：12909834
> 
> 赞同：0
> 
> 时间：2012-10-16T07:46:16.703
> 
> 标签：javascript, oracle, oracle11g, oracle-apex

在将我以前的 oracle apex 安装更新到`Oracle Apex 4.2`我得到一些错误之后。（开发移动应用程序时）。

```
 1). Check Boxes doesn't display in Classic Reports.
 2). javascript:redirect() function didn't work.
 3). I have wrote some JavaScript functions to call when button clicked. also they didn't work. 
```

在上述`2 and 3`情况下，我得到错误为`Uncaught ReferenceError: redirect is not defined`.

PS：目前我正在使用 apex 移动模板将我的 apex 4.1 应用程序升级到 apex 4.2。JavaScript 函数在我以前的版本中没有任何错误。

云我如何解决这些问题？

# java - 在 Ext 插件中扩展 Liferay UserLocalServiceImpl

> ID：12909839
> 
> 赞同：2
> 
> 时间：2012-10-16T07:46:37.497
> 
> 标签：java, liferay, liferay-6

在我的[Liferay](http://www.liferay.com/) 6.1.1 安装中，我扩展了（注意：未覆盖）`UserLocalServiceImpl`Ext 插件中的类，以提供更轻松的屏幕名称验证。但是，我无法让 Liferay 加载新类而不是默认`UserLocalServiceImpl`类。

据我所知，替换服务类的[“正常”方法](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/overriding-a-portal-servi-4)是使用钩子插件。不幸的是，钩子插件无法访问实现类。我必须扩展`UserLocalServiceWrapper`而不是`UserLocalServiceImpl`，这对于这种特殊用途来说非常麻烦。

有没有办法让 Liferay 使用我从 Ext 插件修改的服务类？或者，有没有办法允许钩子插件访问实现类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:59:11.683

可以使用以下过程从 Ext 插件更改服务类实现：

*   在 Ext 文件夹中创建一个名为`META-INF`under的新文件夹。`docroot/WEB-INF/ext-impl/src`

*   创建一个名为`ext-spring.xml`.`docroot/WEB-INF/ext-impl/src/META-INF`

*   在 Liferay*源代码*分发中搜索该`portal-spring.xml`文件。在 Liferay 6.1.1 中，可以在`portal-impl/src/META-INF/portal-spring.xml`.

*   将 的内容复制`portal-spring.xml`到之前创建的`ext-spring.xml`文件中。

*   从 中删除所有 bean 条目`ext-spring.xml`，除了那些对应于将被替换/扩展的类的条目。

*   对于每个剩余的条目，将`class`属性更改为指向替换类。

*   重新部署 Ext 插件并重启 Liferay 应用服务器。

# c - 使用 scanf 读取一个字符串和一个由 / 分隔的 int

> ID：12909840
> 
> 赞同：14
> 
> 时间：2012-10-16T07:46:37.120
> 
> 标签：c, scanf

输入由一个字符串和一个整数组成，它们由 a 分隔`'/'`，如下所示：

```
hello/17 
```

我想将输入读入一个字符串和一个`int`，如下所示：

```
char str[20];
int num;
scanf("%s/%d", str, &num);  // this how I tried to do it. 
```

好像做不出来，有什么建议吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-16T07:52:44.307

`scanf`尝试读取时等待以空格结尾的字符串`%s`。

尝试直接指定禁止字符集：

```
 scanf("%19[^/]/%d", str, &num); 
```

[您可以在此处](http://personal.ee.surrey.ac.uk/Personal/R.Bowden/C/scanf.html)阅读有关格式化代码的更多信息

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-16T07:58:50.290

您只需要运行以下程序：

```
#include <stdio.h>

int main (void) {
    char str[20] = {'\0'};
    int count, num = 42;

    count = sscanf ("hello/17", "%s/%d", str, &num);

    printf ("String was '%s'\n", str);
    printf ("Number was %d\n", num);
    printf ("Count  was %d\n", count);

    return 0;
} 
```

看看为什么会这样。输出是：

```
String was 'hello/17'
Number was 42
Count  was 1 
```

原因与`%s`格式说明符有关。从 C99 开始`7.19.6.2 The fscanf function`（在 C11 中基本没有变化，斜体是我的）：

> `s`: 匹配一系列*非空白*字符。

由于`/`不是空格，它被包含在字符串位中，`17`出于同样的原因。`sscanf`返回的事实也表明了这一点`1`，这意味着只扫描了*一项。*

然后，您将要寻找的是扫描字符串以外的任何字符*（*包括`/`空格）的东西。标准的同一部分也有帮助：

> `[`: 匹配一组预期字符（扫描集）中的非空字符序列。转换说明符包括格式字符串中的所有后续字符，直到并包括匹配的右括号 (])。括号之间的字符（扫描列表）组成扫描集，除非左括号之后的字符是一个抑扬符 (^)，在这种情况下，扫描集包含所有未出现在抑扬符和右括号之间的扫描列表中的字符。

换句话说，类似：

```
#include <stdio.h>
int main (void) {
    char str[20] = {'\0'};
    int count, num = 42;

    count = sscanf ("hello/17", "%[^/]/%d", str, &num);

    printf ("String was '%s'\n", str);
    printf ("Number was %d\n", num);
    printf ("Count  was %d\n", count);

    return 0;
} 
```

这给了你：

```
String was 'hello'
Number was 17
Count  was 2 
```

* * *

另一条建议：永远不要*使用*无限`scanf`的`%s`or `%[`; 您要求进行缓冲区溢出攻击。如果您想要一个强大的用户输入功能，请参阅[此答案](https://stackoverflow.com/questions/4023895/how-to-read-string-entered-by-user-in-c/4023921#4023921)。

一旦你把它作为一个字符串输入，你就可以随心所欲地使用`sscanf`它，而不必担心缓冲区溢出（因为你已经限制了输入的大小）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-04T08:22:26.550

可能是这样的：

```
char str[20];
int num;

scanf("%19[^/]%*c%d", str, &num); 
```

`%*c`读取一个字符并丢弃它

# elasticsearch - 在 edgeNGram 中找不到返回结果的查询字符串

> ID：12909844
> 
> 赞同：0
> 
> 时间：2012-10-16T07:47:00.047
> 
> 标签：elasticsearch

我无法让 edgengram 查询正常运行。我有一条记录“蓝草”，边缘图最小值为 2。“blv”查询字符串返回“蓝草”，尽管它不应该。

```
curl -X POST http://localhost:9200/test -d '{ 
    "mappings": { 
        "product/fragrance": { 
            "properties": { 
                "name_query": { 
                    "index_analyzer": "query_index_analyzer", 
                    "search_anaylzer": "query_search_analyzer", 
                    "as": {}, 
                    "type": "string" 
                } 
            } 
        } 
    }, 
    "settings": { 
        "analysis": { 
            "filter": { 
                "query_edgengram": { 
                    "type": "edgeNGram", 
                    "min_gram": 2, 
                    "max_gram": 20, 
                    "side": "front" 
                } 
            }, 
            "analyzer": { 
                "query_index_analyzer": { 
                    "tokenizer": "lowercase", 
                    "filter": ["asciifolding", "query_edgengram"] 
                }, 
                "query_search_analyzer": { 
                    "tokenizer": "lowercase", 
                    "filter": ["asciifolding"] 
                } 
            } 
        } 
    } 
}' 

curl -X POST "http://localhost:9200/test/product%2Ffragrance/1" -d '{ 
    "name_query": "blue grass" 
}' 

curl -X GET "http://localhost:9200/test/product%2Ffragrance/_search?load=true&pretty=true" -d '{ 
    "query": { 
        "bool": { 
            "must": [{ 
                "query_string": { 
                    "query": "blv", 
                    "fields": ["name_query"], 
                    "default_operator": "OR" 
                } 
            }] 
        } 
    } 
}' 
```

出于某种原因，我从中得到了一个结果。谁能解释为什么？谢谢。我想要发生的是“blv”不应该返回“蓝草”，尽管“bl”应该。我使用了分析 API，看到“蓝草”被分解为“bl”、“blu”、“blue”、“gr”、“gra”、“gras”、“grass”，但“blv”没有t 匹配其中任何一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:00:27.623

正如大卫在他的回答中告诉你的那样，我们分析了一些弹性搜索查询。通常您不想将 ngram 应用于您的查询，但您似乎已经知道给定您的映射。实际上，没有考虑到没有 ngrams 的搜索分析器的原因是一个错字：`search_anaylzer`而不是`search_analyzer`. 这就是为什么您的查询变为`bl`and`blv`并且`bl`与返回的文档匹配的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:31:09.830

当您使用 MatchQuery 或 QueryString 搜索某些内容时，将应用相同的分析器。所以 blv 被标记为 bl，blv 和 bl 匹配 bl！

您可以使用未分析的 TermQuery。

很难说更多，因为我没有您的查询。

大卫

# c++ - 运行 sfml 2.0 时遇到问题无法打开共享对象文件，没有这样的文件或目录

> ID：12909846
> 
> 赞同：0
> 
> 时间：2012-10-16T07:47:10.630
> 
> 标签：c++, sfml

[这](http://i.imgur.com/D1Gug.png)是正在发生的事情的图像。我觉得它应该提供所有需要的信息。

请帮助......这让我发疯了。我什至不知道该去哪里学习这些东西......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:48:16.027

尝试设置 LD_LIBRARY_PATH 环境变量指向共享库所在的文件夹：

```
export LD_LIBRARY_PATH = /path/to/so 
```

在您的情况下，路径是 currebt 目录，`.` 然后启动您的可执行文件

UPD：如果您的外壳不是 bash，您可能需要使用 setenv 而不是导出：

```
setenv LD_LIBRARY_PATH    . 
```

# c# - 在 C# 中创建 IStream 对象

> ID：12909850
> 
> 赞同：3
> 
> 时间：2012-10-16T07:47:19.290
> 
> 标签：c#, com, com-interop

我正在编写一个项目并使用另一方 DLL。

他们的 DLL 中的函数想要一个 IStream 对象来保存结果，但我不明白如何创建一个 IStream 对象。

谁能帮我解决我的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T07:49:27.480

您不创建 IStream 对象，因为显然它是一个接口。您应该实现此接口并传递您的对象。或者简单地使用一个已经实现它的对象，如果这样的对象存在的话。

已经给出了类似问题的答案给出了一个很好的例子，如何在 C# 中使用 IStream 接口。

[COM 互操作 IStream 的包装类是否已经存在？](https://stackoverflow.com/questions/2586159/does-a-wrapper-class-for-a-com-interop-istream-already-exist)

**更正：** 但是，这仅在您需要在应用程序中使用现有 IStream 时才有效，而不是当您需要在其他地方创建和传递 IStream 时。对于该任务，请参阅this for refence 如何执行此操作：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa380034(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380034(v=vs.85).aspx)

这是 Microsoft 的一个示例（用于 XmlLite，不确定它是否适合您）

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms752876(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms752876(v=vs.85).aspx)

或者这个例子，已经由 Marcus 发布：http: [//hl7connect.blogspot.sk/2010/04/c-implementation-of-istream.html](https://web.archive.org/web/20161130125259/http://hl7connect.blogspot.sk/2010/04/c-implementation-of-istream.html)

最后一个链接显示了如何使用任何 Stream 来实现 IStream 接口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-14T11:05:04.030

由于 .Net 更加开源，因此这是来自 Microsoft 的托管实现：

[https://referencesource.microsoft.com/#PresentationFramework/src/Framework/MS/Internal/IO/Packaging/managedIStream.cs](https://referencesource.microsoft.com/#PresentationFramework/src/Framework/MS/Internal/IO/Packaging/managedIStream.cs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T07:53:49.833

[实现自己的流类并继承 IStream 接口](http://hl7connect.blogspot.no/2010/04/c-implementation-of-istream.html)。IStream 只是一个流，只要它是一个流（例如 FileStream 等），几乎可以是您决定的。

相关：[链接](http://reflector.webtropy.com/default.aspx/Dotnetfx_Win7_3@5@1/Dotnetfx_Win7_3@5@1/3@5@1/DEVDIV/depot/DevDiv/releases/Orcas/NetFXw7/wpf/src/Framework/MS/Internal/IO/Packaging/ManagedIStream@cs/1/ManagedIStream@cs)

# java - 如何为 JMenu 子菜单设置加速器？

> ID：12909851
> 
> 赞同：5
> 
> 时间：2012-10-16T07:47:20.707
> 
> 标签：java, swing, key-bindings, jmenu, accelerator

我有一个用户请求将加速器添加到子菜单（JMenu），这将允许用户按下快捷方式并让相应的子菜单“折叠”，显示其包含的菜单项。

我不记得每个人都见过这样的东西（Java 或任何其他语言）。我们的应用程序是使用 Swing 用 Ja​​va 编写的。我们有许多带有加速器的 JMenuItems 运行良好，但是当我尝试向 JMenu 添加加速器时，出现以下异常：

java.lang.Error：没有为 JMenu 定义 setAccelerator()。请改用 setMnemonic()。

我试过使用[MenuDemo](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/MenuDemoProject/src/components/MenuDemo.java)！代码来进一步试验这个。

这是我尝试过的：

```
//a submenu
menu.addSeparator();
submenu = new JMenu("A submenu");
submenu.setMnemonic(KeyEvent.VK_S);
submenu.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_U, InputEvent.CTRL_MASK)); 
```

最后一行是我添加的，导致异常。

我已经尝试过广泛的谷歌搜索，但我能找到的只是关于如何将加速器添加到 JMenuItem 的文章。

似乎 JMenu 本身不支持此功能。是否有任何解决方法来实现这种行为？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T10:54:35.087

另一种选择是覆盖加速器获取/设置并重现 JMenuItem 行为。然后 UI 将完成剩下的工作。

重要的是触发属性更改并为加速器提供一致的获取/设置。此解决方案的优点是它还提供了快捷方式/加速器的视觉指示。

这是一个小演示代码：

```
import java.awt.event.KeyEvent;

import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.KeyStroke;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestMenu {

    protected void initUI() {
        JFrame frame = new JFrame(TestMenu.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JMenuBar bar = new JMenuBar();
        JMenu topMenu = new JMenu("Top Menu");
        JMenu subMenu = new JMenu("Sub menu") {
            private KeyStroke accelerator;

            @Override
            public KeyStroke getAccelerator() {
                return accelerator;
            }

            @Override
            public void setAccelerator(KeyStroke keyStroke) {
                KeyStroke oldAccelerator = accelerator;
                this.accelerator = keyStroke;
                repaint();
                revalidate();
                firePropertyChange("accelerator", oldAccelerator, accelerator);
            }
        };
        subMenu.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_F4, KeyEvent.CTRL_MASK));
        JMenuItem item1 = new JMenuItem("Item 1");
        JMenuItem item2 = new JMenuItem("Item 2");
        subMenu.add(item1);
        subMenu.addSeparator();
        subMenu.add(item2);
        topMenu.add(subMenu);
        bar.add(topMenu);
        frame.setJMenuBar(bar);
        frame.setSize(400, 300);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (InstantiationException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IllegalAccessException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (UnsupportedLookAndFeelException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                new TestMenu().initUI();
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-16T08:09:58.420

我不认为这是可能的。但是你可以做的是添加一个`AbstractAction`模拟点击的 。

```
submenu.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("control U"), "expand");
    submenu.getActionMap().put("expand", new AbstractAction("expand") {
        private static final long serialVersionUID = 1L;

        @Override
        public void actionPerformed(ActionEvent evt) {
            submenu.doClick();
        }
    }
); 
```

我希望这也适用于你。

# javascript - iframe 之间安全跨域通信的子空间替代方案？

> ID：12909853
> 
> 赞同：2
> 
> 时间：2012-10-16T07:47:38.353
> 
> 标签：javascript, iframe, cross-domain, xss

我们通过使用[本文](http://www2007.org/papers/paper801.pdf)定义的子空间模式实现了对父框架的某些对象的安全访问。有一个中介框架可以访问父框架中的单个对象，该对象具有供不受信任框架访问的唯一功能。到目前为止，这一直运行良好，因为 Firefox 16 已“修复”[此安全公告](http://www.mozilla.org/security/announce/2012/mfsa2012-76.html)中描述的此方法。

现在我正在寻找子空间的最佳安全替代方案。

目标是允许任何网站在其父框架（中介框架）中调用单个函数，然后应该允许中介框架调用主框架中允许的函数子集。欢迎任何可以以不同方式执行相同功能的替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:50:01.080

允许 iframe 之间的安全跨域通信的标准化方法是使用[消息传递](http://javascript.info/tutorial/cross-window-messaging-with-postmessage)：您使用`postMessage`并`receiveMessage`交换您根据需要定义的消息。

请参阅此[MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)。

# python - 模拟 Python 在 Scheme 中的范围

> ID：12909856
> 
> 赞同：10
> 
> 时间：2012-10-16T07:47:54.513
> 
> 标签：python, scheme

如何在Scheme中创建一个连续数字列表？

在 Python 中创建从 1 到 10 的整数列表将是`range(1,11)`. 是否有方案的等价物？

`mzscheme --version`给`Welcome to Racket v5.2.1.`

**编辑：**根据[https://stackoverflow.com/a/7144310/596361](https://stackoverflow.com/a/7144310/596361)实现范围功能，需要此代码：

```
#lang racket
(require srfi/1)
(iota 5 1) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T08:16:03.700

寻找**iota**（在 SRFI-1 中定义）。

示例： (iota 10 1) 给出从 1 开始的 10 个连续整数（而不是默认的 0）。

**iota**不采用与 range 相同的参数，但它复制了所有功能 - 升序范围，降序范围，如果只给出一个边界，则从 0 开始，指定间隔的能力。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T09:16:17.560

这是一个版本，如果第一个数字较低，则执行升序范围；如果第一个数字较高，则执行降序范围：

```
(define range
  (lambda (n m)
    (cond
      ((= n m) (list n))
        (else (cons n (range ((if (< n m) + -) n 1) m)))))) 
```

这是一个改进的版本，可以接受 1 或 2 个参数；如果只给出一个，它的范围是从 0 到给定的数字：

```
(define range
  (lambda (n . m)
    (let
      ((n (if (null? m) 0 n)) (m (if (null? m) n (car m))))
      (cond
    ((= n m) (list n))
    (else (cons n (range ((if (< n m) + -) n 1) m))))))) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-24T07:17:30.793

Racket 中有一个内置的[range](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket/list..rkt%29._range%29%29)函数，其行为类似于 Python。

```
> (range 10)
'(0 1 2 3 4 5 6 7 8 9) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-16T08:28:32.087

如果没有内置任何内容，那么编写自己的内容很简单：

```
(define (range first last)
  (if (>= first last)
      '()
      (cons first (range (+ first 1) last)))) 
```

在线方案评估器：[http ://eval.ironscheme.net/?id=71](http://eval.ironscheme.net/?id=71)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T16:51:51.100

我只是将@Ankur 的评论提升为答案。在球拍中，您有“范围内”：

```
#lang racket

(in-range 7)  ;; produces #<stream>

;; used in a loop:
(for/list ([i (in-range 7)])
  i)
;; produces (list 0 1 2 3 4 5 6)

;; and, for the lazy among us:

(for/list ([i 7])
  i)

;; produces the same 
```

它还可以接受下限、增量（包括负数）等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-09T09:17:45.447

根据 Germán Diago 的评论，我为此制作了一个纯功能惰性版本（即流）。它可以构造一个任意大小的范围流，您的 Scheme 实现可以在恒定时间内处理，以及访问当前元素并推进流，也在恒定时间内。

```
(define ^range
    (lambda (x y getter)
      (op x y getter)))

(define EOS ; End of stream for finite streams
    (^range '() '() (lambda () EOS)))

(define range 
    (lambda (x . y) ; if y < x then stream is infinite
      (let ((x (if (null? y) 0 x))
            (y (if (null? y) x (car y))))
        (^range x y (lambda ()
                      (if (= x y) EOS 
                       (range (+ x 1) y)))))))

(define get ; Get current element
    (lambda (r)
      (r (lambda (x y g) x))))

(define next ; Get stream for next element
    (lambda (r)
      (r (lambda (x y g) (g))))) 
```

使用此代码：

```
> (define r (range 1 3))
> (get r)
1
> (get (next r))
2
> (get (next (next r)))
3
> (get (next (next (next r)))) ; EOS
() 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-07-17T08:22:46.000

没有找到我想要的并且不想使用外部包，我最终编写了自己的版本，该版本不同于 python 版本（希望对其进行改进）。如果您认为它确实效率低下并且可以改进它，请这样做。

```
;; A version of range taking the form (range [[first] last [[step]]] ).
;; It takes negative numbers and corrects STEP to the same direction
;; as FIRST to LAST then returns a list starting from FIRST and
;; ending before LAST
(define (range . args)
  (case (length args)
   ( (0) '())
   ( (1) (range 0 (car args) (if (negative? (car args)) -1 1)))
   ( (2) (range (car args) (cadr args)
             (if (>= (car args) (cadr args)) -1 1)))
   ( (3) (let* ((start (car args)) (end (cadr args)) 
                (step (if (> start end)
                          (- (abs (caddr args))) 
                          (abs (caddr args)))))
            (let loop ((x start) (xs '()))
               (cond ((and (>= end start) (<= end x))
                      (reverse xs))
                     ((and (<= end start) (>= end x))
                      (reverse xs))
                     (else (loop (+ x step) (cons x xs)))))))
   (else (error 'range "too many arguments"))))
;  (else (display "ERROR: range too many arguments") (newline)))) ;;r4rs

;; (range-inc [[first] last [[step]]] ) includes LAST in the returned range
(define (range-inc . args)
  (case (length args)
    ( (0) '())
    ( (1) (append (range (car args)) args))
    ( (2) (append (range (car args) (cadr args)) (cdr args)))
    ( (3) (append (range (car args) (cadr args) (caddr args))
                  (list (cadr args))))
    (else (error 'range "too many  arguments"))))
;   (else (display "ERROR: range too many arguments") (newline)))) ;;r4rs 
```

注意我也写了一个[通用的 lisp](https://stackoverflow.com/a/51376674/6713615)版本

# java - Android OpenStreetMap 边界框内的所有街道

> ID：12909859
> 
> 赞同：2
> 
> 时间：2012-10-16T07:48:10.287
> 
> 标签：java, android, openstreetmap

我正在编写一个只需要显示街道数据的 android 应用程序，比如 max-speed 等。出于这个原因，我想在我传递给 OSM 的 API 的边界框中提取所有街道数据。

现在我得到一个相当大的文件，其中包含存储在 OSM 中的所有信息。有没有办法只查询街道数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:58:55.473

根据 API 文档，边界框的唯一参数是左、下、右和上。似乎没有其他方法可以检索地图的区域。您可以通过 ID 单独获取节点，但我认为这将非常无用。

您可以实现自己的 Web 服务，该 Web 服务访问 OSM api 并将其剥离，然后从您的应用程序中访问您自己的 Web 服务。额外的工作，但减轻了您的移动客户端的负担。

[http://wiki.openstreetmap.org/wiki/API_v0.6](http://wiki.openstreetmap.org/wiki/API_v0.6)

# tree - Vaadin 中的树小部件项目单击侦听器

> ID：12909867
> 
> 赞同：1
> 
> 时间：2012-10-16T07:48:49.193
> 
> 标签：tree, widget, vaadin, listeners

因为我想单击特定的树小部件项目，并且必须在下一个面板选项卡中显示有关该项目的图标和描述。请任何人告诉我或任何示例应用程序都非常感谢..

```
public void itemClick(ItemClickEvent event) {
  if (event.getSource() == t) {
      Object itemId = event.getItemId();
      if (event.getItem() != null) {
        Item clicked = event.getItem();
        showWindowtab();                          
      }
    }
  }
}); 
```

* * *

提前致谢——Kiran kumar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-24T22:19:20.323

假设您使用的是 Vaadin 7 ，并且您在自己的代码中为每个项目定义了侦听器：

```
public void itemClick(ItemClickEvent event) {
  if (event.getSource() == t) {
      Object itemId = event.getItemId();
      if (event.getItem() != null) {
        Item clicked = event.getItem();
        showWindowtab(clicked.getItemId());                          
      }
    }
  }
}); 
```

您的 showWindowTab() 方法应该打开一个窗口（可能是模态的？），并显示您需要的信息，例如：

```
public void showWindowTab(int itemId){ 

    Window w = new Window("Item description");
    VerticalLayout v = new VerticalLayout();
    Label description = new Label("This is the item description.");

    v.addComponent(description);
    w.setContent(v);
    w.setModal(true);

    getUI().addWindow(w); 

} 
```

这将添加一个带有描述的模式窗口，您必须根据 itemId 参数获取项目的描述。如果要使用图像，可以使用 Embedded 和 ThemeResource。

# java - 如果 Set 包含具有某些字符串值的对象，如何检查 java？

> ID：12909871
> 
> 赞同：29
> 
> 时间：2012-10-16T07:48:52.597
> 
> 标签：java, string, dictionary, iterator, set

我有一组对象。每个对象都有字符串值。

我需要选择所有`this`值等于“方向”的对象。

是否可以不迭代集合？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-16T07:50:51.250

一般来说，没有。您需要遍历集合并检查每个对象以查看属性是否等于您正在搜索的值。这是一个`O(n)`操作。

在一种情况下，您可以在不迭代的情况下做到这一点。如果您的对象的`equals`方法是根据该属性的相等性定义的`String`，并且该`hashCode`方法也正确实现，那么您可以使用[`hashSet.contains`](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html#contains(java.lang.Object))及时找到具有正确值的对象，`O(1)`而无需遍历集合。

正如我所提到的，这是一个非常具体的用例，而不是通用解决方案。如果字符串是某种唯一标识符，它可能会很有用，但它不适用于您的特定用例。

您可能还想考虑其他更适合您的用例的集合。例如，如果您使用 Guava，那么您可以考虑使用[Multimap](http://guava-libraries.googlecode.com/svn/tags/release08/javadoc/com/google/common/collect/Multimap.html)。

**有关的**

*   [HashMap在同一个键下有多个值](https://stackoverflow.com/questions/4956844/hashmap-with-multiple-values-under-the-same-key)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-03-20T12:22:52.463

是的，这可以通过**覆盖`equals()`方法**来实现。

```
@Override 
public boolean  equals (Object object) {

} 
```

您只想检查 equals 方法中的所有内容。

**代码：**

```
package com.webapp.test;

import java.util.ArrayList;
import java.util.List;

public class EmployeeModel {    

    public EmployeeModel(String name, String designation, long age) {
        this.name = name;
        this.designation = designation;
        this.age = age;
    }

    private String name;
    private String designation;
    private long age;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getDesignation() {
        return designation;
    }

    public void setDesignation(String designation) {
        this.designation = designation;
    }

    public long getAge() {
        return age;
    }

    public void setAge(long age) {
        this.age = age;
    }

    @Override
    public boolean equals (Object object) {
        boolean result = false;
        if (object == null || object.getClass() != getClass()) {
            result = false;
        } else {
            EmployeeModel employee = (EmployeeModel) object;
            if (this.name == employee.getName() && this.designation == employee.getDesignation() && this.age.equals(employee.getAge())) {
                result = true;
            }
        }
        return result;
    }
}

public static void main(String args[]) {
    EmployeeModel first = new EmployeeModel("Sameer", "Developer", 25);
    EmployeeModel second = new EmployeeModel("Jon", "Manager", 30);
    EmployeeModel third = new EmployeeModel("Priyanka", "Tester", 24);

    List<EmployeeModel> employeeList = new ArrayList<EmployeeModel>();
    employeeList.add(first);
    employeeList.add(second);
    employeeList.add(third);

    EmployeeModel checkUserOne = new EmployeeModel("Sameer", "Developer", 25);
    System.out.println("Check checkUserOne is in list or not ");
    System.out.println("Is checkUserOne Present = ? " + employeeList.contains(checkUserOne));

    EmployeeModel checkUserTwo = new EmployeeModel("Tim", "Tester", 24);
    System.out.println("Check checkUserTwo is in list or not");
    System.out.println("Is checkUserTwo Present = ? " + employeeList.contains(checkUserTwo));

} 
```

**输出：**

> ```
> Check checkUserOne is in list or not 
> Is checkUserOne Present = ? true
> Check checkUserTwo is in list or not 
> Is checkUserTwo Present = ? false 
> ```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-12-12T12:09:01.130

我知道这是一个老问题，但是......

## 简短的回答：不，这是不可能的......

使用`equals()`或`contains()`按照其他人的建议应仅限于您用于过滤的属性实际上是对象身份的一部分的情况。除了 O(n) 算法，我没有看到任何方法。

如果你正在考虑原生函数，Java 8 带来了**Stream API**和**函数式编程**的概念，允许更简单、更清晰的循环调用。尽管如此，值得注意的是，对于您的情况，必须检查集合中的所有对象，因此复杂性将保持为 O(n)。

## Java 8 示例`stream().filter()`

```
public static void main(String[] args...){
    Set<MyClass> mySet = new HashSet<>();
    mySet.add(new MyClass("Obj 1", "Rio de Janeiro"));
    mySet.add(new MyClass("Obj 2", "London"));
    mySet.add(new MyClass("Obj 3", "New York"));
    mySet.add(new MyClass("Obj 4", "Rio de Janeiro"));

    Set<MyClass> filtered = mySet.stream()
                                 .filter(mc -> mc.getCity().equals('Rio de Janeiro'))
                                 .collect(Collectors.toSet());

    filtered.forEach(mc -> System.out.println("Object: "+mc.getName()));

    // Result:
    //    Object: Obj 1 
    //    Object: Obj 4 
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-16T07:52:09.490

您也可以`Predicate`在这个问题中使用 like 来过滤列表：[过滤 Java 集合的最佳方法是什么？](https://stackoverflow.com/questions/122105/java-what-is-the-best-way-to-filter-a-collection)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-04-24T14:23:12.063

你仍然可以使用`contains()`方法。

您只需要映射您的初始 Set 并将其转换为字符串集合，其中仅包含您想要检查它们是否存在于对象集合中的字段值。

请参阅基于[Felipe Leão](https://stackoverflow.com/users/1805077/felipe-le%C3%A3o)和[Michael Laffargue](https://stackoverflow.com/users/602928/michael-laffargue)先前答案的下一个示例。

```
public static void main(String[] args...){
     Set<MyClass> mySet = new HashSet<>();
     mySet.add(new MyClass("Obj 1"));
     mySet.add(new MyClass("Obj 2"));
     mySet.add(new MyClass("Obj 3"));

     Set<String> mapped = mySet.stream()
                             .map(MyClass::getField())
                             .collect(Collectors.toSet());

     mapped.contains("Obj 1");
     mapped.contains("Obj 2");
     mapped.contains("Obj 4");

     // Result:
     //     true 
     //     true
     //     false 
```

}

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-02T17:53:53.037

我通过使用**Stream API**解决了这个问题：

```
Student ousama = students.stream()
  .filter(student -> "ousama".equals(student.getName()))
  .findAny()
  .orElse(null);

if(ousama != null) {
  //Exist
} else {
  //Doesn't exist
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-27T16:46:27.260

在我的用户类中，我已经初始化了角色变量，例如**private Set<\Role> roles;** . 这有一个getter方法。在 Role 类中，我有 String 角色变量，它用于存储角色的值。为了得到角色的价值。我可以使用下面的代码。

```
for (Role role : user.getRoles()) {
           rolevalue = role.getRole();
        } 
```

# jquery - Media Element JS - 检查媒体文件是否存在

> ID：12909872
> 
> 赞同：0
> 
> 时间：2012-10-16T07:48:56.560
> 
> 标签：jquery, mediaelement.js

有没有办法让我知道媒体元素js是否可以加载文件？我想知道 src 是否传递了指向存在或不存在的媒体文件的点。

还是我需要使用 Ajax 手动检查 JQuery 中的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:21:30.850

也许您可以使用 jQuery 的[`.error()`](http://api.jquery.com/error/)功能来实现您的目标？

# c# - 实体框架重复记录

> ID：12909876
> 
> 赞同：0
> 
> 时间：2012-10-16T07:49:11.877
> 
> 标签：c#, asp.net-mvc, entity-framework

我正在开发一个实体框架项目，我在其中创建了一个表的实体类

我正在返回它的记录，下面是我检索记录的方法

```
 public UserResource GetData(long Id)
        {
            try
            {

                return dataContext.UserResources.Where(r => r.UserID == Id && r.Resource.IsActive == true).FirstOrDefault();

            }
            catch (Exception ex)
            {
              throw ex;
            }
        } 
```

然后在控制器上我将它添加到列表

```
List<UserResource> objlst = new List<UserResource>();
for(int i=0;i<100;i++)
{
var data = objResourceRepository.GetData(userIds[i].UserID);
if (data != null)
objlst.Add(data);
} 
```

userIds 来自一个单独的方法我遇到的问题是数据添加了两次，即一条记录添加了两次，这段代码有什么问题，我应该使用什么替代方法 GetData() 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:54:40.660

您的 UserResources 表中有相同的 useId 的重复记录，或者您的 userIds 数组中有重复的 userId。

无论哪种方式，为 100 条记录中的每条记录分别访问数据库似乎是一种非常低效的做事方式。至少，最好将 use 数组的数组传递给 GetData 函数，并在其中使用“in”子句。然后让您的 GetData 函数返回 UserResources 的枚举。

# c# - 单击按钮时无法检索文本框值

> ID：12909877
> 
> 赞同：1
> 
> 时间：2012-10-16T07:49:15.247
> 
> 标签：c#, .net, wpf, binding, textbox

看标题可能看起来很简单，但它很棘手。我正在开发一个 wpf 应用程序，我需要在其中动态生成按钮、标签和文本框。在我的 VoltageView XAml 文件中，我创建了一个堆栈面板。在我的 VoltageChannelView xaml 文件中，我创建了所有 UI 组件。

我在一定程度上实现了如下：

**电压视图：**

```
<Grid Grid.Row="1" Style="{DynamicResource styleBackground}" Name="VoltageChannels" >
        <StackPanel Height="Auto" Name="stackPanel" Width="Auto" MinHeight="300"></StackPanel>
</Grid> 
```

**电压通道视图：**

```
<Label Grid.Column="0" Content="{Binding ChannelName}" />
<TextBox Grid.Column="1" Text="{Binding VoltageText}" />
<Button Grid.Column="1" Content="Set" CommandParameter="{Binding VoltageText}" Command="{Binding VoltageCommand}" /> 
```

我将上述动态生成的 Ui 组件添加到我的 VoltageView.xaml.cs 中的**堆栈面板**中，如下所示：

```
VoltageViewModel mVoltageViewModel = new VoltageViewModel();

// Called in constructor
public void OnChildAdd()
    {            
        foreach (VoltageBoardChannel mVoltageChannelViewModel in mVoltageViewModel.VoltageChannelList)
        {
            VoltageChannelView mVoltageChannelView = new VoltageChannelView();
            mVoltageChannelView.Margin = new Thickness(2);
            mVoltageChannelView.ChannelInfo = mVoltageChannelViewModel;
            stackPanel.Children.Add(mVoltageChannelView);
        }
    } 
```

**电压视图模型类：**

```
public ObservableCollection<VoltageBoardChannel> channelList = null;

    public ObservableCollection<VoltageBoardChannel> redhookChannels = new ObservableCollection<VoltageBoardChannel>
    {             
         new VoltageBoardChannel { ChannelName = "VDD_IO_AUD", IsAvailable = true},
         new VoltageBoardChannel { ChannelName = "VDD_CODEC_AUD", IsAvailable = true},
         new VoltageBoardChannel { ChannelName = "VDD_DAL_AUD", IsAvailable = true},
         new VoltageBoardChannel { ChannelName = "VDD_DPD_AUD", IsAvailable = true},
         new VoltageBoardChannel { ChannelName = "VDD_PLL_AUD", IsAvailable = true},
         new VoltageBoardChannel { ChannelName = "VDD_AMP1_AUD", IsAvailable = true}             
    };       

    public ObservableCollection<VoltageBoardChannel> bavaria1Channels = new ObservableCollection<VoltageBoardChannel>
    {
         new VoltageBoardChannel { ChannelName = "VDD__MAIN", IsAvailable = true},
         new VoltageBoardChannel { ChannelName = "VDD__IO", IsAvailable = true},
         new VoltageBoardChannel { ChannelName = "VDD__CODEC", IsAvailable = true},
         new VoltageBoardChannel { ChannelName = "VDD__LDO", IsAvailable = true},
         new VoltageBoardChannel { ChannelName = "VDD__AMP", IsAvailable = true},  

    };        

    public VoltageViewModel()
    {
        channelList = new ObservableCollection<VoltageBoardChannel>();
        channelList = bavaria1Channels;          

    }

    public ObservableCollection<VoltageBoardChannel> VoltageChannelList
    {
        get 
        { 
            return channelList; 
        }

        set
        { 
            channelList = value;
            OnPropertyChanged("ChannelList");
        }
    }

    RelayCommand _voltageCommand;
    public ICommand VoltageCommand
    {
        get
        {
            if (_voltageCommand == null)
            {
                _voltageCommand = new RelayCommand(param => this.DoSomethingExecute, param => this.DoSomethingCanExecute);
            }
            return _voltageCommand;
        }
    }

    public bool DoSomethingCanExecute(object param)
    {
        return true;
    }

    public void DoSomethingExecute(object param)
    {

    } 
```

正如您在启动时看到的那样，显示了**BAVARIA1**通道。

**VoltageBoardChannel（型号）类：**

```
private string mChannelName;
    public string ChannelName
    {
        get
        {
            return mChannelName;
        }
        set
        {
            mChannelName = value;
            OnPropertyChanged("ChannelName");
        }
    }

    private bool mIsAvailable;
    public bool IsAvailable
    {
        get; set;
    }

    string voltageText = string.Empty;
    public string VoltageText
    {
        get
        {
            return voltageText;
        }

        set
        {
            voltageText = value;
            OnPropertyChanged("VoltageText");
        }
    } 
```

因此，当我运行该应用程序时，它会在列表中动态显示 4 次 bavaria1 频道。现在在每个动态生成的控件上都有一个文本框和按钮。

你可以注意到`VoltageChannelView.xaml`我已经做了一个绑定 bw 按钮和文本框。我想在文本框中输入值并单击 SET 按钮，它应该检索输入的值，以便可以完成进一步的操作。基本上应该有一个 SET 按钮的事件，它应该将 Textbox 中写入的文本作为参数传递。

我怎样才能实现它？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:05:30.220

当我看到这一点时，您是否错过了您的命令的实施。您需要的是处理您的命令的逻辑。

从这篇文章中复制源代码[WPF 应用程序与模型-视图-视图模型设计模式](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id0090051)

**中继命令类**

```
public class RelayCommand : ICommand
{
    #region Fields

    readonly Action<object> _execute;
    readonly Predicate<object> _canExecute;        

    #endregion // Fields

    #region Constructors

    public RelayCommand(Action<object> execute)
    : this(execute, null)
    {
    }

    public RelayCommand(Action<object> execute, Predicate<object> canExecute)
    {
        if (execute == null)
            throw new ArgumentNullException("execute");

        _execute = execute;
        _canExecute = canExecute;           
    }
    #endregion // Constructors

    #region ICommand Members

    [DebuggerStepThrough]
    public bool CanExecute(object parameter)
    {
        return _canExecute == null ? true : _canExecute(parameter);
    }

    public event EventHandler CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    }

    public void Execute(object parameter)
    {
        _execute(parameter);
    }

    #endregion // ICommand Members
} 
```

你的命令实现应该看起来像：

```
RelayCommand _voltageCommand ;
public ICommand VoltageCommand 
{
    get
    {
        if (_voltageCommand == null)
        {
            _voltageCommand = new RelayCommand(this.DoSomethingExecute,
                this.DoSomethingCanExecute);
        }
        return _voltageCommand;
    }
} 
```

**执行方法：**

```
public void DoSomethingExecute(object param)
{
    // param is your string        
    //Do Something with VoltageText
} 
```

**CanExecute方法**

```
public bool DoSomethingCanExecute(object param)
{
    return true;        
} 
```

# python - Python Selenium 'WebDriver' 对象没有属性错误

> ID：12909884
> 
> 赞同：6
> 
> 时间：2012-10-16T07:49:42.253
> 
> 标签：python, selenium, attributes, web-scraping, attributeerror

我正在尝试从中文网站上抓取一些 javascript 生成的内容。我正在使用 Selenium（和 Python），因为我无法直接抓取 javascript 内容。

```
# -*- coding: utf-8 -*-
from selenium import webdriver
from selenium.webdriver.common.keys import Keys
from selenium.selenium import selenium 

import time
import urllib2
import httplib
import urllib
import re
import base64

browser = webdriver.Firefox() # Get local session of firefox
browser.get("http://www...") # Load page (redacted here, but any works)
browser.get_body_text() #Attempt to scrape body text 
```

我收到以下错误：

```
'WebDriver' object has no attribute 'get_body_text' 
```

事实上，我似乎无法调用 selenium.selenium 类中的任何命令。毫无疑问，我忽略了一些非常明显的东西。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T17:53:41.043

1.  你只需要`from selenium import webdriver`.
2.  执行`html= browser.find_element_by_xpath(".//html")`获取页面上的html元素，最大的元素。（您可以通过多种方式执行此操作，并选择任意数量的元素。）
3.  执行`html.text`返回页面文本。

`.text`是`element`对象的方法。第 2 步是对`element`name的分配`html`。

# cmis - 如何检查查询 cmis 存储库是否返回空

> ID：12909885
> 
> 赞同：0
> 
> 时间：2012-10-16T07:49:42.953
> 
> 标签：cmis

```
 queryString = " ..." ;
    ItemIterable<QueryResult> results = session.query(queryString, false);
    // this line simply fails, it doesn't throw an exception.
    for (QueryResult qResult : results) {
       // ....
    } 
```

在开始 for-loop 之前有什么方法可以检查**结果是否为空？**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:27:11.883

session.query() 方法不联系存储库。它只准备一个可以与存储库对话并执行查询的对象（“结果”）。只要您没有从这个“结果”对象中提取，它就对结果集一无所知。在您的示例中，for 循环第一次拉动。如果结果集为空，则跳过循环。

如果你不喜欢使用循环来检查是否有结果，你可以在循环之前这样做：

```
if (results.getPageNumItems() == 0) {
  // break here
} 
```

getPageNumItems() 方法获取第一批（页面）查询结果。如果结果集为空，则第一批为空。在性能方面，您是否执行此操作或检查循环是否已被跳过并不重要。两者都对服务器进行相同的往返。

它不应该抛出异常，抛出。如果是这样，请检查您的查询并 - 根据异常情况 - 与您的存储库供应商交谈。

# jsf - 为每个 h:form 创建的新 @ViewScoped bean

> ID：12909886
> 
> 赞同：1
> 
> 时间：2012-10-16T07:49:49.023
> 
> 标签：jsf, facelets

我`@ViewScoped`在为页面上的不同表单多次创建 bean 时遇到问题。

我创建了一个简单的测试页面：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html">
<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</h:head>
<h:body>
    <h:form id="f1">
        <h:commandButton value="action 1" action="#{testController.action}">
            <f:ajax />
        </h:commandButton>
    </h:form>
    <h:form id="f2">
        <h:commandButton value="action 2" action="#{testController.action}">
            <f:ajax />
        </h:commandButton>
    </h:form>
</h:body>
</html> 
```

和一个支持bean：

```
@ManagedBean
@ViewScoped
public class TestController implements Serializable {
    private static final long serialVersionUID = 1L;

    public TestController() {
        System.out.println("TestController created");
    }

    public String action() {
        System.out.println("action() invoked");
        return null;
    }

    private void writeObject(ObjectOutputStream out) throws IOException {
        System.out.println("serialization");
        out.defaultWriteObject();
    }

    private void readObject(ObjectInputStream in) throws IOException,
            ClassNotFoundException {
        System.out.println("deserialization");
        in.defaultReadObject();
    }
} 
```

这是 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID" version="3.0">
    <display-name>WebTest</display-name>
    <welcome-file-list>
        <welcome-file>index.xhtml</welcome-file>
    </welcome-file-list>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>
    <context-param>
        <param-name>javax.faces.FACELETS_REFRESH_PERIOD</param-name>
        <param-value>1</param-value>
    </context-param>
    <context-param>
        <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
        <param-value>resources.application</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>client</param-value>
    </context-param>

    <listener>
        <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
    </listener>
</web-app> 
```

当我单击`action 1`按钮时，会创建一个新`TestController`bean，然后使用`writeObject`方法进行序列化。然后，当我单击`action 2`按钮时，我希望它会被反序列化，但相反，会创建一个新的 bean，这两个 bean 分别为每个`<h:commandButton>`.

我用 Mojarra 和 Myfaces 都遇到了这个问题，所以我想这不是库中的错误。

也许我犯了一些愚蠢的错误或错过了什么，但`@ViewScoped`无论页面上的数量如何，bean 不应该是当前视图的唯一 bean`<h:form>`吗？

**更新：**我发现删除`<f:ajax>`标签时问题消失了；不幸的是，这不是我的选择。

**更新2：**我想我找到了问题的原因：使用多个表单时，只有请求表单`ViewState`会自动更新。在我的示例中，如果我使用第一个表单发送请求，则第二个表单的视图状态不会更新，除非我`render=":f2"`在`<f:ajax>`第一个表单中添加。并且由于`@ViewScoped`bean 存储在视图状态中，第二个表单的视图状态将不包含该 bean，因此在从第二个表单发送请求时将创建一个新的 bean。因此，如果我的推理是正确的，我必须使用`render`属性手动更新视图中的所有表单，以保持跨表单的视图状态相同。但这似乎不方便，特别是如果页面上有很多表格。没有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:00:03.973

到目前为止发布的代码并没有这样做。至少，在默认的 JSF 游乐场项目中对我来说不是。

然而，当您将视图范围的 bean 属性绑定到标记处理程序的任何属性（如 JSTL `<c:forEach>`、Facelets `<ui:include>`、JSF `<f:attribute>`）或JSF UI 组件的`id`或属性时，这些症状是可以识别的。`binding`

标签处理程序属性和 UI 组件的属性中的任何 EL 表达式都会`id`在`binding`构建和恢复视图期间执行。在回发期间恢复视图时，视图范围的 bean 仅*在*恢复视图后可用（因为它们存储在其中）。因此，在视图恢复时它们不可用，这就解释了为什么每次都构建它们。

### 也可以看看：

*   [`@ViewScoped`标记处理程序失败](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ViewScopedFailsInTagHandlers)

# pyqt - PyInstaller 和 Poppler

> ID：12909887
> 
> 赞同：3
> 
> 时间：2012-10-16T07:49:59.833
> 
> 标签：pyqt, pyinstaller, poppler

我正在开发一个可以显示 pdf 文件的 Python 应用程序。我尝试使用[python-poppler-qt4](http://code.google.com/p/python-poppler-qt4/)绑定。

到目前为止没有问题。但我也需要构建一个独立的程序可执行文件。为此，我想使用[PyInstaller](http://www.pyinstaller.org)。

PyInstaller 似乎不支持 Poppler。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:23:49.847

您遇到的问题是什么？

我已经使用 python-poppler-qt4 编写了很多使用 PyInstaller 打包的 Windows 程序，唯一的问题是`PyQt4.QtXml`依赖项没有自动导入。

这可以通过创建一个以`hook-popplerqt4.py`内容命名的文件来解决：

```
hiddenimports = ['PyQt4.QtXml'] 
```

将此文件与其他钩子一起保存在

```
<PyInstaller Root>/PyInstaller/hooks 
```

你应该很高兴。

如果您仍然遇到问题，请发布您的错误，以便我们更好地了解问题所在。

# java - 在 jLabel 上调整图像大小

> ID：12909890
> 
> 赞同：1
> 
> 时间：2012-10-16T07:50:15.370
> 
> 标签：java, image, resize, jlabel, autoresize

我试图在 java 中调整 jLabel 上的图像大小，下面给出了不起作用的代码片段：

```
ImageIcon imgThisImg = new ImageIcon(rs.getString("PictureURL"));
Image image=null;
image=jLabel2.createImage(120, 50);
ImageIcon imi=new ImageIcon(image);
jLabel2.setIcon(imi); 
```

当我运行它时，我的 jlabel 上什么也没有。事实上，如果我运行下面的代码，它工作正常。问题是我想要一个按比例缩小的图像：

```
ImageIcon imgThisImg = new ImageIcon(rs.getString("PictureURL"));
jLabel2.setIcon(imgThisImg); 
```

我找不到我错的地方。请建议我任何想法我应该如何去做。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:54:35.153

请参阅下面的重新缩放图像的更好解决方案。在下面的代码中，`newImage`是重新缩放的图像。

```
BufferedImage image = ImageIO.read(imageFile);
BufferedImage newImage = new BufferedImage(newWidth, newHeight, image.getType());
Graphics2D g2 = newImage.createGraphics();
g2.drawImage(image, 0, 0, newWidth, newHeight, null);
g2.dispose(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:12:35.577

这是渲染组件的代码，可能会给您一些提示。

```
class PaintCommandListCellRenderer extends DefaultListCellRenderer {

    @Override
    public Component getListCellRendererComponent(
            JList list, 
            Object value,
            int index, 
            boolean isSelected, 
            boolean hasFocus) {
        Component c = super.getListCellRendererComponent(list, value, index, isSelected, hasFocus);
        if (c instanceof JLabel && value instanceof PaintCommand) {
            JLabel l = (JLabel)c; 
            PaintCommand pc = (PaintCommand)value;
            try {
                BufferedImage bi = pc.getUndoImage();
                double w = bi.getWidth();
                double ideal = 200d;
                double ratio = w/ideal;
                int aw = (int)(w/ratio);
                int ah = (int)(bi.getHeight()/ratio);
                BufferedImage bj = new BufferedImage(
                        aw,ah,BufferedImage.TYPE_INT_ARGB);
                Graphics2D g = bj.createGraphics();
                g.drawImage(bi, 0, 0, aw, ah, null);
                g.dispose();
                l.setIcon(new ImageIcon(bj));
                l.setText("");
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        return c;
    }
} 
```

# jquery-mobile - 更改 jQuery Mobile 加载图标

> ID：12909899
> 
> 赞同：0
> 
> 时间：2012-10-16T07:50:40.350
> 
> 标签：jquery-mobile, episerver

我正在尝试通过使用此 css 覆盖 jquery mobile css 设置来更改 jQuery Mobile (v1.1.0) 的默认加载图标。正如我从阅读中了解到的那样，这是使其工作的一种方法。（[如何在 jquery mobile 中更改默认加载 ajax loader gif](https://stackoverflow.com/questions/12225126/how-to-change-the-default-load-ajax-loader-gif-in-jquery-mobile)）

```
ui-loader .ui-icon {
     background-image: url(images/ajax-loader-2.gif);
} 

.ui-icon-loading {  
     background-image: url(images/ajax-loader-2.gif);
     background-size: 42px 42px;
} 
```

这些更改是所做的唯一代码更改。

我还尝试将背景设置为图像，但没有运气。

```
ui-loader .ui-icon {
     background: url(images/ajax-loader-2.gif);
} 

.ui-icon-loading {  
     background: url(images/ajax-loader-2.gif);
     background-size: 42px 42px;
} 
```

我已将新加载器与默认加载器放在同一目录中。但是，当我使用 firebug 进行调试时，它会显示“无法加载给定的 URL”。我认为这可能是一些缓存问题，但它显示了一个黑色圆圈 - 这意味着至少正在进行一些更改。我也尝试不更改任何代码，但没有运气用新文件覆盖 ajax-loader.gif。这是一个表观服务器解决方案。

希望我的问题很清楚。

问候

**解决了：**

当我将其从本地复制到 VM 时，文件权限出现问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:47:08.887

我发现了问题。

当我将文件复制到虚拟机时，文件权限出现问题。根本与 jQuery 无关。

# c# - 将图像保存到文件

> ID：12909905
> 
> 赞同：39
> 
> 时间：2012-10-16T07:50:58.790
> 
> 标签：c#, winforms, image, gdi+, save

我正在开发一个基本的绘图应用程序。我希望用户能够保存图像的内容。

![在此处输入图像描述](../Images/4dfc1c7abd0881f3dcf37bab8166f578.png)

我想我应该使用

```
System.Drawing.Drawing2D.GraphicsState img = drawRegion.CreateGraphics().Save(); 
```

但这无助于我保存到文件。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-10-16T08:00:17.697

您可以尝试使用这种方法保存图像

```
SaveFileDialog dialog=new SaveFileDialog();
if (dialog.ShowDialog()==DialogResult.OK)
{
   int width = Convert.ToInt32(drawImage.Width); 
   int height = Convert.ToInt32(drawImage.Height); 
   Bitmap bmp = new Bitmap(width, height);        
   drawImage.DrawToBitmap(bmp, new Rectangle(0, 0, width, height));
   bmp.Save(dialog.FileName, ImageFormat.Jpeg);
} 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-10-16T07:55:52.797

您可以尝试使用此代码

```
Image.Save("myfile.png", ImageFormat.Png) 
```

链接：http: [//msdn.microsoft.com/en-us/library/ms142147.aspx](http://msdn.microsoft.com/en-us/library/ms142147.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-16T08:07:06.957

如果您在控件的图形上绘图，那么您应该在位图上绘制您在画布上绘制的所有内容，但请记住，位图需要与您正在绘制的控件的确切大小相同：

```
 Bitmap bmp = new Bitmap(myControl.ClientRectangle.Width,myControl.ClientRectangle.Height);
  Graphics gBmp = Graphics.FromImage(bmp);
  gBmp.DrawEverything(); //this is your code for drawing
  gBmp.Dispose();
  bmp.Save("image.png", ImageFormat.Png); 
```

或者您可以使用`DrawToBitmap`控件的方法。像这样的东西：

```
Bitmap bmp = new Bitmap(myControl.ClientRectangle.Width, myControl.ClientRectangle.Height);
myControl.DrawToBitmap(bmp,new Rectangle(0,0,bmp.Width,bmp.Height));
bmp.Save("image.png", ImageFormat.Png); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-08T22:20:15.360

您可以保存图像，将文件保存在当前目录应用程序中并将文件移动到任何目录。

```
 Bitmap btm = new Bitmap(image.width,image.height);
    Image img = btm;
                        img.Save(@"img_" + x + ".jpg", System.Drawing.Imaging.ImageFormat.Jpeg);
                        FileInfo img__ = new FileInfo(@"img_" + x + ".jpg");
                        img__.MoveTo("myVideo\\img_" + x + ".jpg"); 
```

# struts2 - Struts json结果includeProperties正则表达式不适用于root存在

> ID：12909906
> 
> 赞同：1
> 
> 时间：2012-10-16T07:51:02.220
> 
> 标签：struts2, struts2-json-plugin

这个问题已经在struts社区被问过好几次了，场景很简单：如果你指定

```
<param name="root">
myLists               
</param> 
```

在 json 结果定义中，如果我指定一些像这样的正则表达式，includeProperties 将不起作用：

```
 <param name="includeProperties">
   .*\.movieId,
    .*\.filmName
  </param> 
```

[此处](http://code.google.com/p/jsonplugin/issues/detail?id=17#c14)提出了正则表达式，普通字段名称也不起作用。

如果我删除根定义，我可以得到 JSON ok，但需要额外的 JSON 遍历，这是不希望的。

那么，有没有办法解决这个问题呢？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T21:30:07.980

```
<param name="includeProperties">
 \[\d+\]\.movieId,
 \[\d+\]\.filmName
</param> 
```

应该做的伎俩。

将 org.apache.struts2.json 的日志级别提高到 DEBUG 有助于我澄清这一点。

# blackberry - 为 Blackberry SDK 9900 Simulator 启用 Internet 访问

> ID：12909907
> 
> 赞同：0
> 
> 时间：2012-10-16T07:51:07.197
> 
> 标签：blackberry, blackberry-simulator, blackberry-jde

我是为 BB 开发的新手，我有一个需要连接到互联网的应用程序。但是，我不确定如何启用此功能。我用谷歌搜索了一下，似乎有各种建议/解决方案，但似乎没有一个有效。任何人都可以提供其他建议或指示吗？

# google-chrome-extension - 当用户选择了一些文本并按 Ctrl+C 或单击复制时如何触发回调？

> ID：12909908
> 
> 赞同：1
> 
> 时间：2012-10-16T07:51:07.277
> 
> 标签：google-chrome-extension

假设用户在页面上选择了一些随机文本并点击`Ctrl+C`（或`Cmd+C`在 Mac 上）甚至点击编辑菜单中的“复制”。

如何在带有关联回调的 Chrome 扩展程序中收听此事件？

我无法从[Google Chrome 扩展](https://developer.chrome.com/extensions/)文档中弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:28:30.953

这更像是一个 Javascript/DOM 问题，而不是 Chrome 扩展问题。

**为复制**事件添加事件监听器：

```
document.addEventListener('copy', function(e) { console.log(e); }); 
```

# java - 如何在 java 中创建一个文本字段或组合框或任何可以像智能感知一样工作的组件？

> ID：12909909
> 
> 赞同：0
> 
> 时间：2012-10-16T07:51:08.367
> 
> 标签：java, swing, autocomplete

> **可能重复：**
> [是否可以使用 jtextfield 和 Jlist 进行自动完成？](https://stackoverflow.com/questions/7255636/is-it-possible-to-have-an-autocomplete-using-jtextfield-and-a-jlist)

它可以是 jtextfield 或组合框或插件或任何组件（或像用户可以从数据库中选择建议的下拉组件）。我将制作一个类似于 google 的搜索栏，从我的数据库中获取值。谢谢 :D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:40:07.830

我会推荐 Glazed Lists AutoCompleteSupport。您可以在此处找到截屏视频和示例代码：[Glazed Lists Developer](http://publicobject.com/glazedlistsdeveloper/)

您可以从这里下载 jar：[Glazed Lists](http://publicobject.com/glazedlists/glazedlists-1.8.0/)

# iphone - iPhone：maximumElapsedTimeForCachedLocation 用于移除核心位置的缓存值

> ID：12909910
> 
> 赞同：1
> 
> 时间：2012-10-16T07:51:09.473
> 
> 标签：iphone, objective-c, xcode, core-location, cllocationmanager

在某些情况下，启动定位服务时会立即返回缓存值。任何时间间隔早于此值的位置都将被视为无效。

```
@property (nonatomic, assign) NSTimeInterval maximumElapsedTimeForCachedLocation 
```

宣布于

```
UABaseLocationProvider.h 
```

你们有谁知道如何在核心位置使用这个 maximumElapsedTimeForCachedLocation 来删除旧位置的缓存值？

# makefile - 理解在生成文件中分配给宏的数据

> ID：12909911
> 
> 赞同：2
> 
> 时间：2012-10-16T07:51:09.910
> 
> 标签：makefile, autotools, autoconf, automake

我已经搜索了这个论坛，但无法找到这个问题的答案，如果我错过了，请原谅我并指导我。

我正在尝试了解 makefile，并`tcpreplay`在 Linux 上遇到了该实用程序的 makefile。有很多宏定义了以 a 结尾的值`@`。这些值是什么，它们是如何使用的？一个片段：

```
 ACLOCAL = @ACLOCAL@
    AMTAR = @AMTAR@
    AR = @AR@
    AUTOCONF = @AUTOCONF@
    AUTOGEN = @AUTOGEN@
    AUTOHEADER = @AUTOHEADER@ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T07:54:47.923

`configure`这是一个 makefile 模板，可能用于使用 GNU脚本构建的软件。`configure`运行时，占位`@NAME@`符将替换为运行时确定的适当值。例如`@AR@`，将是存档器的名称（或路径）`/usr/bin/ar`，. 然后`Makefile`，您有一个可以通过`make`调用运行的属性。如果实际`Makefile`仍然包含`@NAME@`占位符，则运行时出错`configure`。

您很可能不会查看名为的文件`Makefile`，而是查看名为`Makefile.in`. `.in`表示这是输入到的后缀`configure`。

[您可以在GNU autoconf 手册](http://www.gnu.org/software/autoconf/)中找到所有血淋淋的细节。

# c++ - 如何对在构造函数的参数中分配的对象调用 delete

> ID：12909912
> 
> 赞同：0
> 
> 时间：2012-10-16T07:51:17.600
> 
> 标签：c++, memory-leaks

我有两个类，一个继承自`ostream`，另一个继承自`streambuf`，这就是我使用它们的方式

```
int main () {
   stampstream ss(8,10);
} 
```

**戳流**

```
stampstream::stampstream(int r, int c) : ostream(new stampbuf(r,c))
{
   std::cout << "I am in stampstream" << std::endl;
} 
```

我只是调用父（ostream）类ctor并在参数中创建stampbuf类的对象。

**印花税**

```
stampbuf::stampbuf(int r, int c)
: _row(0), _column(0), BUFFER_SIZE(10), _buffer(new char[BUFFER_SIZE]) 
{ //some code } 
```

所以当我在我的项目上运行 Valgrind 时，它说我有 106 字节的内存泄漏。其中96个来自`new stampbuf(r,c)`，10个来自`_buffer(new char[BUFFER_SIZE])`

我有用于释放内存的 stampbuf 的析构函数`delete`。`_buffer`然而，析构函数永远不会被调用。如何摆脱这种内存泄漏并为stampbuf调用析构函数？

**编辑**

```
class stampstream : public ostream {

public:
stampstream(int r, int c);
virtual ~stampstream();
};

class stampbuf : public streambuf {

 public:
stampbuf(int r, int c);
~stampbuf();
virtual int overflow(int ch);
    }; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T07:54:11.777

你需要打电话

```
delete ostream; 
```

在和的析构函数`stampstream`中

```
delete[] _buffer; 
```

在`stampbuf`.

**你最好使用`std::unique_ptr`for `ostream`， a `std::vector`for`_buffer`**，而且你不需要担心内存管理。另外，`ostream`是一个名字`std`，我建议你在为时已晚之前重命名你的变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T08:12:37.493

您可以按如下方式删除它：

```
stampstream::~stampstream()
{
    delete rdbuf();
} 
```

然而，这并不安全。由于用户`stampstream`可以（并且有权）更改`rdbuf`，它可能会导致未定义的行为。

惯用的方法是拥有派生类的相应`streambuf`成员`ostream`，从而避免任何动态内存分配。

```
class stampstream : public ostream {
public:
    // ...
private:
    stampbuf sb;
};

stampstream::stampstream(int r, int c) : ostream(&sb)
{
    // ...
}

// nothing to delete in the destructor... 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T08:31:21.860

问题是 ostream 没有在其析构函数中清理流缓冲区：

[http://www.cplusplus.com/reference/iostream/ostream/~ostream/](http://www.cplusplus.com/reference/iostream/ostream/~ostream/)

> [...] 请注意，它不会破坏或对关联的 streambuf 对象执行任何操作。

所以你必须在其他地方清理streambuf。最简单的方法是让你的 stampbuf 对象成为 stampstream 的成员变量——然后当你的 stampstream 被破坏时，它的析构函数会被自动调用。

基类 ostream 的构造函数在构造成员变量之前被调用，因此如果您将 stampbuf 对象作为参数传递给 ostream 构造函数，ostream 的构造函数最终会查看未构造的 stampbuf 对象。因此，不要将流缓冲区传递给构造函数，而是在构造函数中设置它，在使用 rdbuf 构造 stampbuf 之后：

[http://www.cplusplus.com/reference/iostream/ios/rdbuf/](http://www.cplusplus.com/reference/iostream/ios/rdbuf/)

这提出了您的 stampbuf 在基类之前被破坏的问题，因此 ostream 的析构函数将查看解构的 stampbuf。这通常是不可接受的，但是因为上面的 ~ostream 页面保证 ~ostream 不对流缓冲区做任何事情，所以在这种情况下很好。

# javascript - 在nodejs中将redis INFO命令响应字符串转换为JSON对象

> ID：12909913
> 
> 赞同：1
> 
> 时间：2012-10-16T07:51:21.983
> 
> 标签：javascript, node.js, redis

redis INFO 逗号返回字符串，如`redis_version:2.2.14\r\nredis_git_sha1:00000000\r\nredis_git_dirty:0\r\narch_bits:32`

如何转换字符串以获取类似的 JSON 对象

```
 { 
     "redis_version":"x",
     "key2":"value"
 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T07:59:58.350

我不知道你为什么要这样做，但这里有一个简单的例子：

```
function parseInfo( info ) {
    var lines = info.split( "\r\n" );
    var obj = { };
    for ( var i = 0, l = info.length; i < l; i++ ) {
        var line = lines[ i ];
        if ( line && line.split ) {
            line = line.split( ":" );
            if ( line.length > 1 ) {
                var key = line.shift( );
                obj[ key ] = line.join( ":" );
            }
        }
    }
    return obj;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-05T09:49:38.953

您可以使用[node-redis-info](https://github.com/FGRibreau/node-redis-info)：

```
npm install redis-info 
```

用法：

```
> var parser = require('redis-info');
undefined
> var info = parser.parse(redis_info_str);
undefined
> info.fields.redis_version
2.6.1
> info.startWith('pubsub')
[ [ 'pubsub_channels', '2' ],
  [ 'pubsub_patterns', '0' ] ]
> info.contains('memory')
[ [ 'used_memory', '15080416' ],
  [ 'used_memory_human', '14.38M' ],
  [ 'used_memory_rss', '21258240' ],
  [ 'used_memory_peak', '18985904' ],
  [ 'used_memory_peak_human', '18.11M' ] ] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-02T11:58:46.940

简单的：

```
#!/usr/bin/env python
import redis
import json
print(json.dumps(redis.Redis().info())) 
```

对于**zabbix** Template DB Redis：

```
#!/usr/bin/env python
import redis
import json
import sys
r = redis.Redis.from_url(sys.argv[1])
a = {}
sections = ["CPU","Clients","Cluster","Keyspace","Memory","Modules","Persistence","Replication","Server","Stats"]
for section in sections:
    a[section]=r.info(section)
print(json.dumps(a)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-10T04:06:27.217

```
interface RedisInfo {
  [key: string]: any;
}

/**
 * This was taken from how `.serverInfo` was parsed in the ioredis library
 * https://github.com/luin/ioredis/blob/f275bc24de3825f80415a69ff227a45251dd1a3b/lib/redis/index.ts#L500
 * @param infoString Result of Redis INFO command
 */
const parseRedisInfo = (infoString: string): RedisInfo => {
  const info: RedisInfo = {};

  const lines = infoString.split('\r\n');
  for (let i = 0; i < lines.length; ++i) {
    const parts = lines[i].split(':');
    if (parts[1]) {
      info[parts[0]] = parts[1];
    }
  }
  return info;
}; 
```

[资源](https://github.com/luin/ioredis/blob/f275bc24de3825f80415a69ff227a45251dd1a3b/lib/redis/index.ts#L500)

# javascript - TypeError: 'undefined' 不是函数（评估 '$( "#wnd_Addparam" ).dialog'）

> ID：12909916
> 
> 赞同：6
> 
> 时间：2012-10-16T07:51:33.360
> 
> 标签：javascript, jquery, jquery-ui, dialog

我有两个月的这个例子，我换了电脑。现在这似乎不再起作用了。这是一个应该通过（之前）按下按钮来加载小窗口对话框的示例。但是，它不起作用......这是我的代码：

```
<html>
<head>
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
  <script type="text/javascript">
// <---- VENTAÑAS DE PARAMETERES---->

var regex,v,l,c,b;
$( "#wnd_Addparam" ).dialog({
            autoOpen: false,
            height: 'auto',
            width: 350,
            modal: true,
            resizable:false,
            buttons: {
                "Add": function() {
                                $( this ).dialog( "close" ); 
                                   },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            },
            close: function() {
                $( this ).dialog( "close" );
            }
        });

        $( "#btn_Addpar" ).click(function() {
                $( "#wnd_Addparam" ).dialog( "open" );
            });
$( "#wnd_Paramedit" ).dialog({
            autoOpen: false,
            height: 'auto',
            width: 350,
            modal: true,
            resizable:false,
            buttons: {
                "Accept": function() {
                      $( this ).dialog( "close" );  

                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            },
            close: function() {
                $( this ).dialog( "close" );
            }
        });

        $( "#btn_Pedit" ).click(function() {
                $( "#wnd_Paramedit" ).dialog( "open" );
            });
$( "#wnd_Borpara" ).dialog({
            autoOpen: false,
            height: 'auto',
            width: 300,
            resizable:false,
            modal: true,
            buttons: {
                "Accept": function() {
                    $(this).dialog("close");

                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            },
            close: function() {
                $( this ).dialog( "close" );
            }
        });

        $( "#btn_Deletepara" ).click(function() {
                $( "#wnd_Borpara" ).dialog( "open" );
            });

</script></head>
<!--<form method="POST" id="iformp" name="nformp">-->
<body>
<h3>List of parameters</h3>
<div id="sortparam" >
</div>
 <input type="button" id="btn_Addpar" value="Add"/>
<input type="button" id="btn_Deletepara" value="Delete"/>
<input type="button" id="btn_Pedit" value="Edit"/>
<!--<form>-->

</body>

</html> 
```

请..为什么我的对话框有错误？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T08:10:28.263

您引用的是 jQuery 核心，而不是 jQuery UI 本身。

我相信该`dialog`功能仅存在于 jQuery UI 中，因此您还需要将以下内容添加到您的页面中：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>

<script type="text/javascript">
// <---- VENTAÑAS DE PARAMETERES---->
$(document).ready( function () {
    var regex,v,l,c,b;
    $( "#wnd_Addparam" ).dialog({
        // Your code...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-27T07:34:46.617

我有同样的问题。我在同一个网页上包含了 jQuery 两次（jQuery 然后是 jQuery UI 然后是 jQuery，这给我带来了麻烦（在 .dialog 上完全相同的问题）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T08:49:11.760

```
Now use this code simple....

<html>
    <head>
     <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
    <script type="text/javascript">
    // <---- VENTAÑAS DE PARAMETERES---->
    $(document).ready(function() { 
    var regex,v,l,c,b;
    $( "#wnd_Addparam" ).dialog({
                autoOpen: false,
                height: 'auto',
                width: 350,
                modal: true,
                resizable:false,
                buttons: {
                    "Add": function() {
                                   $( this ).dialog( "close" ); 
                                       },
                    Cancel: function() {
                        $( this ).dialog( "close" );
                    }
                },
                close: function() {
                    $( this ).dialog( "close" );
                }
            });

            $( "#btn_Addpar" ).click(function() {
                    $( "#wnd_Addparam" ).dialog( "open" );
                });

    });
    </script>
    </head>
    <!--<form method="POST" id="iformp" name="nformp">-->
    <body>
    <h3>List of parameters</h3>
    <div id="sortparam" >
    </div>
     <input type="button" id="btn_Addpar" value="Add"/>

    <!--<form>-->

    </body>

    </html> 
```

# android - 在android的操作栏中隐藏图标

> ID：12909921
> 
> 赞同：0
> 
> 时间：2012-10-16T07:51:48.550
> 
> 标签：android, android-layout

我有一个以编程方式创建的操作栏：

```
public class ActionBarPdfView extends Activity{
    public ImageView action_bar_home_icon, action_bar_back_icon, action_bar_star, action_bar_search;
    public RelativeLayout relative;
    public ActionBar action;
    public RelativeLayout.LayoutParams params;
    private DatabaseManager dbManager;

    public static int VIEW_ID = 3;
    public int getViewId(){
        return VIEW_ID;
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        action_bar_home_icon = new ImageView(getApplicationContext());
        params = new RelativeLayout.LayoutParams(android.widget.RelativeLayout.LayoutParams.WRAP_CONTENT,android.widget.RelativeLayout.LayoutParams.WRAP_CONTENT);
        params.setMargins(20, 0, 20, 0);
        action_bar_home_icon.setLayoutParams(params);
        action_bar_home_icon.setId(1);

        action_bar_star = new ImageView(getApplicationContext());
        params = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
        params.addRule(RelativeLayout.RIGHT_OF, action_bar_home_icon.getId());
        params.setMargins(0, 0, 20, 0);
        action_bar_star.setLayoutParams(params);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {     

        action = getActionBar();
        relative = new RelativeLayout(getApplicationContext());
        action_bar_back_icon = new ImageView(getApplicationContext());
        action_bar_search = new ImageView(getApplicationContext());

        dbManager = new DatabaseManager(getApplicationContext());
        dbManager.waitForTurn();
        ObjectsDBAdapter objects = dbManager.getObjectsDbAdapter();
        objects.setupImageView(R.drawable.home_android, action_bar_home_icon);
//      action_bar_home_icon.setImageResource(R.drawable.home_android);

//      params = new RelativeLayout.LayoutParams(android.widget.RelativeLayout.LayoutParams.WRAP_CONTENT,android.widget.RelativeLayout.LayoutParams.WRAP_CONTENT);
//      params.addRule(RelativeLayout.RIGHT_OF, action_bar_home_icon.getId());
//      params.setMargins(0, 0, 20, 0);
//      action_bar_back_icon.setImageResource(R.drawable.back_android);
//      action_bar_back_icon.setLayoutParams(params);
//      action_bar_back_icon.setId(2);

        objects.setupImageView(R.drawable.sternbutton_android, action_bar_star);

        params = new RelativeLayout.LayoutParams(android.widget.RelativeLayout.LayoutParams.WRAP_CONTENT,android.widget.RelativeLayout.LayoutParams.WRAP_CONTENT);
        params.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
        params.setMargins(0, 0, 20, 0);
        objects.setupImageView(R.drawable.searchtext_android, action_bar_search);
        action_bar_search.setLayoutParams(params);
        action_bar_search.setId(3);

        action.setDisplayShowCustomEnabled(true);
        action.setDisplayShowHomeEnabled(false);
        action.setDisplayShowTitleEnabled(false);

        relative.addView(action_bar_home_icon);
        relative.addView(action_bar_back_icon);
        relative.addView(action_bar_star);
        relative.addView(action_bar_search);
        relative.setGravity(Gravity.CENTER);
        action.setCustomView(relative);

        dbManager.closeObjectsDbAdapter();

        return true;
    }

} 
```

我在左侧有一些图标，在右侧有一些图标。我想要的是，当右侧有更多图标并且它们覆盖左侧的一些图标时，将这些图标隐藏在菜单中。

我知道在 xml 中我可以使用 android:showAsAction 来做到这一点。我想知道如何以编程方式做到这一点？有任何想法吗？

# android - http连接android.os.NetworkOnMainThreadException ..是什么原因

> ID：12909923
> 
> 赞同：-2
> 
> 时间：2012-10-16T07:51:53.250
> 
> 标签：android, json, getjson

当运行代码在控制台中给出这个错误。我使用 Web 服务从服务器的 json api 获取数据。

什么原因？

```
10-16 13:17:33.389: E/log_tag(651): Error in http connection android.os.NetworkOnMainThreadException
10-16 13:17:33.389: E/log_tag(651): Error converting result java.lang.NullPointerException
10-16 13:17:33.399: E/log_tag(651): Error parsing data org.json.JSONException: End of input at character 0 of 
```

运行此类时发生错误

```
public static String convertStreamToString(InputStream is) {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();
        String line = null;
        try {
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return sb.toString();
    }

    public static JSONObject getJSONfromURL(String url) {

        // initialize
        InputStream is = null;
        String result = "";
        String error_text="";
        JSONObject j = null;

        // http post
        try {

            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url);
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            HttpParams myParams = null;
            HttpConnectionParams.setConnectionTimeout(myParams, 10000);
            HttpConnectionParams.setSoTimeout(myParams, 10000);

            is = entity.getContent();

        } catch (Exception e) {
            Log.e("log_tag", "Error in http connection " + e.toString());
        }

        // convert response to string
        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();
            //System.out.println("Result = " + result);

        } catch (Exception e) {
            Log.e("log_tag", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            //jArray = new JSONObject(result);
            response_status = j.getString("response_status").toString().trim();

            if (response_status.equals("0")) {
                String getcustomer_id = j.getString("customer_id").toString().trim();
                String getPassword = j.getString("password").toString()
                        .trim();
                passData(getcustomer_id, getPassword);
            } else {
                String getcustomer_id = j.getString("response_status").toString()
                        .trim();
                String getPassword = j.getString("error_text").toString()
                        .trim();
                passData(getcustomer_id, getPassword);
            }

        } catch (JSONException e) {
            Log.e("log_tag", "Error parsing data " + e.toString());
        }

        return j;
    }

    private static void passData(String getcustomer_id, String getPassword) {
        id = getcustomer_id;
        password = getPassword;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T08:44:34.507

当应用程序尝试在其主线程上执行网络操作时，将引发此异常。在 AsyncTask 中运行您的代码：

```
class GetJSONFromUrl extends AsyncTask<String, Void, RSSFeed> {

    InputStream is = null;
    String result = "";
    String error_text="";
    JSONObject j = null;

    protected void doInBackground(String... urls) {

    // http post
    try {

        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(urls[0]);
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        HttpParams myParams = null;
        HttpConnectionParams.setConnectionTimeout(myParams, 10000);
        HttpConnectionParams.setSoTimeout(myParams, 10000);

        is = entity.getContent();

    } catch (Exception e) {
        Log.e("log_tag", "Error in http connection " + e.toString());
    }
    }

    protected void onPostExecute(String result) {
        try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();
        //System.out.println("Result = " + result);

    } catch (Exception e) {
        Log.e("log_tag", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        //jArray = new JSONObject(result);
        response_status = j.getString("response_status").toString().trim();

        if (response_status.equals("0")) {
            String getcustomer_id = j.getString("customer_id").toString().trim();
            String getPassword = j.getString("password").toString()
                    .trim();
            passData(getcustomer_id, getPassword);
        } else {
            String getcustomer_id = j.getString("response_status").toString()
                    .trim();
            String getPassword = j.getString("error_text").toString()
                    .trim();
            passData(getcustomer_id, getPassword);
        }

    } catch (JSONException e) {
        Log.e("log_tag", "Error parsing data " + e.toString());
    }
        super.onPostExecute(result)
    }
} 
```

您可以使用 . 从代码中的任何位置调用它`new GetJSONFromUrl().execute(url);`。

网络任务需要在`DoInBackground`线程中完成，因为在 HoneyComb 以上的版本中，您无法在`UIThread`. 在这里，`onPostExecute()`方法在后台线程完成执行后被调用。您可以`UIThread`从`onPostExecute()`. 因此，只需在后台线程中编写您的网络代码，然后您就可以在`onPostExecute()`.

希望这可以帮助。谢谢。

# java - ActiveMQ 查询：如何开始

> ID：12909925
> 
> 赞同：1
> 
> 时间：2012-10-16T07:52:03.827
> 
> 标签：java, jakarta-ee, activemq

我正在通过这样的 Java 代码启动 ActiveMQ 进程：

```
ProcessBuilder pb = new ProcessBuilder(activeMQHome + "run_activemq.sh",
                                       logDirectory,
                                       activeMQHome,
                                       brokerPath);
pb.start(); 
```

*   `logDirectory`: 日志位置
*   `activeMQHome`：`/Common/thirdParty/apache-activemq-5.3.0/bin/`
*   `brokerPath`: brokerPath 位置

现在我必须通过命令行启动这个过程。或者更具体地说，我必须启动它，`/etc/inittab`以便它可以自动启动。

我应该输入什么条目？我可以开始，`./run_activemq.sh`但我将如何给予`logDirectory`和`brokerPath`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:05:27.240

实际上需要通过Java代码启动AMQ进程。ActiveMQ 已经在其目录中附带了启动/停止脚本`$ACTIVEMQ_HOME/bin`，您可以很好地将其放入`/etc/inittab`系统启动时启动。日志目录和其他设置在`$ACTIVEMQ_HOME/conf/activemq.xml`文件中配置。

# objective-c - PhoneGap AppDelegate MainViewController

> ID：12909940
> 
> 赞同：0
> 
> 时间：2012-10-16T07:53:32.360
> 
> 标签：objective-c, ios, inheritance, cordova

我设置了一个 PhoneGap 应用程序并挖掘了一些代码。在 AppDelegate 下有以下对象：

```
@property (nonatomic, strong) IBOutlet CDVViewController* viewController; 
```

然而，再往下是这条线：

```
self.viewController = [[MainViewController alloc] init]; 
```

那条线实际上做了什么，因为 viewController 是一个 CDVViewController 对象，但是现在它似乎在说，或者至少将它转换为 MainViewController 对象。

MainViewController 也继承了 CDVViewController 所以它不应该像 MainViewController 一样开始有什么意义：

```
 @property (nonatomic, strong) IBOutlet MainViewController* viewController; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:07:32.920

它不是 `@property (nonatomic, strong) IBOutlet MainViewController* viewController`这样开始的，当 self.viewController 响应消息的选择器时，self.viewController 可以是类 CDVViewController 或 MainViewController，这取决于在运行时响应选择器的哪个类。

这称为多态性。你可以看看[这个](https://stackoverflow.com/questions/409969/polymorphism-define-in-just-two-sentences)或[这个](http://www.cocoawithlove.com/2008/03/polymorphism-is-always-wrong-word.html)。

# c++ - TCP 端口访问和 C++

> ID：12909941
> 
> 赞同：6
> 
> 时间：2012-10-16T07:53:44.197
> 
> 标签：c++, sockets, networking, tcp, port

如果一个程序在 Linux 机器上运行，该程序有没有办法扫描允许通过防火墙的端口？例如，如果程序员想要创建一个聊天系统，但程序需要知道哪些端口没有被用户的防火墙拒绝访问传入连接，有没有办法在你的代码中检查这一点？即使防火墙阻止了同一端口的传入连接，程序也可能无法将套接字绑定到端口。有没有办法检查开放的防火墙端口？

旁注：这纯粹是出于教育目的，没有恶意，要明确我正在编写一个聊天系统，并且在测试期间，我无法连接桌面 - >笔记本电脑，直到我通过允许它通过我的防火墙手动打开一个端口。这对我来说似乎有点不对劲，不像程序员的代码应该要求用户做的事情。更不用说我不想让少数使用此代码的人处于危险之中（如果让端口永久打开的话）。所以看起来我更适合找到一种方法来利用已经对传入 TCP 连接开放的端口。

旁注：所有客户端都在运行 Fedora

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T20:07:46.313

您偶然发现了当今管理新 Internet 应用程序创建的第二大问题。第一个最大的当然是 N​​AT，这是一个密切相关的问题（希望最终会因为 IPv6 而消失）。

没有简单的答案。一个好的答案是[UPnP](http://en.wikipedia.org/wiki/Universal_Plug_and_Play)，但这不是一个简单的答案，而且绝不是通用的。我的网络不运行它。

另一个答案是以某种方式通过https（或http，如果必须的话）来隧道化你所做的一切。但对于像聊天应用程序这样的东西来说，这是一个巨大的痛苦。

# c++ - 用于 Windows 的 C++ 互斥锁

> ID：12909944
> 
> 赞同：3
> 
> 时间：2012-10-16T07:53:51.377
> 
> 标签：c++, boost, synchronization, mutex, interprocess

我正在为 Windows 开发一个 C++ 项目，需要一个好的互斥锁实现来同步黑白进程（即 winapi 的包装）。我目前正在使用 boost::interprocess::named_mutex，但是我注意到如果其中一个进程崩溃 - 互斥锁将永远保持锁定状态（即使在重新启动后！）。谷歌搜索这件事证实了这实际上是行为。

坦率地说，我看不出这种行为在任何项目中是如何被接受的。错误存在，进程崩溃 - 这只是意味着一个小错误可能导致系统永远无法再次工作......不可接受！

所以我的问题是：

1.  任何人都可以推荐具有“正常”行为的不同实现（即互斥锁在崩溃时被放弃，并且在系统重新启动后将“重置”以正常工作）？跨平台显然更好，但绝对不是必须的。

2.  出于好奇- boost 怎么可能让这种行为发生？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T08:04:05.130

[boost::interprocess](http://www.boost.org/doc/libs/1_51_0/doc/html/interprocess/some_basic_explanations.html#interprocess.some_basic_explanations.persistence)的文档解释了不同类的持久性。在 named_mutex 的情况下，它被列为内核或文件系统。由此我们可以假设 Windows 实现是使用文件系统，这就是它在您重新启动系统后仍然存在的原因。

根据您的情况，您可以为每个进程将自己的文件写入磁盘，然后在进程安全关闭时将其删除。如果 fie 存在，则当进程重新启动时，一定是不干净的关闭，您可以使用[boost::interprocess::named_mutex::remove](http://www.boost.org/doc/libs/1_51_0/doc/html/boost/interprocess/named_mutex.html)静态函数来删除互斥锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:12:27.047

看看 StlSoft 的[process_mutex](http://www.stlsoft.org/doc-1.9/classplatformstl_1_1process__mutex.html)。跨平台（使用platformstl 组件，而不是操作系统特定的winstl 或unixstl 版本）和头文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-03T13:03:29.380

我为此推出了自己的互斥锁，因为我不想仅仅为了这个功能而向某个重量级库添加依赖项。它用于生产代码并包含在我们的单元测试中 - 如果您发现任何问题，请告诉我。

这是一个仅限 Windows 的解决方案。

使用示例：

```
NamedSystemMutex m{ L"MyMutex" };
std::lock_guard<NamedSystemMutex> lock{ m }; 
```

头文件名为SystemMutex.h：

```
#pragma once

#include <string>
#include <windows.h> // Just needed for HANDLE

// Provides a system-wide, recursive, named lock. 
// This class satisfies requirements of C++11 concept "Lockable",  i.e. can be (and should be) used with unique_lock etc.
class NamedSystemMutex
{
public:
    explicit NamedSystemMutex(const std::wstring& name);
    ~NamedSystemMutex();

    // Moveable, not copyable
    NamedSystemMutex(const NamedSystemMutex& other) = delete;
    NamedSystemMutex(NamedSystemMutex&& other) = default;
    NamedSystemMutex& operator=(const NamedSystemMutex& other) = delete;
    NamedSystemMutex& operator=(NamedSystemMutex&& other) = default;

    void lock();
    void unlock();
    bool try_lock();

private:
    HANDLE handle_{};
}; 
```

执行：

```
#include "NamedSystemMutex.h"
#include <stdexcept>

NamedSystemMutex::NamedSystemMutex(const std::wstring& name) {
    handle_ = CreateMutexW(nullptr, FALSE, name.c_str());
    if (handle_ == NULL) {
        throw std::runtime_error("Creation of mutex failed");
    }
}

NamedSystemMutex::~NamedSystemMutex() {
    const BOOL result = CloseHandle(handle_);
    if (result == FALSE) {
        // Error: Failed to close mutex handle (Error ignored since we are in destructor)
    }
}

void NamedSystemMutex::lock() {
    const auto result = WaitForSingleObject(handle_, INFINITE);
    if (result == WAIT_ABANDONED) {
        // Warning: Lock obtained, but on an abandoned mutex (was not correctly released before, e.g. due to a crash)
    }
    else if (result != WAIT_OBJECT_0) {
        throw std::runtime_error("Failed to acquire lock");
    }
}

void NamedSystemMutex::unlock() {
    const BOOL result = ReleaseMutex(handle_);
    if (result == FALSE) {
        throw std::runtime_error("Failed to release lock: calling thread does not own the mutex");
    }
}

bool NamedSystemMutex::try_lock() {
    const auto result = WaitForSingleObject(handle_, 0);
    if (result == WAIT_TIMEOUT) {
        return false;
    }
    if (result == WAIT_OBJECT_0) {
        return true;
    }
    throw std::runtime_error("Failed to acquire lock");
} 
```

# css - CSS Div 内容未扩展

> ID：12909948
> 
> 赞同：-1
> 
> 时间：2012-10-16T07:54:06.727
> 
> 标签：css

我有一个名为#main 的主 div id，然后是一个列表 ul li ...

这是CSS：

```
#main {
  display:block;
}

#main ul {
list-style: none outside none;
margin: 0 0 20px;
padding: 0;
} 
```

ETC...

问题是，当内容增长时，我会遇到附图中显示的问题：

![在此处输入图像描述](../Images/4e2a8e9e4598ac42540a370173b917e4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:55:54.303

添加`overflow: auto;`您的`main`

```
#main {
  display:block;
  overflow: auto;
} 
```

# c# - 将数据插入多个表MVC3

> ID：12909956
> 
> 赞同：-1
> 
> 时间：2012-10-16T07:54:47.833
> 
> 标签：c#, asp.net-mvc-3

我是 MVC+EF 的新手

我需要一次将数据插入 3 个表，但无法弄清楚我该怎么做我的数据模型是

```
public class UserLogin
    {
        [Key]public int UserID { get; set; }
        public string LoginName { get; set; }
        public byte Password { get; set; }
    }
    public class UserDetails
    {
        [Key]
        public int DetailID { get; set; }
        [ForeignKey("UserLogin")]
        public int UserID { get; set; }
        public string UserName { get; set; }
        public string Address { get; set; }
    }
    public class UserType
    {
        [Key]
        public int TypeID { get; set; }
        [ForeignKey("UserLogin")]
        public int UserID { get; set; }
        public string TypeName { get; set; }
        public string TypeDiscription { get; set; }
    }
    public class UserBDCon : DbContext
    {
        public DbSet<UserLogin> logins { get; set; }
        public DbSet<UserDetails> Detail { get; set; }
        public DbSet<UserType> Type { get; set; }
    } 
```

谁能告诉我这个模型的控制器和视图文件如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:03:24.930

您应该在模型类中创建其他属性：

数据模型应该是这样的：

```
public class UserLogin
{
    [Key]
    public int UserID { get; set; }
    public string LoginName { get; set; }
    public byte Password { get; set; }
}
public class UserDetails
{
    [Key]
    public int DetailID { get; set; }

    [ForeignKey("UserLogin")]
    public int UserID { get; set; }

    public string UserName { get; set; }
    public string Address { get; set; }

    //additional
    public UserLogin UserLogin { get; set; }
}
public class UserType
{
    [Key]
    public int TypeID { get; set; }
    [ForeignKey("UserLogin")]
    public int UserID { get; set; }
    public string TypeName { get; set; }
    public string TypeDiscription { get; set; }

    //additional
    public UserLogin UserLogin { get; set; }
} 
```

示例（没有工作单元和存储库，但只有单一上下文）：

```
 UserBDCon db = new UserBDCon();

    var userLogin = new UserLogin() {LoginName = "Admin", Password = new byte()};
    var details = new UserDetails() {Address = "Address", UserName = "Admin", UserLogin = userLogin};
    var type = new UserType() {TypeDiscription = "Description", TypeName = "TypeName", UserLogin = userLogin};

    db.logins.Add(userLogin);
    db.Detail.Add(details);
    db.Type.Add(type);

    db.SaveChanges(); // EF insert data into 3 table at a time 
```

您应该使用相同的数据库上下文。在这种情况下，查询将成为同一事务的一部分。会更好地实现存储库模式和目标单一事务的工作单元，例如[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and- asp-net-mvc 应用程序中的工作模式单元](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:59:50.610

我必须创建一个包含所有这些类的新类，如下所示：

```
public class ViewModel()
{
   public IList<UserLogin> LoginModel {get; set;}
   public IList<UserDetails> DetailsModel {get; set;}
   public IList<UserType> TypeModel {get; set;}
} 
```

并且您必须返回此模型 return View(ViewModel) 并创建强倾斜视图，而不是像这样绑定表：

```
foreach(var item in ViewModel.LoginModel)
{

} 
```

# jquery - 滚动到最近的容器

> ID：12909957
> 
> 赞同：1
> 
> 时间：2012-10-16T07:54:51.533
> 
> 标签：jquery, scroll

我正在构建的网站有点问题。
我想要一个效果，如果你在 2 个 div 之间，它会在鼠标静止大约后自动滚动。2 秒。
这个效果的一个例子可以在这个[网站](http://www.tigihairreborn.com)上找到，它使用 ScrollTo.js 来创建效果。

我的网站使用相同的布局，每个 div 容器都是 1000px。我可以使用 scrollTo.js 单击链接以将我也带入一个容器，但我希望它检测它是否不在 div 的顶部并滚动到最近的一个。

任何能指引我正确方向的信息将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:49:19.827

以下是步骤：

1.  获取当前滚动位置的 Y 值（将其保存到名为的变量中`posY`）
2.  `ceil`通过or函数计算最接近的 1000 的值`floor`（取决于您要转到下一项或上一项）
3.  滚动到第 2 步中的值

你不清楚哪一部分？

# asp-classic - 通过 VBSCRIPT 发送电子邮件

> ID：12909959
> 
> 赞同：0
> 
> 时间：2012-10-16T07:54:55.323
> 
> 标签：asp-classic, vbscript

我必须在成功提交表格后向申请人发送一封简单的邮件。vb 中的代码是什么？我一直在尝试这个..

```
function email()
    Set mailObj=CreateObject("CDO.Message")
        mailObj.Subject="Hello"
        mailObj.From="abc@xyz.com"
        mailObj.To="123@456.com"
        mailObj.TextBody="text"
        mailObj.Send
    set mailObj=nothing
end function 
```

代码有问题吗？请纠正..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T08:22:33.117

使用类似下面的东西。

```
 Set objEmail = CreateObject("CDO.Message") 
 objEmail.From = "fromsomeone@company.com"
 objEmail.To = "someone@company.com"

 objEmail.Configuration.Fields.Item _
 ("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2
 objEmail.Configuration.Fields.Item _
 ("http://schemas.microsoft.com/cdo/configuration/smtpserver") = _
     "your.smtpserver.here"
 objEmail.Configuration.Fields.Item _
 ("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25
 objEmail.Configuration.Fields.Update

 objEmail.TextBody = "The body of the email"
 objEmail.Subject = "The subject"

 objEmail.Send 
```

# powershell - 在PowerShell中将Arraylist转换为字符串

> ID：12909960
> 
> 赞同：2
> 
> 时间：2012-10-16T07:54:57.337
> 
> 标签：powershell

我正在尝试从变量中获取一些数据：

```
 Select-String -inputObject $patternstring  -Pattern $regex -AllMatches
 | % { $_.Matches } | % { $_.Value } -OutVariable outputValue
 Write-Host $outputValue 
```

对于同样的不变量，我正在尝试进行字符串操作

```
$outputValue.Substring(1,$outputValue.Length-2); 
```

这失败了，说明**outputValue**是一个`ArrayList`.

如何转换`Arraylist`为`String`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-07T06:18:08.203

正如 sean_m 的评论中提到的，最简单的方法是首先使用 -join 运算符将字符串的 System.Collections.ArrayList 转换为单个字符串：

```
$outputValue = $($outputValue -join [Environment]::NewLine) 
```

完成此操作后，您可以对 $outputValue 执行任何常规字符串操作，例如 Substring() 方法。

上面我用新行分隔 ArrayList 中的每个字符串，因为这通常是 -OutVariable 在将字符串转换为 ArrayList 时拆分字符串的字符串，但如果需要，您可以使用不同的分隔符/字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:03:08.710

试试这样：

```
$outputvalue = Select-String -inputObject $patternstring  -Pattern $regex -AllMatches | 
               % { $_.Matches } | % { $_.Value }

$outputValue | % { $_.Substring(1 ,$_.Length - 2)} 
```

`-outvariable`中的参数`ForEach-Object`似乎没有捕获处理的 sciptblock 的输出（这在 Powershell V2 中；感谢@ShayLevi 测试它在 V3 中的工作）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T08:58:50.697

如果输出是值的集合，那么无论结果的类型是什么，子字符串都应该失败。尝试通过管道传输`Foreach-Object`然后使用子字符串。

更新：

OutputVariable 仅适用于 v3，请参阅 v2 的 @Christian 解决方案。

```
Select-String -InputObject $patternstring  -Pattern $regex -AllMatches  | % { $_.Matches } | % { $_.Value } -OutVariable outputValue

$outputValue | Foreach-Object { $_.Substring(1,$_.Length-2) } 
```

# python - 使用VS2010在Panda3D中运行程序时出现彩虹框

> ID：12909963
> 
> 赞同：0
> 
> 时间：2012-10-16T07:55:21.737
> 
> 标签：python, panda3d

在开始尝试“掩蔽”（讲师提供的活动进行到一半）后，我一直遇到这个奇怪的错误。讲师建议我创建一个新的解决方案。但是，在制作了 3 个产生相同错误的解决方案之后。

[http://puu.sh/1foxu](http://puu.sh/1foxu) <- 错误图片

[http://pastebin.com/GPsLTjdm](http://pastebin.com/GPsLTjdm) <- Pastebin 代码（使用 pastebin 因为 Panda3D 东西是缩进敏感的）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:26:07.260

尝试移动您的盒子模型，然后再将其重新设置为其项目符号节点。

```
self.world.attachRigidBody(np.node())
model = loader.loadModel('models/box.egg')
model.setPos(-0.5,-0.5,-0.5)                   # <- Add this line
model.reparentTo(np) 
```

需要调整模型位置，因为子弹形状假定模型的中心是它的 (0,0,0) 坐标，但在大多数情况下，(0,0,0) 实际上是模型的边界。

**编辑：**

要解决您的纹理问题，请尝试：

```
model.setTexture(tex, 1) 
```

...代替...

```
model.setTexture(tex) 
```

手册中的一个片段：

> 通常，您只需将 1 作为第二个参数传递给 setTexture()。如果没有此覆盖，直接在 Geom 级别分配的纹理将优先于您在模型节点所做的状态更改，并且不会进行纹理更改。

# java - 哈希密码并与 MD5 比较

> ID：12909967
> 
> 赞同：0
> 
> 时间：2012-10-16T07:55:40.030
> 
> 标签：java, password-encryption, message-digest

我有以下要求。

```
1\. save a user password converted to hash(digested)
2\. when comparing with data base, add random bytes with the password given from user 
3\. now send the random bytes added password  to DAO class
4\. separate the random byte from password 
5\. compare with the stored hashed(digested) password 
```

我尝试了一些类似的东西，但它给出了数组越界异常。

```
package poc;

import com.sun.xml.internal.ws.message.ByteArrayAttachment;
import java.io.ByteArrayOutputStream;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.security.MessageDigest;
import java.security.SecureRandom;
import java.util.Arrays;

public class HashedPassword {
    public static final String CRYPTOGRAPHY_ALGORITHM = "MD5";
    public static final String CHAR_SET = "UTF8";
    public static void main(String[] arg){
        System.out.println(createPassword("r14@17*$"));
    }
    public static byte[] createPassword(String password){
        byte[] salt = new byte[12];
        byte[] digestedPassword =null;
        byte[] digestedPasswordPwd =null;
        try {
                SecureRandom random = new SecureRandom();
                random.nextBytes(salt);
                MessageDigest mdPassword = MessageDigest.getInstance(CRYPTOGRAPHY_ALGORITHM);
                MessageDigest mdPasswordPawd = MessageDigest.getInstance(CRYPTOGRAPHY_ALGORITHM);

                mdPassword.update(salt);
                mdPassword.update(password.getBytes(CHAR_SET));

                mdPasswordPawd.update(password.getBytes(CHAR_SET));
                digestedPassword = mdPassword.digest();
                digestedPasswordPwd = mdPasswordPawd.digest();
                byte[] resultBytes= new byte[1000];

                System.arraycopy(digestedPassword, 11, resultBytes,0,digestedPassword.length);

                if(Arrays.equals(resultBytes, digestedPasswordPwd)){
                    System.out.println("match");
                }else{
                    System.out.println("no-match");
                }

        } catch (Exception ex) {
            ex.printStackTrace();
        }
        System.out.println("digestedPassword : "+digestedPassword);
        System.out.println("digestedPasswordPwd : "+digestedPasswordPwd);
        return digestedPassword;
    }

} 
```

堆栈跟踪 ：

```
java.lang.ArrayIndexOutOfBoundsException
digestedPassword : [B@9980d5
digestedPasswordPwd : [B@1d95492
[B@9980d5
    at java.lang.System.arraycopy(Native Method)
    at poc.HashedPassword.createPassword(HashedPassword.java:43)
    at poc.HashedPassword.main(HashedPassword.java:23) 
```

所以请帮助我如何去做

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:13:14.703

这条线路有问题：

```
System.arraycopy(digestedPassword, 11, resultBytes,0,digestedPassword.length); 
```

它尝试从 11 位置开始复制`digestedPassword.length`字节`digestedPassword`。因此它尝试复制不存在的 11 个字节。

试试这个：

```
System.arraycopy(digestedPassword, 11, resultBytes,0,digestedPassword.length-11); 
```

从[API 文档复制 System.arraycopy](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)：

> 否则，如果以下任何一项为真，则抛出 IndexOutOfBoundsException 并且不修改目标：
> 
> srcPos 参数是否定的。
> destPos 参数是否定的。
> 长度参数是否定的。
> srcPos+length 大于 src.length，即源数组的长度。
> destPos+length 大于 dest.length，即目标数组的长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:32:03.580

首先，我认为从您的代码中，您缺少与从密码中删除/分离随机字节相关的位。所以它可能永远不会相等。

关于我建议的 ArrayIndexOutOfBoundsException，请使用

```
System.arraycopy(digestedPassword, 0, resultBytes,0,digestedPassword.length); 
```

# asp.net-mvc-3 - 带有 wcf 的 mvc 3.0 从视图传递输入并获取结果并绑定到 gridview

> ID：12909969
> 
> 赞同：-1
> 
> 时间：2012-10-16T07:55:48.833
> 
> 标签：asp.net-mvc-3, wcf

我对 MVC 3.0 完全陌生，我要求使用 WCF 创建一个 MVC 3.0 应用程序。我已经创建了 WCF 服务并创建了 MVC 应用程序。我对如何将服务链接到 MVC 应用程序视图的过程有点怀疑。我创建了一个名为 TMReportController 的控制器。我有一个视图 BenchEmployee。我需要从视图传递输入，即，我需要将下拉列表的值传递给服务获取它返回的数据集并将其绑定到视图 BenchEmployee 中存在的网格。不要我的观点是一个aspx页面。有人可以向我解释如何做到这一点吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:07:03.103

ASP.NET MVC 应用程序将成为 WCF 服务的客户端。所以第一步是导入服务定义。这将在客户端上创建代理对象。因此，在您的 MVC 应用程序中，您将获得在服务上定义的操作和数据协定。

现在剩下的就是编写一个反映视图要求的视图模型：

```
public class MyViewModel
{
    [Displayname("Select an item")]
    public string SelectedItemId { get; set; }
    public IEnumerable<SelectListItem> Items 
    { 
        get
        {
            new SelectListItem { Value = "1", Text = "item 1" },
            new SelectListItem { Value = "2", Text = "item 2" },
            new SelectListItem { Value = "3", Text = "item 3" },
        }
    }

    public IEnumerable<SomeType> Results { get; set; }
} 
```

接着：

```
public class HomeController: Controller
{
    public ActionResult Index()
    {
        var model = new MyViewModel();
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        using (var client = new YourWebServiceClient())
        {
            model.Results = client.GetResults(model.SelectedItemId);
            return View(model);
        }
    }
} 
```

最后你可以有一个相应的强类型视图：

```
@model MyViewModel
@using (Html.BeginForm())
{
    @Html.LabelFor(x => x.SelectedItemId)
    @Html.DropDownListFor(x => x.SelectedItemId, Model.Items)
    <button type="submit">OK</button>
}

@if (Model.Results != null)
{
    var grid = new WebGrid(Model.Results);
    @grid.GetHtml();
} 
```

当然，如果 DropDownList 值也需要来自您的 Web 服务，您可以将 Items 属性设置为带有 setter 的自动属性，并在您的 GET 和 POST 操作中调用 WCF 服务上的相应方法来检索值并绑定它.

# php - 如何使用 FB API 删除提及标签？

> ID：12909970
> 
> 赞同：0
> 
> 时间：2012-10-16T07:55:49.390
> 
> 标签：php, facebook, facebook-graph-api, facebook-opengraph

FB 已更新其 API 以禁止通用共享（2012 年 10 月），现在要求我们使用内置操作。从那里继续，我们可以使用提及标记 (https://developers.facebook.com/docs/opengraph/mention_tagging/) 来允许创建消息和提及 - 这一切都很好。

但是，在上面的同一页面上，他们说“您还必须逐步描述用户如何在您的应用中添加/删除标签。” - 但他们忽略了描述必须对 API 进行什么调用才能这样做。

有没有其他人成功地做到了这一点？

假设我有一个用户在操作帖子中提到了 5 个人。然后说其中一个想要不被标记。我为他们提供了一个链接，以允许他们取消标记自己，但应该对 API 进行什么调用。

有没有人有这方面的经验？所有帮助表示赞赏。

保罗·G

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:23:02.130

> 假设我有一个用户在操作帖子中提到了 5 个人。然后说其中一个想要不被标记。我为他们提供了一个链接，以允许他们取消标记自己

我认为您不必向已被*您的用户标记的**其他*用户提供删除标记的链接。通过 facebook.com UI 实现的标准 FB 功能应该使他们能够做到这一点。

 *对我来说，将此类链接自行提供给已被您的应用用户标记但甚至可能自己不使用您的应用的人没有多大意义。（为了确保他们合法地要求不加标签，你必须首先识别他们——让他们连接到你的应用程序。我不认为这就是 Facebook 想要的样子。）

对我来说，指南的目的更多是为了确保您为您的应用程序构建一个清晰易懂的 UI，以便用户*输入*他的消息的过程。如果他们开始输入*@PaulG*，并且您想将其“翻译”成标签，例如通过在文本编辑框中突出显示它，就像在 facebook.com 上发生的那样，那么它 a) 必须对您的用户绝对清楚，他们以这种方式标记某人，并且 b）您必须为您的用户提供一种方法来立即删除该标记，然后（*在*发布他的消息之前），以防他*不想*标记用户，而只是拥有字符“@PaulG”在他的信息中代表自己。*

# android - 如何限制用户输入的小数点后不超过两位？

> ID：12909975
> 
> 赞同：2
> 
> 时间：2012-10-16T07:55:56.473
> 
> 标签：android, decimal, restriction

我在列表视图中有edittext。如果用户在小数点后输入超过两位数，我想限制用户。现在它允许 n 个数字。如何限制用户在不使用模式的情况下输入的小数点后不超过两个数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T07:58:57.153

我们可以使用正则表达式（ regex ），如下所示：

```
public class DecimalDigitsInputFilter implements InputFilter {

    Pattern mPattern;

    public DecimalDigitsInputFilter(int digitsBeforeZero,int digitsAfterZero) {
        mPattern=Pattern.compile("[0-9]{0," + (digitsBeforeZero-1) + "}+((\\.[0-9]{0," + (digitsAfterZero-1) + "})?)||(\\.)?");
    }

    @Override
    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {

            Matcher matcher=mPattern.matcher(dest);       
            if(!matcher.matches())
                return "";
            return null;
        }

    } 
```

要使用它，请执行以下操作：

```
editText.setFilters(new InputFilter[] {new DecimalDigitsInputFilter(5,2)}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:58:53.737

您可以使用[TextWatcher](https://developer.android.com/reference/android/text/TextWatcher.html)并在[afterTextChanged](https://developer.android.com/reference/android/text/TextWatcher.html#afterTextChanged%28android.text.Editable%29)方法中使用正则表达式来匹配所需的文本并删除输入的额外数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-23T12:28:35.203

可能为时已晚，但我正在发布我的解决方案，希望它对某人有用

在您的文本观察方法 afterTextChanged 中执行此操作。

```
public void afterTextChanged(Editable s) {

                if(mEditText.getText().toString().contains(".")){
                    String temp[] =  mEditText.getText().toString().split("\\.");
                    if(temp.length>1) {
                        if (temp[1].length() > 3) {
                            int length = mEditText.getText().length();
                            mEditText.getText().delete(length - 1, length);
                        }
                    }
                }
    } 
```

# c# - avalon 坞站和单独窗口中的用户控制

> ID：12909978
> 
> 赞同：1
> 
> 时间：2012-10-16T07:56:05.307
> 
> 标签：c#, wpf, user-controls, window

我正在开发一堆用户控件来做不同的事情——比如维护屏幕、查询屏幕、报告屏幕之类的东西。每个屏幕都有一个专门的用途，一个用户控件拥有一个屏幕的所有功能。

我正在使用 avalondock，可以将这些用户控件放入 LayoutDocuments。这将为每个屏幕/用户控件创建一个单独的选项卡。我有一个菜单系统设置，因此用户可以选择他们需要访问的屏幕。对于每个新屏幕，我都会创建一个新的 LayoutDocument，向其中添加适当的控件，然后将 LayoutDocument 添加到停靠面板的子项中。

这一切都很好。

Avalon Dock 还具有能够拖出布局文档并使其浮动的功能 - 如果您愿意，也可以将其停靠在应用程序的其他位置。

我想把这个概念更进一步：能够说右键单击布局文档并选择“制作外部窗口”（稍后我会制定出确切的措辞）。此操作的效果是在任务栏中创建一个具有自己图标的新应用程序；能够在它和其他应用程序之间切换；

有点像当你说 Excel 编辑一个文档，然后你打开了第二个 excel 实例。在 Windows 7 中，您会在任务栏中获得两个 excel 图标（一个在另一个之后），您可以在它们之间使用 alt-tab。

这几乎是我所追求的行为。然而，第二个应用程序并不是第一个应用程序的完整副本。它只有一个用户选择的用户控件。

这是我卡住的地方，需要一些指导。

我在想我可能需要某种 shell 应用程序，我可以在其中传递我想要的用户控件。shell 将充当带有标题、X、最小化等的窗口；用户控件将成为该外壳的唯一内容。使用 process.start 创建新进程并启动？

理想情况下，我能够以与用户当前正在查看的相同状态传递相同的控件-因此，例如，如果他们在维护屏幕中编辑某些客户记录的一部分，则选择“外部窗口”选项，相同的客户记录将出现在新窗口中。

如果我走在正确的轨道上，有没有人做过类似的事情或提供建议？

我想我知道如何创建一个 shell 应用程序，但不确定是否将用户控件动态传递给它。我想避免为每个用户控件创建不同的 shell 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:05:00.777

无需为该场景启动新流程。

只需在运行时创建一个新的`Window`添加`UserControl`并从`DockingManager`. 如果您希望它显示在那里，请确保`Window`已`ShowInTaskbar`设置。

要获得`UserControl`单独取消停靠的命令，`Window`您只需重新设置样式`ContextMenu`以合并您的命令（查看 VS2010 主题以及[VS2010 theme.xaml](http://avalondock.codeplex.com/SourceControl/changeset/view/96370#1749982 "主题.xaml")`ContextMenu`的样式）。

# button - 在 Tkinter 中更改按钮的命令方法时出现 AttributeError

> ID：12909979
> 
> 赞同：0
> 
> 时间：2012-10-16T07:56:20.263
> 
> 标签：button, methods, attributes, command, tkinter

我正在使用 Tkinter 的 Python GUI 程序。在controller.py的构造器中，我想给BackButton命令打开closeFrame函数（command = self.closeFrame）。
**视图.py**

```
class View(TK):
  def SCPIMenu(self):
    self.BackButton = Button(self.SCPIFrame, text = "Back", command = None)
    self.BackButton.place(x = 30, y = 330, anchor = CENTER) 
```

**控制器.py**

```
class Controller(object):
  def __init__(self):
    self.view = View()
    self.view.mainMenu()
    self.view.mainloop()

 def closeFrame(self):
   self.SCPIFrame.destroy()

c = Controller() 
```

我想像 self.view.BackButton.configure(command = self.closeFrame) 之类的东西，但后来我得到一个错误
*AttributeError: BackButton*

有任何想法吗？谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:31:46.160

您的错误消息说`view`没有`BackButton`属性。通常，您`self.view.BackButton`在创建它之前进行操作。

提示：您的按钮似乎是在`SCPIMenu`其中创建的，并且没有从 Controller 构造函数中明确调用。您可能希望将回调存储在视图中的某个位置，并在创建按钮时将其用作命令。

# html - 图片不会显示

> ID：12909994
> 
> 赞同：2
> 
> 时间：2012-10-16T07:57:21.320
> 
> 标签：html, css, image

我的网站上有这个 LinkedIn 徽标。它在本地测试时工作得非常好，但它不会在线显示。现在我做错了什么？

如您所见 - 它应该位于其他之间的底部：
[数字好东西](http://adigitalgoodie.com)

这是页脚的 HTML

```
 <div class="footer">
            <div class="footertext">Want to get in touch?</div>
            <div id="pinterestlogo"><a href="http://pinterest.com/nickthepinrod" target="_blank"><span></span></a></div>
            <div id="linkedinlogo"><a href="http://linkedin.com/profile/view?id=197241309" target="_blank"><span></span></a></div>
            <div id="twitterlogo"><a href="http://twitter.com/followthenimrod" target="_blank"><span></span></a></div>
        </div> 
```

这是CSS

```
#linkedinlogo
{
    width: 30px;
    height: 30px;
    background-image: url('Images/LinkedInLogo.png');
    margin-top: 10px;
    margin-bottom: 10px;
    margin-right: 10px;
    float: right;
}

#linkedinlogo a span
{
    position: absolute;
    width: 30px;
    height: 30px;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T08:02:22.937

事实证明，你`Images/LinkedInLogo.png`的实际上是`Images/LinkedinLogo.png`. 只需将它换成小写的“i”，一切都会好起来的。

为了确认起见，这是一个[链接。](http://adigitalgoodie.com/Images/LinkedinLogo.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:50:28.310

请检查徽标的文件名和位置。您还可以在您的 html 中添加标签并将其设置为 CSS 样式。

如果您需要新徽标，请访问[http://press.linkedin.com/logo-images 。](http://press.linkedin.com/logo-images)

# jpa - 使用条件查询可嵌入对象

> ID：12909997
> 
> 赞同：0
> 
> 时间：2012-10-16T07:57:41.707
> 
> 标签：jpa, eclipselink, criteria, toplink, embeddable

我使用 Toplink Grid(Eclipselink) 作为我的 JPA 实现框架。

当我尝试使用 Criteria 查询 Embeddable 对象时，我遇到了如下异常：

```
 Exception [EclipseLink-6119] (Eclipse Persistence Services - 2.1.2.v20101206-r8635): org.eclipse.persistence.exceptions.QueryException
Exception Description: The join expression 
Query Key conInfo
   Base domain.de1003.Employee is not valid, or for a mapping type that does not support joining.
Query: ReportQuery(referenceClass=Employee )
    at org.eclipse.persistence.exceptions.QueryException.mappingForExpressionDoesNotSupportJoining(QueryException.java:659)
    at org.eclipse.persistence.internal.queries.JoinedAttributeManager.prepareJoinExpression(JoinedAttributeManager.java:851)
    at org.eclipse.persistence.internal.queries.JoinedAttributeManager.prepareJoinExpressions(JoinedAttributeManager.java:778)
    at org.eclipse.persistence.internal.queries.ReportItem.initialize(ReportItem.java:171)
    at org.eclipse.persistence.queries.ReportQuery.prepare(ReportQuery.java:1035)
    at org.eclipse.persistence.queries.DatabaseQuery.checkPrepare(DatabaseQuery.java:509)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.checkPrepare(ObjectLevelReadQuery.java:822)
    at org.eclipse.persistence.queries.DatabaseQuery.checkPrepare(DatabaseQuery.java:470)
    at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:710)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.execute(ObjectLevelReadQuery.java:1038)
    at org.eclipse.persistence.queries.ReadAllQuery.execute(ReadAllQuery.java:381)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeInUnitOfWork(ObjectLevelReadQuery.java:1124)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2917)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1291)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1273)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1247)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.executeReadQuery(EJBQueryImpl.java:479)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.getResultList(EJBQueryImpl.java:714) 
```

我尝试的代码如下：

```
CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaQuery<ContactInfo> cq = cb.createQuery(ContactInfo.class);
Root<Employee> root = cq.from(Employee.class);
cq.select(root.<ContactInfo> get("conInfo"));
cq.where(cb.le(root.<Long> get("employId"), 3));

TypedQuery<ContactInfo> q = em.createQuery(cq);
List<ContactInfo> results = q.getResultList(); 
```

其中 ContactInfo 是一个可嵌入的类，由一个地址和一组电话组成。电话是字符串归档的。

任何帮助将不胜感激。

我检查了与此问题相关的问题： [JPA - Criteria API and EmbeddedId](https://stackoverflow.com/questions/4084431/jpa-criteria-api-and-embeddedid)

但这并没有解决我的问题。

而且我找不到任何示例代码。

致詹姆斯：

实体代码如下：

```
 package domain.de1003;

import java.io.IOException;
import java.io.Serializable;
import java.util.List;

import javax.persistence.AttributeOverrides;
import javax.persistence.AttributeOverride;
import javax.persistence.CascadeType;
import javax.persistence.CollectionTable;
import javax.persistence.Column;
import javax.persistence.ElementCollection;
import javax.persistence.Embedded;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.OneToMany;
import javax.persistence.Table;
import javax.persistence.Version;

import oracle.eclipselink.coherence.integrated.config.GridCacheCustomizer;

import org.eclipse.persistence.annotations.Customizer;

import com.tangosol.io.pof.PofReader;
import com.tangosol.io.pof.PofWriter;
import com.tangosol.io.pof.PortableObject;

@Entity(name="Employee")
@Table(name="EMPLOYEE")
@Customizer(oracle.eclipselink.coherence.integrated.config.GridCacheCustomizer.class)
public class Employee implements PortableObject,Serializable {

private static final long serialVersionUID = 1L;
@Id
@Column(name = "EM_ID")
private long employId;

@Column(name = "FIRSTNAME")
private String firstName;

@Column(name = "LASTNAME")
private String lastName;

@Embedded
@AttributeOverrides({
    @AttributeOverride(name="homePhone", column=@Column(name="HOMEPHONE")),
    @AttributeOverride(name="workPhone", column=@Column(name="WORKPHONE"))
})
private ContactInfo conInfo;

@Version
private long version;

public long getEmployId() {
    return employId;
}

public void setEmployId(long employId) {
    this.employId = employId;
}

public String getFirstName() {
    return firstName;
}

public void setFirstName(String firstName) {
    this.firstName = firstName;
}

public String getLastName() {
    return lastName;
}

public void setLastName(String lastName) {
    this.lastName = lastName;
}

public ContactInfo getConInfo() {
    return conInfo;
}

public void setConInfo(ContactInfo conInfo) {
    this.conInfo = conInfo;
}

public long getVersion() {
    return version;
}

public void setVersion(long version) {
    this.version = version;
}

@Override
public void readExternal(PofReader pofReader) throws IOException {
    employId = pofReader.readLong(1);
    firstName = pofReader.readString(2);
    lastName = pofReader.readString(3);
    version = pofReader.readLong(4);

}

@Override
public void writeExternal(PofWriter pofWriter) throws IOException {
    pofWriter.writeLong(1, employId);
    if(firstName != null) pofWriter.writeString(2, firstName);
    if(lastName != null) pofWriter.writeString(3,lastName);
    pofWriter.writeLong(4, version);
}

@Override
public String toString() {
    return "[" 
    + "employId = " + employId
    + " firstName = " + firstName
    + " lastName = " + lastName
    + " contact inforamtion: " + conInfo
    + "]";
} 
```

}

和实体 ContactInfo

```
 package domain.de1003;

import java.io.IOException;
import java.io.Serializable;

import javax.persistence.Column;
import javax.persistence.Embeddable;

import oracle.eclipselink.coherence.integrated.config.GridCacheCustomizer;

import org.eclipse.persistence.annotations.Customizer;

import com.tangosol.io.pof.PofReader;
import com.tangosol.io.pof.PofWriter;
import com.tangosol.io.pof.PortableObject;

@Embeddable
@Customizer(oracle.eclipselink.coherence.integrated.config.GridCacheCustomizer.class)
public class ContactInfo implements PortableObject,Serializable{

private static final long serialVersionUID = 1L;

@Column(name = "ADDRESS")
private String address;

@Column(name = "HOMEPHONE")
private String homePhone;

@Column(name = "WORKPHONE")
private String workPhone;

@Column(name = "CELLPHONE")
private String cellPhone;

public String getAddress() {
    return address;
}

public void setAddress(String address) {
    this.address = address;
}

public String getHomePhone() {
    return homePhone;
}

public void setHomePhone(String homePhone) {
    this.homePhone = homePhone;
}

public String getWorkPhone() {
    return workPhone;
}

public void setWorkPhone(String workPhone) {
    this.workPhone = workPhone;
}

public String getCellPhone() {
    return cellPhone;
}

public void setCellPhone(String cellPhone) {
    this.cellPhone = cellPhone;
}

@Override
public void readExternal(PofReader pofReader) throws IOException {
    address = pofReader.readString(1);
    homePhone = pofReader.readString(2);
    workPhone = pofReader.readString(3);
    cellPhone = pofReader.readString(4);
}

@Override
public void writeExternal(PofWriter pofWriter) throws IOException {
    if(address != null) pofWriter.writeString(1, address);
    if(homePhone != null) pofWriter.writeString(2, homePhone);
    if(workPhone != null) pofWriter.writeString(3, workPhone);
    if(cellPhone != null) pofWriter.writeString(4, cellPhone);
}

@Override
public String toString() {
    return "[" 
    + "address = " + address
    + " homePhone = " + homePhone
    + " workPhone = " + workPhone
    + " cellPhone = " + cellPhone
    + "]";
} 
```

}

对于等效的 JQPL

查询 query = em.createQuery("SELECT e.conInfo FROM Employee e where e.employId < 3");

工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:17:47.983

我尝试在最新的 EclipseLink（每晚 2.5 版）中重现此内容，但不能。我怀疑它可能会通过标准 API 更改来修复以添加 On 支持 - 你可以试一试来确认它吗？您可能必须关闭缓存才能使用最新版本的 EclipseLink 进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:41:35.280

检查 conInfo 是否是您的属性的正确名称（包括您的实体代码）。

等效的 JPQL 是否有效？

# java - Java：奇怪的静态方法头定义（表达式而不是返回类型）

> ID：12909998
> 
> 赞同：2
> 
> 时间：2012-10-16T07:57:47.243
> 
> 标签：java

> **可能重复：**
> [静态初始化块](https://stackoverflow.com/questions/2420389/static-initialization-blocks)
> [不寻常的“静态”方法声明](https://stackoverflow.com/questions/2902833/unusual-static-method-declaration)

我正在尝试在不久的将来为 OCJPC 做准备，我遇到了一个我以前从未见过的结构。由于很难用谷歌搜索编程结构，我在这里问这个问题。代码片段：

```
class Geryon {
    static { System.out.print("a"); }
    { System.out.print("b"); }
    Geryon(String s) { System.out.print(s); }

    public static void main(String[] args) {
        new Geryon("c");
    }
} 
```

我指的是`theGeryon()`方法头中的 2 个打印语句，在我期望返回类型的地方。据我所知，静态方法标头包括：

```
access-modifier keyword-"static" return-type|void method-name 
```

从问答题的答案来看，代码不仅会编译，还会运行。谁能指导我找到解释这一点的来源？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T07:59:49.837

A 是一个静态初始化器，当类被类加载器初始化时被调用，这个：

```
 static { System.out.print("a"); } 
```

另一个（B）是一个匿名块，每次实例化类时都会调用它：

```
{ System.out.print("b"); } 
```

哦，第三个打印语句 C 只是一个普通的构造函数调用。

如果您实例化一个 Geryon，您将获得所有三行代码，就像您发布的代码一样。但是下次你实例化一个 Geryon 时，你只会得到两个 - B 和 C；因为它已经被类加载器初始化，所以静态块不会被调用。