# StackOverflow 问答 15926000-15926999

# c# - MAKEWORD c++ Windows 宏的 C# 等效项是什么？

> ID：15926000
> 
> 赞同：4
> 
> 时间：2013-04-10T12:34:46.960
> 
> 标签：c#, c++, visual-c++

我需要将一些 c++ 遗留代码转换为 C#，我想知道`MAKEWORD`c++ Windows 宏的 C# 等价物是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T12:38:22.690

```
public static uint MakeWord(byte low, byte high)
{
    return ((uint)high << 8) | low;
} 
```

但是，您可能需要结果，这`int`取决于您使用它做什么（必要时强制转换）。

# c# - 替换字符串中的所有 " 和 '

> ID：15926004
> 
> 赞同：-1
> 
> 时间：2013-04-10T12:35:01.750
> 
> 标签：c#

我想替换字符串中的所有 " 和 '

例如字符串

```
"23423dfd
"'43535fdgd
""'4353fg
""'''3453ere 
```

结果应该是

```
23423dfd
43535fdgd
4353fg
3453ere 
```

我试过这个`myString.Replace("'",string.Empty).Replace('"',string.Empty);`，但它没有给我正确的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:36:13.897

利用[`String.Replace`](http://msdn.microsoft.com/en-us/library/system.string.replace.aspx)

```
mystring = mystring.Replace("\"", string.Empty).Replace("'", string.Empty) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:36:02.400

做两个替换：

```
s = s.Replace("'", "").Replace("\"", ""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T12:37:58.433

尝试这个：

```
string s = yoursting.Replace("\"", string.Empty).Replace("'", string.Empty); 
```

# java - 如何让 JUnit 打印断言结果

> ID：15926005
> 
> 赞同：35
> 
> 时间：2013-04-10T12:35:05.663
> 
> 标签：java, testing, junit, junit4

如何将我的 JUnit 断言的结果打印到 [标准输出]？

我有一些这样的测试：

```
@Test
public void test01()
{
    Position p = getPositionAt('a', 1);
    assertNotNull("a1 exists", p);
    assertNotNull("figure exists a1", p.getFigure());

    p = getPositionAt('a', 2);
    assertNotNull("exists a2", p);
    assertNull("figure exists a2", p.getFigure());

    p = getPositionAt('b', 1);
    assertNotNull("exists b1", p);
    assertNull("figure exists b1", p.getFigure());
} 
```

这是我希望得到的打印输出格式：

```
a1 exists -success
figure exists a1 -success
exists a2 -success
figure exists a2 -succcess
exists b1 -succcess
figure exists b1 -failed 
```

有没有办法使用`runners`and来做到这一点`suites`？`assertSuccess()`或者是否存在任何`assertFailed()`方法？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-10T12:42:47.540

首先，你有两个问题，不是一个。当断言失败时，将`AssertionError`引发异常。这可以防止检查任何超过此点的断言。要解决这个问题，您需要使用[ErrorCollector](http://junit-team.github.io/junit/javadoc/latest/org/junit/rules/ErrorCollector.html)。

其次，我不相信 JUnit 有任何内置方法可以做到这一点。但是，您可以实现自己的方法来包装断言：

```
public static void assertNotNull(String description, Object object){
     try{
          Assert.assertNotNull(description, object);
          System.out.println(description + " - passed");
     }catch(AssertionError e){
          System.out.println(description + " - failed");

        throw e;
     }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-10T12:40:47.077

所有的 assertXXX 方法都有一个允许在错误时显示字符串的形式：

`assertNotNull("exists a2", p); // prints "exists a2" if p is null`

打印成功消息没有特别的价值。

**编辑**

Junit 通常提供两种形式的断言。按照上面的示例，您可以通过以下两种方式中的一种来测试空值：

`assertNotNull(p)`

或者

`assertNotNull("my message on failure", p)`

框架将打印错误消息，您无需付出任何其他努力（由框架提供）。

要测试异常，您将使用以下模式：

```
try{
    someCall();
catch(Exception e){
    fail(): // exception shouldn't happen, use assertTrue(true) if it should
} 
```

同样，有这些方法的版本用于添加消息

检查[API](http://junit.sourceforge.net/javadoc/index.html?org/junit/runners/JUnit4.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T12:39:51.473

一个最后的选择是将每个 assert 与相应的 配对`System.out.println`，尽管显然这不太理想。尽管如此，如果一切都失败了，它将解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-29T00:31:03.337

此处的现有答案/评论包含足够的信息来了解如何基于 JUnit 断言打印某些内容 - 但它们也解释了这样做可能不是您真正想要做的，并且可能首先错过了运行单元测试的要点.

*您应该查看测试结果本身，而不是在您不了解如何/在何处查看测试结果时尝试打印某些内容。*

现在如何/在哪里查看结果本身取决于您如何运行测试 - 您需要了解如何运行测试，然后研究如何*根据运行*方式查看测试结果。以下是一些（但不限于）示例：

*   [在 IntelliJ 中运行测试](https://www.jetbrains.com/help/idea/test-runner-tab.html)
*   [在 Eclipse 中运行测试](https://www.vogella.com/tutorials/JUnit/article.html#:%7E:text=To%20see%20the%20result%20of,it%20only%20shows%20failing%20tests.)
*   [在命令行上运行测试](https://www.codejava.net/testing/how-to-compile-and-run-junit-tests-in-command-line)
*   [在 Jenkins 中运行测试](https://www.tutorialspoint.com/jenkins/jenkins_unit_testing.htm)

# mysql - MYSQL - 三重内连接和 SUM

> ID：15926007
> 
> 赞同：1
> 
> 时间：2013-04-10T12:35:07.983
> 
> 标签：mysql, sum, inner-join

**这是我的桌子：**
邀请

```
id | inviteFromID | inviteToID | timestamp | joined
---------------------------------------------------
1  | 1            | 234567890  | 2013-02-02| 1
2  | 1            | 345678901  | 2013-02-02| 1 
```

玩家：

```
id | FacebookID | first_name | last_name
---------------------------------------------------
1  | 123456789  | Dude       | Master
2  | 234567890  | Super      | Man
3  | 345678901  | Bat        | Man 
```

回合：

```
id | PlayerID | round | played | status
---------------------------------------------------
1  | 1        | 1      | 1     | 1
2  | 1        | 2      | 1     | 0
3  | 2        | 1      | 1     | 1 
```

**在这种情况下：**
ID = 1 的玩家将拥有 1 个自己的积分，而 ID = 2 的玩家将拥有 1 个自己的积分。
但是 ID 1 邀请了 2 所以 ID = 1 总共有两点（解释如下）。

**关系：**
-player.id=
invites.inviteFromID-player.id=rounds.playerID

**描述：**
“玩家”表中的用户可以邀请用户加入游戏。比赛以轮次进行。
当用户玩游戏时，“回合”表会更新为“played = 1”和 userId 和“status = 1（如果赢了）或 status = 0（如果没有赢）”。

为每个用户获得积分不是问题。

**问题：**
..问题是，每个被邀请的用户也给邀请者他的积分。

所以如果用户 A（赢得 2 局 = 2 分）邀请 B，并且 B 玩了 3 局并赢得了 3 局（ = 3 分），那么用户 A 的总分是 5（来自 A 的积分 + 来自 B 的积分）。
对于所有被邀请到游戏中的用户 A 都是如此，所以如果用户 A 邀请了 B、C 和 D，他也将获得他们的积分。

在这里我卡住了。我尝试过**内部加入**玩家、邀请和回合，但它没有用，我现在被卡住了。

**最佳输出将是**

```
PlayerID | ownPoints | otherPoints | totalPoints
---------------------------------------------------
1        | 1         | 1           | 2
2        | 1         | 0           | 1 
```

有人能帮助我吗？:)

编辑：
**功能 - getPointsFromPlayer（已弃用：“点”不再可用）**

```
SELECT 
    p.points AS OwnPoints, count(p.id) AS UsersCount, SUM(pi.points) AS SumPoints 
FROM 
    player AS p 
INNER JOIN invites AS i ON p.id = i.inviteFromID 
INNER JOIN player AS pi ON i.inviteToId  = pi.facebookID
WHERE 
    p.id = :inviter AND i.joined = 1 
GROUP BY 
    p.id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:01:53.207

解决了它，它比我想的更简单：

```
 SELECT 
            SUM(CASE WHEN r.status = 1 THEN 1 ELSE 0 END) AS won_rounds
            FROM invites i
            INNER JOIN rounds r ON  i.inviteToID = r.facebookID
            WHERE r.played = 1 AND i.joined = 1 AND i.inviteFromID = :facebookID 
```

尽管如此，还是谢谢大家！

# c# - datatable.rejectchanges 和 RowState 修改

> ID：15926009
> 
> 赞同：3
> 
> 时间：2013-04-10T12:35:08.547
> 
> 标签：c#, state, datarow

## `DataTable.RejectChanges`调用方法后 DataRow 状态不会重置

当使用方法拒绝更改时`DataTable.RejectChanges()`，先前更改的 DataRow 不会将其状态从 Modified 更改回 Unchanged。我尝试的解决方法是：

1.  `DataTable.RejectChanges()`连续两次调用方法，如： `this.someDataSet.Tables["tableName"].RejectChanges()`，在第二个方法调用后，RowState 从 Modified 切换到 Unchanged。

2.  `this.someDataSet.Tables["tableName"].RejectChanges()`之后 -->`this.someDataSet.Tables["tableName"].AcceptChanges()`

是不是这样，您总是应该调用`DataTable.AcceptChanges()`after`DataTable.RejectChanges`以完成行状态更改回其原始状态？我只找到了分别描述这两种方法的例子，而不是结合在一起。

这就是我所拥有的：

*   以 DataTable 作为数据源的 BindingSource
*   Telerik radGridView for Winforms 以 BindingSource 作为 DataSource
*   十三个控件数据绑定到与 radGridView 控件相同的 BindingSource

我正在通过不在 radGridView 控件上的数据绑定控件进行更改。我正在使用 Telerik 的 radPageView 控件来显示用于更改的十三个控件。

提前致谢， LH

# forms - Cakephp自动填充表单选择两个名为belongTo模型的单词

> ID：15926012
> 
> 赞同：0
> 
> 时间：2013-04-10T12:35:10.537
> 
> 标签：forms, cakephp, model, naming-conventions

什么是正确的命名或我缺少什么来自动运行名为 Model 的两个单词。实际模型属于模型两个词。

确切的例子：旅游属于住宿类型。在数据库中有来自旅游的表`tours`和表`accommodation_types` 外键是`tours.accommodation_type_id` 下面代码的快照。

ToursController.php

```
public function add() {
  //...
  $accommodation_types = $this->Tour->AccommodationType->find('list');
  //...
  $this->set(compact('accommodation_types', ...));
} 
```

旅游.php

```
//...
public $belongsTo = array(
  //...
  'AccommodationType' => array(
        'className' => 'AccommodationType',
        'foreignKey' => 'accommodation_type_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    ),
  //...
); 
```

Tours/add.ctp（在表格内）

```
echo $this->Form->input('accommodation_type_id', array('label' => 'Accommodation type')); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:42:01.933

按照惯例，视图变量名称应该是驼峰式的。所以将视图变量从 重命名`$accommodation_types`为`$accommodationTypes`。如果您不遵循约定，则必须明确指定要使用的选项 var，如下所示：

```
echo $this->Form->input('accommodation_type_id', array('options' => $accommodation_types, 'label' => 'Accommodation type')); 
```

# jquery - 显示出现在我在页面上的位置不仅居中

> ID：15926015
> 
> 赞同：0
> 
> 时间：2013-04-10T12:35:13.743
> 
> 标签：jquery, ajax, html, displayobject

这是我的 ajax 代码，我每页有 81 个产品...
当我单击添加到购物车按钮时，页面中心会出现一个 div，但是当我将产品添加到页面的最后或底部时，div 总是出现在页面，我需要向上滚动页面才能看到它。
我想要我在页面上的结果，就像我在页面底部一样，我希望 div 出现在底部。

```
 <script type="text/javascript" >
        $(function() {
           $('a.addbtn').click(function(e){
                 e.preventDefault(); 
                 var quantity = $(this).attr("qty");
                 var prod_id = $(this).attr("prid");
                 var dataString = '&quantity=' + quantity + '&prod_id=' + prod_id;
                 if(quantity=='' || prod_id==''){
                    alert('some thing went wrong');
                 }
                 else{
                   $.ajax({
                      type: "GET",
                      url: "ajax_checkout.php",
                      data: dataString,
                      cache: false,
                      success: function(html){
                           $('.addcart').remove('');
                           $("#viewr").append(html);
                      }
                   });
                 }
                 return false;
            }); 
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:48:16.097

虽然您可以使用 jQuery 设置它的样式并设置一个`inline style`，`top`但我总是会使用`css`它并将其放置在浏览器的顶部。虽然这意味着，在您关闭盒子之前，它会一直存在，它不会固定在打开的位置。

```
 .addcart {
      position: fixed;
      top: 10px;
 } 
```

应该做的伎俩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:56:54.880

使 div 查看器的位置固定。像这样：

```
 #viewr{    
        width:30em;
        height:18em;
        border: 1px solid #ccc;
        background-color: #f3f3f3;
        display:none;
    } 
```

使用任何你想要设置样式的类
现在在 jquery 中添加这个函数，这将使屏幕中心出现：

```
jQuery.fn.center = function () {
    this.css("position","absolute");
    this.css("top", Math.max(0, (($(window).height() - $(this).outerHeight()) / 2) + 
                                                $(window).scrollTop()) + "px");
    this.css("left", Math.max(0, (($(window).width() - $(this).outerWidth()) / 2) + 
                                                $(window).scrollLeft()) + "px");
    return this;
}; 
```

现在在您的成功函数中执行以下操作，使其在一段时间后可见和不可见：

```
success: function(html){
    $('#viewr').html(html);
    $('#viewr').fadeIn('slow').center().delay(2000).fadeOut('slow');
} 
```

不要使用 append()，它总是将 html 附加到 div 中。
延迟量以毫秒为单位，因此请将其设置为您需要的任何值。
这应该可以解决问题

# android - 在 boot_completed 通知未显示

> ID：15926016
> 
> 赞同：0
> 
> 时间：2013-04-10T12:35:15.367
> 
> 标签：android, android-intent, service, alarmmanager, repeatingalarm

我正在创建一个在未来日期显示通知的应用程序。为了在将来显示通知，我已经在 AlarmManager 的帮助下。

在我的一项活动中单击按钮时，我会创建这样的通知

```
Intent myIntent = new Intent(getApplicationContext(),
                BootService.class);
        myIntent.putExtra("stuffid", stuffId);
        PendingIntent pendingIntent = PendingIntent.getService(getApplicationContext(),
                stuffId, myIntent, 0);

        AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);

        Calendar calendar = Calendar.getInstance();
        calendar.set(Calendar.YEAR, year);
        calendar.set(Calendar.MONTH, month - 1);
        calendar.set(Calendar.DAY_OF_MONTH, day);

        calendar.set(Calendar.HOUR_OF_DAY, hour);
        calendar.set(Calendar.MINUTE, minute);
        calendar.set(Calendar.SECOND, 00);

        alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(),pendingIntent);
        // Tried set repeating also :(
        // alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), 30*1000, pendingIntent); 
```

这是我的 BootService 类代码：

```
public class BootService extends Service {
    DBController dbController = new DBController(this);

    @Override
    public void onCreate() {
        super.onCreate();
    }

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {

        LoadAlarmsFromDatabase();

        int stuffId = intent.getIntExtra("stuffid", 0);
        if(stuffId > 0)
            new GetStuffDataAsync().execute(stuffId);

        return super.onStartCommand(intent, flags, startId);
    }

    private void LoadAlarmsFromDatabase() {
        DBController dbController = new DBController(this);
          // Iterate over array and call addnotification no of time
             ...
        addNotification(stuff.getStuffId(), calendar);
        dbController.close();
    }

    private void addNotification(int stuffid, Calendar cal) {

        Calendar rightNow = Calendar.getInstance();
        long rightNowMillis = rightNow.getTimeInMillis();

        // Add to alarm only when its greate than current date
        if (cal.getTimeInMillis() > rightNowMillis) {
            Log.v(TAG, "addNotification " + stuffid + ", " + cal);
            Intent intent = new Intent(getApplicationContext(),
                    BootService.class);

            intent.putExtra("stuffid", Integer.toString(stuffid));

            PendingIntent mAlarmSender = PendingIntent.getBroadcast(
                    getApplicationContext(), stuffid, intent, PendingIntent.FLAG_UPDATE_CURRENT);

            AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
            //am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), mAlarmSender);
            am.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), 30*1000, mAlarmSender);

        }
    }

    public class GetStuffDataAsync extends AsyncTask <Integer,Void,Stuff>{

        @Override
        protected Stuff doInBackground(Integer... params) {
            int stuffId = params[0];
            Stuff stuff = dbController.getStuffInfo(stuffId);
            dbController.close();

            return stuff;
        }

        @Override
        protected void onPostExecute(Stuff result) {
            Context ctx = getApplicationContext();

            Intent notificationIntent = new Intent(ctx, AndroidAlarmService.class);
            PendingIntent contentIntent = PendingIntent.getActivity(ctx,
                    1, notificationIntent,
                    PendingIntent.FLAG_CANCEL_CURRENT);

            NotificationManager nm = (NotificationManager) ctx
                    .getSystemService(Context.NOTIFICATION_SERVICE);

            NotificationCompat.Builder builder = new NotificationCompat.Builder(ctx);

            builder.setContentIntent(contentIntent)
                        .setSmallIcon(R.drawable.ic_launcher)
                        .setTicker("Reminder: " + result.getName() + " expires on " + result.getExpiresOn())
                        .setWhen(System.currentTimeMillis())
                        .setAutoCancel(true)
                        .setContentTitle("NotifyWhenMyStuffExpires")
                        .setSound(RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION))
                        .setContentText(result.getName() + " expires on " + result.getExpiresOn());

            Resources res = ctx.getResources();
            if(result.getHasPhoto() == 1){
                Bitmap bm = result.getPhoto();
                builder.setContentIntent(contentIntent).setLargeIcon(bm);
            }
            else
                builder.setContentIntent(contentIntent).setLargeIcon(BitmapFactory.decodeResource(res, R.drawable.ic_launcher));

            Notification n = builder.build();

            nm.notify(1, n);
        }

    }

} 
```

在测试应用程序时，我看到显示通知，问题是特定于启动手机的。在上面的代码中，我通过调用 LoadAlarmsFromDatabase 重新创建通知

为了在启动时重新创建警报，我使用了 BroadcastReceiver

公共类 BootReceiver 扩展 BroadcastReceiver {

```
 private final String TAG = "BootService";

    @Override
    public void onReceive(Context context, Intent intent) {
        android.os.Debug.waitForDebugger();

        if ("android.intent.action.BOOT_COMPLETED".equals(intent.getAction())) {
            android.os.Debug.waitForDebugger();

            Intent mServiceIntent = new Intent(context,BootService.class);
            mServiceIntent.setAction("com.whenmystuffexpires.BootService");
            ComponentName service = context.startService(mServiceIntent);

            if (null == service) {
                // something really wrong here
                Log.e(TAG, "Could not start BootService ");
                Log.v(TAG, "BootReceiver - Could not start BootService ");
            }

        } else {
            Log.e(TAG, "Received unexpected intent " + intent.toString());
            Log.v(TAG, "Received unexpected intent " + intent.toString());
        }
    }
} 
```

附加调试器后，我看到断点被命中并且 loadalarmfromdatabase 被调用。但是没有显示通知。

这是我的接收者在清单中的声明方式

```
<service
            android:name=".BootService"
            android:enabled="true" />

        <receiver
            android:name=".BootReceiver"
            android:enabled="true" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
                <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>
        </receiver> 
```

更多事实：

1.  在使用 ADB shell 重新启动时，通知确实有效！

    $ 上午广播 -a android.intent.action.BOOT_COMPLETED

2.  我正在姜饼上测试它。

3.  问题仅在手机重启时出现。

4.  清单权限：使用权限 android:name="android.permission.WAKE_LOCK" 使用权限 android:name="android.permission.RECEIVE_BOOT_COMPLETED"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:38:14.380

从您的`DEFAULT`类别中删除`<intent-filter>`（因为这是不正确的）并确保您持有`RECEIVE_BOOT_COMPLETED`许可。

# java - 如何在 Apache HttpComponents 中将 Content-Length 标头添加到 HttpPost？

> ID：15926023
> 
> 赞同：2
> 
> 时间：2013-04-10T12:35:47.387
> 
> 标签：java, http-post, apache-httpcomponents, content-length

我有一个服务器，它期望 Content-Length 作为 POST 标头的一部分。对于 POST，我使用的是 Apache HttpComponents 库。

这是预期请求的精简版本（当然包含所有必需的标头）：

```
POST /ParlayREST/1.0/sample/ HTTP/1.1
Content-Type: application/json
Accept: application/json
Host: server.url.com:8080
Content-Length: 287
{
    "listenerURL":"http://application.example.com/notifyURL"},
    "sessionId":"12345"
} 
```

我使用**HttpPost的****setEntity**方法将**StringEntity**（转换后的 json -> String -> StringEntity）设置为 POST 的内容。但是当我执行请求时，我最终得到了一个 POST 请求，它没有在其标头中指定**Content-length**。

 ******无论如何要添加这个缺少的标题？

（我尝试**setHeader()**来设置**Content-Length**，这引发了一个错误，指出内容长度已经存在）

这是我用来创建 POST 请求的代码：

```
//Convert the registration request object to json
StringEntity registrationRequest_json_entity = new StringEntity(gsonHandle.toJson(registrationRequest));
registrationRequest_json_entity.setContentType("application/json");

//Creating the HttpPost object which contains the endpoint URI
HttpPost httpPost = new HttpPost(Constants.CLIENT_REGISTRATION_URL);
httpPost.setHeader(HTTP.CONTENT_TYPE,"application/json");
httpPost.setHeader("Accept","application/json");
httpPost.setHeader(HTTP.TARGET_HOST,Constants.REGISTRATION_HOST + ":" + Constants.REGISTRATION_PORT);

//Set the content as enitity within the HttpPost object     
httpPost.setEntity(registrationRequest_json_entity);

HttpResponse response = httpClient.execute(httpPost, new BasicHttpContext());
HttpEntity entity = response.getEntity();
if (entity != null) {
    //work on the response
}
EntityUtils.consume(entity); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-11-05T09:17:47.090

HttpClient 根据所附消息实体的属性和实际协议设置自动生成`Content-Length`标`Transfer-Encoding`头值。

不要手动设置这些标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T15:13:07.613

尝试：

```
httppost.setHeader(HTTP.CONTENT_LEN,"0"); 
```

这会将内容长度设置为 0。******

# ruby-on-rails - 使用 RACK 中间件获取客户端的请求类型

> ID：15926025
> 
> 赞同：1
> 
> 时间：2013-04-10T12:35:55.410
> 
> 标签：ruby-on-rails, xml, rack

我有一个 api 请求说“host/something/abc.xml”，它不发送 content_type。Rails 仍然明白它需要用 xml 响应并发送一个 xml 数据。如果同一个客户端使用“host/something/abc”调用，rails 会发回一个 HTML。（两者都没有 CONTENT_TYPE）

我想知道它是怎么发生的？我想检查客户端请求的 Rack 中间件？XML 或 JSON 或 HTML（我没有内容类型）。Rack::Request 中是否有任何方法可以检查它？我知道有一个方法 content_type 但它返回我为零。但是rails仍然用xml响应..怎么样？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-10T15:25:06.233

请参阅[http://en.wikipedia.org/wiki/List_of_HTTP_header_fields](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields)

`Content-Type`告诉你*请求*的类型。`Accept`告诉服务器客户端想要什么作为*响应*。

这应该将接受标头输出到控制台。

```
require 'rack'

class Accepter
  def initialize(app, options={})
    @app, @options = app, options
  end
  def call(env)
    accepts = env["HTTP_ACCEPT"]
    warn "accepts = #{accepts.inspect}"
    @app.call
  end
end 
```

# mongodb - mongodb 聚合框架 - 获取嵌套数组的第一个文档的字段

> ID：15926033
> 
> 赞同：7
> 
> 时间：2013-04-10T12:36:17.433
> 
> 标签：mongodb

考虑以下是我存储在集合中的文档`Users`

```
{
  _id : "User1",
  joined : ISODate("2011-03-02"),
  likes : {
           sublikes: [
                      {WebsiteID:'001': WebsiteName: 'ABCD'},
                      {WebsiteID:'002': WebsiteName: '2BC2'},
                      {WebsiteID:'003': WebsiteName: '3BC3'},
                      //........... 
                      //........... 
                      {WebsiteID:'999999': WebsiteName: 'SOME_NAME'}
                     ]
          }
} 
```

现在使用 mongodb 聚合框架，我需要获取它

```
collection.aggregate([
                        { $project: {
                            _id: 1,
                            "UserID": "$_id", 
                            "WebsiteName": "$likes.sublikes[0]['WebsiteName']"
                        }
                        },
                         { $match: { _id: 'User1'} }
                      ], function (err, doc) {
 ///Not able to get the WebsiteName: 'ABCD'
}); 
```

如果我使用`$unwind`的文档变得散装（特别是在上述情况下），所以我不想为了只获取数组中的第一项而展开它（不管其他人）

谁能给我有关如何访问和重命名该字段的提示？

* * *

**更新**1：即使我尝试使用`"WebsiteName": "$likes.sublikes.0.WebsiteName"`. 没用:-(

**更新**2：未解决的问题 - [https://jira.mongodb.org/browse/SERVER-4589](https://jira.mongodb.org/browse/SERVER-4589)

截至目前`$at`不起作用。引发错误：

```
{ [MongoError: exception: invalid operator '$at']
  name: 'MongoError',
  errmsg: 'exception: invalid operator \'$at\'',
  code: 15999,
  ok: 0 } 
```

直到那时使用 `$unwind`

```
// Array Remove - By John Resig (MIT Licensed)
Array.prototype.remove = function(from, to) {
  var rest = this.slice((to || from) + 1 || this.length);
  this.length = from < 0 ? this.length + from : from;
  return this.push.apply(this, rest);
}; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T07:32:23.037

实现结果的最简单方法是使用普通的查找查询和`$slice`运算符：

```
db.collection.find( {_id: "User1"}, {"likes.sublikes": {$slice: 1}} ) 
```

聚合框架（如 MongoDB 2.4.1）不支持`$slice`或数组索引（投票/观看功能请求：[SERVER-6074](https://jira.mongodb.org/browse/SERVER-6074)和[SERVER-4589](https://jira.mongodb.org/browse/SERVER-4589)）。

`$unwind`您可以使用,`$group`和运算符在聚合框架中执行此`$first`操作，例如：

```
db.collection.aggregate([
    { $match: {
         _id : "User1"
    }},
    { $unwind: "$likes.sublikes" },
    { $group: {
        _id: "$_id",
        like: { $first: "$likes.sublikes" }
    }},
    { $project: {
        _id: 0,
        "UserID": "$_id",
        "WebsiteName": "$like.WebsiteName"
    }}
]) 
```

正常`$slice`应该是性能最高的选项。

# prolog - 如何在 PROLOG 中合并列表？

> ID：15926034
> 
> 赞同：4
> 
> 时间：2013-04-10T12:36:20.667
> 
> 标签：prolog

我需要像这样合并两个列表 L1=[1,2,3] 和 L2=[a,b]：M=[1,a,2,b,3]。请问我该如何在PROLOG中做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T14:28:05.267

你可以试试

```
m2([A|As], [B|Bs], [A,B|Rs]) :-
    !, m2(As, Bs, Rs).
m2([], Bs, Bs) :- !.
m2(As, [], As). 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T12:47:43.240

你可以看看这个链接：[Prolog program to merge two ordered lists](http://www.dailyfreecode.com/code/prolog-merge-two-ordered-list-3129.aspx)

这不会为您提供所需的输出，但这是一个开始。

经过一些尝试，这是正确的答案，比我提出的原始答案（经过测试和工作）简单得多。

```
mergelist_alternate([],[],[]).
mergelist_alternate([X],[],[X]).
mergelist_alternate([],[Y],[Y]).
mergelist_alternate([X|List1],[Y|List2],[X,Y|List]) :- mergelist_alternate(List1,List2,List). 
```

你可以这样称呼它：

```
mergelist_alternate([1,2,3],[a,b],L),!. 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-03T02:18:36.640

```
merge_list([],L,L ).
merge_list([H|T],L,[H|M]):-
    merge_list(T,L,M). 
```

它会起作用的。100% 测试！

```
Input: merge_list([1,2],[3,4],M).
Output: M=[1,2,3,4]. 
```

# c# - 动态生成服务实现

> ID：15926037
> 
> 赞同：0
> 
> 时间：2013-04-10T12:36:37.407
> 
> 标签：c#, wcf, dynamic, reflection

在我公司，我们的服务实现基本上只是将调用传递回业务层，业务层进行实际处理。因此，例如，如果我们有一个如下所示的服务合同：

```
public interface IService
{
    void ServiceMethod1(string a, object b);
    int ServiceMethod2(int a, int b);
} 
```

我们的服务可能看起来很像这样：

```
public class Service : IService
{
    private ServiceBL _serviceBL;

    public Service()
    {
        _serviceBL = new ServiceBL();
    }

    public void ServiceMethod1(string a, object b)
    {
        _serviceBL.ServiceMethod1(a, b);
    }

    public int ServiceMethod2(int a, int b)
    {
        return _serviceBL.ServiceMethod2(a, b);
    }
} 
```

因为这变得相当重复，我想知道是否有一些我可以制作的基类会根据合同自己发出服务方法。我希望代码看起来像这样：

```
public abstract class MagicServiceBase<T>
{
    protected dynamic InterfaceImplementor { get; }

    public MagicServiceBase()
    {
        // Magic that makes the methods defined in T real.
    }
}

public class Service : MagicServiceBase<IService>, IService
{
    protected override dynamic InterfaceImplementor
    {
        get
        {
            return new ServiceBL();
        }
    }
} 
```

有没有办法创建这个，或者我只是想懒得合理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:40:18.990

您应该看看 Agatha ( [http://davybrion.github.io/Agatha/](http://davybrion.github.io/Agatha/) ) 这是一个框架，它消除了对您的服务进行此类设置的要求。

您必须注册消息请求和响应，并且它是相应的处理程序。
您可以装配此框架来封装您需要的所有服务行为，并获得处理逻辑的清晰分离。

一个很好的框架来实现干净的 wcf 服务。您实际上将发送您的请求并接收您的响应，而不是调用 yourService.Methods。

# coldfusion - 只捕获超时异常

> ID：15926038
> 
> 赞同：4
> 
> 时间：2013-04-10T12:36:45.310
> 
> 标签：coldfusion

我只有一些超时异常的处理逻辑。我可以为`cfcatch`标签指定某种类型，让它只捕获超时吗？现在我正在捕获所有异常并在`cfcatch.message`. 看起来很糟糕。此外，我当前的代码可以在消息中捕获一些带有“时间限制”的自定义异常，这实际上不是“超时”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T12:13:46.413

呃，找到了。`<cfcatch type="coldfusion.runtime.RequestTimedOutException">`完美运行。我可以发誓我以前试过这个。不知道我怎么错过了这是有效的。这么笨。

# iphone - 滚动时UIDatePicker的滚轮显示不正确

> ID：15926043
> 
> 赞同：0
> 
> 时间：2013-04-10T12:37:12.047
> 
> 标签：iphone, ios, ipad, ios5, uidatepicker

UIDatePicker 的滚轮在滚动时显示不正确。如果我隐藏 UIDatePicker 控制器或在另一个屏幕中导航，则会出现此问题。

![在此处输入图像描述](https://i.stack.imgur.com/6KxK7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:41:22.017

您可以通过两种方式做到这一点 1\. 使用手势识别器。2.你可以像这样添加目标..

首先在 viewDidLoad 中添加目标。

```
[datePicker addTarget:self action:@selector(valueChanged:) forControlEvents:UIControlEventValueChanged];

- (void)valueChanged
{
   // --- you can hide your picker view here 
   [datePicker setHidden:YES];
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T12:40:31.160

在 viewWillAppear 或 viewDidAppear 中，尝试设置日期，它看起来好像动画已停止，这应该重置位置：

```
[picker setDate:[picker date] animated:NO]; 
```

# batch-file - 如何批量移动第一行文本文件

> ID：15926050
> 
> 赞同：0
> 
> 时间：2013-04-10T12:37:25.313
> 
> 标签：batch-file

请解释一下是否可以以这种方式从文本文件中移动某些行，我想将每一行都作为字符串变量。我想用这个“变量行”做我想要的，所以我需要把这一行从 tf.txt 中删除，之后第二行将是 tf.txt 的第一行，我可以将它用作第一行再次。

```
@echo off

echo abc>tf.txt
echo d>>tf.txt
echo e>>tf.txt

rem only sets(and echoes) 1-st row; i want take 1st,2nd,3rd...
rem for example, first echo number of variable
rem then below, in new line, echo char(acters)

setlocal enabledelayedexpansion

for /l %%a in (1,1,5) do (
    set /a count=%%a 
    echo !count!
    set /p count=<tf.txt
    echo !count!
    rem on this point i need to delete 1-st row of tf.txt
    rem so i think it will echo the second row if first row
    rem doesnt exist at all
    pause
) 
```

我做了一些有用的东西。请给出意见。你喜欢吗？

```
@echo off
rem line taker from txt files
md linetaker
cd linetaker
echo 000000000000000000000000000000000>group.txt
echo 111111111111111111111111111111111>>group.txt
echo 222222222222222222222222222222222>>group.txt
for /f %%x in (group.txt) do (
for /f %%l in ("%%x") do ( echo %%l>>tmp.txt)
move /y tmp.txt "%%x".txt
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:47:08.790

其实很简单。

```
setlocal enabledelayedexpansion
set num=0
for /f %%i in (tf.txt) do (
   set /a num+=1
   set line[!num!]=%%i
)

echo line[1] = %line[1]%
echo line[2] = %line[2]% 
```

根据下面 Aacini 的评论，将其编辑为使用标准数组表示法。

# sql - 使用 UNION 时的 Oracle 类型

> ID：15926051
> 
> 赞同：0
> 
> 时间：2013-04-10T12:37:25.047
> 
> 标签：sql, oracle, union

我目前正在从同一架构中的 2 个 oracle 表中选择数据。这里的问题与类型有关。我的查询如下：

问题是甲骨文告诉我“ORA-01790：表达式必须具有与相应表达式相同的数据类型”并指向字段 EFF 年份。

eff_year 字段是数据库中的 number(4) 类型

report_date 字段是数据库中的日期类型

如何将 report_date 转换为数字？

我试过 TO_NUMBER(report_date) 但这给了我一个错误 ORA-01722: invalid number

```
SELECT 'Texture' MEASURE,
eff_year
FROM condition 
WHERE linear_id='004'
GROUP BY eff_year
UNION
SELECT 'Cracking' MEASURE,
TO_CHAR(report_date, 'YYYY') eff_year
FROM visual 
WHERE linear_id='004'
GROUP BY report_date 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:42:12.087

```
to_number(TO_CHAR(report_date, 'YYYY')) eff_year 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:43:17.687

我会将它们转换为日期（`to_date(eff_year,'YYYY')`并使用普通的 report_date），但使用您的想法：

```
SELECT 'Texture' MEASURE,
eff_year
FROM condition 
WHERE linear_id='004'
GROUP BY eff_year

UNION ALL

SELECT 'Cracking' MEASURE,
to_number(TO_CHAR(report_date, 'YYYY')) eff_year
FROM visual 
WHERE linear_id='004'
GROUP BY TO_CHAR(report_date, 'YYYY') 
```

# java - JAVA的代码度量分析

> ID：15926057
> 
> 赞同：1
> 
> 时间：2013-04-10T12:37:46.213
> 
> 标签：java, testing, code-metrics

你知道任何可用于java代码度量分析的开源工具吗？它应该能够很好地集成到詹金斯中。我正在尝试为我们的项目设置一个完整的测试套件，包括覆盖测试、单元测试、静态代码分析、代码标准检查和代码度量分析。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T12:42:41.990

根据您的需要，最好的选择是声纳，它拥有您所需要的一切以及更多。查看更多信息：http: [//www.sonarsource.org/](http://www.sonarsource.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:07:03.730

开源：Sonar、clover、PMD、findbugs，你也可以试试[JArchitect](http://www.jarchitect.com) ，它对开源贡献者是免费的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:40:13.443

[Clover](http://www.atlassian.com/software/clover/overview)用于测试覆盖率。它与 JUnit 集成，我已将它与 Jenkins 集成。
[Klocwork](http://www.klocwork.com/)用于代码静态分析。

# c# - 动态继承或接口创建

> ID：15926058
> 
> 赞同：1
> 
> 时间：2013-04-10T12:37:49.000
> 
> 标签：c#, .net, reflection

因此，我在无法更改的命名空间中有大量实例类。这些实际上是导出的硒测试，但该细节无关紧要。

每个类都有几个我需要调用的方法。一些方法名是基于类名的。所以方法看起来像

```
public void The[Class]Test{ blah blah} 
```

我有代码来获取所有类的类型列表，如下所示

```
var tests = (from t in Assembly.GetExecutingAssembly().GetTypes()
    where t.IsClass && t.Namespace == "SeleniumTests"
    select t).ToList(); 
```

然后我想遍历这些类型并执行该方法。

我无法弄清楚如何使用动态创建的对象动态继承测试类，该对象具有我想要调用的覆盖或替代方法。

然后我尝试使用 expando 对象并复制类的位。这也不起作用，因为我需要的一些属性保留在类实例中并且是私有的，因此只能在我需要覆盖的方法中设置。

所以基本上我认为我需要一些方法来修改名称在运行时已知的类的行为。

编辑

我要覆盖的方法在实例上设置私有属性。基类看起来像这样。

```
 [TestFixture]
    public class Login
    {
        private IWebDriver driver;

        [SetUp]
        public void SetupTest()
        {
            driver = new FirefoxDriver();

        }

        [TearDown]
        public void TeardownTest()
        {

        }

        [Test]
        public void TheLoginTest()
        {

        }

        } 
```

我想将 FirefoxDriver() 更改为 Chrome 或 IE 驱动程序。

所以我试过了

```
static void Main(string[] args)
{

    var tests = (from t in Assembly.GetExecutingAssembly().GetTypes()
        where t.IsClass && t.Namespace == "SeleniumTests"
        select t).ToList();

    foreach (var t in tests)
    {

        var test = (dynamic)Activator.CreateInstance(t);

        test.driver = new ChromeDriver();

        test.SetupTest();
        t.GetMethod(String.Format("The{0}Test", t.Name)).Invoke(test, null);
        test.TeardownTest();
 }

    Console.ReadLine();
} 
```

但这不起作用，因为驱动程序属性是私有的。这意味着我认为我需要重写 SetupTest() 方法。如果我可以从 Login 继承，那会很好，但是当仅通过反射知道类型时，我不确定如何执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:24:00.233

您已经通过反射获取并调用了一个方法，因此设置一个字段也没什么大不了的：

```
foreach (var t in tests)
{
    var test = (dynamic)Activator.CreateInstance(t);

    test.SetupTest();
    t.GetField("driver", BindingFlags.NonPublic | BindingFlags.Instance).SetValue(test, new ChromeDriver());
    t.GetMethod(String.Format("The{0}Test", t.Name)).Invoke(test, null);
    test.TeardownTest();
 } 
```

# ios - 在不访问 UDID 的情况下发送推送通知

> ID：15926060
> 
> 赞同：3
> 
> 时间：2013-04-10T12:37:49.173
> 
> 标签：ios, apple-push-notifications, udid

我知道 Apple 开始拒绝访问 UDID 的应用程序。那么我们如何在不访问 UDID 的情况下发送推送通知。可能吗？如果是，请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T12:43:30.863

设备令牌（由 APNS 使用）和[UDID](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instp/UIDevice/uniqueIdentifier)是两个不同的东西。他们彼此没有任何关系。

`application:didRegisterForRemoteNotificationsWithDeviceToken:`您在应用程序委托的方法中获取推送通知的设备令牌。

该[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)指出以下内容：

> 设备令牌与 UIDevice 的 uniqueIdentifier 属性不同，因为出于安全和隐私原因，它必须在设备被擦除时更改。

# haskell - 设置 Yesod DeveloperOpts

> ID：15926063
> 
> 赞同：2
> 
> 时间：2013-04-10T12:37:57.393
> 
> 标签：haskell, yesod

我正在做一个 Yesod 项目，其中包括一些广泛的数据库计算。所需的计算时间可能会导致开发模式下出现“App not ready, please refresh”消息，然后自动刷新。这反过来会导致重新启动数据库评估并阻止它完成。

这个问题似乎可以通过增加在 Devel.hs ( [https://github.com/yesodweb/yesod/blob/master/yesod/Devel.hs](https://github.com/yesodweb/yesod/blob/master/yesod/Devel.hs) ) 中的函数 reverseProxy 中使用的 DevelOpts proxyTimeout 来避免。更改开发选项似乎是一个相当普遍的过程。但是，我还没有找到在我的 Yesod 项目中修改默认值的方法。

为特定项目设置 Yesod DevelOpts 的常用方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:49:16.737

这些由命令行参数设置，运行`yesod devel --help`以获得更多信息。在这种情况下，您希望使用`-x`.

# python - 子进程中的 Pygame 混合器不起作用

> ID：15926065
> 
> 赞同：3
> 
> 时间：2013-04-10T12:38:02.490
> 
> 标签：python, audio, subprocess, pygame, mixer

Debian 操作系统。我调用一个子进程

```
subprocess.Popen([sys.executable, "/home/pi/play_sound.py"]) 
```

在 play_sound.py 中，我播放声音：

```
def load_sound(url):
    class NoneSound:
        def play(self): pass
    if not pygame.mixer or not pygame.mixer.get_init():
        return NoneSound()
    fullname = url
    try:
        sound = pygame.mixer.Sound(fullname)
    except pygame.error, message:
        print 'Cannot load sound:', fullname
        raise SystemExit, message
    return sound 
```

问题是当我单独运行 play_sound.py 时，它工作正常。但是当我将它称为另一个 py 文件的子进程时，它不会播放声音。

# google-app-engine - SDK 升级后的 Google App Engine 本地数据存储

> ID：15926070
> 
> 赞同：0
> 
> 时间：2013-04-10T12:38:12.557
> 
> 标签：google-app-engine, google-cloud-datastore

我刚刚升级到 SDK 1.7.7，我的应用程序无法再访问本地数据存储。我用谷歌搜索了一下，发现这通常发生在升级 SDK 时。

我似乎找不到任何可以让我保留现有数据的解决方案。我已经在我的数据存储中设置了大量不想重新创建的测试数据。有什么方法可以将本地数据存储中的数据从一个 SDK 版本转换/迁移到另一个版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:07:58.037

The steps I use are:

1) make a remote_api connection [https://developers.google.com/appengine/articles/remote_api](https://developers.google.com/appengine/articles/remote_api)

something like

```
 static RemoteApiOptions options;
    options = new RemoteApiOptions().server("localhost", 8888).credentials("", ""); // password doesn't matter

    RemoteApiInstaller installer = new RemoteApiInstaller();
    installer.install(options); 
```

2) fetch my data (this is for me with Objectify, but it'd be how you'd normally do it)

```
 UserDAO udao = new UserDAO(false);
            Query<UserOFY> qu = udao.ofy().query(UserOFY.class); 
```

3) persist my data to the harddrive

something like

```
 FileOutputStream fileOut = new FileOutputStream(LOCAL_AE_BACKUPS_USER + "/" + USERS_FROM_LOCAL_BACKUP + "_" + u.getNickName());
            ObjectOutputStream out = new ObjectOutputStream(fileOut);
            out.writeObject(u);
            out.close(); 
```

then I just do the reverse after upgrading the version.

1) read the persisted data on my hard drive

2) make a connection to the local datastore

3) persist the data to the new version of the local datastore

# c# - 版本控制实体框架实体

> ID：15926071
> 
> 赞同：1
> 
> 时间：2013-04-10T12:38:12.870
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-5

我们正在寻求为我们的 EF Code first 数据模型实施版本控制方案。以以下两个模型为例：

```
public class Question
{
    public int Id { get; set; }
    public int Version { get; set; }
    public string Text { get; set; }

    public ICollection<Alternative> Alternatives { get; set; }
}

public class Alternative
{
    public int Id { get; set; }
    public int Version { get; set; }
    public string Text { get; set; }
    public bool IsCorrect { get; set; }

    public int QuestionId { get; set; }
    public virtual Question Question { get; set; }
} 
```

这里的想法是一个问题有多种选择。我们想将替代链接到 question's `Id`，但不是它的`Version`。同样，一个问题可以引用所有`QuestionId`与其相等的替代方案`Id`。

如何最好地建模？随意更改模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:56:52.897

我看了几分钟，可能完全错过了船，但这可能是一个选择：

```
public class Question
{
    public int QuestionId { get; set; }
    public QuestionText Primary { get; set; }
    public ICollection<QuestionText> Alternatives { get; set; }
}

public class QuestionText
{
    public int QuestionTextId { get; set; }
    public ICollection<QuestionTextVersion> Versions { get; set; }
    public QuestionTextVersion CurrentVersion { get; set; }
}

public class QuestionTextVersion
{
    public int QuestionTextVersionId { get; set; }
    public int Version { get; set; }
    public string Text { get; set; }
} 
```

这里的理论是问题和备选方案都组合在一个对象中。问题文本存储在版本中，您应该能够从选定的备选方案中访问当前版本。您可以更改`Question`对象以提供对所有`QuestionText`对象的访问权限或仅提供对替代项的访问权限。

再说一次，我可能完全错过了你的观点`Alternative`。

# android - Android 无法运行 UI 测试并显示“uiautomator：权限被拒绝”错误消息

> ID：15926073
> 
> 赞同：2
> 
> 时间：2013-04-10T12:38:14.090
> 
> 标签：android, android-uiautomator

我的环境是：

安卓手机：HTC Desired Z

安卓版本：2.3.3

当我使用网络方法时：http: [//developer.android.com/tools/testing/testing_ui.html](http://developer.android.com/tools/testing/testing_ui.html)

使用命令“adb shell uiautomator runtest LaunchSettings.jar -c com.uia.example.my.LaunchSettings”运行 UI 测试

它显示错误消息“uiautomator：权限被拒绝”。

哪位朋友告诉我错误原因？？？

谢谢！~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:45:57.613

请你仔细检查几件事吗？

*   您将测试部署到哪个版本的 Android？UIAutomator 仅在 API 级别 16 或更高版本（Android 4.1 和 4.2）的设备上可用，因此它不应该在 2.3.3 设备上可用。在命令行上运行以下命令以获取安装的 Android 版本：`adb shell grep ro.build.version.sdk= system/build.prop`结果应类似于`ro.build.version.sdk=17`Here is a StackOverflow article on getting the version of Android using adb shell [Getting Android SDK version of a device from command line](https://stackoverflow.com/questions/8063461/getting-android-sdk-version-of-a-device-from-command-line)
*   `adb shell uiautomator runtest LaunchSettings.jar -c com.uia.example.my.LaunchSettings`运行命令时得到的确切错误消息是什么？

我使用运行 2.3.3（API 级别 10）的 AVD 进行了测试，并运行命令来构建、部署，然后运行来自[http://developer.android.com/tools/testing/testing_ui 的 Android 示例中的 UI Automator 测试。 html](http://developer.android.com/tools/testing/testing_ui.html) 我得到的错误信息和你报告的不一样：我得到的`uiautomator: not found`不是`permission denied`.

`uiautomatorviewer`作为建议，当您的设备连接时尝试从命令行运行（您可以使用`adb devices`命令检查 - 应该列出您设备的序列号）。当我尝试使用 2.3.3 对 AVD 运行 uiautomatorviewer 时，当我尝试获取屏幕快照时，它明确告诉我“UI Automator 需要具有 API 级别 16 的设备”

所以总而言之，AFAIK 你需要 uiautomator 和运行 API 级别 16 或更高版本的设备。实际上，UI Automator 在 API 级别 16（Android 4.1）上似乎存在问题，并且在运行 Android 4.2.1（API 级别 17）的设备上效果最好。

# java - 如何将对象的给定值存储给他们将它们存储在列表中

> ID：15926075
> 
> 赞同：0
> 
> 时间：2013-04-10T12:38:15.570
> 
> 标签：java

```
public class Term {
    private int coe;//Stores coefficient 
    private int exp;//Stores exponent

    public Term(int coef, int expo)
    {
        coef = coe;
        expo = exp;
    }

    public int getCoe()
    {
        return coe;
    }

    public int getExp()
    {
        return exp;
    }
} 
```

我正在尝试将给定的对象传递给`ints`对象`a`，然后将它们添加到`list`被`Term`调用的对象中`poly`。例如，让`coeff = 3`和`expo = 2`。我想将 3 和 2 存储到 list call`poly`中。但是，我的对象`a`没有存储 3 和 2，两个参数都显示为 0。

```
public void insert(int coeff, int expo) {
    Term a = new Term(coeff, expo);// Creates a new Term object with passed #'s

    poly.add(a);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:40:44.757

在您的构造函数中，`Term`您没有将字段分配给参数，而是在做相反的事情！试试`coe = coef`吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:08:48.893

将构造函数更改为

```
public Term(int coef, int expo)
    {
         coe =coef;
         exp =expo;
    } 
```

你正在做相反的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:42:38.027

取决于您对构造函数中传递的值所做的事情。

如果您希望您的对象具有参数，您的构造函数应该这样做

```
public Term(int coeff, int expo){
     this.coeff = coeff;
     this.expo = expo;

     //Some thing else that you would like to do
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T12:43:44.493

要回答这个问题，您需要向我们展示如何定义术语和策略。

如果将给构造函数的两个 int 存储在 Term 的内部变量中，它应该可以工作。

# c++ - boost::asio 接受器在 EOF 之后重新打开和异步读取

> ID：15926077
> 
> 赞同：0
> 
> 时间：2013-04-10T12:38:19.763
> 
> 标签：c++, sockets, boost, c++11, boost-asio

可悲的是，由于我无法理解 boost::asio::ip::tcp::acceptor 应该如何使用，因此我的开发停滞不前。TCPReader 类被设计为单例，并且标头将以下内容声明为私有。

```
void runInThread();

void read_handler(const boost::system::error_code &ec, std::size_t bytes_transferred);

void accept_handler(const boost::system::error_code &ec);

boost::asio::io_service io_service;
boost::asio::io_service::work runningService;
boost::asio::ip::tcp::socket sock;
boost::asio::ip::tcp::acceptor acceptor;

bool isConnected; 
```

<<

```
TCPReader::TCPReader() : sock(io_service),
                        runningService(io_service),
                        acceptor(io_service, boost::asio::ip::tcp::endpoint(boost::asio::ip::tcp::v4(), TCPPort)){
    this->isConnected = false;

    acceptor.async_accept(sock, boost::bind(&TCPReader::accept_handler, this, boost::asio::placeholders::error));
    boost::thread thread(boost::bind(&TCPReader::runInThread, this));
}

 void TCPReader::runInThread(){
    io_service.run();
} 
```

accept_handler 比触发 read_handler 并且在 read_handler 收到 EOF 或其他错误之前，一切都像魅力一样工作。我想要的是让接受器恢复到可以接受连接的状态，就像它在初始化后所做的那样。我尝试了`close()`or`cancel()`使用以下`open()`, `listen()`and `async_accept`（就像在构造函数中一样）。但这一切似乎都不起作用。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T16:53:08.480

错误发生在对 的操作中`sock`，而不是`acceptor`。因此，`acceptor`的状态不应受到影响。它只需要在初始关闭状态下启动`async_accept`操作。`sock`

这是一个在端口 12345 上侦听的完整基本示例：

```
#include <iostream>

#include <boost/array.hpp>
#include <boost/asio.hpp>

using boost::asio::ip::tcp;

class tcp_reader
{
public:
  tcp_reader(boost::asio::io_service& io_service)
    : io_service_(io_service),
      socket_(io_service),
      acceptor_(io_service, 
                tcp::endpoint(tcp::v4(), 12345))
  {
    accept_connection();
  }

private:

  void accept_connection()
  {
    std::cout << "accepting connection" << std::endl;
    // Verify socket is in a closed state.
    socket_.close();
    // On success or failure, acceptor will open() socket_.
    acceptor_.async_accept(socket_,
      boost::bind(&tcp_reader::handle_accept, this,
                  boost::asio::placeholders::error));
  }

  void handle_accept(const boost::system::error_code& error)
  {
    // On error, return early.
    if (error)
    {
      std::cout << "handle_accept: " << error.message() << std::endl;
      return;
    }

    // Start reading from socket.
    read();    
  }

  void read()
  {
    std::cout << "reading from socket" << std::endl;
    async_read(socket_, boost::asio::buffer(buffer_),
      boost::asio::transfer_at_least(1),
      boost::bind(&tcp_reader::handle_read, this,
                  boost::asio::placeholders::error,
                  boost::asio::placeholders::bytes_transferred));
  }

  void handle_read(const boost::system::error_code& error,
                   std::size_t bytes_transferred)
  {
    // On error, go back to listening for a new connection.
    if (error)
    {
      std::cout << "handle_read: " << error.message() << std::endl;
      accept_connection();
      return;
    }

    // Output read data.
    std::cout.write(&buffer_[0], bytes_transferred);

    // Read data, so read some more.
    read(); 
  }

private:
  boost::asio::io_service& io_service_;
  tcp::socket              socket_;
  tcp::acceptor            acceptor_;
  boost::array<char, 1024> buffer_;
};

int main()
{
  boost::asio::io_service io_service;
  tcp_reader reader(io_service);
  io_service.run();
} 
```

使用时，我在一个终端上运行它，并连接到端口 12345，发送​​消息，终止连接，然后重新建立连接。服务器控制台输出如下：

```
[twsansbury@localhost]$ ./a.out
接受连接
从套接字读取
你好
从套接字读取
再见
从套接字读取
handle_read：文件结束
接受连接
从套接字读取
哦哦不
从套接字读取
handle_read：文件结束
接受连接
ctrl + c
```

和客户端控制台：

```
[twsansbury@localhost]$ nc 127.0.0.1 12345
你好        
再见
ctrl + c
[twsansbury@localhost]$ nc 127.0.0.1 12345
哦哦不
ctrl + c
```

* * *

需要注意的一个行为细节是，尽管`async_accept`操作可能不会在 上挂起，但`acceptor_`连接仍在排队。因此，如果一个连接已经被接受，并且另一个客户端尝试连接，那么后一个客户端将等待其连接被接受。如果这不是期望的行为，那么接受者需要通过 退出侦听状态`close()`。[这个](https://stackoverflow.com/a/15883510/1053968)答案描绘了状态转换并更详细地描述了一些接受者行为。

# android - 在按钮android中设置图像

> ID：15926079
> 
> 赞同：1
> 
> 时间：2013-04-10T12:38:20.363
> 
> 标签：android, android-button, android-image

嗨，我使用以下代码在按钮中设置了图像。但是我无法向按钮添加多个图像

```
btn.setCompoundDrawablesWithIntrinsicBounds(null, null, null, getResources().getDrawable(R.drawable.red)); 
```

任何人都可以告诉我如何在按钮中设置多个图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:43:52.597

您将错误的参数传递给 setCompoundDrawablesWithIntrinsicBounds ..您需要传递资源 id ，而您将 null 传递给前三个，drawable 传递给第四个..

你需要打电话

```
btn.setCompoundDrawablesWithIntrinsicBounds(R.drawable.left,R.drawable.right,R.drawable.top,R.drawable.left.bottom) 
```

来自安卓文档

> ```
> Sets the Drawables (if any) to appear to the left of, above, to the right of, and below the text. Use 0 if you do not want a Drawable 
> ```
> 
> 那里。Drawables 的边界将设置为它们的内在边界。
> 
> 相关 XML 属性 android:drawableLeft android:drawableTop android:drawableRight android:drawableBottom 参数 left 左侧 Drawable 的资源标识符。top 顶部 Drawable 的资源标识符。right 右侧 Drawable 的资源标识符。底部 Drawable 的资源标识符。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-06-15T06:38:19.587

您可以使用 ImageButton 或在普通按钮中使用背景

```
<Button
 android:layout_width="20dp"
 android:layout_height="20dp"
 android:background="@drawable/noproductimage"
 /> 
```

# javascript - 使用 PrimeFaces 进行条件 JavaScript 执行

> ID：15926081
> 
> 赞同：0
> 
> 时间：2013-04-10T12:38:22.040
> 
> 标签：javascript, jsf, primefaces

我在尝试弄清楚如何在登录我正在处理的应用程序时有条件地调用 JavaScript 时遇到了一个最有趣的问题。基本上，我只希望在用户成功登录时显示 JavaScript 弹出消息。

在我的 xhtml 页面中，我有以下测试 JavaScript 函数，然后我有一个 commandButton，如下所示：

```
 <script type="text/javascript">
  function hello() {
    alert("Hello from PrimeFaces calling JavaScript on the page");
  }
</script>

<-- Other html code -->

<p:commandButton id="login" value="Login" update="out" action="#{login.login}" styleClass="button"/> 
```

然后在我的bean中，我有以下代码：

```
 public String login() {

     // Other code

     // return "login" on failure - go back to login.xhtml

     // On success do the following:
     RequestContext context = RequestContext.getCurrentInstance();
     context.execute("hello()");
     return "option" + optNum; // Go on to option?.xhtml where ? = 1, 2, or 3
} 
```

现在我的 JavaScript 函数只应该在屏幕上弹出一条测试消息，但如果我能让它工作，我希望显示一些更有用的东西。

这个想法是，如果登录失败，登录页面会再次显示错误消息，这样可以正常工作。如果登录成功，应用程序将导航到 optNum 给出的页码。这也可以正常工作。但是，在它导航到下一页之前，我希望它显示弹出消息，然后单击 JavaScript 消息中的“确定”，然后它应该导航到该页面。

相反，不会显示弹出窗口，而是直接转到所需的页面，因此它看起来好像在有机会执行 JavaScript 之前导航离开页面。如果我更换，这将得到确认

```
return "option" + optNum;
// by
return ""; 
```

在该方法结束时，弹出消息随即显示而不会尝试导航到下一页，并在单击“确定”后停留在该页面上。但是，由于某种我不明白的原因，有时它会在第二次单击按钮时导航到所需的页面。

在离开页面之前如何获取执行 JavaScript 的代码？将 JavaScript 放在它将导航到的页面或资源中不起作用。

有人知道如何帮助我吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:59:18.383

为什么不能只在用户登陆页面上使用？或者你可以使用 PrimeFaces[效果](http://www.primefaces.org/showcase/ui/effectMessages.jsf)组件`<body onload="hello()">`做得更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:40:13.073

您做错了，您的导航不会在登录时发生，而是实际上是在单击“确定”按钮时发生的。

您可以使用 p:daialog 来显示 JSF 弹出窗口。

```
<p:commandButton id="login" value="Login" update="out" 
    action="#{login.login}" styleClass="button"/>

<p:dialog visible="#{login.loginSuccess}">
 <h:commandButton action="#{navigateToInbox}" value="ok" />
</p:dialog> 
```

……

```
public String login() {

     // Other code

     // return "login" on failure - go back to login.xhtml

if(successfulLogin)
     loginSuccess = true;
} 
```

查看展示以了解如何将对话与 primefaces 一起使用，

[http://www.primefaces.org/showcase/ui/dialog.jsf](http://www.primefaces.org/showcase/ui/dialog.jsf)

# actionscript-3 - 位图绘图，如何为线条添加粗细？

> ID：15926087
> 
> 赞同：0
> 
> 时间：2013-04-10T12:38:40.420
> 
> 标签：actionscript-3, math, graphics, graph, bitmap

以下函数将通过在位图上设置像素来​​绘制正弦波。但是你怎么把线画得更粗呢？无需借助 Graphics API。

```
function drawWave(amp:int, freq:int):void
{
    for (var i:int = 0; i < stage.stageWidth; i++)
    {
        var ang:Number = 2 * Math.PI * freq * i/stage.stageWidth;
        bmd.setPixel(i, yaxis - amp * Math.sin(ang), 0xff0000);
    }
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/HlEwZ.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:01:36.100

试试这个 - 根据需要调整 lineWidth：

```
function drawWave(amp:int, freq:int):void
{
    var lineWidth:Number = 10;
    var shape:Shape = new Shape();
    var g:Graphics = shape.graphics;
    g.lineStyle(lineWidth, 0xFF0000);
    for (var i:int = 0; i < stage.stageWidth; i++)
    {
        var ang:Number = 2 * Math.PI * freq * i/stage.stageWidth;
        var ypos:Number = yaxis - amp * Math.sin(ang);
        if (i==0)
            g.moveTo(i, ypos);
        else
            g.lineTo(i, ypos);
    }
    bmd.draw(shape);
} 
```

将图形绘制到 Shape 对象而不是 BitmapData - 因此您可以利用它提供的抗锯齿功能。然后将整个内容复制到 BitmapData。

有关调整线条外观的更多选项，请参阅[lineStyle(..) 的文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html#lineStyle%28%29)

编辑：

如果你坚持只使用 BitmapData，你可以试试这个：

```
 bmd.drawRect(new Rectangle(i-WIDTH*0.5, yaxis-amp*Math.sin(ang)-HEIGHT*0.5, WIDTH, HEIGHT), 0xff0000); 
```

根据需要替换 WIDTH 和 HEIGHT ，它将绘制矩形而不是单个像素 - 给出更粗的线，但我想不是很漂亮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:56:00.020

如果您希望线条更粗，我建议使用圆形的 BitmapData 而不是使用 setPixel，使用 draw()。

当然，您需要根据圆的大小来偏移圆的绘制位置。- 宽度/2 和 -高度/2

# prolog - 比较事实和输出结果

> ID：15926094
> 
> 赞同：1
> 
> 时间：2013-04-10T12:39:05.857
> 
> 标签：prolog

我是 Prolog 的新手，我正在尝试做一个测验，给用户 3 个问题和每个问题的 3 个选项。在提出每个问题后，将显示 3 个可能的答案选择。用户键入该问题的答案，然后显示下一个问题，并且测验继续进行，直到所有 3 个问题都被询问和回答。

我接下来要做的是将每个用户的答案与该问题和输出的正确答案进行比较，如果用户是对的、错的或跳过了一个问题。我认为我需要将数据库知识中的事实与静态事实进行比较是正确的。我意识到这不是一个真正的问题，但如果有人能给我建议如何最好地实现我的目标，我将不胜感激。我只是困惑。如果需要，将提供更多信息。

```
question(1,'What is the fifth planet of our Solar System?').
question(2,'In what year was George Best born?').
question(3,'What is the capital of Austraila?').

possibleAns(1,[mars,jupiter,saturn]).
possibleAns(2,[1945,1946,1948]).
possibleAns(3,[sydney,canberra,melbourne]).

rightAns(1,jupiter).
rightAns(2,1946).
rightAns(3,canberra).

skip(s).

%Confused as to how best to achieve the comparing and output
check_answer(AnsNo,userChoice):-
    rightAns(AnsNo,Choice),
    userAnswer(AnsNo,userChoice)    

getChoice(ChoiceNo,ChoiceList):-
    write('Choose from'),nl,
    write(ChoiceList),nl,
    read(Choice),
    (member(Choice,ChoiceList);skip(Choice)),
    %userAnswer will compare with rightAnswer
    assert(userAnswer(ChoiceNo,Choice)).
getChoice(ChoiceNo,ChoiceList):-
    writeln('Illegal Choice'),
    getChoice(ChoiceNo,ChoiceList).

//check if the question has been asked
//if not, write question
//get users choice and move to next question
get_question(PreviousAsked):-
    question(QNum,Text),
    \+ member(QNum,PreviousAsked),
    write(Text),nl,
    possibleAns(QNum,ChoiceList),
    getChoice(QNum,ChoiceList),
    get_question([QNum|PreviousAsked]).

get_question(_).

start_quiz:-
    get_question([]). 
```

* * *

```
Updated
getChoice(ChoiceNo,ChoiceList):-
    write('Choose from'),nl,
    write(ChoiceList),nl,
    read(Choice),
    (member(Choice,ChoiceList);skip(Choice)),
    assert(userAnswer(ChoiceNo,Choice)).
    (   rightAns(ChoiceNo,Choice)
    ->   write('Right!'),nl;
    write('Wrong,'),nl). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:43:34.613

如果可能的话，我们应该避免*assert*和*Retract*，通常我们会得到更简单的程序，更容易理解和调试的奖励。

在您的情况下，您最初可以收集问题 Qs 的列表

```
findall(Q, question(Q,_), Qs) 
```

然后运行一个循环，直到 Qs 为空。*仅*当用户选择*并*以适当的方式回答时才删除问题。

*编辑*我只保留 question/2,possibleAns/2,rightAns/2，并使用此代码

```
show(Q) :-
    question(Q, T),
    possibleAns(Q, As),
    format('~d: ~s ~w~n', [Q, T, As]).

loop([]).
loop(Qs) :-
    maplist(show, Qs),
    (   (read((Q,Y)),
         select(Q, Qs, Rs),
         rightAns(Q, Y)
        ) -> loop(Rs) ; loop(Qs)
    ).

quiz :-
    findall(Q, question(Q,_), Qs),
    loop(Qs). 
```

我明白了

```
?- quiz.
1: What is the fifth planet of our Solar System? [mars,jupiter,saturn]
2: In what year was George Best born? [1945,1946,1948]
3: What is the capital of Austraila? [sydney,canberra,melbourne]
|: 1,mars.
1: What is the fifth planet of our Solar System? [mars,jupiter,saturn]
2: In what year was George Best born? [1945,1946,1948]
3: What is the capital of Austraila? [sydney,canberra,melbourne]
|: 1,jupiter.
2: In what year was George Best born? [1945,1946,1948]
3: What is the capital of Austraila? [sydney,canberra,melbourne]
|: 2,1946.
3: What is the capital of Austraila? [sydney,canberra,melbourne]
|: 3,canberra.
true . 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:41:10.570

由于您已`rightAns/2`在数据库中定义，我建议您`getChoice`像这样比较结果：

```
getChoice(ChoiceNo,ChoiceList):-
    write('Choose from'),nl,
    write(ChoiceList),nl,
    read(Choice),
    (member(Choice,ChoiceList);skip(Choice)),
    (   rightAns(ChoiceNo,Choice)
    ->  write('Right!'),nl
    ;   write('Wrong.'),nl). 
```

如果您不喜欢比较内部答案的想法`getChoice/2`（因为您想尽可能地保留谓词的含义），您可以创建一个简单的规则来这样做：

```
check_answer(AnsNo,userChoice)
    (   rightAns(AnsNo,userChoice)
    ->  write('Right!'),nl
    ;   write('Wrong.'),nl). 
```

我还建议您使用 cut ( `!`) 或任何其他机制来防止测验完成后回溯。

# regex - VB.NET 中的正则表达式

> ID：15926095
> 
> 赞同：2
> 
> 时间：2013-04-10T12:39:05.883
> 
> 标签：regex, vb.net

好的，所以我需要 x,y 形式的任何坐标的正则表达式，其中 x 和 y 是从 1 到 9 的单个数字

我试过这个：

```
If Regex.IsMatch(TextBox1.Text, "[1-9],[1-9]") 
```

但这允许诸如“11,99”之类的值，而我只能在逗号​​的每一侧允许从 1-9 的单个整数。

请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:45:08.133

它匹配表达式，因为如果字符串包含给定正则表达式的至少一个匹配项，则`IsMatch`返回。`true`如果您需要确保整个字符串与给定的表达式匹配，您应该将其重写如下：

```
If Regex.IsMatch(TextBox1.Text, "^[1-9],[1-9]$") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:44:36.083

```
If Regex.IsMatch(TextBox1.Text.Trim(), "^[1-9],[1-9]$") 
```

注意添加`Trim()`以防止空格引起问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:45:01.557

你确定它允许重复吗？我认为之后需要添加 + 或 * 以允许多次出现。您正在寻找的是在此之前的规则，用于定义它是字符串的开头，并在字符串的结尾

# mysql - Mysql 分析项目和选择匹配的配置文件

> ID：15926096
> 
> 赞同：0
> 
> 时间：2013-04-10T12:39:06.630
> 
> 标签：mysql, select, profiling, match

是否有有效的算法来确定项目配置文件并通过查询选择匹配的配置文件？

例如

```
TABLE MEN
id name
1  man1
2  man2
3  man3

TABLE PROPERTIES
id  name
1   health_points
2   strenght
3   speed

TABLE MEN_PROPERTIES
id  man_id  property_id  property_counter
1   1       1            1000
2   1       2            100
3   1       3            50
4   2       1            100
5   2       2            200
6   2       3            100
7   3       1            100
8   3       2            10
9   3       3            5 
```

这表示

```
man1 {
    health_point:1000,
    strenght:100
    speed:50
}

man2 {
    health_point:100,
    strenght:200
    speed:100
}

man3 {
    health_point:100,
    strenght:10
    speed:5
} 
```

假设我正在研究 man_1，我们直观地了解它的配置文件与 man_3 配置文件的匹配。我希望 mysql 返回 man_3 作为与 man_1 配置文件匹配的配置文件。

实现结果的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:12:45.677

```
SELECT  x.*
FROM    
        (
            SELECT  a.ID, 
                    a.Name,
                    MAX(IF(c.Name = 'health_points', b.property_counter, NULL)) health_points,
                    MAX(IF(c.Name = 'strenght', b.property_counter, NULL)) strenght,
                    MAX(IF(c.Name = 'speed', b.property_counter, NULL)) speed
            FROM    Men a
                    INNER JOIN Men_Properties b
                        ON a.ID = b.man_ID
                    INNER JOIN Properties c
                        ON b.Property_ID = c.ID
            WHERE   a.ID <> 1
            GROUP   BY a.ID, a.Name
        ) x
        CROSS JOIN
        (
            SELECT  a.ID, 
                    a.Name,
                    MAX(IF(c.Name = 'health_points', b.property_counter, NULL)) health_points,
                    MAX(IF(c.Name = 'strenght', b.property_counter, NULL)) strenght,
                    MAX(IF(c.Name = 'speed', b.property_counter, NULL)) speed
            FROM    Men a
                    INNER JOIN Men_Properties b
                        ON a.ID = b.man_ID
                    INNER JOIN Properties c
                        ON b.Property_ID = c.ID
            WHERE   a.ID  = 1
            GROUP   BY a.ID, a.Name
        ) y
WHERE   (x.health_points * 1.0 / y.health_points) = (x.strenght * 1.0 / y.strenght) AND
        (x.strenght * 1.0 / y.strenght) = (x.speed * 1.0 / y.speed) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/e094e/5)

# java - 将 KeyListener 添加到自定义对象

> ID：15926100
> 
> 赞同：0
> 
> 时间：2013-04-10T12:39:19.710
> 
> 标签：java, swing, awt, keylistener

我正在为我们的游戏重构大量代码，以使对象耦合尽可能不存在（以便于测试和未来的实现）。目前，我的 JFrame 侦听键，将其发送到 eventmanager 类，该类再次需要对每个对 keyinput 执行操作并调用这些对象的方法的对象的引用。

保留响应对象内的键事件的责任似乎是一个好主意，例如，这将允许我更改当前屏幕并让新屏幕表现不同而无需检查不同的全局状态（如切换到游戏菜单）。

但我不知道如何为我的自定义对象实现 keylistener，它似乎必须是一个 swing/awt 组件。如何将 KeyListener 添加到自定义对象？我知道如何创建自定义事件和自定义侦听器，但不知道如何通过这些方法捕获键盘输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:45:57.260

不要使用`KeyListener`. 而是使用 Swing 键绑定：

```
javax.swing.JComponent.registerKeyboardAction(ActionListener, KeyStroke, int)
javax.swing.JComponent.getInputMap(int)
javax.swing.JComponent.getActionMap() 
```

查看教程：[http ://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:48:39.930

*   这就是为什么实施 KeyBindings 的原因

    1.  最可扩展的抽象（有或没有寻找焦点到具体的 JComponents）

    2.  输出可以是 Swing Action（相同的抽象、可管理、可扩展）

    3.  在 Swing 中绘画的最佳方法

    4.  Swing 将 KeyBindings 用于内部命令和快捷方式

*   另一种方法是使用 AWTEventListener （鼠标和键事件），

    1.  但我将用于复杂的 key_shortcuts

    2.  同时按下三个以上的键

    3.  [检测字符序列](https://stackoverflow.com/questions/9610386/consume-typed-key-by-implements-keybindings)

    4.  使用 OpenGL/CL 在 AWT 中进行绘制

    5.  特殊情况下，API 中的 KeyBindings、KeyListener 或实现的通知器不是正确的侦听器

*   我的类似问题[如何将任何侦听器添加到图标](https://stackoverflow.com/questions/14253786/mouseevents-and-icon-imageicon)

# javascript - 隐藏浏览器的地址栏（弹出）

> ID：15926105
> 
> 赞同：55
> 
> 时间：2013-04-10T12:39:38.290
> 
> 标签：javascript

我必须隐藏浏览器的地址栏。我正在使用这段代码：

```
var winFeature =
        'location=no,toolbar=no,menubar=no,scrollbars=yes,resizable=yes';
window.open('Result.html','null',winFeature); 
```

在许多解决方案中，只是`location=no`属性可以隐藏地址栏（在 IE 和 Chrome 中）。但是，这对我不起作用（即使在 IE 和 Chrome 中）。

最后，我找到了[一篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms536651%28VS.85%29.aspx)，描述了如何`location=no`简单地*隐藏后退/前进/停止导航按钮，并使地址栏只读*。

**是否有任何解决方案可以通过忽略上面的 MSDN 文章来隐藏整个地址栏？** 我正在 IE 和 Google Chrome 中进行测试。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-04-10T12:42:51.887

> 真相是什么？

Microsoft 描述其浏览器行为的文档是正确的。

> 有没有办法隐藏地址栏？

不。如果你可以隐藏它，那么你可以使用 HTML/CSS 来制作一个看起来像普通地址栏的东西。然后，您可以在其中输入不同的地址。然后，您可以欺骗人们认为他们在不同的站点上并输入他们的密码。

向他们隐瞒用户的位置是不可能的，因为他们知道自己的位置对于安全至关重要。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-05-17T07:40:35.820

由于安全限制，这在现代浏览器中不再可能。

官方（-ish）来源：

*   [火狐](https://developer.mozilla.org/en-US/docs/DOM/window.open#Toolbar_and_chrome_features)

    > 在 Firefox 3 中，dom.disable_window_open_feature.location 现在默认为 true，从而强制显示位置栏，就像在 IE7 中一样。有关详细信息，请参阅错误 337344。

*   [Internet Explorer 7 及更高版本](http://msdn.microsoft.com/en-us/library/ms536651%28VS.85%29.aspx)

    > 在 Internet Explorer 6 中，位置指定是否显示地址栏。

    （暗示行为以 IE6 结尾）

*   [铬/铬](https://code.google.com/p/chromium/issues/detail?id=81506)

    > Chrome 会忽略这些工具栏隐藏参数。您还会注意到，现代浏览器正朝着不将其隐藏为安全/反网络钓鱼措施的方向发展。另请参阅[https://bugzilla.mozilla.org/show_bug.cgi?id=337344](https://bugzilla.mozilla.org/show_bug.cgi?id=337344)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-08-09T14:41:14.730

寻找相同的，我唯一能做的就是

## 在应用模式下启动**Google Chrome**

```
Chrome.exe --app="<address>" 
```

从运行提示。例子：

```
Chrome.exe --app="http://www.google.com" 
```

## **在Mozilla Firefox**中隐藏地址栏

 **在地址栏输入`about:config`，搜索：

```
dom.disable_window_open_feature.location 
```

并将其设置为`false`

因此，当您打开一个弹出窗口时，它将在隐藏地址栏的情况下启动。例如：

```
window.open("http://www.google.com",'','postwindow'); 
```

[![没有位置栏的火狐](https://i.stack.imgur.com/Y7APL.png)](https://i.stack.imgur.com/Y7APL.png)

[![应用模式下的 Chrome](https://i.stack.imgur.com/59GbX.png)](https://i.stack.imgur.com/59GbX.png)

现在，我希望用 Microsoft Edge 做一些类似的事情，我还没有找到任何关于这个浏览器的东西。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-04-10T12:43:08.287

每个浏览器都不一样。

几年前，你的尝试是对的。但如今，浏览器供应商将无法看到浏览器地址栏（出于网络钓鱼原因）视为一种安全风险，因此他们（或大多数人）决定始终显示浏览器地址栏。在我看来这很好。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-11-27T04:58:51.697

它不可能隐藏浏览器的地址栏。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-10T12:42:09.737

没有明确的方法可以做到这一点。JS 可能有 API，但浏览器供应商可能选择不实现它或以其他方式实现它。

此外，据我所知，Opera 甚至提供了用户偏好以防止 JS 进行此类更改，例如移动窗口、更改状态栏内容等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-18T14:27:19.457

您可能无法隐藏它，但如果您正在寻找额外的空间，我所做的并且似乎工作是一件非常简单的事情，**地址栏**的高度为 60px，所以这是我的解决方案。

```
@media only screen and (max-width: 1024px){ // only from ipads down
  body{
    padding-bottom: 60px; // push your whole site same height upwards. ;)
  }
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-10-12T13:04:20.407

您可以使用 Visual Basic 来完成，在表单上放置一个 Webbrowser 控件，加载一个打开弹出窗口的 html，`Location=no`它将打开一个没有地址栏的新浏览器。可能不是你要找的东西，只是想把它扔进去:)

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2015-09-21T19:02:32.907

在构建 20.10240.16384.0 的 Edge 浏览器中，您可以通过在 window.open 功能中设置 location=no 来隐藏地址栏。

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2016-02-03T14:30:08.523

这就是我对弹出窗口的处理方式，尽管它仅适用于 IE11，而不适用于 Chrome——尚未在 Firefox 中测试。

```
window.open(url, title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no'); 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2018-06-19T06:19:55.860

你可以让网页向下滚动到你看不到地址栏的位置，如果用户滚动，页面应该回到你设定的位置。这样，移动浏览器在向下滚动时，将尝试为您提供全屏体验。所以它会隐藏地址栏。我不知道代码，其他人可能会发布代码。**

# java - 如何使用属性文件填充 JDBC 连接字符串详细信息

> ID：15926108
> 
> 赞同：0
> 
> 时间：2013-04-10T12:39:50.713
> 
> 标签：java, oracle, properties-file

我有定义带有驱动程序名称、主机、模式和其他详细信息的 JDBC 连接字符串的代码。我想通过从属性文件中填充这些值来通用化创建此连接字符串的过程。

```
String url = "jdbc:oracle:thin:@//location.tcs.com:1520/ndrc.retg/com";
Properties props = new Properties();
props.setProperty("user", "scott");
props.setProperty("password", "Mylife"); 
```

但我不知道该怎么做……谁能帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:47:56.550

```
 Properties jdbc; 
 String url ;

 private static void loadProperties(String path)
    {
        Properties props = new Properties();
        java.io.InputStream in = getClass().getResourceAsStream(path);
        try
        {
            props.load(in);
        }
        catch(IOException e)
        {

        }
        jdbc = props;
    }

 private void setProps() {
     url = jdbc.getProperty("CONNECTIONSTRING")
 }

 public static void main (String[] args) throws Throwable {
     Connection conn = DriverManager.getConnection(loadProperties(args[0]));
 } 
```

# vb.net - 想要在部署期间使用我的 Visual Basic 项目分发 PDF 文件

> ID：15926111
> 
> 赞同：1
> 
> 时间：2013-04-10T12:39:59.870
> 
> 标签：vb.net, installation, vb.net-2010

我有 Visual Basic（Visual Studio 专业版，.NetFrameWork 4.0） 我想包含并调用 PDF`Button_Click_Even`我包含 MyPDF.pdf ，`Resources`然后我点击链接并调用为：

> Process.Start("LinkTo\MyPDF.pdf")

但这没关系并且可以工作，就像在我自己​​的 PC 上一样，但是当我在另一台 PC 上安装它时（或者我从指定的链接中替换 PDF），所以它无法打开`MyPDF.pdf`

所以我的问题是我在安装过程中做了什么`MyPDF.pdf`也安装在用户计算机上，我为此使用了哪些代码？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:16:43.687

首先，在解决方案资源管理器中按下 pdf 文件。该文件的属性应如下所示：

```
Build Action: Content 
Copy to output directory: Copy always 
```

用户计算机中文件的路径将是`Application.StartupPath & "\Resources\MyPDF.pdf"`

不确定我没有忘记一些东西，所以告诉我它是否有效:)

* * *

**编辑：** 我看到很多人都遇到了这个问题，所以这是我所知道的在 Visual Studio 中将文件与 .net 程序一起部署的最简单方法：

1.  将文件拖放到解决方案资源管理器
2.  在解决方案资源管理器中按下文件并将其属性修改为：

    > 构建动作：内容；
    > 复制到输出目录：始终复制

3.  要在代码中使用的文件的路径将是`Application.StartupPath & "\filename.txt"`

我认为有一种方法可以在没有 Application.StartupPath 的情况下做到这一点，这可能会以某种方式导致问题，但我不知道如何

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:15:38.673

哇！！！太好了，最后我可以在其他机器上打开任何文件
我是通过普通方法完成的，所以我失败了我将为那些想要学习的人解释：
`1)=`我通过单击属性添加 PDF 文件`solution explorer`，然后选择`Resources`资源我添加了“添加现有项目”所以 PDF 被添加到我的项目中的“ `Resources`”文件夹中

`2)=`之后，我在解决方案资源管理器中单击 PDF 并将构建操作更改为：内容（即使没有也有效）并复制到输出目录到：始终复制（如您所建议的 :)）

`3)=`所以出了什么问题，实际上编译器在文件夹外创建文件`bin`夹，我们都只粘贴`Release`文件夹（当我们部署时，我实际上这样做了哈哈），所以我只是剪切（Ctrl+X）`Resource`文件夹并粘贴到`Release`文件夹中，并通过以下代码调用：

> Process.Start("Resources\MyPDF.pdf")

我确定如果我们将 PDF 文件直接复制到 Release 文件夹中，那么这也适用于以下代码：

> Process.Start("MyPDF.pdf")

我相信这将对那些正在寻找它的人有所帮助！
谢谢帮助我的人。贾扎卡拉

# xml - 如何通过 JAXB 解析包含命名空间的 xml

> ID：15926114
> 
> 赞同：1
> 
> 时间：2013-04-10T12:40:01.110
> 
> 标签：xml, namespaces, jaxb

我正在尝试通过包含 xmlns 属性的 JAXB 解析 xml。如果我这样解析 xml，它会显示`NullPointerException`. 但是，如果我删除命名空间标签和 xmlns 属性，那么它工作正常。示例xml如下：

```
<?xml version="1.0" encoding="utf-8"?>

<database xmlns="http://www.Example/Database" xmlns:layout="http://www.Example/Layouter">
    <namespace name="X1">
        <layout:record name="My_Layout" src="screen1.layout" />
    </namespace>

    <LayoutGroup xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:xsd="http://www.w3.org/2001/XMLSchema" LayoutGroupID="ID_1">
    </LayoutGroup>
</database> 
```

我的示例代码如下：

```
@XmlRootElement(name = "database")
public class database {

    private LayoutGroup layoutGrp;

    @XmlElement(name = "LayoutGroup")
    public void setLayoutGrp(LayoutGroup gp) {
        layoutGrp = gp;
    }

    public LayoutGroup getLayoutGroup() {
        return layoutGrp;
    }

} 
```

另一类：

```
@XmlRootElement (name="LayoutGroup")
public class LayoutGroup {

    String id;
    @XmlAttribute (name="LayoutGroupID")
    public void setId(String id)
    {
        this.id = id;
    }
    public String getId()
    {
        return id;
    }
} 
```

这是我的主要方法：

```
public static void main(String[] args) {

    database db = JAXB.unmarshal(new File("./res/test.xml"),database.class);
    System.out.println("Layout id is: "+db.getLayoutGroup().getId());
} 
```

有人可以帮忙解析原始的xml吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:47:09.373

由于您正在为您的类提供一个具有命名空间范围的 XML，因此您还应该在接收类中声明它。

将此行添加到您的班级顶部：

```
@XmlRootElement (name="database") 
@XmlType(namespace="http://www.Example/Database")
public class Database { 
```

如果它仍然给出错误，请尝试在 LayoutGroup 元素中添加命名空间定义并查看它是否有效：

```
@XmlElement (name="LayoutGroup", namespace="http://www.Example/Database")
public void setLayoutGrp(LayoutGroup gp)
{
    layoutGrp = gp;
} 
```

# android - 在 asmack 中将项目发送到 pubsub 节点

> ID：15926117
> 
> 赞同：3
> 
> 时间：2013-04-10T12:40:10.730
> 
> 标签：android, xmpp, asmack

我正在开发一个 android 聊天客户端应用程序，并且我正在使用 asmack 来实现 XMPP。
我能够连接到我的 XMPP 服务器。我需要将聊天消息发送到我订阅的特定节点。
我使用以下代码来获取消息

```
PubSubManager mgr = new PubSubManager(con);
LeafNode node = mgr.getNode("mynode");
node.subscribe(jid) 
Collection<? extends Item> items = node.getItems(); 
```

如何向该节点发送消息/聊天？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:08:50.973

使用任一

```
node.send(); 
```

或者

```
node.publish(); 
```

您可以在[文档](http://www.igniterealtime.org/builds/smack/docs/latest/documentation/extensions/index.html)中找到示例。

# .net - 抗锯齿模式的区别？

> ID：15926123
> 
> 赞同：11
> 
> 时间：2013-04-10T12:40:23.220
> 
> 标签：.net, vb.net, graphics, system.drawing, antialiasing

这两种抗锯齿模式有区别吗？

```
e.Graphics.SmoothingMode = Drawing2D.SmoothingMode.AntiAlias

e.Graphics.SmoothingMode = Drawing2D.SmoothingMode.HighQuality 
```

我已经测试了这两种方法，看不出有什么区别。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-10T12:42:06.463

没有区别。请参阅[http://msdn.microsoft.com/en-us/library/z714w2y9.aspx](http://msdn.microsoft.com/en-us/library/z714w2y9.aspx)：

> AntiAlias 和 HighQuality 是等效的，并指定应用了平滑的渲染。

# c++ - char** vs char* c[] 用于访问字符串数组

> ID：15926129
> 
> 赞同：7
> 
> 时间：2013-04-10T12:40:43.520
> 
> 标签：c++, c

为什么我不能将 char** 指向 C 字符串数组？

```
int main(int argc, char *argv[]) {

    char* c1[] = {"Hey","Hello"};
    printf("%s",c1[1]);

} //works fine 
```

对比

```
int main(int argc, char *argv[]) {

    char** c1 = {"Hey","Hello"};
    printf("%s",c1[1]);

} //error 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T12:51:26.337

我认为这里的混乱源于对`{"Hey","Hello"}`数组的信念。它不是。它根本不是一个对象。它只是一种特殊的初始化语法，可用于初始化数组。你不能用它来初始化 a`char**`因为 a`char**`是一个指针，而不是一个数组。它不会自动创建可以转换为指针的数组对象。

也许您将其`[...]`视为 Python 中的列表或`{ ... }`JavaScript 中的对象。它根本不像那些。这些表达式实际上创建了该类型的对象，并且可以在可以获取这些对象的表达式中的任何位置使用。我们在 C++ 中使用的语法*只是*一种初始化语法。

例如，您*可以*这样做：

```
const char* array[] = {"Hey","Hello"};
const char** p = array; 
```

但是，你不能做这样愚蠢的事情：

```
std::cout << {"Hey", "Hello"}[1]; 
```

在这里，我们实际上创建了将存储指针的数组对象。只有这样我们才能将该数组转换为`const char**`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T12:45:02.790

改成

`char** c1 = (char *[]){"Hey","Hello"};`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T12:43:37.437

> 为什么我不能指向`char**`C 字符串数组？

正如你所说，`c1`是一个数组。因此，您必须将其声明为*指向`char`*.

由于`"Hey"`和`"Hello"`是*字符串litterals*，每个`c1[i]`字符串都*指向*一个匿名字符串。这就是为什么您可以使用指针`char`而不是`char`.

但是，要创建指向 的指针数组`char`，您不能使用`char **`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T12:49:14.463

```
int main(int argc, char *argv[]) {

    char** c1 = {"Hey","Hello"};
    printf("%s",c1[1]);

} //error 
```

在上面的代码中，您试图将一个指针设置为指向一组两个字符串的指针。分别包含“Hey”和“Hello”地址的两个指针的存储空间在哪里？无处。

你可以这样做：

```
 char *a = "Hey";
 char *b = "Hello";
 char *c[] = { a, b };     // This MAY not compile due to a and b not being compile time constants. 
 char **c1 = c; 
```

（我已经将它分成比它实际需要的更多的单独变量，但我认为它非常清楚地解释了你的代码的“错误”）。

另一个例子是，如果我们将其更改`char *`为 int：

```
 const int a = 1;
 const int b = 2;

 int c[] = { a, b };

 int *c = { a, b };   // Doesn't work, there is nowhere to store a copy of a and b. 
```

这是同样的事情，除了整数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T12:48:10.413

“char **c1”，告诉编译器它是指向 char 类型指针的指针，是标量类型（一个值）。

使用值列表进行初始化仅适用于聚合类型。

# jquery - 不同浏览器中的不同样式格式

> ID：15926133
> 
> 赞同：2
> 
> 时间：2013-04-10T12:40:47.440
> 
> 标签：jquery, html, internet-explorer, google-chrome

我正在为 div 元素使用边框样式。我想使用 jQuery 动态更改边框样式。

当我在 jQuery 中获得边框样式时，有时在 Chrome 中它可以正常工作，有时不能。在 IE 中它不起作用，在 Mozilla 中它工作正常。

下面是我的代码：

**// 这是 HTML 元素**

```
<div id="blankcontainer1" style="overflow:hidden; width:100px; 
                          height:100px; background-color:#a2a2a2; 
                          border-top-width:1px; 
                          border-top-style:solid; 
                          border-top-color:#fa0000; 
                          border-right:1px solid #666666; 
                          border-bottom:1px solid #666666; 
                          border-left:1px solid #666666; 
                          border-top-left-radius:0px; 
                          border-top-right-radius:0px; 
                          border-bottom-left-radius:0px; 
                          border-bottom-right-radius:0px;"></div> 
```

**// 这是Javascript**

```
var elestyle = $("#blankcontainer1").attr("style");
var splitstyle = elestyle.split(";");

var i = 0;
while(i < splitstyle.length){
    var attrstyle = splitstyle[i].split(":");
    if($.trim(attrstyle[0]) == "border-top-width")
        $("#containersetting #btsize").val($.trim(attrstyle[1]).substring(0, $.trim(attrstyle[1]).length-2));
    if($.trim(attrstyle[0]) == "border-top-style")
        $("#containersetting #btstyle").val($.trim(attrstyle[1]));
    if($.trim(attrstyle[0]) == "border-top-color"){
        var bordtcolor = $.trim(attrstyle[1]);
        if(bordtcolor.indexOf('rgb') !== -1)                 
                bordtcolor=colorToHex(bordtcolor);

        $("#containersetting #btcolor").val(bordtcolor);
    }
} 
```

在上面的代码中，Chrome 样式显示 -

```
border-top-width: 1px;
border-top-style: solid;
border-top-color: #fa0000; 
```

但有时会显示

```
border-width: 1px;
border-style: solid;
border-color: rgb(250, 0, 0) rgb(102, 102, 102) rgb(102, 102, 102); 
```

IE风格显示：

```
border-top:#fa0000 1px solid; 
```

所以，这是由我的 JavaScript 代码失败引起的。你能告诉我这里出了什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:44:11.020

您可以使用 jQuery 查询样式值 - 如下所示：

```
var borderTopColor = $('#blankcontainer1').css('border-top-color');

alert(borderTopColor); 
```

这意味着您无需尝试手动解析样式属性。

您还可以[使用 jquery-color 插件](https://github.com/jquery/jquery-color)[对样式更改](http://api.jquery.com/animate/)（包括颜色）进行动画处理：

```
$('#blankcontainer1').animate({
    borderTopColor: '#abcdef'
}, 1000); 
```

最后...如果您在由 CSS 伪类（如`:hover`）表示的东西上执行此操作，则可以使用 CSS3 过渡：

```
a {
    -moz-transition:all 0.5s ease;
    -o-transition:all 0.5s ease;
    -webkit-transition:all 0.5s ease;
    transition:all 0.5s ease;
    borderTopColor: #fedcba;
}

a:hover {
    borderTopColor: #abcdef;
} 
```

# ios - 将 UIPanGestureRecognizer 链接到 UISlider？

> ID：15926136
> 
> 赞同：0
> 
> 时间：2013-04-10T12:41:00.213
> 
> 标签：ios, interface-builder, uislider, uipangesturerecognizer

我正在使用 libpd 创建一个音乐应用程序，它有两种控制波形的音量和音高的方法——两个独立的 UISlider 和一个使用 UIPanGestureRecognizer 的 XY 垫。

我想做的是让滑块反映 XY 垫的动作，所以想知道这怎么可能？（即 Y 轴已经在控制音量，但要看到滑块也对其做出反应）

这就是我使用单独控件的地方。

```
// Volume slider
-(IBAction)sineVol:(id)sender
{
    UISlider *vslider = (UISlider *)sender;
    [PdBase sendFloat:vslider.value toReceiver:@"sine_vol"];
}

// Pitch slider    
-(IBAction)sinePitch:(id)sender
{
    UISlider *pslider = (UISlider *)sender;
    [PdBase sendFloat:pslider.value toReceiver:@"sine_pitch"];
}

// XY Pad
-(IBAction)sineXYPad:(UIPanGestureRecognizer *)trigger
{
    float sinepadHeight = sinexyview.bounds.size.height;
    float sinepadWidth = sinexyview.bounds.size.width;
    CGPoint location = [trigger locationInView:sinexyview];

    if ((location.y >= 0) && (location.y < sinepadHeight) && (location.x >= 0) && (location.x < sinepadWidth))
    {
    float sineVolXY = ((location.y) / 250);
    [PdBase sendFloat:sineVolXY toReceiver:@"sine_vol"];
}

    if ((location.y >= 0) && (location.y < sinepadHeight) && (location.x >= 0) && (location.x < sinepadWidth))
    {
    float sinePitchXY = ((location.x) / 5);
    [PdBase sendFloat:sinePitchXY toReceiver:@"sine_pitch"];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T00:31:32.220

现在修复了这个问题 - 为滑块添加了插座，然后为每个功能添加了下面的两行。
`volumeSlider.value = sineVolXY;`
`pitchSlider.value = sinePitchXY;`

# c# - 用于查找链接的“href”值的正则表达式

> ID：15926142
> 
> 赞同：50
> 
> 时间：2013-04-10T12:41:08.833
> 
> 标签：c#, regex

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-04-10T12:49:32.487

我建议在正则表达式上使用 HTML 解析器，但这里仍然是一个正则表达式，它将在`href`每个链接的属性值上创建一个捕获组。它将匹配是否使用双引号或单引号。

```
<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1 
```

[您可以在此处](https://regex101.com/r/rMAHrE/1)查看此正则表达式的完整说明。

片段操场：

```
const linkRx = /<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1/;
const textToMatchInput = document.querySelector('[name=textToMatch]');

document.querySelector('button').addEventListener('click', () => {
  console.log(textToMatchInput.value.match(linkRx));
});
```

```
<label>
  Text to match:
  <input type="text" name="textToMatch" value='<a href="google.com"'>

  <button>Match</button>
 </label>
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-10T12:57:47.223

`regex`不推荐使用解析html

`regex`用于定期出现的模式。`html`它的格式不规则（除了`xhtml`）。例如`html`，即使您**没有**`closing tag`! 这可能会破坏您的代码，文件也是有效的。

使用像[htmlagilitypack这样的 html 解析器](http://html-agility-pack.net/?z=codeplex)

您可以使用此代码检索`href's`锚标记中的所有内容`HtmlAgilityPack`

```
HtmlDocument doc = new HtmlDocument();
doc.Load(yourStream);

var hrefList = doc.DocumentNode.SelectNodes("//a")
                  .Select(p => p.GetAttributeValue("href", "not found"))
                  .ToList(); 
```

`hrefList`包含所有href`s

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-21T06:15:10.093

## 谢谢大家（特别是@plalx）

> 我发现用如此复杂和神秘的模式强制 href 属性的有效性是非常过分的，而一个简单的表达式 就足以捕获所有 URL。如果您想确保它们至少包含一个查询字符串，您可以使用
> **`<a\s+(?:[^>]*?\s+)?href="([^"]*)"`**
> 
> **`<a\s+(?:[^>]*?\s+)?href="([^"]+\?[^"]+)"`**

* * *

# 我的最终正则表达式字符串：

**首先使用其中一个：**

```
st = @"((www\.|https?|ftp|gopher|telnet|file|notes|ms-help):((//)|(\\\\))+ \w\d:#@%/;$()~_?\+-=\\\.&]*)";
st = @"<a href[^>]*>(.*?)</a>";
st = @"((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)";
st = @"((?:(?:https?|ftp|gopher|telnet|file|notes|ms-help):(?://|\\\\)(?:www\.)?|www\.)[\w\d:#@%/;$()~_?\+,\-=\\.&]+)";
st = @"(?:(?:https?|ftp|gopher|telnet|file|notes|ms-help):(?://|\\\\)(?:www\.)?|www\.)";
st = @"(((https?|ftp|gopher|telnet|file|notes|ms-help):((//)|(\\\\))+)|(www\.)[\w\d:#@%/;$()~_?\+-=\\\.&]*)";
st = @"href=[""'](?<url>(http|https)://[^/]*?\.(com|org|net|gov))(/.*)?[""']";
st = @"(<a.*?>.*?</a>)";
st = @"(?:hrefs*=)(?:[s""']*)(?!#|mailto|location.|javascript|.*css|.*this.)(?.*?)(?:[s>""'])";
st = @"http://([\\w+?\\.\\w+])+([a-zA-Z0-9\\~\\!\\@\\#\\$\\%\\^\\&amp;\\*\\(\\)_\\-\\=\\+\\\\\\/\\?\\.\\:\\;\\'\\,]*)?";
st = @"http(s)?://([\w-]+\.)+[\w-]+(/[\w- ./?%&=]*)?";
st = @"(http|https)://([a-zA-Z0-9\\~\\!\\@\\#\\$\\%\\^\\&amp;\\*\\(\\)_\\-\\=\\+\\\\\\/\\?\\.\\:\\;\\'\\,]*)?";
st = @"((http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])?)";
st = @"http://([\\w+?\\.\\w+])+([a-zA-Z0-9\\~\\!\\@\\#\\$\\%\\^\\&amp;\\*\\(\\)_\\-\\=\\+\\\\\\/\\?\\.\\:\\;\\'\\,]*)?";
st = @"http(s?)\:\/\/[0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*(:(0-9)*)*(\/?)([a-zA-Z0-9\-\.\?\,\'\/\\\+&amp;%\$#_]*)?$";
st = @"(?<Protocol>\w+):\/\/(?<Domain>[\w.]+\/?)\S*"; 
```

我的选择是

```
@"(?<Protocol>\w+):\/\/(?<Domain>[\w.]+\/?)\S*" 
```

**第二使用这个：**

```
st = "(.*)?(.*)=(.*)"; 
```

## 问题解决了。感谢大家 ：）

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-04-10T12:55:43.523

尝试这个 ：

```
 public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            var res = Find(html);
        }

        public static List<LinkItem> Find(string file)
        {
            List<LinkItem> list = new List<LinkItem>();

            // 1.
            // Find all matches in file.
            MatchCollection m1 = Regex.Matches(file, @"(<a.*?>.*?</a>)",
                RegexOptions.Singleline);

            // 2.
            // Loop over each match.
            foreach (Match m in m1)
            {
                string value = m.Groups[1].Value;
                LinkItem i = new LinkItem();

                // 3.
                // Get href attribute.
                Match m2 = Regex.Match(value, @"href=\""(.*?)\""",
                RegexOptions.Singleline);
                if (m2.Success)
                {
                    i.Href = m2.Groups[1].Value;
                }

                // 4.
                // Remove inner tags from text.
                string t = Regex.Replace(value, @"\s*<.*?>\s*", "",
                RegexOptions.Singleline);
                i.Text = t;

                list.Add(i);
            }
            return list;
        }

        public struct LinkItem
        {
            public string Href;
            public string Text;

            public override string ToString()
            {
                return Href + "\n\t" + Text;
            }
        }

    } 
```

**输入：**

```
 string html = "<a href=\"www.aaa.xx/xx.zz?id=xxxx&name=xxxx\" ....></a> 2.<a href=\"http://www.aaa.xx/xx.zz?id=xxxx&name=xxxx\" ....></a> "; 
```

**结果：**

```
[0] = {www.aaa.xx/xx.zz?id=xxxx&name=xxxx}
[1] = {http://www.aaa.xx/xx.zz?id=xxxx&name=xxxx} 
```

[C# 抓取 HTML 链接](http://www.dotnetperls.com/scraping-html)

> 抓取 HTML 会提取重要的页面元素。它对网站管理员和 ASP.NET 开发人员有许多合法用途。使用 Regex 类型和 WebClient，我们为 HTML 实现屏幕抓取。

## 已编辑

另一种简单的方法：您可以使用`web browser`控件`href`从标签获取`a`，如下所示：（参见我的示例）

```
 public Form1()
        {
            InitializeComponent();
            webBrowser1.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(webBrowser1_DocumentCompleted);
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            webBrowser1.DocumentText = "<a href=\"www.aaa.xx/xx.zz?id=xxxx&name=xxxx\" ....></a><a href=\"http://www.aaa.xx/xx.zz?id=xxxx&name=xxxx\" ....></a><a href=\"https://www.aaa.xx/xx.zz?id=xxxx&name=xxxx\" ....></a><a href=\"www.aaa.xx/xx.zz/xxx\" ....></a>";
        }

        void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            List<string> href = new List<string>();
            foreach (HtmlElement el in webBrowser1.Document.GetElementsByTagName("a"))
            {
                href.Add(el.GetAttribute("href"));
            }
        } 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-10T12:45:55.920

试试这个正则表达式：

```
"href\\s*=\\s*(?:\"(?<1>[^\"]*)\"|(?<1>\\S+))" 
```

您将从以下讨论中获得更多帮助：

[从 HTML 链接中提取 URL 的正则表达式](https://stackoverflow.com/questions/499345/regular-expression-to-extract-url-from-an-html-link)

和

[正则表达式以获取 href 中的链接。[asp.net]](https://stackoverflow.com/questions/1496619/regex-to-get-the-link-in-href-asp-net)

希望它有帮助。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-05-10T15:56:04.610

我想出了这个，它支持锚和图像标签，并支持单引号和双引号。

```
<[a|img]+\\s+(?:[^>]*?\\s+)?[src|href]+=[\"']([^\"']*)['\"] 
```

所以

```
<a href="/something.ext">click here</a> 
```

将匹配：

```
 Match 1: /something.ext 
```

和

```
<a href='/something.ext'>click here</a> 
```

将匹配：

```
 Match 1: /something.ext 
```

img src 属性也是如此

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-12-02T09:31:34.690

```
 HTMLDocument DOC = this.MySuperBrowser.Document as HTMLDocument;
 public IHTMLAnchorElement imageElementHref;
 imageElementHref = DOC.getElementById("idfirsticonhref") as IHTMLAnchorElement; 
```

只需尝试此代码

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-09T08:32:37.077

我采取了一种更简单的方法。这只是简单地查找 href 属性，并将其后面的值（在撇号之间）捕获到一个名为 url 的组中：

`href=['"](?<url>.*?)['"]`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-25T11:21:18.667

我认为在这种情况下，这是最简单的预赛之一

```
/<a\s*(.*?id[^"]*")/g 
```

获取地址中带有变量*id的链接*

从*href*开始，包括它，获取所有字符/符号（。 - 不包括换行符）直到第一个*id*出现，包括它，然后所有符号到最近的下一个 " 符号 ([^"]*)

# java - Swing 日志附加器

> ID：15926146
> 
> 赞同：2
> 
> 时间：2013-04-10T12:41:28.917
> 
> 标签：java, swing, logging, slf4j, logback

我正在尝试按需向我的 Swing 应用程序的用户显示日志内容。显示日志事件列表，可能允许他们查看有关日志消息的详细信息，理想情况下类似于 eclipse“错误日志”视图显示的内容。

是否有任何预制的日志显示组件/日志附加器？

我意识到我可以轻松地将字符串值附加到 Textarea，但如果可能的话，我想要更多“免费”的花哨（搜索、按事件过滤、按记录器过滤、导出等）

我目前正在使用带有 logback 的 SLF4J，但如果存在这样的组件，我在切换到另一个日志框架时没有任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-20T12:24:49.330

我对此进行了抨击。虽然这对我来说是一个教学练习，并且非常接近完全可用，但仍然缺少一些必需品。也许有人可以帮助进行最后的润色。

# 背景

这是一个更大的工作应用程序的一部分，所以虽然我只发布与这个问题相关的代码，但有一些应用程序的工件。代码在 Scala 中，但降级到 Java 应该很简单。我不包括大多数`import`指令；希望很清楚我指的是什么类。我相信只有两个具有冲突简单类名的类是 [scala.swing.Component](http://www.scala-lang.org/api/current/index.html#scala.swing.Component) 和[java.awt.Component](http://docs.oracle.com/javase/6/docs/api/index.html?java/awt/Component.html)。

# 概述

该代码存在于以下文件中：

*   `Main.scala`具有创建日志窗口的代码。
*   `LogFrame`是显示日志条目的摆动窗口
*   `LogModel`存储记录数据
*   `AbstractBaseTableModel`是`LogModel`我的应用程序中另一个类的超类，此处未显示。
*   `TableAppender.scala`是将 Swing 连接到 Logback 的原因。
*   格式化时间戳的单行方法在我的包对象中，因为它在我的应用程序的其他地方使用。
*   `logback.xml`有一行激活我的新附加程序

# 编码

在`Main.scala`显示日志输出的框架中可见：

```
object Main extends swing.SwingApplication {
  override def startup(args: Array[String]) {
    val logFrame = LogFrame
    if (logFrame.size == new Dimension(0,0)) logFrame.pack()
    logFrame.visible = true
  }
} 
```

单`LogFrame`例对象定义在`LogFrame.scala`：

```
object LogFrame extends Frame {
  title = "Log"
  iconImage = new ImageIcon("log.png").getImage
  preferredSize = new Dimension(1200,370)

  object LogTable extends Table {
    model = LogModel
    Map(0 -> 50, 1 -> 32, 4 -> 400) foreach { m =>
      peer.getColumnModel getColumn m._1 setPreferredWidth m._2
    }

    override def rendererComponent(
      isSelected: Boolean, focused: Boolean, row: Int, column: Int
    ) = {
      val v = model.getValueAt(
        peer.convertRowIndexToModel(row), 
        peer.convertColumnIndexToModel(column)
      ).toString
      TableCellRenderer.componentFor(this, isSelected, focused, v, row, column)
    }

    import ch.qos.logback.classic.Level.{ERROR,WARN}
    object TableCellRenderer extends AbstractRenderer[String, TextArea](new TextArea {
      lineWrap = true; wordWrap = true
    }) {
      val brown = new java.awt.Color(143,112,0)
      def configure(t: Table, sel: Boolean, foc: Boolean, s: String, row: Int, col: Int) = {
        component.text = s
        model.getValueAt(
          LogTable.this.peer.convertRowIndexToModel(row),
          LogModel.columnNames.indexOf("Level")
        ) match {
          case ERROR => component.foreground = java.awt.Color.RED
          case WARN => component.foreground = brown
          case _ =>
        }
      }
    }
  }

  contents = new BoxPanel(Vertical) {
    contents += new ScrollPane { viewportView = LogTable }
  }

  def logEvent(event: ILoggingEvent) {
    event +=: LogModel
  }

} 
```

单`LogModel`例在`LogModel.scala`.

```
object LogModel extends AbstractBaseTableModel {

  final val columnNames = Array("Time","Level","Thread","Logger","Message")

  val data = ListBuffer[Array[AnyRef]]()

  def +=:(event: ILoggingEvent) {
    Array[AnyRef](
      formatTimeStamp(event.getTimeStamp),
      event.getLevel,
      event.getThreadName,
      event.getLoggerName.replaceFirst(".*\\.",""),
      event.getFormattedMessage
    ) +=: data
    fireTableChanged( new TableModelEvent(this) )
  }
} 
```

我的包对象中的这两行定义了 `formatTimeStamp()`方法：

```
final val isoFormatter = org.joda.time.format.ISODateTimeFormat.dateTimeNoMillis
def formatTimeStamp(millis: Long)      = isoFormatter.print(millis) 
```

`LogModel`扩展的原因`AbstractBaseTableModel`是因为我的应用程序有一些其他的表模型是一次性更新的，而不是像日志模型那样一次更新一行。因此 `AbstractBaseTableModel`有一个`data`type 的成员`SeqLike`，并且子类可以根据需要使用不可变`List`或可变 `ListBuffer`的。

```
import scala.collection.SeqLike

abstract class AbstractBaseTableModel extends AbstractTableModel {
  val columnNames: Array[String]

  val data: SeqLike[Array[AnyRef],_]

  def getRowCount: Int = data.size
  def getColumnCount: Int = columnNames.size
  override def getColumnName(column: Int) = columnNames(column)
  override def getValueAt(row: Int, column: Int): AnyRef = data(row)(column)
  override def isCellEditable(row: Int, col: Int) = false

  override def getColumnClass(columnIndex: Int): Class[_] =
    getValueAt(0, columnIndex).getClass

} 
```

`TableAppender.scala`文件很小：

```
class TableAppender extends AppenderBase[ILoggingEvent] {
  def append(event: ILoggingEvent) {
    LogFrame.logEvent(event)
  }
} 
```

最后，对我的`logback.xml`文件的更改甚至更小：

```
<appender name="swingTable" class="mypackage.TableAppender"/> 
```

# 问题

唯一让我无法决定这比老式日志文件更好的问题是：

1）因为我已经覆盖`Table.rendererComponent()`， `JTable.setDefaultRenderer()`不能像往常一样工作。

2）我还没有弄清楚如何让包裹线在表格中可见。我所知道的是我必须增加行的高度。

如果这些问题得到解决，接下来就是根据日志级别和记录器名称添加实时过滤。事实上，我至少暂时将其搁置一旁，但如果有人有任何建议，我很想听听他们的意见。

# 参考

以下资源对我编写上述代码很有用，或者可能对解决剩余的问题有用：

*   [Scala table cell renderers的惯用用法，](https://stackoverflow.com/questions/1195013/idiomatic-table-cell-renderers-in-scala#1347647) [oxbow_lakes](https://stackoverflow.com/users/16853/oxbow-lakes)的一个非常有帮助的 SO 答案 ，但不幸的是没有解决这个`JTable.setDefaultRenderer()`问题。

*   [Rob Camick](http://tips4java.wordpress.com/)的博客文章[Table Row Rendering](http://tips4java.wordpress.com/2010/01/24/table-row-rendering/)解释了如何更改表格行的颜色。

*   [如何在 jtable 单元格中换行？](https://stackoverflow.com/questions/965023/how-to-wrap-lines-in-a-jtable-cell)[，来自Arvodan](https://stackoverflow.com/users/5751/arvodan)的另一个 SO 问题 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:21:23.157

我会看看[SwingX](http://swingx.java.net)。在这个页面上有一个很好的演示。以 JXTable 为例。

# starcounter - 如何在新版本的 Starcounter 中实现级联删除？

> ID：15926147
> 
> 赞同：1
> 
> 时间：2013-04-10T12:41:30.700
> 
> 标签：starcounter, database, nosql

在新版本中，我使用 [Database] 属性创建了持久类，我明白了。由于使用 OnDelete() 方法的 Entity 类已被删除，如何实现级联删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:09:00.500

您只需在要实现级联删除的类（或任何父类）上实现 IEntity 接口。IEntity 有一个 OnDelete() 方法，该方法的调用方式与之前的工作方式类似！

如果您愿意，您可以轻松地创建自己的实体类，该类实现 IEntity 并设置了 Database 属性。从这个新类派生所有类，您的“旧”代码将像早期版本一样工作。

# c - 如何让 Doxygen 忽略缩进但仍创建参考链接？

> ID：15926149
> 
> 赞同：0
> 
> 时间：2013-04-10T12:41:47.130
> 
> 标签：c, doxygen

C 代码。多氧 1.8.3。

一些文件以大型文档块开头。大多数用户会直接从代码文件中阅读这些多段注释。因此，为了清晰起见，缩进很重要。

但是这种缩进会导致 Doxygen 将文本视为“代码”（以错误的字体创建盒装输出），并忽略关键字。

使用 \verbatim 禁用关键字。

有没有办法强制 Doxygen 尊重缩进*并*创建参考链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:26:42.730

盒装文本是使用 Markdown 创建的。

Markdown 将缩进 4 个空格或制表符的文本视为代码块分隔符（[http://daringfireball.net/projects/markdown/syntax#precode](http://daringfireball.net/projects/markdown/syntax#precode)）。

您可以设置

MARKDOWN_SUPPORT = 否

在您的配置文件中，或使用较小的缩进级别来抑制框生成。

# c - 第二个输入 char* 使无限循环

> ID：15926152
> 
> 赞同：0
> 
> 时间：2013-04-10T12:41:57.930
> 
> 标签：c, loops, while-loop

下面是我的 C 代码。第一个输入效果很好，但第二个会导致无限循环。我已经刷新了缓冲区，但我不知道如何解决这个问题。

```
#include <stdio.h>
#include <string.h>
#include <unistd.h>
#include <sys/types.h>

#define MAXARG 7

int main()
{
    char buf[256];
    char* arg[MAXARG];
    char* s;
    char* save;
    int argv;

    static const char delim[] = " \t\n";
    int pid, status;

    while(1){
        printf("MyShell: ");
        fgets(buf, sizeof(buf), stdin);
        fflush(stdin);
        argv = 0;

        s = strtok_r(buf, delim, &save);

        while(s){
            arg[argv++] = s;
            s= strtok_r(NULL, delim, &save);
        }

        arg[argv] = (char*) 0;

        if(!strcmp(arg[0], "quit"))
            break;
        if((pid = fork()) == -1)
            perror("fork failed...");
        else if(pid != 0){
            pid = wait(&status);
        }
        else{
            execvp(arg[0], arg);
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:52:31.920

使用`fflush`上面`fgets`..你需要`stdin`在输入消息之前刷新..

您可以使用`__fpurge`in `linux`which is in stdio_ext 标头..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:55:39.303

这个问题是你打电话`fgets()`，然后你打电话`fflush()`并做你的工作......然后你循环`while`并再次打电话`fgets()`......但你没有测试我只能保证你从中得到`EOF`。`fgets()`现在你的`while`循环无休止地循环等待`fgets()`返回除了`EOF`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:47:22.167

值得一提：当人们写~~`fflush(stdin);`~~时，他们通常的意思是：

```
/* Read and discard the remainder of a line of input, because the remainder of
 * the line isn't of interest to us...
 */
void discard_line(FILE *f) {
    int c;
    do {
        c = fgetc(f);
    } while (c >= 0 && c != '\n');
} 
```

`fflush`未定义为在输入流上工作，例如`stdin`. ~~`fflush(stdin);`~~可能正在做你所期望的，但这只是巧合。如果您完全关心可移植性，则不会`fflush`在仅输入流上使用。

事实上，您甚至可以考虑阅读以前没有的功能手册页，特别注意[“fgets”手册中标题为“返回值”的部分](http://pubs.opengroup.org/onlinepubs/009695399/functions/fgets.html#tag_03_164_04)。您可能会以某种方式在循环的条件中包含该返回值，例如：

```
/* Note how fflush is used on an output stream to ensure data is written
 * immediately to stdout. You'll only need to do this when your data doesn't
 * end in '\n', because data may not be written until a '\n' is written.
 */
printf("MyShell: "); fflush(stdout);
while (fgets(buf, sizeof buf, stdin) == buf) {
    /* Find either the first '\n' or the first '\0', so we can work out whether
     * or not to discard anything...
     */
    size_t length = strcspn(buf, "\n");
    if (buf[length] != '\n') {
        /* If the line doesn't end in '\n', then we've read only part of a line.
         * Discard the rest? Okay...
         */
        discard_line(stdin);
    }

    /* Remove the '\n', if there is one. Otherwise, replace '\0' with '\0' ;) */
    buf[length] = '\0';
    /* TODO: Insert non-fflush(stdin)-related code here */

    printf("MyShell: "); fflush(stdout);
} 
```

PS。我建议阅读评论。他们可能很有见地。

# mov - 无法在 Ubuntu 上使用 avconv 将 MOV 文件转换为其他视频格式

> ID：15926156
> 
> 赞同：0
> 
> 时间：2013-04-10T12:42:07.930
> 
> 标签：mov, video-conversion

我最近收到了一些在 iPhone 上录制的 MOV 文件（不确定哪个版本 - 如果需要，我可以获取该信息）。我一直在尝试将这些 MOV 转换为另一种格式（实际上是任何格式），以便我可以在 kdenlive 中编辑剪辑。我尝试过 Windows 中的程序以及 Ubuntu 中的 vlc、ffmpeg 和 avconv，但均未成功。尝试在 Macintosh 上使用 Realplayer 将文件转换为 mp4 和 avi 会导致宽高比不佳和图像质量下降。

我将在下面发布尝试使用 avconv 转换文件的结果。我尝试转换的原始 MOV 文件可以在这里下载： [http ://www.unc.edu/~haksaeng/balloon/IMG_0347.MOV](http://www.unc.edu/~haksaeng/balloon/IMG_0347.MOV)

任何有关如何成功转换这些文件而不损失（太多）质量的指导将不胜感激。首选 Ubuntu 解决方案，但此时我会采取任何措施。

```
 avconv -i IMG_0347.MOV -f mp4 -vcodec copy -acodec copy output.mp4
 avconv version 0.8.6-4:0.8.6-0ubuntu0.12.04.1, Copyright (c) 2000-2013 the Libav developers
  built on Apr  2 2013 17:00:59 with gcc 4.6.3
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x8c3e240] stream 0, error opening alias: path='/Users/',   dir='Roll 1', filename='IMG_0347.MOV', volume='Lees HD', nlvl_from=3, nlvl_to=3
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x8c3e240] stream 1, error opening alias: path='/Users/', dir='Roll 1', filename='IMG_0347.MOV', volume='Lees HD', nlvl_from=3, nlvl_to=3
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x8c3e240] Could not find codec parameters (Video: h264, 1920x1080, 18530 kb/s)
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'IMG_0347.MOV':
Metadata:
major_brand     : qt  
minor_version   : 537199360
compatible_brands: qt  
creation_time   : 2013-04-06 12:20:16
encoder         : 6.1.3
encoder-eng     : 6.1.3
date            : 2013-04-06T08:20:16-0400
date-eng        : 2013-04-06T08:20:16-0400
Duration: 00:00:05.15, bitrate: 9 kb/s
Stream #0.0(und): Video: h264, 1920x1080, 18530 kb/s, 29.97 fps, 600 tbr, 600 tbn, 1200 tbc
Metadata:
  creation_time   : 2013-04-06 12:20:16
Stream #0.1(und): Audio: aac, 44100 Hz, mono, s16, 63 kb/s
Metadata:
  creation_time   : 2013-04-06 12:20:16
File 'output.mp4' already exists. Overwrite ? [y/N] y
File 'output.mp4' already exists. Overwrite ? [y/N] y
Output #0, mp4, to 'output.mp4':
  Metadata:
major_brand     : qt  
minor_version   : 537199360
compatible_brands: qt  
creation_time   : 2013-04-06 12:20:16
date-eng        : 2013-04-06T08:20:16-0400
encoder-eng     : 6.1.3
date            : 2013-04-06T08:20:16-0400
encoder         : Lavf53.21.1
Stream #0.0(und): Video: libx264, 1920x1080, q=2-31, 18530 kb/s, 600 tbn, 600 tbc
Metadata:
  creation_time   : 2013-04-06 12:20:16
Stream #0.1(und): Audio: libvo_aacenc, 44100 Hz, mono, 63 kb/s
Metadata:
  creation_time   : 2013-04-06 12:20:16
Stream mapping:
  Stream #0:0 -> #0:0 (copy)
  Stream #0:1 -> #0:1 (copy)
 Press ctrl-c to stop encoding
frame=    0 fps=  0 q=-1.0 Lsize=       0kB time=10000000000.00 bitrate=   0.0kbits/s    
video:0kB audio:0kB global headers:0kB muxing overhead inf% 
```

现在尝试用 mplayer 播放它：

```
mplayer output.mp4 
MPlayer svn r34540 (Ubuntu), built with gcc-4.6 (C) 2000-2012 MPlayer Team
mplayer: could not connect to socket
mplayer: No such file or directory
Failed to open LIRC support. You will not be able to use your remote control.

Playing output.mp4.
libavformat version 53.21.1 (external)
Mismatching header version 53.19.0
libavformat file format detected.
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x1e013a0]Estimating duration from bitrate, this may be inaccurate
LAVF: no audio or video headers found - broken file?
Quicktime/MOV file format detected.
No stream found.

Exiting... (End of file) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-07T12:00:32.497

mov 文件有时包含别名，即对其他文件的引用。如果 ffmpeg 和 libav 存储为相对路径（并且文件实际上存在于那里），则它们可以为您加载它们。`-use_absolute_path 1`如果您添加到命令行，较新版本的 ffmpeg 可以从绝对路径（例如您的情况）加载源。

# android - 使用本地清单的回购不起作用

> ID：15926159
> 
> 赞同：11
> 
> 时间：2013-04-10T12:42:12.187
> 
> 标签：android, repository

[参考这里](https://stackoverflow.com/questions/5672394/using-a-local-manifest-xml-with-repo)的问题。我复制`manifest.xml`到`.repo`并输入：

```
repo init -m ./.repo/manifest.xml 
```

它不起作用：

```
jack $ repo init -m ./.repo/manifest.xml 
fatal: manifest url (-u) is required. 
```

我确实提供了 manifest.xml。怎么了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-07-22T08:00:34.303

这是我为在本地完成这项工作所做的工作。

我将 manifest.xml 移动到一个单独的位置，例如`~/mymanifest/manifest.xml`

我通过这样做使该目录启用了git

```
cd ~/mymanifest
git init
git add manifest.xml
git commit -m "My local manifest" 
```

然后我只需要按照`repo init -u ~/mymanifest/`它应该的方式加载本地清单！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T12:53:11.603

我从来没有用过那种方法。在这种情况下，我所做的是创建一个`local_manifest.xml`在`.repo`目录中命名的文件，其中包含有关将偏离我已经同步的分支的项目的信息。例如：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <manifest>
   <remove-project name="platform/bionic"/>
   <project path="bionic"
        name="platform/bionic"
        revision="my-awesome-feature-branch"/>
 </manifest> 
```

添加此文件后，我`repo sync`再次简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-16T18:41:40.620

使用本地清单的正确方法类似于 Irfan 的答案，但有一个更正：

```
cd ~/mymanifest
git init
git add manifest.xml
git commit -m "My local manifest" 
```

然后调用 repo 提供**url**和**文件**标志：

```
repo init -u ~/mymanifest/ -m manifest.xml 
```

# java - 每个 RMI 请求都会在服务器端创建一个新线程吗？

> ID：15926163
> 
> 赞同：0
> 
> 时间：2013-04-10T12:42:16.033
> 
> 标签：java, jakarta-ee, rmi

是否为每个 RMI 调用在服务器端创建了一个新线程？我在哪里可以找到这方面的信息？我已经用谷歌搜索了它，但到目前为止结果并不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:16:08.797

> 是否为每个 RMI 调用在服务器端创建了一个新线程？

它没有指定。由于客户端连接池，在 Sun/Oracle 实现中存在一些线程保护。很久以前我读到 IBM 实现使用线程池，但我从未验证过它。

> 我在哪里可以找到这方面的信息？

它没有指定。

> 我已经用谷歌搜索了它，但到目前为止结果并不好。

它没有指定。所以你不应该依赖任何特定的行为。所有 RMI 规范都说它没有被指定。这意味着你不能假设它是单线程的。

# generics - 奇怪的JDK行为，它应该编译吗？

> ID：15926174
> 
> 赞同：2
> 
> 时间：2013-04-10T12:42:50.910
> 
> 标签：generics, compilation, java

```
import java.util.*;

public class Main <T> {

    public void guru(List<Integer> list) {
        System.out.println("INteger");
   }

    public static void main(String[] args) {
        List<String> list = new ArrayList<String>();
        new Main().guru(list);
    }
} 
```

在我看来，调用

```
guru(List<String>); //no type erasure during compiling... 
```

应该会导致编译失败。

如果我们使用以下方法创建对象，就会发生这种情况：

```
new Main<Integer>() //or any other type 
```

谁能告诉我这里发生了什么？那是JDK中的错误或实例化没有参数的参数化对象可能会导致此类问题，为什么？

如果我们将 Main 定义更改为：

```
public class Main { 
```

编译失败，正如预期的那样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T12:44:35.227

问题在这里：

```
new Main().guru(list);
       ^^^^ 
```

您使用`Main`（没有泛型）的原始版本，因此会忽略所有泛型信息。你应该得到一个编译器警告。

如果你试试：

```
new Main<SomeType>().guru(list); 
```

你应该得到一个编译错误。

更准确地说，当使用原始类型时`new Main()`，会执行类型擦除，这不仅会擦除类型本身的泛型信息，[还会擦除其方法](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.8-210)中的通用信息：

> 原始类型 C [...] 的构造函数（第 8.8 节）、实例方法（第 8.4 节、第 9.4 节）或非静态字段（第 8.3 节）的类型是对应于擦除的原始类型它在对应于 C 的泛型声明中的类型。

# c# - WPF由祖先属性触发

> ID：15926180
> 
> 赞同：5
> 
> 时间：2013-04-10T12:43:09.363
> 
> 标签：c#, wpf, triggers, findancestor

我想使用trigger触发器，但我需要选择祖先的属性，例如：

```
<Trigger Property="State" Value="Expanded">
   <Setter Property="Background" Value="Red" />
</Trigger> 
```

只有 State 属性需要是已知类型的未知祖先的属性，如果找不到，则触发器将永远不会执行。

所以我的问题是如何找到祖先来获取要在触发器中使用的属性？

希望我说清楚了。先感谢您。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T16:53:47.653

```
<DataTrigger Binding="{Binding State, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Whatever}}}" Value="Expanded"> 
```

# java - Android HttpGet 请求未发送

> ID：15926181
> 
> 赞同：0
> 
> 时间：2013-04-10T12:43:12.887
> 
> 标签：java, android, http

我正在尝试向[http://www.google.com/](http://www.google.com/)发送 HTTP 请求，并希望将所有响应保存在我的 android 应用程序中。我尝试了很多方法，但每次出现错误或 logcat 错误或我的模拟器停止时。

你能指出我的代码有什么问题并给我一些配置提示吗？我希望能够同时使用`GET`和`POST`。

```
 public void executeHttpGet() throws Exception {
     BufferedReader in = null;
        try {
            HttpClient client = new DefaultHttpClient();
            HttpGet request = new HttpGet();
            request.setURI(new URI("http://www.google.com/"));
            HttpResponse response = client.execute(request);
            in = new BufferedReader
            (new InputStreamReader(response.getEntity().getContent()));
            StringBuffer sb = new StringBuffer("");
            String line = "";
            String NL = System.getProperty("line.separator");
            while ((line = in.readLine()) != null) {
                sb.append(line + NL);
            }
            result.setText(sb.toString());

            in.close();
            String page = sb.toString();
            System.out.println(page);
            Debug.out(sb.toString());

            } finally {
            if (in != null) {
                try {
                    in.close();
                    } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    } 
```

* * *

日志猫：

```
04-09 20:56:07.730: E/AndroidRuntime(9128): FATAL EXCEPTION: main
04-09 20:56:07.730: E/AndroidRuntime(9128): java.lang.RuntimeException: Unable to start activity ComponentInfo{mainpackage.rest_client/mainpackage.rest_client.GetResponse}: android.os.NetworkOnMainThreadException
04-09 20:56:07.730: E/AndroidRuntime(9128):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at android.os.Looper.loop(Looper.java:137)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at java.lang.reflect.Method.invokeNative(Native Method)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at java.lang.reflect.Method.invoke(Method.java:511)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at dalvik.system.NativeStart.main(Native Method)
04-09 20:56:07.730: E/AndroidRuntime(9128): Caused by: android.os.NetworkOnMainThreadException
04-09 20:56:07.730: E/AndroidRuntime(9128):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at mainpackage.rest_client.GetResponse.QueryGooglePlus(GetResponse.java:75)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at mainpackage.rest_client.GetResponse.onCreate(GetResponse.java:61)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at android.app.Activity.performCreate(Activity.java:5104)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-09 20:56:07.730: E/AndroidRuntime(9128):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-09 20:56:07.730: E/AndroidRuntime(9128):     ... 11 more
04-09 20:56:08.330: D/dalvikvm(9128): GC_CONCURRENT freed 204K, 11% free 2889K/3216K, paused 6ms+44ms, total 417ms
04-09 20:56:11.640: I/Process(9128): Sending signal. PID: 9128 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:21:26.380

我认为文档描述足够丰富，可以理解异常`NetworkOnMainThreadException`

> 当应用程序尝试在其主线程上执行网络操作时引发的异常。
> 
> 这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。见文件

试试这个让你知道如何处理网络操作的链接[http://developer.android.com/training/articles/perf-anr.html](http://developer.android.com/training/articles/perf-anr.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:54:30.870

你有一个`NetworkOnMainThreadException`. 在`AsyncTask`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:29:24.170

当您遇到此类琐碎问题时，最好先通过谷歌搜索查找[异常描述](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)，然后通过查看[此类](http://developer.android.com/training/articles/perf-anr.html)给出的解释和链接将问题归零。它几乎成倍地减少了您的开发时间。只是一个诚实的建议，我不是专家:)

是的，AsyncTask 应该可以解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T12:54:21.567

请检查您是否可以在模拟器中访问互联网。

如果您无法访问互联网，请尝试以下解决方案，它对我有用:)

[通过安卓应用程序访问互联网的问题。](http://www.mindfirelabs.com/forum/viewtopic.php?f=12&t=579)

# jakarta-ee - 如何获取jasper文件中定义的参数？

> ID：15926182
> 
> 赞同：8
> 
> 时间：2013-04-10T12:43:14.703
> 
> 标签：jakarta-ee, jasper-reports, ireport

我需要获取在**jasper 文件**中定义的**参数**，以便可以根据这些参数的类型生成**输入以填充报告。** 我正在与 ****`jasperreports-5.0.0`****

 ***** * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-10T12:53:52.443

```
JasperReport jasperReport = (JasperReport)JRLoader.loadObject(new File("report.jasper"));
JRParameter[] params = jasperReport.getParameters();

for(JRParameter param : params) {
  if(!param.isSystemDefined() && param.isForPrompting()){
     param.getName();
     param.getDescription();
     param.getDefaultValueExpression();
     param.getNestedTypeName();
  }
} 
```****

# php - 更新数据库后重定向的代码

> ID：15926190
> 
> 赞同：1
> 
> 时间：2013-04-10T12:43:31.877
> 
> 标签：php, mysql

我有一个注册页面（index.php）。它需要两个值“用户名”和“密码”，并且使用这些值的数据库更新发生在 registrartion.php 页面上。我希望代码在更新我的数据库后将registration.php页面重定向到index.php页面，同时显示您已成功注册的消息。在这方面提供帮助。谢谢

注册.php

```
 <?php

 $host="l888888"; // Host name 
 $username="******"; // Mysql username 
 $password="t******"; // Mysql password 
 $db_name="f****"; // Database name 
 $tbl_name="m******"; // Table name 

 // Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form 
$myusername=$_POST['username']; 
mypassword=$_POST['password']; 

 // To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);

$query=mysql_query("INSERT INTO members(`username`,`password`) VALUES     ('$myusername','$mypassword')"); 

   if($query)
        header('Location: /home/faltutal/public_html/treasurehunt/index.php'); 
```

?>

如果我使用 header('Location:index.php')

错误显示无法修改标头信息 - 标头已发送（输出开始于 /home/faltutal/public_html/treasurehunt/registration.php:2）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:52:29.773

您可以通过传递 location:path 使用 header() 函数进行重定向：-如果要显示任何消息，可以通过 index.php?msg=your_message 或 flag 传递

```
<?php 
      $query=mysql_query("INSERT INTO members(`username`,`password`) 
                    VALUES('$myusername','$mypassword')"); 
       if($query)
            header('Location: http://my_ip/index.php.php?msg=added successfully');
?> 
```

或：您可以在 register.php 文件中显示消息，并通过单击链接，您可以重定向到 index.php 文件，如下所示

```
<?php 
      $query=mysql_query("INSERT INTO members(`username`,`password`) 
                    VALUES('$myusername','$mypassword')"); 
       if($query)
            echo "Successfully Added <a href='http://my_ip/index.php'>Click Here to Continue</a>";
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T12:45:56.047

尝试使用重定向

```
<?php 
      $query=mysql_query("INSERT INTO members(`username`,`password`) 
                    VALUES('$myusername','$mypassword')"); 
       if($query)
            header('Location: http://my_ip/mainpage.php.php');
?> 
```

对于标头函数 php，请参阅此[**链接**](http://php.net/manual/en/function.header.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:45:28.723

```
if ($query) { // if it's true
 header('Location: http://yoursite.com/index.php');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T12:47:44.790

使用[header()](http://php.net/manual/en/function.header.php)函数，您可以将页面重定向到您想要的任何位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-11T20:20:33.100

我有同样的问题..即使给出的大多数答案在桌面上都可以正常工作，但我意识到我仍然在移动设备上收到**标题已经发送**错误。我在此页面上找到了解决方案[如何自动重定向页面](http://www.wp3layouts.com/wp/php-auto-redirect-page-form-submission-database/)

如果有人遇到相同的桌面和移动问题，请在**insert**命令周围使用**ob_start()**和**ob_end_flush()**函数。

 **```
<?php ob_start();
        $query=mysql_query("INSERT INTO members(`username`,`password`) 
                VALUES('$myusername','$mypassword')"); 
        if($query)
        header('Location: http://my_ip/index.php.php?msg=added successfully');

    ob_end_flush(); ?> 
```**

# java - 没有 Hadoop 的 Canopy 集群

> ID：15926191
> 
> 赞同：0
> 
> 时间：2013-04-10T12:43:33.857
> 
> 标签：java, hadoop, mahout, canopy

我是 Mahout 的新手。我想在不使用 Hadoop 的独立系统上运行 Canopy Clustering。这可能吗？如果是这样，您能否让我知道相同的命令和步骤。

提前致谢， 拉什米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:31:14.980

通过查看主干上的代码，似乎 Canopy 需要一个 runSequential 参数，将其设置为 true 应该可以解决问题

# javascript - Node.js / Express - 如何在 JavaScript 中访问“req”

> ID：15926192
> 
> 赞同：1
> 
> 时间：2013-04-10T12:43:34.723
> 
> 标签：javascript, node.js, express

所以我有一个加载的页面`tournament/:key`，它正在向它传递一个`Tournament`对象。正如您从下面看到的，Jade 模板正在访问来自 的每个变量`Tournament`，例如，`#{tournemantData.name}`这会将`Tournament`'s打印`name`到页面上。的集合`matches`实际上存储为 中的数组`Tournament`，我想通过 JavaScript 文件访问这些，以便在此页面上使用它们，因为最终我希望生成一组图形括号。

我将如何`tournamentData`在 JavaScript 文件中访问它？

```
 app.get('/tournament/:key', function(req, res) {
    util.log('Serving request for url [GET] ' + req.route.path);
    Tournament.findByKey(req.params.key, function(err, tournamentData){
      if(!err && tournamentData){
        tournamentData = tournamentData;
        //util.log(tournamentData.teams[0]);
        res.render('tournamentDetails', { 'tournamentData' : tournamentData, seedsSerialized : JSON.stringify(tournamentData.teams) } );
      } else {
        util.log('Error in fetching Tournament by key : ' + req.params.key);
        res.json({
          'retStatus' : 'failure',
          'msg' : 'Error in fetching Tournament by key ' + req.params.key
        });
      }
    });
  }); 
```

玉：

```
 p Name: #{tournamentData.name}
        p ID: #{tournamentData._id}
        p Key: #{tournamentData.key}
        p Teams: #{tournamentData.teams}
        p Matches: #{tournamentData.matches}
        p Brackets:
        div.bracket
            #tournamentBrackets
            script(type='text/javascript')
                var seeds = var rankArray = !{seedsSerialized}; 
```

括号.js

```
numRounds = Math.log(seeds.length) / Math.log(2);

/**
 * Randomize array element order in-place.
 * Using Fisher-Yates shuffle algorithm.
 */
function shuffleArray(array) {
  for (var i = array.length - 1; i > 0; i--) {
    var j = Math.floor(Math.random() * (i + 1));
    var temp = array[i];
    array[i] = array[j];
    array[j] = temp;
  }
  return array;
};

shuffleArray(seeds);

var bracketData = {
    teams : [              // Matchups
        [ seeds[0].name,  seeds[1].name ],
    [ seeds[2].name,  seeds[3].name ]
  ],
  results : [[
      [ [1, 0], [1, 0] ],
      [ [1, 0], [1, 0] ]
    ]]
}

$(function() {
    $('#tournamentBrackets').bracket({
        init: bracketData
    });
}); 
```

编辑：我已经添加了 JavaScript 文件，这样做是使用 jQuery.bracket（我用来生成漂亮括号的 jQuery 项目），目前您可以看到我已经手动输入了团队的名称。

里面的括号数组与`brackets.js`中的格式相同`tournamentData.matches`，但基本思想是我想从这个 JavaScript 文件中访问这些信息，以便我可以打印这些团队的括号。

编辑：

```
$(document).ready(function() {
  // tournament  is now the same as tournmentData in your express route
  var tournamentText = $(#tournamentData).text();
  var tournament = JSON.parse(tournamentText);
  console.log(tournament, tournament);

  $(function() {
    $('#tournamentBrackets').bracket({
      init: bracketData
    });
  });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:56:00.393

您已经可以在 Jade 模板中访问该变量，这意味着您可以通过 Javascript 在该页面中访问它。

基本上你已经可以访问锦标赛数据对象了。

您可以做的是获取该锦标赛数据对象并将其设为全局 JS 变量或将其保留在页面范围内。

在你的模板中有这样的东西

```
- var matches = tournamentData.matches ;  //Specific scope 
```

或者

```
- window.matches = tournamentData.matches; //Binded to window object global 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:12:53.663

您可以通过您已经显示的路线在您的 Express 服务器上发布您的数据`/tournament/:key`。

就像是 ：

```
 app.get('/tournament-seeds/:key', function(req, res) {
    Tournament.findByKey(req.params.key, function(err, tournamentData){
      res.json({ tournamentData: tournamentData });
    });
  }); 
```

然后 ...

在您的brackets.js 文件中，您想要调用来获取您的种子（？）数据：

因此，将现有代码中括号.js 中的最后一个函数更改为这样的内容（为简洁起见）应该可以满足您的要求：

```
$(function() {   $.get('/tournament-seeds/somerandomkey', function(tournamentData){
   seeds = tournamentData.seeds;

    $('#tournamentBrackets').bracket({
        init: bracketData
    });   
  }); 
}); 
```

免责声明：我并不是说这是最好的方法，这是我目前能想到的最快的方法！

或者，您可以将 json 直接放入模板中的变量中。请参阅： [将数组传递给 JSON 对象以进行 Jade 渲染](https://stackoverflow.com/questions/8293363/passing-an-array-to-a-json-object-for-jade-rendering)

*   编辑 * 喜欢：

在您的路线上：

```
app.get('/tournament/:key', function(req, res) {
    util.log('Serving request for url [GET] ' + req.route.path);
    Tournament.findByKey(req.params.key, function(err, tournamentData){
      tournamentData = tournamentData;
      util.log(tournamentData.teams[0]);
      res.render('tournamentDetails', { 'tournamentData' : tournamentData, seedsSerialized : JSON.stringify(tournamentData.seeds) } );
    });
  }); 
```

在您的玉模板中：

```
script(type='text/javascript')
 var seeds = !{JSON.stringify(tournamentData.teams)}; 
```

在您的brakets.js 中删除您的 var 种子行。

未经测试，但它应该让你去。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:55:05.913

当您说“JavaScript 文件”时，我假设您指的是客户端 JavaScript 文件，而不是 Express 中的服务器端文件。

1.  第一种方法是根据每个请求动态构建客户端 javascript 文件，并将锦标赛数据直接添加到脚本中。
2.  第二个选项是在页面上包含锦标赛 _id，然后让您的客户端 javascript 向服务器执行 ajax 请求以获取其余锦标赛数据为 json
3.  第三个是将所有关于您的锦标赛的数据直接嵌入到 html 中，然后将其提取到您的客户端脚本中

将您的锦标赛数据作为 JSON 字符串嵌入模板中

## 玉模板

```
div(style="visibility: hidden")#tournamentData
  !{JSON.stringify(tournamentData)} 
```

## 客户端Javascript

现在在您的客户端javascript中，您可以访问#tournamentData div中的文本

```
$(document).ready(function() {
   // tournament  is now the same as tournmentData in your express route
   var tournamentText = $(#tournamentData).text()
   var tournament = JSON.parse(tournamentText)
   console.log(tournament, tournament)
   $('#tournamentBrackets').bracket({
     init: bracketData
   })
}) 
```

# performance - Jena，阅读模型需要很长时间

> ID：15926195
> 
> 赞同：2
> 
> 时间：2013-04-10T12:43:45.990
> 
> 标签：performance, jena, xerces

我试图了解给定的 url 是否是本体。（通过尝试将其读入耶拿）

通常，不可解析的页面（404、HTML 等）会引发各种异常，并且 Jena 会解析有效的 RDF。但是一些（无效的）文件需要 5-10 分钟才能解析！没有高 CPU 或 RAM 使用率，什么都没有！`model.read()`永远不会结束。（一旦我等了一个小时！）

```
try {
    Model model = ModelFactory.createOntologyModel();
    model.read("http://dbpedia.org/page/Pizza_Deliverance"); // <- THIS LINE NEVER FINISHES!

    // It is an ontology.
} catch (Exception e) {
    // Jena can't parse it
} 
```

另一个挂起的代码示例：（*这次 Model.read 由输入流提供）*

```
// In is an InputStream that holds http://dbpedia.org/page/Pizza_Deliverance
Model model;
try {
  model = ModelFactory.createOntologyModel();
  model.read(in, baseUri); // <- THIS LINE NEVER ENDS.
} catch (Exception e) {
  Logger.error("Error parsing file as ontology: " + baseUri, e);
  return null;
}
return model; 
```

这是堆栈跟踪（如果我等着得到一个）

```
java.lang.NullPointerException: null
at com.hp.hpl.jena.rdf.arp.impl.XMLHandler.endElement(XMLHandler.java:133) ~[jena-core-2.10.0.jar:2.10.0]
at org.apache.xerces.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:598) ~[xercesImpl-2.11.0.jar:na]
at org.apache.xerces.impl.XMLNamespaceBinder.handleEndElement(XMLNamespaceBinder.java:835) ~[xercesImpl-2.11.0.jar:na]
at org.apache.xerces.impl.XMLNamespaceBinder.endElement(XMLNamespaceBinder.java:599) ~[xercesImpl-2.11.0.jar:na]
at org.apache.xerces.impl.dtd.XMLDTDValidator.endNamespaceScope(XMLDTDValidator.java:2099) ~[xercesImpl-2.11.0.jar:na]
at org.apache.xerces.impl.dtd.XMLDTDValidator.handleEndElement(XMLDTDValidator.java:2050) ~[xercesImpl-2.11.0.jar:na] 
```

**我的问题：**

1.  我错过了什么吗？误用等
2.  如果给定页面（或字符串）可解析为本体，是否有任何替代方法可以检查？

**编辑：** 我通过在另一个线程中解析工作并在解析时间过长时终止线程来解决这个问题。但这不是一个真正的解决方案。

**编辑2：**

我查看了源代码和堆栈跟踪的长时间运行代码。问题在于，`org.apache.xerces.parsers.DTDConfiguration.parse(boolean)`如果这对您来说意味着什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T20:51:34.337

您正在尝试将 HTML 页面读取到 Jena 模型中。换句话说，您使用 application/rdf+xml 媒体类型为此 URI 发送 HTTP 请求。（有关链接数据中的内容协商的更多信息，请参见[http://wifo5-03.informatik.uni-mannheim.de/bizer/pub/LinkedDataTutorial/#Terminology](http://wifo5-03.informatik.uni-mannheim.de/bizer/pub/LinkedDataTutorial/#Terminology)） 网络上的链接数据资源存在重定向机制。可能，DBpedia 重定向会在那里产生问题，例如无限重定向循环，或者 DBpedia 底层的 virtuoso RDF 存储可能存在问题。你应该向 dbpedia 邮件列表提出这个问题，他们可以帮助你。

作为建议，如果您需要检查给定的 URI 是否返回链接的数据资源描述，您可以为几种不同的媒体类型发送简单的 HTTP get，例如 application/rdf+xml、application/text+n3 等，如果您在指定时间内收到任何响应，则使用 Jena 解析检索到的响应。这是示例：

```
HttpGet get = new HttpGet();
get.setURI(URI.create("http://dbpedia.org/resource/Pizza_Deliverance"));
get.setHeader("Accept", "text/n3");
HttpClient client = new DefaultHttpClient();
HttpResponse response = client.execute(get);
HttpEntity entity = response.getEntity();
System.out.println(EntityUtils.toString(entity)); 
```

此代码返回描述 Pizza Deliverance 资源的 N3 文档。如果您尝试使用“application/rdf+xml”媒体类型为您的[http://dbpedia.org/page/Pizza_Deliverance](http://dbpedia.org/page/Pizza_Deliverance) URI 使用此代码，您将收到 HTTP 406 异常。此错误可能意味着您了解 URI 的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-06T17:58:21.120

我有同样的问题`http://bio2rdf.org`。当我用 curl 请求它时，我看到它只返回 HTML，就像你的情况一样。所以我认为 Jena 应该在看到它无法理解格式时立即返回某种 Unparsable-Exception 。

在您的情况下，修复应该是使用正确的 dbpedia 资源，而`http://dbpedia.org/resource/Pizza_Deliverance`不是`http://dbpedia.org/page/Pizza_Deliverance`(difference is `resource`vs. `page`)，因为`http://dbpedia.org/page/Pizza_Deliverance`它只是用于在浏览器中读取它的 HTML 表示。

作为更通用的解决方法，我编写了以下我自己的`readModel`方法，您应该在这里找到它：[https](https://gist.github.com/white-gecko/8849251) ://gist.github.com/white-gecko/8849251 。如果它得到一个不接受的数据类型的答案，它只会返回`null`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:07:12.957

您可以解决以下阅读问题；

尝试使用

`Model model = ModelFactory.createOntologyModel(OntModelSpec.OWL_MEM_RULE_INF, null);`

代替

`Model model = ModelFactory.createOntologyModel();`

[您可以在此处](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/ontology/OntModelSpec.html)找到有关 OntModelSpec 类型的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T18:42:50.810

[几年前，我使用http://www.mindswap.org/2003/pellet/demo.shtml](http://www.mindswap.org/2003/pellet/demo.shtml)检查了我的本体或本体 URI 。也许你可以先用颗粒检查你的网址。该页面还为您的本体复杂性提供了建议。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T19:23:15.400

您正在访问[http://dbpedia.org/page/Pizza_Deliverance](http://dbpedia.org/page/Pizza_Deliverance)并获得

```
java.lang.NullPointerException: null
at com.hp.hpl.jena.rdf.arp.impl.XMLHandler.endElement 
```

即数据看起来已损坏。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T08:29:36.547

您必须将基本参数放在您的读取方法中。

```
Model model = ModelFactory.createOntologyModel();
model.read("http://dbpedia.org/page/Pizza_Deliverance", "http://www.example.com/base/"); 
```

看起来返回的模型 URI 是相关的。我已经检查过了，它正在工作。

干杯

# php - 将 UTF-8 字符插入 sql server 2008 表

> ID：15926196
> 
> 赞同：1
> 
> 时间：2013-04-10T12:43:47.190
> 
> 标签：php, sql-server-2008, encoding, utf-8

我正在使用 php 将电子邮件内容文本作为 UTF-8 字符串插入到 SQL Server 2008 数据库表中，除了一封特定的电子邮件外，它工作正常。

INSERT 命令失败并出现以下错误：

> 将查询字符串转换为 UTF-16 时出错：目标多字节代码页中不存在 Unicode 字符的映射。

导致它的文本是电话号码的分机文本：

![在此处输入图像描述](https://i.stack.imgur.com/82gdu.jpg)

这个应该是+91-98XXXXXXX（我加了XX）的“xF7”一定变成了UTF-16还是什么？

在插入数据库之前，我使用 mb_detect_encoding 进行了 UTF-8 检查：

```
$HTMLencode = mb_detect_encoding(HTMLString, mb_detect_order(), true); 
```

$PLAINencode = mb_detect_encoding(PLAINString, mb_detect_order(), true);

正如你所看到的，我什至考虑了“多部分电子邮件”——HTML 的一部分和 PLAIN 文本的一部分。两项检查都返回**UTF-8**（这意味着“xF7”愚弄了我.. :)）

我还使用 UTF-8//IGNORE 做了 iconv() 以忽略无效字符，没有任何帮助，我该如何在 php 中解决这个问题？

上面的代码适用于 99% 的电子邮件，除了一封引发此错误的特殊电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:38:58.050

`0xF7``÷`在 Windows-1252 中编码。您只是将数据直接传递到数据库吗？

您应该使用正确读取电子邮件标头的电子邮件库，其中说明了电子邮件中使用的字符编码。然后，该库会理想地从该编码转换为 UTF-8，然后再将其交给您。

`mb_detect_encoding`几乎没有用，因为它只能访问字节并且也不应用任何启发式方法。如果它为具有 的字符串提供 UTF-8 则尤其无用，而该字符串`0xF7`不能出现在 UTF-8 中

# jsp - 我们是否必须在服务器上启用 JSONP

> ID：15926200
> 
> 赞同：3
> 
> 时间：2013-04-10T12:44:01.063
> 
> 标签：jsp, jsonp

我创建了一个使用 JSONP 的应用程序。该应用程序在我的本地服务器上完美运行。但是当部署在实时服务器中时，它没有显示 apt 输出。我怀疑现场服务器不支持 JSONP 的地方。所以我们必须为 JSONP 启用某些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-03T18:30:32.237

看看这些东西…………

**[JSONP 到底是什么？](https://stackoverflow.com/questions/2067472/what-is-jsonp-all-about?rq=1)**

**[默认启用 JSONP](https://github.com/visionmedia/express/issues/1304)**

**[JSONP 与 node.js 快递](http://vaboone.wordpress.com/2011/08/17/jsonp-with-node-js-express/)**

**[JSONP，快速](http://niryariv.wordpress.com/2009/05/05/jsonp-quickly/)**

**[如何设置 JSONP？](https://stackoverflow.com/questions/9519209/how-do-i-set-up-jsonp)**

# asp.net - IIS 作为反向代理 - 压缩来自后端服务器的重写响应

> ID：15926203
> 
> 赞同：22
> 
> 时间：2013-04-10T12:44:22.673
> 
> 标签：asp.net, iis, reverse-proxy, http-compression, arr

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-10T21:20:19.627

我自己已经弄清楚了。

需要做些什么才能使其正常工作：

*   `Accept-Encoding`在将请求路由到后端服务器之前必须删除标头，以便可以使用出站规则重写响应
*   **标头必须通过附加的出站规则恢复，以便在将响应发送到客户端之前压缩模块启动时出现**

我决定这样做：

*   向重写规则添加一个新的服务器变量以保存客户端发送的原始标头：

    ```
    <set name="HTTP_X_ORIGINAL_ACCEPT_ENCODING" value="{HTTP_ACCEPT_ENCODING}" /> 
    ```

    （我把它放在清除`HTTP_ACCEPT_ENCODING`变量的行之前）

*   添加新的出站规则：

    ```
    <rule name="RestoreAcceptEncoding" preCondition="NeedsRestoringAcceptEncoding">
      <match serverVariable="HTTP_ACCEPT_ENCODING" pattern="^(.*)" />
      <action type="Rewrite" value="{HTTP_X_ORIGINAL_ACCEPT_ENCODING}" />
    </rule> 
    ```

    以及附带的前提条件：

    ```
    <preCondition name="NeedsRestoringAcceptEncoding">
      <add input="{HTTP_X_ORIGINAL_ACCEPT_ENCODING}" pattern=".+" />
    </preCondition> 
    ```

到目前为止，它就像一个魅力。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-28T21:11:55.540

*要在保留 gzip 压缩响应*的同时解决原始发布者的问题，只需执行以下操作：

1.  更新您面向公众的 Web 服务器上的注册表，如下所示：

    一个。对于 64 位网站，在具有管理员权限的命令控制台中运行以下命令：`reg add HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\InetStp\Rewrite /v LogRewrittenUrlEnabled /t REG_DWORD /d 0`

    湾。对于 32 位网站，在具有管理员权限的命令控制台中运行以下命令：`reg add HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432node\Microsoft\Inetstp\Rewrite /v LogRewrittenUrlEnabled /t REG_DWORD /d 0`

2.  重置 IIS

3.  禁用静态压缩

    一个。为此，我插入了以下我的网络配置：`<urlCompression doStaticCompression="false" doDynamicCompression="true" dynamicCompressionBeforeCache="false" />`

4.  在 IIS 管理器的服务器节点中，双击`Modules`图标，然后在右侧，单击“查看有序列表”并确认您的静态/动态压缩模块朝上，URL 重写模块朝下

**请注意**

我看到很多关于这个问题的解决方案在网络上浮动，其中 HTTP_CONTENT_TYPE 请求标头作为 URL 重写规则的一部分被清除（包括此页面上的答案）。应该知道，虽然这确实解决了 500.52 错误的原始问题，但响应上的 gzip 压缩是**REMOVED**。这可能是理想的结果，但如果需要 gzip 压缩，上述解决方案将起到作用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-18T03:03:32.583

PS：以下解决方案仅在您可以控制应用服务器的情况下才有效。

它基本上是让 Web 服务器进行压缩，并让应用程序服务器完成应用程序应该做的重任（不压缩）。

如果您在应用服务器上禁用压缩，您从应用服务器获得的响应是​​未压缩的。在 Web 服务器上，您应该启用压缩，因此 Web 服务器将在响应客户端（浏览器）时遵守 HTTP 标头“Accept-Encoding: gzip,deflate”。

此配置将卸载应用服务器上的 CPU，但会增加 Web 服务器和应用服务器之间的网络流量。如果您在内部网络上，它不会对性能产生太大影响。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-29T15:53:51.513

只需在重写规则中添加“serverVariables”标签就可以了：

```
<rewrite>
        <rules>
            <rule name="ReverseProxyInboundRule1" stopProcessing="true">
                <match url="(.*)" />
                <action type="Rewrite" url="http://otherurl{R:1}" />

                <serverVariables>
                    <set name="HTTP_ACCEPT_ENCODING" value="" />
                </serverVariables>
            </rule>

       </rules>
</rewrite> 
```

# ios - 检测插入的单元格，然后让它成为FirstResponder

> ID：15926205
> 
> 赞同：2
> 
> 时间：2013-04-10T12:44:29.617
> 
> 标签：ios, objective-c, uitableview

对于我的自定义单元格，举个简单的例子，我只有一个`UITextField`，有没有办法让`becomeFirstResponder`刚刚插入的单元格`insertRowsAtIndexPaths`？

我需要一种方法来检测这一点，以便它在插入后和**插入动画结束时**成为第一响应者。

任何想法甚至接近它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:00:46.560

像这样的东西？？

```
- (void) insertRows
{
    .
    .
    .

    [tableView beginUpdates];
    [tableView insertRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationRight];
    [tableView endUpdates];

    NSIndexPath p = [indexPaths lastObject];

    MyCustomCell *cell = [cellForRowAtIndexPath:p];
    [cell.textField becomeFirstResponder];
} 
```

# javascript - jqplot：画系列

> ID：15926206
> 
> 赞同：0
> 
> 时间：2013-04-10T12:44:31.150
> 
> 标签：javascript, jquery, charts, jqplot

我想使用 jqplot 绘制一些数据，但我有一个小问题。

我使用的代码是这样的（[小提琴上的代码](http://jsfiddle.net/vTwU2/4/)）：

```
$.jqplot('chart1', [[202],[249],[148]], {
    seriesColors : ['#ff0000', '#0f0', '#00f'],
    seriesDefaults : {
       renderer :$.jqplot.BarRenderer,
       pointLabels : {
           show : true
       },
       tickRenderer : $.jqplot.CanvasAxisTickRenderer,
        rendererOptions : {
            barDirection : 'horizontal'
        }
    },
    axes: { 
        yaxis: {
            renderer: $.jqplot.CategoryAxisRenderer, 
            ticks: ["some value", "other series", "third series"],
        },
    },
}); 
```

该图有 3 个水平区域，“某个值”、“其他系列”和“第三系列” “其他系列”和蓝色到“第三系列”）。

**我需要如何格式化数据才能得到这个？**

作为额外的问题：

1.  我希望 yaxis 和相应的 ax 标签之间有几个像素的边距。我该如何设置？

2.  该图具有背景颜色（淡黄色）。如何消除该颜色并获得容器具有的任何颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:33:59.193

您需要将数据更改为

```
data = [[[202,1],[248,2],[148,3]]]; 
```

[请参阅此处](http://jsfiddle.net/AnthonyLeGovic/vTwU2/12/)的工作示例。

**PS1：**您可以通过设置 barWidth = xx 来更改条的宽度；其中 xx 以像素为单位（在给定示例中为 50px）。

**PS2：**对于您的第一个额外问题，您可以添加如下内容：

```
$("#chart1 .jqplot-grid-canvas").offset({left:$("#chart1 .jqplot-grid-canvas").offset().left+5});
$("#chart1 .jqplot-series-shadowCanvas").offset({left:$("#chart1 .jqplot-series-shadowCanvas").offset().left+5});
$("#chart1 .jqplot-series-canvas").offset({left:$("#chart1 .jqplot-series-canvas").offset().left+5});
$("#chart1 .jqplot-point-label").offset({left:$("#chart1 .jqplot-point-label").offset().left+5});
$("#chart1 .jqplot-highlight-canvas").offset({left:$("#chart1 .jqplot-highlight-canvas").offset().left+5});
$("#chart1 .jqplot-highlighter-tooltip").offset({left:$("#chart1 .jqplot-highlighter-tooltip").offset().left+5});
$("#chart1 .jqplot-barRenderer-highlight-canvas").offset({left:$("#chart1 .jqplot-barRenderer-highlight-canvas").offset().left+5});
$("#chart1 .jqplot-event-canvas").offset({left:$("#chart1 .jqplot-event-canvas").offset().left+5}); 
```

我很确定您可以使其成为一种更清洁的方式，但它可以工作（将`+5`值更改为您需要的任何值以移动图表块）。[请在此处](http://jsfiddle.net/AnthonyLeGovic/vTwU2/14/)查看更新的工作示例

# javascript - Chrome 中的 JavaScript cookie 问题

> ID：15926211
> 
> 赞同：1
> 
> 时间：2013-04-10T12:44:37.463
> 
> 标签：javascript, jquery, cookies, settimeout, session-cookies

我一直在提供此代码以在许多不同的网站上实现，但是在 google chrome 中存在工具栏在 300 毫秒内出现和消失的问题（在 index.html 中设置的时间）。我已经在 FireFox 和 Safari 中检查过它，它可以正常工作，但奇怪的是在 Chrome 中没有。我知道这是很多代码，但任何提示都会非常受欢迎。

完整代码：http: [//jsfiddle.net/C4EkZ/](http://jsfiddle.net/C4EkZ/)

```
 if (cookieBar) {
        cookieBar.init( {

            el: 'div',
            msg: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.',
            url: 'http://www.google.com',
            linkText: 'Here',
            linkTarget: '_new',
            closeLink: true,
            animateOpen: {                  
                opacity: '1',
                paddingTop: '10px',
                paddingBottom: '10px',
                duration: 800
            },
            animateClosed: {                    
                opacity: '0',
                paddingTop: '0px',
                paddingBottom: '0px',
                duration: 800,
                complete:function() {
                    var c = document.getElementById('cookieBar');
                    document.body.removeChild(c);
                }
            },
            delay: 500,
            hideForSession: true
        }); 
    }; 
```

谢谢

# deployment - maven was6:installApp TransferFailed

> ID：15926214
> 
> 赞同：0
> 
> 时间：2013-04-10T12:44:54.900
> 
> 标签：deployment, connection, websphere, file-transfer

我正在尝试通过 SOAP 将我的耳朵部署到带有 maven 插件 was6 的远程 Websphere 8.5。我用正确的主机、节点、单元、服务器、端口等设置了正确的耳朵。

但是当我尝试安装应用程序时，我得到了 WASX7017E: ConnectException - Connection denied with a TransferFailedException

在日志中，本地和远程都没有。正如我在运行 mvn installApp 时使用 netstat 看到的那样，在服务器端尝试了许多连接，这些连接的状态为 TIME_WAIT。

该插件似乎与 v8.5 一起使用会导致其他功能，例如 wsListApp 工作。我试图用谷歌搜索但没有结果。

有人在我之前收到此错误吗？或者有谁知道我该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T09:04:41.903

was6-maven-plugin 在“target\was6-maven-plugin\”文件夹下生成一个临时 ant 文件，然后使用 -f 选项和先前生成的 ant 文件调用 $WAS_HOME\bin\ws_ant.sh/bat 实用程序。

如果您不使用 clean 目标，文件应该继续存在，以便您可以使用 ws_ant 查找真正的错误，并查找您的配置或插件中是否存在错误。

如果您在插件中发现错误，请在此处打开一个问题：http: [//jira.codehaus.org/browse/MWAS](http://jira.codehaus.org/browse/MWAS)

在此链接中，您将找到 wsInstallApp 目标中可用的所有选项： [http ://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/index.jsp?topic=%2Fcom.ibm.websphere.javadoc.doc %2Fweb%2Fapidocs%2Fcom%2Fibm%2Fwebsphere%2Fant%2Ftasks%2FInstallApplication.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/index.jsp?topic=%2Fcom.ibm.websphere.javadoc.doc%2Fweb%2Fapidocs%2Fcom%2Fibm%2Fwebsphere%2Fant%2Ftasks%2FInstallApplication.html)

问候，

哈维尔·穆尔切戈

# java - 测试与 Mysql 数据库的连接时出错

> ID：15926217
> 
> 赞同：0
> 
> 时间：2013-04-10T12:44:58.367
> 
> 标签：java, mysql, jdbc

```
 import java.sql.Connection;
    import java.sql.DriverManager;
    import java.sql.SQLException;

    //This class is for testing connection with mysql database 
    class JDBCTest {
    // path to database is stored in string url

        private static final String url = "jdbc:mysql://localhost";

    // username is stored  in string root

        private static final String user = "root"; //username

   // password is stored in string password 

       private static final String password = "swapnil";//password

        public static void main(String args[]) {
            try {
//i have stored driver in c:\javap\
            Class.forName("com.mysql.jdbc.Driver").newInstance(); 
                Connection con = DriverManager.getConnection(url, user, password);
                System.out.println("Success");

            } catch (Exception e) {
                System.out.println("hi");
                e.printStackTrace();
            }
        }
    } 
```

每当我尝试运行该程序时，我都会遇到异常
`java.lang.ClassNotFoundException: com.mysql.jdbc.Driver`

我正在使用 mysql 数据库，我的操作系统是 windows 7 64 位。我已经包括了`mysql-connector-java-5.1.22-bin in jdk/jre/lib/ext`我还设置了`CLASSPATH`环境变量，但没有任何解决办法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:50:07.240

首先，你不应该在 JDK 的 jre/lib/ext 目录下放任何东西。

相反，`-cp`在启动应用程序时使用该选项，并确保在类路径中有驱动程序的**jar**（而不是 bin 目录）：

```
java -cp mysql-xx.jar;... com.foo.bar.JDBCTest 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:53:30.063

网址不完整使用：

`private static final String url = "jdbc:mysql://localhost:3306/databasename";`

也正如@JB Nizet 提到的那样，不要将罐子放在jdk的库中。

# java - 在 JavaFX TableView 中显示包装的 bean 属性

> ID：15926223
> 
> 赞同：0
> 
> 时间：2013-04-10T12:45:12.887
> 
> 标签：java, javafx-2, javabeans

我正在尝试使用 TableView 来显示用户创建的一些数据，但不幸的是，没有显示一些具体的列内容。有问题的列是一种两级 bean，或者换句话说，是一个包装的 bean：

*省略了 getter 和 setter*

```
public class ItemBean {

    private VisaoProdutoPreVenda produto;
    private BigDecimal quantidade = new BigDecimal("0.0");
    private BigDecimal valorUnitario = new BigDecimal("0.0");
    private BigDecimal valorDesconto = new BigDecimal("0.0");
    private BigDecimal valorAcrescimo = new BigDecimal("0.0");
    private BigDecimal aliquotaDesconto = new BigDecimal("0.0");
    private BigDecimal aliquotaAcrescimo = new BigDecimal("0.0");
    private Integer ordem;
    private String idVendedor;
    private Boolean fracionado = false;
    private boolean cancelado = false;
    private String status = "AB";

}

public class VisaoProdutoPreVenda{

    private int id;
    private int idProduto;    
    private BigDecimal valorDesconto;
    private BigDecimal quantidadeDisponivel;    
    private BigDecimal vlUnitario;
    private int idEmpresa;    
    private Integer idLinha;
    private int idClasse;    
    private int idSubclasse;
    private String nomeLinha;    
    private String unidade;
    private String descricao;    
    private String descricaoComplementar;
    private String fracionar;    
    private int idTipoDesconto;

} 
```

我想在表中使用 VisaoProdutoPreVenda bean 的三个字段，所以我尝试了这个：

```
public class ControladorPainelPreVenda {

    ...

    @FXML
    private TableView<ItemBean> tabelaItens;
    @FXML
    private TableColumn colunaCodigo;
    @FXML
    private TableColumn colunaDescricao;
    @FXML
    private TableColumn colunaLinha;
    @FXML
    private TableColumn colunaQuantidade;
    @FXML
    private TableColumn colunaValorLiquido;
    @FXML
    private TableColumn colunaValorTotal;
    private ObservableList<ItemBean> itens = FXCollections.observableArrayList();

    ...

    private void configurarTabela() {

        /* These three first columns content aren't shown */

        colunaCodigo.setCellValueFactory(new PropertyValueFactory<ItemBean,String>("produto.id"));
        colunaDescricao.setCellValueFactory(new PropertyValueFactory<ItemBean,String>("produto.descricao"));
        colunaLinha.setCellValueFactory(new PropertyValueFactory<ItemBean,String>("produto.nomeLinha"));
        colunaQuantidade.setCellValueFactory(new PropertyValueFactory<ItemBean,BigDecimal>("quantidade"));
        colunaValorLiquido.setCellValueFactory(new PropertyValueFactory<ItemBean,BigDecimal>("valorLiquido"));
        colunaValorTotal.setCellValueFactory(new PropertyValueFactory<ItemBean,BigDecimal>("valorTotal"));
        tabelaItens.setItems(itens);
    }

    ...
} 
```

我不知道我是否可以在 PropertyValueFactory 中使用像“produto.id”这样的符号。我如何配置这三列来显示我想要的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:53:57.940

将在搜索 getter 之前`TableView`搜索`*Property`方法，所以我会首先设置我的 bean，以便我的字段是`[type]Property`'s（例如

```
public class VisaoProdutoPreVenda{
    private SimpleIntegerProperty id;
    private SimpleIntegerProperty idProduto;
    ...

    public SimpleIntegerProperty idProperty(){
        return id;
    }
} 
```

然后我会`VisaoProdutoPreVenda`从`ItemBean`.

```
public class ItemBean {
    private VisaoProdutoPreVenda produto;
    ...
    private String status = "AB";

    public SimpleIntegerProperty produtoIdProperty(){
        return produto.idProperty();
    }
} 
```

更改`PropertyValueFactory`这些字段的设置以反映 bean 中的更改。

```
colunaCodigo.setCellValueFactory(new PropertyValueFactory<ItemBean,Integer>("produtoId")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:04:51.473

我解决了实现回调接口的问题：

```
public class MultiPropertyValueFactory<B,T> implements Callback<TableColumn.CellDataFeatures<B, T>, ObservableValue<T>> {

    private String propriedade;

    public MultiPropertyValueFactory(String propriedade) {
        this.propriedade = propriedade;
    }

    @Override
    public ObservableValue<T> call(TableColumn.CellDataFeatures<B, T> dados) {
        Object elemento=dados.getValue();
        String propriedades[]=propriedade.split("\\.");
        for(int indice=0;indice<propriedades.length;indice++){
            elemento=recuperarElemento(elemento,propriedades[indice]);
        }
        return new SimpleObjectProperty<T>((T) elemento);
    }

    private Object recuperarElemento(Object elemento,String propriedade) {
        try {

            /*using reflection here*/

            Method metodo = RecuperadorMetodos.recuperarMetodoGetPeloNomeDaPropriedade(elemento.getClass(),propriedade);
            return metodo.invoke(elemento);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return new Object();
    }
} 
```

并将此类的对象传递给 setCellValueFactory() 方法：

```
private void configurarTabela() {
    colunaCodigo.setCellValueFactory(new MultiPropertyValueFactory<ItemBean,String>("produto.id"));
    colunaDescricao.setCellValueFactory(new MultiPropertyValueFactory<ItemBean,String>("produto.descricao"));
    colunaLinha.setCellValueFactory(new MultiPropertyValueFactory<ItemBean,String>("produto.nomeLinha"));
    .....
} 
```

# wordpress - Wordpress wp-login 未定义重定向

> ID：15926226
> 
> 赞同：0
> 
> 时间：2013-04-10T12:45:18.010
> 
> 标签：wordpress, login, undefined

将 wordpress 安装从远程服务器移回我的本地主机后，我遇到了一个似乎无法解决的问题。

*   下载所有文件和数据库
*   更改了选项数据库表中的 url
*   将 .htaccess 更改为在正确的目录中运行

出于某种原因，当我现在转到 WP 管理目录并尝试登录时，在按下登录按钮后，它会重定向到 /wp-login.phpundefined/。注意 wp-login.php 后面的未定义。它当然会给出一个 404 页面。我也没有登录，当我再次进入 WP 管理员时，我仍然需要登录。登录代码具有正确的表单操作，因此它发生在登录脚本过程中的某个地方。

有人知道可能导致这种情况的原因吗？干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:43:22.403

`wp-login.php`可用于（重新）设置 URI。

找到这一行：

```
require( dirname(__FILE__) . '/wp-load.php' ); 
```

并在下面插入以下行：

```
// FIXME: do comment/remove these hack lines (once the database is updated).

update_option('siteurl', 'http://your.domain.name/the/path' );
update_option('home', 'http://your.domain.name/the/path' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:57:01.303

编辑您`wp-config.php`以强制您的 WP 安装所在的域。

```
define('WP_HOME','http://example.com');
define('WP_SITEURL','http://example.com'); 
```

如果这不起作用，请使用[Fine and Replace](http://interconnectit.com/products/search-and-replace-for-wordpress-databases/)工具将您站点 URL 的所有实例从旧数据库替换为新站点 URL。

即查找和替换。

```
http://localhost/ 
```

至

```
http://example.com/ 
```

# c++ - 如何将图像放在常规文本行之外的 QTextEdit 中？

> ID：15926228
> 
> 赞同：2
> 
> 时间：2013-04-10T12:45:20.277
> 
> 标签：c++, html, image, qt, css-position

我希望能够将图像插入到文本行中任何给定字母上方的 QTextEdit 中。

最初，我认为我可以在 html 对象中使用 position:absolute 属性，但 QTextDocument 不支持。我也尝试在光标处插入 html 图像，但我能用这种方法获得的最接近的方法是在使用 html 的文本行中插入图像，如下所示：

```
<img src="/smiley.png" style="position:absolute; left:200px; right:200px;" height="16" width="16"/> 
```

结果是这样的：

s:) 麦莉

但例如，我希望笑脸出现在字母“m”上方。（抱歉，不能发图片）

这让我相信我需要使用 background-image 属性，但鉴于我使用的是 QTextEdit，我不确定我会将其应用于哪个 Qt 对象以使图像仅出现在'米'。

有没有人对 QTextEdit 中图像的绝对定位有任何提示？

*编辑*

虽然这会将图像放在字母所在的位置，但它会使图像与文本保持一致。而我想要实际文本上方的图像。像这样：

:)
笑脸

微笑在文本上方，但不在其自己的文本行上。在线条之间的空间中排序。

# android - 使用 proguard 在 Facebook SDK 3.0 中发布无法正常工作

> ID：15926234
> 
> 赞同：1
> 
> 时间：2013-04-10T12:45:36.577
> 
> 标签：android, facebook, facebook-graph-api, proguard, facebook-android-sdk

我的 android 应用程序在没有 Proguard 的情况下可以完美运行，但是当与 Proguard 一起使用时，我确实获得了`user_info`许可，但没有获得`publish_actions`许可。

我什至试过

```
-keep class com.facebook.*
-keep class com.facebook.android.*
-keep class com.myapp.classcallingfb 
```

但这也没有帮助。

我什至尝试升级到 FB Android SDK 3.0.1，但没有成功。

你能建议一个解决这个问题的方法吗，一个hacky的解决方案就足够了，这样我仍然可以使用Proguard并保护我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T23:34:08.677

发布链接作为答案。将另一个问题中的答案与您上面的内容结合起来。

这主要是因为 SDK 中有一些代码使用反射来发出图形请求，这与 Proguard 不兼容。

[在 Android Facebook sdk 3.0 中使用 proguard 时出错](https://stackoverflow.com/questions/13538070/error-on-using-proguard-with-android-facebook-sdk-3-0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T19:37:22.913

我遇到了同样的问题，但就我而言，问题不是proguard。签名导出后，api 密钥发生了变化。

我的解决方案是找出新密钥。看这里（第 2 步）：

[http://www.helloandroid.com/tutorials/using-facebook-sdk-android-development-part-1](http://www.helloandroid.com/tutorials/using-facebook-sdk-android-development-part-1)

# c# - 在按钮click..inside gridview的不同行中创建组合框？

> ID：15926235
> 
> 赞同：0
> 
> 时间：2013-04-10T12:45:38.790
> 
> 标签：c#, asp.net

我想在按钮单击事件上在gridview中创建组合框...每次当我单击按钮时，都会在下一行中创建一个组合框..意味着每次只有行将更改列将保持不变...

```
private void Buttton_Click(object sender, Event e)
{

   DataGridViewComboBoxCell CellColumn1, CellColumn2, CellColumn3;
   dataGridView1.Columns.Add("Col1", "Column1");
   dataGridView1.Columns.Add("Col2", "sanjeev");

   //make row 1 at all columns into combobox cell
   dataGridView1.Rows[j].Cells[0] = new DataGridViewComboBoxCell();
   dataGridView1.Rows[j].Cells[1] = new DataGridViewComboBoxCell();

   CellColumn1 = (DataGridViewComboBoxCell)this.dataGridView1.Rows[j].Cells[0];
   CellColumn2 = (DataGridViewComboBoxCell)this.dataGridView1.Rows[j].Cells[1];

   j++;
} 
```

我试过这个逻辑..这只会在第一次按钮点击时在gridview中创建combox但是当我再次点击按钮时这不起作用..

谁能帮我吗....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:18:45.847

终于我得到了答案……

私人无效BTN_ADD_Click（对象发送者，EventArgs e）{int j = 0；

```
 DataGridViewComboBoxCell ColumnItem2 = new DataGridViewComboBoxCell();  // create a combobox cell
            ColumnItem2.ValueMember = "Display";
            ColumnItem2.DisplayMember = "Display";

          for(int i=0;i<10;i++)// it will add elements to a combox
           {
               ColumnItem2.Items.Add(i);
               }

      dataGridView1.Rows.Add();  // add row everytime to add a new combobox to the next row.

         int columncount = dataGridView1.ColumnCount;// count no of coloumns
         int rowcount = dataGridView1.RowCount;;// count no of rows 
```

//我保留了列和行的计数，以便通过行和列计数你可以指定哪一行或者你想在gridview中添加组合框//下面我将组合框的行和列硬编码为2,2，所以它会添加第二行和第二列的组合框。

```
 dataGridView1[2, 2] = ColumnItem2;
         //dataGridView1[2, j] = ColumnItem2; 
```

//将combox添加到第二列和行的一般方法是每次添加一个，因为每次单击按钮时都会增加j值，它将在第二列的下一行添加combox..您可以指定行和列的相同方式根据您的需要。

j++;

}

希望这对其他人有帮助....

[http://csharpprobsandsoln.blogspot.in/2013/04/how-to-add-combobox-dynamically-to.html](http://csharpprobsandsoln.blogspot.in/2013/04/how-to-add-combobox-dynamically-to.html)

# javascript - 使用带有 jQ uery POST 的 onClick 不起作用

> ID：15926236
> 
> 赞同：0
> 
> 时间：2013-04-10T12:45:39.793
> 
> 标签：javascript, jquery, html, function, post

首先，我正在尝试使用 HTML 元素（按钮）在 onClick 上执行我拥有的 JavaScript 函数。该函数被称为 Unban(player) ，它从我正在处理的事情中“解除”玩家。

元素看起来像这样，

```
<button name="button" id="button" onclick="Unban('somebody')"/> 
```

JavaScript 看起来像这样：

```
function Unban(player){
    if (confirm("Are you sure you want to remove the ban on " + player + "?")){
        $.post("actions/unban.php",{Player:player},function(result){
            if (result.contains("Error:"){
                alert(result);
            }

            else{
               alert("You have unbanned " + player + "!");
            }
});

    }

} 
```

问题是：当我调用 Unban(player) 函数时，什么都没有发生。我做了一些测试，它在没有 $.post 的情况下可以正常运行，所以它必须与它相关。

PHP 文件工作正常并且可以正常工作。它也在 $.post 中被正确引用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:48:26.170

存在语法错误。`)`此处缺少A

```
if (result.contains("Error:")){
                alert(result);
 } 
```

# google-chrome - chrome的任务管理器中显示的内存使用量和内存时间线之间的巨大差异

> ID：15926239
> 
> 赞同：3
> 
> 时间：2013-04-10T12:45:48.883
> 
> 标签：google-chrome

我正在尝试使用 chrome 的内存时间线来分析我的应用程序的内存使用情况。但是，我看到时间线中报告的值与 chrome 任务管理器显示的值之间存在巨大差异。昨天我在 chrome 上分析 myweb 页面时，时间线上的内存使用量在 11MB 到 14MB 之间。然而 chrome 的任务管理器徘徊在 135MB 左右，为什么会有这种差异？如果时间线中显示的内存使用正确，任务管理器使用的内存是多少？

# windows - 如何在 Windows 显示屏的右上角启动 emacs？

> ID：15926244
> 
> 赞同：1
> 
> 时间：2013-04-10T12:45:56.233
> 
> 标签：windows, emacs, emacs24

`geometry`回到我的 Unix 时代，我曾经可以通过在启动时指定一个选项来在屏幕的右上角启动 Emacs 。但是，如果我使用

```
C:\Emacs\emacs-24.2\bin\runemacs.exe -geometry 80x60-0+0 --debug-init 
```

在 Windows7 上，Emacs 窗口不会停留在右上角。它确实出现在右上角，然后窗口在 Emacs 初始化时调整大小，并移出右上角。似乎调整大小是由于字体的规范，因为当我在 .emacs 中注释掉以下行时，窗口停留在右上角。

```
(set-default-font "-*-Courier New-normal-r-*-*-12-90-*-*-c-*-*-ansi-") 
```

有谁知道我如何强制 Emacs 进入屏幕的右上角（除了使用默认字体）。;)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T01:44:39.640

两种可能的解决方案

1.  在命令行上指定字体，以便在几何选项之后不对其进行处理。

`runemacs -fn "Courier New-9" -geometry 80x60-0+0 --debug-init`

1.  更改字体后在 .emacs 中指定几何图形（-0 在这种情况下不起作用，因为符号被 lisp 解析器丢弃）。

`(setq initial-frame-alist '((top . 0) (left . -1) (width . 80) (height . 60)))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:31:04.257

不应该是`-0+0`右上角吗？这对我来说是使用 Emacs 21.3 的诀窍。

# vim - vim 为所有搜索结果添加书签

> ID：15926248
> 
> 赞同：0
> 
> 时间：2013-04-10T12:46:00.257
> 
> 标签：vim

是否可以在 vim 中像 notepad++ 那样为所有搜索结果添加书签？即所有搜索结果都存储在底部窗口中。因此，无需搜索您已经搜索过的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:56:50.583

当您通过搜索当前缓冲区时

```
:vimgrep /{pattern}/ % 
```

取而代之的是`/{pattern}`，Vim 会将匹配项存储在*quickfix 列表中*。您可以通过 打开一个显示结果的窗口`:copen`，然后使用 选择匹配项`Enter`。这主要是针对编译器错误完成的，但对搜索结果也很有用。好消息是（你的问题的答案来了）Vim 存储了最后十个列表，你可以用`:colder`and调用它们`:cnewer`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:52:15.740

不确定“存储搜索结果”是什么意思，但如果您`q/`在正常模式下输入，您会看到一个弹出窗口，其中包含最新的搜索，您甚至可以在再次执行之前对其进行编辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:13:54.107

我正在使用以下代码来搜索光标下的单词并在屏幕底部的 quickfix 列表中显示该列表：

```
noremap <Leader>g :grep<space><C-r><C-w><CR>:copen<CR> 
```

`set grepprg`你可以在你的 中调整你想搜索的地方和内容`.vimrc`，这是使用系统`grep`而不是 Vim 内置命令。

# c# - EF SaveChanges() 背后发生了什么

> ID：15926252
> 
> 赞同：3
> 
> 时间：2013-04-10T12:46:13.970
> 
> 标签：c#, .net, entity-framework, entity-framework-4, ado.net

假设我有一个与其他几个实体关联的域对象（当然映射到多个表）。我对主实体和关联实体进行了更改。自然 EF 必须在保存时在多个表中更新它。

无论是 ObjectContext 还是 DbContext，对 SaveChanges() 方法的调用都会告诉 Entity Framework “将在此上下文中所做的所有更改保存到底层数据库”。

谁能告诉我“SaveChanges() 背后发生了什么”？

所有生成的 sql 语句 INSERT/UPDATE/DELETE 是否作为准备好的语句一次性进入数据库？

还是EF与DB来回做sql语句一一执行？

EF中是否有任何配置可以在此之间切换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:58:28.440

目前 CUD 操作的语句没有批处理。我们有一个[工作项](http://entityframework.codeplex.com/workitem/53)来解决这个问题。随意点赞

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:34:59.067

据我了解，每个修改后的**实体**都会导致到数据库的往返（全部由单个事务绑定）。虽然我不知道有任何配置会改变这种行为，但我不会说没有实现这种“批处理”功能的 EF 实现。我只是不认为它们是可用的，开箱即用。

# sql - 使用 Oracle 9i 比较 2 年

> ID：15926254
> 
> 赞同：0
> 
> 时间：2013-04-10T12:46:16.203
> 
> 标签：sql, oracle, select, oracle9i

我有一份降雨数据列表

```
SELECT * FROM Rainfall

COUNTRY         YEAR  AMT
--------------  ----  ---
Austria         2000  1.1
Belgium         2000  1.2
France          2000  1.3
Ireland         2000  1.4

France          2001  1.5
Ireland         2001  1.6

Austria         2002  1.7
Belgium         2002  1.8
France          2002  1.9

Germany         2003  2.0
Italy           2003  2.1 
```

我将如何选择连续 2 年显示所有国家/地区

```
COUNTRY          YEAR 2001   YEAR 2000
-------          ---------   ---------
Austria           -            1.1
Belgium           -            1.2
France            1.5          1.3
Ireland           1.6          1.4 
```

然后在 2002 - 2001 年

```
COUNTRY          YEAR 2002   YEAR 2001
-------          ---------   ---------
Austria           1.7          -
Belgium           1.8          -
France            1.9          1.5
Ireland           -            1.6 
```

最后 2003 - 2002

```
COUNTRY          YEAR 2003   YEAR 2002
-------          ---------   ---------
Austria           -           1.7          
Belgium           -           1.8          
France            -           1.9          
Germany           2.0         -
Italy             2.1         - 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T13:02:25.423

```
SELECT * FROM Rainfall
pivot (max(AMT) for year in (2000, 2001, 2002, 2003))
order by 1 
```

[小提琴](http://www.sqlfiddle.com/#!4/a2907/7)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T12:59:46.870

2000/2001年：

[http://www.sqlfiddle.com/#!4/a2907/13](http://www.sqlfiddle.com/#!4/a2907/13) （更正了 Egor 指出的国家的重复分隔）

```
select 
   country, 
   max(case when year=2001 then to_char(amt) else '-' end) as 'YEAR 2001',
   max(case when year=2000 then to_char(amt) else '-' end) as 'YEAR 2000'
from 
  Rainfall
where year in (2000, 2001)
group by country
order by country; 
```

如果您想要一个通用查询，可以这样做，但没有列名：

```
with (select 2000 as ref_year from dual) as s
select 
   country, 
   max(case when year=s.ref_year+1 then to_char(amt) else '-' end) as 'Next YEAR',
   max(case when year=s.ref_year   then to_char(amt) else '-' end) as 'YEAR'
from 
  Rainfall
where year in (s.ref_year, s.ref_year + 1)
group by country
order by country; 
```

（您只需更改子选择中的 ref_year）

# javascript - 选项卡式面板未显示滑块内容

> ID：15926256
> 
> 赞同：0
> 
> 时间：2013-04-10T12:46:20.247
> 
> 标签：javascript, jquery, tabs, slider, anythingslider

嗨，我正在使用 javascript 来获取按钮的选项卡功能。在每个选项卡中，我想显示一个滑块，我正在为其显示任何滑块。我面临的问题是滑块内容未显示在第二个和第三个选项卡中。选项卡功能没有问题。选项卡功能工作正常。我可以从一个选项卡切换到另一个选项卡。谁能帮助我。

这是我用于标签功能的脚本

```
<script type="text/javascript">
    $(document).ready(function () {
            var tabContainers = $('div.spec-nav > div');
            tabContainers.hide().filter(':first').show();

            $('div.spec-nav ul li a').click(function () {
                tabContainers.hide();
                tabContainers.filter(this.hash).show();
                $('div.spec-nav ul li a').removeClass('spec-actv');
                $(this).addClass('spec-actv');
                return false;
            }).filter(':first').click();

        });

</script> 
```

选项卡和滑块的 HTML 代码

```
<div class="spec-nav">
<ul class="serv-nav">
    <li id="p1"><a href="#first" class="im1 spec-actv">Tab1</a></li>
    <li id="p2"><a href="#second" class="im2">Tab2</a></li>
    <li id="p3"><a href="#third"  class="im3">Tab3</a></li>
</ul>

<div id="first" class="anythingSlider-theme2" style="display:block;float:left;">

   <!-- AnythingSlider #1 -->
   <ul id="slider1">
    <li>                       
      <div class="google">
       <img src="images/google.png" alt="google" class="left" />
       <div class="sec left">
        <p>We understand that navigating the maze</p>
         <a href="" class="button1">START NOW</a>
       </div>
      </div><!--google-->
    </li>
            <li>                       
      <div class="google">
       <img src="images/google.png" alt="google" class="left" />
       <div class="sec left">
        <p>We understand that navigating the maze</p>
         <a href="" class="button1">START NOW</a>
       </div>
      </div><!--google-->
    </li>   
    </ul>  <!-- END AnythingSlider #1 -->

</div><!--first-->

<div id="second" class="anythingSlider-theme3" style="display:none;float:left;">

    <ul id="slider2">
    <li>                       
      <div class="google">
       <img src="images/google.png" alt="google" class="left" />
       <div class="sec left">
        <p>We understand that navigating the maze</p>
         <a href="" class="button1">START NOW</a>
       </div>
      </div><!--google-->
    </li>
            <li>                       
      <div class="google">
       <img src="images/google.png" alt="google" class="left" />
       <div class="sec left">
        <p>We understand that navigating the maze</p>
         <a href="" class="button1">START NOW</a>
       </div>
      </div><!--google-->
    </li>   
    </ul>  <!-- END AnythingSlider #2 -->   

</div><!--second-->

<div id="third" class="anythingSlider-theme4" style="display:none;float:left;">
    <ul id="slider3">
    <li>                       
      <div class="google">
       <img src="images/google.png" alt="google" class="left" />
       <div class="sec left">
        <p>We understand that navigating the maze</p>
         <a href="" class="button1">START NOW</a>
       </div>
      </div><!--google-->
    </li>
            <li>                       
      <div class="google">
       <img src="images/google.png" alt="google" class="left" />
       <div class="sec left">
        <p>We understand that navigating the maze</p>
         <a href="" class="button1">START NOW</a>
       </div>
      </div><!--google-->
    </li>   
    </ul>  <!-- END AnythingSlider #3 -->
    </div><!--third-->

</div><!--spec-nav--> 
```

anthing滑块的初始化代码

```
<script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="js/jquery.anythingslider.js"></script>     
 $(document).ready(function(){
   $(function(){
   $('#slider1').anythingSlider({
            theme           : 'metallic',
            easing          : 'easeInOutBack',
            navigationFormatter : function(index, panel){
                return ['Slab', 'Parking Lot', 'Drive', 'Glorius Dawn', 'Bjork?', 'Traffic Circle'][index - 1];
            },
            onSlideComplete : function(slider){
                // alert('Welcome to Slide #' + slider.currentPage);
            }
        });

    });
           }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T21:23:59.857

第二个和第三个选项卡中有滑块吗？

我用你的代码把[这个演示](http://jsfiddle.net/Mottie/ycUB6/5340/)放在一起，这一切似乎对我有用。

此外，您不需要将代码包装在两个文档就绪函数中，只需一个就足够了：

```
$(function () { // same as $(document).ready(function(){
    $('#slider1').anythingSlider({
        theme: 'metallic',
        easing: 'easeInOutBack',
        navigationFormatter: function (index, panel) {
            return ['Slab', 'Parking Lot', 'Drive', 'Glorius Dawn', 'Bjork?', 'Traffic Circle'][index - 1];
        },
        onSlideComplete: function (slider) {
            // alert('Welcome to Slide #' + slider.currentPage);
        }
    });
}); 
```

# java - JScrollPane 未正确更新

> ID：15926258
> 
> 赞同：0
> 
> 时间：2013-04-10T12:46:29.267
> 
> 标签：java, swing, jscrollpane

我的 JScrollPane 没有正确更新。

```
 public static JScrollPane scrollPane;
public static List<String> usernames = new ArrayList<String>();
public static JList list;

    public static void getUsername() {
    usernames.add(Frame.username);
    list = new JList(usernames.toArray());
    scrollPane = new JScrollPane(list);

    // Update
    scrollPane.revalidate();
    list.revalidate();
    panel.revalidate();

    frame.repaint();
    System.out.println("user connected");
} 
```

我已经在滚动窗格、jlist、面板上尝试了 repaint()、revalidate() 和 validate()，但框架和滚动窗格不会更新。如果我用数组中的新数据添加一个新的滚动窗格，它会更新得很好。

```
 server.addListener(new Listener() {
        public void received(Connection connection, Object object) {
            new Run();
            players++;
            playerLabel.setText("Players currently online: " + players);
            getUsername();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:52:59.900

当您在列表中添加新内容时，请尝试使用

```
yourList.setListData(newData); 
```

并将列表添加到滚动窗格

**更新：**

```
DefaultListModel<String> model;

private void UpdateJList(){
    model = new DefaultListModel<String>();
    for(Users u : list){
         model.addElement(u.ToString());
    }    
    theJList.setModel(model);     
    theJList.setSelectedIndex(0); // this will mark the first row (item) on the list
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:33:22.163

谢啦！真的很感激 :) 顺便说一句，对于任何需要它的人来说，这里是我针对我的具体情况的代码：

```
 public static void getUsername() {
    usernames.add(Frame.username);
    model = new DefaultListModel();
    model.addElement(usernames.toString());
    list.setModel(model);
    list.setSelectedIndex(0);
} 
```

# objective-c - 设置 UIWebView 内容在显示键盘时不移动

> ID：15926260
> 
> 赞同：11
> 
> 时间：2013-04-10T12:46:46.377
> 
> 标签：objective-c, uiwebview, keyboard, focus, uitextfield

我已经进行了足够大的研究，但找不到我的问题的答案。

假设我`webView`有一些文本字段，其中一些被放置在屏幕底部，这样当键盘出现时它应该隐藏这些字段。键盘出现后，`webView`幻灯片的内容会向上滑动，以使该字段可见。问题是我**不**希望内容向上滑动。

问题是：我怎样才能禁用该功能`webview`，或以某种方式使内容不向上滚动。？？？

谢谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-09-06T23:44:38.410

如果您想禁用所有滚动，包括在表单字段之间导航时的自动滚动，设置`webView.scrollView.scrollEnabled=NO`并不能完全涵盖所有内容。这会停止正常的点击和拖动滚动，但不会在您浏览 Web 表单时自动将字段滚动到视图中。

此外，*当键盘出现时*`UIKeyboardWillShowNotification`，watch for可以防止滚动，但如果键盘已经从编辑不同的表单字段中启动，那将无济于事。

 *以下是如何通过三个简单的步骤来防止所有滚动：

**1）创建 UIWebView 后，禁用正常滚动：**

```
myWebView.scrollView.scrollEnabled = NO; 
```

**2）然后将您的视图控制器注册为滚动视图的委托：**

```
myWebView.scrollView.delegate = self; 
```

（并确保添加`<UIScrollViewDelegate>`到您的类的`@interface`定义中以防止编译器警告）

**3）捕获并撤消所有滚动事件：**

```
// UIScrollViewDelegate method
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    scrollView.bounds = myWebView.bounds;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:03:58.327

我认为[这门课](https://github.com/kirpichenko/EKKeyboardAvoidingScrollView)应该可以帮助您解决问题。它向上滚动内容，因此如果您在屏幕底部有文本字段，它会将其移动到键盘上方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:08:27.477

我为我找到了解决方案。我只是在向上滚动后再次向下滚动。`UIKeyboardWillShowNotification`首先我通过添加观察者来 捕捉通知，`[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];` 然后实现方法：

```
-(void)keyboardWillShow:(NSNotification*)aNotification{
NSDictionary* info = [aNotification userInfo];
float kbHeight = [[NSNumber numberWithFloat:[[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size.height]floatValue];
float kbWidth = [[NSNumber numberWithFloat:[[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size.width]floatValue];
BOOL keyboardIsVisible=[self UIKeyboardIsVisible];
//Check orientation and scroll down webview content by keyboard size
if(kbWidth==[UIScreen mainScreen].bounds.size.width){
    if (!keyboardIsVisible) {
        [[chatView scrollView] setContentOffset:CGPointMake(0, -kbHeight+10) animated:YES];
    } //If is landscape content scroll up is about 113 px so need to scroll down by 113
}else if (kbHeight==[UIScreen mainScreen].bounds.size.height){
    if (!keyboardIsVisible) {
        [[chatView scrollView] setContentOffset:CGPointMake(0, -113) animated:YES];
    }
}
} 
```

这不是我所要求的，但帮助我解决了我的问题。

谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-28T06:12:44.697

最初，我希望在关注输入字段（在我的情况下为评论部分）时阻止我的 webview 放大。整个视图会自动放大，让一切都乱七八糟。我设法做到了这一点，同时我也让 webview 停止向上滚动并避开软键盘：

```
//Stop the webview from zooming in when the comments section is used.
UIScrollView *scrollView = [_webView.subviews objectAtIndex:0];
scrollView.delegate = self;

//_webView.scrollView.delegate = self; //for versions newer than iOS5. 
```*

# c# - 将纪元/unix 转换为日期时间

> ID：15926261
> 
> 赞同：15
> 
> 时间：2013-04-10T12:46:53.187
> 
> 标签：c#, datetime, unix-timestamp

**这个问题不是重复的，这个问题说明了转换方法的问题，而不是如何执行转换。完整阅读问题。**

我有一个时间戳，我认为它是一个 unix 时间戳，当使用以下转换器时，它会正确转换时间戳

值：1365151714493

[http://www.epochconverter.com/](http://www.epochconverter.com/)

我环顾四周，找到了一个[关于](http://www.codeproject.com/Articles/10081/UNIX-timestamp-to-System-DateTime)如何将其转换为 datetime 对象的示例，该方法似乎很简单，创建一个 datetime 对象并将日期设置为 1970 年 1 月 1 日可能的夜晚，并将值添加为秒：

```
public static DateTime? ConvertUnixTimeStamp(string unixTimeStamp)
{
    return new DateTime(1970, 1, 1, 0, 0).AddSeconds(Convert.ToDouble(unixTimeStamp));
} 
```

问题是每次我用上面的值调用这个方法时，我都会得到一个超出范围异常的值。

我需要先对价值做任何事情吗？字符串转换为双重确定。`AddSeconds(double)`调用方法时抛出异常

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-10T12:54:43.237

该时间戳 (1365151714493) 以毫秒为单位，而不是秒。您需要除以`1000`或`AddMilliseconds`改为使用。如果将其视为秒，则它是未来约 43,259 年（粗略计算）的日期。`DateTime`这超出了在 10000 年达到最大值的范围，因此[抛出](http://msdn.microsoft.com/en-us/library/system.datetime.maxvalue.aspx)`ArgumentOutOfRangeException`.

```
public static DateTime? ConvertUnixTimeStamp(string unixTimeStamp)
{
    return new DateTime(1970, 1, 1, 0, 0, 0).AddMilliseconds(Convert.ToDouble(unixTimeStamp));
} 
```

您可能还想考虑按照 V4Vendetta 的建议将其强制为 GMT。此外，如果您希望使用多种格式（秒或毫秒），那么对解析值进行快速大小检查可能是谨慎的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T12:50:35.970

我想您应该尝试一下，因为它与 GMT 相关

同样来自您提到的站点，它假定该值以毫秒为单位，而不是以[秒为单位的传统 unix 时间戳](http://www.unixtimestamp.com/index.php)

```
DateTime epoch = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc);
epoch = epoch.AddMilliseconds(yourvalue);// your case results to 4/5/2013 8:48:34 AM 
```

# c++ - 如何测试实例是否损坏？

> ID：15926263
> 
> 赞同：2
> 
> 时间：2013-04-10T12:47:06.173
> 
> 标签：c++

我在此方法中的现有程序（c++ 自动生成的代码）中发现了一个错误：

```
void _CallStyle _WFObjectVarAsStringExtractEFAgent::LoadValue(Pointer __VarAddress, aType theVarType) {
   absolute(tpPointer, VarAddress, __VarAddress);
   aLightObject Obj = nil;

   Obj = aLightObject(*VarAddress);

   if ( Obj == Nil ) {

      this->SetValue("");
   } else {
      this->SetValue(Obj->StringExtract(this->ExtractKind, this->ExtractParam, 0));
   }
   this->Lock();
   if ( Obj == Nil ) {
      this->Disable();
   } else {
      this->Enable();
   }
} 
```

有时，该行也`Obj = aLightObject(*VarAddress);`不会返回一个有效的`aLightObject`实例`Nil`（而是一个损坏的`aLightObject`实例）。

因此，在下一行`if ( Obj == Nil ) {`中，我们输入了`else`bloc，程序在尝试执行`Obj->StringExtract`调用时失败。

我如何测试`Obj`实例是否有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:59:45.277

如果指针不是 NULL/NIL/Nil 或其他一些“可识别的‘不是指针’”，那么几乎不可能确定它是否是有效指针。当然，如果它“几乎为 NULL”，您也许有机会使用一些不可移植的代码来检查以下内容：

```
 ptrdiff_t diff = NULL - reinterpret_cast<char *>(ptr);
 if (diff < -100000) cout << "Bad pointer" << ptr << endl; 
```

您还可以检查对象是否是有效指针并包含您知道它应该是什么的东西。做到这一点的典型方法是拥有“魔法”，例如

```
 class myobject
 {
    public: 
       int magic;
    ...
       myobject() : magic(1234567)     // Make sure it's different for each type of object. 
       {
         ...
       }
     ....
 };

 ...
     if (obj->magic != 1234567)  cout << "Object is not right type..." << endl; 
```

但是，如果`obj`只是 0...2 ^n之间的某个完全任意值，其中 n 是机器的位数，则此方法不起作用。它会像你一开始没有检查它一样严重崩溃。

# c# - 找不到 ASP.NET 服务使用的动态加载的第 3 方程序集的 .config 文件

> ID：15926266
> 
> 赞同：2
> 
> 时间：2013-04-10T12:47:17.123
> 
> 标签：c#, asp.net, config

IIS 或 IIS Express 下的 C#、VS2010、.Net 4.0、ASP.NET 服务。

我在我的服务中使用了第 3 方集会。这个第 3 方程序集有一个 .config 文件，并且是这样动态加载的：

服务 -> MyAssembly1 -> 使用 Assembly.Load() 动态加载 MyAssembly2 -> 使用 .config 的第 3 方程序集

我通常是一名 C++ 开发人员，所以这个 ASP.NET 东西对我来说相当新。我知道，对于 ASP.NET 应用程序，它使用的程序集被“影子复制”到 Temporary ASP.NET Files 文件夹。不幸的是，当这个第 3 方程序集被“影子复制”时，它的 .config 文件不是。因此，当需要使用此程序集时，它会失败，因为它无法打开其 .config 文件。

从我的程序集中，我可以获取该程序集的 CodeBase 并自己加载 .config 文件，但这对我没有帮助，因为这个第 3 方程序集需要自己打开文件。

如果我手动将 .config 文件复制到卷影复制位置，效果很好。

此外，这个第 3 方将配置文件称为“assemblyname.config”而不是“assemblyname.dll.config”。

我得到的错误是：

```
Unable to load configuration file: "\assemblyname.config". 
```

当在非 ASP.NET 应用程序（即普通的 Windows 应用程序）中使用此第 3 方程序集时，它工作得很好，因为它不执行卷影复制的东西。只需直接从 exe 位置使用程序集和 .config 文件。

有任何想法吗？尽管我认为这将是一个相当普遍的问题，但我一直无法找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:59:12.847

加载程序集时的主要内容是查看程序集在磁盘上的放置路径以及您尝试从中加载程序集的页面目录。因此，如果您要添加加载程序集的路径，这并不意味着它将从同一路径加载配置文件。请尝试将它们都放在应用程序的根文件夹中，看看问题是否仍然存在。

# mysql - MySQL seek-then-scan 对 Limit Offset 的优化

> ID：15926269
> 
> 赞同：1
> 
> 时间：2013-04-10T12:47:25.687
> 
> 标签：mysql, sql, optimization, backup

从[mk-archiver](http://www.maatkit.org/doc/mk-archiver.html#no_ascend)帮助中，我们可以看到有一个优化选项“ `seek-then-scan`”。知道他们是怎么做到的吗？

我真正想要的是，如果我确实有一张带有一个 PKey 的表，并且查询

```
SELECT col1,col2 FROM tbl LIMIT 1,10;
SELECT col1,col2 FROM tbl LIMIT 11,20; ...

SELECT col1,col2 FROM tbl LIMIT m,n; 
```

有什么方法可以以优化的方式做到这一点，给定`m`并且`n`是非常大的值，并且每个选择查询都是从多台机器并行启动的？（稍后将解决主机/网络阻塞问题）

如果表没有 PKey，其他人如何处理这种情况？

*使用 MySQL

> 默认的升序索引优化导致 mk-archiver 优化重复的 SELECT 查询，以便它们查找前一个查询结束的索引，然后沿着它扫描，而不是每次都从表的开头扫描。这是默认启用的，因为它通常是重复访问的好策略。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:23:30.477

我相信他们是在直接使用索引结构，而不是依赖 SQL。获取MySQL源代码的优势。应该有可能使用 SQL，每个连接都有这样的选项，但是如果可能的话，通过中间（Web）服务器连接的多个用户会更加复杂。

# php - 如何从用户表中提取电子邮件地址并使用 $_SESSION[user_id] 变量向该地址发送电子邮件？

> ID：15926273
> 
> 赞同：0
> 
> 时间：2013-04-10T12:47:32.850
> 
> 标签：php, mysql

如何从用户表中提取电子邮件地址并使用`$_SESSION[user_id]`变量向该地址发送电子邮件？

在付款过程结束时，我想向用户发送确认电子邮件。用户 ID 存储在会话中，我想向存储在用户表中的电子邮件地址发送确认。

```
<?php
$to = "recipient@example.com";
$subject = "Hi!";
$body = "Hi,\n\nHow are you?";
if (mail($to, $subject, $body)) {
echo("<p>Message successfully sent!</p>");
} else {
echo("<p>Message delivery failed...</p>");
}
?> 
```

如何使用查询插入与 $_SESSION[user_id] 变量关联的适当电子邮件？

```
$q = "SELECT email from users where id='".$_SESSION['user_id']."'";
$r = mysqli_query ($dbc, $q);
$to = "email";
$subject = "Confirmation";
$body = "Hi,\n\nConfirmation?";
if (mail($to, $subject, $body)) {
echo("<p>Message successfully sent!</p>");
} else {
echo("<p>Message delivery failed...</p>");
} 
```

我已成功发送信息电子邮件，但电子邮件从未到达...在注册过程中，我使用以下方式发送电子邮件：

```
$body = "Thank you for registering at <...>. Welcome to digital world of knowledge.";
mail ($_POST['email'], 'Registration Confirmation', $body, 'From: admin@ttt.com'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:50:37.530

您必须根据用户 ID 编写一个选择查询才能收到类似这样的电子邮件

```
$sql = "SELECT email from user where user_id='".$_SESSION[user_id]."'"; 
```

然后使用该电子邮件执行邮件功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:50:40.763

您需要从用户对象中获取电子邮件地址：

```
$user  = User::getByID($_SESSION[user_id]);
$email = $user->getEmail(); 
```

此代码只是示例性的，它取决于您的用户对象的工作方式。如果您没有，那么我的回答是建议您为自己创建一个用户对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:52:23.447

如果没有`email address`从`Database`, 就不可能做到这一点，

要不然

用户登录成功后，可以再设置一个会话变量

```
$_SESSION['email'] = 'abc@example.com' 
```

# java - 从一个 sql 表与 neo4j spring 数据建立关系

> ID：15926285
> 
> 赞同：0
> 
> 时间：2013-04-10T12:48:09.160
> 
> 标签：java, spring, graph, neo4j

我有以下列的表格

从 到 抄送主题 date_sent

例如，我想将其转换为 neo4j 并建立关系

from -> to to >from 我不知道 cc，保持它作为节点还是？

另外我不知道，在关系实体或节点实体中更好地保​​留主题和日期是什么？

我真的需要什么样的结构？用哪种方式更好地建立用户之间的关系？

有什么建议么？

我找到了如何将邮箱正确转换为 neo4j 关系和节点的建议。有没有做过类似工作的机构？ ![在此处输入图像描述](https://i.stack.imgur.com/y1FYm.jpg) ![在此处输入图像描述](https://i.stack.imgur.com/akCba.jpg) ![在此处输入图像描述](https://i.stack.imgur.com/6bGSu.jpg) ![在此处输入图像描述](https://i.stack.imgur.com/As04p.jpg) ![在此处输入图像描述](https://i.stack.imgur.com/yMdwF.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:03:47.743

真的不确定这个用例是否最适合图形表示，但如果你想这样做，一种方法是 -

![在此处输入图像描述](https://i.stack.imgur.com/GVugC.png)

*用户*是节点。*Mail*是具有属性*subject*和*date sent*的节点。*From* , *To*和*cc*作为关系

# javascript - 从 word 中粘贴的图像显示为指向用户计算机的链接

> ID：15926289
> 
> 赞同：0
> 
> 时间：2013-04-10T12:48:11.463
> 
> 标签：javascript, html, image, firefox, ms-word

我在一些可编辑的 div 中粘贴一些图像时遇到问题。大多数时候，当我从 word 中粘贴图像时，我会以 base64 图像字符串的形式得到它。问题是有时当我粘贴图像时，我得到

```
<img width="309" height="198" src="file:///C:/Users/Robert/AppData/Local/Temp/msohtmlclip1/01/clip_image002.jpg" /> 
```

正如您所看到的，我得到的是临时文件夹的 URL，而不是图像字符串，我认为这与图像大小有关，但我不太确定。

我还想提一下，我使用的是 firefox，但同样的想法也发生在 IE 中。

有没有办法让我将图像粘贴为 base64 字符串？

**更新** 我发现只有当文档是 .doc 而不是 .docx 时才会发生这种情况。但我想让这两种类型都能正常工作，非常感谢。

# javascript - 我的 scrollTop() jQuery 方法一旦滚动就会挂起浏览器

> ID：15926292
> 
> 赞同：0
> 
> 时间：2013-04-10T12:48:23.960
> 
> 标签：javascript, jquery, html, css, scroll

我正在开发一个单页滚动网站，它的滚动效果很好。但是，每当我将滚动条滚动到顶部 div 时，它就会将我带到最高位置，但每当我尝试向下移动该站点时，它就会挂断。让我知道我在 jQuery 中做错了什么。

[在 Firefox http://jsfiddle.net/swapnesh/jSa3z/](http://jsfiddle.net/swapnesh/jSa3z/)下问题更加严重

**脚本**-

```
<script>
jQuery(document).ready(function(){
    $('section[data-type="background"]').each(function(){
        //assigning the object
        var $bgobj = $(this);

        $(window).scroll(function(){
            var yPos = $(window).scrollTop() / $bgobj.data('speed');

            var coords = '50%' + yPos + 'px';

            //Move the background
            $bgobj.css({ backgroundPosition : coords });
        })
    })

    $(window).scroll(function(){
        if( $(this).scrollTop() > 600 ) {
            $('#scrollpage').fadeIn();
            $('#scrollpage').click(function(){
                $("html, body").animate({ scrollTop: 0 }, 600);
                return false;
            })
        }
        else {
            $('#scrollpage').fadeOut();
        }
    })
})
</script> 
```

**HTML**

```
<section id="home" data-type="background" data-speed="10" class="pages">
    <article>Swapnesh Sinha</article>
</section>

<section id="about" data-type="background" data-type="10" class="pages">
    <article>Web Developer - PHP, MYSQL, WORDPRESS</article>
</section>

<div id="scrollpage"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:02:08.257

scrollPage 元素不是动态创建的，因此只需附加一次时钟事件处理程序（在窗口滚动事件处理程序之外）

```
$('#scrollpage').click(function(ev){
    ev.preventDefault();
    $("html, body").animate({ scrollTop: 0 }, 600);
})

$(window).scroll(function(){
    if( $(this).scrollTop() > 600 ) {
        $('#scrollpage').fadeIn();
    }
    else {
        $('#scrollpage').fadeOut();
    }
}) 
```

更新小提琴：http: [//jsfiddle.net/jSa3z/3/](http://jsfiddle.net/jSa3z/3/)

# sql - 比较两个表中的列并更新差异（如果有）

> ID：15926301
> 
> 赞同：-1
> 
> 时间：2013-04-10T12:48:39.757
> 
> 标签：sql

**表 A**：

```
NAME        ID
---------------
Peter       45
Johny       46
Mary        47
Micheal     48
Elizabeth   49 
```

**表 B**：

```
NAME        ID     Gender
-----------------------------
Peter       12       M
Johny       null     M
Mary        47       F
Micheal     48       M
Elizabeth   28       F 
```

我想要一个更新查询来填充表 B 中的以下结果。

```
NAME        ID     Gender
-----------------------------
Peter       45       M
Johny       46       M
Mary        47       F
Micheal     48       M
Elizabeth   49       F 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:00:31.900

假设 Name 是唯一的，这里是一个取决于您的 RDBMS 的起点：

```
update b
set b.ID = a.ID
from TableA a
    join TableB b on a.Name = b.Name
where a.ID <> b.ID
    or b.ID is null 
```

# hibernate - Hibernate Search + Lucene AND 运算符查询

> ID：15926304
> 
> 赞同：0
> 
> 时间：2013-04-10T12:48:42.527
> 
> 标签：hibernate, hibernate-search

我目前正在通过 Hibernate Search 4.1

我有一个表 (file_data,fileName) 我想创建一个查询，例如 file_data:XYZ 和 fileName:abc.pdf

如何执行此查询？下面我尝试对此进行查询..

```
Query luceQry3 = queryBuilder
                    .bool()
                    .must(
                            queryBuilder
                            .bool()
                                .must(
                                        queryBuilder.
                                        keyword().
                                        onField("file_data")
                                        .ignoreFieldBridge()
                                        .matching("HDFC")
                                        .createQuery()).createQuery())
                    .must(queryBuilder.
                            keyword().
                            onField("fileName")
                            .ignoreFieldBridge()
                            .matching("0_119.pdf")
                            .createQuery()).createQuery(); 
```

但是这个查询和

```
Query luceneQry = queryBuilder.keyword().
                        onField("file_data").ignoreFieldBridge().
                        matching("HDFC").
                        createQuery(); 
```

返回相同的结果。我想使用 AND 运算符，以便可以最小化查询结果。

--------我的实体映射如下-----

```
@Entity
@Table(name="file_upload")
@Indexed
@Analyzer(impl = org.apache.lucene.analysis.standard.StandardAnalyzer.class)
public class FileUploadModel implements Serializable {

    private static final long serialVersionUID = -5376124674712529869L;

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Field(index=Index.YES,store=Store.NO)
    @DocumentId
    private Integer file_upload_id;

    @Column(name="file_name")
    @Field(index=Index.YES,store=Store.YES)
    private String fileName;

    @IndexedEmbedded
    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name="user_id")
    private User user;

    @Column(name="file_type")
    private String file_type;

    @Column(name="file_data")
    @Lob
    @Field(index=Index.YES,store=Store.NO,name="file_data")
    @FieldBridge(impl=com.test.documentsearch.core.BlobToString.class )
    private byte[] file_data;

    public Integer getFile_upload_id() {
        return file_upload_id;
    }

    public void setFile_upload_id(Integer file_upload_id) {
        this.file_upload_id = file_upload_id;
    }

    public String getFileName() {
        return fileName;
    }

    public void setFileName(String fileName) {
        this.fileName = fileName;
    }

    public User getUser() {
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }

    public String getFile_type() {
        return file_type;
    }

    public void setFile_type(String file_type) {
        this.file_type = file_type;
    }

    public byte[] getFile_data() {
        return file_data;
    }

    public void setFile_data(byte[] file_data) {
        this.file_data = file_data;
    }

    public static long getSerialversionuid() {
        return serialVersionUID;
    }

} 
```

我用过FieldBridge...

```
public class BlobToString extends StringBridge {

    @Override
    public String objectToString(Object object) {
        try
        {
            byte[] byteData = ((String)object).getBytes();
            MagicMatch match = Magic.getMagicMatch((byte[])byteData);
            String mimeType = match.getMimeType();
            String extn = match.getExtension();

            if(mimeType.equalsIgnoreCase("image/jpeg"))
            {

            }
            else if(mimeType.equalsIgnoreCase("application/pdf"))
            {
                COSDocument cd = null;
                ByteArrayInputStream bais =null;
                try
                {
                    bais = new ByteArrayInputStream((byte[])object);
                    PDFParser pdf = new PDFParser(bais);
                    pdf.parse();  
                    cd = pdf.getDocument();  
                    PDFTextStripper stripper = new PDFTextStripper();  
                    String text = stripper.getText(new PDDocument(cd));
                    cd.close();
                    bais.close();
                    return text;
                }
                catch(Exception ex)
                {
                    cd.close();
                    bais.close();
                    ex.printStackTrace();
                }

            }
            else if(mimeType.equalsIgnoreCase("application/rtf") || mimeType.equalsIgnoreCase("text/rtf"))
            {
                ByteArrayInputStream bais = new ByteArrayInputStream((byte[])object);
                RTFEditorKit kit = new RTFEditorKit();
                Document doc = kit.createDefaultDocument();
                kit.read(bais, doc, 0);
                bais.close();
                return doc.getText(0,doc.getLength());
            }
            else if(mimeType.equalsIgnoreCase("application/msword"))
            {
                StringBuilder _result = new StringBuilder();
                try {

                    ByteArrayInputStream bais = new ByteArrayInputStream((byte[]) object);
                    WordExtractor extractor = new WordExtractor(bais);  
                    String wordText = extractor.getText(); 
                    bais.close();
                    return wordText;

                } catch (IOException ex) {
                    ex.printStackTrace();
                }

            }
            else if(mimeType.equalsIgnoreCase("application/vnd.ms-excel"))
            {
                StringBuilder _result = new StringBuilder();
                try {

                    ByteArrayInputStream bais = new ByteArrayInputStream((byte[]) object);
                    WordExtractor extractor = new WordExtractor(bais);  
                    String wordText = extractor.getText(); 
                    bais.close();
                    return wordText;

                } catch (IOException ex) {
                    ex.printStackTrace();
                }

            }
            System.out.println(mimeType);
            return null;
        }catch(Exception ex)
        {
            ex.printStackTrace();
            return ex.getMessage();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T06:55:22.160

进行两次查询

```
 Query query1=queryBuilder.keyword().
                onField("file_data").ignoreFieldBridge().
                matching("HDFC").
                createQuery();

    Query query2=queryBuilder.keyword().
                onField("fileName").ignoreFieldBridge().
                matching("abc.pdf").
                createQuery(); 
```

将它们添加到列表中：

```
 listOfQuery.add(query1);
   listOfQuery.add(query2); 
```

然后将最终查询构建为

```
 Query finalLuceneQuery=new BooleanQuery();
  for (Query query : listOfQuery) {
                    finalLuceneQuery.add(query, BooleanClause.Occur.MUST);
                }
                fullTextQuery = fullTextSession.createFullTextQuery(finalLuceneQuery, <Youclass>.class); 
```

这对你有用。

# sql - 错误陷阱 SQL 语句链接服务器

> ID：15926307
> 
> 赞同：1
> 
> 时间：2013-04-10T12:49:01.747
> 
> 标签：sql, sql-server, sql-server-2008-r2, linked-list

我正在使用 SQL2008R2 并且有一个大型存储过程，其中包含一段 SQL 将记录插入到 LINKED 服务器（也是 SQL2008R2）。如果链接服务器碰巧关闭、不可用等，我希望能够继续使用存储过程。

最好的方法是什么？可以举个例子吗？

```
IF @InsertToLinkServer = 1
BEGIN
INSERT INTO [Server].[Database].[dbo].[Table]
(field1) VALUES (value1)
END

ContinueHereifFailed:
Other sql statements.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:45:15.390

尝试使用包装在 TRY/CATCH 块中的动态 sql

```
DECLARE @dsql nvarchar(max)        
BEGIN TRY
  SET @dsql = 'INSERT [Server].[Database].[dbo].[Table](field1) VALUES (value1)'
  EXEC sp_executesql @dsql
END TRY
BEGIN CATCH  
  PRINT 'Error'  
END CATCH 
```

# php - MySQL数据库中无法识别的UTF8立陶宛字符

> ID：15926309
> 
> 赞同：4
> 
> 时间：2013-04-10T12:49:09.487
> 
> 标签：php, mysql, wordpress, utf-8, character-encoding

我在这里众所周知但很难解决问题。是的，我在论坛上搜索，但这些线程已经够老了，所以我决定创建新帖子。所以我使用 WP 建立了一个网站，并在一个页面中包含了 html FORM。当用户填写表单（用他/她的语言）时，字段的值将进入 MySQL 数据库表 reg_form。

一切正常，值已保存，但某些字符（特定于该语言）无法识别。我尝试了很多不同的方法来解决这个问题，但没有任何帮助。

最奇怪的是，如果您查看 WordPress 表格，您会发现这些特定字符是可识别的，但在我创建的 reg_form 表格中却没有。

我试图解决这个问题，最后我决定以某种荒谬的方式接近。我创建了新的数据库、新的表、安装了新的 wordpress、创建了新的表单等。

**这就是我正在做的：**

我首先使用了这个建议：http: [//tympanus.net/codrops/2009/08/31/solving-php-mysql-utf-8-issues/](http://tympanus.net/codrops/2009/08/31/solving-php-mysql-utf-8-issues/)

是的，我的文件是使用 UTF8 编码（没有 BOM）保存的。是的，元标签没问题。是的，FORM 使用了 accept-charset='UTF-8'。是的，数据库中的所有表都使用 UTF8。是的，服务器、数据库和表排序规则是相同的“utf8_general_ci”。

然后我尝试在我的代码中插入：

```
$conn = mysql_connect($server, $username, $password);

mysql_set_charset("UTF8", $conn); 
```

然后我在这里尝试了这个建议链接：*akrabat.com/php/utf8-php-and-mysql/*

然后我尝试使用此处的链接在 .htaccess 文件中设置 Apache 的 AddDefaultCharset：*httpd.apache.org/docs/2.0/mod/core.html#AddDefaultCharset*

但是……问题仍然存在。我不能正确地看到那些特定的字符——只有奇怪的象形文字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:21:22.683

冬青！最后！:)))))))))

问题是我正在使用 mysqli_ 查询。现在我尝试更改为 mysql_ （注意更改！）查询并且它有效！两周的 haaaaard 工作和研究……唷！

现在谁能给我解释一下这种现象的原因？:))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:56:43.600

您面临的问题与数据库字符编码设置和 Wordpress 中的一些具体细节有关。

虽然 Wordpress 有一个一般的字符编码设置，通常也关心数据库表，但它并不关心这些表所在的数据库的默认字符编码设置。

因此，当您的插件/代码添加您自己的数据库表时，您还需要注意编码设置 - 因为默认情况下它们将是您创建表的数据库默认值，很可能是 latin-1，它没有适合您的语言。

为数据库设置默认字符集（如果数据库名称不同，请用您的数据库名称替换*“wpdb” ）：*

```
ALTER DATABASE wpdb CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

要更改现有表 *"reg_form"* 的字符集：

```
ALTER TABLE reg_form CONVERT TO CHARACTER SET charset_name; 
```

*注意：*首先备份您的数据库。

# c# - 如何正确使用 Dispatcher.BeginInvoke？

> ID：15926310
> 
> 赞同：4
> 
> 时间：2013-04-10T12:49:10.920
> 
> 标签：c#, wpf, winforms, dispatcher

我几乎在互联网上到处搜索，我google了很多次，找到了很多结果，但我仍然找不到我的问题的解决方案。

我正忙于将旧`WinForms`应用程序转换为新的 WPF 应用程序，但某些命令遇到了问题。在 Winforms 应用程序中，他们使用`Control.BeginInvoke()`并将其存储在 IAsyncResult 对象中。我已经读到这`Dispatcher.BeginInvoke()`与for`WPF`等效，但是当我使用时出现此错误`Control.BeginInvoke()``WinForms`

> Dispatcher.BeginInvoke()：“无法将类型'System.Windows.Threading.DispatcherOperation'隐式转换为'System.IAsyncResult'。存在显式转换（您是否缺少演员表？）”。

任何帮助将不胜感激。

这是我要转换的代码。这是原始`WinForms`代码。我能够转换除 BeginInvoke 部分之外的所有内容。

```
 private eSkan.api.TeSkanAPI feSkanAPI = null;

    private void MessageFilter_AddRemove_Invoked(bool AddFilter, IMessageFilter Filter)
    {
        if (AddFilter){ Application.AddMessageFilter(Filter); }
        else { Application.RemoveMessageFilter(Filter); }
    }

    private void MessageFilter_AddRemove(bool AddFilter, IMessageFilter Filter)
    {
        {
            IAsyncResult sr = BeginInvoke((ESKAN_ADD_REMOVE_MESSAGEFILTER)MessageFilter_AddRemove_Invoked,
                                          AddFilter, Filter);
            sr.AsyncWaitHandle.WaitOne(2000);
        }
    } 
```

下面是我到目前为止转换的代码，包括我正在努力解决的 BeginInvoke 部分。

```
 private void MessageFilter_AddRemove_Invoked(bool addFilter, System.Windows.Forms.IMessageFilter filter)
    {
        if (addFilter) 
        { 
            System.Windows.Forms.Application.AddMessageFilter(filter); 
        }
        else 
        {
            System.Windows.Forms.Application.RemoveMessageFilter(filter); 
        }
    }

    private void MessageFilter_AddRemove(bool addFilter, System.Windows.Forms.IMessageFilter filter)
    {
        {
            IAsyncResult sr = System.Windows.Threading.Dispatcher.BeginInvoke((ESKAN_ADD_REMOVE_MESSAGEFILTER)MessageFilter_AddRemove_Invoked, addFilter, filter);
            sr.AsyncWaitHandle.WaitOne(2000);
        }
    } 
```

如果还有其他错误，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T13:00:26.873

那是因为[`Dispatcher.BeginInvoke`](http://msdn.microsoft.com/en-us/library/ms591206.aspx)尽管它可能是等效的逻辑运算，但它不返回 a `IAsyncResult`，而是返回 a [`DispatcherOperation`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcheroperation.aspx)。看看[这篇博](http://tech.pro/tutorial/800/working-with-the-wpf-dispatcher)文，你会看到一个很好的例子来说明它是如何`Dispatcher`工作的。我已将相关代码示例复制到此处以确保它稍后存在。

```
public Window1()
{
  InitializeComponent();

  CheckBox myCheckBox = new CheckBox();
  myCheckBox.Content = "A Checkbox";

  System.Threading.Thread thread = new System.Threading.Thread(
    new System.Threading.ThreadStart(
      delegate()
      {
        System.Windows.Threading.DispatcherOperation
          dispatcherOp = myCheckBox.Dispatcher.BeginInvoke(
          System.Windows.Threading.DispatcherPriority.Normal,
          new Action(
            delegate()
            {
              myCheckBox.IsChecked = true;
            }
        ));

        dispatcherOp.Completed += new EventHandler(dispatcherOp_Completed);
      }
  ));

  thread.Start();
}

void dispatcherOp_Completed(object sender, EventArgs e)
{
  Console.WriteLine("The checkbox has finished being updated!");
} 
```

注意这一行：

```
dispatcherOp.Completed += new EventHandler(dispatcherOp_Completed); 
```

这就是您将如何知道它何时完成的方式 - 它会通过该事件回电给您。

# css - CSS背景一半

> ID：15926311
> 
> 赞同：1
> 
> 时间：2013-04-10T12:49:14.157
> 
> 标签：css

我有一个背景有 2 种颜色切成两半。页面有粘性页脚。

有没有更好的方法可以做到这一点并且仍然保持粘性页脚？我做了一些研究，但这一切都会影响粘性页脚。

```
* {margin:0;}
html {position: relative; min-height: 100%; background:#F6E038;}

body {margin: 0 0 100px;}/* bottom = footer height */
.footer{
    position: absolute;
    left: 0;
    bottom: 0;
    height: 100px;
    width: 100%; background:gray;
    }

<body>
<div id="container"></div>
<div class="footer"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:52:04.763

您可以简单地在正文和包含之间添加一个 div。这工作得很好。

```
#red{position:fixed; background:red; width:50%; height:100%; z-index:-1}

<div id="red"></div> 
```

# eclipse - Eclipse 卡在服务器状态“正在启动”

> ID：15926316
> 
> 赞同：1
> 
> 时间：2013-04-10T12:49:25.547
> 
> 标签：eclipse, startup, application-server

我正在使用 Eclipse (4.2) 并且正在尝试启动 JBossAS 7。我遇到了这个问题，据称之前状态被卡在“正在启动”中，这始终是由于其他一些进程占用了端口 8080。

但这次不是，8080 端口是空闲的，所以我有点不知道下一步该做什么。是否可以在 Eclipse 中启用更详细的日志记录以查看它正在等待什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:17:11.773

我傻了，刚刚想通了。

我确实交换了一个作为启动选项传递给 eclipse 的证书，新证书也有一个新密码......我没有改变。现在一切都很好。

# java - ActionEvent - 按下按钮时更改 JLabel

> ID：15926319
> 
> 赞同：0
> 
> 时间：2013-04-10T12:49:39.313
> 
> 标签：java, swing, nullpointerexception, awt, actionevent

我还是 Java 新手，单击按钮时无法更改 JLabel 中的图像。我没有收到任何编译器错误，但确实收到了运行时错误。

```
Line 107: l1.setIcon(icon); 
```

“线程中的异常“AWT-EventQueue-0”java.lang.NullPointerException”

```
public class HomeController1 extends JPanel  implements ActionListener  
{
private int choice;
private JButton add;
private JLabel l1; 

public HomeController1() {

    // Create panels and set layouts
    JPanel p1 = new JPanel(new GridLayout(1,4)); 
    JPanel p2 = new JPanel (new GridLayout(3,3));
    JPanel p3 = new JPanel(new BorderLayout());

    // Create buttons
    add = new JButton("ADD APPLIANCE");

    //Add ActionListeners
    add.addActionListener(this);

    // Add buttons to panel
    p1.add(add);

    // Default ImageIcon
    ImageIcon blank =  new ImageIcon("blank.jpg");

    // Create Jlabels to hold blank image
    JLabel l1 = new JLabel(blank);

    // Add JLabels to Panel
    p2.add(l1);

    //Add contents to Frame
    p3.add(p1,BorderLayout.SOUTH);
    p3.add(p2,BorderLayout.CENTER);
    add(p3);

}       

    public void actionPerformed(ActionEvent e)
    {
        if (e.getSource() == add)
        {
          choice = 0;

           if (choice == 0)
           {
                Clock clock1 = new Clock();
                ImageIcon icon = clock1.getPicture();
                l1.setIcon(icon);
           }
        }
    } 
```

}

完整的错误信息：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at HomeController.actionPerformed(HomeController.java:107)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
at java.awt.Component.processMouseEvent(Component.java:6505)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3312)
at java.awt.Component.processEvent(Component.java:6270)
at java.awt.Container.processEvent(Container.java:2229)
at java.awt.Component.dispatchEventImpl(Component.java:4861)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
at java.awt.Container.dispatchEventImpl(Container.java:2273)
at java.awt.Window.dispatchEventImpl(Window.java:2719)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:729)
at java.awt.EventQueue.access$200(EventQueue.java:103)
at java.awt.EventQueue$3.run(EventQueue.java:688)
at java.awt.EventQueue$3.run(EventQueue.java:686)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:702)
at java.awt.EventQueue$4.run(EventQueue.java:700)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:699)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:91) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:08:46.927

您的问题来自您在家庭控制器中声明了一个全局变量的事实：

```
private JLabel l1; 
```

另一个是本地的，在您的构造函数中：

```
// Create Jlabels to hold blank image
JLabel l1 = new JLabel(blank); 
```

在您的构造函数中，您定义了一个与您的类中同名的变量，但它是一个不同的变量。构造函数中的那个隐藏了类中的那个。所以，最后，只有你的构造函数变量被初始化。如果您在构造函数中像这样更改代码，

```
// Create Jlabels to hold blank image
l1 = new JLabel(blank); 
```

然后你的类中只有一个全局变量，你不会得到 NullPointerException。

# php - 在单列中选择两个表不同的字段？

> ID：15926323
> 
> 赞同：0
> 
> 时间：2013-04-10T12:49:43.813
> 
> 标签：php, mysql, join, union

我需要在一个列中连接两个具有不同字段的表列

表1这样

```
id1        Name1        class1
1          aaa          CS
2          bbb          MBA
3          ccc          MCA 
```

另一个表归档为 table2

```
id2         name2         class2
1           ddd           CS
2           eee           MBA
3           fff           MCA 
```

我想将两个表都选择为单一结果

结果 ：

```
id2         name2         class2
1           aaa           CS
2           bbb           MBA
3           ccc           MCA   
1           ddd           CS
2           eee           MBA
3           fff           MCA 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:51:05.160

`UNION ALL`是你所需要的全部。它还保留重复项。

```
SELECT ID1 ID, Name1 Name, Class1 Class FROM Table1
UNION ALL
SELECT ID2 ID, Name2 Name, Class2 Class FROM Table2 
```

如果您想让结果唯一，请删除`ALL`，

```
SELECT ID1 ID, Name1 Name, Class1 Class FROM Table1
UNION
SELECT ID2 ID, Name2 Name, Class2 Class FROM Table2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:53:17.420

你是说内联？

例如：

```
SELECT * FROM Table1 INNER JOIN Table2  ON Table.Class1 = Table2.Cat_ID 
    INNER JOIN tbl_Klant   ON tbl_Project.KlantID 
```

或者你是什么意思？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:56:09.980

您可以使用`UNION ALL`或`UNION`。UNION 和 UNION ALL 之间的区别在于，Union all 不会消除重复的行，它只是从适合您查询细节的所有表中提取所有行并将它们组合成一个表。

`UNION`像`Select Distinct`从两个表中获得的结果集一样工作。
为了从两个表中检索所有行`UNION ALL`

```
SELECT ID1 ID, Name1 Name, Class1 Class FROM Table1
UNION ALL
SELECT ID2 ID, Name2 Name, Class2 Class FROM Table2 
```

或用于唯一行

```
SELECT ID1 ID, Name1 Name, Class1 Class FROM Table1
UNION 
SELECT ID2 ID, Name2 Name, Class2 Class FROM Table2 
```

# javascript - jQuery append() 与 appendChild()

> ID：15926325
> 
> 赞同：112
> 
> 时间：2013-04-10T12:49:51.810
> 
> 标签：javascript, jquery, append, appendchild

这是一些示例代码：

```
function addTextNode(){
    var newtext = document.createTextNode(" Some text added dynamically. ");
    var para = document.getElementById("p1");
    para.appendChild(newtext);
    $("#p1").append("HI");
} 
```

```
<div style="border: 1px solid red">
    <p id="p1">First line of paragraph.<br /></p>
</div> 
```

`append()`和 和有什么不一样`appendChild()`？
有实时场景吗？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-04-10T12:53:09.047

主要区别在于它`appendChild`是 DOM 方法和`append`jQuery 方法。第二个使用第一个，您可以在 jQuery 源代码中看到

```
append: function() {
    return this.domManip(arguments, true, function( elem ) {
        if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
            this.appendChild( elem );
        }
    });
}, 
```

如果您在项目中使用 jQuery 库，`append`则在向页面添加元素时始终使用它是安全的。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2017-07-20T13:36:14.753

# 不再

现在 append 是 JavaScript 中的一个方法

[关于 append 方法的 MDN 文档](https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/append)

引用 MDN

> 该`ParentNode.append`方法`DOMString`在`ParentNode`. `DOMString`对象作为等效的文本节点插入。

IE 和 Edge 不支持，但 Chrome(54+)、Firefox(49+) 和 Opera(39+) 支持。

JavaScript 的追加类似于 jQuery 的追加。

您可以传递多个参数。

```
var elm = document.getElementById('div1');
elm.append(document.createElement('p'),document.createElement('span'),document.createElement('div'));
console.log(elm.innerHTML);
```

```
<div id="div1"></div>
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-04-10T12:53:36.930

`append`是一种将一些内容或 HTML 附加到元素的 jQuery 方法。

```
$('#example').append('Some text or HTML'); 
```

`appendChild`是用于添加子元素的纯 DOM 方法。

```
document.getElementById('example').appendChild(newElement); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-06-24T11:37:53.067

我知道这是一个古老且已回答的问题，我不是在寻找选票，我只是想添加一些我认为可能对新来者有所帮助的小东西。

是的，`appendChild`是一种`DOM`方法，`append`是 JQuery 方法，但实际上关键的区别在于它`appendChild`以一个节点作为参数，我的意思是，如果你想向 DOM 添加一个空段落，你需要先创建该`p`元素

`var p = document.createElement('p')`

然后您可以将其添加到 DOM，而 JQuery`append`会为您创建该节点并立即将其添加到 DOM，无论它是文本元素还是 html 元素或组合！

`$('p').append('<span> I have been appended </span>');`

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-04-10T12:51:43.073

`appendChild`是一个 DOM [vanilla-js](http://vanilla-js.com/)函数。

`append`是一个 jQuery 函数。

他们每个人都有自己的怪癖。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-22T12:34:30.190

[JavaScript appendchild](https://www.w3schools.com/jsref/met_node_appendchild.asp)方法可用于将项目附加到另一个元素。[jQuery Append](http://www.yogihosting.com/jquery-append/)元素做同样的工作，但肯定行数更少：

> 让我们举个例子在列表中追加一个项目：

a) 使用 JavaScript

```
var n= document.createElement("LI");                 // Create a <li> node
var tn = document.createTextNode("JavaScript");      // Create a text node
n.appendChild(tn);                                   // Append the text to <li>
document.getElementById("myList").appendChild(n); 
```

b) 使用 jQuery

```
$("#myList").append("<li>jQuery</li>") 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-26T16:37:19.193

`appendChild`是一个纯*javascript*方法，而 as`append`是一个*jQuery*方法。

# php - 使用 PHP 发送邮件不适用于我目前的代码

> ID：15926332
> 
> 赞同：0
> 
> 时间：2013-04-10T12:50:21.613
> 
> 标签：php, forms, email, contact

我写了这段代码，但它没有发送到我的电子邮件。有什么问题？

这是联系表格中的代码：

```
<!-- send mail configuration -->
<input type="hidden" value="send-mail.php" name="to" id="to" />
<input type="hidden" value="Enter the subject here" name="subject" id="subject" />
<input type="hidden" value="send-mail.php" name="sendMailUrl" id="sendMailUrl" />
<!-- ENDS send mail configuration --> 
```

这是 send-mail.php 的代码

```
<?php
//vars
$subject = $_POST['subject'];
$to = explode(',', $_POST['to'] );

$from = $_POST['kurtfarrugia92@gmail.com'];

//data
$msg = "NAME: "  .$_POST['name']    ."<br>\n";
$msg .= "EMAIL: "  .$_POST['email']    ."<br>\n";
$msg .= "WEBSITE: "  .$_POST['web']    ."<br>\n";
$msg .= "COMMENTS: "  .$_POST['comments']    ."<br>\n";

//Headers
$headers  = "MIME-Version: 1.0\r\n";
$headers .= "Content-type: text/html; charset=UTF-8\r\n";
$headers .= "From: <".$from. ">" ;

//send for each mail
foreach($to as $mail){
mail($mail, $subject, $msg, $headers);
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:54:32.763

基本的 PHP 邮件脚本。

文件 mail.php

```
 <html>
    <body>

    <?php
    if (isset($_REQUEST['email']))
    //if "email" is filled out, send email
      {
      //send email
      $email = $_REQUEST['email'] ;
      $subject = $_REQUEST['subject'] ;
      $message = $_REQUEST['message'] ;
      mail("someone@example.com", $subject,
      $message, "From:" . $email);
      echo "Thank you for using our mail form";
      }
    else
    //if "email" is not filled out, display the form
      {
      echo "<form method='post' action='mail.php'>
      Email: <input name='email' type='text'><br>
      Subject: <input name='subject' type='text'><br>
      Message:<br>
      <textarea name='message' rows='15' cols='40'>
      </textarea><br>
      <input type='submit'>
      </form>";
      }
    ?>

    </body>
    </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:54:55.043

你有错误报告吗？获取有关发生/错误的更多信息可能会很方便。

```
error_reporting(E_ALL); 
```

尝试：

echo "邮件($mail, $subject, $msg, $headers)";

看看您发送给 mail() 的内容是否正是您认为的那样。

# c# - 如何纠正参数计数不匹配

> ID：15926338
> 
> 赞同：13
> 
> 时间：2013-04-10T12:50:37.263
> 
> 标签：c#, reflection

我该如何纠正我遇到的这个错误

> 用户代码未处理 TargetParameterCountException。参数计数不匹配。

这是我发生的代码

```
public static void InvokeMethod(string className, string methodName, string fileName)
{
    var t = Type.GetType(className);
    using (StreamReader f = new StreamReader("params.txt"))
    {
        t.GetMethod(methodName).Invoke(t.GetConstructor(Type.EmptyTypes).Invoke(new object[] { }), new object[] { f.ReadLine() });
    }
} 
```

这是整个代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Reflection;
using System.IO;

class MyClass
{
    private int i;
    public double d;
    private string s;
    public bool b;
    public MyClass()
    {
        i = 1;
        d = 0.1;
        s = "1";
        b = true;
    }
    public void Method0()
    {
        Console.WriteLine("Method with no arguments, no return value.");
    }
    private int Method1(int arg0)
    {
        Console.WriteLine("The method returns int, int gets.");
        return arg0;
    }
    private double Method2(int arg0, double arg1)
    {
        Console.WriteLine("Method returns a double, taking int and double.");
        return arg1 * arg0;
    }
    public bool Method3(string arg0)
    {
        Console.WriteLine("Method returns a bool, accepts string");
        return arg0.Length>10;
    }
    public bool Method3(string arg0,string arg1)
    {
        Console.WriteLine("The method takes two arguments string.");
        return arg0 == arg1;
    }
    public static char Method4(string arg0)
    {
        Console.WriteLine("Method returns a char, accepts string. .");
        Console.WriteLine(arg0);
        return arg0[1];
    }
    public void Method5(int arg0, double arg1)
    {
        Console.WriteLine("arg1 = {0} arg2 = {1}.",arg0,arg1);
    }
}

class MyTestClass
{
    public static string[] GetMethodsWithStrParams(string className)
    {
        var t = Type.GetType(className);
        List<string> res = new List<string>();
        foreach (var method in t.GetMethods())
        {
            foreach (var param in method.GetParameters())
            {
                if (param.ParameterType == typeof(string))
                {
                    res.Add(method.Name);
                    break;
                }
            }
        }
        return res.ToArray();
    }
    public static void InvokeMethod(string className, string methodName, string fileName)
    {
        var t = Type.GetType(className);
        using (StreamReader f = new StreamReader("params.txt"))
        {
            t.GetMethod(methodName).Invoke(t.GetConstructor(Type.EmptyTypes).Invoke(new object[] { }),
                                           new object[] { f.ReadLine() });
        }
    }
}

class Program
{
    static void Main(string[] args)
    {
        string name = "MyClass";

        foreach (var x in MyTestClass.GetMethodsWithStrParams(name))
        {
            Console.WriteLine(x);
        }

        MyTestClass.InvokeMethod("MyClass", "Method5", "params.txt");

        Console.ReadKey(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-10T12:56:19.667

你的`InvokeMethod`实现总是`t.GetMethod(methodName).Invoke`用两个参数调用，第一个是调用方法的目标实例，第二个是方法参数数组，它只包含一个字符串 ( `f.ReadLine()`)。

然后你使用`InvokeMethod`to call `MyClass.Method5`which 接受两个参数，一个 int 和一个 double。这显然行不通，因为`myClass.Method5("some string")`在语法上是不正确的，而这实际上是发生的。您不能指望字符串是所有`MyClass`方法的有效参数列表，对吗？

这是错误的原因，但只有您可以决定如何修复它，因为我们不知道更大的上下文。您必须根据被调用的实际方法提供正确数量的参数。

可能的解决途径：

*   我想提供给 Method5 的论点是什么？
*   我从哪里得到它们？
*   我如何将它们从它们所在的任何地方移动到我给的数组 `Invoke`？

这应该可以帮助您入门，但是没有人可以准确地告诉您，因为您只描述了错误，而不是您试图用代码解决的真正问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T12:55:52.900

错误不需要任何纠正，它是正确的。;)

您正在尝试使用仅包含一项的参数数组调用一个采用两个参数的方法。

例如，适用于该特定方法的参数数组是：

```
new object[] { 0, 1.5 } 
```

如果您希望您的`InvokeMethod`方法与采用不同类型的不同数量参数的方法一起使用，则必须为每个组合创建不同的参数数组。

# python - qsub python 导入

> ID：15926340
> 
> 赞同：3
> 
> 时间：2013-04-10T12:50:39.237
> 
> 标签：python, cluster-computing, importerror

我第一次在集群上运行作业。我使用以下命令运行它：

```
qsub -cwd -S /usr/bin/python myScript.py 
```

我有一个以以下开头的 python 脚本：

```
import time
import anotherScript 
```

我得到的错误：

```
Traceback (most recent call last):
  File "/opt/sge62/default/spool/hpc01/job_scripts/487174", line 11, in <module>
    import anotherScript
ImportError: No module named anotherScript 
```

与`anotherScript.py`位于同一目录中`myScript.py`。

我能做些什么来解决这个问题？将不胜感激任何帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T12:31:32.013

好吧，问题解决了`sys.path.append(currentWorkingDirectory)`。但是，这绝对不是一个好方法。

# json - 本地编码时如何检查 JSON

> ID：15926341
> 
> 赞同：-3
> 
> 时间：2013-04-10T12:50:38.967
> 
> 标签：json, razor, localhost

嗨，我在本地编码 JSON，我无法看到结果。我听说在本地编码时这可能是一个问题，这是真的吗，如果是的话，有没有办法解决这个问题，而无需每五分钟左右将其上传到服务器。

页面调用代码（default.cshtml）

```
<script type="text/javascript">
    function ajax_get_json(){
        var hr = new XMLHttpRequest();
        hr.open("GET", "JSON.cshtml", true);
        hr.setRequestHeader("Content-type", "application/json", true);
        hr.onreadystatechange = function(){
            if(hr.readyState == 4 && hr.status == 200){
                var data = JSON.parse(hr.responseText);
                var result = document.getElementById("results");
                result.innerHTML = "";
                for(var obj in data){
                    result.innerHTML += data[obj].item + "<br/>";
                }
            }
        }
        hr.send(null);
        result.innerHTML = "requesting...";
    }
</script>

<div>
    <script type="text/javascript">ajax_get_json();</script>
</div> 
```

被调用页面上的代码 (JSON.cshtml)

```
{
@{
    var connection = DatabaseConnection.createConnection();
    int count = 0;
    DatabaseConnection.openConnection(connection);
    foreach(Varer v in Varer.getListAll(connection))
    {
        if(count > Varer.getListAll(connection).Count)
        {
            int id = v.id;
            string navn = v.navn;

            <text>
                "ul@v.id":{ "item":"@v.navn" },
            </text>
        }
        else
        {
            <text>
                "ul@v.id":{ "item":"@v.navn" }
            </text>
        }
    }
    DatabaseConnection.closeConnection(connection);
}
} 
```

这两个页面在同一级别。并使用 cshtml 编码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:10:09.367

没有问题，只要您不尝试使用 AJAX / WebSockets / 等等，将其放入您的程序中。

如果您手动键入：

```
var json = "{\"name\":\"Bob\",\"age\":32}",
    data = JSON.parse(json);

data.name; 
```

它会工作得很好。

只要它是有效的，你如何构造这个 JSON 就完全不重要了。
只是不要指望能够在 AJAX 调用中得到它。

# android - 画布中的平滑位图移动（android）

> ID：15926344
> 
> 赞同：0
> 
> 时间：2013-04-10T12:50:42.240
> 
> 标签：android, canvas, bitmap, ondraw

我尝试使用加速度计传感器创建一个带有移动球和一个洞的迷宫。使用下面的代码，球掉进了洞里，但是性能真的很差，我把加速度计频率设置为最快，但除了平滑之外，其他的都没有。我做了第二张画布，因为这样我可以打一个洞。

```
public RenderView(Context context, int width, int height) {
    super(context);
    playGround = new Rect(40, 40, width - 40, height - 40);
    holes.addElement(new PointF(500f, 500f));

    // Set background
    this.setBackgroundResource(R.drawable.bottom);

    // Set bitmap
    woodGround= wood.createBitmap(width, height, Bitmap.Config.ARGB_8888);
    bitmapCanvas = new Canvas();
    bitmapCanvas.setBitmap(woodGround);

    // Set eraser paint properties
    eraserPaint.setAlpha(0);
    eraserPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN));
    eraserPaint.setAntiAlias(true);
}

protected void onDraw(Canvas canvas) {
    Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG
            | Paint.FILTER_BITMAP_FLAG);
    paint.setStyle(Style.FILL_AND_STROKE);
    paint.setAntiAlias(true);

    if (ballInHole)
        canvas.drawBitmap(ball, b.x, b.y, paint);

    bitmapCanvas.drawBitmap(wall, 0, 0, paint);
    bitmapCanvas.drawBitmap(wood, playGround, playGround, paint);

    canvas.drawBitmap(bitmap, 0, 0, paint);

    for (PointF h : holes) {
        bitmapCanvas.drawCircle(h.x + radius, h.y + radius, radius,
                eraserPaint);
    }
    if (!ballInHole)
        canvas.drawBitmap(ball, b.x, b.y, paint);
    invalidate();
} 
```

它解决得很丑，因为当他掉进洞里时，我只是在其他位图下面画球。还有另一种方法吗？

性能也很差，我将加速度计-传感器-延迟设置为最快，但球运行不顺畅。当我删除线`canvas.drawBitmap(bitmap, 0, 0, paint);`时，球更光滑，但木质背景消失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:23:15.543

这里的问题是你一直在做很多绘图，这需要时间来绘制并且性能变得非常低。

这里有一些关于如何处理它的提示。

您可能最好有一个带有静态内容（背景图像和孔）的视图，并在您的布局上在其顶部有第二个视图，只是绘制球。

在背景图像上，不要调用无效。这样，您将只绘制一次背景。

和顶部图像（仅限球）您可以使之无效，因此它可以在新位置上重绘。

我不确定最后一部分：但您可能需要调用`invalidate(rect);`上一次传球所在的区域，以使背景仅重新绘制那个小区域（而不是整个屏幕）

快乐编码。

# android - 调用 Android 活动

> ID：15926346
> 
> 赞同：1
> 
> 时间：2013-04-10T12:50:46.197
> 
> 标签：android, android-intent, android-activity, phone-call, dialing

我有一个执行电话的应用程序，但是当我直接发送拨号时，该应用程序在后台并显示android默认电话的屏幕，它一定不会发生，因为拨打电话时，我需要触发我的应用程序中的命令。如果有人知道可能的解决方案。谢谢你。下面是我用来打电话的方法。

```
private void call() {
try {
    Intent callIntent = new Intent(Intent.ACTION_CALL);
    callIntent.setData(Uri.parse("tel:123456789"));
    startActivity(callIntent);
} catch (ActivityNotFoundException activityException) {
     Log.e("Dialing", "Call failed", e);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:04:08.137

希望我的问题是正确的。如果您正在尝试创建一个应用程序来替换默认的电话处理应用程序，那么我想您应该知道这不是小菜一碟。

首先让我明确一点，您根本无法创建手机应用程序来替换默认应用程序。

如果你真的想这样做，那么你需要获取 Android 源代码，通过添加你的手机应用程序重新编译它，然后在有根设备上刷写它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:05:32.037

很快，您就无法在没有拨号器出现的情况下进行“隐身”呼叫。

# struts2 - 提交对象和列表 struts1

> ID：15926347
> 
> 赞同：0
> 
> 时间：2013-04-10T12:50:46.390
> 
> 标签：struts2, struts, struts-1

我有一门课`MyClass`如下

```
public class MyClass {
    private int fieldOne;        //with getter, setter
    private String fieldTwo;     //with getter, setter
} 
```

我的表单 bean 中有以下两个字段

```
private MyClass myObject;            //with getter, setter
private ArraList<MyClass>myList;     //with getter, setter 
```

使用 struts1 我想从网页表单提交对象和对象列表。

在 struts2 中，我们可以如下所示获取对象和列表（考虑到字段不在操作类中，而不是在表单 bean 中）。当提交以下字段时，struts2 启动`myObject`并`myList`为我提供提交的值。（Parameters Interceptor是struts2中幕后的魔术师。）

```
<!-- Object -->
<input type="text" name="myObject.fieldOne" value="1" />
<input type="text" name="myObject.fieldTwo" value="Two" />
...
<!-- List -->
<input type="text" name="myList[0].fieldOne" value="1" />
<input type="text" name="myList[0].fieldTwo" value="Two" />

<input type="text" name="myList[1].fieldOne" value="10" />
<input type="text" name="myList[1].fieldTwo" value="Twenty" /> 
```

有没有办法在struts1中执行这种魔术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:58:23.460

AFAIR，同样适用于 Struts1，只要表单 bean 中的列表包含一个已经具有正确大小的列表。即，如果最后一个输入文本的名称为`myList[7].fieldOne`，则列表的大小至少应为 8，因此预先填充了 8 个`MyClass`实例。STruts 只会做`formBean.getMyList().get(7).setFieldOne(10)`。

有关详细信息，请参阅[http://struts.apache.org/development/1.x/struts-taglib/indexedprops.html 。](http://struts.apache.org/development/1.x/struts-taglib/indexedprops.html)

# mysql - LEFT JOIN 显示不在右表中的记录

> ID：15926348
> 
> 赞同：4
> 
> 时间：2013-04-10T12:50:49.063
> 
> 标签：mysql, sql, left-join

我有两个表 ECRDTL_del 和 ECRDTL_edit，我只想显示 ECRDTL_del 中不在 ECRDTL_edit 中的记录。我曾尝试使用 MYSQL 左连接，但无法获得所需的结果。这是我当前的查询字符串：

```
SELECT a.*
FROM ECRDTL_del AS a
    LEFT JOIN ECRDTL_edit AS b ON b.Ecrno = a.Ecrno
WHERE b.Cylno <> a.Cylno 
```

下面提到的这两个表和预期结果的数据示例：

ECRDTL_del：

```
Ecrno  Cylno
9090   8881
9090   8882
9090   8883
9090   8884 
```

ECRDTL_编辑：

```
Ecrno  Cylno
9090   8881
9090   8885
9090   8886
9090   8884 
```

LEFT 加入后的预期结果：

```
Ecrno  Cylno
9090   8882
9090   8883 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T12:53:02.153

从你的问题：

> “...我只想显示 ECRDTL_del 中不在 ECRDTL_edit 中的记录。”

你很接近，你只需要检查是否`b.Ecrno IS NULL`。

```
SELECT a.* 
FROM   ECRDTL_del AS a 
       LEFT JOIN ECRDTL_edit AS b 
          ON a.Ecrno = b.Ecrno AND 
             a.Cylno = b.Cylno
WHERE  b.Ecrno IS NULL 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/54abb/1)

输出

```
╔═══════╦═══════╗
║ ECRNO ║ CYLNO ║
╠═══════╬═══════╣
║  9090 ║  8882 ║
║  9090 ║  8883 ║
╚═══════╩═══════╝ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T13:01:57.477

我通常`EXISTS`用于这种类型的事情：

```
SELECT *
FROM ECRDTL_del as a
WHERE NOT EXISTS(
    SELECT *
    FROM ECRDTL_edit as b
    WHERE b.Ecrno = a.Ecrno
    AND b.Cylno = a.Cylno
) 
```

一旦找到匹配的记录，它就会停止，而类似 an 的东西`IN`会继续搜索匹配的记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T12:52:26.387

```
select * from ECRDTL_del where Cylno not in (select Cylno from ECRDTL_edit) 
```

# visual-studio-2012 - VS 2012 无法启动调试器错误

> ID：15926350
> 
> 赞同：0
> 
> 时间：2013-04-10T12:50:51.587
> 
> 标签：visual-studio-2012

我希望有人可以帮助我，现在这个问题困扰了我 2 天。当我尝试调试应用程序时，我会收到以下消息：

无法启动调试器错误代码（0x80040154），此问题仍然存在可能是安装错误。请转到控制面板添加删除程序并重新安装。

这发生在安装 VS 2012 更新 2 之后。所以我卸载了更新 2，但问题仍然存在。我做了VS修复，问题仍然存在。我确实重新安装了VS（卸载->从头开始重新安装）+更新1，但在此之后，VS无法简单启动（VS停止响应......在线检查解决方案......关闭应用程序）。

所以我不做一个完整的电脑格式，因为我有很多东西在里面。

如果有人可以提出解决问题的方法，我将不胜感激。

更新：

卸载VS 2012的update 2，然后启动修复工具，然后安装Update 1，以安全模式启动VS，卸载扩展，重新安装exensions...它可以工作...但不要安装更新 2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T06:56:43.760

由于管理员权限问题，此错误被触发。请右键单击 Visual Studio 2012 的快捷方式，然后单击“以管理员身份运行”。

如果要永久启用“以管理员身份运行”选项：

1.  右键单击快捷方式并选择属性
2.  单击高级
3.  选中“始终以管理员身份运行”选项，然后单击“确定”关闭对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:15:30.473

我有类似的问题。在为 Visual Studio 2012 安装更新 2 后，我无法启动调试器。我找不到对其他事物的任何依赖。这仅在我的 PC 上发生，我办公室中的其他计算机都可以，尽管它们具有相同的硬件和软件（操作系统和其他程序从相同的部署映像安装）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-30T09:20:44.223

去注册并删除microsoftvisualstudio注册文件删除了注册表项。

请注意，我没有删除或清理包含许可证密钥的 HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\VisualStudio\11.0

此致

# java - org.hibernate.InvalidMappingException

> ID：15926353
> 
> 赞同：0
> 
> 时间：2013-04-10T12:51:03.383
> 
> 标签：java, hibernate

在使用 Hibernate 进行开发的同时，我遇到了一些问题。我有以下映射文件：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
                           "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated 07-abr-2011 13:29:19 by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
<class name="com.cartif.database.Attribute11_CS6" table="Attribute11_CS6">
    <id name="iAttrId" column="attributeid" type="java.lang.Integer">
            <generator class="sequence">
            <param name="sequence">s_attribute_CS6</param>
        </generator>
    </id>
    <property column="name" generated="never" lazy="false" name="sName" type="java.lang.String"/>
    <property column="value" generated="never" lazy="false" name="sValue" type="java.lang.String"/>
    <property column="timestamp" generated="never" lazy="false" name="tDate" type="java.sql.Timestamp"/>
    <property column="deviceId" generated="never" lazy="false" name="iDeviceId" type="java.lang.Integer"/>
    <property column="units" generated="never" lazy="false" name="sUnits" type="java.lang.String"/>
    <!--<many-to-one cascade="all" name="appField" class="com.cartif.database.ApplicationField" fetch="join">
        <column name="applicationfieldid" />
    </many-to-one>-->
</class>
</hibernate-mapping> 
```

Java 类是（我不包括 get/set 方法）：

```
public class Attribute11_CS6 implements Serializable{
    private static final long serialVersionUID = 1L;
    private int iAttrId;
    private String sName;
    private String sValue;
    private String sSensor;
    private String sUnits;
    private Timestamp tDate;
    private int iDeviceId; 
```

当我运行应用程序时，它会抛出一个异常，如下所示：

```
org.hibernate.InvalidMappingException: Could not parse mapping document from resource resources/Attribute11_CS6.hbm.xml
at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serialize(ServerSerializationStreamWriter.java:615)
at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamWriter.writeObject(AbstractSerializationStreamWriter.java:126)
at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter$ValueWriter$8.write(ServerSerializationStreamWriter.java:153)
at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serializeValue(ServerSerializationStreamWriter.java:535)
at com.google.gwt.user.server.rpc.RPC.encodeResponse(RPC.java:616)
at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:390)
at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:588)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
at com.cartif.monitoring.server.MonitoringServiceImpl.service(MonitoringServiceImpl.java:56)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:390)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)
at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:322)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:939)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:756)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:451) 
```

错误可能是什么？因为我在其他应用程序中使用类似的映射文件而没有问题。我已经检查了几次类，包等。

提前致谢

# c++ - 使用 gSoap 的异步、确认、点对点连接

> ID：15926355
> 
> 赞同：9
> 
> 时间：2013-04-10T12:51:11.783
> 
> 标签：c++, c, linux, unix, gsoap

这是我的情况：

1.  我有一个`wsdl`“翻译”成这样的头文件：`wsdl2h -o file.h file.wsdl`
2.  然后，我执行了`soapcpp2 -Icorrect_path -j file.h`
3.  在“服务器端”我实现了服务，使用`soapXXXService.[h|cpp]`
4.  再次在“服务器端”，我使用`soap_init2`(with `SOAP_IO_KEEPALIVE`)，我有`soap_bind`, `soap_accept`,`soap_copy`等，它似乎工作得很好（见下文）
5.  在“客户端”，我使用生成的`proxy`对象（再次使用`SOAP_IO_KEEPALIVE`），构造消息并将其发送到服务器
6.  “服务器”收到此消息并**发送回 ACK**（自定义`XML`）
7.  “客户”收到了`ACK`，一切都很好。

所以，我现在要做的是让“服务器”返回*“真实”*响应给“客户端”，而“客户端”必须返回一个`ACK`给“服务器”。

这怎么可能？（它应该是）

* * *

*“你试过什么？”*

我想到了两件事。

第一个是以某种方式重用从 中返回的套接字的文件描述符`soap_accept`，以将“真实响应”发送回服务器。但这可能吗？
Unix 套接字是全双工的，所以这在技术上是可行的，但是否`gSoap`限制了这一点？因为我在文档中没有看到任何关于此的内容。

我想到的第二个选项是在“客户端”中创建相同的“服务”，以便接收消息（“真实响应”）并以`ACK`与“服务器”中相同的方式返回. 但这意味着，“服务器”还必须有一个`proxy`对象实例才能发送所谓的“真实响应”。
这对我来说听起来真的很丑陋和可怕。如果这是唯一的选择，我不会感到惊讶，但是..

编辑：对于第二个选项 - 这意味着客户端应该有一个侦听器端口，应该处理传入连接等。对我来说听起来不像一个客户端..

* * *

我了解，我可能遗漏了一些基本的`gSoap`工作原理，但我阅读了整个[用户文档](http://www.cs.fsu.edu/~engelen/soapdoc2.html)和[“入门”指南](http://www.cs.fsu.edu/~engelen/soapmain.html)，但没有找到任何相关信息。

[如果有什么不清楚的地方请告诉我]

* * *

**编辑：**这是我想要实现的场景：

1.  客户端向服务器发送**请求**
2.  服务器返回**ACK**作为响应（如标准 ACK） - 表示成功接收到请求
3.  稍后，服务器向客户端发送**响应**（这是真正的响应）
4.  客户端再次返回**ACK** - 信号成功收到响应

这种情况也可能是相反的：服务器也可以向客户端发送请求。这意味着 - 与上述相同的场景，但替换“客户端”<->“服务器”。

注意：**`request/response`**和*都是*SOAP 消息。**`ACK`**

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:57:54.850

`option 2`我在我的问题中使用它来实现它。即：在客户端和服务器中实现服务（监听器）并使用代理（用于发送请求）。这样，我有以下内容：

1.  **服务器**已启动
2.  **客户端**启动（启动一个**监听**器，又名“服务”）
3.  **客户端**发送**SOAP**请求（使用代理**对象**），告诉服务器：*“我起来了，我的位置是 xxx”*（`xxx`是 URI，将用于将服务器连接到客户端的侦听器）
4.  **服务器**以**SOAP**消息 (ACK)响应（说： *“好的，我看到你现在起床了”*）
5.  稍后，**服务器**使用在第一条消息中接收到的位置向客户端发送**SOAP 请求**（通过**代理对象）；**这个请求是请求的真实响应，发送进来`3.`这说—— *“好的，我准备好和你沟通了”*
6.  **客户端**返回对这个请求的**响应**（ACK）（说：*“OK，cool”*）

这样，客户端和服务器都知道彼此的位置，**都有**一个监听器（服务的实现），**都**维护代理对象。

* * *

似乎这对我有用。如果有人给我另一个选择或`option 1`在我的问题中说些什么，我会很高兴。

* * *

**编辑：**经过几天的深入研究和对协议的深入分析之后，我打算实施，看来，这是做到这一点的唯一方法：

> 实现必须能够充当 SOAP 客户端和 SOAP 服务器*

# javascript - 使用 javascript 将文本节点添加到 SVG 组但未出现

> ID：15926356
> 
> 赞同：1
> 
> 时间：2013-04-10T12:51:14.907
> 
> 标签：javascript, text, svg, add

这是标记内 SVG 文件中的 Javascript。

这个 SVG 显示了我所在城市的乐队时间线。当鼠标单击 a 时，脚本将访问 XML 库并检索每个乐队中成员的姓名（当他们加入时）。并向包含 .

这是第一个：

```
 <g class="band" id="hajimama">
<text x="633.333333333" y="50" fill="black" font-size="12">Hajimama</text>
    <rect x="633.333333333" y="50" width="413.333333333" height="15" fill="red" onmousedown="growBox(evt);"></rect></g> 
```

这是 growBox() 函数：

```
 function growBox(evt)
{
 var i, g_index;
 var r = evt.target;

 g_index = find_SVGBand(r);

 b = find_XMLBand(b_name);
 members = b.getElementsByTagName("member"); //members.length is used for drawing.
 stretch = members.length*16;

 for (k=g_index+1;k<groups.length;k++)
 {
  cur_y = parseFloat(get_firstChild(groups[k]).getAttribute("y"));
  new_y = cur_y + stretch;
  get_firstChild(groups[k]).setAttribute("y",new_y);
  groups[k].getElementsByTagName("rect")[0].setAttribute("y",new_y);
 }
 evt.target.setAttribute('height',stretch);

 var s = parseFloat(r.getAttribute("y")) + 5; //write the first member name below the band name
 for (k=0;k<members.length;k++) //loop through each member of a band
 {
    var m=members[k];
    var m_name = returnMemberName(m);

    q = document.createElement("text");
    q.setAttribute("font-size",20);

    if (m.getElementsByTagName("instrument")[0].hasChildNodes())
    {
        if (m.getElementsByTagName("instrument")[0].childNodes[0].nodeValue == "guitar")
            inst_clr="#993333";
        else if (m.getElementsByTagName("instrument")[0].childNodes[0].nodeValue == "bass")
            inst_clr="#339933";
        else if (m.getElementsByTagName("instrument")[0].childNodes[0].nodeValue == "drums")
            inst_clr="#333399";
    }
    else
        inst_clr="#000000";

    q.setAttribute("fill",inst_clr);

    //draw names based on start dates
    m_start = returnMemberJoinDate(m);
    mrect_start = (m_start - 2000) * 80;

    q.setAttribute("x",mrect_start);
    q.setAttribute("y",s);
    mn = document.createTextNode(m_name);
    q.appendChild(mn);
    r.parentNode.appendChild(q);
    q.setAttribute('visibility','visible');
    s+=15;
   alert(r.parentNode.getAttribute("id") + " " + get_lastChild(r.parentNode).nodeName + " " + get_lastChild(r.parentNode).childNodes[0].nodeValue);
 } //for

 evt.target.setAttribute('onmousedown','');
 addEBox(evt);
} 
```

正如您通过 alert() 看到的那样，数据被正确访问并且节点被正确附加到节点，因为 r.parentNode.getAttribute("id") 返回节点的 id。

任何想法为什么文本没有出现？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T12:55:11.327

在 SVG 中的元素必须在 SVG 命名空间中创建。这意味着 createElement 不会创建 SVG 文本元素，而是需要 createElementNS。

所以

```
q = document.createElement("text"); 
```

应该

```
q = document.createElementNS("http://www.w3.org/2000/svg", "text"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-14T08:25:06.633

上面的罗伯茨代码在 IE11 上对我有用，谢谢罗伯特！

起初我得到对象不支持属性或方法'createElementNS'，但发现这是由于该页面上启用了兼容模式，一旦我将其删除，一切正常。

# javascript - 如何在网页中包含日历

> ID：15926357
> 
> 赞同：3
> 
> 时间：2013-04-10T12:51:14.750
> 
> 标签：javascript, jquery, html, css

嗨，我想在我的网页中包含一个日历，在谷歌搜索后我找到了这段代码

```
<!DOCTYPE html>
<html>
<head>
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

  <script>
  $(document).ready(function() {
    $("#datepicker").datepicker();
  });
  </script>
</head>
<body>
<table>
<tr>
<td>
   DOB</td><td> <input id="datepicker" readonly/></td>
</tr>
</table>

</body>
</html> 
```

现在我想在我的网页中添加这个。所以在我写的头里

```
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

  <script>
  $(document).ready(function() {
    $("#datepicker").datepicker();
  });
  </script> 
```

在输入字段中我写了但是当我点击字段时日历没有打开。如果你想要我的完整代码，那么它如下

```
<!DOCTYPE html> <!-- The new doctype -->
<html>
    <head>
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

        <title>home</title>

        <link rel="stylesheet" type="text/css" href="styles.css" />

    </head>

    <body> <script>
  $(document).ready(function() {
    $("#datepicker").datepicker();
  });
  </script>

        <section id="page" > <!-- Defining the #page section with the section tag -->

            <header > <!-- Defining the header section of the page with the appropriate tag -->

                <hgroup>
                    <h1>Your Logo</h1>
                    <h3>and a fancy slogan</h3>
                </hgroup>

                <nav class="clear"> <!-- The nav link semantically marks your main site navigation -->
                    <ul>
                        <li><a href="#article1">Personal Information</a></li>
                        <li><a href="#article2">Medical History</a></li>
                        <li><a href="#article3">Insurance Information</a></li>
                    </ul>
                </nav>

            </header>

            <section id="articles"> <!-- A new section with the articles -->

                <!-- Article 1 start -->

                <div class="line"></div>  <!-- Dividing line -->

                <article id="article1"> <!-- The new article tag. The id is supplied so it can be scrolled into view. -->
                    <h2>Personal Information</h2>

                    <div class="line"></div>

                    <div class="articleBody clear">

                     <div >

        <div style="float: left; padding-left: 50px; padding-top: 5px">
            <table cellspacing="10" cellpadding="10" >
            <tr>
                <td width="200" height="30">
                    <b>Last Name</b>
                </td>
                <td>
                     <input type="text" name="lastname" value=""/>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>First Name</b>
                </td>
                <td>
<input type="text" name="lastname" id="twoo" value=""/>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Date of Birth</b>
                </td>
                <td>
<input id="datepicker" readonly/>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Gender</b>
                </td>
                <td >
Male<input type="radio" name="lastname" value="male"/>
Female<input type="radio" name="lastname" value="male"/>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Occupation</b>
                </td>
                <td>
<input type="text" name="lastname" value=""/>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Race</b>
                </td>
                <td>
<input type="text" name="lastname" value=""/>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Mobile</b>
                </td>
                <td>
<input type="text" name="lastname" value=""/>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Phone</b>
                </td>

                <td>
<input type="text" name="lastname" value=""/>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Email</b>
                </td>
                <td>
<input type="text" name="lastname" value=""/>
                </td>
            </tr>

        </table>

        </div>
        <div style="float: right;padding-right: 50px;padding-top: 50px">

            <table>

                <tr>
                <td width="160" height="30">
                    <b>Address</b>
                </td>
                <td>
<input type="text" name="lastname" value=""/>
                </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>Street</b>
                    </td>
                    <td>
<input type="text" name="lastname" value=""/>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>City</b>
                    </td>
                    <td>
<input type="text" name="lastname" value=""/>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>State</b>
                    </td>
                    <td>
<input type="text" name="lastname" value=""/>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>Country</b>
                    </td>
                    <td>
<input type="text" name="lastname" value=""/>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>Pin Code</b>
                    </td>
                    <td>
<input type="text" name="lastname" value=""/>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>Height</b>
                    </td>
                    <td>
<input type="textbox" name="lastname" value=""/>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>Weight</b>
                    </td>

                    <td>
<input type="textbox" name="lastname" value="" height="10" width="10"/>
                    </td>
                </tr>
<td  height="30">
                        <b>BP</b>
                    </td>

                    <td>
<input type="textbox" name="lastname" value="" height="10" width="10"/>
                    </td>
                </tr>
<td  height="30">
                        <b>Blood Group</b>
                    </td>

                    <td>
<input type="textbox" name="lastname" value="" height="10" width="10"/>
                    </td>
                </tr>
            </table><div  align="center" style="padding-top: 30px">

        </div>
        </div>
        </div>
                    </div>
                </article>

                <!-- Article 1 end -->

                <!-- Article 2 start -->

                <div class="line"></div>
                <div class="space"></div>                <div class="space"></div>                <div class="space"></div>                <div class="space"></div>
<div class="space"></div><div class="space"></div><div class="space"></div><div class="space"></div><div class="space"></div><div class="space"></div><div class="space"></div>
<div class="space"></div><div class="space"></div><div class="space"></div><div class="space"></div><div class="space"></div><div class="space"></div>
                <article id="article2">
                    <h2>Medical History</h2>

                    <div class="line"></div>

                    <div class="articleBody clear"><!--
                        <figure>
                            <img src="medical.jpg" width="620" height="440" /></a>
                        </figure>

                        <p><div align="center" style="padding-top: 30px">
            <table  cellspacing="10" cellpadding="10">
                <tr>
                    <td width="200" height="30"><h5>Old Password</h5></td>
                    <td  height="30"><input name="old" type="password"></td>
                </tr>
                <tr>
                    <td  height="30"><h5>New Password</h5></td>
                    <td  height="30"><input name="newPsw" type="password"></td>
                </tr>
                <tr>
                    <td height="30"><h5>Confirm Password</h5></td>
                    <td  height="30"><input name="confirm" type="password"></td>
                </tr>
            </table>
        </div>                                                             -->

<div style="float: left; padding-left: 50px; padding-top: 5px">
            <table cellspacing="10" cellpadding="10" >
            <tr>
                <td width="200" height="30">
                    <b>Diabetes</b>
                </td>
                <td>
                     <input type="radio" name="lastname" value=""/>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Insulin</b>
                </td>
                <td>
<input type="radio" name="lastname" value=""/>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Obesity</b>
                </td>
                <td>
<input type="radio" name="lastname" value=""/>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Hypertension</b>
                </td>
                <td >
<input type="text" name="lastname" value=""/>

                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Pancreatis</b>
                </td>
                <td>
<input type="text" name="lastname" value=""/>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Renal Problems</b>
                </td>
                <td>
<input type="text" name="lastname" value=""/>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Neuropathy</b>
                </td>
                <td>
<input type="text" name="lastname" value=""/>
                </td>
            </tr>

<tr>
                <td  height="30">
                    <b>Amputations</b>
                </td>

                <td>
<input type="text" name="lastname" value=""/>
                </td>
            </tr>
<tr>
                <td  height="30">
                    <b>GERD</b>
                </td>

                <td>
<input type="text" name="lastname" value=""/>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Cardiac Problem</b>
                </td>

                <td>
<input type="text" name="lastname" value=""/>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Retinal Problem</b>
                </td>
                <td>
<input type="text" name="lastname" value=""/>
                </td>
            </tr>

        </table>

        </div>
        <div style="float: right;padding-right: 50px;padding-top: 50px">

            <table>

                <tr>
                <td width="160" height="30">
                    <b>Sleep Arnoea</b>
                </td>
                <td>
<input type="text" name="lastname" value=""/>
                </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>Erectile Dysfunction</b>
                    </td>
                    <td>
<input type="text" name="lastname" value=""/>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>Thyroid Problem</b>
                    </td>
                    <td>
<input type="text" name="lastname" value=""/>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>Liver Problem</b>
                    </td>
                    <td>
<input type="text" name="lastname" value=""/>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>Constipation</b>
                    </td>
                    <td>
<input type="text" name="lastname" value=""/>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>Asthma</b>
                    </td>
                    <td>
<input type="text" name="lastname" value=""/>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>TB</b>
                    </td>
                    <td>
<input type="textbox" name="lastname" value=""/>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>Diet Control</b>
                    </td>

                    <td>
<input type="radio" name="lastname" value="" height="10" width="10"/>
                    </td>
                </tr>
<td  height="30">
                        <b>Craving for Sweets</b>
                    </td>

                    <td>
<input type="radio" name="lastname" value="" height="10" width="10"/>
                    </td>
                </tr>
<td  height="30">
                        <b>Smoking</b>
                    </td>

                    <td>
<input type="radio" name="lastname" value="" height="10" width="10"/>
                    </td>
                </tr>
            </table>

        <div class="footer-bar"  align="center" style="padding-top: 30px">
            <table align="center" >
                <tr >
                    <td width="100" align="center"><input type="submit" class="button button-submit" value="Submit"  /></td>
                    <td width="100" align="center"><input type="reset" class="button button-submit" value="Reset" /></td>
                </tr>
            </table>
        </div></p>
                        <p></p>
                    </div>
                </article>

                <!-- Article 2 end -->

                <!-- Article 3 start -->

                <div class="line"></div>

               <article id="article3">
                    <h2>Insurance Information</h2>

                    <div class="line"></div>

                    <div class="articleBody clear"><!--                       -->

<div style="float: left; padding-left: 50px; padding-top: 5px">
            <table cellspacing="10" cellpadding="10" >

<tr>
                <td  height="30">
                    <b>Insurance Company Name</b>
                </td>

                <td>
<input type="text" name="lastname" value=""/>
                </td>
            </tr>
<tr>
                <td  height="30">
                    <b>Policy Name</b>
                </td>

                <td>
<input type="text" name="lastname" value=""/>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Policy No</b>
                </td>

                <td>
<input type="text" name="lastname" value=""/>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Validity</b>
                </td>
                <td>
<input type="text" name="lastname" value=""/>
                </td>
            </tr>

        </table>

        </div>
        <div style="float: right;padding-right: 50px;padding-top: 50px">

            <table>
                <tr>
                    <td  height="30">
                        <b>Constipation</b>
                    </td>
                    <td>
<input type="text" name="lastname" value=""/>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>Asthma</b>
                    </td>
                    <td>
<input type="text" name="lastname" value=""/>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>TB</b>
                    </td>
                    <td>
<input type="textbox" name="lastname" value=""/>
                    </td>
                </tr>

                </tr>
            </table>

        <div class="footer-bar"  align="center" style="padding-top: 30px">
            <table align="center" >
                <tr >
                    <td width="100" align="center"><input type="submit" class="button button-submit" value="Submit"  /></td>
                    <td width="100" align="center"><input type="reset" class="button button-submit" value="Reset" /></td>
                </tr>
            </table>
        </div></p>
                        <p></p>
                    </div>
                </article>

                <!-- Article 3 end -->

            </section>

        <footer> <!-- Marking the footer section -->

           <div class="line"></div>

           <p>Copyright 2013 - mysite.com</p> 

           <a href="#" class="up">Go UP</a>
           <a href="www.spanwave.com" class="by">spanwave</a>

        </footer>

        </section> <!-- Closing the #page section -->

        <!-- JavaScript Includes -->

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
        <script src="jquery.scrollTo-1.4.2/jquery.scrollTo-min.js"></script>
        <script src="script.js"></script>
    </body>
</html> 
```

自上一小时以来，我一直在尝试解决错误，但无法修复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:55:12.873

这是因为您的输入字段是只读的

```
<input id="datepicker" readonly/>
                   //----^^^^---here 
```

所以点击输入不会因此触发..不触发 datepicker ，删除它（只读）应该可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:02:39.053

只需删除您包含在底部的最后两个脚本。您已经在顶部包含了 jquery 脚本。它可以正常工作

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
    <script src="script.js"></script> 
```

# python - 如何根据 Python 中第一个的相同元素对 3 个相同大小的排序列表求和？

> ID：15926358
> 
> 赞同：6
> 
> 时间：2013-04-10T12:51:15.490
> 
> 标签：python, list, dictionary, sum, iteration

我有一个`dictionary`包含 3`lists`键的 python '时间'，'电源'和'使用'。所有列表都具有相同数量的元素，并且所有列表都已排序。我想要做的是总结列表'power'和'usage'的所有元素，它们的索引对应于列表'time'中的相同值，以便每个时间单位只有一个功率和使用情况样本。

例如转换这个字典：

```
{'time': [1, 2, 2, 3, 4, 4, 5],
 'power': [2, 2, 3, 6, 3, 3, 2],
 'usage': [0, 1, 1, 2, 1, 4, 7]} 
```

对此：

```
{'time': [1, 2, 3, 4, 5],
 'power': [2, 5, 6, 6, 2],
 'usage': [0, 2, 2, 5, 7]} 
```

我已经编写了这段有效的代码，但我不太喜欢它：

```
d = {'time':[1,2,2,3,4,4,5], 'power':[0,1,1,2,1,4,7], 'usage':[2,2,3,6,3,3,2]}
prev = -1
new_d = {'time':[], 'power': [], 'usage':[]}
indexes =  range( len(d['time']) )

for i in indexes:
  if d['time'][i]!=prev:
    new_d['time'].append(d['time'][i])
    new_d['power'].append(d['power'][i])
    new_d['usage'].append(d['usage'][i])
  else:
    last_power = len( new_d['power'] ) - 1
    last_usage = len( new_d['usage'] ) - 1
    new_d['power'][last_power]+=d['power'][i]
    new_d['usage'][last_usage]+=d['usage'][i]
  prev=d['time'][i]

print d
print new_d 
```

有没有一种pythonian方法可以更简单、更全面地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:03:38.583

一个强大的解决方案，可以处理任意数量的额外字段 - 按“时间”字段排序（作为一种方法）：

```
def aggregate(old_d, sort_key='time'):
    new_d = dict((k, []) for k in old_d)
    prev = None
    curr = None
    for i in range(len(old_d[sort_key])):
        curr = old_d[sort_key][i]
        for key, lst in new_d.iteritems(): # .items() in Python 3+
            if prev == curr:
                if key != sort_key:           
                    lst[-1] += old_d[key][i]
            else:
                lst.append(old_d[key][i])
        prev = curr
    return new_d 
```

使用你的字典：

```
d = {'time': [1, 2, 2, 3, 4, 4, 5],
     'power': [2, 2, 3, 6, 3, 3, 2],
     'usage': [0, 1, 1, 2, 1, 4, 7]}

print aggregate(d)
>>>
{'usage': [0, 2, 2, 5, 7], 'power': [2, 5, 6, 6, 2], 'time': [1, 2, 3, 4, 5]} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T14:50:41.007

这是一个可以处理任意字典的......（`d`你的字典在哪里......）

```
from itertools import groupby, imap
from operator import itemgetter

def group_dict_by(mapping, field, agg=sum):
    grouper = mapping[field]
    new_grouper = []
    accum = {k: [] for k in mapping.viewkeys() - [field]}
    for key, grp in groupby(enumerate(grouper), itemgetter(1)):
        new_grouper.append(key)
        idx = [g[0] for g in grp]   
        for dk, dv in accum.iteritems():
            dv.append(agg(imap(mapping[dk].__getitem__, idx)))

    accum[field] = new_grouper
    return accum

print group_dict_by(d, 'time')
# {'usage': [0, 2, 2, 5, 7], 'power': [2, 5, 6, 6, 2], 'time': [1, 2, 3, 4, 5]} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T13:14:09.627

使用`itertools.groupby`,`zip`和一些列表推导：

```
In [55]: dic={'time': [1, 2, 2, 3, 4, 4, 5],
   ....:  'power': [2, 2, 3, 6, 3, 3, 2],
   ....:  'usage': [0, 1, 1, 2, 1, 4, 7]}

In [56]: from itertools import groupby

In [57]: from operator import itemgetter

In [58]: zip1=zip(dic['time'],dic['power']) #use `itertools.izip` for performance    

In [59]: [sum(x[1] for x in v) for k,v in groupby(zip1,key=itemgetter(0))]
Out[59]: [2, 5, 6, 6, 2]

In [60]: zip2=zip(dic['time'],dic['usage'])

In [61]: [sum(x[1] for x in v) for k,v in groupby(zip2,key=itemgetter(0))]
Out[61]: [0, 2, 2, 5, 7]

In [64]: timee=[k for k,v in groupby(dic['time'])]

In [65]: timee
Out[65]: [1, 2, 3, 4, 5] 
```

`zip1`是`[(1, 2), (2, 2), (2, 3), (3, 6), (4, 3), (4, 3), (5, 2)]`，现在您可以使用基于第一项的元素对元素进行分组`itertools.groupby`，然后取返回组中每个元组的第二个元素的总和。

```
In [75]: new_time=[k for k,v in groupby(dic['time'])]

In [76]: new_power=[sum(x[1] for x in v) for k,v in groupby(zip1,key=itemgetter(0))]

In [77]: new_usage=[sum(x[1] for x in v) for k,v in groupby(zip2,key=itemgetter(0))]

In [80]: dict(zip(('time','power','usage'),(new_time,new_power,new_usage)))
Out[80]: {'power': [2, 5, 6, 6, 2], 'time': [1, 2, 3, 4, 5], 'usage': [0, 2, 2, 5, 7]} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T13:15:43.923

我首先将值分组在一个新的字典中，然后求和。占用更多空间，但它既简单又快速：

```
from collections import defaultdict
from itertools import groupby

power = defaultdict(list)
usage = defaultdict(list)

for i, time in enumerate(data['time']):
    power[time].append(data['power'][i])
    usage[time].append(data['usage'][i])

times = [key for key,group in groupby(data['time'])]

print {    'time': times,
           'power' : [sum(power[time]) for time in times],
           'usage' : [sum(usage[time]) for time in times]
       } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T13:13:44.343

您可以对任意数量的额外字段使用以下方法：

```
from itertools import groupby
from operator import itemgetter

dic = {'time': [1, 2, 2, 3, 4, 4, 5],
 'power': [2, 2, 3, 6, 3, 3, 2],
 'usage': [0, 1, 1, 2, 1, 4, 7]}

aggrigated = {}
fields = dic.items()

for field in fields:
    aggrigated[field[0]] = [sum(y[1] for y in x)
                                for k,x in groupby(
                                    zip(fields[0][1], field[1]), 
                                    key=itemgetter(0))
                           ] 
```

从 Ashwini Chaudhary 的答案中借用的改进版本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-10T13:50:24.380

```
>>> from itertools import groupby
>>> from operator import itemgetter
>>> d = {'usage': [0, 1, 1, 2, 1, 4, 7], 'power': [2, 2, 3, 6, 3, 3, 2], 'time': [1, 2, 2, 3, 4, 4, 5]}
>>> groups = groupby(zip(d['time'], d['power'], d['usage']), key=itemgetter(0))
>>> lists = zip(*[[k] + map(sum, zip(*g)[1:]) for k, g in groups])
>>> dict(zip(('time', 'power', 'usage'), lists))
{'usage': (0, 2, 2, 5, 7), 'power': (2, 5, 6, 6, 2), 'time': (1, 2, 3, 4, 5)} 
```

对于可变数量的键，我添加了`keys`变量以避免重写它们：

```
>>> from itertools import groupby
>>> from operator import itemgetter
>>> keys = ('time', 'power', 'usage')
>>> groups = groupby(zip(*[d[k] for k in keys]), key=itemgetter(0))
>>> lists = zip(*[[k] + map(sum, zip(*g)[1:]) for k, g in groups])
>>> dict(zip(keys, lists))
{'usage': (0, 2, 2, 5, 7), 'power': (2, 5, 6, 6, 2), 'time': (1, 2, 3, 4, 5)} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-10T13:56:16.763

```
from itertools import izip

def m_(time, power, usage):

    time_, power_, usage_ = [], [], []

    for t, p, u in izip(time, power, usage):

        if not time_:
            time_.append( t )
            power_.append( 0 )
            usage_.append( 0 )

        if time_[-1] == t:
            power_[-1] += p
            usage_[-1] += u
        else:
            time_.append( t )
            power_.append( p )
            usage_.append( u )

    time[:], power[:], usage[:] = time_, power_, usage_

if __name__ == '__main__':
    d = {'time':[1,2,2,3,4,4,5], 'power':[0,1,1,2,1,4,7], 'usage':[2,2,3,6,3,3,2]}
    m_(**d)
    print d 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-10T13:09:23.297

这是“pythonian方式”:)：

```
d = {'time': [1, 2, 2, 3, 4, 4, 5],
 'power': [2, 2, 3, 6, 3, 3, 2],
 'usage': [0, 1, 1, 2, 1, 4, 7]}

new_d = {'time' : [], 'power' : [], 'usage' : []}

for time in set(d['time']):
    new_d['time'].append(time)
    new_d['power'].append(sum(value for index, value in enumerate(d['power']) if d['time'][index] == time)) 
    new_d['usage'].append(sum(value for index, value in enumerate(d['usage']) if d['time'][index] == time))

print new_d 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-10T23:02:52.553

以下是我的问题的精确解决方案。我是根据 jamylak 的答案做出的，我认为这是所有给定的最“pythonian”和最全面的解决方案。我所做的是调整他的代码以便处理多个字段，即字典中的多个列表。我已经接受了 jamylak 的答案，这里是**多个领域的解决方案：**

```
from itertools import groupby              
from operator import itemgetter

d = {'power': [2, 2, 3, 6, 3, 3, 2],
     'usage': [0, 1, 1, 2, 1, 4, 7],
     'time': [1, 2, 2, 3, 4, 4, 5]}

# construct a list with all the key names (starting from 'time')
keys = ['time'] + [key for key in d.keys() if key!='time']
# construct a list with all the keys' lists (starting from the one of 'time')
keys_lists = [ d['time'] ] + [d[key] for key in d.keys() if key!='time']
groups = groupby(zip(*keys_lists), key=itemgetter(0))
lists = zip(*[[k] + map(sum, zip(*g)[1:]) for k, g in groups])
new_d = dict(zip((keys), lists))
print new_d 
```

# qt - 使用 XMLRPC 在 QT 中将文件编码为 base64 字符串

> ID：15926359
> 
> 赞同：0
> 
> 时间：2013-04-10T12:51:17.213
> 
> 标签：qt, base64, xml-rpc

我正在尝试通过 xmlrpc 将文件作为 base64 编码字符串发送。

```
QFile sourceFile("/home/alexander/test.jpg");              

QByteArray srcRawData = sourceFile.readAll();               
QByteArray base64Encoded = srcRawData.toBase64();                        
std::string strTest(base64Encoded);

xmlrpc_c::paramList sampleAddParms;                        
sampleAddParms.add(xmlrpc_c::value_string("113957571"));   
sampleAddParms.add(xmlrpc_c::value_string(strTest));        
sampleAddParms.add(xmlrpc_c::value_string("test.jpg")); 
```

当我将此发送到我的服务器时，我得到：客户端抛出错误：RPC 响应指示失败。错误的参数类型（ap_adddocument）：参数数据的预期 base64，得到（Python）。

这是类定义 o xmlrpc_c::value_* [http://xmlrpcpp.sourceforge.net/doc/classXmlRpc_1_1XmlRpcValue.html](http://xmlrpcpp.sourceforge.net/doc/classXmlRpc_1_1XmlRpcValue.html)

我刚刚意识到我需要改用 xmlrpc_c::value_bytestring() 。如何在 C++ 中将文件转换为字节串？我已经有一个 ByteArray 了。

我在这里不知所措..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:26:02.387

查看您的代码，您似乎可以使用`xmlrpc_c::value_string()`

将您的`base64`字符串转换为 a`const char*`并尝试。以下代码应该可以工作。但是您的问题仍然没有足够的细节。

```
QFile sourceFile("/home/alexander/test.jpg");              
QByteArray base64Encoded  = sourceFile.readAll().toBase64();                                      
const char* b64Enc = QString::fromLatin1(base64Encoded).toStdString().c_str();

xmlrpc_c::paramList sampleAddParms;                        
sampleAddParms.add(xmlrpc_c::value_string("113957571"));   
sampleAddParms.add(xmlrpc_c::value_string(b64Enc));        
sampleAddParms.add(xmlrpc_c::value_string("test.jpg")); 
```

# javascript - 在网页中显示长文本区域注释

> ID：15926360
> 
> 赞同：0
> 
> 时间：2013-04-10T12:51:21.627
> 
> 标签：javascript, jquery, javascript-events

我有一个长文本区域注释作为用户输入。为了将它正确地包装在我的 JSP 中，我使用了下面的代码。`commentarea`是我的文本区域：

```
function addNewlines(commentarea) {

  var result = '';
  while ($.trim(commentarea).length > 0) {
    result += $.trim(commentarea).replace(/[\s\n\r]+/g, ' ').substring(0, 40) + '\n'; commentarea= $.trim(commentarea).replace(/[\s\n\r]+/g, ' ').substring(40);
  }
  return result;
} 
```

文本正在换行，但问题是我在 40 个字符长度的单词之间出现了空格。例如，在我的输出中，我在 `prog rammable`和之间有一个空格`sim ple`

```
hello world today this is a simple prog rammable hello world today this is a sim ple prog rammable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:55:45.573

orelse你最好使用'word-wrap'而不是那个......参考 [**这个**](http://www.idocs.com/tags/forms/_TEXTAREA_WRAP.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:03:42.443

您不需要任何循环来用一个空格替换所有空格和换行符。

```
commentarea.value = commentarea.value.replace(/\s+/g, ' ').substring(0, 40); 
```

# asp.net-mvc - 当我使用 Web API 从匿名类返回数据时，我使用什么作为返回类型？

> ID：15926361
> 
> 赞同：2
> 
> 时间：2013-04-10T12:51:24.647
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-web-api

我有以下 ASP MVC4 代码：

```
 [HttpGet]
    public virtual ActionResult GetTestAccounts(int applicationId)
    {
        var testAccounts =
            (
                from testAccount in this._testAccountService.GetTestAccounts(3)
                select new
                {
                    Id = testAccount.TestAccountId,
                    Name = testAccount.Name
                }
            ).ToList();

        return Json(testAccounts, JsonRequestBehavior.AllowGet);
    } 
```

现在我将其转换为使用 Web API。为此，如果我在这里返回一个匿名类，有人可以告诉我我的返回类型应该是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T12:54:15.580

它应该是一个`HttpResponseMessage`

```
public class TestAccountsController: ApiController
{
    public HttpResponseMessage Get(int applicationId)
    {
        var testAccounts =
            (
                from testAccount in this._testAccountService.GetTestAccounts(3)
                select new 
                {
                    Id = testAccount.TestAccountId,
                    Name = testAccount.Name
                }
            ).ToList();

        return Request.CreateResponse(HttpStatusCode.OK, testAccounts);
    }
} 
```

但是好的做法要求您应该使用视图模型（顺便说一下，您也应该在 ASP.NET MVC 应用程序中这样做）：

```
public class TestAccountViewModel
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

接着：

```
public class TestAccountsController: ApiController
{
    public List<TestAccountViewModel> Get(int applicationId)
    {
        return
            (
                from testAccount in this._testAccountService.GetTestAccounts(3)
                select new TestAccountViewModel 
                {
                    Id = testAccount.TestAccountId,
                    Name = testAccount.Name
                }
            ).ToList();
    }
} 
```

# pointers - C++/CLI 如何翻译这段代码？

> ID：15926365
> 
> 赞同：1
> 
> 时间：2013-04-10T12:51:40.430
> 
> 标签：pointers, c++-cli, iplimage

我不太了解 C++，但我必须使用 .NET 编写一些 C++ 代码。我尝试使用 DLLImport，但失败了。所以我尝试使用 C++/CLI 来制作一种包装器。

但我不确定是否了解所有内容...

这是带有我要导出的函数的基本 C++ H 文件（MyFunction）

```
 extern "C"
 {
  __declspec(dllexport) IplImage* MyFunction(IplImage *src, std::string* name, OneEnumerationType myEnum, bool myBool, float myFloat);
 } 
```

这是 Wrapper h 代码。

```
#include "MyFunction.h"; // the file containing the h code
#include <string>

namespace MyWrapper{
 public ref class MyWrapperClass {
     public: 
       MyWrapper(){};
       IplImage^ GetMyFunction(IplImage *src, std::string^ name, OneEnumerationType myEnum, bool myBool, float myFloat);
} 
```

这是包装器 cpp 代码。

```
#include "MyWrapperCode.h";

namespace MyWrapper{
IplImage^ MyWrapperClass::GetMyFunction(IplImage* src, std:string^ name, OneEnumerationType myEnum, bool myBool, float myFloat){
  MyFunction(src, name, myEnum, myBool, myFloat);
 }
} 
```

这些是我的问题：

1）当我编译时，错误是“'^：不能在类型 IplImage' 上使用这种间接，对于类型“std::string”的相同消息。我遵循了这个逻辑：

```
ClasseNative clNat2 = *clNat;  --> ClasseManagee clMan2 = *clMan;
ClasseNative &clNat3 = clNat2; -->  ClasseManagee %clMan3 = clMan2;
ClasseNative *clNat4 = &clNat2; --> ClasseManagee ^clMan4 = %clMan2; 
```

我已经看到，最好使用 System::String。我尝试这种方式，但初始函数正在使用 std::string ...顺便说一句，为什么更改更好？

2) 如何获得 MyFunction IplImage 结果？我想通过一个私人成员和一个 get 但我不知道如何初始化它......

3）棘手的问题。当我调用我的包装器时，我是否可以将 CLI 获取 IplImage 结构（来自 OpenCV 库）（我的函数的结果）放入 IplImage .NET 结构中？不知道这个问题是否可以理解...

非常感谢你的帮助。在这个问题上转了3天......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:03:23.313

1) 仅通过添加 ^ 就无法将本机对象更改为托管对象，您必须创建包装器或传输数据，例如：

```
std::string nativeString = "my string";
String^ managedString = gcnew String(nativeString.c_str());
//now you can return it as 
```

2) 创建一个托管包装器或使用原始数据类型来传输数据

3）注意确定这是否会有所帮助，但请查看[Emgu.CV](http://www.emgu.com/wiki/index.php/Download_And_Installation)

尝试阅读有关 C++\CLI 的更多信息，这里有一些不错的教程：

[Quick C++/CLI - 在不到 10 分钟的时间内学习 C++/CLI](http://www.codeproject.com/Articles/19354/Quick-C-CLI-Learn-C-CLI-in-less-than-10-minutes)

[面向 C# 程序员的 C++/CLI](http://www.c-sharpcorner.com/uploadfile/b942f9/cppcli-for-the-C-Sharp-programmer/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:44:52.243

您的包装类需要根据 System::String^ 参数的内容创建一个新的 std::string 然后传递给您的本机函数。否则，您需要重写函数以将其他内容作为字符串输入，例如 LPWSTR 或 LPCSTR。

您可以编写一个 ref 类以具有 IplImage 将具有的所有数据的属性，然后将其传递给您的包装类。然后，您的包装类根据 ref 类的数据创建一个 IplImage 对象并传递给本机函数。反转返回值的数据复制方向。

# android - 如何更新适配器？

> ID：15926372
> 
> 赞同：0
> 
> 时间：2013-04-10T12:51:55.010
> 
> 标签：android, adapter, android-arrayadapter

我在一个班上有几个旋转器。对于第一个微调器，我有一组数据。其他 spinner 将根据第一个 spinner 的选择从服务器下载数据。但是，下载数据后，它不会更新微调器适配器。

第二个微调器的适配器：

```
sectionField = new String[] {"Error"};
            adapterSection = new ArrayAdapter<String>(
                    this, android.R.layout.simple_spinner_item, sectionField);
            adapterSection
                    .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            section.setAdapter(adapterSection); 
```

来自 fisrts spinner 的代码示例`onItemSelected`，我认为应该更新适配器：

```
sectionField = new String[data.length()];
sectionField = data;
section.setVisibility(View.VISIBLE);
adapterSection.notifyDataSetChanged(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:58:36.097

您需要清洁适配器，然后添加项目并通知。

```
adapterSection.clear();
adapterSection.addAll(data);
adapterSection.notifyDataSetChanged(); 
```

希望有帮助。

# c# - 更改 ToolStripSeparator 控件的 BackColor

> ID：15926377
> 
> 赞同：5
> 
> 时间：2013-04-10T12:52:08.240
> 
> 标签：c#, toolstrip

是否可以更改 ToolStripSeparator 控件的背景颜色？设计器中有一个 BackColor 属性，但似乎没有使用 - 颜色始终为白色。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-27T21:38:06.563

我看到这个问题是 2 年前提出的，但我仍然无法在网上找到一个简单而清晰的解决方案。所以...

我今天刚遇到这个问题，发现解决它很简单。

有同样的情况：

![在此处输入图像描述](https://i.stack.imgur.com/aJiB0.png)

**解决方案：**

创建一个继承该类的`ToolStripSeparator`类并向 中添加一个方法`Paint` `EventHandler`来绘制分隔符：

```
public class ExtendedToolStripSeparator : ToolStripSeparator
{
    public ExtendedToolStripSeparator()
    {
        this.Paint += ExtendedToolStripSeparator_Paint;
    }

    private void ExtendedToolStripSeparator_Paint(object sender, PaintEventArgs e)
    {
        // Get the separator's width and height.
        ToolStripSeparator toolStripSeparator = (ToolStripSeparator)sender;
        int width = toolStripSeparator.Width;
        int height = toolStripSeparator.Height;

        // Choose the colors for drawing.
        // I've used Color.White as the foreColor.
        Color foreColor = Color.FromName(Utilities.Constants.ControlsRelatedConstants.standardForeColorName);
        // Color.Teal as the backColor.
        Color backColor = Color.FromName(Utilities.Constants.ControlsRelatedConstants.standardBackColorName);

        // Fill the background.
        e.Graphics.FillRectangle(new SolidBrush(backColor), 0, 0, width, height);

        // Draw the line.
        e.Graphics.DrawLine(new Pen(foreColor), 4, height / 2, width - 4, height / 2);
    }
} 
```

然后添加分隔符：

```
ToolStripSeparator toolStripSeparator = new ExtendedToolStripSeparator();

this.DropDownItems.Add(newGameToolStripMenuItem);
this.DropDownItems.Add(addPlayerToolStripMenuItem);
this.DropDownItems.Add(viewResultsToolStripMenuItem);
// Add the separator here.
this.DropDownItems.Add(toolStripSeparator);
this.DropDownItems.Add(exitToolStripMenuItem); 
```

**结果：**

![在此处输入图像描述](https://i.stack.imgur.com/PTwW2.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-07-16T03:19:29.003

我只是将分隔符的 Paint 事件指向这个自定义过程：

```
 private void mnuToolStripSeparator_Custom_Paint (Object sender, PaintEventArgs e)
    {
        ToolStripSeparator sep = (ToolStripSeparator)sender;

        e.Graphics.FillRectangle(new SolidBrush(CUSTOM_COLOR_BACKGROUND), 0, 0, sep.Width, sep.Height);

        e.Graphics.DrawLine(new Pen(CUSTOM_COLOR_FOREGROUND), 30, sep.Height / 2, sep.Width - 4, sep.Height / 2);

    } 
```

其中 CUSTOM_COLOR_FOREGROUND 是纯色/命名颜色，例如 Color.White。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T12:54:42.410

默认`toolstrip`渲染器忽略 BackColor 属性并使用硬编码颜色。

您可以参考以下链接以使用您自己的渲染器以您想要的方式绘制分隔符。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        toolStrip1.Renderer = new MyRenderer();
    }

    private class MyRenderer : ToolStripProfessionalRenderer
    {
        protected override void OnRenderSeparator(ToolStripSeparatorRenderEventArgs e)
        {
            if ((e.Item as ToolStripSeparator) == null)
            {
                base.OnRenderSeparator(e);
                return;
            }
            Rectangle bounds = new Rectangle(Point.Empty, e.Item.Size);
            bounds.Y += 3;
            bounds.Height = Math.Max(0, bounds.Height - 6);
            if (bounds.Height >= 4)
                bounds.Inflate(0, -2);
            int x = bounds.Width / 2;
            using(Pen pen = new Pen(Color.DarkBlue))
                e.Graphics.DrawLine(pen, x, bounds.Top, x, bounds.Bottom - 1);
            using (Pen pen = new Pen(Color.Blue))
                e.Graphics.DrawLine(pen, x + 1, bounds.Top + 1, x + 1, bounds.Bottom);
        }
    }
} 
```

资料来源：[http ://social.msdn.microsoft.com/forums/en-US/winforms/thread/6cceab5b-7e06-40cf-82da-56cdcc57eb5d](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/6cceab5b-7e06-40cf-82da-56cdcc57eb5d)

# android - postDelayed() 函数

> ID：15926380
> 
> 赞同：-6
> 
> 时间：2013-04-10T12:52:13.823
> 
> 标签：android

我是 Android 的初学者，我现在正在浏览一个应用程序。在那个应用程序中，我发现了一个代码行

```
handler.postDelayed(new Runnable() {
                        public void run() {
                            PlayVideo(url);
                        }
                    }, 100); 
```

这是什么意思？`PlayVideo()`函数将*每*100 毫秒或100 毫秒*后*调用一次？请帮助我完成它。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:08:39.050

> 这是什么意思？

`postDelayed()`导致提供`Runnable`的在指定的毫秒周期后运行一次。

> PlayVideo() 函数将每 100 毫秒调用一次，还是每 100 毫秒调用一次？

*100 毫秒*后。**

# java - 如何在 Play 中设置默认的 PostgreSQL 架构？

> ID：15926383
> 
> 赞同：2
> 
> 时间：2013-04-10T12:52:15.853
> 
> 标签：java, postgresql, playframework, playframework-2.1, ebean

我们在 Web 应用程序中使用 Play Framework 2.1。我们想`public`在作为应用程序数据库的 PostgreSQL 数据库中显式设置数据库模式（不是模式）。我该如何设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:09:53.193

据我所知，根据我之前的尝试。`schema`你应该为你想要的每个模型定义你的名字。它应该是这样的：

```
import play.db.ebean.Model;
import javax.persistence.Entity;
import javax.persistence.Table;

@Entity
@Table(schema = "schema2")
public class TableOnSchema2 extends Model {
  ...
} 
```

也许这个解决方案会做出额外的努力来用模式名称定义每个模型。因为，我不知道是否可以设置配置值来为应用程序指定默认数据库方案。但它对我有用！

希望这会对你有所帮助.. :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T16:27:30.930

如果您的表都位于公共架构之外，最好的办法是更改应用程序用户的 search_path：

```
alter user your_appuser set search_path = 'schema1'; 
```

如果您有多个架构，则可以添加所有架构：

```
alter user your_appuser set search_path = 'schema1,schema2,public'; 
```

不要忘记`commit`这个声明。该更改仅在用户下次登录后才会生效。现有连接不会受到影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-04T07:12:14.177

Playframework 2.8.x 使用 Scala 示例：

我们可以在中添加以下条目`application.conf`：

```
db {
  # You can declare as many datasources as you want.
  # By convention, the default datasource is named `default`

  default.driver = org.postgresql.Driver
  default.url = "jdbc:postgresql://localhost/postgres?currentSchema=backoffice"
  default.username = "user"
  default.password = "password"
} 
```

Play 框架将使用这些参数创建一个默认连接池。Postgres 驱动程序基本上能够使用`?currentSchema=backoffice`from`version 9.4`开始在连接 url 中定义默认模式。

一个 Dao 对象可以使用这个数据库，如下所示：

```
import com.google.inject.Inject
import play.api.db.{DBApi, Database, DefaultDBApi}

class PostgresDao @Inject()(backofficeDB : Database) {
  val backofficeDb = backofficeDB
  //some more methods

} 
```

# haskell - Haskell — Monad 绑定求值顺序

> ID：15926384
> 
> 赞同：3
> 
> 时间：2013-04-10T12:52:15.977
> 
> 标签：haskell, monads

我在弄清楚 /how/ 绑定运算符实际上将以下 State monad 绑定在一起时遇到了一些麻烦：

```
pop :: State [Int] Int
pop = do
        (x:xs) <- get
        put xs
        return x

push :: Int -> State [Int] ()
push x = do 
            xs <- get
            put (x:xs)

doStuff :: State [Int] ()
doStuff = do
            pop
            x <- pop
            push 5
            push x 
```

Take `doStuff`，它可以被脱糖为以下内容：

```
pop >>= (\_ -> pop >>= (\x -> push 5 >>= (\_ -> push x))) 
```

评估此行时，绑定实际发生的顺序是什么？因为，要实际绑定，Haskell 需要从运算符右侧的函数中获取 State monad `>>=`（即，需要首先对函数右侧操作数进行完全评估），所以我认为会发生以下情况：

1.  s1 =`push 5 >>= (\_ -> push x)`
2.  s2 =`pop >>= (\x -> s1)`
3.  s3 =`pop >>= (\_ -> s2)`

这是正确的思考方式吗？我觉得我很了解 monad，但我最大的问题是实际上可视化“幕后”发生的事情以及数据如何流动，可以这么说。这个`do`符号给人一种我正在处理一堆顺序操作的错觉，而事实上，有一大堆嵌套和闭包。

我觉得我在这里想多了，结果让自己更加困惑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T13:20:12.587

从...开始

```
pop >>= (\_ -> pop >>= (\x -> push 5 >>= (\_ -> push x))) 
```

可以内联一些函数（以更好地显示正在发生的事情）。我将从 开始`(>>=)`，假装它`State`没有被定义为转换器或新类型，以保持简单。

```
type State s a = s -> (a, s)
m >>= k = \ s -> let (a, s') = m s in k a s'

\ s -> let (a, s') = pop s in
(\ _ -> pop >>= (\ x -> push 5 >>= (\ _ -> push x))) a s'

\ s -> let (_, s') = pop s in
(pop >>= (\ x -> push 5 >>= (\ _ -> push x))) s'

\ s -> let (_, s') = pop s in
let (a, s'') = pop s' in
(\ x -> push 5 >>= (\ _ -> push x)) a s''

\ s -> let (_, s') = pop s in
let (a, s'') = pop s' in
(push 5 >>= (\ _ -> push a)) s''

\ s -> let (_, s') = pop s in
let (a, s'') = pop s' in
let (b, s''') = push 5 s'' in
(\ _ -> push a)) b s'''

\ s -> let (_, s') = pop s in
let (a, s'') = pop s' in
let (_, s''') = push 5 s'' in
push a s''' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T13:09:22.720

> 这是正确的思考方式吗？

不。

首先：虽然在 monad 中考虑“首先发生这种情况，然后发生这种情况，然后我们评估这个键盘输入......”显然是正确的`IO`，但并非所有 monad 都是如此。例如，在 list monad 中，这实际上没有任何意义。一般来说，根本不可能为 Haskell 中的计算分配特定的顺序，这不是定义的行为。

然而，在 monad 中考虑计算顺序总是*可能的*，而且通常很有帮助，而这个顺序实际上是`do`符号所暗示的顺序。因此，大多数情况下，考虑脱糖表达实际上并不具有洞察力。但如果你想迈出这一步，我会这样做：

1.  `pop >>= \_ -> THUNK1`

2.  THUNK1 ≡>`pop >>= \x -> THUNK2`

3.  { `Closure{x}`} THUNK2 ≡>`push 5 >>= \_ -> THUNK3`

4.  { `Closure{x}`} THUNK3 ≡>`push x`

`do`这当然更丑陋，但说起来与含糖的表达几乎相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T13:09:44.417

> 评估此行时，绑定实际发生的顺序是什么？

这里的“绑定”没有什么特别之处。脱糖表达式的评估方式与任何其他表达式完全相同（惰性），具体取决于`(>>=)`您正在使用的特定 monad 的实现。

如果我们正在谈论使用类似的东西`runState`，给定一个类似的表达式`foo >>= (\x -> bar)`，最外面的表达式是应用程序`(>>=)`但我们试图解开 a`newtype`然后在里面应用函数，所以`(>>=)`被强制，函数也是如此。

如果我们改为考虑列表 monad，`(>>=)`则为`concatMap`. 给定一个类似 的表达式`[foo1, foo2] >>= (\x -> [bar1, bar2, x] >>= (\y -> [baz, y]))`，`take 5`在结果上使用显然不会完全计算所有绑定。

* * *

也就是说，这里有一个重要规则：无论评估在何种程度上`x >>= f`强制评估`x`，在像脱糖块这样的大表达式`do`中，强制将以明显的“顺序”顺​​序发生，原因与“顺序错觉”的原因相同可能的。

# jquery - 指定图像上的区域

> ID：15926385
> 
> 赞同：0
> 
> 时间：2013-04-10T12:52:17.137
> 
> 标签：jquery, html

我尝试在图像上指定一个区域，用户可以单击并转到其他页面。我尝试使用hotspotter编辑器并编写下面的代码。但什么也没发生，我不明白我做错了什么。如果有人对此有另一种解决方案，那就太棒了。

```
<link rel="stylesheet" href="jquery-hotspotter-1.7.2.min.css">
    <script src="jquery-hotspotter-1.7.2.min.js"></script>

<div data-role="content" id="test">
            <div class="hs-area">
            <img src="imagens/HomeHorizontal.jpg"/>     
        <div class="hs-wrap"><a target="_blank" href="http://www.google.pt"><div data-activeon="click" data-dim="378,224,0" data-coord="646,0" class="shadow-spot"></div></a>
            <div
            class="tt-wrap">
                <div data-anim="goin" data-dir="top" class="tip-tooltip"></div>
        </div>
    </div>
    <div class="hs-wrap">
        <div data-activeon="click" data-dim="378,222,0" data-coord="646,223" class="shadow-spot"></div>
        <div class="tt-wrap">
            <div data-dir="top" data-anim="goin" class="tip-tooltip"></div>
        </div>
    </div>
    <div class="hs-wrap">
        <div data-activeon="click" data-dim="378,229,0" data-coord="646,445" class="shadow-spot"></div>
        <div class="tt-wrap">
            <div data-dir="top" data-anim="goin" class="tip-tooltip"></div>
        </div>
    </div>
    </div>
       </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:12:47.760

如何在具有相对位置的 div 的背景中加载图像，然后将链接元素添加为具有绝对定位的块？这不应该完全适合你正在做的事情吗？

**HTML**

```
<div id="example-image">
    <a href="#example-link" class="hotspot" style="top:40px;left:80px;width:50px;height:50px;">&nbsp;</a>
    <a href="#example-link2" class="hotspot" style="bottom:80px;right:100px;width:20px;height:40px;">&nbsp;</a>
</div> 
```

**CSS**

```
#example-image { 
   position:relative;
   width: 500px;
   height: 200px;
   background:transparent url('example.jpg') top left no-repeat;
}

#example-image .hotspot {
   position:absolute;
   display:block;
} 
```

# azure - 创建 Azure 自签名证书

> ID：15926387
> 
> 赞同：0
> 
> 时间：2013-04-10T12:52:21.027
> 
> 标签：azure, certificate, self-signed

我们有一个需要与 windows azure 服务和 sql azure 服务通信的本地网站。

我需要创建一个自签名证书，但 web 服务上没有 makecer.exe。有人可以确认我是否**必须**在特定的本地 Web 服务器上创建自签名，或者我可以在**任何机器上创建并安装在 Web 服务器上**？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:05:53.193

**您可以在任何**机器上创建自签名证书并将其安装在**任何其他**.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-29T15:44:00.717

您可以使用这个免费的自签名证书生成器 ( [http://www.itiverba.com/en/software/itisscg.php](http://www.itiverba.com/en/software/itisscg.php) ) 创建自签名证书。

如果您在服务器以外的其他计算机上创建证书，只需将证书导出到**包含私钥**的 PFX 文件中，然后在您的服务器上复制 PFX 并安装证书及其私钥。

如果您使用 Linux 服务器，该工具允许您在 PEM 文件中导出证书。

# r - 初学者在 csv 文件中重新排列数据

> ID：15926396
> 
> 赞同：0
> 
> 时间：2013-04-10T12:52:36.620
> 
> 标签：r, csv

这真的很基本，但我被过于复杂的代码所困。我有一个 CSV 文件，其中包含一列测试、一列分数和一列学生。我想重新格式化数据，以便我有学生分数行和测试列。

我创建了一个单独的 csv，其中包含名为“students.csv”的学生（作为数字代码），因为现在这更容易。

我有 52 名学生和 50 次测试。

我可以得到以下与一个学生一起工作：

```
matricNumbers <- read.csv("students.csv")
students <- as.vector(as.matrix(matricNumbers))
students
data <- read.csv("marks.csv")
studentSubset <- data[data[2] == 1150761,] 
marksSubset <- as.vector(as.matrix(studentSubset[5]))
ll <- list()
ll<-c(list(marksSubset), ll)
dd<-data.frame(matrix(nrow=50,ncol=50))
for(i in 1:length(ll)){
  dd[i,] <- ll[[i]]

}
dd 
```

但我似乎无法让这个`for`循环通过每个学生。

```
getMarks <-function(studentNumFile,markFile){

matricNumbers <- read.csv(studentNumFile)
students <- as.vector(as.matrix(matricNumbers))

data <- read.csv(markFile)

for (i in seq_along(students)){
    studentSubset <- data[data[2] == i,] 
    marksSubset <- as.vector(as.matrix(studentSubset[5]))
    ll <- list()
    ll<-c(list(marksSubset), ll)
    dd<-data.frame(matrix(nrow=52,ncol=50))
    for(i in 1:length(ll)){
        dd[i,] <- ll[[i]]
    }
}
return(dd)
}

getMarks("students.csv","marks.csv") 
```

我收到错误消息：

```
Error in `[<-.data.frame`(`*tmp*`, i, , value = logical(0)) : replacement has 0 items, need 50 
```

我确信这是由于嵌套`for`循环，但我无法弄清楚如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:13:45.887

如果我正确理解了问题，您可以使用该`reshape`软件包来实现您想要的。由于您不提供样本数据，因此很难测试。`dput( head( matricNumbers ) )`为此， 我建议您将 的输出粘贴到上面的代码块中。

但是，您应该能够按照我对一些虚拟数据使用的这个简单示例进行操作。我想你可能只需要一行，你就可以忘记所有复杂的循环内容！

```
# These lines make some dummy data, similar to you matricNumbers (hopefully)
test = sort(sample(c("Biology","Maths","Chemistry") , 10 , repl = TRUE ))
students = unlist( sapply(table(test), function(x) { sample( letters[1:x] , x ) } ) )
names(students) <- NULL
scores <- data.frame( test , mark = sample( 40:100 , 10 , repl = TRUE ) , students )
scores
        test mark students
1    Biology   50        c
2    Biology   93        a
3    Biology   83        b
4    Biology   83        d
5  Chemistry   71        b
6  Chemistry   54        c
7  Chemistry   54        a
8      Maths   97        c
9      Maths   93        b
10     Maths   72        a

# Then use reshape to cast your data into the format you require
# I use 'mean' as the aggregation function. If you have one score for each student/test, then mean will just return the score
# If you do not have a score for a particular student in that test then it will return NaN
require( reshape )
bystudent <- cast( scores , students ~ test , value = "mark" , mean )
bystudent
  students Biology Chemistry Maths
1        a      93        54    72
2        b      83        71    93
3        c      50        54    97
4        d      83       NaN   NaN 
```

# unit-testing - 使用 Rhino mock 模拟数据库对象

> ID：15926397
> 
> 赞同：0
> 
> 时间：2013-04-10T12:52:38.083
> 
> 标签：unit-testing, c#-4.0, testing, rhino-mocks, rhino

如果这个问题已经被问过，我很抱歉。我对单元测试非常陌生，我想使用 Rhino 进行模拟。

所以问题是......我有一个测试方法，该方法假设根据输入参数检索一些数据并作为数据表返回。

它还进行一些计算以找出应该调用哪个存储过程以及使用哪组参数。

我的问题是，当我使用模拟对象调用该方法时......它会在日期从数据库检索代码行抛出一个错误，因为对象未设置为实例。这是意料之中的，因为我们正在模拟它们，因为它们没有从数据库中重新返回数据。

那么在这种情况下可以做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T11:56:20.203

似乎现在是引入[Repository Pattern](http://msdn.microsoft.com/en-us/library/ff649690.aspx)的好时机。

如果引入than，则生成对DB的查询的逻辑和从DB读取数据的逻辑将被封装在Repository中。

在这种情况下，您可以在测试中模拟/存根存储库，并且可以对所有使用存储库的类进行单元测试，而根本不需要创建测试数据库。

Repository mock 将验证传入参数是否正确。
存储库存根将返回每个特定测试所需的任何特定于测试的数据。

# java - 在同步块内执行新线程

> ID：15926400
> 
> 赞同：14
> 
> 时间：2013-04-10T12:52:45.920
> 
> 标签：java, synchronized

如果我在同步块中创建一个新线程，该块是否会保持锁定直到线程执行也完成？如果没有，那么它会一直锁定到什么时候？

```
String sLine;
onClick(String line){
    synchronized (lock) {
        sLine = line;
        new Thread(new Runnable() {
            @Override
            public void run() {
                 doProcessing(Sline);    
        }).start(); 
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-10T12:54:40.850

只有当代码 d 与新创建的线程一起时，它才会保持锁定状态[`join()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#join())，从而等待它完成。由于没有`join()`在调用`start()`完成后释放锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:54:26.847

没有线程有单独的生命。在上述情况下，同步块只会被阻塞到线程的起点。

# delphi - 插入部分现有数据

> ID：15926406
> 
> 赞同：1
> 
> 时间：2013-04-10T12:53:08.573
> 
> 标签：delphi, delphi-xe2, delphi-2010, delphi-xe

我需要在按钮单击时将额外数据添加到底部显示的 TEMP 表中。我需要复制和插入表中所有现有的 FROM - TO - DAYS。RATE_PRICE 将是预先确定的，并且对于所有新插入（插入时）都是相同的。并且还插入了。 ![在此处输入图像描述](https://i.stack.imgur.com/r7Xcr.png)

示例：我要加一张加床，费用为 15 欧元。现在我想，当我选中一个复选框（并单击一个按钮）以在 TEMP 表中插入该值（15）时，它必须遵循网格中显示的日期值。我想在名为 EXTRA 的 TEMP 表中添加额外的字段，除非选中复选框，否则它将不可见。因此，当我检查添加加床的选项时，加床将按照显示的价格。房价价格将是 15 然后...日期。

如何插入所需的数据？

更新

我在按钮单击时做到了：

```
procedure TForm1.SpeedButton1Click(Sender: TObject);
begin
with ABSQuery4 do begin
ABSQuery4.Close;
ABSQuery4.SQL.Clear;
ABSQuery4.SQL.Text := 'INSERT INTO TEMP (extra,Date_From,Date_To,Rate_price,Days,Total) VALUES (:a1,:a2,:a3,:a4,:a5,:a6)';
ABSquery4.Params.ParamByName('a1').asString :='TT';
ABSquery4.Params.ParamByName('a2').value := cxDateEdit1.date;
ABSquery4.Params.ParamByName('a3').value := cxDateEdit2.date;
ABSquery4.Params.ParamByName('a4').value :='1';
ABSquery4.Params.ParamByName('a5').value :=Daysbetween(cxDateEdit1.Date,cxDateEdit2.Date);
ABSquery4.Params.ParamByName('a6').value := (ABSquery4.Params.ParamByName('a4').value)*(ABSquery4.Params.ParamByName('a5').value);
 ABSquery4.ExecSQL ;
 ABSquery2.Refresh;
end;
end; 
```

还有更优雅的方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:38:27.737

您应该新读者指出您所指的上一个问题（代码）。没有这些信息，他们无法理解您的问题。[跨越多个日期的酒店价格问题](https://stackoverflow.com/q/15883240/1322642)

现在回答你的问题。

忘记你的`with absquery4 do begin`，有一个更简单的方法。
只需将 2 行新代码添加到现有代码中。

*   将您的价目表扩展到您需要的所有附加功能。
*   例如`DBLMSExtraBed`：“价格`:`15,00”。
*   添加一个新的按钮标题：='Add Extras`。
*   clickEvent 指向您的 CalculationButtonClick。
*   从触发事件的按钮在 CalculationButtonClick 中进行测试。
*   用 填写 ROOM_TYPE TEditfield `DBLMSExtraBed`。
*   添加以下 WITH .. IF .. THEN

...

```
with sender As TButton do if name='DoCalc'  then begin 
```

以上

```
ABSQuery2.Close;
ABSQuery2.SQL.Text:='DELETE from TEMP';
ABSQuery2.ExecSQL;
ABSQuery2.SQL.Text:='SELECT * from TEMP ORDER BY ID ';
ABSQuery2.Open; 
```

和结束；

```
end; 
```

如果事件是从`AddExtrasButton`. 它不会清除您的临时表。
所以表仍然是打开的，新的数据将被插入。
现在你有 3 行，最后是：

![在此处输入图像描述](https://i.stack.imgur.com/Q37FA.jpg)

只要`AddExtrasButton`价格表中有额外内容，您就可以添加任意数量的额外内容。

使用表：

```
CREATE DATABASE IF NOT EXISTS pricelist;
USE pricelist;

DROP TABLE IF EXISTS `room_rates`;
CREATE TABLE `room_rates` (
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `CENIK_ID` int(10) unsigned NOT NULL,
  `ROOM_TYPE` varchar(45) NOT NULL,
  `RATE_START_DATE` datetime NOT NULL,
  `RATE_END_DATE` datetime NOT NULL,
  `RATE_PRICE` decimal(5,2) NOT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;

/*!40000 ALTER TABLE `room_rates` DISABLE KEYS */;
INSERT INTO `room_rates` (`ID`,`CENIK_ID`,`ROOM_TYPE`,`RATE_START_DATE`,`RATE_END_DATE`,`RATE_PRICE`) VALUES 
 (1,1,'DBLMS','2013-01-02 00:00:00','2013-04-26 00:00:00','128.00'),
 (2,1,'DBLMS','2013-10-22 00:00:00','2013-12-18 00:00:00','128.00'),
 (3,1,'DBLMS','2013-04-26 00:00:00','2013-06-22 00:00:00','146.00'),
 (4,1,'DBLMS','2013-09-21 00:00:00','2013-10-20 00:00:00','146.00'),
 (5,1,'DBLMSExtraBed','2013-01-02 00:00:00','2013-06-22 00:00:00','15.00'); 
```

**更新**：

只有一个提示：

在您的临时表中创建一个 Field `EXTRAS`。

```
procedure TForm1.AdvGlowButton1Click(Sender: TObject);
var
 isExtra : Boolean;
[...]

with sender As TButton do if name='AdvGlowButton1' then 
     isExtra := False else 
     isExtra := True;

if NOT isExtra then begin
  ABSQuery2.Close;
  ABSQuery2.SQL.Text:='DELETE from TEMP';
  ABSQuery2.ExecSQL;
  ABSQuery2.SQL.Text:='SELECT * from TEMP ORDER BY ID ';
  ABSQuery2.Open;
end;

[...]

if isExtra then 
   ABSQuery2.FieldByName('EXTRAS').AsString:=mem_ROOM_TYPE 
   else
   ABSQuery2.FieldByName('ROOM_TYPE').AsString:=mem_ROOM_TYPE; 
```

# sql - Postgresql WINDOW 分区定义的限制？

> ID：15926413
> 
> 赞同：1
> 
> 时间：2013-04-10T12:53:17.810
> 
> 标签：sql, postgresql

假设您有两个表：

订单

```
order_id , ....
1, ...
2, ... 
```

每个订单都有一个“状态历史”。这存储在历史表中：

```
serial, date, order_id , order_state
10,     2012-01-01, 1,  'INIT'
11,     2012-01-02, 2,  'INIT'
12,     2012-02-03, 1,  'COMPLETED'
13,     2012-02-04, 1,  'DISPATCHED'
14,     2012-02-05, 2,  'COMPLETED'
15,     2012-02-06, 2,  'DISPATCHED' 
```

现在我想知道过去任何时候我所有订单的状态。例如，我想知道 2012-02-05 的订单状态：

```
order_id, order_state, state_date
1 ,      'DISPATCHED' , 2012-02-04
2,       'COMPLETED'  , 2012-02-05 
```

（state_date 列是可选的）。

有没有一种方法可以编写一个查询，该查询比遍历订单并在应用程序代码中获取其“在给定日期的状态”*更有效？*

我已经用 Postgresql 中的 rank() WINDOW 函数做到了这一点，但我对它必须获取所有历史记录（在给定日期之前）只是为了选择排名 1 的事实并不满意。在我看来这并不比在应用程序代码中做的更好。

```
SELECT *  FROM ( SELECT o.order_id,
                       h.order_state,
                       h.state_date,
                       rank() ON (PARTITION BY order_id ORDER BY h.serial DESC)
                              AS hrank
                FROM order o, history h
                WHERE
                     h.order_id = o.order_id AND
                     h.date < given_date
               ) AS rh
WHERE
   rh.hrank = 1; 
```

我真正想要的是我的分区定义中的某种 LIMIT 1，但我不知道这是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:04:11.120

[SQL小提琴](http://www.sqlfiddle.com/#!12/eece0/1)

```
select distinct on (o.order_id) o.order_id, h.order_state, h.date
from
    orders o
    inner join
    history h on h.order_id = o.order_id
where
    h.date <= '2012-02-05'
order by o.order_id, h.date desc 
```

`distinct on`将根据声明的顺序返回第一个。在这种情况下是最近的日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:08:53.453

这可能会更快：

```
SELECT o.order_id, 
       h.order_state,
       h.state_date,
FROM "order" o 
  JOIN history h ON h.order_id = o.order_id
WHERE h.order_date = (select max(h2.order_date)
                      from history h2
                      where h2.order_id = h.order_id 
                      and h2.order_date <= date '2012-02-05'); 
```

（请注意，订单和历史之间的连接在这里并不是真正必要的，但我假设您的示例查询只是您真正想要的一个子集）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:09:06.340

NOT EXISTS() 救援：

```
SELECT o.order_id
  -- h.zserial -- you might want to see this as well
  , h.order_state
  , h.state_date
FROM zorder o
JOIN history h ON h.order_id = o.order_id
    -- You probably don't need this date comparison,
    -- ,since it is already in the subquery
WHERE h.zdate < given_date
AND NOT EXISTS (
    SELECT * FROM history nx
    WHERE nx.order_id = o.order_id
    AND nx.zdate < given_date
    AND nx.zserial > h.zserial
    ); 
```

注意：我将列名更改为不与关键字冲突的名称。

# spring - 有人能解释一下控制器类是如何工作的吗

> ID：15926414
> 
> 赞同：0
> 
> 时间：2013-04-10T12:53:28.743
> 
> 标签：spring, spring-mvc

我正在研究弹簧样本。我有一个名为 UserController2 的控制器类，如下所示

```
@Controller
public class UserController2 extends MultiActionController {

   private UserDAO userDAO;

   public void setUserDAO(UserDAO userDAO) {
    this.userDAO = userDAO;
   }
    @RequestMapping(params = "add", method = RequestMethod.POST)
   public ModelAndView add(HttpServletRequest request,
        HttpServletResponse response, User user) throws Exception {
       userDAO.saveUser(user);
       return new ModelAndView("redirect:User.htm");
  }

  public ModelAndView list(HttpServletRequest request,
        HttpServletResponse response) throws Exception {
      ModelMap modelMap = new ModelMap();
      modelMap.addAttribute("userList", userDAO.listUser());
      modelMap.addAttribute("User", new User());
      return new ModelAndView("userForm", modelMap);
}
} 
```

我有一个名为 userForm.jsp 的 jsp 页面

```
<form:form method="POST" action="add.htm" commandName="User" modelAttribute="User">
   <table>
    <tr>
        <td><form:label path="name">Name</form:label></td>
        <td><form:input path="name" /></td>
    </tr>

    <tr>
        <td><form:label path="id">id</form:label></td>
        <td><form:input path="id" /></td>
    </tr>

    <tr>
        <td><form:label path="password">Name</form:label></td>
        <td><form:input path="password" /></td>
    </tr>

    <tr>
        <td><form:label path="gender">Name</form:label></td>
        <td><form:input path="gender" /></td>
    </tr>

    <tr>
        <td><form:label path="gender">Name</form:label></td>
        <td><form:input path="gender" /></td>
    </tr>

    <tr>
        <td><form:label path="country">Name</form:label></td>
        <td><form:input path="country" /></td>
    </tr>

    <tr>
        <td colspan="2">
          <input type="submit" value="Submit"/>
        </td>
    </tr>
  </table>  
 </form:form> 
```

以下代码实际上返回了什么

```
 return new ModelAndView("userForm", modelMap); 
```

和

```
 return new ModelAndView("redirect:User.htm"); 
```

我收到以下错误

```
java.lang.IllegalStateException: Neither BindingResult nor plain target object for 
bean name 'User' available as request attribute 
```

我进行了搜索，但找不到对 modelandview 的正确解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:15:20.657

使用 modelAttribute 时，让用户：
1\. 您的方法参数`user`被注释`@ModelAttribute("user")`
2.`BindingResult`声明类型的方法参数。
此外，注解参数值区分大小写，并且应该与您在 userForm.jsp 中声明的**modelAttribute的值完全匹配。**

# servicestack - 如何在自托管应用程序中访问查询字符串参数

> ID：15926419
> 
> 赞同：2
> 
> 时间：2013-04-10T12:53:34.637
> 
> 标签：servicestack

我有一个 IIS 托管应用程序，它从查询字符串中获取一个 id 并像这样实例化用户对象。在 AppHost.Configure 我像这样在 IoC 中注册 UserService

```
container.Register(x => new UserService(x.Resolve<IDataContext>()).GetUser()).ReusedWithin(ReuseScope.Request); 
```

我的 UserService （这不是 ServiceStack 服务，只是一个内部助手）看起来像

```
 public class UserService
    {
        public UserService(IDataContext dataContext)
        {
            _dataContext = dataContext;
        }

        public User GetUser()
        {
            var uid = HttpContext.Current.Request.QueryString["$id$"];
            //snip
        }
        //snip
    } 
```

我想将其更改为自托管应用程序，因此我无法再访问 HttpContext。我查看了 HttpListenerContext 但是当我的类被注入时似乎没有填充任何内容。

任何人都可以阐明如何将参数从查询字符串传递给这个类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:07:42.593

您无法访问构造函数中的任何依赖项，并且每个 ServiceStack 操作都需要请求 DTO，请参阅[New API wiki](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)了解更多详细信息。

在您的服务操作中，您可以在需要时简单地访问它们`base.Request`，`base.Response`例如：

```
public class MyService : Service
{
    public UserService UserService { get; set; }

    public User Get(MyRequest request)
    {
        var user = UserService.GetUser(base.Request);
        //snip
    }
    //snip
} 
```

注意：自托管的 HttpListenerContext 没有单例，因此您无法从 IOC lambda 内部访问运行时 HTTP 请求。

# android - Android：如何将进度条添加到 BitmapWorkerTask？

> ID：15926422
> 
> 赞同：0
> 
> 时间：2013-04-10T12:53:37.023
> 
> 标签：android, progress-bar, android-viewpager, android-progressbar, image-loading

这是我将图像加载到 ViewPager 的 BitmapWorkerTask。我正在尝试向每个页面添加一个 Horizo​​ntal ProgressBar，以便更好地显示图像加载进度的 UX。（我一直在使用“不确定”的圆形进度条。）

BitmapWorkerTask 是否是添加进度条的正确位置，如果是，该怎么做？

```
/**
 * The actual AsyncTask that will asynchronously process the image.
 */
private class BitmapWorkerTask extends AsyncTask<Object, Void, Bitmap> {
    private Object data;
    private final WeakReference<ImageView> imageViewReference;

    public BitmapWorkerTask(ImageView imageView) {
        imageViewReference = new WeakReference<ImageView>(imageView);
    }

    /**
     * Background processing.
     */
    @Override
    protected Bitmap doInBackground(Object... params) {            

        data = params[0];
        final String dataString = String.valueOf(data);
        Bitmap bitmap = null;

        // Wait here if work is paused and the task is not cancelled
        synchronized (mPauseWorkLock) {
            while (mPauseWork && !isCancelled()) {
                try {
                    mPauseWorkLock.wait();
                } catch (InterruptedException e) {}
            }
        }

        // If the image cache is available and this task has not been cancelled by another
        // thread and the ImageView that was originally bound to this task is still bound back
        // to this task and our "exit early" flag is not set then try and fetch the bitmap from
        // the cache
        if (mImageCache != null && !isCancelled() && getAttachedImageView() != null
                && !mExitTasksEarly) {
            bitmap = mImageCache.getBitmapFromDiskCache(dataString);
        }

        // If the bitmap was not found in the cache and this task has not been cancelled by
        // another thread and the ImageView that was originally bound to this task is still
        // bound back to this task and our "exit early" flag is not set, then call the main
        // process method (as implemented by a subclass)
        if (bitmap == null && !isCancelled() && getAttachedImageView() != null
                && !mExitTasksEarly) {
            bitmap = processBitmap(params[0]);
        }

        // If the bitmap was processed and the image cache is available, then add the processed
        // bitmap to the cache for future use. Note we don't check if the task was cancelled
        // here, if it was, and the thread is still running, we may as well add the processed
        // bitmap to our cache as it might be used again in the future
        if (bitmap != null && mImageCache != null) {
            mImageCache.addBitmapToCache(dataString, bitmap);
        }            

        return bitmap;
    }

    /**
     * Once the image is processed, associates it to the imageView
     */
    @Override
    protected void onPostExecute(Bitmap bitmap) {
        // if cancel was called on this task or the "exit early" flag is set then we're done
        if (isCancelled() || mExitTasksEarly) {
            bitmap = null;
        }

        final ImageView imageView = getAttachedImageView();
        if (bitmap != null && imageView != null) {
            if (BuildConfig.DEBUG) {
                Log.d(TAG, "onPostExecute - setting bitmap");
            }
            setImageBitmap(imageView, bitmap);
        }
    }

    @Override
    protected void onCancelled(Bitmap bitmap) {
        super.onCancelled(bitmap);
        synchronized (mPauseWorkLock) {
            mPauseWorkLock.notifyAll();
        }
    }

    /**
     * Returns the ImageView associated with this task as long as the ImageView's task still
     * points to this task as well. Returns null otherwise.
     */
    private ImageView getAttachedImageView() {
        final ImageView imageView = imageViewReference.get();
        final BitmapWorkerTask bitmapWorkerTask = getBitmapWorkerTask(imageView);

        if (this == bitmapWorkerTask) {
            return imageView;
        }

        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:04:03.017

考虑你如何加载你的位图

```
return BitmapFactory.decodeStream(params[0].openConnection().getInputStream()); 
```

不可能给出实际的百分比进展。对于未定义的进度条，您可以将进度条传递给构造函数并将其保存在另一个 WeakReference 中，并在您的代码中执行以下操作：

```
// Before start hide the ImageView and show the progressBar
@Override
protected void onPreExecute(){
    // do the weak reference stuff and call
    progressBar.setVisibility(View.VISIBLE);
    imageView.setVisibility(View.INVISIBLE);
}

// Once complete, see if ImageView is still around and set bitmap.
@Override
protected void onPostExecute(Bitmap bitmap) {
     // do the weak refence stuff and call
    progressBar.setVisibility(View.INVISIBLE);
    imageView.setVisibility(View.VISIBLE);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:54:33.547

好吧，只花了 4 个小时，做了“不可能”，诀窍是：

1.  在将图像传递给 BitmapWorkerTask 之前测量从 HTTP URL 加载图像时的进度。这个[链接](http://www.androidhive.info/2012/04/android-downloading-file-by-showing-progress-bar/)是一个很好的教程。
2.  将进度更新从加载 URL 方法传递给 BitmapWorkerTask 类，但是该`publishProgress()`方法仅在 AsyncTask 中有效，因此要解决[此问题](https://stackoverflow.com/questions/5517641/publishprogress-from-inside-a-function-in-doinbackground)。
3.  以及大量的故障排除、试验和错误，以专门根据您的需求进行定制。

祝你好运！希望这可以帮助人们朝着正确的方向开始。

# makefile - Cmake 和 make，编译 scribus 时出错

> ID：15926427
> 
> 赞同：1
> 
> 时间：2013-04-10T12:53:44.167
> 
> 标签：makefile, cmake, qmake

我在尝试编译 Scribus 1.5 svn 时总是发现错误。我尝试使用 Qt4 和 Qt5，但错误似乎并不依赖于它们。

这是 cmake 输出：

```
cmake -DCMAKE_INSTALL_PREFIX:PATH=/home/fabio/scribusinstall .. -DUSE_QT5=1 -DQT_PREFIX="/opt/qt5/bin"
-- Shared Library Flags: 
-- Scribus 1.5.0.svn will be built to install into /home/fabio/scribusinstall
-- Machine: x86_64-linux-gnu, void pointer size: 8
-- Found target X86
-- Found target X86_64
-- Building for target x86_64-linux-gnu
-- Using standard ApplicationDataDir. You can change it with -DAPPLICATION_DATA_DIR
-- ----- USE QT 5-----
-- ----- USE QT Widgets-----
-- ----- USE Qt5Gui -----
-- ----- USE QT 5 XML -----
-- ----- USE Qt5WebKit -----
-- ----- USE Qt5WebKitWidgets -----
-- ----- USE Qt5Network -----
-- ----- USE Qt5OpenGL -----
-- Found ZLIB: /usr/lib/x86_64-linux-gnu/libz.so  
ZLIB Library Found OK
-- Found PNG: /usr/lib/x86_64-linux-gnu/libpng.so  
Using PNG Library: /usr/lib/x86_64-linux-gnu/libpng.so
PNG Library Found OK
OSG found OK
-- Looking for XOpenDisplay in /usr/lib/x86_64-linux-gnu/libX11.so;/usr/lib/x86_64-linux-gnu/libXext.so
-- Looking for XOpenDisplay in /usr/lib/x86_64-linux-gnu/libX11.so;/usr/lib/x86_64-linux-gnu/libXext.so - found
-- Looking for gethostbyname
-- Looking for gethostbyname - found
-- Looking for connect
-- Looking for connect - found
-- Looking for remove
-- Looking for remove - found
-- Looking for shmat
-- Looking for shmat - found
-- Looking for IceConnectionNumber in ICE
-- Looking for IceConnectionNumber in ICE - found
-- Found X11: /usr/lib/x86_64-linux-gnu/libX11.so
-- Found OpenGL: /usr/lib/x86_64-linux-gnu/libGL.so  
-- Found JPEG: /usr/lib/x86_64-linux-gnu/libjpeg.so  
JPEG Library Found OK
-- Found TIFF: /usr/lib/x86_64-linux-gnu/libtiff.so  
TIFF Library Found OK
-- Found PythonLibs: /usr/lib/libpython2.7.so (found suitable version "2.7.3", required is "2") 
Python Library Found OK
-- Found Freetype: /usr/lib/x86_64-linux-gnu/libfreetype.so (found version "2.4.8") 
-- FreeType2 Library Found OK
-- Looking for FT_Get_First_Char in /usr/lib/x86_64-linux-gnu/libfreetype.so
-- Looking for FT_Get_First_Char in /usr/lib/x86_64-linux-gnu/libfreetype.so - found
-- Looking for FT_Get_Next_Char in /usr/lib/x86_64-linux-gnu/libfreetype.so
-- Looking for FT_Get_Next_Char in /usr/lib/x86_64-linux-gnu/libfreetype.so - found
-- Found PkgConfig: /usr/bin/pkg-config (found version "0.26") 
-- checking for one of the modules 'libcairo>=1.2.0;cairo>=1.2.0'
CAIRO Library Found OK
-- Found Cups: /usr/lib/x86_64-linux-gnu/libcups.so (found version "1.5.3") 
CUPS Library Found OK
-- Found LibXml2: /usr/lib/x86_64-linux-gnu/libxml2.so (found version "2.7.8") 
LIBXML2 Library Found OK
LCMS ReleaseLibrary: /usr/lib/x86_64-linux-gnu/liblcms.so
LCMS Debug Library: LCMS_LIBRARY_DEBUG-NOTFOUND
LCMS Library: /usr/lib/x86_64-linux-gnu/liblcms.so
LCMS 2 ReleaseLibrary: LCMS2_LIBRARY_RELEASE-NOTFOUND
LCMS 2 Debug Library: LCMS2_LIBRARY_DEBUG-NOTFOUND
LCMS 2 Library: LCMS2_LIBRARY_RELEASE-NOTFOUND
LCMS ReleaseLibrary: /usr/lib/x86_64-linux-gnu/liblcms.so
LCMS Debug Library: LCMS_LIBRARY_DEBUG-NOTFOUND
LCMS Library: /usr/lib/x86_64-linux-gnu/liblcms.so
LittleCMS Library Found OK
-- checking for one of the modules 'fontconfig'
FontConfig Found OK
-- Could NOT find HUNSPELL (missing:  HUNSPELL_LIBRARIES HUNSPELL_INCLUDE_DIR) 
Hunspell or its developer libraries NOT found - Disabling support for spell checking
PoDoFo found OK
-- Boost version: 1.46.1
Boost Library Found OK
Building without GraphicksMagick (use -DWANT_GRAPHICSMAGICK=1 to enable)
-- checking for one of the modules 'libpoppler>=0.19.0;poppler>=0.19.0'
-- Found poppler
-- Found poppler libs: /usr/lib/x86_64-linux-gnu/libpoppler.so
-- Found poppler includes: /usr/include/poppler
-- Check if the system is big endian
-- Searching 16 bit integer
-- Looking for sys/types.h
-- Looking for sys/types.h - found
-- Looking for stdint.h
-- Looking for stdint.h - found
-- Looking for stddef.h
-- Looking for stddef.h - found
-- Check size of unsigned short
-- Check size of unsigned short - done
-- Using unsigned short
-- Check if the system is big endian - little endian
-- Looking for dlfcn.h
-- Looking for dlfcn.h - found
-- Looking for unistd.h
-- Looking for unistd.h - found
-- Looking for sys/stat.h
-- Looking for sys/stat.h - found
-- Looking for include file endian.h
-- Looking for include file endian.h - found
-- Looking for include file fcntl.h
-- Looking for include file fcntl.h - found
RPATH: lib/scribus/plugins/;
-- Qt5::CoreQt5::WidgetsQt5::GuiQt5::XmlQt5::WebKitQt5::WebKitWidgetsQt5::NetworkQt5::OpenGL/usr/lib/x86_64-linux-gnu/libxml2.so/usr/lib/x86_64-linux-gnu/libz.so
-- Building with Scripter 1
-- Source header files will be installed
-- /home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/resources/translations/po
-- The following GUI languages will be installed: 
-- Configuring done
-- Generating done
-- Build files have been written to: /home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/builddir 
```

然后我做：

```
cd ..
make
Scanning dependencies of target scribus_pgf_lib
[  0%] Building CXX object scribus/third_party/pgf/CMakeFiles/scribus_pgf_lib.dir/Decoder.cpp.o
<command-line>:0:1: error: macro names must be identifiers
/home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/scribus/third_party/pgf/Decoder.cpp:583:0: warning: ignoring #pragma omp parallel [-Wunknown-pragmas]
make[2]: *** [scribus/third_party/pgf/CMakeFiles/scribus_pgf_lib.dir/Decoder.cpp.o] Errore 1
make[1]: *** [scribus/third_party/pgf/CMakeFiles/scribus_pgf_lib.dir/all] Errore 2
make: *** [all] Errore 2 
```

这似乎不是依赖问题，因为我在 Ubuntu Precise (Linux Mint 13) 中使用 apt-get build-dep 命令安装了它们。可能是什么问题，我该如何解决？

非常感谢您！

编辑添加 make VERBOSE=1

```
fabio@fabio-EasyNote-TS11HR ~/ScribusSVN/scribus-trunk-1.5.0svn201304091810/builddir $ make VERBOSE=1/usr/bin/cmake -H/home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810 -B/home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/builddir --check-build-system CMakeFiles/Makefile.cmake 0
/usr/bin/cmake -E cmake_progress_start /home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/builddir/CMakeFiles /home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/builddir/CMakeFiles/progress.marks
make -f CMakeFiles/Makefile2 all
make[1]: ingresso nella directory "/home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/builddir"
make -f scribus/third_party/pgf/CMakeFiles/scribus_pgf_lib.dir/build.make scribus/third_party/pgf/CMakeFiles/scribus_pgf_lib.dir/depend
make[2]: ingresso nella directory "/home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/builddir"
cd /home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/builddir && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810 /home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/scribus/third_party/pgf /home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/builddir /home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/builddir/scribus/third_party/pgf /home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/builddir/scribus/third_party/pgf/CMakeFiles/scribus_pgf_lib.dir/DependInfo.cmake --color=
make[2]: uscita dalla directory "/home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/builddir"
make -f scribus/third_party/pgf/CMakeFiles/scribus_pgf_lib.dir/build.make scribus/third_party/pgf/CMakeFiles/scribus_pgf_lib.dir/build
make[2]: ingresso nella directory "/home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/builddir"
/usr/bin/cmake -E cmake_progress_report /home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/builddir/CMakeFiles 
[  0%] Building CXX object scribus/third_party/pgf/CMakeFiles/scribus_pgf_lib.dir/Decoder.cpp.o
cd /home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/builddir/scribus/third_party/pgf && /usr/bin/c++   -DNDEBUG -DQT_CORE_LIB -DQT_WIDGETS_LIB -DQT_CORE_LIB -DQT_GUI_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_XML_LIB -DQT_CORE_LIB -DQT_CORE_LIB -DQT_GUI_LIB -DQT_OPENGL_LIB -DQT_WIDGETS_LIB -DQT_NETWORK_LIB -DQT_WEBKITWIDGETS_LIB -DQT_QUICK_LIB -DQT_QML_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_GUI_LIB -DQT_OPENGL_LIB -DQT_WIDGETS_LIB -DQT_PRINTSUPPORT_LIB -DQT_LOCATION_LIB -DQT_SENSORS_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_OPENGL_LIB -DQT_CORE_LIB -DQT_GUI_LIB -DQT_WIDGETS_LIB -DUSE_QT5 -DHAVE_DLFCN_H -DHAVE_UNISTD_H -DHAVE_CONFIG_H -O2 -Wall -fPIC -I/home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/builddir/scribus/third_party/pgf -I/home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/scribus/third_party/pgf -I/opt/qt5/include -I/opt/qt5/include/QtCore -I/opt/qt5/mkspecs/default -I/opt/qt5/include/QtWidgets -I/opt/qt5/include/QtGui -I/opt/qt5/include/QtXml -I/opt/qt5/include/QtWebKit -I/opt/qt5/include/QtOpenGL -I/opt/qt5/include/QtNetwork -I/usr/include/qt5 -I/usr/include/qt5/QtWebKitWidgets -I/usr/include/qt5/QtQuick -I/usr/include/qt5/QtQml -I/usr/include/qt5/QtPrintSupport -I/usr/include/qt5/QtLocation -I/usr/include/qt5/QtSensors -I/home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/builddir -I/home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/builddir/scribus -I/usr/include/libxml2 -I/home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810 -I/home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/scribus    -DSHAREDIR=\"/home/fabio/scribusinstall/share/scribus/\" -DDOCDIR=\"/home/fabio/scribusinstall/share/doc/scribus/\" -DICONDIR=\"/home/fabio/scribusinstall/share/scribus/icons/\" -DSAMPLESDIR=\"/home/fabio/scribusinstall/share/scribus/samples/\" -DSCRIPTSDIR=\"/home/fabio/scribusinstall/share/scribus/scripts/\" -DTEMPLATEDIR=\"/home/fabio/scribusinstall/share/scribus/templates/\" -DDESKTOPDIR=\"/home/fabio/scribusinstall/share/applications/\" -DLIBDIR=\"/home/fabio/scribusinstall/lib/scribus/\" -DPLUGINDIR=\"/home/fabio/scribusinstall/lib/scribus/plugins/\" -D -D -DCOMPILE_SCRIBUS_MAIN_APP -o CMakeFiles/scribus_pgf_lib.dir/Decoder.cpp.o -c /home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/scribus/third_party/pgf/Decoder.cpp
<command-line>:0:1: error: macro names must be identifiers
/home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/scribus/third_party/pgf/Decoder.cpp:583:0: warning: ignoring #pragma omp parallel [-Wunknown-pragmas]
make[2]: *** [scribus/third_party/pgf/CMakeFiles/scribus_pgf_lib.dir/Decoder.cpp.o] Errore 1
make[2]: uscita dalla directory "/home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/builddir"
make[1]: *** [scribus/third_party/pgf/CMakeFiles/scribus_pgf_lib.dir/all] Errore 2
make[1]: uscita dalla directory "/home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/builddir"
make: *** [all] Errore 2 
```

以下是 Makefile 中仅有的两个“-D”定义：

```
# Special rule for the target install/local
install/local: preinstall
    @$(CMAKE_COMMAND) -E cmake_echo_color --switch=$(COLOR) --cyan "Installing only the local directory..."
    /usr/bin/cmake -DCMAKE_INSTALL_LOCAL_ONLY=1 -P cmake_install.cmake
.PHONY : install/local

# Special rule for the target install/strip
install/strip: preinstall
    @$(CMAKE_COMMAND) -E cmake_echo_color --switch=$(COLOR) --cyan "Installing the project stripped..."
    /usr/bin/cmake -DCMAKE_INSTALL_DO_STRIP=1 -P cmake_install.cmake
.PHONY : install/strip 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:54:21.143

你可以从你得到的错误开始：

```
<command-line>:0:1: error: macro names must be identifiers 
```

这`<command-line>:0:1`表明错误不是来自`.cpp`文件，而是来自传递给编译器的选项。由于您生成了 a`Makefile`并使用 make 调用它，这意味着生成`Makefile`的是不稳定的。

现在，`error: macro names must be identifiers`可能意味着`Makefile`尝试使用选项创建一个与正确的预处理标识符不对应的宏`-D`。例如，如果您键入：

```
g++ foobar.cpp -D1 
```

你会得到完全相同的错误，因为`1`它不是一个有效的标识符（有效的标识符只包含字母、数字和下划线；第一个字符不能是数字）。我不能用你所拥有的东西来推断更多，但你可以做的是搜索你`Makefile`的无效`-D`选项，并尝试找出哪个部分`CMakeLists.txt`可能产生了这个选项。

宏定义`-D`通常使用以下命令从 cmake 文件中定义`add_definitions`。例如，我可以通过`-D1`将这一行添加到 cmake 来传递我的容易出错的选项：

```
add_definitions(-D1) 
```

希望您能设法找出错误的原因。

**编辑：**错误在这条巨线上：

```
cd /home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/builddir/scribus/third_party/pgf && /usr/bin/c++   -DNDEBUG -DQT_CORE_LIB -DQT_WIDGETS_LIB -DQT_CORE_LIB -DQT_GUI_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_XML_LIB -DQT_CORE_LIB -DQT_CORE_LIB -DQT_GUI_LIB -DQT_OPENGL_LIB -DQT_WIDGETS_LIB -DQT_NETWORK_LIB -DQT_WEBKITWIDGETS_LIB -DQT_QUICK_LIB -DQT_QML_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_GUI_LIB -DQT_OPENGL_LIB -DQT_WIDGETS_LIB -DQT_PRINTSUPPORT_LIB -DQT_LOCATION_LIB -DQT_SENSORS_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_OPENGL_LIB -DQT_CORE_LIB -DQT_GUI_LIB -DQT_WIDGETS_LIB -DUSE_QT5 -DHAVE_DLFCN_H -DHAVE_UNISTD_H -DHAVE_CONFIG_H -O2 -Wall -fPIC -I/home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/builddir/scribus/third_party/pgf -I/home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/scribus/third_party/pgf -I/opt/qt5/include -I/opt/qt5/include/QtCore -I/opt/qt5/mkspecs/default -I/opt/qt5/include/QtWidgets -I/opt/qt5/include/QtGui -I/opt/qt5/include/QtXml -I/opt/qt5/include/QtWebKit -I/opt/qt5/include/QtOpenGL -I/opt/qt5/include/QtNetwork -I/usr/include/qt5 -I/usr/include/qt5/QtWebKitWidgets -I/usr/include/qt5/QtQuick -I/usr/include/qt5/QtQml -I/usr/include/qt5/QtPrintSupport -I/usr/include/qt5/QtLocation -I/usr/include/qt5/QtSensors -I/home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/builddir -I/home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/builddir/scribus -I/usr/include/libxml2 -I/home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810 -I/home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/scribus    -DSHAREDIR=\"/home/fabio/scribusinstall/share/scribus/\" -DDOCDIR=\"/home/fabio/scribusinstall/share/doc/scribus/\" -DICONDIR=\"/home/fabio/scribusinstall/share/scribus/icons/\" -DSAMPLESDIR=\"/home/fabio/scribusinstall/share/scribus/samples/\" -DSCRIPTSDIR=\"/home/fabio/scribusinstall/share/scribus/scripts/\" -DTEMPLATEDIR=\"/home/fabio/scribusinstall/share/scribus/templates/\" -DDESKTOPDIR=\"/home/fabio/scribusinstall/share/applications/\" -DLIBDIR=\"/home/fabio/scribusinstall/lib/scribus/\" -DPLUGINDIR=\"/home/fabio/scribusinstall/lib/scribus/plugins/\" -D -D -DCOMPILE_SCRIBUS_MAIN_APP -o CMakeFiles/scribus_pgf_lib.dir/Decoder.cpp.o -c /home/fabio/ScribusSVN/scribus-trunk-1.5.0svn201304091810/scribus/third_party/pgf/Decoder.cpp 
```

在该行的中间，有一些选项`-D -D`会触发您的实际错误。现在，问题将是找到生成此命令行的内容以及如何纠正此问题:)

# arrays - ASP Classic 性能建议？

> ID：15926431
> 
> 赞同：0
> 
> 时间：2013-04-10T12:54:00.750
> 
> 标签：arrays, performance, function, asp-classic

我必须编写一个函数，它接受一个值（数量），然后确定它所在的范围，并根据该范围确定价格。

所以如果传入1-10，价格是2美元，如果是11-20，价格是4美元。等等等等等等。这必须是相当无限的，因为这是在电子商务网站上用来确定结帐运费的。

我的问题是，是否有更有效的方法来做到这一点，而不是循环到 10,000，以 10 为单位构建一个数组，然后循环遍历我制作的数组以确定传入的值的范围。

```
function getPrice(qty)
    tempArray = array()
    for i = 0 to 10000 step 10
        addArrayItem tempArray,i
    next
    if qty > 9 then
        for i = 0 to ubound(tempArray)
            if cInt(qty) > tempArray(i) AND cInt(qty) <= tempArray(i+1) then
                response.write("falls in range " & tempArray(i) + 1 & " through " & tempArray(i+1) & "<br>")
                temp = left(tempArray(i+1),len(tempArray(i+1)) - 1)
                rate = formatcurrency(cInt(temp * 2),2)
                exit for
            end if
        next
    elseif qty > 0 then
        rate = "$2.00"
    else
        rate = "error"
    end if
    getPrice = rate
end function

sub addArrayItem(ByRef ar,ByVal count)
    ub = uBound(ar)
    reDim preserve ar(ub + 1)
    ar(ub+1) = count
end sub 
```

# azure - Windows Azure Web 角色 PublishSettings 文件用途

> ID：15926432
> 
> 赞同：0
> 
> 时间：2013-04-10T12:54:01.673
> 
> 标签：azure, certificate

作为部署的一部分，我们需要创建发布设置文件或自签名证书。

有人可以帮我理解为什么我们需要这个吗？加密来自给定机器或任何机器的每个请求？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T13:13:07.397

要从工具（Visual Studio、PowerShell 或使用服务管理 API 的自定义）发布部署，您需要授权该工具与 Windows Azure 一起使用。如果您通过 Windows Azure 管理门户进行部署，则不需要这样做，因为它知道您（通过您经过身份验证的 Microsoft 帐户）。

该授权以 X509 证书的形式出现。正如您所提到的，您可以自己创建它，也可以让 Windows Azure 以 .publishsettings 文件的形式为您创建一个。该文件包含一个编码的 X509 证书。当您将该文件导入 Visual Studio 或 PowerShell cmdlet 等工具时，证书将安装到您的本地证书存储中。然后它可用于验证您的机器和 Windows Azure 之间的请求。

至于如何管理证书，我通常更喜欢每台机器至少有一个。我认为如果需要，删除证书会更容易，并且不会影响我正在使用的其他机器。但是，这真的取决于你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:12:55.900

我一直认为需要证书来验证发布权

（您不希望任何人都能够部署到您的站点）

# r - 近似 R 中二项式随机变量之和的分布

> ID：15926448
> 
> 赞同：5
> 
> 时间：2013-04-10T12:54:36.880
> 
> 标签：r, statistics, pearson

我的目标是近似二项式变量总和的分布。我使用 Ken Butler 和 Michael Stephens 的以下论文[The Distribution of a Sum of a Binomial Random Variables](http://statistics.stanford.edu/~ckirby/techreports/ONR/SOL%20ONR%20467.pdf)。

我想编写一个 R 脚本来找到二项式总和的 Pearson 近似值。有一个 R 包 [PearsonDS](http://cran.r-project.org/web/packages/PearsonDS/index.html)允许以简单的方式执行此操作。

因此，我从论文中获取第一个示例，并尝试找出这种情况下 Pearson 分布的密度。最后我收到一条错误消息“这些时刻没有概率分布”。

你能解释一下下面的代码有什么问题吗？

```
library(PearsonDS) 
```

# 定义五个二项式随机变量的参数

```
n<-rep(5,5)
p<-seq(0.02,0.10,0.02) 
```

# 找到前四个累积量

```
k.1<-sum(n*p)
k.2<-sum(n*p*(1-p))
k.3<-sum(n*p*(1-p)*(1-2*p))
k.4<-sum(n*p*(1-p)*(1-6*p*(1-p))) 
```

# 求偏度和峰度参数

```
beta.1<-k.3^2/k.2^3
beta.2<-k.4/k.2^2 
```

# 定义时刻并计算

```
moments <- c(mean=k.1,variance=k.2,skewness=sqrt(beta.1),kurtosis=beta.2)
dpearson(1:7,moments=moments) 
```

我收到错误消息“这些时刻没有概率分布”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-03T17:29:18.267

您尝试在瞬间插入的峰度实际上是*多余的峰度*，即`kurtosis - 3`. 从帮助页面`dpearson()`：

> 时刻：
> 平均值、方差、偏度、峰度（不是过度峰度）的可选向量/列表。

因此，添加 3`beta.2`将为您提供真正的峰度：

```
beta.1 <- (k.3^2)/(k.2^3)
beta.2 <- k.4/(k.2^2)
kurt <- beta.2 + 3

moments <- c(mean = k.1, variance = k.2, skewness = beta.1, kurtosis = kurt)
dpearson(1:7, moments=moments)
# [1] 0.3438773545 0.2788412385 0.1295129534 0.0411140817 0.0099279576
# [6] 0.0019551512 0.0003294087 
```

为了得到类似论文中的结果，我们应该研究累积分布函数并添加 0.5 来校正由连续分布逼近离散分布引起的偏差：

```
ppearson(1:7+0.5, moments = moments)
# [1] 0.5348017 0.8104394 0.9430092 0.9865434 0.9973715 0.9995578 0.9999339 
```

# 一点背景资料：

该函数引发错误，因为峰度和偏度之间的关系并非无效：峰度以下列方式受偏度的下限：`kurtosis >= (skewness)^2 - 1`. 证明并不漂亮，当然超出了问题的范围，但是如果您喜欢这个不等式的不同版本，可以查看下面的参考资料。

1.  **威尔金斯，J.欧内斯特**。关于偏度和峰度的注释。安。数学。统计学家。15 (1944), 没有。3、333--335。[http://projecteuclid.org/euclid.aoms/1177731243](http://projecteuclid.org/euclid.aoms/1177731243)。
2.  **K.皮尔逊**。对进化论的数学贡献，XIX；关于偏斜变化的回忆录的第二个补充。菲洛斯。反式。罗伊。社会党。伦敦爵士。A, 216 (1916), p. 432 [http://rsta.royalsocietypublishing.org/content/216/538-548/429](http://rsta.royalsocietypublishing.org/content/216/538-548/429)
3.  **皮尔逊，K.**（1929 年）。“对‘频率函数矩和各种统计常数的不等式’的编辑说明”。生物计量学。21（1-4）：361-375。[关联](https://academic.oup.com/biomet/article-lookup/doi/10.1093/biomet/21.1-4.361)

# jquery - 需要在自定义 Wordpress 循环函数中为最后一个列表项元素添加一个类首选 jQuery

> ID：15926458
> 
> 赞同：0
> 
> 时间：2013-04-10T12:55:03.013
> 
> 标签：jquery, wordpress, loops, addclass

如果有一个相当复杂的函数，我们将使用它来生成一个包含 3 个最新帖子的自定义循环。我只是想在最后一个名为“last”的 li 元素中添加一个类，但并没有真正把它记下来。我尝试了一堆 jquery 来 addClass 但没有运气。我敢肯定这只是我愚蠢。任何帮助将不胜感激。这是我的功能：

```
 <?php function custom_readmore_after_excerpt($text) {  
        global $post;  
        //set default Read More 
            $link_text = '[continue]'; 
            $custom_fields = get_post_custom() ; 
            $thesis_content_fields = unserialize( $custom_fields['_thesis_post_content'][0] ); 
            if ( $thesis_content_fields['read_more'] )  
            $link_text = $thesis_content_fields['read_more']; 

            $link = '<span><a href="'. get_permalink($post->ID) . '" class="feed_read_more">' . $link_text . '</a></span>';  

        if (!empty($post->post_excerpt)) {  
            $text = $text . $link;  
            } 
        else {  
            $text = str_replace('[...]', $link, $text);  
            }    
        return $text;   
        } 
        add_filter('get_the_excerpt', 'custom_readmore_after_excerpt');

            function excerpt_front($length) {
            return 16;
            }

            add_filter('excerpt_length', 'excerpt_front');

            $custom_loop = new WP_Query('showposts=3&orderby=date');
            $output = "";
                if ( $custom_loop->have_posts() ) : 
                    /* open box wrapper */
                    $output .= "<ul class=\"feed_wrapper\">\n";
                while ( $custom_loop->have_posts() ) : $custom_loop->the_post();
                    /* load post data */
                global $post;
                    /* prepare necessary variables */
                    $img = "";
                    $post_url = get_permalink($post->ID);
                    $post_title = get_the_title($post->ID);
                    $post_excerpt = get_the_excerpt($post->ID);
                    $a_title = esc_attr($post_title); /* - double Title on some post .. humm ?? - */
                    $thumbnail_data = get_post_meta($post->ID, '_thesis_post_thumbnail', true);
                    /* do only if thumbanil_data is not empty and is an array of values */
                if(!empty($thumbnail_data) && is_array($thumbnail_data)) {
                    $thumbnail_url = (!empty($thumbnail_data['image']['url'])) ? $thumbnail_data['image']['url'] : "";
                    $img = "<img src=\"{$thumbnail_url}\" class=\"feed_thumbnail\" alt=\"{$a_title}\" />";
                    }
                    $a_before = "<a href=\"{$post_url}\">";
                    $a_after = "</a>";
                    /* start html constructor */
                    /* open post wrapper */
                $output .= "<li>\n<div class=\"feed_container\">\n";
                /* headline */
                $output .= "<div class=\"feed_headline\">\n<h4 class=\"feed_title\">{$a_before}{$post_title}{$a_after}</h4>\n</div>\n";
                /* thumbnail */
                $output .= "<div class=\"feed_thumb\">\n{$a_before}{$img}{$a_after}\n</div>\n";
                /* thumbnail */
                $output .= "<div class=\"feed_excerpt\">\n{$post_excerpt}</div>\n";
                /* close and clear post wrapper */
                $output .= "<div class=\"clear\"></div>\n</div></li>\n";
                endwhile;
                /* close and clear box wrapper */
            $output .= "<div class=\"cleared\"></div>\n</ul>\n";
            endif;
            wp_reset_query();
            wp_reset_postdata();
            /* display result */
            echo $output; 
        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:59:35.113

```
$(".feed_wrapper li:last-child").addClass("last") 
```

像这样的事情应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:00:10.763

试试这个

```
$(".feed_wrapper > li:last-child").addClass("last"); 
```

[http://jsfiddle.net/3hJEe/1/](http://jsfiddle.net/3hJEe/1/)

阅读下面的评论并访问您的网站后，这应该适用于您的情况：

```
$(".feed_wrapper > li").last().addClass("last"); 
```

[http://jsfiddle.net/3hJEe/2/](http://jsfiddle.net/3hJEe/2/)

# ember.js - Ember 抱怨未定义的命名空间

> ID：15926460
> 
> 赞同：1
> 
> 时间：2013-04-10T12:55:03.757
> 
> 标签：ember.js

我收到此错误：

```
Uncaught Error: assertion failed: You are looking for a edit controller in the Node namespace, but the namespace could not be found 
```

但是，如果我检查对象（Chrome 开发人员工具），我确认：

*   `App.NodeEditController`被定义为
*   `Ember.TEMPLATES['node/edit']`已定义（我使用的是预编译模板）
*   模型`App.Node`已定义

什么可能导致这个问题？我还能验证什么？这个[命名空间](http://emberjs.com/api/classes/Ember.Namespace.html)是什么？我以前没有使用过它，我的应用程序正在运行。

我所做的唯一更改与我的代码库的重组有关：我已将模板/控制器/模型/视图拆分为文件 - 但它们再次与`grunt`任务连接，因此不应该存在真正的更改（除了事实我现在使用的预编译模板）

我也验证了`SettingsApp.Router.router.recognizer.names`：

![路由器名称](https://i.stack.imgur.com/L5WfQ.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:01:07.447

这解决了问题，至少您可以再次导航到编辑路线

改变这个：

```
SettingsApp.NodeController = Ember.ObjectController.extend({
    isEditing: false,
    needs: [node/edit]
    ... 
```

对此（消除需求）

```
SettingsApp.NodeController = Ember.ObjectController.extend({
isEditing: false
... 
```

希望能帮助到你 ...

# ajax - 如何呈现除一个 inputText 之外的所有 Grid 字段？

> ID：15926478
> 
> 赞同：1
> 
> 时间：2013-04-10T12:55:53.023
> 
> 标签：ajax, jsf, rendering

我有一个使用 ajax 的搜索表单。在`keyup`搜索字段事件期间`searchKeyFieldId`，我需要更新同一面板网格中的所有其他字段。

```
<h:panelGrid id="myGrid" columns="4" >

    <!-- When searchKeyFieldId change ... -->
    <!-- Need to render all the myGrid EXCEPT searchKeyFieldId -->
    <h:outputText value="search key"/>
    <h:inputText id="searchKeyFieldId"
        value="#{MyController.searchKeyField}"      
        valueChangeListener="#{MyController.licenseNumberChange}" >
        <a4j:ajax event="keyup" render="myGrid" />
    </h:inputText>

    <h:outputText value=""/>
    <h:outputText value=""/>

    <!-- Target render fields -->   
    <h:outputText value="text1"/>
    <h:inputText id="field1"
        value="#{MyController.field1}"/>

    <h:outputText value="text2"/>
    <h:inputText id="field2"
        value="#{MyController.field2}"/>

    <h:outputText value="text3"/>
    <h:inputText id="field3"
        value="#{MyController.field3}"/>
    .....   
</h:panelGrid> 
```

但是，当我使用 时`render="myGrid"`，搜索字段也会更新，因此失去焦点。最终用户必须再次单击/聚焦输入字段才能继续输入。

因此，我只需要更新特定字段，如下所示：

```
<a4j:ajax event="keyup" render="field1 field2 field3 field4 field5 ..." /> 
```

但是，我有很多字段，准确地说是 40 个，这种解决方案不是一个好习惯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:42:09.143

> *这个解决方案不是一个好习惯*

对不起，但这很荒谬。它完全可以完成您想要的工作，因此是正确的方法。克服它并把它们都写下来。如有必要，您可以将样板文件隐藏在 bean 属性后面。

```
render="#{MyController.clientIdsToRender}" 
```

如有必要，您可以根据 JSF 组件树自动填充字符串，但为此编写代码将需要比硬编码视图中已定义的客户端 ID 所需的更多字符。

在标准 JSF 和 RichFaces 中没有其他方法。然而，PrimeFaces 提供了[PrimeFaces 选择器](http://www.primefaces.org/showcase/ui/selectors.jsf)(PFS) 的替代方案。另请参阅此相关问题：[如何在父组件的 ajax 更新中排除子组件？](https://stackoverflow.com/questions/12614882/how-to-exclude-child-component-in-ajax-update-of-a-parent-component/)

一种完全不同的替代方法是将面板网格拆分为两个面板网格，一个包含搜索输入，另一个包含要更新的字段。如有必要，您可以将它们与 CSS 的好镜头对齐。

# python - 菜鸟 python：如何与嵌套循环交互层

> ID：15926479
> 
> 赞同：0
> 
> 时间：2013-04-10T12:55:59.620
> 
> 标签：python, loops, arcgis

我处理下面的代码已经很长时间了。我必须在光栅图像中显示计算太阳能发电厂电力成本的结果。问题是我必须将层“DNI”（直接正常辐照）与公式交互，并且在生命工厂的 30 年期间，公式的值随着每年的因子（costReductionFactorPlant）而变化。因素如下所示。

当我运行代码时，我收到以下错误：

```
Runtime error 
Traceback (most recent call last):
  File "<string>", line 56, in <module>
  File "c:\program files (x86)\arcgis\desktop10.1\arcpy\arcpy\sa\Functions.py", line 4049, in Times
    in_raster_or_constant2)
  File "c:\program files (x86)\arcgis\desktop10.1\arcpy\arcpy\sa\Utils.py", line 47, in swapper
    result = wrapper(*args, **kwargs)
  File "c:\program files (x86)\arcgis\desktop10.1\arcpy\arcpy\sa\Functions.py", line 4046, in wrapper
    return _wrapLocalFunctionRaster(u"Times_sa", ["Times", in_raster_or_constant1, in_raster_or_constant2])
RuntimeError: ERROR 000732: Input Raster: Dataset D:_ArcGIS\Python\LCOE_test does not exist or is not supported
>>> 
```

恐怕调用层“DNI”时有问题。但没有头绪。也许循环也有错误......我也试过看它，对我来说看起来不错，但我不是专家。

我正在运行 ArcGis 10.1。所有建议都非常受欢迎。

代码：

```
import arcpy, os, sys
from arcpy import env
from arcpy.sa import *

# Set Workspace
env.workspace = "D:\02_ArcGIS\Python\LCOE_test"

# Check out the ArcGIS Spatial Analyst extension license
arcpy.CheckOutExtension("Spatial")

# Variables definition
capacity = 100000
actualOutput = .94 * capacity
storageHours = 16
loadFactor = (.57 * storageHours + 7.1)/24
costReductionFactorPlant = [0.4790, 0.4533, 0.4297, 0.4080, 0.3880, 0.3696, 0.3526, 0.3368, 0.3222, 0.3087, 0.2961, 0.2844, 0.2735, 0.2633, 0.2538, 0.2449, 0.2366, 0.2288, 0.2215, 0.2146, 0.2081, 0.2021, 0.1964, 0.1910, 0.1859, 0.1811, 0.1765, 0.1723, 0.1682, 0.1643, 0.1607]
efficiency = [0.1822, 0.1827, 0.1831, 0.1834, 0.1837, 0.1840, 0.1841, 0.1843, 0.1844, 0.1845, 0.1846, 0.1847, 0.1847, 0.1848, 0.1848, 0.1849, 0.1849, 0.1849, 0.1849, 0.1849, 0.1849, 0.1850, 0.1850, 0.1850, 0.1850, 0.1850, 0.1850, 0.1850, 0.1850, 0.1850, 0.1850]
years = 30
i = .1
ir = .01
lcoePlantTotal = 0
productionPlant = loadFactor * actualOutput * 8760
DNI =  "D:\02_ArcGIS\Python\LCOE_test" #layer#

Count=len(costReductionFactorPlant)+ 1
counter=1

while counter < Count:
    for i in range(counter,(counter+1)):

            # Set the cell size environment using a keyword.
            arcpy.env.cellSize = "MAXOF"

            # Set the extent environment using a keyword
            arcpy.env.extent = "MAXOF"

            #intermediate formula plant

            # size = (capacity * 8760 * loadFactor)/(DNI * efficiency[counter-1])

            size1 = (capacity * 8760 * loadFactor)
            timesConstant = efficiency[counter-1]
            size2 = Times(3, timesConstant)
            print size2
            size = Divide(size1, size2)

            # Calculate power block & storage              
            powerBlock = capacity * 1484.9918 * costReductionFactorPlant[counter-1]
            storage = storageHours * capacity * 39.45759 * costReductionFactorPlant[counter-1]

            # Calculate mirrowField 
            # mirrorField = size * 155.6975 * costReductionFactorPlant[cont-1]
            timesConstant2 = costReductionFactorPlant[counter-1]
            inconstant = Times(155.6975, timesConstant2)
            mirrorField = Times(size, inconstant)

            # calculate PowerTower
            powerTower = ((capacity * 121.03883) + (capacity * 128.50378)) * costReductionFactorPlant[counter-1]

            # Calculate investmentPlant
            investmentPlant = powerBlock + storage + mirrorField + powerTower

            # Calculate omPlant
            omPlant = Times(investmentPlant, 0.048)

            #formula: lcoePlant = ((investmentPlant * (((i * (1 + i)^counter)/((1 + i)^counter-1))+ ir))+omPlant)/productionPlant*100
            # Formula Part 1 = (investmentPlant * (((i * (1 + i)^counter) Power symbol = **
            InConstant3= i * ((1 + i)**counter)
            FormulaPart1 = Times(investmentPlant, InConstant3)

            # Formula Part 2 = ((1 + i)^counter-1))+ ir))+omPlant)/productionPlant*100
            FormulaPart2 =(((1 + i)**(counter-1)+ ir)+omPlant)/productionPlant*100

            # Formula
            lcoePlant = Divide(FormulaPart1, FormulaPart2)

            lcoePlantTotal = lcoePlantTotal + lcoePlant

            lcoePlantTotal.save = "D:\\02_ArcGIS\\Python" + str(lcoePlantTotal) + ".img"

print "lcoePlanttotal calculated" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:23:57.377

你需要避开你的反斜杠，你可以看到它认为你在说 hex-2。如果您查看错误消息中的最后一行，它会告诉您该文件不存在，并且它显示它的文件名与您提供的文件名不同。

```
>>> DNI =  "D:\02_ArcGIS\Python\LCOE_test"
>>> DNI
'D:\x02_ArcGIS\\Python\\LCOE_test'

>>> DNI =  "D:\\02_ArcGIS\\Python\\LCOE_test"
>>> DNI
'D:\\02_ArcGIS\\Python\\LCOE_test'
>>> print DNI
D:\02_ArcGIS\Python\LCOE_test 
```

# jquery - 您如何重排 Highslide 以使其保持居中？

> ID：15926481
> 
> 赞同：0
> 
> 时间：2013-04-10T12:56:00.710
> 
> 标签：jquery, highslide

我正在构建一个网站，该网站具有检查事物是否展开、折叠、添加、删除等的逻辑，当发生这种情况时，我们会得到 Highslide 扩展器并调用回流函数。就像是：

```
//Open Popup
top.hs.htmlExpand(null, {objectType:'iframe',src:url,align:'center'});

$(document).ready(function(){
  //start jquery function
    reflowPopup();
  //end jquery function
});

function reflowPopup() {
  if (top.hs != undefined) {
    var expander = top.hs.getExpander();
    if (expander) {
      expander.reflow();
    }
  }
} 
```

这很好用，但是它在加载时垂直/水平居中，但是当回流时，它会离开最初加载的顶部，并在回流时扩展/折叠底部。我希望它被平等地回流。所以如果要扩大20px，向上移动一半以保持垂直居中。最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:43:03.467

很抱歉，Highslide 没有在回流后居中弹出窗口的功能。

# nhibernate - NHibernate vs Entity Framework 5 自动连接实体

> ID：15926490
> 
> 赞同：3
> 
> 时间：2013-04-10T12:56:19.613
> 
> 标签：nhibernate, orm, entity-framework-5

最近我又回到了企业应用程序的 NHibernate 与 EF5 的问题。我知道许多重要的区别，但这个对我来说是最令人惊讶的。考虑两个经典实体 Customer 和 Order (1:n)：

```
public class Customer
{
    public Customer()
    {
        Orders = new HashSet<Order>();
    }

public virtual Guid Id { get; set; }
public virtual string Name { get; set; }

    **public virtual ICollection<Order> Orders { get; set; }**
}

public class Order
{
public virtual Guid Id { get; set; }
public virtual Guid CustomerId { get; set; }
public virtual string Number { get; set; }
public virtual DateTime Date { get; set; }

    **public virtual Customer Customer { get; set; }**
} 
```

NHibernate 和 EF5 都有双向映射。相应地在 DbContext 和 Session 的上下文中加载所有客户和所有订单的代码片段，用于 EF5 和 NHibernate：

```
 using (TestOrmForDalDbEntities context = new TestOrmForDalDbEntities())
        {
            context.Configuration.ProxyCreationEnabled = false;

            IQueryable<Customer> customers = context.Customers;
            customers.Load();

            IQueryable<Order> orders = context.Orders;
            orders.Load();
        }

using (ISession session = _sessionFactory.OpenSession())
{
    var customers = session.Query<Customer>().ToList();
    var orders = session.Query<Order>().ToList(); 
```

}

结果是：

EF5：每个客户都有一组适当的订单（EF5 自动连接它们） NHibernate：没有一个客户有一组适当的订单。即使每个订单都链接到适当的客户。

问题是：不以这种方式连接是 NHibernate 的想法还是我不知道如何配置 NHibernate？

NHibernate 的 PS 映射：

```
 public class CustomerMap : ClassMap<Customer>
{
    public CustomerMap()
    {
        Id(x => x.Id).UnsavedValue(Guid.Empty).GeneratedBy.Guid();
        Map(x => x.Name);
        HasMany(x => x.Orders).Cascade.All();
    }
}

public OrderMap()
    {
        Id(x => x.Id).UnsavedValue(Guid.Empty).GeneratedBy.Guid();
        Map(x => x.Number);
        Map(x => x.Date);
        Map(x => x.CustomerId);
        References(x => x.Customer); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-08T04:40:33.997

从客户到订单（HasMany）的关系应该是反向的，这意味着它是具有客户外键的订单端点。

# android - 缺少后置摄像头时如何允许Nexus7使用前置摄像头扫描条码

> ID：15926493
> 
> 赞同：3
> 
> 时间：2013-04-10T12:56:30.700
> 
> 标签：android, android-camera, barcode-scanner, android-camera-intent, zbar-sdk

我需要问一个与条形码扫描相关的问题，我正在使用一个扫描条形码并在网上搜索结果的应用程序。现在这是我创建相机对象实例的方法

```
 /** A safe way to get an instance of the Camera object. */
public static Camera getCameraInstance() {
    Camera c = null;
    try {
        c = Camera.open();
    } catch (Exception e) {
    }
    return c;
} 
```

对于扫描，我使用的是 Zbar 库。我的问题是关于设备 Asus Nexus 7。我目前没有那个设备，但我知道它只有前置摄像头，没有后置摄像头。如果设备只有前置摄像头而没有后置摄像头，如何使其工作？我的代码可以正常工作吗？如果我添加以下使用功能 android:name = "android.hardware.camera.front" android:required="false"

我的唯一目的是允许用户扫描条形码，如果有前后摄像头，它应该通过后置摄像头扫描，如果它只有前置摄像头，它应该只通过那个摄像头扫描，我该如何继续它？欢迎所有建议。:-D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:38:54.363

在Android 2.3之前，没有访问前置摄像头的API，所有设备摄像头都是后置摄像头。您使用的 API 调用是原始调用，为了兼容性，仍将只打开后置摄像头。在 Nexus 7 上，您将获得`null`.

您需要`Camera.open(int)`选择另一台相机。在 Nexus 7 上，因为只有一个摄像头，所以肯定会用`Camera.open(0)`. 但实际上，您需要询问所有可用的相机并选择您想要的相机。

zxing / Barcode Scanner的[源代码](https://code.google.com/p/zxing/source/browse/trunk/android/src/com/google/zxing/client/android/camera/open/GingerbreadOpenCameraInterface.java)显示了它如何打开后置摄像头，除非没有可用的，在这种情况下打开前置摄像头。

（请注意，如果您有[Barcode Scanner+](https://play.google.com/store/apps/details?id=com.srowen.bs.android)，您也可以在它们之间进行选择。）

# java - 使用 Spring 3.2 和 Mockito 进行控制器单元测试的上下文初始化问题

> ID：15926494
> 
> 赞同：1
> 
> 时间：2013-04-10T12:56:32.253
> 
> 标签：java, spring-mvc, mockito

我正在尝试为我的控制器提供一个干净的单元测试。这个控制器有一个服务作为依赖，这个服务有一个数据源作为依赖。

测试看起来像这样：

```
@RunWith(SpringJUnit4ClassRunner.class)
@WebAppConfiguration
@ContextConfiguration
public class ContentActionWebServiceControllerTest {
  @Autowired
  private WebApplicationContext wac;

  private MockMvc mockMvc;

  @Autowired
  private MyService myService;

  @Test
  public void getRequestActionList() throws Exception {
    when(...)
    perform(...);
    verify(...);
  }

  @Configuration
  @ImportResource("...")
  static class MyTestConfiguration {

    @Bean
    public MyService myService() {
      return Mockito.mock(MyService.class);
    }
  }
} 
```

MyService 类似于

```
@Service
public class MyService {
  @Autowired
  private MyDataSource myDatasource;

  ...
} 
```

因为 MyService 作为 Autowired 属性 MyDataSource，所以上下文没有被初始化，因为它没有找到任何满足 MyService 的 @Autowired 注解的 MyDataSource 类型。但是为什么它会尝试解决这个注释呢？这是模拟吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T21:00:49.397

Mockito 确实使用 cglib 来创建一个新的子类`MyService`（并用模拟方法覆盖所有方法）。

但是仍然会注入父级的依赖项，因为这是 Spring 的工作方式：

如果你有一个包含一些`@Autowired`字段的父类，以及一个继承自这个父类的子类，那么 Spring`@Autowired`在实例化子类时会注入父类的字段。我想在你的情况下这是相同的行为。

如果您使用接口`MyService`，那么您的问题将得到解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T21:21:38.910

如果它应该是一个单元测试（而不是一个集成测试），你甚至不需要使用 Spring，你可以用 JUnit+Mockito 来完成。您可以简单地创建支持对象的模拟（通过）并将它们注入到被测试者（通过），而不是`@Autowire`从 Spring 上下文中获取依赖项。我相信您的代码可以简化为（从概念上）如下所示：`@Mock``@InjectMocks`

```
@RunWith(MockitoJUnitRunner.class)
public class ContentActionWebServiceControllerTest {

  @Mock
  private Service mockServiceUsedByController;

  @InjectMocks
  private YourController testee;

  @Test
  public void getRequestActionList() throws Exception {
    assertFalse(testee.getRequestActionList().isEmpty());
    // etc.
  }
} 
```

# linux - 如何在运行中解析 linux 嗅探器结果？

> ID：15926498
> 
> 赞同：0
> 
> 时间：2013-04-10T12:56:42.990
> 
> 标签：linux, sniffer, tshark

我想排序并计算客户端从我的服务器下载了多少文件（3 种类型）。

我安装`tshark`并运行了应该捕获`GET`请求的以下命令：

```
`./tshark  'tcp port 80 and (((ip[2:2] - ((ip[0]&0xf)<<2)) - ((tcp[12]&0xf0)>>2)) != 0)' -R'http.request.method == "GET"'` 
```

所以嗅探器开始工作，每一秒我都会得到新的一行，结果如下：

```
 0.000000 144.137.136.253 -> 192.168.4.7  HTTP GET /pids/QE13_593706_0.bin HTTP/1.1
 8.330354 1.1.1.1 -> 2.2.2.2  HTTP GET /pids/QE13_302506_0.bin HTTP/1.1
 17.231572 1.1.1.2 -> 2.2.2.2  HTTP GET /pids/QE13_382506_0.bin HTTP/1.0
 18.906712 1.1.1.3 -> 2.2.2.2  HTTP GET /pids/QE13_182406_0.bin HTTP/1.1
 19.485199 1.1.1.4 -> 2.2.2.2  HTTP GET /pids/QE13_302006_0.bin HTTP/1.1
 21.618113 1.1.1.5 -> 2.2.2.2  HTTP GET /pids/QE13_312106_0.bin HTTP/1.1
 30.951197 1.1.1.6 -> 2.2.2.2  HTTP GET /nginx_status HTTP/1.1
 31.056364 1.1.1.7 -> 2.2.2.2  HTTP GET /nginx_status HTTP/1.1
 37.578005 1.1.1.8 -> 2.2.2.2  HTTP GET /pids/QE13_332006_0.bin HTTP/1.1
 40.132006 1.1.1.9 -> 2.2.2.2  HTTP GET /pids/PE_332006.bin HTTP/1.1
 40.407742 1.1.2.1 -> 2.2.2.2  HTTP GET /pids/QE13_452906_0.bin HTTP/1.1 
```

我需要做些什么来存储结果类型并像`/pids/*****.bin`其他文件一样计数。我在 linux 上不强，但可以肯定它可以用 1-3 行脚本来完成。

也许有，`awk`但我不知道读取嗅探器结果的技术是什么。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:39:55.563

你不能只是 grep 你的网络服务器的日志文件吗？

无论如何，要提取与您的服务器文件相关的捕获的 http 流量行，只需尝试使用

```
./tshark  'tcp port 80 and \
           (((ip[2:2] - ((ip[0]&0xf)<<2)) - ((tcp[12]&0xf0)>>2)) != 0)' \
           -R'http.request.method == "GET"' | \
  egrep "HTTP GET /pids/.*.bin" 
```

# android - Android 处理程序重置

> ID：15926502
> 
> 赞同：0
> 
> 时间：2013-04-10T12:56:48.990
> 
> 标签：android, handler, reset

我使用以下代码和处理程序在我的设备完全平坦（加速度计 x，y 值）后 5 秒后产生哔声。如果设备仍然平坦，则声音每 5 秒再现一次。问题是代码第一次可以正常工作，我将设备放平，但如果它不平并尝试再次放平，则处理程序不起作用并且声音立即产生并遵循“lastBip”语句. 我想每次设备**不平整**时我都必须尝试**重置处理程序****但是我不知道怎么做。我想要的是，当我的设备平坦时，声音应该在我的应用程序运行的所有时间后 5 秒后工作，而不仅仅是我第一次打开它时。有人知道我必须对我的代码进行哪些更改才能正常工作吗？先感谢您..**

 **```
 handler.postDelayed(new Runnable() {
   @Override
   public void run() {

    if (x > -0.1 && x < 0.1 && y > -0.1 && y < 0.1 && System.currentTimeMillis() - lastBip > bipRate) {

        AudioManager mgr = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
        float streamVolumeCurrent = mgr.getStreamVolume(AudioManager.STREAM_RING);
        float streamVolumeMax = mgr.getStreamMaxVolume(AudioManager.STREAM_RING);
        float volume = streamVolumeCurrent / streamVolumeMax;
        lastBip = System.currentTimeMillis();
        soundPool.play(bipSoundID, volume, volume, 1, 0, 1);

    }

   }

 }, 5000); 
```**

# javascript - 从二维数组 jQuery 中提取数据时遇到问题

> ID：15926504
> 
> 赞同：0
> 
> 时间：2013-04-10T12:56:51.703
> 
> 标签：javascript, jquery, multidimensional-array

我使用 Ajax 运行 PHP 脚本以返回数据库中的记录。在 Ajax 调用成功后，我设法将 2D 数组检索到我的 JavaScript 文件中。然后我调用一个函数。

在函数中，我想从数组中提取数据并将它们保存到 JavaScript 变量中。

我正在使用 jQuery，所以我假设我必须使用`$.each`?

这是我从 ajax 调用收到的响应：

```
[{"level":"1","location":"4554","quantity":"2","game_item_id":"1"},{"level":"1","location":"4554","quantity":"1","game_item_id":"5"}] 
```

我要做的是从这个二维数组中提取关卡、位置数据并将其保存到 JavaScript 中的关卡和位置变量中。

`game_item_id`此外，您可以看到被发回的两条记录除了和之外是相同的`quantity`。我想将`game_item_id`s 及其相关`quantity`值的列表保存到数组或变量中。

**编辑** 感谢答案，我设法将级别和位置数据保存到变量中。但是我仍然对如何存储每个游戏项目 ID 和每个项目的数量感到困惑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:01:43.563

说你的对象被命名`data`...使用循环

```
$.each(data,function(i,v){
   console.log(v.level);
   console.log(v.location);
 }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:58:49.143

那这个呢 ;

```
data[1].level 
```

您可以像这样遍历每个数组

```
data = $.parseJSON(data); // if data is not in json
$.each(data, function(item, value) {
   alert(value.level);
   alert(value.location);
   alert(value.game_item_id);
   alert(value.quantity);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:11:39.563

嗨，请参考下面的代码以获取数组中的 id 和数量::

```
var list =
[{"level":"1","location":"4554","quantity":"2","game_item_id":"1"},{"level":"1","location":"4554","quantity":"1","game_item_id":"5"}];

var arrGameIdAndQuantity = new Object();

for(i=0;i<list.length;i++){    
    id = list[i]["game_item_id"];
    qty = list[i]["quantity"];    
    arrGameIdAndQuantity[id] = qty;
}

alert(JSON.stringify(arrGameIdAndQuantity)) 
```

# api - JIRA 插件中的 Rest 资源 API

> ID：15926505
> 
> 赞同：0
> 
> 时间：2013-04-10T12:56:52.273
> 
> 标签：api, rest, jira, jira-plugin, jira-rest-java-api

是否可以在 JIRA 插件中创建 Rest Resource API 或者必须创建单独的 refapp 并在 JIRA 插件项目中引用？

[https://developer.atlassian.com/display/DOCS/Developing+a+REST+Service+Plugin#DevelopingaRESTServicePlugin-Step6.Adjustthetestcode](https://developer.atlassian.com/display/DOCS/Developing+a+REST+Service+Plugin#DevelopingaRESTServicePlugin-Step6.Adjustthetestcode)

其余 api 方法访问的 url 是什么？我的意思是它是如何组成使用的。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:46:32.733

如发现的那样，是的，这是可能的。按照以下教程在 jira 项目中添加 REST RESOURCE 模块。

[https://developer.atlassian.com/display/DOCS/REST+Plugin+Module](https://developer.atlassian.com/display/DOCS/REST+Plugin+Module)

以下是与休息资源服务的 URL 组合相关的另一个票证： [https ://answers.atlassian.com/questions/156650/development-in-jira-plugin-how-to-use-rest-api-in-velocity-template -通过-json](https://answers.atlassian.com/questions/156650/development-in-jira-plugin-how-to-use-rest-api-in-velocity-template-through-json)

谢谢你，达瓦尔索尼

# php - 使用 MySQL 和 PHP 计算字段中每个值的数量

> ID：15926507
> 
> 赞同：4
> 
> 时间：2013-04-10T12:56:54.013
> 
> 标签：php, mysql, count

我已经多次看到这个问题，但我不知道如何显示结果。我有一个电影数据库，我希望在单个 MySQL 查询中的顶部菜单中计算每种类型的电影，所以我的菜单将显示如下：

```
Total Movies (300)
Drama (50)
Comedy (75)
Thriller (30)
...and so on... 
```

我在这个站点上找到了一些 MySQL 查询，但没有人指定如何在 SQL 查询之后处理计数。像这样的东西可能会起作用：

```
select genre, count(*) from movies group by genre 
```

但是之后如何显示每个值的计数？非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T12:59:19.787

别名 count 部分，以便您有一个易于访问的列名：

```
SELECT genre, count(*) AS nb_movies FROM movies GROUP BY genre 
```

然后你可以像访问它`$row['nb_movies']`。

如果没有别名，聚合列将采用生成它的聚合函数调用的名称，因此在您的情况下，它将像`$row['count(*)']`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:02:41.190

尝试

```
select genre, count(*) AS total from movies group by genre 
```

使用总计作为您的计数，例如。

```
echo $result['total']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:59:45.383

尝试这个，

```
SELECT genre, count(*) AS total_genre_movies FROM movies GROUP BY genre 
```

现在你可以像访问`$result['total_genre_movies']`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T13:00:15.453

如果您为 count(*) 的结果加上别名会更容易

```
select genre, 
       count(*) as total
  from movies 
 group by genre 
```

然后，您可以访问它，就像您以与引用完全相同的方式`$row['total']`获取结果一样`$row``$row['genre']`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T13:00:29.343

```
 select genre, count(*) as genre_count from movies group by genre 
```

现在你可以访问像 $result['genre_count']

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T13:01:03.543

尝试这个，

```
$result = mysql_query("select genre, count(*) as genre_count from movies group by genre");

while($row = mysql_fetch_array($result)) {

   $genre       = $row['genre'];
   $genre_count = $row['genre_count'];

} 
```

# iphone - 通过检查数组计数来防止数组索引崩溃，是否存在任何性能问题？

> ID：15926510
> 
> 赞同：1
> 
> 时间：2013-04-10T12:56:59.723
> 
> 标签：iphone, ios, crash

为了避免崩溃问题，如果我在访问每个索引之前检查数组计数，如下面的代码，那么是否存在任何性能问题？对于大型应用程序来说，这是一个好习惯还是坏习惯？

我的代码是：

```
-(BOOL)checkIndexAvailability:(NSArray *)array_ withIndex:(int)index_
{
    if ((array_.count-1)>=index_) {
        return TRUE;
    }
    return FALSE;
} 
```

当我访问我这样调用的任何数组时：

```
if ([self checkIndexAvailability:regDataArray withIndex:2]) {
    lastName = [regDataArray objectAtIndex:2];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:13:03.067

我建议只做一个快速的内联检查，让它更好一点。像这样的东西：

```
lastName = (regDataArray.count - 1 > 2) ? [regDataArray objectAtIndex:2] : nil; 
```

尽管您不会注意到与您或我的方式有任何不同的速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:37:48.817

在 Alladanian、brainLikeApple 和 Kris Gellic 的回答的帮助下，我了解到可以通过以下方式解决防止数组索引越界崩溃问题：

```
int arrayCount = [regDataArray count];

NSString *lastName = ( 2 <arrayCount) ? [regDataArray objectAtIndex:2] : @"Last Name Not Found";
NSString *address = ( 4< arrayCount) ? [regDataArray objectAtIndex:4] : @"No Address Found"; 
```

不需要每次都创建另一个方法或访问数组计数方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:05:47.940

我认为这样做不应该耽误你的应用程序。

但是请考虑到，当您编程时，如果事情以正确的方式完成，您的程序永远不应该尝试获取不存在的数组位置的东西。

您可以找到更多信息[边界检查](http://en.wikipedia.org/wiki/Bounds_checking)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T13:17:27.030

我认为它可以封装在类别中。或者，您可以使用运行时库更改标准实现。如果您在调试模式下添加诸如断言之类的东西也会很棒，这样您就不会在实现中隐藏发送错误索引的问题。PS我认为它不会显着影响性能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T13:31:13.930

我认为没有任何理由添加这样的检查，因为`NSArray`已经进行了类似的检查。`index`无效时会引发异常。

现在，也许你在问为什么我认为引发异常比默默地跳过更好`objectAtIndex`。好吧，如果你试图索引一些不存在的东西，那就是一个错误。默默地跳过代码只会对您隐藏错误。

# javascript - 如何通过 javascript 从 asp 服务器脚本中获取会话变量

> ID：15926513
> 
> 赞同：2
> 
> 时间：2013-04-10T12:57:03.473
> 
> 标签：javascript, asp-classic

我是 javascript 世界的新手，并且有一个简单的测试来读取 javascript 中的会话变量：

我的asp文件：

```
<%@LANGUAGE="VBSCRIPT" CODEPAGE="65001"%>
<%
Session("id")=1234
Session("code")="ZZ"
%> 
```

我的html文件：

```
<html>
<head></head>
<body>
<script type="text/javascript" src="asp/testSession.asp">
    alert("Session ID " + Session("id"));
</script>
</body> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T12:59:24.557

所有 ASP 代码都必须放在要在服务器端处理的标签`<%`之间：`%>`

```
alert("Session ID " + <%=Session("id") %>);
                      ^^^ add tags     ^^ 
```

此外，您可以`<%=`用作输出变量的快捷方式。它是 的缩写`Response.Write`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:01:11.487

您不能以您的方式混合使用 javascript 和 asp。Javascript在本地执行，而asp由服务器编译然后发送到您的浏览器。

当页面到达您的浏览器时，只剩下 asp 编译的产品。为了使用或打印该值，您应该执行以下操作：

```
<html>
<head></head>
<body>
<script type="text/javascript" src="asp/testSession.asp">
    alert("Session ID " + <%=Session("id")%>);
</script>
</body> 
```

# infopath2010 - Infopath 表单，多个绑定到一个控件

> ID：15926514
> 
> 赞同：0
> 
> 时间：2013-04-10T12:57:04.773
> 
> 标签：infopath2010

我想设计一个有重复表的信息路径表单。该表使用 Web 服务在表单加载时将数据加载到其中（以接收数据）。问题是用户必须能够修改此数据并使用另一个 Web 服务（提交数据）在表单提交时将其发送回服务器。

现在我需要多个绑定之类的东西，以便控件绑定到 Web 服务数据源以接收数据，并绑定到表单数据源，以便其他 Web 服务（提交）将表单数据发送到服务器。

我尝试使用单个值控件（不重复值）来做到这一点，我设法通过将控件绑定到表单数据源字段并将该字段的默认值设置为我的 Web 服务（接收）字段来做到这一点。但我不能对重复表执行此操作，因为每次加载表单时，我都会得到一个包含一行的表（无论 Web 服务返回多少行），其中填充了 Web 服务返回的第一行的数据，并单击添加行按钮将导致另一行具有与第一行相同的数据。

请帮我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T05:33:10.307

我自己找到了解决方案。我必须在表单上放置一个重复表并将其绑定到表单域。使用 Web 服务数据源提取数据，我在表单加载事件后面添加一些代码，以使用从 Web 服务数据源中提取的数据设置字段（绑定到重复表）的值。代码非常简单，您可以找到很多线程来证明这一点。

就我而言，它是一个共享点站点，我想将表单部署到该站点。将带有代码的信息路径表单部署到共享点站点存在困难。“纳德”有一个非常有用的帖子，其中包含一步一步的过程： http: [//nader.elshehabi.com/2011/08/how-to-really-deploy-infopath-2010-forms-with-code-背后作为一个功能/](http://nader.elshehabi.com/2011/08/how-to-really-deploy-infopath-2010-forms-with-code-behind-as-a-feature/)

# c++ - 尝试读取或写入受保护的内存。这通常表明其他内存已损坏

> ID：15926515
> 
> 赞同：1
> 
> 时间：2013-04-10T12:57:10.850
> 
> 标签：c++, pointers, dll

我正在研究一些蛮力算法的实现，这似乎是一个基本问题，但我无法让它工作。

以下代码行中断程序：

```
found[next] = j; 
```

数组声明：

```
int* found = new int[30]; 
```

j 是在 for 循环中增加的计数器。found[0] = 0 之类的代码可以正常工作。如果我将变量用于索引和值，它会崩溃。Visual Studio 2012 中的错误是“尝试读取或写入受保护的内存。这通常表明其他内存已损坏”。

我使用 int* 因为它在我与 c# 应用程序一起使用的 c++ dll 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:07:06.243

You need to control the value of next. Most probably, it is going out of bounds of your array

# javascript - 在 Highcharts 中分组图例

> ID：15926516
> 
> 赞同：9
> 
> 时间：2013-04-10T12:57:11.640
> 
> 标签：javascript, highcharts

我有两个堆叠的条形图，但是（两个条形的）所有图例都显示在一起。我想根据堆叠在栏中的项目对图例进行分组。有人能帮我吗？

```
$(function () {
        $('#container').highcharts({

            chart: {
                type: 'bar'
            },

            title: {
                text: 'Total fruit consumtion, grouped by gender'
            },

            xAxis: {
                categories: ['Apples', 'Oranges', 'Pears', 'Grapes', 'Bananas']
            },

            yAxis: {
                allowDecimals: false,
                min: 0,
                title: {
                    text: 'Number of fruits'
                }
            },

            tooltip: {
                formatter: function() {
                    return '<b>'+ this.x +'</b><br/>'+
                        this.series.name +': '+ this.y +'<br/>'+
                        'Total: '+ this.point.stackTotal;
                }
            },

            plotOptions: {
                bar: {
                    stacking: 'normal'
                }
            },

            series: [{
                name: 'John',
                data: [5, 3, 4, 7, 2],
                stack: 'male'
            }, {
                name: 'Joe',
                data: [3, 4, 4, 2, 5],
                stack: 'male'
            }, {
                name: 'Jane',
                data: [2, 5, 6, 2, 1],
                stack: 'female'
            }, {
                name: 'Janet',
                data: [3, 0, 4, 4, 3],
                stack: 'female'
            }]
        });
    }); 
```

我有类似的酒吧。我想将珍妮特和简归为一组，将乔和约翰归为另一组。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-10T14:30:35.897

根据您链接到的参考示例，您可以使用版本 3 中的新系列“linkedTo”属性来执行此操作。

[http://api.highcharts.com/highcharts#plotOptions.series.linkedTo](http://api.highcharts.com/highcharts#plotOptions.series.linkedTo)

更新示例：http: [//jsfiddle.net/jlbriggs/6gw5P/2/](http://jsfiddle.net/jlbriggs/6gw5P/2/)

```
linkedTo:':previous' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-11T16:14:55.200

我知道这是一个老问题，但是在你的系列上设置 showInLegend 会起作用，而且似乎是最简单的方法。

```
showInLegend: false 
```

例如：

```
series: [{
 name: 'John',
 data: [5, 3, 4, 7, 2],
 stack: 'male',
 showInLegend: false
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:14:57.363

您不能按堆栈对图例进行分组，因为那样您将失去识别不同组件的能力（即，单个系列将没有不同的颜色，或者图例颜色与它们不匹配）。图例映射到人们，因为这些都是不同的数据源，并且由于您以这种方式添加它们，因此它会像那样显示它们。

如果您不关心具有不同颜色的不同组件，那么您根本不需要堆叠条形图。你可以有一个正常的条形图，有 2 个系列，男性和女性。

```
series: [{
                name: 'Male',
                data: [10, 7, 8, 9, 7]
            },
                name: 'Female',
                data: [5, 5, 10, 6, 4]
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-07T12:07:49.203

您可以使用 ids 和`linkedTo`. 在下面的示例中，第一个系列链接到第二个系列：

```
series: [
        {
            type: 'column',
            name: '',
            data: [],
            linkedTo: 'second_serie_id',            // <--- this
            color: '#DE3733',
            pointWidth: 1,
            showInLegend: false,
        },
        {
            id: "second_serie_id",                  // <--- this
            type: 'scatter',
            name: 'FFT 1',
            data: [],
            color: '#DE3733',
            lineWidth: 0,
            showInLegend: true,
            states: { hover: { enabled: false } }
        }
        ] 
```

# php - Symfony2 & Assetic：路径“assetic.bundles.0”的配置无效：“AcmeSiteBundle”不是有效的捆绑包

> ID：15926518
> 
> 赞同：1
> 
> 时间：2013-04-10T12:57:24.650
> 
> 标签：php, symfony, assetic

我正在处理另一个开发人员给我的项目。我的任务是将硬编码的资产引用转换为资产引用。当我尝试运行时`app/console assets:install`，出现以下错误：

> [Symfony\Component\Config\Definition\Exception\InvalidConfigurationException]
> 路径“assetic.bundles.0”的配置无效：“AcmeSiteBundle”不是有效的捆绑包。

我注意到在 中没有该捆绑包的目录`web/bundles`，所以我只是跑来`mkdir acmesite`创建它。不幸的是，问题仍然存在。

我的**config.yml**看起来像：

```
# Assetic Configuration
assetic:
    debug:          %kernel.debug%
    use_controller: false
    bundles:        ['AcmeSiteBundle']
    #java: /usr/bin/java
    filters:
        cssrewrite: ~
        #closure:
        #    jar: %kernel.root_dir%/Resources/java/compiler.jar
        #yui_css:
        #    jar: %kernel.root_dir%/Resources/java/yuicompressor-2.4.7.jar 
```

不知道如何进行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:14:27.377

弄清楚了。捆绑类文件使用非标准名称。所以，而不是`AcmeSiteBundle.php`它只是`SiteBundle.php`

# c# - 将数据从 Access 复制到现有 SQL Server 表

> ID：15926522
> 
> 赞同：0
> 
> 时间：2013-04-10T12:57:41.957
> 
> 标签：c#, winforms

此代码将数据从访问 SQL Server 表中复制出来。但是这段代码有一些问题。

1.  此代码无法将数据从访问中复制到有数据的 SQL 服务器表。

我的 SQL Server 表有一些数据，我想在 SQL Server 表中的现有数据下添加来自访问的数据。

如何将数据添加到现有表？

2.  无法从 access 2007 或 2010 读取数据。

如何从 access 2007/2010 读取数据

```
OpenFileDialog openfiledialog1 = new OpenFileDialog();
         openfiledialog1.Title = "select access file";

            openfiledialog1.Filter = "Access 2003 (*.mdb)|*.mdb|Access 2007|*.accdb";
            if (openfiledialog1.ShowDialog() == DialogResult.OK)
            {

                string connectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + openfiledialog1.FileName;
                const string connectionStringDest = @"server=ahmad-pc\anfd;database = phonebook;Integrated Security = true";
                using (var sourceConnection = new OleDbConnection(connectionString))
                {
                    sourceConnection.Open();

                    var commandSourceData = new OleDbCommand("SELECT * from numberperson", sourceConnection);
                    var reader = commandSourceData.ExecuteReader();

                    using (var destinationConnection = new SqlConnection(connectionStringDest))
                    {
                        destinationConnection.Open();

                        using (var bulkCopy = new SqlBulkCopy(destinationConnection))
                        {

                            bulkCopy.ColumnMappings.Add("name", "nameperson"); //THIS A MAPPING REPLACE IT WITH YOUR NEED
                            bulkCopy.ColumnMappings.Add("family", "family1");
                            bulkCopy.DestinationTableName = "profile2";

                            try
                            {
                                bulkCopy.WriteToServer(reader);
                            }
                            catch (Exception ex)
                            {
                                Console.WriteLine(ex.Message);
                            }
                            finally
                            {
                                reader.Close();
                            }
                        }
                    }
                    MessageBox.Show("success");
                }

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:08:11.270

SQLBulkCopy only does Bulk inserts so any existing data should not be modified.

For MS Access > 2003 you'll need to use Microsoft ACE instead of JET

# c++ - c ++测试缺少的回调函数

> ID：15926524
> 
> 赞同：0
> 
> 时间：2013-04-10T12:57:55.360
> 
> 标签：c++, exception, callback

编辑：在回调模板中添加了反引号。界面将星号读取为降价指标，而不仅仅是星号！

在我正在编写的 Windows DLL/Linux SO 中，我为用户应用程序提供了一种注册回调函数的方法。效果很好。回调原型看起来像`(void)(*callback)(void*);`

我在编写文档时有点偏执，并意识到，我没有真正好的方法来知道注册地址是否有效。唯一的反馈是崩溃或在 try/catch 中调用回调。

我不知道如果回调不存在并且谁知道执行了什么会引发什么异常。甚至不确定对“无处”的调用是否可以恢复到足以生成异常而不是崩溃的程度。

是的，我知道这是用户的问题。只是想深思熟虑，也许可以帮助用户理解他的错误。

那么，这会抛出什么异常呢？如果 Windows 和 Linux 不同，请回答。

或者，有没有更好的方法来解决这个问题，而不必使用异常捕获来检测丢失的函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T13:03:53.327

没有办法恢复。同样，如果回调包含类似`*(int*)(0x1234) = 5;`. 忍受它。

作为 C++ 库开发人员，您的职责不是确保不会发生任何崩溃。您只需提供代码，当使用您记录的方式时，它会实现它所承诺的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T13:06:15.930

有点跑题了，但形式为 的回调`void(*)()`，即采用 0 个参数，用处不大。一个有用的 C 风格回调接受用户指定的参数，以便用户可以找到对应于回调的状态。例如：

```
typedef void callback_fn(void* user_arg);

callback_id register_callback(callback_fn* callback, void* user_arg);
void unregister_callback(callback_id); 
```

没有`user_arg`你的回调的用户将被迫使用一个全局变量来存储对应于回调函数的状态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T13:08:01.777

你描述的情况不太可能。我从来没有在任何地方看到过这样的处理。该程序只会崩溃并毁掉它的用户。

但是您的担忧是有道理的，因为失败的根本原因（分配错误的地址）及其表现形式（调用无效地址）可能彼此相距甚远，以至于很难识别它。

我在这里只能建议“快速而响亮地失败”。例如，您可以在分配回调时对其进行测试调用。这仍然会导致崩溃，但现在在堆栈跟踪中，用户将看到这一切是从哪里开始的。

同样，这不是普通图书馆用户所期望的……

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T13:05:26.050

正如我在这里回答的：

[如何测试实例是否损坏？](https://stackoverflow.com/questions/15926263/c-how-to-test-if-an-instance-is-corrupted) （完全不同类型的问题，但同样适用）

如果指针是“不可识别的 NULL 或类似的”，那么在代码中就无法判断它是否有效。

您也不能使用`try/catch`捕获失败，因为“执行代码失败”不会导致抛出。

由于这是一个“程序员错误”，我不认为这是一个大问题。无论如何，程序员都可以用自己的代码做他们喜欢的事情，所以无论你添加什么机制，都可以以某种方式规避。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T13:26:33.797

就像其他人所说的，没有办法检查，但是……真的有必要吗？我完全赞成防御性编程，但唯一可能获得指向函数的指针（空指针除外）的方法是获取函数的地址。一些编译器*会*允许将指向对象的指针显式转换为指向函数的指针，尽管标准在这种情况下需要诊断。但即便如此，客户端代码也需要显式转换才能搞砸。与对象不同，函数在程序的整个生命周期中都存在，因此悬空指针不会有问题——一个曾经有效但不再有效的指针。实际上，除了故意之外，几乎没有办法获得指向函数的无效指针（我唯一想到的方法是使用函数卸载 DLL），如果有人故意想搞砸，那就没有办法了你将能够阻止它。

# mysql - 如何在magento中执行大型sql查询？

> ID：15926525
> 
> 赞同：4
> 
> 时间：2013-04-10T12:57:55.377
> 
> 标签：mysql, magento

我想在数据库中存储大量内容，当我尝试执行此查询时，我的示例文本长度为 16129 个字符，它在 Firefox 中显示“错误：无法检索请求的 URL”，在 chrome 中显示“未收到数据”。

此外，我`LONGTEXT`用作数据库中文本的数据类型。

我还尝试直接在 phpmyadmin 中执行查询，它工作正常。

代码如下所示。

```
public function _getConnection($type = 'core_write') {
        return Mage::getSingleton('core/resource')->getConnection($type);
    }

public function testdbAction(){
        $db = $this->_getConnection();
        $current_time=now();
        $text="The European languages are members of the same family......  ...Europe uses the same vocabulary. The ";//text is 16129 characters in length
        $sql = "INSERT into test(`usercontent_id`,`app_id`,`module_id`,`customer_id`,`content`,`created_time`,`updated_time`,`item_id`,`index_id`,`position_id`) VALUES (NULL, 15, 9,2,'" .$text. "','" . $current_time . "','" . $current_time . "',1003,5,4)";
        $db->query($sql);        
    } 
```

我该如何处理？任何建议或帮助..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:19:18.520

尝试使用`$db->exec($sql)`而不是`$db->query($sql)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:03:33.527

对于操作数据库结构和数据，Magento 有一个专门的地方。它被称为安装/升级脚本。它用于跟踪模块版本以便于更新。所以你应该使用脚本来添加新数据。

这是一个例子。

模块的 config.xml：

```
 <modules>
    <My_Module>
        <version>0.0.1</version>
    </My_Module>
</modules>
<global>
    <resources>
        <my_module_setup>
            <setup>
                <module>My_Module</module>
                <class>Mage_Core_Model_Resource_Setup</class>
            </setup>
         </my_module_setup>
    </resources>
</global> 
```

现在，您需要创建以下文件：

`My_Module/sql/my_module_setup/install-0.0.1.php`

现在，根据您的 Magento 版本，文件需要具有不同的名称。如果您使用的是 Magento CE 1.4 或更低版本 (EE 1.8)，那么您应该将其命名为`mysql4-install-0.0.1.php`.

该脚本将在下一个网站请求时启动。类`Mage_Core_Model_Resource_Setup`将执行里面的代码`install-0.0.1.php`。在安装脚本中，您将可以使用`$this`对象访问 Setup 类；

所以现在，您可以在脚本中编写以下代码：

```
 $this->startSetup();

$text = <<<TEXT
YOUR LONG TEXT GOES HERE
TEXT;

$this->getConnection()
    ->insert(
        $this->getTable('test'),
        array(       
             'usercontent_id' => null,
             'app_id' => 15,
             'content' => $text,
             //other fields in the same fashion
        )
    );

$this->endSetup(); 
```

就是这样。这是在 Magento 中将自定义数据添加到数据库的一种干净且适当的方式。

如果您想使用表单定期保存用户输入，那么我建议创建 w 模型、资源模型和集合，在 config.xml 中定义实体。有关更多信息，请参阅 Alan Storm 的文章，例如[这篇](http://alanstorm.com/magento_models_orm)。

我希望我正确理解了你的问题。

# ruby-on-rails - Mongoid 嵌入文档自动保存（触发回调）父

> ID：15926526
> 
> 赞同：2
> 
> 时间：2013-04-10T12:57:55.500
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid

如果我有以下课程：

```
class Bar
  include Mongoid::Document
  embeds_many :foos, :cascade_callbacks => true
end

class Foo
  include Mongoid::Document
  embedded_in :bar, :inverse_of => :foos
end 
```

是否有可能以这样一种方式实现，即每当 Foo 被保存/更新时，它的父 Bar 就会自动保存（并特别调用它自己的 'before_save' 回调）。我想这样做，而不必将 Bar 的方法暴露给 Foo。

**即不这样做作为解决方案：**

```
class Bar
  include Mongoid::Document
  embeds_many :foos, :cascade_callbacks => true

  def update_stuff_on_bar
   # Stuff
  end
end

class Foo
  include Mongoid::Document
  embedded_in :bar, :inverse_of => :foos
  before_save :update_parent

  def update_parent
    bar.update_stuff_on_bar # <- We're having to use internals of Bar inside Foo. 
  end
end 
```

# php - 获取页面html源代码的更好方法

> ID：15926530
> 
> 赞同：4
> 
> 时间：2013-04-10T12:58:17.017
> 
> 标签：php

我试图通过过滤其源代码来获取网页上的一些数据，我发现了很多方法来获取网页的 html 内容，例如`$html = file_get_html('http://www.exam.com/results/');`curl **、** html **get source**。

获取页面的 html 源代码的最佳方法是什么？还是所有这些方法都一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:02:39.683

cURL 可能提供比`file_get_contents($url)`***** 更好的性能。我宁愿使用 cURL，因为所有这些功能最终都会检索某个网页内容，唯一的区别是运行时，正如我所说，使用 cURL 时更好。

*您可以在这里找到一个不错的（但不是正式的）证明，包括一个基准： [https ://stackoverflow.com/questions/555523/file-get-contents-vs-curl-what-has-better-performance](https://stackoverflow.com/questions/555523/file-get-contents-vs-curl-what-has-better-performance)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T13:05:18.430

这取决于您需要什么，但重要的是要记住，`curl`它将以文本形式返回响应，而`file_get_html`将返回一个`Simple_HTML_DOM`. 此外，我认为重要的是要注意幕后`file_get_html`调用`file_get_contents`。

就个人而言，我有一个温和的偏好，首先将数据加载到内存中（我发现它更容易调试），但我通常不喜欢使用`curl_*`，除非我需要在请求中发送某种标头（POST 变量或`WWW-Auth`标头等）。对于其他所有事情，我发现它会将单行函数调用变成一团糟。所以我一般都是靠`file_get_contents`.

至于`Simple_HTML_DOM`，我想知道它是否可能比 PHP 本机编译库更快。您可以使用[`simplexml_load_file`](http://php.net/manual/en/function.simplexml-load-file.php)或访问这些内容[`DomDocument::loadHTMLFile`](http://us2.php.net/manual/en/domdocument.loadhtmlfile.php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T13:10:04.330

正如@itamar 建议的那样，cURL 提供了更多的控制。它允许您设置一些使用 file_get_contents 无法设置的内容，包括：

*   代理使用
*   标头
*   永久 cookie 存储

它还允许您检索标题。

cURL 的使用相当复杂，但回报相当不错。建议是将其包装在一个函数中。我倾向于使用这个：

```
protected static function prepare_channel(Request $r) {
    $r->channel = curl_init();
    $p = array();
    foreach ($r->GET as $k => $v) {
        $p[] = $k."=".$v;
    }
    $head = array();
    foreach ($r->getHeaders() as $k => $v) {
        $head[] = $k.": ".$v;
    }
    curl_setopt($r->channel, CURLOPT_URL, $r->getURI()."?".implode("&",$p));
    curl_setopt($r->channel, CURLOPT_HTTPHEADER, $head);
    curl_setopt($r->channel, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($r->channel, CURLOPT_FORBID_REUSE, true);
    curl_setopt($r->channel, CURLOPT_RETURNTRANSFER, true);
    if (Request::getProxy()) {
        curl_setopt($r->channel, CURLOPT_PROXY, Request::getProxy());
    }
    curl_setopt($r->channel, CURLOPT_HEADER, true);
    return $r->channel;
} 
```

这是实时代码，我的`Request`对象具有以下签名：

```
protected $headers = array();
protected $baseURI = "";
public $GET = array();
public $POST = array(); 
```

运行`$result = curl_exec($r->channel);`返回标题和正文。然后，您可以使用以下方法拆分它们：

```
 $header_size = curl_getinfo($r->channel, CURLINFO_HEADER_SIZE);
 $headers = substr($result, 0, $header_size);
 $body = substr($result, $header_size); 
```

从那里，您可以自由地使用`$header`和做任何您喜欢的事情`$body`。您还可以通过运行 curl_getinfo($r->channel) 获得大量信息。

要在 PHP 中解析 HTML，最好先做两件事：

*   放宽`tidy`它以清除格式错误的标记
*   使用`DOMDocument`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T13:10:11.360

出于很多目的，一个 file_get_contents() 就足够了。但是在很多情况下，您需要特殊要求。

使用 PHP 流上下文：如果没有可用的 curl 并且您必须将 POST-Data 放入您的请求中，则可用

Curl：获取 HTTP 内容的瑞士军刀，通常效果最好。如果可能，您应该使用 curl 的一种特殊情况：如果您获取远程页面，您拥有的请求将被阻止。在这种情况下，您依赖于远程站点的性能。如果您使用像 Apache2 这样的网络服务器，其插槽数量有限，如果远程站点太慢或无法访问，它们可能会被填满。在这样的情况下，我经历了一些服务器宕机。Curl 通过为请求设置超时来帮助您。最好将其设置为低 3 秒。

但最好的方法是使用 cronjob 或类似的东西来获取外部内容，缓存它并使用缓存的版本。

# python - 删除特定的文本文件

> ID：15926531
> 
> 赞同：0
> 
> 时间：2013-04-10T12:58:17.443
> 
> 标签：python, python-2.7

```
import os 
folder = 'C:/Python27/Data'
for the_file in os.listdir(folder):
    file_path = os.path.join(folder, the_file)
    try:
        if os.path.isfile(file_path):
            os.unlink(file_path)
    except Exception, e:
        print e 
```

这是我用于从目录中删除文本文件的代码，但我想删除特定文件，根据一些关键字过滤它们。如果文本文件不包含单词“dollar”，则将其从文件夹中删除。应该对目录中的所有文件执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:08:20.907

If the files are rather small, then the following simple solution would be adequate:

```
if os.path.isfile(file_path): # or some other condition
    delete = True             # Standard action: delete
    try:
        with open(file_path) as infile:
            if "dollar" in infile.read(): # don't delete if "dollar" is found
                delete = False 
    except IOError:
        print("Could not access file {}".format(file_path))
    if delete: 
        os.unlink(file_path) 
```

If the files are very large and you don't want to load them entirely into memory (especially if you expect that search text to occur early in the file), replace the above `with` block with the following:

```
 with open(file_path) as infile:
            for line in file:
                if "dollar" in line:
                    delete = False
                    break 
```

# java - 无法从 Java 中的 StoredProc 获取结果集

> ID：15926534
> 
> 赞同：0
> 
> 时间：2013-04-10T12:58:29.577
> 
> 标签：java, sql-server, stored-procedures, jdbc

我们正在尝试在 Java 中执行存储过程，如下所示，

```
CREATE PROCEDURE [dbo].[MyProc] 
(
    @input1 varchar(20),
    @input2 varchar(20),
    @responsecode       varchar(10) output
)
AS

//Implementation

SELECT @a,@b,@c,@d;

SELECT @responsecode; 
```

Java 代码如下所示，

```
callableStatement = conn.prepareCall("{call MyProc("2","2"))}");
callableStatement.registerOutParameter(3, Types.VARCHAR);           
callableStatement.registerOutParameter(4,Types.JAVA_OBJECT); 
```

如您所见，我们试图从存储过程中获取两个输出参数，

我们能够在索引 3 处获得响应代码，但是 @a,@b,@c,@d 应该在索引 4 处作为结果集出现（可能是我错了）

你能否给我一些关于为这种存储过程获取结果集的提示。

当我在 Microsoft SQL Server Managment Studio 中执行这个存储过程时，我可以看到两种类型的响应，第一种是结果集，另一种是 ResponseCode，如下所示，

![在此处输入图像描述](https://i.stack.imgur.com/DfFzJ.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:11:33.500

您将结果集与输出参数混合在一起。您帖子中的存储过程只有一个输出参数，`@responsecode`.

在 proc 中设置输出参数后无需选择输出参数：

```
create procedure testsp (@param int output)
as
    set @param = 1

GO

declare @param int

exec testsp @param output

select @param 
```

因此，删除`SELECT @responsecode;`, 以及可调用语句中的第 4 个注册参数。

要获取您的数据，请遍历返回的结果集`executeQuery()`。

# scala - Scala 中难以理解的语法

> ID：15926536
> 
> 赞同：4
> 
> 时间：2013-04-10T12:58:32.333
> 
> 标签：scala, syntax

我在本文中找到了以下代码（[http://hseeberger.wordpress.com/2010/11/25/introduction-to-category-theory-in-scala/](http://hseeberger.wordpress.com/2010/11/25/introduction-to-category-theory-in-scala/)）。

```
trait GenericCategory[->>[_, _]] {
  def id[A]: A ->> A
  def compose[A, B, C](g: B ->> C, f: A ->> B): A ->> C
} 
```

我无法弄清楚特征名称旁边的语法

```
[->>[_,_]] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T13:07:50.910

It's a [higher-kinded type](https://stackoverflow.com/questions/6246719/what-is-a-higher-kinded-type-in-scala), described nicely in [this introduction](http://wiki.ifs.hsr.ch/SemProgAnTr/files/HigherKindGenericsInScala.pdf) and in this [research paper](http://adriaanm.github.io/files/higher.pdf).

The reason you might find it confusing is that `->>` is the name for the higher-kinded type -- it might have as well been called `Arrow` instead.

# android - 安卓 2.3 媒体播放器 MPEG AAC 音频

> ID：15926537
> 
> 赞同：0
> 
> 时间：2013-04-10T12:58:33.067
> 
> 标签：android, media-player, android-2.3-gingerbread

我正在尝试在 android 中播放从 iPhone 录制的音频。以下是在android中播放视频的源代码。该文件的扩展名为 MP4。

```
Uri savedUri = Uri.fromFile(savedUri_file);     
MediaPlayer mediaPlayer = MediaPlayer.create(MainActivity.this, getImageUri());
mediaPlayer.start(); 
```

MediaPlayer.create 返回一个空值。在 VLC 中，我检查了音频的编解码器信息。它是 MPEG AAC 音频 (mp4a)。

我需要在 android 2.3 中玩这个。在果冻豆中它工作正常。我也尝试在 2.3 中使用 videoview，它的工作原理。音频正在播放。

此外，当我尝试从 SD 卡播放相同的文件（通过点击 MP4 文件）时，它在默认播放器中播放。

但是当我尝试播放从 android 设备创建的音频时，它正在播放。从android创建的audion文件的编解码信息是AMR Narrow Band (samr)。

以下是用于创建音频的代码

```
NSMutableDictionary *defaultSettings = [[[NSMutableDictionary alloc] init]autorelease];
[defaultSettings setValue :[NSNumber numberWithInt:kAudioFormatMPEG4AAC] forKey:AVFormatIDKey];
[defaultSettings setValue:[NSNumber numberWithFloat:16000.0] forKey:AVSampleRateKey];
[defaultSettings setValue:[NSNumber numberWithInt: 1] forKey:AVNumberOfChannelsKey]; 
```

有什么提示吗？

# c# - 等到资源可用？

> ID：15926538
> 
> 赞同：0
> 
> 时间：2013-04-10T12:58:34.817
> 
> 标签：c#, asp.net

当我得到：

**该进程无法访问该文件，因为它正被另一个进程使用**

我正在开发一个网络应用程序，所以我可以从几个不同的应用程序同时访问这个文件。

```
bool isLock = false;
do
{
    try
    {
        File.WriteAllText(path, value, Encoding.Unicode);
        isLock = false;
    }
    catch
    {
        Thread.Sleep(30);
        isLock = true;
    }    
}while (isLock); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:38:53.623

当场景中有多个应用程序时，您的 lock 变量没有用。

而是测试您是否可以 File.OpenWrite 然后写入文件。如果您无法访问文件循环并等待或写入临时文件并启动另一个线程循环并等待，直到可以合并临时文件。

也许更好的办法是立即存储到 temp 并让看门狗写入您的存储文件。

```
public void SomeWhereInYourWebServerApplication
    {           
        FileSystemWatcher fsw = new FileSystemWatcher("tempfolder");
        fsw.Created += fsw_Created;

        // save new entries to tempfolder
    }

    void fsw_Created(object sender, FileSystemEventArgs e)
    {
      foreach (string file in Directory.GetFiles("tempfolder"))
        {
         try
           {
            string fileText = File.ReadAllText(file);
            File.AppendAllText("myStorage.txt", fileText);
            File.Delete(file);
           }
          catch
           {
              // for me it's ok when we try to append the file the next time
              // something new is coming
           }
        }
    } 
```

我认为很好很简单。

当涉及文件时，不要忘记进行适当的异常处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:32:44.887

如果您绝对*必须*这样做，并且您无法控制正在使用该文件的应用程序，那么您的代码几乎就在那里。

它只需要稍微健壮一点：

```
public static bool TryWriteText(string path, string text, TimeSpan timeout)
{
    Contract.Requires(path != null); // Or replace with: if (path == null) throw new ArgumentNullException("path");
    Contract.Requires(text != null); // Or replace with: if (text == null) throw new ArgumentNullException("text");

    Stopwatch stopwatch = Stopwatch.StartNew();

    while (stopwatch.Elapsed < timeout)
    {
        try
        {
            File.WriteAllText(path, text);
            return true;
        }

        catch (IOException){} // Ignore IOExceptions until we time out, then return false.

        Thread.Sleep(100); // 100ms is rather short - it could easily be 1000 I think.
    }                      // Perhaps this should be passed in as a parameter.

    return false;
} 
```

在超时时重新抛出最后一个的替代版本`IOException`（这可以说更好，因为您不隐藏所有异常）：

```
public static void TryWriteText(string path, string text, TimeSpan timeout)
{
    Contract.Requires(path != null); // Or replace with: if (path == null) throw new ArgumentNullException("path");
    Contract.Requires(text != null); // Or replace with: if (text == null) throw new ArgumentNullException("text");

    Stopwatch stopwatch = Stopwatch.StartNew();

    while (true)
    {
        try
        {
            File.WriteAllText(path, text);
        }

        catch (IOException)
        {
            if (stopwatch.Elapsed > timeout)
                throw;
        }

        Thread.Sleep(100);
    }
} 
```

但是您应该只将此类代码用作最后的手段。

# android - Android - 希伯来语语言环境在三星 S1 中不起作用

> ID：15926546
> 
> 赞同：0
> 
> 时间：2013-04-10T12:58:55.810
> 
> 标签：android, localization

我需要在希伯来语中以 dd/MM/yyyy 格式（全月名称）显示日期。在三星 s1 中 - 它向我显示英语语言环境，在摩托罗拉 Atrix 4G 中它工作正常（以希伯来语显示月份名称）。我在用着：

```
SimpleDateFormat dateFormat = new SimpleDateFormat(DATE_FORMAT, getLocale());

// I TRIED ALL THESE 3 LOCALES
private Locale getLocale() {
    return new Locale("he");
    //return new Locale("iw_IL");
    //return new Locale("iw");
} 
```

注意：即使电话默认语言环境不同，我也需要显示希伯来语。

如何为所有设备（具有希伯来语）实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:10:52.560

根据[谷歌](http://developer.android.com/reference/java/util/Locale.html)，`en_US ... is the only locale Java guarantees is always available.`

如果您知道无论底层平台提供什么，您都将需要希伯来语月份名称，您应该在您的应用程序中包含该数据。

# php - 文本提取器 php

> ID：15926549
> 
> 赞同：0
> 
> 时间：2013-04-10T12:59:07.457
> 
> 标签：php

我在另一个页面[test.php上有这个页面](http://inviatapenet.gethost.ro/sop/test.php)[test1.php](http://inviatapenet.gethost.ro/sop/test1.php)我有这个 php 代码正在运行：

```
 <?php 
    libxml_use_internal_errors(true); 
    $doc = new DOMDocument(); 
    $doc->loadHTMLFile("http://inviatapenet.gethost.ro/sop/test1.php"); 
    $xpath = new DOMXpath($doc); 
    $elements = $xpath->query("//*[@type='text/javascript']/@fid");
        if (!is_null($elements)) {
            foreach ($elements as $element) {
                $nodes = $element->childNodes;
                foreach ($nodes as $node) {
                    echo $node->nodeValue. "\n";
                }
            }
        }
?> 
```

但什么也没显示。

我试图从该页面获取，只有 fid="x8qfp3cvzbxng8e" 的内容：

从这条线

```
<script type="text/javascript"> fid="x8qfp3cvzbxng8e"; v_width=640;
v_height=360; </script> 
```

输出应为：

> x8qfp3cvzbxng8e

我必须做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:00:22.447

如果您只想要`fid`内容，请使用此正则表达式

```
 preg_match_all('~fid="(.*?)"~si',$Text,$Match);
 print_r($Match); 
```

样品的输出

```
 Array
(
   [0] => Array
    (
        [0] => fid="x8qfp3cvzbxng8e"
    )

   [1] => Array
    (
        [0] => x8qfp3cvzbxng8e
    )

) 
```

试试这个提取文本这不显示任何`script`内容但如果你想可以删除这个条件

```
 function extractText($node) {
     if($node==NULL)return false;    
     if (XML_TEXT_NODE === $node->nodeType || XML_CDATA_SECTION_NODE === $node->nodeType) {
         return $node->nodeValue;
     } else if (XML_ELEMENT_NODE === $node->nodeType || XML_DOCUMENT_NODE === $node->nodeType || XML_DOCUMENT_FRAG_NODE === $node->nodeType) {
       if ('script' === $node->nodeName) return '';

       $text = '';
       foreach($node->childNodes as $childNode) {
          $text .= extractText($childNode);
       }
       return $text;
     }
} 
```

样本

```
 $Text=file_get_contents("http://inviatapenet.gethost.ro/sop/test1.php");
 preg_match_all('~fid="(.*?)"~si',$Text,$Match);
 $fid=$Match[1][1];
 echo $fid; 
```

# c# - 如何在 NServiceBus 中通过 Castle.Windsor 注入 Log4Net 日志记录

> ID：15926551
> 
> 赞同：1
> 
> 时间：2013-04-10T12:59:18.380
> 
> 标签：c#, castle-windsor, log4net, nservicebus

我想`NServiceBus`使用`Castle.Windsor`容器提供的记录器，而不是自己直接提供。有没有办法做到这一点？以下不能作为启动时引发的异常。

```
public class EndPointConfig : IConfigureThisEndpoint, IWantCustomInitialization, IWantCustomLogging
{
    private ILogger _logger = NullLogger.Instance;
    public ILogger Logger
    {
        get { return _logger; }
        set { _logger = value; }
    }

    public void Init()
    {
        SetLoggingLibrary.Log4Net(null, Logger);
        Configure.With()
            .CastleWindsorBuilder(Host.Init.CreateSubsystems())
            .RunTimeoutManager()
            .UseNHibernateTimeoutPersister();
    }
} 
```

`Host.Init.CreateSubsystems()`返回一个`Castle.Windsor`带有注册记录器的容器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:06:50.247

如果您提供了一个容器，并且已经使用注册到 CastleWindsorBuilder 的 ILogger 进行引导，则无需执行任何其他操作：NServiceBus 将根据 log4net 配置使用您的记录器设置（根据容器中的记录器注册，在单独的文件或 app.config 中）

SetLoggingLibrary.Log4Net(null, Logger); 不需要。

```
public class MessageEndpoint : IConfigureThisEndpoint, AsA_Server, IWantCustomInitialization
{
    public void Init()
    {
        var container = new WindsorContainer();
        var installerFactory = new MyInstallerFactory();
        container.Install(FromAssembly.This(installerFactory));

        var logger = container.Resolve<ILogger>();
        logger.Debug("Container bootstrapped");

        Configure.With()
                 .DisableTimeoutManager()
                 .CastleWindsorBuilder(container)
                 .JsonSerializer();

        logger.Debug("Bus configured");
    }
} 
```

# r - 为什么使用 `{}` 的 R 代码比使用 `()` 的更快？

> ID：15926553
> 
> 赞同：5
> 
> 时间：2013-04-10T12:59:19.723
> 
> 标签：r

为什么 R 代码`{}`通常比`()`下面的例子快？

```
n=10000000
w1=numeric(n)
w2=numeric(n)
r=rnorm(n)

t1=Sys.time()
for(i in 1:n)
w1[i]=((r[i]^2))*(1*1)
t1-Sys.time()

t1=Sys.time()
for(i in 1:n)
w2[i]={{r[i]^2}}*{1*1}
t1-Sys.time() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T13:24:41.117

**baptiste**已经在评论中链接了*Radford Neal*的博客。
但是由于 SE 人不喜欢链接到外部网站，让我引用作者本人的一个有趣的评论（评论 33）：

> 是的，在 R 2.13.1 和最新的 R 2.14.1 中，括号仍然比大括号慢，尽管没有以前那么快（我建议减少内置函数中的一般开销的补丁在以后的版本中被引入，这减少了这种差异）。
> 
> 没有充分的理由让括号变慢。我建议进行另一项更改（仅几行代码），以加快括号的速度。Luke Tierney 回应说，这个补丁不应该被合并到 R 中，因为**括号就像 sqrt 一样是一个运算符**，因此在实现括号的代码中应该没有任何东西与像 sqrt 这样的运算符的实现方式不同。

知道这一点，`( )`似乎是一个运算符 - 很像一个基本上什么都不做的函数 -
而是`{ }`一个语言结构。
括号`( )`包含了所有运算符共有的一些开销代码，实际上它们不需要它们。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T13:42:16.080

Lukas 很好地回答了这个问题，但是对于那些感兴趣的人来说，这里有一些关于开销的时间安排（可以通过矢量化你的代码来有效地删除）。

```
brace <- function(n){
w1=numeric(n)
w2=numeric(n)
r=rnorm(n)
for(i in 1:n)
w1[i]=((r[i]^2))*(1*1)
}

curly <- function(n){
w1=numeric(n)
w2=numeric(n)
r=rnorm(n)
for(i in 1:n)
w2[i]={{r[i]^2}}*{1*1}
}

microbenchmark( curly(1e5) , brace(1e5) , times = 50 ) 
Unit: milliseconds
         expr      min       lq   median       uq      max neval
 curly(1e+05) 311.4245 318.8916 324.1990 335.0928 400.8555    50
 brace(1e+05) 315.5428 323.8860 328.7982 350.7268 406.5785    50 
```

1e5 循环长度大约有 5 毫秒的差异。所以让我们删除循环：

```
braceV <- function(n){
w1=numeric(n)
w2=numeric(n)
r=rnorm(n)
w1=((r^2))*(1*1)
}

curlyV <- function(n){
w1=numeric(n)
w2=numeric(n)
r=rnorm(n)
w2={{r^2}}*{1*1}
}

microbenchmark( curlyV(1e5) , braceV(1e5) , times = 50 )
Unit: milliseconds
          expr      min       lq    median       uq      max neval
 curlyV(1e+05) 9.014361 9.284532  9.666867 10.81317 37.82510    50
 braceV(1e+05) 9.029408 9.373773 10.293302 10.83487 37.76596    50 
```

现在的差异约为 0.5 毫秒。

# vb.net - 如何使用 Linq 获取服务器日期

> ID：15926556
> 
> 赞同：1
> 
> 时间：2013-04-10T12:59:25.200
> 
> 标签：vb.net, linq-to-sql

我想使用我的 linq to sql 获取服务器日期，所以我添加了 DataContext 类的部分类并添加了一个检索日期的方法：

```
Partial Public Class DBDataContext
    <Global.System.Data.Linq.Mapping.FunctionAttribute(Name:="GetDate", IsComposable:=true)> _
    Public Function GetSystemDate() As DateTime
        Dim mi As MethodInfo = TryCast(MethodBase.GetCurrentMethod()  ,  MethodInfo)
        Return CType(Me.ExecuteMethodCall(Me, mi, New Object()).ReturnValue, DateTime ) 'exception here
    End Function
End Class 
```

但我得到了这个我可以理解的异常：

> 指数数组的边界之外。

我哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:22:31.210

我不知道为什么，但添加大括号解决了这个问题。

```
Partial Public Class DBDataContext
    <Global.System.Data.Linq.Mapping.FunctionAttribute(Name:="GetDate", IsComposable:=true)> _
    Public Function GetSystemDate() As DateTime
        Dim mi As MethodInfo = TryCast(MethodBase.GetCurrentMethod()  ,  MethodInfo)
        Return CType(Me.ExecuteMethodCall(Me, mi, New Object(){}).ReturnValue, DateTime ) 'exception here
    End Function
End Class 
```

# sql - ORA 00937 在使用 INSERT INTO SELECT 时

> ID：15926557
> 
> 赞同：-1
> 
> 时间：2013-04-10T12:59:29.570
> 
> 标签：sql, oracle, oracle10g, oracle11g

当我在 select 语句中运行下面的 insert 时，我得到`ORA 00937`了因为下面的查询无法处理`APPLICATIONS`表上的子选择之一。我不想硬编码那个值。有什么建议么？

提前致谢。

```
insert into CONFIGURATION_PARAMETER_VALUES
( ID
, NAME
, DESCRIPTION
, DATA_TYPE
, VALUE_STRING
, VALUE_INTEGER
, VALUE_DATE
, VALUE_FLOAT
, VALUE_TIMESTAMP
, APPLICATION_ID
, DELETED
) 
select NVL(MAX(ID),0)+1
       , 'Alert_Statuses_AllExceptNoStatus'
       , 'Suspicious'
       , 'String'
       , 'RBS_EIM_AL_008'
       , null
       , null
       , null
       , null
       , (select ID from APPLICATIONS where name = 'Rabobank v 1.0.0.0')
       , 'N'
  from CONFIGURATION_PARAMETER_VALUES 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:30:04.100

如果还不算太晚，我建议实施 a`SEQUENCE`而不是计数。您可能不会得到严格的数字顺序（可能会有差距），但每次都会得到一个唯一的值：

```
CREATE SEQUENCE Config_Parm_Values_Seq START WITH <1 + your current max ID>; 
```

另请注意，您`INSERT`现在的行为将如下所示：

*   如果表中没有记录，则不会插入任何内容。
*   如果表中有记录，则每次执行它都会使表中的行数增加一倍。

因此，即使您不使用该序列，我也会考虑使用“普通旧”`INSERT`而不是`INSERT ... SELECT`. 此示例使用以下序列：

```
insert into CONFIGURATION_PARAMETER_VALUES
( ID
, NAME
, DESCRIPTION
, DATA_TYPE
, VALUE_STRING
, VALUE_INTEGER
, VALUE_DATE
, VALUE_FLOAT
, VALUE_TIMESTAMP
, APPLICATION_ID
, DELETED
) VALUES (
       Config_Parm_Values_Seq.NEXTVAL -- Use seqname.nextval to get
                                      -- the next value from the sequence
       , 'Alert_Statuses_AllExceptNoStatus'
       , 'Suspicious'
       , 'String'
       , 'RBS_EIM_AL_008'
       , null
       , null
       , null
       , null
       , (select MAX(ID) from APPLICATIONS where name = 'Rabobank v 1.0.0.0')
       , 'N') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:08:02.467

The problem is in your `SELECT` statement where you are using `SELECT NVL(MAX(ID), 0) + 1`. As you are using `MAX` function in the `SELECT` list, you must use a `GROUP BY`, which is not the solution here.

Use something like the following:

```
insert into CONFIGURATION_PARAMETER_VALUES
( ID
, NAME
, DESCRIPTION
, DATA_TYPE
, VALUE_STRING
, VALUE_INTEGER
, VALUE_DATE
, VALUE_FLOAT
, VALUE_TIMESTAMP
, APPLICATION_ID
, DELETED
) 
select (SELECT MAX(ID) FROM configuration_parameter_values) + 1
        -- above line instead of NVL(MAX(ID),0)+1
        -- You can also put NVL function around the subquery.
       , 'Alert_Statuses_AllExceptNoStatus'
       , 'Suspicious'
       , 'String'
       , 'RBS_EIM_AL_008'
       , null
       , null
       , null
       , null
       , (select ID from APPLICATIONS where name = 'Rabobank v 1.0.0.0')
       -- Warning: The above subquery can generate a TOO_MANY_ROWS exception.
       -- Use the solution in the other answer to avoid this.
       , 'N'
  from CONFIGURATION_PARAMETER_VALUES 
```

# command-line - 将参数化的文件夹名称传递给命令行

> ID：15926558
> 
> 赞同：-1
> 
> 时间：2013-04-10T12:59:30.693
> 
> 标签：command-line, batch-file, command-line-arguments

我使用以下命令行：

调用 run.bat TEST.properties

在 TEST.properties 文件中，我初始化以下参数

output.dir=C:/Test_Results

我希望每次调用脚本时“Test_Results”都包含一个时间戳。我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:30:11.787

在 TEST.properties.bat 中，之后

```
output.dir=C:\Test_Results 
```

插入行

```
echo %date% %time% >>%output.dir%\my_timestamps.txt 
```

并且 TEST.properties.bat 运行的最新日期/时间将出现在`C:\Test_Results\my_timestamps.txt`

请注意，这`/`是一个开关指示器。`\`是一个目录分隔符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T13:33:55.347

如果您在“Test_Results”中只需要 1 个时间戳：

```
set test=%1

rem insert timestamp generating code below if needed

set timestamp=%time%

for /f "tokens=1,2* delims==" %%i in (%test%) do (if "%%i"=="output.dir" echo %timestamp%>%%j) 
```

如果您需要所有时间戳：

```
set test=%1

rem insert timestamp generating code below if needed

set timestamp=%time%

for /f "tokens=1,2* delims==" %%i in (%test%) do (
  if "%%i"=="output.dir" (
    if not exist %%j (echo %timestamp%>%%j) else (
      echo %timestamp%>temp.txt
      copy %%j+temp.txt %%j
      del temp.txt
    )
  )
) 
```

# javascript - jQuery工具提示负位置

> ID：15926561
> 
> 赞同：2
> 
> 时间：2013-04-10T12:59:44.503
> 
> 标签：javascript, jquery, jquery-ui

我正在尝试使用 jquery 工具提示，但悬停的 div 放置在负坐标（-27000，-27000）

应该有工具提示的元素是这样的：

`<span style="float:right;font-weight:bold" title="I am tooltip">U</span>`

我用这个调用初始化工具提示： `$(function(){ $('[title]').tooltip(); });`

jQuery 工具提示已正确初始化，因为在鼠标悬停时，我得到了一个新的 div，但放置在巨大的负坐标处：

```
<div id="ui-tooltip-4" class="ui-tooltip ui-widget ui-corner-all ui-widget-content" 
role="tooltip" style="top: -27712.3px; left: -27517.2px; display: block;">
    <div class="ui-tooltip-content">I am tooltip</div>
</div> 
```

放置不良的原因可能是什么？这些是在标题跨度上应用的样式：

```
float: right;
font-weight: bold;    
-moz-box-sizing: border-box;    
-moz-box-sizing: border-box;
border-collapse: collapse;
font-size: 0.85em;
line-height: 1.3;
list-style: none outside none;
color: #222222; 
```

使用的库：

```
jquery-1.8.3.min.js
jquery-ui-1.10.10.min.js(and jquery-ui-1.10.10.css) 
```

感谢您提供任何导致工具提示定位错误的想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:43:44.827

问题是与 jquery-ui 一起导入[qtip](http://craigsworks.com/projects/qtip/%20qtip%5C)库。删除这个库后，一切都很好。

# eclipse - Eclipse Juno SR2 和带有 Maven 的 Subclipse

> ID：15926569
> 
> 赞同：0
> 
> 时间：2013-04-10T13:00:05.137
> 
> 标签：eclipse, svn, maven-3, subclipse

我正在努力让我的团队转移到 Eclipse Juno SR2，我们目前正在运行 Subversion（1.6 服务器）。我们很快也将获得本机 linux 客户端，以使我们升级到客户端 1.7。我看到一些关于 svn:ignore 属性的不一致行为。

目前我有一个多模块 maven 项目设置（我有最新版本的 maven、spring 和其他工具的集成等）。SVN 中的每个项目都有以下 svn:ignore 属性

```
.project
.classpath
.settings
.springBeans
target 
```

无论出于何种原因，在运行 SVNKit 客户端适配器的带有 Subclipse 1.8 的 Juno 下，我看到 ${project_loc}/.settings 下出现了更改，并且目标下的一些文件显示为“新”。

有没有人有建议或想法？这是一个错误吗？

也请不要评论“git、hg、bob 的 vcs 比 svn 好，你应该切换”。我一遍又一遍地争论，我一直被击落。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:36:30.703

这是一个错误。目前正在修复中，应该会在下周推出。如果您可以将 JavaHL 或 SVNKit 插件回滚到之前的 1.7.8.1 版本，这也将暂时解决它。

# utf-8 - ANSI 到 UTF-8 的转换

> ID：15926570
> 
> 赞同：1
> 
> 时间：2013-04-10T13:00:07.997
> 
> 标签：utf-8, character-encoding

我想知道是否：

1.  所有以 ANSI (1252) 编码的字符都可以毫无问题地转换为 UTF-8。
2.  所有以 UTF-8 编码的字符都无法毫无问题地转换为 ANSI (1252)（例如：Ǣ 无法转换为 ANSI 编码）。

你能帮我确认它是正确的吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:29:44.490

是的，Windows-1252 中可表示的所有字符都有 Unicode 等价物，因此可以转换为 UTF-8。有关显示到 Unicode 代码点的映射的表格，请参阅[此 Wikipedia 文章](http://en.wikipedia.org/wiki/Windows_1252)。

而且由于 Windows-1252 是一个 8 位字符集，而 UTF-8 可以表示数千个不同的字符，显然有很多字符可以表示为 UTF-8 而不能表示为 Windows-1252。

请注意，Windows-1252 编码的名称“ANSI”是完全不正确的。当它第一次被提出时，它的目的是成为一个 ANSI 标准，但这从未发生过。不幸的是，这个名字卡住了。（Microsoft 相关文档通常也将 UTF-16 称为“Unicode”，这是另一种用词不当；UTF-16 是 Unicode 的一种表示，但还有其他表示。）

# c# - Microsoft.Office.Interop.Excel.Worksheet.Cells[x,y].Style？

> ID：15926578
> 
> 赞同：4
> 
> 时间：2013-04-10T13:00:22.203
> 
> 标签：c#, automation, export-to-excel, excel-interop

我发现了一些使用 Style 属性的代码，`Microsoft.Office.Interop.Excel.Worksheet.Cells[x,y]`但它在我的 Visual Studo 代码编辑器中被视为对象：

```
Workbook wb = new Application.Workbooks.Add(XlWBATemplate.xlWBATWorksheet);
Worksheet ws = wb.Sheets[1];
ws.Cells[x,y] is simply treated as an object so how can I use its Style property? 
```

我正在使用 Microsoft Excel 15.0 对象库（与 Microsoft Office 2013 一起使用）。这有关系吗？

你能给我解释一下吗？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T13:04:24.493

您必须将对象转换为`Range`.

Range 接口/对象包含您指定的单元格或范围的所有样式和值信息。

一些例子：

```
((Excel.Range)ws.Cells[r, c]).NumberFormat = format;
((Excel.Range)ws.Cells[r, c]).Value2 = cellVal;
((Excel.Range)ws.Cells[r, c]).Interior.Color = ColorTranslator.ToOle(Color.Red);
((Excel.Range)ws.Cells[r, c]).Style.Name = "Normal" 
```

等等等等等等。

有一个链接： [https ://docs.microsoft.com/en-us/office/vba/api/Excel.Range.Style](https://docs.microsoft.com/en-us/office/vba/api/Excel.Range.Style)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:29:09.523

您可能还想查看[stackoverflow.com/questions/15366340/](https://stackoverflow.com/questions/15366340/data-formatted-in-datagrid-is-exported-to-excel-in-unformatted-manner/15953667#15953667)，其中包括导出到 excel 时的单元格格式。

# java - 事件的优先级

> ID：15926584
> 
> 赞同：0
> 
> 时间：2013-04-10T13:00:37.293
> 
> 标签：java, swing, events

这是我对 Swing 的问题：
想象一下带有一个文本字段和一个按钮的框架。在这个框架后面有一个字段的数据类。

*   文本字段具有 FocusListener，它使用 FocusOut 上的文本字段中的值更新数据类字段
*   按钮具有 ActionListener，它在单击时将数据类发送到服务器

如果我修改文本字段中的值并立即单击按钮，有时会将具有旧值的数据类发送到服务器。在我看来，不能保证在按钮的 ActionPerformed 事件之前处理文本字段的 FocusOut 事件。如果是这样，有什么方法可以保护它吗？我的意思是一些干净的方式，如果没有必要，我不想把它弄脏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:14:19.840

只是为了好玩，用 InputVerifier 实现了一个穷人的单向绑定：注意 inputVerifier 保证在转移焦点之前被访问（并且似乎在当前版本的 jdk 中工作 - 在旧版本中有一些问题），所以只要提交操作中涉及焦点转移，在验证器中进行任何更新都应该是安全的：

验证者和一些粗略的数据对象：

```
/**
 * Very simple uni-directional binding (component --> data) class.
 */
public static class BindingVerifier extends InputVerifier {

    private RawData data;
    private boolean first;
    public BindingVerifier(RawData data, boolean first) {
        this.data = data;
        this.first = first;
    }

    @Override
    public boolean shouldYieldFocus(JComponent input) {
        String text = ((JTextComponent) input).getText();
        if (first) {
            data.one = text;
        } else {
            data.two = text;
        }
        return true;
    }

    @Override
    public boolean verify(JComponent input) {
        return true;
    }

}

public static class RawData {
    String one;
    String two;
    public RawData(String one, String two) {
        this.one = one;
        this.two = two;
    }

    public String toString() {
        return one + "/" + two;
    }
} 
```

用法：

```
final RawData data = new RawData(null, null);
JTextField first = new JTextField(20);
first.setInputVerifier(new BindingVerifier(data, true));
JTextField second = new JTextField(20);
second.setInputVerifier(new BindingVerifier(data, false));
Action commit = new AbstractAction("commit") {

    @Override
    public void actionPerformed(ActionEvent e) {
        System.out.println(data);
    }
};
JComponent form = new JPanel();
form.add(first);
form.add(second);
form.add(new JButton(commit)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:23:28.383

*   在 Swing 中不可能，不可能对来自一个 Listener 的事件进行排序，而不是在两个或多个 Listener 同时触发事件的情况下

> 如果我修改文本字段中的值并立即单击按钮，有时会将具有旧值的数据类发送到服务器。在我看来，不能保证在按钮的 ActionPerformed 事件之前处理文本字段的 FocusOut 事件。如果是这样，有什么方法可以保护它吗？我的意思是一些干净的方式，如果没有必要，我不想把它弄脏。

*   焦点是异步的，但在所有情况下都会触发正确的事件，问题可能出在您的代码中

*   侦听器的某些组合可能会导致无限循环（事件会延迟触发），然后您的控制器可能会触发错误的事件顺序

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T13:05:43.527

你可以这样做。我只给出一个伪代码。

```
private boolean check = false;

txtField FocusOutMethod {
 check = true;
}

button ActionPerformedMethod(){

 if(check){

      place your code that you want to execute in button click.

      check = false;
 }
} 
```

* * *

这样，actionPerformed 方法将仅在 focusOut 方法执行后运行您的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T15:42:32.640

> 如果我修改文本字段中的值并立即单击按钮，有时会将具有旧值的数据类发送到服务器。在我看来，不能保证在按钮的 ActionPerformed 事件之前处理文本字段的 FocusOut 事件。如果是这样，有什么方法可以保护它吗？

以不同的方式设计表格。也就是说，当您单击按钮时，ActionListener 应该在表单上的所有文本字段上调用 ​​getText() 方法。

# perl - 以小块写入文件还是一次全部写入文件更好？

> ID：15926589
> 
> 赞同：2
> 
> 时间：2013-04-10T13:00:50.293
> 
> 标签：perl, memory, file-io

我必须用 Perl 在一个文件上写多行，这是逐行编写小块而不是保存所有内容并仅访问文件句柄一次以编写所有内容的优点或缺点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T13:12:28.450

Perl 在后台执行文件写入的缓冲——它保存数据直到有一个重要的块，然后一次将其全部写入。

因此，即使您多次写入*文件句柄，实际写入文件的次数也是有限的。*多次写入不会有任何有意义的性能损失——除非您采取措施明确规避缓冲（例如`$|=1`在每次写入时设置或关闭并重新打开文件）。

如果最方便的话，你应该逐行写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:11:39.050

一旦您知道要写入的数据是什么，通常会更方便地写入数据，所以这样做。重复使用文件句柄没有任何缺点。

而且，是的，如果写入的数据总量大于输出缓冲区的大小，这将节省一些内存，但是，实际上，除非您要写入数十兆字节，否则内存消耗的差异*并不重要*，所以以最清晰和最容易维护的方式编写它。

# java - 计算时间差（当前和第二天之间）

> ID：15926590
> 
> 赞同：1
> 
> 时间：2013-04-10T13:00:52.630
> 
> 标签：java, android

有很多类似的主题，但我找不到与我的问题类似的东西。我只发现了如何计算例如第二次是否大于第一次，例如：

1.  22:00
2.  23:00

结果很容易得到。只需使用 Date API 第一次减去第二次。差异以毫秒为单位，您可以轻松地将它们转换为秒/分钟..

我想知道的是，如何获得第一天时间和第二天时间之间的差异，例如：

1.  22:25
2.  06:30

时差应该是 8 小时 5 分钟。

或者另一个例子

1.  19:00
2.  00:00

差异应该是5小时。

这种方式如何计算时间？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:04:30.713

将您的日期和时间转换为时间戳（它只是自 1970 年 1 月 1 日以来以毫秒为单位的日期的长表示形式。），然后计算差异，并从毫秒转换为小时。

还要检查[这个](https://stackoverflow.com/questions/6177830/java-calculate-time-between-two-timestamps)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:18:56.617

使用日历类。设置您的日期、小时和分钟，最后减去这些日期（以毫秒为单位），您将转换为小时、分钟和秒的结果。

# jquery - 标题列中的 Slickgrid 选择复选框

> ID：15926592
> 
> 赞同：1
> 
> 时间：2013-04-10T13:00:57.640
> 
> 标签：jquery, header, checkbox, slickgrid

如何在 slickgrid 中选择标题复选框？在我的 slickgrid 中，我只能选择所有列，无法选择列标题中的复选框。

```
var variablesRows = [];
    var columns = [];
    columns.push(checkboxSelector.getColumnDefinition());
    columns[1] = { id: "description", name: "Description", field: "description",
    sortable: true, width: 311 };

    // Define table options
    var options = {
        enableCellNavigation: true,
        enableColumnReorder: true,
        explicitInitialization: true,
        multiColumnSort: true,
        forceFitColumns: true
    };

    // Create rows
    for (var i = 0; i < variableTypes.length; i++) {
        variablesRows[i] = {
            description: variableTypes[i].Description,
            id: variableTypes[i].VariableId,
            vtype: variableTypes[i].VType,
            valuetype: variableTypes[i].ValueType.replace(/\ /g, '_')
        };
    }

    variablesDataView = new Slick.Data.DataView();

    // Create grid
    variablesGrid = new Slick.Grid("#FDvariableFilterDiv", variablesDataView,
    columns,  options); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-19T06:59:16.783

尝试如下，

```
var checkboxSelector = new Slick.CheckboxSelectColumn({
        cssClass: "slick-cell-checkboxsel"
    });
columns.push(checkboxSelector.getColumnDefinition());    
grid.registerPlugin(checkboxSelector); 
```

# asp.net - 视图中的通用类型

> ID：15926597
> 
> 赞同：2
> 
> 时间：2013-04-10T13:01:16.240
> 
> 标签：asp.net, asp.net-mvc, c#-4.0, asp.net-mvc-4

我的目标：实现带有部分视图的网格。所以我为 Grid 创建了一个类

我的代码

```
public class HomeController : Base_Controller
{
    //
    // GET: /Home/

    public ActionResult Index()
    {
        // return View("~/Views/Home/User/Login");
        if (System.Web.HttpContext.Current.User.Identity.IsAuthenticated)
        {
            var users = UserBL.GetAllUsers();
            Type type = users.FirstOrDefault().GetType();
            Models.Grid<DAL.Entities.User_Details> grid = new Models.Grid<DAL.Entities.User_Details>(users);

            ViewBag.GridData = grid;
            return View();
        }
        else
        {
            return RedirectToAction("Login", "User");
        }

        // return "Hellow";
    }
} 
```

我的网格课是

```
public class Grid<T> 
{
    public Grid(object datasource)
    {

        Data = (List<T>)datasource;

    }

    public Grid()
    {

    }
    public List<T> Data
    {
        get;
        set;
    }

    public IEnumerable<System.Reflection.PropertyInfo> Props
    {
        get
        {
            return typeof(T).GetProperties().AsEnumerable();
        }

    }
} 
```

我的观点代码是

```
 @using DAL.Entities;
@{
    ViewBag.Title = "Index";
}

<h1>welcome User....!</h1>
@{Models.Grid<User_Details> modelgrid = (Models.Grid<User_Details>)@ViewBag.GridData;}

@Html.Partial("GridView",modelgrid) 
```

我的部分观点是这样的。在此代码的第一行中，我想使用任何反射机制。任何人都可以将代码更改为可行的代码吗

```
 @model AC.Models.Grid<Need a solution here>

@if (Model != null)
{
    <table>
        <thead>
            <tr>
                @foreach (var col in Model.Props)
                {

                <td>@Html.Display(col.Name)</td> 

            }
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.Data)
        {
            <tr>
                @foreach (var prop in Model.Props)
                {
                    <td>@Html.Display(prop.GetValue(item, null).ToString())</td>
                }
            </tr>
        }
    </tbody>

</table> 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:10:12.137

由于您已经在使用反射，因此在这里使用泛型并没有太大的好处。怎么样：

```
public class Grid
{
    private readonly Type type;
    public Grid(IEnumerable datasource)
    {
        if (datasource == null)           
        {
            throw new ArgumentNullException("datasource");
        }

        this.type = datasource.GetType().GetGenericArguments().SingleOrDefault();

        if (this.type == null)
        {
            throw new ArgumentException("The datasource must be generic");
        }

        this.Data = datasource;
    }

    public IEnumerable Data { get; private set; }

    public IEnumerable<System.Reflection.PropertyInfo> Props
    {
        get
        {
            return this.type.GetProperties().AsEnumerable();
        }
    }
} 
```

接着：

```
@model AC.Models.Grid

@if (Model != null)
{
    <table>
        <thead>
            <tr>
                @foreach (var col in Model.Props)
                {
                    <td>@Html.Display(col.Name)</td> 
                }
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.Data)
            {
                <tr>
                    @foreach (var prop in Model.Props)
                    {
                        <td>@Html.Display(prop.GetValue(item, null).ToString())</td>
                    }
                </tr>
            }
        </tbody>
    </table>
} 
```

# php - 插入带变量的查询

> ID：15926599
> 
> 赞同：0
> 
> 时间：2013-04-10T13:01:18.100
> 
> 标签：php, insert, user-profile

我有以下查询

```
function Add_Oddjob ($Add_Oddjob){
            //global $MemberID;
            //$update = array();
            array_walk($Add_Oddjob, 'array_sanitize');

            //foreach($Add_Oddjob as $field=>$data){ //loop through update data in Add_Oddjob.php
                //$update[] = '`' . $field . '` = \'' . $data . '\''; 
            }
            //mysql_query("INSERT INTO `oddjob`($field) VALUES ($data)") or die (mysql_error());
            echo "INSERT INTO `oddjob`(`MemberID`, `OddJobName`, `Description`,`DaysAvailable`) VALUES ('$MemberID','".$_POST['OddJobName']."', '".$_POST['Description']."','$daysavailable')";
            die (); 
```

回声输出以下内容：

```
Notice: Undefined variable: MemberID in \oddjobexchange\core\functions\user.php on line 69

Notice: Undefined variable: daysavailable in \oddjobexchange\core\functions\user.php on line 69
INSERT INTO `oddjob`(`MemberID`, `OddJobName`, `Description`,`DaysAvailable`) VALUES ('','Painting', 'Test ','') 
```

这是我在其他页面中使用的数组：

```
 if (isset($_POST['OddJobName']) && isset($_POST['Description']) && isset($_POST['DaysAvailable']) && empty($errors) === true){//if (empty($_POST) === false && empty($errors) === true) { //if (isset(empty($_POST['OddJobName'])) && isset(empty($_POST['Description'])) && isset(empty($_POST['DaysAvailable'])) === false && empty($errors) === true)
        $daysavailable='';
        foreach ($_POST['DaysAvailable'] as $value)
        {

        $daysavailable .=$value." ";
        }

        $Add_Oddjob = array (
            'MemberID'      => $MemberID,
            'OddJobName'    => $_POST['OddJobName'],
            'Description'   => $_POST['Description'],
            'DaysAvailable' => $daysavailable, 

            );

            Add_Oddjob ($Add_Oddjob);

            if(success){
             header('Location: member.php?username='.$username);
             exit ();
            }
        } else if (empty($errors) === false){
            //otherwise output errors
            echo output_errors($errors);
        } 
```

我可以做些什么来使`$MemberID`和`$daysavailable`在查询中工作？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:03:00.533

你不能像这样使用**数组变量**。使用喜欢，

```
$Add_Oddjob['MemberID'] 
```

此外，它不是`$daysavailable`。它应该是`$Add_Oddjob['DaysAvailable']`

# c++ - 在 C++ 中嵌入 python，我需要安装 python

> ID：15926601
> 
> 赞同：0
> 
> 时间：2013-04-10T13:01:23.890
> 
> 标签：c++, python, static-linking, python-embedding

将 python 嵌入到 C++ 应用程序中时，使用

```
#include "python2.6/Python.h" 
```

并链接 -lpython2.6

目标计算机（运行最终编译程序的计算机）是否需要安装 python 才能使用我的应用程序？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:31:19.717

这取决于。您是静态链接库还是动态链接库？如果您动态链接，那么是的，您的目标计算机需要安装 Python。

# jsp - JSP 不适用于 GlassFish v.3.1.2.2

> ID：15926604
> 
> 赞同：0
> 
> 时间：2013-04-10T13:01:30.060
> 
> 标签：jsp, jsf, glassfish, jstl, jsf-1.2

迁移到 GlassFish v.3.1.2.2 后，我遇到了 EL 解析器功能不正确的问题。应用程序失败并出现异常，例如

> javax.servlet.ServletException：类'java.lang.String'没有属性'type'。javax.el.PropertyNotFoundException：类'java.lang.String'没有属性'type'。

这是我的 web.xml 文件 web-app 部分：

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation> 
```

这是我的 glassfish-web.xml 部分是相同的。这是我的 faces-config.xml

```
<faces-config version="1.2" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_1_2.xsd"> 
```

我错过了什么？是否存在依赖冲突？可能，也许有一些Tomcat冲突？

# arrays - VBScript 中 LBound 的意义/用途是什么？

> ID：15926609
> 
> 赞同：7
> 
> 时间：2013-04-10T13:01:43.093
> 
> 标签：arrays, asp-classic, vbscript

据我所知，没有办法在 VBScript 中创建基于 1 的数组（或任何非基于 0 的数组），但它有一个 LBound 函数，因此应该始终返回 0。

那么这是从 VB 中返回的某种形式（因为您可以使用“arrayName（1 到 10）”）还是 LBound 可以在 VBScript（经典 ASP）中产生除 0 以外的结果？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-10T13:16:59.307

LBound() 是 VBScript 的一部分，因为您可以通过 COM 从其他地方获得一个非零基数组。

# sql - 在 SQL 中查找两个维度之间的字符串相似性

> ID：15926612
> 
> 赞同：0
> 
> 时间：2013-04-10T13:01:51.720
> 
> 标签：sql, oracle, string-comparison, data-analysis

我有两个表，我想找到可以在其中一个表中找到值以及它们在第二个表中的位置的匹配项。

在表 AI 中列出了用户的搜索查询，在表 BI 中列出了我想要查找的搜索查询的列表。为了完成这项工作，我想使用类似于以下的方法：

```
SELECT UTL_MATCH.JARO_WINKLER_SIMILARITY('shackleford', 'shackelford') FROM DUAL 
```

我使用了这种方法，但它不起作用，因为它可能是查询和选择中的名称之间的差异。

```
SELECT query FROM search_log WHERE query IN (SELECT navn FROM selection_table); 
```

是否有通过查询查找相似性的最佳实践方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:53:24.940

一种方法可能是这样的：

```
SELECT 
    SEARCH_LOG.QUERY
FROM 
    SEARCH_LOG
WHERE 
    EXISTS
    (
        SELECT 
            NULL 
        FROM 
            SELECTION_TABLE
        WHERE
            UTL_MATCH.JARO_WINKLER_SIMILARITY(SEARCH_LOG.QUERY, SELECTION_TABLE.NAVN) >= 98
    ); 
```

这将返回`SEARCH_LOG`在`SELECTION_TABLE`where 中`NAVN`匹配`QUERY`至少 98 分（满分 100 分）的行。您可以将 98 更改为您喜欢的任何阈值。

这是一种“蛮力”方法，因为它可能会查看所有行组合。因此，它可能不是“最佳实践”，但它可能仍然是实用的。如果性能很重要，您可以考虑使用更复杂的解决方案，例如 Oracle Text。

# php - 我的 Intranet 网站上的邮件功能未激活

> ID：15926616
> 
> 赞同：0
> 
> 时间：2013-04-09T15:19:53.850
> 
> 标签：php, email

我刚刚为我的公司建立了一个网站并将其放在服务器上。它运行良好。该网站包含一个收集员工请求的表单页面。表单将信息发送到数据库。我在那里放置了代码，以便将邮件发送到我的收件箱，以便在工作人员填写表格后通知我。不幸的是，邮件没有给我。请我需要关于如何去做的帮助。

我在后端使用 XAMPP。下面是涉及邮件部分的代码：

```
<?php
$to = "seyioyedeji31@yahoo.com";
$subject = "Test mail";
$message = "<html>
<head>
    <title>MIS HELP SUCCESSFUL</title>
</head>
<body>
    <p>Here are the query details:</p>
    <p><table border=1 style= background:#0B0B61>
       <tr><td> SENDER: $_POST[fullname]</td></tr> 
       <tr><td> DEPARTMENT: $_POST[department]</td></tr>
       <tr><td> NATURE OF PROBLEM: $_POST[nature]</td></tr>
       <tr><td> DETAILS: $_POST[mail]<td></tr>
       </table></p>

</body>
</html>";

$from = "seyioyedeji@mis.com";
$headers = "From:" . $from;
mail($to,$subject,$message,$headers);
echo "Mail Sent.";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:36:52.270

邮件可能在任意数量的点上被破坏。在不了解更多信息的情况下，这些是浮现在脑海中的要点：

*   没有本地邮件代理将邮件从邮箱路由到下一个邮件中继。
*   PHP 没有配置 xampp 可能需要的电子邮件支持。
*   该邮箱没有出站邮件权限。ACL、防火墙等
*   电子邮件正在发送出去，但正在发送到服务器上的本地帐户。
*   您的电子邮件提供商正在将电子邮件过滤为垃圾邮件。

编辑：

经过一番寻找，看起来这可能会有所帮助：

[http://expertester.wordpress.com/2010/07/07/how-to-send-email-from-xampp-php/](http://expertester.wordpress.com/2010/07/07/how-to-send-email-from-xampp-php/)

这是基于另一个人的解决方案：

[http://egrasp.wordpress.com/2010/02/03/sending-email-in-php-using-xampp-lite-1-7-3-on-windows/](http://egrasp.wordpress.com/2010/02/03/sending-email-in-php-using-xampp-lite-1-7-3-on-windows/)

但看起来 XAMPP 有自己特殊的电子邮件发送配置。:)

如果您想将 XAMPP 配置为通过 localhost 发送，您可能需要安装一个本地电子邮件服务（如 postfix）来处理出站发送，这是我通常在主机上执行的操作。虽然只让它在 localhost 上收听以避免垃圾邮件发送者的滥用。

我会运行正常的本地主机测试：

```
uptime | mail you@email.address.com
# replace 'mail' with mailx, sendmail, etc. depending on what you have installed. 
```

但这假设您安装了本地邮件处理程序。

# performance - 性能问题我的语法和antlr4

> ID：15926618
> 
> 赞同：1
> 
> 时间：2013-04-10T13:02:04.363
> 
> 标签：performance, antlr4

我是使用 antlr 4 的新手，以前从未写过语法。语法似乎适用于短样本，但我有一些较长的示例将在一夜之间运行而不会完成。我将 TestRig 与我的输入文件一起使用。我使用了 JVisualVM 并观察了大部分时间都花在这里的代码：

```
Org.antlr.v4.runtime.atn.ArrayPredictionContext.equals(Object) (89.8%)
Org.antlr.v4.runtime.atn.SingletonPredictionContext.equals(Object) (7.4%)
Org.antlr.v4.runtime.misc.DoubleKeyMap.put(Object,Object,Object) (1.8%)
Org.antlr.v4.runtime.misc.DoubleKeyMap.get(Object, Object) (0.9%) 
```

该问题似乎与以下格式的陈述量有关。

```
reservedWord  = quotedstring 
```

在其中的 12 到 72 个之间的某个地方出现了问题

我给了jvm 2G的内存，它使用的内存不到1G。堆增长和缩小，所以我不相信有内存泄漏。

关于如何调试这样的东西的任何建议？

我看不到附加文件的方法，堆栈跟踪是 422 行，大部分重复 1278 和 1325。我不了解 TestRig，所以我不知道它在做什么。如果我能找到它，将获得 antlr-4.0-complete.jar 的源代码。

```
at org.antlr.v4.runtime.atn.PredictionContext.hashCode(PredictionContext.java:121)  
at org.antlr.v4.runtime.atn.SingletonPredictionContext.equals(SingletonPredictionContext.java:97)   
at java.util.HashMap.getEntry(HashMap.java:349)     
at java.util.LinkedHashMap.get(LinkedHashMap.java:280)  
at org.antlr.v4.runtime.misc.DoubleKeyMap.get(DoubleKeyMap.java:60)     
at org.antlr.v4.runtime.atn.PredictionContext.mergeSingletons(PredictionContext.java:204)   
at org.antlr.v4.runtime.atn.PredictionContext.merge(PredictionContext.java:138)     
at org.antlr.v4.runtime.atn.ATNConfigSet.add(ATNConfigSet.java:354)     
at org.antlr.v4.runtime.atn.ParserATNSimulator.closure_(ParserATNSimulator.java:1293)   
at org.antlr.v4.runtime.atn.ParserATNSimulator.closureCheckingStopState(ParserATNSimulator.java:1278)   
<repeat a lot 1278 and 1325>

at org.antlr.v4.runtime.atn.ParserATNSimulator.closure_(ParserATNSimulator.java:1325)   
at org.antlr.v4.runtime.atn.ParserATNSimulator.closureCheckingStopState(ParserATNSimulator.java:1278)   
at org.antlr.v4.runtime.atn.ParserATNSimulator.closure_(ParserATNSimulator.java:1325)   
at org.antlr.v4.runtime.atn.ParserATNSimulator.closureCheckingStopState(ParserATNSimulator.java:1278)   
at org.antlr.v4.runtime.atn.ParserATNSimulator.closureCheckingStopState(ParserATNSimulator.java:1261)   
at org.antlr.v4.runtime.atn.ParserATNSimulator.closure_(ParserATNSimulator.java:1325)   
at org.antlr.v4.runtime.atn.ParserATNSimulator.closureCheckingStopState(ParserATNSimulator.java:1278)   
at org.antlr.v4.runtime.atn.ParserATNSimulator.closureCheckingStopState(ParserATNSimulator.java:1261)   
at org.antlr.v4.runtime.atn.ParserATNSimulator.closure_(ParserATNSimulator.java:1325)   
at org.antlr.v4.runtime.atn.ParserATNSimulator.closureCheckingStopState(ParserATNSimulator.java:1278)   
at org.antlr.v4.runtime.atn.ParserATNSimulator.closure_(ParserATNSimulator.java:1325)   
at org.antlr.v4.runtime.atn.ParserATNSimulator.closureCheckingStopState(ParserATNSimulator.java:1278)   
at org.antlr.v4.runtime.atn.ParserATNSimulator.closureCheckingStopState(ParserATNSimulator.java:1261)   
at org.antlr.v4.runtime.atn.ParserATNSimulator.closure_(ParserATNSimulator.java:1325)   
at org.antlr.v4.runtime.atn.ParserATNSimulator.closureCheckingStopState(ParserATNSimulator.java:1278)   
at org.antlr.v4.runtime.atn.ParserATNSimulator.closure(ParserATNSimulator.java:1216)    
at org.antlr.v4.runtime.atn.ParserATNSimulator.computeReachSet(ParserATNSimulator.java:988)     
at org.antlr.v4.runtime.atn.ParserATNSimulator.execATNWithFullContext(ParserATNSimulator.java:801)  
at org.antlr.v4.runtime.atn.ParserATNSimulator.execATN(ParserATNSimulator.java:701)     
at org.antlr.v4.runtime.atn.ParserATNSimulator.predictATN(ParserATNSimulator.java:389)  
at org.antlr.v4.runtime.atn.ParserATNSimulator.adaptivePredict(ParserATNSimulator.java:346)     
at ValidatingPolicyParser.showstatement(ValidatingPolicyParser.java:1023)   
at ValidatingPolicyParser.statement(ValidatingPolicyParser.java:685)    
at ValidatingPolicyParser.policy(ValidatingPolicyParser.java:246)   
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)    
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)    
at java.lang.reflect.Method.invoke(Method.java:597)     
at org.antlr.v4.runtime.misc.TestRig.process(TestRig.java:247)  
at org.antlr.v4.runtime.misc.TestRig.process(TestRig.java:209)  
at org.antlr.v4.runtime.misc.TestRig.main(TestRig.java:142) 
```

我开始研究精简的语法以用作测试用例。这个练习确实帮助我识别了我从语法中删除的一些奇怪的东西。这解决了我精简语法的问题，但是当我恢复完整的语法时，性能问题又回来了。

在我看来，增加简单比较的出现次数会非线性地增加处理时间，这真的很奇怪。'TOKEN = "SOMESTRING" OR TOKEN = "SOMEOTHERSTING"' 的几个实例处理相对较快，但如果我有 75 个这样的比较，处理时间就会变得太多。

我无法确定 antlr4 源是否在某处可用。很高兴单步执行代码以查看发生了什么。

我想我会重复这个过程，看看它会产生什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:29:44.403

那些时间数字是没用的。他们告诉你ε。

相反，只需打断它。你会在行动中抓住它。检查调用堆栈，如有必要，检查数据变量。如果你及时了解它在做什么，你就会知道问题出在哪里。

[*比你想知道的更多。*](https://stackoverflow.com/a/1779343/23771)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:58:31.190

好吧，我在语法中发现了问题。进行了大量的试验和错误。我想知道antlr4中是否使用了递归？

# mysql - 从新列中检索值

> ID：15926619
> 
> 赞同：0
> 
> 时间：2013-04-10T13:02:15.643
> 
> 标签：mysql, opencart

我正在尝试学习 opencart 结构，并尝试在 table 下创建一个新列`product`。新列是“测试”

然后我尝试检索此页面下的数据`index.php?route=checkout/cart`（将价格替换为测试列）

```
catalog\controller\checkout\cart.php
...

$this->data['products'][] = array(
    'key'      => $product['key'],
    'thumb'    => $image,
    'name'     => $product['name'],
    'model'    => $product['model'],
    'option'   => $option_data,
    'quantity' => $product['quantity'],
    'stock'    => $product['stock'] ? true : !(!$this->config->get('config_stock_checkout') || $this->config->get('config_stock_warning')),
    'reward'   => ($product['reward'] ? sprintf($this->language->get('text_points'), $product['reward']) : ''),
    'price'    => $product['test'],  //<-- new column
    'total'    => $total,
    'href'     => $this->url->link('product/product', 'product_id=' . $product['product_id']),
    'remove'   => $this->url->link('checkout/cart', 'remove=' . $product['key'])
); 
```

问题是我没有得到任何输出，而且我不确定如何使用该模型。哪个查询/功能与此页面相关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:21:01.730

问题是控制器`$products`上可用的`cart.php`是从会话中检索到的，它们存储在先前设置的结构中，所以没有`test`索引，你应该得到一个`Notice: undefined index 'test' in ...`. 由以下`$products`人检索

```
foreach ($this->cart->getProducts() as $product) {
    //...
} 
```

看`/system/library/cart.php`和方法`getProducts()`来理解我在说什么。

如果您想在`catalog/controller/product/category.php`或`catalog/controller/product/product.php`控制器上使用它，您正在尝试的代码将起作用。

如果您替换所有产品列表和产品详细信息中的价格，这些控制器：

*   产品/
    *   类别.php
    *   制造商信息.php
    *   产品.php
    *   搜索.php
    *   特殊的.php
*   模块/
    *   畅销书.php
    *   精选.php
    *   最新的.php
    *   特殊的.php

使用您的值，购物车中的最终价格将是您的测试值。

# api - Salesforce - 无法在单个 Salesforce API 创建调用中创建父记录和子记录

> ID：15926622
> 
> 赞同：2
> 
> 时间：2013-04-10T13:02:20.697
> 
> 标签：api, soap, salesforce

为了在单个 salesforce API 创建调用中创建父记录和子记录，我应该设置 MyExtId__c 字段。但是我应该如何在 Salesforce WSDL 中获取这个外部字段..

有关创建呼叫的更多信息，请参阅以下链接。

[http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_calls_create.htm](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_calls_create.htm) （使用外键在单个调用中创建父子记录）

请尽早帮助我..

问候迪帕

# c# - 托管在本地 IIS（非快速）上的 WCF 服务应用程序和 MVC4 应用程序抛出连接字符串错误

> ID：15926623
> 
> 赞同：3
> 
> 时间：2013-04-10T13:02:21.133
> 
> 标签：c#, asp.net-mvc, wcf, entity-framework, iis

那里已经有一些问题，但似乎没有人得到任何关注或回答导致此错误的原因以及如何解决它。

**背景**

我创建了一个 ASP.NET MVC4 应用程序，该应用程序在我使用 VS2012 中的 WCF 应用程序项目模板创建的另一个应用程序中具有单点数据访问。如果我在调试模式下运行这两个应用程序（因此此时两者都使用 IIS express），它们可以很好地相互通信。我所有的电话都有效，没有问题。

我想在更真实的环境中对其进行测试，所以我设置了我的 IIS（Windows 8 机器上的 IIS 8），创建了一个网站，在该网站下我托管了这两个应用程序，我正在调用的 MVC 应用程序仪表板，以及我称为服务的 WCF 仪表板。所以它在 IIS 中看起来像这样

```
 MYMACHINENAME
 |
 --App Pools
 |Sites
     --local
        --aspnet_client
        --dashboard (application, MVC4)
        --service (application, WCF) 
```

我可以点击 localhost/service 并在那里看到正确的信息，所以我知道它托管正确。

我更新了 MVC4 项目中的服务引用以指向 localhost/service 而不是我正在使用的 iis express。

**问题**

将新服务引用添加到 MVC4 应用程序工作正常，我得到了 wsdl 信息，我可以看到我定义的所有端点调用。添加新的服务参考后，我重新发布了“仪表板”应用程序。当我导航到 localhost/dashboard 时，我在服务引用创建的 Reference.cs 文件深处收到一个错误。这是引发错误的代码：

```
MyServiceAPIClient svc = new MyServiceAPIClient();
svc.Open();
User userRecord = svc.GetUserRecord(adSAMName); 
```

在第三行，它进入了我添加服务引用时创建的 Reference.cs 文件。它在 Reference.cs 文件中终止的这行代码在这里：

```
public Dashboard.Web.MyApiService.User GetUserRecord(string userName) {
    return base.Channel.GetUserRecord(userName);
} 
```

错误信息是这样的：

```
An error occurred while getting provider information from the database. 
This can be caused by Entity Framework using an incorrect connection string. 
Check the inner exceptions for details and ensure that the connection string is correct. 
```

我没有内在的例外，所以我在这里不知所措。

**问题**

应该很明显这里的问题是什么。确实有多个问题：

1.  什么可能导致此问题？请记住，它在 IIS express 中运行良好，只需在 VS2012 中进行调试。

2.  这是我的 MVC 应用程序、WCF 应用程序或 IIS 的配置问题吗？它们的组合？

3.  我如何解决它？？

我可以在这里发布很多代码文件和配置文件，但为了阅读起见，我想让它更短一些，如果您想在这里看到代码，请告诉我评论是否可以发布。

**更新**

我按照建议做了并附加到在 IIS 中运行服务的进程。深入研究内部异常似乎是尝试访问数据库的访问/登录问题。

不过，我似乎无法让连接字符串与内置 SQL 用户一起使用，所以我又摸不着头脑了。

这是我正在尝试的连接字符串：

```
<add name="MyDB" connectionString="Server:.;Database=MyDatabase;User Id=SQLAuthUser;Password=yourmom;"  providerName="System.Data.SqlClient"/> 
```

我再次运行该过程，它告诉我指定的用户登录失败，并且我还收到了我以前从未见过的消息：

```
Could not determine storage version; a valid storage connection or a version hint is required. 
```

哈！？

**更新：解决方案**

所以我的连接字符串现在是这样的：

```
<add name="NeumontDB" connectionString="Server=ServerName; Database=NeumontDB; User Id=Username; Password=password;"  providerName="System.Data.SqlClient"/> 
```

而且我还需要设置 sql server 以允许混合模式身份验证。现在我似乎可以毫无问题地使用服务了.. 万岁！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:17:13.327

问题出在您的 WCF 应用程序中，并且很可能与配置有关。要解决此问题，我建议您将调试器附加到托管在 IIS 中的 WCF 并调试 GetUserRecord 方法。

以下是有关如何调试 IIS 中托管的 WCF 服务的一些提示

[调试本地 IIS 中托管的 WCF 服务不起作用](https://stackoverflow.com/questions/3876065/debug-wcf-service-hosted-in-local-iis-not-working)

[调试 IIS 中托管的 asp.net WCF 服务](https://stackoverflow.com/questions/15809865/debugging-asp-net-wcf-service-hosted-in-iis/15813759#15813759)

我怀疑您在连接字符串中使用了 Windows 身份验证，而拥有应用程序池的用户无权访问数据库。如果您的调试显示是这种情况，我建议您将数据库权限分配给 apppool 用户或更改连接字符串以使用 SQL 身份验证

现在对于连接字符串错误，我建议您阅读以下博客条目。

[http://failuresincoding.blogspot.com/2011/12/entity-framework-provider-did-not.html](http://failuresincoding.blogspot.com/2011/12/entity-framework-provider-did-not.html)

另外，您在本地机器上有多个 SQL Server 吗？我建议您使用完整的实例名称而不是“。”

# vb.net - Visual Studio 2012 对象浏览器未使用的引用

> ID：15926631
> 
> 赞同：2
> 
> 时间：2013-04-10T13:02:41.853
> 
> 标签：vb.net, visual-studio-2012, objectbrowser

我从 Visual Studio 2012 项目 (Visual Basic) 中删除了一些未使用的引用，但它们仍然显示在我的对象浏览器 (F2) 中。

有谁知道如何删除这些条目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:08:07.163

我仍然在 bin 目录中有 .dll。删除它们，它们不再出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T13:04:48.233

*对象浏览器允许您选择和检查项目中可用的符号。您可以从视图菜单中打开对象浏览器，或单击主工具栏上的对象浏览器按钮。共有三个窗格：左侧的“对象”窗格、右上方的“成员”窗格和右下方的“描述”窗格。如果您将对象浏览器调整为单列，则“对象”窗格移动到顶部，“成员”窗格移动到中间，“描述”窗格移动到底部。**强文本***

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-10T13:51:04.870

您是否尝试过重建您的项目？

# c# - 另一个“已经有一个打开的 DataReader 关联......”

> ID：15926632
> 
> 赞同：1
> 
> 时间：2013-04-10T13:02:45.493
> 
> 标签：c#, .net, entity-framework, postgresql

任何提示如何关闭`DataReader`？我使用 postgresql，而 MARS 仅适用于 SQL。或者也许我不需要 MARS 来解决这个我不知道的问题。错误显示在 foreach 循环中。谢谢你的提示。

```
var months = (from month in connector.PositionInstance where month.FeeNoticeMonth >= DateTime.Now.Month select month);

foreach (PositionInstance p in months)
{
    System.Windows.MessageBox.Show("" + p.First().Position.Name);
} 
```

编辑：我有两个表 PositionInstance 和 Position：

```
CREATE TABLE "Position"
(
"PositionId" integer NOT NULL DEFAULT,
"Name" character varying(30) NOT NULL,
CONSTRAINT "PK_Position" PRIMARY KEY ("PositionId")
)

CREATE TABLE "PositionInstance"
(
"PositionInstanceId" integer NOT NULL DEFAULT,
"FeeNoticeYear" integer NOT NULL,
"FeeNoticeMonth" integer NOT NULL,
CONSTRAINT "PK_PositionInstance" PRIMARY KEY ("PositionInstanceId"),
CONSTRAINT "FK_Position_PositionInstance" FOREIGN KEY ("PositionId")
REFERENCES "Position" ("PositionId") MATCH SIMPLE
ON UPDATE NO ACTION ON DELETE NO ACTION 
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T15:18:21.217

由于延迟加载（发生在`foreach`循环内部），此问题可能发生在您的情况下。它试图`Position`在循环的每次迭代中从数据库中加载每个。

`Positions`解决此问题的一种方法是使用急切加载在您的查询中一次获取所有内容。然后，如果您还使用贪婪操作（例如`ToList()`在查询结束时），则会执行数据库并一次性提取所有内容。在你的情况下尝试类似

```
var months = 
    (from month in connector.PositionInstance 
     where month.FeeNoticeMonth >= DateTime.Now.Month 
     select month).Include("Position").ToList(); 
```

或一些变化。在查询之后使用 use`ToList()`会将变量类型`months` 为 a `List`（它是 an `IEnumerable`），其中包含来自数据库的填充结果；否则`months`将是`IQueryable`尚未执行的数据库查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:07:48.280

try to add this in the connection string:

MultipleActiveResultSets=True

# asp.net-mvc - 如何检查 div 标签包含部分视图？

> ID：15926634
> 
> 赞同：0
> 
> 时间：2013-04-10T13:02:54.457
> 
> 标签：asp.net-mvc, html, load, partial-views, onload

我们知道`window.onload`事件只会在页面完全加载时触发。

我想在一个`partial view`完全加载时执行一些操作`div tag` 如何检查？喜欢：`$('divID').`*_* _ ??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:26:41.600

你需要类似的东西：

```
$('#divID').ajaxComplete(function(){
    // do something
}); 
```

当然，前提是我的假设是正确的：您同时使用 AJAX 来填充 DIV 和 Unobtrusive Ajax 库，而不是 Microsoft MVC Ajax 库。

如果 Partial 只是在页面加载时呈现，那么 $(document).ready(function(){}) 将为您提供很好的服务。

# model-view-controller - 如何使用 jquery 在选择器上加载部分视图？

> ID：15926643
> 
> 赞同：0
> 
> 时间：2013-04-10T13:03:25.600
> 
> 标签：model-view-controller

```
 var uri="@Url.Content("/Views/Shared/_LogOnPartial")";

        $("#logindisplay").load(uri); 
```

它给了我错误

```
Files with leading underscores ("_") cannot be served. 
```

为什么网址不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T12:22:22.100

您可以使用以下代码在 ~/Views/Shared/ 文件夹中加载部分视图。

```
<script type="text/javascript">
        $(document).ready(function () {
            $("#btnclick").click(function () {
                var uri = '@Url.Content("_LogOnPartial")';
                $("#logindisplay").load(uri);
            });
        });
</script> 
```

HTML是，

```
<input type="button" id="btnclick" value="Load View" />

<div id="logindisplay">
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T10:02:55.023

你应该使用 "@Html.Partial("/Views/Shared/_LogOnPartial)

加载部分而不是 @Url.Content("/Views/Shared/_LogOnPartial")

最佳实践是在 App_Start/RouteConfig 写入方法中定义局部、布局和视图的路径，如下所示 public static void RegisterViewEngines(ICollection engine) { /* * {0} = view name * {1} = controller name */engines。清除（）;

```
 engines.Add(new RazorViewEngine
        {
            ViewLocationFormats = new[] { "~/Views/{0}.cshtml" },
            MasterLocationFormats = new[] { "~/Views/Shared/{0}.cshtml" },
            PartialViewLocationFormats = new[] { "~/Views/Partial/{0}.cshtml" }
        });
    } 
```

然后在 Globa.asax 中执行它，如 RouteConfig.RegisterViewEngines(ViewEngines.Engines);

然后你可以像这样轻松地调用部分

```
@Html.Partial("_LogOnPartial"); 
```

# android - Is it possible to create android app with data base using phonegap

> ID：15926644
> 
> 赞同：1
> 
> 时间：2013-04-10T13:03:29.100
> 
> 标签：android, cordova, phonegap-plugins, phonegap-build

I am creating developing one .apk application using phonegap. Shall i create local database in android mobile.

Because some one told me that you have to create online database, if you are creating .apk file using phonegap. Phonegap will not allow to create database for locally for android phone.

As per example..

I am creating my personal dairy application on phonegap for android mobile. I have create database of dairy on server online. I can not create database locally in android phone.

I request yo guide me for my this query.

Thanks, - Rushabh Gandhi

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:05:02.423

No need phone gap itself gives you the functionality to add data into data base into the device only.

Read the official docs there are two modes of storage in phonegap

1.  Local Storage
2.  Database

including database option

check out this link [http://docs.phonegap.com/en/2.6.0/cordova_storage_storage.md.html#Storage](http://docs.phonegap.com/en/2.6.0/cordova_storage_storage.md.html#Storage) for learning **How to use database in android using phonegap**

and If you want to write native codes

Then you can create your own plugins

Take a look at this simple plugin like this one [https://github.com/brodyspark/PhoneGap-SQLitePlugin-Android](https://github.com/brodyspark/PhoneGap-SQLitePlugin-Android)

If you want tutorials on how write plugins in phonegap for android then read this official tutorial. [http://docs.phonegap.com/en/2.6.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android](http://docs.phonegap.com/en/2.6.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android)

# php - 用php保存后如何让文本保留在textarea中？

> ID：15926645
> 
> 赞同：0
> 
> 时间：2013-04-10T13:03:33.063
> 
> 标签：php, textarea

我正在制作一个笔记页面。用户可以在 textarea 中添加注释并按保存，然后将其保存到数据库中。一旦你按下保存，便条就不再存在并且会被清除。我希望页面重新加载时该注释仍然存在。我在这方面做了一些研究，并没有找到太多的运气。有什么方法可以按保存但将文本留在屏幕上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:09:01.560

为此，您需要检查是否在`<textarea>`

```
<textarea name="notes">

   <?php 
      if( isset($_POST['notes']) )
       echo $_POST['notes'];
   ?>

</textarea> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:06:40.823

After submitting the form just echo the post value of the texarea. Something line this if you want to show that in textarea

```
<textarea name="context"><?php echo $_POST['context'];?></textarea> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:12:43.377

一个更简单的替代方案是以下一个。

```
<textarea>
  <?php  
    print (!empty($_POST["notes"]) ? filter_var($_POST["notes"], FILTER_SANITIZE_STRING) : null); 
  ?>
</textarea> 
```

`$_POST`应该对恶意输入进行清理，但这是一个简单的示例，可以让您开始运行。

# javascript - dojox.form.Uploader 中的跨域 xml 错误

> ID：15926646
> 
> 赞同：0
> 
> 时间：2013-04-10T13:03:35.197
> 
> 标签：javascript, xml, http, dojo

我在我的项目中使用 dojo 文件上传组件。如果我从服务器加载 dojo.js 库，一切正常，但是如果我使用 CDN（另一台服务器），则文件上传组件会给出 CROSS DOMAIN XML ERROR 并且不起作用。

我知道问题在于 FLASH 上传组件是从另一台服务器 (CDN) 下载的，因此浏览器认为它是一个跨域 xml 请求。

***有没有人有办法解决这个问题？***请注意，如果我从服务器加载 dojo 库，则一切正常，但整体页面加载速度非常慢。这就是我们使用 CDN 的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:49:55.997

我想到了。实际上，我们必须创建一个文件名 crossdomain.xml 并将其放在我们域的根目录中。例如，Yahoo 使用了 google flash 组件，它是从 yahoo 网站的 google 服务器加载的。因此，如果该 flash 组件尝试与 yahoo 服务器通信，则浏览器将尝试从 yahoo Web 服务器下载 crossdomain.xml 文件，并查看是否允许 google 域。

在我的情况下，我使用了 DOJO CDN，并且在 crossdomain.xml 文件中允许后，该组件运行良好。文件格式如下：

```
<!DOCTYPE cross-domain-policy SYSTEM 
"http://www.adobe.com/xml/dtds/cross-domain-policy.dtd">

<cross-domain-policy>
  <site-control permitted-cross-domain-policies="master-only"/>
  <allow-access-from domain="ajax.googleapis.com"/>
  <allow-access-from domain="yui.yahooapis.com"/>
</cross-domain-policy> 
```

@CBroe 感谢您的宝贵意见。

# javascript - 无法在 chrome.sockets API 中读取 Undefined TypeError 的属性套接字

> ID：15926649
> 
> 赞同：0
> 
> 时间：2013-04-10T13:03:39.467
> 
> 标签：javascript, sockets, google-chrome

我正在编写一个使用套接字与 Java 服务器通信的 chrome JS 扩展。当我使用以下行时：

```
var socket = chrome.socket || chrome.experimental.socket;
socket.create('tcp',{},function(createInfo) { 
```

我明白了

```
Error in event handler for 'tabs.onUpdated': Cannot read property 'socket' of undefined TypeError: Cannot read property 'socket' of undefined 
```

错误（JS 代码在 tabs.onUpdated 函数中）。

我的清单文件是：

```
{
      "manifest_version": 2,

  "name": "MitM Phishing Detector",
  "description": "This extension protects your browser against phishing attacks based on MitM attacks",
  "version": "1.0",

  "background": {
    "scripts": ["notify.js"],
    "persistent": false
  },

  "browser_action": {
    "default_icon": "bluetooth_device.png",
    "default_popup": "choose_device.html"
  },

  "permissions": [
      "tabs", 
      "http://*/*", 
      "background", 
      {"socket": 
       [ "tcp-connect:127.0.0.1:8081" ] 
      },
      "notifications"
  ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:09:40.290

如果您使用的是 Chrome 的金丝雀/实验性版本，您应该能够做到

```
chrome.experimental.socket.create('tcp', ...) 
```

打开一个 TCP 套接字。但只是打电话是`socket.create`行不通的。

请记住，这可能只会在 chrome 上工作...... WebSockets 是一个更便携的解决方案。

要正确设置套接字，我认为这应该可以工作（尚未测试）：

```
var socket = chrome.socket;
if (unfefined !== chrome.experimental.socket)
  socket = chrome.experimental.socket;
if (undefined === chrome.socket)
  throw "Socket unavailable" 
```

# java - 在 apache-tomcat-6.0.36/lib 中加载的驱动程序，但仍然得到没有找到合适的驱动程序

> ID：15926654
> 
> 赞同：0
> 
> 时间：2013-04-10T13:03:53.667
> 
> 标签：java, apache, tomcat

我正在使用轴 2 和 apache tomcat 在 eclipse helios 中学习 Web 服务。我有两个带有 java 类的动态 web 项目，当我在 eclipse 中将它们作为简单的 java 类运行时，它们成功连接到两个数据库。（我已将外部 jar 添加到项目的外部构建路径中）。但是当我在服务器上运行时，我得到一个错误：`No suitable driver found`. 我知道我需要[加载必要的驱动程序](http://www.postgresql.org/message-id/AANLkTinG_zY7VsxYk9ESo0OZ3iYTpVt6NfuZVQh3_8fZ@mail.gmail.com)并且`apache-tomcat-6.0.36/lib`我已经这样做了（并重新启动了服务器）。（请参阅[未找到合适的驱动程序](https://stackoverflow.com/questions/10447041/no-suitable-driver-found)）。

我使用此语句在我的 Java 类中创建驱动程序：

```
Class.forName("org.postgresql.Driver"); //throws class not found exception w/message "com.postgresql.jdbc.Driver"
conn = DriverManager.getConnection(url, user, password); 
```

为什么 apache 不“看到”其 /lib 文件夹中的 .jar 驱动程序？一些较旧的教程说将 .jars 放在 common/lib 中——但我在我的 apache tomcat 目录结构中看不到该文件夹​​。我能做些什么来调试这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:08:11.160

根据您使用的 Java 版本（以及 JDBC 版本），您可能需要`Class.forName()`在调用`DriverManager.getConnection(...)`. 这会强制 JVM 加载该类，以便 JDBC 知道该类是您的连接类型的驱动程序。否则，JDBC 不知道您的数据库类型的驱动程序，因此会吐出“找不到合适的驱动程序”。

如果您使用 Java 7（因此使用 JDBC 4.0）在 Eclipse 中运行您的类，那么在您的类路径中找到的驱动程序会自动加载。对于 7 之前的 Java 版本（因此 4.0 之前的 JDBC），您必须手动注册您的驱动程序，就像解释的那样。有关详细信息，请参阅[JDBC 教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/connecting.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T21:11:59.360

如果此行未注释`${CATALINA_HOME}/conf/server.xml`：

```
 <Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener" /> 
```

将其更改为：

```
<Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener" driverManagerProtection="false" /> 
```

这将使 Tomcat 恢复`pre-6.0.35`正常功能，它在`${CATALINA_HOME}/lib`.

# scala - Scala 中类型类的动机是什么？

> ID：15926655
> 
> 赞同：9
> 
> 时间：2013-04-10T13:03:57.193
> 
> 标签：scala, design-patterns, typeclass, type-bounds

与类型的上限进行比较时，我在激励 Scala 中使用类型类时遇到了一些麻烦。

考虑以下代码：

```
 case class NumList[T <: Complex](xs: Complex*) {
    def sum = (xs fold new Complex(0, 0))(_ + _)
    def map[U <: Complex](f: Complex => U): NumList[U] = NumList(xs.map(f): _*)
    override def toString = "[" + xs.mkString(", ") + "]"
  }

  case class GenList[T](xs: T*) {
    def sum(implicit num: Numeric[T]) = xs.sum
    def map[U](f: T => U) = GenList(xs.map(f): _*)
    override def toString = "[" + xs.mkString(", ") + "]"
  }

  val r = new Real(2)
  val n = new Natural(10)
  val comps = NumList(r, n, r, n)

  println(comps)
  println("sum: " + comps.sum)
  println("sum * 2: " + comps.map(x => x + x).sum)

  val comps2 = GenList(4, 3.0, 10l, 3d)
  println(comps2)
  println("sum: " + comps2.sum)
  println("sum * 2: " + comps2.map(_ * 2).sum) 
```

虽然这两个列表解决了类似的问题，但一个使用数字类型类，另一个使用类型参数的上限。我非常了解技术差异，但我很难理解类型类的核心动机。到目前为止，我发现的最佳动机如下：

虽然子类化或实现接口允许您进行几乎相同的设计，但类型类允许您在每个方法的基础上指定类型的特征，而具有类型`T`和上限的泛型类在使用它的任何地方都受到`U`约束。`T`考虑到这一点，类型类在泛型类中对 T 的特性提供了更细粒度的控制。

有没有非常明确的例子可以激发这种模式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T13:54:22.513

试图简化一个主要方面，类型类试图独立于你的类层次来收集行为。

假设您需要定义一个新的数字类型（使用标准数字运算），但无论出于何种原因，`MetaNum`您都不能或不会将其设为您的类型的子类。`Complex`

使用`Numeric`typeclass，您只需要为您的 提供适当的实例`MetaNum`，提供所需的操作。

然后你可以创建一个`GenList[MetaNum]`并对其求和。

你不能用`NumList`, 因为`MetaNum`不是`Complex`. 当您尝试在第二个时刻概括您的操作/数据结构时，您在定义时所做的实现选择`NumList`将反击您。

*结论*
Typeclasses 使您可以更自由地扩展您的行为，而不受分层考虑的影响，但代价是一些额外的复杂性和样板文件。

我不知道你在你的问题中是否有同样的意思。

# design-patterns - 如何跟踪 UI 表单的更改？

> ID：15926662
> 
> 赞同：1
> 
> 时间：2013-04-10T13:04:07.637
> 
> 标签：design-patterns, reporting

我希望能够跟踪用户在特定 UI 表单上所做的操作。

例如 - 用户从组合框中选择产品、填写文本字段等。有些字段是有条件的，这意味着它们只有在选择了一些先前的选项时才可见。

我希望能够在任何给定时刻跟踪他的选择 - 基本上我想要一份由用户在填写表格时采取的单个事件组成的报告。

我想到了[责任链](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)模式的一种变体：

```
public interface Chain{
    setNextChain(Chain next);
    getNextChain();
    setPrevChain(Chain prev);
    getPrevChain();
}

 public class Field implements Chain {
       // All of the chaining implementation...
       // All of the Action's members... 
       private string[] actionData;
     }

public class Product extends Field{
        // old Product logic  integrated within the chain...
     }

public class AdName extends Field{
       // old Product logic  integrated within the chain...
     } 
```

不确定这是否是正确的方法，并且会感谢您对设计的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:10:12.847

这个想法没问题，但对我来说它看起来更像是一个[Commands](http://en.wikipedia.org/wiki/Command_pattern)列表。[命令模式](http://en.wikipedia.org/wiki/Command_pattern)通常用于记住用户操作，然后可以在必要时轻松撤消。

“责任链”模式并不是您在这里所需要的，因为您的`Field`对象实际上并不需要对前一个和下一个元素的引用。您唯一需要的是用户执行的操作列表。因此，您不需要`Chain`带有 getNext()/getPrevious() 方法的接口。您基本上可以将所有`Field`实例保存在 a 中`List`并向前/向后导航列表。

```
interface Command {
}

class ProductSelection implements Command {
   Product selectedProduct;
}

class AdNameSelecton implements Command {
   String selectedAdName;
}

List<Command> actions = new ArrayList<Command>();

// when user selects product
actions.add(new ProductSelection(product));
// when user selects ad name
actions.add(new AdNameSelection(name)); 
```

# java - JXdatepicker : 编辑不可选择日期的红十字颜色

> ID：15926663
> 
> 赞同：0
> 
> 时间：2013-04-10T13:04:07.863
> 
> 标签：java, swing, swingx

我正在研究 JXdatepicker，我无法修改不可选择日期的红色，

我找到了一个关于它的主题，但它不起作用“设置以下`UIDefaults`属性`JXMonthView.unselectableDayForeground`

请提供任何帮助，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-10T06:42:40.400

因为我急着回答这个问题

但您可以从这里使用 swingx 源代码 [https://github.com/cuba-platform/swingx-core/tree/master/src/main/java/org/jdesktop/swingx](https://github.com/cuba-platform/swingx-core/tree/master/src/main/java/org/jdesktop/swingx)

然后转到 JXDatepicker.java 中的函数 initMonthview 用这个 Color.Black 覆盖它，您可以使用自己的颜色。这解决了当您有一个 jlabel 文本颜色为白色的 plaf 并且它以 JXdatepicker 的背景颜色隐藏时的问题。

```
 private void initMonthView() {
        _monthView = new JXMonthView();
//        _monthView.setSelectionModel(new SingleDaySelectionModel());
        _monthView.setTraversable(true);
        _monthView.addPropertyChangeListener(getMonthViewListener());
        _monthView.setDayForeground(Calendar.SUNDAY, Color.black);
        _monthView.setDayForeground(Calendar.MONDAY, Color.black);
        _monthView.setDayForeground(Calendar.TUESDAY, Color.black);
        _monthView.setDayForeground(Calendar.WEDNESDAY, Color.black);
        _monthView.setDayForeground(Calendar.THURSDAY, Color.black);
        _monthView.setDayForeground(Calendar.FRIDAY, Color.black);
        _monthView.setDayForeground(Calendar.SATURDAY, Color.black);

    } 
```

然后设置您喜欢的颜色然后将其导出为罐子玩得开心。

或者更确切地说，您可以完成可插拔外观和感觉的艰苦工作。

或者，您可以在 JXDatepicker.java 中创建一个新的构造函数，该构造函数采用具有特定颜色集的 JXMonthview 对象

意味着创建一个对象

```
_monthView = new JXMonthView();
//        _monthView.setSelectionModel(new SingleDaySelectionModel());
         _monthView.setTraversable(true);
        _monthView.addPropertyChangeListener(getMonthViewListener());
        _monthView.setDayForeground(Calendar.SUNDAY, Color.black);
        _monthView.setDayForeground(Calendar.MONDAY, Color.black);
        _monthView.setDayForeground(Calendar.TUESDAY, Color.black);
        _monthView.setDayForeground(Calendar.WEDNESDAY, Color.black);
        _monthView.setDayForeground(Calendar.THURSDAY, Color.black);
        _monthView.setDayForeground(Calendar.FRIDAY, Color.black);
        _monthView.setDayForeground(Calendar.SATURDAY, Color.black); 
```

现在添加

创建一个新的构造函数

```
JXDatepicker(JXMonthView temp){
_monthview = temp;
 JXDatepicker();

} 
```

将其导出为 jar 使用它。

# json - 将 JSON 文件加载到 Backbone 集合

> ID：15926668
> 
> 赞同：1
> 
> 时间：2013-04-10T13:04:13.837
> 
> 标签：json, backbone.js

您好我正在寻找将 JSON 加载到 Backbone 集合的适当解决方案。我看到很多关于这个问题的帖子，但我仍然不明白如何正确地做到这一点。例如，你能解释一下为什么这个项目不起作用吗？ [http://blog.joelberghoff.com/2012/07/22/backbone-js-tutorial-part-1/](http://blog.joelberghoff.com/2012/07/22/backbone-js-tutorial-part-1/)

**编辑：**
当我使用 Firebug 查看结果时，它显示了一个空对象，集合为空。为什么？
**编辑：**
嗯，仍然不起作用：/现在我在萤火虫和一页中看不到任何东西。:(

```
 $(function() {
            var Profile = Backbone.Model.extend();

            var ProfileList = Backbone.Collection.extend({
                model: Profile,
                url: 'profiles.json'
            });   

            var ProfileView = Backbone.View.extend({
                el: "#profiles",
                template: _.template($('#profileTemplate').html()),
                render: function(eventName) {
                    _.each(this.model.models, function(profile){
                        var profileTemplate = this.template(profile.toJSON());
                        $(this.el).append(profileTemplate);
                    }, this);

                    return this;
                }
            });

            var profiles = new ProfileList();    
            var profilesView = new ProfileView({model: profiles});
            var profiles = new ProfileList(); 
            profiles.fetch();
            profiles.bind('reset', function () {
                console.log(profiles);
                profilesView.render();
            });

        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:29:47.360

您的 fetch 调用是异步的，因为我确信它是在教程中编写的。因此，当您执行 时`console.log`，您的集合仍然是空的。
在教程中更进一步..：

```
var profiles = new ProfileList(); 
profiles.fetch({reset: true});
profiles.bind('reset', function () { console.log(profiles); }); 
```

这应该有效。

# jquery - 使用 JQuery 的目标类

> ID：15926671
> 
> 赞同：0
> 
> 时间：2013-04-10T13:04:20.320
> 
> 标签：jquery, json

我有以下代码，

```
<span class="rpText">
  <img class="favMenuItemImg" alt="arrow" src="Images/rightArrow.png">
  <b>
     <i>New Products</i>
  </b>
</span>

<span class="rpText">
  <img class="favMenuItemBlankImg" alt="" src="Images/transparent.png">
    Profile
  </span>
</span> 
```

我想定位 favMenuItemBlankImg 类，如果有这个类，只设置最喜欢的图像。

我尝试了以下 JQuery：-

```
for (var i = 0; i < items.get_count() ; i++) {
    if (!$(this).siblings('span.rpText.favMenuItemBlankImg '))
    {
        items.getItem(i).set_imageUrl("Images/favorites_small.png");
    }
} 
```

但这不起作用。

JQUERY 更新------------------------------------------------ ---------

```
if (item.get_text() == "Favorites") {
    panelItem = panel.findItemByText(item.get_text());
    var items = panelItem.get_items();

    for (var i = 0; i < items.get_count() ; i++) {

        $('img.favMenuItemBlankImg').each(function () {
            $(this)[i].getItem(i).set_imageUrl("Images/favorites_small.png");
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:26:17.803

查找具有类的项目并设置 src？

```
$('img.favMenuItemBlankImg').attr('src',"Images/favorites_small.png"); 
```

编辑每条评论：也许像这些索引值？

```
$('img.favMenuItemBlankImg').each(function(i){
   $(this)[i].set_imageUrl("Images/favorites_small.png");
}); 
```

或者

```
$('img.favMenuItemBlankImg').each(function(i){
   $(this)[i].getItem(i).set_imageUrl("Images/favorites_small.png");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:13:11.660

一个更好的方法是使用一个`title`给文本加粗和斜体的类，然后搜索那个类。

CSS

```
.title {
    font-weight: bold;
    font-style: italic;
} 
```

的HTML

```
<span class="rpText">
    <img class="favMenuItemImg" alt="arrow" src="Images/rightArrow.png">
    <span class="title">New Products</span>
</span>

<span class="rpText">
    <img class="favMenuItemImg" alt="" src="Images/transparent.png">
    <span>
        Profile 
    </span>
</span> 
```

jQuery

```
$("img.favMenuItemImg").next().each(function() {
    if ($(this).hasClass("title")) {
        //do what you want
    }
}); 
```

这是一个演示这个概念的小提琴：http: [//jsfiddle.net/xAPfu/](http://jsfiddle.net/xAPfu/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:24:30.780

正如@tymeJV 建议的那样，在您的代码中使用 font-weight 和 font-style 肯定会更好，但如果您坚持使用`<b>`and `<i>`，您可以像这样选择查找“标题”：

```
$.each($('.rpText'),function(i,e){
    if ($(e).find('b').length>0) {
       alert ($(this).html()); //this element has 'b'
    }
}); 
```

# google-calendar-api - 开发人员控制台上的 Google Calendar Api 错误请求 400 事件

> ID：15926676
> 
> 赞同：2
> 
> 时间：2013-04-10T13:04:26.547
> 
> 标签：google-calendar-api, google-oauth

我创建了项目并使用[https://code.google.com/apis/console](https://code.google.com/apis/console)注册了它 （我选择了“其他”应用程序类型）。然后我得到了已安装应用程序的“客户端 ID”。

然后我去控制台并创建事件，并使用 oauth 2 授权。 [https://developers.google.com/google-apps/calendar/v3/reference/events/insert](https://developers.google.com/google-apps/calendar/v3/reference/events/insert) 一切正常。

```
 POST https://www.googleapis.com/calendar/v3/calendars/primary/events?key={YOUR_API_KEY}

Content-Type:  application/json
Authorization:  xxx
X-JavaScript-User-Agent:  Google APIs Explorer

{
 "end": {
  "dateTime": "2013-1-16T10:00:00.000-07:00"
 },
 "start": {
  "dateTime": "2013-1-16T10:00:00.000-07:00"
 }
} 
```

回复

```
200 OK

- Show headers -

{

 "kind": "calendar#event",
 "etag": "\"WANTVF5ixxZ04U_VtQ0AZ3MbAlM/Z2NhbDAwMDAxMzY1NjU0MzAwNTk1MDAw\"",
 "id": "2nsuis19mkp2q0uef54tl5nk68",
 "status": "confirmed",
 "htmlLink": "https://www.google.com/calendar/event?eid=Mm5zdWlzMTlta3AycTB1ZWY1NHRsNW5rNjggaXZhbjEzMzEzM0Bt",
 "created": "2013-04-11T04:25:00.000Z",
 "updated": "2013-04-11T04:25:00.595Z",
 "creator": {
  "email": "ivan133133@gmail.com",
  "displayName": "ivan rozhcov",
  "self": true
 },
 "organizer": {
  "email": "ivan133133@gmail.com",
  "self": true
 },
 "start": {
  "dateTime": "2013-01-16T21:00:00+04:00"
 },
 "end": {
  "dateTime": "2013-01-16T21:00:00+04:00"
 },
 "iCalUID": "2nsuis19mkp2q0uef54tl5nk68@google.com",
 "sequence": 0,
 "reminders": {
  "useDefault": true
 }
} 
```

然后我复制了 id 并更新了这个事件。 [https://developers.google.com/google-apps/calendar/v3/reference/events/update](https://developers.google.com/google-apps/calendar/v3/reference/events/update) update 我第一次收到 200 响应。

```
PUT https://www.googleapis.com/calendar/v3/calendars/primary/events/2nsuis19mkp2q0uef54tl5nk68?key={YOUR_API_KEY}

Content-Type:  application/json
Authorization:  Bearer ya29.AHES6ZRmo6pdxj8pY4NmzdI1estRNB-v87XV7xQHgyhrWHk2rzs3Ke8
X-JavaScript-User-Agent:  Google APIs Explorer

{
 "end": {
  "dateTime": "2013-1-16T10:00:00.000-07:00"
 },
 "start": {
  "dateTime": "2013-1-16T10:00:00.000-07:00"
 }
} 
```

但是当我再次尝试时，我总是得到 400 错误，错误文本写在下面。

[https://developers.google.com/google-apps/calendar/v3/reference/events/update](https://developers.google.com/google-apps/calendar/v3/reference/events/update)更新

```
400 Bad Request

cache-control:  private, max-age=0
content-encoding:  gzip
content-length:  123
content-type:  application/json; charset=UTF-8
date:  Wed, 10 Apr 2013 12:49:29 GMT
expires:  Wed, 10 Apr 2013 12:49:29 GMT
server:  GSE

{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "invalid",
    "message": "Invalid Value"
   }
  ],
  "code": 400,
  "message": "Invalid Value"
 }
} 
```

谁能解释一下，如果那是 google.api 错误，或者我在哪里弄错了？

我已经从differret帐户和PC上尝试过（通过Google APIs Explorer和python库，结果相同）

今天我试图重现那个错误。但是everring现在工作正常。我在谷歌代码中创建了一个问题 [http://code.google.com/a/google.com/p/apps-api-issues/issues/detail?id=3371&thanks=3371&ts=1365599378](http://code.google.com/a/google.com/p/apps-api-issues/issues/detail?id=3371&thanks=3371&ts=1365599378) 仍然没有答案。

我认为这是 temporaru 错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T22:17:52.667

400 几乎总是意味着您的身份验证 URL 中有一个简单的语法错误。最常见的原因是您未能通过 URL 转义您的范围或重定向，或者不止一次地对其进行了 URL 转义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-21T19:00:45.183

检查这个：[Google Calendar API - 只能更新一次事件](https://stackoverflow.com/questions/9691665/google-calendar-api-can-only-update-event-once) ，这个：[Google Calendar api v3 re-update issue](https://stackoverflow.com/questions/8574088/google-calendar-api-v3-re-update-issue)

当您更改事件的日期/时间时，需要增加序列号，这就是您收到 400 - Bad request 的原因。

这就是我使用java客户端库解决它的方法。

mGoogleCalendarEvent 包含有关事件的更新信息。首先，从 GoogleCalendar 获取此事件的序列号：

```
mGoogleCalendarEvent.setSequence(mService.events().get(mCalendarId,mGoogleCalendarEvent.getId()).execute().getSequence()); 
```

然后执行更新：

```
mService.events().update(mCalendarId, mGoogleCalendarEvent.getId(),mGoogleCalendarEvent).execute(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T14:03:13.143

我使用补丁而不是更新，现在它工作正常。但是真的不明白为什么更新第一次成功，第二次和其他时间失败。完全神秘。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-24T07:32:34.760

使用 Google APIs Client Library for Javascript 访问 Google Calendar API 时发现了完全相同的问题。如果我尝试更新日历事件的开始日期，就会发生这种情况。更新结束数据是没有问题的。真的很奇怪。

幸运的是，我也能够通过用补丁替换更新来解决这个问题。

# silverlight - 列表框后的按钮

> ID：15926679
> 
> 赞同：3
> 
> 时间：2013-04-10T13:04:39.970
> 
> 标签：silverlight, windows-phone-7, windows-phone-8, windows-phone

我需要显示`ListBox`动态内容（所以我不知道它的高度）及其`Button`下方。所以用户应该能够滚动 ListBox 以结束并查看按钮。

在 Android 中，我会使用`RelativeLayout`和`below`属性作为按钮或其他解决方案，但在 WP 中我不知道该怎么做。

我尝试过的：

1) 全部投入`StackPanel`

```
<StackPanel>
    <ListBox />
    <Button />
</StackPanel> 
```

**这不起作用，因为 StackPanel 阻止了 ListBox 滚动。**

2) 好的，让我们将 ListBox 放入 Grid

```
<StackPanel>
    <Grid>
        <ListBox />
    </Grid>
    <Button />
</StackPanel> 
```

什么都没发生。

3）将所有内容放入 Grid 并使用 Grid.Row 不起作用。

4）让我们全部投入并动态`Grid`设置边距`Button`

```
<Grid>
    <ListBox />
    <Button />
</Grid> 
```

**好的，这是可行的，但这不是一个好的解决方案，因为我需要`ListBox`每次处理填充并重置按钮的边距。坏坏坏。**

PS 另外，我可以将按钮作为 ListBox 项目（不错，但不好:)

请帮帮我...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T13:30:59.573

如果我理解正确，您需要一个像这样定义的简单 Grid：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <ListBox />
    <Button Grid.Row="1" Height="80"/>
</Grid> 
```

通过将零行的高度设为“星形”并将第一行设为 Auto，ListBox 将填充剩余空间，而 Button 仅 80（您可以将其更改为您喜欢的任何内容）。ListBox 会自动放到第 0 行，因为如果没有明确设置，这是默认设置。

如果您不想将按钮固定在页面上而是使用 ListBox 滚动，您可以像这样编辑 ListBox 模板：

```
<Style x:Key="ListBoxWithButtonStyle" TargetType="ListBox">
    <Setter Property="Background" Value="Transparent"/>
    <Setter Property="Foreground" Value="{StaticResource PhoneForegroundBrush}"/>
    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>
    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
    <Setter Property="BorderThickness" Value="0"/>
    <Setter Property="BorderBrush" Value="Transparent"/>
    <Setter Property="Padding" Value="0"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ListBox">
                <ScrollViewer x:Name="ScrollViewer" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Foreground="{TemplateBinding Foreground}" Padding="{TemplateBinding Padding}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <ItemsPresenter/>
                        <Button Content="Touch me" Height="80" Grid.Row="1"/>
                    </Grid>
                </ScrollViewer>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

然后应用于 ListBox：

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
    <ListBox Style="{StaticResource ListBoxWithButtonStyle}">

    </ListBox>
</Grid> 
```

# asp.net - WCF REST 服务中的操作已超时

> ID：15926683
> 
> 赞同：0
> 
> 时间：2013-04-10T13:04:56.087
> 
> 标签：asp.net, wcf, web-services, rest, wcf-rest

我使用 WCF [REST Service Template 40(CS)](http://visualstudiogallery.msdn.microsoft.com/fbc7e5c1-a0d2-41bd-9d7b-e54c845394cd)创建了一个 Web 服务。当我尝试使用它来消耗它时

```
 var request = WebRequest.Create(string.Concat(serviceUrl, resourceUrl)) as HttpWebRequest;
   if (method == "POST" && requestBody != null)
            {
                byte[] requestBodyBytes = ToByteArrayUsingJsonContractSer(requestBody);
                request.ContentLength = requestBodyBytes.Length;
                using (Stream postStream = request.GetRequestStream())
                    postStream.Write(requestBodyBytes, 0, requestBodyBytes.Length);

            }

var response = request.GetResponse() as HttpWebResponse; 
```

我不断得到：

**操作已超时**

如何增加超时？我是否需要在服务或使用此服务的客户端中增加它的 url：

[http://myservice.com/RecordingCompleted/](http://myservice.com/RecordingCompleted/)

请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:21:20.583

在调用 WEB 服务之前尝试此代码。

```
request.Timeout = 5000; 
```

# wpf - 从 Xml 数据源 (XmlDataProvider) 设置选定的 ComboBoxItem

> ID：15926692
> 
> 赞同：1
> 
> 时间：2013-04-10T13:05:29.523
> 
> 标签：wpf, xpath, combobox

如何在 ComboBox 中显示当前选定的项目？选择哪个项目的信息存储在 XML 文件中。

它在应用程序启动时的外观：

![现在的情况](https://i.stack.imgur.com/u4YK1.png)

它在应用程序启动时的外观：

![期望的情况](https://i.stack.imgur.com/YEHcb.png)

XML 数据源如下所示：

```
<Contact>
  <Name>John</Name>
  <Lastname>Doe</Lastname>
  <Gender>Male</Gender>
</Contact> 
```

这就是我尝试过的（在许多其他变体中）

```
<ComboBox SelectedItem="{Binding XPath=Contact/Gender, Mode=TwoWay}" Name="cmbGender" Width="100" >
   <ComboBoxItem Content="Male" />
   <ComboBoxItem Content="Female" />
</ComboBox> 
```

我想这就是没有 XmlDataProvider 的方式。有没有办法用 XPath 表达式设置 IsSelected？

```
<ComboBox Name="cmbGender" Width="100" >
   <ComboBoxItem Content="Male" IsSelected="True"/>
   <ComboBoxItem Content="Female" />
</ComboBox> 
```

**编辑：** 这就是我设置数据源的方式：

```
<Grid>
    <Grid.DataContext>
        <XmlDataProvider x:Name="DataProvider" XPath="/" />
    </Grid.DataContext>

     // Binding is working fine
    <TextBox Name="txtLastname" Width="100" Text="{Binding XPath=Contact/Lastname, UpdateSourceTrigger=PropertyChanged}" />

    // not working
    <ComboBox SelectedItem="{Binding XPath=Contact/Gender, Mode=TwoWay}" Name="cmbGender" Width="100" >
       <ComboBoxItem Content="Male" />
       <ComboBoxItem Content="Female" />
    </ComboBox>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:09:40.647

Text 属性是关键，它是这样工作的：

```
<ComboBox Text="{Binding XPath=Contact/Gender, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" Name="cmbGender" Width="100">
     <ComboBoxItem Content="Male" />
     <ComboBoxItem Content="Female" />
</ComboBox> 
```

# c#-4.0 - 在 Windows 8 应用程序中设置启动页面

> ID：15926694
> 
> 赞同：1
> 
> 时间：2013-04-10T13:05:40.963
> 
> 标签：c#-4.0, windows-8

我从模板拆分应用程序 (XAML) 为 Windows 应用商店 (C#) 创建新项目，并且我想将启动页面从 ItemsPage.xaml 更改为 SplitPage.xaml。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T13:36:00.500

1.  打开 App.xaml.cs
2.  搜索`if (!rootFrame.Navigate(typeof(ItemsPage), "AllGroups"))`
3.  根据您的情况，更改`ItemsPage`为您要首先打开的任何页面`SplitPage`。

# go - Golang中的“小于后跟破折号”（<-）运算符是什么？

> ID：15926697
> 
> 赞同：34
> 
> 时间：2013-04-10T13:05:47.560
> 
> 标签：go

`<-`go语言中的运算符是什么？在许多与 Go 相关的代码片段中都看到了这一点，但它的含义是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-13T01:50:36.183

你已经得到了答案，但是这里有。

将通道视为消息队列。

如果通道在左箭头 (<-) 运算符的右侧，则表示将条目出列。将条目保存在变量中是可选的

```
e <- q 
```

如果通道在左箭头运算符的左侧，则表示将条目入队。

```
q <- e 
```

关于“出队”（接收）而不存储在变量中的进一步说明：它可以用于非缓冲队列以在 Java 中实现类似“等待/通知”操作：一个协程被阻塞等待出队/接收信号，然后另一个协程排队/发送该信号，其内容并不重要。（或者，发送者可能会被阻止，直到接收者拉出消息）

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-10T13:26:48.027

`<-`在语言规范中不止一处使用：

> [渠道类型](https://golang.org/ref/spec#Channel_types)：
> 
> `<-`操作员指定通道方向，发送或接收。如果没有给出方向，则通道是双向的。通道可能被限制为仅发送或仅通过转换或分配接收。
> 
> [接收运营商](https://golang.org/ref/spec#Receive_operator)：
> 
> 对于`ch`通道类型的操作数，接收操作`<-ch`的值是从通道接收到的值`ch`。值的类型是通道的元素类型。表达式阻塞，直到有值可用。从零通道接收永远阻塞。从关闭的通道接收总是成功，立即返回元素类型的零值。
> 
> [发送声明](https://golang.org/ref/spec#Send_statements)：
> 
> 发送语句在通道上发送一个值。通道表达式必须是通道类型，并且值的类型必须可分配给通道的元素类型。
> 
> ```
> SendStmt = Channel "<-" Expression .
> Channel  = Expression . 
> ```

接收运算符也是[select 语句的基本部分](https://golang.org/ref/spec#Select_statements)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T13:10:03.060

> [接收算子](http://golang.org/ref/spec#Receive_operator)
> 
> 对于`ch`通道类型的操作数，接收操作 `<-ch`的值是从通道接收到的值`ch`。

它从通道接收一个值。见[http://golang.org/ref/spec#Receive_operator](http://golang.org/ref/spec#Receive_operator)

# c++ - 使用 C++ 读取和打印文本文件时出错

> ID：15926700
> 
> 赞同：0
> 
> 时间：2013-04-10T13:06:01.307
> 
> 标签：c++

我的代码有一个错误（问题末尾的代码）。我的 C++ 可执行文件的目的是读取包含数字的文件，将其复制到 std::vector 中，然后仅在 stdout 中打印内容？问题出在哪里？（阿托伊？）

我有一个简单的文本文件，其中包含以下数字（每行有一个数字）

```
mini01:algorithms ios$ cat numbers.txt 
1
2
3
4
5 
```

当我执行程序时，我又收到一行：

```
mini01:algorithms ios$ ./a.out 
1
2
3
4
5
0 
```

为什么我在标准输出中得到第 6 行？

```
#include <iostream>
#include <string>
#include <fstream>
#include <vector>
using namespace std;

void algorithm(std::vector<int>& v) {

    for(int i=0; i < v.size(); i++) {
        cout << v[i] << endl;
    }

}

int main(int argc, char **argv) {

    string line;
    std::vector<int> vector1;
    ifstream myfile("numbers.txt");
    if ( myfile.is_open()) {
        while( myfile.good() )
        {
            getline(myfile, line);
            vector1.push_back(atoi(line.c_str()));
        }
        myfile.close();
    }
    else {
        cout << "Unable to open file" << endl;
    }

    algorithm(vector1);

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T13:07:28.193

您不应该使用`while (myfile.good())`，因为它会循环一次到多次。

而是使用

```
while (getline(...)) 
```

您不能使用标志来检查循环的原因是，直到输入/输出操作注意到问题（错误或文件结尾）*之后才会设置它们。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T13:07:59.413

不要`good()`用作提取循环的条件。它不能准确地指示下一次读取是否会成功。将您的电话移至`getline`以下条件：

```
while(getline(myfile, line))
{
    vector1.push_back(atoi(line.c_str()));
} 
```

在这种特殊情况下失败的原因是文本文件通常`\n`在文件末尾有一个（文本编辑器不显示）。读取最后一行时，`\n`将从流中提取。是的，这可能是文件中的最后一个字符，但`getline`不关心比`\n`它提取的更远的地方。完成。它不会设置 EOF 标志或做任何其他事情来导致`good()`返回 false。

所以在下一次迭代时，`good()`仍然是`true`，循环继续并`getline`尝试从文件中提取。但是，现在没有什么可提取的了，您只需`line`设置为一个空字符串。然后将其转换为 an`int`并推入`vector1`，从而为您提供额外的价值。

事实上，检查提取是否存在问题的唯一可靠方法是在提取后检查流的状态*位*。最简单的方法是使提取本身成为条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T13:07:42.877

您阅读了太多行，因为在`while`您“阅读错误”之后条件为假。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T13:30:12.217

欢迎来到 C++ 的美妙世界。在我们首先解决错误之前，我建议您`std::`在定义或声明 a 之前删除名称空间解析，`vector`因为您已经拥有

```
using namespace::std; 
```

第二个建议是在可行的情况下`++i`使用预增量运算符。`i++`您可以在[此处](https://stackoverflow.com/questions/4706199/post-increment-and-pre-increment-in-for-loop)查看更多详细信息。

解决您的问题本身，问题是在文件末尾读取一个空的新行。避免这种情况的一个简单方法是在使用之前检查行的长度。

```
getline(myfile, line);
if (line.size()) {
  vector1.push_back(atoi(line.c_str()));
} 
```

这将使您的程序现在可以读取散布有空行的文件。为了更加万无一失，您可以在使用 atoi 之前检查读取的行是否存在任何非数字字符。然而，如上所述的最佳解决方案将用于读取读取到循环评估的行。

# django - 使用 haystack 设置 solr 过程中的错误

> ID：15926702
> 
> 赞同：1
> 
> 时间：2013-04-10T13:06:19.617
> 
> 标签：django, solr, full-text-search, django-haystack

试图用 solr 安装 haystack 2.0.0-beta

```
apt-get install solr-jetty
pip install pysolr
pip install django-haystack 
```

并编辑了以下'/etc/default/jetty'

```
NO_START=0            # (line 4)
JETTY_HOST=127.0.0.1  # (line 15)
JETTY_PORT=8983       # (line 18) 
```

并启动了码头

```
sudo service jetty start 
```

当我尝试访问网址时

```
 http://127.0.0.1:8983/solr/ 
```

收到以下错误

```
HTTP ERROR 500

Problem accessing /solr/. Reason:

    Severe errors in solr configuration.

org.apache.solr.common.SolrException: Error loading class 'solr.PointType'
org.apache.solr.common.SolrException: Error loading class 'solr.KeywordMarkerFilterFactory'
org.apache.solr.common.SolrException: Error loading class 'solr.LatLonType'
org.apache.solr.common.SolrException: Unknown fieldtype 'location' specified on field *_p
org.apache.solr.common.SolrException: Error loading class 'solr.EnglishPossessiveFilterFactory'
org.apache.solr.common.SolrException: Error loading class 'solr.GeoHashField'
org.apache.solr.common.SolrException: Error loading class 'solr.EnglishPossessiveFilterFactory' 
```

我该如何解决这个问题？在此先感谢

# android - 如何使用 MySQL JDBC 驱动程序将 MySQL 与 Android Project 连接？

> ID：15926705
> 
> 赞同：-1
> 
> 时间：2013-04-10T13:06:22.780
> 
> 标签：android

我想从 MySQL 中的表中获取数据并在 TextView 中显示它，但是当我尝试连接数据库时遇到了一些问题。我正在使用适用于 Android 的 Eclipse，当我尝试在 Java Project 中从 MySQL 获取数据时它可以工作，但是当我使用 Android Project 时它不起作用。有谁知道或者给我其他建议如何将 Android 项目与 MySQL 连接？我在 android 模拟器中收到错误 java.lang.ClassNotFoundException: com.mysql.jdbc.driver

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:09:41.630

在大多数情况下，android 应用程序不会直接连接到数据库，因为这意味着您必须在应用程序中存储和公开连接信息。

您应该实现一个允许与数据库交互的 Web 服务。

在极少数情况下，直接连接到 MySQL 服务器是有意义的，例如，如果您正在编写查询工具或 MySQL 服务器管理工​​具。

# paypal - 使用“立即购买”按钮的 PayPal 沙盒错误

> ID：15926709
> 
> 赞同：0
> 
> 时间：2013-04-10T13:06:38.003
> 
> 标签：paypal, paypal-sandbox

我的电脑上有一个页面，上面有一个简单的立即购买按钮，代码如下：

```
<script src="paypal-button-minicart.min.js"></script>
<script src="paypal-button.min.js?merchant=8TYNWA5KGBSPE"
    data-button="buynow"
    data-name="My product"
    data-amount="15.00"
></script>
<form action="https://www.sandbox.paypal.com/cgibin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_xclick">
<input type="hidden" name="business" value="8TYNWA5KGBSPE">
<input type="hidden" name="lc" value="GB">
<input type="hidden" name="item_name" value="Football lessons">
<input type="hidden" name="amount" value="15.00">
<input type="hidden" name="currency_code" value="GBP">
<input type="hidden" name="button_subtype" value="services">
<input type="hidden" name="no_note" value="0">
<input type="hidden" name="cn" value="Add special instructions to the seller:">
<input type="hidden" name="no_shipping" value="2">
<input type="hidden" name="bn" value="PP-BuyNowBF:btn_buynowCC_LG.gif:NonHosted">
<input type="image" src="https://www.paypalobjects.com/en_US/GB/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal � The safer, easier way to pay online.">
<img alt="" border="0" src="https://www.paypalobjects.com/en_GB/i/scr/pixel.gif" width="1" height="1">
</form> 
```

但我得到了错误：

> 由于卖家网站出现问题，PayPal 无法处理此交易

当我点击它时，我在沙盒上以测试用户身份登录，我不知道还能尝试什么。为什么我收到“无法处理此交易”错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:33:14.227

要生成非托管/明文按钮，请执行以下步骤：

1.  登录您的 PayPal 帐户 www.paypal.com
2.  单击“商户服务”选项卡以访问“商户工具”选项卡。
3.  在网站支付标准部分，选择您想要创建的按钮类型（立即购买、添加到购物车、捐赠等……）。
4.  单击“立即创建按钮”以访问 PayPal 按钮工厂。
5.  在按钮中填写您需要的字段（商品名称、价格、货币……）。
6.  单击选项卡“第 2 步：跟踪库存（可选）”，然后取消选中“在 PayPal 上保存按钮”框。
7.  点击“创建按钮”。
8.  将显示按钮的加密 HTML 代码。
9.  点击链接“删除代码保护”
10.  将显示您的按钮的 HTML 代码，单击“选择代码”并将其复制到您的网站。

您还可以[在此处](https://www.paypaltech.com/videotutorial/en/no_h_no_enc_buynow/buynow_nohost_noencrypt.htm)找到有用的视频。

# jsp - JSP, 提前关闭自己

> ID：15926712
> 
> 赞同：-1
> 
> 时间：2013-04-10T13:06:47.073
> 
> 标签：jsp, jsp-tags

我有一个jsp页面，它正在转发一个ArrayList，Arrangor是我用构造函数和getMethods创建的类的bean。但是当我尝试在 jsp 页面中输出它们时。但萤火虫发现所有正在发送的数据的实例。但是 <:c forEach> 标签似乎直接在它周围关闭了自己。有谁知道为什么。

编辑：对不起，不好的句子。edit2 似乎中间的句子被删除了

```
<table border="1">
 <c:forEach items="${arrangorer}" var="arr">
 <tr>
   <th>Id</th>
   <th>Namn</th>
   <th>Telefon Nummer</th>
   <th>Email</th>
 </tr>

<tr>
 <td> <c:out value="${arr.id}"></td>
 <td> <c:out value="${arr.name}"></td>
 <td> ${arr.getNumber()}</td>
 <td> ${arr.getEmail()} </td>
</tr>
</c:forEach>

</table> 
```

然后我在我的索引页面中包含上面的 jsp 片段。

```
<%@page language="java" contentType="text/html"%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@page import="java.util.ArrayList" %>

  <div id="include_show">
        <jsp:include page="WEB-INF/show.jsp" />
  </div> 
```

我得到以下萤火虫输出：

```
<div id="include_show">
  <c:foreach var="arr" items="[src.arrangor.Arrangor@185cfd8,src.arrangor.Arrangor@1073d0src.arrangor.Arrangor@239d58, src.arrangor.Arrangor@2f32d8, src.arrangor.Arrangor@b327ee, src.arrangor.Arrangor@283d9, src.arrangor.Arrangor@11e342e, src.arrangor.Arrangor@1f3f414, src.arrangor.Arrangor@11d5641]"> 
 </c:foreach>
 <table border="1">
 <tbody>
 <tr>
 <th>Id</th>
 <th>Namn</th> 
 <th>Telefon Nummer</th>
 <th>Email</th>
</tr>
<tr>
  <td><c:out value=""></c:out></td>
  <td><c:out value=""> </c:out></td>
  <td> </td>
  <td> </td>
 </tr>
</tbody> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:45:53.353

taglib 声明必须位于**每个**使用 taglib 的 JSP 的顶部。所以它也必须出现在`show.jsp`.

请注意，您的页面中还有其他错误：`<c:out>`例如未关闭的标签。

# javascript - 使用 HTA 的 Office/Outlook 的 Javascript 插件？

> ID：15926719
> 
> 赞同：0
> 
> 时间：2013-04-10T13:06:56.417
> 
> 标签：javascript, outlook, outlook-addin

HTA 是使用 JavaScript 为 Outlook 编写插件的好方法吗？

我想从 Chrome 扩展中重用我现有的大部分 JavaScript 代码，并且只需要维护很少的系统特定代码。为 windows 世界和 web 世界开发基于 JavaScript 的插件的最佳方式是什么。

该插件应集成到 Outlook 电子邮件（上下文菜单/功能区）中，并通过 REST 发送或查询信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:28:29.913

我发现了使用 javascript 的新方法：[msdn javascript apps](http://msdn.microsoft.com/en-us/library/office/apps/jj220060.aspx)

它仅适用于 2013 年，但这应该没问题。

# mysql - 如何在 MySQL 5.0 语句中使用 like 子句

> ID：15926724
> 
> 赞同：1
> 
> 时间：2013-04-10T13:07:14.460
> 
> 标签：mysql, stored-procedures, sql-like, mysql-5.0

我在 MySQL 5.0 中使用 'like' 子句时遇到问题 我在 MySQL 5.0 中编写了一个存储过程并从我的 Java 程序调用存储过程 下面在 select 语句中的存储过程 我想为 like 子句获取参数部门名称的值请帮忙

```
 DROP PROCEDURE IF EXISTS upSelTests;
    DELIMITER //
    CREATE PROCEDURE upSelTests
    (
    IN departmentname varchar(50),
    IN testDateFrom varchar(10),
    IN testDateTo varchar(10)
    )
    BEGIN
    declare testDateFrom1 varchar(30);
    select PatientID,LabNo,arriveddate,RecieptNo,patientname,referredby,ID from
    tblAcceptTest where STR_TO_DATE(arriveddate, '%d/%m/%Y')>=STR_TO_DATE(testDateFrom,
    '%d/%m/%Y') and STR_TO_DATE(arriveddate, '%d/%m/%Y') <= STR_TO_DATE(testDateTo, 
    '%d/%m/%Y') and Status = 0 and DeptName like '%departmentname%';
    END //
    DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:10:45.247

当你`departmentname`用引号引起来时，它变成一个字符文字，不再是一个变量。它的值被忽略，`'%departmentname%'`而是使用文字。

最简单的解决方案是使用[`CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)添加`'%'`作为前缀和后缀，像这样：

```
and DeptName LIKE CONCAT( '%', departmentname, '%') 
```

例如，如果`departmentname`设置为`police`，则结果变为

```
and DeptName LIKE '%police%' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T13:13:00.777

格式：

```
SELECT field1, field2,...fieldN table_name1, table_name2...
WHERE field1 LIKE condition1 [AND [OR]] filed2 = 'somevalue' 
```

例如：

```
SELECT * from tutorials_tbl 
 WHERE tutorial_author LIKE '%jay'; 
```

# php - fgets stripping tags

> ID：15926725
> 
> 赞同：3
> 
> 时间：2013-04-10T13:07:16.670
> 
> 标签：php, tags, fgets

I'm using fgets to read a text file that contains field names delimited with the "<" and ">" characters. It seems like fgets is seeing these field names as tags and stripping them. I thought that only fgetss stripped tags and that fgets should allow this. I'm testing this with the following code:

```
<?php
$handle = @fopen("Test.txt", "r");
if ($handle) {
    while (($buffer = fgets($handle, 4096)) !== false) {
        echo $buffer;
    }
    if (!feof($handle)) {
        echo "Error: unexpected fgets() fail\n";
    }
    fclose($handle);
}
?> 
```

My file is similar to this

```
filename.txt
Header test
<EOH>
<Field 1>Name<Field 2>Address<Field 3>Country<EOR>
<Field 1>Name<Field 2>Address<Field 3>Country<EOR> 
```

Anyone know how I can retain my field names when reading text from file using fgets or similar. I tried using fgetss and specifying my field names as allowable tags but that didn't work, I guess because they aren't true html tags?

# fortran - 将函数传递给子例程时，虚拟过程“f”中的接口不匹配

> ID：15926727
> 
> 赞同：2
> 
> 时间：2013-04-10T13:07:20.857
> 
> 标签：fortran, fortran90

我正在尝试编写一个具有两个参数的子程序（用于最小化）：

*   `x`任意长度的数组
*   一个函数`f`，它接受一个该长度的数组并返回一个标量

示例模块：

```
module foo

contains

  subroutine solve(x, f)
    real, dimension(:), intent(inout) :: x
    interface
      real pure function f(y)
        import x
        real, dimension(size(x)), intent(in) :: y
      end function
    end interface

    print *, x
    print *, f(x)
  end subroutine

end module 
```

和测试程序：

```
use foo

real, dimension(2) :: x = [1.0, 2.0]

call solve(x, g)

contains

  real pure function g(y)
    real, dimension(2), intent(in) :: y

    g = sum(y)
  end function

end 
```

gfortran 失败：

```
call solve(x, g)
              1
Error: Interface mismatch in dummy procedure 'f' at (1): Shape mismatch in dimension 1 of argument 'y' 
```

如果我改变`size(x) => 2`，那么它编译（并运行）很好。如果我改变它也可以正常工作 `: => 2`。但是这些解决方案都没有让我得到我想要的。

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T13:18:08.957

怎么样：

```
interface
  real pure function f(y)
    real, dimension(:), intent(in) :: y
  end function
end interface 
```

当您将参数传递`solve`给函数时，将自动传递数组的大小。您不需要制作界面的这一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T10:08:21.817

如果您想获得[MSB](https://stackoverflow.com/users/187997/m-s-b)解决方案评论中所示的安全性，您应该使用`-fcheck=bounds`并且编译器将为假定和延迟形状数组生成运行时检查。有关更多信息，请参见 gfortran 手册页`-fcheck`。但是，您会损失一些速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T20:46:04.020

您有解决方案，但值得解释的是......如果虚拟参数具有显式接口（它在此处执行），则要求作为实际参数传递的过程的*特征*必须与虚拟参数，除了一些关于纯粹性和基本内在函数的例外。除其他外，过程的特征包括其虚拟参数的特征。

虚拟参数的特征包括其形状等。如果该形状不是常量表达式 - 特征包括“[形状] 对表达式中实体的确切依赖性”。

dummy 参数的接口块`f`将数组声明为 size `SIZE(x)`。x 是与主机相关的假定形状变量 - 它的大小可以在运行时变化，因此`SIZE(x)`不是常数。因此，该表达式及其中的实体成为虚拟参数的特征。

模块过程`g`将数组声明为 size `2`。这显然是一个常数。

无论 f 的虚拟参数大小的非常量表达式的值如何，这些数组大小特征（某种表达式与常量）都不匹配 - 因此出现错误。

当您`SIZE(x)`用常数 2 替换时，特征显然匹配。当您将假定的形状更改`x`为常量大小 2 - 然后`SIZE(x)`变为值 2 的常量表达式 - 因为它是一个常量表达式，所有相关的是它的值 - 因此两个参数的特征然后匹配。当您将 的虚拟参数`f`和 的虚拟参数都`g`更改为假设 shape`(:)`时，特征匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-21T01:23:41.610

这是一个[演示](https://stackoverflow.com/a/42356801/6136671)如何传递可分配数组。

一些技巧：

*   使用模块避免繁琐的界面。
*   将数组传递给实际函数时添加额外的矩阵大小信息。例如`f(y, sizeinfo)`，在您的实际函数中，您可以正确声明输入矩阵的大小。可分配数组可以传递给 subroutine `solve`，因此可以在 subroutine 中使用 size(mat) 获得大小`solve`。

所以一个更正的版本看起来像：

```
module foo

contains

  subroutine solve(x, f)
    real, dimension(:), intent(inout) :: x
    real,external::f
        integer::sizeinfo

    print *,'x=', x
    sizeinfo = size(x)
    print *, 'f(x)=',f(x,sizeinfo)
  end subroutine

    real function g(y,sizeinfo)
    integer::sizeinfo
    real, dimension(sizeinfo) :: y

    g = sum(y)
  end function
end module 
```

这是主程序：

```
program main
use foo

real, dimension(2) :: x = (/1.0, 2.0/)

call solve(x, g)

end program 
```

结果是：

```
x=   1.000000       2.000000    
f(x)=   3.000000 
```

# android - Multiple string resource files with similar keys in Android

> ID：15926730
> 
> 赞同：7
> 
> 时间：2013-04-10T13:07:28.193
> 
> 标签：android, android-resources

I have an android application that needs to display strings found under the resources, but there can be multiple `strings.xml` files, i.e. `strings1.xml`, `strings2.xml` and so third. The string key can reside in different `stringsN.xml` files, now if a key is found in lets say `strings1.xml` it should be displayed without looking into the other string files with the same key.

Is it possible in android? I have done this thing in my .Net application but seems not doable in android. Infact, android gives the compilation error when I enter values against duplicate keys in multiple strings.xml files.

**EDIT**

The reason for doing this is, there are different clients running my application. Lets assume for clientA I added the key "company" with the value "ABC" and in my default strings.xml file there is already a default company name with the same key "company" but with the defualt value "Default Company". Now, if clientA opens my application the company name should be "ABC" and "Default Company" for clients otherthan clientA.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:08:56.770

不，这在 Android 上是不可能的。

您只能在不同的文件夹 ( `values-qualifier`) 中有重复的资源名称。即使那样，字符串也不会重复。它们已准备好进行本地化，一次只会加载一个。

如果您告诉我们为什么需要这个，我们或许可以提出更好的解决方案。

# python - 在视图返回之前不保存会话值

> ID：15926731
> 
> 赞同：0
> 
> 时间：2013-04-10T13:07:33.100
> 
> 标签：python, django, session

我有一个 Django `Form`，它在提交时会调用相当耗时的操作。这个操作（一个 Python 函数）会在执行过程中创建数据。

创建相关数据后，我想将其存储到活动[`session`](https://docs.djangoproject.com/en/dev/topics/http/sessions/)中，以便用户可以在生成结果时看到结果（现在通过简单的刷新）。

我编写了一个模板来显示`session`. 但是，似乎只有在长时间运行的函数返回时才完整保存会话（在执行期间刷新页面不会显示任何修改的组件）。从[When sessions are saved 开始](https://docs.djangoproject.com/en/dev/topics/http/sessions/#when-sessions-are-saved)，我相信一旦字典被修改，会话应该被更新。

我是否误解了会话是如何保存的？或者，是否有另一种方法来实现我正在寻找的东西？

* * *

下面是相关`views.py`代码的抽象：

```
def my_form(request):
    """ Render the form, with any results included below. """
    if request.method == "POST":
        form = MyForm(request.POST)
        if form.is_valid():
            request.session.clear()
            long_running_func(request.session, form)
    else:
        form = MyForm()
    return render_to_response('my_form.html', {'form': form,
                                               'session': request.session})

def long_running_func(session, form):
    session["status"] = "Executing"

    result_data = long_running_task()
    session["results"] = result_data

    ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:24:39.607

您误解了该链接。它并不是说每次修改字典时都会保存会话。相反，会话保存是基于请求的：文档只是解释说，即使在一个完整的请求/响应周期内，如果字典没有被分配，它也不会被修改。

您可能想查看上面的部分，在视图中使用会话，以了解如何手动更新会话。但是，我必须说我认为您的设计存在缺陷：我看不到用户应该如何查看更新的会话值。您的表单处理是在原始请求过程中完成的，刷新只会中断该过程，可能会使任务未完成。

真的，你应该研究像 Celery 这样的东西来在请求周期之外执行长时间运行的进程。

# linux - Samba share redirection after already mapped by 300 computers in the network

> ID：15926732
> 
> 赞同：-1
> 
> 时间：2013-04-10T13:07:33.217
> 
> 标签：linux, redirect, share, samba

I have created a samba share with a typo in the name. The problem is this share has already been mapped on over 300 computers on the network, and correcting it would lead to remapping all those computers all over again.

So I'm basically thinking if there's any way to redirect a share to another. For example, to redirect users accessing \192.168.0.173\instrutions to \192.168.0.173\instructions (notice the typo?), while also keep the correct share hidden from view.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:14:02.623

我在[这里](http://lzeit.blogspot.se/2010/07/redirecting-samba-share-to-another.html)找到了一个可能的解决方案：

```
[global]
host msdfs = true

[work]
msdfs root = true
msdfs proxy = \newserver\work 
```

你甚至没有尝试在谷歌上搜索，是吗？这是谷歌搜索“samba 重定向”时的第一次点击

# php - 使用自定义提供程序类来消除紧密耦合

> ID：15926737
> 
> 赞同：3
> 
> 时间：2013-04-10T13:07:44.847
> 
> 标签：php, oop, design-patterns

我有一个自定义框架，其中我有一个使用我自己的`Cache`类的类/方法。

目前它是紧密耦合的。所以一个方法实例化这个`Cache`类是这样的：

```
public function someMethod ( )
{
    $cache = new Cache\HHCache();
} 
```

我想删除紧密耦合，但这实际上是我有点卡住的地方。

我认为创建某种形式是个好主意`ServiceProvider`类是个好主意。但我不确定这是否真的是正确的方法。

首先，我有`HHConfig`一个文件，该文件具有`static`定义缓存类的属性。简而言之：

```
class HHConfig
{
    static $_cacheClass = '\Core\Cache\HHCache';
} 
```

所以基本上我有一个像这样的类，它是我框架***核心功能的一部分：***

```
interface IHHServiceProvider
{
    public function getService ( );
} 
```

然后我有另一个实现这个的类`interface`。

```
class HHCacheProvider implements IHHServiceProvider
{
    public static function getService ( )
    {
        $class = HHConfig::$_cacheClass;
        return new $class();
    }
} 
```

所以现在`someMethod`可以使用`HHCacheProvider`类来获取一个`Cache`类的实例。

```
public function someMethod ( )
{
    $cache = HHCacheProvider::getService ( );
} 
```

我的课程`IHHServiceProvider`不像典型的`Provider`课程，因为您无法真正注册任何课程`Services`。它只是看起来在`HHConfig`类中查找要加载的“类”并在该实例中返回。

所以不知何故，这种方法对我来说并不合适，但我确实认为它显示了我想要实现的目标。我可以通过哪些方式改进这一点？

* * *

**请注意**，我不是为此寻找一个简单的依赖注入模式。因为我不想将我的`Cache`类注入到每个构造函数类中。我需要一种***非紧密耦合***方式来获取`HHCache`的方式来以某种方式从

可以成为我框架一部分的某种提供程序类似乎是正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:43:26.860

> [**注意：** “提供者”没有任何意义。没有那个名字的模式。]

与其制作一些神奇的“privider”，不如看看工厂模式。基本上这个想法如下：

1.  您在将使用某些服务的类中注入一个工厂（假设这`Cache`不是您想要的唯一服务形式）。

2.  来自工厂的类请求它需要的服务：

    *   `if`服务已经初始化一次，它只是返回一个实例给你
    *   `else`它创建新实例，存储它并将您返回给“消费者”

最简单的代码示例是这样的：

```
class ServiceFactory
{
    private $storage = [];

    public function create( $name )
    {
        if ( false === array_key_exists( $name, $this->storage ))
        {
            $instance = new $name;
            $this->storage[$name] = $instance;
        }

        return $this->storage[$name];
    }

} 
```

这是一个极其简化的示例，但即使在这种情况下，如果您在任意数量的对象中注入此工厂的实例，它们都将可以访问相同的实例池。

如果您决定研究*DI Containers*的概念，那么工厂也是适合使用它们的地方，而不会将它们降级为*服务定位器*反模式。

..以及一些您可能会觉得有价值的讲座：

*   [干净的代码说话 - 不要寻找东西！](https://www.youtube.com/watch?v=RlfLCWKxHJ0)
*   [清洁代码会谈 - 全球状态和单身人士](https://www.youtube.com/watch?v=-FRm3VPhseI)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:57:17.873

根据 OP 要求

特别是因为它将成为框架的一部分，您应该注入缓存。DI Container 是这里最好的解决方案，您可以将实际的 Cache 实现配置为单例。您提出的解决方案与某些服务紧密耦合，很难单独测试。实际上，它看起来更像是一种服务定位器模式，而不是提供者。

如果您使用的工厂不会替换 DI 容器。DI 的要点是代码不应耦合到外部静态服务。除非您有充分的理由，否则任何对象都应仅使用注入的（通过构造函数或作为方法参数）依赖项。

# c# - WPF / C#中的线程和集合修改

> ID：15926743
> 
> 赞同：3
> 
> 时间：2013-04-10T13:07:55.470
> 
> 标签：c#, wpf, multithreading, collections

我目前正在使用 C#/WPF 开发一个系统，该系统访问 SQL 数据库，检索一些数据（大约 10000 个项目），然后应该更新一组数据点，这些数据点用作我在我的应用程序中使用的 WPF 图表的数据（Visifire 图表解决方案，以防有人想知道）。

当我编写直截了当的单线程解决方案时，如您所料，系统会在应用程序查询数据库、检索数据和呈现图表所花费的时间段内挂起。但是，我想通过在使用多线程获取和处理数据时向用户添加等待动画来加快此任务。但是，会出现两个问题：

1.  在使用多线程时，我无法更新我的集合并保持它们同步。我不是很熟悉`Dispatcher`门课不是很熟悉，所以我不太确定该怎么做。
2.  由于我显然没有很好地处理多线程，等待动画不会出现（因为 UI 被冻结）。

我试图弄清楚是否有一种有效地将多线程用于集合的好方法。我发现微软有[线程安全的集合](http://msdn.microsoft.com/en-us/library/dd997305.aspx)，但似乎没有一个符合我的需要。

另外，如果有人有很好的参考来学习和理解`Dispatcher`我将不胜感激。

编辑：这是我正在尝试做的代码片段，也许它可以更清楚地说明我的问题：

```
private List<DataPoint> InitializeDataSeries(RecentlyPrintedItemViewModel item)
{
    var localDataPoints = new List<DataPoint>();

    // Stopping condition for recursion - if we've hit a childless (roll) item
    if (item.Children.Count == 0)
    {
        // Populate DataPoints and return it as one DataSeries
        _dataPoints.AddRange(InitializeDataPoints(item));
    }
    else
    {
        // Iterate through all children and activate this function on them (recursion)
        var datapointsCollection = new List<DataPoint>();
        Parallel.ForEach(item.Children, child => datapointsCollection = (InitializeDataSeries((RecentlyPrintedItemViewModel)child)));

        foreach (var child in item.Children)
        {    
            localDataPoints.AddRange(InitializeDataSeries((RecentlyPrintedItemViewModel)child));
        }
    }

    RaisePropertyChanged("DataPoints");
    AreDataPointsInitialized = true;

    return localDataPoints;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:58:50.877

[Dispatcher](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.aspx)是一个对象，用于管理单个线程上的多个工作项队列，每个队列在何时执行其工作项时具有不同的优先级。

通常引用 WPF的`Dispatcher`主应用程序线程，并用于在不同的[DispatcherPriorities](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherpriority.aspx)调度代码，以便它们以特定的顺序运行。

例如，假设您要显示加载图形，加载一些数据，然后隐藏该图形。

```
IsLoading = true;
LoadData();
IsLoading = false; 
```

如果您一次完成所有这些操作，它将锁定您的应用程序，您将永远看不到加载图形。这是因为所有代码都默认在`DispatcherPriority.Normal`队列中运行，所以当它完成运行时，加载图形将再次隐藏。

相反，您可以使用`Dispatcher`来加载数据并以低于 的调度程序优先级隐藏图形`DispatcherPriority.Render`，例如`DispatcherPriority.Background`，以便其他队列中的所有任务在加载发生之前完成，包括渲染加载图形。

```
IsLoading = true;

Dispatcher.BeginInvoke(DispatcherPriority.Background,
    new Action(delegate() { 
        LoadData();
        IsLoading = false;
     })); 
```

但这仍然不理想，因为`Dispatcher`引用了应用程序的单个 UI 线程，因此在长时间运行的进程发生时，您仍将锁定线程。

更好的解决方案是为您的长时间运行的进程使用单独的线程。我个人的偏好是使用[任务并行库](http://msdn.microsoft.com/en-us/library/dd460717.aspx)，因为它简单易用。

```
IsLoading = true;
Task.Factory.StartNew(() => 
    {
        LoadData();
        IsLoading = false;
    }); 
```

但这*仍然*会给您带来问题，因为 WPF 对象只能从创建它们的线程中修改。

因此，如果您`ObservableCollection<DataItem>`在后台线程上创建一个，则无法从代码中除该后台线程之外的任何位置修改该集合。

典型的解决方案是在后台线程上获取数据并将其返回到临时变量中的主线程，并让主 UI 线程创建对象并用从后台线程获取的数据填充它。

所以通常你的代码最终看起来像这样：

```
IsLoading = true;

Task.Factory.StartNew(() => 
    {
        // run long process and return results in temp variable
        return LoadData();
    })
    .ContinueWith((t) => 
    {
        // this block runs once the background code finishes

        // update with results from temp variable
        UpdateData(t.Result)

        // reset loading flag
        IsLoading = false;
    }); 
```

# ruby - 如何将变量传递到邮件正文模板？

> ID：15926750
> 
> 赞同：0
> 
> 时间：2013-04-10T13:08:00.080
> 
> 标签：ruby, email, sinatra, mailer

我正在尝试在 Sinatra 中编写简单的邮件程序，它发送带有参数变量的电子邮件。

```
require 'sinatra'
require 'mail'

class App < Sinatra::Base
  post '/test_mailer' do
    company = params['Field6']
    email = params['Field5']

    puts "Company name: #{company}"
    puts "Email: #{email}"

    mail = Mail.new do
      from     'me@mydomain.com'
      to       'me@mydomain.com'
      subject  'Here is the image you wanted'
      text_part do
        body "Company Name \n === \n #{company} \n \n Email \n === \n #{email}"
      end
    end

    mail.deliver!
  end
end 
```

如何使用公司和电子邮件变量将电子邮件模板移动到 test_mailer.txt？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:02:24.060

我不确定我是否理解您 - 您想要一个单独的电子邮件模板文件，对吗？我认为您可以使用 erb 或 haml 模板，然后执行以下操作：

```
text_part do
  body erb(:test_mailer)
end 
```

然后，您的 test_mailer.erb 文件将包含您的电子邮件模板。

[这里](http://www.sinatrarb.com/faq.html#email)展示了如何使用小马完成类似的事情。

# forms - 表格和必需的属性

> ID：15926753
> 
> 赞同：0
> 
> 时间：2013-04-10T13:08:02.483
> 
> 标签：forms, symfony

我想知道一些事情。也许这是 Symfony 中的一个错误，我不知道：

假设一个 Product 对象：

```
class Product
{
    private $id;
    private $name;
    private $price;
    private $description;
} 
```

我用这个对象构建了一个表单。这是我的验证文件：

```
myVendor\myBundle\Entity\Product:
  properties:
    name:
      - NotBlank: ~
    price:
      - NotBlank: ~ 
```

这是我的表单生成器：

```
$builder->add('name', 'text', array('label' => $this->translator->trans('product.demo.name')));
$builder->add('price', 'money', array(
        'label' => $this->translator->trans('product.demo.price'),
        'invalid_message' => $this->translator->trans('product.demo.validation.price.error')
    ));
$builder->add('description', 'textarea', array('label' => $this->translator->trans('product.demo.description'))); 
```

生成表单时，字段的 3 个区域具有必需的属性……甚至是不需要的描述。

如果我停用 HTML5，它会很好用，因为 Symfony 会查看验证文件并看到不需要描述字段。

但是如果 HTML5 被激活，由于 required 属性需要一个描述值。

这是 Symfony 默认生成具有必需属性的字段的错误还是什么...

可以修吗？

谢谢

PS：我使用 Symfony 2.2...看起来已经找到了解决方案并随此版本交付，但问题仍然存在

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:15:40.367

默认情况下，每个 Symfony2 表单类型都将`required`选项设置为`true`，无论您在验证中有什么`Assert`。

[http://symfony.com/doc/master/book/forms.html#field-type-options](http://symfony.com/doc/master/book/forms.html#field-type-options)

required 选项只是一个“值得拥有”的功能，并不进行真正的服务器端验证。这是你验证的作用`Assert`。

把`required=false`你的描述写上：

```
$builder->add('description', 
              'textarea', array(
                 'label' => $this->translator->trans('product.demo.description'),
                 'required' => false
              )); 
```

# system - 可扩展 VS 可扩展

> ID：15926758
> 
> 赞同：5
> 
> 时间：2013-04-10T13:08:07.463
> 
> 标签：system, requirements, scalable, extensible

我不确定这里是否允许此类问题，但它与软件项目有关。

可扩展和可扩展之间有区别吗？

可扩展是可扩展的子集吗？即可扩展（可扩展）

有些人认为它是相同的，有些人认为它是不同的。有什么区别？

我被引导相信：

可扩展 - 使系统能够承受更多的使用（带宽等......）并使其更大。

可扩展 - 为系统添加更多功能。

他们不一样吗？

编辑：如果可扩展为系统添加更多功能并且可扩展可以被视为使系统更大，那在理论上是否不一样，证明可扩展只是可扩展的子集？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T18:47:13.800

我不是母语人士，但我确实认为有区别。

如果…… 是可扩展的，这意味着它可以适应增长。这并没有说明它是如何采用的（也就是说，要么已经非常适合它可以接受更多请求，要么通过添加更多相同类型的资源，或者通过轻松更改组件）。

维基百科说：

> [这是]被扩大以适应[某种]增长的能力。

从理论上讲，它也可能指“缩小规模”，但从 IT 的角度来看，这通常不是那么有趣。

你提议：

> 可扩展 - 为系统添加更多功能。

可能，但不一定。它*也可能*是指增加更多的容量，以达到与以前相同的目的。

我会说：

可扩展性意味着系统能够适应增长。即系统增长。

可扩展性意味着您能够（轻松地）向系统添加一些东西。即系统附加了一些新的东西——它不一定与增长有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-29T04:45:45.000

同意观察者。只是添加更多示例：

**可扩展性**：

1.  您的软件支持新功能、接口、设备、输入类型等的“挂钩”的难易程度。
2.  这也可能是指您的软件可以轻松地支持新服务，而对现有代码和客户端的干扰最少/没有。例如，将新端点添加到现有 Web 服务可以被视为可扩展性的一个维度。

**可扩展性**：

1.  您的软件将如何轻松地处理不断增长的用户群/附加数据等。示例：如果您的用户群未来增长，或者您决定为每个实体保存附加数据，您的数据库是否可扩展？您的软件是否可扩展以适应用户群的增长？
2.  当谈到可扩展性时，我们也开始谈论水平与垂直可扩展性，这两者主要是指系统是否可以在相同的基础设施/实例/部署（垂直可扩展性）上进行扩展，或者我们需要添加一些“同行”来实现能够承受更多负载（水平可扩展性）。

# module - 如何从 Zend Framewok 2 中的 Module#getViewHelperConfig() 调用服务定位器对象上的自定义服务？

> ID：15926763
> 
> 赞同：1
> 
> 时间：2013-04-10T13:08:12.690
> 
> 标签：module, zend-framework2, factory, view-helpers, service-locator

我有一个`ViewHelper`并想在以下位置初始化它`Module#getViewHelperConfig()`：

```
<?php
namespace Search;

use statements...

class Module implements
    ConfigProviderInterface,
    ServiceProviderInterface,
    AutoloaderProviderInterface,
    ViewHelperProviderInterface {

    public function getConfig() ...

    public function getAutoloaderConfig() ...

    public function getServiceConfig() {
        $breakpoint = null;
        try {
            return array (
                'factories' => array(
                    ...
                    'SearchFormCourseSearchForm' => function ($serviceManager) {
                        $cacheService = $serviceManager->get('Cache\Model\CityStorage');
                        $cities = $cacheService->getCities();
                        $searchForm = new Form\CourseSearchForm($cities);
                        return $searchForm;
                    },
                )
            );
        } ...
    }

    public function getViewHelperConfig() {
        $breakpoint = null;
        return array(
            'factories' => array(
                'searhForm' => function($serviceManager) {
                    $helper = new View\Helper\SearchForm(array('render' => true, 'redirect' => false));
                    $helper->setViewTemplate('search/search/search-courses');
                    $searchForm = $serviceManager->get('SearchFormCourseSearchForm');
                    $helper->setSearchForm($searchForm);
                    return $helper;
                }
            )
        );
    } 
```

但是 ZF 没有给我的工厂打电话。相反，它尝试创建一个新`SearchFormCourseSearchForm`实例：

> 致命错误：未捕获的异常 'Zend\ServiceManager\Exception\ServiceNotFoundException' 与消息 'Zend\ServiceManager\ServiceManager::get 无法在 /var/www/bar/foo/vendor/zendframework/ 中获取或创建 SearchFormCourseSearchForm 的实例zendframework/library/Zend/ServiceManager/ServiceManager.php 在第 456 行

我应该如何使用从`Module#getServiceConfig()`创建`ViewHelper`in 中获得的服务工厂`Module#getViewHelperConfig()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:15:25.657

您需要获取主要的服务定位器。`$serviceManager`in`getViewHelperConfig()`是 View Helper 服务定位器。

要获取函数中的主要服务定位器，`getViewHelperConfig()`请执行以下操作：

`$maimSm = $serviceManager->getServiceLocator();`

所以：

```
public function getViewHelperConfig() {
    return array(
        'factories' => array(
            'searhForm' => function($serviceManager) {
                $helper = new View\Helper\SearchForm(array('render' => true, 'redirect' => false));
                $helper->setViewTemplate('search/search/search-courses');
                $maimSm = $serviceManager->getServiceLocator();
                $searchForm = $maimSm->get('SearchFormCourseSearchForm');
                $helper->setSearchForm($searchForm);
                return $helper;
            }
        )
    );
} 
```

有很多帖子更详细地解释了这个策略，我会去寻找它们。

**编辑**

有关ZF2 中服务管理器/定位器的详细描述，请参阅[在应用程序中使用 Zend Framework 服务管理器。](http://juriansluiman.nl/en/article/120/using-zend-framework-service-managers-in-your-application)

# python - 如何在此代码中放置标量乘法？

> ID：15926767
> 
> 赞同：0
> 
> 时间：2013-04-10T13:08:26.723
> 
> 标签：python

```
import random
import operator
import sys
import unittest

__version__ = "0.3"

class MatrixError(Exception):
    """ An exception class for Matrix """
    pass

class Matrix(object):
    """ A simple Python matrix class with
    basic operations and operator overloading """

    def __init__(self, m, n, init=True):
        if init:
            self.rows = [[0]*n for x in range(m)]
        else:
            self.rows = []
        self.m = m
        self.n = n

    def __getitem__(self, idx):
        return self.rows[idx]

    def __setitem__(self, idx, item):
        self.rows[idx] = item

    def __str__(self):
        s='\n'.join([' '.join([str(item) for item in row]) for row in self.rows])
        return s + '\n'

    def __repr__(self):
        s=str(self.rows)
        rank = str(self.getRank())
        rep="Matrix: \"%s\", rank: \"%s\"" % (s,rank)
        return rep

    def reset(self):
        """ Reset the matrix data """
        self.rows = [[] for x in range(self.m)]

    def transpose(self):
        """ Transpose the matrix. Changes the current matrix """

        self.m, self.n = self.n, self.m
        self.rows = [list(item) for item in zip(*self.rows)]

    def getTranspose(self):
        """ Return a transpose of the matrix without
        modifying the matrix itself """

        m, n = self.n, self.m
        mat = Matrix(m, n)
        mat.rows =  [list(item) for item in zip(*self.rows)]

        return mat

    def getRank(self):
        return (self.m, self.n)

    def __eq__(self, mat):
        """ Test equality """

        return (mat.rows == self.rows)

    def __add__(self, mat):
        """ Add a matrix to this matrix and
        return the new matrix. Doesn't modify
        the current matrix """

        if self.getRank() != mat.getRank():
            raise MatrixError, "Trying to add matrixes of varying rank!"

        ret = Matrix(self.m, self.n)

        for x in range(self.m):
            row = [sum(item) for item in zip(self.rows[x], mat[x])]
            ret[x] = row

        return ret

    def __sub__(self, mat):
        """ Subtract a matrix from this matrix and
        return the new matrix. Doesn't modify
        the current matrix """

        if self.getRank() != mat.getRank():
            raise MatrixError, "Trying to add matrixes of varying rank!"

        ret = Matrix(self.m, self.n)

        for x in range(self.m):
            row = [item[0]-item[1] for item in zip(self.rows[x], mat[x])]
            ret[x] = row

        return ret

    def __mul__(self, mat):
        """ Multiple a matrix with this matrix and
        return the new matrix. Doesn't modify
        the current matrix """

        matm, matn = mat.getRank()

        if (self.n != matm):
            raise MatrixError, "Matrices cannot be multipled!"

        mat_t = mat.getTranspose()
        mulmat = Matrix(self.m, matn) or Matrix(self.m, a)

        for x in range(self.m):
            for y in range(mat_t.m) or y==a:
                mulmat[x][y] = sum([item[0]*item[1] for item in zip(self.rows[x], mat_t[y])])or a*x

        return mulmat

    def __iadd__(self, mat):
        """ Add a matrix to this matrix.
        This modifies the current matrix """

        # Calls __add__
        tempmat = self + mat
        self.rows = tempmat.rows[:]
        return self

    def __isub__(self, mat):
        """ Add a matrix to this matrix.
        This modifies the current matrix """

        # Calls __sub__
        tempmat = self - mat
        self.rows = tempmat.rows[:]     
        return self

    def __imul__(self, mat):
        """ Add a matrix to this matrix.
        This modifies the current matrix """

        # Possibly not a proper operation
        # since this changes the current matrix
        # rank as well...

        # Calls __mul__
        tempmat = self * mat
        self.rows = tempmat.rows[:]
        self.m, self.n = tempmat.getRank()
        return self

    def save(self, filename):
        open(filename, 'w').write(str(self))

    @classmethod
    def _makeMatrix(cls, rows):

        m = len(rows)
        n = len(rows[0])
        # Validity check
        if any([len(row) != n for row in rows[1:]]):
            raise MatrixError, "inconsistent row length"
        mat = Matrix(m,n, init=False)
        mat.rows = rows

        return mat

    @classmethod
    def makeRandom(cls, m, n, low=0, high=10):
        """ Make a random matrix with elements in range (low-high) """

        obj = Matrix(m, n, init=False)
        for x in range(m):
            obj.rows.append([random.randrange(low, high) for i in range(obj.n)])

        return obj

    @classmethod
    def makeZero(cls, m, n):
        """ Make a zero-matrix of rank (mxn) """

        rows = [[0]*n for x in range(m)]
        return cls.fromList(rows)

    @classmethod
    def makeId(cls, m):
        """ Make identity matrix of rank (mxm) """

        rows = [[0]*m for x in range(m)]
        idx = 0

        for row in rows:
            row[idx] = 1
            idx += 1

        return cls.fromList(rows)

    @classmethod
    def readStdin(cls):
        """ Read a matrix from standard input """

        print 'Enter matrix row by row. Type "q" to quit'
        rows = []
        while True:
            line = sys.stdin.readline().strip()
            if line=='q': break

            row = [int(x) for x in line.split()]
            rows.append(row)

        return cls._makeMatrix(rows)

    @classmethod
    def readGrid(cls, fname):
        """ Read a matrix from a file """

        rows = []
        for line in open(fname).readlines():
            row = [int(x) for x in line.split()]
            rows.append(row)

        return cls._makeMatrix(rows)

    @classmethod
    def fromList(cls, listoflists):
        """ Create a matrix by directly passing a list
        of lists """

        # E.g: Matrix.fromList([[1 2 3], [4,5,6], [7,8,9]])

        rows = listoflists[:]
        return cls._makeMatrix(rows) 
```

我正在尝试进行标量乘法，但它总是失败。例如，a = [[2,2],[2,3]] 如果我相乘，3*a = [[2,2],[2,3],[2,2],[2, 3],[2,2],[2,3]] 我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:11:39.943

> 例如，`a = [[2,2],[2,3]]`如果我乘以它就像，`3*a = [[2,2],[2,3],[2,2],[2,3],[2,2],[2,3]]`

在这里，`a`是 a`list`而不是 a `Matrix`。您不能重载标准列表与标量的乘法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:12:05.797

你不能乘以整个列表。你得到的输出就像一个字符串乘法。

```
a="hello"
b=a*3
print b 
```

给出输出为

```
hellohellohello 
```

这就是你的情况。一个一个地相乘

```
for i in range(len(a)):
    for j in range(len(i)):
        a[i][j]*=3 
```

# dll - 如何在 Firebreath 插件中链接多个库？

> ID：15926768
> 
> 赞同：0
> 
> 时间：2013-04-10T13:08:29.120
> 
> 标签：dll, cmake, static-libraries, firebreath

有谁知道我在哪里可以找到 Firebreath 示例（Mac OS X 或 Windows），该示例说明了如何创建包含 1 个或多个其他库（.DLL 或 .SO）的插件，每个库都依赖于其他静态构建的子项目图书馆（LIB）？

例如，假设 Firebreath 插件名为 PluginA，而 PluginA 调用来自 DLL_B 和 DLL_C 的方法。DLL_B 和 DLL_C 是 C++ 项目。DLL_B 从另一个名为 LIB_D 的项目中调用方法，而 DLL_C 从名为 DLL_E 的项目中调用方法。

因此，最终的包应该包含以下文件：

```
PluginA.dll
DLL_B.dll (which also incorporates LIB_D)
DLL_C.dll
DLL_E.dll 
```

我目前被迫转储 pluginA 解决方案中的所有源文件，但这只是一个瓶颈（例如，我无法调用用其他语言编写的库，例如 Mac OS X 上的 Objective-C）。

我尝试跟踪 Firebreath 上的示例，但无法让它们工作，并且我没有发现其他用户声称他们能够使其工作的示例。我尝试使用 CMAKE，并直接从 X-Code 运行解决方案，但最终结果是相同的（收到链接错误，部署后 DLL_C 找不到 DLL_E 等）

任何帮助将不胜感激 - 谢谢，

米尼亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:05:23.890

你想太多了。

在窗户上：

*   DLL*不*依赖于静态库，因为如果它们这样做了，它就会在构建时被编译。
*   依赖于另一个 DLL 的 DLL 通常只需要其他 DLL 出现在同一位置或 DLL 搜索路径中。
*   考虑到这两件事，您需要做的就是找到作为静态库或与 .dll 一起使用的 .lib 文件，并`target_link_library`为每个文件添加一个调用。[firebreath.org 上有一个页面解释了如何执行此操作](http://www.firebreath.org/x/WoAT)。

在 linux 上大致相同，但使用查找 .so 文件的正常规则。

# nginx - NGINX：504 网关超时

> ID：15926769
> 
> 赞同：0
> 
> 时间：2013-04-10T13:08:31.030
> 
> 标签：nginx, timeout, gateway

```
events {
 worker_connections  1024;
}

http {
include       mime.types;
default_type  application/octet-stream;

sendfile        on;

keepalive_timeout  65;

server {
    listen  0.0.0.0:9001;
    server_name  localhost;

    location / {
        proxy_pass http://0.0.0.0:9000; 
    }
}
} 
```

我在 Windows 7 上运行 NGINX。我在本地主机的 9000 端口上启动并运行了 Grunt 服务器。每次尝试加载 localhost:9001 时，我都会收到“504 Gateway Time-out”。

我需要添加一些东西才能在 Windows 上运行它吗？和防火墙有关系吗？

请提出解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:11:48.010

地址 0.0.0.0 与 localhost 不同。将地址更改为 127.0.0.1 将解决问题。

另见[http://en.m.wikipedia.org/wiki/0.0.0.0](http://en.m.wikipedia.org/wiki/0.0.0.0)

> 在 Internet 协议版本 4 中，地址 0.0.0.0 是不可路由的元地址，用于指定无效、未知或不适用的目标。赋予无效数据块特殊含义是带内信令的应用。

# magento - Magento 的主题层次结构：base/ vs default/

> ID：15926770
> 
> 赞同：1
> 
> 时间：2013-04-10T13:08:33.290
> 
> 标签：magento, themes

在[这个](http://www.magentocommerce.com/knowledge-base/entry/magentos-theme-hierarchy)材料中，我读到了关于 magento 的主题。

我还谈到了默认/默认文件夹，但它没有明确指定哪个在哪个之上。

那么，如果有 mythemepackage/default、default/default 和 base/default，在从 mythemepackage 回退到 base 时是否达到了默认/默认值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:20:38.590

**[编辑]**

不，如果您有以下包/主题

```
 1\. mythemepackage/mytheme
  2\. mythemepackage/default
  3\. default/default
  4\. base/default 
```

并且您已将包设置为**mythemepackage**并将默认主题设置为**mytheme**。

然后 Magento 首先检查**mythemepackage/mytheme**文件夹，如果找不到，则检查**mythemepackage/default**，如果仍未找到，则查看**base/default**。

如果没有找到，就会出现渲染错误。

# unix - Unix grep 命令返回满足条件的文本文件中的行组

> ID：15926773
> 
> 赞同：-1
> 
> 时间：2013-04-10T13:08:39.330
> 
> 标签：unix, awk, grep, find

我有一个包含以下记录的大文本文件：

```
024567808 name date etc..
0376567 dfu ugig etc..
0388888 dtg hii etc..
032357 tuth gug etc..
025789 gkh kjkjk etc.. 
```

使用 grep 命令，我可以检索包含关键字的行。如果它以 03 开头，我如何检索下一条记录？

例如，我搜索`name`，它返回第一行。我想要这条记录以及下一个 02 记录之前的所有 03 行。

输出应该是：

```
024567808 name date etc..
0376567 dfu ugig etc..
0388888 dtg hii etc..
032357 tuth gug etc.. 
```

我认为 grep 对于这类任务来说不够强大。也许 awk 可以做到。做这种事情的最好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:23:57.433

这可能是你想要的：

```
awk '/^02/{f=0} /name/{f=1} f' file 
```

这完全取决于您是否希望“名称”仅出现在一行的特定位置，以及您是否希望“名称”仅在它不是较长单词的一部分时才匹配，例如您是否想要搜索“Jo”匹配“约翰”？

# javascript - 选择元素旁边的文本（几乎）

> ID：15926784
> 
> 赞同：0
> 
> 时间：2013-04-10T13:09:16.397
> 
> 标签：javascript, jquery, jquery-selectors, label, next

我需要将单选按钮及其旁边的文本包装在标签中，以使用户更加友好。

几天前我遇到了类似的问题，我有一个复选框，并且在我有一个 span 元素之后。我可以包装这两个元素。

我有这个 HTML：

```
<span class="Attribute">
    <input type="radio" name="vMONHRDREM" value="S">
    <script type="text/javascript">gx.dom.setAttribute("vMONHRDREM","gxoch0","if(!(gx.evt.jsEvent(this))) return false;");</script>
    Ativado

    <input type="radio" name="vMONHRDREM" value="N">
    <script type="text/javascript">gx.dom.setAttribute("vMONHRDREM","gxoch0","if(!(gx.evt.jsEvent(this))) return false;");</script>
    Desativado
</span> 
```

不幸的是，当我使用生成页面的工具时，我无法更改 HTML 结构。

我正在尝试做这样的事情：

```
$("input[type=radio]").each(function(){
    alert($(this).next().next().text());
}); 
```

但它不起作用。它不返回任何东西。如果我更改为`$(this).next().text()`我得到脚本文本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T13:20:12.043

```
$("input[type=radio]").each(function(){
    var text = $(this).next().get(0).nextSibling.nodeValue;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T13:21:59.540

输入元素没有文本内容，你拥有的是流氓文本节点，你需要将它们与输入一起定位，然后用标签标签包装它们：

```
$('.Attribute input[type="radio"]').each(function() {
    $(this).addBack()
           .add($(this).next('script')[0].nextSibling)
           .wrapAll('<label></label>');
}); 
```

[**小提琴**](http://jsfiddle.net/h87cf/1/)

# asp.net-mvc-4 - 尝试将 MVC 控制器的结果注入 Durandal 视图

> ID：15926785
> 
> 赞同：0
> 
> 时间：2013-04-10T13:09:17.417
> 
> 标签：asp.net-mvc-4, durandal

我正在尝试将部分 MVC 4 视图注入到 durandal 视图中。MVC 视图包含一个 Kendo 网格，我想将其包括在内，有点像在 durandal 中使用 compose。查看[如何在 Durandal 中使用 cshtml 文件？](https://stackoverflow.com/questions/14981833/how-can-i-use-cshtml-files-with-durandal/15636715#15636715)恐怕没有给我足够的启发。

有没有人想分享进一步的见解？如何在我的 durandal 视图中包含 MVC 视图？即我的 durandal /App/views/home.html 应该以某种方式包含我的 MVC 视图 /Views/Data/index.cshtml 的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:03:14.227

谢谢，观看 SPA 课程并阅读此主题：[https](https://groups.google.com/forum/#!topic/durandaljs/hpfZB-WFEXk) ://groups.google.com/forum/#!topic/durandaljs/hpfZB-WFEXk帮助解决了我的问题。我最终使用了Youngs方法，直到我看到这个例子我才明白......

# java - 使用 @JoinedColumns 尝试派生标识符，出现错误尝试修改标识列

> ID：15926792
> 
> 赞同：0
> 
> 时间：2013-04-10T13:09:27.990
> 
> 标签：java, hibernate, jakarta-ee, jpa, jpa-2.0

这是我的sql表结构：

```
create table TBL_EMPLOYEE_FIVE(
    EMP_ID integer generated always as identity(start with 50, increment by 4),
    NAME varchar(50),
    COUNTRY varchar(50),
    MGR_ID integer,
    MGR_COUNTRY varchar(50),
    constraint PK_COMPOSIT_001AD primary key(EMP_ID,COUNTRY),
    constraint  FK_COMPO_00123 foreign key(MGR_ID,MGR_COUNTRY) references TBL_EMPLOYEE_FIVE
) 
```

这是我的实体映射：

```
@Entity
@Table(name="TBL_EMPLOYEE_FIVE")
@IdClass(EmployeeId.class)
public class EmployeeOne implements Serializable{

    public EmployeeOne(){}
    public EmployeeOne(String employeeName,String empCountry){
        this.empCountry = empCountry;
        this.employeeName = employeeName;
    }

    public EmployeeOne(String employeeName,String empCountry,EmployeeOne manager){
        this.empCountry = empCountry;
        this.employeeName = employeeName;
        this.manager = manager;
    }

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    @Column(name="EMP_ID")
    private Integer employeeId;

    @Id
    @Column(name="COUNTRY")
    private String empCountry;

    @Column(name="NAME")
    private String employeeName;

    @ManyToOne( cascade= {CascadeType.PERSIST, CascadeType.PERSIST},
            fetch= FetchType.LAZY,
            targetEntity=EmployeeOne.class)
            @JoinColumns({
            @JoinColumn(name="MGR_ID",referencedColumnName="EMP_ID"),
            @JoinColumn(name="MGR_COUNTRY",referencedColumnName="COUNTRY")
    })
    private EmployeeOne manager;

    @OneToMany(cascade={CascadeType.PERSIST, CascadeType.PERSIST},mappedBy="manager")
    private Set<EmployeeOne> employees;
// getters and setters,
} 
```

这是嵌入的 id 映射，

```
@Embeddable
public class EmployeeId implements Serializable{

    public EmployeeId(){}

    public EmployeeId(Integer employeeId,String empCountry){
       this.employeeId = employeeId;
       this.empCountry = empCountry;
    }

    @Column(name="EMP_ID")
    private Integer employeeId;

    @Column(name="COUNTRY")
    private String empCountry;
// only getters and implementation of hashcode and equals method
} 
```

这就是我试图在我的主要方法中运行的内容：

```
EmployeeOne manager = new EmployeeOne("Yousuf Ahmadinejad", "IRAN");
em.persist(manager); 
```

但是在这里我遇到了一个例外，即

```
Caused by: javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: Attempt to modify an identity column 'EMP_ID'. 
```

这不像我不理解异常，

但是为什么首先会发生此异常？我已经用 @GenerateValue 为 Empid 注释了它，我没有手动设置 empId。是否发生此异常是因为我将主键组合为 empId 和国家/地区，并且 empId 是使用 Identity 自动生成的，因此它给出了异常？

你能告诉我出了什么问题吗

我想在这里添加的另一件事是，如果我删除了 EmployeeId.java 的 @Column 和 @Embeddeble 注释，然后运行，我得到以下异常，

```
Caused by: org.hibernate.PropertyAccessException: could not set a field value by reflection setter of com.entities.derived.EmployeeId.employeeId 
```

所以只是试图找到解决方案，让员工保持自动生成的 ID 不变

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:07:15.183

First Hibernate 不会为复合键生成 id，因此您应该将 EmployeeOne 更改为：

```
@Id
//@GeneratedValue(strategy=GenerationType.IDENTITY) remove this line
@Column(name="EMP_ID")
private Integer employeeId; 
```

其次，这不是您应该如何实现`EmployeeId`复合键类的方式。请参阅：[https ://stackoverflow.com/a/3588400/1981720](https://stackoverflow.com/a/3588400/1981720)

第三，异常是数据库抛出的，不是Hibernate。检查您是否在另一个数据库中遇到相同的异常。

# git - git部署：合并覆盖的未跟踪工作树文件

> ID：15926793
> 
> 赞同：1
> 
> 时间：2013-04-10T13:09:29.507
> 
> 标签：git, deployment

我正在尝试实现一个基于 git 的部署过程，例如[http://danbarber.me/using-git-for-deployment/](http://danbarber.me/using-git-for-deployment/)来部署 Web 应用程序。基本上它由实时服务器上的两个存储库组成：

*   一个裸仓库，您在其中推送“集线器”
*   Web 服务器公共目录中的普通存储库，您从“集线器”中提取。如果集线器具有适当的更新后挂钩，则会自动执行此操作。

问题是在我的项目中，我有很多目录，例如 /upload/，其中包含开发期间的示例数据和网络服务器上的真实实时数据。

理想情况下，我想将 upload/ 文件夹保留在本地存储库中，但不将其拉到实时存储库中。现在，“部分”拉动它似乎是不可能的，不是吗？

因此，即使不是最佳解决方案（我无法在本地存储库中克隆示例数据），我也会尝试忽略这些文件夹，但是：

*   我将 upload/ 文件夹添加到本地和实时存储库的 .gitignore 中。
*   我用 git rm --cached upload/ 删除了它
*   我将项目推到了裸露的“中心”仓库
*   在我从集线器拉出的实时存储库中
*   我收到错误：未跟踪的工作树文件将被合并覆盖...上传/xxx

在我看来，upload/ 文件夹仍然在某个地方......确实，在写这篇文章时，我看到从集线器克隆，文件夹 upload/ 也被克隆了！

唯一的解决方案是从所有项目历史记录中完全删除该文件夹，就像我在几个问题中看到的那样？

这是否会迫使在不同分支上工作的所有其他同事进行一些混乱的变基？

解释和掌握这一切可能很困难，但欢迎提出任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:36:19.783

你不需要做所有这些，假设你不想签出比你的分支负责人更旧的提交。

您需要做的是`upload/*`在新提交中消除，从那时起，任何看到新提交的人都不会看到该`upload`目录。

显然，您希望将`upload/*`文件备份到“集线器”*和*任何会从中提取的克隆上，删除提交中的上传，然后将备份放回原处。现在数据存在于您的目录中，但 git 不会再跟踪它们了。

注意：如果您不备份，您将删除`upload/*`集线器上的数据（可通过签出较旧的提交来恢复）或从中提取的任何人（如果未跟踪，则 git 会出错，或者通过签出较旧的提交来恢复）跟踪）。不过，最好先备份它。

* * *

例子：

```
$ git init
$ mkdir upload
$ echo 'upload/*' > .gitignore
$ touch to_track upload/not_track
$ git add .gitignore to_track upload/not_track
$ git commit 
```

现在您`upload/not_track`在存储库中。

```
$ cp upload/not_track ../backup
$ git rm upload/not_track
$ git commit
$ mv ../backup/not_track upload/ 
```

现在当前目录中的文件没有改变，但`upload/not_track`不再在存储库中（从这个提交开始）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:37:11.623

没有看到 git repo 很难确定，但你所描述的不应该发生。

您是否检查了文件夹中的隐藏文件（例如，其中的一个`.gitignore file`，或`.DS_Store`（Mac 文件夹浏览器缓存）或类似的？）。被忽略的文件不会被自动删除`git rm`。

如果你在你之前被忽略了，`git rm`你将不得不将它从忽略中删除，或者直接删除`rm`它。

# java - 为什么 CopyOnWriteArrayList.get 不需要同步？

> ID：15926794
> 
> 赞同：1
> 
> 时间：2013-04-10T13:09:34.337
> 
> 标签：java, locking, volatile, java.util.concurrent

刚刚看了一下 CopyOnWriteArrayList 类，我想知道为什么它的 get(...) 方法不需要任何同步。add(...) 和 set(...) 方法使用 ReentrantLock 更改互斥块中的底层数组。但是 get(...) 只是返回原始的底层数组，没有任何同步。好的，底层数组被声明为 volatile：

```
private volatile transient Object[] array; 
```

但我不明白使用 volatile 如何使任何同步变得多余。它只防止存储在数组中的引用被编译器缓存。如果我明白为什么这里不需要同步，我可以用比以前少一点的锁竞争来编写我的代码......

谢谢，奥利弗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:15:39.240

它使用了一个小“技巧”​​——当底层数组改变时，事件的顺序是：

1.  创建一个新数组
2.  填充新数组
3.  更改类持有的引用以指向新数组

第三步写入`private volatile transient Object[] array;`- 由于易失语义，在第三步之前所做的所有更改都是可见的。

因此，不仅新引用可见，而且**新数组的内容也可见**（这就是诀窍）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:13:19.803

线索就在名称中（正如 MarkRotteveel 指出的那样）。

当进行任何更改时，更改是单独进行的，`Object[]`然后整个批次被复制 - “写入时复制”。

由于内部`Object[]`是`volatile`当引用从旧的更改为`Object[]`新`Object[]`的时，所有线程都会接受更改。

# android - 大日期的 SimpleDateFormat 错误

> ID：15926804
> 
> 赞同：1
> 
> 时间：2013-04-10T13:09:47.367
> 
> 标签：android, simpledateformat

*更新：我以为是安卓版本的问题，但结果是用户时区*

当我的平板电脑时间处于中欧时间（夏季时间 +2）时，此代码会产生不正确的输出：

```
 SimpleDateFormat dateTimeFormatter = new SimpleDateFormat(
                "yyyy-MM-dd HH:mm:ss Z", Locale.GERMAN);

        Date testDate = dateTimeFormatter
                .parse("2999-01-01 00:00:00 +0100");
        Log.v(TAG, "test 1 " + testDate);

        testDate = dateTimeFormatter.parse("2099-01-01 00:00:00 +0100");
        Log.v(TAG, "test 2 " + testDate); 
```

“测试 1 星期一 12 月 31 日 23:19:32 CET 2998”

“测试 2 Thu Jan 01 00:00:00 CET 2099”

有一个时差。为什么较大日期的 40 分钟和几秒钟的差异？

当我将平板电脑放在（大多数）其他时区时，该错误不存在。与具有夏令时的时区有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:21:31.853

猜猜我无法克服这个错误，我已经构建了自己的日期解析器。

*更新：我自己的解析器也有同样的问题*

我目前的解决方案只是不使用这些大日期。如果日期 > 未来 100 年，我将其设置为未来 100 年。

# ruby-on-rails - 哪个 gem 适合用于 ruby on rails 的 APNS 持久连接？

> ID：15926809
> 
> 赞同：0
> 
> 时间：2013-04-10T13:10:02.283
> 
> 标签：ruby-on-rails, rubygems, apple-push-notifications

现在写我正在使用 apn_on_rails gem，它不会与 APN 服务器建立持久连接。所以我想使用 gem 来建立与 APN 服务器的持久连接，并且还会占用服务器的低内存。我找到了相同的以下宝石

*   jnak / apnmachine
*   ileitch / rapns
*   geoloqi / lead_zeppelin

所以请建议我哪个更好。

如果有人指导我，我真的很感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:02:33.787

我们在生产中使用这个[https://github.com/nerdsRob/APNS](https://github.com/nerdsRob/APNS)。它可以工作，并且可以与

```
APNS.cache_connections = true 
```

希望有帮助

# emacs - 将 XeLaTeX 添加到命令列表

> ID：15926817
> 
> 赞同：16
> 
> 时间：2013-04-10T13:10:16.433
> 
> 标签：emacs, latex, xelatex

我在 中编辑 tex 文件，然后通过命令`Emacs`编译它。编译它的另一种方法是在终端中使用。`C-c C-c``LaTeX``latex file.tex`

现在，我想编译一个文件`xelatex`，它`xelatex file.tex`已经在终端行中工作。所以我想让`C-c C-c`in`Emacs`能够启动`LaTeX`或者`XeLaTeX`. 理想情况下，`XeLaTeX`应将其添加到可能的命令列表中。

这是当前的[.emacs](http://paste.ubuntu.com/5695310/)，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T13:23:38.923

说

```
M-x customize-group 
```

和

```
tex-command 
```

然后找到“Tex 命令列表”选项。从那里您可以引入新的 AUCTeX 命令。

但是，AUCTeX 的使用方式略有不同。而不是创建一个单独的`XeLaTeX`命令，你可以做

*   `M-x TeX-engine-set`其次是`xetex` **或**
*   `(TeX-engine-set 'xetex)`在 lisp 代码中**或**
*   `Command | TeXing Options | Use XeTeX engine`在菜单栏中

（这三种方法是等价的）。

之后，该`LaTeX`命令将运行 xelatex 而不是 latex。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-07T09:49:50.307

一种更本地化的指定方法`TeX-engine`是将以下文本附加到`.tex`文件的最后。这将设置`TeX-engine`为`xetex`仅用于当前文件。

```
%%% Local Variables:
%%% TeX-engine: xetex
%%% End: 
```

### 编辑回复评论

此处给出了相同的答案： [https](https://tex.stackexchange.com/a/450955/90321) ://tex.stackexchange.com/a/450955/90321 ，但该答案还显示了如何`Tex-engine`使用命令行参数调用，通过向局部变量添加另一行：

```
%%% TeX-command-extra-options: "-shell-escape" 
```

# entity-framework - EF 4.4 中的 TableAttribute，具有 TableName 的旧构造函数在哪里？

> ID：15926821
> 
> 赞同：1
> 
> 时间：2013-04-10T13:10:34.293
> 
> 标签：entity-framework

我的项目需要 ef，由于使用 .NET 4.0，我们需要更新到 EF4.4。所以在这种情况下，我更改了对新程序集的引用。我收到我的 TableAttribute(TableName) 不再存在的构建错误。DataAnnotations.Schema 中还有另一个 Table 属性，它不采用表名。我使用该 Table 属性自动进行本地化，所以它在 EF 版本 4.4 中去了哪里。是否有替代方法可以向实体添加一个方面，该实体指定稍后分配的表？

# jquery-mobile - 移动网站和桌面网站：我必须复制我的代码吗？

> ID：15926822
> 
> 赞同：1
> 
> 时间：2013-04-10T13:10:34.620
> 
> 标签：jquery-mobile, mobile, symfony, responsive-design

我有一个使用 Symfony2 构建的网站，我想使用 jQuery mobile 创建它的移动版本（我目前正在使用 Twitter 引导程序作为桌面版本）。

我真的很困惑我必须选择的解决方案：

*   创建一个子域，例如： http: [//mobile.mywebsite.com](http://mobile.mywebsite.com)并创建另一个非常相似的 Symfony 项目，但只有其他 html.twig 文件（用于集成 jQuery mobile），但这意味着我会复制一个大我的代码的一部分？

*   我的 symfony 项目中的 html 文件中的媒体查询以根据屏幕大小使用 jquery 移动元素。因此，我只有一个项目需要维护。

任何建议都会很棒！谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:35:22.537

最佳实践是创建一个具有响应式设计的页面（媒体查询是其中的一部分），可以适应任何屏幕尺寸。

你绝对不应该做第二个 Symfony 项目。您实际上是在尝试为您的网站制作 2 种不同的布局，因此它们只会影响您的视图。如果您不想使用响应式设计，您可以为您的移动页面创建 twig 模板，并从您用于桌面站点的相同控制器加载这些模板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T14:36:55.333

您可以根据域名进行路由：

[http://symfony.com/doc/master/components/routing/hostname_pattern.html](http://symfony.com/doc/master/components/routing/hostname_pattern.html)

有了这个，您可以为移动站点使用不同的控制器，但仍然可以重用您的模型和（至少部分）您的视图。您甚至可以通过在路由中设置参数（基于主机）然后在控制器中使用它来重用一些控制器：

```
# routing.yml

mobile_homepage:
    path:     /
    host:     m.{domain}
    defaults: { _controller: AcmeDemoBundle:Main:homepage, mobileVersion: true }
    requirements:
        domain: %domain%

homepage:
    path:  /
    defaults: { _controller: AcmeDemoBundle:Main:homepage } 
```

然后在你的控制器中：

```
// Acme/DemoBundle/Controller/MainController.php

public function homepageAction($mobileVersion = false) {
  ...
  if ($mobileVersion) {
    // do some mobile things, perhaps return a specific template
  } else {
    // do some non-mobile things, perhaps return a specific template
  }
  ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-14T17:32:07.547

我知道这有点晚了，但它仍然可能对其他人有用。

今天早上我有同样的问题，谷歌给了我 MobileDetectBundle [https://github.com/suncat2000/MobileDetectBundle/](https://github.com/suncat2000/MobileDetectBundle/)这似乎解决了这类问题。还没试过，但我肯定会的！

# sql - 在一个 MySQL 语句中截断多个表

> ID：15926826
> 
> 赞同：29
> 
> 时间：2013-04-10T13:10:38.970
> 
> 标签：sql, truncate

是否有可能用一个 SQL 语句、多个表截断？

像这样：

```
 truncate table #OBJ_AvailabilityTraining, #OBJ_AvailabilityHoliday, #Dates_temp; 
```

问候

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-10T13:14:08.477

您可以像这样使用 sp_MSforeachtable 存储过程：

```
USE MyDatabase
EXEC sp_MSforeachtable 'TRUNCATE TABLE ?' 
```

或者您可以创建 SQL 语句

```
SELECT concat('TRUNCATE TABLE ', TABLE_NAME, ';')
FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_NAME LIKE 'TableName%' 
```

并运行上面的 SQL 语句

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-10T13:12:50.850

不，您只能使用 TRUNCATE 命令截断单个表。要截断多个表，您可以使用 T-SQL 并遍历表名以一次截断每个表。

```
DECLARE @delimiter CHAR(1),
        @tableList VARCHAR(MAX),
        @tableName VARCHAR(20),
        @currLen INT

SET @delimiter = ','

SET @tableList = 'table1,table2,table3'

WHILE LEN(@tableList) > 0
BEGIN
    SELECT @currLen = 
    (
        CASE charindex( @delimiter, @tableList ) 
            WHEN 0 THEN len( @tableList  ) 
            ELSE ( charindex( @delimiter, @tableList  ) -1 )
        END
    ) 

    SELECT @tableName = SUBSTRING (@tableList,1,@currLen )

    TRUNCATE TABLE @tableName

    SELECT tableList = 
    (
        CASE ( len( @tableList ) - @currLen  ) 
            WHEN 0 THEN '' 
            ELSE right( @tableList, len( @tableList ) - @currLen  - 1 ) 
        END
    ) 
END 
```

您可以在 @tableList 变量中使用逗号分隔所有表名，是的，如果它们带有前缀，您可以截断来自不同模式的多个表。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-10T13:14:23.040

不，但还有另一种选择：

```
SELECT 'TRUNCATE TABLE '+TABLE_NAME+ ';'
FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_NAME LIKE 'your-table-name%' 
```

**例子 ：**

```
SELECT 'TRUNCATE TABLE '+TABLE_NAME+ ';'
FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_NAME LIKE 'TBL_ORDERS_20%' 
```

**`Select`现在您对上述查询有以下结果**

```
TRUNCATE TABLE TBL_ORDERS_2001
TRUNCATE TABLE TBL_ORDERS_2002
TRUNCATE TABLE TBL_ORDERS_2003
TRUNCATE TABLE TBL_ORDERS_2004 
```

或者你可以使用类似的东西

```
select 'Truncate table ' + TABLE_NAME from INFORMATION_SCHEMA.TABLES where TABLE_NAME in ('Table1', 'Table2') 
```

**[链接 1](http://www.dotnetfactor.com/Forum/truncate-multiple-tables-in-sql-server-174.aspx)**

**[链接 2](http://social.msdn.microsoft.com/Forums/en-US/sqlsearch/thread/c1ea411f-22df-4cb4-8b8c-d4e856397895)**

**更新：**

`Query`在您的问题中查看您的示例中的表格

*`truncate table #OBJ_AvailabilityTraining, #OBJ_AvailabilityHoliday, #Dates_temp`*

我想你想要`Truncate`所有的**临时表**。

你可以这样`Query`做

```
select 'Truncate table ' + TABLE_NAME from tempdb.INFORMATION_SCHEMA.TABLES 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-03-27T15:01:18.113

只需轻松输入以下 MySQL 语句：

```
TRUNCATE TABLE yourtablename1;
TRUNCATE TABLE yourtablename2;
TRUNCATE TABLE yourtablename3; 
```

... 等等。

用你的更改**yourtablename**。

不要忘记分号；

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-17T00:05:02.653

奖励示例，截断一个数据库中以字符串开头的所有表...

```
SELECT CONCAT('TRUNCATE TABLE ', TABLE_NAME, ';')
FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_SCHEMA = 'my_database_name'
  AND TABLE_NAME LIKE 'cache_%'; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-11T07:05:48.953

我不得不更改 IndoKnight 发送的代码，因为它在 truncate 语句中引发错误，所以我通过此更改代码，它非常相似，但截断部分：

```
DECLARE @delimiter CHAR(1),
        @tableList VARCHAR(MAX),
        @tableName VARCHAR(100),
        @currLen INT,
        @truncateStatement VARCHAR(200)

SET @delimiter = ','

SELECT @tableList = COALESCE(@tableList + ', ','') + CAST (TABLE_NAME AS varchar(100))
    FROM INFORMATION_SCHEMA.TABLES
    WHERE TABLE_SCHEMA = 'xxx'

    WHILE LEN(@tableList) > 0
    BEGIN
        SELECT @currLen = 
        (
            CASE charindex( @delimiter, @tableList ) 
                WHEN 0 THEN len( @tableList  ) 
                ELSE ( charindex( @delimiter, @tableList  ) -1 )
            END
        ) 

        SELECT @tableName = TRIM(SUBSTRING (@tableList,1,@currLen ))

        SET @truncateStatement = 'TRUNCATE TABLE ' + QUOTENAME('xxx') + '.' + QUOTENAME(@tableName)
        EXEC (@truncateStatement)

        SELECT @tableList = 
        (
            CASE ( len( @tableList ) - @currLen  ) 
                WHEN 0 THEN '' 
                ELSE right( @tableList, len( @tableList ) - @currLen  - 1 ) 
            END
        ) 
    END 
```

诀窍是使用 QUOTENAME 将方括号放在表名和模式中。也许 IndoKnight 解决方案在更新版本的数据库中不再起作用。我希望它有所帮助。

# postgresql - postgresql中的重复记录

> ID：15926828
> 
> 赞同：1
> 
> 时间：2013-04-10T13:10:47.207
> 
> 标签：postgresql

我在 PostgreSQL 中有一个表。我在那里导入了 500 万条记录。并且不小心导入了一些重复的记录，我不需要从表中**删除那些重复的记录**。**这里 Table 的主键是四列的组合**..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:15:39.647

```
create table t2 as
select distinct on (col1, col2, col3, col4) *
from t;

drop table t;
alter table t2 rename to t; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:17:33.450

```
DELETE FROM the_table a
WHERE a.ctid <> (SELECT min(b.ctid)
                 FROM  the_table b
                 WHERE a.col_1 = b.col_1
                   AND a.col_2 = b.col_2
                   AND a.col_3 = b.col_3
                   AND a.col_4 = b.col_4); 
```

这将保留其中一个副本并删除其余部分。

# android - avd 中的谷歌游戏商店

> ID：15926829
> 
> 赞同：-1
> 
> 时间：2013-04-10T13:10:48.020
> 
> 标签：android, avd

我已经使用 Sony Add-on SDK 1.0（API 级别 16）在我最新的 eclipse indigo 上创建了 Xperia_go **AVD ，即 android 4.1.2**

现在我想在上面安装**Google Play Store**。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:15:41.007

简直不能。该模拟器不打算使用 google play 商店。有一些变通方法，但您需要非常了解 ADB 控制台，并且您需要获取 google play 的 apk 的非法副本。

如果您需要使用 google play 做某事，那么您需要使用物理设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:30:51.680

你不能这样做。

只需使用[BlueStacks](http://www.bluestacks.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-24T06:03:27.507

在 Android O 中，您可以在 SDK 管理器中安装 Google Play Intel x86 Atom System Image，它默认带有 Google Play Store。

![Google Play 英特尔 x86 Atom 系统映像](https://i.stack.imgur.com/TnrGD.png)

# paypal - Paypal 未正确计算 SetExpressCheckout 增值税

> ID：15926832
> 
> 赞同：2
> 
> 时间：2013-04-10T13:11:03.247
> 
> 标签：paypal

我需要使用 paypal API 设置付款并在 Paypal 页面上显示增值税计算，我使用的是[SetExpressCheckout](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_SetExpressCheckout)方法。

我的问题是：Paypal 在净价中包含 20% 的增值税，然后在付款明细中将税款设置为 0%。它应该显示交易的全部细节（净 + 20% 在 2 行中，因为它是我经历的大多数 Paypal 付款）

这是我正在使用的参数：

```
&PAYMENTREQUEST_0_AMT=120
&PAYMENTREQUEST_0_ITEMAMT=100
&PAYMENTREQUEST_0_TAXAMT=20
&PAYMENTREQUEST_0_PAYMENTACTION=Sale
&RETURNURL=http://xxxxx.com/paypalCheckout/orderconfirm.php
&CANCELURL=http://xxxxx.com/paypalCheckout/ordercancel.php
&PAYMENTREQUEST_0_CURRENCYCODE=GBP
&REQCONFIRMSHIPPING=0
&NOSHIPPING=1
&L_PAYMENTREQUEST_0_AMT0=100
&L_PAYMENTREQUEST_0_TAXAMT0=20
&L_PAYMENTREQUEST_0_NAME0=My+ItemXXX
&L_PAYMENTREQUEST_0_QTY0=1
&L_PAYMENTREQUEST_0_ITEMCATEGORY0=Digital 
```

文档和网络搜索并没有给我太多关于它的信息。谢谢你的帮助。

# android - 如何从 sqlite 数据库中获取 CountTotal

> ID：15926833
> 
> 赞同：-1
> 
> 时间：2013-04-10T13:11:05.667
> 
> 标签：android, sqlite, android-sqlite

我正在尝试从 DB 收集 TotalCount 但由于我的查询有问题而无法这样做，我无法弄清楚。以下是我的查询：

```
public int getIds()
               {
                   String strCount = "";
                   int count = 0;
                   Cursor c = database.rawQuery("SELECT COUNT(Pst_id) AS CountTotal FROM student_posts", null);

                   while(c.moveToFirst())
                   {
                   strCount = c.getString(c.getColumnIndex("CountTotal"));
                   }
                   count = Integer.valueOf(strCount).intValue();
                   return count;                       
               } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:13:16.663

你有一个无限循环：

```
/* c.moveToFirst() returns true when at least one entry was found */
while (c.moveToFirst()) {
    strCount = c.getString(c.getColumnIndex("CountTotal"));
} 
```

将其更改为

```
if (c.moveToFirst()) 
```

并且不要忘记在光标上添加一些空检查并在返回之前关闭光标。

# ruby - 从末尾开始每 3 个字符插入一个字符串

> ID：15926837
> 
> 赞同：1
> 
> 时间：2013-04-10T13:11:14.827
> 
> 标签：ruby, string

我正在尝试将逗号插入每三位数字的字符串中。插值必须从字符串的末尾开始。所以，输入是：

```
"12345678" 
```

输出应该是：

```
"12,345,678" 
```

到目前为止，我想出了：

```
"12345678".reverse.gsub(/(\d{3})(?=.)/) { $1 + ',' }.reverse 
```

但这对我来说似乎有点笨拙。关于如何更优雅地解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:25:47.257

这类似于 Linuxious 答案，但更短一些：

```
p '12345678'.reverse.chars.each_slice(3).map(&:join).join(',').reverse
#=> "12,345,678" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:23:06.617

这里有一些比你的解决方案更干净的东西（不多，但至少它不涉及正则表达式:)）：

```
"12345678".each_char.to_a.reverse.each_slice(3).to_a.reverse.map {|a| a.reverse.join}.join(',') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T13:45:52.307

Rails[`number_with_delimiter`](http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_with_delimiter)使用这个正则表达式：

```
"12345678".gsub /(\d)(?=(\d\d\d)+(?!\d))/, '\1,'
# => "12,345,678" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T13:44:42.543

```
"12345678".gsub(/(?<=\d)(?=(?:\d{3})+\z)/, ",") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T13:28:30.720

```
"12345678".reverse.chars.each_slice(3).to_a.map{|x| x.join}.join(",").reverse 
```

输出：

```
12,345,678 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T15:16:56.410

另一种选择，更概括一点，以便更容易适应方法，并使用更新的 Ruby 2 语法：

```
def intersperse(ns, char: ",", step: 3)
  ys = ""
  ns.chars.each_with_index{|n,i|
    ys << char if i % step == ns.length % step unless i == 0
    ys << n 
  }
  ys
end

ns = "12345678"
intersperse ns
# => "12,345,678"
intersperse ns, step: 2
# => "12,34,56,78"
intersperse ns, char: "!"
# => "12!345!678" 
```

# c++ - malloc_consolidate 创建新线程时出错

> ID：15926838
> 
> 赞同：0
> 
> 时间：2013-04-10T13:11:15.660
> 
> 标签：c++, multithreading, memory, operating-system

我正在尝试创建一个管理简单线程的程序。这是主程序：

```
int main(int argc, char **argv)
{
  printf("test2:\n--------------\n");
  clock_t stop1;

  uthread_init(100);
  printf ("***%d***\n",uthread_get_tid());
  if(uthread_spawn(f1)==-1)
        printf("FAIL: uthread_spawn failure\n");

  stop1 = clock () + 0.05 * CLOCKS_PER_SEC;
  int i;    
  printf ("StartLoop of thread: ***%d***\n",uthread_get_tid());
  while(clock ()<stop1) {
    for(i=0;i<10000000;i++) {}
  }
  printf ("FinishLoop of thread: ***%d***\n",uthread_get_tid());

  uthread_terminate(0);
  return 0;
} 
```

代码正在创建新线程，然后创建一个新线程，然后创建一个新线程。在创建三分之三时，我得到了错误。程序卡在这里（在创建线程函数中）：

```
int uthread_spawn(void (*f)(void)) {
DBG(("Spawning !"))
        //checking if number of threads is bigger then max
if (getThreadCount() > MAX_THREAD_NUM){
    errmsgLibrary(MAX_THREADS_LIM);
    return FAIL;
}

// TODO - Check if needed to block/unblock here
if (blockTimerSignal(BLOCK) == SUCCESS){
    DBG(("Block signal success"))
    DBG(("ntid value: %d",nTid))
    pThread t = new Thread(f,nTid++);
    DBG(("new thread created"))
    t->setState(Thread::READY);
    ready.push_back(t);
    DBG(("Added new Thread - %d",(nTid-1)))
    DBG(("Number of threads in ready list is  - %d",(ready.size())))
    blockTimerSignal(UNBLOCK);
    return (nTid-1);
}
DBG(("Block signal not success"))
return FAIL;
} 
```

在尝试创建新的 Thread() 时。

我得到的错误是：

```
test02-new: malloc.c:5161: malloc_consolidate: Assertion `p->fd_nextsize->bk_nextsize == p' failed.
Abort 
```

# google-chrome-extension - 将 Google API 连接到 Chrome 扩展程序

> ID：15926841
> 
> 赞同：1
> 
> 时间：2013-04-10T13:11:24.437
> 
> 标签：google-chrome-extension, google-spreadsheet-api

我确信这真的很明显而且很容易做到，但我似乎找不到任何关于如何做到这一点的信息。

所以我有一个 chrome 扩展，它可以做一些事情并使用 javascript 收集一些数据。这一切都很好。我想将此数据写入谷歌电子表格。因此，我使用 Google 电子表格 API 在 Java 中编写代码，将带有数据的行插入到适当的电子表格中。（代码基本上只是这里的教程[https://developers.google.com/google-apps/spreadsheets/#adding_a_list_row](https://developers.google.com/google-apps/spreadsheets/#adding_a_list_row)并添加了适当的 OAuth 位）

如何让我的扩展程序使用它？我是否需要将其打包为 Web 应用程序并从扩展程序中调用它？我可以编写一个实现相同功能的 javascript 代码并将其与应用程序打包吗？再次抱歉，如果这真的很明显，这是我第一次在 Web 应用程序上工作，所以我一直在努力解决这个问题。谢谢。

这是用于写入电子表格的（精简的）java代码：

```
public class MySpreadsheetIntegration {
      public static void main(String[] args)
          throws AuthenticationException, MalformedURLException, IOException, ServiceException {
           **OAuth stuff all happens first, not shown here as I'm not too concerned about it at the moment***

        SpreadsheetService service =
            new SpreadsheetService("MySpreadsheetIntegration-v1");

        // Define the URL to request.  This should never change.
        URL SPREADSHEET_FEED_URL = new URL(
            "https://docs.google.com/some_url");

        // Make a request to the API and get all spreadsheets.
        SpreadsheetFeed feed = service.getFeed(SPREADSHEET_FEED_URL,
            SpreadsheetFeed.class);
        List<SpreadsheetEntry> spreadsheets = feed.getEntries();

         //this pulls out the first spreadsheet.
        SpreadsheetEntry spreadsheet = spreadsheets.get(0); //spreadsheet is of type List
        //System.out.println(spreadsheet.getTitle().getPlainText());

        // Get the first worksheet of the first spreadsheet.
         WorksheetFeed worksheetFeed = service.getFeed(
            spreadsheet.getWorksheetFeedUrl(), WorksheetFeed.class);
        List<WorksheetEntry> worksheets = worksheetFeed.getEntries();
        WorksheetEntry worksheet = worksheets.get(0);

        // Fetch the list feed of the worksheet.
        //I think this will give me the headings from the spreadsheet, but insert them manually for now
        URL listFeedUrl = worksheet.getListFeedUrl();
        ListFeed listFeed = service.getFeed(listFeedUrl, ListFeed.class);

        // Create a local representation of the new row.
        ListEntry row = new ListEntry();
        String sDt, sUs, sTy, sAcc, sAccTy, sCon, sNt, sFw, sFwDt;

        sDt = "1/1/2013";
        sUs = "SK";

        row.getCustomElements().setValueLocal("Date", sDt);
        row.getCustomElements().setValueLocal("User", sUs);

        // Send the new row to the API for insertion.
        //this will be inserted at the bottom of the row. 
        //TODO make this get inserted at the top of the worksheet
        row = service.insert(listFeedUrl, row);

        System.out.println("Revoking OAuth Token...");
        oauthHelper.revokeToken(oauthParameters);
        System.out.println("OAuth Token revoked...");

      }
    } 
```

扩展弹出窗口只是一个带有表单的基本 HTML 页面。我有一个 javascript 将一些详细信息写入此表单，然后用户将手动输入更多信息。然后我想使用电子表格 API 来获取这些值并将它们写入适当的电子表格。这就是上面的java代码所做的，但我不知道如何将两者联系起来。

# c++ - OpenGL - 纹理一个基本的立方体

> ID：15926842
> 
> 赞同：0
> 
> 时间：2013-04-10T13:11:25.390
> 
> 标签：c++, opengl

我试图通过只使用一个纹理来纹理一个立方体，但只在每个面上渲染它的一部分。

这是我现在想使用的纹理：

![在此处输入图像描述](https://i.stack.imgur.com/OyUPg.png)

我的目标是通过着色器完成这项工作，我还没有使用它们的经验，但我正在努力学习..

这是我当前的片段着色器：

```
uniform sampler2D tex0;

void main()
{
    vec2 pos = vec2(gl_TexCoord[0] / 4.0);
    vec3 test = texture2D(tex0,pos).rgb;
    gl_FragColor.rgb = test;
} 
```

**显然这只是开始，所有的边都使用纹理的相同部分，我只是着色器的新手，我什至不确定这是否真的可以这样做..**

我只是不知道是否真的有可能确定我当前在哪张脸上等等，我想我可能能够将有关顶点的信息传递给片段着色器然后根据它采取行动？

PS：我首先这样做是因为我想要一个功能，如果立方体将被调整大小，每一面的纹理都会重复而不是拉伸

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:25:56.700

`gl_TexCoord`已弃用。您应该创建另一个通用顶点属性并在其中存储纹理坐标。

在片段着色器中应用纹理时，通常首先将纹理坐标提供给顶点着色器，然后在所有生成的片段中线性插值：

```
#version 430
//...
layout(location = 1) in vec2 attr_texcoord;
out vec2 out_texcoord;

void main () {
    out_texcoord = attr_texcoord;
    //...
} 
```

现在您可以`out_texcoord`在片段着色器中使用。

# dll - 从 MBS Axapta 3 访问 COM DLL

> ID：15926854
> 
> 赞同：0
> 
> 时间：2013-04-10T13:11:55.703
> 
> 标签：dll, com, axapta, microsoft-dynamics, ax

我们公司有 MBS Axapta 3。老板不想迁移到更高版本的Dynamics AX，所以我坚持这个。

基本上我正在尝试从 Axapta 的 X++ 代码访问我自己的 COM DLL。我希望能够访问 .net 函数，所以我使用本教程创建了我的 DLL：

[http://www.softwareandfinance.com/CSharp/CS_ClassLib_Step1_CreateProject.html](http://www.softwareandfinance.com/CSharp/CS_ClassLib_Step1_CreateProject.html)

我的 DLL 的最终代码是：

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Runtime.InteropServices;

namespace ClaseCOM
{
    public class Test
    {
        [Guid("12D1EDAC-20C0-4faa-A774-B6F4C300B47E")]
        [InterfaceType(ComInterfaceType.InterfaceIsDual)]
        public interface IMathCtrl
        {
            [DispId(1)]
            int AddNumbers(int a, int b);
        }

        [Guid("282902B4-5FB9-461d-9CD0-FE8DD851F979")]
        [ClassInterface(ClassInterfaceType.None)]
        [ProgId("SFTCSServer.MathCtrl")]
        public class MathCtrl : IMathCtrl
        {
            public MathCtrl() { }

            public int AddNumbers(int a, int b)
            {
                return (a + b);
            }

            public int MuliplyNumbers(int a, int b)
            {
                return (a * b);
            }
        }
        public static string ReturnString(string a)
        { 
            return "Ha enviado " + a;
        }
    }
} 
```

生成 tbl 并使用 gacutil 注册 dll 后，我可以从 Axapta 调用我的 dll，但它无法识别任何方法。它给出了一个错误“方法不存在”

这是我的 x++ 代码：

```
static void DT_PruebasCOM(Args _args)
{
    COM PruebaCOM;
    COMVariant a,b;    ;
    PruebaCOM = new COM('ClaseCOM.Test');

// create variants to hold the arguments for the functions
    a = new COMVariant(COMVariantInOut::OUT, COMVariantType::VT_I4);
    b   = new COMVariant(COMVariantInOut::OUT, COMVariantType::VT_I4);

    PruebaCOM.ReturnString();
} 
```

它为 AddNumbers 和 MathCtrl 和 IMathCtrl 提供了相同的错误，所以我真的不知道是否需要设置一些东西才能使此方法在 Axapta 代码中可见。

关于如何解决这个问题的任何想法？

谢谢！！

# jquery - 服务器端 标签阻止 jQuery validate 插件验证

> ID：15926857
> 
> 赞同：0
> 
> 时间：2013-04-10T13:12:02.553
> 
> 标签：jquery, asp.net, .net, jquery-validate

当在此代码中单击提交按钮时，名称字段中没有任何内容，验证（）函数应该启动并说“此字段是必需的”。这工作正常，直到我添加服务器端表单标签。一旦这个标签在那里（我将需要它来处理页面上的其他事情，validate() 函数似乎根本不会运行，因为页面会立即进行回发，其中 validate() 函数会阻止表单提交时验证失败。

下面的代码是非工作代码。如果我取出该行和最后一个关闭表单标签（标签，它会起作用 - 它会验证，显示“此字段是必需的”，并成功阻止表单加载。

所以我的问题是，为什么这不适用于服务器端表单标签？

```
<!DOCTYPE html>
<html>
    <head>
      <script src="http://code.jquery.com/jquery-latest.js"></script>
      <script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
      <script type="text/javascript">
          $(document).ready(function () {
              $("#nameForm").validate();
          });
      </script>
    </head>
    <body>
        <form id="form1" runat="server">
            <form id="nameForm" method="get" action="">
                <p>
                    <label for="cname">Name</label>
                    <em>*</em>
                    <input id="cname" name="name" size="25" class="required" minlength="2" />
                </p>
                <p>
                    <input class="submit" type="submit" value="Submit"/>
                </p>
            </form>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:21:38.753

Floradu88 注意到有 2 个表单是不正确的，下面的代码（删除了其中一个表单）现在似乎可以正常工作，谢谢！

```
<!DOCTYPE html>
<html>
    <head>
      <script src="http://code.jquery.com/jquery-latest.js"></script>
      <script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
      <script type="text/javascript">
          $(document).ready(function () {
              $("#form1").validate();
          });
      </script>
    </head>
    <body>
        <form id="form1" runat="server">
            <p>
                <label for="cname">Name</label>
                <em>*</em>
                <input id="cname" name="name" size="25" class="required" minlength="2" />
            </p>
            <p>
                <input class="submit" type="submit" value="Submit"/>
            </p>
        </form>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-18T20:07:28.550

这是因为 html 中不支持嵌套表单，嵌套表单会被忽略，您可以通过在主表单后添加 empty from 来解决它

你编码

```
<!DOCTYPE html>
<html>
    <head>
      <script src="http://code.jquery.com/jquery-latest.js"></script>
      <script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
      <script type="text/javascript">
          $(document).ready(function () {
              $("#nameForm").validate();
          });
      </script>
    </head>
    <body>
        <form id="form1" runat="server">
 <form></form>
            <form id="nameForm" method="get" action="">
                <p>
                    <label for="cname">Name</label>
                    <em>*</em>
                    <input id="cname" name="name" size="25" class="required" minlength="2" />
                </p>
                <p>
                    <input class="submit" type="submit" value="Submit"/>
                </p>
            </form>
        </form>
    </body>
</html> 
```

参考链接 [jQuery Validation Issue with a form inside a form](https://stackoverflow.com/questions/11424215/jquery-validation-issue-with-a-form-inside-a-form/31495051#31495051)

# image - 如何在 javafx 的滑块中动态更改滑块拇指图标图像？

> ID：15926861
> 
> 赞同：5
> 
> 时间：2013-04-10T13:12:18.237
> 
> 标签：image, slider, javafx-2

在 fxml 文件中有滑块：

> > 滑块 fx:id="slider" minHeight="20" minWidth="-Infinity" prefWidth="300.0"

想要从我的 .java 类更改滑块拇指图标图像，因为我可以通过使用更改拇指图标图像`css`

```
.slider .thumb{
 -fx-background-image :url("your image");   
 ...// more customization       
} 
```

但我想从 .java 类更改图像

请建议..

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T15:02:16.457

[您可以使用Node#lookup()](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#lookup%28java.lang.String%29)方法从 Java 代码中找到 thumb 。

```
String IMAGE = getClass().getResource("my-image.png").toExternalForm();

StackPane thumb = (StackPane)slider.lookup(".thumb");
thumb.getChildren().clear();
thumb.getChildren().add(new ImageView(IMAGE)); 
```

**注意：**请注意，您需要在`stage.show()`查找正常工作后调用此代码。

# sql-server - 在这种简单的情况下，如何在时间范围内更快地检索行？

> ID：15926864
> 
> 赞同：1
> 
> 时间：2013-04-10T13:12:26.620
> 
> 标签：sql-server, tsql, datetime, between, non-clustered-index

我试图弄清楚为什么在时间范围内选择行需要太多时间。

我有一个超过 500 万行的数据库表。

FooTimestamp 列上有一个非唯一、非聚集索引，它是 DateTimeOffset 类型。

当我尝试检索某个时间范围内的某些行时，需要 2 分钟以上。（当我再次运行它时，由于 MS-SQL Server 2008 的缓存功能，我猜它相对较快）

```
DECLARE @since datetimeoffset
DECLARE @before datetimeoffset

SET @since ='2013-03-20 00:00:00 +02:00'
SET @before ='2013-03-27 00:00:00 +02:00'

SELECT *
WHERE ([FooTimestamp] >= @since AND [FooTimestamp] <= @before) 
```

**问题**：当从具有数百万条记录的表中检索行时，我应该怎么做才能更快地获得查询结果？（我认为这样一个直截了当的查询需要 2 分钟太多了）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:05:40.260

如果你想优化这个特定的查询，我会在你的`FooTimeStamp`列上创建一个聚集索引。聚集索引将允许 SQL Server 使用索引提取所有行数据，而无需进行额外的查找。

这将要求您删除任何现有的聚集索引。如果需要，您可以将其作为非聚集索引添加回来。

与您的评论相反，聚集索引不必是唯一的。另请参阅[聚簇索引是否必须是唯一的？](https://stackoverflow.com/questions/4332982/do-clustered-indexes-have-to-be-unique)

# asp.net - ASP。NET 网页：创建一个搜索框以从 Oracle 中的表中搜索数据

> ID：15926868
> 
> 赞同：0
> 
> 时间：2013-04-10T13:12:31.007
> 
> 标签：asp.net, sql, oracle, search

我正在尝试创建一个 ASP.NET 网页来输出一个文本框，然后用户将在此文本框中输入密钥，然后我使用该密钥在 SQL 代码中放入 WHERE 条件以输出与该密钥匹配的数据。例如，用户在文本框中输入 ArtistID，我需要使用 SPEEDOFSALEREPORT 打印表格

> SELECT * FROM SPEEDOFSALEREPORT WHERE ArtistID = "用户刚刚输入的密钥"

但我不知道怎么做。我下面的代码创建一个文本框并打印表中的所有行。请给我一个提示。我整天都在谷歌上搜索，但找不到答案。谢谢你。

这是我更新的 Default.aspx

```
 <body>
    <form id="form1" runat="server">
    <asp:TextBox ID="txtArtistID" runat="server" /><br /><br />
    <asp:Button ID="btnSearch" runat="server" Text="Search" CssClass="submit" />

    <div>
        <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
            DataSourceID="SqlDataSource1">
            <Columns>
                <asp:BoundField DataField="TRANSACTIONID" HeaderText="TRANSACTIONID" 
                    SortExpression="TRANSACTIONID" />
                <asp:BoundField DataField="WORKID" HeaderText="WORKID" 
                    SortExpression="WORKID" />
                <asp:BoundField DataField="ARTISTID" HeaderText="ARTISTID" 
                    SortExpression="ARTISTID" />
                <asp:BoundField DataField="DATEACQUIRED" HeaderText="DATEACQUIRED" 
                    SortExpression="DATEACQUIRED" />
                <asp:BoundField DataField="DATESOLDID" HeaderText="DATESOLDID" 
                    SortExpression="DATESOLDID" />
                <asp:BoundField DataField="TURNAROUNDDAYS" HeaderText="TURNAROUNDDAYS" 
                    SortExpression="TURNAROUNDDAYS" />
                <asp:BoundField DataField="ASKINGPRICE" HeaderText="ASKINGPRICE" 
                    SortExpression="ASKINGPRICE" />
                <asp:BoundField DataField="SALESPRICE" HeaderText="SALESPRICE" 
                    SortExpression="SALESPRICE" />
                <asp:BoundField DataField="SALESMARGIN" HeaderText="SALESMARGIN" 
                    SortExpression="SALESMARGIN" />
            </Columns>
        </asp:GridView>
    </div>

    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="Data Source=oracle2;User ID=****;Password=****;Unicode=True" 
    ProviderName="System.Data.OracleClient" 
    SelectCommand="SELECT * FROM SPEEDOFSALEREPORT WHERE ARTISTID = @artistID;">

    <SelectParameters>
        <asp:ControlParameter Name="artistID" ControlID="txtArtistID" PropertyName="Text" />
    </SelectParameter>
</asp:SqlDataSource>

    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:34:00.500

检查这一行：

```
 <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="Data Source=oracle2;User ID=******;Password=***********;Unicode=True" 
        ProviderName="System.Data.OracleClient" 
        SelectCommand="SELECT * FROM SPEEDOFSALEREPORT"> 
```

正确使用这个：

```
 <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="Data Source=oracle2;User ID=******;Password=***********;Unicode=True" 
        ProviderName="System.Data.OracleClient" 
        SelectCommand="SELECT * FROM SPEEDOFSALEREPORT"
        FilterExpression="Artistid='{0}'">

       <FilterParameters><asp:ControlParameter Name="" ControlID="ArtistID" PropertyName="Value"/>  
        </FilterParameters> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:39:04.447

您需要使用 ArtistID 作为参数，并更改您的文本框和提交按钮到 ASP 控件，如下所示：

```
<asp:TextBox ID="txtArtistID" runat="server" /><br /><br />
<asp:Button ID="btnSearch" runat="server" Text="Search" CssClass="submit" />
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="Data Source=oracle2;User ID=******;Password=***********;Unicode=True" 
    ProviderName="System.Data.OracleClient" 
    SelectCommand="SELECT * FROM SPEEDOFSALEREPORT WHERE ARTISTID = @artistID;">
    <SelectParameters>
        <asp:ControlParameter Name="artistID" ControlID="txtArtistID" PropertyName="Text" />
    </SelectParameters>
</asp:SqlDataSource> 
```

然后在您的代码后面（VB.NET）中单击按钮上的网格绑定：

```
Protected Sub btnSearch_Click(sender As Object, e As EventArgs) Handles btnSearch.Click
    GridView1.DataBind()
End Sub 
```

或（C#）：

```
protected void btnSearch_Click(Object sender, EventArgs e)
{
    GridView1.DataBind();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-17T10:25:26.483

```
protected void Button1_Click(object sender, EventArgs e){
        if (TextBox1.Text != ""){
        con.Open();
        int i = 0;
        SqlCommand cmd0 = new SqlCommand("select noticeid from TBLnotice where noticeid='" + TextBox1.Text + "'", con);
        i= int.Parse(cmd0.ExecuteScalar().ToString());
        if (i > 0){
            SqlCommand cmd1 = new SqlCommand("select notice from TBLnotice where noticeid='" + TextBox1.Text + "'", con);
            string name = cmd1.ExecuteScalar().ToString();
            txtadds.Text = name;
            TextBox1.Text = "";
            txtadds.Text = "";
            con.Close();
        }
        else{
            Label7.Visible = true;
            con.Close();
        }
    }
} 
```

# android - 如何更改 DatePicker 对话框的颜色

> ID：15926869
> 
> 赞同：4
> 
> 时间：2013-04-10T13:12:37.520
> 
> 标签：android

我喜欢更改 DatePicker Dialog 的颜色。我将对话框加载为

```
@SuppressLint("NewApi")
public static class DatePickerFragment extends DialogFragment implements DatePickerDialog.OnDateSetListener {

       @SuppressLint("NewApi")
    @Override
       public Dialog onCreateDialog(Bundle savedInstanceState) {
            // Use the current date as the default date in the picker
            final Calendar c = Calendar.getInstance();
            int year = c.get(Calendar.YEAR);
            int month = c.get(Calendar.MONTH);
            int day = c.get(Calendar.DAY_OF_MONTH);

            // Create a new instance of DatePickerDialog and return it
            return new DatePickerDialog(getActivity(), this, year, month, day);
      }

      public void onDateSet(DatePicker view, int year, int month, int day) {
           // Do something with the date chosen by the user

      }

}

@SuppressLint("NewApi")
public void showDatePickerDialog(View v) {
    DialogFragment newFragment = new DatePickerFragment();
    newFragment.show(getFragmentManager(), "datePicker");//show(getSupportFragmentManager(), "datePicker");
} 
```

当它加载对话框时，它是白色背景。如何更改显示颜色，如第二张图片所示？谢谢![在此处输入图像描述](https://i.stack.imgur.com/TGYQ5.png)![在此处输入图像描述](https://i.stack.imgur.com/nGbEi.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-04T10:47:18.020

根据您的查询，您必须创建自定义对话框主题并在`custom_theme.xml`Now 中设置，只需根据您的`API`版本进行设置。

首先，在值中添加一个像这样的主题.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="MyAppTheme" parent="@android:style/Theme.Light.NoTitleBar">
        <!-- Any customizations for your app running on pre-3.0 devices here -->
    </style>
</resources> 
```

然后，在 res 目录中创建一个名为“values-v11”（Android 3.0+）的目录，并像这样放置一个 theme.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="MyAppTheme" parent="@android:style/Theme.Holo.Light">
        <!-- Any customizations for your app running on 3.0+ devices here -->
    </style>
</resources> 
```

最后在res目录下创建一个名为“values-v14”（Android 4.0+）的目录，并创建一个themes.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="MyAppTheme" parent="@android:style/Theme.DeviceDefault.Light.NoActionBar">
        <!-- Any customizations for your app running on 4.0+ devices here -->
    </style>
</resources> 
```

[有关更多详细信息](https://stackoverflow.com/questions/9681648/how-to-use-holo-light-theme-and-fall-back-to-light-on-pre-honeycomb-devices)，请查看链接并关注它。

希望你能从他们那里得到一些想法并解决你的问题。

祝你好运。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T14:32:36.000

这是我会尝试的。对于 Android <= 2.3 (API 10 / v10)，让您的主题从默认的 android light 主题扩展，在 Android 3.0 (API 11 / v11) 及更高版本中，我将从 holo light 主题扩展。你可以在这里看到如何做到这一点： [如何使用 Holo.Light 主题，并在预蜂窝设备上回退到“Light”？](https://stackoverflow.com/questions/9681648/how-to-use-holo-light-theme-and-fall-back-to-light-on-pre-honeycomb-devices)

我不是 100% 确定这会改变您的警报对话框，因为我没有广泛使用浅色主题，因此您可能需要从浅色主题中编辑一个或两个属性以使编辑文本的背景变浅.

# ruby - 我如何确定我的宝石是安全的？

> ID：15926873
> 
> 赞同：4
> 
> 时间：2013-04-10T13:12:46.447
> 
> 标签：ruby, security, gem

我正在寻找一种自动化方式来检查我基于 sinatra 的站点中使用的所有 gem 以获取可用的安全更新。这样的事情存在吗？

我对更新的原则态度是：如果它没有损坏，就不要尝试修复它。但是，如果我很脆弱，那么我想知道它。通过仅应用安全更新，我将潜在的行为变化量保持在最低限度。

背景：我以前的大部分工作都是在 Drupal 中进行的。在该社区中，维护人员可以将他们的模块版本标记为修复安全问题。这意味着我的网站或我的 CLI 工具可以查询当前网站中使用的模块的发布数据，以查看是否有可用的安全更新并通知我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T13:27:18.073

据我所知，没有明确的方法可以自动执行此操作。Ruby gem 中没有标志表示它们是安全更新等的概念。不过，大多数 gem 维护者都非常善于遵守`major.minor.patch`版本号的约定。主要的颠簸是破坏 API，次要的添加功能但向后兼容，补丁用于错误修复或非常微不足道的更改。没有强制执行此操作，有些 gem 甚至不使用三部分的版本号。Rails 本身在这方面的失败尤其令人震惊。Rails 次要版本的颠簸是普遍不兼容的，破坏性的变化。不过，Rails 补丁程序漏洞往往是安全修复。

如果这足以满足您的需求，您可以使用 Bundler 指定您只需要补丁级别的更新：

```
gem 'foo', '~> 2.2.0' 
```

...将安装 gem 的 2.2.x 版本的最新补丁级别（例如，您可能最终得到 2.2.12，但不是 2.3.0）。

有关版本字符串（由 Bundler 使用）以及如何保守（术语中的“悲观”）的更多信息，请参阅[Rubygems 文档。](http://docs.rubygems.org/read/chapter/16#page74)另请参阅他们的[编号指南](http://docs.rubygems.org/read/chapter/7)。同样，请记住，这些并不是严格执行的，而且 Rails 本身提供了一个打破常规的可怕例子，其他 gem 作者并不总是做正确的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-18T02:40:07.837

如果您在项目中使用[Bundler](http://bundler.io/)，则可以检查您是否使用最新版本的 gems 和`bundle outdated`. 要了解您正在使用的 gem 版本是否存在已知的安全漏洞，您可以使用[bundler-audit](https://github.com/rubysec/bundler-audit) gem，或者[holepicker](https://github.com/jsuder/holepicker) gem。还有一项名为[Gemnasium](https://gemnasium.com/)的服务可以为您监控您的 gem，并在 gem 更新或出现安全问题时通知您。

**更新**：Github 现在监控您的存储库`Gemfile`并在 gem 出现安全问题时通知您。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T13:39:52.003

有一个叫做[Gemnasium](https://gemnasium.com/)的网站。它会检查您使用的 gem 是否是最新的，如果有任何安全问题，它会向您发送电子邮件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-22T23:52:02.020

从 github 上的 ruby​​sec安装[bundle-audit gem 。](https://github.com/rubysec/bundler-audit)定期/定期运行它。它是免费的，通过已知安全威胁的 CVE 库保持最新，并报告您项目中的哪些 gem 有可用更新。

# android - Android：无法启动活动组件信息

> ID：15926874
> 
> 赞同：0
> 
> 时间：2013-04-10T13:12:47.277
> 
> 标签：android

我的 Android 应用程序有问题。我正在尝试在我的 Android 设备和我的 PC 之间以串行方式进行通信。这对于我使用 Android NDK 的我来说。一旦我开始使用使用串行端口的方法，我就会收到错误消息。.getSerialPort() 或 .getOutputStream()

当然我已经尝试通过谷歌解决这个问题。但实际上我还没有找到解决我的问题的方法。我检查了我的清单是否包含所需的一切，我很确定它确实如此。希望你们中的某个人可以在我的代码中找到问题。

这是我第一次在 stackoverflow 上提出问题，所以我很想知道如何在未来以更好的方式提问。如果缺少任何信息，请告诉我，我会尽快发布。

这是我的主要活动：

```
package com.example.serialtest3;

import java.io.IOException;
import java.io.OutputStream;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import com.example.serialtest3.SerialPort;

public class MainActivity extends Activity {

TextView tv;
EditText et;    
SerialPort s;

protected OutputStream out= new OutputStream() {

@Override
public void write(int oneByte) throws IOException {
}
};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    out = s.getOutputStream(); 
    try {
        s.getSerialPort();                        
    } catch (InvalidParameterException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (SecurityException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    Button b1 = (Button) findViewById(R.id.button1);
    b1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            String text = et.getText().toString();
            if (v.getId()==R.id.button1){
                try {
                out.write(new String(text).getBytes());
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

        }
    });

    et =(EditText) findViewById(R.id.editT);
} 
```

串行端口：

```
package com.example.serialtest3;

import java.io.File;
import java.io.FileDescriptor;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.security.InvalidParameterException;
import android.util.Log;
import com.example.serialtest3.*;

public class SerialPort {

private static final String TAG = "SerialPort";
SerialPort serial;
/*
 * Do not remove or rename the field mFd: it is used by native method close();
 */
private FileDescriptor mFd;
private FileInputStream mFileInputStream;
private FileOutputStream mFileOutputStream;

public SerialPort(File device, int baudrate, int flags) throws SecurityException, IOException {

    /* Check access permission */
    if (!device.canRead() || !device.canWrite()) {
        try {
            /* Missing read/write permission, trying to chmod the file */
            Process su;
            su = Runtime.getRuntime().exec("/system/bin/su");
            String cmd = "chmod 666 " + device.getAbsolutePath() + "\n"
                    + "exit\n";
            su.getOutputStream().write(cmd.getBytes());
            if ((su.waitFor() != 0) || !device.canRead()
                    || !device.canWrite()) {
                throw new SecurityException();
            }
        } catch (Exception e) {
            e.printStackTrace();
            throw new SecurityException();
        }
    }

    mFd = open(device.getAbsolutePath(), baudrate, flags);
    if (mFd == null) {
        Log.e(TAG, "native open returns null");
        throw new IOException();
    }
    mFileInputStream = new FileInputStream(mFd);
    mFileOutputStream = new FileOutputStream(mFd);

}

public SerialPort getSerialPort() throws SecurityException, IOException, InvalidParameterException {
    String path = "/dev/ttyO0";
    int baudrate= 115200;
    serial = new SerialPort(new File(path), baudrate, 0);
    return serial;
}

// Getters and setters
public InputStream getInputStream() {
    return mFileInputStream;
}

public OutputStream getOutputStream() {
    return mFileOutputStream;
}

// JNI
private native static FileDescriptor open(String path, int baudrate, int flags);
public native void close();
static {
    System.loadLibrary("serial_port");  // this lib contains open and close method which are written in the c-code
} 
```

}

安卓清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.serialtest3"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.serialtest3.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

错误信息：

```
01-01 04:03:29.451: D/AndroidRuntime(2370): Shutting down VM
01-01 04:03:29.451: W/dalvikvm(2370): threadid=1: thread exiting with uncaught exception (group=0x40a421f8)
01-01 04:03:29.451: E/AndroidRuntime(2370): FATAL EXCEPTION: main
01-01 04:03:29.451: E/AndroidRuntime(2370): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.serialtest3/com.example.serialtest3.MainActivity}: java.lang.NullPointerException
01-01 04:03:29.451: E/AndroidRuntime(2370):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
01-01 04:03:29.451: E/AndroidRuntime(2370):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
01-01 04:03:29.451: E/AndroidRuntime(2370):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
01-01 04:03:29.451: E/AndroidRuntime(2370):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
01-01 04:03:29.451: E/AndroidRuntime(2370):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-01 04:03:29.451: E/AndroidRuntime(2370):     at android.os.Looper.loop(Looper.java:137)
01-01 04:03:29.451: E/AndroidRuntime(2370):     at android.app.ActivityThread.main(ActivityThread.java:4424)
01-01 04:03:29.451: E/AndroidRuntime(2370):     at java.lang.reflect.Method.invokeNative(Native Method)
01-01 04:03:29.451: E/AndroidRuntime(2370):     at java.lang.reflect.Method.invoke(Method.java:511)
01-01 04:03:29.451: E/AndroidRuntime(2370):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-01 04:03:29.451: E/AndroidRuntime(2370):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-01 04:03:29.451: E/AndroidRuntime(2370):     at dalvik.system.NativeStart.main(Native Method)
01-01 04:03:29.451: E/AndroidRuntime(2370): Caused by: java.lang.NullPointerException
01-01 04:03:29.451: E/AndroidRuntime(2370):     at com.example.serialtest3.MainActivity.onCreate(MainActivity.java:65)
01-01 04:03:29.451: E/AndroidRuntime(2370):     at android.app.Activity.performCreate(Activity.java:4465)
01-01 04:03:29.451: E/AndroidRuntime(2370):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-01 04:03:29.451: E/AndroidRuntime(2370):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
01-01 04:03:29.451: E/AndroidRuntime(2370):     ... 11 more
01-01 04:04:56.035: D/AndroidRuntime(2421): Shutting down VM
01-01 04:04:56.035: W/dalvikvm(2421): threadid=1: thread exiting with uncaught exception (group=0x40a421f8)
01-01 04:04:56.035: E/AndroidRuntime(2421): FATAL EXCEPTION: main
01-01 04:04:56.035: E/AndroidRuntime(2421): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.serialtest3/com.example.serialtest3.MainActivity}: java.lang.NullPointerException
01-01 04:04:56.035: E/AndroidRuntime(2421):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
01-01 04:04:56.035: E/AndroidRuntime(2421):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
01-01 04:04:56.035: E/AndroidRuntime(2421):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
01-01 04:04:56.035: E/AndroidRuntime(2421):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
01-01 04:04:56.035: E/AndroidRuntime(2421):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-01 04:04:56.035: E/AndroidRuntime(2421):     at android.os.Looper.loop(Looper.java:137)
01-01 04:04:56.035: E/AndroidRuntime(2421):     at android.app.ActivityThread.main(ActivityThread.java:4424)
01-01 04:04:56.035: E/AndroidRuntime(2421):     at java.lang.reflect.Method.invokeNative(Native Method)
01-01 04:04:56.035: E/AndroidRuntime(2421):     at java.lang.reflect.Method.invoke(Method.java:511)
01-01 04:04:56.035: E/AndroidRuntime(2421):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-01 04:04:56.035: E/AndroidRuntime(2421):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-01 04:04:56.035: E/AndroidRuntime(2421):     at dalvik.system.NativeStart.main(Native Method)
01-01 04:04:56.035: E/AndroidRuntime(2421): Caused by: java.lang.NullPointerException
01-01 04:04:56.035: E/AndroidRuntime(2421):     at com.example.serialtest3.MainActivity.onCreate(MainActivity.java:54)
01-01 04:04:56.035: E/AndroidRuntime(2421):     at android.app.Activity.performCreate(Activity.java:4465)
01-01 04:04:56.035: E/AndroidRuntime(2421):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-01 04:04:56.035: E/AndroidRuntime(2421):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
01-01 04:04:56.035: E/AndroidRuntime(2421):     ... 11 more
01-01 04:05:03.232: I/Process(2421): Sending signal. PID: 2421 SIG: 9 
```

活动主.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="155dp"
    android:text="Button" />

<EditText
    android:id="@+id/editT"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView1"
    android:layout_below="@+id/textView1"
    android:layout_marginTop="80dp"
    android:ems="10"
    android:lines="1" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:16:25.027

```
SerialPort s; 
```

这未初始化。所以这将指向null。这就是它抛出的原因`Null Pointer Exception`

# javascript - 设置 thead th 宽度等于 tbody

> ID：15926877
> 
> 赞同：1
> 
> 时间：2013-04-10T13:12:50.583
> 
> 标签：javascript, jquery

`<thead>`一张桌子设置好后`position:fixed`，宽度就不一样了`<tbody> <td>`。我试图用这个 jQuery 代码解决这个问题：

```
$("#table tbody td:first td").each(function(i) {
  $("#table thead th:last th").eq(i).width($(this).outerWidth());
}); 
```

但它不起作用。为什么将位置设置为固定后宽度消失了？

# php - 从 MSword-2010 粘贴内容时出现 TinyMCE 问题。直接粘贴看不到换行

> ID：15926879
> 
> 赞同：1
> 
> 时间：2013-04-10T13:12:53.193
> 
> 标签：php, tinymce, line-breaks, content-editor

我正在使用 tinyMCE 在网站前端粘贴描述。我遇到的问题是 - 当我尝试粘贴直接从 MS Word 2010 中取出的内容时，我无法看到与 word 文档相同的行距。

我上传了 3 张图片，显示粘贴到编辑器时的文档和内容以及发布后显示的内容。

![wordDocument-2010-内容](https://i.stack.imgur.com/943WN.jpg)

![内容编辑器](https://i.stack.imgur.com/sYH4G.jpg)

![内容发布后](https://i.stack.imgur.com/6qv3u.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:42:36.227

这里的问题是您需要将编辑器宽度设置为与 Word 2010 页面的宽度完全相同。在 Word 中，您可能会更改将导致另一个问题的边距。还有一点是字体。您将需要在编辑器中应用相同的字体和相同的字体大小（您可以为此使用配置参数 content_css）。

# java - Android：从未使用过 IntelliJ IDEA 12.1 参数视图

> ID：15926880
> 
> 赞同：22
> 
> 时间：2013-04-10T13:12:54.180
> 
> 标签：java, android, eclipse, intellij-idea

请解释一下，为什么 IntelliJ IDEA 显示参数从未使用过？

[![在此处输入图像描述](https://i.stack.imgur.com/Wvnd2.jpg)](https://i.stack.imgur.com/Wvnd2.jpg)

```
 public void onClick(View view) { // Parameter 'view' never used
    Toast.makeText(this, "Hello", Toast.LENGTH_LONG).show();
}

<ToggleButton
    ...
    android:onClick="onClick"/> 
```

但我知道，如果我删除这个从未使用过的参数（视图），Android 会抛出运行时异常。

为什么 IntelliJ IDEA v12.1 显示此类警告但 Eclipse 不显示。如何配置 IntelliJ IDEA 以隐藏所有 Android 项目的此类警告？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2018-04-17T07:43:08.283

对于 Kotlin，使用这句话来抑制这个警告：

```
fun onClick(@Suppress("UNUSED_PARAMETER")view: View) {

} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-06-10T06:58:12.457

我不认为更改警告设置是最好的解决方案。

相反，您可以尝试以下代码：

```
public void onClick(@SuppressWarnings("UnusedParameters")View ignored) { // Parameter 'ignored' never used
    Toast.makeText(this, "Hello", Toast.LENGTH_LONG).show();
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-10T13:49:11.033

您会看到此警告，因为默认情况下启用了**未使用符号**检查，并且配置为也显示任何未使用的参数。虽然在这种特定情况下这不是问题，但它可以帮助您在其他情况下跟踪错误（例如，当您使用具有相似名称的局部变量时，因为拼写错误而不是实际的方法参数）。

此检查提供了许多选项，您可以根据需要对其进行调整，例如通过禁用**检查参数**选项。或者您可以定义注释，`@Unused`这样 IDE 将忽略带有这些注释的任何参数，或者您可以从`Alt`+`Enter`菜单、右箭头子菜单中禁止此检查（禁止类/方法/语句，编辑检查设置或完全禁用它） .

![未使用的符号](https://i.stack.imgur.com/bxElb.png)

![压制](https://i.stack.imgur.com/hVYNX.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-10T13:15:38.070

因为您从不`view`在方法中使用参数`onClick`。但是这个[方法](http://developer.android.com/intl/ru/reference/android/view/View.html#attr_android%3aonClick)的默认签名。

例如，如果您将在方法中使用参数，IntelliJ IDEA 不会显示“从未使用过的参数”

```
public void onClick(View view) { // Parameter 'view' used
if(view.getId() == R.id.myId)  //example start
{
    Toast.makeText(this, "CorrectId", Toast.LENGTH_LONG).show();
}                             //example finish
Toast.makeText(this, "Hello", Toast.LENGTH_LONG).show();
} 
```

更新：

例如，您在主布局中有 3 个按钮：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/my_switcher"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

<Button
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:id="@+id/btn1"
        android:onClick="onClick"
        />
<Button
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:id="@+id/btn2"
        android:onClick="onClick"
        />
<Button
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:id="@+id/btn3"
        android:onClick="onClick"
        />

</LinearLayout> 
```

我您的活动方法是 onClick 处理来自三个按钮的事件。我们需要识别按钮已被按下。

```
 public void onClick(View view) { // Parameter 'view' used
    switch (view.getId())
    {
        case (R.id.btn1):
        {
            Toast.makeText(this, "Hello Button_1 pressed", Toast.LENGTH_LONG).show();
            break;
        }
        case (R.id.btn2):
        {
            Toast.makeText(this, "Hello Button_2 pressed", Toast.LENGTH_LONG).show();
            break;
        }
        case (R.id.btn3):
        {
            Toast.makeText(this, "Hello Button_2 pressed", Toast.LENGTH_LONG).show();
            break;
        }
    } 
```

这是如何使用“视图”的一个示例

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-05-02T15:55:01.170

上面所说的一切都是伟大而真实的。这是另一种查看方式：

起初我没有看到需要使用这个参数。这是因为在我正在处理的应用程序中，只有一个视图（可能是按钮）调用此 OnClick 回调。

也就是说，无需检查参数。只有一个按钮，它必须是它。

所以我感到困惑、愤怒或悲伤：

*   API 需要参数，
*   IDE 抱怨未使用该参数。

...

但我们可以用另一种方式看待它：

> 无需检查参数。只有一个按钮，一定是它

我的项目中没有任何东西可以确保前面的陈述。今天可能是正确的，但在项目后期可能会变得不正确。它也可能因错误或意外而不真实。一个简单的错误。

当开发人员希望应用程序易于维护时，他会怎么做？他检查或确保他想要真实的事实。

所以我选择让这个警告消失的方式是：

```
fun start_sync(button : View){
    assert(button.id == R.id.my_only_button)
    //...
} 
```

最后，IDE和API都是对的，错误是假设我不需要这个参数。

# breeze - 如何安装 Breeze nuget 包？

> ID：15926883
> 
> 赞同：1
> 
> 时间：2013-04-10T13:12:56.817
> 
> 标签：breeze

我在安装 Breeze 时遇到了一些依赖问题。

我将 ASP.NET 和 Web Tools 2012.2 更新安装到 Visual Studio 2012 中，然后将 Angular 安装到一个新制作的 ASP.NET Web API 项目中，当我尝试安装 Breeze nuget 包时，它会出现此错误。

> 安装失败。回滚... 安装包：无法添加对“System.Web.Http.OData”的引用。在 line:1 char:16 + Install-Package <<<< Breeze.WebApi + CategoryInfo : NotSpecified: (:) [Install-Package], InvalidOperationException + FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand

这是来自命令行的完整安装尝试，包括它试图解决的所有依赖项。

> ```
> Install-Package Breeze.WebApi
> Attempting to resolve dependency 'Microsoft.AspNet.WebApi'.
> Attempting to resolve dependency 'Microsoft.AspNet.WebApi.WebHost (≥ 4.0.20710.0 && < 4.1)'.
> Attempting to resolve dependency 'Microsoft.Web.Infrastructure (≥ 1.0.0.0)'.
> Attempting to resolve dependency 'Microsoft.AspNet.WebApi.Core (≥ 4.0.20710.0 && < 4.1)'.
> Attempting to resolve dependency 'Microsoft.AspNet.WebApi.Client (≥ 4.0.20710.0 && < 4.1)'.
> Attempting to resolve dependency 'Microsoft.Net.Http (≥ 2.0.20710.0 && < 2.1)'.
> Attempting to resolve dependency 'Newtonsoft.Json (≥ 4.5.6)'.
> Attempting to resolve dependency 'Microsoft.AspNet.WebApi.OData'.
> Attempting to resolve dependency 'Microsoft.Data.OData (≥ 5.2.0 && < 6.0.0)'.
> Attempting to resolve dependency 'System.Spatial (= 5.2.0)'.
> Attempting to resolve dependency 'Microsoft.Data.Edm (= 5.2.0)'.
> Attempting to resolve dependency 'WebActivator'.
> Attempting to resolve dependency 'EntityFramework (≥ 4.4 && < 6.0)'.
> Attempting to resolve dependency 'Q'.
> You are downloading Microsoft.AspNet.WebApi.OData from Microsoft....
> Successfully installed 'Microsoft.AspNet.WebApi.OData 4.0.1'.
> Successfully installed 'WebActivator 1.5.3'.
> Successfully installed 'Q 0.9.2'.
> Successfully installed 'Breeze.WebApi 1.2.8'.
> Successfully removed 'Microsoft.AspNet.WebApi.OData 4.0.0' from CrashBangZoom.WebApi.
> Install failed. Rolling back...
> Install-Package : Failed to add reference to 'System.Web.Http.OData'.
> At line:1 char:16
> + Install-Package <<<<  Breeze.WebApi
>     + CategoryInfo          : NotSpecified: (:) [Install-Package], InvalidOperationException
>     + FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:36:50.483

我没有问题 - 我刚刚在 Windows 8 x64 机器上使用 NuGet 将 Angular（稳定）和 Breeze（稳定）安装到 TestMVC 项目中。在安装之前会显示一个接受提示（与 OData 相关），并且它确实使用 powershell 进行安装 - 因此您应该检查以确保已安装。

```
------- Installing...Breeze.WebApi 1.2.8 -------
Attempting to resolve dependency 'Microsoft.AspNet.WebApi'.
Attempting to resolve dependency 'Microsoft.AspNet.WebApi.WebHost (≥ 4.0.20710.0 && < 4.1)'.
Attempting to resolve dependency 'Microsoft.Web.Infrastructure (≥ 1.0.0.0)'.
Attempting to resolve dependency 'Microsoft.AspNet.WebApi.Core (≥ 4.0.20710.0 && < 4.1)'.
Attempting to resolve dependency 'Microsoft.AspNet.WebApi.Client (≥ 4.0.20710.0 && < 4.1)'.
Attempting to resolve dependency 'Microsoft.Net.Http (≥ 2.0.20710.0 && < 2.1)'.
Attempting to resolve dependency 'Newtonsoft.Json (≥ 4.5.6)'.
Attempting to resolve dependency 'Microsoft.AspNet.WebApi.OData'.
Attempting to resolve dependency 'Microsoft.Data.OData (≥ 5.2.0 && < 6.0.0)'.
Attempting to resolve dependency 'System.Spatial (= 5.2.0)'.
Attempting to resolve dependency 'Microsoft.Data.Edm (= 5.2.0)'.
Attempting to resolve dependency 'WebActivator'.
Attempting to resolve dependency 'EntityFramework (≥ 4.4 && < 6.0)'.
Attempting to resolve dependency 'Q'.
Added file 'System.Web.Http.OData.dll' to folder 'Microsoft.AspNet.WebApi.OData.4.0.1\lib\net40'.
Added file 'System.Web.Http.Odata.xml' to folder 'Microsoft.AspNet.WebApi.OData.4.0.1\lib\net40'.
Added file 'Microsoft.AspNet.WebApi.OData.4.0.1.nuspec' to folder             'Microsoft.AspNet.WebApi.OData.4.0.1'.
Added file 'Microsoft.AspNet.WebApi.OData.4.0.1.nupkg' to folder 'Microsoft.AspNet.WebApi.OData.4.0.1'.
Successfully installed 'Microsoft.AspNet.WebApi.OData 4.0.1'.
Added file 'WebActivator.dll' to folder 'WebActivator.1.5.3\lib\net40'.
Added file 'WebActivator.1.5.3.nuspec' to folder 'WebActivator.1.5.3'.
Added file 'WebActivator.1.5.3.nupkg' to folder 'WebActivator.1.5.3'.
Successfully installed 'WebActivator 1.5.3'.
Added file 'q.js' to folder 'Q.0.9.2\content\Scripts'.
Added file 'q.min.js' to folder 'Q.0.9.2\content\Scripts'.
Added file 'NuGet.exe' to folder 'Q.0.9.2'.
Added file 'Q.0.9.2.nuspec' to folder 'Q.0.9.2'.
Added file 'Q.0.9.2.nupkg' to folder 'Q.0.9.2'.
Successfully installed 'Q 0.9.2'.
Added file 'BreezeWebApiConfig.cs.pp' to folder 'Breeze.WebApi.1.2.8\content\App_Start'.
Added file 'breeze.debug.js' to folder 'Breeze.WebApi.1.2.8\content\Scripts'.
Added file 'breeze.intellisense.js' to folder 'Breeze.WebApi.1.2.8\content\Scripts'.
Added file 'breeze.min.js' to folder 'Breeze.WebApi.1.2.8\content\Scripts'.
Added file 'Breeze.WebApi.dll' to folder 'Breeze.WebApi.1.2.8\lib'.
Added file 'Irony.dll' to folder 'Breeze.WebApi.1.2.8\lib'.
Added file 'readme.txt' to folder 'Breeze.WebApi.1.2.8'.
Added file 'install.ps1' to folder 'Breeze.WebApi.1.2.8\tools'.
Added file 'Breeze.WebApi.1.2.8.nuspec' to folder 'Breeze.WebApi.1.2.8'.
Added file 'Breeze.WebApi.1.2.8.nupkg' to folder 'Breeze.WebApi.1.2.8'.
Successfully installed 'Breeze.WebApi 1.2.8'.
Removed reference 'System.Web.Http.OData.dll' from project 'MvcApplication1'
Added file 'packages.config'.
Successfully removed 'Microsoft.AspNet.WebApi.OData 4.0.0' from MvcApplication1.
Added reference 'System.Web.Http.OData' to project 'MvcApplication1'
Added file 'packages.config'.
Successfully added 'Microsoft.AspNet.WebApi.OData 4.0.1' to MvcApplication1.
Added reference 'WebActivator' to project 'MvcApplication1'
Added file 'packages.config'.
Successfully added 'WebActivator 1.5.3' to MvcApplication1.
Added file 'q.min.js' to folder 'Scripts'.
Added file 'Scripts\q.min.js' to project 'MvcApplication1'
Added file 'q.js' to folder 'Scripts'.
Added file 'Scripts\q.js' to project 'MvcApplication1'
Added file 'packages.config'.
Successfully added 'Q 0.9.2' to MvcApplication1.
Added file 'breeze.min.js' to folder 'Scripts'.
Added file 'Scripts\breeze.min.js' to project 'MvcApplication1'
Added file 'breeze.intellisense.js' to folder 'Scripts'.
Added file 'Scripts\breeze.intellisense.js' to project 'MvcApplication1'
Added file 'breeze.debug.js' to folder 'Scripts'.
Added file 'Scripts\breeze.debug.js' to project 'MvcApplication1'
Added file 'BreezeWebApiConfig.cs' to folder 'App_Start'.
Added file 'App_Start\BreezeWebApiConfig.cs' to project 'MvcApplication1'
Added reference 'Breeze.WebApi' to project 'MvcApplication1'
Added reference 'Irony' to project 'MvcApplication1'
Added file 'packages.config'.
Successfully added 'Breeze.WebApi 1.2.8' to MvcApplication1.
Executing script file 'C:\Users\andrew\Documents\Visual Studio     2012\Projects\packages\Breeze.WebApi.1.2.8\tools\install.ps1'.
Removed file 'System.Web.Http.OData.dll' to folder 'C:\Users\andrew\Documents\Visual Studio 2012\Projects\packages\Microsoft.AspNet.WebApi.OData.4.0.0\lib\net40'.
Removed file 'System.Web.Http.Odata.xml' to folder 'C:\Users\andrew\Documents\Visual Studio     2012\Projects\packages\Microsoft.AspNet.WebApi.OData.4.0.0\lib\net40'.
Removed folder 'C:\Users\andrew\Documents\Visual Studio 2012\Projects\packages\Microsoft.AspNet.WebApi.OData.4.0.0\lib\net40'.
Removed folder 'C:\Users\andrew\Documents\Visual Studio 2012\Projects\packages\Microsoft.AspNet.WebApi.OData.4.0.0\lib'.
Removed file 'Microsoft.AspNet.WebApi.OData.4.0.0.nuspec' to folder 'C:\Users\andrew\Documents\Visual Studio 2012\Projects\packages\Microsoft.AspNet.WebApi.OData.4.0.0'.
Removed file 'Microsoft.AspNet.WebApi.OData.4.0.0.nupkg' to folder 'C:\Users\andrew\Documents\Visual Studio 2012\Projects\packages\Microsoft.AspNet.WebApi.OData.4.0.0'.
Removed folder 'C:\Users\andrew\Documents\Visual Studio 2012\Projects\packages\Microsoft.AspNet.WebApi.OData.4.0.0'.
Successfully uninstalled 'Microsoft.AspNet.WebApi.OData 4.0.0'.
============================== 
```

# javascript - ocpsoft rewrite ConfigurationProvider 注册失败

> ID：15926886
> 
> 赞同：1
> 
> 时间：2013-04-10T13:13:03.120
> 
> 标签：javascript, jsf-2, rewrite, richfaces, ocpsoft-rewrite

我想使用 ocpsoft rewrite 来克服 Richfaces 的代理问题。由于无法通过代理配置找到 JavaScript 文件（类似于[JSF 中描述的问题。需要 URL 重写解决方案](https://stackoverflow.com/questions/9905946/jsf-url-rewriting-solution-needed)）。不知何故，我无法 `ConfigurationProvider`正确注册。这是我收到的警告信息：

> 警告：未注册 ConfigurationProviders：不会在此应用程序上启用重写。您是否忘记创建一个包含提供程序实现的完全限定名称的 '/META-INF/services/org.ocpsoft.rewrite.config.ConfigurationProvider 文件？

项目布局如下：

*   `src`
    *   `main`
        *   `java`
        *   `resources`
        *   `webapp`
            *   `META-INF`
                *   `services`
                    *   `org.ocpsoft.rewrite.config.ConfigurationProvider`（包含 ConfigurationProvider 实现的完整限定名）
            *   `WEB-INF`
            *   `resources`
*   `target`

我的项目是基于 Maven 的，使用带有 Richfaces 4.3.0.Final 和 opcsoft 重写 1.1.0.Final 的 JSF2。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-01T08:22:33.217

您的 SPI 文件的位置不正确。它应该是：

```
src/main/resources/META-INF/services/org.ocpsoft.rewrite.config.ConfigurationProvider 
```

# r - knitr中的非英文特殊字符

> ID：15926890
> 
> 赞同：8
> 
> 时间：2013-04-10T13:13:09.897
> 
> 标签：r, utf-8, character-encoding, special-characters, knitr

我正在使用 knitr 1.1。在 R 3.0.0 和 WinEdt (RWinEdt 2.0) 中。我在 knitr 识别瑞典语字符（ä、ö、å）时遇到问题。这不是 R 的问题；这些字符甚至可以在文件名、目录名、对象等中识别。在 Sweave 中也不是问题。

我的文档中已经有`\usepackage[utf8]{inputenc}`，但 knitr 似乎无法处理特殊字符。运行 knitr 后，我收到以下消息：

```
Warning in remind_sweave(if (in.file) input) :
It seems you are using the Sweave-specific syntax; you may need Sweave2knitr("deskriptiv 130409.Rnw") to convert it to knitr

processing file: deskriptiv 130409.Rnw

(*) NOTE: I saw chunk options "label=lÃ¤ser_in_data"
please go to http://yihui.name/knitr/options (it is likely that you forgot to 
quote "character" options)

Error in parse(text = str_c("alist(", quote_label(params), ")"), srcfile = NULL) : 
1:15: unexpected input
1: alist(label=lÃ¤
                 ^
Calls: knit ... parse_params -> withCallingHandlers -> eval -> parse
Execution halted 
```

它抱怨的特定标签是 label=läser。更改标签是不够的，因为如果 R 对象使用 äåö，knitr 甚至会抱怨。

我使用了 Sweave2knitr()，因为该文件最初是为 Sweave 创建的，但结果并不好：现在所有 äåö 都已转换为 Ã¤pÃ¥Ã¶，无论是在 R 块中还是在乳胶文本中，并且 knitr 仍然给出一条错误消息。

会话信息：

```
R version 3.0.0 (2013-04-03)
Platform: i386-w64-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=Swedish_Sweden.1252  LC_CTYPE=Swedish_Sweden.1252           LC_MONETARY=Swedish_Sweden.1252
[4] LC_NUMERIC=C                    LC_TIME=Swedish_Sweden.1252    
attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     
other attached packages:
[1] knitr_1.1
loaded via a namespace (and not attached):
[1] digest_0.6.3   evaluate_0.4.3 formatR_0.7    stringr_0.6.2  tools_3.0.0 
```

正如我提到的，有些文件名和对象带有瑞典语字符（因为以前这不是问题），而且文本也需要使用瑞典语。

感谢您帮助 knitr 在英语以外的地方工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:23:42.820

我认为如果您使用此[模式](http://www.winedt.org/Config/modes/R-Sweave.php)调用`knitr`. `knit()`问题是如果您不使用操作系统的本机编码，WinEdt 必须将文件的编码传递给。您提到`UTF-8`了但这不是 Windows 的本机编码，因此`\usepackage[utf8]{inputenc}`除非您确定您的文件是 UTF8 编码的，否则不得使用。

这里混合了几个问题，不可能用一个答案来解决所有问题。

第一个问题是`label=läser`，应该是`label='läser'`，即你[必须引用](http://yihui.name/knitr/options)所有的块标签（也检查文档中的其他标签）；`knitr`尝试在您编写时自动引用您的标签`<<foo>>=`（它变为`<<'foo'>>=`），但这在您使用时不起作用`<<label=foo>>=`（您必须`<<label='foo'>>=`明确编写）。但是这个问题在这里可能不是必需的。

我认为这里真正的问题是文件编码（在 Windows 下很讨厌）。您似乎在默认情况下`UTF-8`不尊重的系统下使用。`UTF-8`在这种情况下，您可以调用`knit('yourfile.Rnw', encoding = 'UTF-8')`，即将编码传递给`knit()`. 我不使用 WinEdt，所以我不知道该怎么做。您可以[在配置中对编码进行硬编码](http://yihui.name/knitr/demo/editors/)，但不建议这样做。

两个建议：

1.  请勿`UTF-8`在 Windows 下使用；改用您的系统本机编码（`Windows-1252`我猜）；
2.  或者使用 RStudio 代替 WinEdt，它可以将编码传递给`knitr`；

BTW，既然`Sweave2knitr()`弹出了，你的Rnw文件肯定有其他问题。要诊断问题，有两种方法：

1.  如果你使用`UTF-8`，运行`Sweave2knitr('deskriptiv 130409.Rnw', encoding = 'UTF-8')`
2.  如果您使用操作系统的本机编码，只需运行`Sweave2knitr('deskriptiv 130409.Rnw')`

如果您对由 打印的诊断信息有任何疑问，请阅读[文档](http://yihui.name/knitr/options)`Sweave2knitr()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T12:49:56.940

R-Sweave`knitr`通过`knitr.edt`宏调用，它本身使用代码 `knitrSweave.R`来启动 knit。后面这个脚本中的`knit`命令靠近顶部，显示为`res <- knit(filename)`.

按照 Yihui 的建议，您可以尝试将此命令替换为

```
res <- knit(filename, encoding = 'UTF-8') 
```

`knitr.edt`和`knitrSweave.R`文件应该在您的文件`%b\Contrib\R-Sweave`夹中，`%b`您的 winEdt 用户文件夹在哪里（类似于`"C:\Users\userA\AppData\Roaming\WinEdt Team\WinEdt 7"`Win 7 下的文件）。

目前，我不知道我们如何将编码作为参数传递以避免这种硬编码解决方案。

我建议避免文件名中的扩展字符，这只会成为问题的根源。就个人而言，我从不使用这样的名字。

# php - 地图布局高亮点

> ID：15926894
> 
> 赞同：1
> 
> 时间：2013-04-10T13:13:18.680
> 
> 标签：php, facebook-opengraph, open-graph-beta

我正在发布一个 Open Graph 故事。发布的对象具有`GeoPoint`正确显示路线的数组。该对象还有一个`GeoPoint`属性，在 中`highlighted point`选择`Open Graph -> Stories -> Story settings -> Edit attachments`。

但是时间轴上显示的地图显示了路线，并标记了它的起点和终点。我提供的点没有显示在地图上。

对象元数据的示例：

```
<meta property="my_routes:points:longitude" content="15.966282"/>
<meta property="my_routes:points:latitude" content="45.777191"/>
<meta property="my_routes:points:longitude" content="15.958017"/>
<meta property="my_routes:points:latitude" content="45.777589"/>
<meta property="my_routes:points:longitude" content="15.953514"/>
<meta property="my_routes:points:latitude" content="45.786521"/>
<meta property="my_routes:current:latitude" content="45.798588"/>
<meta property="my_routes:current:longitude" content="15.947750"/> 
```

# c# - 在不使用 IDbContextFactory 的情况下编写第一个自定义连接字符串和迁移

> ID：15926897
> 
> 赞同：8
> 
> 时间：2013-04-10T13:13:36.730
> 
> 标签：c#, ef-code-first, migration

我正在尝试编写一个易于理解的`DBContext`类，它采用自定义连接字符串，可以运行迁移，并且允许我使用包管理器生成迁移。

我好像在兜圈子。

我已经能够使用对我来说感觉很糟糕的代码让它工作。我在[对连接字符串和迁移的这个问题的回答中记录了这一点。](https://stackoverflow.com/questions/15504465/entityframework-code-first-custom-connection-string-and-migrations)

Radek 的答案看起来比我的要好得多，但我发现当我实现它然后尝试在包管理器中创建迁移时，我收到了消息

> 目标上下文“DataLayer.Context”不可构造。添加默认构造函数或提供 IDbContextFactory 的实现。

`DataLayer.Context`我的上下文课程在哪里。

我不想提供`IDbContextFactory`（并且 Radek 的回答似乎表明它不需要）的实现

更新：

如果我包含不带参数的构造函数，我可以生成迁移。例如

```
public Context() : base("ConnectionStringName") { } 
```

对于我的上下文创建，我在 app.config 中传递了连接字符串的名称

```
public Context(string connString) : base(connString)
{
    Database.SetInitializer(new CustomInitializer());
    Database.Initialize(true);
} 
```

最后，我既可以生成迁移，也可以为用户选择的数据库运行迁移。

但是：当我删除数据库然后运行我的应用程序时，我遇到了问题。

我正在使用的初始化代码，来自上面的链接是

```
public class CustomInitializer : IDatabaseInitializer<Context>
{       
    public void InitializeDatabase(Context context)
    {
        try
        {
            if (!context.Database.Exists())
            {
                context.Database.Create();
            }
            else
            {
                if (!context.Database.CompatibleWithModel(false))  
                {
                    var configuration = new Configuration();
                    var migrator = new DbMigrator(configuration);
                    migrator.Configuration.TargetDatabase =
                        new DbConnectionInfo(context.Database.Connection.ConnectionString);
                    IEnumerable<string> migrations = migrator.GetPendingMigrations();
                    foreach (string migration in migrations)
                    {
                        var scriptor = new MigratorScriptingDecorator(migrator);
                        string script = scriptor.ScriptUpdate(null, migration);
                        context.Database.ExecuteSqlCommand(script);
                    }
                }
            }
        }
        catch (Exception ex)
        {
        }
    }       
} 
```

当我删除数据库时，会创建一个新数据库，但它没有表。那是因为我的表创建代码都在我的第一次迁移中。

所以条件里面的代码`!context.Database.CompatibleWithModel(false)`不会运行。

然而，遗憾的是，当它应该有元数据模型时，代码也没有第二次运行。

现在尝试让迁移运行...

悲伤：到目前为止，Radek 的自定义初始化程序没有。

根据 NSGaga 的评论，如果我更改连接，我会退出应用程序。

```
var master = new myMDIForm();
master.ConnectionType = connectionType;   // being an enum of the different connection names in app.config
while (master.ConnectionType != ConnectionType.None )
{
   Application.Run(master);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T23:20:44.153

**（注意：我不知道您的自定义初始化程序，我只是看到 - 这是`connection caching`问题和迁移初始化程序的一般解决方案 - 但应该适用于变体）**

* * *

这对我有用 - 并且基于我在[此处](https://stackoverflow.com/questions/15856703/is-adding-a-class-that-inherits-from-something-a-violation-of-the-solid-principl)描述的错误行为。

```
static string _connection;
public MyContext()
    : base(_connection ?? "DefaultConection")
{
    Database.SetInitializer(new MigrateDatabaseToLatestVersion<MyContext, MyNamespace.Migrations.Configuration>());
}
public MyContext(string connection)
    : base(connection)
{
    _connection = connection;
    Database.SetInitializer(new MigrateDatabaseToLatestVersion<MyContext, MyNamespace.Migrations.Configuration>());
} 
```

几点：

1）在您的上下文中定义`static`连接 - 当您设置“新连接”时，将其更改为保存`latest value`. 这有助于保持同步 - 无论谁访问 DbContext 都有相同的（它在概念上相似，`Factory`只是更容易看，

2）问题`Migrations`是 -**`MigrateDatabaseToLatestVersion`将连接（和内部的整个配置）缓存在内部的`readonly`字段中 - 即使您在您`DbContext`的**.

> 没有办法解决这个问题，只能制作一个“新的初始化程序”。

3) @Radek 发现的实际上是该问题的解决方案 - 并且符合 (2)。我刚刚删除了它，`Initialize(true)`因为它是不必要的 - 当“时间合适”时会调用它。

* * *

就是这样。

有了这个，我现在可以`flip`全天候连接 - 并且如我所愿。
（这意味着我可以更改连接`runtime`- 迁移/创建两个或更多数据库并不断更改连接并同时处理它们）

这是我实际用于在连接之间循环的代码......

```
for (var flip = true; true; flip = !flip)
{
    using (var db = new MyContext(flip ? "Name=DefaultConnection" : "Name=OtherConnection"))
    {
        // usual db code
    }
} 
```

> 关键是`set initializer each time you set the connection`。
> 旧的仍然存在 - 旧的连接（您无法在应用程序运行时删除 Db）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-05T09:25:34.257

经过多次洗牌，我得到了这个工作：

```
Public Class BlogContext
  Inherits DbContext

  Public Sub New()
    Database.Connection.ConnectionString = Utils.SqlCeConnection.ConnectionString
  End Sub

  Private Sub New(Connection As DbConnection)
    MyBase.New(Connection, True)

    Database.SetInitializer(New MigrateDatabaseToLatestVersion(Of BlogContext, Migrations.Configuration))
    Database.Initialize(True)
  End Sub

  Public Shared Function Create() As BlogContext
    Return New BlogContext(Utils.SqlCeConnection)
  End Function

  Public Property Blogs As DbSet(Of Blog)
End Class 
```

这是配置类。注意禁用的 AutomaticMigrations：

```
Namespace Migrations
  Friend NotInheritable Class Configuration
    Inherits DbMigrationsConfiguration(Of BlogContext)

    Public Sub New()
      Me.AutomaticMigrationsEnabled = False
    End Sub

    Protected Overrides Sub Seed(Context As BlogContext)
    End Sub
  End Class
End Namespace 
```

这是 SqlCeConnection 辅助类，可以在运行时设置数据库位置：

```
Public Class Utils
  Public Shared ReadOnly Property SqlCeConnection As SqlCeConnection
    Get
      Return New SqlCeConnection(ConnectionString)
    End Get
  End Property

  Public Shared ReadOnly Property SqlCeConnection(DataSource As String) As SqlCeConnection
    Get
      Return New SqlCeConnection(ConnectionString(DataSource))
    End Get
  End Property

  Private Shared ReadOnly Property ConnectionString As String
    Get
      Return ConnectionString(DatabasePath)
    End Get
  End Property

  Private Shared ReadOnly Property ConnectionString(DataSource) As String
    Get
      With New SqlCeConnectionStringBuilder
        .MaxDatabaseSize = 4091
        .MaxBufferSize = 1024
        .CaseSensitive = False
        .FlushInterval = 1
        .DataSource = DataSource
        .FileMode = "Read Write"
        .Encrypt = False
        .Enlist = True

        Return .ConnectionString
      End With
    End Get
  End Property

  Public Shared ReadOnly Property DatabasePath As String
    Get
      Return Path.Combine(DatabaseFolder, DatabaseFile)
    End Get
  End Property

  Public Shared ReadOnly Property DatabaseFile As String
    Get
      Return "MigrationsDemo.sdf"
    End Get
  End Property

  Public Shared ReadOnly Property DatabaseFolder As String
    Get
      DatabaseFolder = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData), "MigrationsDemo")

      If Not Directory.Exists(DatabaseFolder) Then
        Directory.CreateDirectory(DatabaseFolder)
      End If
    End Get
  End Property
End Class 
```

高温高压

# bash - Bash 中的重复序列

> ID：15926900
> 
> 赞同：1
> 
> 时间：2013-04-10T13:13:38.090
> 
> 标签：bash, sequence

我在我的 bash 脚本中遇到了一些问题，我有一个字符串，它由重复的`20`s 序列组成，例如`202020`，可能有更多或更少`20`的 s，例如`2020`或`2020202020`，我想创建一个 if 条件，如果找到任何奇怪的数字在里面，例如`30`in `20203020`，给出一个错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:27:31.540

这应该做测试：

```
[[ "$var" =~ "^(20)+$" ]] 
```

检查这个：

```
kent$  [[ "202" =~ "^(20)+$" ]] && echo "y" || echo "n"                                                                                                                     
n

kent$  [[ "20203" =~ "^(20)+$" ]] && echo "y" || echo "n"
n

kent$  [[ "20202002" =~ "^(20)+$" ]] && echo "y" || echo "n"                                                                                                                
n

kent$  [[ "20202020" =~ "^(20)+$" ]] && echo "y" || echo "n"                                                                                                                
y 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:31:30.617

这个例子怎么样，你能用吗？

```
if [ "`echo "202020302020" | sed -e 's/20//g'`"  ]; 
then echo "there is something"; 
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:38:55.240

扩展模式比正则表达式更紧凑一点。

```
shopt -s extglob
if [[ $str = +(20) ]]; then
   echo "twenties"
else
   echo "mismatch"
fi 
```

在某些时候，`bash`更改为将`[[...]]`表达式中的所有模式视为扩展模式，因此该`shopt`命令可能不是必需的。

# javascript - 通过 h:outputScript 将 javascript 包含在资源中

> ID：15926901
> 
> 赞同：4
> 
> 时间：2013-04-10T13:13:37.810
> 
> 标签：javascript, jsf, jscolor

我想将 JScolor 包含到我的 jsf 应用程序中。可以通过`<script>`标签，但我的意思是通过`<h:outputScript>`.

但是，它不适用于资源。JSColor 包含一个 js 文件和一些图片文件 - 似乎包含 js 文件而没有包含资源。

谁能告诉我为什么？以及如何解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T13:48:28.437

JS 文件显然是通过不代表有效 JSF 资源 URL 的相对路径引用图片文件。

生成一个 JSF 资源 URL，该`<h:outputScript>`URL 通过 JSF 资源处理程序，其中担心自动本地化和版本控制。它将生成一个以 为前缀的 URL，`/javax.faces.resource`并附加当前使用的`FacesServlet`URL 映射，例如`*.xhtml`或`/faces/*`。

因此，如果您映射了 faces servlet`*.xhtml`并有一个`/resources/jscolor`包含 JS 和图像文件的文件夹，并且已经引用了 JS 文件，如下所示，

```
<h:outputScript name="jscolor/jscolor.js" /> 
```

那么它会产生

```
<script type="text/javascript" src="/context/javax.faces.resource/jscolor/jscolor.js.xhtml"></script> 
```

但是，图像文件在文件夹中并不物理可用`/javax.faces.resource/jscolor`，而是在文件夹中物理可用`/resources/jscolor`。只有当`/javax.faces.resource`您在资源名称上应用 faces servlet 映射时，才会自动解析。因此，仅当您手动编辑`jscolor.js`文件以将图像文件名从 eg 更改`arrow.gif`为`arrow.gif.xhtml`.

如果您不使用 JSF 资源解析器的任何自动本地化或版本控制功能，也不使用任何需要真正 JSF 资源而不是静态 HTML 元素的特殊自定义资源解析器，例如[这个](http://showcase.omnifaces.org/resourcehandlers/CombinedResourceHandler)，那么您也可以继续一个普通的 HTML`<script>`元素，而不是`<h:outputScript>`.

```
<script type="text/javascript" src="#{request.contextPath}/resources/jscolor/jscolor.js"></script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T13:31:54.010

我可能会误解你的问题，但这个片段会有所帮助：

```
<script
    type="text/javascript"
    src="#{facesContext.externalContext.requestContextPath}/path/on/WebContent/foo.js"></script> 
```

我经常使用这种 java 资源包含，而不是`<h:outputScript>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-22T15:20:51.280

添加 web.xml

```
<servlet-mapping>
  <servlet-name>Resource Servlet</servlet-name>
  <url-pattern>/resources/*</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-19T06:26:20.707

假设您的 js 文件的路径（名为 jquery.js 的文件）进入`resources/js`如下文件夹：

```
resources/js/jquery.js 
```

然后你必须写：

```
<h:outputScript name="./js/jquery.js"  target="body"/> 
```

PS。注意属性目标（例如头部，身体）

# javascript - 如何将当前时间转换为 GMT？

> ID：15926903
> 
> 赞同：0
> 
> 时间：2013-04-10T13:13:43.407
> 
> 标签：javascript, node.js

我需要获取`00:00:00 AM GMT`当天 (12am) 的值，然后将其转换为 unix 时间。我将/应该如何在 javascript 中执行此操作？是否有比服务器时间更可靠的外部数据源？我将在服务器上的节点中执行此操作。

谢谢！

编辑：这就是我所做的。你觉得这有什么问题吗？再次感谢！

```
date = new Date()
start_date = Date.UTC(date.getFullYear(),date.getUTCMonth(),date.getUTCDate()) / 1000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:45:32.777

您的方法是正确的，但是您有一个讨厌的错误，您将本地年份与 UTC 日期和月份混合在一起，在新年前后几个小时，具体取决于时区，当地和 UTC 年份是不同的，所以如果你用错了一年，你的结果将是一整年。

你的问题有两种解释。您想要基于本地时间的结果，因此任何给定时间的结果将取决于时区。或者您想要一个基于 UTC 时间的结果，无论时区如何，结果都是相同的，但有时对于某些用户来说，结果不是本地日期。

当地时间：

```
date = new Date()
start_date = Date.UTC(date.getFullYear(),date.getMonth(),date.getDate()) / 1000 
```

世界标准时间：

```
date = new Date()
start_date = Date.UTC(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate()) / 1000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:18:45.570

这些链接有一些很好的答案。我喜欢 epochconverter.com，它为我节省了许多小时的挫败感。答案的本质是使用 Javascript Date 对象来处理转换日期的所有麻烦。这通常是您在任何语言中都应该执行的操作。如果您手动进行日期操作，*您将弄错*。

[http://www.epochconverter.com/programming/#javascript](http://www.epochconverter.com/programming/#javascript)

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:28:09.130

这是一个很好的起点：

```
var now = new Date();
var then = new Date(now.getFullYear(), now.getMonth(), now.getDate());
var epoch = then.getTime(); 
```

不确定您想对 DST 做什么，因此您需要查看： [https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset)

编辑：允许不同的时区：

```
var off = now.getTimezoneOffset() * 60000; /* tz is in mins so multiply to ms */
var midnight = new Date(then.getTime() - off);
var epoch = midnight.getTime(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-10T14:19:35.943

这就是我最终为其他看到这个问题的人所做的。

```
date = new Date()
start_date = Date.UTC(date.getFullYear(),date.getUTCMonth(),date.getUTCDate()) / 1000 
```

如果您发现任何原因这不起作用，请告诉我。

# sharepoint - 带有许多网站的 SharePoint 中的顶部导航栏

> ID：15926906
> 
> 赞同：2
> 
> 时间：2013-04-10T13:13:47.203
> 
> 标签：sharepoint, sharepoint-2010

我只是想知道是否有人对您何时开始在 in 中有很多（或）有任何建议`Sites`或`Webs`提示。目前我们有 10 个，顶部栏开始有点忙，尤其是在分辨率较低的客户端上（进入 2 行）。`Site Collection``SharePoint`

同样不久，我们将要`SharePoint`为每个公司项目添加一个部分。我正在考虑创建一个`Site Template`可用于每个项目的项目，但从现在起一年后我们可能会有一千个项目，但我不知道如何处理这么多网站的导航！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:27:09.147

我已经创建了一个带有箭头的顶部导航栏，当将鼠标移到右箭头上时，它将水平滚动左侧的导航栏（然后左箭头出现以另一种方式滚动）。但是，要做到这一点，您需要 JS 和 CSS hack（我使用 HTML5 Doctype 作为我的母版页来强制使用 IE 的最后一个渲染引擎 - 标准模式）。这可以启发你...

![带滚动条的导航栏](https://i.stack.imgur.com/zyNIn.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-14T13:29:22.513

您可以创建一个大型菜单来容纳所有页面。argos.co.uk 是观看直播的好例子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T17:15:27.790

一种选择是在导航中使用文件夹来更好地组织选项卡。您可以按部门、职能或其他一些组织结构对子站点进行分组。

对于您的项目，您可能希望创建一个结构，您可以在其中按年、季度、月或任何适当的方式组织项目。您可以通过为每年、每季度等创建实际站点来做到这一点，或者您可以在导航设置中手动组织导航。

```
Projects
  2012
    Q4
      Project A
  2013
    Q1
      Project B
      Project C
    Q2
      Project D 
```

# sql - 从同一个表中检查不同字段的 SQL 案例

> ID：15926917
> 
> 赞同：1
> 
> 时间：2013-04-10T13:14:23.360
> 
> 标签：sql, db2, case

我有以下问题：我有一个包含 case 部分的 select 语句。直到那里很容易问题是该案例包括对同一张表中的另一个字段的检查。

```
 select h.id, 
    case h.value 
    when 'P' then 'test'
    when '' then 'failed'
    when 'D' then 'passed'
    else null end
    as info, 
    b.text, 
    case h.diag
    when h.value = ''  [or 'failed' not sure tried both and didn't work]
    else h.diag end
    as diag1, h.date from valuetab h, texttab b where h.id=b.id 
```

我希望 h.diag 仅在 h.value 没有失败时显示值。

我总是错误地认为 = 应该是 concat .. 但这在我看来没有意义。

有任何想法吗？？

这就是你所有的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:19:36.653

您缺少`THEN`该子句的一部分`WHEN`，并指定了可以指定值的条件：

```
case h.value
when '' THEN NULL
else h.diag end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T13:20:36.813

你也可以用你的表达式在不同的地方写一个case语句，即

```
SELECT CASE WHEN X = 1 THEN 'Y' WHEN X = 2 THEN 'Z' 
```

我认为你想要做的更像是这样的：

```
SELECT CASE WHEN h.value = '' THEN h.diag end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T13:21:29.810

使用另一种形式的`case`语句，它没有指定您要查看的列：

```
select case 
          when column1 = 2 then 'Foo'
          when other_column = 'blah' then 'Bar'
       end
    from table 
```

using 的问题`case column1 when...`在于它隐式地与`column1`每个`when`子句进行比较。然后，您不能在其中包含与其他列的比较。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T13:21:21.910

好的，我知道了....

在第二种情况之后，必须删除“h.diag”....

所以它是

```
 case 
    when h.value = ''  then null
    else h.diag end
    as diag1, 
```

# android - 是否可以强制使用软件按钮右侧的溢出菜单？

> ID：15926918
> 
> 赞同：0
> 
> 时间：2013-04-10T13:14:24.513
> 
> 标签：android, menu, android-actionbar, android-menu

我有一个带有许多选项和菜单的操作栏。在没有菜单按钮的设备上，溢出菜单被添加到我的操作栏中。

我想将此溢出菜单按钮添加到软件按钮的右侧，就像没有操作栏的应用程序一样，如下所示：

![软件按钮右侧的溢出菜单按钮](https://i.stack.imgur.com/13HhN.png)

是否有可能，如果可能，如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:22:22.160

> 可能吗

是的，如果您不介意您的应用看起来不再维护它，从而减少您的潜在用户群。

请阅读[Say Goodbye to the Menu Button](http://android-developers.blogspot.com/2012/01/say-goodbye-to-menu-button.html)，尤其是这段话：

> 但是，此按钮不能提供理想的用户体验。事实上，在不使用选项菜单的应用程序中，此操作溢出按钮什么也不做，并且会造成用户混淆。因此，在 Android 3.0+ 上运行时，您应该更新旧版应用程序以删除导航栏中的操作溢出，并在必要时开始使用操作栏。您可以这样做，同时保持与您的应用当前支持的设备向后兼容。

因此，有才华的开发人员正试图*避免*将这种可供性放在系统/导航栏中，而不是添加那种可供性。

> 这个怎么做 ？

将 your`android:targetSdkVersion`和 your设置`android:minSdkVersion`为小于 11 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:19:23.240

`minSdkVersion`如果您的和`targetSdkVersion`小于 API 11 ，Android 会自动添加此按钮。唯一的例外是，如果您设置`minSdkVersion`为 10 或更低，设置`targetSdkVersion`为 11、12 或 13，并且您不使用 ActionBar，系统会添加在 Android 4.0 或更高版本的手机上运行您的应用程序时的旧溢出按钮。

如果您的`targetSdkVersion`和/或`minimumSdkVersion`达到或超过 API 11，则不能使用此按钮。

# opencv - 在 OpenCV - 如何将 CvPoint 转换为 CvSeq？

> ID：15926925
> 
> 赞同：1
> 
> 时间：2013-04-10T13:14:33.980
> 
> 标签：opencv, convex-hull

在 OpenCV - 如何将 CvPoint 转换为 CvSeq ？

我有 CvPoints，我想使用 cvconvexhull2 Open Functions - 但它只接受 CvSeq 作为输入。请帮助我进行此转换..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:02:07.223

根据opencv[文档](http://docs.opencv.org/modules/core/doc/dynamic_structures.html?highlight=cvseq#)，

以下是如何为各种 OpenCV 动态数据结构创建存储并填充动态增长的序列：

```
CvMemStorage* storage = cvCreateMemStorage(0);
CvSeq* seq = cvCreateSeq( CV_32SC2, sizeof(CvSeq), sizeof(CvPoint), storage );
int i;

for( i = 0; i < 10; i++ ){
  CvPoint pt;
  pt.x = rand();
  pt.y = rand();
  cvSeqPush( seq, &pt );
} 
```

# ruby-on-rails-3 - Rails 教程 3 第 9.1 章：Rspec 测试在应该通过时失败

> ID：15926926
> 
> 赞同：0
> 
> 时间：2013-04-10T13:14:45.237
> 
> 标签：ruby-on-rails-3, rspec, railstutorial.org

我是一个 Rails 菜鸟，并且一直在学习 Michael Hartl 的出色 Rails 3 教程并取得了巨大的成功。到目前为止，我所有的测试都在应该有的时候工作（根据书）。然而，我在[第 9 章的开头](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#top)并且没有通过应该通过的 rspec 测试——即浏览器中的功能是完美的。

我检查了所有内容，甚至查看了示例应用程序的 github 存储库，但仍然无法弄清楚如何解决我的 rspec 问题。任何帮助是极大的赞赏。

## 问题中的错误

```
 1) Authentication signin with valid information 
       Failure/Error: it { should have_selector('a', 'Sign out', href: signout_path) }
         expected css "Sign out" to return something
       # ./spec/requests/authentication_pages_spec.rb:34:in `block (4 levels) in <top (required)>'

    2) Authentication signin with valid information 
       Failure/Error: it { should have_selector('title', text: user.name) }
         expected css "title" with text "Example User" to return something
       # ./spec/requests/authentication_pages_spec.rb:33:in `block (4 levels) in <top (required)>'

    3) User pages signup edit page 
       Failure/Error: it { should have_selector('title', text: "Edit User" ) }
         expected css "title" with text "Edit User" to return something
       # ./spec/requests/user_pages_spec.rb:72:in `block (5 levels) in <top (required)>' 
```

## 其他应用程序文件

**规范/请求/authentication_pages_spec.rb**

```
require 'spec_helper'

describe "Authentication" do

  subject { page }

  describe "signin page" do
    before { visit signin_path }

    it { should have_selector('h1',    text: 'Sign in') }
    it { should have_selector('title', text: 'Sign in') }
  end

  describe "signin" do
    before { visit signin_path }

    describe "with invalid information" do
      before { click_button "Sign in" }

      it { should have_selector('title', text: 'Sign in') }
      it { should have_selector('div.alert.alert-error', text: 'Invalid') }
    end

    describe "with valid information" do
      let(:user) { FactoryGirl.create(:user) }
      before do
        fill_in "Email",    with: user.email.upcase
        fill_in "Password", with: user.password
        click_button "Sign in"
      end 

      it { should have_selector('title', text: user.name) }
      it { should have_selector('a', 'Sign out', href: signout_path) }
    end
  end
end 
```

**规范/请求/user_pages_spec.rb**

```
require 'spec_helper'

describe "User pages" do

  subject { page }

  describe "signup page" do
    before { visit signup_path }

    it { should have_selector('h1',    text: 'Sign up') }
    it { should have_selector('title', text: full_title('Sign up')) }
  end

  describe "profile page" do
  let (:user) { FactoryGirl.create(:user) } #Using factory girl to create the test user

  before { visit user_path(user) }

  it { should have_selector('h1', text: user.name) }
  it { should have_selector('title', text: user.name) }
  end

  describe "signup" do

    before { visit signup_path }

    let(:submit) { "Create my account" }

    describe "with invalid information" do
      it "should not create a user" do
        expect { click_button submit }.not_to change(User, :count)
      end

      describe "after submission" do
        before { click_button submit }

        it { should have_selector('title', text: 'Sign up') }
        it { should have_content('error') }
      end
    end

    describe "with valid information" do
      before do
        fill_in "Name",         with: "Example User"
        fill_in "Email",        with: "user@example.com"
        fill_in "Password",     with: "foobar"
        fill_in "Confirmation", with: "foobar"
      end

      it "should create a user" do
        expect { click_button submit }.to change(User, :count).by(1)
      end

      describe "after saving the user" do
        before { click_button submit }

        let(:user) { User.find_by_email('user@example.com') }

        it { should have_selector('title', text: user.name) }
        it { should have_selector('div.alert.alert-success', text: 'Welcome') }
        it { should have_link('Sign out') }
      end
    end

    describe "edit" do
      let(:user) { FactoryGirl.create(:user) }
      before { visit edit_user_path(user) }

      describe "page" do 
        it { should have_selector('h1', text: "Update your profile") }
        it { should have_selector('title', text: "Edit User" ) }
        it { should have_link('change', href: 'http://gravatar.com/emails') }
      end

      describe "with invalid information" do
        before { click_button "Save changes" }

        it { should have_content('error') }
      end
      end
  end
end 
```

**应用程序/视图/布局/_header.html.erb**

```
 <header class="navbar navbar-fixed-top navbar-inverse">
      <div class="navbar-inner">
         <div class="container">
          <%= link_to "sample app", root_path, id: "logo" %>
          <nav>
            <ul class="nav pull-right">
              <li><%= link_to "Home",    root_path %></li>
              <li><%= link_to "Help",    help_path %></li>
              <% if signed_in? %>
                <li><%= link_to "Users", '#' %></li>
                <li id="fat-menu" class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown"> Account <b class="caret"></b>
                  </a>
                  <ul class="dropdown-menu">
                    <li><%= link_to "Profile", current_user %></li>
                    <li><%= link_to "Settings", '#' %></li>
                    <li class="divider"></li>
                    <li>
                      <%= link_to "Sign out", signout_path, method: "delete" %>
                    </li>
                  </ul>
                </li>
              <% else %>
              <li><%= link_to "Sign in", signin_path %></li>
              <% end %>
            </ul>
          </nav>
        </div>
      </div>
    </header> 
```

**应用程序/视图/用户/edit.html.erb**

```
<% provide(:title, "Edit user") %> 
<h1>Update your profile</h1>

<div class="row">
  <div class="span6 offset3">
    <%= form_for(@user) do |f| %>
      <%= render 'shared/error_messages' %>

      <%= f.label :name %>
      <%= f.text_field :name %>

      <%= f.label :email %>
      <%= f.text_field :email %>

      <%= f.label :password %>
      <%= f.password_field :password %>

      <%= f.label :password_confirmation, "Confirm Password" %>
      <%= f.password_field :password_confirmation %>

      <%= f.submit "Save changes", class: "btn btn-large btn-primary" %>
    <% end %>

    <%= gravatar_for @user %>
    <a href="http://gravatar.com/emails">change</a>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:55:52.933

## 解决更新！

感谢您的评论。我最终通过做几件事来通过测试：

*   重启 Rails
*   继续追书直到9.2.1结束

完成这两件事后，测试套件按预期变为绿色。希望这可以帮助陷入同样情况的人。

# javascript - 发送带有附件 javascript 的电子邮件

> ID：15926928
> 
> 赞同：1
> 
> 时间：2013-04-10T13:14:53.340
> 
> 标签：javascript, internet-explorer, activex, email-attachments

我想在 IE 上使用 activex 发送带附件的电子邮件。我想从我的页面添加一个元素，例如 img 或 canvas。我怎样才能做到这一点？这是一些代码。

```
var img = canvas.toDataURL("image/png");
var objO = new ActiveXObject('Outlook.Application');     
mItm.Attachments.Add(); // can add img?? 
```

非常感谢您的帮助。

# python - 计算分支和绑定背包中包含的物品

> ID：15926933
> 
> 赞同：5
> 
> 时间：2013-04-10T13:15:11.037
> 
> 标签：python, tree, binary-tree, knapsack-problem, branch-and-bound

使用分支定界算法，我已经评估了一组给定项目的最佳利润，但现在我希望找出哪些项目包含在这个最优解决方案中。我正在评估最佳背包的利润值如下（改编自[此处](https://stackoverflow.com/q/7448141/1214849)）：

```
import Queue

class Node:
    def __init__(self, level, profit, weight):
        self.level = level # The level within the tree (depth)
        self.profit = profit # The total profit
        self.weight = weight # The total weight

def solveKnapsack(weights, profits, knapsackSize):
    numItems = len(weights)
    queue = Queue.Queue()
    root = Node(-1, 0, 0)    
    queue.put(root)

    maxProfit = 0
    bound = 0
    while not queue.empty():
        v = queue.get() # Get the next item on the queue

        uLevel = v.level + 1 
        u = Node(uLevel, v.profit + e[uLevel][1], v.weight + e[uLevel][0])

        bound = getBound(u, numItems, knapsackSize, weights, profits)

        if u.weight <= knapsackSize and u.profit > maxProfit:
            maxProfit = uProfit

        if bound > maxProfit:    
            queue.put(u)

        u = Node(uLevel, v.profit, v.weight)
        bound = getBound(u, numItems, knapsackSize, weights, profits)

        if (bound > maxProfit):
            queue.put(u)
    return maxProfit

# This is essentially the brute force solution to the fractional knapsack
def getBound(u, numItems, knapsackSize, weight, profit):
    if u.weight >= knapsackSize: return 0
    else:
        upperBound = u.profit
        totalWeight = u.weight
        j = u.level + 1
        while j < numItems and totalWeight + weight[j] <= C:
            upperBound += profit[j]
            totalWeight += weights[j]
            j += 1
        if j < numItems:
            result += (C - totalWeight) * profit[j]/weight[j]
        return upperBound 
```

那么，**我怎样才能得到构成最优解的项目**，而不仅仅是利润呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-06T19:07:38.420

我使用您的代码作为起点来完成这项工作。我将我的`Node`班级定义为：

```
class Node:
    def __init__(self, level, profit, weight, bound, contains):
        self.level = level          # current level of our node
        self.profit = profit
        self.weight = weight        
        self.bound = bound          # max (optimistic) value our node can take
        self.contains = contains    # list of items our node contains 
```

然后我同样启动了我的背包求解器，但初始化了`root = Node(0, 0, 0, 0.0, [])`. 该值`root.bound`可能是一个浮点数，这就是为什么我将它初始化为`0.0`，而其他值（至少在我的问题中）都是整数。到目前为止，该节点不包含任何内容，因此我从一个空列表开始。我遵循了与您的代码类似的大纲，除了我将绑定存储在每个节点中（不确定这是必要的），并`contains`使用以下方法更新列表：

```
u.contains = v.contains[:]    # copies the items in the list, not the list location
# Initialize u as Node(uLevel, uProfit, uWeight, 0.0, uContains)
u.contains.append(uLevel)    # add the current item index to the list 
```

请注意，我只更新了`contains`“获取项目”节点中的列表。这是主循环中的第一个初始化，在第一条`if bound > maxProfit:`语句之前。当您更新以下值时，我在此之前更新`contains`了语句中的列表：`if:``maxProfit`

```
if u.weight <= knapsackSize and u.value > maxProfit:
    maxProfit = u.profit
    bestList = u.contains 
```

这存储了您要访问的项目的索引`bestList`。`if v.bound > maxProfit and v.level < items-1`之后我还在主循环中添加了条件，`v = queue.get()`这样我就不会在到达最后一项后继续前进，也不会循环遍历不值得探索的分支。

此外，如果您想获得一个二进制列表输出，显示哪些项目是按索引选择的，您可以使用：

```
taken = [0]*numItems
for item in bestList:
    taken[item] = 1

print str(taken) 
```

我的代码中还有其他一些差异，但这应该使您能够获得您选择的项目列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-27T17:39:40.930

我一直在考虑这个问题。显然，您必须在 Node 类中添加一些方法，这些方法将分配 node_path 并将当前级别添加到其中。当您的 node_weight 小于容量并且它的值大于 max_profit 时，您在循环中调用您的方法并将 path_list 分配给您的 optimization_item_list，即您分配 maxProfit 的位置。[你可以在这里](http://www.academic.marist.edu/~jzbv/algorithms/Branch%20and%20Bound.htm)找到java实现

# ipad - -[UIPickerView setFrame:]：无效的高度值 200.0 固定到 180.0

> ID：15926945
> 
> 赞同：1
> 
> 时间：2013-04-10T13:15:55.820
> 
> 标签：ipad, uipickerview

-[UIPickerView setFrame:]：无效的高度值 200.0 固定到 180.0 我在 nslog 中收到此错误。但我不在乎。未来有可能发生任何崩溃吗？. 我的编码是

```
 pickerviewdropdown.Dropoption    = [[Utility getSizeValues] mutableCopy];
        [pickerviewdropdown.pickerview reloadAllComponents];

        subOptionPopOver            = [[UIPopoverController alloc] initWithContentViewController:pickerviewdropdown];
        [subOptionPopOver setPopoverContentSize:CGSizeMake(200, 200)];

        [subOptionPopOver presentPopoverFromRect:[sender bounds]
                                          inView:sender
                        permittedArrowDirections:UIPopoverArrowDirectionAny
                                        animated:NO]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:28:58.707

很明显，您将高度设置为 200，而它应该是 180。不会发生崩溃，但我建议您将代码更改为 CGSizeMake(200, 180)，这样您就不会一直收到该错误。

# python - Z3：如何从 8 位数组中选择 4 个字节？

> ID：15926947
> 
> 赞同：2
> 
> 时间：2013-04-10T13:16:03.003
> 
> 标签：python, z3

使用 Python Z3，我有一个字节数组，可以使用 Select 读取 1 个字节，如下所示。

```
MI = BitVecSort(32)
MV = BitVecSort(8)
Mem = Array('Mem', MI, MV)

pmt = BitVec('pmt', 32)
pmt2 = BitVec('pmt2', 8)

g = True
g = And(g, pmt2 == Select(Mem, pmt)) 
```

到目前为止，这还可以。但是，现在我想从 Mem 数组中读取 4 个字节，如下所示。

```
t3 = BitVec('t3', 32)
g = And(g, t3 == Select(Mem, pmt)) 
```

事实证明这是错误的，因为 t3 是 32 位的，而不是 8 位的，而 Mem 是 8 位的数组。

问题是：如何使用 Select 读取 4 个字节，而不是上面示例中的 1 个字节？

我想我可以创建一个新函数来读取 4 个字节，比如说 Select4()，但我不确定如何在 Z3 python 中创建一个函数。

太感谢了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:07:00.143

我们可以定义`Select4`为

```
def Select4(M, I):
  return Concat(Select(M, I + 3), Select(M, I + 2), Select(M, I+1), Select(M, I)) 
```

该操作`Concat`本质上是附加四个位向量。Z3也支持操作`Extract`。这两个操作可用于对编程语言（如 C）中可用的转换操作进行编码。

这是完整的示例（也可[在此处](http://rise4fun.com/Z3Py/OB2p)在线获得）：

```
MI = BitVecSort(32)
MV = BitVecSort(8)
Mem = Array('Mem', MI, MV)

pmt = BitVec('pmt', 32)
pmt2 = BitVec('pmt2', 8)

def Select4(M, I):
  return Concat(Select(M, I + 3), Select(M, I + 2), Select(M, I+1), Select(M, I))

g = True
g = And(g, pmt2 == Select(Mem, pmt))
t3 = BitVec('t3', 32)
g = And(g, t3 == Select4(Mem, pmt))

solve(g, pmt2 > 10) 
```

# sql - 比较两个表，查找缺失的行和不匹配的数据

> ID：15926953
> 
> 赞同：2
> 
> 时间：2013-04-10T13:16:13.230
> 
> 标签：sql

我想比较两个表并获得一组结果，其中查找值不匹配以及另一个表中缺少键值。第一部分适用于以下查询：

```
SELECT * FROM (
    SELECT  mID, mLookup
    FROM m) t1

FULL OUTER JOIN (
    SELECT  aID, aLookup
    FROM a) t2

ON t1.mID = t2.aID

WHERE
    t1.mID = t2.aID AND
    t1.mLookup <> t2.aLookup 
```

但是，它不会从 t1 和 t2 返回另一个表中没有对应 ID 的行（因为`ON t1.mID = t2.aID`）。

如何在同一个查询中实现两者？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T13:30:16.133

`WHERE`删除子句的 ID 部分。这`FULL OUTER JOIN` `ON t1.mID = t2.aID`足以将表格链接在一起。FULL OUTER JOIN 将返回连接中的两个表，即使其中一个表没有匹配项。

但是，该`WHERE t1.m_ID = t2.aID`子句将结果限制为两个表中都存在的 ID。这有效地`FULL OUTER JOIN`导致`INNER JOIN`.

换句话说：

```
SELECT * FROM (
    SELECT  mID, mLookup
    FROM m) t1

FULL OUTER JOIN (
    SELECT  aID, aLookup
    FROM a) t2

ON t1.mID = t2.aID

WHERE
    --t1.mID = t2.aID AND -- remove this line
    t1.mLookup <> t2.aLookup 
```

- 编辑 -

重新阅读您的问题，您只想要不匹配的内容。在这种情况下，您需要搜索任何一方的 ID 为 NULL 的位置：

```
SELECT * FROM (
    SELECT  mID, mLookup
    FROM m) t1

FULL OUTER JOIN (
    SELECT  aID, aLookup
    FROM a) t2

ON t1.mID = t2.aID

WHERE
    t1.mID IS NULL OR
    t2.mID IS NULL OR
    t1.mLookup <> t2.aLookup 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T13:30:48.433

您的`where`查询子句过滤掉那些没有匹配“Ids”的行。尝试这个：

```
SELECT m.mId, m.mLookup, a.aId, a.aLookup
 from m
  full outer join a
   on a.aId = m.mId
 where m.mId is null
  or a.aID is null
  or m.mLookup <> a.aLookup 
```

完全外连接获取所有可能的行，而 where 子句保留所有行，其中一侧或另一侧为空，并且它们匹配（都不为空），仅保留“查找”值不同的那些行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-27T05:57:56.493

从 SQL Server 2008 开始，也适用于 Azure SQL 数据库、Azure SQL 数据仓库、并行数据仓库

## 以下是 SQL 查询；

```
USE [test]
GO

CREATE TABLE [dbo].[Student1](
    [Id] [int] NOT NULL,
    [Name] [nvarchar](256) NOT NULL
) ON [PRIMARY]
GO

CREATE TABLE [dbo].[Student2](
    [Id] [int] NOT NULL,
    [Name] [nvarchar](256) NOT NULL
) ON [PRIMARY]
GO

---- You can re-run from here with your data 
truncate table [Student1]
truncate table [Student2]

insert into [Student1] values (1, N'سید حیدر')
insert into [Student1] values (2, N'Syed Ali')
insert into [Student1] values (3, N'Misbah Arfin')

insert into [Student2] values (2, N'Syed Ali')
insert into [Student2] values (3, N'Misbah Arfin');

with StudentsAll (Id, [Name]) as
(
select s1.Id, s1.[Name] from Student1 s1
    left outer join Student2 s2 
on 
    s1.Id = s2.Id
),
StudentsMatched (Id, [Name]) as
(
select s1.Id, s1.[Name] from Student1 s1
    inner join Student2 s2 
on 
    s1.Id = s2.Id
)
select * from StudentsAll
except
select * from StudentsMatched 
```

# asp.net - 在 Asp.net 网页中显示保存文件对话框

> ID：15926960
> 
> 赞同：1
> 
> 时间：2013-04-10T13:16:27.853
> 
> 标签：asp.net, file, dialog, savefiledialog

我有一个将文件写入本地磁盘的 ASP.net 页面。

我想向用户显示一个保存文件对话框并允许他设置文件夹的路径。

我知道可以使用下面的代码；

```
Response.Clear();
Response.ContentType = "text/csv";
Response.AddHeader( "Content-Disposition", "attachment;filename=\"report.csv\"" );
// write your CSV data to Response.OutputStream here
Response.End(); 
```

但它修复了文件路径。

我需要捕获用户选择的文件路径。这可能在 ASP.net 中吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:21:45.740

它不像网页那样工作，您必须启动下载*建议g*目标文件名，然后用户可以覆盖您建议的文件名并选择他喜欢的任何文件夹或文件名，您的内容将保存在该位置。

您对仅在 ASP.NET 应用程序服务器端的客户端计算机上有意义的本地路径不做任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:35:37.887

> 我需要捕获用户选择的文件路径。那可能吗

不可以。您的 Web 服务器向客户端提供一个文件，客户端可以选择保存该文件。

客户端保存此文件的路径以何种方式对服务器感兴趣？

# ssrs-2008 - SSRS 2008 色谱柱可见性

> ID：15926962
> 
> 赞同：0
> 
> 时间：2013-04-10T13:16:33.863
> 
> 标签：ssrs-2008

我目前正在习惯使用 SSRS 2008，就像我以前使用 2005 一样。我有一个数据表，其中包含各种列和行等，其中一列是对其他 3 列的计算，需要可扩展为被视为故障。

我已经通过 group 字段设置为 vis 列，这很好，但是它不会将旁边的列移入或移出，无论如何设置切换，它都会保持在同一个位置，所以我最终会在列之间出现间隙. 它似乎在 2005 年自动完成。

我找不到阻止这些列固定到位的设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:56:09.153

不要使用“属性”部分中的“可见性”选项。右键单击顶部的列句柄并进入列可见性。将其设置为隐藏在那里。

# grails - 在 Grails 应用程序中创建“漂亮”的用户配置文件 URL

> ID：15926964
> 
> 赞同：3
> 
> 时间：2013-04-10T13:16:43.543
> 
> 标签：grails, seo, url-mapping

任何已经使用 Grails 实现过类似功能的人都可以告诉我哪些是创建格式为“ [http://www.myservice.com/username](http://www.myservice.com/username) ”的用户配置文件 URL 的好做法（如果有的话），就像在 Facebook 中一样，推特，领英？

我正在尝试通过 UrlMappings 来实现它，在我看来，我需要打破代码约定，至少对于控制器而言。

所以，欢迎任何建议，谢谢。

**更新 1**

当我提到我对打破代码约定的担忧时，我的意思是我想使用此映射显示用户配置文件，但我的应用程序中确实有其他对象，我想使用默认映射访问它们：

```
"/$controller/$action?/$id?"() 
```

* * *

**解决方案**

感谢我在这里收到的巨大贡献，我想出了这个解决方案，它解决*了我的问题*。

正如所指出的，要进行这种映射，我需要更密切地控制我的请求是如何处理的。这意味着我需要告诉 Grails 我不想将哪些控制器映射到“用户名”规则。

由于这将是一项非常乏味的任务（因为我有几个控制器），所以我这样做是为了使其自动化：

**UrlMappings.groovy**

```
static mappings = {
     getGrailsApplication().controllerClasses.each{ controllerClass ->
     "/${controllerClass.logicalPropertyName}/$action?/$id?"(controller: controllerClass.logicalPropertyName)
     }
     "/$username/$action?"(controller: "user", action: "profile")
     }
     ...
 } 
```

当然，我需要在我的用户注册过程中做一些类似的事情，以避免用户名等于某个控制器名称。

就是这样，谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:25:51.363

假设您有一个 UserController 并且您要将任何 domain.com/username 映射到用户控制器的 show 操作，您的 url 映射可能是这样的：在我的示例中，name 将成为您的参数中的一个参数。有关更多详细信息，请参阅[此处](http://grails.org/doc/2.2.x/guide/single.html#urlmappings)

希望这可以帮助。

```
static mappings = {
    "/$name"(controller: "user", action: "show")

    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T23:36:57.537

根据您的要求，http://yourdomain.com/ 之后的所有内容都[可以](http://yourdomain.com/)是用户名或您的其他控制器之一，这可能会产生不良影响，具体取决于首先定义的 url 映射（例如用户控制器与非用户控制器）。但很可能非用户控制器列表将是较小的列表，因此您应该首先放置它并对其进行过滤，然后将所有其他 url 映射视为用户映射。

这是一个例子：

```
static mapping = {
  "/$controller/$action?/$id?" {
    constraints {
      controller inList: ['nonUserController1', 'nonUserController2',...]
    }
  }

  //this should work for /username and /username/whateveraction
  "/$username/$action?"(controller: 'user')
} 
```

这里需要注意的一些事项：

*   您需要首先放置非用户控制器 url 映射，因为之后的所有其他内容都`http://yourdomain.com/`可能是用户名 - 对吗？
*   其次，您需要设置约束以捕获所有非用户控制器，同时忽略用户 url 映射
*   您还需要防止用户使用与您的非用户控制器之一匹配的用户名进行注册

# java - 安全性：Japplet 中的访问被拒绝异常

> ID：15926966
> 
> 赞同：0
> 
> 时间：2013-04-10T13:16:43.763
> 
> 标签：java, security, applet, policy

这个小程序直到昨天都运行良好，现在它给了我一些例外。这是堆栈跟踪：

```
java.security.AccessControlException: access denied ("java.lang.RuntimePermission" "getenv.localappdata")
Exception in thread "AWT-EventQueue-1" java.security.AccessControlException: access denied ("java.lang.RuntimePermission" "modifyThreadGroup")
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:366)
    at java.security.AccessController.checkPermission(AccessController.java:560)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
    at sun.applet.AppletSecurity.checkAccess(AppletSecurity.java:252)
    at java.lang.ThreadGroup.checkAccess(ThreadGroup.java:315)
    at java.lang.Thread.init(Thread.java:376)
    at java.lang.Thread.<init>(Thread.java:485)
    at javax.swing.plaf.basic.BasicDirectoryModel$LoadFilesThread.<init>(BasicDirectoryModel.java:222)
    at javax.swing.plaf.basic.BasicDirectoryModel.validateFileCache(BasicDirectoryModel.java:140)
    at javax.swing.plaf.basic.BasicDirectoryModel.propertyChange(BasicDirectoryModel.java:69)
    at java.beans.PropertyChangeSupport.fire(PropertyChangeSupport.java:335)
    at java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:327)
    at java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:263)
    at java.awt.Component.firePropertyChange(Component.java:8382)
    at javax.swing.JFileChooser.setCurrentDirectory(JFileChooser.java:581)
    at javax.swing.JFileChooser.<init>(JFileChooser.java:344)
    at javax.swing.JFileChooser.<init>(JFileChooser.java:296)
    at gui1.jButton1ActionPerformed(gui1.java:148)
    at gui1.access$000(gui1.java:21)
    at gui1$1.actionPerformed(gui1.java:62)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:729)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:688)
    at java.awt.EventQueue$3.run(EventQueue.java:686)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:702)
    at java.awt.EventQueue$4.run(EventQueue.java:700)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:699)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:91)
BUILD SUCCESSFUL (total time: 34 seconds) 
```

我还创建了一个策略文件并将其放在 user.home 目录中，名称为 .java.policy

```
grant {
  permission java.io.FilePermission "<<ALL FILES>>", "write";
  permission java.lang.RuntimePermission "getenv.<environment variable name>";
  permission java.io.FilePermission "<<ALL FILES>>", "read";
  permission java.io.FilePermission "<<ALL FILES>>", "delete";
}; 
```

这是小程序代码

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
import javax.swing.JApplet;
import javax.swing.SwingUtilities;
import java.io.File;
import java.io.IOException;
/*
<applet code="mainapplet.java" width=500 height=500>
</applet>
*/
/**
 *
 * @author sabertooth
 */
public class mainapplet extends JApplet {

    /**
     * Initialization method that will be called after the applet is loaded
     * into the browser.
     */
    private String localappfolder;
    private String topath;

    public void init() {
        // TODO start asynchronous download of heavy resources
        try{
            localappfolder=System.getenv("localappdata");
            topath=localappfolder+"\\ossoc\\";
            new File(topath).mkdir();

        }
        catch(Exception e)
        {
            System.out.println(e);
        }
        try {
            SwingUtilities.invokeAndWait(new Runnable() {

                public void run() {
                    createGUI();
                }
            });
        } catch (Exception e) { 
            System.err.println("createGUI didn't complete successfully");
        }

    }
    public void destroy(){

    }
    // TODO overwrite start(), stop() and destroy() methods
    private void createGUI(){
        gui1 gui1=new gui1();
        gui1.setOpaque(true);
        setContentPane(gui1);
    }
     private static void deleteDir(File dir)
    throws IOException
  {
    if (!dir.isDirectory()) {
      throw new IOException("Not a directory " + dir);
    }

    dir.delete();
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:25:40.633

请签署 Applet jar 并在您的代码中使用它。策略文件不是解决访问问题的理想解决方案。

# python - 如何通过Python中的RegEx在具有相同前缀的字符串中查找单词

> ID：15926967
> 
> 赞同：3
> 
> 时间：2013-04-10T13:16:47.060
> 
> 标签：python, regex

给定一个字符串...

`truth = "I like turtles, turtles4756-+=[]}{@##:) I like"`

你怎么能得到以已知前缀开头的单词数组？

例如'turt'

`["turtles", "turtles4756-+=[]}{@##:)"]`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T13:18:30.853

```
In [1]: import re

In [2]: truth = "I like turtles, turtles4756-+=[]}{@##:) I like"

In [3]: re.findall?
    Definition: re.findall(pattern, string, flags=0)
    ...
    Return a list of all non-overlapping matches in the string.

    If one or more groups are present in the pattern, return a
    list of groups; this will be a list of tuples if the pattern
    has more than one group.

    Empty matches are included in the result.

# [word boundary]turt followed by word characters
In [4]: re.findall(r'\bturt\w*', truth)
Out[4]: ['turtles', 'turtles4756']

# [word boundary]turt followed by non-whitespace characters
In [5]: re.findall(r'\bturt\S*', truth)
Out[5]: ['turtles,', 'turtles4756-+=[]}{@##:)']

In [10]: truth = "I like turtles, turtles4756-+=[]}{@##:) I like superturtles"

In [11]: re.findall(r'turt\S+', truth)
Out[11]: ['turtles,', 'turtles4756-+=[]}{@##:)', 'turtles']

In [12]: re.findall(r'\bturt\S+', truth)
Out[12]: ['turtles,', 'turtles4756-+=[]}{@##:)'] 
```

# ajax - Magento 1.7 过滤器目录中的产品

> ID：15926969
> 
> 赞同：0
> 
> 时间：2013-04-10T13:16:51.890
> 
> 标签：ajax, magento, filter, categories

我想在前端过滤一个类别产品集合，并用结果集合替换产品，即用户按“蓝色”过滤我想过滤像 addAttributeToFilter 这样的集合。

我想通过 ajax 调用来执行此操作，但我不知道我应该使用什么 url 以及在哪里执行此过滤。目录列表索引控制器是否可以从 url 访问？然后我可以在这里使用获取参数...

或者有其他解决方案如何管理这个？我并没有真正了解分拣机是如何工作和操纵我的收藏的，所以我目前无法适应这种行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:29:06.107

我终于通过 list.phtml 向当前 URL 添加参数作为数据的 ajax 请求解决了我的问题。在 Mage/Catalog/Block/Product/List.php 我修改了函数 _getProductCollection() 并添加了：

```
if($_POST['name']){
            $this->_productCollection->addAttributeToFilter('name', array('like' => '%'.$_POST['name'].'%'));
} 
```

在 ajax 请求之后，产品列表被过滤的内容替换。

# hyperlink - 如何链接到外部 Doxygen html 文件中的特定部分？

> ID：15926971
> 
> 赞同：4
> 
> 时间：2013-04-10T13:16:54.137
> 
> 标签：hyperlink, documentation, doxygen

假设我在*doxygen*页面中有一个`page_Examples`名为`section_Example`. 是否可以直接链接到该部分？

链接到页面是用 完成的`\link page_Examples Examples \endlink`，但我想直接进入该部分！谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T15:40:11.923

您可以使用

```
\ref section_Example Link Title 
```

创建您正在寻找的链接。有关更多信息，请参阅[文档](http://www.doxygen.nl/manual/commands.html#cmdref)。

# mysql - 我的 SQL 有什么问题？

> ID：15926975
> 
> 赞同：-1
> 
> 时间：2013-04-10T13:17:08.990
> 
> 标签：mysql, sql

对于这样一个笼统的问题，我很抱歉，但我真的很难找出我收到错误的原因`Unknown column 'tbl_downloads.itemid' in 'on clause'`。在 tbl_downloads 表中绝对有一个名为 itemid 的列。

```
SELECT tbl_downloads.itemid,COUNT(tbl_downloads.itemid*temp1.score) AS score2
FROM tbl_downloads,temp1
LEFT JOIN temp2 ON tbl_downloads.itemid=temp2.itemid
WHERE temp2.itemid IS NULL
AND tbl_downloads.memberid=temp1.memberid
GROUP BY tbl_downloads.itemid
ORDER BY score2 DESC
LIMIT 50; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T13:21:53.363

最好在使用隐式和显式连接语法时保持一致 - 这将是一个改进：

```
SELECT tbl_downloads.itemid, COUNT(tbl_downloads.itemid*temp1.score) AS score2
FROM tbl_downloads
JOIN temp1 ON tbl_downloads.memberid=temp1.memberid
LEFT JOIN temp2 ON tbl_downloads.itemid=temp2.itemid
WHERE temp2.itemid IS NULL
GROUP BY tbl_downloads.itemid
ORDER BY score2 DESC
LIMIT 50; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T13:18:56.257

> 我真的很难找出我收到错误的原因`Unknown column 'tbl_downloads.itemid' in 'on clause'`

`LEFT JOIN`适用于`temp1`和。`temp2`如果您将查询格式化如下：

```
SELECT ...
FROM tbl_downloads,
(temp1 LEFT JOIN temp2 ON tbl_downloads.itemid=temp2.itemid)
... 
```

因此`tbl_downloads`不在该`ON`条款的范围内。

# maven - Hudson 构建错误：LifecycleExecutionException Unable to locate the Javac Compiler in

> ID：15926976
> 
> 赞同：3
> 
> 时间：2013-04-10T13:17:09.170
> 
> 标签：maven, hudson, javac

我在 Eclipse 中为带有axis2 的Web 服务创建了一个动态Web 项目。然后我将它转换为 Maven 项目，我能够在 eclipse 中编译和生成 war 文件，但是当我将它部署在服务器上并尝试使用 Hudson-3.0.0 构建它时，它给了我以下错误：

> mojoFailed org.apache.maven.plugins:maven-compiler-plugin:2.3.2(default-compile)
> 
> org.apache.maven.lifecycle.LifecycleExecutionException: 无法执行目标 org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project WebServices: 编译失败
> 无法找到 Javac 编译器在：
> C:\Program Files (x86)\Java\jre6..\lib\tools.jar
> 请确保您使用的是 JDK 1.4 或更高版本而
> 不是 JRE（需要 com.sun.tools.javac.Main 类） .

请让我知道它有什么问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T06:37:48.123

自从我将 Hudson 从 2.2.1 升级到 3.0.1 后，我遇到了完全相同的问题。hudson 配置中的 JAVA_HOME 环境变量和 JDK 都指向 JDK 而不是 JRE。如果我在作业的工作区目录中运行 mvn compile，一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:26:53.813

看起来哈德森找不到 java_home。在 hudson 设置中 java.home 属性设置是否正确？是否有任何其他 java 项目成功构建？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:29:04.337

你做了异常所说的吗？

> 请确保您使用的是 JDK 1.4 或更高版本，而不是 JRE（需要 com.sun.tools.javac.Main 类）。

听起来你没有安装Java。所以安装它。

# c# - NACK apache nms 中的消息

> ID：15926978
> 
> 赞同：2
> 
> 时间：2013-04-10T13:17:14.157
> 
> 标签：c#, stomp, apache-nms

我正在尝试使用 apache nms stomp 发送/接收消息。由于使用了hornetq，我无法使用跨国确认模式。我的消费场景：

1.  接收消息
2.  处理消息
3.  如果进程成功则确认它（使用 message.Acknowledge()）
4.  如果进程失败（??????）

如果进程失败，我想要的只是 NACK 消息；那么我如何在 apache nms 中 NACK 消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:20:43.273

我不知道为什么你不能使用 HornetQ 的交易。当前让客户端发送 NACK 的唯一方法是使用事务并在出错时回滚事务。一旦达到配置的最大允许重新传递，客户端将 NACK 消息。

在大多数实现中，如果您的客户端未确认消息然后断开连接，则消息将重新传递给另一个客户端。对于 ActiveMQ，您可以配置代理在将消息移动到死信队列之前尝试此操作的最大次数。

就目前而言，当异步消息回调抛出异常时，NMS.Stomp 实现不会 NACK 消息，但这可能是一个明智的增强，该项目确实接受了贡献，因此请深入研究。

# javascript - python a[1:]的javascript简写

> ID：15926979
> 
> 赞同：1
> 
> 时间：2013-04-10T13:17:21.077
> 
> 标签：javascript, python, string, substring

所以我在javascript中有一个字符串

```
var s="may the force"; 
```

我只想要这个`the force`部分，在 python 中我可以做到，那么在 javascript`s[4:]`中是否有任何**等价物？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T13:20:11.640

你可以使用：

```
var s = "may the force";
var t = s.substring(4);

alert(t); //alerts "the force" 
```

检查这个[**小提琴**](http://jsfiddle.net/SiCurious/YDV65/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T13:20:36.273

你可以做[`substr`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substr)或[`substring`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substring)

```
//substr
var tf1 = s.substr(4);

//substring
var tf2 = s.substring(4); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:00:56.647

在 JavaScript 的最新实现中，有一个类似的简写符号，但请注意，它还*不是跨浏览器兼容的*，因为它仅在具有最新 JavaScript 实现的浏览器中受支持。

```
var s = 'happy';
s[3]; // "p" 
```

**我在浏览Mozilla 开发者网络**时遇到了这个问题。希望我保存了链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T04:04:51.840

你可以简单地做：

```
var s = "may the force";
var res = s.slice(4); 
```

# jquery - Jquery对话框顺序

> ID：15926980
> 
> 赞同：0
> 
> 时间：2013-04-10T13:17:26.450
> 
> 标签：jquery, jquery-ui-dialog

我有两个 Jquery 对话框。第二个在第一个之上打开。如何使第二个始终位于顶部 ---> 现在，当我单击底部的一个时，顶部的一个隐藏在第一个下方但保持打开状态。

我尝试使用最高`z-index`，但它没有帮助。我不想`modal`在对话框上使用选项。

你可以在这里玩：http: [//jsfiddle.net/2jYEP/2/](http://jsfiddle.net/2jYEP/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:41:13.680

您可以使用jquery ui 对话框的[焦点事件](http://api.jqueryui.com/dialog/#event-focus)将第一个对话框的 zIndex 保持在最低值。这是工作小提琴：

[工作小提琴](http://jsfiddle.net/2jYEP/3/)

```
....
$("#div1").dialog({
         autoOpen: false,
         autoResize: true,
         resizable:false,
         dragable:false,
         focus: function(e, ui){
          $(this).parent(".ui-dialog").css("z-index", 0);
        }
     });
.... 
```

每当对话框获得焦点时，jquery ui 代码将其 zIndex 设置在顶部。所以我们只是改变那个行为并将第一个对话框的 zIndex 设置为最低焦点。

# jquery - 带有 jQ uery 的 XMLHttpRequest 对象

> ID：15926984
> 
> 赞同：0
> 
> 时间：2013-04-10T13:17:35.517
> 
> 标签：jquery, dom, xmlhttprequest

完整的 jQuery $.ajax 语法允许我这样做

```
var obj = {'a':1,'b':2};
$.ajax({url:url,dataType:'json',type:'POST',
data:{zip:'602'},beforeSend:function(xhr){$(xhr).data('obj',obj)}}).
done(function(data,state,xhr){console.log(data);console.log($(xhr).data('obj'))}) 
```

在 Windows 上的 Google Chrome 中，这可以完美运行 - 当 AJAX 返回时，我可以访问存储的对象但是，我不知道这是否可以在整个浏览器范围内同样有效。我主要关心的是 Android 原生、Android 版 Chrome、iOS Safari、Firefox、Safari 和 Windows 上的 IE9+，以及 Mac OS 上的 Safari。

我意识到我可以通过运行一些测试来确定这个问题的至少一部分答案，但是设置完成它们会消耗太多宝贵的资源 - 时间。所以我希望这里有人有答案。

我想这一切都归结为这一点 - XMLHTTPRequest 总是在合理的范围内保证是 DOM 的一等公民。

# debugging - 在 openerp 中禁用开发者模式或调试功能？

> ID：15926985
> 
> 赞同：2
> 
> 时间：2013-04-10T13:17:40.497
> 
> 标签：debugging, openerp

如何为管理员以外的用户禁用调试模式或开发者模式？我试图删除“激活开发者模式”按钮，但问题是，如果我在地址栏中的服务器地址后添加“？调试”，那么用户再次获得开发者模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T12:57:15.323

如果用户是管理员，以下代码将禁用调试模式（下拉框）（管理员 ID 必须为 1。如果不是，则更改 session.uid === admin_id）：

**在your_module/static/src/xml**文件夹中创建一个 xml 文件并添加以下代码：

```
<templates>
    <t t-extend="ViewManagerAction">
        <t t-jquery="select.oe_debug_view" t-operation="replace">
            <select t-if="widget.session.uid === 1 and widget.session.debug" class="oe_debug_view"/>
        </t>
    </t>
</templates> 
```

现在去`__openerp__.py`添加你的xml，如下所示：

```
'qweb' : [
    "static/src/xml/your.xml",
], 
```

重启服务器，更新你的模块并刷新页面。

你可以参考这个博客：[OpenERP Web Changes。](http://change-openerp-web.blogspot.in/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:00:41.950

您尝试注销。默认是在我们注销时将其删除。

# c# - MVC 4 将数据传递到 Bootstrap 模态表单

> ID：15926988
> 
> 赞同：1
> 
> 时间：2013-04-10T13:17:59.597
> 
> 标签：c#, jquery, asp.net-mvc, twitter-bootstrap

我正在使用 ASP.NET MVC4 和实体框架开发一个 Intranet Web 应用程序。我有一个视图，它列举了我在数据库中拥有的所有“人”，我可以编辑或删除它们。我正在尝试使用模态表单来确认删除操作（因此要使用我的操作“删除”）。但是，为了做到这一点，我必须检索我要删除的人的 ID。

阅读了示例和文档后，我找不到正确的方法来检索我想要删除的人的 id 以使用它来执行我的操作。

我的删除操作：

```
public ActionResult Delete(long id)
    {
        Person person = db.Persons.Single(p => p.Id_Person == id);
        if (person == null)
        {
            return HttpNotFound();
        }

        db.Persons.DeleteObject(person);
        db.SaveChanges();

        return RedirectToAction("Index");
    } 
```

我的观点（和模态）：

```
 @model IEnumerable<BuSIMaterial.Models.Person>

@{
    ViewBag.Title = "Index";
}

@using PagedList.Mvc;
@using PagedList;

<link href="/Content/PagedList.css" rel="stylesheet" type="text/css" />

<h2>Index</h2>

<br />

<div class="group">
    <div class ="btn-group">
        <input type="button" value="New person" class="btn" onclick="location.href='@Url.Action("Create")';return false;"/>
        <input type="button" value="Download report" class="btn" onclick="location.href='@Url.Action("PersonReport")';return false;"/>
    </div>
</div>

@using (Html.BeginForm("SelectedPersonDetails", "Person"))
{  
    <form class="form-search">
        <label for="person">Search an employee : </label>
        <input type="text" id="tbPerson" name="tbPerson" class="input-medium search-query">
        <button type="submit" class="btn">Search</button>
    </form>
}

<br />

@Html.PagedListPager((IPagedList)ViewBag.PageOfPersons, page => Url.Action("Index", new { page }))

<br />

<table class="table table-striped">
<thead>
    <tr>
        <th>
            First Name
        </th>
        <th>
            Last Name
        </th>
        <th>
            National Number
        </th>
        <th>
            Start Date
        </th>
        <th>
            End Date
        </th>
        <th>
            Actions
        </th>
    </tr>
</thead>

<tbody>
@foreach (BuSIMaterial.Models.Person item in ViewBag.PageOfPersons)
{
    <tr>
        <td>
            @item.FirstName
        </td>
        <td>
            @item.LastName
        </td>
        <td>
            @item.NumNat
        </td>
        <td>
            @item.StartDate.ToShortDateString()
        </td>
        <td>
            @if (item.EndDate.HasValue)
            {
                @item.EndDate.Value.ToShortDateString()
            }
        </td>
        <td>
            <div class="btn-group">
                    <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                        Actions
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        @{

                            <li>@Html.ActionLink("Edit", "Edit", new { id = item.Id_Person })</li>
                            <li>@Html.ActionLink("Details", "Details", new { id = item.Id_Person })</li>
                            <li>@Html.ActionLink("Desactivate", "Desactivate", new { id = item.Id_Person })</li>
                            <li><a href="#myModal" data-toggle="modal" data-id="@item.Id_Person">Delete</a></li>
                        }
                    </ul>
             </div>
        </td>
    </tr>
}
</tbody>
<tfoot>
    <tr>
        <th>
            First name
        </th>
        <th>
            Last name
        </th>
        <th>
            National number
        </th>
        <th>
            Start date
        </th>
        <th>
            End date
        </th>
        <th>
            Actions
        </th>
    </tr>
</tfoot>
</table>

<div>@Html.PagedListPager((IPagedList)ViewBag.PageOfPersons, page => Url.Action("Index", new { page }))</div>

    <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">Deleting an employee</h3>
        </div>
        <div class="modal-body">
        <p>Are you sure you want to delete this person? All the concerned data also will be deleted.</p>
        </div>
        <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
        <button class="btn btn-primary">Delete</button>
        </div>
    </div>

@section Scripts
{
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/jqueryui")
    @Styles.Render("~/Content/themes/base/css")

    <script type="text/javascript" language="javascript">
        $(document).ready(function () {
            $('#tbPerson').autocomplete({
                source: '@Url.Action("AutoComplete")'
            });
        })

        $('#myModal').modal(options)

    </script>
} 
```

我可以通过做得到 id，`data-id ="@item.Id_Person"`但我不知道如何使用它来最终调用我的操作。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:43:16.770

我不确定您是否想使用 jQuery 之类的东西执行 Ajax 删除 - 或者您是否只想使用 ASP.NET MVC。

如果您想使用 Javascript，您将从 data-id 中提取 Id 并使用 [$.ajax](http://api.jquery.com/jQuery.ajax/)向控制器发送删除请求。

如果你想使用 MVC 和 Ajax，我想你可能需要一个[Ajax.ActionLink](http://geekswithblogs.net/michelotti/archive/2009/04/06/mvc-deletelink-with-ajaxhelper.aspx)

如果你只想删除然后 RedirectToAction 那么正常`HTML.ActionLink`就可以了

# javascript - jquery/javascript, 使用一个按钮点击/提交多个按钮

> ID：15926990
> 
> 赞同：0
> 
> 时间：2013-04-10T13:18:07.860
> 
> 标签：javascript, forms, jquery

可能是一个愚蠢的问题，但请多多包涵：

**是否有可能通过使用 jQuery/javascript 来实现，以便当您单击一个按钮时，它会单击/提交多个按钮？**

这可能有助于更轻松地回答问题：

```
<div class="form-item form-type-select form-item-field-status-10-field-status-und-select">
  <select size="0" name="field_status[10][field_status][und][select]" id="edit-field-status-10-field-status-und-select" class="select-or-other-select form-select chzn-done" style="width: 100px; display: none;">
    <option value="">- select -</option>
    <option selected="selected" value="In">In</option>
    <option value="Gym">Gym</option>
    <option value="Lunch">Lunch</option>
    <option value="Out">Out</option>
    <option value="select_or_other">Other</option>
  </select>
  <div id="edit_field_status_10_field_status_und_select_chzn" class="chzn-container chzn-container-single" style="width: 100px;" title=""><a tabindex="-1" class="chzn-single" href="javascript:void(0)"><span>In</span></a>
    <div style="left: -9000px; width: 98px; top: 25px;" class="chzn-drop">
      <div class="chzn-search">
        <input type="text" autocomplete="off" style="width: 63px;">
      </div>
      <ul class="chzn-results">
        <li style="" class="active-result" id="edit_field_status_10_field_status_und_select_chzn_o_0">- select -</li>
        <li style="" class="active-result result-selected" id="edit_field_status_10_field_status_und_select_chzn_o_1">In</li>
        <li style="" class="active-result" id="edit_field_status_10_field_status_und_select_chzn_o_2">Gym</li>
        <li style="" class="active-result" id="edit_field_status_10_field_status_und_select_chzn_o_3">Lunch</li>
        <li style="" class="active-result" id="edit_field_status_10_field_status_und_select_chzn_o_4">Out</li>
        <li style="" class="active-result" id="edit_field_status_10_field_status_und_select_chzn_o_5">Other</li>
      </ul>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T13:20:29.533

这边走：

```
<input type="button" id="triggerAll">

<input type="button" class="button1">
<input type="button" class="button2">
<input type="button" class="button3"> 
```

```
$('#triggerAll').on('click',function(){
    $('.button1,.button2,.button3').trigger('click');
}); 
```

或者这样：

```
<input type="button" id="triggerAll">

<input type="button" class="processed">
<input type="button" class="processed">
<input type="button" class="processed"> 
```

```
$('#triggerAll').on('click',function(){
    $('.processed').trigger('click');
}); 
```

或者这样：

```
<form class="monitorChanges">
    <label>
        Pick one:
        <select data-defaultvalue="" name="other">
            <option value="" selected></option>
            <option value="1">One</option>
            <option value="2">Two</option>
            <option value="3">Three</option>
            <option value="4">Four</option>
        </select>
    </label>
    <label>
        Other:
        <input type="text" data-defaultvalue="" name="other">
    </label>
    <input type="submit">
</form>

<input type="text" value="Trigger All" id="triggerAll"> 
```

```
$('.monitorChanges').on('change keyup',"input,textarea,select",function(){
    var defaultValue = $(this).data('defaultvalue');

    if ($(this).val() !== defaultValue){
        $(this).parent().parent().find('input[type="submit"]:not(.processed)').addClass('processed');
    }
    else {
       $(this).parent().parent().find('input[type="submit"].processed').removeClass('processed');
    }
});

$('#triggerAll').on('click',function(){
    $(this).parent().find('form input[type="submit"].processed').trigger('click');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:20:52.453

```
$('#mybtnId').click(function(){
    $('button, input[type=button]').not('#mybtnId').trigger('click');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T15:40:34.143

我想出了一个对我有用的解决方案：

```
// Find input(s) that have changed. Add class to their hidden submit button.
$(function() {
    $("input, select").change(function() {
        $(this).closest('td').find('input.ajax-processed').addClass("changed");
    });
});

// One button to submit all input(s) that have changed.
$('.submit-all').click(function(){
    $('.changed, input[type=button]').not('.submit-all').trigger('click');
}); 
```

感谢大家的帮助。它结合了你所有的建议来让这头野兽工作，它也帮助我重新思考我想要完成的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-07T13:32:22.783

这对我有用，使用纯 JavaScript。我在包含两个 reset`onclick`的列表项 ( ) 上使用了该事件。它们控制不同的 '，其中一个不显示在列表项 ( ) 中。当然，您可以在任何类型的输入中进行相同的实现。`li``button``form``style="display:none;"`

```
<ul>
  <li onclick="document.getElementById('btn-clear-1').click(); document.getElementById('btn-clear-2').click();">
    <input class="btn" id="btn-clear-1" form="frm1" type="reset" value="Clear" />
    <input class="btn" id="btn-clear-2" form="frm2" type="reset" value="Clear" style="display:none;" />
  </li>
</ul> 
```

但是我所做的是我正在寻找的不必要的代码。它可能是`<li onclick="document.getElementById('#frm1').reset(); document.getElementById('#frm2').reset();">Clear</li>` （评论只是为了避免这个板上的错误编码）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T13:25:32.613

这是一个特定于您的示例：

```
$('.processed').on('click', function (e) {
    //real event
    if (e.originalEvent !== undefined) {
        $('.processed').click();
    }
    //manually triggered event
    else {
           alert($(this).text() + ' triggered');
    }
}); 
```

希望这可以帮助！[您可以在这个jsFiddle 示例](http://jsfiddle.net/vtwxL/3/)中看到它的工作原理

# visual-studio-2012 - 为什么 Visual Studio 2012 会生成 *.vshost.exe？

> ID：15926991
> 
> 赞同：1
> 
> 时间：2013-04-10T13:18:08.003
> 
> 标签：visual-studio-2012, vshost.exe

“启用 Visual Studio 托管进程”未勾选：http: [//i.imgur.com/kuGnZZk.png](http://i.imgur.com/kuGnZZk.png)

我错过了什么吗？

请原谅我的问题的简单性。我的 Google-fu 不够强大，无法通过所有“vshost 做什么？”

# artificial-intelligence - 感知器应该如何处理 0 个输入（对于 AND/OR）

> ID：15926994
> 
> 赞同：0
> 
> 时间：2013-04-10T13:18:12.693
> 
> 标签：artificial-intelligence, neural-network

我正在尝试制作一个简单的感知器来执行逻辑与，但我不知道如何解决 0 输入问题。

权重+=错误*学习率*输入

同样当输入为0时，无论错误是什么，权重都不会改变。

还有一个问题，一般来说，在训练感知器时，我可以重复两组的示例（假设一个代表 0，一个代表 1）还是它们需要不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:39:08.900

这是一个有趣且非常重要的见解。这就是为什么你通常应该对神经网络有偏见。

将感知器的决策面想象成如下形式的一条线

y = w*x+b

当您从等式中删除 b（偏差）时，您将只能学习通过 (0, 0) 的线。

# jquery - jQuery：在淡入之前保留图像容器的响应 div 大小

> ID：15926996
> 
> 赞同：6
> 
> 时间：2013-04-10T13:18:22.167
> 
> 标签：jquery, responsive-design, fadein

我有一点 jQuery，它从文件夹中选择一个随机图像，并在每个页面加载时将其淡入到一个 div 中。问题是图像正下方的菜单 div 在图像淡入之前跳入图像的空白区域。

在图像淡入之前让图像 div 保持高度的最佳方法是什么？CSS在图像淡入之前“填充” div？或者在随机图像淡入之前加载空白.jpg？（所有随机图像的大小相同，1000 像素宽 x 250 像素高）。

*我需要保留设计的响应能力*，因此最好的解决方案可能是预加载空白 jpg 然后淡入随机图像。

为简单起见，我没有包含图像和标题数组，但此函数使用 .randomheader 类输出图像：

**jQuery：**

```
 <script>
    $(document).ready(function(){
     $('.randomheader').randomImage();
    });
    </script>

<script>
(function($){

    $.randomImage = {
        defaults: {

            path: '/fullpathhere/headerimages/',

            myImages: ['image1.jpg' , 'image2.jpg' , 'image3.jpg'],

            myCaptions: ['Caption 1' , 'Caption 2' , 'Caption 3']    
        }           
    }

    $.fn.extend({
        randomImage:function(config) {
            var config = $.extend({}, $.randomImage.defaults, config); 

            return this.each(function() {
                var imageNames = config.myImages;
                var imageCaptions = config.myCaptions;
                var imageNamesSize = imageNames.length;
                var randomNumber = Math.floor(Math.random()*imageNamesSize);
                var displayImage = imageNames[randomNumber];
                var displayCaption = imageCaptions[randomNumber];
                var fullPath = config.path + displayImage;

                // Load the random image
                $(this).attr( { src: fullPath, alt: displayImage }).fadeIn('slow');

                // Load the caption
                $('#caption').html(displayCaption).fadeIn('slow');
            });
        }
    }); 
    </script> 
```

**HTML：**

```
 <header id="masthead" class="site-header" role="banner">

    <!-- random image loads in the div below -->
    <img src="" class="randomheader" width="1000" height="250" alt="header image">
    <div id="caption"></div>

   <!-- The nav div below jumps up into the div above -->
   <nav id="site-navigation" class="main-navigation" role="navigation">
       // nav here
   </nav> 
```

**CSS：**

```
.randomheader {
    margin-top: 24px;
    margin-top: 1.714285714rem;
}

img.randomheader {
    max-width: 100%;
    height: auto; 
    display: none;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T17:38:23.060

@apaul34208 几乎一针见血……我根据相同的原理为您创建了一个示例，因此您可以看到它的工作原理。

**HTML：**

```
<header id="masthead" class="site-header" role="banner">
  <div class="randomheader">
    <div class="image"><img src="" /></div>
    <span class="caption"></span>
  </div>

  <nav id="site-navigation" class="main-navigation" role="navigation">
    nav here
  </nav>
</header> 
```

**CSS：**

```
.randomheader .image {
  position: relative;
  height: 0;

  /* 
  This percentage needs to be calculated
  using the aspect ratio of your image.
  Type your image width and height in this tool
  to get the aspect ration of your image:
  http://andrew.hedges.name/experiments/aspect_ratio/

  In this example the Google logo was 55:19 and 
  to get the percentage you divide 19 by 55 = 0.3454
  */
  padding-bottom: 34.54%;
}

.randomheader img {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%; 
}

.randomheader .caption {
  display: block;
  min-height: 1em;
}

.randomheader img,
.randomheader .caption {
  opacity: 0;
} 
```

**jQuery：**

```
(function($) {

  $.fn.extend({

    randomImage: function(config) {
      var defaults = {},
          config = $.extend({}, defaults, config); 

      return this.each(function() {
        var randNum = Math.floor(Math.random()*config.myImages.length),
            image = config.myImages[randNum],
            caption = config.myCaptions[randNum],
            path = config.path + image,
            $container = $(this),
            $image = $container.find('img'),
            $caption = $container.find('.caption');

        // preload image before adding 
        // to DOM and fading it in
        $image.attr({
          src: path,
          alt: image
        }).load(function() {
          $caption.html(caption);
          $image.add($caption).animate({ opacity: 1 }, 'slow');
        });
      });
    }

  });

}(jQuery));

// on DOM ready, 
// start 'er up
jQuery(function($) {
  $('.randomheader').randomImage({
    myImages: ['logo4w.png'],
    myCaptions: ['Google logo'],
    path: 'https://www.google.co.uk/images/srpr/'
  });
}); 
```

**[JSFiddle 演示](http://jsfiddle.net/setEG/2/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T13:56:03.057

我制作的[jsfiddle](http://jsfiddle.net/585xc/2/)展示了如何做到这一点。您在图像上添加的`display:none`样式实际上是从 DOM 中删除元素，而不仅仅是隐藏它。所以酒吧跳了起来，因为在通话`nav`之前实际上“什么都没有” 。`fadeIn`

您仍然可以隐藏图像，但您需要将其替换为具有相同高度的空白元素，或者将其放入 jsfiddle 中的容器中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-15T00:45:31.883

当我的幻灯片加载时，我的内容跳下时遇到了类似的问题。

这就是我发现的[- jsFiddle](http://jsfiddle.net/apaul34208/f9BmY/)

html

```
<div id="Container">
<div id="box"></div>
<div id="element"> <!-- add content here --> </div>
</div> 
```

css

```
#Container {
display: inline-block;
position: relative;
width: 100%;
}

#box {
padding-top: 25%;
/* adjust % for height */
}

#element {
position: absolute;
top: 0;
bottom: 0;
left: 0;
right: 0;
background:red; /* added for visibility */
} 
```

它是一个很好的流体占位符。只需使用百分比即可获得所需的大小。

我第一次在 SO 的某个地方看到这种方法，但我认为它是对此的改编——http [://ansciath.tumblr.com/post/7347495869/css-aspect-ratio](http://ansciath.tumblr.com/post/7347495869/css-aspect-ratio)

# sql-server - SQL Server 登录名的命名限制？

> ID：15926998
> 
> 赞同：3
> 
> 时间：2013-04-10T13:18:31.190
> 
> 标签：sql-server, login, sql-server-2008-r2

我正在开发一个使用 SQL Server 作为后端的旧版应用程序。

该应用程序也创建了 SQL Server 登录，在我发现这个检查的代码中：

1）（Sql server）登录名不能为空

2）它不能由单个字符组成

3) 它不能以数字开头（例如 '1test' 不是一个允许的名称）

我没有找到相应的文档。这些可能是旧版本的限制吗？我目前只支持2008R2。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:59:12.187

可能最初编写应用程序的开发人员试图以非 100% 匹配的方式坚持标识符的命名约定 ( [http://msdn.microsoft.com/library/ms175874.aspx](http://msdn.microsoft.com/library/ms175874.aspx) )。

这只是一个假设，当处理别人编写的遗留代码时，需要问自己“他为什么这样做？” 主要是“他为什么不写一个简短的评论？”