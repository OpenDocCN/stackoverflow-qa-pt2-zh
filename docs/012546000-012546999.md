# StackOverflow 问答 12546000-12546999

# kendo-ui - Kendo MVC 网格数据注释

> ID：12546000
> 
> 赞同：0
> 
> 时间：2012-09-22T17:17:55.260
> 
> 标签：kendo-ui

我有一个使用 Telerik Grids 的解决方案，我们选择升级到 Kendo。

但是现在，Kendo 在验证时似乎不尊重行的模型数据注释，如Required、Regular Expressions 等。

任何人都可以解释这是他们的工作方式还是我自己的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T22:56:30.463

基本上，数据注释属性的工作方式应该与它们与旧 MVC 扩展一起工作的方式相同。选择这个项目并尝试一下。

[http://www.kendoui.c​​om/code-library/mvc/grid/custom-popup-editor.aspx](http://www.kendoui.com/code-library/mvc/grid/custom-popup-editor.aspx)

# c# - 为 GroupControl 中的所有控件创建一个仅 foreach 循环

> ID：12546006
> 
> 赞同：0
> 
> 时间：2012-09-22T17:18:54.287
> 
> 标签：c#, winforms, devexpress

我有一个包含 GroupControl 的表单，在这个 GroupControl 中有一些控件。

我希望当我单击一个按钮以将这些控件的属性更改为`control.Properties.ReadOnly = false;`

所以我创建了这段代码：

```
 foreach (TextEdit te in InformationsGroupControl.Controls)
      {
           te.Properties.ReadOnly = false;
      }

      foreach (TextEdit te in InformationsGroupControl.Controls)
      {
           te.Properties.ReadOnly = false;
      }
      foreach (DateEdit de in InformationsGroupControl.Controls)
      {
           de.Properties.ReadOnly = false;
      }
      foreach (ComboBoxEdit cbe in InformationsGroupControl.Controls)
      {
           cbe.Properties.ReadOnly = false;
      }
      foreach (MemoEdit me in InformationsGroupControl.Controls)
      {
           me.Properties.ReadOnly = false;
      }
      foreach (CheckEdit ce in InformationsGroupControl.Controls)
      {
           ce.Properties.ReadOnly = false;
      } 
```

这行得通，但我必须为每个控件创建一个 foreach 循环。

我也试过这个

```
foreach (Control control in InformationsGroupControl.Controls)
{
    control.Properties.ReadOnly = false;
} 
```

但 System.Windows.Forms.Control 不包含“属性”的定义

**如何为 GroupControl 中的所有控件创建一个仅 foreach 循环？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T17:31:22.463

看起来您正在使用一组都派生自同一个 BaseClass 的控件。那是BaseClass，BaseEdit吗？

如果是这样，请这样做...

```
foreach(object control in InformationsGroupControl.Controls)
{
    BaseEdit editableControl = control as BaseEdit;
    if(editableControl != null)
        editableControl.Properties.ReadOnly = false;
} 
```

我从这个链接做出这个猜测（它有你正在使用的控件）。 [http://documentation.devexpress.com/#WindowsForms/DevExpressXtraEditorsBaseEditMembersTopicAll](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraEditorsBaseEditMembersTopicAll)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T18:05:18.573

我更喜欢基类方法。但是既然你说只有少数类型需要'ReadOnly = false'，你可以做这样的事情

```
foreach (Control c in InformationsGroupControl.Controls)
{
   if(c is TextEdit || c is DateEdit || c is ComboBoxEdit || c is MemoEdit || c is CheckEdit)
       (c as BaseEdit).Properties.ReadOnly = false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:10:49.377

包括linq。

使用以下代码：

```
foreach (var edit in InformationsGroupControl.Controls.OfType<BaseEdit>())
{
    edit.Properties.ReadOnly = false;
} 
```

# php - “open_basedir 限制生效”但文件位于正确的目录中

> ID：12546012
> 
> 赞同：3
> 
> 时间：2012-09-22T17:19:54.193
> 
> 标签：php, iis, plesk

我正在尝试将一些站点移动到新服务器（运行 Plesk 11）并且我收到以下错误：

> 警告：file_exists() [function.file-exists]：open_basedir 限制生效。文件（configuration.php）不在允许的路径内：（C:\Inetpub\vhosts\domain.com\domains\domain.com\www\;C:\Windows\Temp）在 C:\Inetpub\ vhosts\domain.com\domains\domain.com\www\index.php 在第 18 行

但是`configuration.php`文件在`C:\Inetpub\vhosts\domain.com\domains\domain.com\www\`！

我在这里几乎要疯了，因为这对我来说完全没有意义。
我什至可以将`open_basedir`值设置为`none`并仍然得到相同的错误。
使用 PHP 5.2 或 5.3 也是如此。

唯一让我更进一步的是在第 18 行`dirname(__FILE__)`的调用前设置 a `index.php`，但这不是解决方案，因为我无法更改整个 CMS 中的所有文件引用。因此，我还尝试将`www`文件夹添加到包含路径，但没有任何运气。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T08:32:58.130

`open_basedir`AFAIK在 Windows上禁用 Plesk 时出现问题。尝试`open_basedir`从注册表中删除密钥

```
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\PHP\Per Directory Values\C\Inetpub\vhosts\yourdomain.com\httpdocs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-29T17:33:00.073

`echo get_current_user();`对于 IIS，在我将 IUSR（或运行时用户服务器显示的任何内容）添加到`Windows\Temp`安全选项卡之前，我已经崩溃了 。

授予该用户 [ `read`] / [ `write`] 权限`Windows\Temp`，它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T19:35:07.973

您的 php 安装有问题，请在 windows 下检查 php.ini 的正确值：http: [//php.net/manual/en/install.windows.iis7.php#example-42](http://php.net/manual/en/install.windows.iis7.php#example-42)

如果它们是正确的，您应该联系 Plesk 支持

# javascript - 仅更改树结构根节点的大小

> ID：12546023
> 
> 赞同：0
> 
> 时间：2012-09-22T17:20:56.000
> 
> 标签：javascript, d3.js, tree-structure

我正在使用此处找到的代码：http: [//bl.ocks.org/1249394](http://bl.ocks.org/1249394)用于此树形图。

如何仅更改根节点的大小？我希望根节点的大小与所有子节点的大小不同。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T19:03:49.963

基本上，您需要一个可以用来区分节点的属性。看起来有一个现有的父属性可用于确定 a 何时`node`是`root`. 因此，如果节点没有父节点（即它是根节点），您只需要更改附加函数来修改圆的半径。

```
nodeEnter.append("svg:circle")
  .attr("r", function(d) { return !d.parent ? 8.5 : 4.5; })
  .style("fill", function(d) { return d._children ? "lightsteelblue" : "#fff"; })
  .on("click", click); 
```

[您可以在http://bl.ocks.org/3767443](http://bl.ocks.org/3767443)看到一个工作示例。

一般来说，如果你想修改特定的节点，你可以向你想要不同的节点添加一个新属性，如下所示：

```
{
    "name": "MAT",
    "root": true,
    "children": [
        { ... } ... 
    ]
} 
```

然后，您可以使用此属性在添加节点时对其进行修改（这里我正在修改圆圈，但您可以对添加的文本执行相同的操作）。请注意，我现在不是将圆的大小硬编码为 4.5，而是使用该`root`属性来使根节点更大。

```
nodeEnter.append("svg:circle")
    .attr("r", function(d) { return d.root ? 8 : 4.5; })
    .style("fill", function(d) { return d._children ? "lightsteelblue" : "#fff"; })
    .class(function(d) { return d.root ? 'root-node' : 'normal-node'; })
    .on("click", click); 
```

如果你还像我上面那样设置类，那么你可以使用 CSS 来设置你的根节点的样式：

```
.root-node {
  cursor: pointer;
  fill: #fff;
  stroke: green;
  stroke-width: 3.5px;
} 
```

# c++ - QFileDialog::getSaveFileName 和默认 selectedFilter

> ID：12546031
> 
> 赞同：7
> 
> 时间：2012-09-22T17:22:23.623
> 
> 标签：c++, linux, qt

我有一些带有一些过滤器的 getSaveFileName，我希望在用户打开“保存”对话框时选择其中一个。Qt 文档说明如下：

> 可以通过将 selectedFilter 设置为所需的值来选择默认过滤器。

我尝试以下变体：

```
QString selFilter="All files (*.*)";
QFileDialog::getSaveFileName(this,"Save file",QDir::currentPath(),
    "Text files (*.txt);;All files (*.*)",&selFilter); 
```

但是当对话框出现时，“文本文件”过滤器（通常是列表中的第一个过滤器）被选中。我还尝试了以下所有方法：

```
selFilter="All files";
selFilter="All files (*.*)\n";
selFilter="All files (*.*);;";
selFilter="All files (*.*)\0"; 
```

以及这种变体的不同混合物。我的代码中过滤器列表的格式是根据文档完成的（来自 Qt 文档的示例行）：

```
"Images (*.png *.xpm *.jpg);;Text files (*.txt);;XML files (*.xml)" 
```

请注意，selFilter 变量的输出正常工作：用户按 OK 后，selFilter 变量包含用户选择的过滤器。

平台：Linux(OpenSUSE 12.1)、Qt 4.7.4、gcc 4.6.2。

那么如何设置默认过滤器呢？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T08:54:08.797

您可以尝试此示例应用程序并验证它是否有任何不同。当您在这种情况下使用直接对话构造时，您可以更好地控制对象。

```
#include <QApplication>
#include <QFileDialog>

int main(int argc, char **argv)
{
    QApplication app(argc,argv);

    QString filters("Music files (*.mp3);;Text files (*.txt);;All files (*.*)");
    QString defaultFilter("Text files (*.txt)");

    /* Static method approach */
    QFileDialog::getSaveFileName(0, "Save file", QDir::currentPath(),
        filters, &defaultFilter);

    /* Direct object construction approach */
    QFileDialog fileDialog(0, "Save file", QDir::currentPath(), filters);
    fileDialog.selectNameFilter(defaultFilter);
    fileDialog.exec();

    return 0;
} 
```

通常这种行为是内存损坏的标志。但是，我已经使用 valgrind（我有 Qt 4.8.1）进行了检查，并且 FontConfig 只有一些误报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T07:28:38.033

问题部分解决了，这似乎是我的 Qt 版本（4.7.4）中的一个错误。

我编写了以下示例应用程序：

```
#include <QApplication>
#include <QFileDialog>

int main(int argc, char **argv)
{
        QApplication app(argc,argv);

        QFileDialog::getSaveFileName(0,"Save file",QDir::currentPath(),
        "Music files (*.mp3);;Text files (*.txt);;All files (*.*)",
            new QString("Text files (*.txt)"));
        return 0;
} 
```

并为 3 个不同的平台编译它：

1.  Linux(OpenSUSE 12.1)、Qt 4.7.4、gcc 4.6.2
2.  Linux(CentOS)、Qt 4.7.3、gcc 4.1.2
3.  微软视窗，Qt 4.8.1，gcc 4.4.0

在第一个平台上，对话框中的默认过滤器是“音乐文件”，但在第二个和第三个平台上，它是“文本文件”，正如它的意思一样。

# ruby-on-rails - 一个控制器没有使用我的 CSS 和 HTML 结构，但其他控制器是

> ID：12546035
> 
> 赞同：1
> 
> 时间：2012-09-22T17:22:47.150
> 
> 标签：ruby-on-rails

我的文章控制器的所有表单（新的和显示的）都忽略了布局（article.html.erb），而我的所有其他控制器（例如列表）都在应用布局（lists.html.erb）。

我已经在我的 CSS 旁边实现了 SASS，目前我在 /assets/stylesheets/style.css.scss 中定义了我的所有 CSS。

我可以对 CSS 和 HTML 结构进行更改，它们会立即应用于我的应用程序。

我正在使用开发环境并运行 ruby​​ 1.9.3p125 和 rails 3.2.1。

谁能建议为什么会这样？

Lists 控制器的 HTML 布局是...

```
<!DOCTYPE html>
<html>
<head>
  <title>Inspire</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>
    <div id="home_container">
      <div id="header">
        <div id="home_user-space">
          <% if current_user %>
              <%= image_tag avatar_url(current_user), :class =>'floatleft' %>
              <%= link_to current_user.name.capitalize,user_path(:id =>current_user.name), :class =>'user-name' %>
          <% end %>
        </div>
      </div>
      <div id="navigation">
        <%= render 'layouts/navigation' %>
        <ul>
          <li><%= link_to "Log out", signout_path %></li>
          <li><%=  link_to "Your home page", home_path(:id => current_user.name), :class => 'user-name' %></li>
        </ul>

      </div>
      <div id="home_content-container">
        <div id="home_left-side">
          <%= render 'layouts/home_left_side' %>
        </div>
        <div id="home_content">
          <%= yield %>
        </div>
        <div id="home_right-side">
          <%= render 'layouts/home_right_side' %>
        </div>
      </div>
      <div id="footer">
        <%= render 'layouts/footer' %>
      </div>
    </div>
</body>
</html> 
```

我的文章控制器的布局是......

```
<!DOCTYPE html>
<html>
<head>
  <title>Inspire</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>
<div id="home_container">
  <div id="header">
    <div id="home_user-space">
      <% if current_user %>
          <%= image_tag avatar_url(current_user), :class =>'floatleft' %>
          <%= link_to current_user.name.capitalize,user_path(:id =>current_user.name), :class =>'user-name' %>
      <% end %>

    </div>
  </div>
  <div id="navigation">
    <%= render 'layouts/navigation' %>
    <ul>
      <li><%= link_to "Log out", signout_path %></li>
    </ul>
  </div>
  <div id="home_content-container">
    <div id="home_left-side">
      <%= render 'layouts/home_left_side' %>
    </div>
    <div id="home_content">
      <%= yield %>
    </div>
    <div id="home_right-side">
      <%= render 'layouts/home_right_side' %>
    </div>
  </div>
  <!--todo what about the footer-->
  <div id="footer">
    <%= render :partial => 'layouts/footer' %>
  </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:48:39.640

在您的文章控制器中确保您拥有：

```
# app/controllers/articles_controller.rb
class ArticlesController < ApplicationController
  layout "article"
  #...
end 
```

只是一个观察，但除了一些空白之外，您的两个布局是相同的。为什么？复制/粘贴错误？如果没有，这就引出了一个问题：你怎么知道文章布局没有被使用？您可以查阅您的开发服务器日志以查看正在使用的布局。

另外，也许您已经设置了资产管道来编译开发中的资产？还是跑`bundle exec rake assets:precompile`？如果您有，请删除编译目录`/public/stylesheets/compiled`，进行更改，然后在浏览器中刷新您的应用程序。

如果您的布局基本相同，您可能希望[利用嵌套布局](http://guides.rubyonrails.org/layouts_and_rendering.html#using-nested-layouts)。它们允许您简单地定义一个布局`app/views/layouts/application.html.erb`，并根据控制器或操作的需要替换其中的一小部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T17:28:33.870

您基本上是自己给出解决方案：您说对于 List 控制器，布局文件是`lists.html.erb`（复数）但对于 Article 控制器是`article.html.erb`（单数）

命名很重要:)

希望有帮助。

# c++ - 为什么调用 istream::tellg() 会影响我的程序的行为？

> ID：12546036
> 
> 赞同：4
> 
> 时间：2012-09-22T17:22:51.210
> 
> 标签：c++, fstream, bmp, file-handling, grayscale

我正在尝试将 24 位位图图像转换为灰度。

```
#include<iostream>
#include<fstream>
#include<conio.h>
#include<stdio.h>
using namespace std;
class pixel{
            public:
                   unsigned char b;
                   unsigned char g;
                   unsigned char r;
            void display()
            {
                 cout<<r<<" "<<g<<" "<<b<<" ";
                 }
      }p1;
using namespace std;
int main(){
    unsigned char avg;
    fstream file("image.bmp",ios::binary|ios::in|ios::out);

    int start;
    file.seekg(10);
    file.read((char*)&start,4);

    file.seekg(start);
    int i=0;
   while(!file.eof()){
                      cout<<file.tellg();//Remove this and the program doesn't work!
                     file.read((char*)&p1,3);
                     avg=(p1.b+p1.g+p1.r)/3;
                     p1.b=avg;
                     p1.g=avg;
                     p1.r=avg;
                     file.seekg(-3,ios::cur);
                     file.write((char*)&p1,3);
                       }
    file.close();
    getch();
    return 0;
} 
```

当我删除 cout tellg 语句时，循环只运行两次！

我不明白删除 cout 语句有什么区别？

结果：只有一个像素变为灰度。

我在这里找到了我的问题的一个更简单的版本

[同时读取和写入文件？](https://stackoverflow.com/questions/2797125/reading-and-writing-to-files-simultaneously)

但是没有找到解决办法...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T17:48:32.087

在阅读和写作时，`std::fstream`您需要在阅读和写作之间切换时进行搜索。原因是文件流共享一个共同的输入和输出位置。为了还支持有效的缓冲，有必要将当前位置通知给相应的其他缓冲区。这是搜索功能的一部分。`tellg()`寻找当前位置。

请注意，在读取和写入之间切换是非常低效的，尤其是在实现得到很好优化的情况下。你最好写一个不同的文件或更新合理大小的组中的值。

# c# - Webmatrix 和 JQgrid 中的 C# 剃须刀

> ID：12546037
> 
> 赞同：2
> 
> 时间：2012-09-22T17:22:58.873
> 
> 标签：c#, razor, jqgrid, webmatrix, webmatrix-2

我想知道是否有办法在带有 C# 和 Razor 的 Webmatrix 中使用 JQgrid，而不是使用内置的 WebGrid 助手。

任何指针都非常感谢。

谢谢。

马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T07:23:23.663

是的 - 您可以在 WebMatrix（ASP.NET 网页）站点中使用任何 jQuery 插件。您可以[使用 JSON Helper 为其生成 JSON](http://www.mikesdotnetting.com/Article/160/WebMatrix-Working-With-The-JSON-Helper)，然后按照 jqGrid 站点上的一些演示进行操作。

# solr - 在我现有的 java 应用程序中使用 solr

> ID：12546038
> 
> 赞同：1
> 
> 时间：2012-09-22T17:23:02.080
> 
> 标签：solr

我需要将 solr 集成到我现有的 java 应用程序中。

在现有的 java 应用程序中使用 solr 的方法是什么？

我们需要 HttpServer 来嵌入 solr 吗？

嵌入 solr 会有性能问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:27:13.960

Solr 已经是一个完整的搜索服务器。将 solr 集成到 Java 应用程序中的最佳方法是使用 http resquests 到独立的 solr 服务器。如何做到这一点有多种可能性。一种是使用 SolrJ。

[http://wiki.apache.org/solr/Solrj](http://wiki.apache.org/solr/Solrj)

# php - 如何将数据库从嵌套排序更新为分层

> ID：12546039
> 
> 赞同：2
> 
> 时间：2012-09-22T17:23:01.850
> 
> 标签：php, jquery, mysql, nested-sortable

我想知道如何根据这种类型的数组更新我的数据库：

```
Array
(
    [0] => Array
        (
            [id] => 58
            [children] => Array
                (
                    [0] => Array
                        (
                            [id] => 62
                            [children] => Array
                                (
                                    [0] => Array
                                        (
                                            [id] => 61
                                        )

                                )

                        )

                )

        )

    [1] => Array
        (
            [id] => 60
            [children] => Array
                (
                    [0] => Array
                        (
                            [id] => 63
                        )

                )

        )

    [2] => Array
        (
            [id] => 0
            [children] => Array
                (
                    [0] => Array
                        (
                            [id] => 59
                        )

                )

        )

) 
```

我尝试了不同的方法，但它没有按应有的方式工作。

这是我保存列表新顺序的函数，我使用`nestedSortable('toHierarchy')`

```
function order()
{
    $list = $_POST['list'];
    foreach ($list as $key => $value) {
        if(is_array($value['children'])) {
            $i=1;
            foreach($value['children'] as $k=>$v) {
                $this->section->edit(array('order' => $i, 'parent_id'=>$value['id']), 
                                     "WHERE `id`=" . $v['id']);
                echo 'parent '.$value['id'].'child->'.$v['id'].' order->'.$i.'<br/>';
                $i++;
            }
        }
        else {
            $this->section->edit(array('order' => $key, 'parent_id'=>0), 
                                 "WHERE `id`=" . $value['id']);
        }
    }
} 
```

但它不适用于超过 2 个级别的列表。

这是我正在使用的 js

```
$('ol.sortable').nestedSortable({
         update : function () {
var orderNew = $(this).nestedSortable('serialize', {startDepthCount: 0});
//alert(orderNew);
        $.ajax({
            type: 'post',
            url: '<?php echo (APP_URL); ?>projects/<?php echo $project_id; ?>/sections/order_list',
            data: {list:orderNew}
            });             
},
            disableNesting: 'no-nest',
            forcePlaceholderSize: true,
            handle: 'div',
            helper: 'clone',
            items: 'li',
            maxLevels: 4,
            opacity: .6,
            placeholder: 'placeholder',
            revert: 250,
            tabSize: 25,
            tolerance: 'move',
            toleranceElement: '> div'
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:03:29.420

您可以实现一个递归函数来处理无限的嵌套级别。但我建议作为使用嵌套排序方法的替代`serialize`方法：

```
$('your_sortable_selector').nestedSortable('serialize'); 
```

这会生成一个平面数组，其中键是**项目 id**，每个键的值是**父 id**。然后，您可以实现一个不太复杂的函数，如下所示：

```
function order()
{
    $list = $_POST['list'];

    // an array to keep the sort order for each level based on the parent id as the key
    $sort = array();
    foreach ($list as $id => $parentId) {
        /* a null value is set for parent id by nested sortable for root level elements
           so you set it to 0 to work in your case (from what I could deduct from your code) */
        $parentId = ($parentId === null) ? 0 : $parentId;

        // init the sort order value to 1 if this element is on a new level
        if (!array_key_exists($parentId, $sort)) {
            $sort[$parentId] = 1;
        }

        $this->section->edit(array('order' => $sort[$parentId], 'parent_id' => $parentId), "WHERE `id`= $id");

        // increment the sort order for this level
        $sort[$parentId]++;
    }
} 
```

这对于任何数量的嵌套级别都应该同样有效。

# cakephp - 验证码在 CakePhp 的登录表单中不起作用

> ID：12546045
> 
> 赞同：1
> 
> 时间：2012-09-22T17:23:45.360
> 
> 标签：cakephp, cakephp-1.3, captcha

我正在使用该代码进行验证码：[https ://github.com/solutudo/cakephp-captcha](https://github.com/solutudo/cakephp-captcha)

这是我`user_controller.php`在登录操作中的代码：

```
 public function login() {
        if (!empty($this->data)
            && !empty($this->Auth->data['User']['username'])
            && !empty($this->Auth->data['User']['password'])) {
            // captcha code
            if ($this->RequestHandler->isPost()) {
                $this->User->setCaptcha($this->Captcha->getCode());
                $this->User->set($this->data);
                if ($this->User->validates()) {
                    // captcha code 
                    $user = $this->User->find('first', array(
                        'conditions' => array(
                            'User.email' => $this->Auth->data['User']['username'],
                            'User.password' => $this->Auth->data['User']['password']),
                        'recursive' => -1
                        ));
                    if (!empty($user) && $this->Auth->login($user)) {
                        if ($this->Auth->autoRedirect) {            
                            $this->redirect($this->Auth->redirect());
                        }
                    } else {
                        $this->Session->setFlash($this->Auth->loginError, $this->Auth->flashElement, array(), 'auth');
                    }
                }
            }
        }
    } 
```

查看用户.ctp

```
 <?php
    echo $this->Form->create(array('action'=>'login'));
    echo $this->Form->input('username');
    echo $this->Form->input('password');
    // captcha code
    echo $this->Html->image('captcha.jpg', array('style' => 'padding: 0.5%;'));
    echo $this->Form->input('captcha');
    // captcha code
    echo $this->Form->end('Login');
    ?> 
```

模型用户.php

```
 <?php
    class User extends AppModel {
        public $actsAs = array(
            'Captcha' => array(
                'field' => 'captcha',
                'error' => 'Captcha code entered invalid'
            )
        );
    }
    ?> 
```

验证码验证和验证码不起作用，无需输入验证码我就可以登录，我在相同控制器的添加功能中使用了相同的代码`user_controller.php`，当时验证码正在工作。

我希望用户在输入正确的验证码后登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:26:09.143

通过阅读代码，您似乎必须在尝试验证之前生成验证码。我在您的代码中看不到您生成验证码的地方。也许您有一条指向`/img/captcha.jpg`生成函数的路线（如在文档中），但我在这里看不到。我也看不到您调用的任何地方`CaptchaComponent::generate()`实际上将验证码保存在会话中。

确保以下内容在您的`routes.php`文件中。

```
Router::connect('/img/captcha.jpg', array('action' => 'captcha')); 
```

并将以下函数放入您的`AppController.php`文件中：

```
// auto-outputs an image
public function captcha()  {
    $this->autoRender = false;
    $this->Captcha->generate();
} 
```

基本上，当您的图像被创建时，它实际上会路由到该函数，该函数创建代码并将其保存在会话中。用户点击提交，您的登录功能会尝试验证。如果无效，则呈现视图并取而代之的是新的验证码。

# ios - 没有使用 CABasicAnimation 的 UIButton 的事件委托

> ID：12546047
> 
> 赞同：0
> 
> 时间：2012-09-22T17:24:18.623
> 
> 标签：ios

我正在设置 UIButton 以垂直方向落在 iPad 屏幕上设置代码类似于

```
CABasicAnimation *theAnimation = [CABasicAnimation animationWithKeyPath:@"transform.translation.y"];
theAnimation.repeatCount=1e100;
theAnimation.autoreverses=NO;
for (UIButton *vbtn in flakesArray) {
    //vbtn.userInteractionEnabled =YES;
    [vbtn addTarget:self 
             action:@selector(aMethodTesting:)
   forControlEvents:UIControlEventTouchUpInside];
    CGPoint p = vbtn.center;
     startypos = p.y;
    NSLog(@"%f",startypos);
     endypos = self.view.frame.size.height;
    p.y = endypos;
    NSLog(@"%f",endypos);
    vbtn.center = p;
    //float timeInterval = ((Float32)(animationDurationMax-animationDurationMin)*(Float32)random()/(Float32)RAND_MAX);
    theAnimation.duration=200;
    theAnimation.fromValue=[NSNumber numberWithFloat:-startypos];
    [vbtn.layer addAnimation:theAnimation forKey:@"transform.translation.y"];
    [self.view addSubview:vbtn];
    [self.view bringSubviewToFront:vbtn]; 
} 
```

但是这段代码不允许我的 UIButton 调用方法 aMethodTesting：有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:33:22.883

1.  您的 aMethodTesting 是否真的将发件人作为参数？如果没有，请删除：
2.  它应该是 UIButton *vbtn （它是一个指针）

请将您的代码格式化为代码，它现在非常不可读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T13:59:42.203

这可能会对您有所帮助，这是对您的代码的编辑。这是单按钮。您可以将其用于多个。

```
CABasicAnimation *theAnimation = [CABasicAnimation    animationWithKeyPath:@"transform.translation.y"];

theAnimation.repeatCount=1e100;
theAnimation.autoreverses=NO;
float startypos = 1.0f;
float endypos=480.0f;
float animationDurationMax = 500.0f;
float animationDurationMin = 50.0f;
UIButton *vbtn = (UIButton *)sender;
//for ( UIButton *vbtn in flakesArray)
{
    vbtn.userInteractionEnabled =YES;
    [vbtn addTarget:self action:@selector(aMethodTesting:) forControlEvents:UIControlEventTouchUpInside];
    CGPoint p = vbtn.center;
    startypos = p.y;
    NSLog(@"%f",startypos);
    endypos = self.view.frame.size.height;
    p.y = endypos;
    NSLog(@"%f",endypos);
    vbtn.center = p;
    float timeInterval = (animationDurationMax-animationDurationMin);//random()/RAND_MAX);
    theAnimation.duration=2;
    theAnimation.fromValue=[NSNumber numberWithFloat:-startypos];
    [vbtn.layer addAnimation:theAnimation forKey:@"transform.translation.y"];
    [self.view addSubview:vbtn];
    [self.view bringSubviewToFront:vbtn];
} 
```

# wpf - 如何合并位于不同文件夹的程序集中的资源字典？

> ID：12546052
> 
> 赞同：1
> 
> 时间：2012-09-22T17:24:34.720
> 
> 标签：wpf

我有一个具有以下文件夹结构的解决方案：

```
Solution 
  MainApplication
    MainWindow.xaml
  SharedResourcesLibrary (Class library project)
    GlobalResources.xaml
  SubFolder
    ControlLibrary (Class library project)
      MyUserControl.xaml 
```

我需要将 GlobalResources.xaml 字典合并到 MainWindow.xaml**和**MyUserControl.xaml 的资源中。

我已使用 MainWindow.xaml 中的以下语法成功地将 GlobalResources.xaml 合并到 MainWindow.xaml 中：

```
<ResourceDictionary Source="/SharedResourcesLibrary;component/GlobalResources.xaml" /> 
```

但是，我无法弄清楚如何将 GlobalResource.xaml 合并到 MyUserControl.xaml 的资源中。我尝试了 Pack URI 语法，如下所示：

```
<ResourceDictionary.MergedDictionaries>
  <ResourceDictionary Source="pack://application:,,,/SharedResourcesLibrary;component/GlobalResources.xaml" />
</ResourceDictionary.MergedDictionaries> 
```

...但这似乎无法正常工作。我在 Visual Studio 2012 xaml 编辑器中收到以下错误消息：

```
An error occurred while finding the resource dictionary "pack://application:,,,/SharedResourcesLibrary;component/GlobalResources.xaml" 
```

将这本字典正确合并的正确方法是什么`MyUserControl`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T00:45:32.800

看来这只是 Visual Studio 2012 中的一个问题。我在 Visual Studio 2010 中打开了我的解决方案，设计器完美地使用了 pack URI 表示法。

# javascript - 将 Google 地图与 ASP.NET 网站集成

> ID：12546053
> 
> 赞同：0
> 
> 时间：2012-09-22T17:24:38.000
> 
> 标签：javascript, asp.net, google-maps-api-3

嗨，是的，我已经与 Google 文档进行了斗争，不，我没有要求任何人为我编写 FoC 应用程序！我在 MSDN 上回答了自己的很多 SQL 论坛，并了解了论坛的工作方式，只是可能问的问题很糟糕。感谢您指出这一点，因为希望它会导致更多的问题得到回答。如前所述，我真的只是希望有人可以发布一些我正在讨论的事情的工作样本，然后我可以修补。到目前为止，我的代码如下，但处于某种状态。将参数传递给 Javascript 不起作用，我什至不知道如何开始让它接受用户与地图的交互作为输入。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>
<!DOCTYPE html>
 <html>
       <head> 
               <meta http-equiv="content-type" content="text/html; charset=UTF-8"/> 
               <title>Calculate Distance</title>
                <script type="text/javascript"    
                             src="http://maps.google.com/maps/api/js?sensor=false"></script>

       </head>
       <body style="font-family: Arial; font-size: 13px; color: red;">
           <form runat="server">
                <div id="map" style="width: 400px; height: 300px;"></div>
                 <script type="text/javascript">
                     var startlocation = document.getElementById('Start').textcontent;
                     var endlocation = document.getElementById('End').textContent;
                     var directionsService = new google.maps.DirectionsService();
                     var directionsDisplay = new google.maps.DirectionsRenderer();
                     var myOptions = 
                         {      zoom:7,      mapTypeId: google.maps.MapTypeId.ROADMAP    }     
                     var map = new google.maps.Map(document.getElementById("map"), myOptions);
                     directionsDisplay.setMap(map);
                     var request = 
                         {        
                             origin:  startlocation,
                             destination: endlocation,
                             travelMode: google.maps.DirectionsTravelMode.DRIVING  
                         }; 
                     directionsService.route(request, function(response, status) { 
                         if (status == google.maps.DirectionsStatus.OK) { 
                             // Display the distance:
                             document.getElementById('Distance').innerHTML += 
                                 response.routes[0].legs[0].distance.value / 1609.344 + " miles";
                             directionsDisplay.setDirections(response);
                         }
                     });

                 </script>
           <asp:Label ID="Distance" runat="server" Text="Distance: "></asp:Label>
           <asp:TextBox ID="Start" runat="server" Text="hedge end"></asp:TextBox>
           <asp:TextBox ID="End" runat="server" Text="fareham"></asp:TextBox>
               <asp:Button ID="CalcDistance" runat="server" Text="Button" />
            </form>
       </body>  

 </html> 
```

我是 javascript 的新手，对 ASP.NET 还是很陌生，而且我已经摆弄了好几天，却无处可去。

我想将 Google 地图集成到 ASP.NET 页面中，以便用户可以选择单击地图上的 2 个点，或者选择将一个或两个地址插入文本框中。

在地图上输入或绘制这两个位置后，我需要将最短行驶距离（以英里为单位）返回给 ASP.NET 控件。

如果有人可以通过发布这个或类似的工作样本来帮助我，我会非常感激。

非常感谢您的帮助。

皮特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:09:51.933

[从本教程开始。](http://www.codeproject.com/Articles/291499/Google-Maps-API-V3-for-ASP-NET)

[文档在这里。](https://developers.google.com/maps/documentation/javascript/tutorial)

[如何计算距离在这里。](http://briancray.com/posts/how-to-calculate-the-distance-between-two-addresses-with-javascript-and-google-maps-api/)

编辑：

这是使用 Google Maps API v3 和 ASP.NET 计算距离的示例。

客户端代码：

```
<!DOCTYPE html>
<html>
<head> 
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/> 
    <title>Calculate Distance</title>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&v=3&libraries=geometry"></script>
    <style type="text/css">
        #map{width:800px;height:500px}
    </style>

</head>

<body style="font-family: Arial; font-size: 13px; color: red;">
<form id="Form1" runat="server">

    <div id="map"></div>

    <input runat="server" type="hidden" id="DistanceValue" name="DistanceValue" />

    <script type="text/javascript">

        var latlng = new google.maps.LatLng(54.40708, 18.667485);
        var latlng2 = new google.maps.LatLng(54.40708, 18.667485);

        var myOptions =
            {
            zoom:4,
            center:latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
            };

        var map= new google.maps.Map(document.getElementById('map'),myOptions);

        var marker = new google.maps.Marker({
            position: latlng,
            title: "Westerplatte - first battle of WW2 in Europe",
            clickable: true, 
            map: map
        });

        var marker2 = new google.maps.Marker({
            position: latlng2,
            title: "Westerplatte - first battle of WW2 in Europe",
            clickable: true,
            map: map
        });

        google.maps.event.addListener(map, "click", function (event) {
            latlng2 = new google.maps.LatLng(event.latLng.lat(), event.latLng.lng());
            marker2.setMap(null);
            marker2 = new google.maps.Marker({
                position: latlng2,
                title: "selected by user",
                clickable: true,
                map: map
            });

            var hidden = document.getElementById("DistanceValue");
            hidden.value = google.maps.geometry.spherical.computeDistanceBetween(latlng, latlng2) / 1000;
        });

    </script>

    <asp:Button  ID="Button1" runat="server" Text="Send distance" onclick="Button1_Click" />

    <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>

</form>
</body>  

</html> 
```

服务器代码：

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        if (Request.Form["DistanceValue"] != null)
        {
            string myHiddenFiledValue = Request.Form["DistanceValue"].ToString();
            Label1.Text = myHiddenFiledValue.Split(',','.')[0] + " [km]";
        }
    } 
```

# callback - Yepnope 回调和完成功能未按需要经常运行

> ID：12546055
> 
> 赞同：1
> 
> 时间：2012-09-22T17:24:44.333
> 
> 标签：callback, yepnope

我正在使用 Yepnope 加载外部 javascript。在这种情况下，基于 angularjs 的应用程序的指令和控制器。我面临的问题是回调函数不会一直触发，而完整的函数通常会触发一次，很少会触发两次以上。

我想我可以通过计算回调的数量并在使用调用最后一个回调函数时调用我的回调函数来解决这个问题，`_.after([no of scripts], myFn)`但这似乎也不是一直都有效。

此外，我必须在某些呼叫工作之前使用 setTimeout。

最后，如果加载了库，回调似乎不会触发。

我正在寻找的是一个函数，每当我调用时都会调用它，`yepnope`而不管发生什么。我认为该`complete`功能是为此而设计的，但我似乎错了。

有没有这样的功能？

如果不是，我该如何获得这种行为？

例如

```
yepnope({ test: window.v1,  complete: function(){...}, callback:...});
ypenope({ test: window.v2,  complete: function(){...}, callback:...});
yepnope([ {test: window.v1, complete: function(){...}, callback:...} ]); 
```

在上述情况下，我如何完成 3 次射击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T01:21:02.387

通过在 yepnope 周围创建一个小包装器解决了这个问题。我正在通过该包装器调用 yepnope，因此我能够跟踪每个调用并在需要时触发完整的函数。

# java - 如何使 JTextArea 不可选择

> ID：12546056
> 
> 赞同：6
> 
> 时间：2012-09-22T17:24:44.777
> 
> 标签：java, swing

我想显示一个描述节点值的文本区域（图形项目），但是每当我选择文本时它就会变得混乱，所以我希望它是不可分割的！这是代码：

```
public class TransparentTextArea extends JTextArea {

String texte;

public TransparentTextArea(String texte) {
    this.setLineWrap(true);
    this.setWrapStyleWord(true);
    this.texte = texte;
    this.setBackground(new Color(255, 0, 9, 0));
    this.setFont(new Font("Serif", Font.ITALIC, 24));
    this.setEditable(false);
    this.setText(texte);
    this.setSize(new Dimension(200,100 ));
  } 
} 
```

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-17T16:36:05.610

这是一个老问题，但对于那些仍然关心的人来说，禁用`JTextArea`它并不是很有帮助，主要是因为前景的灰色。最好的办法是取消荧光笔：

```
setHighlighter(null) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T20:16:22.510

如果您不想`JTextArea`选择，那么最简单的方法就是禁用它：

```
setEnabled(false); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-04T09:22:34.910

首先，我知道这是一个很老的帖子，但我真的不得不回答，因为我有同样的问题并找到了答案，而且给出的答案不是 100%。

Stelios 说我们设置了猫，`setHighlighter(null);`但它仍然是可选的，我们甚至可以复制粘贴。而且没有必要`setEnabled(false);`，尤其是当外观和感觉很糟糕的时候

我找到的答案很简单。

```
jtextPane.setEditable( false );
jtextPane.getCaret().deinstall( jtextPane ); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2016-12-26T16:46:24.807

设置文本区域的文本时，将取消选择所有文本。像这样的东西：

```
Thread t = new Thread(new Runnable() {
    while (true) {
        textArea.setText(textArea.getText());
    }
});
t.start(); 
```

# ios - iOS6 方向

> ID：12546057
> 
> 赞同：2
> 
> 时间：2012-09-22T17:24:50.997
> 
> 标签：ios, orientation, landscape, ios6, portrait

我对 iOS 6 Orientation 有疑问。这是我的文件 [https://www.dropbox.com/s/f8q9tghdutge2nu/Orientations_iOS6.zip](https://www.dropbox.com/s/f8q9tghdutge2nu/Orientations_iOS6.zip)

在这个示例代码中，我想让`MasterViewController`只有一个纵向方向和`DetailViewController`一个纵向方向，横向方向。

我知道 iOS 6 的方向是由最上面的控制器控制的。

所以我`UINavigationController(CustomNavigationController)`在那个类中自定义了一个，设置了supportedInterfaceOrientations 和shouldAutorotate。

```
-(NSUInteger)supportedInterfaceOrientations{
    if([[self topViewController] isKindOfClass:[DetailViewController class]]){
        return UIInterfaceOrientationMaskAllButUpsideDown;
    }else{
        return UIInterfaceOrientationMaskPortrait;
    }
}

-(BOOL)shouldAutorotate
{
    return YES;
} 
```

一切都很好，除了`DetailViewController`在横向方向按下后退按钮时，`MasterViewController`将显示横向方向。

我可以让`MasterViewController`始终显示纵向方向并且`DetailViewController`可以有多个方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:04:05.193

谢谢！Brennan，
我还在我的博客中收集了其他方法来做到这一点。
[http://blog.hanpo.tw/2012/09/ios-60-orientation.html](http://blog.hanpo.tw/2012/09/ios-60-orientation.html)

这是另外两种方式。

**1.添加一个类别到 UINavigationController**

```
 @implementation UINavigationController (Rotation_IOS6)

    -(BOOL)shouldAutorotate
    {
        return [[self.viewControllers lastObject] shouldAutorotate];
    }

    -(NSUInteger)supportedInterfaceOrientations
    {
        return [[self.viewControllers lastObject] supportedInterfaceOrientations];
    }

    - (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
    {
        return [[self.viewControllers lastObject] preferredInterfaceOrientationForPresentation];
    }

    @end 
```

**2.Swap 方法实现（由 spoletto 制作）**

[https://gist.github.com/3725118](https://gist.github.com/3725118)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T01:45:12.977

我按照您在对该问题的评论中的建议完成了这项工作。问题是默认的 UINavigtonController 不使用顶视图控制器的值，因此您需要通过创建一个基类并在 Storyboard 中将其设置为基类来覆盖它。

下面是我使用的代码。

```
- (NSUInteger) supportedInterfaceOrientations {
    return [self.topViewController supportedInterfaceOrientations];
} 
```

我还有一个用于其余视图控制器的基类，以默认使用纵向方向的行为。我可以在支持更多纵向方向的任何视图控制器中覆盖 iOS 5 和 6 的这些方法。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationPortrait;
}

- (BOOL)shouldAutorotate {
    return FALSE;
} 
```

# c# - 绘制位图后形成“滞后”

> ID：12546060
> 
> 赞同：-1
> 
> 时间：2012-09-22T17:24:59.157
> 
> 标签：c#, winforms, bitmap

我有一个相对简单的 Windows 应用程序。它使用大约 15 个控件。

我的构造函数方法如下所示：

```
public Form1()
{
    InitializeComponent();
    this.Paint += this.Teken;
} 
```

我的 Teken 方法（简化）如下所示：

```
private void Teken(object o, PaintEventArgs pea)
{
    if (start)
    {
        if (comboBox1.Text == "Basic")
            Bitmaps.DrawBitmap1(pea.Graphics, bitmapsize, max);
    }
} 
```

我的 DrawBitmap1 方法将每个像素设置为某种颜色，然后使用 Graphics.DrawImage 方法绘制位图。

绘制位图后，控件变得非常滞后，在文本框中选择文本需要一秒钟多的时间。主要形式变得非常缓慢。

我可以理解要慢慢绘制的位图，但我无法理解这一点。

我的问题有简单的解决方案吗？

编辑：

这是 Drawbitmap1 代码：

```
public static void DrawBitmap1(Graphics gr, int bitmapsize, int max)
    {
        Bitmap bitmap1 = new Bitmap(bitmapsize, bitmapsize);

        for (int x = 1; x < bitmapsize; x++)
        {
            for (int y = 1; y < bitmapsize; y++)
            {
                int mandelnumber = CalculateMandel(x,y)

                if (Form1.mandelnumber == max) 
                    bitmap1.SetPixel(x, y, Color.Black);
                else if (Form1.mandelnumber %2 == 0) 
                    bitmap1.SetPixel(x, y, Color.White);
                else 
                    bitmap1.SetPixel(x, y, Color.Black);
            }
        }
        gr.DrawImage(bitmap1, 50, 100);
    } 
```

mandelnumber 是在程序的另一部分计算的变量。

编辑2：

我运行了一个分析器，似乎CalculateMandel() 方法在通过位图的每个像素后并没有停止运行。这怎么可能？

编辑3：

结果当鼠标悬停在文本框或按钮上时，再次调用了 DrawBitmap1 函数。这怎么可能，我没有任何悬停事件，甚至没有 TextChanged 事件..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:53:04.160

您的`DrawBitmap1`方法可能是从源位图到绘图表面支持的位图的某种程度的转换。这可能是不同的颜色密度、不同的位密度等（可能是缩放？）。这通常需要一些额外的时间。

我建议改用`PictureBox`控件。

此外，如果您需要重新绘制要显示的图像，那么我建议只在图像发生变化时进行，而不是在绘制/绘制屏幕时进行 - 这会导致性能下降。例如

```
pictureBox.Image = DrawBitmap1(gr, bitmapSize, max); 
```

如果您要在一秒钟内更改图像超过几次，我建议您不要使用 SetPixel，因为您将永远无法获得可以接受的刷新屏幕的性能。

上漆的问题在于，当疼痛发生时和位图需要改变的时间并不总是相同的。您可以在需要更改位图时刷新表单，但会降低表单所有其他绘制的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T18:11:27.810

每当您的表单重绘时，您都会运行一个非常昂贵的 O(n2) 算法，并且它没有得到很好的优化。

在我看来，您正在做很多只需要执行一次的冗余工作。您的`DrawBitmap1`函数生成三个图像之一（生成一个您甚至从未显示的位图，对吗？）。

您还可以将 if 语句从内部循环中剥离出来，然后创建三个版本。无需多次检查相同的条件，因为它在迭代之间没有变化。

您可以创建每个图像一次并将其缓存。如果再次需要该图像，只需直接从函数中返回它。

最重要的是，GDI+ 中的`GetPixel()`and`SetPixel()`函数非常慢。我的意思是，真的，*真的很*慢。.NET 中的任何真实图像处理都可能在不安全的上下文中使用直接指向内存的指针来完成。调用`Bitmap.LockBits`，它返回一个`BitmapData`对象，并使用`Scan0`属性来检索指向内存缓冲区的指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T21:00:17.997

```
this.Paint += this.Teken; 
```

`Teken`这是错误的，每次您的应用需要重新绘制时，它都会调用您的例程；当您打开窗口、调整窗口大小、更改焦点、移动另一个窗口、获取工具提示、更改分辨率或主题时，几乎无时无刻不在。实际上，唯一`Teken`不调用的时间是何时`CalculateMandel`完成并且您需要显示结果。您从不打电话`Invalidate`，所以当您需要绘制结果时，您永远不会收到警报。

> ...`CalculateMandel()`在通过位图的每个像素后不会停止运行。这怎么可能？

因为您明确告诉它每次 UI 发生任何变化时都重新计算位图中的所有内容；一而再，再而三。除非只有您的位图发生变化，否则您不会告诉它重新绘制。完全落后。这也将锁定您的 UI，因为即使不需要重绘，您也在无用地重新计算位图。

> ...`DrawBitmap1`将鼠标悬停在文本框或按钮上时再次调用函数。这怎么可能，我没有任何悬停事件

但还有别的东西；也许是一个工具提示。并且您已经告诉您的应用程序在`CalculateMandel()`每次应用程序 UI 中的任何内容（位图除外）发生更改时调用。

问题是你有两件完全不同的事情正在发生；当某些事情发生变化时，您的应用程序需要重新绘制 UI，并且您有一个计算 ( `CalculateMandel()`) 想要在完成后更新 UI。这些是单独的事件，您必须单独处理它们。

首先，摆脱`this.Paint += this.Teken;`; 这会导致您的问题，并且不会做您想做的事情。

其次，创建一个在其事件`BackgroundWorker`中调用的事件，并在您的事件中返回完成的位图，然后调用以重绘新数据。`CalculateMandel()``DoWork``ProgressChanged``yourWindowOrPanelOrWhatever.Invalidate()`

# ios - RubyMotion 自定义 UITableViewCell 与 nib

> ID：12546061
> 
> 赞同：0
> 
> 时间：2012-09-22T17:25:00.957
> 
> 标签：ios, rubymotion

我需要一些关于如何通过继承 UITableViewCell 为我的 RubyMotion 应用程序创建自定义表格单元格的指导。我想知道我的自定义类是否可以加载在 InterfaceBuilder 中创建的 nib 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T03:54:02.390

我也在学习 RubyMotion。您可以尝试按照[本教程中“列出任务”下的步骤 5](https://github.com/mattgreen/nitron/wiki/Tutorial)

我知道它使用的是 xcode，感觉它违背了使用 RubyMotion 的目的，但也许你可以尝试一下。

还要检查[MotionTable](https://github.com/clearsightstudio/motion-table)和[Motion IB 支持](https://github.com/yury/ib)。

# asp.net - 如何在asp.net mvc的动态虚拟视图中使用模型验证/数据注释

> ID：12546062
> 
> 赞同：0
> 
> 时间：2012-09-22T17:25:00.227
> 
> 标签：asp.net, asp.net-mvc, razor, data-annotations, validationattribute

我发现了一些关于如何使用自定义虚拟路径提供程序创建动态虚拟视图的帖子。这是[帖子](https://stackoverflow.com/questions/4218454/asp-net-mvc-load-razor-view-from-database)

但我想知道如何在该虚拟视图中实现数据注释。

或者在虚拟视图上进行验证的最佳模式是什么？

编辑1：实际上，我的问题是不完整的。我想做一些类似 CMS 的事情。视图将是动态的，其中的内容也是如此。但是他们会调用相同的 ViewController 函数，处理验证的最佳方法是什么？是否可以根据动态内容生成数据注释？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T19:23:07.430

它与将视图用作文件没有任何不同。您对视图本身使用相同的确切代码。只是视图是从数据库而不是文件中提取的。

# jquery - 遍历具有不同索引的表单元素名称数组

> ID：12546064
> 
> 赞同：1
> 
> 时间：2012-09-22T17:25:17.977
> 
> 标签：jquery, html, forms, dom, html-input

嘿伙计们希望你能帮助我

我有一个表单，其中包含动态数量的特定输入字段，其数组名称具有唯一但随机的索引。

现在我想遍历这些字段，但是在获取它们、遍历它们等方面遇到了麻烦。

即有这样的东西

```
<input type='text' name='resources[2]' />
<input type='text' name='resources[4]' />
<input type='text' name='resources[5]' /> 
```

现在想做一些类似“对于每个带有 name=resources 的输入，用它的值和索引号做一些事情”。

哦，我正在尝试用 jquery 来做到这一点....

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T17:27:46.030

您可以使用通配符来匹配选择器中的模式，在这里您可以使用 ^（用于开头），您可以**[在此处阅读有关通配符的更多信息](http://www.thewebgoodies.com/2010/12/24/jquery-wildcard-selectors-complete/)**

**[现场演示](http://jsbin.com/osizak/1/edit)**

```
$('input[name^=resources]').each(function(){
    alert( $(this).val());
}) 
```

# forms - 以 PDF 形式显示服务器答案

> ID：12546066
> 
> 赞同：0
> 
> 时间：2012-09-22T17:25:35.937
> 
> 标签：forms, perl, pdf, cgi

我有一个 PDF 表单，它使用 Perl 编写的 CGI 脚本将信息提交到 Apache 服务器：

```
var doc = event.target;

var x = doc.submitForm({
        cURL: "http:",
        cSubmitAs: "XML" 
        }); 
```

CGI 能够读取信息并将其保存在文件中，但我想重新提交`x`对 PDF 中变量的引用代码，然后让 PDF 在框中显示它。我在 CGI 脚本中使用它：

```
print "Content-type: text/html\n\n";
print "$i"; 
```

但它正在打开一个显示变量内容的新 PDF `$i`。

我不知道问题是否在于以另一种方式指定读取变量的 PDF 代码，或者是否是 CGI 脚本以错误的方式发送值。你可以解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T08:16:39.103

PDF 中的表单提交就像 HTML 中的表单提交一样工作。您向服务器发送请求，服务器以新页面回答，在您的情况下，PDF 格式的原始页面被“text/html”类型的新页面替换（这很奇怪，因为您没有打算将 HTML 发送到浏览器）。

似乎您不想提交表单，但您想提交数据并在同一页面中获得响应。这在 HTML 中是可能的，但在 PDF 中很难实现。我写了一本关于 PDF 的书，这是一个或多或少符合您要求的摘录：http: [//bit.ly/gl1Urw](http://bit.ly/gl1Urw)

在这个例子中，我在 PDF 中嵌入了 JavaScript，它能够通过嵌入 PDF 的 HTML 页面中的 JavaScript 发送消息（反之亦然）。这样，您不会将数据从 PDF 提交到服务器，而是将其传递到 HTML 页面。在 HTML 中，您可以设置与服务器的通信，并将响应发送到 PDF。

如果这不是您的选择（例如，因为您无法更改提交数据的 PDF），则不应使用“text/html”内容进行响应。相反，您应该使用与原始表单相同的新 PDF 文件进行响应，但您在服务器端填写的某些字段除外。

更新：您的问题是基于错误的假设，您可能需要对其进行编辑。

# postgresql - 如何从两个表中获取数据？

> ID：12546067
> 
> 赞同：1
> 
> 时间：2012-08-18T00:47:28.187
> 
> 标签：postgresql, java

我正在使用 Hibernate 和 PostgreSql。在休眠中，我有两个类，例如：

```
Mobile(id, name, serial no,model_no)
Model(id, description, value) 
```

现在 Model 类的值存储在 Mobile 类 (model_no) 中。此 Mobile 类没有对 Model 类的任何引用。

在 Model 类中有如下数据：

```
Modal
======
id description value
1  aaaa        1
2  bbbbb       2
3  ccccc       3
4  ddddd       12
5  eeee        40 
```

这里这个值被存储在 Mobile 表中。在 Mobile 表中，我将 model_no 设为 0（不在 Model 中，我不想将该值放入 M​​odel 表中，因为如果我放入，我需要更改很多代码。

现在我想要一个查询来得到输出

```
value description
----   ------------
0     UNKNOWN
1     aaaa
2     bbbbb
3     ccccc
4     ddddd
5     eeee. 
```

像这样。要获得所有`model_nos`我可以使用的查询

```
select modal_no from Mobile 
where modal_no in(select value from Modal) or model_no = 0 
```

但这里我的描述也在模型表中。有人可以帮忙吗？

* * *

谢谢你的回复，正如我提到的这个移动表（Hibernate Mobile 类）**没有参考模型表**（在休眠模型类中）。如果我在 Mobile 类中提到了 Model，那么您的答案将是 100% 正确的。在我的 Mobile 类中，这个 model_no 是整数值。如果我在 hql 中使用您的查询，我将收到“预期路径”之类的异常。我希望 Hql（或 sql）查询以 0 值获取输出。我的休眠移动类是这样的

```
 class Mobile { 
   int id;   
   int model_no; // this model_no has 0 + modal_no values(1,2,3,12,42). 
   // some references like 
   Manufacture manf; 
   SerialNo serialno;
   Customer cust; 

  getters and setters 
} 
```

我的休眠模型类就像......

```
class Model{
   int id;
   String description;
   int value; this column has 1,2,3,12,42\. it don't have 0.

   setters and getters.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T05:26:00.883

A`left join`会做到这一点：

```
select  Mobile.modal_no 
,       Modal.description
from    Mobile 
left join    
        Modal
on      Mobile.model_no = Modal.value 
```

# android - android如何处理静态类？

> ID：12546069
> 
> 赞同：0
> 
> 时间：2012-09-22T17:25:41.797
> 
> 标签：android

我有一个具有以下架构的类：

```
public class StaticClass{
    private static LruCache<Obj> list = new LruCache<Obj>();

    public static LruCache<Obj> getList(){
           return list;
    }
} 
```

现在，对这个列表的引用仅用于简单的活动。但是，一个活动会启动一个服务，即使在每个活动关闭后，该服务仍将继续存在。鉴于服务存在于进程中，对静态列表的引用是否继续存在？我问这个是因为我的服务占用了大量内存，而且我确信内存应该更少，而且当我再次打开应用程序时，我发现一切都快得多（lru 缓存用于位图缓存），所以我'd猜测静态继续存在..

**编辑：** 真的很奇怪！如果我使静态引用无效，然后重新打开应用程序，我会从我的游标适配器中得到一个空指针异常！事实上，游标适配器代码是这样的：

```
public MyAdapter(){
     cache = StaticClass.getCache();
}

public void bindView(View view, Context context, Cursor c) {
     cache.get(...) //this throws null pointer exception 
```

所以我唯一能想到的是适配器是我的主要活动没有关闭......但它是： onDestroy() 被调用：我检查了它！而且我的服务根本没有引用适配器！

# google-app-engine - 谷歌应用引擎是否支持 apache poi？

> ID：12546070
> 
> 赞同：2
> 
> 时间：2012-09-22T17:25:43.030
> 
> 标签：google-app-engine

我有一个项目需要阅读microsoft office word 的内容。我的问题是：谷歌应用引擎是否支持 apache poi？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T08:57:27.227

我在 Apache POI 以及在 GAE 上阅读和编写 powerpoint 演示文稿方面取得了成功。重要的是要避免在 POI 中调用安全受限的 java.awt 类。为了从文档中读取内容，避免使用 java.awt 文件，所以应该没问题。要将内容写入文档，这是您必须小心的地方。我使用预定义的模板并直接调整文本和字体。这避免了 java.awt 调用。如果您尝试使用现有文档作为模板创建新的 PPT 文档（如 POI 示例中所示），由于 java.awt 调用和 GAE 禁止它们，这将失败。您的里程可能会因使用 Word 文档而有所不同，因为我认为图形库调用较少。

您可能会在使用 Word 2010 等新的文档格式时遇到困难，显然您必须使用 URLfetch / Google Cloud Storage / Blobstore 来处理文件。GAE 不支持本机文件访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T10:11:44.913

[如何在谷歌应用引擎上读取excel文件](https://stackoverflow.com/questions/3202009/how-to-read-an-excel-file-on-google-app-engine)

[http://web.archive.org/web/20100910011509/http://www.z80.fr/2010/03/30/google-app-engine/how-to-generate-excel-files-on-google-应用引擎/](http://web.archive.org/web/20100910011509/http://www.z80.fr/2010/03/30/google-app-engine/how-to-generate-excel-files-on-google-app-engine/)

似乎有些人通过解决出现的依赖错误来使 poi 在 gae 上工作，但是根据第二个 link.gl，三种方式也是 orher 方式

# java - 为什么 DrJava 返回静态错误？

> ID：12546071
> 
> 赞同：2
> 
> 时间：2012-09-22T17:25:46.410
> 
> 标签：java, oop, class, static, undefined

我使用 dr java for linux 来运行我的代码。我最近在运行这个简单的程序时遇到了一堆错误。代码编译得很好，但是每当我运行 java 文件时，我都会收到错误消息；静态错误：未定义的名称这是我的代码；（我有两个文件，Square.java 和 SquareD.java）这里是 Square.java

```
public class Square{
    private String name;
    private int y;
    private int x;

    public Square(String st,int x2,int y2){
        name=st;
        x=x2;
        y=y2;
    }

    public int square(){
        return x*x+y*y;
    }

    double a1=(double) x;
    double a2=(double) y;

    public double hypotenuse(double a1,double a2){
        double sum = a1*a1+a2*a2;
        return Math.sqrt(sum);
    }

    public int area(){
        return x*y;
    }

    public String getName(){
        return name;
    }
} 
```

这是 SquareD.java；

```
public class Square{
    private String name;
    private int y;
    private int x;

    public Square(String st,int x2,int y2){
        name=st;
        x=x2;
        y=y2;
    }

    public int square(){
        return x*x+y*y;
    }

    double a1=(double) x;
    double a2=(double) y;

    public double hypotenuse(double a1,double a2){
        double sum = a1*a1+a2*a2;
        return Math.sqrt(sum);
    }

    public int area(){
        return x*y;
    }

    public String getName(){
        return name;
    }
} 
```

无论我在交互窗口中键入`java Square.java`还是`java SquareD.java`在交互窗口中，我都会得到，

> 静态错误：未定义的名称

我正在运行 Ubuntu 11.10

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T17:32:42.947

您不会通过键入来运行课程`java Square.java`，但是`java Square`.

^(*（或者`run Square`，相当于`Run`按下按钮。）*)

但是您仍然需要`main`具有以下签名的方法：

```
public static void main(String[] args) {
    // etc.
} 
```

然后，当您键入`java Square`（假设您已经编译它）时，它将运行`main`.

[![](../Images/8fe2ebc4102446604fe9a6619e5b708f.png)](https://i.stack.imgur.com/PZDio.png)

# java - 为什么我在这个 Infix to Postfix 程序代码上得到 NullPointerException

> ID：12546072
> 
> 赞同：0
> 
> 时间：2012-09-22T17:25:48.163
> 
> 标签：java, nullpointerexception, postfix-notation

我需要为 Shutting Yard 算法编写 Java 代码，我收到一个字符串，我将其放入队列并开始评估。我得到了 Node、Stack、Queue 的类，它们应该可以正常工作。我的方法平衡器是这样的......

```
public boolean balancear (Cola infijo) {

    balance=infijo;
    int balanceado=0;
    char parentesis;

    while (!balance.isEmpty()) {

        parentesis=balance.pop();
        if (parentesis=='(')
            balanceado++;
        else if (parentesis==')')
            balanceado--;
    }

    return balanceado==0;
}

package expresionpolaca;
public class Postfijo {

    Pila operadores = new Pila();
    Cola infijo = new Cola ();
    Cola postfijo = new Cola ();
    Herramientas evaluador;
    StringBuilder salida = new StringBuilder();
    int re;

    public Postfijo (String expresion) {

        for (int i = 0; i < expresion.length() ; i++) {
            infijo.push(expresion.charAt(i));

        }

    }

    public String Convertir () {

        evaluador.balancear(infijo);         // I get NullPointerException Right HERE

        if (evaluador.balancear(infijo)) {   // I get NullPointerException Right HERE

            while (!infijo.isEmpty()) {

                char tmp=infijo.pop();
            if (Character.isLetterOrDigit(tmp)) { 
                postfijo.push(tmp);
            }

            else  {
                switch (tmp) {

                case '(':
                    operadores.push(tmp);
                    break;
                case ')':

                    do {
                        tmp=operadores.pop();
                        if (tmp!='(') postfijo.push(tmp);
                    } while(tmp!='(');
                    operadores.pop();
                    break;

                default:
                    if (operadores.sneak()=='(') operadores.push(tmp);
                    else while (evaluador.prioridad(tmp)>evaluador.prioridad(operadores.sneak())||operadores.sneak()!='('||operadores.isEmpty()==false) {
                        postfijo.push(operadores.pop());
                    }
                    break;
                }

            }

        }

        while (!operadores.isEmpty()) postfijo.push(operadores.pop());

    }

    else return "No balanceada";

    while (!postfijo.isEmpty()) {

        salida.append(postfijo.pop());
    }

    return salida.toString();

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T17:28:54.180

你从不初始化`evaluador`，你只声明它。在使用之前将其初始化为适当的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T17:29:59.687

如果`evaluador`是您未在方法中初始化的全局变量，请确保在使用它之前在某处初始化

# php - 我需要在我的联系表中添加必填字段，但不知道该怎么做？

> ID：12546077
> 
> 赞同：0
> 
> 时间：2012-09-22T17:26:16.520
> 
> 标签：php, html, forms, validation

我对 php 很陌生，所以我需要一些帮助，将必填字段添加到我的联系表单中。我想显示一个很好的“错误”消息，告诉查看者在必填字段中输入一些内容。

这是我的 php 脚本：

```
<?php
        if(isset($_POST['submit'])){

            $to = "benlevygraphics@gmail.com";
            $headers = "From: " . $_POST['email'];
            $subject = "Ben, you have been contacted...";
            $body = "Name: " . $_POST['name'] . "\nEmail: " . $_POST['email'] . "\nWebsite: " . $_POST['web'] . "\n" . "\nFavorite Piece of work: " . $_POST['favwork'] . "\n" . "\nMessage: " . $_POST['message'];

            if(mail($to, $subject, $body, $headers)){

            echo("<p class=contactformsent>".$_POST['name'].", your information was received. For your records an email has also been sent to you!</p>");

            }
            else{
               echo("<p class=contactformnotsent>".$_POST['name'].", Message delivery failed...</p>");
            }
       }

               if(isset($_POST['submit'])){

            $to = $_POST['email'];
            $headers = "From: benlevygraphics@gmail.com" ;
            $subject = "You contacted benlevywebdesign";
            $body =  $_POST['name'].",  Thank you for taking a look at my portfolio and contacting me.  I have received your contact information/message and I will get back to you as soon as I can!" . "\n" . "\nFor your records I have:" . "\nEmail: " . $_POST['email'] . "\nWebsite: " . $_POST['web'] . "\n" . "\nFavorite Piece of work: " . $_POST['favwork'] . "\n" . "\nMessage: " . $_POST['message'];

            if(mail($to, $subject, $body, $headers)){
            }
       }

?> 
```

这是html代码：

```
<?php include("contactform.php"); ?>

<form id="form1" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="POST">
<fieldset>
            <p class="form">Name*
                <input type="text" name="name" id="name" size="30"/>
            </p>
            <p class="form">Email*
                <input type="text" name="email" id="email" size="30" />
            </p>...(the rest of the form html code here) 
```

然后是最后几行：

```
 <p class="submit"><button name="submit" type="submit">Send</button></p>

    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:36:11.733

在服务器端，您可以检查：

```
if(isset($_POST['name'])) { } // only send the mail if this is true. 
```

还有许多客户端解决方案。您也可以使用 Javascript 编写自己的代码。由于“客户端安全性不起作用”，您仍然必须在服务器端包含检查。用户可以禁用 Javascript 并在不运行检查的情况下提交表单。

这是一个执行表单验证的 JS 库的示例：

[http://rickharrison.github.com/validate.js/](http://rickharrison.github.com/validate.js/)

我通过谷歌搜索找到了`javascript form validation`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T17:37:42.347

**通常，如果您要在浏览器中显示它或将其保存到数据库中，您应该转义来自浏览器的任何输入以防止发生坏事。**

在以下行之前：

```
if(mail($to, $subject, $body, $headers)){ 
```

您需要向表单添加一些验证，如下所示：

```
$errors = array();
$name = $_POST['name'];
$email = $_POST['email'];

if (empty($name)) {
    $errors['name'] = 'Please enter your name!';
}

if (empty($email)) {
    $errors['email'] = 'Please enter your e-mail!';
} 
```

然后将您的电子邮件行更改为：

```
if(!count($errors) && mail($to, $subject, $body, $headers)){ 
```

然后代替：

```
echo("<p class=contactformnotsent>".$_POST['name'].", Message delivery failed...</p>"); 
```

如果邮件失败，您可以像这样添加一个额外的错误：

```
$errors['sendmail'] = 'Unable to send the e-mail!'; 
```

此外，您只需查找表单本身的任何错误，并在顶部或每个输入下方循环遍历它们：

```
foreach ($errors as $error) {
    print $error."<br />\n";
} 
```

当然，这只是一个开始；你绝对应该做一些额外的检查。例如，检查名称的最小长度，可能会去除奇怪的字符等等。

**更新**

Ben，根据您的评论，您似乎想在 POST 发生之前进行验证。如果是这种情况，我建议做一些基本的 jQuery 验证。

这是一个带有示例的[基本 jQuery 验证页面。](http://www.jquery4u.com/demos/basic-jquery-validation-form/)

这就是你要说的吗？

此外，如果您希望页面在提交评论后返回到您的表单，请确保您的表单 URL 具有表单的目标标记，如下所示：

```
<a name="comments_form" />
<form id="form1" action="<?php echo $_SERVER['PHP_SELF']; ?>#comments_form" method="POST"> 
```

# java - PrintStream 刷新什么？

> ID：12546083
> 
> 赞同：0
> 
> 时间：2012-09-22T17:27:03.307
> 
> 标签：java

我正在阅读 Java 教程，它写道，对于缓冲 IO，有一些名为 Buffered[something] 的类。我是对的，那么类`PrintStream`和`PrintWriter`无缓冲。如果是这样，那么他们冲洗什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:32:38.610

> PrintStream 向另一个输出流添加了功能，即能够方便地打印各种数据值的表示形式。还提供了另外两个功能。与其他输出流不同，PrintStream 从不抛出 IOException；相反，异常情况只是设置一个内部标志，可以通过 checkError 方法进行测试。可选地，可以创建一个 PrintStream 以便自动刷新；这意味着在写入字节数组、调用 println 方法之一或写入换行符或字节 ('\n') 后会自动调用 flush 方法。

# java - 比较数组中的元素

> ID：12546085
> 
> 赞同：1
> 
> 时间：2012-09-22T17:27:17.207
> 
> 标签：java

我被困在数据结构类的 java 分配的一个组件上，这使我无法完成其余部分。这是一个简单的概念，但我在实现中遗漏了一些东西。我有一个`Dynamic array`被叫`list1`，我需要将它与另一个列表（`list2`）进行比较。我有一个方法：`equals(Object a)`所以调用是`list1.equals(list2);`

我知道如何将列表与迭代器进行比较，但如何引用`list1`Object 来比较两者？

我不是要求你完成我的任务，只是帮助我了解这将如何工作。

```
public static void main(String args[]) 
    {
        DynamicArrayOfInts list1 = new DynamicArrayOfInts();        

    }   
    public DynamicArrayOfInts() 
    {
      storage = new int[INITIAL_CAPACITY]; 
      size = 0;
    }
    public boolean equals(Object aThat) 
    { 
        if(aThat.equals(storage))
            return true;
        else    
            return false;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T17:32:37.207

你应该这样做：

```
public boolean equals(Object obj)
{
    if(obj == null) return false;
    if(obj.getClass() != DynamicArrayOfInts.class) return false;

    DynamicArrayOfInts other = (DynamicArrayOfInts) obj;

    /*compare this.storage to other.storage with the iterator
    or with simple indexing.*/
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T17:31:43.967

我认为您是在说您在`equals`方法内部进行比较。如果是这样，您需要将参数`a`转换为列表。所以

```
public boolean equals(Object a) {
    MyList list1 = (MyList) a; 
    ...
} 
```

该行的`MyList list1 = (MyList) a`意思是“将引用`a`视为对 的实例的引用`MyList`，并将其分配给引用`list1`。

`equals`通常需要一个`Object`，因此您可以（几乎）将任何内容传递给`equals`. 根据具体情况，您可以做的第一件事是检查参数的类型，`equals`如果没有机会相等则返回 false。

[看看](http://www.javapractices.com/topic/TopicAction.do?Id=17)我在中间管上找到的这个例子。你在他们的例子中看到的第一件事是

```
if ( this == aThat ) return true;
if ( !(aThat instanceof Car) ) return false; 
```

如果比较是微不足道的，这样做可以让您快速返回。例如，实例等于自身是重言式；没有办法不可能是真的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T17:34:34.253

在 equals 方法中，您使用`this`运算符来访问 list1 来代替 nae `list1`。

# mysql - 如何在 MYSQL 中自定义“Order BY”？

> ID：12546086
> 
> 赞同：1
> 
> 时间：2012-09-22T17:27:18.647
> 
> 标签：mysql

我有以下mysql查询：

```
SELECT merchantNames.strippedName,merchantNames.lastCached,merchantNames.id
FROM merchantNames 
JOIN autoCoupons  
ON merchantNames.rawName = autoCoupons.merchantName
WHERE NOW() > autoCoupons.startDate AND autoCoupons.startDate > merchantNames.lastCached
OR NOW() > autoCoupons.endDate AND autoCoupons.endDate > merchantNames.lastCached
OR NOW() > autoCoupons.timeAdded AND autoCoupons.timeAdded > merchantNames.lastCached
OR merchantNames.lastCached < NOW() - INTERVAL 2 DAY
GROUP BY merchantNames.strippedName
ORDER BY merchantNames.pageviews DESC 
```

如何设置此查询以使满足 WHERE 子句条件前三行的结果位于顶部，而仅满足底线的结果位于底部的方式对结果进行排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T17:30:04.387

将查询一分为二并使用 UNION 将结果连接在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T17:36:00.703

还有其他方法可以获得*此*查询所需的结果，但对于“自定义`ORDER BY`”，您可以按布尔子句的结果排序。`DESC`将 true (1) 结果放在第一位，false (0) 结果放在第二位。在您的情况下，使用嵌套（如下）读取和写入此查询是最容易的`SELECT`，但当然您可以使用 ORDER BY 中的显式条件编写更长的查询，这可能会更快。

```
SELECT r.strippedName, r.lastCached, r.id
FROM
    (SELECT
        merchantNames.strippedName,
        merchantNames.lastCached,
        merchantNames.id,
        merchantNames.pageviews,
        (NOW() > autoCoupons.startDate AND autoCoupons.startDate > merchantNames.lastCached) AS a,
        (NOW() > autoCoupons.endDate AND autoCoupons.endDate > merchantNames.lastCached) AS b,
        (NOW() > autoCoupons.timeAdded AND autoCoupons.timeAdded > merchantNames.lastCached) AS c,
        (merchantNames.lastCached < NOW() - INTERVAL 2 DAY) AS d
    FROM merchantNames 
    JOIN autoCoupons ON merchantNames.rawName = autoCoupons.merchantName
    GROUP BY merchantNames.strippedName) AS r
WHERE r.a OR r.b OR r.c OR r.d
ORDER BY (r.a OR r.b OR r.c) DESC, pageviews DESC 
```

# haskell - 对于 MonadComprehensions，Applicative 还不够强大吗？为什么不？

> ID：12546091
> 
> 赞同：6
> 
> 时间：2012-09-22T17:28:36.053
> 
> 标签：haskell

令我震惊的是，每个单子的理解都以`return`. 这不会有效地使它们与应用程序编程同构吗？为什么我们有带约束的单子推导`Monad`而不是带约束的应用`Applicative`推导？

Applicative 的这种[do-like 符号](http://hackage.haskell.org/packages/archive/applicative-quoters/0.1.0.7/doc/html/Control-Applicative-QQ-ADo.html)同样让我觉得与 monad 理解非常相似。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-22T17:51:01.337

不，你可以用 monad 推导编写 bind：

```
m >>= f == [ b | a <- m, b <- f a ] 
```

# jquery - 访问 Raphael 属性

> ID：12546098
> 
> 赞同：0
> 
> 时间：2012-09-22T17:29:16.550
> 
> 标签：jquery, raphael

我试图设置然后从拉斐尔矩形获取一个属性，但我得到“未定义”。我尝试了许多变体，但没有任何效果。有人可以告诉我我做错了什么吗？

```
var $belo_victoria = paper.rect(383.281, 557.583, 59.001, 82.303);
    $belo_victoria.attr({ "fill": "#722364", 
                           "transform": "T97,123r35",
                          "pid": "28B23"                               });
console.log($belo_victoria.pid); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T19:14:33.590

不能保证 Raphael 属性可以直接作为给定 Raphael 管理元素上的属性使用——最佳实践建议使用`Element`. [数据](http://raphaeljs.com/reference.html#Element.data)方法代替。像这样：

```
var $belo_victoria = paper.rect(383.281, 557.583, 59.001, 82.303);
$belo_victoria.attr({ "fill": "#722364", 
                       "transform": "T97,123r35" } );
$belo_victoria.data( "pid", "28B23");

console.log($belo_victoria.data( "pid" )); 
```

# c++ - Qt - QTreeWidgetItem 未被编辑

> ID：12546105
> 
> 赞同：1
> 
> 时间：2012-09-22T17:30:38.350
> 
> 标签：c++, qt

为什么我的 QTreeWidgetItem 不可编辑？我用这段代码来实现一个：

```
ui->treeWidget->expandAll();
QTreeWidgetItem *item = new QTreeWidgetItem();
item->setText(0, "Add details about your Bug");
bug->addChild(item);
ui->treeWidget->editItem(item, 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:50:27.553

您忘记在 QTreeWidgetItem 中将 editable 设置为 true （默认为 false）：

```
ui->treeWidget->expandAll();
QTreeWidgetItem *item = new QTreeWidgetItem();
item->setText(0, "Add details about your Bug");
item->setFlags(item->flags() | Qt::ItemIsEditable);
bug->addChild(item);
ui->treeWidget->editItem(item, 0); 
```

# java - 在 Java 中实现 C 风格的位域

> ID：12546106
> 
> 赞同：9
> 
> 时间：2012-09-22T17:30:43.383
> 
> 标签：java, bit-fields, bitset

我有一个问题，我有点卡住了，一位同事告诉我，这将是一个寻求帮助的好地方。

我正在尝试在 Java 中实现 C 风格的位域。这是一个粗略的示例（此时我面前没有实际的代码）。

```
typedef union
{
  typedef struct
  {
     unsigned short a :1;
     unsigned short b :1;
     unsigned short c :2;
     unsigned short d :10;
  } bitfield;

  unsigned short bitmap;
}example_bitfield; 
```

我有很多来自遗留代码的类似风格的位域。我需要为 Java 提出一种等效方法的原因是，我正在编写将使用 Java 与使用 UDP 的其他遗留应用程序进行通信的代码。

我没有重写代码的选项。我知道这种方法不可移植，存在字节顺序问题（以及填充/对齐等），如果我能够重写代码，可以做得更好。不幸的是，我需要这个非常具体的问题的答案。系统是封闭的，所以我不需要担心编译器/操作系统/等的每一个可能的组合。

使用 Java EnumSet 的方法将不起作用，因为我相信这只会允许每个值是一位。我需要能够使用例如 d 占用 10 位的值来打包值。

我知道 Java Bitset，但它有局限性。我使用的是较旧版本的 Java，因此我没有一些较新的 Java Bitset 方法（即 valueOf 方法可能肯定会有所帮助）。

有没有人有任何想法如何使其尽可能易于管理？我有超过 10 个位域需要为我的通信实现。

感谢您提供任何帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T18:37:57.153

由于 UDP 只接受字节数组，您可以以任何合适的方式声明 Java 类，唯一关键的步骤是定义其序列化和反序列化方法：

```
class example_bitfield {
  byte a;
  byte b;
  byte c;
  short d;

  public void fromArray(byte[] m) {
    byte b0=m[0];
    byte b1=m[1];
    a=b0>>>7;
    b=(b0>>6)&1;
    c=(b0>>4)&3;
    d=(b0&0xF<<6)|(b1>>>2);
  }
  public void toArray(byte[] m) {
    m[0]=(a<<7)|(b<<6)|(c<<4)|(d>>>6);
    m[1]=(d&0x3F)<<2;
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-21T11:15:00.163

Javolution 库中的类 Struct 可以满足您的需求（[http://www.javolution.org/apidocs/index.html?javolution/io/Struct.html](http://www.javolution.org/apidocs/index.html?javolution/io/Struct.html)）请参阅“时钟”示例：

```
 import java.nio.ByteBuffer;
 class Clock extends Struct { // Hardware clock mapped to memory.
     Unsigned16 seconds  = new Unsigned16(5); // unsigned short seconds:5
     Unsigned16 minutes  = new Unsigned16(5); // unsigned short minutes:5
     Unsigned16 hours    = new Unsigned16(4); // unsigned short hours:4
     Clock() {
         setByteBuffer(Clock.nativeBuffer(), 0);
     }
     private static native ByteBuffer nativeBuffer();
 } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-26T02:20:04.740

我最终使用了这里介绍的类似方法：[Java 中最有效的打包方式是什么](https://stackoverflow.com/questions/7604653/what-is-the-most-efficient-way-in-java-to-pack-bits-into-byte-and-read-it-back?lq=1)

然后我创建了一个包装类，它使用[LinkedHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)来存储各个位字段条目。

每个字段都被实现为一个存储位数和字段值的类。字段的名称是 LinkedHashMap 的键。

我添加了用于开始和结束结构的方法、向结构添加位字段的方法以及基于键获取和设置值的方法。

我的 pack 方法遍历 LinkedHashMap 并放置位，同时跟踪位偏移量（为此我只使用了一个整数）。

unpack 方法还迭代 LinkedHashMap 并获取位，跟踪位偏移，并将值存储在 LinkedHashMap 中。

为方便起见，我编写了将位字段打包为整数、短整型、长整型和字节的方法。为了在字节数组和值之间进行转换，我使用了 ByteBuffer 并调用了 wrap 方法。

我还编写了解压缩压缩整数、短整数、长整数或字节的方法，方法是首先为数据类型所具有的字节数分配 ByteBuffer（整数为 4，短整数为 2，等等），然后调用各种 put 方法字节缓冲区。一旦我有了一个字节数组，我就可以将它传递给 unpack 方法。

我采用这种方法是因为我需要一些自包含的东西，易于使用，并且其他人也很容易遵循......我知道可能有更优雅的方式涉及注释或其他东西（我发现 JavaStruct 但它没有包含位字段。）

从各种原始数据类型打包和解包使我能够更轻松地从 DataInputStream/DataOutputStream 读取和写入结果。

很抱歉我无法发布代码让大家受益，所以上面的解释就足够了。希望它会帮助处于类似情况的人:)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T18:20:22.233

一些粗略的搜索并没有显示任何库来简化此操作，但您始终可以使用按位操作手动打包和解包：

```
class ExampleBitfield {
    int bitfield;      // actually 16 bits

    public int getBitfield() {
        return bitfield;
    }
    public void setBitfield(int bitfield) {
        this.bitfield = bitfield & 0xffff;
    }

    // lowest bit
    public int getA() {
        return (bitfield >> 0) & 0x01;
    }
    public int setA(int a) {
        return (bitfield & ~0x01) | ((a & 0x01) << 0);
    }

    // second lowest bit
    public int getB() {
        return (bitfield >> 1) & 0x01;
    }
    public int setB(int b) {
        return (bitfield & ~0x02) | ((b & 0x01) << 1);
    }

    // ...
} 
```

# php - 如何在不将 HTML 内容附加到文件的情况下使用 PHP 下载 Web 目录之外的文件？

> ID：12546107
> 
> 赞同：-2
> 
> 时间：2012-09-22T17:30:54.897
> 
> 标签：php

我在编写一个显示 HTML 文本框的 PHP 脚本时遇到问题，该文本框将在 Linux 机器的 /tmp 目录中搜索文件。一旦用户在文本框中键入字符串并按下提交按钮，匹配的超链接将显示在文本框下方，其中包含 Web 目录（在 /tmp 中）之外的文件的名称。

当我单击超链接时，我想从 /tmp 目录下载文件。不幸的是，因为我需要使用单个 php 脚本，所以 HTML 内容被附加到文件中，因为我使用的是 php header 命令。

有什么方法可以下载文件，而无需将我的 php 页面中的 html 附加到文件中，也无需使用多个 php 脚本？

```
<?php

function displayfiles()
{
    echo '<ul>';

    if ($handle = opendir('/tmp')) 
    {
        while ($file = readdir($handle))
        {
            if ($file != "." && $file != ".." && (strstr($file, $_POST['searchbox'])))
            {
                echo '<li><a href="search.php?file='.$file.'">'.$file.'</a></li>';
            }
            else if ($file != "." && $file != ".." && (eregi($file, $_POST['searchbox'])))
            {
                echo '<li><a href="search.php?file='.$file.'">'.$file.'</a></li>';  
            }
        }
        closedir($handle);
    }
    echo '</ul>';
}

function downloadfile($filename)
{            
    header("Content-disposition: attachment; file='/tmp/$filename' filename=$filename");
        header("Content-Length: " . filesize("/tmp/$filename"));
        header("Pragma: no-cache");
        header("Expires: 0");
        readfile("/tmp/$filename");
    exit(); 
}

echo 
"<html>
<head>
<title>File Search</title>
</head>
<body>
        <form method='POST'>
        <input id='searchbox' name='searchbox' id='searchbox' type='textbox' />
        <input type='submit' name='submit' />
        </form>";

                if (isset($_POST['submit']))
                {
                    displayfiles();        
                }
                else if (isset($_GET['file']) && file_exists("/tmp/".$_GET['file']))
                {
            downloadfile($_GET['file']);
        }

 echo "</body></html>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:59:34.007

您需要在输出其他任何内容之前处理文件下载的输出，快速而肮脏的示例（即使只有一个功能而不是评论中建议的两个功能，我想您明白了）：

```
<?php

function action_download() {
    if (!isset($_GET['file'])) return FALSE;
    $file = sprintf('/tmp/%s', $_GET['file']);
    $file = realpath($file);
    if (substr($file, 0, 5) !== '/tmp/') return FALSE;
    if (!is_file($file) || !is_readable($file)) return FALSE;

    header("Content-disposition: attachment; filename='".basename($file)."'");
    header("Content-Length: " . filesize($file));
    header("Pragma: no-cache");
    header("Expires: 0");
    readfile($file);
    return TRUE;
}

if (action_download()) return;

?>
<head>
<title>File Search</title>
</head>
<body>
        <form method='POST'>
        <input id='searchbox' name='searchbox' id='searchbox' type='textbox' />
        <input type='submit' name='submit' />
        </form>
<?php
                if (isset($_POST['submit']))
                {
                        echo '<ul>';

                         if ($handle = opendir('/tmp')) {
                                while ($file = readdir($handle))
                                {
                                  if ($file != "." && $file != ".." && (strstr($file, $_POST['searchbox'])))
                                  {
                                        echo '<li><a href="search.php?file='.$file.'">'.$file.'</a></li>';
                                  }
                  else if ($file != "." && $file != ".." && (eregi($file, $_POST['searchbox'])))
                  {
                        echo '<li><a href="search.php?file='.$file.'">'.$file.'</a></li>';  
                  }
                                }
                          closedir($handle);
                          }
                        echo '</ul>';
                }
?>
</body></html> 
```

还要注意其中可能存在`/tmp/`不应提供下载的数据，因为它可用于攻击应用程序、其用户甚至系统。

# iphone - URL 编码导致问题 iOS

> ID：12546109
> 
> 赞同：0
> 
> 时间：2012-09-22T17:31:12.313
> 
> 标签：iphone, encoding

所以我试图编码一个多行字符串并通过HTTP发送到服务器，我正在编码这个字符串：

```
#include <stdio.h>
int main(void) 
{
     printf(\"Code Cabana!\");
     return 0;
} 
```

当`NSLog`我得到这个时：

`151657384nclude23Cstdio.h3.825303E-2990X1.242D78P-1047220220220220220220220220220220220220 0nt2ain(void)27B0X1.16BC009216BCP-877220220220220220220220220220220220220220220 0xe7fe00rintf(硨ode⭸abana!2;2202202202202202202202202202202202202202202eturn222022022022022022022022022022022022020A15203843`

我正在使用此代码对其进行编码：

```
NSString *urlCode = [[NSString stringWithFormat:@"#include <stdio.h>\n int main(void){\nprintf(\"Code Cabana!\");return 0;\n}"] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T19:18:29.110

不要使用`NSLog(urlCode)`，`NSLog(@"%@", urlCode)`按你应该的方式使用。

当您这样做时，您的 C 源代码（以 UTF-8 进行 URL 编码）如下所示：

```
%23include%20%3Cstdio.h%3E%0A%20int%20main(void)%7B%0Aprintf(%22Code%20Cabana!%22);return%200;%0A%7D 
```

这可能就是你所追求的。

我只想说，通过网络将 C 源代码发送到编译器会带来巨大的安全隐患，除非您从不执行编译后的代码。

至于编译器失败， %22 是直引号`"`，因此另一个引号可能是您最后的“智能”编辑器的复制粘贴。

# python - 基本 Python 递归的问题

> ID：12546114
> 
> 赞同：0
> 
> 时间：2012-09-22T17:31:33.640
> 
> 标签：python

我在弄清楚为什么我的代码不起作用时遇到了一些麻烦，如果有人能指出我所缺少的，我将不胜感激。这是一个基本的算法问题：给定一组不同的排序整数，确定是否存在满足 a[i] = i 的元素（例如，a[3] = 3）。

我尝试使用打印语句对其进行调试，但它只调用一次 FindIndex 而不是递归。

这是代码：

```
import math

def FindIndex(SetToSearch, beginningIndex, endingIndex):
    """Searches a list of sorted integers to see if there is some a[i] == i

    Keyword Arguments:
    SetToSearch -- a list of disctinct sorted integers 
    beginningIndex -- start point of index to search
    endingIndex -- end point to search """
    # calculate midpoint of set
    midpointIndex = math.ceil((beginningIndex + endingIndex) / 2)
    midpoint = SetToSearch[int(midpointIndex)]
    print "beginningIndex: %s, endingIndex: %s" %(beginningIndex,endingIndex)
    print "midpointIndex: %s, midpoint: %s" % (midpointIndex, midpoint)
    # check whether ending index is greater then beginning index
    if (endingIndex > beginningIndex):
        return "There is no value in this set such that a[i] = i"
    if (endingIndex == beginningIndex):
        if SetToSearch[beginningIndex] == SetToSearch[endingIndex]:
            return "a[%s] is equal to %s" % [beginningIndex, beginningIndex]
    if (midpoint == midpointIndex):
        return "The value at index %d" % midpointIndex
    if (midpoint > midpointIndex):
        print "midpoint > midpointIndex evaluated to true and executed this"
        return FindIndex(SetToSearch, 0, midpointIndex)
    if (midpoint < midpointIndex):
        print "midpoint < midpointIndex evaluated to true and executed this"
        return FindIndex(SetToSearch, midpointIndex + 1, len(SetToSearch) -1)
    else:
        "Something is wrong with your program, because you should never see this!"

sampleSet = [-10, -8, -6, -5, -3, 1, 2, 3, 4, 9 ]
lastIndex = len(sampleSet) - 1

FindIndex(sampleSet,0,lastIndex) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:39:16.350

问题不在于递归。只是您的第一个条件始终为真：`endingIndex`始终大于`beginningIndex`. 该条件不递归地返回，因此函数到此结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T17:42:36.647

首先，您必须添加`return`到第 48 行的开头。
其次，添加`print`到最后一行的开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T17:43:22.213

首先，如果您看不到发生了什么，那是因为您需要打印返回的字符串：

```
print FindIndex(sampleSet,0,lastIndex) 
```

现在，如果我运行它，我会得到：

```
beginningIndex: 0, endingIndex: 9
midpointIndex: 4.0, midpoint: -3
There is no value in this set such that a[i] = i 
```

这意味着这`if`匹配：

```
# check whether ending index is greater then beginning index
if (endingIndex > beginningIndex):
    return "There is no value in this set such that a[i] = i" 
```

...好吧，当然是这样 -`endingIndex` *应该*总是大于`beginningIndex`！

* * *

为了将来参考，您是否打印了字符串？您是否看到输出行但不明白为什么要使用该分支？您是否尝试使用 单步执行代码`pdb`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T17:38:05.067

你可以使用`for`循环来做到这一点：

```
def find_index_equal_value(set):
    for i in range(0, len(set)):
        val = set[i]
        if(val == i):
           print "Index matches value." 
```

# design-patterns - 数据库封装的设计模式 - Brigde Vs Abstract Factory

> ID：12546115
> 
> 赞同：0
> 
> 时间：2012-09-22T17:31:34.197
> 
> 标签：design-patterns, abstract-factory, bridge

几天前，我们的团队正在讨论灵活数据库实现的设计模式——Oracle、MYSql 等。

我们讨论了桥接模式和抽象工厂模式。

我赞成抽象工厂，因为它灵活、易于实现，而且客户端不知道底层的数据库实现是什么。但是我的其他队友更喜欢 Bridge 而不是 Abstract Factory。他们提到，当类层次结构全部增长时，它更加灵活且易于维护。

我仍然不满意为什么我们不能使用抽象工厂，我正在寻找您的建议和良好的参考资料，我可以在其中比较两种模式和**不同的数据库实现。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T21:02:34.863

如前所述，AbstractFactory 是关于创造事物的。实际上，抽象工厂可以创建桥模式对象。所以两者并不相互排斥。

就个人而言，我发现 Bridge 在很多场景中过于复杂，并且更喜欢将事物抽象到简单的外观模式之后，例如在使用存储库模式时。

但是，如果您打算围绕多种实现类型定义标准操作，Bridge 可能会更有用。在我看来，如果您只是想创建一个允许您在未来某个时间切换到不同后端的抽象，那么这就是过度设计。如果您要在运行时使用不同的后端，那么它可能是合适的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T18:03:22.933

我不认为这两者是相互排斥的。抽象工厂是关于如何创建事物的。直到创建了东西之后，Bridge 才会启动。

我认为抽象工厂就像打电话给亚马逊并订购一些东西。亚马逊知道如何获得或制造那个东西，我并不关心它是如何发生的。

Bridge 更像是“盒子和包装材料的性质是什么”，物品将被放入其中。基础对象需要制作并装配在一起，而 Abstract Factory 是实现这一目标的好方法。

如果我不得不选边站，我会更倾向于站在你这边，因为他们非常关心使具体实现可变并且实现它的路径如此迂回这一事实向我表明，他们可能想要一旦最终创建了数据库对象，需要了解的事情太多了。[如果有人希望它是全局可访问](http://misko.hevery.com/2008/11/21/clean-code-talks-global-state-and-singletons/)的，或者他们希望实现者伸出手并从全局对象中获取一个实现，我不会感到惊讶。

如果您对服务层的访问进行严格监管（例如，只允许 View 向某些第三方发出请求，例如 Controller 层），那么如何创建服务层以及它实际上是什么就没有那么重要了——无论如何，实际上只有一件事知道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T18:14:36.297

正如已经提到的，抽象工厂模式是一种创建对象的模式，而桥是一种结构模式，因此它们的使用并不相互排斥。

是使用桥接模式还是使用泛化的简单策略模式归结为以下问题：

运行时需要切换策略吗？是否会被迫为每个策略创建多个实现类？

如果这两个问题中的任何一个得到肯定的答案，那么桥接模式很可能会使您受益。

如果以下问题为真，那么您可能需要一个抽象工厂。

您是否需要在不知道具体类型的情况下创建实例？

# javascript - 从 phpscript 获取结果后，JQuery 自动完成 keyup 事件正在触发

> ID：12546116
> 
> 赞同：0
> 
> 时间：2012-09-22T17:31:35.507
> 
> 标签：javascript, jquery, jquery-ui, autocomplete

我正在使用以下代码使一个简单的文本框成为自动完成框，

```
var sourceURLRide = "index.php?page=getRideAndParksJson&type=rides&keyword=";
$("#fav_rides_select").autocomplete({
            source: sourceURLRide,
            minLength: 1,
            delay: 0
}); 
```

但是我需要在fav_rides_select 上触发的每个按键事件上更改源，即更改源url，然后必须从url 获取结果。但这行不通。我正在使用以下代码将源与 keyup 事件同步：

```
$("#fav_rides_select").keyup(function(){
            $("#fav_rides_select").autocomplete("option","source",sourceURLRide + encodeURIComponent($("#fav_rides_select").attr("value")) );
}); 
```

注意：我正在使用 keyup 事件将关键字传递给 php 脚本，因此只会出现相关结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:39:59.297

嗯，你没有在你的例子中传递一个对象。试试我的代码（类似于你的第一个片段）：

```
$("#fav_rides_select").autocomplete({ source: sourceURLRide + encodeURIComponent($("#fav_rides_select").attr("value")) }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T17:53:21.907

如果在文档准备好后它不是太小，您应该加载整个 JSON，或者您可以加载 JSON 的子集，但前提是它是真正的大数据。

这是一篇关于如何为大数据记住当前查询状态的好[文章。](http://woorkup.com/2010/09/13/how-to-create-your-own-instant-search/)

如果您不是 Google，则可以使用以下代码：

```
$(document).ready(function(){
  var data = $.getJSON('index.php?page=getRideAndParksJson&type=rides',function(data){
    $('#fav_rides_select').autocomplete(
      source: data,
      minLength: 1,
      delay: 0);
  });
}); 
```

# c# - C# 中的线程化 WebBrowser

> ID：12546126
> 
> 赞同：1
> 
> 时间：2012-09-22T17:32:40.700
> 
> 标签：c#, multithreading, com, browser

我在一个类中有 2 个方法（`login()`和`change()`）。

在那个类中，我还有一个属性 ( `webBrownser wb`)

我调用了`login()`线程

```
Thread tLogin = new Thread(b.doLogin);
tLogin.SetApartmentState(ApartmentState.STA);
tLogin.Start(); 
```

以及`change()`线程方法

```
 Thread tLike = new Thread(b.autoLike);
 tLike.SetApartmentState(ApartmentState.STA);
 tLike.Start(); 
```

但是当该方法`change()`尝试使用属性时，`wb`我收到此消息：

> *无法使用已与其底层 RCW 分离的 COM 对象。*

我究竟做错了什么？

这些方法与`lock()`...同步

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:35:21.913

WebBrowser 是一个 COM（或 ActiveX）组件。除了用对象创建的线程之外，它不能用于任何其他线程。并且该线程需要有一个消息泵（例如`Application.Run`在 WinForms 中）。

有关如何执行此操作的更多详细信息，请参阅[新线程中的 WebBrowser Control](https://stackoverflow.com/questions/4269800/webbrowser-control-in-a-new-thread)

# javascript - 我怎样才能完成一个弹出模式窗口（包括示例）？

> ID：12546132
> 
> 赞同：0
> 
> 时间：2012-09-22T17:33:12.777
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何使用 javascript 打开新的浏览器窗口？](https://stackoverflow.com/questions/3616709/how-to-open-new-browser-window-using-javascript)

例如：[http](http://www.nowness.com/) ://www.nowness.com/ > 点击“推特”

我问的不是 Twitter API，只是一个我想打开的通用窗口。可以使用 jQuery。

编辑：模态在这里是错误的术语。我想要一个弹出窗口，而不是模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:41:45.560

只需添加您的链接

```
<a class="tweetme" 
   href="https://twitter.com/intent/tweet?text=yourtext&url=yoururl">
   Tweet Me
</a> 
```

和 javascript

```
<script type="text/javascript">
    $('.tweetme').click(function (event) {
        var width = 575,
                height = 400,
                left = ($(window).width() - width) / 2,
                top = ($(window).height() - height) / 2,
                url = this.href,
                opts = 'status=1' +
                        ',width=' + width +
                        ',height=' + height +
                        ',top=' + top +
                        ',left=' + left;

        window.open(url, 'twitte', opts);

        return false;
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T17:35:51.450

您可以使用 jQuery UI。这是教程和演示：http: [//jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

# java - JPA Cascade注解和Hibernate Cascade注解的区别

> ID：12546133
> 
> 赞同：6
> 
> 时间：2012-09-22T17:33:19.437
> 
> 标签：java, hibernate, hibernate-annotations, hibernate-cascade

我正在尝试使用 Hibernate 注释。当我尝试使用 Cascading 时，我在 Eclipse**智能感知**中获得了两个选项：

```
 javax.persistence.CascadeType and org.hibernate.annotations.CascadeType 
```

在 hibernate **CascadeType**中，提供了比 JPA 中的许多选项。

一个比另一个有优势吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-22T17:38:27.637

javax.persistence 注释是标准规范。hibernate 注解代表了 Hibernate 的具体实现。它们大多重叠，但 Hibernate CascadeType 提供了一些特定于 Hibernate 的附加选项。

通常，尽可能使用 javax.persistence 注释。仅当您需要特定于 Hibernate 的选项之一并且知道您可能永远不需要切换到另一个持久性提供程序时，才使用 Hibernate 变体。

许多人在同一个项目中混合使用 JPA/Hibernate 注释，这是一种有效的做法。但是，可能会有像这样涉及 CascadeType 的微妙交互：

[http://www.mkyong.com/hibernate/cascade-jpa-hibernate-annotation-common-mistake/](http://www.mkyong.com/hibernate/cascade-jpa-hibernate-annotation-common-mistake/)

> 查看代码，@OneToMany 来自 JPA，它需要一个 JPA 级联 - javax.persistence.CascadeType。但是，当您使用 Hibernate 会话保存它时，org.hibernate.engine.Cascade 将执行以下检查
> 
> …</p>
> 
> Hibernate 保存过程会导致一个 ACTION_SAVE_UPDATE 动作，但是 JPA 会传递一个 ACTION_PERSIST 和 ACTION_MERGE，它不会匹配并导致级联无法执行。

# ruby-on-rails - Rails如何为一个select标签创建一个数组？

> ID：12546135
> 
> 赞同：-1
> 
> 时间：2012-09-22T17:33:52.517
> 
> 标签：ruby-on-rails, ruby

我的问题类似于[Rails - 为选择标签返回一个月份数组](https://stackoverflow.com/questions/5567394/rails-return-an-array-of-months-for-a-select-tag)。

但我想要一个这样的数组：

```
[
  ["September", 9], 
  ["August", 8],
  ["July", 7], 
  ["June", 6],
  ["May", 5], 
  ["April", 4],
  ["March", 3],
  ["February", 2],
  ["January", 1],
  ["December", 0]
  ["November", -1], 
  ["October", -2]
] 
```

如果当前月份是 10 月，它将是：

```
[
  ["October", 10]
  ["September", 9], 
  ["August", 8],
  ["July", 7], 
  ["June", 6],
  ["May", 5], 
  ["April", 4],
  ["March", 3],
  ["February", 2],
  ["January", 1],
  ["December", 0]
  ["November", -1]
] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T18:05:20.900

这应该这样做：

```
require 'date'
Date::MONTHNAMES[1..12].reverse.rotate(12-Time.now.month).each_with_index.collect{|m, i| [m, Time.now.month-i]} 
```

编辑：

正如您在要显示年份的评论中提到的那样，您需要一种不同的方法来“回到过去”。当您使用 rails 时，您可以使用 activerecord 的日期函数来做到这一点：

```
require 'active_support/core_ext/date/calculations'
t = Time.now
(0..11).collect { |i| current = t.advance(months:-i); ["#{Date::MONTHNAMES[current.month]} #{current.year}", t.month-i ] } 
```

# javascript - 如何为 iPhone 和 Android 制作我的 Web 应用程序框架？

> ID：12546136
> 
> 赞同：1
> 
> 时间：2012-09-22T17:34:05.340
> 
> 标签：javascript, android, iphone, web-applications, html5-video

除此之外，[我可以在 iPhone 应用程序中“框架”一个网络应用程序吗？](https://stackoverflow.com/questions/5096380/can-i-frame-a-web-app-in-an-iphone-app)我认为不可能制作我的`web site`或`web application`智能手机应用程序。我有两个问题：

1.  我可以制作一个 iphone 应用程序，它有一个`html 5`页面并且登录到我运行的服务器端`ruby on rails`。那种只专用于我的网站或静态和恒定的浏览器`URL`？
2.  我可以在 Android 中使用 web 框架，我应该使用什么模块？

## 基本上：

我想为 android 和 iphone 制作智能手机应用程序，这是一个框架`html5`，可以在某些 Web 服务器上登录我的网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:38:00.273

目前尚不完全清楚您想从您的问题中获得什么，但我觉得[PhoneGap](http://phonegap.com/) aka [Apache Cordova](http://incubator.apache.org/cordova/)可能会帮助您。它是一款软件，可让您使用 HTML、CSS 和 Javascript 编写适用于 iOS、Android、Blackberry、Windows Phone、Palm WebOS、Bada 和 Symbian 的移动应用程序。请参阅[入门指南](http://docs.phonegap.com/en/2.0.0/guide_getting-started_index.md.html)以获得很好的介绍。

请记住，如果您的应用只是一个打包为应用程序的常规网站，那么它很可能会被 Apple 应用商店拒绝。另一方面，如果您的网站是一个已经在移动浏览器中运行良好的[Web 应用程序，尤其是](http://en.wikipedia.org/wiki/Web_application)[离线](http://en.wikipedia.org/wiki/Cache_manifest_in_HTML5)应用程序，那么将其用作具有原生外观的应用程序可能会更自然。（感谢[JW。](https://stackoverflow.com/users/4321/jw)指出这一点。）

# c# - ASP.NET - 如何从服务器查看 MS Word 文件，编辑然后保存在服务器上？

> ID：12546137
> 
> 赞同：4
> 
> 时间：2012-09-22T17:34:18.923
> 
> 标签：c#, asp.net

我已经开发了一个基于文档管理的（C#）asp.net Web 应用程序，我想从客户端机器上的服务器文件中查看选定的 ms word 文件，然后当客户端保存选定的文件时，它将被保存回服务器上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T17:46:33.400

诀窍是分享点。它允许您直接从 MS Word 签出和签入文档。所以本质上，您的 ASP.NET 应用程序将是一个为用户列出 url 的编目工具。

没有共享点，解决方案非常脆弱，不值得实施。本质上，您必须下载文件并打开它。这可以通过在响应中返回文档来轻松实现。困难的部分是把它寄回去。

另一种选择是您将 word 文档放在共享驱动器而不是网络服务器中。我打赌这就是你想要的。您将遇到的问题是您无法控制 Web 应用程序的权限，而是通过活动目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-13T04:31:25.433

如果第三方组件适合您，则 aceofix 可以是您的替代方案之一。您可以为用户编码并允许他们登录以访问某些指定的文档。用户也可以查看、编辑文档并将其保存回服务器。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-22T17:41:22.937

好吧，我认为最好的方法是使用[Microsoft.Office.Interop.Word](http://msdn.microsoft.com/de-de/library/microsoft.office.interop.word%28v=office.11%29.aspx)

您可以使用 MSWord 文档创建、修改、保存……以及您喜欢的任何内容。[在此处](http://nishantrana.wordpress.com/2007/11/03/creating-word-document-using-c/)查看一些示例...我相信您可以设法找到其他示例。

基本上，您应该将 MSWord 文件作为该类的一个项目打开给您的客户端，并在他完成编辑后...再次将其保存在您的服务器上...

# javascript - 尝试使用“style.visibility”将 div 设置为在代码中可见

> ID：12546140
> 
> 赞同：0
> 
> 时间：2012-09-22T17:34:52.840
> 
> 标签：javascript, asp.net, css

我正在尝试显示此部分

```
<tr>
  <div id="contact" class="uniForm" style="visibility: hidden; display: none;">    
    <fieldset class="blockLabels">
      <legend style="font-size: 10pt;">Contacts</legend>
      <div class="ctrlHolder">
        <%= this.strContactInfo%>
      </div>
    </fieldset>
  </div>
</tr> 
```

仅当满足此条件时：

```
if (iStatus == 2)
{
  lblAccessError2.Text = "Failure. ";
  Page.ClientScript.RegisterStartupScript(this.GetType(), "clientscript1", "document.getElementById('contact').style.visibility = 'visible';", true);                 
  ModalPopupExtender1.Show();           
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T17:42:59.877

在这一行

`style="visibility: hidden; display: none;"`你有可见性和显示不让显示，但你只改变可见性，所以 div 仍然保持隐藏。

我建议只使用其中一个，或同时更改它们，将可见性更改为可见，并将显示更改为阻止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T17:44:09.810

您也忘记更改元素的`display`规则。你需要根据`uniForm`类来设置，或者默认设置为`block`.

```
document.getElementById('contact').style.display = 'block'; 
```

作为记录，[一个工作示例](http://jsfiddle.net/X9YNg/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T17:45:20.877

**选一个**

`visibility: hidden`-- 不显示该项目，但在屏幕上保留其空间
`display: none`-- 使该项目完全消失。

你不需要两者。

要使该项目出现，请将`visibility`或设置`display`为空字符串`''`，它将恢复为默认值，该项目将显示在屏幕上。

# inheritance - Cocos2d：CCSprite 的子类不会旋转

> ID：12546141
> 
> 赞同：0
> 
> 时间：2012-09-22T17:34:53.350
> 
> 标签：inheritance, cocos2d-iphone, subclass, rotateanimation

仅运行以下代码 r 和 entity 会旋转，但enemyEntity 不会。我在 rotateBy 的更新方法中添加了一个调用，并仅在enemyEntity 上运行 rotateBy，它会调用它并更改角度但不显示效果。我认为是继承问题。我发布了下面的代码和本页底部的标题。有什么建议么？

```
 CCSprite *r = [CCSprite spriteWithFile:@"redRingRight.png"];
    r.anchorPoint = CGPointMake(0.5f, 0.5f);
    r.position = CGPointMake(160.0f, 60.0f);         
    [r runAction:[CCRotateBy actionWithDuration:2.0f angle:100]];
    [self addChild:r z:0 tag:77];

    Entity * entity = [Entity spriteWithFile:@"redRingRight.png"];
    entity.anchorPoint = CGPointMake(0.5f, 0.5f);
    entity.position = CGPointMake(160.0f, 200.0f); 

    [entity runAction: [CCRotateBy actionWithDuration:2.0f angle:100]];

    [self addChild:entity];

    [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"game-art-hd.plist"];

    EnemyEntity * enemyEntity = [EnemyEntity enemyWithType:Boss];
    enemyEntity.visible = TRUE;
    enemyEntity.anchorPoint = CGPointMake(0.5f, 0.5f);
    enemyEntity.position = CGPointMake(160.0f, 300.0f);
    [enemyEntity runAction: [CCRotateBy actionWithDuration:2.0f angle:100]];        

    [self addChild:enemyEntity];
    //[self scheduleUpdate]; 
```

Entity 和 EnemyEntity（Entity 的子类）的标头：

```
Entity.h

#import <Foundation/Foundation.h>
#import "cocos2d.h"

@class Component;

@interface Entity : CCSprite 
{
}

@end

EnemyEntity.h

#import <Foundation/Foundation.h>
#import "Entity.h" 

typedef enum
{
  ...,
  Boss,
  ..    
} EnemyTypes;

@interface EnemyEntity : Entity
{
    EnemyTypes type;

}
+(id) enemyWithType :(EnemyTypes)enemyType ;
-(void) spawn;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:25:47.133

我从头开始重写了代码，现在它确实旋转了。可能正如@LearnCocos2D 所建议的那样：**“检查是否有任何其他代码正在运行可能会重置旋转。您可以在 CCNode 旋转属性上设置断点。”** .

谢谢！

# scala - 调度错误处理

> ID：12546142
> 
> 赞同：3
> 
> 时间：2012-09-22T17:34:59.677
> 
> 标签：scala, playframework

我以这种（简单，阻塞）的方式从我的请求中得到响应：

```
val response = Http(req)() 
```

但我从 Play 收到了这个错误！框架：

```
ExecutionException: java.net.ConnectException: Connection refused to http://localhost:8983/update/json?commit=true&wt=json 
```

* * *

我从来没有考虑过 Dispatch 或 Scala 中的异常处理。在 Dispatch 库中我必须注意哪些错误？捕获每种类型/类别的错误的语句是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T18:25:55.000

`Either[Throwable, Whatever]`在这种情况下处理异常的一种常见方法是使用来表示结果，其中某种失败实际上并不是那么异常。Dispatch 0.9使用`either`on 方法使这一点变得方便`Promise`（顺便说一句，我在[回答您之前的问题](https://stackoverflow.com/a/12343111/334519)时使用了该方法）：

```
import com.ning.http.client.Response

val response: Either[Throwable, Response] = Http(req).either() 
```

现在您可以非常自然地使用模式匹配来处理异常：

```
import java.net.ConnectException

response match {
  case Right(res)                => println(res.getResponseBody)
  case Left(_: ConnectException) => println("Can't connect!")
  case Left(StatusCode(404))     => println("Not found!")
  case Left(StatusCode(code))    => println("Some other code: " + code.toString)
  case Left(e)                   => println("Something else: " + e.getMessage)
} 
```

您还可以使用许多其他方法来`Either`更方便地处理故障 - 例如，请参阅[这个 Stack Overflow 答案](https://stackoverflow.com/a/1194541/334519)。

# python - Python 名称错误 (Django)

> ID：12546144
> 
> 赞同：0
> 
> 时间：2012-09-22T17:35:15.017
> 
> 标签：python, django, nameerror

这是models.py中的代码

```
class Package(models.Model):
  name=models.CharField(max_length=300)
  version=models.CharField(max_length=300,blank=True)
  home_page=models.URLField(blank=True)
  summary=models.TextField()
  description=models.TextField(blank=True)
  keywords=models.TextField(blank=True)
  categories=models.ManyToManyField(Category,related_name='packages')

class Category(models.Model):
  topic=models.ForeignKey(Package, related_name="categories") 
```

当我尝试同步数据库时，它说“未定义 NameError 类别”我尝试先放置类类别，然后再放置包，这次它显示“未定义 NameError 名称包”。

请帮我解决这个问题。

编辑：感谢您的帮助，从我对数据库中的知识知之甚少，这里的教程似乎是错误的[http://toys.jacobian.org/presentations/2007/pycon/tutorials/beginning/](http://toys.jacobian.org/presentations/2007/pycon/tutorials/beginning/) 他已经定义了字段类别在 Packages 中为多对多，Category topic 中的字段为 Package 的外键，但外键是多对一的关系，因此实现存在缺陷。我认为 django 试图以它的方式告诉它“字段'主题'的访问器与 m2m 字段'Package.categories'发生冲突。” 字段“主题”的反向查询名称与 m2m 字段冲突“”正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:39:30.520

在定义时添加引号`category` `ManyToManyField`。改成：

```
categories=models.ManyToManyField('Category',related_name='packages') 
```

原因：`Category`添加该字段时未定义，因此需要在其周围添加引号，以便 django 稍后解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T17:37:49.267

[“如果需要在尚未定义的模型上创建关系，可以使用模型的名称，而不是模型对象本身……”](https://docs.djangoproject.com/en/dev/ref/models/fields/#lazy-relationships)

```
class Package(models.Model):
   ...
  categories=models.ManyToManyField('Category', related_name='packages') 
```

# java - 如何在java中显示列表中的项目？

> ID：12546148
> 
> 赞同：-1
> 
> 时间：2012-09-22T17:35:28.620
> 
> 标签：java, swing

我正在从事涉及从 gmail 帐户接收我的邮件的项目，我在获取邮件方面没有任何问题。现在我正在制作一个包含按钮和列表的 GUI。该列表基本上包含收到的电子邮件，类似于 gmail 中的电子邮件。如何将收到的邮件放入列表中？任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T17:40:52.120

在`Swing`数据中都与小部件的模型相关联。在您的情况下，您可以使用`DefaultListModel`（我假设您使用的是`JList`）。
例子：

```
final DefaultListModel model = new DefaultListModel();  
final JList list = new JList(model);   
//add elements to model  
for(String subject:emailSubjects){  
   model.add(subject);  
} 
```

将它们添加到要显示的模型中。
此代码应**仅**在 EDT 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T18:01:25.537

如果您想使用 JList，这里是一个可能对您有用的代码示例

```
public class JListDemo extends JFrame {

private JPanel contentPane;

/**
 * Launch the application.
 */
public static void main(String[] args) {
EventQueue.invokeLater(new Runnable() {
    public void run() {
    try {
        JListDemo frame = new JListDemo();
        frame.setVisible(true);
    } catch (Exception e) {
        e.printStackTrace();
    }
    }
});
}

public JListDemo() {
setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
setBounds(100, 100, 150, 303);
contentPane = new JPanel();
contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
contentPane.setLayout(new BorderLayout(0, 0));
setContentPane(contentPane);

JList list = new JList();
list.setBorder(new TitledBorder(null, "JList Demo", TitledBorder.LEADING, TitledBorder.TOP, null, null));
list.setModel(new AbstractListModel() {
    String[] values = new String[] { "Google", "Yahoo", "Facebook ",
        "EBay" };

    public int getSize() {
    return values.length;
    }

    public Object getElementAt(int index) {
    return values[index];
    }
});
contentPane.add(list, BorderLayout.CENTER);
} 
```

# ruby-on-rails - 从缓存中读取了多少个八位字节？

> ID：12546149
> 
> 赞同：0
> 
> 时间：2012-09-22T17:35:33.147
> 
> 标签：ruby-on-rails, ruby, caching

我正在尝试做一个简单的基准测试，以了解从我的 Rails 站点的每个页面的缓存中读取了多少个八位字节。我说的是从 Rails.cache 中检索的数据。

我想`123Ko/145Ko`在页面底部显示类似的内容。

是否存在执行此任务的 gem，或者 ruby​​ 标准库中是否包含某些内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:04:05.980

一种选择是对您正在使用的商店进行子类化，并扩展在`read_entry`中声明的受保护方法`ActiveSupport::Cache::Store`，该方法`FileStore`和其他缓存自己的子类。

```
FileStoreWithReadTracking < ActiveSupport::Cache::FileStore
  def start_page
    @octets_read = 0
  end

  def octets_read
    @octets_read
  end

  protected

    def read_entry(key, options)
      entry = super(key, options)
      @octets_read += entry.size if entry
      entry
    end
end 
```

开始页面时，您可以调用`start_page`将八位字节计数清零。由于`read_entry`是每次缓存尝试执行读取时使用的低级方法，因此您可以拦截任何读取的数据并在返回之前获取其大小。您可能必须转换`size`为八位字节。

要将其设置为您的自定义缓存存储，请添加`config.cache_store = FileStoreWithReadTracking.new('/path/to/file/store')`到您的环境中。我认为您可以通过这种方式对所有商店进行子类化。

# android - 在gridView中滚动使视图抖动

> ID：12546155
> 
> 赞同：0
> 
> 时间：2012-09-22T17:36:18.293
> 
> 标签：android, gridview, scroll, ontouchlistener, shake

我有一个带有网格视图和图像视图的布局（它扩展了框架布局）。我使用 onTouchListener 滚动布局。在我的 Galaxy Nexus 中，它运行良好，但在 AVD 和其他设备（例如 Galaxy SII）中，视图抖动，我不知道为什么。

XML

```
<paricio.toni.caththemole.MyFrameLayout
    android:id="@+id/campo"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_below="@+id/zonaMarcador" >
    <ImageView
        android:id="@+id/fondo"
        android:layout_width="800dp"
        android:layout_height="800dp"
        android:contentDescription="@android:string/untitled"
        android:src="@drawable/terrenoarena" />
    <GridView
        android:id="@+id/gridView1"
        android:layout_width="640dp"
        android:layout_height="640dp"
        android:layout_gravity="center"
        android:clickable="true"
        android:columnWidth="80dp"
        android:horizontalSpacing="0dp"
        android:numColumns="8"
        android:overScrollMode="never"
        android:scrollbars="none"
        android:stretchMode="columnWidth"
        android:verticalSpacing="0dp" >

    </GridView> 
```

和 setOnTouchListener 代码：

```
 gridview.setOnTouchListener(new OnTouchListener() { 
        public boolean onTouch(View v, MotionEvent event) {
            int desplazamiento[]={0,0};
            campo.getLocationOnScreen(desplazamiento);
            switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    mx = event.getX();
                    my = event.getY();
                    return false;
                case MotionEvent.ACTION_MOVE:
                    curX = event.getX();
                    curY = event.getY();
                    campo.scrollBy((int) (mx - curX), (int) (my - curY));                 
                    mx = curX;
                    my = curY;
                    return false;
                case MotionEvent.ACTION_UP:
                    curX = event.getX();
                    curY = event.getY();
                    campo.scrollBy((int) (mx - curX), (int) (my - curY));
                    return false;
            }
            return false;
        }
    }); 
```

MyFrameLayout 是一个 FrameLayout 扩展为大于屏幕：

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(0, 0);
} 
```

我可以在 AVD 中滚动 ImageView 而不会晃动，但是如果我移动图像和 gridview（而不是框架），视图的移动方式会有所不同（并且是错误的）。我尝试了很多事情，但我无法避免震动。任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:11:13.193

我解决了摇动内容：

```
 gridview.setOnTouchListener(new OnTouchListener() { 
        public boolean onTouch(View v, MotionEvent event) {
            int desplazamiento[]={0,0};
            fondo.getLocationOnScreen(desplazamiento);
            Log.i("miTraza","touch event");
            switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    Log.i("miTraza","touch event down");
                    mx = event.getX();
                    my = event.getY();
                    return true;
                case MotionEvent.ACTION_MOVE:
                    Log.i("miTraza","touch move");
                    curX = event.getX();
                    curY = event.getY();
                    fondo.scrollBy((int) (mx - curX), (int) (my - curY));
                    gridview.scrollBy((int) (mx - curX), (int) (my - curY));
                    mx = curX;
                    my = curY;
                    return true;
                case MotionEvent.ACTION_UP:
                    Log.i("miTraza","touch up");
                    curX = event.getX();
                    curY = event.getY();
                    fondo.scrollBy((int) (mx - curX), (int) (my - curY));
                    gridview.scrollBy((int) (mx - curX), (int) (my - curY));
                    return true;
            }
            return false;
        }
    }) 
```

现在 gridview 和 imageview 一起移动而没有震动，我在使用 gridview 时遇到了 onItemClick 的问题，但这是另一个历史。

感谢安卓开发者的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T19:54:53.823

滚动时gridview需要什么？

似乎即使你已经处理了触摸事件，你也选择了返回 false 来告诉它你还没有处理触摸事件。

这意味着它可以在触摸它时执行您的代码及其代码。

# java - 使用注解的 Hibernate 组件 OneToOne 映射

> ID：12546159
> 
> 赞同：0
> 
> 时间：2012-09-22T17:36:38.777
> 
> 标签：java, hibernate

我有以下表架构。

```
Employee (id int primary key, addressId int);
Address (id int primary key, line1 varchar(99), line2 varchar(99)); 
```

和类：

```
Employee {
int id;
Address address;}

Address {
String line1;
String line2;} 
```

如何使用注释创建从 Employee 到 Address 的 OneToOne 组件映射？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T18:12:04.470

```
@Entity
public class Employee {

    private int id;

    @OneToOne
    private Address address;

}

@Entity
public class Address {
    private String line1;
    private String line2;
} 
```

# android - 更改屏幕方向时视频不会同时播放

> ID：12546160
> 
> 赞同：3
> 
> 时间：2012-09-22T17:36:49.883
> 
> 标签：android, landscape, android-videoview

我非常喜欢这个网站，因为我可以找到许多有用的解决方案，对我很有帮助，尤其是我是 android 编程的初学者，这是我的第一个问题，所以我希望能从这个伟大的社区中得到帮助。

问题：我在我的应用程序中播放视频，并在用户定向屏幕时以横向全屏播放，所以我想通过使用 seekTo() 和 getCurrentPosition() 让视频从同一点重新开始播放 - 但是视频播放的问题位置后很多秒我的意思是视频会寻找相同的时间点，但是当开始播放时它会增加很多秒。

我的代码：

```
 //initialise everything  
protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        v = (VideoView) findViewById(R.id.videoView1);
                v.setVideoPath(dir + videoName + ".3gp");
                v.setMediaController(new MediaController(this));
                if (savedInstanceState == null){
                    v.start();  
                }
                else {
                    playingTime = savedInstanceState.getInt("restartTime", 0);
                    v.seekTo(playingTime);
                }
       }

@Override
protected void onSaveInstanceState(Bundle outState) {
    // TODO Auto-generated method stub
    super.onSaveInstanceState(outState);
    if (file.exists()){
        playingTime = v.getCurrentPosition();
        v.stopPlayback();
        outState.putInt("restartTime", playingTime);
    }
} 
```

我尝试了许多解决方案，例如 [如何在更改为横向模式时继续播放视频 android](https://stackoverflow.com/questions/11031295/how-to-keep-playing-video-while-changing-to-landscape-mode-android)

我正在使用 Galaxy Nexus 测试我的应用程序。如果有任何提示，我将不胜感激。对不起我的英语不好，非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T17:49:15.323

在你的活动中，保持一切正常。它归结为在重新创建活动时保存位置。这是一种方法：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //initialise everything

    //finally
    if(savedInstanceState!=null) {
        int seekValue = savedInstanceState.getInt("where");
        //now seekTo(seekValue)
    }
}
@Override
    protected void onSaveInstanceState(Bundle outState) {
        int seekValue; //set this to the current position;
        outState.putInt("where", seekValue);
        super.onSaveInstanceState(outState);
    }
} 
```

# flash - jPlayer：不在 Firefox 上加载 jPlayer.swf

> ID：12546173
> 
> 赞同：0
> 
> 时间：2012-09-22T17:38:38.493
> 
> 标签：flash, firefox, firebug, jplayer, fallback

*我使用 WordPress 和优雅主题*套件中的主题“Gleam”构建了网站[http://www.ordinarypeopleofficial.com](http://www.ordinarypeopleofficial.com)。这个主题非常复杂。它大量使用 JavaScript。它有一个名为*custom.js*的 700 行代码长文件，它使用 AJAX 管理整个网站。

 **由于这个原因，我无法包含将 jPlayer 加载到 PHP 脚本中的 JavaScript 代码，但我需要将其放入单独的 JavaScript 文件中并从*custom.js*调用该文件。

在*custom.js 中*，我添加了以下几行，其中包括我的名为*chiama-player.js*的文件到`<head>`标签中：

```
var html_doc = document.getElementsByTagName('head').item(0);
var js = document.createElement('script');
js.setAttribute('language', 'javascript');
js.setAttribute('type', 'text/javascript');
js.setAttribute('src', "/wp-content/themes/Gleam/chiama-player.js");
html_doc.appendChild(js); 
```

名为*chiama-player.js*的文件包含实例化 jPlayer 的代码：

```
$(document).ready(function() {
if(window.location.href=="http://www.ordinarypeopleofficial.com/#!/le-canzoni/" || window.location.href=="http://www.ordinarypeopleofficial.com/le-canzoni/"){
    $("#jp_container_1").css( { 'display': 'block' } );
    $("#jquery_jplayer_1").jPlayer( {
        ready: function () {
            $(this).jPlayer("setMedia", {
                m4a: "http://www.ordinarypeopleofficial.com/wp-content/themes/Gleam/shakeit.m4a",
            });
        },
        swfPath: "http://www.ordinarypeopleofficial.com/wp-content/themes/Gleam/jplayer",
        supplied: "m4a"
    });
}
else{
    $("#jp_container_1").css( { 'display': 'none' } );
}
}); 
```

问题：在支持 M4A 的浏览器上一切正常。

问题来自 Firefox。Firefox 不支持 M4A，因此它需要 Flash 后备才能工作。当我尝试在 Firefox 上加载页面时，我看到它`swfPath`被正确识别（事实上，如果我改变路径并输入一些随机文本，我会在*网络*面板中看到 404）。

问题是请求`GET Jplayer.swf`永远不会得到结果，并且在没有得到文件的情况下持续加载数小时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T16:54:16.420

进入文件*custom.js*，在函数结束时`et_init_scripts()`我做了以下步骤：

1.  我删除了我写的行，所以我不再调用我的文件*chiama-* player.js
2.  我复制了文件*jquery.jplayer.min.js*的内容并将其全部粘贴。（我知道，这很可怕，但它有效。）
3.  在这些行之后，我复制了*chiama-player.js*的内容（它创建了 jPlayer）。**

# javascript - 为什么这两个事件处理程序中的上下文不同

> ID：12546174
> 
> 赞同：1
> 
> 时间：2012-09-22T17:38:46.497
> 
> 标签：javascript, this-pointer

这是一个基础问题，但我无法弄清楚为什么上下文（“this”指针）在第二个事件处理程序中是正确的，而在第一个事件处理程序中是不正确的。

我有这个简单的构造函数来创建对象 myNotifier：

```
function Notifier ( message ) {
  this.message = message;
  this.saySomething = function () {
    alert( "I say:" + this.message);
  }
}

myNotifier = new Notifier(" HELLO!"); 
```

然后我将该`myNotifier.saySomething()`方法用作 CLICK 两个按钮的事件处理程序：

```
$(".button1").click( myNotifier.saySomething );
$(".button2").click( function () { myNotifier.saySomething()}); 
```

第一个显示：“我说：未定义” 第二个显示：“我说：HELLO”

我知道调用方法时上下文（this）不是原始对象，但是为什么在第二个按钮的函数内部调用时它是正确的？

一个[要测试的 jsfiddle](http://jsfiddle.net/pablol/m7Hb6/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T17:41:03.313

查看[MDN 对`this`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)的参考：是的，上下文取决于您调用方法的方式。

如果您将函数作为对象的属性调用（例如在 button2 的处理程序中），则该对象将用作上下文。

但是，如果将它用作事件处理程序（如果用 jQuery 包装，则相同），调用函数的上下文是当前 DOM 元素，侦听器绑定到该元素。并且按钮没有属性“消息”，所以它会提醒`undefined`。

当然，这些不是唯一的选择。你可以试试

```
var fn = myNotifier.saySomething;
fn(); // context is the global object (window) 
```

或者

```
myNotifier.saySomething.call({message:"buh!"}); 
```

:-) - 参见 MDN 以获得更多解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T17:41:28.377

for关键字是带有 class`$(".button1").click`的`this`Dom 元素`button1`。

for关键字是指您包装调用的匿名`$(".button2")`函数`this``myNotifier.saySomething()`

[您可以使用apply()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)原型函数来更改函数的上下文。

# vba - VBA 简报。如何获取文件的当前目录路径到 VBA 中的字符串？

> ID：12546181
> 
> 赞同：7
> 
> 时间：2012-09-22T17:39:27.147
> 
> 标签：vba, powerpoint

VBA 简报。如何设置环境当前目录？

我也试过这段代码：

```
Sub test()
Dim sPath As String
sPath = ActiveWorkbook.Path
MsgBox sPath
End Sub 
```

但是是说：`Object required`

请帮我使它工作...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-23T07:26:22.140

蒂姆已经给出了答案。你可以使用类似的东西：

```
Sub test()
    Dim sPath As String
    sPath = ActivePresentation.Path
    If Len(sPath) > 0 Then
        MsgBox ActivePresentation.Name & vbNewLine & "saved under" & vbNewLine & sPath
    Else
        MsgBox "File not saved"
    End If
End Sub 
```

# c# - GeckoFx-14 PromptService 不工作

> ID：12546183
> 
> 赞同：0
> 
> 时间：2012-09-22T17:39:30.453
> 
> 标签：c#, proxy, xulrunner, geckofx

我正在测试与主 geckofx 源文件一起提供的 GeckoFxTest 项目。但是当我为私人代理测试 customPrompt 时，不幸的是它不起作用。我取消了这些行的注释：

```
GeckoWebBrowser.UseCustomPrompt();

GeckoPreferences.User["browser.xul.error_pages.enabled"] = false; 
```

对于私人代理，我使用了这些代码：

`Gecko.GeckoPreferences.User["network.proxy.http"] = host; Gecko.GeckoPreferences.User["network.proxy.http_port"] = port; Gecko.GeckoPreferences.User["network.proxy.ssl"] = host; Gecko.GeckoPreferences.User["network.proxy.ssl_port"] = port; Gecko.GeckoPreferences.User["network.proxy.type"] = 1;`

没有`GeckoWebBrowser.UseCustomPrompt()`它会提示输入用户名和密码，但在取消注释后 - 它一直显示“管理员不允许访问所请求的资源，或者您需要有效的用户名/密码才能使用此资源”。我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:28:00.613

我在 Geckofx 的网站上发布了这个问题。 [这](https://bitbucket.org/geckofx/geckofx-14.0/issue/19/promptservice-not-working "https://bitbucket.org/geckofx/geckofx-14.0/issue/19/promptservice-not-working")是解决方案。

# jquery-mobile - jquery mobile将新链接动态插入DOM不起作用

> ID：12546184
> 
> 赞同：0
> 
> 时间：2012-09-22T17:39:34.407
> 
> 标签：jquery-mobile

我还是 jQuery mobile 的新手。我正在尝试解决我的一个页面上的一个小问题。

我有一个包含简单链接列表的页面。这里没有什么特别的，就是这样：

```
<ul>
    <li> <a href="test.php">One</a></li>
    <li> <a href="test1.php">Two</a></li>
    <li> <a href="test2.php">Three</a></li>
    <li> <a href="test3.php">Four</a></li>
    <li> <a href="test4.php">Five</a></li>
<ul>    
<a href="#" id="list_more">More</a> 
```

我有一点 js，所以当`#list_more`点击链接时，我们会执行一个 ajax 调用，它会拉出接下来的五个项目并添加到`ul`.

```
$('#list_more').click(function(){
    $.post("/scripts/ajax.php", function(data){
        $('#list_more').attr('data-time',data.time);
        $('ul li:last').after(data.out);
    });
}) 
```

这些页面是使用多页模板设置的。因为新页面是动态添加到 DOM 中的，所以我收到了一条`Error loading page`消息。我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T03:12:41.660

您是否尝试过刷新您的列表？[http://operationmobile.com/dont-forget-to-call-refresh-when-adding-items-to-your-jquery-mobile-list/](http://operationmobile.com/dont-forget-to-call-refresh-when-adding-items-to-your-jquery-mobile-list/)

# c++ - C/C++ 应用程序中嵌入式 SQL 数据库的 PostgreSQL 替代方案

> ID：12546187
> 
> 赞同：0
> 
> 时间：2012-09-22T17:40:09.813
> 
> 标签：c++, sql, c, database

经过搜索，似乎唯一免费且可以嵌入到 C/C++ 应用程序中的 SQL 数据库是[PostgreSQL](http://www.postgresql.org/)。

还有其他具有许可许可证的解决方案吗？在 C/C++ 中从头开始编写这样我可以编写自己的东西有多难？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T17:46:41.840

我想这个问题的标准答案是[sqlite](https://www.sqlite.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T12:51:35.040

**Oracle**有一个免费的数据库**BerkeleyDB**。它以 C 源代码的形式提供。我将数据库与 VxWorks 一起使用。您想使用哪个操作系统？请务必提及这些以获得正确的解决方案。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T00:11:19.960

你的目标是什么操作系统？对于跨平台使用，除了 sqlite 之外，我无法提出任何建议。如果您只针对 Windows，那么还可以考虑使用 Microsoft SQL Server 精简版。**

# excel - 在 Excel 中，如何创建两个字符串的“交集”（不放入 VB）？

> ID：12546189
> 
> 赞同：3
> 
> 时间：2012-09-22T17:40:24.887
> 
> 标签：excel

在 Mac Excel 2011 中，我有两个字符串，每个字符串由空格分隔的更小、无空格字符串的串联组成。例如：

《红绿蓝粉红》《马苹果红猴粉红》

从中，我想提取交集字符串：

“红粉红”

我可以在 VB 中完成，但我更愿意留在 Excel 中。现在我知道我可以通过假设每个较大字符串中较小组件字符串的数量来一起破解一些东西（在 Excel 中）。然后我可以将其中一个较大的字符串切割成这些组件，然后在第二个大字符串上为每个组件执行 FIND()，然后将结果连接起来。

问题是，虽然这里我只给出了两个字符串，但实际上我有*两组*字符串，每组包含 20 个大字符串。因此，就 Excel 中的空间而言，“砍和走”方法感觉就像 O(N^2)，我正在寻找一种更简单的方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T21:33:00.260

我不认为你可以在不使用多个单元格或 VBA 的情况下在单个单元格函数中执行此操作。定义一个像下面这样的 UDF，并在一个单元格中使用新函数，语法如下

```
=StringIntersect("a b c","d e b f") 
```

这将返回“b”

这个函数确实有嵌套循环，但在字符串数组上我想它会足够快

```
Function StringIntersect(s1 As String, s2 As String) As String
Dim arys1()  As String
Dim arys2() As String
Dim arysub() As String
Dim i as integer
Dim j as integer

arys1 = Split(s1, " ")
arys2 = Split(s2, " ")
For i = LBound(arys1) To UBound(arys1)
    For j = LBound(arys2) To UBound(arys2)
        If arys1(i) = arys2(j) Then StringIntersect = StringIntersect & arys1(i) & " "
    Next
Next
StringIntersect = Trim(StringIntersect) 'remove trailing space
End Function 
```

如果你不想做这两个循环，你应该可以用 inStr 做一些非常快的事情。我没有进行任何速度测试，但我怀疑下面的函数更快，但是你会得到意想不到的结果，即字符串在第一个输入中重复，或者第一个输入中的字符串是第二个输入中的子字符串。这可以通过更多检查来避免，但您可能会失去速度优势。

```
Function StringIntersect(s1 As String, s2 As String) As String
Dim arys1()  As String

arys1 = Split(s1, " ")
For i = LBound(arys1) To UBound(arys1)
    If InStr(1, s2, arys1(i), vbBinaryCompare) > 0 Then StringIntersect = StringIntersect & arys1(i) & " "
Next
StringIntersect = Trim(StringIntersect) 'remove trailing space

End Function 
```

# javascript - JS 中的确认弹窗

> ID：12546190
> 
> 赞同：1
> 
> 时间：2012-09-22T17:40:28.243
> 
> 标签：javascript, dom-events, onbeforeunload

我正在考虑在 JavaScript 中创建一个确认菜单，它将在其中运行一组代码，具体取决于您选择是或否。

现在我希望它发生在`window.onbeforeunload`事件中，但只有当个人按下“是”时，我才希望其余代码工作。如果他们按“否”，我希望`window.onbeforeunload`彻底取消。我想知道这是否可能以及如何。这是我到目前为止所拥有的。我想要这个的原因是，当我运行脚本时，弹出窗口会在返回时出现，但在有人选择留下或离开之前。该`click();`功能启动擦除信息。我希望`.click();`在有人在返回时按“是”并且只有当他们按“是”时才启动。

```
var validNavigation = false;

function wireUpEvents() {

var dont_confirm_leave = 0; 
var leave_message = document.getElementById("kioskform:broswerCloseSubmit");
var leave_safari = document.getElementById("kioskform:broswerCloseSafari");
      function goodbye(e) {
       if (!validNavigation) {
function disp_confirm()
{
var leaveMessage=confirm("Are you sure you want to leave")
if (leaveMessage==true)
{          if (dont_confirm_leave!==1) {
        if(!e) e = window.event;
        //for IE
        e.cancelBubble = true;
        e.returnValue = leave_message.click();
        //e.stopPropagation works in Firefox.
        if (e.stopPropagation) {
          e.stopPropagation();
          e.preventDefault();
        }
        //return works for Chrome and Safari
         leave_safari.click();
         return '';

        //add the code to delete the kiosk information here.
        // this is what is to be done.
      }
    }

   else 
{
Alert("Returning to the page.")
}
  }
  window.onbeforeunload=goodbye;

  // Attach the event keypress to exclude the F5 refresh
  jQuery('document').bind('keypress', function(e) {
    if (e.keyCode == 116){
      validNavigation = true;
    }
  });

  // Attach the event click for all links in the page
  jQuery("a").bind("click", function() {
    validNavigation = true;
  });

  // Attach the event submit for all forms in the page
 jQuery("form").bind("submit", function() {
    validNavigation = true;
  });

  // Attach the event click for all inputs in the page
 jQuery("input[type=submit]").bind("click", function() {
    validNavigation = true;
  });

}

// Wire up the events as soon as the DOM tree is ready
jQuery(document).ready(function() {
  wireUpEvents();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:04:17.740

为什么不直接使用[window.confirm](https://developer.mozilla.org/en-US/docs/DOM/window.confirm)？

# java - 为什么有些语言使用翻转的 Y 轴？

> ID：12546191
> 
> 赞同：2
> 
> 时间：2012-09-22T17:40:31.660
> 
> 标签：java, axis

在 Actionscript 和 3D 系统中，Y 轴向上增加（底部为 0 或 -1，顶部通常为 1）。这种约定相对于现实世界是有意义的。但是在 Java 等语言中，约定是颠倒的（底部是 1，顶部是 0 或 -1）。我一直在想：为什么？

谢谢！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T17:45:45.693

在 2D 软件中，y 方向通常是向下的 - 屏幕的左上角是原点。第一个屏幕只有文本，您将从顶部开始对文本行进行编号。这个编号系统卡住了。

在 3D 软件中，许多库选择将 Y 实现为 up，但这仅仅是因为，正如您所提到的，这“更有意义”。

这不是“语言”的特征。这是图书馆的特色。

# android - 光传感器问题

> ID：12546192
> 
> 赞同：0
> 
> 时间：2012-09-22T17:40:47.080
> 
> 标签：android, android-sensors

下面提到的代码在 samasung Galaxy s(GB) 上完美运行，但我没有在 SE neo v(ics) 和 Tipo(ics) 上工作。这是索尼问题或 ics 问题。当启动应用程序启动并立即显示吐司“无光传感器！退出 -”。

```
import android.app.Activity;
import android.content.Context;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.widget.ProgressBar;
import android.widget.TextView;
import android.widget.Toast;

public class LightsenseActivity extends Activity {

 ProgressBar lightMeter;
 TextView textMax, textReading;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        lightMeter = (ProgressBar)findViewById(R.id.lightmeter);
        textMax = (TextView)findViewById(R.id.max);
        textReading = (TextView)findViewById(R.id.reading);

        SensorManager sensorManager 
        = (SensorManager)getSystemService(Context.SENSOR_SERVICE);
        Sensor lightSensor 
        = sensorManager.getDefaultSensor(Sensor.TYPE_LIGHT);

        if (lightSensor == null){
        Toast.makeText(LightsenseActivity.this, 

           "No Light Sensor! quit-", 
           Toast.LENGTH_SHORT).show();
        }else{
       float max =  lightSensor.getMaximumRange();

         lightMeter.setMax((int)max);
         textMax.setText("Max Reading: " + String.valueOf(max));

         sensorManager.registerListener(lightSensorEventListener, 
           lightSensor, 
           SensorManager.SENSOR_DELAY_NORMAL);

        }
    }

    SensorEventListener lightSensorEventListener
    = new SensorEventListener(){

  @Override
  public void onAccuracyChanged(Sensor sensor, int accuracy) {
   // TODO Auto-generated method stub

  }

  @Override
  public void onSensorChanged(SensorEvent event) {
   // TODO Auto-generated method stub
   //if(event.sensor.getType()==Sensor.TYPE_LIGHT){

    float currentReading = event.values[0];
    { lightMeter.setProgress((int)currentReading);
    textReading.setText("Current Reading: " + String.valueOf(currentReading));
   }
  }

    };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:34:40.870

在 gsmarena (http://www.gsmarena.com/sony_ericsson_xperia_neo_v-4122.php) 和 Sony Xperia Tipo (http://www.gsmarena.com/sony_xperia_tipo-4718.php) 上为 SE Neo V 列出的唯一传感器是加速度计、接近度和指南针。

光传感器绝不是必需的传感器，因为它通常用于调整屏幕亮度。来自 Android 4.0 兼容性文档：

7.3.7\. 光度计 设备实现可能包括光度计（即环境光传感器。）

您的应用将不得不处理没有光传感器的情况，或者您应该在 AndroidManifest.xml 中添加一个`<uses-feature>`for 。`android.hardware.sensor.light`

# backbone.js - 从视图中保存模型？

> ID：12546201
> 
> 赞同：1
> 
> 时间：2012-09-22T17:41:33.323
> 
> 标签：backbone.js, save

我正在开发一个主干网络应用程序，我想知道如何从视图中发布数据
这是我的模型：

```
App.Models.edit = Backbone.Model.extend({
    defaults : {
        id    : undefined,
        fname : undefined,
        lname : undefined,
        phone : undefined,
        address : undefined,
        email : undefined,
        url: undefined,
    },

    initialize: function(){
        this.set({url : '../api/getOne/' + App.CurrentID });
    },

    getAttrs: function(attr){
        return this.get(attr);
    }
    }); 
```

这是我的观点：

```
App.Views.edit = Backbone.View.extend({
    el: $("#modal"),

    initialize: function(){
        App.TplNames.edit = $('body');
        App.Tpls.edit('edit');
        this.model.bind("reset", this.render, this);
        this.render();
    },

    events: {
        'click .btnSave': 'saveDetails',
    },

    saveDetails: function(){
        this.model.save();
        //console.log(this.model);
    },

    render: function(){
        var elem = '';
        $.each(this.model.models, function(i, k){
        var template = _.template( $('#tpl_edit').html(), k.toJSON() );
        elem += template;
        });
        $(this.el).html(elem);
        $("#myModal").modal('show');
        $("#myModal").on('hidden', function(){
        //alert(123);
        document.location.href = App.Url + '#view';
        });
        var attrs = "";
        $.each(this.model.models, function(i, k){
        attrs = k.toJSON();
        });
        $("#fname").val(attrs.fname);
        $("#lname").val(attrs.lname);
        $("#Email").val(attrs.email);
        $("#Phone").val(attrs.phone);
        $("#Address").val(attrs.address);
        //console.log(attrs);
    }
    }); 
```

这是我的路由器

```
App.Router = Backbone.Router.extend({
    routes: {
        ""      :   "def",
        "home"  :   "def",
        "view"  :   "getAll",
        "edit/:id"  :   "edit",
        "add"   :   "addContact",
    },

    def: function(){
        this.mainModel = new App.Collections.Main();
        this.mainView  = new App.Views.Main({model: this.mainModel});
        //this.mainModel.fetch();
    },

    edit: function(id){
        App.CurrentID = id;
        var contactCollObj = new App.Collections.edit();
        viewObj = new App.Views.edit({model: contactCollObj});
        contactCollObj.fetch();
        viewObj.render();
        //console.log(contactCollObj);
    },

    getAll: function(){
        //alert(123);
        var collObj = new App.Collections.View();
        var viewObj = new App.Views.View({model: collObj});
        collObj.fetch();
    },

    addContact: function(){
        //var model = new App.Collections.AddContact();
        model = new App.Models.AddContact();
        var view = new App.Views.AddContact({model: model});
        //view.render();
    }

    }); 
```

var app = new App.Router(); Backbone.history.start();

当我想保存模型时，它会产生一个错误：

```
this.model.save is not a function 
```

除了上面的，一切都还好……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:15:15.243

在您的路由器中，您将集合传递给`App.Collections.edit`作为模型查看：

```
var contactCollObj = new App.Collections.edit();
viewObj = new App.Views.edit({model: contactCollObj}); 
```

这就是你不能打电话的原因`save()`。`save()`仅适用于模型而不是集合。

您可能想用集合初始化视图

```
viewObj = new App.Views.edit({collection: contactCollObj}); 
```

然后也相应地修改你的一些视图代码。

# javascript - Google Maps API - Facebook 评论

> ID：12546202
> 
> 赞同：0
> 
> 时间：2012-09-22T17:41:42.530
> 
> 标签：javascript, facebook, facebook-graph-api, google-maps-api-3

关于这个问题还有[另一个问题](https://stackoverflow.com/questions/10701950/facebook-comments-stream-in-google-maps-infowindow)，但他还没有提出解决方案。

我想将 Facebook 评论添加到每个 InfoWindow，以便人们可以对特定场所发表评论，作为一个简单的评论系统。

目前，我只能添加一个站点范围的评论部分，它总是出现在侧边栏中。当有人对其发表评论时，评论在整个网站上都是可见的，而不是链接到单个标记/位置。

有没有办法为每个项目设置一个单独的评论部分？

# function - 这个循环是用什么语言写的？

> ID：12546209
> 
> 赞同：-1
> 
> 时间：2012-09-22T17:42:50.690
> 
> 标签：function, loops, do-while

这看起来像是一个语法奇怪的 do-while 循环。任何人都可以识别一种语言吗？

```
While var1 == var2 do:
    thisFunction(parameter) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:55:56.893

看起来像巴什。

[您可以在 wikipedia 上的 while](http://en.wikipedia.org/wiki/While_loop)循环中查看多种语言中的 while 循环是什么样的

# c - 使用 OpenSSL BIGNUM 查找加法逆

> ID：12546210
> 
> 赞同：0
> 
> 时间：2012-09-22T17:42:55.233
> 
> 标签：c, cryptography, openssl, bignum

我需要计算 C 中大（BIGNUM）素数的加法逆。所以，基本上，我需要乘以-1。有没有一种我错过的简单方法可以做到这一点？我在文档中看不到任何功能。我想出的只是这个，我认为这很丑陋：

```
//bigprime = my big prime
inverse = BN_new();
one = BN_new();
negOne = BN_new();
BN_one(one);  // one = 1
BN_zero(negOne); // set negOne to zero
BN_sub(negOne, negOne, one) // subtract one from zero
BN_mul(inverse, bigprime, negOne, ctx); //multiply big prime by -1 
```

更重要的是，我对 bignum 库还不够熟悉，不知道从零“减”一是否真的会做我想做的事。蒂亚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T02:06:42.240

更简单的解决方案是从零中减去素数。

```
inverse = BN_new();
nil = BN_new();
BN_zero(nil);
BN_sub(inverse,nil,bigprime); 
```

应该这样做。

# c# - 将 id 传递给 ajax 调用

> ID：12546212
> 
> 赞同：0
> 
> 时间：2012-09-22T17:43:06.050
> 
> 标签：c#, asp.net, ajax, razor, webmatrix

我有这样的链接 `<a class="viewp" href="#">@data.name</a>`

我想以这种方式调用 jquery ajax

```
 $(document).ready(function ()
    {
        $('.viewp').click(function (id)
        {
            var responseUrl="~/click?id="+id;                    
            $.ajax(
            {
                type: "GET",
                data:id,
                url:responseUrl,
                success:success
            });
        });
    }); 
```

但我不知道`id`的`@data.name`是如何传递到 jquery 函数中的。如果我将上面的链接替换为`href`然后`href="~/click?id=@data.id"` 应该加载整个页面而不是某个特定区域，并且显然 ajax 也不起作用。

[**更新**]

`id`我的意思是`id`我的 sql 表的主键，我正在使用 webmatrix 来编码我的简单网页。我的数据库表看起来像这样`create table x(id, name)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T17:53:07.760

我没明白你到底是什么意思

如果是这样

<a class="viewp" href="#" id="someId" >@data.name</a>

如果你想知道它

然后

$(this).attr("id");

如果你想获取文本@data.name

然后

$(this).text();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T17:55:46.610

你可以这样做：

```
<a id="@data.id" class="viewp" href="#">@data.name</a> 
```

然后在函数中你可以得到 id：

```
$('.viewp').click(function()
{
    var id = this.id
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T17:58:48.357

用于`$(this)`获取当前单击的标签，然后获取该标签的`id`属性值。

```
 $('.viewp').click(function(){
    var id=$(this).attr("id");   
    var responseUrl="~/click?id="+id 
     //do your ajax call here
 }); 
```

# struts2 - Struts 2 - 没有为命名空间 [/] 映射的操作和与上下文路径关联的操作名称 [validateLogin] [/LoginApplication]

> ID：12546215
> 
> 赞同：0
> 
> 时间：2012-09-22T17:43:23.820
> 
> 标签：struts2, struts2-namespace, action-mapping

我尝试了互联网上所有可能的解决方案。

**错误 ：**

```
HTTP Status 404 - There is no Action mapped for namespace [/] and action name [validateLogin] associated with context path [/LoginApplication]. 
```

**struts.xml 文件**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
   "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
   "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>
<constant name="struts.devMode" value="true" />
   <package name="hello" extends="struts-default">

      <action name="validateLogin" 
            class="com.example.login.ValidationAction"
            method="execute">
            <result name="success">/result.jsp</result>
      </action>
   </package>
</struts> 
```

**索引.jsp**

```
<form action="validateLogin">
        <table>
            <tr>
                <td><label for="username">Username</label></td><td><input type="text" name="username"></td>
            </tr>
            <tr>
                <td><label for="password">Password</label></td><td><input type="password" name="password"></td>
            </tr>
            <tr>
                <td colspan="2"><input type="submit" value="Login"></td>
            </tr>
        </table>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:56:38.233

我的问题的解决方案有点奇怪。

我刚刚`<constant name="struts.devMode" value="true" />`从 struts.xml 文件中删除

程序开始正常工作......然后我将相同的代码再次放回struts.xml文件中，它仍在运行......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-02T09:31:46.780

确保它`struts.xml`位于正确的目录中。如果您使用的是 Eclipse，则可以按照以下步骤操作：

1-右键单击项目⇾属性⇾部署程序集。

2-使您的源的部署路径如下：[screenshot1](https://i.stack.imgur.com/5UmAe.png)

> -/Src/main/java：WEB-INF/类。
> 
> -Struts2（库）：WEB-INF/lib。

3- 将文件放在`struts.xml`具有部署路径的目录中`WEB-INF/classes`。例如在这里你应该把它放在`/src/main/java`. [截图2](https://i.stack.imgur.com/AiaPs.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-01-04T12:34:20.547

此错误主要发生在未正确制作包结构时。

如果`web.xml`文件和`struts.xml`文件是在正确的包下创建的，那么这两个 XML 文件将自动反映在 Netbeans 中的配置文件文件夹结构下。

请参考[截图](https://i.stack.imgur.com/20rjV.png)：

# ios - 如何将旧应用程序更新到 iPhone 5？

> ID：12546216
> 
> 赞同：3
> 
> 时间：2012-09-22T17:43:24.793
> 
> 标签：ios, ios6, iphone-5

> **可能重复：**
> [如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)

我的应用程序使用标准的 Apple 控件。其中一些非常简单（UITableView 嵌套在 UIView 中），而另一些则是 UITextView 内的 UIScrollView 内的 UIView

当我在我的新 iPhone 5 上运行这些应用程序时，它们是信箱的。我如何更新它们以利用新的 iPhone 5 房地产？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T17:50:02.353

首先要删除信箱，通过添加一个 iPhone5 大小的启动图像，让 xcode 知道它应该在 iPhone 5 上工作，该图像将命名为 Default-568h@2x.png

马上，您的应用程序将在没有信箱的情况下运行。

然后你需要继续格式化你的视图以适应。根据经验，我拥有的每个 UITableView 都会自动调整为更长的大小，但大多数其他视图需要对 Struts 和 Springs 进行一些调整。

# file - IE文件下载框获取位置

> ID：12546226
> 
> 赞同：0
> 
> 时间：2012-09-22T17:45:03.367
> 
> 标签：file, internet-explorer, download

我目前正在解决一个问题，我需要获取下载文件的位置。首先让我解释一下场景。

我在我的页面中放置了一个链接，当用户单击该链接时，它会在 IE 中显示带有打开/保存/取消选项的文件下载对话框。现在，当用户单击保存按钮并选择保存文件的位置时，我需要得到那个使用任何可能的选项保存文件的位置。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:51:34.560

我不认为你可以......至少不容易。这在客户端上运行，出于安​​全原因，您不能使用 javascript 访问客户端的文件系统。

然而，也许可以使用 flash 或 silverlight 插件，因为用户可以允许从这些应用程序内部访问本地文件系统。这可能是非常困难的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T17:51:08.607

浏览器将不允许您访问有关客户端文件系统的信息。

# wpf - 使用绑定到控件的键覆盖控件样式

> ID：12546228
> 
> 赞同：0
> 
> 时间：2012-09-22T17:45:42.250
> 
> 标签：wpf, styles, wpf-controls

所以在我的主应用 ResourceDictionary 中，我的风格以

```
 <Style TargetType="{x:Type TabItem}" x:Key="{x:Type TabItem}"> 
```

现在我正在做的是覆盖 TabControl 以制作自定义控件（没有任何 xaml）。问题是此时它没有继承自定义 TabControl 模板。

所以我想知道的是，我如何以编程方式绑定到模板的“x:Key”，考虑到它绑定到特定控件而我的控件没有 xaml 文件。

网上有些地方说要这样做

```
this.Style = (Style)FindResource("TabItem"); 
```

但这似乎不适用于我的情况。“样式”在一个单独的文件中，并导入到我的 App.Xaml 资源字典中......所以它正确地覆盖了所有 TabItems，但不是我覆盖的那个。

这是我的 App.xaml

```
<Application x:Class="Octgn.OctgnApp" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

  <Application.Resources>
    <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>

        <ResourceDictionary Source="/Resources/Themes/Full/ExpressionDark.xaml"/>
       </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
  </Application.Resources>
</Application> 
```

并且来自 ExpressionDark.xaml 的项目（略微截断，因为它很大）

```
<Style d:IsControlPart="True" TargetType="{x:Type TabItem}" x:Key="{x:Type TabItem}">
    <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TabItem}">
                <Grid x:Name="grid" Margin="2,1,2,3">
                    <Grid.LayoutTransform>
                        <TransformGroup>
                            <ScaleTransform ScaleX="1" ScaleY="1"/>
                            <SkewTransform AngleX="0" AngleY="0"/>
                            <RotateTransform Angle="0"/>
                            <TranslateTransform X="0" Y="0"/>
                        </TransformGroup>
                    </Grid.LayoutTransform>
                    <Border x:Name="border" BorderBrush="{x:Null}" CornerRadius="2,2,2,2" Opacity="0.5">
                        <Border.Background>
                            <LinearGradientBrush EndPoint="0.5,0.976" StartPoint="0.5,0.039">
                                <GradientStop Color="#7F595959" Offset="0" />
                                <GradientStop Color="#19FFFFFF" Offset="1" />
                            </LinearGradientBrush>
                        </Border.Background>
                    </Border>
                    <Border x:Name="SelectedBorder" BorderBrush="{x:Null}" CornerRadius="2,2,2,2" Opacity="0" Background="{DynamicResource SelectedBackgroundBrush}"/>
                    <Border x:Name="HoverBorder" BorderBrush="{x:Null}" CornerRadius="2,2,2,2" Opacity="0">
                        <Border.Background>
                            <LinearGradientBrush EndPoint="0.5,0.976" StartPoint="0.5,0.039">
                                <GradientStop Color="#7F595959" Offset="0" />
                                <GradientStop Color="#19FFFFFF" Offset="1" />
                            </LinearGradientBrush>
                        </Border.Background>
                    </Border>
                    <Grid>
                        <ContentPresenter x:Name="ContentSite" RecognizesAccessKey="True" ContentSource="Header" d:LayoutOverrides="Width, Height" HorizontalAlignment="Center" Margin="6,1,6,1" VerticalAlignment="Center" />
                    </Grid>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

此样式自动应用于 TabItem，但我试图将其应用于我的 TabItem 覆盖。

这是代码

```
/// <summary>
/// The chat bar item.
/// </summary>
public class ChatBarItem : TabItem
{
    /// <summary>
    /// Sets the Chat Room
    /// </summary>
    private readonly NewChatRoom room;

    /// <summary>
    /// Initializes static members of the <see cref="ChatBarItem"/> class.
    /// </summary>
    static ChatBarItem()
    {
        DefaultStyleKeyProperty.OverrideMetadata(
            typeof(ChatBarItem), new FrameworkPropertyMetadata(typeof(TabItem)));
    }   

    /// <summary>
    /// Initializes a new instance of the <see cref="ChatBarItem"/> class.
    /// </summary>
    /// <param name="chatRoom">
    /// The chat Room.
    /// </param>
    public ChatBarItem(NewChatRoom chatRoom)
    {
        this.room = chatRoom;
        this.ConstructControl();
    }

    /// <summary>
    /// Initializes a new instance of the <see cref="ChatBarItem"/> class.
    /// </summary>
    public ChatBarItem()
    {
        this.room = null;
        this.ConstructControl();
    }

    /// <summary>
    /// Constructs this control
    /// </summary>
    private void ConstructControl()
    {
        //this.Background = Brushes.Transparent;
        //this.BorderThickness = new Thickness(0);
        //this.Style = (Style)FindResource("TabItem");
        // this is where I want to set the style of this control

        // Main content object
        var mainBorder = new Border { Margin = new Thickness(5) };

        // Main content grid
        var g = new Grid();
        g.ColumnDefinitions.Add(new ColumnDefinition());
        g.ColumnDefinitions.Add(new ColumnDefinition { Width = new GridLength(16) });

        // Create item label
        var label = new TextBlock() { VerticalAlignment = VerticalAlignment.Center };
        if (this.IsInDesignMode() || this.room == null)
        {
            label.Inlines.Add(new Run("test"));
        }
        else
        {
            label.Inlines.Add(new Run(this.room.GroupUser.User.User));
        }

        // Create close button
        var borderClose = new Border { Width = 16, Height = 16 };
        var imageClose = new Image()
            {
                Source = new BitmapImage(new Uri("pack://application:,,,/Octgn;component/Resources/close.png")), 
                Stretch = Stretch.Uniform
            };

        // --Add items to items

        // Add close image to closeBorder
        borderClose.Child = imageClose;

        // Add Close 'button' to grid
        g.Children.Add(borderClose);
        Grid.SetColumn(borderClose, 1);

        // Add label to main grid
        g.Children.Add(label);

        // Add main grid to main border
        mainBorder.Child = g;

        // Add main grid to this
        this.Header = mainBorder;
    }
} 
```

如果我有 TabItem 的 xaml，我可以轻松地使用 Style="{DynamicResource {x:Type TabItem}}"（或类似的东西），但我是以编程方式完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:53:24.873

您已经尝试过：

```
<Style TargetType="{x:Type TabControl}" BasedOn="{StaticResource {x:Type TabControl}}">

</Style> 
```

顺便说一句，您不需要定义 x:Key，如果您希望将样式应用于所有 TabControl，并且如果您希望它适用于您的整个应用程序，请在 App.xaml 中设置样式

* * *

**编辑：**我仍然不明白你想要做什么。（如果可以，请再次编辑您的问题）。

但是您可以尝试通过以下方式手动设置样式：

```
Style customStyle = (Style)Application.Current.FindResource("StyleKey"); 
```

如前所述，

```
static MyCustomTabControl()
{
     DefaultStyleKeyProperty.OverrideMetadata(typeof(MyCustomTabControl), new FrameworkPropertyMetadata(typeof(TabControl)));
} 
```

但这仅在以下情况下才有效：

1）您的控件在文件中的样式：Themes\Generic.xaml

2) 文件“Generic.xaml”具有属性“BuildAction”，值 = Page。

3) AssemblyInfo.cs 包含：

```
[assembly: ThemeInfo (
     ResourceDictionaryLocation.None,
     ResourceDictionaryLocation.SourceAssembly
)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T18:16:26.137

在您的派生选项卡控件的静态构造函数中如何处理

```
static MyCustomTabControl()
{
     DefaultStyleKeyProperty.OverrideMetadata(typeof(MyCustomTabControl), new FrameworkPropertyMetadata(typeof(TabControl)));

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T20:56:16.620

好的，经过一番挖掘，以及这里其他两个答案的帮助，我能够弄清楚这一点。而不是为 FindResource 做一个字符串，看起来资源字典实际上是一个带有对象键的字典。所以...

```
this.Style = (Style)Application.Current.FindResource(typeof(TabItem)); 
```

这为我做到了。

再次感谢其他两个答案。

# ios - IOS 键盘驱动程序：后台应用程序拦截蓝牙键盘输入

> ID：12546237
> 
> 赞同：-1
> 
> 时间：2012-09-22T17:47:11.510
> 
> 标签：ios, keyboard, driver

我已经安装了一个自定义蓝牙键盘，它需要操作系统上的驱动程序来解释和输出所需的字符。这可以在 Windows 上轻松完成。但是，我想让我的键盘与 IOS 一起使用。

我是否需要获取后台应用程序来拦截输入并广播到前台应用程序？我应该学习蓝牙驱动程序吗？我该怎么办？

提前致谢。

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:56:01.200

如果没有 Apple 的合作，您将无法实现 iOS 键盘驱动程序，因此您可能不走运。iOS 上也没有向前台应用程序广播击键的标准方法。您可能应该尝试让您的自定义蓝牙键盘实现标准蓝牙键盘接口。

# objective-c - 单元测试失败，然后不要

> ID：12546238
> 
> 赞同：4
> 
> 时间：2012-09-22T17:47:15.320
> 
> 标签：objective-c, xcode, ocunit

在经历了一些严重的挫折和头痛之后，我设法将单元测试添加到现有项目中。问题是，测试只执行了 50% 的时间。我有一个内部带有 STFail 宏的测试方法，当我运行测试时，它会按我的预期失败。然后，我在不触及任何代码/设置的情况下再次运行测试，它将通过而不会在测试夹具中遇到断点。发生这种情况时，控制台会打印出此输出：

**无法找到位于 ... octest 的测试包的可执行文件。**

我有一个谷歌，但似乎没有很多/任何人有这个确切的问题，关于这个主题的其他讨论让我头疼。如果有人能对这个问题有所了解，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T15:26:52.040

I took your fresh project and reproduced the problem. There are a number of issues, and one unknown:

**Build Phases of test target:**

*   Target Dependencies: Specify TestApp, so that the main target is always built first.
*   Compile Sources: Don't include any main sources. Only include TestAppUnitTests.mm
*   Link Binary With Libraries: The only one needed is SenTestingKit.framework. We can throw in Foundation and UIKit for good measure.
*   Copy Bundle Resources: Should have nothing. (Later, you may want test-specific resources.)

**Build Settings of test target:**

*   Bundle Loader should be `$(BUILT_PRODUCTS_DIR)/TestApp.app/TestApp`
*   Test Host should be `$(BUNDLE_LOADER)`

**Scheme of main target:**

*   Test -> Info should specify the test target

But even if I make all these changes, your project still has the odd behavior. The simulator sometimes gets a version of the app named, literally, ${PRODUCT_NAME}. Even debugging the app sometimes shows "Debug ${EXECUTABLE_NAME}" in the Log Navigator. So something else is awry, and I don't know what.

The best solution is to create a new project from scratch, specifying "Include Unit Tests". I've verified that this works.

# cakephp - 当一个动作调用另一个动作时，CakePHP auth 组件不起作用

> ID：12546251
> 
> 赞同：0
> 
> 时间：2012-09-22T17:49:38.757
> 
> 标签：cakephp, authentication

所以我有一个案例，我有一个动作（基于某些条件）会翻转到同一个控制器中的另一个动作。

现在，初始操作允许具有给定角色（教练或培训师）的人员执行，但后续操作仅允许教练执行。

但是，因为他们没有直接访问第二个操作（仅通过中间操作），所以 Auth 组件不会阻止它触发。这是一些代码：

```
public function isAuthorized($user) {
    switch($this->action) {
        case "bulkAction":
            if ($user['role'] == ('coach' || 'trainer') ) {
                return true;
            }
            break;
        case "bulkDelete":
            if ($user['role'] == 'coach') {
                return true;
            }
            break;
    }
    return parent::isAuthorized($user);
}

public function bulkAction() {
    switch($this->request->data['Action']) {
        case "delete":
            $this->bulkDelete();
            break;
    }
} 
```

同样，当 bulkAction 将数据发送到 bulkDelete 操作时，Auth 似乎完全被绕过了，并且该操作通过了。如何确保其他操作调用的操作仍会根据控制器的 isAuthorized 回调进行检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T20:43:27.970

首先，一个动作调用另一个动作是非常糟糕的设计，不应该这样做。您的所有用户都应该只调用 bulkAction($type = null) 操作。使用参数 $type 来指定类型。因此，您的网址将类似于 /foo/bulkAction/edit /foo/bulkAction/delete 等，并且您的 $type 参数将接收值“编辑”、“删除”等。在控制器中创建各种受保护的方法，其中包含每个功能通过您的 bulkAction 键入并根据需要调用它们。然后在您的 isAuthorised() 方法中，通过检查用户角色和 $this->request->params['passed'] 中可用的类型来返回 true 或 false。如果您愿意，您也可以使用命名参数而不是使用参数来执行操作，因此该操作将使用 bulkAction()，并且您的 url 将类似于 /foo/bulkAction/type:delete。

# c++ - Qt：查询 QWidgets 在屏幕上的实际可见性——不是“isVisible()”，更像是“isRendered()”

> ID：12546252
> 
> 赞同：3
> 
> 时间：2012-09-22T17:49:39.903
> 
> 标签：c++, qt

我正在考虑生成在给定时间在某个 QWidget（甚至完整的 QWindow）内呈现/显示的某些 Qt 对象的列表。

使用遍历“QObject::children()”返回的列表和 Qt 属性“可见”并没有真正帮助：QWidgets 可能已将“可见”设置为“真”，但在当前屏幕布局中不可见. 例如，封闭的 QMenu 中的 QActions。

是否有其他想法可以在运行时访问此类信息？目前，我担心接触 Qt 源代码并连接到某些渲染功能可能是一种选择......

似乎“或多或少”起作用的是使用 QApplication::widgetAt(QPoint) 迭代当前窗口内的所有点。但这对于实时应用程序来说是无法使用的缓慢......

动机：我想根据显示元素的类型、面积和数量随着时间的推移“测量”（Qt-）应用程序的复杂性。我知道这是一项相当复杂的任务......但笔和纸并不是一个真正可行的选择;-)

# macos - 如何替换 AppleScript 中的“\n”？

> ID：12546253
> 
> 赞同：4
> 
> 时间：2012-09-22T17:49:43.403
> 
> 标签：macos, applescript

我想替换 Applescript 中的“\n”。每当我写下它时，它只会将后面`\n`的内容带到下一行。我怎么做？

```
set newVar to my replaceText("\n/blah-blah", "") 
```

编辑：

```
set newVar to my replaceText(linefeed, "", newVar)
log newVar 
```

`newVar`仍然打印`\n`到最后。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-22T17:55:19.420

找到解决您问题的方法，转到首选项-> 编辑并检查字符串中的转义选项卡和换行符

[http://forums.macrumors.com/showthread.php?t=1395073](http://forums.macrumors.com/showthread.php?t=1395073)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-22T19:21:24.373

这应该抓住他们：

```
set oldText to "line 1
line 2
line 3"

set AppleScript's text item delimiters to {return & linefeed, return, linefeed, character id 8233, character id 8232}
set newText to text items of oldText
set AppleScript's text item delimiters to {" "}
set newText to newText as text 
```

使用 "blah\n" 作为 oldText![在此处输入图像描述](../Images/43cc4fae8fd29467570468f140ef1879.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T18:24:30.340

使用`linefeed` [AppleScript 常量](https://developer.apple.com/library/mac/documentation/applescript/conceptual/applescriptlangguide/reference/ASLR_classes.html#//apple_ref/doc/uid/TP40000983-CH1g-DontLinkElementID_621)：

```
set newVar to my replaceText(linefeed & "/blah-blah", "") 
```

# php - MySQL，在查询中安全地使用保留字

> ID：12546267
> 
> 赞同：1
> 
> 时间：2012-09-22T17:51:36.153
> 
> 标签：php, mysql, reserved-words

我需要从带有名为 的 id 键的查询中返回一个多维数组`key`。（需要亚马逊 S3 API中的*对象键）*

例子：

```
Array ( [0] => Array ( [key] => 8 ) [1] => Array ( [key] => 7 ) [2] => Array ( [key] => 6 ) ) 
```

问题：`key`是 MySQL 中的保留名称。我**必须**使用名称键。

以下查询给出错误

```
SELECT `file_name` AS key FROM (`uploads`) 
```

但是在周围添加反引号`key`不会产生错误

```
SELECT `file_name` AS `key` FROM (`uploads`) 
```

继续这样安全还是有更好的方法？我正在考虑在 PHP 中重命名数组中的 id 键，但在查询中这样做似乎更快

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T18:00:33.897

如前所述，使用反引号。

来自[MYSQL 文档](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)

如果您按照第 9.2 节“模式对象名称”中的描述引用保留字，则允许它们作为标识符：

```
mysql> CREATE TABLE interval (begin INT, end INT);
ERROR 1064 (42000): You have an error in your SQL syntax ...
near 'interval (begin INT, end INT)'

mysql> CREATE TABLE `interval` (begin INT, end INT);
Query OK, 0 rows affected (0.01 sec) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T17:56:02.510

在查询中远离表字段周围的保留关键字始终被认为是最好的方法...如果您在查询中使用保留关键字，则`backtick`允许您使用保留关键字...

正如标准`backtick`中未定义的那样`ANSI SQL`，当您从 MySQL 环境迁移时，它可能会产生问题......

# php - getLoginURL 不包括 client_id 参数

> ID：12546268
> 
> 赞同：0
> 
> 时间：2012-09-22T17:51:43.193
> 
> 标签：php, facebook

我正在尝试在我的网站上实施 FB 登录系统。我从最简单的测试登录页面开始，并希望从那里构建。

当我使用该`$facebook->getLoginUrl()`方法时，每次单击生成的 URL 都会产生错误。

我注意到 getLoginUrl() 生成的 URL 不包含 URL 字符串中的 client_id 参数。文档中似乎没有任何关于必须在 getLoginUrl 调用中设置该 client_id 的内容。我假设它是从 Facebook 对象的属性中提取的。

这是我的代码及其输出。

```
require_once("php-sdk/facebook.php");
$config = array();
$config[‘appId’] = /* my app id string */;
$config[‘secret’] = /* my app secret string */;
$config[‘fileUpload’] = false; // optional

$facebook = new Facebook($config);
$login_url = $facebook->getLoginUrl(array("scope"=>"email"));

echo  "<a href=\"$login_url\">Login with Facebook</a>"; 
```

显然 appID 和 secret 是实际值。我已经四次检查以确保它们是准确的。

生成的（编辑的）login_url 是： `https://www.facebook.com/dialog/oauth?redirect_uri=[mysite]&state=[state_str]&scope=email`

它应该是： `https://www.facebook.com/dialog/oauth?client_id=[appID]&redirect_uri=[mysite]&state=[state_str]&scope=email`

当我在浏览器中编辑 URL 以包含 client_id 时，它可以工作。显然我每次都可以自己手动创建正确的登录网址，但我想看看我使用 Facebook::getLoginUrl() 的方式是否有问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T22:47:16.557

当我看到粘贴在这里的代码时才意识到，当我复制 Facebook 文档时，它复制了应该是单引号的内容作为智能引号。因此，facebook 对象没有使用应用程序 ID 和 api 密钥正确初始化。将它们更改为单引号解决了该问题。

# java - 需要明确一个关于继承的一般概念及其在 OOP 中的实现。请参见

> ID：12546271
> 
> 赞同：2
> 
> 时间：2012-09-22T17:52:21.130
> 
> 标签：java, oop, inheritance

我很好奇“继承”的概念是如何在面向对象编程的世界中发生的。让我解释一下我的困境（我在学习 Java 时遇到了这个困境，但我希望我的问题本质上是通用的）：

假设有一个 A 类和一个 B 类。A 类**“继承”** B 类。这实际上是什么意思？编译器是否创建了一个**“新”**类，然后将其*实例*化为一个对象，该对象在幕后包含类 A 和 B 的元素？如果是这样的话，那么访问限制是如何根据访问说明符实现的呢？

有那么一刻，我想知道它是否以以下方式发生：

创建一个 A 类的对象，然后创建一个 B 类的对象。Java 然后以某种方式将 A 的成员“链接”到 B 的成员，并使其看起来好像它们属于同一个类，并且它根据访问说明符进行操作。

但后来，我突然想到这个理论有问题。假设两个不同的类，B 和 C 继承类 A。那么，如果我们要创建 B 类和 C 类的对象，那么它们将拥有 A 类元素的 OWN 副本。所以这个理论也失败了。

我只是想解释一下我心中对继承的困惑。这让我很头疼。请帮忙。

编辑：这是我在本网站上找到的与我的问题相关的讨论的链接。

[子类是否继承私有字段？](https://stackoverflow.com/questions/4716040/does-subclasses-inherit-private-fields)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T19:03:21.460

我可能会失败，但我会为你解释一下。

老实说，我认为你在构思对象编程时可能犯了一个非常经典的错误——那就是区分*对象*和*类*。几乎任何面向对象语言中的*对象创建都是**基于类定义*的构造之一。从您的问题来看，这听起来好像您在心理上建模一种 OO 语言，特别是对象继承作为聚合*离散*对象，实际上这些对象是根据聚合*类*定义定义的。

```
public class A
{
    public A();
}

public class B:A
{
    public B();
}

public class C:B
{
    public C();
} 
```

在您的 A->B->C 模型中，C 的*定义*是根据它自己的独特属性*加上*它的直系祖先 B 的所有成员，而 B 又是根据它自己的独特属性*加上*所有成员来定义的它的直接祖先 A. 创建对象的过程仍然是一个独特且离散的事件，并且该对象尽管具有多层遗产，但在实例化时仍然只是*一个对象*。

关于某些成员的可见性：当一个类作者设计和构建一个类时，他会从两个不同的角度对他提供的内容做出某些决定：向类的消费者公开的内容，以及对子类公开或可用的内容. 声明为私有的成员和字段都是后代类的一部分，即使它们“合同”禁止被子类访问。您可以粗略地类比，电视具有开/关按钮、音量控制和颜色控制的“公共”界面，但具有不针对消费者的“内部”控制，例如内部电子元件或电源供应。即使它们对消费者或子类不“可见”或“可用”，它们仍然非常存在。

现在，也就是说，大多数 OO 语言中的构造反映了您描述的属性 - 多个对象 - 并且涉及称为*组合*（或者，有时是*Aggregation* ）的设计模式。这是一个类不是从祖先*派生*的地方类 - 通常是因为该类被声明为“密封”（C#）或“最终”（Java）（或其他禁止继承的名称）。这迫使有兴趣使用该类的开发人员使其成为另一个类的*成员*，例如当类的对象被实例化时，你确实*有*两个类的离散*对象*。

您可能有以下情况：

```
public final class InterestingThing
{
    //definitions
    public InterestingThing()
}

public final class MyThing
{
    InterestingThing _interestingThing = new InterestingThing();

    public MyThing()
} 
```

这与您在原始问题中所描述的场景非常相似，其中 MyThing 的创建暗示了InterestingThing 的*独特*创建。请记住，这种结构通常也是由*感兴趣的原始类的设计和定义所强制的。*

归根结底，对象是由它们的类定义的，多重继承的类仍然只是一个类，但是在一个基于良好的增量对象设计的精致的、希望越来越健壮的层次结构中。

我希望，在某种程度上，这个解释有助于回答你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T19:36:45.567

> A 类“继承”B 类。这实际上是什么意思？

如果类 A 扩展类 B，它继承 B 的*所有*成员（字段和方法），即类 A 将拥有这些成员，即使它们没有在类 A 的主体中声明。

是否允许 A 类访问特定成员是不相关的事情。

> 创建一个 A 类的对象，然后创建一个 B 类的对象。Java 然后以某种方式将 A 的成员“链接”到 B 的成员，并使其看起来好像它们属于同一个类，并且它根据访问说明符进行操作。

不，A 类的单个对象被创建。该对象恰好也具有所有继承的成员。例如，如果您有：

```
class B {
    private int x;
}

class A extends B {
    private int y;
} 
```

运行时将为类 A 的每个对象存储 的值`x`和 的值`y`。

`x`通过验证 A 的源代码在编译时不使用该名称，并通过验证 A 的字节码在运行时加载类时`x`不引用字段来强制执行类 A 中的代码不访问值。`x`换句话说，访问修饰符独立于内存布局。

# iphone - AudioQueueGetProperty(queueObject, kAudioQueueProperty_IsRunning, &status, &statusSize) 为状态返回垃圾

> ID：12546273
> 
> 赞同：0
> 
> 时间：2012-09-22T17:52:39.387
> 
> 标签：iphone, objective-c, ios, ios6

刚刚在将现有应用程序更新到 iOS 6 时遇到问题。

在我的 sound.h 文件中

```
AudioQueueGetProperty(queueObject, kAudioQueueProperty_IsRunning, &status, &statusSize); 
```

将状态设置为 iOS6 的一些垃圾值。

我有一个 iPod，在其上运行此函数时，状态为 0 或 1。

对于 iOS 6，我使用的是模拟器和 Xcode 4.5 beta 4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:40:55.883

我也有这个问题。如果您对“状态”使用“布尔”，请尝试将其更改为“整数”。

不知道他们做了什么来打破它，但这似乎解决了它 - 无论如何对我来说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T08:38:33.647

处理好了 我使用 AudioQueueGetPropertySize(...) 初始化了 statusSize。它将 statusSize 初始化为正确的值。以前硬设置为 32 会导致问题。

# android - Android Accelerometer 显示汽车刹车和转弯的 GForce

> ID：12546275
> 
> 赞同：1
> 
> 时间：2012-09-22T17:52:47.797
> 
> 标签：android, accelerometer

创建一个程序来查看我的汽车的 gforce 我有问题。我可以读取加速度计的 x、y、z 值，但我怎样才能从那里获得 gforce。

我读了一些类似 sqrt(x*x+y*y+z*z) 但我想在 x 和 y 中使用 gforce。

我应该使用 Sensor.TYPE_LINEAR_ACCELERATION 还是 Sensor.TYPE_LINEAR_ACCELERATION？

该工具的目标是在 aDyno 中拥有类似 G-Meter 的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:11:13.063

使用 Sensor.TYPE_LINEAR_ACCELERATION 结果值将是加速度减去重力加速度。

# google-maps - 有没有办法构建不重定向到谷歌地方的移动友好谷歌地图网址？

> ID：12546280
> 
> 赞同：0
> 
> 时间：2012-09-22T17:53:26.337
> 
> 标签：google-maps

我正在尝试构建谷歌地图网址并将其发送到移动浏览器。打开网址时，我希望它显示带有标记的地理点的谷歌地图。我已经看到堆栈问题：[我应该在 Google Maps URL 中使用哪些参数来访问 lat-lon？](https://stackoverflow.com/questions/2660201/what-parameters-should-i-use-in-a-google-maps-url-to-go-to-a-lat-lon)那里的答案非常适用于 iphone 和标准 PC/Mac 浏览器。但是我打开了我创建的链接

```
https://maps.google.com/maps?z=18&t=h&q=loc:51.5+-0.07 
```

使用 Opera Mobile 并被重定向到带有类似 url 的 google 地方

```
maps.google.com/m/local?z=18&t=h&q=loc:51.5+-0.07 
```

并且文本框充满了

```
loc:51.5 -0.07 
```

即地理点。看不到地图，在文本框中搜索自动填充的详细信息并没有给我任何信息。当我试图在我的 mac 上导航到这个 url 时，它给了我一个 404 错误。有没有办法构建不会重定向到谷歌地方的移动友好谷歌地图网址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:59:19.883

启动 Google 地图的参数未记录在案，这意味着它们可能会在不通知的情况下更改。如果您想要的只是一张图片，您可能希望使用 Google Maps API，例如静态地图 API ： [https](https://developers.google.com/maps/documentation/staticmaps/) ://developers.google.com/maps/documentation/staticmaps/ 或 JavaScript API： [https： //developers.google.com/maps/documentation/javascript/](https://developers.google.com/maps/documentation/javascript/)

这样，您也可以将人员保留在您自己的应用程序中。

# php - Mysql 选择每个项目的 5 行（使用 IN 运算符）

> ID：12546282
> 
> 赞同：0
> 
> 时间：2012-09-22T17:53:45.877
> 
> 标签：php, mysql, limit, greatest-n-per-group

我一直试图解决这个问题好几个小时，似乎我被困住了。

当我想要在下面的查询中做的是我将一些位置 ID 传递给`IN`操作员并且我不希望 MySQL 返回所有结果（表太大）但每个位置 ID 只有 5 个项目（如果项目存在） .

我暂时放了一个`LIMIT 100`，直到我在你的帮助下完成它。

这是查询：

```
$sql = "SELECT SQL_CACHE deals.deal_ID, deals.slug, deals.url, deals.previous_price, deals.title, deals.image, deals.price, deals.end, deals.purchases, deals.date_added,
        deals_locations.location_ID, deals.hits
        FROM deals
        INNER JOIN deals_locations
        WHERE deals.status = 'active'
        AND deals_locations.deal_ID = deals.deal_ID
        AND deals_locations.location_ID IN (".implode(', ', $location_IDs).")
        GROUP BY deals.deal_ID
        LIMIT 100;"; 
```

非常感谢您的宝贵时间。

**编辑：**现在我的查询输出如下所示：

```
SELECT SQL_CACHE deals.deal_ID
    ,deals.slug
    ,deals.url
    ,deals.previous_price
    ,deals.title
    ,deals.image
    ,deals.price
    ,deals.end
    ,deals.purchases
    ,deals.date_added
    ,deals_locations.location_ID
    ,deals.hits
FROM deals
INNER JOIN deals_locations
WHERE deals.status = 'active'
AND (
    SELECT COUNT(*) FROM deals
    WHERE deals.deal_ID = deals_locations.deal_ID
) <= 5
AND deals_locations.deal_ID = deals.deal_ID
AND deals_locations.location_ID IN (1, 2, 3, 5, 7, 12, 13, 26, 27, 28, 29, 30, 31, 34, 35, 36, 38, 39, 40, 41, 42, 43, 44, 46, 49, 52, 53, 54, 55, 56, 60, 62, 64, 65, 66, 67, 68, 69, 70, 72, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 89, 90, 97, 107, 10, 21, 32, 33, 37, 51, 4, 6, 8, 9, 11, 14, 15, 16, 17, 18, 19, 20, 22, 23, 24, 25, 45, 47, 48, 50, 57, 58, 59, 61, 63, 71, 73, 84, 85, 86, 87, 88, 91, 92, 93, 94, 95, 96, 98, 99, 100, 101, 102, 103, 104, 105, 106, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160)
GROUP BY deals.deal_ID; 
```

但仍显示同一位置的超过 5 条记录。

**编辑2：**我已经尝试过这种`UNION ALL`方法并且似乎正在工作。现在我得到了 30 行的总结果，但我担心查询的大小。

这是我的查询现在的样子：http: [//pastebin.com/r6vyG594](http://pastebin.com/r6vyG594)

太大了，`explain`不能发到网上。我应该怎么做才能使查询高效且尺寸更小？

执行大约需要 0.2158 秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T18:08:52.570

我可以看到两种方法：

1 子查询而不是 php 内爆：

```
...
AND deals_locations.location_ID IN (SELECT id FROM deals_locations WHERE .... LIMIT 5)
GROUP BY deals.deal_ID
... 
```

编辑：MySQL 不支持限制子查询

2 在多维数组中创建/使用 5 个元素时限制您的数组

`implode(', ', $locations_IDs[0])`等等。

你也可以尝试做一个查询/ID

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-22T18:18:26.487

首先，我将在您的内部连接中添加一个 ON 语句：

```
$sql = "SELECT SQL_CACHE deals.deal_ID, deals.slug, deals.url, deals.previous_price, deals.title, deals.image, deals.price, deals.end, deals.purchases, deals.date_added,
    deals_locations.location_ID, deals.hits
    FROM deals
    INNER JOIN deals_locations ON deals_locations.deal_ID = deals.deal_ID AND deals_locations.location_ID IN (".implode(', ', $location_IDs).")

    WHERE deals.status = 'active'
    GROUP BY deals.deal_ID
    LIMIT 100;"; 
```

在上面的示例中，我已将与 deal_locations 相关的两个 where 语句移至 join 语句中。这将限制从该表连接多少记录...

# javascript - Node.js 服务器出现脚本和图像问题

> ID：12546290
> 
> 赞同：1
> 
> 时间：2012-09-22T17:54:30.163
> 
> 标签：javascript, jquery, node.js

我刚开始使用 node js，我已经在上面移动了我的一个网站：

```
var http    =   require('http');
var fs      =   require('fs');

var app = http.createServer(function (req, res) {

    fs.readFile('./index.html', 'utf-8', function(error, content) {
        res.writeHead(200, {'Content-Type' : 'text/html'});
        res.end(content);
    });
});
app.listen(8080); 
```

index.html 是我的网站主页。只有 html 它可以工作，但如果我在其中添加标签（例如包括 jquery），它会在 firebug 中给出 JS 错误：未捕获的语法错误：jquery.js 中的意外令牌 <，然后当然是“$ 未定义”。它也不加载图像。

我真的不需要做一些路由或使用 Express 框架或任何东西，它只是一个简单的单页网站。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T18:02:41.157

您的服务器未处理对图像或其他资源的请求。所有请求都被给予相同的`./index.html`页面响应。

这意味着如果页面中包含外部脚本或图像，则当浏览器对这些资源发出请求时，`index.html`将改为传递原始页面。

NodeJS 是相当低级的。您需要将服务器设置为根据每个请求的 URL 手动处理对不同类型资源的请求。

最好的办法是通读一些 NodeJS 教程。它们应该涵盖提供内容的基础知识，尽管其中许多不会处理较低级别的细节，并且会建议像 Connect 或 Express 这样的包。

将您的代码更改为此，您将看到正在请求的所有资源。

```
var http    =   require('http');
var fs      =   require('fs');
var url     =   require('url');
var path    =   require('path');

var app = http.createServer(function (req, res) {

    var pathname = url.parse(req.url).pathname;
    var ext      = path.extname(pathname).toLowerCase();

    console.log(pathname);

    if (ext === ".html") {
        fs.readFile('./index.html', 'utf-8', function(error, content) {
            res.writeHead(200, {'Content-Type' : 'text/html'});
            res.end(content);
        });
    }
});
app.listen(8080); 
```

# matlab - 在matlab中创建变量以包含一个数字

> ID：12546293
> 
> 赞同：0
> 
> 时间：2012-09-22T17:54:54.777
> 
> 标签：matlab, variables

在我的函数中，我将创建一个仅包含一个数字的变量。我如何初始化它？我必须将它初始化为 0 值，或者我可以简单地将其初始化为函数`var;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T19:59:09.630

在 Matlab 中，变量是动态初始化的。内存分配与初始化之间没有 C++ 或 Java 等价物。

例如：

C代码：

```
 int x; // Allocate memory on the stack for integer.
 x = 5; // Assign the value 5 
```

Matlab代码：

```
 x = 5;  %# Allocate memory and assign the value 5 
```

您**不能通过**以下方式将其分为两部分：

```
 x; %# SYNTAX ERROR! x is not defined yet.
 x = 5; 
```

* * *

另外，我不确定您的意思是否`var`是某种关键字，但如果您认为它是 - 您就错了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T17:56:49.187

```
var = 0; 
```

只需将其设置为数字。无需初始化。Matlab 变量是完全动态的。

你也可以做类似的事情

```
global myvar; 
```

这将创建一个等于空列表 [] 的变量

您也可以覆盖变量而不必担心类型。

```
myvar %equal to []
myvar = 1543 % equal to 1543
myvar = 'a string hello' %Now myvar is a string
myvar = {item1, item2, item3} % now myvar is a cell array containing 3 items. 
```

# jquery - 当宽度在表格中硬编码时，可以使用 jQuery 将表格的宽度更改为 100%？

> ID：12546294
> 
> 赞同：0
> 
> 时间：2012-09-22T17:55:08.307
> 
> 标签：jquery, iframe, html-table, width

我正在开发一个通过 iFrame 构建某些内容的网站。框架内的内容位于一个应用了静态宽度的表格中。该表没有类或 ID。无论如何我可以用jQuery将宽度更改为100％吗？同样，我无法访问这张桌子，它正在被装裱。

这是有问题的表格：

```
<table cellspacing="0" cellpadding="0" border="0" width='800'> 
```

它的框架是这样的：

```
<iframe src="URL TO CONTENT" width="900" height="1500" style="margin:10px 0 10px 10px;"></iframe> 
```

我无论如何都想不出让这个工作？任何人都知道如何将表格宽度更改为 100%？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T18:02:24.027

如果 iframe 位于外部域中，则无法访问 DOM。

# javascript - JavaScript/jQuery 动态函数绑定和 ajax

> ID：12546300
> 
> 赞同：0
> 
> 时间：2012-09-22T17:55:37.420
> 
> 标签：javascript, jquery, ajax, function

我正在尝试构建 UI 元素的动态列表。我现在可以对 UI 列表进行硬编码，一切正常。但是，我希望它是可扩展的，因此我试图找出一种传递 id 标签和要调用的相应函数的方法。本质上，我的 ajax 调用的回调函数没有被执行，尽管我发布了正确的数据，并收到了正确的响应。这是代码：

```
myModule = function () {
  var titleUI = Object.create(ChainUI());
  var memcachedId = '<?php echo $memcachedId;?>';
  return {
    printChain: function(data) {
      alert("printchain");
      var territories = jQuery.parseJSON(data);
      titleUI.makeChainTable();
      territories.forEach(function(territory) {
        titleUI.territoryDisplay(territory);
      }); 
      titleUI.tableDecorator($('#chainTable'));
    },
    loadChain: function() {
      titleUI.destroyChainTable();
      var url = 'traffichandler.php';
      var instruction = {'instruction': 'titleChain', 'method': 'printChain', 'memcachedId': memcachedId.toString()};
      $.post(url, instruction, this.printChain);
    },
    loadDefault: function() {
      titleUI.loadUI(['Title Chain'], [this.loadChain]);
    }
  };
}(); 
```

对应的titleUI代码如下：

```
var ChainUI = function() {
 return {
 loadUI: function(uiList, funcList) {
  $('#uiFunctions').empty();
  for(var i in uiList) {
    var toDom = '<li id="'+uiList[i]+'">';
    toDom += uiList[i];
    toDom += '</li>';
    $('#uiFunctions').html(toDom);
  }
  for(var i = 0; i < uiList.length; i++) {
    var myFunc = funcList[i];
    $('#uiFunctions').delegate($('#'+uiList[i]), "click",
      function() {myFunc();}
    );
  }
}, 
```

}

在 myModule.loadDefault 中，我可以让 this.loadChain 触发。我无法让 $.post 中的 this.printChain 工作。如果删除所有动态的东西 this.printChain 没有问题。不要太拘泥于语法，因为我的语法很好。如何让 ajax 调用恢复工作？谢谢！

# iphone - 带有修改的 .m34 的 CATransform 3D 会破坏 iOS6 中的视图层次结构/排序，但不会破坏它应用到的视图

> ID：12546308
> 
> 赞同：4
> 
> 时间：2012-09-22T17:56:22.723
> 
> 标签：iphone, objective-c, ios, 3d, transform

**前言，这并不是因为我做错了变换而失去了屏幕外的视野，这更奇怪。**

问题是，如果我使用 .m34 变换来实现我需要的透视，视图层次结构会中断，但删除变换并且它会正确绘制所有内容。

这是一个例子。

我有一个背景图像 (subviewOne)、一个菜单 (subviewTwo) 和一个对象，位于我将 CATransform3D 应用于 (subviewThree) 的所有对象之上。

简单代码：

```
CALayer *layer = subviewThree.layer;
CATransform3D perspectiveTransform = CATransform3DIdentity;
perspectiveTransform.m34 = -1.0 / 500;
layer.transform = perspectiveTransform; 
```

在应用此代码之前，视图层次结构曾经并且仍然在 iOS 5 上：

```
(bottom to top)
subviewOne->subviewTwo->subviewThree 
```

应用它后，我最终得到：

```
(bottom to top still)
subviewTwo->subviewOne->subviewThree 
```

现在，subviewThree 仍然应用了透视变换，并且位于正确的位置，在其他所有内容之上，与 iOS5 上相同。但是，Menu/subviewTwo 现在被背景图像/subviewOne 隐藏了，我所做的任何事情都不会让它被绘制在 subviewOne 之上。再多的 insertSubviewAtIndex:、bringSubviewToFront、sendSubviewToBack 等，都不会使视图正确绘制。

这是非常特殊的，特别是因为无序绘制的视图***没有***应用任何类型的 CATransform3D。

我已经在两个不同的应用程序和多个设备 6 个设备中独立验证了这一点。iOS5 正确绘制了所有内容，如果我删除这四行，则所有内容都正确绘制，但我在 iOS 6 上尝试过的任何内容都无法阻止 .m34 破坏视图顺序。它并不总是像我提供的示例那样简单，但这是我目睹的最明显的案例。

有没有其他人遇到过这个问题，解决了这个问题？

**编辑：更多信息以供评论。**

是的，额外的 *.

图有一个 Imageview、QuadCurve Menu 和 Textview。

我在 viewDidLoad 中使用 .m34 调用该方法，但将其换成 viewDidAppear 以便快速检查。

没关系。不要误会我的意思，当您调用时，子视图会以正确的顺序列出

```
NSLog(@"%@", [self.view.subviews description]); 
```

它们只是没有正确绘制在屏幕上。

无奈之下，我写了一些疯狂诡异的代码，结果发现如下。

我可以调用延迟 10 秒绘制菜单的方法，

```
[self performSelector:@selector(createQuadCurveMenu) withObject:nil afterDelay:10]; 
```

结束于

```
[self.view addSubview:menu] 
```

以及完全多余的

```
[self.view bringSubviewToFront:menu] 
```

并且它仍然绘制在设置为 .xib 中最低子视图的 imageView 后面。

我已经验证了这两种方法。我可以进入 .xib 并将 imageView 设置为隐藏，然后再次运行我可以看到菜单，现在 imageView 没有覆盖它。我也可以只注释掉将 .m34 转换应用于 textView 的代码，然后菜单再次正确显示在 imageView 的顶部。同样，这一切都不会发生在 iOS5 和 iOS4 上。

在这一点上，我开始认为这是 iOS6 本身内部的一个错误，并且一直在等待 NDA 到期，所以我可以在这里询问其他人是否经历过它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T17:58:10.767

很确定这是一个 iOS 6 错误：我在这里写过博客：[iOS 6 Rendering Bug: 3D-Rotation Causes Layers to Render without Respect for View Hierarchy](http://tech.xtremelabs.com/ios-6-rendering-bug-3d-rotation-causes-layers-to-render-without-respect-for-view-hierarchy/)。

好消息：您可以通过在受影响的图层上设置 zPositions 来解决该错误：按照视图层次结构的递增顺序设置 zPositions。所以如果我理解正确，你想要：

```
subviewOne.layer.zPosition = 0;
subviewTwo.layer.zPosition = 1000;
subviewThree.layer.zPosition = 2000; 
```

查看博客以获取更多信息，包括指向我在 Apple 中记录的错误的 Open Radar 版本的链接。

此外，这可能被认为是这篇文章的重复：[iOS 6 view hierarchy nightmare](https://stackoverflow.com/questions/12538468/ios-6-view-hierarchy-nightmare/12607328#12607328)。尽管您描述的症状不同，但它具有相同的错误来源和解决方案。

# qt - QWebView：如何加载没有图像的网页？

> ID：12546310
> 
> 赞同：2
> 
> 时间：2012-09-22T17:56:44.550
> 
> 标签：qt, qwebview

如何防止 QWebView 加载图像（出于节省流量的原因）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T13:26:22.447

可以在 QWebView 的设置中禁用它：

```
web_view = QWebView()
web_view.settings().setAttribute(QWebSettings.AutoLoadImages, False) 
```

# database - “tzname”字段/时区标识符名称的最大长度

> ID：12546312
> 
> 赞同：21
> 
> 时间：2012-09-22T17:57:20.757
> 
> 标签：database, timezone, schema

我正在尝试查找时区标识符的最大长度。这是用作时区名称的字符串（例如“America/New_York”）。tz 数据库没有帮助；我找不到实施细节。

[Microsoft（.NET Framework 4.5）建议最大长度为 32](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.id.aspx)，但这似乎是他们注册表的限制。

[libc 指向一个名为“_POSIX_TZNAME_MAX”的限制，长度为 3 个字符](http://www.gnu.org/software/libc/manual/html_node/Minimums.html)，但这是 POSIX 合规性的绝对最低要求。通常，我猜一个实现会使用更多。

所以真正的问题是：安全存储时区“tzname”/标识符名称的可接受字符串长度是多少？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-22T18:01:29.557

为什么不使用不关心长度的容器——例如`std::string`？

现在，碰巧我最近正在使用以通用 csv 格式提供的 TZ db（例如，[在 Boost 的文件中](https://github.com/boost-vault/date_time/blob/master/date_time_zonespec.csv)），但在 Boost 源中也使用了相同的格式。

有了这些数据，我看到的最大长度为 28：

```
R> library(RcppBDT)                      # R package interfacing Boost Date_Time
Loading required package: Rcpp
R> tz <- new(bdtTz, "America/Chicago")   # init. an object, using my default TZ
R> tznames <- tz$getAllRegions()         # retrieve list of all TZ names
R>
R> length(tznames)                       # total number of TZ identifiers
[1] 381
R>
R> head(tznames)                         # look at first six
[1] "Africa/Abidjan"     "Africa/Accra"       "Africa/Addis_Ababa" 
[4] "Africa/Algiers"     "Africa/Asmera"      "Africa/Bamako"     
R>
R> summary(sapply(tznames, nchar))       # numerical summary of length of each
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
      9      13      15      15      17      28 
R>
R> tznames[ nchar(tznames) >= 26 ]       # looking at length 26 and above
[1] "America/Indiana/Indianapolis" "America/Kentucky/Louisville"  
[3] "America/Kentucky/Monticello"  "America/North_Dakota/Center" 
R> 
```

我们还可以查看直方图：

```
R> library(MASS)
R> truehist(sapply(tznames, nchar), 
+           main="Distribution of TZ identifier length", col="darkgrey")
R> 
```

![在此处输入图像描述](../Images/ca8715dae8608e4312613a2e7860d3d7.png)

这使用了我[在 R-Forge 上的 RcppBDT 包的 SVN](https://r-forge.r-project.org/scm/viewvc.php/pkg/RcppBDT/?root=rcpp)存储库中的代码，但还没有在包的[CRAN 版本](https://cran.r-project.org/package=RcppBDT)中。

# php - PHP 标头（）；可靠性

> ID：12546315
> 
> 赞同：2
> 
> 时间：2012-09-22T17:57:41.760
> 
> 标签：php, redirect, http-status-code-302

如果我不希望他们能够访问某个页面，我需要重定向用户。`header('Location: ../acc/login.php');`例如，有多可靠？浏览器可以忽略 302 错误，这是正确的方法吗？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T18:07:21.413

这在很大程度上取决于您要做什么。从技术上讲，`header()`是*有些*可靠的。只是在某种程度上，因为许多 PHP 用户在使用它时遇到了问题并且无法让它工作。

如果输出已经发送到浏览器，PHP 将阻止它工作。一个激烈的例子：

```
<protected page content here>
<?php
    header('Location: login-first.php');
    exit();
?> 
```

这根本行不通。您最终甚至会看到带有警告的错误消息。

标题 - 按照设计 - 需要在任何其他内容（响应正文）之前发送。如果响应正文已经开始并且 PHP 在这种情况下无法帮助您，则无法再发送它们。

但是，如果您在响应正文之前发送标头，则该功能将起作用。同样，显然搞砸的风险也不再那么严重了：

```
<?php
    header('Location: login-first.php');
    exit();
?>
<protected page content here> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T17:59:36.560

您可以依赖`header()`，但请确保您调用了`die()`，`exit()`或者`return`之后。否则，脚本将继续执行，这是潜在的安全问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T17:59:45.653

浏览器可以忽略`header('Location: ');`转发。

这就是为什么你应该总是在调用 header() 转发之后返回，这样如果浏览器不支持转发，你的其余代码就不会执行。

这是做事的正确方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T18:01:39.793

在显示页面的其余部分之前，我将发送标头命令，然后发送退出命令“exit()”（停止在服务器上运行 php 代码）。这样，即使他们忽略了 302 重定向，用户也永远不会收到页面内容。

是的，用户可以忽略 302 重定向：

[http://www.webmasterworld.com/html/3604591.htm](http://www.webmasterworld.com/html/3604591.htm)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-22T18:02:46.513

`header`是 100% 可靠的。

但是`header('Location: ../acc/login.php')`将在浏览器中评估到您网站上的真实位置，并且 ../acc/login.php 不会形成有效的 url！

# file-upload - ios6文件上传不适用于摘要身份验证？

> ID：12546321
> 
> 赞同：1
> 
> 时间：2012-09-22T17:58:30.020
> 
> 标签：file-upload, web, ios6

听说iphone ios6[可以上传文件](http://www.mobilexweb.com/blog/iphone-5-ios-6-html5-developers)。

我有一个[非常简单的 PHP 上传表单](https://github.com/kaihendry/FTP2.0/blob/master/upload.php)，但它不起作用。

[![ios6文件上传不工作](../Images/70a74012c5c608c4a1d4cb2bc29672e5.png)](http://www.flickr.com/photos/hendry/8012643362/ "Flickr 上的 Kai Hendry 无法上传 ios6 文件")

我已经在我的桌面（Chrome 或 Firefox 或 curl）上使用了这个 PHP 脚本多年，它运行良好。ios6 上有趣的 Chromium，IIUC 使用 Safari 错误“[丢失文件](https://github.com/kaihendry/FTP2.0/blob/master/upload.php#L6)”。

有什么想法我可能会出错吗？我是 Archlinux 用户，所以我不知道 MacOSX 等。

**更新**：我在这里有一个简化的测试用例[http://ios6.dabase.com/](http://ios6.dabase.com/)问题似乎是在启用摘要身份验证的情况下上传（这就是我滚动的方式）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:04:02.557

您需要修改输入标记以支持新的[HTML 5 媒体捕获 API](http://www.w3.org/TR/html-media-capture/)。

```
<input type="file" accept="image/*" capture="camera"> 
```

# macros - 方案宏扩展中的语法错误

> ID：12546323
> 
> 赞同：0
> 
> 时间：2012-09-22T17:58:31.910
> 
> 标签：macros, scheme

只是为了理解 Scheme 宏是如何工作的，我试图定义一个新命令，`sum`它的工作方式与常见的完全一样`operator +`（即参数数量未定义）。

我编写了这段代码：

```
(define-syntax sum
  (syntax-rules ()
    ((_ arg1 arg2 args...)
     (sum (+ arg1 arg2) args...))
    ((_ arg1 arg2)
     (+ arg1 arg2))
    ((_ arg1)
     arg1))) 
```

如果我传递 1、2 或 3 个参数，它会起作用。但是有 4 个参数我得到了这个错误：

```
sum: bad syntax in: (sum 1 2 3 4) 
```

我尝试使用 DrRacket 逐步扩展宏，但它立即停止。

有人可以解释一下这个错误的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T18:47:53.220

在 Scheme 中，`...`只是另一个标识符，因此您需要在两个地方`args`的省略号 ( ) 之间留一个空格，如下所示：`...`

```
(define-syntax sum
  (syntax-rules ()
    ((_ arg1 arg2 args ...)
     (sum (+ arg1 arg2) args ...))
     ___etc___)) 
```

顺便说一句，您不需要创建宏来接受任意数量的参数。您还可以使用“rest args”：

```
(define (sum . args)
  ;; args is bound to a list of all the arguments
  (foldl + 0 args)) 
```

# java - 无法在 Spring 中使用模型和视图重定向到 jsp 页面

> ID：12546325
> 
> 赞同：0
> 
> 时间：2012-09-22T17:59:16.280
> 
> 标签：java, spring, jakarta-ee, spring-mvc

嗨，我想使用模型和视图重定向到 jsp 页面，但无法获取该页面。以下是任何人都可以帮助我的代码吗？

```
public ModelAndView login(HttpServletRequest request,
        HttpServletResponse response) throws GridException {
    ModelAndView mv = new ModelAndView("json view");
    Map map = new HashMap();
    GridMappingVO gridMappingVO=new GridMappingVO();
    String users = request.getParameter("username");
    String passwrd = request.getParameter("password");
    gridMappingVO.setUser(users);
    gridMappingVO.setPass(passwrd);
    List<GridMappingVO> searchList= gridMappingFacade.validate(gridMappingVO);
    if(users.equals(searchList.get(0).getUser()) && passwrd.equals(searchList.get(0).getPass())){
        System.out.println("validation succesfull");
        mv = new ModelAndView("searchResults");
        mv.addObject("searchList", searchList);

    }
    else{
        List<String> list = new ArrayList<String>();
        list.add("Invalid");
        map.put("error_messages", list);
        mv.addAllObjects(map);
    }

    return mv;

} 
```

}

*这是使用 http://www.springframework.org/schema/beans/spring-beans-2.5.xsd 的弹簧配置">

```
 <import resource="datasource-config.xml"/>
      <import resource="dao-config.xml"/>

<bean id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">

    <property name="prefix">
        <value>/WEB-INF/jsp/</value>
    </property>

    <property name="suffix">
    <value>.jsp</value>
    </property>

</bean>
    <bean id="xmlFileViewResolver" class="org.springframework.web.servlet.view.XmlViewResolver">
        <property name="order" value="2" />
        <property name="location" value="/WEB-INF/views.xml" />
    </bean>

<bean name="/*.html" class="com.dashboard.web.controller.GridMappingController" scope="request">
    <property name="gridMappingFacade" ref="gridMappingFacade"/>
</bean> 

<bean id="gridMappingFacade" class="com.dashboard.web.application.GridMappingFacadeImpl">
    <property name="gridMappingService" ref="gridMappingService" />     
</bean>

<bean id="gridMappingService" class="com.dashboard.web.service.GridMappingServiceImpl">
    <property name="gridMappingRepository" ref="gridMappingRepository" />       
</bean> 

</beans>* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:29:50.023

使用此代码重定向页面

```
 mv.setViewName("searchResults"); 
```

# c# - 事件时从 DataGridView 更新数据库无法正常工作

> ID：12546327
> 
> 赞同：2
> 
> 时间：2012-09-22T17:59:23.693
> 
> 标签：c#, sql, database, datagridview, sql-update

我有一个从数据库填充的 DataGridView。我有一个按钮可以将 DGV 中的更改保存到数据库中，这很好用。但是现在我希望数据库在 DGV 中的某些内容发生更改时自动更新。

我尝试了几个事件，如 CellEndEdit、CellLeave、CellValidated、CellValueChanged 和 SelectionChanged。如果我编辑单元格内容并按 Enter 或单击/选择其上方或下方的单元格工作正常，则更改将保存到数据库中，但如果我在同一行中按选项卡或单击/选择旁边的单元格，则更改未保存。上述事件都没有帮助我解决这个问题。

//编辑

一些示例代码：

我这样填写我的 DGV

```
query_em = "select * from Table;";
try
{
    dt_em = new DataTable();
    da_em = new OleDbDataAdapter(query_em, connString);
    cb_em = new OleDbCommandBuilder(da_em);
    bs_em = new BindingSource();

    da_em.Fill(dt_em);
    bs_em.DataSource = dt_em;
    dgv_em.DataSource = bs_em;
    dgv_em.AutoResizeColumns(DataGridViewAutoSizeColumnsMode.AllCells);
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
    throw;
} 
```

通常我用一个按钮更新它们

```
private void bt_save_em_Click(object sender, EventArgs e)
    {
        try
        {
            da_em.Update(dt_em);
            MessageBox.Show("Database updated.");
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
            throw;
        }
    } 
```

但我想让这样的东西正常工作，但它没有。上面描述了确切的问题。

```
private void dgv_em_SelectionChanged(object sender, EventArgs e)
    {
        da_em.Update(dt_em);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-25T17:34:22.390

老问题，但我找到了可能对某些人有所帮助的解决方案。事实上，datagridview（让我们称之为 dgv，我很懒 ^^）验证输入并仅在您更改行时更新数据源（通过按 enter、箭头、单击等）所以要使用的事件是`RowValidated`. 但是如果您在编辑后停留在同一行中，则不会触发此事件，例如，如果您单击同一行中的单元格。我找到了强制验证的解决方案：使用另一个事件并调用`this.validate`（`me.validate`在 vb 中）

这是一些vb示例代码（正如我之前所说，我懒得在c#中转换^^），我希望这会有所帮助：

```
Public Class Form1
   Dim ValueChanged As Boolean
   Dim da As MySqlDataAdapter

   [...]

Private Sub dgv_CellValueChanged(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles dgv.CellValueChanged
    ValueChanged = True
End Sub

//not sure this one is still usefull, i'm still working on this stuff :)
Private Sub dgv_RowValidated(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles dgv.RowValidated
    If ValueChanged Then
        ValueChanged = False
        da.Update(dt)
    End If
End Sub

Private Sub dgv_SelectionChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles dgv.SelectionChanged
    If ValueChanged Then
        ValueChanged = False
        Me.Validate()
        da.Update(dt)
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T12:10:17.590

尝试使用 CellEndEdit：

```
private void dataGridView1_CellEndEdit(object sender, DataGridViewCellEventArgs e)
        {

try
        {
            da_em.Update(dt_em);
            MessageBox.Show("Database updated.");
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
            throw;
        }

        } 
```

# java - JDK、Eclipse 和路径变量

> ID：12546333
> 
> 赞同：1
> 
> 时间：2012-09-22T17:59:54.623
> 
> 标签：java, eclipse

我正在尝试为 Android 开发设置 Eclipse，但是当我启动 Eclipse 时，我收到一条错误消息，指出它无法在 PATH 变量中找到 JDK bin 文件夹。所以我按照一些说明去设置PATH变量，却发现它已经被AMD设置了。但是，由于它存储在“路径”而不是“路径”下，我认为它可能区分大小写（对环境变量没有太多经验），并创建了新的。但这覆盖了 AMD 设置的 Path 变量，我收到一条消息，告诉我 Catalyst Monitoring 程序已停止工作。

那么如何将 Path 变量恢复到更改之前的状态，以及设置 Eclipse 的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T18:36:07.620

最简单的事情是重新安装您的视频驱动程序（催化剂控制面板） - 这应该将您的 PATH 环境变量恢复为具有`Catalyst Monitoring`程序的值。

然后，当您更新 PATH 变量时，添加：

```
;<path to JDK bin folder> 
```

到变量的末尾。这将是路径。路径变量是一个分号分隔的列表。

# c# - 用于在 POST 上创建单选按钮的 foreach 上的 NullReference 错误

> ID：12546334
> 
> 赞同：0
> 
> 时间：2012-09-22T18:00:02.770
> 
> 标签：c#, asp.net-mvc-3

我正在自学asp .net mvc3。我有一个“添加属性”表单，允许用户将属性详细信息上传到网站。我已经为这个错误苦苦挣扎了很长时间。

为简化起见，假设我的数据库中有两个表。

CustomerTypes：数据库有 1 个所有者、2 个代理、3 个商业等属性：这是由表单填充的表。

我使用 CustomerTypes（和其他此类表）来创建单选按钮。用户填写表格并选择“客户类型”选项。但是，我在提交时收到“对象引用未设置为对象的实例”错误。这是因为为 Model.CustomerTypes 设置了“null”。但是，Model.CustomerTypes 仅用于创建单选按钮。我不确定出了什么问题。代码如下：

看法：

```
@model Website.ViewModels.AddPropertyViewModel

<fieldset>
    <legend>Property</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Property.CustomerType)
        @foreach (var item in Model.CustomerTypes)
        {
            @Html.RadioButtonFor(model => model.Property.CustomerType, Convert.ToInt32(item.Value)) @item.Text
        }
    </div>

    ... 
```

添加属性视图模型：

```
namespace Website.ViewModels
{
    public class AddPropertyViewModel
    {
        public Property Property { get; set; }
        ...

        public IEnumerable<SelectListItem> CustomerTypes { get; set; }
        ...
    } 
```

控制器：

```
public ActionResult AddProperty()
    {
        AddPropertyViewModel viewModel = new AddPropertyViewModel
        {
                ...
            CustomerTypes = websiterepository.GetCustomerTypeSelectList(),
                ...
        };
        return View(viewModel); 
```

GetCustomerTypeSelectList 函数是：

```
public IEnumerable<SelectListItem> GetCustomerTypeSelectList()
{
    var customerTypes = from p in db.CustomerType
                            orderby p.CustomerTypeDescription
                            select new SelectListItem
                            {
                                Text = p.CustomerTypeDescription,
                                Value = SqlFunctions.StringConvert((double)p.CustomerTypeId)
                            };
    return customerTypes;
} 
```

POST 中的值根据选择正确设置为 Property_CustomerType

--- 添加了更多信息 --- 我将表格开头为：

```
@using (Html.BeginForm("AddProperty", "Property", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
...
} 
```

控制器是：

```
[HttpPost]
public ActionResult AddProperty(AddPropertyViewModel viewModel)
{
    if (ModelState.IsValid)
    {
        // 
        if (viewModel.File1.ContentLength > 0)
        {
            var fileName = Path.GetFileName(viewModel.File1.FileName);
            var path = Path.Combine(Server.MapPath("~/App_Data"), fileName);
            viewModel.File1.SaveAs(path);
        }

        var property = viewModel.Property;
        websiterepository.Add(property);
        return RedirectToAction("Index", "Home");
    }

    return View(viewModel);
} 
```

这是错误的屏幕截图： ![在此处输入图像描述](../Images/5672cbc09846cae804a162fc518bacf5.png)

我已经尝试提交评论这些单选按钮的表单并且它有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T08:23:30.060

问题是`CustomerTypes`在发布到服务器后渲染视图时没有填充。

如果我们查看正在执行的操作流程，我们会看到

1.  `CustomerTypes`在呈现初始页面之前填充集合
2.  您将数据发布回服务器但不保留`CustomerTypes`集合（因为没有必要）
3.  您再次渲染视图，但这次没有填充 `CustomerTypes`.
4.  轰隆隆！

在第二次返回视图之前填充 CustomerTypes 属性应该可以解决您的问题：

```
[HttpPost]
public ActionResult AddProperty(AddPropertyViewModel viewModel)
{
 [...]

 viewModel.CustomerTypes = websiterepository.GetCustomerTypeSelectList();

 return View(viewModel);
} 
```

# objective-c - 如何在 iOS 中计算时间？

> ID：12546335
> 
> 赞同：3
> 
> 时间：2012-09-22T18:00:18.390
> 
> 标签：objective-c, ios, nsdate, nstimer, nstimeinterval

我不想设置一个在经过一定时间后“触发”（并做某事）的计时器。

因此，我对`NSTimer`类及其方法不感兴趣。

我感兴趣的只是计算经过的时间*while*，例如，一些 while 循环正在执行。我猜我可以使用`NSDate`如下：

```
NSDate currentDate = [[NSDate alloc] init];

while(someConditionIsTrue)
{
    // executing..
}

timeElapsed = [self timeIntervalSinceDate:currentDate];

NSLog(@"time elapsed was: %i", timeElapsed); 
```

但是，如果我理解正确，`timeIntervalSinceDate:`只能数秒。

有没有办法可以计算以*毫秒为单位*的时间？

换句话说，**我可以计算通过时间的最小单位是什么？如何计算？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-22T18:05:47.127

查看[CFAbsoluteTimeGetCurrent()](https://developer.apple.com/library/ios/documentation/CoreFoundation/Reference/CFTimeUtils/Reference/reference.html#//apple_ref/doc/uid/20001452-CH201-F12326)

```
CFAbsoluteTime before = CFAbsoluteTimeGetCurrent();
CFAbsoluteTime after = CFAbsoluteTimeGetCurrent(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-22T18:04:58.693

你的第二种方法是正确的。将当前日期保存在`NSDate`对象中并用于`timeIntervalSinceDate:`获取从那时起经过的时间。结果将`NSTimeInterval`是浮点数类型。它以秒为单位指定时间差，但由于它是一个浮点数，它也可以存储几分之一秒。

> NSTimeInterval 总是以秒为单位指定；它在 10,000 年的范围内产生亚毫秒精度。

# vhdl - 类型与子类型和向下与 VHDL 中的整数的对比

> ID：12546339
> 
> 赞同：8
> 
> 时间：2012-09-22T18:01:08.407
> 
> 标签：vhdl

`type`VHDL和VHDL 有什么区别，`subtype`我应该在哪里使用它们？

我的理解是，这`subtype`只是主要类型之一的缩小版本，例如`integer`：`subtype small_integer is integer range -128 to 127;`所有可能在主要类型上的操作，也可能在`subtypes`（当然，有一定的限制）上。此外，最好使用它`subtypes`来防止错误。

那么 的目的是`type`什么？

`donwto`和`to`for the和有什么不一样`integers`？（为了明白这一点，这里是一个例子）
`subtype bit_index is integer range 31 downto 0;
subtype bit_index is integer range 0 to 31;`

谢谢 ！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T07:41:16.107

*   正如您所说的那样，**类型**是**subtypes**的基础；没有类型就没有子类型。然而，子类型只是在模拟中*更安全；*在真实硬件中，没有边界检查等......

*   VHDL 的标准库定义了许多基本类型供您构建，例如`std_logic`, `std_ulogic`, `std_logic_vector`(unconstrained, defined in package std_logic_1164) `integer`, `character`(defined in package standard) 等等。您自己的定义，例如`std_logic_vector(7 downto 0)`间接创建子类型（或者如果您明确定义和命名子类型，则直接创建子类型）

*   当您查看自己的枚举时，例如，在描述状态机的状态时，您需要一个类型：

    `type tState is (IDLE, DO_SOMETHING, DONE);`

*   我不确定`downto`and`to`对于整数，它似乎没用，但是 VHDL 根本没有另一种机制来定义[range](http://tams-www.informatik.uni-hamburg.de/vhdl/tools/grammar/vhdl93-bnf.html#range)，并且这种机制允许**to**和**downto**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T07:10:43.403

TO 和 DOWNTO 在印度性方面不同（最高位的 MSB 与位 0）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-19T04:29:19.547

```
std_logic_vector(7 downto 0) 
```

“ **1** 000 0001”是**MSB**，“1000 000 **1** ”是**LSB**。

```
std_logic_vector(0 downto 3) 
```

“ **1** 000 0001”是**LSB**，“1000 000 **1** ”是**MSB**。

# api - paypal PPAPIService 新SDK

> ID：12546345
> 
> 赞同：0
> 
> 时间：2012-09-22T18:01:49.393
> 
> 标签：api, sdk, paypal

关于新的 Paypal SDK，几乎没有有用的示例代码，互联网上充斥着旧 SDK 的示例。我的问题涉及对我通过权限 API 获得令牌和 secretToken 的第三方贝宝帐户发出 API 请求。

在尝试构造 PPAPIService 对象时，可能的服务名称列表在哪里？
即：$this->serviceName = $serviceName; （在构造函数中）这些的字符串语法是什么？

关于 makeRequest 方法，如何定义 $apiMethod 变量，以及 $params 变量的格式是什么？有哪些不同的参数？

如何获取授权第三方账户的账户余额的简单示例将非常有帮助。我正在使用 PHP。

从 PPAPIService.php 文件：

```
class PPAPIService
{
public $endpoint;
public $serviceName;
private $logger;

public function __construct($serviceName = "")
{
    $this->serviceName = $serviceName; //is there ANY documentation about the syntax and types of service names?
    $config = PPConfigManager::getInstance();
    $this->endpoint = $config->get('service.EndPoint');
    $this->logger = new PPLoggingManager(__CLASS__);
}

public function setServiceName($serviceName)
{
    $this->serviceName = $serviceName;
}

public function makeRequest($apiMethod, $params, $apiUsername = null, $accessToken = null, $tokenSecret = null)
{
//what are the apiMethod types? syntax? and params? type.. options...??
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T16:06:09.500

好吧，您不必直接创建 PPAPIService 对象。假设您想使用 Invoicing SDK，这就是您要执行的操作

```
$invoiceService = new InvoiceService();
$invoiceService->setAccessToken($accessToken);
$invoiceService->setTokenSecret($tokenSecret);
$createInvoiceResponse = $invoiceService->CreateInvoice($createInvoiceRequest); 
```

每个 API 都有一个服务类（例如此代码片段中的 InvoiceService），您可以根据需要对其进行实例化。API 用户名/密码是从配置文件中挑选出来的，访问令牌/令牌秘密是通过代码设置的，因为它们通常对于不同的调用往往是不同的。

顺便说一句，您要调用哪个 API？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:36:24.247

为了回答您的其他问题，新的 PayPal SDK 将所有必需的示例捆绑在 SDK 本身中。SDK + 示例可从以下网址下载

[https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index)

# .net - 确定 IEnumerable 中是否有任何元素 可以转换为 U 类型

> ID：12546352
> 
> 赞同：0
> 
> 时间：2012-09-22T18:02:27.463
> 
> 标签：.net, generics, equals, iequatable

在较新版本的 .net 中，有许多扩展方法可以接受`IEnumerable<T>`或`IEnumerable`. 一种这样的方法是`OfType<TResult>`返回一个仅包含原始序列的元素的可枚举，这些元素可以转换为指定的类型`T`。`IEnumerable`无论原始列表的类型和目标类型如何，此方法都使用非泛型处理原始列表的所有项目，非常愉快地完成了任务。如果原始列表是一个`IEnumerable<int>`并且`TResult`是`int`，它将获取原始列表的每个项目作为非泛型`object`，然后将其转换，即使它可以只使用原始列表`IEnumerator<int>`。如果原始列表是一个`IEnumerable<int>`并且`TResult`是`StringBuilder`，它同样会通过装箱原始列表中的所有项目，即使它们都不可能被转换为目标类型。

编写一个采用 an`IEnumerable<TSrc>`并将其转换为 an的方法有多难`IEnumerable<TResult>`，有效地处理原始枚举中的所有项目都保证出现在后者中的情况，或者源枚举数的类型将暗示后者将为空（假设`IEnumerable`类型支持的所有变体都将返回相同的项目序列）？可以肯定的是，人们不会经常尝试将一个序列强制转换为它已经拥有的类型，但是拥有一个具有多个类型参数的泛型类并不少见，这些类型参数有时会重叠，有时不会重叠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T18:19:20.167

`IEquatable<T>.Equals`应该与`Object.Equals`覆盖一致。我不确定直接使用`IEquatable<T>`直接提供任何价值。

在我看来，您只是想确保装箱的对象使用未装箱的值进行相等测试。你应该能够用这样的 equals 做大部分你想做的事情：

```
private static bool Equals<T1, T2>(T1 first, T2 second)
{
    // if either are boxed, try Equals with unboxed values (dynamic)
    if (typeof(T2) == typeof(object) && second.GetType().IsValueType)
    {
        dynamic dsec = second;
        if (typeof(T1) == typeof(object) && second.GetType().IsValueType)
        {
            dynamic dfir = first;
            return Equals(dfir, dsec);
        }
        return Equals(first, dsec);
    }
    if (typeof(T1) == typeof(object) && second.GetType().IsValueType)
    {
        dynamic dfir = first;
        Equals<dynamic, T2>(dfir, second);
    }
    // neither are boxed, just fall back to their Equals overrides...
    var t = Object.Equals(first, second);
    return t;
} 
```

`Enumerable.Intersect`并且`Except`只使用相同类型的集合，所以如果类型是`Object`它应该做你想要的。

### 更新：

值类型不能从基类派生。它们唯一的共同基础永远只有对象，这意味着如果你想比较两种不同的值类型，而不是专门使用一种知道你想比较的两种类型的方法，你*总是*必须装箱至少一个值——哪个`Enumerable.Intersect`和`Except`不'无论如何都接受。所以不写不同的方法是不可能的。

### 更新 2：

假设如果两种类型不能在彼此之间（或一种到另一种）之间转换，这意味着它们永远不会相等，这是一个糟糕的假设。例如：

```
public struct One
{
    public int Value;
    public override int GetHashCode()
    {
        return Value.GetHashCode();
    }
}

public struct Two
{
    public int Value;
    public override bool Equals(object obj)
    {
        if (obj is Two) return this == (Two)obj;
        if (obj is One) return this.Equals((One)obj);
        return base.Equals(obj);
    }

    public bool Equals(One one)
    {
        return one.Value == Value;
    }

    public static bool operator==(Two one, Two two)
    {
        return one.Value == two.Value;
    }

    public static bool operator !=(Two one, Two two)
    {
        return !(one == two);
    }
    public override int GetHashCode()
    {
        return Value.GetHashCode();
    }
}

// ...

    Console.WriteLine(two.Equals(one));
    Console.WriteLine(two.Equals((Object)one));
    Console.WriteLine(two.GetType().IsAssignableFrom(one.GetType()) || one.GetType().IsAssignableFrom(two.GetType())); 
```

结果为真、真和假。因此，显然两个对象可以“相等”，但不能相互转换。

# jquery - $.ajax 函数未在 chrome 中读取 csv 文件

> ID：12546353
> 
> 赞同：0
> 
> 时间：2012-09-22T18:02:39.823
> 
> 标签：jquery, ajax, google-chrome, csv

> **可能重复：**
> [绕过本地文件系统上的 Chrome Access-control-allow-origin？](https://stackoverflow.com/questions/4742467/circumventing-chrome-access-control-allow-origin-on-the-local-file-system)

我的问题很直接，我正在使用 $.ajax 函数来读取 CSV 文件，并且代码在 FF 和 IE9 上运行，但在 Chrome 中却没有......

```
<!DOCTYPE html>
<html lang="en">
<head>
<script src="http://code.jquery.com/jquery-1.8.2.min.js">
</script>
<script type="text/javascript">
$(document).ready(function () {
    $.ajax({
        type: "GET",
        url: "autorating.csv",
        contentType: "text/csv",
        success: function(data) {alert('asdsa');}
     });
});

</script>
<title>Untitled Document</title>
</head>

<body>
</body>
</html> 
```

任何帮助都会很明显......谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T18:05:53.157

您正在阅读没有服务器的本地文件。Chrome 不允许这样做。

[此链接](https://stackoverflow.com/a/4752452/1085285)供进一步阅读。

`--allow-file-access-from-files`用作更安全的解决方法。

[**参考 :: Chrome 中的问题**](http://code.google.com/p/chromium/issues/detail?id=40787&q=ajax%20local&colspec=ID%20Stars%20Pri%20Area%20Feature%20Type%20Status%20Summary%20Modified%20Owner%20Mstone%20OS)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T18:14:28.000

`XMLHttpRequest cannot load file:///F:/shane/autorating.csv. Origin null is not allowed by Access-Control-Allow-Origin.`表示您正在尝试加载 chrome 中禁止的本地文件。这是有道理的，因为您不希望任何脚本都遍历所有本地文件。除此之外，还有一种方法，即使您只需要在 HTTP-Server 上运行它。看看这个[这个。](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-22T18:05:57.780

Content-Type 必须包含字符集

`Content-Type: text/plain; charset=utf-8`

# ios - 使用 Xcode 4.5 本地化 Localizable.strings

> ID：12546355
> 
> 赞同：11
> 
> 时间：2012-09-22T18:02:41.130
> 
> 标签：ios, xcode, ios6, xcode4.5, localizable.strings

> **可能重复：**
> [本地化 - 向 localizable.strings 文件添加其他语言](https://stackoverflow.com/questions/12069175/localization-add-additional-language-to-localizable-strings-file)

使用 Xcode 4.5 SDK iOS 6.0，我无法将本地化添加到 Localizable.strings 文件。在 Xcode 4.4.1- 所有添加的语言列表下是一个“+”来添加其他语言。但是在 Xcode 4.5 中我看不到它，并且除了默认的英语之外，我无法添加任何其他语言。

![在此处输入图像描述](../Images/7ed5723a93482008d06e8a20ea901b89.png)

有人解决了这个问题吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-22T18:17:35.443

如果您在 Project Navigator 中选择您的顶级项目文件，然后在右侧区域中选择“PROJECT”下的项目，然后在“Info”窗格中右键单击“Info”窗格，您可以在其中找到一个名为“Localizations”的部分可以为您的项目添加新语言。完成后，您可以将这些语言添加到您希望本地化的任何文件中。

这适用于 Xcode 4.4.1，但我很确定 4.5 也允许这样做。

# android - Intent.makeRestartActivityTask(mainActivity) pre android 3.0 的替代方案

> ID：12546360
> 
> 赞同：1
> 
> 时间：2012-09-22T18:02:59.513
> 
> 标签：android, notifications

我在我的应用程序中有一个使用通知通知用户的服务，我阅读了关于 [响应通知](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#HandlingNotifications)的信息，但是这种方法适用于 android API 11 及更高版本是否有办法在 pre Android API 11 上做同样的事情。

# python - IOError：文件未打开以供读取

> ID：12546361
> 
> 赞同：1
> 
> 时间：2012-09-22T18:03:11.237
> 
> 标签：python

我是编程新手，我正在尝试通过[http://learnpythonthehardway.org/](http://learnpythonthehardway.org/)自学 Python 。

在练习 20 中，我们被告知要编写如下脚本：

```
from sys import argv

script, input_file = argv

def print_all(f):
    print f.read()

def rewind(f):
    f.seek(0)

def print_a_line(line_count, f):
    print line_count, f.readline()

current_file = open(input_file)

print "First let's print the whole file:\n"

print_all(current_file)

print "Now let's rewind, kind of like a tape."

rewind(current_file)

print "Let's print three lines:"

current_line = 1
print_a_line(current_line, current_file)

current_line = current_line + 1
print_a_line(current_line, current_file)

current_line = current_line + 1
print_a_line(current_line, current_file) 
```

但是，当我通过终端运行它时，它返回“IOError: File not open for reading”。我真的很困惑，不确定“不开放”是什么意思。以下是回溯消息的完整说明：

```
Traceback (most recent call last):
  File "ex20.py", line 18, in <module>
    print_all(current_file)
  File "ex20.py", line 6, in print_all
    print f.read()
IOError: File not open for reading 
```

我检查了该文件是否存在。有人可以帮忙吗？非常感谢！

更新：

我通过创建一个单独的文件夹解决了这个问题，从而将新的 .py 和 .txt 文件自己隔离到一个新文件夹中。我想知道以前的 .py 文件是否在其中发挥了作用？我之前也写过一个截断脚本，但它没有意义，因为我只执行了新的 python 文件。

# uitableview - 从嵌入在 UIScrollView 中的表中推送视图控制器

> ID：12546362
> 
> 赞同：1
> 
> 时间：2012-09-22T18:03:11.240
> 
> 标签：uitableview, view, controller, pushviewcontroller

我的观点的结构如下。我在 UITableView 的标题视图中显示目录每一章的​​封面，并在相应的表视图中显示每一章的小节。我将这些全部嵌入到分页 UIScrollView 中，它是导航控制器的 rootViewController。堆栈是：

```
UINavigationController (controlled by CatMainViewController [UIViewController])
    UIScrollView       (controlled by CatMainViewController [UIViewController])
        UITableView    (controlled by SectionViewController [UITableViewController]) 
```

我想知道如何通过 SectionViewController 上的 didSelectRowAtIndexPath 方法与 CatMainViewController 进行通信，以告诉导航控制器推送加载文档的视图控制器。

我试过类似的东西：

```
#import "CatMainViewController.m"
[CatMainViewController.self.navigationController pushViewController:newView animated:YES]; 
```

但显然这并没有那么好。任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:57:45.420

您可以将实例的引用传递给`CatMainViewController`实例`SectionViewController`，例如：

```
/* SectionViewController.h */
@class CatMainViewController;

@interface SectionViewController

// ... some properties/methods
@property (nonatomic, assign) CatMainViewController *catMainVC;
// ... more properties/methods

@end

/* SectionViewController.m */
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // ... some code
    [self.catMainVC.navigationController pushViewController:someVC animated:YES];
}

/* CatMainViewController.m */
#import "SectionViewController.h"

// when creating the SectionViewController
SectionViewController *sectionViewController = ...;
sectionViewController.catMainVC = self; 
```

这类似于`@protocol`Apple 使用的委托/方案。

# r - knitr 的子图或子标题？

> ID：12546365
> 
> 赞同：25
> 
> 时间：2012-09-22T18:03:27.327
> 
> 标签：r, latex, knitr, subfigure

是否可以使用 knitr 生成子图（带有相关的子标题）？这是一个最小的工作示例：

```
\documentclass{article}

\begin{document}

<<echo = FALSE, fig.cap = c("Some numbers.", "Some more numbers."), out.width = "0.5\\textwidth", fig.align = "center">>=

plot(1:10)
plot(30:100)

@

\end{document} 
```

这会产生两个标记为图 1 和图 2 的图，并带有定义的标题（分别）。但我希望它们被标记为“图 1a”和“图 1b”，就像您可以使用 subcaption LaTeX 包一样。

我知道有一个 knitr 选项“fig.env”，但这并不能解决它（至少不使用，例如，“fig.env = 'subfigure'”）。这里有一篇关于 Sweave 的类似帖子，但解决方案是不优雅的 hack：[http ://texblog.org/2011/12/01/sweave-subfig-controlling-figure-size-and-placement/](http://texblog.org/2011/12/01/sweave-subfig-controlling-figure-size-and-placement/)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-02T07:09:33.450

`knitr` (>= v1.5) supports [subfigures](https://github.com/yihui/knitr/issues/388#issuecomment-10926839). You can use the chunk option `fig.subcap`. Here is a minimal example.

```
\documentclass{article}
\usepackage{subfig}
\begin{document}

<<fig-sub, fig.cap='two plots', fig.subcap=c('one plot', 'the other one'), out.width='.49\\linewidth'>>=
plot(1:10)
plot(rnorm(10), pch=19)
@

\end{document} 
```

![subfigures in knitr](../Images/b1053b0c18ee47fa3b2c8796fb9a8456.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-03-03T17:21:07.007

Updating the answer from Yihui to reflect the changes in Rmarkdown in the past few years, and also the shift away from Rnw files.

As listed within the knitr [chunk options](https://yihui.name/knitr/options/), subfigures require a few additional settings to be set in the chunk header:

*   `fig.subcap` is a list of the captions for subfigures
*   `fig.ncol`: the number of columns of subfigures
*   `out.width`: the output width of the figures. You will normally set this 100% divided by the number of sub columns.

Subfigures also require the LaTeX package `subfig`. The line `\usepackage{subfig}` must therefore be included within the YAML, or if you are using an external tex template you can add this to that file.

Here is a basic template:

```
---
output: pdf_document
header-includes:
   - \usepackage{subfig}
---  

```{r fig-sub, fig.cap='two plots', fig.subcap=c('one plot', 'the other one'), out.width='.49\\linewidth', fig.asp=1, fig.ncol = 2}
plot(1:10)
plot(rnorm(10), pch=19)
``` 
```

[![enter image description here](../Images/b9d16885802c0bcdacaf0fe45ac91b8f.png)](https://i.stack.imgur.com/MjX5B.png)

## Using with ggplot2

If you are plotting subfigures which contains multiple ggplot plots, can messy as they do not line up between the plots. You may want to check out this post here on how to use cowplot to force ggplots to have the same dimensions.

[This stackoverflow post](https://stackoverflow.com/a/49142715/7347699) will help you make sure that all the plots line up as shown in the image below:

[![enter image description here](../Images/84d82928a45151841ca01007e64b0b63.png)](https://i.stack.imgur.com/C2j9B.png)

## Providing a list to subfigures

Just sharing this as a possible extension of subfigures. Something I like to use them for is feeding them a list of figures. Maybe you have produced a function which you need to run on four different trial groups, or in four separate locations. For example, here is a list of four cities in the UK:

```
```{r}
locations <- c("Southampton, UK", "London, UK", "Bristol, UK", "Birmingham, 
``` 
```

This list can then be used within the `fig.sub` and an `lapply` to produce a list of subfigures. If you need to run the

```
```{r fig-sub-2, fig.cap='A collection of maps', fig.subcap= locations, out.width='.49\\linewidth', fig.asp=1, fig.ncol = 2}
library(ggmap)
lapply(locations, function(x) 
  ggmap(get_map(x))
  )
``` 
```

[![enter image description here](../Images/471430d325fc009af6f6430e87c74330.png)](https://i.stack.imgur.com/JulJM.png)

This makes the subfigures quite robust. If I need to run my model in an extra couple of cities, all I need to do is add extra values to the `location` list and the sub figures will be the same length.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-18T20:24:25.383

你可以使用 Latex 的[subcaption](http://en.wikibooks.org/wiki/LaTeX/Floats,_Figures_and_Captions#Subfloats)包。

```
\documentclass{article}
\usepackage{subcaption}

\begin{document}

\begin{figure}
\centering
\begin{subfigure}[b]{0.3\textwidth}
\centering
<<echo = FALSE, out.width = "0.5\\textwidth", fig.align = "center">>=
  plot(1:10)
@
\caption{text for first figure}
\label{fig:gull}
\end{subfigure}%

\begin{subfigure}[b]{0.3\textwidth}
\centering
<<echo = FALSE, out.width = "0.5\\textwidth", fig.align = "center">>=
  plot(30:100)
@
\caption{text for second figure}
\label{fig:tiger}
\end{subfigure}
\caption{Figure caption}
\end{figure}

\end{document} 
```

![enter image description here](../Images/e6f16cef6488abd121b5e0f8733dc6cd.png)

# java - 使用帧缓冲区将深度缓冲区渲染到纹理中

> ID：12546368
> 
> 赞同：3
> 
> 时间：2012-09-22T18:03:34.177
> 
> 标签：java, c++, opengl, jogl, framebuffer

我正在使用 JOGL，但这个问题通常适用于 OpenGL。周围似乎有类似的问题，但它们要么针对 GLSL 代码，与复制帧缓冲区的内容有关，要么是一般建议 - 使用帧缓冲区对象而不是`glCopyTexSubImage2D`.

## 问题

我正在做一些阴影映射。如何使用帧缓冲区对象将深度通道直接渲染到纹理？

您能否发布一段初始化纹理和帧缓冲区对象的代码，以及在渲染场景之前初始化所有内容的代码？

目前，我使用`glCopyTexSubImage2D`. 我像这样初始化纹理：

```
glGenTextures(1, &textureNo)
glBindTexture(GL_TEXTURE_2D, textureNo)
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST)
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST)
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE)
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE)
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_COMPARE_MODE, GL_COMPARE_R_TO_TEXTURE)
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_COMPARE_FUNC, GL_LEQUAL)
glTexParameterf(GL_TEXTURE_2D, GL_DEPTH_TEXTURE_MODE, GL_INTENSITY)
glTexImage2D(GL_TEXTURE_2D, 0, GL_DEPTH_COMPONENT, 2048, 2048, 0, GL_DEPTH_COMPONENT, GL_UNSIGNED_INT, null) 
```

然后我像这样渲染：

```
glBindTexture(GL_TEXTURE_2D, textureNo)
glClear(GL_DEPTH_BUFFER_BIT)
drawScene()
glCopyTexSubImage2D(GL_TEXTURE_2D, 0, 0, 0, 0, 0, 2048, 2048) 
```

这工作正常，纹理最终保持场景的深度通道 - 这意味着我的投影和视图矩阵设置正确，可以从光的角度查看场景。我想改用帧缓冲区对象。

我需要在上面进行什么更改才能直接渲染到纹理而不是使用帧缓冲区对象？

编辑：

这是我尝试过的。我首先初始化了帧缓冲区对象：

```
glGenFramebuffers(1, &fbo) 
```

然后我这样渲染：

```
glBindFramebuffer(GL_FRAMEBUFFER, fbo)
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_TEXTURE_2D, textureNo, 0)
glBindTexture(GL_TEXTURE_2D, textureNo)
drawScene() 
```

我已经确认上述适用于类型`GL_RGB`和的纹理`GL_COLOR_ATTACHMENT0`，但它似乎不适用于`GL_DEPTH_COMPONENT`类型纹理和`GL_DEPTH_ATTACHMENT`- 深度通道不会渲染到上面的纹理`textureNo`中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T19:19:44.920

# sql - 查看以识别分组值或对象

> ID：12546369
> 
> 赞同：9
> 
> 时间：2012-09-22T18:03:41.003
> 
> 标签：sql, sql-server, sql-server-2008

> ![在此处输入图像描述](../Images/02aa04bdde04b03cad6cca5d57108017.png)

例如，我有 5 个对象。对象是绑定在一起或彼此相邻的红点。换言之，X+1 或 X-1 或 Y+1 或 Y-1。

> ![在此处输入图像描述](../Images/dd27dcace3d0edceb70240f7bcc82403.png)

我需要创建一个 MS SQL **VIEW**，其中包含每个对象的第一个 XY 坐标，例如：

```
 X,Y
=======
1\.  1,1
2\.  1,8
3\.  4,3
4\.  5,7
5\.  6,5 
```

我不知道如何在**VIEW**中对它进行分组（不使用存储过程）。任何人有任何想法都会有很大帮助。谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-23T07:57:48.143

另一个答案已经很长了，所以我保持原样。这个答案更好、更简单、更正确，而另一个答案有一些会产生错误答案的极端情况——我将把这个练习留给读者。

注意：为清楚起见，添加了换行符。整个块是单个查询

```
;with Walker(StartX,StartY,X,Y,Visited) as (
    select X,Y,X,Y,CAST('('+right(X,3)+','+right(Y,3)+')' as Varchar(Max))
    from puzzle
    union all
    select W.StartX,W.StartY,P.X,P.Y,W.Visited+'('+right(P.X,3)+','+right(P.Y,3)+')'
    from Walker W
    join Puzzle P on
      (W.X=P.X   and W.Y=P.Y+1 OR   -- these four lines "collect" a cell next to
       W.X=P.X   and W.Y=P.Y-1 OR   -- the current one in any direction
       W.X=P.X+1 and W.Y=P.Y   OR
       W.X=P.X-1 and W.Y=P.Y)
      AND W.Visited NOT LIKE '%('+right(P.X,3)+','+right(P.Y,3)+')%'
)
select X, Y, Visited
from
(
    select W.X, W.Y, W.Visited, rn=row_number() over (
                                   partition by W.X,W.Y
                                   order by len(W.Visited) desc)
    from Walker W
    left join Walker Other
        on Other.StartX=W.StartX and Other.StartY=W.StartY
            and (Other.Y<W.Y or (Other.Y=W.Y and Other.X<W.X))
    where Other.X is null
) Z
where rn=1 
```

第一步是设置一个“walker”递归表表达式，该表达式将从每个单元格开始并尽可能远地移动，而无需回溯任何步骤。通过使用访问列来确保不重新访问单元格，该列存储从每个起点访问过的每个单元格。特别是，这种情况`AND W.Visited NOT LIKE '%('+right(P.X,3)+','+right(P.Y,3)+')%'`会拒绝它已经访问过的单元格。

要了解其余部分是如何工作的，您需要通过在 CTE 之后运行“Select * from Walker order by StartX, StartY”来查看“Walker”CTE 生成的结果。具有 5 个单元格的“片段”至少出现在 5 个组中，每个组都有不同的`(StartX,StartY)`，但每个组都有`(X,Y)`具有不同“访问”路径的所有 5 个片段。

子查询 (Z) 使用 LEFT JOIN + IS NULL 将组清除到每个组中包含由条件定义的“第一个 XY 坐标”的单行

```
 Other.StartX=W.StartX and Other.StartY=W.StartY
        and (Other.Y<W.Y or (Other.Y=W.Y and Other.X<W.X)) 
```

目的是对于可以从 (StartX, StartY) 开始访问的每个单元格，与同一组中的其他单元格进行比较，并找到没有其他单元格在较高行上的单元格，或者它们是否在同一行，位于该单元格的左侧。然而，这仍然给我们留下了太多的结果。仅考虑 (3,4) 和 (4,4) 处的 2 单元格：

```
StartX  StartY  X   Y   Visited
3       4       3   4   (3,4)          ******
3       4       4   4   (3,4)(4,4)
4       4       4   4   (4,4)
4       4       3   4   (4,4)(3,4)     ****** 
```

2 行保留 (3,4) 的“第一个 XY 坐标”，用 标记`******`。我们只需要一行，所以我们使用 Row_Number 并且因为我们要编号，所以我们不妨选择最长的`Visited`路径，这样我们就可以得到*尽可能多*的单元格。

最后的外部查询只是从每个相似的 (X,Y) 组中获取第一行 (RN=1)。

* * *

要显示每个部分的所有单元格，请更改行

```
select X, Y, Visited 
```

在中间到

```
select X, Y, (
    select distinct '('+right(StartX,3)+','+right(StartY,3)+')'
    from Walker
    where X=Z.X and Y=Z.Y
    for xml path('')
    ) PieceCells 
```

这给出了这个输出

```
X           Y           PieceCells
1           1           (1,1)(2,1)(2,2)(3,2)
3           4           (3,4)(4,4)
5           6           (5,6)
7           5           (7,5)(8,5)(9,5)
8           1           (10,1)(8,1)(8,2)(9,1)(9,2)(9,3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T20:23:33.330

好的。它有点难。但无论如何，我确信以更简单的方式无法解决这个问题。所以我们有表：

```
CREATE Table Tbl1(Id int, X int, Y int)
    INSERT INTO Tbl1
    SELECT 1,1,1 UNION ALL
    SELECT 2,1,2 UNION ALL
    SELECT 3,1,8 UNION ALL
    SELECT 4,1,9 UNION ALL
    SELECT 5,1,10 UNION ALL
    SELECT 6,2,2 UNION ALL
    SELECT 7,2,3 UNION ALL
    SELECT 8,2,8 UNION ALL
    SELECT 9,2,9 UNION ALL
    SELECT 10,3,9 UNION ALL
    SELECT 11,4,3 UNION ALL
    SELECT 12,4,4 UNION ALL
    SELECT 13,5,7 UNION ALL
    SELECT 14,5,8 UNION ALL
    SELECT 15,5,9 UNION ALL
    SELECT 16,6,5 
```

这是选择查询

```
with cte1 as 
/*at first we make recursion to define groups of filled adjacent cells*/
/*as output of cte we have a lot of strings like <X>cell(1)X</X><Y>cell(1)Y</Y>...<X>cell(n)X</X><Y>cell(n)Y</Y>*/
(
SELECT id,X,Y,CAST('<X>'+CAST(X as varchar(10))+'</X><Y>'+CAST(Y as varchar(10))+'</Y>' as varchar(MAX)) info
FROM Tbl1

UNION ALL

SELECT b.id,a.X,a.Y,CAST(b.info + '<X>'+CAST(a.X as varchar(10))+'</X><Y>'+CAST(a.Y as varchar(10))+'</Y>' as varchar(MAX))
FROM Tbl1 a JOIN cte1 b 
ON ((((a.X=b.X+1) OR (a.X=b.X-1)) AND a.Y=b.Y) OR (((a.Y=b.Y+1) OR (a.Y=b.Y-1)) AND a.X=b.X)) 
AND a.id<>b.id
AND
b.info NOT LIKE
('%'+('<X>'+CAST(a.X as varchar(10))+'</X><Y>'+CAST(a.Y as varchar(10))+'</Y>')+'%')
),

cte2 as
/*In this query, we select only the longest sequence of cell connections (first filter)*/
/*And we convert the string to a new standard (x,y | x,y | x,y |...| x,y) (for further separation)*/
(
SELECT *, ROW_NUMBER()OVER(ORDER BY info) cellGroupId
FROM(
    SELECT REPLACE(REPLACE(REPLACE(REPLACE(info,'</Y><X>','|'),'</X><Y>',','),'<X>',''),'</Y>','') info
    FROM(
        SELECT info, MAX(LEN(info))OVER(PARTITION BY id)maxlen FROM cte1
        ) AS tmpTbl
    WHERE maxlen=LEN(info)
)AS tmpTbl
),

cte3 as
/*In this query, we separated strings like (x,y | x,y | x,y |...| x,y) to many (x,y)*/
(
SELECT cellGroupId, CAST(LEFT(XYInfo,CHARINDEX(',',XYInfo)-1) as int) X, CAST(RIGHT(XYInfo,LEN(XYInfo)-CHARINDEX(',',XYInfo)) as int) Y
FROM(
    SELECT cellGroupId, tmpTbl2.n.value('.','varchar(MAX)') XYinfo
    FROM 
        (SELECT CAST('<r><c>' + REPLACE(info,'|','</c><c>')+'</c></r>' as XML) n, cellGroupId FROM cte2) AS tmpTbl1
        CROSS APPLY n.nodes('/r/c') tmpTbl2(n)
    ) AS tmpTbl
),

cte4 as
/*In this query, we finally determined group of individual objects*/
(
SELECT cellGroupId,X,Y
FROM(
    SELECT cellGroupId,X,Y,ROW_NUMBER()OVER(PARTITION BY X,Y ORDER BY cellGroupId ASC)rn
    FROM(
        SELECT *, 
        MAX(SumOfAdjacentCellsByGroup)OVER(PARTITION BY X,Y) Max_SumOfAdjacentCellsByGroup_ByXY /*calculated max value of <the sum of the cells in the group> by each cell*/
        FROM(
            SELECT *, SUM(1)OVER(PARTITION BY cellGroupId) SumOfAdjacentCellsByGroup /*calculated the sum of the cells in the group*/
            FROM cte3
            )AS TmpTbl  
        )AS TmpTbl
    /*We got rid of the subgroups (i.e. [(1,2)(2,2)(2,3)] its subgroup of [(1,2)(1,1)(2,2)(2,3)])*/
    /*it was second filter*/
    WHERE SumOfAdjacentCellsByGroup=Max_SumOfAdjacentCellsByGroup_ByXY 
)AS TmpTbl
/*We got rid of the same groups (i.e. [(1,1)(1,2)(2,2)(2,3)] its same as [(1,2)(1,1)(2,2)(2,3)])*/
/*it was third filter*/
WHERE rn=1
)

SELECT X,Y /*result*/
FROM(SELECT a.X,a.Y, ROW_NUMBER()OVER(PARTITION BY cellGroupId ORDER BY id)rn
FROM cte4 a JOIN Tbl1 b ON a.X=b.X AND a.Y=b.Y)a /*connect back*/
WHERE rn=1 /*first XY coordinate*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T00:05:40.600

假设您的坐标以 X,Y 形式存储，如下所示：

```
CREATE Table Puzzle(
  id int identity, Y int, X int)
INSERT INTO Puzzle VALUES
  (1,1),(1,2),(1,8),(1,9),(1,10),
  (2,2),(2,3),(2,8),(2,9),
  (3,9),
  (4,3),(4,4),
  (5,7),(5,8),(5,9),
  (6,5) 
```

然后，此查询以板的形式显示您的拼图（在 SQL Management Studio 中以文本模式运行）

```
SELECT (
  SELECT (
    SELECT CASE WHEN EXISTS (SELECT *
                             FROM Puzzle T
                             WHERE T.X=X.X and T.Y=Y.Y)
                THEN 'X' ELSE '.' END
    FROM (values(0),(1),(2),(3),(4),(5),
                (6),(7),(8),(9),(10),(11)) X(X)
    ORDER BY X.X
    FOR XML PATH('')) + Char(13) + Char(10)
  FROM (values(0),(1),(2),(3),(4),(5),(6),(7)) Y(Y)
  ORDER BY Y.Y
  FOR XML PATH(''), ROOT('a'), TYPE
).value('(/a)[1]','varchar(max)') 
```

它给你这个

```
............
.XX.....XXX.
..XX....XX..
.........X..
...XX.......
.......XXX..
.....X......
............ 
```

如果将 TopLeft 单元格定义为 TopMost 行的最左侧单元格，则分 4 个阶段完成的此查询将为您提供 TopLeft 单元格的结果。

```
-- the first table expression joins cells together on the Y-axis
;WITH FlattenOnY(Y,XLeft,XRight) AS (
-- start with all pieces
select Y,X,X
from puzzle
UNION ALL
-- keep connecting rightwards from each cell as far as possible
select B.Y,A.XLeft,B.X
from FlattenOnY A
join puzzle B on A.Y=B.Y and A.XRight+1=B.X
)

-- the second table expression flattens the results from the first, so that
-- it represents ALL the start-end blocks on each row of the Y-axis
,YPieces(Y,XLeft,XRight) as (
-- 
select Y,XLeft,Max(XRight)
from(
select Y,Min(XLeft)XLeft,XRight
from FlattenOnY
group by XRight,Y)Z
group by XLeft,Y
)
-- here, select * from YPieces will return the "blocks" such as 
-- Row 1: 1-2 & 8-10
-- Row 2: 2-3  (equals Y,XLeft,XRight of 2,2,3)
-- etc

-- the third expression repeats the first, except it now combines on the X-axis
,FlattenOnX(Y,XLeft,CurPieceXLeft,CurPieceXRight,CurPieceY) AS (
-- start with all pieces
select Y,XLeft,XLeft,XRight,Y
from YPieces
UNION ALL
-- keep connecting rightwards from each cell as far as possible
select A.Y,A.XLeft,B.XLeft,B.XRight,B.Y
from FlattenOnX A
join YPieces B on A.CurPieceY+1=B.Y and A.CurPieceXRight>=B.XLeft and B.XRight>=A.CurPieceXLeft
)

-- and again we repeat the 2nd expression as the 4th, for the final pieces
select Y,XLeft X
from (
select *, rn2=row_number() over (
    partition by Y,XLeft
    order by CurPieceY desc)
from (
  select *, rn=row_number() over (
      partition by CurPieceXLeft, CurPieceXRight, CurPieceY
      order by Y)
  from flattenOnX
) Z1
where rn=1) Z2
where rn2=1 
```

结果是

```
Y           X
----------- -----------
1           1
1           8
4           3
5           7
6           5 
```

* * *

或者你的平面形式是这样的吗？如果是，请给我们留言，我将重做解决方案

```
create table Puzzle (
  row int,
  [0] bit, [1] bit, [2] bit, [3] bit, [4] bit, [5] bit,
  [6] bit, [7] bit, [8] bit, [9] bit, [10] bit, [11] bit
)
insert Puzzle values
(0,0,0,0,0,0,0,0,0,0,0,0,0),
(1,0,1,1,0,0,0,0,0,1,1,1,0),
(2,0,0,1,1,0,0,0,0,1,1,0,0),
(3,0,0,0,0,0,0,0,0,0,1,0,0),
(4,0,0,0,1,1,0,0,0,0,0,0,0),
(5,0,0,0,0,0,0,0,1,1,1,0,0),
(6,0,0,0,0,0,1,0,0,0,0,0,0),
(7,0,0,0,0,0,0,0,0,0,0,0,0) 
```

# node.js - nodejs express 3.0 app.use 是否被调用

> ID：12546370
> 
> 赞同：3
> 
> 时间：2012-09-22T18:03:42.537
> 
> 标签：node.js, express

我正在使用*Express 3.x*，当我放

```
express = require("express")
routes = require("./routes")
http = require("http")
path = require("path")
app = express()
app.configure ->
    app.set "port", process.env.PORT or 3000
    app.set "views", __dirname + "/views"
    app.set "view engine", "jade"
    app.use express.favicon()
    app.use express.logger("dev")
    app.use express.bodyParser()
    app.use express.methodOverride()
    app.use app.router
    app.use express.static(path.join(__dirname, "public"))

app.use (req,res,next)->
    res.locals.name = "Jesse"
    next()

app.use "/", (req,res,next)->
    res.locals.name = "Jesse"

app.configure "development", ->
    app.use express.errorHandler()

app.get "/", routes.index

http.createServer(app).listen app.get("port"), ->
    console.log "Express server listening on port " + app.get("port") 
```

我的*观点*是

```
extends layout

block content
  h1= title
  p Welcome to #{title}
  p Hello Mr #{name} 
```

我希望每次收到 get 请求时都会调用第一个中间件（app.use），但它不会发生。express2.x 有什么变化吗？

这是来自 express 3.x 目录，并已注释

[https://github.com/visionmedia/express/blob/master/examples/view-locals/index.js](https://github.com/visionmedia/express/blob/master/examples/view-locals/index.js)

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T17:58:46.760

这是它的外观。你必须把中间件放在上面`app.router`

```
express = require("express")
routes = require("./routes")
http = require("http")
path = require("path")
app = express()
app.set "port", process.env.PORT or 3000
app.set "views", __dirname + "/views"
app.set "view engine", "jade"
app.use express.favicon()
app.use express.logger("dev")
app.use express.bodyParser()
app.use express.methodOverride()

app.use (req,res,next)->
    res.locals.name = "Jesse"
    next()

app.use app.router
app.use express.static(path.join(__dirname, "public"))

app.configure "development", ->
    app.use express.errorHandler()

app.get "/", routes.index

http.createServer(app).listen app.get("port"), ->
    console.log "Express server listening on port " + app.get("port") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T18:47:54.473

您可以尝试使用 DEBUG 标志运行脚本以查看发生了什么。Express 具有调试语句，显示已定义哪些路由以及如何处理请求。

```
$ DEBUG=* node app.js 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T16:29:16.650

将 app.use 移到顶部......它应该可以工作。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T15:37:30.227

您必须将中间件放在**app.configure()**部分之上。

# android - 隐藏虚拟键盘时屏幕变黑 - 三星 Galaxy Tab 10.1 / Android 3.1 / PhoneGap

> ID：12546371
> 
> 赞同：2
> 
> 时间：2012-09-22T18:03:43.280
> 
> 标签：android, cordova, keyboard, screen, hide

如果我将文本输入放在页面的下半部分，当用户点击它以显示虚拟键盘时，页面会自动向上滑动。当您离开键盘时，页面会自动再次向下滑动。即，一切都很好。

但是当文本输入位于页面的*上*半部分时（在这种情况下，当键盘出现时页面不会自动滑动），行为很糟糕：

1.  用户点击文本输入；

2.  整个屏幕（文本输入除外）瞬间变黑，然后键盘向上滑动；

3.  用户轻敲键盘；

4.  在再次呈现页面之前，屏幕会闪烁黑色。

*但是，如果您再次*尝试上述步骤，则顺序为： 1\. 同上；

1.  同上；

2.  同上；

3.  屏幕变黑并保持黑色；

4.  用户点击黑屏；

5.  页面再次显示。

我尝试了一些不同的方法，例如检测文本输入何时失去焦点（即键盘隐藏）以显示到页面、滚动页面等，但似乎没有什么能阻止黑屏的这个问题。

当文本输入失去焦点时显示 javascript 警报可以避免黑屏问题（但我也不希望显示警报！）。

我还尝试在我的 AndroidManifest.xml 标记中使用 android:hardwareAccelerated="true"。虽然这确实解决了这个特殊问题，但不幸的是，它在整个 Web 应用程序中产生了更多的渲染问题。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-28T09:52:15.433

将此代码放在清单文件中的启动活动标记中

```
android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"

android:windowSoftInputMode="stateHidden|adjustPan" 
```

# iis-6 - https://www.mydomain.com 和 https://mydomain.com 转到不同的页面

> ID：12546373
> 
> 赞同：0
> 
> 时间：2012-09-22T18:03:55.687
> 
> 标签：iis-6, http-redirect

网络服务器：IIS 6.0 (ASP.Net 4.0)

我托管两个站点：一个是主网站，另一个是商店站点。每个都是 IIS 中的独立网站。每个共享相同的通配符 SSL 证书。商店站点使用主机标头 ( `store.mydomain.com`) 将流量定向到它。

我想要它，所以在没有子域“商店”的情况下使用的任何 URL 都将用户定向到主网站，而不是商店网站。

我遇到的问题是以下 URL 始终将用户定向到商店网站上的 default.aspx 页面：
`https://www.mydomain.com`

然而，这些 URL 正确地转到了主网站的主页：
`http://mydomain.com`
`http://www.mydomain.com`
`https://mydomain.com`

`https://www`将用户引导到不同页面的原因是什么？

我在两个站点的 web.config 文件中添加了一个重写规则，但它没有任何效果：

```
<rewrite>
  <rules>
    <rule name="Consistent Domain" stopProcessing="true">
      <match url="^(.*)$" ignoreCase="false" />
      <conditions>
        <add input="{HTTP_HOST}" pattern="^mydomain.com$" />
      </conditions>
      <action type="Redirect" redirectType="Permanent" url="http://www.mydomain.com/{R:1}" />
    </rule>
  </rules>
</rewrite> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T23:49:30.237

首先，你确定这是 IIS6 吗？URLRewrite 功能是 IIS7 的一部分，如果存在，则在 IIS6 下无效。如果这是 IIS6，那很可能就是您问题的答案。

除此之外，根据给出的数据很难回答这个问题。站点的绑定可能不正确，导致流量流向您不期望的站点。

# android - 远程数据库助手类

> ID：12546375
> 
> 赞同：1
> 
> 时间：2012-09-22T18:04:25.010
> 
> 标签：android, database, http

我有一个希望我的应用程序进行通信的远程数据库。我已经可以通过使用 http post 和 php 脚本来执行 sql 来连接和使用数据库。过去，我让一个帮助类轻松地与本地 SQLiteDatabase 一起工作。有人可以为我指出远程数据库的类似方向吗？我想这将更像是一个 http post helper 类。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:20:58.667

要**访问远程数据库**，最好使用解析器。您可以[在此处](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)`json`找到教程

# c - C中双链表中的分段错误

> ID：12546377
> 
> 赞同：1
> 
> 时间：2012-09-22T18:04:34.253
> 
> 标签：c, linked-list

这一直让我发疯。当我在这个双向链表上运行我的测试程序时，当我尝试释放我的列表时，它给了我一个分段错误。我知道由于没有正确释放分配的内存而导致内存泄漏，但无论我尝试什么，它似乎都无法修复它。关于我需要释放内存以避免内存泄漏和段错误的任何帮助将不胜感激

```
struct list { 

    char *value;
    struct list *next;
    struct list *prev;
};

const char *list_node_value(list_t *node) {

    return node->value;
}

list_t *list_first(list_t *list) {

    return list;
}

list_t *list_last(list_t *list) {

    return list->prev;
}

list_t *list_next(list_t *node) {

    return node->next;
}

list_t *list_previous(list_t *node) {

    return node->prev;

}

static void failed_allocation(void) {

    fprintf(stderr, "Out of memory.\n");
    abort();
}

static list_t *new_node(const char *value) {

    list_t *node = malloc(sizeof(list_t));
    if (!node) failed_allocation();
    node->value = malloc(strlen(value));
    if (!node->value) failed_allocation();
    strcpy(node->value, value);
    return node;
}

list_t *list_insert_before(list_t *list, list_t *node, const char *value) {

    list_t *insert_node = new_node(value);
    insert_node->prev = node->prev;
    insert_node->next = node;
    insert_node->next->prev = insert_node;
    insert_node->prev->next = insert_node;
    if (list == node) {
        return insert_node;
    } else {
        return list;
    }
}

list_t *list_append(list_t *list, const char *value) {

    if (list) {

        (void) list_insert_before(list, list, value);
        return list;
    } else {

        list_t *node = new_node(value);
        node->prev = node->next = node;
        return node;
    }
}

list_t *list_prepend(list_t *list, const char *value) {

    if (list) {

        return list_insert_before(list, list, value);
    } else {

        list_t *node = new_node(value);
        node->prev = node->next = node;
        return node;
    }
}

list_t *list_remove(list_t *list, list_t *node) {

    (node->prev)->next = node->next;
    (node->next)->prev = node->prev;
    if (list != node) {

    return list;
    } else {

        return list->next == list ? NULL : list->next;
    }   
}

void list_free(list_t *list) {

    while (list_remove(list, list_last(list)) != NULL) { }

    }

void list_foreach(list_t *list, void (*function)(const char*)) {

    if (list) {

        list_t *cur = list_first(list);
        do {

            function(cur->value);
            cur = cur->next;
        } while (cur != list_first(list));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:09:38.263

您的问题是堆损坏。你有：

```
 node->value = malloc(strlen(value)); 
```

它应该是：

```
 node->value = malloc(strlen(value)+1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T18:11:01.983

1.  你根本没有释放任何东西；将其从列表中断开并不会释放它。

2.  它不仅仅是一个双向链表；这是一个循环列表。

3.  我没有看到初始化列表的代码，这可能是您问题的根源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T18:07:34.793

运行链接到[efence](http://linux.die.net/man/3/efence)或使用[valgrind的程序](http://linux.die.net/man/1/valgrind)的程序。

这应该告诉你内存在哪里丢失或指针被取消引用等......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T18:09:53.513

```
if (!node) failed_allocation();
node->value = malloc(strlen(value)); 
```

问题是您没有为`'\0'`NUL 字节分配空间。尝试：

```
if (!node) failed_allocation();
node->value = malloc(strlen(value)+1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T18:10:17.827

我在这里看到至少一个缺陷：

```
node->value = malloc(strlen(value)); 
```

应`strlen(value) + 1`保持零终止符字符，否则下次`strcpy()`调用将导致缓冲区溢出并损坏堆：

```
node->value = malloc(strlen(value) + 1); 
```

# grails - Grails - 在任何控制器中都可用的写入方法

> ID：12546380
> 
> 赞同：0
> 
> 时间：2012-09-22T18:05:00.823
> 
> 标签：grails, groovy, spring-security, metaprogramming

我对 groovy / grails 世界很陌生，所以请原谅我提出简单的问题。我很确定这可以通过元编程来完成，即将方法注入到 grails 控制器类的定义中。谁能指出我应该在哪里写这个注入（Bootstrap.groovy？）。我正在尝试使用可以在任何控制器中使用的 Spring-security-core 插件创建 currentUser() 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T18:56:40.173

你的问题在这两个帖子中得到了回答：

*   [如何在不使用继承的情况下向控制器添加常用操作？](https://stackoverflow.com/questions/1821864/how-can-i-add-common-actions-to-controllers-without-using-inheritance)
*   [向控制器添加方法](https://stackoverflow.com/questions/1049418/add-methods-to-controllers)

但是，您可能会考虑其他几种方法...

您可以将“SecurityService”注入需要了解当前用户的控制器并在其上放置“getCurrentUser”。

您可以使用 Grails 过滤器将“currentUser”添加到可供所有控制器使用的参数映射中。我喜欢这种方法，因为我通常使用过滤器来实现安全性。过滤器还可以在视图渲染之前将其添加到所有模型中，以便您的所有视图都可以访问它。

# c++ - WinAPI CreateFile 函数

> ID：12546384
> 
> 赞同：3
> 
> 时间：2012-09-22T18:05:31.967
> 
> 标签：c++, winapi

我必须用 C++ 编写 CreateFile 函数 我写了这个，但它没有用

```
#include <iostream>
#include <windows.h>
#include <string>
using namespace std;

int main()
{
    HANDLE hfile = CreateFile(
           ".\temp.txt",                // "\\.\C:" 
           GENERIC_READ, 
           0,
           NULL,
           CREATE_NEW,
           FILE_ATTRIBUTE_NORMAL,
           NULL);

    //if (hFile == INVALID_HANDLE_VALUE) cout << "Unable to create file \n";
    return 0;
} 
```

> 错误 C2664：“CreateFileW”：无法将参数 1 从“const char [10]”转换为“LPCWSTR”

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T18:10:09.573

`CreateFileW`错误消息告诉您它正在尝试调用`CreateFile`. 您需要向它传递一个宽字符而不是常规字符；

```
hfile = CreateFile(
       L".\\temp.txt",               // Notice the L for a wide char literal 
       GENERIC_READ, 
       0,
       NULL,
       CREATE_NEW,
       FILE_ATTRIBUTE_NORMAL,
       NULL); 
```

更多信息[可以在这里找到](http://msdn.microsoft.com/en-us/library/69ze775t(v=vs.110).aspx)。

# jquery - 如何使用ajax成功返回变量？

> ID：12546388
> 
> 赞同：0
> 
> 时间：2012-09-22T18:06:06.360
> 
> 标签：jquery, ajax, function

我有 2 个带有 ajax 调用的函数。如何使用在 function1 中返回的 function2 中的变量。

```
function func1 (){
  $.ajax({
      url:"",
      dataType: 'json',
      success: function(data){
          var foo
      }
  });  
  //How can i use var foo in func2(foo)?
  //i try .done(func2(foo)); but it returns foo is not define
}

    function func2 (param){
       $.ajax({
         url:"",
         dataType: 'json',
         success: function(data){
       }
     });
     } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T18:08:47.687

```
 function func1 (){
      var foo;
      $.ajax({
          url:"",
          dataType: 'json',
          async: false,
          success: function(data){
              foo = ...
          }
      });  
      func2(foo)
    } 
```

您应该将**async**设置为 false，或者您可以在成功处理程序中执行 func2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T18:17:48.517

您必须将变量`foo`全局设置`async`为`false`，以便浏览器可以在执行 func2 之前等待执行 func1：

```
var foo;
function func1 (){
  $.ajax({
      url:"",
      dataType: 'json',
      async: false,
      success: function(data){
          foo = ...
      }
  });  
  //How can i use var foo in func2(foo)?
  //i try .done(func2(foo)); but it returns foo is not define
}

function func2 (param){
   $.ajax({
     url:"",
     dataType: 'json',
     success: function(data){
         alert(foo)
   }
 });
 } 
```

正如 Ozerich 所说，您也可以在不初始化 var 的情况下完成它；但是初始化所有变量是一个好习惯。

请记住，如果您在成功回调中再次初始化变量（`var foo`再次使用），您将引用一个名为 foo 的新变量，而不是全局变量。

您可以了解更多关于 javascript 变量范围搜索网络的信息。[https://stackoverflow.com/a/500459/407456](https://stackoverflow.com/a/500459/407456)

顺便说一句，您应该考虑在 func1 的`success`回调中执行 func2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T18:16:49.687

只需调用`func2()`withing `func1()`AJAX`success`函数：

```
function func1() {
    $.ajax({
        url: "",
        dataType: 'json',
        success: function(data) {
            var foo = data;
            func2(foo);
        }
    });
}

function func2(param) {
    $.ajax({
        url: "",
        dataType: 'json',
        success: function(data) {}
    });
}​ 
```

***或者***

您可以使用如下回调函数：

```
function func1(callback) {
    $.ajax({
        url: "",
        dataType: 'json',
        success: function(data) {
            var foo = data;

            // pass foo variable
            // as callback parameter
            callback(foo);
        }
    });
}

function func2(param) {

    // here call func1() with a
    // callback function argument

    func1(function(foo) {
      $.ajax({
        url: "",
        dataType: 'json',
        success: function(data) {}
      });
   });
}​ 
```

## 根据关于***[$.ajax() 的](http://api.jquery.com/jQuery.ajax/)******[jQuery 文档`async`](http://api.jquery.com/jQuery.ajax/)***

> 从 jQuery 1.8 开始，不推荐在 jqXHR ($.Deferred) 中使用***async: false ；***您必须使用完成/成功/错误回调。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T18:17:20.630

我不确定您到底想要完成什么。

如果你想在第一个之前等待第二个 ajax 调用，你应该`async: false`在 ajax 选项中使用，或者使用回调：

```
function func1 (callback){
  $.ajax({
      url:"",
      dataType: 'json',
      success: function(data){
          var foo;
          if (typeof callback != 'undefined')
              callback(foo);
      }
  });  
}

function func2 (param){
   $.ajax({
     url:"",
     dataType: 'json',
     success: function(data){
   });
 }

func1(func2); 
```

但是，如果您希望同时进行两个 ajax 调用，但第二个函数应该在某个代码块之前等待第一个函数的结果，则需要在两个函数中定义回调到第三个函数，该函数检查是否下载了所有数据然而，然后才执行代码。

# mongodb - 具有排除字段的 Spring 数据 mongoDB GeoNear 查询

> ID：12546389
> 
> 赞同：0
> 
> 时间：2012-09-22T18:06:32.453
> 
> 标签：mongodb, geolocation, spring-data

我不知道我做错了什么还是一个错误。我有以下代码：

```
 Query criteria = new Query(Criteria.where("locationTime").gte(
            "date-time"));
    criteria.fields().exclude("friends");

    NearQuery query = NearQuery.near(point).maxDistance(maxDistance)
            .num(limit).query(criteria);
    GeoResults<Profile> result = mongoTemplate
            .geoNear(query, Profile.class); 
```

我正在根据距离和“locationTime”标准正确检索附近的查询和配置文件，但它似乎忽略了排除的字段并与他们的朋友一起检索配置文件。

当我使用简单查询时，排除/包含字段可以完美运行。
我到处找，找不到任何类似的用例，如果我做错了什么，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:38:17.943

`geoNear`据我所知，没有办法用命令限制字段。

我考虑调用`executeCommand`以尝试解决 Spring Data 的限制，但看起来他们甚至没有办法从原始命令中做到这一点。

# javascript - 设置元素最小高度等于文档的可见部分

> ID：12546390
> 
> 赞同：0
> 
> 时间：2012-09-22T18:06:46.637
> 
> 标签：javascript, jquery

我有一个页面至少包含一个标题和一个容器 div 我想为容器 div 设置最小高度以覆盖文档的可见部分（我不想将其修复为 100%）

所以我想我可以通过元素高度和顶部填充和顶部边距获得文档高度

```
function getDocHeight() {
    var D = document;
    return Math.max(
        Math.max(D.body.scrollHeight, D.documentElement.scrollHeight),
        Math.max(D.body.offsetHeight, D.documentElement.offsetHeight),
        Math.max(D.body.clientHeight, D.documentElement.clientHeight)
    );
}

$(document).ready(function(e) {

    var h = getDocHeight();
    var hedaer = $('.header').height();
    var c = $('.container').css('height') ;
    var m = $('.container').css('padding-top') ;
    var p = $('.container').css('margin-top') ;
    var n = parseInt(h) -  parseInt(c) -   parseInt(m) - parseInt(p) - parseInt(hedaer) ;
    var n = n +  parseInt(c)   ;
    $('.content').css('min-height' , n+'px');

}); 
```

但我总是最终或多或少地在我的容器中有许多其他元素，它们有自己的高度、填充和边距，想想它们就让我头疼

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:17:07.230

不完全确定您想要什么，我的答案可能不适合您所针对的浏览器，但 display: box 可能是解决方案（webkit 代码，以适应其他供应商前缀）：

```
<div class="container">
  <div class="header">blue</div>
  <div class="content">red</div>
</div> 
```

和CSS

```
.container {
  /*create a vertical box*/
  display: -webkit-box;
  -webkit-box-orient: vertical;
  /*ensure it takes of all available width and height in my fiddle :-D */
  position: fixed;
  top:0; bottom: 0; left: 0; right: 0;
}
/*so that we see something*/
.header, .content {background: blue;margin: 20px;padding: 40px;}
.content {
  margin: 20px;
  padding: 40px;
  background: red;
  /*this div will have all available height in his parent, 
    minus what's already taken, with the beauty of box-flex */
  -webkit-box-flex: 1;
} 
```

... 仍然是一个非常不稳定且不受支持的规范，但我认为这值得一提。您可以在此处查看它的运行情况（使用 chrome 或 safari）[http://jsfiddle.net/S6F3S/1/](http://jsfiddle.net/S6F3S/1/)

# php - 同时连接到 2 个数据库以将字段复制到第二个数据库

> ID：12546393
> 
> 赞同：0
> 
> 时间：2012-09-22T18:07:21.883
> 
> 标签：php, mysql, database

我的表中有一个字段，我需要移动到一个完全不同的数据库。此时我有 1 个包含所有数据的数据库，以及`db1`一个包含.`db1table``db2``db2table`

db1 表如下所示：

```
id    other_db_id     data_to_be_moved
---------------------------------------
1     NULL            data
2     NULL            data 
3     NULL            data 
4     NULL            data
5     NULL            data 
```

db2 表如下所示：

```
id      data
--------------
empty 
```

我通常使用 ORM 来访问数据库，但这次我使用的是普通的 mysql 和 php，所以需要一点帮助，尤其是我如何同时连接到 2 个数据库。

我想做的是从 中选择前 10 条记录`db1 table`，读取该字段`data_to_be_moved`并使用它在 中创建新记录`db2 table`。然后获取新插入记录的 id 并作为 field 插入到原始数据库中`other_db_id`。

我连接到单个数据库的方式是这样的。如何同时访问两个数据库？

```
$connection = mysql_connect("localhost", "db1user","db1pass");
mysql_select_db("db1", $connection); 
```

我正在选择要操作的前 10 条记录，如下所示：

```
Select * From table Where Id BETWEEN 5 AND 10; 
```

但我不确定如何继续切换数据库以实现我上面描述的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:10:54.737

基本上你需要知道如何处理多个数据库。以下视频将解释如何处理两个（或更多）数据库：[视频](http://www.youtube.com/watch?feature=player_embedded&v=bfnCEmGvY5k#!)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T18:12:12.380

您可以将中间值存储到 PHP 变量中，然后切换数据库并执行您的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T18:47:10.313

嗯，

```
$connection2 = mysql_connect("localhost", "db2user","db2pass"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T18:41:10.987

如果数据库在同一台服务器上，您可以使用以下语法同时访问两个表：

```
insert into db2.db2table
select other_db_id, data_to_be_moved
from db1.db1table; 
```

这要求登录至少具有对其他数据库的选择访问权限。

如果数据库在不同的服务器上，您可以使用联合表：

[http://dev.mysql.com/doc/refman/5.0/en/federated-use.html](http://dev.mysql.com/doc/refman/5.0/en/federated-use.html)

# java - 用 Java 存储网络爬虫的 URI 的最佳有效数据结构

> ID：12546396
> 
> 赞同：1
> 
> 时间：2012-09-22T18:07:49.590
> 
> 标签：java, database, data-structures, web-crawler

我正在构建一个网络爬虫，我已经实现了解析部分。现在我想将获得的 URI 存储到一个高效的数据结构中。我应该用什么？？我正在使用 Jena 库进行解析。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T18:46:02.037

我会将要处理的 URI 队列和已处理的 URI 存储在 Redis (http://redis.io/) 中。Redis 是一个非常快速的半持久键值存储，原生支持各种数据结构，包括列表（URI 队列）和哈希（映射）。这样，这些数据结构将在您的 Java 应用程序重新启动后继续存在。您还可以运行您的应用程序的多个实例，而无需通过 Redis 进行通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:35:26.700

通常在网络爬虫应用程序中 - 您需要管理 url 以丢弃[蜘蛛陷阱](http://en.wikipedia.org/wiki/Spider_trap)（有时称为“黑洞”），丢弃对同一页面的频繁访问，您还将使用 url 作为页面内容的全局标识符。

但另一个有趣的时刻 -*放弃两次访问相同的 url 是错误的*（**因为网页的内容可能会及时改变**）。

所以满足这些要求的最好方法是使用某种**优先级队列**并将每个 url 与元组相关联：{url, **hash(url)** }。当您获得新的 url 时 - 只需计算其哈希值，并且如果您的数据库记录具有相同的哈希值 - 只需将此 url 设置为低优先级并将其放入优先级队列中。

网络爬虫向优先队列询问要访问的 url。因此，只会首先访问具有最高优先级的 url 的页面。

您可以构建自己的散列函数，以最好的方式满足您的需求（例如 - 从 url 字符串中删除参数并从字符串的其余部分计算散列）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T18:13:18.877

哈希。

例如：URL：schem://domain:port/path?query_string#fragment_id。

将 URL 解析为字符串后，将 url 存储为：

哈希 ['方案'] = 方案；

哈希 ['域'] = 域；

哈希 ['端口'] = 端口；

哈希 ['路径'] = 路径；

哈希['query_string'] = query_string;

哈希['fragment_id'] = fragment_id;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T18:38:23.997

爬虫通常使用 a`Queue`来保存要检查的 URI，并`Set`在将 URI 插入上述队列并在检查后将 URI 放入集合之前检查重复项。

如果您的链接数量可以容纳在内存中，那么您可以将 a`LinkedList`作为队列，将 a`HashSet`作为集合。否则，您可以将外部数据库用于这两个目的，或者将队列服务器（如 ActiveMQ）用作队列，将数据库用作集合。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T18:20:25.220

我猜你想自动丢弃重复项，所以没有 URI 被抓取两次？然后我会建议一个[HashSet](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html)。

它会自动丢弃重复项，并且在最佳情况下插入复杂度仍然是恒定的。请注意，当您使用自己的类而不是默认类[java.net.URI](http://docs.oracle.com/javase/7/docs/api/java/net/URI.html)来表示 URI 时，您必须重写[`int hashCode()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)URI 类的方法以返回 URI 字符串的基于文本的哈希值。Object 的默认方法为每个对象创建一个唯一的哈希码，即使内容相同也是如此。

# java - 当我打开和关闭它时，如何让 labelSwitch 做某事？

> ID：12546397
> 
> 赞同：0
> 
> 时间：2012-09-22T18:07:57.017
> 
> 标签：java, blackberry

当我按下我的开关以使其显示“开”位置时，我实际上如何让它做一些事情，例如，将它链接到将播放器音量设置为 0 的方法？我猜它的接口`FieldChangeListener`？

我所有的实现都发生在`MainScreen`课堂上。

```
Bitmap switch_left = Bitmap.getBitmapResource("switch_left.png");
Bitmap switch_right = Bitmap.getBitmapResource("switch_right.png");
Bitmap switch_left_focus = Bitmap.getBitmapResource("switch_left_focus.png");
Bitmap switch_right_focus = Bitmap.getBitmapResource("switch_right_focus.png");

LabeledSwitch silentSwitch = new LabeledSwitch(switch_left, switch_right, switch_left_focus, switch_right_focus, "on", "off", true );
JustifiedHorizontalFieldManager silent = new JustifiedHorizontalFieldManager( new LabelField( "Silent Mode" ), silentSwitch, false, USE_ALL_WIDTH );
silent.setPadding(5,5,5,5);
add(silent); 
```

我导入了一个名为 OpenGlSpriteDemo 的游戏演示，并查看了他们如何使用字段更改侦听器实现开始按钮，因此我尝试为 Labeledswitch 执行此操作。我是否朝着正确的方向前进？

```
LabeledSwitch silentSwitch = new LabeledSwitch(switch_left, switch_right, switch_left_focus, switch_right_focus, "on", "off", false );
silentSwitch.setChangeListener(this);

public void fieldChanged(Field arg0, int arg1) 
{
    //If user sets the switch to on, reduce the volume to 0, 
    // else if user sets the switch to false, change it back 
    // to the default volume    
} 
```

![在此处输入图像描述](../Images/e267ce813145a87b1e8b6f7d3569777a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:07:49.863

使用布尔标志来判断它是否已经静音，并使用音量变量的 get 和 set 方法并将其传递给：

```
volume.setLevel(getVolume()); 
```

和

```
boolean isSilent = false;

public void fieldChanged(Field field, int context) 
{
    if(!isSilent && field == silentSwitch)
    {
        setVolume(0);
        isSilent = true;
    }
    else if(field == silentSwitch && isSilent)
    {
        setVolume(20);
        isSilent = false;           
    }
} 
```

# android - android - GPS 不准确

> ID：12546403
> 
> 赞同：0
> 
> 时间：2012-09-22T18:08:41.773
> 
> 标签：android, gps, coordinates

我试图在地图上显示我在哪里。我在以色列，这表明我在埃及。我尝试实施不同帖子的所有建议，但没有帮助我解决我的问题。

*   我打开了GPS。
*   我已连接到互联网。
*   当我启动 MAPS 默认的 android 应用程序时，它会显示我的真实位置！

清单权限：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.SEND_SMS" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.VIBRATE"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
```

我还使用了使用库 android:name="com.google.android.maps"。

这是 MapActivity 中扩展 LocationListener 的相关代码：

```
 lm = (LocationManager) getSystemService(LOCATION_SERVICE);
    boolean enabled = lm
      .isProviderEnabled(LocationManager.GPS_PROVIDER);

    // Check if enabled and if not send user to the GSP settings
    // Better solution would be to display a dialog and suggesting to 
    // go to the settings
    if (!enabled) {
      Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
      startActivity(intent);
    } 

    if(came_from.matches("FollowLocation"))
    {
        Location location;
        Criteria criteria = new Criteria();
        criteria.setAccuracy(Criteria.ACCURACY_FINE);
        String providerName = lm.getBestProvider(criteria, true);
        // If no suitable provider is found, null is returned.
        if (providerName == null) 
        {
            // reflecting changes if distance travel by
            // user is greater than 20m from current location
            // and every 1 minute
            lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
            location=lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        }
        else
        {
            // reflecting changes if distance travel by
            // user is greater than 20m from current location
            // and every 1 minute
            lm.requestLocationUpdates(providerName, 1*60*1000, 20, this);
            location=lm.getLastKnownLocation(providerName);
        }       

        gMapView = (MapView) findViewById(R.id.myGMap);
        gMapView.setStreetView(true);
        mc = gMapView.getController();
        if (location != null)   
        {
            lat = location.getLatitude();
            lng = location.getLongitude();
            mc.setZoom(14);
        }
        else    //in case we didn't get the location yet
        {
            lat = 32.08;
            lng = 35.84;
            mc.setZoom(9);
        }

        p = new GeoPoint((int) lat * 1000000, (int) lng * 1000000);
        mc.animateTo(p);

        // Adding zoom controls to Map
        gMapView.setBuiltInZoomControls(true);

        // Add a location mark
        MyLocationOverlay myLocationOverlay = new MyLocationOverlay();
        List<Overlay> list = gMapView.getOverlays();
        list.add(myLocationOverlay);

    }

}

/* This method is called when use position will get changed */
public void onLocationChanged(Location location) {
    if (location != null) {
        double lat = location.getLatitude();
        double lng = location.getLongitude();
        p = new GeoPoint((int) lat * 1000000, (int) lng * 1000000);
        mc.animateTo(p);
    }
}

public void onProviderDisabled(String provider) {
    // required for interface, not used
}

public void onProviderEnabled(String provider) {
    // required for interface, not used
}

public void onStatusChanged(String provider, int status, Bundle extras) {
    // required for interface, not used
}

protected boolean isRouteDisplayed() {
    return false;
} 
```

这些坐标： lat = 32.08 lng = 35.84 是以色列的某个地方......所以......我做错了什么？或者我做错了什么？:P

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T18:35:52.603

我会说 getLastKnownLocation 出于某种原因给了你这个错误的位置。您的默认值 32.08, 35.84 永远不会达到，因为位置永远不会为空。我建议使用调试器来查看您对 getLastKnownLocation 的哪些调用被命中，以及返回的值是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T11:41:07.690

我拿了我的代码并将其与互联网上的一个示例中的工作代码进行了比较。不知道是什么解决了这个问题，但我绝对知道你应该在完成配置其他所有内容后请求位置更新。

遇到此问题的其他人 - 尝试从 Internet 获取工作代码并逐步比较它，直到它适用于您的应用程序。

# python - Python dir 命令确定方法

> ID：12546406
> 
> 赞同：1
> 
> 时间：2012-09-22T18:08:57.540
> 
> 标签：python, api, documentation, wxpython

我正在使用 Python 的`dir()`函数来确定类具有哪些属性和方法。

例如，要确定 中的方法`wx.Frame`，我使用`dir(wx.Frame)`

是否有任何命令可以确定每种方法的参数列表？例如，如果我想知道哪些参数属于`wx.Frame.CreateToolBar()`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T02:22:15.890

正如评论中提到的，您可以使用`help(fun)`函数的签名和文档字符串进入帮助编辑器。您也可以简单地使用`print fun.__doc__`，对于大多数成熟的库，您应该获得有关参数和函数签名的合理文档。

如果您正在谈论交互式帮助，请考虑使用具有一些有用附加功能的[IPython 。](http://ipython.org/)例如，您可以键入`%psource fun`以获取函数源代码的打印输出`fun`，并且使用制表符完成，您只需键入`wx.Frame.`然后按 TAB 即可查看其中可用的所有方法和属性的列表`wx.Frame`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T02:32:32.127

尽管 GP89 ​​似乎已经回答了这个问题，但我想我会更详细一点。

首先，GP89 ​​的建议是使用 Python 的内置[`help()`方法](http://docs.python.org/library/functions.html#help)。这是您可以在交互式控制台中使用的方法。对于方法，它将打印方法的声明行以及类的[文档字符串](http://www.python.org/dev/peps/pep-0257/)（如果已定义）。您也可以通过以下方式访问它`<object>.__doc__`：

```
>>> def testHelp(arg1, arg2=0):
...    """This is the docstring that will print when you
...    call help(testHelp). testHelp.__doc__ will also
...    return this string. Here is where you should
...    describe your method and all its arguments."""
...
>>> help(testHelp)
Help on function testHelp in module __main__:

testHelp(arg1, arg2=0)
    This is the docstring that will print when you
    call help(testHelp). testHelp.__doc__ will also
    return this string. Here is where you should
    describe your method and all its arguments.
>>> 
```

然而，另一个理解方法、类和函数的极其重要的工具是工具包的 API。对于内置 Python 函数，您应该查看[Python 文档库](http://docs.python.org/library/index.html)。那是我找到该`help()`函数的文档的地方。你正在使用 wxPython，它的 API 可以在[这里](http://wxpython.org/docs/api/)找到，所以快速搜索“wx.Frame api”，你可以找到[描述所有`wx.Frame`方法和变量的这个页面。](http://wxpython.org/docs/api/wx.Frame-class.html)不幸的是，`CreatteToolBar()`没有特别好的文档记录，但您仍然可以看到它的论点：

> CreateToolBar(self, style, winid, name)

快乐编码！

# javascript - 在任意非空白字符上包装文本

> ID：12546408
> 
> 赞同：0
> 
> 时间：2012-09-22T18:09:14.897
> 
> 标签：javascript, jquery, html, css

我有很长的命名空间要显示在我的文章中（如），如果窗口宽度不足`MyProject\Sub\Level`，我希望将它们包裹在反斜杠字符 ( ) 上。`\`如何使用 CSS 或 JS/jQuery 来实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T19:15:45.757

要告诉浏览器在字符后允许换行，请在字符后插入零宽度空格 (ZWSP) 字符 U+200B。在 HTML 标记中，您可以使用字符引用 `​'，例如

```
MyProject\&#x200b;Sub\&#x200b;Level 
```

如果通过脚本添加字符，则可以使用字符串文字输入字符本身`\u200b`。

一些旧的浏览器（IE 6）曾经有这个问题，但现在这种方法似乎比替代方法更好，旧`<wbr>`标签（它得到了很好的支持，但现在在新版本的 IE 中被搞砸了）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T18:11:51.477

在包含文本的元素中使用以下 css：

```
word-wrap: break-word; 
```

它是现代浏览器支持的 css3 属性：Google Chrome 6、Internet Explorer 8、Firefox 3、Opera 10 和 Safari 5。

***Acclaration*** : 它不会`/`只在字符上断，它可以根据容器的拉伸在单词的任何字符上断。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T18:24:47.077

`&shy;`一种选择是在字符周围使用软连字符 ( ) `\`；软连字符允许单词在给定点中断，*只有*当单词确实在该点中断时才会出现。

如果被复制和粘贴，它也不会出现在文本中（在 Chromium 19/Ubuntu 11.04 中测试）；这种方法使用`replace()`jQuery 的`html()`方法和以下 HTML：

```
<ul>
    <li>\some\text\possibly\a\path</li>
    <li>\another\path</li>
    <li>\something\else\also\quite\long</li>
</ul>​ 
```

和 CSS：

```
li {
    width: 8em;
    border: 1px solid #000;
}​ 
```

jQuery：

```
$('li').html(function(i, h) {
    return h.replace(/(\\)/g, '&shy;$1&shy;')
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/TffRf/)。

显然，您不需要在字符的两侧使用软连*字符*，`\`这只是演示如何*使用*它。

如果您不想`-`在断点处出现字符，另一种方法是使用与上述相同的方法，但插入一个空`span`元素，并为其赋予样式`display: inline-block;`：

jQuery：

```
$('li').html(function(i, h) {
    return h.replace(/(\\)/g, '$1<span></span>')
});​ 
```

CSS：

```
li {
    width: 8em;
    border: 1px solid #000;
}
li span {
    display: inline-block;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/TffRf/2/)。

参考：

*   [`html()`](http://api.jquery.com/html/).
*   [`replace()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T18:29:22.313

您可能可以按照[jQuery 上的示例 - 加载正文后查找和替换文本](https://stackoverflow.com/questions/2349446/jquery-find-and-replace-text-after-body-was-loaded)并让它在每个斜杠后插入一个中断

# c - 按 UNIX shell 脚本中多个字段的唯一值排序

> ID：12546417
> 
> 赞同：1
> 
> 时间：2012-09-22T18:10:40.463
> 
> 标签：c, unix, sorting, unique, field

我是 unix 新手，希望能够执行以下操作，但不确定如何操作。

获取一个包含如下行的文本文件：

```
TR=P567;dir=o;day=su;TI=12:10;stn=westborough;Line=worcester
TR=P567;dir=o;day=su;TI=12:10;stn=westborough;Line=lowell
TR=P567;dir=o;day=su;TI=12:10;stn=westborough;Line=worcester
TR=P234;dir=o;day=su;TI=12:10;stn=westborough;Line=lowell
TR=P234;dir=o;day=su;TI=12:10;stn=westborough;Line=lowell
TR=P234;dir=o;day=su;TI=12:10;stn=westborough;Line=worcester 
```

并输出：

```
TR=P567;dir=o;day=su;TI=12:10;stn=westborough;Line=worcester
TR=P567;dir=o;day=su;TI=12:10;stn=westborough;Line=lowell
TR=P234;dir=o;day=su;TI=12:10;stn=westborough;Line=lowell
TR=P234;dir=o;day=su;TI=12:10;stn=westborough;Line=worcester 
```

我希望脚本能够找到每个 TR 值具有唯一 Line 值的所有行。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T18:37:18.100

由于您显然可以在 、 、 和 的值中随机选择`dir`，`day`因此`TI`您`stn`可以编写：

```
sort -u -t ';' -k 1,1 -k 6,6 -s < input_file > output_file 
```

解释：

*   该`sort`实用程序“对文本文件的行进行排序”，可让您对文件中的行进行排序/比较/合并。（请参阅[GNU Coreutils 文档](http://www.gnu.org/software/coreutils/manual/coreutils.html#sort-invocation)。）
*   `-u`or`--unique`选项，“仅输出相等运行的第一个”，表示`sort`如果两个输入行相等，那么您只需要其中一个。
*   `-k POS[,POS2]`or选项， “`--key=POS1[,POS2]`在 POS1（原点 1）开始一个键，在 POS2（默认行尾）结束它”，告诉`sort`我们想要排序的“键”在哪里。在我们的例子中，`-k 1,1`意味着一个键由第一个字段（从字段`1`到字段`1`）组成，并且`-k 6,6`意味着一个键由第六个字段（从字段`6`到字段`6`）组成。
*   `-t SEP`or`--field-separator=SEP`选项告诉`sort`我们想要使用- 在我们的`SEP`例子中`';'`- 来分隔和计算字段。（否则，它会认为字段由空格分隔，在我们的例子中，它会将整行视为单个字段。）
*   `-s`or选项， “`--stabilize`通过禁用最后的比较来稳定排序”，告诉`sort`我们*只想*以我们指定的方式比较行；如果两行具有相同的上述“键”，则它们被认为是等效的，即使它们在其他方面有所不同。由于我们使用`-u`，这意味着其中一个将被丢弃。（如果我们不使用`-u`，那只是意味着`sort`不会对它们重新排序。）

# sql-server - 在 Management Studio 2012 中修改编号的过程

> ID：12546418
> 
> 赞同：3
> 
> 时间：2012-09-22T18:10:41.587
> 
> 标签：sql-server, sql-server-2008-r2, ssms

我在 SQL Server 2008 中创建了许多编号的存储过程。

他们的名字是例如：`dbo.ProcName, dbo.ProcName;2, dbo.ProcName;3`,...

当我在 Management Studio 2008 的过程列表中使用右键单击过程名称，然后单击以`Modify`查看和编辑我上面写的所有存储过程时。

但是在 Management Studio 2012 中，经过相同的操作后，我只能看到第一个过程。

如何查看和编辑所有具有相同名称和分号后缀的存储过程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T20:08:10.990

听起来您在谈论[编号的存储过程](http://jagbarcelo.blogspot.co.uk/2006/09/numbered-stored-procedures-will-be.html)。

我可以重现相同的行为。运行以下命令后

```
CREATE PROCEDURE [dbo].[foo];1 @x int AS
  PRINT 'x is ' + CONVERT(varchar(8), @x)
GO
CREATE PROCEDURE [dbo].[foo];2 @x char AS
  PRINT 'x is ' + @x
GO 
```

在对象资源管理器中选择“Foo”，然后选择“修改”在 SSMS 2008 中显示两个版本，但在 SSMS 2012 中只显示第一个版本。

这些[自 2005 年以来已被弃用，](http://msdn.microsoft.com/en-us/library/ms143729%28v=sql.90%29.aspx)因此如果故意决定不再在工具中支持它们，我不会感到惊讶。看起来`Drop and Create`仍然列出了两个版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T20:20:29.030

另一种解决方法：

```
EXEC sp_helptext 'dbo.ProcName'; 
```

不过，您必须自己注入`GO`s。

* * *

您还可以通过以下方式获取元数据：

```
SELECT definition
FROM sys.sql_modules
WHERE [object_id] = OBJECT_ID('dbo.ProcName')
UNION ALL
SELECT definition
FROM sys.numbered_procedures
WHERE [object_id] = OBJECT_ID('dbo.ProcName'); 
```

* * *

这样：

```
SELECT [text] FROM syscomments
WHERE id = OBJECT_ID('dbo.ProcName'); 
```

* * *

您可以通过 Generate Scripts 向导：

1.  右键单击您的数据库并选择任务 > 生成脚本
2.  在“选择对象”屏幕上，选择“选择特定数据库对象，选中“存储过程”，然后展开以选择要编写脚本的编号存储过程的根名称。
3.  在“设置脚本选项”屏幕上，选择“保存到新查询窗口”。
4.  单击下一步 > 下一步 > 完成。

* * *

我还为此提交了一个错误：

[http://connect.microsoft.com/SQLServer/feedback/details/764197/ssms-2012-inconsistently-handles-numbered-procedures](http://connect.microsoft.com/SQLServer/feedback/details/764197/ssms-2012-inconsistently-handles-numbered-procedures)

# javascript - 在 javascript 中将 cookie 值解析为 if/elseif

> ID：12546419
> 
> 赞同：0
> 
> 时间：2012-09-22T18:10:47.317
> 
> 标签：javascript, cookies, session-cookies, if-statement

所以我有一个简单的会话 cookie 检索器，并将 cookie 值写入页面。只有两个值，“是”和“否”，否则返回 null。目前，它检查是否有值，如果有，则将该值写入页面。我如何告诉脚本有条件地写入值（即，写“是”，因为该值是“是”，与“否”相同，而不是仅仅传递响应）而不是它是否存在？

```
<script>
function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
};
</script>

...

<p>
Response 1: 
<script>
var res1 = readCookie('res1')
if (res1) {
    document.write('res1')
}
else {
document.write("You did not respond.")
};
</script>
</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T18:18:06.920

```
function getCookie(name) {
    var matches = document.cookie.match(new RegExp(
      "(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"
    ))
    return matches ? decodeURIComponent(matches[1]) : undefined
}

document.write(getCookie('res1') != undefined ? 'res1' : 'You did not respond.') 
```

# c++ - 对 void "function" C++ 的未定义引用

> ID：12546420
> 
> 赞同：0
> 
> 时间：2012-09-22T18:10:48.417
> 
> 标签：c++, reference, header

我收到以下错误：

```
features.cpp:(.text+0x4f6): undefined reference to `void Convolve<float>(CImageOf<float>, CImageOf<float>&, CImageOf<float>)' 
```

因此，在我的 features.cpp 文件中，我添加了以下头文件，其中包含以下内容：

```
template <class T>
void Convolve(CImageOf<T> src, CImageOf<T>& dst,
              CFloatImage kernel); 
```

我在 ubuntu 64bit 上用 GCC 编译它。我意识到上面的错误是因为我的标题中的内容与引用不匹配，但那是因为模板，所以我不应该遇到这个问题吗？还有什么事情？

我仔细检查了我对卷积的调用，实际上这是我正在使用的类型：

```
Convolve(CFloatImage, CFloatImage, CFloatImage); 
```

我实际上找不到对上述错误的任何引用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T18:16:36.537

如果将函数模板放入 .cpp 文件并在不同的翻译单元中使用它，则需要显式实例化模板，例如：

```
template
void Convolve<float>(
   CImageOf<float> src,
   CImageOf<float>& dst,
   CFloatImage kernel); 
```

基本上，编译器只有在看到模板定义后才能实例化模板。如果您希望模板自动实例化，则需要在标题中定义它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T09:06:39.633

在与 OP 的[聊天](https://chat.stackoverflow.com/rooms/17003/discussion-between-nobody-and-mugetsu)中发现，问题可能出在未正确链接的 Makefile 中。

.h 文件中没有定义，只有一个模板声明（正如你们中的一些人所建议的那样）。我认为OP混淆了这些条款。

但是，.cpp 文件中有一个模板定义以及一个实例化`Convolve<float>`（和其他）的（非模板）函数定义。

所以重复一遍：代码是正确的，但构建例程不正确。

# c - 如果我正在制作一种新的编程语言，我应该编译成汇编还是 C？

> ID：12546425
> 
> 赞同：4
> 
> 时间：2012-09-22T18:11:22.757
> 
> 标签：c, assembly, programming-languages

我正在制作一种基于不同于通常使用的数学模型的语言。如果我使用 C，我不确定我是否可以，因为模型与 C 相比有很大不同。但是如果我使用汇编代码，它就不可移植，是吗？是否有一种通用的汇编语言可以在我不知道的所有架构上抽象出来？还是我错过了什么？我想如果 C 是图灵完备的，那么如果我的语言是图灵完备的，我应该能够编译成它......汇编比 C 更强大吗？如果我想要一种编译语言，编译成汇编有什么好处，编译成C有什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:17:50.637

我会说 C。当您可以编写一个并让 C 编译器为您完成繁琐的工作时，它将为您节省大量为每个平台编写编译器的时间。C 已被用作许多设计不同于 C 的高级语言的中间语言，例如 C++。

此外，没有经过大量修改的跨平台汇编语言。

# azure - 创建 Azure 表架构

> ID：12546426
> 
> 赞同：0
> 
> 时间：2012-09-22T18:11:24.673
> 
> 标签：azure, schema, azure-table-storage

我想知道如何在不插入任何实体的情况下使用架构创建 Azure 表。使用以下代码，它会在 azure 上创建一个表：

```
StorageCredentialsAccountAndKey accountAndKey = new StorageCredentialsAccountAndKey("accountName", "accountKey");

        CloudStorageAccount storageAccount = new CloudStorageAccount(accountAndKey, true);

        CloudTableClient tableClient = storageAccount.CreateCloudTableClient();

        string tableName = "mytable";

        tableClient.CreateTableIfNotExist(tableName); 
```

如何在创建表时指定架构。我需要创建一个空表（没有任何记录），其中包含 CustomerFirstName、CustomerLastName、Age 等自定义字段。

问候， 维维克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T18:18:20.327

Windows Azure 表没有架构，因此无法做到这一点。

（警告：由于实现的意外，本地存储模拟器本质上具有模式。如果您正在使用模拟器，您可能会尝试插入然后立即删除具有您关心的所有属性的实体。这将没有效果在云存储上，但模拟器会错误地保留一些模式。）

# java - 想写简单的收银机应用程序，在我的头上？

> ID：12546435
> 
> 赞同：2
> 
> 时间：2012-09-22T18:12:26.330
> 
> 标签：java

我的父母拥有一个小比萨店，他们一直想改用带有触摸屏的电子收银机和一台小型收据打印机。

我不在的时候他们安装了一个，我今天才看到。他们得到的那个对于他们的需求来说太复杂了。他们是一个小型的外卖和送货场所，但他们提供的软件是为带有桌子和服务器的餐厅制作的。

我认为我可以用 Java 为他们编写一个应用程序（我是 Comp-Sci 的三年级学生）来做他们需要的事情。

我想知道我是否应该尝试这个，或者这是一项太复杂的任务。我认为它需要具备的是，是否添加了产品（比萨饼的大小/配料/比萨饼片等）。它还需要能够将订单收据打印到小型打印机，然后打开/关闭现金直到。

编辑：我最害怕的事情是处理与打印机/收银机的连接。这是一件很难做到的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T18:18:57.627

我不明白为什么这不可行！

如果我处于您的位置，我会要求原始软件公司退款并编写一个网络应用程序，该应用程序还允许通过互联网进行订单。受过comp-sci的教育，你不应该有任何问题，这也是一个磨刀的好机会。

只需确保您创建的 (pdf) 发票符合您所在州的税收法规！

然后用你父母为软件支付的钱去家庭度假。

祝您在编写应用程序和度假时玩得开心！:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T18:21:46.100

作为一名 Java 开发人员，我对此的看法：

*   应用逻辑
    *   非常简单，任何人都可以通过一些基本的 Java 知识来做到这一点。如果您希望这能提供准确的总数，您还需要了解一些有关税收的信息。
*   用户界面
    *   Java 本身并没有让这变得特别容易（我个人认为 Swing 是有史以来最糟糕的库之一），但制作简单的 UI 并不难。
*   使其与外部设备接口
    *   如果您的供应商提供文档，那么您可能会弄清楚如何使用 JNI 加载驱动程序并发送命令。但是，我怀疑您的课程是否教过您，这是一项非常具体的任务。如果您的供应商不提供有关驱动程序的文档，您将花费很长时间尝试对其进行逆向工程。

我完全赞成边做边学。作为一名大学生，我的时间基本上一文不值，除非你把魔兽世界的角色算作某种奇异的货币，把它花在这样的事情上肯定比第 30 次清理海加尔要好。

# java - 如何在了解包的同时使 Lisp 函数调用 java？

> ID：12546437
> 
> 赞同：4
> 
> 时间：2012-09-22T18:12:54.307
> 
> 标签：java, emacs, lisp

在 Emacs 中使用 Lisp 函数来运行当前文件对应的 Java 程序。

```
(defun java-run-current-file ()
  "Runs the java program the current file correspond to"
  (interactive)
  (shell-command
   (concat "java "
       (file-name-sans-extension
        (file-name-nondirectory (buffer-file-name)))))) 
```

它通过剥离其路径和扩展名的当前文件名并将其用作`java`从文件所在路径运行的参数来工作。这种方法的问题在于，如果当前文件是包的一部分，那么

1.  to 的参数`java`必须以包名和一个点作为前缀，并且
2.  `java`必须从包含包的目录运行。

因此，例如，如果文件是 file.java 并且包名称是 pkg `java`，`java pkg.file`则从包含目录 pkg 的目录（放置 file.java 的目录的父目录）中调用。

如何修改函数以了解包并`java`相应地构造参数？我想可以通过在当前文件中搜索包声明来解决这个问题，例如

```
package pkg; 
```

如果找到它，它会使用该包名称进行`java`适当的调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T00:25:35.917

尝试使用以下代码在当前文件中搜索包声明：

```
(save-excursion
  (goto-char (point-min))
  (when (re-search-forward "^\\s *package\\s +\\(.*\\);" (point-max) t)
    (match-string 1))) 
```

这将返回`package`声明和分号之间的值。`nil`如果没有找到这样的声明，它将返回。

（请注意，如果在实际包声明之前的某处有一个注释掉的`package`声明，在 C 风格的多行注释 ( `/* ... */`) 中，这可能会失败。）

要更改运行 shell 命令的目录，请使用该`cd`函数。由于在 Java 中包结构应该反映目录结构，因此您可以使用上述代码确定的包信息来确定源代码的基本目录：

```
(let ((directory (file-name-directory (buffer-file-name)))
      (sub-dirs (reverse (split-string package "\\."))))
  (while sub-dirs
    (if (string-match (concat "^\\(.*/\\)" (regexp-quote (car sub-dirs)) "/$") directory)
        (setq directory (match-string 1 directory)
              sub-dirs (cdr sub-dirs))
      (error "Package does not match directory structure")))
  (cd directory)) 
```

您可以使用此代码来扩展您的功能，如下所示：

```
(defun java-run-current-file ()
  "Runs the java program the current file corresponds to"
  (interactive)
  (let* ((package (save-excursion
                    (goto-char (point-min))
                    (when (re-search-forward "^\\s *package\\s +\\(.*\\);" (point-max) t)
                      (match-string 1))))
         (directory (file-name-directory (buffer-file-name)))
         sub-dirs)

    (if directory
        (setq directory (file-truename directory))
      (error "Current buffer is not visiting a file"))

    (when package
      (setq sub-dirs (reverse (split-string package "\\.")))

      (while sub-dirs
        (if (string-match (concat "^\\(.*/\\)" (regexp-quote (car sub-dirs)) "/$") directory)
            (setq directory (match-string 1 directory)
                  sub-dirs (cdr sub-dirs))
          (error "Package does not match directory structure"))))

    (cd directory)
    (shell-command
     (concat "java "
             (if package (concat package ".") "")
             (file-name-sans-extension
              (file-name-nondirectory (buffer-file-name))))))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T18:15:49.593

要么使用适当的 Java IDE（如果你经常这样做，你最终会这样做）或读取文件以解析包行。

另请注意，您很可能还需要指定编译根文件夹（或 cd 到它）才能正确设置类路径。

为了派生实际的类名，读取文件并搜索“package (.*);” （也匹配换行符）很可能就足够了。

坦率地说，当我需要像这样工作时，我会编写一个小脚本（Windows 下的 bat 文件）来满足我的需要。原因是我通常在类路径上也需要很多 jarfile，最终归结为我需要指定整个命令行。

# javascript - 使用 JSF ajax 请求刷新 URL

> ID：12546438
> 
> 赞同：7
> 
> 时间：2012-09-22T18:12:56.483
> 
> 标签：javascript, ajax, jsf-2, browser-history

我正在使用 JSF 2 和 PrettyFaces 以及广泛的`<h:link>`和`<f:param>`标签来获取可收藏的页面（最终忘记 JSF 应用程序中的所有这些 POST 请求真是太好了）。

然而，其中一些链接只改变了页面的一小部分（主要是当用户停留在同一个视图中时），所以发送 ajax 请求会更好。但是,`<f:ajax>`不能与`<h:link>`,一起使用`<h:commandlink>`。我也可以使用命令链接以多种方式发送参数，但在这种情况下，请求后 URL 保持不变。所以它变得与页面内容不同步，并且不可刷新。

我已经看到使用发送混合 GET 和 ajax 请求的链接的网站（在使用 ajax 修改页面时指向新的 url），但到目前为止我还没有找到任何解决方案。

在 ajax 请求完成后（或当用户单击时），我可以以某种方式用 jsf 刷新 url 吗？还是我必须使用一些外部 JS 库？

**编辑**：这里需要的 JS 库是新的 JavaScript History API。[更多信息。](http://html5doctor.com/history-api/) 我猜 JSF 目前不使用这个 API。但从 JSF 开发人员的角度来看，我仍然对这个问题感兴趣。

另外，是否计划在 JSF 的未来版本中发布？结合`<f:ajax>`将`<h:link>`是一个完美的解决方案。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-10-06T16:18:17.820

`<f:ajax>`具有属性**onevent**。它采用函数的名称，`javascript`该函数将在`ajax request`成功完成后调用。因此可以添加 js 函数，该函数将在 ajax 调用完成后导航到所需的 url。就像是：

```
 <h:commandLink id="testButton"
                       value="Test">
            <f:ajax event="action"
                    execute="@form"
                    render="@none"
                    listener="#{myBean.testButtonClickedHandler}"
                    onevent="navigate"/>
        </h:commandLink>

<script type="text/javascript">
    function navigate() {
        window.location.href = "required url";
    }
</script> 
```

# jquery - IE7 动态加载图像时出现 403 错误

> ID：12546439
> 
> 赞同：0
> 
> 时间：2012-09-22T18:13:06.380
> 
> 标签：jquery, ajax, image, jquery-forms-plugin

使用 jQuery 和 AJAX 提交表单时，我在返回的包含`IMG`标签的 HTML 上收到 403 错误。

这是我用来提交表单的代码：

```
// Add a new personality to the quiz
    $('form#personality_editor').submit(function(e) {

        e.preventDefault();

            // Submit the form with jQuery Form plugin to handle attachments
            $(this).ajaxSubmit({
                dataType: "json",
                resetForm: true,
                beforeSend: function() {
                    // Show the loading spinner
                    $('img#personality_loader').show();
                },
                success: function(add_personality_response) {

                    // Hide the image loader
                    $('img#personality_loader').hide('fast');

                    if (add_personality_response["success"] == "true") {

                        // Create a new personality in the list of personalities
                        $('div#quiz_personalities').append(add_personality_response["personality_html"]);

                            // Add the personality to list of hidden personalities
                            AddRemovePersonality(add_personality_response["personality_id"], "add");

                            // Set the focus on to personality name
                            $('input#new_personality_name').focus();

                            // Show or hide the no personalities notice
                            ShowHideNoPersonalitiesNotice();

                            alert("Success");
                    }

                },
                error: function() {
                    alert("There was an error adding personality");
                }
            });

    }); 
```

这是我从代码中得到的完整 JSON 响应：

```
 {"success":"true","personality_id":191,"personality_name":"Avril Lavigne","personality_image":"191avril.jpg","personality_html":"<div class=\"personality_wrapper\" data-personality-id=\"191\"><img src=\"images\/personalities\/personality_images\/192avril.jpg\" class=\"personality_image_small\" \/><div class=\"personality_info\"><div class=\"personality_name\" title=\"Kjh\">Kjh<\/div><div class=\"personality_options\"><a href=\"#\" class=\"personality_option personality_edit\">Edit<\/a><a href=\"#\" class=\"personality_option personality_delete\">Delete<\/a><\/div><\/div><\/div>"} 
```

这是`personality_html`我使用`.append()`jQuery 的功能添加到 DOM 中的。

此问题出现在 Internet Explorer 中，因为它在 Chrome 中运行。

图像正在上传到我所在位置的服务器`images/personalities/personality_images/192avril.jpg`。

我从页面返回的响应是：

```
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>403 Forbidden</title>
</head><body>
<h1>Forbidden</h1>
<p>You don't have permission to access /&quot;images//personalities//personality_images//192avril.jpg/&quot;
on this server.</p>
</body></html> 
```

这与从我的页面传递的转义数据有关吗？我在响应`json_encode()`之前使用它。`echo`

以下是 IE 开发者工具的视图：

![开发者工具 IE](../Images/dc3ce9b50a3841057a9056d8020a91af.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:22:07.160

您很可能尝试将 JSON 解析为 JavaScript 对象两次。

由于您已经为调用指定了响应数据类型为 JSON，jQuery 会自动为您将响应解析为 JavaScript 对象（如果响应为，`.ajaxSubmit()`它也会这样做，无论您是否指定）。`Content-Type``application/json``dataType`

这意味着在成功回调中，`add_personality_response1`已经是一个 JavaScript 对象。然而你正在尝试`$.parseJSON`第二次：

```
var add_personality_response = $.parseJSON(add_personality_response1); 
```

我不太确定删除这条线是否会立即解决问题，但这绝对是您必须开始的方式。

# c++ - 删除某个目录的编译器警告

> ID：12546440
> 
> 赞同：2
> 
> 时间：2012-09-22T18:13:07.573
> 
> 标签：c++, g++, compiler-warnings

我启用`-Wall`并`-Wextra`查看了我的项目中的所有警告，但我也在使用一个“库”（我将库的源代码复制/粘贴到`libs`我的项目的文件夹中），它会弹出很多警告。该代码附带一本书（OpenGL Super Bible 5），我正在使用它来学习OpenGL。但是我不想看到这段代码生成的所有警告，只看到我`src`文件夹中的警告。

有没有办法隐藏来自特定文件夹的警告？

**我不会试图隐藏我的警告，我只是想删除作者的警告，以便我可以专注于修复自己的警告。**

警告是

```
./libs/src/GLTools.cpp:123:6: warning: unused parameter ‘szArgv’ [-Wunused-parameter]
In file included from ./libs/src/GLBatch.cpp:36:0:
./libs/include/GLBatch.h: In constructor ‘GLBatch::GLBatch()’:
./libs/include/GLBatch.h:123:16: warning: ‘GLBatch::nNumTextureUnits’ will be initialized after [-Wreorder]
./libs/include/GLBatch.h:122:16: warning:   ‘GLuint GLBatch::nNumVerts’ [-Wreorder]
./libs/src/GLBatch.cpp:55:1: warning:   when initialized here [-Wreorder]
In file included from ./libs/src/GLBatch.cpp:36:0:
./libs/include/GLBatch.h:131:17: warning: ‘GLBatch::pTexCoords’ will be initialized after [-Wreorder]
./libs/include/GLBatch.h:115:11: warning:   ‘GLuint GLBatch::uiVertexArray’ [-Wreorder]
./libs/src/GLBatch.cpp:55:1: warning:   when initialized here [-Wreorder]
In file included from ./libs/src/GLBatch.cpp:36:0:
./libs/include/GLBatch.h:125:14: warning: ‘GLBatch::bBatchDone’ will be initialized after [-Wreorder]
./libs/include/GLBatch.h:121:16: warning:   ‘GLuint GLBatch::nVertsBuilding’ [-Wreorder]
./libs/src/GLBatch.cpp:55:1: warning:   when initialized here [-Wreorder]
In file included from ./libs/src/GLBatch.cpp:36:0:
./libs/include/GLBatch.h:121:16: warning: ‘GLBatch::nVertsBuilding’ will be initialized after [-Wreorder]
./libs/include/GLBatch.h:118:12: warning:   ‘GLuint* GLBatch::uiTextureCoordArray’ [-Wreorder]
./libs/src/GLBatch.cpp:55:1: warning:   when initialized here [-Wreorder]
./libs/src/GLShaderManager.cpp:481:8: warning: unused parameter ‘szVertexProg’ [-Wunused-parameter]
./libs/src/GLShaderManager.cpp:481:8: warning: unused parameter ‘szFragProg’ [-Wunused-parameter] 
```

恐怕如果我禁用那些特定的警告（`-Wunused-parameter`和`-Wreorder`），它们可能会发生在我自己的代码中，在这种情况下我会被告知。我是 C++ 的初学者，所以我想得到编译器可以给我的所有帮助来识别我的错误，或者我可能会做的事情是不好的做法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T18:50:26.870

您还没有向我们展示您的 makefile，但我想它看起来像这样：

```
CC = gcc
CFLAGS = -Wall -Otherflags

MYOBJECTS = obj/foo.o obj/bar.o  # from sources in src/
LIBOBJECTS = obj/baz.o obj/quartz.o  # from sources in lib/
OBJECTS = $(MYOBJECTS) $(LIBOBJECTS)

executable: $(OBJECTS)
    ...

obj/%.o: %.cc
    $(CC) $(CFLAGS) $< -o $@

vpath %.cc src lib 
```

如果是这样，只需添加一个[特定于目标的变量](http://www.gnu.org/software/make/manual/make.html#Target_002dspecific)：

```
CFLAGS = -Otherflags

$(MYOBJECTS): CFLAGS += -Wall 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T18:23:55.490

您可以使用`-isystem`option 而不是`-include`包含库包含文件的路径。然后你可能只会在 lib 自己编译时看到警告。在源文件中包含这些文件不会导致警告

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-22T18:23:16.237

AntoineG - 警告是有原因的。修复代码。

# asp.net-mvc-3 - 如何在文本框旁边显示自定义异常？

> ID：12546442
> 
> 赞同：0
> 
> 时间：2012-09-22T18:13:34.223
> 
> 标签：asp.net-mvc-3, linq, entity-framework

我有注册表。我想检查是否在 db 中的新用户名，如果在 DB 中，则在它的文本框“用户名已经存在...”旁边显示异常，我该怎么办？这是我的方法，但我在注册操作中使用了它。：

```
public void InsertNewUser(MemberRegisterModel mm)
    {
        EShopThemeDBEntities context = new EShopThemeDBEntities(idbconnection.ConnStr);
        using (context)
        {
            var listUsers = (from o in context.Users
                             select o.Username).ToList();
            var a = listUsers.Count();
            foreach (var item in listUsers)
            {
                if (mm.Username == item.ToString())
                {
                   throw new Exception("UserName already exist...");
                }

                User mmr = new User();
                mmr.FName = mm.FName;
                mmr.LName = mm.LName;
                mmr.Username = mm.Username;
                mmr.Password = mm.Password;
                mmr.Email = mm.Email;
                mmr.Phone = mm.Phone;
                mmr.Mobile = mm.Mobile;
                mmr.CreateDate = DateTime.Now;
                mmr.RoleId = 2;
                context.AddToUsers(mmr);
                context.SaveChanges();

            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T18:18:29.620

您可以设置模型错误并将模型对象返回到视图。

```
if(mm.Username == item.ToString())
{
   ModelState.AddModelError("UserName","Username already taken";)
   return View(model);
} 
```

此外，您不需要从数据库中获取用户列表并执行循环来检查用户输入的用户名是否存在。您可以使用该`FirstOrDefault`方法至少有一个。

```
using (context)
{
  var user=(from o in context.Users 
                               where o.UserName==mm.UserName).FirstOrDefault();
  if(user!=null)
  {
     ModelState.AddModelError("UserName","Username already taken";)
     return View(model);
  }
  else
  {
       //Save new user info
  }
} 
```

确保您的视图中有验证字段，与文本框相邻

```
@Html.TextBoxFor(m => m.UserName)
@Html.ValidationMessageFor(m => m.UserName) 
```

但是，理想情况下，我也会使用**ajax****异步**执行此操作，以便为用户提供丰富的用户体验。为此，您要做的是查找文本框的模糊事件并获取文本框的值，对操作方法进行 ajax 调用，该方法检查用户名的可用性并返回适当的结果。

 **```
<script type="text/javascript">
  $(function(){
    $("#UserName").blur(){
      var userName=$(this).val();
      $.getJSON("@Url.Action("Check","User")/"+userName,function(response){
         if(response.status=="Available")
         {
            //It is available to register. May be show a green signal in UI
         }
         else
         {
           //not available. Show the message to user
          $("#someMsgDIv").html("User name not available");
         }
      });    
    });
  });    
</script> 
```

现在我们应该有一个名为 Check in UserController 的动作方法来处理 ajax 请求

```
public ActionResult Check(string id)
{
  bool isAvailable=false;
  string userName=id;
  //Check the user name is availabe here 
  if(isAvailable) 
       return Json(new { status="Available"},
                                     JsonRequestBehaviour.AllowGet);
    else
       return Json(new { status="Not Available"},
                                     JsonRequestBehaviour.AllowGet);      

} 
```

注意：**永远不要只做客户端方法**。无论您是否进行客户端检查，**始终进行服务器端检查。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T20:09:38.180

Shyju的回答是彻底的回答。但是，根据您对处理异常的评论，这里有一个示例：

```
public void InsertNewUser(MemberRegisterModel mm)
{
    // Some code...
    if (userExists)
    {
        throw new ArgumentException("User name not available");
    }
} 
```

在您的操作方法中：

```
public ActionResult AddUser(MemberRegisterModel newUser)
{
    try
    {
      var userManager = new MembersSrv();
      userManager.InsertNewUser(newUser);
    }
    catch (ArgumentException ex)
    {
        if (ex.Message == "User name not available")
        {
            ModelState.AddModelError("UserName","Username already taken";)
            return View(model);
        }
    }
} 
```

**请注意**，更好的方法是定义一个派生自`Exception`类（例如`DuplicateUserNameException`）的类，并在您的代码中抛出/捕获该异常。此示例代码已被简化。**

# asp.net - 带有分层数据的菜单

> ID：12546443
> 
> 赞同：2
> 
> 时间：2012-09-22T18:13:37.653
> 
> 标签：asp.net, vb.net

我在这个表格中有一个类别的层次表`NodeID` `ParentID` `NodeName`

以下是我正在使用的代码生成`ASP.NET MENU ITEMS`并将其绑定到`MENU CONTROL`

```
Private Sub displayMenu()
        Using con As New SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings("HagglerEntLibConStr").ConnectionString)
            Using sql As New SqlCommand("Select NodeID,ParentID,NodeName FROM Nodes", con)
                con.Open()
                Dim r As SqlDataReader = sql.ExecuteReader 'stored procedure that returns the above SqlDataReader
                Dim tempMaster As New MenuItem()
                Dim bagMaster(700) As MenuItem
                Dim j As Integer = 0
                Do While r.Read()
                    tempMaster.Value = r("NodeID").ToString()
                    tempMaster.ToolTip = r("ParentID").ToString()
                    tempMaster.Text = r("NodeName").ToString()
                    tempMaster.NavigateUrl = ""
                    bagMaster(j) = tempMaster
                    j += 1
                    tempMaster = New MenuItem()
                Loop
                r.Close()
                Menu1.Items.Clear()
                For i As Integer = 0 To j - 1
                    If i = 0 Then
                        Menu1.Items.Add(bagMaster(i))
                    Else
                        For x As Integer = 0 To j - 1
                            If bagMaster(i).ToolTip = bagMaster(x).Value Then
                                Dim c As MenuItem = bagMaster(x)
                                'you can change the tool tip here if you want
                                c.ChildItems.Add(bagMaster(i))
                            End If
                        Next x
                    End If
                Next i
                'Menu1.Items.RemoveAt(0)

            End Using

        End Using

    End Sub

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        displayMenu()
    End Sub 
```

一切正常......但这种方法的主要缺点是`Menu CONTROL`创建`HTML TABLES`......我在表格中有大约 1000 行......这创建了一个多级菜单......这`HTML Tables`在页面中添加了很多并增加了页面加载时间急剧...我该如何解决这个问题？这是菜单的填充方式。

![在此处输入图像描述](../Images/ad6d7b982d95200879ce9bd0fb159035.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:41:57.917

您是否尝试过使用[RenderingMode](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.menu.renderingmode.aspx)属性？

价值观：

*   默认。（这是默认值）。渲染模式取决于[RenderingCompatibility](http://msdn.microsoft.com/en-us/library/system.web.ui.control.renderingcompatibility.aspx)控件属性，如果该设置设置为*3.5*，则默认渲染为 a `table`，如果该值为*4.0*，则默认渲染模式为 list `ul`。您可以在 web.config 文件中全局更改此设置：

    ```
    <system.web>
        <pages controlRenderingCompatibilityVersion="4.0"/>
    </system.web> 
    ```

*   桌子。呈现为表格

*   列表。呈现为列表

## 更新 1

由于您使用的是 .Net Framework 3.5，因此完成此操作的最佳方法可能是使用[控制适配器](http://msdn.microsoft.com/en-us/library/system.web.ui.adapters.controladapter.aspx)

基本上适配器在特定控件上工作，并且在适配器中您可以更新目标控件的呈现，在这种情况下是`Menu`控件

我还没有创建控制适配器，所以除了为您指明正确的方向之外，我无法为您提供更多信息，谷歌搜索我发现这篇文章似乎很有希望：

[http://msdn.microsoft.com/en-us/magazine/cc163543.aspx](http://msdn.microsoft.com/en-us/magazine/cc163543.aspx)

# .net - 使用 SimpleInjector 处理数据库连接错误的结构

> ID：12546445
> 
> 赞同：1
> 
> 时间：2012-09-22T18:13:55.907
> 
> 标签：.net, architecture, dependency-injection, simple-injector

我有一个实体框架应用程序连接到一个单独的盒子上的 SQL 服务器。程序流程可以分为两种状态：

1.  使用 Simple Injector DI 框架初始化组合根和注册类型
2.  初始化应用程序（使用实体框架对 SQL 数据库进行一些读写操作）
3.  基于计时器，任务函数获取即将运行的命令的实例`ICommandHandler<CommandType>`（命令类型不同）
4.  调用`Handle(commandType)`此实例以运行命令
5.  返回第 3 步

我需要保护程序在失去与 SQL 服务器的连接时崩溃。目前，如果应用程序失去 SQL 连接，将抛出未处理的异常`EntityException - The underlying provider failed on Open`。

一旦服务器重新联机，该程序应该能够重置和恢复操作。

这个问题涉及到 Simple Injector 的使用，因为它是我的应用程序的核心，我对编写未初始化和运行状态之间的状态转换有一些想法，但想首先询问应该在哪里以一种很好的方式捕获错误使用Simple Injector 的功能 - 具体来说，我专注于装饰器，但不确定这是否正确。

对任何其他推荐架构开放，以及从更高级别捕获错误的位置来看这可能会如何，从而允许发生状态更改。

**下面的代码结构**

我正在使用命令/处理程序方法：

```
public interface ICommandHandler<TCommand>
{
    void Handle(TCommand command);
} 
```

在应用程序启动时，所有实现的类型`ICommandHandler<T>`都被注册：

```
public static void Bootstrap(Container container)
{
    container.RegisterManyForOpenGeneric(
        typeof(ICommandHandler<>),
        System.AppDomain.CurrentDomain.GetAssemblies());

    // bootstrap container
} 
```

我的命令处理程序实现如下：

```
public class AddBusinessUnitCommand
{
    public string Name { get; set; }
    public float TimeZone { get; set; }
}

public class BusinessUnitCommandHandlers
    : ICommandHandler<AddBusinessUnitCommand>
{
    private IBusinessUnitService businessUnitService;

    public BusinessUnitCommandHandlers(
        IBusinessUnitService businessUnitService)
    {
        this.businessUnitService = businessUnitService;
    }

    public void Handle(AddBusinessUnitCommand command)
    {
        // do something
    }
} 
```

然后，我可以使用 Simple Injector 获取类型的实例，例如，将返回`ICommandHandler<AddBusinessUnitCommand>`一个实例化的对象，允许我执行命令。`BusinessUnitCommandHandlers``Handle()`

我已经看到 Simple Injector 可以使用装饰器来包装`Handle()`过程调用。

```
public class TransactionCommandHandlerDecorator<TCommand>
    : ICommandHandler<TCommand>
{
    private readonly ICommandHandler<TCommand> handlerToCall;
    private readonly IUnitOfWork unitOfWork;

    public TransactionCommandHandlerDecorator(
        IUnitOfWork unitOfWork, 
        ICommandHandler<TCommand> decorated)
    {
        this.handlerToCall = decorated;
        this.unitOfWork = unitOfWork;
    }

    public void Handle(TCommand command)
    {
         this.handlerToCall.Handle(command);
         unitOfWork.Save();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:05:25.970

> 我需要保护程序在失去与 SQL 服务器的连接时崩溃。
> 
> ... 应该使用 Simple Injector 的功能以一种很好的方式捕获错误 - 具体来说，我专注于装饰器，但不确定这是否正确。

`ICommandHandler<T>`使用泛型装饰器装饰实现有三个重要原因。首先，它可以防止您在应用程序中有任何重复的代码，因为装饰器是一次编写的，并且包装了许多`ICommandHandler<T>`实现。其次，您可以更改命令处理程序的行为并添加横切关注点，而无需对这些命令处理程序的使用者进行任何更改。最后，即使代码重用和消费者无知不是问题，如果要添加的行为在逻辑上是命令处理程序的一部分，装饰器仍然有用。例如验证执行的命令。这是消费者可能不应该关心的事情，并且是您在调用`Handle`.

我希望您的“命令处理器”（您的计时器）是一段代码，并且是您的应用程序基础架构的一部分（甚至可能是组合根的一部分）。由于这只是一段代码，因此没有理由使用装饰器来防止代码重复，并且添加这种崩溃保护作为装饰器可能也不会为您赢得那么多。

我们甚至可以争辩说，进行崩溃保护（而不是命令处理程序的责任）甚至可能是这段基础设施代码的责任，特别是因为那段代码可能必须执行命令重新调度之类的事情（基于失败类型），或将其放置在某种“失败的命令队列”中（以允许手动重新运行它们）。也许您的设计可以从使用[断路器模式](http://timross.wordpress.com/2008/02/10/implementing-the-circuit-breaker-pattern-in-c/)中受益。

# windows - 用于处理特殊字符的 Windows 的 GNU sed

> ID：12546450
> 
> 赞同：0
> 
> 时间：2012-09-22T18:14:45.547
> 
> 标签：windows, sed, character

我正在为 Windows 运行 GNU sed 4.2.1 实现，但没有使用 sed 的经验。

我有一个带有这种格式的行的 xml 文件：

`<field level="document" name="Title" value="Pericles" />`

需要将每一行转换为：

`<entry key="cm:Title">Pericles</entry>`

尝试了很多小时，但尽管引号问题已解决（quote-backslash-quote-quote），但大于字符 '>' 斜线，小于字符会导致问题。

'>' 应该被视为任何其他字符，对吗？但是不，这个实现似乎假设文件重定向。

尝试使用反斜杠、插入符号等，但尽管我快到了，但它失败了。

还注意到来自 Unix 的几个示例，在 Windows 中失败。Windows 是不同的实现还是与操作系统有关？

有人在 Windows 上使用过 sed 并且可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T05:28:20.900

`xmlstarlet`使用诸如etc之类的工具可以更轻松地解析 xml 。

也就是说，您*可以*使用 Unix 工具等来尝试此`sed`操作`awk`。

与`GNU sed`：

```
sed -r '/^<field/s/.*name="([^"]+)".*value="([^"]+)".*/<entry key="cm:\1">\2<\/entry>/' file.txt 
```

与`GNU awk`：

```
awk '/^<field/ { for (i=1; i<=NF; i++) { if ($i ~ /^name=/) { name = substr($i, 7) } if ($i ~ /^value=/) { value = substr($i, 8, length($i) - 8) } }  printf "<entry key=\"cm:%s>%s</entry>\n", name, value }' file.txt 
```

结果：

```
<entry key="cm:Title">Pericles</entry> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-21T16:44:15.397

我意识到这是一个旧帖子，可能会帮助寻找这个的人。使用双引号而不是单引号

sed -e "s/ text with > / /g" 使用 Cygwin sed 在 cmd.exe 中为我工作。

# ruby-on-rails - 使用蜻蜓上传文件，上传后无法访问图像（Rails 3）

> ID：12546453
> 
> 赞同：0
> 
> 时间：2012-09-22T18:15:08.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3, file-upload, dragonfly-gem

我正在尝试使用 Rails 3 和 Dragonfly（或任何可以实际工作的东西）制作一个多重拖放上传文件系统

我的文件通过参数哈希进入我的控制器，我可以将它作为 ActionDispatch::Http::UploadedFile 检索，所以我认为我要做的就是将它推送到我的模型的属性图像中但是它不起作用

这是我的图片模型：

```
class Picture < ActiveRecord::Base
   image_accessor :image
   attr_accessible :image_name, :image_uid, :title
end 
```

我认为这将在我的控制器中工作：

定义创建图像

```
@new_picture = Picture.new
@new_picture.image = params[:pic]

if @new_picture.save
  render :json => { :picture => @new_picture }
end 
```

好的，所以这奇怪地用 image_name nil 注册了记录，但是设置了 image_uid

但是，当我尝试访问我的图像 <%= image_tag @picture.image.url %> 时出现未找到错误

例如 ：

```
Request     URL:http://localhost:3000/media/BAhbBlsHOgZmSSIhMjAxMi8wOS8yMi8xOV8zMF8yOF83MzBfZmlsZQY6BkVU
Request Method:GET
Status Code:404 Not Found 
```

我正在使用 ruby​​ 1.9.3 和 rails 3.2.8

有任何想法吗 ？:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:08:33.253

Dragonfly 需要先加载它的机架适配器，然后才能接受编码的 url 请求（如上面的请求）。加载它的最佳方法是`config.encoding = "utf-8`在您的`/config/application.rb`

```
config.middleware.insert 0, 'Rack::Cache', {:verbose     => true,:metastore   => URI.encode("file:#{Rails.root}/tmp/dragonfly/cache/meta"),:entitystore => URI.encode("file:#{Rails.root}/tmp/dragonfly/cache/body")} unless Rails.env.production?
config.middleware.insert_after 'Rack::Cache', 'Dragonfly::Middleware', :images 
```

请注意，您还需要 Rack-Cache gem。

希望这可以帮助！

# java - 为什么这只返回一个 7？

> ID：12546454
> 
> 赞同：0
> 
> 时间：2012-09-22T18:15:08.310
> 
> 标签：java, arrays

我希望这将所有三个值 8 的整数替换为 7。但输出只给我一个 7...

```
public class hore {

    public static void main(String[] args) {
        int[] list = {8, 9, 8, 6, 9, 8};
        int number = count(list, 8, 7);
        System.out.print(number);
    }

    public static int count(int[] list, int target, int replacement) {
        for (int n : list) {
            if (n == target) {
                n = replacement;
            }
        }

        return replacement;
    } 

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T18:17:09.460

做的时候

```
n = replacement; 
```

您只是在更改局部变量`n`的值，而不是列表中的值。

而且您没有计算您更改的值。

你可以这样做 ：

```
 int nbChanges = 0;
 for (int i=0; i<list.length; i++) {
        if (list[i]==target) {
            list[i] = replacement;
            nbChanges++;
        }
 }
 return nbChanges; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T18:19:43.687

您正在返回`replacement`具有 value的变量`7`。

您可以获得`8's`使用此代码的数量：-

```
public static int count(int[] list, int target, int replacement) {

   int count = 0;
   for (int i = 0; i < list.length; list++) {
      if (list[i] == target) {    
          count++;   
          list[i] = replacement;
      } 
   }
   return count;    
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T18:18:46.323

`count`函数末尾的语句是

```
return replacement; 
```

这是您在此处传递的第三个参数：

```
 int number = count(list, 8, 7); 
```

由于该`count`函数不会改变 的值`replacement`，因此 的值为`number`7

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T18:21:13.933

您还可以使用 Collections 框架并使用[replaceAll](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#replaceAll%28java.util.List,%20T,%20T%29)函数。不过，您将不得不使用列表而不是数组。

replaceAll 方法与您的 count 方法具有相似的签名。

如果可以的话，最好使用 API，因为这将被尝试和测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T18:22:27.330

问题是你只是改变了局部变量的值，你需要在你传递的数组中改变它。

你可以做 ：：

```
 for (int n=0;n<list.length();n++) 
 {
    if (list[n] == target) 
    {
       list[n] = replacement;
    }
 } 
```

# json - 为什么我在真正的 Android 设备和 Chrome 上收到不同的错误

> ID：12546456
> 
> 赞同：0
> 
> 时间：2012-09-22T18:15:27.800
> 
> 标签：json, jquery, jquery-mobile

我在 phonegap 中开发了一个移动应用程序。当我在 Chrome 上测试它时，我没有收到任何错误，并且如果正确填写了数据库。当我通过 eclipse 在真实设备上尝试它时，我收到以下错误。为什么我会收到这些错误？

```
09-22 19:56:49.568: E/Web Console(6912): Uncaught SyntaxError: Unexpected token } at file:///android_asset/www/index.html#page2:1

09-22 19:56:49.558: E/Web Console(6912): Uncaught SyntaxError: Unexpected token ILLEGAL at file:///android_asset/www/index.html#page2:1 
```

以及在哪里可以找到 } 因为在 index.html 中没有这样的字符。

我在尝试读取一些 JSON 时收到这些错误。

PS我用这段代码来读取一些json

```
 function billpaymentstxt()
{
var billpaymentsjson = '{"posts" : [', 
    i, 
    line = 0,
    billpayments = 0,
    mybillpaymentsjson,
    Amountint,
    Amountdec;

    jQuery.ajaxSetup({
            'beforeSend' : function(xhr) {
                 xhr.overrideMimeType('text/plain; charset=iso-8859-7');
            },
    });

    jQuery.get('BillPayments.txt',function(data){
//  alert(data.length);
    line=0;

        for (i = 1; i <= ((data.length)/20); i += 1) {
            billpaymentsjson += '{"Id" :' + '"' + data.substr((line+0), 10).trim() + '"'  + ',';
            Amountint = data.substr((line+10), 7).trim();
            Amountdec = data.substr((line+17), 2).trim();
            billpaymentsjson += '"PreviousPayments" : ' + '"'  + Amountint + '.' + Amountdec + '"'  +  '}';
            line = i * 20;
    //alert(line);
            if (line == data.length)
            {
                billpaymentsjson += ']';
            }
            else 
            {
                billpaymentsjson += ',';
            }
        }

        if (line == 0)
        {
            billpaymentjson += ']';
        }

        billpaymentsjson += "}";
        //alert(billpaymentsjson);
            mybillpaymentsjson = jQuery.parseJSON( billpaymentsjson );

            if (((mybillpaymentsjson.posts.length)) == 0) {
                $('#mycontent article').html('<strong>bill - <font color=blue>OK</font></strong>');
            }

            for (i = 0; i < (mybillpaymentsjson.posts.length); i += 1) {

                notesdb.transaction((function(i) {
                    return function(t){       

                        t.executeSql('INSERT into billpayments (barcode, amount, receiptno) VALUES (?,?,?);',
                            [mybillpaymentsjson.posts[i].Id, mybillpaymentsjson.posts[i].PreviousPayments, 0],
                            function(){ 
                                billpayments = billpayments + 1;
                                $('#mycontent article2').html(billpayments + '/' + mybillpaymentsjson.posts.length + ' <strong>billpayments</strong>');

                                if ((mybillpaymentsjson.posts.length) - billpayments == 0) {
                                    $('#mycontent article2').html('<strong>billpayments - <font color=blue>OK</font></strong>');
                                } 
                            }
                        );
                    };
                })(i));
            }
    });             
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:55:07.267

据我所知，JSON 无法处理 ISO-8859-7。

[http://www.php.net/manual/en/function.json-encode.php](http://www.php.net/manual/en/function.json-encode.php)

“此功能仅适用于 UTF-8 编码数据。” 也许你可以尝试一些转换

# php - 使用 PHP 获取 RSS 提要 url？

> ID：12546468
> 
> 赞同：-2
> 
> 时间：2012-09-22T18:16:57.150
> 
> 标签：php, wordpress, rss, metadata, echo

我正在尝试从 wordpress 元框中的表单加载 rss 提要 url。我知道我在 $rss->load 字段中的代码现在是错误的。我想知道如何正确检索网址。作为说明，

```
<?php echo get_post_meta($post->ID, "atp_blogurl", true); ?> 
```

在底部的常规 html 中使用，所以我知道在该实例中它是正确的 php 调用。

这是我现在拥有的：

```
<div id="rss_img">
<?php
$rss = new DOMDocument();
$rss->load('<?php echo get_post_meta($post->ID, "atp_blogurl", true); ?>');
$feed = array(); 
foreach ($rss->getElementsByTagName('item') as $node) {
    $item = array ( 
        'title' => $node->getElementsByTagName('title')->item(0)->nodeValue,
        'desc' => $node->getElementsByTagName('description')->item(0)->nodeValue,
        'link' => $node->getElementsByTagName('link')->item(0)->nodeValue,
        'date' => $node->getElementsByTagName('pubDate')->item(0)->nodeValue,
        );
    array_push($feed, $item);
}
$limit = 4;
for($x=0;$x<$limit;$x++) {
    $title = str_replace(' & ', ' &amp; ', $feed[$x]['title']);
    $link = $feed[$x]['link'];
    $description = $feed[$x]['desc'];
    $date = date('l F d, Y', strtotime($feed[$x]['date']));
            $description = preg_replace("/<img[^>]+\>/i", " ", $description);
    echo '<strong><a href="'.$link.'" title="'.$title.'" target="_blank">'.$title.'</a></strong><br />';
    echo '<small><em>Posted on '.$date.'</em></small><br />';
    echo '"'.$description.'<br/><br />';
}
?>
<br>
<a href="<?php echo get_post_meta($post->ID, "atp_blogurl", true); ?>"    target="_blank">View All</a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:21:58.830

尝试在这里删除双 php 标签：

```
$rss->load(get_post_meta($post->ID, "atp_blogurl", true)); 
```

# java - Eclipse 不认为 System.exit 会中断执行

> ID：12546477
> 
> 赞同：5
> 
> 时间：2012-09-22T18:18:17.093
> 
> 标签：java, eclipse, exception-handling, initialization

我在 Eclipse 报告“局部变量可能尚未初始化”错误的方式中发现了一个奇怪的二分法。如果我在 try/catch 块之外声明一个变量，在 try/catch 块内对其进行初始化，然后在 try/catch 块之后使用它，通常会发生此错误：

```
Random r;
try {
    r = new AESCounterRNG();
} catch (GeneralSecurityException e) {
    e.printStackTrace();
}
r.nextInt(); //Error: The local variable r may not have been initialized 
```

这是有道理的。我可以通过`null`在声明变量时初始化变量来避免错误，**或者**如果在 try/catch 块内发生异常，则确保程序的控制流永远不会到达下一条语句。因此，如果变量初始化失败，我真的无法继续执行，我可以这样做：

```
Random r;
try {
    r = new AESCounterRNG();
} catch (GeneralSecurityException e) {
    throw new RuntimeException("Initialize secure random number generator failed");
}
r.nextInt(); //No error here 
```

但是，我最近尝试使用`System.exit`来停止程序而不是 a`RuntimeException`来使我的程序的控制台输出更干净。我认为这些是等效的，因为两者都阻止程序继续执行，但我发现 Eclipse 不同意：

```
Random r;
try {
    r = new AESCounterRNG();
} catch (GeneralSecurityException e) {
    System.err.println("Couldn't initialize secure random number generator");
    System.exit(1);
}
r.nextInt(); //Error: The local variable r may not have been initialized 
```

如果发生异常，当执行永远无法到达时，为什么 Eclipse 仍然给我“未初始化”错误`r.nextInt()`？这是 Eclipse 中的错误，还是有某种方式可以`r.nextInt()`在调用后继续执行`System.exit`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T18:40:01.243

好问题，它也困扰了我好几次。

问题在于，与抛出异常不同，仅调用方法（`System.exit(1);`就是这样）通常不能保证程序流停止。当然，[System.exit() 的文档](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#exit%28int%29)说这个方法永远不会正常返回。但是，虽然 的语义`throw`是由语言本身定义的，但 的语义`System.exit()`只是在 Javadocs 中。

我的猜测是他们只是懒得去实现这个特殊情况。虽然有一个涉及该主题的错误报告（[https://bugs.eclipse.org/bugs/show_bug.cgi?id=126551](https://bugs.eclipse.org/bugs/show_bug.cgi?id=126551)，请参阅评论 2），但它被标记为“不会修复”，因为它似乎是太复杂。

**编辑：**正如 rlegendi 所指出的，这实际上是 Java 编译器的问题，而不仅仅是 Eclipse 的问题。到目前为止，我的解决方案是使用普通的 old `throw`, （而不是一些特殊的`throw()`方法），它（除了非常小的应用程序之外的任何东西）都比`System.exit()`无论如何都要好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T18:28:03.973

这不是错误：在您的第二个示例中，保证`r`在调用站点初始化（否则您会抛出异常，以便关闭执行分支）。

在第一个和第三个示例中，您只需执行程序代码并保持`r`未定义。如果您`null`在异常处理块或声明中分配给它，它不会抱怨。

顺便说一句，这不是 Eclipse 问题，它是由 JLS 定义的，您不能使用未初始化的变量。尝试用 Java 编译它，你应该得到完全相同的输出。

# c#-4.0 - 访问修改后的闭包 - ref int

> ID：12546484
> 
> 赞同：2
> 
> 时间：2012-09-22T18:18:54.537
> 
> 标签：c#-4.0, lambda, resharper, resharper-6.0

```
int count = itemsToValidate.Count;
foreach(var item in itemsToValidate)
{
   item.ValidateAsync += (x, y) => this.HandleValidate(ref count);
}

private void HandleValidate(ref int x)
{
  --x;
  if (x == 0)
  {
       // All items are validated.
  }
} 
```

对于上述代码，resharper 抱怨“访问修改后的闭包”。如果我将其更改为对象类型，则不会这样做。为什么这是一个闭包，即使我经过 ref ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T19:01:43.883

### 这事儿常常发生

ReSharper 警告您，`count`您分配为“验证完成”事件处理程序的 lambdas 隐式捕获了它，并且它的值很可能在创建 lambda 时（即，当您分配事件处理程序时）和它被调用。如果发生这种情况，lambda 将看不到人们直观期望的值。

一个例子：

```
int count = itemsToValidate.Count;
foreach(var item in itemsToValidate)
{
   item.ValidateAsync += (x, y) => this.HandleValidate(ref count);
}

// afterwards, at some point before the handlers get invoked:
count = 0; 
```

在这种情况下，处理程序将读取 count 的值`0`而不是`itemsToValidate.Count`-- 这可能被称为“显而易见的”，但对于许多不熟悉 lambdas 机制的开发人员来说，这是令人惊讶和违反直觉的。

### 我们通常是这样解决的

“关闭 R#”的通常解决方案是将捕获的变量移动到内部范围内，在该范围内它的可访问性要小得多，并且 R# 可以证明在评估 lambda 之前它不能被修改：

```
int count = itemsToValidate.Count;
foreach(var item in itemsToValidate)
{
   int inner = count; // this makes inner impossible to modify
   item.ValidateAsync += (x, y) => this.HandleValidate(ref inner);
}

// now this will of course not affect what the lambdas do
count = 0; 
```

### 但你的情况很特殊

您的特殊情况是您特别*想要*这种行为的相对罕见的情况，并且使用上述技巧实际上会使程序行为不正确（您需要捕获的引用指向相同的计数）。

**正确的解决方案：使用 R# 识别的特殊行注释禁用此警告。**

# iphone - Flex Mobile 打开 App Store 以获取评论

> ID：12546492
> 
> 赞同：1
> 
> 时间：2012-09-22T18:20:19.170
> 
> 标签：iphone, apache-flex, app-store, flash-builder, rating

使用 Flash Builder/Flex Mobile，有没有办法在 iphone/ipad 应用程序中创建一个按钮，该按钮将重定向并打开应用程序的应用商店/评论部分？只是想找到一种方法让用户给我的应用评分。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T15:28:19.867

假设您有一个要打开的 URL，您可以使用[navigateToURL](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/package.html#navigateToURL%28%29)来执行此操作：

```
var myURL :String = 'URL to your iOS application';
navigateToURL(new URLRequest(myURL)); 
```

然后只需从按钮的单击事件触发该代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T18:45:33.400

好的，我想我现在有一个完整的答案。感谢 Flextras 和一些谷歌搜索。

因此，要在 Flex Mobile 项目中为您的应用程序制作一个将重定向到 Apple Store 评论页面的按钮..

```
<fx:Script>
    <![CDATA[
        import flash.net.navigateToURL;
        protected function clickHandler(event:MouseEvent):void
        {
            var urlReq:URLRequest = new URLRequest("https://userpub.itunes.apple.com/WebObjects/MZUserPublishing.woa/wa/addUserReview?id=(YOU APP ID GOES HERE)&type=Purple+Software");
            navigateToURL(urlReq, "_self");
        }
    ]]>
</fx:Script> 
```

然后按钮..

```
<s:Button y="720" width="65%" height="70" label="Rate this App"
   click="clickHandler(event)" /> 
```

# google-maps - 谷歌地图 v3 距离

> ID：12546494
> 
> 赞同：0
> 
> 时间：2012-09-22T18:20:22.343
> 
> 标签：google-maps, distance, calculator

尝试创建此处看到的地图功能的新版本：[http](http://www.daftlogic.com/projects-google-maps-distance-calculator.htm) ://www.daftlogic.com/projects-google-maps-distance-calculator.htm 但使用 v3 api。

到目前为止，我能够在点击时设置标记并可以绘制测地线折线。我目前遇到的问题是：

*   在标记拖动时更新折线
*   我很确定我必须将每个标记放在一个数组中并执行一个 for 循环，以便我可以继续单击并添加将增加总距离的点。
*   正确显示距离。

我创建了一个 jsfiddle：http: [//jsfiddle.net/wyZyS/](http://jsfiddle.net/wyZyS/)

编辑：我意识到我没有调用“更新”功能。我正在尝试为当前的每个标记创建数组。您看到的计算是将米转换为海里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T21:36:15.713

不久前我写了这样的东西作为练习。遗憾的是它只在 Chrome 中正常工作，在其他浏览器中有奇怪的错误。距离函数应该在 IE9 中工作。

我的想法是为`drag`您的标记添加侦听器并保留一条表示路径的折线，并在拖动标记时更新其路径。

**演示** [http://freezoo.alwaysdata.net/freezoomaps/freezoomaps.html](http://freezoo.alwaysdata.net/freezoomaps/freezoomaps.html)

```
 google.maps.event.addListener(tmpNode, 'drag', function(event) {
        distance.drawPath();
      });

    distance.drawPath = function() {
      distance.countNodes();
      var coords = [];
      for (var i = 0; i < distance.nodes.length; i++) {
        coords.push(distance.nodes[i].getPosition());
      }
      distance.line.setPath(coords);

      meters = google.maps.geometry.spherical.computeLength(coords);
      $("#distance_km").val((meters/1000).toFixed(3));
      $("#distance_mi").val((meters/1609.344).toFixed(3));
    }

    distance.countNodes = function() {
      var count = 0;
      for (var i = distance.nodes.length - 1; i >= 0; i--) {
        if (distance.nodes[i].getMap() == null) {
          distance.nodes.splice(i, 1);
        }
        else {
          count++;
        }
      }
      return count;
    }

    distance.clearNodes = function() {
      for(var i = 0; i < distance.nodes.length; i++) {
        distance.nodes[i].setMap(null);
      }
      distance.drawPath();
    } 
```

# iphone - 如何获取 cookie 并将它们用于其他请求，如 POST ( iOS )？

> ID：12546495
> 
> 赞同：6
> 
> 时间：2012-09-22T18:20:22.043
> 
> 标签：iphone, ios, cookies, restkit, nshttpcookie

我[之前](https://stackoverflow.com/questions/12538782/how-to-remain-logged-in-until-user-decides-to-logout/)的问题是关于我每次都必须登录才能进行网络服务（例如发布链接或上传图片）的问题。Philipe 回答说我必须为每个请求使用 cookie 而不是登录过程。我发现了这种获取cookie的方法：

```
- (void)getCookies {

    NSHTTPURLResponse * response;
    NSError * error;
    NSMutableURLRequest *request;

    request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://MyWebsite.com/login.php"]
                                            cachePolicy:NSURLRequestReloadIgnoringCacheData
                                        timeoutInterval:120];
    NSData * data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

    NSLog(@"%@", [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding]);
    NSArray * all = [NSHTTPCookie cookiesWithResponseHeaderFields:[response allHeaderFields] forURL:[NSURL URLWithString:@"http://MyWebsite.com/login.php"]];
    NSLog(@"%d", all.count);

    for (NSHTTPCookie *cookie in all) {
        NSLog(@"Name: %@ : Value: %@", cookie.name, cookie.value);
        NSLog(@"Comment: %@ : CommentURL: %@", cookie.comment, cookie.commentURL);
        NSLog(@"Domain: %@ : ExpiresDate: %@", cookie.domain, cookie.expiresDate);
        NSLog(@"isHTTPOnly: %c : isSecure: %c", cookie.isHTTPOnly, cookie.isSecure);
        NSLog(@"isSessionOnly: %c : path: %@", cookie.isSessionOnly, cookie.path);
        NSLog(@"portList: %@ : properties: %@", cookie.portList, cookie.properties);
        NSLog(@"version: %u", cookie.version);
    }
} 
```

我还发现这段代码可以使用这些 cookie，但我不知道如何使用它：

```
[[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookie:cookies]; 
```

这是我的 POST 方法，我使用的是 RestKit API：

```
- (IBAction)addLinkPressed:(UIButton *)sender {

        [RKClient clientWithBaseURLString:@"http://MyWebsite.com"];

        NSDictionary* params = [NSDictionary dictionaryWithObjectsAndKeys:
                                self.linkField.text, @"url",
                                self.linkTitleField.text, @"title",
                                self.linkSummaryField.text, @"summary",
                                nil];

        RKRequest *request = [[RKClient sharedClient] post:@"/send_link.php" params:params delegate:self];
        [request setUserData:@"sendLink"];   
} 
```

**问题：**我应该存储 cookie 的哪个属性以将其用于登录信息，我应该将它放在我的代码中的什么位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T14:39:49.663

我通过一些低效的方式解决了这个问题。这是我的方法：首先我尝试发布到 Web 服务，发布后我解析返回的 HTML 以查看发布是否成功。如果发布成功，我会向用户发送一条适当的消息，表明您发布成功，但如果不成功，可能有两个原因：第一：发布执行期间出现错误第二：用户未登录。我认识到第一个错误和第二个错误之间的区别只是解析响应 HTML。这是我用于此方法的代码（这是用户想要更改密码的时间）

```
- (void)objectLoader:(RKObjectLoader*)objectLoader didFailWithError:(NSError*)error {
    NSRange range = [[error localizedDescription] rangeOfString:@"-1012"];
    if (range.length > 0){
        //First error occurs here
    }
    RKLogError(@"Hit error: %@", error);
}

- (IBAction)requestToChangePasswordPressed {
    MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
    hud.labelText = @"Loading";

    [RKClient clientWithBaseURLString:@"http://WebServiceDomain.com"];

    NSDictionary* params = [NSDictionary dictionaryWithObjectsAndKeys:
                            self.oldPasswordField.text, @"oldPassword",
                            self.passwordNew.text, @"newPassword",
                            self.confirmPasswordField.text, @"confirmPassword",
                            nil];

    RKRequest *request = [[RKClient sharedClient] post:@"/change_password.php" params:params delegate:self];
    [request setUserData:@"changePassword"];
    [self.view endEditing:YES];
    [MBProgressHUD hideHUDForView:self.view animated:YES];
}

- (void)autoLogin {

    [RKClient clientWithBaseURLString:@"http://WebServiceDomain.com"];
    [RKObjectManager sharedManager].client=[RKClient sharedClient];
    RKParams *parameters = [RKParams params];

    [parameters setValue:[[NSUserDefaults standardUserDefaults] objectForKey:@"defaultUsername"] forParam:@"username"];
    [parameters setValue:[[NSUserDefaults standardUserDefaults] objectForKey:@"defaultPassword"] forParam:@"password"];

    [[RKClient sharedClient] setAuthenticationType:RKRequestAuthenticationTypeHTTP];
    // because we have two POSTs and we want to use the same method for both of the for didLoadResponse: we set the UserDate like bellow
    RKRequest *request = [[RKClient sharedClient] post:@"/login.php" params:parameters delegate:self];
    [request setUserData:@"login"];
}

- (void)request:(RKRequest*)request didLoadResponse:(RKResponse*)response
{
    MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
    hud.labelText = @"Loading";

    id userData = [request userData];
    if ([userData isEqual:@"login"]) {

        if ([request isGET]) {
            // Handling GET /foo.xml

            if ([response isOK]) {
                // Success! Let's take a look at the data
                NSLog(@"Retrieved XML: %@", [response bodyAsString]);
            }

        } else if ([request isPOST]) {

            // Handling POST /other.json
            if ([response isJSON]) {
                NSLog(@"Got a JSON response back from our POST!");
            }

        } else if ([request isDELETE]) {

            // Handling DELETE /missing_resource.txt
            if ([response isNotFound]) {
                NSLog(@"The resource path '%@' was not found.", [request resourcePath]);
            }
        }
    }

    else if ([userData isEqual:@"sendLink"]) {
        NSData *addLinksHtmlData = response.body;

        // 2
        TFHpple *addlinksParser = [TFHpple hppleWithHTMLData:addLinksHtmlData];

        // 3
        NSString *errorLinksXpathQueryString = @"//div[@class='errorBox']/ul/li";
        NSArray *errorLinksNodes = [addlinksParser searchWithXPathQuery:errorLinksXpathQueryString];

        // 4
        NSMutableArray *newErrorLinks = [[NSMutableArray alloc] initWithCapacity:0];
        for (TFHppleElement *element in errorLinksNodes) {
            // 5
            AllModels *errorTitle = [[AllModels alloc] init];
            [newErrorLinks addObject:errorTitle];

            // 6
            errorTitle.errorTitle = [[element firstChild] content];
        }

        // 8
        self.linkErrorObjects = newErrorLinks;

        NSString *successLinksXpathQueryString = @"//div[@class='successBox']";
        NSArray *successLinksNodes = [addlinksParser searchWithXPathQuery:successLinksXpathQueryString];

        // 4
        NSMutableArray *newSuccessLinks = [[NSMutableArray alloc] initWithCapacity:0];
        for (TFHppleElement *element in successLinksNodes) {
            // 5
            AllModels *successTitle = [[AllModels alloc] init];
            [newSuccessLinks addObject:successTitle];

            // 6
            successTitle.successTitle = [[element firstChild] content];
        }

        // 8
        self.linkSuccessObjects = newSuccessLinks;

    }

    else {

        NSLog(@"HTTP status code:     %d", response.statusCode);
        NSLog(@"HTTP status message:  %@", [response localizedStatusCodeString]);
        NSLog(@"Header fields: %@", response.allHeaderFields);
        NSLog(@"Body: %@", response.bodyAsString);

        NSData *HtmlData = response.body;

        // 2
        TFHpple *addParser = [TFHpple hppleWithHTMLData:HtmlData];

        // 3
        NSString *errorXpathQueryString = @"//div[@class='errorBox']/ul/li";
        NSArray *errorNodes = [addParser searchWithXPathQuery:errorXpathQueryString];

        // 4
        NSMutableArray *newError = [[NSMutableArray alloc] initWithCapacity:0];
        for (TFHppleElement *element in errorNodes) {
            // 5
            AllModels *errorTitle = [[AllModels alloc] init];
            [newError addObject:errorTitle];

            // 6
            errorTitle.errorTitle = [[element firstChild] content];
        }

        // 8
        self.ErrorObjects = newError;

        NSString *successXpathQueryString = @"//div[@class='successBox']";
        NSArray *successNodes = [addParser searchWithXPathQuery:successXpathQueryString];

        // 4
        NSMutableArray *newSuccess = [[NSMutableArray alloc] initWithCapacity:0];
        for (TFHppleElement *element in successNodes) {
            // 5
            AllModels *successTitle = [[AllModels alloc] init];
            [newSuccess addObject:successTitle];

            // 6
            successTitle.successTitle = [[element firstChild] content];
        }

        // 8
        self.successObjects = newSuccess;

        [self errorCheck];
    }
    [MBProgressHUD hideHUDForView:self.view animated:YES];
    [MBProgressHUD hideHUDForView:self.view animated:YES];
}

- (void)errorCheck {

    MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
    hud.labelText = @"Loading";

    if(self.errorObjects.count > 0) {
        AllModels *errorlink = [self.errorObjects objectAtIndex:0];
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"There is a problem" message:errorlink.errorTitle delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil , nil];
        [alert show];
    }
    else {

        if(self.linkErrorObjects.count > 0) {
            [self autoLogin];
            [self requestToChangePasswordPressed];
        }

        else {
            AllModels *successlink = [self.successObjects objectAtIndex:0];
            self.successLabel.hidden = NO;
            self.successLabel.text = successlink.successTitle;
            NSLog(@"Success Title:  %@",successlink.successTitle);

            [UIView animateWithDuration:3.0
                                  delay:0.0
                                options:UIViewAnimationOptionBeginFromCurrentState
                             animations:^{ self.successLabel.alpha = 0.0; }
                             completion:^(BOOL fin) { if (fin) [self.successLabel removeFromSuperview]; }];

            [self performSelector:@selector(dismissModalViewController) withObject:nil afterDelay:1.0];
        }

    }
    [MBProgressHUD hideHUDForView:self.view animated:YES];
    [MBProgressHUD hideHUDForView:self.view animated:YES];
} 
```

# iphone - iOS 6 自动旋转混乱

> ID：12546498
> 
> 赞同：3
> 
> 时间：2012-09-22T18:20:53.317
> 
> 标签：iphone, rotation, ios6, autorotate

我的整个界面都在一个 Storyboard 中。如何使大多数 ViewController 只支持纵向，而只有一对支持所有方向。我无法理解苹果新的自动旋转系统。另外，我怎样才能使它向后兼容 iOS 5？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T12:56:21.943

在您的 Navigation Controller 子类中，将决定转发到堆栈中的顶部视图控制器：

```
-(NSUInteger) supportedInterfaceOrientations {
   return [self.topViewController supportedInterfaceOrientations];
} 
```

为此创建一个单独的故事板文件是最糟糕的路径，让它们与您的应用程序更新保持同步将是一场维护噩梦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T18:55:31.633

您应该观看[WWDC'2012 视频](https://developer.apple.com/videos/wwdc/2012/)，尤其是“基本要素”部分中有关轮换的视频。

一个叫做“iOS中视图控制器的T演进”的文章非常详细地解释了关于旋转的主题（以及如何使它们与各种iOS版本兼容），并附有解释和代码示例，我无法比Apple更好地解释它； )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T23:52:23.780

好吧，我有点破解了这个问题。这是我的子类 NavController.h

```
#import "RootVC.h"

@implementation RootVC

-(BOOL)shouldAutorotate {
    def = [NSUserDefaults standardUserDefaults];
    return YES;
}
-(NSUInteger)supportedInterfaceOrientations {
    if ([def integerForKey:@"Should Rotate"] == 1) {
        return UIInterfaceOrientationMaskAllButUpsideDown;
    } else {
        return UIInterfaceOrientationMaskPortrait;
    }
}
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationMaskPortrait;
}
@end 
```

我只是在每个视图控制器的默认值中为 @"Should Rotate" 设置了一个整数

```
- (void)viewWillAppear:(BOOL)animated 
```

奇迹般有效！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T01:15:53.350

如果您使用的是本机 rootViewController，则必须对其进行扩展以优雅地支持 iOS5。这在上面提到的 WWDC 视频中说。

基本上，如果您使用的是 UINavigationViewController，请扩展它并覆盖它的`- (NSUInteger)supportedInterfaceOrientations`方法。在那里，查看您的孩子（您可以只查询旧的接口方向方法）并确定应该支持什么并返回正确的值。

您需要这样做以向后兼容的原因有两件事： - 他们已经弃用了旋转东西的旧方式 - 只有 rootViewController 曾经获得旋转调用。父母应该为它的孩子决定它需要处于什么方向。所有这些变化都与新的 AutoLayout 内容一致。

扩展导航控制器后，转到故事板-> 选择根控制器（在本例中为导航控制器）-> 将类设置为新编写的类。

高温高压

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T01:07:43.207

这是我用来支持 iOS 5 设备和 iOS 6 设备（以及 iPhone 5）的 hack。在您的前缀文件中，添加以下 #define

```
#ifdef __IPHONE_6_0 // Only do the rotation fix if we are building with iOS 6 API
@protocol DeprecatedRotationSupported
@optional
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toOrientation;
- (BOOL)shouldAutorotate;
- (NSUInteger)supportedInterfaceOrientations;
@end

#define shouldAutorotateToInterface_fixed shouldAutorotate \
{ \
    UIViewController <DeprecatedRotationSupported> *selfTyped = (UIViewController <DeprecatedRotationSupported> *) self; \
\
    if(![self respondsToSelector:@selector(shouldAutorotateToInterfaceOrientation:)]) \
        return NO; \
    int optionCount = 0; \
    for(UIInterfaceOrientation orientation = UIInterfaceOrientationPortrait; orientation <= UIDeviceOrientationLandscapeLeft; orientation++) \
    { \
        if(![selfTyped shouldAutorotateToInterfaceOrientation:orientation]) continue; \
        if(optionCount==1) return YES; \
        optionCount++; \
    } \
    return NO; \
} \
\
- (NSUInteger)supportedInterfaceOrientations \
{ \
    UIViewController <DeprecatedRotationSupported> *selfTyped = (UIViewController <DeprecatedRotationSupported> *) self; \
\
    if(![self respondsToSelector:@selector(shouldAutorotateToInterfaceOrientation:)]) return UIInterfaceOrientationMaskPortrait; \
    \
    NSUInteger supported = 0; \
    \
    if([selfTyped shouldAutorotateToInterfaceOrientation:UIInterfaceOrientationPortrait]) supported |= UIInterfaceOrientationMaskPortrait; \
    if([selfTyped shouldAutorotateToInterfaceOrientation:UIInterfaceOrientationLandscapeLeft]) supported |= UIInterfaceOrientationMaskLandscapeLeft; \
    if([selfTyped shouldAutorotateToInterfaceOrientation:UIInterfaceOrientationLandscapeRight]) supported |= UIInterfaceOrientationMaskLandscapeRight; \
    if([selfTyped shouldAutorotateToInterfaceOrientation:UIInterfaceOrientationPortraitUpsideDown]) supported |= UIInterfaceOrientationMaskPortraitUpsideDown; \
    return supported;  \
} \
\
- (BOOL)shouldAutorotateToInterfaceOrientation
#else // We are building with the older API, leave shouldAutorotateToInterfaceOrientation alone.
#define shouldAutorotateToInterface_fixed shouldAutorotateToInterfaceOrientation
#endif // __IPHONE_6_0 
```

然后，在任何使用 shouldAutorotateToInterfaceOrientation: 的地方使用 shouldAutorotateToInterface_fixed:

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-22T09:23:15.887

这是我的子类 RootNavController.h

```
-(BOOL)shouldAutorotate
{
    return YES;
}
-(NSUInteger) supportedInterfaceOrientations
{
    if (self.topViewController.view.superview)
    {
        return [self.topViewController supportedInterfaceOrientations];
    }

    return UIInterfaceOrientationMaskAll;
}
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

# css - 使用 CSS 对图像进行着色而不叠加

> ID：12546499
> 
> 赞同：36
> 
> 时间：2012-09-22T18:20:56.940
> 
> 标签：css, svg, webkit, image-manipulation

是否可以在 WebKit 浏览器中使用 CSS 将图像着色为特定颜色而无需覆盖？

**失败的尝试**

*   设法使用棕褐色或任意颜色着色图像，`hue-rotate`但找不到用特定颜色着色的方法。
*   创建“色调”SVG 过滤器并调用它`-webkit-filter: url(#tint)`在 Chrome 上不起作用。
*   `opacity`/ `box-shadow`css 属性与`drop-shadow`/过滤器的所有可能组合`opacity`都不会产生预期的效果。

**想法**

*   给定一种颜色，难道不能结合 HSB 过滤器 ( `hue-rotate`, `saturation`, `brightness`) 来生成它的色调吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-22T18:28:25.970

最终会是，使用*着色器*。请参阅有关过滤器的 W3C 文档。

**目前**，可能的例如是：

```
-webkit-filter: grayscale; /*sepia, hue-rotate, invert....*/
-webkit-filter: brightness(50%); 
```

**看**

*   [David Walsh 谈 CSS 过滤器](http://davidwalsh.name/css-filters)
*   [Stackoverflow：应用玫瑰色...](https://stackoverflow.com/questions/10465464/apply-a-rose-tint-or-change-entire-documents-brightness-in-css-js-jquery-html)：
*   [W3C 滤镜效果 1.0 文档 - 38.2.5。其他统一变量：CSS 着色器参数](https://dvcs.w3.org/hg/FXTF/raw-file/tip/filters/index.html#recommendation)

**更新**：

*Adobe*发布了基于 HTML5 的[CSS 过滤器实验室](http://html.adobe.com/webstandards/csscustomfilters/cssfilterlab/)，支持在支持的浏览器上[自定义过滤器](http://html.adobe.com/webstandards/csscustomfilters/)（着色器）：

![在此处输入图像描述](../Images/b596ffefc90d153841d633161a72d7ae.png)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-10-24T10:28:57.463

虽然没有独立的色调过滤器，但您可以通过现有过滤器的组合来制作一种没有阴影的过滤器。

结合棕褐色来统一颜色，然后色调旋转到你想要的颜色

```
-webkit-filter: sepia(90%) hue-rotate(90deg); 
```

我为我的色调使用带有 alpha 值的边框，它实际上是一个叠加层，但不使用任何额外的 DOM 元素，从而在其他浏览器获得这些过滤器时更简单地过渡到棕褐色 + 色调旋转。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-06-20T01:09:17.670

这在今天使用 SVG 过滤器是可能的，而无需使用着色器。您可以通过 -webkit-filter: "url(#yourfilterID)" 等语法将其用作 CSS 过滤器（尽管它在 IE 中不起作用）。

```
<svg width="800px" height="600px" viewbox="0 0 800 600">
    <defs>
        <filter id="f1" x="0%" y="0%" width="100%" height="100%" color-interpolation-filters="sRGB">
        <feColorMatrix id="tinter" type="matrix" values=".6 .6 .6 0 0 
                                                            .2 .2 .2 0 0 
                                                            .0 .0 .0 0 0 
                                                             0    0   0 1 0"/>
        </filter>     
    </defs>

 <image x="0" y="0" width="550" height="370" preserveAspectRatio="true"
    filter="url(#tinter)" xlink:href="http://www.crossfitwaxahachie.com/wp-content/uploads/2012/04/IMG_0752.jpg"/>
</svg> 
```

[http://codepen.io/mullany/details/baLkH/](http://codepen.io/mullany/details/baLkH/)上的动态演示

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-06-10T20:21:22.537

`box-shadow: inset 0px 0px 64px 64px cornflowerblue, 0px 0px 4px 4px cornflowerblue;`

任何颜色的色调（而不是到处都支持的棕褐色或旋转滤镜）可以通过适当大小的插入框阴影来实现。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-11-20T16:04:17.830

那么垫底呢？

HTML：

```
<span class="tint"><img src="..." /></span> 
```

CSS：

```
.tint { background-color:red; display:inline-block; }
.tint img { opacity:0.8 } 
```

根据需要调整颜色和不透明度。不适用于具有透明度的图像。

# d - 有`static if`时如何生成文档

> ID：12546513
> 
> 赞同：3
> 
> 时间：2012-09-22T18:22:37.687
> 
> 标签：d

```
/** This is struct S. */
struct S(T) {

  static if(isFloatingPoint!T)
  {
    /// This version works well with floating-point numbers.
    void fun() { }
  }
  else
  {
    /// This version works well with everything else.
    void fun() { }
    /// We also provide extra functionality.
    void du() { }
  }
} 
```

使用 编译`dmd -D`，仅为第一个块生成文档。我如何让它也为`else`块生成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T18:56:20.247

对于`version`块，它只是最终在文档中使用的版本（无论是第一个还是最后一个或两者之间的任何一个）。因此，例如，如果您有一个`version`用于 Linux 的块和一个用于 Windows 的块，那么只有与您编译的系统匹配的块才会出现在文档中。

`static if`模板之外的块似乎以相同的方式运行。如果它们被编译进去，那么它们的 ddoc 注释最终会出现在文档中，而如果它们没有被编译进去，它们就不会。

但是，模板*中*`static if`的块似乎总是从第一个静态 if 块中获取文档，即使它总是. 但是考虑到这些静态 if 最终可能同时是and （来自模板的不同实例化），并且编译器实际上并不要求实例化模板以使其 ddoc 注释最终出现在生成的文档中，这是有道理的。它没有像模板之外的块那样的正确答案。*`false``true``false``static if`*

 *无论如何，将文档放在`version`块或中通常是一个坏主意`static if`，正是因为它们正在使用条件编译并且可能会或可能不会被编译。解决方案是使用`version(D_Ddoc)`块。所以，你最终会得到这样的东西：

```
/// This is struct S
struct S(T)
{
    version(D_Ddoc)
    {
        /// Function foo.
        void fun();

        /// Extra functionality. Exists only when T is not a floating point type.
        void du();
    }
    else
    {
        static if(isFloatingPoint!T)
            void fun() { }
        else
        {
            void fun() { }
            void du() { }
        }
    }
} 
```

我还要注意，即使您尝试做的事情奏效了，它在文档中看起来也很奇怪，因为您最终会`foo`在那里两次使用完全相同的签名但不同的评论。`static if`根本不会出现在文档中，因此无法知道在什么情况下`foo`存在。它看起来就像你以某种方式声明`foo`了两次。

这种情况与模板约束类似。约束不会出现在文档中，因此当您处理仅由其约束重载的模板化函数时，记录每个函数重载是没有意义的。

但是，您不需要`version(D_Ddoc)`的一个地方是，当您在一系列`version`块中具有相同的功能时。例如

```
/// foo!
version(linux)
    void foo() {}
else version(Windows)
    void foo() {}
else
    static assert(0, "Unsupported OS."); 
```

`version`无论在哪个块中编译，ddoc 注释都将最终出现在生成的文档中。

应该注意的是，`version(D_Ddoc)`块的使用往往会使得在使用时`-D`，除了生成文档之外编译你的代码是没有意义的，并且你运行的实际可执行文件应该由一个单独的构建生成，它不'不使用`-D`。您*可以*将完整的代码放在`version(D_Ddoc)`块中以避免这种情况，但这意味着重复代码，并且它实际上不适用于`static if`. Phobos 使用`version(StdDdoc)`（它为自己定义）而不是`version(D_Ddoc)`这样，如果你不使用`version(D_Ddoc)`块，你仍然可以编译`-D`并让 Phobos 工作，但是一旦你开始使用`version(D_Ddoc)`，你将不得不单独生成你的文档正常构建。*

# ruby - Gem 定义：忽略 JRuby 中的 extconf.rb

> ID：12546514
> 
> 赞同：2
> 
> 时间：2012-09-22T18:22:43.747
> 
> 标签：ruby, gem, jruby, gemspecs

我有一个带有 C 扩展和 java 扩展的 gem，它可以通过 rbenv 在 JRuby 中正常安装，但无法通过 RVM 在 JRuby 中安装。gemspec[和项目在 Github 上](https://github.com/dockyard/pg_array_parser)。我尝试在 gemspec 中明确列出文件，当平台是 Java 时不包括 extconf.rb 和 *.c 文件，但仍然无法在 RVM 的 JRuby 上安装 gem。

您可以尝试安装 with`gem install pg_array_parser --pre`以查看安装失败并使用 master 中的当前 gemspec。我不确定此时我还能尝试什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T07:12:48.363

`if RUBY_PLATFORM =~ /java/`在文件中使用`gemspec`是不够的，因为这将由您在打包 gem 时使用的 ruby​​ 实现使用。

从您的问题中不清楚您是否正在这样做，但是您必须使用 rvm 和[rake-compiler](https://github.com/luislavena/rake-compiler)为您所针对的不同平台构建您的 gem 。使用 MRI，运行`rake native gem`；使用 JRuby，更多细节`rake java gem`请参见[rake-compiler 文档](https://github.com/luislavena/rake-compiler)，或查看其他具有相同功能的项目，例如[redcloth](https://github.com/jgarber/redcloth)或[gherkin](https://github.com/cucumber/gherkin)。

# java - 在Java抽象类中创建新对象

> ID：12546516
> 
> 赞同：5
> 
> 时间：2012-09-22T18:23:13.740
> 
> 标签：java, abstract-class

我有两个使用非常相似的方法的对象，除了一行。例如：

```
public class Cat extends Animal
public class Dog extends Animal 
```

而且它们都使用`breed`抽象类中的方法`Animal`。一个打电话`new Dog()`，另一个`new Cat()`。现在我只是将它声明为`abstract public void breed();`在 Animal 中，但是有没有一种方法可以概括它，所以我不必让它成为一个被覆盖的抽象方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T18:53:22.603

有很多方法可以做到这一点，假设`breed`你的意思是“创造我的孩子”。

**反射**

首先是使用反射。如果你的类有一个无参数构造函数，这就像调用[Class.newInstance](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#newInstance%28%29)一样简单：

```
public Animal breed() {
    try {
        return (Animal) getClass().newInstance();
    } catch (Exception ex) {
        // TODO Log me
        return null;
    }
} 
```

如果在所有子类中都没有无参数构造函数，则必须在所有子类中都有一个统一的构造函数。例如，如果你有`Cat(int, String)`and `Dog(int, String)`，那么你需要通过它获取构造函数[`Class.getConstructor`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getConstructor%28java.lang.Class...%29)并调用[`newInstance`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Constructor.html#newInstance%28java.lang.Object...%29)它：

```
return (Animal) getClass().getConstructor(int.class, String.class).newInstance(0, "Unnamed"); 
```

`int`例如，`String`这里可能是年龄和姓名。这就是你如何通过反射来做到这一点的。

**提供者**

另一种方法是使用这个简单的界面：

```
public interface Provider<T> {
    T create();
} 
```

然后让您的抽象类在其构造函数中获取 this 的实例：

```
public abstract class Animal {
    private final Provider<Animal> animalProvider;

    protected Animal( ... , Provider<Animal> animalProvider) {
        // ...
        this.animalProvider = animalProvider;
    }

    public Animal breed() {
        return animalProvider.create();
    }
} 
```

然后您的子类将 a 传递`Provider<Animal>`给超类，该超类将创建子类的新实例：

```
public class Dog extends Animal {
    public Dog( ... ) {
        super( ... , new DogProvider());
        // ...
    }

    private static class DogProvider implements Provider<Animal> {
        public Animal create() {
            return new Dog( ... );
        }
    }
} 
```

对其他子类也这样做。

**注意：**如果`breed`您的意思是“了解我的类型”，那么您应该编辑您的问题以这样说。如果这是您的意思，那么这是一个可行的解决方案：

```
public abstract class Animal {
    protected final Breed breed;

    protected Animal( ... , Breed breed) {
        // ...
        this.breed = breed;
    }

    public Breed getBreed() {
        return breed;
    }
} 
```

我建议遵循数据容器方法的`get`/`set`约定。Java 具有旨在处理这些命名约定的 bean 类，它或多或少是跨许多平台的标准。对于您的子类：

```
public class Dog extends Animal {
    public Dog( ... ) {
        super( ... , new Breed( ... ));
        // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T18:30:53.130

事实上，是的，你可以。您需要使用反射，因此性能可能有点不确定，但这（未经测试）应该可以工作：

```
public abstract class Animal{
    public Animal breed(){
      return getClass().newInstance();
    }
    //other methods
} 
```

这将返回实际调用类型的新实例，而不是 Animal 的类型（实现它的地方）。

这实际上有点类似于[Prototype Pattern](http://en.wikipedia.org/wiki/Prototype_pattern)。尽管在这种情况下，您正在创建一个新实例，而不是复制现有实例。

**编辑**

正如@FrankPavageau 在评论中指出的那样，您可以通过使用来获得相同的结果，而不是在构造函数中屏蔽异常

```
public abstract class Animal{
    public Animal breed(){
      return getClass().getConstructor().newInstance();
    }
    //other methods
} 
```

它将包装任何抛出的异常，`InvocationTargetException`它更干净，可能更容易调试。感谢@FrankPavageau 的建议。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T18:25:45.020

不，没有。您将必须拥有类似于您所做的事情，如下所示

我想你想在你的抽象类中

```
public abstract Breed getBreed(); 
```

然后在每个子类中都有

```
public Breed getBreed() {
    return new DogBreed();
} 
```

和一只类似的回归猫。

或者

在 Animal 类中有一个受保护的字段，称为品种。然后可以在每个子类中对其进行初始化。这将消除对抽象方法的需要。例如

```
public abstract class Animal {
    Breed breed;
...
} 
```

然后在 Dog have

```
public class Dog extends Animal {
    public Dog() {
        breed = new DogBreed();
    }
} 
```

并且有类似于猫的东西。

在将品种传递给 Dog/Cat ctor 时可能值得您这样做，这样您就可以创建不同品种的 Dog 对象，而不是将您的模型限制为只有一个品种的 Dog

我不确定 Breed 在您的示例中是否必须正确建模。你真的希望 new Dog() 成为一个品种吗？或者你的意思是类型？在这种情况下，它只是一个动物，返回动物的抽象方法是要走的路。

# php - 进行多个查询时获取最后一个查询的 id

> ID：12546518
> 
> 赞同：0
> 
> 时间：2012-09-22T18:23:18.890
> 
> 标签：php, mysql

在 php 中有一个带有 textarea 和文件上传的表单。在 mysql 中，我有表 1，其中每个上传文件的行都有名称、大小等数据……我有表 2，其中输入了 textarea 中的数据，一列是上传文件的 id。

我`mysql_insert_id`用来获取表 1 中最后插入行的 id（上传文件的 id）。然后我在表 2 中插入该 ID。

假设不同用户同时进行多次上传，`mysql_insert_id`每次都会返回正确的 id？如果 2 个用户在确切时间上传会发生什么.. 或者超时.. 我想我在问是否有更好的方法将新创建的 id 同时插入到 2 个表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:26:09.703

它返回进行插入的会话的插入行的 ID。所以，是的，你做得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T18:27:15.063

根据 php 文档 ( [mysqli::$insert_id](http://php.net/manual/en/mysqli.insert-id.php) ) last_insert_id 函数返回由对具有该`AUTO_INCREMENT`属性的列的表的查询生成的 ID。那是您正在使用的特定资源；其他资源不会互相影响

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T18:27:32.103

如果您当然在表的主键上有自动增量，mysql 不能给出两倍相同的值

# java - 由于 NullPointerException 导致活动崩溃（也许是我的 SQLite DB 命令？）

> ID：12546521
> 
> 赞同：1
> 
> 时间：2012-09-22T18:23:43.350
> 
> 标签：java, android

由于 java.lang.nullpointerexception，我正在强制关闭此活动。这很可能与我的 SQLite DB 命令有关，这是我第一次使用它们。

这是我的代码；

```
package com.example.gymbuddy;

import android.app.Activity;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.widget.TextView;

public class Benchmark extends Activity {

//Declaring Database and Table
private final String MY_DATABASE_NAME = "GymBuddy.db";
private final String MY_DATABASE_TABLE = "benchmark";
private static final int iVersion = 1;

//Defining Table
private static class TableClass {
private static final String BenchmarkData = "dataBenchmark";
private static final String COL_VAR = "variable";
private static final String COL_VAL = "value";
}

//To refer to the Database
private SQLiteDatabase db;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_benchmark);

    db.execSQL(String.format("CREATE_TABLE %s(%s INTEGER PRIMARY KEY, %s TEXT)",
            TableClass.BenchmarkData, TableClass.COL_VAR, TableClass.COL_VAL));

}

public void onStart() {
    super.onStart();

    findViewById(R.id.button5).setOnClickListener(new handleButton5());

}

class handleButton5 implements OnClickListener {
    public void onClick(View v) {

        EditText editText1 = (EditText)findViewById(R.id.editText1);
        String sWeight = editText1.getText().toString();
        final double dWeight = Double.parseDouble(sWeight);

        EditText editText2 = (EditText)findViewById(R.id.editText2);
        String sPush = editText2.getText().toString();
        final double dPush = Double.parseDouble(sPush);

        EditText editText3 = (EditText)findViewById(R.id.editText3);
        String sSit = editText3.getText().toString();
        final double dSit = Double.parseDouble(sSit);

        EditText editText4 = (EditText)findViewById(R.id.editText4);
        String sPull = editText4.getText().toString();
        final double dPull = Double.parseDouble(sPull);

        double dBench = (((Math.floor(dWeight*.0664))*10)-10)+dPush;
        double dFlies = (Math.floor(((Math.floor(dBench*.6)/10)*10)));
        double dLats = ((Math.floor(dWeight*.05))*10)+dPull;
        double dCurls = ((Math.ceil(((dWeight*dPull)*.025)/10))*10);
        if(dCurls<20){
            dCurls = 20;
        }
        double dClose = ((Math.floor(dBench*.065))*10);
        double dRaise = 15;
        double dDcurls = Math.floor(dCurls*.4);
        double dDraise = 10;
        double dLegExt = dWeight*.5;
        double dPress = dWeight-20;
        double dSquat = (Math.floor((Math.floor(dWeight/10))*.6))*10;
        double dTricepExt = dDcurls+10;
        double dTricepKick = dDcurls;
        double dCalf = (Math.floor(dWeight*.035))*10;
        double dDead = (Math.floor(dWeight*.13))*10;

        int iBench = (int)dBench;
        int iFlies = (int)dFlies;
        int iLats = (int)dLats;
        int iCurls = (int)dCurls;
        int iClose = (int)dClose;
        int iRaise = (int)dRaise;
        int iDcurls = (int)dDcurls;
        int iDraise = (int)dDraise;
        int iLegExt = (int)dLegExt;
        int iPress = (int)dPress;
        int iSquat = (int)dSquat;
        int iTricepExt = (int)dTricepExt;
        int iTricepKick = (int)dTricepKick;
        int iCalf = (int)dCalf;
        int iDead = (int)dDead;
        int iSit = (int)dSit;

        TextView TextView1 = (TextView)findViewById(R.id.textView1);
        TextView1.setText(String.valueOf("Bench Press "+ iBench +" lbs"));

        TextView TextView2 = (TextView)findViewById(R.id.textView2);
        TextView2.setText(String.valueOf("Bar Curls "+ iCurls +" lbs"));

        TextView TextView3 = (TextView)findViewById(R.id.textView3);
        TextView3.setText(String.valueOf("Close Grip "+ iClose +" lbs"));

        TextView TextView4 = (TextView)findViewById(R.id.textView4);
        TextView4.setText(String.valueOf("Deltoid Raise "+ iRaise +" lbs"));

        TextView TextView5 = (TextView)findViewById(R.id.textView5);
        TextView5.setText(String.valueOf("Dumbbell Curls "+ iDcurls +" lbs"));

        TextView TextView6 = (TextView)findViewById(R.id.textView6);
        TextView6.setText(String.valueOf("Dumbbell Raise "+ iDraise +" lbs"));

        TextView TextView7 = (TextView)findViewById(R.id.textView7);
        TextView7.setText(String.valueOf("Lat Pull Down "+ iLats +" lbs"));

        TextView TextView8 = (TextView)findViewById(R.id.textView8);
        TextView8.setText(String.valueOf("Leg Extension "+ iLegExt +" lbs"));

        TextView TextView9 = (TextView)findViewById(R.id.textView9);
        TextView9.setText(String.valueOf("Leg Press "+ iPress +" lbs"));

        TextView TextView10 = (TextView)findViewById(R.id.textView10);
        TextView10.setText(String.valueOf("Pec Flies "+ iFlies +" lbs"));

        TextView TextView11 = (TextView)findViewById(R.id.textView11);
        TextView11.setText(String.valueOf("Squats "+ iSquat +" lbs"));

        TextView TextView12 = (TextView)findViewById(R.id.textView12);
        TextView12.setText(String.valueOf("Tricep Extension "+ iTricepExt +" lbs"));

        TextView TextView13 = (TextView)findViewById(R.id.textView13);
        TextView13.setText(String.valueOf("Tricep Kickbacks "+ iTricepKick +" lbs"));

        TextView TextView14 = (TextView)findViewById(R.id.textView14);
        TextView14.setText(String.valueOf("Calf Raises "+ iCalf));

        TextView TextView15 = (TextView)findViewById(R.id.textView15);
        TextView15.setText(String.valueOf("Dead Lift "+ iDead +" lbs"));

        TextView TextView16 = (TextView)findViewById(R.id.textView16);
        TextView16.setText(String.valueOf("Sit Ups "+ iSit));

        }
    }

} 
```

这是我的 LogCat；

```
09-22 18:12:34.190: D/dalvikvm(540): Not late-enabling CheckJNI (already on)
09-22 18:12:35.649: D/dalvikvm(540): GC_FOR_ALLOC freed 77K, 3% free 9962K/10179K, paused 67ms
09-22 18:12:35.669: I/dalvikvm-heap(540): Grow heap (frag case) to 11.786MB for 2069904-byte allocation
09-22 18:12:35.779: D/dalvikvm(540): GC_CONCURRENT freed 1K, 3% free 11982K/12231K, paused 4ms+14ms
09-22 18:12:35.979: D/dalvikvm(540): GC_FOR_ALLOC freed <1K, 3% free 11983K/12231K, paused 39ms
09-22 18:12:36.010: I/dalvikvm-heap(540): Grow heap (frag case) to 13.685MB for 1991824-byte allocation
09-22 18:12:36.129: D/dalvikvm(540): GC_CONCURRENT freed <1K, 3% free 13928K/14215K, paused 5ms+26ms
09-22 18:12:36.439: D/gralloc_goldfish(540): Emulator without GPU emulation detected.
09-22 18:12:42.999: D/AndroidRuntime(540): Shutting down VM
09-22 18:12:43.010: W/dalvikvm(540): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
09-22 18:12:43.029: E/AndroidRuntime(540): FATAL EXCEPTION: main
09-22 18:12:43.029: E/AndroidRuntime(540): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.gymbuddy/com.example.gymbuddy.Benchmark}: java.lang.NullPointerException
09-22 18:12:43.029: E/AndroidRuntime(540):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
09-22 18:12:43.029: E/AndroidRuntime(540):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
09-22 18:12:43.029: E/AndroidRuntime(540):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
09-22 18:12:43.029: E/AndroidRuntime(540):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
09-22 18:12:43.029: E/AndroidRuntime(540):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-22 18:12:43.029: E/AndroidRuntime(540):  at android.os.Looper.loop(Looper.java:137)
09-22 18:12:43.029: E/AndroidRuntime(540):  at android.app.ActivityThread.main(ActivityThread.java:4340)
09-22 18:12:43.029: E/AndroidRuntime(540):  at java.lang.reflect.Method.invokeNative(Native Method)
09-22 18:12:43.029: E/AndroidRuntime(540):  at java.lang.reflect.Method.invoke(Method.java:511)
09-22 18:12:43.029: E/AndroidRuntime(540):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-22 18:12:43.029: E/AndroidRuntime(540):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-22 18:12:43.029: E/AndroidRuntime(540):  at dalvik.system.NativeStart.main(Native Method)
09-22 18:12:43.029: E/AndroidRuntime(540): Caused by: java.lang.NullPointerException
09-22 18:12:43.029: E/AndroidRuntime(540):  at com.example.gymbuddy.Benchmark.onCreate(Benchmark.java:34)
09-22 18:12:43.029: E/AndroidRuntime(540):  at android.app.Activity.performCreate(Activity.java:4465)
09-22 18:12:43.029: E/AndroidRuntime(540):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-22 18:12:43.029: E/AndroidRuntime(540):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
09-22 18:12:43.029: E/AndroidRuntime(540):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:45:28.500

所以，问题是这样的：

```
db.execSQL([...]); 
```

你调用它，但你的数据库没有初始化，所以首先你需要初始化它：

一小段代码：

```
DataSource handler = new DataSource(this);
SQLiteDatabase db = handler.getWritableDatabase(); 
```

...下一个工作，`Cursors`例如等...

你的方法太糟糕了。非常好的和清晰的方法是使用`SQLiteOpenHelper`，这个类包含了你实现目标所需的一切。

这是一个简单的例子：

```
public class DataSource extends SQLiteOpenHelper {

    protected static final String DB_NAME = "BmiCalcHistoryDatabase";
    protected static final int START_DB_VERSION = 1;

    /* columns */
    protected static final String TABLE_NAME = "CalcHistory";
    protected static final String KEY_ID = "id";
    protected static final String KEY_RESULT = "result";
    protected static final String KEY_TYPE = "type";
    protected static final String KEY_DATE = "calcDate";

    public DataSource(Context cntx) {
        super(cntx, DB_NAME, null, START_DB_VERSION);
    }

    public void onCreate(SQLiteDatabase db) {
        String CREATE_QUERY = "CREATE TABLE " + TABLE_NAME + "("
                + KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, "
                + KEY_RESULT + " TEXT NOT NULL, "
                + KEY_TYPE + " TEXT NOT NULL, "
                + KEY_DATE + " TEXT NOT NULL" + ");";
        db.execSQL(CREATE_QUERY);
    }

    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        String DELETE_QUERY = "DROP TABLE IF EXISTS " + TABLE_NAME;
        db.execSQL(DELETE_QUERY);
        onCreate(db);
    }
} 
```

你需要阅读一些教程，所以检查一下：

*   [Android SQLite 数据库和 ContentProvider - 教程](http://www.vogella.com/articles/AndroidSQLite/article.html)
*   [Android SQLite 数据库教程](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

# linq - WP7 LINQ 删除不起作用 - 获取 NullReferenceException

> ID：12546523
> 
> 赞同：1
> 
> 时间：2012-09-22T18:24:02.320
> 
> 标签：linq, windows-phone-7

我正在开发一个 WP7 应用程序，我需要使用 DeleteOnSubmit() 方法删除一行，但我不断收到 NullReferenceException 错误。我找不到问题出在哪里。

```
public void HardDeleteOrder(int deleteOrderId)
{

    var oResult = from o in App.orderDataContext.orders
              where o.OrderId == deleteOrderId
              select o;

    foreach (var oRow in oResult)
    {
       App.orderDataContext.Orders.DeleteOnSubmit(oRow);
    }
    App.orderDataContext.SubmitChanges();
} 
```

当我运行它时，代码在方法的结尾大括号上崩溃，并出现异常消息“NullReferenceException 未处理”。

这是堆栈跟踪：

```
System.NullReferenceException was unhandled
Message=NullReferenceException
StackTrace:
   at System.Data.Linq.Mapping.MetaAccessor`2.SetBoxedValue(Object& instance, Object value)
   at System.Data.Linq.ChangeProcessor.ClearForeignKeysHelper(MetaAssociation assoc, Object trackedInstance)
   at System.Data.Linq.ChangeProcessor.ClearForeignKeyReferences(TrackedObject to)
   at System.Data.Linq.ChangeProcessor.PostProcessUpdates(List`1 insertedItems, List`1 deletedItems)
   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)
   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)
   at System.Data.Linq.DataContext.SubmitChanges()
   at orders.viewmodels.OrderViewModel.HardDeleteOrder(Int32 deleteOrderId)
   at orders.OrderView.RemoveOrderFromDatabase()
   at orders.OrderView.RemoveOrder()
   at orders.OrderView.detailsBarCancel_Click(Object sender, EventArgs e)
   at orders.App.detailsBarCancel_Click(Object sender, EventArgs e)
   at Microsoft.Phone.Shell.ApplicationBarItemContainer.FireEventHandler(EventHandler handler, Object sender, EventArgs args)
   at Microsoft.Phone.Shell.ApplicationBarIconButton.ClickEvent()
   at Microsoft.Phone.Shell.ApplicationBarIconButtonContainer.ClickEvent()
   at Microsoft.Phone.Shell.ApplicationBar.OnCommand(UInt32 idCommand)
   at Microsoft.Phone.Shell.Interop.NativeCallbackInteropWrapper.OnCommand(UInt32 idCommand) 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T12:05:31.240

这主要是由于外键约束。根据 [http://msdn.microsoft.com/en-us/library/bb386925.aspx](http://msdn.microsoft.com/en-us/library/bb386925.aspx)

> LINQ to SQL 不支持或识别级联删除操作。如果要删除具有约束条件的表中的行，则必须完成以下任一任务：

```
Set the ON DELETE CASCADE rule in the foreign-key constraint in the database.

Use your own code to first delete the child objects that prevent the parent object from being deleted. 
```

# mapkit - iOS 6 上的 mapkit usertrackingwithheading 模式遇到问题

> ID：12546524
> 
> 赞同：17
> 
> 时间：2012-09-22T18:24:18.263
> 
> 标签：mapkit, ios6, user-tracking, ios6-maps

我想我可能在 iOS 6 的 mapkit API 中发现了一个错误，但由于我仍然认为自己是新手，我想我会在这里查看是否有人能指出我可能做错的事情。

我有一个应用程序已经工作了几个星期，其中有一个地图视图，并利用 MKUserTrackingButton 来切换跟踪模式。在 iOS 5 上它运行良好，但自从升级到 6 后，它出现了奇怪的行为。当您将地图视图置于跟随用户航向的跟踪模式时，如果您相对静止，它会很好，但是当您开始在汽车中移动时，它会在每次返回常规跟踪模式时以航向模式退出轨道。经过许多令人沮丧的小时试图弄清楚它，我决定制作一个新的简单应用程序，它具有最低限度的地图视图和跟踪，看看它是否只是我的编码或可能的错误。新应用程序做同样的事情。我在下面发布所有代码。希望有人可以帮助告诉我我是否做错了什么。

这是应用程序委托标头

```
//  iTrackerAppDelegate.h
//  iTracker
//
//  Created by Victor Hudson on 9/22/12.
//  Copyright (c) 2012 Victor Hudson. All rights reserved.
//

#import <UIKit/UIKit.h>
#import "TrackerViewController.h"

@interface iTrackerAppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) IBOutlet UIWindow *window;

@end 
```

这是应用程序委托实现

```
 //
    //  iTrackerAppDelegate.m
    //  iTracker
    //
    //  Created by Victor Hudson on 9/22/12.
    //  Copyright (c) 2012 Victor Hudson. All rights reserved.
    //

    #import "iTrackerAppDelegate.h"

    @implementation iTrackerAppDelegate

    @synthesize window = _window;

    - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
        TrackerViewController *trackerView = [[TrackerViewController alloc] init];

        UINavigationController *navController = [[UINavigationController alloc]initWithRootViewController:trackerView];

        [self.window setRootViewController:navController];

        [[self window] makeKeyAndVisible];
        return YES;
    }

// the other app delegate methods are all empty so i left them out for brevity

    @end 
```

这是我的视图控制器。它有一个带有世界视图的笔尖和一个用于切换地图模式（普通、饱和和混合）的分段开关 TrackerViewController.h

```
//
//  TrackerViewController.h
//  iTracker
//
//  Created by Victor Hudson on 9/22/12.
//  Copyright (c) 2012 Victor Hudson. All rights reserved.
//

#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>
@interface TrackerViewController : UIViewController

@property (strong, nonatomic) IBOutlet MKMapView *worldView;

- (IBAction)toggleMapView:(id)sender;

@end 
```

TrackerViewController.m

```
//
//  TrackerViewController.m
//  iTracker
//
//  Created by Victor Hudson on 9/22/12.
//  Copyright (c) 2012 Victor Hudson. All rights reserved.
//

#import "TrackerViewController.h"

@interface TrackerViewController ()

@end

@implementation TrackerViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    // navigation item
    [[self navigationItem] setTitle:@"iTracker"];

    MKUserTrackingBarButtonItem *trackingButton = [[MKUserTrackingBarButtonItem alloc] initWithMapView:self.worldView];
    [[self navigationItem] setRightBarButtonItem:trackingButton animated:YES];

    self.worldView.userTrackingMode = 1;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)toggleMapView:(id)sender {
    switch ([sender selectedSegmentIndex]) {
        case 0:
        {
            [self.worldView setMapType:MKMapTypeStandard];
        }break;
        case 1:
        {
            [self.worldView setMapType:MKMapTypeSatellite];
        }break;
        case 2:
        {
            [self.worldView setMapType:MKMapTypeHybrid];
        }break;
    }
}
@end 
```

正如我之前所说，一切似乎都可以正常工作，但是当您快速移动时使用航向模式进行跟踪。我在 iPhone 4 上运行，我尝试了使用和不使用 ARC 的应用程序以获得相同的结果。如果有人能指出我犯的任何错误，或者他们想要构建项目并确认它是一个错误，我将不胜感激。

在此先感谢您的帮助；-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:46:45.050

我目前正在调查从 ios5 到 ios6 时我的应用程序中的类似行为。如中所述，有一个作为单例创建的位置管理器

[cllocationmanager 单例](https://stackoverflow.com/questions/11513259/ios-cllocationmanager-in-a-separate-class)

此外，在地图视图中，我正在使用 setusertrackingmode。在 ios6 中，它从 MKUserTrackingModeFollowWithHeading 来回跳转到 MKUserTrackingModeFollow。在 ios5 中，它使用相同的代码可以正常工作。正如在

[两个位置经理之间的冲突](https://stackoverflow.com/questions/1081219/optimizing-cllocationmanager-corelocation-to-retrieve-data-points-faster-on-the)

# javascript - 自定义 jQuery 函数 - 选择器找不到元素

> ID：12546526
> 
> 赞同：0
> 
> 时间：2012-09-22T18:24:29.063
> 
> 标签：javascript, jquery

我正在制作一个 REST api，并且正在开发一些 javascript 函数。
这里的想法是运行例如：`$('#main').get('car/ford');`并且返回的数据将被添加到提供的元素中。

**这是所有的javascript：**

```
$.fn.extend({
    get: function (path) {
        request(this, 'GET', path);
    }
});

function request(element, type, path) {
var dees = $(element);
    $.ajax({
        type: type,
        url: '/request/'+path,
        success: function(data) {
            console.log('Success');

            a = $(element);
            b = $('#fileList'); // this is a control

            dees.html(data);
        }
    });
}

(function() {
    console.log('running');
    $('#fileList').get('car/ford');
})(); 
```

我遇到的问题是，当我运行时，`a.html(data);`
什么都不会改变。但是，如果我运行`b.html(data);` 一切都应该正常运行。

所以这两个选择器之间是有区别的。
在 a 上找不到元素 a.length == 0
在 b 上找到元素 b.length == 1

为什么选择器找不到元素，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T18:48:42.783

通过在调用函数前添加 $ 解决了该问题。

从：

```
(function() {
    console.log('running');
    $('#fileList').get('car/ford');
})(); 
```

到：

```
$(function() {
    console.log('running');
    $('#fileList').get('car/ford');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T18:28:54.160

更改`element`为`$(element)`

当请求被调用时，`request(this, 'GET', path);`这代表 javascript 对象，它应该是 jQuery 对象。您需要像我一样传递 jquery 对象或将其转换为 jquery 对象。

```
$.fn.extend({
    get: function (path) {
        alert(this.tagName);
        var objToPass = $(this);  
        request(objToPass, 'GET', path);
    }
});
function request(javascriptObj, type, path) {  
    element = $(javascriptObj);   
    $.ajax({
        type: type,
        url: '/request/'+path,
        success: function(data) {
            console.log('Success');

            a = $(element);
            b = $('#fileList'); // this is a control

            a.html(data);
        }
    });
} 
```

**更新**

应该实例化对 get 函数的调用，`document.ready`这可以通过简单地添加 $ 来完成

改变

```
(function() {
    console.log('running');
    $('#fileList').get('car/ford');
})(); 
```

到

```
$(function() {
    console.log('running');
    $('#fileList').get('car/ford');
})(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T18:31:50.477

您可以尝试以下方法：

```
function request(element, type, path) {
   var dees = $(element);
   $.ajax({
           type: type,
           url: '/request/'+path,
           success: function(data) {
               console.log('Success');
               dees.html(data);
           }
   });
} 
```

如果变量与块`$(this)`自己的变量冲突。`$(this)``ajax()`

# asp.net - 不包括逗号的最大位数的正则表达式

> ID：12546529
> 
> 赞同：1
> 
> 时间：2012-09-22T18:24:38.173
> 
> 标签：asp.net

我有以下正则表达式：

```
ValidationExpression="[0-9]+(,[0-9]+)*" 
```

它允许格式为：12,2345 或 231,23454

现在我想包含一个条件，该条件总体上只允许最多 7 位数字，不包括逗号。 **下面是修改后的代码**

以下是在项目模板中

我在项目模板中也有一个单选按钮

```
<asp:TextBox runat="server" ID="tbText" CssClass="someclass" MaxLength="11"
                                          %>'></asp:TextBox>

<asp:RegularExpressionValidator ValidationExpression="[0-9]+(,[0-9]+)*" ID="ValComp" runat="server" CssClass="asdf"
    ControlToValidate="tbMileage" Text="*" Enabled="false" Display="Dynamic"/>

<asp:CustomValidator ID="cvalMileage" runat="server" CssClass="adsf" Text="*" Display="Dynamic">
</asp:CustomValidator>

<asp:CustomValidator ID="CustomValidator1" ClientValidationFunction="functionName" 
    runat="server" CssClass="asd" Text="*" Display="Dynamic">
</asp:CustomValidator> 
```

因为我想验证单选按钮检查了中继器中的相应文本框，所以下面是我编写的代码

```
var selText = $(".Class1 input[type=radio]:checked").closest(".Class1").find(".subClassText input[type=text]").val();
alert('Hi');
if (selText.replace(",", "").length <= 7) {
    args.IsValid = true;
}
else {
    args.IsValid = false;
} 
```

警报触发两次，并且基于 args 是 False 我有一个弹出两次触发

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T18:37:47.367

正则表达式不擅长这个问题，但如果你将输入限制为最多一个逗号，这个表达式将适合：

```
([0-9]{0,0}[,]?[0-9]{0,7})|([0-9]{0,1}[,]?[0-9]{0,6})|([0-9]{0,2}[,]?[0-9]{0,5})|([0-9]{0,3}[,]?[0-9]{0,4})|([0-9]{0,4}[,]?[0-9]{0,3})|([0-9]{0,5}[,]?[0-9]{0,2})|([0-9]{0,6}[,]?[0-9]{0,1})|([0-9]{0,7}[,]?[0-9]{0,0}) 
```

你会认识到这个问题不太适合正则表达式，因为这个表达式被固定为你的最大值 7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T21:50:13.360

您可以使用带有客户端验证的[CustomValidator控件，如下所示：](http://msdn.microsoft.com/en-us/library/303z9x0x.aspx)

ASP 代码：

```
<asp:CustomValidator id="CustomValidator1" runat="server"
           ControlToValidate="YourControlNameHere"
           ClientValidationFunction="ClientValidation"
           OnServerValidate="ServerValidation"
           ErrorMessage="Invalid number." /> 
```

JavaScript（使用 jQuery）：

```
function ClientValidation(source, arguments)
{
    var inputText = arguments.Value;
    var expression = /^[0-9]+(,[0-9]+)*$/;
    if (expression.test(inputText) && inputText.replace(",", "").length <= 7) {
        arguments.IsValid = true;
    }
    else {
        arguments.IsValid = false;
    }
} 
```

后面的 C# 代码：

```
public void ServerValidation(object source, ServerValidateEventArgs args)
{
    string inputText = args.Value;
    Regex regex = new Regex(@"^\d+(,\d+)*$");
    if (regex.IsMatch(inputText) && inputText.Replace(",", "").Length <= 7)
    {
        args.IsValid = true;
    }
    else
    {
        args.IsValid = false;
    }
} 
```

# jquery - jquery ajax返回字符串未设置类

> ID：12546531
> 
> 赞同：0
> 
> 时间：2012-09-22T18:24:51.430
> 
> 标签：jquery, ajax, mobile, cordova

在我的 ajax（从远程服务器中提取 json 数据）中，我附加了一个 html div 以包含指向另一个页面的链接，该链接的类属性需要设置为一个名为“ajaxify”的函数。问题是这在整个应用程序中都可以正常工作。当它附加在 ajax 返回函数中时，就是发生错误的地方，因此这个函数不会加载。

老实说，有时它会加载..有时它不会！典型的 JavaScript。

另外，如果有人可以向我推荐一个很好的 Windows Safari 调试器，我将不胜感激……我目前正在黑暗中运行

这是代码

```
$.ajax({
    url: 'url',
    dataType: 'jsonp',
    jsonp: 'jsoncallback',
    timeout: 25000,
    success: function(data, status){
        $.each(data, function(i,item){
            var recipe = "<div class='icon-text'><a class='ajaxify' href='pages/onlineRecipe.html' onclick='$(setOnlineID("+item.id+"))' >"
                         +"<p><img alt='Image-alt' width='64' class='wrap-around' id='img"+item.id+"' />"
                         +"<strong>"+item.title+"</strong>"
                         +"<br/>"+item.desc+"</p></a></div>";

            $('#onlineList').append(recipe);
                var img = "#img" + item.id;
                $(img).attr('src', "data:image/png;base64,"+item.image);
        });
    },
    error: function(){
        output.text('Ha producido un error cargando el dato. Por favor, intèntalo de nuevo.');
    }
}); 
```

在这个阶段，我已经坚持了几个小时，这很烦人。任何帮助或建议将不胜感激！提前致谢。

编辑：这是在 jquerys onload function "$(document).ready(function(){" 中调用的，因此在 ajax 将 div 附加到链接之前，html 已完全加载。我想知道这是否与它有关??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T19:56:17.063

首先，在*JSONP 请求*的情况下，不使用*.ajax调用调用**错误处理程序*

 *****来自 jQuery 文档：***

```
error(jqXHR, textStatus, errorThrown)

    Note: This handler is not called for cross-domain script and JSONP requests. 
```

尝试这个

```
$.ajax({ url: 'url',
  dataType: 'jsonp',
  timeout: 10000,
  jsonp: "callback",
  jsonpCallback: callbackMethod,
});

function callbackMethod(jsonData) {
// this would be called on callback
} 
```

查看此内容以获取更多参考：[jQuery AJAX](http://api.jquery.com/jQuery.ajax/)**

# android - 如何让 IntelliJ IDEA 正确缩进具有多行属性的 xml 标签？

> ID：12546534
> 
> 赞同：4
> 
> 时间：2012-09-22T18:25:31.227
> 
> 标签：android, xml, formatting, intellij-idea

代码：

| - 插入符号

```
<element attr1="1"
         attr2="2"
         attr3="3">|</element> 
```

按下回车后我期望看到的内容：

```
<element attr1="1"
         attr2="2"
         attr3="3">
    |
</element> 
```

我实际得到的：

```
<element attr1="1"
         attr2="2"
         attr3="3">
    |
         </element> 
```

IntelliJ IDEA CE 11.1

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T20:02:09.910

这是3年前报告的已知错误，[请投票](http://youtrack.jetbrains.com/issue/IDEA-48198)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T07:25:31.677

有趣的是，您报告的输出和您想要的输出都不符合 XSLT/XQuery 缩进规范中的规则，here

[http://www.w3.org/TR/xslt-xquery-serialization/#xml-indent](http://www.w3.org/TR/xslt-xquery-serialization/#xml-indent)

其中指出：

> 不得在包含非空白字符的文本节点附近添加空白字符。

原因是在此处添加空格很容易使文档架构无效。

# html - 如何在 HTML 中换行列表项

> ID：12546539
> 
> 赞同：0
> 
> 时间：2012-09-22T18:26:43.410
> 
> 标签：html, css

下面的 HTML 是我正在使用的。我希望它成一行而不是列表格式。

1.  如果我使用float：left，当它“换行”时如何使div变大（垂直）？
2.  如果我设置显示：内联，我怎样才能让它在列表项之间而不是在可能不存在的空格上进行换行（如下所示）？

* * *

```
 <div class="singleTiddlerList">
    	<li><a href="javascript:;" class="button center">Hide All</a></li>
    	<li><a href="javascript:;" class="button center">Show All</a></li>
    	<li><a href="javascript:;" class="button center">Refresh</a></li>
    	<li><a href="javascript:;" class="button">ResizerMacroPlugin</a></li>
    	<li><a href="javascript:;" class="button">ResourceMacro</a></li>
    	<li><a href="javascript:;" class="button">saveBackupPlugin</a></li>
    	<li><a href="javascript:;" class="button">singleTiddler</a></li>
    	<li><a href="javascript:;" class="button">sliderMacro</a></li>
    	<li><a href="javascript:;" class="button">toggleBackstageEdit</a></li>
    	<li><a href="javascript:;" class="button">TopbarPlugin</a></li>
 </div>
```

* * *

**编辑：**仅供参考，它只需要与 Chrome 和 Firefox 一起使用。它不是客户网站或类似的东西，只是个人文件（实际上是[TiddlyWiki](http://tiddlywiki.com/)）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T20:04:27.293

我认为你应该在s 上使用`display: inline-block`和。`white-space: nowrap``<li>`

如果您需要支持低于版本 9 的 IE，也请使用此 hack：

```
display: inline-block;
*zoom: 1;
*display: inline; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T18:56:54.563

鉴于使用 'display:inline;' 可能遇到的跨浏览器问题，我建议您使用 'float:left;' 反而。

这是工作部分：http: [//jsfiddle.net/tHjap/4/](http://jsfiddle.net/tHjap/4/)

解决您提出的关于“div”（在本例中为“ul”）变大的问题，所有需要做的就是将宽度设置为“自动”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T19:07:25.793

1.  `overflow: hidden;`在容器上使用。由于规格中的一些奇怪之处，这很有效。有关更多信息，请参阅[http://www.quirksmode.org/css/clearing.html](http://www.quirksmode.org/css/clearing.html)或[http://colinaarts.com/articles/the-magic-of-overflow-hidden/](http://colinaarts.com/articles/the-magic-of-overflow-hidden/)
2.  不确定我是否正确理解了这个问题，但也许你想要`white-space: pre;`在`a`s 上。这将防止它们内部出现换行符。

# mysql - 来自相关表的sql查询

> ID：12546542
> 
> 赞同：5
> 
> 时间：2012-09-22T18:27:16.950
> 
> 标签：mysql

我有 3 张桌子：

购物：

```
id  buyer   fruit
1   1 [->]  2 [->]
2   2 [->]  2 [->] 
```

水果：

```
id  fruit
1   apple
2   banana 
```

买家：

```
id  buyer
1   ido
2   omri 
```

我想从'shopping'的表中提取，并将其他表的值放在行中。例如：“购物”中的第一行应如下所示：

```
id  buyer   fruit
1   ido     banana 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T18:32:37.310

您只需要在它们各自的 ID 上加入相关表：

```
SELECT s.id, b.buyer, f.fruit 
FROM shopping s
JOIN fruits f ON s.fruit = f.id
JOIN buyers b ON s.buyer = b.id 
```

# asp.net - 无法检索元数据

> ID：12546545
> 
> 赞同：18
> 
> 时间：2012-09-22T18:27:44.557
> 
> 标签：asp.net, mysql, asp.net-mvc, entity-framework, ef-code-first

**MVC4 + Entity Framework 4.4 + MySql + POCO/代码优先**

我正在设置上述配置..这是我的课程：

```
namespace BTD.DataContext
{
public class BTDContext : DbContext
{

    public BTDContext()
        : base("name=BTDContext")
    {

    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);

        //modelBuilder.Conventions.Remove<System.Data.Entity.Infrastructure.IncludeMetadataConvention>();
    }

    public DbSet<Product> Products { get; set; }

    public DbSet<ProductImage> ProductImages { get; set; }        

}
}

namespace BTD.Data
{
[Table("Product")]
public class Product
{
    [Key]
    public long ProductId { get; set; }

    [DisplayName("Manufacturer")]
    public int? ManufacturerId { get; set; }

    [Required]
    [StringLength(150)]
    public string Name { get; set; }

    [Required]
    [DataType(DataType.MultilineText)]
    public string Description { get; set; }

    [Required]
    [StringLength(120)]
    public string URL { get; set; }

    [Required]
    [StringLength(75)]
    [DisplayName("Meta Title")]
    public string MetaTitle { get; set; }

    [DataType(DataType.MultilineText)]
    [DisplayName("Meta Description")]
    public string MetaDescription { get; set; }

    [Required]
    [StringLength(25)]
    public string Status { get; set; }

    [DisplayName("Create Date/Time")]
    public DateTime CreateDateTime { get; set; }

    [DisplayName("Edit Date/Time")]
    public DateTime EditDateTime { get; set; }
}

[Table("ProductImage")]
public class ProductImage
{
    [Key]
    public long ProductImageId { get; set; }

    public long ProductId { get; set; }

    public long? ProductVariantId { get; set; }

    [Required]
    public byte[] Image { get; set; }

    public bool PrimaryImage { get; set; }

    public DateTime CreateDateTime { get; set; }

    public DateTime EditDateTime { get; set; }

}
} 
```

**这是我的 web.config 设置...**

```
<connectionStrings>
<add name="BTDContext" connectionString="Server=localhost;Port=3306;Database=btd;User Id=root;Password=mypassword;" providerName="MySql.Data.MySqlClient" />
</connectionStrings> 
```

1.  数据库和表已经存在...
2.  我对 mvc 还是很陌生，但正在使用[本教程](http://dotnetspeak.com/index.php/2010/10/developing-asp-net-mvc-3-application-with-ef-ctp-part-1/)

应用程序构建良好......但是，当我尝试使用 Product (BTD.Data) 作为我的模型类和 BTDContext (BTD.DataContext) 作为我的数据上下文类添加控制器时，我收到以下错误：

> 不支持使用相同的 DbCompiledModel 检索 BTD.Data.Product 的元数据以针对不同类型的数据库服务器创建上下文。相反，为正在使用的每种类型的服务器创建一个单独的 DbCompiledModel。

我完全不知所措-我已经用我能想到的上述错误消息的几乎所有不同变体搜索了谷歌，但无济于事。

**以下是我可以验证的事情......**

1.  MySql 工作正常
2.  我正在使用 MySql 连接器版本 6.5.4 并创建了其他 ASP.net Web 表单 + 实体框架应用程序，这些应用程序存在零问题

**我也尝试在我的 web.config 中包含/删除它：**

```
<system.data>
<DbProviderFactories>
  <remove invariant="MySql.Data.MySqlClient"/>
  <add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient" description=".Net Framework Data Provider for MySQL" type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.5.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" />
</DbProviderFactories> 
```

我确实已经在这个错误上工作了好几天了——我现在已经到了愿意付钱给别人来解决它的地步……不开玩笑……我真的很喜欢使用 MVC 4 和 Razor——我很高兴能开始做这件事，但现在我很气馁——我真的很感激任何帮助/指导！

另请注意 - 我正在使用 Nuget 的 Entityframework ...

**另一个注意事项**

我使用的是默认的 Visual Studio 模板，该模板使用帐户页面和其他内容创建您的 MVC 项目。我只是删除了对添加文件的所有引用，因为他们试图使用不存在的“DefaultConnection” - 所以我认为这些文件可能是导致错误的原因 - 但是删除它们后仍然没有运气 -

我只是想让大家知道我正在使用预先创建一堆文件的 Visual Studio MVC 项目模板。我将尝试从一个没有这些文件的空白 MVC 项目中重新创建这一切 - 一旦我测试它，我将更新它

**使用 VS MVC 基本模板的更新：**导致相同的错误 - 仍然没有解决方案

**另一个人遇到同样的问题**

[这是另一个模仿我的stackoverflow问题](https://stackoverflow.com/questions/12165185/mvc4-scaffolding-add-controller-gives-error-unable-to-retrieve-metadata?rq=1)-但是我尝试了他的解决方案无济于事-也许遇到同样问题的其他人可以从链接中受益

**更新**

我最近刚刚尝试将它放入 MS Sql Server 并且视图脚手架添加得很好，没有错误 - 所以我不确定它是我的 MySql 数据库还是连接字符串还是什么......让我发疯......

**其他参考**

似乎其他人遇到了与我相同的问题-唯一的区别是他们使用的是 sql server-我尝试调整所有代码以遵循[此处有关此 stackoverflow 问题/答案](https://stackoverflow.com/questions/12172074/add-controller-in-mvc4-not-working)的建议，但仍然无济于事

**可能的修复？？？**

所以这很奇怪......在将它连接到MS Sql Server并添加控制器之后，然后将连接字符串恢复到MySql它实际上是在使用MySql......这到底是什么！？？

因此，似乎当您尝试添加控制器并添加视图脚手架（是正确的短语吗？）与 mysql 连接字符串一起添加时，它失败了......但是，如果您将它连接到 sql server db，则生成脚手架/controller，然后恢复到 mysql 连接字符串就可以了.... ?!?!

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-29T12:22:45.837

似乎 MVC4 控制器脚手架没有正确识别 MySql 连接字符串。为控制器生成 EF CRUD 代码时，如下所示更改连接字符串：

```
<connectionStrings>
    <add name="BTDContext" connectionString="Data Source=host_name;Database=database_name;uid=user_id;pwd=password;" providerName="System.Data.SqlClient" /> 
</connectionStrings> 
```

运行应用程序时将其改回标准：

```
<connectionStrings>
    <add name="BTDContext" connectionString="Data Source=host_name;Database=database_name;uid=user_id;pwd=password;" providerName="MySql.Data.MySqlClient" /> 
</connectionStrings> 
```

注意更改，提供者名称。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-09-03T09:23:46.340

imesh 建议几乎解决了我的问题，但另外我临时评论了一行

```
[DbConfigurationType(typeof(MySqlEFConfiguration))] 
```

这是在 DBContext 类中。当然，在创建控制器之后，应该取消注释这一行并将配置文件中的 System.Data.SqlClient 更改回 MySql.Data.MySqlClient 。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-04-08T14:42:06.620

使用 VS 2013、MySQL Connector/NET 6.9.6、Entity Framework 6、Web API 2.2 和 MySQL 服务器 5.7，我必须结合答案以防止出现“无法检索元数据”的错误。

要将控制器成功添加到使用 MySQL 连接的 .NET 项目，请执行以下操作：

1.  临时添加一个带有`System.Data.SqlClient`as 的连接字符串`providerName`，并为 MySQL 添加注释。连接字符串是否有效并不重要。
2.  确保`MySqlEFConfiguration`未以任何方式启用。
3.  重建。

关于第二点，[关于将 Connector/NET 与 EF6 结合使用的 MySQL 文档说明](https://dev.mysql.com/doc/connector-net/en/connector-net-entityframework60.html)了启用`MySqlEFConfiguration`. 确保在使用 VS 模板添加控制器时这些都未启用。

> 1.  在上下文类上添加*DbConfigurationTypeAttribute ：*
> 
> `[DbConfigurationType(typeof(MySqlEFConfiguration))]`
> 
> 2.  在应用程序启动时调用*DbConfiguration.SetConfiguration(new MySqlEFConfiguration())*
>     
>     
> 3.  在配置文件中设置*DbConfiguration类型：*
>     
>     
> 
> `<entityFramework codeConfigurationType="MySql.Data.Entity.MySqlEFConfiguration, MySql.Data.Entity.EF6">`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-08T14:03:13.517

我也围绕这个错误进行了测试，发现了另一个问题。

以下代码在我的 Web.config 中（没有，它不起作用）：

```
<entityFramework codeConfigurationType="MySql.Data.Entity.MySqlEFConfiguration, MySql.Data.Entity.EF6"> 
```

将其更改为：

```
<entityFramework> 
```

对我有用...添加脚手架，然后将其改回

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T17:03:35.843

我在使用 EF 4.3.1 和 MySql Connecter/Net 6.6.4.0 时遇到了同样的问题

这对我有用，无需连接到 Context 类中的不同数据库或额外代码。

当你想构建一个脚手架时，在你的 web.config 文件中的 entityFramework 标签之间添加这个：

```
<defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
  <parameters>
    <parameter value="Data Source=.\SQLEXPRESS; Integrated Security=True; MultipleActiveResultSets=True" />
  </parameters>
</defaultConnectionFactory> 
```

然后在您想要运行迁移时将上述代码注释掉，反之亦然。

所以你的 web.config 看起来像这样：

```
<entityFramework>
  <contexts>
    <context type="ApptManager.Models.AppointmentsManagerContext, ApptManager">
      <databaseInitializer type="System.Data.Entity.MigrateDatabaseToLatestVersion`2[[ApptManager.Models.AppointmentsManagerContext, ApptManager], [ApptManager.Migrations.Configuration, ApptManager]], EntityFramework" />
    </context>
  </contexts>
  <!--<defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
    <parameters>
      <parameter value="Data Source=.\SQLEXPRESS; Integrated Security=True; MultipleActiveResultSets=True" />
    </parameters>
  </defaultConnectionFactory>-->
</entityFramework> 
```

.NET 开发人员必须跳过一些艰巨的障碍才能使他们的代码正常工作，这非常荒谬。

**工作示例**

[https://github.com/dublinan/mvc-mysql-ef-example](https://github.com/dublinan/mvc-mysql-ef-example)

链接到我的 github 项目

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-15T12:38:53.210

请尝试使用

> System.ComponentModel.DataAnnotations

命名空间以及 EDM 类成员的 [Key] 属性。

它对我有用。

# google-app-engine - 谷歌应用引擎查询优化

> ID：12546553
> 
> 赞同：1
> 
> 时间：2012-09-22T18:28:58.940
> 
> 标签：google-app-engine, google-cloud-datastore, query-optimization

我正在尝试尽可能高效地为 GAE 进行读写操作，我想知道以下两个选项中哪个是最好的。

我有一个网站，用户可以在其中发布不同的内容，现在每当我想显示该用户的所有帖子时，我都会使用该用户的用户 ID 查询所有帖子，然后显示它们。将所有帖子 ID 存储在用户实体中并执行 get_by_id(post_ID_list) 以返回所有帖子会更好吗？或者，被用完的额外空间不值得吗？

在任何地方我都可以找到更多这样的信息来优化我的网络应用程序吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:53:26.980

您想要存储 ID 列表的主要原因是，您可以分别获取每个实体以获得更好的一致性 - 通过 id 获取的实体与数据存储区中的最新版本一致，而查询最终是一致的。

检查数据存储成本并优化成本： [https ://developers.google.com/appengine/docs/billing](https://developers.google.com/appengine/docs/billing)

通过密钥获取实体不会比查询所有帖子便宜。该查询使用索引。

如果您使用投影查询，则可以大大降低成本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:21:54.333

有几种情况。

首先，如果您跟踪用户帖子的所有 ID。您必须使用实体组以保持一致性。这意味着写入数据存储的速度约为每秒 1 个实体。对于具有 id 的对象，成本是 1 次读取，每个实体读取 1 次。

其次，如果您只使用查询。这不需要一致性。成本为每检索到的实体 1 次读取 + 1 次读取。

第三，如果您只查询键并且在获取之后。成本为 1 次读取 + 1 个小检索到的每个密钥。观看此：[仅键查询](https://developers.google.com/appengine/docs/python/datastore/queries#Keys_Only_Queries)。这相当于投影查询成本。

如果你有很多结果，并且使用分页，那么你需要使用[Query Cursors](https://developers.google.com/appengine/docs/python/datastore/queries#Query_Cursors)。这可以防止数据存储的无用使用。

最经济的解决方案是第三种情况。观看：[批量操作](https://developers.google.com/appengine/docs/python/datastore/entities#Batch_Operations)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-23T10:24:33.343

如果您有一个 id 列表，因为它们与您的实体一起存储，调用 ndb.get_multi （如果您使用 NDB，但它与使用 memcache 缓存单个实体的任何其他框架类似）将节省您如果与键对应的所有（或大多数）实体已经在数据存储中，则进一步调用数据存储。

所以在最好的情况下（一切都在内存缓存中），数据存储区根本不会被触及，而使用查询会。

有关讨论和注意事项，请参阅此问题：[http](http://code.google.com/p/appengine-ndb-experiment/issues/detail?id=118) ://code.google.com/p/appengine-ndb-experiment/issues/detail?id=118 。

# java - 从像素值创建图像

> ID：12546559
> 
> 赞同：-2
> 
> 时间：2012-09-22T18:29:55.477
> 
> 标签：java, image, text, rgb, pixel

在java中...我有一个RGB像素的整数数组，意味着我的程序的**输出**如下：'

```
像素 1：255 200 191 231
像素 2：255 237 028 036
像素 3：255 034 177 076
像素 4：255 085 140 066
像素 5：255 200 191 231
像素 6：255 237 028 036
像素 7：255 231 188 167
像素 8：255 237 028 036
像素 9：255 237 028 036
像素 10：255 063 072 204
像素 11：255 226 125 144
像素 12：255 063 072 204
像素 13：255 200 191 231
像素 14：255 062 187 099
像素 15：255 255 127 039
像素 16：255 255 127 039
像素 17：255 200 191 231
像素 18：255 212 177 189
像素 19：255 063 072 204
像素 20：255 040 158 100
像素 21：255 034 177 076
像素 22：255 237 028 036
像素 23：255 248 253 249
像素 24：255 165 169 231
像素 25：255 200 191 231

```

如何使用上述数据创建大小为 5 x 5 的图像...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T18:36:54.280

创建从 BufferedImage`BufferedImage` 获取`Graphics/Graphics2D`对象并使用对象绘制`Graphics`像素。

BufferedImage 可以存储为带有`ImageIO`或显示在 Own 中的文件`Component/JComponent`

一点伪代码

```
BufferedImage bi = new BufferedImage(5,5,BufferedImage.TYPE_INT_ARGB);
Graphics2D g = (Graphics2D) bi.getGraphics();
while(i < 25){
  g.setColor(new Color(See Api for more details on how to create a Color);
  g.drawRect(i/5, i%5, 1,1);
} 
```

现在你有一个 BufferdImage 要用 ImageIO 保存

```
ImageIO.write(bi, "png", new File(output)); 
```

或者获取一个新的 JComponent 并覆盖它的绘制方法。这项任务有很多资源。

# ruby-on-rails - 嵌套表格不显示

> ID：12546564
> 
> 赞同：0
> 
> 时间：2012-09-22T18:30:49.027
> 
> 标签：ruby-on-rails, nested-forms, has-many

我有以下新幼儿园的申报表

```
<%= form_for @kindergarten, :html => {:multipart => true}  do |f|%>

                <%= render 'shared/error_messages', object: f.object %>
            </br>   
                <%= f.fields_for :photos do |p| %>
                    <%= p.label 'upload photo'%>
                    <%= p.file_field :image %>
                <% end %>
            </br>
                <%= render 'about_company', f: f%>
            </br>
                <%= render 'contact', f: f %>
                <%= f.submit "Create my account", class: "btn btn-large btn-primary" %>
            <%end%> 
```

这背后的逻辑是1个幼儿园可以有多张照片。

以下是模型声明：

幼儿园

```
has_many :photos, limit: 7, dependent: :destroy   
accepts_nested_attributes_for :photos 
```

照片

```
 attr_accessible :image, :logo, :kindergarten_id
  belongs_to :kindergarten
  mount_uploader :image, ImageUploader

  validates :kindergarten_id, presence: true
  validates :photo, presence: true 
```

我已经为此苦苦挣扎了几个小时，我不明白为什么“上传文件”按钮和标签没有出现。当我说现在出现时，我的意思是它们被完全忽略并且不存在于呈现的 html 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:43:05.610

在为新的@kindergarden 呈现表单之前，您需要建立一个照片关联才能使其工作：

```
def new
  @kindergarden = Kindergarden.new
  @kindergarden.photos.build # provides a photo object to use in the form
  # rest of your action
end 
```

此外，如果您希望表单中有多个照片字段，您可以执行以下操作：

```
 5.times { @kindergarden.photos.build } 
```

# javascript - 与未定义的比较

> ID：12546568
> 
> 赞同：2
> 
> 时间：2012-09-22T18:31:17.560
> 
> 标签：javascript

将变量与未定义进行比较是否不安全？

```
if(foo == undefined) 
```

对比

```
if(foo == 'undefined') 
```

第一个例子足够了吗？或者应该是类似的东西

```
if('undefined' in window){
     //compare against undefined
} else {
    //compare against 'undefined'
} 
```

因为`undefined`存在于`window`物体上？它会存在于所有浏览器中吗？还是我应该简单地比较`== 'undefined'`？我在 SO 上发现了一些类似的问题，但没有关于 window 对象上存在未定义属性的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:32:11.373

我建议你[`typeof`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof)改用：

```
if (typeof foo == "undefined") {
    // ...
} 
```

请注意，这会`typeof`返回一个*字符串*，因此您应该*始终*将其与字符串值进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T18:33:44.330

`foo == undefined`我认为您在and之间混淆了`typeof foo == "undefined"`。

*除非*变量`undefined`已设置为当前范围内的其他值，否则两者都会产生相同的结果。在这种情况下，`foo == undefined`将与之进行比较， where-as`typeof foo == "undefined"`仍将正确解析。

```
var undefined = 4;
var reallyUndefined;

reallyUndefined == undefined; // false
typeof reallyUndefined == undefined; // true 
```

它是否是一个真实世界的场景是否`undefined`会被设置为其他东西是有争议的，我会质疑这样做的库/代码的有效性......但是，因此，始终使用`typeof foo === "undefined"`.

我也会对使用`foo == undefined`against保持警惕`foo === undefined`（注意三等号，它不使用类型强制，与之相比`==`）。

使用`==`，你会冒这样的风险`null == undefined; // true`， where-as `null === undefined; // false`。这是一个很好的例子，说明了为什么你应该**总是**使用`===`.

* * *

**tl;博士**：`typeof foo === "undefined";`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T18:34:08.660

```
if (foo === undefined) 
```

是安全的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T18:34:58.150

有几种方法可以做到这一点，但我发现最简单的是：

```
if(foo === undefined){
  //do stuff
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-22T18:35:14.353

如果您完全控制了所有代码，并且您知道您不必担心有人会胡闹，`undefined`那么与它进行比较是安全的。

```
alert(window.foo === undefined); 
```

另一方面，如果你想更偏执一点，你可以做一个不受外界影响的 typeof 检查

```
alert(typeof window.foo == 'undefined') 
```

第三种选择是拥有自己的、本地的、未定义的变量。

```
function testme(a, undefined) {
   alert(a === undefined); // Will be false.
}

testme(10); 
```

# mysql - MySQL 主从复制

> ID：12546569
> 
> 赞同：3
> 
> 时间：2012-09-22T18:31:28.473
> 
> 标签：mysql, replication, master-slave

我有一台 MySQL Master 和几台从机。

主从复制已设置并完美运行。

此时，我要添加一个新的从机：

我的问题与“ **CHANGE MASTER TO** ”命令有关：

假设master上所有文件都可用，我会从mysql-bin.000001开始，但是从哪个位置开始呢？**MASTER_LOG_POS=0**？**MASTER_LOG_POS=1**？还有什么？

将 MASTER 更改为 MASTER_HOST='...', MASTER_USER='...', MASTER_PASSWORD='...', MASTER_LOG_FILE='mysql-bin.000001', **MASTER_LOG_POS=WHAT_SHOULD_WRITE_HERE** ;

10倍，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-29T11:12:26.463

`show master status;`例如，您应该执行，

`mysql> show master status;`

```
+------------------+----------+--------------+------------------+
| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB |
+------------------+----------+--------------+------------------+
| mysql-bin.000011 | 13966886 |              |                  |
+------------------+----------+--------------+------------------+
1 row in set (0.00 sec) 
```

在对 master 进行转储之前并记下日志位置。恢复从机上的转储并使用与mysqldump 之前`change master to`相同的日志位置运行。`13966886`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T19:57:21.127

如果您从一开始就拥有所有 bin 日志，则可以使用 master_log_file .000001 和 pos=0。大多数人不再拥有来自 master start 的二进制日志，因此要使用的位置是进行转储时的位置。您复制到从服务器的转储。或者关闭主目录和复制数据目录时的位置。

你已经有一个从服务器，所以这对你来说更容易。您可以停止从属服务器上的从属线程，检查从属服务器的日志文件名称和位置，将数据文件**从**从属服务器复制到新服务器并启动两者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T17:26:04.240

文档说要运行 SHOW MASTER STATUS：（[http://dev.mysql.com/doc/refman/5.6/en/replication-howto-masterstatus.html](http://dev.mysql.com/doc/refman/5.6/en/replication-howto-masterstatus.html)）

```
SHOW MASTER STATUS;

+------------------+----------+--------------+------------------+
| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB |
+------------------+----------+--------------+------------------+
| mysql-bin.000003 | 73       | test         | manual,mysql     |
+------------------+----------+--------------+------------------+ 
```

你的位置在第二列。

# php - 运行 php3 本地主机

> ID：12546571
> 
> 赞同：2
> 
> 时间：2012-09-22T18:31:46.263
> 
> 标签：php, joomla, xampp, localhost

我有这个项目，我必须工作，已经工作了几年。它是用 php3 编码的，起初，我无法让它在我的本地主机（XAMPP）上工作，因为它安装了 php5。

但是，我能够以某种方式让它工作，就像 godaddy 和其他主机在他们的服务器上获得相同的 php3 文件一样。现在，我的电脑崩溃了，我必须安装一个新的 XAMPP，我无法再让我的旧 Web 文件工作了。

我也有一个 Joomla 网站的问题，它现在也不再在我的 XAMPP 上工作了。

有谁知道为什么？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-25T07:58:41.873

我找到了解决方案......我多年前使用的相同解决方案。在文件中设置以下参数`php.ini`：

```
register_globals = on
register_long_arrays = on
expose_php = off
variables_order = "EGPCS" 
```

# php - 大量序列化数据使隐藏字段可见

> ID：12546573
> 
> 赞同：1
> 
> 时间：2012-09-22T18:31:54.227
> 
> 标签：php, html, serialization

我有包含大量序列化数据的隐藏字段（我说的是数据库中的大约 1300 条记录）。使用所有这些数据，隐藏字段将作为包含序列化数据的文本框可见。另一方面，当我将此数据限制为 200 条记录时，这些字段仍应保持隐藏状态。我继续在 Chrome 的“检查元素”中检查了这个问题，我注意到整个页面中的许多 HTML 字符都不合适。

例如：

```
class="cont_buffer" turned into class="”cont_buffer”" 
```

额外的引号弄乱了输入 type="hidden" 并因此显示了字段。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:33:57.173

两件事情：

首先，听起来您应该对隐藏输入的值进行 html 编码，`htmlentities($value, ENT_QUOTES)`以确保引号被正确编码以用作 HTML 属性值。

但是，可能有更好的方法来做您正在做的事情，而不是将数千条记录传回浏览器，以便浏览器将它们返回给服务器。与其传递给隐藏的输入，不如将行临时存储在`$_SESSION`. 在某些情况下，在收到表单帖子时重新查询那么多行甚至可能更快，而不是让浏览器将它们传回。

如果您在 PHP 中使用 序列化行`serialize()`，我假设您打算`unserialize()`在 PHP 中使用它们。这样做时要格外小心，因为这会增加浏览器发回恶意数据的可能性，这些数据会反序列化为对您的应用程序有害的东西。如果您必须从浏览器向 发送序列化数据，请务必`unserialize()`验证您收到的对象或数组——确保它包含您期望的所有键或属性，并且*仅*包含您期望的那些，这样您在迭代时不会遇到问题超过它。

# ios - 在 iOS 6 中使用 Apple 图标

> ID：12546574
> 
> 赞同：13
> 
> 时间：2012-09-22T18:31:55.430
> 
> 标签：ios, icons

随着 iOS 6 的发布，我想在这里重新审视最初的问题：[访问 Apple 的内置图标？](https://stackoverflow.com/questions/6950596/access-to-apples-built-in-icons)

例如，当您点击“操作”按钮分享照片时，现在不再是带有标题为“消息”、“邮件”等按钮的操作表，而是邮件、消息传递图标的集合视图，脸书、推特等

对于我的应用程序中的“共享”操作，我希望能够呈现相同的 - 因为它看起来更好并且会提供一致的用户体验。是否仍然不允许使用这些图标，即使它们指的是（并将带用户访问）它们最初所属的应用程序？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-22T19:13:27.437

对于仅显示带有图标的共享 UI，您可能需要`UIActivityViewController`.

```
NSString* someText = self.textView.text;
NSArray* dataToShare = @[someText];  // ...or whatever pieces of data you want to share.

UIActivityViewController* activityViewController = 
        [[UIActivityViewController alloc] initWithActivityItems:dataToShare 
        applicationActivities:nil];
[self presentViewController:activityViewController animated:YES completion:^{}]; 
```

看起来像：

![iOS6分享界面截图](../Images/adc43bb8256d5a2c20975c4aa856ba6f.png)

文档[在这里](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivityViewController_Class/Reference/Reference.html#//apple_ref/occ/cl/UIActivityViewController)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T17:55:48.530

使用 UIActivity 发送邮件的问题是您无法像使用 MFMailComposeViewController 一样设置主题字段的文本、收件人等

我一直在尝试做一个解决方法来设置主题字段，但还没有找到解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T18:43:22.750

`UIActivity`类为邮件、消息传递、...提供内置的活动类型

# python - 如果字符串等于列表 a 中的项目，后跟列表 b 中的项目

> ID：12546577
> 
> 赞同：1
> 
> 时间：2012-09-22T18:32:13.853
> 
> 标签：python

我想做一个 if 语句来检测是否可以按顺序用列表中的项目形成一个字符串。例如，如果我想检查一个术语是否与“HelloWorld”具有相同的含义，我将有一个带有 的“hello”列表`['hello', 'Hello', 'Hi', 'Greetings', 'Hola']`和一个带有 的“world”列表`['world', 'World', 'Planet', 'Earth']`。然后，检查一个字符串是否等于“hello”列表中的任何项目，后跟“world”列表中的任何项目。“HelloWorld”、“GreetingsEarth”和“HiPlanet”都会成功触发 if 语句。我该怎么做？我想使用 Python 列表，所以正则表达式 (a|b) 似乎不切实际。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T18:41:32.547

如果要避免使用正则表达式，可以使用生成器表达式来测试每个组合（通过 生成`itertools.product`）：

```
import itertools
combinations = (''.join((first, second)) for first, second in itertools.product(a, b))
any('HelloWorld' == combination for combination in combinations) 
```

请注意，这比正则表达式方法慢*得多*，尤其是在遇到最坏情况（不匹配）时：

```
>>> timeit.timeit('search("HelloWorld"); search("HiThere")', 'from __main__ import reMatch as search')
1.8922290802001953
>>> timeit.timeit('search("HelloWorld"); search("HiThere")', 'from __main__ import genMatch as search')
18.3697190284729 
```

生成器表达式比正则表达式方法慢 10 倍。

（我使用`re.compile()`编译的正则表达式进行测试）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T18:36:42.383

正则表达式可以正常工作：

```
a = ['hello', 'Hello', 'Hi', 'Greetings', 'Hola']
b = ['world', 'World', 'Planet', 'Earth']

import re
r = '^(%s)(%s)$' % ('|'.join(a), '|'.join(b))

print re.match(r, "HelloWorld").groups() # ('Hello', 'World')
print re.match(r, "HiThere") # None 
```

非正则表达式解决方案很乏味：

```
s = "GreetingsEarth"
for x in a:
    if s.startswith(x) and s[len(x):] in b:
        print x, '+', s[len(x):]
        break 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T18:36:53.127

这实际上可以使用正则表达式来完成，如下所示：

```
list1 = ['hello', 'Hello', 'Hi', 'Greetings', 'Hola']
list2 = ['world', 'World', 'Planet', 'Earth']
regex = "(%s)(%s)" % ("|".join(list1), "|".join(list2))
print re.match(regex, "HelloWorld") 
```

但这也可以通过以下方式完成`itertools.product`：

```
print any("HelloWorld" == x + y for x, y in itertools.product(list1, list2)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T18:50:47.783

我为第二个列表使用了一个集合，这样您就不必每次都遍历它的所有项目。

```
a = ['hello', 'Hello', 'Hi', 'Greetings', 'Hola']
b = ['world', 'World', 'Planet', 'Earth']

b_set = set(b)
needle = 'HelloWorld'
for start in a:
    if needle.startswith(start) and needle[len(start):] in b_set:
         print 'match' 
```

如果您正在寻找更短的版本

```
any((needle[len(start):] in b_set for start in a if needle.startswith(start))) 
```

与此相反，`itertools.product`此解决方案不必比较所有`n^2`可能的组合，而只需遍历第一个列表 ( `n`) 并在最坏的情况下进行额外的集合查找。

# c++ - 如何使用双重检查锁来初始化 shared_ptr

> ID：12546579
> 
> 赞同：0
> 
> 时间：2012-09-22T18:32:30.750
> 
> 标签：c++, c++11, locking, shared-ptr, lazy-initialization

（假设 VC++ 2010：（1）可以使用 /volatile:ms，（2）还没有 std::atomic，（3）没有线程安全的静态变量初始化，（4）没有 std::call_once）

如果我有一个普通的 C 指针，我可以实现以下双重检查锁定模式，以避免每次锁定的成本：

```
static volatile void * ptr = nullptr;

//...
if ( ptr == nullptr)
{
   // Acquire Lock
   if (ptr == nullptr)
   {
      // some code
      // ptr = ...; // init ptr
   }
   // Release Lock
}
// .... 
```

从 VC++ 2005 开始，volatile 确保上面的代码是正确的。假设我对不可移植的代码没有意见。

现在假设我需要用 std::shared_ptr 或 boost::shared_ptr 替换普通指针，我将如何做同样的事情？如何使 shared_ptr 不稳定？我需要另一个 volatile 标志吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T18:48:35.733

在 C++11 中，有用于`shared_ptr`. 要编写使用 的双重检查锁`shared_ptr`，请使用这些访问器：

```
static std::shared_ptr<MyType> ptr;
if (std::atomic_load(ptr) == 0) {
    // lock the lock
    if (std::atomic_load(ptr) == 0) {
        std::shared_ptr<MyType> local_ptr(new MyType);
        std::atomic_store(ptr, local_ptr);
    }
    // unlock the lock
}
return ptr; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T18:41:08.650

> 从 VC++ 2005 开始，volatile 确保上面的代码是正确的。

不，不是的。`volatile`与线程或原子性无关。

您当前的代码不正确，任何 C++ 标准都不能保证产生合理的行为。

由于您的假装锁定代码通常不起作用，因此它肯定不会在`shared_ptr`其他智能指针上起作用。如果您想要更便宜的锁定，请查看无锁编码模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T20:11:49.133

在 C++ 2011 中，甚至不需要使用**任何**显式同步。根据 6.7 [stmt.dcl] 第 4 段，初始化由系统同步：

> 如果在变量初始化时控制同时进入声明，则并发执行将等待初始化完成。

这似乎意味着`std::shared_ptr<T>`可以像这样初始化：

```
{
    static std::shared_ptr<MyType> ptr(new MyType(/*...*/));
    // ...
} 
```

# delphi - 不兼容的类型：'WideChar' 和 'Char' delphi 7

> ID：12546582
> 
> 赞同：1
> 
> 时间：2012-09-22T18:32:52.363
> 
> 标签：delphi, error-handling, delphi-7

使用 shellexecute 调用外部程序时，我的 delphi 代码出现错误

```
procedure TReceiverMainForm.btnSearchClick(Sender: TObject);
 var
  args:string;
begin
  mmoResult.Clear;
//  args := ' /d='  + TIdURI.URLEncode(Trim(sSearch)) + ' /t=ReceiverMainForm /s=30 /m=1'
args := ' /q='  + httpencode(Trim(txtSearch.Text)) + ' /t=ReceiverMainForm /s='+Trim(txtS.Text)+' /m='+Trim(txtM.Text);
  ShellExecute(Handle, 'open', 'YTD.exe', pWideChar(args), nil, SW_SHOWNORMAL);
end; 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T20:51:39.980

函数[`ShellExecute`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153%28v=vs.85%29.aspx)定义如下

```
function ShellExecute(hWnd: HWND; Operation, FileName, Parameters,
  Directory: PChar; ShowCmd: Integer): HINST; stdcall; 
```

所以问题是你将`args`变量转换为 a`PWideChar`而不是 a `PChar`。

试试这个代码

```
ShellExecute(Handle, 'open', 'YTD.exe', PChar(args), nil, SW_SHOWNORMAL); 
```

请记住，Delphi 7 早于 Unicode Delphi 开发。`PChar`8 位字符类型的别名也是如此， `PAnsiChar`.

# r - 如何在 R 的散点图中绘制分类树的分裂条件？

> ID：12546583
> 
> 赞同：2
> 
> 时间：2012-09-22T18:33:01.000
> 
> 标签：r, tree

我从树包中为模拟数据拟合了一棵树，在 R 中具有一个输出和两个预测变量。

如下图所示，我想在 R 中用我的模型绘制虚线。有什么办法吗？我试图绘制条件 = 0 行，但这些行是从数据的最小值到最大值。

![在此处输入图像描述](../Images/906364879c82e2e6115c2339af66baf4.png)

这就是我到目前为止对最后两个类的虹膜数据和硬编码条件所做的

```
 iristree<-tree(Species ~.,data=iris)
    iristree #find split criterions 
node), split, n, deviance, yval, (yprob)
  * denotes terminal node

1) root 150 329.600 setosa ( 0.33333 0.33333 0.33333 )  
   2) Petal.Length < 2.45 50   0.000 setosa ( 1.00000 0.00000 0.00000 ) *
   3) Petal.Length > 2.45 100 138.600 versicolor ( 0.00000 0.50000 0.50000 )  
     6) Petal.Width < 1.75 54  33.320 versicolor ( 0.00000 0.90741 0.09259 )  
      12) Petal.Length < 4.95 48   9.721 versicolor ( 0.00000 0.97917 0.02083 )  
        24) Sepal.Length < 5.15 5   5.004 versicolor ( 0.00000 0.80000 0.20000 ) *
        25) Sepal.Length > 5.15 43   0.000 versicolor ( 0.00000 1.00000 0.00000 ) *
      13) Petal.Length > 4.95 6   7.638 virginica ( 0.00000 0.33333 0.66667 ) *
     7) Petal.Width > 1.75 46   9.635 virginica ( 0.00000 0.02174 0.97826 )  
      14) Petal.Length < 4.95 6   5.407 virginica ( 0.00000 0.16667 0.83333 ) *
      15) Petal.Length > 4.95 40   0.000 virginica ( 0.00000 0.00000 1.00000 ) *

    ....
plot(iris$Petal.Length, iris$Petal.Width, pch=21, 
         bg=c("red","green3","blue")[unclass(iris$Species)], 
         main="Edgar Anderson's Iris Data")
lines(c(0,8),c(1.75,1.75)) # manually put split criterions
lines(c(4.95,4.95),c(0,3))  # manually put split criterions 
```

并且产生了

![在此处输入图像描述](../Images/7b63619970dad41f24a11551f7ac7922.png)

我打算删除底部和左侧的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T01:18:51.147

我`partition.tree`在`tree`包裹里找到的。使用该功能，我可以制作以下图片。 ![在此处输入图像描述](../Images/55d8bcfd37274c99e3aaa888ccfd54e7.png)

虽然这不是我想要的，但这是我能做的最接近的事情。

# php - 即使我在标签内，php dom 也会返回带有标签名称的所有节点

> ID：12546584
> 
> 赞同：1
> 
> 时间：2012-09-22T18:33:04.577
> 
> 标签：php, dom

即使我在特定标签中，PHP DOM 也会返回所有节点。我一直在尝试解决这个问题大约 2 周，但没有任何进展。请帮忙。

这是我的代码：

```
$dom = new DOMDocument;
$dom->loadhtmlfile($url);
$doc=$dom->documentElement;
$res = $doc->getElementsByTagName('td')->item(54);
$tables = $res->getElementsByTagName('table');  //Here it returns every 'table', not just the ones which are under that 'td' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T18:53:14.873

来自[文档](http://php.net/manual/en/domdocument.getelementsbytagname.php)：*getElementsByTagName — 搜索具有给定本地标签名称的所有元素*

如果要在“td”元素中查找表，请使用 XPath 查询。

```
$xpath = new DOMXpath($dom);
$tables = $xpath->query("//td/table"); 
```

# c - 无法保持某些 LED 指示灯：ON ，闪烁其他 LED 时

> ID：12546586
> 
> 赞同：0
> 
> 时间：2012-09-22T18:33:17.993
> 
> 标签：c, microcontroller, avr, avr-gcc, atmega

我使用*AVR*作为微控制器，使用*ATMEGA8*作为处理器（在微控制器内部）。带有微控制器的电路板有 4 个 LED。我能够烧录程序并点亮 LED。但我无法实现特定的目标。

```
L1 L2  L3 L4 
```

这些是 4 个 LED。第一轮每个 LED 间隔 3 秒后亮起。最后一个 LED (L4) 在第一轮后保持亮起。第三轮开始时，每个 LED 间隔 3 秒亮起，L3 保持亮起，同时 L4 也亮照明，它继续......直到L1。

```
L1 L2 L3 L4
         On
      On On
   On On On
On On On On 
```

但我无法做到这一点。因为当我将一个 LED 设置为 ON 时，其他 LED 会熄灭。我什至尝试添加一个 10 毫秒的小时间间隔。我该怎么做呢 ？这是我到目前为止所拥有的：

```
 #include<avr/io.h>
    #include<util/delay.h>
    DDRB = 0xFF; // input
 //PORTB = 0xFF;

    // ob00011110 --> on all --> binary

    int i=0;

    while(i<1) {
      PORTB = 0b00010000; // first led on
      _delay_ms(3000);
      PORTB = 0b00001000; // second led on
      _delay_ms(3000);
      PORTB = 0b00000100; // third on
      _delay_ms(3000);
      PORTB = 0b00000010; // fourth on
      _delay_ms(3000);
      i += 1;
    }

    PORTB = 0b00000010; // keep the 4th on and start all over again and reach til 3rd LED 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T18:45:36.723

看起来你的顺序是错误的。当您打开第二个 LED 时，您将关闭第一个 LED。顺序应该是：

```
 PORTB = 0b00010000; // first led only
  _delay_ms(3000);
  PORTB = 0b00011000; // first and second led on
  _delay_ms(3000);
  PORTB = 0b00011100; // first, second, and third on
  _delay_ms(3000);
  PORTB = 0b00011110; // first, second, third, and fourth on
  _delay_ms(3000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T21:26:35.777

你可以使用这样的东西：

```
while (1){
  PORTB = 0b00010000;
  _delay_ms(3000);
  PORTB |= 0b00001000;
  _delay_ms(3000);
  PORTB |= 0b00000100;
  _delay_ms(3000);
  PORTB |= 0b0000010;
  _delay_ms(3000); 
```

它会在每次循环开始时关闭所有 LED，然后一个接一个地打开......

# css - 响应式设计 - 新的背景图像不会显示在较小的视口中

> ID：12546598
> 
> 赞同：1
> 
> 时间：2012-09-22T18:34:41.960
> 
> 标签：css, background-image, responsive-design, tablet, viewport

我对 css 很陌生，我在本地工作，所以我无法提供确切的地址，但这里是：

我正在使用具有响应式布局的[wpexplorer 适应主题。](http://wpexplorer.me/adapt/)我在 style.css 中设置了包装器背景，如下所示：

```
 #wrap{
    background: url(images/scribble-top.jpg) center top no-repeat #fff;
    margin: 0 auto;
    width: 1040px;
    padding: 0 30px;
} 
```

当我进入 responsive.css 开始设计其他视点时，我想为平板电脑纵向视图中的 wrap div 使用新的背景图像，但由于某种原因，新图像现在将完全显示（只是保持空白）并且当我将其缩小到移动视口时，style.css 背景再次出现。这是我的编码：`

```
/* #Tablet (Portrait)
================================================== */

/* Note: Design for a width of 740px */
@media only screen and (min-width: 768px) and (max-width: 959px) {

body {background: #000;}
    #wrap {background: url(images/scribble-top-680.jpg) no-repeat center top #fff; width: 680px; overflow:inherit;}
    .hp-highlight, .portfolio-item, .home-entry, #footer-one,#footer-two,#footer-three,#footer-four{ width: 155px;  }
    #home-tagline{ font-size: 21px; }
    #search { text-indent: -9999px; }
    .loop-entry-thumbnail{width: 35%;}

} 
```

应该注意的是，新图像是新 wrap div 大小的确切宽度，并且高度不是相对的，因为它只是 wrapper 顶部的横幅类型图像，因此不应干扰 wrap div 高度。

我究竟做错了什么？

在此先感谢您的帮助！！！`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:03:29.073

add !important after your background declaration like so:

```
#wrap {
    background: url(images/scribble-top-680.jpg) no-repeat center top #fff !important; 
    width: 680px;
    overflow:inherit; 
} 
```

# c - 如何比较二叉树中的根路径和叶路径

> ID：12546599
> 
> 赞同：0
> 
> 时间：2012-09-22T18:34:46.047
> 
> 标签：c, recursion, tree, binary-tree

我正在尝试搜索给定红黑树中的所有从根到叶的路径。特别是，我想写一个测试，给定一个 rbt，将断言每条路径都有相同的黑色节点数。

我正在尝试使用两个全局变量进行类似的操作：

```
static int count = 0, path = -1;

int check_paths(tree_node t)
{
    if (t == NULL)
    {
        if (path == -1)
            path = count;
        else
            return (path == count);

        return 1;
    }

    if (t->black == 1) ++count;
    int x,y;
    x = check_paths(t->left);
    if (t->black == 1) --count;
    y = check_paths(t->right);

    return (x&&y);
} 
```

但是，当左分支中的黑色节点右侧有红色节点时，我遇到了麻烦，因为这意味着计数减少的幅度超过了应有的幅度。

有没有更好的方法来搜索从根到叶的路径并计算特定值的频率，然后以某种方式比较计数？或者，如果给定一个，是否有一种完全不同的方法来测试 rbt 的余额（即它已经制作，但它的正确性不确定）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T00:18:13.080

考虑如何创建一个函数，该函数采用（子）树，并且 (a) 如果平衡则返回其黑色高度，或者 (b) 否则返回负数。

基本情况是一个空的（子）树；它只是返回 0。

归纳案例：

*   lh 是对左子树递归调用的结果
*   lr 是对右子树递归调用的结果

如果 lh == lr 并且它们是正数，则返回 lh + 1 如果黑色

这是一些未经测试的代码：

```
int check_paths (tree_node t)
{
    if (t == NULL)
    {
        return 0;
    }
    int lh = check_paths(t->left);
    int rh = check_paths(t->right);

    if (lh != rh || lh < 0)
    {
        return -1;
    }
    else if (t->black == 1)
    {
        return (lh + 1);
    }
    else
    {
        return (lh)
    }
} 
```

# c# - 如何在 NHibernate 中测试升级锁？

> ID：12546602
> 
> 赞同：0
> 
> 时间：2012-09-22T18:35:10.613
> 
> 标签：c#, nhibernate, concurrency, locking

假设我有：

```
session.Get<User>(id, LockMode.Upgrade) 
```

第一个线程通过。第二块。我想测试这个锁，如果被锁就退出。

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T22:29:37.950

`LockMode.UpgradeNoWait`（仅当您的 SQL 服务器支持时才支持）？

或者，您可以使用事务超时来实现类似的事情，但延迟时间更长。

# ios - iCloud KeyValueStore 偏好更改并在各种设备上处理它们

> ID：12546605
> 
> 赞同：1
> 
> 时间：2012-09-22T18:35:20.013
> 
> 标签：ios, icloud

根据 Apple 的指南，我的应用程序为用户提供了在 iCloud 中启用/禁用存储的选项。

用例：

*   默认情况下，iCloud 中的存储被禁用
*   用户在 iOS 设备 1 上下载应用程序并创建一些文件等
*   然后用户在 iOS 设备 2 上下载应用程序并创建一些文件等。这些文件与在 iOS 设备 1 上创建的文件不同
*   然后用户在 iOS 设备 1 上启用 iCloud。此设置使用 iCloud 的 KV 存储传播到 iOS 设备 2。iOS 设备 1 沙箱中的文件也被移动到 iCloud

场景一：

用户在 iOS 设备 2 上启动应用程序。我知道现在 iCloud 已启用，我提示用户它已在其他设备上启用，并且我正在将您的本地文件移动到 iCloud。我认为这里没有问题。

场景二：

当通知到达时（设备 1 上启用了 iCloud），用户正在 iOS 设备 2 上使用该应用程序，并且屏幕上的模态视图很少。我不确定如何通知用户有关更改并执行操作，即将设备 2 的沙箱文件移动到 iCloud。

应用程序的所有视图控制器是否都应该具有被中断并处理此事件的能力？

在这里寻找一些关于用户体验和正确做法的建议和指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T21:19:40.790

将特定于设备的设置保存在 NSUserDefaults 中，并且不要自动上传文件——自动上传似乎有点错误，因为在另一台设备上更改了设置。如果您强制用户导航到“启用 iCloud 存储”视图控制器，您可以更好地控制其他 VC 的可见性，并且不太可能遇到意外。

将其设置为每个文件的设置也是值得的（例如，出于安全/空间原因，他们可能不需要在 iCloud 中的文件）。

或者，UIAlertView 应该可以在您的应用程序中的任何位置工作，但您必须确保在视图控制器中查看（和编辑？）文件时可以无缝地将文件转移到 iCloud。

# java - 如何在 Eclipse 中运行一个简单的 Java 程序？

> ID：12546606
> 
> 赞同：10
> 
> 时间：2012-09-22T18:35:20.713
> 
> 标签：java, eclipse, compiler-errors

您可能从问题本身可以理解，我是 Java 新手。我得到了一个练习来编写一个 Java 程序，该程序接收一个字符，打印它以及 Unicode 表中的下一个字符。

现在，我有了这个练习的解决方案：

```
public static void main(String[] args){
    char c = args[0].charAt(0);
    char c1 = (char)(c + 1);
    System.out.println(c + "\t" + c1);
} 
```

我了解这段代码的基本概念，但我试图在 Eclipse 中运行这段代码，但出现了一个恼人的错误：

线程“main”中的异常 java.lang.ArrayIndexOutOfBoundsException: MainClass.main 中的 0(MainClass.java:9)

注意：我还没有运行一个实际接收一些东西作为参数的 Java 程序，所以我猜这是初学者的愚蠢错误......这是我尝试在 Eclipse 中编译的完整代码：

```
public class MainClass {

    /**
     * @param args
     */

    public static void main(String[] args){
        char c = args[0].charAt(0);
        char c1 = (char)(c + 1);
        System.out.println(c + "\t" + c1);
    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-22T18:44:36.440

*   从菜单中选择“运行 -> 运行配置”。
*   在左侧列表中搜索您的项目并选择它。
*   选择右侧的“参数”选项卡。
*   在“程序参数”中写入您要传递给程序的参数。
*   点击“运行”

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-22T18:51:44.470

在 Eclipse 的项目资源管理器中右键单击您的 java 文件。然后**运行方式>运行配置**

![在此处输入图像描述](../Images/0c191b4bbf060201537c19a26b522375.png) 然后你会得到一个窗口。像-

![在此处输入图像描述](../Images/19e33d550a7cde06d3011d4294eab81c.png)

单击 Arguments Tabs，然后在其中写一些文本，可能是一个字符。

然后单击应用按钮和运行按钮。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-22T18:43:41.557

Eclipse 中的默认运行配置运行没有任何参数的 Java 程序，因此`ArrayIndexOutOfBoundsException`. `args`当没有任何元素时，您的代码正在尝试获取数组的第一个元素！

您可以编辑运行配置以提供用于运行程序的参数。那么它不应该抛出这个异常。

但是，一个好的做法是在访问数组元素之前检查数组的大小，当数组作为来自代码外部的参数时更是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T21:31:24.820

这是一个很好的问题，有一些很好的答案。我想添加一些关于如何调试您自己的程序的指示。调试与编写代码一样重要（如果不是更重要的话）。

一方面，Eclipse 有一些很棒的调试特性。您可以使用此调试器来查找代码中的问题。我建议你学习如何使用它。特别是，您可以为变量设置监视，以在您逐步执行代码时查看它们的值。

或者，您可以添加调用以`System.out.println()`打印出任何变量的值。例如，在代码开头添加以下行可能会帮助您缩小问题范围：

```
System.out.println(args[0]); 
```

`ArrayIndexOutOfBoundsException`如果没有给出命令行参数，这也会给出。然后你可以做类似的事情

```
System.out.println(args.length); 
```

这将打印出来`0`。然后，这为您提供了问题所在的线索。

当然，即使到了这一步，你可能仍然不知道如何解决问题。这就是像 StackOverflow 这样的网站派上用场的地方。

祝您的 Java 体验好运。当您需要更多帮助时，请回来。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-19T05:25:04.937

如果您的运行配置已到位（如上面的答案所示）：

运行类的快捷方式是：

**Ctrl + F11**

# javascript - 如何在 javascript/jquery 中传递 css % 参数

> ID：12546607
> 
> 赞同：0
> 
> 时间：2012-09-22T18:35:27.463
> 
> 标签：javascript, jquery, html, css

上下文：[jsFiddle 链接](http://jsfiddle.net/ruFrp/5/)

我正在尝试使 changeWidth 函数的第二个参数可以是百分比值（如在 css: 中`something: 50%;`）。如果您按照我提供的链接进行操作，那么我为什么要这样做应该很明显。我想也许传递的参数只是一个数字（例如 75），但随后在方法本身中将其转换为 % 以用于 animate(..) 调用......但我不知道该怎么做任何一个。

有任何想法吗？:)

编辑：我成功了！不用担心！（如果有兴趣，请看[这个](http://jsfiddle.net/ruFrp/8/)）！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:38:54.697

像这样：

```
changeWidth($("#testbar"), '50%'); 
```

它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T18:39:03.873

您可以将宽度作为字符串传递

```
$(function(){
    changeWidth($("#testbar"), '70%');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T18:39:15.807

[http://jsfiddle.net/ruFrp/7/](http://jsfiddle.net/ruFrp/7/)

```
$(function(){
    changeWidth($("#testbar"), '50%');
}); 
```

# regex - 正则表达式连续匹配

> ID：12546610
> 
> 赞同：1
> 
> 时间：2012-09-22T18:35:50.290
> 
> 标签：regex, expression

我有以下数学表达式`ii*3+(ii*2)+xdii+13-ii-ii-4`，我想替换变量`ii`的每次出现`ii[x]`。显然 xdii 不能被替换，因为它是另一个变量。

问题是结果输出是：`ii[x]*3+(ii[x]*2)+xdii+13-ii[x]-ii-4`. 所以我的问题是，当正则表达式引擎替换它时，`-ii-ii`它只会替换这两个连续匹配的第一次出现。这是我的正则表达式，

```
's/([\+\*\-\s\(]|^)ii([\+\*\-\s\)])/$1ii[x]$2/' 
```

如果数学表达式在这两个连续的之间有一个额外的空间，那么结果将是正确的。例如：`ii*3+(ii*2)+xdii+13-ii- ii-4`产生正确的答案。

如果它有助于我在引擎第二次出现时附加正则表达式调试内部输出`-ii-ii`

```
Guessing start of match, REx `([\+\*\-\s\(]|^)ii([\+\*\-\s\)])' against `ii-4'...
Found floating substr `ii' at offset 0...
Guessed: match at offset 0
Matching REx `([\+\*\-\s\(]|^)ii([\+\*\-\s\)])' against `ii-4'
  Setting an EVAL scope, savestack=0
  23 <i+13-ii-> <ii-4>    |  1:  OPEN1
  23 <i+13-ii-> <ii-4>    |  3:  BRANCH
  Setting an EVAL scope, savestack=7
  23 <i+13-ii-> <ii-4>    |  4:    ANYOF[\11-\15 (*+\-]
                              failed...
  23 <i+13-ii-> <ii-4>    | 15:    BOL
                              failed...
  Clearing an EVAL scope, savestack=0..7
Match failed 
```

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:45:51.510

有`null width matches`。通常：

> ```
>  The  symbols  \< and \> respectively match the empty string at the beginning 
> and end of a word.  The symbol \b matches the empty string at the edge
> of a word, and \B matches the empty string provided it's not 
> at the edge of a word.  The symbol \w is a  synonym  for  [_[:alnum:]]  and  \W  is  a
> synonym for [^_[:alnum:]]. 
> ```

所以在你的情况下`\<ii\>`将是正确的替换但是检查你正在使用的匹配器文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T18:42:57.167

您的字符类中有一个问题：连字符必须出现在第一个或最后一个，否则它将表示一个*range*。虽然老实说，我不知道如果范围包含字符*类型* `\s`会发生什么。

试试这个：

```
s/([+*\s(-]|^)ii([+*\s)-])/$1ii[x]$2/ 
```

# ruby - Ruby - 优雅地调用两个数组元素的方法

> ID：12546617
> 
> 赞同：0
> 
> 时间：2012-09-22T18:36:26.400
> 
> 标签：ruby, arrays

我正在比较对象数组，并且我有一个方法可以确定两个元素是否相等。我想在两个数组中的每对元素上调用此方法，是否有一种优雅的方法可以找到真值（即，如果每个数组中的所有元素都相等，则为 true，否则为 false）

这是我目前拥有的：

```
c = false
self.children.zip(other.children).each do |s,o| 
  c = s.equiv o  # I need a good way to store this result
  break if not c
end 
```

我希望我能做这样的事情：

```
c = self.children.zip(other.children).each{|s,o| s.equiv o} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T18:42:42.130

怎么用`all?`

```
c = self.children.zip(other.children).all?{|s,o| s.equiv o} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T18:42:44.970

那么你有[Enumerable#all 吗？](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-all-3F)

```
c = self.children.zip(other.children).all? {|s,o| s.equiv o} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T18:51:39.367

一个更好的解决方案是只定义`==`你的对象。然后您可以使用`Array#==`它来完成您的工作，因为它已经进行了所有对的比较。

这是一个简单的例子：

```
class Widget
  attr_reader :name

  def initialize(name)
    @name = name
  end

  def ==(other)
    @name == other.name
  end
end

if $0 == __FILE__
  require 'minitest/autorun'

  describe 'widget arrays' do
    let(:some_widgets) { %w(foo bar baz).map { |name| Widget.new(name) } }
    let(:diff_widgets) { %w(bar baz spam).map { |name| Widget.new(name) } }

    it 'returns true if the widget arrays are the same' do
      (some_widgets == some_widgets).must_equal true
    end

    it 'returns false if the widget arrays are different' do
      (some_widgets == diff_widgets).must_equal false
    end
  end
end 
```

您只需调用`some_widgets == my_other_widgets`来比较每个元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T18:40:50.817

我认为如果您替换`each`为`map`,`c`将是您要查找的数组。我不能 100% 确定，因为我无法立即进行测试，而且我知道`zip`.

# wpf - 为什么 System.Data.DataTable 作为 ItemsSource 工作，我如何编写自己的类来做同样的事情？

> ID：12546620
> 
> 赞同：0
> 
> 时间：2012-09-22T18:36:33.777
> 
> 标签：wpf, data-binding

我正在编写一个花哨的业务逻辑类，它本质上是一个具有未知列数的表，动态构造，其中包括用于验证、数据处理等的各种方法。

它是一种`IEnumerable`特殊的行对象，允许通过访问器访问它们的列`BusinessData this[string columnName] { get { ... } }`。几乎像一个`DataTable`。

我希望能够将它数据绑定到 WPF `DataGrid`，所以我想写以下内容：

```
 dataGrid1.ItemsSource = myFancyMemoryTable; 
```

但是，当然，它不会起作用，因为`DataGrid`它将自己绑定到我的行对象的公共属性，而不是包含业务数据的列。我如何从中获得我想要的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:50:59.483

我无法具体追踪为`DataTables`/检索属性的位置，`DataRows`但如果您[`ITypedList`](http://msdn.microsoft.com/en-us/library/system.componentmodel.itypedlist.aspx)在应该工作的源集合上实现。

# java - csv文件中的行数组

> ID：12546624
> 
> 赞同：-1
> 
> 时间：2012-09-22T18:37:07.663
> 
> 标签：java, csv

我正在尝试在 csv 文件中创建一个行数组。

示例 csv：

```
12,13,14,15
13,14,15,16
11,12,13,14 
```

现在我希望我的数组包含 3 个字符串。

我懂了：

```
public static String[] postcodeRows;
public static void main(String[] arg) throws Exception
{
    //read the csv file
    BufferedReader CSVFile = new BufferedReader(new FileReader(
            "C:\\Users\\randy\\Documents\\postcode csv\\exports\\all-groups.csv"));

    //count where we are in the csv file
    int csvLine = 0; 
    postcodeRows[0] = CSVFile.readLine(); // Insert the first line.
    // The while checks to see if the data is null. If it is, we've hit the end of the file. If not, process the data

    while (postcodeRows[csvLine] != null)
    {
        csvLine++;
        postcodeRows[csvLine] = CSVFile.readLine();
    }
    // Close the file once all data has been read.
    CSVFile.close();

} 
```

现在我明白了：

```
Exception in thread "main" java.lang.NullPointerException
at postcodeCheckup.postcodePanel.main(postcodePanel.java:43) 
```

为什么有一个`NullPointerException`，我该如何防止这种情况？变量 can't be `null`，由`while`循环检查。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T18:41:41.190

是的，它可以为空，你看错了。:)

数组 postCodeRows 未初始化。

查看[http://mathbits.com/MathBits/Java/arrays/Initialize.htm](http://mathbits.com/MathBits/Java/arrays/Initialize.htm)。

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T18:41:36.537

您需要初始化数组，在您的情况下，看起来数组需要是动态的。

研究使用 java [arraylist](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)。

# javascript - 如果外部文件无响应，请停止加载

> ID：12546625
> 
> 赞同：0
> 
> 时间：2012-09-22T18:37:15.373
> 
> 标签：javascript

我的 Web 应用程序加载了一个外部 JS 文件，该文件有时会挂起 30 多秒，从而使我的页面依次挂起。

我知道我可以把它从我的服务器中取出`head`，或者从我自己的服务器上加载文件，或者切换服务。但是，我想知道如果外部文件在一段时间内没有响应，是否有办法停止加载它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T07:30:50.983

如果文件之间存在依赖关系，异步加载 JavaScript 文件可能会很棘手。我更喜欢将`<script>`-tag 放在`<body>`. 这样，您可以将依赖项放在它下面，并在依赖项中检查仅在慢速 JS 文件中可用的变量，然后再执行依赖于慢速 JS 文件的函数。您还写道，您可以将 JS 放在自己的服务器上，所以我猜它是在外部域上。如果是这种情况，您无论如何都不能使用普通的 XMLHttpRequest/AJAX 调用来异步加载 JS 文件。

如果您绝对想异步加载文件并准备好处理这可能给您带来的问题，那么请查看[http://headjs.com/](http://headjs.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T18:43:38.477

我认为不可能以常规方式链接外部文件并为其加载指定自定义超时。

您可以尝试向文件地址发出 ajax 请求，同时将超时设置为 30 秒。如果请求仍在运行，您可以取消它。否则，在 html 页面中，您可以创建带有加载内容的脚本标记。

# html - CSS 帮助气泡居中箭头和气泡与文本对齐

> ID：12546628
> 
> 赞同：0
> 
> 时间：2012-09-22T18:37:18.037
> 
> 标签：html, css, bubble-popup

我有一个弹出气泡，当您将鼠标悬停在文本上时会弹出，我正在尝试动态使用它，但是无论气泡有多高，我都无法让它始终以文本为中心。我已经尝试了我能想到的一切，但它不起作用：\

小提琴：http: [//jsfiddle.net/jq2wz/1/](http://jsfiddle.net/jq2wz/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T20:28:02.337

也许[这些](http://forrst.com/posts/Pure_css_tooltip_box_with_arrow_T_R_B_L-7kR)，在[这个 Fiddle](http://jsfiddle.net/LqX9Z/)中看到的就是你要找的？或者至少它们可以根据您的需要进行修改。

# java - 尝试导出简单界面时未解决的约束

> ID：12546629
> 
> 赞同：0
> 
> 时间：2012-09-22T18:37:41.337
> 
> 标签：java, dependencies, osgi, bundle

我正在尝试迈出让自己熟悉 OSGI 框架的第一步。但是，我什至无法启动仅导出一个包的捆绑包，仅此而已。框架显示的错误对我来说听起来很荒谬，因为我将其读为“为了启动您的捆绑包，我需要解析 openjsip.service.locationservice 包。但是这个包来自我的包！无论如何，我认为我错了，但我无法理解问题所在，有人可以帮助我吗？

```
ERROR: Bundle openjsip.locationservice [6] Error starting file:////tmp/locationservice-1.0.0-SNAPSHOT.jar (org.osgi.framework.BundleException: Unresolved constraint in bundle openjsip.locationservice [6]: Unable to resolve 6.0: missing requirement [6.0] osgi.wiring.package; (&(osgi.wiring.package=openjsip.service.locationservice)(version>=1.0.0)))
org.osgi.framework.BundleException: Unresolved constraint in bundle openjsip.locationservice [6]: Unable to resolve 6.0: missing requirement [6.0] osgi.wiring.package; (&(osgi.wiring.package=openjsip.service.locationservice)(version>=1.0.0))
at org.apache.felix.framework.Felix.resolveBundleRevision(Felix.java:3826)
at org.apache.felix.framework.Felix.startBundle(Felix.java:1868)
at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1191)
at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStartLevelImpl.java:295)
at java.lang.Thread.run(Thread.java:722) 
```

这是我的清单.MF：

```
Manifest-Version: 1.0
Bnd-LastModified: 1348338100498
Build-Jdk: 1.7.0_05
Built-By: devel
Bundle-ManifestVersion: 2
Bundle-Name: locationservice
Bundle-SymbolicName: openjsip.locationservice
Bundle-Version: 1.0.0.SNAPSHOT
Created-By: Apache Maven Bundle Plugin
Export-Package: openjsip.service.locationservice;uses:="javax.sip.header
 ,javax.sip";version="1.0.0.SNAPSHOT"
Import-Package: javax.sip;version="[1.2,2)",javax.sip.header;version="[1
 .2,2)"
Tool: Bnd-1.50.0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:24:09.890

错误消息似乎与您发布的 MANIFEST.MF 不匹配。你有可能在两者之间重建它吗？

错误消息说您的包*导入*了 package `openjsip.service.locationservice`，并且该导入无法解析。但是根据清单，您只导入`javax.sip`和`javax.sip.header`. 因此，此错误消息不可能来自发布的捆绑清单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T05:39:56.163

感谢大家的帮助，问题实际上出在 IDEA 配置上，它使用 facet 配置自行创建 MANIFEST.MF（我依靠 apache maven 插件将其留空）。由于某种原因，它忽略了这个插件或者还不能与它配对使用。解决方案是告诉它“使用来自 target/classes/META-INF 的预定义 MANIFEST.MF”。

再次感谢。

# phpstorm - PhpStorm 文本大小

> ID：12546631
> 
> 赞同：108
> 
> 时间：2012-09-22T18:37:48.717
> 
> 标签：phpstorm

`CTRL`是否可以在 PhpStorm 中定义增加/减少代码大小的快捷方式，就像在 Notepad++ 中使用+可以做的那样`Mouse Wheel`？

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2012-09-22T19:46:16.927

**启用`CTRL`+ `Mouse Wheel`：**设置 -> 编辑器 -> 使用 Ctrl+鼠标滚轮更改字体大小（缩放）（选中）。

![在此处输入图像描述](../Images/7b04b3d8d1624483dcd37704f1eaad70.png)

* * *

**指定确切的字体大小：**设置 -> 编辑器 -> 颜色和字体 -> 字体。

![在此处输入图像描述](../Images/e2cbb79cc7fe36b2395dafeec7701a66.png)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-06-01T05:55:39.733

在此地址文件中的新版本中>设置>编辑器>常规检查此项目使用Ctrl +鼠标滚轮更改字体大小（缩放）

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2018-10-16T10:57:21.107

我可以通过以下方式**[更改我的 PHP Storm](https://youtu.be/I64aMsrNoT4)**（**版本 8.0.3 或更高版本**）字体

1.  转到文件，然后单击设置。
2.  表单左侧菜单，选择`Editor`--> `General`Tab
3.  `Mouse`选中部分下的此框`Change font size (zoom) with Ctrl_Mouse Wheel`（见下图）。

[![在此处输入图像描述](../Images/6cae7d548fc7f3b4f30cadeba5915b40.png)](https://i.stack.imgur.com/vNjei.png)

[30秒演示在这里](https://youtu.be/I64aMsrNoT4)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-07-17T10:26:22.847

您也可以使用**View → Enter Presentation Mode**。

此模式的默认字体大小为 24。

您可以在此处更改：*设置 → 外观 → 演示模式 → 字体大小*

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-08-21T04:20:13.650

预定义方案不可编辑。要更改此类方案中的颜色和字体设置，请创建其副本。因此，要更改字体大小，请选择您选择的任何方案。将“方案”另存为副本，名称类似于“方案 2”。现在默认字体大小将是可编辑的。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-10-18T02:22:03.143

在 MacOS 中，您应该导航到 PhpStorm -> Preferences -> Editor -> General 屏幕并选中/取消选中“Change font size (Zoom) with Command + Mouse Wheel”复选框。我未选中，因为我不喜欢它，但也许你喜欢。

此外，您可以使用同一 PhpStorm -> 首选项对话框左上角的查找器字段。在此字段中键入单词“size”，您将在对话框的右侧看到几个项目。有编辑器操作 -> 减小字体大小和编辑器操作 -> 增加字体大小选项。

右键单击它们中的每一个，然后选择“添加键盘快捷键”。最后，在增加的情况下按 Ctrl 和数字加号，在减少的情况下按 Ctrl 和数字减号，然后按 OK（如果您的键盘上有数字部分）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-10-12T20:10:10.767

在 PhpStorm 2020.2.1 中转到：

设置 -> 编辑器 -> 字体

[![在此处输入图像描述](../Images/e94c2945c9ad907603c4dd6cb7d298eb.png)](https://i.stack.imgur.com/J8Nml.png)

而已

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-10-26T14:55:09.187

在演示期间切换编辑器和缩放文本可能会很复杂。如果您曾经像在记事本++中那样做，那么如果您使用win，这可能会有所帮助：

```
^NumpadAdd::
    send,^{WheelUp}
return 
```

您可以在这里找到完整的脚本：[https ://gist.github.com/sl5net/7170280#file-gistfile1-txt](https://gist.github.com/sl5net/7170280#file-gistfile1-txt)

# c# - 在 C# 中通过网络连接的路径进行枚举

> ID：12546633
> 
> 赞同：2
> 
> 时间：2012-09-22T18:38:07.787
> 
> 标签：c#, enumeration, unc, net-use

我有几个通过 net use 连接到的路径，但它们没有作为网络驱动器在我的系统上列出，因为我使用以下 net use 命令连接到： `net use \\{server}\{environment}` 也就是说，我没有将它们列为我系统上的活动驱动器。

我希望能够使用 C# 枚举所有这些（这样我就可以构建一个可以快速连接/断开每个路径的程序）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T18:44:50.093

好吧，您必须使用 WMI - 查询“SELECT * FROM Win32_NetworkConnection”将为您提供系统上所有网络连接的列表。

此处提供了使用 WMI 的示例：[http ://www.c-sharpcorner.com/uploadfile/puranindia/windows-management-instrumentation-in-C-Sharp/](http://www.c-sharpcorner.com/uploadfile/puranindia/windows-management-instrumentation-in-C-Sharp/)

# php - 记住选择选项

> ID：12546636
> 
> 赞同：0
> 
> 时间：2012-09-22T18:38:48.957
> 
> 标签：php

我有这个表格：

```
<form method='POST' action='update_ads.php'>
  <select size='1' name='type'>
  <OPTION value=''></OPTION>
  <OPTION value='1'>Open</OPTION>
  <OPTION value='0'>Closed</OPTION>
  </select>

  <input type='submit' value='Save'>
</form> 
```

以及与之关联的这个 PHP 文件：

```
$id        = $_POST['id'];
$type = addslashes($_POST['type']);
$query =  mysql_query("UPDATE ads SET type='$type' where id=$id"); 
```

我可以添加什么，以便用户在单击“提交”之前选择的选项在重新打开时返回？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:49:15.067

你可以这样做：

```
 <?php
    if (isset($_POST['id']) && ((int) $_POST['id'])) != 0) {
        $id = $_POST['id'];
    }

    //connect to db

    //get the responce of the query "SELECT `type` FROM `ads` WHERE `id` = $id"

    //put it in a variable named $type

    ?>
    <form method="POST" action="">
        <select size='1' name='type'>
            <option value="" <?=($type == '') ? 'selected="selected"' : ''?>></option>
            <option value="1" <?=($type == 1) ? 'selected="selected"' : ''?>>Open</option>
            <option value="0" <?=($type == 2) ? 'selected="selected"' : ''?>>Closed</option>
        </select>
    </form> 
```

编辑：如果您有一个没有太多选项的选择，这很好，否则您应该使用类似 foreach 语句的想法。

对于许多选项，您可以使用它：

```
 <?php
    $options = array('Open' => 1, 'Closed' => 0, 'Select an option' => ''); ?>
    <form method="POST" action="">
        <select size='1' name='type'>
        <?php
        foreach($options as $label => $option) { 
            if ($type == $option) {
                $checked = 'selected="selected"';
            }
            else {
                $checked = '';
            }
        ?>
            <option value="<?=$option?>" <?=$checked?>><?=$label?></option>
        <?php
        }
        ?>
        </select>
    </form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T18:44:47.370

当用户加载页面时，您必须检查数据库中的当前选择。

然后根据选择更改 html：
`<OPTION value='1' selected='selected'>Open</OPTION>
<OPTION value='0'>Closed</OPTION>`

或者

`<OPTION value='1'>Open</OPTION>
<OPTION value='0' selected='selected'>Closed</OPTION>`

顺便说一句，你的`ID`还没有设置在这个表格中。你也需要逃避它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T18:43:44.887

将此表单放入字符串 ($form) 中并执行此操作

```
$form = str_replace(" value='".$id."'>"," value='".$id."' selected>", $form);

echo $form; 
```

您可以记住 cookie 中的 $id。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T18:50:18.637

不是最好的解决方案，但它并不真正知道这是怎么回事。

```
<select size="1" name="type">
  <option value=""></option>
  <option value="1"<?= $_POST['type']==1 ? " selected" : ""?>></option>
  <option value="0"<?= $_POST['type']==0 ? " selected" : ""?>></option>
</select> 
```

顺便说一句：你可能想看看[这个。](http://onlamp.com/pub/a/php/2001/05/03/php_foundations.html)

# ruby - ActiveSupport::Concern 与 append_features

> ID：12546639
> 
> 赞同：2
> 
> 时间：2012-09-22T18:39:04.843
> 
> 标签：ruby, ruby-on-rails-3, activesupport

有[一篇](http://opensoul.org/blog/archives/2011/02/07/concerning-activesupportconcern/)关于`ActiveSupport::Concern`钩子的文章。这是 Rails 中的一个有效实现：

```
module ActionController
  class Base < Metal
    include AbstractController::Layouts
  end
end

module AbstractController
  module Layouts
    extend ActiveSupport::Concern

    include Rendering

    included do
      class_attribute :_layout, :_layout_conditions, :instance_accessor => false
      self._layout = nil
      self._layout_conditions = {}
      _write_layout_method
    end

    module ClassMethods
      ...
    end
  end
end

module AbstractController
  module Rendering
    extend ActiveSupport::Concern

    included do
      class_attribute :protected_instance_variables
      self.protected_instance_variables = []
    end

    module ClassMethods
      ...
    end
  end
end 
```

在ruby​​ 钩子之前如何执行`extend`调用？必须先执行。毕竟，它的全部意义在于劫持ruby​​ 默认并重新实现它。但是，根据 Ruby 文档，在您将此模块（例如）包含在另一个（例如）中之后立即执行。所以这里对我来说很困惑。如果是这种情况，则永远不会调用覆盖的。`Layouts``append_features``extend``append_features``append_features``AbstractController::Layouts``ActionController::Base``append_features``ActiveSupport::Concern`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:29:35.373

这是我的看法：

您可以将“包含”视为将模块作为参数的方法；为了包含一个模块，该模块必须已经被环境加载；否则，该行将因缺少常量错误而失败。

因此，当`include AbstractController::Layouts`被调用时，必须将 Layouts 加载到 AbstractController 或顶级命名空间中才能正常工作。

查看 actionpack 源代码，发现 Layouts*是 autoloaded*，这确保了它会在“include”行完成之前被加载。

由于在*加载*`extend ActiveSupport::Concern`Layouts 时执行，因此在 ActionController::Base 中的“include”行完成执行时，覆盖*将可用*。*`append_features`*

 **之后，Layouts 的 append_features 方法将使用 ActionController::Base 作为参数执行。**

# ruby-on-rails - 获取 Stripe 的美分价格

> ID：12546643
> 
> 赞同：3
> 
> 时间：2012-09-22T18:39:50.827
> 
> 标签：ruby-on-rails, ruby, stripe-payments

我必须向[Stripe](https://stripe.com/)发送一些以美分为单位的价格金额，以便对卡进行收费。在我的应用程序中，该`total_price`值是小数，即美元和美分。显然，我可以通过乘以 100 将其转换为美分：

```
total_price * 100 
```

但结果仍然是小数，Stripe 给我一个“无效金额”错误。我知道舍入浮点数可能存在问题。我想知道`total_price`在 Rails 中将 my 转换为整数的最安全方法。我已经看到一些关于金钱宝石的参考，但在这种情况下这是必要的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T19:17:39.147

Ruby 有几种方法可用于浮点数，具体取决于您的需要：

*   `(cart.total_price * 100).to_i (discards all decimals)`
*   `(cart.total_price * 100).round # .round(numofdecimals)`
*   `(cart.total_price * 100).floor # 1.3 => 1`
*   `(cart.total_price * 100).ceil # 1.3 => 2`
*   `(cart.total_price * 100).to_r #to rationals, e.g. 2.5 => 5/2`

我希望这有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-25T20:30:42.427

实际上有一种非常简单的方法可以做到这一点，直接从十进制开始，而无需先转换为浮点数。鉴于：

`decimal price = BigDecimal('100.00')`

您可以使用 BigDecimal 的 fix() 和 frac() 方法获取第一部分，乘以 100 并添加分数：

`price_in_cents = ((decimal_price.fix * 100) + decimal_price.frac).to_i`

另一种看似简单的可能性是使用字符串操作。您可以将小数转换为字符串，去掉句点，然后转换为整数，例如：

`price_in_cents = decimal_price.to_s.sub('.', '').to_i`

但这里的问题是 decimal_price.to_s == '100.0' 而不是 '100.00'。如果分数中有非零数字，那么它们将在转换中保留，否则会丢失一个。因此，如果 decimal_price == 111.11 则上述字符串操作将返回预期结果。

# c++ - 奇怪的未定义函数引用，函数调用不存在 C++

> ID：12546647
> 
> 赞同：-2
> 
> 时间：2012-09-22T18:40:31.600
> 
> 标签：c++, header

> **可能重复：**
> [对 void “function” C++ 的未定义引用](https://stackoverflow.com/questions/12546420/undefined-reference-to-void-function-c)

我得到错误：

```
undefined reference to `void Convolve<float>(CImageOf<float>, CImageOf<float>&, CImageOf<float>)'   features.cpp    /cv-pj      C/C++ Problem 
```

但是，在进行全局搜索时，我找不到任何我调用与这些类型进行卷积的实例。

这是我的标题中的内容：

```
template <class T>
void Convolve(CImageOf<T> src, CImageOf<T>& dst,
              CFloatImage kernel); 
```

有什么问题？请注意，这实际上是在 Windows 上编译的，但我使用的是 ubuntu 64bit gcc

编辑：我在 Eclipse 上，它显示错误在第 0 行。这是什么意思？

完整错误：

```
features.o: In function `computeHarrisValues(CImageOf<float>&, CImageOf<float>&)':
features.cpp:(.text+0x4f6): undefined reference to `void Convolve<float>(CImageOf<float>, CImageOf<float>&, CImageOf<float>)'
features.cpp:(.text+0x63e): undefined reference to `void Convolve<float>(CImageOf<float>, CImageOf<float>&, CImageOf<float>)'
features.cpp:(.text+0xa60): undefined reference to `void Convolve<float>(CImageOf<float>, CImageOf<float>&, CImageOf<float>)'
features.cpp:(.text+0xbd1): undefined reference to `void Convolve<float>(CImageOf<float>, CImageOf<float>&, CImageOf<float>)'
features.cpp:(.text+0xd42): undefined reference to `void Convolve<float>(CImageOf<float>, CImageOf<float>&, CImageOf<float>)'
features.o:features.cpp:(.text+0x460b): more undefined references to `void Convolve<float>(CImageOf<float>, CImageOf<float>&, CImageOf<float>)' follow
features.o: In function `ComputeMOPSDescriptors(CImageOf<float>&, FeatureSet&)':
features.cpp:(.text+0x533e): undefined reference to `void ConvolveSeparable<float>(CImageOf<float>, CImageOf<float>&, CImageOf<float>, CImageOf<float>, int)'
collect2: ld returned 1 exit status
make: *** [Features] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:43:58.457

```
template
void Convolve<float>(
   CImageOf<float> src,
   CImageOf<Float>& dst,
   CFloatImage kernel); 
```

# c# - ASP.net 上传/解密给用户后加密文件

> ID：12546652
> 
> 赞同：3
> 
> 时间：2012-09-22T18:40:57.367
> 
> 标签：c#, asp.net, vb.net, security, encryption

我正在对我的潜在客户正在与我讨论的可能项目进行一些研究和开发。

我正在考虑创建一个 asp.net 4.5 Web 应用程序，该应用程序将通过 Web 访问并保存一些非常敏感的信息。信息将通过 webApp 上传，文件存储在服务器上供以后查看/检索。我想确保信息被安全地上传和存储。为了做到这一点，我将建议在整个应用程序中始终使用 EV SSL 证书，并对文件（jpeg、pdf、txt）进行某种加密，以确保如果有人在服务器级别获得对应用程序的访问权限没有应用程序也无法直接查看文件，这是我寻找建议或改进的地方。

我的研究指导我对文件进行 AES 加密，这是否足以保护文件？是否应该在操作系统级别应用加密（win2008）？我应该将文件存储在数据库中吗？

这些文件必须在 webApp 上可供用户读取，并且可以在浏览器中查看。

如果需要任何进一步的信息，请询问！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:28:18.747

我在一个项目中也需要处理一些非常敏感的信息/文件。我们决定

1.  使用**https**
2.  ****使用 ssl 证书****加密**所有敏感数据/文件**

 ****现在我们***没有****在我们的数据库中保存文件，*尽管它是可能的。但是我看不到将其保存到数据库的任何大优势（*文件备份将单独完成*- 这可能是您的应用程序中的一个要点）。有关**在数据库中保存文件的***利弊*，请参阅[**StackOverflow 上的这个问题**](https://stackoverflow.com/questions/2458739/what-are-the-pros-and-cons-of-storing-files-in-a-database)**[](https://stackoverflow.com/questions/2458739/what-are-the-pros-and-cons-of-storing-files-in-a-database)**

 ****[**MSDN**](http://msdn.microsoft.com/en-us/library/ms229744.aspx)`How to encrypt using a X509`上有一个 cert示例，并且网络上有很多关于这个主题的好文章（[**codeproject.com**](http://www.codeproject.com/Articles/18920/Data-Encryption-Decryption-using-RSACryptoServiceP)，[**SO**](https://stackoverflow.com/questions/1776236/how-to-do-asymmetric-encryption-with-x509-certificates-and-c)，...）。[](http://msdn.microsoft.com/en-us/library/ms229744.aspx)**[](http://www.codeproject.com/Articles/18920/Data-Encryption-Decryption-using-RSACryptoServiceP)**[](https://stackoverflow.com/questions/1776236/how-to-do-asymmetric-encryption-with-x509-certificates-and-c)****

 ******虽然这是我们的方法，但可能有更好的解决方案。我想听听你选择什么样的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T18:52:47.817

由于您使用的是 SSL，因此传输数据已被加密。基本上，在 SSL 握手之后，数据会使用 AES 等算法进行对称加密。这样做主要是为了速度，公钥加密非常慢，因此使用诸如 RSA 之类的算法加密文件可能不是一个好主意，此外，现在很多英特尔处理器都支持芯片上的 AES，所以它会是使用起来非常快（这就是 BitLocker 的基础）。

您现在遇到的问题是一个经典的密钥管理问题，即如何在不影响安全性的情况下安全地存储和分发密钥？您可以做的一件事是根据用户密码 + salt 创建一个密钥，以便您的应用程序（在验证用户身份后）使用基于密码 + 一些随机 salt 值的算法重新生成密钥并将其保存在会话中。只有用户才能解密他们上传到系统中的数据。这样做的一个好的副作用是用户现在也无法读取其他用户的数据。但是，这样做有一个缺点，如果您的用户丢失了密码，则密钥及其文件将无法恢复。通常在这些情况下，您会做某种密钥托管，其中有一个受信任的第三方可以使用主密码存储和加密所有密钥，或者您是受信任方并使用某个主密钥加密所有密钥不是您的应用程序的一部分，而是存储在单独的安全系统上。另一个缺点是，当用户更改密码时，您必须对文件系统上的所有数据进行解密和重新加密，这可能是一个漫长的过程，具体取决于存储的数据量。

无论如何，如果您遇到钥匙被盗的情况，您应该保留某种应急计划。开始设计应用程序的一个好地方是查看 OWASP（开放 Web 应用程序安全项目）的设计元素[https://www.owasp.org/index.php/Cryptographic_Storage_Cheat_Sheet](https://www.owasp.org/index.php/Cryptographic_Storage_Cheat_Sheet)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T19:31:04.240

如果您使用私钥加密来保护文件，您仍然会遇到密钥必须在您的源中某处的问题。我想到的两种选择是：

1.  公钥加密 - 使用嵌入在 dll 中的公钥加密数据，并且机器上没有私钥。然后，您将在解密之前将文件带到其他地方。
2.  使用[DPI 函数](http://msdn.microsoft.com/en-us/library/aa380261%28VS.85%29.aspx)使用用户级密钥加密数据。然后没有明确的管理密钥，并且数据只能由以该用户身份运行的进程读取（因此您可能会更改您的应用程序池以使用计算机帐户运行）。**************

# jquery - 将点击存储到数据库表？

> ID：12546653
> 
> 赞同：-2
> 
> 时间：2012-09-22T18:40:57.850
> 
> 标签：jquery, ajax, database

如何使以下脚本将点击存储到数据库？我找到了这段代码，但是当我刷新浏览器时它不存储计数。

```
(function($) {
$('.btn-counter').on('click', function(event, count) {
event.preventDefault();

var $this = $(this),
    count = $this.attr('data-count'),
    active = $this.hasClass('active'),
    multiple = $this.hasClass('multiple-count');

// First method, allows to add custom function
// Use when you want to do an ajax request
/* if (multiple) {
    $this.attr('data-count', ++count);
    // Your code here
} else {
    $this.attr('data-count', active ? --count : ++count).toggleClass('active');
    // Your code here
} */

// Second method, use when ... I dunno when but it looks cool and that's why it is here
$.fn.noop = $.noop;
$this.attr('data-count',
    ! active || multiple ? ++count : --count
)[multiple ? 'noop' : 'toggleClass']('active');

})
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T18:48:57.720

...它没有您想要的功能，因为您将计数/数据存储在您的 DOM 对象中，一旦您刷新整个网页，它就会刷新并默认为初始状态。它不能像您所说的那样用作“数据库”。您可以改用`document.cookie`它，它将为您存储信息。但是，只要您的浏览器历史记录和 cookie 被删除，它就会被清除：无论是由用户调用还是由浏览器本身调用。您需要使用任何语言（PHP、ASP 等）与您持有的数据库交互的服务器端脚本，并将数据更新/插入到该数据库中。

# express - 使用 mongoose + express.js 对用户进行身份验证

> ID：12546657
> 
> 赞同：2
> 
> 时间：2012-09-22T18:41:30.307
> 
> 标签：express, mongoose

使用 Mongoose 和 ExpreeJS 对用户进行身份验证的最佳方法是什么。

我正在使用 mongoose 3.x，看起来这个包不再更新：[https ://github.com/bnoguchi/mongoose-auth](https://github.com/bnoguchi/mongoose-auth)

理想情况下，我也可以使用 twitter 和 facebook 对用户进行身份验证。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-23T13:41:34.633

我总是不喜欢对每个问题都使用插件或模块。只使用猫鼬你可以这样做：

为您的 mongoDB 配置提供一个 db.js

```
var mongoose = require('mongoose');
mongoose.connect("mongodb://...");
var userSchema = new mongoose.Schema({
  username: String,
  salt: String,
  hash: String
});
exports.User = mongoose.model("user", userSchema); 
```

使用 TJ 的[pass.js](https://github.com/visionmedia/express/blob/master/examples/auth/pass.js)文件来散列密码。它使用[crypto.pbkdf2](http://nodejs.org/api/crypto.html#crypto_crypto_pbkdf2_password_salt_iterations_keylen_callback)进行加密。

手动创建用户或使用表单允许自行注册：

```
var db = require('./db');
var pwd = require('./pwd');
var user = new db.User();
user.username = "Admin";
pwd.hash("adminPassword", function(err, salt, hash) {
  if (err) {
    console.log(err);
  }
  user.salt = salt;
  user.hash = hash;
  user.save(function(err) {
    if (err) {
      console.log(err);
    } else {
      console.log("user saved");
    }
  });
}); 
```

现在您的数据库中应该有一个用户名、加密密码和哈希。要检查登录，请使用中间件功能：

```
function authenticate(name, pass, fn) {
  db.User.findOne ({username: name}, function(err, user) {
    if (!user) return fn(new Error('cannot find user'));
    hash(pass, user.salt, function(err, hash){
      if (err) return fn(err);
      if (hash == user.hash) return fn(null, user);
      fn(new Error('invalid password'));
    })
  })
}

app.post('/login', function(req, res){
  authenticate(req.body.username, req.body.password, function(err, user){
    if (user) {
      req.session.regenerate(function(){
        req.session.user = user;
        res.redirect('back');
      });
    } else {
      res.redirect('login');
    }
  });
});

// middleware
function restrict(req, res, next) {
  if (req.session.user) {
    next();
  } else {
    req.session.error = 'Access denied!';
    res.redirect('/login');
  }
}

// route with restrict middleware
app.get('/restricted', restrict, function(req, res){
  res.send('Wahoo! restricted area');
}); 
```

大部分代码取自[auth](https://github.com/visionmedia/express/tree/master/examples/auth)示例，我添加了 mongoose 的内容。希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T01:40:42.550

在学习如何使用 MongoDB 和 Node 执行此操作时，我使用了这个示例：

[https://github.com/braitsch/node-login](https://github.com/braitsch/node-login)

我认为这是自己进行用户身份验证的一个非常好的孤立示例。它使用 bcrypt 对用户密码进行散列和加盐。如果您查看[AccountManager](https://github.com/braitsch/node-login/blob/master/app/server/modules/account-manager.js)内部，您可以看到它是如何与 Mongo 数据库一起工作的。

但是，如果您希望使用其他策略进行身份验证，我建议您查看[Passport.js](http://passportjs.org/)。我还没有机会使用它，但我认为它看起来相当发达且足够简单。也许您可以根据您的经验更新此页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T14:29:26.980

[Everyauth](https://github.com/bnoguchi/everyauth)是另一种选择，特别是如果您正在寻找通过 twitter 和 facebook 等第三方进行身份验证的灵活性和支持。

请参阅作者在另一个 SO 问题中的[这篇文章，以全面了解其功能和优势。](https://stackoverflow.com/a/6197767/1259510)

# algorithm - 如何将 IF 语句应用于矩阵的所有行（Matlab）

> ID：12546663
> 
> 赞同：2
> 
> 时间：2012-09-22T18:42:12.780
> 
> 标签：algorithm, matlab, matrix, vectorization

我希望将 IF 语句应用于如下矩阵：

一个=

```
 2     5     2     4     8
 2     5     0     0     0
 2     4     0     0     0
 6     8     0     0     0
 9     5     0     0     0
 4     7     0     0     0
 8     1     0     0     0 
```

我到目前为止是这样的：

```
if A(1,2)>A(1,4),
A(2,3)=A(1,4);
A(2,4)=(A(1,5))+1;
end

if A(1,2)<A(1,4),
A(2,4)=(A(1,4))-1;
A(2,4)=(A(1,4))-(A(2,3));
end 
```

在上述代码中，我只比较了第一行的第 2 列和第 4 列。然后第一行构造第二行。

我希望然后比较第二行并使用它来构建第三行......等等......在所有 7 行中。

我可以添加一个 1:n 来修改它吗？

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:23:08.223

您可以编写以下循环

```
for i=1:size(A, 1)-1
    if A(i,2)>A(i,4),
        A(i+1,3)=A(i,4);
        A(i+1,4)=A(i,5)+1;
    end 
    if A(i,2)<A(i,4),
        A(i+1,4)=A(i,4)-1;
        % wrong index here? You assign twice to the same A entry.
        % the above line has no effect...
        A(i+1,4)=A(i,4)-A(i+1,3);
    end 
end 
```

# java - 注解处理器，修改注解类

> ID：12546664
> 
> 赞同：2
> 
> 时间：2012-09-22T18:42:20.257
> 
> 标签：java, annotations

我浏览了各种教程并最终成功创建了我的注释，但我正在努力实现它。

我的想法如下：

1.  注释类
2.  注释处理器生成带有一些样板代码的备份类。
3.  使带注释的类扩展备份类，以便用户可以在需要时覆盖方法。

我在 1 和 2 上取得了成功，但不确定 3 是否可行。我想做类似@WebService 的事情，在后台生成大量代码，但用户仍然可以使用带注释的类进行编码。

任何想法都非常受欢迎。我将同时开始查看@WebService，但我怀疑它太复杂了。

**编辑**：如果需要，可以在[此处](https://bitbucket.org/javydreamercsw/jwrestling/src)找到注释和处理器的来源。

# android - 安卓。混淆是否使用广播接收器或服务来接收短信

> ID：12546670
> 
> 赞同：1
> 
> 时间：2012-09-22T18:43:17.603
> 
> 标签：android, service, sms, broadcastreceiver

我有这个应用程序，它每 2 分钟接收一次消息并更新数据库，而其他活动正在无缝运行，完美的方式应该是什么？我应该使用服务来接收消息还是可以使用简单的活动？另外，请提供一些示例或教程的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T05:24:53.040

使用广播接收器。因为即使没有收到消息，服务也会继续运行。而广播接收器将只收听您注册的意图。

这是有关如何使用广播接收器的链接[http://androidword.blogspot.in/2010/10/how-to-use-broadcast-receiver.html](http://androidword.blogspot.in/2010/10/how-to-use-broadcast-receiver.html)

# javascript - 使用 Javascript 读取 XML 文档

> ID：12546677
> 
> 赞同：0
> 
> 时间：2012-09-22T18:43:39.070
> 
> 标签：javascript, xml, parsing

我正在读取托管在服务器上的 XML 数据，然后将其显示在 HTML 文档中，为此我执行以下操作：

```
var a1 = xml.getElementsByTagName('a1')[0].childNodes[0];
var A1 = document.getElementById("A1");
A1.innerHTML = a1.nodeValue; 
```

其中 a1 是存储在服务器上的 XML 的 ID。这个过程我做了很多次，唯一改变的是字段的id，即我有这个：

```
var a1 = xml.getElementsByTagName('a1')[0].childNodes[0];
var a2 = xml.getElementsByTagName('a2')[0].childNodes[0];
var a3 = xml.getElementsByTagName('a3')[0].childNodes[0];
var a4 = xml.getElementsByTagName('a4')[0].childNodes[0];
var a5 = xml.getElementsByTagName('a5')[0].childNodes[0];

var A1 = document.getElementById("A1");
var A2 = document.getElementById("A2");
var A3 = document.getElementById("A3");
var A4 = document.getElementById("A4");
var A5 = document.getElementById("A5");

A1.innerHTML = a1.nodeValue;
A2.innerHTML = a2.nodeValue;
A3.innerHTML = a3.nodeValue;
A4.innerHTML = a4.nodeValue;
A5.innerHTML = a5.nodeValue; 
```

一切正常并按预期带来数据，但我的问题是，没有办法优化代码以不使用尽可能多的行，即使用类似

```
for (i=1;i<=5;i++){
    var a[i] = xml.getElementsByTagName('a[i]')[0].childNodes[0];
} 
```

我不知道，这是发生在我身上的事情，我对此很陌生并且已经产生了怀疑，我感谢任何信息，问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:45:23.557

是`a[i]`从哪里来的？您所需要的只是字符串连接：

```
for(var i = 0; i <= 5; i++) {
    document.getElementById('a' + i).innerHTML = xml.getElementsByTagName('a' + i)[0].firstChild.nodeValue;
} 
```

# css - HTML 5 中的图像对齐属性

> ID：12546682
> 
> 赞同：17
> 
> 时间：2012-09-22T18:43:56.277
> 
> 标签：css, html

由于 align 属性已被弃用。`<img align="middle">`HTML 5中的替换是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-22T18:45:23.710

使用 CSS 的[`vertical-align`](https://developer.mozilla.org/en-US/docs/CSS/vertical-align)属性，特别是`vertical-align: middle`

```
<img src="image.png" style="vertical-align:middle" /> 
```

[演示](http://jsbin.com/inijem/1)

[有关使用垂直对齐属性对齐内联图像](http://www.maxdesign.com.au/articles/vertical-align/)的更多信息，请参阅此页面

# virtualenv - OSX 10.8 上的 virtualenv。install_name_tool 的问题

> ID：12546684
> 
> 赞同：0
> 
> 时间：2012-09-22T18:43:59.290
> 
> 标签：virtualenv, osx-mountain-lion

我正在尝试在 OSX 10.8 上运行 virtualenv，但出现以下错误

```
aidan$ virtualenv --distribute bbhq
New python executable in bbhq/bin/python
Usage: install_name_tool [-change old new] ... [-rpath old new] ... [-add_rpath new] ... [-delete_rpath old] ... [-id name] input
Traceback (most recent call last):
  File "/usr/local/bin/virtualenv", line 8, in <module>
    load_entry_point('virtualenv==1.7', 'console_scripts', 'virtualenv')()
  File "/Library/Python/2.7/site-packages/virtualenv-1.7-py2.7.egg/virtualenv.py", line 928, in main
    never_download=options.never_download)
  File "/Library/Python/2.7/site-packages/virtualenv-1.7-py2.7.egg/virtualenv.py", line 1029, in create_environment
    site_packages=site_packages, clear=clear))
  File "/Library/Python/2.7/site-packages/virtualenv-1.7-py2.7.egg/virtualenv.py", line 1321, in install_python
    install_name_tool = get_install_name_tool()
  File "/Library/Python/2.7/site-packages/virtualenv-1.7-py2.7.egg/virtualenv.py", line 1559, in get_install_name_tool
    raise ValueError("your version of OSX wasn't planned for.  "
ValueError: your version of OSX wasn't planned for.  File a bug against:  https://github.com/pypa/virtualenv/issues/168 
```

我正在努力弄清楚这里发生了什么。我已经安装了 Xcode（连同命令行工具），我可以在`/usr/bin/install_name_tool`. 我使用 easy_install 安装了虚拟环境（这似乎很好）。

virtualenv 正在创建目录和一些文件。但它没有正常工作 - 那里没有激活脚本。

有什么想法吗？（看起来很像 virtualenv 在 osx 10.8 上根本不起作用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:29:58.367

恐怕我从来没有弄清楚是什么导致了这个问题。我卸载了 virtualenv `sudo pip uninstall virtualenv`，然后重新安装了它`sudo pip install virtualenv`。这解决了一切。virtualenv 按预期工作，没有上述错误。

看起来有不少人遇到了问题（通常是在升级到 Mountain Lion 时），并且有一些人在博客上介绍了设置过程。谷歌搜索 'virtualenv "mountain lion"' 带来了很多东西。

# javascript - 数组中奇怪的 JavaScript 对象赋值

> ID：12546686
> 
> 赞同：1
> 
> 时间：2012-09-22T18:44:14.143
> 
> 标签：javascript, javascript-objects

我在 JavaScript 中将对象分配给数组时遇到了一个奇怪的问题，这是完整的代码

```
var co = {'yAxis':10};

var dynCharts = new Array();

for (var x=0; x<2; x++){                  
    dynCharts[x] = co;   
}
//assigning to first array only 
dynCharts[0].yAxis = { 'a':'1'};
//now alert second array
alert(dynCharts[1].yAxis.a); 
```

如果您在上面的示例代码首先我有一个名为 co 的对象，那么我将该对象分配给数组。现在我想更改第一个数组的名为 yAxis 的属性，但它也在更改第二个数组的 yAxis 对象的值。

这段代码的 JSfiddle 在这里：http: [//jsfiddle.net/qvKaZ/](http://jsfiddle.net/qvKaZ/)

有人可以帮助我为什么它会以财产方式发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:47:19.883

在数组的所有单元格中都有相同的对象（即相同的实例）。

您需要复制（克隆） co 以便一项更改不适用于所有单元格：

```
for (var x=0; x<2; x++){                  
    dynCharts[x] = {yAxis:co.yAxis}; // this puts in dynCharts[x] a copy of co
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T18:48:46.063

数组中的每个对象都是对该对象的引用。如果您完全更改对象，则数组中的所有值都将显示为已更新。您需要在循环的每次迭代中创建一个新对象或克隆现有对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T18:57:29.377

一种方法是使用`Object.create`，它将创建一个继承自 的新对象`co`。

```
for (var x=0; x<2; x++){                  
    dynCharts[x] = Object.create(co);   
} 
```

一个优点是您可以随时更新`co`，并且从它继承的所有对象都会看到更新，只要更新的属性没有在实际对象上隐藏即可。

要处理旧版浏览器，请包含此代码。

```
if (!Object.create) {
   Object.create = function(proto) {
       Object.create.F.prototype = proto;
       return new Object.create.F;
   };
   Object.create.F = function(){};
} 
```

它不是完全合规的替代品，但适用于上述基本情况

# java - Mule ESB：连接到 https 服务

> ID：12546700
> 
> 赞同：2
> 
> 时间：2012-09-22T18:45:49.153
> 
> 标签：java, service, https, esb, mule

有人可以向我展示一个如何创建 mule 流以将请求发送到 https 服务的小示例吗？我尝试这样做，但出现以下错误：

```
INFO 2012-09-21 21:40:40,980 [[myapp_kareo].connector.http.mule.default.receiver.02] org.mule.transport.http.transformers.ObjectToHttpClientMethodRequest: Content-Type not set on outgoing request, defaulting to: text/plain
WARN 2012-09-21 21:40:41,081 [[myapp_kareo].connector.http.mule.default.receiver.02] org.mule.transformer.simple.ObjectToString: Could not close stream
java.io.IOException: Stream closed
at java.io.BufferedInputStream.getBufIfOpen(BufferedInputStream.java:145)
at java.io.BufferedInputStream.read(BufferedInputStream.java:308) at org.apache.commons.httpclient.ContentLengthInputStream.read(ContentLengthInputStream.java:170) 
```

ETC...

我至少看到两件奇怪的事情：

*   `org.mule.transport.http.transformers.ObjectToHttpClientMethodRequest`: Content-Type 未在传出请求上设置，默认为：text/plain - 我不知道从哪里得到这个，所有端点上的内容类型都设置为 text/xml。
*   `org.mule.transformer.simple.ObjectToString`: 无法关闭流 - 我无法解释这是从哪里来的......

我的xml配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<https:connector name="HTTP_HTTPS" cookieSpec="netscape" validateConnections="true" sendBufferSize="0" receiveBufferSize="0" receiveBacklog="0" clientSoTimeout="10000" serverSoTimeout="10000" socketSoLinger="0" proxyHostname="localhost" proxyPort="80" doc:name="HTTP\HTTPS">
    <https:tls-key-store path="/src/main/app/keystore/javakeystore.jks" storePassword="somepassword"/>
</https:connector>
<flow name="KareoFlow1" doc:name="KareoFlow1">
    <http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8081" path="kareo" contentType="text/xml" doc:name="SomeApp"/>
    <https:outbound-endpoint exchange-pattern="request-response" host="webservice.kareo.com/" port="443" path="services/soap/2.1/KareoServices.svc" connector-ref="HTTP_HTTPS" contentType="text/xml" doc:name="Kareo"/>
    <echo-component doc:name="Echo"/>
</flow> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-24T06:47:32.653

向 HTTPS 发送请求的简单示例如下：-

```
<https:connector name="httpsBSConnector" doc:name="HTTP\HTTPS" clientSoTimeout="10000" cookieSpec="netscape" proxyHostname="proxy-nc.abc.com" proxyPort="80" receiveBacklog="0" receiveBufferSize="0" sendBufferSize="0" serverSoTimeout="10000" socketSoLinger="0" validateConnections="true">
     <https:tls-key-store path="${keystore.path}" keyPassword="${keystore.password}" storePassword="${keystore.password}"/>
     <https:tls-server path="${truststore.path}" storePassword="${truststore.password}"/>
</https:connector>

<https:outbound-endpoint address="https://${url}:${port}${path}" doc:name="getDataCall" exchange-pattern="request-response" method="POST" connector-ref="httpsBSConnector" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T22:05:55.547

这位先生似乎解决了他自己设置 https 服务的问题。也许从他的例子中提取一些信息可以指导你。他有一个不同的错误，至于您的流错误，我想说端口已关闭。

[http://forum.mulesoft.org/mulesoft/topics/https_connector_working_example_wanted](http://forum.mulesoft.org/mulesoft/topics/https_connector_working_example_wanted)

包括你的骡子配置会让其他人帮助你更多。

# python - 在 Python 中处理大量数据

> ID：12546702
> 
> 赞同：7
> 
> 时间：2012-09-22T18:45:58.827
> 
> 标签：python, csv, amazon-ec2, machine-learning, scientific-computing

我一直在尝试处理大量数据（几 GB），但我的个人计算机拒绝在合理的时间跨度内完成，所以我想知道我有什么选择？我使用的是 python 的[csv.reader](http://docs.python.org/library/csv.html)，但即使获取 200,000 行也非常缓慢。然后我将这些数据迁移到一个[sqlite](http://www.sqlite.org/faq.html)数据库，它检索结果的速度更快，并且不使用太多内存，但速度缓慢仍然是一个主要问题。

所以，再次......我有什么选择来处理这些数据？我想知道使用亚马逊的[现货实例](http://aws.amazon.com/ec2/spot-instances/)，这似乎对这种目的很有用，但也许还有其他解决方案可供探索。

假设现场实例是一个不错的选择，并且考虑到我以前从未使用过它们，我想问一下我对它们有什么期望？有没有人有使用它们做这种事情的经验？如果是这样，您的工作流程是什么？我想我可以找到一些博客文章，详细介绍科学计算、图像处理或类似的工作流程，但我没有找到任何东西，所以如果你能解释一下或指出一些链接，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T09:18:46.053

我会尝试在[`numpy`](http://numpy.scipy.org/)本地使用您的大型数据集。与使用向量化的 numpy 函数相比，Numpy 数组应该使用更少的内存`csv.reader`，并且计算时间应该更快。

但是，读取文件时可能存在内存问题。 [`numpy.loadtxt`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html)或者[`numpy.genfromtxt`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html#numpy.genfromtxt)在读取文件时也会消耗大量内存。[如果这是一个问题，这里](http://wesmckinney.com/blog/?p=543)会比较一些（全新的）替代解析器引擎。根据这篇文章，新[`pandas`](http://pandas.pydata.org/)的（建立在 numpy 之上的库）解析器似乎是一种选择。

正如评论中提到的，我还建议您在读取文件一次时将数据存储为 HDF5 等二进制格式。根据我的经验，从 HDF5 文件加载数据非常快（在您的情况下，知道它与 sqlite 相比有多快会很有趣）。我知道将数组保存为 HDF5 的最简单方法是使用 pandas

```
import pandas as pd

data = pd.read_csv(filename, options...)
store = pd.HDFStore('data.h5')
store['mydata'] = data
store.close() 
```

加载数据比简单

```
import pandas as pd

store = pd.HDFStore('data.h5')
data = store['mydata']
store.close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:10:51.403

如果你必须使用 python，你可以试试[dumbo](https://github.com/klbostee/dumbo/wiki)，它允许你在 python 中运行 Hadoop 程序。这很容易开始。然后，您可以编写自己的代码来执行 hadoop 流式处理来处理您的大数据。请检查它的简短教程：[https ://github.com/klbostee/dumbo/wiki/Short-tutorial](https://github.com/klbostee/dumbo/wiki/Short-tutorial)

类似的来自 yelp：[https ://github.com/Yelp/mrjob](https://github.com/Yelp/mrjob)

# python - Python 中的 UTF-32

> ID：12546705
> 
> 赞同：3
> 
> 时间：2012-09-22T18:46:12.543
> 
> 标签：python, unicode

我无法显示 unicode 项目`u'\u201d'`。我对其他 unicode 项目没有问题。我使用了 UTF-8，但随后这个字符出现并在我的代码上下雨了。我在解释器中尝试了不同的东西。但基本上在哪里：

```
c = u'\u201d' 
```

我收到此错误：

```
Traceback (most recent call last):
File "<pyshell#154>", line 1, in <module>
    c.decode('utf-32')
  File "C:\Python27\lib\encodings\utf_32.py", line 11, in decode
    return codecs.utf_32_decode(input, errors, True)
UnicodeEncodeError: 'ascii' codec can't encode character u'\u201d' in position 0: ordinal not in range(128) 
```

我需要在 GUI 中显示它，以便检查输出，然后将其存储为纯文本。 [在 python 中转换 unicode 字符串](https://stackoverflow.com/questions/10264618/transform-unicode-string-in-python) 解释了一点，但是我仍然明显遗漏了一些东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T18:56:12.280

如果您遇到此异常，那么您正在尝试调用`.decode()`unicode 字符串。您应该只调用`.decode()`一个字节字符串，并且只调用`.encode()`一个 unicode 字符串。否则，解释器将首先使用默认编解码器（通常是“ascii”）隐式编码或解码字符串，这是个坏消息。

一般来说，我建议仔细阅读[http](http://farmdev.com/talks/unicode/) ://farmdev.com/talks/unicode/ ...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T19:22:49.687

如果您已经阅读[了每个软件开发人员绝对、肯定必须了解 Unicode 和字符集（没有借口！）的绝对最低要求，](http://www.joelonsoftware.com/articles/Unicode.html)您就会知道**没有纯文本之类的东西**..

但是，由于在您坚持要追求的东西和人们试图解释的东西之间似乎没有达成共识，我开始怀疑“将符号转换为纯文本”是否意味着类似“将 Unicode 右双引号 (U+201D) 替换为引号 (U+0022)，然后编码为 ASCII”。例如，类似：

```
In [45]: s = u"“curly quoted”"

In [46]: s
Out[46]: u'\u201ccurly quoted\u201d'

In [47]: print s
“curly quoted” 
```

然后手动进行替换（搜索“unicode string sanitize”，您会发现更好的配方，包括针对不同字符的更多“降级”）：

```
In [51]: fixer = dict.fromkeys([0x201c, 0x201d], u'"')

In [52]: s.translate(fixer)
Out[52]: u'"curly quoted"'

In [53]: s.translate(fixer).encode("ascii", "replace")
Out[53]: '"curly quoted"' 
```

“替换”可以防止任何我们没有修复的东西。

# c++ - 适合初学者的良好调试器教程

> ID：12546706
> 
> 赞同：8
> 
> 时间：2012-09-22T18:46:14.163
> 
> 标签：c++, debugging, codeblocks

有谁知道在 C++ 中使用调试器的好的初学者教程？

我觉得好像我错过了很多。我知道如何单步执行代码并查看局部变量（尽管这常常会给我带来问题，但有时它似乎有自己的想法！）。

其他一切（调用堆栈、运行线程等）对我来说毫无意义，而且我还没有可以破译的回溯（与示例问题中的分段错误不同，当回溯总是指向代码中的某个函数时！ ）。基本上我只插入 cout 语句并不会更好，这通常是我最终会做的:)

我正在使用 Code::Blocks，但如果有一个非常好的教程，我愿意暂时更改 IDE 来学习调试器。我发现的教程要么只是解释了如何逐步完成我已经知道的代码，要么它们非常全面地解释了一切，这对我的小大脑来说只是压倒性的，在这个阶段并不是真正必要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T08:01:49.873

我建议从以下Visual Studio 2010[教程](http://www.codeproject.com/Articles/79508/Mastering-Debugging-in-Visual-Studio-2010-A-Beginn)开始。它包含有关[调用堆栈](http://www.codeproject.com/Articles/79508/Mastering-Debugging-in-Visual-Studio-2010-A-Beginn#heading0031)、[调试多线程程序](http://www.codeproject.com/Articles/79508/Mastering-Debugging-in-Visual-Studio-2010-A-Beginn#heading0032)和其他可能需要的信息。Visual Studio 2010 的速成版是免费提供的，AFAIK 其调试器与商业版具有完全相同的功能。

# android - 斜体不起作用

> ID：12546709
> 
> 赞同：0
> 
> 时间：2012-09-22T18:46:26.387
> 
> 标签：android, android-layout

我有我的简单 XML 文件，并将其设置`android:typeface`为`italic`. 但是，当我这样做时，我想要：

1.  文本字段从编辑器中消失
2.  在设备上运行期间，文本显示正常（非斜体）

斜体不再支持还是我应该做一些具体的事情？

编辑

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  android:layout_width="fill_parent"
  android:layout_height="fill_parent" xmlns:android="http://schemas.android.com/apk/res/android" android:gravity="center_horizontal" android:orientation="vertical">
        <LinearLayout android:id="@+id/layoutHeader" android:layout_width="fill_parent"
        android:layout_height="wrap_content">
        <include android:id="@+id/myHeader" layout="@layout/custom_property_row_view" />

    </LinearLayout>

    <ListView android:id="@+id/lvProp" android:layout_width="fill_parent" android:layout_height="wrap_content"></ListView>
      <TextView android:id="@+id/tvEmptyTasks" android:layout_width="wrap_content" android:layout_height="wrap_content" 
        android:text="There are no Tasks added!" android:visibility="invisible" android:textStyle="italic"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T18:48:57.720

改为设置

```
android:textStyle="italic" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:21:50.857

```
textView.setTypeface(null, Typeface.BOLD_ITALIC);
textView.setTypeface(null, Typeface.BOLD);
textView.setTypeface(null, Typeface.ITALIC); 
```

背后的代码

# asp.net-mvc-3 - 将 Telerik MVC Combobox 绑定到模型

> ID：12546710
> 
> 赞同：0
> 
> 时间：2012-09-22T18:46:49.890
> 
> 标签：asp.net-mvc-3, combobox, telerik-mvc

我的应用程序是 asp.net MVC，试图将 Telerik MVC Combobox 绑定到模型。这是模型：

```
public class Person
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public bool DisplayBold { get; set; }
        public string Value
        {
            get
            {
                return string.Format("{0}|{1}", this.Id, this.DisplayBold.ToString());
            }
        }
    } 
```

在控制器中：

```
 var people = new List<Person>();
        people.Add(new Person { Id = 1, Name = "John Doe", DisplayBold = true });
        people.Add(new Person { Id = 2, Name = "Jayne Doe", DisplayBold = false });
        ViewData["people"] = people;
        return View(); 
```

我确实得到了价值观。

在视图中：

```
<%= Html.Telerik().ComboBox()
       .Name("ComboBox")
           .BindTo((IEnumerable<SelectListItem>)ViewData["people"])
%> 
```

我收到以下错误：

```
Unable to cast object of type 'System.Collections.Generic.List`1[caseprog.Models.Person]' to type 'System.Collections.Generic.IEnumerable`1[System.Web.Mvc.SelectListItem]'. 
```

我会很感激你的建议。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:19:13.420

您不能只将 List of People 转换为`IEnumerable`of `SelectListItem`。它们是两种不同的东西。

相反，您需要将列表转换为`SelectListItem`. 您可以通过多种方式做到这一点，但这个应该可以工作：

```
.BindTo(new SelectList((IEnumerable<Person>)ViewData["people"], "Id", "Name")) 
```

# c - 当循环迭代次数不恒定时，分支预测器能否完美预测？

> ID：12546713
> 
> 赞同：0
> 
> 时间：2012-09-22T18:47:11.733
> 
> 标签：c, assembly, x86, branch-prediction

下面的代码会在假设 Intel Core i7 时产生分支错误预测惩罚吗？

```
for(i = 0, count = *ptr; i < count; i++) {
    // do something
} 
```

计数可以是 0、1 或 2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:38:19.297

如果 count 随机变化，则无法预测循环条件。如果它以某种模式运行 - 让我们重复说 0、1、2、1 - 它可以在 core2 或 i7 上完美预测。对于其他模式，这取决于。

有关更详细的说明，请参阅“分支预测”一章[中的 Intel、AMD 和 VIA CPU 的微架构：汇编程序员和编译器制造商的优化指南。](http://www.agner.org/optimize/microarchitecture.pdf)

# emacs - 以其他用户身份在其他机器上使用 Emacs server 和 emacsclient

> ID：12546722
> 
> 赞同：55
> 
> 时间：2012-09-22T18:48:31.177
> 
> 标签：emacs, remote-access, tmux, collaboration, emacsclient

我知道在`(start-server)`现有的 Emacs 会话中调用之后，我可以使用`emacsclient -c`（在同一台计算机上）创建连接到该服务器的新帧，以便由创建的每个新帧`emacsclient`都可以访问同一组共享状态（例如缓冲区）。

我发现的大多数文档都集中在“让我快速访问我的本地 Emacs”用例上，所以有两件事我还没有看到任何细节：

1.  可以访问由*其他*`emacsclient -c`用户启动的 Emacs 服务器，还是硬连线只能检测由我自己的用户启动的会话？

**   Emacs 服务器（直接或间接）是否支持远程连接？也就是说，是否有某种方法可以设置 Emacs（可能涉及 SSH），允许`emacsclient -c`对*远程*机器的调用访问我的 Emacs 服务器的*本地状态？** 

 *（如果您还没有猜到，我最终想做的是结合上述两种技术来提供基本的协作编辑支持。）

* * *

这是一个现实世界的问题，所以这就是我正在处理的问题：

*   必要的功能应该已经内置在 Emacs 中（23.3.1，64 位）。我可以从标准的 Ubuntu 存储库扩展到 Emacs 扩展，但我不希望这样做。（可悲的是，我认为排除了*Rudel*。）
*   没有新用户或用户欺骗。解决方案应该使用现有的用户帐户集，并且用户不得假装是其他用户（例如通过`su`或`ssh`）。

如果有什么不同的话，这些机器在私有 LAN 上，安装（并运行）OpenSSH 客户端和服务器，所有用户都可以连接到（他们自己的帐户）所有机器，但他们没有共享文件系统。

* * *

那么，有谁知道 Emacs 服务器是否可以

*   授予其他用户访问权限，或
*   提供远程访问？

编辑

正如 rwb 的回答中所评论的那样，很明显，通过运行在本地打开的新窗口`emacsclient -c`实际上是由*远程*Emacs 服务器进程创建的。也就是说，`emacsclient`只是简单地触发服务器中的相关行为。这会导致一些显示设置不正确的问题，因为服务器通常无法访问本地桌面（见下文）。但是，如果我使用以下命令序列，我现在可以连接到远程 Emacs 会话：

在一个终端中，`1.22.333.44`IP 地址在哪里`remotehost`：

```
ssh -t -X remotehost \
  "emacs -nw --eval
   '(progn (setq server-host \"1.22.333.44\" server-use-tcp t) (server-start))'" 
```

然后在另一个（在同一台机器上）：

```
scp remotehost:.emacs.d/server/server /tmp/server-file
DISPLAY=localhost:10 emacsclient -c -f /tmp/server-file 
```

该`emacsclient`命令使远程 Emacs 服务器（它可以找到 in 的详细信息`/tmp/server-file`）打开一个图形 Emacs 窗口（在本地显示器上），该窗口与远程主机上的 Emacs 会话共享状态。

由于远程 Emacs 服务器是通过 启动的`ssh -X`，因此 SSH 为它提供了通过“假”显示访问我的本地显示的权限`:10`。因此，`DISPLAY=:10`传递给它（通过`emacsclient`）会导致在我的本地桌面上打开一个窗口。

* * *

虽然上面的方法确实勾选了“在远程机器上运行 Emacs 服务器，使用`emacsclient`本地连接到它”框，但它非常有限。实际上，以单个用户的身份在本地运行服务器和客户端并没有太大区别：唯一的区别是服务器现在是远程的，因此可以访问不同的系统资源。

不幸的是，通过启动`ssh -X`是我能够在另一台机器的 X 服务器上成功打开窗口的唯一方法：

*   指定一个 basic`DISPLAY=remote:0`无处可去（因为 Ubuntu X 服务器是使用该`-nolisten tcp`选项启动的）。

*   通过 SSH 连接然后使用`DISPLAY=:0`也会失败，但这一次只是因为缺少合适的身份验证凭据。（无论如何，我相信是这样的：错误消息神秘地说`No protocol specified`/ `Can't open display`。）

我认为找到解决第二个问题的方法可能会让我更接近解决方案。

* * *

阅读了[http://comments.gmane.org/gmane.emacs.devel/103350](http://comments.gmane.org/gmane.emacs.devel/103350)上的帖子（从 '25 Oct 14:50' 帖子开始，大约一半）我开始怀疑这是否可能是Emacs 不能做的罕见事情之一（即不可能 ;-) ）。

但是，如果有人确实有办法在没有上述权限错误的情况下提供对远程 X 显示器的访问，我仍然愿意说服......

**TL;博士**

正如 rwb 的回答所指出的那样，我上面关于 Emacs 是否可以授予远程访问的问题让事情倒退了。Emacs 授予其他用户访问权限并没有真正的问题（`server-use-tcp`并且适当`server-file`地处理这一点）：问题是**如何允许一台机器上的进程在其他用户的 X 显示器上打开新的 X 窗口**（具体来说，Emacs 正在运行`(start-server)`需要为通过`emacsclient -c`) 要求它的用户打开窗口。这个答案超出了这个问题的范围。

**替代解决方案**

作为一种解决方法，我们使用以下方法：

*   机器0：`tmux -S /tmp/shared-tmux-socket new-session`
*   机器1..机器N：`ssh -t machine0 tmux -S /tmp/shared-tmux-socket attach`

具有适当的文件权限`/tmp/shared-tmux-socket`。

然后我们在共享终端中运行一个文本模式的 Emacs。:-) 这确实引发了一些用户欺骗问题，但至少主人可以看到客人所做的一切。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-23T04:31:30.860

这应该为您想要的东西提供一个起点。

从 info 节点*(emacs) emacsclient 选项*

```
`--server-file=SERVER-FILE'
     Specify a "server file" for connecting to an Emacs server via TCP.

     An Emacs server usually uses an operating system feature called a
     "local socket" to listen for connections.  Some operating systems,
     such as Microsoft Windows, do not support local sockets; in that
     case, Emacs uses TCP instead.  When you start the Emacs server,
     Emacs creates a server file containing some TCP information that
     `emacsclient' needs for making the connection.  By default, the
     server file is in `~/.emacs.d/server/'.  On Microsoft Windows, if
     `emacsclient' does not find the server file there, it looks in the
     `.emacs.d/server/' subdirectory of the directory pointed to by the
     `APPDATA' environment variable.  You can tell `emacsclient' to use
     a specific server file with the `-f' or `--server-file' option, or
     by setting the `EMACS_SERVER_FILE' environment variable.

     Even if local sockets are available, you can tell Emacs to use TCP
     by setting the variable `server-use-tcp' to `t'.  One advantage of
     TCP is that the server can accept connections from remote machines.
     For this to work, you must (i) set the variable `server-host' to
     the hostname or IP address of the machine on which the Emacs server
     runs, and (ii) provide `emacsclient' with the server file.  (One
     convenient way to do the latter is to put the server file on a
     networked file system such as NFS.) 
```

您可能还想查看变量`server-auth-dir`，`server-auth-key`并且`server-port`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-01T20:00:46.777

我认为根据定义，您所要求的内容是不可能的，因为如果您让远程用户不受限制地访问您的 Emacs，这与让远程用户通过 ssh 访问 shell 一样多的“用户欺骗”。说清楚，从安全的角度来看，这可能是一个坏主意。

此外，让两个用户访问一个 Emacs 的结果并不像您希望的那样好。它的设计并未考虑同时访问。自从我尝试它以来已经有好几年了，所以事情可能会有所进展，但是当我这样做时，至少可以说是古怪的。

不过，我会尽力回答你的问题。

听起来您正在考虑从后到前，因为与直觉相反，在网络术语中，X11 显示器是服务器，而 X11 应用程序是客户端。这是令人惊讶的，因为通常显示对用户来说是本地的，并且应用程序在某个远程服务器上运行。

您可以指示正在运行的 emacs 连接到远程显示器并使用`M-x make-frame-on-display`. 为此，该显示器的所有者需要授予您对其的访问权限。

我们将假设`host-l`是运行 Emacs 的计算机，并且您希望它可供 display 0 on 的用户访问`host-r`。请注意，您已经说过您不想使用 SSH 转发，因此遵循此方法将导致所有流量通过未加密的网络。

首先，确保显示器`host-r:0`正在接受 TCP 连接。您没有提及您的操作系统，但这可能是 Unix 上的默认设置，并且可能不在 Linux 上（出于安全原因）。例如，如果以下提及，`-nolisten tcp`则您需要更改此配置。

```
host-r$ ps -ef | grep X 
```

接下来，让 host-r 的用户运行以下命令，并将输出发送给您。如果您选择，请务必警告他们，这将允许您完全控制他们当前的桌面会话。

```
host-r$ xauth list $DISPLAY
host-r/unix:0  MIT-MAGIC-COOKIE-1  01234567890abcdef0123456789abcd 
```

这实际上是显示器的“密码”。在 上`host-l`，将它放在 Emacs 能够找到它的地方：

```
host-l$ xauth add host-r:0 MIT-MAGIC-COOKIE-1  01234567890abcdef0123456789abcd 
```

现在输入`M-x make-frame-on-display host-r:0`，远程显示器上应该会弹出一个 Emacs 窗口。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-19T16:47:29.673

Aaron Gallagher 实现了一个解决方案： http: [//blog.habnab.it/blog/2013/06/25/emacsclient-and-tramp/](http://blog.habnab.it/blog/2013/06/25/emacsclient-and-tramp/)

它的工作原理（AFAIU）如下：

*   emacs 服务器使用 tcp 启动
*   他使用 tramp-sh 打开与远程系统的连接，打开正向端口（“反向通道”）
*   建议 tramp-sh 将扩展的 auth cookie 文件复制到远程系统
*   在远程系统上，他调用了一个特殊的 emacsclient.sh shell 脚本，该脚本模拟 emacsclient，但在文件名前加上在扩展的 auth cookie 中找到的相应 tramp 前缀

I've added a comment to his blog post proposing this idea to be discussed and enhanced on emacs-devel.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-23T04:39:25.660

如果您这样做是为了让人们能够远程编辑文件，您可能需要查看“tramp mode”

[http://emacswiki.org/emacs/TrampMode](http://emacswiki.org/emacs/TrampMode)*

# c# - Java 的 Matcher.matches() 和 Matcher.lookingAt() 的 C#/.NET 等效项

> ID：12546730
> 
> 赞同：5
> 
> 时间：2012-09-22T18:49:11.647
> 
> 标签：c#, .net, regex

我正在寻找一种方法来确定单个正则表达式是否匹配整个字符串、字符串的开头或 C# 中的一部分。

在 Java 中，您可以构造一个`Matcher`对象，并使用这些方法`matches()`检查它是否与整个输入匹配，`lookingAt()`查看它是否与输入的开头匹配，并`find()`查看字符串中是否有任何匹配.

在 .NET 中，我可以使用`Match.Success`来查看是否有任何匹配项，并检查`Match.Index`和`Match.Length`满足上述条件。

问题是，如果找到较小的匹配项，它不会尝试匹配整个输入。例如，如果将输入“1234”呈现给 Regex `@"\d{2}|\d{4}"`，它将匹配前两位数字。

在这种情况下，我需要`Regex`使用该模式构建另一个`@"^(\d{2}|\d{4})$"`以测试整个输入，然后测试另一个以查看它是否与开头匹配。

有没有办法告诉同一个`Regex`类更喜欢整个输入匹配，这样我就不需要为此创建（和编译）另一个正则表达式？

* * *

编辑：问题不在于模式，这只是一个例子来说明我的意思。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T20:38:54.943

不，.NET 中没有“仅匹配开头”或“仅匹配整个字符串”的正则表达式方法。您确实需要使用锚点来构建这种行为。

在某种程度上，我更喜欢 Java 所做的事情，原因有两个：

*   *许多*人对此感到困惑，`.matches()`因为他们不知道它必须匹配整个字符串。我已经看到至少十几个关于这个确切问题的问题。
*   为什么要在两个不同的地方冗余地保留相同的功能？您已经在正则表达式语法中有锚点，那么为什么要让它们隐含在某些（有时是误导性的）方法中呢？（我在和你说话，Python 和你的`re.search()`vs. `re.match()`^*）。

也就是说，它也很容易做到：

*   `@"\A(?:"`+ 原始正则表达式 + `")"`--> `lookingAt()`（现在谁想到了*这个*名字）？
*   `@"\A(?:"`+ 原始正则表达式 + `@")\z"`-->`matches()`

* * *

^* `re.match()`的行为类似于 Java 的`lookingAt()`，而不是`matches()`，如果您想知道的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T20:17:58.263

正则表达式.Match / 正则表达式.IsMatch ？
它返回一个带有子集合的 Match 对象。

请参阅[http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.match.aspx](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.match.aspx)

# c - C：具有多个运算符的条件表达式

> ID：12546731
> 
> 赞同：0
> 
> 时间：2012-09-22T18:49:13.953
> 
> 标签：c, operators

在 C 中，这样的事情合法吗？

```
if (0<=x<=y<=y+1) then ... 
```

还是我必须用 &&'s 和 ||'s 和括号分隔它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T18:52:35.203

这是合法的，但可能不符合您的预期。它被视为您写过：

```
if (((0 <= x) <= y) <= y+1) 
```

评估`(0 <= x)`为 0 或 1；0 或 1 与 比较`y`，产生另一个 0 或 1 结果；这与 比较`y+1`，产生用于控制`if`语句的最终 0 或 1。

如果您的目标是确保`x`不小于 0 或大于`y`，并且还确保`y`不大于`y+1`，那么您可以编写：

```
if (0 <= x && x <= y && y <= y+1) 
```

我注意到这`y <= y+1`通常是正确的。如果`y`是无符号类型并且等于该类型的最大值，`y+1`则为 0。如果`y`是有符号类型并且等于该类型的最大值，则通过向其添加 1 来调用未定义的行为。如果你很幸运，`y+1`将包装到签名类型的最大负值，但你不能依赖它（所以也许这使它成为“如果你不走运”，因为错误不一定会出现之前它会导致重大问题）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T18:52:56.847

它是合法的（并且已定义；Google 搜索词“运算符优先级”），但我认为它不会按照您的期望或意图执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T18:52:17.300

不，这根本不可能做你想做的事，尽管它是合法的 C 代码。您必须使用 && 或 ||。原因是您实际上是在查看，例如，y 是否大于或等于布尔值，在 C 和 C++ 中，布尔值通常只是 0 和 1。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T18:53:36.807

这是完全合法的，但实际上没有用。`&&`您应该使用and/or构建正确的表达式`||`。

# php - 有谁知道使用 curl 而不是 fopen 的 html 到 pdf 转换器？

> ID：12546735
> 
> 赞同：0
> 
> 时间：2012-09-22T18:49:39.340
> 
> 标签：php, curl, fopen, html2pdf

我正在寻找一个 html2pdf php 脚本，它使用 curl 打开/检查图像。我们的服务器不允许 fopen 功能。

谢谢！

*** 编辑 ***

我通过将 fopen 函数替换为 curl 并将 getimagesize 替换为 curl 并结合 imagecreatefromstring 来解决这些问题。它不是最好的解决方案，但它现在有效！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T18:55:40.350

htmlToPdf 不需要“fopen”或“file_get_contents”。它接受一个 HTML 字符串并将其格式化为 PDF。fopen 利用率只是一个可以根据需要使用的工具，*但**它*不是工具。

因此，使用 curl 函数获取 HTML，然后将其传递给[html2pdf或与](http://www.google.fr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCMQFjAA&url=http://html2pdf.fr/&ei=6QleUK_7GuGw0QX3qYDADQ&usg=AFQjCNHu9QWyOA4TDAzRQLXPXW2NaKZCHg&sig2=j0ChEUTxGXFoYKSwEPPrzQ)[ZF2 兼容](http://framework.zend.com/manual/1.12/en/zend.pdf.create.html)且为[PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)的 pdf 解析器，因此可以轻松加载。

由于您需要在将 html 转换为 PDF 时获取图像，因此您需要使用 curl 作为流抽象。在 PHP 中，有一个非常强大的工具可以[包装一个流](http://php.net/manual/en/stream.streamwrapper.example-1.php)并给它一个标识符。例如，“http://”是默认实现的使用 http 请求的流。问题是没有工具会直接使用 curl，他们会更喜欢使用这种抽象，因为无论您将使用什么协议，它都可以通过 fopen 访问。并且由于您在 ini 文件中停用了 allow_url_fopen 指令，因此无论您做什么，它都会失败。

因此，您可以使用一个技巧：使用正则表达式获取所有 img 标签（[preg_split](http://php.net/manual/en/function.preg-split.php)会很棒），并逐步解析数据。

# html - 响应式背景图像调整大小问题

> ID：12546736
> 
> 赞同：1
> 
> 时间：2012-09-22T18:49:58.460
> 
> 标签：html, image, background, responsive-design

我需要一些帮助来解决背景图像的问题。当我将屏幕分辨率从 960 降低到 768 时，索引页面上“更多视频”侧栏中的 YouTube 徽标无法缩放。随着视口变小，它也会被切断。

是什么原因造成的，我该如何解决？

这是github的链接->[链接](http://blacktiph.github.com/project1/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:49:00.453

您的链接不起作用，所以我只是在这里猜测背景图像是 div 的属性。

div 可能正在缩放，但背景中的图像并非如此。这就是预期的行为。

但是，您可以使背景图像也具有响应性。查看此链接以获取更多信息：http: [//voormedia.com/blog/2012/11/responsive-background-images-with-fixed-or-fluid-aspect-ratios](http://voormedia.com/blog/2012/11/responsive-background-images-with-fixed-or-fluid-aspect-ratios)

# javascript - 在大量异步请求后编写 JSON 文件

> ID：12546737
> 
> 赞同：0
> 
> 时间：2012-09-22T18:50:00.910
> 
> 标签：javascript, node.js, request

我需要将大量异步请求后形成的最终对象写入 JSON 文件。

这是我的文件的布局

```
var finalObj = {};
for(i=0;i<100;i++){
  request.get("http://example.com/get/" +i,function(err,res,body){
    var tObj = json.parse(body);
    finalObj[tObj.name] = tObj.value;
  })
}

```

收到所有响应对象后，我想将 finalObj 保存到 json 文件中。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T18:53:57.073

如果您的 JSON 是正确的，那么这会将数据放入该对象，但正如您所说，请求是异步的。您将需要添加代码来监控所有请求何时完成并且对象已准备好写入。然后，只需使用 JSON.stringify() 将 Javascript 对象写入 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T18:58:12.833

每次收到请求时添加一个计数器如何增加？当计数器与请求总数匹配时，就该写入了。

```
var finalObj = {},
    requestCount = 100,
    ticks = 0;

for(i=0; i<requestCount; i++){
  request.get("http://example.com/get/" + i, function (err,res,body) {
    var tObj = json.parse(body);
    finalObj[tObj.name] = tObj.value;
    ticks++;

    // check if all 100 have been received
    if (ticks == requestCount) {
      // write file
    }
  })
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T18:59:38.743

注意应该是`JSON.parse(body)`正确解析body。

最简单的做法是使用一个在完成时递增的计数器，并检测您是否处理了所有请求；

```
var finalObj = {};
var counter = 0;

for(i=0;i<100;i++){
  request.get("http://example.com/get/" +i,function(err,res,body){
    var tObj = JSON.parse(body);
    finalObj[tObj.name] = tObj.value;

    if (++counter === i) {
        require('fs').writeFile('foo.txt', JSON.stringify(finalObj), function (err) { 
            if (!err) {
                // celebrate
            }
        }); 
    }
  });
} 
```

有关文件写入方面的详细信息，请参见[文件系统模块；](http://nodejs.org/api/fs.html#fs_fs_write_fd_buffer_offset_length_position_callback)值得庆幸的是，他们有一个[`writeFile`功能](http://nodejs.org/api/fs.html#fs_fs_write_fd_buffer_offset_length_position_callback)可以简化写入文件的过程。

# python - 新客户端上的聊天服务器 mysql 查询

> ID：12546738
> 
> 赞同：0
> 
> 时间：2012-09-22T18:50:10.867
> 
> 标签：python, twisted, mysql-python

我有一个简单的聊天服务器，我想在新客户端连接时查询我的数据库。我尝试使用twistar CRUD界面，但出现了一个奇怪的错误：

exceptions.NameError：未定义全局名称“结果”

```
from twisted.internet.protocol import Factory
from twisted.protocols.basic import LineReceiver
from twisted.enterprise import adbapi
from twisted.internet import reactor
from twistar.registry import Registry
from twistar.dbobject import DBObject

Registry.DBPOOL = adbapi.ConnectionPool('MySQLdb', host="localhost", db="testdb", user="test", passwd="test")
dbconfig = Registry.getConfig()

class Chat(LineReceiver):

    # Here is the callback
    def result(values):
        print values

    def __init__(self, users):
        self.users = users
        self.name = None
        self.state = "GETNAME"

    def connectionMade(self):
        self.sendLine("What's your name?")

    def connectionLost(self, reason):
        if self.users.has_key(self.name):
            del self.users[self.name]

    def lineReceived(self, line):
        if self.state == "GETNAME":
            self.handle_GETNAME(line)
        else:

    def handle_GETNAME(self, name):
        if self.users.has_key(name):
            self.sendLine("Name taken, please choose another.")
            return
        self.sendLine("Welcome, %s!" % (name,))
        # Here is the query
        d = dbconfig.select("testtable").addCallback(result)**

        self.name = name
        self.users[name] = self
        self.state = "CHAT"

    def handle_CHAT(self, message):
        message = "<%s> %s" % (self.name, message)
        for name, protocol in self.users.iteritems():
            if protocol != self:
                protocol.sendLine(message)

def result(var):
       print var

class ChatFactory(Factory):

    def __init__(self):
        self.users = {} # maps user names to Chat instances

    def buildProtocol(self, addr):
        return Chat(self.users)

reactor.listenTCP(8000, ChatFactory())
reactor.run() 
```

在聊天服务器之外，CRUD db 查询可以正常工作。

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T19:13:43.800

如果 result 是类的成员，它必须以 self 开头。

```
 d = dbconfig.select("testtable").addCallback(self.result)** 
```

# php - 使用 PHP 和 mySQL 进行全文搜索 - 更改表不是一种选择

> ID：12546741
> 
> 赞同：0
> 
> 时间：2012-09-22T18:50:19.090
> 
> 标签：php, mysql, full-text-search

我有一个关于我最近接手的半成品项目的 php/mysql 查询问题。

该项目是一个使用 mysql 数据库用 php 编程的在线商店，该数据库也通过 ERP (C++) 软件连接。ERP和半成品网店是同一个程序员做的，但是我的客户对开店的结果很不满意。由于程序员拒绝与我一起工作，我被困在一个非常简单的问题上。

我需要对两个都有全文索引的字段进行全文搜索。这将是一个简单的“SELECT ... MATCH ... AGAINST”，但它不能按预期工作。如果我将例如“树”作为搜索项，则查询会找到带有“树”但不是“树”或“树”等的所有内容......我的第一个猜测是将字段的排序规则更改为不同的东西比 latin1_general_cs 但不幸的是 ERP 似乎不太喜欢。

我在某处读到，有可能在查询字符串中即时将所需字段转换为更有用的内容，但我无法弄清楚。

也许有人有类似的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:57:07.077

尝试这个 ：：

```
Select * from myTable where LOWER(column) like '%tree%' 
```

如果存在，您将从表中获得所有树、树、树

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T18:57:27.693

我相信您可以将 MATCH 子句中的列粘贴到 LOWER() 函数中。如果您确保只将小写字符串传递到您的 AGAINST 子句中（或将它们包装在它们自己的 LOWER() 中），您就不会有这个问题。

# jquery - Facebook API 专辑图片随机滑块

> ID：12546746
> 
> 赞同：0
> 
> 时间：2012-09-22T18:51:05.683
> 
> 标签：jquery, facebook-graph-api

我正在寻求帮助

我有我找到并尝试 tweek 的代码。它可以工作，但从目前有 26 个相册中获取图像。我只想随机获得 11 个并添加到 div 中。如果您能提供帮助，那就太好了。我尝试添加历史记录，以便至少在相同显示的 11 张照片中不会使用索引。如果有人也可以帮助在功能上清理它，那就太好了。我为在车祸中丧生的侄女免费做这件事。

[http://jsfiddle.net/ad5qa/2JjbV/](http://jsfiddle.net/ad5qa/2JjbV/)

```
$.fn.fbPhotos = function (album, limit) {

    function base_append(obj) {
            $(base).append(obj);
    }

    function getPhoto(obj) {

            var id = obj.id;
            var img = obj.img;
            var link = obj.link;

            var wrap = $('<div></div>').attr({
                    'class': 'fb-photo',
                    'id': id
            });

            var avatar = new Image();
            avatar.src = img;

            var _avatar = $('<a></a>').attr('href', link).attr('target', '_blank').attr('class', 'avatar').html(avatar);

            $(wrap).append($(_avatar));
            return wrap;

    }

    function init() {
            fetch();

    }

    function fetch() {
            var r;
            var data = {};

            $.ajax({
                    url: 'https://graph.facebook.com/' + albumId + '/photos?type=small&limit=' + topLimit,
                    type: 'GET',
                    dataType: 'jsonp',
                    data: data,
                    success: function (obj) {
                            //    console.log(obj);
                            if (obj.error) {
                                    /*       var img = new Image();
                                 img.src = theme_url + '/images/ico_fail_bird.png';
                                 wipe(img); */
                                    return false;
                            } else {

                                    var results = {};

                                    for (var k = 0; k < obj.data.length; k++) {
                                            if (obj.data[k].images) {
                                                    results[k] = {
                                                            'id': obj.data[k].id,
                                                            'img': obj.data[k].images[8].source,
                                                            'link': obj.data[k].link
                                                    };
                                            }
                                    }

                                    k = 0;
                                    var hist = [];
                                    for (var w = 0; w < 11; w++) {
                                            var rnd = Math.floor((Math.random() * obj.data.length - 1) + 1);
                                            if ($.inArray(rnd, hist) == -1) {
                                                    hist.push(rnd);
                                                    $('.vcard').append(rnd + ' - ');
                                                    base_append(getPhoto(results[rnd]));
                                                    k++;
                                                    if (k >= topLimit) {
                                                            break;
                                                    }
                                            }

                                    }

                                    if (hist.length > obj.data.length - 2) hist = null;

                                    (function showNext(jq) {
                                            jq.eq(0).show("slide", null, 100, function () {
                                                    (jq = jq.slice(1)).length && showNext(jq);
                                            });
                                    })($('div.fb-photo'));

                                    return true;
                            }
                    },
                    error: function (obj) {
                            // @todo: do something like append an error message or an error image
                            /*  var img = new Image();
                        img.src = '/images/fail.png';
                        wipe(img); */
                            return false;
                    }
            });

    }

    if ($(this).size() > 0) {
            var base = $(this);
            var topLimit = (limit ? limit : 50);
            var albumId = (album ? album : ($(this).attr("fbAlbum") ? $(this).attr("fbAlbum") : '0'));

            init();
    }

};

$(".block-facebook").fbPhotos();
$(document).ready(function () {
    setInterval(function () {
            $(".block-facebook").fbPhotos();
    }, 5000);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T22:23:57.633

结果实际上是我自己写的，现在它可以工作了。也实现了fancybox。自从搞乱 json 和 javascript/livescript 以来已经有好几年了。

```
 function getthumbs(gallery_id) {
        viewer = $('#viewer'), thumbs = $('#thumbs');
        var hist = [];
        var rnd = 0;

        $.getJSON('//graph.facebook.com/' + gallery_id + '/photos?callback=?', function (json, status, xhr) {
            var imgs = json.data;
            $('#thumbs img').remove();

            for (i = 0; i < 12; i++) {
                rnd = Math.floor((Math.random() * imgs.length - 1) + 1);

                $('<img src="' + imgs[rnd].images[8].source + '">').appendTo(thumbs).fancybox({
                    href: imgs[rnd].images[3].source
                }); 
            }

        });
    }
    getthumbs('425912634133232');

    $(document).ready(function () {
        setInterval(function () {
            getthumbs('425912634133232');
        }, 20000);
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T19:57:44.357

我认为您`topLimit`在初始化之前正在使用它。除此之外，您需要获取所有图片的所有 URL，而不仅仅是在返回数组中随机选择其中一些。

# vim - Vim 键盘快捷键，用于在选项卡间移动

> ID：12546750
> 
> 赞同：30
> 
> 时间：2012-09-22T18:52:11.553
> 
> 标签：vim, tabs, keyboard

我曾经知道这个键盘快捷键可以让你在终端中移动 Vim 选项卡，类似于浏览器中的`Ctrl`+ `tab`。

我一直在互联网上寻找，我再也找不到了。有任何想法吗？

PS：你必须同时按两个字母。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-22T19:21:12.820

`gt`是 和 的键盘`:tabnext`快捷`gT`键`:tabprevious`。

如果您更喜欢典型的`Ctrl`+ `Tab`，请在您的 中定义以下映射`~/.vimrc`：

```
" CTRL-Tab is next tab
noremap <C-Tab> :<C-U>tabnext<CR>
inoremap <C-Tab> <C-\><C-N>:tabnext<CR>
cnoremap <C-Tab> <C-C>:tabnext<CR>
" CTRL-SHIFT-Tab is previous tab
noremap <C-S-Tab> :<C-U>tabprevious<CR>
inoremap <C-S-Tab> <C-\><C-N>:tabprevious<CR>
cnoremap <C-S-Tab> <C-C>:tabprevious<CR> 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-08-21T01:27:23.387

这是取自 Vim Wikia：

```
gt            go to next tab
gT            go to previous tab
{i}gt         go to tab in position i 
```

[http://vim.wikia.com/wiki/Using_tab_pages](http://vim.wikia.com/wiki/Using_tab_pages)

希望能帮助到你。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-22T18:58:04.057

也许

*   `Ctrl`+`PageUp`
*   `Ctrl`+`PageDown`

? 但是如果你有一些 gnome-terminal 选项卡和 vim 终端选项卡，它就不起作用。你需要

*   `Ctrl`+ `Alt`+`PageUp`
*   `Ctrl`+ `Alt`+`PageDown`

对于 vim 和

*   `Ctrl`+`PageUp`
*   `Ctrl`+`PageDown`

对于 gnome 终端。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-04-29T06:28:05.883

`g`+`t`和`g`+`T`是 Vim 跳转到下一个和上一个选项卡的快捷方式。

您可以在 Vim 中使用`<C-Tab>`and`<C-S-Tab>`进行映射，但您可能需要帮助您的**终端**生成正确的键码。根据您的终端，

**[urxvt](http://software.schmorp.de/pkg/rxvt-unicode.html)**，添加到您的`.Xresources`文件中：

```
URxvt*keysym.C-Tab:    \033[27;5;9~
URxvt*keysym.C-S-Tab:  \033[27;6;9~ 
```

**[在Alacritty](https://github.com/jwilm/alacritty)**下`key_bindings`，将以下内容添加到您的`~/.config/alacritty/alacritty.yml`:

```
- { key: Tab,  mods: Control,        chars: "\x1b[27;5;9~" }
- { key: Tab,  mods: Control|Shift,  chars: "\x1b[27;6;9~" } 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-08-13T16:54:29.793

这对某些人来说可能有点极端，但你可以这样做：

```
nmap <Left> gT
nmap <Right> gt 
```

事实证明，您在正常模式下确实不需要箭头键（只需使用 hjkl 键进行导航），并且您不需要在编辑模式下更改选项卡。在任何情况下，使用 gt 和 gT 来更改选项卡都是荒谬的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-06-06T16:33:43.733

最好的方法是映射您的“L”和“H”键，因为它们也是光标移动的键（分别是左右），我们不需要记住任何东西。

地图 <CL> gt

地图 <CH> gT

这可能是导航标签的最自然方式，无需练习或记住任何内容。只需按：Ctrl+L（或长按 L 以进一步导航）。同样，如果要向左导航，请按 Ctrl+H。

尝试一下，然后您才能了解好处，因为映射的键与用于光标的键相同

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-12T05:19:38.753

```
:nmap <C-S-tab> :tabprevious<cr>
:nmap <C-tab> :tabnext<cr>
:nmap <C-t> :tabnew<cr>
:map <C-t> :tabnew<cr>
:map <C-S-tab> :tabprevious<cr>
:map <C-tab> :tabnext<cr>
:map <C-w> :tabclose<cr>
:imap <C-S-tab> <ESC>:tabprevious<cr>i
:imap <C-tab> <ESC>:tabnext<cr>i
:imap <C-t> <ESC>:tabnew<cr> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-18T10:43:36.767

试试这个：

方式1：

> 如果您想以垂直或水平方式在几个选项卡之间快速切换。

`Ctrl`+`w` `w`

方式2：

> 另外，如果您想通过箭头键灵活切换。

`Ctrl`+ `w`+ 从键盘上举手，然后 +`←</kbd> / `↑</kbd> / `→</kbd> / `↓</kbd>````

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-07T15:18:01.583

使用@Mickey 答案添加更多快捷方式

```
gt    -   go to next tab
gT    -   go to previous tab
{i}gt -   go to tab in position i
1gt   -   go to first tab
1gT   -   go to last tab 
```

# c - 在 C 中初始化字符串和数组 - 区别

> ID：12546751
> 
> 赞同：4
> 
> 时间：2012-09-22T18:52:14.673
> 
> 标签：c

我正在尝试在 C 中初始化数组和字符串的方法，并发现：

```
char *str = "ABCDE"; 
```

完美地初始化字符串，没有错误或警告，但是：

```
int *array = {1,2,3,4,5}; 
```

给我警告并最终转储核心。现在真的让我很烦恼，我想知道为什么这种声明适用于字符但不适用于整数......

编辑：我正在使用`gcc`编译器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T18:55:34.007

通过这样做，它将适用于整数：

```
int array[] = {1,2,3,4,5}; 
```

或这个：

```
int *array = (int[]){1,2,3,4,5}; 
```

`"string"`告诉编译器实例化字符串所需的所有信息（大小、类型）（也就是带有 NULL 终止符的字节数组）。[除非您将其声明为复合文字](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8a.doc%2Flanguage%2Fref%2Fcompound_literals.htm)，否则裸露`{}`不会。添加告诉编译器启动的数据是一个整数数组。`ints[]`

正如 Nathan 在评论中指出的，这两种说法存在细微差别。

第一个，在堆栈上定义一个由 5 个整数组成的数组。该数组可以修改并一直存在到函数结束。

第二个，1) 在堆栈上定义一个由五个整数组成的匿名数组 2) 定义一个指针“数组”，指向堆栈上匿名数组的第一个元素。由于内存在堆栈上，因此不应返回指针。此外，数组本身并不像字符串文字那样是 const 的。

编辑：如评论员所指出的那样，用复合文字替换了演员表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T18:55:39.447

字符串文字衰减为指向 char 的 const 指针。而这是 C 中的数组 {1,2,3,4,5} 并且不会衰减。因此，您必须使用 C 中创建数组的语法，如下所示：

```
int a[] = {1,2,3,4,5} ; 
```

然后你可以指向它：

```
int a[] = {1,2,3,4,5} ;
int *p = a; 
```

因为数组的名字就是数组的地址或者第一个元素。希望有帮助。

# wordpress - 如何在标题 wordpress 中添加临时标签“新”？

> ID：12546753
> 
> 赞同：0
> 
> 时间：2012-09-22T18:52:20.003
> 
> 标签：wordpress, wordpress-theming

我想在每个新帖子的标题开头加上“新”这个词，并让这个词在那里停留 24 小时，然后在 24 小时后它会自动消失。
我尝试了这段代码，但它不起作用。

```
if (get_the_time() > date("d/m/Y", time()-86400))
{
  echo "New";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T18:54:42.457

您尝试将**Unix 时间戳**与**字符串**进行比较（date() 返回字符串）

```
if((get_the_time('U') + 86400) > time())
       echo 'New' 
```

# .net - 如何查看.Net中加载了哪些类

> ID：12546754
> 
> 赞同：0
> 
> 时间：2012-09-22T18:52:32.313
> 
> 标签：.net, assemblies, appdomain

有没有一种简单的方法可以查看正在运行的 .Net 应用程序，到目前为止已加载的所有类？这将有助于删除不再在大型项目中使用的类。

我知道我可以在每个类中放置静态初始化器并让它们进行某种注册，但这很乏味且容易出错。如果有一种更简洁的方法可以通过 AppDomain 或 Assembly 类或其他方式来完成，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:48:54.953

您可以使用 PostSharp、Spring.Aop 等方面库来拦截对方法、属性等的所有调用，并将类型名称添加到集合中。另一种方法是使用分析器。不幸的是，这两种方法都需要您继续使用该应用程序（希望它是带有 UI 的桌面应用程序）。

顺便说一句，您是否尝试过启用 CodeAnalysis 并查找性能警告？您将收到所有从未调用过的方法、属性和字段的警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T18:57:18.770

您可以很容易地找到当前应用程序域中加载了哪些*程序*`AppDomain.CurrentDomain.GetAssemblies()`集 - . 当然，它只会为您提供有关执行此操作时在特定时间加载的程序集的信息。有更好的方法来查找和清理解决方案中的冗余代码。就个人而言，我喜欢 ReSharper。它具有称为“查找代码问题”的强大功能（可用于整个解决方案），它将为您提供未使用符号的列表，这正是您正在寻找的。

# haskell - 如何在 ghci 中使用 cabal 的 MIN_VERSION_ 和其他宏？

> ID：12546757
> 
> 赞同：11
> 
> 时间：2012-09-22T18:52:39.520
> 
> 标签：haskell, cabal, ghci

当我在 Haskell 项目中使用 Cabal 的各种`MIN_VERSION_`宏时，如何确保在我不使用 cabal 时正确定义它们，例如在 GHCi 中进行测试时？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-22T18:52:39.520

如今，`cabal`支持一个`cabal repl`子命令，它为您完成所有设置，因此至少`ghci`以下是不必要的。尽管如此：

该`cabal build`命令生成文件`dist/build/autogen/cabal_macros.h`，其中包含您需要的所有定义。为了在 ghc 调用中包含该文件，您需要 flags `-optP-include -optPdist/build/autogen/cabal_macros.h`。

为方便起见，您可以将以下内容放在`.ghci`项目目录中的文件中：

```
:set -optP-include -optPdist/build/autogen/cabal_macros.h 
```

这样您就不必每次想使用 ghci 时都输入选项。

但请注意：宏将根据您上次运行时的配置进行定义`cabal build`，并且在您安装新软件包或使用不同的 GHC 版本时不会更新：为此您需要重新配置和重建软件包。

（感谢图书馆名单上的 Simon Hengel 提供了这种智慧：[http](http://www.haskell.org/pipermail/libraries/2012-September/018491.html) ://www.haskell.org/pipermail/libraries/2012-September/018491.html ）。

# python - 使用中位数的中位数找到第 k 个最大元素的复杂性

> ID：12546760
> 
> 赞同：1
> 
> 时间：2012-09-22T18:53:07.980
> 
> 标签：python, algorithm, median-of-medians

[我正在阅读有关通过ardendertat](http://www.ardendertat.com/2011/10/27/programming-interview-questions-10-kth-largest-element-in-array/)`median-of-medians`的算法查找数组中第 k 个最高元素的文章。在解释复杂性的部分，作者似乎忽略了一个因素，即递归查找每个分区的成本。当然，我不能按初始枢轴对所有子阵列进行分区，对吧？那么这不会增加复杂性吗？`median-of-medians`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T21:49:01.097

中位数算法是为快速选择算法开发的，它与快速排序非常相似，但实际上是线性的，而不是 O(n log n)，因为它只在分区的一侧递归。选择问题是选择集合S中第k^大的元素；找到中位数是 k = (|S| + 1)/2 的特殊情况。

该算法很简单：

*   选择一些枢轴值，p。

*   将元素分成两组：S [<]（所有元素 < p）和 S [≥]（所有元素 ≥ p）。

*   递归：如果 S [<]至少为 k，则在 S [<中找到第 k]^个最大的元素；[否则，在 S ≥]中找到 (k - |S [<] |) ^(th)最大的元素。

与快速排序一样，关键是找到枢轴值。我们将按如下方式进行：

*   构造由 S的每组五个元素的中[位数组成的 S 个中位数。]

*   通过递归调用 select找到 S 个[中位数]的确切中位数。

现在，|S[中位数]| 正好是 0.2 * |S|。此外，一旦我们有了主元，我们就知道 max(|S [<] |, |S [≥] ) ≤ 0.7 * |S|。[fn 1] 所以对 select 的两个递归调用总和为 0.9 * |S|。

^(所以我们现在可以证明计算 select 的时间与 Σ0.9 i) n成正比，这在 n 中显然是线性的。

我希望这对你来说已经足够清楚了。

* * *

在不明显的情况下，S 中位数中的一半中[位数]必须至少为 p（因为 p 是它们的中位数），并且对于与这些中位数相对应的每组五个，五个元素中的三个（中位数和两个较大的元素）必须至少为 p。所以这是 S 中总元素的 50% 的 60%，或 30%。一个类似的论点适用于用“最多”代替“至少”，所以我们知道两个子集中较小的一个至少是 S 大小的 30%，因此较大的一个最多是大小的 70%。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T19:59:08.680

`p`对数组进行分区后的中位数的位置在`0.3*n`和之间`0.7*n`。

所以一轮之后，我们有三种可能：

1.  `p == n-k`，纯粹靠运气，第一个枢轴是第`k`-th 大元素，在 O(n) 中找到（中位数和分区的中位数都是 O(n)）。
2.  `p > n-k`，则第`k`-th大元素小于第一个pivot，我们需要找到`k - (n-p)`第一部分的第-th大元素，其中元素最多，因此找到第-th大元素`0.7*n`的总成本为`k`

    ```
    T(n) <= T(0.7*n) + C*n 
    ```

3.  `p < n-k`，那么我们需要找到`k`第二部分（枢轴之后）的第-个最大元素，该部分也最多`0.7*n`元素大，所以我们再次得到估计

    ```
    T(n) <= T(0.7*n) + C*n 
    ```

迭代，我们发现

```
T(n) <= T((0.7)^k * n) + C*(1 + 0.7 + ... + (0.7)^(k-1))*n
     <= T(1) + C/(1 - 0.7)*n 
```

这显然是 O(n)。

# android - 如何在画廊中滚动图像时显示 texview？

> ID：12546762
> 
> 赞同：0
> 
> 时间：2012-09-22T18:53:20.090
> 
> 标签：android, android-activity, textview, toast, android-gallery

当画廊上的每个图像都聚焦时，有没有办法可以显示文本视图？就像当我滚动浏览每张图片以显示每张图片的吐司或文本视图时一样。因为我正在使用画廊中的每张图片来开始一项活动。所以我需要显示类似 textview 的东西来通知用户。

这可能吗？

更新

```
myGallery.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> parent, View view,
                int id, long position) {
            // TODO Auto-generated method stub
            if(position == 4)
            {                   
                tv.setText("Test");

            }
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    });
} 
```

这就是我所做的。但 hte textview 似乎没有显示？任何想法？

# objective-c - 更正权利标志以将文件保存在同一位置两次

> ID：12546766
> 
> 赞同：2
> 
> 时间：2012-09-22T18:53:42.663
> 
> 标签：objective-c, cocoa, osx-mountain-lion, appstore-sandbox

我`NSSavePanel`在我的应用程序中使用。在我的 OS X 10.7 上一切正常，但该应用程序被 Apple 拒绝，并附有以下评论：

> 第二次导出时，之前选择的保存位置不起作用。用户必须取消选择该位置，然后再次选择它才能写入文件。请确保您拥有必要的权利。
> 
> 这篇评测是在运行 OS X 10.8 的 iMac 上进行的。

这是我的保存面板代码：

```
NSSavePanel *savePanel = [NSSavePanel savePanel];
[savePanel setAllowedFileTypes:[NSArray arrayWithObject:@"mov"]];
[savePanel setDirectoryURL:[NSURL URLWithString:@"/Documents"]];
[savePanel setNameFieldStringValue: videoName];

[savePanel beginSheetModalForWindow:window completionHandler:^(NSInteger result){
    if (result == NSFileHandlingPanelOKButton) {
        NSError *error = nil;
        NSString *sourceFilePath = [NSString stringWithFormat:@"%@/%@",[[NSBundle mainBundle] resourcePath], videoName];
        NSString *destFilePath = [[savePanel URL] path];
        NSFileManager *fileManager = [[NSFileManager alloc] init];
        if(![fileManager copyItemAtPath:sourceFilePath toPath:destFilePath error:&error])
            NSLog(@"%@", error);
    }
}]; 
```

目前我正在使用这些标志：

```
 <dict>
    <key>com.apple.security.app-sandbox</key>
    <true/>
    <key>com.apple.security.assets.movies.read-write</key>
    <true/>
    <key>com.apple.security.files.downloads.read-write</key>
    <true/>
    <key>com.apple.security.files.user-selected.read-write</key>
    <true/>
</dict> 
```

我必须使用什么权利标志来解决此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T02:10:55.177

如果您要在应用程序的同一运行中保存两次，则不需要任何权利；一旦用户从 中选择一个文件`NSSavePanel`，它就在您的应用程序的沙箱中。如果两次都显示保存面板，这同样适用——它应该“正常工作”。如果连续运行之间的位置相同，并且第二次没有保存面板，则需要将安全范围的书签存储到文件中。

例如，请参阅此问题中给出的示例代码（以及已接受答案中的更正）：[App Sandbox: document-scoped bookmark not resolve; 不返回任何错误](https://stackoverflow.com/questions/10259692/app-sandbox-document-scoped-bookmark-not-resolving-not-returning-any-error)

# ios - 应该换掉 UIView 还是 UIViewController？

> ID：12546767
> 
> 赞同：0
> 
> 时间：2012-09-22T18:53:50.147
> 
> 标签：ios, uikit

如果它是一个简单的应用程序，其中用户输入任何用户名，然后单击“Go”，然后将显示该用户在服务器上的公共信息，我想知道换掉`UIView`或全部`UIViewController`是最佳做法换掉了？

它是屏幕顶部的应用程序标签或横幅，带有一个用于输入任何用户 ID 的文本框和一个“开始”按钮。当用户输入任何用户名并点击“Go”时，应该有一个活动指示器（旋转轮），然后异步线程去获取数据，完成后，用户名文本框和“Go”按钮将被用户的公共信息换出。应用程序的标签或横幅实际上一直停留在屏幕顶部。（占屏幕的 25%）

仅换出一个子视图是最佳实践，还是换出整个 ViewController 是最佳实践？（无论哪种方式，可能最好使用过渡动画）。如果以后要通过其他功能和屏幕扩展应用程序怎么办？（对了，好像通过UIView, then`[UIView transitionWithView: ...]`可以使用，而by `UIViewController`, then`presentViewController:animated`最好处理？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T19:48:07.077

我认为这种情况确实没有明确的“最佳实践”。更多的是您希望如何在您的应用程序中构建导航和一般用户体验的问题。有时推送一个新的 ViewController 是有意义的，有时切换 Views 是有意义的。

根据我的经验，从同一个 ViewController 管理几个完全不同的视图可能会很麻烦，尤其是如果你想要一些整洁的过渡和自定义外观。（我的意思是“视图”在一个充满内容的屏幕中，其中视图具有完全不同的目的，例如带有“Go”按钮的文本字段和信息部分等）

我建议你为它推一个新的 ViewController。特别是如果以后可能有新的功能或新的方式来呈现用户信息。我还建议使用“开始”按钮在页面上显示活动指示器，并确保用户不会来回移动，除非有要显示的实际信息。

另一种解决方案可能是在 ViewController 的视图顶部显示该横幅（在屏幕高度的 25% 处听起来相当大），并在下方有一个 Paged Scrollview，当用户单击时，文本字段和转到按钮位于第一页上GO 它滚动到第二页以显示那里的信息。所以你会有两个 UIView，一个用于滚动视图中的每个页面。

但是如果不知道有多少关于用户的信息，几乎不可能给出完美的答案:)

那是我的2c。

# asp.net-mvc-3 - ASP.NET MVC 3 和 AJAX

> ID：12546769
> 
> 赞同：1
> 
> 时间：2012-09-22T18:54:06.730
> 
> 标签：asp.net-mvc-3, jquery

这是我第一次在这个板子上写。我是一名意大利学生，请原谅我的英语不好。很长一段时间以来，我都使用 ASP.NET Web Forms 开发了我的 Web 应用程序；现在想迁移到 ASP.NET MVC 框架。所以我想问两个问题：

1.  场景 1：我在视图中的一个表单中有两个 DropDownList （元素）。第一个 DropDownList 包含一个类别列表：我希望在第一个 DropDownList 中更改项目时，第二个是自动加载子类别列表。在 Web 表单中，我经常使用 UpdatePanel 来完成这项工作。但是现在在 MVC 中我不能使用它。我曾尝试使用 jQuery AJAX，但代码不起作用。我该如何实施这项工作？请举个例子？

2.  场景 2：我有一个分步向导表单。所以，我需要逐步传递（记忆）数据。我在哪里可以记住这些数据？在会话中？一个建议？

非常感谢，弗朗西斯科。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T19:05:14.310

1）当用户选择第一个下拉列表时，您可以使用 jQuery ajax 获取第二个下拉列表的项目。

假设您的 Category 类看起来像这样

```
public class Category
{
  public ID { set;get;}
  public string Name { set;get;}
} 
```

视图中的下拉菜单是这样的

```
@Html.DropDownListFor(x => x.SelectedCategoryID, 
                  new SelectList(Model.Categories, "ID", "Name"), "Select")

@Html.DropDownListFor(x => x.SelectedSubCategoryID, 
                  new SelectList(Model.SubCategories, "ID", "Name"), "Select") 
```

`JSON`现在有一些 javascript 来监听第一个下拉列表的更改事件并获取值，对接受类别 ID 的操作方法进行 ajax 调用，并以格式返回子类别列表。

```
<script type="text/javascript">
    $(function () {
        $("#SelectedCategoryID").change(function () {
            var self = $(this);
            var items="";
            $.getJSON("@Url.Action("Index", "GetSubCategories")?id="+self.val(),
                                                                  function(data){
                $.each(data,function(index,item){
                  items+="<option value='"+item.ID+"'>"+item.Name+"</option>";
                });
               $("#SelectedSubCategoryID").html(items);
            });
        });
    });
</script> 
```

现在您应该有一个操作方法，它以格式`GetSubCategories`返回（子）类别列表`JSON`

```
public ActionResult GetSubCategories(int id)
{
  List<Category> subCategoryList=new List<Category>();
  //to do : fill the list of (sub) categories to the
  // above list for the category id passed to this method.
  return Json(subCategoryList,Json.RequestBehaviour.AllowGet); 
} 
```

2）会话应该是好的。

# iphone - 从 4.4 升级到 Xcode 4.5 后的差异

> ID：12546770
> 
> 赞同：1
> 
> 时间：2012-09-22T18:54:07.087
> 
> 标签：iphone, ios, xcode

从 4.4 升级到 Xcode 4.5 后，我运行了我在 v 4.4 中制作的应用程序。虽然应用程序编译正确，但我在调试区域的输出部分看到以下消息：

`Application windows are expected to have a root view controller at the end of application launch.`

有人可以告诉我为什么升级后我会看到此消息吗？我浏览了类似问题的一些答案。但是我没有找到任何可以告诉我为什么在升级后看到此消息的信息。

谢谢！

编辑1：

我应该将代码合并到 AddDelegate.m 中吗？如果是的话，我在读一本书时做了类似的事情。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    [[NSBundle mainBundle] loadNibNamed:@"TabBarController" owner:self options:nil] 
    [self.window addSubview:rootController.view];

    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T21:11:14.003

在 iOS 3.x 及更低版本中，您曾经这样做过：

```
[window addSubview:tabBarController.view] 
```

从 iOS 4 开始，规范的方法是这样做：

```
window.rootViewController = tabBarController; 
```

如果你不需要支持 iOS 2.x/3.x，那么你应该升级你的代码来做后者。

IIRC，该警告自 iOS 5 以来就存在。它取决于您运行的 iOS 版本，而不是 Xcode 版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T20:15:45.367

如果您以编程方式设置了视图控制器，那么在您的应用程序委托`didFinishLaunchingWithOptions`方法中尝试以下操作：

`[self.window setRootViewController: yourRootViewController];`

如果您通过 XIB 设置视图控制器，那么如果设置正确，您的根视图控制器应该默认设置！（这可能是您项目中的 MainWindow.xib 文件）

# web-applications - 开始网站设计的工具

> ID：12546773
> 
> 赞同：0
> 
> 时间：2012-09-22T18:54:48.117
> 
> 标签：web-applications, ide, web

我是网站编程（设计）的新手。我所理解的事情是手动编写 html 和 css 文件，然后进行测试不是一个有效的解决方案。所以我需要工具来开始至少为用户界面部分进行网站设计。

就像在 netbeans/visual studio 中一样，有各种小部件的拖放选项。所以我需要任何 IDE 来进行网站开发。任何人请帮忙..

我提到了其他类似的问题，有很多，我很困惑使用哪一个。请给我一个好的和最有用/最广泛使用的工具，以便我在有疑问时可以提出疑问

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T18:59:37.457

Adobe 的 Dreamweaver 非常受欢迎，并且不会过多地破坏代码。我在开始使用 HTML 时使用了它，并且我确信它从那时起已经相当先进了。我现在做“手工”的事情——这样做实际上是有效的，但还有很多学习曲线。

干杯，

约翰

# php - PHP：我如何编写使错误消息显示在登录页面上？

> ID：12546774
> 
> 赞同：0
> 
> 时间：2012-09-22T18:54:52.803
> 
> 标签：php, require-once

我是php的菜鸟。我想用php创建一个简单的登录页面，这样如果你输入一个不在数据库中的昵称，它会告诉你这样的，否则它会告诉你密码不正确。我正在使用我的学校服务器，所以关于服务器的某些问题我可能无法回答。最重要的是，我没有使用 fopen() 的权限，所以它是 file_put_contents 。我什至不知道这是否会起作用，因为我还没有让它起作用。到目前为止，我有 login.php、check.php 和 numberconverter.php，这是一个帮助我将数字转换为字符串的函数。（在这种情况下，unix 时间）。我知道 numbercoverter.php 通过测试工作。

登录.php：

```
<?
define('__ROOT__',dirname(dirname(__FILE__)));
require_once(__ROOT__.'/shopsite/numberconverter.php');
echo "<!--root: ".__ROOT__."/shopsite/ -->\n";
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"                 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Login to the Shopsite</title>
<script type="text/css">
"error" {
background-color:#FF;
color:#FFFFFF;
}
</script>
<script type="text/javascript">
<?php
$nick="";
$i=false;
if(isset($_GLOBALS['file']))
{
$i=true;
$nick=file_get_contents("file.txt");
$nick=preg_split("^nick:",$nick);
}
else
{
$_GLOBALS['file']='file'.convert(time()).'.txt';
}
?>
functions error(i)
{
if(i)
{
    document.getElementById('error').innerHTML="Nick <?php echo $nick; ?> was not found. Try again or <a href=\"register.php\">register</a>";
}
else
{
    document.getElementById('error').innerHTML="Password incorrect. Try again or <a href=\"register.php\">register</a>";
}
}
//-->
</script>
</head>
<body <?php if($i) { echo "onload=\"error(".((strlen($nick[0])<0) ? 1 : 0).")\""; }?> >
<p id="error"></p>
<?php
$chk = time();
echo "File name: ".$_GLOBALS['file']."\n";
echo "unix time raw: ".$chk."\n";
echo "unix time converted: ".convert($chk)."\n";
?>
<form id="form" action="check.php" method="post">
<p>username: <input type="text" name="nick" id="nick" /></p>
<p>password: <input type="text" name="pass" id="pass" /></p>
<input type="submit" value="Log in"/>
</form>
</body>
</html> 
```

检查.php：

```
<?php
$c = mysql_pconnect("localhost","hehe","hehe");
mysql_select_db("test",$c);
$r = mysql_query(sprintf("select * from UserTable where (nick=(\"%s\") AND   pass=SHA1(\"%s\"))",$_POST['nick'],$_POST['pass']),$c) or die("something wrong with mysql,1");
if(mysql_num_rows($r)==0)
{
$testn = mysql_query(sprintf("select * from UserTable where nick=(\"%s\")",$_POST['nick']),$c) or die("something wrong with mysql,2");
if(mysql_num_rows($testn)==0)
{
    //file_put_contents($_GLOBALS['file'],"nick:".$_POST['nick']);//
    file_put_contents('test.txt',"nick");
}
else
{
    //file_put_contents($_GLOBALS['file'],"pass");
    file_put_contents('test.txt',"pass");
}
mysql_close($c);
header("Location:http://cs4.sunyocc.edu/~j.d.dancks/shopsite/login.php");
}
else
{
mysql_close($c);
session_start();
$_SESSION['nick'] = $_POST['nick'];
$_SESSION['email'] = $_POST['email'];
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T01:59:21.860

好的。我想让球再次滚动，并获得人们的意见。我显然不能做 mysqli ，因为即使它是 4.3.2 我猜它没有安装或什么的。phpinfo：cs4.sunyocc.edu/~jddancks/info.php 无论如何，这是我尝试过的：

```
<?
session_start();
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Login to the Shopsite</title>
<script type="text/css">
"error" {
        background-color:#FF;
        color:#FFFFFF;
 }
 "attempts" {
        color:#FF;
 }
 </script>
 <script type="text/javascript">
 function errorfunc()
 {
        <?php
        if(isset($_SESSION['msg']))
        {
            echo "document.getElementById(\'error\').innerHTML=".$_SESSION['msg'];
        }
        if(isset($_SESSION['attempts']))
        {
            echo "document.getElementById(\'attempts\').innerHTML=".$_SESSION['attempts']."Of 5 login attempts used.";
        }
        ?>
}
//-->
</script>
</head>
<body onload="errorfunc()">
<?php 
        $ok = true;
        if(isset($_SESSION['attempts']))
        {
            if($_SESSION['attempts']>=5)
            {
                echo "<h1>YOU HAVE MAXED OUT YOUR LOGIN ATTEMPTS. COME BACK ANOTHER DAY</h1>";
                $ok = false;
            }
        }
        if($ok)
        {
                echo "<p id=\"error\"></p>\n
                <p id=\"attempts\"></p>\n
                <form id=\"form\" action=\"check.php\" method=\"post\">\n
                <p>username: <input type=\"text\" name=\"nick\" id=\"nick\" /></p>\n
                <p>password: <input type=\"text\" name=\"pass\" id=\"pass\" /></p>\n
                <input type=\"submit\" value=\"Log in\"/>\n
                </form>\n";
        }
?>
</body>
</html> 
```

和检查.php：

```
<?php
session_start();
$c = new mysqli("localhost","jddancks","zomglol","test");
if($c->connect_errno())
{
        echo "Something is wrong with the mysql connection. To DREAMWEAVER!";
}
else
{
    $r = $c->query(sprintf($c,"select * from UserTable where (nick=(\"%s\") AND pass=SHA1(\"%s\"))",$_POST['nick'],$_POST['pass']));
    if($r->num_rows==0)
    {
                $testn = $c->query(sprintf($c,"select * from UserTable where nick=(\"%s\")",$_POST['nick']),$c);
        if($testn->num_rows()==0)
        {
                    $_SESSION['msg'] = "Nick ".$_POST['nick']."was not found. Check spelling or <a href=\"register.php\">register</a>";
        }
        else
        {
                $_SESSION['msg'] = "Password incorrect";
        }
        $r->close();
        $testn->close();
        if(!isset($_SESSION['attempts']))
        {
                    $_SESSION['attempts'] = $_SESSION['attempts'] + 1;
        }
        else
        {
                $_SESSION['attempts'] = 1;
        }
        $c->close();
        header("Location:http://cs4.sunyocc.edu/~j.d.dancks/shopsite/login.php");
    }
    else
    {
            $c->close();
        session_start();
        $_SESSION['nick'] = $_POST['nick'];
        $_SESSION['email'] = $_POST['email'];
        header("Location:http://cs4.sunyocc.edu/~j.d.dancks/shopsite/success.html");
    }
}
?> 
```

我唯一担心的是，有人要做的就是删除站点 cookie 以尝试继续暴力破解密码，所以也许我应该将 # 登录尝试记录到 sql 表中。

# javascript - 文件读取器异步加载文件后获取文件名

> ID：12546775
> 
> 赞同：32
> 
> 时间：2012-09-22T18:55:00.067
> 
> 标签：javascript, android, cordova, fileapi

我正在一个目录中加载几个文件，以便从中解析一些数据。到目前为止，这很好用，但我想知道我正在查看哪个文件。所以我需要文件加载后的名称。有人可以帮忙吗？

// 获取目录下的所有文件

```
function updateData(){
  var dirReader = approot.createReader();

  var fail =failCB('Error - Directory for parsing failed to open'); // logs fail...
  dirReader.readEntries(parseData,fail); 
} 
```

// 加载每个文件

```
function parseData(entries){
  var i;
  for (i=0; i<entries.length; i++) {
    var reader = new FileReader();
    reader.onloadend = createListItem;
    reader.readAsText(entries[i]);
  }
} 
```

// 在这里我想知道这个名字！！！！

```
function createListItem(evt){
    // it gives me all the loaded data. But based on which file it was, I would like to handle it!
  console.log(evt.target.result)
    // lets say something like this
    $('#content').find(   file.name   ).append(evt.target.result);
  }
} 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-22T20:30:43.367

在 周围创建一个闭包`File`以捕获当前文件。然后你可以得到文件名。

一个例子：[http ://www.html5rocks.com/en/tutorials/file/dndfiles/#toc-reading-files](http://www.html5rocks.com/en/tutorials/file/dndfiles/#toc-reading-files)

关闭以捕获文件信息。

```
function parseData(entries){
  for (var i=0; i<entries.length; i++) {
    reader.onloadend = (function(file) {
      return function(evt) {
        createListItem(evt, file)
      };
    })(entries[i]);
    reader.readAsText(entries[i]);
  }
} 
```

被调用的函数得到一个额外的参数

```
function createListItem(evt, file) {
  console.log(evt.target.result)
  console.log(file.name);
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-11-04T11:01:33.310

以下源代码为文件阅读器添加一个属性

```
 for(i=0; i < files.length; i++)
    {
        var fileReader = new FileReader();
        fileReader.onload = function(file)
        {
              // DO what you need here
              // file name = file.target.fileName
        } // end of reader load
        fileReader.fileName = files[i].name;
        fileReader.readAsBinaryString(files[i]);
    } 
```

# jquery - 在 Rails 项目中设置 SimpleModal

> ID：12546776
> 
> 赞同：0
> 
> 时间：2012-09-22T18:55:00.943
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, modal-dialog, simplemodal

单击图像时，我正在使用[SimpleModal](http://www.ericmmartin.com/projects/simplemodal/)创建弹出视图。该视图将包含更大版本的图像以及该图像的其他一些填充数据。

问题是我对文档有点困惑，而且我对 jQuery/JS 还很陌生。

我假设我们正在创建一个隐藏的 div，其中包含我们想要在索引页面上弹出的所有信息。

布局/application.html.erb

```
<head>
  <script>
    $(document).ready(function() {
        $('.photo_container').click(function(e){
            $('#basic_modal').modal();
        });
    });​

  </script>
</head> 
```

照片/index.html.erb

```
<% @photos.each do |photo| %>

  <div class="photo_container">
    <%= image_tag photo.url %>
  </div>
<% end %>

<div id="basic_modal">
  <p>This is the sample pop up page that will display a bigger image and info.</p>
</div> 
```

当我单击图像时，如何使模式弹出？

编辑：我尝试将脚本移到结束正文标记之前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-16T00:57:35.360

您确定您的应用正在加载 SimpleModal js 文件吗？它的 .js 文件位于 vendor/assets/javascripts 中，它在 application.js 文件中有一行供资产管道使用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T19:01:49.517

给你的图像一个类别，例如，`photo_container`.

然后绑定点击使其打开一个modal：

```
​$(document).ready(function() {
    $('.photo_container').click(function(e){
        $('#basic_modal').modal();
    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T00:53:19.210

Use `jQuery(function () {` instead of `$(document).ready(function() {`

# c# - 使用更多参数实现成功处理程序

> ID：12546778
> 
> 赞同：-1
> 
> 时间：2012-09-22T18:55:09.150
> 
> 标签：c#, jquery, asp.net, ajax, webmatrix

继续我的这篇文章， [将 id 传递给 ajax 调用](https://stackoverflow.com/questions/12546212/passing-id-to-ajax-call/12546324#12546324)

还有一些我想了解更多的东西。

我的问题是这样的

我有 2 个页面（default.cshtml+click.cshtml） 在 default.cshtml 中，我有一个 js 代码来初始化一个 div 区域，它的 id 是一些图像。当我单击上一篇文章中提到的链接时，我需要更改该区域中的图像，因为新图像是从数据库中加载的。每个图像都与一个分配的 id 相关联；现在我不知道应该如何或在哪里放置这个`initialize`脚本，因为默认情况下和点击页面都使用它

```
function init(id)
{
   //...initialize options
   var id=document.GetElementByID("displayimg");
   //...display image
} 
```

如何在具有 2 个或更多参数的 java 脚本中实现成功处理程序？

```
$(document).ready(function ()
{
    $('.viewp').click(function ()
    {
        var responseUrl="~/click?id="+id;                    
        $.ajax(
        {
            type: "GET",
            data:id,
            url:responseUrl,
            success:function(data1, data2)
            {

            }
        });
    });
}); 
```

因为 click.cshtml 将查询数据库表以获取另外 2 个数据值以重新显示图像，它是它的新宽度和高度 :-D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T19:16:06.327

我会用 JSON 从您的服务器响应，例如：

```
{
    height: 20,
    width: 20
} 
```

然后在你的ajax调用中，你可以做

```
$.ajax({
    url: url,
    dataType: "json",
    success: function( dimensions ) {
        // Do something with dimensions.width and dimensions.height
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T19:08:11.400

成功函数必须采用以下形式：`function (data, textStatus, jqXHR)`. 这意味着，无论服务器输出什么都是数据。您将不得不解析`data.responseText`以获取您的 data1 和 data2。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T19:12:05.887

将高度和宽度放入数组并将其发送到ajax。

在 C# 代码中

```
int[] val = { 10, 20 }; 
```

并在 js ajax 成功函数中

```
success: function(value) { 
//  process value[0] which is height or width.... value[1] etc. 
```

# javascript - google map v3 api 拖拽点击事件冲突

> ID：12546793
> 
> 赞同：1
> 
> 时间：2012-09-22T18:56:33.340
> 
> 标签：javascript, google-maps-api-3, onclick, google-maps-markers, drag

我正在开发应用程序，一旦用户点击地图，标记就会出现，用户可以为该标记插入他自己的信息。

我搜索了很多，`get the css positions where user clicked on the map`但 api 没有返回该信息。

所以我尝试了以下代码并且工作得很好。

```
$("#map").bind('click', function(event) {

        event.preventDefault();
        event.stopPropagation();
        $("#map .floatText").remove();

    var this = obj;
    var event = e;
    var myMap   =   this.map;

    var myMarker    =   this.marker;

    var posX = $(obj).position().left, posY = $(obj).position().top;

    var divAdd = "<div class='floatText'><input type='text' id='addText' name='addText'><button id='addTextButton'>Add</buton></div>";

    $("#map").append(divAdd);

    $("#map .floatText").css('position', 'absolute').css('left', (e.pageX - posX)).css('top', (e.pageY - posY)).css('z-index', "1000").css('background-color', "#fff").css('padding', "5px").css('width', "auto").css('border', '2px solid #00AC71');

    $("#addText").focus();

    $("#addTextButton").bind('click', function(event) {

        event.stopPropagation();

        var track = $(".markersUl li:last").attr('data-track');

         var chHtml = $("#addText").val();
         // add an infowindow
         var chInfoWindow = new google.maps.InfoWindow({
            content : chHtml
         });

         chInfoWindow.open(myMap, myMarker[track]);

        $("#map .floatText").remove();

    });

    $("#addText").bind('click', function(event) {

        event.stopPropagation();

    });

    }); 
```

所以这看起来如下

![在此处输入图像描述](../Images/f1ae95311ac5cdb5b99153b7dfda1e03.png)

现在的问题是，只要我拖动地图，当我释放鼠标左键时就会发生单击事件。

对此有任何解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-11-01T01:32:32.287

对于那些从事谷歌地图相关项目并遇到这个问题的人来说，这可能与谷歌地图无关。当在 JavaScript 中发生拖动或单击时，（至少）有 3 个事件按此顺序触发`mousedown`：`mouseup`和`click`. 所以当你拖动地图时，最后，它也会触发一个`click`事件。

看看这个问题，了解这个问题的不同解决方案：[如何区分鼠标“点击”和“拖动”](https://stackoverflow.com/questions/6042202/how-to-distinguish-mouse-click-and-drag)。我个人遵循了`delta = 6`解决方案。

# mongodb - 如何在 Heroku 上获取 MongoDB 版本号？

> ID：12546794
> 
> 赞同：3
> 
> 时间：2012-09-22T18:56:37.993
> 
> 标签：mongodb, heroku

我不确定如何获取在 Heroku 上运行的 MongoDB 版本号？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-22T19:01:58.793

使用 mongo 客户端连接到 mongo 数据库并运行

```
> db.version() 
```

这将打印出当前运行的版本。

您需要使用以下命令向 mongo 提供主机名/用户名/密码：

```
 mongo -h hostname:port_number -d database_name -u username -p password 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T19:08:25.187

如果您在 Heroku 上谈论 MongoHQ，您可以从“数据库信息”下的 MongoHQ 附加仪表板中看到。

在我的“服务器状态”部分中，它显示如下： ![在此处输入图像描述](../Images/9dbc8ffbd63d8e64d2ee21102213d97f.png)

这样，您可以避免在本地安装 mongo 客户端。虽然，这可能是推荐的，用于其他用途。

# perl - 以源代码形式捆绑 perl prereq 模块以进行部署？

> ID：12546801
> 
> 赞同：2
> 
> 时间：2012-09-22T18:57:12.727
> 
> 标签：perl, deployment, module, bundle

我的 webapp 依赖于很多模块。当我在远程服务器上部署时，我必须 cpanm 重新安装所有模块，这有以下问题：

*   减缓。
*   不能包含私有模块/私有补丁
*   将安装最新版本的模块，而不是我正在处理的模块。

所以我想在部署时重新分配它们。我几乎可以使用 PAR，但我不能，因为我不想以二进制形式这样做——作为 Perl 版本，架构可能会有所不同。

`Module::Install::Bundle`是我找到的壁橱。在指定 prereq 后，它可以从 CPAN 自动获取模块及其所有依赖项（直到核心模块）。模块确实构建和测试，但“make install”什么都不做——它根本不安装那些 prereq。

有什么我错过的吗？

我在 Windows 上使用草莓 Perl。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:18:59.887

[Pinto](https://metacpan.org/module/Pinto)为您提供了一种私有的超级 CPAN 镜像，它只在您需要时升级，并且只升级您想要升级的模块。它还可以接受带有私有补丁的 tarball。 [这是有关该主题的视频](http://www.youtube.com/watch?v=oaBBVZFhJUk)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-14T19:01:25.437

cpanm 原则上可以做你想做的事：

*   `cpanm --notest`速度很快（当然您并不总是想跳过测试，但测试是最大的减速源。除此之外，您可以尝试自己编写并行下载器）
*   `cpanm FOO/Bar-1.234.tar.gz`将安装一个确切的版本，并且可以在您的 PAUSE 帐户下上传您的软件包分支（因此它适用于私有但仍然是开源库）
*   `cpanm .`将发行版安装在当前目录中，因此它可能是您的私有库的方式
*   `cpanm foo.tar.gz`也有效

cpanm 的唯一问题是自动生成依赖项列表。

另请注意，在不固定 perl 版本的情况下固定库版本是没有意义的。在这种情况下，您可以使用 PAR。此外，使用 PAR，您无需使用打包程序来获取单片文件 - 您可以使用 PAR::Repository 安装模块，这比单片包更适合调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T19:41:48.323

你可以看看[Carton](http://search.cpan.org/~miyagawa/carton-v0.9.4/lib/Carton.pod)。有了它，您可以为您的应用程序提供自包含的依赖项集。

# java - 将应用程序配置到 facebook 错误：“应用程序配置错误以用于 Facebook 登录..”

> ID：12546809
> 
> 赞同：5
> 
> 时间：2012-09-22T18:58:03.630
> 
> 标签：java, android, facebook

> **可能重复：**
> [应用程序被错误配置为 Facebook 登录：Android Facebook 集成问题](https://stackoverflow.com/questions/12382558/app-is-misconfigured-for-facebook-login-android-facebook-integration-issue)

我正在尝试将 facebook 集成到我的应用程序中。当我按下登录按钮并填写电子邮件和密码时，我在应用程序中收到错误消息：“

> 应用程序被错误配置为 Facebook 登录..

” 然后我必须按“确定”按钮，然后它就会关闭。

我已经在我的 facebook 应用程序中填写了字段，这是一张图片：![在此处输入图像描述](../Images/478ed03981c64bc2ba58b26fda247177.png)

此外，当我按下“登录”按钮（我创建的弹出 facebook 登录的按钮）时，在 logcat 中。我看到以下错误：

> 找不到 com.facebook.katana.AttributionIdProvider 的提供商信息

为什么 facebook 登录不能正常工作？

**编辑：**按下 Okay 按钮后，logcat 不会抛出任何错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T08:17:56.077

几天前我遇到了同样的错误，就我而言，这是由于 android 密钥不匹配造成的。如果它也可以帮助你，这就是我修复它的方法，

在 facebook sdk 中打开 Util.java，设置 private static boolean ENABLE_LOG=true; 现在运行您的应用程序并输入您的电子邮件 ID 和密码，如果密钥不匹配，Facebook 会发回签名。你会在 logcat 中找到这个密钥（签名）。只需复制此密钥并将其粘贴到应用仪表板中即可。那应该可以解决问题。记得设置 private static boolean ENABLE_LOG=true; 回到假

# java - 如何为杰克逊启用严格的类型解析？

> ID：12546810
> 
> 赞同：8
> 
> 时间：2012-09-22T18:58:12.047
> 
> 标签：java, jax-rs, jackson

Jackson 1.9.9 在解析为标量值（bool、int、string）方面有些不一致。任何数组或对象类型都会失败，但您可以将任何标量类型放入字符串中。对于 bool 0 而不是 0 映射到 false/true。int 属性只接受数字。

```
public class Foo { public String s; public boolean b; public int i; }

ObjectMapper mapper = new ObjectMapper();
System.out.println(mapper.readValue("{\"s\":\"abc\"}", Foo.class).s); // "abc"
System.out.println(mapper.readValue("{\"s\":true}", Foo.class).s); // "true"
System.out.println(mapper.readValue("{\"s\":123}", Foo.class).s); // "123"
System.out.println(mapper.readValue("{\"b\":123}", Foo.class).b); // true
System.out.println(mapper.readValue("{\"b\":0}", Foo.class).b); // false
System.out.println(mapper.readValue("{\"b\":\"abc\"}", Foo.class).b); // fails with JsonMappingException
System.out.println(mapper.readValue("{\"i\":\"abc\"}", Foo.class).i); // fails with JsonMappingException
System.out.println(mapper.readValue("{\"i\":true}", Foo.class).i); // fails with JsonMappingException
System.out.println(mapper.readValue("{\"s\":[]}", Foo.class).s); // fails with JsonMappingException
System.out.println(mapper.readValue("{\"s\":{}}", Foo.class).s); // fails  with JsonMappingException
System.out.println(mapper.readValue("{\"b\":[]}", Foo.class).b); // fails with JsonMappingException
System.out.println(mapper.readValue("{\"b\":{}}", Foo.class).b); // fails  with JsonMappingException
System.out.println(mapper.readValue("{\"i\":[]}", Foo.class).i); // fails with JsonMappingException
System.out.println(mapper.readValue("{\"i\":{}}", Foo.class).i); // fails  with JsonMappingException 
```

Jackson是否有**严格的模式**，如果有人将例如布尔值传递给 String 属性，我会收到错误消息？

我在一个 JAX-RS 项目中使用它，这使得基于 Jackson 抛出的异常的错误报告有些困难，因为我得到了大部分错误，但不是全部。我想避免获取原始 ObjectNode 并手动检查所有内容。如果调用者为字符串传递布尔值，那么我想告诉他，因为这很可能是编程错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-11-27T21:54:22.377

FWIW，如果您像我一样在很久以后遇到这种情况，[ALLOW_COERCION_OF_SCALARS](https://fasterxml.github.io/jackson-databind/javadoc/2.9/com/fasterxml/jackson/databind/MapperFeature.html#ALLOW_COERCION_OF_SCALARS)将通过减少杰克逊为您执行的转换次数而有所帮助，尽管它远非完全严格的模式；许多类型强制仍然会执行，但有些会被阻止。链接的文档涉及一些细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T23:04:38.723

Jackson 数据绑定随着时间的推移已经发展到可以接受更多的自动强制，尽管有一些特性 (DeserializationConfig.Feature.FAIL_ON_NULL_FOR_PRIMITIVES) 可以强制执行更严格的检查，但请求的并不多。

鉴于此，您最好为`JsonDeserializer`您想要更严格的类型注册自定义，例如`boolean`/ `Boolean`。您可以在那里实施更严格的检查。

此外，您可以请求功能以获得更严格的限制：我认为这对于某些用例确实有意义，尤其是。如果更宽松的转换可以隐藏真正的问题。

# sql - SQL Oracle Timestamp - 两列之间的算术

> ID：12546812
> 
> 赞同：2
> 
> 时间：2012-09-22T18:58:12.520
> 
> 标签：sql, oracle, timestamp, date-arithmetic

我使用 Oracle 数据库。在我的表中，我有一列 type `Timestamp`，另一`Int`列包含小时数。我如何从另一`Timestamp`列中减去这些时间？

同时我有这样的事情：

```
SELECT (START_TIME - interval 'CLOSING_HOURS' HOUR) as CLOSING_TIME 
 FROM APP.TRUMPS 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T19:19:14.417

你可能想要

```
SELECT start_time - numtodsinterval( closing_hours, 'hour' ) as closing_time
  FROM app.trumps 
```

`numtodsinterval`是将存储在表（或 PL/SQL 变量）中的小时数转换为可以从时间戳中减去的时间间隔的最简单方法。

# excel - VBA excel列匹配

> ID：12546814
> 
> 赞同：0
> 
> 时间：2012-09-22T18:58:32.220
> 
> 标签：excel, vba

我有一个具有如下值的 excel 表：

> R1:A 1 0 1 1 0 1
> R2:B 0 0 1 1 0 0
> R3:C 1 0 1 1 0 1
> R4:D 1 0 1 1 0 1
> R5:E 0 0 1 1 0 0
> R 行
> 
> 输出：
> A，C，D（因为它们有匹配的列）
> B，E

我需要一个根据匹配值对列进行分组的 VBA 脚本。我需要在大量数据（比如 417 列）和 n 行上运行它，请更通用。请帮帮我。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:59:29.457

克里斯是绝对正确的。听起来像“请解决我的整个问题”的问题在这里并不受欢迎。

我假设您对 VBA 知之甚少或一无所知，并且不知道从哪里开始解决这个问题。如果您在您喜欢的搜索引擎中输入“Excel VBA 教程”，您将获得一系列教程。尝试一些，选择你最喜欢的一个，然后系统地完成它。你会惊讶于你建立良好理解的速度之快。

但是，为了让您开始，我将围绕您的问题构建一个教程。我不会对单个语句多说，因为使用 VB Help 或搜索引擎很容易查找它们。例如，第一个语句是`Option Explicit`. 在搜索引擎中键入“excel vba option explicit”，您将获得一个选择页面，这些页面解释了该语句的作用以及为什么包含它是一个好主意。

我假设您知道如何打开 Excel、打开 VB 编辑器、创建模块和执行宏。如果没有，这些将是互联网上任何教程将首先解释的内容。

我用工作表*Input*创建了一个工作簿。我已经用以下数据加载了*Input ：*

![样本数据](../Images/1c4f14ab70c5844dc7f1f6c4231e04c2.png)

第 2 到 6 行与您的数据匹配。我添加了一个标题行和一些不同长度的数据行。您要求一个通用的解决方案，但我不知道如何通用。这可能比您寻求的更多或更少。创建一个类似的工作表或根据您的要求修改以下代码。

将以下宏*Test1*复制到 VB 模块并运行它。

```
Option Explicit
Sub Test1()

  Dim ColMax As Long
  Dim RowMax As Long

  With Worksheets("Input")

    ' There are many different ways of identifying the last used row and
    ' column.  SpecialCells has a selection of parameters and is worth
    ' knowing so I have decided to use it to identify the last row and
    ' column.

    ColMax = .Cells.SpecialCells(xlCellTypeLastCell).Column
    RowMax = .Cells.SpecialCells(xlCellTypeLastCell).Row

    ' Debug.Print outputs values to the Immediate Window which will be at the
    ' bottom of the VB Editor window.  If the Immediate Window is is missing,
    ' click Ctrl+G.

    Debug.Print "Last used column " & ColMax
    Debug.Print "Last used row " & RowMax

  End With

End Sub 
```

使用我的数据，宏将以下内容输出到即时窗口：

```
Last used column 10
Last used row 13 
```

“J”列是第 10 列。这段代码标识了最后使用的行和列，如果我的宏要检查正确的行数和列数，我必须知道它们。将值输出到即时窗口是检查代码的一种简单方法。

现在将宏*Test2*添加到模块并运行它：

```
Sub Test2()

  Dim ColCrnt As Long
  Dim ColMax As Long

  With Worksheets("Input")

    ColMax = .Cells.SpecialCells(xlCellTypeLastCell).Column

    Debug.Print "Row 1:"
    For ColCrnt = 1 To ColMax
      Debug.Print "Col " & ColCrnt & "=" & .Cells(1, ColCrnt).Value & "  ";
      If ColCrnt Mod 5 = 0 Then
        Debug.Print
      End If
    Next

  End With

End Sub 
```

使用我的数据，宏将以下内容输出到即时窗口：

```
Row 1:
Col 1=Id  Col 2=Value 1  Col 3=Value 2  Col 4=Value 3  Col 5=Value 4  
Col 6=Value 5  Col 7=Value 6  Col 8=Value 7  Col 9=Value 8  Col 10=Value 9 
```

我仍然希望您使用 VB 帮助或 Internet 来获得对我使用过的语句的描述，但对我正在做的事情进行一些解释是必要的。

考虑：

`ColMax = Worksheets("Input").Cells.SpecialCells(xlCellTypeLastCell).Column`

在宏*Test2*中，我已将`Worksheets("Input")`字符串的其余部分分离为`With Statement`. 这使代码更快、更清晰、更小，但我可以像这里一样写一个字符串。

`Worksheets("Input")`引用整个工作表。

`Worksheets("Input").X`参考工作表的 X 部分。我本可以引用图表或默认值，但我想引用单元格。 `Worksheets("Input").Cells`引用工作表中的所有单元格。

`Worksheets("Input").Cells.X`引用部分单元格或对单元格进行操作的方法。 `Worksheets("Input").Cells.Sort`，例如，将允许我对工作表进行排序。

`Worksheets("Input").Cells.SpecialCells`让我可以访问一组返回有关`Worksheets("Input").Cells`. 添加参数给：`Worksheets("Input").Cells.SpecialCells(xlCellTypeLastCell)`说明我想要哪种方法。

最后，我添加`.Column`以标识我需要的属性。

如果您要了解 VBA 或几乎任何现代编程语言，了解这种点表示法至关重要。在`X.Y`中，Y 可以是 X 的一部分、适用于 X 的方法或 X 的属性。

`Worksheets("Input").Cells(R, C)`允许我访问 R 行和 C 列的单个单元格。R 是一个整数，最小值为 1，最大值取决于所使用的 Excel 版本。 `Rows.Count`给出您正在使用的版本的最大行号。C 可以是整数（比如 5）或列代码（比如“E”）。“A”列是第 1 列。

`Debug.Print Expression`*将Expression*输出到立即窗口，并在其后加上换行符。 *将Expression*`Debug.Print Expression;`输出到立即窗口，但不**跟**在它后面加上换行符。

 ***`ColCrnt Mod 5`返回 ColCrnt 的余数除以 5。通过测试余数为 0，我可以每 5 行添加一个换行符。

我使用 for 循环输出第 1 行中的每个值。

虽然宏*Test2*只包含 14 条语句，但它使用了很多 VBA 概念。慢慢地完成它。使用 F8 逐句执行宏语句并研究每个语句的作用。如果你能理解这个宏，那么你几乎知道了解决问题所需的一切。

现在我们需要考虑匹配行。我不会使用有效的算法来匹配行，因为这需要更复杂的 VBA。积累知识后，您可以稍后增强代码。我将使用的方法包括：

*   将第 2 行与第 3、4、5、6、... 行进行比较，记录匹配项并记录与前一行匹配的行。
*   比较第 3 行和第 6 行，但不比较第 4 行和第 5 行，因为它们已经与第 2 行匹配。

为了记录比赛，我需要某种方式记录第 2、4 和 5 行是相同的，而我继续发现第 3、6 和 8 行是相同的。将第 4 行与第 2 行匹配后，我不想检查第 4 行与第 5 行。

我将使用布尔数组满足第二个要求：

```
Dim Matched() As Boolean

ReDim Matched(2 To RowMax)

For RowMast = 2 to RowMax
  Matched(RowMast) = False
Next 
```

在`Dim Matched() As Boolean`，`()`说我想要一个动态数组。动态数组是我可以在运行时更改上限和下限的数组。VBA 是少数允许动态数组的语言之一，也是允许您设置下限的更少语言之一。

`ReDim Matched(2 To RowMax)`将下限指定为 2（= 第一个数据行），将上限指定为 RowMax（= 最后一个数据行）。您经常会看到诸如`ReDim Matched(N)`I want N 个条目之类的语句，并让编译器根据 Option Base 语句（如果使用）来确定下限。我总是指定下限，因为我不希望有人通过添加或更改 Option Base 语句来干扰我的数组。

下面将 Matched 的每个元素设置为 False。这不是必需的，因为大多数现代语言都会初始化变量。我记得当情况并非如此时，我更愿意明确表示。

```
For RowMast = 2 to RowMax
  Matched(RowMast) = False
Next 
```

如果 P > N > M，当我将 N 行和 P 行与 M 行匹配时，我会将 Matched(N) 和 Matched(P) 设置为 True，因此我不会针对后面的行测试 N 行。

记录比赛的方式有很多种。我将使用构建字符串的粗略技术。

宏*Test3*创建搜索的输出。它不是一段高效的代码，但它用最少的 VBA 完成工作。将此宏添加到模块并运行它。即时窗口的输出是您请求的输出，除了我添加的额外行：

```
A, C, D
B, E, G
F, J
I, L 
```

祝 VBA 编程好运。

```
Sub Test3()

  Dim ColCrnt As Long
  Dim ColMax As Long
  Dim MatchCrnt As Boolean
  Dim Matched() As Boolean
  Dim MatchStgTotal As String
  Dim MatchStgCrnt As String
  Dim RowMast As Long    ' The master row; the row I am comparing
                         ' against later rows
  Dim RowMax As Long
  Dim RowSub As Long     ' The subordinate row; the row I am comparing
                         ' against an earlier row

  With Worksheets("Input")

    ColMax = .Cells.SpecialCells(xlCellTypeLastCell).Column
    RowMax = .Cells.SpecialCells(xlCellTypeLastCell).Row

    MatchStgTotal = ""      ' No matches discovered yet

    ' Initialise Matched
    ReDim Matched(2 To RowMax)
    For RowMast = 2 To RowMax
      Matched(RowMast) = False
    Next

    For RowMast = 2 To RowMax
      If Not Matched(RowMast) Then
        ' This row has not been matched against an earlier row

        MatchStgCrnt = ""   ' No matches for row RowMast discovered yet

        For RowSub = RowMast + 1 To RowMax
          ' Match row RowMast against every later row

          If Not Matched(RowSub) Then
            ' This row has not been matched against an earlier row

            MatchCrnt = True     ' Assume RowSub matches RowMast
                                 ' until find otherewise

            For ColCrnt = ColMax To 2 Step -1
              ' Compare cells from right to left so rows with different
              ' numbers of values fails to match quickly.  This is the only
              ' consession to efficiency in this loop.  There are much better
              ' ways of doing this but I think I have included enough VBA in
              ' this tutorial.

              If .Cells(RowMast, ColCrnt).Value <> _
                 .Cells(RowSub, ColCrnt).Value Then
                ' These rows do not match
                MatchCrnt = False
                Exit For   ' N point checking further cells
              End If

            Next

            If MatchCrnt Then
              ' Row RowSub matches RowMast

              ' Add this row's Id to the list of matches against RowMast
              MatchStgCrnt = MatchStgCrnt & ", " & .Cells(RowSub, 1).Value
              Matched(RowSub) = True  ' Do not check this row again

            End If
          End If

        Next RowSub

        If MatchStgCrnt <> "" Then
          ' RowMast has been matched against one or more other rows.
          ' MatchCrnt contains a list of those other rows.
          If MatchStgTotal <> "" Then
            ' A previous row have been matched.
            ' Terminate it's string with a newline
            MatchStgTotal = MatchStgTotal & vbLf
          End If
          MatchStgTotal = _
                     MatchStgTotal & .Cells(RowMast, 1).Value & MatchStgCrnt
        End If
      End If
      ' Note: Matched(RowMast) has not been set if row RowMast has been matched
      '       because I will never loook as row RowMast again.
    Next RowMast

  End With

  Debug.Print MatchStgTotal

End Sub 
```***

# c# - WCF System.InvalidOperationException

> ID：12546816
> 
> 赞同：2
> 
> 时间：2012-09-22T18:58:54.220
> 
> 标签：c#, wcf

我收到以下消息的异常：

> 服务“ATPhoneControllerWinService.WCFService”的应用程序（非基础设施）端点为零。这可能是因为没有为您的应用程序找到配置文件，或者因为在配置文件中找不到与服务名称匹配的服务元素，或者因为在服务元素中没有定义端点。

服务：App.config：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
  <system.serviceModel>
    <services>
      <service name="ATPhoneControllerWinService.WCFService">
        <endpoint address="net.pipe://localhost/ATPipe" 
                  binding="netNamedPipeBinding"
                  contract="ATPhoneControllerWinService.IWCFService" 
        />
      </service>
    </services>
  </system.serviceModel>
</configuration> 
```

客户端 App.config：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
  <system.serviceModel>
    <client>
      <endpoint
         address  = "net.pipe://localhost/ATPipe"
         binding  = "netNamedPipeBinding"
         contract = "ATPhoneControllerWinService.IWCFService"
         />
    </client>
  </system.serviceModel>
</configuration> 
```

文件位于不同的 VS2012 项目中（一个是 WPF，另一个是 windows（不是 WCF）服务）。我是 WCF 的新手，我不知道我错过了什么。

项目结构：

```
C:.
|   ATPhoneController.sln
|   tree.txt
|   
+---ATPhoneController
|   |   App.config <<<---<b>This is second App.config listed above</b>
|   |   App.xaml
|   |   App.xaml.cs
|   |   ATPhoneControllerUI.csproj
|   |   MainWindow.xaml
|   |   MainWindow.xaml.cs
|   |   
|   +---bin
|   |   +---Debug
|   |   |       App.config
|   |   |       ATPhoneController.exe
|   |   |       ATPhoneController.exe.config
|   |   |       ATPhoneController.pdb
|   |   |       ATPhoneController.vshost.exe
|   |   |       ATPhoneController.vshost.exe.config
|   |   |       ATPhoneControllerWinService.exe
|   |   |       ATPhoneControllerWinService.pdb
|   |   |       
|   |   \---Release
|   +---obj
|   |   \---Debug
|   |       |   App.g.cs
|   |       |   App.g.i.cs
|   |       |   ATPhoneController.csproj.FileListAbsolute.txt
|   |       |   ATPhoneController.csproj.GenerateResource.Cache
|   |       |   ATPhoneController.csprojResolveAssemblyReference.cache
|   |       |   ATPhoneController.exe
|   |       |   ATPhoneController.g.resources
|   |       |   ATPhoneController.pdb
|   |       |   ATPhoneController.Properties.Resources.resources
|   |       |   ATPhoneControllerUI.csproj.FileListAbsolute.txt
|   |       |   ATPhoneControllerUI.csproj.GenerateResource.Cache
|   |       |   ATPhoneControllerUI.csprojResolveAssemblyReference.cache
|   |       |   ATPhoneController_MarkupCompile.cache
|   |       |   ATPhoneController_MarkupCompile.i.cache
|   |       |   DesignTimeResolveAssemblyReferencesInput.cache
|   |       |   MainWindow.baml
|   |       |   MainWindow.g.cs
|   |       |   MainWindow.g.i.cs
|   |       |   TemporaryGeneratedFile_036C0B5B-1481-4323-8D20-8F5ADCB23D92.cs
|   |       |   TemporaryGeneratedFile_E7A71F73-0F8D-4B9B-B56E-8E70B10BC5D3.cs
|   |       |   
|   |       \---TempPE
|   |               Properties.Resources.Designer.cs.dll
|   |               
|   +---Properties
|   |       AssemblyInfo.cs
|   |       Resources.Designer.cs
|   |       Resources.resx
|   |       Settings.Designer.cs
|   |       Settings.settings
|   |       
|   \---Service References
\---ATPhoneControllerWinService
    |   App.config <<<---<b>This is first App.config listed above</b>
    |   ATPhoneControllerWinService.csproj
    |   ATPhoneControllerWinService.csproj.user
    |   ATWinService.cs
    |   IWCFService.cs
    |   WCFService.cs
    |   WinServiceInstaller.cs
    |   
    +---bin
    |   +---Debug
    |   |       App.config
    |   |       ATPhoneControllerWinService.exe
    |   |       ATPhoneControllerWinService.exe.config
    |   |       ATPhoneControllerWinService.InstallLog
    |   |       ATPhoneControllerWinService.pdb
    |   |       ATPhoneControllerWinService.vshost.exe
    |   |       ATPhoneControllerWinService.vshost.exe.config
    |   |       ATPhoneControllerWinService.vshost.exe.manifest
    |   |       InstallUtil.InstallLog
    |   |       
    |   \---Release
    +---obj
    |   \---Debug
    |       |   ATPhoneControllerWinService.csproj.FileListAbsolute.txt
    |       |   ATPhoneControllerWinService.exe
    |       |   ATPhoneControllerWinService.pdb
    |       |   DesignTimeResolveAssemblyReferences.cache
    |       |   DesignTimeResolveAssemblyReferencesInput.cache
    |       |   TemporaryGeneratedFile_036C0B5B-1481-4323-8D20-8F5ADCB23D92.cs
    |       |   TemporaryGeneratedFile_E7A71F73-0F8D-4B9B-B56E-8E70B10BC5D3.cs
    |       |   
    |       \---TempPE
    +---Properties
    |       AssemblyInfo.cs
    |       
    \---Service References 
```

好的，我现在没有遇到异常，通过以编程方式添加端点来解决它：

```
host = new ServiceHost(typeof(WCFService), new Uri("net.pipe://localhost/ATPipe"));
            host.AddServiceEndpoint(typeof(IWCFService), new NetNamedPipeBinding(), "net.pipe://localhost/ATPipe");
            host.Open(); 
```

问题仍然存在，我应该将应用程序配置文件中的 xml 配置放在哪里，或者上面的配置有什么问题^？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T11:35:08.813

最简单的方法是使用[WCF 配置编辑器](http://msdn.microsoft.com/en-us/library/ms732009.aspx)（Visual Studio 附带）来添加端点。只需定义端点并将生成的配置与您的配置进行比较。

这样，您就不必寻找拼写问题或放错位置的定义。

# php - 表单的 $_POST 显示为空

> ID：12546817
> 
> 赞同：0
> 
> 时间：2012-09-22T18:58:57.653
> 
> 标签：php, javascript, html

我正在使用 javascript 并尝试从一个函数调用另一个函数，并在 php 的 $_POST 变量中传递参数！我想不通为什么我每次都为空。

这是javascript中表单的代码

```
" To " +
        "<select name='to'>"; 
        //document.write(arr.length); 
        for(i=0; i<arr.length; i++)
        {
        if(arr[i])
        txt_bottom += "<option  value='" + arr[i] + "'>" + arr[i] + "</option>";    
        }
        txt_bottom+= "</select> <br> <br>" +

"Input : <input type='text' name='input_value' />
 <input type='submit' value='Evaluate'
 onclick=\"calculate_mesurement('<?php echo isset($_POST["from"])?$_POST["from"]:"nothing"?>', '<?php echo isset($_POST["to"])?>')\"/> <br><br>" + 
```

为了使代码清晰，这只是`calculate_measurement`接受两个参数的信息

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:56:45.933

您是否尝试`calculate_mesurement`使用用户刚刚输入的值`from`和运行`to`？`$_POST`在提交表单之前不会设置，您必须在提交之前使用 Javascript 获取表单值。

```
onclick="calculate_mesurement(document.getElementsByName('from')[0].value, document.getElementsByName('to')[0].value)" 
```

# c - 为什么 Visual Studio 2012 在源文件未更改时运行自定义构建步骤？

> ID：12546819
> 
> 赞同：6
> 
> 时间：2012-09-22T18:59:09.860
> 
> 标签：c, visual-studio, msbuild, dependencies, yacc

我在 Visual Studio 2012 C++/CLI 中使用 yacc 和 lex，并为 yacc 源文件创建了一个自定义构建步骤，如下图所示

![自定义构建属性页面](../Images/f18c003301ba8360862264c355e00aaa.png)

输出文件有两个依赖项。它们是 yacc 源文件 icl5kyacc.y 和 yyparse.c 模板文件。每次我构建解决方案时，即使 yyparse.c 和 icl5kyacc.y 源文件没有被修改，自定义构建步骤也会运行。这是构建后的目录列表。

```
 21-Sep-2012  10:19:18p         28,210    A icl5kyacc.y
  17-Sep-2012   7:32:06p          9,042    A yyparse.c
  22-Sep-2012  11:43:56a         38,233    A ICL5KYACC.cpp
  22-Sep-2012  11:43:56a          2,160    A icl5kyacc.h 
```

再次建造后

2> 从 icl5kyacc.y 生成 icl5kyacc.cpp

```
 21-Sep-2012  10:19:18p         28,210    A icl5kyacc.y
  17-Sep-2012   7:32:06p          9,042    A yyparse.c
  22-Sep-2012  11:45:46a         38,233    A ICL5KYACC.cpp
  22-Sep-2012  11:45:46a          2,160    A icl5kyacc.h 
```

我是否误以为使用自定义构建步骤应该在构建步骤的输入和输出文件之间自动应用标准依赖规则？我很好奇的一件事是Studio 在 Additional Dependencies 下为我放入的**%(AdditionalInputs)宏。**不确定那是什么，或者是否以某种方式指向正在修改的文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T09:42:40.993

您确定您的输出文件实际上位于您指定的位置吗？

查看您的列表，您列出了输入`%(Directory)yyparse.c`（这也应该包括 .y 文件）。您的输出不应该也位于`%(Directory)icl5kyacc.h`and中`%(Directory)ICL5KYACC.cpp`，看到您的列表似乎表明它们位于同一目录中。

如果找不到输出文件或输出文件比输入文件旧，则构建任务将重新运行。如果您的输出文件路径错误，则该工具将找不到它们并假定构建任务需要再次运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T17:24:18.833

问题是 %(Directory) 是从解决方案的父级到项目目录“ICL5K\ICL5K\”的相对路径，并且在构建期间当前目录已经是项目目录。因此，yyparse.c 依赖项正在 C:\ICL5K\ICL5K\ICL5K\ICL5K 中查找。我应该使用 $(ProjectDir)，它是来自根目录的完整路径，包括驱动器说明符“C:\ICL5K\ICL5K\”。但更好的是意识到所有输入和输出文件都在项目目录中，并且这已经是当前默认目录，并删除所有目录宏，如下所示 ![图片在这里](../Images/3a74b75016112f258e2101a88b23ac62.png) 此外，没有必要将 icl5kyacc.y 指定为依赖项，因为自定义构建步骤是 icl5kyacc.y 的属性，因此该文件已作为依赖项包含在内。

# jquery - jQuery Mobile 在页面加载时弹出以打开

> ID：12546821
> 
> 赞同：5
> 
> 时间：2012-09-22T18:59:20.153
> 
> 标签：jquery, jquery-mobile, mobile, pageload

我正在使用 JQM 的新弹出功能。通过单击按钮启动弹出窗口很简单，但是如何让弹出窗口在页面加载时启动？

JQM 文档说您可以通过以下方式初始化弹出窗口：

```
$( "#myPopupDiv" ).popup( "open" ) 
```

我通过使用下面的代码进行了尝试，但无法使其正常工作。

```
$(document).bind("mobileinit", function(){
$( "#myPopupDiv" ).popup( "open" )
}); 
```

这是一个使用弹出窗口中的视频和一个启动它的按钮的工作演示。

[http://jsfiddle.net/fxakH/](http://jsfiddle.net/fxakH/)

如果有人可以帮助在页面加载时启动此功能，我们将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:47:24.400

我有同样的问题，并用谷歌搜索了一下。我发现你也在 jQuery-forum 上问过这个问题并得到了答案：

[http://forum.jquery.com/topic/launching-popout-on-page-load](http://forum.jquery.com/topic/launching-popout-on-page-load)
[http://jsfiddle.net/fxakH/4/](http://jsfiddle.net/fxakH/4/)

对于其他有同样问题
的人：关键似乎是在`pageshow`活动期间打开弹出窗口。这个对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T00:01:59.997

“mobileinit”事件立即触发。你试过“ [pageinit](http://jquerymobile.com/test/docs/api/events.html) ”吗？

```
$(document).bind("pageinit", function(){
    $( "#myPopupDiv" ).popup( "open" )
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T15:47:22.133

我有同样的问题，我尝试了如下方法。

我页面中的弹出窗口将在页面加载和页面中的锚点上打开

所以在 pageinit 中，我初始化了弹出窗口，并且在该语句之后，我触发了锚点的点击，这也打开了弹出窗口。那行得通。这是代码。

```
//script to be called on add seat page
$( document ).delegate("#addseat-page", "pageinit", function() {
  $("#vipPopup").popup(); //vip popup
  $("#openvipPopup").trigger("click"); //openvipPopup is the id of the anchor for popup
}); 
```

干杯。

# javascript - 忽略 mousemove 上的子元素

> ID：12546827
> 
> 赞同：13
> 
> 时间：2012-09-22T19:00:07.363
> 
> 标签：javascript, mousemove, mouse-position

我尝试使用 mousemove 获取鼠标相对于元素的位置。它工作正常，但是当鼠标悬停一个子元素时，坐标是相对于这个子元素的。我想要鼠标相对于父 div 的位置，而不是孩子。

例如，请参阅[此 JSFiddle](http://jsfiddle.net/JulianG/Bp3wH/)。

```
var object = document.getElementsByClassName('object'),
scene = document.getElementById('scene');

function initMove() {

for(var i=0; i<object.length; i++) {

  object[i].addEventListener("mousemove", function(event) {
    //event.stopPropagation();
    return false;
  }, false);
}

scene.addEventListener("mousemove", function (event) {
  //event.stopPropagation();
  //event.currentTarget;
  moveX = event.offsetX;
  moveY = event.offsetY;
  console.log(moveX + ' + ' + moveY);
  }, false);

}

function init() {
  initMove();
  document.onselectstart = function(){ return false; }
};

init();​ 
```

添加`event.stopPropagation()`子项不返回任何数据。而且我不确定如何`event.currentTarget`工作。

我不能使用 mouseenter 或其他所有仅鼠标控件，因为我希望它是触摸友好的（通过用 touchmove 替换 mousemove）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T20:16:42.553

在上面的代码中`mousemove`，尝试使用以下 for`moveX`和`moveY`：

```
moveX = event.clientX - scene.offsetLeft;
moveY = event.clientY - scene.offsetTop; 
```

另外，你忘记`#`了`$('scene')`。

这是一个更新的[JSFiddle](http://jsfiddle.net/Bp3wH/8/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T19:12:02.737

使用`mousemove`和 光标坐标获取全局鼠标位置。然后从中减去子元素的偏移量。

```
var scene = $('#scene');
scene.mousemove(function(e){
    var offsetX = e.pageX - scene.offset().left;
    var offsetY = e.pageY - scene.offset().top;
}); 
```

您的整个脚本可能类似于以下经过测试的示例，可让您移动到场景中的对象。

```
jQuery(document).ready(function(){

    var scene = $('#scene');
    var object = $('.object');

    scene.mousemove(function(e){
        // get offset of object relative to scene
        var offsetX = e.pageX - scene.offset().left;
        var offsetY = e.pageY - scene.offset().top;

        // grab object in it's center (optional)
        offsetX -= object.width() / 2;
        offsetY -= object.height() / 2;

        // don't left to object out of the scene
        var maxX = scene.width() - object.width();
        var maxY = scene.height() - object.height();

        if(0 > offsetX) offsetX = 0;
        else if(offsetX > maxX) offsetX = maxX ;

        if(0 > offsetY) offsetY = 0;
        else if(offsetY > maxY) offsetY = maxY;

        // delete decimals
        offsetX = Math.floor(offsetX);
        offsetY = Math.floor(offsetY);

        // debug information
        object.html('X: ' + offsetX + '<br>Y: ' + offsetY);

        // move object
        object.css('left', offsetX).css('top', offsetY);
    });

}); 
```

这是你想做的吗？这是你的小提琴： http: [//jsfiddle.net/Bp3wH/9/](http://jsfiddle.net/Bp3wH/9/)（如果你喜欢这个版本，只有光学改进[http://jsfiddle.net/Bp3wH/11/](http://jsfiddle.net/Bp3wH/11/)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-22T06:49:59.437

为了将来参考，您可以简单地创建一个绝对 div 并将其放在顶部，设置 z-index 并将其固定在包含子项的父项的顶部和左侧，然后更改代码以使事件处理程序在选择器上运行对于顶部的输入层。将您的高度和宽度值拆分为光标上的 X 和 Y，它位于中心。

# java - JavaFX 最低要求

> ID：12546828
> 
> 赞同：1
> 
> 时间：2012-09-22T19:00:11.593
> 
> 标签：java, netbeans, javafx, game-engine, main

所以我对Java还是很陌生，我正在尝试制作一个游戏。我使用在线教程创建了一个**非常**基本的游戏引擎。我有三个类，Engine（核心）、Sprite、SpriteManager。这些类中的每一个都在一个包内的它们自己的 .java 文件中进行了描述。我正在使用 NetBeans，我想创建另一个 .java 来处理游戏的前端；扩展了我认为是 JavaFX 的 Application 类的东西。唯一的问题是，当我创建此文件并尝试运行游戏时，我在调试控制台中收到此消息：

```
run:
java.lang.NoSuchMethodException: kingdomsclash.Engine.main([Ljava.lang.String;)
    at java.lang.Class.getMethod(Class.java:1622)
    at com.javafx.main.Main.launchApp(Main.java:656)
    at com.javafx.main.Main.main(Main.java:805)
Java Result: 1
jfxsa-run:
BUILD SUCCESSFUL (total time: 4 seconds) 
```

看起来 NB 甚至没有尝试运行我的 FrontEnd 文件，而是使用 Engine.java，即使 Engine**只是**一个类声明。FrontEnd 就是NB 在新建java 文件`hello world`时创建的模板；`Main Class`它不实例化任何其他类。

TL;博士

1.  如何让 java 应用程序首先运行 FrontEnd 或以其他方式修复上述错误？

非常感谢您的帮助。如果您需要任何其他信息，请随时询问。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T21:04:58.483

在 NetBeans 中，您可以转到`File | Project Properties | Run`并更改`Application`类字段以匹配您的`kingdomclash.FrontEnd`类（其中应该有一个`main`方法，扩展 JavaFX`Application`并且也有一个`start`方法）。

只要您最初将项目设置为 JavaFX 项目，它就应该可以工作。

如果只是一个普通的 Java 项目，NetBeans 可能找不到 JavaFX 运行时，在这种情况下，您可以按照下面的说明进行操作。如果您现有的代码是为 Swing 编写的，我建议您为 JavaFX 重写它，而不是尝试混合这两个系统，这会在您刚开始时带来不必要的复杂性。

NetBeans 具有用于 JavaFX 应用程序的特殊项目和平台类型，您应该使用它们（否则它不会找到 javafx 运行时）。有关于如何设置它的[文档](http://netbeans.org/kb/docs/java/javafx-setup.html#tutorials)（但不幸的是，它目前已经过时，因为它不是指当前的 JavaFX 2.2 版本，而是指平台设置更复杂的旧 JavaFX 2.1 版本）。基本上，您需要做的是使用最新的 Java 版本（jdk 7.7u6+）和最新的 NetBeans 版本（7.2+）并选择 new `Project | JavaFX | JavaFX Application`. NetBeans 应该创建一个可以运行的基本 hello world 框架。将您的游戏代码复制并粘贴到其中，确保它仅使用 JavaFX 类而不是 java awt 或 swing 类，您应该一切顺利。

您可能还对这个关于使用 JavaFX 创建精灵动画的[非常简洁的教程感兴趣。](http://blog.netopyr.com/2012/03/09/creating-a-sprite-animation-with-javafx/)

# google-maps - 无法在谷歌地图上加载多个融合表层

> ID：12546829
> 
> 赞同：0
> 
> 时间：2012-09-22T19:00:12.053
> 
> 标签：google-maps, treeview, google-fusion-tables, radtreeview

我使用融合表在谷歌地图上加载多个 FusionTableLayer。但是今天突然我发现我无法在 google map api 中一次加载超过 5 个 fusiontablelayer。

js代码是

```
<script type="text/javascript" id="telerikClientEvents1">
        var layers = [];
        var map,jsg;
        var layerName, ctr = 0;
        jsg = new google.maps.FusionTablesLayer({
            query: {
                select: '\'geometry\'',
                from: '1jWdnG9b_mQP03PowydJufDpztjWo0AIipDpTjSU'
            }, suppressInfoWindows: true
        });

        function initialize() {
            var mapOptions = {
                center: new google.maps.LatLng(21.807007904182043, 83.90197012695307),
                zoom: 10,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);

            // District Layer           
            jsg.setMap(map);

            google.maps.event.addListener(layers[2], 'click', show_info);
            google.maps.event.addListener(layers[3], 'click', show_info);
            google.maps.event.addListener(layers[4], 'click', show_info);

        } // End of INITIALIZE

        layers[1] = "";
        layers[2] = "";
        // Block Layer
        layers[2] = new google.maps.FusionTablesLayer({
            query: {
                select: '\'geometry\'',
                from: '1oZafm0cmC9L5FQVHuqLHNxcH3Pw1D_rJFEGnzK0'
            }, suppressInfoWindows: true
        });
        // Gp Layer
        layers[3] = new google.maps.FusionTablesLayer({
            query: {
                select: '\'geometry\'',
                from: '1NCtxMDVIcfDZc8bLiTT0nkVBSqwpv3mhsRJS8UM'
            }, suppressInfoWindows: true
        });
        // Village Layer
        layers[4] = new google.maps.FusionTablesLayer({
            query: {
                select: '\'geometry\'',
                from: '15erGSkOpR8L9HsxK25Ps4IfusUjN6996nwtC_qc'
            }, suppressInfoWindows: true
        });
        layers[6] = new google.maps.FusionTablesLayer({
            query: {
                select: '\'geometry\'',
                from: '1RxuDmSZLf5tfcpp0SDWb_50a0dAH1ePFCggby0U',
                where: 'PROJ_TYPE = \'Micro Irrigation\''
            }, suppressInfoWindows: true
        });
        layers[7] = "";
        layers[8] = new google.maps.FusionTablesLayer({
            query: {
                select: '\'geometry\'',
                from: '1RxuDmSZLf5tfcpp0SDWb_50a0dAH1ePFCggby0U',
                where: 'PROJ_TYPE = \'Water Conservation/Harvesting\''
            }, suppressInfoWindows: true
        });
        layers[9] = "";
        layers[10] = new google.maps.FusionTablesLayer({
            query: {
                select: '\'geometry\'',
                from: '1RxuDmSZLf5tfcpp0SDWb_50a0dAH1ePFCggby0U',
                where: 'PROJ_TYPE = \'Renovation of Traditional Waterbodies\''
            }, suppressInfoWindows: true
        });
        layers[11] = ""
        layers[12] = new google.maps.FusionTablesLayer({
            query: {
                select: '\'geometry\'',
                from: '1RxuDmSZLf5tfcpp0SDWb_50a0dAH1ePFCggby0U',
                where: 'PROJ_TYPE = \'Construction of Building\''
            }, suppressInfoWindows: true
        });

        //<![CDATA[
        //Information Window Shown in DIV

        function show_info(layerEvt) {
            //document.getElementById('show_info_details').innerHTML = layerEvt.infoWindowHtml;
            $("#show_info_details").html(layerEvt.infoWindowHtml);
            if (ctr == 0) {
                $(".panel").show("slow");
                $(".trigger").toggleClass("active");
                ctr = 1;
            }

        }
        // Checking and unchecking the treeview checked boxes in map
        function RadTreeView1_NodeChecked(sender, args) {
            var node = args.get_node();
            var childNodes = node.get_nodes();

            if (childNodes.get_count() > 0) {
                for (var i = 0; i < childNodes.get_count(); i++) {
                    var childNode = childNodes.getNode(i);
                    childNode.select();
                    if (childNode.get_checked()) {
                        alert("checked called");
                        layers[childNode.get_value()].setMap(map);
                    }
                    else {
                        alert("Entering");
                        if (layers[childNode.get_value()] != "") {
                            alert("Unchecked called");
                            layers[childNode.get_value()].setMap(null);
                        }

                    }

                }
            }
            //checking for node checked
            else {
                if (node.get_checked()) {
                    layers[node.get_value()].setMap(map);
                }

                else {
                    layers[node.get_value()].setMap(null);
                }
            }
        }
        //]]>
    </script> 
```

树视图代码是

```
<asp:Panel ID="Panel1" runat="server" Height="410px">
                <telerik:RadTreeView ID="RadTreeView1" Runat="server" CheckBoxes="True" CheckChildNodes="True" 
                    ShowLineImages="False" Skin="Transparent" TriStateCheckBoxes="False" 
                    onclientnodechecked="RadTreeView1_NodeChecked">
                    <Nodes>
                        <telerik:RadTreeNode runat="server" Text="Administartive Boundaries">
                            <Nodes>
                                <telerik:RadTreeNode runat="server" Text="District" Value="1" Checkable="False">
                                </telerik:RadTreeNode>
                                <telerik:RadTreeNode runat="server" Text="Block" Value="2">
                                </telerik:RadTreeNode>
                                <telerik:RadTreeNode runat="server" Text="GP" Value="3">
                                </telerik:RadTreeNode>
                                <telerik:RadTreeNode runat="server" Text="Village" Value="4">
                                </telerik:RadTreeNode>
                            </Nodes>
                        </telerik:RadTreeNode>
                        <telerik:RadTreeNode runat="server" Text="Schemes">
                            <Nodes>
                                <telerik:RadTreeNode runat="server" Text="Micro Irrigation" Value="6">
                                </telerik:RadTreeNode>
                                <telerik:RadTreeNode runat="server" Text="Flood Control" Value="7" Checkable="False">
                                </telerik:RadTreeNode>
                                <telerik:RadTreeNode runat="server" Text="Water Conservation/Harvesting" Value="8">
                                </telerik:RadTreeNode>
                                <telerik:RadTreeNode runat="server" Text="Drought ?" Value="9" Checkable="False">
                                </telerik:RadTreeNode>
                                <telerik:RadTreeNode runat="server" Text="Renovation of Traditional Waterbodies" Value="10" >
                                </telerik:RadTreeNode>
                                <telerik:RadTreeNode runat="server" Text="nOTHING" Value="11" Checkable="false" >
                                </telerik:RadTreeNode>
                                <telerik:RadTreeNode runat="server" Text="Construction of Building" Value="12" >
                                </telerik:RadTreeNode>
                            </Nodes>
                        </telerik:RadTreeNode>
                    </Nodes>
                </telerik:RadTreeView>
            </asp:Panel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:00:07.860

"**限制**

您可以使用 Maps API 将最多五个 Fusion Tables 图层添加到地图中，其中一个可以使用最多五个样式规则设置样式。”

[https://developers.google.com/maps/documentation/javascript/layers#FusionTables](https://developers.google.com/maps/documentation/javascript/layers#FusionTables)

# javascript - 如何创建导航链接

> ID：12546830
> 
> 赞同：-6
> 
> 时间：2012-09-22T19:00:13.337
> 
> 标签：javascript, html, css

我想创建这样的 html 导航链接：

![在此处输入图像描述](../Images/4ce0831a58cd16cc7f03eeb696d78d70.png)

但我不知道隐藏html下划线以及如何更改默认html颜色。你能告诉我如何做到这一点的基本例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T19:13:08.233

我很有趣你已经有一个导航栏。

1.  要禁用带下划线的文本，请使用 css "text-decoration: none;"。
2.  要设置“a”的颜色，请使用“color: rgb(256,256,256);” 或者你使用“颜色：#000000;”。

    `a{ text-decoration: none; color: rgb(256,256,256); }`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T19:18:18.830

**HTML：**

```
<ul>
    <li>GeForce > <a href="#">Link 1</a></li>
    <li>GeForce > <a href="#">Link 2</a></li>
    <li>GeForce > <a href="#">Link 3</a></li>
</ul> 
```

**CSS：**

```
body {
    background: #000;   
}
ul {
    list-style-type: none;
    padding: 40px;
}
li {
    color: #fff;
    font-family: Arial;
    font-size: 14px;
}
li > a {
    color: #76b900;
    text-decoration: none;
}
li > a:hover {
    text-decoration: underline;
} 
```

**现场演示：[jsFiddle](http://jsfiddle.net/98RsX/)**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-22T19:04:13.687

```
a{color: green; text-decoration: none;} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-22T19:19:46.320

要隐藏下划线并添加颜色，您的答案是 CSS。

这是给你的一个例子：

HTML：

```
<ul class="navigation-list"> <!--the name 'navigation-list' is arbitrary-->
<li><a href="#">Home</a></li>
<li><a href="#">Products</a></li>
<li><a href="#">About</a></li>
<li><a href="#">Contact</a></li>
</ul>​ 
```

CSS：

```
ul.navigation-list {
    background-color: rgb(30,30,30);
    height:35px;
}

ul.navigation-list li{
    float:left;}

ul.navigation-list li a{
    padding:4px 8px;
    text-decoration:none; /**this removes the underline part **/
    color:rgb(250,250,250);
    font-family:Verdana;

}

ul.navigation-list li a:hover{
    text-decoration:underline; /**this adds the underline part **/
    background-color:rgb(80,80,80);
} 
```

JSfiddle在这里：http: [//jsfiddle.net/u9A5K/2/](http://jsfiddle.net/u9A5K/2/)

如果您有任何问题，请不要犹豫：）

# django - Django：在保存之前设置内联表单的值

> ID：12546831
> 
> 赞同：4
> 
> 时间：2012-09-22T19:00:18.487
> 
> 标签：django, admin, inline, django-forms

我在管理界面中遇到了关于 Django 内联的问题。我有两个类：`List`并`ListElement`定义如下：

```
class List(models.Model):
    pass

class ListElement(models.Model):
    text = models.CharField(max_length = 64)
    parent = models.ForeignKey(List, related_name = 'elements') 
```

管理视图是：

```
class ListElementInline(admin.TabularInline):
    model = ListElement
    extra = 3

class ListForm(forms.ModelForm):
    default_text = forms.CharField(max_length = 64)
    class Meta:
        model = List

class ListAdmin(admin.ModelAdmin):
    form = ListForm
    inlines = [ListElementInline] 
```

由于我很懒，我想要一个列表级字段，我可以用“默认”值填充它，并且在保存整个内容之前，这个默认值将被插入到所有`ListElements`留空的字段中。

我遇到的主要问题是这应该在验证步骤中完成，此时数据尚未清理。另外，我知道可以在内联表单和整个内联表单集（[链接](https://stackoverflow.com/questions/9422735/accessing-parent-model-instance-from-modelform-of-admin-inline)）之间进行通信，但我找不到任何信息如何连接模型表单（）和内联的表单集`ListAdmin`（`ListElementInline`）。

感谢您的任何建议。

# php - 有什么办法可以减小文本的大小？

> ID：12546832
> 
> 赞同：6
> 
> 时间：2012-09-22T19:00:29.047
> 
> 标签：php, mysql, sql, encoding

**描述：**我有一个巨大的 MySQL 数据库表。总大小约为 10 TB。它只包含文本。

**此数据库表中的示例文本：**

> 在其他情况下，一些国家逐渐学会生产以前只有美国和其他几个国家才能生产的相同产品和服务。美国的实际收入增长已经放缓。

大约有 500 亿种不同的文本。

**我尝试了什么？**

我已经尝试将它们全部压缩。实际上它起作用了，减小了总尺寸。但是，我需要进行搜索，当它们位于 zip 文件中时，我无法搜索任何数据。

我试过 PHP 的`base64`编码。它使我的示例文本数据为：

> SW4gb3RoZXIgY2FzZXMsIHNvbWUgY291bnRyaWVzIGhhdmUgZ3JhZHVhbGx5IGxlYXJuZW QgdG8gcHJvZHVjZSB0aGUgc2FtZSBwcm9kdWN0cyBhbmQgc2VydmljZXMgdGhhdCBwcmV2 aW91c2x5IG9ubHkgdGhlIFUuUy4gYW5kIGEgZmV3IG90aGVyIGNvdW50cmllcyBjb3VsZC Bwcm9kdWNlLiBSZWFsIGluY29tZSBncm93dGggaW4gdGhlIFUuUy4gaGFzIHNsb3dlZC4 =

**我想完成什么？**

我想在将它们发送到 MySQL 之前减小文本的大小。首先，我不知道我怎么能做这份工作。我正在考虑加密和解密数据。

**所以，这是我想做的一个例子：**

我想在存储之前加密文本数据。然后，我想从 MySQL 调用加密数据以进行解密。

有什么办法可以减小文本的大小？Base64 对我不起作用，还有其他方法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-22T19:10:08.223

请注意，既不是`base64`也不`encryption` 是为减少字符串长度而设计的。你应该看的是压缩，我认为你应该`gzcompress`看`gzdeflate`

使用文本的解码版本的示例

```
$original = "In other cases, some countries have gradually learned to produce the same products and services that previously only the U.S. and a few other countries could produce. Real income growth in the U.S. has slowed." ;
$base64 = base64_encode($original);
$compressed = base64_encode(gzcompress($original, 9));
$deflate = base64_encode(gzdeflate($original, 9));
$encode = base64_encode(gzencode($original, 9));

$base64Length = strlen($base64);
$compressedLength = strlen($compressed) ;
$deflateLength  = strlen($deflate) ;
$encodeLength  = strlen($encode) ;

echo "<pre>";
echo "Using GZ Compress   =  " , 100 - number_format(($compressedLength / $base64Length ) * 100 , 2)  , "% of Improvement", PHP_EOL;
echo "Using Deflate       =  " , 100 - number_format(($deflateLength / $base64Length ) * 100 , 2)  , "% of Improvement", PHP_EOL;
echo "</pre>"; 
```

输出

```
Using GZ Compress   =  32.86%  Improvement
Using Deflate       =  35.71%  Improvement 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T19:10:33.610

Base64 不是压缩或加密，它是编码。您可以在将文本数据存储到数据库之前通过 gzip 压缩算法 (http://php.net/manual/en/function.gzcompress.php) 传递文本数据，但这基本上会使数据无法通过 MySQL 查询进行搜索。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T19:53:38.237

好吧，真的很有挑战性！（至少对我来说！）......你有 10 TB 的文本，你想将它加载到你的 MySQL 数据库中并在表上执行全文搜索！

也许在一个好的硬件上的一些集群或一些性能棘手的方法对你有用，但如果不是这样，你可能会发现它很有趣。

首先，您需要一个脚本来一个接一个地加载这 500 亿段文本，将它们拆分为一些`words`并将它们视为关键字，这意味着给它们一个数字 id，然后将它们保存在一个表格中。顺便说一句`I am piece of large text.`，会是这样的：

```
[1: piece][2: large][3: text] 
```

并且`I'm the next large part!`将是：

```
[4: next][2: large][5: part] 
```

顺便说一句`I, am, of, I'm, the`，加号已被消除，因为它们通常在搜索`., !`中没有任何作用。`keyword-based`但是，如果您愿意，您也可以将它们保留在关键字数组中。

给原文一个唯一的id。您可以计算`md5`原始文本的，或者只是简单地给出一个数字 id。然后将其存储在`id`某个地方。

`texts`您将需要有一个表来保持和之间的关系`keywords`。它将是这样的`many-to-many`结构：

```
[text_id][text]
1 -> I am piece of large text.
2 -> I'm the next large part!

[keyword_id][keyword]
1 -> piece
2 -> large
3 -> text
4 -> next
5 -> part

[keyword_id][text_id]
1 -> 1
2 -> 1
3 -> 1
4 -> 2
2 -> 2
5 -> 2 
```

现在，想象一下如果有人搜索会容易得多（尤其是对于 MySQL！）`large text`！

据我在网上找到的，如果您只是将所有内容都保留为关键字，那么它将是您的关键字或最大`50,000`字数。因此，您可以简单地猜测 50,000 个单词将远远少于基于文本的数据。`60,000``600,000``700,000``10 TB`

我希望它有所帮助，如果您需要，我可以解释更多或帮助您以某种方式使其工作！:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T19:28:46.357

虽然这两个答案都解决了问题并提供了文本压缩选项，但我认为压缩将有助于解决您的问题。搜索大量数据从来都不是 MySQL 等关系型数据库的目的。

您已经获得了 Apache Lucene 的一个非常好的提示，还有其他选项，例如 Sphinxsearch。这是一个比较的快速线程：

[全文搜索引擎对比——Lucene、Sphinx、Postgresql、MySQL？](https://stackoverflow.com/questions/737275/comparison-of-full-text-search-engine-lucene-sphinx-postgresql-mysql)

# excel - 仅当手动选择目标时如何运行 Workseet_Change 事件？

> ID：12546833
> 
> 赞同：0
> 
> 时间：2012-09-22T19:01:08.247
> 
> 标签：excel, vba

```
Private Sub Worksheet_Change(ByVal Target As Range)
Dim r1 As Range
Set r1 = Range("A1:B10")
If Intersect(Selection, r1) Is Nothing Then Exit Sub  ' how to write this line ?
MsgBox "323"
End Sub 
```

只有当我手动选择并更改 r1 中的某个单元格时，我才需要 MsgBox，而不是通过运行另一个更改此单元格的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T19:42:17.413

使用旗帜。

`ImDoingTheUpdating=True`在您的例行程序中设置，并在`False`完成时返回。

这样，您可以放入`If ImDoingTheUpdating Then Exit Sub`Worksheet_Change 事件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T22:39:30.360

如果您想在运行代码时禁用事件，通常的做法是使用`Application.EnableEvents = false`

因此，根据您的示例代码，第二个子在更改单元格时不会触发更改事件。

```
Option Explicit

Private Sub Worksheet_Change(ByVal Target As Range)
Dim r1 As Range
Set r1 = Sheet1.Range("A1:B10")
If Intersect(Selection, r1) Is Nothing Then Exit Sub  ' how to write this line ?
MsgBox "323"
End Sub

Sub EventsWillFire()
    'Worksheet_Change will fire
    Sheet1.Range("A1:B10").ClearContents
End Sub

Sub EventsDisabled()
    'Worksheet_Change will NOT fire
    Application.EnableEvents = False
    Sheet1.Range("A1:B10").ClearContents
    Application.EnableEvents = True
End Sub 
```

唯一需要注意的是，如果您在调试时退出代码或未正确处理错误，则 Application.EnableEvents 可能处于 FALSE 状态并且不会触发任何事件。重新启用它们的一种快速方法是`Application.EnableEvents = True`在调试器的立即窗口中键入并按回车键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T19:44:52.823

试试这个

在 a`Module`中，声明一个`Public`变量

```
Public CodeChangingCells As Boolean 
```

在所有可以更改相关单元格的 Subs 中设置此变量

```
Sub SubTahtChangesCells()

On Error GoTo EH

CodeChangingCells = True
Sheet1.[A1] = Sheet1.[A1] + 1

CleanUp:
On Error Resume Next
CodeChangingCells = False
Exit Sub
EH:
  ' Handle errors

GoTo CleanUp
End Sub 
```

在`Cnage`事件中测试这个变量
使用`Target`而不是`Selection`

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Dim r1 As Range
    If Not CodeChangingCells Then
        Set r1 = Me.Range("A1:B10")
        If Intersect(Target, r1) Is Nothing Then Exit Sub  ' how to write this line ?
        MsgBox "323"
    End If
End Sub 
```

# image - 从图像中提取字符

> ID：12546834
> 
> 赞同：0
> 
> 时间：2012-09-22T19:01:16.830
> 
> 标签：image, image-processing, cluster-analysis, k-means

有谁知道从图像中提取字符的好算法。所有字符都是黑色的，背景是白色的。事实上，这些图像将只是一个打印文档。我正在考虑使用诸如 DFS 或 BFS 之类的搜索算法来对字符进行聚类，但我不确定是否有更好的方法？你能推荐一些可以解决问题的库吗？我只想将图像切割成更小的图像，每个图像代表一个角色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T19:07:10.740

Such algorithms are usually called OCR ( Optical Character Recognition ), under every operating system you may find ready to use utilities which do it better or worse, free, commercial, many of them. Actually, some are used e.g. with spam detection, for recognizing words on images in incoming email on-the-fly, so you can even do it from within shell, without even seeing images - more less successfully extract text from images to plain text files.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T20:47:41.757

在 python through `scipy`package 中，您可以使用该`scipy.ndimage.label(img)`方法。它应该**标记**图像中的不同字符，然后使用`scipy.ndimage.find_objects`提取这些字符。但是您需要先反转图像，使背景颜色为黑色而不是白色。

您可能想要发布图像以准确查看您想要的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-01T13:38:35.627

好的，这可能会有所帮助，但最后我使用 DFS 搜索了字符。我也有一些启发式方法来确定某个像素是否是角色的一部分。另外，由于有些字符是分开的（比如 i），后来我不得不决定是否将它们组合起来。事实上它工作得很好。它是很久以前完成的，但决定回答我很久以前提出的问题。

# clearcase - clearcase 文件夹中的 .mvfs_*** 文件是什么？

> ID：12546835
> 
> 赞同：1
> 
> 时间：2012-09-22T19:01:34.050
> 
> 标签：clearcase

每当我进行更改时，`.mvfs_xxxx`都会在我的 ClearCase 文件夹中创建一个文件。
我有一个动态的视图。

我试图删除这些文件，但我的系统总是卡住。

这个文件的目的是什么？如何控制 MVFS 在我的 clearcase 文件夹中创建文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:24:10.270

请参阅“[关于视图存储中的点文件](http://www-01.ibm.com/support/docview.wss?uid=swg21149499)”

### `.mvfsxxxxxx`文件

> 问：我认为还有一些文件被命名`.mvfsxxxxxxx`。`cleartool lsprivate`当我在动态视图中运行时，它们显示为视图私有文件。他们是如何到达那里的，我可以删除它们吗？
> 
> 答：**这些文件是在另一个进程仍然打开它们时被删除的**。
> 为了允许打开的进程在文件被删除后继续读取文件（UNIX 语义），原始文件被重命名为某个临时唯一名称（就像在 NFS 中一样）。
> 
> 可以使用`.MVFS`标准操作系统删除命令（`rm`或`del`）删除文件。

```
Example: cleartool lsprivate | fgrep '.mvfs' | rm" 
```

在您的情况下，在启动动态视图并尝试删除它们（不启动任何其他进程）之前，可能需要重新启动。

* * *

显然，（来自[这个线程](http://www.ibm.com/developerworks/forums/thread.jspa?threadID=198255)），它们被称为“**愚蠢的重命名**”：

> 有没有人见过查看私人文件，称为

```
.mvfs_47e21162 
```

> > 0字节大小？
> 
> 这就是所谓的愚蠢重命名文件。
> 如果您在有人打开文件时删除文件，您会在 MVFS 中获得这些信息。
> 
> 在本地文件系统中，删除打开的文件会导致名称消失，但数据会保留在内存中。在像 MVFS 或 NFS 这样的分布式文件系统上，这不起作用，因为实际文件位于不同的系统上。
> MVFS 和 NFS 都通过将文件重命名为通常不可见且不太可能导致命名冲突的“愚蠢”文件来解决此问题。

您还可以通过[ClearCase Multisite](http://www-01.ibm.com/support/docview.wss?uid=swg21579575)获得这些（出于不同的原因），其中提到了“愚蠢的重命名”一词（这次是正式的）。

# eclipse - egit 从上游拉取

> ID：12546845
> 
> 赞同：5
> 
> 时间：2012-09-22T19:02:43.977
> 
> 标签：eclipse, egit

我创建了一个新的分支 A 来从 master 做一些工作并做了一些工作并做了一个本地提交。

然后我创建了一个分支 B 来做一些 master 的工作并做了一些工作并提交了它。然后我将它合并到 master 并在 master 上推送到上游。

现在我切换回分支 A。所以要合并最新的更改，我应该在 egit 中使用哪个选项？从上游获取或拉取？

有什么区别？

我不想随机选择，因为我不想覆盖更改...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-22T21:48:53.907

`fetch from upstream`不会覆盖工作树中的任何内容。但是`pull`会，但不会完全破坏工作，如果不能自动完成，则会产生手动合并的冲突。

我建议如果您不确定，请确保您的工作树是干净的，并且一切都已提交。记下当前的提交 ID。

现在你可以做你想做的事，如果做错了，你只需清理你的树（如果需要，删除东西）。然后让它检查你记下的提交 ID。现在你又回到了原来的位置。

commit-id （通常）总是可以访问的。这意味着如果您知道您所在位置的提交 ID，您就不会失去您所在的位置。即干净的树和当前的提交ID。

# iis - 如何使用公共 IP 地址从家里托管外部网站？

> ID：12546846
> 
> 赞同：1
> 
> 时间：2012-09-22T19:03:03.610
> 
> 标签：iis, iis-7, hosting, web-hosting, windows-server-2008-r2

请帮助新手 我已经在家里安装了 windows server 2008 r2 和 IIS，我还通过 godaddy.com 购买了一个域我想在这个域上托管一个简单的 html 文件，我的 ISP 提供商是 Cox，我没有静态 IP投入的。我的服务器连接到路由器。任何帮助或教程将不胜感激。

问题：是否需要任何转发，如果需要，如何？如何启用任何端口？或在 Windows 服务器上启用防火墙？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T01:15:59.547

当然，这是可能的。尝试这个：

1.  为您的家庭服务器分配一个静态 IP 地址，这样您的路由器就不会在其 DHCP 租约到期时为其分配新的 IP 地址。
2.  将您正在运行 IIS 的端口从外部世界 (DMZ) 转发到该静态 IP
3.  使用 no-ip.com 设置一个帐户并安装他们的应用程序。您将获得像 omg.no-ip.com 这样的子域
4.  登录到 GoDaddy 的面板并为您的域设置一个 CNAME，因此到您的域的流量会转到上面的那个无 IP 地址，Windows 客户端会保持更新

这就是我在家里设置它的方式，尽管我现在有一个静态的。

# java - 没有主体的循环有什么作用？

> ID：12546847
> 
> 赞同：0
> 
> 时间：2012-09-22T19:03:10.067
> 
> 标签：java, loops

浏览其他人工作的一些来源。我发现了很多没有主体的while循环的例子

```
while(true); 
```

那会做什么？不太清楚除了让它滞后之外还有什么意义？java代码段

```
do
{
    if (!iterator.hasNext())
    {
        break;
    }

    Object obj = iterator.next();

    if (obj instanceof something)
    {

    }
}
while (true); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T19:08:02.050

这是 do..while 循环的结束。这些循环在首先检查循环条件之前运行一次。while(true) 最后意味着循环将无限运行，或者直到在调用的循环内有一个 break 语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T19:19:41.713

您粘贴的内容实际上是一个`do-while`循环，它**至少执行一次**（即使 for 的条件`while`计算为`false`）。这里的循环体是你在`{}`之后看到的`do`

代码中的这一部分使循环成为**非无限**循环：

```
if (!iterator.hasNext())
{
    break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T19:15:21.047

它基本上是一个 do..while 循环。

```
do {
  // ....
} while(true); 
```

这是`infinite loop`.

当您想要某事时使用它`run forever once it is started`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T21:07:18.590

这可证明等价于：

```
while (iterator.hasNext()) {
 Object obj = iterator.next();

 ...
} 
```

而且我真的不明白为什么有人会以其他方式对其进行编码。它可能是直接翻译成 Java 的反编译 C 代码。这是我能想到的任何人都这样写的唯一原因。

# c++ - 使用 C++ 中的函数初始化 const bool 数组

> ID：12546849
> 
> 赞同：0
> 
> 时间：2012-09-22T19:03:42.383
> 
> 标签：c++, arrays, function, constants

我是 C++ 新手。我想要一个一定长度的 const 数组。这是一个相当长的数组，因此初始化常量数组的标准方法，即：

```
const bool some_array[] = {true, false, true}; 
```

是不切实际的。我想初始化一个布尔值的常量数组。我试图像这样实现它：

```
bool* sieve_of_eratosthenes(bool* n, n_length);

int main(){
    bool b[500];
    bool primeList[] = {sieve_of_eratosthenes(b, 500)};
} 
```

这*几乎*可以工作，尽管它不是很优雅或节省空间（我愿意就如何更好地实现这个数组发表评论）。问题是，返回数组的第零个元素，即 primeList，被设置为 true/1，即使我已经明确地将我的 s_of_e() 函数返回的布尔数组中的第零个元素设置为 false/0。

```
primeList[0] == 1 
```

什么时候应该：

```
primeList[0] == 0 
```

因为 0 不是素数...

谁能启发我为什么要这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T19:09:23.980

```
bool primeList[] = {sieve_of_eratosthenes(b, 500)}; 
```

这不像你想象的那样工作。内置类型都可以转换为`bool`，0（当然包括 NULL）将转换为 false，其他任何内容都将转换为 true。发生的情况是数组的第一个元素设置为 true，因为您返回一个非 NULL 指针。就是这样，数组是 1 个元素长，因为您没有明确指定大小并且只提供了 1 个初始化程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T19:35:02.277

你的代码，

```
bool* sieve_of_eratosthenes(bool* n, n_length);

int main(){
    bool b[500];
    bool primeList[] = {sieve_of_eratosthenes(b, 500)};
} 
```

不起作用，因为

*   该函数返回一个指针，而不是一个数组，并且

*   即使函数返回了对数组的引用，它在初始化列表中的使用中也会衰减为指针。

（而且它不应该编译，因为隐式`int`从未成为 C++ 的一部分。）

指针转换为`bool`，这是您的数组获得的唯一元素。

相反，请执行以下操作：

```
#include <vector>
using namespace std;

vector<bool> sieve_of_eratosthenes( int const n_length )
{
    // Code here.
}

int main()
{
    std::vector<bool> const primeList = sieve_of_eratosthenes( 500 );
} 
```

但是请注意，`std::vector`它旨在优化`bool`元素的情况，普通的 C++ 实现每个元素仅使用 1 位。

这可以被视为一个特性或一个设计级别的错误，这取决于一个人的观点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T19:08:16.997

数组和指针是不同的东西。您正在创建一个数组，但在第一个元素的初始化列表中使用了一个指针。指针将被转换为`bool`，因为它不是空指针，所以它变成`true`.

# php - 基于 $_SESSION 的计数器不起作用？

> ID：12546854
> 
> 赞同：0
> 
> 时间：2012-09-22T19:04:22.537
> 
> 标签：php

我正在尝试制作一个程序，该程序接受用户最喜欢的电影名称并将其打印回来。默认收藏设置为`Godfather`。

我还附加了一个基于会话变量的 HIT Counter，但它不起作用。每次加载页面时它都会显示零。这是我的代码：

```
<?php
session_start();

if(!isset($_SESSION['count']))
    $_SESSION['count'] = 0;
else
    $_SESSION['count']++;

if (!isset($_SESSION['movie']))
         $_SESSION['movie'] = "THE GODFATHER";

if(isset($_POST['submit'])) 
    $_SESSION['movie'] = $_REQUEST['moviename'];
?>

<form method='POST' action="index.php">
Please Enter your Favourite Movie
<input type="text" name='moviename' />
<input type="submit" name='submit' value='set movie' />
</form> 

<br /><br />
Your Current Favourite Movie is <?php echo "called ", $_SESSION['movie'] ,"."; ?>
<br /><br />
<?php echo "You Have Viewed this page ", $_SESSION['count'], " times."; ?> 
```

`YOU HAVE VIEWED THIS PAGE 0 TIMES`无论页面加载多少次，您都会得到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T19:17:47.793

尝试`echo session_id();`并确保它不会改变。

如果它确实发生了变化，那么您没有正确配置会话。检查相关的 php.ini 设置，特别是确保保存路径存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T19:20:33.640

1.  检查您的编码，也许文件有**带有 BOM**的 UTF ，将文件转换为没有 BOM 的 UTF-8
2.  检查你的文件的第一行，也许第一行`<?php`没有

# mysql - 如何加快我的 SQL 查询？

> ID：12546857
> 
> 赞同：3
> 
> 时间：2012-09-22T19:04:41.210
> 
> 标签：mysql, sql

这是查询：

```
SELECT name, SUM(  `count` ) AS Total
FROM  `identdb` 
WHERE MBRCONTAINS( GEOMFROMTEXT(  'LineString(34.4 -119.9, 34.5 -119.8)' ) , latlng ) 
AND MOD( DAYOFYEAR( CURDATE( ) ) - DAYOFYEAR(  `date` ) +365, 365 ) <=14
OR MOD( DAYOFYEAR(  `date` ) - DAYOFYEAR( CURDATE( ) ) +365, 365 ) <=14
AND MBRCONTAINS( GEOMFROMTEXT(  'LineString(34.4 -119.9, 34.5 -119.8)' ) , latlng ) 
GROUP BY  `name` 
```

它实质上会找到一年中的某一天是今天的正负 14 的任何行，以及 latlng 空间列在矩形中的行。

这是我的数据库的样子：

```
#   Column  Type        Collation   
1   name    varchar(66) utf8_general_ci 
2   count   tinyint(3)
3   date    date    
4   latlng  geometry
5   lat1    varchar(15) latin1_swedish_ci
6   long1   varchar(15) latin1_swedish_ci

Keyname Type    Unique  Packed  Column  Cardinality Collation   Null    Comment
PRIMARY BTREE   Yes No  name    0   A       
                        count   0   A   
                        date    0   A   
                        lat1    0   A   
                        long1   6976936 A   
sp_index SPATIAL    No  No  latlng (32) 0   A 
```

有 700 万条记录，查询大约需要 7 秒。我不知道如何加快速度，在此先感谢！

解释：

```
id  select_type table   type    possible_keys   key     key_len ref  rows       Extra
1   SIMPLE      identdb ALL     sp_index        NULL    NULL    NULL 6976936    Using where; Using temporary; Using filesort 
```

更新的查询解释：我相信 MBRCONTAINS 创建了一个矩形，我可以在其中比较 latlng 空间点是否在内部。日期部分是查找 dayofyear + 或 - 14 天。它正在使用模运算，这样它就不会在新的一年里搞砸了。由于使用了 OR，我不得不将 MBRCONTAINS 部分放入两次。

我对查询的需求是查找所有`name`具有一年中的某一天 + 或 - 14 天，并且在给定的纬度/经度对内的 s，然后合计每个的计数。

我对这些东西很愚蠢，所以如果我在做一些愚蠢的事情，请纠正我。多谢你们！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T19:14:06.220

重写它，以便您的计算在每个*查询*中发生一次，而不是通过表达您的谓词使该列不是计算的一部分 而每*行发生一次。*

例如，这个表达式：

```
MOD( DAYOFYEAR( CURDATE( ) ) - DAYOFYEAR(  `date` ) +365, 365 ) <= 14 
```

这需要 700 万次计算`date`，可以表示为

```
`date` between SUBDATE( CURDATE( ), 14) and ADDDATE( CURDATE( ), 14) 
```

它只需要 1 次计算，并且进一步允许使用`date`列上的索引。
仅此更改就会加快您的查询速度。

如果您没有日期索引，请放置一个，您的查询就会飞起来：

```
create index mytable_date on mytable(`date`); 
```

我不知道是什么`MBRCONTAINS`，但也尝试重构它，以便列值不是计算的一部分。

# logging - 在哪里可以找到我的 Amazon EC2 访问日志？

> ID：12546858
> 
> 赞同：4
> 
> 时间：2012-09-22T19:04:50.353
> 
> 标签：logging, amazon-ec2

我最近设置了一个 Amazon EC2 Linux 实例。我想知道，是否有自动保存日志？或者我必须设置它们？如果是前者，他们在哪里？如果是后者，推荐任何简单的基本日志记录设置？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-22T19:17:53.467

在 Linux 中，大多数日志文件都可以在`/var/log`.

# python - dajaxice 实现既不给出任何错误也不工作

> ID：12546859
> 
> 赞同：0
> 
> 时间：2012-09-22T19:05:10.337
> 
> 标签：python, django, formwizard, dajaxice

我在表单向导中使用 Dajaxice 并且处于非常混乱的状态，因为它既没有显示任何错误也没有显示输出。我的代码如下：

ajax.py

```
from django.utils import simplejson
from dajaxice.decorators import dajaxice_register

@dajaxice_register
def sayhello(request):
   return simplejson.dumps({'message':'Hello World'}) 
```

网址.py

```
from dajaxice.core import dajaxice_autodiscover, dajaxice_config
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
dajaxice_autodiscover()
urlpatterns = patterns('',
url(dajaxice_config.dajaxice_url, include('dajaxice.urls')),) 
```

向导1.html

```
{% block head %}
{% dajaxice_js_import %}
<title>My base template</title>

<script type="text/javascript">
function my_callback(data){alert(data.message);alert("Hello");}
</script>
{% endblock %}

{% block content %}
<input type="button" onclick="Dajaxice.trusform.dajaxice.core.sayhello(my_callback)" value="Get message from server!">
{% endblock %} 
```

Django 项目

```
trustform
  manage.py
  trustform
    ajax.py
    forms.py
    urls.py
    settings.py
  dajaxice
    dajaxice.core.js
  templates
    wizard1.html 
```

您能否特别建议有关路径结构的建议，特别是在 onclick 方法中，因为我怀疑这是由于路径错误但不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T02:26:25.840

尝试更换

```
Dajaxice.trusform.dajaxice.core.sayhello 
```

和

```
Dajaxice.trustform.sayhello 
```

因为该`sayhello`方法是您的应用程序的一部分。此外，您在“trustform”中缺少“t”，所以也添加它。

# html - 用文本和按钮覆盖图像

> ID：12546860
> 
> 赞同：1
> 
> 时间：2012-09-22T19:05:13.727
> 
> 标签：html, css, web

我正在网站上制作图像拼贴画，并且希望每张图像在用户将鼠标悬停在图像上时都能平滑过渡。此叠加层应略微透明并包含文本和按钮。这是我到目前为止的进展： http: [//classicopia.ivointeractive.com/](http://classicopia.ivointeractive.com/)

每个图像都包含在一个“产品”div 中，每个产品 div 应该包含一个 img 和一个悬停时出现的“productOverlay”div。现在，书柜是唯一附有覆盖物的物品 - 但你看不到它，这就是问题之一

我现在陷入两个问题：

1.  如何使叠加层可见？现在没有规则使它不可见，我唯一能看到它的就是将它的定位设置为绝对，但这会破坏它的尺寸。

2.  我怎样才能让叠加层实际上覆盖在图像上？（现在它被放置在它下面）

我已经加载了 jQuery，所以任何使用它的解决方案都可以。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T21:21:55.373

父 div 需要是相对的，子 div 需要是绝对的或固定的。然后，您需要为子 div 添加`top: 0;`和`left: 0;`以及`z-index: 1;`CSS。然后使用 jQuery 在悬停时显示和隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T19:07:16.607

尝试使用`z-index`css 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T19:36:54.633

将每个图像包装在一个 div 中`position: relative`，并将叠加层也放在这个 div 中。

首先是叠加层`display: none`。`display: block`将鼠标悬停在您为叠加层设置的 div上。或者 jQuery`show()`和`hide()`

图像`z-index`为 0，叠加层为 1。

# java - 如何检测音频流中特定单词的出现。

> ID：12546862
> 
> 赞同：3
> 
> 时间：2012-09-22T19:05:20.460
> 
> 标签：java, audio, artificial-intelligence, neural-network

起初我以为它会像图像识别一样简单。

创建 FANN hopfield 网络，而不是用二进制转换的图像训练/馈送它，用二进制转换的声音馈送它。

但：

1.  如何将 wav 转换为二进制字符串（我相信我需要二进制而不是字节 - 对吗？）
2.  如何使其连续，我的意思是计算来自麦克风的单词/声音的出现作为来源。
3.  什么是最好的java库来做到这一点（不是SPHINX或其他语音识别库——我想让我的代码语言独立，甚至识别自定义声音——比如拍手）

我以前使用 FANN 进行图像识别，并且我知道 Encog，但也许有更好的东西（或更简单，我实际上并不了解如何使用 Encog）和更可取的 Java 本机，以便轻松移植到移动设备

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T20:49:54.507

如果您已经能够使用图像，也许这就是您所需要的： [http ://code.google.com/p/asperes/](http://code.google.com/p/asperes/)

它可以将 WAV 声音样本转换为 BMP 图像（频谱图）以及将任意 BMP 图像转换为声音 (WAV)。

文档中的描述：

Audio Spectrograph and Re-Synthesis (ASPERES) 是一个小型命令行实用程序，可以从声音样本生成图像（频谱图），以及从任意图像生成声音。

# c# - 如何构造一个遍历多个级别的委托事件

> ID：12546864
> 
> 赞同：0
> 
> 时间：2012-09-22T19:05:53.233
> 
> 标签：c#, .net, events, delegates

我正在构建 ac#/.net 网站。

该站点使用母版页和更新面板。

我有一种情况，我在页面中有一个用户控件，需要更新母版页中的用户控件，反之亦然。

我知道如何在用户控件和页面或用户控件和母版页之间构建一个委托，但我不确定有几件事，因为我对 .net 的了解不是很好。

1）如何在usercontrol->page->master page之间构造一个委托（2级） 2）同样的向后usercontrol->master page->page

我不确定是否可以共享 1) 和 2) 的任何组件。例如，跨越 2 个级别并双向工作的单个委托事件。

我会很感激任何建议/例子。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T19:17:51.200

我不能从你的问题中确定，但也许你需要知道你可以在命名空间级别声明委托？

```
namespace MyNamespace
{
   public delegate void MyDelegate(object sender, EventArgs e);

   public class MyClass
   {
      public event MyDelegate OnSomethingHappened;
   }
} 
```

**编辑** 我想我理解得更好...看看这是否是您要查找的内容：这是来自 Site.Master 页面和 WebUserControl 的“.cs”文件的代码...委托是全局声明的在命名空间中，在母版页中，用户控件声明该委托类型的事件：

```
// MASTER PAGE
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace WebApplication4
{
    public delegate void MyDelegate(object sender, EventArgs e);

    public partial class SiteMaster : System.Web.UI.MasterPage
    {
        // Here I am declaring the instance of the control...I have put it here to illustrate
        // but normally you have dropped it onto your form in the designer...
        protected WebUserControl1 ctrl1;

        protected void Page_Load(object sender, EventArgs e)
        {
            // instantiate user control...this is done automatically in the designer.cs page 
            // if you created it in the visual designer...
            this.ctrl1 = new WebUserControl1();

            // start listening for the event...
            this.ctrl1.OnSomethingHappened += new MyDelegate(ctrl1_OnSomethingHappened);
        }

        void ctrl1_OnSomethingHappened(object sender, EventArgs e)
        {
            // here you react to the event being fired...
            // perhaps you have "sent" yourself something as an object in the 'sender' parameter
            // or perhaps you have declared a delegate that uses your own custom EventArgs...
        }
    }
}

//WEB USER CONTROL
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace WebApplication4
{
    public partial class WebUserControl1 : System.Web.UI.UserControl
    {
        public event MyDelegate OnSomethingHappened;

        protected void Page_Load(object sender, EventArgs e)
        {

        }

        private void MyMethod()
        {
            // do stuff...then fire event for some reason...
            // Incidentally, ALWAYS do the != null check on the event before
            // attempting to launch it...if nothing has subscribed to listen for the event
            // then attempting to reference it will cause a null reference exception.
            if (this.OnSomethingHappened != null) { this.OnSomethingHappened(this, EventArgs.Empty); }
        }
    }
} 
```

# unicode - Unicode 符号的语义？

ID：12546865

赞同：2

时间：2012-09-22T19:05:59.353

标签：unicode, semantics, symbols

# javascript - Move HTML out from these enclosing CDATA tags

> ID：12546867
> 
> 赞同：0
> 
> 时间：2012-09-22T19:06:06.923
> 
> 标签：javascript, jquery, html

I'm generating HTML using JS templating engine (by John Resig). However the output generated is enclosed within

```
<!--  <![CDATA[            ......            ]]>   //--> 
```

Is there any simpler way to move the HTML out from these enclosing CDATA tags other than using JS string processing methods ?

# iphone - Simple graph draw task for iPhone

> ID：12546868
> 
> 赞同：0
> 
> 时间：2012-09-22T19:06:46.893
> 
> 标签：iphone, ios, quartz-graphics

I need to draw a simple graph, but I have no experience with custom draw iPhone graphics yet, so I hope, somebody can help me.

Task is simple: I need to draw graph background from .png file from resource, and draw points, also from bundled .png-files on some positions on background.

For drawing, I created descendant from UIView, and use following lines of code:

```
CGContextRef context = UIGraphicsGetCurrentContext();
CGRect rect = CGRectMake(0, 0, 250, 500);
CGContextDrawImage(context, rect, [[UIImage imageNamed:@"graph.png"] CGImage]); 
```

But its not working.

The first problem, I can't solve - UIGraphicsGetCurrentContext returns nil.

Can you help me?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:20:18.790

您可能忘记在您的 xib/storyboard 中添加您的视图。

在您的故事板中打开实用程序菜单并将视图添加到您尝试绘制的屏幕。然后将 View 的类更改为扩展 View 的类。

您可以按照“使用 5 星评级视图”部分中的本[教程](http://www.raywenderlich.com/1768/how-to-make-a-custom-uiview-a-5-star-rating-view)将您的视图添加到情节提要中。

如需更多信息，您可以：

*   在stackoverflow上关注这个[答案](https://stackoverflow.com/questions/9498010/custom-views-with-storyboard)
*   检查您是否在教程中或关注此[博客](http://www.hacheka.com/a-custom-view-in-ios/)（此博客没有情节提要部分）中完成了您的服装所需的所有步骤

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T22:53:03.887

我用这段代码解决了我的问题。

```
- (void) drawGrid{
    UIImage *sourceImage = [UIImage imageNamed:@"sungraph.png"];

    UIGraphicsBeginImageContextWithOptions(CGSizeMake(sourceImage.size.width, sourceImage.size.height), NO, 0);

    CGRect rectangle = CGRectMake(0, 0, sourceImage.size.width, sourceImage.size.height);
    self.frame = rectangle;

    [sourceImage drawInRect:rectangle];
}

- (void) finalizeImage{
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    imgView = [[UIImageView alloc] initWithImage:newImage];
    imgView.frame = CGRectMake(0, 0, newImage.size.width, newImage.size.height);
    [self addSubview:imgView];    
} 
```

从我班级的**initWithFrame**我调用第一个函数。之后，我将一些数据添加到图形（画线等）并在最后调用**finalizeImage**。

# c++ - WinAPI createFile function 2

> ID：12546871
> 
> 赞同：-1
> 
> 时间：2012-09-22T19:07:18.153
> 
> 标签：c++, winapi, createfile

i wrote some code to createfile in c++ it compiles without errors, but it doesn't create any file.. Can anyone tell me what is wrong ? thanks

```
#include <iostream>
#include <windows.h>
#include <string>
using namespace std;

    int main()
    {
        HANDLE hfile;
        char data[] = "some text to write into file";       

        hfile = CreateFile(
               L"c:\name.txt",              
               GENERIC_WRITE, 
               0,
               NULL,
               CREATE_NEW,
               FILE_ATTRIBUTE_NORMAL,
               NULL);

        /*
        if (hFile == INVALID_HANDLE_VALUE) 
        { 
            cout << "Unable to create file \n";

        }
        */
    return 0;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T19:11:36.723

同样在 C++ 中，您需要转义反斜杠，即

```
"C:\\mydirectory\\"... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T19:08:45.120

如果尝试将其创建到根目录中，如果没有以管理员身份登录，您可能会遇到权限问题。尝试在子目录中创建它。

# ios - Is it possible to implement 3D mapviews with iOS 6

> ID：12546873
> 
> 赞同：4
> 
> 时间：2012-09-22T19:07:28.110
> 
> 标签：ios, iphone, ios6, mapkit, ios6-maps

I would like to implement the great "Google Earth" look of the new iOS6 map app in 3D mode. I've looked thru the latest version of the MapKit framework, as well as Apple's doc set, and I can't find any mention of how to implement it. Does this mean that that feature is private API, and not available to developers at this time?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T19:03:24.117

这绝对不是公共 API。可能它甚至不是私有 API，只是在 Maps.app 中实现。

# eclipse - 2.1 版的 faces-config.xml xsd 错误

> ID：12546876
> 
> 赞同：9
> 
> 时间：2012-09-22T19:07:49.740
> 
> 标签：eclipse, jsf-2, mojarra

Eclipse 一直告诉`http://java.sun.com/xml/ns/javaee/web-facesconfig_2_1.xsd`我 faces-config.xml 有问题，还有其他人有问题吗？

```
 <?xml version="1.0" encoding="UTF-8"?>

 <faces-config xmlns="http://java.sun.com/xml/ns/javaee" 
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
          http://java.sun.com/xml/ns/javaee/web-facesconfig_2_1.xsd"
          version="2.1">

 </faces-config> 
```

错误是：

```
 Referenced file contains errors (http://java.sun.com/xml/ns/javaee/web-facesconfig_2_1.xsd). 
```

如果我查看详细信息，则会有大量错误以`s4s-elt-character:.....`

我正在使用 mojarra 2.1.13。

谢谢。

编辑：显然甲骨文改变了它，这修复了它：

[http://www.oracle.com/webfolder/technetwork/jsc/xml/ns/javaee/web-facesconfig_2_1.xsd](http://www.oracle.com/webfolder/technetwork/jsc/xml/ns/javaee/web-facesconfig_2_1.xsd)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T23:08:21.660

我们正在努力解决这个问题。发现问题，努力解决。请跟踪这个 JIRA 问题：http: [//java.net/jira/browse/GLASSFISH-19115](http://java.net/jira/browse/GLASSFISH-19115)

希望这对“错误”有所帮助和抱歉。

**更新：**这个问题已经解决。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T00:45:02.873

正如 SJuan76 指出的那样，Oracle 在[http://java.sun.com/xml/ns/javaee/web-facesconfig_2_1.xsd缺少 2.1 faces-config XSD 存在问题](http://java.sun.com/xml/ns/javaee/web-facesconfig_2_1.xsd)

然而，2.0 XSD 可以在[http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd](http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd)

错误可能是由于响应不正确（根本不是 XSD）。

解决方法是使用来自不同来源的相同 XSD（替换 xsi:schemaLocation 中的第二个地址），例如： [https ://svn.java.net/svn/mojarra~svn/tags/2.1.13/jsf-api/文档/web-facesconfig_2_1.xsd](https://svn.java.net/svn/mojarra~svn/tags/2.1.13/jsf-api/doc/web-facesconfig_2_1.xsd)

警告：这只是一个临时的解决方法，一点都不好。必须有人先在 Oracle 上看看这个，然后把 2.1 XSD 放回 java.sun.com 地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T19:11:02.937

在浏览器中输入网址：

```
 http://java.sun.com/xml/ns/javaee/web-facesconfig_2_1.xsd 
```

Oracle 正在返回一个软 404，而 Eclipse（或任何人）无法将其解析为 xsd。

我敢打赌，网址有误，但我脑子里没有正确的网址……

更新：对于 2.0，它是`http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd`（并且浏览返回 .xsd）；我找到了你在网络上任何地方发布的 URL，但在 oracle 中没有……你确定你的类路径中有 2.1 库吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T23:31:58.167

我也有同样的错误，当我创建一个具有 JSF 2.1 配置的动态 Web 项目时，faces-config 有这个错误，所以我必须使用 JSF 2.0 配置创建 Web 项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-29T22:00:10.467

我有同样的麻烦。为了解决这个问题，我只创建了一个新的“动态项目”，并在项目 Facets (project/Properties/Project Facets) 中标记了选项“JavaServer Faces”**版本 2.1**。之后，您将看到消息：“需要进一步配置...”（如下）单击此消息并选择包含您的 javax.faces-2.1.x.jar 的库。单击“确定”和“应用”。eclipse 创建包含正确描述的 faces-config.xml 文件。

在我的项目中生成以下配置：

```
<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_1.xsd"
    version="2.1">

</faces-config> 
```

# ios - 负加速度和正加速度究竟代表什么？（iOS）

> ID：12546879
> 
> 赞同：0
> 
> 时间：2012-09-22T19:08:08.280
> 
> 标签：ios, iphone, accelerometer

*如果我应该在物理论坛上问这个问题，请提前原谅我，但鉴于我正在谈论 iPhone 的加速度，来自加速度计，我决定在这里发布。*

每当我将 iPhone（放在桌子上的设备 - 屏幕朝上）向前推（朝向设备顶部）时，加速度计似乎在同一 Y 上记录大部分负加速度，并带有一些正加速度值轴，不时出现在这里和那里。

这是**在 Y 轴上的加速度值示例，在 Y 轴向****前移动**期间：

```
-0.02
-0.03
-0.04
-0.03
-0.04
-0.04
-0.07
-0.02
-0.02
-0.02
-0.02
 0.00 // what's happening here ?
 0.02 // what's happening here ?
 0.02 // what's happening here ?
-0.00
-0.02
-0.03
-0.03
 0.02 // what's happening here ?
 0.04 // what's happening here ?
 0.01 // what's happening here ?
-0.00
-0.04
-0.03
-0.02
-0.03
-0.05 
```

在上面的例子中，负加速度值代表什么，正值代表什么？

如果我理解正确，负加速度值意味着设备在该点向前加速。

现在，正加速度值意味着设备正在向后移动，而 0.00 加速度意味着设备要么静止不动*，要么以恒定速度移动。

那么，为什么我在设备向前移动时会得到那些正加速度值呢？

我错过了什么吗？

显然，我要问的唯一原因是因为我想创建一个方法来了解设备是在 Y 轴上向前还是向后移动。

*我还注意到，即使设备完全不动，也会出现 0.01 的值，但我猜这只是噪音，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T19:16:32.537

> 那么，为什么我在设备向前移动时会得到那些正加速度值呢？

嗯，您似乎理解为 0 的加速度意味着没有加速度，即静止或以恒定速度移动。现在，如果您在一个方向上以看似恒定的速度移动手机，它可能不会完全恒定 - 可能会出现小的正加速度和负加速度。

> *我还注意到，即使设备完全不动，也会出现 0.01 的值，但我猜这只是“噪音”，对吧？

对。加速度计传感器并不完美。它对许多其他因素做出反应，而不仅仅是纯粹的加速度。我不知道 iPhone 加速度计工作原理的确切内部结构，但如果我猜对了，它是压电式的，因此它可能对其他类型的物理（机械和电磁）效应敏感。

# android - 如何使 TextView 居中？

> ID：12546884
> 
> 赞同：0
> 
> 时间：2012-09-22T19:08:58.130
> 
> 标签：android

我想知道如何在不使用任何类文件的情况下使 TextView 居中。

```
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="APW" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T19:11:34.777

只需设置：

```
android:gravity="center" 
```

编辑：抱歉没有看到 Sherif elKhatib 提出相同的建议

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T19:43:22.403

如果要使文本相对于文本视图居中：

```
android:gravity="center" 
```

如果您想将 textview 相对于父布局居中：

```
android:layout_gravity="center" 
```

# asp.net - 从主机域控制器到远程工作组服务器的 Visual Studio 远程调试

> ID：12546887
> 
> 赞同：0
> 
> 时间：2012-09-22T19:09:24.183
> 
> 标签：asp.net, visual-studio, remote-debugging, managed, domaincontroller

我的开发机器是 2008 R2 x64 域控制器（通过我现在的单机域上的损耗，它已经发展到这一点，并且在不久的将来不会改变）。我希望调试的 ASP.NET MVC 应用程序部署到我拥有 LogMeIn/VPN 访问权限的 2008 R2 x64 工作组机器上。

我在远程机器上安装了 msvsmon.exe 作为服务。我相信我遇到的问题是，由于某种原因，您无法连接到 msvsmon，除非它运行的远程帐户也是主机上的一个帐户（我看不出有任何方法可以明确提供凭据用于远程连接）。

由于我的主机是 DC，我无法创建所需的本地帐户来镜像 msvsmon 服务帐户。

我有从开发机器到部署机器的 VPN 连接。在配置 msvsmon 时，我选择了“只允许本地网络中的计算机连接”，假设 VPN 算作本地网络。我在远程机器上打开了 TCP 135、UDP 500 和 UDP 4500。

我假设这就是故事的结局，我注定要在远程机器上完整安装 VS，但我认为这是值得一问的。有没有办法解决这个不足？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:26:52.417

您只有两个远程调试选项。Windows 身份验证或无身份验证。如果您启用无身份验证，那么任何人都可以连接到它并在机器上做几乎任何事情，基本上允许他们控制它。如果机器在互联网上，那么远程攻击者可以扫描您的计算机以寻找远程调试。

但是，如果机器位于安全网络上，那么您可能会没事。

这个链接告诉你如何配置远程调试

[http://msdn.microsoft.com/en-us/library/bt727f1t.aspx](http://msdn.microsoft.com/en-us/library/bt727f1t.aspx)

否则，您可以在本地计算机上创建一个虚拟机并在其上安装 Visual Studio。至少您不必将它安装在某处的远程机器上。

# mysql - 不成功：使用休眠 2 创建表

> ID：12546890
> 
> 赞同：2
> 
> 时间：2012-09-22T19:10:07.527
> 
> 标签：mysql, hibernate, syntax-error, keyword, create-table

当hinernate尝试将此类映射到MySQL数据库时

```
/*
*To change this template, choose Tools | Templates
* and open the template in the editor.
*/
package projekat.entities;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;
import java.util.Objects;
import javax.persistence.*;
import org.apache.tapestry5.beaneditor.NonVisual;

/**
 *
 * @author nikola
 */
@Entity
public class Student implements Serializable {

  @Id
  @NonVisual
  @GeneratedValue(strategy = GenerationType.AUTO)
  @Basic(optional = false)
  private Long kljuc;
  @Basic(optional = false)
  private String ime;
  @Basic(optional = false)
  private String prezime;
  @Basic(optional = false)
  private Integer index;
  @ManyToMany
  private List<Grupa> grupaList = new ArrayList<Grupa>();

  public NewClass() {
  }

  public Long getKljuc() {
    return kljuc;
  }

  public void setKljuc(Long kljuc) {
    this.kljuc = kljuc;
  }

  public String getIme() {
    return ime;
  }

  public void setIme(String ime) {
    this.ime = ime;
  }

  public String getPrezime() {
    return prezime;
  }

  public void setPrezime(String prezime) {
    this.prezime = prezime;
  }

  public Integer getIndex() {
    return index;
  }

  public void setIndex(Integer index) {
    this.index = index;
  }

  public List<Grupa> getGrupaList() {
    return grupaList;
  }

  public void setGrupaList(List<Grupa> grupaList) {
    this.grupaList = grupaList;
  }

  @Override
  public int hashCode() {
    int hash = 5;
    hash = 83 * hash + Objects.hashCode(this.kljuc);
    hash = 83 * hash + Objects.hashCode(this.ime);
    hash = 83 * hash + Objects.hashCode(this.prezime);
    hash = 83 * hash + Objects.hashCode(this.index);
    return hash;
  }

  @Override
  public boolean equals(Object obj) {
    if (obj == null) {
      return false;
    }
    if (getClass() != obj.getClass()) {
      return false;
    }
    final Student other = (Student) obj;
    if (!Objects.equals(this.kljuc, other.kljuc)) {
      return false;
    }
    if (!Objects.equals(this.ime, other.ime)) {
      return false;
    }
    if (!Objects.equals(this.prezime, other.prezime)) {
      return false;
    }
    if (!Objects.equals(this.index, other.index)) {
      return false;
    }
    return true;
  }

  @Override
  public String toString() {
    return "Student{" + "ime=" + ime + ", prezime=" + prezime + ", index=" + index + '}';
  }
} 
```

以下输出显示在 tomcat 日志中

```
Unsuccessful: create table Student (kljuc bigint not null auto_increment, ime varchar(255) not null, index integer not null, prezime varchar(255) not null, primary key (kljuc))
20:03:30,540 ERROR SchemaExport:387 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'integer not null, prezime varchar(255) not null, primary key (kljuc))' at line 1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T19:10:07.527

原来错误出现在类字段索引中，这是 MySQL 中的一个关键字。我已经坚持了至少2天。正在重新安装 MySQL 服务器、IDE、搜索休眠文档等...

```
 @Basic(optional = false)
  private Integer index;
//to
  @Basic(optional = false)
  private Integer indeks; 
```

我只是为了帮助我和其他有同样问题的人。

# android - 将两个精灵组合成一个精灵（Libgdx）

> ID：12546891
> 
> 赞同：2
> 
> 时间：2012-09-22T19:10:08.727
> 
> 标签：android, libgdx

我想将两个精灵合二为一。例如：

```
private Sprite spriteGirl;
private Sprite spriteSweater;
private Sprite spriteDressed; 
..................................................................
atlas = new TextureAtlas(Gdx.files.internal("data/images.pack"));

spriteGirl = atlas.createSprite("girl");
spriteSweater = atlas.createSprite("sweater");
................................................................... 
```

“spriteSweater”应该放置在精灵“spriteGirl”上（在某些坐标中）。这个组合就是精灵“spriteDressed”。

在此之后，生成的精灵“spriteDressed”可以被动画化。

我宁愿分别移动“spriteDressed”而不是“spriteGirl”和“spriteSweater”。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T21:20:02.907

我会创建一个复合类来保存和管理它所组成的精灵。

```
public class CompositeSprite {

    Array<Sprite> componentSprites;

    public CompositeSprite() {
        componentSprites = new Array<Sprite>();
    }

    public void addComponentSprite(Sprite sprite) {
        componentSprites.add(sprite);
    }

    // ... other methods left out for brevity

    public void draw(SpriteBatch spriteBatch) {
        for (Sprite sprite : componentSprites) {
            sprite.draw(batch)
        }
    }

} 
```

# sql - 存储总值或在运行时求和的最佳实践

> ID：12546896
> 
> 赞同：4
> 
> 时间：2012-09-22T19:11:12.693
> 
> 标签：sql

我有一个应用程序，其中每个“工作修订”都有许多计算 - 这涉及与该修订链接的多行的总和。

我想知道的是，如果最佳做法是：

1.  在作业修订中存储“总”数字，这样我们就可以在不总结的情况下显示
2.  向用户显示时在运行时计算总数

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T19:28:48.490

这在很大程度上取决于几个因素，例如：

*   准确性有多重要？在显示图形的那一刻，图形是否需要完全准确？
*   检索速度有多重要？数字显示的及时比准确更重要吗？
*   写作速度有多重要？快速写入每个“行”是否更重要？
*   涉及多少数据？我们是在谈论数百万行还是数百行？
*   多行多久同时更新一次？通常是一次更新多行“作业修订”，还是更有可能一次只涉及一行？

这些中的每一个都有不同的权衡，并且有多种选择可以满足每种选择的平衡。

*   您可以创建触发器，每次插入、更新或删除新行时更新“缓存”总数。这将确保准确性和快速检索，但会减慢写入速度，因为它每次都涉及对“缓存”表的额外更新，而这又涉及行级锁定以确保数字保持准确。锁定减慢其他操作的速度取决于同一“作业修订”上的其他操作同时发生的频率。
*   您可以每次都计算该值。这确保了值是准确的，并且插入/更新速度很快，但计算值可能效率低下且速度慢。
*   您可以将值存储在缓存表中，但只能定期更新。这确保了读取和写入都很快，但以牺牲准确性为代价。

如果您只处理少数几行，那么这些行之间没有太大区别，并且“每次都计算它”就可以了。如果没有实际需要让事情变得更快，那么每次计算都是首选，因为“更[正常](http://en.wikipedia.org/wiki/Database_normalization)”

一如既往：不要只问一般情况下什么是好的。分析你自己的代码，看看瓶颈在哪里，并倾向于遵循“[不要，还没有](http://c2.com/cgi/wiki?PrematureOptimization)”的规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T19:31:21.890

这取决于。

如果有方便的方法来计算它，那么你不需要一个可能很昂贵的查询来计算它。预先计算的一个大问题是额外的复杂性，您可能会因为维护总计和数据而变得笨拙。

这是设计上的妥协，所以对于最终的结果没有正确的答案。我想说的是，您应该将总计的预先计算视为一种优化，因此，如果您还不知道需要这样做，那是一种过早的优化。

如果事情不合时宜，您最终可能需要大量工作来整理您的数据。如果他们因未修复的错误或未填补的差距而步履蹒跚，那么这是一项重大且持续的工作。

不是你应该需要或实际上应该急于进入的东西。

# python - 使用 BeautifulSoup 抓取网站时的字符编码问题

> ID：12546908
> 
> 赞同：2
> 
> 时间：2012-09-22T19:13:14.433
> 
> 标签：python, character-encoding, python-3.x, web-scraping, beautifulsoup

我正在使用 BeautifulSoup4 进行一些网络抓取，并且在解码响应方面遇到问题。网站返回我的标题，标题中说：

> 内容类型：文本/html；字符集=ISO-8859-1

所以通常我用 latin1 字符集对其进行解码。但是解码后，html中有一行，上面写着：

> <meta content="text/html; charset=utf-8" http-equiv="content-type" />

现在从这行开始，字符串没有正确解码。

那么处理这个问题的正常方法是什么？我想在传出的 http 标头中设置[接受编码](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14)行，但找不到方法。其他选项是逐行解码以搜索新字符集，但更愿意仅通过接受 utf-8 来完成

我使用 Python3，libray http.client

EDIT1：代码：

```
import http.client as cl
from bs4 import BeautifulSoup

conn = cl.HTTPConnection('www.amazon.com')
conn.request("GET", '/A-Man-For-All-Seasons/dp/B003TQ1IW6/ref=sr_1_109?s=instant-video&ie=UTF8&qid=1348337540&sr=1-109')
response = conn.getresponse()
content = response.read()

soup = BeautifulSoup(content)
f = open('am.html', 'w')
f.write(soup.prettify())

#i am actually doing this with httplib2 but result is the same 
```

EDIT2：看起来 Linux 中 Beautiful Soup 4 的配置确实有问题，或者它是一个错误。这是有效的，但我无法用 BS4 解析响应：

```
import httplib2
h = httplib2.Http('.cache')
response, content = h.request(movieLink , headers={'accept-charset': 'latin1'})
content = content.decode('latin-1') 
```

谢谢你，Blckknght。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T22:41:53.173

通读[Beautiful Soup 文档](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)，看起来有两种不错的方法。

1.  最好的解决方案可能是不自己解码 HTML 文档，而只是将原始字节字符串提供给 Beautiful Soup。它将找出正确的编码，并自动解码文档（使用其包含的`Unicode Dammit`库）。它会查找并解释相关的 HTML 元标记（如果有），或者分析文档的内容并进行猜测。这肯定会解决您的直接情况，即使对于没有元标记的文档，它也可能在大多数情况下都能正确处理。不过，扫描文档可能有点慢，所以如果性能是一个重要问题，您可能更喜欢下一个选项。

2.  下一个最佳解决方案可能是将您自己的知识应用于该问题。如果您要抓取的页面始终编码为 UTF-8，则无论服务器说什么，您都可以简单地使用它。这当然取决于页面编码是否一致，这可能是也可能不是这种情况（例如，具有一些 UTF-8 页面和一些 Latin-1 页面的网站）。如果您只抓取单个页面（或单一类型的页面，在动态站点上），您可能总是会找到相同的编码，所以这可以很好地工作。这种方法的优点是它的简单性（在较小程度上是速度），但它是以灵活性和健壮性为代价的。如果站点更改其使用的编码，您的脚本可能会中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T11:35:06.000

这可能是[BeautifulSoup 没有正确读取文档](https://stackoverflow.com/questions/11354521/beautifulsoup-not-reading-documents-correctly?rq=1)的副本，即是由BS 4.0.2 中的[错误引起的。](https://bugs.launchpad.net/beautifulsoup/+bug/972466)

该错误已在 4.0.3 中修复。您可能想检查的输出

```
>>> import bs4
>>> bs4.__version__ 
```

如果是 4.0.2，请将 BeautifulSoup 升级到更高版本。

# javascript - 使用javascript水平滚动

> ID：12546912
> 
> 赞同：-1
> 
> 时间：2012-09-22T19:13:58.340
> 
> 标签：javascript, css

我使用 arctic scroll 插件在需要时平滑地滚动到 div，但这仅在您有垂直 div 时才有效。我想对我什至不知道如何制作的水平排列的 div 做到这一点。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T19:17:40.783

[插件源码](http://jsbin.com/izocuz) 我们可以看到这里只使用了top坐标，可以修改源码，将**scrollTop**改为**scrollLeft**

# python - 用于网络测量工具的 Python 或 C

> ID：12546914
> 
> 赞同：0
> 
> 时间：2012-09-22T19:14:12.770
> 
> 标签：python, c, sockets, networking, network-programming

我计划在 3G 网络中创建一个网络测量工具。我只是在想我应该用哪种语言编码——C 或 Python。我个人喜欢python，但我也觉得它有点慢，因为我需要记录发送和接收的数据包的时间戳，我需要它们尽可能精确（只要服务器有一些数据包要发送，它应该发送，一旦接收者收到一个数据包，应用程序应该记下时间戳），我应该使用 Python 还是使用 C？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:22:14.703

你的时间是最宝贵的，所以用你觉得最舒服的任何语言编写代码。在大多数情况下，Python 比 C 慢，但在现代硬件上它仍然非常快。如果你走 Python 路线，编写你的程序，然后使用[分析器](http://docs.python.org/library/profile.html)来确定是否有特定的部分让你慢下来。如果您可以将其精简到足以满足您的时间需求，那就太好了。如果没有，您总是可以在 C 中编写一个函数或类，并使用[swig](http://www.swig.org/)将其链接。

> 我们应该忘记小的效率，比如大约 97% 的时间：过早优化是万恶之源。——唐纳德·克努斯

# php - 从上一页获取数据

> ID：12546915
> 
> 赞同：0
> 
> 时间：2012-09-22T19:14:12.850
> 
> 标签：php, session, referrals

我有一个琐碎的问题。

我需要从上一页获取数据。例如，我在某种类别视图中，然后我可以单击按钮添加新帖子。我想获取类别信息以自动填充帖子。

但是，到目前为止，我只有两个想法，如何做到这一点。一个 - 在当前类别视图中设置会话以在帖子页面中使用它，或者从以前的类别视图地址信息中获取信息以及代理推荐。

还有其他想法吗？

PS 抱歉，我根本没有提到这个项目的任何内容……这是 PHP，上一页和下一页都在同一个项目中；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T19:44:52.783

您可以通过 URL 传播值

```
script.php?var1=val1&var2=val2&var3=val3 
```

从那里你可以在 PHP 脚本中访问它们

```
$var1 = $_GET['var1'];
$var2 = $_GET['var2'];
$var3 = $_GET['var3']; 
```

如果您不想使用该 URL，您可以发布到下一页。

```
<form method="post" action="{next_page}">
   <input type="hidden" name="cat" value="{category}" />
   <input type="hidden" name="var1" value="val1" />
   <input type="hidden" name="var2" value="val2" />
   <input type="submit" value="Button_TO_Next_Page" />
</form> 
```

在下一页上，您将检索值

```
$cat= $_POST['cat'];
$var2 = $_POST['var2'];
$var3 = $_POST['var3']; 
```

正如您所提到的，您可以使用会话来保存用户所在的当前类别，您不必担心 $_GET 与 $_POST

```
$val = $_SESSION['val1']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T19:40:26.743

在您的项目第一页使用 html 表单，然后使用 get 或 post 方法中的任何一个将数据发送到下一页。在第二页中使用 $_POST 或 $_GET 方法来接收数据。

# java - Gmail SMTP 身份验证

> ID：12546916
> 
> 赞同：0
> 
> 时间：2012-09-22T19:14:18.007
> 
> 标签：java, email

如何使用 Gmail 的服务器发送带有附件的电子邮件，但没有 JavaMail？

我遇到过这段[代码](http://www.java-forums.org/java-net/7247-sending-mail-using-sockets.html)。

使用此代码时如何进行身份验证（使用我的 gmail 帐户作为发件人）？可以以可以指定主题的方式编辑此代码吗？我猜这 file.txt 充当附件？

编辑：这是链接中的代码，适合我的需要（或多或少）。唯一的区别是文件位置、smtp 服务器以及“from”和“to”字符串。

```
public static void blabla() throws IOException, UnknownHostException {
        String msgFile = "C:\\file.txt";
        String from = "myemailaccount@gmail.com";
        String to = "otheremailaccount@gmail.com";
        String mailHost = "smtp.gmail.com";
        SMTP mail = new SMTP(mailHost);
        if (mail != null) {
            if (mail.send(new FileReader(msgFile), from, to)) {
                System.out.println("Mail sent.");
            } else {
                System.out.println("Connect to SMTP server failed!");
            }
        }
        System.out.println("Done.");
    }

    static class SMTP {
        private final static int SMTP_PORT = 25;

        InetAddress mailHost;

        InetAddress localhost;

        BufferedReader in;

        PrintWriter out;

        public SMTP(String host) throws UnknownHostException {
            mailHost = InetAddress.getByName(host);
            localhost = InetAddress.getLocalHost();
            System.out.println("mailhost = " + mailHost);
            System.out.println("localhost= " + localhost);
            System.out.println("SMTP constructor done\n");
        }

        @SuppressWarnings({"resource", "unused"})
        public boolean send(FileReader msgFileReader, String from, String to)
                throws IOException {
            Socket smtpPipe;
            InputStream inn;
            OutputStream outt;
            BufferedReader msg;
            msg = new BufferedReader(msgFileReader);
            smtpPipe = new Socket(mailHost, SMTP_PORT);
            if (smtpPipe == null) {
                return false;
            }
            inn = smtpPipe.getInputStream();
            outt = smtpPipe.getOutputStream();
            in = new BufferedReader(new InputStreamReader(inn));
            out = new PrintWriter(new OutputStreamWriter(outt), true);
            if (inn == null || outt == null) {
                System.out.println("Failed to open streams to socket.");
                return false;
            }

            String initialID = in.readLine();

            System.out.println(initialID);
            System.out.println("HELO " + localhost.getHostName());
            out.println("HELO " + localhost.getHostName());

            String welcome = in.readLine();

            System.out.println(welcome);
            System.out.println("MAIL From:<" + from + ">");
            out.println("MAIL From:<" + from + ">");

            String senderOK = in.readLine();

            System.out.println(senderOK);
            System.out.println("RCPT TO:<" + to + ">");
            out.println("RCPT TO:<" + to + ">");

            String recipientOK = in.readLine();

            System.out.println(recipientOK);
            System.out.println("DATA");
            out.println("DATA");

            String line;
            while ((line = msg.readLine()) != null) {
                out.println(line);
            }

            System.out.println(".");
            out.println(".");

            String acceptedOK = in.readLine();

            System.out.println(acceptedOK);
            System.out.println("QUIT");
            out.println("QUIT");

            return true;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T23:00:09.340

通过 GMails SMTP 服务发送电子邮件有一些技巧。

尝试通读

*   [通过 GMail SMTP 发送电子邮件](http://www.mkyong.com/java/javamail-api-sending-email-via-gmail-smtp-example/)
*   [如何使用 GMail、Yahoo 或 Hotmail 通过 Java 应用程序发送电子邮件？](https://stackoverflow.com/questions/46663/how-do-you-send-email-from-a-java-app-using-gmail)
*   [使用 JavaMail API 和 GMail 发送电子邮件](http://dunithd.wordpress.com/2009/10/22/send-email-using-javamail-api-and-your-gmail-account/)

# awk - awk - 打印文件的最后 4 行

> ID：12546919
> 
> 赞同：3
> 
> 时间：2012-09-22T19:15:03.053
> 
> 标签：awk

我有一个测试文件：

```
1
2
3
4
5
6
7
8 
```

此命令打印文件的最后 4 行：

```
$ awk 'BEGIN{"wc -l < file" | getline b}{if(NR>b-4) print}' file
5 
6 
7 
8 
userpc@userpc-desktop 
```

现在我也想做同样的事情，但是命令system()：

```
$ awk '{if( NR > (system("wc -l < file")-4) ) print}' file
8 
1 
8 
2 
8 
3 
8 
4 
8 
5 
8 
6 
8 
7 
8 
8 
userpc@userpc-desktop: 
```

如何改进最后一个命令系统（）？我还想打印文件的最后 4 行。感谢您的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-22T19:16:43.910

不需要awk，使用`tail`：

```
$ tail -4 your_file 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-22T20:05:24.057

`awk`这绝对不是正确的工具。这样做很常见：`sed '1{N;N;N;}; N; D; $p'`，你可以用 awk 做类似的事情：

```
awk '{for( i=0;i<3;i++) a[i]=a[i+1];a[3]=$0} END {print a[0],a[1],a[2],a[3]}' OFS='\n' 
```

基本上，您跟踪看到的最后四行，并在到达文件末尾时将它们全部打印出来。您可以通过以下方式变得更加晦涩和高效：

```
awk '{a[++i%4]=$0} END {print a[++i%4],a[++i%4],a[++i%4],a[++i%4]}' OFS='\n' 
```

但是，真的，你为什么要这样做？

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-23T04:36:18.837

一种使用方式`GNU awk`：

```
awk '{ array[NR]=$0 } END { for (i=NR-3; i<=NR; i++) print array[i] }' file.txt 
```

结果：

```
5
6
7
8 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-22T21:02:19.667

如果您只是想要一种机制来改进您对`wc`inside的使用`system`，请尝试：

```
awk 'NR > count-4' count=$( wc -l < file ) file 
```

在 awk 中做更多的事情；

```
awk 'NR==1{ c="wc -l < " FILENAME; c | getline count } NR > count-4' input 
```

这使用 NR==1 而不是 BEGIN，因为 FILENAME 未在 BEGIN 块内定义。请注意，这些都`system`不能在 awk 中使用，因为没有从 获取输出的好方法`system`，但是您可以做一些丑陋的事情，例如：

```
awk 'NR==1 { system( "wc -l > tmpfile < " FILENAME ); getline count < "tmpfile" }
    NR > count - 4' input 
```

我不能足够强调这仅仅是一个学术练习。不要为此使用 awk！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-24T23:30:23.237

`tail`是正确的工具，但如果你想在 awk 中看到它：

```
awk '{b=b RS $0} b~/(\n.*){4}/{sub(/[^\n]*\n/,"",b)} END{print b}' 
```

1.  将行追加到缓冲区，用换行符分隔；
2.  如果缓冲区中有 4 个换行符，则从中删除第一行；
3.  最后，打印缓冲区。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-05-23T06:30:41.003

`tac`这是使用and的另一种方式`awk`：

```
$ tac file | awk 'NR==5{exit}1' | tac
5
6
7
8 
```

*   `tac`反转文件。
*   `awk`打印前 4 行并退出（如果您的文件非常大，则可以使用）
*   `tac`再次反转文件

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-05T21:10:02.290

```
awk 'NR==5, NR==8{print NR} file 
```

从第 5 行到第 8 行打印

# visual-studio - 在 Visual Studio 2012 中创建虚拟文件夹

> ID：12546921
> 
> 赞同：0
> 
> 时间：2012-09-22T19:15:18.037
> 
> 标签：visual-studio, msbuild, projects-and-solutions

本质上，我需要一个文件夹及其项目中可用的项目进行调试，但我不希望它包含在发布中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:29:53.980

您可以从构建解决方案中排除文件夹（默认情况下调试和发布可用）。

*   右键单击解决方案资源管理器和`Add New Folder`. 命名它。
*   右键单击文件夹并选择“ `Exclude from project`”

![从项目/解决方案中排除文件夹](../Images/50672833f805b871f0b5d9304a820818.png)

请注意，屏幕截图来自 VS2010 C# Express，但在 VS2012 中提供了相同的选项。

# java - Restlet 提取器将属性返回为空值

> ID：12546923
> 
> 赞同：1
> 
> 时间：2012-09-22T19:15:37.853
> 
> 标签：java, restlet-2.0

我试图提取 url 查询参数但没有成功。

例如，AboutWebServices/merchantofferings?lat=5?long=7?cat=9

使用 Tomcat 服务器，我尝试了 Restlets 的各种命令：

```
@Override
public synchronized Restlet createInboundRoot() {

     Router router = new Router(getContext());

    Extractor extractor = new Extractor(getContext());
    extractor.extractFromQuery("lat", "lat", true); 
    extractor.extractFromQuery("long", "long", false);
    extractor.extractFromQuery("cat", "cat", false);

    ChallengeAuthenticator guard = new ChallengeAuthenticator(getContext(),    
      ChallengeScheme.HTTP_BASIC, 
            "AnywhereAbout");
    guard.setVerifier(new UserVerifer());

    guard.setNext(extractor);
    extractor.setNext(router);

   //     router.attach("/merchantofferings", extractor);
    router.attach("/merchantofferings", MerchantOfferings.class);

    router.attach("/merchantofferings/{id}", MerchantOfferings.class);

    router.attach("/merchantprofile", MerchantProfile.class);

    router.attach("/merchantprofile/{id}", MerchantProfile.class);

    return guard;
   } 
```

路由适用于此方法，但属性为空。

```
 //@Get("json+?lat?long?cat")
 @Get("json")
 public String representGet() {

Context context = getContext();

String lat = (String) context.getAttributes().get("lat");
String lon = (String) context.getAttributes().get("long");
String cat = (String) context.getAttributes().get("cat");

    return "hello, world: " + this.getRequest().toString();
 } 
```

我也一直在阅读新的 Restlet in Action。很棒的书，但是虽然它说您可以在注释中指定查询参数，但它没有解释如何使用它们，即没有示例。有人知道吗？在任何情况下，@Get("json+?lat?long?cat") 的变体也不起作用。

# python - pymongo - 哪种方法更有效 - 查找所有与查找一个？

> ID：12546927
> 
> 赞同：0
> 
> 时间：2012-09-22T19:16:26.420
> 
> 标签：python, mongodb, pymongo

我们正在使用 mongodb，并通过 pymongo 访问。什么方法更好地访问具有大约 1000 行的域表。注意： findCat 会被循环调用 10,000 次？

**缓存到字典**

```
def __init__(self):
   self.categories_dict=Utils.todict(db.collection.find_all)

def findCat(self, key):
   return self.categories_dict(key) 
```

或 **直接查询**

```
def findCat(key):
   #return object for the key
   return db.collection.find_one 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T00:44:34.767

缓存应该更快，因为：

*   无套接字 I/O
*   无数据转换

但是做一个基准测试很容易。而且mongodb真的很快。除非它对性能非常密集，否则不要担心。10,000 次调用对于 mongodb 应该没有问题。

# blackberry - 如何在黑莓中从图像中读取文本

> ID：12546932
> 
> 赞同：-1
> 
> 时间：2012-09-22T19:17:20.277
> 
> 标签：blackberry, java-me, image-recognition

我需要启动相机并扫描图像。有一组预定义的图像。我需要识别来自相机的特定图像并需要触发特定事件。

假设有 2 种类型的食物包，上面有不同的图像。当任何人扫描这个食物包然后从相机它应该识别这是x食物包或者这是y食物包并且需要相应地播放视频。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T20:01:23.057

看看这几个关于图像识别的问题：

[用于图像模式识别的java框架？](https://stackoverflow.com/questions/2062618/java-framework-for-image-pattern-recognition)

[Eclipse 上的 JAVA OCR API 开源](https://stackoverflow.com/questions/9480831/java-ocr-api-open-source-on-eclipse/9481603#9481603)

# android - Android OpenGL ES 为什么 JPG 纹理在某些设备上显示错误？

> ID：12546938
> 
> 赞同：1
> 
> 时间：2012-09-22T19:18:06.490
> 
> 标签：android, opengl-es, png, textures, jpeg

我对 OpenGl 完全陌生，所以请善待。在我的应用程序中，我使用的是 JPG 和 PNG 纹理。在 HTC Desire (android 2.2) 或 Xperia x8 (android 2.1) 上一切正常，屏幕如下：http: [//imageshack.us/photo/my-images/534/xperia.png/](http://imageshack.us/photo/my-images/534/xperia.png/)）。但在三星 Galaxy Tab 10.1 (android 3.2) 或三星 Galaxy S3 (android 4.x) 等较新的设备上，JPG 纹理是按颜色分隔的吗？并转移：http: [//imageshack.us/photo/my-images/855/samsungbs.png/](http://imageshack.us/photo/my-images/855/samsungbs.png/)。不过，PNG 始终显示正常。

我正在使用 GLSurfaceView 进行绘图。我负责制作纹理的代码如下所示：

```
gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[i]);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_NEAREST);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_REPEAT);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_REPEAT);
        if (bitmaps[i].hasAlpha()) {
            GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, GL10.GL_RGBA, bitmaps[i], 0);
        } else {
            GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, GL10.GL_RGB, bitmaps[i], 0);
        } 
```

通过“bitmaps[i].hasAlpha()”，我试图区分给定的位图是 jpg 还是 png。我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T22:41:07.727

我猜这些不是 2 次幂纹理？如果是这样，也许它不工作的设备不能处理非 2 次幂纹理。这里肯定有对齐/间距的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:48:45.583

谢谢吉姆·巴克。正如你所说。在某些设备上，jpg 必须被错误地解释，并且属于“如果没有 alpha”，但仍是 RGBA 格式。如果声明是不必要的，最好使用基本的 texImage2D 方法：

```
 gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[i]);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_NEAREST);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_REPEAT);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_REPEAT);
        GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmaps[i], 0); 
```

不过，在我之前的 ogl 配置中，纹理的颜色显示错误。所以下面是我的配置，它适用于我的所有设备。

```
 private void configureGL(GL10 gl) {
        gl.glDisable(GL10.GL_DITHER);
        gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_FASTEST);
        gl.glClearColor(1, 0, 0, 1);
        gl.glEnable(GL10.GL_CULL_FACE);
        gl.glShadeModel(GL10.GL_SMOOTH);
        gl.glEnable(GL10.GL_DEPTH_TEST);
        gl.glViewport(0, 0, screenWidth, screenHeight);
        gl.glMatrixMode(GL10.GL_PROJECTION);
        gl.glLoadIdentity();
        GLU.gluOrtho2D(gl, 0.0f, BASE_SCREEN_WIDTH, 0.0f, BASE_SCREEN_HEIGHT);
        gl.glEnable(GL10.GL_TEXTURE_2D);
        gl.glShadeModel(GL10.GL_FLAT);
        gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
        gl.glEnable(GL10.GL_ALPHA_TEST);
        //that's a temporal hack below for removing white borders around textures (not a good practice :P)
        gl.glAlphaFunc(GL10.GL_GREATER, 0.4f); 
    } 
```

对于有类似问题的人：

之前，我使用自己的绘图线程并从头开始构建配置。这在某些设备上造成了奇怪的颜色，并让我使用了这个“if aplha”语句。现在，我使用 GLSurfaceView 和实现的渲染器（样本取自“Android 无线应用程序开发，第二版”），基本的 texImage2D 就像一个魅力。

# visual-studio-2010 - 设置 cocos2dx

> ID：12546942
> 
> 赞同：0
> 
> 时间：2012-09-22T19:18:33.057
> 
> 标签：visual-studio-2010, visual-studio-2008, cocos2d-iphone, cocos2d-x

我已经安装了 cocos2d-x 我可以在 msvc 2010 和 2008 中打开示例，但只能在 msvc 2008 中添加一个新的 cocos2d-x 项目。我运行了 install-templates-msvc bat 文件，但它只安装了 2008 的模板。

有谁知道我该如何解决这个问题。我在 Windows 7 上运行所有这些

感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:24:03.930

使用文本编辑器编辑 install-templates-msvc.bat ，并在文件末尾添加“暂停”以查看发生了什么。可能是脚本找不到您的 VS 2010，您可以编辑模板/msvc /installWizardForVS2010.js 文件以更改其默认目录。

# javascript - 定义指令时“控制器”、“链接”和“编译”函数之间的区别

> ID：12546945
> 
> 赞同：395
> 
> 时间：2012-09-22T19:19:03.417
> 
> 标签：javascript, angularjs, web-applications, javascript-framework

有些地方似乎将控制器功能用于指令逻辑，而其他地方则使用链接。角度主页上的选项卡示例将控制器用于一个指令，将链接用于另一个指令。两者有什么区别？

* * *

## 回答 #1

> 赞同：636
> 
> 时间：2012-09-24T17:34:47.393

我将稍微扩展您的问题，并包括编译功能。

*   *compile 函数*- 用于**模板**DOM 操作（即 tElement = 模板元素的操作），因此适用于与指令关联的模板的所有 DOM 克隆的操作。（如果您还需要链接函数（或前链接函数和后链接函数），并且定义了编译函数，则编译函数必须返回链接函数，因为`'link'`如果定义了属性，则忽略该`'compile'`属性。）

*   *链接函数*- 通常用于注册侦听器回调（即，`$watch`范围上的表达式）以及更新 DOM（即，操作 iElement = 单个实例元素）。它在模板被克隆后执行。例如，在 内部`<li ng-repeat...>`，链接函数在`<li>`模板 (tElement) 被克隆（到 iElement 中）用于该特定`<li>`元素之后执行。A`$watch`允许向指令通知范围属性更改（范围与每个实例相关联），这允许指令将更新的实例值呈现给 DOM。

*   *控制器功能*- 当另一个指令需要与该指令交互时必须使用。例如，在 AngularJS 主页上，pane 指令需要将自身添加到 tabs 指令维护的范围内，因此 tabs 指令需要定义一个控制器方法（想想 API），pane 指令可以访问/调用。

    有关 tabs 和 pane 指令的更深入解释，以及为什么 tabs 指令使用`this`（而不是 on `$scope`）在其控制器上创建函数，请参阅[AngularJS 控制器中的 'this' vs $scope](https://stackoverflow.com/questions/11605917/this-vs-scope-in-angularjs-controllers/14168699#14168699)。

通常，您可以将方法`$watches`等放入指令的控制器或链接函数中。控制器将首先运行，这有时很重要（请参阅this [fiddle](http://jsfiddle.net/mrajcok/xfh3F/)，它记录了 ctrl 和 link 函数何时使用两个嵌套指令运行）。[正如 Josh 在评论](https://stackoverflow.com/questions/14620521/how-to-write-a-directive-in-angularjs/14621193#comment20441740_14621193)中提到的那样，您可能希望将范围操作功能放在控制器中，以与框架的其余部分保持一致。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2013-07-16T08:39:15.813

作为对 Mark 回答的补充，compile 函数无法访问范围，但 link 函数可以。

我真的推荐这个视频；由 Misko Hevery（AngularJS 之父）[编写的指令，他在其中描述了差异和一些技术。](http://www.youtube.com/watch?v=WqmeI5fZcho)[（视频中 14:41 处的](http://www.youtube.com/watch?feature=player_detailpage&v=WqmeI5fZcho#t=880)编译功能和链接功能的区别）。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2014-06-04T13:48:28.577

1.  编译前运行代码：使用**控制器**
2.  编译后运行代码：使用**链接**

Angular 约定：在控制器中编写业务逻辑，在链接中编写 DOM 操作。

除此之外，您可以从另一个指令的链接函数调用一个控制器函数。例如，您有 3 个自定义指令

```
<animal>
<panther>
<leopard></leopard>
</panther> 
</animal> 
```

并且您想从“豹”指令内部访问动物。

[http://egghead.io/lessons/angularjs-directive-communication](http://egghead.io/lessons/angularjs-directive-communication)将有助于了解指令间通信

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-07-28T09:15:41.400

**编译函数**——

1.  在控制器和链接函数之前调用。
2.  在 compile 函数中，您拥有原始模板 DOM，因此您可以在 AngularJS 创建它的实例之前和创建范围之前对原始 DOM 进行更改
3.  ng-repeat 是完美的例子 - 原始语法是模板元素，HTML 中重复的元素是实例
4.  可以有多个元素实例并且只有一个模板元素
5.  范围尚不可用
6.  编译函数可以返回函数和对象
7.  返回一个（链接后）函数 - 相当于当编译函数为空时通过配置对象的链接属性注册链接函数。
8.  返回具有通过 pre 和 post 属性注册的函数的对象 - 允许您控制在链接阶段何时应调用链接函数。请参阅下面有关预链接和后链接功能的信息。

**句法**

```
function compile(tElement, tAttrs, transclude) { ... } 
```

**控制器**

1.  在编译函数之后调用
2.  范围在这里可用
3.  可以被其他指令访问（参见 require 属性）

**预链接**

1.  链接函数负责注册 DOM 监听器以及更新 DOM。它在模板被克隆后执行。这是放置大部分指令逻辑的地方。

2.  您可以使用 angular.element 更新控制器中的 dom，但不建议这样做，因为该元素在链接函数中提供

3.  pre-link 函数用于实现在 angular js 已经编译了子元素但在任何子元素的 post 链接被调用之前运行的逻辑

**后链接**

1.  仅具有链接功能的指令，角度将该功能视为发布链接

2.  post 将在编译、控制器和预链接功能之后执行，这就是为什么这被认为是添加指令逻辑的最安全和默认位置

# iphone - 如何将我的 iOS4 应用程序升级到 iOS6

> ID：12546946
> 
> 赞同：-1
> 
> 时间：2012-09-22T19:19:05.323
> 
> 标签：iphone, objective-c, ios, ios6

我在应用商店中有一个 iOS 4 应用。我知道在 iPhone 5 上，用户界面会更高，我的应用程序会出现在一个信箱内。

我找不到有关升级应用程序所需的任何文档。有谁知道我在哪里可以找到“升级到 iOS6”的文档/指南？！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T19:24:34.347

这完全取决于您是想使用 iOS 5 和 6 的新功能，还是让您的应用程序使用整个屏幕。
如果您只想全屏显示，请在项目中添加一个名为“Default-568h@2x.png”的启动画面。
在 iPhone 5 上，您的应用程序将使用整个屏幕，但请确保您使用模拟器或 iPhone 5（如果您已经有的话）对其进行测试。
如果您想添加新功能，请查看 iOS 5 和 6 的“新增功能”并开始实施新功能。

# java - java中的静态和最终

> ID：12546950
> 
> 赞同：1
> 
> 时间：2012-09-22T19:19:36.320
> 
> 标签：java, static, final

[我正在从这个](http://docs.oracle.com/javase/1.5.0/docs/guide/language/enums.html)页面阅读 Java 中的枚举示例。

在第一个示例中，我唯一不明白的`static`部分是这部分代码中关键字的使用：

```
private static final List<Card> protoDeck = new ArrayList<Card>();

// Initialize prototype deck
static {
    for (Suit suit : Suit.values())
        for (Rank rank : Rank.values())
            protoDeck.add(new Card(rank, suit));
}

public static ArrayList<Card> newDeck() {
    return new ArrayList<Card>(protoDeck); // Return copy of prototype deck
} 
```

为什么要声明 protoDeck`static`和`final`？之后，使用静态循环来初始化 protoDeck。我知道静态变量在对象实例之间保留它们的值。但这是一个单例类（私有构造函数），所以不能实例化。

那么像上面那样做有什么好处呢？如果 proteDeck 不是`static`并且会有什么影响`final`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T19:24:44.170

从技术上讲，这*不是*一个单例类。（单例有*一个*实例，这个*没有*！）

它是 的**工厂方法**，`ArrayList<Card>`该方法`newDeck`的工作方式与类“CardArrayList”的构造函数相同。它不是 Java 构造函数，而是工厂方法，但除此之外，它的用途相同：创建新的卡片组。

使用类`CardArrayList`和子类型`ArrayList`显然是一种选择。尝试将此作为练习：编写诸如 class 之类的内容，以达到相同的目的。尝试使用常量 ( `static final`) 来保留初始对象集。您会注意到这两者之间几乎没有区别，只是这种方法清楚地表明没有附加功能，但结果是“除了`ArrayList<Card>`包含一个完整的套牌之外什么都没有”。子类化可能意味着有额外的功能，例如确保甲板不被弄乱。

该`static final`变量包含用作新对象模板的原型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T19:29:16.577

您的代码的静态 { .... } 部分将在 Java 虚拟机加载您的类的位置执行。

在您的代码段中，它用于初始化 protoDeck ArrayList。

这不遵循单例模式，因为您的代码中没有证据表明该类仅被实例化一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T19:32:28.023

在类初始化（`static`括号中的代码）中，程序生成所有牌组并将其存储在`protoDeck`.

当`newDeck`被调用时，将返回该牌组的浅表副本。这意味着游戏中所有的牌对象都是同一个对象（只有一张“黑桃 A”牌）。不过，它们是在几个不同的牌组中管理的。

恕我直言，这个例子有点太复杂了，如果不是`Cards`其他类型的类（在 RAM 中初始化成本高/昂贵的类，或者代表系统资源的其他类 - 数据库连接或类似类 - )。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T19:24:33.607

如果它不是静态的，则代码将无法编译，因为 newDeck 方法是静态的，而 newDeck 是静态的，因为您不会为不同的卡片获得不同的牌组。

让它不是最终的不会做任何不同的事情。这是最终的，因为您不能分配不同的数组。但是你仍然可以添加它，所以它不是一成不变的。所以这是一个常见的线索，但不是行为上的改变。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T19:35:02.857

Java 中的`final`关键字启用了各种编译时魔法。例如，当编译器**知道**一个变量永远不会被重新分配时，它可以执行“[记忆](https://en.wikipedia.org/wiki/Memoization)化”优化。

仅此一项就是默认 -ize 局部变量、参数和类成员的一个很好的理由`final`——当然，除非您真的必须能够重新分配它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-22T19:37:38.520

如果`protoDeck`不是`static`每个人都有一个`Card`，那将不是一件好事。

Obviously, you can only construct a `static` variable with `static` code.

`final` just means the `protoDeck` will never be replaced (although it can be changed internally).

# c# - 文本框控件的首选字体/大小？

> ID：12546954
> 
> 赞同：0
> 
> 时间：2012-09-22T19:20:02.140
> 
> 标签：c#, fonts, textbox, font-size

目前我正在开发一个使用只读文本框来显示一些数据供用户检查的编辑器。我发现默认值（Microsoft Sans Serif，8 分）即使对我来说也很难阅读。然而，当我把它提高到 9 时，字体看起来真的很笨重。

在不牺牲外观的情况下，您的诚实意见将是产生良好可读性的最佳组合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T19:24:09.823

Segoe UI 或 Calibri 是 Windows 的常用字体，它们在 8-9 磅的字体大小下看起来不错。

# vim - Vim 与 GHCi 的集成

> ID：12546959
> 
> 赞同：4
> 
> 时间：2012-09-22T19:20:39.363
> 
> 标签：vim, integration, ghci

我正在尝试将 Vim 用作 Haskell IDE，虽然我不是 Vim 的铁杆用户，但我喜欢基于模式的编辑方式。

在 Emacs 之后，我唯一缺少的就是与 GHCi 的集成。在后一种编辑器中，您只需键入`C-c C-l`（所有类型的 REPL 环境都使用相同的快捷方式）来重新加载当前源文件并切换到带有解释器的拆分窗口。这种可能性对于快速原型设计、TDD 等来说是必不可少的。我确信我已经做了大量工作以尝试在 Vim 中获得相同的功能，但没有取得显著成果。

如果有人已经处理过这样的任务，请提供解决方案的链接或提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T20:19:52.650

有一个脚本可以完全满足我的要求，它叫做[SHIM](http://www.vim.org/scripts/script.php?script_id=2356)。祝大家好运！

# javascript - 如何调整 Flot 库的插件之一的大小？

> ID：12546960
> 
> 赞同：1
> 
> 时间：2012-09-22T19:20:43.830
> 
> 标签：javascript, jquery, charts, resize, flot

我正在使用[Flot](http://www.flotcharts.org/)库显示图表，几乎所有图表都可以使用调整大小插件正常工作。

不过，我需要开始使用允许并排显示条形图的额外[插件之一。](http://en.benjaminbuffet.com/labs/flot/)由于这只是一个非官方的插件图表，我在使用 Flot 的 Resize Plugin 和 Benjamin 的 Bar-side-by-side 插件时遇到了问题。它不起作用，我不断收到此错误：

```
Uncaught TypeError: Cannot call method 'push' of undefined (jquery.flot.resize.js:51) 
```

我需要为这个特定的图表调整大小。一些帮助将不胜感激。有人可以告诉我可以做些什么来解决这个问题？

编辑：我添加了两个 JsFiddle 示例：

首先，条形图示例工作正常（但没有调整大小插件）。[Clcik Here](http://jsfiddle.net/pmking/vQJZd/) 其次，使用resize插件的相同条形图示例。[点击这里](http://jsfiddle.net/pmking/DtmvM/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-16T19:13:29.713

您的两个 Fiddles 中引用的 Flot（v. 0.6）版本真的很旧。调整大小插件与 Flot 中的关闭挂钩：

```
plot.hooks.shutdown.push(shutdown); 
```

Flot 0.6 版没有定义关闭钩子。关闭挂钩是在 0.7 版中添加的。

我将您的 JSFiddle 中引用的浮点文件更新为最新版本。orderbars 和 resize 插件都按预期工作。

[JSFiddle](http://jsfiddle.net/4EDXh/1/)

# android - Android：通过 MTP 连接时如何检测 MediaStore 的变化

> ID：12546967
> 
> 赞同：6
> 
> 时间：2012-09-22T19:21:41.033
> 
> 标签：android, events, action, mediastore, mtp

我对 MediaStore 有很大的问题。当 MediaStore 通过 MTP 更改时，我需要处理事件。我已经有了一个`android.intent.action.MEDIA_SCANNER_FINISHED`行动接收器，但它只对通用大容量存储 (UMS) 有用。扫描仪不会通过 MTP 启动，因为 MTP 会直接更改 MediaStore 数据库。

请你这么好心并帮助我如何检测这个事件。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-12T18:06:21.437

我终于找到了解决方案。我尝试使用 FileObserver 但是当你将它用于所有目录时......它非常消耗内存。所以现在我正在使用 ContentObserver 并且运行良好：

```
public static class UriObserver
{
    private final Cursor mCursor;
    private final ContentObserver mObserver;
    private boolean mRunning = true;

    private class ObserverWithListener extends ContentObserver
    {
        private final OnChangeListener mListener;

        public ObserverWithListener(OnChangeListener listener)
        {
            super(new Handler());

            mListener = listener;
        }

        @Override
        public void onChange(boolean selfChange)
        {
            if (mRunning)
            {
                log.d("Change triggered");
                mListener.onChange();
            }
        }
    };

    public static UriObserver getInstance(ContentResolver contentResolver, Uri uri, OnChangeListener listener)
    {
        Cursor c = contentResolver.query(uri, new String[] { "*" }, null, null, null);

        if ((c = Dao.moveToFirst(c)) == null)
        {
            log.e("Cannot start observer for uri: " + uri);
            return null;
        }

        return new UriObserver(c, listener);
    }

    public UriObserver(Cursor c, final OnChangeListener listener)
    {
        mCursor = c;
        mObserver = new ObserverWithListener(listener);
        mCursor.registerContentObserver(mObserver);
    }

    public void stop()
    {
        mCursor.unregisterContentObserver(mObserver);
        Dao.closeCursor(mCursor);
        mRunning = false;
    }

    public interface OnChangeListener
    {
        public void onChange();
    }
} 
```

出于某种原因，标志 mRunning 必须存在，因为即使之前调用了 unregisterContentObserver()，有时也会调用 onChange。

这段代码与我想观察的 Uris 一起使用，即 MediaStore.Audio.Media.EXTERNAL_CONTENT_URI，...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-17T14:45:32.353

创建内容观察者类

```
class MyObserver extends ContentObserver {
    public MyObserver(Handler handler) {

        super(handler);
    }

    @Override
    public void onChange(boolean selfChange) {
        this.onChange(selfChange, null);
    }

    @Override
    public void onChange(boolean selfChange, Uri uri) {
     doYourWorkHere();
    }
} 
```

在您的活动中注册观察者

```
Handler handler;
    MyObserver observer;
handler = new Handler();
observer = new MyObserver(handler);
        this.getContentResolver().
                registerContentObserver(
                        MediaStore.Video.Media.EXTERNAL_CONTENT_URI,
                        true,
                        observer); 
```

不要忘记在 onDestroy() 函数中注销观察者

```
 this.getContentResolver().unregisterContentObserver(observer); 
```

# .net - 按字母顺序对 ListView 的 ListViewGroups 进行排序

> ID：12546968
> 
> 赞同：2
> 
> 时间：2012-09-22T19:21:46.040
> 
> 标签：.net, winforms, listview, sorting, alphabetical

是否可以在运行时按字母顺序对 Windows 窗体 ListView 的所有 ListViewGroups 进行排序？

还是在添加组时必须手动实现排序（使用 ListViewGroupCollection 的“Insert”方法）？如果是这种情况，有人可以告诉我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:01:01.880

在 WinForms ListView 中，您必须手动进行排序：

```
ListViewGroup[] groups = new ListViewGroup[this.listView1.Groups.Count];

this.listView1.Groups.CopyTo(groups, 0);

Array.Sort(groups, new GroupComparer());

this.listView1.BeginUpdate();
this.listView1.Groups.Clear();
this.listView1.Groups.AddRange(groups);
this.listView1.EndUpdate();

...

class GroupComparer : IComparer
{
    public int Compare(object objA, object objB)
    {
        return ((ListViewGroup)objA).Header.CompareTo(((ListViewGroup)objB).Header);
    }
} 
```

.NET ListView 中的组非常讨厌 - 它们的外观和行为就像旧 Win32 ListView 和 Windows 资源管理器之间的混合......

所以我会推荐你[​​更好的 ListView 组件](http://www.componentowl.com/better-listview)，它支持开箱即用的排序组：

```
this.betterListView1.Groups.Sort(new GroupComparer());

...

class GroupComparer : IComparer<BetterListViewGroup>
{
    public int Compare(BetterListViewGroup groupA, BetterListViewGroup groupB)
    {
        return groupA.Header.CompareTo(groupB.Header);
    }
} 
```

此外，这些组的外观和行为就像在 Windows 资源管理器中一样，是可折叠的，即使您对它们进行排序也不会发生闪烁。

# php - 类 stdClass 的对象无法在 codeigniter 中转换为字符串

> ID：12546969
> 
> 赞同：0
> 
> 时间：2012-09-22T19:21:46.167
> 
> 标签：php, codeigniter

这里有两个样本，

1.

在控制器中

```
 $result_article = $this->cms->get_content($event_id);
 if($result_article->num_rows() == 1){
 $data['row'] = $result_article->row();
} 
```

在我看来

```
<?php echo $row->title; ?> 
```

print_r($row)/print_r($result_article->row()); 输出

```
stdClass Object ( [id] => 43 [title] => Grant visit by Prime Minister [content] => this is the content [create_date] => 2012-09-21 [last_update] => 2012-09-22 19:27:12 ) 
```

出现错误

```
A PHP Error was encountered
Severity: 4096
Message: Object of class stdClass could not be converted to string
Filename: libraries/Parser.php
Line Number: 101 
```

2.

在控制器中

```
$result_article = $this->cms->get_content($event_id);

                    if($result_article->num_rows() == 1){
                        $row = $result_article->row();

                          $data = array(
                             'title' => $row->title
                          );
} 
```

在我看来

```
<?php echo $title; ?> 
```

print_r($title) 输出

```
Grant visit by Prime Minister 
```

没有错误。

第一个控制器和第二个代码有什么不同，它应该是相同的输出吧？我很困惑！

为了更清楚，我简化了代码

这是模型

```
function get_content($event_id){
     $this->db->select('id,title,content,create_date,last_update');
     $query = $this->db->get_where('events',array('id' => $event_id));
     return $query;
} 
```

控制器

```
$data['query']  = $this->cms->get_content($this->uri->segment(3));

if($data['query']->num_rows() == 1){
$row = $data['query']->row();

<!--with this code, no error appear-->
$data = array(
'title' => $row->title,
'content' => $row->content,
'create_date' => $row->create_date,
'last_update' => $row->last_update,
'event_id' => $row->id
              );
<!--with this code, no error appear--> 
```

如果只有这些代码

```
$data['query']  = $this->cms->get_content($this->uri->segment(3));

    if($data['query']->num_rows() == 1){
    $row = $data['query']->row(); 
```

发生错误，

```
A PHP Error was encountered
Severity: 4096
Message: Object of class CI_DB_mysql_result could not be converted to string
Filename: libraries/Parser.php
Line Number: 101 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:58:48.553

在您看来，情况 1 应该是

```
<?php echo $article->row->title; ?> 
```

使代码与情况2相同。

如我所见， $article 是行的集合，因此您必须从文章中访问一行，然后获取该行的标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T09:02:58.420

在获取标题之前尝试序列化（）“行”。因为您的查询，我猜，返回一个 xml 格式（如果我错了，请纠正我）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-05T12:51:35.907

对于那些有这个问题的人，请在 \system\libraries\Parser.php 中替换：

```
$template = $this->_parse_single($key, (string)$val, $template); 
```

至：

```
if (!is_object($val)) $template = $this->_parse_single($key, (string)$val, $template); 
```

# vbscript - 如何使用 VB 脚本在静默模式下运行 telnet？

> ID：12546970
> 
> 赞同：3
> 
> 时间：2012-09-22T19:21:56.260
> 
> 标签：vbscript

我是 VB 脚本的新手。实际上我想运行一些应用服务器的 telnet 命令。

我正在我的客户端 PC（操作系统：- Windows server 2003）上运行该 VB 脚本。该脚本运行良好。

现在的问题是，当 telnet 通过 VB 脚本运行时，我对此无能为力

个人电脑。我希望该脚本在后端运行。即在静音模式下。

以下是我正在使用的 VB 代码。

```
set oShell = CreateObject("WScript.Shell")
oShell.run"cmd.exe"
WScript.Sleep 500
oShell.SendKeys"telnet x.x.x.x -f roamingsubscriber.txt"
oShell.SendKeys("{Enter}")
WScript.Sleep 1500
oShell.SendKeys"username"
oShell.SendKeys("{Enter}")
WScript.Sleep 500
oShell.SendKeys"password"
oShell.SendKeys("{Enter}")
WScript.Sleep 500
oShell.SendKeys"command"
oShell.SendKeys("{Enter}")
WScript.Sleep 1000
oShell.SendKeys"command"
oShell.SendKeys("{Enter}")
WScript.Sleep 1000
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:24:19.617

`http://www.dimac.net/default3.asp?M=FreeDownloads/Menu.asp&P=FreeDownloads/FreeDownloadsstart.asp`有关执行此类操作的免费 ActiveX 组件，请参阅此站点。这是API

```
http://www.dimac.net/products/freeproducts/w3sockets/reference/refstart.htm 
```

这里有一些示例代码

```
Set oSocket = WScript.CreateObject("Socket.TCP")
oSocket.DoTelnetemulation = True
osocket.Timeout = 1000
oSocket.Host = "host.somewhere.com" & ":" & 80
oSocket.Open
oSocket.SendLine("GET /" & vbCrLf)
data = oSocket.GetLine
If (Instr(data, "yourtest")) then
    ' doSomething
End if
oSocket.Close 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T19:29:22.487

除非您找到或开发一个`ActiveX`组件，该组件将在`telnet`不创建控制台窗口并将其输入和输出通过管道传输的情况下启动进程，否则无法完成您的任务。至少`WScript.Shell`不提供这样的功能。

# mysql - 如何构建 MySQL 来存储股票信息？

> ID：12546984
> 
> 赞同：2
> 
> 时间：2012-09-22T19:23:22.833
> 
> 标签：mysql, database

我想将股市数据存储在 MySQL 中。有大约 6,000 只个股要储存。每个都有以下数据：

```
Symbol    Date          Open      High    Low    Close    Volume
ABCD      2012-09-22    50.00     55.25   48.73  51.23    34,002,212 
```

每个交易日都有一个条目。

在我看来，我可以创建一个表，每个条目都构成一个巨大的表，或者我可以创建 6,000 个表，每个股票一个表。每天都会添加新条目。

我最终会想要查询数据库，以提供两个日期之间的两个或多个符号的数据。

将这些数据存储在 MySQL 中的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:28:40.193

听起来像是一张以 Symbol 作为主键的表。这应该为您提供符号上的聚集索引（加快速度）。

我认为拥有 6000 张桌子是个坏主意。您的 Select 查询不会太漂亮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T08:19:34.150

只要您可以动态管理 6000 个表的创建，您就可以根据要优化的查询类型选择任何一种方法。

6000 个表的问题不在于它的 SQL 丑陋或漂亮。（我的意思是，你真的在​​乎吗？）

在一张表上工作的 SQL 就像

```
Select <columnslist> FROM ScripDataTable
Where  scripcode = '<YourChoice>'
And .... 
```

SQL 在 6000 表上工作就像

```
Select <columnslist> FROM (Select tableName FROM TableDictionary
Where  tableName Like '%<YourChoice>%')
Where .... 
```

如果您决定向表中添加额外的列，则会出现每个脚本一个表的问题。我在 excel 中维持了大约 5 个票据的价格，最近决定添加大量从交易所发布的统计数据。有 5 个脚本，我花了一天时间手动添加它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T19:27:17.123

你绝对不想要 6000 张桌子。:) 一张桌子当然可以处理这个。您可能会考虑在 Symbol 和 Date 上创建索引，因为这就是您要查询的内容。希望有帮助。

# mysql - Magento 错误 SQLSTATE

> ID：12546986
> 
> 赞同：0
> 
> 时间：2012-09-22T19:24:01.267
> 
> 标签：mysql, magento, php

每次我停止服务器/mymac 并重新启动它时，Magento 都会给我带来很多麻烦。有没有人有同样的问题？你怎么修好它的？它给我的错误信息是

日志记录号 913324899（但刷新页面时会更改） SQLSTATE [42000]：语法错误或访问冲突 1286 未知表引擎 'InnoDB'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:13:19.540

你好你检查你的innodb引擎是否启用？

请检查一下

# android - 带有旋转android的自定义主菜单

> ID：12546990
> 
> 赞同：1
> 
> 时间：2012-09-22T19:24:23.317
> 
> 标签：android, menu, surfaceview

我想制作一个带有自定义主菜单的应用程序。但是，我想要一个不同的菜单，周围有一个圆圈和项目。用户可以选择旋转设备的每个项目。

![在此处输入图像描述](../Images/439188f0329ea2c653f72b827fbc89bf.png)

我应该使用 Surface View 来绘制它们并制作动画还是有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-25T12:17:17.197

*   是的，您应该使用表面视图绘制背景和文本。
*   当设备旋转时，您需要旋转背景和文本。
*   这是一种相当简单的实现方式。旋转可能是唯一困难的部分。只需制作一个小版本来测试主要功能的代码，然后逐步构建它。

# javascript - 从 Github 存储库中隐藏特定变量的最佳实践？

> ID：12546993
> 
> 赞同：4
> 
> 时间：2012-09-22T19:24:36.027
> 
> 标签：javascript, github, meteor

我在 Github 上有一个公开的 repo。我想用一些需要个人 API 密钥的服务来设置它。

当然，我想与任何想要它的人共享代码库，但不是我的个人密钥。

有这种模式吗？

我想我可以 .gitignore 一个常量文件，并且只在我的服务器本身上使用它们。

只是不确定推荐的做法是什么。

仅供参考：它是 Meteor 中的一个 javascript 应用程序。使用服务器端和客户端 javascript。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:21:17.310

如果您不想共享您的密钥，请先不要将它们提交到存储库。为了防止自己意外提交它们，我建议您按照您的建议通过 .gitignore 中的条目将它们排除在外。这样你甚至可以使用

```
git add .
git commit -a -m "commit everything" 
```

安全，无需担心钥匙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-24T09:31:44.227

这有点晚了，但我建议使用 Dotenv 包作为流星。[https://github.com/okgrow/meteor-dotenv](https://github.com/okgrow/meteor-dotenv)它有很好的文档记录，并且在安全性方面更好。它忘记提及的一件事是将 .env 文件添加到 .gitignore

# ruby-on-rails - Rails 协会不工作（如我所料）

> ID：12546997
> 
> 赞同：0
> 
> 时间：2012-09-22T19:25:25.957
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, associations, models

Rails 新手并尝试测试我拥有的关联。我有这三个相互关联的模型：Animal、Order 和 Line。基本上，线条属于命令属于动物。我希望动物展示页面列出与该动物相关的所有订单以及与该订单相关的行（目前是单数）。

这是模型文件。

动物.rb：

```
class Animal < ActiveRecord::Base
  attr_accessible :breed, :photo, :animal_type 
  has_many :orders
end 
```

线.rb

```
class Line < ActiveRecord::Base
  belongs_to :order
  attr_accessible :notes, :units
end 
```

订单.rb

```
class Order < ActiveRecord::Base
  belongs_to :animal
  attr_accessible :status, :lines_attributes, :animal_id

  has_many :lines

  accepts_nested_attributes_for :lines
end 
```

我要做的是在动物表演视图上显示与给定动物相关的所有线条和顺序。这是我的节目视图

```
<p id="notice"><%= notice %></p>

<div class="pull-left"> 
  <h2><span style="font-size:80%"> Animal Name: </span><%= @animal.name %></h2>
</div>

<br>
<table class="table">
  <tr>
    <th>Type of Animal</th>
    <th>Breed</th>
    <th>Photo</th>
  </tr>
  <tr>
    <td><%= @animal.animal_type %></td>
    <td><%= @animal.breed %></td>
    <td><%= @animal.photo %></td>
  </tr>
</table>

<br>
<h2>Associated Orders</h2>
<table class="table">
  <tr>
    <th>Order Number</th>
    <th>Order Status</th>
    <th>Line Notes</th>
    <th>Line Units</th>
  <tr>
  <%= render 'orderlist' %>
</table>

<br>

<%= link_to 'Edit', edit_animal_path(@animal) %> |
<%= link_to 'Back', animals_path %> 
```

最后，这是订单列表助手

```
<% @animal.orders.each do |o| %>
    <tr>
        <th><%= o.id %></th>
        <th><%= o.status %></th>
        <th><%= o.lines.notes %></th>
        <th><%= o.lines.units %></th>
    </tr>
<%end%> 
```

但是，当我访问显示页面时，这会引发一个错误，说

```
undefined method `notes' for #<ActiveRecord::Relation:0x007f9259c5da80> 
```

如果我删除 .notes，那么它对单位的说明也是一样的。如果我删除两者（并保留 o.lines），页面加载得很好，并在这两个表格单元格中列出相关行的所有信息（行 ID、行单位、行注释）。所以它肯定是找到了正确的模型对象，但它并没有让我调用特定的属性。

知道我做错了什么吗？难住了。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:30:51.517

您在与订单关联的行*集合上调用方法“notes”（和“units”）。*您可能会尝试为顺序中的每一行调用这些方法。要输出视图中每一行的注释，粗略的重写可能是：

```
<% @animal.orders.each do |o| %>
  <tr>
    <th><%= o.id %></th>
    <th><%= o.status %></th>
    <th><%= o.lines.map(&:notes).join('. ') %></th>
    <th><%= o.lines.map(&:units).join('. ') %></th>
  </tr>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T19:32:11.947

查看您的 Order 类：

```
class Order < ActiveRecord::Base
   has_many :lines 
end 
```

和你的观点：

`o.lines.notes`

`o.lines`当前是一组属于 Order 的行。

正如@rossta 在我输入此内容时发布的那样，您可以连接所有行的注释。

# c - c套接字发送失败

> ID：12546998
> 
> 赞同：-4
> 
> 时间：2012-09-22T19:25:32.353
> 
> 标签：c, sockets, send

我通过 TCP 套接字发送 52 个字节的数据。我测试了发送 10 个字节的套接字，它工作正常，但现在 send() 返回 -1。我在用着：

```
 write(sockfd, request, total_size + 1); 
```

其中 sockfd 是描述符（设置没有错误），request 是 char[200] 并且 total_size + 1 = 52。

为什么 send() 调用失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:38:13.540

正如评论者所指出的，根据您所写的问题，不可能给出很多答案。然而：

> 为什么 send() 调用失败？

标准库调用会告诉您它们在[`errno`](http://en.wikipedia.org/wiki/Errno.h). 尝试：

```
#include <stdio.h>

//... make the write fail
perror("write failed"); 
```

并检查输出。