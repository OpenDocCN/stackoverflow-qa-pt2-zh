# StackOverflow 问答 13169000-13169999

# android - Android 线性布局 TouchMovement

> ID：13169000
> 
> 赞同：2
> 
> 时间：2012-10-31T23:42:56.400
> 
> 标签：android, android-linearlayout

我想读取触摸位置，触摸时移动并释放。但是所有这些都在 LinearLayout 类中，我不知道该怎么做。OnTouchListener 不能这样工作：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T23:50:52.420

下面是在android的线性布局中处理触摸事件的代码

```
<?xml version="1.0" encoding="utf-8"?>                                      
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/l_layout"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
>
</LinearLayout>

public class MainActivity extends Activity {

  private LinearLayout llLayout;

  @Override
  public void onCreate(Bundle savedInstanceState)
  {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);

     llLayout = (LinearLayout)findViewById(R.id.l_layout);

     llLayout.setOnTouchListener(new View.OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
     switch(event.getAction()) {
      case MotionEvent.ACTION_MOVE :
        Toast.makeText(MainActivity.this, "Touch coordinates : " +
            String.valueOf(event.getX()) + "x" + String.valueOf(event.getY()), Toast.LENGTH_SHORT).show();
            return true;

      case MotionEvent.ACTION_DOWN :
        Toast.makeText(MainActivity.this, "Touch coordinates : " +
            String.valueOf(event.getX()) + "x" + String.valueOf(event.getY()), Toast.LENGTH_SHORT).show();
            return true;
       default :
        return super.onTouch(v,event);
       }
      }
   });
 } 
```

# facebook - Facebook 深度链接到 iOS 6 Web App 中的公司页面

> ID：13169001
> 
> 赞同：2
> 
> 时间：2012-10-31T23:42:57.637
> 
> 标签：facebook, web-applications, ios6

我有一个移动 Web 应用程序，它使用指向我公司 Facebook 页面的链接，例如 http://www.facebook.com/[My_Company]。当从移动浏览器单击链接时，这可以正常工作——Facebook 在浏览器中直接加载到“My_Company”Facebook 页面。

但是，当在运行 iOS 6 的 iPhone 上将我的 Web 应用程序添加到主屏幕，然后从我的 Web 应用程序中单击上述链接时，它只会启动 Facebook 原生应用程序，而没有指向“My_Company”页面的“深层链接”（ Facebook 原生应用程序会加载到我在使用原生应用程序时上次访问的任何页面）。

是否有一种机制可以从 Web 应用程序进行深度链接，从而将 Facebook 原生应用程序加载到特定页面？如果没有，是否有办法将链接定位到浏览器而不是本机应用程序（以便我公司的页面正确加载）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:48:49.000

您需要 facebook 页面 ID 并使用“fb://profile/385612258157212”之类的 URL 打开它。

# google-chrome - 谷歌浏览器。从上下文菜单中删除项目

> ID：13169003
> 
> 赞同：3
> 
> 时间：2012-10-31T23:43:33.163
> 
> 标签：google-chrome, google-chrome-extension

这可能吗：删除一些上下文的元素？我不想删除核心项目，但如果我能够删除或禁用扩展添加的一些东西，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T07:47:42.260

如果你想从你的扩展中删除一些由其他扩展添加的元素，你可以做的是[禁用](http://developer.chrome.com/extensions/management.html#method-setEnabled)它们（你需要`management`获得许可）。没有比这更具体的方法了，只能禁用其他扩展的某些部分，抱歉。

# git - 如何将预提交文件签入到 git 存储库

> ID：13169006
> 
> 赞同：0
> 
> 时间：2012-10-31T23:43:48.957
> 
> 标签：git, pre-commit-hook, pre-commit

我尝试在 myrepo/.git/hooks/pre-commit 中添加一个新的预提交。为什么我在运行时没有看到这个预先提交的新文件

状态

我需要打开一些 git 配置或设置？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T23:58:13.280

目录中的钩子和其他文件`.git`无法进行版本控制。您可以将挂钩脚本放在`.git`目录之外的某个位置以对其进行版本控制，然后进行符号链接或将其复制到挂钩目录中以实际使用它。

# azure - 在 Azure 中选择 VM 的数量和大小

> ID：13169012
> 
> 赞同：1
> 
> 时间：2012-10-31T23:44:26.510
> 
> 标签：azure, azure-web-roles, azure-caching

我想使用 Azure Web 角色实例来托管一些使用分布式缓存（[Windows Azure 缓存](http://msdn.microsoft.com/en-us/library/windowsazure/gg278356.aspx)）的网站。

什么是 VM 的大小和数量的更好选择：**2 个大型**VM 或**4 个中型**VM。

两种情况下的价格和规格相同。我只是想知道是否拥有更多但较小的机器更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:46:29.253

这篇 MSDN 文章，[真实世界：选择 Web 角色实例大小时的注意事项：我应该多小？](http://msdn.microsoft.com/en-us/library/windowsazure/hh824677.aspx)，给出了一些好的建议。使用较小实例的一个好处是您可以在低流量期间关闭一个或多个实例。但是，如果您致力于持续运行相同数量的实例，则较大的实例（根据文章）将表现更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T02:22:20.470

由于您使用的是**缓存集群**，因此[每个新 VM 都会因所需的操作系统资源而花费您一定百分比的整个集群 RAM](http://msdn.microsoft.com/en-us/library/windowsazure/hh914161.aspx)。我会使用**大型虚拟机**来**最大化**缓存集群的可用 RAM 资源并减少操作系统本身占用的 RAM 量。

在本地缓存不包含给定缓存键的情况下，我还将使用大型 VM 来**减少网络延迟。**由于缓存是分布式的，因此在双角色场景中，它在本地 RAM 中与远程机器的 RAM 中的几率为 50-50。如果您有 4 个中型 VM 角色，网络延迟将会增加，因为缓存在本地 RAM 中的缓存命中率只有 25%。

不过，确实，您需要确定瓶颈在哪里——**缓存并不是唯一需要关注的事情**。通常，您希望将每个应用程序请求的响应时间视为一个整体。这可能需要一些真实世界的负载测试，这些测试很容易使用 Azure 门户和部署配置进行配置。

# ember.js - 使用@each 观察数组元素时，如何知道添加或删除了哪些元素？

> ID：13169023
> 
> 赞同：3
> 
> 时间：2012-10-31T23:45:36.910
> 
> 标签：ember.js

主题说明了一切。我正在观察数组元素属性的变化：

```
onChange: function() {
  //
}.observes(content.@each.selected) 
```

我想确切地知道正在添加和删除哪些元素。经过几次实验，我发现我可以在观察函数中添加三个参数，但它们都不是正在添加/删除的元素。

有没有比保留数组副本然后与新数组进行手动比较更简单的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T00:04:15.200

您可以存储更改前的内容并将其与更改后的内容进行比较：

```
willChange: function() {
  this.contentBeforeSelectedChange = this.get('content').slice(0);
}.observesBefore('content.@each.selected')

onChange: function() {
  var content = this.get('content');
  var oldContent = this.contentBeforeSelectedChange.toArray();

  var whichChanged = content.find(function(item, index){
     var oldItem = oldContent[index].get('selected');
     return item.get('selected') !== oldItem.get('selected');
  });
}.observes(content.@each.selected) 
```

# php - 生成具有预定义长度 PHP 的随机数

> ID：13169025
> 
> 赞同：12
> 
> 时间：2012-10-31T23:46:02.447
> 
> 标签：php, random, numbers

我正在尝试使用 mt_rand() 创建一个函数以生成一个真正的随机数，因为 rand() 还不够。

问题是我需要预先定义数字的长度，比如我需要一个 10 位的随机数。

无论如何，我一直在搞乱，这就是我想出的：

```
 function randomNumber($length) {
        $min = str_repeat(0, $length-1) . 1;
        $max = str_repeat(9, $length);
        return mt_rand($min, $max);   
    } 
```

理论上应该有效（据我所知），但事实并非如此。长度是完全随机的，它也会抛出负值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-31T23:55:29.753

除非您拥有其中一种量子静态的东西，否则您无法获得真正的随机数。然而，在基于 Unix 的操作系统上`/dev/urandom`，如果你真的需要的话，它可以实现“更多随机性”。

无论如何，如果你想要一个 n 位数字，这正是你应该得到的：n 个单独的数字。

```
function randomNumber($length) {
    $result = '';

    for($i = 0; $i < $length; $i++) {
        $result .= mt_rand(0, 9);
    }

    return $result;
} 
```

您现有代码不起作用的原因`0000...01`是仍然是`1`to `mt_rand`，而且`mt_rand`' 的范围不是无限的。负数是整数溢出。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2020-02-26T16:15:09.420

只需将范围指定为 rand 方法，如果您需要 4 位随机数，则只需将其用作

```
rand(1000,9999); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-31T23:57:25.357

简短而甜蜜：

我假设只有合法数字，而不是像 00010 这样的字符串。尝试使用您的数字的大小为：

```
 $min = pow(10, $length - 1) ;
  $max = pow(10, $length) - 1;
  return mt_rand($min, $max); 
```

唯一不起作用的是当长度为 1 时，单个数字“0”将不是可能返回的值。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-09-10T06:13:32.743

这是我正在使用的：

```
function random_number($length)
{
    return join('', array_map(function($value) { return $value == 1 ? mt_rand(1, 9) : mt_rand(0, 9); }, range(1, $length)));
} 
```

一条线，好看又简单！该数字永远不会以 0 开头，并允许在任何其他位置为 0。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-06T20:20:15.560

```
function randomNDigitNumber($digits)
{
  $returnString = mt_rand(1, 9);
  while (strlen($returnString) < $digits) {
    $returnString .= mt_rand(0, 9);
  }
  return $returnString;
} 
```

> 第一行确保没有“0”在任何数字之前，例如像 012、0598... 这样的值将被丢弃，其余的很容易

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-31T23:59:41.710

```
function randomNumber($length) {
    $min = 1 . str_repeat(0, $length-1);
    $max = str_repeat(9, $length);
    return mt_rand($min, $max);   
} 
```

您将 concat 1 放在错误的位置，您的范围是 $length=2: {01,99} - 有时是 01-09，表示为 1-9 而不是 01-09。只需从 10 开始：{10,99} 将是您的范围。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-02T00:48:03.127

将此用于包含字母和数字的特定长度的字符串。经测试。

```
protected function randomToken($length = 4, $result='') {

    for($i = 0; $i < $length; $i++) {

        $case = mt_rand(0, 1);
        switch($case){

            case 0:
                $data = mt_rand(0, 9);
                break;
            case 1:
                $alpha = range('a','z');
                $item = mt_rand(0, 25);

                $data = strtoupper($alpha[$item]);
                break;
        }

        $result .= $data;
    }

    return $result;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-31T23:57:01.693

您不应该从限制随机数的长度开始。而是积累足够长的输出，然后将其切割到正确的长度：

```
while (strlen($value) < $length) {
    $value .= str_pad(mt_rand(00000, 99999), 5, "0", STR_PAD_LEFT);
}
// as pairs of five were added before, eventually remove some again
return substr($value, 0, $length); 
```

填充应该在那里，因为即使是零也是随机生成的，应该保留。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-06-13T01:53:57.707

假设您使用的范围很小并且不想两次生成相同的数字，那么这个怎么样：

```
function random(int $len): int
{
    static $track = [];

    $min = 1 . str_repeat(0, $len - 1);
    $max = str_repeat(9, $len);
    $num = mt_rand($min, $max);

    // if was generated before, try again
    if (in_array($num, $track))
    {
        return random($len);
    }

    // store and return
    return $track[] = $num;
} 
```

通过仅启动一次的静态变量跟踪生成的随机数将防止两次生成相同的数字，但请注意，如果您超过了由您指定的唯一可能性的数量，`$len`您将陷入无限循环。例如，您不能调用`random(1)`超过 9 次，因为`$len`1 并且只有 9 种唯一可能性（不包括 0），因此您需要了解需要多少随机数或选择足够大的随机数，`$len`而不用担心它.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-02-27T10:27:39.343

如果环境是本地的，则无需生成随机数，并且 mt_rand 类似于 rand 但快四倍

```
 protected function generateRandomNumber(int $length = 6)
    {
        $rand = '';
        $env = env('APP_ENV');
        for ($i = 1; $i <= $length; $i++) {
            $rand .= ($env == 'local') ? $i : mt_rand(($i == 1) ? 1 : 0, 9);
        }

        return (int) $rand;
    } 
```

# objective-c - 目标 C：实现 drawRect

> ID：13169033
> 
> 赞同：1
> 
> 时间：2012-10-31T23:46:38.520
> 
> 标签：objective-c, drawrect, setneedsdisplay

我有一个非常简单的项目，涉及使用 drawRect 绘制形状，但我不相信我的 drawRect 函数实际上被调用了。这是代码。（其他一切都只是“单一视图应用程序”的默认设置。）

```
-(void)drawRect:(CGRect)aRect{
    NSLog(@"testing...");
    CGContextRef context=UIGraphicsGetCurrentContext();
    CGContextBeginPath(context);
    CGContextMoveToPoint(context, 50, 50);
    CGContextAddLineToPoint(context, 100, 120);
    CGContextAddLineToPoint(context, 20, 100);
    CGContextClosePath(context);

    [[UIColor greenColor] setFill];
    [[UIColor redColor] setStroke];

    CGContextDrawPath(context,kCGPathFillStroke);
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.view setNeedsDisplay];
} 
```

任何建议都会很棒——感谢阅读！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T09:21:08.137

看起来您已将 放置`drawRect:`在`UIViewController`子类中。`UIViewController`的不实现`drawRect:`，`UIView`做的子类。

您需要`UIView`使用您的实现创建一个自定义子类，`drawRect:`然后将其作为视图控制器属性的子级`self.view`或作为根视图本身添加到您的视图层次结构中。

# c++ - 如何在 C++ 中制作阶乘程序

> ID：13169034
> 
> 赞同：2
> 
> 时间：2012-10-31T23:46:50.453
> 
> 标签：c++, visual-studio-2010, factorial

我是这个网站的新手；事实上，这是我的第一个问题。因此，如果我在错误的上下文中提出这个问题，请通知我，以便我做出调整。我有一个在 Visual Studio 2010 中创建的程序，允许用户输入从 1 到 10 的整数。该用户将单击一个按钮，该按钮依次计算并在文本框中显示整数的阶乘值。我认为一切看起来都正确，但文本框中没有出现任何内容。

以下代码是我一直在使用的：

```
#pragma endregion
        private: System::Void btnFactorial_Click(System::Object^  sender, System::EventArgs^  e) 
        {
            int n;
            int nfact = 1;
            Int32::TryParse(txtNum->Text, n);
            if (n > 0)
            {
                for (int i = 1; i <= n; i++)
                    nfact *= i;
                txtResult->Text = nfact.ToString();
            }
            else
                MessageBox::Show ("Please enter a value > 0");      
        }

        private: int Factorial (int n)
        {
            if (n == 0)
                return 1;
            else
                return n * Factorial (n-1);
        }
    };
} 
```

我可以就我在这里做错了什么寻求帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T00:05:35.927

您需要在某处调用自己的函数。替换这个：

```
for (int i = 1; i <= n; i++)
                nfact *= i; 
```

并写下：

```
nfact = Factorial(n); 
```

# python - Django GeoIP 导入

> ID：13169040
> 
> 赞同：0
> 
> 时间：2012-10-31T23:47:54.240
> 
> 标签：python, django, geoip

> **可能重复：**
> [在 Django 上设置 geoip 时出错](https://stackoverflow.com/questions/4896996/error-setting-up-geoip-on-django)

我从浏览器收到“无法导入名称 GeoIP”错误，但在 python 终端上却没有。例如 /tmp/geo 中的地理数据。以下适用于 python 终端。

```
 from django.contrib.gis.geoip import GeoIP
    GeoIP(path='/tmp/geo/') 
```

但是 Django 视图中的以下内容给出了错误

```
 from django.contrib.gis.geoip import GeoIP
    return HttpResponse (GeoIP(path='/tmp/geo/')) 
```

任何指针都会有所帮助。我正在使用 django 1.4，python 2.6。这是痕迹。谢谢。

```
 Traceback:
    File "/usr/lib/python2.6/site-packages/django/core/handlers/base.py" in get_response
    101\.                             request.path_info)
    File "/usr/lib/python2.6/site-packages/django/core/urlresolvers.py" in resolve
    300\.                     sub_match = pattern.resolve(new_path)
    File "/usr/lib/python2.6/site-packages/django/core/urlresolvers.py" in resolve
    209\.             return ResolverMatch(self.callback, args, kwargs, self.name)
    File "/usr/lib/python2.6/site-packages/django/core/urlresolvers.py" in callback
    216\.         self._callback = get_callable(self._callback_str)
    File "/usr/lib/python2.6/site-packages/django/utils/functional.py" in wrapper
    27\.         result = func(*args)
    File "/usr/lib/python2.6/site-packages/django/core/urlresolvers.py" in get_callable
    92\.                 lookup_view = getattr(import_module(mod_name), func_name)
    File "/usr/lib/python2.6/site-packages/django/utils/importlib.py" in import_module
    35\.     __import__(name)
    File "/x/y/z/views.py" in <module>
    12\. from django.contrib.gis.utils import GeoIP

    Exception Type: ImportError at /
    Exception Value: cannot import name GeoIP 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T23:56:16.467

这两个语句似乎不同（查看堆栈跟踪）：

```
from django.contrib.gis.utils import GeoIP 
```

对比

```
from django.contrib.gis.geoip import GeoIP 
```

查看[source](https://github.com/django/django/blob/master/django/contrib/gis/geoip/__init__.py)，`GeoIP`在 中定义[`django.contrib.gis.geoip.base`](https://github.com/django/django/blob/master/django/contrib/gis/geoip/base.py)和导入[`django.contrib.gis.geoip`](https://github.com/django/django/blob/master/django/contrib/gis/geoip/__init__.py)，这解释了为什么它在控制台中工作，而不是在您正在使用的视图中工作`django.contrib.gis.utils.GeoIP`。

因此，您应该`from django.contrib.gis.geoip import GeoIP`在任何地方使用。

* * *

您的问题可能源于该`django.contrib.gis.utils`模块已[在 Django 1.4 中删除](https://docs.djangoproject.com/en/dev/ref/contrib/gis/geoip/)

# webgl - Three.js 中的 Chromadepth3D 着色器

> ID：13169042
> 
> 赞同：3
> 
> 时间：2012-10-31T23:48:01.250
> 
> 标签：webgl, three.js, javascript-framework

我必须在这两个 vertexshader/fragmentshader 中进行哪些更改才能使其在three.js 中工作？或者是否可以更改“MeshDepthMaterial”以显示色深配色方案？

```
**The vertex shader looks like this:**

varying vec3 MCposition;
varying float LightIntensity; 
varying float Z;

void
main( void )
{
    gl_TexCoord[0] = gl_MultiTexCoord0;

    vec3 tnorm      = normalize( vec3( gl_NormalMatrix * gl_Normal ) );
    vec3 LightPos   = vec3( -2., 0., 10\. );
    vec3 ECposition = vec3( gl_ModelViewMatrix * gl_Vertex );
    Z = ECposition.z;
    LightIntensity  = dot( normalize(LightPos - ECposition), tnorm );
    LightIntensity = abs( LightIntensity );

    MCposition  = gl_Vertex.xyz;
    gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
}

**The fragment shader looks like this:**

varying vec3 MCposition;
varying float LightIntensity; 
varying float Z;

uniform float Ad;
uniform float Bd;
uniform float NoiseAmp;
uniform float NoiseFreq;
uniform float Alpha;
uniform float Tol;
uniform sampler3D Noise3;
uniform float ChromaBlue;
uniform float ChromaRed;
uniform float Blend;

const vec3 BEAVER = vec3( 1., .5, 0\. );
const vec3 WHITE  = vec3( 1., 1., 1.);

// return 0\. if < left-tol or > right+tol
// return 1\. if >= left+tol and <= right-tol
// else blend

float
Pulse( float value, float left, float right, float tol )
{
    float t = (  smoothstep( left-tol, left+tol, value )  -  smoothstep( right-tol, right+tol, value )  );
    return t;
}

vec3
ChromaDepth( float t )
{
    t = clamp( t, 0., 1\. );

    float r = 1.;
    float g = 0.0;
    float b = 1\.  -  6\. * ( t - (5./6.) );

        if( t <= (5./6.) )
        {
                r = 6\. * ( t - (4./6.) );
                g = 0.;
                b = 1.;
        }

        if( t <= (4./6.) )
        {
                r = 0.;
                g = 1\.  -  6\. * ( t - (3./6.) );
                b = 1.;
        }

        if( t <= (3./6.) )
        {
                r = 0.;
                g = 1.;
                b = 6\. * ( t - (2./6.) );
        }

        if( t <= (2./6.) )
        {
                r = 1\.  -  6\. * ( t - (1./6.) );
                g = 1.;
                b = 0.;
        }

        if( t <= (1./6.) )
        {
                r = 1.;
                g = 6\. * t;
        }

    return vec3( r, g, b );
}

void
main( void )
{
    vec4  noisevec  = texture3D( Noise3, NoiseFreq*MCposition );
    float n = noisevec[0] + noisevec[1] + noisevec[2] + noisevec[3];    // 1\. -> 3.
    // n = ( n - 1\. ) / 2.;         // 0\. -> 1.
    n = ( n - 2\. );             // -1\. -> 1.

    vec2 st = gl_TexCoord[0].st;
    st.s *= 2.;

    float Ar = Ad/2.;
    float Br = Bd/2.;

    int numinu = int( st.s / Ad );
    int numinv = int( st.t / Bd );

    vec3 TheColor = WHITE;
    float alfa = 1.;

    st.s -= float(numinu) * Ad;
    st.t -= float(numinv) * Bd;
    vec3 upvp =  vec3( st, 0\. );
    vec3 cntr =  vec3( Ar, Br, 0\. );
    vec3 delta = upvp - cntr;
    float oldrad = length( delta );
    float newrad = oldrad + NoiseAmp*n;
    delta = delta * newrad / oldrad;
    float du = delta.x/Ar;
    float dv = delta.y/Br;
    float d = du*du + dv*dv;
    if( abs( d - 1\. ) <= Tol )
    {
        float t = smoothstep( 1.-Tol, 1.+Tol, d );
        TheColor = mix( BEAVER, WHITE, t );
        //alfa =     mix( 1., 0., t );
    }
    if( d <= 1.-Tol )
    {
        TheColor = BEAVER;
    }
    if( d >= 1.+Tol )
    {
        alfa = Alpha;
        if( alfa == 0\. )
            discard;
    }

    float t = (2./3.) * ( Z - ChromaRed ) / ( ChromaBlue - ChromaRed );
    t = clamp( t, 0., 2./3\. );
    vec3 rgb = ChromaDepth( t );
    TheColor = mix( TheColor, rgb, Blend );

    gl_FragColor = vec4( LightIntensity*TheColor, alfa );
} 
```

...或者这个版本更容易实现：

```
 ** vertex shader **

    varying float depth;
    varying float lighting;
    varying float specular;

    #define NEAR 10.0
    #define FAR 20.0

    void main()
    {   

        gl_TexCoord[0] = gl_MultiTexCoord0;
        gl_Position = ftransform();

        float ambient = length(gl_FrontMaterial.ambient.rgb * gl_LightModel.ambient.rgb);

        vec3 normal = normalize(gl_NormalMatrix * gl_Normal);
        vec3 light = normalize(vec3(gl_LightSource[0].position));
        float diffuse = length(max(dot(normal,light),0.0) * gl_FrontMaterial.diffuse
          * gl_LightSource[0].diffuse);

        lighting = diffuse + ambient;

        specular = length(pow(max(dot(normal, gl_LightSource[0].halfVector.xyz),0.0)
          ,gl_FrontMaterial.shininess) * gl_LightSource[0].specular.rgb * gl_FrontMaterial.specular.rgb);

        depth = clamp((gl_Position.z-NEAR)/FAR,0.0,1.0);
    }

**fragment shader**

uniform sampler2D diffusemap;
varying float depth;
varying float lighting;
varying float specular;

void main (void)
{
    vec4 rgb;
    float depth2 = depth*depth;
    if (depth < 0.5) {
        rgb.g = 1.6*depth2+1.2*depth;
    } else {
        rgb.g = 3.2*depth2-6.8*depth+3.6;
        rgb.b = depth2*-4.8+9.2*depth-3.4;
    }
    depth = depth/0.9;
    depth2 = depth2/0.81;
    rgb.r = -2.14*depth2*depth2 -1.07*depth2*depth + 0.133*depth2 +0.0667*depth +1.0;

    float texval = length(texture2D(diffusemap,gl_TexCoord[0].st).rgb)/2.0 + 0.5;
    gl_FragColor = rgb*(texval*lighting + specular);
}--- 
```

> [此图像是一个示例，它应该是什么样子。源是 DepthShader-Material - 在 Photoshop 中着色](http://www.abload.de/img/depthmap_chromadepthx2qs8.png)

# java - Java 如何将音频数据存储在字节数组中。

> ID：13169044
> 
> 赞同：2
> 
> 时间：2012-10-31T23:48:06.627
> 
> 标签：java, audio, bytearray

谁能告诉我如何将音频文件（.au）中的存储音频数据读入字节数组？我查看了 Oracle 上的 Java 文档，但我不知道如何使用这些信息来编写程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T01:04:52.287

我通过“音频数据”猜测您想要 AU 文件中的音频样本，不包括标题信息和元数据。如果您只想将文件的内容加载到内存中，请按照建议使用 FileInputStream。

否则，要阅读示例，您可以使用[AudioSystem](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/AudioSystem.html)和[AudioInputStream](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/AudioInputStream.html)。

```
File myFile = new File("test.au");
byte[] samples;

AudioInputStream is = AudioSystem.getAudioInputStream(myFile);
DataInputStream dis = new DataInputStream(is);      //So we can use readFully()
try
{
    AudioFormat format = is.getFormat();
    samples = new byte[(int)(is.getFrameLength() * format.getFrameSize())];
    dis.readFully(samples);
}
finally
{
    dis.close();
} 
```

# javascript - 当我在文本框中输入数字时，里面的数字 应该乘以在文本框中输入的数字

> ID：13169045
> 
> 赞同：0
> 
> 时间：2012-10-31T23:48:18.843
> 
> 标签：javascript, jquery, html

在我的购物车页面中，产品在我的 div 框中显示如下：

![](../Images/76515d4a49bbfb293c9b306f52d08f1b.png)

产品被生成并显示在用户添加的购物车中。

购物车页面可以包含任意数量的产品。

当用户在文本框中键入一个数字，然后单击更新按钮时，该数字应乘以从 中获取的价格，`<p class="price2"></p>`并将其替换为 中的新总金额`<p class="price2"></p>`。

假设用户在文本框中键入“3”，然后按下按钮。那么它应该是 `"3 * 699 = 2097"`并且`2097`应该替换它，`699`所以它说“ `total: 2097"`。

我很难理解的是，这应该发生在特定的产品 div 框上，因此其他产品不受影响。我的意思是我不能使用 class 或 id 从 a 获取文本`<p>`，我需要使用 parent？因为每个产品都有一个`<p class="price2">`，我不想改变所有的产品价格。

如果有人可以帮助我，我将不胜感激

[这是我的jsfiddle](http://jsfiddle.net/muKty/8/)

这里还有另一个 jquery，我在同一个更新按钮上使用它来获取所有价格并总结它们。

```
<script type="text/javascript">
    $(document).ready(function () {
        $('.update').click(function () {
            var total = 0;
            $("span.price2").each(function (i) {
                total += parseFloat($(this).text(), 10);
            });

            $("#total2").html(total);
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T00:12:37.380

您可以使用 keypress 事件，看起来比必须单击更漂亮。

```
<span class="section">
  <p class="price">699.50</p>
  <input class="qtty" type="text">
  <span class="result">699.50</span>
</span>

<span class="section">
  <span class="price">1234</span>
  <input class="qtty" type="text">
  <span class="result">1234</span>
</span> 
```

​</p>

```
$('.qtty').keypress(function() {
  price = $(this).parent().find('.price').html()
  qtty = $(this).parent().find('.qtty').val()
  result = price * qtty
  $(this).parent().find('.result').html(result)
});​ 
```

只是一个建议。编辑： http: [//jsfiddle.net/qU7ZG/](http://jsfiddle.net/qU7ZG/)更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T00:01:44.000

使用 jQuery 选择器的 context 参数来查找特定 DIV 中的类成员：

```
var total = 0;
$(".produktinfo2").each(function () {
    var that = $(this);
    var subtotal = parseFloat($(".quantity", that).text()) * parseFloat($(".price", that).text());
    $(".price2", that).text(subtotal);
    total += subtotal;
});
$("#total2").text(total); 
```

# java - Hadoop CustomInputFormat

> ID：13169049
> 
> 赞同：0
> 
> 时间：2012-10-31T23:48:37.107
> 
> 标签：java, hadoop, mapreduce

我想自定义将 csv 文件拆分为 hadoop 中的对象，然后将对象列表作为映射器的输入。我不确定 hadoop 的映射器是否可以将对象作为输入？如果可能的话，请告诉我。

感谢您的回复普拉文。这真的很有帮助。我按照教程进行操作，它帮助了我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T03:53:39.237

自定义 InputFormat 在这种情况下应该很好。这是有关创建相同内容的[教程。](http://developer.yahoo.com/hadoop/tutorial/module5.html#inputformat)可以将 K 或 V 分配给传递给映射器的对象。天气是K还是V并不重要。

# sql - 从表或视图构建多维数据集是否更有效？

> ID：13169055
> 
> 赞同：2
> 
> 时间：2012-10-31T23:49:49.130
> 
> 标签：sql, sql-server, ssas, olap

在我注意到一个我被要求工作的系统有一个完全基于视图的立方体后，我开始思考这个问题。我注意到这些视图都加入了其他表/视图，并且视图也有逻辑编码到它们中（if、case 语句以及 convert 语句、连接等）。这一切对我来说似乎很可怕，但这让我想知道是否应该将他们的数据源建立在视图之外的立方体上？

对我来说，表格更有意义。它可以防止在数据源中进行昂贵的连接，并且不容易出现由于视图执行的转换而可能发生的错误。但是，我仍然看到很多人使用视图作为多维数据集的数据源。这里有最佳实践吗？我是否可能错过了视图在用作数据源时提供的一些优势？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T02:08:05.360

视图是将 SSAS 与表隔离的重要层 - 与其说与不需要的行相比，不如说与列更改无关。如果没有视图，SSAS 将始终处理表中的每一行。一个典型的例子是具有 SCD 类型 2 行的维度表，其中多维数据集只需要“当前”行。其他常见情况是限制测试数据或提供 SSAS 分区。

这些视图最好保持简单，即没有复杂的连接、CTE、计算列等。这些要求最好在 ETL 层中解决——在 SSAS 层中测试/调试/支持它们很痛苦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T23:54:39.803

不，它不是更快或更慢。

通常的做法是根据视图而不是表构建多维数据集。

它对基础表的更改提供了一定程度的隔离。它允许设计对基础表不同的信息进行分组。它允许发生非规范化。只是几个原因。

例如，您可以轻松地更改视图中的列名称，该视图仅用于为多维数据集提供服务。另外，您可以命名视图列，以便它们模拟多维数据集的域，而不是表中给出的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T00:27:18.533

如果您要根据表而不是视图构建多维数据集，您将如何将数据放入表中？最合乎逻辑的方法是从视图中加载表。无论您需要一些业务逻辑层来填充您的表，无论它是视图还是 ETL 流程。

这意味着您在给定时间将数据“快照”到表中，这可能意味着当您构建多维数据集时您的数据已过时。

这真的是一个性能问题。在以下情况下，创建表（或索引视图）作为多维数据集源可能是有益的：

1.  您的源数据没有太大变化（即可以每天批量加载）
2.  您需要经常从多维数据集数据钻取到关系（表或视图）数据，并且您的视图引入了性能问题

如果您只使用视图来提供多维数据集（而不是详细钻取），那么使用视图可能会更好，因为在从视图构建多维数据集时只会产生一次性能损失，而不是首先从构建表时产生一次性能损失视图，然后是另一个（当然更少）从表中构建立方体。

# .htaccess - .htaccess 文件 mod_rewrite clean url 不起作用

> ID：13169057
> 
> 赞同：1
> 
> 时间：2012-10-31T23:49:48.267
> 
> 标签：.htaccess

所以我想从 .htaccess 文件中得到通常的东西。www.example.com/article.php?title=my_title 应该替换为 www.example.com/article/my_title，但是我似乎无法让它工作。截至目前，我可以让 .php 删除，我怀疑这可能是一些问题。（我也得到[http://example.com](http://example.com)去[http://www.example.com](http://www.example.com)）这是我的 .htaccess 文件

```
Options +FollowSymLinks -MultiViews 
rewriteengine on

## this is the piece that is not working
RewriteRule ^title/(.*) article.php?arr=title/$1

rewritecond %{HTTP_HOST} ^example.com$
rewriterule ^example\/(.*)$ "http\:\/\/www\.example\.com\/$1" [R=301]

RewriteBase /

## Hide .php extension
# To externally redirect /dir/foo.php to /dir/foo
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R,L,NC]

## To internally redirect /dir/foo to /dir/foo.php
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^ %{REQUEST_URI}.php [L]

## Error document (needs to have a 404 page created)
ErrorDocument 404 http://www.example.com/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T01:50:06.520

您需要在通常适用于 php 文件的任何规则**之前添加这些特定的路由规则。**所以就在你的下面`rewriteengine on`，添加：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/article\.php\?title=([^&\ ]+)
RewriteRule ^ /article/%1? [L,R=301]

RewriteRule ^/?article/(.*)$ /article.php?title=$1 [L] 
```

然后是你的其余规则。

# java - 嵌套 ModalWindow 的 Wicket 序列化问题

> ID：13169059
> 
> 赞同：3
> 
> 时间：2012-10-31T23:50:15.887
> 
> 标签：java, wicket

我遇到了 Java 和 Apache Wicket 1.5 的问题，其中两个匿名类的封闭 Java 对象的身份发生了变化！

在一个 Wicket 模式窗口中，我想创建第二个模式窗口（用于获取文本字符串提示），然后使用 AJAX 刷新模型（字符串-整数对列表）更新原始模式窗口。

基本上我在同一个方法中创建了两个匿名类，但是封闭实例的“this”指针在一个匿名类和另一个匿名类之间是不同的。

这对我来说似乎不是正常的预期 JVM 行为，但我也无法在 Java 规范中找到任何关于它如何工作的细节。

```
public class DropDownChoiceModal extends WebPage {

    public String newTermResponse;

    private void addAddTermModal() {
        addTermModal = new ModalWindow("add_term_modal");
        addTermModal.setPageCreator(new ModalWindow.PageCreator() {
            public Page createPage() {
                PropertyModel pm = new PropertyModel<String>(DropDownChoiceModal.this, "newTermResponse"); 
                System.out.println ("propModel: " + System.identityHashCode(DropDownChoiceModal.this)); 
                return new TextInputModal(addTermModal, "What is the new term you wish to add?", pm);
            }
        });

        addTermModal.setWindowClosedCallback(new WindowClosedCallback() {
        public void onClose(AjaxRequestTarget target) {

            System.out.println ("propModel: " + System.identityHashCode(DropDownChoiceModal.this)); 
            System.out.println ("newTermResponse: " + DropDownChoiceModal.this.newTermResponse);

            // If the value is set then use it 
            if (newTermAvailable()) {

                // Add the new term to the model
                model.add(new StringIntegerPair (newTermResponse, 0));

                System.out.println ("Update view: " + model.size());

                // Update the view
                target.add(wmc);
            }
            System.out.println ("No new term");
        }

        private boolean newTermAvailable() {
            return (newTermResponse != null) && !newTermResponse.isEmpty();
        }
    });

    add(addTermModal);
    } 
```

对于 TextInputModal 类：

```
public class TextInputModal extends WebPage {

public TextInputModal(final ModalWindow modal, String requestString, final IModel<?> model) {
    Form<String> form = new Form<String>("form") {
        public void onSubmit() {
            System.out.println ("Submitted: " + System.identityHashCode(((PropertyModel)model).getTarget()) + "; " + model.getObject());
        }
    };

    // Add the buttons
    form.add(new AjaxButton("ok") {
        public void onAfterSubmit(AjaxRequestTarget target, Form<?> form) {
            System.out.println ("Submitted 2: " + System.identityHashCode(((PropertyModel)model).getTarget()) + "; " + model.getObject());
            modal.close(target);
        }
    });

    // Add the form
    add(form);
}
} 
```

我得到的输出：

```
propModel: 698650686
Submitted: 698650686; fdsfds
Submitted 2: 698650686; fdsfds
propModel: 1447892364
newTermResponse: null
No new term 
```

当在同一方法中创建匿名类 1 ( new ModalWindow.PageCreator() {} ) 和匿名类 2 ( new WindowClosedCallback() {} ) 时，为什么封闭实例 (DropDownChoiceModal.this) 的身份发生了变化的任何想法（ addAddTermModal() ）？

提前致谢...

奈杰尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T01:11:15.837

非常感谢上面评论中的 biziclop ......看起来 Wicket 在序列化时正在破坏对象 - “newTermResponse”字符串的内容在此序列化期间丢失了某处。

我回到了嵌套 ModalWindow 的示例：

[http://www.wicket-library.com/wicket-examples/ajax/modal-window](http://www.wicket-library.com/wicket-examples/ajax/modal-window)

使用示例中所示的 getPageReference() 而不是 PropertyModel 解决了我的问题。

干杯，

奈杰尔

# unix - 命令在 emacs shell 中运行得慢得多吗？我怎样才能防止这种情况但仍然使用它？

> ID：13169060
> 
> 赞同：5
> 
> 时间：2012-10-31T23:50:18.990
> 
> 标签：unix, emacs

今天我在 emacs shell 中运行了这样的命令：

```
./someBinary | grep foo | cut -c30- | sort | uniq -c 
```

这在 bash 中需要一点但不会那么长（大约 15 秒），因为输出很容易超过一百万行。但是，当我在 emacs shell 中运行此命令时，我等了一个多小时，它仍在运行，如果我检查`top`. 我想知道这是否是因为 emacs 实现了我在 lisp 中使用的 unix 工具——如果这是原因，是否有办法让它默认为系统工具。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T06:16:52.250

Emacs 正在捕获 shell 缓冲区中的最终输出，并应用字体锁定和其他分析（例如行号计数）来显示它。它还滚动显示以显示最新的输出。虽然 Emacs 提供了剔除病态长命令输出的规定，但它并没有真正针对数百万行的真正大量输出进行优化，因此它的性能明显比终端仿真器差，从而减慢了整个管道。

如果您对输出不感兴趣，请将其重定向到`/dev/null`或`tail -500`，这就是您在典型的终端回滚中看到的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T00:54:13.100

不，emacs 没有实现这些工具。即运行您从命令行运行的相同工具。但是，*输出*正在通过各种管道传递，并且可能具有 emacs 应用的各种格式，这很可能是极端减速的罪魁祸首。一件容易尝试的事情是在 shell 缓冲区中禁用字体锁定模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-27T09:36:51.227

你没有说你是否使用`eshell`或`shell`。以我的经验，`shell`工作得很好，但`eshell`对于任何想要通过管道放置 >1k 行的东西来说完全无法使用（这很可悲，因为 eshell 的其他功能看起来很不错）。

请注意，即使输出只是一行，eshell 也会很慢，只要您使用 a `|`，因此它似乎是实际的`|`运算符（在 eshell 中的 emacs-lisp 中实现）很慢。

# java - Jax-rs / Jersey 线程间通信

> ID：13169065
> 
> 赞同：0
> 
> 时间：2012-10-31T23:51:04.763
> 
> 标签：java, multithreading, jersey, jax-rs

有没有办法让 Jax-rs / Jersey 中的处理线程在它们之间进行通信？如果是这样，最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:32:24.330

我认为这是一个糟糕的设计。
每个请求-响应都应尽可能自主。
如果需要线程间通信，
可以使用标准的 j2se 东西，
比如一些同步数据结构，可以从[java.util.concurrent](http://ricardozuasti.com/2012/java-concurrency-examples-getting-feedback-from-concurrent-tasks/)包中选择一个。
例如，您可以拥有一个可以通过其静态 getInstance 方法从所有线程访问的单例，并在其中有线程 A 标记它已执行
并即将向客户端发送一些响应，并通过线程 B 查询该线程是否是执行。
如果您希望线程 B 等到线程 A，您可以使用一些锁定对象，也许是[Condition](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Condition.html)，正如@Wyzard 所建议的那样

# vb.net - 在 excel 中查找最后一行并使用 excel.range

> ID：13169077
> 
> 赞同：1
> 
> 时间：2012-10-31T23:53:41.017
> 
> 标签：vb.net

我正在尝试使用对 interop.excel 而不是 vba 的引用来进行一些工作表格式设置。我的代码如下所示：

```
 Dim lastrow As Range = excel.Rows.End(XlDirection.xlDown)
    Dim findme As Range = excel.Range("A1:A" & lastrow) 
```

excel.range 不允许我在这里使用“&”符号。我应该如何识别我的最后一行数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T00:11:35.400

查看[Range Class Reference](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range_properties%28v=office.11%29.aspx)，您似乎错过了放置 Range 的`Row`属性`lastrow`：

`Dim findme As Range = excel.Range("A1:A" & lastrow.row)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-10T14:34:08.563

我知道这是一个旧线程，但有很多谷歌引用“糟糕的解决方案”，我认为这是获得 lasCell 的优雅解决方案

```
set lastCell=yourSheet.Range("A1").SpecialCells(xlCellTypeLastCell) 
```

所以你的代码可能是：

```
Dim lastrow As Range = excel.Range("A1").SpecialCells(xlCellTypeLastCell).Row
Dim findme As Range = excel.Range("A1:A" & lastrow) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T23:58:42.520

lastrow 被定义为一个范围，您正在尝试在一个字符串和一个范围之间进行字符串连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-14T20:47:52.103

它看着“A”。但要注意，如果有一个合并的单元格垂直，它将占据合并的顶部单元格。因此，如果有一个从 A15 到 A20 的合并单元格，这是该列的最后一个单元格，它会将 A15 分类为最后一个单元格，即使它的 A20 也是如此。在这种情况下，我发现 Neolisk 的解决方案是最好的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-24T13:29:26.037

@Jason Bayldon 它在有条目的最后一行结束。它也跳过空白。我正在使用 VB.NET 2010。这是示例代码。

```
Dim r2 As Excel.Range
Dim lastrow As Integer

r2 = oSheet.Range("Task_ID") 'Task_ID is my column name
lastrow = r2.SpecialCells(Excel.XlCellType.xlCellTypeLastCell).Row 'returns last row 
```

# web - 下载文件夹的链接

> ID：13169078
> 
> 赞同：4
> 
> 时间：2012-10-31T23:53:50.873
> 
> 标签：web, download, directory

我有一个文件夹`my_folder`，该文件夹里面是一个文件`my_file`。我想`Download my folder`在我的网站上创建一个链接，这样当用户点击它时，用户的文件目录就会出现，用户可以选择放置的位置`my_folder`（其中包含`my_file`.）。我该如何实现这个功能？

我知道要允许用户下载文件，我可以简单地链接到该文件。但是文件夹呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T00:02:35.723

从个人经验来看，我还没有看到下载整个目录的方法。您可能必须动态压缩文件夹并使生成的 zip 可下载。

在 HTML 5 中，您可以使用类似的东西来下载单个文件

```
<a href="/files/name-of-pdf.pdf" download="name-of-pdf">Download Your PDF</a> 
```

下载属性将为用户强制一个下载对话框。

希望这能让你走上正轨，也许有人可以证明我在那个目录下载上是错的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-29T06:45:28.483

我认为没有办法创建直接链接来下载文件夹，但如果您希望用户下载您的“my_folder”，这是一个很好的选择

1.  将您的文件夹上传到任何在线文件存储服务提供商（如*Google Drive*或*Dropbox*）。
2.  将其放在另一个文件夹中，说“父文件夹”
3.  获取“父文件夹”的链接并将其添加到您网站的 HTML 中（确保将查看设置更改为*拥有该链接的任何人*）

您可能需要设置：

```
 target="_blank" 
```

在你的“a”标签中

现在，当用户单击链接时，它会重定向到您的驱动器并显示“my_folder”，他们可以下载或打开以查看“my_file”

# iphone - 你能同时使用 iPhone 的 MainWindow.xib 和 iPad 的 Storyboard 制作一个通用应用程序吗？

> ID：13169081
> 
> 赞同：6
> 
> 时间：2012-10-31T23:54:23.257
> 
> 标签：iphone, ipad, xib, uistoryboard, universal

我很久以前制作了一个 iPhone 应用程序，现在我正在考虑将其制作为通用应用程序，但我想知道是否可以使用 Storyboards 制作 iPad 版本，因此对于 iPhone，它将加载 MainWindow.xib 和 iPad它会加载一个 MainStoryboard 文件。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T03:55:15.610

是的，但您实际上必须制作两个独立的故事板（1 个用于 iPhone，1 个用于 iPad）。

在 iPhone 故事板中，只需将 mainwindow.xib 拖到 rootViewController 的中间并确保它进入全屏状态。

然后，您可以使用 iPad 故事板做任何您想做的事情。

不过，请确保您的两个故事板文件在项目摘要中正确链接！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T04:03:06.750

Gazzini 是对的，在我进行研究以确认这是真的且相对简单的时候，我首先得到了他的答案，然后我才输入自己的答案。所以给他+1。

不过，您不需要两个单独的故事板。对于一种架构，您只需要一个故事板，而对于您已经支持的架构，您只需要一个 XIB 文件。

这是一个屏幕截图，可能有助于向您展示我在自己的测试项目中所做的事情：

![是的，有可能](../Images/0bfa9f1f6d9fb98b1ae6c8407cab50f1.png)

只需编辑应用程序的 plist 以将“nib”文件用于您已经拥有 XIB 文件的特定架构，然后为新架构指定情节提要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T04:02:48.190

如果您*不*设置主界面（`NSMainNibFile`在 Info.plist 中）或主故事板（`NSMainStoryboardFile`在 Info.plist 中），您在 iPad 上使用故事板和在 iPhone 上使用 nib 会更简单。

相反，将您的应用程序委托移出`MainWindow.xib`并`UIApplicationMain`通过将其类名作为第四个参数传递给`UIApplicationMain`in来实例化它`main`。使应用程序委托`MainWindow.xib`.

在您的应用程序委托中`application:didFinishLaunchingWithOptions:`，您可以检查界面习惯用法。

如果接口成语是 iPhone，则`MainWindow`使用`-[NSBundle loadNibNamed:owner:options:]`.

如果界面习惯用语是 iPad，请创建您的窗口，使用 加载，`MainStoryboard`使用`+[UIStoryboard storyboardWithName:bundle:]`实例化其初始视图控制器`-[UIStoryboard instantiateInitialViewController]`，并将该视图控制器设置为窗口的根视图控制器。

# python - 使用推导嵌套列表？

> ID：13169087
> 
> 赞同：0
> 
> 时间：2012-10-31T23:54:51.840
> 
> 标签：python

我有一个清单：

```
['EFJAJCOWSS', 'SDGKSRFDFF', 'ASRJDUSKLK', 'HEANDNDJWA', 'ANSDNCNEOP', 'PMSNFHHEJE', 'JEPQLYNXDL'] 
```

从这个列表中我如何创建一个子列表：

```
[['EFJAJCOWSS'], ['SDGKSRFDFF'], ['ASRJDUSKLK'], ['HEANDNDJWA'], ['ANSDNCNEOP'], ['PMSNFHHEJE'], ['JEPQLYNXDL']] 
```

在 Python 中使用列表推导？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T23:55:42.020

```
In [45]: lis=['EFJAJCOWSS', 'SDGKSRFDFF', 'ASRJDUSKLK', 'HEANDNDJWA', 'ANSDNCNEOP', 'PMSNFHHEJE', 'JEPQLYNXDL']

In [46]: [[x] for x in lis]
Out[46]: 
[['EFJAJCOWSS'],
 ['SDGKSRFDFF'],
 ['ASRJDUSKLK'],
 ['HEANDNDJWA'],
 ['ANSDNCNEOP'],
 ['PMSNFHHEJE'],
 ['JEPQLYNXDL']] 
```

或使用`map()`：

```
In [47]: map(lambda x:[x],lis)
Out[47]: 
[['EFJAJCOWSS'],
 ['SDGKSRFDFF'],
 ['ASRJDUSKLK'],
 ['HEANDNDJWA'],
 ['ANSDNCNEOP'],
 ['PMSNFHHEJE'],
 ['JEPQLYNXDL']] 
```

# c++ - 我如何允许用户使用 C++ 绘制曲线并控制其形状

> ID：13169089
> 
> 赞同：1
> 
> 时间：2012-10-31T23:55:20.047
> 
> 标签：c++, mfc, mouse

我希望我的程序允许用户根据鼠标事件绘制直线和曲线，但我不知道如何从用户那里获取控制点和曲线的起点/终点以及如何我可以允许他对其进行修改，任何人都可以帮助我，以及一般我如何控制用户绘制的形状，例如程序知道用户何时选择要删除或调整大小的特定形状我无法想象如果您有任何描述它的教程或示例，请帮助我

我正在使用 Visual Studio 2010 C++ 将我的程序编码为 MFC 项目

非常感谢

# oracle - 执行 oracle 查询时出现 SSRS BIDS 错误（此提供程序不支持此命令）

> ID：13169095
> 
> 赞同：0
> 
> 时间：2012-10-31T23:55:56.710
> 
> 标签：oracle, reporting-services

我正在创建一个直接从 oracle 获取数据的 SSRS 报告。

当我在“查询设计器”中运行此查询时，我收到一条错误消息

“此提供程序不支持此命令”。

我曾尝试使用“Oracle”和“OLEDB”连接类型，但没有奏效。

我正在使用 Microsoft Visual Studio 2008。

请给我建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T00:18:58.987

您正在运行 SQL 命令吗？什么是 SQL？SQL 是否直接针对 Oracle 运行（即在 TOAD 或 SQLPLUS 中）

# ruby-on-rails - Rails 3.2.8“NotImplementedError：在意外的 T_NODE 对象上调用方法‘backtrace’”错误

> ID：13169097
> 
> 赞同：4
> 
> 时间：2012-10-31T23:56:13.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我收到以下错误：

> NotImplementedError：在意外的 T_NODE 对象上调用方法“回溯”

当使用 rails 控制台访问一个特定模型，域时，使用“Domain.new”

模型定义为：

```
class Domain < ActiveRecord::Base
end 
```

环境：

*   导轨 3.2.8
*   ruby 1.9.3p194（2012-04-20 修订版 35410）[x86_64-linux]
*   Linux cb-2 3.2.0-32-generic #51-Ubuntu SMP Wed Sep 26 21:33:09 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux

完整的回溯位于[https://gist.github.com/954bcdf833c8aef4d2f9](https://gist.github.com/954bcdf833c8aef4d2f9)

项目中还有 41 个其他模型经过测试没有任何问题

非常感谢您能对这个问题有所了解。

罗斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-24T08:22:02.053

我没记错，我有类似的回溯。

就我而言，数据库没有正确初始化并且`schema_migration`表已损坏。

因此，我的建议是，尝试运行`rake db:migrate:status`并查看它是否显示您是否正确创建的迁移列表。如果不是，则尝试重新构建数据库并重试。

# android - 将 Canvas（另一个线程）保存到 SD 卡

> ID：13169101
> 
> 赞同：0
> 
> 时间：2012-10-31T23:57:17.397
> 
> 标签：android, file, save, android-canvas

我对下一节课有问题：

```
public class MyView extends SurfaceView implements Runnable {

    public void run() {
        Canvas c = holder.lockCanvas();
        c.drawARGB( 255, 0, 255, 80 );
        for ( short i = 0; i < bitmapsArr.size(); i++ ) {
            c.drawBitmap( bitmap.get( i ), 100, 50, null );
        }
        holder.unlockCanvasAndPost( c );
    }

    public void saveCanvasToFile( String filename ){

        // ???

    }

} 
```

我在画布上画在另一个线程上。我想将此画布保存到文件中，但我不知道该怎么做。我尝试使用 DrawingCache 系统 - 但它不起作用，因为我的绘图在其他线程上......有人知道在这种情况下该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T00:12:44.963

我找到了解决方案。实际上，您需要将所有绘图重新绘制到新画布中。例子：

```
Bitmap bitmap = Bitmap.createBitmap( this.getWidth(), this.getHeight(), Bitmap.Config.ARGB_8888 );
Canvas c1 = new Canvas( bitmap );
c1.drawARGB( 255, 0, 255, 80 );
for ( short i = 0; i < bitmapsArr.size(); i++ ) {
    c1.drawBitmap( bitmap.get( i ), 100, 50, null );
}
// and then you can save your bitmap with:
// bitmap.compress( Bitmap.CompressFormat.PNG, 90, fileoOutputStream ); 
```

# mysql - 数据库新手 - 主键，外键，根本没有键？

> ID：13169103
> 
> 赞同：0
> 
> 时间：2012-10-31T23:57:36.077
> 
> 标签：mysql, foreign-keys, primary-key

我是一所大学计算机科学专业的二年级学生。我正在用 php/mySQL 制作一个在线应用程序。这是我第一次使用 PHP 和 mySQL。无论如何，我正在制作一个跟踪棒球比赛的应用程序。用户创建一个球员团队并开始与另一支球队的比赛，用户输入结果，而应用程序对比赛进行评分并保留球员统计数据。我正在设计数据库，并希望有人可以为我澄清：

**主键 -** 我很确定我明白这是什么。基本上它是每一行的唯一标识符，用于区分每一行。

**外** 键 - 现在我有一个“玩家”表，我也有一个“玩家统计”表。如果我理解正确（我可能不理解），“Players”表有一个“playerStatsId”列，它是“PlayerStats”表的主键。这是有效的，因为每个玩家只有一个统计表。

**没有钥匙？？？-**好的，这就是我的例子。我的应用程序的每个用户都应该能够将任意数量的团队添加到数据库中。他们只能编辑他们“拥有”的球队的比赛。我在想我可以通过一个包含两列的表来实现这一点：“用户名”和“团队 ID”。然后我可以搜索表格并挑选出属于某个用户的团队。我觉得这不是答案，因为它似乎效率不高。有没有更好的办法？

我很感激任何帮助！谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T00:08:16.303

外键

每个玩家的 PlayerStats 表中是否只有 1 条记录？如果是这样，那为什么不把统计数据放在玩家表中呢？

如果每个玩家有多个统计数据，通常我们会将统计数据分开到不同的表格中。

例子：

```
Players
PlayerID  Name
001       George

PlayerStats
PlayerID  StatType        Value
001       BattingAverage  0.300
001       RunsPerGame     2 
```

在这种情况下，PlayerID 将是 PlayerStats 表上的外键。这种表有时被称为业务应用程序的“详细信息”表。

您的 No Key 示例很好，并且很常见。我不记得它叫什么，类似于“关系表”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T00:04:14.227

玩家表应该在 PlayersStats 表中将其 PK 作为 FK。你可以用任何一种方式来关联它，但是让玩家的一个方面成为关系的外键方面更有意义。

至于“无钥匙”，你应该尽量避免这种情况。在关系数据库中，如果存在关系，则应该明确说明。您可以通过这种方式避免出现孤立行。孤立行基本上是一段数据，通过没有关系，它可以永远坐在那里并弄乱你的数据库。在这种情况下，您的 User 表应该有一个 PK，并且该 PK 应该是将它链接到 Teams 表的内容。您可以有两列，但其中一列应该与用户表相关。您的团队表也应该在任何玩家的表中都有一个充当 FK 的 PK，因为这些玩家属于团队。

我也会键入 Team 表。你永远不应该假设一个数据库已经完成，即使它是你自己的。编写代码/数据库以扩展它们。

我敢肯定，这还有很多。但这些是帮助您入门的一些一般要点。

## 编辑：

看到您的问题中的评论：如果用户可以有多个团队，您可能希望在用户和团队表之间有一个表，其中 UserId 和 TeamId 作为 FK。这可能是您不必键入的表，因为删除用户或团队应该通过该链接表级联（或错误）。

所以：

```
Player(PK)->(FK)PlayerStats
--if multiple users can have multiple teams
User(PK)->(FK)LinkTable(FK)<-Team
--if 1-1 user-team
User(PK)->(FK)Team
Team(PK)->Player(FK) 
```

# c++ - C++ 隐式转换 bool 到 int 和算术，删除分支，找不到错误

> ID：13169105
> 
> 赞同：0
> 
> 时间：2012-10-31T23:57:49.210
> 
> 标签：c++, debugging

玩弄删除 C++ 中的分支，无法破译输出背后的原因。

`PopHi()`采用两个升序整数向量和迄今为止最大的当前索引。它通过减少两者中较大者的索引来“弹出”最大的 int。

# 代码

原来的：

```
void PopHi(vector<int> &arrA, vector<int> &arrB, int &idxHiA, int &idxHiB) {
    int hi = max(arrA[idxHiA], arrB[idxHiB]);
    if (hi == arrA[idxHiA])
        --idxHiA;
    else
        --idxHiB;
} 
```

Nobranch 版本 1：

```
void PopHi(vector<int> &arrA, vector<int> &arrB, int &idxHiA, int &idxHiB) {
    idxHiA -= (arrA[idxHiA] > arrB[idxHiB]);
    idxHiB -= (!(arrA[idxHiA] > arrB[idxHiB]));
} 
```

Nobranch 版本 2，因为如果它们相等，我们选择哪一个并不重要：

```
void PopHi(vector<int> &arrA, vector<int> &arrB, int &idxHiA, int &idxHiB) {
    idxHiA -= (arrA[idxHiA] >= arrB[idxHiB]);
    idxHiB -= (!(arrA[idxHiA] >= arrB[idxHiB])); // extra paranoia parens
} 
```

这就是我使用它的方式：

```
// compiled with g++ -std=c++11 main.cpp -o run
#include <iostream>
#include <algorithm>
#include <vector>
using namespace std;
int main() {
    vector<int> arrA({1, 3, 5});
    vector<int> arrB({5});
    int idxHiA = 2;
    int idxHiB = 0;
    cout << idxHiA << ", " << idxHiB << endl;
    PopHi(arrA, arrB, idxHiA, idxHiB);
    cout << idxHiA << ", " << idxHiB << endl;
    return 0;
} 
```

# 输出

原来的：

```
2, 0
1, 0 // ok 
```

版本 1：

```
2, 0
2, -1 // also ok 
```

版本 2：

```
2, 0
1, -1 // wtf?? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T00:03:10.410

```
idxHiA -= (arrA[idxHiA] >= arrB[idxHiB]); 
```

你在`idxHiA`这里换...

```
idxHiB -= (!(arrA[idxHiA] >= arrB[idxHiB])); 
```

......在这里咬你。您想使用 的旧值`idxHiA`，但正在使用递减的值（这可能是非法的顺便说一句）。该位置的元素不再是最大值。

我建议将比较的结果存储到一个布尔变量中，这样更容易阅读。

PS：我会在汇编程序中检查您的“无分支”版本实际上没有分支。有时，带有布尔变量的操作会使用分支进行转换。

# amazon-s3 - 如何根据扩展名限制 S3 中的文件？

> ID：13169108
> 
> 赞同：8
> 
> 时间：2012-10-31T23:58:11.017
> 
> 标签：amazon-s3

我正在使用 Amazon S3 存储桶为静态网站提供服务。我知道我可以限制对某些“文件夹”的读取访问（实际上是键，因为 S3 没有文件夹），但我真正想做的是通过文件扩展名限制访问。

换句话说，我想说“授予每个人对该存储桶中任何文件的读取权限，只要该文件以 htm/css/js/png 结尾”；那可能吗？

（顺便说一句，我担心我会不小心上传 .git 文件，或者我不想向世界展示的类似文件；设置安全策略以防止显示此类文件似乎比相信自己更安全绝不会意外上传错误的文件）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-08T16:17:28.330

是的，这是可能的。您可以编写[存储桶策略](http://docs.amazonwebservices.com/AmazonS3/latest/dev/writebucketpolicy.html)。您可以使用正则表达式来定义受策略影响的对象（[示例](http://docs.amazonwebservices.com/AmazonS3/latest/dev/AccessPolicyLanguage_UseCases_s3_a.html)）。

您的政策将类似于：

```
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "auniqueid",
            "Effect": "Deny",
            "Principal": {
                "AWS": "*"
            },
            "Action": "s3:GetObject",
            "Resource": "arn:aws:s3:::bucket/*.jpg"
        }
    ]
} 
```

这将拒绝访问`jpg`buket 的所有文件`bucket`。

# java - 在方法中使用“this”

> ID：13169112
> 
> 赞同：2
> 
> 时间：2012-10-31T23:58:26.067
> 
> 标签：java, methods, this

我可以`this`在方法中使用，还是错误的？

领域：

```
private int level;
private String name; 
```

方法

```
public void check(String Name, int newlevel)
{
       if (this.level < newlevel )
       {
           this.level = newslevel;
           this.Name = Name;

           System.out.println("." Name+" you are in the right level);
       }
       else
       {
           System.out.println("Sorry your are not on the right level" );
       }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T00:02:58.197

> 我可以在方法中使用它吗

`this`主要用于方法中，就像您使用它一样。它指的是调用方法的对象，这意味着它**不能在静态方法中使用**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T00:02:16.363

是的。你可以这样做。它经常在 setter 中使用：

```
public void setX(int x) {
   this.x = x;
} 
```

在上面，如果您省略`this`，您只是将参数设置`x`为自身 - 而不是您想要的！因此，`final`经常使用关键字：

```
public void setX(final int x) {
   this.x = x;
} 
```

在上面，如果你省略`this`，那么编译器会抱怨你正在设置`x`它自己。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T00:00:14.633

是的，绝对没问题。`this`通常用来指代`current object`。我们`this`用来区分`instance variables`和`local variables`。

```
 private name;
 public void m1(String name){
 this.name=name;
 } 
```

# android - 如何使用新信息开始恢复活动？

> ID：13169115
> 
> 赞同：1
> 
> 时间：2012-10-31T23:58:47.740
> 
> 标签：android, android-intent, android-activity, onresume

我有一个包含几个按钮的活动 A。单击按钮启动活动 B。 startActivity(intent) 中使用的意图包含有关应将什么布局应用于活动 B 的信息。例如，单击 avtivity A 的“宽”按钮将在活动 B 中设置“宽”布局。

这一切都在第一次运行良好，但是当在活动 A 中单击不同的按钮时，它只是再次加载相同的布局。

我尝试过的事情是：

*   在活动 B 中，将 setContentView() 从 onCreate 移动到 onResume。我想这没有任何效果，因为意图与活动首次启动时的意图仍然相同。

*   在清单文件中将“ android:noHistory = “true”添加到活动B。这具有加载正确布局的预期效果，但“破坏”了后退按钮的功能。

有没有人有任何其他想法？

-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T00:06:45.323

试试这个，它可能对你有帮助

```
Intent intent = new Intent(MainActivity.this, TargetActivity.class);
intent.setAction(Intent.ACTION_VIEW);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
MainActivity.startActivity(intent); 
```

# mysql - 如何查询一个范围的列MYSQL

> ID：13169119
> 
> 赞同：1
> 
> 时间：2012-10-31T23:59:17.293
> 
> 标签：mysql

我在 MYSQL 中有一个表，我想在前 5 列和从那时起的每一列之后开始查询。

有没有办法我可以像

```
 select * from table where column 5 begins 
```

我也知道第 5 列的标题是数字。所以它也可能是这样的

```
Select * from table where headers=[0-9] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T00:11:33.553

你只能做

```
SELECT column5, column6, column7 FROM table  -- up to the column you want to stop 
```

# python - matplotlib savefig() 空白 - show() 不是

> ID：13169120
> 
> 赞同：7
> 
> 时间：2012-10-31T23:59:25.373
> 
> 标签：python, matplotlib

我浏览了“可能已经有你答案的问题”，如果他们这样做了……我不明白。

我试图尽可能多地消除并将我的问题简化为以下代码（我的道歉 - 我确信有一种更优雅的方式来获取所有 40 的 numpy 数组，但这就是我想出的在敲了我的头之后......）：

```
import numpy
import matplotlib.pyplot as plt

x=numpy.zeros((500,256))
x+=40
plt.title("Title")
plt.xlabel("Label")
plt.ylabel("Label")
plt.imshow(x,vmin=37.5,vmax=42.5, cmap='spectral')

#save the figure
filename="/xxx/yyy/matplotlibtest.jpg"
plt.savefig(filename)
plt.show()
plt.close() 
```

plt.savefig() 返回一个非常漂亮的图像，带有我的标签、轴和没有图形（即矩形是空白的）

plt.show() 向我展示了以上所有内容，其中包含一个漂亮的绿色矩形，在我的轴之间，它应该是。我可以手动将此图形保存到同一目录，并得到我期望的结果（即轴、标签、绿色矩形）。

我已经在没有 show() 或第二次调用 show() 的情况下进行了尝试，因为这里（和其他地方）的一些问题和答案似乎暗示调用顺序可能是问题所在。

我在这段代码中将其他数字（相同数据的直方图）保存为 jpg，所以我知道这台计算机可以保存为 jpg。

我不确定我在 savefig 上做错了什么——有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T00:33:08.023

通过添加：

```
import matplotlib
matplotlib.use('TkAgg') 
```

在我打电话之前

```
import matplotlib.pyplot as plt 
```

我能够让一切工作愉快。

（我还不明白后端，很清楚！）

# c# - 为什么当我认为它应该在我的 ViewModel 中触发 silverlight 数据网格加载事件？

> ID：13169123
> 
> 赞同：0
> 
> 时间：2012-10-31T23:59:32.233
> 
> 标签：c#, silverlight, events, mvvm, caliburn.micro

我正在使用 caliburn.micro 在 silverlight 5 中工作，并希望在通过 ItemsSource 绑定的网格完成加载后执行代码来调整列的大小。

DataGrid 和 C1FlexGrid 的加载事件在我访问屏幕之前不会触发，离开它，然后返回。如果我在非 mvvm/non-caliburn.micro 项目中订阅 Loaded 事件，则加载事件会在我期望的时候触发（立即）。

现在我想要做的就是调整列的大小，但是这个问题让我担心未来的编码 - 在使用 Caliburn.Micro 时，我不能指望控制事件按预期工作吗？为什么加载的事件会触发？是否有一种解决方法可以让我在应该触发事件时执行代码？

在加载的回调中，很容易调整列的大小 - 这是我在 Caliburn.Micro ViewModel 中所做的一个片段：

```
Page3View currentView = null;
protected override void OnViewLoaded(object view)
{
    base.OnViewLoaded(view);
    currentView = (Page3View)view;

    //neither of these get fired until I look at the page, navigate away, then come back again.
    currentView.gridC1.Loaded += new RoutedEventHandler(gridC1_Loaded);
    currentView.gridNormal.Loaded += new RoutedEventHandler(gridNormal_Loaded);
}

void gridNormal_Loaded(object sender, RoutedEventArgs e)
{
    String testStr = ""; testStr += "some pointless code to break on";
}

void gridC1_Loaded(object sender, RoutedEventArgs e)
{
    currentView.gridC1.AutoSizeColumns(0, currentView.gridC1.Columns.Count - 1, 0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:11:30.377

Ofc没有开火。`Load`在第一个事件触发后附加的处理程序。

# mysql - Mysql 查询过去 14 天的事件（每两周一次）

> ID：13169131
> 
> 赞同：0
> 
> 时间：2012-11-01T00:00:19.017
> 
> 标签：mysql, scheduling

我正在编写一些调度代码来检查发生的事件`Daily`、`Weekly`和。**`Fortnightly`**`Monthly`

到目前为止，我已经弄清楚了如何做`Daily`，但不是。我的表结构是...`Weekly``Monthly`**`Fortnightly`**

```
CREATE TABLE IF NOT EXISTS `event_log` (
    `id` int(11) NOT NULL AUTO_INCREMENT,
    `date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    `export_schedule` int(11) NOT NULL,
    `import_schedule` int(11) NOT NULL,
    `exception` TEXT NULL,
    PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1; 
```

**资源**

*   [[已解决] 每两周选择一次记录](http://board.phpbuilder.com/showthread.php?10354763-RESOLVED-Select-records-fortnightly)
*   [MYSQL 日期时间函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)
*   [MySQL：从日期在当前周和当前月的表中选择数据](https://stackoverflow.com/questions/7705050/mysql-select-data-from-a-table-where-the-date-falls-in-the-current-week-and-cur)

例如，当前日期是`11-1-2012`（11 月 1 日），最后一个事件发生在*13 天前*`10-20-2012`（2012 年 10 月 20 日），如果我要查询该事件，MySQL 将返回. 使用我当前的查询。*`MySQL returned an empty result set (i.e. zero rows). (Query took 0.0004 sec)`*

 *`SELECT * FROM event_log WHERE MOD(DATEDIFF(date,CURDATE()),14)=0` *（当前双周的事件）*但它没有给我任何结果。

如何查询过去两周内发生的事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T00:06:25.803

这应该可以解决问题：

`SELECT * FROM event_log WHERE date >= DATE_SUB(NOW(), INTERVAL 14 DAY)`

如果您确保日期列上有索引，则此查询将允许使用该索引来保持快速。*

# javascript - 从链接中添加/删除 div 类 - jQuery

> ID：13169132
> 
> 赞同：2
> 
> 时间：2012-11-01T00:00:19.903
> 
> 标签：javascript, jquery, twitter-bootstrap

我已经在这里玩了足够多的时间来达到现在的水平，但是我需要一些帮助来克服障碍……就像我想的每个人一样！

我正在尝试这样做，因此当您单击链接（.clickable）时，它会将宽度从 span3 更改为 span6。

.clickable 链接位于 div 内，这是该类需要更改的链接 - .block 是我在同位素中用于项目选择器的内容。

链接：

```
<a class="clickable" href="#enlarge-article"><i class="icon-fullscreen"></i>&nbsp;&nbsp;<strong>Enlarge</strong></a> 
```

Javascript：

```
var $container = $('#portfolio');   
$container.delegate( '.block', 'click', function(){
      $(".block").removeClass('span3').addClass('span6').siblings().removeClass('span6').addClass('span3');
  $container.isotope('reLayout');
}); 
```

*更新的类错字 - 现在出现在 .js 中*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T00:17:10.650

您说处理程序适用于 .clikable 元素。

也使用`.on()` 代替`.delegate()`

尝试这个

```
var $container = $('#portfolio');   
$container.on( 'click','.clickable', function(e){
    e.preventDefault();
    // If you want to affect all the .block divs
    $(".block").removeClass('span6').addClass('span3');
    // If you want to affect only the block in which the anchor was clicked
    //$(this).closest('.block').removeClass('span6').addClass('span3');
    $(this).removeClass('span3').addClass('span6');
    $container.isotope('reLayout');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T00:07:36.133

尝试这个：

```
var $container = $('#portfolio');   
$container.delegate( '.block', 'click', function(){
    $(".block").removeClass('span6').addClass('span3');
    $(this).removeClass('span3').addClass('span6');
    $container.isotope('reLayout');
}); 
```

# firefox - Firefox 字体嵌入不起作用

> ID：13169134
> 
> 赞同：2
> 
> 时间：2012-11-01T00:00:30.303
> 
> 标签：firefox, embed, font-face

我有一个网站，我在其中实现了自定义字体。在 google chrome 和 Internet Explorer 中，字体正确显示。当我检查 firefox 时，甚至没有应用新的字体系列。这就是我所拥有的：

```
@font-face{
font-family: Bebas Neue;
src: url('fonts/BebasNeue.otf');
} 
```

我尝试在它之后添加格式，但这并没有解决它。为什么 .otf 不会显示以及为什么 .ttf 和 .eot 在各自的浏览器中工作的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T02:13:28.027

您是否尝试过在 Firefox 中使用 TTF 格式而不是 OTF？有时，Firefox 还需要 WOFF 字体格式来显示字体，具体取决于您使用它们的方式。我假设您拥有 Firefox 3.6 或更高版本，但这也可能是问题所在。下面的代码片段是 Font Squirrel 的 @font-face 标准，可能对您有用。

```
@font-face {
    font-family: 'Bebas Neue';
    src: url('fonts/BebasNeue.eot');
    src: url('fonts/BebasNeue.eot?#iefix') format('embedded-opentype'),
        url('fonts/BebasNeue.svg') format('svg'),
        url('fonts/BebasNeue.svg#Bebas Neue') format('svg'),
        url('fonts/BebasNeue.woff') format('woff'),
        url('fonts/BebasNeue.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
} 
```

我希望这些信息对你有所帮助。祝你好运！如果您需要更多信息，请告诉我或查看本文中的 Firefox 标题：[http ://www.fontsquirrel.com/blog/2010/11/troubleshooting-font-face-problems](http://www.fontsquirrel.com/blog/2010/11/troubleshooting-font-face-problems)

# python - 对列表中的每个项目进行迭代的函数

> ID：13169136
> 
> 赞同：1
> 
> 时间：2012-11-01T00:00:58.397
> 
> 标签：python, list, function, loops

在这里，我创建了一个我想通过函数运行的网站列表。

```
import requests

item_ids=[11732, 536]
url_template = 'http://www.grandexchangecentral.com/include/gecgraphjson.php?jsid=%r'
your_sites = []

for i in range(0, len(item_ids)):
    result = url_template % item_ids[i]
    your_sites.append(result) 
```

棘手的部分（无论如何对我来说）是创建一个函数，该函数将每个项目放入`your_sites`并通过函数对其进行迭代。我考虑过使用某种 for 循环，但我不确定如何实现它，并认为无论如何可能有更有效的方法。这是我的尝试，它返回`TypeError: 'NoneType' object is not iterable`.

```
def data_grabber(): 
    for i in range(0, len(your_sites)): 
        url = your_sites[i]
        r = requests.get(url, headers={'Referer': 'www.grandexchangecentral.com'})
        data = r.json
        prices = [i[1] for i in data] 
```

我希望它`prices`为每个网站返回，但我的努力只能得到错误和 None 值。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T00:14:44.340

不要创建`your_sites`全局变量，将它作为参数传递真的很容易。您不需要`for`循环的显式索引，只需迭代您感兴趣的对象。当您*确实*需要显式索引时，请使用[`enumerate()`](http://docs.python.org/2/library/functions.html#enumerate)

```
def data_grabber(your_sites): 
    for url in your_sites: 
        r = requests.get(url, headers={'Referer': 'www.grandexchangecentral.com'})
        data = r.json   # if r.json None the next line will fail
        prices = [i[1] for i in data] 
```

如果没有，不确定你想做什么`r.json`。你可以试试这样的

```
 data = r.json or [] 
```

# asp.net - 如何使我的 asp.net 网站“更多 cookie 免费”？

> ID：13169140
> 
> 赞同：7
> 
> 时间：2012-11-01T00:01:14.927
> 
> 标签：asp.net, performance, cookies, yslow

我通过雅虎的[YSlow](http://developer.yahoo.com/yslow/)在我的 47 页的 asp.net (vb) 网站上运行我的网站。有一些问题，但其中一个说我得到了“**使用无 cookie 域的 F 级**”。

具体来说，它说：

***当浏览器请求静态图像并随请求发送 cookie 时，服务器会忽略 cookie。这些 cookie 是不必要的网络流量。要解决此问题，请通过创建子域并将其托管在其中，确保使用无 cookie 请求请求静态组件。***

我真的不知道他们想告诉我什么。他们说我主页上的 43 个组件不是无 cookie，包括：site.css、print.css、homeslider.js，然后是 38 或 39 个 .jpg 或 .png 图像不是无 cookie。

有谁知道我可以如何改进这一点并提高我网站的性能？感谢您提供的任何建议！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T00:04:24.263

当从您的站点请求图像或 css 等“静态”文件时，浏览器会随请求一起发送 cookie。这些 cookie 是无用的，因为图像/css 不会根据 cookie 内容而改变。

要使您的静态内容请求 cookie 免费，请从不同的域提供它们。例如：

*   主要网站：`www.mysite.com`;
*   图片、CSS、JS等：`www.mysitecontent.com`

或者，您可以使用子域，例如`static.mysite.com`假设您专门将 cookie 绑定到子域（例如，为`www.mysite.com`not just设置 cookie `mysite.com`）。如果您不确定，通常使用不同的域名更容易

例如，使用 firebug 或类似的扩展来查看*此*页面。您会注意到“静态”内容`sstatic.com`不是来自`stackoverflow.com`

对于大型网站，为静态文件使用 CDN 并不少见。对于小型站点，它是一个网络服务器，多个虚拟主机是常态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T00:08:25.807

确保您的网站仅从 www.domain.com 而不是 domain.com 加载。

确保从 static.domain.com 加载所有静态图像。

这是一篇解释更多的博客文章： [http ://www.ravelrumba.com/blog/static-cookieless-domain/](http://www.ravelrumba.com/blog/static-cookieless-domain/)

# jquery - 解析来自 c# Generic List 的 json 响应

> ID：13169141
> 
> 赞同：2
> 
> 时间：2012-11-01T00:01:20.667
> 
> 标签：jquery, .net, json, webmethod

我有 jquery ajax 调用，这是成功响应的代码

```
success: function (msg) {
                    console.log(msg.d);
                    var Ticket = msg.d;
                    console.log(Ticket);
                } 
```

第一个 console.log 返回一个我想要的对象，这是它在控制台中的一部分。

```
[
Object
CouponCode: null
DateCreated: "10/31/2012 12:00:00 AM"
EndDate: "11/23/2012"
EventID: "47c30437-fb5a-461f-9990-a95cc23f1d55" 
```

来自 webmethod 的实际 ajax 响应。

```
{"d":[{"__type":"Ticket","rsID":"240bac97-b97b-4d89-ac48-cd692c66a7ad","EventID":"47c30437-fb5a-461f-9990-a95cc23f1d55","Title":  .... 
```

我怎样才能访问这个对象？您从控制台响应中看到，现在我想要`EventID`

和

```
var Ticket = msg.d;  //this is what I showed from console
var Ticket = $.parseJSON(msg.d);  //returns null
console.log(Ticket.EventID);  //returns null
console.log(Ticket);  // returns null 
```

我怎样才能访问这个`msg.d`???>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T00:04:42.930

在我看来，您有一个对象数组，而 Ticket 是对该数组的引用。即使其中只有一个对象，您也需要在数组中引用它。尝试这个：

```
console.log(Ticket[0].EventID); 
```

# php - Yii Active Record 函数 BETWEEN

> ID：13169148
> 
> 赞同：0
> 
> 时间：2012-11-01T00:02:24.260
> 
> 标签：php, yii

在 Yii 框架中使用 BETWEEN 的正确方法是什么？

代码：

```
...
$criteria = new CDbCriteria;
$criteria->condition = 'datetime BETWEEN '.$datetimemin.' AND '.$datetimemax;
$user = Users::model()->find($criteria); 
... 
```

错误：

```
SQL: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '07:10:10 AND 2011-10-10 13:10:10)' at line 1\. 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-30T16:37:46.737

最正确的

```
$criteria->addBetweenCondition('attributeName', 'value1', 'value2'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T00:04:05.573

我不知道在 Yii 中“正确”的做法。

但错误是因为需要引用日期。

```
$criteria->condition = 'datetime BETWEEN "'.$datetimemin.'" AND "'.$datetimemax.'"'; 
```

# python - 在 Python 中分离表单和处理

> ID：13169150
> 
> 赞同：1
> 
> 时间：2012-11-01T00:02:26.540
> 
> 标签：python, html, forms, post, cgi

我正在使用该`cgi`模块来处理表单输入数据，但我希望将表单和处理放在单独的文件（模块？）中。有没有办法将`POST`ed 信息从 HTML 传递到处理文件？

我没有使用任何框架，并希望尽可能简单。我知道我可以通过在 python 文件中打印 HTML 来实现它，但我想将两者分开。

这是真正的问题代码：

```
<form action="processes/process.py" method="post">
            <div id="name1" class="formData"><label for="">First name:</label><input name="firstName" type="text" id="firstName" /></div>
            <div id="name2" class="formData"><label>Last name:</label><input name="lastName" type="text" id="lastName" /></div>
            <div id="email" class="formData"><label>Email address:</label><input name="emailAddress" type="text" id="emailAddress" /></div>
            <div id="mailAddress" class="formData"><label>Mailing address:</label><input name="physicalAddress" type="textarea" id="physicalAddress" /></div>

            <input type="submit" value="Submit" onClick="T_validateForm('firstName','','R','lastName','','R','EmailAddress','','RisEmail');return document.T_returnValue">
        </form> 
```

我可以将其打印在我的 process.py 文件中并更改操作，但我希望此表单代码与我将用于管理和分发表单信息的代码分开。我需要将数据传递给 process.py

我试图在这里获取python代码中的数据：

```
form = cgi.FieldStorage()
firstName = form['firstName'].value
lastName = form['lastName'].value
emailAddress = form['emailAddress'].value
physicalAddress = form['physicalAddress'].value 
```

我知道在 php`form`中被替换为`$_POST`. python中是否有类似的标识符？`form`当它们在同一个文件中时工作，但似乎应该有某种方法告诉 python 从 HTML 获取数据`POST`。我以为这样`cgi.FieldStorage()`做了，但它不起作用。我应该将参数传递给`cgi.FieldStorage()`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T02:03:44.520

这个问题非常广泛，尽管我理解分离内容、逻辑和表示是你所追求的。

您是否正在寻找像[Jinja](http://jinja.pocoo.org/)、[Mako](http://www.makotemplates.org/)或[Chameleon](http://chameleon.repoze.org/)这样的模板语言？还是像[FormEncode](http://www.formencode.org/)这样的简单表单生成和验证库？无论有没有 web 框架，这些都可以很容易地使用。

与 PHP 不同的是，在 Python 中 CGI 几乎从未使用过。我们改用[WSGI](http://en.wikipedia.org/wiki/Web_Server_Gateway_Interface)，或带有自己的请求模型和表单处理库的 Web 框架（从微到大）。使用 CGI 自己动手可能是一个教育示例，但您几乎总是会更好地使用现有框架，即使对于小型 Web 应用程序也是如此。可以是像[瓶子](http://bottlepy.org/)这样的微框架。

如果您不清楚如何将代码分解为几个 Python 模块，我会提出一个新问题（最好与 Web 开发无关）。此外，我会评估一些 Python 模板语言，可能还有一些[微框架](http://pyvideo.org/video/983/web-micro-framework-battle)。

# centos - 无法更改 vagrant 主文件夹中文件夹的权限

> ID：13169154
> 
> 赞同：55
> 
> 时间：2012-11-01T00:03:13.867
> 
> 标签：centos, virtualization, virtualbox, chmod, vagrant

当我 ssh 进入我的 vagrant vm 时，我可以更改 vagrant 用户文件夹上方和外部的文件和文件夹的权限，以及 vagrant 用户文件夹内的文件的权限。但无法更改 vagrant 用户文件夹下文件夹的权限。无论是否以 vagrant 用户和 root 身份登录，我都有同样的问题。

在 vagrant 用户的文件夹中更改权限是否有某种限制？vagrant 用户文件夹不与主机操作系统共享，但 capistrano 部署文件夹和 docRoot 是。

来宾是 CentOS 6，主机是 OS X 10.7。流浪者是 1.0.5。Virtualbox 是 4.2.1。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-09-26T09:49:43.500

共享文件夹的格式会在不同版本的 Vagrant 中发生变化。请参阅法比奥的回答[https://serverfault.com/questions/398414/vagrant-set-default-share-permissions](https://serverfault.com/questions/398414/vagrant-set-default-share-permissions)

### Vagrant 1.3.1 及更早版本

`config.vm.share_folder "v-data", "/export", "/export", :owner => 'vagrant', :group => 'httpd', :extra => 'dmode=775,fmode=775'`

### 流浪者版本 1.3.1、1.3.2

在 Vagrant 1.3.1 及更高版本中，该`extra`选项已被替换为`mount_options`需要数组的选项。

`config.vm.share_folder "v-data", "/export", "/export", :owner => 'vagrant', :group => 'httpd', :mount_options => ['dmode=775', 'fmode=775']`

### 流浪版本 >=1.3.3

在 vagrant 1.3.3 中，它似乎`config.vm.share_folder`已被替换为`config.vm.synced_folder`.

`config.vm.synced_folder "v-data", "/export", "/export", :owner => 'vagrant', :group => 'httpd', :mount_options => ['dmode=775', 'fmode=775']`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-12T16:33:26.957

我的问题可能和你有关。

我有一个 vagrant 中的 centos vm 作为访客，win7 作为主机。

我实际上无法更改与主机共享的任何文件夹的 VM 中的权限。

如果我发现任何有用的东西会报告。在这里讨论谷歌组：

[https://groups.google.com/forum/?fromgroups=#!topic/vagrant-up/2JvcoZTuWRI](https://groups.google.com/forum/?fromgroups=#!topic/vagrant-up/2JvcoZTuWRI)

**更新 1：**我还读到您不能在共享文件夹中创建符号链接。

**更新2：** 似乎我无法在创建虚拟框后更改它的权限。但是在 VagrantFile 中，您可以将共享文件夹的权限设置为适合的内容：IE

```
config.vm.share_folder "v-data", "/export", "/export", :owner=> 'vagrant', :group=>'httpd', :extra => 'dmode=775,fmode=775' 
```

在这里，我设置了所有者、组和对我们有用的权限。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-08-22T21:09:47.507

在 Vagrant 1.2.7 中，使用了版本 2 Vagrantfiles，因此语法与以前的答案略有不同。下面是 CentOS 6.2 的诀窍。我发现使用相对路径作为源在我的情况下效果最好。它指向共享文件夹。

`config.vm.synced_folder "./", "/vagrant", owner: 'vagrant', group: 'apache', extra: 'dmode=775,fmode=775'`

正如 Jamie 所说，在创建*之前*`vagrant reload`配置它仍然是必要的，所以在你编辑完覆盖的 Vagrantfile 之后使用它。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-09-14T08:55:48.203

VirtualBox 不允许更改同步文件夹的所有者/权限。

您可以在 Vagrant 文件中更改它（由其他人回答）。
考虑更改所有者而不是组。
还要考虑一下——如果这样做是为了让你的服​​务器可以写入文件——你的服务器很可能被称为 www-data 而不是 httpd。使用`ps aux | grep nginx`[或 apache/lighthttpd] 来检查。

还有一些其他选项：

*   更改正在访问共享文件而不是同步文件夹的程序的所有者。
    例如，如果 PHP 需要写入文件，请将服务器和 PHP 更改为以 vagrant 运行。[在 Apache 中，这是在 httpd.conf 中完成的。NGINX 的用户在 nginx.conf 中设置，php-fpm 的用户在[php-fpm.conf](http://php.net/install.fpm.configuration#user)或其包含的文件之一中。
    您需要更改 Apache 锁定文件 (/var/lock/apache2) 或 PHP websocket 文件 (/var/run/php5-fpm.sock)] 和 webserver 的权限。
*   使用不同的 VM（HyperV、VMware）而不是 VirtualBox。其他虚拟机似乎没有这个限制。
*   使用 RSyn 同步文件，而不是使用默认同步。
    `config.vm.synced_folder "/var/www/", type: "rsync"`
*   将所有权限设置为 777。通常这将是灾难性的，甚至不是建议。这仍然是一个坏主意，但在 VM 上可能是可行的。不过，在提供共享访问权限之前请三思。
    `config.vm.synced_folder "/var/www/", mount_options: ["dmode=777", "fmode=666"]`

[Ryan Sechreset](http://ryansechrest.com/2014/04/unable-set-permissions-within-shared-folder-using-vagrant-virtualbox/)和[Jeremy Kendall](http://jeremykendall.net/2013/08/09/vagrant-synced-folders-permissions/)更好地描述了这些答案。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-09-14T00:24:36.273

更改主机而不是来宾的权限。VirtualBox 不允许从来宾操作系统更改共享文件的权限。

TLDR；问题不在于您的来宾用户无权访问您的主机文件。问题是您主机上的 virtaul box 进程的执行用户没有权限在主机中写入文件。有两组权限。访客权限必须像任何其他操作系统一样设置。您还必须确保您的来宾操作系统正在运行的虚拟盒进程具有该文件夹的权限。如果该进程只有读取权限，那么任何来宾用户所能做的就是读取。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-04-28T13:10:16.363

暂时不能发表评论，但要扩展 MDeSilva 对 Vagrant 1.7.2 的回答：

对某些人来说可能很明显，但组和所有者应该用引号引起来。

```
group: "sync_group", owner: "sync_owner", mount_options: ['dmode=755, fmode=644'] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-24T10:04:15.230

对于 Vagrant 1.7.2 像这样编辑 Vagrant 文件，

```
group: sync_group, owner: sync_owner, mount_options: ['dmode=777', 'fmode=776'] 
```

# silverlight - 网格 - 列之间没有空格

> ID：13169159
> 
> 赞同：0
> 
> 时间：2012-11-01T00:03:48.100
> 
> 标签：silverlight, windows-phone-7, xaml, grid

我为 ListBox 定义了一些 UserControl

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
            <ListBox Height="Auto" HorizontalAlignment="Stretch" Name="deliveriesListBox" VerticalAlignment="Stretch" Width="Auto" DataContext="{Binding}" SelectionChanged="deliveriesListBox_SelectionChanged">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid x:Name="LayoutRoot" xmlns:src="clr-namespace:App"  Margin="0,5">
                            <src:DItem />
                        </Grid>
                    </DataTemplate>    
                </ListBox.ItemTemplate>                    
            </ListBox>
        </Grid> 
```

用户控件是

```
<UserControl x:Class="App.DItem"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    d:DesignHeight="480" d:DesignWidth="480">

    <Grid x:Name="LayoutRoot" Margin="0,5">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <TextBlock Grid.Row="0" Grid.Column="0" FontSize="42" HorizontalAlignment="Left"  Text="Hello" VerticalAlignment="Stretch" Margin="0" />
        <TextBlock Grid.Row="1" Grid.Column="1" FontSize="20" HorizontalAlignment="Right" TextAlignment="Right" Margin="0">
                                        <Run Text="OK" />

        </TextBlock>
        <TextBlock Grid.Row="1" Grid.Column="0" FontSize="20" Text="this is working only here.." HorizontalAlignment="Left"  />
    </Grid>
</UserControl> 
```

VS2010 或 Expression Blend 4 中的“所见即所得”编辑器向我显示“这仅在此处工作”和“确定”之间的空间。图片在这里 - [http://xrep.eu/pic.jpg](http://xrep.eu/pic.jpg)

这就是我想要的，但是.. 在模拟器中，手机看起来像[http://xrep.eu/emu.jpg](http://xrep.eu/emu.jpg)

所以，在“这只能在这里工作”和“OK”之间，没有空格。有人可以帮助并告诉我如何定义，“OK”字符串最多在右侧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T06:38:10.947

试试这个

```
 <Grid x:Name="LayoutRoot" Grid.Row="1" Margin="0,5">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" FontSize="42" HorizontalAlignment="Left"  Text="Hello" VerticalAlignment="Stretch" Margin="0" />

        <DockPanel Grid.Row="1">
        <TextBlock  FontSize="20" HorizontalAlignment="Right" TextAlignment="Right" Margin="0" DockPanel.Dock="Right">
                                    <Run Text="OK" />

        </TextBlock>
        <TextBlock Grid.Row="1" Grid.Column="0" FontSize="20" Text="this is working only here.." HorizontalAlignment="Left"  />
        </DockPanel>
    </Grid> 
```

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:38:45.137

问题是父控件的宽度。

在设计模式下，正在执行以下代码（在 UserControl 的定义中）：

```
mc:Ignorable="d"
d:DesignHeight="480" d:DesignWidth="480" 
```

这指定了控件的高度，更重要的是，它的宽度。这足够宽，因此您可以看到两段文本之间的空间。

在运行时，这将被忽略，因此`Grid`(and `UserControl`) 采用正在显示的项目的宽度。

你有两个选择。

1.  `Margin`使用or`Padding`属性放置一些明确的间距。
2.  将 的`HorizontalAlignment`设置`Grid`为`Stretch`。

您可能需要进行一些实验和调整才能获得您想要的效果。

# javascript - 骨干javascript无法从本地存储中删除项目，但可以保存

> ID：13169160
> 
> 赞同：0
> 
> 时间：2012-11-01T00:03:48.270
> 
> 标签：javascript, collections, backbone.js, model, local-storage

我无法理解我无法从集合中删除项目，因此尝试仅使用模型。但是我的问题仍然存在，我可以保存但不能删除。我可以从集合中删除，所以我认为这是本地存储的问题，也许我用错了。

这是我的模型。add 函数会更新 localstorage，但 remove 不会清除它。

```
 bb.model.Setting = Backbone.Model.extend(_.extend({   
  localStorage:  new Store("rrr"),
  defaults: {
  theme: 'e'
  },

  initialize: function() {
    var self = this
   },
  removed: function()
  {
      var self = this
      _.bindAll(self)
     this.destroy()
      this.clear()

   },
  add: function(value)
  {
      var self = this
      _.bindAll(self)
   this.set({theme:"dggfd"});
     this.save();

  },
   })) 
```

# python - 使用命名元组迁移正在运行的代码

> ID：13169173
> 
> 赞同：2
> 
> 时间：2012-11-01T00:05:17.977
> 
> 标签：python, migration, queue, namedtuple

我在带有命名元组的服务器上运行代码：

```
Event = namedtuple("Event", ['attr1', 'attr2', 'attr3']) 
```

服务器正在从其他服务器获取事件，从队列中出来。

我想在我的代码中添加一个新功能，该功能需要在 namedtuple 中添加一个新属性。有没有一种好方法可以做到这一点并保持向后兼容性？也就是说，我可以停止和启动服务器，并将代码更改为：

```
Event = namedtuple("Event", ['attr1', 'attr2', 'attr3', 'attr4']) 
```

但与此同时，将有旧签名的事件排队。

以前有人做过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T00:24:50.930

它会按原样工作，当您使用新添加的属性时，唯一的问题可能出现在您的代码中，例如

```
from collections import namedtuple

Event1 = namedtuple("Event", ['attr1', 'attr2', 'attr3', 'attr4'])
Event2 = namedtuple("Event", ['attr1', 'attr2', 'attr3', 'attr4', 'attr5'])

def handle_event(event):
    print event.attr5

handle_event(Event2(1,2,3,4,5))
handle_event(Event1(1,2,3,4)) 
```

你会得到错误`AttributeError: 'Event' object has no attribute 'attr5'`，所以如果你以向后兼容的方式处理这样的事情，比如检查 attr5 是否存在，它应该可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T00:23:11.447

看看你如何定义你的元组它应该没有任何问题，只要你不改变属性的顺序。

显然，在您的代码中，您不应该依赖元组长度为 3 而不是 4 的事实。

# java - 是否可以在 Java 中的不同行上打印地图的键和关联值？

> ID：13169174
> 
> 赞同：5
> 
> 时间：2012-11-01T00:05:23.200
> 
> 标签：java, maps

我想知道是否可以在单独的行上打印地图的键和关联值。我是 Java 和地图的新手。当我尝试`println`在最后一行使用正常打印时，它会打印出花括号内的键和值，并且全部在 1 行。我知道这可能是一个愚蠢的问题，但我已经为此苦苦挣扎了一段时间，并且在网上或我的任何讲义中都没有找到解决方案。这只是我设置的一个类，在我尝试更大规模地实现它之前尝试让它工作。如果我的代码或其他任何内容没有以常规方式出现，请提前抱歉，这是我第一次发布。

```
import java.util.TreeMap;
public class tester {   
    public static void main(String[] args){
        TreeMap<String, String> dir = new TreeMap<String, String>();
        String key = "b";
        String value = "2";
        String key1 = "a";
        String value2 = "1";
        dir.put(key, value);
        dir.put(key1, value2);
        System.out.println(dir);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T00:07:24.167

是的，您必须遍历地图并在不同的行上打印键和值。

```
TreeMap<String, String> dir = new TreeMap<String, String>();

for(Entry<String, String> en: dir.entrySet()) {

    System.out.println(en.getKey());
    System.out.println(en.getValue());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T00:08:51.250

是的...

```
for (String key : dir.keySet()) {
    System.out.println(key + " = " + dir.get(key));
} 
```

查看[`Map`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)API 以获取更多信息

**已从 Mik378 反馈更新**

正如 Mik378 所建议的，为了获得更好的性能，您最好使用`Map.entrySet`（[使用 keySet 迭代器访问地图值](http://javaantipatterns.wordpress.com/2007/11/22/accessing-the-map-values-using-keyset-iterator/)）

```
for(Map.Entry<String, String> entry : dir.entrySet()) {
    System.out.println(entry.getKey() + " = " + entry.getValue());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T00:12:19.220

将最后一行替换为：

```
for(Map.Entry<String, String> entry : dir.entrySet()) {
   System.out.println(entry);
} 
```

将输出：

```
a=1
b=2 
```

事实上，`Entry`'s`toString()`方法已经是：

```
public String toString() {
   return key + "=" + value;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-12T06:56:22.147

使用 lambda 表达式很简单：

```
propertiesMap.forEach((key, value) -> System.out.printf("%s=%s%n", key, value)); 
```

# expressionengine - 是否有支持内联错误处理的 ExpressionEngine 简单联系表单插件？

> ID：13169175
> 
> 赞同：1
> 
> 时间：2012-11-01T00:05:34.027
> 
> 标签：expressionengine

我正在使用 ExpressionEngine 创建一个联系表单，但是内置的联系表单不支持安全破解器样式的内联错误消息。

是否有任何插件可以改进标准 EE 联系表单、添加内联错误处理或 AJAX 验证等？实施简单联系表格的最佳方式是什么？

由于这是一个简单的联系人到电子邮件表单，我不需要表单插件的全部功能 - 只需一个不错的表单，我可以模板化发送电子邮件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T01:01:15.200

对于客户端验证/错误处理，您看过[jQuery Validation 插件](http://docs.jquery.com/Plugins/Validation)吗？这与 EE 的内置联系表格配合得很好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T14:33:48.060

Safecracker 非常适合这个，我一直这样做。我什至写了一个小的 EE 扩展，允许我为表单定义 novalidate="novalidate" 属性，因为本机 EE 表单助手不支持 HTML5 属性。

Safecracker 属性扩展（超级简单） [https://gist.github.com/2595553](https://gist.github.com/2595553)

如果您想发送具有强大模板的动态电子邮件（就像大多数人使用联系表单一样），请查看我最新的附加组件 Postmaster。它内置于任何应用程序中，无论是简单的还是复杂的。它确实可以为输入表单（SC 和 CP）添加大量额外功能。

[https://objectivehtml.com/articles/postmaster-the-definitive-email-solution-for-expressionengine](https://objectivehtml.com/articles/postmaster-the-definitive-email-solution-for-expressionengine)

我还建议您查看我的验证库。其他 jQuery 验证库还可以，但缺乏对细节的关注。我采取了不同的方向。

我的图书馆： [https ://github.com/objectivehtml/HTML5-Form-Validation](https://github.com/objectivehtml/HTML5-Form-Validation)

我的文档： [https ://objectivehtml.com/jquery/html5-form-validation](https://objectivehtml.com/jquery/html5-form-validation)

*不幸的是，我没有时间完成文档，但是该库已经开发了 3 年并且坚如磐石。*

本质上，只需使用 HTML5 验证属性并使用 JS 来逐步增强体验，因此它可以与 IE、FF 和 Webkit 一起使用。您应该能够使用 CSS 来设置每个“状态”的样式并验证任何条件。我的库提供了所有必要的方法和回调来做任何你真正想做的事情。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-01T13:52:21.073

虽然有几十个 JS 验证库，但我们发现 Happy.js 是一个不错且简单的修复程序。

教程在这里 - [http://thechangelog.com/post/3028809528/happy-js-form-ishappy-lightweight-extensible-form-valida](http://thechangelog.com/post/3028809528/happy-js-form-ishappy-lightweight-extensible-form-valida)

# cassandra - Cassandra 重命名超列

> ID：13169179
> 
> 赞同：0
> 
> 时间：2012-11-01T00:05:57.210
> 
> 标签：cassandra, phpcassa

我正在使用超级专栏来创建两个人之间的聊天。

每个聊天都有自己的行，其中包含所有消息。

当用户想要删除该聊天时，我只需将列重命名为类似的`old_chat_deleted`名称，然后创建新的列族来存储新的聊天消息，但现在的问题是如何重命名旧的列族？

如果这不可能，剩下的唯一选择是删除整个 cf 并使用新名称创建新的，但是如果聊天中的`100k+`消息可能会非常慢，因为我需要将所有数据检索回我的服务器然后插入回来了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:51:11.033

开箱即用不支持重命名列 CF。

您不需要为每次聊天都创建一个新的 CF。您可以创建一个包含所有聊天消息的 CF，并包含标识聊天会话的[索引列。](http://www.datastax.com/docs/1.1/ddl/indexes)或者您可以为聊天记录使用[复合键](http://xamry.wordpress.com/2012/07/31/composite-keys-in-cassandra/)。

为每个聊天创建一个 CF 是一种不好的做法，并且会严重影响 cassandra 的性能。

# rest - 使用 REST 分离 UI Web 应用程序和后端 Java 层

> ID：13169183
> 
> 赞同：0
> 
> 时间：2012-11-01T00:06:41.357
> 
> 标签：rest, web-applications, architecture, frameworks

我计划构建一个 Web 应用程序，但尚未决定要使用的语言/技术。我计划让这个应用程序通过 REST 与远程服务器上的 java 进程对话以获取数据。Java 进程是必不可少的数据访问层，它公开 REST API 以供 Web 应用程序使用。在这一点上，我并不关心 Web 应用程序。我计划实现 java 进程，以便能够以可扩展的方式提供 HTTP 请求。这些请求将返回一个表示数据的 JSON 字符串。

您能否建议哪种框架/技术最适合我的设计？我看着泽西岛，这似乎是一个可能的解决方案。但我不确定这是否会扩展，以及我是否缺少任何更好的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:28:47.780

使用[JAX-RS](https://en.wikipedia.org/wiki/JAX-RS)标准。[Jersey](http://jersey.java.net/)是 JAX-RS 的参考实现，但也有其他好的实现。

如果您*真的*想使用标准，请使用[GlassFish](http://glassfish.java.net/)作为[Java EE 6](http://docs.oracle.com/javaee/6/tutorial/doc/)服务器的参考实现。还有其他选择。

# java - Java：警告：对泛型类型的引用应参数化

> ID：13169186
> 
> 赞同：12
> 
> 时间：2012-11-01T00:06:47.163
> 
> 标签：java, iterator

`currentProfile.getFriends()`方法在 ArrayList 上返回一个迭代器。它按预期工作，但编译器在将其分配给另一个迭代器时给了我一个友好的警告：`iterator is a raw type. References to generic type Iterator <E> should be parameterized`

我很少或根本不知道这意味着什么，愿意启发我吗？如果我的描述不够清楚，这就是我正在做的`Iterator friendList = currentProfile.getFriends();`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-01T00:11:00.777

如果可以，请查看方法 getFriends() 的签名。那应该看起来像

```
public Iterator<some type> getFriends() 
```

这是您需要放入 Iterator 引用的类型。例如，如果方法是：

```
public Iterator<Friend> getFriends() 
```

采用：

```
Iterator<Friend> friendList = currentProfile.getFriends(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T00:34:46.600

```
`Java: Warning: References to generic type should be parameterized` 
```

这意味着您将一个具有泛型类型集的对象分配给一个没有声明泛型类型的引用。

**例子：**

```
List<String> list = new ArrayList<String>();
Iterator itr=   list.iterator(); // you'd get that warning on this line, as you are not making iterator a generic type.

it'd disappear when you do this

 Iterator<String> itr = list.iterator(); 
```

# javascript - Javascript 数组

> ID：13169188
> 
> 赞同：1
> 
> 时间：2012-11-01T00:07:12.717
> 
> 标签：javascript, arrays

```
var myArray = ['burak', 'mirhan', new Date(), 'ibrahim'];

for (var i = 0; i <= myArray[i].toString ().length; i++) {
    alert (myArray [i].toString ().length); 
} 
```

我写了上面的代码。有用。但萤火虫警告“myArray[i] 未定义”。我解决不了。你能帮我解决这个问题吗？正如你所理解的，我对 javascript 有点陌生。我正在努力学习所以谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T00:08:30.513

当您遍历一个数组时，您应该只查看*数组*的长度，而不是数组当前元素中字符串的长度：

```
for (var i = 0; i < myArray.length; i++) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T00:09:50.173

```
var myArray = ['burak', 'mirhan', new Date(), 'ibrahim'];

for (var i = 0, len = myArray.length; i < len; i++) {
    console.log(myArray[i]);
}; 
```

如果你是 JS 效率高的:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T00:42:24.160

在 JavaScript 中，数组索引从 开始`0`，并且数组的`.length`属性将比当前最高元素索引高 1。因此，对于具有四个连续元素的数组，`.length`将为 4，元素索引为 0、1、2 和 3。

您需要将循环设置为从`0`to运行`.length - 1`，因此请使用`i < myArray.length`而不是`i <= myArray[i].toString ().length`：

```
for (var i = 0; i < myArray.length; i++) 
```

除了该错误之外，您认为您的代码正在工作的原因是因为您有`i <= myArray[i].toString ().length`它正在测试数组中元素值的`i`长度`toString()`而不是数组本身的长度。因此，在第一次迭代时`i`，它会测试 0 是否小于或等于数组中第一个元素的长度，在第二次迭代中，它会测试是否`i`小于第二个元素的长度，依此类推。因为数组中的所有项`.toString().length`的长度都大于数组本身的长度，所以循环确实遍历了所有元素，但是当`i`到达`4`它时尝试测试一个不存在的元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T00:08:55.090

假设您要遍历数组中的每个项目，则需要获取数组长度：

```
var myArray = ['burak', 'mirhan', new Date(), 'ibrahim'];

for (var i = 0; i < myArray.length; i++) {
    alert (myArray [i].toString ().length); 
} 
```

# xampp - 本地主机不与 xampp 一起使用

> ID：13169190
> 
> 赞同：0
> 
> 时间：2012-11-01T00:07:21.183
> 
> 标签：xampp, localhost

在之前安装 xampp 之后，我遇到了 apache 无法启动的问题，但只是通过将其设为服务来修复它。但是现在每次我尝试继续我的*http://localhost/xampp/*它说

```
Internet Explorer cannot display the webpage 
```

和铬一样

我在 xampp 控制面板中启动了一切，我有一台 Windows 7 计算机（如果有区别的话），我有 xampp 版本 3.1.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:20:04.503

*xampp*的当前版本是*1.8.1*

恕我直言，您正在使用*openemr-xampp-3.1.0*

关于您面临的问题，请确保 apache 正在侦听默认端口*80* ..如果它正在侦听其他端口，例如*8080*，那么您必须输入您的网址，例如*http://localhost:8080* *强调文本*

另外，请确保其他软件或服务（如Skype）正在使用端口80 ..尝试停止此类服务，以防存在类似情况..

# wpf - 未调用 DataTemplate 的 TextBlock 的 KeyDown 处理程序

> ID：13169193
> 
> 赞同：2
> 
> 时间：2012-11-01T00:07:42.150
> 
> 标签：wpf, datatemplate, textblock, keydown

我定义了以下数据模板：

```
 <DataTemplate x:Key="hierarchicalTreeNodeTemplate">
            <TextBlock Text="{Binding Name}" 
                       MouseLeftButtonDown="treeViewTextBlock_MouseLeftButtonDown" 
                       KeyDown="treeViewTextBlock_KeyDown"
                       />
        </DataTemplate> 
```

此数据模板用于呈现一些 WPF TreeViewItems。For some reason, the MouseLeftButtonDown handler is called as expected when user clicks on a tree item that happened to be a TextBlock, but the KeyDown handler is not called when the same item is selected and any keyboard key is pressed. 任何想法这里可能有什么问题？谢谢。

# regex - 返回结果的一部分 (GREP)

> ID：13169194
> 
> 赞同：0
> 
> 时间：2012-11-01T00:07:44.800
> 
> 标签：regex, linux, shell, grep

使用此命令，我希望一个命令仅获取当前的 mac 地址，而另一个命令仅获取永久 mac。所以我必须使用 grep 表达式，但我不知道该怎么做。

```
 $ macchanger -s wlan0
    Permanent MAC: 14:25:47:ff:c4:aa (Twinhan)
    Current MAC: 00:24:54:f0:5c:cc (unknown) 
```

所以我真的很想做类似 macchanger -s wlan0 | grep ...为了准确得到 14:25:47:ff:c4:aa 另一个命令得到 00:24:54:f0:5c:cc 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T00:12:20.300

要获得“永久”行：

```
macchanger -s wlan0 | awk '/Permanent/ { print $3 }' 
```

要获取“当前”行：

```
macchanger -s wlan0 | awk '/Current/ { print $3 }' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T00:11:18.693

我认为你会比使用`sed`更好`grep`：

```
macchanger -s wlan0 | sed -n '/^Permanent/s/Permanent MAC: \([0-9a-fA-F:]*\) .*/\1/p'
macchanger -s wlan0 | sed -n '/^Current/s/Current MAC: \([0-9a-fA-F:]*\) .*/\1/p' 
```

这适用于符合 POSIX 的`sed`; GNU`sed`有时有自己的想法，但它接受这些并按预期工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T00:14:38.040

如果你想要grep：

```
macchanger -s wlan0 | grep Permanent | grep -P -o '..:..:..:..:..:..'
macchanger -s wlan0 | grep Current | grep -P -o '..:..:..:..:..:..' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T00:15:40.273

每个`grep`地址一个：

```
grep -P -o '(?<=Permanent MAC: )[a-zA-Z0-9:]+'
grep -P -o '(?<=Current MAC: )[a-zA-Z0-9:]+' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T00:12:32.263

`-o`选项将`grep`做你想做的事。例如：

```
grep -o '[0-9a-f:]\{17\}' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T00:45:15.207

此解决方案取决于输出中结果的顺序：

```
declare -a results
results=($(macchangher -s wlan0 | egrep -oi '([a-f0-9]{2}:){5}[a-f0-9]{2}'))
perm=$results[0]
cur=$results[1] 
```

# sql-server-2008-r2 - 如何锁定 SQL/SBS Server 2008 R2 上的 USB 端口

> ID：13169195
> 
> 赞同：1
> 
> 时间：2012-11-01T00:07:45.040
> 
> 标签：sql-server-2008-r2, windows-server-2008, windows-server-2008-r2

我需要知道如何锁定我的 SQL Server 2008 R2 上的 USB 端口。最好只有服务器前面的 USB 端口。我们即将进行审计，显然这在需要锁定的事情清单上......不要问我我只是遵守:-)

一如既往地感谢在这件事上提供的任何和所有帮助，

大卫92595

PS 如果您也知道如何在 SBS 2008 R2 系统上执行此操作，那将是一个很棒的奖励！

# java - Java缓存和相等

> ID：13169196
> 
> 赞同：4
> 
> 时间：2012-11-01T00:07:53.323
> 
> 标签：java, caching, object, integer, equality

我一直在阅读类的 java 缓存，但我不确定为什么这段代码有效。

```
Integer x = new Integer(2);
Integer y = new Integer(2);
assert x            != y;
assert x.intValue() == y.intValue();
++x;
assert x            != y;
assert x.intValue() != y.intValue();
++y;
assert x            == y;
assert x.intValue() == y.intValue(); 
```

我知道最初 x 和 y 不相等，因为它们引用了不同的对象，但是为什么在 ++ 之后它们变得相等？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T00:09:16.537

在增量之后，它们使用 重新装箱`Integer.valueOf()`，对于小的绝对值（默认情况下） `-128`，`127`使用缓存的实例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T00:10:17.020

这里的关键字是*整数缓存*。^*`Integer`下的值被缓存，并返回一个实习结果。`128`^(`++``valueOf`)

您可以执行两个有趣的实验来了解缓存的`Integers`工作原理：

*   替换`new Integer(2)`为，并立即`Integer.valueOf(2)`观察`x==y`
*   替换`2`为`200`，观察`x++`并`y++`返回*不同的*对象

* * *

^*有一个选项可以控制：`java.lang.Integer.IntegerCache.high=high_val`

# jquery-ui - 带有图像的 jquery 选项卡菜单

> ID：13169197
> 
> 赞同：0
> 
> 时间：2012-11-01T00:07:55.847
> 
> 标签：jquery-ui, jquery-ui-tabs

我正在尝试创建一个包含图像的选项卡控件。根据选项卡是否处于活动状态，我想为每个选项卡显示另一个图像。但是，看起来当前代码仅显示仅用于第二个选项卡的图像？

我在这里想出了一些代码：http: [//jsfiddle.net/5FVb7/](http://jsfiddle.net/5FVb7/)

html

```
<ul>
                <li class="ico1"><a href="#tab-1">Title 1</a></li>
                <li class="ico2"><a href="#tab-2">Title 2</a></li>
                <li class="ico3"><a href="#tab-3">Title 3</a></li>
            </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:45:56.657

如果我正确理解您想要做什么，问题是因为没有 div 定义从选项卡定义链接的选项卡内容：

```
 <ul>
        <li class="ico1"><a href="#tab-1">Title 1</a></li>
        <li class="ico2"><a href="#tab-2">Title 2</a></li>     
    </ul> 
```

对于每个 href 链接都必须有一个 div，此处的文档：http: [//jqueryui.com/tabs/](http://jqueryui.com/tabs/)

我修改了一点你的小提琴，标签发生了变化，图像开关正在工作：http: [//jsfiddle.net/5FVb7/1/](http://jsfiddle.net/5FVb7/1/)

# java - Java execute a program in java program for mac

> ID：13169205
> 
> 赞同：1
> 
> 时间：2012-11-01T00:08:33.340
> 
> 标签：java, macos, command-line, runtime, runtime.exec

I've been trying to use Java to execute Microsoft Excel in the coding by using the following code:

```
Process pro = Runtime.getRuntime().exec("open -a Microsoft"+"\\"+" "+"Excel");
pro.waitFor(); 
```

When I print this command out, it is exactly what I use to start a Excel in the command line manually, but when I want to start it by using java runtime, it is not working. I know in the Microsoft Windows command line there's no such problem, but in Mac is there any other way to start a program by using java code?

I also tried to start a Calculator by using the same code like:

```
Process pro = Runtime.getRuntime().exec("open -a Calculator"); 
```

It works perfectly, is it because the space between the "Microsoft" and "Excel"?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T00:21:30.307

[`java.lang.Runtime.exec(String)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29) parses the command line into single arguments itself and does not know anything about shell metacharacters such as using `\` to quote a space character that's supposed to go into an argument.

Try doing the argument splitting yourself instead:

```
String[] cmdline = { "open", "-a", "Microsoft Excel" };
Runtime.getRuntime.exec(cmdline); 
```

Note that you shouldn't need (or be able to) use a backslash to escape the space in the third element. When you type the command on the command line, that backslash is eaten by the shell as it splits the line into arguments to pass to the `open` program, but Runtime.exec() starts processes directly without the intervention of a shell, so if you put a backslash there, `open` would be able to see it, and would be confused by it.

# java - Java 中带有“事件”的 InputStream

> ID：13169206
> 
> 赞同：2
> 
> 时间：2012-11-01T00:08:39.050
> 
> 标签：java

我在 Java 中有一种情况，我有一个返回 InputStream 的方法，我想这样做，以便每当有人在该 InputStream 上调用 close 函数时，代码中的其他地方都会得到通知（如回调）。

但是，我返回的实际 InputStream 是由库调用返回的 InputStream 的子类，因此我无法直接控制它。

我目前的解决方案是创建一个 InputStream 的子类，它有一个 InputStream 成员变量，该变量由构造函数中的库调用实例化，我只是覆盖 InputStream 的方法并让它们使用变量的方法，此外还有close() 函数做了一些额外的事情。

这可行，但我想减少必须创建一个全新类的开销，覆盖所有必要的方法，以便在调用 close() 时可以执行单个事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T00:24:29.550

[Apache Commons IO](http://commons.apache.org/io/)具有多种过滤 I/O 流，可以更轻松地执行您所描述的操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T00:47:14.503

如果您希望它对 InputStream 的用户透明，您几乎必须这样做。也就是说，您不需要自己编写所有代码，因为 FilterInputStream 会为您完成所有基本工作（您只需要覆盖该`close()`方法）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T00:15:56.343

您可以使用 Java bean 事件机制来做到这一点。

[http://docs.oracle.com/javase/tutorial/javabeans/writing/events.html](http://docs.oracle.com/javase/tutorial/javabeans/writing/events.html)

这假定侦听器和广播器在同一个 JVM 中运行。

这是我的想法：

```
package io;

import java.beans.PropertyChangeListener;
import java.beans.PropertyChangeSupport;
import java.io.IOException;
import java.io.InputStream;

/**
 * BroadcastingInputStream broadcasts to interested listeners when it closes.
 * @author Michael
 * @since 10/31/12 8:34 PM
 * @link http://stackoverflow.com/questions/13169206/possible-in-java-to-create-an-event-when-a-function-is-called-on-a-particular-ob/13169271#comment17920062_13169271
 */
public class BroadcastingInputStream extends InputStream {

    private InputStream is;
    private PropertyChangeSupport propertyChangeSupport;

    public BroadcastingInputStream(InputStream is) {
        this.is = is;
        this.propertyChangeSupport = new PropertyChangeSupport(this);
    }

    @Override
    public int read() throws IOException {
        return this.is.read();
    }

    public void addCloseListener(PropertyChangeListener closeListener) {
        this.propertyChangeSupport.addPropertyChangeListener(closeListener);
    }

    public void removeCloseListener(PropertyChangeListener closeListener) {
        this.propertyChangeSupport.removePropertyChangeListener(closeListener);
    }

    @Override
    public void close() throws IOException {
        super.close();
        this.propertyChangeSupport.firePropertyChange("closed", false, true);
    }
} 
```

# java - 在java中将.bmp图像存储为位图数组

> ID：13169212
> 
> 赞同：0
> 
> 时间：2012-11-01T00:09:10.720
> 
> 标签：java, file-io, bitmap

到目前为止，我有以下代码可以读取 30x40 像素的 .bmp 文件：

```
public void setUp() throws IOException
{
    BufferedImage image =
        ImageIO.read(getClass().getResource("circle1.bmp"));
    greenInputData = new byte[30][40];

    for (int x = 0; x < greenInputData.length; x++)
    {
        for (int y = 0; y < greenInputData[x].length; y++)
        {
            int color = image.getRGB(x, y);
            greenInputData[x][y] = (byte)(color >> 8);
        }
    }
    System.out.println(greenInputData);
} 
```

当我调用 System.out.println(greenInputData) 时，控制台现在给了我以下信息：

[[B@1c8a1c9d [[B@1cb4ee66 [[B@262580b3 [[B@450a3962 [[B@5d7138f4 [[B@44443799] [[B@5220c1b [[B@52c4d93 [[B@3eaa2c1c [[B@2b3fc0bb [[B@4b8b7245 [[B@2623592 [[B@e689490 [[B@3849ca75] [[B@ebe5687 [[B@671ef55c [[B@68c6fc84 [[B@53dc5341

但我希望能够看到我正在阅读的图像的数组打印输出。例如，如果我读取一个圆的位图，我希望能够 System.out.println() 输出一个 30x40 位图数组，如下所示：

```
<---------30---------------->
000000000000000000000000000000 ^
000000111110000000000000000000 |
000001111111100000000000000000 |
000011111111110000000000000000 |
000011111111110000000000000000 40
000001111111100000000000000000 |
000000011110000000000000000000 |
000000000000000000000000000000 |
000000000000000000000000000000 |
.
.
. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T00:28:13.977

暗示 ：

你正在形成`greenInputData`正确的

问题在于您显示它的方式。

提示：它是一个二维数组

# c - 通过引用字符串数组传递函数和修改 C 中的内容

> ID：13169215
> 
> 赞同：3
> 
> 时间：2012-11-01T00:09:22.140
> 
> 标签：c, arrays, pointers, char

我在这里做错了什么，将一个char数组传递给一个函数，并在函数中给出每个索引内存（使用malloc（）），然后使用gets（）从键盘插入一些东西。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <sys/wait.h>

void test(char *arr[]);
int main(){
  char *arr[2];//2 is the rows
 /* arr[0] = malloc(80);//This commented code works
  arr[1] = malloc(80);
  strcpy(arr[0], "hey");
  strcpy(arr[1], "whats up");
*/

  test(*arr);
  printf("in array[0]: %s", arr[0]);
  printf("in array[1]: %s", arr[1]);
  return 0;
}
void test(char *arr[]){
  int index;
  char *input = malloc(80);
  for(index = 0; index < 2; index++){
  arr[index] = malloc(80);
  gets(input);
  strcpy(arr[index], input);
  //arr[0] = input;
  }
} 
```

只是一个非常基本的程序，由于某种原因我遇到了麻烦。还有一个问题当我声明一个数组时，这些形式有什么区别

```
char *array 
```

反对

```
char *array[size] 
```

或者

```
char **array 
```

谢谢，凯文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T00:14:58.077

您声明`arr`为`char *arr[2]`. 然后你传入`*arr`，它有`char*`要测试的类型。但是测试需要一个`char *[]`. 所以这行不通。您应该简单地按`arr`原样传入，即`test(arr)`.

`char * array`是指向字符的指针，通常用于指向字符数组（即字符串）中的第一个字符。 `char **array`是指向字符的指针。通常用于表示字符串数组。 `char *array[size]`基本上等同于上面的那个，但它不像那个，顶层指针已经指向一个有效的数组，所以不需要`malloc`编辑数组。

顺便说一句，您的`test`功能可以简化一点：这`strcopy`是不必要的。

```
void test(char *arr[])
{
    int i;
    for(i=0;i<2;i++)
    {
        arr[i] = malloc(80);
        gets(arr[i]);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T00:17:49.153

好的，在 C 声明中，您只会获得从声明中读取的第一个分配的内容。

在您了解如何阅读声明之前，这有点晦涩难懂。

运算符具有优先级，并且该优先级适用于声明。为简单起见，取：

```
() - Either raises precedence, or means "function taking parameters and returning..."
[] - Array of
* - Pointer to (right associative) 
```

所以，声明：

```
char *a[3]; 
```

是“3 个指向 char 的指针的数组”，而

```
char (*a)[3]; 
```

是“指向 3 字符数组的指针”（指向行宽为 3 的多维字符数组的行的指针）

编译器在堆栈上分配第一件事。因此，在第一个示例中，您获得了三个能够指向（尚未分配的）字符的指针。

```
| ptr | --> (unallocated char)
| ptr | --> (unalloc char)
| ptr | --> (unalloc char) 
```

在第二：

```
| ptr | --> (unallocated block of 3 char) 
```

下一条规则是：如果你有一个指针，你就有一个数组。所以在这两种情况下，你都会得到多维数组。

首先，行数是固定的（您已经分配了它），但是每一行可以有不同的大小，因为编译器知道指针可以偏移一个字符以到达下一个字符。

第二，你有一个固定的行大小，但编译器知道如何偏移你的基指针（每个 3 个字符），所以你有任意数量的行。

C 也是一种按值调用的语言。所以，如果你声明了一个变量：

```
char *a[3]; 
```

那么 'a' 本身就是“一个 3 ptr 到 char 的数组”，但 a[0] 是“一个 char 的 ptr”，而 a[0][0] 是一个 char。

当您编写一个期望的函数时：

```
void f(char *arg[]) {
...
} 
```

您必须将一个指向 char 的指针数组传递给它。它不关心有多少行（你必须跟踪它）......它只关心类型是否正确。

因此，如果您像我们的第一个示例中那样声明了“a”，则必须调用 f(a)。函数调用对函数 args 执行类似赋值的操作：

f(a) 表示用 (arg = a) 调用 f。

优先规则特别重要，你应该研究这些，直到你能读到这样的声明：

```
int (*f(int (*a)[4], void (*f)()))[6];

which is "f is a function that takes:
  - a pointer to arrays of 4 int
  - a pointer to a function that takes nothing and returns nothing)
and (then f) returns a pointer to arrays of 6 int". 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T00:27:38.340

char *array 创建一个指向内存字节的指针。char *array[size] 创建一个指向长度为“size”的数组的指针。char **array 只是一个指向内存字节指针的指针

如您所见，您的代码的问题在于您试图通过测试功能它不期望的东西。测试函数想要一个指向指针的指针，你只需给它一个指针。正确的段落是：test(arr);

从第二个角度来看：您在制作命令行程序时会看到这一点（有点）。

考虑以下代码：

```
#include<stdio.h>

int main(int argc, char *argv[]) {
    printf("%s\n", argv[0]);
    return 0;
} 
```

argv 指针指向命令行参数，每个参数都是一个字符串（它只是一个指针，或一个数组）。因此，假设您为 Linux 执行了以下操作：

./some_program -option 选择输入

这些中的每一个都被视为自己的字符串。char *argv[] 指向每个字符串。第一个 printf 将打印出 ./some_program，因为这是 argv 指向的第一个字符串。

# php - 以降序按图像名称对Div进行排序？

> ID：13169216
> 
> 赞同：0
> 
> 时间：2012-11-01T00:09:22.950
> 
> 标签：php, javascript

***请完整阅读 - 我首先使用示例编码 - 然后我的实际代码更具描述性 ***

我想根据图像名称按 DESCENDING 顺序对 div 进行排序。

从此改变：

```
<div id="content">
<p><img src="image/1.jpg"/></p>
<p><img src="image/3.jpg"/></p>
<p><img src="image/4.jpg"/></p>
<p><img src="image/2.jpg"/></p>
</div> 
```

至此

```
<div id="content">
<p><img src="image/4.jpg"/></p>
<p><img src="image/3.jpg"/></p>
<p><img src="image/2.jpg"/></p>
<p><img src="image/1.jpg"/></p>
</div> 
```

**但是**，我在这里使用此代码来填充“内容”div 中的图像。由于用户每天都在上传图像，因此使用下面的代码从另一个目录中提取这些图像路径。该内容 div 需要自行填充。

```
<script>
$.ajax({
  url: "user-uploads-thumbnails",
  success: function(data){
     $(data).find("a:contains(.jpg)").each(function(){
        // will loop through 
var images = 'user-uploads-thumbnails/' + $(this).attr("href");
var linkimage = 'user-uploads/' + $(this).attr("href");
 //backup $('<p><a href="' + linkimage + '"><img src="' + images + '"></a></p>').appendTo('#content');
$('<p><a class="fancybox" href="' + linkimage + '" data-fancybox-group="gallery"><img src="' + images + '"></a></p>').appendTo('#content');
     });
  }
});
</script> 
```

**下面的这个脚本仅在我将 url 硬编码到“内容”div 中时才有效。但是，每天都会将图像添加到另一个目录中，我需要它来自行填充。当我使用上面的脚本来拉路径时 ^^ 它不起作用。**

```
<script>
function sort(container) {
    var images = [],
        paragraphs = container.getElementsByTagName('p');        
    while(!!paragraphs.length) {
        var p = paragraphs[0];
        images.push(p.getElementsByTagName('img')[0].getAttribute('src'));
        container.removeChild(p);
    }
    images = images.sort();
    console.log(images);
    for(var i = images.length; i-- > 0;) {
        var p = document.createElement('p'),
            img = document.createElement('img');
            img.src = images[i];
            p.appendChild(img);
        container.appendChild(p);
    }
}

var container = document.getElementById('content');
sort(container);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T00:38:53.540

我认为最好确保一旦所有内容都已通过 AJAX 调用加载和附加，就会调用“排序（容器）”。

像这样的东西：

```
$.ajax({
  url: "user-uploads-thumbnails",
  success: function(data){
  var count = $(data).find("a:contains(.jpg)").length // storing total number of images
  $(data).find("a:contains(.jpg)").each(function(){
    // will loop through 
    var images = 'user-uploads-thumbnails/' + $(this).attr("href");
    var linkimage = 'user-uploads/' + $(this).attr("href");
    //backup $('<p><a href="' + linkimage + '"><img src="' + images + '"></a></p>').appendTo('#content');
    $('<p><a class="fancybox" href="' + linkimage + '" data-fancybox-group="gallery"><img src="' + images + '"></a></p>').appendTo('#content');

    if (!--count) sort(container); // calling sort after everything is loaded
   });
 }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T02:54:16.850

我看了你的网站。

**第 1 点。**

`ready`在文档事件中包装 javascript 。（谷歌并找到原因）

**第 2 点。**

如果您不想要砖石，请评论为

```
/*$(function() {
  $(window).load(function(){
    $('#content').masonry();
  });*/ 
```

不喜欢

```
//$(function() {
  $(window).load(function(){
    $('#content').masonry();
  }); 
```

**排序码可以**

```
<script>
$(document).ready(function() {
    $('.fancybox').fancybox();
    $.ajax({
        url: "user-uploads-thumbnails",
        success: function(data){
            var imageNames = [];
            $(data).find("a:contains(.jpg)").each(function(){
                // store each image name into array
                imageNames.push($(this).attr("href"));
               });
            //imagenames array is ~ 
            //['1351732586.jpg' ,'1351732519.jpg' ,'1351732583.jpg' ,'1351732473.jpg' ....]
            var sortedImageNames = imageNames.sort();
            //sortedImageNames array is ~ 
            //["1351732473.jpg", "1351732519.jpg", "1351732583.jpg", "1351732586.jpg" ....]
            //In for loop we take from last image to first Image for DESC order
            for(var i = sortedImageNames.length; i-- > 0;) {
                    var linkImage = 'user-uploads/' + sortedImageNames[i];
                    var thumbnailImage = 'user-uploads-thumbnails/' + sortedImageNames[i];
                    var item = '<p><a class="fancybox" href="' 
                        + linkImage 
                        + '" data-fancybox-group="gallery"><img src="' 
                        + thumbnailImage 
                        + '"></a></p>';
                    $(item).appendTo('#content');
                }
            //Apply fancybox to these Elements
            $('.fancybox').fancybox();
            }
        });
    });
</script> 
```

这未经测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T00:37:19.053

每次通过 ajax 加载 #content div 后，您都需要对容器进行排序。只需 `sort(container);`在 ajax 成功回调中添加所有内容后添加即可。

```
<script>
$.ajax({
  url: "user-uploads-thumbnails",
  success: function(data){
     $(data).find("a:contains(.jpg)").each(function(){
    // will loop through 
var images = 'user-uploads-thumbnails/' + $(this).attr("href");
var linkimage = 'user-uploads/' + $(this).attr("href");
 //backup $('<p><a href="' + linkimage + '"><img src="' + images + '"></a></p>').appendTo('#content');
$('<p><a class="fancybox" href="' + linkimage + '" data-fancybox-group="gallery"><img src="' + images + '"></a></p>').appendTo('#content');
 });

sort(container); // sort after loading the content

 }
});
</script> 
```

# android - Sqlite 按特殊字符排序

> ID：13169218
> 
> 赞同：2
> 
> 时间：2012-11-01T00:09:30.500
> 
> 标签：android, objective-c, sqlite

我执行了一个 SQLite 查询，但得到的结果不是我们需要的顺序，字符“á”显示在 z 之后。

如何配置我的查询以忽略特殊字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T00:45:43.647

不确定您是否只想忽略所有具有这些特殊字符的结果，或者您在对结果进行排序时遇到困难。

您可以将此视为提示（而不是答案）：

```
SELECT * 
FROM _table-name_ 
WHERE _column-name_ COLLATE Latin1_General_BIN NOT LIKE '%[^ a-zA-Z]%' 
```

# list - 检查列表中是否有一定数量的元素

> ID：13169219
> 
> 赞同：0
> 
> 时间：2012-11-01T00:09:40.393
> 
> 标签：list, lisp

我的问题的意思是：

假设有一个列表（abcd）

在继续我的代码之前，我想确保其中有 4 个元素。

如果列表显示 (abc)

我希望它返回 nil，因为这不是我想要的。

谁能帮忙=)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T00:37:42.320

使用长度函数：

```
(when (>= (length list) 4)
  ;; rest of your code
) 
```

如果您需要一种不扫描整个列表的方法，只是为了查看是否有 N 个元素，您可以使用此函数：

```
(defun length-at-least (list n)
  (cond ((zerop n) t)
        (list (length-at-least (cdr list) (1- n)))
        (t nil))) 
```

然后你可以这样做：

```
(when (length-at-least list 4)
  ;; rest of your code
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T11:45:07.223

```
(defun has-at-least-elements (n list)
  (do () ((< n 1) t)
    (unless list (return))
    (setq n (1- n) list (cdr list))))

(has-at-least-elements 10 '(1 2 3 4))   ; NIL
(has-at-least-elements 4 '(1 2 3 4))    ; T 
```

作为一般情况，这个解决方案会更好，它也可以同时处理循环列表和非常长的列表。

# objective-c - NSTimer 在完成后调用的方法之后启动

> ID：13169220
> 
> 赞同：1
> 
> 时间：2012-11-01T00:09:41.027
> 
> 标签：objective-c, multithreading, nstimer

我使用 NSTimer 来更新 UIProgressView 以便每秒进度增加 0.1。

```
-(void)updateBar{
     NSLog(@"Increase by 0.1");
     pbar.progress=pbar.progress+0.1;
 }

 -(void)foo{
    NSLog("START Foo");
    //Does some stuff that takes about 10sec
    NSLog("FINISH Foo");
 }

 -(void) viewDidLoad{
     pbar = [[UIProgressView alloc] initWithFrame:CGRectMake(-280, 500, 730, 90)];
     pbar.progressViewStyle = UIProgressViewStyleDefault;
     pbar.progressTintColor = [UIColor colorWithRed:68.0/255 green:186.0/255 blue:41.0/255 alpha:1.0];
     pbar.progress = 0.0;
     pbar.transform = CGAffineTransformMakeRotation(90 * M_PI / 180.0);
     [self.view addSubview:pbar];

     [NSTimer scheduledTimerWithTimeInterval: 1.0 target:self selector:@selector(updateBar) userInfo:nil repeats: YES];

     [self foo];
 } 
```

所以理想情况下，UIProgressView 的进度会在 foo 方法运行期间增加。但是，计时器在 foo 方法完成后启动，所以我的控制台最终看起来像这样......

```
START Foo
FINISH Foo
Increase by 0.1
Increase by 0.1
Increase by 0.1
And so on .... 
```

知道为什么会发生这种情况吗？更重要的是，我如何让它做我想做的事情并让计时器在 foo 被调用之前开始运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T00:24:05.017

该`- (void) updateBar`方法在运行循环中被延迟，而`- (void) foo`立即执行。

当您实现了代码时，您缺少对`NSTimer`将用于结束计时器的引用（特别是实例变量）。

您将在方法结束时使用该变量`- (void) foo`来停止计时器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T00:22:10.767

您正在调用的特定方法“ ”在*当前*`scheduledTimerWithTimeInterval`运行循环上运行计时器，这解释了为什么“foo”在计时器触发之前执行它。

 *如果您想在单独的（后台）线程上运行事物，为什么不创建和分离线程（[或块，这是一个可能对您有所帮助的相关问题](https://stackoverflow.com/questions/6586662/nstimer-category-blocks-implementation-to-replace-selector)），然后在单独的线程上运行相同的调用。当然，如果你正在做任何与 UI 相关的事情，你必须在主线程上进行实际的 UI 更新。因此，当计时器在单独的线程上运行时，在主线程上执行实际的 UI 工作（通过类似“ `performSelectorOnMainThread:`”）。*

# javascript - 将 facebook 用户添加到我的 jabber 名册

> ID：13169222
> 
> 赞同：0
> 
> 时间：2012-11-01T00:09:53.683
> 
> 标签：javascript, facebook, strophe

我的聊天建立在 strophe 上。当我尝试邀请我的 facebook xmpp 用户名时，我在我的服务器上得到了这个：

```
Trying to open s2s connection: pregmatch.org -> chat.facebook.com with TLS=true 
s2s connection: pregmatch.org -> chat.facebook.com (remote server not found)
Reconnect delay expired: Will now retry to connect to chat.facebook.com when needed. 
```

如果 facebook 支持 xmpp，如果你不能邀请某些用户，或者他们不能邀请你（不管你是否有 facebook 帐户），这很愚蠢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T05:22:46.713

在 XMPP 世界中，除了 Jabber/XMPP 通信所基于的客户端-服务器体系结构之外，还有另一个方面称为“联合”，即不同域中的两个 XMPP 服务器交换 XML 节的能力。不幸的是，facebook 不支持联盟。Google Talk 服务器可以。结果，您将无法添加或与 facebook jabber id 交互

# codeigniter - 在 hostgator 服务器上使用 Codeigniter Upload 类时文件路径无效

> ID：13169225
> 
> 赞同：0
> 
> 时间：2012-11-01T00:10:20.377
> 
> 标签：codeigniter, file-upload, filepath, remote-server

我正在使用 codeigniter 2.1.2 上传类将文件上传到 hostgator 上的远程服务器。尝试上传文件时出现以下错误。

`*The upload path does not appear to be valid.*`

这是我的文件夹结构：

我的插件域/

----**导入**（目标文件夹）

- - 应用/

- - - - 控制器/

------------upload_controller.php

在我的控制器中，我尝试为 $config['upload_path'] 设置不同的路径，包括

1.  /home/my-hostgator-username/public_html/my-addon-domain-folder/import/'
2.  ../进口/
3.  我的网站网址/导入/

这些都不起作用。我确定为文件夹“import”设置了可写权限。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T00:15:16.243

尝试使用`realpath`

```
 $config['upload_path'] = realpath('import'); 
```

（建议您的导入文件夹位于 Web 服务器根文件夹（index.php 所在的位置）下一层）

或者

```
 $config['upload_path'] = './import/'; 
```

# java - java中的无限列表

> ID：13169226
> 
> 赞同：1
> 
> 时间：2012-11-01T00:10:33.793
> 
> 标签：java

Java中除了链表之外还有无界列表吗？我必须将 BLOB 对象存储在列表中。我目前正在使用 arrayList，但我担心当列表大小增加时，arraylist 可能无法存储（可能达到最大容量）。我想过使用链表，但它看起来效率不高。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T00:14:04.307

`ArrayList`没有任何大小限制——它会扩大到适合您添加到其中的元素的大小。

`ArrayList`可能在技术上限制为 2^31-1 个值 - 或大约 20 亿个元素 - 但您首先会用完 RAM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T00:22:55.717

请注意，Java 中有数十种 Collection 实现，完全取决于您的需求。例如，ArrayList 没有有效的大小限制，因为在达到最大大小之前您将遇到 OutOfMemoryError。在决定之前结帐[集合页面。](http://docs.oracle.com/javase/6/docs/technotes/guides/collections/reference.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T00:14:12.727

> 当列表的大小增加时，arraylist 可能无法存储（因为它的大小限制）。

什么尺寸限制？

```
List<Blob> blobs = new ArrayList<Blob>(); 
```

您只受到可以分配给 JVM 的内存量的限制，或者正如 yshavit 在下面正确指出的那样，索引的最大整数值。

# regex - 该行的每个第 7 个字符必须是 +

> ID：13169228
> 
> 赞同：1
> 
> 时间：2012-11-01T00:10:58.597
> 
> 标签：regex, bash, grep

问题如下：我有一个名为 Brain.txt 的文档，其中包含如下字符：

```
++++++++++[>++++++++>++++++>+<<<-]>+++.>+++++.<-.+.>>. word 
```

最后`word`的真的可以是任何词。如何从文档中过滤每 7 个字符为加号的行？例子：`+......+......+......+..... word`

我写了以下命令：

```
egrep '^\+(.{6}\+)+.{,6}\s' brain.txt 
```

但它似乎不起作用，谁能解释一下这个命令有什么不正确的地方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T00:28:02.553

问题是速记符号`{,6}`似乎不适用于给定的正则表达式风格。简单地写出来：

```
egrep '^\+(.{6}\+)+.{0,6}\s' brain.txt 
```

请注意，这**至少需要 2** `+`秒。`\+`开头的单个，子模式中的另一个（因为它至少重复一次）。如果`+.... word`对您来说是有效的行，请使用：

```
egrep '^\+(.{6}\+)*.{0,6}\s' brain.txt 
```

# java - 在 Android JUnit 类中测试 EditText 输入的首选方法

> ID：13169235
> 
> 赞同：0
> 
> 时间：2012-11-01T00:11:34.463
> 
> 标签：java, android, unit-testing, junit

我有一个带有 EditText 和 Button 小部件的 Activity。`setResult()`如果 EditText 为空或调​​用将值发送回另一个启动此活动的活动，则单击该按钮会打印一条错误消息。

我正在编写一些简单的单元测试来检查这种交互是否有效。我有同一个测试的两个不同版本：

```
@UiThreadTest
public void testOkButtonOnClickWithNumber() {
    this.numberText.setText(Integer.toString(this.testNumber));
    Assert.assertTrue(this.okButton.performClick());
    Assert.assertTrue(this.activity.isFinishing());
}

public void testOkButtonOnClickWithUserInputNumber() throws Throwable {
    this.sendKeys(Integer.toString(this.testNumber));

    this.runTestOnUiThread(new Runnable() {
        @Override
        public void run() {
            Assert.assertTrue(NumberFilterTest.this.okButton.performClick());
        }
    });

    this.getInstrumentation().waitForIdle(new Runnable() {
        @Override
        public void run() {
            Assert.assertTrue(NumberFilterTest.this.activity.isFinishing());
        }
    });
} 
```

如您所见，一项测试仅调用`setText()`EditText 小部件。其他用途`sendKeys()`。在测试期间是否有首选的最佳实践可以使用这两个选项中的哪一个？还是我应该保留两个测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T00:14:46.663

我可能对一个老问题有一个新的答案，[http://developer.android.com/tools/testing/testing_ui.html](http://developer.android.com/tools/testing/testing_ui.html)刚刚作为 adt21 的一部分发布，如果你刚刚开始进行 android 测试，那当然值得一看这。

至于实际问题。使用 sendKeys() 更接近用户实际所做的事情，因此，如果您有监听器编辑文本或按键，那么他们实际上会被解雇。通常这对您来说可能不是问题，因为您可能没有使用此功能，但如果您没有意识到，它可能会咬到您。像这样的另一个示例是您如何单击按钮，您当前正在调用 click 方法，而首选方法是在按钮位置上发送触摸事件，因为这实际上是用户所做的。

# coldfusion - 无法通过 Coldfusion 将 SVG 变量传递到 Batik 转码器

> ID：13169238
> 
> 赞同：0
> 
> 时间：2012-11-01T00:12:04.740
> 
> 标签：coldfusion, svg, batik

在从 SQL 表中获取 SVG 代码并将其传递到 Batik 以对其进行转码（显示 PNG）之间存在一些我不明白的事情。

如果我运行下面的 CF 代码，我会收到错误：*无法显示图像，因为它包含错误*。这是其中任何一个产生的唯一错误。

我还使用返回 true 的 isXML() 测试了表中的值。

但如果我：

1.  取消注释第 1 节，
2.  复制 CFDUMP 生成的 SVG 代码，
3.  在第 2 节中将该 SVG 代码粘贴回 CFSET 中，
4.  并重新注释掉评论部分 1

然后 PNG 按预期显示在浏览器中。在 CFDUMP 中显示 SVG 代码，然后手动将其粘贴到代码中以某种方式（神秘地）使用它的过程会改变它，因此它可以工作......

我尝试了各种变化。当它在 CFDUMP 中显示 SVG 代码时，ColdFusion 似乎在做一些我不理解的事情（或者可能是 SQL 的某种字符集问题？）。

有人知道这可能是什么吗？我受阻了。

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<CFQUERY NAME="getSketch">
  SELECT sketch_svg AS svg
  FROM sketch
  WHERE  ordID = 1
</CFQUERY>
<cfset svg = Replace(getSketch.svg,'&quot;','','all')>

<!--- Commented-out Section 1
<cfset svg = Replace(svg,"'","''",'all')>
<cfset svg = Replace(svg,"##","####",'all')>
<CFDUMP var="#svg#" abort>
--->

<!--- Commented-out Section 2
<cfset svg = '[Manually paste SVG code from CFDUMP here...]'>
 --->

<!--- The following takes the svg code and displays it as a PNG in the browser - This works fine if the SVG code is okay...)  --->
<cfscript>
  context = getPageContext();
  context.setFlushOutput(false);
  response = context.getResponse().getResponse();
  response.setContentType("image/png");
  transcoder = createObject("java", "org.apache.batik.transcoder.image.PNGTranscoder").init();
  inputStream = createObject("java", "java.io.StringBufferInputStream").init(svg);
  input = createObject("java", "org.apache.batik.transcoder.TranscoderInput").init(inputStream);
  outputStream = response.getOutputStream();
  output = createObject("java", "org.apache.batik.transcoder.TranscoderOutput").init(outputStream);
  transcoder.transcode(input, output);
  output.close();
  outputStream.close();
</cfscript> 
```

# c++ - 在循环的停止条件下访问数组值是否安全？

> ID：13169239
> 
> 赞同：4
> 
> 时间：2012-11-01T00:12:06.663
> 
> 标签：c++, arrays, loops, standards, conditional-statements

为了提高使用有序数组的 clique-partitioning 程序的性能，我在`for`循环的停止条件中包含了对要循环到的数组元素的访问。

```
int myValue = 13;

for (int i=0; array[i] < myValue; i++)
{
    //performing operations on the array
} 
```

这显然是不安全的，因为我的数组可能只包含小于的值`myValue`，所以我尝试了这个

```
int myValue = 13;

for (int i=0; i < array.size() && array[i] < myValue; i++)
{
    //performing operations on the array
} 
```

在这个实现中，一切似乎都很顺利，但是如果我切换条件，我就会陷入与第一个示例相同的问题。

```
int myValue = 13;

for (int i=0; array[i] < myValue && i < array.size(); i++)
{
    //performing operations on the array
} 
```

所以，我推断这显然是由于编译器设置两个条件的顺序的方式，因为在最后一种情况下，即使我要求只有在`i`不大于数组大小的情况下才进入循环，我' m 之前读取的值可能超出数组的范围。

我的问题是：像我在第二个实现中所做的那样总是安全的，还是编译器有时会切换我的控制条件导致不安全的代码？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T00:13:29.597

如果可以，`&&`（逻辑与）运算符*总是*短路。你的第二个例子是安全的。

请注意，这仅适用于原始类型，而不适用于那些重载布尔运算符的类型。

[因为没有标准报价](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3376.pdf)，任何自尊的`C++`答案都是不完整的：

> **5.14.1（逻辑与）** && 运算符从左到右分组。操作数都根据上下文转换为 bool 类型（第 4 条）。如果两个操作数都为真，则结果为真，否则为假。与 & 不同，&& 保证从左到右的评估：如果第一个操作数为假，则不评估第二个操作数。
> 
> **5.14.2（逻辑或）** || 运算符组从左到右。操作数都根据上下文转换为 bool（第 4 条）。如果其中一个操作数为真，则返回真，否则返回假。与 |、|| 不同 保证从左到右的评估；此外，如果第一个操作数的计算结果为真，则不计算第二个操作数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T00:17:50.987

我不会做任何一个例子。做这个：

```
for (int i=0; i < array.size(); i++) {
    if (array[i] >= myValue) {
        break;
    }

    // do stuff
} 
```

这样，您就不会感到困惑或缺乏安全感。它与其他示例具有相同的速度，但以后调试起来要简单得多。

# android - 用于获取操作员分配的 IP 地址的 adb 命令

> ID：13169249
> 
> 赞同：45
> 
> 时间：2012-11-01T00:13:15.287
> 
> 标签：android, android-intent, adb

在成功进行 3G 或 LTE 数据通话后，我需要获取运营商分配的 IP 地址。

```
$adb shell netcfg >> doesnt have the assigned IP address. 
```

我试过`adb shell dumpsys`和grep ip地址，但徒劳无功。任何帮助/指针？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-11-01T00:17:18.957

试试这个命令，它会帮助你获取 ipaddress

```
adb shell ifconfig tiwlan0 
```

tiwlan0 是设备上 wi-fi 网络接口的名称。这是获取 ipaddress 的通用命令，

```
 adb shell netcfg 
```

它会像这样输出

```
usb0     DOWN  0.0.0.0         0.0.0.0         0×00001002
sit0     DOWN  0.0.0.0         0.0.0.0         0×00000080
ip6tnl0  DOWN  0.0.0.0         0.0.0.0         0×00000080
gannet0  DOWN  0.0.0.0         0.0.0.0         0×00001082
rmnet0   UP    112.79.87.220   255.0.0.0       0x000000c1
rmnet1   DOWN  0.0.0.0         0.0.0.0         0×00000080
rmnet2   DOWN  0.0.0.0         0.0.0.0         0×00000080 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-10-03T17:56:21.500

**尝试：**

```
adb shell ip addr show rmnet0 
```

**它会返回类似的东西：**

```
3: rmnet0: <UP,LOWER_UP> mtu 1500 qdisc htb state UNKNOWN qlen 1000
    link/[530]
    inet 172.22.1.100/29 scope global rmnet0
    inet6 fc01:abab:cdcd:efe0:8099:af3f:2af2:8bc/64 scope global dynamic
       valid_lft forever preferred_lft forever
    inet6 fe80::8099:af3f:2af2:8bc/64 scope link
       valid_lft forever preferred_lft forever 
```

**这部分是运营商分配给你的IPV4**

> 网内 172.22.1.100

**这部分是运营商分配给你的IPV6**

> inet6 fc01:abab:cdcd:efe0:8099:af3f:2af2:8bc

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-01-16T07:45:22.880

根据评论：netcfg 在 Android 6 中被移除

尝试

```
adb shell netcfg 
```

或者

```
adb shell <device here or leave out if one device>
shell@android:/ $netcfg 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-06-20T08:05:03.730

Try this command for Version <= Marshmallow,

```
adb devices 
```

> List of devices attached 38ccdc87 device

```
adb tcpip 5555 
```

> restarting in TCP mode port: 5555

```
adb shell ip addr show wlan0 
```

24: wlan0: mtu 1500 qdisc mq state UP qlen 1000 link/ether ac:c1:ee:6b:22:f1 brd ff:ff:ff:ff:ff:ff inet **192.168.0.18**/24 brd 192.168.0.255 scope global wlan0 valid_lft forever preferred_lft forever inet6 fd01::1d45:6b7a:a3b:5f4d/64 scope global temporary dynamic valid_lft 287sec preferred_lft 287sec inet6 fd01::aec1:eeff:fe6b:22f1/64 scope global dynamic valid_lft 287sec preferred_lft 287sec inet6 fe80::aec1:eeff:fe6b:22f1/64 scope link valid_lft forever preferred_lft forever

To connect to your device run this

```
adb connect 192.168.0.18 
```

connected to 192.168.0.18:5555

Make sure you have adb inside this location **android-sdk\platform-tools**

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-09-17T11:50:47.310

您可以通过这种方式获取设备ip地址：

```
adb shell ip route > addrs.txt
#Case 1:Nexus 7
#192.168.88.0/23 dev wlan0  proto kernel  scope link  src 192.168.89.48

#Case 2: Smartsian T1,Huawei C8813
#default via 192.168.88.1 dev eth0  metric 30
#8.8.8.8 via 192.168.88.1 dev eth0  metric 30
#114.114.114.114 via 192.168.88.1 dev eth0  metric 30
#192.168.88.0/23 dev eth0  proto kernel  scope link  src 192.168.89.152 metric 30
#192.168.88.1 dev eth0  scope link  metric 30

ip_addrs=$(awk {'if( NF >=9){print $9;}'} addrs.txt)

echo "the device ip address is $ip_addrs" 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2017-02-07T08:23:58.210

你可以试试这个命令：

```
adb shell ip addr show rmnet0  | grep 'inet ' | cut -d ' ' -f 6 | cut -d / -f 1 
```

**它将返回您由运营商分配的 IPV4**

> 172.22.1.215

## 笔记：

`rmnet0`应该用你的界面替换我的情况`rmnet0`通常是`eth0`.

如果您想获取接口列表，请使用以下命令：

```
ip link show 
```

你会得到这样的东西：

```
1: lo:  mtu 16436 qdisc noqueue state UNKNOWN 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: eth0:  mtu 1500 qdisc mq state UP qlen 1000
    link/ether b8:ac:6f:65:31:e5 brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.5/24 brd 192.168.1.255 scope global eth0
    inet6 fe80::baac:6fff:fe65:31e5/64 scope link 
       valid_lft forever preferred_lft forever
3: wlan0:  mtu 1500 qdisc noop state DOWN qlen 1000
    link/ether 00:21:6a:ca:9b:10 brd ff:ff:ff:ff:ff:ff
4: pan0:  mtu 1500 qdisc noop state DOWN 
    link/ether 92:0a:e7:31:e0:83 brd ff:ff:ff:ff:ff:ff
5: vmnet1:  mtu 1500 qdisc pfifo_fast state UNKNOWN qlen 1000
    link/ether 00:50:56:c0:00:01 brd ff:ff:ff:ff:ff:ff
    inet 192.168.121.1/24 brd 192.168.121.255 scope global vmnet1
    inet6 fe80::250:56ff:fec0:1/64 scope link 
       valid_lft forever preferred_lft forever
6: vmnet8:  mtu 1500 qdisc pfifo_fast state UNKNOWN qlen 1000
    link/ether 00:50:56:c0:00:08 brd ff:ff:ff:ff:ff:ff
    inet 192.168.179.1/24 brd 192.168.179.255 scope global vmnet8
    inet6 fe80::250:56ff:fec0:8/64 scope link 
       valid_lft forever preferred_lft forever 
```

通常在哪里，

*   `lo`– 环回接口。
*   `eth0`– Linux 上的第一个以太网网络接口。
*   `wlan0`– Linux 中的无线网络接口。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-04-04T17:52:19.357

你也可以试试这个：

**第 1 步：** adb shell **第 2 步：** ip -f inet addr show wlan0

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-06-17T05:08:03.120

adb shell ip addr > ippdetails.txt 这将获取分配给设备的所有 ip 列表。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-03-27T05:36:42.763

[从此处](https://play.google.com/store/apps/details?id=jackpal.androidterm)下载此应用程序，它将帮助您朗读所有命令。我已经运行了 netcfg，它给出了屏幕中附加的结果。

![输出画面](../Images/858cb5809d1915d1af7887715bbcd05a.png)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-10-02T03:19:54.263

```
ip route | grep rmnet_data0 | cut -d" " -f1 | cut -d"/" -f1 
```

`rmnet_data0`在我的情况下，更改为所需的 nic`rmnet_data0`代表数据 nic。

要获取可用 nic 的列表，您可以使用`ip route`

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-12-27T14:42:27.830

**要在 2019 年使用无根**手机获取所有 IP（**WIFI 和数据 SIM**） ，请使用：

 **`adb shell ip -o a`

输出如下所示：

```
1: lo    inet 127.0.0.1/8 scope host lo\       valid_lft forever preferred_lft forever
1: lo    inet6 ::1/128 scope host \       valid_lft forever preferred_lft forever
3: dummy0    inet6 fe80::489c:2ff:fe4a:00005/64 scope link \       valid_lft forever preferred_lft forever
11: rmnet_data1    inet6 fe80::735d:50fb:2e2:0000/64 scope link \       valid_lft forever preferred_lft forever
21: r_rmnet_data0    inet6 fe80::e38:ce2a:523a:0000/64 scope link \       valid_lft forever preferred_lft forever
30: wlan0    inet 192.168.178.0/24 brd 192.168.178.255 scope global wlan0\       valid_lft forever preferred_lft forever
30: wlan0    inet6 fe80::c2ee:fbff:fe4a:0000/64 scope link \       valid_lft forever preferred_lft forever 
```

您可以通过 adb shell 进行连接，也可以`ip -o a`直接在终端模拟器中运行该命令。同样，不需要根。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-11-26T06:21:18.500

对于 IP 地址 - 您将在下面写下您的 IP`adb shell ifconfig` 地址`wlan0 Link encap:UNSPEC`**

# java - 使用 JSON 编组字符串

> ID：13169250
> 
> 赞同：0
> 
> 时间：2012-11-01T00:13:18.233
> 
> 标签：java, json, jackson

我正在使用 JSON Jackson 2.0 将数据模型写入文件，然后将其加载回应用程序。我可以成功地将对象写入字符串，但在尝试将其编组回对象时遇到以下错误消息：

*没有为类型 [简单类型，类 ImportAttributeModel] 找到合适的构造函数：无法从 JSON 对象实例化（需要添加/启用类型信息？）在 [来源：用户；行：1，列：111]（通过引用链：ImportTemplateModel["modelList"]）*

这是我的课程的代码片段：

```
public class ImportTemplateModel 
{  
  private Map<Integer, AttributeModel> m_modelList;
  private GraphElementType m_type; 

  public ImportTemplateModel() 
  {

  }
// getters  & setters
}

public class AttributeModel 
{
   private String m_label;
   private String m_key;
   private ElementDefinition m_definition;

   public AttributeModel(String label, String key, ElementDefinition def)
   {
      m_label = label;
      m_key = key;
      m_definition = def;
   }
// getters  & setters
} 
```

这是我编写和读取模型的调用：

```
// Write model
ObjectMapper mapper = new ObjectMapper();
ImportTemplateModel itm = new ImportTemplateModel()
// set model atttributes
...
//

try {
  mapper.writeValue(new File(filepath), itm);

} 
catch (IOException e) {

}
.... 

// Read Model
ObjectMapper mapper = new ObjectMapper();
try {
  mapper.readValue(new File(filepath), ImportTemplateModel.class);

}
catch (IOException e) {

} 
```

我不确定我现在做错了什么......是因为 AttributeModel 不是 POJO？还是我不能在这个实现中使用地图？如果是这样，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T02:41:29.313

它需要有一个无参数的构造函数，以便 Jackson 可以实例化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T01:51:10.747

例外：

*com.fasterxml.jackson.databind.JsonMappingException：没有找到适合类型[简单类型，类 ImportDataModel$ImportTemplateModel] 的构造函数：无法从 JSON 对象实例化（需要添加/启用类型信息？）*

表明这`ImportTemplateModel`是一个内部类。您的代码片段显示此类不是静态的。如果它不是静态的，则不能在其外部类之外实例化`ImportDataModel`。使其成为静态或独立类，它应该可以工作。

# objective-c - 覆盖初始化

> ID：13169252
> 
> 赞同：-1
> 
> 时间：2012-11-01T00:13:43.727
> 
> 标签：objective-c

> **可能重复：**
> [在 Objective-C 中，我为什么要检查 self = [super init] 是否不为零？](https://stackoverflow.com/questions/1287950/in-objective-c-why-should-i-check-if-self-super-init-is-not-nil)

我是 Ob-C 的新手，我很难理解为什么返回的值不是 nil，正如“if 语句”所测试的那样。

```
- (id)init
{
    self = [super init];
    if (self) {
        // Initialization code here.
    }

    return self;
} 
```

此方法首先调用父初始值设定项。执行父级的初始化程序可确保正确初始化任何继承的实例变量。您必须将执行父级的 init 方法的结果分配回自身，因为初始化程序有权更改对象在内存中的位置（意味着其引用将更改）。如果 parent 的初始化成功，则返回的值将是 non-nil，如 if 语句所测试的那样。正如注释所示，在后面的块内，您可以为您的对象放置您自己的自定义初始化代码。这通常涉及分配和初始化类中的实例变量。

粘贴来自 Stephen Kochan“Objective-C 编程，第四版”的代码和文本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T04:47:28.893

考虑以下场景，您有一个父类，我们将其称为`Parent`，它具有以下布局：

```
@implementation Parent {
    int value;
} 
```

并且您有一个 class `Child`，它是 的子类`Parent`，并且具有以下布局：

```
@implementation Child {
    int other;
} 
```

在`Child`子类中，您无法直接访问`Parent`名为`value`. 但是，在其初始化中，`Parent`将一些整数分配给`value`，并且其中的某些功能`Parent`取决于设置的此值。

如果`Child`不调用`[super init]`，`value`将永远不会被初始化`Parent`，并且`Child`继承的部分功能将被破坏。该`init`方法被定义为返回一个指向已初始化对象实例的指针。如果忽略 的返回值`[super init]`，可能会遇到麻烦，因为父级 init 可能已决定将对象实例重新分配到分配器提供的位置以外的某个位置。

例如，[NSString 可以检测空字符串字面量的初始化](https://stackoverflow.com/questions/13150939/something-is-different-between-and-123/13150970#13150970)，并将返回一个指向常量 NSString 引用的指针，而不是堆上的指针。所以说你只是调用`[super init]`并忽略它的返回值，并继续使用`self`传递给`Child`s`init`方法的指针值，你突然使用了一个悬空指针！

这是一个极端的情况，但重点是，如果您打算从父类继承功能，您应该将 self 分配给`[super init]`，并且您应该检查它是否返回`nil`，因为它可能决定初始化失败并破坏提供给它的内存由分配器。

# java - 如何在 Java 中为可移动对象添加速度？

> ID：13169257
> 
> 赞同：0
> 
> 时间：2012-11-01T00:14:13.667
> 
> 标签：java, swing

以这段代码为例，我如何向对象添加速度分量？

```
class CircleFrame extends JPanel {
    static int x = 20;
    static int y = 20;
    int radius = 20;

    CircleFrame() {
        setSize(400,400);
    }

    @Override
    protected void paintComponent(Graphics g) {
        repaint();
        g.drawOval(x,y,radius,radius);
    }
} 
```

此代码允许用户使用左、右、上和下箭头键控制 JFrame 中的一个小圆圈。如何添加速度？例如，当他们向右移动时，xvelocity 变得更大。一旦他们停止移动它，速度就会慢慢降低，直到物体停止。我在想线程是这里的答案，但我仍然不太了解它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T00:28:57.513

每一个动作都是一个独特的按键？即，如果我按住键，我只能移动？如果是这种情况并且您只想粗略计算速度，那么您可以在每个按下事件处理程序上调用 System.currentTimeMillis() ，将其保存在某个变量中，然后在下一次再次调用它，然后只需计算总数位移除以时间差......如果这是你想要做的评论，我会写一些代码。

另一种（更有可能）的可能性是您希望在他们按住键时增加速度......在这种情况下，找出您想要施加的加速度..使用第二个线程来增加速度并通知该动作减速当 keyUp 事件发生时停止。

```
int accel = 1;
boolean accelerating = false;
public void keyPressed(KeyEvent e)
{
   ...
   accelerating = true;
   new Thread() //anonymous inner class 
   { 
     public void run()
     {
       while (accelerating) { x += vel; vel += 1; }
       //no longer accelerating
       x = 0; //or decelerate gracefully with a similar loop as accel.
     }
  }.run();
}
public void keyUp(KeyEvent e) //or however you get a key release event
{
   accelerating = false;
} 
```

稍微修改一下以使其适应您的上/下/左/右，并找出对您有意义的加速度。你甚至可以考虑只加速到极限，而不是超过某个速度

# build - 编译多个 GNU Autotools 项目的构建系统

> ID：13169258
> 
> 赞同：1
> 
> 时间：2012-11-01T00:14:21.013
> 
> 标签：build, build-process, build-automation, autotools

我正在寻找一个过程来构建多个基于 GNU 自动工具的项目，这些项目都位于单独的源代码控制中。

我正在寻找一个构建框架，我可以提供一些类似的东西。我要指定的主要内容是 repo src（例如 git，hg ...），取决于。

```
{
  repos : [
     { src : "git://someplace.com/repo1",
       branch : "devel",
       depends : []
     },
     { src : "git://someplace.com/repo2",
       branch : "default" 
       depends : ["repo1"]
     }
  ] 
} 
```

有没有人知道存在这样的东西？我过去曾将 bitbake/openembedded 和 yocto 用于不同的嵌入式项目，但我认为它们对于我正在寻找的东西来说太过分了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:44:35.657

我过去使用过[Test::AutoBuild](http://www.autobuild.org/index.html)。根据他们的功能列表，他们支持依赖项，但我没有尝试过。

# paypal - 贝宝订阅按钮的 undefined_quantity

> ID：13169259
> 
> 赞同：2
> 
> 时间：2012-11-01T00:14:22.683
> 
> 标签：paypal, subscription, paypal-subscriptions

我想定义一个带有循环付款（每月一次）的 Paypal 按钮，但具有自定义数量。例如，如果我选择 1 个项目，我将每月支付 1 美元，如果我选择 2 个项目，我将每月支付 2 美元等等。有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:01:59.080

这取自一个订阅按钮，该按钮允许客户在 3 个选项之间进行选择。

```
 <tbody><tr><td><input name="on0" value="Monthly Autoship" type="hidden"></td></tr><tr><td><select name="os0">
<option name="item_name" value="1 Pro">1 Pro: $88.84</option>
<option name="item_name" value="2 Pro">2 Pro: $161.29</option>
<option name="item_name" value="3 Pro">3 Pro: $235.87</option> 
```

这只是一个正常的下拉选择。

# android - 为什么我使用 sendKeys() 的测试在 Android 模拟器中没有动画？

> ID：13169260
> 
> 赞同：1
> 
> 时间：2012-11-01T00:14:24.917
> 
> 标签：android, unit-testing, android-emulator, junit

当我在 Android 模拟器中运行以下测试时，输入值不会显示在 EditText 中。为什么不呢？我需要更改什么才能在模拟器中看到输入？（测试通过了，所以最后可能没关系。我只是希望能够在模拟器中看到它实际发生。）

```
public void testOkButtonOnClickWithUserInputNumber() throws Throwable {
    this.sendKeys(Integer.toString(this.testNumber)); // 123

    this.runTestOnUiThread(new Runnable() {
        @Override
        public void run() {
            Assert.assertTrue(NumberFilterTest.this.okButton.performClick());
        }
    });

    this.getInstrumentation().waitForIdle(new Runnable() {
        @Override
        public void run() {
            Assert.assertTrue(NumberFilterTest.this.activity.isFinishing());
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T00:49:16.200

查看官方开发指南 -[活动测试](http://developer.android.com/tools/testing/activity_testing.html#NotouchMode)。

**1 确保触摸模式已关闭：**

> 要使用您从测试中发送的关键事件来控制模拟器或设备，您必须关闭触摸模式。如果您不这样做，则忽略关键事件。
> 
> ```
>  ActivityInstrumentationTestCase2.setActivityTouchMode(false); 
> ```

**2 确保屏幕已解锁：**

> 如果使用键盘保护模式禁用了模拟器或设备的主屏幕，您可能会发现 UI 测试不起作用。这是因为被测应用无法接收到 sendKeys() 发送的按键事件。
> 
> ```
>  mKeyGuardManager = (KeyguardManager) getSystemService(KEYGUARD_SERVICE);
>  mLock = mKeyGuardManager.newKeyguardLock("activity_classname");
>  mLock.disableKeyguard(); 
> ```

# javascript - accessToken过期时间可以自动刷新吗

> ID：13169261
> 
> 赞同：2
> 
> 时间：2012-11-01T00:14:26.080
> 
> 标签：javascript, facebook, facebook-access-token

我想知道是否有人知道 accessToken 到期时间是否有可能自动“刷新”？

昨晚在我的应用程序上工作时，在离开计算机几个小时后回来看到我的应用程序由于令牌达到其到期时间而触发错误。因此，我开始编写一些代码以在发生错误时刷新令牌。今天我正在尝试测试/调试该代码，但现在令牌似乎永不过期。

我有一点 Javascript，每 5 秒在屏幕上打印一次 response.authResponse.expiresIn ......我看着......随着数字的下降，它突然跳回到 7000 + （猜测大约 2 小时）独自一人，没有我自己的任何互动。

Facebook 可以自动刷新令牌吗？如果没有实际触发错误，我无法测试发生错误时触发的代码。

干杯，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T00:17:34.423

facebook javascript sdk 将自动刷新令牌，但除此之外，您必须[请求延长到期时间](https://developers.facebook.com/roadmap/offline-access-removal/)或请求新的。

# google-app-engine - Google App Engine 上的静态 mp4 视频

> ID：13169268
> 
> 赞同：1
> 
> 时间：2012-11-01T00:15:17.270
> 
> 标签：google-app-engine, video, mp4

我想在我的 Google App Engine 应用程序中有一个静态 mp4 视频文件。我将它放在“war”文件夹中，并将以下几行添加到我的 appengine-web.xml 文件中：

```
 <static-files>
      <include path="/**.mp4" />
  </static-files> 
```

不幸的是，当我运行应用程序并在浏览器中输入视频的 URL 时，什么都没有发生。我只是得到一个空白页或前一页保持不变，如果有的话。我没有收到 404 错误。服务器日志清晰。我希望浏览器播放视频或下载它。为什么它不起作用？

我使用的视频文件是 6.35MB。

我还测试了我从互联网上下载的其他一些小视频文件，并确保当它们在原始服务器上时我的浏览器正在播放它们。他们也没有工作。

我上传了 mp3 文件以及 flv 视频文件，它们运行良好。mp3文件由浏览器播放，flv文件由浏览器下载。

问题又来了，为什么我的 Google App Engine 应用程序中不能有静态 mp4 文件？他们被禁止了吗？我的文件是否以某种方式损坏？难道我做错了什么？

编辑：写这个问题时，我只使用谷歌浏览器来测试上传的视频是否有效。我刚刚检查了其他浏览器（Firefox、Opera、Internet Explorer），一切似乎都很好。我也可以用 curl 下载视频文件。事实证明，该问题仅存在于谷歌浏览器中。当我打开它的开发者工具 (F12) 并转到网络选项卡时，我可以看到请求的状态是“（已取消）”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:34:58.937

Google Chrome 开发人员工具 (F12) 在 Network 选项卡中显示，响应的 MIME 类型是 application/octet-stream。我想知道这是否可能是 Chrome 无法正确解释并取消它的原因。

我在 web.xml 文件中添加了以下几行，以确保我的视频文件具有正确的 MIME 类型集：

```
<mime-mapping>
    <extension>mp4</extension>
    <mime-type>video/mp4</mime-type>
</mime-mapping> 
```

现在一切正常。

# solr - 来自多个字段的 solr 自动完成关键字

> ID：13169270
> 
> 赞同：2
> 
> 时间：2012-11-01T00:15:45.873
> 
> 标签：solr, autocomplete

我是 Solr 的新手，想实现基于两个字段标题和描述的自动完成功能。此外，结果集还应进一步受到 id 和类别等其他字段的限制。样本数据：

```
Title: The brown fox lives in the woods
Description: The fox is found in the woods where brown leaves cover the ground. The animal's fur is brown in color and has a long tail. 
```

所需的自动完成结果：

```
brown fox
brown leaves
brown color 
```

以下是 schema.xml 中的相关条目：

```
<fieldType name="autocomplete" class="solr.TextField" positionIncrementGap="100">
 <analyzer type="index">
   <tokenizer class="solr.WhitespaceTokenizerFactory"/>
   <filter class="solr.LowerCaseFilterFactory"/>
   <filter class="solr.EdgeNGramFilterFactory" minGramSize="2" maxGramSize="25" />
 </analyzer>
 <analyzer type="query">
   <tokenizer class="solr.WhitespaceTokenizerFactory"/>
   <filter class="solr.LowerCaseFilterFactory"/>
 </analyzer>
</fieldType>

<field name="id" type="int" indexed="true" stored="true"/>
<field name="category" type="string" indexed="true" stored="true"/>
<field name="title" type="text_general" indexed="true" stored="true"/>
<field name="description" type="text_general" indexed="true" stored="true"/>

<field name="ac-terms" type="autocomplete" indexed="true" stored="false" multiValued="true" omitNorms="true" omitTermFreqAndPositions="false" />
<copyField source="title" dest="ac-terms"/> 
<copyField source="description" dest="ac-terms"/> 
```

查询请求：

```
http://localhost:9090/solr/select?q=(ac-terms:brown) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T23:56:12.163

使用 ShingleFilterFactory 解决了以下配置：

```
<fieldType name="autocomplete" class="solr.TextField" positionIncrementGap="100">
  <analyzer>
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
    <filter class="solr.ShingleFilterFactory" maxShingleSize="2" outputUnigrams="false"/>
    <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
  </analyzer>
</fieldType>

<field name="ac-terms" type="autocomplete" indexed="true" stored="false" multiValued="true" omitNorms="true" omitTermFreqAndPositions="false" />
<copyField source="title" dest="ac-terms"/>
<copyField source="description" dest="ac-terms"/> 
```

查询请求：

```
http://localhost:9090/solr/select?q=&facet=true&facet.field=ac-terms&facet.prefix=brown 
```

结果：

```
brown color
brown fox
brown leaves 
```

希望这可以帮助某人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:50:44.943

如何创建一个字段`spellcheck_text`并使用复制字段功能以便`title`和`description`自动注定`spellcheck_text`？

> ...指示 Solr 您希望它复制它在添加到索引的文档的“源”字段中看到的任何数据，在该文档的“目标”字段中。...**原始文本**从“源”字段发送到“目标”字段，然后调用任何为源字段或目标字段配置的分析器。

[http://wiki.apache.org/solr/SchemaXml#Copy_Fields](http://wiki.apache.org/solr/SchemaXml#Copy_Fields)

# c# - 在嵌套控件中放置目标

> ID：13169272
> 
> 赞同：2
> 
> 时间：2012-11-01T00:15:58.100
> 
> 标签：c#, drag-and-drop

在 win 表单中，我放置了一个面板控件（父级），在 DragDrop 事件中，我在该父级（子级）内创建另一个面板。现在，当我将任何东西拖到子控件上时，事件只会在父面板上触发。

如何将事件传递给子控件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T01:35:26.073

我在这里找到了问题。父级上的 DragEnter 事件正在消耗 DragEffect，而与被丢弃的对象类型无关。将方法更改为仅使用特定对象允许事件传播。[从这里](http://msdn.microsoft.com/en-us/library/system.windows.uielement.drop%28v=vs.95%29.aspx)得到提示。

# java - StackOverflowError 与递归

> ID：13169279
> 
> 赞同：2
> 
> 时间：2012-11-01T00:17:12.877
> 
> 标签：java, exception, recursion, compiler-errors, stack-overflow

谁能告诉我为什么我会收到这个错误？这真的让我很烦。我要做的是找到表达式 2^k +1 的总和，因为 k 的范围从 1 到 n。

```
import java.util.*;

public class mySums
{
private static double n;

public static void main(String[] args)
{
    recurSum(4);
    System.out.println();
}

/*  public static void iterativeSum (int num)
{

}
*/
public static double recurSum (double num)
{
    if (n==1){
      return 1;}
    else {
      return (Math.pow(2.0, n) +1) + recurSum(n-1);}
}
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T00:19:02.803

这是因为您使用`n`而不是`num`在您的`recurSum`. `n`是一个永远不会改变的静态变量；你应该删除它。`num`另一方面，是您传递给的参数`recurSum`；它的值随着您降低递归调用的级别而降低，最终击中`1`并让您退出：

```
public static double recurSum (double num) {
    if (num==1) {
        return 1;
    } else {
        return (Math.pow(2.0, num) +1) + recurSum(num-1);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T00:19:46.110

由于精度问题，切勿将 "==" 与 double 一起使用，因此您的递归永无止境。

将其更改为

```
if (n <= 1) 
```

此外，我刚刚注意到该函数接受一个参数“num”，因此函数中未定义“n”，但我假设这只是一个错字。

# asp.net-mvc - 生成 N 个用户控件（部分视图）

> ID：13169289
> 
> 赞同：1
> 
> 时间：2012-11-01T00:18:53.350
> 
> 标签：asp.net-mvc, webforms, html.renderpartial

我正在尝试将项目从 Web 表单迁移到 mvc。我需要页面（视图），我可以在其中呈现 N 部分视图并提交数据。模型应如下所示：

```
 public class ContactInfo
    {
        Contact customer{get;set;}
        List<Contact> guests {get;set;}
    } 
```

谁能帮我这个。我知道@HTML.RenderPartial，但我在提交该数据时遇到问题。我遇到的另一个问题是某些字段是必需的，具体取决于它们所属的联系人类型。起初，如果我可以提交该数据，那将有很大帮助。稍后会找到必填字段的解决方案，可能是一些自定义验证器或其他东西。正如我所说的那样，我对此并不陌生，所以这听起来可能很愚蠢。

# php - 比较 2 个数组并检查第 1 个数组的键是否在第 2 个中彼此靠近

> ID：13169292
> 
> 赞同：0
> 
> 时间：2012-11-01T00:19:01.623
> 
> 标签：php, arrays

所以，我有两个数组。首先`$main`：

```
(
    [0] => 4035
    [1] => 10065
    [2] => 10034
    [3] => 10039
    [4] => 4035     // <- this is key 0 from $inmain
    [5] => 4035     // <- this is key 2 from $inmain
    [6] => 4096     // <- this is key 1 from $inmain
) 
```

第二个`$inmain`看起来像这样：

```
(
    [0] => 4035
    [1] => 4096
    [2] => 4035
) 
```

我想检测数组`$inmain`中的所有键是否彼此“接近”（无论顺序如何） 。`$main`例如，您可以看到它们现在（但顺序不同）在键 4、5、6 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T00:39:30.880

```
$close = false;

$perm = compute_all_permutations($inmain); // perm is a set of permutations

for($i = 0; $i < (count($main) - count($inmain)); $i++)
{
    $subperm = array();

    for($j = 0; $j < count($inmain); $j++)
    {
        $subperm[$j] = $main[$i + $j];
    }

    if($subperm is in $perm)
    {
        $close = true;
    }
}

if($close)
{
    // keys are close
}
else
{
    // keys aren't close
} 
```

复杂度是 O(N*M!) 其中 N 是 $main 的长度，M 是 $inmain 的长度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T00:39:35.340

此功能可能对您有所帮助：

```
function arrayclose($main, $inmain, $proximity=5/*adjust default here, or set on your function call*/){
 foreach($inmain as $val){
   $isclose=false;
   foreach($main as $val2){
     if(abs($val-$val2) <=$proximity)
       $isclose=true;
   }
   if(! $isclose) return false;
 }
 return true;
} 
```

它在您要检查的所有项目上循环。然后在里面，它在更大的列表上循环。较小数组中的每个元素都必须在`$proximity`. 如果没有命中，立即返回 false。如果它通过所有循环而不返回 false，则意味着一切都在其中，`$proximity`所以我们返回 true。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T01:11:44.540

我想我会像这样将这些数组转换为“字符串”： `$mainstr = "1000111"`然后`$inmainstr = "111"`使用 strpos()

# php - PHP：如何递归解决 DI 依赖关系？

> ID：13169294
> 
> 赞同：0
> 
> 时间：2012-11-01T00:19:03.707
> 
> 标签：php, dependency-injection, inversion-of-control

递归解决依赖容器依赖关系的最简单方法是什么？我正在尝试构建自己的 DI 容器并被困在这个阶段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T00:29:21.847

实际上，已经有很多很棒的 DI 容器 - 如果你无法抗拒创建自己的容器，它们实际上会帮助你理解这个想法。

至少看看[Pimple](http://pimple.sensiolabs.org/)以及 Symfony 2 和 Zend Framework 2 的 DI 容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-10T06:33:55.337

为了好玩，我编写了自己的 IOC 容器，目的是成为最小/最快/最不稳定的容器 ( [https://github.com/niclaslindberg/webx-ioc/](https://github.com/niclaslindberg/webx-ioc/) )。

找到递归策略并没有什么神奇之处，因为你的类/接口已经以自然顺序相互依赖。只需遵循依赖链，就可以了。

# php - 为 IIS 中的每个请求从根目录加载 index.php

> ID：13169295
> 
> 赞同：1
> 
> 时间：2012-11-01T00:19:03.683
> 
> 标签：php, iis

我在一个共享的 IIS 主机上，老实说，我不知道如何实现这一点。index.php 页面位于主机的根目录中，而不是为每个页面创建目录，是否可以为每个页面请求加载 index.php？

例子：

用户请求 http:foo.com/bar/（根文件夹中不存在“bar”目录）

无论目录是否存在，服务器都会为[http://foo.com/index.php提供服务。](http://foo.com/index.php)

我已经习惯了 Apache 通过 htaccess 执行此操作的方法，但我完全不知道如何在 IIS 中完成此操作。我能想象的唯一不涉及 htaccess 的解决方法是将 404 错误页面设置为 /index.php，但这会阻止 GET 变量通过 URL 传递。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T00:48:26.080

我是 php 的新手，我只弄乱了 apache，但是你能把你的 404 页面重定向到 index.php 吗？

抱歉，如果这让我听起来像个菜鸟。

# ruby-on-rails - 无法在 heroku 上部署我的应用程序，因为我无法迁移数据库

> ID：13169296
> 
> 赞同：0
> 
> 时间：2012-11-01T00:19:20.470
> 
> 标签：ruby-on-rails, heroku

我正在尝试将一个应用程序部署到在我的本地主机上运行良好的 heroku。我在我的本地机器上使用 sqlite。我设法部署但是当我尝试使用种子数据迁移数据库时

我收到以下错误。

```
C:\Users\WASSWA SAM\railsapps\UIDassignment [master +27 ~0 -0 !]> heroku run rak
e db:setup
Running `rake db:setup` attached to terminal...  !    autoupdate in progress
up, run.1
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support
for these plugins will be removed in Rails 4.0\. Move them out and bundle them i
n your Gemfile, or fold them in to your app as lib/myplugin/* and config/initial
izers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonr
ails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required
)> at /app/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support
for these plugins will be removed in Rails 4.0\. Move them out and bundle them i
n your Gemfile, or fold them in to your app as lib/myplugin/* and config/initial
izers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonr
ails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required
)> at /app/Rakefile:7)
d4pj1nq6eo44fj already exists
rake aborted!
uninitialized constant User

Tasks: TOP => db:schema:load => environment
(See full trace by running task with --trace) 
```

任何线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T01:07:50.210

`DEPRECATION WARNING`只是警告你，你有一些插件将在 Rails 4.0 中被弃用。

您应该关心的唯一错误消息是`d4pj1nq6eo44fj already exists`，这意味着您已经在 heroku 上拥有此应用程序的数据库。

也许你想做迁移？

`heroku run rake db:migrate`

# php - 在查询数据库之前使用模型进行验证

> ID：13169298
> 
> 赞同：-2
> 
> 时间：2012-11-01T00:19:42.067
> 
> 标签：php, validation, cakephp

我可以这样做以在表格中搜索电子邮件。

```
// controller method
public function forgot_password() {
    if ($this->Session->read('Auth.User')) {
        $this->redirect(array('action' => 'add'));
    } else {
        if ($this->request->is('post') || $this->request->is('put')) {
            $user = $this->User->findByEmail($this->request->data('User.email'));
            if ($user) {
                    $this->request->data['User']['id'] = $user['User']['id'];
                    $this->request->data['User']['random_string'] = $this->String->random();
                    unset($this->request->data['User']['email']);
                    $this->User->save($this->request->data);
                    // $this->_sendEmail($user);
                    $this->Session->setFlash(__('Instructions has been sent to your email'), 'flash');
                    $this->redirect(array('action' => 'forgot_password'));

            } else {
                // passed! do stuff
            }
        }
    }
}

// validate in the model
public $validate = array(
    'email' => array(
        'required' => array(
            'rule' => array('notEmpty'),
            'message' => 'An Email is required'
        ),
        'email' => array(
            'rule' => array('email'),
            'message' => 'Email is invalid'
        ),
        'isUnique' => array(
            'rule' => array('isUnique'),
            'message' => 'Email is already in use'
        )
    ),
    'password' => array(
        'required' => array(
            'rule' => array('notEmpty'),
            'message' => 'A password is required'
        )
    ),
    'role' => array(
        'valid' => array(
            'rule' => array('inList', array('admin', 'author')),
            'message' => 'Please enter a valid role',
            'allowEmpty' => false
        )
    )
); 
```

上面的代码工作正常。

我只是想在查询数据库之前验证电子邮件是有效电子邮件还是空电子邮件。我想出了下面的那个。我遇到的问题是将用户设置为`$this->request->data`. 每当我验证时，它都会通过 isUnique 规则运行并失败。

```
public function forgot_password() {
    if ($this->Session->read('Auth.User')) {
        $this->redirect(array('action' => 'add'));
    } else {
        if ($this->request->is('post') || $this->request->is('put')) {
            $this->User->set($this->request->data);
            if ($this->User->validates()) {
                $user = $this->User->findByEmail($this->request->data('User.email'));
                if ($user) {
                    $this->request->data['User']['id'] = $user['User']['id'];
                    $this->request->data['User']['random_string'] = $this->String->random();
                    unset($this->request->data['User']['email']);
                    $this->User->save($this->request->data);
                    // $this->_sendEmail($user);
                    $this->Session->setFlash(__('Instructions has been sent to your email'), 'flash');
                    $this->redirect(array('action' => 'forgot_password'));
                }
            }
        }
    }
} 
```

有人做过类似于我想要的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T01:50:58.587

您可以从控制器执行此操作。

```
App::uses('Validation', 'Utility');
if (Validation::email($this->request->data('User.email'))) {
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T02:13:41.623

我同意@Dave 的观点，您不太清楚自己要做什么。

首先，您对请求数据的访问可能应该是 $this->request->data['User']['email']; 如果您以标准表单助手格式发布数据。

如果值为空或电子邮件规则失败，我很确定在保存调用中查询数据库之前模型验证会失败。由于 notEmpty 是第一条规则，因此验证实用程序会在查询数据库之前对其进行检查。如果失败，则将跳过该字段并且不进行数据库调用（只要“last”不等于 false。同样适用于电子邮件规则，因为 cake 对该规则使用正则表达式模式。您可以遵循事件链通过查看 Model.php 中的保存功能。

如果不为空并且电子邮件规则通过，最终您将不得不查询数据库以查找地址是否已存在。

# python - python子进程文件不存在

> ID：13169302
> 
> 赞同：2
> 
> 时间：2012-11-01T00:20:11.780
> 
> 标签：python, operating-system, subprocess, execute, os.system

我发誓我什么都没改变，这在一周前还有效。然而现在每次我用 os.system 或 subprocess.call 调用路径时，我都会收到错误“错误：文件 NBK.swn 不存在”。

这是我的代码：

```
import subprocess 
subprocess.call('"H:/2012/yada yada yada/swanrun" NBK') 
```

为了让它正常运行，我在 H:/2012/yada yada yada/ 中打开命令提示符并输入“swanrun NBK”，它工作正常。如果我运行相同的代码，但删除最后的“NBK”，即 swanrun 应该运行的文件，swanrun 成功运行，但当然不知道要运行哪个文件。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T02:26:42.870

Subprocess 需要一个列表，而不是字符串。如果您只提供一个字符串，它会将整个内容视为可执行名称，并且不会将其拆分为空格。它试图找到一个名为“H:/2012/yada yada yada/swanrun”NBK 的程序，该程序将是一个具有该标题的文件。而是尝试`subprocess.call(['"H:/2012/yada/yada yada/swanrun"', 'NBK'])`使用参数“NBK”加载程序“H:/2012/yada/yada yada/swanrun”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T00:43:47.450

使用完整路径`"NBK"`，或设置当前工作目录：

```
import subprocess 

path = "H:/2012/yada yada yada/"
subprocess.call('"H:/2012/yada yada yada/swanrun" NBK', cwd=path) 
```

编辑：通常，如果文件参数不是完全限定的路径，应用程序将在其预定义的数据目录（如果有）、可执行文件的目录、当前工作目录或相对于当前工作目录或可执行文件的某个目录中查找目录。该`cwd`选项设置工作目录，您应该将其设置为您可以从中`swanrun NBK`成功运行“”的目录，如您的问题中所述。

# r - httr github-API 回调 URL 问题

> ID：13169305
> 
> 赞同：16
> 
> 时间：2012-11-01T00:20:24.100
> 
> 标签：r, github, github-api, httr

我现在也在使用`httr`v0.2 包来使用 github api。但是我很难通过进入`oauth2.0(...)`应用程序浏览器页面的部分，单击“允许”，然后重定向到回调 URL 页面。

httr github演示建议使用回调URL，`http://localhost:1410`但是当我被重定向到该页面时，谷歌浏览器建议它无法连接到该页面并且它被重定向到的页面是`http://localhost:1410/?error=redirect_uri_mismatch&state=DZNFcm8tnq`......所以我尝试了一堆其他端口和整体 URL 都没有成功...

另一个有效的回调 URL 和 URL 是什么？

下面是我使用的代码

```
require(httr)
## Loading required package: httr
github.app <- oauth_app("github","xxxxx", "xxxxxxxxxxxxxxx")
github.urls <- oauth_endpoint(NULL, "authorize", "access_token",base_url = "https://github.com/login/oauth")
github.token <- oauth2.0_token(github.urls,github.app)
## Loading required package: Rook
## Loading required package: tools
## Loading required package: brew
## starting httpd help server ... done
## Waiting for authentication in browser... 
```

这是当我被定向到具有“允许”按钮的页面时，我单击该按钮后我被重定向到无法连接到本地主机的谷歌浏览器页面：1410

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-05-22T14:55:54.943

您应该将`httr`软件包更新到最新版本（现在是 0.3 - 在 CRAN 中可用）。`httr`我从（0.3版）演示中找到了相关示例：

```
library(httr)

# 1\. Find OAuth settings for github:
#    http://developer.github.com/v3/oauth/
oauth_endpoints("github")

# 2\. Register an application at https://github.com/settings/applications
#    Insert your values below - if secret is omitted, it will look it up in
#    the GITHUB_CONSUMER_SECRET environmental variable.
#
#    Use http://localhost:1410 as the callback url
myapp <- oauth_app("github", "56b637a5baffac62cad9")

# 3\. Get OAuth credentials
github_token <- oauth2.0_token(oauth_endpoints("github"), myapp)

# 4\. Use API
req <- GET("https://api.github.com/rate_limit", config(token = github_token))
stop_for_status(req)
content(req) 
```

您可以通过`demo("oauth2-github", package = "httr", ask = FALSE)`命令获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:40:23.667

您是通过网络应用程序提供此服务还是扩展程序/插件？重定向 url 必须与您在设置 github 应用程序时指定的回调 url 来自同一主机。请参阅[此处](http://developer.github.com/v3/oauth/#redirect-urls)了解更多信息。如果您在扩展程序中使用 API，那么我不会有太大帮助。当我遇到你的问题时，这就是我正在寻找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-23T14:17:27.230

我有同样的错误。但是在我安装 httpuv 包之后它工作正常。安装 httpuv 包后，运行此代码后，

> github_token <- oauth2.0_token(oauth_endpoints("github"), myapp)

您应该能够看到“身份验证完成”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-15T17:24:29.550

我确实遇到了同样的错误和问题，通过根据演示将主页 URL 修改为正确的 URL 来解决问题：http: [//github.com](http://github.com) 所以最终问题不在回调 URL 中，而是在主页 URL 中，您也可以在 oauth2.0_token() 函数中使用 cache=F 参数。

祝你好运。

# cocos2d-iphone - 触摸 cocos2d 后添加 Sprite

> ID：13169306
> 
> 赞同：2
> 
> 时间：2012-11-01T00:20:30.107
> 
> 标签：cocos2d-iphone, touch, sprite, addchild

我的目标是在用户触摸屏幕后向屏幕添加一个精灵 leftOn。

这是我的代码：

```
-(void)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event{
     CGPoint location = [touch locationInView:[touch view]];
     location = [[CCDirector sharedDirector]convertToGL:location];

if (CGRectContainsPoint([leftOff boundingBox],location)) {
    CCLOG(@"Left Pressed");
    [self addChild:leftOn];

} 
```

}

日志始终输出“Left Pressed”，但在不添加精灵的情况下停止运行。如果我在它确实显示的 init 方法中添加精灵。此外，我尝试更改精灵的顺序，例如 [self addChild:leftOn z:2]，但它仍然不显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T07:07:35.410

“停止运行”是什么意思？你的应用程序崩溃了？确保 leftOn 不是`nil`，正如 Ben Trengrove 所说，并且该精灵没有添加到另一个父级。这两种情况都可能导致崩溃。如果您的应用程序崩溃，从控制台查看错误会很有用。它可以帮助了解问题出在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T07:19:02.783

我刚开始使用 cocos2d，但是我看到的演示在 ccTouchesEnded 添加了精灵，同时使用 ccTouchesBegan 对已经存在和被触摸的内容进行操作。

# git - 在 git 中获取父源分支的名称？

> ID：13169309
> 
> 赞同：6
> 
> 时间：2012-11-01T00:21:09.650
> 
> 标签：git

我克隆了一些 git 存储库，并做了“git branch abcd”，将我切换到从 origin/abcd 派生的分支。abcd 不是默认的原始分支。然后，我从 abcd 创建了一个功能分支“my_feature”。我想在脚本中将“git merge origin/abcd”添加到 my_feature 中，无论使用的源分支的名称如何（或者至少适用于在其他一些答案中没有描述复杂分支结构的简单情况下）混帐）。

如何找到创建当前分支的“最近”/“父”分支？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:01:18.170

这很难做好。在 git 中，分支只是指向提交的自动前进指针，提交上可以有任意数量的分支名称。考虑这种情况：

```
your master:      y1---y2---y3
                 /
master: a---b---c---d---e
                 \
feature:          f1---f2---f3---f4 
```

您在 、 、 和 签出了分支“master” `c`，并提交了`y1`、`y2`和`y3`。您的历史因此看起来像`a b c y1 y2 y3`。同时master已经升级到`d`and `e`，但是有人创建了一个特性分支并`f1`通过`f4`基于`c`. Git 无法确定您的分支来自`master`而不是`feature`，因此您最多可以选择要合并的分支。

如果您自动执行此操作，则必须应用启发式方法来选择最短的分支，最长的分支，或提交最多/最少的分支，或其他类似的东西。自然，既然有这么多的选择，对于一个`git`内置函数来说，它并不是一个真正的好选择。但是，使用 git 的“管道”功能，您可以编写自己的：

```
#!/bin/bash

# Tries to determine a good merge base from among all local branches.
# Here used, a "good" merge base is the one sharing the most recent commit
# on this branch. This function will exit 1 if no branch is found,
# or exit 2 in a tie.
#
# Untested - use at your own risk.

MAX_SEARCH=20   # only search the last 20 commits on this branch
FOUND=0
LAST_BRANCH=

# iterate through the commits, most recent first
for COMMIT in $(git rev-list --max-count=$MAX_SEARCH HEAD); do
  # check every local branch
  for BRANCH in $(git for-each-ref --format="%(refname)" refs/heads); do
    # look for the commit in that branch's history
    if (git rev-list $BRANCH | fgrep -q COMMIT); then
      echo $BRANCH
      FOUND=$((FOUND + 1))
      LAST_BRANCH="$BRANCH"
    fi
  done
  if [ $FOUND -gt 1 ]; then
    # more than one choice; exit
    exit 2
  elif [ $FOUND -eq 1 ]; then
    git merge $LAST_BRANCH
    exit 0
  fi
done
exit 1   # could not find a parent 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T01:34:34.817

对于 DVCS，没有“父分支”之类的东西。

一个分支是：

*   一个名字
*   开始提交，并且该提交可以：
    *   多个分支的一部分，来自本地仓库和上游仓库，如“ `origin`”。
    *   在分支变基后更改

查看更多：

*   “[如何判断 github 提交是针对哪个分支的？](https://stackoverflow.com/q/9360809/6309) ”
*   “ [Git：如何列出包含给定提交的分支？](https://stackoverflow.com/questions/1419623/git-how-to-list-branches-that-contain-a-given-commit) ”

脚本工作的唯一方法是记录 的名称`origin/branch`，最好记录为 a **[`git notes`](https://stackoverflow.com/questions/9839862/adding-git-notes-to-a-blob)**（因为它不会更改历史记录和 SHA1，但会添加元数据）。

# sql - 将两张表合二为一

> ID：13169314
> 
> 赞同：0
> 
> 时间：2012-11-01T00:21:59.043
> 
> 标签：sql, vb.net, linq, dataset

我需要将两个数据模式合并为一个。我有 Schema1 和 Schema2。我需要将这两个加入到 Schema3 中。此外，我有一个查询数据集的 Select 语句，但我不知道如何在包含两个表（Schema1 和 Schema2）的数据集上使用 select 语句并将它们组合到新表 schema3 中，这是一个表在由两个表的字段组成的同一数据集中。

例子

**模式 1** ID，食物，书籍，大米，洞穴

**模式 2** ID、地毯、字符串、运行

**模式 3** ID、食物、书籍、大米、洞穴、地毯、字符串、运行

使用此命令填充 Schema3 表

Sql 命令：

```
Select * Schema1 [except ID] and all fields from Schema2 [exceptID] Inner Join 
Schema2 ON Schema1.ID = Schema2.ID
Where ID = {dynamically defined variable 'X'} 
```

请原谅缺乏正确的语法。这里的主要问题再次是使用 select 语句查询数据集并用结果填充表。我没有完全连接到我的数据库，因为我已经在本地填充了一个数据集。

------编辑 ------ 我真的只需要一种从两个表的查询中创建数据行数组的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T00:29:14.813

你可以在这里使用我最近从头开始编写的这个扩展方法来解决[另一个问题](https://stackoverflow.com/q/12278978/284240)。它可以通过一个公共键合并多个表。如果没有指定键，它将只使用默认[`DataTable.Merge`](http://msdn.microsoft.com/en-us/library/fk68ew7b.aspx)方法：

```
public static DataTable MergeAll(this IList<DataTable> tables, String primaryKeyColumn)
{
    if (!tables.Any())
        throw new ArgumentException("Tables must not be empty", "tables");
    if(primaryKeyColumn != null)
        foreach(DataTable t in tables)
            if(!t.Columns.Contains(primaryKeyColumn))
                throw new ArgumentException("All tables must have the specified primarykey column " + primaryKeyColumn, "primaryKeyColumn");

    if(tables.Count == 1)
        return tables[0];

    DataTable table = new DataTable("TblUnion");
    table.BeginLoadData(); // Turns off notifications, index maintenance, and constraints while loading data
    foreach (DataTable t in tables)
    {
        table.Merge(t); // same as table.Merge(t, false, MissingSchemaAction.Add);
    }
    table.EndLoadData();

    if (primaryKeyColumn != null)
    {
        // since we might have no real primary keys defined, the rows now might have repeating fields
        // so now we're going to "join" these rows ...
        var pkGroups = table.AsEnumerable()
            .GroupBy(r => r[primaryKeyColumn]);
        var dupGroups = pkGroups.Where(g => g.Count() > 1);
        foreach (var grpDup in dupGroups)
        { 
            // use first row and modify it
            DataRow firstRow = grpDup.First();
            foreach (DataColumn c in table.Columns)
            {
                if (firstRow.IsNull(c))
                {
                    DataRow firstNotNullRow = grpDup.Skip(1).FirstOrDefault(r => !r.IsNull(c));
                    if (firstNotNullRow != null)
                        firstRow[c] = firstNotNullRow[c];
                }
            }
            // remove all but first row
            var rowsToRemove = grpDup.Skip(1);
            foreach(DataRow rowToRemove in rowsToRemove)
                table.Rows.Remove(rowToRemove);
        }
    }

    return table;
} 
```

你可以这样调用它：

```
var tables= new[] { Schema1, Schema2};
DataTable Schema3 = tables.MergeAll("ID"); 
```

**编辑**：如果您不需要新`DataTable`的合并模式，您也可以使用[`Linq-To-DataSet`](http://msdn.microsoft.com/en-us/library/vstudio/bb386977.aspx)（现在是 VB.NET）：

```
Dim schema3 = From r1 In schema1
          Join r2 In schema2 On r1.Field(Of Int32)("ID") Equals r2.Field(Of Int32)("ID")
          Select New With {
                .ID = r1.Field(Of Int32)("ID"),
                .Food = r1.Field(Of String)("Food"),
                .Book = r1.Field(Of String)("Book"),
                .Rice = r1.Field(Of String)("Rice"),
                .Cave = r1.Field(Of String)("Cave"),
                .Carpet = r2.Field(Of String)("Carpet"),
                .Strings = r2.Field(Of String)("Strings"),
                .Run = r2.Field(Of String)("Run")
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T06:01:10.840

试试这个：

```
 ''' <summary>
  ''' Merge two datatables that have a 1:1 relationship
  ''' </summary>
  ''' <param name="dtb1">Required Datatable.</param>
  ''' <param name="dtb2">Required Datatable.</param>
  ''' <param name="dtb1MatchField">Required String. Field name in dtb1 to use to match records</param>
  ''' <param name="dtb2MatchField">Required String. Field name in dtb2 to use to match records</param>
  ''' <remarks></remarks>'
  Private Function MergeDataTables(ByVal dtb1 As DataTable, ByVal dtb2 As DataTable, ByVal dtb1MatchField As String, ByVal dtb2MatchField As String) As DataTable
    Dim dtbOutput As DataTable = dtb1.Copy
    Dim lstSkipFields As New List(Of String)
    For Each dcl As DataColumn In dtb2.Columns
      Try
        dtbOutput.Columns.Add(dcl.ColumnName, dcl.DataType)
      Catch ex As DuplicateNameException
        lstSkipFields.Add(dcl.ColumnName)
      End Try
    Next dcl
    'Merge dtb2 records that match existing records in dtb1'
    Dim dtb2Temp As DataTable = dtb2.Copy
    For int2 As Integer = dtb2Temp.Rows.Count - 1 To 0 Step -1
      Dim drw2 As DataRow = dtb2Temp.Rows(int2)
      Dim o2 As Object = drw2(dtb2MatchField)
      For Each drw1 As DataRow In dtbOutput.Rows
        Dim o1 As Object = drw1(dtb1MatchField)
        If o1.ToString = o2.ToString Then
          For Each dcl As DataColumn In dtb2Temp.Columns
            If Not lstSkipFields.Contains(dcl.ColumnName) Then
              drw1(dcl.ColumnName) = drw2(dcl.ColumnName)
            End If
          Next dcl
          dtb2Temp.Rows.Remove(drw2)
        End If
      Next drw1
    Next int2
    'add rows that weren not in dtb1'
    For Each drw2 As DataRow In dtb2Temp.Rows
      Dim drw1 As DataRow = dtbOutput.NewRow
      For Each dcl As DataColumn In dtb2Temp.Columns
        drw1(dcl.ColumnName) = drw2(dcl.ColumnName)
      Next dcl
      dtbOutput.Rows.Add(drw1)
    Next drw2
    Return dtbOutput
  End Function 
```

# android - 我试图移动图像，但对于我的相对布局来说太大了？

> ID：13169315
> 
> 赞同：2
> 
> 时间：2012-11-01T00:22:05.057
> 
> 标签：android, image, imageview, image-size

我希望将图像向上移动，但如您所见，在相对布局上我不能再高了。它的尺寸完美，所以我不想缩小图像。xml代码：

```
 android:id="@+id/imageView1"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
    android:layout_above="@+id/button3"
  android:layout_alignParentLeft="true"
  android:layout_alignParentTop="true"
    android:src="@drawable/top" 
```

这里是我的截图的链接：http: [//tinypic.com/r/fuv0i/6](http://tinypic.com/r/fuv0i/6)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T00:25:38.410

去掉下面代码集的可见性，那么就可以通过代码将imageview移动到屏幕的任意位置

```
 android:layout_above="@+id/button3"
 android:layout_alignParentLeft="true"
 android:layout_alignParentTop="true" 
```

设置可见性，

```
 android:setVisibility="gone" 
```

# r - R：为绘图标题、轴标签或图例创建拉丁/希腊表达式向量

> ID：13169318
> 
> 赞同：8
> 
> 时间：2012-11-01T00:22:12.820
> 
> 标签：r, plot, special-characters, legend, tex

我想合并拉丁文和希腊文文本的向量以生成绘图标题、轴标签、图例条目等。我在下面提供了一个简单的示例。我不知道如何以原生形式呈现希腊字母。我已经尝试了, 和命令的各种组合`expression`，但是对于单个表达式的情况，我无法对容易生成混合拉丁/希腊文本的代码进行矢量化（例如，适用于单个表达式的情况） .`parse``apply``paste``expression("A ("*alpha*")")`

```
data<-matrix(seq(20),nrow=5,ncol=4,byrow=TRUE)
colnames(data)<-c("A","B","C","D")
greek<-c(" (alpha)"," (beta)"," (gamma)"," (delta)")
matplot(data)
legend(1,max(data),fill=c("black","red","green","blue"),apply(matrix(paste(colnames(data),greek,sep=""),nrow=4,ncol=1),1,expression)) 
```

你能帮我解释一下`apply()`声明中的`legend()`声明吗？它需要一些修改以产生所需的输出（即，A（α）、B（β）、C（γ）、D（δ））。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T01:10:56.527

这是一种避免 的替代方法`parse()`，并与您对@mnel 的好答案的第一条评论中提到的示例一起使用：

```
greek <- c("alpha", "beta", "gamma", "delta")
cnames <- paste(LETTERS[1:4], letters[1:4])

legend_expressions <- 
sapply(1:4, function(i) {
    as.expression(substitute(A (B), 
                  list(A = as.name(cnames[i]), B = as.name(greek[i]))))
})

matplot(data)
legend(1,max(data),fill=c("black","red","green","blue"),legend_expressions) 
```

![在此处输入图像描述](../Images/b07b4955fbfd1337ed2fd313d7788e4f.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T00:37:07.960

不要使用`apply`创建表达式向量。

而是使用 `parse(text = ...)`.

```
.expressions <- paste(colnames(data),greek,sep="")
legend_expressions <-parse(text = .expressions)

matplot(data)
legend(1,max(data),fill=c("black","red","green","blue"),legend_expressions) 
```

![在此处输入图像描述](../Images/b4669ec4fb3159cb9641adb37f304603.png)

如果要包含`~`在表达式中。鉴于您当前的工作流程，似乎最容易在调用中`sep = ''`替换为`sep = '~'``paste`

```
.expressions <- paste(colnames(data),greek,sep="~")
legend_expressions <-parse(text = .expressions)

matplot(data)
legend(1,max(data),fill=c("black","red","green","blue"),legend_expressions) 
```

![在此处输入图像描述](../Images/2295f84a8aab2e91ea5ca0109b9ec6db.png)

`sprintf`使用它来形成将成为您的表达式向量的字符串甚至可能更清楚。

如果要包含包含空格的字符串，则需要将这些字符串用引号引起来。例如。

```
greek <- c("alpha", "beta", "gamma", "delta")
other_stuff <- c('hello world','again this','and again','hello')

.expressions <- mapply(sprintf, colnames(data), other_stuff, greek, 
                       MoreArgs = list(fmt = '"%s %s"~(%s)'))

.expressions  
##                           A                           B                           C                           D 
## "\"A hello world\"~(alpha)"   "\"B again this\"~(beta)"   "\"C and again\"~(gamma)"       "\"D hello\"~(delta)" 

 legend_expressions <-parse(text = .expressions)

matplot(data)
legend(1,max(data),fill=c("black","red","green","blue"),legend_expressions) 
```

![在此处输入图像描述](../Images/fe07c3e8950d015807f5602122894e78.png)

# bash - 属性文件搜索和替换

> ID：13169319
> 
> 赞同：0
> 
> 时间：2012-11-01T00:22:34.690
> 
> 标签：bash, shell, unix, scripting

我有两个属性文件，我想用文件 B 中的任何匹配键/值条目替换文件 A 中的键/值对。文件 A 的条目将比文件 B 多 - 预计这两个文件不会具有完全相同的条目数。此外，文件 B 可能包含文件 A 中未包含的条目。

举个例子：

```
File A
"GB" = "United Kingdom";
"SE" = "Sweden";
"BR" = "Brazil";
"FR" = "France";
"ES" = "Spain";
"DE" = "Germany";

File B
"GB" = "Regno Unito";
"SE" = "Svezia";
"BR" = "Brasile";
"BR" = "Brasile";
"CL" = "Cile";

Desired Result
"GB" = "Regno Unito";
"SE" = "Svezia";
"BR" = "Brasile";
"FR" = "France";
"ES" = "Spain";
"DE" = "Germany";
"CL" = "Cile"; 
```

是否可以使用 bash 执行此搜索和替换？

谢谢，

肖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T00:34:51.173

这是一种使用方法`GNU awk`：

```
awk -F " = " 'FNR==NR { array[$1]=$2; next } $1 in array { sub ($2, array[$1]) }1' fileb filea 
```

结果：

```
"GB" = "Regno Unito";
"SE" = "Svezia";
"BR" = "Brasile";
"FR" = "France";
"ES" = "Spain";
"DE" = "Germany"; 
```

* * *

***编辑：***

您可以在发生替换后简单地删除数组元素。然后在脚本的最后，打印出剩下的内容：

```
awk -F " = " 'FNR==NR { array[$1]=$2; next } $1 in array { sub ($2, array[$1]); delete array[$1] }1; END { for (i in array) print i FS array[i] }' fileb filea 
```

结果：

```
"GB" = "Regno Unito";
"SE" = "Svezia";
"BR" = "Brasile";
"FR" = "France";
"ES" = "Spain";
"DE" = "Germany";
"CL" = "Cile"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T03:39:26.367

以下仅 bash 脚本将输出您要求的结果：

```
#!/bin/bash

# Identify our files. If you want, test for their existence before proceeding.
fileA="$1"
fileB="$2"

# Define an associated array
declare -A countries

# Read our initial data
while read cc junk name; do
 if [[ -n "$cc" ]]; then
   countries["$cc"]="$name"
 fi
done < "$fileA"

# Overwrite array elements with updated values
while read cc junk name; do
 if [[ -n "$cc" ]]; then
   countries["$cc"]="$name"
 fi
done < "$fileB"

# Print the results
for cc in "${!countries[@]}"; do
  echo "$cc = ${countries[$cc]}"
done 
```

结果的顺序不会完全相同，但我怀疑这并不重要。如果是，您可以创建一个额外的数组，其索引是一个计数器，然后代替 final `for cc in ...`，您可以简单地遍历该数组以获取`$countries`正确顺序的索引。让我知道这是否重要而您无法弄清楚。

我只在此处发布此内容，因为您要求提供 bash 解决方案。Steve 的`awk`脚本要简洁得多，而且可能要快得多。（只是猜测。可能甚至不值得花时间对其进行基准测试。）

# c# - SqlDataReader 的扩展方法？

> ID：13169330
> 
> 赞同：1
> 
> 时间：2012-11-01T00:23:31.707
> 
> 标签：c#, extension-methods

我们在一个来自 VB6 的旧项目上运行了一个转换工具。

我们用 Ado.Net 代替 OLEDB，用 SqlDataReaders 代替 RecordSets。

但是转换后的代码总是做一个`rs.Fields['FirstName']`引用，我猜这将是`rs['FirstName']`数据库阅读器（其中 rs 现在是 q SqlDataReader.

有没有一种方法可以在 SqlDataReader 上创建一个扩展方法，而不是遍历所有代码，然后使用“ `Fields['FieldName']`”？

这是我目前的尝试：

```
public static class SqlUtils
    {
        public static object Fields(this SqlDataReader dataReader, string fieldname)
        {
            return dataReader[fieldname];
        }
    } 
```

但是，这适用于：

```
Console.WriteLine(reader.Fields("First").ToString()); 
```

我需要处理：

```
Console.WriteLine(reader.Fields["First"].ToString()); 
```

注意，[]，而不是 ()。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T01:07:50.507

扩展方法实际上只是静态方法。由于没有“静态索引器”，因此您不能拥有使用索引器语法的扩展方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T21:12:07.060

这个静态索引器工作得很好......

```
public static string GetDRItem(this IDataReader dr, string colName)
{
    return dr[colName].ToString();
} 
```

# javascript - Spinejs - 当#route已经在url中时如何启动应用程序？

> ID：13169332
> 
> 赞同：0
> 
> 时间：2012-11-01T00:23:32.833
> 
> 标签：javascript, url-routing, spine.js

我开始重构一些“遗留”代码，其中许多 js 文件由于脚本的一两个特定参数而重复。我的想法是将所有文件合并为一个，删除代码重复并根据路由区分这些参数。我想使用 Spine.js

示例代码：

```
$(function () {

    var SApp = Spine.Controller.create({
        init:function () {
            this.routes({
                "product/direct":function () {
                    pId = $('#product-id').val();
                    magicFunction(pId);
                },
                "product/suggested":function () {
                    products = $('#parent-products').find('li');
                    $.each(products, function (index, product) {
                        pId = $(product).attr('data-id');
                        magicFunction(pId);
                    });                    
                }
            })
        }
    });

    Spine.Route.setup();
    new SApp();
}); 
```

每条路线都是一个单独的页面

```
<a href="/page1.html#product/direct">1</a>   
<a href="/page2.html#product/suggested">2</a> 
```

当我第一次访问页面 /page2.html 然后粘贴 #product/direct 部分并单击 enter 时它工作正常，但是当用户被重定向到带有 #... 部分的页面并且 Spinejs 在第一次事件调用之前无法工作时会出现问题.

是否可以告诉 Spine 现在应该使用当前的 url，所以 Spin 不会等待任何事件？诸如自动启动或加载触发器之类的东西？

- - - - - - - - - - - - - - - 编辑 - - - - - - - - - - ----------
我找到了肮脏的解决方案：
不幸的是，在重定向的情况下，它需要多花一个页面请求。

```
if (app.config.startAction) {
    location = window.location.href;
    if (location.indexOf('#') > 0) {    //if user reload a page
        location = location.split('#')[0];
        window.location.href = location;
    }
    window.location.href = location + '#' + app.config.startAction;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T02:22:10.700

在文档中找不到解决方案。

我所做的是强制导航到“家”

```
Spine.Route.setup();
Spine.Route.navigate("/"); // force to go "home" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-30T01:35:51.680

对于将来可能偶然发现此问题的任何人，请尝试在初始路由器设置中添加一个计时器：

```
setTimeout (-> Spine.Route.setup()), 200 
```

# javascript - 在passport.authenticate上超时，不知道为什么

> ID：13169333
> 
> 赞同：1
> 
> 时间：2012-11-01T00:23:57.710
> 
> 标签：javascript, node.js, passport.js

当我`POST`到调用的端点时`passport.authenticate`，我没有得到响应，服务器也没有继续执行中定义的策略`passport.use`。在 Heroku 上，我收到错误 H12（超时），我的浏览器在本地响应“未收到数据”。

我使用有此问题的代码[签入了 GitHub 。](https://github.com/thure/baxter-app/tree/12d623f08b6659406c632c4821b1aed582dfe50b)

这不是数据库问题—— a`console.log`之前调用过`.findOne`，但该消息从未被记录。它似乎只停留在`passport.authenticate`. 为什么？

这里发生了什么？我还能做些什么来诊断吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T01:24:59.140

结果`passport.authenticate(…)`返回一个中间件风格的函数。

我以错误的方式调用它打破了响应链。在我的 site.js 模块中，`exports.login`应该设置为的结果`passport.authenticate(…)`，它不应该调用它，即：

```
exports.login = passport.authenticate('local', {
  successRedirect: '/result',
  failureRedirect: '/login'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T00:44:44.380

尝试将app.js 的[第 38 行更改为：](https://github.com/thure/baxter-app/blob/12d623f08b6659406c632c4821b1aed582dfe50b/app.js#L38)

```
User.findOne({ id: id }, ...) 
```

或者

```
User.findById(id, ...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-11T12:12:56.793

尝试将此添加到您的护照配置中

```
 passport.serializeUser((user, done) => {
    done(null, user);
  });
  passport.deserializeUser((id, done) => {
    User.findById(id).then(user => done(null, user));
  }); 
```

# ruby-on-rails - 无法在 OS X Mountain Lion 上安装 RMagick

> ID：13169337
> 
> 赞同：3
> 
> 时间：2012-11-01T00:24:30.640
> 
> 标签：ruby-on-rails, ruby-on-rails-3, imagemagick, osx-mountain-lion, rmagick

我已经为此苦苦挣扎了一段时间。我正在运行 Mac OS 10.7 (Mountain Lion)，并且正在尝试安装 RMagick gem，以便可以在我的 Rails 3 应用程序中使用它。我已经用自制软件安装了 imagemagick，这似乎成功完成了。我还安装了 XQuartz 包。当我将 'rmagick' 添加到我的 gemfile 并运行 bundle install 时，我收到此错误：

```
Installing rmagick (2.13.1) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /Users/Andrew/.rvm/rubies/ruby-1.9.3-p125/bin/ruby extconf.rb 
checking for Ruby version >= 1.8.5... yes
extconf.rb:128: Use RbConfig instead of obsolete and deprecated Config.
checking for clang... yes
checking for Magick-config... no
Can't install RMagick 2.13.1\. Can't find Magick-config in /Users/Andrew/.rvm/rubies/ruby-1.9.3-p125/bin:/Users/Andrew/.rvm/gems/ruby-1.9.3-p125@global/bin:/Users/Andrew/.rvm/bin:/usr/bin:/bin:/usr/sbin:/sbin

*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/Andrew/.rvm/rubies/ruby-1.9.3-p125/bin/ruby

Gem files will remain installed in /Users/Andrew/.rvm/gems/ruby-1.9.3-p125@global/gems/rmagick-2.13.1 for inspection.
Results logged to /Users/Andrew/.rvm/gems/ruby-1.9.3-p125@global/gems/rmagick-2.13.1/ext/RMagick/gem_make.out
An error occured while installing rmagick (2.13.1), and Bundler cannot continue.
Make sure that `gem install rmagick -v '2.13.1'` succeeds before bundling.

Process finished with exit code 5 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T00:52:12.070

按照以下步骤修复它。啊！

1.  安装 XCode 4.4
2.  安装命令行工具（来自 Xcode 中的首选项）
3.  安装 XQuartz
4.  安装 ImageMagic (brew install —vd imagemagick)
5.  sudo ln -s /usr/bin/llvm-gcc-4.2 /usr/bin/gcc-4.2
6.  mdfind MagickWand.h（获取 MagickWand.h 文件的路径）
7.  C_INCLUDE_PATH=/usr/local/Cellar/imagemagick/6.7.7-6/include/ImageMagick gem install rmagick

# c# - 插入并返回插入的行数（非重复）和记录 ID（新的或重复的）

> ID：13169338
> 
> 赞同：2
> 
> 时间：2012-11-01T00:24:32.207
> 
> 标签：c#, mysql, insert, insert-update

我在 C# 中有一个插入方法。基本上如下，其中 url 是表中的唯一约束：

```
INSERT INTO pages
(url) VALUES ('http://www.google.com'); 
```

在一个查询中，我想得到：

1.  插入行或已存在条目的 id
2.  插入的行数（不计算已经存在的重复项）

我最初使用 ExecuteNonQuery 调用插入，并捕获 MySQL 重复异常（可以使用 INSERT IGNORE 但很高兴知道它没有因为查询的另一部分而失败）。这使我能够准确计算实际插入的行数，但没有提供在重复的情况下检索 id 的方法（如果行是重复的，command.LastInsertedId 返回 -1）。

然后我将语句更改为以下内容：

```
INSERT INTO pages
(url) VALUES ('http://www.google.com')
ON DUPLICATE KEY UPDATE id= LAST_INSERT_ID(id); 
```

这将正确更新 command.LastInsertedId 属性，但当然不再引发异常，并且由于 UPDATE catch 从 ExecuteNonQuery 返回 1 并且似乎无法确定该行是插入还是重复。

使用 .NET (C#) 适配器（最好使用单个语句）确定记录 ID 和插入行数时，我最好的选择是什么？

有没有办法可以设置查询中受影响的行数？有没有一种方法可以在不显着性能下降的情况下为我提供两条信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T01:44:31.723

我不确定这是否适用于 mySql，但我会采用 INSERT + SELECT 方法。就像是：

```
declare @prevID <column type>
select @prevID = id from pages where url = 'http://www.google.com'
if @prevID is null
begin
    insert into pages(url) values ('http://www.google.com')
    select 1, @@identity
end
else
    select 0, @prevID 
```

# javascript - 擒纵机构不良 JSHint

> ID：13169340
> 
> 赞同：4
> 
> 时间：2012-11-01T00:25:05.497
> 
> 标签：javascript, jshint

有人知道为什么我`Bad escapement`使用以下代码在 JSHint 上出现错误吗？

```
var regexS = '[\?&]' + name + '=([^&#]*)'; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T00:28:18.033

只是双重逃避`\`

```
var regexS = '[\\?&]' + name + '=([^&#]*)'; 
```

即使我猜测您将使用此字符串作为`Regex`对象，字符串中的字符也必须正确转义。默认情况下，a`\`会尝试转义下一个字符。如果您添加一个额外的 like `\\`，它会转义原始字符串`\`并计算为`\`最终字符串中的一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T00:27:27.930

\? 不是有效的转义字符。尝试将其替换为 \\.

所以它看起来像：

```
var regexS = '[\\?&]' + name + '=([^&#]*)'; 
```

请记住，“\”会转义后面的字符。这就是为什么 \\ 以单斜杠出现的原因（如果您查看此问题的来源，您会发现我需要将 \ 翻两番）。

其他常见的转义序列是 \n 换行符和 \t 制表符。

# function - 未在范围内声明的函数与函数的多个定义

> ID：13169342
> 
> 赞同：1
> 
> 时间：2012-11-01T00:25:23.480
> 
> 标签：function, include, scope

我正在使用 Code::Blocks 制作一个简单的游戏。我正在尝试学习如何保持良好的文件结构，但我显然遗漏了一些东西，因为我似乎无法从 .cpp 文件中定义的对象调用程序范围函数。

所以，我有一个对象 tank，它在头文件 include/tank.h 中声明，并在 .cpp 文件 src/tank.cpp 中定义（这些是 Code::Blocks 为当我使用文件-> 新建-> 类菜单时的我）。我还有一个函数 apply_image() 的头文件，名为 apply.h。apply.h 包含在 main.cpp 文件中。

当 src/tank.cpp 看起来像这样时：

```
#include "tank.h"

void tank::drawMe(SDL_Surface* screen)
{
    apply_surface(x,y, tankImg, screen);
} 
```

我收到一个编译器错误，内容为 |error: 'apply_surface' is not declared in this scope| 所以我为“apply.h”添加了一个#include，如下所示：

```
#include "tank.h"
#include "apply.h"

void tank::drawMe(SDL_Surface* screen)
{
    apply_surface(x,y, tankImg, screen);
} 
```

现在我得到一个编译器错误，它读取 |multiple definition of `apply_surface(int, int, SDL_Surface*, SDL_Surface*)'| 我赢不了！

我已经查阅了一些关于 C++ 的文本，但我看不出我在做什么不同。任何澄清表示赞赏，谢谢！

# c++ - 为什么 basic_stringbuf 和 basic_filebuf 移动构造函数具有实现定义的行为？

> ID：13169344
> 
> 赞同：4
> 
> 时间：2012-11-01T00:25:47.860
> 
> 标签：c++, c++11, iostream

从我的 C++ 标准副本 [§27.8.2.1p4]：

> basic_stringbuf(basic_stringbuf&& rhs);
> 
> 效果：从右值 rhs 移动构造。***this (eback(), gptr(), egptr(), pbase(), pptr(), epptr()) 中的序列指针是否获得rhs 所具有的值是实现定义的**。无论他们是否这样做，*this 和 rhs 在构造之后都会引用单独的缓冲区（如果有的话）。rhs 的 openmode、locale 和任何其他状态也会被复制。

类似的句子也用于`basic_filebuf(basic_filebuf&& rhs);`。

**问题**

我想知道为什么这是实现定义的？您是否有理由不想复制指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:48:13.253

有两种明显的实现技术来处理标准流缓冲区中的缓冲区：

1.  您可以将缓冲区嵌入到对象中，为对象创建更大的占用空间，但避免为小字符串或文件分配内存。
2.  您可以指向在堆上分配的缓冲区并以内存分配为代价来处理可能很大的缓冲区。

根据缓冲区所在位置的实现选择，您将需要一组新的指针值，或者您希望按原样继承指针。这两种策略都不是“更好”的，我也可以想象结合这些策略的变化。因此，实现可以选择而不是做出选择。如果您的问题是为什么实施应该[忘记]记录它所做的选择：这显然超出了我的范围。我个人的猜测是，假设“是实现定义的”阶段将提供选择的自由，并且忽略了实现需要说明其选择的含义（因为对引用进行了辩论：1.3.10 [defns.impl.defined] - 奇怪的是没有段落编号）。

# google-chrome - Chrome 中的 SVG 混合模式错误

> ID：13169350
> 
> 赞同：3
> 
> 时间：2012-11-01T00:27:07.977
> 
> 标签：google-chrome, svg, blending, svg-filters

最近我正在处理一个项目，我需要使用 SVG 并且它是混合模式过滤器。基本元素是背景图像，然后是一些形状（主要是实心填充的路径）。问题是 Chrome 的渲染似乎有些困难——背景图像太亮，混合路径周围出现了一些奇怪的过亮矩形。Firefox 和 Opera 同时运行良好。

有一个带有额外设置的示例来显示错误：[Live example](http://gorgeus.webmind.pl/svgbug/)

代码中最重要的部分：

```
<svg version="1.1" id="layer-0" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0" y="0" width="1097" height="835" viewBox="0 0 1097 835">
<defs>
    <filter id="img">
        <feImage xlink:href="static/img/bg.jpg" x="0" y="0" width="100%" height="100%" />
    </filter>

    <filter id="filter">
        <feImage result="img1" xlink:href="static/img/bg.jpg" x="0" y="0" width="100%" height="100%" />
        <feBlend mode="multiply" in="SourceGraphic" in2="img1" result="multi" />
    </filter>
</defs>

<image xlink:href="static/img/bg.jpg" width="100%" height="100%" />

<g style="filter:url(#img)" height="100%" width="100%" id="fix"></g>

<circle filter="url(#filter)" class="shape" cx="560" cy="380" r="120" /> 
```

我不得不添加一个额外的图像标签，因为#filter 中使用的背景被剪裁了（但为什么？）。是 Chrome 的修复程序，但它不是一个令人满意的解决方案。

有谁知道这个错误的原因是什么？也许我做错了？我花了几十个小时来解决这个问题，仍然没有效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T13:06:34.573

我有类似的问题，我通过从 html 标头中删除基本元素来修复它。我认为这是 chrome 中的错误。

# ruby-on-rails - 将图像与产品关联的 Rails 方式？

> ID：13169357
> 
> 赞同：0
> 
> 时间：2012-11-01T00:27:35.023
> 
> 标签：ruby-on-rails, associations

我有两个模型，`Product`和`Image`。`Product`有两列：`name`和`description`。`Image`还有两列：（`path`即 foobar.jpg）和`description`（用于标题和`alt`信息）。大多数图像描绘了多个产品，并且每个产品都有多个图像。每个产品都有自己的页面，其中包含所有相关图像的画廊。

最初我认为解决这个问题的最好方法是建立一个 HABTM 协会——但我已经读过（在*Rails 3 Way 中*）那些现在不赞成该`has_many :through`协会的人。但是在这里创建第三种模型似乎很愚蠢。

我考虑过的另一个解决方案是，在每个产品页面上，在`Image` `description`列中搜索`Product` `:name`. 但这似乎不是一个优雅的解决方案。

解决这个问题的 Rails 方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T00:34:49.053

使用`has_many :through`将是 rails 方式，但底层数据结构仍然可以相同。我会以这种方式对关系建模：

```
class Product
  has_many :product_images
  has_many :images, :through => :product_images
end

class ProductImage
  belongs_to :product
  belongs_to :image
end

class Image
  has_many :product_images
  has_many :products, :through => :product_images
end 
```

所以换句话说，HABTM 和之间的唯一区别`has_many :through`是关系声明和额外模型。是的，额外的模型可能看起来有点矫枉过正，但它不会影响代码的可维护性。

# ruby - 检测当前文件是否为主文件

> ID：13169364
> 
> 赞同：0
> 
> 时间：2012-11-01T00:28:37.147
> 
> 标签：ruby, file, recursion

如何检测文件的当前读取是直接从命令行完成的，还是通过加载/请求完成的？

有一个众所周知的方法：

```
__FILE__ == $0 
```

但是当主文件有可能自行加载时，这将无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T00:51:34.877

这太容易了。我将分配一个标志并检查它。一个稍微棘手的事情是相关作业的排序。(a) 条件，(b) 分配标志，和 (c) 加载必须按以下顺序进行：

```
if @loaded and __FILE__ == $0
  # the main reading
  ...
else
  # not the main reading
  ...
end
...
@loaded = true
...
the_relevant_command_that_leads_to_loading_of_a_file 
```

如果我希望它们以不同的顺序排列，我必须嵌入其中一些并强制执行此顺序。

# objective-c - 使用 DDHotKey 的弧限制和语义问题

> ID：13169366
> 
> 赞同：0
> 
> 时间：2012-11-01T00:28:59.743
> 
> 标签：objective-c, xcode, cocoa, hotkeys, ddhotkey

我正在尝试在我正在编写的程序中将 DDHotKey 用于全局热键，但是由于 DDHotKeyCenter.m 有错误，我无法编译该程序。

错误如下... ![错误](../Images/7f3ceb52e09ad7e45a3c7c11874afe1e.png)

我假设这与我的项目设置有关，因为 DDHotKey 演示可以编译并运行良好。

我试过禁用弧，转换为弧，都没有成功。

我还是 Cocoa 的新手，所以我对可能导致这种情况的原因没有任何其他想法。

任何帮助表示赞赏。

编辑：禁用 Arc 时的错误... ![更多错误](../Images/a55dac537d0f3568b23df1fcecbe4ceb.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T00:34:53.817

你是对的 - 看起来这些文件还没有准备好 ARC。但是，如果您收到这些消息，则意味着您的项目的其余部分是:)

幸运的是，您可以为项目中的特定文件禁用 arc。

在项目设置的构建阶段选项卡中，查看编译源部分。在出现错误的文件（即 DDHotKeyCenter.m）旁边添加编译器标志`-fno-objc-arc`- 这将告诉编译器不要仅对该文件使用 ARC。

只需对每个抱怨 , 等的文件重复此操作`release`，`retain`然后`autorelease`看看你的进展如何。

# sql - 获取连接表列的不同总和

> ID：13169367
> 
> 赞同：6
> 
> 时间：2012-11-01T00:29:02.467
> 
> 标签：sql, postgresql, aggregate-functions, duplicate-removal, window-functions

我这里有一个问题，我希望有一个简单的解决方案。我会尽量简化：

*   票属于参加者
*   例子：

```
select * from tickets JOIN attendees ON attendee.id = tickets.attendee_id 
```

*   与会者有一个名为“收入”的小数列

也就是说，我需要运行一个查询，该查询将返回有关门票的各种信息，包括总收入。问题是，如果 2 张门票属于同一个与会者，则会将他们的收入计算两次。我怎样才能只对与会者收入进行一次汇总？

**我不想使用子查询，因为我的 ORM 让这很困难。另外，如果我想对多列执行此操作，则子查询解决方案无法扩展。**

这是我所拥有的：

*   1 名与会者收入为 100
*   2 张都属于该与会者的门票

```
Select count(tickets.*) as tickets_count
     , sum(attendees.revenue) as atendees_revenue
from tickets LEFT OUTER JOIN attendees ON attendees.id = tickets.attendee_id; 
```

=> 这告诉我`attendees_revenue`是 200。我希望它是 100。因为数据库中有一个出席者的 existing_revenue 为 100。我不希望出席者被重复计算。

请让我知道这是否可能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T01:05:30.243

要在**没有 subquery**的情况下获得结果，您必须使用高级窗口函数技巧：

```
SELECT sum(count(*))       OVER () AS tickets_count
     , sum(min(a.revenue)) OVER () AS atendees_revenue
FROM   tickets   t
JOIN   attendees a ON a.id = t.attendee_id
GROUP  BY t.attendee_id
LIMIT  1; 
```

[sqlfiddle](http://sqlfiddle.com/#!12/161c0/4)

### 它是如何工作的？

理解这一点的关键是查询**中的事件顺序**：

*聚合函数 -> 窗口函数 -> DISTINCT -> LIMIT*

更多细节：

*   [在应用 LIMIT 之前获取结果计数的最佳方法](https://stackoverflow.com/questions/156114/best-way-to-get-result-count-before-limit-was-applied/8242764#8242764)

一步步：

1.  I `GROUP BY t.attendee_id`- 您通常会在子查询中执行此操作。

2.  然后我将计数相加以获得票的总数。效率不高，但受您的要求所迫。聚合函数`count(*)`被包装在窗口函数`sum( ... ) OVER ()`中以得到不常见的表达式：`sum(count(*)) OVER ()`。

    并将每位与会者的最低收入相加，以获得不重复的总和。

    您也可以使用`max()`or`avg()`代替，`min()`以`revenue`保证每个与会者的每一行都相同的效果。

    `DISTINCT`如果在窗口函数中允许，这可能会更简单，但 PostgreSQL 还没有（还）实现这个特性。[根据文档](https://www.postgresql.org/docs/current/sql-expressions.html#SYNTAX-WINDOW-FUNCTIONS)：

    > 聚合窗口函数与普通聚合函数不同，不允许`DISTINCT`或`ORDER BY`在函数参数列表中使用。

3.  最后一步是获得单行。这可以使用`DISTINCT`（SQL 标准）来完成，因为所有行都是相同的。`LIMIT 1`不过会更快。或 SQL 标准形式`FETCH FIRST 1 ROWS ONLY`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-20T23:03:36.327

一个简单的划分呢：

```
 Select count(tickets.*) as tickets_count
 , sum(attendees.revenue) / count(attendees.id) as atendees_revenue
 from tickets LEFT OUTER JOIN attendees ON attendees.id = 
 tickets.attendee_id; 
```

这应该处理重复、三次等。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-08-26T21:14:28.783

以前的答案几乎是正确的。如果收入相同，您只需要做好不同的工作。如果您的 id 具有数字类型，您可以非常简单地解决这个问题：

```
SELECT
  COUNT(*) AS ticketsCount,
  SUM(DISTINCT attendees.id + attendees.revenue) - SUM(DISTINCT attendees.id) AS revenueSum
FROM
  tickets
LEFT JOIN attendees ON
  attendees.id = tickets.attendee_id 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-01T00:56:57.700

您实际上非常接近，有很多方法可以做到这一点，如果我正确理解您的问题，应该这样做：

```
SELECT
   COUNT(*) AS ticketsCount,
   SUM(DISTINCT attendees.revenue) AS revenueSum
FROM
   tickets
   LEFT JOIN attendees ON
      attendees.id = tickets.attendee_id 
```

# php - 自定义 WooCommerce 主题中的产品类别图像

> ID：13169373
> 
> 赞同：0
> 
> 时间：2012-11-01T00:30:10.507
> 
> 标签：php, wordpress, woocommerce

我正在寻找一些帮助，以查找将在自定义 WooCommerce 主题中显示产品类别图像的 php 片段。我正在使用一个在小部件中执行 php 代码的插件，它适用于产品类别名称。我只是找不到任何适用于类别图像的东西。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T00:41:20.243

假设您知道类别 ID 并且它位于`$cat_ID`：

```
// get the thumbnail ID
$thumbnail_id = get_woocommerce_term_meta( $cat_ID, 'thumbnail_id', true ); 
// get the image URL
$image = wp_get_attachment_url( $thumbnail_id ); 
// print the IMG HTML
echo '<img src="'.$image.'" />'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T07:21:44.583

要在 archive-product.php 中显示当前显示类别的类别图像，请在 is_product_category() 为 true 时使用当前类别 term_id：

```
// verify that this is a product category page
    if (is_product_category()){
        global $wp_query;
        // get the query object
        $cat = $wp_query->get_queried_object();
        // get the thumbnail id user the term_id
        $thumbnail_id = get_woocommerce_term_meta( $cat->term_id, 'thumbnail_id', true ); 
        // get the image URL
        $image = wp_get_attachment_url( $thumbnail_id ); 
        // print the IMG HTML
        echo '<img src="'.$image.'" alt="" width="762" height="365" />';
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-28T10:46:42.960

请参阅以下代码：-

```
global $product;

if (is_product_category()) {

    global $wp_query;

    $cat = $wp_query->get_queried_object();

    $thumbnail_id = get_woocommerce_term_meta($cat->term_id, 'thumbnail_id', true);

    $image = wp_get_attachment_url($thumbnail_id);

    if ($image) {

        echo '<img src="' . esc_url($image) . '" alt="" />';

    }    } 
```

# html - 等列 CSS

> ID：13169374
> 
> 赞同：0
> 
> 时间：2012-11-01T00:30:20.973
> 
> 标签：html, css

我试图让我的列都到达页面底部。右栏比左栏长得多，但是当我将它们的高度都设置为 100% 时，它并没有覆盖整个页面。

```
<!DOCTYPE html>
<html lang="en">

    <head>
        <title>Primarch - Roboute Guilliman</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="stylesheet.css">
    </head>

    <body>
        <div id="wrapper">
            <div id="header">
                 <h1>Roboute Guilliman</h1>

                <div id="breadcrumb"><a href="index.html">Home</a> > <a href="index.html">Primarchs</a> > <a href="index.html">Roboute Guilliman</a>

                </div>
            </div>
            <div id="leftcolumn">   <a href="index.html">Home</a>
 <a href="#About">About</a>
 <a href="#Early_Years">Early Years</a>

            </div>
            <div id="rightcolumn">
                <div class="content"></div>
            </div>
        </div>
    </body>
</html> 
```

CSS：

```
html, body {
    font-family:Verdana, Arial, sans-serif;
    background-image: url(data-slate.jpg);
    background-repeat: repeat;
    color: #00CC00;
    width:100%;
    height:100%;
}
a {
    color: #FFFF00;
}
.ImageBorder {
    border: #00CC00 2px solid;
}
#wrapper {
    position:absolute;
    width:100%;
    height:100%;
    top:0px;
    left:0px;
    margin:0 auto;
}
#leftcolumn {
    float: left;
    width: 165px;
    height:100%;
    position:relative;
    border: #00CC00 3px solid;
    padding-top: 30px;
}
#rightcolumn {
    position:absolute;
    height:100%;
    left: 170px;
    right:0px;
    top:125px;
    border: #00CC00 3px solid;
    padding:15px;
}
#header {
    padding: 10px;
    text-align:center;
    border: #00CC00 3px solid;
}
.content {
    padding: 20px 20px -10px 20px;
}
#floatright {
    margin: 10px;
    float: right;
}
#footer {
    font-size:70%;
    position:relative;
    left:30%;
    bottom:0px;
}
#leftcolumn a {
    margin: 30px;
}
#breadcrumb {
    text-align: left;
} 
```

这是带有全文[http://jsfiddle.net/bNhng/1/](http://jsfiddle.net/bNhng/1/)的 html，大约在页面一半的地方，我的边框结束了，文本继续。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T03:29:18.993

这是一个帖子，其中有几种实现您想要的方法： http: [//css-tricks.com/fluid-width-equal-height-columns](http://css-tricks.com/fluid-width-equal-height-columns)

但最简单的方法是只做假列：[http ://www.alistapart.com/articles/fauxcolumns/](http://www.alistapart.com/articles/fauxcolumns/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T00:39:21.730

给你的 colomns 高度 100% 只会说他们的身高是他们父母身高的 100%，也就是说，他们的身高是`#wrapper`身体的 100%。而且由于您的列不是从顶部开始的，因此它们不适合窗口。

这是您的代码的小提琴：http: [//jsfiddle.net/bNhng/](http://jsfiddle.net/bNhng/)。`position:absolute;`我通过删除和`top:125px;`从`#rightcolumn`类中修改它以使两列的高度相同。

# oracle - Oracle 数据泵导出包括不正确的序列

> ID：13169375
> 
> 赞同：4
> 
> 时间：2012-11-01T00:30:34.373
> 
> 标签：oracle, datapump

最近，我们通过发出以下命令对生产数据库进行了实时/在线备份：

```
expdp system/******@SID FULL=y DIRECTORY=data_pump_dir DUMPFILE=full_prod.dmp LOGFILE=full_prod_export.log JOB_NAME=prod_backup 
```

没有错误也没有警告。

然后，我们通过发出以下命令获取了这个转储并从中创建了许多开发人员数据库：

```
impdp system/******@SID SCHEMAS=MY_SCHEMA DIRECTORY=data_pump_dir DUMPFILE=full_prod.dmp LOGFILE=full_prod_import.log 
```

同样，没有错误也没有警告。

开发人员环境设置好后，开发人员启动他们的应用程序并尝试插入一些测试数据。前几次尝试因主键违规而失败。经过一番挖掘，事实证明缓存的序列（NOCACHE 序列很好）通常落后一两个值。

一个例子是我们的联系表的顺序：

```
CREATE SEQUENCE REQ_CONTACT_SEQ
START WITH 213041
MAXVALUE 999999999999999999999999999
MINVALUE 1
NOCYCLE
CACHE 20
NOORDER; 
```

Oracle 显示此序列的*最后一个缓存值*213041。现在，当我运行以下查询时：

```
SELECT MAX(id) FROM REQ_CONTACT; 
```

甲骨文返回`213042`。很明显这个值比序列高1。

所以....我的问题是，我们之所以得到这个结果，是因为我们在生产期间进行了数据导出 - 即存在与数据库的开放和活动连接？或者数据泵是否对缓存的序列有问题？我们使用的是 Oracle 10.2.0.4。

谢谢，穆尔。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-29T22:01:30.120

我相信您的假设是正确的，因为环境是实时的并且具有开放的连接。在过去的几年里，我一直在使用 Oracle 10.2.0.4 为我们的开发机器执行相同的过程，并且必须创建一个脚本，以便在导入生产导出时运行。我基本上将每个问题序列增加 100，然后将增量值设置回 1。

```
alter sequence [sequence_name] increment by 100;
select [sequence_name].nextval from dual;
alter sequence [sequence_name] increment by 1;
select [sequence_name].nextval from dual;
commit; 
```

在我们的例子中，我们看到主键约束错误。随着时间的推移，我已将显示 PK 约束错误的每个序列添加到我的脚本中。

每隔一段时间，我就会因新的 PK 约束错误而措手不及，不得不调整脚本并添加新序列。

我正在考虑创建一个增加*每个*序列的变体，这将防止出现任何新的 PK 约束错误。这不是我的想法，但我认为它应该是某种 LOOP DBMS 语句，它遍历查询“从 user_sequences 中选择序列名称”中的每个值。

我一直觉得奇怪的是，Oracle 没有办法纠正这个问题，我也没有从网上的任何人那里找到“简单”的解决方案。它将是一些脚本查询每个 max(id) 并将其与当前序列值进行比较，并将其增加差异。

我还听说过一种使用某种“状态”变量运行 expdp（导出数据泵）的方法，这会导致它在整个导出过程中保持状态。如果我发现任何东西，我会更新帖子。与此同时，祝你好运！

编辑：添加到 expdp 以维护导出数据的参数是“consistent = y” 显然，它只单独维护每个表的数据，所以我不确定序列值是否一致。

[Oracle 数据泵详细信息](http://www.oracle-base.com/articles/10g/oracle-data-pump-10g.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-16T02:12:01.593

对此的最佳解决方案是将闪回参数添加到导出中。从您开始导出的那一刻起，这将使您的所有数据保持一致。

`FLASHBACK_TIME=SYSTIMESTAMP`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-06T20:21:36.907

您也可以简单地级联具有序列的模式。我这样做并设置`FLASHBACK_TIME`或`FLASHBACK_SCN`

注意：`consistent = y`是`exp`不是`expdp`

另请注意：如果您使用的是 12.1，如果您为完整导出设置“FLASHBACK_x”参数，则可能会出现与此相关的错误 --as sysdba 以解决错误 19238926 文档 ID 1676411.1

```
grant flashback any table to exp_full_database;
grant flashback on SYS.KU$_USER_MAPPING_VIEW to exp_full_database;
grant flashback on SYS.FGA_LOG$FOR_EXPORT to exp_full_database;
grant flashback on SYS.AUDTAB$TBS$FOR_EXPORT to exp_full_database;
grant flashback on SYS.DBA_SENSITIVE_DATA to exp_full_database;
grant flashback on SYS.DBA_TSDP_POLICY_PROTECTION to exp_full_database;
grant flashback on SYS.NACL$_ACE_EXP to exp_full_database;
grant flashback on SYS.NACL$_HOST_EXP to exp_full_database;
grant flashback on SYS.NACL$_WALLET_EXP to exp_full_database; 
```

# extjs - 在 ExtJS 中传递给 fn 的参数是什么？

> ID：13169376
> 
> 赞同：1
> 
> 时间：2012-11-01T00:30:50.830
> 
> 标签：extjs

下面是 ExtJS 中提示的定义：Ext.window.MessageBox.prompt(title, msg, [fn], [scope], [multiline], [value] )。

很明显 fn 是一个函数。但我总是很困惑哪些参数将传递给 fn。我怎样才能找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T00:42:27.040

它在文档中，向下滚动到 fn 参数：[http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.window.MessageBox-method-show](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.window.MessageBox-method-show)

```
Parameters
buttonId : String
The ID of the button pressed, one of:

ok
yes
no
cancel
text : String
Value of the input field if either prompt or multiline is true
opt : Object
The config object passed to show. 
```

# java - HQL DISTINCT 不起作用

> ID：13169377
> 
> 赞同：-1
> 
> 时间：2012-11-01T00:30:58.113
> 
> 标签：java, hibernate, hql, dao

我搜索了整个论坛；几乎每个答案都涉及到这一点，但没有帮助。我的 DAO 中有以下查询，但它不起作用，我不明白为什么？

这是我的完整方法：

```
public List<RwTac> findAll(){
        String sql = "select distinct v from RwTac v " +
                     "order by v.vendor" ;
        Query query = sessionFactory.getCurrentSession().createQuery(sql);
        return query.list();
    } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:22:52.583

我不知道你想要什么结果。

在您的 HQL 中选择

```
"select distinct v from RwTac v order by v.vendor" 
```

您将获得至少一列不同的所有行 - 在大多数情况下，这将是表的所有行（除非您的表没有唯一键并且它具有完整的双精度）。

如果你想要一个供应商列表，列表中没有供应商两次，那么你需要这个选择

```
"select distinct v.vendor from RwTac v order by v.vendor" 
```

# twitter-bootstrap - 引导文本超出范围

> ID：13169378
> 
> 赞同：3
> 
> 时间：2012-11-01T00:31:10.267
> 
> 标签：twitter-bootstrap

我正在使用引导 css 文件。我的网站的描述区域有以下代码，基本上我希望我的段落在 div 类中调用良好，但对于某些段落来说，该段落一直在类之外；这是代码

```
 <!--left col-->
       <div class="span8" style="background-color:black;">
    <img src="Hydrangeas.jpg">
        <div class="well" style="color:black;">  
        <p>Description of The Person in theren llllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll
        kljjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj jkhl kjjjjjjjjjjjjjjjjjjjjjjjjjjjjj
        skdfkljsdklfjkllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll
        skdlfjkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkpacking meeee<p>
    </p>
</div> 
```

我基本上想把paragarph留在里面谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T00:35:35.327

由于该文本是一个非常长的单词，因此您需要添加 CSS 来告诉浏览器将其换行。

```
word-wrap: break-word; 
```

也可能是您发布的 HTML 无效。`<p>`您在第一段的末尾有另一个开始标签，并且您正在关闭“well”但从不关闭“span8”。

# c# - C# 为什么我的 StreamReader 不工作？

> ID：13169382
> 
> 赞同：-1
> 
> 时间：2012-11-01T00:32:01.983
> 
> 标签：c#

> **可能重复：**
> [来自标签的 C# StreamReader 输入文件？](https://stackoverflow.com/questions/13172171/c-sharp-streamreader-input-files-from-labels)

好的，我仍在开发 Roller Dice 程序，我需要该程序在每次游戏重新开始时显示以前的高分。但是，当我输入代码时。它给了我留下的错误。名称“文件”不存在并且找不到名称空间名称 StreamReader？请帮忙

```
private void button2_Click(object sender, EventArgs e)
{   
    try
    {
        int scores;
        int highscore = 0;
        StreamReader inputFile;

        inputFile = File.OpenText("HighScore.txt");

        while (!inputFile.EndOfStream)
        {
            scores = int.Parse(inputFile.ReadLine());

            highscore += scores;
        }

        inputFile.Close();

        highscoreLabel.Text = highscore.ToString("c");

    }   
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T00:37:17.643

可能您还没有添加命名空间导入

```
using System.IO; 
```

作为替代方案，您可以编写对 File 和 StreamReader 对象的完整限定引用

```
 System.IO.StreamReader inputFile;
 inputFile = System.IO.File.OpenText("HighScore.txt"); 
```

但是，当然，这不是很方便。

另外，请注意，如果由于某种原因您的代码在读取流时抛出异常，则该方法将退出而不关闭流。应该不惜一切代价避免这种情况。
[using 语句](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)可能会有所帮助。

```
int scores;
int highscore = 0;
using(StreamReader inputFile = File.OpenText("HighScore.txt"))
{
    try
    {
         while (!inputFile.EndOfStream)
         {
             scores = int.Parse(inputFile.ReadLine());
             highscore += scores;
         }
         highscoreLabel.Text = highscore.ToString("c");
     }
     catch (Exception ex)
     {
         MessageBox.Show(ex.Message);
     }
} 
```

# gtk - 手动设置 gtk.Paned 的限制

> ID：13169392
> 
> 赞同：1
> 
> 时间：2012-11-01T00:33:16.897
> 
> 标签：gtk, pygtk

我想设置`gtk.Paned`容器的最大/最小大小。目前，排水沟可以移动，使得一个孩子的图像重叠到第二个！

我尝试写入的`min-position`属性，`Paned`但它不可写。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-28T05:05:07.413

制作一个 Panned Widget，将两个 Gtk.Bin 添加到它的任一窗格（或者如果您只关心一种尺寸，则只添加一个），并在 Bin 容器上设置您的最小尺寸请求。`widget.set_size_request(my_min_width, -1)`,`-1`取消设置高度尺寸要求；或在实现小部件后获取其先前的最小尺寸请求。`widget.connect('realize', my_handler)`和`def my_handler(widget): widget.get_preferred_size()[0].height`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:29:51.727

I think this is not the role of the GtkPaned, it barely will follow the minimum size allocation of what is the childs. This is where I'd look.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-16T21:40:25.867

Gtk_Paned 的 min-position 和 max-position 是只读值，它们从一起平移的小部件（子小部件）中派生出它们的原始值。为了设置最小和最大位置，您必须限制这些小部件的收缩能力和可扩展性（或通过布局的水平和垂直调整）。这完全取决于您尝试一起平移的小部件类型。

# c# - 在C#中提取字符串末尾的数字

> ID：13169393
> 
> 赞同：31
> 
> 时间：2012-11-01T00:33:37.127
> 
> 标签：c#, .net, regex, parsing

可能过度分析了这一点，但stackoverflow如何建议是返回包含在字符串末尾的整数的最佳方法。

到目前为止，我已经考虑过使用简单的循环、LINQ 和正则表达式，但我很好奇我将从社区中获得什么方法。显然，这不是一个难以解决的问题，但可能在解决方案中存在差异。

所以更具体地说，您将如何创建一个函数来返回附加在任意长字符串末尾的任意长整数/长整数？

```
CPR123 => 123
ABCDEF123456 => 123456 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-01T00:35:53.827

使用这个正则表达式：

```
\d+$

var result = Regex.Match(input, @"\d+$").Value; 
```

或使用`Stack`，可能更有效：

```
var stack = new Stack<char>();

for (var i = input.Length - 1; i >= 0; i--)
{
    if (!char.IsNumber(input[i]))
    {
        break;
    }

    stack.Push(input[i]);
}

var result = new string(stack.ToArray()); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2017-06-02T13:44:07.933

强制性 LINQ 单行

```
var input = "ABCD1234";
var result = string.Concat(input.ToArray().Reverse().TakeWhile(char.IsNumber).Reverse()); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-10-17T23:26:33.377

正则表达式模式`\d+$`有点昂贵，因为默认情况下，字符串是从左到右解析的。一旦正则表达式引擎在 中找到`1`，`12abc34`它就会继续匹配`2`，当它遇到 时`a`，匹配失败，尝试下一个位置，依此类推。

但是，在 .NET 正则表达式中，有一个`RegexOptions.RightToLeft`修饰符。它使正则表达式引擎从右到左解析字符串，您可能会更快地获得已知更接近结尾的匹配。

```
var result = Regex.Match("000AB22CD1234", @"\d+$", RegexOptions.RightToLeft);
if (result.Success) 
{ 
    Console.Write(result.Value);
}  // => 1234 
```

请参阅[在线 C# 演示](https://ideone.com/QmUb88)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-01T00:37:38.083

就我的经验而言，正则表达式将是最简单的。

```
Regex ex = new Regex(@"(\d+)$") 
```

这应该匹配它。只需将其包装在一个函数中即可。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T00:35:57.447

```
[^0-9]+([0-9]+) 
```

我认为应该这样做

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-01T00:36:43.980

它总是采用 LettersNumbers 格式吗？

在这种情况下，这将起作用：

```
Regex _cellAddressRegex = new Regex(@"(?<Column>[a-z]+)(?<Row>[0-9]+)", RegexOptions.Compiled | RegexOptions.IgnoreCase);
var rowm = Convert.ToInt32(parts.Groups["Row"]); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-01T01:31:08.750

我可以为此发疯吗？

```
using System.Text;
using System.Linq;

static string GetNum(string input)
{
    StringBuilder sb = new StringBuilder();
    for (int i = input.Length - 1; i >= 0; i--)
    {
        if (input[i] < 48 || input[i] > 57)
            break;

        sb.Append(input[i]);
    }

    return String.Concat(sb.ToString().ToCharArray().Reverse());
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-11T12:08:54.340

一个简单的循环可能在其简单性和效率方面胜过任何其他解决方案。最终返回的字符串可以只复制一次，而无需使用 Stack、StringBuilder、string.Concat 或其他更复杂的字符串支持函数。

```
string GetNumberFromEnd(string text)
{
    int i = text.Length - 1;
    while (i >= 0)
    {
        if (!char.IsNumber(text[i])) break;
        i--;
    }
    return text.Substring(i + 1);
} 
```

或者它甚至可以直接作为 int 类型返回：

```
bool GetIntFromEnd(string text, out int number)
{
    int i = text.Length - 1;
    while (i >= 0)
    {
        if (!char.IsNumber(text[i])) break;
        i--;
    }
    return int.TryParse(text.Substring(i + 1), out number);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-11-06T09:01:00.420

不使用可能难以理解的 RegEx，或者可能很慢的 Linq 和数组操作，可以使用扩展方法中的简单循环。

在适配和检查时，它可以用于`long`或`int`或`ulong`或`uint`或其他。`+``-`

它可以适应解析`float`和`double`/或`decimal`太。

这个方法也可以写成`Parse`有异常。

**执行**

```
static public class StringHelper
{
  static public bool TryParseEndAsLong(this string str, out long result)
  {
    result = 0;
    if ( string.IsNullOrEmpty(str) )
      return false;
    int index = str.Length - 1;
    for ( ; index >= 0; index-- )
    {
      char c = str[index];
      bool stop = c == '+' || c == '-';
      if ( !stop && !char.IsDigit(c) )
      {
        index++;
        break;
      }
      if ( stop )
        break;
    }
    return index <= 0 ? long.TryParse(str, out result)
                      : long.TryParse(str.Substring(index), out result);
  }
} 
```

**测试**

```
test(null);
test("");
test("Test");
test("100");
test("-100");
test("100-200");
test("100 - 200");
test("Test 100");
test("Test100");
test("Test+100");
test("Test-100");
test("11111111111111111111");

Action<string> test = str =>
{
  if ( str.TryParseEndAsLong(out var value) )
    Console.WriteLine($"\"{str}\" => {value}");
  else
    Console.WriteLine($"\"{str}\" has not a long at the end");
}; 
```

**输出**

```
"" has not a long at the end
"" has not a long at the end
"Test" has not a long at the end
"100" => 100
"-100" => -100
"100-200" => -200
"100 - 200" => 200
"Test 100" => 100
"Test100" => 100
"Test+100" => 100
"Test-100" => -100
"11111111111111111111" has not a long at the end 
```

# android - 获取 Android Canvas 中的 java.awt.Graphics2D 行为

> ID：13169394
> 
> 赞同：2
> 
> 时间：2012-11-01T00:33:45.460
> 
> 标签：android

**这是我的场景：**

我有一个布局，其中我可以在其 onDraw() 方法上校准和获取画布。现在，对于一个事件，比如 onTouchEvent()，我想剪辑画布的一部分并将这部分显示到另一个布局的另一个视图中。

我发现代码片段做类似的事情，但它们基于 Android API 不支持的 java.awt 包，尤其是像 java.awt.Graphics2D 这样的核心组件

我想遵循类似的算法，使用画布而不是 Android 中的 Graphics2D 将其内容绘制到另一个画布中。我们如何实现这一目标？

基本上，我想获得与 java.awt 中以下代码相同的结果：

```
protected void paint(Graphics2D g2) {
Ellipse2D ellipse = //create ellipse which is to be displayed in another surface
g2.fill(ellipse);  //how to achieve the same result in Android?
g2.draw(ellipse);  //how to achieve the same result in Android?
g2.clip(ellipse);  //how to achieve the same result in Android?
....
... 
//note: Afaik, in Android, the code like Drawable.draw(canvas, ....),
//will achieve result in the opposite way where the Drawable would be drawn into
//the Canvas whereas G2.fill(ellipse) would fill the ellipse with the G2's content
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:43:07.580

如果我正确理解了您的需求，您可以尝试如下代码。

这是 Activity 的 xml 布局文件的样子：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.example.test.SourceImageView
        android:id="@+id/srcImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:src="@drawable/landscape" /> <!-- landscape.png is the picture on resources -->

    <ImageView
        android:id="@+id/dstImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/srcImage"
        android:layout_centerHorizontal="true" />

</RelativeLayout> 
```

活动源代码：

```
public class MainActivity extends Activity implements SourceImageView.OnCropListener {

    private SourceImageView srcImageView;
    private ImageView       dstImageView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        srcImageView = (SourceImageView) findViewById(R.id.srcImage);
        dstImageView = (ImageView) findViewById(R.id.dstImage);

        srcImageView.setOnCropListener(this);
    }

    @Override
    public void onCrop(Bitmap bitmap) {
        dstImageView.setImageBitmap(Bitmap.createScaledBitmap(bitmap, 50, 50, true));
    }
} 
```

我称为 SourceImageView 的自定义视图：

```
public class SourceImageView extends ImageView implements OnTouchListener {

    private float           x;
    private float           y;
    private Paint           paint;
    private Bitmap          bitmap;
    private OnCropListener  cropListener;

    public SourceImageView(Context context, AttributeSet attrs) {
        super(context, attrs);
        setOnTouchListener(this);
        paint = new Paint(Paint.ANTI_ALIAS_FLAG);
        paint.setXfermode(new PorterDuffXfermode(Mode.CLEAR));
        bitmap = ((BitmapDrawable) getDrawable()).getBitmap();
    }

    @Override
    protected void onDetachedFromWindow() {
        bitmap.recycle();
        super.onDetachedFromWindow();
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {

        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            x = event.getX();
            y = event.getY();

            if (cropListener != null) {
                if (x + 20 > bitmap.getWidth() || y + 20 > bitmap.getHeight() || (y - 20) < 0 || (x - 20) < 0) {
                    return true;
                }
                Bitmap b = Bitmap.createBitmap(bitmap, (int) x - 20, (int) y - 20, 40, 40);
                Bitmap overlay = Bitmap.createBitmap(40, 40, Bitmap.Config.ARGB_8888);
                Canvas c = new Canvas(overlay);

                c.clipRect(0, 0, b.getWidth(), b.getHeight());

                Path path = new Path();
                path.addCircle(20, 20, 20, Path.Direction.CW);
                c.clipPath(path, Op.INTERSECT);
                c.drawBitmap(b, 0, 0, null);

                cropListener.onCrop(overlay);

                Bitmap overlay2 = Bitmap.createBitmap(bitmap.getWidth(), bitmap.getHeight(), Bitmap.Config.ARGB_8888);
                Canvas canvas = new Canvas(overlay2);
                canvas.drawBitmap(bitmap, 0, 0, null);
                canvas.drawCircle(x, y, 20, paint);
                bitmap = overlay2;
                setImageBitmap(bitmap);
            }
        }
        return true;
    }

    public void setOnCropListener(OnCropListener cropListener) {
        this.cropListener = cropListener;
    }

    static interface OnCropListener {
        public void onCrop(Bitmap bitmap);
    }

} 
```

处理位图时要小心，它们可能是一个昂贵的内存泄漏源，特别是如果您使用的是旧版本的 android。我还没有检查此代码中的泄漏。可能这可以改进（重构，优化）。

如果这不是您想要的，我希望这有助于为您提供想法并为您指明正确的方向。

**==编辑==**

可能不清楚，所以我必须说，我假设图像的裁剪部分是半径为 20 px 的圆的区域。

# python - 在 python 中使用 for 循环来执行此操作

> ID：13169395
> 
> 赞同：4
> 
> 时间：2012-11-01T00:33:56.867
> 
> 标签：python

我正在尝试使用`for`循环来制定这个：

*   `expand('*+123456')`应该返回`'1*2+3*4+5*6'`

*   `expand('++123')`应该返回`'1+2+3'`

*   `expand('+*1234')`应该返回`'1+2*3+4'`

以交替方式从给定字符串的前两个字符中选择一个符号，并将其放置在前面的数字之间。

这是我一直在使用的：

```
def expand(original):
    var = ""
    symbols = original[0:2]
    for i in range(len(original)):
        var = var + symbols + original[i]
    return var 
```

我意识到也必须有一个`original[2:]`，但我不知道我可以把它放在哪里。

我是一个业余爱好者，我一直试图弄清楚这个问题很长一段时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T01:24:33.677

是的，你的功能会通过添加`[2:]`在那里得到改进，但它也可能与丢失`range(len(original))`. 每当你发现自己在写作`range(len(something))`时，你应该退后一步，想想你真正想要做什么。

在这种情况下，您正在寻找字符串中的字符，并且您可以使用`for x in string`. 考虑到这些想法，这是一个稍微改进的版本：

```
def expand(original):
    var = ""
    symbols = original[:2]
    for digit in original[2:]:
        var += (digit + symbols)
    return var 
```

这可以防止您在输出的开头得到奇怪的符号混合，但它仍然不完美：

```
>>> expand('+*1234')
'1+*2+*3+*4+*' 
```

我们需要找到一种方法

1.  交替使用符号，并且
2.  将它们留在字符串的末尾。

我们可以使用[itertools.cycle](http://docs.python.org/2/library/itertools.html#itertools.cycle)来处理其中的第一个，并使用字符串切片来处理第二个：

```
from itertools import cycle

def expand(original):
    var = ""
    symbols = cycle(original[:2])
    for digit in original[2:]:
        var += (digit + next(symbols))
    return var[:-1] 
```

这行得通，但在某些时候，有人会告诉你不应该使用`+`或`+=`构建字符串，因为它效率低下。如果我们改为构建一个列表，然后使用`str.join()`将其转换为字符串，我们可以稍微改进一下：

```
from itertools import cycle

def expand(original):
    chars = []
    symbols = cycle(original[:2])
    for digit in original[2:]:
        chars.extend([digit, next(symbols)])
    return "".join(chars[:-1]) 
```

但是，我们可以做得更好。不必`next(symbols)`每次都调用，我们可以使用一次`zip()`获取下一个符号和下一个数字：

```
from itertools import cycle

def expand(original):
    chars = []
    for symbol, digit in zip(cycle(original[:2]), original[2:]):
        chars.extend([digit, symbol])
    return "".join(chars[:-1]) 
```

...这可能就足够了:-)

**编辑**：由于在对另一个答案的评论中，您说您不允许从标准库中导入任何内容（IMO 的一个相当愚蠢的限制，但确实存在），您可以使用`cycle()`链接中描述的 Python 实现在这个答案的前面：

```
def cycle(iterable):
    # cycle('ABCD') --> A B C D A B C D A B C D ...
    saved = []
    for element in iterable:
        yield element
        saved.append(element)
    while saved:
        for element in saved:
            yield element 
```

...但是您可能必须准备好让您的老师相信您理解它，这意味着您需要理解[yield](http://docs.python.org/2/reference/simple_stmts.html#the-yield-statement)关键字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T00:57:35.410

您可以尝试以下方法：

```
a = "*+123456"

def expand(input):
    symbols = input[:2]
    numbers = input[2:]

    result = ""
    for count, number in enumerate(numbers):
        # Switch symbol for every other iteration
        result += number + symbols[count%2]

    # There's an extra symbol at the end, so remove it.
    return result[:-1] 
```

这是在解释器中运行的示例：

```
>>> a = "*+123456"
>>> def expand(input):
...     symbols = input[:2]
...     numbers = input[2:]
...     result = ""
...     for count, number in enumerate(numbers):
...         result += number + symbols[count%2]
...     return result[:-1]
... 
>>> expand(a)
'1*2+3*4+5*6'
>>> a = "++123456"
>>> expand(a)
'1+2+3+4+5+6' 
```

代码中需要注意的事项：

`enumerate`- 接受一个可迭代的对象并以形式返回一个元组`(index, value)`。

`input[:2]`- 从字符数组的开头到位置 2 的元素（不包括在内）取一个切片

`input[2:]`- 从位置 2 到末尾（包括）取字符数组的切片

`list[:-1]`- 从列表的开头取一个切片到列表末尾的 1 个元素。

`count%2`- 获取数组中字符的计数（索引）并将其除以 2，保留余数。其结果将在两个符号之间的每一步切换时在 0 和 1 之间变化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T01:04:10.707

您可以使用[`itertools`](http://docs.python.org/2/library/itertools.html)“循环”运算符符号，然后将它们与数字交错（“zip”）：

```
import itertools

def expand(original):
    var = ""
    symbols = original[:2]
    numbers = original[2:]
    for symbol, number in zip(numbers[:-1], itertools.cycle(symbols)):
        var += symbol + number
    return var + numbers[-1] 
```

这输出：

```
>>> 展开('*+123456')
'1*2+3*4+5*6'
>>> 展开('++123')
'1+2+3'
>>> 展开('+*1234')
'1+2*3+4'

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T01:01:55.867

这是您想要的使用 FOR 循环的一个选项：

```
def expand(x):

    p=x[:2]
    n=x[2:]
    s=''
    c=0

    for i in n:
       s+=i
       s+=p[c]
       c=1-c

    return s[:-1] 
```

这个想法是将您的字符串分成一个运算符字符串*p*和一个数字字符串*n*，然后遍历两者。*c*变量从 0 变为 1 并返回，因此它不断迭代*p*（您可以使用模数来实现相同的效果）。有关执行此操作的更多“pythonic”方式，请参阅其他答案（我是为了业余清晰）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T01:34:47.383

迟到的答案，这里的每一个都更有用，但出于某种原因，这激起了我的兴趣：

```
In [9]: from itertools import izip, cycle

In [10]: def expand(s):
   ....:   return ''.join(reduce(lambda x, y: x+y, izip(s[2:], cycle(s[:2]))))[:-1]
   ....:

In [11]: expand('*-123')
Out[11]: '1*2-3'

In [12]: expand('+-123456')
Out[12]: '1+2-3+4-5+6' 
```

我完全同意@Bitwise 等人所说的 - 绝对不是你想要的，因为它不符合你的限制，所以很抱歉弄乱了流:)

为了后代的缘故，这需要有问题的字符串，然后使用该`reduce`函数将一个数字与一个交替的符号字符串配对。然后我们修剪最终的符号并返回`join`'ed 结果，这将是一个字符串。希望这对将来有用！

# c++ - 取消引用 std::find_if 的结果时内存访问错误

> ID：13169396
> 
> 赞同：1
> 
> 时间：2012-11-01T00:33:59.480
> 
> 标签：c++, debugging

```
bool hasId(string id, vector<User>& map)
{
    User ans = *(find_if(map.begin(), map.end(), [&](User d)
    {   return (id==(d).uid());}));
    return ans.uid() == id;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T00:40:58.590

如果没有找到匹配项，则在您的情况下`find_if`返回. 不返回有效的迭代器（它是最后一个元素之后的一个），但是您假设始终找到匹配项并继续无条件地取消引用返回值。这是个问题。 `last()``map.end()``end()`

您需要在取消引用之前执行检查。如果没有检查，你的函数只是假设总是找到一个匹配作为`ans.uid() == id`谓词`find_if`（因此是多余的），所以你也可以直接用它代替整个东西`return true;`:)

```
bool hasId(string id, vector<User>& map)
{
    return map.end() != find_if(map.begin(), map.end(), [&](User d)
    {   
        return id == d.uid();
    });   
} 
```

`vector`在旁注中，调用a有点奇怪`map`，至少令人困惑。

* * *

[find_if 的文档](http://en.cppreference.com/w/cpp/algorithm/find)

相关位：

```
template< class InputIt, class UnaryPredicate >
InputIt find_if( InputIt first, InputIt last, UnaryPredicate p ); 
```

> **返回值**
> 
> 迭代到满足条件的第一个元素，**如果没有找到这样的元素，则迭代到最后一个。**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T00:55:37.323

您的实现可能很简单：

```
bool hasId(string id, vector<User>& map)
{
    return map.end() !=
           find_if(map.begin(), map.end(), [&](User d){ return d.uid()==id; });
} 
```

但既然你无论如何都在使用 C++11，那么你可以只使用[any_of](http://en.cppreference.com/w/cpp/algorithm/all_any_none_of)。

```
return any_of(map.begin(), map.end(), [&](User d){ return d.uid()==id; }); 
```

# jquery - 滚动到底部时的JQuery警报？

> ID：13169397
> 
> 赞同：0
> 
> 时间：2012-11-01T00:34:36.773
> 
> 标签：jquery

有这样的元素：

```
<div id="threads-list" style="overflow-y: scroll; height: 200px;">
// Posts
</div> 
```

当用户到达按钮（或距离按钮 10px）时，我如何提醒（）？

这就是我现在正在尝试的：

```
$('#threads-list').scroll(function() {
    if ($('#threads-list').height() + $('#threads-list').scrollTop() == document.getElementById('threads-list').offsetHeight) {
        console.log('do');
        }
    }); 
```

似乎问题在于 .offsetHeight 返回与 .height() （均为 200px）相同，后者是容器高度但不是里面的内容，我认为获得内容的正确高度将是解决问题的关键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T00:42:23.360

`offsetHeight`是错误的检查。尝试这个：

```
$('#threads-list').scroll(function() {
    var el = $(this);
    if (el.height() + el.scrollTop() === this.scrollHeight) {
        alert('do');
    }
});​ 
```

`scrollHeight`是整个元素的高度，包括当前被滚动隐藏的部分。

小提琴：http: [//jsfiddle.net/caFwW/](http://jsfiddle.net/caFwW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T00:48:06.470

你应该做

```
var container = $('#threads-list'),
    maxScroll = container[0].scrollHeight - container.height(),
    threshold = 10,
    endFlag = false;

container.on('scroll', function(e){
    if ( maxScroll - container.scrollTop() < threshold ){
        if (!endFlag){
            endFlag = true;
            console.log('The END!');
        }
    } else {
        endFlag = false;
    }
}); 
```

演示在[http://jsfiddle.net/gaby/vXzk3/1/](http://jsfiddle.net/gaby/vXzk3/1/)

* * *

我已经使用了一个标志来避免在最后多次做你想做的事情..

# objective-c - 如何将依赖项注入 iOS 视图控制器？

> ID：13169407
> 
> 赞同：10
> 
> 时间：2012-11-01T00:35:51.907
> 
> 标签：objective-c, ios, ios6, inversion-of-control

我的视图控制器需要向几个模型对象发送消息。如何在视图控制器中获取对这些模型对象的引用？

这些模型对象是“单例”（因为系统中一次应该只有一个副本）并且它们被多个视图控制器使用。所以我不能在每个视图控制器的 init 方法中实例化它们。

我不能使用构造函数注入，因为运行时选择了用于创建视图控制器的 init 方法。

我不能使用“setter injection”，因为在任何时候（我知道）我都没有对新构造的视图控制器的引用和对“单例”模型对象的引用。

我*不想*将模型对象变成正确的单例，并从视图控制器中调用它们的静态方法来检索单例实例，因为这是可测试性的问题。（将模型对象作为 AppDelegate 上的属性与执行此操作基本相同。）

我正在使用带有情节提要的 iOS 6。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T17:38:19.830

我刚刚处理了同样的问题。由于我使用的是故事板，所以我没有实例化我的`UIViewControllers`，所以我不能使用“构造函数注入”。我必须使用 setter 注入辞职。

我的应用程序根目录是`UITabViewController`. 假设它有两个`UINavigationController`s，第一个是 a `AControllerView`，第二个是 s `BControllerView`。您可以通过`AppDelegate.applicationDidFinishLaunchingWithOptions`以下方式检索根控制器：

`UITabBarController *tabBarController = (UITabBarController *) self.window.rootViewController;`

然后你可以遍历控制器：

```
NSArray* viewControllers = [tabBarController viewControllers];
for (UIViewController *viewController in viewControllers) {
    UINavigationController *navigationController = (UINavigationController*) viewController;
    UIViewController *viewController = navigationController.topViewController;
    if ([viewController isKindOfClass: [AControllerView class]]) {
        AControllerView *a = (AControllerView*) viewController;
        // Inject your stuff
    }
    if ([viewController isKindOfClass: [BControllerView class]]) {
        BControllerView *b = (BControllerView*) viewController;
        // Inject your stuff
    }
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T01:08:36.850

为什么不使用`NSNotificationCenter`？

> NSNotificationCenter 对象（或简称为通知中心）提供了一种在程序中广播信息的机制。NSNotificationCenter 对象本质上是一个通知调度表。

您可以在单例或普通的两个中添加通知观察者，当您需要发送消息时，只需发布​​正确的通知即可。观察者将随后管理行动。

[有关 NSNotificationCenter 的更多详细信息](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T12:17:49.433

这不是关于获取对视图控制器对象的引用吗？如果您使用的是故事板，那么使用的窗口`rootViewController`或 segues 将为您提供正确的视图控制器对象。

即：应用启动时视图控制器的实例是

`self.window.rootViewController`

当您在场景（视图控制器）之间进行转换时：

`[segue destinationViewController]`或者`[segue sourceViewController]`

如果您使用的是 xibs，您甚至可以使用界面构建器中的外部对象（代理对象）来提供模型对象。唯一的问题是您必须将笔尖实例化掌握在自己手中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-12T15:18:57.300

理想情况下，即使在使用情节提要时，第三方开发人员也将被允许使用他们自己的构造函数/初始化程序。

在此之前，您可以使用 setter/property 注入和中介模式，特别是因为您已经习惯了最佳实践和松散耦合。

我在这里写过它：http: [//cocoapatterns.com/passing-data-between-view-controllers/](http://cocoapatterns.com/passing-data-between-view-controllers/)

# php - 如何在不重新加载页面的情况下传递信息并运行 PHP 脚本

> ID：13169412
> 
> 赞同：0
> 
> 时间：2012-11-01T00:36:50.067
> 
> 标签：php, javascript, ajax, jquery

我试图在不中断用户、刷新页面等的情况下从 Web 界面中访问产品的 API。网页在主机的单独服务器上运行，所以不幸的是我不得不使用 PHP 发送命令（尽管如果可能的话，我更希望它发生在 JS 中）。

我发送的命令类型：

```
http://<DEVICE IP>/path/to/api?set&variable=option 
```

我想要做的是向 PHP 脚本发送一些信息，然后让它在不更改页面、刷新等的情况下运行。虽然我正在努力做到这一点，但我目前有以下内容：

### 要建立链接：

```
<a href="JavaScript:void(0);" onclick="function([would like to pass variables here])">Show playback layout</a> 
```

### 在 PHP 中发送 API 命令

```
$ch = curl_init('http://10.0.50.163:9000?layout=Slaves');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$return = curl_exec($ch) 
```

我想在这里传递变量，这样我就可以限制我需要重复自己的次数。例如，布局名称可以从被点击的链接传递，而不是硬编码到 URL 中。

我显然需要编写某种 JS/AJAX 函数来做到这一点，但是当我让 JS 做我想做的事情时，我有点笨拙，我很难理解这个过程。任何帮助将不胜感激！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T00:45:38.480

我推荐使用 jQuery 库，因为它真的很灵巧并且可以节省大量时间：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

此外，资源的 url 必须是外部 url（不是 10.0.50.163），因为您将从客户端调用它。因此，该资源也必须暴露在外部。

# php - 在 Symfony 2.0 中显示 mysql blob pdf 文件

> ID：13169413
> 
> 赞同：2
> 
> 时间：2012-11-01T00:36:51.363
> 
> 标签：php, symfony, pdf-generation, symfony-2.0

我有一个链接：

```
 {% for item in list %}
        ...
        <a href="{{ path('show', { 'id': item.id }) }}"> read pdf file</a>
    {% endfor %} 
```

当用户单击链接时，我想显示 pdf 文件（在 mysql 中存储为 blob 的文件）。下面的代码不正确，但我希望我的操作执行如下操作。

```
 /**
    * @Route("/show", name="show")
    */
    public function showAction()
    {
        $id = $this->get('request')->query->get('id');
        $item = $this->getDoctrine()->getRepository('MyDocsBundle:Files')->file($id);
        $pdfFile = $item->getFile(); //returns pdf file stored as mysql blob
        $response = new Response();
        $response->setStatusCode(200);
        $response->headers->set('Content-Type', 'application/pdf');
        $response->setContent($pdfFile);
        $response->send() //not sure if this is needed
        return $response;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:38:26.577

我不确定 Doctrine 本身是否具有 blob 类型，因此我假设您已将其设置为将文件正确存储为数据库中的实际 BLOB。

尝试更多类似的东西......

```
/**
* @Route("/show/{id}", name="show")
*/
public function showAction($id)
{
    $item = $this->getDoctrine()->getRepository('MyDocsBundle:Files')->find($id);
    if (!$item) {
        throw $this->createNotFoundException("File with ID $id does not exist!");
    }

    $pdfFile = $item->getFile(); //returns pdf file stored as mysql blob
    $response = new Response($pdfFile, 200, array('Content-Type' => 'application/pdf'));
    return $response;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:00:29.633

我遇到了同样的问题，为此我更改了实体类中的字段类型。它是“blob”，我把它变成了“文本”

```
/**
 * @var string
 *
 * @ORM\Column(name="content", type="text", nullable=false)
 */
private $content; 
```

# windows-7-x64 - 在 Windows 上安装 DNode

> ID：13169415
> 
> 赞同：3
> 
> 时间：2012-11-01T00:36:53.090
> 
> 标签：windows-7-x64, dnode

我正在尝试在 Windows 7 64 位上安装 DNode，安装了 Microsoft Visual C++ 2010 Express 和 Python 2.7.3。我从 npm 得到以下输出：

```
C:\Program Files\nodejs>npm install dnode
npm http GET https://registry.npmjs.org/dnode
npm http 304 https://registry.npmjs.org/dnode
npm http GET https://registry.npmjs.org/jsonify
npm http GET https://registry.npmjs.org/weak
npm http GET https://registry.npmjs.org/dnode-protocol
npm http 304 https://registry.npmjs.org/jsonify
npm http 304 https://registry.npmjs.org/weak
npm http 304 https://registry.npmjs.org/dnode-protocol
npm http GET https://registry.npmjs.org/traverse
npm http GET https://registry.npmjs.org/bindings
npm http 304 https://registry.npmjs.org/bindings
npm http 304 https://registry.npmjs.org/traverse

> weak@0.2.1 install C:\Program Files\nodejs\node_modules\dnode\node_modules\weak
> node-gyp rebuild

C:\Program Files\nodejs\node_modules\dnode\node_modules\weak>node "C:\Program Files\nodejs\node_modules\npm\bin\node-gyp-bin\\..\..\node_modules\node-gyp\bin\node-gyp.js" rebuild
C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.Cpp.InvalidPlatform.Targets(23,7): error MSB8007: The Platform for project 'weakref.vcxproj' is invalid.  Platform='x64'. You may be seeing this message because you are trying to build a project without a solution file, and have specified a non-default Platform that doesn't exist for this project. [C:\Program Files\nodejs\node_modules\dnode\node_modules\weak\build\weakref.vcxproj]
gyp ERR! build error
gyp ERR! stack Error: `C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild.exe` failed with exit code: 1
gyp ERR! stack     at ChildProcess.onExit (C:\Program Files\nodejs\node_modules\npm\node_modules\node-gyp\lib\build.js:236:23)
gyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:99:17)
gyp ERR! stack     at Process._handle.onexit (child_process.js:678:10)
gyp ERR! System Windows_NT 6.1.7600
gyp ERR! command "node" "C:\\Program Files\\nodejs\\node_modules\\npm\\node_modules\\node-gyp\\bin\\node-gyp.js" "rebuild"
gyp ERR! cwd C:\Program Files\nodejs\node_modules\dnode\node_modules\weak
gyp ERR! node -v v0.8.14
gyp ERR! node-gyp -v v0.7.1
gyp ERR! not ok
npm ERR! weak@0.2.1 install: `node-gyp rebuild`
npm ERR! `cmd "/c" "node-gyp rebuild"` failed with 1
npm ERR!
npm ERR! Failed at the weak@0.2.1 install script.
npm ERR! This is most likely a problem with the weak package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node-gyp rebuild
npm ERR! You can get their info via:
npm ERR!     npm owner ls weak
npm ERR! There is likely additional logging output above.

npm ERR! System Windows_NT 6.1.7600
npm ERR! command "C:\\Program Files\\nodejs\\\\node.exe" "C:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "dnode"
npm ERR! cwd C:\Program Files\nodejs
npm ERR! node -v v0.8.14
npm ERR! npm -v 1.1.65
npm ERR! code ELIFECYCLE
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR!     C:\Program Files\nodejs\npm-debug.log
npm ERR! not ok code 0

C:\Program Files\nodejs>python -- version
Python 2.7.3 
```

命令提示符以管理员身份运行。

“项目'weakref.vcxproj'的平台无效。”？这是 32 位 / 64 位的问题吗？

这似乎是 C++ 编译器的问题。所以我安装了完整的 64 位版本的 .NET

现在我正在尝试从 DVD 安装适用于 Windows 7 和 .NET Framework 4 (ISO) 的 Microsoft Windows SDK：x64 ISO 文件 GRMSDKX_EN_DVD.iso 来自[http://www.microsoft.com/en-us/download/details.aspx ?id=8442](http://www.microsoft.com/en-us/download/details.aspx?id=8442)

但安装失败，并出现以下错误：有关详细信息，请参阅 Samples\Setup\HTML\ConfigDetails.htm 文档。

然后我根据这里的建议设置注册表并验证TEM变量后再次尝试：[http ://ctrlf5.net/?p=184](http://ctrlf5.net/?p=184)

同样，SDK 不会安装

任何想法这里出了什么问题以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T15:20:52.983

我在一个论坛上找到了一个答案，它指出了[node-gyp 安装说明](https://github.com/TooTallNate/node-gyp#installation)。所以需要 Windows Visual C++ 2010（Express 版可以）并且还需要[Windows 7 64 位 SDK](http://www.microsoft.com/en-us/download/details.aspx?id=8279)。

请注意此故障排除提示： *“如果安装失败，请尝试卸载您首先安装的任何 C++ 2010 x64&x86 Redistributable。”*

我实际上遇到了这个问题，并通过卸载我的 Visual C++ 2010 x64&x86 Redistributables 然后安装 Windows 7 64 位 SDK 来修复它。然后我能够构建 node-gyp 等以成功执行“npm install dnode”。

# javascript - Javascript - 为什么这段代码会阻塞？

> ID：13169418
> 
> 赞同：1
> 
> 时间：2012-11-01T00:37:08.600
> 
> 标签：javascript, node.js

我不明白为什么这段代码会阻塞。我使用 nodejs 异步函数，但现在我试图弄清楚非阻塞编程的本质是什么，以及如何实现这些。这是我认为的方式，但它仍然阻塞。

```
 var async_func = function(x, func) {
        func(x+5);
    };

    setTimeout( async_func(5, function(number) {
        for (var x = 0; x < 1000000000; x++) {;}
        console.log(number);
    }), 3000);

    console.log("done"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T00:40:12.910

尝试：

```
var async_func = function(x, func) {
    func(x+5);
};

setTimeout(function(){
    async_func(5, function(number) {
       console.log(number);
    });
}, 3000);

console.log("done"); 
```

（我也删除了不必要的`for (var x = 0; x < 1000000000; x++) {;}`）

**在不创建匿名或辅助函数的情况下，您不应在 setTimeout 中调用带有参数的函数...（如果您真的想在不设置另一个函数的情况下执行此操作，请检查下面的@Ian 评论。）**

如果你的函数没有任何参数，你可以做`setTimeout(async_func, 3000);`，但在这种情况下，最好的办法就是通过匿名函数调用它（或者在使用这些参数调用你的函数之前声明一个调用函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T00:41:42.097

在使用`setTimeout()`和传递函数引用时，这是一个常见的错误，您希望在其中调用带有参数的函数。这行代码：

```
setTimeout( async_func(5, function(number) { 
```

立即执行`async_func()`，然后将其返回结果（不是函数）传递给`setTimeout()`这不是您想要的。您想传递一个函数引用，`setTimeout()`以便`setTimeout()`稍后调用该函数，如下所示：

```
var async_func = function(x, func) {
    func(x+5);
};

setTimeout( function() {
    async_func(5, function(number) {
        for (var x = 0; x < 1000000000; x++) {;}
        console.log(number);
    });
}, 3000);

console.log("done"); 
```

或者，有时通过将计时器回调函数设为不带参数的独立函数更容易理解。

```
function async_func(x, func) {
    func(x+5);
}

function timer_func() {
    async_func(5, function(number) {
        for (var x = 0; x < 1000000000; x++) {;}
        console.log(number);
    });
}

setTimeout(timer_func, 3000);

console.log("done"); 
```

# google-app-engine - Webapp2 从路由 URL 中提取命名参数（没有请求，只有 URL）

> ID：13169424
> 
> 赞同：0
> 
> 时间：2012-11-01T00:38:06.647
> 
> 标签：google-app-engine, routes, webapp2

我在我的应用程序中使用如下路线：

`Route(r'/thing/<some_id>/foo', handler=ThingFoo, name="thing-foo")`

这用于使用 生成一个 url `uri_for('thing-foo', some_id="something")`，该 url 返回给他们存储的用户。然后，在另一个请求中，用户发布了之前返回给他们的 url，需要对其进行解析。

我想`<some_id>`从提供的 url 中提取模式的值，其方式类似于路由器如何将值传递给 RequestHandler 的 get/post 方法，但似乎缺少这方面的文档。

有没有像下面这样的东西？

```
route, some_id = webapp2.extract_uri(the_url) 
```

（当然我可以使用正则表达式直接提取值，但这似乎不是很干）。

这是我想做的一个例子。

```
def image_url(request, image_blob_key):
    if image_blob_key:
        return request.url_for('image', resource=image_blob_key, _full=True)
    else:
        return None

def blob_key_from_image_url(image_url):
    # Do something here to calculate the blob_key from the URL.
    return blob_key 
```

在我的应用程序的一部分中，image_url 从 blob_key 计算并传递给用户。稍后，如果他们（例如）想要删除图像，他们将 url 在 POST 请求中传回，我想从中提取 blob_key 以便我可以删除它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T01:15:38.283

我通常使用这种风格。

路由器：

```
Route('/auth/<provider>/call', handler='handlers.AuthHandler:meo', name='meo') 
```

和处理程序类

```
class AuthHandler(webapp2.RequestHandler):
  def meo(self, provider=None):
    self.response.write(provider) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T10:00:45.707

也许这样的事情会为你工作：

```
import webapp2

# somewhere in a request handler:
route = self.app.router.build_routes.get('my-route-name')
match = route.regex.match(the_url)
args, kwargs = webapp2._get_route_variables(match, route.defaults.copy())

# do something with args and kwargs, e.g. 
# thing = kwargs['thing-foo'] 
```

源代码：[http ://webapp-improved.appspot.com/_modules/webapp2.html#Route](http://webapp-improved.appspot.com/_modules/webapp2.html#Route)

老实说，我只是将 blob_key 传递给用户可以删除图像的模板，这样我就可以事先构建一个 URL，例如

```
uri_for('delete-image', image_key=some_blob_key) 
```

# php - 如果字符串在数据库中并且末尾包含数字，则不希望生成字符串

> ID：13169425
> 
> 赞同：0
> 
> 时间：2012-11-01T00:38:11.673
> 
> 标签：php, mysql, sql, mysqli

我这里有点情况。如果在我的“会话”表中的数据库中，如果我有以下数据：

```
SessionId

C 
```

然后我的代码发生的情况是，当用户生成一个新字符串时它不会显示上面的字符串，因为它已经在数据库中。这很好用，例如上面

我遇到的问题是，如果我有多个会话（考试），那么在下面的数据库中，它将在数据库中显示如下字符串：

```
SessionId

C1
C2
C3 
```

以上是3次考试。但问题是字符串“ADERF”仍然可以在下面的代码中生成。我的问题是，如果字符串末尾有一个数字，如上表，那么我怎么能不生成仍在数据库中的字符串？字符串总是 5 个字符长：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T00:48:49.840

如果您希望为每个会话/考试提供自己的 id（并且当它们发生冲突时不必担心头痛），请尝试使用[GUID](http://php.net/manual/en/function.com-create-guid.php)。[几乎没有碰撞](https://stackoverflow.com/questions/184869/are-guid-collisions-possible)的机会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T01:04:28.083

将您的查询更改为：

```
$result = "SELECT SessionId FROM Session WHERE SessionId LIKE CONCAT(?, '%')"; 
```

# c# - 这个 JavaScript 有什么问题（在 MVC 3 中使用 Ajax 调用）？

> ID：13169426
> 
> 赞同：0
> 
> 时间：2012-11-01T00:38:30.880
> 
> 标签：c#, asp.net-mvc, jquery

*这是我的 JavaScript：*

```
<script type="text/javascript">
    $(function () {
        $("select#City_DDL_ID").change(function (evt) {
            if ($("select#City_DDL_ID").val() != "-1") {
                $.ajax({
                    url: "/Home/GetHotels",
                    type: 'POST',
                    dataType: "json",
                    data: { id: $("select#City_DDL_ID").val() },
                    success: function (response) {
//                        $('#Hotel_DDL_ID').attr('disabled', false);
                        $("select#Hotel_DDL_ID").replaceWith(response);
                    },
                    error: function (xhr) {
                        alert("Something went wrong, pleae try again");
                    }
                });
            }
        });
    }); 
```

*这是 Index.cshtml：*

```
@model RoomReservation.Webb.Models.HomeViewModel

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Index</h2>

<fieldset>
    <legend>Select a city and a hotel</legend>
    <br />
    <br />
    <br />
    @Html.DropDownListFor(x=>x.City_DDL_ID, new SelectList(Model.AllCities, "Value", "Text"),"...pick a city..." )
    <br />
    <br />
    @Html.DropDownListFor(x => x.Hotel_DDL_ID, Enumerable.Empty<SelectListItem>(), "...pick a hotel...", new { disabled = "disabled"})
    <br />
    <br />
</

fieldset> 
```

*这是ajax调用的方法：*

```
public JsonResult GetHotels(int id) 
{
   if (id > 0)
   {
      var hotels = bl.ReturnAllHotelsInCity(id);
      return Json(hotels);
   }
   else
   {
      throw new Exception("Hotel not reachable, please try again");
   }
} 
```

在 City_DDL_ID 中选择城市后，我的 Hotel_DDL_ID 消失。你能帮帮我吗，我是 javasrcipt 和 ajax 的新手？

这是 newset 脚本，但仍然无法正常工作：

```
<script type="text/javascript" language="javascript">
    $('#City_DDL_ID').change(function () {
        var selectedCity = $(this).val();
        if (selectedCity != null && selectedCity != '-1') {
            $.getJSON('@Url.Action("GetHotels")', { id: selectedCity }, function (hotels) {
                var hotelsSelect = $('#Hotel_DDL_ID');
                hotelsSelect.empty();
                $.each(hotels, function (index, hotel) {
                    hotelsSelect.append($('<option/>',
                    {
                        value: hotel.Value,
                        text: hotel.Text
                    }));
                });
                $('#Hotel_DDL_ID').attr('disabled', false);
            });
        }
    });
</script> 
```

那么该怎么办？

谢谢大家的帮助，我的这个最新脚本正在运行，我将默认浏览器更改为 Chrome。再次感谢大家 干杯

PS 管理员：如何将问题标记为已回答？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T00:54:29.037

$("select#Hotel_DDL_ID"). **替换**（响应）；

replaceWith 说明了一切，它用新内容**替换**了内容。

如果您只想更改 [Hotel_DDL_ID] 的内容/值，您需要评估（不意味着使用 eval()！）响应并相应地更新选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T00:42:49.293

您正在从您的方法返回 JSON，然后替换`select#Hotel_DDL_ID`为该 JSON。这意味着您的选择列表将被浏览器不会呈现的 JSON 字符串替换。

> $("select#Hotel_DDL_ID").replaceWith(response);

`response`在这种情况下是 JSON 对象，而不是 HTML`select`元素

您需要解析 JSON 并使用内容重新填充选择列表，查看[此问题](https://stackoverflow.com/questions/1502649/jquery-getjson-populate-select-menu-question)的已接受答案以查看示例

也许是这样的：

```
var html = '';
var len = response.length;
for (var i = 0; i< len; i++) {
    html += '<option value="' + response[i].Value+ '">' + response[i].Text+ '</option>';
}
$("select#Hotel_DDL_ID").html(html); 
```

或者，您可以修改操作以返回将选择列表呈现为 HTML 的局部视图，然后您的代码将起作用

# oracle - 如何将特定格式的日期插入到oracle中的表中

> ID：13169431
> 
> 赞同：1
> 
> 时间：2012-11-01T00:39:00.207
> 
> 标签：oracle, oracle10g

`select`如何以特定格式（如“yyyy-mm-dd”）将日期插入表中，并且我需要使用不应该使用`to_date`或`to_char`转换的语句以上述指定格式检索日期列的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T05:15:52.890

日期存储为 7 个字节：

1.  世纪 + 100
2.  年 + 100
3.  月
4.  一个月中的哪一天
5.  小时 + 1
6.  分钟 + 1
7.  第二 + 1

世纪和年份都有偏移量 (100) 以分别允许负世纪和年份（BC 日期需要）。并且小时、分钟、秒有偏移+1，以确保日期本身永远不会包含NULL。我们可以使用`dump`函数来获取日期的内部表示。

```
SQL> create table TB_Date(
  2    dt date
  3  )
  4  ;

Table created

SQL> insert into tb_date(dt) values(sysdate);

1 row inserted

SQL> commit;

Commit complete

SQL> select dump(dt) from tb_date;

DUMP(DT)
------------------------------------
Typ=12 Len=7: 120,112,11,1,9,49,26 
```

尽管在内存中日期的表示形式略有不同（长度为 8 个字节）。

话虽如此，您不能以特定格式存储日期（数据类型的`DATE`数据） - 您可以以特定格式显示它们。日期显示的默认格式由`NLS_DATE_FORMAT`参数定义。是的，您可以在数据类型列中以特定格式存储日期`varchar2`，但非常不鼓励这样做并且有很多缺点：

1.  额外的计算。每次您需要实现日期算术时，您都必须使用隐式（不是一个好主意）或显式（使用`to_date`函数）数据类型转换。
2.  每次如果“日期”必须以不同的格式显示，您必须使用`TO_CHAR(TO_DATE())`调用。
3.  如果日期取决于时区怎么办？

还有很多。

因此，将日期存储为`date`数据类型的值，并使用`TO_CHAR()`函数或`NLS_DATE_FORMA`T 参数以所需格式**显示**日期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T04:42:10.820

您不应该以不同的格式插入它，而是在您要使用它时重新格式化日期

```
SELECT TO_CHAR(date, 'DD/MM/YYYY') AS date FROM table;
// will give: day/month/year 
```

我不明白为什么不使用 TO_CHAR 只是因为这就是这样做的方法。

# c# - 使用 .htacces 密码文件保护时，如何使用 WebRequest 登录？

> ID：13169437
> 
> 赞同：0
> 
> 时间：2012-11-01T00:40:13.227
> 
> 标签：c#, .htaccess, httpwebrequest, webrequest

我想使用`WebRequest`该类登录。

```
var http = WebRequest.Create("http://www.xxx.nl/admin/xxx.php?id=3005"); 
```

我想我需要对班级做点什么，`NetworkCredential`但我只需要填写用户名和密码吗？

另外，我不知道我最终将如何接收页面数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T01:04:27.147

您需要提供`ICredentials`该类的实现以`WebRequest`. `NetworkCredentials`是`ICredentials`您可以使用的实现。

具体细节取决于您的 .htaccess 文件。我假设您使用 .htaccess 文件中定义的用户名和密码进行基本身份验证。您需要创建一个新`NetworkCredentials`对象并传入 .htaccess 文件中定义的用户名和密码。我不是 100% 确定，但您可能需要设置`NetworkCredentials.Domain`属性以匹配 .htaccess 文件中定义的“领域”。

查看[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/71b57yke.aspx)，了解如何创建`NetworkCredentials`实例并将其与`WebRequest`实例一起使用的示例。

# java - 无法停止使用 Camel ActiveMQ JMS 记录堆栈跟踪

> ID：13169439
> 
> 赞同：2
> 
> 时间：2012-11-01T00:40:16.797
> 
> 标签：java, exception, activemq, apache-camel

我将 Camel 2.9.1 与 Spring 3.1.1.RELEASE 和 ActiveMQ 5.5.1 一起使用。

我有一个 Swing GUI 客户端，它使用 Camel JMS 对数据服务进行`@InOut`请求-答复调用，该数据服务在我们服务器上的 Karaf/Felix OSGi 容器的捆绑包中运行。

在某些情况下，此服务会引发我们想要在客户端处理的异常。

当抛出这些异常时，Camel 将它们传递回包裹在 a 中的客户端，`RuntimeCamelException`并且一切正常。

但是现在我想抑制当异常传回客户端时 Camel 似乎自动记录的堆栈跟踪。这是来自服务器日志的片段：

```
2012-11-01 13:04:13,463 | ERROR | org.apache.camel.util.CamelLogger | Failed delivery for (MessageId: ID-pc01-48122-1351720826468-9-121549 on ExchangeId: ID-pc01-48122-1351720826468-9-121547). Exhausted after delivery attempt: 1 caught:org.apache.camel.RuntimeCamelException: our.own.SomethingException: Some explanation of exception here
org.apache.camel.RuntimeCamelException: our.own.SomethingException: Some explanation of exception here
    at org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1221)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.component.bean.BeanInvocation.invoke(BeanInvocation.java:87)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:128)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:99)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:73)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.impl.ProcessorEndpoint.onExchange(ProcessorEndpoint.java:101)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.impl.ProcessorEndpoint$1.process(ProcessorEndpoint.java:71)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.util.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:61)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)[120:org.apache.camel.camel-core:2.9.1]
... etc. 
```

在日志中紧随其后的是：

```
2012-11-01 13:04:13,517 | WARN  | org.apache.camel.util.CamelLogger | Execution of JMS message listener failed. Caused by: [org.apache.camel.RuntimeCamelException - our.own.SomethingException: Some explanation of exception here]
org.apache.camel.RuntimeCamelException: our.own.SomethingException: Some explanation of exception here
    at org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1221)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.component.bean.BeanInvocation.invoke(BeanInvocation.java:87)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:128)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:99)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:73)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.impl.ProcessorEndpoint.onExchange(ProcessorEndpoint.java:101)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.impl.ProcessorEndpoint$1.process(ProcessorEndpoint.java:71)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.util.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:61)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.processor.SendProcessor$2.doInAsyncProducer(SendProcessor.java:115)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.impl.ProducerCache.doInAsyncProducer(ProducerCache.java:285)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:110)[120:org.apache.camel.camel-core:2.9.1]
...etc 
```

**现在，客户端**的 Spring 文件具有以下定义：

```
<bean id="jms" class="org.apache.activemq.camel.component.ActiveMQComponent">
    <property name="brokerURL" value="tcp://${current.host}:${current.port}?jms.prefetchPolicy.queuePrefetch=0"/>
    <property name="transacted" value="false"/>
    <property name="requestTimeout" value="60000"/>
    <property name="transferException" value="true"/>
    <property name="errorHandlerLogStackTrace" value="false"/>
    <property name="concurrentConsumers" value="1"/>
    <property name="maxConcurrentConsumers" value="1"/>
</bean> 
```

哪个`errorHandlerLogStackTrace`属性设置为“false”，所以我不确定为什么它仍在记录堆栈跟踪。

我是否需要在服务器端进行类似的属性设置（因为这是包含堆栈跟踪的服务器日志）？

顺便说一句，这些东西大部分是由不再为我们工作的前员工设置的。尽管我对正在发生的事情有相当好的了解，但其中一些对我来说仍然是个谜。

**更新：2012 年 5 月 11 日 - 在克劳斯的回答之后**

好的，我深入挖掘了 Spring DSL XML 文件，发现 JMS 组件是在服务器上定义的一个单独的 OSGi 包中，称为“代理”，其他服务器包所指的是该包。该捆绑包具有与客户端相同的“jms”bean 的 XML 定义（上图）。

我在这个定义中添加了“errorHandlerLogStackTrace”属性，这已经成功地摆脱了堆栈跟踪之一。我现在得到的是一个带有堆栈跟踪的错误，然后是一个没有堆栈跟踪的 WARN。这是一个更完整的片段：

```
2012-11-05 10:44:35,323 | ERROR | org.apache.camel.util.CamelLogger | Failed delivery for (MessageId: ID-pc01-38192-1352065125718-9-62 on ExchangeId: ID-pc01-38192-1352065125718-9-60). Exhausted after delivery attempt: 1 caught: org.apache.camel.RuntimeCamelException: our.own.SomethingException: Some explanation of exception here
org.apache.camel.RuntimeCamelException: our.own.SomethingException: Some explanation of exception here
    at org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1221)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.component.bean.BeanInvocation.invoke(BeanInvocation.java:87)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:128)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:99)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:73)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.impl.ProcessorEndpoint.onExchange(ProcessorEndpoint.java:101)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.impl.ProcessorEndpoint$1.process(ProcessorEndpoint.java:71)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.util.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:61)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.processor.SendProcessor$2.doInAsyncProducer(SendProcessor.java:115)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.impl.ProducerCache.doInAsyncProducer(ProducerCache.java:285)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:110)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:71)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.processor.interceptor.TraceInterceptor.process(TraceInterceptor.java:91)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.processor.RedeliveryErrorHandler.processErrorHandler(RedeliveryErrorHandler.java:333)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:223)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:45)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.processor.interceptor.DefaultChannel.process(DefaultChannel.java:304)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:45)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.processor.UnitOfWorkProcessor.processAsync(UnitOfWorkProcessor.java:150)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.processor.UnitOfWorkProcessor.process(UnitOfWorkProcessor.java:117)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:71)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:99)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:86)[120:org.apache.camel.camel-core:2.9.1]
    at org.apache.camel.component.jms.EndpointMessageListener.onMessage(EndpointMessageListener.java:104)[147:org.apache.camel.camel-jms:2.9.1]
    at org.springframework.jms.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:562)[63:org.springframework.jms:3.1.1.RELEASE]
    at org.springframework.jms.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:500)[63:org.springframework.jms:3.1.1.RELEASE]
    at org.springframework.jms.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:468)[63:org.springframework.jms:3.1.1.RELEASE]
    at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.doReceiveAndExecute(AbstractPollingMessageListenerContainer.java:326)[63:org.springframework.jms:3.1.1.RELEASE]
    at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:264)[63:org.springframework.jms:3.1.1.RELEASE]
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:1071)[63:org.springframework.jms:3.1.1.RELEASE]
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.executeOngoingLoop(DefaultMessageListenerContainer.java:1063)[63:org.springframework.jms:3.1.1.RELEASE]
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:960)[63:org.springframework.jms:3.1.1.RELEASE]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)[:1.6.0_24]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)[:1.6.0_24]
    at java.lang.Thread.run(Thread.java:662)[:1.6.0_24]
Caused by: our.own.SomethingException: Some explanation of exception here
    at uniworks.ServiceManagers.SuperDataManager.createInUseForEntity(SuperDataManager.java:2156)[220:uniworks-ejb:1.1.4.SNAPSHOT]
    at uniworks.ServiceManagers.SuperDataManager.findForEdit(SuperDataManager.java:913)[220:uniworks-ejb:1.1.4.SNAPSHOT]
    at uniworks.ServiceManagers.SuperDataManager.findForEdit(SuperDataManager.java:853)[220:uniworks-ejb:1.1.4.SNAPSHOT]
    at uniworks.ServiceManagers.SuperDataManager.findForEdit(SuperDataManager.java:843)[220:uniworks-ejb:1.1.4.SNAPSHOT]
    at sun.reflect.GeneratedMethodAccessor106.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)[:1.6.0_24]
    at java.lang.reflect.Method.invoke(Method.java:597)[:1.6.0_24]
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)[55:org.springframework.aop:3.1.1.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)[55:org.springframework.aop:3.1.1.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)[55:org.springframework.aop:3.1.1.RELEASE]
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)[65:org.springframework.transaction:3.1.1.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)[55:org.springframework.aop:3.1.1.RELEASE]
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)[55:org.springframework.aop:3.1.1.RELEASE]
    at $Proxy221.findForEdit(Unknown Source)
    at sun.reflect.GeneratedMethodAccessor106.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)[:1.6.0_24]
    at java.lang.reflect.Method.invoke(Method.java:597)[:1.6.0_24]
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)[55:org.springframework.aop:3.1.1.RELEASE]
    at org.springframework.osgi.service.importer.support.internal.aop.ServiceInvoker.doInvoke(ServiceInvoker.java:58)
    at org.springframework.osgi.service.importer.support.internal.aop.ServiceInvoker.invoke(ServiceInvoker.java:62)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)[55:org.springframework.aop:3.1.1.RELEASE]
    at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:131)[55:org.springframework.aop:3.1.1.RELEASE]
    at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:119)[55:org.springframework.aop:3.1.1.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)[55:org.springframework.aop:3.1.1.RELEASE]
    at org.springframework.osgi.service.util.internal.aop.ServiceTCCLInterceptor.invokeUnprivileged(ServiceTCCLInterceptor.java:56)
    at org.springframework.osgi.service.util.internal.aop.ServiceTCCLInterceptor.invoke(ServiceTCCLInterceptor.java:39)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)[55:org.springframework.aop:3.1.1.RELEASE]
    at org.springframework.osgi.service.importer.support.LocalBundleContextAdvice.invoke(LocalBundleContextAdvice.java:59)[90:org.springframework.osgi.core:1.2.1]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)[55:org.springframework.aop:3.1.1.RELEASE]
    at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:131)[55:org.springframework.aop:3.1.1.RELEASE]
    at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:119)[55:org.springframework.aop:3.1.1.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)[55:org.springframework.aop:3.1.1.RELEASE]
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)[55:org.springframework.aop:3.1.1.RELEASE]
    at $Proxy1044.findForEdit(Unknown Source)
    at sun.reflect.GeneratedMethodAccessor106.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)[:1.6.0_24]
    at java.lang.reflect.Method.invoke(Method.java:597)[:1.6.0_24]
    at org.apache.camel.component.bean.BeanInvocation.invoke(BeanInvocation.java:83)[120:org.apache.camel.camel-core:2.9.1]
    ... 46 more
2012-11-05 10:44:35,335 | WARN  | org.apache.camel.util.CamelLogger | Execution of JMS message listener failed. Caused by: [our.own.SomethingException: Some explanation of exception here] 
```

现在，这里可能使这些复杂化的是此方法调用所采用的“路径”。

客户端使用 JMS Request-Reply 消息使用以下路由定义调用服务器：

```
<bean id="animalTypeDataManager" class="org.apache.camel.spring.remoting.CamelProxyFactoryBean">
    <property name="serviceUrl" value="jms:animalTypeDataManager"/>
    <property name="serviceInterface" value="uniworks.ServiceManagers.a.Animal.AnimalTypeDataInterface"/>
</bean> 
```

该路由的服务器端在一个 OSGi 包中定义（让我们调用“BundleA”），如下所示：

```
<camel:route>
    <camel:from uri="jms:animalTypeDataManager"/>
    <camel:to uri="bean:osgi_animalTypeDataManager"/>
</camel:route> 
```

这条路线中提到的 bean 实际上作为 OSGi 的“服务”在另一个包 ('BundleB') 中。BundleA 对此 bean 的引用定义如下：

```
<reference id="osgi_animalTypeDataManager" 
           interface="uniworks.ServiceManagers.a.Animal.AnimalTypeDataInterface"/> 
```

BundleB 的服务定义如下：

```
<service id="osgi_animalTypeDataManager" ref="animalTypeDataManager" 
         interface="uniworks.ServiceManagers.a.Animal.AnimalTypeDataInterface"/> 
```

正是这个最终的服务 bean 引发了异常。

我可以`errorHandler`在这些路由的每个服务器端（在 BundleA 中）放置一个，但我希望能够在一个地方通用地执行此操作。

我尝试在 BundleA 中定义一个日志记录错误处理程序（根据[Camel Documentation](http://camel.apache.org/error-handler.html)），如下所示：

```
<camel:errorHandler id="loggingErrorHandler" type="LoggingErrorHandler" logName="mylogger.name" level="DEBUG"/>

<camel:camelContext id="bundleA_camel" errorHandlerRef="loggingErrorHandler">

..... [jms routes defined in here]

</camel:context> 
```

但这似乎没有任何区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T08:26:01.320

带有堆栈跟踪的第一个日志来自 Camel 的错误处理程序，默认情况下，该日志在堆栈跟踪的 ERROR 级别耗尽故障。您可以根据自己的喜好进行配置。请参阅 Camel 的错误处理程序文档中的详细信息。 [http://camel.apache.org/error-handling-in-camel.html](http://camel.apache.org/error-handling-in-camel.html)

第二个日志来自 JmsConsumer 和选项 errorHandlerLogStackTrace=false，应该强制它不记录堆栈跟踪。我不确定 Camel 2.9.1 在这方面是否存在错误。我尝试了最新的 Camel，它在那里运行良好。

这是一个可以帮助您的单元测试 [http://svn.apache.org/viewvc?rev=1405307&view=rev](http://svn.apache.org/viewvc?rev=1405307&view=rev)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T03:03:51.857

好的，经过克劳斯的提示，以及[这里](http://camel.apache.org/error-handler.html#ErrorHandler-Springbasedconfiguration)的骆驼文档部分，我终于设法摆脱了堆栈跟踪。

在 Camel 上下文的 Spring DSL 定义包含获取 JMS 消息并将它们传递到`bean`引用的路由之前，我定义了一个 a 的实例，`noErrorHandler`如下所示：

```
<camel:errorHandler id="noErrorHandler" type="NoErrorHandler"/> 
```

然后，我将该错误处理程序添加到 Camel 上下文本身，因此：

```
<camel:camelContext id="bundle_camel" errorHandlerRef="noErrorHandler"> 
```

现在，bean 抛出的任何异常都将传播回调用者，而无需 Camel 记录堆栈跟踪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-01T11:39:49.847

您也可以使用**logExhausted(false)**

```
onException(Exception.class)
            .handled(true)
            .logExhausted(false) 
```

# wcf - 在 IIS 7 中托管 WCF 控制台应用程序

> ID：13169446
> 
> 赞同：3
> 
> 时间：2012-11-01T00:41:33.280
> 
> 标签：wcf, iis, iis-7, wcf-hosting

我有一个带有以下 app.config 文件的 WCF 控制台应用程序

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="serviceBehavior">
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <netNamedPipeBinding>
        <binding name="namedPipeBindingConfig" maxBufferPoolSize="268435456" maxBufferSize="16777216" maxReceivedMessageSize="16777216" />
      </netNamedPipeBinding>
    </bindings>

    <services>
      <service behaviorConfiguration="serviceBehavior" name="MyTestNamespace.MyTestClassService">
        <endpoint address="net.pipe://localhost/MyService"
          binding="netNamedPipeBinding" bindingConfiguration="namedPipeBindingConfig"
          name="NamedPipeBinding" contract="MyTestNamespace.IMyTestContract" />
      </service>
    </services>
  </system.serviceModel>
</configuration> 
```

我将它作为控制台应用程序托管（接口、实现和托管类都在一个项目中），基本上是这样做的：

```
ServiceHost host = new ServiceHost(typeof(MyTestClassService));
host.Open(); 
```

我从命令提示符“C:\SomePath\>RunMyService.exe”运行，它启动并运行良好。现在，我计划在 IIS 7 中托管它，但我没有找到任何关于如何在此处部署这个（特别是控制台应用程序）的好例子。我的几个问题是：

1）我需要在IIS中“添加网站”或“添加应用程序”并将我的文件放在那里吗？

2) 我需要一个 .svc 文件吗？如果是，它必须包含什么以及如何告诉它启动这个控制台应用程序。

3) 这个控制台应用程序会在 IIS 中运行吗？这是如何运作的 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T01:13:05.327

是的，您需要在 IIS 中定义一个网站才能在 IIS 中托管您的服务。此外，您实际上不会在此配置中运行控制台应用程序。换句话说，永远不会调用 Program.Main 函数。相反，IIS 将使用自己的 ServiceHost 实现直接加载您的 MyTestClassService。

尽管*可能*可以将控制台应用程序二进制文件与 IIS 一起使用（我说可能是因为我实际上从未这样做过，但从技术上讲应该是可行的），但将服务实现代码移动到单独的代码中可能更有意义类库项目。然后，您可以从 ServiceHost 控制台应用程序和 IIS 引用类库项目。这将不会让其他开发人员感到困惑。在任何情况下，您都必须将包含您的服务接口和服务定义的二进制文件放入您将托管服务的网站的 bin 目录中。

当前驻留在您的 app.config 文件中的配置必须移动到您网站的 web.config 文件中，并且您必须使用不同的绑定，因为 IIS 不支持`net.pipe`.

您不必使用 .svc 文件；如果您愿意，可以使用[基于配置的激活。](http://msdn.microsoft.com/en-us/library/ee358764.aspx)这将允许您设置一个空网站，其中只有一个 web.config 文件来托管您的服务。

要点是您不会托管控制台应用程序，而是托管服务。现在，您的控制台应用程序充当服务主机；当您重新配置 IIS 时，它将扮演该角色。要查找更多资源，只需查找有关在 IIS 上托管 WCF 的信息；您当前在控制台应用程序中使用 ServiceHost 托管的事实无关紧要。

# html - 将按钮分配给输入字段

> ID：13169447
> 
> 赞同：3
> 
> 时间：2012-11-01T00:41:34.670
> 
> 标签：html, button, enter

有没有办法将输入字段分配给 html 中的按钮，以便在输入中按 enter 触发按钮的 onclick 调用的操作？

我知道可以通过使用输入的keydown事件并直接调用按钮的onclick中的代码来完成，但是没有更好的方法吗？像 stg 纯 html 一样，像标签的*for="someId"*属性，或者至少是 jQuery 中的单行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T02:25:52.537

您可以随时调用`.click()`jQuery 中的方法，该方法将激活按钮的单击功能。因此，如果有一个带有 id 的按钮`#colorme`，那么您可以调用如下内容：

```
if(e.keyCode == 13) $('#colorme').click(); 
```

这是用于操作的[jsFiddle](http://jsfiddle.net/t2tuk/1/)。否则，AFAIK 它不是标准的 HTML 事情，所以这样的事情是你最好的选择。

您甚至可以将其抽象为一个更易于访问的函数。

# c++ - 我能保证 sizeof(type) == sizeof(unsigned type) 吗？

> ID：13169451
> 
> 赞同：26
> 
> 时间：2012-11-01T00:42:08.273
> 
> 标签：c++, c, sizeof, language-lawyer, standards-compliance

sizeof char, int, long double... 可能因编译器而异。但是我是否根据 C++11 或 C11 标准保证任何有符号和无符号基本整数类型的大小是相同的？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-01T00:45:01.977

C++11 标准对整数类型进行了说明：

> （第 3.9.1/3 节）对于每个标准有符号整数类型，都存在相应的（但不同的）标准无符号整数类型：“unsigned char”、“unsigned short int”、“unsigned int”、“unsigned long int ”和“unsigned long long int”，每个都占用相同的存储量，并且与对应的有符号整数类型具有相同的对齐要求（3.11）；也就是说，每个有符号整数类型都具有与其对应的无符号整数类型相同的对象表示。同样，对于每个扩展的有符号整数类型，都存在一个对应的扩展无符号整数类型，具有相同的存储量和对齐要求。[...]

所以答案是肯定的。

对于C11，这里有对应的说法（这个来自N1570）：

> （§6.2.5/6）对于每个有符号整数类型，都有一个对应的（但不同的）无符号整数类型（用关键字 unsigned 指定），它使用相同的存储量（包括符号信息）并具有相同的对齐要求 [...]

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-08-14T18:34:02.423

是的，可以完全保证**sizeof(signed type) 等于 sizeof(unsigned type)**因为 unsigned 只占用有符号类型的负数空间来增加其范围。

# python - 如何按日期对列表进行排序？

> ID：13169456
> 
> 赞同：0
> 
> 时间：2012-11-01T00:42:27.183
> 
> 标签：python, list, date, sorting

日期保存格式为：2012-09-28。如何对列表进行排序，以使最近发布的项目排在列表的首位？

```
feed = []
for entry in entries:
        #code that saves title, desc, thumbnail, video, author, url, length, and date
        feed.append([title, desc, thumbnail, video, author, url, length, date ]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T00:46:26.477

```
sorted(feed, key=lambda x:x[7], reverse=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T07:01:53.840

我会这样做以避免创建提要的中间副本：

```
def parsed_entries(entries):
    for entry in entries:
        # code that extracts fields from an entry...
        yield [title, desc, thumbnail, video, author, url, length, date]

feed = sorted(parsed_entries, key=lambda entry: entry[7], reversed=True) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T00:46:24.643

您很幸运，日期已经采用可排序的格式。只需选择适当的字段进行排序即可。

```
sorted_feed = sorted(feed, key=lambda data: data[7], reverse=True) 
```

# javascript - 如何比较 Knockout.js foreach 中的 2 个索引？

> ID：13169457
> 
> 赞同：0
> 
> 时间：2012-11-01T00:42:33.157
> 
> 标签：javascript, knockout.js

简单的问题：在 ViewModel 中，我有一个要迭代的值数组，我们称它们为“工作”。每个工作都是`{type: myType, name: myName}`.
我想`<hr />`在工作类型之间放置一个来分隔它们。我尝试了以下方法，但我认为我的语法有问题：

```
<!-- ko foreach: jobs -->
  <div class="job" data-bind="text: name"></div>
  <!-- ko if: ($index() > 0 && $parent[$index()].type != $parent[$index() - 1].type) -->
    <hr />
  <!-- /ko -->
<!-- /ko --> 
```

没有`<!-- ko if -->`它，一切都很好，我得到了一个很好的清单。
有了这个`if`，我打印了前 2 个作业名称，然后是`hr`（错误的，因为我有 6 个第一种类型的作业），然后是这个错误：

> 未捕获的错误：无法解析绑定。
> 消息：TypeError：无法读取未定义的属性“类型”；
> 绑定值：如果： ($index() > 0 && $parent[$index()].type != $parent[$index() - 1].type)

根据记录，有 18 个工作，属于 3 种不同类型。
我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T00:55:25.187

在`$parent`此上下文中是包含属性的对象`jobs`。所以你必须索引到`$parent.jobs`.

```
<!-- ko if: ($index() > 0 && $data.type != $parent.jobs[$index() - 1].type) -->
    <hr />
<!-- /ko --> 
```

# php - 有没有办法让第二段不寻找功能？

> ID：13169458
> 
> 赞同：-1
> 
> 时间：2012-11-01T00:42:37.263
> 
> 标签：php, codeigniter

现在我的网站设置为重定向到控制器名称主页。

所以基本上当我输入 www.domain.com/home 或 www.domain.com 时，我最终会进入家庭控制器。

现在在那个控制器//页面中，我正在从数据库中加载一些表——这些数据不时需要分页。这意味着分页的链接是：www.domain.com/home/3/

现在，当访问此地址时，我设置它的方式 CI 转到家庭控制器并查找函数名称 3。

我的问题是：

有没有办法让 CI 将 3 视为变量而不是函数。还有一种方法可以仅针对网站的该部分进行（我之所以问这个问题是因为我的整个管理面板已经设置为正常的“www.domain.com/admin/function/variable”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T03:35:04.903

当我打开主控制器时，我有“第一页”，但如果我想查看下一页，控制器有分页结果的功能。IE：

对于我的第一页，这是链接：

```
http://127.0.0.1/thesis/index.php/profiles/ 
```

当我切换到下一页时，URL 变为：

```
http://127.0.0.1/thesis/index.php/profiles/list/20 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T02:53:05.563

这就是我解决问题的方法：

在阅读了更多内容后，我了解到我可以将地址路由到某些控制器/功能。

似乎在配置文件（application/config/routes.php）中有一个路由文件，通过在该文件中添加一两行我的问题得到了解决

我添加了以下行： $route['home/(:num)'] = "home"; 它将家/号码重定向到家。

有很多方法可以做到这一点，但上述方法对我来说很好。

有关路由的完整说明：

```
[ellislab.com/codeigniter/user_guide/general/routing.html][1] 
```

希望对其他 Codeigniters 有所帮助。

# compilation - 使用 -static-libgcc 和 -static-libstdc++ 编译 libconfig++

> ID：13169461
> 
> 赞同：1
> 
> 时间：2012-11-01T00:42:50.773
> 
> 标签：compilation, linker, libtool

我正在尝试编译[libconfig++](http://www.hyperrealm.com/libconfig/)版本 1.4.8

```
make LDFLAGS='-static-libstdc++ -static-libgcc' 
```

但这似乎不起作用，因为我仍然得到：

```
$ readelf -d lib/.libs/libconfig++.so | grep NEEDED
 0x0000000000000001 (NEEDED)             Shared library: [libstdc++.so.6]
 0x0000000000000001 (NEEDED)             Shared library: [libm.so.6]
 0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]
 0x0000000000000001 (NEEDED)             Shared library: [libgcc_s.so.1] 
```

我注意到 so 文件的倒数第二个编译步骤包含我的 LDFLAGS：

```
/bin/bash ../libtool --tag=CXX   --mode=link g++  -g -O2 -Wall -Wshadow -Wextra -Wno-unused-parameter -version-info 10:3:1 -no-undefined -static-libgc
c -o libconfig++.la -rpath /usr/local/lib libconfig___la-libconfig.lo libconfig___la-scanner.lo libconfig___la-grammar.lo libconfig___la-scanctx.lo li
bconfig___la-strbuf.lo libconfig___la-libconfigcpp.lo 
```

而看起来最后一个没有：

```
libtool: link: g++  -fPIC -DPIC -shared -nostdlib /usr/lib/gcc/x86_64-linux-gnu/4.7/../../../x86_64-linux-gnu/crti.o /usr/lib/gcc/x86_64-linux-gnu/4.7
/crtbeginS.o  .libs/libconfig___la-libconfig.o .libs/libconfig___la-scanner.o .libs/libconfig___la-grammar.o .libs/libconfig___la-scanctx.o .libs/libc
onfig___la-strbuf.o .libs/libconfig___la-libconfigcpp.o   -L/usr/lib/gcc/x86_64-linux-gnu/4.7 -L/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../x86_64-linu
x-gnu -L/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../lib -L/lib/x86_64-linux-gnu -L/lib/../lib -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib -L/usr/l
ib/gcc/x86_64-linux-gnu/4.7/../../.. -lstdc++ -lm -lc -lgcc_s /usr/lib/gcc/x86_64-linux-gnu/4.7/crtendS.o /usr/lib/gcc/x86_64-linux-gnu/4.7/../../../x
86_64-linux-gnu/crtn.o  -O2   -Wl,-soname -Wl,libconfig++.so.9 -o .libs/libconfig++.so.9.1.3 
```

这可能是它的原因吗？在这种情况下，我将如何修复/解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:18:22.503

似乎 libconfig++ Makefile 只是忽略了 LDFLAGS，因为我根本没有看到“-static-libstdc++”被拾取。

尝试这个：

```
CXX="g++ -static" make 
```

或者只是将 LDFLAGS 放在make*之前*，而不是之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-17T21:17:53.483

-static-libgcc 是 GCC 选项，而不是链接器选项。把它放在 CFLAGS 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-16T00:12:39.520

确保您 $(LD_FLAGS) 包含在您的链接调用中。

附带说明一下，您的链接器可能会选择一个动态 (*.so) 库，该库会阻止使用 -static-libstdc++ 和 -static-libgcc。每个调用 libgcc 和 libstdc++ 的库都应该静态链接（当然，如果有可用的静态版本）。

# gcc - 使用 ld 生成可执行文件

> ID：13169462
> 
> 赞同：1
> 
> 时间：2012-11-01T00:43:07.857
> 
> 标签：gcc, ld

我在使用 ld 作为链接器的 C 语言中生成一个小型 hello-world 程序时遇到问题。

到目前为止，这些是我的步骤：

```
gcc -c hello.c
ld -o hello hello.o -lc

./hello
-bash: ./hello: no such file or directory 
```

`hello.c`的来源在这里：

```
#include <stdio.h>
int main(){
    puts("Hello, world!");
    return 0;
} 
```

看来我在这里错过了一个重要的部分。既没有`gcc`也`ld`没有任何错误，并且都以返回值 0 结束。

请不要告诉我“只是使用`gcc -o hello hello.c`”！我浏览了大约 10 个板，人们总是给出这个答案。我想知道如何以 ld 方式做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T00:56:14.953

如果您想了解 GCC 实际在做什么，请使用`-v`标志运行它。（例如，`gcc -v -o hello hello.c`。）

您缺少一些 GCC 通常会指示链接器包含的代码。如果您查看 的输出`gcc -v`，您会看到类似`crt1.o -lgcc -lgcc_s`和其他内容。

另请参阅[GCC 文档](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Link-Options.html)以获取诸如 、 和 之类的选项`-nostartfiles`，`-nodefaultlibs`以及`-nostdlib`有关在幕后链接的这些额外代码位的一些上下文。

# assembly - 在 DE2 板上生成 PS2 中断

> ID：13169469
> 
> 赞同：1
> 
> 时间：2012-11-01T00:44:23.940
> 
> 标签：assembly, interrupt, intel-fpga, nios, ps2

我正在尝试在带有 NIOS II 处理器的 DE2 板上生成 PS2 中断。下面的汇编代码是一个非常简单的中断服务程序，但它永远不会被执行。我已经检查并检查了代码，但我无法找出问题所在。附上PS2接口的链接。

任何建议表示赞赏。

问候。

[NIOS II PS2 文档](http://www-ug.eecg.toronto.edu/msl/nios.html)

```
.text

.global _start

_start:

  .equ ADDR_PS2, 0x10000100
  .equ ADDR_PS2_CONTROL, 0x10000104

  /* Enable interrupts for PS2 by writing to bit 0 of the control register */
  movia r2, ADDR_PS2_CONTROL
  movia r3, 0x1
  stw r3, (r2)

  /* Set the PIE bit */
  movia r2, 0x1
  wrctl ctl0, r2

  /* Configure ienable: PS2 IRQ = 7 */
  movia r2, 0x80
  wrctl ienable, r2

  MAIN:
    br MAIN

  .section .exceptions, "ax"

  ISR:
    subi sp, sp, 56
    stw r14, 52(sp)
    stw r13, 48(sp)
    stw r12, 44(sp)
    stw r11, 40(sp)
    stw r10, 36(sp)
    stw r9, 32(sp)
    stw r8, 28(sp)
    stw r7, 24(sp) 
    stw r6, 20(sp)
    stw r5, 16(sp)
    stw r4, 12(sp)
    stw r3, 8(sp)
    stw r2, 4(sp)
    stw r1, 0(sp)
    rdctl r2, ipending
    movia r3, 0x80
    and r2, r2, r3
    bne r0, r2, PS2_HANDLER
    br ISR_RETURN

 PS2_HANDLER:
   /* Acknowledge the interrupt */
   movia r2, ADDR_PS2
   ldb r3, (r2)

   /* Turn on the green LEDs */
   .equ ADDR_GREEN_LEDS, 0x10000010
   movia r2, ADDR_GREEN_LEDS
   movi  r3, 0xff
   stwio r3, (r2)

   /* Wait for a moment */
   movia r2, 25000000
   PS2_WAIT:
   subi r2, r2, 1
   bne r0, r2, PS2_WAIT

   /* Turn off the green LEDs */
   movia r2, ADDR_GREEN_LEDS
   movi  r3, 0x0
   stwio r3, (r2)
   br ISR_RETURN

 ISR_RETURN:
   ldw r14, 52(sp)
   ldw r13, 48(sp)
   ldw r12, 44(sp)
   ldw r11, 40(sp)
   ldw r10, 36(sp)
   ldw r9, 32(sp)
   ldw r8, 28(sp)
   ldw r7, 24(sp)
   ldw r6, 20(sp)
   ldw r5, 16(sp)
   ldw r4, 12(sp)
   ldw r3, 8(sp)
   ldw r2, 4(sp)
   ldw r1, 0(sp)
   addi sp, sp, 56
   subi ea, ea, 4
   eret 
```

# python - ASPX 请求浏览器登录模拟

> ID：13169472
> 
> 赞同：1
> 
> 时间：2012-11-01T00:44:47.130
> 
> 标签：python, mechanize, lxml, python-requests, scraperwiki

我正在尝试在 aspx 网页上发帖。我已成功完成登录并尝试获取页面内容但没有运气。

登录页面后转到`redirect`tmp.aspx，然后它会向您显示主页。

我的代码当前登录并显示 tmp.aspx。我想要的是显示真实页面的脚本。

所以当前流程 login->tmp(display) 我要的流程 login->tmp->default(display)

```
import lxml.html
import requests
starturl = 'http://*/login.aspx'
s = requests.session() # create a session object
r1 = s.get(starturl) #get page 1
html = r1.text
root = lxml.html.fromstring(html)

#pick up the javascript values
EVENTVALIDATION = root.xpath('//input[@name="__EVENTVALIDATION"]')[0].attrib['value']
#find the __EVENTVALIDATION value
VIEWSTATE = root.xpath('//input[@name="__VIEWSTATE"]')[0].attrib['value']
#find the __VIEWSTATE value
# build a dictionary to post to the site with the values we have collected. The __EVENTARGUMENT can be changed to fetch another result page (3,4,5 etc.)
payload = {'__EVENTTARGET':'TransactBtn','__EVENTARGUMENT':'','__EVENTVALIDATION':EVENTVALIDATION,'__VIEWSTATE':VIEWSTATE,'AccountID':'557','UserName':'*','Password':'*'}

# post it
r2 = s.post(starturl, data=payload)
# our response is now page 2
print r2.text 
```

请指教？谢谢

tmp.aspx 源代码。（这是我执行脚本时显示的内容）

```
<body>
    <form name="form1" method="post" action="tmp.aspx" id="form1">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTE2MTY2ODcyMjlkZCOgyU+AdP30f85W4DdUIV6LnCqa" />

    <script type="text/javascript">
        top.location.href = document.location.href;               
        document.forms["form1"].submit();        
    </script>
        &nbsp;&nbsp;</form>
</body> 
```

# cocoa - 10.8 标准共享图标 - 从哪里获得？

> ID：13169492
> 
> 赞同：1
> 
> 时间：2012-11-01T00:47:51.837
> 
> 标签：cocoa, user-interface, toolbar, osx-mountain-lion, nsbundle

我想在我的 Mac 应用程序中添加一个“共享”按钮，就像 Safari 和 OS X 10.8 中的其他应用程序一样。

是否可以在运行时以编程方式从另一个包中获取此图标？还是我应该复制它并将其包含在我的应用程序包中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T01:58:40.353

`[NSImage imageNamed:NSImageNameShareTemplate]`会给你一个带有默认共享图像的 NSImage 。您不需要包含图像的副本，因为它是系统资源（至少在 10.8 中。如果是 10.7 则另当别论）。[这里](http://developer.apple.com/library/mac/documentation/userexperience/conceptual/applehiguidelines/SystemProvidedIcons/SystemProvidedIcons.html#//apple_ref/doc/uid/20000957-CH5-SW2)有其他系统提供的图标列表。

`NSSharingServicePicker`如果您将实施标准共享菜单，您可能还想查找。

# ruby-on-rails - 动态创建文件并下载到用户计算机

> ID：13169494
> 
> 赞同：5
> 
> 时间：2012-11-01T00:48:09.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3, file, download

我想知道是否可以在 Rails 中执行此操作：

在网页上有一个链接。当用户点击链接时，控制器会动态生成一个文件（例如，一个包含 1 到 10 之间的单个随机数的文本文件），并将该文件下载到用户的计算机上。该文件可能暂时存储在服务器上，但不应该永久存在。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T01:03:57.553

`send_data`在控制器中使用：

```
send_data("4", :filename => "my_awesome_file") 
```

如果您已经在服务器上拥有该文件，则可以`send_file`改用

```
send_file(filepath, :filename => "my_awesome_file") 
```

[http://api.rubyonrails.org/classes/ActionController/DataStreaming.html#method-i-send_data](http://api.rubyonrails.org/classes/ActionController/DataStreaming.html#method-i-send_data)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T01:07:43.643

是的，这是可能的。这是我在我的一个应用程序中所拥有的：

```
class DownloadsController < ApplicationController

  def download
    # ...
    send_file CSVConstructor::Constructor.new(...).to_zip 
  end

end 
```

该`download`操作接受从表单提交的参数并将它们发送到自定义类，该类生成一些文件，将它们打包为 zip，并返回文件路径。您必须找出为您自己的应用程序生成文件的最佳方法，但我会推荐类似的方法 - 将功能分支到单独的类中有助于保持控制器轻便。

# android - 在子视图上调用 setVisibility(View.VISIBLE) 后，Android ScrollView 滚动到顶部

> ID：13169495
> 
> 赞同：12
> 
> 时间：2012-11-01T00:48:11.733
> 
> 标签：android, scroll, scrollview, visibility

我有`ScrollView`一个`RelativeLayout`里面有一个。这里面`RelativeLayout`有几个s。`View`这几个`View`s 之一是 a `CheckBox`。当`CheckBox`被检查/未选中时，其他`View`S应该相应地出现/消失。出现和消失的工作正常，但是每次目标`View`s出现或消失时，`ScrollView`滚动都会一直到顶部，我被迫去向下滚动以查看发生了什么。

我用来控制可见性的代码是：

```
public void crossCountryCheckboxClicked(View view)
{
    CheckBox crossCountryCheckBox = (CheckBox)findViewById(R.id.checkbox_cross_country);
    EditText crossCountryHoursTextBox = (EditText)findViewById(R.id.cross_country_hours);
    if (crossCountryCheckBox.isChecked())
    {
        crossCountryHoursTextBox.setVisibility(View.VISIBLE);
    }
    else
    {
        crossCountryHoursTextBox.setVisibility(View.GONE);
    }
} 
```

并通过在 XML 布局文件中指定元素的属性`crossCountryCheckboxClicked()`来调用该方法。`android:onClick``CheckBox`

这是 XML 布局文件：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:custom="http://schemas.android.com/apk/res/logbook.app.activities"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/flight_date"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <EditText
        android:id="@+id/aeroplane_type"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/flight_date"
        android:hint="@string/aeroplane_type" />

    <EditText
        android:id="@+id/aeroplane_registration"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/aeroplane_type"
        android:hint="@string/aeroplane_registration" />

    <EditText
        android:id="@+id/pilot_name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/aeroplane_registration"
        android:hint="@string/pilot_name" />

    <EditText
        android:id="@+id/copilot_name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/pilot_name"
        android:hint="@string/copilot_name" />

    <EditText
        android:id="@+id/from_aerodome"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/copilot_name"
        android:hint="@string/from_aerodome" />

    <EditText
        android:id="@+id/to_aerodome"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/copilot_name"
        android:layout_toRightOf="@id/from_aerodome"
        android:hint="@string/to_aerodome" />

    <EditText
        android:id="@+id/remarks"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/from_aerodome"
        android:hint="@string/remarks" />

    <Spinner
        android:id="@+id/aircraft_engine_type_spinner"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/remarks" />

    <Spinner
        android:id="@+id/time_of_day_spinner"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/aircraft_engine_type_spinner" />

    <Spinner
        android:id="@+id/pilot_role_spinner"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/time_of_day_spinner" />

    <TextView
        android:id="@+id/on_time"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/pilot_role_spinner"
        android:hint="@string/on_time_hint" />

    <TextView
        android:id="@+id/takeoff_time"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/on_time"
        android:hint="@string/takeoff_time_hint" />

    <TextView
        android:id="@+id/landing_time"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/takeoff_time"
        android:hint="@string/landing_time_hint" />

    <TextView
        android:id="@+id/off_time"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/landing_time"
        android:hint="@string/off_time_hint" />

    <Button
        android:id="@+id/button_record"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/off_time"
        android:onClick="recordTime"
        android:padding="5dp"
        android:text="@string/button_record" />

    <Button
        android:id="@+id/button_reset"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/off_time"
        android:layout_toRightOf="@id/button_record"
        android:onClick="resetAllTimes"
        android:padding="5dp"
        android:text="@string/button_reset" />

    <CheckBox
        android:id="@+id/checkbox_ifr"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/button_record"
        android:text="@string/checkbox_ifr"
        android:onClick="ifrCheckboxClicked" />

    <CheckBox
        android:id="@+id/checkbox_cross_country"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/button_record"
        android:layout_toRightOf="@id/checkbox_ifr"
        android:text="@string/checkbox_cross_country"
        android:onClick="crossCountryCheckboxClicked" />

    <Spinner
        android:id="@+id/ifr_type_spinner"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/checkbox_ifr"
        android:visibility="gone" />

    <TextView
        android:id="@+id/label_ifr_approaches"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/ifr_type_spinner"
        android:hint="@string/ifr_landings_label"
        android:visibility="gone" />

    <logbook.app.custom.widgets.NumberSelector
        android:id="@+id/ifr_landings_selector"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/label_ifr_approaches"
        android:visibility="gone"
        custom:orientation="vertical" />

    <EditText
        android:id="@+id/ifr_hours"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/ifr_landings_selector"
        android:hint="@string/ifr_hours_hint"
        android:inputType="number"
        android:visibility="gone" />

    <EditText
        android:id="@+id/cross_country_hours"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/ifr_hours"
        android:hint="@string/cross_country_hours_hint"
        android:inputType="number"
        android:visibility="gone" />

    <TextView
        android:id="@+id/label_takeoffs_landings"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/cross_country_hours"
        android:hint="@string/takeoffs_landings_label" />

    <logbook.app.custom.widgets.NumberSelector
        android:id="@+id/landings_selector"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/label_takeoffs_landings"
        custom:orientation="horizontal" />

    <Button
        android:id="@+id/button_create_log"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/landings_selector"
        android:onClick="createLog"
        android:padding="5dp"
        android:text="@string/button_create_log" />

</RelativeLayout> 
```

`ScrollView`每次其子项的可见性在`View.GONE`和之间更改时，如何阻止滚动到顶部`View.Visible`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-01T11:21:44.183

我认为您想在新的可见视图`crossCountryHoursTextBox` 中向下滚动滚动条，只需像这样滚动滚动条

```
// scrollview at visible textbox
yourscroll.smoothScrollBy(0,crossCountryHoursTextBox.getTop()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T00:51:33.503

尝试这个：

```
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation = "vertical" >

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
   android:layout_height="wrap_content" >

<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >

<TextView
    android:id="@+id/flight_date"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<EditText
    android:id="@+id/aeroplane_type"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/flight_date"
    android:hint="@string/aeroplane_type" />

<EditText
    android:id="@+id/aeroplane_registration"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/aeroplane_type"
    android:hint="@string/aeroplane_registration" />

<EditText
    android:id="@+id/pilot_name"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/aeroplane_registration"
    android:hint="@string/pilot_name" />

<EditText
    android:id="@+id/copilot_name"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/pilot_name"
    android:hint="@string/copilot_name" />

<EditText
    android:id="@+id/from_aerodome"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/copilot_name"
    android:hint="@string/from_aerodome" />

<EditText
    android:id="@+id/to_aerodome"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/copilot_name"
    android:layout_toRightOf="@id/from_aerodome"
    android:hint="@string/to_aerodome" />

<EditText
    android:id="@+id/remarks"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/from_aerodome"
    android:hint="@string/remarks" />

<Spinner
    android:id="@+id/aircraft_engine_type_spinner"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/remarks" />

<Spinner
    android:id="@+id/time_of_day_spinner"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/aircraft_engine_type_spinner" />

<Spinner
    android:id="@+id/pilot_role_spinner"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/time_of_day_spinner" />

<TextView
    android:id="@+id/on_time"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/pilot_role_spinner"
    android:hint="@string/on_time_hint" />

<TextView
    android:id="@+id/takeoff_time"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/on_time"
    android:hint="@string/takeoff_time_hint" />

<TextView
    android:id="@+id/landing_time"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/takeoff_time"
    android:hint="@string/landing_time_hint" />

<TextView
    android:id="@+id/off_time"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/landing_time"
    android:hint="@string/off_time_hint" />

<Button
    android:id="@+id/button_record"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/off_time"
    android:onClick="recordTime"
    android:padding="5dp"
    android:text="@string/button_record" />

<Button
    android:id="@+id/button_reset"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/off_time"
    android:layout_toRightOf="@id/button_record"
    android:onClick="resetAllTimes"
    android:padding="5dp"
    android:text="@string/button_reset" />

<CheckBox
    android:id="@+id/checkbox_ifr"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/button_record"
    android:text="@string/checkbox_ifr"
    android:onClick="ifrCheckboxClicked" />

<CheckBox
    android:id="@+id/checkbox_cross_country"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/button_record"
    android:layout_toRightOf="@id/checkbox_ifr"
    android:text="@string/checkbox_cross_country"
    android:onClick="crossCountryCheckboxClicked" />

<Spinner
    android:id="@+id/ifr_type_spinner"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/checkbox_ifr"
    android:visibility="gone" />

<TextView
    android:id="@+id/label_ifr_approaches"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/ifr_type_spinner"
    android:hint="@string/ifr_landings_label"
    android:visibility="gone" />

<logbook.app.custom.widgets.NumberSelector
    android:id="@+id/ifr_landings_selector"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/label_ifr_approaches"
    android:visibility="gone"
    custom:orientation="vertical" />

<EditText
    android:id="@+id/ifr_hours"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/ifr_landings_selector"
    android:hint="@string/ifr_hours_hint"
    android:inputType="number"
    android:visibility="gone" />

<EditText
    android:id="@+id/cross_country_hours"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/ifr_hours"
    android:hint="@string/cross_country_hours_hint"
    android:inputType="number"
    android:visibility="gone" />

<TextView
    android:id="@+id/label_takeoffs_landings"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/cross_country_hours"
    android:hint="@string/takeoffs_landings_label" />

<logbook.app.custom.widgets.NumberSelector
    android:id="@+id/landings_selector"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/label_takeoffs_landings"
    custom:orientation="horizontal" />

<Button
    android:id="@+id/button_create_log"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/landings_selector"
    android:onClick="createLog"
    android:padding="5dp"
    android:text="@string/button_create_log" />

</RelativeLayout>
</ScrollView>
</LinearLayout> 
```

# javascript - JavaScript 的拓扑库

> ID：13169496
> 
> 赞同：1
> 
> 时间：2012-11-01T00:48:15.207
> 
> 标签：javascript, node.js, geospatial, topology

我需要为我正在处理的项目做一些地理拓扑测试（交叉点、包含等）。我想使用 Node.js 服务器并尽可能以 JSON 格式保存数据，这意味着我想使用一个用 JavaScript 编写的拓扑库。我找到了一个，[JSTS](https://github.com/bjornharrtell/jsts)，但它依赖于 OpenLayers，我目前只有一个项目使用它。有没有人对这个库或任何其他拓扑库有任何经验？另外，如果这是一个糟糕的想法，请告诉我，我将使用 JTS 拓扑套件转移到 Java 服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:03:37.237

您是否尝试过开源 javascript 库`GeoScript`- 它具有基本的几何函数，如交集和联合 - 请参见下面的链接。

[http://geoscript.org/examples/geom/index.html#examples-geom](http://geoscript.org/examples/geom/index.html#examples-geom)

注意：似乎不包含`contains`函数，并且似乎也对 WellKnownText 数据表示进行操作，而不是 JSON。

# html - 页面内响应式 CSS？

> ID：13169503
> 
> 赞同：1
> 
> 时间：2012-11-01T00:49:17.347
> 
> 标签：html, css, responsive-design

我试图弄清楚是否有一种方法只使用 HTML 和 CSS 在页面内构建响应其他元素的元素，而不是像`@media`传统响应式设计那样响应浏览器大小。

例如，我有一个 900px 宽的元素。它有时可以包含 1、2 或 3 个子元素。我希望子元素根据兄弟元素的数量来设置和显示其他元素的样式。

例如

```
<div id="parent">
    <div class="child"></div>
    <div class="child"></div>
    <div class="child"></div>
</div> 
```

对比

```
<div id="parent">
    <div class="child"></div>
    <div class="child"></div>
</div> 
```

子元素会以不同的方式出现 - 不同的宽度、不同的填充、边框......而且它们也会有子元素，这些子元素将在第一个示例中隐藏，但在第二个示例中显示。

我知道这可以用 JS、PHP 来完成……但我想看看是否有办法在没有它的情况下做到这一点。由于我还想根据其他子元素的存在来隐藏/显示特定元素，因此使用相对大小（例如 %）不会削减它。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T01:07:09.877

使用**CSS3**是可能的，我花了几分钟才弄明白。

查看[http://jsfiddle.net/Vdz7s/](http://jsfiddle.net/Vdz7s/)。

HTML：

```
<h1>One:</h1>
<div class="parent">
    <div class="child">1</div>
</div>

<h1>Two:</h1>
<div class="parent">
    <div class="child">1</div>
    <div class="child">2</div>
</div>

<h1>Three:</h1>
<div class="parent">
    <div class="child">1</div>
    <div class="child">2</div>
    <div class="child">3</div>
</div>​ 
```

CSS：

```
.parent .child:nth-last-child(1)
{
    border:1px solid yellow;
}

.parent .child:nth-last-child(2),
.parent .child:nth-last-child(2) ~ .child
{
    border:1px solid orange;
}

.parent .child:nth-last-child(3),
.parent .child:nth-last-child(3) ~ .child
{
    border:1px solid red;
}
​ 
```

我认为代码是不言自明的，那么你只需要针对孩子，对他们做任何你想做的事情。

# javascript - mouseenter 和 leave 应用于两个 DOM 元素

> ID：13169506
> 
> 赞同：0
> 
> 时间：2012-11-01T00:49:38.723
> 
> 标签：javascript, jquery, mouseevent, mouseenter

我有一个 DOM 元素，当它悬停时，应该为另一个 DOM 元素的不透明度（到 1）设置动画。由于事物的 z 顺序，我不能嵌套第二个元素，但我希望交互使得只要你在任何一个 DOM 元素上，它们应该保持可见，但是如果你滚掉任何一个元素，第二个元素应该将其不透明度设置为零。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-01T01:07:16.780

使用 jQuery 你可以做类似的事情

```
 var show = false;
  $(element1).hover(function()
   {
      if(!show)
      {
        show = true;
        $(element2).fadeIn();
      }
   });
  $(element2).hover(function()
   {
     if(!show)
     {
       $(this).fadeIn();
       show = true;
     }
   };
  $(element1, element2).mouseleave(function(){$(element2).fadeOut();}); 
```

我使用 show 变量的原因是因为如果第二个元素已经显示，您不想淡化它。您可以通过用逗号分隔不同的选择器来将多个选择器组合在一个集合中。希望这对你有用。

# regex - egrep 命令不正确

> ID：13169507
> 
> 赞同：0
> 
> 时间：2012-11-01T00:49:40.073
> 
> 标签：regex, bash, grep, brainfuck

问题如下：我有一个名为brain.txt 的文档，其中包含如下几行（brainfuck）代码：

```
++++++++++[>++++++++>++++++>+<<<-]>+++.>+++++.<-.+.>>. word 
```

最后`word`的真的可以是任何词。如何从文档中过滤 < 和 > 每个序列的长度不均匀的行？

我写了以下命令：

```
egrep -v '^(([^<]*(<<)*[^<]*)|([^>]*(>>)*[^>]*))*$' brain.txt 
```

但它似乎不起作用，谁能解释一下这个命令有什么不正确的地方吗？

编辑：正如 Karoly Horvath 提到的，我没有否定偶数出现，而是使用正则表达式来匹配不均匀的出现。所以我写了以下命令：

```
egrep '^(([^<]*<(<<)*[^<]*)|([^>]*>(>>)*[^>]*))*$' brain.txt 
```

但由于某种原因，我仍然匹配偶数行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T00:56:31.053

您的正则表达式匹配 < 和 > 的*每个*序列长度为*even*的每一行。

如果您否定它，您将打印其余的行 - 包含*至少一个*不均匀序列的行。

另一个问题是`[^<]`能不能吃`>`。

不要否定，只搜索不均匀：

```
grep -P '^(([^<>]*)|((<<)*<(?!<))|((>>)*>(?!>)))*$' 
```

# matlab - 'uint8' 类型的输入参数的未定义函数 'imgradientxy'

> ID：13169508
> 
> 赞同：1
> 
> 时间：2012-11-01T00:49:57.983
> 
> 标签：matlab, image-processing

我想调用matlab之类的函数`imgradientxy`，`gray2ind`但是任何一个都会导致错误`Undefined function 'imgradientxy' for input arguments of type 'uint8'.`

我正在使用 R2012a 版本并添加`toolbox`到路径中。

MATLAB 版本：7.14.0.739 (R2012a)

映射工具箱版本 3.5 (R2012a)

`imgradientxy`并且`gray2ind`是matlab的本机函数。为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T03:44:50.493

根据图像处理[发行说明](http://www.mathworks.com/help/images/release-notes.html)`imgradient`，和`imgradientxy`函数似乎是 MATLAB Version R2012b 的新功能。

但是，我正在使用 R2011a，并且可以访问`gray2ind`. 如果您仍然找不到那个，请键入`ver`以确保您已正确加载图像处理工具箱。

# objective-c - 通用字幕原型样式有效，但自定义原型无效

> ID：13169510
> 
> 赞同：1
> 
> 时间：2012-11-01T00:50:32.390
> 
> 标签：objective-c

我查看了以下链接中的代码：

[为什么我的原型单元格显示为空白？](https://stackoverflow.com/questions/10779155/why-do-my-prototype-cells-show-up-blank)

以及 www.techtopia.com 上使用自定义表格视图原型的教程： [http ://www.techotopia.com/index.php/Using_Xcode_Storyboards_to_Build_Dynamic_TableViews_with_Prototype_Table_View_Cells](http://www.techotopia.com/index.php/Using_Xcode_Storyboards_to_Build_Dynamic_TableViews_with_Prototype_Table_View_Cells)

但是我仍然让我的根视图显示为空白。

我已经设置了记录从我的 XML 解析器委托接收数据的方法，并且我知道数据正在进入，但由于某种原因，除非我使用默认样式之一（字幕等），否则我无法使用我自己构建的自定义原型。

这是我的示例代码：

对于自定义 UITableViewCell 类 (TickerListViewCell.h)：

```
#import "TickerListViewCell.h"

@implementation TickerListViewCell

@synthesize ticker = _ticker;
@synthesize companyName = _companyName;
@synthesize price = _price;

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
[super setSelected:selected animated:animated];

// Configure the view for the selected state
}

@end 
```

(TickerListViewCell.m)

```
#import <UIKit/UIKit.h>

@interface TickerListViewCell : UITableViewCell

@property (nonatomic, strong) IBOutlet UILabel *ticker;
@property (nonatomic, strong) IBOutlet UILabel *companyName;
@property (nonatomic, strong) IBOutlet UILabel *price;

@end 
```

(TickerListViewController.m) ...

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"CustomStockCell";

TickerListViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil)
    cell = [[TickerListViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"CustomStockCell"];

cell.selectionStyle = UITableViewCellSelectionStyleNone;

// Configure the cell...

self.currentStock = [self.mystocks objectAtIndex:[indexPath row]];

cell.ticker.text = self.currentStock.symbol;
cell.companyName.text = self.currentStock.companyName;
cell.price.text = [self.currentStock.askRealtime stringValue];

NSLog(@"Configured cell for stock: %@",[(Stock *)[self.mystocks objectAtIndex:[indexPath row]] symbol]);
return cell;
} 
```

...

我相信问题发生在对“cellForRowAtIndexPath”的调用中，因为当我将原型更改为通用字幕时，它可以工作，但是我的自定义原型失败了。请记住，我还确保原型单元的类已映射到我的自定义类。

正如一些教程所指出的那样，我已经尝试取出“if（cell == nil）”块，但这并没有解决问题。该代码在预编译时没有显示任何错误，但是一旦我尝试在没有该块的 iOS 6 模拟器中运行它，就会生成一个错误。

任何帮助表示赞赏。我现在已经无计可施了。

# java - 收到类型不兼容的错误，我找不到问题

> ID：13169512
> 
> 赞同：-1
> 
> 时间：2012-11-01T00:50:51.080
> 
> 标签：java, methods, static

我是一个初学者，我刚刚接触到静态方法，所以由于奇怪的控制流程，它们对我来说还是有点困惑。是什么导致了这里的错误？

```
import java.util.Scanner;
import java.io.File;
import java.io.IOException;
public class GravityV1
{
public static double gravityCalculation(double[] planetMass, int[] planetDiameter)
{
    double universalGravityConst = 6.67E-11;
    double [] surfaceGravity = new double [planetMass.length];
    for(int i = 0; i < planetMass.length; i++)
        surfaceGravity[i] = ((universalGravityConst * planetMass[i]) / (Math.pow(planetDiameter[i] / 2, 2)));
    return surfaceGravity;
}

public static void main(String [] args) throws IOException
{
    String [] planets = {"Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranus", "Neptune"};
    double [] mass = {3.3022E23, 4.8685E24, 5.97E24, 6.4185E23, 1.8986E27, 5.6846E26, 8.6810E25, 10.243E25};
    int [] diameter = {4879, 12104, 12576, 6792, 142984, 120536, 51118, 49528};

    double [] gravities = gravityCalculation(mass, diameter);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T00:52:15.877

```
double [] gravities = gravityCalculation(mass, diameter); 
```

你的重力计算（质量，直径）；返回一个双原语，您将其分配给一个双 [] 数组因此错误。

改变你的

```
public static double gravityCalculation(double[] planetMass, int[] planetDiameter) 
     to
public static double[] gravityCalculation(double[] planetMass, int[] planetDiameter) 
```

# android - listView SetAdaptor 在应用程序启动时导致崩溃

> ID：13169513
> 
> 赞同：1
> 
> 时间：2012-11-01T00:51:01.277
> 
> 标签：android, xamarin.android

我正在玩 Monodroid，试图在启动时将适配器设置为列表视图。我在屏幕上有一堆控件，我想做的是当单击按钮时，一个项目进入列表视图。

我没有从调试器中得到任何错误，只是“不幸的是 Application1 已停止”，这使得我很难弄清楚我做错了什么。

这是我的代码：

```
public class Activity1 : Activity
{
    List<string> items = new List<string>();
    ArrayAdapter<string> adaptor;
    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        SetContentView(Resource.Layout.Main);
        int i = 0;

        items.Add("Hello world");
        adaptor = new ArrayAdapter<string>(this,
            Resource.Id.listView1,
            items);

        Button button = FindViewById<Button>(Resource.Id.button1);
        ListView listView = FindViewById<ListView>(Resource.Id.listView1);
        listView.SetAdapter(adaptor);

        button.Click += delegate
        {
            items.Add("Hello " + ++i);
            adaptor.NotifyDataSetChanged();
        };
    }
} 
```

根据评论，我发现设备日志包含以下内容：

```
android.content.res.Resources$NotFoundException: Resource ID #0x7f050003 type #0x12 is not valid 
```

这是 Resource.Designer.cs 中列表视图的 ID

```
public const int listView1 = 2131034115; 
```

列表视图声明如下：

```
 <ListView
        p1:minWidth="25px"
        p1:minHeight="25px"
        p1:layout_width="wrap_content"
        p1:layout_height="fill_parent"
        p1:id="@+id/listView1"
        p1:layout_marginBottom="70dp" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:06:23.027

我在阅读文档后想通了。实例化 ArrayAdapter 时，它必须参考 Android.Resource.Layout.SimpleListItem1 或其他列表项资源，而不是列表视图本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-04T02:23:47.480

我对这段代码有同样的问题：

```
mForecastAdapter =
    new ArrayAdapter<String>(
                    this,
                    android.R.layout.mymain,
                   R.id.list_view_forecast, 
                    foreCastArray
    ); 
```

然后看了你的帖子，我把它改成了：

```
 mForecastAdapter =
     new ArrayAdapter<String>(
                    this,
                    android.R.layout.simple_list_item_1,
                   // R.id.list_view_forecast, 
                    foreCastArray
     ); 
```

使用了简单的列表视图**并**删除了列表视图 ID。这行得通。

# java - 如何使用带有 int 参数的递归方法来返回该 int 中的零位数？

> ID：13169514
> 
> 赞同：0
> 
> 时间：2012-11-01T00:51:01.887
> 
> 标签：java, methods, recursion

方法是：

```
public static zeroCount(int num) 
```

我的导师要求这个方法有一个 int 参数，递归方法必须返回 num 中的零个数。

所以 zeroCount(10200) = 3 和 zeroCount(100300) = 4 等等...

我可以很容易地做到这一点，但因为我需要使用递归方法，所以我完全迷路了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T00:54:05.783

提示：如果你在每个递归步骤中将数字除以 10，如果没有余数则返回 1，如果有余数则返回 0？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T15:49:50.463

尝试以下操作：

```
public int count0(int n) {
  if(n == 0) 
     return 0;
  if(n % 10 == 0) 
     return 1 + count0(n/10);

  return count0(n/10);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T00:59:00.357

如果您可以迭代地解决问题（即使用某种循环），那么您可以递归地解决问题。

编写递归方法时需要做的两件事是：

*   一个**基本案例**；当你用尽你的号码的所有数字时你会做什么，以及
*   一个**迭代案例**；当您还有更多数字要走时，您会做什么。

我还注意到您没有指定方法的返回值；理想情况下，它会是`int`. 让它成为你的提示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T01:38:07.867

你知道**x % 10**给你 x 的最后一位，所以你可以用它来识别零。此外，在检查特定数字是否为零之后，您想取出该数字，如何？**除以 10**。

```
public static int zeroCount(int num)
{
  int count = 0;

  if(num == 0) return 1;                  // stop case zeroCount(0)
  else if(Math.abs(num)  < 9)  return 0;  // stop case digit between 1..9 or -9..-1
  else
  {
   if (num % 10 == 0) // if the num last digit is zero
       count++; // count the zero, take num last digit out

   return count + zeroCount(num/10); // take num last digit out, and apply 
  } // the method recursively to the remaining digits 
} 
```

我使用 math.Abs​​ 来允许负数，你必须导入 java.lang.Math;

# python - 如何在python中创建两个函数的包装？

> ID：13169516
> 
> 赞同：-1
> 
> 时间：2012-11-01T00:51:21.180
> 
> 标签：python, wrapper

我有两个功能。第一个将构建一个编码器来对给定的文本进行凯撒密码：

```
def buildCoder(shift):

        lettersU=string.ascii_uppercase
        lettersL=string.ascii_lowercase
        dic={}
        dic2={}

        for i in range(0,len(lettersU and lettersL)):
            dic[lettersU[i]]=lettersU[(i+shift)%len(lettersU)]
            dic2[lettersL[i]]=lettersL[(i+shift)%len(lettersL)]
        dic.update(dic2)
        return dic 
```

第二个将编码器应用于给定的文本：

```
def applyCoder(text, coder):
        cipherText=''
        for l in text:
            if l in coder:
                l=coder[l]
            cipherText+=l
        return cipherText 
```

问题的第 3 部分要求我构建一个包装器，但由于我是编码新手，所以我不知道如何编写使用这两个函数的包装器。

```
def applyShift(text, shift):
  """
  Given a text, returns a new text Caesar shifted by the given shift
  offset. Lower case letters should remain lower case, upper case
  letters should remain upper case, and all other punctuation should
  stay as it is.

  text: string to apply the shift to
  shift: amount to shift the text (0 <= int < 26)
  returns: text after being shifted by specified amount.
  """ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T01:11:05.743

将您的每个功能都视为获取某种数据并为您提供不同类型的东西。

`buildCoder`接受 a`shift`并给你一个`coder`.

`applyCoder`需要一些`text`（要编码的字符串）和 a`coder`并为您提供编码的字符串。

现在，您要编写`applyShift`一个函数，它接受 a`shift`和 some`text`并为您提供编码字符串。

你在哪里可以得到编码的字符串？仅从`applyCoder`. 它需要`text`和一个`coder`. 我们有，`text`因为它是给我们的，但我们还需要一个`coder`. 所以让我们`coder`使用我们提供的`buildCoder`。`shift`

综合起来，这将如下所示：

```
def applyShift(text, shift):
  # Get our coder using buildCoder and shift
  coder = buildCoder(shift)
  # Now get our coded string using coder and text
  coded_text = applyCoder(text, coder)
  # We have our coded text!  Let's return it:
  return coded_text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T01:13:13.257

忘记术语“包装器”。只需编写另一个[函数](http://docs.python.org/2/tutorial/controlflow.html#defining-functions)来调用其他两个函数并返回结果。您已经获得了函数签名（其名称和参数）和所需结果的描述。所以在函数体中这样做：

1.  `buildCoder()`使用参数调用`shift`并将结果存储在变量中`coder`
2.  `applyCoder()`使用您刚刚存储的参数调用，`text`并将`coder`结果存储在`cipher_text`
3.  返回`cipher_text`

要测试您的函数是否有效，请编写一些测试代码来运行您`applyShift`的一些示例数据，例如：

```
print applyShift('Loremp Ipsum.', 13) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-02T17:09:57.557

```
def applyShift(text, shift):
    return applyCoder(text, buildCoder(shift)) 
```

# java - 更改字符串字段的子类方法给了我一个错误

> ID：13169521
> 
> 赞同：0
> 
> 时间：2012-11-01T00:52:11.990
> 
> 标签：java, subclass, field

所以，我有一个分配问题，用于分配议会课程中的某些变量。我尽可能保持基本，但是当我创建一个名为 CanadaParl 的子类时，它不允许我更改任何字符串字段。Int 字段工作正常。对于字符串，它一直说**Error: cannot find symbol = variable Bob**（其中 Bob 是我尝试输入的字符串作为 PM 字段的名称）。我正在使用 BlueJ 作为我的编码界面。

这是类中方法的一个示例：

```
public void changePM(String newPM) {
    primeMinister = newPM;
} 
```

这会是更新到新字符串的错误方法吗？我只是使用前面的示例来更改我看到的字段，但我不记得它是否包含字符串。

编辑：对不起混淆。我最初并没有注意并复制了 int 方法。子类更改 int 值的方法正在工作，但 String 更改给出了上述错误。

这是整个班级：

```
public class Parliament
{
int members = 0;
int parties = 0;
public String primeMinister = "";
public String oppLeader = "";
public String speaker = "";
boolean inSession = false;
boolean majority = true;

public void changeMembers(int newValue) {
    members = newValue;
}
public void changeParties(int newValue) {
    parties = newValue;
}
public void changePM(String newPM) {
    primeMinister = newPM;
}
public void changeOL(String newOL) {
    oppLeader = newOL;
}
public void changeSpk(String newSpk) {
    speaker = newSpk;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T01:08:29.120

你引用你的字符串吗？例如，Bob 是否在您的图形用户界面中输入为“Bob”？“找不到符号”似乎表明您可能不是。

这也可以解释为什么原语会起作用。

# node.js - hget块nodejs redis里面的hdel

> ID：13169522
> 
> 赞同：-2
> 
> 时间：2012-11-01T00:52:13.567
> 
> 标签：node.js, redis

我正在尝试在 hget 块内的 node.js 中执行 hdel 命令。这是代码：

```
client.hget(requests[i], "client", function(err, client){
if(isUser == true){
    client.hdel(requests[i], function(err){
          if(err){
                 console.log("cannot process request");
              }
     });
    }
}); 
```

它不起作用，我不明白为什么！任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:27:44.600

由于您使用 requests[i] 作为参数，我们可以假设这段代码被封装在一个循环中：也许您正试图迭代一个数组并为每个项目执行 hget/hdel。

在这种情况下，你很有可能被 Javascript 的范围规则所击中：requests[i] 是闭包的一部分，但闭包只能在函数级别（而不是块级别）定义。

您可能需要定义一个内部函数，或者使用 forEach 来迭代您的容器。更多信息在这里：

[节点，redis。检查密钥是否存在，如果不存在则创建新的](https://stackoverflow.com/questions/11000911/nodejs-redis-check-if-keys-exists-and-create-new-if-not/11001722#11001722)

[For循环从redis延迟获取项目](https://stackoverflow.com/questions/10019903/for-loop-get-items-from-redis-delay/10025746#10025746)

# c# - 在 C# 中为 Access DB 使用连接字符串中的相对路径

> ID：13169526
> 
> 赞同：4
> 
> 时间：2012-11-01T00:52:31.897
> 
> 标签：c#, ms-access, connection-string, relative-path

我试图在我的 web.config 文件中获取这一行以使用相对路径而不是硬编码路径，但似乎没有任何效果。我只能找到 SQL 和 mySQL 数据库的东西

```
<connectionStrings>
<add name="dbConnection" connectionString="Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\Mike\Desktop\GeauxEat NEW\GeauxEat\App_Data\GeauxEatAccessDB.accdb"/>
</connectionStrings> 
```

我试着做

```
<add name="dbConnection" connectionString="Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|Data Directory|\GeauxEatAccessDB.accdb"/> 
```

但随后它会在此文件夹中查找不存在的内容。

```
"C:\\Program Files (x86)\\Common Files\\Microsoft Shared\\DevServer\\10.0" 
```

有什么办法可以相对吗？它位于项目文件的 AppData 文件夹中

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T23:00:12.737

我环顾四周，让它工作。我将这一行插入到 Global.asax 文件的 Application_Start 方法中

```
AppDomain.CurrentDomain.SetData("DataDirectory", Server.MapPath("~/App_Data/")); 
```

# selenium - 硒点击（）方法

> ID：13169528
> 
> 赞同：3
> 
> 时间：2012-11-01T00:53:19.543
> 
> 标签：selenium, click

我正在使用 Selenium 2.25.0 来自动化 Web 应用程序的 GUI 测试。这个应用程序有一个设置向导，它引导用户通过一组特定的表单并相应地配置一个设备。表单是动态生成的，并具有一组通用的后退/下一步按钮。在特定页面上，下一个按钮不会单击（）。

我已验证此按钮的尺寸（大小（））> 0。我可以看到按钮获得焦点，但它没有单击。此外，click() 方法不会抛出任何异常。

最终，下一行代码的显式等待超时，我的测试失败。浏览器是 Firefox，直到最近，相同的代码才能正常工作。

这似乎是一个已知问题。在这种情况下，是否有解决方法？该解决方案适用于 Firefox/Chrome 和 IE。

有人建议使用

```
driver.manage.Timeout().PageLoadTimeouts() 
```

但是，如果代码已经有明确的等待，那不是多余的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T01:02:13.437

看看[http://seleniumhq.org/docs/04_webdriver_advanced.html](http://seleniumhq.org/docs/04_webdriver_advanced.html)，还要确保你[正确地专注于正确的框架](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.TargetLocator.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-29T16:28:30.437

在您的代码找到按钮之后，在它单击它之前，您应该插入一行，将元素的 location_once_scrolled_into_view 成员变量分配给一个变量，即使您从未使用它。我不知道为什么，但这将确保点击真正达到目标。（我们在我们的测试脚本中使用它，它似乎可以完成这项工作。）

例子：

```
button = driver.find_element_by_id("MyButton")
ScrollLocation = button.location_once_scrolled_into_view
button.click() 
```

# php - mysqli 绑定方法和 call_user_func_array

> ID：13169529
> 
> 赞同：1
> 
> 时间：2012-11-01T00:53:19.870
> 
> 标签：php, mysql, variables, bind

我有以下代码：

```
 function insertrow($tablename,$record){
        $columns = $this->gettablecol($tablename);
        $types = $this->getbindtypestring($columns);    
        array_unshift($record, $types);                                             
        if(count($columns) && $types){              
            $query = 'INSERT INTO '.$tablename.' VALUES (?'.str_repeat(',?',count($columns)-1).')';
            if($stm = $this->linkid->prepare($query)){                  
                $res = call_user_func_array(array(&$stm,"bind_param"), $params);                    
                $stm->execute();                    
                print_r($stm);
                $stm->close();                                      
            }
        }
    } 
```

$record 数组如下所示：

```
 (
        [0] => sssisssssssssssi
        [recordid] => TEST1
        [recdate] => 2012-10-31 08:45:49
        [lastmod] => 2012-10-31 08:45:49
        [delflag] => 0
        [cusname] => Dilbert
        [address1] => 181 Somewhere
        [address2] => 
        [city] => St. Petersburg
        [state] => FL
        [zipcode] => 33713
        [telephone] => 8135551212
        [faxnumber] => 8135551313
        [webaddress] => 
        [taxid] => 260708780
        [pinnumber] => 12345
        [isactive] => 0 
) 
```

但是 $stm 告诉我没有数据：

```
mysqli_stmt Object
(
    [affected_rows] => 0
    [insert_id] => 0
    [num_rows] => 0
    [param_count] => 16
    [field_count] => 0
    [errno] => 2031
    [error] => No data supplied for parameters in prepared statement
    [sqlstate] => HY000
    [id] => 1
) 
```

$record 数组似乎格式不正确。任何见解将不胜感激。

* * *

嗨，比尔，感谢您的提醒。我接受了您的建议并将 API 切换到 PDO....我必须承认我喜欢它的使用容易得多；但是，我的问题还没有解决。我将 insertrow 方法更改为如下所示：

```
 function insertrow($tablename,$record){         
        $this->connect();
        $columns = $this->gettablecol($tablename);      
        if(count($columns)){                
            $query = 'INSERT INTO '.$tablename.' VALUES (?'.str_repeat(',?',count($columns)-1).')';
            try{
                $stm = $this->linkid->prepare($query);                  
                $stm->execute($record);
            }catch(PDOException $e){
                $this->errormsg = $e.getMessage();
                $this.errhandler();
                exit();
            }           
        }
    } 
```

记录如下所示：

```
Array
(
    [recordid] => TEST1
    [recdate] => 2012-11-01 09:12:50
    [lastmod] => 2012-11-01 09:12:50
    [delflag] => 0
    [cusname] => Dilbert
    [address1] => 181 Somewhere
    [address2] => 
    [city] => St. Petersburg
    [state] => FL
    [zipcode] => 33713
    [telephone] => 8135551212
    [faxnumber] => 8135551313
    [webaddress] => 
    [taxid] => 260708780
    [pinnumber] => 12345
    [isactive] => 0
) 
```

我什至将 $record 的值复制到一个新数组中：

```
$newrec = array();
foreach($record as $row){
   $newrec = $row;
} 
```

它看起来像这样：

```
 Array
(
    [0] => TEST1
    [1] => 2012-11-01 09:01:32
    [2] => 2012-11-01 09:01:32
    [3] => 0
    [4] => Dilbert
    [5] => 181 Somewhere
    [6] => 
    [7] => St. Petersburg
    [8] => FL
    [9] => 33713
    [10] => 8135551212
    [11] => 8135551313
    [12] => 
    [13] => 260708780
    [14] => 12345
    [15] => 0
) 
```

并将其传递给 $stm->execute($newrec) 但它不起作用并且没有抛出异常。还有什么我可以看的吗？

在这一点上，我已经删除了传递 $record 数组，只是硬编码了这些值：

```
$stm->execute(array('TEST2','2012-10-10 00:00:00','2012-10-10 00:00:00',0,'1','2','3','4','5','6','7','8','9','0','11',0)); 
```

即使准备和执行都恢复正常，我仍然没有将记录插入表中。

我有必要将参数绑定到它们的特定数据类型吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T02:10:26.523

使用 bind_param 的困难是我在开发可重用数据库访问层时不喜欢使用 Mysqli 的原因。可以做到，但是 PHP 的引用使它变得不必要地晦涩难懂。

有关解决方案，请参阅我在[mysqli_prepare vs PDO中的回答](https://stackoverflow.com/questions/7383335/mysqli-prepare-vs-pdo/7383439#7383439)

基本上，您传递的数组必须是引用数组，而不是标量数组。

我发现在开发 DBAL 时使用 PDO 要容易得多。你不必绑定任何东西。您只需将数组传递给[PDOStatement::execute()](http://us2.php.net/manual/en/pdostatement.execute.php)。

* * *

重新编辑：

我是 PDO 对你有帮助。但这毕竟可能不是您最初问题的根本原因。如果我的建议是野鹅追逐，我深表歉意。但至少现在您正在使用 PDO，所以这是一次角色构建体验。:-)

我在您的代码中注意到了两件事，但我不确定这些是否是问题：

您根据 $columns 数组的计数添加了许多参数占位符，但是您怎么知道这与 $record 数组的计数相同？如果参数占位符的数量与提供给 execute() 的值的数量不匹配，那么这是一个错误。

你应该检查：

```
if (count($columns) != count($record)) { 
  // report error
} 
```

或者，您可以确保仅在 $record 数组中包含作为键提到的列：

```
$columns_to_insert = array_intersect($columns, array_keys($record)); 
```

顺便说一句（这不是一个错误，只是一个提示），我会生成这样的参数占位符序列，只是为了避免字符串连接和错误的风险：

```
join(",", array_fill(0, count($record), "?")) 
```

我注意到的另一件事是您没有检查 execute() 的返回值。如果它返回`false`，则说明有错误，您应该[调查错误的性质](http://us3.php.net/manual/en/pdo.errorinfo.php)。

您正在捕获异常，但 PDO 的默认模式是*不*抛出异常，而只是设置函数的返回值来指示错误。您可以以这种方式使用它，否则您必须显式启用异常抛出模式：

```
$this->linkid->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

该设置在 PDO 连接期间是全局的；您不必每次插入一行时都这样做。

# objective-c - 如何在一个 UIToolBar 上添加第二行 UIBarButtonItems 以及如何在 UIBarButtonItem\UIButton 的某个具体位置处理点击事件？

> ID：13169533
> 
> 赞同：1
> 
> 时间：2012-11-01T00:53:52.723
> 
> 标签：objective-c, ios, events, uibutton, uitoolbar

我正在学习iOS开发，有两个简单且相关的问题：1.如何将几行项目添加到一个项目中，`UIToolBar`有可能吗？我想要一`UISearchBar`排和两排`UIBarButtonItem`s （基于`UIButton`）在一个上`UIToolbar`。我该如何实施？2\. 是否可以处理这种事件：点击`UIButton``UIBarButtonItem`上的确定位置？现在我只是在使用：

```
 const CGPoint touchLocation = [touch locationInView:button]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T02:34:13.747

1.A. 您可以尝试根据需要设置一个包含所有按钮的视图，并通过其将其应用到工具栏`initWithCustomView:`（我认为这些可能必须是常规按钮，而不是 barButtonItems，它不能如此灵活地构图 - 在这种情况下它是不会表现得像工具栏。）但它都适合吗？如果没有，您可以尝试增加工具栏的高度，但有一些复杂性：[重新框架工具栏](https://stackoverflow.com/questions/2135407/is-there-a-way-to-change-the-height-of-a-uitoolbar)

1.B。或者，您可以忘记工具栏并在屏幕底部创建自己的子视图，使用您选择的任何框架和任意数量的按钮。这会容易得多，并且可能会减少苹果公司的关注。

2.A. 查看`UIGestureRecognizer`及其子类`UITapGestureRecognizer`。您可以使用它将任何视图或视图的矩形转换为按钮。当它的委托方法被调用时，你可以对所涉及的图像/视图做任何你想做的事情。

2.B。或者，您可以为`buttonWithType:UIButtonTypeCustom`仅显示“十字”图像的自定义 UIButton ( ) 的按下/突出显示状态制作图像。那可能是更简单的选择。

# c - 为什么带有 MSG_PEEK 的 recv() 会阻塞？

> ID：13169534
> 
> 赞同：1
> 
> 时间：2012-11-01T00:53:54.680
> 
> 标签：c, network-programming

只有一次，当创建新连接时，我想查看流以确定连接是否是 SSL 连接。为此，我使用带有 MSG_PEEK 标志的 recv()。问题在于，对于不是 SSL 连接且没有任何初始传入数据的连接，recv 会阻塞几秒钟。我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T00:59:38.077

如果您不希望调用阻塞，您也可以提供`MSG_DONTWAIT`标志（不是 POSIX，但已广泛实施） - 但是您如何区分初始数据尚未到达的 SSL 连接和非 SSL 连接？

似乎要可靠地执行此操作，您无论如何都需要等待第一部分数据到达。

# python - 另一个嵌套列表理解？

> ID：13169535
> 
> 赞同：0
> 
> 时间：2012-11-01T00:54:00.320
> 
> 标签：python

在 python 中，假设我想打开这个列表：

```
['EFJAJCOWSS', 'SDGKSRFDFF', 'ASRJDUSKLK', 'HEANDNDJWA', 'ANSDNCNEOP', 'PMSNFHHEJE', 'JEPQLYNXDL'] 
```

进入：

```
[['E', 'F', 'J', 'A', 'J', 'C', 'O', 'W', 'S', 'S'], ['S', 'D', 'G', 'K', 'S', 'R', 'F', 'D', 'F', 'F'], ['A', 'S', 'R', 'J', 'D', 'U', 'S', 'K', 'L', 'K'], ['H', 'E', 'A', 'N', 'D', 'N', 'D', 'J', 'W', 'A'], ['A', 'N', 'S', 'D', 'N', 'C', 'N', 'E', 'O', 'P'], ['P', 'M', 'S', 'N', 'F', 'H', 'H', 'E', 'J', 'E'], ['J', 'E', 'P', 'Q', 'L', 'Y', 'N', 'X', 'D', 'L']] 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T00:56:29.163

调用`list`一个字符串会给你一个字符列表。

所以：

```
>>> data = ['EFJAJCOWSS', 'SDGKSRFDFF', 'ASRJDUSKLK', 'HEANDNDJWA', 
...         'ANSDNCNEOP', 'PMSNFHHEJE', 'JEPQLYNXDL']
>>> map(list, data)
[['E', 'F', 'J', 'A', 'J', 'C', 'O', 'W', 'S', 'S'],
 ['S', 'D', 'G', 'K', 'S', 'R', 'F', 'D', 'F', 'F'],
 ['A', 'S', 'R', 'J', 'D', 'U', 'S', 'K', 'L', 'K'], 
 ['H', 'E', 'A', 'N', 'D', 'N', 'D', 'J', 'W', 'A'],
 ['A', 'N', 'S', 'D', 'N', 'C', 'N', 'E', 'O', 'P'],
 ['P', 'M', 'S', 'N', 'F', 'H', 'H', 'E', 'J', 'E'],
 ['J', 'E', 'P', 'Q', 'L', 'Y', 'N', 'X', 'D', 'L']] 
```

应该管用。

如果你想在变量中使用这个值，`split`你可以这样做：

```
split = map(list, data) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T00:56:45.900

您可以使用列表理解。

```
o = ['EFJAJCOWSS', 'SDGKSRFDFF', 'ASRJDUSKLK', 'HEANDNDJWA', 'ANSDNCNEOP', 'PMSNFHHEJE', 'JEPQLYNXDL']

split = [[c for c in i] for i in o] 
```

# magento - 语法错误

> ID：13169539
> 
> 赞同：2
> 
> 时间：2012-11-01T00:54:14.643
> 
> 标签：magento, navigation, layered

我正在尝试自定义 magento 的价格分层导航这个线程： http: [//www.magentocommerce.com/boards/viewthread/65135/P15/#t278667](http://www.magentocommerce.com/boards/viewthread/65135/P15/#t278667)

但是当我复制并粘贴他的代码时，我遇到了一个错误，请参见下面的代码。有任何想法吗？

```
protected function _getItemsData()
{
    $key = $this->_getCacheKey();

    $data = $this->getLayer()->getAggregator()->getCacheData($key);
    if ($data === null) {
        $range      = 100;// $this->getPriceRange();
        $minEntries = 30;
        $minPercentage = 12; //overrides the previous line if set, sets minEntries to $minPercentage of total items
        $lastRange  = 5000; //collects everything over this value into one range, must be a multiple of $range. Set to 0 for no last range.
        $lastRangeIndex = $lastRange == 0 ? 0 : intval($lastRange / $range);

        $dbRanges   = $this->getRangeItemCounts($range);
        if ( ($minPercentage > 0) && ($minPercentage < 100) ) {
            $itemCount = array_sum($dbRanges);
            $minEntriesByPercentage = intval( $itemCount * ($minPercentage / 100) );
            $minEntries = $minEntriesByPercentage;
        }
        $data       = array();

        $collect = 0;
        $collectIndex = 0;
        $collections = 1;
        $lastIndex = 0;
        foreach ($dbRanges as $index=>$count) {
            if ( ( ( $collect + $count ) >= $minEntries ) && ( ($index <= $lastRangeIndex) || ($lastRangeIndex == 0) ) {
                    $collections = $collectIndex == 0 ? 1 : ( $index - $collectIndex ) + 1;
                    $data[] = array(
                        'label' => $this->_renderItemLabel($range * $collections, $index / $collections),
                        'value' => ( $index / $collections ) . ',' . $range * $collections,
                        'count' => $count + $collect,
                    );
                    $collect = 0;
                    $collections = 1;
                    $collectIndex = 0;
            } else {
                    $collect = $collect + $count;
                    if ( $collectIndex == 0 ) {
                            $collectIndex = $index;
                    }
                    $collections = $collectIndex == $index ? 1 : ( $index - $collectIndex ) + 1;

            }
            $lastIndex = $index;
        }
        if ( $collect > 0 ) {
                  $data[] = array(
                       'label' => $this->_renderItemLabel($range * $collections, $lastIndex / $collections),
                       'value' => ( $lastIndex / $collections ) . ',' . $range * $collections,
                       'count' => $collect,
                   );
        }

        $tags = array(
            Mage_Catalog_Model_Product_Type_Price::CACHE_TAG,
        );
        $tags = $this->getLayer()->getStateTags($tags);
        $this->getLayer()->getAggregator()->saveCacheData($data, $key, $tags);
    }
    return $data;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T01:04:57.577

在

```
if ( ( ( $collect + $count ) >= $minEntries ) && ( ($index <= $lastRangeIndex) || ($lastRangeIndex == 0) ) { 
```

if 语法缺少“)”：

```
if ( ( ( $collect + $count ) >= $minEntries ) && ( ($index <= $lastRangeIndex) || ($lastRangeIndex == 0) )) { 
```

# node.js - Node.js child_process.exec()

> ID：13169540
> 
> 赞同：1
> 
> 时间：2012-11-01T00:54:22.947
> 
> 标签：node.js, express, buffer

我正在尝试在节点中执行一个子进程，其名称来自发布请求。我使用的是快递，因此是 app.post()。我的代码如下。

```
app.post('/*', function(req, res) {

  var buf = new Buffer(256);
  var cont_len = buf.write(req.url, -1);
  var controller = buf.toString('utf8', 0, cont_len);
  var controller = controller.concat(' ')

  var args = req.param('args', null);

  var command = __root+__controllers+controller+args;

  console.log(command);

  c = exec(command,

  function (error, stdout, stderr) {
    res.send(stdout);
    res.send(stderr);

    if (error !== null) {
      res.send(error);
    }
  });

}); 
```

不起作用的部分是当我尝试使用动态命令构建命令字符串时。我可以对命令变量进行硬编码并且它可以工作，但是当我使用变量“控制器”时，它不会执行我的进程。另外，有没有办法响应子进程的返回值，或者我必须坚持只使用标准输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T04:16:24.887

您可以使用 req.body 访问请求参数

```
var command = req.body.theparam; 
```

# jquery - 显示类型的错误消息，即使它是必需的但未提供？

> ID：13169545
> 
> 赞同：0
> 
> 时间：2012-11-01T00:54:59.743
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery Validate 来验证表单。该表单具有必填字段和非必填字段。我希望你能帮助我找出一种方法来显示类型的错误消息，即使没有提供该字段来代替默认的“必需”消息。

我在互联网上搜索过，似乎没有人尝试过我想做的事情（我实际上并不相信这一点，但在搜索时我没有找到答案）。

这将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T01:25:14.913

[http://docs.jquery.com/Plugins/Validation/validate#options](http://docs.jquery.com/Plugins/Validation/validate#options)

单击“选项”选项卡并向下滚动到“消息”

或者，我相信默认操作是使用您正在验证错误消息的元素的 title 属性。

# oracle - Oracle 透明网关 10g 连接到 SQL Server 2012

> ID：13169550
> 
> 赞同：0
> 
> 时间：2012-11-01T00:55:52.853
> 
> 标签：oracle, oracle10g, gateways

我打算将使用 SQL Server 2000 的旧应用程序升级到 SQL Server 2012，Oracle 服务器每天使用 Oracle 透明网关将数据传输到此应用程序。我有一个新服务器，我在其中安装了 SQL Server 2012，用于测试旧 SQL Server 2000 中的所有数据和用户，完全一样。

我正在执行初始测试，当我更改配置以测试与新 SQL Server 2012 的连接时，出现错误：

```
SQL> Desc SOMETABLE@SOMEDBLINK;
ERROR:
ORA-28500: connection from ORACLE to a non-Oracle system returned this message:
[Transparent gateway for MSSQL]DRV_InitTdp: [Microsoft][ODBC SQL Server
Driver][SQL Server]Login failed for user 'correctlyconfigureduser'. (SQL State: 00000; SQL
Code: 18456)
ORA-02063: preceding 2 lines from SOMEDBLINK 
```

在日志中我发现了这个：

```
2012-10-31 18:41:21.673: [  OCRRAW][9132]proprinit: Could not open raw device 
2012-10-31 18:41:21.673: [ default][9132]a_init:7!: Backend init unsuccessful : [33]
2012-10-31 18:41:21.688: [ CSSCLNT][9132]clsssinit: error(33 ) in OCR initialization 
```

我已经使用相关用户登录，并且用户和密码都很好。无论如何，它们都是旧数据库的副本。

我想知道这个 Oracle 透明网关 10g (10.2) 是否太旧而无法连接到 SQL Server 2012。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T02:31:59.590

问题是当创建 dblink 时，用户和密码没有在引号内输入。重新创建 dblinks 后一切正常。

# c++ - C++11 正则表达式分组

> ID：13169553
> 
> 赞同：1
> 
> 时间：2012-11-01T00:56:13.523
> 
> 标签：c++, regex, c++11

> **可能重复：**
> [与 c++11 正则表达式不匹配](https://stackoverflow.com/questions/11269766/no-matches-with-c11-regex)

我正在阅读这本涵盖 C++11 的书，然后我读到了关于正则表达式的章节。一切对我来说都很好，直到我得到关于分组的部分，并在我需要返回一个组时引用 \1。我的代码编译得很好：

```
#include <iostream>
#include <regex>
#include <string>
int main()
{
     try
     {

           regex r1("<(.*)>.*</\\1>");
           bool found = regex_match(string("<tag>value</tag>"),r1);
           cout << "Does the string match:        ";
           cout << boolalpha << found << '\n';
     }catch( exception e)
     {
        cout << e.what() << '\n';
     }

     return 0;
} 
```

然而，会发生什么是我收到分段错误（核心转储）消息。这个小片段是直接从书中使用的，所以我非常怀疑这是错误的。注意：我确实使用 -std=c++0x 进行编译。注意：我在 Ubuntu 12.04 下使用 Code::Blocks

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T01:12:06.053

libstdc++ 的正则表达式的实现非常不完整。

[http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.2011](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.2011)

前往第 28 节，正则表达式。如果您使用的是 libstdc++（在 ubuntu 上几乎可以肯定），那么您还不能使用正则表达式。

很遗憾，因为 g++ 的 C++11 工具链在其他方面非常可靠。

您可能需要为此使用 boost 或其他正则表达式库。或者切换 clang（和 clang 的库）或 MSVC（和他们的库）。

# php - 用 PHP 合并子数组对象

> ID：13169555
> 
> 赞同：0
> 
> 时间：2012-11-01T00:56:26.140
> 
> 标签：php, json

我一生都无法找到一种很好的方法来获取这样的对象数组（实际上是来自数据库的更大数组）：

```
Array
(
    [0] => stdClass Object
        (
            [name] => Canterbury
        )

    [1] => stdClass Object
        (
            [name] => West Coast
        )

) 
```

进入这样的单级数组：

```
Array
(
    [0] => Canterbury
    [1] => West Coast
) 
```

因此，当我执行 json_encode 时，它​​看起来像这样：

```
{"0":"Canterbury","1":"West Coast"} 
```

而不是这样：

```
[{"name":"Canterbury"},{"name":"West Coast"}] 
```

我尝试了很多东西，比如使用 php 的数组合并和合并函数，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T01:02:56.983

好吧，我认为您只需将对象的 name 属性代替数组的值：

```
foreach($array as $key => $value){
    $value = $value->name
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T01:05:40.617

很简单：

```
$output = array();
foreach($objectArray as $oneObject)
    $output[] = $oneObject->name;
echo json_encode($output); 
```

# c++ - 如何在 Xcode 中为 i386 架构制作 Qt CMake 项目链接？

> ID：13169556
> 
> 赞同：1
> 
> 时间：2012-11-01T00:56:25.687
> 
> 标签：c++, xcode, macos, qt, cmake

我开发了一个可以在 Windows 上运行的应用程序，我现在正试图让它为 Mac 编译。我尝试使用 Qt 与 CMake 和库 Cinder 来保持一切可移植性，但不可避免地它并没有那么简单。

我在 Mac OS 10.7.5 和 Qt 4.8.3 上运行 Xcode 4.4.1 - 我还使用 Qt 的 LGPL 许可证，它要求我使用动态链接而不是静态链接。[我从http://qt-project.org/downloads](http://qt-project.org/downloads)下载了 Qt 作为安装程序，并没有自己编译它（我也不完全确定如何在 Mac 上编译）。

使用 CMake 创建一个 Xcode 项目并进行一些调整，我设法进入了编译阶段，但我坚持这一行，然后导致所有 Qt 链接失败：

*忽略文件/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.6.sdk/Library/Frameworks/QtXml.framework/QtXml，文件是为不受支持的文件格式（0xcf 0xfa 0xed 0xfe 0x 7 0x 0 0x 0 0x 1 0x 3 0x 0 0x 0 0x 0 0x 6 0x 0 0x 0 0x 0 ）这不是被链接的架构（i386）：/Applications/Xcode.app/Contents/Developer/Platforms/ MacOSX.platform/Developer/SDKs/MacOSX10.6.sdk/Library/Frameworks/QtXml.framework/QtXmignoring 文件/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.6.sdk /Library/Frameworks/QtCore.framework/QtCore，文件是为不受支持的文件格式（ 0xcf 0xfa 0xed 0xfe 0x 7 0x 0 0x 0 0x 1 0x 3 0x 0 0x 0 0x 0 0x 6 0x 0 0x 0 0x 0 ）构建的不是被链接的架构（i386）：/Applications/Xcode。app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.6.sdk/Library/Frameworks/QtCore.framework/QtCore*

还值得一提的是，我需要使用 10.6 SDK 构建 32 位架构 (i386) 以与 Cinder 兼容。

所以，问题是，我怎样才能克服这个错误？我认为问题可能是 Qt 仅针对 64 位架构构建，但我如何构建正确的版本并将我的 Xcode 项目指向它？

# c - C在循环中将字符串与int连接起来

> ID：13169562
> 
> 赞同：3
> 
> 时间：2012-11-01T00:57:15.763
> 
> 标签：c, string

我是 C 新手，遇到字符串问题。我想做的是在循环中创建一个像“val1，val2，val3”这样的字符串。

目前我的代码看起来像：

```
char tagstr[60] = "";
int k;
int n = 5;
for (k=0; k < n; k++) {
    char temp[10]  = "";
    sprintf(temp, ", val%d", k);
    strcat(tagstr, temp);
} 
```

但是 tagstr 的输出是 ", val#"，其中 # 是一些长整数值。我猜我在这里的指针做错了，但我已经尝试了我能想到的一切但没有成功......任何帮助将不胜感激。

编辑：更多上下文，如果有帮助：

```
int tagsClosed = strlen(pch1) - strcspn(pch1, ")");
do {
    if (curTag.size > 0) {
        // problem section
        char tagstr[60] = "";
        int k;
        for (k = 0; k < 5; k++) {
            char temp[10] = "";
            sprintf(temp, ", val%i", temp, k);
            strcat(tagstr, temp);
        }

        // This prints out something like ", val-890132840" x 5 (same number)
        printf ("String is now: %s\n", tagstr);
    }
    curTag = *(curTag.parent);
    tagsClosed--;
} while (tagsClosed > 0); 
```

curTag 是一个结构：

```
typedef struct Tag {
    char * name;
    int size; // number of children
    int tagnum;
    struct Tag* parent;
} Tag; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T01:40:19.557

问题在于`sprintf(temp, ", val%i", temp, k);`将`temp`（实际上是数组中第一个字符的地址）的值添加到字符串中，而根本不将值添加`k`到字符串中。这应该是`sprintf(temp, ", val%i", k);`。

您可以提前计算所需的空间量（包括零终止符）：

```
5+1 + 5+1 + 5+1 + 5+1 + 5+1 + 1 = 31 characters 
```

还; using`strcat`不好（对于性能），因为您会反复搜索 the 的末尾，`tagstr`然后将新字符复制到末尾。最好跟踪当前的结尾，`tagstr`然后直接在结尾存储下一组字符，无需搜索，无需临时字符串，也无需复制。例如：

```
void thing(void) {
    char tagstr[60];
    int pos = 0;
    int k;
    int n = 5;

    for (k=0; k < n; k++) {
        pos += sprintf(&tagstr[pos], ", val%d", k);
    }
    printf ("String is now: %s\n", tagstr);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T01:12:08.530

**为我工作：**

```
$ gcc -xc - && ./a.out
int main(void) {
        char tagstr[60] = "";
        int k;
        int n = 5;
        for (k=0; k < n; k++) {
            char temp[10]  = "";
            sprintf(temp, ", val%d", k);
            strcat(tagstr, temp);
        }
        printf("[%s]\n", tagstr);
}
[, val0, val1, val2, val3, val4] 
```

除非你说问题出在最初的`", "`..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T01:21:44.883

如果您决定不想要前导逗号和空格，则可以对显示的代码使用简单的变体：

```
#include <stdio.h>
#include <string.h>

int main(void)
{
    char tagstr[60] = "";
    const char *pad = "";
    int k;
    int n = 5;
    for (k = 0; k < n; k++)
    {
        char temp[10]  = "";
        snprintf(temp, sizeof(temp), "%sval%d", pad, k);
        strcat(tagstr, temp);
        pad = ", ";
    }
    printf("tagstr <<%s>>\n", tagstr);
    return 0;
} 
```

该程序的输出是：

```
tagstr <<val0, val1, val2, val3, val4>> 
```

但是，您的代码对我来说可以正常工作，尽管前面有逗号和空格。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-01T01:04:38.980

你的临时数组太短了！利用

```
char temp[16]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T01:02:21.457

`temp`不足以保存你的结果`sprintf`。这正是您应该尽可能使用带有大小参数的字符串函数的其他变体的`snprintf`原因。`strncat`

# c# - 如何将数组传递给执行存储命令？

> ID：13169566
> 
> 赞同：2
> 
> 时间：2012-11-01T00:57:24.093
> 
> 标签：c#, entity-framework-4

如何将用逗号分隔的整数数组`ExecuteStoreCommand`作为参数传递给实体中的一个我无法执行此操作：

```
this.ObjectContext.ExecuteStoreCommand("INSERT INTO SurveyPatientListMrns 
  (UserData, MrnId) SELECT DISTINCT '{0}' , MrnId 
FROM PatientVisits WHERE (FacilityId = {1})
AND (UnitId IN ({2}))", userData, facilityId, (string.Join(",", unitIds))); 
```

这`(string.Join(",", unitIds))`是一个字符串，由于逗号，我无法将其转换为整数。那我该如何传递参数呢？

仅供参考，unitIds 是一个整数数组

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T01:06:24.050

虽然它看起来像一个`string.Format`操作，但它`ExecuteStoreCommand`在内部构建一个参数化查询以提高性能并帮助保护您免受 SQL 注入攻击。[(MSDN)](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.executestorecommand.aspx)

当您将您`string.Join`作为参数执行时`ExecuteStoreCommand`，它不会将该结果视为`IN`子句的值列表，而是恰好看起来像一个字符串。基本上它会生成一个`IN`如下所示的子句：

```
(UnitId IN ('1,2,3')) 
```

这显然不是你想要的。

您将不得不在传递它之前使用`string.Join`-ed 列表构建 SQL 命令：`uinitIds``ExecuteStoreCommand`

```
string query = @"INSERT INTO SurveyPatientListMrns  (UserData, MrnId) 
    SELECT DISTINCT '{0}' , MrnId 
    FROM PatientVisits WHERE (FacilityId = {1}) AND 
    (UnitId IN (" + string.Join(",", unitIds) + "))";
this.ObjectContext.ExecuteStoreCommand(query, userData, facilityId); 
```

通常应该避免动态构建 SQL 查询，因为可能存在 SQL 注入攻击，但在这种情况下，您知道这`unitIds`是一个整数列表，因此您应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-06T11:28:21.103

与答案相同的方法，只是演示使用强类型结果集。

```
void Main()
{
    int[] operationIds = { 1000, 1001 };
    var result = ObjectContext.ExecuteStoreQuery<EncyptedPatientInfoDataContract>(
                        $@"SELECT OperationId, Name, OfficialId, IsPatientEncrypted FROM Patient WHERE OperationId IN ({string.Join(",", operationIds)})");
                        result.Dump();
} 
```

Dump 方法是 Linqpad 中的一种方法。Linqpad 5 中工作示例的屏幕截图：

[![在此处输入图像描述](../Images/3afe92c34de04139086d66eecd302be6.png)](https://i.stack.imgur.com/kYqRT.png)

正如公认的答案所说：

*   针对您构建 IN 子句的商店构建查询字符串，例如使用 string.Join 构建逗号分隔的字符串值数组
    *   使用 ExecuteStoreQuery 时，如果您使用 SELECT 项目，您可以将数据转换为您选择的强类型实体 - 只要其属性和各自的属性类型与数据库内容匹配，以便 Entity Framework 可以成功地将内容具体化到 POCO 对象中您用作通用参数。

# url - 多语言 CMS 的 URL 布局

> ID：13169577
> 
> 赞同：2
> 
> 时间：2012-11-01T00:59:04.070
> 
> 标签：url, rest, content-management-system, multilingual

所以我正在尝试向我们的 CMS 添加一个新的、闪亮的 REST Web 服务。它应该非常接近 REST“规则”，因此它应该使用 GET/POST/PUT/DELETE 和正确的逻辑 URL。我的设计深受[Apigee Best Practices](http://apigee.com/about/api-best-practices/restful-api-design-second-edition)的启发。

CMS 管理一个类别树，其中每个类别可以包含许多文章。对于多语言项目，每种语言的类别都是重复的（因此任何文章都由其 ID 和语言 ID 唯一标识）。所有语言的**结构**都是相同的，只是位置可以不同（因此类别 X 包含每种语言中的类别 Y 和 Z，但在语言 1 中 Y 可以在 Z 之前，而在语言 2 中则相反）。创建新文章或类别总是会创建所有语言的副本。删除的工作方式相同，因此始终删除所有语言的文章。

仅供参考：语言由其数字 ID 或语言环境（如`en_US`）标识。

*（请`/v1`在所有 URI 前面画一个前导；我跳过了它，因为它对这个问题没有任何帮助。）`*

我目前的方法是使用这样的 URL 方案：

```
GET    /articles               :(  returns all articles in all languages
GET    /articles/:id-:langid   :)  returns a single article in a given language
POST   /articles               :)  creates a new article
PUT    /articles/:id-:langid   :)  update a single article in a given language
DELETE /articles/:id           :)  delete an article in all languages 
```

但...

### 如何识别语言？

目前，每种语言分配的区域设置不需要是唯一的，因此在极少数情况下两种语言可以具有相同的区域设置。使用 ID 保证是唯一的。

使用区域设置（很可能强制小写）会很好，因为 URL 更具可读性。但这会

*   可能会导致项目具有重叠的语言环境。
*   要求客户端首先获取语言环境（但我猜客户端无论如何都必须获取语言 ID，所以这没关系）。

我想最终得到一个解决方案，并倾向于使用语言环境。但是，是否值得冒重叠地区的风险？

*（您可以在下面的图像`langid=X`中互换`locale=xx_xx`。）*

### 语言应该是层次结构元素吗？

在大多数情况下，API 的客户端将希望获取给定语言的文章，而不是全部。我可以通过允许 GET 参数和 offer 来解决这个问题`GET /articles?langid=42`。但由于这是一个常见的用例，我想避免使用可选参数并使其明确。

这将导致`GET /articles/:langid`，但这引入了语言是 API 内部层次结构级别的概念。如果我要这样做，我想让其他动词保持一致。新的 URL 布局如下所示：

```
GET    /articles/:langid       :)  returns all articles in a given language
GET    /articles/:langid/:id   :)  returns a single article in a given language
POST   /articles               :(  creates a new article in all languages
PUT    /articles/:langid/:id   :)  update a single article in a given language
DELETE /articles/:langid/:id   :(  delete an article in all languages 
```

或者

```
GET    /:langid/articles       :)  returns all articles in a given language
GET    /:langid/articles/:id   :)  returns a single article in a given language
POST   /articles               :(  creates a new article in all languages
PUT    /:langid/articles/:id   :)  update a single article in a given language
DELETE /:langid/articles/:id   :(  delete an article in all languages 
```

这将导致...

### 如何处理全球行动？

上述布局存在适用于所有语言的问题`POST`，`DELETE`但 URL 表明它们仅适用于一种语言。所以我可以修改布局：

```
GET    /articles/:langid       :)  returns all articles in a given language
GET    /articles/:langid/:id   :)  returns a single article in a given language
POST   /articles               :)  creates a new article in all languages
PUT    /articles/:langid/:id   :)  update a single article in a given language
DELETE /articles/:id           :)  delete an article in all languages 
```

这使得布局有些混乱，因为语言级别只是有时存在，并且需要对系统的内部有很多了解。从好的方面来说，这与系统非常匹配，并且与内部工作非常相似。

### 牺牲？

那么我在哪里做牺牲呢？我是否应该引入别名 URL 以获得良好的 URL 布局，但可能会在背景中做一些意想不到的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T09:16:01.397

前段时间我遇到了完全相同的问题，我决定把本地放在一切前面。在消费内容时，阅读以下 URL 更有意义：

> `/en/articles/1/`
> 
> `/en/authors/2/`
> 
> `/gr/articles/1/`
> 
> `/gr/authors/2/`

比

> `/articles/en/1/`
> 
> `/authors/en/2/`
> 
> `/articles/gr/1/`
> 
> `/authors/gr/2/`

为了解决“没有特定语言环境”的问题，我会使用一个关键字来引用所有可用的语言环境或默认语言环境。所以：

> `/global/articles/`

或者

> `/all-locales/articles/`

或者

> `/all/articles/`

老实说，我喜欢 global ，因为它们读起来很有意义。

> `DELETE /global/articles/:id :) delete an article in all languages`

希望我有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:45:57.477

我最初的方法是将语言作为 URL 中的可选前缀，例如`/en_us/articles`, `/en_us/articles/:id`，但是如果您不想使用语言标识符“污染”您的 URL，您可以使用`Accept-language`标头代替，就像内容协商一样在[RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec12.html)中定义。Microsoft 的 WebAPI 正在使用这种方法进行格式协商。

# java - 如何使用正则表达式实现递归回文检查器？

> ID：13169579
> 
> 赞同：0
> 
> 时间：2012-11-01T00:59:10.173
> 
> 标签：java, regex, string, palindrome

到目前为止，我一直在使用`^[a-zA-Z]+( [a-zA-z]+)*$`确保用户输入的开头和结尾没有空格，并且不接受数字或特殊字符，只接受字母字符。

我在网上查看了正则表达式列表，在我的文本中，我似乎无法在这些条件下为递归回文程序制定一个：

*   接受包含大写或小写字符的字符串。
*   接受标点符号和单行空格。

我认为验证后我不需要以下正则表达式，但如果有我想知道它是什么。

*   验证后大写字母必须转换为小写。
*   标点符号和空格将被忽略。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:59:08.900

如果我理解正确，您想在 Java 中创建一个使用正则表达式的递归回文检查器。我对学习 Java 很感兴趣，所以我把它当作我自己的“家庭作业问题”来试一试，尽管它可能也是你的。

```
import java.lang.*;
import java.util.*;
import java.util.regex.*;

class Main
{
    public static boolean recursivePalindrome(String str)
    {
        // We need two patterns: one that checks the degenerate solution (a
        // string with zero or one [a-z]) and one that checks that the first and
        // last [a-z] characters are the same. To avoid compiling these two
        // patterns at every level of recursion, we compile them once here and
        // pass them down thereafter.
        Pattern degeneratePalindrome = Pattern.compile("^[^a-z]*[a-z]?[^a-z]*$", Pattern.CASE_INSENSITIVE | Pattern.DOTALL);
        Pattern potentialPalindrome  = Pattern.compile("^[^a-z]*([a-z])(.*)\\1[^a-z]*$", Pattern.CASE_INSENSITIVE | Pattern.DOTALL);
        return recursivePalindrome(str, degeneratePalindrome, potentialPalindrome);
    }

    public static boolean recursivePalindrome(String str, Pattern d, Pattern p)
    {
        // Check for a degenerate palindrome.
        if (d.matcher(str).find()) return true;

        Matcher m = p.matcher(str);

        // Check whether the first and last [a-z] characters match.
        if (!m.find()) return false;

        // If they do, recurse using the characters captured between.
        return recursivePalindrome(m.group(2), d, p);
    }

    public static void main (String[] args) throws java.lang.Exception
    {
        String str1 = "A man, a plan, a canal... Panama!";
        String str2 = "A man, a pan, a canal... Panama!";

        System.out.println(str1 + " : " + Boolean.toString(recursivePalindrome(str1)));
        System.out.println(str2 + " : " + Boolean.toString(recursivePalindrome(str2)));
    }
} 
```

输出是：

```
A man, a plan, a canal... Panama! : true
A man, a pan, a canal... Panama! : false 
```

# php - php函数变量参数

> ID：13169586
> 
> 赞同：0
> 
> 时间：2012-11-01T00:59:56.190
> 
> 标签：php

> **可能重复：**
> [如何将可变数量的参数传递给 PHP 函数](https://stackoverflow.com/questions/1422652/how-to-pass-variable-number-of-arguments-to-a-php-function)

我在 php 中创建我的框架我想要变量函数参数 ex

如果我有 2 个参数

```
 $a,$b; 
```

函数变成

```
 function name($a,$b); 
```

如果我有 3 个参数

```
 $a,$b,$c; 
```

函数变成

```
 function name($a,$b,$c); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T01:04:00.187

查看[http://www.php.net/manual/en/functions.arguments.php#functions.variable-arg-list](http://www.php.net/manual/en/functions.arguments.php#functions.variable-arg-list)。那是你要找的吗？如果没有，你能接受一个数组吗？

# javascript - 地理位置 - JS 与 JSON

> ID：13169587
> 
> 赞同：0
> 
> 时间：2012-11-01T01:00:30.040
> 
> 标签：javascript, json, geolocation, jsonp, geocoding

我正在尝试使用 maxmind 的免费服务 [http://j.maxmind.com/app/geoip.js获取用户浏览的地理位置](http://j.maxmind.com/app/geoip.js)

```
jQuery.getScript('http://j.maxmind.com/app/geoip.js', function() 
{
    var country = geoip_city();
    console.log("Your location is: " + country);
}); 
```

但是，输出 javascript 代码而不是 json 似乎有点问题，因为它会评估来自您无法控制的站点的代码。处理这种情况的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T07:24:34.630

这将显示用户的城市。

```
<script type="text/javascript" src="http://j.maxmind.com/app/geoip.js"></script>

<script type="text/javascript">
    document.write(geoip_city());
</script> 
```

# php - 如何检查是否存在多个数组键

> ID：13169588
> 
> 赞同：102
> 
> 时间：2012-11-01T01:00:31.493
> 
> 标签：php, key

我有各种各样的数组，它们要么包含

```
story & message 
```

要不就

```
story 
```

我将如何检查数组是否同时包含故事和消息？ `array_key_exists()`仅在数组中查找该单个键。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2013-08-15T09:56:08.147

这是一个可扩展的解决方案，即使您想检查大量密钥：

```
<?php

// The values in this arrays contains the names of the indexes (keys) 
// that should exist in the data array
$required = array('key1', 'key2', 'key3');

$data = array(
    'key1' => 10,
    'key2' => 20,
    'key3' => 30,
    'key4' => 40,
);

if (count(array_intersect_key(array_flip($required), $data)) === count($required)) {
    // All required keys exist!
} 
```

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2012-11-01T01:02:10.787

如果您只有 2 个要检查的键（如在原始问题中），则只需调用[`array_key_exists()`](http://php.net/manual/en/function.array-key-exists.php)两次即可检查键是否存在可能很容易。

```
if (array_key_exists("story", $arr) && array_key_exists("message", $arr)) {
    // Both keys exist.
} 
```

然而，这显然不能很好地扩展到许多键。在这种情况下，自定义函数会有所帮助。

```
function array_keys_exists(array $keys, array $arr) {
   return !array_diff_key(array_flip($keys), $arr);
} 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2014-04-22T04:51:42.013

居然`array_keys_exist`不存在？！在此期间，留出一些空间来为这个常见任务找出单行表达式。我正在考虑一个shell脚本或另一个小程序。

注意：以下每个解决方案都使用`[…]`php 5.4+ 中可用的简洁数组声明语法

### [数组差异](http://php.net/array_diff)+[数组键](http://php.net/array_keys)

```
if (0 === count(array_diff(['story', 'message', '…'], array_keys($source)))) {
  // all keys found
} else {
  // not all
} 
```

[（给Kim Stacks](https://stackoverflow.com/a/17530299/934195)的帽子小费）

这种方法是我发现的最简短的。*返回参数 1 中不*`array_diff()`存在于参数 2 中的项目数组。因此，一个空数组表示找到了所有键。在 php 5.5 中，您可以简化为简单的 .*`0 === count(…)``empty(…)`*

 *### [array_reduce](http://php.net/array_reduce) +未[设置](http://php.net/unset)

```
if (0 === count(array_reduce(array_keys($source), 
    function($in, $key){ unset($in[array_search($key, $in)]); return $in; }, 
    ['story', 'message', '…'])))
{
  // all keys found
} else {
  // not all
} 
```

更难阅读，更容易改变。`array_reduce()`使用回调来遍历数组以达到一个值。通过输入我们对 的`$initial`值感兴趣的键`$in`，然后删除在源中找到的键，如果找到所有键，我们可以期望以 0 元素结尾。

由于我们感兴趣的键非常适合底线，因此该结构很容易修改。

### [array_filter](http://php.net/array_filter) & [in_array](http://php.net/in_array)

```
if (2 === count(array_filter(array_keys($source), function($key) { 
        return in_array($key, ['story', 'message']); }
    )))
{
  // all keys found
} else {
  // not all
} 
```

编写起来比`array_reduce`解决方案更简单，但编辑起来有点棘手。`array_filter`也是一个迭代回调，允许您通过在回调中返回 true（将项目复制到新数组）或 false（不复制）来创建过滤数组。gotchya 是您必须更改`2`为您期望的项目数。

这可以变得更耐用，但可读性很荒谬：

```
$find = ['story', 'message'];
if (count($find) === count(array_filter(array_keys($source), function($key) use ($find) { return in_array($key, $find); })))
{
  // all keys found
} else {
  // not all
} 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2014-07-20T10:43:59.687

在我看来，到目前为止最简单的方法是：

```
$required = array('a','b','c','d');

$values = array(
    'a' => '1',
    'b' => '2'
);

$missing = array_diff_key(array_flip($required), $values); 
```

印刷：

```
Array(
    [c] => 2
    [d] => 3
) 
```

这也允许检查确切缺少哪些键。这可能对错误处理很有用。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2015-12-24T15:23:02.667

另一种可能的解决方案：

```
if (!array_diff(['story', 'message'], array_keys($array))) {
    // OK: all the keys are in $array
} else {
   // FAIL: some keys are not
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-03-01T22:53:58.197

上述解决方案很聪明，但速度很慢。使用 isset 的简单 foreach 循环比解决方案快两倍多`array_intersect_key`。

```
function array_keys_exist($keys, $array){
    foreach($keys as $key){
        if(!array_key_exists($key, $array))return false;
    }
    return true;
} 
```

（344ms vs 768ms 1000000 次迭代）

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-11-01T01:10:58.430

如果你有这样的事情：

```
$stuff = array();
$stuff[0] = array('story' => 'A story', 'message' => 'in a bottle');
$stuff[1] = array('story' => 'Foo'); 
```

你可以简单地`count()`：

```
foreach ($stuff as $value) {
  if (count($value) == 2) {
    // story and message
  } else {
    // only story
  }
} 
```

这只有在你确定你只有这些数组键时才有效，没有别的。

使用 array_key_exists() 仅支持一次检查一个键，因此您需要分别检查两者：

```
foreach ($stuff as $value) {
  if (array_key_exists('story', $value) && array_key_exists('message', $value) {
    // story and message
  } else {
    // either one or both keys missing
  }
} 
```

`array_key_exists()`如果键存在于数组中，则返回 true，但它是一个真正的函数并且需要输入很多内容。语言构造`isset()`几乎会做同样的事情，除非测试值为 NULL：

```
foreach ($stuff as $value) {
  if (isset($value['story']) && isset($value['message']) {
    // story and message
  } else {
    // either one or both keys missing
  }
} 
```

此外，isset 允许一次检查多个变量：

```
foreach ($stuff as $value) {
  if (isset($value['story'], $value['message']) {
    // story and message
  } else {
    // either one or both keys missing
  }
} 
```

现在，为了优化设置的东西的测试，你最好使用这个“if”：

```
foreach ($stuff as $value) {
  if (isset($value['story']) {
    if (isset($value['message']) {
      // story and message
    } else {
      // only story
    }
  } else {
    // No story - but message not checked
  }
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-01-28T13:25:32.717

那这个呢：

```
isset($arr['key1'], $arr['key2']) 
```

仅当两者都不为 null 时才返回 true

如果为空，则键不在数组中

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-01-29T19:23:03.460

我经常使用这样的东西

```
$wantedKeys = ['story', 'message'];
$hasWantedKeys = count(array_intersect(array_keys($source), $wantedKeys)) > 0 
```

或查找所需键的值

```
$wantedValues = array_intersect_key($source, array_fill_keys($wantedKeys, 1)) 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-11-20T05:30:32.810

试试这个

```
$required=['a','b'];$data=['a'=>1,'b'=>2];
if(count(array_intersect($required,array_keys($data))>0){
    //a key or all keys in required exist in data
 }else{
    //no keys found
  } 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-07-08T15:20:11.460

这是我为自己编写的用于在类中使用的函数。

```
<?php
/**
 * Check the keys of an array against a list of values. Returns true if all values in the list
 is not in the array as a key. Returns false otherwise.
 *
 * @param $array Associative array with keys and values
 * @param $mustHaveKeys Array whose values contain the keys that MUST exist in $array
 * @param &$missingKeys Array. Pass by reference. An array of the missing keys in $array as string values.
 * @return Boolean. Return true only if all the values in $mustHaveKeys appear in $array as keys.
 */
    function checkIfKeysExist($array, $mustHaveKeys, &$missingKeys = array()) {
        // extract the keys of $array as an array
        $keys = array_keys($array);
        // ensure the keys we look for are unique
        $mustHaveKeys = array_unique($mustHaveKeys);
        // $missingKeys = $mustHaveKeys - $keys
        // we expect $missingKeys to be empty if all goes well
        $missingKeys = array_diff($mustHaveKeys, $keys);
        return empty($missingKeys);
    }

$arrayHasStoryAsKey = array('story' => 'some value', 'some other key' => 'some other value');
$arrayHasMessageAsKey = array('message' => 'some value', 'some other key' => 'some other value');
$arrayHasStoryMessageAsKey = array('story' => 'some value', 'message' => 'some value','some other key' => 'some other value');
$arrayHasNone = array('xxx' => 'some value', 'some other key' => 'some other value');

$keys = array('story', 'message');
if (checkIfKeysExist($arrayHasStoryAsKey, $keys)) { // return false
    echo "arrayHasStoryAsKey has all the keys<br />";
} else {
    echo "arrayHasStoryAsKey does NOT have all the keys<br />";
}

if (checkIfKeysExist($arrayHasMessageAsKey, $keys)) { // return false
    echo "arrayHasMessageAsKey has all the keys<br />";
} else {
    echo "arrayHasMessageAsKey does NOT have all the keys<br />";
}

if (checkIfKeysExist($arrayHasStoryMessageAsKey, $keys)) { // return false
    echo "arrayHasStoryMessageAsKey has all the keys<br />";
} else {
    echo "arrayHasStoryMessageAsKey does NOT have all the keys<br />";
}

if (checkIfKeysExist($arrayHasNone, $keys)) { // return false
    echo "arrayHasNone has all the keys<br />";
} else {
    echo "arrayHasNone does NOT have all the keys<br />";
} 
```

我假设您需要检查数组中的多个键 ALL EXIST。如果您正在寻找至少一个键的匹配项，请告诉我，以便我提供另一个功能。

键盘在这里[http://codepad.viper-7.com/AKVPCH](http://codepad.viper-7.com/AKVPCH)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-11-18T14:13:09.620

希望这可以帮助：

```
function array_keys_exist($searchForKeys = array(), $inArray = array()) {
    $inArrayKeys = array_keys($inArray);
    return count(array_intersect($searchForKeys, $inArrayKeys)) == count($searchForKeys); 
}
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-03-23T23:28:29.247

这是旧的，可​​能会被埋葬，但这是我的尝试。

我有一个类似于@Ryan 的问题。在某些情况下，我只需要检查数组中是否至少有一个键，在某些情况下，所有键都*需要*存在。

所以我写了这个函数：

```
/**
 * A key check of an array of keys
 * @param array $keys_to_check An array of keys to check
 * @param array $array_to_check The array to check against
 * @param bool $strict Checks that all $keys_to_check are in $array_to_check | Default: false
 * @return bool
 */
function array_keys_exist(array $keys_to_check, array $array_to_check, $strict = false) {
    // Results to pass back //
    $results = false;

    // If all keys are expected //
    if ($strict) {
        // Strict check //

        // Keys to check count //
        $ktc = count($keys_to_check);
        // Array to check count //
        $atc = count(array_intersect($keys_to_check, array_keys($array_to_check)));

        // Compare all //
        if ($ktc === $atc) {
            $results = true;
        }
    } else {
        // Loose check - to see if some keys exist //

        // Loop through all keys to check //
        foreach ($keys_to_check as $ktc) {
            // Check if key exists in array to check //
            if (array_key_exists($ktc, $array_to_check)) {
                $results = true;
                // We found at least one, break loop //
                break;
            }
        }
    }

    return $results;
} 
```

这比编写多个`||`和`&&`块要容易得多。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-12-18T03:11:56.600

```
 $colsRequired   = ["apple", "orange", "banana", "grapes"];
    $data           = ["apple"=>"some text", "orange"=>"some text"];
    $presentInBoth  = array_intersect($colsRequired,array_keys($data));

    if( count($presentInBoth) != count($colsRequired))
        echo "Missing keys  :" . join(",",array_diff($colsRequired,$presentInBoth));
    else
        echo "All Required cols are present"; 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-11-01T01:03:26.287

这不起作用吗？

```
array_key_exists('story', $myarray) && array_key_exists('message', $myarray) 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-09-12T12:14:27.673

```
<?php

function check_keys_exists($keys_str = "", $arr = array()){
    $return = false;
    if($keys_str != "" and !empty($arr)){
        $keys = explode(',', $keys_str);
        if(!empty($keys)){
            foreach($keys as $key){
                $return = array_key_exists($key, $arr);
                if($return == false){
                    break;
                }
            }
        }
    }
    return $return;
} 
```

//运行演示

```
$key = 'a,b,c';
$array = array('a'=>'aaaa','b'=>'ccc','c'=>'eeeee');

var_dump( check_keys_exists($key, $array)); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-11-24T16:08:28.057

我不确定，如果这是个坏主意，但我使用非常简单的 foreach 循环来检查多个数组键。

```
// get post attachment source url
$image     = wp_get_attachment_image_src(get_post_thumbnail_id($post_id), 'single-post-thumbnail');
// read exif data
$tech_info = exif_read_data($image[0]);

// set require keys
$keys = array('Make', 'Model');

// run loop to add post metas foreach key
foreach ($keys as $key => $value)
{
    if (array_key_exists($value, $tech_info))
    {
        // add/update post meta
        update_post_meta($post_id, MPC_PREFIX . $value, $tech_info[$value]);
    }
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-06-17T11:38:11.840

```
// sample data
$requiredKeys = ['key1', 'key2', 'key3'];
$arrayToValidate = ['key1' => 1, 'key2' => 2, 'key3' => 3];

function keysExist(array $requiredKeys, array $arrayToValidate) {
    if ($requiredKeys === array_keys($arrayToValidate)) {
        return true;
    }

    return false;
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-10-05T15:02:58.087

```
$myArray = array('key1' => '', 'key2' => '');
$keys = array('key1', 'key2', 'key3');
$keyExists = count(array_intersect($keys, array_keys($myArray))); 
```

将返回 true，因为在 $myArray 中有来自 $keys 数组的键

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-01-11T08:10:25.510

可以使用的东西

```
//Say given this array
$array_in_use2 = ['hay' => 'come', 'message' => 'no', 'story' => 'yes'];
//This gives either true or false if story and message is there
count(array_intersect(['story', 'message'], array_keys($array_in_use2))) === 2; 
```

> 请注意对 2 的检查，如果您要搜索的值不同，您可以更改。
> 
> > 此解决方案可能效率不高，但有效！

**更新**

在一个*脂肪*函数中：

```
 /**
 * Like php array_key_exists, this instead search if (one or more) keys exists in the array
 * @param array $needles - keys to look for in the array
 * @param array $haystack - the <b>Associative</b> array to search
 * @param bool $all - [Optional] if false then checks if some keys are found
 * @return bool true if the needles are found else false. <br>
 * Note: if hastack is multidimentional only the first layer is checked<br>,
 * the needles should <b>not be<b> an associative array else it returns false<br>
 * The array to search must be associative array too else false may be returned
 */
function array_keys_exists($needles, $haystack, $all = true)
{
    $size = count($needles);
    if($all) return count(array_intersect($needles, array_keys($haystack))) === $size;
    return !empty(array_intersect($needles, array_keys($haystack)));

} 
```

因此，例如：

```
$array_in_use2 = ['hay' => 'come', 'message' => 'no', 'story' => 'yes'];
//One of them exists --> true
$one_or_more_exists = array_keys_exists(['story', 'message'], $array_in_use2, false);
//all of them exists --> true
$all_exists = array_keys_exists(['story', 'message'], $array_in_use2); 
```

希望这可以帮助 ：）

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-06-06T22:44:32.133

我通常使用一个函数来验证我的帖子，它也是这个问题的答案，所以让我发布它。

要调用我的函数，我将像这样使用 2 数组

```
validatePost(['username', 'password', 'any other field'], $_POST)) 
```

那么我的功能将如下所示

```
 function validatePost($requiredFields, $post)
    {
        $validation = [];

        foreach($requiredFields as $required => $key)
        {
            if(!array_key_exists($key, $post))
            {
                $validation['required'][] = $key;
            }
        }

        return $validation;
    } 
```

这将输出这个

“必填”：[“用户名”、“密码”、“任何其他字段”]

所以这个函数所做的是验证并返回发布请求的所有缺失字段。*

# asp.net - 向 IIS_IUSRS 授予删除权限的启用 Web 的文件存储和安全隐患

> ID：13169589
> 
> 赞同：3
> 
> 时间：2012-11-01T01:00:43.330
> 
> 标签：asp.net, security, iis, file-upload, file-permissions

我有这个问题很多年了，每次出现这个问题时都会进行研究，但始终找不到明确的答案。不知何故，强大的 Internet、MSDN、社区论坛对此要么保持沉默，要么含糊其辞。在数以千计的与发展有关的不确定性中，这是唯一一个仍然难以捉摸的。

**直截了当：**为了使用户能够在共享主机环境中上传和管理他们博客文章中使用的图像（和其他文件），我可以考虑 SQL Server 二进制数据类型（性能影响）或文件系统。要使用后者，需要为存储目录上的 IIS_IUSRS 角色设置必要的权限：创建/写入、读取和删除。我的问题 - 如果我这样做，安全隐患是什么？有人能以某种方式利用这一点，绕过 ASP.NET 请求管道并操纵文件夹内的文件，而不向相应的 ASP.NET 处理程序（检查权限、验证上传等）发出请求吗？

我开发了几个允许文件上传的系统，这一直困扰着我。现在，希望有人能够让我放心，并在理想情况下解释该过程背后的机制。

* * *

**更新**

查看最新答案后（非常感谢），问题的另一种表述：

客户端是否有可能以某种方式绕过请求管道并在允许它的目录中创建/删除文件（假设该人知道目录结构）？还是只有处理请求的代码才能做到？有什么潜在的利用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T06:26:04.370

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T06:59:47.517

之前做过这件事，我会提出两个建议：

首先，不要将上传的文件存储在与您的应用程序代码相同的目录结构中（如果可能）。使其成为一个明确定义的外部位置，并明确锁定到仅运行应用程序的用户。这使得恶意上传更难注入您的应用程序，因为 Web 服务器或 ASP.NET 本身不知道如何访问文件（只有您的应用程序）。

如果绝对不可能这样做，请确保没有外部用户可以使用标准的 ASP.NET 授权访问存储文件夹，并且只允许您的应用程序用户写入此文件夹，除此之外别无其他。

二、上传的文件不要以原始名称和文件扩展名存储；保持元数据分开。只需将文件视为原始二进制数据块。这有几个原因。首先，它可以防止在服务器上无意中执行文件，无论是直接访问文件系统的人、Web 服务器还是 ASP.NET。其次，它使攻击者更难利用恶意上传，因为他们永远无法猜测服务器上文件的名称或路径。

# ios - 从 TabBarController 设置导航控制器参数

> ID：13169590
> 
> 赞同：1
> 
> 时间：2012-11-01T01:00:55.610
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller

我已经为此苦苦挣扎了很长一段时间，但我似乎在这里找不到任何直接相关的东西。我的**目标**是将核心数据对象从登录屏幕传递到我的第一个视图。我的第一个视图链接到导航控制器，导航控制器是选项卡栏控制器上的第一个选项卡。

通过 prepareForSegue，我可以毫无问题地将对象传递给标签栏控制器，但是当事情变得混乱时，如何将存储在标签栏控制器中的对象传递给导航控制器？

任何帮助将不胜感激！

![截屏](../Images/caeef8ebf463d3812f2325e36b416c52.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T01:36:24.370

`TabBar`持有数组，因为`ViewController`你`ViewController`在里面`NavigationController`，你可以使用这个代码将你想要的对象传递`ViewController`到`NavigationController`from`prepareForSegue`

```
UITabBarController *tabBarCtr = segue.destinationViewController;
UINavigationController *navigationController = [[tabBarCtr viewControllers] objectAtIndex:0];
YourViewControllerClass *viewControl = [[navigationController viewControllers] objectAtIndex:0];
viewControl.myObject = self.myObject 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-23T02:23:33.057

这也有效：

```
UITabBarController *tabBarCtr = segue.destinationViewController;
SearchItemTypeViewController *viewControl = [[tabBarCtr viewControllers] objectAtIndex:0]; 
```

# javascript - 移动固定顶栏放大/缩小

> ID：13169593
> 
> 赞同：4
> 
> 时间：2012-11-01T01:01:16.370
> 
> 标签：javascript, html, mobile, toolbar, fixed

我正在尝试在 HTML5 中为移动设备实现一个**固定的顶部栏，****当用户放大/缩小**网页时它也保持固定。

据我在 Jquery mobile 上看到的，他们禁用放大/缩小以实现固定的顶栏。

Google 制作了自己的内容滚动实现来为 gmail 应用程序制作固定的顶部栏。但他们也不允许缩放。

有谁知道解决方法？知道当他们放大/缩小时我是否可以用 js 重新定位新区域顶部的栏？

**更新：**我发现这篇[文章](http://bradfrostweb.com/blog/mobile/fixed-position/)有一个固定顶部栏的示例，它不会禁用缩放，但是当您放大/缩小时，它不会停留在顶部。

此外，我[在 IO 上看到了 Safari 的文档，](http://developer.apple.com/library/safari/#documentation/UserExperience/Reference/GestureEventClassReference/GestureEvent/GestureEvent.html)但我找不到获取新缩放区域的相对位置的方法，因此我可以在每次放大/缩小事件时重新定位其顶部的栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T15:50:56.117

我通过添加解决了固定位置和缩放之间的冲突

```
"data-disable-page-zoom="false"" 
```

到固定标签。希望这能有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T08:07:24.357

Apple 实现了一个特殊的 META 标签来处理缩放：

```
<meta content="width=320; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"> 
```

这会禁用 iPhone 上的缩放功能，它也应该适用于 Android。

至于您想要的缩放效果，我的建议是完全禁用缩放，并使用 jQuery 和 CSS webkit 转换和动画来 100% 执行此操作。

```
#some-div {
    -webkit-transition: all 0.5s ease-out;
} 
```

以下是其他一些可以进行缩放的 jQuery 库：

*   [http://flwtb.co/VKTQ1C](http://flwtb.co/VKTQ1C)
*   [http://flwtb.co/VKTTdW](http://flwtb.co/VKTTdW)

希望这会有所帮助！

# iphone - 如何从 KalViewController 中选择日期

> ID：13169594
> 
> 赞同：1
> 
> 时间：2012-11-01T01:01:23.203
> 
> 标签：iphone, objective-c, ios

我正在使用 Kal 日历控件（链接：[https](https://github.com/klazuka/Kal) ://github.com/klazuka/Kal ）

我想从屏幕上的日历中选择日期，例如我有三个日期：NSDate1、NSDate2、NSDate3。我应该如何从 Kal 的日历视图中选择这些日期

我这样做如下：

```
KalViewController *kal = [[[KalViewController alloc] initWithSelectedDate:[NSDate date]] autorelease];
[self.navigationController pushViewController:kal animated:YES]; 
```

我已将数据源设置为日历，但它不起作用

![在此处输入图像描述](../Images/02e2f8fb7eebbbf864a5f85d6c37cbeb.png)

# gmail - 如何使用 https://mail.google.com/mail/ 附加文件

> ID：13169597
> 
> 赞同：3
> 
> 时间：2012-11-01T01:02:08.760
> 
> 标签：gmail, attachment

[我知道您可以使用https://mail.google.com/mail/?view=cm&tf=0&fs=1&to=email@address.com&body=text](https://mail.google.com/mail/?view=cm&tf=0&fs=1&to=email@address.com&body=text)发送电子邮件

但是，我的身体通常超过了它可以处理的大小限制（大约 800 个字符）。否则我该如何指定正文？有没有办法附加文件？

另外，有人可以解释这种方法中使用的关键词吗？tf=0 是什么意思？fs=1？

另外，邮件发出后，总是弹出“您正在查看的网页正在尝试关闭窗口。您要关闭此窗口吗？”的对话框。我不得不点击是或否。我怎样才能摆脱这个对话框？

# objective-c - 有没有办法删除日期选择器的“年份”？

> ID：13169602
> 
> 赞同：4
> 
> 时间：2012-11-01T01:02:41.223
> 
> 标签：objective-c, ios, cocoa-touch

我在视图中有一个日期选择器，但我只希望它显示日期和月份，而不是年份，有没有办法将年份取出？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-01T02:28:06.587

正如其他人指出的那样：您独自创建自己的选择器，但实际上这并不难。一个快速原型，请注意我使用第一个组件几天，第二个几年，这应该根据现实世界应用程序中的区域设置：

```
-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 2;
}

-(NSInteger)pickerView:pickerView numberOfRowsInComponent:(NSInteger)component
{
    NSUInteger number = 0;
    if (component == 1) {
        number = 12;
    } else {

        NSDateComponents *comps = [[NSCalendar currentCalendar] components:NSDayCalendarUnit | NSMonthCalendarUnit | NSYearCalendarUnit fromDate:[NSDate date]];

        NSUInteger month = [pickerView selectedRowInComponent:1]+1 ;
        NSUInteger actualYear = [comps year];

        NSDateComponents *selectMothComps = [[NSDateComponents alloc] init];
        selectMothComps.year = actualYear;
        selectMothComps.month = month;
        selectMothComps.day = 1;

        NSDateComponents *nextMothComps = [[NSDateComponents alloc] init];
        nextMothComps.year = actualYear;
        nextMothComps.month = month+1;
        nextMothComps.day = 1;

        NSDate *thisMonthDate = [[NSCalendar currentCalendar] dateFromComponents:selectMothComps];
        NSDate *nextMonthDate = [[NSCalendar currentCalendar] dateFromComponents:nextMothComps];

        NSDateComponents *differnce = [[NSCalendar currentCalendar]  components:NSDayCalendarUnit
                                                   fromDate:thisMonthDate
                                                     toDate:nextMonthDate
                                                    options:0];

        number = [differnce day];

    }

    return number;
}

-(void)pickerView:pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    if (component == 1) {
        [pickerView reloadComponent:0];
    }
}

-(NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    return [NSString stringWithFormat:@"%d", row+1];
} 
```

[您将在GitHub 上](https://github.com/vikingosegundo/vsdatepicker)找到示例代码

* * *

您将在 GitHub 上找到的版本知道当月首选语言的名称

![在此处输入图像描述](../Images/ea2974a8de21ed4864d110ae7698313c.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-10T22:02:26.640

斯威夫特 3.0 版本：

```
@IBOutlet weak var pickerCell: UIPickerView!
var months: Array<String> = Calendar.current.monthSymbols

func config() {
    pickerCell.delegate = self
    pickerCell.dataSource = self
}

func numberOfComponents(in pickerView: UIPickerView) -> Int {
    return 2
}

func pickerView(_ pickerView: UIPickerView, numberOfRowsInComponent component: Int) -> Int {
   var number = 0
    if component == 1 {
        return 12
    } else if pickerView.numberOfComponents > 1 {
        let comps = Calendar.current.dateComponents([.day,.month, .year], from: Date())

        let month: Int = pickerView.selectedRow(inComponent: 1)+1
        let year: Int = comps.year!
        var selectMothComps = DateComponents()
        selectMothComps.year = year
        selectMothComps.month = month
        selectMothComps.day = 1

        var nextMothComps = DateComponents()
        nextMothComps.year = year
        nextMothComps.month = month+1
        nextMothComps.day = 1

        let thisMonthDate = Calendar.current.date(from: selectMothComps)
        let nextMonthDate = Calendar.current.date(from: nextMothComps)

        var difference = Calendar.current.dateComponents([.day], from: thisMonthDate!, to: nextMonthDate!)
        number = difference.day!
    }
    return number
}

func pickerView(_ pickerView: UIPickerView, didSelectRow row: Int, inComponent component: Int) {
    if component == 1 {
        pickerView.reloadComponent(0)
    }
}

func pickerView(_ pickerView: UIPickerView, titleForRow row: Int, forComponent component: Int) -> String? {
    if component == 0{
        return  String(format: "%d", row+1)
    } else {
        return months[row]
    }
}
//centers the views. width > than width of smallest component
func pickerView(_ pickerView: UIPickerView, widthForComponent component: Int) -> CGFloat {
    if component == 0 {
        return 45
    }
    return 140
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-17T19:57:42.750

我在 GitHub 上找到了这个项目：[PMEDatePicker](https://github.com/michaelkamphausen/PMEDatePicker)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T01:07:32.193

据我所知，UIDatePicker 无法做到这一点。您可以使用 UIPickerView 来执行此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T01:29:34.990

要扩展 Oscar 的答案，您确实必须使用 UIPickerView。

但是，这并不意味着您编码 365 天，您只需要：

*   一个组件（轮子）损坏了 12 个项目（月）
*   一个组件泄露了 31 个项目（天）

当一个项目被选中时，您将收到它对您的委托对象的索引。在这里，您只需要计算出该索引是什么项目。

对于本月，这可以使用键/值样式机制来实现；或简单地通过其值与组件/轮的值匹配的数组。记住无论如何您都需要一个数据源，您可以简单地在该数据源中查找它；很可能是一个数组。

至于当天，您将获得该项目的索引。由于您的项目（天）将从 1 开始，您只需从索引值中取 1 即可找到用户选择的实际日期。（带走 1 以补偿数组索引）

selectedRowInComponent 是您应该查看的方法以便更好地理解！

但是，将来当您担心必须创建大量相同的对象时，我建议您查看工厂模式，并进行某种形式的迭代来调用您的工厂方法。这与您的问题没有直接关系，但肯定与您上面的评论有关！

希望这可以帮助！

# java - 类中的方法不能应用于给定类型

> ID：13169606
> 
> 赞同：27
> 
> 时间：2012-11-01T01:03:52.973
> 
> 标签：java, arrays, methods, arguments

我正在创建一个程序，它生成 0 到 9 之间的 100 个随机整数并显示每个数字的计数。我正在使用一个由十个整数组成的数组**counts**来存储 0、1、...、9 的数量。）

当我编译程序时，我得到了错误：

> RandomNumbers.java:9：错误：类 RandomNumbers 中的方法 generateNumbers 不能应用于给定类型；
> 生成数字（）；
> 
> 必需：int[]
> 
> 找到：generateNumbers();
> 
> 原因：实际参数列表和形式参数列表的长度不同

我在 main 方法中调用方法 generateNumbers() 和 displayCounts() 的代码行收到此错误。

```
 public class RandomNumbers {

       public static void main(String[] args) {

            //declares array for random numbers
        int[] numbers = new int [99];

        //calls the generateNumbers method
        generateNumbers();

        //calls the displayCounts method        
        displayCounts();
    }

    //***************************************************************** 

    private static int generateNumbers(int[] numbers){

        for(int i = 0; i < 100; i++){
            int randomNumber;
            randomNumber = (int)(Math.random() *10);
            numbers[i] = randomNumber;
        return randomNumber;
        }

    }

    //***************************************************************** 

    private static void displayCounts(int[] numbers){
        int[] frequency = new int[10];

        for(int i = 0, size = numbers.length; i < size; i++ ){
            System.out.println((i) + " counts = " + frequency[i]);
        }

    }//end of displayCounts

    }//end of class 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-01T01:05:27.050

`generateNumbers()`需要一个参数，而您没有传入一个参数！

generateNumbers() 在设置第一个随机数后也会返回 - 似乎对它试图做什么感到有些困惑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T01:06:26.327

call `generateNumbers(numbers);`，你的 `generateNumbers();`期望`int[]`是一个`argument`你没有传递的答案，因此错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-28T08:39:32.547

`generateNumbers(int[] numbers)`函数定义的参数需要`(int[] numbers)`一个整数数组。但是，总的来说，`generateNumbers();`没有任何论据。

要解决它，只需`generateNumbers()`在 main 中调用函数时将一组数字添加到参数中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-10T19:29:10.163

我想你想要这样的东西。格式已关闭，但它应该提供您想要的基本信息。

```
 import java.util.Scanner;
public class BookstoreCredit 
{

   public static void computeDiscount(String name, double gpa) 
   {
      double credits;
      credits = gpa * 10;
      System.out.println(name + " your GPA is " +
         gpa + " so your credit is $" + credits);

   }

   public static void main (String args[]) 
   {
      String studentName;
      double gradeAverage;
      Scanner inputDevice = new Scanner(System.in);
      System.out.println("Enter Student name: ");
      studentName = inputDevice.nextLine();
      System.out.println("Enter student GPA: ");
      gradeAverage = inputDevice.nextDouble();  

      computeDiscount(studentName, gradeAverage);
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-29T16:32:08.977

调用函数时将数组作为参数传递，例如

```
(generateNumbers(parameter),displayCounts(parameter)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-06T05:27:58.657

If you get this error with Dagger Android dependency injection, first just try and clean and rebuild project. If that doesn't work, maybe delete the project .gradle cache. Sometimes Dagger just fails to generate the needed factory classes on changes.

# sql - SQL/SSIS DataWareHouse 事实表加载，最佳实践？

> ID：13169613
> 
> 赞同：8
> 
> 时间：2012-11-01T01:04:18.467
> 
> 标签：sql, sql-server, ssis, lookup, data-warehouse

我正在 SQL 2008/SSIS 中构建我的第一个数据仓库，并且正在寻找一些关于加载事实表的最佳实践。

目前在我的 DW 中，我有大约 20 个属于 1 类 SCD 的维度（办公室、员工、产品、客户等）。在我的 dw 结构中，我已经应用了一些东西：

*   无 Nulls（在暂存期间替换为文本的空白或数字的 0）
*   每个维度中填充的未知关键成员（SK ID 0）
*   UPSERT 用于从舞台到生产台的 SCD 类型 1 装载
*   SELECT DISTINCT 加载我的维度

在我的事实加载 SSIS 项目中，我加载维度的当前方法是对每个 DIM 进行多次查找 (20+)，然后用数据填充 FACT 表。

对于我的查找，我设置：

*   全缓存
*   忽略“没有匹配条目”的失败
*   每个 SK 使用“ISNULL(surrogate_idkey) ? 0 : surrogate_idkey”派生转换，这样如果查找失败，它们将默认为 SK ID 0（未知成员）。
*   我的一些维度查找有多个业务键

这是最好的方法吗？附上的图片有助于我上面的描述。

![在此处输入图像描述](../Images/2a7ed4596904394b65b4d60196617fe2.png) ![在此处输入图像描述](../Images/0f0485bd19827250b556410b9ebf5363.png) ![在此处输入图像描述](../Images/349a739e6a312ea20e42b9df4c8b99c4.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T10:17:07.260

看起来不错。如果您开始遇到性能问题，有一些选项，但如果这是稳定的（在数据加载时间窗口内完成，源系统没有耗尽资源等），那么我认为没有理由改变。

一些需要关注的潜在问题...

1.  如果您的尺寸增加，拥有 20 多个全缓存查找转换可能会造成问题...由于 SSIS 系统上的内存限制...但由于它们是 1 类，我不会担心。
2.  全缓存查找“水合”预执行...拥有 20 多个可能会减慢您的速度

一个常见的替代方法（对上面的内容）是从源系统中提取事实表数据并将其放置在暂存区域中，然后通过单个 SQL 语句进行维度键查找。有些甚至专门为此目的在暂存区域中保留了一组维度键映射表。这减少了源系统上的锁定/阻塞......如果您每次加载都有大量数据，并且在您将数据吸出并通过那些 20 多个查找转换运行它时必须阻塞源系统。

当您拥有大量数据、大维度、复杂的键映射（通常由于多个源系统）和较短的数据加载时间窗口时，拥有良好的暂存区策略变得更加重要。

# http - 使用 angularjs $http 处理分块响应

> ID：13169617
> 
> 赞同：5
> 
> 时间：2012-11-01T01:04:31.700
> 
> 标签：http, angularjs, chunked

我发现最近的分块响应。我同意大多数时候我们希望做出全面的回应。但是，如果我想处理分块响应怎么办。

我将如何使用 $http 服务来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-05-08T15:17:29.393

您可以使用包装 XMLHttpRequest 的 angularjs 承诺 $q 定义一个函数。

```
var chunkedRequestWithPromise = function () {
  var deferred = $q.defer();
  var xhr = new XMLHttpRequest()
  xhr.open("GET", 'https://yoururl.com/chunked', true)
  xhr.onprogress = function () {
    deferred.notify(xhr.responseText);
  }
  xhr.onreadystatechange = function (oEvent) {
    if (xhr.readyState === 4) {
        if (xhr.status === 200) {
            deferred.resolve('success');
        } else {
            deferred.reject(xhr.statusText);
        }
    }
  };
  xhr.send();
  return deferred.promise;
}; 
```

并使用它：

```
chunkedRequestWithPromise().then(successFn,errorFn,notifyFn); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:53:33.800

我找到了一种对我来说看起来正确的方法 [http://www.igvita.com/2011/08/26/server-sent-event-notifications-with-html5/](http://www.igvita.com/2011/08/26/server-sent-event-notifications-with-html5/)

当然还有 websocket api，但它对我的使用来说很重

另一种可能性是编写另一个 http 服务来控制 http 响应

# c - 通过 C 中的方法动态分配和填充变量

> ID：13169620
> 
> 赞同：0
> 
> 时间：2012-11-01T01:04:41.953
> 
> 标签：c, pointers, dynamic-arrays

我在使用指针时遇到了很大的困难。在我看来，我想要完成的声音相当简单：我想定义一个多维 char 数组，而不是它的大小，然后让第二种方法分配必要的内存，并用请求的数据填充它.

现在，我已经尝试了无数个小时来完成这个，用谷歌搜索，直到我眼睛干涩，我仍然无法修复它。因此，我希望你们中的任何人都知道这将如何成为可能。

我想象的是定义一个指针`char** files`，以及一个`int total_files`将用于我的方法的计数器`print_files()`。打印文件然后会 calloc 和 malloc 变量，然后我们将用相关数据填充它。

现在在下面的代码中，我尝试了这个；但是，在运行时，我只会收到非常详细的消息：“分段错误（核心转储）”。在使用 GDB 进行调试时，它指向：

```
 13  *files[i] = malloc(sizeof(char) * 100); 
```

现在，这是针对 C 编程（适用于 Linux）的入门课程，您可能会在此处看到许多错误。不过，我愿意，谢谢你的时间。在没有方法/指针的情况下让代码工作没有任何问题，所以我确定我可能只是以某种方式混淆了语法。

```
#define _SVID_SOURCE
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<dirent.h>
#include <time.h>

int print_files(char*** files, int* total_files) {
int size = 10;  
**files = calloc(size, sizeof(char *));
for(int i = 0; i < size; i++) {
    *files[i] = malloc(sizeof(char) * 100);
}
*total_files = size;
}

int main() {
char** files;
int num_files;
num_files = 0;
printf("-- Start print_files\n");

print_files(&files, &num_files);

printf("-- end print_files, number of files: %d\n", num_files);

for(int i = 0; i < num_files; i++)
    printf("Out: %s\n", files[i]);

printf("total_files=%d\n", num_files);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T01:42:58.037

```
char **ppchar;
int x;
int y;

ppchar = (char**)malloc(sizeof(char*) * 100);
for (x = 0; x < 100; x++) {
    ppchar[x] = (char*)malloc(sizeof(char) * 100);
}

for(x = 0; x < 100; x++) {
    for(y = 0; y < 100; y++) {
        ppchar[x][y] = rand() % 255; // ascii range
    }
}

for(x = 0; x < 100; x++) {
    for(y = 0; y < 100; y++) {
        // char -128 to 127 or 0 to 255 - it's mostly machine
        // dependent.  This will tell you.
        printf("%d\t",ppchar[x][y]);
    }
}

//make sure to clean up the memory
for (x = 0; x < 100; x++) {
    free(ppchar[x]);
}

free(ppchar);

return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T01:46:37.010

```
**files = calloc(size, sizeof(char *)); 
```

这假设不仅`files`指向有效内存，而且该内存中的值也是指向将被更改的指针的有效指针。

问题是

```
char** files;
...
print_files(&files, &num_files); 
```

`&files`是一个有效的指针，但是`(**(&files))`（由 取消引用`print_files`）是一个非法的引用，因为`files`没有被初始化。

那`print_files`行可能应该是

```
*files = calloc(size, sizeof(char *)); 
```

.

也有问题

```
*files[i] = malloc(sizeof(char) * 100); 
```

这相当于

```
*(files[i]) = malloc(sizeof(char) * 100); 
```

我想你可能是说

```
(*files)[i] = malloc(sizeof(char) * 100); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T01:56:35.493

这是一个工作版本：

```
#include <stdio.h>
#include <stdlib.h>

static void print_files(char ***files, int *total_files)
{
    int size = 10;  
    *files = calloc(size, sizeof(char *));
    for (int i = 0; i < size; i++)
    {
        (*files)[i] = malloc(sizeof(char) * 100);
        sprintf((*files)[i], "Line %d\n", i);
    }
    *total_files = size;
}

int main(void)
{
    char **files;
    int num_files;
    num_files = 0;
    printf("-- Start print_files\n");

    print_files(&files, &num_files);

    printf("-- end print_files, number of files: %d\n", num_files);

    for(int i = 0; i < num_files; i++)
        printf("Out: %s\n", files[i]);

    printf("total_files=%d\n", num_files);

    return 0;
} 
```

输出是：

```
-- Start print_files
-- end print_files, number of files: 10
Out: Line 0
Out: Line 1
Out: Line 2
Out: Line 3
Out: Line 4
Out: Line 5
Out: Line 6
Out: Line 7
Out: Line 8
Out: Line 9
total_files=10 
```

`valgrind`说“像筛子一样泄漏”，但在分配内存时不会滥用内存。

发生了什么变化？

三重指针很可怕。但是，您只想在分配中使用一级间接`calloc()`。（对于 double `*`，GCC 警告说`files`in`main()`未初始化！）然后，在循环内部，括号`(*files)`也很关键。`sprintf()`只是用来初始化新分配的字符串。

我没有`main()`显着更改代码。

# arrays - GWT：创建关联的 jsarray

> ID：13169623
> 
> 赞同：3
> 
> 时间：2012-11-01T01:05:07.897
> 
> 标签：arrays, gwt

我想创建一个类型的js数组

```
Name(
{title : "Mr.",firstname : "Bill",lastname : "Gates"},
{title : "Mr.",firstname : "Bill",lastname : "Gates"},
{title : "Mr.",firstname : "Bill",lastname : "Gates"}
) 
```

所以基本上我想创建关联的数组。所有示例都类似于将 javascript 数组转换为 java，但在我的情况下，我想要相反的方式。我将从 java 填充这个数组。

`JSArray`并且`JsMixedArray`似乎正在这样做，但我可以弄清楚如何添加到它们中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T05:24:14.117

一种方法是使用[JSNI 方法](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI)来创建 Array/Map 的项/条目，如下所示：

```
 JsArray arr = JavaScriptObject.createArray().cast();
 arr.push(newEntry("Mr.", "Bill", "Gates"));      

 ....

 private final native JavaScriptObject newEntry(String title, 
                               String firstname, String lastname)/*-{
     return {title: title, firstname: firstname, lastname: lastname};
 }-*/; 
```

您还可以尝试使用 JSON 实用方法创建您想到的数据结构：将[JSONObjects](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/json/client/JSONObject.html)放入[JSONArray](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/json/client/JSONArray.html)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:26:05.800

变量`$wnd.v`将包含一个对象数组。注意：您需要找到一种将 Java 对象转换为 JSON 的方法（我使用[了 restygwt](http://restygwt.fusesource.org/documentation/restygwt-user-guide.html)）。

```
class PersonList {
    List<Person> list;
}

class Person {
    String title;
    String firstName;
    String lastName;

    public Person () {}

    public Person(String title, String firstName, String lastName) {
        this.title = title;
        this.firstName = firstName;
        this.lastName = lastName;
    }
}

public class Main implements EntryPoint {

    public interface PersonCodec extends JsonEncoderDecoder<PersonList> {
    }

    PersonCodec personCodec = GWT.create(PersonCodec.class);

    public void onModuleLoad() {
        List<Person> list = new ArrayList<Person>();

        list.add(new Person("Mr.", "Bill", "Gates"));
        list.add(new Person("Mr.", "Andrey", "Mormysh"));

        PersonList personList = new PersonList();
        personList.list = list;

        String json = personCodec.encode(personList).toString();

        setPersonList(json);
    }

    public static native void setPersonList(String personListJson)/*-{
        $wnd.v = eval("(" + personListJson + ")").list;
        alert($wnd.v[0].firstName); // Output: 'Bill'
    }-*/;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-11T10:35:39.060

您可以从 Java 创建空`JavaScriptObject`，但不能从那里填充它们，因此请使用力量的阴暗面：

```
private native JavaScriptObject putString(JavaScriptObject jso, String key, String value)/*-{
    jso[key] = value;
    return jso;
}-*/;

private native JavaScriptObject putObject(JavaScriptObject jso, String key, JavaScriptObject value)/*-{
    jso[key] = value;
    return jso;
}-*/;

void someJavaFunction() {
    JavaScriptObject fromJava = JavaScriptObject.createObject();
    fromJava = putString(fromJava, "foo", "bar");
    fromJava = putObject(fromJava, "baz", fromJava);
} 
```

# jquery - 用数组随机更改鼠标输入/输出上的文本？

> ID：13169629
> 
> 赞同：1
> 
> 时间：2012-11-01T01:05:49.550
> 
> 标签：jquery, arrays, random, mouseover, mouseout

我有一个非常简单但令人沮丧的问题。基本上我想要做的是当你鼠标输入和输出特定元素时，元素文本将通过数组随机变化。这是我的代码，从 HTML 开始：

```
<div class="logo">
    <a href="#">
        luke <span>whitehouse</span> 
    </a>
    <span class="logo-note">// front-end web designer</span>
</div> 
```

继承人的JS：

```
$(document).ready(function() {
    var quotes = new Array("foo", "bar", "baz", "chuck");
    var randno = Math.floor ( Math.random() * quotes.length );
    $('.quote').add(quotes[randno]);

    $('.logo a').mouseover(function() {
        $('.logo-note').text(quotes[randno]);
    }).mouseout(function() {
        $('.logo-note').text(quotes[randno]);
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T01:11:25.633

当鼠标悬停/移出事件发生时，您需要获取随机文本。在您的代码`randno`中计算一次并且永远不会更改，因此您每次都会获得相同的数组元素。试试这个想法

```
$('.logo a').mouseover(function() {
        $('.logo-note').text(quotes[Math.floor ( Math.random() * quotes.length )]);
    }).mouseout(function() {
        $('.logo-note').text(quotes[Math.floor ( Math.random() * quotes.length )]);
    }); 
```

# php - 安全地显示外来 HTML

> ID：13169630
> 
> 赞同：3
> 
> 时间：2012-11-01T01:06:12.787
> 
> 标签：php, html, html-parsing, htmlpurifier

我有一个应用程序需要安全地显示外部 HTML 数据（例如 HTML 编码的电子邮件文本，但不仅如此） - 即，删除 XSS 尝试和其他讨厌的东西。但仍然能够显示 HTML 应有的样子。到目前为止考虑的解决方案并不理想：

1.  使用 HTMLPurifier 之类的东西清理 HTML。工作正常，但是一旦电子邮件大小超过 100K，它就会变得非常慢 - 每封电子邮件数十秒。我怀疑任何足够安全的解析器在 PHP 中的速度都会一样慢——有些电子邮件的 HTML 非常糟糕，我见过一些为一页文本生成 150K HTML 的电子邮件。
2.  在 iframe 中显示 HTML - 这里的问题是 iframe 需要位于另一个来源才能免受 XSS AFAIK 的影响，这将需要同一应用程序的不同域。设置具有两个域的应用程序需要更多的工作，并且在某些设置中可能非常困难（例如仅提供一个域名的主机）。

还有其他解决方案可以达到这个结果吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:20:59.790

根据我的理解，我不相信。

问题在于，只有了解其结构，才能*安全地*删除 HTML 标签，而“了解其结构”正是解析的内容。即使您找到了一种不同的方法来分析 HTML 的结构并且不*将*其称为解析，那也是您正在做的事情，并且它必然会是某种形式的缓慢（或不安全）。

您可以做的是使用一些**初步过滤器**（例如`strip_tags`，这通常是一个很好的初步过滤器（如果肯定没有其他的话））以减少解析器的工作量，但这是否可行取决于您的标签白名单的大小- 一个小的白名单可能会产生更好的基准测试结果，因为一大块 HTML 会`strip_tags`在解析器到达之前被过滤掉。

此外，不同的解析器以不同的方式工作，您经常处理的那种 HTML 可能最适合一种解析器而不是另一种 - HTML Purifier 本身甚至[有不同的解析器可供](http://htmlpurifier.org/live/configdoc/plain.html#Core.LexerImpl)您使用，您可以在它们之间切换以查看结果是否为您提供更好的基准（尽管我怀疑差异可以忽略不计）。

不过，这种杂耍是否适用于您的用例可能需要您自己进行基准测试。

Word of caution: If you decide to pursue it, know I wouldn't go with the iframe approach. If you don't filter HTML, you also allow forms, and it becomes (IMO) trivial in combination with scripts and CSS to set up extremely convincing phishing, e.g. using tricks such as "*this e-mail is password protected, to proceed, please enter your password*".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T01:10:48.557

一种可能的解决方案（[也是 SO 使用的解决方案！](http://www.codinghorror.com/blog/2008/10/programming-is-hard-lets-go-shopping.html)）是只允许某些类型的标签。 `<p>`并且`<br />`很好，但`<script>`马上就出来了。

# android - 禁用 FragmentActivity 中的选项卡之间的滑动

> ID：13169635
> 
> 赞同：13
> 
> 时间：2012-11-01T01:06:32.503
> 
> 标签：android, android-fragments, actionbarsherlock

我有一个带有 2 个选项卡片段的 (Sherlock)FragmentActivity。左边的 Fragment 是一个显示相册图片的 GridView，右边的 Fragment 由一个 ViewPager 组成，用于查看单个图片。从左侧片段中，您可以滚动浏览图片并选择一张。切换（或滑动）到右侧片段将显示图片，因为它是 ViewPager，您可以滑动到上一张或下一张图片。

这很好用，只是 FragmentActivity 想要拦截右滑动并移回左侧选项卡。当我在右侧选项卡上时，我想防止 FragmentActivity 拦截滑动。如果我必须完全禁用标签之间的滑动，那将是令人满意的。我只希望滑动专用于当前选项卡，而不是用于在选项卡之间移动。

以下图像指示当前行为。右图显示了当我向右滑动时会发生什么。如您所见，左侧选项卡开始出现。我希望滑动只适用于右侧选项卡，以便我可以在图像之间滑动而不出现左侧选项卡。

![在此处输入图像描述](../Images/1a365714d7ac5cf264769c998424d09e.png)

我看到了在 ViewPager 中控制滑动的解决方案，但还没有找到控制选项卡式片段之间滑动的解决方案。

这是 GridView 片段和 ViewPager 片段的 xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:orientation="vertical">
  <FrameLayout android:id="@android:id/tabcontent"
               android:layout_width="fill_parent"
               android:layout_height="fill_parent">
    <GridView xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/gridview"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:columnWidth="100dip"
              android:gravity="center"
              android:horizontalSpacing="4dip"
              android:numColumns="auto_fit"
              android:stretchMode="columnWidth"
              android:verticalSpacing="4dip" />
  </FrameLayout>
</LinearLayout>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:orientation="vertical">

  <android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
                                     android:id="@+id/pager"
                                     android:layout_width="fill_parent"
                                     android:layout_height="0px"
                                     android:layout_weight="1"/>
</LinearLayout> 
```

这里是 ViewPager 片段的代码摘要：

```
public class FragmentFlash extends SherlockFragment {

   private GestureDetector gestureDetector;
   View.OnTouchListener gestureListener;
   private ViewPager pager = null;
   private int pagerPosition;

   @Override
      public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      pagerPosition = 0;
      // Gesture detection
      gestureDetector = new GestureDetector(new MyGestureDetector());
      gestureListener = new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
               return gestureDetector.onTouchEvent(event);
            }
         };
      }

   @Override
      public View onCreateView(LayoutInflater inflater, ViewGroup container,
                               Bundle savedInstanceState) {
      View v = inflater.inflate(R.layout.flash, container, false);
      pager = (ViewPager) v.findViewById(R.id.pager);
      pager.setOnTouchListener(gestureListener);
      return v;
   }

   class MyGestureDetector extends SimpleOnGestureListener {
      private static final int SWIPE_MIN_DISTANCE = 10;
      private static final int SWIPE_MAX_OFF_PATH = 250;
      private static final int SWIPE_THRESHOLD_VELOCITY = 50;

      @Override
         public boolean onDown(MotionEvent e) {
         return true;//false; make onFling work with fragments
      }

      @Override
         public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
         try {
            if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
               return false;
            else
               // right to left swipe
               if(distanceX > SWIPE_MIN_DISTANCE) {
                  if (pagerPosition < imageUrls.length-1)
                     pager.setCurrentItem(++pagerPosition);
               // left to right swipe
               } else if (distanceX < -SWIPE_MIN_DISTANCE) {
                  if (pagerPosition > 0)
                     pager.setCurrentItem(--pagerPosition);
               }
            return true;
         } catch (Exception e) {
            // nothing
         }
         return false;
      }
   }

   private class ImagePagerAdapter extends PagerAdapter {

      private String[] images;
      private LayoutInflater inflater;

      ImagePagerAdapter(String[] images) {
         this.images = images;
         inflater = mContext.getLayoutInflater();
      }

      @Override
         public void destroyItem(View container, int position, Object object) {
         ((ViewPager) container).removeView((View) object);
      }

      @Override
         public void finishUpdate(View container) {
      }

      @Override
         public int getCount() {
         return images.length;
      }

      @Override
         public Object instantiateItem(View view, int position) {
         final View imageLayout = inflater.inflate(R.layout.item_pager_image, null);
         final ImageView imageView = (ImageView)   imageLayout.findViewById(R.id.image);
         final ProgressBar spinner = (ProgressBar) imageLayout.findViewById(R.id.loading);

         byte[] image = ;//get byte array from file at images[position];
         if (null != image) {
            Bitmap bitmap = BitmapFactory.decodeByteArray(image, 0, image.length);
            imageView.setImageBitmap(bitmap);
         }
         ((ViewPager) view).addView(imageLayout, 0);

         return imageLayout;
      }

      @Override
         public boolean isViewFromObject(View view, Object object) {
         return view.equals(object);
      }

      @Override
         public void restoreState(Parcelable state, ClassLoader loader) {
      }

      @Override
         public Parcelable saveState() {
         return null;
      }

      @Override
         public void startUpdate(View container) {
      }
   }

   public void pagerPositionSet(int pagerPosition, String[] imageUrls) {
      Log.i(Flashum.LOG_TAG, "FragmentFlash pagerPositionSet: " + pagerPosition);
      if (pagerPosition >= 0)
         this.pagerPosition = pagerPosition;
      if (pager != null) {
         pager.setAdapter(new ImagePagerAdapter(imageUrls));
         pager.setCurrentItem(this.pagerPosition);
      }
   }

} 
```

这是 item_pager_image.xml：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="1dip" >

    <ImageView
        android:id="@+id/image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:adjustViewBounds="true"
        android:contentDescription="@string/descr_image" />

    <ProgressBar
        android:id="@+id/loading"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:visibility="gone" />

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-11T04:33:01.037

好的，我终于想通了。Laurence Dawson 走在了正确的轨道上，但不是将 CustomViewPager 应用于片段，而是将其应用于 FragmentActivity。你看，tab之间的切换，由activity管理，也是一个ViewPager适配器。因此，活动的 xml 是

```
<TabHost
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <TabWidget
            android:id="@android:id/tabs"
            android:orientation="horizontal"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0"/>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0"/>

        <com.Flashum.CustomViewPager
            android:id="@+id/pager"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"/>

    </LinearLayout>
</TabHost> 
```

并且自定义 ViewPager 与建议的一样，只是构造函数使其能够导致 onInterceptTouchEvent 返回 false。这可以防止 FragmentActivity 对滑动起作用，以便它可以专用于片段！

```
public class CustomViewPager extends ViewPager {

    private boolean enabled;

    public CustomViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.enabled = **false**;
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (this.enabled) {
            return super.onTouchEvent(event);
        }

        return false;
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent event) {
        if (this.enabled) {
            return super.onInterceptTouchEvent(event);
        }

        return false;
    }

    public void setPagingEnabled(boolean enabled) {
        this.enabled = enabled;
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-01T15:12:26.297

您需要为您的 ViewPager 覆盖 onInterceptTouchEvent 方法，您可以通过扩展 ViewPager 来完成此操作，或访问此链接以获取有关添加此内容的精彩教程：

[http://blog.svpino.com/2011/08/disabling-pagingswiping-on-android.html](http://blog.svpino.com/2011/08/disabling-pagingswiping-on-android.html)

# map - 在hadoop中同步多个map reduce作业

> ID：13169636
> 
> 赞同：0
> 
> 时间：2012-11-01T01:06:41.300
> 
> 标签：map, hadoop, reduce, synchronize

我有一个可以同时运行多个作业的用例。所有作业的输出都必须与 HDFS（包含键值对）中没有重复的通用主文件合并。我不确定如何避免在这种情况下可能出现的竞争条件。例如，作业 1 和作业 2 同时将相同的值写入主文件，从而导致重复。感谢您对此的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T02:54:16.530

Apache Hadoop 不支持并行写入同一文件。这是[参考](http://hadoop.apache.org/docs/r0.20.0/hdfs_design.html)。

> HDFS 中的文件是一次性写入的，并且在任何时候都严格只有一个写入器。

因此，多个地图/作业不能同时写入同一个文件。必须编写另一个作业/shell 或任何其他程序来合并多个作业的输出。

# ios - 如何在不使用 UIScrollView 的情况下制作可滚动的 UIView？

> ID：13169638
> 
> 赞同：1
> 
> 时间：2012-11-01T01:07:13.840
> 
> 标签：ios, uiview, uiscrollview, scrollable

有没有办法在不使用 UIScrollView 的情况下使普通的 UIView 可滚动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T01:26:45.383

您可以通过覆盖`-touchesBegan:withEvent:`和关联方法，但是您必须实现等效于`contentOffset`,的方法，并且可能在您自己的滚动视图中`contentSize`进行某种移动。`contentView`您还必须实现所有的动量物理，这可能会非常耗时。然后你就得到了手势和滚动之间的所有交互（例如，如果你按住手指然后开始滚动，一些触摸事件被“取消”，这一切都由内置的 UIKit 类自动为你处理）。

这当然是可能的，但这将是大量的工作，所以除非你有一个非常非常好的理由来建立自己的，否则没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T01:39:27.500

说明您要实现的目标可能会有所帮助，因为您可能可以使用[UIScrollView](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiscrollview_class/Reference/UIScrollView.html)来实现它并实现[UIScrollViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html#//apple_ref/occ/intf/UIScrollViewDelegate)。只需实现委托并将我的附加代码放在那里，我就很容易用滚动视图完成了一些非常奇特的事情。

# google-api - Google 云端硬盘文件下载网址

> ID：13169642
> 
> 赞同：3
> 
> 时间：2012-11-01T01:07:35.157
> 
> 标签：google-api, google-drive-api

是通过提供的 download_url 通过 Google Drive 下载文件的唯一方法吗？我有 file_id，想打一个简单的电话来下载文件。现在看起来您必须调用一次来获取文件元数据并检索 download_url，然后再调用一次才能实际下载文件。这是唯一的方法吗？

此外，download_url 被描述为“短暂的 url”。这个网址可以使用多长时间？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T02:40:36.383

使用 download_url 是从云端硬盘下载文件的正确方法。我强烈建议不要尝试自己构建下载 url，因为生成的代码可能会中断。

download_url 通常可以使用几个小时，但您应该始终在从云端硬盘下载文件之前检索更新的文件，而不是依赖它。其他问题的更多信息：[Google Drive SDK“短期”下载 URL 存在多长时间？](https://stackoverflow.com/questions/11730648/how-long-does-the-google-drive-sdk-short-lived-download-url-exist-for)

# javascript - 如何在 Angular js 中编写一个简单的 ng-show 指令

> ID：13169644
> 
> 赞同：3
> 
> 时间：2012-11-01T01:07:47.700
> 
> 标签：javascript, angularjs

我在角度指令的简单基础知识方面遇到了麻烦，我希望有一个最基本的例子来说明如何编写新的 ng-show 指令。IE。我想编写指令 ng-show2 与 ng-show 一样工作。

我很困惑，因为在 angular.js 文件中，指令是这样定义的：

```
var ngShowDirective = ngDirective(function(scope, element, attr){
  scope.$watch(attr.ngShow, function(value){
    element.css('display', toBoolean(value) ? '' : 'none');
  });
}); 
```

但是我看到的大多数指令示例都是这样写的：

```
var myApp = angular.module('myApp', []);
myApp.directive('ngShow2', function() {
    return {
        replace: true,
        restrict: 'A',
        link: function(){....}
}); 
```

​ 究竟什么对应什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T03:43:29.907

我不是 AngularJS 内部的专家，但您所看到的 [1] 是 angular 用于在内部创建指令的一种方法。如果您查看`ngDirective`' 的签名，您会发现它与`link`大多数示例中使用的函数相同。

在构建过程中，函数`ngShowDirective`被添加到`ng`模块中。[2]，并且 AFIK 没有暴露。

由于您想要的是如何实现`ng-show`指令的基本示例，您需要做的就是为您的应用程序创建一个模块，并将指令添加到该模块，这是一个简单的示例

```
App.directive('ngShow2', function() {
    return {
        replace: true,
        restrict: 'A',
        link: function(scope, element, attr){
            scope.$watch(attr.ngShow2, function(value){
               element.css('display', value ? '' : 'none');
            });
        }
    };
}); 
```

jsfiddle：http: [//jsfiddle.net/jaimem/L7QEE/](http://jsfiddle.net/jaimem/L7QEE/)

* * *

[1] [https://github.com/angular/angular.js/blob/master/src/ng/directive/ngShowHide.js#L36-40](https://github.com/angular/angular.js/blob/master/src/ng/directive/ngShowHide.js#L36-40)

[2] [https://github.com/angular/angular.js/blob/master/src/AngularPublic.js#L89](https://github.com/angular/angular.js/blob/master/src/AngularPublic.js#L89)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T03:43:46.307

此代码也有效

```
<!doctype html>
<html ng-app="myApp" ng-controller="AppCtrl">
<script src="js/angular.min.js"></script>
<body>
<h1 ng-show2="show" ng-bind="name"></h1>
</body>
</html>​

<script>
  var app = angular.module('myApp', []);

  app.controller('AppCtrl', function AppCtrl($scope){
    $scope.name = 'Guest';
    $scope.show = true;
  });

  app.directive('ngShow2', function(){
    return function($scope, $element, $attributes){
      var expr = $attributes.ngShow2;
      $element.css('display', $scope[expr] ? '' : 'none');
    };
  });
</script> 
```

# c++ - c++ Visual Studio 错误，我很困惑

> ID：13169648
> 
> 赞同：0
> 
> 时间：2012-11-01T01:08:08.200
> 
> 标签：c++, visual-studio-2010

我不断收到错误消息：发现意外的文件结尾，我完全迷路了。我检查了咖喱大括号和括号，我在课程的末尾放了一个分号，我无法弄清楚它有什么问题。多谢。

```
#include<iostream>
#include<fstream>
#include<string>
using namespace std;

class operations{
    void checkout(){
        cout << "Check out here!!";
    }
}
void main(){
    string item;
    int choice;

    cout << "What do you want to do? " << endl;
    cout << "Press 1 for checking out " << endl;
    cout << "Press 2 for stocking " << endl;
    cout << "Press 3 looking at recipts " << endl;
    cin >> choice;
    cout << choice;

    if(choice == 1){
        void checkout();
    }
    /*ofstream myfile;
    myfile.open("inventory.txt");

    if(myfile.is_open()){
        cout << "Enter a grocery item" << endl;
        getline(cin,item);
        myfile << item;
    }
    cout << "Your grocery item is " << item;
    myfile.close();
    system("pause");*/
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T01:10:32.410

1.  您的类定义需要一个尾随分号，而不是您的主要功能。

    ```
    class operations{
        void checkout(){
            cout << "Check out here!!";
        }
    }; 
    ```

2.  “空主”是错误的。 `main`总是返回`int`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T01:58:33.163

这是您的代码，在我解释您想要执行的操作时进行了更正。

```
#include<iostream>
#include<fstream>
#include<string>

using namespace std;

class operations
{
    public:void checkout()
    {
        cout << "Check out here!!";
    }
};

int main()
{
    string item;
    int choice;
    operations op;

    cout << "What do you want to do? " << endl;
    cout << "Press 1 for checking out " << endl;
    cout << "Press 2 for stocking " << endl;
    cout << "Press 3 looking at recipts " << endl;
    cin >> choice;
    cout << choice;

    if(choice == 1)
    {
        op.checkout();
    }

    return 0;
} 
```

首先，注意类声明后需要分号，方法声明后不需要

其次，请注意，`void checkout()`在您的代码中不会调用您在类中定义的方法，而是会声明一个新方法，该方法将不执行任何操作。要调用正确的`void checkout()`，你必须实例化一个类型的对象，`operations`然后调用它的方法`op.checkout()`

最后，如果执行流程正确到达程序末尾，请务必声明`int main()`并放置。`return 0`

作为旁注，我可能不会在您的程序中使用类，而只是在实现之前`main()`实现与用户选择相对应的方法

```
void checkout()
{
    cout << "Check out here!!";
} 
```

这样您就可以简单地调用它们

```
checkout() 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-01T01:12:40.077

我认为您应该将其添加到文件的顶部（将其作为第一行）：

```
#include "stdafx.h" 
```

# mongodb - 如何从 mongodb 中删除命名错误的集合

> ID：13169654
> 
> 赞同：1
> 
> 时间：2012-11-01T01:08:53.643
> 
> 标签：mongodb

我不小心创建了几个名称类似于下面的集合，到目前为止，我还无法删除它们。我猜 MongoDB shell 不喜欢 the `/`or the `:`or the extraneous `.`，我不太确定。

```
timed/static/14:32:27.725246.xml.chunks 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T01:16:34.240

在 mongo shell 中，而不是做

```
db.strange_table/name.find() 
```

你也可以做

```
db['strange_table/name'].find() 
```

要删除一个表，您可以从中删除所有条目：

```
db['strange_table/name'].remove() 
```

而且，如果您愿意，在删除所有内容后，您还可以运行

```
db['strange_table/name'].drop() 
```

# php - 从一个大的创建不同的范围数组

> ID：13169655
> 
> 赞同：1
> 
> 时间：2012-11-01T01:09:23.387
> 
> 标签：php, arrays, array-filter

我有一个数组，其中包含按字母表的第一个字母细分的其他美国大学数组。我已经设置了一个测试页，以便您可以使用 print_r 查看数组。该页面是：

[http://apps.richardmethod.com/Prehealth/Newpublic/test.php](http://apps.richardmethod.com/Prehealth/Newpublic/test.php)

为了创建该数组，我使用了以下代码：

```
 $alphabetized = array();

    foreach (range('A', 'Z') as $letter) {

            // create new array based on letter
            $alphabetized[$letter] = array();

            // loop through results and add to array
            foreach ( $users as $user ) {
                    $firstletter = substr($user->Schoolname, 0, 1);

                    if ( $letter == $firstletter ) {
                        array_unshift( $alphabetized[$letter], $user );
                    }
            }
    } 
```

现在，我想拆分数组，以便每个数组中有一定范围的字母。例如，

arrayABCEFGH - 将包含以字母 A、B、C、D、E、F、G 和 H 开头的学校。

我的问题是，我应该修改上面的代码，以便在我做一个大数组之前实现这一点，还是应该在之后做？

这是一个大问题。. 如果是这样，如何？:-)

提前感谢您的帮助。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T01:20:30.117

您可以编写一个简单的函数，该函数接受一个数组和一个从该数组中提取的键数组，并返回一个仅包含这些键及其值的数组。一种`array_slice`非数字键：

```
function values_at($array, $keys) {
    return array_intersect_key($array, array_flip($keys));
} 
```

然后您可以像这样调用它以从按字母顺序排列的列表中获取您想要的内容：

```
$arrayABCDEFGH = values_at($alphabetized, range('A','H')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T01:22:46.777

如果您不需要数组的完整副本，那么您应该将上述代码封装在一个以数组作为参数（$letterRange）的函数中，该函数将保存特定的数组标识符（字母）在最后大批。

然后，您需要使用 if 块将代码封装在 foreach 中：

`if (in_array($letter, $letterRange)) { ... }`

这将导致一个数组只包含 $letterRange 中指定字母的字母数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T01:35:01.097

首先，生成数组的代码可以通过迭代变得更容易`$users`：

```
$alphabetized = array();

// loop through results and add to array
foreach ($users as $user) {
    $firstletter = strtoupper($user->Schoolname[0]);

    $alphabetized[$firstletter][] = $user;
}
// sort by first letter (optional)
ksort($alphabetized); 
```

要检索前 8 个条目，您可以使用`array_slice`：

```
array_slice($alphabetized, 0, 8); 
```

假设实际使用了所有第一个字母，并且您使用`ksort()`了完整的数组，该数组也为您提供了 A - H。否则，您必须使用`array_intersect_key()`您希望查询的字母的翻转范围。

```
array_intersect_key($alphabetized, array_flip(range('A', 'H'))); 
```

# asp.net-mvc - 提交 twitter 引导程序选项卡，带有 asp.net mvc 3 部分视图

> ID：13169662
> 
> 赞同：0
> 
> 时间：2012-11-01T01:10:50.850
> 
> 标签：asp.net-mvc, twitter-bootstrap

我有一个 twitter 引导程序选项卡，有 3 个简单选项卡（Caracteristiques、Certificat 和 Contrats）

选项卡是带有 asp.net mvc 部分视图的 ajax 加载，它们与模型视图相关联：

部分视图与 ViewModel 类型紧密相关：

```
 // Load Certificat
    public ActionResult Certificat()
    {
        var modelStaffs = _twitterTabsModel.GetStaffs();

        return PartialView("_Certificat", modelStaffs);
    }

    // load Contrats
    public ActionResult Contrats()
    {
        var modelJoueur = _twitterTabsModel.GetFirstJoueur();

        return PartialView("_Contrats", modelJoueur );
    } 
```

型号：

```
public class TwitterTabModel
{
    public ModelJoueur JoueurVM { get; set; }
    public IEnumerable<ModelStaff> StaffVM { get; set; }
}

public class ModelStaff
{
    public string NomStaff { get; set; }
    public string FonctionStaff { get; set; }
}

public class ModelJoueur
{
    public string NomJoueur { get; set; }
    public string PrenomJoueur { get; set; }
} 
```

特征选项卡视图：

```
@model Controls.Models.ViewModel.TwitterTabModel

<h2>Caracteristiques</h2>

@using (Html.BeginForm())
{
.... the tabs code ...
    <p>
        <input type="submit" value="Save" />
    </p>

} 
```

选项卡加载罚款，我想做的是在第一个剃须刀视图选项卡上包含一个提交按钮，如果加载，它会提交所有其他模型，但是，当我收到 post call 时，所有其他模型，JoueurVM 和 StaffVM 是即使它们已加载，也是空的。为什么是根据你的？

编辑：这是控制器发布代码，没什么特别的，只是想获取 twitterTabModel：

```
 [HttpPost]
    public ActionResult Tabs(TwitterTabModel model)
    {
        return View();
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:46:23.260

我想出了一个解决方法，我将输入值作为 formcollection 传回，而不是整个模型，它不干净，但是很好，因为我可以获取所有发布的值

# django - 我应该在 Django 中使用哪个权限系统？

> ID：13169666
> 
> 赞同：2
> 
> 时间：2012-11-01T01:11:14.323
> 
> 标签：django, django-models, relational-database, user-permissions

我在一个 Django 项目中工作，该项目旨在管理仓库、物品和 presonell。我有以下模型：WarehouseMode、ItemModel 和 PersonellModel。

管理员必须能够创建用户并为其分配以下角色之一：

1.  管理员 - 完全访问权限。
2.  仓库管理员 - 受限访问（添加、删除、修改项目和 presonell）
3.  个人仓库用户 - 受限访问（修改个人资料）
4.  其他数据库订阅者 -（只读）

“仓库管理员”应该是一个仓库的“所有者”。

我应该使用哪个权限系统？每行权限系统？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T02:45:02.177

行级权限最终肯定会让你的生活更轻松，但从经验来看，你绝对应该写出与其他任何东西分开的流程并进行大量测试。下面是我最近使用的具有行级权限的结构。

在尝试了一些之后，我的偏好是 django-guardian，我发现使用基于类的视图和 mixin 效果更好（从易于实现我设计的结构）。

[https://github.com/lukaszb/django-guardian.git](https://github.com/lukaszb/django-guardian.git)

```
class Meta:
    permissions = (
    ('can_view', 'View project'),
    ('manage_view', 'Can assign View project'),
    ('can_edit', 'Edit project'),
    ('manage_edit', 'Can assign Edit project'),
    ('can_delete', 'Delete project'),
    ('manage_delete', 'Can assign Delete project'),
    ('creator', 'Full access to model features.'),
    ) 
```

# iphone - 只允许触摸一个 UIView

> ID：13169669
> 
> 赞同：1
> 
> 时间：2012-11-01T01:11:33.073
> 
> 标签：iphone, ios, ipad, events, uiview

我有三个`UIViews`：

![意见](../Images/f3dbafeb7c1d36cec0e1616fb49652e5.png)

`B1`并且`B2`是 的子视图`A`。

`B1`并且`B2`可能有一个或多个子视图。

我希望只能**同时触摸一个视图。**

例如：

用户`B1`用第一根手指触摸（或其一个子视图），然后在不松开它的情况下，`B2`用第二根手指触摸（或其一个子视图）。现在，`B1`应该接收其范围内的所有事件，但不是`B2`. 反过来也是一样。

这是否可以在**不继承任何这些视图的情况**下完成？

如果没有，最简单/最干净的方法是什么？

**编辑：**

关于`exclusiveTouch`和`multipleTouchEnabled`：

这些属性对我的问题无效。

`multipleTouchEnabled`：仅确定是否**在同一视图**中传递多点触摸事件。因此，禁用视图 A 上的多点触控（无论如何都是默认设置）不会阻止视图 B1 和 B2 同时接收触摸事件。

`exclusiveTouch`: 也不行。据我了解，`exclusiveTouch`仅适用**于 view 的框架内**。因此`exclusiveTouch`在视图 B1 和 B2 上设置无效。请参阅这两个 stackoverflows 以供参考：

[为什么 UIView ExclusiveTouch 属性不阻塞？](https://stackoverflow.com/questions/3946147/why-is-uiview-exclusivetouch-property-not-blocking)

[为什么 UIView.exclusiveTouch 不起作用？](https://stackoverflow.com/questions/843338/why-doesnt-uiview-exclusivetouch-work)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T01:16:51.207

尝试为 B1 和 B2 同时设置和`exclusiveTouch`。`multipleTouchEnabled``YES`

**编辑**：我从“B1 应该接收其范围内的所有事件”的措辞中假设您希望直接在 B1 和 B2 中接收触摸，而不是它们的子视图。如果您想将触摸限制在 B1/B2 边界但在子视图中处理它们，我认为您需要将 B1 和 B2 或 A 子类化。

**编辑 2**：如果 B1 和 B2 的子视图是交互式的，则需要将这些属性设置为`YES`所有交互式子视图（递归）。但这也使得所有子视图相互排斥，而不仅仅是 B1 和 B2 之间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T01:33:48.167

当触摸 B1 或 B2 时，为该视图设置`exclusiveTouch`为，然后在触摸结束时再次`YES`将其设置回。`NO`这意味着只有独占视图才会收到触摸。

如果您想在独占视图的范围之外进行触摸，您可以在将其设为独占 ( `myExclusiveView`) 时将对该视图的引用存储在某处，然后覆盖`hitTest:withEvent:`视图 A（或任何超级视图）并让它返回`[myExclusiveView hitTest:withEvent:]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T00:24:55.283

我相信**如果没有子类化这是不可能的**。如果有人能证明我错了，我很乐意看到他们的解决方案。无论如何，这就是我解决它的方法：

首先，我子类视图`A`，我调用子类`ParentView`。ParentView 需要指向`B1`和的指针`B2`。我还添加了一个额外的指针，稍后用于存储当前选定的视图。然后，我覆盖`hitTest`：

```
@interface ParentView : UIView
    @property (nonatomic, strong) UIView* viewB1;
    @property (nonatomic, strong) UIView* viewB2;
    @property (nonatomic, strong) UIView* currentlyTouchedView;
@end

@implementation ParentView

- (UIView*)hitTest:(CGPoint)point withEvent:(UIEvent *)event {

    if (self.currentlyTouchedView == nil) {
        if (CGRectContainsPoint(self.viewB1.frame, point)) {
            self.currentlyTouchedView = viewB1;
        }else if(CGRectContainsPoint(self.viewB2.frame, point)) {
            self.currentlyTouchedView = viewB2;
        }
    }else {
        if (!CGRectContainsPoint(self.currentlyTouchedView.frame, point)) {
            return nil;
        }
    }

    return [super hitTest:point withEvent:event];
}

@end 
```

所以，这段代码所做的是，它存储了第一次触摸的视图。如果已经存储了一个，它会返回 nil on `hitTest`，这会消耗掉任何额外的触摸事件。

现在，在哪里`currentlyTouchedView`设置回零？为此，我继承`UIWindow`并覆盖`sendEvent`以检查所有触摸是否已结束：

```
@implementation EventOverrideWindow

- (void)sendEvent:(UIEvent *)event {
    [super sendEvent:event];
    BOOL allTouchesEnded = YES;
    for (UITouch* touch in event.allTouches) {
        if (touch.phase != UITouchPhaseCancelled && touch.phase != UITouchPhaseEnded) {
            allTouchesEnded = NO;
            break;
        }
    }

    if (allTouchesEnded) {
        ParentView* parentView = ((AppDelegate*)[UIApplication sharedApplication].delegate).parentView;

        parentView.currentlyTouchedView = nil;
    }
}

@end 
```

我知道这不是一个非常优雅的解决方案，如果有人有更好的主意，我将不胜感激。

# java - 调用 GOval 方法

> ID：13169670
> 
> 赞同：0
> 
> 时间：2012-11-01T01:11:36.077
> 
> 标签：java, awt, acm.graphics

我不知道我是否正确调用了 GOval 方法。我的目标是创建目标公司徽标，但带有 5 个圆圈。我应该让目标符号在窗口中居中，并且圆的数量和尺寸由命名常量控制。

我从 GOval bigCircle 开始，那是我最外层的红色填充圆圈。我是否正确合并了 createFilledCircle 方法？

到目前为止，我只有三个圆圈，因为我们正在建立之前的作业，而那个作业只有三个圆圈。另外，N_CIRCLE 是如何融入图片的？

```
import acm.program.*;
import acm.graphics.*;
import java.awt.*;

public class TargetSymbol extends GraphicsProgram {

public void run(){

    double x = getWidth() / 2;
    double y = getHeight() / 2;

    GOval bigCircle = createFilledCircle(x - OUTER_RADIUS, y - OUTER_RADIUS, 2 * OUTER_RADIUS, 2 * OUTER_RADIUS);
    createFilledCircle.setFilled(true);
    createFilledCircle.setColor(Color.RED);
    add(createFilledCircle);        

    GOval middleCircle = new GOval(100, 100, 200, 200);
    middleCircle.setFilled(true);
    middleCircle.setColor(Color.WHITE);
            add(middleCircle);      

    GOval innerCircle = new GOval(155, 150, 100, 100);
    innerCircle.setFilled(true);
    innerCircle.setColor(Color.RED);
    add(innerCircle);

}
private GOval createFilledCircle(double x, double y, double r, Color color){
    GOval circle = new GOval( x-r, x-y, 2 * r, 2 * r);
    circle.setColor(color);
    circle.setFilled(true);
    return circle;

}

private static final int N_CIRCLE = 5; 
private static final double OUTER_RADUS = 75;
private static final double INNER_RADIUS = 10; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T01:29:48.183

我会说你有正确的想法。

```
GOval bigCircle = createFilledCircle(x - OUTER_RADIUS, y - OUTER_RADIUS, 2 * OUTER_RADIUS, 2 * OUTER_RADIUS);
createFilledCircle.setFilled(true);
createFilledCircle.setColor(Color.RED); 
```

没有名为 createFilledCircle 的变量，因此您无法将其设置为填充，或设置其颜色。我们可以将其更改为 bigCircle，但这将是多余的，因为您已经在 createFilledCircle() 方法中设置了这些值。

我只是建议你完全摆脱这两个部分，留下你：

```
GOval bigCircle = createFilledCircle(x - OUTER_RADIUS, y - OUTER_RADIUS, 2 * OUTER_RADIUS, 2 * OUTER_RADIUS); 
```

N_CIRCLE，我只能假设代表有圈数。例如，如果 N_CIRCLE 是 5，则有红色的外圈，里面的白圈，白圈里面的红色圈，等等。

因此，您想使用一个循环来创建相对于您拥有的圆圈数量 (N_CIRCLE) 的圆圈。

例如

```
for(int a = 0; a < N_CIRCLE; a++)
{
    Create a circle that is smaller than the outer one
    Set it's color/fill etc.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-01T19:55:33.453

我做了同样的任务，并使用此代码成功完成了它。我为它的草率和糟糕的形式道歉；我是在第一次学习如何用 Java 编写时写的。

```
/*
 * File: Target.java
 * Name: 
 * Section Leader: 
 * -----------------
 * This file is the starter file for the Target problem.
 */

import acm.graphics.*;
import acm.program.*;
import java.awt.*;

public class Target extends GraphicsProgram {   
public void run() {
    /* You fill this in. */

    double moveX = getWidth()/2 - 36;
    double moveY = getHeight()/2 - 36;

    GOval outerRed = new GOval(72, 72);
    outerRed.setFilled(true);
    outerRed.setColor(Color.RED);
    outerRed.setFillColor(Color.RED);
    outerRed.move(moveX, moveY);

    GOval middleWhite = new GOval(12.6, 12.6, 46.8, 46.8);
    middleWhite.setFilled(true);
    middleWhite.setColor(Color.WHITE);
    middleWhite.setFillColor(Color.WHITE);
    middleWhite.move(moveX, moveY);

    GOval innerRed = new GOval(25.2, 25.2, 21.6, 21.6);
    innerRed.setFilled(true);
    innerRed.setColor(Color.RED);
    innerRed.setFillColor(Color.RED);
    innerRed.move(moveX, moveY);

    add(outerRed);
    add(middleWhite);
    add(innerRed);
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-30T11:41:14.063

这是我使用常量的解决方案：

```
/*
 * File: Target.java
* Name: 
* Section Leader: 
* -----------------
* This file is the starter file for the Target problem.
*/

import acm.graphics.*;
import acm.program.*;
import java.awt.*;

public class Target extends GraphicsProgram {   
    private static final int RADIUS_OUTER_CIRCLE = 72;
    private static final int RADIUS_MID_CIRCLE = 54;
    private static final int RADIUS_INNER_CIRCLE = 32;

    public void run() {

        GOval outerCircle = new GOval(getWidth()/2 - RADIUS_OUTER_CIRCLE/2 , getHeight()/2 - RADIUS_OUTER_CIRCLE/2, RADIUS_OUTER_CIRCLE, RADIUS_OUTER_CIRCLE);
        outerCircle.setFilled(true);
        outerCircle.setFillColor(Color.RED);
        add(outerCircle);

        GOval midCircle = new GOval(getWidth()/2 - RADIUS_MID_CIRCLE/2 , getHeight()/2 - RADIUS_MID_CIRCLE/2, RADIUS_MID_CIRCLE, RADIUS_MID_CIRCLE);
        midCircle.setFilled(true);
        midCircle.setFillColor(Color.WHITE);
        add(midCircle);

        GOval innerCircle = new GOval(getWidth()/2 - RADIUS_INNER_CIRCLE/2 , getHeight()/2 - RADIUS_INNER_CIRCLE/2, RADIUS_INNER_CIRCLE, RADIUS_INNER_CIRCLE);
        innerCircle.setFilled(true);
        innerCircle.setFillColor(Color.RED);
        add(innerCircle);

    }
} 
```

# facebook-graph-api - 我们的 Facebook 应用程序允许您“邀请您的朋友”。您如何跟踪每个人邀请了多少朋友？

> ID：13169679
> 
> 赞同：-1
> 
> 时间：2012-11-01T01:13:00.257
> 
> 标签：facebook-graph-api, analytics

我们在 Facebook 应用程序中鼓励的一项操作是邀请您的朋友试用。有没有办法查看每个用户邀请了多少朋友？例如，如果我们举办了一场比赛，为邀请 10 个或更多朋友的任何人免费赠送赃物，我们如何跟踪符合该标准的用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T01:25:52.867

这样的竞赛将明确违反 Facebook 的政策，并强制或激励用户集体发送请求会导致更高的垃圾邮件报告，这可能会导致您的应用失去发送请求的能力，但是：

*   您可以使用包含请求 ID 和收件人列表的[请求对话框的回调来跟踪请求发送给谁](https://developers.facebook.com/docs/reference/dialogs/requests/)

和/或

*   您可以使用`data`请求的属性来存储跟踪信息，并在处理接受的请求时提取该信息

# android - Error opening trace file: No such file or directory (2) 这个错误是什么意思

> ID：13169683
> 
> 赞同：3
> 
> 时间：2012-11-01T01:13:28.290
> 
> 标签：android, eclipse, cordova

我正在使用 PhoneGap 开发一个应用程序。这是唯一的错误，否则应用程序似乎运行良好。错误出现在启动时。老实说，我不知道这个错误意味着什么或指向什么，只是想澄清一下它可能是什么。我可以在这篇文章中添加代码，但我什至不知道从哪里开始，所以我不知道该发布什么。谢谢

# java - 从 Haxe 调用 Java 函数

> ID：13169684
> 
> 赞同：2
> 
> 时间：2012-11-01T01:13:36.437
> 
> 标签：java, haxe

我正在尝试从 Haxe 调用外部 Java 函数。如何调用从 Haxe 编写的 Java 函数？

Java代码：

```
public class ExternalClass{

    public static String myFunction(){ //this will be invoked from Haxe
        return "External Java function";
    }

} 
```

Haxe主类：

```
class Main 
{
    public static function main() 
    {
        trace(myFunction()); //how can I properly access this Java method?
    }
} 
```

Haxe 外部课程：

```
extern class Test
{
    public static function myFunction():String;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T12:52:06.520

```
class Main 
{
    public static function main() 
    {
        trace(ExternalClass.myFunction()); //how can I properly access this Java method?
    }
}

extern class ExternalClass
{
    public static function myFunction():String;
} 
```

您的外部类应该与您的本机 java 类具有相同的名称。

然后你必须把你的函数作为一个经典的静态函数调用，在函数名前加上类名。

# ios - 允许免费试用的 App Store 订阅？

> ID：13169687
> 
> 赞同：6
> 
> 时间：2012-11-01T01:14:05.327
> 
> 标签：ios, app-store, in-app-purchase, subscription

我的应用程序让用户输入非常特定类型的数据，并提供在线同步。要使用该应用程序，您必须支付订阅费用（应用内购买自动续订订阅）。

但是，我想包括免费试用。我无法使用应用内购买产品的免费试用选项，因为这仅适用于报亭应用（根据 WWDC 2012 会话视频，会话 308“使用 IAP 管理订阅”）

这是我实现类似功能的解决方法的想法：

1.  用户在我的应用上创建了一个帐户
2.  此帐户会获得短期免费订阅，用于测试应用程序。订阅在服务器端进行管理。在试用期间，对应用程序没有任何限制
3.  试用结束后，用户将无法插入新数据，也无法与服务器同步。系统将提示他订阅以继续使用该应用程序

我怀疑这对于 App Store 是否可以接受。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T01:31:01.167

从技术上讲这是可行的，但会出现两个问题：一：如果您不在应用购买中使用，那么用户无法从应用购买您的服务（在开发协议中）二：如果您确实在应用购买中使用，那么您相信 IOS 设备会说“嘿，我刚买了一年的服务，所以请联系我”，可以破解这个[http://zd.net/LkY9Ra](http://zd.net/LkY9Ra)并使您的服务器为非法用户提供服务。这会发生吗？不太可能，但可以。Kinda 把苹果逼到了一个明显有缺陷的模型上

# c - 文件描述符，open() 返回零

> ID：13169693
> 
> 赞同：6
> 
> 时间：2012-11-01T01:15:22.673
> 
> 标签：c

我打开一个文件并想在其中写一些东西。问题是 fd2 出于某种原因是 0。它没有写入文件，而是写入终端。我没有在我的代码中的任何地方关闭（0）。为什么我得到 fd = 0 而不是例如 3。在终端上写的原因是 fd 的值为零？我知道 fd = 0 用于标准输入，

有任何想法吗？谢谢你。

```
if ((fd2 = open(logFile, O_RDWR |O_APPEND | O_CREAT , 0666) == -1))
    DieWithError("open() failed");

printf("FD2 = %d",fd2);     //returns me zero

bzero(tempStr, sizeof(tempStr));
bzero(hostname, sizeof(hostname));

gethostname(hostname, sizeof(hostname));

sprintf(tempStr, "\n%sStarting FTP Server on host %s in port %d\n", ctime(&currentime), hostname, port);

if (write(fd2, tempStr, strlen(tempStr)) == -1)
    DieWithError("write(): failed"); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T01:23:24.087

您的条件已关闭。注意括号。它应该是：

```
if ((fd2 = open(logFile, O_RDWR |O_APPEND | O_CREAT , 0666)) == -1)
//                                                        ^^^    ^^^ 
```

有时最好不要比自己聪明：

```
int fd = open(...);

if (fd == -1) { DieWithError(); } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-01T01:23:24.233

这是错误的。

```
if ((fd2 = open(logFile, O_RDWR |O_APPEND | O_CREAT , 0666) == -1)) 
```

你要这个。

```
if ((fd2 = open(logFile, O_RDWR |O_APPEND | O_CREAT , 0666)) == -1) 
```

很难看，因为这行很长，但是括号放错了位置。简而言之，

```
if ((   fd2 = open(...) == -1     )) // your code
if ((   fd2 = (open(...) == -1)   )) // equivalent code
if ((   (fd2 = open(...)) == -1)  )) // correct code 
```

如果线路很长，最好不要让它`if`...

```
#include <err.h>

fd2 = open(...);
if (fd2 < 0)
    err(1, "open failed"); 
```

# sas - 带有宏的分类变量

> ID：13169694
> 
> 赞同：2
> 
> 时间：2012-11-01T01:15:24.013
> 
> 标签：sas, sas-macro

我正在尝试在 sas 中创建分类变量。我编写了以下宏，但在尝试运行时出现错误：“无效的符号变量名 xxx”。我不确定这是否是实现我目标的正确方法。

这是我的代码：

```
%macro addvars;
proc sql noprint;
select distinct coverageid 
into :coverageid1 - :coverageid9999999
from save.test;

%do i=1 %to &sqlobs;
%let n=coverageid&i;
%let v=%superq(&n);
%let f=coverageid_&v;
%put &f;
data save.test;
 set save.test;
%if coverageid eq %superq(&v)
  %then &f=1;
  %else &f=0;
run;
%end; 
%mend addvars;
%addvars; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T01:57:06.817

您以不正确的方式将宏代码与数据步骤代码组合在一起。%if = 宏语言，这意味着您实际上是在评估文本“coverageid”是否等于 %superq(&v) 评估的文本，而不是 coverageid 变量的内容是否等于 &v 中的值。您可以将 %if 转换为 if，但即使您让它正常工作，它也会非常低效（您正在重写数据集 N 次，因此如果您有 1500 个coverageID 值，您将重写整个 500MB 数据集或诸如此类的 1500次，而不是一次）。

如果您要做的是获取变量“coverageid”并将其转换为一组变量，这些变量包含所有可能的coverageid 值，1/0 二进制，对于每个变量，有很多方法可以做到这一点。我相当肯定 ETS 模块有一个程序可以做到这一点，但我不记得它 - 如果你要将它发布到 SAS 邮件列表，其中一个人无疑会有它很快。

对我来说，简单的方法是使用完整的 datastep 代码来做到这一点。首先确定 COVERAGEID 有多少潜在值，然后将每个值分配给直接值，然后将值分配给正确的变量。

如果 COVERAGEID 值是连续的（即，从 1 到某个数字，没有跳过，或者您不介意跳过），那么这很容易 - 设置一个数组并对其进行迭代。我会假设它们不是连续的。

```
*First, get the distinct values of coverageID.  There are a dozen ways to do this, this works as well as any;
proc freq data=save.test;
tables coverageid/out=coverage_values(keep=coverageid);
run;

*Then save them into a format.  This converts each value to a consecutive number (so the lowest value becomes 1, the next lowest 2, etc.)  This is not only useful for this step, but it can be useful in the future in converting back.;

data coverage_values_fmt;
set coverage_values;
start=coverageid;
label=_n_;
fmtname='COVERAGEF';
type='i';
call symputx('CoverageCount',_n_);
run;
*Import the created format;
proc format cntlin=coverage_values_fmt;
quit;

*Now use the created format.  If you had already-consecutive values, you could skip to this step and skip the input statement - just use the value itself;
data save.test_fin;
set save.test;
array coverageids coverageid1-coverageid&coveragecount.;
do _t = 1 to &coveragecount.;
  if input(coverageid,COVERAGEF.) = _t then coverageids[_t]=1;
  else coverageids[_t]=0;
end;
drop _t;
run; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:51:07.103

这是另一种不使用格式的方法，*可能*更容易理解。

首先，只需制作一些测试数据：

```
data test;
    input coverageid @@;
    cards;
3 27 99 105
;
run; 
```

接下来，创建一个没有观测值但每个级别都有一个变量的数据集`coverageid`。请注意，这种方法在这里允许任意值。

```
proc transpose data=test out=wide(drop=_name_);
    id coverageid;
run; 
```

最后，创建一个新的数据集，将初始数据集和宽数据集结合起来。然后，对于 x 的每个级别，查看每个分类变量并决定是否将其“打开”。

```
data want;
    set test wide;
    array vars{*} _:;
    do i=1 to dim(vars);
        vars{i} = (coverageid = substr(vname(vars{i}),2,1));
    end;
    drop i;
run; 
```

线

```
vars{i} = (coverageid = substr(vname(vars{i}),2)); 
```

可能需要更多解释。`vname`返回变量的名称，并且由于我们没有指定 a `prefix`in `proc transpose`，所有变量都被命名为`_1`,`_2`等。所以我们取变量名称从第二个位置开始的子字符串，并将其与`coverageid`;进行比较 如果它们相同，我们将变量设置为 1；否则评估为 0。

# android - 在 Android 的谷歌地图上绘制图像

> ID：13169695
> 
> 赞同：0
> 
> 时间：2012-11-01T01:15:32.480
> 
> 标签：android, google-maps, views, google-maps-markers

我想做以下事情。我有一个显示我的位置的谷歌地图。我已经单独创建了一个指南针。现在我想要将它们组合起来并将指南针放在我的地图上。我不知道从哪里开始，以及我如何实施它，因为我移动的每一秒都会更新 te compass 的数据？

如果您有任何教程，请给我链接，因为我找不到任何教程。

在我以前的应用程序中，我使用了一个扩展 Overlay 的类，但这只是为了放置一个图钉或类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T06:37:26.253

您可以将图像添加为自定义控件：[示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/control-custom)（示例中为主页按钮）

# javascript - 重新声明javascript函数

> ID：13169697
> 
> 赞同：2
> 
> 时间：2012-11-01T01:15:38.537
> 
> 标签：javascript, jquery, google-chrome-extension

我希望有人能帮助我。我想通过扩展重新声明 js 函数。比如网站上有基本的js功能：

```
function foo(){
..something here..
} 
```

我想用自己的同名函数重新声明它。怎么做最容易？

**编辑 1\. 我会尽力解释得更好。**

网站上有一个本机代码：

```
Notifier = {
  debug: false,
  init: function (options) {
    curNotifier = extend({
      q_events: [],
      q_shown: [],
      q_closed: [],
      q_max: 3,
      q_idle_max: 5,
      done_events: {},
      addQueues: curNotifier.addQueues || {},
      recvClbks: curNotifier.recvClbks || {},
      error_timeout: 1,
      sound: new Sound('mp3/bb1'),
      sound_im: new Sound('mp3/bb2')
    }, options);

    if (!this.initFrameTransport() && !this.initFlashTransport(options)) {
      return false;
    }
    this.initIdleMan();

    if (!(curNotifier.cont = ge('notifiers_wrap'))) {
      bodyNode.insertBefore(curNotifier.cont = ce('div', {id: 'notifiers_wrap', className: 'fixed'}), ge('page_wrap'));
    }
  },
  destroy: function () {
    Notifier.hideAllEvents();
    curNotifier.idle_manager.stop();
    curNotifier = {};
    re('notifiers_wrap');
    re('queue_transport_wrap');
  },
  reinit: function () {
    ajax.post('notifier.php?act=a_get_params', {}, {
      onDone: function (options) {
        if (options) {
          curNotifier.error_timeout = 1;
          this.init(options);
        } else {
          curNotifier.error_timeout = curNotifier.error_timeout || 1;
          setTimeout(this.reinit.bind(this), curNotifier.error_timeout * 1000);
          if (curNotifier.error_timeout < 256) {
            curNotifier.error_timeout *= 2;
          }
        }
      }.bind(this),
      onFail: function () {
        curNotifier.error_timeout = curNotifier.error_timeout || 1;
        setTimeout(this.reinit.bind(this), curNotifier.error_timeout * 1000);
        if (curNotifier.error_timeout < 256) {
          curNotifier.error_timeout *= 2;
        }
        return true;
      }.bind(this)
    });
  }
} 
```

和功能声音

```
function Sound(filename) {
  var audioObjSupport = false, audioTagSupport = false, self = this, ext;
  if (!filename) throw 'Undefined filename';

  try {
    var audioObj = ce('audio');
    audioObjSupport = !!(audioObj.canPlayType);

    if (('no' != audioObj.canPlayType('audio/mpeg')) && ('' != audioObj.canPlayType('audio/mpeg')))
      ext = '.mp3?1';
    else if (('no' != audioObj.canPlayType('audio/ogg; codecs="vorbis"')) && ('' != audioObj.canPlayType('audio/ogg; codecs="vorbis"')))
      ext = '.ogg?1';
    else
      audioObjSupport = false;
  } catch (e) {}
  // audioObjSupport = false;

  if (audioObjSupport) {
    audioObj.src = filename + ext;
    var ended = false;
    audioObj.addEventListener('ended', function(){ended = true;}, true);
    audioObj.load();
    this.playSound = function() {
      if (ended) {
        audioObj.load();
      }
      audioObj.play();
      ended = false;
    };
    this.pauseSound = function() {
      audioObj.pause();
    };
  } else {
    cur.__sound_guid = cur.__sound_guid || 0;
    var wrap = ge('flash_sounds_wrap') || utilsNode.appendChild(ce('span', {id: 'flash_sounds_wrap'})),
        guid = 'flash_sound_' + (cur.__sound_guid++);

    var opts = {
      url: '/swf/audio_lite.swf?4',
      id: guid
    }
    var params = {
      swliveconnect: 'true',
      allowscriptaccess: 'always',
      wmode: 'opaque'
    }
    if (renderFlash(wrap, opts, params, {})) {
      var swfObj = browser.msie ? window[guid] : document[guid],
          inited = false,
          checkLoadInt = setInterval(function () {
        if (swfObj && swfObj.paused) {
          try {
            swfObj.setVolume(1);
            swfObj.loadAudio(filename + ext);
            swfObj.pauseAudio();
          } catch (e) {debugLog(e);}
        }
        inited = true;
        clearInterval(checkLoadInt);
      }, 300);
      self.playSound = function() {
        if (!inited) return;
        swfObj.playAudio(0);
      };
      self.pauseSound = function() {
        if (!inited) return;
        swfObj.pauseAudio();
      };
    }
  }
}
Sound.prototype = {
  play: function() {
    try {this.playSound();} catch(e){}
  },
  pause: function() {
    try {this.pauseSound();} catch(e){}
  }
}; 
```

当我尝试使用重新声明功能添加注入声音时，它不起作用。如果我创建自己的函数，例如 xSound 并以这种方式调用它：

```
cur.sound = new xSound('mp3/bb1'); 
```

它正在工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T01:27:18.247

你可以这样做，例如：

```
foo = function(args) {
    // method body...
} 
```

JavaScript 是一种编程语言，其中函数是一等公民，因此您可以像其他类型一样操作它们。

更新：

确保这段代码实际上是重新定义而不是第一个定义。（感谢@jmort253）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T01:26:34.047

```
function foo(){
   // ..something else here..
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T07:51:55.680

请记住，扩展的内容脚本代码和网页代码[在不同的执行上下文中运行](http://developer.chrome.com/extensions/content_scripts.html#execution-environment)。

因此，如果要重新定义网页上下文中存在的函数，则必须将代码注入网页。看看 Rob W 的这个答案，了解不同的方法： [使用内容脚本将代码插入页面上下文](https://stackoverflow.com/questions/9515704/building-a-chrome-extension-inject-code-in-a-page-using-a-content-script/9517879)

# cocoa - NSArrayController selectedIndex 始终为零

> ID：13169699
> 
> 赞同：0
> 
> 时间：2012-11-01T01:15:47.870
> 
> 标签：cocoa, selection, nsarraycontroller, selectedindex, nscollectionviewitem

我有一个 NSArrayController 绑定到我的一个对象中的一个数组。我有一个继承自 NSObject 的对象，该对象被添加到包含 NSArrayController 的 nib 文件中。该对象有一个名为 textureAtlas 的属性，类型为 TextureAtlas（我自己定义的类型）。TextureAtlas 类型定义了一个名为 textures 的 NSMutableArray 属性。我绑定到这个纹理数组（所以路径类似于“textureAtlas.textures”）。

我的问题是，每当我在 NSCollectionView 中选择新纹理时，绑定到数组控制器选择中的某些属性的其他控件都不会改变。事实上，NSArrayController 的 selectedIndex 属性始终为零。但是，每当我向我的图集动态添加纹理时，纹理都会正确添加到集合视图中。我可以在 Collection View 中选择纹理（选择边框在最后一个选定的纹理周围正确绘制）。它只是 selectedIndex 不会改变。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T01:41:20.487

我已经解决了这个问题。显然你必须绑定集合视图和纹理数组控制器的选择索引。我不明白为什么你必须这样做。我虽然可可会自动为你做到这一点。

# android - 从照片中获取位置，然后用它在地图上放置一个标记

> ID：13169701
> 
> 赞同：1
> 
> 时间：2012-11-01T01:16:05.683
> 
> 标签：android, google-maps, android-camera, google-maps-markers

我试图弄清楚是否可以从照片中获取位置，然后使用该信息在我的地图叠加层上放置一个标记。有没有人这样做过。我真的不知道在哪里。如果有人有兴趣帮助我，我将提供我的应用程序的完整源代码。基本上我想制作一个显示地图的程序，该地图显示其他用户添加的标记。标记只能从照片中放置。我已经设置了地图以及我想如何调用相机并拍照，但我不确定如何从那里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T02:25:47.857

您是否使用 Google 地图作为地图 API？

如果是这样，那么在拍摄照片时将纬度和经度值存储在数据库（或数组或任何你喜欢的地方）中

然后，当查看地图时，根据这些存储的位置显示标记。

没有更多信息，这是我目前能提供给你的最多信息

问候射频

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T05:11:25.510

根据您的“其他用户”声明，您应该查看是否可以获取在大多数 JPG 照片中存储为元数据的 EXIF 数据。这就是 Flickr API 允许您根据位置搜索照片的方式。通过使用 EXIF 数据，您可以使用任何照片，而不仅仅是从您的应用中拍摄的照片。如果您确实希望所有内容都通过您自己的应用程序，您可以创建一个数据库，将用户照片与通过`LocationListener`. 只要知道如果没有打开 GPS，设备的位置就不会非常准确。

# iphone - 隐藏后导航控制器工具栏不会重新出现

> ID：13169702
> 
> 赞同：0
> 
> 时间：2012-11-01T01:16:15.747
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller, toolbar

在我的 appDelegate 中，在**applicationDidFinishLaunching**下，我有：

```
[self.navigationController setToolbarHidden:NO]; 
```

在子视图中，在**viewDidLoad**我有：

```
[self.navigationController setToolbarHidden:YES animated:YES]; 
```

但是，在导航控制器上回击时，工具栏仍然是隐藏的。我尝试将其添加到**RootViewController**中，但没有成功。我不知道出了什么问题。

```
[self.navigationController setToolbarHidden:NO animated:YES]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T02:29:26.910

在您的`subview`中，您可以执行以下操作：

```
- (void)viewWillAppear:(BOOL)animated
{
    [self.navigationController setNavigationBarHidden:YES animated:animated];
    [super viewWillAppear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [self.navigationController setNavigationBarHidden:NO animated:animated];
    [super viewWillDisappear:animated];
} 
```

# c# - 如何将 datepicker 日期时间值插入 sql 数据库

> ID：13169709
> 
> 赞同：1
> 
> 时间：2012-11-01T01:16:40.133
> 
> 标签：c#, sql-server-2008, datetime, datepicker

我的 SQL Server 2008 数据库有一个带有 datatype 列的表`datetime`。

当我尝试将值插入到`datetime`列中时，出现错误。

> *'-' 附近的语法不正确*

我的日期时间选择器具有自定义格式，`yyyy-MM-dd`例如 (2012-11-01)

以下是我用来插入的代码示例`datetime`。

```
 System.DateTime myDate = default(System.DateTime);
 myDate = DateTimePickerPrint.Value;
 string query = string.Format("EXEC Save_Quotation_Bookshop '" + txt_QutationNo.Text + "','" + txt_CusCode.Text + "',#" + myDate + "#,"); 
```

请问有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T01:22:25.800

将日期用单引号而不是 # 括起来。

此字符串连接是等待发生的 SQL 注入。改用带参数的SqlCommand，就不用担心字符串转换的问题了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T05:57:29.897

首先：**停止**将您的 SQL 代码连接在一起！这是对 SQL 注入攻击的邀请，而且对性能也非常不利 - 请改用**参数化查询**。

如果你这样做 - 你也不会遇到日期时间/字符串转换问题......

`DateTime`其次： SQL Server 中仅日期的“安全”格式是`YYYYMMDD`-**没有任何破折号**- 只有这种格式才能保证它可以在任何 SQL Server 上运行，无论您的语言、区域和日期格式设置如何。

第三。如果您想执行存储过程 - 我建议使用这种方法：

```
System.DateTime myDate = default(System.DateTime);
myDate = DateTimePickerPrint.Value;

using (SqlConnection con = new SqlConnection(your-connection-string-here))
using (SqlCommand cmd = new SqlCommand("dbo.Save_Quotation_Bookshop", con))
{
    // tell ADO.NET it's a stored procedure (not inline SQL statements)
    cmd.CommandType = CommandType.StoredProcedure;

    // define parameters
    cmd.Parameters.Add("@QuotationNo", SqlDbType.VarChar, 50).Value = txt_QutationNo.Text;
    cmd.Parameters.Add("@CustomerCode", SqlDbtype.VarChar, 25).Value = txt_CusCode.Text;
    cmd.Parameters.Add("@SaleDate", SqlDbType.DataTime).Value = myDate;

    // open connection, execute stored procedure, close connection again
    con.Open();
    cmd.ExecuteNonQuery();
    con.Close();
} 
```

Don't use `EXEC ......` as an inline SQL statement - tell ADO.NET that you're executing a stored procedure, supply the parameters - and you're done!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T01:28:47.113

试试这个

```
string query = String.Format("EXEC Save_Quotation_Bookshop '{0}','{1}','{2}'",txt_QutationNo.Text,txt_CusCode.Text, myDate); 
```

或者

```
string query = string.Format("EXEC Save_Quotation_Bookshop @QutationNo,@CusCode,@myDate");

...
comm.Parameters.AddWithValue("@QutationNo", txt_QutationNo.Text);
comm.Parameters.AddWithValue("@CusCode", txt_CusCode.Text);
comm.Parameters.AddWithValue("@myDate", myDate); 
```

# c++ - gdb 断言失败

> ID：13169710
> 
> 赞同：0
> 
> 时间：2012-11-01T01:16:43.780
> 
> 标签：c++, gdb, assert

我正在为我用 g++ 编写的一些代码编译一个测试用例，并尝试在命令行上使用 gdb 对其进行调试。代码编译时没有错误或警告，但是当我使用 gdb 启动可执行文件时，出现以下错误：

```
Assertion failed: (g.numPlayers>0 && g.numPlayers<=MAXPLAYERS && cin), function readScenario, file p3t3.cpp, line 141. 
```

我在 gdb 中使用与正常运行编译程序时相同的输入参数。有什么原因可以毫无问题地编译，但在 gdb 中抛出错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T01:19:51.697

如果您需要将命令行参数传递给您的程序，那么您要么需要使用

```
$ gdb --args ./program arg1 arg2 
```

或者

```
$ gdb ./program
...
(gdb) run arg1 arg2 
```

# php - Symfony2服务参数构造函数错误

> ID：13169712
> 
> 赞同：2
> 
> 时间：2012-11-01T01:17:03.470
> 
> 标签：php, symfony, fatal-error

我正在使用 symfony2，我使用一项服务根据系统的某些操作通知我的用户。好吧，它在我的本地环境中运行良好，现在在生产中我遇到了一些问题。

该服务在 services.txt 上作为：

```
mybundle.notify:
    class: NC8Digital\CRMBundle\Services\Notify
    arguments: [ @doctrine.orm.entity_manager, @templating, @mailer ] 
```

并且该类被声明为

```
public function __construct(EntityManager $em, TimedTwigEngine $templating, \Swift_Mailer $mailer) 
```

我收到了这个错误：

```
PHP Catchable fatal error:  Argument 2 passed to NC8Digital\\CRMBundle\\Services\\Notify::__construct() must be an instance of Symfony\\Bundle\\TwigBundle\\Debug\\TimedTwigEngine, instance of Symfony\\Bundle\\TwigBundle\\TwigEngine given, called in /mypath/app/cache/prod/appProdProjectContainer.php on line 367 and defined in /mypath/src/NC8Digital/CRMBundle/Services/Notify.php on line 43 
```

我尝试的第一件事是更改我的构造函数来解决问题……我的浏览器出现 500 错误，所以我改回来了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T06:27:11.183

用 类型提示第二个参数`Symfony\Bundle\FrameworkBundle\Templating\EngineInterface`。

# c++ - 为 Arduino 创建库

> ID：13169714
> 
> 赞同：1
> 
> 时间：2012-11-01T01:18:14.567
> 
> 标签：c++, arduino

我有一些代码想放入使用另一个库[SoftwareSerial](http://www.arduino.cc/en/Reference/SoftwareSerial)的库中。现在，我将 SoftwareSerial.h 和 SoftwareSerial.cpp 文件添加到与我正在创建的库相同的文件夹中。

我的头文件看起来像这样：

```
#ifndef MyLibrary_h
#define MyLibrary_h

#include "Arduino.h"
#include "SoftwareSerial.h"

#define MyLibrary_VERSION       1       // software version of this library

//DEFINE ALL CLASS VARIABLES

#define DATA_BUFFER_SIZE 50  //soft serial has 63 byte buffer.

class MyLibrary
{
    public:
        MyLibrary(uint8_t port_in, uint8_t port_out);
        float getSomeValue(uint8_t some_index);
    private:
        SoftwareSerial _serial;
                //Not sure if I should add the constructors below to the above declaration.
                //(uint8_t in_pin=4, uint8_t out_pin=5, bool logic_reversed = false);
        float convertSomeValue(byte upperbyte, byte lowerbyte);
        void flushSerialBuffer();
}; 

#endif 
```

我的 .cpp 文件如下所示：

```
#include "Arduino.h"
#include "MyLibrary.h"
#include "SoftwareSerial.h"

MyLibrary::MyLibrary(uint8_t in_pin, uint8_t out_pin)
{

    bool logic_reversed = false;
    this->_serial(in_pin*, out_pin*, logic_reversed);
        //I tried the declaration below as well.
    //SoftwareSerial _serial(in_pin*, out_pin*, logic_reversed);
}

float MyLibrary::getSomeValue(uint8_t sensor_index) {
    float someValue = 1.1;
    return someValue;
}

float MyLibrary::convertSome(byte upperbyte, byte lowerbyte) {
    float someValue = 0.9;
    return someValue;
}

void MyLibrary::flushSerialBuffer() {
    //Flush serial buffer
    while(_serial.available())
        char c = _serial.read();
} 
```

我希望[SoftwareSerial](http://www.arduino.cc/en/Reference/SoftwareSerial)成为 MyLibrary 中的一个私有字段（最好是静态的，但不是必需的），但我尝试了很多方法来声明它，但似乎没有任何效果。我不断收到类似`no matching function for call to 'SoftwareSerial::SoftwareSerial()`or的错误`invalid use of qualified-name 'MyLibrary::_serial'`。

`static SoftwareSerial _serial;`通过在我的 .h 文件和`SoftwareSerial MyLibrary::_serial(4,5,false);`.cpp 文件的顶部声明，我让它编译好一次。问题是，我想`_serial`在我的构造函数中为 MyLibrary 设置端口（这样我就可以创建一个使用 SoftwareSerial 的特定输入/输出引脚的 MyLibrary），而不是在 .cpp 文件的顶部显式声明它们。

我对 C 编码和 Arduino 不太熟悉，所以如果有人可以向我解释如何在 .h 文件中正确声明它们并在 MyLibrary 构造函数或 MyLibrary.begin 中使用正确的端口实例化它们，那将是一个很大的帮助() 函数（或类似的东西）。

提前感谢您的**有用**评论。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T02:39:53.750

您需要做的是让您的构造函数按如下方式进行初始化：

```
class MyLibrary{
public:
   MyLibrary(uint8_t, uint8_t);
   //...
private:
   SoftwareSerial _serial;
   //...
};

MyLibrary::MyLibrary(uint8_t in, uint8_t out)
   : _serial(in, out)
{
   //do initialization
} 
```

这种语法起初可能看起来很奇怪，但虽然它不是很漂亮，但它清楚地区分了变量的*初始化*和对变量的*操作*，这是将初始化放在构造函数的主体中可能会有点模糊的东西。通常，除非您使用此语法初始化成员变量，否则 C++ 将调用默认构造函数，如果该成员没有可调用的默认构造函数，则会导致编译错误。

# javascript - jQuery：当行改变时让文本区域滑出？

> ID：13169718
> 
> 赞同：1
> 
> 时间：2012-11-01T01:18:58.687
> 
> 标签：javascript, jquery

当用户输入这么多字符以及单击按钮时，我有一个从 3 行扩展到 17 行的文本区域框。

SetNewSize(); 函数是通过 onkeyup 调用的，当长度大于 50 时扩展文本区域。

更多空间（）; 函数通过按钮调用。

发生这种情况时，我想将盒子滑出，有什么想法吗？

谢谢这里是我的代码：

```
function SetNewSize(textarea){
if (textarea.value.length > 50)
{
    textarea.rows = 17;
}
else
{
    textarea.rows = 3;
}}

function morespace(){
var thetxt = document.getElementById('more').value;
var box = document.forms["myForm"]["comment"];
if(box.rows == 3)
{
    $("#emailme").fadeOut(800);
    box.rows = 17;
    document.getElementById('more').innerHTML = "less space?";
}
else
{
    $("#emailme").fadeIn(800);
    box.rows = 3;
    document.getElementById('more').innerHTML = "more space?";
}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T01:33:03.927

通过“滑出盒子”，我猜你的意思是动画它。虽然您可能无法在 jQuery 中为 textarea 行设置动画，但您可以`height`为 textarea 设置动画以给用户更多空间。例如，你触发了这样的事情：

```
$('#comment').animate({'height': '+=40'},200); 
```

这将在每次触发时增加 40 像素的高度，并使其动画平滑。如果要添加数字行，您可以简单地计算您希望 textarea 变为多大，然后将其设置为动画高度。

这是此操作的[JSFiddle 链接](http://jsfiddle.net/znVdL/)，您可能想查看[jQuery animate API](http://api.jquery.com/animate/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T01:30:09.170

好吧，快速的答案是使用某人已经制作的东西：[https ://github.com/gurglet/jQuery-Textarea-Autoresize-Plugin](https://github.com/gurglet/jQuery-Textarea-Autoresize-Plugin)

但是，如果您想自己动手，我稍后会用您需要的代码更新我的回复。

更新的答案：假设你有这个 HTML：

```
<button id="emailme">Email me</button>
<form id="myForm">
    <input id="more" name="more" type="text">
    <textarea id="comment" name="comment" rows="3">

    </textarea>
</form> 
```

然后你可以使用这个脚本：

```
(function(){
    var BIG = 17,
        SMALL = 3,
        currentSize = SMALL,
        changeSize = function(rows) {
            var $more = $("#more"),
                thetxt = $more.val(),
                $box = $("#comment"),
                currentRows = $box.prop("rows"),
                boxRowHeight = $box.height()/currentRows,
                newHeight = rows * boxRowHeight;

            if (rows === currentRows) return;       

            return $box.animate({'height': newHeight }, 500 , "swing", function(){
                $more.val((currentRows > rows) ? "more space?" : "less space?");
                $box.prop("rows", rows);
                currentSize = rows;
            }).promise();
        },
        setNewSize = function(event) {
            var $area = $(event.target);
            if ($area.val().length > 50 && currentSize === SMALL) {
                changeSize(BIG);
                currentSize = BIG ;
            } 
        };

    $("#comment").bind("keyup", setNewSize);

    $("#more").click(function(){
        if (currentSize === BIG) {
            $.when(changeSize(SMALL)).then(function(){
                $("#emailme").fadeIn(800);
            });
        }else{
            $.when(changeSize(BIG)).then(function(){
                $("#emailme").fadeOut(800);
            });            
        }

    });            
}​)();​ 
```

JSFiddle 链接：http: [//jsfiddle.net/isochronous/fvtY7/](http://jsfiddle.net/isochronous/fvtY7/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-01T01:36:56.527

你也可以像这样使用 jquery 的 attr() ：

```
$('#comment').attr('rows', 17); 
```

其中行表示要更改的属性，17 表示要设置的值。要获取当前使用的行数，请使用：

```
 var rows = $('#comment').attr('rows'); 
```

# c# - 使用asp.net c#在Reportviewer中设置文本框值

> ID：13169719
> 
> 赞同：2
> 
> 时间：2012-11-01T01:19:02.197
> 
> 标签：c#, asp.net, reportviewer

我有一个包含文本框和tablix 的reportviewer。tablix 使用数据源填充（它使用存储的过程获取数据，其中包含来自查询字符串的 2 个参数）。如何将查询字符串的值指定为我的 reportviewer 文本框的值。类似于：此 ReportfFrom 查询字符串 val1 以查询字符串 val 2。

标记：

```
<rsweb:ReportViewer ID="ReportViewer1" runat="server" 
    CssClass="ReportAlignment" Font-Names="Verdana" Font-Size="8pt" 
    InteractiveDeviceInfos="(Collection)" WaitMessageFont-Names="Verdana" 
    WaitMessageFont-Size="14pt" Width="550px">
    <LocalReport ReportPath="TempEmpWageSummaryReport.rdlc">
        <DataSources>
            <rsweb:ReportDataSource DataSourceId="LoadWageSummary" Name="DataSet1" />
        </DataSources>
    </LocalReport>
</rsweb:ReportViewer>
<asp:SqlDataSource ID="LoadWageSummary" runat="server" 
    ConnectionString="<%$ ConnectionStrings:stockerConnectionString %>" 
    SelectCommand="procTempEmployeeWageSummaryReport" 
    SelectCommandType="StoredProcedure">
    <SelectParameters>
        <asp:QueryStringParameter Name="startDate" QueryStringField="start" 
            Type="String" />
        <asp:QueryStringParameter Name="endDate" QueryStringField="end" Type="String" />
    </SelectParameters>
</asp:SqlDataSource> 
```

背后的代码

```
protected void Page_Load(object sender, EventArgs e)
    {
        string start = Server.UrlDecode(Request.QueryString["start"]);
        string end = Server.UrlDecode(Request.QueryString["end"]);
        //this.ReportViewer1.LocalReport.ReportEmbeddedResource = "TempEmpWageSummaryReport.rdlc";
        string param0 = "GROUPED TEMPORARY EMPLOYEE WAGE SUMMARY REPORT FROM " + start + "to " + end;
        ReportParameter rp = new ReportParameter("ReportParameter1", param0);
        this.ReportViewer1.LocalReport.SetParameters(new ReportParameter[] { rp });

        this.ReportViewer1.LocalReport.Refresh();

        //BindReport();
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:43:50.277

如果您在文本框中保存带有期望值的报表，您可以通过报表定义中的 xml 处理以获取该值，但是我不建议这样做。你最好只在报告之外有一个文本框，然后把它交给查询来获取数据。

除了上述之外，我几乎可以肯定，从用户指定的报告中的文本框中获取值是不可能的，除非报告被保存，然后您处理报告的定义并获取值如果您不知道自己在做什么，就会感到痛苦。

# c++ - sizeof(bool) 高于 1 的系统/编译器示例（在 c++ 中）？

> ID：13169721
> 
> 赞同：0
> 
> 时间：2012-11-01T01:19:10.847
> 
> 标签：c++, compiler-construction, boolean, system

> **可能重复：**
> [为什么标准本身没有将 sizeof(bool) 定义为一个？](https://stackoverflow.com/questions/5067492/why-the-sizeofbool-is-not-defined-to-be-one-by-the-standard-itself)

我已经`sizeof(bool)`在几个系统上进行了测试，我总是发现`1`（与 相同`sizeof(char)`）。什么是最广泛使用的系统/c++ 编译器，其中`sizeof(bool)`严格高于`1`？

# python - timedelta csv 熊猫

> ID：13169723
> 
> 赞同：5
> 
> 时间：2012-11-01T01:19:51.530
> 
> 标签：python, pandas

我有以下文件（`df_SOF1.csv`），它有 100 万条记录

```
Location,Transport,Transport1,DateOccurred,CostCentre,D_Time,count
0,Lorry,Car,07/09/2012,0,0:00:00,2
1,Lorry,Car,11/09/2012,0,0:00:00,5
2,Lorry,Car,14/09/2012,0,0:00:00,30
3,Lorry,Car,14/09/2012,0,0:07:00,2
4,Lorry,Car,14/09/2012,0,0:29:00,1
5,Lorry,Car,14/09/2012,0,3:27:00,3
6,Lorry,Car,14/09/2012,0,3:28:00,4
7,Lorry,Car,21/09/2012,0,0:00:00,13
8,Lorry,Car,27/09/2012,0,0:00:00,8
9,Lorry,Car,28/09/2012,0,0:02:00,1
10,Train,Bus,03/09/2012,2073,7:49:00,1
11,Train,Bus,05/09/2012,2073,7:50:00,1
12,Train,Bus,06/09/2012,2073,7:52:00,1
13,Train,Bus,07/09/2012,2073,7:48:00,1
14,Train,Bus,08/09/2012,2073,7:55:00,1
15,Train,Bus,11/09/2012,2073,7:49:00,1
16,Train,Bus,12/09/2012,2073,7:52:00,1
17,Train,Bus,13/09/2012,2073,7:50:00,1
18,Train,Bus,14/09/2012,2073,7:54:00,1
19,Train,Bus,18/09/2012,2073,7:51:00,1
20,Train,Bus,19/09/2012,2073,7:50:00,1
21,Train,Bus,20/09/2012,2073,7:51:00,1
22,Train,Bus,21/09/2012,2073,7:52:00,1
23,Train,Bus,22/09/2012,2073,7:53:00,1
24,Train,Bus,23/09/2012,2073,7:49:00,1
25,Train,Bus,24/09/2012,2073,7:54:00,1
26,Train,Bus,25/09/2012,2073,7:55:00,1
27,Train,Bus,26/09/2012,2073,7:53:00,1
28,Train,Bus,27/09/2012,2073,7:55:00,1
29,Train,Bus,28/09/2012,2073,7:53:00,1
30,Train,Bus,29/09/2012,2073,7:56:00,1 
```

我正在使用 pandas 来分析它 我已经尝试了至少 40 个小时来找到一种方法来对数据进行分组，以便我可以聚合时间列`D_Time`

我已经加载了所需的模块，我创建了一个数据框，如下所示，`DateOccured`用作索引

```
df_SOF1 = read_csv('/users/fabulous/documents/df_SOF1.csv', index_col=3, parse_dates=True) # read file from disk 
```

我可以按任何列分组或遍历任何行，例如

```
df_SOF1.groupby('Location').sum() 
```

但是，我还没有找到一种方法来总结并`D_Time`使用 pandas 取列的平均值。我已经阅读了 20 多篇关于 timedeltas 等的文章，但我仍然不知道如何在 pandas 中做到这一点。

任何可以让我在`D_Time`列上进行算术运算的解决方案都将不胜感激。（即使它必须在熊猫之外完成）。

我认为一种可能的解决方案是将`D_Time`列更改为秒。 ***_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __** _2012/11/01 我对上面的 30 项运行了以下命令

df_SOF1.groupby('Transport').agg({'D_Time': sum})

```
D_Time 
```

运输
货车 0:00:000:00:000:00:000:07:000:29:003:27:003:28... 火车 7:49:007:50:007:52:007:48:007 :55:007:49:007:52..

似乎将这些值物理相加，而不是给出数字总和（如添加字符串）

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:23:39.163

我没有在 pandas 中找到任何关于 deltatime 的提及，而 datetime 模块有一个，因此将 D_Time 转换为秒也不错：

```
def seconds(time_str):
    end_time = datetime.datetime.strptime(time_str,'%H:%M:%S')
    delta = end_time - datetime.datetime.strptime('0:0:0','%H:%M:%S')
    return delta.total_seconds()

df_SOF1.D_Time = df_SOF1.D_Time.apply(seconds) 
```

结果 ：

```
>>> df_SOF1.groupby('CostCentre').sum()
            Location  D_Time  count
CostCentre                         
0                 45   27180     69
2073             420  594660     21 
```

将 datetime.datetime.strptime('0:0:0','%H:%M:%S') 移动到全局命名空间可以减少执行时间：

```
timeit.timeit("sec('01:01:01')", setup="from __main__ import sec",
              number=10000)
1.025843858718872

timeit.timeit("seconds('01:01:01')", setup="from __main__ import seconds",
              number=10000)
0.6128969192504883 
```

# python - 如何将包含换行符的字符串转换为 Python 中的列表？

> ID：13169725
> 
> 赞同：14
> 
> 时间：2012-11-01T01:20:38.993
> 
> 标签：python, string, list, newline

> **可能重复：**
> [在python中拆分字符串](https://stackoverflow.com/questions/2094176/split-a-string-in-python)

我想改变这个：

```
str = 'blue\norange\nyellow\npink\nblack' 
```

对此：

```
list = ['blue','orange', 'yellow', 'pink', 'black'] 
```

我尝试了一些 for 和 while 循环，但无法做到。我只想在触发制作下一个元素时删除换行符。我被告知使用：

```
list(str) 
```

这使

```
['b', 'l', 'u', 'e', '\n', 'o', 'r', 'a', 'n', 'g', 'e', '\n', 'y', 'e', 'l', 'l', 'o', 'w', '\n', 'p', 'i', 'n', 'k', '\n', 'b', 'l', 'a', 'c', 'k'] 
```

在此之后，我使用`.remove()`但只`'\n'`删除了一个，并且代码变得更加复杂以拼写颜色。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-01T01:28:53.093

你想要`your_str.splitlines()`，或者可能只是`your_str.split('\n')`

使用 for 循环 - 仅供教学使用：

```
out = []
buff = []
for c in your_str:
    if c == '\n':
        out.append(''.join(buff))
        buff = []
    else:
        buff.append(c)
else:
    if buff:
       out.append(''.join(buff))

print out 
```

# php - 是否有一个可以绑定到运行时环境的 php ide，以便它实际上可以帮助一些复杂框架的代码完成？

> ID：13169730
> 
> 赞同：-1
> 
> 时间：2012-11-01T01:21:29.747
> 
> 标签：php, ide

我正在尝试找到一个 php ide，例如，它可以提示我通过系统加载工厂（Codeigniter 框架）加载的所有类。并且无论调用堆栈有多深，实际上也可以为控制器分配所有属性。对于曾经使用过 codeigniter 的人来说，这只是一个示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T01:24:29.983

我见过的所有 IDE（Eclipse、Zend Studio、Netbeans、PHPStorm）都严重依赖于正确的 PHPDoc 注释来获取返回值，但如果它们存在，那么在帮助代码完成方面做得很好。

就个人而言，我建议使用 PHPStorm。它确实花费了您的许可证，但物有所值。它确实是一个强大而高效的工具。

# jquery - 使用多个列表搜索

> ID：13169733
> 
> 赞同：0
> 
> 时间：2012-11-01T01:21:56.500
> 
> 标签：jquery

我发现了这个过滤列表的很棒的 jquery 插件。

[jsFiddle](http://jsfiddle.net/2ugWd/1/)

这会过滤一个`li`具有一个 ID 的列表，但我有多个列表，我想在有人执行搜索时过滤所有这些列表。

有人可以帮我写代码吗？谢谢各位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T01:30:32.970

如果有人需要解决方案：

答案是我将 ID 更改为类，它过滤了所有类:)

# c - 设计服务器以提高性能的最佳方法是什么？

> ID：13169734
> 
> 赞同：1
> 
> 时间：2012-11-01T01:22:19.313
> 
> 标签：c, network-programming

我正在尝试创建一个我希望有高性能需求的服务器。这个问题涉及服务器核心。哪些编程思想最能支持快速性能？

1.  您是否将套接字拆分为不同的线程并在每个线程上调用阻塞 recv()？
2.  您是否有一个线程位于 select() 循环中，然后通知另一个线程处理各个端口？
3.  你有一个线程来处理 select() 和响应吗？
4.  你是做 2 个还是 3 个，但使用的是端口集群而不是所有端口？
5.  如果您使用上面指定的选择，使用阻塞与非阻塞端口是否重要？
6.  什么setsockopt 提高性能：TCP_NODELAY，其他？

我意识到其中一些取决于用例。例如，如果有很多小数据包，关闭 TCP_NODELAY 的 6 会产生负面影响。如果响应微不足道，3 听起来可能会更快。我还没有想到会影响性能的任何其他问题也将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T01:31:36.350

我将从单线程方法开始：使用非阻塞 I/O 和快速轮询机制，如 Linux 上的边缘触发 epoll。（其他平台也有类似的技术。）围绕轮询循环的所有内容可以极大地简化程序设计，所以我肯定也会在其中添加 signalfds、timerfds 和 eventfds。然后一切都由一个中央循环处理。

如果并且当您需要使用多线程时，这可能就像同时运行多次主循环一样简单。如果您将事件设置为“一次性”，它们将在轮询中被禁用，直到重新启动，因此处理事件的线程可以安全地假设是唯一这样做的线程（并在最后重新武装事件）。您只需要同步程序不同部分之间的通信，或共享数据访问，但轮询器已经处理了很多同步。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T02:19:03.800

在我看来，最简单的编码是每个连接使用阻塞 I/O 一个线程。使用您最喜欢的线程模型也很容易进行可移植的编写。

多路复用非阻塞 I/O 的问题是维护每个连接的状态。例如，我想写 1024 个字节，但`write`只消耗了 900 个……所以现在必须记住 124 个字节，以便以后再写。这只是原始“发送缓冲区”级别的状态；考虑整个协议的状态，它会很快变得复杂。当然，没有什么是不可能的，但是假设连接不需要相​​互交互（很多），只使用阻塞调用要简单得多。

我已将这种方法用于少量（约数十个）连接，并在一对 10GbE 链路上以每秒超过 1 GB 的速度移动数据。Linux 内核的调度程序非常擅长处理此范围内的线程数。

对于为成千上万的客户提供服务的 Web 服务器类型的东西......好吧，我没有亲自尝试过。我读过多路复用技术（`epoll`等）在这种情况下更快。正如其他人所说，这取决于您的应用程序。

但是，如果您的应用程序和我的一样（连接数量适中，它们之间的交互有限），那么“每个连接一个线程”的方法会胜出，IMO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T01:43:30.160

这取决于。

这类问题很难回答；这将是项目本身的角色之一。您将需要测量服务器在将要面临的工作负载下的性能，然后查看哪些选项最适合*您的*用例。

例如，设置 TCP_NODELAY 将减少请求的延迟，但该选项的存在是有原因的；您将通过设置 TCP_NODELAY 来降低吞吐量。

以下网站包含一些您应该查看的信息：http: [//www.kegel.com/c10k.html](http://www.kegel.com/c10k.html)。其中一些现在有点老了（几年前），但它包含了您应该考虑使用的技术列表：epoll、异步 I/O。

您应该着手以模块化方式设计您的系统，这样您的工作人员就不会被绑定到特定的实现（select/poll/epoll）。像 setsockopt 这样的东西以后可以很容易地改变，你根本不用担心它们。

先让它工作——然后让它“快”；无论您所说的“快速”是什么意思。如果你想要一些可扩展的东西，那么请注意你的算法的大 O（O(n)、O(n^2) ... 等）。

# clearcase - ClearCase SCM 适配器支持注释

> ID：13169735
> 
> 赞同：1
> 
> 时间：2012-11-01T01:22:22.373
> 
> 标签：clearcase, annotate

我想用版本历史注释一些代码。当使用 SVN 时，这在 Eclipse 中很容易，但 Rational ClearCase SCM Adapter 插件似乎不支持它。

我快速的谷歌搜索显示，在命令行上 ClearCase 支持通过以下方式进行注释： cleartool annotate -out - -fmt "%Vn |" -rm -nheader util.c

我还发现了一些支持注释的非免费插件。有没有免费的替代品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T01:45:48.697

这[`cleartool annotate`](https://stackoverflow.com/a/6826119/6309)是 ClearCase 唯一的注释形式（或“责备”），不能通过官方插件（ClearCase SCM 适配器或 CCRC 插件）获得

这就是为什么您会喜欢一些非免费选项，例如：

*   [注释插件](http://www.pluginsmithy.com/m/en/products/annotate-plugin.html)
*   [Visual Annotate](http://www.gomidjets.com/annotate.php)（根据他的作者[Tamir Gefen](https://stackoverflow.com/users/138479/tamir-gefen)的说法，很快就会有免费版本）
*   [FishEye & Crucible](http://www.pixsoftware.nl/nl/news/62-developer-tools/354-fisheye-and-crucible-22-released-now-with-git-and-clearcase)，尽管[2012 年 4 月 4 日停止使用 FishEye 2.8](https://confluence.atlassian.com/display/FISHEYE/End+of+Support+Announcement+for+IBM+ClearCase)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T23:30:57.210

在 Visual Studio 中，您可以将其设置为运行 cleartool 命令行选项（使用工具->外部工具...）。
好像eclipse也有类似的功能（“ [FAQ如何添加自己的外部工具？](http://wiki.eclipse.org/FAQ_How_do_I_add_my_own_external_tools?) ”）

```
Command: \installationpath\cleartool.exe
Arguments: annotate -nheader $(ItemPath)
Initial directory: $(ItemDir) 
```

创建文件后，您可以在您喜欢的编辑器中打开。

我只提到它是因为它可能是一种选择，因为它是免费的。
使用命令行会更容易，除非我的项目文件的大小写错误导致 cleartool 无法工作，我发现自己要么更新命令行，`.vcproj`要么使用命令行。

# google-maps - 可以在 Google Maps v3 中只为一个区域而不是整个地图制作样式地图吗？

> ID：13169740
> 
> 赞同：1
> 
> 时间：2012-11-01T01:23:04.337
> 
> 标签：google-maps, google-maps-api-3, google-maps-styled

我一直在阅读所有我能找到的东西，以了解如何做到这一点。看起来样式地图仅适用于整个地图，我找不到仅将其应用于某个多边形区域的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:52:02.357

我通过在地图上绘制多边形然后设置它的各种显示属性来完成它。你可以像我一样做。有多边形、圆形等。你甚至可以考虑使用热图。希望这是你所要求的。ScottE 提供的链接非常完美。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T01:27:31.293

使用样式化地图这是不可能的。您需要提供自己的叠加层。

该文档非常有用：[https ://developers.google.com/maps/documentation/javascript/overlays](https://developers.google.com/maps/documentation/javascript/overlays)

# android - Eclipse IDE - Android 图形布局和 XML 布局并排

> ID：13169743
> 
> 赞同：12
> 
> 时间：2012-11-01T01:23:24.400
> 
> 标签：android, eclipse, android-layout, adt

是否可以在 Android XML 布局旁边放置 Android 图形布局，以便我可以同时修改两者？更改 XML 并立即看到效果会好得多，而不是一直单击选项卡来更改它。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-01T02:32:31.317

是的，虽然我刚刚尝试过，但在图形布局编辑器中更改某些内容后它有一点延迟。

1.  打开您的布局文件，例如“activity_foo.xml”。
2.  选择菜单项“窗口 > 新编辑器”。这将为您提供相同布局的另一个编辑器。在此示例中，您将看到两个都有“activity_foo.xml”的选项卡。
3.  鼠标按下第二个选项卡，然后将其向右和向下拖动，直到您看到并排代表编辑器视图的两个矩形的轮廓，然后松开鼠标按钮。
4.  你现在有编辑器并排。通过选择相应的选项卡将一个置于图形布局模式，另一个置于 XML 模式。

请注意，图形布局似乎会不断更新 XML。但是，在您保存并再次单击图形编辑器之前，XML 中的更改似乎不会影响图形布局。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-28T03:36:25.340

我设法使代码立即更新图形布局并同时显示它们。

首先，我按照 louielouie 在他的回答中给出的步骤同时显示图形布局和 XML 代码，但这还不够。

然后，我单击 XML 文件的代码，然后单击图形布局。此时，我能够对 XML 文件进行更改，并且它们会立即显示在图形布局中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T17:12:46.277

像 louielouie 这样写的新编辑器，这样做的可能性会更好一些。

1) 从项目资源管理器中打开您的布局并以图形布局显示。2) 获取项目资源管理器，右键单击您的布局 3) 选择打开方式 -> XML EDITOR 4) 在底部，您可以在源和设计布局之间切换。5）抓住“标题”并将其放在图形布局的一侧。

简而言之，只需右键单击您的布局 -> 打开 -> xml 编辑器。

# symfony - Symfony2：控制器中动作/路由的完整路径

> ID：13169748
> 
> 赞同：23
> 
> 时间：2012-11-01T01:24:16.327
> 
> 标签：symfony, controller

我需要控制器内部操作的完整路径，以通过电子邮件发送。我怎样才能`{{ path('_route') }}`从我的控制器内部实现类似的东西，但完整的路径？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-01T02:50:22.987

如果您想要本地路径，Juan 的回答是正确的。绝对路径（有助于通过电子邮件发送）需要额外的参数：

```
$url = $this->generateUrl('your_route_name', array(), true); 
```

第三个参数表示要生成绝对路径。

如果你想在你的视图中使用这个 URL，只需`$url`在你的操作中添加到响应数组并使用它。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2016-08-08T07:49:05.767

**Symfony 3+**

```
use Symfony\Component\Routing\Generator\UrlGeneratorInterface;

$this->generateUrl('your_route_name', array('/* your route parameters */'), UrlGeneratorInterface::ABSOLUTE_URL); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T01:53:01.510

尝试以下操作：

```
$url = $this->generateUrl('your_route_name'); 
```

# android - 如何从editText的Spanned html中获取img标签

> ID：13169749
> 
> 赞同：2
> 
> 时间：2012-11-01T01:24:20.843
> 
> 标签：android, webview, android-edittext

我想从 editText 获取 HTML 标签。

将图像设置为 editText 代码如下。

```
String path = "images/sample.png";
Drawable drawable = Drawable.createFromStream(context.getAssets().open(path), null);
ImageGetter imageGetter = new ImageGetter() {
            @Override
            public Drawable getDrawable(String source) {
                drawable.setBounds(0, 0, mTextSize, mTextSize);
                return drawable;
            }
        };

        String img = "<img src=\"" + drawable.toString() + "\" />";

        Spanned spanned = Html.fromHtml(img, imageGetter, null);
        Log.i("HTML",spanned.toString());

        int start = this.getSelectionStart();
        int end = this.getSelectionEnd();

        this.getText().replace(Math.min(start, end), Math.max(start, end), spanned, 0, spanned.length()); 
```

如果我使用 editText.getText()，结果将被删除图像。

我想做以下事情：

```
String htmlTag = getHTML(); // I don't know this part.
myWebView.loadURL("javascript:setHTML(" + htmlTag + ")"); 
```

有人知道吗？

# android - 设置应用程序配置 *not* 用户配置

> ID：13169750
> 
> 赞同：0
> 
> 时间：2012-11-01T01:24:22.503
> 
> 标签：android

我已经开发了一个主应用程序，现在我需要开发第二个应用程序，它与第一个应用程序相同，但只执行 70% 的功能。我已经模块化了主应用程序的功能，但现在我希望能够根据配置文件打开/关闭它们。此配置文件中的值需要在活动和服务的上下文中可访问。很多人建议使用 SharedPrefences，但我不需要最终用户来修改它。它仅供开发人员配置这些设置。最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T04:39:51.657

现在在android中数据可以通过[这些方式存储](http://developer.android.com/guide/topics/data/data-storage.html)

现在您不想将配置存储在共享首选项中，所以我建议您采用两种方式创建两个应用程序都可以访问的 SQLite 数据库或创建一个存储配置数据并且两个应用程序都可以访问的文件

无论您选择哪种存储数据的方法，都可以使用类似这样的加密算法对其进行加密

```
private static byte[] encrypt(byte[] raw, byte[] clear) throws Exception {
    SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
    byte[] encrypted = cipher.doFinal(clear);
    return encrypted;
}

private static byte[] decrypt(byte[] raw, byte[] encrypted) throws Exception {
    SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.DECRYPT_MODE, skeySpec);
    byte[] decrypted = cipher.doFinal(encrypted);
    return decrypted;
  } 
```

并像这样调用它们：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();  
bm.compress(Bitmap.CompressFormat.PNG, 100, baos); // bm is the bitmap object   
byte[] b = baos.toByteArray();  

byte[] keyStart = "this is a key".getBytes();
KeyGenerator kgen = KeyGenerator.getInstance("AES");
SecureRandom sr = SecureRandom.getInstance("SHA1PRNG");
sr.setSeed(keyStart);
kgen.init(128, sr); // 192 and 256 bits may not be available
SecretKey skey = kgen.generateKey();
byte[] key = skey.getEncoded();    

// encrypt
byte[] encryptedData = encrypt(key,b);
// decrypt
byte[] decryptedData = decrypt(key,encryptedData); 
```

现在您可以使用密钥访问这些值，用户将无法理解您的配置信息

或者您可以使用 Web 服务将数据保存到服务器上，并且您的两个应用程序都可以使用该 Web 服务来获取配置，但它不会脱机工作:(

# ios - Microsoft Sync Framework Toolkit iPhone 示例 - 日期格式错误？

> ID：13169754
> 
> 赞同：0
> 
> 时间：2012-11-01T01:24:32.607
> 
> 标签：ios, sync, microsoft-sync-framework

我目前在示例中上传时遇到问题 - 不适用于以下错误消息“收到的日期时间值无效”。

它似乎在抱怨如何将日期格式化为字符串 - `yyyy-MM-ddTHH:mm:ss.SS`iPhone 示例代码最初是如何将其格式化为的，将其更改`yy-mm-ddTHH:mm:ss:SSS`为 HTML5 示例内联文档中所说的，以及其他一些格式，但没有运气。

什么是正确的格式？

* * *

这是我为使示例可用于下载部分所做的工作...

按照指示，我已更改 plist 文件中的 URI。

查看 HTML5 示例，我意识到 web 服务的 URL 格式错误，因此将它们更改如下..

```
 //self.uploadURL = [NSURL URLWithString:[NSString stringWithFormat:@"%@/DefaultScopeSyncService.svc/?syncScope=DefaultScope&operation=UploadChanges&userid=%@", self.baseURL, [anc valueForKey:@"userID"]]];
 self.uploadURL = [NSURL URLWithString:[NSString stringWithFormat:@"%@/DefaultScopeSyncService.svc/defaultscope/UploadChanges?userid=%@", self.baseURL, [anc valueForKey:@"userID"]]];     

 //self.downloadURL = [NSURL URLWithString:[NSString stringWithFormat:@"%@/DefaultScopeSyncService.svc/?syncScope=DefaultScope&operation=DownloadChanges&userid=%@", self.baseURL, [anc valueForKey:@"userID"]]];
 self.downloadURL = [NSURL URLWithString:[NSString stringWithFormat:@"%@/DefaultScopeSyncService.svc/defaultscope/DownloadChanges?userid=%@", self.baseURL, anc.userID]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T04:26:04.537

万一这对其他人有帮助...

找到有效的格式。 `yyyy-MM-ddTHH:mm:ss.SSSSSSS`
时间格式转换似乎在 Formatters/FormatterUtilities.cs 文件中完成

# flash - Flash Builder 4.5 使用完全错误的右花括号

> ID：13169756
> 
> 赞同：2
> 
> 时间：2012-11-01T01:24:42.470
> 
> 标签：flash, actionscript, flash-builder

这就是问题所在。出于某种奇怪的原因，Flash Builder 决定将我的 if 语句的右花括号之一用于其他内容。它已经决定它想要那个花括号来关闭我的课程。反过来，这会破坏它下面的所有内容，因为我的私有变量或方法都不可用。这里有条件...

```
if (!!_VOArray[0].length && !!_VOArray[1].length) {
  for (var i:uint = 0; i < _VOArray.length; i++) {
    if (!!_VOArray[1][i] && !!_VOArray[0][i].imageURL) {
      _VOArray[1][i].imageURL = _VOArray[0][i].imageURL;
      if (_VOArray[1][i].product == '') {
        _VOArray[1][i].product = _VOArray[0][i].product;
      }
    }
  }
} 
```

如果我对此发表评论，一切都会顺利进行。现在，该文件说最里面的条件的右花括号是正确的。然而，围绕那个的包装 if 语句正在关闭我的整个类文件。

想法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-05T16:49:07.807

Adobe文档没有运算符`!!`（@Amy Blnkership），您正在尝试测试“反值的反值”所以..然后删除。

也许 Flash Builder 有一些怪癖，他有一些怪癖，像这样：

[http://goto0.cubelogic.org/a/205](http://goto0.cubelogic.org/a/205)

你试过这个吗？：

```
if (!!_VOArray[0].length && !!_VOArray[1].length) {
  for (var i:uint = 0; i < _VOArray.length; i++) {
    if (!!_VOArray[1][i] && !!_VOArray[0][i].imageURL) {
      _VOArray[1][i].imageURL = _VOArray[0][i].imageURL;
      if (_VOArray[1][i].product == '') _VOArray[1][i].product = _VOArray[0][i].product;
    }
  }
} 
```

# html - 从 HTML 重定向已弃用？

> ID：13169761
> 
> 赞同：5
> 
> 时间：2012-11-01T01:25:28.277
> 
> 标签：html, redirect, deprecated

我听说我从 HTML 页面重定向的常用方式，比如

```
<meta http-equiv="REFRESH" content="0;url=page.html"> 
```

已被最新的 HTML 弃用。是真是假，如果是这样，还有什么其他的重定向方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T02:09:55.350

重定向的正确方法是发送重定向[标头](http://net.tutsplus.com/tutorials/other/http-headers-for-dummies/)。您需要将 status 从更改`200 OK`为适当的[3xx status](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#3xx_Redirection)。然后你还需要包含`Location: http://yourRedirectURL`标题。实现取决于您在后端使用的编程语言。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T01:28:11.303

假设您只是使用零超时，则使用`Location`标题既是无缝的，也是将某人重定向到另一个页面的更有效方式。

除非您先将它们放在着陆页上，然后再重定向它们，否则请使用 Location 标头。

我还应该注意，位置标头指定它应该提供一个完全限定的地址以登陆，而不是使用基于站点的绝对或相对路径。例如

```
Location: http://www.google.com/ 
```

代替：

```
Location: /login
Location: ../../home 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T02:06:15.733

如果您使用的是 php，则可以使用以下代码（在任何其他输出到浏览器之前）：

```
<?php header('Location: http://example.com'); ?> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-01T06:25:54.510

它在技术上没有被弃用，但这只是因为伪术语“弃用”在“规范”中被草率地使用。[元重定向机制在 HTML 4.01 中](http://www.w3.org/TR/REC-html40/struct/global.html#adef-http-equiv)被描述为“不应该” ：

“笔记。一些用户代理支持使用 META 在指定的秒数后刷新当前页面，并可以选择用不同的 URI 替换它。作者不应使用此技术将用户转发到不同的页面，因为这会使某些用户无法访问该页面。相反，应该使用服务器端重定向来完成自动页面转发。”</p>

尽管 HTML5 草案[描述](http://www.w3.org/TR/html5/the-meta-element.html#pragma-directives)了元刷新机制，但没有说明这些内容，尽管这些示例是关于不同的用途。这并没有使它成为更好的主意。它不应用于将地址重定向到新地址，除非您无法影响服务器行为以便进行适当的 HTTP 重定向。在这种情况下，建议将新地址的正常链接添加到文档正文中，以应对元重定向不起作用的情况。

# sql - 由于更新冲突而触发审核表失败

> ID：13169764
> 
> 赞同：4
> 
> 时间：2012-11-01T01:26:06.957
> 
> 标签：sql, sql-server

我有许多通过我的应用程序更新的表，它们返回大量数据或难以查询更改。为了解决这个问题，我创建了一个带有单行的“LastUpdated”表，并在这些复杂表上设置了一个触发器，它只针对 LastUpdated 表中的相应列设置 GetDate()：

```
CREATE TRIGGER [dbo].[trg_ListItem_LastUpdated] ON [dbo].[tblListItem] 
FOR INSERT, UPDATE, DELETE 
AS
UPDATE LastUpdated SET ListItems = GetDate()
GO 
```

这样，客户端只需查询该表的最后更新值，然后就可以决定是否需要从复杂表中刷新数据。复杂表使用快照隔离来防止脏读。

在繁忙的系统中，由于“LastUpdated”中的更新冲突，我们每天大约会遇到一次在复杂表中写入或更新数据的错误。因为这发生在触发器执行的语句中，所以受影响的复杂表无法保存数据。记录以下错误：

> 由于更新冲突，快照隔离事务中止。您不能使用快照隔离直接或间接访问数据库“devDB”中的表“dbo.tblLastUpdated”来更新、删除或插入已被另一个事务修改或删除的行。重试事务或更改更新/删除语句的隔离级别。

我应该在触发器中做什么来防止这种失败？我可以在触发器上使用某种查询提示来避免这种情况 - 还是我可以忽略触发器中的错误？更新 LastUpdated 中的数据并不重要，但将数据正确保存到复杂表中才是关键。

这可能是我忽略或不知道的非常简单的事情。一如既往，感谢您提供任何信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:14:50.870

我想说你应该考虑使用`Change Tracking`（[http://msdn.microsoft.com/en-gb/library/cc280462%28v=sql.100%29.aspx](http://msdn.microsoft.com/en-gb/library/cc280462%28v=sql.100%29.aspx)），这是你可以使用的轻量级内置 SQL Server 功能监视表已更改的事实，而不是记录每个单独的更改（您也可以使用`Change Data Capture`）。它需要您已经在使用的快照隔离。

因为您的触发器正在您的父事务中运行，并且您的快照已过期，所以您的整个事务需要重新开始。如果这是一个复杂的工作负载，那么以这种方式维护最后更新的数据将会很昂贵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T05:22:16.897

简短的回答 - 不要那样做！使更新的事务依赖于单个共享行使其容易出现死锁和更新冲突，整个范围都是令人讨厌的事情。

您可以使用视图来确定上次更新，例如：

```
SELECT
    t.name
    ,user_seeks
    ,user_scans
    ,user_lookups
    ,user_updates
    ,last_user_seek
    ,last_user_scan
    ,last_user_lookup
    ,last_user_update
FROM sys.dm_db_index_usage_stats i JOIN sys.tables t 
    ON (t.object_id = i.object_id)
WHERE database_id = db_id() 
```

或者，如果您真的坚持使用**LastUpdate的解决方案，您可以在****自治事务**中从触发器实现它的更新。即使 SQL Server 不支持自治事务，它也可以使用喜欢的服务器来完成：[如何在 SQL Server 2008 中创建自治事务](http://blogs.msdn.com/b/sqlprogrammability/archive/2008/08/22/how-to-create-an-autonomous-transaction-in-sql-server-2008.aspx "如何在 SQL Server 2008 中创建自治事务")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T13:33:36.333

架构需要改变。如果您必须保留更新表，请为每个表创建一行。这将大大减少您的锁，因为每个表都可以更新自己的行，而不是竞争表中的唯一行。

### 最近更新时间

```
table_name (varchar(whatever)) pk
modified_date (datetime) 
```

### 新触发器`tblListItem`

```
CREATE TRIGGER [dbo].[trg_ListItem_LastUpdated] ON [dbo].[tblListItem] 
FOR INSERT, UPDATE, DELETE 
AS
UPDATE LastUpdated SET modified_date = GetDate() WHERE table_name = 'tblListItem'
GO 
```

我经常使用的另一个选项是在每个表中都有一个 modified_date 列。然后人们确切地知道要更新/插入哪些记录以与您的数据同步，而不是在每次更改或插入一条记录时删除和重新加载表中的所有内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T05:53:49.317

或者，您可以在用于更新应用程序中的复杂表的同一事务中更新日志表，并完全避免触发。

**更新** 您还可以选择插入新行而不是更新`LastUpdated`表中的同一行。然后，您可以查询最大时间戳以获取最新更新。但是，使用这种方法，您的`LastUpdated`表每天都会增长，如果交易量很高，您需要注意这一点。

# javascript - 如何使输入按钮（键盘）在 IE8 的表单中正常工作？

> ID：13169767
> 
> 赞同：2
> 
> 时间：2012-11-01T01:26:38.737
> 
> 标签：javascript, html, forms, internet-explorer, enter

该问题仅发生在 Internet Explorer 中。在任何其他浏览器中，我可以通过在键盘上按 Enter 来提交表单，在 IE8 中，我必须实际单击按钮。

我搜索了一段时间的修复程序，发现了一些东西，但它仍然无法正常工作。我正在使用的 javascript 应该寻找 keycode 13，它是 enter，但是当我点击 enter 时，该字段会自行清除而不提交表单，并且不会触发 keycode。keycode 的东西只返回字母的结果，而不是 shift/enter。

这是我当前解决方案的 HTML：

```
 <form action="chatscreen.php" name="loginform" method="post"> 
        <p>Please enter your name to continue:</p> 
        <label for="name">Name:</label> 
          <input type="text" name="name" id="name" onkeyup="whichButton("loginform","enter")"/> 
        <button type="submit" name="enter" id="enter" value="Enter">Button</button>
    </form> 
```

这是我尝试实现的 javascript 作为修复：

```
 <script type="text/javascript">
    function whichButton(formname,elementname) {
    alert("got a key = " + event.keyCode);
    if (event.keyCode === 13) {
    var followingInput = document.getElementById(elementname);
    document.formname.elementname.click();
    }
    }
 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:43:23.467

简单的; 只需设置您的 defaultbutton 属性

```
 <form id="Form1" defaultbutton="enter" action="chatscreen.php" name="loginform" method="post"> 
```

希望有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:38:17.903

```
<script type="text/javascript">
    function whichButton(formname,elementname) {
       var keyID = (window.event) ? event.keyCode : keyEvent.keyCode;
       if (keyID === 13) {
          var followingInput = document.getElementById(elementname);
          document.formname.elementname.click();
       }
    }
 </script> 
```

# c - perlembed/perlcall 示例无限内存增长 - valgrind 表示不可能发生泄漏

> ID：13169768
> 
> 赞同：1
> 
> 时间：2012-11-01T01:26:41.787
> 
> 标签：c, perl, xs

全部。一段时间以来，我一直在努力解决这个问题……我正在尝试整理一个基本上是 perlembed + perlcall 的示例，并且或多或少地从 evpsgi 中“借用”了它。问题是每 1000 次迭代它的大小就会增长大约 1MB。在长期运行的进程（这是我正在使用的用例）中运行时，这并不是最好的情况。

正如标题所述，如果我使用 valgrind 运行，它会报告没有泄漏的可能。我用 --trace-malloc=yes 运行，似乎只有在大量调用中最后才调用 free 。我知道这可能是 perl 的 MO，但如果它至少重新使用内存并且在操作系统终止进程之前不会增长，那就太好了。

sv_2mortal 的条目提到了一些关于缓冲区可被“窃取”的内容，但我已经在代码中添加了对 sv_2mortal 的调用，但没有任何变化。

事不宜迟，这里是代码。请原谅它的货物崇拜。提前致谢！

```
/*
 *
 * cc `perl -MExtUtils::Embed -e ccopts -e ldopts` -Wall -ggdb test_perl_2.c -o test_perl_2
 *
 * # test.psgi
 * use strict;
 * use warnings;
 * my $app = sub  {
 *     return [ 200, [ test => 1 ], [ sprintf( "%d: Hello!!! from %s\n", $$, __FILE__ ) ] ];
 * };
 *
 */

#include <stdio.h>
#include <EXTERN.h>               /* from the Perl distribution     */
#include <perl.h>                 /* from the Perl distribution     */

static PerlInterpreter *perlinterp;  /***    The Perl interpreter    ***/
static SV *app;

void do_stuff( void );
SV * get_stuff( void );
SV * call_stuff( SV * );

EXTERN_C void xs_init( pTHX );
EXTERN_C void boot_DynaLoader (pTHX_ CV* cv);
EXTERN_C void xs_init( pTHX ) {
    char *file = __FILE__;
    dXSUB_SYS;
    /* DynaLoader is a special case */
    newXS("DynaLoader::boot_DynaLoader", boot_DynaLoader, file);
}

int main( int argc, char **argv, char **env ) {
    char code[ 1024 ];
    char psgi[] = "test.psgi";
    char *embedding[] = { "", "-e", "0" };

    PERL_SYS_INIT3( &argc, &argv, &env );
    perlinterp = perl_alloc();
    PERL_SET_CONTEXT( perlinterp );
    perl_construct( perlinterp );
    perl_parse( perlinterp, xs_init, 3, embedding, (char **)NULL );
    PL_exit_flags |= PERL_EXIT_DESTRUCT_END;

    sprintf( code, "do '%s' or die $@", psgi );
    app = eval_pv( code, TRUE ); /* croak_on_error */

    do_stuff();

    PL_perl_destruct_level = 1;
    perl_destruct( perlinterp );
    perl_free( perlinterp );
    PERL_SYS_TERM();
    return 0;
}

void do_stuff( void ) {
    int body_lastindex, i, count;
    AV *response_av, *body_av;
    SV *stuff_sv, *response_sv, *status, *tmp_body_sv, *body_sv;

//  count = 10000;
    count = 10;
    while( count-- ) {

        ENTER;
        SAVETMPS;

        stuff_sv = get_stuff();
        response_sv = call_stuff( stuff_sv );

        if(
            NULL == response_sv ||
            ! SvROK( response_sv ) ||
            SvTYPE( SvRV( response_sv ) ) != SVt_PVAV
        ) {
            printf( "NULL == response_sv\n" );
            goto CLIENT_END;
        }

        response_av = (AV *)SvRV( response_sv );

        status = *av_fetch( response_av, 0, 0 );
        printf( "status = %ld\n", (long)SvIV( status ) );

        body_av = (AV *)SvRV( *av_fetch( response_av, 2, 0 ) );

        body_sv = newSV( 0 );

        body_lastindex = av_len( body_av );
        for( i = 0; i <= body_lastindex; i++ ) {
            tmp_body_sv = (SV *)*av_fetch( body_av, i, 0 );
            if( SvOK( tmp_body_sv ) ) {
                sv_catsv( body_sv, tmp_body_sv );
            }
        }
        printf( "body_sv = %s\n", SvPV_nolen( body_sv ) );

CLIENT_END:
        FREETMPS;
        LEAVE;
    }
}

SV * get_stuff( void ) {
    HV *stuff_hv;
//    stuff_hv = (HV *)sv_2mortal((SV *)newHV());
    stuff_hv = newHV();

    if( NULL == hv_store( stuff_hv, "SCRIPT_NAME", strlen( "SCRIPT_NAME" ), newSVpv( "", 0 ), 0 ) ) {
        croak( "hv_store( 'SCRIPT_NAME' )" );
    }

    if( NULL == hv_store( stuff_hv, "REQUEST_METHOD", strlen( "REQUEST_METHOD" ), newSVpv( "GET", 3 ), 0 ) ) {
        croak( "hv_store( 'REQUEST_METHOD' )" );
    }

    if( NULL == hv_store( stuff_hv, "REQUEST_URI", strlen( "REQUEST_URI" ), newSVpv( "/abc?def", 8 ), 0 ) ) {
        croak( "hv_store( 'REQUEST_URI' )" );
    }

    if( NULL == hv_store( stuff_hv, "PATH_INFO", strlen( "PATH_INFO" ), newSVpv( "/abc", 4 ), 0 ) ) {
        croak( "hv_store( 'PATH_INFO' )" );
    }

    if( NULL == hv_store( stuff_hv, "QUERY_STRING", strlen( "QUERY_STRING" ), newSVpv( "def", 3 ), 0 ) ) {
        croak( "hv_store( 'QUERY_STRING' )" );
    }

    return newRV_inc( (SV *)stuff_hv );
}

SV * call_stuff( SV *stuff_sv ) {
    SV *response_sv;
    int count;

//  printf( "REQUEST_URI = %s\n", SvPV_nolen( *hv_fetch( (HV *)SvRV( stuff_sv ), "REQUEST_URI", strlen( "REQUEST_URI" ), 0 ) ) );

    dSP;
    ENTER;
    SAVETMPS;
    PUSHMARK( SP );
    XPUSHs( stuff_sv ); // stuff_sv is not mortal.
    PUTBACK;
    count = call_sv( app, G_EVAL | G_SCALAR | G_KEEPERR );
    SPAGAIN;
    if( SvTRUE( ERRSV ) ) {
        response_sv = NULL;
        fprintf( stderr, "FATAL: %s", SvPV_nolen( ERRSV ) );
        /* CLEAR_ERRSV() is only available 5.8.9 or later */
        if( SvMAGICAL( ERRSV ) ) {
            mg_free( ERRSV );
            mg_clear( ERRSV );
        }
        sv_setpvn_mg( ERRSV, "", 0 );
        POPs; // causes "warning: value computed is not used"
    }
    else if( count > 0 ) {
        response_sv = POPs; // is this mortal?
        SvREFCNT_inc( response_sv );
    } else {
        response_sv = NULL;
    }

    PUTBACK;
    FREETMPS;
    LEAVE;
    return response_sv;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T01:50:11.167

你不释放任何东西！你从 Perl 得到一个标量，然后你自己创建了两个，但没有一个被释放。

## 泄漏 1

你有：

```
HV *stuff_hv;
stuff_hv = newHV();
return newRV_inc( (SV *)stuff_hv ); 
```

有两个问题：

*   您正在创建一个 refcnt 为 2 的 HV。

    更改`newRV_inc`为`newRV_noinc`。

*   你永远不会释放它（或者作为凡人从 XS 函数中返回它）。

    完成后使用`SvREFCNT_dec( stuff_sv )`，也许在调用`call_stuff`.

## 泄漏 2

你有：

```
body_sv = newSV( 0 ); 
```

同样，该标量没有相应的释放。你需要

```
SvREFCNT_dec( body_sv ); 
```

之后`printf`。

## 泄漏 3

你有：

```
response_sv = POPs; // is this mortal?
SvREFCNT_inc( response_sv ); 
```

它是否会死并不重要。如果它是，您需要声明它的所有权，所以它`inc`是合适的。但是当你完成它时，你必须稍后释放它。

```
 SvREFCNT_dec( response_sv ); 
```

# asp.net - asp.net 在插入表之前检查主键是否存在

> ID：13169769
> 
> 赞同：0
> 
> 时间：2012-11-01T01:26:44.507
> 
> 标签：asp.net, sql, insert, primary-key

寻找一种简单的方法来检查表中是否已存在主键，然后再将其插入表中。其中 Fname 是表中的主键。

```
SqlConnection conn = new SqlConnection(connStr);
conn.Open();
SqlCommand cmd = new SqlCommand();
cmd.Connection = conn;
cmd.CommandText = "INSERT INTO [table] ([firstName], [lastName]) VALUES ('" + txtFName.Text + "','" + txtLName.Text + "')";        

cmd.ExecuteNonQuery();
conn.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T01:41:03.763

作为一般规则，您应该尝试插入。如果它们的键存在，则 dbms 将返回错误。捕获该错误。

无论如何，您都必须捕获错误，因为除了主键约束之外还有很多事情可以阻止插入行。其中

*   任何其他类型的约束，如外键约束、检查约束等。
*   磁盘错误。
*   网络错误。
*   飓风。

捕获错误不会失去任何效率。

*   插入（无错误）需要往返数据库。
*   插入（有错误，您捕获）需要往返数据库，不计算您可能需要做的任何事情来纠正该错误。无论如何，如果您先检查，则必须进行所有更正。
*   Check-then-insert 需要两次往返数据库。

如果您尝试插入已经存在主键的行，某些平台可以合并数据。最著名（或最臭名昭著，取决于您的观点）是[MySQL 的 ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.6/en/insert-on-duplicate.html)。

# android - 如何检查麦克风是否已准备好在 Android 中使用

> ID：13169771
> 
> 赞同：1
> 
> 时间：2012-11-01T01:26:45.257
> 
> 标签：android, audio-recording

我有媒体记录，我需要检查麦克风是否可以使用。现在，我可以运行默认录音机并启动我的应用程序。结果，我的应用程序无法访问麦克风，我无法捕捉到这种情况。

当麦克风准备好使用时，您是否知道一些捕捉情况的技巧？

```
11-01 09:36:34.690: ERROR/NvAudioALSAControl(8901): Control 'DRC Switch' cannot get 

element info: -2
11-01 09:36:34.690: ERROR/NvAudioALSAControl(8901): Control 'Left Input PGA Volume' cannot get element info: -2
11-01 09:36:34.690: ERROR/NvAudioALSAControl(8901): Control 'Right Input PGA Volume' cannot get element info: -2
11-01 09:36:34.690: ERROR/NvAudioALSAControl(8901): Control 'Digital Capture Volume' cannot get element info: -2
11-01 09:36:34.690: ERROR/NvAudioALSAControl(8901): Control 'HPF Mode' cannot get element info: -2
11-01 09:36:34.790: ERROR/NvAudioALSAControl(8901): Control 'DRC Switch' cannot get element info: -2
11-01 09:36:34.790: ERROR/NvAudioALSAControl(8901): Control 'Left Input PGA Volume' cannot get element info: -2
11-01 09:36:34.790: ERROR/NvAudioALSAControl(8901): Control 'Right Input PGA Volume' cannot get element info: -2
11-01 09:36:34.790: ERROR/NvAudioALSAControl(8901): Control 'Digital Capture Volume' cannot get element info: -2
11-01 09:36:34.790: ERROR/NvAudioALSAControl(8901): Control 'HPF Mode' cannot get element info: -2 
```

# c# - gdi+ 解码有效 jpeg 中的一般错误

> ID：13169779
> 
> 赞同：0
> 
> 时间：2012-11-01T01:27:43.753
> 
> 标签：c#, winforms, windows-8, gdi+

我有一个从相机拍摄的有效 jpeg 帧：

[http://www.developerinabox.com/test.jpg](http://www.developerinabox.com/test.jpg)

我正在使用以下（示例）代码加载它：

```
using System.Net;
using System.Drawing;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {

            WebRequest req = WebRequest.Create("http://www.developerinabox.com/test.jpg");
            req.Timeout = 5000;
            WebResponse resp = null;

            resp = req.GetResponse();
            if (resp != null)
            {
                var s = resp.GetResponseStream();
                if (s != null)
                {
                    Image img = Image.FromStream(s); //<-- Error thrown here
                }
            }

        }
    }
} 
```

在 Windows XP/Vista/7 中这工作正常。

在 Windows 8 中，它因“gdi+ 中的一般错误”而失败，我尝试通过 WPF 加载它，结果相同。

我可以在我的 Windows 8 PC 上用谷歌浏览器显示图像，但不能在 IE 中显示。它将同时显示在 Windows XP/Vista/7 上。

我可以在 Fireworks 中的 Windows 8 盒子上打开它，但尝试在油漆中打开它会给我：

“这不是一个有效的位图文件，或者它的格式目前不受支持。”

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T03:28:37.510

实际上，**它是无效的 JPEG 图像**，但正如您所见，许多应用程序可以无缝解码此图像。此 JPEG 图像有一个虚假的 SOS 标记（抱歉提供技术信息），此**扫描标头**(SOS) 表示此图像具有 1 个颜色分量，但**帧标头**(SOF，出现在 JPEG 文件结构中的 SOS 之前) 声称这是一个**3 个**组件的图像。

因此，**Scan 标头**的信息少于所需的信息，但可以将缺失的信息替换为默认值，并且 JPEG 图像应该被毫无问题地解码，这正是正在发生的事情。缺少的信息是霍夫曼表索引，这些索引的默认集可以基于 JPEG 编码类型（顺序、渐进或无损）来假设。

嗯，在JPEG解码方面，Win8似乎更严格。如果您好奇，您可以查看我为另一个 JPEG 相关问题上传的[代码](https://stackoverflow.com/a/13133340)（它在 VB.NET 中编码），您可以对其进行调试以了解问题所在（您也应该检查 JPEG 规范）。

* * *

**编辑：** *毕竟这是一个有效的 JPEG 图像*

此 JPEG 是基线**多扫描顺序**图像（类似于*平面*图像），不要与*逐行*图像（类似于*隔行*图像）混淆。因此，此 JPEG 具有较小的**Scan 标头**，因为图像一次解码一个组件。因此，该文件有 3 个不连续的*扫描头*( `SOS for 1st component, compressed data, SOS for 2nd component, compressed data,...`)，每个*扫描头*都有单个组件的信息。
最后，如果问题是不完整或伪造的*扫描标头*，则有一种解决方法（您可以修复伪造的 SOS 标头），但事实并非如此。因此，您可以向 MS 人员提出请求，寻求支持*Win8 上的多扫描顺序*JPEG 图像 ;-) 或使用一些第三方 JPEG 解码库。

# xml - 将 DOM 序列化为 XML 文本文件的算法是什么？

> ID：13169780
> 
> 赞同：0
> 
> 时间：2012-11-01T01:28:08.590
> 
> 标签：xml, algorithm, dom, xml-serialization, tree-traversal

例如

树：

```
 A
A1     A2 
```

序列化为 xml：

```
<A> <A1> </A1> <A2> </A2> </A> 
```

似乎根优先遍历（前序）或根最后遍历（后序）都不足以实现这一点。

这样做的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T01:42:14.720

答案主要取决于您如何定义“好”。

无论是预购还是后购都不是很好。严格应用时，它们要求在处理子项之前/之后对根进行*完全*处理。在这种解释中，两者都要求您在内存中构建字符串，例如（后序）：

```
function process(item)
{
    text=""
    foreach(child in children)
        text=text+process(child)
    return startTag(item)+text+endTag(item)
} 
```

更好的解决方案是流式传输：

```
function process(item,stream)
{
    startTag(item,stream)
    foreach(child in children)
        process(child,stream)
    write endTag(item,stream)
} 
```

这里 startTag 和 endTag 不返回字符串，而是尽快将其部分写入流。

# javascript - 任何 Javascript/Jquery 库来验证 SQL 语句？

> ID：13169783
> 
> 赞同：11
> 
> 时间：2012-11-01T01:28:23.353
> 
> 标签：javascript, jquery, mysql, sql

我的项目中有一个文本区域，用户可以在其中保存 SQL 查询，但要求之一是检查此查询是否有效

**例子**

如果用户输入类似：

```
SELECT ** FROM EMP 
```

这应该返回 false 和一条错误消息，只是说它`invalid`不必给出任何理由

主要是查询将只是`select`陈述

*注意* 我此时不想使用任何服务器端

**问题**

有谁知道具有此功能或任何类似功能的 javascript / jquery 库或插件

我有谷歌这个，它没有显示任何东西

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T02:12:29.503

[这是使用JS SQL Parser](https://github.com/forward/sql-parser)的示例小提琴：

[http://jsfiddle.net/Hb6az/](http://jsfiddle.net/Hb6az/)

如果遇到意外情况，解析器将抛出错误，因此您必须将检查代码包装在一个`try {} catch(error) {}`块中。

# c++ - 不完整类型不允许错误

> ID：13169785
> 
> 赞同：2
> 
> 时间：2012-11-01T01:28:50.850
> 
> 标签：c++, visual-studio-2010, visual-c++, opengl

我使用openGL创建了一个显示标签（GameLabel）的类，我遇到了2个非常奇怪的错误，我无法解决。

错误 C2079：'displayPlayer' 使用未定义的类 'GameLabel' IntelliSense：不允许不完整的类型

这是我的代码；

Game.cpp 中调用标签类的函数

```
void Game::draw(SDL_Window *window)
{
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); // clear window

// draw player
glColor3f(1.0,1.0,1.0);
glBegin(GL_POLYGON);
  glVertex3f (xpos, ypos, 0.0); // first corner
  glVertex3f (xpos+xsize, ypos, 0.0); // second corner
  glVertex3f (xpos+xsize, ypos+ysize, 0.0); // third corner
  glVertex3f (xpos, ypos+ysize, 0.0); // fourth corner
glEnd();
GameLabel displayPlayer = new GameLabel(xpos+(xsize/2.0f), ypos+ysize, "Player");
//The ablove line is the one flagging the errors. 
```

现在这里是 GameLabel.h。

```
#include <SDL_ttf.h>
#include <GL/glew.h>
#include <string>
#include "Game.h"
class GameLabel
{
public:
    GameLabel(float fx, float fy, char stri);
~GameLabel(void);
void textToTexture(const char * str,  SDL_Surface* stringImage);
void draw(SDL_Surface* stringImage);
friend class Game;

protected:
SDL_Surface stringImage;
private:
GLuint texID;
GLuint height;
GLuint width;
GLfloat x;
GLfloat y;
char str;
}; 
```

最后是 GameLabel.cpp 构造函数

```
GameLabel::GameLabel(float fx, float fy, char stri)
{
x = fx;
y = fy;
str = stri;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T01:34:48.263

可能是由于循环依赖吗？GameLabel 包含 game.h .. 并且游戏似乎也依赖于 gamelabel，Game.h 是否包含 gamelabel.h？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T01:46:22.890

在所有 .h 文件的最顶部写下：

```
#ifndef YOUR_FILE_NAME_H_
#define YOUR_FILE_NAME_H_ 
```

这在最底部：

```
#endif 
```

将 YOUR_FILE_NAME_H_ 替换为您所在的 .h 文件名，最好使用大写字母。

这将防止头文件被多次包含。

# c# - 字段的使用类似于 C# Visual Studio 类型

> ID：13169787
> 
> 赞同：-3
> 
> 时间：2012-11-01T01:29:04.390
> 
> 标签：c#, visual-studio-2010

这是存储数组的基本方法。然而，以下错误不断出现：

```
 The first error: TelephoneNumbers.TelephoneNumbersFileReader.inputFile is a field but
                   is used like a type
 The second error: System.IO.File.OpenText is a method but is used like a type

     namespace TelephoneNumbers
     {

     class TelephoneNumbersFileReader

     {
         public void storeArray();

         const int SIZE = 7;
         string [] AllPhoneDetails = new string [SIZE]; 

         int index = 0;

         StreamReader inputFile;

         inputFile = File.OpenText("TelephoneNumbers.txt")

     }

 } 
```

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T01:32:03.210

*   您不能声明像`public void storeArray();`. 它不能有`;`.
*   该方法的内容需要被包裹在`{`/ `}`s 中。
*   `inputFile = File.OpenText("TelephoneNumbers.txt")`需要 a`;`在行尾。

这样就变成了：

```
namespace TelephoneNumbers
{
    class TelephoneNumbersFileReader
    {
        public void storeArray()
        {
            const int SIZE = 7;
            string[] AllPhoneDetails = new string[SIZE];

            int index = 0;

            StreamReader inputFile;

            inputFile = File.OpenText("TelephoneNumbers.txt");
        }
    }
} 
```

# linq - LINQ for SQL Server CE 中的日期时间逻辑

> ID：13169788
> 
> 赞同：1
> 
> 时间：2012-11-01T01:29:04.483
> 
> 标签：linq, entity-framework, sql-server-ce

我的对象“工作”具有`LastTimeFinishedRunning`哪个是`DateTime`，`RunIntervalMinutes`哪个是`int`. 我需要将它们加在一起并与当前时间进行比较。

像这样的东西：

```
Job jobToRun = ctx.Jobs.Where
(job => DateTime.Now > Job.LastTimeFinishedRunning.Add(TimeSpan.FromMinutes(job.RunIntervalMinutes))).FirstOrDefault(); 
```

好吧，这`.Add()`当然行不通....

两者都不起作用：

```
DateTime.Now > EntityFunctions.AddMinutes(job.LastTimeFinishedRunning, job.RunIntervalMinutes) 
```

或这个：

```
DateTime.Now > System.Data.Objects.SqlClient.SqlFunctions.DateAdd("minute", job.RunIntervalMinutes, job.LastTimeFinishedRunning) 
```

...因为它是 SQL Server CE 提供程序

有什么建议么？谢谢。

**更新：**

我想我在这里唯一的选择是通过在 DB中`LastTimeFinishedRunning`切换`DateTime`来存储刻度。`long`所以代码看起来像这样：

```
long ticks = DateTime.Now.Ticks;
Job jobToRun = ctx.Jobs.Where
(job => ticks > Job.LastTimeFinishedRunning + job.RunIntervalMinutes * 1000 * 10000).FirstOrDefault(); 
```

# javascript - 仅当类名 == x 时才加载 ajax

> ID：13169790
> 
> 赞同：1
> 
> 时间：2012-11-01T01:29:15.693
> 
> 标签：javascript, jquery, ajax, class, if-statement

我编写了以下代码，希望仅在内容尚未加载到 div 时才加载 ajax。基本上，当我使用 ajax 加载内容并根据当前加载的内容为内容赋予类名时。如果当前类名是div中已经加载的内容，那么我就不加载ajax，否则用ajax加载内容。

现在，无论 div 的类名是什么，ajax 请求都会触发。知道为什么这不起作用吗？

这是网站：（点击左眼）

[http://www.uvm.edu/~areid/homesite/index.html](http://www.uvm.edu/~areid/homesite/index.html)

这是javascript函数：

```
else if(id =='left-eye23')
                    {       
                        leftcontent = $("#left-content");                       
                        content = leftcontent.attr('class');
                        if(content !== 'photos')
                        {       
                            alert("content is not photos"); 
                            SlideOut(move);
                            $("#relativeContainer").css('z-index','-1');
                            var leftcontent;
                            $("#left").bind("webkitTransitionEnd mozTransitionEnd oTransitionEnd msTransitionEnd transitionend", 
                            function(){ 
                                $.ajax({
                                url:'photos.php',
                                beforeSend: function(){
                                    leftcontent.html('<img src="loading.gif" /> Now loding...');
                                },
                                }).done(function(data){
                                    leftcontent.html(data);
                                    leftcontent.addClass("photos");
                                }); 
                                });
                            }
                        else if(content == 'photos')
                        {
                            SlideOut(move); 
                            $("#relativeContainer").css('z-index','-1');
                            alert('content is photos');
                        }

                    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T01:33:36.643

使用 jQuery 验证类的最佳方法是通过[`.hasClass()`](http://api.jquery.com/hasClass/). 如果元素有多个类，它将无法正确匹配`.attr()`您正在使用的相等测试。

```
// If it doesn't have the class 'photos', do your AJAX call
if( !$("#left-content").hasClass('photos'))
{       
   alert("content is not photos"); 
  SlideOut(move);
 $("#relativeContainer").css('z-index','-1');
 // Then do the AJAX, etc...
}
// Otherwise do the other stuff...
// Unless you have another case not shown in your code above,
// this can just be a plain else {} rather than the else if {}
else if ($("#left-content").hasClass('photos'))
{
  SlideOut(move); 
  $("#relativeContainer").css('z-index','-1');
  alert('content is photos');
} 
```

# c# - c# 掷骰子 (i <= maxRolls)

> ID：13169793
> 
> 赞同：-2
> 
> 时间：2012-11-01T01:29:45.357
> 
> 标签：c#

我有两个问题，我不知道如何解决。

`diceThrow()`应该随机掷骰子并多次得出1-6的答案，但只能得出一个1-6的答案，而且只能这样做。即（6、6、6、6、6、6等）

而对于`rollDice()`，我不确定我是否只是定义不好“ `i`”或`maxRolls`，但应该是，`i > maxRolls`程序应该结束并重置。

非常感谢有关如何解决其中任何一个问题的任何建议，谢谢！

```
//somewhere else in code
    int maxRolls = RollsNumber();
    int throwresult = diceThrow();
    int i;
//*******************************

    private void rollButton_Click(object sender, EventArgs e)
    {
        rollDice();
        wagerTextBox.Text = null;
        wagerTextBox.Text = scoreTextBox.Text;
        diceThrow();

        MessageBox.Show(Convert.ToString(throwresult));

        if (maxRolls < i)
        {
            MessageBox.Show("You got too greedy.");

           //reset the form

        }
    }
    // Decides the maximum number of rolls before the player loses
    static public int RollsNumber()
     {
        Random rolls = new Random();
        return rolls.Next(1, 10);

    }
    // Throws the dice
    static public int diceThrow()
    {
        Random dice = new Random();
       return dice.Next(1, 7);
    }
    private void rollDice()
    {
        for (i = 0; i <= maxRolls; i++)
        {

                int wager = Convert.ToInt32(wagerTextBox.Text);

                int score = wager * 100;

                scoreTextBox.Text = Convert.ToString(score);

        }  
    } 
```

} }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T01:36:14.370

您正在使用与随机相同的种子。

[正如Random 类](http://msdn.microsoft.com/en-us/library/system.random.aspx)中的 msdn 所述

> 随机数生成从种子值开始。如果重复使用相同的种子，则会生成相同的数字序列。产生不同序列的一种方法是使种子值与时间相关，从而为每个新的 Random 实例产生不同的序列。

在您的情况下，一种简单的方法是不要每次都创建新的 Random 。

```
 // Throws the dice
static Random diceRandom = new Random();
static public int diceThrow()
{
   return diceRandom .Next(1, 7);
} 
```

# javascript - JavaScript 和 DOM 操作（创建和删除）

> ID：13169798
> 
> 赞同：2
> 
> 时间：2012-11-01T01:30:28.320
> 
> 标签：javascript, jquery, html, dom

所以我试图在一个数组中基本上动态地创建 li，我想在每个 li 中创建一个“删除”按钮，这样当我点击那个 li 时，我可以删除那个特定的 li。

我知道这看起来很基本，但是我已经研究 JS 几个小时了，我开始在这里真正让自己感到困惑。我不断收到诸如 addChild() is not a function 之类的错误......我觉得我很接近，但没有雪茄。提前致谢！

无论如何，这是我的添加功能：

```
function add(){
    var deleteBtn = document.createElement('input');
    deleteBtn.type = 'submit';
    deleteBtn.name = 'addButton';
    deleteBtn.className = 'deleteButton';

    for(i=0;i<1;i++){
        id_number[i] = i+1;

        var newSong = '<li class="li_test" id="' + id_number[i] + '">' + "<span>" + "</span>" + '</li>';
        // $(newSong).appendChild(deleteBtn);
        $(deleteBtn).appendTo("#playlist-1");
        $(newSong).appendTo("#playlist-1");
        showList.push(newSong);

        deleteBtn.addEventListener('click', function(evt) {
            deleteFromPlaylist(newSong);
        });
    }
 } 
```

这是我的删除功能

```
function deleteFromPlaylist(newSong){
    var deleteBtn = document.getElementsByTagName('deleteButton');
    // var deleteMe = deleteBtn.parentNode;
    alert(deleteBtn);
    for(i=0;i<showList.length;i++){
        if(newSong === showList[i]){
            showList.splice(i,1);
            // var pp = p.parentNode;

            // pp.removeChild (p);
            deleteMe = deleteMe.parentNode.remove("li_test");
            deleteMe.removeChild(deleteBtn);
        }
    // console.log(deleteMe);
      }
    } 
```

**编辑：1个更多相关问题**

我只想添加一个项目，如果它不存在于数组中。这是我到目前为止所拥有的。关于我哪里出错的任何提示？

```
for (i = 0; i < showList.length; i++) {

    if (newSong !== showList[i]){
        ul_list.innerHTML = newSong;
        container_div.appendChild(ul_list); //append the info
        container_div.appendChild(deleteBtn);

        document.getElementById('playlist-1').appendChild(container_div); //finally add it to the playlist div

        showList.push(newSong);

        deleteBtn.addEventListener('click', function(evt) {
            deleteFromPlaylist(evt, newSong);
        });
        inc++;
        alert("It IS in the Array!");
    }else{
        alert("This already exists!");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T02:17:17.993

你似乎有一个奇怪的代码组合。忘记 jQuery 的东西，直到你知道 javascript。

```
> function add(){
>     var deleteBtn = document.createElement('input');
>     deleteBtn.type = 'submit'; 
```

我不认为这是个好主意。使用类型按钮或按钮元素要好得多。

```
>     deleteBtn.name = 'addButton';
>     deleteBtn.className = 'deleteButton';
> 
>     for(i=0;i<1;i++){ 
```

估计`i`以后会高一些。;-)

```
>         id_number[i] = i+1; 
```

是从哪里来`id_number`的？

```
> 
>         var newSong = '<li class="li_test" id="' + id_number[i] + '">' + "<span>" + "</span>" + '</li>';
>         // $(newSong).appendChild(deleteBtn); 
```

坚持一种创建元素的方法。考虑使用文档片段来保存部件。

```
>         $(deleteBtn).appendTo("#playlist-1");
>         $(newSong).appendTo("#playlist-1");
>         showList.push(newSong); 
```

是从哪里来`showList`的？

```
>         deleteBtn.addEventListener('click', function(evt) {

>             deleteFromPlaylist(newSong);
>         }); 
```

并非所有浏览器都支持`addEventListener`. 由于您只添加一个侦听器，因此请考虑仅分配给按钮的`onclick`属性。请注意，这`newSong`只是一个字符串。

```
>     }
>  } 
```

在另一个函数中：

```
> function deleteFromPlaylist(newSong){
>     var deleteBtn = document.getElementsByTagName('deleteButton'); 
```

没有 HTML "deleteButton" 元素，因此将返回一个空集合。

```
>     // var deleteMe = deleteBtn.parentNode;
>     alert(deleteBtn);
>     for(i=0;i<showList.length;i++){
>         if(newSong === showList[i]){
>             showList.splice(i,1);
>             // var pp = p.parentNode;
> 
>             // pp.removeChild (p);
>             deleteMe = deleteMe.parentNode.remove("li_test"); 
```

是从哪里来`deleteMe`的？您注释掉了它的声明位置并且尚未为其分配值，因此`deleteMe.parentNode`会引发错误。

```
>             deleteMe.removeChild(deleteBtn);
>         }
>     // console.log(deleteMe);
>       }
>     }
> } 
```

无论如何，这里有一些工作代码，它仍然很糟糕，但我会把它留给你去改进它。

```
<script>

var showList = [];

function add(){
    var id_number = [];
    var deleteBtn = document.createElement('input');
    deleteBtn.type = 'button';
    deleteBtn.name = 'addButton';
    deleteBtn.className = 'deleteButton';
    deleteBtn.value = 'Delete Button';

    for (i=0; i<1; i++) {
        id_number[i] = i + 1;

        // '<li class="li_test" id="' + id_number[i] + '">' + "<span>" + "</span>" + '</li>';
        var newSong = document.createElement('li');
        newSong.className = 'li_test';
        newSong.id = id_number[i];
        newSong.appendChild(document.createElement('span').appendChild(document.createTextNode('song')));
        showList.push(newSong);
        deleteBtn.onclick = (function(id) {
                               return function(){deleteFromPlaylist(id);}
                            }(newSong.id));
        newSong.appendChild(deleteBtn);
        document.getElementById('playlist-1').appendChild(newSong);
    }
}

function deleteFromPlaylist(id) {
    var song = document.getElementById(id);
    if (song) {
        song.parentNode.removeChild(song);
    }
} 

window.onload = function() {
  add();
}

</script>

<ul id="playlist-1">
  <li>Original
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T02:24:00.923

我已将您的代码和函数更改为纯粹使用 javascript，而不是包含 jquery 的混合物。我在代码中添加了注释来解释我的行为。如果您有任何问题随时问。

```
var showList = [];
var inc = 1;

function add() {
    //create the container element.  If we do this, keeping track of all elements
    //becomes easier, since we just have to remove the container.
    var container_div = document.createElement('div');
    container_div.id = "cont_" + inc;

    var ul_list = document.createElement('ul');

    var deleteBtn = document.createElement('input');
    deleteBtn.type = 'button';
    deleteBtn.value = 'remove song';
    deleteBtn.name = 'addButton';
    deleteBtn.className = 'deleteButton';

    var id_number = [];
    var newSong = "";
    for (i = 0; i < 1; i++) {
        id_number[i] = i + 1;

        newSong += '<li class="li_test" id="cont_' + inc + '_song_id_' + id_number[i] + '">' + "<span>test " + inc + "</span>" + '</li>\n'; //all ids must be unique, so we construct it here
    }

    ul_list.innerHTML = newSong;
    container_div.appendChild(ul_list); //append the info
    container_div.appendChild(deleteBtn);

    document.getElementById('playlist-1').appendChild(container_div); //finally add it to the playlist div

    showList.push(newSong);

    deleteBtn.addEventListener('click', function(evt) {
        deleteFromPlaylist(evt, newSong);
    });
    inc++;
}

function deleteFromPlaylist(evt, newSong) {
    var deleteBtn = evt.target; //target the button clicked, instead of a list of all buttons
    var container_div = deleteBtn.parentNode; //get the parent div of the button
    var cont_parent = container_div.parentNode; //and the parent of the container div
    for (i = 0; i < showList.length; i++) {
        if (newSong === showList[i]) {
            showList.splice(i, 1);
        }
    }
    cont_parent.removeChild(container_div); //finally, remove the container from the parent
} 
```

**更新：** 我已经修改了上述函数以严格使用对象，而不是字符串，因为从对象中提取相关信息比字符串更容易。

我添加了注释以帮助理解代码。同样，如果您有任何问题，请随时提出。

```
function add() {
    var list_bool;
    //create the container element.  If we do this, keeping track of all elements
    //becomes easier, since we just have to remove the container.
    var container_div = document.createElement('div');
    container_div.id = "cont_" + inc;

    var ul_list = document.createElement('ul');

    var deleteBtn = document.createElement('input');
    deleteBtn.type = 'button';
    deleteBtn.value = 'remove song';
    deleteBtn.name = 'addButton';
    deleteBtn.className = 'deleteButton';

    var list_item = document.createElement("li"); //create list element
    list_item.className = "li_test"; //set element class
    var list_span = document.createElement("span"); //create span element
    list_span.innerHTML = "test"; //set span text
    list_item.appendChild(list_span); //append span to list element

    ul_list.appendChild(list_item); //append list element to un-ordered list element
    var list_bool = false; //create local boolean variable
    if (showList.length > 0) { // loop through showList if it isn't empty
        for (var i = 0; i < showList.length; i++) {
            if (showList[i].innerText !== list_item.innerText) {
                list_bool = true; //if song exists(comparing text values, set bool to true
            } else if (showList[i].innerText === list_item.innerText) {
                list_bool = false; //else, set it to false
                break; //break out of loop.. we don't want it becoming true again, now do we?
            }
        }
    } else {
        list_bool = true; //showList is empty, set to true
    }
    if (list_bool) { //if true, do action of appending to list
        container_div.appendChild(ul_list); //append the info
        container_div.appendChild(deleteBtn);

        document.getElementById('playlist-1').appendChild(container_div); //finally add it to the playlist div
        showList.push(list_item);
        deleteBtn.addEventListener('click', function(evt) {
            deleteFromPlaylist(evt, newSong);
        });
        inc++;
    }
} 
```

[**DEMO**](http://jsfiddle.net/Cjpsa/3/)，注意`add()`执行了两次，但是因为歌曲 'test' 已经存在，所以它只执行了一次结束动作。

# binary-tree - 使用归纳证明二叉树属性

> ID：13169806
> 
> 赞同：0
> 
> 时间：2012-11-01T01:31:17.267
> 
> 标签：binary-tree, nodes, proof, induction

我在使用归纳法证明二叉树属性时遇到了麻烦：

```
Property 1 - A tree with N internal nodes has a maximum height of N+1
    base case - 0 internal nodes has a height of 0
    assume - a tree with k internal nodes has a maximum height of k+1 where k exists in n
    show - true for all k+1 or true for all k-1

Property 2 - A tree with a tree with N internal nodes has N + 1 leaf nodes
    base case - 0 internal nodes has 1 leaf node (null)
    assume - a tree with k internal nodes has k + 1 leaf nodes where k exists in n
    show - true for all k+1 or true for all k-1 
```

我的设置正确吗？如果是这样，我该如何展示这些东西。我所尝试的一切最终都变得一团糟。谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:03:34.117

你错过了一些东西。

对于属性 1，您的基本情况必须与您要证明的内容一致。因此，具有 0 个内部节点的树的高度必须最多为 0+1=1。这是真的：考虑一棵只有根的树。

对于归纳步​​骤，考虑具有 k-1 个内部节点的树。如果它的高度最多为k（假设），再增加一个节点只能将它提升到k+1，不能更高。所以 k-internal-node 树的高度最多为 k+1。

属性 2 为假。反例：

```
 5
  4  6
 3    7
2      8 
```

5个内部节点，2个叶子。

所以你可能想证明一些不同的东西。

# email - 使用 applescript 编辑服务器变量

> ID：13169809
> 
> 赞同：0
> 
> 时间：2012-11-01T01:31:46.287
> 
> 标签：email, variables, outlook, applescript

我不知道我是否正确地问了这个问题（但我在任何地方的搜索都没有得到答案）。

我会尽力解释；

我创建了一个用于邮件客户端（Mac Mail 和 MS Outlook）的 Applescript。

基本上，当收到一封电子邮件时，它会检查主题，如果主题包含“whatever”，那么脚本就会执行。

此脚本询问您是否要发送自动回复。如果单击否，则不会发生任何事情。如果单击是，则发送一个。够简单吧？

好吧，我遇到的问题是 20 个人同时同意，发送 20 封自动生成的电子邮件。

我试图找到某种方式让“它”检查是否有人已经点击了“是”。有没有人有任何见解？我是否超出了 Applescript 的范围？如果是这样，任何替代方案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T06:32:56.033

当单击“是”时，您需要一些集中的方式来跟踪。因此，服务器上的一个简单文本文件就可以完成这项工作。我在想的是，当有人单击“是”以发送自动响应时，脚本所做的第一件事就是检查中央文件以查看是否有其他人已经单击“是”。如果文件确实有一个是，那么会弹出一个新对话框，让用户知道电子邮件已经被回复，当然是没有回复。如果文件没有“是”，则脚本将该电子邮件的“是”写入文件，然后发送响应。

您需要一些方法来区分在不同时间收到的电子邮件，以便您检查中央文件是否有这个独特的电子邮件属性……这对于每封电子邮件来说都是独一无二的，但对于每个收到它的人来说都是一样的。如果没有唯一的属性，那么基于时间的检查可能会起作用。例如，您可以将时间写入文件，如果文件包含 30 分钟内的时间或其他合适的时间段，则不发送响应。

我希望这能给你一些想法。祝你好运。

# php - 根据第一个表的内容加入表

> ID：13169810
> 
> 赞同：2
> 
> 时间：2012-11-01T01:31:48.733
> 
> 标签：php, mysql, sql

我正在尝试提出一个查询，其中第三个表将加入另外两个表。问题是第一个表有不同的版本，我需要查询查看表 1 中的列，然后选择要加入的正确表，但生成的查询必须返回表 1 中的所有行，只需加入一个额外的表 3 即可满足 WHERe 子句的特定行。 *这甚至可能吗？*

**例子：**

表 1 = 用户

表 2 = 横幅

表 3 = UserSettings OR AdminSettings OR Nothing

***查询会说...***

```
WHERE User.rank='admin' LEFT JOIN AdminSettings

WHERE User.rank='user' LEFT JOIN UserSettings 
```

我目前的查询是这样的：

```
$query = "SELECT * FROM Users as U WHERE U.user_id = :id ";
$query .= "LEFT JOIN Banners as B ON U.banner_id = B.banner_id ";
$query .= "LEFT JOIN AdminSettings ON U.server_id = AdminSettings.user_id WHERE U.rank='Admin' ";
$query .= "LIMIT 1"; 
```

问题是它只显示具有 User.rank='admin' 的行，而不显示 User.rank='user' 所在的行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T01:38:50.740

加入`table3`两次并`CASE`在 select 语句中使用

```
SELECT  a.*,
        b.*
        CASE WHEN a.rank = 'admin' 
            THEN c.user_ID                     -- gets value from AdminSettings
            ELSE d.user_ID                     -- gets value from UserSettings
        END as ColName1,
        CASE WHEN a.rank = 'admin' 
            THEN c.colName                     -- gets value from AdminSettings
            ELSE d.colName                     -- gets value from UserSettings
        END as ColName2
FROM    users a
        INNER JOIN banners b
            ON a.banner_id = b.banner_id
        LEFT JOIN  AdminSettings c
            ON a.server_ID = c.user_ID
        LEFT JOIN UserSettings d
            ON a.server_ID = d.user_ID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T01:46:04.530

尝试在字段列表中使用 IF 子句，如下所示：

```
$query = "SELECT field1, field2, field3, IF(User.rank = 'admin', A.field, B.field)";
$query .= " FROM Users as U";
$query .= " LEFT JOIN Banners as B ON U.banner_id = B.banner_id";
$query .= " LEFT JOIN AdminSettings as A ON U.server_id = A.user_id";
$query .= " LIMIT 1"; 
```

像这样的东西应该可以解决问题。

# wpf - WPF DataGrid - 刷新后保持滚动位置

> ID：13169811
> 
> 赞同：7
> 
> 时间：2012-11-01T01:31:48.737
> 
> 标签：wpf, datagrid, scroll, refresh, wpfdatagrid

任何人都知道如何在刷新命令后保持垂直滚动位置？

我的 Datagrid 从对象列表接收绑定。

非常感谢，对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:10:00.747

2个可能的解决方案：

1）尝试更新列表而不是替换它。这意味着添加新项目并删除不需要的项目。

2）您可以在刷新之前保存滚动条的状态，然后以编程方式滚动到所选项目。

[WPF Toolkit：如何滚动数据网格以显示后面代码中的选定项目？](https://stackoverflow.com/questions/1984882/wpf-toolkit-how-to-scroll-datagrid-to-show-selected-item-from-code-behind)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-04T06:34:28.547

我有同样的问题，这是我所做的：

1.  当它被引导时找到`ScrollViewer`你的`Datagrid`/并添加一个事件：`ListBox``ScrollChanged`

```
var scrollViewer = FindScrollViewer(ListBoxOrders);
if (scrollViewer != null)
{
    scrollViewer.ScrollChanged += scrollViewer_ScrollChanged;
}
//Here is the function to find the ScrollViewer:
private ScrollViewer FindScrollViewer(DependencyObject d)
{
    if (d is ScrollViewer)
        return d as ScrollViewer;
    for (int i = 0; i < VisualTreeHelper.GetChildrenCount(d); i++)
    {
        var sw = FindScrollViewer(VisualTreeHelper.GetChild(d, i));
        if (sw != null) return sw;
    }
    return null;
} 
```

2.  在滚动更改时，存储垂直偏移量：

```
private double _verticalOffset;
private void scrollViewer_ScrollChanged(object sender, ScrollChangedEventArgs e)
{
    var sv = (ScrollViewer)sender;
    _verticalOffset = sv.VerticalOffset;
} 
```

3.  刷新后，滚动到上一个位置：

```
scrollViewer?.ScrollToVerticalOffset(_verticalOffset); 
```

# c - 使用 pthread 和信号打印文本文件

> ID：13169816
> 
> 赞同：1
> 
> 时间：2012-11-01T01:33:00.980
> 
> 标签：c, file, pthreads, signals, posix

我有以下代码

```
typedef struct 
{
    char word[64];
} DataStructure;

sigset_t set;
FILE *pFile;

static void *print(void *ptr)
{
    char *message;
    message = (char *)ptr;
    int sig;

    while(!feof(pFile))
    {
        sigwait(&set, &sig);
        printf("%s \n", message);
        sleep(2);
    }
    return 0;
}

int main(int argc, char *argv[])
{
    DataStructure Data;

    sigemptyset(&set);
    sigaddset(&set, SIGUSR1);
    pthread_sigmask(SIG_BLOCK, &set, NULL);

    pthread_t thread;
    pthread_create(&thread, NULL, print, (void *)Data.word);

    pFile = fopen("rhyme1.txt", "r");

    while(!feof(pFile))
    {
        fscanf(pFile, "%s", Data.word);
        pthread_kill(thread, SIGUSR1);  
    }

    pthread_join(thread, NULL);
    pthread_exit(NULL);
}

/*The output should look like:
Hickory,
dickory,
dock,
The
mouse
ran 
up
the
clock.

This code results in:
clock. */ 
```

我正在尝试打开一个文本文件并使用 scanf 读取该行的每个单词。然后该词被发送到“打印”方法（通过 pthread_create 的参数）并在发送信号时打印读入的词（通过 pthread_kill）。该过程一直重复，直到文件被完全读入并打印出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T01:56:03.847

正是鸭子建议的。

您可以做的是使用一个线程进行读取和一个线程进行打印，每个线程相互发送信号以保持同步：

```
static void *print(void *ptr)
{
    char *message = (char *)ptr;
    int sig;

    while(!feof(pFile))
    {
        sigwait(&set, &sig);
        printf("%s\n", message);
        pthread_kill(thread2, SIGUSR1);  
    }

    return 0;
}
static void *readstr(void *ptr)
{
    char *message = (char *)ptr;
    int sig;

    while(!feof(pFile))
    {
        fscanf(pFile, "%s", message);
        pthread_kill(thread1, SIGUSR1);  
        sigwait(&set, &sig);
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T01:52:05.167

它导致“时钟”，因为您正在传递一个指向 Data.word 的指针，该指针将在线程中的循环运行之前被多次覆盖。“时钟”恰好发生在该内存位置的最后一件事上。

```
while(!feof(pFile))
{
    fscanf(pFile, "%s", Data.word);
    pthread_kill(thread, SIGUSR1);  
} 
```

上面将快速浏览文件，可能在线程执行之前，当然在 2 秒睡眠结束之前。

```
while(!feof(pFile))
{
    sigwait(&set, &sig);
    printf("%s \n", message);
    sleep(2);
} 
```

您可能会在随后的运行中得到不同的结果，但我怀疑您是否会达到您的期望。信号不会排队。

# python - 将列表的值分配给另一个列表的值

> ID：13169820
> 
> 赞同：0
> 
> 时间：2012-11-01T01:33:43.127
> 
> 标签：python

我有

```
a = [price1, price2]
b = [[108455, 106406, 103666, 101408, 98830], [3926, 4095, 426]] 
```

如何自动分配`a[0]`equal to`b[0]`和`a[1]`to `b[1]`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T01:53:00.673

我认为您正在尝试做这样的事情

```
b = [[108455, 106406, 103666, 101408, 98830], [3926, 4095, 426]]
price1, price2 = b 
```

或全部在一条线上

```
price1, price2 = [[108455, 106406, 103666, 101408, 98830], [3926, 4095, 426]] 
```

另一种可能性是创建一个具有属性的可变对象来保存价格

```
>>> class Price(object):
...     def __init__(self, value=None):
...         self.value = value
...     def __repr__(self):
...         return "Price({})".format(self.value)
... 
>>> price1 = Price()
>>> price2 = Price()
>>> a = [price1, price2]
>>> b = [[108455, 106406, 103666, 101408, 98830], [3926, 4095, 426]]
>>> for i,j in zip(a, b):
...     i.value = j
... 
>>> a
[Price([108455, 106406, 103666, 101408, 98830]), Price([3926, 4095, 426])] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T01:36:46.357

要将字符串与 in的值**相关联**吗？IE b 中第一个元素的名称？如果是这样，你想要一本字典：`a``b``price1`

```
 d = {}
 # i is the current position in a
 # key is the value at that position
 for i, key in enumerate(a):
     d[key] = b[i] 
```

您只想用 a**覆盖**b 中的内容吗？它很简单

```
 a[0]=b[0] 
```

或者

```
 a = b 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T01:39:55.760

不太清楚你在找什么，这个怎么样：

```
>>> price1 = 10000
>>> price2 = 22222
>>> a = [price1, price2]
>>> b = [[108455, 106406, 103666, 101408, 98830], [3926, 4095, 426]]
>>>
>>> merged_ab = {a_item: b_item for a_item, b_item in zip(a,b)}
>>> merged_ab
{10000: [108455, 106406, 103666, 101408, 98830], 22222: [3926, 4095, 426]}
>>> 
```

实际上，`zip()`只有在没有键控的情况下才能做到这一点。

```
>>> zip(a,b)
[(10000, [108455, 106406, 103666, 101408, 98830]), (22222, [3926, 4095, 426])] 
```

# r - R - 导入和合并多个 Excel 文件并添加文件源变量

> ID：13169823
> 
> 赞同：5
> 
> 时间：2012-11-01T01:34:28.897
> 
> 标签：r, excel, import, merge, import-from-excel

在过去的一年里，我将 R 用于各种事情，但由于可用的包和功能的数量，我仍然是一个初学者。我相信 R 会让我用最少的代码做我想做的事，但我很挣扎。

### 我想做的事：

我有大约一百个不同的 Excel 文件，其中包含有关学生的数据。每个 excel 文件代表不同的学校，但包含相同的变量。我需要：

> 1.  将数据从 Excel 导入 R
>     
> 2.  向包含文件名的每个文件添加一个变量
>     
> 3.  合并所有数据*（添加观察/行 - 不需要匹配变量）*

我需要对多组数据执行此操作，因此我试图使其尽可能简单且易于复制。

### 数据是什么样的：

> **第 1 行**    标题
> **第 2 行**    *StudentID Var1 Var2 Var3 Var4 Var5*
> **第 3 行**    11234 1 9/8/2011 343 159-167 32
> **第 4 行**    11235 2 9/16/2011 112 152-160 12
> **第 5 行**    11236 1 9/8/2011 325 164 -171 44

第 1 行没有意义，第 2 行包含变量名称。这些文件有不同的行数。

### 到目前为止我所拥有的：

起初我只是尝试从 excel 导入数据。使用 XLSX 包，这很好用：

```
dat <- read.xlsx2("FILENAME.xlsx", sheetIndex=1, 
                  sheetName=NULL, startRow=2, 
                  endRow=NULL, as.data.frame=TRUE, 
                  header=TRUE) 
```

接下来，我专注于弄清楚如何合并文件（也认为这是我应该将文件名变量添加到数据文件的地方）。这就是我卡住的地方。

```
setwd("FILE_PATH_TO_EXCEL_DIRECTORY")
filenames <- list.files(pattern=".xls")
do.call("rbind", lapply(filenames, read.xlsx2, sheetIndex=1, colIndex=6, header=TRUE, startrow=2, FILENAMEVAR=filenames)); 
```

我设置了我的目录，列出了文件夹中所有的 excel 文件名，然后尝试使用文件名的 a 变量将它们合并到一个语句中。

当我这样做时，我收到以下错误：

> data.frame(res, ...) 中的错误：参数暗示不同的行数：616、1、5

我知道我的 lapply 应用程序存在问题 - startrow 未被识别为选项，并且 FILENAMEVAR 正在尝试合并 5 个示例文件名的列表，而不是添加包含文件名的列。

### 接下来是什么？

如果有人可以向我推荐一个有用的资源或功能，批评我到目前为止所拥有的，或者为我指出一个新的方向，那将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T03:15:06.830

我会发表我的评论（bdemerast 会发现错字）。该解决方案未经测试，因为`xlsx`不会在我的机器上愉快地运行

您需要将单个传递`FILENAMEVAR`给`read.xlsx2`.

```
lapply(filenames, function(x) read.xlsx2(file=x, sheetIndex=1, colIndex=6, header=TRUE, startRow=2, FILENAMEVAR=x)) 
```

# c# - 在 MVC3 中实现 ModelBinding 背后的逻辑

> ID：13169825
> 
> 赞同：1
> 
> 时间：2012-11-01T01:34:36.540
> 
> 标签：c#, .net, asp.net-mvc-3, model-binding

我在使用 HTML 扩展创建文本和隐藏字段时遇到问题。返回视图后，该值正在更改，但我不知道为什么。经过一番阅读，我了解到这是设计使然，它应该使用模型状态中的任何内容。

谁能解释这背后的逻辑？我看不出为什么您希望将提供的参数替换为模型状态中的参数的充分理由。

**代码**

```
 @Html.Hidden("UpdateMode", "Update") 
```

**结果**

```
 <input id="UpdateMode" name="UpdateMode" type="hidden" value="Add" /> 
```

# sql - 如果存在另一个记录，则排除组中记录的值 v2

> ID：13169830
> 
> 赞同：1
> 
> 时间：2012-11-01T01:35:42.203
> 
> 标签：sql, oracle

在下面的示例表中，我试图找出一种在两种情况下对标记求和的方法：第一种，当标记“C”存在于单个 id 中时，第二种，当标记“C”不存在时存在于一个 id 中（参见 id 1 或 2）。在第一种情况下，我想在该 id 中排除标记“A”的金额（请参阅下面所需转换表中的 id 3）。在第二种情况下，我想不执行排除操作，而是对分数进行简单的总和。

换句话说，对于同时包含标记“A”和“C”的 id，我想将“A”的金额设为零。对于不包含标记“C”但包含标记“A”的 id，请保留原始数量与标记“A”相对应。

我想要的输出在底部。我考虑过尝试对 id 进行分区或使用 EXISTS 命令，但我在概念化解决方案时遇到了麻烦。如果你们中的任何人都可以看看并指出我正确的方向，将不胜感激:)

示例表：

```
id   mark  amount
------------------
1    A     1
2    A     3
2    B     2
3    A     1
3    C     3 
```

所需的转换：

```
id   mark  amount
------------------
1    A     1
2    A     3
2    B     2
3    A     0
3    C     3 
```

所需的输出：

```
mark    sum(amount)
--------------------
A       4
B       2
C       3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T06:46:45.740

您可以稍微修改[我之前的答案](https://stackoverflow.com/questions/13167948/exclude-value-of-a-record-in-a-group-if-another-is-present/13168211#13168211)并最终得到以下结果：

```
SELECT
  mark,
  sum(amount) AS sum_amount
FROM atable t
WHERE mark <> 'A'
  OR NOT EXISTS (
    SELECT *
    FROM atable
    WHERE id = t.id
      AND mark = 'C'
  )
GROUP BY
  mark
; 
```

[SQL Fiddle](http://sqlfiddle.com/#!4/8f466/1)上有一个现场演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T02:28:25.837

尝试：

```
select
    mark,
    sum(amount)
from ( select
        id,
        mark,
        case 
            when (mark = 'A' and id in (select id from table where mark = 'C')) then 0
            else amount
        end as amount
    from table ) t1
group by mark 
```

# android - 是否有任何工具可以从 dalvik DEX 文件中删除不必要的引用？

> ID：13169831
> 
> 赞同：0
> 
> 时间：2012-11-01T01:35:54.887
> 
> 标签：android, dex

我有一个项目来处理一些现有的 dex 文件。要求之一是去除所有不必要的信息并减小它们的大小。

如果您尝试使用 Eclipse 插件并按照向导构建一个简单的“hello world”应用程序（SDK 和插件是我昨晚刚刚下载并安装的最新版本），您将创建一个`classes.dex`超过 300KB 的文件。

但是，如果您查看该项目，您会发现 lib 文件夹中出现了一个支持 lib 文件。如果你摆脱它，应用程序仍然可以工作，但 dex 文件的大小突然下降到 3KB。

所以我认为我们现有的文件也可能包含类似的不必要的引用。现在的问题是如何找到它们并摆脱它们。

有什么工具可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T04:19:57.437

在 project.properties 文件中，您必须添加此行

```
proguard.config=proguard.cfg 
```

你会在 proguard-project.txt 文件中找到 proguard 属性

这是一个android应用程序的示例

```
-injars      bin/classes
-outjars     bin/classes-processed.jar
-libraryjars /usr/local/java/android-sdk/platforms/android-9/android.jar

-dontpreverify
-repackageclasses ''
-allowaccessmodification
-optimizations !code/simplification/arithmetic

-keep public class mypackage.MyActivity 
```

这个适用于整个 android 应用程序

```
-injars      bin/classes
-injars      libs
-outjars     bin/classes-processed.jar
-libraryjars /usr/local/java/android-sdk/platforms/android-9/android.jar

-dontpreverify
-repackageclasses ''
-allowaccessmodification
-optimizations !code/simplification/arithmetic
-keepattributes *Annotation*

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider

-keep public class * extends android.view.View {
    public <init>(android.content.Context);
    public <init>(android.content.Context, android.util.AttributeSet);
    public <init>(android.content.Context, android.util.AttributeSet, int);
    public void set*(...);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * extends android.content.Context {
    public void *(android.view.View);
    public void *(android.view.MenuItem);
}

-keepclassmembers class * implements android.os.Parcelable {
    static android.os.Parcelable$Creator CREATOR;
}

-keepclassmembers class **.R$* {
    public static <fields>;
} 
```

您可以使用 injars、libraryjars 等来控制您需要的 jar 文件

您可以从[这里](http://proguard.sourceforge.net/index.html#manual/examples.html)获得必要的示例，完整的 android 应用程序在[这里](http://proguard.sourceforge.net/manual/examples.html#androidapplication)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T01:49:05.777

用于此的标准工具是 proguard，Android SDK 已经支持。[你可以在这里](http://developer.android.com/tools/help/proguard.html)找到更多信息

# smartcard - 如何在智能卡中读取 Le Length 0x0000

> ID：13169833
> 
> 赞同：1
> 
> 时间：2012-11-01T01:36:16.697
> 
> 标签：smartcard, smartcard-reader, emv

基于响应 APDU。我收到 61XX，这表明我可以读取 XX 个字节（长度 0x00）。我想知道，如果我想读取 Le 中的 0x0000，将始终获得最大 61FF，其中 256 个字节可用。

是否可以读取命令 APDU 中的 0x0000 长度并全部接收？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:16:27.677

在这种情况下，您可能想使用 T=1，这意味着没有 61XX 答案（这是 T=0 的属性）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:57:17.470

61xx 建议您当前使用 T=0。是否也支持 T=1（这不确定，但可能），在 ATR 中编码，但在没有 7816-3 知识的情况下很难由人类推导出）。问题是，61 xx 只提供一个字节。您现在可以采用两种方法：

*   （谨慎）您尝试发送具有给定值的 GET RESPONSE ，这可能再次返回 61 xx 状态代码。

*   （渐进式）使用扩展长度的 LE 编码发送 GET RESPONSE（并非所有卡都支持它，但 61 xx 并不意味着您的卡不支持）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-05T11:28:20.660

正如您所提到的，“61xx”意味着您只能从 ICC 获取“xx”字节数据。返回的数据字节数由ICC控制，向ICC发送其他值是没有用的，除非你想从ICC获取更少的数据（即<=“xx”）。

正如 Martin 所说，“61xx”只出现在 T=0 协议中。对于T=1，它永远不会出现这样的状态字。

# bash - 更改 bash 起始位置使其运行缓慢。有什么修复吗？

> ID：13169836
> 
> 赞同：1
> 
> 时间：2012-11-01T01:36:42.487
> 
> 标签：bash, console, escaping

我在使用 bash 时遇到了一些问题。我正在更改控制台的起始位置，以便可以在屏幕顶部保留一些行以打印脚本的当前状态，并允许所有标准输出在屏幕下部滚动。这样，当屏幕向下滚动时，显示状态的上面一行不会被删除。

我通过使用这些行来做到这一点，`<RNUM>`我需要冻结的行数在哪里。

```
 \033[<RNUM>;r
 \033[<RNUM>;1H 
```

它可以工作，但是控制台性能大大降低，它打印行的速度真的很慢（比如打印与通常打印的相同数量的行需要多 4 倍）。

有没有人解决性能问题？我使用了正确的代码吗？我无法在网上找到有关这些东西的任何信息，而且我不记得几年前我从哪里得到这些代码。

# android -

> ID：13169838
> 
> 赞同：0
> 
> 时间：2012-11-01T01:36:44.807
> 
> 标签：android, android-manifest

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T02:01:19.757

尝试将 a 添加[*`VIEW action`*](http://developer.android.com/reference/android/content/Intent.html#ACTION_VIEW)到您的第二个 Activity 中`<intent-filter>`：

```
<action android:name="android.intent.action.VIEW"></action> 
```

而且我认为您可能也想将您的 Intent 添加到[DEFAULT 类别中](http://developer.android.com/reference/android/content/Intent.html#CATEGORY_DEFAULT)：

```
<category android:name="android.intent.category.DEFAULT"></category> 
```

我不确定它是否重要，但所有`<intent-filter>`s 都有这个类别。

# logging - 用于记录的 redis

> ID：13169842
> 
> 赞同：14
> 
> 时间：2012-11-01T01:37:23.837
> 
> 标签：logging, redis

我正在考虑将 Redis 用于 Web 应用程序日志记录。我在谷歌上搜索到有人使用这种方法，将日志转储到 Redis 队列/列表中，然后将调度的工作人员写入磁盘。

[http://nosql.mypopescu.com/post/8652869828/another-redis-use-case-centralized-logging](http://nosql.mypopescu.com/post/8652869828/another-redis-use-case-centralized-logging)

想请教一下，为什么不直接用Redis持久化到磁盘呢？如果我分配了一个Redis将写入的小型服务器，与数据库，应用服务器分开，那么使用Redis直接持久化日志是否可行？

在按日期时间、用户等查询 Redis 时，我还需要帮助。例如，每个日志如下所示。

```
datetime=>2012-03-24 17:45:12
userid=>123
message=>test message
category=>my category 
```

如何查询特定用户、特定类别的日期时间范围内的结果？

谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-01T08:07:42.953

您需要记住 Redis 是一个内存数据库（即使它可以将数据持久化到磁盘）。您放入 Redis 的数据必须适合内存。

您提到的文章中的提议是关于使用 Redis 作为分布式排队系统。工作进程将项目出列并将它们写入磁盘，因此 Redis 内存中的项目并不多。这种设计有一个缺陷：如果工作进程无法将数据写入磁盘的速度不够快，Redis 内存消耗将会爆炸 - 所以它必须受到配置（Redis maxmemory 参数）或软件（在插入时修剪队列，或者清空）的限制队列已满）。

现在你的提议并没有真正起作用，因为你在 Redis 中写入的所有数据都将保存在内存中（即使它们是由 Redis 本身持久化到磁盘的）。

还有一点是你不能查询 Redis。Redis 不是关系数据库，它不支持 ad-hoc 查询机制，只支持涉及先前定义的访问路径的命令。如果要搜索具有不同参数的数据，则必须在插入时预测所有可能的搜索并构建相关的数据结构（集、排序集等）。

另一个存储（MongoDB 或关系数据库）可能更适合您的用例。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-03-24T15:53:27.227

您可以使用以下结构存储日志：

```
"logs:{category}:{userid}:{datetime}" = message 
```

然后请求如下：

```
"logs:*:{userid}:{datetime}" 
```

或者

```
"logs:{category}:*:{datetime}" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-20T05:00:27.670

Redis 在内存数据存储中。使用 Save 或 BGSAVE 命令可以将数据直接持久化到磁盘。持久性 (RDB/AOF) 是内存中存储之外的一项功能。

提到的要求是将日志存储到磁盘。使用任何消息队列（如 RabbitMQ）而不是内存数据存储应该会使事情变得简单。（日志不会耗尽内存）

生成日志的应用程序可以将它们发布到队列上，并由单独的消费者消费日志消息并将它们写入磁盘。

> 如何查询特定用户、特定类别的日期时间范围内的结果？

每个日志块都应保存为一个结构（例如 C/C++），如下所示：

```
 struct log{
     long datatime;
     string userId;
     string message;
     string category;
   }; 
```

将此结构序列化为字符串并将其作为值存储在 Redis 中。此类值的键如下：key = userId + DELIMITER + category + DELIMITER + datatime

您可以使用功能来获取所有键并将它们拆分以获取特定关键字的数据列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-28T11:01:54.347

如果您使用以时间戳作为分数的排序集，则效果很好。缺点是内存问题（如其他答案中所述）和您将要进行的手动查询。

我一直在玩它，以防有人感兴趣：[https ://github.com/hugollm/redis-logs-example](https://github.com/hugollm/redis-logs-example)

# java - 在程序中的任意位置生成 Java 堆栈跟踪

> ID：13169843
> 
> 赞同：2
> 
> 时间：2012-11-01T01:37:50.903
> 
> 标签：java, exception, stack-trace

> **可能重复：**
> [在 Java 中获取当前堆栈跟踪](https://stackoverflow.com/questions/1069066/get-current-stack-trace-in-java)

我有一种将消息保存到文件的方法。从我的主程序的许多不同部分调用此方法。有什么方法可以按需生成堆栈跟踪，即使`Exception`尚未触发？

例如，我希望有这样的东西......

```
void saveMsg(String Msg)
{
  if (a==b) Print Out Where This Method Was Called From [ like stackTrace in exception ]
  else saveMsgToFile(filePath,Msg);
} 
```

我知道 Java 可以在 中进行堆栈跟踪，但是当没有发生`Exception`堆栈跟踪时如何生成堆栈跟踪？`Exception`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T01:51:40.450

只需这样做[`Thread.dumpStack()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#dumpStack%28%29)，这会将堆栈跟踪打印到控制台。没有必要搞乱创建异常并捕获它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T01:42:58.117

您可以生成自己的`Exception`并捕获结果...

```
try {
    throw new Exception("Tracing only");
}
catch (Exception e){
    e.printStackTrace();
} 
```

将此代码放在要输出堆栈跟踪的任何位置。

这样做的好处是该`e.printStackTrace();`方法可以很好地为您处理输出，假设您想要输出到控制台。通过触发`Exception`，您还可以为原因指定一个文本字符串（在本例中为`"Tracing only"`），因此您可以使用有意义的标题轻松自定义跟踪输出，例如`"Tracing the saveMsg method"`.

或者，您可以通过调用它来获取堆栈跟踪本身...

```
Thread.currentThread().getStackTrace(); 
```

但是，这会给您留下一个`StackTraceElement`必须循环输出的 s 数组。`Exception`在我看来，就像第一个选项一样，生成和捕获自己的 更容易、更干净。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T02:05:54.457

不幸的是，只有

```
 Thread.currentThread().getStackTrace(); 
```

对您的任务有用。问题是前面提到的所有方法都会将您的方法 (saveMsg) 打印在堆栈顶部，但这通常是不可取的。相反，您将不得不跳过从 getStackTrace() 方法返回的第一个元素。

# jquery - 更改表单的操作属性

> ID：13169844
> 
> 赞同：5
> 
> 时间：2012-11-01T01:37:59.857
> 
> 标签：jquery, forms, attributes, action

好的，我必须在这里遗漏一些东西，因为这应该非常简单，但它不起作用......

我的`form`页面上有一个空`action`属性 ( `action="#"`)。页面准备好后，我想将`action`属性更改为其他内容。我的代码很简单：

HTML：

```
<form action="#" method="post" id="register"></form>​ 
```

jQuery：

```
$("#register").attr("action", "http://www.test.com");​ 
```

即使在[测试小提琴](http://jsfiddle.net/wvYjs/)中，它也不起作用！查看 Result 框架的源代码，您会看到该`action`属性的值仍然是`#`.

我哪里错了？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T01:43:21.373

它确实有效，您没有正确测试它。查看源代码将显示页面加载时源代码的样子，而不是在它被 jQuery 修改后的样子。如果您`alert()`在使用 jQuery 获取值后对其进行操作，您将看到新值：

```
alert($("#register").attr("action")); 
```

在进行任何更改之前确保 DOM 已加载通常也是一个好主意，您可以使用`ready()`：

```
$(document).ready(function(){ /* your code */ }); 
```

查看：http: [//jsfiddle.net/wvYjs/2/](http://jsfiddle.net/wvYjs/2/)

# spine.js - 在 spin.js 应用程序中使用 raphael.js - 找不到模块 raphael

> ID：13169851
> 
> 赞同：1
> 
> 时间：2012-11-01T01:39:10.990
> 
> 标签：spine.js

希望有人可以在这里提供帮助...

我正在尝试在脊柱应用程序中使用 raphaeljs，但我似乎无法让它加载模块。

我做了以下事情：

*   安装节点和 npm
*   使用 spin.app 创建了一个应用程序
*   将 raphael 添加到 package.json 和 slug.json
*   将 Raphael = require('raphael') 添加到我的控制器
*   运行 npm install 。

我可以看到 npm 已经在“node_modules”下安装了 raphael 节点模块，但是当我加载应用程序时，我收到“未捕获的异常：找不到模块 raphael”

希望我只是错过了一些愚蠢的事情-谁能指出我正确的方向？

谢谢，

皮特

# php - 如果 $variable 是“字符串”，那么回显“stri”？

> ID：13169854
> 
> 赞同：-3
> 
> 时间：2012-11-01T01:39:41.283
> 
> 标签：php, html

我正在尝试根据其中输出的字符串为表 td 创建一个类。

```
<?php echo '<td class="'?>

<?php 
    if ($day === 'monday') 
        echo 'mon';
    if ($day === 'tuesday') 
        echo 'tues';
?>

<?php echo '">' . $day . '</td>' 
```

但是，这会导致以下结果：

```
<td class>monday</td> 
```

我正在努力实现这一目标：

```
<td class="mon">monday</td>
<td class="tues">tuesday</td> 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T01:44:52.457

将条件与标签分开 - 使其不易出错、可维护、...

```
<?php 
   $shortday = '';
   if ($day === 'monday') 
      $shortday = 'mon';
   else if($day === 'tuesday')
      $shortday = 'tues';
   else if...

   echo "<td class=\"$shortday\">$day</td>";

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T01:55:29.957

我喜欢 xbonez 和 codingbiz 的答案，但如果您访问样式表并可以更改它，您可以重命名类，以便使用当天的前 3 个字母调用它们，然后只需：

```
echo ('<td class="' . substr($day, 0, 3) . '">' . $day . '</td>'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T01:55:52.653

为代码中的每一行创建一个包含值的数组`<tr>`。然后遍历它们。这将是最干净的方法。如果您有更多已知项目的值（比如一个月中的几天），这也是一个很好的做法。

```
$days = array( 'mon' => 'monday',
               'tue' => 'tuesday',
               'wed' => 'wednesday'
             );

foreach($days as $k => $v) {
    echo '<td class="' . $k . '">' . $v . '</td>';
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T01:42:51.687

我建议事先决定类以使代码更具可读性。

```
<?php
    $class = '';

    if ($day === 'monday') {
        $class = 'mon';
    } else if ($day === 'tuesday') {
        $class = 'tues';
    }
?>

<td class="<?= $class ?>"><?= $day ?></td> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T01:43:29.767

更好的方法是使用 switch 语句：

```
$day = 'tuesday';
switch ($day) {
    case 'monday':
        $shortDay = 'mon';
        break;
    case 'tuesday':
        $shortDay = 'tues';
        break;
    default:
        $shortDay = 'invalid';
}
echo '<td class="' . $shortDay . '">' . $day . '</td>'; 
```

# actionscript-3 - (AS3) 小电流帧问题

> ID：13169859
> 
> 赞同：0
> 
> 时间：2012-11-01T01:40:57.150
> 
> 标签：actionscript-3

好的，由于某种原因，这是返回 1 并且仅返回 1：

```
for each(var i in bManager.bulletVector){
    trace(i.currentFrame);
}

if (i.parent != null && i.currentFrame > 1) { 
    trace("TRACED"); //Never executes
    i.parent.removeChild(i);
    bManager.bulletVector.splice(bManager.bulletVector.indexOf(i), 1);
} 
```

实例正常播放，但出于某种原因，Flash 认为它们仍在第 1 帧上。我可能忘记了一些东西，但我真的被卡住了。感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T03:48:13.013

最后的问题，亚达亚达亚达。此外，使用`currentFrame`是一个坏主意。

# ios - 使用核心数据传输 ManagedObjectContext 时出错

> ID：13169861
> 
> 赞同：0
> 
> 时间：2012-11-01T01:41:03.233
> 
> 标签：ios, xcode, core-data

使用此代码时出现此错误：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

if ([segue.identifier isEqualToString:@"Add Role Segue"])
  {
    NSLog(@"Setting RolesTVC as a delegate of AddRolesTVC");

   AddRoleTVC *addRoleTVC = segue.destinationViewController;
    addRoleTVC.managedObjectContext = self.managedObjectContext;
  }
} 
```

在我决定要使用 Table View Controller 之前，这段代码运行良好，为了在顶部有一个导航栏，我必须嵌入一个导航控制器。

错误是：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[UINavigationController setManagedObjectContext:]：无法识别的选择器发送到实例

我理解它的方式是因为导航控制器挡住了路，它不会传输 managedObjectContext，因为 UINavigationController 没有采用 managedObjectContext。

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T02:06:49.427

segue 的`destinationViewController:`方法返回 a `UINavigationController`，而不是`AddRoleTVC`您期望的 the 。您应该查看`UINavigationController`正在管理的视图控制器。第一个*应该*是你的`AddRoleTVC`.

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

if ([segue.identifier isEqualToString:@"Add Role Segue"])
  {

    UINavigationController *navController = (UINavigationController *)segue.destinationViewController;
    AddRoleTVC *addRoleTVC = (AddRoleTVC *)[navController.viewControllers objectAtIndex:0];
    NSLog(@"Setting RolesTVC as a delegate of AddRolesTVC");

    addRoleTVC.managedObjectContext = self.managedObjectContext;
  }
} 
```

您可以通过 (1) 检查 navController 实际上在 viewControllers 数组中有一个 viewController 和 (2) 检查类型以确保它是一个`AddRoleTVC`.

# c# - 以编程方式向类添加方法？

> ID：13169865
> 
> 赞同：0
> 
> 时间：2012-11-01T01:41:23.063
> 
> 标签：c#, .net, reflection, methods, typedescriptor

我正在处理一个 API，它有一个包含数百万个方法的类，我知道这些方法的作用，它们只是 Web 服务的代理。

API 在内部使用反射调用适当的方法名称来调用这些代理方法（不要问我为什么这样做）。

Web 服务中有一些方法没有被 API 实现，我需要动态地“注入”这些代理方法。

**所以我的问题是**：如何向现有类添加方法（不是扩展方法）？

我可以通过[Reflection.Emit](http://msdn.microsoft.com/en-us/library/exczf7b9.aspx)做到这一点，但我不知道 MSIL。
无论如何我要提到它，因为我已经创建了另一个类，它继承自与 API 相同的基类，并在那里实现了方法，所以也许有一种方法可以将方法复制到 API 类，因为它们只调用同一个基类的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T01:53:24.873

实际上，您不可能以您想要的方式修改现有的类。即使使用 Reflection.Emit，它也不会做你想做的事，因为 API 正在调用特定的类型，并且你不能在运行时修改类型的定义。你可以用 Reflection.Emit 做的是定义一个从代理继承的类型，但是让 API 加载你继承的类型可能会被证明是不可能的，除非他们使用依赖注入框架，这似乎不太可能。

唯一真正做到这一点的方法是使用反编译和重新编译进入并修改 dll 的字节码。这就是 Postsharp 执行 AOP 的方式，但 imo，出于任何其他原因，我永远不会这样做。

如果您可以访问此代码甚至他们的库，那么可能有更好的方法来解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T01:50:14.773

在我看来，您也将使用反射，省去一些头痛并将该逻辑包装在扩展方法中（即使您明确表示不这样做）。

如果你有更多关于为什么扩展方法在这种情况下是一个坏主意的信息，或者你为什么想做一些 API 开发人员没有公开的事情，我可能会想出一些更有用的东西。

# c++ - 如何在 DX9 中获取顶点声明

> ID：13169866
> 
> 赞同：0
> 
> 时间：2012-11-01T01:41:25.480
> 
> 标签：c++, directx

在 DX9 中，我可以使用“DrawIndexedPrimitive”中的“GetStreamSource”获取 IDirect3DVertexBuffer9 和 Stride。我想获得更多关于 Vertex 的信息。我想得到这个流源的顶点声明（IDirect3DVertexDeclaration9）。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T02:41:03.093

如果您通过[IDirect3DDevice9::CreateVertexDeclaration](http://msdn.microsoft.com/en-us/library/windows/desktop/bb174365%28v=vs.85%29.aspx)定义您的顶点格式，那么您可以调用[IDirect3DVertexDeclaration9::GetDeclaration](http://msdn.microsoft.com/en-us/library/windows/desktop/bb205920%28v=vs.85%29.aspx)来检索您的顶点声明。如果您以旧方式（D3D_FVF 格式）定义顶点，则不能这样做。

# web-services - Nodejs的回调机制

> ID：13169880
> 
> 赞同：0
> 
> 时间：2012-11-01T01:43:39.227
> 
> 标签：web-services, apache, node.js

据说Nodejs只使用一个进程来处理请求，然后那些使用I/O的功能会异步执行，这将提高Web服务器的效率。但是，那些处理 I/O 的进程不算数？与传统的Web服务器，如Apache，它使用多线程处理请求，每个请求都在一个线程中，成本（请求+ I/O）是否降低？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:05:11.523

是的，node.js 只需要一个线程（这比需要一个进程更具限制性，具体取决于操作系统）。是的，这确实会影响您的编程要求：

-- 你的程序绝不能阻塞！

关于为什么 node.js 这么快，你可以参考很多资源，例如：

[http://www.manning.com/cantelon/NjsiA_meap_ch01.pdf](http://www.manning.com/cantelon/NjsiA_meap_ch01.pdf)

[http://nodejs.org/about/](http://nodejs.org/about/)

node.js 节省了其他服务器需要的上下文切换所施加的线程惩罚（参见 Slebetman）。我们在 2004 年用 C++ 构建了自己的这样的服务器，因为对性能的要求很高，当你的服务器必须打开和关闭很多连接时，这种方法确实节省了很多资源。

我认为您的问题中缺少的是 node.js 将需要很长时间的操作交给 O/S 并用答案回调。操作系统是完全多进程的。所以 node.js 只需要一个线程来控制它，但 I/O 是由 O/S 进程控制的。

然而，node.js 可以产生额外的进程，您可以在其中运行并行程序。

# underscore.js - Underscorejs 删除逻辑部分不需要的空格

> ID：13169885
> 
> 赞同：1
> 
> 时间：2012-11-01T01:44:40.660
> 
> 标签：underscore.js, templating

我有一个带有 if/else 条件的下划线模板

问题 ：

下划线为逻辑部分插入不需要的空格。满足 else 条件时生成的 HTML 的结果是

```
<a>NAME</a>

<a class="name" href="/kkk/213">kkkkkkkk</a>Sir 
```

但我想要一个输出

```
<a>NAME</a><a class="name" href="/kkk/213">kkkkkkkk</a>Sir 
```

我想删除模板中插入的换行符/空格....

有什么解决方案可以做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T03:16:06.550

下划线`_.template`对空白没有任何作用，因此您必须在模板中安排空白以匹配您需要的输出。像这样的东西：

```
<a>NAME</a><% if(some_condition) { %> yours <% } else { %> <a class="name" href="/kkk/<%- ID %>"><%= NAME %></a> <% }%> 
```

演示（查看您的控制台）：http: [//jsfiddle.net/ambiguous/gbx3M/](http://jsfiddle.net/ambiguous/gbx3M/)

或者更具可读性：

```
<a>NAME</a><%
if(some_condition) {
    %> yours <%
} else {
    %> <a class="name" href="/kkk/<%- ID %>"><%= NAME %></a> <%
} %> 
```

演示（查看您的控制台）：http: [//jsfiddle.net/ambiguous/xuxLQ/](http://jsfiddle.net/ambiguous/xuxLQ/)

如果您真的根本不需要标签之间的空格，那么我认为您会遇到这种情况：

```
<% if(some_condition) {
    %><a>NAME</a>yours<%
} else {
    %><a>NAME<a class="name" href="/kkk/<%- ID %>"><%= NAME %></a><%
} %> 
```

并手动剥离前导/尾随空格：http: [//jsfiddle.net/ambiguous/LN7eU/](http://jsfiddle.net/ambiguous/LN7eU/)

另一种选择是使用 CSS 来浮动和定位元素，以便空白变得无关紧要。

如果这些选项都不够好，那么 Underscore 的（故意）简单和最小的模板可能不适合您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T23:23:19.553

我还发现，您可以通过调整 Underscore 用于评估 javascript 代码的正则表达式来消除这种不需要的空格。

```
_.templateSettings.evaluate = /(?:\n\s*<%|<%)([\s\S]+?)%>/g 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-13T16:23:14.640

我通过使用 tpl.js 的分叉版本成功：[https](https://github.com/ZeeAgency/requirejs-tpl) ://github.com/ZeeAgency/requirejs-tpl 你可以在这里找到我的版本：[https ://github.com/GuillaumeCisco/requirejs-tpl/](https://github.com/GuillaumeCisco/requirejs-tpl/)

基本上我`.replace(/\s\s+/g, '')`在收到数据时添加一个，默认情况下允许我修剪标签之间的空格。

# sql - 三表选择的内连接如何编写SQL

> ID：13169887
> 
> 赞同：-2
> 
> 时间：2012-11-01T01:44:48.337
> 
> 标签：sql, sqlite

我有三张桌子：

**项目
ItemCategories
类别**

如果 ItemCategories 包含：
**id
itemID
categoryID**

我将如何编写 SQL 来获取项目的类别名称？

到目前为止，我有：

```
Select * 
from
   items, 
   itemCategories, 
   categories
where 
  item.id = itemCategories.itemID
  and categories.id = itemCategories.categoryID 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T01:48:35.667

这是逗号分隔的表连接的 JOIN 形式。

```
select *
  from items i
  join itemCategories ic on i.id = ic.itemID
  join categories c on c.id = ic.categoryID 
```

通常也是一个非常好的主意

1.  为表使用短别名
2.  列出 SELECT 子句中您需要的所有字段且仅列出您需要的字段
    *   如图所示，两者中都存在 id 列`items`，`categories`这使得在使用此查询结果的前端应用程序中引用它变得不明确

获取给定项目名称的特定类别名称

```
select c.name
  from items i
  join itemCategories ic on i.id = ic.itemID
  join categories c on c.id = ic.categoryID
 where i.name = 'itemname' 
```

注意：如果一个项目可以在多个类别中，这可以返回多个类别名称。

# php - 无法使用 jquery 从其他域获取 iframe 的值？

> ID：13169889
> 
> 赞同：-1
> 
> 时间：2012-11-01T01:44:56.643
> 
> 标签：php, jquery, jsonp

我有一个例子：

在域 1 中：`www.domain1.com/demo.php`

```
<div id="result">Hello</div> 
```

在域 2 中：`www.domain2.com/demo.php`

```
jQuery(document).ready(function($) { 
   $('.click').click(function(){
      var value = $("a").attr("href");
      var dataString = 'var='+value;
      var url = 'http://www.domain1.com/test.php?'+dataString;
      $.getJSON(url + "&jsoncallback=?", function(data){
         $("#result").html(data);
      })
      return false;
   });  
});

<iframe src="http://www.domain1.com/demo.php" frameborder="0" border="0" scrolling="no"></iframe>
<a href="play" class="click">Click on this</a> 
```

最后`www.domain1.com/test.php`我调用 json 回调：

```
<?php
if($_GET['var']) {
    $value = $_GET['var'];
    echo $_GET["jsoncallback"] . '(' . json_encode($value) . ');';
}
?> 
```

=> 我无法从域 1 到域 2 获得价值？

测试后，我运行`www.domain2.com/demo.php`的是结果不显示

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T01:47:59.257

这样做的原因是浏览器出于安全原因会阻止请求。这可能允许网站使用您当前的登录名在后台加载另一个网站，然后窃取私人信息。

例如，我登录我的银行帐户并查看我的信用卡，然后我在另一个选项卡中访问“imavirus.com”，它会将隐藏的 iframe 加载到我的银行。当我登录银行网站时，它会加载登录并显示我的信用卡信息。（这可能是一个不好的例子，因为银行通常有更好的安全性，但你明白了）

在 Chrome 中尝试一下，您会看到“检查元素”窗口中弹出一个红色的小错误。（其他浏览器可能也有类似的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T02:11:30.290

如果您可以访问从 iFrame 访问的域上的代码，则可以尝试添加此标头：

```
// In PHP, before any output is sent...
header( "Access-Control-Allow-Origin: http://www.domain2.com" ); 
```

这将允许您的 AJAX 请求返回结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T05:09:22.783

出于安全原因，您不能直接访问跨域 iframe。

但是有一些解决方案。

看看这个很好的例子： http: [//onlineaspect.com/uploads/postmessage/parent.html](http://onlineaspect.com/uploads/postmessage/parent.html) 在这篇文章中：http: [//onlineaspect.com/2010/01/15/backwards-compatible-postmessage/](http://onlineaspect.com/2010/01/15/backwards-compatible-postmessage/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T01:49:45.287

那是您面临的跨域问题。为什么不花点时间看看[这个教程](http://usejquery.com/posts/the-jquery-cross-domain-ajax-guide)呢？

此外，如果您在 SO 上搜索，也有[一篇很好的帖子](https://stackoverflow.com/questions/3506208/jquery-ajax-cross-domain)供您参考。

# java - 为什么@MatrixParam 值似乎只来自最后一段？

> ID：13169890
> 
> 赞同：5
> 
> 时间：2012-11-01T01:45:26.213
> 
> 标签：java, tomcat, uri, jax-rs

我正在探索在 JAX-RS 应用程序中使用[MatrixURI 。](http://www.w3.org/DesignIssues/MatrixURIs.html)在此过程中，我注意到[@MatrixParam](http://jsr311.java.net/nonav/releases/1.1/javax/ws/rs/MatrixParam.html)注释参数似乎只能从最后一段获取矩阵参数（这使得尝试使用[子资源定位器](http://jersey.java.net/nonav/documentation/1.15/user-guide.html#d4e374)有点痛苦）。我想知道这是一个错误，还是规范的一部分（为什么？），或者只是一个未定义的裂缝。

我知道我可能会设计一种方法来使用 @Context 注入的[UriInfo](http://jsr311.java.net/nonav/releases/1.1/javax/ws/rs/core/UriInfo.html)对象（它会根据在定位器链中的位置而改变），但这感觉很难看。

快速浏览[JAX-RS 1.1 规范](http://jcp.org/aboutJava/communityprocess/mrel/jsr311/index.html)......我能找到的最接近这个不受支持的是：§3.2

> 由于注入发生在对象创建时，因此仅在默认的每个请求资源类生命周期中支持在资源类字段和 bean 属性上使用这些注释（@Context 除外）。

但这是在谈论构造函数/字段注入，而不是 §3.3.2 中的方法参数：

> 当调用资源方法时，使用@FormParam 或3.2 节中列出的注释之一注释的参数根据注释的语义从请求中映射。

但是，注释的语义当然看起来很模糊。

# 运行时环境详细信息：

*   泽西 1.13, 1.15
*   雄猫 7.0.29
*   Java 1.6.0_31（苹果）
*   macOS X 10.7.5

# 示例资源：

```
public class Zero {

    public static final String[] IDS = { "1", "2", "3" };

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public Map<String, Object> getMe(@Context final UriInfo info) {
        final UriBuilder builder = info.getAbsolutePathBuilder().path("one");
        final UriBuilder two = builder.clone().matrixParam("id", "{one}", "{two}");

        final List<String> links = new ArrayList<String>();
        for (int i = 0; i < IDS.length; i++) {
            final String first = IDS[i];
            for (int j = i + 1; j < IDS.length; j++) {
                final String second = IDS[j];
                links.add(two.build(first, second).toASCIIString());
            }
        }

        final Map<String, Object> toReturn = new HashMap<String, Object>();
        toReturn.put("class", getClass().getSimpleName());
        toReturn.put("next", builder.build().toASCIIString());
        toReturn.put("skip", links);

        return toReturn;
    }

    /*************************/
    /**** <PROBLEM CHILD> ****/
    /*************************/
    @Path("one")
    public Object getNext(@MatrixParam("id") final Set<String> ids) {
        if (ids.isEmpty()) {
            return new One();
        }
        return new Two(ids.toArray(new String[ids.size()]));
    }
    /*************************/
    /**** </PROBLEM CHILD> ***/
    /*************************/

    public static class One {
        @GET
        @Produces(MediaType.APPLICATION_JSON)
        public Map<String, Object> getMe(@Context final UriInfo info) {
            final UriBuilder builder = info.getAbsolutePathBuilder().path("{id}");
            final List<String> links = new ArrayList<String>();
            for (final String id : IDS) {
                links.add(builder.build(id).toASCIIString());
            }
            final Map<String, Object> toReturn = new HashMap<String, Object>();
            toReturn.put("class", getClass().getSimpleName());
            toReturn.put("next", links);
            toReturn.put("last", getLastURI(info));
            return toReturn;
        }

        @Path("{id}")
        public Two getNext(@PathParam("id") final String id) {
            return new Two(id);
        }
    }

    public static class Two {

        private final String[] myids;
        private final Three three;

        public Two(final String... ids) {
            three = new Three(ids);
            myids = ids;
        }

        @GET
        @Produces(MediaType.APPLICATION_JSON)
        public Map<String, Object> getMe(@Context final UriInfo info) {
            final UriBuilder builder = info.getAbsolutePathBuilder().path("three");
            final Map<String, Object> toReturn = new HashMap<String, Object>();
            toReturn.put("class", getClass().getSimpleName());
            toReturn.put("ids", myids);
            toReturn.put("next", builder.build().toASCIIString());
            toReturn.put("last", getLastURI(info));
            return toReturn;
        }

        @Path("three")
        public Three getNext() {
            return three;
        }
    }

    public static class Three {
        private final String[] myids;

        public Three(final String... ids) {
            myids = ids;
        }

        @GET
        @Produces(MediaType.APPLICATION_JSON)
        public Map<String, Object> getMe(@Context final UriInfo info) {
            final Map<String, Object> toReturn = new HashMap<String, Object>();
            toReturn.put("class", getClass().getSimpleName());
            toReturn.put("ids", myids);
            toReturn.put("last", getLastURI(info));
            return toReturn;
        }
    }

    /**
     * Helper method since info.getMatchedURIs doesn't play nice with Matrix Params
     * @param info info object
     * @return parent URI
     */
    public static final String getLastURI(final UriInfo info) {
        final List<PathSegment> segments = info.getPathSegments(false);
        final UriBuilder builder = info.getBaseUriBuilder();
        for (int i = 0; i < segments.size() - 1; i++) {
            final PathSegment segment = segments.get(i);
            builder.path(segment.getPath());
            final MultivaluedMap<String, String> matrixParams = segment.getMatrixParameters();
            if (!matrixParams.isEmpty()) {
                for (final Map.Entry<String, List<String>> param : matrixParams.entrySet()) {
                    final String name = param.getKey();
                    final String[] values = param.getValue().toArray(new String[param.getValue().size()]);
                    builder.matrixParam(name, values);
                }
            }
        }
        return builder.build().toASCIIString();
    }
} 
```

# 上面的示例输出：

## `http://localhost:8080/context/zero/one/2`

```
{
"last":"http://localhost:8080/context/zero/one",
"ids":["2"],
"next":"http://localhost:8080/context/zero/one/2/three",
"class":"Two"
} 
```

## `http://localhost:8080/context/zero/one/2/three`

```
{
"last":"http://localhost:8080/context/zero/one/2",
"ids":["2"],
"class":"Three"
} 
```

## `http://localhost:8080/context/zero/one;id=1;id=2`

```
{
"last":"http://localhost:8080/context/zero",
"ids":["2","1"],
"next":"http://localhost:8080/context/zero/one;id=1;id=2/three",
"class":"Two"
} 
```

## `http://localhost:8080/context/zero/one;id=1;id=2/three`

```
{
"last": "http://localhost:8080/context/zero/one;id=1;id=2",
"ids": ["three"],
"next": "http://localhost:8080/context/zero/one;id=1;id=2/three/three",
"class": "Two"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-07T18:33:19.030

我不能肯定地说，但我怀疑这是设计使然。假设您有一个像这样的两级 URI：

```
/foo/bar 
```

在这两个级别上，都可以有一个名为 filter 的矩阵参数。您最终可能会得到这样的 URL：

```
/foo;filter=13/bar;filter=April 
```

在该路径的 Jersey 资源中，您将拥有一个使用 @MatrixParam("filter") 注释的参数。Jersey 应该填写哪个过滤器参数？如果没有提供其中一个怎么办？

刚刚实现了一些矩阵参数，我可以看到当前实现中的值。指定 @MatrixParam 仅拉出最后一个级别。如果您需要 URI 中前面的矩阵参数，请指定 @PathParameter 并将参数类型设置为 PathSegment。从路径段中，您可以提取矩阵参数。

很多时候，资源类会有一个全局@Path，每个方法都有自己的@Path 添加到类级别设置。在这种情况下，@MatrixParameter 仅适用于最后一个路径段似乎更有意义。

因此，将所有这些放在一起（对于我们上面的示例）会产生以下结果

```
@Path("{fooPath: foo}")
public class FooResource {

@GET
@Path("bar")
public String getFooBar(@PathParam("fooPath") PathSegment fooPath,
    @MatrixParam("filter") String filter) {
    MultivaluedMap<String, String> mParms = fooPath.getMatrixParameters();
    List<String> parms = mParms.get("filter");
    String fooFilter = parms.get(0);
    // ... the rest of your code
    }
} 
```

# winapi - Win32 如何将位图保存到文件中

> ID：13169895
> 
> 赞同：1
> 
> 时间：2012-11-01T01:46:06.303
> 
> 标签：winapi, bitmap, save

我知道这个问题可能已经被问了很多，但我遇到了问题。基本上，我的程序允许您使用各种笔在屏幕上绘画。我有一个保存按钮所有设置的案例声明，我只是不知道如何将窗口上绘制的内容的副本保存到我的文档中。

以下是我目前拥有的一些内容：

```
RECT client;
GetClientRect(hWnd, &client);

int width = client.right - client.left;
int hight = client.bottom - client.top;

hdc = BeginPaint(hWnd,&ps);

HDC backDC = CreateCompatibleDC(hdc);
HBITMAP backbuffer = CreateCompatibleBitmap(hdc, width, hight);

Rectangle(backDC, client.left, client.top, client.right, client.bottom);

BitBlt(hdc, 0,0,width,hight, backDC, 0,0,SRCCOPY);

DeleteDC(backDC);
DeleteObject(backbuffer);
ReleaseDC(hWnd, hdc); 
```

# scheme - 使用 MIT 方案绘制图形

> ID：13169897
> 
> 赞同：6
> 
> 时间：2012-11-01T01:46:27.807
> 
> 标签：scheme, mit-scheme

我希望使用 MIT 方案以图形方式绘制函数。在方案手册中，有一个名为“图形”的部分——引用：

```
MIT Scheme has a simple two-dimensional line-graphics interface that is 
suitable for many graphics application. 
```

如果您遇到这种情况，请通过粘贴与 MIT/scheme 一起使用的最小工作代码（KISS 原则）来帮助我，并绘制一些东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T07:37:10.890

看起来[本](http://www.gnu.org/software/mit-scheme/documentation/mit-scheme-ref/Graphics.html#Graphics "麻省理工学院/GNU 计划")手册包含每个单独功能的文档，但每个功能的完整示例似乎都不存在于任何在线文档中。我能够找到工作代码的唯一方法是谷歌搜索实际的函数名称，并仔细检查每个结果以获取可能的代码示例。

无论如何，为了满足您的问题并为您提供该库如何工作的简单示例，这里是示例代码。

```
 (let ((device (make-graphics-device (car (enumerate-graphics-types))))
          (x-start 0)
          (y-start 0)
          (x-end 5)
          (y-end 5))
      (graphics-draw-line device x-start y-start x-end y-end)
      (graphics-close device)) 
```

如果您需要更多示例，请告诉我，但代码和文档应该足以让您继续前进。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-23T13:37:14.687

我想补充一点，seisvelas (1/11/12) 给出的代码虽然正确，但在我的 64 位 Linux 系统上不起作用。
（根据 alinsoar 的观察进行编辑）这是因为窗口在 let 的范围内被关闭，所以它确实有效，但它发生得太快而无法观察。

试试这样：

```
(define device (make-graphics-device (car (enumerate-graphics-types))))
(graphics-draw-line device 0 0 5 5)
;; when you're good and ready
(graphics-close device) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-20T01:15:35.127

Mac OSX 用户需要注意的一件事是您需要安装并启动 XQuartz，否则`(enumerate-graphics-types)`将始终为空。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-12T05:38:15.213

我正在为 Windows 用户[源代码开发绘图实用程序](https://github.com/086709/plotlib)

它只是由 mit-scheme 中的“图形”提供的原语构建而成，但允许您绘制函数和矢量场。

# c# - 隐藏 ListBox 控件中的垂直滚动条

> ID：13169900
> 
> 赞同：8
> 
> 时间：2012-11-01T01:46:43.030
> 
> 标签：c#, winforms, listbox

我正在开发一个需要`ListBox`控件的应用程序。不幸的是，当我在 中添加太多项目时`ListBox`，会显示一个垂直滚动条。我可以做些什么来隐藏由 显示的垂直滚动条`ListBox`吗？我可以看到有一个隐藏水平滚动条的属性，但没有垂直滚动条的属性。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T02:17:06.023

问题解决了。我只是使用以下代码创建了一个模板类库的新项目

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace ClassLibrary1
{
    public class MyListBox : System.Windows.Forms.ListBox
    {
        private bool mShowScroll;
        protected override System.Windows.Forms.CreateParams CreateParams
        {
            get
            {
                CreateParams cp = base.CreateParams;
                if (!mShowScroll)
                    cp.Style = cp.Style & ~0x200000;
                return cp;
            }
        }
        public bool ShowScrollbar
        {
            get { return mShowScroll; }
            set
            {
                if (value != mShowScroll)
                {
                    mShowScroll = value;
                    if (IsHandleCreated)
                        RecreateHandle();
                }
            }
        }
    }    
} 
```

然后，我构建了输出新类库的项目**`ClassLibrary1.dll`**

在我的主项目中，我右键单击**`ToolBox`**并选择了**`Choose Items...`**. 单击**Browse...**并选择我最近创建的类库 (ClassLibrary1.dll) 并单击**Open**然后**单击 OK**。因此，我能够`ListBox`拥有不再有垂直滚动条的自定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T02:06:37.257

除了水平滚动条之外，正常使用是无法关闭垂直滚动条的。

您只能使用该属性将其设置为始终可见或自动`ScrollAlwaysVisible`（也在 VB 中）。

当您添加项目时，您可以通过计算重新计算 ClientSize，如下所示（未经测试，您可能还需要向其添加 Padding 值）：

```
 Size sz = new Size(ListBox1.ClientSize.Width, _
                    ListBox1.Items.Count * ListBox1.Font.Height);
 ListBox1.ClientSize = sz 
```

当然，您应该检查该值以防它为零，和/或您想要一个最小/最大高度。

# python - 被定义类型的类常量

> ID：13169901
> 
> 赞同：1
> 
> 时间：2012-11-01T01:46:51.440
> 
> 标签：python, class, singleton

在 Python 中，是否有任何要声明所声明类型的类成员？

```
class Foo:
    def __init__(self, a, b):
        self.one = a
        self.two = b

    ZERO = Foo(0, 0)
    ONE = Foo(0, 1) 
```

问题似乎源于这样一个事实，即`Foo`在评估时该类没有完全定义，`Foo.ZERO`并且`Foo.ONE`- 有没有办法在保持 的形式的同时克服这个问题`Foo.MEMBER`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T02:00:49.883

这似乎有效：

```
class Enum(object):
    def __init__(self, a, b): 
        self.one = a
        self.two = b 

    def __metaclass__(name, bases, dict):
        cls = type(name, bases, dict)
        cls.ZERO = cls(0, 0)
        cls.ONE = cls(0, 1)
        return cls 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T01:56:01.093

可以这样做：

```
class Foo:
    def __init__(self, a, b):
        self.one = a
        self.two = b

Foo.ZERO = Foo(0, 0)
Foo.ONE = Foo(0, 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T01:56:00.177

我认为这是不可能的！（也许我不清楚）如果可能的话，那么这是因为，Foo 的成员 ZERO 也会生成 Foo，并且再次......

我认为如果可以产生类，python也会提醒你或其他东西。

# javascript - 是否有任何占用空间小且格式良好的 JavaScript 语法荧光笔？

> ID：13169903
> 
> 赞同：0
> 
> 时间：2012-11-01T01:47:32.127
> 
> 标签：javascript, syntax-highlighting

好的，所以我尝试了似乎最流行的语法荧光笔

[http://alexgorbatchev.com/SyntaxHighlighter/](http://alexgorbatchev.com/SyntaxHighlighter/)

但是文件很大，包含它似乎有点重，我觉得突出显示的代码的格式看起来很难看。

有没有其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T02:05:22.337

[Google 的 Prettify](http://code.google.com/p/google-code-prettify/)更小更轻，但在 JavaScript 中运行的语法高亮器本身就很大，尤其是在它必须支持多种语言的情况下。一种选择是运行像[Pygments](http://pygments.org/)这样的服务器端的东西，但这取决于你在做什么，设置起来有点困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T02:27:52.160

[Rainbow](http://craig.is/making/rainbows/)重量轻，效果很好。

那里有一些，谷歌是你的朋友（我只能发布两个超链接，抱歉！否则，我会发布更多我发现的内容。）

这是我找到的另一个链接：

*   [http://www.dreamcss.com/2009/07/10-syntax-highlighters-to-enhance-your.html](http://www.dreamcss.com/2009/07/10-syntax-highlighters-to-enhance-your.html)

希望您发现其中一个有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T15:31:00.397

谢谢你的答案，我看了那些荧光笔，。我喜欢彩虹的轻盈。但不是造型的粉丝。Google 的 Prettify 也不错，虽然文件大小是 Rainbow 的两倍。最后我决定自己动手。如果有人感兴趣，我会在 bitbucket 上放一个版本。

[https://bitbucket.org/SharkAttack/syntax-highlighter](https://bitbucket.org/SharkAttack/syntax-highlighter)

# vba - 使用 Powerpoint vba 调整图片大小

> ID：13169905
> 
> 赞同：1
> 
> 时间：2012-11-01T01:47:37.730
> 
> 标签：vba, powerpoint, image-resizing

我正在尝试使用 powerpoint vba 调整我从 Excel 粘贴到 powerpoint 中的图片的大小。

我的代码说：

`ActivePresentation.Slides(9).Select Application.ActiveWindow.View.PasteSpecial DataType:=ppPasteEnhancedMetafile`

这部分工作正常，我不知道如何在下一步中调整图片大小。我是使用 powerpoint vba 的新手。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T14:00:00.903

*   除非绝对必须，否则永远不要选择任何东西，而且你很少必须.. 获取对形状的引用。

*   您实际上不需要查看幻灯片来操作该幻灯片上的形状

*   使用形状的 .Top、.Left、.Height 和 .Width 属性设置其位置和大小

例子：

```
Dim oSh As Shape

Set oSh = ActivePresentation.Slides(9).Shapes.PasteSpecial(ppPasteEnhancedMetafile)(1)
' .PasteSpecial returns a ShapeRange; the (1) at the end of the line above
' returns the first shape in the range. W/o that, you get a type mismatch error
' from trying to assign a range to a shape

With oSh
   ' Set position:
  .Left = 0
  .Top = 0
   ' Set size:
  .Height = 100
  .Width = 200
End With 
```

# c# - 在哪里放置某些类型的证书的约定是什么？

> ID：13169909
> 
> 赞同：0
> 
> 时间：2012-11-01T01:48:39.117
> 
> 标签：c#, certificate, store, convention

我试图了解如何在 Windows 上以编程方式正确安装 CA、服务器和客户端 SSL 证书。在搜索特定类型的证书时，我无法发现要使用的任何总体方案或约定。似乎 Root 用于 CA，Trusted People 用于客户端证书和服务器证书，但我只能从我能找到的示例以及我已经看到安装在典型机器上的证书中猜测。各种浏览器使用什么算法？当您安装已声明其用途的证书时，算法窗口使用什么？是否有 RFC 或其他定义这个的东西？

具体来说，我该如何：使用 c# 在 Windows 机器上找到所有受信任的客户端 SSL 证书？受信任的服务器证书和受信任的 CA 根和中间证书也是如此。以编程方式放置每种类型的证书以便所有浏览器都可以找到它们的最佳逻辑和物理位置在哪里？

这里似乎需要枚举所有可能的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T18:34:04.390

我自己找到了答案。转到 RFC（我在[这里](http://www.ietf.org/rfc/rfc2459.txt)找到了）。我强烈建议任何第一次尝试做任何证书工作的人花一天时间阅读这本 123 页的 Geekness 书籍。我避免使用它是因为我讨厌翻阅大量乏味的文档 - 但事实是，证书并不简单，首先阅读此 RTF 将使您免于许多错误的猜测。它将为您提供了解 OpenSLL 或任何其他与证书相关的工具所需的背景知识。

# mysql - mysql第三张表关系SELECT

> ID：13169916
> 
> 赞同：0
> 
> 时间：2012-11-01T01:50:07.423
> 
> 标签：mysql, sql, select, left-join

我正在尝试使用三个相关的表运行此查询，如下所示：

1.  表 1：ADS。

    *   它有字段 ADID（这是广告的唯一 ID）
2.  表 2：用户。

    *   它有一个字段 NAME（这是用户名）。
    *   每个用户都可以是推销员，也可以不是。
3.  表 3：销售员。

    *   它具有字段 USERID（这是捕获广告的用户 ID）

SALESMAN 表有 ADID 来链接 ADS 表的 ADID。所以 SALESMAN 表中的每一行都保留了 USER 和 AD。

我想要的是 ADS 表行的列表，但通过 SALESMAN 表包含在 USERS 表 (NAME) 中的 USER 的名称。

**这是我的问题**

```
SELECT  USERS.name AS Salesma
FROM    ADS AS N
        LEFT JOIN SALESMAN AS V1 ON N.adid = V1.adid
        LEFT JOIN USERS AS U1 ON V1.uid = U1.uid 
```

我收到以下错误消息：

```
Unknown column 'users.name' in 'field list' 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T01:51:19.863

使用`alias`提供的而不是表名，

```
U1.name 
```

完整的查询

```
SELECT  U1.name AS Salesman
FROM    ADS AS N
        LEFT JOIN SALESMAN AS V1 ON N.adid = V1.adid
        LEFT JOIN USERS AS U1 ON V1.uid = U1.uid 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/ed604/6)

# php - 使用 SQL 创建足球赛程？

> ID：13169921
> 
> 赞同：0
> 
> 时间：2012-11-01T01:50:57.923
> 
> 标签：php, sql

很难解释，但说我有一个名为“团队”的表，它包含 5 个团队，如下所示：

```
 team_id, teamname, manager
   1,       Team1,    1
   2,       Team2,    10
   3,       Team3,    3
   4,       Team4,    5
   5,       Team5,    6 
```

我需要创建另一个与此类似的表（例如名为 TeamFixtures）

```
 id, HomeTeam, HomeScore, AwayScore, AwayTeam
                  NULL        NULL 
```

我如何让 HomeTeam 和 AwayTeam 成为“teams”表的 team_id？

每支球队都需要这个，这样他们就可以在主场和客场比赛中互相交手两次。

有没有一个查询可以让我更快，而不是输入固定装置 1by1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T02:55:15.063

当一个关系的属性是另一个关系的键时，它被称为[外键](http://en.wikipedia.org/wiki/Foreign_key)。

对于您的`TeamFixtures`表，您将有两个外键`hometeam`和`awayteam`.

你的`CREATE`陈述看起来像：

```
CREATE TABLE teamfixtures(
    ...
    hometeam INT,
    awayteam INT,
    ...
    CONSTRAINT fk_hometeam FOREIGN KEY(hometeam) REFERENCES teams, 
    CONSTRAINT fk_awayteam FOREIGN KEY(awayteam) REFERENCES teams,
    CONSTRAINT ck_teams CHECK(hometeam <> awayteam)
    ) 
```

# ios - 如何在最后一个完成之前停止方法执行

> ID：13169923
> 
> 赞同：0
> 
> 时间：2012-11-01T01:51:00.410
> 
> 标签：ios, multithreading, methods

我有 3 节课

*   查看课程
*   请求类
*   响应类

Ia 从我的视图类中调用我的请求类中的两个方法，如下所示；

```
[eRequests GetM:IdString];
[eRequests GetY:IdString SubID:subIdString]; 
```

我的线程开始执行第一行并在它的进程中进行到一半，然后下一个请求甚至在第一个请求返回之前就开始了。

我想防止这种情况发生，但是我不确定如何进行。

阻止我的是像这样的请求将通过这些步骤

1.  调用请求方法 - ViewClass 内部
2.  创建数据包并发送请求接收从数据库返回的数据 - 内部请求类
3.  将数据发送到 ResponseClass - 在 Requestclass 中
4.  解码数据并将相关信息发送回 ViewClass 中的接收器方法 - 内部响应类

我一直坚持的事情是当线程回到视图类但在不同的方法中我如何回到第二个请求？

无论如何，如果有人可以提供一些帮助，让我一次执行一个方法调用，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:36:50.173

您的描述非常混乱。执行发布代码的“我的线程”是什么？是请求线程还是响应线程？为什么需要“回到第二个请求”？步骤 1-4 试图解释是 Response 对象正在回调 View，然后在下一句中再次谈论 Request? 那么它是哪个线程呢？

从您使用的单词中，我只是猜测您正在进行简单的竞争条件，这意味着 eRequest 是共享资源，因此需要互斥

```
@synchronized(eRequests) {
 [eRequests GetM:IdString];
 [eRequests GetY:IdString SubID:subIdString];
} 
```

但我仍然不明白“回到第二个请求”部分。

# .net - ActionExecutingContext - ActionParameters 与 RouteData

> ID：13169937
> 
> 赞同：15
> 
> 时间：2012-11-01T01:54:11.467
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing, action-filter

给定以下代码：

```
public class MyActionFilter : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        var a = filterContext.ActionParameters["someKey"];
        var b = filterContext.RouteData.Values["someKey"];          
        base.OnActionExecuting(filterContext);
    }
} 
```

`a`和 和有什么不一样`b`？

我们什么时候应该在路由数据上使用动作参数？有什么不同？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-07-03T11:50:17.753

当您使用`ActionParameters`on 时`OnActionExecuting`，您可以在处理操作之前更改客户端发送的值，例如：

```
public class MyActionFilter : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        filterContext.ActionParameters["customerId"] = 852;

        base.OnActionExecuting(filterContext);
    }
} 
```

如果您有使用 customerId 参数的操作，您将获得在操作过滤器上设置的值，因为您的操作具有过滤器，例如：

当您请求任何这样的 url:`/customer/detail/123`时，您将获得`852`CustomerId 的值：

```
[MyAction]
public ActionResult Detail(int customerId)
{
   // customerId is 852

   return View();
} 
```

`RouteData`只是值在 url 上，由路由表处理。

# windows - 如何检查哪个应用程序正在使用 msvcr80.dll？

> ID：13169938
> 
> 赞同：2
> 
> 时间：2012-11-01T01:54:11.630
> 
> 标签：windows, dll, setup-deployment, msvcrt

我有一个使用发布配置使用**MSVC2005**编译的**.exe 。**问题是当我将此**.exe**分发给其他人时，他们会收到以下消息：

 ****"`This application could not be started, because the application configuration is incorrect. In order to solve the problem you should reinstall the application."`

我给了他们**vcredist.exe**，它解决了这个问题。但是，我想知道为什么这只发生在某些PC上？到目前为止，我有 1 台 PC 无法运行 .exe ，另一台可以运行**.exe**。两者都安装了相同的应用程序。可以运行我的.exe的电脑安装了**msvcr80.dll**，不能运行的电脑没有**msvcr80.dll。**

有谁知道为什么某些PC没有安装**msvcr80.dll ？**由于两台 PC 都安装了相同的操作系统和应用程序。

是否有一些工具可以检查哪个应用程序正在使用哪个 dll？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:41:23.847

> 有谁知道为什么某些PC没有安装msvcr80.dll？由于两台 PC 都安装了相同的操作系统和应用程序。

Windows 没有预装任何版本的 C 运行时库。C 运行时库可以由运行 vcredist 的人安装，也可以通过安装依赖于它并在其自己的安装程序中包含它的副本的应用程序来安装。

仅仅因为您正在查看的两台 PC 安装了相同的应用程序并不意味着它们具有相同的安装历史。也许一台 PC 安装了一个包含运行时库的应用程序，然后卸载了该应用程序，但该库被留下了。

如果您尝试分发依赖于 C 运行时库（或 redist 包中的另一个库）的应用程序，您的选择是：

1.  要求您的用户获取并安装 vcredist。
2.  包含必要库的副本并将其安装在与可执行文件相同的目录中。
3.  链接到运行时库的静态副本。
4.  在您的 .MSI 安装程序中包含运行时库合并模块，如果它尚未安装在公共位置，它将安装运行时库。

> 是否有一些工具可以检查哪个应用程序正在使用哪个 dll？

Visual Studio 曾经附带一个名为depends.exe 的工具，该工具检查可执行文件或DLL 并传递查找它需要的所有DLL。不再支持此工具，因为它在较新版本的 Windows 中不具有“并排”安装功能。但我相信有一个免费（开源？）版本的depends.exe 可用。

如果您只想知道某个特定的可执行文件是否直接依赖于 DLL，您可以使用 dumpbin，这是 Visual Studio 中包含的命令行工具。如果使用`dumpbin /imports myapp.exe`，您可以看到它所依赖的所有 DLL（但不一定是那些 DLL 所依赖的 DLL）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T08:30:36.040

如果某些计算机已经安装了使用 msvc 2005 构建的程序，那么您的 exe 副本就可以工作。我不认为任何版本的操作系统都预装了 msvc 可再发行组件。

如果在应用程序运行时您想知道它是否使用特定版本的 msvc 运行时，您可以使用进程资源管理器 - 一种 Microsoft 工具，以尽可能多地显示有关进程的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:28:11.967

静态链接 C 运行时是解决此问题的另一种方法。下面是如何做到这一点：[静态链接](http://msdn.microsoft.com/en-us/library/2kzt1wy3%28v=vs.71%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T04:46:29.270

回复“是否有一些工具可以检查哪个应用程序正在使用哪个 dll？” 读[这个](https://superuser.com/a/399660/163735)。提供 vcredist.exe 解决了这个问题，因为他们的系统中没有安装 Microsoft Visual C++ 2010 Redistributable Package (x86)/最新版本。可以从[微软官网](http://www.microsoft.com/en-us/download/details.aspx?id=5555)下载。另外，如果您对命令行感兴趣，可以查看命令[tasklist](http://technet.microsoft.com/en-us/library/bb491010.aspx)。****

# java - 使用 MIDI 刻度位置控制图形标记在序列中的移动

> ID：13169941
> 
> 赞同：2
> 
> 时间：2012-11-01T01:54:57.400
> 
> 标签：java, swing, midi, javasound

我正在尝试组装 MIDI 序列的图形表示，并且我想要一条垂直线在序列播放时水平移动面板，以反映序列中的实际位置。我知道我应该使用类似的东西`getTickPosition()`来提供垂直线的位置。

但是我如何触发这些事件，以便垂直线知道重绘自己？我是否创建了一个特殊的监听器以某种方式触发滴答声？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T01:59:59.973

建立一个 Swing`Timer`以每 NN 毫秒检查和更新刻度位置。

> 那么，MidiSystem 中没有任何类型的内置计时器吗？

当然有。但关键是所有 GUI 更新都应该在 EDT 上进行。通过从 Swing 调用它们`Timer`，它们是。另外，MIDI 定时器是供 MIDI API/System 使用的，让它不受干扰地做它所做的事情，并在从 Swing 中检查时报告相关信息`Timer`。

此外，鉴于 UI 组件的性质，请查看`JProgressBar`此 GUI 右上角的 a。

![杜克盒图形用户界面](../Images/81bb082266ffa722a779effa0ec4cc73.png)

## 更新

我将[Java Sound WIKI](https://stackoverflow.com/tags/javasound/info)上的源代码改编为这种方法的 SSCCE。

![播放 MIDI 显示进度](../Images/1af2a11196ed6dd68b14b1780e93481a.png)

```
import javax.sound.midi.*;
import javax.swing.*;
import java.awt.event.*;
import java.net.URL;

class PlayMidi {

    public static void main(String[] args) throws Exception {
        URL url = new URL("http://pscode.org/media/EverLove.mid");
        Sequence sequence = MidiSystem.getSequence(url);
        final Sequencer sequencer = MidiSystem.getSequencer();
        sequencer.open();
        sequencer.setSequence(sequence);
        Runnable r = new Runnable() {
            public void run() {
                final JProgressBar progress = new JProgressBar(0,(int)sequencer.getMicrosecondLength()); 
                ActionListener updateListener = new ActionListener(){
                    public void actionPerformed(ActionEvent arg0) {
                        progress.setValue((int)sequencer.getMicrosecondPosition());
                    }
                };
                Timer timer = new Timer(40,updateListener); 
                sequencer.start();
                timer.start();
                JOptionPane.showMessageDialog(null, progress);
                sequencer.close();
                timer.stop();
            }
        };
        SwingUtilities.invokeLater(r);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T05:48:19.970

我会仔细看看下面的教程。

[http://docs.oracle.com/javase/tutorial/sound/MIDI-seq-adv.html](http://docs.oracle.com/javase/tutorial/sound/MIDI-seq-adv.html)

有几个不同的东西可能有用：与其他设备同步的工具和特殊事件监听器。以下（关于*slave*）看起来特别有希望：

> Sequencer 有一个名为 Sequencer.SyncMode 的内部类。SyncMode 对象表示 MIDI 音序器的时间概念可以与主设备或从设备同步的一种方式。如果音序器正在与主控同步，则音序器会修改其当前时间以响应来自主控的某些 MIDI 消息。如果音序器有从机，则音序器同样会发送 MIDI 消息来控制从机的时序。

如果您编写一个“MidiSlaveDevice”，唯一的工作就是将触发器发送到您的重绘，您可以获得所需场景的解决方案。请注意，我自己还没有这样做，所以我不完全确定它是否有效。

# java - Java中的#ifdef等价物？

> ID：13169943
> 
> 赞同：2
> 
> 时间：2012-11-01T01:55:23.923
> 
> 标签：java, android, conditional-compilation

> **可能重复：**
> [#ifdef #ifndef in Java](https://stackoverflow.com/questions/1813853/ifdef-ifndef-in-java)

我正在尝试使用以下内容在我的 Android 代码中实现一些调试消息：

```
private static final boolean DEBUG = false;

if (DEBUG) {
// some code
} 
```

但是，在编译时，我不断收到“Illegal start of expression”错误。final 布尔工作，但既不是静态工作也不是私人工作。

我在方法中声明了 DEBUG 变量。如果有一种方法可以使这个全局化，以便同一个 Java 文件中的所有内容都能看到它，而不是我必须在每个需要它的方法中声明它，我也会很感激。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T01:57:37.857

如果您希望该变量对该类中的所有方法可见，则必须在类级别声明该变量。

如果您在方法中执行以下操作：

```
private static final boolean DEBUG = false; 
```

问题是修饰符`private`和`static`方法中不允许使用。

* * *

实际上，您应该将 logger 用于这种目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T01:57:55.680

只需在类的顶部声明它（在方法之外但仍在类本身中）。

```
public class MyClass { 
    private static final boolean DEBUG = false;
    ... 
} 
```

这样，您可以`DEBUG`从您定义的每个方法访问`MyClass`. 您收到一个错误，因为在方法中定义变量时您不能使用`private`/`static`修饰符，您只能将它们与类字段一起使用（`public`and 也是如此`protected`- 但是您*可以*在任何地方使用`final`）。

# entity-framework - 为什么 EF 创建一个新的数据库而不是使用现有的数据库？

> ID：13169946
> 
> 赞同：0
> 
> 时间：2012-11-01T01:55:55.943
> 
> 标签：entity-framework

我有一个现有的 SQL Server Express 数据库，其中填充了数据。

我创建了一个围绕 EF 5 构建的新 VS 解决方案。我从现有数据库生成了 EDMX，并验证了`app.config`指向数据库的连接字符串`.\SQLEXPRESS`。

我为我的域对象创建了一个项目。

我添加了一个`DbContext`生成器。域对象也被生成。

一切都建立起来，控制台应用程序运行。

然而，问题是创建了一个新数据库而不是使用现有数据库。

为什么 EF 创建一个新的空数据库而不是使用我指定的现有数据库？我该如何解决？

这是`DbContext`课程：

```
public partial class ContactsEntities : DbContext
{
        public ContactsEntities()
            : base("name=ContactsEntities")
        {
        }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            throw new UnintentionalCodeFirstException();
        }

        public DbSet<Address> Addresses { get; set; }
        public DbSet<AddressType> AddressTypes { get; set; }
        public DbSet<Person> People { get; set; }
        public DbSet<Phone> Phones { get; set; }
        public DbSet<PhoneType> PhoneTypes { get; set; }
} 
```

和整个`app.config`：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>
    <add name="ContactsEntities" connectionString="metadata=res://*/PeopleModel.csdl|res://*/PeopleModel.ssdl|res://*/PeopleModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=(local)\sqlexpress;initial catalog=Contacts;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
</configuration> 
```

这是使用 T4Scaffolding 搭建的 PeopleContext：

```
 public class PeopleContext : DbContext
    {
        // You can add custom code to this file. Changes will not be overwritten.
        // 
        // If you want Entity Framework to drop and regenerate your database
        // automatically whenever you change your model schema, add the following
        // code to the Application_Start method in your Global.asax file.
        // Note: this will destroy and re-create your database with every model change.
        // 
        // System.Data.Entity.Database.SetInitializer(new System.Data.Entity.DropCreateDatabaseIfModelChanges<DataLayer.Models.PeopleContext>());

        public DbSet<Domain.Person> People { get; set; }
    } 
```

# c# - Extension 选择在 Linq 中使用哪个扩展

> ID：13169951
> 
> 赞同：4
> 
> 时间：2012-11-01T01:56:09.470
> 
> 标签：c#, .net, linq, linq-to-objects

是否可以选择在 Linq 中应用哪个函数？
我现在拥有的示例：

```
List<int> list = new List<int>();
bool bDescend = false;
var listOrdered = bDescend ? list.OrderByDescending(it => it) : 
                             list.OrderBy(it => it); 
```

您会看到我根据 bDescend 值选择要应用的函数 - 所以实际上有两个 Linq 查询，而不是一个。
是否可以通过将条件放在一个查询中来避免它？也许像

```
list.ChooseFunction(bDescend ? OrderBy : OrderByDescending)... 
```

真正的代码更复杂，如果这种技巧可能的话，它会使代码更具可读性。
看起来像一种元编程..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T02:03:46.510

您可以创建自己的扩展方法：

```
enum Ordering
{
    Ascending,
    Descending,
}

// trivial to convert to use booleans instead
// of an enum if that's truly what you need
public static IOrderedEnumerable<TSource> OrderBy<TSource, TKey>(
    this IEnumerable<TSource> source, Ordering ordering, Func<TSource, TKey> keySelector) 
{
    if (ordering == Ordering.Ascending)
    {
        return source.OrderBy(keySelector);
    }
    else
    {
        return source.OrderByDescending(keySelector);
    }
} 
```

然后像这样称呼它

```
var order = Ordering.Descending;
....
MyList.OrderBy(order, it => it); 
```

除此之外，可以制作`ChooseFunction`类型的东西，但它必须看起来像`ChooseFunction(bdescend ? "OrderBy" : "OrderByDescending")`，我什至不想了解那些引用函数名称的魔术字符串有多丑陋。您还必须对 ChooseFunction 扩展进行硬编码，或者依赖反射，这对于您尝试做的简单事情来说非常昂贵

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T02:12:30.720

您可以创建 2 个比较器：升序和降序，然后将其中一个传递给`OrderBy`方法，即：

```
list.OrderBy(it => it, asc ? new AscComparer() : new DescComparer()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T20:01:49.977

如果您不介意丢失扩展方法语法，您可以使用委托来指定排序方法：

```
List<int> list = new List<int>();

Func<IEnumerable<int>, Func<int, int>,IEnumerable<int>> sorter;
if (cond)
{
   sorter = Enumerable.OrderBy<int, int>;
}
else
{
   sorter = Enumerable.OrderByDescending<int, int>;
}

var sorted = sorter(list, _ => _); 
```

# jquery - 最新的 require.js 不适用于最新的 jQuery Mobile 和 knockout.js

> ID：13169952
> 
> 赞同：0
> 
> 时间：2012-11-01T01:56:15.087
> 
> 标签：jquery, jquery-mobile, knockout.js, requirejs

我有一个使用 require.js v2.0.4、knockout.js v2.2.0 和 jQuery Mobile 的 ASP.NET Web API 单页应用程序（所有 HTML5/CSS3/JavaScript 都与 Web API 对话以传输 JSON 数据） v1.2.0。使用 Nuget，我升级到了最新版本的 require.js (v2.1.1)。（注意：我只使用了 require.js。我删除了 r.js。过去我从来不需要它，就在一天前。）而且，现在我的应用程序无法正常工作。

在浏览器工具的网络选项卡上，我可以看到正在以正确的顺序下载脚本（即 jquery、jquery.mobile、其他脚本，包括 knockout.js，然后是 require.js）。但是，在错误控制台上，我看到以下错误：

```
require.js line 1746
Error: Mismatched anonymous define() module: function ($) {
            factory( $, root, doc );
            return $.mobile;
        }

require.js line 1746
Mismatched anonymous define() module: function (koExports) {
// Internally, all KO objects are attached to koExports (even the non-exported ones whose names will be minified by the closure compiler).
// In the future, the following "ko" variable may be made distinct from "koExports" so that private objects are not externally reachable.
var ko = typeof koExports !== 'undefined' ? koExports : {};
(a lot more error message here – left out for brevity) 
```

最新版本的 require.js、knockout.js 和 jQuery Mobile 是否存在兼容性问题？有没有其他人对同样的东西有问题/错误？我怎样才能使所有这些 3rd 方 JavaScript 库一起工作？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:35:59.410

我相信我得到了它的工作。我放错了页面和内容的数据属性（jQuery Mobile 的东西）。我也不知道为什么我也遇到了淘汰赛错误。但是，哦，好吧。现在我开始讨论下一个问题——让 sammy.js（仅用于基于哈希的导航）和 jQuery Mobile 一起很好地发挥作用（如果它甚至可能的话......）。谢谢。

# php - PHP - 使用 Twitter API 1.1 搜索主题标签

> ID：13169953
> 
> 赞同：3
> 
> 时间：2012-11-01T01:56:29.300
> 
> 标签：php, api, twitter, oauth

我正在尝试找到一种方法来使用主要的 Twitter API 来使用 PHP 搜索推文。最新的 1.1 文档说这应该是可能的。我不想使用[http://search.twitter.com](http://search.twitter.com) API。

我已经建立了一个 Twitter 应用程序并使用消费者、秘密等密钥通过亚伯拉罕的 twitteroauth (https://github.com/abraham/) 连接到它。我可以使用这种方法从 Twitter 中提取我自己的时间线和我自己的生物信息，但是当我尝试使用搜索时，它会失败并显示“缺少查询参数”。

我在该 Git 存储库中稍作修改的 test.php 中使用以下代码：

```
$parameters = array('q' => 'qwerty');
twitteroauth_row('search/tweets', $connection->get('search/tweets'), $connection->http_code,$parameters);

/* users/search */
$parameters = array('q' => 'brenmurrell');
twitteroauth_row('users/search', $connection->get('users/search', $parameters), $connection->http_code, $parameters);

/* statuses/public_timeline */
twitteroauth_row('statuses/user_timeline', $connection->get('statuses/user_timeline'), $connection->http_code,'q=twitpic'); 
```

最后两个调用按预期工作，第一个没有。我收到 400 HTTP 错误，特定的 API 错误代码为 25（缺少查询参数）。

我错过了什么吗？任何人都可以帮助解决可能出现问题的地方，或者这是否是真正损坏的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T00:34:09.680

我使用 search/tweets.json API 1.1（和用于 oauth 的 tmhOAuth php lib）遇到了完全相同的问题（“缺少查询参数”）。

API 文档：[https ://dev.twitter.com/docs/api/1.1/get/search/tweets](https://dev.twitter.com/docs/api/1.1/get/search/tweets)

编辑：我解决了我的问题。

tmhOAuth 正在删除我的查询字符串参数（即使它是一个 GET 请求）。参数需要在一个数组中一起发送。

tmhOAuth 之前

```
$code = $twitter->request(
    'GET',
    $twitter->url('1.1/search/tweets.json?q=test')
); 
```

tmhOAuth 之后（工作）

```
$code = $twitter->request(
    'GET',
    $twitter->url('1.1/search/tweets.json'),
    array(
        'q' => 'test'     
    )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T05:13:43.107

[https://api.twitter.com/1.1/search/tweets.json?q=shrmi14](https://api.twitter.com/1.1/search/tweets.json?q=shrmi14)

是我用的那个。

万一你觉得有问题。请参阅 [https://dev.twitter.com/console](https://dev.twitter.com/console) 以生成您自己的查询。

# jenkins - 如何在 Jenkins 中更改并发构建路径分隔符

> ID：13169960
> 
> 赞同：9
> 
> 时间：2012-11-01T01:57:36.717
> 
> 标签：jenkins

当将作业标记为能够在同一节点上同时运行时，Jenkins 将在正常工作区目录中附加一个 @X（其中 X 是并发构建的数量）以获得一个新的、唯一的工作区目录。通常，这一切都很好，但是我们遇到了一些工具，即使操作系统可以处理路径名中的@，也无法处理。

有什么方法可以将 @ 字符更改为其他内容吗？说可能是双下划线（__）或什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:47:12.470

这个线程可能会有所帮助：http: [//jenkins.361315.n4.nabble.com/Concurrent-executions-and-workspace-names-td4631221.html](http://jenkins.361315.n4.nabble.com/Concurrent-executions-and-workspace-names-td4631221.html)

...我可以使用系统属性来做到这一点。我相信 -Dhudson.slaves.WorkspaceList="=" 会成功的。

使用[https://wiki.jenkins-ci.org/display/JENKINS/Throttle+Concurrent+Builds+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Throttle+Concurrent+Builds+Plugin) Throttle Concurrent Builds 插件也可能有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-07T10:56:54.677

由于我不允许评论李斯的答案，这是我修改后的答案

利用`-Dhudson.slaves.WorkspaceList==`

否则它将在 [JENKINS]/workspace/myProject"="2

# ios - JavascriptCore->WebCore->iOS 应用程序上的 CFNetwork 崩溃

> ID：13169964
> 
> 赞同：2
> 
> 时间：2012-11-01T01:57:58.980
> 
> 标签：ios, crash, cfnetwork

在我们的一个应用程序中，我们看到一些带有以下回溯的崩溃。

```
Thread 8 Crashed:
0   CoreFoundation                      0x36a07202 CFEqual + 41
1   CoreFoundation                      0x00088c49 __CFDictionaryStandardEquateKeys + 37
2   CoreFoundation                      0x00002c3c CFBasicHashFindBucket + 2128
3   CoreFoundation                      0x36a07a8b CFDictionaryGetValue + 82
4   CFNetwork                           0x0001d77b SocketStream::copyProperty(void const*, __CFString const*) + 39
5   CFNetwork                           0x000ae181 CoreStreamBase::_streamInterface_CopyProperty(__CFString const*) const + 21
6   CFNetwork                           0x0006b7bf HTTPReadFilter::_streamImpl_CopyProperty(__CFString const*) const + 235
7   CFNetwork                           0x000ae181 CoreStreamBase::_streamInterface_CopyProperty(__CFString const*) const + 21
8   CFNetwork                           0x00017e11 NetConnection::willEnqueueRequests() + 65
9   CFNetwork                           0x000678fd HTTPNetConnection::prepareTransmission(HTTPNetStreamInfo*, __CoreWriteStream*) + 21
10  CFNetwork                           0x00017005 NetConnection::enqueue(void*, unsigned char) + 321
11  CFNetwork                           0x0006972d HTTPNetStreamInfo::_streamImpl_Open(CFStreamError*, unsigned char*) + 57
12  CFNetwork                           0x00069787 non-virtual thunk to HTTPNetStreamInfo::_streamImpl_Open(CFStreamError*, unsigned char*) + 11
13  CFNetwork                           0x000ae1b5 CoreStreamBase::_streamInterface_Open() + 45
14  CFNetwork                           0x0000641b HTTPProtocol::openStream() + 183
15  CFNetwork                           0x0007789d HTTPProtocol::useNetConnectionForRequest(NetConnection*, __CFHTTPMessage*, unsigned char, unsigned char) + 665
16  CFNetwork                           0x0007cdef HTTPConnectionCacheEntry::dispatchConnectionToProtocol(NetConnection*, HTTPProtocol*, HTTPRequestMessage*, unsigned char) + 191
17  CFNetwork                           0x0007c435 HTTPConnectionCacheEntry::notifyNextProtocolOfOpenConnection(NetConnection*, unsigned char) + 329
18  CFNetwork                           0x00004f5f HTTPConnectionCacheEntry::enqueueRequestForProtocol(HTTPProtocol*, __CFHTTPMessage*) + 499
19  CFNetwork                           0x0007b2ed HTTPConnectionCache::_onqueue_enqueueRequestForProtocol(HTTPProtocol*, __CFHTTPMessage*) + 109
20  CFNetwork                           0x0007b5b5 __enqueueRequestForProtocol_block_invoke_0 + 17
21  CFNetwork                           0x000b0133 ___performAsync_block_invoke_068 + 19
22  CoreFoundation                      0x36a0c74d CFArrayApplyFunction + 176
23  CFNetwork                           0x000b0593 RunloopBlockContext::perform() + 75
24  CFNetwork                           0x0001415d MultiplexerSource::perform() + 189
25  CoreFoundation                      0x00097683 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 15
26  CoreFoundation                      0x00096ee9 __CFRunLoopDoSources0 + 213
27  CoreFoundation                      0x00095cb7 __CFRunLoopRun + 647
28  CoreFoundation                      0x36a0cebd CFRunLoopRunSpecific + 356
29  CoreFoundation                      0x36a0cd49 CFRunLoopRunInMode + 104
30  WebCore                             0x000a5f9f _ZN7WebCoreL15runLoaderThreadEPv + 143
31  JavaScriptCore                      0x0017ffb3 _ZN3WTFL19wtfThreadEntryPointEPv + 15
32  libsystem_c.dylib                   0x00011311 _pthread_start + 309 
```

关于问题可能是什么的任何见解？

# json - 使用 JsonStore 的 ExtJS 4 面板网格未加载网格

> ID：13169970
> 
> 赞同：2
> 
> 时间：2012-11-01T01:58:42.833
> 
> 标签：json, extjs

我正在使用 ExtJS 4.0.7，并且正在使用 JSON Store 将其加载到 Panel Grid。我正在使用 Firefox 版本 16.0.2。这是一个非常简单的例子，我能够运行阵列网格。

```
Ext.onReady(function() {

var Grid1Store = new Ext.data.JsonStore({
    root: 'users',
    fields: [ 'id', 'name', 'email' ],
    autoLoad: true,
    data: { users: [ 
      { "id": 1, "name":"John Smith", "email":"jsmith@example.com"},
      { "id": 2, "name":"Anna Smith", "email":"asmith@example.com"},
      { "id": 3, "name":"Peter Smith", "email":"psmith@example.com"},
      { "id": 4, "name":"Tom Smith", "email":"tsmith@example.com"},
      { "id": 5, "name":"Andy Smith", "email":"asmith@example.com"},
      { "id": 6, "name":"Nick Smith", "email":"nsmith@example.com"}
    ]}
  });   

 var Grid1Grid = new Ext.grid.GridPanel({
      store: Grid1Store,
      renderTo: 'grid-example',
      title: 'Target',
      width: 300,
    columns: [
      {
        id: 'name',
        header: "Name",
        sortable: true,
        dataIndex: 'name'
      },{
        id: 'email',
        header: "Email",
        sortable: true,
        dataIndex: 'email'
      }
    ]

});

}); 
```

网格正在加载，没有数据显示。它显示一个空白网格。我不确定这个问题。是不是因为浏览器兼容性问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T02:23:35.520

你的商店是本地的。不要使用**根**属性

```
var Grid1Store = new Ext.data.JsonStore({
  fields: [ 'id', 'name', 'email' ],
  autoLoad: true,
  data: [ 
    { "id": 1, "name":"John Smith", "email":"jsmith@example.com"},
    { "id": 2, "name":"Anna Smith", "email":"asmith@example.com"},
    { "id": 3, "name":"Peter Smith", "email":"psmith@example.com"},
    { "id": 4, "name":"Tom Smith", "email":"tsmith@example.com"},
    { "id": 5, "name":"Andy Smith", "email":"asmith@example.com"},
    { "id": 6, "name":"Nick Smith", "email":"nsmith@example.com"}
  ]
}); 
```

# python - Python 压缩代码

> ID：13169971
> 
> 赞同：0
> 
> 时间：2012-11-01T01:59:36.047
> 
> 标签：python

我的代码很长，我需要帮助压缩它以使其更方便。我拥有的代码是假设执行我命令它在侥幸机器人上执行的一组指令。我正在使用python。机器人应该使用它的传感器执行以下代码。我需要帮助浓缩它。

编辑：

我的代码：

```
from Myro import *
from Graphics import *
init('/dev/tty.IPRE6-366079-DevB')

def markYellow(pic):
    for pix in getPixels(pic):
        r = getRed(pix)
        g = getGreen(pix)
        b = getBlue(pix)
        if r > 200 and b < 90 and g > 150:
            setRed(pix,255)
            setGreen(pix,255)
            setBlue(pix,255)
        else:
            setRed(pix,0)
            setGreen(pix,0)
            setBlue(pix,0)

def pctMarked(pic):
    totalPixels = 0
    whitePixels = 0
    for pix in getPixels(pic):
        if getRed(pix) == 255:
            whitePixels = whitePixels + 1
        totalPixels = totalPixels + 1
    result = whitePixels / float(totalPixels)
    return result

def findAvgX(pic):
    pixelCount  = 0
    totalXCount = 0
    for pix in getPixels(pic):
        if getRed(pix) == 255:
            x = getX(pix)
            totalXCount = totalXCount + x
            pixelCount = pixelCount + 1
    avgX = totalXCount / float( pixelCount)
    return avgX

def turn():
    findAvgX(pic)
    if wallLocation <= 85:
        turnLeft(1,0.25)
    elif ballLocation >= 170:
        turnRight(1,0.25)

def celebrate():
    move(0.25,1)
    beep(1,800)
    beep(1,1600)
    beep(1,800)
    stop()

def main():
    p = takePicture()
    markYellow(p)
    pctMarked(p)
    while pctMarked(pic) < 0.2: 
        rotate(1,1)
        p = takePicture()
        markYellow(p)
        pctMarked(p)
    turn()
    while getObstacle('center')> 1000: # I'm not sure about the number. We can test it tomorrow
        forward(1,1)
    celebrate() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T02:07:07.990

```
# helper functions
def getRGB(pix):
    return getRed(pix), getGreen(pix), getBlue(pix)

def setRGB(pix, r, g, b):
    setRed(pix,r)
    setGreen(pix,g)
    setBlue(pix,b)

def markYellow(pic):
    for pix in getPixels(pic):
        r, g, b = getRGB(pix)
        if r > 200 and b < 90 and g > 150:
            setRGB(pix, 255, 255, 255) 
        else:
            setRGB(pix, 0, 0, 0)

def pctMarked(pic):
    # is there a more direct way to get the totalPixels?
    # totalPixels = len(pic) # perhaps?
    totalPixels = sum(1 for pix in getPixels(pic))
    whitePixels = sum(getRGB(pix) == (255, 255, 255) for pix in getPixels(pic))
    return whitePixels / float(totalPixels) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T02:09:32.960

`ARGB`如果您有`RGB`像素替换，则此实现适用于您有像素的想法：

`0xFFFFFFFF`和`0xFFFFFF`

我正在做的是这样的：

```
pixel = A R G B
A = 2 bytes
R = 2 bytes
G = 2 bytes
B = 2 bytes 
```

所以在十六进制中是：

```
pixel = 0xFF000000; # black
pixel = 0xFFFFFFFF; # white 
```

`A`必须是`FF`(255) 才没有透明度。

应该提一下，我对这段代码做了一个假设，即一个像素是一个 32 位整数的形式。

* * *

```
def markYellow(pic):
    for pix in getPixels(pic):
        if getRed(pix) > 200 and getBlue(pix) < 90 and getGreen(pix) > 150:
            pix = 0xFFFFFFFF;
        else:
            pix = 0xFF000000;

def pctMarked(pic):
    totalPixels = 0
    whitePixels = 0
    for pix in getPixels(pic):
        if pix == 0xFFFFFFFF:
            whitePixels += 1
        totalPixels += 1
    return whitePixels / float(totalPixels) 
```

* * *

一些评论：
你`pcMarked`只看红色发现白色，这意味着它会拾取所有完全红色的颜色。
您的`markyellow`功能是使像素变为白色而不是黄色。

# java - 如何通过ssh使用eclipse，让本地eclipse可以编辑远程项目？

> ID：13169983
> 
> 赞同：6
> 
> 时间：2012-11-01T02:02:53.003
> 
> 标签：java, eclipse, eclipse-plugin, ssh

我经常使用远程服务器来存储和运行我的 Java 项目。但这阻止了我使用 eclipse。所以我有两个问题：

1.  我可以使用本地 Eclipse 管理远程服务器上的 Java 项目吗？（我通常`ssh`用来访问服务器）

2.  如果问题 1 有解决方案，那么 Java 程序是否也可以在远程服务器上运行？（即只有 Eclipse 的 GUI 显示在本地）

对于第二个问题，我知道`ssh -X`可以这样做（在远程服务器上运行 eclipse），但它太慢了。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T02:56:06.300

[RSE 插件](http://www.eclipse.org/tm/)是您正在寻找的。

有[一篇文章](http://www.venukb.com/2007/06/06/how-to-browse-remote-files-in-eclipse-ide/)介绍一下。

# javascript - 如何调用一个或两个或两个复选框和一个文本输入

> ID：13169984
> 
> 赞同：1
> 
> 时间：2012-11-01T02:02:59.857
> 
> 标签：javascript, forms, variables, call

我知道这是一个非常基本的问题，但我对 JavaScript 完全陌生，所以我很绝望。我已经倾注了如何解决这个问题，但我无法弄清楚。我需要调用第一个标题或第二个标题或两者以及名称。我该怎么做呢？谢谢！！

```
<script type="text/javascript">
function ack(){
var name = document.forms[0].elements[0];
var nameValue = name.value;
var title1 = document.forms[0].elements[1];
var title1Value = title1.value;
var title2 = document.forms[0].elements[2];
var title2Value = title2.value;
alert("Thank you for ordering " +title1Value +title2Value +nameValue);
}
</script>

<form>
<h3>Now Available!</h3> <h4>Happy Traveling 2: More Layouts for the Travel Scrapbooker</h4><br/><br/>
<h3>Also available:</h3> <h4>Happy Traveling: Layouts for the Travel Scrapbooker</h4><br/><br/>
<h4>Order today!</h4><br/><br/>
<label>Name:</label>
<input type="text" id="name"/><br/><br/>
<input type="checkbox" id="title1" value="Happy Traveling"/>Happy Traveling<br/>
<input type="checkbox" id="title2" value="Happy Traveling 2"/>Happy Traveling 2<br/><br/>
<input type="submit" value="Submit" onclick="ack();"/>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T02:41:18.993

一些建议：
1`document.getElementById("your id")`用于获取页面元素。它更高效、更易读。所以你的代码应该修改为：

```
var name = document.getElementById("name"); 
```

2 无论是否勾选，title1 的值总是返回“Happy Traveling”。你应该检查它是否被检查。您可以使用“已检查”属性。

```
var title1 = document.getElementById("title1");
var title1Value = "";
if(title1.checked){
    title1Value = title1.value;
} 
```

3 在提交表格之前，您应该检查名称是否为空。
4 有关 javascript/html 的更多信息，请查看[w3schools](http://w3schools.com/)了解更多详细信息。
希望它有帮助。

修改后的代码：

```
function ack(){
    var name = document.getElementById("name");
    var nameValue = name.value;
    var title1 = document.getElementById("title1");
    var title1Value = "";
    if(title1.checked){
        title1Value = title1.value;
    }
    var title2 = document.getElementById("title2");
    var title2Value = "";
    if(title2.checked){
        title2Value = title2.value;
    }
    alert("Thank you for ordering " +title1Value +title2Value +nameValue);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T05:03:28.607

一些评论：

表单控件必须有一个名称才能成功，ID 属性是可选的，通常不是必需的或有用的。表单控件可作为表单的命名属性使用其名称属性。所以不要使用会与表单的默认属性冲突的控件名称（如“名称”或“提交”）。

最后，不要在提交按钮上放置点击监听器，因为用户可以通过点击按钮以外的方式提交表单。将监听器交给表单的提交处理程序，这也意味着`ack`函数可以通过返回来取消提交`false`。

考虑：

```
<form id="orderForm" onsubmit="return ack();"> 
  <input type="text" name="personName"><br>
  <input type="checkbox" name="title1" value="Happy Traveling">Happy Traveling<br>
  <input type="checkbox" name="title2" value="Happy Traveling 2">Happy Traveling 2<br>
  <input type="submit" value="Submit">
</form>

<script type="text/javascript">

function ack() {
  var form = document.forms[0]; // or use getElementById
  var name = form.personName.value;
  var title1 = form.title1.checked? form.title1.value : '';
  var title2 = form.title2.checked? form.title2.value : '';

  alert('Thank you ' + name + ' for ordering:\n\n' + title1 + '\n' + title2);
}

</script> 
```

# c++ - 指向派生类的基类指针，在范围之外

> ID：13169985
> 
> 赞同：1
> 
> 时间：2012-11-01T02:03:04.223
> 
> 标签：c++, virtual-functions, derived-class, base-class

如果我创建一个基类指针数组，在一个范围内创建一个派生类对象并将引用传递给该数组并在该范围内正确调用派生类的虚函数，但在该范围之外，我尝试调用虚函数，它忘记它是一个派生类。我尝试投射它，但它不起作用。

```
class Base{
    public:
        Base(string str) {name = str;}
        virtual string toString() { return name;}
        Base& operator=(const Base& b) {name = b.name; return *this;}
    private:
        string name;
};
class Derived: public Base{
    public:
        Derived(string str1, string str2) {name = str1; second = str2;}
        virtual string toString() {return name + second;}
        Derived& operator=(const Derived& d) {Base::operator=(d);
                                              second = d.second; return *this;}
    private:
        string name;
        string second;
};
int main(){
    Base* baseArr[5];
    int n;
    cin >> n;
    if(n==1){
        Derived der("Derived", "Class");
        baseArr[0] = &der;
        baseArr[0]->toString() << endl; //this prints out "DerivedClass"
     }
     cout << baseArr[0]->toString(); //this prints out "Derived"
 } 
```

有没有办法在范围之外调用派生类的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T02:04:35.347

您正在调用*未定义的行为*，因为您指的是`baseArr[0]`已经被破坏的对象实例。的生命周期在其范围的末尾`der`不存在`}`，并且您不能通过在该点之后存储的指针来引用它。

# bluetooth - 使用 Samsung Galaxy S3 创建与 BluetoothLE 设备的连接

> ID：13169987
> 
> 赞同：8
> 
> 时间：2012-11-01T02:03:43.680
> 
> 标签：bluetooth, bluetooth-lowenergy

几天前，我在 Google Play 商店下载了蓝牙智能扫描仪软件。在我的三星 Galaxy S3 手机上安装后，我可以成功扫描我的蓝牙 LE 设备。

即使我尝试了所有方法来扫描我的蓝牙 LE 设备，我的计算机上也没有显示任何内容。于是我反编译了这个软件，`startLeDiscovery()`包里面有个方法`android.bluetooth`。`android.jar`但让我感到困惑的是，我的 android sdk 15中不存在这种方法。

最后，我把蓝牙智能扫描仪软件的`BlutoothAdapter.class`文件和`BluetoothDevice.class`文件替换成了`android.jar`它们，这样我就可以`startLeDiscovery()`在Eclipse中成功调用该方法了。源代码如下图所示。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    IntentFilter intent = new IntentFilter();
    intent.addAction(BluetoothDevice.ACTION_FOUND);
    intent.addAction(BluetoothDevice.EXTRA_UUID);
    intent.addAction(BluetoothDevice.ACTION_GATT_PRIMARY_UUID);

    registerReceiver(searchDevices, intent);
    //bluetooth.discovery();      
    bluetooth.startLeDiscovery();

  }  
    private BroadcastReceiver searchDevices = new BroadcastReceiver() {
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        BluetoothDevice device = null;

        if (BluetoothDevice.ACTION_FOUND.equals(action)) {
            device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);   
            String msg = device.getName()+"\n"+device.getAddress();
            Log.i("hella",msg);
            bluetooth.cancelDiscovery();
            connectDevice(device);
        }
    }       
};` 
```

事实证明，我在 Galaxy s3 手机上成功扫描了我的蓝牙 LE 设备，正如我所想的那样。否则，我发现那里也有一个`com.samsung.bluetoothle`包。同样的，我在我的`android.jar`. 但我无法使用该包中的这些方法连接到我的 LE 设备。

我恳请您帮助解决这个困扰我们很长时间的问题。为了方便开发，我会`android.jar`在网站上贡献我的。您将在目录中看到`startLeDiscovery()`方法和其他方法。`android.bluetooth`当然，目录中也有一个 `com.samsung.bluetoothle`包`android`。

你可以在[这里](http://download.csdn.net/detail/yuan8222/4709467)`android.jar`下载包（[镜像](http://ul.to/e0wn7fv9)）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T17:32:24.180

该`android.jar`文件被认为是您的 Android 设备上已经可用的类：如果我没记错的话，这些类不包含在为您的应用程序生成的 APK 中，因此添加这些`com.samsung.bluetoothle`类`android.jar`不会使它们添加到您的应用程序中。

[为什么不直接从三星网站 ( http://developer.samsung.com/ble](http://developer.samsung.com/ble)`android.jar` )下载整个 SDK并以推荐的方式使用它，而不是反编译并将其添加到文件中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-06T13:38:07.440

你需要在你的 AndroidManifest.xml 中有一个 uses-library 标签来告诉应用程序使用 Galaxy S3 蓝牙库。三星从未为开发人员公开发布过库，因此您必须制作自己的 jar 文件以进行编译，但不要将 jar 包含在您的 apk 的包装中。

```
<uses-library android:name="com.samsung.bluetoothle.BluetoothLEClientProfile" android:required="false" /> 
```

要访问 BluetoothAdapter 和 BluetoothDevice 的方法，最好使用反射来获取对所需方法的引用并以这种方式调用它们。

# ios - 尝试将项目与 armv6 和 armv7 的 libGoogleAnalitics.a 链接时出现问题

> ID：13169990
> 
> 赞同：1
> 
> 时间：2012-11-01T02:03:46.610
> 
> 标签：ios, google-analytics, armv7, armv6

我正在尝试在我的项目中使用 Google Analytics iOS，它支持 iOS 4.0 及以上版本，查看 Google Analytics 资源[页面](https://developers.google.com/analytics/devguides/collection/ios/resources)我可以看到版本 1.5 他们支持架构**armv6**而不是**armv7**，并且在 1.5.1 他们添加了对**armv7**的支持但是删除**armv6**。

因此，如果我的项目同时支持这两种架构，并且我尝试使用 1.5.1，则会在链接器上收到错误消息：

```
ld: file is universal (3 slices) but does not contain a(n) armv6 slice: libGoogleAnalytics.a for architecture armv6 
```

如果我从我的项目支持的架构列表中删除 armv6，它编译得很好，可以在设备和模拟器上运行，但是稍后在提交到苹果商店时我会收到一个错误，验证器说：

```
at least one of the following architectures must be present: armv6. 
```

有没有办法用armv6和armv7创建一个版本的lib？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:44:17.033

我最终将 iOS 的最低版本（iOS 开发目标）更改为 4.3，因此它通过了验证并提交到苹果商店（4.2.5 及更高版本不需要**armv6**）。

但是，经过一番研究，我发现是1.5版本（没有tgz的链接，但鉴于最新的1.5.1很容易猜到：http: [//dl.google.com/gaformobileapps/GoogleAnalyticsiOS_1.5 .tar.gz](http://dl.google.com/gaformobileapps/GoogleAnalyticsiOS_1.5.tar.gz) )**确实**包含对**armv7**的支持，正如他们的更改日志所指出的相反。

通过使用[otool](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/otool.1.html)，我可以验证静态库中支持的架构，并且项目编译和链接与这个 1.5 版本很好。

# c# - 通过循环遍历数据集将样式属性添加到特定的下拉列表项

> ID：13169993
> 
> 赞同：0
> 
> 时间：2012-11-01T02:04:37.390
> 
> 标签：c#, asp.net, attributes, foreach, html-select

我需要更改动态绑定下拉列表中特定列表项的背景颜色。需要突出显示的特定项目也是动态的并存储在数据集中。这样用户就知道该项目已经在程序的其他地方被选中，但如果他们愿意，仍然可以选择它。

下面是我的代码：

```
if ((e.Row.RowState & DataControlRowState.Edit) > 0)
{
    string strWeek = ((Label)e.Row.FindControl("lblWeek")).Text.ToString();
    string strBed = ((Label)e.Row.FindControl("lblBed")).Text.ToString();
    string strJob = getSelectedJob(strBed, strWeek);

    e.Row.BackColor = System.Drawing.ColorTranslator.FromHtml("#f8f8ff");
    DataTable myTable = new DataTable();
    DataColumn EIDColumn = new DataColumn("EID");
    DataColumn EventNameColumn = new DataColumn("EventName");
    myTable.Columns.Add(EIDColumn);
    myTable.Columns.Add(EventNameColumn);
    DataSet ds = new DataSet();
    ds = getJobs(strBed, strWeek, ddlTerm.SelectedValue.ToString(), strJob);
    DataSet ds2 = new DataSet();
    ds2 = getAssignedJobs(strBed);

    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        DropDownList ddl = (DropDownList)e.Row.FindControl("ddlEssential");
        DataRow[] rows = ds.Tables[0].Select();
        foreach (DataRow row in rows)
        {
            DataRow newRow = myTable.NewRow();
            newRow["EID"] = row["EID"];
            newRow["EventName"] = row["EventName"];
            myTable.Rows.Add(newRow);
         }
             ddl.DataSource = myTable;
             ddl.DataTextField = "EventName";
             ddl.DataValueField = "EID";
             ddl.DataBind();
             ddl.Items.FindByValue(strJob).Selected = true;

             foreach (DataRow row in ds2.Tables[0].Select())
             {
                 string strAssignedJob = row["EID"].ToString();
                 ddl.Items.FindByValue(strAssignedJob).Attributes.Add("style", "background-color:#cccccc");
             }
     } 
```

我收到此错误 **对象引用未设置为对象的实例。**它似乎发生在将样式属性添加到下拉列表的行上。

这甚至可能还是我的循环语句不正确？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:16:02.947

谢谢塔里库拉扎姆。你为我指明了正确的方向。

我已经修改了我的代码结构，它给了我我想要的东西。通过将“FindByValue”的值分配给一个变量，我能够更好地测试它是否为空。

```
foreach (DataRow row in ds2.Tables[0].Select())
{
    string strAssignedJob = row["EID"].ToString();
    ListItem assignedItem = ddl.Items.FindByValue(strAssignedJob.ToString());

    if (assignedItem != null)
    {
        ddl.Items.FindByValue(strAssignedJob).Attributes.Add("style", "background-color:#cccccc");
    }
} 
```

# php - 用于存储 html 内容的文档数据库

> ID：13169995
> 
> 赞同：3
> 
> 时间：2012-11-01T02:04:48.477
> 
> 标签：php, mongodb, hbase, document-database, nosql

我一直在做一个项目，用户可以创建简单的模板并开发他的网站页面。他可以保存它们并在完成后将其放到互联网上。现在我的问题

1.  当用户在他的模板上工作时，他可以保存他完成的工作副本并稍后返回（类似于起草电子邮件）。
2.  用户保存的这个工作通过解析模板页面当前保存在**xml文件中。**
3.  我正在考虑一种替代方法，将整个页面本身存储在文档数据库中，针对唯一的用户 ID，这样就不需要进行任何解析并减少负载和时间。

**现在我的问题**

1.  我认为使用**文档数据库** 或 nosql 而不是 xml 可能吗？
2.  如果是的话，哪一个更**灵活**且易于维护？
3.  我正在使用 php 和 mysql 进行其他操作，所以我需要 doc DB 来存储用户创建的模板的 html。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:26:34.150

我之前写过一个自定义的CMS。我创建了一个表结构，它允许我存储元数据（作者、发布日期、语言等）和内容（单独），因为我还想实现一个搜索功能，允许我单独搜索它们。我在 MySql 中完成了我的工作，但我必须进行大量的 html 编码以防止 SQL 中可能发生的攻击，因此，我建议使用 NoSQL 数据库（Mongo / Cassandra 应该就足够了）。

我以前从未真正与 Mongo 合作过。你也可以使用 Cassandra。我更喜欢它，因为它可以是无模式的（就像许多 NoSQL 数据存储一样）。因此，您可以在一行中存储数千个（如有必要）修订，以便您的用户可以在需要时回滚到页面的先前版本。一旦他们对当前版本感到满意，您将清除所有备份数据。这只是一个建议。查看[http://cassandra.apache.org](http://cassandra.apache.org)或[http://www.datastax.com/technologies/cassandra](http://www.datastax.com/technologies/cassandra)

希望能帮助到你 ：-）

# iphone - 如何在 sqlite db 上使用阿拉伯语文本？

> ID：13169997
> 
> 赞同：0
> 
> 时间：2012-11-01T02:05:05.767
> 
> 标签：iphone, database, xcode, sqlite, multilingual

在我的 iPhone 应用程序中，我想在 sqlite db 上存储和检索阿拉伯语、古吉拉特语。我读到的大多数是使用 unicode 从 sqlite db 存储和获取数据。

```
 How could I accomplish this, could any one instruct me with good tutorial. 
```

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T02:48:22.630

Unicode 支持阿拉伯文本。sqlite 支持使用 UTF-8 编码的 Unicode 文本。如果你可以把你的阿拉伯语文本放在一个 NSString 中，你可以在 sqlite 中存储和检索它。你根本不需要做任何特别的事情。

```
// bind a string into a query
NSString *stringWithArabicText = @" some arabic text ";
sqlite3_bind_text(statement, index, [stringWithArabicText UTF8String], -1, SQLITE_TRANSIENT);

// get a string from a query
char *str = (char *)sqlite3_column_text(statement, index);
NSString *stringWithArabicText = [NSString stringWithUTF8String:str]; 
```

这适用于 Unicode 支持的任何语言的文本，包括阿拉伯语。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T02:26:26.337

SQLite 数据库具有 UTF8 字符集，因此：

```
NSString * stringfromdatabase;
const char *cstring = [stringfromdatabase cStringUsingEncoding:NSISOLatin1StringEncoding];
NSString *utf8string = [[NSString alloc]initWithCString:cstring encoding:NSUTF8StringEncoding];
NSLog(@"%@",utf8string); // here you will see arabic. 
```

当然，您可以对其进行优化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-12T18:54:22.347

查看此博客。它有详细的解释。

[http://programmingiosapps.blogspot.in/2012/08/how-to-save-arabic-data-from-iphone-to.html?m=1](http://programmingiosapps.blogspot.in/2012/08/how-to-save-arabic-data-from-iphone-to.html?m=1)

# android - Galaxy Tab 2 7 英寸图片失真

> ID：13169999
> 
> 赞同：0
> 
> 时间：2012-11-01T02:05:29.823
> 
> 标签：android, camera

我编写了一个使用 Camera 类拍照的应用程序。问题是在 Galaxy tab 2 7 英寸（运行 ICS）上拍摄的照片失真。它似乎被垂直挤压。有人遇到过这个问题吗？解决方案是什么？包括 Galaxy S3 在内的其他设备都很好。

谢谢雷

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T17:22:06.860

Finally found the fix. The problem is that as long as you set the camera parameters the images are distorted, however if I do not set it(preview size) the preview is distorted. The solution is to keep the default parameters when opening the camera, and set the default parameters back to the camera before taking the picture. I have run into quite some problems with Samsung devices. They cause a lot of headache.