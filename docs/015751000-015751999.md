# StackOverflow 问答 15751000-15751999

# hbase - 如何区分单个pig作业中的map任务

> ID：15751006
> 
> 赞同：0
> 
> 时间：2013-04-01T20:11:29.530
> 
> 标签：hbase, apache-pig

我让 Pig (0.10) 将数据从 hdfs 加载到 hbase 中。原始记录没有唯一的行键，所以我有一个 UDF 构造：

```
public class Foo extends EvalFunc<Tuple> {
    // FIXME: If there are multiple map jobs for the same batch,
    // they will reuse the serial numbers.
    // Need to add something to figure out a distinct per task #
    private int task_id=0;
    private long serial=0L;

    public Tuple exec(Tuple input) throws IOException {
        if (input == null || input.size() == 0)
            return null;
        try {
            Integer batch_id=(Integer)input.get(0);
            String rowkey=String.format("%7d%3d%9d", batch_id, task_id, serial++);
            // ... compute other values for the return Tuple.
        }
    }
} 
```

我的理解是，如果 pig 为同一个输入数据集启动两个不同的映射作业（由于超出块大小或从目录加载时具有多个输入文件），每个都将是一个单独的 Java 实例，因此Foo.serial 会有多个独立的副本；我的 rowkeys 不会是唯一的，我将覆盖我试图加载到 HBase 中的许多记录。

如果我的 UDF 可以确定它属于哪个映射器，那么冲突就会消失。我可以回退到 IP 地址 + 进程 ID，但这相当浪费。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:11:16.510

[查看DataFu](https://github.com/linkedin/datafu)集合中的 Enumerate UDF 。这将取一个袋子并为每个元素分配一个数字 1 到 N，其中 N 是袋子的大小。不幸的副作用是我相信你的所有数据都必须通过一个 reducer。但从你的描述看来，这可能不是什么大问题。（听起来数据只是有时大到需要在多个映射器中拆分。）

您可以使用 将所有数据简单地分组到一个包中`GROUP ... ALL`，然后枚举该包。然后，您可以使用此编号构造一个自定义行键，该编号对于包中的每条记录都是唯一的。

# facebook - 有没有办法执行与 Facebook 的移动检测完全匹配的移动检测？

> ID：15751011
> 
> 赞同：1
> 
> 时间：2013-04-01T20:11:48.607
> 
> 标签：facebook, mobile, facebook-apps

我正在构建一个混合 Facebook 应用程序：桌面用户将被定向到[Page Tab](https://developers.facebook.com/docs/appsonfacebook/pagetabs/)，而移动用户将被定向到[Mobile Web App](https://developers.facebook.com/docs/mobile/web/build/)。

我需要找到一种**快速、准确的方法**来检测用户的设备并执行适当的重定向——最好不要太复杂。可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:13:10.777

…是的！绝对可以做到。

Facebook 自动将尝试访问 Canvas 应用 ( `apps.facebook.com/your_app`) 的移动用户重定向到其等效的移动 Web 应用。

因此，只需设置一个服务器端重定向到`apps.facebook.com/your_app`，并设置一个从 Canvas 应用程序到页面选项卡的客户端重定向。

Facebook 会将移动用户重定向到您的移动网络应用程序；桌面用户将登陆您的 Canvas 应用程序，该应用程序将立即将他们重定向到您的页面选项卡。

在 PHP 中，服务器端重定向如下所示：

```
<?php
header('Location: http://apps.facebook.com/your_app', TRUE, 302);
exit; 
```

客户端重定向在 JavaScript 中如下所示：

```
<script type="text/javascript">window.top.location.href = "http://yoururl.com/desktop/";</script> 
```

这是一个可靠的解决方案，比尝试匹配用户代理要好得多。您的用户代理列表可能与 Facebook 的不同；事实上，Facebook 与它执行移动重定向的方式非常不一致。

# css - CSS 变换导致 Safari 中闪烁，但仅当浏览器 >= 2000px 宽时

> ID：15751012
> 
> 赞同：40
> 
> 时间：2013-04-01T20:11:50.023
> 
> 标签：css, safari, transform, css-transitions

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-04-02T08:49:17.880

令人沮丧吧？

***请参阅 EDIT4 了解为什么 2000px 是一个神奇数字的答案。***

您可以尝试几件事。

*   添加`-webkit-transform-style: preserve-3d;`到闪烁的元素。

*   添加`-webkit-backface-visibility: hidden;`到
    闪烁的元素。

*   将动画元素移到闪烁
    元素所在的父级之外。

**编辑**— Wesley Hales，[在这里](http://www.html5rocks.com/en/mobile/optimization-and-performance/)说 “我在对已经加速的页面部分应用硬件加速时遇到了故障行为”

很难在没有任何代码的情况下帮助您调试它。但对于初学者，我建议您在 safari 中打开调试模式。在终端中写入“defaults write com.apple.Safari IncludeInternalDebugMenu -bool true”。

之后会出现一个调试菜单。选择绘图/合成标志 > 显示合成边框。

这将帮助您查看正在渲染的内容，并由此选择要放入硬件加速的内容以及要省略的内容。

**EDIT2** — 这也值得一试：[fast-animation-with-ios-webkit](http://joehewitt.com/2011/10/05/fast-animation-with-ios-webkit)

它是关于 iOs 的，但我经历过——在某些情况下——适用于 iOs 的解决方案也适用于 osx。

**EDIT3——**如果你只是问当它大于 2000 像素时会发生什么，我可以肯定地告诉你，在 iPhone 上，WebKit 创建不大于 1024 x 1024 的纹理，如果你的元素大于那个，它必须创建多个纹理。

[关于纹理限制的文档](http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/OpenGLESPlatforms/OpenGLESPlatforms.html#//apple_ref/doc/uid/TP40008793-CH106-SW3)

现在，当他们在 iPhone 上执行此操作时，如果他们在 OsX 上执行相同操作，我不会感到惊讶，但有更高的限制。

不知道这是不是你的情况。没有任何代码是无法分辨的。

**EDIT4** —“TextureMapperTiledBackingStore 中的实现非常简单，仅用于解决 OpenGL 中 2000x2000 纹理大小的限制。”

**因此，如果您的元素大于 2000x2000，则必须创建多个纹理。**

[http://trac.webkit.org/wiki/CoordinatedGraphicsSystem](http://trac.webkit.org/wiki/CoordinatedGraphicsSystem)

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-04-10T06:03:53.200

我发现将 应用于`-webkit-backface-visibility: hidden;`翻译元素及其`-webkit-transform: translate3d(0, 0, 0);`所有子元素后，闪烁就会消失。

请参阅[防止在 webkit-transform 的 webkit-transition 上闪烁](https://stackoverflow.com/questions/3461441/prevent-flicker-on-webkit-transition-of-webkit-transform)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-11-18T22:03:32.507

如果字体闪烁，请使用以下 CSS：

```
html,body {
    -webkit-font-smoothing: antialiased;    
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-05T02:00:08.083

我注意到，在 Chrome 中应用 CSS3 转换后，元素看起来有点“脆”并且文本未对齐。Mathias 答案中的解决方案对此没有影响。但这是奇怪的事情——在我应用了 webkit 过滤器（即`-webkit-filter: opacity(0.99999);`）之后，元素正确呈现并且文本中的字母对齐。但在那之后，这些元素看起来有点模糊。也许这对你的闪烁有影响。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-07T11:28:41.540

首先，感谢这里提供的出色解决方案。过去我一直认为我的代码一定有问题。不是。我还推断出动画不再流畅运行的 2000 像素边框。谢谢你们，我现在添加

```
/*keep animation smooth in Safari above 2000px*/
@media ( min-width: 2000px ) {
    .boxContent {
        -webkit-backface-visibility: hidden;
    }
} 
```

我这样做是有条件的，因为事实上，添加类后图片不会呈现抗锯齿。在另一个地方我做过

```
/*keep animation smooth in Safari above 2000px*/
.twothousand {
    -webkit-backface-visibility: hidden;
} 
```

并通过 JQuery 添加和删除附加类。所以过渡是平滑的，并且在完成后渲染（再次删除类）有点复杂，但它对我来说效果很好，最终使 Safari 中的动画超过 2000px 平滑。干得好，伙计们！！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-21T05:13:36.283

我也有同样的问题。当我在浏览器`mat-icon`中打开我的角度应用程序时开始闪烁。`Safari`它在`Chrome`浏览器中运行良好。经过上面回答的所有选项后，我的问题无法得到解决。所以最后，我将`transition`my 的属性设置`fab-button`为`none`. 它解决了这个问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-07T05:41:37.197

我遇到了同样的问题：当一个元素通过过渡进行转换时，其他不相关的元素会闪烁。

[`will-change`](https://developer.mozilla.org/en-US/docs/Web/CSS/will-change)帮助我解决这个问题。

```
my-element {
    will-change: transform;
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-06-26T22:50:13.983

解决我所有问题的简单解决方案是：

```
.app * {
  transform-style: preserve-3d;
} 
```

# android - 在打开对话框主题的活动后，surfaceView 出现黑屏

> ID：15751014
> 
> 赞同：0
> 
> 时间：2013-04-01T20:11:59.783
> 
> 标签：dialog-theme, android, surfaceview

我的中心活动有一个surfaceView。当我打开另一个活动并重新开始时，一切正常。当我打开具有[dialog-theme](/questions/tagged/dialog-theme "显示标记为“对话主题”的问题")的活动时出现问题。当我从这个活动返回时，我看到一个黑色的表面视图。奇怪的是，在我之前描述的两种情况下，都调用了相同的方法。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:13:01.783

我通过在 onPause 中添加 camPreview.setvisibility(vIEW.GONE) 和在 onResume() 中添加 camPreview.setvisibility(vIEW.Visible) 解决了这个问题。

# string - 在 Python 3 中检查字符串是否包含重复字符的最快方法是什么？

> ID：15751019
> 
> 赞同：11
> 
> 时间：2013-04-01T20:12:17.030
> 
> 标签：string, list, python-3.x, filter, set

**我需要根据字符串两次不包含字符**的标准来过滤字符串。

*   字符串**很多**（比如 1.4 万亿）。
*   字符串很**短**（大约 8 个字符）。
*   字符串是**唯一的**（缓存不起作用）。
*   字符串有一个**大字符集**（比如任何 Unicode 字符）。
*   字符串**通常符合标准**（比如 2/3 没有重复字符）。

使用代码如下所示：

```
>>> candidate_strings = ["foobnehg", "barfnehg", "bazfnehg"]
>>> result_strings = [s if unique_chars(s) for s in candidate_strings]
>>> print(result_strings)
["barfnehg", "bazfnehg"] 
```

我实现了一个简单的版本，只是迭代字符串：

```
def unique_chars_naive(string_given):
    """
    Checks if a given string contains only unique characters.
    This version iterates the given string, saving all occurred characters.
    """
    chars_seen = []
    for char in string_given:
        if char in chars_seen:
            return False
        chars_seen.append(char)
    return True 
```

我的下一个最佳想法是使用 a `set`，所以我实现了：

```
def unique_chars_set(string_given):
    """
    Checks if a given string contains only unique characters.
    This version exploits that a set contains only unique entries.
    """
    return len(string_given) == len(set(string_given)) 
```

将函数保存到文件`UniqueCharacters.py`中，对它们进行计时：

```
$ python3 -m timeit -n 100000 --setup='import UniqueCharacters; candidate_strings = ["foobnehg", "barfnehg", "bazfnehg"]' '[UniqueCharacters.unique_chars_naive(s) for s in candidate_strings]'
100000 loops, best of 3: 20.3 usec per loop

$ python3 -m timeit -n 100000 --setup='import UniqueCharacters; candidate_strings = ["foobnehg", "barfnehg", "bazfnehg"]' '[UniqueCharacters.unique_chars_set(s) for s in candidate_strings]'
100000 loops, best of 3: 17.7 usec per loop 
```

这表明`unique_chars_set`该数据集的速度快了约 15%。

有没有更快的方法来做到这一点？也许用正则表达式？标准库中是否有一些方法可以做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-01T20:50:44.567

让我首先说我怀疑您在不需要时正在优化。Python 是一种高级语言，它支持以高级方式思考计算。一个可读、优雅和可重用的解决方案通常会比一个速度极快但难以理解的解决方案更好。

当且**仅**当您确定速度是一个问题时，您应该继续进行优化。甚至可能为计算密集的部分编写一个 C 扩展。

话虽如此，这里是一些技术的比较：

```
def unique_chars_set(s):
    return len(s) == len(set(s))

def unique_chars_frozenset(s):
    return len(s) == len(frozenset(s))

def unique_chars_counter(s):
    return Counter(s).most_common(1)[0][1] > 1

def unique_chars_sort(s):
    ss = ''.join(sorted(s))
    prev = ''
    for c in ss:
        if c == prev:
            return False
        prev = c
    return True

def unique_chars_bucket(s):
    buckets = 255 * [False]
    for c in s:
        o = ord(c)
        if buckets[o]:
            return False
        buckets[o] = True
    return True 
```

这是性能比较（在 IPython 中）：

```
In [0]: %timeit -r10 [unique_chars_set(s) for s in candidate_strings]
100000 loops, best of 10: 6.63 us per loop

In [1]: %timeit -r10 [unique_chars_frozenset(s) for s in candidate_strings]
100000 loops, best of 10: 6.81 us per loop

In [2]: %timeit -r10 [unique_chars_counter(s) for s in candidate_strings]
10000 loops, best of 10: 83.1 us per loop

In [3]: %timeit -r10 [unique_chars_sort(s) for s in candidate_strings]
100000 loops, best of 10: 13.1 us per loop

In [4]: %timeit -r10 [unique_chars_bucket(s) for s in candidate_strings]
100000 loops, best of 10: 15 us per loop 
```

结论：`set`比许多其他明显的方法优雅且快速。但是差异很小，无论如何都无所谓。

有关更多基准，请参阅[@FrancisAvila](https://stackoverflow.com/a/15751669/716118)的答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T20:51:17.027

我创建了一个带有计时和测试工具的文件，以尝试各种不同的方法。

我发现的最快的是基于正则表达式的，但它只比`len(set())`基于最快的方法快一点。就是下面这个`isunique_reg()`函数。

```
import re
import array
import collections
import bisect

re_dup_g = re.compile(r'(.).*\1', re.DOTALL)
re_dup_ng = re.compile(r'(.).*?\1', re.DOTALL)

def isunique_reg(s, search=re_dup_g.search):
    return search(s) is None

def isunique_reng(s, search=re_dup_ng.search):
    return search(s) is None

def isunique_set(s, set=set, len=len):
    return len(s) == len(set(s))

def isunique_forset(s, set=set):
    seen = set()
    add = seen.add
    for c in s:
        if c in seen:
            return False
        add(c)
    return True

def isunique_array(s, array=array.array):
    seen = array('u')
    append = seen.append
    for c in s:
        if c in seen:
            return False
        append(c)
    return True

def isunique_deque(s, deque=collections.deque):
    seen = deque()
    append = seen.append
    for c in s:
        if c in seen:
            return False
        append(c)
    return True

def isunique_bisect(s, find=bisect.bisect_right, array=array.array):
    seen = array('u')
    insert = seen.insert
    for c in s:
        i = find(seen, c)
        if i and seen[i-1] == c:
            return False
        insert(i, c)
    return True

def isunique_bisectl(s, find=bisect.bisect_right):
    seen = []
    insert = seen.insert
    for c in s:
        i = find(seen, c)
        if i and seen[i-1] == c:
            return False
        insert(i, c)
    return True

def isunique_count(s, Counter=collections.Counter):
    return Counter(s).most_common(1)[0][1]==1

def isunique_list(s):
    seen = []
    append = seen.append
    for c in s:
        if c in seen:
            return False
        append(c)
    return True

def _test():
    funcs = [f for n,f in globals().items() if n.startswith('isunique_')]
    cases = [
        (u'string given', False),
        (u'string uoqzd', True),
    ]
    for func in funcs:
        for s,rv in cases:
            try:
                assert rv is func(s)
            except AssertionError, e:
                print "%s(%r) is not %r" % (func.__name__, s, rv)
                raise e

def _time():
    import timeit
    funcs = [f for n,f in globals().items() if n.startswith('isunique_')]
    funcs.sort(key=lambda f: f.__name__)
    cases = [
        ('!uniq', u'string given', False),
        ('uniq', u'string uoqzd', True),
    ]

    casenames = [name for name, _, _ in cases]
    fwidth = max(len(f.__name__) for f in funcs)
    timeitsetup = 's = {!r}; from __main__ import {} as u'

    print('{: <{fwidth}s}|{: >15s}|{: >15s}'.format('func', *casenames, fwidth=fwidth))
    print('-'*(fwidth+2+15+15))
    for f in funcs:
        times = [timeit.timeit('u(s)', setup=timeitsetup.format(input, f.__name__)) for _, input, _ in cases]
        print('{: <{fwidth}s}|{: >15.10f}|{: >15.10f}'.format(f.__name__, *times, fwidth=fwidth))

if __name__=='__main__':
    _test()
    _time() 
```

在 CPython 2.7.1 上，我得到以下结果（不幸的是，我手边没有 CPython 3.x）：

```
func            |          !uniq|           uniq
------------------------------------------------
isunique_array  |   6.0237820148|  11.0871050358
isunique_bisect |  10.8665719032|  18.4178640842
isunique_bisectl|   8.2648131847|  13.9763219357
isunique_count  |  23.1477651596|  23.5043439865
isunique_deque  |   4.0739829540|   7.3630020618
isunique_forset |   2.8148539066|   4.1761989594
isunique_list   |   3.6703650951|   6.9271368980
isunique_reg    |   1.7293550968|   2.8794138432
isunique_reng   |   1.9672849178|   3.3768401146
isunique_set    |   2.3157420158|   2.2436211109 
```

您会注意到，当字符串不是唯一的时，基于正则表达式的方法比基于集合的方法快，但基于正则表达式的方法的最坏情况比集合慢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T20:26:37.533

我不知道是否会更快，但这个正则表达式可能会让你满意：

```
couplet = re.compile(r'(.).*\1')
result_strings = [s if not re.search(couplet, s) for s in candidate_strings] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T20:17:17.590

您可以对字符串进行排序并对其进行迭代以查看是否没有连续的相同字母，但这是 N*log(N) 所以我不确定这是否会比设置的解决方案更快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T20:22:38.383

请参阅[桶排序](http://en.wikipedia.org/wiki/Bucket_sort)，尽管它是一种排序算法，您可以将解决方案作为基础，基本上您定义一个 n 位置的数组，并且对于每个字符，您将其放置在数组中由其 ASCII 或 UNICODE 值给出的位置上（参见下面的 unicode），每次迭代最多会有 O(n) 时间复杂度（当数组中的某个位置已经被使用时，你可以中断）......但我认为你不会在任何一种方法中找到相当大的差异，因为你可以简单地首先检查`if(string.length < 255)`字符串中可能的有效值的数量。

该检查可确保任何循环最多超过 255 个字符，这使得它们足够小，可以在大多数情况下担心性能

（我不知道python，但我确定有一些`string.length`属性或等价物）

正如@JOHN 所提到的，如果您需要支持一个大的或所有可能的字符串值，那么这将导致空间和时间问题

# checkbox - 如何正确使用带有 wx.lib.agw.customtreectrl.CustomTreeCtrl 样式的复选框？

> ID：15751029
> 
> 赞同：0
> 
> 时间：2013-04-01T20:13:08.020
> 
> 标签：checkbox, wxpython, multi-select, treecontrol

我想将复选框添加到我正在使用的多选树控件中，并且我认为我可以使用...

```
import wx, wx.lib.agw.customtreectrl

app = wx.App(False)

fr = wx.Frame(None)

myModule = wx.lib.agw.customtreectrl
myStyle = (myModule.TR_DEFAULT_STYLE|myModule.TR_MULTIPLE
           |myModule.TR_FULL_ROW_HIGHLIGHT|myModule.TR_AUTO_CHECK_CHILD
           |myModule.TR_AUTO_CHECK_PARENT|myModule.TR_AUTO_TOGGLE_CHILD)

tree = myModule.CustomTreeCtrl(fr, style=myStyle)
treeRoot = tree.AddRoot("PyRx Enzymes")
treeNodes =['Node A','Node B', 'Node C']
treeItems = ['1', '2', '3']
for i, _ in enumerate(treeNodes):
    iNode = tree.AppendItem(treeRoot, treeNodes[i])
    for ii in treeItems:
        tree.AppendItem(iNode, "%s %s"%(treeNodes[i].replace('Node ',''), ii) )
tree.Expand(treeRoot)

fr.Show()

app.MainLoop() 
```

...但是更改样式选项似乎没有任何效果。无论我如何更改“myStyle”变量，我最终都会得到与将其设置为 0 时相同的结果。我不确定我在这里做错了什么。

我在 64 位 Windows 7 上使用 wxPython 2.9。

编辑：我看到我使用的是“样式”命名参数而不是“agwStyle”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:24:27.123

我很抱歉忽略了显而易见的事情。下面的代码创建了所需的功能。

```
import wx, wx.lib.agw.customtreectrl

app = wx.App(False)

fr = wx.Frame(None)

myModule = wx.lib.agw.customtreectrl
myStyle = (myModule.TR_DEFAULT_STYLE|myModule.TR_MULTIPLE
           |myModule.TR_FULL_ROW_HIGHLIGHT|myModule.TR_AUTO_CHECK_CHILD
           |myModule.TR_AUTO_CHECK_PARENT|myModule.TR_AUTO_TOGGLE_CHILD)

tree = myModule.CustomTreeCtrl(fr, agwStyle=myStyle)
treeRoot = tree.AddRoot("PyRx Enzymes")
treeNodes =['Node A','Node B', 'Node C']
treeItems = ['1', '2', '3']
for i, _ in enumerate(treeNodes):
    iNode = tree.AppendItem(treeRoot, treeNodes[i], ct_type=1)
    for ii in treeItems:
        tree.AppendItem(iNode, "%s %s"%(treeNodes[i].replace('Node ',''), ii), ct_type=1)
tree.Expand(treeRoot)

fr.Show()

app.MainLoop() 
```

任何有关可能改进的建议将不胜感激。

# c - 通过 UDP 进行文本基本文件传输

> ID：15751030
> 
> 赞同：1
> 
> 时间：2013-04-01T20:13:08.397
> 
> 标签：c, udp, file-transfer

我正在尝试通过 UDP 发送文件，该文件可能使用 64 > 1024 字节发送，我遇到的问题是无法发送服务器看到的所有部分：代码服务器：

```
void* sender(void* p){
    pthread_mutex_lock(&mtx);

    struct sockaddr_in addr;
    char tString[256];
    int state,
    sock = *(int *)p;
    socklen_t slen = sizeof(tempAddr);
    addr = tempAddr;
    memset(&tempAddr, 0x00, sizeof(tempAddr));

    pthread_mutex_unlock(&mtx);
    FILE* fd = fopen("foo.txt", "r");
    int offset = 0;

    while( fread(tString,1,256, fd) > 0){
        if( (ferror(fd)))
            ERR("!! ?? ferror"); 

        fwrite(tString, 1, 256, stdout);
        if (sendto(sock, tString, strlen(tString), 0, (struct sockaddr *) &addr, slen) < 0){
            ERR("!! ?? sendto");
        }

        if (feof(fd)){
           printf("~ EOF! ~\n");
           break;
        }
        memset(tString,0,256);
    }

    fclose(fd);
    pthread_exit(NULL);
} 
```

输出示例：

```
Received pack from 127.0.0.1:55523
Data: asd

server received datagram from localhost (127.0.0.1)
server received 3/256 bytes: asd
Old unsatiable our now but considered travelling impression. In excuse hardly summer in basket misery. By rent an part need. At wrong of of water those linen. Needed oppose seemed how all. Very mrs shed shew gave you. Oh shutters do removing reserved wandered an. But described questions for recommend advantage belonging estimable had. Pianoforte reasonable as so am inhabiting. Chatty design remark and his abroad figure but its.Affronting discretion as do is announcing. Now months esteem oppose nearer enable too six. She numerous unlocked you perceive speedily. Affixed offence spirits or ye of offices between. Real on shot it were four an as. Absolute bachelor rendered six nay you juvenile. Vanity entire an chatty to. ~ EOF! 
```

客户：

```
 FILE* fd = fopen("fooo.txt","w");
    int offset = 0;
    do{
        if (recvfrom(sockfd, tempString, 256, 0, (struct sockaddr*)&sAddr, &slen) < 0){
            ERR("!! ?? recvfrom()");
        }
        fwrite(tempString, 1, 256, fd);
        printf("Received packet from %s:%d\nData: %s\n\n", inet_ntoa(sAddr.sin_addr), ntohs(sAddr.sin_port), tempString);
    }while(fread(tempString,1,256, fd) > 0); 
```

输出：

```
Enter data to send(Type exit and press enter to exit) : asd
Received packet from 127.0.0.1:1234
Data: Old unsatiable our now but considered travelling impression. In excuse hardly summer in basket misery. By rent an part need. At wrong of of water those linen. Needed oppose seemed how all. Very mrs shed shew gave you. Oh shutters do removing reserved wande 
```

如您所见，仅发送了文本的第一部分。任何想法为什么？PS：EOF被识别但不知何故我的客户只得到文本的一部分......

编辑：我很确定问题出在这条线上：`}while(fread(tempString,1,256, fd) > 0)`在客户端...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:11:53.347

在客户端打开文件时：

```
FILE* fd = fopen("fooo.txt","w"); 
```

该文件为空。然后你在里面写一些东西：

```
fwrite(tempString, 1, 256, fd); 
```

文件点指向文件末尾。此时，如果您阅读它，您将立即到达EOF。

```
fread(tempString,1,256, fd) 
```

因此，do{}while 循环将且只会工作一轮。

如果你想在连接关闭时打破循环，你应该检查 recvfrom() 的返回值（[http://linux.die.net/man/2/recvfrom](http://linux.die.net/man/2/recvfrom)）：

> 返回值：这些调用返回接收到的字节数，如果发生错误，则返回 -1。当对端执行了有序关闭时，返回值将为 0。

# spring-mvc - 在 WSO2 应用服务器中部署 Spring MVC

> ID：15751035
> 
> 赞同：3
> 
> 时间：2013-04-01T20:13:30.697
> 
> 标签：spring-mvc, wso2

我正在尝试通过转到 Main > Manage > Applications > Add > Web Applications 并上传我的 Spring MVC 的 WAR 文件来在 WSO2 Application Server 上部署我的 Spring MVC 应用程序。上传成功完成，但我仍然无法运行网络应用程序本身。错误消息基本上只是抱怨它没有 org.springframework。

相同的 WAR 文件可以毫无问题地在 Apache Tomcat 上运行。我所做的只是将相同的 WAR 文件放到 \webapps 中，它可以工作。

是否需要配置特殊设置才能在 WSO2 应用程序服务器上运行 Spring MVC？我会假设 WSO2 应用程序也在使用 Apache Tomcat，那么为什么它不会仅通过上传 WAR 文件来运行呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:50:12.807

你的 WSO2 AS 版本是什么？请确保使用最新的 AS 5.1.0 版本。我们已经在 AS 5.1.0 上测试了大量基于 Spring（包括 SpringMVC）的应用程序，基本上如果在 Tomcat 上运行的东西也应该在 WSO2 AS 上运行。如果您在 AS 5.1.0 上仍有问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:57:58.567

我通过以下方式解决了这个问题：

1.  如 Sagara Gunathunga 所述，将 WSO2 AS 升级到最新版本 (5.1.0)。由于某些原因，以前的 WSO2 AS 不采用我的 JSTL 模板（类似于 $ {blabla}）。仅在 5.1.0 中问题得到解决。我开始想知道这个 WSO2 用它的半生不熟的产品做了什么。

2.  修改 Maven POM 文件，特别是 slf4j-api 依赖。WSO2 有自己的 slf4j-api 库，在部署到 WSO2 之前，我必须在我的应用程序中将 slf4j-api 的范围设置为“已提供”。这解决了无法加载所有 JavaScript 文件的问题。这样做的缺点是，当您在常规 Tomcat 下本地运行它时，您需要“编译” slf4j-api 的范围。将其设置为“提供”在 Tomcat 下将不起作用。但在 WSO2 中，需要“提供”范围才能运行。因此，在部署应用程序之前需要进行手动更改。我确实尝试匹配 slf4j-api 版本以匹配 WSO2 并将范围设置为“编译”，但它仍然无法正常工作。WSO2，由于一些不好的原因，不能使用我的应用程序编译的 slf4j-api。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T00:54:24.583

是的，有一个单独的解决方法可以将 spring 服务部署到 wso2 appserver。请按照 [1] 的说明进行操作。

[1]。[http://docs.wso2.org/wiki/display/AS510/Spring+Services](http://docs.wso2.org/wiki/display/AS510/Spring+Services)

谢谢你，达沙那

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T16:40:05.593

@stack247，
我来自 WSO2，很高兴听到您的 JSTL 问题现在已解决。但我完全不同意“我开始怀疑这个 WSO2 用它的半生不熟的产品做了什么”的说法。您可能知道像 Servelt 、 JSP 和 JSTL 这样的规范有不同的版本，并随着时间的推移更新它的版本。最新的 JSP 2.0 和 JSTL 1.2 规范不支持以前版本的应用程序服务器，因此您不能使用依赖于 JSP 2.0 或 JSTL 1.2 的应用程序，这是一个已知的限制，但不能将其视为半生不熟的产品。 . 这是任何软件产品都非常普遍的性质，这就是为什么我们积极开发、修复问题、升级依赖项和频繁发布新版本的原因，我们也在回应此类社区问题。

随着最新的 AS 5.1.0 版本，我们正式支持 Servelt 3.0、JSP 2.0 和 JSTL 1.2 以及任何相关的应用程序。当涉及到日志记录案例时，大多数应用程序服务器都有自己的日志记录机制，在某些情况下，需要从应用程序中删除日志记录依赖项。

# sql - SSRS 按多个条件下拉排序

> ID：15751040
> 
> 赞同：3
> 
> 时间：2013-04-01T20:14:09.883
> 
> 标签：sql, visual-studio-2005, reporting-services

很抱歉成为菜鸟，但我相信这是我需要帮助的正确地方。

我刚开始研究 SSRS 报告（2005 年），我想了解如何添加具有多个执行排序选项的过滤器下拉列表。我已经将一个列表导入到我的表中，并且具有这种排序所需的适当字段。

IE。我想要一个名为“排序依据”的下拉框，其中包含可用选项：

顾客姓名

邮政编码，SIC

SIC, 城市

其中每一个都按查看报告时选择的功能执行特定的顺序。

我玩了一下，能够设置数据集和添加过滤器，但这并不是最佳选择，因为（例如）您必须知道确切的 ZipCode 和 SIC 匹配才能返回任何结果。

必须有一种简单的方法来根据下拉列表的选择返回这个带有多个 order by 条件的 select 语句，但如果有的话我找不到它。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:26:31.977

我可以想到几个选项。在这两种情况下，我都假设了一个包含以下值的参数 SortOrder：

*   顾客姓名
*   邮政编码，SIC
*   SIC, 城市

**根据参数将排序表达式应用于表**

我已将表达式应用于表格的排序：

![在此处输入图像描述](https://i.stack.imgur.com/2zdVK.png)

第一类：

```
=Switch(Parameters!SortOrder.Value = "CustomerName", Fields!CustomerName.Value
    , Parameters!SortOrder.Value = "ZipCode, SIC", Fields!ZIP.Value
    , Parameters!SortOrder.Value = "SIC, City", Fields!SIC.Value) 
```

第二种：

```
=Switch(Parameters!SortOrder.Value = "CustomerName", Fields!CustomerName.Value
    , Parameters!SortOrder.Value = "ZipCode, SIC", Fields!SIC.Value
    , Parameters!SortOrder.Value = "SIC, City", Fields!City.Value) 
```

**在查询中应用排序**

您可以`order by`根据参数添加到数据集查询以执行相同的操作：

```
...
order by case @SortOrder when 'CustomerName' then CustomerName
  when 'ZipCode, SIC' then ZIP
  when 'SIC, City' then SIC
  end
  , case @SortOrder when 'CustomerName' then CustomerName
  when 'ZipCode, SIC' then SIC
  when 'SIC, City' then City
  end 
```

在这两种情况下，您都会获得基于参数的排序：

![在此处输入图像描述](https://i.stack.imgur.com/GQiHD.png)

![在此处输入图像描述](https://i.stack.imgur.com/2heDM.png)

# jquery - Maxlength验证不包括使用Jquery从单词粘贴的换行符或列表（空格）？

> ID：15751042
> 
> 赞同：0
> 
> 时间：2013-04-01T20:14:16.857
> 
> 标签：jquery, textarea, validation, maxlength

我有以下 Jquery 验证将文本限制为 400 maxlength。它适用于纯文本，但从包含换行符、间距等格式的单词粘贴时似乎不起作用。=

```
$('textarea[maxlength]').keyup(function(){
                //get the limit from maxlength attribute
                var limit = parseInt($(this).attr('maxlength'));
                //get the current text inside the textarea
                var text = $(this).val();
                //count the number of characters in the text
                var chars = text.length;

                //check if there are more characters then allowed
                if(chars > limit){
                    //and if there are use substr to get the text before the limit
                    var new_text = text.substr(0, limit);

                    //and change the current text with the new text
                    $(this).val(new_text);
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:18:33.183

试试这个...

```
function validateLength(textareaElement) {
    // your logic here, use textareaElement instead of $(this)
}
$('textarea[maxlength]').keyup(function(eventObject) {
    window.setTimeout(function() {
        validateLength($(eventObject.target));
    , 1);
}); 
```

1 毫秒的超时应该足以“逃脱 keyup 事件的内部范围”，并允许您获取 textareaElement 的正确字符串值。

# python - 如果我切换到自定义用户模型，我是否必须迁移所有现有的用户帐户？

> ID：15751049
> 
> 赞同：2
> 
> 时间：2013-04-01T20:14:43.933
> 
> 标签：python, django, authentication, web-applications

从 django 1.5 开始可以有一个[自定义的用户模型](https://docs.djangoproject.com/en/1.5/topics/auth/customizing/#auth-custom-user)。我的数据库中已经有很多用户。如果我升级到我自己的（自定义）用户模型，我是否必须手动将所有现有用户迁移到新模型 - 或者这会自动工作吗？

换句话说，假设我`joe`在我的应用中有一个帐户。添加自定义用户模型后，就`joe`可以登录了，还是我必须手动为他创建一个新帐户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:43:22.257

是的，如果您提供自己的 User 类，您将需要迁移模型。

说明可以在[这里找到](https://stackoverflow.com/questions/14904046/migrating-existing-auth-user-data-to-new-django-1-5-custom-user-model/15059338#15059338)。

# javascript - 如何使这个点击实例只发生一次并且所有内容都可以访问？

> ID：15751053
> 
> 赞同：0
> 
> 时间：2013-04-01T20:15:07.667
> 
> 标签：javascript, jquery, click, instance, href

我有一个脚本可以劫持所有带有特定 REL 标记的链接，它会更新我网站的 JS 版本的主要内容区域。问题是当我将它放在它自己的 JS 文件中时，加载到内容框架 (div) 中的页面不会执行代码，即使它具有匹配的 REL。我将脚本附加到这些页面中，并且发生了一个错误，该错误将使该脚本执行的次数与找到该脚本的次数一样多。因此，如果我浏览 3 页内容链接点击会执行 3 次。5 页等于 5 次处决。花了半天时间，真的很想知道我可以做得更好。

这是我试图用来劫持链接的片段。

```
$("a[rel='linkMain']").click(function() {

    var link = $(this).attr("href");
    priFrame(link, 'main', 'true');
    return false;

}); 
```

这是我的 priFrame 的片段，因此您知道我是如何尝试加载数据的。

```
function priFrame(page, frame){

        $('#'+frame+'frame').load('/'+page).hide(0).scrollTop(0).fadeIn(1000);
        $("html, body").animate({ scrollTop: 0 }, 600);
        window.history.pushState(null, page, page);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:18:42.793

这是事件委托的一个很好的例子。试试这个（*注意：这个脚本应该为整个页面包含一次，而不是每个动态导航到的页面*）：

```
$(document).on("click", "a[rel='linkMain']", function() {
    var link = $(this).attr("href");
    priFrame(link, 'main', 'true');
    return false;
}); 
```

您之前看到的行为的原因如下：

当您只是将脚本放在页面上一次时，它会将点击处理程序绑定到`a[rel='linkMain']`页面上已经存在的所有元素。但是，一旦您将新`a[rel='linkMain']`元素动态地引入页面，这些新元素也不会被绑定。

当您将代码放入每个动态加载的页面时，您将新的处理`a[rel='linkMain']`程序绑定到之前已经绑定了单击事件处理程序的元素。

事件委托有效，因为点击处理程序只绑定`document`一次。每当`click`事件发生时，我们只需确保事件源自某个`a[rel='linkMain']`元素，然后触发处理程序。这允许我们从页面中动态添加/删除元素，而不必一直点击哪些`a[rel='linkMain']`元素已经/没有绑定到它们的事件处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:19:38.187

@jmarr 打败了我：P

```
$("body").on('click', "a[rel='linkMain']", function() {

    var link = $(this).attr("href");
    priFrame(link, 'main', 'true');
    return false;

}); 
```

# c# - 将工作时间转换为 24 小时的代码？

> ID：15751054
> 
> 赞同：2
> 
> 时间：2013-04-01T20:15:08.453
> 
> 标签：c#, asp.net

我有一些代码，例如，27:30（27 小时 30 分钟）并将其转换为像 27.5 这样的小数。我有另一个相反的功能。

```
 public class Time
    {
        public static string Hours(decimal d)
        {
            return TimeSpan.FromHours((double)(d + 0.005M)).ToString("h\\:mm");
        }

        public static decimal Hours(string s)
        {
            decimal r;
            if (decimal.TryParse(s, out r))
                return r;

            return (decimal)TimeSpan.Parse(s).TotalHours + 0.005M;
        }
    } 
```

问题是从十进制到字符串的转换似乎需要 24 小时。如果我给它 30.0 它给我 6:00 这是错误的。应该是 30:00

我能做些什么来避免包裹？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:23:02.060

没有格式说明符`TotalHours`，因此您必须自己编写整个逻辑：

```
public static string Hours(decimal d)
{
    var ts = TimeSpan.FromHours((double)(d + 0.005M));
    return string.Format("{0:0}:{1:00}", (int)ts.TotalHours, ts.Minutes);
} 
```

`(int)ts.TotalHours`铸造从小时数中截断分钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:21:44.143

仅用于`DateTime.ToString`获取分钟数，并自行计算小时数。

```
return string.Format("{0:0}:{1}", Math.Truncate(d+0.005m), TimeSpan.FromHours(d+0.005m).ToString("mm")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T20:23:22.440

该`h`格式仅报告不计为天数的小时数。见[这里](http://msdn.microsoft.com/en-us/library/ee372287%28v=vs.100%29.aspx)。

`d`如果您想要非标准行为，您可以通过添加 a 来输出天数，或者在您自己的代码中执行转换。

# vb.net - 动态添加工具提示控件

> ID：15751055
> 
> 赞同：1
> 
> 时间：2013-04-01T20:15:12.033
> 
> 标签：vb.net, visual-studio-2010

我有一个完全用代码创建的子表单。我想向表单上的文本框控件添加工具提示。我知道如何即时设置工具提示，但找不到动态将工具提示控件添加到表单的方法。我在谷歌上找到的所有点击都是指从设计器工具箱中拖动控件。

我需要做类似的事情：

```
 ' Add tool tip control
        Dim toolTip1 As New ToolTip()
        toolTip1.ShowAlways = True
        frm.Controls.Add(toolTip1) 
```

这不起作用

我尝试在设计时添加一个子来处理 from.load 事件（使用指向子的处理程序），但在将工具提示添加到单个动态控件时无法通过错误“未声明工具提示 1”。

如果我从父表单调用此动态表单并将工具提示控件添加到父表单，我可以将它用于子表单。但是，如果我从一个不在父表单上的例程创建表单，我该怎么做呢？

谢谢

```
 Dim frm As New Form
        ' Add tool tip control
        ''Dim toolTip1 As New ToolTip()
        ''toolTip1.ShowAlways = True
        'Draw the Form object

        'close the dynamic frm if existing already
        If frm IsNot Nothing Then
            frm.Close()
        End If

        frm = New Form()
        frm.AutoScaleDimensions = New System.Drawing.SizeF(6.0F, 13.0F)
        frm.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font
        frm.Name = "frm_test"
        'dimension is irrelevant at the moment
        frm.ClientSize = New System.Drawing.Size(10, 10)
        'the parent will be the current form
        'frm.MdiParent = this;
        'splash screen mode form, why not...
        frm.ControlBox = True
        frm.FormBorderStyle = System.Windows.Forms.FormBorderStyle.FixedSingle
        frm.AutoSizeMode = System.Windows.Forms.AutoSizeMode.GrowAndShrink
        frm.BackColor = System.Drawing.Color.LightGray
         For Each item As MYFILE.Class in the Collection
         Dim aTextBox As New TextBox()
            aTextBox.Font = New System.Drawing.Font(sFont, Single.Parse(sSizeFont), System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, CByte(0))
            aTextBox.BackColor = System.Drawing.Color.Yellow
            aTextBox.Location = New System.Drawing.Point(iNewColumnPosition + 5 + intMaxWidthLabel, intVertPos)
            aTextBox.Size = New System.Drawing.Size(intWidthTextBox + 10, intGapHeight)

            'store the biggest width, so that the textboxes can be vertically aligned
            If intWidthTextBox > intMaxWidthText Then
                intMaxWidthText = intWidthTextBox
            End If

            'giving a name to all your object will be the only way 
            'to retrieve them and use them
            'for the purpose of this sample, the name can be the 
            'same for all textboxes.
            aTextBox.Name = item.ParameterName
            'giving the maximun size in caracters for the textbox.
            aTextBox.MaxLength = Integer.Parse(item.ParameterLength)

            toolTip1.SetToolTip(aTextBox, "TIP" & intIndex.ToString)

            'tab have to be ordered
            aTextBox.TabIndex = intIndex
            intIndex += 1
            'Vertical position is to be manage according the 
            'tallest object in the form, in this case the 
            'textbox it self
            intVertPos += intGapHeight
            'adding the textbox to the form
            frm.SuspendLayout()
            aTextBox.SuspendLayout()
            frm.Controls.Add(aTextBox)
         Next 
```

我遗漏了很多代码，但这应该让您了解我在做什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:40:30.090

在vb中是

```
Dim tooltip As New ToolTip(components)
tooltip.SetToolTip(textBox1, "This is a textbox tooltip") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:36:27.573

抱歉，这不在 VB.NET 中，但我很确定您可以轻松地转换它。第一行是将 ToolTip 控件设置为表单组件。第二个是如何为控件设置工具提示并为其提供相关文本。

```
 ToolTip tooltip = new ToolTip(components);
    tooltip.SetToolTip(textBox1, "This is a textbox tooltip"); 
```

# bash - bash find 将 * 视为 *

> ID：15751056
> 
> 赞同：2
> 
> 时间：2013-04-01T20:15:16.100
> 
> 标签：bash, escaping, special-characters

```
#!/bin/bash
read nameArg
find -name "$nameArg" 
```

使用此代码，例如当我输入 *.txt 时，它会给我所有以 txt 结尾的文件，但我只想要名称为 *.txt 的特定文件。如何使 bash 将 * 视为 * ？

直接在终端我知道我应该这样做：

```
find -name "\*.txt" 
```

如何使它在脚本中工作？请注意，输入中并不总是有 *。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:24:45.290

您可以像这样即时逃脱 *：

```
find -name "${nameArg//\*/\\*}" 
```

如果像 Ed 建议的那样，您可能想要一个更通用的解决方案，您可以使用 printf 的 %q 格式：

```
nameArg=$(printf '%q' "$nameArg") 
```

或者如果您的 printf 支持它：

```
printf -v nameArg '%q' "$nameArg" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:38:50.223

您应该在输入中转义`*`。如果您编写脚本来为您转义它们，您将失去提供包含`*`文字字符和元字符的输入的能力。例如，您将如何将模式`\*.*`（名称为`*`，具有任意扩展名）提供给自动引用脚本？

```
#!/bin/bash

read -r nameArg
find . -name "$nameArg" 
```

然后在命令行上：

```
$ bash myscript.sh
> \*.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T04:23:43.017

不幸的是，您需要这样的东西来完全解决您的问题：

```
nameArg="$1"
find -print0 |
xargs -0 -L 1 awk -v n="$nameArg" 'BEGIN{f=ARGV[1]; sub(/.*\//,"",f); if (f==n"") print ARGV[1]; exit}' 2>/dev/null 
```

即首先查找所有文件，然后仅选择名称满足与目标字符串进行**字符串**比较的文件。

AFAIK 没有办法告诉`find`所以搜索字符串而不是模式，并且没有办法可靠地转义`find`搜索模式中的 shell 通配符。

# python - 将 python 字典转换为 JSON 类对象

> ID：15751058
> 
> 赞同：0
> 
> 时间：2013-04-01T20:15:18.563
> 
> 标签：python, json, dictionary

我知道这听起来像是我只需要使用标题中的 json.loads 即可。但我认为情况并非如此。或者至少我应该能够在没有任何库的情况下做到这一点（另外我想理解这一点，而不仅仅是用库方法解决它）。

我目前拥有的是一个字典，其中键是单词，值是这些单词的总数：

`myDict = { "word1": 12, "word2": 18, "word3": 4, "word4": 45 }`

等等...

我想要的是让它变成下面的样子（这样我就可以将它插入到 scraperwiki 数据存储中）：

`myNewDict = {"entry": "word1", "count": 12, "entry": "word2", "count": 18, "entry": "word3", "count": 4, "entry": "word4", "count": 45}`

我想我可以循环`myDict`并在我新选择的键“entry”和“count”之后插入每个键/值（就像这样）：

```
for k, v in myDict.iteritems():
    myNewDict = { "entry": k, "count": v } 
```

但有了这个，`myNewDict`只保存最后一个结果（所以只给我`myNewDict={"entry":"word4", "total":45}`

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:19:13.050

你需要的是一个[清单](http://docs.python.org/2/library/functions.html#list)：

```
entries = []

for k, v in myDict.iteritems():
   entries.append({ "entry": k, "count": v }) 
```

或者甚至更好地使用列表推导：

```
entries = [{'entry': k, 'count': v} for k, v in myDict.iteritems()] 
```

更详细地说，您`myDict`在循环的每次迭代中都被覆盖，每次都创建一个新的字典。如果你需要它，你可以像这样将键/值添加到字典中：

```
myDict['key'] = ... 
```

.. 但在循环中使用，这将覆盖与“键”关联的先前值，因此使用列表。以同样的方式，如果您键入：

```
myNewDict = {"entry": "word1", "count": 12, "entry": "word2", "count": 18, "entry": "word3", "count": 4, "entry": "word4", "count": 45} 
```

你真的得到了`{'count': 45, 'entry': 'word4'}`！

***注意：***我不知道输出数据的预期格式是什么，但在 JSON 方面，dicts 列表应该是正确的（我相信 JSON 中的键也是唯一的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:38:27.587

虽然不清楚 100% 清楚您想要什么输出，但如果您只想要上面概述的格式的字符串，您可以将循环修改为以下形式：

```
myCustomFormat = '{'
for k, v in myDict.iteritems():
    myCustomFormat += '"entry": {0}, "count": {1},'.format(k, v)
# Use slice to trim off trailing comma
myCustomFormat = myCustomFormat[:-1] + '}' 
```

话虽如此，这可能不是你想要的。正如其他人指出的那样，“键”的重复性会使解析变得有些困难。

# ruby-on-rails - 使用 Cygwin 和 Ruby 解决地址空间已被占用错误

> ID：15751059
> 
> 赞同：1
> 
> 时间：2013-04-01T20:15:24.403
> 
> 标签：ruby-on-rails, windows, cygwin

我不断收到相同类型的错误消息，并且我已经尽我所能摆脱它们。消息如下，只有模块有时会发生变化：

```
ruby 5740 child_info_fork::abort: address space needed by 'date_core.so' (0x600000) is already occupied 
```

这些消息在尝试运行 Rails 时会在不同时间出现，例如“rails 控制台”。我正在运行以下环境：

*   Windows 7 旗舰版 64 位
*   Cygwin Net 使用 setup 2.774（从 Internet 镜像安装）
*   红宝石 1.9.3p392
*   导轨 3.2.11

我已采取以下步骤尝试解决此问题：

*   删除所有 BLODA 并重新启动，包括 Norton 360 和 Malwarebytes。（BLODA 是狡猾的应用程序的大列表。）
*   删除并重新安装 Cygwin。
*   执行“rvm implode”并重建 RVM 和 Ruby on Rails 环境。
*   使用 CMD 和 ASH 运行“peflagsall”和“rebaseall”。跑“rubyrebase”。重新启动。
*   使用 FIND 构建所有 *.so 和 *.dll 文件的文件。运行“rebase -T”。重新启动。这也是使用“-b 0x77000000”开关完成的。
*   使用相同的文件创建“to_peflags”脚本，针对每个单独的文件发出 peflags。重新启动。

所有的修复尝试都是徒劳的。有时，“rebase -si |grep '*'”会很干净。任何运行“rails 控制台”或类似命令的尝试都会导致地址空间占用消息。随后的“rebase -si”将再次显示冲突。我一直在尝试对 Ruby 模块运行“peflags”，但我只得到“跳过，因为无法打开”错误消息。文件权限和 ACL 都显示正确的权限。无论是否使用 Administrator，都会发生同样的错误。

这很令人沮丧。我想修复我当前的环境，但我正在考虑迁移到 MSYS 或 SFU，但我不知道这是否是不错的选择。我也在考虑使用原生 UNIX，但当我得到它时，我会跳下悬崖。

现在，有没有人为我解决这个特定的错误？谢谢…

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:21:08.957

我使用 procexp 来监视“rails 控制台”的执行。Bash 正在调用 cmd.exe 来运行 rails.bat 文件。Cmd.exe 在 ASLR 模式下运行。使用 Microsoft EMET 3.0 为 bash 和 cmd 关闭强制 ASLR 和自下而上的 ASLR。Cmd.exe 仍然在 ASLR 模式下运行。它必须以这种方式编译。

更新注册表以将 HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\Memory Management\MoveImages 设置为 0，-1 然后 1。0 导致系统问题。-1 没有效果。1，这应该是默认的，只要 EMET 更改到位，就会有所帮助。但是，这是不可靠的，因为地址空间占用最终会再次发生。

决定尝试安装不需要 ASLR 或允许我使用 PE 标志禁用它的命令处理器。我安装了 TCC/LE 并试图让 Cygwin Bash 使用它来处理 .bat 文件。我尝试在注册表中使用路径变量、COMSPEC 变量以及对 batfile 和 cmdfile 的更改均无效。Cygwin Bash 必须对其进行硬编码或一些不明显的控制。

我的解决方法是替换我的环境。我知道我最终会迁移到一些 Unix，但现在我正在转换到 MinGW/MSYS 和 RubyStack。我想要做的就是让一个稳定的 RoR（Ruby on Rails）环境在今天运行。我没有看到在 Windows 7 Ultimate 中使用 Cygwin 会发生这种情况。我一直遇到太多问题，而这个问题非常非常难以破解。谢谢……</p>

# ruby-on-rails - 在 redirect_to 协议 rails 3 上丢失了尾随斜杠

> ID：15751066
> 
> 赞同：3
> 
> 时间：2013-04-01T20:15:55.863
> 
> 标签：ruby-on-rails, redirect

带有 redirect_to 的 Rails 3 应用程序正在丢失斜杠，因此“/test.com/foo”正在重定向到“ [https://test.comfoo](https://test.comfoo) ”

```
class ApplicationController < ActionController::Base
before_filter :switch_to_ssl
def switch_to_ssl
  if ENV['RAILS_ENV']=="production" && !request.ssl?
        redirect_to :protocol=>"https://"
      end
end 
```

有任何想法吗？

# git - 在不提交的情况下将文件添加到 git index

> ID：15751067
> 
> 赞同：3
> 
> 时间：2013-04-01T20:16:03.220
> 
> 标签：git, version-control, dvcs, tortoisegit

使用 Git 时，我的工作流程通常包括启动 TortoiseGit 并选择我想要提交的文件。

这（我假设）运行*git add* (?) 并将这些更改提交到本地 repo。

我的问题是——为什么将文件添加到索引和提交它们之间需要分开？

是否有任何用例可以简单地将文件添加到索引而不同时提交它们？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T20:22:42.387

将文件添加到索引称为暂存。暂存提供了将要提交的内容和要保留在提交之外的内容之间的分离。如果您进行了一些更适合不同提交的更改，则可以将它们保留在那里而不进行暂存，并对添加到索引中的内容进行提交。

因此，从本质上讲，它可以帮助您准备简单、连贯的提交。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T20:22:58.187

我经常使用索引/暂存区。它可以被认为有点像购物车。它可以让你在你的项目中四处游荡，随手添加东西，装满你的购物车。一旦你拥有了你想要的东西，你就提交（即购买这些更改并离开商店）。

其中一个很棒的功能是补丁添加。`git add -p`aka`git add --patch`允许您从文件中选择特定的块，因此您实际上可以提交各种文件的部分。尽管我使用 Vim 的病原体插件，但我每天都这样做，这使得从更改到更改，在工作副本和索引副本之间来回移动它们变得非常容易和直观。一旦我只将一个不错的、细粒度的提交的部分添加到购物车中，我就会使用一个明智的、细粒度的提交消息（50 个字符或更少）来提交它。这让我的历史变得难以置信，它让我在一小时后改变主意，并以交互方式 rebase 将提交推送到一起，并将它们重新排序为更合理的流程，有时让单元测试在每次提交时工作，所以我有在我的历史上到处都是干净、安全、回滚点。

我还使用补丁添加来帮助我确定文件的哪些部分一起有意义。在 Vim I do`,gs`中，会在新的拆分窗口中弹出打开当前文件 repo 的 git 状态。我使用`<C-n>`和`<C-p>`跳过带有实际文件的状态消息行。我`D`在这些行上使用在一组拆分窗口中对它们进行 vimdiff，然后`]c`从`c[`更改到更改的顶部跳跃，使用`dp`(diff put) 和`do`(diff gain) 将更改移入或移出当前缓冲区（这些工作来自任何一个拆分，并在缓冲区`<C-w>h`之间`<C-w>l`来回跳跃）。一旦我喜欢我为该文件准备的内容，我`:w`就会保存它，然后`<C-w>k`再次到状态拆分以选择一个新文件以这种方式`-`暂存，或者在任一组中的文件上将它们完全切换到暂存和退出暂存，或者`cc`实际提交，然后它会要求提交消息。在提交之前，我可以通过这些方式回顾所有的事情，而且我经常会意识到我忘记了一些东西，或者添加了一些我不应该的东西，然后更正它。因此，我的提交相当原始。如果我愿意`commit --amend`，我可以暂存并使用，`cA`而不是`cc`，或者`ca`如果我还想改写提交消息。

简而言之，提交整个文件——就像我过去在 SVN 时代所做的那样——现在对我来说感觉非常粗糙和不正确。在工作时只改变一个问题真的很难，但是通过索引的力量添加补丁让我梳理出在一次提交中有意义的实际更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T20:32:25.550

暂存几乎就像文件的迷你提交。您可以在实际提交之前暂存、重新暂存、查看更改，甚至恢复到最近的阶段。做几个小提交可以帮助你组织，就像做几个完整的提交一样。

本质上，这是一个更精细的粒度级别。

此外，它还可以让您在提交之前在本地进行一些操作 - 它实际上与创建一个游乐场分支并执行一堆提交，然后在最终提交之前合并回来。只是比所有这些都轻得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T20:25:45.630

您不必提交添加到索引/暂存区域的所有文件。

```
git add fileA
git add fileB
git add fileC 
```

用例 1：仅提交 fileA 和 fileB：

```
git commit -m "fileA, fileB added." fileA fileB 
```

用例 2：将文件添加到暂存区域后跟踪文件的更改。这将向您显示工作副本与上次将文件添加到暂存区域之间的区别。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-08-06T10:09:16.263

在 SmartGit 中，您可以在文件上单击鼠标右键，然后选择 satge。

# mysql - 从组中选择所有元素

> ID：15751071
> 
> 赞同：0
> 
> 时间：2013-04-01T20:16:14.130
> 
> 标签：mysql, sql

我有下一张桌子 -`Task(id, type, sessionId, termination, scenario)` 我有一个`sessionId`.

我想选择本次会议常见的所有任务。如果任务具有相同的类型、终止和场景，则它们是相等的。

例子 -

```
| id | type | sessionId | termination | scenario |
  1     A         20        duration      sc1
  2     B         20       invocation     sc1
  3     C         20        duration      sc2
  4     A         21        duration      sc1
  5     B         21       invocation     sc1 
```

对于`sessionId`列表等于 (20, 21) - 我想获取下一个信息

```
| id | type | sessionId | termination | scenario |
  1     A         20        duration      sc1
  2     B         20       invocation     sc1
  4     A         21        duration      sc1
  5     B         21       invocation     sc1 
```

ids=1,2,4,5 的任务在会话 20 和 21 中很常见。

我设计下一个查询 -

```
select l.* from Task l 
inner join(select p.* from Task p 
           where 
                p.sessionId in (20,21) 
           group by 
                  p.type, 
                  p.termination, 
                  p.scenario 
           having 
                  count(p.id)=2)s 
on 
   l.type=s.type 
   and l.scenario=s.scenario 
   and l.termination=s.termination; 
```

这是获取此类信息的最佳方式吗？也许有一个更好的查询，它只包含一个`select`操作并且工作得更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:38:55.947

这是方法。查找与所有会话匹配的所有对类型、终止和场景。然后加入`tasks`表中以获取所有信息：

```
select t.*
from tasks t join
     (select type, termination, Scenario
      from tasks
      where sessionId in (20, 21)
      group by type, termination, scenario
      having count(distinct sessionId) = 2
     ) tts
     on tts.type = t.type and tts.termiantion = t.termination and tts.scenario = t.scenario
where t.sessionId in (20, 21); 
```

您需要更改列表和`2`（如果您更改列表的大小）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:02:21.533

My below code does not limit to any particular sub-set of `sessionID`.

```
SELECT t1.* 
FROM Task AS t1 INNER JOIN Task AS t2 ON t1.type = t2.type AND t1.termination = t2.termination AND
                                   t1.scenario = t2.scenario AND t1.sessionid <> t2.sessionid AND
                                   t1.id <> t2.id
ORDER BY t1.id 
```

Here's SQL Fiddle: [http://sqlfiddle.com/#!2/55d7c/9](http://sqlfiddle.com/#!2/55d7c/9) Feel free to experiment.

Have I somewhat misunderstood your requirements?

# jakarta-ee - Servlet：与数据库的连接不起作用

> ID：15751076
> 
> 赞同：1
> 
> 时间：2013-04-01T20:16:42.330
> 
> 标签：jakarta-ee, tomcat, servlets

我正在使用 Eclipse Juno、Java 7、Tomcat 7 和 MySQL 5.5 开发我的第一个 Java EE 项目，目标是创建一个 servlet、一个 JSP 视图和一些模型。但是我有一个连接到servlet内部数据库的大问题。首先，我直接从 servlet 连接，然后调用我创建的 DBConnection 对象，无论如何它不会改变问题，因为我很确定我按照下面的说明正确地完成了它，但仍然存在连接问题：

```
public class servphilo extends HttpServlet {
    ResultSet listeEtat;
    DBConnection conn = null;

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        try {
        conn=new DBConnection();
            System.out.println("création objet connexion OK");
        } catch(Exception e) {
            e.printStackTrace();
        }       
        try {
            conn.getDBConnection();
        } catch (Exception e) {
            e.printStackTrace();
        }
        this.getServletContext().getRequestDispatcher( "/WEB-INF/view.jsp" ).forward( request, response );      
    }
}

public class DBConnection {
    Connection conn = null;
    public DBConnection () {
        //System.out.println("objet DBconnection OK");
    }

    public Connection getDBConnection() throws Exception{
        Class.forName("com.mysql.jdbc.Driver").newInstance();

        String sUserName="aaa";
        String sPwd="bbb";
        System.setProperty("java.net.preferIPv4Stack" , "true");
        conn = DriverManager.getConnection("jdbc:mysql://localhost/base",sUserName,sPwd);
        System.out.println("objet DBconnection OK");
        return conn;
    }
} 
```

从浏览器正确发送了 JSP 视图，但 Eclipse 的控制台写入了以下消息：

```
com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure
The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server. 
```

行 System.setProperty("java.net.preferIPv4Stack" , "true"); 您可以在下面看到的是从经典 Java 类到 IPv4 连接的前一个想法，它运行良好，但现在使用 servletit 却不行。

我们必须在 IPv4 上强制使用 Tomcat 是否存在同样的问题？我能做什么（文件、行等）？谢谢你帮助我。

# android - AChartEngine 移动条形图

> ID：15751077
> 
> 赞同：2
> 
> 时间：2013-04-01T20:16:46.843
> 
> 标签：android, bar-chart, achartengine

我已经使用 AChartEngine 实现了一个条形图。我已将所有必需的值作为 XYSeries 添加到数据集。
该图表是在应用程序启动时绘制的前 10 个条形图。
我想以编程方式将图形移动到 X 轴上的某个点，即我想以编程方式移动图形以在 X 轴上显示条形 25-35 或其他一些条形。
有人可以告诉我这是如何实现的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:57:15.043

您首先需要修改 X 轴的可见范围：

```
renderer.setXAxisMin(25);
renderer.setXAxisMax(35); 
```

然后，只需调用`repaint()`您的图表视图：

```
chartView.repaint(); 
```

# ruby-on-rails - ruby new create 错误，无法理解

> ID：15751086
> 
> 赞同：-2
> 
> 时间：2013-04-01T20:17:20.940
> 
> 标签：ruby-on-rails, ruby

我是 ruby​​ on rails 的新手，我打算学习它。

但是我无法理解以下错误。

请解释一下。也告诉我如何解决它。

这是我运行的命令，

```
rails new Documents/rails/first/ 
```

这是错误：

```
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:230:in `activate': can't activate rack (~> 1.4.5, runtime) for ["actionpack-3.2.13", "railties-3.2.13"], already activated rack-1.5.2 for ["rack-ssl-1.3.3", "railties-3.2.13"] (Gem::LoadError)
        from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:246:in `activate'
        from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:245:in `each'
        from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:245:in `activate'
        from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:246:in `activate'
        from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:245:in `each'
        from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:245:in `activate'
        from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:1056:in `gem'
        from /usr/bin/rails:18 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:44:00.107

您可能有冲突加载依赖项。

猜测一下，您可以尝试：

```
bundle install
bundle exec rails new Documents/rails/first/ 
```

. . . 这在 Rails 环境中非常常见。该命令确保您在调用任何代码时`bundle exec`使用应用程序中指定的 gem 依赖项运行（并确保您已安装该文件中列出的所有 gem）`Gemfile``require "this-or-that-gem"``bundle install`

# android - Android 手机的视频设置

> ID：15751096
> 
> 赞同：0
> 
> 时间：2013-04-01T20:17:48.043
> 
> 标签：android, video, mpeg-4

我们收到了一个在 Android 手机上展示的视频广告。不幸的是，当我们将其提供给其中一个广告网络时，他们将错误发回给我们：

```
错误信息：
03-28 19:16:07.950：E/MPEG4Extractor(1695)：视频格式错误
03-28 19:16:07.950: E/OMXCodec(1695): [OMX.SEC.avc.dec] err = -1007
03-28 19:16:07.985: E/OMXCodec(1695): [OMX.SEC.aac.dec] err = -1011
03-28 19:16:08.560: V/AwesomePlayer(1695): MEDIA_ERROR -1007
03-28 19:16:08.560: V/AwesomePlayer(1695): notifyListener_l() msg​​ (100-MEDIA_ERROR), ext1 (1), ext2 (-1007)
03-28 19:16:08.560: V/MediaPlayerService(1695): [117] 通知 (0xa61d8, 100, 1, -1007)
03-28 19:16:08.560: V/AudioSink(1695): 停止
03-28 19:16:08.560: V/MediaPlayer(19343): 收到消息 msg=100, ext1=1, ext2=-1007
03-28 19:16:08.560: E/MediaPlayer(19343): 错误 (1, -1007)

```

我可以毫无问题地通过 VLC 在 Mac/Windows 上播放视频。谁能帮助破译错误信息并让我知道它不喜欢什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:44:45.000

事实证明，由于某些容器解析/解码问题，Android 尝试读取您的视频但失败。

[以下](http://developer.android.com/guide/appendix/media-formats.html#core)是 Android 支持的每个版本的媒体格式的完整列表。

您可能希望以一种受支持的格式/编解码器重新编码/重新复制您的视频文件。我个人使用[Handbrake](http://handbrake.fr/downloads.php)，它可能能够将您的视频转码为相当数量的输出。此外，他还为 Android 手机提供了一些方便的预设。

# javascript - Javascript jQuery 插件渲染问题

> ID：15751099
> 
> 赞同：0
> 
> 时间：2013-04-01T20:18:13.907
> 
> 标签：javascript, jquery, plugins

这是我的问题。这里有一个漂亮的插件[http://lab.smashup.it/flip/](http://lab.smashup.it/flip/)可以翻转东西。我设法实现了它，但出于某种奇怪的原因，我只渲染了动画的前半部分，第二部分只是不可见（或隐藏），然后它跳到最后。为了让事情变得更有趣，在某些时候一切都运行良好，但突然间就不行了。我当然尽可能回溯到一切正常的时候，同样的问题又来了。我似乎无法找到问题的根源。如果有人可以通过测试插件并告诉我他们是否设法获得完整的动画渲染来帮助我。对于我的 HTML，我基于插件演示页面的源代码来确保它，但无济于事。

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Test#0935</title>
    <script src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">
        // Load jQuery 
        google.load("jquery", "1");
    </script>
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="JS/jquery.flip.js"></script>
    <script type="text/javascript">
        $(function() {
            $("#id1").bind("click", function() {
                $("#flipo").flip({
                    direction: "bt"
                })
                return false;
            });
        });
    </script>
    <style type="text/css">
        #flipo {
            width:100px;
            height:70px;
            background-color:lightblue;
            margin:20px;
        }
    </style>
</head>
<body>
    <div id="flipo"></div>
    <div id="id1">left</div>
</body>
</html> 
```

对于那些认识到这个问题的人，我确实尽量避免发布新帖子，直到有人建议我这样做，因为没有人阅读旧帖子。我还将我的初始帖子标记为删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:40:34.917

您发布的基本内容没有错，我设置了一个快速小提琴并且效果很好，但是那时我注意到您没有正确包含您的 JS。我认为问题就在于此。

首先，您使用`google.load`. 然后你会从 jQuery.com 获得一个（可能不同的）版本。此外，翻转依赖于 jQuery UI，我看不到您在发布的 html 片段中的任何地方导入它。

你为什么不试试这个并摆脱 google.load 和 jQuery.com 源代码，看看是否可行。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>
<script src="JS/jquery.flip.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:40:01.933

# [演示小提琴](http://jsfiddle.net/mohammadAdil/BSWeY/)

此插件依赖于`jquery`和`jqueryUI`，将两者都包含在您的代码中

# matlab - 根据 pdist 的结果创建距离矩阵

> ID：15751101
> 
> 赞同：2
> 
> 时间：2013-04-01T20:18:18.143
> 
> 标签：matlab, matrix

我想根据 pdist 的结果创建一个矩阵。pdist 返回距离向量：1-2、1-3、1-4.. 2-3.. 等。

我试图按照建议使用它来获得上三角形：

```
a = [1,2,3,4,5,6,7,8,9,10]
b=triu(ones(5),1);
b(b==1)=a; 
```

但这会返回

```
0     1     2     4     7 
0     0     3     5     8
0     0     0     6     9
0     0     0     0    10
0     0     0     0     0 
```

是否有一个 oneliner/function 可以正确执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:28:25.553

正如我从标题中了解到的，您想从 PDIST 函数结果创建一个方阵。可以使用[SQUAREFORM](http://www.mathworks.com/help/stats/squareform.html)函数轻松完成。它在两个方向都有效。

```
a = pdist(...);
asq = squareform(a); 
```

# sql - 根据表 A 的列更新表 B 的列

> ID：15751104
> 
> 赞同：1
> 
> 时间：2013-04-01T20:18:36.953
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个巨大的存储过程，我正在尝试优化它。

我有一个临时表**A**，列**Id**。

我有一个主表 B，其中包含**Id**列和一个布尔字段**Test**

对于表 A 中的所有 Id，我需要使表 B 中的 Test = 1。

例子： **一个**

```
Id
--
1
2
3 
```

我需要按如下方式获取表 B。我已经在表 B 中有 Id 字段，我只需要更新测试列 **B**

```
Id Test
-- ----
1   1
2   1
3   1
4
5
6 
```

我目前正在使用 while 循环遍历 Table **A**，并且对于每个 Id 我正在更新 Table **B**中的 Test 列。

```
WHILE (1 = 1) 
BEGIN  

  -- Exit loop if no more Transactions
  IF @@ROWCOUNT = 0 BREAK;

  Update [B]
  set Test = 1 
  where Id = (SELECT TOP 1 Id
  FROM #B
  WHERE Id > @Id1 
  ORDER BY Id)    

END 
```

PS：@Id1 是存储过程的输入参数。

我想不出任何其他有效的方法，但是我的查询需要很长时间才能运行。如果有更好的方法来做同样的事情，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:21:45.587

这很简单。

```
UPDATE [B] 
    SET [TEST] = 1 
FROM [B] INNER JOIN [A]
    ON [A].ID = [B].ID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T20:22:38.937

另一种选择：

```
UPDATE b SET test = 1
  FROM dbo.TableB AS b
  WHERE EXISTS (SELECT 1 FROM dbo.TableA WHERE ID = b.ID); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T20:20:43.323

您不需要为此循环，只需加入这些表

```
UPDATE B
SET B.Test = 1
FROM TableB B
INNER JOIN TableA A
   ON A.Id = B.ID 
```

[](http://sqlfiddle.com/#!3/dd127/1)**这是一个带有现场演示[**的 sqlfiddle 。**](http://sqlfiddle.com/#!3/dd127/1)**

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T20:23:09.580

您可以使用`in`来查找要更新的记录：

```
update b
set Test = 1
where Id in (select Id from #A) 
```

另一种选择是加入表格：

```
update x
set Test = 1
from b as x
inner join #A as a on a.id = x.id 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-01T20:27:30.910

如果我正确理解您的问题，您需要做的就是加入 A 和 B。

```
UPDATE TableB SET test = 1
FROM TableB b
INNER JOIN TableA a ON a.id = b.id
WHERE b.ID > @Id1 
```

基本上，您希望在 TableA 和 TableB 相交的任何地方进行更新。

[http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)**

# android - 对方关闭时的Android Socket事件？

> ID：15751114
> 
> 赞同：0
> 
> 时间：2013-04-01T20:19:19.670
> 
> 标签：android

我正在为 Android 设备编写软件，该设备用作由 PC 上的程序运行的工业过程的遥控器。PC 始终在监听，Android 设备使用 Android Socket 类打开与 PC 的连接。之后，它可以发送命令或请求数据。（所以我猜您可以将 Android 视为客户端，将 PC 视为服务器）。

任何一方都可以关闭连接。在 PC 上，有一个 WinSock 事件处理程序，当 Android 关闭连接时会调用它，但我不知道如何在 Android 端做同样的事情。[我在 Android Socket 文档（ http://developer.android.com/reference/java/net/Socket.html](http://developer.android.com/reference/java/net/Socket.html) ）中没有看到任何关于事件或回调的内容。当 PC 异步关闭连接时，如何通知我的代码，以便我可以通知用户、关闭连接结束或采取其他操作作为响应？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:37:49.127

我相信你在问[TCP Sockets](http://developer.android.com/reference/java/net/Socket.html)。如果是这种情况，您将收到一个`IOException`指示套接字连接上的关闭事件的消息。因此，只要您正在处理 IOExceptions，就不需要考虑其他因素。

# c# - 如何在不同的操作 MVC.NET c# 中初始化和关闭 TCPClient

> ID：15751115
> 
> 赞同：0
> 
> 时间：2013-04-01T20:19:20.427
> 
> 标签：c#, asp.net-mvc, tcpclient

我正在尝试创建一个 MVC.Net 控制器，它将在一个操作中启动一个 TCPClient。在另一个动作中读取最新结果，并在最后一个动作中关闭 TCPClient。但我不知道从哪里开始。

TCPClient 应该是类的对象吗？

这是我认为我需要如何开始的一些伪代码，但我无法将我的头包裹在这个想法上，将不胜感激

```
public class Foo : Controller
{
    TCPClient myClient = new TCPClient();

    public bool StartClient(string ip, int port)
    {
    }

    public string readMostRecentPacket()
    {
    }

    public bool StopClient()
    {
    }

} 
```

我试图避免潜在的 DOSing TCP 连接，因为在单个操作中创建和关闭客户端开始拒绝连接，这是一个 AJAX 轮询隐喻

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T05:48:12.683

在尝试此操作之前，您需要考虑一些事项：

1.  ASP.NET MVC 控制器是无状态的。这意味着每个请求都会创建一个新的控制器实例，您将无法跟踪任何状态。每个控制器动作都不知道任何先前的控制器动作，即使在同一个函数中也是如此。这是因为 HTTP 是无状态的。您可以使用 SessionState 或 Singleton 或应用程序缓存或数据库或其他东西来跟踪状态，但 ASP.NET MVC 不会为您跟踪事物。
2.  多个用户最终将调用相同的控制器代码（相同的网页），并且您最终将运行代码的多个实例。这可能会在您的代码中引入难以跟踪的错误。另一种说法是多个线程调用相同的代码可能会导致严重的问题。
3.  如果你最终成功地实现了你的方法，你可能会想要做某种连接或客户端池，因为创建网络连接的成本很高。

这是一种可能的方法（请谨慎使用，因为我尚未测试或实施此方法）：

1.  创建具有静态 TCPCient 对象列表或数组的静态类
2.  对此类的所有访问都是同步或锁定的（请阅读 - 信号量、监视器或互斥锁）

这个静态类将是您应用程序中的单个实例，您需要防止多个线程/用户相互踩踏。您将需要请求 TCPClient 并在用户会话中跟踪它。这样，每个后续请求都可以查找 TCPClient 对象并采取任何必要的操作。

陷阱：

1.  多线程
2.  阻塞 - 当太多用户加载您的网页时，TCPClient 数组/列表可能不够大。
3.  死锁
4.  内存不足错误
5.  等等。

希望这可以帮助。祝你好运。

# azure - 在 C# 和 PHP 之间集成 Azure 服务总线消息

> ID：15751124
> 
> 赞同：1
> 
> 时间：2013-04-01T20:19:57.950
> 
> 标签：azure, integration, servicebus

翻阅[Microsoft for PHP Azure bus 的开发说明](http://www.windowsazure.com/en-us/develop/php/how-to-guides/service-bus-topics/#SendMessage)，我看到 PHP 总线库有`$message->getBody()`，其中 C# 库有`message.GetBody<T>();`并期望有一个类型。

我们如何以灵活的方式在 PHP/C# 之间发送消息（作为简单的类），如果收到更新的消息版本也不会中断？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T05:55:11.643

我的猜测是基于 php 的代理消息的默认数据类型是字符串。根据您发送的内容，这里有几个选项：

1.  使用 BrokeredMessage 上的键值对集合发送数据。php:`$message->setProperty("Key", "Value");`或 c#:`brokeredMessage.Properties.Add("Key","Value");`
2.  将所有对象序列化为 json，然后插入 BrokeredMessage 正文。如果在 C# 中检索，请使用`BrokeredMessage.GetBody<string>()`

另一个提示是，在 C# 中，您只能调用 BrokeredMessage.GetBody() 一次。

# php - MySQL加入3个表

> ID：15751127
> 
> 赞同：1
> 
> 时间：2013-04-01T20:20:01.757
> 
> 标签：php, mysql, join

**我发现了同样的问题，按照步骤操作，但仍然出现错误。**
我一直在寻找这个很多天。

我有 3 张桌子

**用户**

```
+----+-----------------------------+-------------+
| id | fname                       | lname       |
+----+-----------------------------+-------------+
| 4  | John                        | Menezes     |
+----+-----------------------------+-------------+ 
```

**团体**

```
+----+-----------------------------+-------------+
| group_id | group_name            | created_on  |
+----+-----------------------------+-------------+
| 1        | Facebook friends      | 25/12/2012  |
+----------+-----------------------+-------------+ 
```

**小组成员**

```
+----+-------------+-------------+
| id | user_id     | group_id    |
+----+-------------+-------------+
| 4  | 4           |     1       |
+----+-------------+-------------+ 
```

我想得到有点像这样的 **最终输出**

```
+----+--------------+-----------------------+
| fname |  lname    |        groupname      |
+----+--------------+-----------------------+
| John  | Menezes   |     Facebook Friends  |
+----+--------------+-----------------------+ 
```

我使用了这个查询

```
SELECT u.fname, u.lname, g.group_name
FROM user AS u
LEFT JOIN group_members AS gm ON gm.user_id = u.id
INNER JOIN group AS g ON g.group_id = gm.group_id 
```

但它给了我这个错误

**#1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的 'group AS g ON g.group_id = gm.group_id LIMIT 0, 30' 附近使用正确的语法**

也试过这个

```
where g.low_limit > 70
and g.high_limt < 120 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:24:29.250

您遇到的问题是mysql [http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)`group`中的保留字。您需要将表名和列名放在反~~引号单引号~~中，以便 MySQL 将名称解释为表。

 ~~尝试

```
SELECT `u`.`fname`, `u`.`lname`, `g`.`group_name`
FROM `user` AS `u`
LEFT JOIN `group_members` AS `gm` ON `gm`.`user_id` = `u`.`id`
INNER JOIN `group` AS `g` ON `g`.`group_id` = `gm`.`group_id` 
```

编辑：字符更改的名称。感谢@adrian

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:23:42.040

尝试：

```
SELECT u.fname, u.lname, g.group_name
FROM user AS u
LEFT JOIN group_members AS gm ON gm.user_id = u.id
INNER JOIN group AS g ON g.group_id = gm.id 
```~~

# .net - FtpWebRequest ListDirectory 在 10,000 个文件处被截断

> ID：15751131
> 
> 赞同：0
> 
> 时间：2013-04-01T20:20:16.723
> 
> 标签：.net, ftp, ftpwebrequest, ftpwebresponse

我正在尝试获取 FTP 目录列表。我的文件夹中有超过 10,000 个文件，而且我返回的列表似乎被截断为 10,000 个文件。我能做些什么来取回所有文件吗？

```
FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://mysite.com");
request.Method = WebRequestMethods.Ftp.ListDirectory;

request.Credentials = myCache;
FtpWebResponse response = (FtpWebResponse)request.GetResponse();

Stream responseStream = response.GetResponseStream();
StreamReader reader = new StreamReader(responseStream);
string Datastring = reader.ReadToEnd();

string[] myfiles = Datastring.Split(new string[] { Environment.NewLine },
    StringSplitOptions.RemoveEmptyEntries); 
```

# backbone.js - 将数据从主应用程序视图传递到某些子视图

> ID：15751134
> 
> 赞同：1
> 
> 时间：2013-04-01T20:20:21.187
> 
> 标签：backbone.js

请考虑以下 Backbone 应用程序结构：

```
AppView
    Subview
        FirstSubviewInQuestion
    Subview
        Subview
            SecondSubviewInQuestion 
```

应用程序视图创建并存储特殊项目的集合。在某个时间，第一个和第二个子视图需要访问该集合。现在将集合传递给他们的最佳方式是什么？

我自己看到了一些方法，但每种方法都有缺点：

1）不在App View内部创建该集合的实例，而是在全局范围内创建该集合的实例，然后将其作为依赖项传递（项目使用RequireJS；因此它将传递给AppView和两个子视图）。缺点：应用程序视图应该是应用程序中最顶层的元素。然而突然间，我们看到了一些漂浮在上面的集合实例。

2）或者我可以执行以下操作：

```
// some subview
var collection = {};
Backbone.trigger( "item:getSpecialItems", collection);
// now the collection has data

// app view
this.listenTo( "item:getSpecialItems", function(obj) {
    // copy collection to passed object
    _.extend(obj, this.specialCollection);
}); 
```

缺点：我们正在触发一个全球事件。我们知道只有应用程序视图会响应，但感觉就像一个糟糕的设计。另外，这种传递集合的方式似乎是一种 hack。

也许还有其他一些聪明的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:45:42.817

我会说#1。

> 应用程序视图应该是应用程序中最顶层的元素

对，但你说的是（我*认为*） a `Collection`，而不是 a `View`; 这两者是您的应用程序的完全独立的部分（在 MVC 中，第一个是“M”，第二个是“V”）。根据定义，如果您的视图是由您的数据驱动的，则数据*必须*比任何视图“更高”（在依赖关系树中），所以我认为这种方法没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T00:55:53.350

如果您的目标是获取集合的共享实例，我的方法是将其从父视图传递到“子视图”，然后从子视图传递到其子视图。但是，我不一定会使用 require 来传递此集合的单例。

您还可以从关于“创建和存储特殊对象”的特殊方法的视图中提取所有逻辑到一个辅助类中，其唯一域就是这个。然后，该帮助程序成为从视图层次结构外部可用的实用程序，***甚至可能***是全局或通过 require。

# scala - 在 Mac OSX 上运行 IntelliJ 中的第一个 playframework 示例

> ID：15751139
> 
> 赞同：10
> 
> 时间：2013-04-01T20:20:41.130
> 
> 标签：scala, playframework, intellij-idea

在我的新 mac OSX 10.8.3 中，我安装了 scala 2.10.0，播放 2.1.0 和 IntelliJ12，并创建一个播放项目如下：

```
#install brew
> ruby -e "$(curl -fsSL https://raw.github.com/mxcl/homebrew/go)"
> brew --version
0.9.4

# update brew database
> cd $(brew --prefix)
> brew update
> cd $(brew --prefix) && git pull --rebase

# get scala 2.10.0
> brew versions scala
2.10.1   git checkout 79dc6f1 Library/Formula/scala.rb
2.10.0   git checkout 8ca07aa Library/Formula/scala.rb
2.9.2    git checkout 8896425 Library/Formula/scala.rb
...

> git checkout 8ca07aa Library/Formula/scala.rb   # 2.10.0
> brew install scala
> scala -version
Scala code runner version 2.10.0 -- Copyright 2002-2012, LAMP/EPFL

# install play 2.1.0
> brew versions play
2.1.0    git checkout 6a70797 Library/Formula/play.rb
...

> brew install play
> play -version
play! 2.1.0 (using Java 1.6.0_43 and Scala 2.10.0), http://www.playframework.org 
```

我创建了一个播放应用程序：

```
> cd ~/
> play new myapp
name: myapp
Create a simple Scala application

# generate IntelliJ project:
> cd myapp
> play
> idea
[info] Created /Users/david/myapp/.idea_modules/myapp.iml
[info] Created /Users/david/myapp/.idea_modules/myapp-build.iml 
```

并在 IntelliJ 中打开项目：

```
# Install IntelliJ 12 Ultimate Edition
Download it from http://www.jetbrains.com/idea/
12.0.4, Build #IU-123.169
Build on February 13, 2013

# install scala plugin in IntelliJ
run IntelliJ,
Preferences -> plugins -> Browse from repositories -> add scala.
current version: 0.7.134

# open myapp project in IntelliJ
File -> Open Project, chose the directory /Users/david/myapp 
```

然后当我尝试运行单元测试时：

```
Project -> myapp -> test -> ApplicationSpec -> (right click) -> Run 
```

我收到此错误：

```
scala: Сompiler library for module bigbrother not found: Right(Project) / Right(scala-2.10.0) 
```

其实有几个错误：

```
in File -> Project Structure -> Modules, there are two modules:
-myapp
-mypp-build

File -> Project Structure -> Modules -> myapp -> Scala
   Compiler library: scala-2.10.0 [not found]
   <<< ERROR

File -> Project Structure -> Modules -> myapp-build -> Dependencies:
   scala-2.9.2
   <<< ERROR 
```

如果我按如下方式更正第一个错误，

```
File -> Project Structure -> Modules -> myapp -> Scala -> Compiler library
and from the dropdown list I select the second valid option “scala-2.10.0 (version 2.10.0)”. 
```

然后，重新运行测试，会产生错误：

```
scala: Output path /Users/david/bigbrother/project/target/scala_2.9.2 is shared between: Module 'bigbrother-build' production, Module 'bigbrother-build' tests
Currently external Scala compiler prohibits output path sharing.
Either disable the external build mode or configure separate output paths.
TIP: you can use Project Artifacts to combine compiled classes. 
```

我需要做什么才能使其工作？

* * *

**更新：基于 Marius 和 alexwriteshere 答案的解决方案**

生成 IntelliJ 项目

```
> cd myapp
> play
> idea no-sbt-build-module 
```

（而不仅仅是“想法”）

然后，Project Settings -> Libraries 选择“Scala 2.9.2”并单击“-”将其删除。

然后，项目设置 -> 模块 -> my_app -> Scala -> Scala-compiler 在这个下拉列表中，选择了红色的“Scala 2.10.0”。移至列表顶部，然后选择以黑色/灰色书写的“Scala 2.10.0（版本 2.10.0）”。

* * *

**笔记**

有时（我不知道为什么）以黑色/灰色编写的“Scala 2.10.0（版本 2.10.0）”选项在下拉列表中不可用。一个对我有用的解决方法如下：项目设置->全局库->+->Java从这个目录中选择这些文件scala-compiler.jar、scala-library.jar和scala-reflect.jar： /usr/local/Cellar/scala/2.10.0/libexec/lib/ 选择确定。将其命名为“我的 scala 2.10.0 捆绑包”。

然后，再次转到项目设置 -> 模块 -> my_app -> Scala -> Scala-compiler 现在你已经拥有了两个，一个你刚刚创建的“我的 scala 2.10.0 包”，一个标准的：“Scala 2.10.0 （版本 2.10.0）”用黑色/灰色书写。选择标准的，然后删除您创建的全局库。

我不知道为什么会发生这种情况，我真的不想花更多时间来找出这个问题。目前，这种解决方法对我有用。但如果您发现，请随时添加评论。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-01T20:40:27.030

这个问题可以通过生成idea项目来解决：

```
$ play  # start play from command line
[your-play-project] $ idea no-sbt-build-module 
```

这将启用 IntelliJ 对 Scala 的默认构建机制，不会导致这些问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-01T20:36:55.467

这是过去帮助我解决相同错误的原因：

1.  删除任何 Scala 2.9.2 依赖项
2.  去`Project Structure -> Global libraries`。创建一个新的，称为，比如说，`scala-bundle`。为 2.10 添加 scala-compiler.jar、scala-library.jar、scala-reflect.jar。
3.  最后，转到`Project Structure -> Modules -> myapp -> Scala`并选择`scala-bundle`。

对于模块共享错误，请转到`Project Structure -> Modules -> <each module> -> Paths`并更改路径，使它们不一样。

# php - CASE BETWEEN 声明

> ID：15751148
> 
> 赞同：0
> 
> 时间：2013-04-01T20:21:01.217
> 
> 标签：php, mariadb

我的数据库中有一个简单的日志表。对于每个页面访问，插入一行。现在我想总结一下今天和昨天的某个专栏。

我尝试了以下查询：

```
SELECT Sum(CASE 
             WHEN `time` > 1364767200 THEN `sqlquerycount` 
           end) AS `today`, 
       Sum(CASE 
             WHEN `time` BETWEEN 1364684400 AND 1364767200 THEN `sqlquerycount` 
           end) AS `yesterday` 
FROM   `log` 
```

以下 PHP 脚本的结果：

```
$sql = "SELECT 
        SUM(CASE WHEN `time` > ".strtotime("today")." THEN `sqlQueryCount` END) AS `today`,
        SUM(CASE WHEN `time` BETWEEN ".strtotime("yesterday")." AND ".strtotime("today")." THEN `sqlQueryCount` END) AS `yesterday`
    FROM `log`"; 
```

“昨天”仍为 NULL，但我认为此查询没有任何问题。任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:30:05.443

我敢打赌

```
$sql = "SELECT 
        SUM(CASE WHEN `time` > ".strtotime("today")." THEN `sqlQueryCount` ELSE 0 END) AS `today`,
        SUM(CASE WHEN `time` BETWEEN ".strtotime("yesterday")." AND ".strtotime("today")." THEN `sqlQueryCount` ELSE 0 END) AS `yesterday`
    FROM `log`"; 
```

...提供`sqlQueryCount`的是您要进行总和的列！

# c# - C# Telnet 服务器客户端

> ID：15751149
> 
> 赞同：0
> 
> 时间：2013-04-01T20:21:06.493
> 
> 标签：c#, telnet

我正在用 c# 编写一个 telnet 客户端和服务器。问题是当我在客户端输入命令时。我的服务器报错：“*系统找不到指定的文件*”

我的服务器在控制台应用程序中，我的客户端在 winform 中。非常感谢。

以下是代码： **服务器**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Net.Sockets;
using System.Diagnostics;

namespace TelnetServerVictim
{
    class Program
    {
        static void Main(string[] args)
        {
            IPAddress HOST = IPAddress.Parse("127.0.0.1");
            IPEndPoint serverEP = new IPEndPoint(HOST, 443);
            Socket sck = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
            sck.Bind(serverEP);
            sck.Listen(443);

            try
            {
                Console.WriteLine("Listening for clients...");
                Socket msg = sck.Accept();

                while (true)
                {
                    // Send a welcome greet
                    byte[] buffer = Encoding.Default.GetBytes("Welcome to the server of Kobernicus!!");
                    msg.Send(buffer, 0, buffer.Length, 0);
                    buffer = new byte[255];

                    // Read the sended command
                    int rec = msg.Receive(buffer, 0, buffer.Length, 0);
                    byte[] bufferReaction = Encoding.Default.GetBytes(rec.ToString());

                    // Run the command
                    Process prcsCMD = new Process();
                    prcsCMD.StartInfo.FileName = bufferReaction.ToString();
                    prcsCMD.StartInfo.UseShellExecute = false;
                    prcsCMD.StartInfo.Arguments = string.Empty;
                    prcsCMD.StartInfo.RedirectStandardOutput = true;
                    prcsCMD.Start();

                    string output = prcsCMD.StandardOutput.ReadToEnd();
                    byte[] cmdOutput = Encoding.Default.GetBytes(output);
                    msg.Send(cmdOutput,0,cmdOutput.Length,0);
                    cmdOutput = new byte[255];
                }
                sck.Close();
                msg.Close();
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
        }
    }
} 
```

客户：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.Net.Sockets;

namespace TelnetClientME
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
        Socket sck;
        private void btnConnect_Click(object sender, EventArgs e)
        {
            sck = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
            IPEndPoint endPoint = new IPEndPoint(IPAddress.Parse("127.0.0.1"), 443);
            try
            {
                sck.Connect(endPoint);
                MessageBox.Show("You are connected to the server!");
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        }

        private void btnSendMSG_Click(object sender, EventArgs e)
        {
            byte[] buffer = Encoding.Default.GetBytes(txtCMD.Text);
            sck.Send(buffer, 0, buffer.Length, 0);
            buffer = new byte[255];
            int rec = sck.Receive(buffer, 0, buffer.Length, 0);

            txtOutputCMD.Text = rec.ToString();
        }

        private void btnClear_Click(object sender, EventArgs e)
        {
            txtOutputCMD.Clear();
        }

        private void btnExit_Click(object sender, EventArgs e)
        {
            sck.Close();
            Application.Exit();
        }
    }
} 
```

非常感谢。txtOutputCMD = 命令输出所在的 RichTextBox。txtCMD = 一个文本框，您可以在其中输入命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:26:35.260

> byte[] bufferReaction = Encoding.Default.GetBytes(rec.ToString());

只是将读取的字节数转换为字符串，然后转换为字节数组

您不需要它（这是错误的），因为从客户端发送的字节已经在`buffer`.

您可能想使用

```
var fileName = Encoding.Default.GetString(buffer,0,rec); 
```

PS：不要忘记 TCP 是面向流的协议，从客户端发送 100 个字节并不意味着您将从服务器读取 100 个字节。例如，它可以以两个 50 字节的块的形式到达。

# ios - XCode 抱怨 viewDidLoad 和“Missing @end”（iAd）

> ID：15751150
> 
> 赞同：0
> 
> 时间：2013-04-01T20:21:30.930
> 
> 标签：ios, objective-c

所以你可以在这里看到，XCode 在抱怨，但我不知道为什么，所以......我的代码有什么问题？我已经导入了 iAd 框架。XCode 抱怨 -(void)viewDidLoad 并说：“缺少@end”

那么我的代码有什么问题？

.h

```
@interface ViewController : UIViewController{

    ADBannerView *banner;
    UILabel *label;

}

@property (nonatomic, assign)BOOL bannerIsVisible;

@property (nonatomic, retain)IBOutlet ADBannerView *banner;

@end 
```

他们

```
@implementation ViewController
@synthesize banner, bannerIsVisible;

-(void)bannerViewDidLoadAd:(ADBannerView *)abannar {
    if(!self.bannerIsVisible) {

        [UIView beginAnimations:@"animatedAdBannerOn" context:NULL];
        banner.frame = CGRectOffset(banner.frame, 0.0, 50.0);
        [UIView commitAnimations];
        self.bannerIsVisible = YES;

    }
}

-(void)bannerView: (ADBannerView *)aBanner didFailToReceiveAdWithError:(NSError *)error {

    if(!self.bannerIsVisible) {

        [UIView beginAnimations:@"animatedAdBannerOff" context:NULL];
        banner.frame = CGRectOffset(banner.frame, 0.0, -320.0);
        [UIView commitAnimations];
        self.bannerIsVisible = NO;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:31:24.640

看起来您的 .m 文件的底部已被切掉。您需要关闭`}`bannerView 方法并`@end`在文件末尾关闭该`@implementation`部分。

看起来您也缺少`#import`.m 文件顶部的 .h 文件，您可以在其中导入 .h 文件。

# javascript - Google Apps 脚本中的 JSON

> ID：15751153
> 
> 赞同：1
> 
> 时间：2013-04-01T20:21:34.410
> 
> 标签：javascript, google-apps-script, podio

我正在尝试使用谷歌应用程序脚本使用Podio ( [https://developers.podio.com/doc/hooks/validate-hook-verificated-215241 ) 验证 webhook。](https://developers.podio.com/doc/hooks/validate-hook-verificated-215241)

目前我有以下脚本成功地将数据写入文档（激活 Podio Post 后）：

```
function doPost(l) {
  var doc = DocumentApp.openById('1to3-JzhE27-LK0Zw7hEsdYgiSd7xQq7jjp13m6YwRh0');
  var jstring = Utilities.jsonStringify(l);
  doc.appendParagraph(jstring);
} 
```

数据显示如下：

```
{"queryString":null,"parameter":{"hook_id":"38035","code":"a92e06a2","type":"hook.verify"},"contextPath":"","parameters":{"hook_id":["38035"],"code":["a92e06a2"],"type":["hook.verify"]},"contentLength":44} 
```

出于某种原因，谷歌应用程序脚本不允许我获取这些数据并访问如下属性：

```
jstring.parameter.code; 
```

如果我将（看似）JSON 字符串复制到新变量下的单独脚本中，我就可以访问 JSON 中的数据。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:27:12.047

看起来您有一个转换为 JSON 字符串的 JavaScript 对象，`jstring`. 它只是一个字符串。如果要访问字符串中表示的属性，请使用原始对象`l`. IE，`l.parameter.code`

```
function doPost(l) {
  var doc = DocumentApp.openById('1to3-JzhE27-LK0Zw7hEsdYgiSd7xQq7jjp13m6YwRh0');
  var jstring = Utilities.jsonStringify(l);
  doc.appendParagraph(jstring);
  dosomething(l.parameter.code);
} 
```

# html - 在 chrome 中重新加载页面会弄乱渐变

> ID：15751160
> 
> 赞同：0
> 
> 时间：2013-04-01T20:21:50.387
> 
> 标签：html, google-chrome, css, gradient

我有一个页面，其中标题是渐变的，第一次加载时一切看起来都很好。当我刷新页面时，渐变变得混乱，看起来它在下面放入了 2 个渐变（1 个非常小）示例：

![在此处输入图像描述](https://i.stack.imgur.com/erCca.png)

第一个是重新加载后，第二个是第一次点击页面。

我不想要的顶部的小渐变与该 div 中的填充高度相同。

我还注意到 imgs 在像这样的重新加载时也会调​​整大小，我已经通过在 css 中设置高度来解决这个问题。我无法在 CSS 中设置高度，因为高度应该是动态的。

谁能向我解释为什么会发生这种情况以及解决它的方法？我真的更喜欢非 javascript 解决方案，因为我已经知道如何使用 jquery 来解决。

一些代码：

HTML：

```
<header>
      <a id="settings-gear" href="#"><img src="/img/gear.png"> &nbsp;</a>
      <div id="logo">
        <img src="logo" alt="logo">
    </div>
</header> 
```

CSS：

```
header {
    background: -webkit-linear-gradient(top, #F0F7F7 0%,#B8D9DD 100%);
    max-height: 122px;
    padding: 12px;
    position: relative;
    display: block;
}

header #logo img {
    display: block;
    margin: 0 auto;
}

header #settings-gear img {
    height: 33px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:17:48.027

Well, it's difficult if we can't see a link or example, but the first think that comes to my mind is set the background as image and tell it to fit only the content with `background-origin:content-box;`. Try put that line into the header properties, and hope it helps. Note that the `background-origin` property don't work in IE 5, 6, 7 or 8...

# android - SherlockActionBar 不适用于 Android 2.3.6（强制关闭）

> ID：15751165
> 
> 赞同：0
> 
> 时间：2013-04-01T20:22:07.840
> 
> 标签：android, android-actionbar, actionbarsherlock

但是，在 Android 4.0.3 上它运行良好。Sherlock 不应该也给`ActionBar`2.xx 版本吗？

我将 : 添加`android:theme="@style/Sherlock.__Theme.Light"`到清单文件中。

我没有在应用程序上运行任何东西，只有这个：

```
public class MainActivity extends SherlockActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

} 
```

我也试过`extends SherlockFragmentActivity` 它也强制关闭`2.3.6`。然而，`4.0.3`它奏效了。哪位高手能告诉我问题出在哪里？

编辑：

```
04-01 23:24:29.210: E/AndroidRuntime(18249): FATAL EXCEPTION: main
04-01 23:24:29.210: E/AndroidRuntime(18249): java.lang.RuntimeException: Unable to start activity ComponentInfo{edu.lau.autointernetconnector/edu.lau.autointernetconnector.MainActivity}: java.lang.IllegalStateException: You must use Theme.Sherlock, Theme.Sherlock.Light, Theme.Sherlock.Light.DarkActionBar, or a derivative.
04-01 23:24:29.210: E/AndroidRuntime(18249):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
04-01 23:24:29.210: E/AndroidRuntime(18249):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
04-01 23:24:29.210: E/AndroidRuntime(18249):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-01 23:24:29.210: E/AndroidRuntime(18249):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
04-01 23:24:29.210: E/AndroidRuntime(18249):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-01 23:24:29.210: E/AndroidRuntime(18249):    at android.os.Looper.loop(Looper.java:130)
04-01 23:24:29.210: E/AndroidRuntime(18249):    at android.app.ActivityThread.main(ActivityThread.java:3691)
04-01 23:24:29.210: E/AndroidRuntime(18249):    at java.lang.reflect.Method.invokeNative(Native Method)
04-01 23:24:29.210: E/AndroidRuntime(18249):    at java.lang.reflect.Method.invoke(Method.java:507)
04-01 23:24:29.210: E/AndroidRuntime(18249):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
04-01 23:24:29.210: E/AndroidRuntime(18249):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
04-01 23:24:29.210: E/AndroidRuntime(18249):    at dalvik.system.NativeStart.main(Native Method)
04-01 23:24:29.210: E/AndroidRuntime(18249): Caused by: java.lang.IllegalStateException: You must use Theme.Sherlock, Theme.Sherlock.Light, Theme.Sherlock.Light.DarkActionBar, or a derivative.
04-01 23:24:29.210: E/AndroidRuntime(18249):    at com.actionbarsherlock.internal.ActionBarSherlockCompat.generateLayout(ActionBarSherlockCompat.java:1003)
04-01 23:24:29.210: E/AndroidRuntime(18249):    at com.actionbarsherlock.internal.ActionBarSherlockCompat.installDecor(ActionBarSherlockCompat.java:915)
04-01 23:24:29.210: E/AndroidRuntime(18249):    at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(ActionBarSherlockCompat.java:849)
04-01 23:24:29.210: E/AndroidRuntime(18249):    at com.actionbarsherlock.app.SherlockActivity.setContentView(SherlockActivity.java:229)
04-01 23:24:29.210: E/AndroidRuntime(18249):    at edu.lau.autointernetconnector.MainActivity.onCreate(MainActivity.java:12)
04-01 23:24:29.210: E/AndroidRuntime(18249):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-01 23:24:29.210: E/AndroidRuntime(18249):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
04-01 23:24:29.210: E/AndroidRuntime(18249):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:59:16.150

Although you answered your question yourself (based of the comment ChristopheCVB gave) I'd still like to add something.

> However, on Android 4.0.3 it is working fine. Isn't Sherlock supposed to give ActionBar for 2.xx versions too ?

ActionBarSherlock only provides the ActionBar for versions below Honeycomb. The ActionBar you see on HC+ are all native implementations.

`@style/Sherlock.__Theme.Light` will not fail on HC+ because they already have all necessary styles set.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:29:38.487

我解决了我的问题......我不敢相信我无法解决它，直到我在这里发布它。

我把它放在清单中：`android:theme="@style/Theme.Sherlock.Light"`而不是`android:theme="@style/Sherlock.__Theme.Light"`它的工作:)

# sitecore - 如何设置 Sitecore Executive Dashboard？

> ID：15751166
> 
> 赞同：2
> 
> 时间：2013-04-01T20:22:11.057
> 
> 标签：sitecore, sitecore6, sitecore-dms

当我打开执行仪表板时，我收到错误“未找到流量概览数据”。如何将流量概览数据连接到 Executive Dashboard？

对于背景信息，我正在运行 Sitecore 6.5.0（修订版 120706），并且我安装并配置了 Sitecore DMS。我能够访问和查看参与分析中的报告，我能够使用营销中心来创建和跟踪配置文件密钥以及个性化内容。此外，我参考了 Engagement Analytics Configuration Reference Guide 和 Executive Dashboard Cookbook，但均无济于事。任何有执行仪表板经验的人都知道我是否在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T11:02:48.863

如果报表上的数据有 50 个访问者，则执行仪表板仅显示数据。

您可以在

**sitecore/shell/Applications/Reports/Dashboard/Configuration.xml**

将“MinimumVisitsFilter”的值更改为 1，以查看报告的所有跟踪数据

# mysql - mysql对每个用户的高效选择查询（是否使用join）

> ID：15751168
> 
> 赞同：1
> 
> 时间：2013-04-01T20:22:12.233
> 
> 标签：mysql

我有以下作业选择查询（实际查询很大，有很多连接）主查询：

```
SELECT id FROM job LIMIT 20 
```

当用户登录时，我想选择用户是否保存了作业。（许多用户，但一个主要结果）

我的问题是更有效的方法？（考虑查询缓存、缓冲池等）
方法1：

```
SELECT id, Member 
FROM job AS t1 LEFT JOIN Member AS t2 ON (t1.id=t2.Job) LIMIT 20 
```

（即，如果用户没有保存作业，它将为 Select Member 返回“Null”）

方法2：
对主结果使用Main查询，然后为每个结果选择（即循环sql查询）

```
 SELECT Member FROM Member WHERE Member=1 AND Job=(each job id) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:28:25.307

左连接的方法几乎可以保证效率更高。

虽然底层逻辑基本相同（即：您将同一列与相同的值进行比较）并且 LEFT JOIN 查询的解析成本更高，但使用 LEFT JOIN 时，您只需要进行 1 轮 -在使用循环查询时访问服务器，您正在执行多次往返以获得相同的结果。

一般来说，很难对此类问题给出一般性的答案，因为这在很大程度上取决于您的特定设置和数据，但在这种情况下，您应该会看到单个 LEFT JOIN 查询明显更快。

我过去对此类查询进行了基准测试，LEFT JOIN 方法总是更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:25:11.657

一般来说，捆绑到单个查询中以减少到数据库的往返、查询解析成本等效率更高。但是，如果捆绑到单个查询中意味着返回一堆您不需要的数据，那么它可能并不比单个查询更有效。

# javascript - IE中dojo上传器的多个附件

> ID：15751169
> 
> 赞同：0
> 
> 时间：2013-04-01T20:22:14.997
> 
> 标签：javascript, forms, internet-explorer, dojo

我正在构建一个表单，用户可以在其中选择使用 Dojo 1.8 上传多个文件。我有以下代码片段，当放置在表单中时，允许为 Chrome 和 Firefox 上传多个文件：

```
var u = new dojox.form.Uploader({
    label: "Browse",
    multiple: true, 
    uploadOnSelect: false, 
    url: 'upload'
}); 
```

但是，有据可查的是 IE9 不支持 dojox.form.Uploader 的这个特性。是否有允许 Internet Explorer 用户上传多个文件的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:33:32.580

IE9 及更早版本不支持`multiple`文件输入元素的属性。因此，如果不借助 Flash 或 Java，就无法一次选择多个文件。

# wpf - 如何显示扩展器内容的 itemsCount

> ID：15751170
> 
> 赞同：1
> 
> 时间：2013-04-01T20:22:17.140
> 
> 标签：wpf, data-binding, datatemplate, expander

我在这方面花了太多时间，所以如果有人能帮助我指出正确的方向，我将不胜感激。

我有一个带有 ListBox 的扩展器。我已将 ListBox 绑定到一个列表，即 FilteredProjects。我希望扩展器的标题反映显示列表中的项目数。我确实为 ProjectsCount 实现了 INotifyPropertyChanged，并且 ListBox 的 ItemsSource 更新得很好。在此先感谢您的时间。

```
 <Expander>
            <Expander.HeaderTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Projects" />
                        <Border CornerRadius="4" Padding="0" BorderThickness="1" BorderBrush="Black" Background="#FF545F42" Margin="1,0,0,0" >
                            <Label Content="{Binding Path=ProjectsCount, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource filter}}" Padding="0" FontSize="8" FontStyle="Italic"></Label>
                        </Border>
                    </StackPanel>
                </DataTemplate>
            </Expander.HeaderTemplate>
            <ListBox x:Name="ProjectsFilterListView" Opacity="1" ItemsSource="{Binding FilteredProjects}"  >
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <CheckBox IsChecked="{Binding IsSelected}"  Content="{Binding ItemName}" Margin="10,10,0,10"></CheckBox>
                    </DataTemplate>
                    </ListBox.ItemTemplate>
            </ListBox>
        </Expander> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:45:47.213

你可以`Item` `Count`直接从`ListBox`

```
<Label Content="{Binding Path=Items.Count, ElementName=ProjectsFilterListView}" /> 
```

这是它工作的一个例子，我替换了标签，`TextBlock`所以我可以`StringFormat`在数字前添加“项目：”文本，因为我不确定你`Converter`在做什么

```
<StackPanel Orientation="Horizontal">
    <TextBlock Text="Projects" />
    <Border CornerRadius="4" Padding="0" BorderThickness="1" BorderBrush="Black" Background="Red" Margin="1,0,0,0" >
        <TextBlock Text="{Binding Path=Items.Count, ElementName=ProjectsFilterListView, StringFormat={} Items: {0}}" Padding="0" FontSize="10" FontStyle="Italic" Foreground="Black"/>
    </Border>
</StackPanel> 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/wtl7e.png)

# r - 用于预测分析的 R tm 包。如何对新文档进行分类？

> ID：15751171
> 
> 赞同：16
> 
> 时间：2013-04-01T20:22:19.357
> 
> 标签：r, tm

这是关于文本挖掘程序的一般问题。假设一个人有一个分类为 Spam/No_Spam 的文档语料库。作为标准程序，预处理数据、删除标点符号、停止词等。将其转换为 DocumentTermMatrix 后，可以构建一些模型来预测垃圾邮件/No_Spam。这是我的问题。现在我想使用为新文档构建的模型到达。为了检查单个文档，我必须构建一个 DocumentTerm* *Vector**? 所以它可以用来预测 Spam/No_Spam。在 tm 的文档中，我发现使用例如 tfidf 权重将完整的语料库转换为矩阵。然后如何使用语料库中的 idf 转换单个向量？我每次都必须更改我的语料库并构建一个新的 DocumentTermMatrix 吗？我处理了我的语料库，将其转换为矩阵，然后将其拆分为训练和测试集。但是这里的测试集与完整集的文档矩阵在同一行中构建。我可以检查精度等，但不知道新文本分类的最佳程序是什么。

Ben，想象一下我有一个预处理的 DocumentTextMatrix，我将它转换成一个 data.frame。

```
dtm <- DocumentTermMatrix(CorpusProc,control = list(weighting =function(x) weightTfIdf(x, normalize =FALSE),stopwords = TRUE, wordLengths=c(3, Inf), bounds = list(global = c(4,Inf))))

dtmDataFrame <- as.data.frame(inspect(dtm)) 
```

添加了一个因子变量并建立了一个模型。

```
Corpus.svm<-svm(Risk_Category~.,data=dtmDataFrame) 
```

现在想象我给你一个新文档 d（之前不在你的语料库中），你想知道模型预测 spam/No_Spam。你如何做到这一点？

好的，让我们根据此处使用的代码创建一个示例。

```
examp1 <- "When discussing performance with colleagues, teaching, sending a bug report or searching for guidance on mailing lists and here on SO, a reproducible example is often asked and always helpful. What are your tips for creating an excellent example? How do you paste data structures from r in a text format? What other information should you include? Are there other tricks in addition to using dput(), dump() or structure()? When should you include library() or require() statements? Which reserved words should one avoid, in addition to c, df, data, etc? How does one make a great r reproducible example?"
examp2 <- "Sometimes the problem really isn't reproducible with a smaller piece of data, no matter how hard you try, and doesn't happen with synthetic data (although it's useful to show how you produced synthetic data sets that did not reproduce the problem, because it rules out some hypotheses). Posting the data to the web somewhere and providing a URL may be necessary. If the data can't be released to the public at large but could be shared at all, then you may be able to offer to e-mail it to interested parties (although this will cut down the number of people who will bother to work on it). I haven't actually seen this done, because people who can't release their data are sensitive about releasing it any form, but it would seem plausible that in some cases one could still post data if it were sufficiently anonymized/scrambled/corrupted slightly in some way. If you can't do either of these then you probably need to hire a consultant to solve your problem" 
examp3 <- "You are most likely to get good help with your R problem if you provide a reproducible example. A reproducible example allows someone else to recreate your problem by just copying and pasting R code. There are four things you need to include to make your example reproducible: required packages, data, code, and a description of your R environment. Packages should be loaded at the top of the script, so it's easy to see which ones the example needs. The easiest way to include data in an email is to use dput() to generate the R code to recreate it. For example, to recreate the mtcars dataset in R, I'd perform the following steps: Run dput(mtcars) in R Copy the output In my reproducible script, type mtcars <- then paste. Spend a little bit of time ensuring that your code is easy for others to read: make sure you've used spaces and your variable names are concise, but informative, use comments to indicate where your problem lies, do your best to remove everything that is not related to the problem. The shorter your code is, the easier it is to understand. Include the output of sessionInfo() as a comment. This summarises your R environment and makes it easy to check if you're using an out-of-date package. You can check you have actually made a reproducible example by starting up a fresh R session and pasting your script in. Before putting all of your code in an email, consider putting it on http://gist.github.com/. It will give your code nice syntax highlighting, and you don't have to worry about anything getting mangled by the email system."
examp4 <- "Do your homework before posting: If it is clear that you have done basic background research, you are far more likely to get an informative response. See also Further Resources further down this page. Do help.search(keyword) and apropos(keyword) with different keywords (type this at the R prompt). Do RSiteSearch(keyword) with different keywords (at the R prompt) to search R functions, contributed packages and R-Help postings. See ?RSiteSearch for further options and to restrict searches. Read the online help for relevant functions (type ?functionname, e.g., ?prod, at the R prompt) If something seems to have changed in R, look in the latest NEWS file on CRAN for information about it. Search the R-faq and the R-windows-faq if it might be relevant (http://cran.r-project.org/faqs.html) Read at least the relevant section in An Introduction to R If the function is from a package accompanying a book, e.g., the MASS package, consult the book before posting. The R Wiki has a section on finding functions and documentation"
examp5 <- "Before asking a technical question by e-mail, or in a newsgroup, or on a website chat board, do the following:  Try to find an answer by searching the archives of the forum you plan to post to. Try to find an answer by searching the Web. Try to find an answer by reading the manual. Try to find an answer by reading a FAQ. Try to find an answer by inspection or experimentation. Try to find an answer by asking a skilled friend. If you're a programmer, try to find an answer by reading the source code. When you ask your question, display the fact that you have done these things first; this will help establish that you're not being a lazy sponge and wasting people's time. Better yet, display what you have learned from doing these things. We like answering questions for people who have demonstrated they can learn from the answers. Use tactics like doing a Google search on the text of whatever error message you get (searching Google groups as well as Web pages). This might well take you straight to fix documentation or a mailing list thread answering your question. Even if it doesn't, saying “I googled on the following phrase but didn't get anything that looked promising” is a good thing to do in e-mail or news postings requesting help, if only because it records what searches won't help. It will also help to direct other people with similar problems to your thread by linking the search terms to what will hopefully be your problem and resolution thread. Take your time. Do not expect to be able to solve a complicated problem with a few seconds of Googling. Read and understand the FAQs, sit back, relax and give the problem some thought before approaching experts. Trust us, they will be able to tell from your questions how much reading and thinking you did, and will be more willing to help if you come prepared. Don't instantly fire your whole arsenal of questions just because your first search turned up no answers (or too many). Prepare your question. Think it through. Hasty-sounding questions get hasty answers, or none at all. The more you do to demonstrate that having put thought and effort into solving your problem before seeking help, the more likely you are to actually get help. Beware of asking the wrong question. If you ask one that is based on faulty assumptions, J. Random Hacker is quite likely to reply with a uselessly literal answer while thinking Stupid question..., and hoping the experience of getting what you asked for rather than what you needed will teach you a lesson."

corpus2 <- Corpus(VectorSource(c(examp1, examp2, examp3, examp4))) 
```

注意我拿出了例子5

```
skipWords <- function(x) removeWords(x, stopwords("english"))
funcs <- list(tolower, removePunctuation, removeNumbers, stripWhitespace, skipWords)
corpus2.proc <- tm_map(corpus2, FUN = tm_reduce, tmFuns = funcs)

corpus2a.dtm <- DocumentTermMatrix(corpus2.proc, control = list(wordLengths = c(3,10)))
dtmDataFrame <- as.data.frame(inspect(corpus2a.dtm)) 
```

添加了因子变量 Spam_Classification 2 级 spam/No_Spam

```
dtmFinal<-cbind(dtmDataFrame,Spam_Classification) 
```

我建立了一个模型 SVM Corpus.svm<-svm(Spam_Category~.,data=dtmFinal)

现在想象我有示例 5 作为新文档（电子邮件）我如何生成 Spam/No_Spam 值？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-05T11:05:17.717

感谢这个有趣的问题。我已经考虑了一段时间。太简短了，我的发现的精髓：对于除 tf 之外的加权方法，没有办法绕过繁重的工作或重新计算整个 DTM（并且可能重新运行你的 svm）。

只有对于 tf-weighting，我才能找到对新内容进行分类的简单过程。您必须（肯定）将新文档转换为 DTM。在转换过程中，您必须添加一个`dictionary`包含用于在旧语料库上训练分类器的所有术语。然后你可以`predict()`像往常一样使用。对于 tf 部分，这里有一个非常小的样本和一种对新文档进行分类的方法：

```
### I) Data

texts <- c("foo bar spam",
           "bar baz ham",
           "baz qux spam",
           "qux quux ham")

categories <- c("Spam", "Ham", "Spam", "Ham")

new <- "quux quuux ham"

### II) Building Model on Existing Documents „texts“

library(tm)  # text mining package for R
library(e1071)  # package with various machine-learning libraries

## creating DTM for texts
dtm <- DocumentTermMatrix(Corpus(VectorSource(texts)))

## making DTM a data.frame and adding variable categories
df <- data.frame(categories, as.data.frame(inspect(dtm)))

model <- svm(categories~., data=df)

### III) Predicting class of new

## creating dtm for new
dtm_n <- DocumentTermMatrix(Corpus(VectorSource(new)),
                            ## without this line predict won't work
                            control=list(dictionary=names(df)))
## creating data.frame for new
df_n <- as.data.frame(inspect(dtm_n))

predict(model, df_n)

## > 1 
## > Ham 
## > Levels: Ham Spam 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-31T00:15:55.407

我有同样的问题，我认为[RTextTools](http://cran.r-project.org/web/packages/RTextTools/RTextTools.pdf)包可以帮助你。

看看create_matrix：

```
...
originalMatrix - 用于训练模型的原始 DocumentTermMatrix。如果提供，将
调整新矩阵以使用保存的模型。
...
```

所以在代码中：

```
train.data <- loadDataTable() # load data from DB - 3 columns (info, subject, category)
train.matrix <- create_matrix(train.data[, c(subject, info)]), language="english", removeNumbers=TRUE, stemWords=FALSE, weighting=weightTfIdf)
train.container <- create_container(train.matrix,train.data$category,trainSize=1:nrow(train.data), virgin=FALSE)
model <- train_model(train.container, algorithm=c("SVM"))
# save model & matrix

predict.text <- function(info, subject, train.matrix, model)
{
     predict.matrix <- create_matrix(cbind(subject = subject, info = info), originalMatrix = train.matrix, language="english", removeNumbers=TRUE, stemWords=FALSE, weighting=weightTfIdf)
     predict.container <- create_container(predict.matrix, NULL, testSize = 1, virgin = FALSE) # testSize = 1 - we have only one row!
     return(classify_model(predict.container, model))
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T23:30:26.983

目前尚不清楚您的问题是什么或您正在寻找什么样的答案。

假设您要问“我怎样才能让 'DocumentTermVector' 传递给其他函数？”，这是一种方法。

一些可重现的数据：

```
examp1 <- "When discussing performance with colleagues, teaching, sending a bug report or searching for guidance on mailing lists and here on SO, a reproducible example is often asked and always helpful. What are your tips for creating an excellent example? How do you paste data structures from r in a text format? What other information should you include? Are there other tricks in addition to using dput(), dump() or structure()? When should you include library() or require() statements? Which reserved words should one avoid, in addition to c, df, data, etc? How does one make a great r reproducible example?"
examp2 <- "Sometimes the problem really isn't reproducible with a smaller piece of data, no matter how hard you try, and doesn't happen with synthetic data (although it's useful to show how you produced synthetic data sets that did not reproduce the problem, because it rules out some hypotheses). Posting the data to the web somewhere and providing a URL may be necessary. If the data can't be released to the public at large but could be shared at all, then you may be able to offer to e-mail it to interested parties (although this will cut down the number of people who will bother to work on it). I haven't actually seen this done, because people who can't release their data are sensitive about releasing it any form, but it would seem plausible that in some cases one could still post data if it were sufficiently anonymized/scrambled/corrupted slightly in some way. If you can't do either of these then you probably need to hire a consultant to solve your problem" 
examp3 <- "You are most likely to get good help with your R problem if you provide a reproducible example. A reproducible example allows someone else to recreate your problem by just copying and pasting R code. There are four things you need to include to make your example reproducible: required packages, data, code, and a description of your R environment. Packages should be loaded at the top of the script, so it's easy to see which ones the example needs. The easiest way to include data in an email is to use dput() to generate the R code to recreate it. For example, to recreate the mtcars dataset in R, I'd perform the following steps: Run dput(mtcars) in R Copy the output In my reproducible script, type mtcars <- then paste. Spend a little bit of time ensuring that your code is easy for others to read: make sure you've used spaces and your variable names are concise, but informative, use comments to indicate where your problem lies, do your best to remove everything that is not related to the problem. The shorter your code is, the easier it is to understand. Include the output of sessionInfo() as a comment. This summarises your R environment and makes it easy to check if you're using an out-of-date package. You can check you have actually made a reproducible example by starting up a fresh R session and pasting your script in. Before putting all of your code in an email, consider putting it on http://gist.github.com/. It will give your code nice syntax highlighting, and you don't have to worry about anything getting mangled by the email system."
examp4 <- "Do your homework before posting: If it is clear that you have done basic background research, you are far more likely to get an informative response. See also Further Resources further down this page. Do help.search(keyword) and apropos(keyword) with different keywords (type this at the R prompt). Do RSiteSearch(keyword) with different keywords (at the R prompt) to search R functions, contributed packages and R-Help postings. See ?RSiteSearch for further options and to restrict searches. Read the online help for relevant functions (type ?functionname, e.g., ?prod, at the R prompt) If something seems to have changed in R, look in the latest NEWS file on CRAN for information about it. Search the R-faq and the R-windows-faq if it might be relevant (http://cran.r-project.org/faqs.html) Read at least the relevant section in An Introduction to R If the function is from a package accompanying a book, e.g., the MASS package, consult the book before posting. The R Wiki has a section on finding functions and documentation"
examp5 <- "Before asking a technical question by e-mail, or in a newsgroup, or on a website chat board, do the following:  Try to find an answer by searching the archives of the forum you plan to post to. Try to find an answer by searching the Web. Try to find an answer by reading the manual. Try to find an answer by reading a FAQ. Try to find an answer by inspection or experimentation. Try to find an answer by asking a skilled friend. If you're a programmer, try to find an answer by reading the source code. When you ask your question, display the fact that you have done these things first; this will help establish that you're not being a lazy sponge and wasting people's time. Better yet, display what you have learned from doing these things. We like answering questions for people who have demonstrated they can learn from the answers. Use tactics like doing a Google search on the text of whatever error message you get (searching Google groups as well as Web pages). This might well take you straight to fix documentation or a mailing list thread answering your question. Even if it doesn't, saying “I googled on the following phrase but didn't get anything that looked promising” is a good thing to do in e-mail or news postings requesting help, if only because it records what searches won't help. It will also help to direct other people with similar problems to your thread by linking the search terms to what will hopefully be your problem and resolution thread. Take your time. Do not expect to be able to solve a complicated problem with a few seconds of Googling. Read and understand the FAQs, sit back, relax and give the problem some thought before approaching experts. Trust us, they will be able to tell from your questions how much reading and thinking you did, and will be more willing to help if you come prepared. Don't instantly fire your whole arsenal of questions just because your first search turned up no answers (or too many). Prepare your question. Think it through. Hasty-sounding questions get hasty answers, or none at all. The more you do to demonstrate that having put thought and effort into solving your problem before seeking help, the more likely you are to actually get help. Beware of asking the wrong question. If you ask one that is based on faulty assumptions, J. Random Hacker is quite likely to reply with a uselessly literal answer while thinking Stupid question..., and hoping the experience of getting what you asked for rather than what you needed will teach you a lesson." 
```

从这些文本创建一个语料库：

```
corpus2 <- Corpus(VectorSource(c(examp1, examp2, examp3, examp4, examp5))) 
```

处理文本：

```
skipWords <- function(x) removeWords(x, stopwords("english"))
funcs <- list(tolower, removePunctuation, removeNumbers, stripWhitespace, skipWords)
corpus2.proc <- tm_map(corpus2, FUN = tm_reduce, tmFuns = funcs) 
```

将已处理的语料库转换为术语文档矩阵：

```
corpus2a.dtm <- DocumentTermMatrix(corpus2.proc, control = list(wordLengths = c(3,10)))
inspect(corpus2a.dtm)

A document-term matrix (5 documents, 273 terms)

Non-/sparse entries: 314/1051
Sparsity           : 77%
Maximal term length: 10 
Weighting          : term frequency (tf)

    Terms
Docs able actually addition allows answer answering answers archives are arsenal avoid background based
   1    0        0        2      0      0         0       0        0   1       0     1          0     0
   2    1        1        0      0      0         0       0        0   0       0     0          0     0
   3    0        1        0      1      0         0       0        0   0       0     0          0     0
   4    0        0        0      0      0         0       0        0   0       0     0          1     0
   5    2        1        0      0      8         2       3        1   0       1     0          0     1 
```

**这是获得您所指的“DocumentTerm*Vector*”的关键行：**

```
# access vector of first document in the dtm
as.matrix(corpus2a.dtm)[1,]

able   actually   addition     allows     answer  answering    answers   archives        are 
         0          0          2          0          0          0          0          0          1 
   arsenal      avoid background      based      basic     before     better     beware        bit 
         0          1          0          0          0          0          0          0          0 
     board       book     bother        bug    changed       chat      check 
```

实际上，它是一个命名数字，对于传递给其他函数等应该很有用，这似乎是您想要做的：

```
str(as.matrix(corpus2a.dtm)[1,])
 Named num [1:273] 0 0 2 0 0 0 0 0 1 0 ... 
```

如果您只想要一个数字向量，请尝试`as.numeric(as.matrix(corpus2a.dtm)[1,]))`

那是你想做的吗？

# c++ - C ++合并两个链表分段错误和核心转储错误

> ID：15751179
> 
> 赞同：1
> 
> 时间：2013-04-01T20:22:43.427
> 
> 标签：c++, linked-list, segmentation-fault, coredump

这是我将两个链表合并在一起的代码。当我运行它时，我得到一个分段错误和核心转储错误。我不知道如何解决它。我的大脑被炸了，请帮忙。

```
#include<iostream>
using namespace std;

struct node
{
  int data;
  struct node *next;
};

class list
{
    struct node *start;
public:
    void create();
    void show();
    void merge(list,list);
};

void list::create()
{
  struct node *nxt_node, *pre_node;
  int value, no, i;
  start=nxt_node=pre_node=NULL;
  cout<<"\nHow many nodes:";
  cin>>no;
  cout<<"Enter "<<no<<" Eelements:";
  for(i=1;i<=no;i++)
  {
    cin>>value;
    nxt_node=new node;
    nxt_node->data=value;
    nxt_node->next=NULL;

    if (start==NULL)
    start=nxt_node;
    else
    pre_node->next=nxt_node;
    pre_node=nxt_node;
  }

}

void list::show()
{
  struct node *ptr=start;

  while(ptr!=NULL)
  {
    cout<<ptr->data<<"->'";
    ptr=ptr->next;
  }
}

void list::merge(list l1,list l2)
{
  struct node *nxt_node, *pre_node, *pptr, *qptr;
  int dat;

  pptr=l1.start;
  qptr=l2.start;
  start=nxt_node=pre_node=NULL;
  while(pptr!=NULL && qptr!=NULL)
  {
   if(pptr->data<=qptr->data)
   {
        dat=pptr->data;
        pptr=pptr->next;
    }
    else
        {
    dat=qptr->data;
    qptr=qptr->next;
        }

    nxt_node=new node;
    nxt_node->data=dat;
    nxt_node->next=NULL;

    if(start==NULL)
    {   
     start=nxt_node;
    }   
    else
    {
     pre_node->next=nxt_node;
      pre_node=nxt_node;
    }
  }
  if(pptr==NULL)
  {
    while(qptr!=NULL)
    {
    nxt_node=new node;
    nxt_node->data=qptr->data;
    nxt_node->next=NULL;

    if(start==NULL)
       start=nxt_node;
    else
       pre_node->next=nxt_node;
       pre_node=nxt_node;
       qptr=qptr->next; 
    }
  }
  else if (qptr==NULL)
  {
    while(pptr!=NULL)
    {
        nxt_node=new node;
        nxt_node->data=pptr->data;
        nxt_node->next=NULL;
        if(start==NULL)
           start=nxt_node;
        else
           pre_node->next=nxt_node;
           pre_node=nxt_node;
           pptr=pptr->next;
    }
  }

}

int main()
{
    list l1,l2,l3;
    cout<<"Enter the first list in ascending order.";
    l1.create();
    cout<<"Enter the Second list in ascending order.";
    l2.create();
    cout<<"The first list is:"<<endl;
    l1.show();
    cout<<"The second list is"<<endl;
    l2.show();
    l3.merge(l1,l2);
    l3.show();

return (0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:30:58.417

在方法中`merge`

```
if(start==NULL)
{   
     start=nxt_node;
} 
```

应该改为

```
if(start==NULL)
{   
     start=nxt_node;
     pre_node=start;
} 
```

我想你可以弄清楚为什么。

# java - 如何强制应用程序保持打开状态？

> ID：15751180
> 
> 赞同：-2
> 
> 时间：2013-04-01T20:22:46.953
> 
> 标签：java, android, memory

我见过像 Lookout、JuiceDefender 和 MagicJack 这样的应用程序会无限期地在后台运行，除非用户直接通过任务管理器强制关闭。（即使那样，在 Gingerbread 中，它也不会关闭，除非您浏览到在设置中的“已下载应用程序”下运行的应用程序，并在您进入可以管理应用程序的选项菜单时强制关闭它，例如“清除内存”和“强制关闭”。

我想知道这是如何实现的？我需要为我的应用程序做类似的事情，但我不知道如何避免 Android 操作系统的自动任务终止。不要说这是不可能的，因为如果这是真的，JuiceDefender、MagicJack 和 Lookout 不会工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:26:40.633

您可以拥有的是无限期地保持活力的服务。您在 Service 的 onStartCommand 方法上实现了返回 Service.START_STICKY 。

每当操作系统需要资源并选择终止您的应用程序时，一旦资源再次可用，您的服务就会重新生成。

请记住，拥有持续运行的应用程序会导致手机电池消耗。您应该（至少）通知用户您的应用程序在后台仍处于活动状态。

最重要的是，您可以为 BOOT_COMPLETED 事件[注册一个广播接收器](https://stackoverflow.com/questions/5290141/android-broadcastreceiver-on-startup#)，以便在设备重新启动时重新启动您的服务。但是，请记住，这可能会导致手机电池耗尽，因此请注意您在服务中所做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:27:01.930

我相信这些应用程序会[`Service`](http://developer.android.com/reference/android/app/Service.html)在它们的 Activity 启动时启动（即何时[`onCreate()`](http://developer.android.com/reference/android/app/Activity.html#onCreate%28android.os.Bundle%29)被调用）。

A`Service`在应用程序暂停时继续运行。启动时`Service`，您可以返回*`START_STICKY`*您的`onStartCommand`.

此外，为了防止服务被 Android 的内存杀手杀死，您可以通过调用来指定您的服务对用户很重要[`startForeground()`](http://developer.android.com/reference/android/app/Service.html#startForeground%28int,%20android.app.Notification%29)。Android 开发者网站指出：

> 前台服务是一种被认为是用户主动意识到的服务，因此不会在内存不足时被系统杀死。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T20:29:01.157

我正在创建一个应用程序，我必须在 OnCreate() 中使用以下一个或多个超级函数：

```
onDestroy()
onPause()
onResume()
onSaveInstanceState() 
```

从内存中完全关闭应用程序。并且也不要使用 Activity.finish() 方法。通常，Android 在需要内存时关闭应用程序做得很好，称为弹出堆栈并且不建议强行留在内存中，除非有非常非常好的理由。希望能帮助到你。您还可以查看 Android DOC 网站以获取更多信息和您请求的示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T20:29:13.533

您需要启动一项服务。服务在后台运行，对推送警报很有用。这是一些关于它的链接：

[http://developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html) [http://www.vogella.com/articles/AndroidServices/article.html](http://www.vogella.com/articles/AndroidServices/article.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T20:32:26.910

在服务 onStartCommand 方法中返回“START_STICKY”。

[http://developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)

/托马斯

# c++ - 将boost互斥锁与本机线程混合？

> ID：15751186
> 
> 赞同：1
> 
> 时间：2013-04-01T20:23:02.033
> 
> 标签：c++, multithreading, pthreads, mutex, boost-thread

我有一些使用本机线程的代码。我想修改其中的一小部分，但使用一些增强功能。特别是，我想使用 boost::mutex::scoped_lock() 和 boost::condition 的 notify() 和 wait() 函数。

将 boost 同步与非 boost 线程一起使用有什么问题吗？在 Windows 中？在 Linux 红帽？（我知道它下面是本机线程，但想问一下以确定。）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-21T19:29:34.227

您可以使用大部分 Boost.Thread 同步接口。

看看[http://www.boost.org/doc/libs/1_55_0/doc/html/thread/thread_management.html#thread.thread_management.tutorial.native_from](http://www.boost.org/doc/libs/1_55_0/doc/html/thread/thread_management.html#thread.thread_management.tutorial.native_from)。

# variables - 将两个“双”变量与 -eq/-ne 进行比较不会验证数字的创建者是否超过 2 位

> ID：15751190
> 
> 赞同：3
> 
> 时间：2013-04-01T20:23:21.440
> 
> 标签：variables, powershell, comparison, double, equals

我试图比较两个`Double`变量`Powershell`。当变量超过 2 位（不计算精度）时，相等性测试意外失败。

我在这里遗漏了一些明显的东西吗？

这是测试脚本输出：

```
PS C:\test> .\test.ps1
==========
TEST ONE
==========
Value of Double1: 336.1
Type of Double1: System.Double
-----
Value of Double2: 336.2
Type of Double2: System.Double
-----
Value of Double1+.1: 336.2
Type of Double1+.1: System.Double
-----
Does Double1 not equal Double2: True
Does Double1+.1 not equal Double2: True

==========
TEST TWO
==========

Value of Double3: 36.1
Type of Double3: System.Double
-----
Value of Double4: 36.2
Type of Double4: System.Double
-----
Value of Double3+.1: 36.2
Type of Double3+.1: System.Double
-----
Does Double3 not equal Double4: True
Does Double3+.1 not equal Double4: False 
```

这是测试脚本，请注意第一个测试未通过我将 .1 添加到变量的测试，但第二个测试通过。

```
##################################
# START TEST
##################################

$Double1 = 336.1
$Double2 = 336.2

write-host "=========="
write-host "TEST ONE"
write-host "=========="
write-host "Value of Double1: $Double1"
write-host "Type of Double1:" $Double1.GetType().FullName
write-host "-----"
write-host "Value of Double2: $Double2"
write-host "Type of Double2:" $Double2.GetType().FullName
write-host "-----"
write-host "Value of Double1+.1:" ($Double1+.1)
write-host "-----"
write-host "Does Double1 not equal Double2:" ($Double1 -ne $Double2)    
write-host "Does Double1+.1 not equal Double2:" (($Double1+.1) -ne $Double2)
write-host ""

write-host "=========="
write-host "TEST TWO"
write-host "=========="

$Double3 = 36.1
$Double4 = 36.2

write-host ""
write-host "Value of Double3: $Double3"
write-host "Type of Double3:" $Double3.GetType().FullName
write-host "-----"
write-host "Value of Double4: $Double4"
write-host "Type of Double4:" $Double4.GetType().FullName
write-host "-----"
write-host "Value of Double3+.1:" ($Double3+.1)
write-host "-----"
write-host "Does Double3 not equal Double4:" ($Double3 -ne $Double4)    
write-host "Does Double3+.1 not equal Double4:" (($Double3+.1) -ne $Double4)
write-host "" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T20:31:15.467

请注意，这不是 Powershell 的问题，它只是浮​​点运算存在的问题。您可以在 C# 中重现相同的行为

```
double d = 336.1;
Console.WriteLine((d + .1) == 336.2); // False 
```

问题是`336.1 + .1`实际上并不等于`336.2`。您可以通过转储 2 个值的原始字节来证明这一点

```
 unsafe
 {
    double d1 = 336.1;
    double d2 = d + .1d;
    double d3 = 336.2;
    Console.WriteLine(*(long*)(&d2));
    Console.WriteLine(*(long*)(&d3));
 } 
```

印刷

```
4644622109139743540
4644622109139743539 
```

请注意，最后 2 个字节偏移 1 个值。至于为什么会出现这种情况，更多处理浮点运算的人不得不说。一般来说，在比较浮点值时应该小心。与其严格相等，不如检查它们是否在特定范围内

```
if (Math.Abs(d2 - d3) <= .01)) {
  ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T20:53:50.523

尝试将变量类型转换为 [System.Decimal] [如何正确比较 powershell 中的双精度值？](https://stackoverflow.com/questions/9535893/how-to-properly-compare-doubles-in-powershell) [http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

# javascript - 单击事件仅在第一个元素上触发？

> ID：15751194
> 
> 赞同：-1
> 
> 时间：2013-04-01T20:23:27.973
> 
> 标签：javascript, jquery, function

我正在为我的 Wordpress 项目工作，我创建了一些 jQuery 代码，但它似乎只适用于第一个元素。

**这是我的CSS：**

```
<style type="text/css">
    #hide {
        display:none;
    }
</style> 
```

**这是我的 jQuery：**

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $("#show").click(function(){
            $("#hide").toggle();
            return false;
        });
    });
</script> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T20:24:28.607

您可能有多个具有相同名称的 ID（**#show**和**#hide**） - 将所有这些元素更改为使用一个**类**（**[ID 应该是唯一的](http://www.w3.org/TR/CSS2/selector.html#id-selectors)**），然后您可以将代码更改为如下所示：

```
$(document).ready(function(){
    $(".show").click(function(){
        $(this).toggleClass('hide');
        return false;
    });
}); 
```

并稍微更改您的CSS：

```
.hide {
  display:none;
} 
```

# python - 将数字与python中的列表进行比较

> ID：15751201
> 
> 赞同：-3
> 
> 时间：2013-04-01T20:23:50.387
> 
> 标签：python, compare

如果列表的至少一个元素相同，我想用列表中的数字对值进行编号并打印该数字。像这样：

```
a= 1234
list = [12,21,32,12345,42394293489,12345,1234,9999]

if(something on list ==a):
 print a 
```

此示例中的脚本应该执行以下操作：

```
a!=list[0]
a!=list[1]
a!=list[2]
a!=list[3]
a!=list[4]
a!=list[5]
a==list[6]  # ok 
print a 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:31:43.260

要检查元素是否在列表中，请使用`in`运算符：

```
if a in list:
    print a 
```

# html - 问题在 CSS 中构建悬停菜单

> ID：15751203
> 
> 赞同：0
> 
> 时间：2013-04-01T20:24:00.497
> 
> 标签：html, css, menu, hover

我正在尝试构建一个纯 CSS 悬停菜单，但我当前的代码有两个问题。

*   当用户将鼠标悬停在`li`带有子菜单`ul`标签的标签上时，它会将项目向上推而不是悬停在下方。
*   子菜单`ul`标签没有占用父`li`标签的宽度

这是源代码：

您还可以在此处查看代码的工作副本：http: [//jsfiddle.net/Fbgug/](http://jsfiddle.net/Fbgug/)

HTML：

```
<ul id="subnav">
    <li class="subnavtab">
        <a href="">Plan Your Visit</a>
        <ul class="sub-menu">
            <li><a href="">Fee and Hours</a></li>
            <li><a href="">Directions</a></li>
            <li><a href="">Field Trips</a></li>
            <li><a href="">Birthday Parties</a></li>
            <li><a href="">Rentals</a></li>
        </ul>
    </li>
    <li class="subnavtab">
        <a href="">Tour the Museum</a>
        <ul class="sub-menu">
            <li><a href="">Artville</a></li>
            <li><a href="">ArtZone</a></li>
            <li><a href="">Exhibitions</a></li>
        </ul>
    </li>
    <li class="subnavtab">
        <a href="">Program & Events</a>
        <ul class="sub-menu">
            <li><a href="">Weather or Not</a></li>
            <li><a href="">Classes & Workshops</a></li>
        </ul>
    </li>
    <li class="subnavtab"><a href="">Membership</a></li>
    <li class="subnavtab"><a href="">Donate</a></li>
</ul> 
```

CSS：

```
#subnav { margin-top: 20px; width: 740px; float: left; position: relative; }
.subnavtab { background-color: #A1CD3A; padding: 10px 10px 10px 10px; margin: 0 1px 0 1px; display: inline-block;
             -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box;
             -webkit-border-radius-topright: 15px; -moz-border-radius-topright: 15px; border-top-right-radius: 15px;
             -webkit-border-radius-topleft: 15px; -moz-border-radius-topleft: 15px; border-top-left-radius: 15px; 
             border-radius: 15px 15px 0px 0px;
             behavior: url(pie.htc);
}

.subnavtab:first-child { margin-right: 3px; margin-left: 0px; }

.subnavtab:last-child { margin-right: 0px; margin-left: 3px; }

.subnavtab a { color: #000; text-decoration: none; font-weight: bold; font-size: large; }
.subnavtab a:hover { color: #fff; text-decoration: none; font-weight: bold; font-size: large; }

#subnav ul.sub-menu
{
    display: none;
    position: relative;
    left: -10px;
    padding: 10px;
    z-index: 90;
    list-style-type: none;
    margin-left: 5px;
}

#subnav ul.sub-menu li { text-align: left; }

#subnav li:hover ul.sub-menu { display: block; background-color: #A1CD3A; 
                               -webkit-border-bottom-right-radius: 15px; -moz-border-radius-bottomright: 15px; border-bottom-right-radius: 15px;
                               -webkit-border-bottom-left-radius: 15px; -moz-border-radius-bottomleft: 15px; border-bottom-left-radius: 15px;
                               border-radius: 0px 0px 15px 15px;
                               behavior: url(pie.htc);  
}

#subnav ul.sub-menu a { color: #000; text-decoration: none; font-weight: bold; font-size: small; }
#subnav ul.sub-menu a:hover { color: #fff; text-decoration: none; font-weight: bold; font-size: small;  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:28:50.047

由于您的 li 元素`display: inline-block`添加了`vertical-align: top;`应该可以解决问题：

```
.subnavtab {
    ...
    vertical-align: top;
} 
```

[http://jsfiddle.net/Fbgug/1/](http://jsfiddle.net/Fbgug/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:31:32.320

添加垂直对齐：顶部；到.subnavtab。

编辑： dfsq 打败了我。

# mongodb - `mongo` 查询清除旧条目

> ID：15751204
> 
> 赞同：1
> 
> 时间：2013-04-01T20:24:16.793
> 
> 标签：mongodb

任何人都有一个方便的`mongo`命令来删除数据库中早于 X 日期/ X 天的所有条目？

基本上有一个开发和生产数据库，我希望稍微修剪一下开发数据库以限制大小。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T22:08:21.123

你可以从 mongo shell 做这样的事情。

```
var older=Date.parse("2013-03-01"),collection=db.so,all=collection.find();
all.forEach(function(doc) { var ts = doc._id.getTimestamp();
    if (ts < older) { collection.remove(doc); } }); 
```

上面的行（您将粘贴到 shell 中）将删除在 2013 年 3 月 1 日之前创建的指定集合 ( ) 中的所有文档。它依赖于每个都有嵌入`collection=db.so`的事实（基于文档创建 ( [docs](http://docs.mongodb.org/manual/core/document/#objectid) ))，可以检索和使用。`ObjectId``timestamp``timestamp`

您当然可以更改查询以查找文档中的特定时间戳字段。

```
if (doc.timestampField < older) { collection.remove(doc); } }) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-29T11:23:28.010

您可以使用 mongo 在指定时间后删除数据的概念，即通过设置 TTL 使集合中的数据过期。

请参考下面的链接这样做 [http://docs.mongodb.org/manual/tutorial/expire-data/](http://docs.mongodb.org/manual/tutorial/expire-data/)

# java - 如何使用实体键进行查询并将其排序到 Java 中的 App Engine 数据存储区？

> ID：15751206
> 
> 赞同：0
> 
> 时间：2013-04-01T20:24:19.320
> 
> 标签：java, google-app-engine, google-cloud-datastore

我一直在编写一个使用 GAE 的应用程序，并根据登录 Google 的用户昵称使用特定密钥存储实体。

问题是我无法进行查询来检索具有特定键的实体并对检索到的实体进行排序。

我举几个例子：

```
Query query = new Query("Invoice", key);
//This works; retrieved all entities that have the key

Query query = new Query("Invoice").addSort("Date", Query.SortDirection.ASCENDING);
//This works too, retrieves ALL entities sorted by the Date field. 
```

如果我混合它们：

```
Query query = new Query("Invoice", key).addSort("Date", Query.SortDirection.ASCENDING):
//This doesn't work, and it is what I want;to retrieve the entities with the specific key and sorted 
```

由一个字段（没关系正确知道）。

# mysql - 我可以在位类型列中插入什么值？

> ID：15751207
> 
> 赞同：28
> 
> 时间：2013-04-01T20:24:22.170
> 
> 标签：mysql, sql, boolean, bit

![雕像类型](https://i.stack.imgur.com/mE9dk.jpg)![情况](https://i.stack.imgur.com/4h5DS.jpg)我正在尝试将位值插入或编辑为“0”或“1”，但要么返回空白。

有人可以告诉我如何在其中插入值吗？

另外，是否可以不使用位类型而是布尔值？我看到类型列表中有一个布尔类型

谢谢

你好，我上传了图片，表格中的单元格是空白的，但是我试了几次，添加，更新，都生效了，但是单元格一直是空白的...

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-01T20:27:14.197

一般来说，对于`boolean`or`bit`数据类型，您会使用`0`or `1`like 这样：

```
UPDATE tbl SET bitCol = 1 WHERE bitCol = 0 
```

也可以看看：

*   [用于存储布尔值的 MySQL 数据类型](https://stackoverflow.com/questions/289727/which-mysql-datatype-to-use-for-storing-boolean-values)
*   [如何在 SQL Server 中创建是/否布尔字段？](https://stackoverflow.com/questions/1777257/how-do-you-create-a-yes-no-boolean-field-in-sql-server)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-01T20:30:18.297

如果您使用的是 SQL Server，则可以使用`0 and 1`

或者

`'true' and 'false'`（是的，使用字符串）

```
...your_bit_field='false'... => equivalent to 0 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-15T10:56:42.843

您的问题出在 PHPMyAdmin 本身。某些版本不显示位列的值，即使您正确设置了它。

# java - 如何将 XML 有效负载写入 CXF SOAP 响应？

> ID：15751208
> 
> 赞同：1
> 
> 时间：2013-04-01T20:24:25.210
> 
> 标签：java, web-services, soap, cxf, jboss6.x

我正在使用 JBoss AS 6.1 和包含的 CXF 版本，我相信它是 2.3.1。

我有一个包含两个操作的 Web 服务：第一个让客户端请求一些数据。它将消息发布到 JMS 队列并返回票证号。MDB 接收消息，处理请求，构建提取数据库表。

第二个操作让 Web 客户端提交票证，如果处理完成，则返回结果。

现在，问题是这样的：我希望我的 MDB 构建结果，然后使用 JAXB 将它们编组为 XML 并将 XML 存储在数据库中。因此，当第二个操作请求数据时，我想将数据库中的这个 XML 作为有效负载插入到 SOAP 信封中。（FWIW：我想将响应保存在 XML 中的数据库中，原因有两个：1，便于保存这些非规范化数据而不是创建多个提取表，以及 2）以便响应可以尽快发出。）

现在，我认为我必须编写一个 PhaseInterceptor 来完成此操作，但如果有人能指出一个更改或写出 SOAP 有效负载的示例，我将不胜感激。任何 JBoss-CXF 特定的示例都很棒，但我认为普通的 CXF 示例可能就足够了。我已经通过示例来修改标题。我需要一些非常基本的东西，并且是为一个小孩写的。:-)

谢谢。

# c# - MVC 3、Elmah 和未找到视图“错误”或其主人

> ID：15751212
> 
> 赞同：0
> 
> 时间：2013-04-01T20:24:41.837
> 
> 标签：c#, asp.net-mvc-3, elmah

我正在开发一个使用 MVC 3、elmah 和 nhibernate 的旧网站。Elmah 日志实际上有数以千计的“未找到视图‘错误’或其主人”错误。我认为它掩盖了真正的错误。我无法弄清楚如何让 Elmah 记录真正的错误。

作为尝试调试的一种方式，我添加了 - return RedirectToAction("noWhere"); - 强制出错。在本地，我得到一个 .net 屏幕，它只是说“处理您的请求时发生异常......”在登台时我得到 YOSOD 屏幕，告诉我设置 web.config customerrors 节点。两者都将 customerrors 设置为 on。

网络配置具有以下内容：

```
 <pages>
  <namespaces>
    <add namespace="System.Web.Mvc" />
    <add namespace="System.Web.Mvc.Ajax" />
    <add namespace="System.Web.Mvc.Html" />
    <add namespace="System.Web.Routing" />
    <add namespace="System.Web.Helpers" />
    <add namespace="System.Web.WebPages" />
  </namespaces>
</pages>
<httpModules>
  <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" />
  <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" />
  <add name="ErrorFilter" type="Elmah.ErrorFilterModule, Elmah" />
</httpModules>

  <customErrors mode="On" defaultRedirect="~/Views/Shared/PageNotFound">
      <error statusCode="404" redirect="~/Views/Shared/PageNotFound" />
      <error statusCode="500" redirect="~/Views/Shared/PageNotFound" />
  </customErrors> 
```

Global.asax 有：

```
 public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
         filters.Add(new ElmahHandleErrorAttribute());
    } 
```

Elmah 类有

```
public class ElmahHandleErrorAttribute : System.Web.Mvc.HandleErrorAttribute 
{
    public override void OnException(ExceptionContext context)         
    {             
        base.OnException(context);               
        var e = context.Exception;             
        if (!context.ExceptionHandled // if unhandled, will be logged anyhow      
            || RaiseErrorSignal(e)    // prefer signaling, if possible 
            || IsFiltered(context))   // filtered?
            return;               
        LogException(e);         
    } 
```

并且 baseController 类具有：

```
protected ViewResult PageNotFound()
    {
        Response.StatusCode = (int)HttpStatusCode.NotFound;

        return View("PageNotFound", PageViewModelBuilder.UpdateSiteProperties(new PageViewModel()));
    }

    protected ViewResult PageBadRequest()
    {
        Response.StatusCode = (int)HttpStatusCode.BadRequest;
        return View("PageNotFound", PageViewModelBuilder.UpdateSiteProperties(new PageViewModel()));
    } 
```

任何有关获取正确错误记录的帮助将不胜感激....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:58:23.323

# git - 使用 SSH 的 Git 存储库

> ID：15751215
> 
> 赞同：2
> 
> 时间：2013-04-01T20:24:50.327
> 
> 标签：git, authentication, ssh, ssh-keys, gitlab

我在我的 CentOS 6.4 服务器上全新安装了 GitLab。

在此之前，我只是使用 Github（在 HTTP 模式下），所以我对这一切都很陌生。

我为我的用户创建了一个密钥，将其添加到 ~/.ssh/authorized_keys 和 GitLab 中。

```
ssh-keygen -t rsa -C "arthur@domain.tld"
cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys 
```

但是当我尝试将新提交推送到我的仓库时，它不会询问我的用户，而只是询问 git 的用户密码（并且失败）：

```
git push origin master
git@git.domain.tld's password:
fatal: 'arthur/repo.git' does not appear to be a git repository
fatal: The remote end hung up unexpectedly 
```

我真的不明白它是如何工作的，我错过了什么？

编辑 ：

```
ssh -vvvT sa_gitlab@git.hoa.ro
OpenSSH_5.3p1, OpenSSL 1.0.0-fips 29 Mar 2010
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: Applying options for *
debug2: ssh_connect: needpriv 0
debug1: Connecting to git.hoa.ro [88.191.160.53] port 22.
debug1: Connection established.
debug1: permanently_set_uid: 0/0
debug1: identity file /root/.ssh/identity type -1
debug1: identity file /root/.ssh/id_rsa type -1
debug1: identity file /root/.ssh/id_dsa type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.3
debug1: match: OpenSSH_5.3 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.3
debug2: fd 3 setting O_NONBLOCK
debug1: SSH2_MSG_KEXINIT sent
debug3: Wrote 792 bytes for a total of 813
debug1: SSH2_MSG_KEXINIT received
debug2: kex_parse_kexinit: diffie-hellman-group-exchange-sha256,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1
debug2: kex_parse_kexinit: ssh-rsa,ssh-dss
debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se
debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: none,zlib@openssh.com,zlib
debug2: kex_parse_kexinit: none,zlib@openssh.com,zlib
debug2: kex_parse_kexinit:
debug2: kex_parse_kexinit:
debug2: kex_parse_kexinit: first_kex_follows 0
debug2: kex_parse_kexinit: reserved 0
debug2: kex_parse_kexinit: diffie-hellman-group-exchange-sha256,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1
debug2: kex_parse_kexinit: ssh-rsa,ssh-dss
debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se
debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: none,zlib@openssh.com
debug2: kex_parse_kexinit: none,zlib@openssh.com
debug2: kex_parse_kexinit:
debug2: kex_parse_kexinit:
debug2: kex_parse_kexinit: first_kex_follows 0
debug2: kex_parse_kexinit: reserved 0
debug2: mac_setup: found hmac-md5
debug1: kex: server->client aes128-ctr hmac-md5 none
debug2: mac_setup: found hmac-md5
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug3: Wrote 24 bytes for a total of 837
debug2: dh_gen_key: priv key bits set: 120/256
debug2: bits set: 504/1024
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug3: Wrote 144 bytes for a total of 981
debug3: check_host_in_hostfile: filename /root/.ssh/known_hosts
debug3: check_host_in_hostfile: match line 1
debug3: check_host_in_hostfile: filename /root/.ssh/known_hosts
debug3: check_host_in_hostfile: match line 1
debug1: Host 'git.hoa.ro' is known and matches the RSA host key.
debug1: Found key in /root/.ssh/known_hosts:1
debug2: bits set: 511/1024
debug1: ssh_rsa_verify: signature correct
debug2: kex_derive_keys
debug2: set_newkeys: mode 1
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug3: Wrote 16 bytes for a total of 997
debug2: set_newkeys: mode 0
debug1: SSH2_MSG_NEWKEYS received
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug3: Wrote 48 bytes for a total of 1045
debug2: service_accept: ssh-userauth
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug2: key: /root/.ssh/identity ((nil))
debug2: key: /root/.ssh/id_rsa ((nil))
debug2: key: /root/.ssh/id_dsa ((nil))
debug3: Wrote 80 bytes for a total of 1125
debug1: Authentications that can continue: publickey,gssapi-keyex,gssapi-with-mic,password
debug3: start over, passed a different list publickey,gssapi-keyex,gssapi-with-mic,password
debug3: preferred gssapi-keyex,gssapi-with-mic,publickey,keyboard-interactive,password
debug3: authmethod_lookup gssapi-keyex
debug3: remaining preferred: gssapi-with-mic,publickey,keyboard-interactive,password
debug3: authmethod_is_enabled gssapi-keyex
debug1: Next authentication method: gssapi-keyex
debug1: No valid Key exchange context
debug2: we did not send a packet, disable method
debug3: authmethod_lookup gssapi-with-mic
debug3: remaining preferred: publickey,keyboard-interactive,password
debug3: authmethod_is_enabled gssapi-with-mic
debug1: Next authentication method: gssapi-with-mic
debug3: Trying to reverse map address 88.191.160.53.
debug1: Unspecified GSS failure.  Minor code may provide more information
Credentials cache file '/tmp/krb5cc_0' not found

debug1: Unspecified GSS failure.  Minor code may provide more information
Credentials cache file '/tmp/krb5cc_0' not found

debug1: Unspecified GSS failure.  Minor code may provide more information

debug1: Unspecified GSS failure.  Minor code may provide more information
Credentials cache file '/tmp/krb5cc_0' not found

debug2: we did not send a packet, disable method
debug3: authmethod_lookup publickey
debug3: remaining preferred: keyboard-interactive,password
debug3: authmethod_is_enabled publickey
debug1: Next authentication method: publickey
debug1: Trying private key: /root/.ssh/identity
debug3: no such identity: /root/.ssh/identity
debug1: Trying private key: /root/.ssh/id_rsa
debug3: no such identity: /root/.ssh/id_rsa
debug1: Trying private key: /root/.ssh/id_dsa
debug3: no such identity: /root/.ssh/id_dsa
debug2: we did not send a packet, disable method
debug3: authmethod_lookup password
debug3: remaining preferred: ,password
debug3: authmethod_is_enabled password
debug1: Next authentication method: password
sa_gitlab@git.hoa.ro's password: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:29:03.343

> 我为我的用户创建了一个密钥，将其添加到 ~/.ssh/authorized_keys 和 GitLab

您不应该将您的公钥添加到`~/.ssh/authorized_keys`：唯一`authorized_keys`被修改的文件是：

*   一个在 GitLab 方面
*   由 GitLab 自己完成（当您通过 GitLab GUI 将 ssh 公钥添加到您的帐户时）

您需要在客户端（或[在 Windows 上](https://stackoverflow.com/a/3188786/6309)）创建私钥/公钥 ssh 密钥`id_rsa`，并通过 GitLab GUI 注册公钥。`id_rsa.pub``$HOME/.ssh``%HOME%/.ssh`

# asp.net - 使用 web 项目中的 .aspx 文件在 Silverlight 中打开子窗口

> ID：15751216
> 
> 赞同：1
> 
> 时间：2013-04-01T20:24:52.273
> 
> 标签：asp.net, silverlight, telerik, prism

我是silverlight和asp.net的新手，我们正在使用silverlight和prism框架，我在.apsx页面中设计了一个主页，借助Web控件（.ascx）和网页（.aspx）。我想要一个登录页面（在silverlight中的业务应用程序中附带一个子窗口），我的问题是，有没有什么方法可以通过在.aspx页面中编写代码来调用silverlight项目中设计的子窗口？

通过在.aspx 页面中使用超链接按钮并在silverlight 页面中调用登录窗口。因为在这个项目中，主页是在 .aspx 页面中设计的。

# c++ - 向量分配/插入和要分配/插入的铸造值

> ID：15751222
> 
> 赞同：1
> 
> 时间：2013-04-01T20:25:10.983
> 
> 标签：c++, vector

我有两个向量：

```
std::vector<Foo> original;
std::vector<Foo *> pointers; 
```

目前，我正在检查`original`并使用`push_back`将值从它复制到`pointers`.

例如这样的：

```
pointers.push_back(&(*original.at(0)); 
```

反正有没有使用向量`assign`或`insert`方法来完成这个？

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:27:43.950

不，没有。

有很多原因导致您所做的事情最终会导致段错误或类似的错误。主要是，您的指针向量指向原始向量中元素的**地址**。当您推回原始向量时，元素可能会移动到其他地方并且地址不再有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:40:33.290

如果您愿意将 boost 库加入其中，这可以非常简洁地完成（使用[boost::transform_iterator](http://www.boost.org/doc/libs/1_53_0/libs/iterator/doc/transform_iterator.html)）：

```
#include <boost/iterator/transform_iterator.hpp>
#include <memory> // for addressof

struct Foo {};

int main()
{
    std::vector<Foo> original;
    std::vector<Foo*> pointers;

    pointers.assign(
        boost::make_transform_iterator(original.begin(), std::addressof<Foo>),
        boost::make_transform_iterator(original.end(), std::addressof<Foo>));
} 
```

鉴于向量元素是连续存储的，您还可以使用 [计数迭代器](http://www.boost.org/doc/libs/1_53_0/libs/iterator/doc/counting_iterator.html)：

```
pointers.assign(
    boost::make_counting_iterator(original.data()),
    boost::make_counting_iterator(original.data() + original.size())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T20:44:52.530

**如果我错了，请纠正我**，但不是所有成员都`vector`在连续记忆中吗？

我相信您可以使用该[`insert`](http://www.cplusplus.com/reference/vector/vector/insert/)方法，您只需要弄清楚如何将其添加`sizeof(Foo)`到每个插入的指针中。

# java - Java中的同步hashmap只读访问

> ID：15751224
> 
> 赞同：4
> 
> 时间：2013-04-01T20:25:14.730
> 
> 标签：java, multithreading, hashmap, synchronized, readonly

在 Java 中，有 3 个线程想要访问（只读）一个不可变的 hashmap 来做某事。是否`SynchronizedMap`低于为此目的最快的解决方案？如果没有，那么使用什么会更快？

```
import com.carrotsearch.hppc.IntObjectMap;
import com.carrotsearch.hppc.IntObjectOpenHashMap;

public class abc {
    public static void main(String[] args) {

        final IntObjectMap<int[]> map = new IntObjectOpenHashMap<int[]>();
        for (int i = 0; i < 4; i++) {
            map.put(i, new int[] {1, 2, 3, 4, 5});
        }

        Thread[] threads = new Thread[3];

        class SynchronizedMap {

            private final Object syncObject = new Object();

            public final int[] read(int i) {

                final int[] value;

                synchronized (syncObject) {

                    // code that reads-only immutable map object
                    value = map.get(i);

                }

                return value;

            }
        }

        final SynchronizedMap syncMap = new SynchronizedMap();

        class AccessMap implements Runnable {

            private int id;
            AccessMap(int index) { id = index; }

            public void run() {

                // code that reads-only immutable map object like this:
                for (int i = 0; i < 4; i++) {

                    final int[] array = syncMap.read(i);

                    for (int j = 0; j < array.length; j++)
                        System.out.println(id + ": " + array[j] + " ");

                }

            }
        }

        for (int i = 0; i < threads.length; i++) {
            threads[i] = new Thread(new AccessMap(i) {});
            threads[i].start();
        }

        for (int i = 0; i < threads.length; i++) {
            try {
                threads[i].join();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T20:27:01.900

> SynchronizedMap 类是否低于为此目的最快的解决方案？

不，如果`HashMap`是真正不可变/只读的，那么 a`volatile Map<...>`就是要走的路。

```
volatile IntObjectMap<int[]> readOnlyMap = new IntObjectOpenHashMap<int[]>(); 
```

如果您在构建地图*后*启动线程，那么您甚至不需要`volatile`. 唯一需要的`volatile`是，如果您正在交换当前正在运行的线程正在访问的新映射。

```
final IntObjectMap<int[]> readOnlyMap = new IntObjectOpenHashMap<int[]>(); 
```

# gnuplot - 如何在 gnuplot 中绘制图形的导数？

> ID：15751226
> 
> 赞同：17
> 
> 时间：2013-04-01T20:25:16.883
> 
> 标签：gnuplot, numerical-methods

我有一组随时间变化的变量的测量值。我将这些测量值保存在一个名为“结果”的文件中，格式如下：

```
# time sample
0      5
12     43
234    342 
```

ETC...

我可以很容易地在 gnuplot 中绘制它：

```
plot "results" 
```

有什么方法可以直接从 gnuplot 绘制这些测量值对时间（即 dsample/dt）的导数，还是我必须单独计算导数并直接在 gnuplot 中*绘制？*

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-01T22:03:57.053

您可以通过定义一个函数来获取导数来做到这一点：

```
#!/usr/bin/env gnuplot

set term pngcairo
set output 'test.png'

# derivative functions.  Return 1/0 for first point, otherwise delta y or (delta y)/(delta x)
d(y) = ($0 == 0) ? (y1 = y, 1/0) : (y2 = y1, y1 = y, y1-y2)
d2(x,y) = ($0 == 0) ? (x1 = x, y1 = y, 1/0) : (x2 = x1, x1 = x, y2 = y1, y1 = y, (y1-y2)/(x1-x2))

set key bottom left Left reverse

# offset for derivatives (half the x spacing)
dx = 0.25

plot 'data.dat' title 'data', \
     '' u ($1-dx):(d($2)) title '1-variable derivative', \
     '' u ($1-dx):(d2($1,$2)) title '2-variable derivative', \
     '' u ($1-dx):(d2($1,$2)) smooth csplines title '2-variable derivative (smoothed)' 
```

d2(x,y) （这可能是您正在寻找的）除了第一个数据点之外，只计算运行中的上升（delta y 超过 delta x），并且 d(y) 以相同的方式计算 delta y。鉴于此数据文件

```
0.0 1
0.5 2
1.0 3
1.5 4
2.0 5
2.5 3
3.0 1 
```

结果是

![在此处输入图像描述](https://i.stack.imgur.com/duCTn.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-09-22T19:15:28.720

Viktor T. Toth[在此处](https://www.vttoth.com/CMS/technical-notes/250-plotting-derivatives-in-gnuplot)给出了绘制导数的替代（更通用）语法

```
x0=NaN
y0=NaN
plot 'test.dat' using (dx=$1-x0,x0=$1,$1-dx/2):(dy=$2-y0,y0=$2,dy/dx) w l t 'dy/dx' 
```

**解释**：括号内的数据文件修饰符（*使用*后）将被解释为点 (x):(y) 的计算坐标，从数据文件中逐行计算。对于每一行，列值 ($1, $2, ...) 通过允许的算术运算进行修改。括号的值是逗号分隔表达式列表中的最后一个表达式。前两个首先被评估并存储在变量中，这些变量稍后用于下一行。上述语法的伪代码是：

```
 x0 = NaN // Initialise to 'Not a number' for plot to ignore the first row
  y0 = NaN
  foreach row in 'test.dat' with col1 as $1, and col2 as $2:
    dx = $1-x0
    x0 = $1
    x = $1 - dx/2 // Derivative at the midpoint of the interval
    dy = $2-y0
    y0 = $2
    y = dy/dx
    plot x:y  // Put the point on the graph 
```

**额外**：这个解释也可以用来解释导函数 d2(x,y) 的@andryas 解。唯一的区别是使用 0 美元。gnuplot 中的 $0 是数据文件的“第零”列，本质上是行号（如在电子表格中，在忽略数据文件中的注释行之后）。`$0==0?`检查它是否是第一行并分配一个 1/0 (NaN)，以便 plot 命令忽略并且不绘制它。然而，代码只有在区间长度固定的情况下才是正确的（在上述情况下为 0.5）。另一方面，Viktor 的代码计算每一行的间隔。

# jquery - 在 Jqgrid 的一列中显示 xml 数据

> ID：15751228
> 
> 赞同：-1
> 
> 时间：2013-04-01T20:25:20.753
> 
> 标签：jquery, jqgrid

我是 jqgrid 的新手，需要加载 xml 数据并在浏览器上显示。我有如下对象

```
 Object
           id
           xmldata
           attribute1
           attribute2
           attribute3
           attribute4 
```

我的网页中有 json 作为

```
 jq("#grid").jqGrid({
        url:'/url',
        datatype: 'json',
        mtype: 'GET',
        colNames:['Id', 'xml data', 'attribute1', 'attribute2', 'attribute3', 'attribute4'],
        colModel:[
            {name:'id',index:'id', width:55,editable:false,editoptions:{readonly:true,size:10},hidden:true},
            {name:'XMLData',index:'xmldata', width:100,editable:true, editrules:{required:true}, editoptions:{size:10}},
            {name:'attribute1',index:'attribute1', width:100,editable:true, editrules:{required:true}, editoptions:{size:10}},
            {name:'attribute2',index:'attribute2', width:100,editable:true, editrules:{required:true}, editoptions:{size:10}},
            {name:'attribute3',index:'attribute3', width:100,editable:true, editrules:{required:true}, editoptions:{size:10}},
            {name:'attribute4',index:'attribute4', width:100,editable:true, editrules:{required:true}, editoptions:{size:10}},

        ], 
```

但 xmldata 属性未加载，页面上加载了其他数据。我知道请求正文是 json 类型而不是 xml。但我有混音器 json 和 xml 数据。如何获取使用 json 类型显示的 xml 数据。或者我们有任何警觉。我需要将 xml 属性显示为一列，一列位于另一列之下。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:12:12.503

可以使用不同的方法。但他们处理数据预处理。

**1.** org.json 命名空间中 的[XML 类为您提供了此功能。](http://www.json.org/javadoc/org/json/XML.html)

您必须调用静态[toJSONObject](http://www.json.org/javadoc/org/json/XML.html#toJSONObject%28java.lang.String%29)方法：

> 将格式正确（但不一定有效）的 XML 字符串转换为 JSONObject。由于 JSON 是一种数据格式，而 XML 是一种文档格式，因此在此转换中可能会丢失一些信息。XML 使用元素、属性和内容文本，而 JSON 使用名称/值对和值数组的无序集合。JSON 不喜欢区分元素和属性。相似元素的序列表示为 JSONArray。内容文本可以放置在“内容”成员中。注释、序言、DTD 和被忽略。

这会将 xml 转换为 JSON。接下来，可以将此数据附加到对象并根据需要使用。

**2.**你可以做的另一种方法是在 jQuery 中使用 function `xml2json(xml,tab)`。有关更多说明，您可以移至此[链接](http://goessner.net/download/prj/jsonxml/)。这可以在您的`customformatter`for 列中使用。

# iphone - 在 UITableViewCell 和 UITableViewController 之间传递数据？

> ID：15751229
> 
> 赞同：3
> 
> 时间：2013-04-01T20:25:31.580
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我在 xcode 4.6 中创建了主详细信息模板项目，并添加了带有 2 个文本字段的自定义单元格。我还创建了新类，它是 UITableViewCell 的子类，在这个类中我为文本字段创建了出口。当用户键入某些内容时，NSMutableArray 会更新，并且效果很好。现在我想知道如何将此数组传递回 MasterViewController (UITableViewController)，以便我可以使用这些数据来显示计算。

我尝试为 UIViewControllers 之间的委托使用教程，但我不断收到错误。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:42:18.770

您不应该将数据保留在 中`UITableViewCell`，因为它会破坏 MVC。

您需要在您的单元格上获得参考`UITextField`。这就是我在登录表单中的做法：

我有一个名为 的自定义单元子类`TextFieldCell`，它有一个名为 的插座`textField`，我希望我`UITableViewController`有对这些`UITextField`s 的引用。

首先，我打开我的故事板，将单元格类设置为 TextFieldCell，然后将 UITextField 连接到单元格 textField 出口。比我把它加到`tableView:cellForRowAtIndexPath:`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    (…)
    if (indexPath.row == 0) {
        // Sets the textField of the first cell as the loginTextField.
        self.loginTextField = tCell.textField;
    } else {
        // Sets the textField of the second cell as the passwordTextField.
        self.passwordTextField = tCell.textField;
    }
    tCell.textField.delegate = self;
    (…)
} 
```

现在我可以访问 my`loginTextField`和 my的值`passwordTextField`。我这样做是`tableView:cellForRowAtIndexPath:`因为那是我创建要添加到表格视图的单元格的时候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:30:46.013

在您的情况下，您需要创建**协议：**

我只是给出了如何创建**协议的基本思路**

[另请阅读此问题](https://stackoverflow.com/questions/626898/how-do-i-create-delegates-in-objective-c)

```
#DetailViewController.h

#import <UIKit/UIKit.h>

@protocol MasterDelegate <NSObject>
-(void) getButtonTitile:(NSString *)btnTitle;
@end

@interface DetailViewController : MasterViewController

@property (nonatomic, assign) id<MasterDelegate> customDelegate; 

#DetailViewController.m

if([self.customDelegate respondsToSelector:@selector(getButtonTitile:)])
{
          [self.customDelegate getButtonTitile:button.currentTitle];    
}

#MasterViewController.m

create obj of DetailViewController

DetailViewController *obj = [[DetailViewController alloc] init];
obj.customDelegate = self;
[self.navigationController pushViewController:reportTypeVC animated:YES];

and add delegate method in MasterViewController.m for get button title.

#pragma mark -
#pragma mark - Custom Delegate  Method

-(void) getButtonTitile:(NSString *)btnTitle;
{
    NSLog(@"%@", btnTitle);

} 
```

# javascript - 使用 setTimeout 从循环内部重绘 html 画布的推荐方法

> ID：15751233
> 
> 赞同：2
> 
> 时间：2013-04-01T20:25:58.213
> 
> 标签：javascript, html, animation, canvas, settimeout

我已经研究了很多，主要是在 SO 中，关于`setTimeout`“不阻塞”，因此不适合在 for 循环中使用，因为循环继续进行，而函数调用继续建立。

我有一个 HTML 文件，其中记录了图像处理算法，所以我想以“人类可读”的速度显示活动像素“行走”。我尝试但不起作用的实现如下：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
</head>

<body onload="run();">

    <canvas id="Canvas" width=501 height=601></canvas>

    <script>

        function run() {
            reevaluate();
        };

        var fixedcenteri;
        var fixedcenterj;

        function reevaluate() {

            var altura_imagem = 50;
            var largura_imagem = 40;

            for (var i = 0; i < altura_imagem; i++) {
                for (var j = 0; j < largura_imagem; j++) {

                    fixedcenteri = i;
                    fixedcenterj = j;

                    setTimeout(draw, 100);

                    // if I uncomment this I can see what I want, but...
                    // alert(i+j);
                };
            };
        };

        function draw () {
            var elem = document.getElementById('Canvas');
            var cx = elem.getContext('2d');

            w = elem.width;
            h = elem.height;

            cx.fillStyle = "white";
            cx.fillRect(0,0,w,h);

            cx.fillStyle = 'blue';
            cx.fillRect(fixedcenteri, fixedcenterj, 10, 10);
        }

    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T21:06:32.040

**试试 RequestAnimationFrame！**

RequestAnimationFrame 和 setTimeout 一样是异步的，比 setTimeout 更高效。

此外，它还为离屏动画提供动画分组和自动停止功能。

您甚至可以使用以下技术将其限制为所需的 FPS：

```
var fps = 15;
function draw() {
    setTimeout(function() {
        requestAnimationFrame(draw);

        // your draw() stuff goes here

    }, 1000 / fps);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T20:47:31.977

最简单的实现是将所有绘制命令存储在一个数组中，然后使用`setTimeout`在绘制命令之间等待来处理该数组。

这是一个简单的例子-> [http://jsfiddle.net/K4D84/](http://jsfiddle.net/K4D84/)

```
//in your initial loop instead of draw
drawCommands.push({i: i, j: j}); 
```

然后...

```
function slowDraw(index) {
    index = index || 0;

    var drawCommand = drawCommands[index];

    if (drawCommand) {
        fixedcenteri = drawCommand.i;
        fixedcenterj = drawCommand.j;
        setTimeout(function () {
            draw();
            slowDraw(++index);
        }, 100);
    }    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T20:48:15.333

我认为这可以满足您的需求。

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
</head>

<body onload="draw();">

    <canvas id="Canvas" width=501 height=601></canvas>

    <script>

        var fixedcenteri = 0;
        var fixedcenterj = 0;

        function draw () {
            var elem = document.getElementById('Canvas');
            var cx = elem.getContext('2d');

            w = elem.width;
            h = elem.height;

            cx.fillStyle = "white";
            cx.fillRect(0,0,w,h);

            cx.fillStyle = 'blue';
            cx.fillRect(fixedcenteri, fixedcenterj, 10, 10);

            if(fixedcenteri < 50) {
                if(fixedcenterj < 40) {
                    fixedcenterj++;
                } else {
                    fixedcenterj = 0;
                    fixedcenteri++;
                }
                setTimeout(draw, 100);
            }
        }

</script> 
```

# svg - 图像哈希中的 SVG 参数

> ID：15751235
> 
> 赞同：1
> 
> 时间：2013-04-01T20:26:00.527
> 
> 标签：svg

我正在使用根元素上需要“preserveAspectRatio='true'”的 SVG 文件。SVG 使用标准标签显示。目前，每次在 Illustrator 中更新 SVG 文件时，我都会重新添加该属性。是否有更简单的方法通过 CSS（或其他方式）应用此属性，这样我就不必不断重新添加该属性？

`<img src="image.svg#preserveAspectRatio=none" />`是我希望的理想化简单的实现类型，但我的手指并没有交叉太紧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:37:26.283

根据[svg 规范](http://www.w3.org/TR/SVG11/linking.html#LinksIntoSVG)的语法是：

```
<img src="image.svg#svgView(preserveAspectRatio(none))" /> 
```

# php - 转换 mysql unix 时间并使用 BETWEEN

> ID：15751236
> 
> 赞同：1
> 
> 时间：2013-04-01T20:26:02.863
> 
> 标签：php, mysql, time, unix-timestamp

我有一个表单，用户可以在其中选择 2 个日期，点击提交，然后表单返回在这两个日期之间创建的票证。

表格中的日期格式如下：**mm/dd/year**

mysql 中的日期被保存为 unix 时间戳。

提交后，我正在转换日期格式，如下所示：

```
 $from = $_POST['from']
  $to = $_POST['to'];
  $from = date("Y/m/d",strtotime($_GET['from']));
  $to = date("Y/m/d",strtotime($_GET['to'])); 
```

所以 $from 类似于**year/mm/dd**

我的查询是：

```
$get = mysql_query("SELECT id FROM tickets WHERE date_created BETWEEN UNIX_TIMESTAMP('$from') AND UNIX_TIMESTAMP('$to')"); 
```

这很好用，我的问题是，当开始日期和结束日期相等时，这意味着用户只想查看一天的门票。是否仍然可以以某种方式使用相同的查询？或者我如何修改查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:37:07.717

为什么不...

```
$from = date("Y-m-d 00:00:00",strtotime($_GET['from']));
$to = date("Y-m-d 23:59:59",strtotime($_GET['to'])); 
```

`$_GET`另外，在混合和时要小心`$_POST`。MySQL 内置了可以处理这种类型转换的日期/时间函数。如果你使用绑定参数会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:43:05.430

更改您的 $to 和 $from 以使用一天的第一秒和一天的最后一秒：

```
$from = date("Y-m-d 0:0:0", strtotime($_GET['from']));
$to = date("Y-m-d 23:59:59", strtotitme($_GET['to'])); 
```

# python-3.x - Python程序中的索引错误

> ID：15751240
> 
> 赞同：-6
> 
> 时间：2013-04-01T20:26:14.453
> 
> 标签：python-3.x

我正在尝试创建一个程序，它告诉我一个数字的正方形是否有不同的数字。

我在很长的“if”行中有一个“索引错误”。我如何解决它？

```
a= 4486659

f= (a**2)

s= str(f)

for num in range (1089):
    if s[6]==s[7] or s[6]==s[8] or s[6]==s[9] or s[6]==s[10] or s[6]==s[11] or s[6]==s[12] or s[6]==s[13] or s[6]==s[14] or s[6]==s[15] or s[7]==s[8] or s[7]==s[9] or s[7]==s[10] or s[7]==s[11] or s[7]==s[12] or s[7]==s[13] or s[7]==s[14] or s[7]==s[15] or s[8]==s[9] or s[8]==s[10] or s[8]==s[11] or s[8]==s[12] or s[8]==s[13] or s[8]==s[14] or s[9]==s[10] or s[9]==s[11] or s[9]==s[12] or s[9]==s[13] or s[9]==s[14] or s[9]==s[15] or s[10]==s[11] or s[10]==s[12] or s[10]==s[13] or s[10]==s[14] or s[10]==s[15] or s[11]==s[12] or s[11]==s[13] or s[11]==s[14] or s[11]==s[15] or s[12]==s[13] or s[12]==s[14] or s[12]==s[15] or s[13]==s[14] or s[13]==s[15] or s[14]==s[15]:
        a= a+1
    else:
        print(a) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:47:16.627

索引错误是因为您的字符串 s 只有 14 个字符长，但您尝试访问 s[14] 和 s[15]

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-01-14T23:16:12.727

由于您不能调用字符串中不存在的项目，**请尝试以下**操作：
`if s[6]==s[7] or s[6]==s[8] or s[6]==s[9] or s[6]==s[10] or s[6]==s[11] or s[6]==s[12] or s[6]==s[13] or s[6]==s[14] or s[7]==s[8] or s[7]==s[9] or s[7]==s[10] or s[7]==s[11] or s[7]==s[12] or s[7]==s[13] or s[7]==s[14] or s[8]==s[9] or s[8]==s[10] or s[8]==s[11] or s[8]==s[12] or s[8]==s[13] or s[8]==s[14] or s[9]==s[10] or s[9]==s[11] or s[9]==s[12] or s[9]==s[13] or s[9]==s[14] or s[10]==s[11] or s[10]==s[12] or s[10]==s[13] or s[10]==s[14] or s[11]==s[12] or s[11]==s[13] or s[11]==s[14] or s[12]==s[13] or s[12]==s[14] or s[13]==s[14]:`

# sql - SQL Server“不能对包含聚合或子查询的表达式执行聚合函数”，但 Sybase 可以

> ID：15751241
> 
> 赞同：39
> 
> 时间：2013-04-01T20:26:23.233
> 
> 标签：sql, sql-server, aggregate, correlated-subquery

这个问题之前已经讨论过，但是没有一个答案能解决我的具体问题，因为我正在处理内部和外部选择中不同的 where 子句。此查询在 Sybase 下执行得很好，但在 SQL Server 下执行时会出现本文标题中的错误。查询很复杂，但查询的大致大纲是：

```
select sum ( t.graduates -
    ( select sum ( t1.graduates )
      from table as t1
      where t1.id = t.id and t1.group_code not in ('total', 'others' ) ) )
from table as t
where t.group_code = 'total' 
```

以下描述了我试图解决的情况：

*   除“总”和“其他”外，所有组代码均代表种族
*   组码“total”代表所有种族的毕业生总数
*   但是，缺少多种族，因此种族毕业生人数可能不会与毕业生总数相加
*   这个缺失的数据是需要计算的

无论如何使用派生表或连接重写它以获得相同的结果？

**更新：**我为我的具体问题创建了[示例数据和 3 个解决方案](http://sqlfiddle.com/#!6/1f8c9/1)（2 个受 sgeddes 影响）。我添加的一个涉及将相关子查询移动到 FROM 子句中的派生表。谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-04-01T20:29:49.740

一种选择是将子查询放在`LEFT JOIN`：

```
select sum ( t.graduates ) - t1.summedGraduates 
from table as t
    left join 
     ( 
        select sum ( graduates ) summedGraduates, id
        from table  
        where group_code not in ('total', 'others' )
        group by id 
    ) t1 on t.id = t1.id
where t.group_code = 'total'
group by t1.summedGraduates 
```

也许更好的选择是使用`SUM`with `CASE`：

```
select sum(case when group_code = 'total' then graduates end) -
    sum(case when group_code not in ('total','others') then graduates end)
from yourtable 
```

[两者都有的 SQL Fiddle 演示](http://sqlfiddle.com/#!3/104a0/3)

# apache - Apache 2.4“..身份验证失败..：密码不匹配”

> ID：15751242
> 
> 赞同：11
> 
> 时间：2013-04-01T20:26:25.607
> 
> 标签：apache, .htaccess, authentication, .htpasswd

我在 Windows Server 2008 R2 中运行 Apache 2.4。我正在尝试对子目录进行密码保护，并在 Apache 2.0 中成功地做到了这一点。升级后，我接受了 Apache 的建议，并尝试将身份验证配置放在 httpd.config 中。我允许读取密码文件，一切似乎都井井有条，但是当我测试它时，我收到以下错误：

[Mon Apr 01 19:58:36.438476 2013] [auth_basic:error] [pid 3984:tid 788] [client xxx.yyy.254.2:49253] AH01617：用户主：“/restricted/file.zip”的身份验证失败：密码不符合

但是，我知道我正在发送正确的密码。请参阅下面的配置，任何评论都会有所帮助。

```
<Directory "C:/www/mydir/restricted">
    #AllowOverride AuthConfig
    #Order allow,deny
    #Allow from all
    AuthType Basic
    AuthName Restricted
    AuthUserFile "C:/www/mydir/passwords/pass"
    Require valid-user
</Directory>  
<Directory "C:/www/mydir">
    Require all granted
</Directory>  
<VirtualHost *:80>
    ServerAdmin admin@.com
    DocumentRoot "C:/www/mydir"
    ServerName "fakeurl.com"
    ErrorLog "C:/www/mydir/logs/error.log"
    CustomLog "C:/www/mydir/logs/accesslog/access.log" common
</VirtualHost>  
<VirtualHost *:80>
    ServerAdmin admin@.com
    DocumentRoot "C:/www/mydir"
    ServerName "www.fakeurl.com"
    ErrorLog "C:/www/mydir/logs/error.log"
    CustomLog "C:/www/mydir/logs/accesslog/access.log" common
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-04T01:04:49.553

我只是遇到了同样的问题，在过去的一个小时里让我发疯。我可以确认史蒂夫关于在命令行中输入密码的建议有效 - 所以在我的情况下，“htpasswd -b passwordfile 用户密码”起到了作用。

[这](https://issues.apache.org/bugzilla/show_bug.cgi?id=54735)是 Apache 的相关错误报告。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-03T20:45:34.953

您是否使用“htpasswd”创建了密码？

httpd-2.4.4 中的 htpasswd 已损坏 ( [https://issues.apache.org/bugzilla/show_bug.cgi?id=54735](https://issues.apache.org/bugzilla/show_bug.cgi?id=54735) )。

据我了解，该问题特定于 httpd-2.4.4 中的 htpasswd，并且仅在您手动输入密码时才会发生，因此您可以通过执行以下操作之一解决该问题：

*   在命令行上提供密码（例如“htpasswd -b .htpasswd 用户密码”）；
*   使用httpd-2.4.3以外的htpasswd版本；
*   使用 Digest Authentication 而不是 Basic Authentication（htdigest 不受影响）；
*   等到 httpd-2.4.5 发布；
*   在错误报告中应用补丁（这似乎有效）并从源代码重建 htpasswd。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-13T16:23:36.713

如果您使用的是[Shibboleth](https://www.shibboleth.net)，则 mod_shib 和基本身份验证之间存在冲突。您可以使用以下 Apache 指令来解决它：

```
ShibCompatValidUser On 
```

有关详细信息，请参阅[使用混合身份验证方法的 Apache 2.4 上的 Shibboleth](https://tcg.stanford.edu/?p=162)

# iphone - 带有 'CGPDFDocumentRef == NULL' 的 NSInternalInconsistencyException

> ID：15751246
> 
> 赞同：4
> 
> 时间：2013-04-01T20:26:36.710
> 
> 标签：iphone, xcode, cocoa-touch, pdf, newsstand-kit

我正在构建一个报亭通用应用程序。当我下载杂志并打开它时，它运行良好，但是当我删除它，重新下载并打开它时，它会抛出以下内容：

```
2013-04-01 22:06:07.672 Magazine[14353:707] *** Assertion failure in -[ReaderContentPage initWithURL:page:password:], /Volumes/Files/Work in progress/el-beit/Magazine/Sources/ReaderContentPage.m:471
2013-04-01 22:06:07.680 Magazine[14353:707] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'CGPDFDocumentRef == NULL'
*** First throw call stack:
(0x35a4788f 0x3366b259 0x35a47789 0x34e3b3a3 0x84e59 0x85ba7 0x96d47 0x976ad 0x34e6d933 0x35a1ba33 0x35a1b699 0x35a1a26f 0x3599d4a5 0x3599d36d 0x33738439 0x33175cd5 0x6cf81 0x6cf08)
terminate called throwing an exception(lldb) 
```

我通过删除其问题来删除文件：

```
NKLibrary *nkLib = [NKLibrary sharedLibrary];
NKIssue *issue = [nkLib issueWithName:[kBaseFeatureID stringByAppendingString:((NSNumber *)self.listOfMonths[index]).stringValue]];
NSString *name = issue.name;
[nkLib removeIssue:issue];
[nkLib addIssueWithName:name date:[self.dateFormatter dateFromString:((NSNumber *)self.listOfMonths[index]).stringValue]]; 
```

我正在使用 Newsstand、iOS6、Xcode 4.6、MKStoreKit 和这个项目的模板：[https ://github.com/vfr/Reader](https://github.com/vfr/Reader)

读者似乎试图打开已删除的文件，而不是我给它的文件。

任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T12:28:10.530

我通过使用解决了这个问题

```
[[ReaderDocument alloc] initWithFilePath:file password:nil]; 
```

代替

```
[ReaderDocument withDocumentFilePath:file password:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T13:58:32.217

plist 文件是问题所在，当您删除 PDF 时，它并没有被自动删除。您必须确保所有 PDF 文件名都是唯一的，或者记得删除 Reader 根据 PDF 文件名自动生成的 plist 文件。

**例如 /appid/Library/Application Support/yourPdfFileName.plist**

每次删除 PDF 时都要这样做。它应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-25T10:23:25.267

我认为[这篇](https://stackoverflow.com/questions/13196337/xcode-with-vfr-reader-loading-pdf-mistake)文章可以解决你的问题。

我得到同样的错误，但来自不同的工作流程。如果我下载一个文件并将其保存到文件系统中，则会出现错误，但如果我将相同的文件添加到我的 AppBundle 中，它会毫无问题地显示出来。

我希望这会有所帮助，最终您对我的情况有什么建议。我认为这是因为同样的原因。

# ruby-on-rails - 是否有任何带有 RSpec 的完整的现实生活中的 Rails 项目？

> ID：15751250
> 
> 赞同：2
> 
> 时间：2013-04-01T20:26:42.257
> 
> 标签：ruby-on-rails, ruby, rspec, rspec2, rspec-rails

我正在学习 RSpec 并阅读一些文章、书籍和其他资源。但我想知道是否有任何完整的现实生活中的 Rails 项目，使用 RSpec，源代码可供检查。我研究了一些 gems 和 Ruby 项目，但我仍然认为最好看看 Rails 项目的源代码在运行中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T20:29:54.867

[Discourse](https://github.com/discourse/discourse)是一个大型的真实世界项目，你可以看看。

他们使用 RSpec，您可以[在此处](https://github.com/discourse/discourse/tree/master/spec)查看他们的所有测试代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-19T19:22:28.543

另一个使用 rspec 的大型开源 Rails 应用程序是 spree commerce [https://github.com/spree/spree](https://github.com/spree/spree)

# c# - 在 Windows Phone 8 中导航到同一页面

> ID：15751251
> 
> 赞同：4
> 
> 时间：2013-04-01T20:26:49.257
> 
> 标签：c#, navigation, windows-phone-8

在我的 WP8 应用程序中，我必须从一个页面导航到另一个页面，然后由于某些原因我需要重新加载同一页面。

MainPage.xaml --> Page1.xaml --> Page1.xaml --> Page1.xaml

当用户按后退键时，应返回“MainPage.xaml”页面。

我尝试使用`NavigationService.navigate()`导航，由于某种原因我无法重新加载页面。如果我通过导航 url 传递任何唯一的查询字符串（例如：Guid），我可以重新加载页面。但是，当我按下后退按钮时 - 它永远不会回到 Mainpage.xaml 页面。

有没有最好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T20:33:06.190

每次重新加载页面时传入一个查询字符串（例如您的随机 GUID）。在您的`OnNavigatedTo`方法上检查 GUID 查询字符串是否存在。如果它确实存在，您知道您不希望此页面出现在 上，`Navigation Stack`因为它是重新加载的版本，因此您可以通过调用[NavigationService.RemoveBackEntry](http://msdn.microsoft.com/en-US/library/windowsphone/develop/system.windows.navigation.navigationservice.removebackentry%28v=vs.105%29.aspx)将其删除。

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    string guid = string.Empty;
    if (NavigationContext.QueryString.TryGetValue("guid", out guid))
    {
       //guid exists therefore it's a reload, so delete the last entry
       //from the navigation stack
       if(NavigationService.CanGoBack)
          NavigationService.RemoveBackEntry();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T20:31:15.800

使用[`NavigationService.RemoveBackEntry`](http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationservice.removebackentry.aspx)方法删除最后一个导航堆栈条目。

您还可以从导航历史记录中删除所有元素：

```
while(service.CanGoBack)
    service.RemoveBackEntry(); 
```

然后添加你感兴趣的那个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-11T12:49:08.033

```
NavigationService.Navigate(new Uri("/MainPage.xaml?" + DateTime.Now.Ticks, UriKind.Relative)); 
```

您可以在控件下使用它来导航到同一页面

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-25T12:27:02.557

因为我找不到任何关于此的 Windows 10（通用应用程序 UWP UAP）问题，而这似乎是谷歌搜索重新加载页面的最佳结果，这里有一个解决方案：

```
NavigationService.Refresh(); 
```

我在我的应用程序上使用[模板 10](https://github.com/Windows-XAML/Template10/wiki)，所以我不知道这是否重要。该库将 NavigationService 封装在自己的 INavigationService 上

# javascript - 散点图：如何将系列名称转换为函数

> ID：15751254
> 
> 赞同：0
> 
> 时间：2013-04-01T20:26:53.680
> 
> 标签：javascript, jquery, highcharts, scatter-plot

所以我想在这组数据中调用“名称”，以便在脚本另一部分的函数中使用。

我可以通过使用调用ticker、x、info和hover变量

event.point.ticker, event.point.info

但我还没有弄清楚如何获得该系列的名称。我尝试了多种方法，例如...

series.name、this.series.name 和 event.point.name、this.chart.name

一切都无济于事。这是数据

```
series: 
[{
    name: 'Weak Outlook',color: 'red',data: 
    [{
        x: 40,
        y:10,
        ticker:'Michael Kors: (KORS)',
        info: 'Outlook roughly inline<br>1Q Revenue below street expectations', hover:'Guidance slightly below consensus<br>1Q Revenue to disappoint<br><a href="">read more</a>'
    },
    {
        x: 20,
        y:50,
        ticker:'Shares to sell off on earnings',
        info:'Data implies that shares, after management releases Q1 guidance, will...<br><br><a href="">read more</a>'
    },
    {
        x:0,y:0,ticker:'Zynga: (ZNGA)'
    },
    {
        x:3,y:4,ticker:'Avid: (AVID)'
    },
    {
        x:4,y:10,ticker:'JCPenny: (JCP)'
    },
    {
        x:6,y:25,ticker:'Deckers Outdoor: (DECK)'},
    {
        x:0,y:100,ticker:'Nutrisystem Corp: (NTRI)'
    },
]}], 
```

这是不起作用的函数，请注意我将事件和系列作为参数传递，并且我正在使用“series.name”来尝试获取系列的名称......这似乎不起作用

```
click: function(event,series) 
{
    xmlhttp.open("GET","/s.php?o="+event.point.ticker+"&q="+event.point.y+"&r="+event.point.x+"&s="+event.point.info+"&t="+series.name+"&u="+event.point.str5+"&v="+event.point.str6,true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:33:03.710

您希望`event.point.series.name` 每个点都包含对其父系列的引用。

*   [系列 API](http://api.highcharts.com/highcharts#Series.name)
*   [点 API](http://api.highcharts.com/highcharts#Point.series)

# jquery - 同位素仅在过滤或调整浏览器窗口大小后显示

> ID：15751256
> 
> 赞同：0
> 
> 时间：2013-04-01T20:26:58.657
> 
> 标签：jquery, wordpress, google-chrome, load, jquery-isotope

我正在使用[Metafizzy 的 Isotope](http://isotope.metafizzy.co/)来显示我的 wordpress 帖子，并且容器不会显示我的任何项目，直到我采取一些其他操作（如过滤或调整窗口大小）......然后它“唤醒”并像往常一样运行。这仅在 Chrome 中发生。有没有人经历过或知道解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-03T15:56:59.037

加载一个充满图像的页面时，我遇到了同样的问题。我只是将 Isotope 设置为在所有图像加载后运行：

```
$(function() {
    //on all images load

        $('img').on('load', function() {
            //Initialise Isotope
        });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T12:34:00.583

我刚才在使用 ZURB Foundation 4 创建 HTML 模板时遇到了同样的问题，在加载此页面之前，我通过在基础之前调用 isotope 并将同位素调用包装在窗口加载回调中来解决它，如下所示：

```
// Load Isotope on window load
$(window).load(function(){
    $('.portfolio-items').isotope({
        itemSelector:'.portfolio-item'
    });
});

// Loaded foundation after isotope
$(document).foundation('orbit', {timer_speed:5000,bullets:false,orbit_transition_class: 'orbit-transitioning'}); 
```

尝试将您的同位素调用包装在加载回调的窗口中，如果这不起作用，请尝试在任何其他 jquery 插件之前加载它，可能会发生冲突。

# python - 为什么这段代码不起作用？（Python 和 PyGame）

> ID：15751257
> 
> 赞同：1
> 
> 时间：2013-04-01T20:27:01.770
> 
> 标签：python, image, time, pygame, blit

```
import math, sys, os, pygame, random, time

pygame.init()
screen = pygame.display.set_mode((500,500))
pygame.display.set_caption('Tester.')
pygame.mouse.set_visible(0)

def smileMove():
    smiley = pygame.image.load('smiley.png')
    random.seed()
    xMove = random.randrange(1,501)
    yMove = random.randrange(1,501)

    screen.blit(smiley,(xMove,yMove))

c = 0

while c <5:
    smileMove()
    time.sleep(3)
    c = c + 1

pygame.quit() 
```

我对编程很陌生，我只是用 PyGame 尝试一些基本的东西。屏幕保持黑色，没有出现笑脸。我试图让面孔出现在黑色背景上，并每 3 秒更改到另一个随机位置，5 次然后退出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:39:15.330

您错过了`pygame.display.flip()`实际更新窗口内容的调用 - 将其放在您的`time.sleep`调用之前。

在尝试 Python 和 pygame API 的早期阶段，我的建议是在交互式控制台上尝试一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T03:06:34.043

首先，它需要在一个while循环中（至少如果你要做更多的话），你也错过了背景。这应该工作：

```
import math, sys, os, pygame, random, time

pygame.init()
screen = pygame.display.set_mode((500,500))
pygame.display.set_caption('Tester.')
pygame.mouse.set_visible(0)
white = ( 255, 255, 255)

def smileMove():
    screen.fill(white)
    smiley = pygame.image.load('smiley.png')
    random.seed()
    xMove = random.randrange(1,501)
    yMove = random.randrange(1,501)

    screen.blit(smiley,(xMove,yMove))

c = 0
done = False
while done==False:
    for event in pygame.event.get(): # User did something
        if event.type == pygame.QUIT: # If user clicked close
            done=True # Flag that we are done so we exit this loop

    screen.fill(white)
    while c <5:
        smileMove()
        pygame.display.flip()
        c = c + 1
        time.sleep(3)
pygame.quit() 
```

# eclipse - 有清除logcat的命令吗？

> ID：15751262
> 
> 赞同：5
> 
> 时间：2013-04-01T20:27:11.820
> 
> 标签：eclipse, shortcut

我厌倦了用按钮清除它。使用命令会更容易，或者自动。是否有在 ECLIPSE 中清除它的命令？我的意思是，不是 CMD 中的命令，而是 eclipse 中的快捷方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:35:25.400

使用命令行，编写以下命令：

```
adb logcat -c 
```

我希望它能完成这项工作:)

# asp.net-mvc - 由于 System.Web.Mobile 程序集，MVC 2 应用程序失败

> ID：15751264
> 
> 赞同：1
> 
> 时间：2013-04-01T20:27:13.883
> 
> 标签：asp.net-mvc, mobile, asp.net-mvc-2

我正在开发一个当前使用 MVC 2 的旧版 Web 应用程序，由于它尝试加载 System.Web.Mobile 4.0.0.0 并失败，因此无法在运行时加载。我找不到我们的解决方案引用该程序集的任何项目，并且 Fusion 绑定日志显示以下内容：

```
LOG: DisplayName = System.Web.Mobile, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
 (Fully-specified)
LOG: Appbase = file:///C:/inetpub/wwwroot/ReportViewer/
LOG: Initial PrivatePath = C:\inetpub\wwwroot\ReportViewer\bin
LOG: Dynamic Base = C:\Windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\reportviewer\46e43c05
LOG: Cache Base = C:\Windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\reportviewer\46e43c05
LOG: AppName = 709d1cbc
Calling assembly : (Unknown). 
```

我尝试将特定版本强制为 2.0.0.0，在发布时将 dll 复制到本地...在 web.config 文件中添加特定版本。

似乎没有任何效果。

任何想法/建议将不胜感激。

# applescript - 在 AppleScript 中读取文件

> ID：15751267
> 
> 赞同：1
> 
> 时间：2013-04-01T20:27:21.590
> 
> 标签：applescript

我正在尝试将 html 文件读入 AppleScript 中的变量，我有以下代码。

```
tell application "Finder"
    set theItems to every file of folder folderName
    repeat with theFile in theItems
        open for access theFile
        set fileContents to (read theFile)
    end repeat
end tell 
```

现在我收到如下错误：

```
Finder got an error: Can’t make document file "index.html" of folder 
[...] of startup disk into type «class fsrf». 
```

我究竟做错了什么？我按照[这个](http://osxdeveloper.wordpress.com/2009/08/08/reading-a-text-file-into-an-applescript-variable/)例子。HTML 文件不被识别为文本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T21:53:24.460

您必须将 Finder 文件对象转换为别名或文本。

`read`无需单独的打开或关闭命令即可使用。它以 MacRoman 的形式读取文件，但没有`as «class utf8»`。（`as Unicode text`是 UTF-16。）

```
tell application "Finder" to files of folder "HD:Users:lauri:Sites" as alias list
repeat with f in result
    read f as «class utf8»
end repeat 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T21:05:40.373

尝试：

```
tell application "Finder" to set theItems to every file of folder folderName
repeat with theFile in theItems
    set aFile to POSIX path of (theFile as text)
    set fileContents to do shell script "cat " & quoted form of aFile
end repeat 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T10:32:47.720

从您的原始代码开始，应该这样做：

```
set folderPath to choose folder
set someData to ""
tell application "Finder"
    set theItems to every file of folder folderPath as list
    repeat with theFile in theItems
        set theFilePath to theFile as text
        if characters -5 thru -1 of theFilePath as string is ".html" then
            set theFileHandle to (open for access file theFilePath)
            set fileContents to (read theFileHandle)
            -- for testing, call some function
            set someData to someData & return & processHtml(fileContents) of me
            close access theFileHandle
        end if
    end repeat
    -- do something with someData here
    return someData
end tell

on processHtml(theData)
    -- do something with theData here
    return theData
end processHtml 
```

正如 Lauri 所写，您可以添加“as «class utf8»”以将文件读取为 UTF8。您还可以将“作为 Unicode 文本”用于 UTF16。就个人而言，我喜欢这个，因为它是普通的 AppleScript，不需要 shell 脚本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-11T09:55:49.813

使用开放访问确实很难做到。

如果您想使用 AppleScript 读取 HTML 文件，那么最好的方法是使用 AppleScript 告诉 HTML 编辑器为您读取 HTML 文件。这是 AppleScript 工作的基本方式。这就是为什么“告诉”是最重要的命令。这就是为什么您只需 3 行就可以实现将 HTML 文件读入变量的目标：

```
tell application "BBEdit"
    open (choose file)
    set theHTMLSource to the text of document 1
    close document 1
end tell 
```

以下脚本扩展了上述内容，以从所选文件夹中读取任意数量的 HTML 文件。它适用于 BBEdit 9，也应该适用于 BBEdit 的免费版本，称为“TextWrangler”，可在 Mac App Store 中获得。或者，您可以相当轻松地调整此脚本以与 HyperEdit 或 TextEdit 或您喜欢使用的任何 AppleScript 感知 HTML/文本编辑器一起使用。

```
tell application "Finder"
    set theFolder to (choose folder)
    set theFiles to every file of folder theFolder
    set theHTMLSourceList to {}
    repeat with theFile in theFiles
        if the kind of theFile is equal to "HTML document" then
            set theName to the name of theFile
            tell application "BBEdit"
                open file (theFile as text)
                set theSource to the text of document 1
                copy {theName, theSource} to the end of theHTMLSourceList
                close document 1
            end tell
        end if
    end repeat
end tell 
```

完成上述脚本后，变量“theHTMLSourceList”将填充整个 HTML 文档文件夹的名称和源代码，如下所示：

```
{{name of file 1, source of file 1}, {name of file 2, source of file 2}, {name of file 3, source of file 3}} 
```

... 等等，最多可包含任意数量的文件。但当然，您可以让脚本以您喜欢的任何方式将 HTML 源返回给您。关键是AppleScript 感知HTML 编辑器既可以读取HTML 又可以设置AppleScript 变量，因此您不必在微小的AppleScript 中编写（以及调试和维护）您自己的HTML 阅读器。

# flash - 使用移动设备初始化现有的 Web 应用程序

> ID：15751269
> 
> 赞同：0
> 
> 时间：2013-04-01T20:27:23.517
> 
> 标签：flash, apache-flex, air

我已经创建了一个工作 web/桌面应用程序 om flash builder 4.6，并将所有代码移到一个库中，除了初始化应用程序的主 mxml。现在我需要使用共享库构建一个移动版本。如何使用手机初始化应用程序？在这种情况下，手机是android。

这是初始化网络/桌面版本的代码，我基本上需要这个的移动版本：

```
 <?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" width="800"     minHeight="600"
               backgroundColor="0x000000"     applicationComplete="initialApplication()">

            <![CDATA[
                import com.dga.MainStage;

            private function initialApplication():void {

                var mainStage:MainStage = new MainStage();
                this.addElement(mainStage);
            }
        ]]> 
</s:Application> 
```

# .htaccess - 从 .htaccess 重写中排除文件或目录

> ID：15751273
> 
> 赞同：1
> 
> 时间：2013-04-01T20:27:48.193
> 
> 标签：.htaccess

您的回复很好，帮助我解决了 GoDaddy 上的 .htaccess 问题。这是您提供的代码：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

## hide .php extension
# To externally redirect /dir/foo.php to /dir/foo
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R,L,NC]

## To internally redirect /dir/foo to /dir/foo.php
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^ %{REQUEST_URI}.php [L] 
```

问题：如何排除文件和/或目录被重写？

谢谢！大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T21:57:14.573

假设您不想重定向`/ignore.php`. 像这样修改上面的代码：

```
## hide .php extension
# To externally redirect /dir/foo.php to /dir/foo
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteCond %{REQUEST_URI} !^/ignore\.php$ [NC]
RewriteRule ^ %1 [R,L,NC]

## To internally redirect /dir/foo to /dir/foo.php
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteCond %{REQUEST_URI} !^/ignore$ [NC]
RewriteRule ^ %{REQUEST_URI}.php [L] 
```

# magento - Paypal token null，一步结账 Magento

> ID：15751274
> 
> 赞同：2
> 
> 时间：2013-04-01T20:27:49.527
> 
> 标签：magento, paypal

嗨，我正在使用一步结帐方法构建自定义结帐页面。

```
$checkout->initCheckout();
$checkout->saveCheckoutMethod('guest');
$checkout->saveBilling($billingAddress, false);
$checkout->saveShipping($billingAddress, false);
$checkout->saveShippingMethod($postData['shipping']['method']);
$checkout->savePayment($postData['payment']);
$checkout->saveOrder(); 
```

它可以正常使用支票/货币并在使用 authorize.net 进行一些调整后，但是在签入模型文件后使用 paypal 使用快速结帐（这是我需要的）我看到令牌为空。

```
app/code/core/Mage/Paypal/Model/Express/Checkout.php
app/code/core/Mage/Paypal/Model/Api/Nvp.php
app/code/core/Mage/Paypal/Model/Express.php 
```

这些是我在执行此过程时跟踪的文件。

使用常规的 chekout（magento 随附的不是我的自定义），我可以毫无问题地进行 paypal 订单。

还有另一种使用magento内置功能来制作paypal订单的方法吗？或者任何人以前遇到过这个问题并且知道发生了什么？

# ruby-on-rails - Rails 模型实例只能通过控制台创建

> ID：15751275
> 
> 赞同：1
> 
> 时间：2013-04-01T20:28:01.357
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rails-activerecord, rails-console

我一直在关注创建 Rails 博客的教程（[http://www.roberthuberdeau.com/articles/4-How-to-create-a-blog-in-Ruby-on-Rails-3](http://www.roberthuberdeau.com/articles/4-How-to-create-a-blog-in-Ruby-on-Rails-3)）并且基本上一直到最后。

然而，经过所有的迁移，我现在正在苦苦挣扎。每当我填写以前用于创建文章的表格时，我都无法在索引页面上看到它们。我已经挖掘并相信错误的根源是当我按下“创建文章”时我没有保存任何文章。

为了测试这一点，我使用控制台创建了一篇文章，这看起来应该如此，所以我认为问题出在创建文章的表单和控制器之间（尽管很高兴对此进行更正）。

每当我尝试时，日志中都会出现以下内容：

```
Started POST "/articles" for 127.0.0.1 at 2013-04-01 21:12:58 +0100
Processing by ArticlesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"XLeHm+4Tgd6n9vt4RxAQ5YVTbWTi+UnqkmBso9Iuo+4=", "article"=>{"title"=>"I rule", "body"=>"Change teams.", "tag_names"=>"kill", "published"=>"1"}, "commit"=>"Create Article"}
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Role Load (0.1ms)  SELECT "roles".* FROM "roles" INNER JOIN "roles_users" ON "roles"."id" = "roles_users"."role_id" WHERE "roles_users"."user_id" = 1 AND "roles"."name" = 'Admin' LIMIT 1
  Role Load (0.1ms)  SELECT "roles".* FROM "roles" INNER JOIN "roles_users" ON "roles"."id" = "roles_users"."role_id" WHERE "roles_users"."user_id" = 1 AND "roles"."name" = 'Moderator' LIMIT 1
  Role Load (0.1ms)  SELECT "roles".* FROM "roles" INNER JOIN "roles_users" ON "roles"."id" = "roles_users"."role_id" WHERE "roles_users"."user_id" = 1 AND "roles"."name" = 'Member' LIMIT 1
Redirected to http://localhost:3000/
Completed 302 Found in 5ms (ActiveRecord: 0.5ms) 
```

使用数据库模式：

```
ActiveRecord::Schema.define(:version => 20130401171646) do

  create_table "articles", :force => true do |t|
    t.string   "title"
    t.text     "body"
    t.datetime "created_at",                    :null => false
    t.datetime "updated_at",                    :null => false
    t.integer  "user_id",                       :null => false
    t.boolean  "published",  :default => false
  end

  create_table "comments", :force => true do |t|
    t.integer  "article_id"
    t.string   "name"
    t.string   "email"
    t.text     "body"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "roles", :force => true do |t|
    t.string   "name"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "roles_users", :id => false, :force => true do |t|
    t.integer "role_id"
    t.integer "user_id"
  end

  create_table "taggings", :force => true do |t|
    t.integer  "article_id"
    t.integer  "tag_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "tags", :force => true do |t|
    t.string   "name"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "users", :force => true do |t|
    t.string   "email",                  :default => "", :null => false
    t.string   "encrypted_password",     :default => "", :null => false
    t.string   "reset_password_token"
    t.datetime "reset_password_sent_at"
    t.datetime "remember_created_at"
    t.integer  "sign_in_count",          :default => 0
    t.datetime "current_sign_in_at"
    t.datetime "last_sign_in_at"
    t.string   "current_sign_in_ip"
    t.string   "last_sign_in_ip"
    t.datetime "created_at",                             :null => false
    t.datetime "updated_at",                             :null => false
  end

  add_index "users", ["email"], :name => "index_users_on_email", :unique => true
  add_index "users", ["reset_password_token"], :name => "index_users_on_reset_password_token", :unique => true

end 
```

文章控制器：

```
class ArticlesController < ApplicationController
  before_filter :authenticate_user!, :except => [:index, :show]
  # GET /articles
  # GET /articles.xml
  def index
    @articles = Article.published.page(params[:page]).per(5).ordered

    respond_to do |format|
      format.html # index.html.erb
      format.xml  { render :xml => @articles }
    end
  end

  # GET /articles/1
  # GET /articles/1.xml
  def show
    @article = Article.find(params[:id])
    @comment = Comment.new(:article=>@article)

    respond_to do |format|
      format.html # show.html.erb
      format.xml  { render :xml => @article }
    end
  end

  # GET /articles/new
  # GET /articles/new.xml
  def new
    @article = Article.new

    respond_to do |format|
      format.html # new.html.erb
      format.xml  { render :xml => @article }
    end
  end

  # GET /articles/1/edit
  def edit
    @article = Article.find(params[:id])
    authorize! :edit, @article
  end

  # POST /articles
  # POST /articles.xml
  def create
    authorize! :create, @article
    @article = Article.new(params[:article])
    @article.user_id = current_user.id

    respond_to do |format|
      if @article.save
        format.html { redirect_to(@article, :notice => 'Article was successfully created.') }
        format.xml  { render :xml => @article, :status => :created, :location => @article }
      else
        format.html { render :action => "new" }
        format.xml  { render :xml => @article.errors, :status => :unprocessable_entity }
      end
    end
  end

  # PUT /articles/1
  # PUT /articles/1.xml
  def update
    @article = Article.find(params[:id])
    authorize! :update, @article
    respond_to do |format|
      if @article.update_attributes(params[:article])
        format.html { redirect_to(@article, :notice => 'Article was successfully updated.') }
        format.xml  { head :ok }
      else
        format.html { render :action => "edit" }
        format.xml  { render :xml => @article.errors, :status => :unprocessable_entity }
      end
    end
  end

  # DELETE /articles/1
  # DELETE /articles/1.xml
  def destroy
    @article = Article.find(params[:id])
    authorize! :destroy, @article
    @article.destroy

    respond_to do |format|
      format.html { redirect_to(articles_url) }
      format.xml  { head :ok }
    end
  end

end 
```

文章型号：

```
class Article < ActiveRecord::Base
  attr_accessible :body, :title, :tag_names
  has_many :comments, :dependent => :destroy
  has_many :taggings, :dependent => :destroy
  has_many :tags, :through => :taggings
  validates_presence_of :title, :body
  validates_uniqueness_of :title
  attr_writer :tag_names
  after_save :assign_tags
  validates_numericality_of :user_id  
  belongs_to :user
  scope :published, lambda {{:conditions => ['published = ?', true]}}
  scope :ordered, lambda {{:order => "Created_at DESC" }}
  def tag_names
    @tag_names || tags.map(&:name).join(' ')
  end

  private

  def assign_tags
    if @tag_names
      self.tags = @tag_names.split(/\,/).map do |name|
        Tag.find_or_create_by_name(name)
      end
    end
  end
end 
```

以及用于创建文章的部分表单：

```
<%= form_for(@article) do |f| %>
  <% if @article.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@article.errors.count, "error") %> prohibited this article from being saved:</h2>

      <ul>
      <% @article.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :title %><br />
    <%= f.text_field :title %>
  </div>
  <div class="field">
    <%= f.label :body %><br />
    <%= f.text_area :body %>
  </div>
  <div class="field">
    <%= f.label :tag_names, "Tags" %>  
    <%= f.text_field :tag_names %>  
  </div>
  <div class="field">
    <%= check_box("article", "published" ) %>
    <%= "Publish article" %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

您可以在这方面给我的任何帮助将不胜感激。

按要求：

能力.rb

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user

    if user.role? :Admin
      can :manage, :all
      can :publish, Article
    elsif user.role? :Moderator
      can :read, [Article, Comment]
      can [:edit, :update], Comment
    elsif user.role? :Member
       can :read, :all
       can :create, [Article, Comment]
       can [:edit, :update], Comment
    end
  end
end 
```

ps 我能看到的唯一其他错误（我不知道它是否相关或完全不同的问题）是在尝试查看文章时（show.html.erb）我收到以下错误：

```
Processing by ArticlesController#show as HTML
  Parameters: {"id"=>"1"}
  Article Load (0.2ms)  SELECT "articles".* FROM "articles" WHERE "articles"."id" = ? LIMIT 1  [["id", "1"]]
Completed 500 Internal Server Error in 44ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: article):
  app/controllers/articles_controller.rb:18:in `new'
  app/controllers/articles_controller.rb:18:in `show' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:45:13.923

我猜 . 中的`authorize! :create, @article`行有问题`ArticleController.create`。在执行时，`@article`尚未创建。

从 CanCan 来源来看，我认为以下内容可能会满足您的要求：

```
def create
   authorize! :create, Article
   @article = Article.new(params[:article])
   @article.user_id = current_user.id
   ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:55:52.343

这篇文章没有因此而被创建。

`authorize! :create, @article`

你必须向我们展示你的能力模型，ability.rb。

您可能还想尝试显而易见的事情。`bundle install`并重新启动服务器。

# apache-flex - 不能皮肤 DateSpinner

> ID：15751276
> 
> 赞同：0
> 
> 时间：2013-04-01T20:28:02.467
> 
> 标签：apache-flex

我在 Adob​​e AIR 桌面应用程序中有以下 mxml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark"
xmlns:dns="flash.net.dns.*">

 <fx:Declarations>   
 </fx:Declarations>

 <fx:Script>    
 </fx:Script>

 <s:layout>
    <s:VerticalLayout horizontalAlign="center" />
 </s:layout>

 <s:DateSpinner id="ds"
               selectedDate="{new Date(2010, 11, 15)}"
               minDate="{new Date(2000, 0, 1)}"
               maxDate="{new Date(2200, 11, 31)}"
               minuteStepSize="5" />

 <!-- toggle between different display modes -->
 <s:HGroup>
    <s:Button label="Date" 
              click="ds.displayMode = DateSelectorDisplayMode.DATE" />
    <s:Button label="Time" 
              click="ds.displayMode = DateSelectorDisplayMode.TIME" />
    <s:Button label="Date and Time" 
              click="ds.displayMode = DateSelectorDisplayMode.DATE_AND_TIME" />
 </s:HGroup>

</s:Application> 
```

当我在 adl 中运行它时，我收到以下消息：

错误：找不到 Flex_AIR_Test.ApplicationSkin2._ApplicationSkin_Group1.contentGroup.ds 的皮肤。

错误：找不到 Flex_AIR_Test.ApplicationSkin2._ApplicationSkin_Group1.contentGroup.ds 的皮肤。

DVFreeThread - CFMachPortCreateWithPort hack = 0x179cc0，fPowerNotifyPort= 0x17a5e0 DVFreeThread - CFMachPortCreateWithPort hack = 0x181190，fPowerNotifyPort= 0x1800b0

如何包含 DateSpinner 的默认皮肤？我的 FDT 项目中包含以下 swc：

```
mobile.swc [frameworks/themes/Mobile/mobile.swc]
airglobal.swc [frameworks/libs/air/airglobal.swc]
framework.swc [frameworks/libs/framework.swc]
spark.swc [frameworks/libs/spark.swc]
mobilecomponents.swc [frameworks/libs/mobile/mobilecomponents.swc] 
```

我是否需要以特定顺序包含它们或启用“用作运行时共享代码”复选框？

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:38:11.373

DateSpinner 是一个仅限移动设备的组件。

您必须将移动主题 SWC 指定为编译器参数，像这样？

```
-theme="C:\flexSDK\frameworks\themes\Mobile\mobile.swc 
```

您可以使用编译器参数指定两个主题；但它可能会导致其他问题，因为现在您的应用程序组件将“猜测”哪个主题是合适的。

# python - 将 pandas MultiIndex DataFrame 从行转换为列

> ID：15751283
> 
> 赞同：8
> 
> 时间：2013-04-01T20:28:44.230
> 
> 标签：python, pandas, multi-index, zipline

我正在使用 zipline 和 pandas 并已使用该方法将 a 转换`pandas.Panel`为 a 。如您所见，这是多索引的结果：`pandas.DataFrame``to_frame()``pandas.DataFrame`

```
 price
major                     minor                
2008-01-03 00:00:00+00:00 SPY    129.93
                          KO      26.38
                          PEP     64.78
2008-01-04 00:00:00+00:00 SPY    126.74
                          KO      26.43
                          PEP     64.59
2008-01-07 00:00:00+00:00 SPY    126.63
                          KO      27.05
                          PEP     66.10
2008-01-08 00:00:00+00:00 SPY    124.59
                          KO      27.16
                          PEP     66.63 
```

我需要将此框架转换为如下所示：

```
 SPY     KO     PEP
2008-01-03 00:00:00+00:00 129.93  26.38  64.78
2008-01-04 00:00:00+00:00 126.74  26.43  64.59
2008-01-07 00:00:00+00:00 126.63  27.05  66.10
2008-01-08 00:00:00+00:00 124.59  27.16  66.63 
```

我已经尝试过 pivot 方法、stack/unstack 等，但这些方法不是我想要的。在这一点上我真的很困惑，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-01T20:45:08.580

因为您已经有一个 MultiIndex，`stack`并且`unstack`您想使用它来将行移动到 cols，反之亦然。话虽这么说，`unstack`应该做你想要完成的事情。如果你有一个 DataFrame`df`那么`df2 = df.unstack('minor')`应该做的伎俩。或者更简单地说，因为默认情况下`stack`/`unstack`使用最内层，`df2 = df.unstack()`.

# html - 如何让浏览器以与内联 css 相同的优先级处理文件中的 css？

> ID：15751284
> 
> 赞同：1
> 
> 时间：2013-04-01T20:28:46.590
> 
> 标签：html, css

当我将 css`<style></style>`直接放入 HTML 中的标签时，它胜过加载的文件中的任何 css：

```
<link href="foo1.css"rel="stylesheet" type="text/css" /> 
```

但我不希望 html 中有任何内联样式。所以我将 css 移动到一个名为 foo2.css 的文件中，并且有：

```
<link href="foo1.css"rel="stylesheet" type="text/css" /> 
<link href="foo2.css"rel="stylesheet" type="text/css" /> 
```

我也试过：

```
<link href="foo2.css"rel="stylesheet" type="text/css" /> 
<link href="foo1.css"rel="stylesheet" type="text/css" /> 
```

改变顺序。但这似乎不起作用。我如何告诉浏览器像对待内联样式一样对待 foo2.css？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:39:19.223

## 不要使用`!important`

你以后会后悔的。相反，使用更强的选择器。

```
.weakSelector { }
div.strongerSelector { }
#strongSelector { }
div#superStrongSelector { }
html > body > div.wrapper > div.content > section > article > p > a:link#superUltraMegaStrongSelector { } 
```

如果您使用相同的选择器，则更强的选择器是文档中稍后出现的选择器。

使用开发者工具（提示：`F12`在任何浏览器中点击）查看哪个选择器胜出，并使您的选择器更强大。

IE 开发工具中的“Trace Styles”选项卡对于识别更强的选择器特别有用：

![IE 开发工具](https://i.stack.imgur.com/GZSLY.jpg)

Chrome 的开发工具还会向您展示样式的来源，但有时您必须滚动并寻找它。

![Chrome 开发工具](https://i.stack.imgur.com/lTbMg.jpg)

而且，当然，还有萤火虫 ( `HTML > Style > Show applied styles`) 但没有更多的屏幕截图......你明白了。;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T20:31:53.463

您在 CSS 文档中将 !important 放在分号之前

```
div {
    width:100px !important;
} 
```

这将覆盖所有 CSS，包括内联。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T20:44:17.277

`!important`只能作为最后的手段使用。真正的目标应该是增加 foo2.css 样式的特异性，因为这是浏览器决定使用哪种样式的方式。

如果没有看到您的代码，就不可能肯定地说，但是`.container`如果您有一个类，或者如果没有一致的容器，那么您可能只是在 foo2.css 中的每个样式之前添加一个前缀，或者如果没有一致的容器，那么您可以在所有样式的前面加上`body`so它们比 foo1.css 样式更具体，强制使用它们。

使用 !important 或通用前缀并不是构建新站点的最佳方法，但如果这是删除内联样式的最简单方法，那么在允许浏览器缓存您的样式的同时，大幅提高可维护性是值得的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T21:53:11.053

如果您的内联样式如下：

```
<section style="text-align: left; width: 50%; float: right;">
    blah
</section> 
```

我会在 HTML 代码中添加泛型类：

```
<section style="txtleft w50 right">
    blah
</section> 
```

和匹配的 CSS 辅助规则：

```
.txtleft {
    text-align: left !important;
}

.w50 {
    width: 50%;
}
.w200p {
    width: 200px;
}

.right {
    float: right !important;
} 
```

结构和样式没有更严格的分离，但它仍然比内联样式更好，并且类是不言自明的（通过阅读 HTML 代码可以看到结构和主要样式，更新样式就像在其中删除/添加类一样简单）。
我补充说`!important`，因为意图`.txtleft`很`.right`明确：如果我添加这些类之一，我确实希望应用相关指令，否则我不会添加它，就这么简单。如果没有`!important`，任何比类更具体的选择器（或与类一样具体但在这些规则之后编写）将被应用而不是这些选择器。
`.w50`是另一种情况：根据经验，您可能需要覆盖较小版本的 IE 或`@media`响应式网页设计规则的宽度，因此添加`!important`会迫使你在任何地方添加它，你会重新添加越来越多的特异性......嗯。

# grails - 从 zip 文件安装 grails 插件的正确方法是什么？

> ID：15751285
> 
> 赞同：7
> 
> 时间：2013-04-01T20:28:48.687
> 
> 标签：grails, plugins

在最新版本的 Grails[`install-plugin`](http://grails.org/doc/2.2.x/ref/Command%20Line/install-plugin.html)命令中已被弃用。现在推荐的安装插件的方法是通过某些存储库不可用的。假设插件仅在本地作为 zip 文件可用，例如在运行之后`grails package-plugin`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-02T06:16:23.200

我认为最简单的方法是将 zip 文件放在项目的 lib 文件夹中，然后在 BuildConfig.groovy 中添加一个条目。例如：

```
1\. 'grails-image-tools-1.0.5.zip' placed in lib.
2\. runtime ":grails-image-tools:1.0.5" added to BuildConfig.groovy 
```

由于依赖管理器也会查看项目的 lib 文件夹，因此我不必担心设置任何路径等。

**编辑：** 我工作的最新 Grails 版本是 2.1.1。我无法检查，但根据@Saurabh 下面的评论，这不适用于 Grails 2.4.3

**EDIT2：** 但@Jay 说它适用于 2.4.5

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T21:28:40.603

我不知道这是否是***正确的方法***，但我们让它工作：

1.  下载插件并将其解压缩到项目中的目录中
2.  更改您的`BuildConfig.groovy`文件以指向新插件

示例：下载 webflow.zip 插件并将其解压缩到`plugins`项目中的目录中。`BuildConfig`在文件末尾添加这一行

```
grails.plugin.location."webflow" = "plugins/webflow" 
```

# maven - 无法为可以从单独作业中读取的文件写入正确的文件路径

> ID：15751288
> 
> 赞同：0
> 
> 时间：2013-04-01T20:29:01.580
> 
> 标签：maven, jenkins, filepath, jobs

我使用 maven 项目并使用 Jenkins 运行它文件路径有问题：我将一些信息从一项作业写入项目根目录中的文件。然后我运行另一个工作，我需要从创建的文件中获取信息。但我无法得到它，从第二个作业打开的文件是空的。请帮我解决这个问题 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:17:44.773

Jenkins 作业的工作区目录是短暂的，即当您运行新版本的作业时，它会被删除和重写。如果你想从一个工作中保存一个文件供另一个使用，请使用 Jenkins 的工件归档功能；这是一个[解释一切的博客文章](http://zeroturnaround.com/labs/jenkins-protip-artifact-propagation/)。

# maps - 创建一个路线应用程序，用户可以在其中通过删除他们选择的高速公路和命名道路来优化他们的搜索

> ID：15751290
> 
> 赞同：-3
> 
> 时间：2013-04-01T20:29:03.750
> 
> 标签：maps

我想创建一个应用程序，用户可以在其中获取方向，但他们可以选择避开具有特定名称的高速公路和/或道路/高速公路。在谷歌地图上，您可以轻松区分高速公路（橙色）、主要路线（黄色）和道路（白色），因此谷歌必须能够区分它们。道路和高速公路也都在谷歌地图中命名。我想让用户能够通过删除高速公路、路线、乡村道路和/或命名道路（如果他们愿意的话）来优化他们的方向搜索。有人可以指出我正确的方向（没有双关语）使这个想法可行吗？谷歌地图 API 是否允许我们调整方向的计算方式？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:40:02.067

该 API 将让您避开高速公路或收费站，但没有具体命名的路线。请参阅[https://developers.google.com/maps/documentation/directions/#DirectionsRequests](https://developers.google.com/maps/documentation/directions/#DirectionsRequests)

# ruby-on-rails - Rails css 没有预编译

> ID：15751291
> 
> 赞同：0
> 
> 时间：2013-04-01T20:29:07.110
> 
> 标签：ruby-on-rails

我正在尝试使用 gem 'gem 'rails_admin_nestable' 对启用祖先的表进行排序。它在开发中运行良好，但在生产中出现以下错误：

ActionView::Template::Error (rails_admin/rails_admin_nestable.css 未预编译): 5: = nested_tree_nodes @tree_nodes 6: 7: 8: = stylesheet_link_tag 'rails_admin/rails_admin_nestable' 9: = javascript_include_tag 'rails_admin/jquery.nestable' 10 : = javascript_include_tag 'rails_admin/rails_admin_nestable'

我的 application.css 中有这一行

```
 *= require rails_admin/rails_admin_nestable 
```

这是一张照片：

![在此处输入图像描述](https://i.stack.imgur.com/fryJW.png)

我认为我不需要将样式表复制到 app/assets/stylesheets 中，因为我认为 gem 会加载它。

但是，我继续把它放在那里，我仍然得到同样的错误。

谢谢 ！！

PS - 我正在使用 RubyMine 来编辑我的应用程序。在目录列表的底部，它有“外部库”。我以为我会在这个列表的某个地方看到上面的样式表——但是，我没有看到它。

# php - 我怎样才能正确地评价这个 PHP 代码？

> ID：15751294
> 
> 赞同：-11
> 
> 时间：2013-04-01T20:29:20.720
> 
> 标签：php, comments

我有这个代码：

```
<?php do_action('twentytwelve_credits'); ?>

<a href="<?php echo esc_url(__('http://wordpress.org/', 'twentytwelve')); ?>" 
   title="<?php esc_attr_e('Semantic Personal Publishing Platform', 'twentytwelve'); ?>"
><?php printf(__('Proudly powered by %s', 'twentytwelve'), 'WordPress'); ?></a> 
```

我应该如何评价它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T20:31:56.357

```
<?php
    echo 'This is a test'; // This is a one-line c++ style comment
    /* This is a multi line comment
       yet another line of comment */
    echo 'This is yet another test';
    echo 'One Final Test'; # This is a one-line shell-style comment
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:33:01.150

取决于您是否希望将评论传播到浏览器：

```
<?php 
/* This very interesting comment won't show in the content sent to the browser
 */
do_action( 'twentytwelve_credits' ); 
// or some end of line comment, not forwarded to the browser either
?>
<!--
But this one will
-->
<a href="<?php echo esc_url( __( 'http://wordpress.org/', 'twentytwelve' ) ); ?>" title="<?php esc_attr_e( 'Semantic Personal Publishing Platform', 'twentytwelve' ); ?>"><?php printf( __( 'Proudly powered by %s', 'twentytwelve' ), 'WordPress' ); ?></a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T20:30:31.687

像这样：

```
<?php /*do_action( 'twentytwelve_credits' ); ?>
        <a href="<?php echo esc_url( __( 'http://wordpress.org/', 'twentytwelve' ) ); ?>" title="<?php esc_attr_e( 'Semantic Personal Publishing Platform', 'twentytwelve' ); ?>"><?php printf( __( 'Proudly powered by %s', 'twentytwelve' ), 'WordPress' ); ?></a>
*/ ?> 
```

但我通常会删除或替换整个块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T20:31:24.390

```
/* multi-line quote */ 
```

对于单行引号，只需在其前面键入一个井号 ( `#`) 或双斜线 ( `//`)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T20:33:03.237

在 PHP 中有多种注释方式：

```
/* INFO */ for multiline comments
# INFO  for single-line comments
// INFO for single-line comments 
```

# google-app-engine - 有没有办法在应用引擎全文搜索中赋予某些文档字段权重？

> ID：15751304
> 
> 赞同：5
> 
> 时间：2013-04-01T20:30:10.503
> 
> 标签：google-app-engine, full-text-search

在我的应用程序中，我希望搜索 API 对`name`字段中的匹配项进行评估，高于其他字段中的匹配项。

用户还可以填写“关于”消息，其中包含更多文本，因此更有可能在那里发生匹配。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-23T21:47:39.503

SortExpression ( [https://developers.google.com/appengine/docs/python/search/sortexpressionclass](https://developers.google.com/appengine/docs/python/search/sortexpressionclass) ) 提供了一种基于特定表达式设置排序的方法，但它仅提供文档分数（即不是每个字段） .

另一个（可能是坏主意）是仅按名称字段搜索，使用像“名称：my_search_term_here”这样的查询字符串

因此，据我所知，Google App Engine 的 Search API 无法在搜索期间偏向某个字段（即类似于 ApacheSolr Lucene 中的 ^ 运算符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-24T03:44:18.440

我不知道 Google AppEngine 中的此功能。话虽如此，您可以将这个问题分为两个步骤。首先在名称字段中搜索一个术语，它会为您提供一个文档列表，称为 list1。然后在不太重要的字段中搜索相同的术语。这会给你另一个列表，称之为list2。然后，您可以以任何您想要的方式组合这两个列表 - 即创建一个新的 list3，它是 list1 和 list2 的串联，并且 list1 中的所有项目都在 list2 中的项目之前。希望这可以帮助。

# ios - 正确使用 DrawRect 覆盖 - 我可以防止视图拉伸吗？

> ID：15751305
> 
> 赞同：1
> 
> 时间：2013-04-01T20:30:11.040
> 
> 标签：ios, objective-c, ipad, cocoa-touch

**编辑：下面详细问题的简化版本：您可以通过子类 drawRect 更新 UIView 的边界而不导致视图内容拉伸吗？**

* * *

我正在构建一个新闻阅读器应用程序，并且一直在研究如何将 UIView 拆分为列并仍然对内容进行分页。我相信我已经对列进行了基本编码（将 XML 节点内容按段落拆分为数组，然后通过检测不切断段落所需的总面积进行解析。）

我遇到的问题是我无法在没有文本拉伸的情况下更新 ContentBounds，即使里面的内容足够大以支持未拉伸的视图。

基本上是这样的：

```
contentBounds = CGSizeMake(self.bounds.size.width, self.bounds.size.height+COLUMN_YPOS);

[renderer updateContentBounds:contentBounds]; 
```

导致这个：（下图的完整代码） ![拉伸图像](https://i.stack.imgur.com/KFwT0.png)

```
- (void)drawRect:(CGRect)rect
{

NSString *string = contentString;
[string stringByReplacingOccurrencesOfString:@"<br>" withString:@"\n\n"];

// column width
int COLUMN_WIDTH = self.bounds.size.width/2-40;
int COLUMN_HEIGHT = self.bounds.size.height-100;

int COLUMN_XPOS = 20;
int COLUMN_YPOS = 0;

int PAGE_HEIGHT = COLUMN_HEIGHT + 40;

CGSize maximumSize = CGSizeMake(COLUMN_WIDTH, COLUMN_HEIGHT-20);

NSArray *paragraphs = [string componentsSeparatedByString:@"\n"];

NSString *textBuffer = @"";
NSString *preBuffer = @"";
NSString *currentStringSegment;

for (int i=0; i<[paragraphs count]; i++) {

    currentStringSegment = [paragraphs objectAtIndex:i];

    preBuffer = textBuffer;
    textBuffer = [textBuffer stringByAppendingString:@"\n\n"];
    textBuffer = [textBuffer stringByAppendingString:currentStringSegment];

    CGSize expectedSize = [textBuffer sizeWithFont:[UIFont fontWithName:@"Times New Roman" size:16] constrainedToSize:CGSizeMake(COLUMN_WIDTH, COLUMN_HEIGHT) lineBreakMode:NSLineBreakByWordWrapping];

    if(expectedSize.height > maximumSize.height){

        [preBuffer drawInRect:CGRectMake(COLUMN_XPOS, COLUMN_YPOS, COLUMN_WIDTH, COLUMN_HEIGHT) withFont:[UIFont fontWithName:@"Times New Roman" size:16] lineBreakMode:NSLineBreakByWordWrapping alignment:NSTextAlignmentLeft];
        i--;
        textBuffer = @"";
        preBuffer = @"";

        if(COLUMN_XPOS > 20) {

            COLUMN_XPOS = 20;
            COLUMN_YPOS += PAGE_HEIGHT;

        } else {

            COLUMN_XPOS = COLUMN_WIDTH + 60;

        }

    }

}

if(![preBuffer isEqualToString:@""] && preBuffer != nil){

    [preBuffer drawInRect:CGRectMake(COLUMN_XPOS, COLUMN_YPOS, COLUMN_WIDTH, COLUMN_HEIGHT) withFont:[UIFont fontWithName:@"Times New Roman" size:16] lineBreakMode:NSLineBreakByWordWrapping alignment:NSTextAlignmentLeft];

}

contentBounds = CGSizeMake(self.bounds.size.width, self.bounds.size.height);

[renderer updateContentBounds:contentBounds];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T21:55:33.170

`UIView`边界改变时a 的行为由`contentMode`属性决定。

如果您查看[文档](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/WindowsandViews/WindowsandViews.html)，您将阅读：

> 属性中的值`contentMode`决定了位图是否应该缩放以适应新的边界，或者只是固定到视图的一个角或边缘。

默认`contentMode`设置为`UIViewContentModeScaleToFill`which，您可以在同一个文档页面中阅读，

> 导致视图的内容被缩放以适应新的帧大小。

您可能希望将`contentMode`视图的 更改为非扭曲行为，例如`UIViewContentModeTop`，这将使在视图边界顶部对齐的内容居中。

`contentMode` [您可以在此处](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/c/econst/UIViewContentModeScaleToFill)找到所有可能的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:47:27.540

您可以在分页模式下使用 UIScrollView。

[使用分页模式滚动](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/UIScrollView_pg/ScrollViewPagingMode/ScrollViewPagingMode.html)

您可以在 UIScrollView 中放置一个 UIWebView 并使用 HTML/CSS 创建列，关闭 Web 视图上的用户交互，并使用 UIScrollView 水平滚动列。

# c++ - 测量时间导致返回值为 0 或 0.001

> ID：15751308
> 
> 赞同：5
> 
> 时间：2013-04-01T20:30:15.647
> 
> 标签：c++, windows, time, c++11, chrono

我试图用来`chrono::steady_clock`测量程序中一段代码之间经过的小数秒。我有这段代码在 LiveWorkSpace ( [http://liveworkspace.org/code/YT1I$9](http://liveworkspace.org/code/YT1I%249) ) 中工作：

```
#include <chrono>
#include <iostream>
#include <vector>

int main()
{
    auto start = std::chrono::steady_clock::now();
    for (unsigned long long int i = 0; i < 10000; ++i) {
       std::vector<int> v(i, 1);
    }
    auto end = std::chrono::steady_clock::now();

    auto difference = std::chrono::duration_cast<std::chrono::microseconds>(end - start).count();

    std::cout << "seconds since start: " << ((double)difference / 1000000);
} 
```

当我像这样在我的程序中实现相同的想法时：

```
auto start = std::chrono::steady_clock::now();
// block of code to time
auto end = std::chrono::stead_clock::now();

auto difference = std::chrono::duration_cast<std::chrono::microseconds>(end - start).count()

std::cout << "seconds since start: " << ((double) difference / 1000000); 
```

该程序只会打印出`0`和的值`0.001`。我非常怀疑我的代码块的执行时间总是等于`0`或`1000`微秒，那么是什么导致了这种舍入以及如何消除它以便获得正确的小数值？

这是一个 Windows 程序。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T04:04:36.617

这个问题已经有了很好的答案。但我想补充另一个建议：

在`<chrono>`框架内工作。建立自己的时钟。建立自己的时间点。建立自己的持续时间。该`<chrono>`框架是非常可定制的。通过在该系统中工作，您不仅会学习`std::chrono`，而且当您的供应商开始运送您满意的时钟时，将您的代码从您的手动 chrono::clock 转换为`std::high_resolution_clock`（或其他）将是微不足道的。

首先，对您的原始代码的一个小批评：

```
std::cout << "seconds since start: " << ((double) difference / 1000000); 
```

每当您看到自己引入转换常量（如 1000000）以获得您想要的东西时，您就没有`chrono`正确使用。您的代码不正确，只是脆弱。你**确定**你在那个常数中有正确数量的零吗？！

即使在这个简单的例子中，你也应该对自己说：

> 我想以双精度表示的秒数来查看输出。

然后你应该`chrono`为你做那个。一旦你学会了如何做就很容易了：

```
typedef std::chrono::duration<double> sec;
sec difference = end - start;
std::cout << "seconds since start: " << difference.count() << '\n'; 
```

第一行创建一个周期为 1 秒的类型，用双精度表示。

第二行只是减去您的 time_points 并将其分配给您的自定义持续时间类型。库自动完成从单位`steady_clock::time_point`到自定义持续时间（双秒）的转换。`chrono`这比：

```
auto difference = std::chrono::duration_cast<std::chrono::microseconds>(end - start).count() 
```

最后，您只需使用`.count()`成员函数打印出您的结果。这再次比以下简单得多：

```
std::cout << "seconds since start: " << ((double) difference / 1000000); 
```

* * *

* * *

但是由于您对 的精度不满意`std::chrono::steady_clock`，并且您可以访问 QueryPerformanceCounter，因此您可以做得更好。您可以在 QueryPerformanceCounter 之上构建自己的时钟。

`<disclaimer>`

我没有 Windows 系统来测试以下代码。

`</disclaimer>`

```
struct my_clock
{
    typedef double                             rep;
    typedef std::ratio<1>                      period;
    typedef std::chrono::duration<rep, period> duration;
    typedef std::chrono::time_point<my_clock>  time_point;
    static const bool is_steady =              false;

    static time_point now()
    {
        static const long long frequency = init_frequency();
        long long t;
        QueryPerformanceCounter(&t);
        return time_point(duration(static_cast<rep>(t)/frequency));
    }
private:
    static long long init_frequency()
    {
        long long f;
        QueryPerformanceFrequency(&f);
        return f;
    }
}; 
```

由于您希望输出以双秒为单位，因此我将`rep`这个时钟设为 a`double`和`period`1 秒。您可以轻松地制作`rep`积分和`period`其他一些单位，例如微秒或纳秒。您只需调整`typedef`s 和从`QueryPerformanceCounter`到`duration`in的转换`now()`。

现在您的代码看起来很像您的原始代码：

```
int main()
{
    auto start = my_clock::now();
    for (unsigned long long int i = 0; i < 10000; ++i) {
       std::vector<int> v(i, 1);
    }
    auto end = my_clock::now();

    auto difference = end - start;
    std::cout << "seconds since start: " << difference.count() << '\n';
} 
```

但是**没有**手动编码的转换常数，并且**（**我希望）有足够的精度来满足您的需求。并且为未来的实现提供了*更容易的移植路径。*`std::chrono::steady_clock`

`<chrono>`被设计成一个可扩展的库。请延长它。:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T22:12:22.213

在 MSVC2012 上运行一些测试后，我可以确认 Microsoft 实现中的 C++11 时钟没有足够高的分辨率。有关此问题的错误报告，请参阅[C++ 标头的 high_resolution_clock 没有高分辨率](https://connect.microsoft.com/VisualStudio/feedback/details/719443/)。

因此，不幸的是，对于更高分辨率的计时器，您将需要`boost::chrono`像这样直接使用 QueryPerformanceCounter 直到他们修复错误：

```
#include <iostream>
#include <Windows.h>

int main()
{
    LARGE_INTEGER frequency;
    QueryPerformanceFrequency(&frequency);

    LARGE_INTEGER start;
    QueryPerformanceCounter(&start);

    // Put code here to time

    LARGE_INTEGER end;
    QueryPerformanceCounter(&end);

    // for microseconds use 1000000.0
    double interval = static_cast<double>(end.QuadPart- start.QuadPart) / 
                      frequency.QuadPart; // in seconds
    std::cout << interval;
} 
```

# c - 如何获取目录中的目录数？

> ID：15751311
> 
> 赞同：0
> 
> 时间：2013-04-01T20:30:34.987
> 
> 标签：c, linux, unix, system

我正在尝试获取文件夹中除文件之外的目录数，但我无法获得正确的结果。有人帮我解决这个问题吗？特别是我应该向 isDirectory() 函数发送什么？

```
int listFilesIndir(char *currDir) 
{
    struct dirent *direntp;

    DIR *dirp;
    int x ,y =0 ;

    if ((dirp = opendir(currDir)) == NULL) 
    {
        perror ("Failed to open directory");
        return 1;
    }

    while ((direntp = readdir(dirp)) != NULL)
    {
        printf("%s\n", direntp->d_name);
        x= isDirectory(dirp);
        if(x != 0)
            y++;
    }
    printf("direc Num : %d\n",y );

    while ((closedir(dirp) == -1) && (errno == EINTR)) ;

    return 0;
}

int isDirectory(char *path) 
{
    struct stat statbuf;

    if (stat(path, &statbuf) == -1)
        return 0;
    else 
        return S_ISDIR(statbuf.st_mode);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:51:01.203

您正在向函数发送目录流，并将其视为路径。

Linux 和其他一些 Unix 系统包括一种直接获取此信息的方法：

```
while ((direntp = readdir(dirp)) != NULL)
{
    printf("%s\n", direntp->d_name);
    if (direntp->d_type == DT_DIR)
       y++;
} 
```

否则，请确保向函数发送正确的详细信息，即

```
x= isDirectory(direntp->d_name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T21:03:24.487

对您的函数的调用是错误的。

```
x= isDirectory(dirp); 
```

而函数的原型是：

```
int isDirectory(char *path) 
```

它需要一个字符串作为参数，但你给它一个“DIR *dirp;”。我将代码更改为：

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <dirent.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <unistd.h>

int listFilesIndir(char *currDir)
{
    struct dirent *direntp;

    DIR *dirp;
    int x ,y =0 ;

    if ((dirp = opendir(currDir)) == NULL)
    {
        perror ("Failed to open directory");
        return 1;
    }

    while ((direntp = readdir(dirp)) != NULL)
    {
        printf("%s\n", direntp->d_name);
        if(direntp->d_type == DT_DIR)
            y++;
    }
    printf("direc Num : %d\n",y );

    while ((closedir(dirp) == -1) && (errno == EINTR)) ;

    return 0;
}

int main(int argc, char **argv){
    if(argc == 2){
        // Check whether the argv[1] is a directory firstly.
        listFilesIndir(argv[1]);
    }
    else{
        printf("Usage: %s directory", argv[0]);        
    }
    return 0;
} 
```

我在我的 Linux 服务器上对其进行了测试。而且效果很好。所以@teppic 是对的。但要注意，在代码中，目录的个数包括两个具体的“..”（父目录）和“.”。（当前目录）。如果您不想包含它，您可以更改：

```
printf("direc Num : %d\n",y ); 
```

进入：

```
printf("direc Num : %d\n",y-2 ); 
```

希望能帮助到你！

# perl - 在 Rackspace 上备份数据库的 Perl 脚本

> ID：15751313
> 
> 赞同：2
> 
> 时间：2013-04-01T20:30:42.653
> 
> 标签：perl, cron, rackspace

尝试在 Rackspace 站点上使用 Perl cron 作业备份我们的数据库。

Rackspace 举了一个例子：

```
#!/bin/sh
mysqldump -h DB_HOST -u DB_USER -p'DB_PASSWORD' DB_NAME > YOUR_WEB_ROOT/db_backup.sql
gzip -f YOUR_WEB_ROOT/db_backup.sql 
```

这很好，但我想在文件名中加上时间戳。我有这段代码生成时间戳：

```
use strict;
use warnings;
use DateTime;

my $dt   = DateTime->now;
my $date = $dt->ymd;
my $time = $dt->hms;

my $file = "****.com/db_backups/db_backup - $date $time.sql";

print $file; 
```

最终产品：

```
#!/bin/sh
use strict;
use warnings;
use DateTime;

my $dt   = DateTime->now;
my $date = $dt->ymd;
my $time = $dt->hms;

my $file = "****.com/db_backups/db_backup - $date $time.sql";

print $file;

mysqldump -h hosturl -u username -p'password' database > $file;
gzip -f $file; 
```

当它运行时，我得到这些错误。

```
/mnt/stor09-wc1-ord1/758094/****.com/backup.sh: line 2: use: command not found
/mnt/stor09-wc1-ord1/758094/****.com/backup.sh: line 3: use: command not found
/mnt/stor09-wc1-ord1/758094/****.com/backup.sh: line 4: use: command not found
/mnt/stor09-wc1-ord1/758094/****.com/backup.sh: line 5: my: command not found
/mnt/stor09-wc1-ord1/758094/****.com/backup.sh: line 6: my: command not found
/mnt/stor09-wc1-ord1/758094/****.com/backup.sh: line 7: my: command not found
/mnt/stor09-wc1-ord1/758094/****.com/backup.sh: line 8: my: command not found
/mnt/stor09-wc1-ord1/758094/****.com/backup.sh: line 9: print: command not found
/mnt/stor09-wc1-ord1/758094/****.com/backup.sh: line 10: $file: ambiguous redirect 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:40:21.620

问题是您正在混合 Perl（您的时间戳代码）和 Shell Script（您的示例代码）......

如果要执行 shell 代码，可以使用反引号：

```
#!/usr/bin/perl <---- or whatever is your path to perl
use strict;
use warnings;
use DateTime;

my $dt   = DateTime->now;
my $date = $dt->ymd;
my $time = $dt->hms;

my $file = "****.com/db_backups/db_backup - $date $time.sql";

print $file;

`mysqldump -h hosturl -u username -p'password' database > $file;`
`gzip -f $file;` 
```

除了反引号，您还可以使用`system()`或`exec`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T20:42:27.753

```
#!/bin/sh
todaysdate=`date +%F`
mysqldump -h DB_HOST -u DB_USER -p'DB_PASSWORD' DB_NAME > YOUR_WEB_ROOT/db_backup.sql
gzip -f YOUR_WEB_ROOT/${todaysdate}db_backup.sql 
```

像往常一样填写 DB_HOST 等

不需要 perl，这都是 shell 脚本

# php - 使用 php sdk 重命名选项卡

> ID：15751315
> 
> 赞同：0
> 
> 时间：2013-04-01T20:30:53.233
> 
> 标签：php, facebook-graph-api, facebook-access-token

我正在尝试使用 php sdk 重命名选项卡，但我收到此错误

**致命错误：未捕获的 OAuthException：（#100）选项卡 '591882604157641' 在第 1028 行的 base_facebook.php 中抛出的配置文件 216407665045740 中不存在**

**216407665045740**是有效页面 **591882604157641**是选项卡，并且已正确安装在该页面上！

[http://www.facebook.com/pages/My-test-page/216407665045740?id=216407665045740&sk=app_591882604157641](http://www.facebook.com/pages/My-test-page/216407665045740?id=216407665045740&sk=app_591882604157641)

这就是我正在做的事情：

1.  我获取页面的令牌并保存用户令牌以供以后使用。（授予 manage_pages 权限）
2.  更新选项卡名称
3.  设置用户令牌

这是代码：

```
$page_id = $signed_request['page']['id'];

$user_access_token = $facebook->getAccessToken();

$page_access_token = $facebook->api("/{$page_id}?fields=access_token");
$page_access_token = $page_access_token['access_token'];

if($facebook->setAccessToken($page_access_token))
{
    $facebook->api("/{$page_id}/tabs/591882604157641", 'POST', array(
        'custom_name' => 'another test name'
    ));
}

$facebook->setAccessToken($user_access_token); 
```

我尝试了一切，但我被困在这里！非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T07:48:50.670

```
 $page_id = $signed_request['page']['id'];

     $user_access_token = $facebook->getAccessToken();

     $page_access_token = $facebook->api("/{$page_id}?fields=access_token");

     $page_access_token = $page_access_token['access_token'];

     if($facebook->setAccessToken($page_access_token))
     {
        $facebook->api("/{$page_id}/tabs/app_591882604157641", 'POST', array(
            'custom_name' => 'another test name'
     ));
     }

     $facebook->setAccessToken($user_access_token); 
```

完美无缺

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:54:11.450

我找到了重命名选项卡的方法。

```
$facebook->api("/{$page_id}/tabs/app_591882604157641", 'POST', array(
 'custom_name' => 'another test name'
)); 
```

只需在应用 ID 前添加*app_*！

# php - 函数 split() 已弃用 PHP，explode 不起作用

> ID：15751318
> 
> 赞同：-3
> 
> 时间：2013-04-01T20:30:59.663
> 
> 标签：php, html, forms, split

我已经从网上下载了联系表格。`class.phpmailer.php`在第 470 行的 一部分 ( ) 中，它使用：

```
$toArr = split(',', $to); 
```

当然，这是贬值的。我在网上搜索了答案（并阅读了 php 语法），它说 use `explode()`or `preg_split()`.

我已经尝试了这两种方法，但是当我提交联系表时，没有任何反应。数据保持不变，但验证码发生了变化。我还放了：

```
$toArr = split('!,!', $to); 
```

同样，表单不会提交。

有人可以告诉我如何解决这个问题吗？

编辑：该错误与explode/preg_split 无关——我相信这是一个缺少的html 标签。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T20:38:37.987

您可以毫无问题地使用[爆炸：](http://php.net/manual/en/function.explode.php)

```
$toArr = explode ( ',', $to ); 
```

或者您可以使用：[preg_split()](http://www.php.net/manual/es/function.preg-split.php)或[str_split()](http://www.php.net/manual/es/function.str-split.php)或

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T20:33:58.143

split() 确实已被弃用。你应该改用

```
$toArr = explode (',', $to); 
```

这应该没有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T20:41:19.563

```
$toArr = explode(",", $to); 
```

或者

```
$toArr = explode(',', $to); 
```

应该工作，这取决于你想做什么。有关详细信息，请参阅[http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)。

使用explode时表单不提交的事实不应该与explode函数有关，并且表单本身存在错误的可能性更大，但仅凭这一点代码是不可能帮助您的。请分享更多表单代码。

# java - 在存储用户输入之前检查退出程序

> ID：15751319
> 
> 赞同：0
> 
> 时间：2013-04-01T20:31:05.897
> 
> 标签：java, do-while, bufferedwriter

我有一个几乎完成的程序。唯一的问题是当用户输入“exit”来杀死程序时，“exit”这个词会被写入文件“quotes.txt”的末尾。如何让程序首先检查“退出”而不是将其写入“quotes.txt”？

这是代码：

```
public static void main(String[] args) throws IOException {

    final Formatter fo;
    BufferedWriter bw = null;
    BufferedReader in = new BufferedReader(new FileReader("quotes.txt"));
    String input = "";
    String line;

    File quotesFile = new File("quotes.txt");

    if (quotesFile.exists()) {
        System.out.println(quotesFile.getName() + " exists.");
    } else {
        System.out.println("THIS DOES NOT EXIST.");
    }

    try {
        fo = new Formatter("quotes.txt");
        System.out.println("File created or found.");

    } catch (Exception e) {
        System.out.println("You have an error.");
    }

    do {
        try {
            Scanner kb = new Scanner(System.in);

            if (!input.equalsIgnoreCase("exit")) {

                System.out.println("Enter your text(Type 'exit' to close program.): ");
                bw = new BufferedWriter(new FileWriter(quotesFile, true));
                input = kb.nextLine();
                bw.write(input);
                bw.newLine();
                bw.close();
                System.out.println("Entry added.\n");
            }

        } catch (Exception e) {
            System.out.println("Error.");
        }
    } while (!input.equalsIgnoreCase("exit"));

    System.out.println("Results: ");

    while ((line = in.readLine()) != null) {
        System.out.println(line);
    }

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:42:26.190

你只能实例化你的 Scanner 和 writer 一次。问题的关键是你在测试后检查输入。请注意，您重复了测试：一个在 中`if`，另一个在`while`. 我建议你这个算法：

```
Scanner kb = new Scanner(System.in);
input = kb.nextLine();

while (!input.equalsIgnoreCase("exit")) {
    try {
        System.out.println("Enter your text(Type 'exit' to close program.): ");
        bw = new BufferedWriter(new FileWriter(quotesFile, true));
        bw.write(input);
        bw.newLine();
        bw.close();
        System.out.println("Entry added.\n");
    } catch (Exception e) {
        System.out.println("Error.");
    }
    input = kb.nextLine();
} 
```

请注意，`do...while`不要最好地响应您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:34:47.053

在将输入写入文件之前检查输入是什么。

```
 System.out.println("Enter your text(Type 'exit' to close program.): ");
            bw = new BufferedWriter(new FileWriter(quotesFile, true));
            input = kb.nextLine();
            if(!input.equalsIgnoreCase("exit")) {
                bw.write(input);
                bw.newLine();
                bw.close();
                System.out.println("Entry added.\n");
            }
       } 
```

# c# - 解析大于 24 小时的 TimeSpan？

> ID：15751325
> 
> 赞同：1
> 
> 时间：2013-04-01T20:31:27.103
> 
> 标签：c#, asp.net

我有这个功能：

```
 public static decimal Hours(string s)
    {    
        return (decimal)TimeSpan.Parse(s).TotalHours + 0.005M;
    } 
```

格式为小时：分钟，例如：30:20 或 10:17。如果我写给它说 25:03 或 30:20 它会失败，因为它已经超过 24 小时。有没有办法让它解析 > 23:59 的东西？简单来说，如果我的字符串是 30:30，这个函数需要返回 30.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:44:38.903

我不确定是否可以使用标准`TimeSpan.Parse()`方法完成，但您可以这样做：

```
public static decimal Hours(string s)
{
    decimal r;
    if (decimal.TryParse(s, out r))
        return r;

    var parts = s.Split(':');
    return (decimal)new TimeSpan(int.Parse(parts[0]), int.Parse(parts[1]),0).TotalHours;
} 
```

# python - 列表索引超出范围的矩阵创建？

> ID：15751330
> 
> 赞同：0
> 
> 时间：2013-04-01T20:31:36.827
> 
> 标签：python, list, matrix, python-2.6

我正在尝试创建一个 3x10x10 矩阵，我觉得我做得对。我试图让`GridSet`函数为我设置所有值，但在第 7 行出现“列表索引超出范围”的错误。我不明白为什么会出现错误。

如果有更好的方法来创建矩阵而无需大量方括号（没有模块，我听说过 NumPy，但我想做这个准系统），那就太好了。

我正在运行 2.6.x，不确定是哪个版本。任何帮助，将不胜感激。

```
import random

def GridSet(fullGrid):
    letters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J']
    for j in range(10):
        for i in range(10):
            fullGrid[j][i][0].append(letters[j]+str(i+1))
            fullGrid[j][i][1].append(random.randrange(100)+1)
            fullGrid[j][i][2].append(0)

#main
fullGrid = [[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],        [],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]]]
filledGrid = GridSet(fullGrid)
print filledGrid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:44:45.937

以下嵌套列表推导应该创建原始列表：

```
In [13]: [[[None for i in range(3)] for j in range(10)] for k in range(10)]
Out[13]: 
[[[None, None, None],
  [None, None, None],
  [None, None, None],
  [None, None, None],
  [None, None, None],
  [None, None, None],
  [None, None, None],
  [None, None, None],
  [None, None, None],
  [None, None, None]],
 [[None, None, None],
  [None, None, None],
  [None, None, None],
  ... etc 
```

尽管您可以创建整个事物，而不是先创建列表然后填充它：

```
In [23]: l = [[[letters[j]+str(i+1), random.randrange(100)+1, 0] for i in range(10)]for j in range(10)]
In [24]: pprint(l)
[[['a1', 82, 0],
  ['a2', 77, 0],
  ['a3', 64, 0],
  ['a4', 34, 0],
  ['a5', 95, 0],
  ['a6', 69, 0],
  ['a7', 4, 0],
  ['a8', 72, 0],
  ['a9', 83, 0],
  ['a10', 100, 0]],
 [['b1', 19, 0],
  ['b2', 59, 0],
  ['b3', 15, 0],
   ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:44:22.217

有点困惑。这是你试图达到的目标吗？

```
import random

def GridSet():
    fullGrid = []
    letters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J']

    for j in range(10):
        collect = []
        for i in range(10):
            collect_sub = []
            collect_sub.append([letters[j] + repr(i+1), random.randrange(100)+1, 0])
            collect.append(collect_sub)
        fullGrid.append(collect)

    return fullGrid

filledGrid = GridSet()

import pprint
pprint.pprint(filledGrid) 
```

**输出**

```
[[[['A1', 12, 0]],
  [['A2', 99, 0]],
  [['A3', 91, 0]],
  [['A4', 29, 0]],
  [['A5', 72, 0]],
  [['A6', 24, 0]],
  [['A7', 99, 0]],
  [['A8', 77, 0]],
  [['A9', 39, 0]],
  [['A10', 93, 0]]],
 [[['B1', 54, 0]],
  [['B2', 78, 0]],
  [['B3', 12, 0]],
  [['B4', 78, 0]],
  [['B5', 79, 0]],
  [['B6', 68, 0]],
  [['B7', 80, 0]],
  [['B8', 29, 0]],
  [['B9', 60, 0]],
  [['B10', 48, 0]]],
 [[['C1', 59, 0]],
  [['C2', 20, 0]],
  [['C3', 4, 0]],
  [['C4', 42, 0]],
  [['C5', 91, 0]],
  [['C6', 61, 0]],
  [['C7', 28, 0]],
  [['C8', 68, 0]],
  [['C9', 18, 0]],
  [['C10', 73, 0]]],
 [[['D1', 9, 0]],
  [['D2', 29, 0]],
  [['D3', 81, 0]],
  [['D4', 46, 0]],
  [['D5', 49, 0]],
  [['D6', 95, 0]],
  [['D7', 64, 0]],
  [['D8', 5, 0]],
  [['D9', 26, 0]],
  [['D10', 88, 0]]],
 [[['E1', 62, 0]],
  [['E2', 6, 0]],
  [['E3', 35, 0]],
  [['E4', 37, 0]],
  [['E5', 54, 0]],
  [['E6', 58, 0]],
  [['E7', 85, 0]],
  [['E8', 26, 0]],
  [['E9', 76, 0]],
  [['E10', 85, 0]]],
 [[['F1', 38, 0]],
  [['F2', 67, 0]],
  [['F3', 32, 0]],
  [['F4', 2, 0]],
  [['F5', 76, 0]],
  [['F6', 97, 0]],
  [['F7', 34, 0]],
  [['F8', 30, 0]],
  [['F9', 58, 0]],
  [['F10', 73, 0]]],
 [[['G1', 68, 0]],
  [['G2', 20, 0]],
  [['G3', 60, 0]],
  [['G4', 46, 0]],
  [['G5', 89, 0]],
  [['G6', 85, 0]],
  [['G7', 76, 0]],
  [['G8', 58, 0]],
  [['G9', 86, 0]],
  [['G10', 49, 0]]],
 [[['H1', 22, 0]],
  [['H2', 76, 0]],
  [['H3', 50, 0]],
  [['H4', 2, 0]],
  [['H5', 6, 0]],
  [['H6', 60, 0]],
  [['H7', 92, 0]],
  [['H8', 9, 0]],
  [['H9', 26, 0]],
  [['H10', 91, 0]]],
 [[['I1', 57, 0]],
  [['I2', 89, 0]],
  [['I3', 1, 0]],
  [['I4', 7, 0]],
  [['I5', 25, 0]],
  [['I6', 70, 0]],
  [['I7', 40, 0]],
  [['I8', 21, 0]],
  [['I9', 7, 0]],
  [['I10', 93, 0]]],
 [[['J1', 77, 0]],
  [['J2', 23, 0]],
  [['J3', 24, 0]],
  [['J4', 48, 0]],
  [['J5', 17, 0]],
  [['J6', 64, 0]],
  [['J7', 11, 0]],
  [['J8', 33, 0]],
  [['J9', 23, 0]],
  [['J10', 20, 0]]]] 
```

如果缩进太深，您只需删除附加到的`fullGrid`而不破坏其余部分的完整性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T21:07:54.537

你需要一个更好的描述，但我只想写一个可以轻松解决我认为你正在寻找的东西的单行字。

```
import random

def GridSet(letters):
    letRange = range(len(letters))
    return [ [[letter for letter in letters] for v in letRange], 
             [[random.randrange(100)+1 for i in letRange] for v in letRange], 
             [[0 for i in letRange] for v in letRange] ]

grid = GridSet(["A", "B", "C", "D", "E", "F", "G", "H", "I", "J"])

# len(grid):  3
# len(grid[0]):  10
# len(grid[0][0]):  10 
```

# ios - 什么在 UITableCell 中的 uitextfield 上执行 textFieldDidBeginEditing

> ID：15751331
> 
> 赞同：0
> 
> 时间：2013-04-01T20:31:37.730
> 
> 标签：ios, uitableview, uiviewcontroller, resignfirstresponder

我在 UITableViewCell （自定义单元格）中有一个 UITextField 。

我的 UITableView 中有 3 行。第二行是文本字段行。第三行是通过动画块打开另一个视图的链接。

我遇到的问题是，如果用户正在编辑金额并单击第三行以转发到该屏幕，那么当我关闭这个新的视图控制器时，屏幕将返回 UITableview 控制器并触发 textFieldDidBeginEditing。

如何取消此操作或避免将用户送回编辑模式？我尝试在表格单元格和视图控制器中辞职，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:39:11.803

`[myTextField resignFirstResponder]`您应该在单击第三行时调用来结束文本字段的编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:18:08.790

从此委托方法中为要禁用编辑的字段返回 NO。

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField 
```

# modx-revolution - FormIt - 重定向挂钩问题

> ID：15751334
> 
> 赞同：0
> 
> 时间：2013-04-01T20:31:42.827
> 
> 标签：modx-revolution, formit

**ISSUE**：我正在使用 FormIt，重定向挂钩对我不起作用。

它重定向到[http://www.example.comPageName.html](http://www.example.comPageName.html)而不是[http://www.example.com/PageName.html](http://www.example.com/PageName.html)。它没有在页面名称后放置正斜杠。

有没有人见过这个问题？

这是我的 FormIt 片段。

```
[[!FormIt? &hooks=`email,redirect` &emailTpl=`MyEmailChunk` &emailTo=`mypersonalemail@email.com` &emailSubject=`Contact Us form submission` &redirectTo=`35` &emailFrom=`info@domainnamme.com`]] 
```

*   是的，MyEmailChunk 存在。
*   电子邮件地址是虚拟值
*   id 为 35 的资源位于相同的上下文中，并且已发布并从菜单中隐藏。
*   我正在使用友好的网址。
*   如果我尝试其他资源，它会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T11:52:19.683

实际上 site_url 变量需要在系统设置中检查。

确保你有一个尾部斜杠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T07:09:10.950

以下代码中生成的 URL

```
$url = $this->modx->makeUrl($this->formit->config['redirectTo'],$contextKey,$redirectParams,'full'); 
```

`'full'`意思是`URL is absolute, prepended with site_url from config`（[http://rtfm.modx.com/display/revolution20/modX.makeUrl](http://rtfm.modx.com/display/revolution20/modX.makeUrl)）。请检查您的`site_url`变量`/core/config/config.inc.php`

# twitter-bootstrap - Twitter Bootstrap 跨度溢出

> ID：15751340
> 
> 赞同：6
> 
> 时间：2013-04-01T20:32:00.170
> 
> 标签：twitter-bootstrap

[http://jsfiddle.net/jgehrs/MgcDU/3103/](http://jsfiddle.net/jgehrs/MgcDU/3103/)

我有这个代码块，它应该导致 4 个相同大小的跨度都水平排列，但是正如你所看到的，第 4 个块被推到一个新行。我已经使用 bootstrap 几天了，这是我第一次看到这个。

```
<div id='middle' class='row'>
  <div class='span3'>
    <div>1</div>
  </div>
  <div class='span3'>
    <div>2</div>
  </div>
  <div class='span3'>
    <div>3</div>
  </div>
  <div class='span3'>
    <div>4</div>
  </div> 
```

![跨度溢出](https://i.stack.imgur.com/3K4N0.jpg)

编辑：这是一个显示问题的 jsFiddle。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T01:27:16.437

流体布局适用于百分比。您可以尝试`<div class="row-fluid">`为我修复它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T23:19:41.303

[JSFiddle](http://jsfiddle.net/MgcDU/3105/)

添加边框的 css 是在网格系统计算宽度并导致元素换行之后完成的。我在内部 div 上放置了一个类，并将边框应用于内部元素。我还将该行包装在一个 div 容器中，以使其具有固定的布局。

```
.myBorder { border: 1px solid gray; }

<div class='container'>
<div class='row'>
  <div class='span3'>
    <div class="myBorder">1</div>
  </div> 
```

[带边框的元素](http://sentientmatter.com/blog/borders-in-bootstrap/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T03:16:35.817

您需要将该行包装在带有 class 的 div 中`container`。此外，将 div 行的类更改为`row-fluid`，如下所示：

```
 <div class='container'>
    <div class='row-fluid'>
      <div class='span3'>
        <div>1</div>
      </div>
      <div class='span3'>
        <div>2</div>
      </div>
      <div class='span3'>
        <div>3</div>
      </div>
      <div class='span3'>
        <div>4</div>
      </div>
    </div>
  </div> 
```

在这里查看演示：http: [//jsfiddle.net/MgcDU/3107/](http://jsfiddle.net/MgcDU/3107/)

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T03:07:41.843

看看这是否接近你所追求的：http: [//jsfiddle.net/panchroma/F7zRy/](http://jsfiddle.net/panchroma/F7zRy/)

正如@kyriakos 所指出的，如果你想要一个流体网格，你想使用它，如果你想让你的网格填充整个窗口，你`<div class='row-fluid'>`可以选择包裹所有东西。`<div class="container-fluid">`

最好不要使用边框，因为它们会增加列的宽度并导致换行。如果需要使用边框，请使用border-box

祝你好运！

# android - 无法在 Eclipse 中启动 Android 应用程序

> ID：15751344
> 
> 赞同：1
> 
> 时间：2013-04-01T20:32:11.983
> 
> 标签：android, eclipse

我对 Eclipse 有一个奇怪的问题。

前几天，我完成了一个名为 的项目`IntelligentAlarm`，然后将其推送到 github。那时我正在使用 Eclipse Indigo。之后，我格式化了系统，并下载了 Eclipse Juno。我从 github 克隆了这个存储库，并将这个项目作为一个 android 应用程序导入到 Eclipse 中。

但是现在，我无法将其作为 android 应用程序运行。缺少允许您将其作为 android 应用程序运行的选项。我也不能为这个项目创建一个新的运行配置，因为我在浏览窗口中看不到这个项目。

我应该补充一点，我能够运行新创建的 android 项目。

我该怎么办 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:35:39.413

如果你格式化了你的硬盘，你的工作空间就消失了。这意味着您必须将克隆的项目导入 Eclipse（将*现有 Android 项目导入工作区*）。这会将您的项目添加到新创建的工作区。之后，if 将照常显示在您的 IDE 中。

可能您还有一些事情要做，例如下载 SDK 平台和创建模拟器。

在此之后，您应该能够将您的程序作为 Android 项目运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:35:01.930

我会再次在 Eclipse 中重新进行 android 应用程序设置配置，看看是否

> 运行 > 作为 Android 应用程序

选项回来了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T03:45:41.317

设置 Eclipse 表单从头开始以启用 Android 开发环境。[在此处输入链接描述](http://developer.android.com/tools/sdk/eclipse-adt.html)

然后从现有代码创建新项目。由于您现有的 eclipse 项目将具有正确的文件，因此它将启用任何旧属性。

希望你有你的旧工作区。

**快速解决方案：** **您可以尝试删除workspace文件夹下的.metadata文件夹，这样可以在重启eclipse时为您重新创建.metadata文件夹**

# c# - Microsoft.SqlServer.TransactSql.ScriptDom：TSqlTokenType

> ID：15751345
> 
> 赞同：2
> 
> 时间：2013-04-01T20:32:21.173
> 
> 标签：c#, sql-server, tsql, sql-parser, tsql-parser

在解析 SQL 查询时，例如：

```
SELECT g.A, g.B, g.C FROM dbo.Goat g inner join dbo.Badger b on g.A=b.A 
```

并通过 TSqlParserToken 迭代有一个名为 TokenType 的属性。我得到以下信息：

```
SELECT   Select
     WhiteSpace
g    Identifier
.    Dot
A    Identifier
,    Comma
     WhiteSpace
g    Identifier
.    Dot
B    Identifier
,    Comma
     WhiteSpace
g    Identifier
.    Dot
C    Identifier
     WhiteSpace
FROM     From
     WhiteSpace
dbo  Identifier
.    Dot
Goat     Identifier
     WhiteSpace
g    Identifier
     WhiteSpace
inner    Inner
     WhiteSpace
join     Join
     WhiteSpace
dbo  Identifier
.    Dot
Badger   Identifier
     WhiteSpace
b    Identifier
     WhiteSpace
on   On
     WhiteSpace
g    Identifier
.    Dot
A    Identifier
=    EqualsSign
b    Identifier
.    Dot
A    Identifier 
```

我知道为了让解析器返回这些值，它需要了解底层架构。我是否可以为解析器提供底层对象，以便它可以返回一组更敏感的标记？

TSqlTokenType 枚举还具有诸如“表”、“模式”、“视图”之类的值，所以我确信这一定是可能的。只是文档稀缺。担

# python - 数据透视表小计

> ID：15751348
> 
> 赞同：0
> 
> 时间：2013-04-01T20:32:35.753
> 
> 标签：python, pandas, pivot-table

我有一个数据框：

```
product = DataFrame({'_product': ['shoes','dress','cap','shoes','purse','t-shirt','t-shirt','dress','t-shirt'], 
             'city': ['A','A','A','B','A','A','B','C','A'],
             'color':['red','black','black','white','black','green','white','yellow','blue'],
             'size':['36','S','M','40','-','L','L','M','S'],
             'param1':['x0001','x0008','x0006','x0002','x0001','x0009','x0011','x0003','x0001'],
             'param2':[23,1,367,689,35,97,100,44,15],
             'param3':['f1','t1','u7','f1','r4','f2','f2','t2','f4'],
             'counter':[1,1,1,1,1,1,1,1,1]})

table=product[['_product','city','color','size','param1','param2','param3','counter']] 
```

申请

```
pivot_product=pivot_table(table,values=['counter'],rows=['_product','city','color','size','param1','param2','param3'],aggfunc=[np.sum],fill_value=0,margins=True) 
```

我得到一个仅包含总计行的数据透视表（“全部”）。

这是一个假设样本，实际上我导入了一个包含 100 000 行和 20 列的表。

！！我绝对有必要在产品级别进行小计。

是否有任何有效的方法可以将带有小计的行插入到该表中，就像 Excel 数据透视表与字段设置>布局和打印>“以表格形式显示项目标签”允许做的那样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:15:06.973

我不熟悉 Excel 中的该操作，但这里有一个按产品计算小计的单行方法。

```
In [43]: pivot_product['subtotals'] = pivot_product[('sum', 'counter')].groupby(level=0).transform(np.sum)

In [44]: pivot_product
Out[44]: 
                                                    sum  subtotals
                                                counter           
_product city color  size param1 param2 param3                    
cap      A    black  M    x0006  367    u7            1          1
dress    A    black  S    x0008  1      t1            1          2
         C    yellow M    x0003  44     t2            1          2
purse    A    black  -    x0001  35     r4            1          1
shoes    A    red    36   x0001  23     f1            1          2
         B    white  40   x0002  689    f1            1          2
t-shirt  A    blue   S    x0001  15     f4            1          3
              green  L    x0009  97     f2            1          3
         B    white  L    x0011  100    f2            1          3
All                                                   9          9 
```

可能是您想要`np.size`我使用的地方`np.count`，具体取决于“计数器”列的含义。

# asp.net-mvc - ColdFusion/ASP 拆分 URL 处理

> ID：15751349
> 
> 赞同：1
> 
> 时间：2013-04-01T20:32:42.973
> 
> 标签：asp.net-mvc, iis-7, coldfusion, url-routing

我正在开发一个新的 ASP.NET MVC (IIS 7) 应用程序，该应用程序需要挂起现有 ColdFusion 应用程序组的 URL。该 URL 承载一系列应用程序，格式如下：

```
http://myapps.com/allApps/<appNumber>/<appViews>
```

ColdFusion 当前正在处理此 URL 上的所有应用程序。我需要新的 ASP.NET 应用程序使用相同的 URL 格式但具有特定的 <appNumber>。例如，ColdFusion 处理：

```
http://myapps.com/allApps/1/<appViews>
http://myapps.com/allApps/2/<appViews>
http://myapps.com/allApps/3/<appViews>
http://myapps.com/allApps/4/<appViews>

```

新的 ASP.NET 应用程序需要处理：

```
http://myapps.com/allApps/5/<appViews>
```

一旦我的应用程序收到请求，我知道如何使用 ASP 路由将请求发送到我的 ASP 应用程序控制器，但我不知道如何告诉 IIS 将特定 URL 发送到我的应用程序，因此 ColdFusion 不会处理它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:37:03.483

除非您将 IIS 设置为将 ASP.NET 页面传递给 ColdFusion 进行处理，否则这无关紧要。

# asp.net - 无法隐式转换类型“System.Guid？” 到“DataContracts.Market”

> ID：15751352
> 
> 赞同：1
> 
> 时间：2013-04-01T20:32:49.530
> 
> 标签：asp.net, entity-framework, c#-4.0

我收到以下错误

无法隐式转换类型“System.Guid？” 到“DataContracts.Market”

* * *

```
 private CellSite MapEntityToCellSitePOCO(t_CellSite _cellsite)
    {

        CellSite cellsite= new CellSite();
        cellsite.SiteId = _cellsite.SiteID;
        cellsite.Market.MarketID = _cellsite.MarketId;
        cellsite.Region.RegionId = _cellsite.RegionId;

       return cellsite;
    } 
```

以下是我的数据合同文件

* * *

```
 public class CellSite
{

    public Guid CellSiteID { get; set; }

    public string SiteId { get; set; }
    public Region Region { get; set; }
    public Market Market { get; set; }
    public Guid? ConstructionManager { get; set;}
   } 
```

这是market.cs

```
 public class Market
{
    public Guid? MarketID { get; set; }
    public string OperatorMarketName { get; set; }
    public string MarketName { get; set; }
    public decimal AllOtherAmount { get; set; }
    public decimal RawLandAmount { get; set; }
    public decimal RenewalFee { get; set; }
    public bool IsActive { get; set; }
} 
```

我想在 cellsite 表中有一个 MarketId 列。我该怎么做？我是实体框架工作的新手。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:36:04.523

您必须首先初始化您的`Market`和`Region`属性：

```
CellSite cellsite= new CellSite();
cellsite.SiteId = _cellsite.SiteID;

cellsite.Market = new Market();
cellsite.Market.MarketID = _cellsite.MarketId;

cellsite.Region = new Region();
cellsite.Region.RegionId = _cellsite.RegionId; 
```

# javascript - 外部脚本中的 window.onload 在 Javascript 中被忽略

> ID：15751362
> 
> 赞同：7
> 
> 时间：2013-04-01T20:33:29.533
> 
> 标签：javascript, window, external, onload, domready

索引.html

```
<html>
<head>
<script type="text/javascript" src="foo.js"></script>
<script type="text/javascript">
window.onload = function() {
    console.log("hello from html");
};
</script>
</head>
<body>
<div class="bar">bar</div>
</body>
</html> 
```

foo.js

```
// this js file will be completely ignored with window.onload
//window.onload = function() {

    console.log("hello from external js");

    var bar = document.getElementsByClassName("bar");

    // this returns 0 instead of 1
    console.log(bar.length);
//}; 
```

1.  当`window.onload`在 html 中使用时，`window.onload`来自外部的 js 将被忽略。
2.  当`window.onload`从外部 js 被注释掉时，`bar.length`返回 0。
3.  当`window.onload`从 html 被删除时，`window.onload`从外部 js 工作正常。

谁能解释为什么我不能同时使用两者`window.onload`？

如果我**必须在 html 中**使用`window.onload`，如何判断窗口是否是从外部 js 加载的？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-01T20:42:11.063

1）您绑定的方式，您只能将一个方法附加到一个事件。您需要为您想要的添加一个事件侦听器。

```
window.addEventListener("load", function() { alert("hello!");}); 
```

直接为 onload 事件设置方法将替换任何先前附加的方法。但是，如果您改用侦听器，则可以将其中的许多绑定到一个事件。

2）如果您在外部文件中注释掉onload，当`document.getElementsByClassName("bar")`调用时，您的文档还没有准备好，那么它将返回0个项目。

3) 使用我在第一点中解释的 addEventListener。如果你在这两个地方都应用它，它会像一个魅力一样起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:37:07.880

`onload`是窗口的属性。它的作用类似于任何其他变量属性。当您尝试使用它两次时，您将用第二次写入覆盖原始值。

因此，当您将其包装时，您的整个外部脚本将被忽略`window.onload`，因为`window.onload`然后被覆盖为

```
function() {
    console.log("hello from html");
}; 
```

如果要执行 2 个函数，请定义 2 个函数，`a`并且`b`，

并设置`window.onload`如下：

```
window.onload = function(){
  a();
  b();
} 
```

或者，您可以按照 Alcides 的回答建议的方式绑定 2 个单独的事件。我个人的观点是，使用多个函数进行单个绑定更容易，因为它更容易知道绑定了什么，知道你的函数将以什么顺序执行，并查看在一个地方发生的所有事情，但这主要是样式/偏好问题如果顺序无关紧要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T20:55:03.420

没错，您正在覆盖自己的 onload，但是您始终可以像这样将新的事件侦听器附加到窗口

```
function onLoadHandler(){
console.log("hello from external js");

var bar = document.getElementsByClassName("bar");

// page not loaded, so this returns 0 instead of 1
console.log(bar.length);
}
if (window.addEventListener) {
window.addEventListener('load', onLoadHandler); }
 else if (window.attachEvent) { window.attachEvent('onload', onLoadHandler ); } 
```

# android - android如何编写对话框布局

> ID：15751365
> 
> 赞同：1
> 
> 时间：2013-04-01T20:33:45.197
> 
> 标签：android, layout, for-loop, dialog

我想编写这个对话框布局： http: [//fooh.pl/pokaz/348687655.png](http://fooh.pl/pokaz/348687655.png)

绿色容器在橙色容器中。对话框顶部是 TextView。右上角是一个按钮。

我知道布局的类型，但我失败了。

谁能帮我？请。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:45:29.643

干得好：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:background="@drawable/rounded_orange">

  <TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_margin="8dp"
    android:text="Text"/>

  <RelativeLayout 
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginTop="32dp"
    android:background="@drawable/rounded_green">
  </RelativeLayout>

</RelativeLayout> 
```

可绘制对象（此处仅显示绿色）的布局如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
  <solid android:color="#0F0"/>
  <corners android:radius="16dp"/>
</shape> 
```

[如果您需要帮助将自定义 layout.xml 文件应用到对话框，请阅读Dialog](http://developer.android.com/guide/topics/ui/dialogs.html)官方文档中的“创建自定义对话框” 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:46:05.570

这是[文档的链接，其中包含很好的示例](http://developer.android.com/reference/android/app/DialogFragment.html#BasicDialog)或如何基于布局创建对话框片段。

这是一个很好[的](https://stackoverflow.com/a/8900918/1246574)SO 答案，它显示了如何扩展布局以在对话框片段中使用。

# python - GAE - Flask 无法从子目录导入 Jinja2？

> ID：15751369
> 
> 赞同：2
> 
> 时间：2013-04-01T20:34:03.583
> 
> 标签：python, google-app-engine, import, flask, jinja2

我正在使用 Flask 开发一个 Google App Engine 项目。Flask 然后使用 Jinja2。当我将 Flask 及其所需的所有模块放入项目的根文件夹时，服务器启动得很好。但是，我想稍微清理一下目录，所以我将 Flask 和其他模块（包括 Jinja2）移到了一个名为“lib”的子目录中。所以我的项目看起来像：

```
app.yaml
main.py
myapp
    __init__.py
    view.py
    blahblah.py
lib
    flask
    jinja2
    OtherModules 
```

然后在应用程序的 main.py 文件中，我使用`sys.path.insert(0, 'lib')`. Flask 似乎使用这种方法可以很好地导入，但 Flask 似乎无法在 lib 文件夹中找到 Jinja2。当尝试访问我正在运行的 dev_appserver 测试的视图时，我得到：

```
File "lib/flask/__init__.py", line 19, in <module>
    from jinja2 import Markup, escape
ImportError: No module named jinja2 
```

如何让 Flask 找到 Jinja2（并允许其他模块找到它们的要求），同时将它们保留在 lib 目录中，而不必编辑模块来调整路径？

下面是我的 main.py 文件，以防万一那里有什么有用的信息：

```
import sys
sys.path.insert(0, 'lib')

from google.appengine.ext.webapp.util import run_wsgi_app
from myapp import app

run_wsgi_app(app) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:58:11.380

为了在您的 app.yaml 文件中的应用程序引擎应用程序中包含 Jinja，请添加这些行

```
libraries:
  - name: jinja2
  version: latest 
```

[包含更多可用库的文档](https://developers.google.com/appengine/docs/python/tools/libraries27)。

为了将它用于您的本地服务器，您还应该将它们安装到您的系统中。在类似 Unix 的系统中，它会是

```
sudo easy_install jinja2 
```

附加信息：有一个名为 gae-init 的开源[框架](http://gae-init.appspot.com)，它结合了您的技术堆栈，并为应用引擎 Web 服务提供了一系列自动化和良好实践。也许值得一看。

# java - 将 WSDL/XSD 转换为 Android 应用程序的 java 类

> ID：15751370
> 
> 赞同：1
> 
> 时间：2013-04-01T20:34:11.843
> 
> 标签：java, android, eclipse

使用提供的 WSDL/XSD 自动生成 java 类的首选方法是什么？

我的计划是使用生成的类在 java 中创建必要的类对象，这些对象将作为所需参数发送到 RESTful Web 服务。我想简化流程以防止序列化/反序列化问题。我现在可以成功调用目标 RESTful Web 服务并传递简单的字符串，但还不能传递类对象。我不相信 JAXB 或 WSDL2Java 是 Android 应用程序的好选择。

我正在使用 Java ADT v21.0.1.xxx、apache.http.client.http 和 windows XP 开发盒。任何建议将不胜感激！

新手 Java/Android 开发人员，James

# python - OpenErp中两个字段的简单乘法

> ID：15751371
> 
> 赞同：0
> 
> 时间：2013-04-01T20:34:12.920
> 
> 标签：python, function, field, openerp, multiplication

我在一个类中有两个字段，在第三个字段中我需要之前声明的两个字段的乘法结果。

例如：

```
_columns = {
            'Item' : fields.integer('Items'),
            'Fecha': fields.date('Fecha del Documento', required=True, select=True),
            'Codigo Arancelario' : fields.integer('Codigo Arancelario'),
            'Descripcion Arancelaria' : fields.char('Descripcion Arancelaria', size=42, required = True, translate = True), 
            'Especificaciones Tecnicas' : fields.char('Especificaciones Tecnicas', size=60, required = True, translate = True), 
            'Cantidad' : fields.float('Cantidad'), 'Unidad de Medida': fields.many2one('product.uom', 'Unidad de Medida'),
            'Precio Unitario Declarado' : fields.float('Precio Unitario Declarado'), 'Moneda' : fields.many2one('res.currency', 'Moneda'),
            'Valor En Divisas' : Result of the multiplication of 'Precio Unitario Declarado' * 'Cantidad',
            'notas' : fields.text('Notas'),
            } 
```

我应该使用函数字段进行如此简单的计算吗？

有没有更简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T05:06:57.070

函数字段将是进行此类操作的不错选择。这是使用功能字段将两个字段相乘的示例代码。

```
def multi_a_b(self, cr, uid, ids, name, arg, context=None):
    res = {}
    for record in self.browse(cr, uid, ids,context):
        res[record.id] = record.field_a * record.field_b
    return res

_columns = {
    'field_a': fields.integer('A'),
    'field_b': fields.integer('B'),
    'field_c': fields.function(multi_a_b, type='integer', 'C'),
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-02T07:49:02.050

您需要结合这些答案。

首先将 c4 定义为 user1576199 的答案中指定的功能字段，然后创建 Atul 的答案中定义的 on_change 函数；

```
def onchange_value(self, cr, uid, ids, c1 = 0.0, c2 = 0.0, c3 = 0.0, context = None):
     return {'value': {'c4': c1 + c2 + c3}} 
```

但是，将 on_change 放在 c1 到 c3 的值上，而不是 c4，就像这样......

```
 <field name="c1" on_change="onchange_value(c1, c2, c3, context) />
 <field name="c2" on_change="onchange_value(c1, c2, c3, context)/>
 <field name="c3" on_change="onchange_value(c1, c2, c3, context)/>
 <field name="c4" /> 
```

c4 是一个功能字段，但您仍然可以在 on_change value 子句中为其他字段返回它，屏幕上的值将被刷新，但不会存储在数据库中，除非您将 store = True 添加到 c4 字段定义。

如果用户更改了 c1、c2 或 c3 字段中的任何一个，将调用 on_change 方法并重新计算总计并在显示屏上刷新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-08T17:37:42.620

这是可能的解决方案

```
from osv import osv, fields

def multi_price_qty(self, cr, uid, ids, name, arg, context=None):
    res = {}
    for product in self.browse(cr, uid, ids,context):
        res[product.id] = product.price * product.qty
    return res

class abs_product(osv.Model):
    _name = "abs.product"
    _columns = {
    'code': fields.char('Code', size=32),
    'description': fields.char('Description', size=64),
    'sizeunit': fields.char('Size /Unit', size=32),
    'qty': fields.integer('Quantity', size=32),
    'price': fields.integer('Price'),
    'pullout': fields.char('Pull-Out', size=32),
    'return': fields.char('Return', size=32),
    'offtake': fields.char('Offtake', size=32),
    'weeksales': fields.char('Weekly Sales', size=32),
    'date': fields.date('Date'),
    'totalprice': fields.function(multi_price_qty, type='integer', 'Total Price'),
    }
abs_product() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T04:34:26.443

我认为函数字段对于这种类型的计算是可以的。

或者您可以放置​​一个按钮的另一种方式，在按钮单击时将这两个字段值相乘。

# jsf - 将来自多个输入的值添加到数组列表

> ID：15751372
> 
> 赞同：0
> 
> 时间：2013-04-01T20:34:14.160
> 
> 标签：jsf, jsf-2

我有一个简单的问题，将输入中的值添加到`ArrayList`.

我有一个这样的 POJO：

```
public class Person {

    private String firstName;
    private String lastName;
    private List<String> friends=new ArrayList<>();
    //getters and setters 
```

然后是支持bean：

```
 public class backingBean{
          Person p=new Person();

          public void addPerson(){

             for(String friend:p.getFriends)
                System.out.println(friend);
           }

} 
```

和视图

```
 <h:form>
            <fieldset>
                <h:panelGrid columns="2">

                    <h:outputText value="Name" />
                    <h:inputText value="{backingBean.person.firstName}"/>              

                    <h:outputText value="LastName" />
                    <h:inputText value="#{backingBean.person.lastName}"/>

                    <h:outputText value="Friends" />
                    <h:inputText value="#{backingBean.person.friends}" />
                    <h:inputText value="#{backingBean.person.friends}" />

                </h:panelGrid>
                <h:commandButton  value="Add"
                    action="#{backingBean.addPerson}" />

            </fieldset>
        </h:form> 
```

当我尝试 addPerson 时，我收到此错误：

```
summary=(Conversion Error setting value... 
```

我不明白为什么将字符串转换为字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:39:01.570

你不能绑定`value`到`h:inputText`（`ArrayList`没有转换器）。当您提交表单（通过单击按钮）时，JSF 会尝试调用`setFriends(String)`，这就是发生这种`Exception`情况的地方。试着弄清楚你想用这两个`h:inputText`元素实现什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:13:52.210

如果您想添加 2 个朋友，只需在支持 bean 中创建 2 个不同的变量：

```
private String friend1;
private String friend2; 
```

然后像这样将它们添加到 addPerson 中：

```
 List<String> friends=new ArrayList<String>();
    friends.add(friend1);
    friends.add(friend2);

    p.setFriends(friends); 
```

未测试可能是一些错误。

编辑：

如果这不满足你，你可以看看这个@BalusC [ANSWER](https://stackoverflow.com/a/7257808/1692632)

# c++ - 运行时 C++ 编译

> ID：15751377
> 
> 赞同：3
> 
> 时间：2013-04-01T20:34:35.710
> 
> 标签：c++, dll, compiler-construction, runtime, shared-libraries

所以几个月前我观看了这段视频，Epic 展示了他们新的虚幻引擎 4 开发者功能。抱歉，我找不到视频，但我会尽力解释。

引起我注意的一个特性是 C++“动态”修改和编译。这家伙在编辑器中展示了他是如何玩游戏的，并修改了代码中的一些变量，保存它，并且这些更改立即反映在游戏中。

所以我一直在想......如何实现这一目标？目前我可以想到两种可能的方法：要么是恶作剧，它只是“c 风格”的脚本语言，而不是 C++ 本身，要么是共享库（阅读：DLL）的魔法。

这是我自己尝试的东西（简化）：

```
for(;;)
{
    Move DLL from build directory to execution directory
    Link to DLL using LoadLibrary() / dlopen() and fetch a pointer to function "foo()" from it
    for(;;)
    {
        Call the function "foo()" found in the dll
        Check the source of the dll for changes
        If it has changed, attempt to compile
        On succesfull compile, break
    }
    Unload DLL with FreeLibrary() / dlclose()
} 
```

现在这似乎可行，但我不禁想知道还有哪些其他方法？这种方法与使用脚本语言相比如何？

**编辑：** [https ://www.youtube.com/watch?v=MOvfn1p92_8&t=10m0s](https://www.youtube.com/watch?v=MOvfn1p92_8&t=10m0s)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:38:16.953

是的，“热代码修改”绝对是许多 IDE/调试器在某种程度上可以拥有的能力。这是一篇好文章：

*   [http://www.technochakra.com/debugging-modifying-code-at-runtime/](http://www.technochakra.com/debugging-modifying-code-at-runtime/)

这是 MSVS“编辑并继续”的手册页：

*   [http://msdn.microsoft.com/en-us/library/esaeyddf%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/esaeyddf%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-13T10:06:51.797

Epic 的热重载通过将游戏代码编译并加载为 dll/.so 来工作，然后由引擎动态加载。然后运行时重新加载只是重新编译库并重新加载，如果需要，状态存储和恢复。

有替代方案。您可以查看[Runtime Compiled C++](https://github.com/RuntimeCompiledCPlusPlus/RuntimeCompiledCPlusPlus)（或查看[RCC++ 博客和视频](http://runtimecompiledcplusplus.blogspot.com/)），或者尝试我在 wiki 上列出的其他[替代方案之一。](https://github.com/RuntimeCompiledCPlusPlus/RuntimeCompiledCPlusPlus/wiki/Alternatives)

作为 Runtime Compiled C++ 的作者，我认为它有一些优势——重新编译的速度要快得多，因为它只编译你需要的代码，并且起点可以是单个 exe，所以你不需要为一个dll。然而，它确实需要一些学习和一些额外的代码才能让它工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T20:37:45.377

C 和 C++ 都不需要提前编译，尽管通常的目标环境（操作系统、嵌入式系统、高性能数字运算）通常从 AOT 中受益匪浅。

完全有可能拥有一个 C++ 脚本解释器。只要它遵守标准中的行为，它就是 C++，而不是您建议的“骗局”。

也可以替换共享库，但要使其正常工作，您需要一种机制来序列化所有状态并在新版本下重新加载它。

# ruby-on-rails - Rails App Builder 中的命令行

> ID：15751378
> 
> 赞同：0
> 
> 时间：2013-04-01T20:34:38.933
> 
> 标签：ruby-on-rails, heroku

如果我创建了一个新的应用程序构建器类，如下所示：

```
class AppBuilder < Rails::AppBuilder 
```

有没有办法编写可以运行命令行参数的代码，例如

```
heroku create 
```

当我创建一个新应用程序时：

```
rails new blog -b app_builder.rb 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:22:36.380

这很简单，在我的应用程序构建器中我写道：

```
class AppBuilder < Rails::AppBuilder
  def leftovers
    run 'heroku create'
  end
end 
```

# javascript - 悬停时在flexslider上显示/隐藏控件？

> ID：15751385
> 
> 赞同：2
> 
> 时间：2013-04-01T20:35:16.000
> 
> 标签：javascript, jquery, jquery-plugins, flexslider

我有一个带有 prev/next 箭头的[flex 滑块，非常标准。](http://www.woothemes.com/flexslider/)我在页面加载时隐藏了箭头，只希望它们在用户将鼠标悬停在轮播信息上时出现。

这是我的代码：

```
$(".flex-container.home ul.flex-direction-nav").hide();
$(".flex-container.home .flexslider").hover(
    function(){
        $(".flex-container.home ul.flex-direction-nav").fadeIn();
    },
    function(){
        $(".flex-container.home ul.flex-direction-nav").fadeOut();
    }
) 
```

现在的问题是，当用户实际将鼠标悬停在箭头本身上时，它会淡出，因为从技术上讲，我要求它这样做。我尝试将一些 !important css 添加到 ul.flex-direction-nav css 样式中，但这并不能阻止淡出的发生。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T21:50:55.833

将您的代码更改为以下内容。我已经修改了您的选择器并使用**[了 fadeToggle()](http://api.jquery.com/fadeToggle/)**来节省您编写额外代码的时间。

这是新版本，它可以按照您指定的方式工作：

```
$(document).ready(function () {
  $(".flex-container.home ul.flex-direction-nav").hide();
  $(".flex-container.home").hover(function () {
         $(" ul.flex-direction-nav").fadeToggle();
  });    
}); 
```

[**这是一个工作 jsFiddle**](http://jsfiddle.net/h4krS/7/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T13:47:28.003

```
 pauseOnHover:true,  //this option working good 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-25T06:23:48.483

下面的css为我解决了这个问题-

```
.big-slider .flex-direction-nav {opacity: 0 !important;}
.big-slider .flex-direction-nav:hover {opacity: 1 !important;} 
```

# networking - 验证 SIP（ 会话发起协议）

> ID：15751388
> 
> 赞同：0
> 
> 时间：2013-04-01T20:35:35.900
> 
> 标签：networking, sip

在 SIP 的情况下验证 UDP 有效负载的机制/方法是什么？SIP消息不包含header或body的大小，那么如何验证payload是否有效？相反，RTP 表示大小，因此给定 UDP 标头的长度值，可以检查 RTP 的有效性和完整性。可以为 SIP 做类似的事情吗？

标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:16:23.603

你的问题有两个部分：

1.  **如何验证 SIP 标头？** 验证 SIP 标头的唯一方法是根据[RFC 3261 的第 7.3.1 节](https://www.rfc-editor.org/rfc/rfc3261#section-7.3.1)的规则解析它们。有许多不同语言的 SIP 解析器。

2.  **如何验证 SIP 消息的正文？** SIP 内置了一种机制：`Content-Length`标头指定正文的大小。在一般情况下，正文可以包含任意 MIME 类型，并且不应用进一步的验证规则。

**编辑：**根据 Frank Shearar 在下面的评论，`Content-Length`通过 UDP 传输的 SIP 消息不需要。但是，如果您的 UA 支持它，您可以利用它。

# batch-file - 执行补丁文件可能不起作用

> ID：15751394
> 
> 赞同：-1
> 
> 时间：2013-04-01T20:35:49.403
> 
> 标签：batch-file

我想创建一个**bat**文件来执行几个系列命令，例如我写了这段代码：

```
c:
netsh
advance 
```

但是前两行执行的问题，最后一行没有执行所以结果如下所示：

```
c:\>netsh
netsh> 
```

但结果必须是：

```
c:\>netsh
netsh>firewall
netsh firewall> 
```

所以防火墙是 netsh 家族的子命令，所以我该如何解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:03:32.383

用于`netsh -f script.txt`将脚本提供给`netsh`. 在此处键入`netsh /?`以获取详细信息或在线： [http ://technet.microsoft.com/en-ca/library/cc778925(v=ws.10).aspx](http://technet.microsoft.com/en-ca/library/cc778925(v=ws.10).aspx)

# ios - iOS 静态框架中的安全持久缓存

> ID：15751397
> 
> 赞同：0
> 
> 时间：2013-04-01T20:35:54.747
> 
> 标签：ios, sqlite, core-data, persistent-storage, ios-frameworks

我目前正在编写一个静态 iOS 框架，它将开发人员连接到我的 API，并根据用户的请求向他们返回客观化的信息。然而，为了让这个框架有价值，其中一个要求是这个框架必须能够在本地缓存信息并在网络连接不可用时返回离线副本。我知道我可以将此信息存储在 NSUserDefaults 中，但在某些情况下，缓存的信息可能是私有的，并且本地开发人员应该无法通过猜测正确的密钥来访问。我相信最好的方法将涉及某种加密，但我想看看除了 NSUserDefaults 之外，静态框架是否还有其他可用的存储选项。

如果可能的话，我想以客观化的格式保存我的数据。我有兴趣探索的两个解决方案是将我的离线数据保存在 SQLite 或 CoreData 中。但是，对于这两种方法，我担心这些文件将如何存储在框架中（我已经有一个嵌入式框架），以及在捆绑包中提供这些文件的架构以供开发人员查看的安全问题。

我正在研究的另一个解决方案是查看 iOS 是否支持任何工具，例如 gzip，这些工具可用于对我的文件进行密码保护，直到框架使用它们。

有没有人成功克服了这些问题？除了前面提到的可能的解决方案之外，我还有什么需要研究的吗？任何建议都将受到热烈欢迎。

谢谢。

PS 有谁知道我可以阅读与 iOS 安全或静态框架相关的任何资源？要么会非常有帮助。

# javascript - 当我清除表单输入（在 chrome 中）时，是什么导致了这种长时间的延迟？

> ID：15751399
> 
> 赞同：9
> 
> 时间：2013-04-01T20:35:59.200
> 
> 标签：javascript, html, google-chrome, reflow

### 概括

清除表单输入中的文本会导致 Chrome 出现长时间延迟（几秒）。似乎这会导致计算样式的重排或重新计算，但我不确定。Chrome 的 Profiler 和 Timeline 没有提供任何信息。

是什么导致延迟？我怎样才能消除它？这是我的代码中的错误，还是 Chrome 中的错误？

### 例子

[http://jsfiddle.net/jmilloy/dHFsQ/](http://jsfiddle.net/jmilloy/dHFsQ/)

要导致延迟，请在输入中键入，然后删除文本。当您删除最后一个字符或全选然后删除时，会出现延迟。

要消除延迟，请使用、或`row4`代替。现在您可以清除输入而不会造成延迟。`row1``row2``row3`

### 笔记

*   延迟取决于`n`行数。

*   它出现在 Chrome 中，但不在 Firefox 中。

*   它发生在 Linux（Ubuntu/Mint 11）和 Windows 7 中，但不是 OSX。任何人都可以确认吗？

* * *

*一旦我有一个表现出延迟行为的jsfiddle，我就完全重写了这个问题，并用一个更简单的例子再次重写。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T20:42:02.620

这似乎是[WebKit中的性能错误或](http://www.webkit.org/)[ICU](http://site.icu-project.org/)中的解析错误，可能两者兼而有之，但我倾向于认为问题出在 WebKit 中。

我在 OS X 上[从源代码构建 Chromium](http://www.chromium.org/Home)并验证构建存在问题。目前尚不清楚为什么它没有出现在 OS X 上的 Chrome 中。我在您的测试页面上分析了渲染器进程，发现它大部分时间都花在 ICU 中的函数`RuleBasedBreakIterator::handleNext()`和`RuleBasedBreakIterator::handlePrevious()`. 这是一个典型的堆栈跟踪：

```
Program received signal SIGINT, Interrupt.
icu_46::RuleBasedBreakIterator::handleNext (this=0x6a1f4600, statetable=0xafdbb50) at ../../third_party/icu/source/common/rbbi.cpp:1085
1085            if (state == STOP_STATE) {
(gdb) where
#0  icu_46::RuleBasedBreakIterator::handleNext (this=0x6a1f4600, statetable=0xafdbb50) at ../../third_party/icu/source/common/rbbi.cpp:1085
#1  0x09c2048f in icu_46::RuleBasedBreakIterator::next (this=0x6a1f4600) at ../../third_party/icu/source/common/rbbi.cpp:535
#2  0x09c23a30 in icu_46::RuleBasedBreakIterator::following (this=0x6a1f4600, offset=2377) at ../../third_party/icu/source/common/rbbi.cpp:693
#3  0x09c50399 in ubrk_following_46 (bi=0x6a1f4600, offset=2377) at ../../third_party/icu/source/common/ubrk.cpp:254
#4  0x03112489 in WebCore::textBreakFollowing (iterator=0x6a1f4600, pos=2377) at ../../third_party/WebKit/Source/WebCore/platform/text/TextBreakIteratorICU.cpp:380
#5  0x03111276 in WebCore::findNextWordFromIndex (chars=0x69a7a000, len=2848, position=2377, forward=true) at ../../third_party/WebKit/Source/WebCore/platform/text/TextBoundaries.cpp:77
#6  0x016352d3 in WebCore::nextWordPositionBoundary (characters=0x69a7a000, length=2848, offset=0, mayHaveMoreContext=WebCore::MayHaveMoreContext, needMoreContext=@0xc00078b2) at ../../third_party/WebKit/Source/WebCore/editing/VisibleUnits.cpp:695
#7  0x0163498a in WebCore::nextBoundary (c=@0xc0008440, searchFunction=0x1635220 <WebCore::nextWordPositionBoundary(unsigned short const*, unsigned int, unsigned int, WebCore::BoundarySearchContextAvailability, bool&)>) at ../../third_party/WebKit/Source/WebCore/editing/VisibleUnits.cpp:575
#8  0x016351c5 in WebCore::nextWordPosition (c=@0xc0008440) at ../../third_party/WebKit/Source/WebCore/editing/VisibleUnits.cpp:700
#9  0x0159d2ce in WebCore::Editor::updateMarkersForWordsAffectedByEditing (this=0x6abca710, doNotRemoveIfSelectionAtWordBoundary=true) at ../../third_party/WebKit/Source/WebCore/editing/Editor.cpp:2398
#10 0x0159ce7c in WebCore::Editor::respondToChangedContents (this=0x6abca710, endingSelection=@0xc0008578) at ../../third_party/WebKit/Source/WebCore/editing/Editor.cpp:556
#11 0x0159fa81 in WebCore::Editor::appliedEditing (this=0x6abca710, cmd=@0xc00085f0) at ../../third_party/WebKit/Source/WebCore/editing/Editor.cpp:863
#12 0x0162597a in WebCore::TypingCommand::typingAddedToOpenCommand (this=0x6a570fb0, commandTypeForAddedTyping=WebCore::TypingCommand::DeleteKey) at ../../third_party/WebKit/Source/WebCore/editing/TypingCommand.cpp:347
#13 0x01622e05 in WebCore::TypingCommand::deleteKeyPressed (this=0x6a570fb0, granularity=WebCore::CharacterGranularity, killRing=false) at ../../third_party/WebKit/Source/WebCore/editing/TypingCommand.cpp:525
#14 0x01621bfa in WebCore::TypingCommand::deleteKeyPressed (document=0x6abcc200, options=0, granularity=WebCore::CharacterGranularity) at ../../third_party/WebKit/Source/WebCore/editing/TypingCommand.cpp:120
#15 0x0159b945 in WebCore::Editor::deleteWithDirection (this=0x6abca710, direction=WebCore::DirectionBackward, granularity=WebCore::CharacterGranularity, killRing=false, isTypingAction=true) at ../../third_party/WebKit/Source/WebCore/editing/Editor.cpp:382
#16 0x015b5cc8 in WebCore::executeDeleteBackward (frame=0x6abca200) at ../../third_party/WebKit/Source/WebCore/editing/EditorCommand.cpp:339
#17 0x015b4e7f in WebCore::Editor::Command::execute (this=0xc0008c28, parameter=@0xc0008c20, triggeringEvent=0x0) at ../../third_party/WebKit/Source/WebCore/editing/EditorCommand.cpp:1706
#18 0x0419f8c4 in WebKit::WebFrameImpl::executeCommand (this=0x6a31f770, name=@0xc0008ca0, value=@0xc0008c98) at ../../third_party/WebKit/Source/WebKit/chromium/src/WebFrameImpl.cpp:1245
#19 0x07d5e3a1 in content::RenderViewImpl::handleCurrentKeyboardEvent (this=0x6a998000) at ../../content/renderer/render_view_impl.cc:2189
#20 0x07d5e452 in non-virtual thunk to content::RenderViewImpl::handleCurrentKeyboardEvent() (this=0x6a998314) at ../../content/renderer/render_view_impl.cc:2195
#21 0x040f97dc in WebKit::EditorClientImpl::handleKeyboardEvent (this=0x6a9ba674, evt=0x190468e0) at ../../third_party/WebKit/Source/WebKit/chromium/src/EditorClientImpl.cpp:645
#22 0x01599799 in WebCore::Editor::handleKeyboardEvent (this=0x6abca710, event=0x190468e0) at ../../third_party/WebKit/Source/WebCore/editing/Editor.cpp:212
#23 0x01a9713d in WebCore::EventHandler::defaultKeyboardEventHandler (this=0x6abca854, event=0x190468e0) at ../../third_party/WebKit/Source/WebCore/page/EventHandler.cpp:3325
#24 0x07790701 in WebCore::Node::defaultEventHandler (this=0x19049eb0, event=0x190468e0) at ../../third_party/WebKit/Source/WebCore/dom/Node.cpp:2475
#25 0x048aa253 in WebCore::HTMLTextFormControlElement::defaultEventHandler (this=0x19049eb0, event=0x190468e0) at ../../third_party/WebKit/Source/WebCore/html/HTMLTextFormControlElement.cpp:111
#26 0x0480cf5f in WebCore::HTMLInputElement::defaultEventHandler (this=0x19049eb0, evt=0x190468e0) at ../../third_party/WebKit/Source/WebCore/html/HTMLInputElement.cpp:1159
#27 0x0772ac59 in WebCore::EventDispatcher::dispatchEventPostProcess (this=0xc0009048, preDispatchEventHandlerResult=0x0) at ../../third_party/WebKit/Source/WebCore/dom/EventDispatcher.cpp:208
#28 0x07729cc6 in WebCore::EventDispatcher::dispatch (this=0xc0009048) at ../../third_party/WebKit/Source/WebCore/dom/EventDispatcher.cpp:127
#29 0x07728b03 in WebCore::EventDispatchMediator::dispatchEvent (this=0x190f6f90, dispatcher=0xc0009048) at ../../third_party/WebKit/Source/WebCore/dom/EventDispatchMediator.cpp:54
#30 0x07728f50 in WebCore::EventDispatcher::dispatchEvent (node=0x19049eb0, mediator=@0xc0009130) at ../../third_party/WebKit/Source/WebCore/dom/EventDispatcher.cpp:56
#31 0x0778f078 in WebCore::Node::dispatchEvent (this=0x19049eb0, event=@0xc0009198) at ../../third_party/WebKit/Source/WebCore/dom/Node.cpp:2351
#32 0x077405e1 in WebCore::EventTarget::dispatchEvent (this=0x19049eb0, event=@0xc00092e8, ec=@0xc00092e0) at ../../third_party/WebKit/Source/WebCore/dom/EventTarget.cpp:147
#33 0x01a9688a in WebCore::EventHandler::keyEvent (this=0x6abca854, initialKeyEvent=@0xc00093c0) at ../../third_party/WebKit/Source/WebCore/page/EventHandler.cpp:3207
#34 0x04236521 in WebKit::WebViewImpl::handleKeyEvent (this=0x6a9ba600, event=@0x1900f2e8) at ../../third_party/WebKit/Source/WebKit/chromium/src/WebViewImpl.cpp:1003
#35 0x04236def in non-virtual thunk to WebKit::WebViewImpl::handleKeyEvent(WebKit::WebKeyboardEvent const&) (this=0x6a9ba628, event=@0x1900f2e8) at ../../third_party/WebKit/Source/WebKit/chromium/src/WebViewImpl.cpp:1015
#36 0x0413554d in WebKit::PageWidgetDelegate::handleInputEvent (page=0x6a9baa00, handler=@0x6a9ba628, event=@0x1900f2e8) at ../../third_party/WebKit/Source/WebKit/chromium/src/PageWidgetDelegate.cpp:144
#37 0x0423bebb in WebKit::WebViewImpl::handleInputEvent (this=0x6a9ba600, inputEvent=@0x1900f2e8) at ../../third_party/WebKit/Source/WebKit/chromium/src/WebViewImpl.cpp:2058
#38 0x07db4d90 in content::RenderWidget::OnHandleInputEvent (this=0x6a998000, input_event=0x1900f2e8, is_keyboard_shortcut=true) at ../../content/renderer/render_widget.cc:732
#39 0x07dca53b in DispatchToMethod<content::RenderWidget, void (content::RenderWidget::*)(WebKit::WebInputEvent const*, bool), WebKit::WebInputEvent const*, bool> (obj=0x6a998000, method=not implemented: member type in c_val_print
) at tuple.h:553
#40 0x07dc2235 in ViewMsg_HandleInputEvent::Dispatch<content::RenderWidget, content::RenderWidget, void (content::RenderWidget::*)(WebKit::WebInputEvent const*, bool)> (msg=0x190279c8, obj=0x6a998000, sender=0x6a998000, func=not implemented: member type in c_val_print
) at view_messages.h:867
#41 0x07db3488 in content::RenderWidget::OnMessageReceived (this=0x6a998000, message=@0x190279c8) at ../../content/renderer/render_widget.cc:307
#42 0x07d50bae in content::RenderViewImpl::OnMessageReceived (this=0x6a998000, message=@0x190279c8) at ../../content/renderer/render_view_impl.cc:1136
#43 0x082c9133 in content::MessageRouter::RouteMessage (this=0x190a252c, msg=@0x190279c8) at ../../content/common/message_router.cc:49
#44 0x082c9085 in content::MessageRouter::OnMessageReceived (this=0x190a252c, msg=@0x190279c8) at ../../content/common/message_router.cc:41
#45 0x07f410b9 in content::ChildThread::OnMessageReceived (this=0x190a2514, msg=@0x190279c8) at ../../content/common/child_thread.cc:274
#46 0x03fec745 in IPC::ChannelProxy::Context::OnDispatchMessage (this=0x19098a40, message=@0x190279c8) at ../../ipc/ipc_channel_proxy.cc:261
#47 0x03ff5920 in base::internal::RunnableAdapter<void (IPC::ChannelProxy::Context::*)(IPC::Message const&)>::Run (this=0xc000b1d0, object=0x19098a40, a1=@0x190279c8) at bind_internal.h:190
#48 0x03ff580f in base::internal::InvokeHelper<false, void, base::internal::RunnableAdapter<void (IPC::ChannelProxy::Context::*)(IPC::Message const&)>, void ()(IPC::ChannelProxy::Context* const&, IPC::Message const&)>::MakeItSo (runnable=Unexpected type (16) encountered for integer constant.
) at bind_internal.h:899
#49 0x03ff5744 in base::internal::Invoker<2, base::internal::BindState<base::internal::RunnableAdapter<void (IPC::ChannelProxy::Context::*)(IPC::Message const&)>, void ()(IPC::ChannelProxy::Context*, IPC::Message const&), void ()(IPC::ChannelProxy::Context*, IPC::Message)>, void ()(IPC::ChannelProxy::Context*, IPC::Message const&)>::Run (base=0x190279b0) at bind_internal.h:1257
#50 0x026c51fb in base::Callback<void ()()>::Run (this=0xc000b464) at callback.h:396
#51 0x0438583a in base::MessageLoop::RunTask (this=0xc000d058, pending_task=@0xc000b450) at ../../base/message_loop.cc:474
#52 0x04385c92 in base::MessageLoop::DeferOrRunPendingTask (this=0xc000d058, pending_task=@0xc000b450) at ../../base/message_loop.cc:486
#53 0x04385e92 in base::MessageLoop::DoWork (this=0xc000d058) at ../../base/message_loop.cc:669
#54 0x042e280b in base::MessagePumpCFRunLoopBase::RunWork (this=0x6a16ef60) at ../../base/message_pump_mac.mm:252
#55 0x042e1fc2 in base::MessagePumpCFRunLoopBase::RunWorkSource (info=0x6a16ef60) at ../../base/message_pump_mac.mm:230
#56 0x9bc7e13f in __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ ()
#57 0x9bc7daf6 in __CFRunLoopDoSources0 ()
#58 0x9bca79c8 in __CFRunLoopRun ()
#59 0x9bca71dc in CFRunLoopRunSpecific ()
#60 0x9bca7088 in CFRunLoopRunInMode ()
#61 0x92f83543 in RunCurrentEventLoopInMode ()
#62 0x92f8a8ab in ReceiveNextEventCommon ()
#63 0x92f8a71a in BlockUntilNextEventMatchingListInMode ()
#64 0x99b31ee8 in _DPSNextEvent ()
#65 0x99b31752 in -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] ()
#66 0x99b2dac1 in -[NSApplication run] ()
#67 0x042e372e in base::MessagePumpNSApplication::DoRun (this=0x6a16ef60, delegate=0xc000d058) at ../../base/message_pump_mac.mm:576
#68 0x042e2578 in base::MessagePumpCFRunLoopBase::Run (this=0x6a16ef60, delegate=0xc000d058) at ../../base/message_pump_mac.mm:171
#69 0x043850a2 in base::MessageLoop::RunInternal (this=0xc000d058) at ../../base/message_loop.cc:431
#70 0x04384f5b in base::MessageLoop::RunHandler (this=0xc000d058) at ../../base/message_loop.cc:404
#71 0x043ea808 in base::RunLoop::Run (this=0xc000ccc0) at ../../base/run_loop.cc:45
#72 0x04384357 in base::MessageLoop::Run (this=0xc000d058) at ../../base/message_loop.cc:311
#73 0x07dd3a14 in content::RendererMain (parameters=@0xc000d348) at ../../content/renderer/renderer_main.cc:226
#74 0x086f4324 in content::RunNamedProcessTypeMain (process_type=@0xc000d368, main_function_params=@0xc000d348, delegate=0xc000d5a0) at ../../content/app/content_main_runner.cc:459
#75 0x086f5788 in content::ContentMainRunnerImpl::Run (this=0x6a16c080) at ../../content/app/content_main_runner.cc:764
#76 0x086f3457 in content::ContentMain (argc=7, argv=0xc000d620, delegate=0xc000d5a0) at ../../content/app/content_main.cc:35
#77 0x00017d2c in ChromeMain (argc=7, argv=0xc000d620) at ../../chrome/app/chrome_main.cc:32
#78 0x0000ff7b in main (argc=7, argv=0xc000d620) at ../../chrome/app/chrome_exe_main_mac.cc:16
(gdb) 
```

该错误似乎不在布局中（尽管看起来布局正在更新）。看起来问题在于更新拼写检查标记 - 就是`WebCore::Editor::updateMarkersForWordsAffectedByEditing()`这样。花时间试图找出要更新的内容的范围 - 它使用`RuleBasedBreakIterator`来确保范围开始和结束在“单词”边界上。边界搜索基本上一直加一个字，问：“这是一个完整的词吗？” 这是单词长度的 O(n^2) 但由于某种原因，对完整单词的测试一直失败，并且 n 是数千个......我用时间验证了行为确实是 O(n^2)表行数。`WebCore::nextBoundary()`这是（`searchFunction`是`WebCore::nextWordPositionBoundary`和是测试完整单词的搜索循环）：

```
while (!it.atEnd()) {
    // Keep asking the iterator for chunks until the search function
    // returns an end value not equal to the length of the string passed to it.
    if (!inTextSecurityMode)
        string.append(it.characters(), it.length());
    else {
        // Treat bullets used in the text security mode as regular characters when looking for boundaries
        String iteratorString(it.characters(), it.length());
        iteratorString.fill('x');
        string.append(iteratorString.characters(), iteratorString.length());
    }
    next = searchFunction(string.data(), string.size(), prefixLength, MayHaveMoreContext, needMoreContext);
    if (next != string.size())
        break;
    it.advance();
} 
```

无论您拥有多少省略号行，在 UTF-16 中，字符串的内容似乎都是“,\n...\n...\n...”。我不知道为什么`WebCore::nextWordPositionBoundary()`没有在换行符处检测到边界，我也不确定为什么它在`<input>`标签文本之外寻找。

我验证了 WebKit 夜间构建中存在该错误，并[使用 WebKit 提交了一个错误](https://bugs.webkit.org/show_bug.cgi?id=114088)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T19:31:22.163

**这是 WebKit 中的一个错误（*[主页](http://www.webkit.org/)/[维基百科文章](http://en.wikipedia.org/wiki/WebKit)*）。**

我已经能够在以下操作系统/浏览器组合中重现此问题：

*   Windows 7 SP1 / Chrome 26.0.1410.43 m

*   OS X 10.8.3 / Safari 6.0.3 (8536.28.10)

*   [Arch Linux 3.8.5-1](https://www.archlinux.org/) / [Chromium](http://www.chromium.org/) 26.0.1410.43 (189671)（预编译）

*   [Ubuntu 12.10](http://www.ubuntu.com/) / Chromium 25.0.1364.160-0ubuntu0.12.10.1（预编译，可从 Ubuntu 软件中心获得）

因此，它本身无法通过 JavaScript 修复 - 您的解决方案是使用不同的显示方法*。*如：

```
<tr><td style="border-bottom: dotted 1px #000; width: 5px; height: 10px;"></td></tr> 
```

或者

```
<tr><td><span style="display: inline-block; border-bottom: dotted 1px #000; width: 10px;"></span></td></tr> 
```

这是一个[jsFiddle](http://jsfiddle.net/dHFsQ/6/) - 根据您的意图，其中一个可能会起作用。不幸的是，我尝试使用`&#8230;`and `&#46;&#46;&#46;`，但无济于事。

* * *

如前所述，这种行为在 Firefox 上看不到，也没有**：**

*   Windows 7 SP1 / Internet Explorer 10

*   iPhone iOS 6.1.2 / Safari

*   iPad iOS 6.1.3 / Safari

* * *

**对于那些不知道的人来说，仅供参考**

**WebKit：** WebKit 是一种布局引擎软件，旨在允许网络浏览器呈现网页。^(（维基百科）) WebKit 目前被 Chrome、Chromium 和 Safari 使用（截至撰写本文时，2013-04-05）。

**Chromium：** Chromium 是一个开源 Web 浏览器项目，Google Chrome 从中提取其源代码。浏览器共享大部分代码和功能，尽管存在一些细微差别。^(（维基百科）)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T14:53:50.033

在这部分代码中：

```
for (var i=0; i<peptides.data.length; i++)
  trs += peptides.row(peptides.data[i]); 
```

如果您`peptides.data`以任何方式添加或更改长度，则可能会出现无限循环。这是因为`peptides.data.length`对循环的每次迭代都进行了评估。上面的代码中似乎没有发生这种情况，但您确实说它是一个删节版本。无论哪种方式，如果您不必`peptides.data.length`每次都进行评估，您的代码会更快一些，因此无论如何都值得更改：

```
for (var i=0, len = peptides.data.length; i<len; i++)
  ... 
```

编辑-现在这个问题已经更新，我可以清楚地看到 OP 描述的问题；我也很想看看是否有比我聪明的人能弄清楚这里发生了什么。

# grails - Grails 邮件传递在本地工作正常，但在具有相同配置的实时服务器（Jelastic）上失败

> ID：15751401
> 
> 赞同：2
> 
> 时间：2013-04-01T20:36:02.960
> 
> 标签：grails, grails-plugin

我有一个带有邮件插件 1.0.1 的 grails 2.2.1 应用程序。

当我在本地运行应用程序（grails dev run-app）时，通过 Gmail smtp 服务器的邮件传递工作正常，但在生产服务器（位于[Jelastic](http://www.jelastic.com)云平台上）上失败，我将其部署为 war 文件。

配置.groovy：

```
// Mail
grails {
   mail {
     host = "smtp.gmail.com"
     port = 465
     username = "aut********@gmail.com"   // *** = just blacked out
     password = "sun1******"              // *** = just blacked out
       props = ["mail.smtp.auth":"true",
                "mail.smtp.starttls.required": "false",
                "mail.smtp.socketFactory.port":"465",
                "mail.smtp.socketFactory.class":"javax.net.ssl.SSLSocketFactory",
                "mail.smtp.socketFactory.fallback":"false"]
   }
} 
```

但是我只有一个邮件插件配置，因此假设该配置适用于开发和生产环境。

事实上，当我解压缩war文件并通过反编译器检查类（在我的例子中：Config$_run_closure2_closure8_closure13.class）时，我可以在那里看到正确的配置值：

![在此处输入图像描述](https://i.stack.imgur.com/iDbLU.png)

放大：http: [//i.troll.ws/638ef33d.png](http://i.troll.ws/638ef33d.png)

错误信息：

```
Caused by: org.springframework.mail.MailAuthenticationException: Authentication failed; nested exception is javax.mail.AuthenticationFailedException: 535-5.7.1 Username and Password not accepted. Learn more at
535 5.7.1 http://support.google.com/mail/bin/answer.py?answer=14257 d47sm23030880eem.9 - gsmtp

    at grails.plugin.mail.MailMessageBuilder.sendMessage(MailMessageBuilder.groovy:104)
    at grails.plugin.mail.MailService.sendMail(MailService.groovy:41)
    at MailGrailsPlugin$_configureSendMail_closure6.doCall(MailGrailsPlugin.groovy:170)
    at com.oritrack.core.ApiController.register(ApiController.groovy:212)
    ... 5 more
Caused by: javax.mail.AuthenticationFailedException: 535-5.7.1 Username and Password not accepted. Learn more at
535 5.7.1 http://support.google.com/mail/bin/answer.py?answer=14257 d47sm23030880eem.9 - gsmtp

    at com.sun.mail.smtp.SMTPTransport$Authenticator.authenticate(SMTPTransport.java:648)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:583)
    at javax.mail.Service.connect(Service.java:291)
    ... 9 more 
```

认证失败太奇怪了；所以它至少在尝试连接到正确的服务器；并且 Config.groovy 中的用户名/密码是我在那里拥有的唯一一组邮件插件配置。如果它在本地运行，它必须在其他地方运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T01:26:59.493

当某些东西在开发中而不是在生产中起作用时，通常的罪魁祸首（根据我的经验）是依赖关系。检查您的 WAR 以获取同一 jar 的多个版本，例如 java-mail-1.0.jar 和 java-mail-1.2.jar。不要将搜索限制在 java-mail.jar，这只是一个示例。

如果您发现一个 jar 的多个版本，请尝试删除一个并部署您的战争，如果它有效...huzzah！

要查找 jar 中引入的插件，请使用“grails dependency-report”。一旦你找到了 jar 中的内容，你可以通过在 BuildConfig.groovy 中使用 excludes 语法执行类似的操作来删除它。

```
 dependencies {
  compile("org.apache.shiro:shiro-quartz:1.1.0") {
    excludes("quartz")
  }
  runtime('org.codehaus.groovy.modules.http-builder:http-builder:0.5.0') {
    excludes 'xalan'
    excludes 'xml-apis'
    excludes 'groovy'
 }
} 
```

我已经解决了一些非常奇怪的错误，其中之一包括由于多个 http-client jars 而失败的 http 身份验证。

# android - 带有 Maven 和 IntelliJ 的 Android

> ID：15751403
> 
> 赞同：1
> 
> 时间：2013-04-01T20:36:13.287
> 
> 标签：android, maven, ant, build-process, android-maven-plugin

在过去的 3 周里，我大量使用了 Android Maven 构建过程。在大多数情况下，我发现它比 Eclipse 的体验要好得多，但有几个问题我想回答：

*   有没有办法让 Eclipse 在不将项目导入 Eclipse 的情况下使用 APKLIB 文件？
*   使用 Maven 有没有办法在不卸载应用程序的情况下将 APK 推送到设备？使用 mvn android:deploy 卸载 APK 并安装一个新的。
*   我还没有让 Android JavaDoc 在 IntelliJ 中正常工作，有什么解决方案吗？
*   IntelliJ 是否与 NDK 配合得很好？

我对平台最佳构建过程中的任何技巧持开放态度，因为这将是我前进的方向。我应该去 Ant 还是 Maven？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:16:38.923

1.  Eclipse 中的 APKLIB 支持仍然不完全存在。使用 m2eclipse 和 m2eandroid 并可能有助于 m2eandroid 的补丁。

2.  mvn android:deploy 可以将 apk 安装到设备（或所有连接的设备）。mvn android:run 可以启动它。取消部署和重新部署工作。

3.  maven android sdk deployer 也可以部署源代码，它应该可以很好地与 intellij 和 maven 集成

4.  NDK 和 Intellij - 不是用于编写代码，而是通过 Maven 的构建过程在 Intellij 中也可以正常工作。

最后但并非最不重要的......你绝对不应该去蚂蚁。Maven 或使用即将推出的新 Gradle 构建。不要将时间浪费在旧的（很快将被弃用的）Ant 构建及其所有问题上。

# xml - 无法针对 xsd 验证我的 xml

> ID：15751408
> 
> 赞同：-2
> 
> 时间：2013-04-01T20:36:35.210
> 
> 标签：xml, xsd

请告诉我建议在哪里更正...我尝试了很多，但无法在[http://xmlvalidator.new-studio.org/](http://xmlvalidator.new-studio.org/)上验证 我的 xml 是

```
 <?xml version="1.0" standalone="yes"?>
<timeofownership>
<user name="Sana Smith">
<location type="Appartment">
  <articles>
    <pid>AA</pid>
    <product>Laptop</product>
    <OwnFor>30 Days 3 Months 4 Years</OwnFor>
  </articles>
</location>
</user>
<user name="Rooney Mara">
<location type="House">
  <articles>
    <pid>DD</pid>
    <product>iPhone</product>
    <OwnFor>10 Days 4 Months 1 Years</OwnFor>
  </articles>
 </location>
 </user>
 <user name="Rooney Mara">
 <location type="House">
  <articles>
    <pid>TT</pid>
    <product>iPad</product>
    <OwnFor>10 Days 4 Months 0 Years</OwnFor>
  </articles>
  </location>
 </user>
 <user name="Sana Smith">
 <location type="House">
  <articles>
    <pid>BB</pid>
    <product>Desktop</product>
    <OwnFor>5 Days 3 Months 3 Years</OwnFor>
  </articles>
</location>
 </user>
 <user name="Peter Parker">
  <location type="House">
  <articles>
    <pid>CC</pid>
    <product>Fridge</product>
    <OwnFor>30 Days 7 Months 0 Years</OwnFor>
  </articles>
  </location>
  </user>
 <user name="Mia Chu">
  <location type="Appartment">
  <articles>
    <pid>ZZ</pid>
    <product>PS3</product>
    <OwnFor>30 Days 2 Months 0 Years</OwnFor>
   </articles>
  </location>
  </user>
  </timeofownership> 
```

Schema XSD 是——

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
 <xs:element name="timeofownership" >
 <xs:complexType>
  <xs:sequence>
    <xs:element name="user" minOccurs="0" maxOccurs="unbounded">
      <xs:complexType>
        <xs:element name="location">
          <xs:complexType>
            <xs:element name="articles">
              <xs:complexType>
                <xs:sequence>
                  <xs:element name="pid" type="xs:string"/>
                  <xs:element name="product" type="xs:string"/>
                  <xs:element name="OwnFor" type="xs:string"/>
                </xs:sequence>
              </xs:complexType>
            </xs:element>
            <xs:attribute name="type" type="xs.string"/>
          </xs:complexType>
        </xs:element>
        <xs:attribute name="name" type="xs:string"/>
      </xs:complexType>
    </xs:element>
  </xs:sequence>
 </xs:complexType>
 </xs:element>
</xs:schema> 
```

请给我解决这个问题。期待中的感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:49:01.590

在您对`location`and`user`节点的定义中，您忘记将元素包装在某种分组节点中。

你不能这样做：

```
<xs:complexType>
  <xs:element name="foo">
    ...
  </xs:element>
  <xs:attribute name="bar" type="xs:string"/>
<xs:complexType> 
```

你必须把它包起来，在你的情况下可能是`xs:all`

```
<xs:complexType>
  <xs:all minOccurs="1">
    <xs:element name="foo">
      ...
    </xs:element>
  </xs:all>
  <xs:attribute name="bar" type="xs:string"/>
</xs:complexType> 
```

# c++ - 如何使循环队列线程安全？

> ID：15751410
> 
> 赞同：3
> 
> 时间：2013-04-01T20:36:38.323
> 
> 标签：c++, multithreading, queue

所以我的入队和出队函数如下。如何获取我拥有的东西并使其线程安全？我考虑过使用 Windows.h 中的互斥锁，但如果可能的话，我不想将我的程序限制为仅限 Windows。

```
void Queue::Enqueue(int num){
    //increase recorded size
    size++;
    //stick in num
    numbers[nextSpace] = num;
    //find the next available space
    nextSpace = (++nextSpace) % maxSize;
}

int Queue::Dequeue(){
    int temp;
    temp = items[curSpace];
    curSpace = (++curSpace) % maxSize;
    size--;
    return temp;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:46:08.397

您可以参考此代码（使用 pthreads）：

```
#include<pthread.h> 
#define DEFAULT_SIZE 100
class circularQueue{
 private:
    int *m_queue;
    int p_head;
    int p_tail;
    int m_cap;
    pthread_mutex_t mp = PTHREAD_MUTEX_INITIALIZER; 
    public:
        circularQueue(int size)
        {
            /*in case invalid input*/
            if(size<0)
                size = DEFAULT_SIZE ;

            m_queue = new int[size];
            p_head = 0;
            p_tail = -1;
            m_cap = 0;
            pthread_mutex_init(&mp,NULL);
        }

        bool enqueue(int x)
        {
            bool res= false;
            p_thread_mutex_lock(&mp);
            /*queue is full*/
            if(m_cap == size)
            {
                res = false;
            }
            else
            {
                m_queue[(++p_tail)%size)] = x;
                ++m_cap;
                res = true;
            }
            p_thread_mutex_unlock(&mp);
            return res;
        }
        int dequeue()
        {
            int res=0;

            pthread_mutex_lock(&mp);
            /*empty queue*/
            if(m_cap == 0)
            {    
                throw("empty queue!");
                pthread_mutex_unlock(&mp);
            }
            else{
                res = m_queue[p_head];    
                p_head = (p_head+1)%size;
            }
            pthread_mutex_unlock(&mp);
            return res;
        }    
        ~virtual circularQueue()
        {
            delete[] m_queue;
            m_queue = NULL;
            pthread_mutex_destroy(&mp);
        }
} 
```

# javascript - 如何将 Cocos2d-javascript 引擎与 Eclipse 集成？

> ID：15751412
> 
> 赞同：1
> 
> 时间：2013-04-01T20:36:42.633
> 
> 标签：javascript, eclipse

我是 JS 开发的新手，所以请原谅我的这个问题。我没有找到有关此主题的任何信息。

Cocos2d-javascript 创建了一个特定的结构，并有一些用于编译项目的脚本。所以我看到的唯一选择是使用记事本++或其他编辑器。是否可以将其集成到 Eclipse 中？

# javascript - Handlebars.js 中“每个”内部的变量未定义

> ID：15751413
> 
> 赞同：5
> 
> 时间：2013-04-01T20:36:44.423
> 
> 标签：javascript, handlebars.js

**我有我的渲染功能：**

```
renderTracksList = function(tracks){
    var source   = $("#timeline-template").html();
    var template = Handlebars.compile(source);
    var data     = {
                    tracks: tracks, 
                    client_id: App.config.client_id
                };

    var html     = template(data);

    $('#timeline').html(html);
} 
```

在我的模板中，我试图在循环中使用 print `client_id`，但是在循环上下文中它是未定义的，那么如何访问和打印变量？

```
{{#each tracks}}
<div class="track">
    {{title}} - 
    <a href="javascript:App.play('{{permalink_url}}')">PLAY</a>
    {{#if downloadable}}
    - <a href="{{download_url}}?client_id={{client_id}}" target="_blank">DOWNLOAD</a>
    {{/if}}
</div>
{{/each}} 
```

**顺便说一句，我已经尝试过这个：**

```
<a href="{{download_url}}?client_id={{../client_id}}" target="_blank">DOWNLOAD</a> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-01T20:46:19.050

尝试对`../`the`{{#if}}`和 the重复`{{#each}}`：

```
<a href="{{download_url}}?client_id={{../../client_id}}" target="_blank">DOWNLOAD</a> 
```

即使`{{#if}}`保留了前一个上下文的值，它仍然会在堆栈中创建另一个返回的条目`../`。

# javascript - 将数据拆分为两个 json 文件，一个用于分类结构，一个用于（原始）数据项，这是一个好主意吗？

> ID：15751414
> 
> 赞同：0
> 
> 时间：2013-04-01T20:36:44.797
> 
> 标签：javascript, json

我基本上是在构建一个快速而肮脏的课程目录，其中包含多个分层类别和属于这些类别的不同级别的课程。

在旧的实现中，每个主要类别都是其自己的 HTML 页面，与该类别相关的所有课程都只是以 html 格式写入该页面。目录过去主要是静态的，因此效果很好，但是现在可能会更频繁地添加课程和类别，并且将来某些用户视图选项可能会更改/扩展。

我想我会将所有原始数据（课程和目录结构）分离成 JSON，然后根据这些数据生成视图。我认为这样可以更轻松地维护内容，而无需处理适当的 CMS 或数据库。每当我需要添加一门课程时，我都会将其放入 json 文件中。

第一个问题：你会推荐这个吗？

第二个问题：如果您认为使用 JSON 是一个好主意，您是否会将课程的分类结构分离为两个 JSON 文件，然后使用 JS 操作它们？或者您是否会拥有一个 JSON，其中包含嵌入目录类别结构中的课程数据？

这是我正在考虑的一个示例。也许在将它们输出到 HTML 列表视图之前，我会使用 Underscore 正确合并这两个数据（课程推送到适当类别中的“课程”数组中）。

```
// JSON of categorical STRUCTURE / HIERARCHY
{
    "catalog":{
        "name":"Course Catalog",
        "categories":[
            {
                "name":"Category A",
                "categories":[
                    {
                        "name":"Category A1",
                        "categories":[
                            {"name":"Category A1a"}
                        ]
                    },{
                        "name":"Category A2",
                        "categories":[
                            {"name":"Category A2a"},
                            {"name":"Category A2b"},
                            {"name":"Category A2c"}
                        ]
                    },{
                        "name":"Category A3",
                        "categories":[
                            {"name":"Category A3a"},
                            {"name":"Category A3b"},
                            {"name":"Category A3c"}
                        ]
                    }
                ]
            },{
                "name":"Category B"
            },{
                "name":"Category C"
            }
        ]
    }
}

// JSON array of all courses (to be plugged into the structure later through code,
// then output to HTML as nested lists etc.)
{
    "courses":[
        {
            "name":"Course AAA",
            "category":"Category A1a",
            "abstract":"Some sort of short string description.",
            "description":"Some sort of longer string description that will be used in the object."
        },
        {
            "name":"Course BBB",
            "category":"Category A1b",
            "abstract":"Some sort of short string description.",
            "description":"Some sort of longer string description that will be used in the object."
        },
        {
            "name":"Course CCC",
            "category":"Category B",
            "abstract":"Some sort of short string description.",
            "description":"Some sort of longer string description that will be used in the object."
        },
    ]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T17:06:32.557

首先，如果您的数据将包含数百或数千个条目，我将使用数据库来管理它。它只会让生活变得更简单，并减少数据损坏的机会。

它还将加速您的应用程序，因为数据库查询比文件查询快得多（除非您预加载文件；但是如果您有很大的文件，预加载也会对您的应用程序性能产生负面影响。）

但是，如果您没有*那么多（这是主观的，但我会说少于 100 个）*条目，您需要跟踪您可以按照您建议使用 json 的方式进行操作。（这几乎是[sqlite](http://www.sqlite.org/)所做的）。

如果您最终采用这种方式，我将使用多文件方法来实现，这基本上会给您提供与多表数据库相同的结构。

最后，我会考虑使用[pure](http://beebole.com/pure/)将 json 数据集成到您的视图中。特别是对于 2 个文件设置，请查看使用[指令和数据](http://beebole.com/pure/demos/)的示例（该页面上的第 4 个示例。

# sql - SQL Server 中的连接表

> ID：15751420
> 
> 赞同：0
> 
> 时间：2013-04-01T20:37:06.853
> 
> 标签：sql, database, sql-server-2008-r2, junction-table

我在新数据库中创建联结表时遇到困难。我使用这些查询来创建表：

```
CREATE TABLE dbo.EmployeeUnavailability 
(
 ID INT IDENTITY(1,1) PRIMARY KEY,
 EmployeeName varchar(50),
 Monday varchar(10),
 Tuesday varchar(10),
 Wednesday varchar(10),
 Thursday varchar(10),
 Friday varchar(10),
 Saturday varchar(10),
 Sunday varchar(10),
 SupervisorName varchar(50),
)
GO 

CREATE TABLE dbo.EmployeeAttendance
(
 ID INT IDENTITY(1,1) PRIMARY KEY,
 EmployeeName varchar(50),
 Monday varchar(20),
 Tuesday varchar(20),
 Wednesday varchar(20),
 Thursday varchar(20),
 Friday varchar(20),
 Saturday varchar(20),
 Sunday varchar(20),
 SupervisorName varchar(50),
)
GO 

CREATE TABLE dbo.EmployeePerformance 
(
 ID INT IDENTITY(1,1) PRIMARY KEY,
 EmployeeName varchar(50),
 Attitude varchar(250),
 AttitudeDD tinyint,
 WorkQuality varchar(250),
 WorkQualityDD tinyint,
 Communication varchar(250),
 CommunicationDD tinyint,
 Leadership varchar(250),
 LeadershipDD tinyint,
 ImprovementAchievement varchar(250),
 ImprovementAchievementDD tinyint,
 SupervisorName varchar(50),
)
GO 
```

从那里开始，我很难创建一个引用所有三个表的连接表。三个表中的员工姓名和主管姓名将相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:49:02.077

拥有一个引用所有 3 个表的表在 IMO 中并不是一个好主意。它将允许该联结表中的行可以引用其他表中没有共同点的行。即联结表中的一行可以引用第一行中的约翰、第二行中的玛丽和第三表中的加里。

制作一个仅包含来自 Employee 实体的属性的 Employee 表。添加 EmployeeUnavailability，它将具有它的 ID，指向 Employee 中的一行，并使用 datetime 类型的列标识日期。

员工出勤与员工绩效无关。一名员工可以很少展示，但可以成为表演忍者。

# java - Java Spring事务无法回滚无效状态，Connection对象已关闭

> ID：15751424
> 
> 赞同：0
> 
> 时间：2013-04-01T20:37:42.310
> 
> 标签：java, spring, sql-server-2008, spring-transactions

Java spring with Microsoft SQL Server 2005 - 9.00.4035.00 (X64) Nov 24 2008 16:17:31 版权所有 (c) 1988-2005 Microsoft Corporation Standard Edition (64-bit) o​​n Windows NT 5.2 (Build 3790: Service Pack 2)

我正在使用如下的事务管理器，通常效果很好

```
 <tx:advice id="TxAdvice" transaction-manager="TransactionManager">
    <tx:attributes>
      <tx:method name="*" propagation="REQUIRED" rollback-for="java.lang.Throwable"/>
    </tx:attributes>
  </tx:advice>

  <aop:config>
    <aop:advisor pointcut="execution(* com.rdc.*.*Dao.*(..))" advice-ref="TxAdvice"/>
  </aop:config> 
```

但是我在第 2 行执行以下方法时发现异常情况发生数据库锁定，并且 sqlserver 2008 生成的数据库锁定超时并且语句 1 记录变为永久而不是回滚数据？并产生异常

```
public void linkDao(){
insert(); // 1
update(); // 2
delete(); // 3
}

StackTrace: org.springframework.transaction.TransactionSystemException: Could not roll back JDBC transaction; nested exception is java.sql.SQLException: Invalid state, the Connection object is closed.
at org.springframework.jdbc.datasource.DataSourceTransactionManager.doRollback(DataSourceTransactionManager.java:279)
at org.springframework.transaction.support.AbstractPlatformTransactionManager.processRollback(AbstractPlatformTransactionManager.java:823)
at org.springframework.transaction.support.AbstractPlatformTransactionManager.rollback(AbstractPlatformTransactionManager.java:800)
at org.springframework.transaction.interceptor.TransactionAspectSupport.completeTransactionAfterThrowing(TransactionAspectSupport.java:339) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:50:27.390

经过大量调查后，这个问题可能是 Sqlserver 的 b/c 内存不足。

我试过这个命令来释放一些内存

```
DBCC FREESYSTEMCACHE (‘ALL’) WITH MARK_IN_USE_FOR_REMOVAL; 
```

# jquery - jQuery .css() 不影响 div

> ID：15751425
> 
> 赞同：1
> 
> 时间：2013-04-01T20:37:43.420
> 
> 标签：jquery, html, css

对于我正在开发的应用程序，我最近实现了一个吸收用户输入的叠加层。当然，这只是我的目标之一——我还需要将居住在此叠加层“内部”的弹出框居中。

到目前为止，这是我的设置：

**标记**

```
<!-- snip extra HTML -->

<div id='some-overlay' class='input-eater hidden'>
  <div id='some-prompt' class='overlay dialogue'>
    This is a message that should be hidden.<br /><br />
    <a href='javascript: $('#some-overlay').fadeOut();'>Click Here To Close</a>
  </div>
</div>

<!-- ...SNIP... --> 
```

...背景页面上的某些操作会导致`#some-overlay`淡入，从而遮挡页面，直到发生关闭操作。这是有问题的 JavaScript：

```
<!-- ...Continued from the markup above... -->
<script>
var $button = $('.some-element'),
    $overlay = $('#some-overlay'),
    $prompt = $('#some-prompt');

$(document).ready(function () {
  $button.click(function(e) {
    e.preventDefault();

    var args = {
      // ...snip.  Unnecessary.
    };

    $.get('Home/SomeAction', args, function(result) {
      // Some processing...

      // !!!! This is the failing code... !!!!
      $prompt.css({
        'left': (window.width - $prompt.width()) / 2,
        'top': (window.height - $prompt.height()) / 2
      });
    });
  });
});
</script> 
```

**造型**

```
.input-eater {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 1;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0, 0.5);
}

.overlay {
  position: absolute;
  z-index: 1;
}

.dialogue {
  box-sizing: border-box;
  // Other platform-specific variants also included.
  // Cosmetic attributes such as box-shadow, background color, etc. also set.
} 
```

如上面的脚本部分所述，`$.css()`调用无法重新定位覆盖层内的提示。它应该垂直和水平居中，但它仍然位于页面的左上角。

**问题**：我做错了什么，即阻止覆盖居中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T20:39:21.223

没有`window.width`或`height`。幸运的是，您可以使用`$(window).width()`and`$(window).height()`代替。

# c# - 在 Ext.net 的 LayoutColumn 中添加多个项目

> ID：15751428
> 
> 赞同：0
> 
> 时间：2013-04-01T20:38:00.293
> 
> 标签：c#, html, layout, formatting, ext.net

我正在尝试创建 2 个不同的列，并且在每个列中我想要多个项目。例如一个 ComboBox，一列中有 2 个 DateFields。

我发布了代码，当我尝试运行它说“此集合中只允许一个组件”时，它给了我和错误

```
<body>
<form id="MetricsForm" runat="server">
<ext:ResourceManager ID="MetricsManager" runat="server" />
    <ext:Viewport ID="MetricsViewPort" runat="server"></ext:Viewport>
    <asp:SqlDataSource ID="DMSSQL2DataSource" runat="server" ConnectionString="" />
    <asp:SqlDataSource ID="LocalDataSource" runat="server" ConnectionString="" />
    <ext:TabPanel ID="TabPanel" runat="server">
        <Items>
            <ext:Panel runat="server" Title="Step 1" ID="Tab1">
                <Items>
                    <ext:Panel ID="Panel1" 
                        runat="server" 
                        Title="Step 1: Choose date span and set spans" 
                        Region="North"
                        Height="200" 
                        Width="475"
                        MinWidth="225" 
                        MaxWidth="475">

                        <Items>
                            <ext:Container runat="server" Layout="RowLayout" Height="200" >
                                <Items>
                                    <ext:ColumnLayout runat="server" ID="MetricsColumnLayout">
                                        <Columns>
                                            <ext:LayoutColumn ColumnWidth="0.5">
                                                <ext:RadioGroup  runat="server" ID="ChooseSpan" Selectable="true" ColumnsNumber="1" >
                                                    <Items>
                                                        <ext:Radio ID="RadioAll" runat="server" BoxLabel="Show All" InputValue="0" />
                                                        <ext:Radio ID="RadioMonth" runat="server" BoxLabel="Choose Date Range(By Month)" InputValue="1" />
                                                        <ext:Radio ID="RadioDate" runat="server" BoxLabel="Choose Date Range(By Dates)" InputValue="2" />
                                                    </Items>
                                                </ext:RadioGroup>
                                            </ext:LayoutColumn>
                                             <ext:LayoutColumn ColumnWidth="0.5">
                                                <ext:ComboBox runat="server" ID="MonthComboBox" Selectable="true" SelectedIndex="0" StyleSpec="margin-bottom:4px;" Width="200" >
                                                    <Items>
                                                        <ext:ListItem Text="Any Month" Value="0" />
                                                        <ext:ListItem Text="January" Value="1" />   
                                                        <ext:ListItem Text="February" Value="2" />
                                                        <ext:ListItem Text="March" Value="3" />
                                                        <ext:ListItem Text="April" Value="4" />
                                                        <ext:ListItem Text="May" Value="5" />
                                                        <ext:ListItem Text="June" Value="6" />
                                                        <ext:ListItem Text="July" Value="7" />
                                                        <ext:ListItem Text="August" Value="8" />
                                                        <ext:ListItem Text="September" Value="9" />
                                                        <ext:ListItem Text="October" Value="10" />
                                                        <ext:ListItem Text="November" Value="11" />
                                                        <ext:ListItem Text="December" Value="12" />
                                                    </Items>
                                                </ext:ComboBox>
                                                <ext:DateField
                                                    ID="StartDateField"
                                                    runat="server"
                                                    FieldLabel="Start"
                                                    Vtype="daterange"
                                                    AnchorHorizontal="100%"
                                                    EnableKeyEvents="true"
                                                    Width="200">
                                                    <CustomConfig>
                                                        <ext:ConfigItem Name="endDateField" Value="#{EndDateField}" Mode="Value" />
                                                    </CustomConfig>
                                                    <Listeners>
                                                    </Listeners>
                                                </ext:DateField>

                                                <ext:DateField 
                                                    ID="EndDateField" 
                                                    runat="server" 
                                                    Vtype="daterange"
                                                    FieldLabel="End"
                                                    AnchorHorizontal="100%"
                                                    EnableKeyEvents="true"
                                                    Width="200">
                                                    <CustomConfig>
                                                        <ext:ConfigItem Name="startDateField" Value="#{StartDateField}" Mode="Value" />
                                                    </CustomConfig>
                                                    <Listeners>
                                                    </Listeners>
                                                </ext:DateField>
                                            </ext:LayoutColumn>
                                        </Columns>
                                    </ext:ColumnLayout>
                                </Items>
                            </ext:Container>
                        </Items>
                    </ext:Panel>
                </Items>

            </ext:Panel>
            <ext:Panel runat="server" Title="Step 2" ID="Tab2">

            </ext:Panel>
        </Items>
    </ext:TabPanel> 
<div>

</div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:42:59.863

我不能 100% 确定您要配置什么布局，但最好避免使用布局控件，因为它们已从 Ext.NET 2 中删除。您可以使用 .Layout 属性。

下面的示例演示用 .Layout 属性替换 Layout 控件。

**例子**

```
<%@ Page Language="C#" %>

<!DOCTYPE html>

<html>
<head runat="server">
    <title>Ext.NET Example</title>
</head>
<body>
    <form runat="server">   
        <ext:ResourceManager runat="server" />

        <ext:TabPanel runat="server">
            <Items>
                <ext:Panel runat="server" Title="Step 1">
                    <Items>
                        <ext:Panel
                            runat="server" 
                            Title="Step 1: Choose date span and set spans" 
                            Region="North"
                            Height="200" 
                            Width="475"
                            MinWidth="225" 
                            MaxWidth="475">
                            <Items>
                                <ext:Container runat="server" Layout="ColumnLayout" Height="200">
                                    <Items>
                                        <ext:RadioGroup runat="server" Selectable="true" ColumnsNumber="1" >
                                            <Items>
                                                <ext:Radio runat="server" BoxLabel="Show All" InputValue="0" />
                                                <ext:Radio runat="server" BoxLabel="Choose Date Range(By Month)" InputValue="1" />
                                                <ext:Radio runat="server" BoxLabel="Choose Date Range(By Dates)" InputValue="2" />
                                            </Items>
                                        </ext:RadioGroup>
                                        <ext:ComboBox 
                                            runat="server" 
                                            Selectable="true" 
                                            SelectedIndex="0" 
                                            StyleSpec="margin-bottom:4px;" 
                                            Width="200">
                                            <Items>
                                                <ext:ListItem Text="Any Month" Value="0" />
                                                <ext:ListItem Text="January" Value="1" />   
                                                <ext:ListItem Text="February" Value="2" />
                                                <ext:ListItem Text="March" Value="3" />
                                                <ext:ListItem Text="April" Value="4" />
                                                <ext:ListItem Text="May" Value="5" />
                                                <ext:ListItem Text="June" Value="6" />
                                                <ext:ListItem Text="July" Value="7" />
                                                <ext:ListItem Text="August" Value="8" />
                                                <ext:ListItem Text="September" Value="9" />
                                                <ext:ListItem Text="October" Value="10" />
                                                <ext:ListItem Text="November" Value="11" />
                                                <ext:ListItem Text="December" Value="12" />
                                            </Items>
                                        </ext:ComboBox>
                                        <ext:DateField
                                            runat="server"
                                            FieldLabel="Start"
                                            AnchorHorizontal="100%"
                                            EnableKeyEvents="true"
                                            Width="200"
                                            />
                                        <ext:DateField 
                                            runat="server" 
                                            FieldLabel="End"
                                            AnchorHorizontal="100%"
                                            EnableKeyEvents="true"
                                            Width="200"
                                            />
                                    </Items>
                                </ext:Container>
                            </Items>
                        </ext:Panel>
                    </Items>

                </ext:Panel>
                <ext:Panel runat="server" Title="Step 2"/>
            </Items>
        </ext:TabPanel> 
    </form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:33:37.127

只需将东西包装在一个容器中。

```
<ext:Container 
    runat="server" 
    Width="600" 
    Height="300" 
    Layout="ColumnLayout">
    <Items>
        <ext:RadioGroup runat="server" ColumnWidth="0.5">
            <Items>
                <ext:Radio runat="server" BoxLabel="1" />
                <ext:Radio runat="server" BoxLabel="2" />
            </Items>
        </ext:RadioGroup>
        <ext:Container runat="server" ColumnWidth="0.5">
            <Items>
                <ext:ComboBox runat="server" />
                <ext:DateField runat="server" />
                <ext:DateField runat="server" />
            </Items>
        </ext:Container>
    </Items>
</ext:Container> 
```

# java - 检查 getAccountsByType() 是否找到帐户

> ID：15751429
> 
> 赞同：2
> 
> 时间：2013-04-01T20:38:03.407
> 
> 标签：java, android, accountmanager

我正在为 AccountManager 实现自定义帐户类型。我正在寻找具有以下代码的帐户：

```
AccountManager am = AccountManager.get(this); 
Account[] accounts = am.getAccountsByType("com.mycustomtype"); 
```

我是新手，不知道如何处理结果。我基本上想要一个 if 语句，如果找不到帐户，则将变量设置为 0，否则设置用户名变量。这样我就知道是启动 loginActivity 还是我的 mainActivity。

如何以这种方式处理 AccountManager 的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T17:25:59.590

我使用array.length得到了这个工作，如下所示：

```
private boolean accountExists = false;

    AccountManager am = AccountManager.get(this); 
Account[] accounts = am.getAccountsByType("com.mycustomtype");
if(accounts.length >= 1) {
    accountExists = true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T17:11:21.143

你可以从`accounts.length`

```
if (accounts.length > 0) {
    // Account found
} else {
    // No account found
} 
```

# c++ - C++ 2d 数组不显示

> ID：15751434
> 
> 赞同：0
> 
> 时间：2013-04-01T20:38:20.993
> 
> 标签：c++, arrays, types, multidimensional-array, grid

我有一个充满全局变量的二维数组。

```
#define GRID_WIDTH 19
#define GRID_HEIGHT 10
char grid[GRID_WIDTH][GRID_HEIGHT]; 
```

稍后在代码中我使用这个二维数组

```
void Grid::ResetGrid()
{
    // Empty the console screen
    system("cls");

    // Fills the grid with '#' walls
    for (int i=0; i<GRID_WIDTH; i++)
    {
        for(int j = 0; j <GRID_HEIGHT; j++)
            grid[i][j] = '#';
    }
    ir = 2;
} 
```

当我运行程序时，我使用手表和断点。一开始，网格上的手表说：

```
Name:  grid
Value: [0] "###################"
           [0] '#'
           [1] '#'
           [2] '#' 
//and so on, i could expand it and look at every part of the array

type: char 
```

但现在它坏了，它只显示了这一点：

```
Name:  grid
Value: {...}
type: Grid 
```

奇怪的是我没有改变数组代码，只写了比较数组内部的代码行。

将其打印到控制台的代码：

```
void Grid::PrintGrid(int currentX, int currentY )
{
    // Empty the console screen
    system("cls");

    // Displays the finished maze to the screen.
    for (int y=0; y <  GRID_HEIGHT; y++)
    {
        for (int x=0; x <  GRID_WIDTH; x++)
        {
            cout << grid[x][y];
        }
        cout << endl;
    }
    // Just for testing, which direction and on what position the solver is
    cout << ir << "    " << currentX << "," << currentY;
} 
```

**问题是：** 为什么我在手表中或当我呼啸而过时看不到二维数组中的信息？我希望你能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:30:57.243

我认为问题不会发生在您发布的代码上，因为我只是在我的visual stuido 2008 中测试了它们，它们在您的printGrid 函数中运行良好，除了我定义的变量ir 和您的printGrid 函数双重定义x 和y，你在函数头中定义了它，但是在循环中，使用for（int x ...），这意味着没有意义..

刚刚来自 printGird 的结果是这样的：

```
###################
###################
###################
###################
###################
###################
###################
###################
###################
###################
2    3,4请按任意键继续. . . 
```

3、4是使用时传入printGrid的x、y的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:54:28.167

看起来您的打印代码超出了数组的范围。就像你填充数组时一样，你应该使用

```
for (int y=0; y < GRID_HEIGHT; ++y)
{
    for (int x=0; x < GRID_WIDTH; ++x)
    { 
```

这可能是您打印错误的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T20:36:46.897

问题是为什么我在手表上看不到我的二维数组了。它又开始工作了。不知道出了什么问题。但下图显示了手表的正确使用方法。我用它来检查二维数组中的信息。但它暂时没有显示信息，只是 grid {...} 而不是 grid 0x00 char (* grid)[25] 然后是有关行和列的信息。

![网格上的这只手表有一段时间没用了](https://i.stack.imgur.com/oexNQ.png)

# php - PHP预约系统

> ID：15751437
> 
> 赞同：0
> 
> 时间：2013-04-01T20:38:32.053
> 
> 标签：php, mysql

我正在开发一个预订系统。我的网站目前的工作方式是用户登录并选择约会。我需要帮助来显示他们在下一页上预订的约会。此外，当他们预订约会时，其他用户应该不再可以使用它。

```
<?php
{
    mysql_connect("localhost" , "" , "") or die (mysql_error());
    mysql_select_db("") or die(mysql_error());

    $pid=intval($_SESSION["Patient_id"]); $query = "SELECT t1.*, t2.Doctor_name, t2.Doctor_room FROM Appointment AS t1 INNER JOIN Doctor AS t2 ON t1.Doctor_id=t2.Doctor_id";

    //executes query on the database
    $result = mysql_query ($query) or die ("didn't query");

    //this selects the results as rows
    $num = mysql_num_rows ($result);    

    while($row=mysql_fetch_assoc($result))
    {
        $_SESSION['Appointment_date'] = $row['Appointment_date'];
        $_SESSION['Appointment_time'] = $row['Appointment_time'];
        $_SESSION['Doctor_name'] = $row['Doctor_name'];
        $_SESSION['Doctor_room'] = $row['Doctor_room'];
    }
}
?>  

        <strong>Dates available</strong>            
        <select id="Availability" name="Availability">                      
        <option value="0">--Select date--</option>
        <option value="3"><?php echo $_SESSION['Appointment_date'];?></option>
        </select>

        <br />
        <br />

        <strong>Times available</strong>            
        <select id="Availability" name="Availability">                      
        <option value="0">--Select time--</option>
        <option value="3"><?php echo $_SESSION['Appointment_time'];?></option>>
        </select>

        <br />
        <br />

            <strong>Doctor Name</strong>            
        <select id="Availability" name="Availability">                      
        <option value="0">--Name--</option>
        <option value="2"><?php echo $_SESSION['Doctor_name'];?></option>>
        </select>

        <br />
        <br />

            <strong>Doctor Room</strong>            
        <select id="Availability" name="Availability">                      
        <option value="0">--Room--</option>
        <option value="2"><?php echo $_SESSION['Doctor_room'];?></option>>
        </select> 
```

上面的代码允许用户根据可用的内容进行约会。此表称为约会表。当用户单击下一步时，我需要将此信息显示给用户，以便显示他们的约会，并且约会不应再对其他用户可用

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T22:16:48.027

首先，您拥有的代码不像您希望的那样工作。从这些是下拉列表的事实来看，您可能需要多个选项。但是您输入的只是一个选项：查询提供的最后一行。您的 while 循环只是用下一行覆盖每一行的信息，直到它退出。

你有什么理由为这些使用 $_SESSION 吗？为什么不直接使用新变量？如果您使用 $_SESSION，您将使用服务器的空间来保存用户在您网站上的整个时间的信息，然后再过多久，您的垃圾收集器就会来获取它。如果您只想要一页的信息，您应该使用不会保持保存和占用空间的普通变量。（不是几行文本占用那么多空间，而是事情的原理......）如果您试图通过保存到 SESSION 变量来避免执行多个数据库调用，您应该检查是否设置了这些变量第一的。

其次，您将日期和时间拆分为单独的选择器意味着用户将能够选择实际不可用的日期和时间选项。例如，如果您有周二 10:00 和周三 4:00 可用，那么根据您的预期设计，您的用户将能够选择周二 10:00、周二 4:00、周三 10:00 或周三 4:00 . 现在我想起来，实际上不同的医生和房间也是如此。除非您打算同时在房间 A 和房间 B 预订 X 医生。除非您打算使用 javascript 和/或 ajax，或者重新加载页面并进行新的数据库搜索，以在用户选择它们时更改可用选择，否则您实际上只能有一个下拉列表。例如，您可能希望他们选择一个日期，然后让页面自动更新可用的时间和医生，对吗？但这是一个完全更复杂的问题和答案，所以我现在不理会它。

第三，正如其他人已经评论的那样，确保你摆脱了 mysql_* 的东西并用现代方法替换它。我可以根据经验证明它可能导致数据库连接未按预期关闭的问题。我将它留在下面的示例中，因为您有三个升级选项，它们看起来都不同，所以最好不要在这里混淆这个问题。

最后，要回答您的问题，您需要将 html 放入表单中，并将提交按钮放入表单中，以便他们发送。在表单标签中，您将“action”作为预期登录页面的 url，将“method”作为 post。然后，当登录页面加载时，根据表单中元素的名称和选项的值，表单中选择的信息将位于 $_POST 变量中。这意味着您必须为每个元素分配不同的名称，并且必须为每个选项的“值”分配正确的值。顺便说一句，您永远不能在同一页面上拥有相同的“id”元素。

这是一个结合了我刚才提到的大部分内容的示例，尽管下拉菜单不会真正按照您需要的方式工作——我按顺序保留了其中三个，以便您可以看到 POST 是如何工作的，但实际上您只需要一个下拉菜单。

```
//on your current page 
//.... database stuff .....
$dates_and_times = array();
$doctors = array();
$rooms = array();
while($row=mysql_fetch_assoc($result))
{
    $dates_and_times[] = $row['Appointment_date'].' '.$row['Appointment_time'];
    $doctors[] = $row['Doctor_name'];
    $rooms[] = $row['Doctor_room'];

    //with SESSION, this would have been:
    //(note the extra brackets [] to create arrays)
    //$_SESSION['Appointment_date_and_time'][] = $row['Appointment_date'].' '.$row['Appointment_time'];
    //$_SESSION['Doctor_name'][] = $row['Doctor_name'];
    //$_SESSION['Doctor_room'][] = $row['Doctor_room'];
}
?>
<form method="post" action="landing_page.php">
    <strong>Dates available</strong>            
    <select id="Date" name="Date">                      
    <option value="0">--Select date--</option>
    <?php  foreach ($dates_and_times as $app_date) { ?>
        <option value="<?php echo $app_date; ?>"><?php echo $app_date; ?></option>
    <?php } ?>
    </select>

    <br />
    <br />

        <strong>Doctor Name</strong>            
    <select id="Doctor" name="Doctor">                      
    <option value="0">--Name--</option>
    <?php  foreach ($doctors as $doc) { ?>
        <option value="<?php echo $doc; ?>"><?php echo $doc; ?></option>
    <?php } ?>
    </select>

    <br />
    <br />

        <strong>Doctor Room</strong>            
    <select id="Room" name="Room">                      
    <option value="0">--Room--</option>
    <?php  foreach ($rooms as $room) { ?>
        <option value="<?php echo $room; ?>"><?php echo $room; ?></option>
    <?php } ?>
    </select> 

    <input type="submit" name="Go" />
</form>

//on the landing page
//echo based on the name of the posted element
//$_POST has the values of all of the elements in the form that had a name
<strong> You selected an appointment with 
     <?php echo $_POST['Doctor']; ?>
     on 
     <?php echo $_POST['Date']; ?>
     in room
     <?php echo $_POST['Room']; ?>
</strong> 
```

除了只显示信息之外，您还需要在登录页面上有一些东西来将用户的选择保存在数据库中。如果您不希望其他用户能够预订相同的预约时间，这意味着您的原始选择语句需要查看“已预约”表，并仅查找预约日期、时间、医生和房间t 已经显示在下拉列表中。您将需要考虑更改当前的 SELECT 以仅获取可用的约会，并且您将需要查看 INSERT 查询以使用 POST 信息保存选定的约会。

**回答评论中的问题：** 有很多不同的方法来设计你正在寻找的东西。我认为您将有一些用户正在寻找特定的医生，但其他用户正在寻找特定时间并且不在乎他们得到什么医生。这就是为什么，如果它是我的网站，我会根据天制作一个选择器。我会将“第二天”和“前一天”按钮以及日历选择器放在顶部。当他们选择一天后重新加载页面时，我会从数据库中获取仅当天的医生信息和时间。有了这些信息，我将创建一个大表，其中一个轴为医生，另一个轴为时间。我会为每个可用的预约时间在桌子上放置按钮，以便用户单击那个时间 x 医生来选择他们的预约，如果那个时候x医生不可用，显然没有按钮。然后，用户可以一目了然地看到什么时间有空，以及全天有哪些医生有空。

在我看来，处理页面重新加载的最好方法是将日期选择器放在它自己的同页发布表单中：

```
<form action="" method="get">

     //date selector here, named "Date"

</form> 
```

然后我会检查 $_GET 变量是否选择了日期。如果是这样，我会将表格加载到第二个表单中。我会将 $_GET 日期放在隐藏的输入中，这样当他们从该表单中发布某些内容时，它就会被发送。

```
<form action="the_landing_page.php" method="post">
     <input type="hidden" name="Date" value="<?php echo $_GET['Date']; ?>" />

     //table here
     //submit button here

</form> 
```

然后，用户从表中的选择将发布到 the_landing_page，就像在我的第一个示例中一样。现在你可以自己弄清楚细节。祝你好运。

# .htaccess - 在 htaccess 重定向上将字符串添加到 url

> ID：15751439
> 
> 赞同：0
> 
> 时间：2013-04-01T20:38:39.893
> 
> 标签：.htaccess, redirect

我有一个从 www.page.com/timmy 重定向到 www.page.com/ 的网站

我想将 www.page.com/timmy 重定向到 www.page.com/#timmy

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:48:12.803

> 我想重定向`www.page.com/timmy`到`www.page.com/#timmy`

您可以在根目录的一个 .htaccess 文件中尝试此操作：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule  ^timmy  /#timmy   [L,NC,NE] 
```

对于永久重定向，将 [L,NC,NE] 替换为 [R=301,L,NC,NE]

# r - 制作具有空心中心的圆形条形图（又名赛道图）

> ID：15751442
> 
> 赞同：37
> 
> 时间：2013-04-01T20:38:44.550
> 
> 标签：r, plot, ggplot2

我被要求重新创建以下情节风格。（请忽略这是否是一种良好的可视化类型的问题，并善意地将其视为在数值表中添加了一个彩色元素。）

其中大部分都非常简单，但我还没有找到一种使中心空心的好方法。为了时间的利益，我可能会求助于添加不可见的虚拟数据（如果没有其他人这样做，我会发布这种方法，但它似乎不如修改主题的最佳方法）。是否有基于主题的解决方案或非 ggplot2 R 解决方案？

## 我们在模仿什么

![在此处输入图像描述](https://i.stack.imgur.com/80FG9.png)

## 简单的 ggplot2 结果（不需要的填充中心）

```
library(ggplot2)

# make sample dataframe

Category <- c("Electronics", "Appliances", "Books", "Music", "Clothing", 
            "Cars", "Food/Beverages", "Personal Hygiene", 
            "Personal Health/OTC", "Hair Care")
Percent <- c(81, 77, 70, 69, 69, 68, 62, 62, 61, 60)

internetImportance<-data.frame(Category,Percent)

# append number to category name
internetImportance$Category <-
     paste0(internetImportance$Category," - ",internetImportance$Percent,"%")

# set factor so it will plot in descending order 
internetImportance$Category <-
    factor(internetImportance$Category, 
    levels=rev(internetImportance$Category))

# plot

ggplot(internetImportance, aes(x = Category, y = Percent,
    fill = Category)) + 
    geom_bar(width = 0.9, stat="identity") + 
    coord_polar(theta = "y") +
    xlab("") + ylab("") +
    ylim(c(0,100)) +
    ggtitle("Top Product Categories Influenced by Internet") +
    geom_text(data = internetImportance, hjust = 1, size = 3,
              aes(x = Category, y = 0, label = Category)) +
    theme_minimal() +
    theme(legend.position = "none",
          panel.grid.major = element_blank(),
          panel.grid.minor = element_blank(),
          axis.line = element_blank(),
          axis.text.y = element_blank(),
          axis.text.x = element_blank(),
          axis.ticks = element_blank()) 
```

![在此处输入图像描述](https://i.stack.imgur.com/w4sB9.png)

我们如何用空心中心绘制这些数据？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-01T22:13:11.623

这是一个使用该包的非 ggplot2（基本 R 图形）解决方案`plotrix`，其中包含两个不错的功能：`draw.circle()`和`draw.arc()`：

```
circBarPlot <- function(x, labels, colors=rainbow(length(x)), cex.lab=1) {
  require(plotrix)
  plot(0,xlim=c(-1.1,1.1),ylim=c(-1.1,1.1),type="n",axes=F, xlab=NA, ylab=NA)
  radii <- seq(1, 0.3, length.out=length(x))
  draw.circle(0,0,radii,border="lightgrey")
  angles <- (1/4 - x)*2*pi
  draw.arc(0, 0, radii, angles, pi/2, col=colors, lwd=130/length(x), lend=2, n=100)
  ymult <- (par("usr")[4]-par("usr")[3])/(par("usr")[2]-par("usr")[1])*par("pin")[1]/par("pin")[2]
  text(x=-0.02, y=radii*ymult, labels=paste(labels," - ", x*100, "%", sep=""), pos=2, cex=cex.lab)
}

circBarPlot(Percent/100, Category)
text(0,0,"GLOBAL",cex=1.5,col="grey") 
```

它给了我：

![圆形条形图](https://i.stack.imgur.com/qgY7P.png)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-04-01T21:18:23.807

我认为一个直接的解决方法是创建一些“空”条目。我会`internetImportance`像这样创建data.frame：

```
Category <- c("Electronics", "Appliances", "Books", "Music", "Clothing", 
        "Cars", "Food/Beverages", "Personal Hygiene", 
        "Personal Health/OTC", "Hair Care")
Percent <- c(81, 77, 70, 69, 69, 68, 62, 62, 61, 60)

internetImportance <- data.frame(Category,Percent)

len <- 4
df2 <- data.frame(Category = letters[1:len], Percent = rep(0, len), 
                                 Category2 = rep("", len))
internetImportance$Category2 <- 
 paste0(internetImportance$Category," - ",internetImportance$Percent,"%")

# append number to category name
internetImportance <- rbind(internetImportance, df2)

# set factor so it will plot in descending order 
internetImportance$Category <-
    factor(internetImportance$Category, 
    levels=rev(internetImportance$Category)) 
```

然后我将绘制`ggplot2`如下`fill=category2`：

```
ggplot(internetImportance, aes(x = Category, y = Percent,
    fill = Category2)) + 
    geom_bar(width = 0.9, stat="identity") + 
    coord_polar(theta = "y") +
    xlab("") + ylab("") +
    ylim(c(0,100)) +
    ggtitle("Top Product Categories Influenced by Internet") +
    geom_text(data = internetImportance, hjust = 1, size = 3,
              aes(x = Category, y = 0, label = Category2)) +
    theme_minimal() +
    theme(legend.position = "none",
          panel.grid.major = element_blank(),
          panel.grid.minor = element_blank(),
          axis.line = element_blank(),
          axis.text.y = element_blank(),
          axis.text.x = element_blank(),
          axis.ticks = element_blank()) 
```

这给了我：

![在此处输入图像描述](https://i.stack.imgur.com/hOv9q.png)

您可以在添加文本`geom_text(label="GLOBAL", x=.5, y=.5, size=4) +`之前添加一个。`theme_minimal``GLOBAL`

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-04-02T08:37:16.867

另一个`base`不依赖`plotrix`包的解决方案：

```
circular.barplot<-function(values, labels, col, cex){
    df<-data.frame(values=sort(values), labels=labels[order(values)])
    col<-col[order(values)]
    plot(NA,xlim=c(-1.3,1.3),ylim=c(-1.3,1.3),axes=F, xlab=NA, ylab=NA, asp=1)
    t<-sapply(df$values,function(x).5*pi-seq(0, 2*pi*x/100,length=1000))
    x<-sapply(1:nrow(df),function(x)(.3+x/nrow(df))*cos(t[,x]))
    y<-sapply(1:nrow(df),function(x)(.3+x/nrow(df))*sin(t[,x]))
    for(i in 1:nrow(df)){
        lines(x=x[,i],y=y[,i],col=col[i],lwd=10,lend=1)
        text(x[1,i],y[1,i],paste(df$labels[i]," - ",df$values[i],"%",sep=""),
             pos=2,cex=cex)
        }
    } 
```

![在此处输入图像描述](https://i.stack.imgur.com/ARhGb.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-27T16:49:10.243

由于情节是圆形的，因此可以通过`circlize`包装轻松完成。

先上数据：

```
Category <- c("Electronics", "Appliances", "Books", "Music", "Clothing", 
        "Cars", "Food/Beverages", "Personal Hygiene", 
        "Personal Health/OTC", "Hair Care")
Percent <- c(81, 77, 70, 69, 69, 68, 62, 62, 61, 60)
color = rainbow(length(Percent)) 
```

反转三个向量，因为`circlize`默认情况下将每个元素从内部添加到外部：

```
Category = rev(Category)
Percent = rev(Percent)
color = rev(color) 
```

如果你把圆圈想象成一个弯曲的绘图区域，那么它只是添加了矩形、线条和文本。

```
library(circlize)

par(mar = c(1, 1, 1, 1))
circos.par("start.degree" = 90)
circos.initialize("a", xlim = c(0, 100)) # 'a` just means there is one sector
circos.trackPlotRegion(ylim = c(0.5, length(Percent)+0.5), track.height = 0.8, 
    bg.border = NA, panel.fun = function(x, y) {
    xlim = get.cell.meta.data("xlim") # in fact, it is c(0, 100)
    for(i in seq_along(Percent)) {
        circos.lines(xlim, c(i, i), col = "#CCCCCC")
        circos.rect(0, i - 0.45, Percent[i], i + 0.45, col = color[i], 
            border = "white")
        circos.text(xlim[2], i, paste0(Category[i], " - ", Percent[i], "%"), 
            adj = c(1, 0.5)) 
    }
})
circos.clear()

text(0, 0, "GLOBAL", col = "#CCCCCC") 
```

![在此处输入图像描述](https://i.stack.imgur.com/lhadG.png)

# sharepoint-designer - Sharepoint Designer 2007 配置

> ID：15751449
> 
> 赞同：0
> 
> 时间：2013-04-01T20:39:11.497
> 
> 标签：sharepoint-designer

每次我打开 SPDESIGN 2007 时，它都会运行配置。它运行大约 30 秒，然后打开程序。如果不是烦人的话，这没什么。有没有什么办法解决这一问题？

操作系统：Windows 7 x64，SP 1；版本：Sharepoint Designer 2007，SP1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:05:34.733

您是否同时运行多个版本的 Office？如果是这样，您可能需要设置一个注册表项来阻止该对话框。有关详细信息，请参阅[http://support.microsoft.com/kb/928091?wa=wsignin1.0](http://support.microsoft.com/kb/928091?wa=wsignin1.0)

要点是：

> 要绕过 Word 2007 的自动注册，请按照下列步骤操作： 退出 Word 2007。启动注册表编辑器。在 Windows Vista 中，单击“开始”，在“开始搜索”框中键入 regedit，然后按 Enter。
> 
> 如果系统提示您输入管理员密码或进行确认，请输入密码，或单击继续。在 Windows XP 中，单击开始，单击运行，在打开框中键入 regedit，然后单击确定。找到并单击以选择以下注册表子项： HKEY_CURRENT_USER\Software\Microsoft\Office\12.0\Word\Options 选择在步骤 3 中指定的子项后，指向编辑菜单上的新建，然后单击 DWORD 值。键入 NoReReg，然后按 Enter。右键单击 NoReReg，然后单击修改。在数值数据框中，键入 1，然后单击确定。在文件菜单上，单击退出以关闭注册表编辑器。

# iphone - 检测 iOS 设备正在向右或向左或向上或向下移动

> ID：15751451
> 
> 赞同：1
> 
> 时间：2013-04-01T20:39:13.277
> 
> 标签：iphone, ios, objective-c, ipad

嗨，一些人现在如何才能检测到设备是参考某个点向右还是向左移动。就像夜空应用程序一样，我知道可以确定设备的姿态，`coreMotion`但我不知道如何检测到这一点。我可以检测到滚动俯仰和偏航但是我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:57:41.527

使用`[UIAccelerometer sharedAccelerometer]`并设置其委托。使用方法

```
 - (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration 
```

你可以得到设备的动作。另请查看[UIAccelerometre](http://developer.apple.com/library/ios/documentation/uikit/reference/UIAccelerometer_Class/Reference/UIAccelerometer.html#//apple_ref/occ/clm/UIAccelerometer/sharedAccelerometer)和[UIAcceleration](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIAcceleration_Class/Reference/UIAcceleration.html#//apple_ref/doc/uid/TP40006901)的参考资料。`x`您可以使用和`y`的`z`属性来跟踪移动`UIAcceleration`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:45:46.443

您需要使用加速度计。每个 iOS 设备都有一个。谷歌之旅应该会给你一个答案。如果您正在寻找代码，对不起。我不记得那种东西。

# java - java.lang.NoClassDefFoundError：部署到 Google App Engine 时无法初始化类 net.sf.cglib.proxy.Enhancer

> ID：15751453
> 
> 赞同：3
> 
> 时间：2013-04-01T20:39:17.007
> 
> 标签：java, google-app-engine, spring-mvc

我正在使用 Spring 框架和 Google App Engine 构建 Web 应用程序。在开发服务器中它可以工作，但是在部署到 Google App Engine 服务器时我遇到了这个错误

```
Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: Could not initialize class net.sf.cglib.proxy.Enhancer 
```

和

```
Initialization of bean failed; nested exception is java.lang.IncompatibleClassChangeError: class net.sf.cglib.core.DebuggingClassWriter has interface org.objectweb.asm.ClassVisitor as super class 
```

第一个错误表明我似乎错过了 cglib.jar 中的 net.sf.cglib.proxy.Enhancer 但是当我检查它已经存在时。第二个日志看不懂

我在类路径中使用了几个 jars 文件：

```
asm-4.0
asm-util-4.0
cglib-3.0
app engine sdk 1.7.6
spring framework 3.2.0 
```

什么是问题？我该如何解决？

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T22:00:44.590

看起来 Spring 3.2 已经包含 cglib 和 asm（请参阅发行说明的第 4.21 项：http: [//static.springsource.org/spring-framework/docs/3.2.0.RELEASE/spring-framework-reference/html/new -in-3.2.html](http://static.springsource.org/spring-framework/docs/3.2.0.RELEASE/spring-framework-reference/html/new-in-3.2.html)）。它们在弹簧芯罐中。

您应该尝试从类路径中删除 asm 和 cglib jar，看看是否有什么不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-29T04:15:57.867

在 pom.xml 文件中从 appium java-client 中排除 cglib 依赖项，如下所示。经过大量的谷歌搜索后，这为我解决了这个问题。

```
<dependency>
      <groupId>io.appium</groupId>
      <artifactId>java-client</artifactId>
      <version>7.3.0</version>
      <exclusions>
        <exclusion>
          <groupId>cglib</groupId>
          <artifactId>cglib</artifactId>
        </exclusion>
      </exclusions>
    </dependency> 
```

# java - MongoDB/Java SDK：使用数组中的值查询元素

> ID：15751457
> 
> 赞同：7
> 
> 时间：2013-04-01T20:39:31.490
> 
> 标签：java, list, mongodb

我对 MongoDB 及其 Java... SDK 很陌生？阿皮？我有一个非常简单的问题，但我一直未能找到满意的答案。

假设我有一组实例，例如：

```
{
    "_id": {
        "$oid": "5156171e5d451c136236e738"
    },
    "_types": [
        "Sample"
    ],
    "last_z": {
        "$date": "2012-12-30T09:12:12.250Z"
    },
    "last": {
        "$date": "2012-12-30T04:12:12.250Z"
    },
    "section": "5156171e5d451c136236e70f",
    "s_mac": "AA:AA:AA:AA:AA:AA",
    "_cls": "Sample",
} 
```

我有一个硬编码的 Java 列表：

```
static List<String> MAC_LIST = Arrays.asList("90:27:E4:0E:3D:D2", "A8:26:D9:E6:1D:8B"); 
```

我想知道的是如何查询 MongoDB，这样它就会给我所有其`s_mac`字段具有出现在`MAC_LIST`列表中的值的对象。

我猜我应该使用[$in](http://docs.mongodb.org/manual/reference/operator/in/)运算符，但我不知道如何将其转换为 Java 代码。

任何提示或链接到`$in`通过 Java SDK 使用运算符的解释的页面将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T21:45:58.973

这是一个对我有用的人为示例（驱动程序版本 2.10.1） - 您可以调整 IP 地址并按原样运行它以检查是否得到相同的结果：

```
public void gss() throws Exception{
    MongoClient mongo = new MongoClient("192.168.1.1");
    DB db = mongo.getDB("test");
    DBCollection collection = db.getCollection("stackoverflow");
    DBObject o1 = new BasicDBObject();
    o1.put("s_mac", "AA:AA:AA:AA:AA:AA");
    o1.put("_cls", "Sample1");
    DBObject o2 = new BasicDBObject();
    o2.put("s_mac", "90:27:E4:0E:3D:D2");
    o2.put("_cls", "Sample2");
    DBObject o3 = new BasicDBObject();
    o3.put("s_mac", "A8:26:D9:E6:1D:8B");
    o3.put("_cls", "Sample3");
    collection.insert(o1, o2, o3);
    System.out.println(collection.find().count());
    List<String> MAC_LIST = Arrays.asList("90:27:E4:0E:3D:D2", "A8:26:D9:E6:1D:8B");
    System.out.println(collection.find(new BasicDBObject("s_mac", new BasicDBObject("$in", MAC_LIST))).count());
} 
```

它插入以下文档：

```
{ "_id" : ObjectId("5159ff98567e143bff0668e9"),
  "s_mac" : "AA:AA:AA:AA:AA:AA",
  "_cls" : "Sample1"
}
{ "_id" : ObjectId("5159ff98567e143bff0668ea"),
  "s_mac" : "90:27:E4:0E:3D:D2",
  "_cls" : "Sample2"
}
{ "_id" : ObjectId("5159ff98567e143bff0668eb"),
  "s_mac" : "A8:26:D9:E6:1D:8B",
  "_cls" : "Sample3"
} 
```

调用`collection.find().count()`返回 3 和调用`collection.find(new BasicDBObject("s_mac", new BasicDBObject("$in", MAC_LIST))).count()`返回 2 我认为这是您所期望的。

# c# - 如何使用 C# 启用禁用的无线网卡

> ID：15751459
> 
> 赞同：7
> 
> 时间：2013-04-01T20:39:44.120
> 
> 标签：c#, networking, wmi, adapter

我遇到了一个问题，我需要启用已禁用的卡，并且 WMI NetworkAdapter 上的搜索器不返回该对象。

我可以想到一种可能的方法来做到这一点，但我一直无法让它工作，那就是使用 this 作为构造函数名称创建一个 managementObject 。但这只会引发异常

`{\\.\root\CIMV2:Win32_NetworkAdapter.NetConnectionID='Wireless Network Connection'}`

另一种方法是对 netsh 进行 shell 并启用该设备，这有点难看，或者使用 shell32/dll "Enable" 来做同样的事情，同样，两者都只传递名称。我一直从注册表扫描中获取名称`HKLM\SYSTEM\CurrentControlSet\Network`并寻找 MediaType=2 以获取无线设备的字符串列表。如果我在启用适配器的情况下运行应用程序，一切都很好，因为我可以获得无线设备的 networkObject，但如果应用程序在无线设备被禁用时启动，这一切都会失败。

谢谢

编辑：这是我很想工作但不行的代码:(

```
using System;
using System.Management;
class Sample
{
    public static int Main(string[] args)
    {
        ManagementObject mObj = new ManagementObject("\\\\.\\root\\CIMV2:Win32_NetworkAdapter.NetConnectionID=\"Wireless Network Connection\"");
        mObj.InvokeMethod("Enable", null);
        return 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:44:33.250

此方法本质上是使用 C# 来利用 WMI 和`Win32_NetworkAdapter`Class。它应该有内置的方法：

*   使能够
*   禁用

因此，您可以在 Selected 界面上执行命令。

您可以通过以下方式实现：

```
SelectQuery query = new SelectQuery("Win32_NetworkAdapter", "NetConnectionStatus=2");
ManagementObjectSearcher search = new ManagementObjectSearcher(query);
foreach(ManagementObject result in search.Get())
{
    NetworkAdapter adapter = new NetworkAdapter(result);

    // Identify the adapter you wish to disable here. 
    // In particular, check the AdapterType and 
    // Description properties.

    // Here, we're selecting the LAN adapters.
    if (adapter.AdapterType.Equals("Ethernet 802.3")) 
    {
        adapter.Disable();
    }
} 
```

有一个[博客实际上概述了这样的任务](http://blog.opennetcf.com/ncowburn/2008/06/24/HOWTODisableEnableNetworkConnectionsProgrammaticallyUnderVista.aspx)；它定义了如何围绕 WMI 类创建包装器。

另一种[解决方案可能是也使用](http://www.pinvoke.net/default.aspx/advapi32.ControlService)（`ControlService`advapi32）。

```
[DllImport("advapi32.dll", SetLastError=true)]
[return: MarshalAs(UnmanagedType.Bool)]
public static extern bool    ControlService(IntPtr hService, SERVICE_CONTROL dwControl, ref SERVICE_STATUS lpServiceStatus); 
```

希望其中一种方法有所帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-07T20:57:53.843

```
 using System;
            using System.Collections.Generic;
            using System.ComponentModel;
            using System.Data;
            using System.Drawing;
            using System.Linq;
            using System.Text;
            using System.Windows.Forms;
            using System.Diagnostics;
            using System.Security.Principal;

            namespace WifiRouter
            {
                public partial class Form1 : Form
                {
                    bool connect = false;
                    public Form1()
                    {

                        InitializeComponent();
                    }

                    public static bool IsAdmin()
                    {
                        WindowsIdentity id = WindowsIdentity.GetCurrent();
                        WindowsPrincipal p = new WindowsPrincipal(id);
                        return p.IsInRole(WindowsBuiltInRole.Administrator);
                    }
                    public void RestartElevated()
                    {
                        ProcessStartInfo startInfo = new ProcessStartInfo();
                        startInfo.UseShellExecute = true;
                        startInfo.CreateNoWindow = true;
                        startInfo.WorkingDirectory = Environment.CurrentDirectory;
                        startInfo.FileName = System.Windows.Forms.Application.ExecutablePath;
                        startInfo.Verb = "runas";
                        try
                        {
                            Process p = Process.Start(startInfo);
                        }
                        catch
                        {

                        }

                        System.Windows.Forms.Application.Exit();
                    }
                    private void button1_Click(object sender, EventArgs e)
                    {
                        string ssid = textBox1.Text, key = textBox2.Text;
                        if (!connect)
                        {
                            if (String.IsNullOrEmpty(textBox1.Text))
                            {
                                MessageBox.Show("SSID cannot be left blank !",
                                "Information", MessageBoxButtons.OK, MessageBoxIcon.Information);
                            }
                            else
                            {

                                if (textBox2.Text == null || textBox2.Text == "")
                                {
                                    MessageBox.Show("Key value cannot be left blank !",
                                    "Information", MessageBoxButtons.OK, MessageBoxIcon.Information);
                                }
                                else
                                {
                                    if (key.Length >= 6)
                                    {
                                        Hotspot(ssid, key, true);
                                        textBox1.Enabled = false;
                                        textBox2.Enabled = false;
                                        button1.Text = "Stop";
                                        connect = true;
                                    }
                                    else
                                    {
                                        MessageBox.Show("Key should be more then or Equal to 6 Characters !",
                                        "Information", MessageBoxButtons.OK, MessageBoxIcon.Information);
                                    }
                                }
                            }
                        }
                        else
                        {
                            Hotspot(null, null, false);
                            textBox1.Enabled = true;
                            textBox2.Enabled = true;
                            button1.Text = "Start";
                            connect = false;
                        }
                    }
                    private void Hotspot(string ssid, string key,bool status)
                    {
                        ProcessStartInfo processStartInfo = new ProcessStartInfo("cmd.exe");
                        processStartInfo.RedirectStandardInput = true;
                        processStartInfo.RedirectStandardOutput = true;
                        processStartInfo.CreateNoWindow = true;
                        processStartInfo.UseShellExecute = false;
                        Process process = Process.Start(processStartInfo);

                        if (process != null)
                        {
                            if (status)
                            {
                                process.StandardInput.WriteLine("netsh wlan set hostednetwork mode=allow ssid=" + ssid + " key=" + key);
                                process.StandardInput.WriteLine("netsh wlan start hosted network");
                                process.StandardInput.Close();
                            }
                            else
                            {
                                process.StandardInput.WriteLine("netsh wlan stop hostednetwork");
                                process.StandardInput.Close();
                            }
                        }
                    }

                    private void Form1_Load(object sender, EventArgs e)
                    {
                        if (!IsAdmin())
                        {
                            RestartElevated();
                        }
                    }

                    private void Form1_FormClosing(object sender, FormClosingEventArgs e)
                    {
                        Hotspot(null, null, false);
                        Application.Exit();
                    }
                }
            } 
```

# image - 用于检查 Web 上的图像的 MATLAB 命令

> ID：15751461
> 
> 赞同：1
> 
> 时间：2013-04-01T20:39:53.667
> 
> 标签：image, matlab, web, command

我试过以下

```
url=[http://upload.wikimedia.org/wikipedia/pt/c/ce/Who_Killed_the_Electric_Car.jpg];
filename = [teste.jpg]
urlwrite (url, filename) 
```

通过执行这些步骤，此链接中的图像将写入“teste.jpg”文件名下

另一方面，如果我尝试：

```
url=[http://upload.wikimedia.org/wikipedia/pt/c/ce/ererr.jpg];
filename = [teste.jpg]
urlwrite (url, filename) 
```

Matlab 提示符将返回：

> ？？？在 140 处使用 ==> urlwrite 时出错 下载 URL 时出错。您的网络连接可能已关闭或您的代理设置配置不正确。

那么，我怎样才能让 matlab 来检查图像是否存在呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:51:55.493

如果您使用输出参数，错误将被抑制。请参阅[URLWRITE](http://www.mathworks.com/help/matlab/ref/urlwrite.html)文档。

> **[filestr,status] = urlwrite( *_* )**将文件路径存储在变量 filestr 中，并禁止显示错误消息，使用前面语法中的任何输入参数。操作成功时status为1，否则status为0。

# jmeter - 将 CSV 数据文件中的变量值打印到 JMeter 控制台

> ID：15751462
> 
> 赞同：0
> 
> 时间：2013-04-01T20:39:53.680
> 
> 标签：jmeter

我正在使用 JMeter 对地址验证服务进行性能测试，该服务为保险报价应用程序找到有效地址。我正在使用肥皂请求从后端对此进行测试，并且我有一个包含大量搜索字符串的 csv 数据配置文件。

为了真正了解该服务的性能，我需要使用大量地址（即超过 30000 个）进行测试，以便服务器缓存不会影响我的性能结果。我在 csv 电子表格中有一个地址列表，但其中一些地址由于某种原因而导致失败（例如，地址不再存在，我仅在提交一个带有相关地址的请求时验证了这一点）。我想从我的 csv 文件中删除所有失败的地址。
因此，如果具有此特定搜索地址的请求失败，我想使用 JMeter 将搜索地址打印到控制台。我尝试使用 IF 控制器作为条件`"${JMeterThread.last_sample_ok}" == "false"`，并在名称部分使用以下内容，以便将地址打印到 JMeter 控制台。参数`searchAddress`来自我的 CSV 输入文件。当我尝试运行它时，它只会打印`${searchAddress}`到控制台。所以 if 语句有效，但它不能识别`searchAddress`为变量。

如果我可以让它工作，我会将所有搜索字符串复制到 excel 并使用公式将它们从我的 JMeter 线程使用的地址列表中删除。

很抱歉这个冗长的问题，但希望我已经清楚地解释了我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-05T12:39:25.440

另一种方法是使用 BeanShell PostProcessor 作为组件接收错误的子组件；在 Beanshell 中，类似：

```
String searchAddr = vars.get("searchAddress");

//Output to Console
System.out.println("Failed Address = " + searchAddr);

//Output to Log file etc.
log.info("Failed Address = " + searchAddr); 
```

# php - if 语句在 PHP 中不被尊重

> ID：15751463
> 
> 赞同：0
> 
> 时间：2013-04-01T20:39:55.197
> 
> 标签：php

```
if ($fromcat == "true" || $fromcat == 1){

    error_log("binding to CAT " . $cat . " because pfc was " . $fromcat);   

} else {

    error_log("binding to ROOM " . $room . " because pfc was " . $fromcat); 

} 
```

请看一下上面的代码。

我想每个人都同意，如果`$fromcat`为 0，我就无法在控制台中收到“绑定到 CAT (...)”消息。

然而，这里是：

```
[01-Apr-2013 22:34:50] binding to CAT single because pfc was 0 
```

这怎么可能呢？不能同时显示 CAT 和数字 0！PHP喝醉了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:41:46.640

使用相同的 ( `===`) 比较运算符。

```
if ($fromcat === "true" || $fromcat === 1) {

    error_log("binding to CAT " . $cat . " because pfc was " . $fromcat);   

} else {

    error_log("binding to ROOM " . $room . " because pfc was " . $fromcat); 

} 
```

您正在尝试与`$fromcat`string进行比较`"true"`。如果您想将其与布尔值 true 进行比较，您将使用`$fromcat == true`. 除此以外：

> 如果将数字与字符串进行比较或比较涉及数字字符串，则每个字符串都将转换为数字并以数字方式执行比较。

[文档](http://php.net/manual/en/language.operators.comparison.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:53:52.013

颠倒您的病情顺序也是一个好主意。

所以

```
if ($fromcat === "true" || $fromcat === 1) 
```

变成

```
if ('true' === $fromcat || 1 === $fromcat) 
```

原因：[PHP - if 语句中的颠倒顺序](https://stackoverflow.com/questions/10849667/php-reversed-order-in-if-statement)

# html - CSS/HTML 导航栏 - 活动/当前链接

> ID：15751464
> 
> 赞同：0
> 
> 时间：2013-04-01T20:40:00.837
> 
> 标签：html, css

我正在尝试在我的导航栏上创建一个活动/当前链接。

在 HTML 中，有一个元素在其中一个元素上有一个`class="current"`属性。

如果该类处于活动状态/当前状态，我希望该元素具有背景

```
<ul id="trans-nav">
    <li  class="current">
        <a href="#">About Us</a>
        <ul>
            <li><a href="/contact">Contact Us</a></li>
            <li><a href="/login">Login</a></li>
        </ul>
    </li>
</ul> 
```

我的 CSS 需要什么？

```
#trans-nav {
    list-style-type: none; 
    height: 40px; 
    padding: 0; 
    margin: 0;
    position:relative;
    z-index:999;
}
#trans-nav {
    list-style-type: none; 
    height: 40px; 
    padding: 0; 
    margin: 0;
}
#trans-nav li {
    float: left; 
    position: relative; 
    padding: 0; 
    line-height: 40px;
}
#trans-nav li:hover {
    background-position: 0 -40px;
}
#trans-nav li a {
    display: block; 
    padding: 0 15px; 
    color: #666666; 
    text-decoration: none;
}
#trans-nav li a:hover {
    background-color:#F36F25; 
    color: #eeeeee;
}
#trans-nav li active {
    background-color:#F36F25; 
    color: #eeeeee;
}
#trans-nav li ul {
    opacity: 0;
    position: absolute;
    left: 0;
    width: 200px;
    background: #EEEEEE;
    list-style-type: none;
    padding: 0;
    margin: 0; 
}
#trans-nav li:hover ul {
    opacity: 1; 
}
#trans-nav li ul li {
    float: none; 
    position: static; 
    height: 0; 
    line-height: 0; 
    background: none;
}
#trans-nav li:hover ul li {
    height: 30px;
    line-height: 30px;
}
#trans-nav li ul li a {
    background: #EEEEEE;
}
#trans-nav li ul li a:hover {
    background: #666666;
    color:#EEEEEE;
}

#trans-nav li { -webkit-transition: all 0.2s; }
#trans-nav li a { -webkit-transition: all 0.5s; }
#trans-nav li ul { -webkit-transition: all 1s; }
#trans-nav li ul li { -webkit-transition: height 0.5s; } 
```

我已经尝试过了，但没有奏效：

```
#trans-nav li active {
    background-color:#F36F25; 
    color: #eeeeee;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:41:48.470

你的 CSS 需要 . 类的指示器和链接选择器。

```
#trans-nav li.current a {
    background-color:#F36F25; 
    color: #eeeeee;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:42:21.410

试试这个，第一个将针对`current`类的 li，第二个将针对`current`(About Us) 的链接，并且由于直接后代选择器而不会向下流到子菜单`>`。

```
#trans-nav .current {
    background-color:#F36F25; 
}
#trans-nav .current > a {
    color: #eeeeee;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T20:42:37.723

你离得太近了！

```
#trans-nav li .active {
background-color:#F36F25; 
color: #eeeeee;
} 
```

你只是忘了`.`开`.active`

[工作小提琴](http://jsfiddle.net/QthpX/)

# python - UnitTest Python 只模拟一个函数多次调用

> ID：15751467
> 
> 赞同：21
> 
> 时间：2013-04-01T20:40:09.043
> 
> 标签：python, unit-testing, mocking

我正在使用 Mock ( [http://www.voidspace.org.uk/python/mock/mock.html](http://www.voidspace.org.uk/python/mock/mock.html) )，遇到了一个我无法找出解决方案的特定模拟案例。

我有一个函数多次调用 some_function 被模拟。

```
def function():
    some_function(1)
    some_function(2)
    some_function(3) 
```

我只想模拟对 some_function 的第一次和第三次调用。我想对真正的 some_function 进行第二次调用。

我尝试了一些替代方法[http://www.voidspace.org.uk/python/mock/mock.html#mock.Mock.mock_calls](http://www.voidspace.org.uk/python/mock/mock.html#mock.Mock.mock_calls)，但没有成功。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-01T21:15:07.887

似乎该`wraps`论点可能是您想要的：

> *wraps*：要包装的模拟对象的项目。如果 wraps 不是 None 那么调用 Mock 会将调用传递给被包装的对象（返回真实结果并忽略 return_value）。

但是，由于您只希望第二次调用不被嘲笑，我建议使用[`mock.side_effect`](http://www.voidspace.org.uk/python/mock/mock.html#mock.Mock.side_effect).

> 如果 side_effect 是一个可迭代对象，那么对模拟的每次调用都将返回可迭代对象的下一个值。

如果您想为每次调用返回不同的值，这是一个完美的选择：

```
somefunction_mock.side_effect = [10, None, 10] 
```

只有第一次和第三次调用`somefunction`会返回 10。

但是，如果您确实需要调用*真正的*函数，但不是第二次，您也可以传递`side_effect`一个可调用对象，但我觉得它非常难看（可能有更聪明的做法）：

```
 class CustomMock(object):

     calls = 0

     def some_function(self, arg):
         self.calls += 1
         if self.calls != 2:
             return my_real_function(arg)
         else:
             return DEFAULT

somefunction_mock.side_effect = CustomMock().some_function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-07-30T09:55:36.927

甚至比创建一个`CustomMock`类更简单：

```
def side_effect(*args, **kwargs):
    if side_effect.counter < 10:
        side_effect.counter += 1
        return my_real_function(arg) 
    else:
        return DEFAULT

side_effect.counter = 0
mocked_method.side_effect = side_effect 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-27T11:26:01.847

我今天也面临同样的情况。经过一番犹豫，我找到了一种不同的方法来解决它。

起初，我的函数如下所示：

```
def reboot_and_balabala(args):
    os.system('do some prepare here')
    os.system('reboot')
    sys.exit(0) 
```

我希望调用 os.system 的第一次调用，否则不会生成本地文件，我无法验证它。但我真的不希望调用 os.system 的第二次调用，哈哈。

起初，我有一个类似于以下的单元测试：

```
def test_reboot_and_balabala(self):
    with patch.object(os, 'system') as mock_system:
        # do some mock setup on mock_system, this is what I looked for
        # but I do not found any easy and clear solution
        with patch.object(sys, 'exit') as mock_exit:
            my_lib.reboot_and_balabala(...)
            # assert mock invoke args
            # check generated files 
```

但最后，我意识到，在调整代码后，我有一个更好的代码结构和单元测试，通过以下方式：

```
def reboot():
    os.system('reboot')
    sys.exit(0)

def reboot_and_balabala(args):
    os.system('do some prepare here')
    reboot() 
```

然后我们可以通过以下方式测试这些代码：

```
def test_reboot(self):
    with patch.object(os, 'system') as mock_system:
        with patch.object(sys, 'exit') as mock_exit:
            my_lib.reboot()
            mock_system.assert_called_once_with('reboot')
            mock_exit.assert_called_once_with(0)

def test_reboot_and_balabala(self):
    with patch.object(my_lib, 'reboot') as mock_reboot:
        my_lib.reboot_and_balabala(...)
        # check generated files here
        mock_reboot.assert_called_once() 
```

这不是问题的直接答案。但我认为这是非常鼓舞人心的。

# ssis - SSIS 最佳实践 - 做 2 件事情中的 1 件

> ID：15751468
> 
> 赞同：1
> 
> 时间：2013-04-01T20:40:16.527
> 
> 标签：ssis

我有一个正在处理队列的 SSIS 包。我目前有一个单独的包，它被分成 3 个容器 1\. 收集一些元数据 2\. 完成工作 3\. 重新检查元数据，根据我们认为发生的情况更新队列（成功失败的味道）

我对速度不是很满意，部分原因是我在仓鼠驱动的服务器上运行，但那是我无法控制的。

中间部分可能会提供改进的机会……有 20 个表可能需要更新。每个队列项目将更新 1 个表。我目前有一个包含 20 个序列容器的序列。

它们基本上都做同样的事情，但我想不出一种抽象它们的方法。

每个框中的第一个框是一个空的脚本操作。如果表名匹配，则有条件流向“胆量”。

所以我打开了 20 个序列任务、20 个空脚本任务并进行了 20 个 T/F 检查。

观看黄/绿灯秀，这似乎很慢。

有没有更有效的方法？我认为让它变得更好的唯一方法是将 20 个空脚本放在序列容器之外。可以节省的是打开容器。我不敢相信打开一个序列容器会那么贵。它是否可能每次都重新验证容器中的每个任务？

只是钓鱼，如果有人有任何想法，我会很高兴听到他们的声音。

谢谢

格雷格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T02:07:46.633

您现在的主要问题是您在 BIDS 中运行它。这旨在使包的开发和调试变得容易，所以对你来说是的，它会在运行时验证所有对象。此外，“黄/绿灯秀”的开销更大，可以向您展示包运行时发生的情况。当您使用 DTSExec 或作为 Sql server 的计划任务的一部分运行它时，您将获得更好的性能。你在记录你的包裹吗？如果是这样，请从服务器运行并查看日志以验证该过程在服务器上实际花费的时间。如果此时仍然需要太长时间，那么您可以实现 @registered user 的一些想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:59:11.477

您是否并行运行每个任务？如果它必须连续循环遍历所有 60 个对象，那么您的主要改进空间是并行运行每个对象。如果您正在尝试并行化流程，那么您可以采取一些解决方案：

1.  创建所有 60 个对象，每个链包含 3 个对象。这是设置劳动密集型的，但它是最容易排除故障的，并且允许您在必要时对其进行自定义。显然这并没有抽象出任何东西！

2.  创建一个父包和一个子包。子包将包含您要执行的结构。父包包含 20 个执行包任务。这类似于 1，但它提供的优势是您只需为 3 任务序列容器维护一组代码。这可能意味着您将转向表驱动的元数据模型。如果您要将数据从一台服务器传输到另一台服务器，这在 SSIS 中与 CozyRoc Data Flow Plus 任务配合得很好。如果您在同一台服务器上做所有事情，那么您很可能正在组织存储过程执行，这很容易使用此模型完成。

3.  创建一个使用 CozyRoc Parallel Task 和 Data Flow Plus 的包。这可以让您将所有逻辑封装在一个包中并并行执行所有逻辑。 **警告**我在 SQL Server 2008 R2 中尝试了这种方法并取得了巨大成功。但是，当 SQL Server 2012 发布时，CozyRoc 并行任务的行为与我在以前版本中的行为方式不同，因为 SSIS 中存在一些隐蔽的变化。我将此记录为 CozyRoc 的错误，但据我所知，此问题尚未解决（截至 2013 年 4 月 1 日）。此外，此模型可能会抽象出过多的 ETL，并使将来的初始加载和对单个表加载进行故障排除变得更加困难。

就个人而言，我使用解决方案 1，因为我的任何团队成员都可以成功实现此代码。元数据驱动的解决方案很有吸引力，但更难正确编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T10:02:48.167

我可以建议将您的 20 个更新包装在一个存储过程中。不知道您的输入数据有多可变，我不知道这有多合适，但这是我的第一反应。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T16:13:57.290

好吧 - 这就是我所做的......

我在父序列容器的“顶部”添加了一个虚拟任务。从中我为每个子序列容器 (CSC) 添加了 20 个流链接。现在每个 CSC 仅在必要时才打开。

我的吞吐量确实增加了大约 30%（26 rpm--> 34 rpm 最小采样）。

我可以使用 zmans 回答或注册用户。两者都很有帮助。我选择 zmans 是因为真正的答案总是从查看日志开始，以确切了解某件事需要多长时间（根据我的经验，绿色/黄色并不真正可靠）。

谢谢

# c# - 使用反射从 COM 对象调用方法

> ID：15751474
> 
> 赞同：2
> 
> 时间：2013-04-01T20:40:30.260
> 
> 标签：c#, .net, reflection, com

为了与另一个用 .Net 2.0 编写的项目兼容，我们不得不提出一个 COM 互操作（较新的应用程序在 .Net 4.0 中）。这会起作用，因为 2.0 进程将能够在 .Net 4.0 中使用 SxS 执行。为了根据我的理解进行 COM 互操作，我必须执行以下操作：

```
Type myClass = Type.GetTypeFromProgID("Net4Assembly.Assembly4");
object myInstance = Activator.CreateInstance(myClass);
IAssembly4 assembly4Interface = (IAssembly4)myInstance;
assembly4Interface.CallMethod(); 
```

我已经创建了 COM 组件并注册了它，这工作正常。但问题是，由于用 2.0 编写的项目在我们部门之外，我想找到一种方法来使用反射在上面的第 3 行中进行转换。到目前为止，我在[使用 COM 对象上的反射的 Invoke 方法中找到了建议](https://stackoverflow.com/questions/2773022/invoke-method-using-reflection-on-com-object)

但这对我不起作用，因为当我在 COMObject 类型的“myInstance”中获取对象的所有方法时，我只能看到该链接中提到的方法。我收到此错误：

> 未知名称。（来自 HRESULT 的异常：0x80020006 (DISP_E_UNKNOWNNAME)）

我想我应该以某种方式将其`COMObject`转换为接口，然后我就可以访问这些方法了？我不应该能够从 中提取接口`COMObject`，然后使用反射调用该方法吗？我尝试`GetInterfaces(`了 )`COMObject`但没有返回任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:54:38.040

我不确定这是否可行，但假设您`No Misspelled Assembly Name`尝试过这样的事情

```
Type myClass  = Type.GetTypeFromProgID("Net4Assembly.Assembly4");
object myInstance = Activator.CreateInstance(myClass );
//object[] arguments = new object[] //add parameters if youre assembly expects them here
object result = myClass .InvokeMember("SubtractTwoNumbers", BindingFlags.InvokeMethod,
     null, myInstance, arguments); 
```

# python - 文件中的列表列表：每 4 行

> ID：15751475
> 
> 赞同：0
> 
> 时间：2013-04-01T20:40:30.557
> 
> 标签：python, list, list-comprehension, lines

我正在从 Python 中的文件中读取数据，并且需要创建一个列表列表。每行是一个记录中的一个单独的值，每条记录由一个空行分隔`\n`。

```
rsfile = 'filepath.txt'
l_s = [[line.rstrip('\n') for line in fileinput.input([rsfile]) if line != '\n']] 
```

这给了我每行的值列表，并且不包括`\n`我想在更大的列表中开始一个新的子列表或列表块。

例如
'line 1a'
'line 2a'
'line 3a'
'\n'
'line 1b'
'line 2b'
'line 3b'
'\n'

```
[['line 1a', 'line 2a', 'line 3a'], ['line 1b', 'line 2b', 'line 3b']] 
```

这可以通过列表理解实现吗？我最初是用两个列表创建的

```
for line in file:
    if line != '\n': l.append(line)

    else: l_of_l.append(l)

    l = [] 
```

感谢您的帮助！

史蒂文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:44:25.357

如果您尝试将内容收集到 4 行的组中，则[食谱](http://docs.python.org/3/library/itertools.html#recipes)`grouper`中的函数使这变得微不足道：[`itertools`](http://docs.python.org/3/library/itertools.html#recipes)

```
groups = grouper(4, file) 
```

这会返回一个可迭代的可迭代对象——特别是s 上的`izip`惰性迭代器`tuple`。如果您特别需要列表列表，则需要执行以下操作：

```
groups = [list(group) for group in grouper(4, file)] 
```

由于配方不是标准库模块的一部分，您要么必须从文档中复制并粘贴函数，要么安装名为[`more_itertools`](https://pypi.python.org/pypi/more-itertools).

如果你想要一些稍微不同的东西……好吧，如果不确切知道你想要什么，就很难确切地知道如何编码，但你可能会在`itertools`.

例如，假设您要将其拆分为由只有空格的行分隔的组。我很确定有一个函数`more_itertools`可以为你做这件事，但你可以很容易地自己写一个。

首先，您可以[`groupby`](http://docs.python.org/3/library/itertools.html#itertools.groupby)通过它们是否都是空格来对行进行分组：

```
groups = itertools.groupby(file, lambda line: not line.strip()) 
```

但`groupby`返回`key, group`对。你只想要`group`没有`key`. 而且您也只想要非空行组，而不是所有组。

```
groups = [group for empty, group 
          in itertools.groupby(file, lambda line: not line.strip())
          if not empty] 
```

或者，如果您明确需要一个列表列表，而不是某个任意的可迭代类型（在这种情况下，是一个`_grouper`惰性可迭代列表）：

```
groups = [list(group) for empty, group 
          in itertools.groupby(file, lambda line: not line.strip())
          if not empty] 
```

如果您查看`groupby`文档，这些示例实际上与此非常接近。

我可能会将其`lambda line: not line.strip()`分解为一个函数（或使用`more_functools.negate(line.strip)`，或……），并将其写成两行或三行，而不是将其塞进一个大列表理解中，但如果你想要一个 1 行列表理解（和 98-字符行是可以接受的），就是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T23:31:16.120

你有空行分隔应该进入每个子列表的组，对吗？假设您的输入不是太庞大而无法立即阅读，您可以这样做：

```
mylines = open("filepath.txt").read()
groups = [ grp.split("\n") for grp in mylines.split("\n\n") ] 
```

第一个`split`为您提供三行（或其他）的组，第二个为每个组构建一​​个子列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T21:02:41.503

尝试这样的事情......它的工作原理。“f.txt”是您要读取的文件

```
f=open('f.txt','r')
list=[[]]
i=0
for line in f:
    if line!='\n':
        list[i].append(line.strip('\n'))
    else:
        list.append([])
        i=+1
        print i
print list 
```

# c# - 如果禁止跨浏览器请求，如何启用 API 访问？

> ID：15751477
> 
> 赞同：1
> 
> 时间：2013-04-01T20:40:33.030
> 
> 标签：c#, javascript, jquery, asp.net, ajax

我正在编写一个从后端 Web 服务器提供数据的 C# Web 服务。如果我想让其他用户使用客户端代码查询此服务，我将如何为他们提供 API 访问权限？

例如，当前 Web 服务位于 Domain1.com。现在，如果我想让 Domain2.com 的某个人使用 jQuery 访问我的 API，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:46:03.830

您需要使用 JSONP 规范来返回您的数据，而不仅仅是 JSON。有关 jQuery 如何处理 JSONP 的完整详细信息，请参阅[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)。

# android - 小部件在几分钟后停止更新

> ID：15751481
> 
> 赞同：1
> 
> 时间：2013-04-01T20:41:05.560
> 
> 标签：android, timer, widget, textview, handler

我正在开发一个显示时间和日期的小部件，使用两个`TextView`使用 a`timer`每秒更新一次：

```
final Handler handler = new Handler();
Timer timer = new Timer();
timer.scheduleAtFixedRate(new TimerTask() {
        @Override
        public void run() {

            handler.post(new Runnable() {
                    public void run() {
                        java.util.Date noteTS = Calendar.getInstance().getTime();
                        String time = "kk:mm";
                        String date = "dd MMMMM yyyy";

                        views.setTextViewText(R.id.tvTime, DateFormat.format(time, noteTS));
                        views.setTextViewText(R.id.tvDate, DateFormat.format(date, noteTS));
                        appWidgetManager.updateAppWidget(appWidgetId, views);
                    }
            });
    }
}, 0, 1000);// Update textview every second 
```

添加时它会更新小部件，但会在几分钟后停止。在我重新启动后它也很难加载，但主要问题是`timer`这么多分钟后似乎停止了......有人知道发生了什么吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:52:23.810

由于应用小部件只是主屏幕进程托管的广播接收器，因此您必须使用它`AlarmManager`来安排对小部件的调用。如果不只是为了测试，请注意您的电池会耗尽，因为设备永远不会进入睡眠状态。通常，每秒更新应用程序小部件并不是一个好主意。

可以类似于此代码完成（此处为一分钟唤醒）

```
AlarmManager am = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
Intent intent = new Intent(MyWidget.ACTION_MYACTION);
PendingIntent pi = PendingIntent.getBroadcast(context, 0, intent, 0);
long triggerAtTime = getNextOccurrence(1); // next minute
am.set(AlarmManager.RTC_WAKEUP, triggerAtTime, pi); 
```

和

```
static private long getNextOccurrence(int deltaMinutes)
    {
            Calendar calendar = Calendar.getInstance();
            long now = calendar.getTimeInMillis();
            long then = now + (deltaMinutes * 60 * 1000);
            return then;
    } 
```

在`OnReceive`

```
public void onReceive(Context context, Intent intent)
    {
            Log.d(TAG, "onReceive() " + intent.getAction());
            super.onReceive(context, intent);

            if (intent != null)
            {
                    if (ACTION_MYACTION.equals(intent.getAction())
                    {
                            updateWidgets(context);
                    }
             ... 
```

# php - 对 php 魔术方法 __call() 的误解

> ID：15751482
> 
> 赞同：0
> 
> 时间：2013-04-01T20:41:09.297
> 
> 标签：php, oop

```
 class My_class {

        public function __call($name, $arguments) {

            echo "Called method ".$name.", arguments count is: ".count($arguments);

        }

    }

    $obj = new My_class();

    $arr = array(1,2,3);

    $obj->blabla($arr); 
```

结果是：`Called method blabla, arguments count is: 1`

问题：为什么参数计数是`1`而不是`3`？我错在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:44:43.450

该脚本不计算数组中的项目，只计算参数编号，唯一的参数是 $arr。

您需要使用以下方法计算项目：

```
count($arr); 
```

# java - Phonegap - 插件和服务之间的通信

> ID：15751484
> 
> 赞同：0
> 
> 时间：2013-04-01T20:41:17.203
> 
> 标签：java, android, cordova, phonegap-plugins

我创建了一个启动服务的插件，这工作正常。但是我希望能够从插件向正在运行的服务发送变量，并从服务中获取变量。我研究了广播/接收器和绑定，但无法获得任何使用我在下面使用的代码结构的示例。有没有人有任何提示？我是 android 开发的新手，对 Java 很陌生（但不是编程），所以我还没有完全实现概念上的飞跃。

**插入**

```
public class IOIOconnect extends CordovaPlugin {
    private Context thiscontext;
    private Intent ioioService;

    // Handle calls from Javascript
    @Override
    public boolean execute(String action, JSONArray args, CallbackContext callbackContext) throws JSONException {
        // Call from javascript to startup the IOIO service
        if (action.equals("ioioStartup")) {
            this.ioioStartup(callbackContext); 
            return true;
        }
    }

    // Initialise IOIO service (Called from Javascript)
    private void ioioStartup(CallbackContext callbackContext) {
        // Initialise the service variables and start it it up
        thiscontext = this.cordova.getActivity().getApplicationContext();
        ioioService = new Intent(thiscontext, HelloIOIOService.class);
        ioioService.putExtra("loadinterval", 800); // Set LED flash interval
        thiscontext.startService(ioioService);
    }
} 
```

**服务**

```
public class HelloIOIOService extends IOIOService {
        private int interval = 100; 

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    // USUAL IOIO SERVICE STUFF
    @Override
    public void onStart(Intent intent, int startId) {  
        // Service has been started
        super.onStart(intent, startId);

        // IOIO When service is started load external vars (if set)
        int loadinterval = intent.getIntExtra("loadinterval", -1);
        if(loadinterval>=0){ interval = loadinterval; }

        // Native IOIO stuff
        NotificationManager nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

        if (intent != null && intent.getAction() != null && intent.getAction().equals("stop")) {
            // User clicked the notification. Need to stop the service.
            nm.cancel(0);
            stopSelf();
        } else {
            // Service starting. Create a notification.
            Notification notification = new Notification(
                    R.drawable.ic_launcher, "IOIO service running",
                    System.currentTimeMillis());
            notification
                    .setLatestEventInfo(this, "IOIO Service", "Click to stop",
                            PendingIntent.getService(this, 0, new Intent(
                                    "stop", null, this, this.getClass()), 0));
            notification.flags |= Notification.FLAG_ONGOING_EVENT;
            nm.notify(0, notification);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T09:35:34.647

我遇到了完全相同的问题：为 Salesforce Mobile SDK 编写插件（基于 Cordova 2.3.0）。

我的案例：插件和应用程序是不同的 android 项目。

解决方案是您必须发布主（应用程序）项目的内容`Service`。`AndroidManifest.xml`请记住使用完整的限定路径对其进行签名并导出，如下所示：

```
<service
    android:name="full.qualified.path.to.Service"
    android:exported="true">
</service> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T19:02:05.523

我设法创建了一个在这个项目中使用的工作插件： [https ://github.com/opensystemsassociation/southendtransportresearch/tree/master/phonegap](https://github.com/opensystemsassociation/southendtransportresearch/tree/master/phonegap)

代码并不整洁，因为它仍在开发中，但“hacky”方法工作得很好，所以希望它会对沿线的人有所帮助

# c# - “Territory_Manager.HtmlAddressGenerator+Entry”类型的表达式不能用于返回类型“System.Object”

> ID：15751485
> 
> 赞同：0
> 
> 时间：2013-04-01T20:41:18.637
> 
> 标签：c#, sql, linq, frameworks, entity

我真的希望有人可以帮助我。

我有以下 sql 语句（只是用''替换了真实的列值）。

```
 string sqlstatement = @"
        SELECT 
            'a' as Street,
            1 as StreetNumber,
            'a' as StreetAddition,
            'a' as Family,
            'a' as FirstNames,
            'a' as VisitedBy
        FROM Person pOuter
        INNER JOIN House h
            ON pOuter.HouseId = h.Id
        INNER JOIN Street s
            ON h.StreetId = s.Id
            AND s.TerritoryID = (SELECT TOP 1 Id FROM Territory WHERE Number=" + selectedEntry.Number + @" AND CityId = (SELECT TOP 1 Id FROM City WHERE Name ='" + selectedEntry.City.Trim() + @"'))
        GROUP BY 
            pOuter.LastName, 
            pOuter.HouseId
        ORDER By Street ASC, StreetNumber ASC, StreetAddition ASC, Family ASC, FirstNames ASC"; 
```

并尝试执行它并使用以下命令生成强类型序列。

```
database.ExecuteStoreQuery<HtmlAddressGenerator.Entry>(sqlstatement); 
```

其中 database 是我的实体框架数据库上下文（左右）。

到达这一行后，调试器会抛出错误。

如果在 SQL Management Studio 中执行，则 sql 语句本身可以工作。我究竟做错了什么？它一直有效，直到我安装了win 8。也许它与win 8无关，为什么这段代码可以在XP机器上工作？但这不是问题。我只是想知道这个问题是否有任何解决方法，或者我是否监督过某事。很重要？我应该怎么做才能执行代码？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:10:14.057

此处描述了此问题的解决方案[Entity Framework 4 ExecuteStoreQuery<T> -- 无法返回对象类型属性](https://stackoverflow.com/questions/5344984/entity-framework-4-executestorequeryt-unable-to-results-to-object-type-prop)

错误是 HtmlAddressGenerator.Entry 是一个结构并且没有默认构造函数。因此将结构更改为类并添加默认构造函数已经解决了我的问题。

# maven - 从命令行指定 maven2 依赖版本

> ID：15751488
> 
> 赞同：1
> 
> 时间：2013-04-01T20:41:29.063
> 
> 标签：maven, maven-2

我正在处理一个有一些构建奇怪的合同......他们正在使用 maven，但 pom 文件实际上是由构建脚本编辑的，以用 jenkins 构建号替换版本号，然后使用相同的数字替换此项目将在构建时使用的其他内部项目的版本。我是 maven 的新手，但我知道这感觉不对。

我可以传入版本号，但将相同的属性放在依赖块中似乎不起作用。

我知道 maven 的道是严肃的事情，请理解这是一个非常短期的合同，构建系统不在我的工作说明书中 - 我只是想去一个源代码控制文件未被编辑的地方运行构建的简单行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T23:55:48.923

您绝对可以使用版本值定义 Maven 属性，并在依赖项声明中引用它。而且，使用 Maven 属性，可以使用“-D”命令行选项将它们传递给 Maven。

我不确定Maven运行的时间是否允许它改变依赖版本。我认为（所以，我不是 100% 确定）依赖管理将在处理命令行选项之前进行管理。

我会尝试定义一个包含依赖版本的 Maven 属性，并在依赖声明中适当地引用 Maven 属性。然后，在运行 mvn 时，提供所需的版本作为属性值。那将是最有可能的方法。

# ruby-on-rails - Rails - 如何在我的数据库服务器上存储上传

> ID：15751489
> 
> 赞同：1
> 
> 时间：2013-04-01T20:41:34.800
> 
> 标签：ruby-on-rails, file-upload, architecture, paperclip, carrierwave

在我的 Rails 应用程序中，出于 HIPAA 的原因，我需要将所有数据存储在与 Web 应用程序不同的服务器上。这对数据库来说很简单，但是让我的 Rails 应用程序（在 Web 服务器上）访问数据库服务器文件系统上的上传内容的最佳方法是什么？或者我应该将上传的内容存储在数据库（mysql）中吗？

我正在使用 Rails 3.2 和 Paperclip，但可以切换到 Carrierwave 或其他解决方案

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:53:53.777

> 或者我应该将上传内容存储在数据库中（mysql）

**不**，我会在此处为您提供更好的解释[将图像存储在数据库中-是还是否？](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay#)

> 允许我的 Rails 应用程序（在 Web 服务器上）访问数据库服务器文件系统上的上传的最佳方法是什么

我可能会创建另一个带有单独的 Rails 应用程序的 Web 服务器，该应用程序仅负责通过一些经过身份验证的 API 从其本地文件系统提供文件。

看起来人们*确实*成功地将 Amazon S3 与符合 HIPAA 的网站一起用于文件存储。

*   [您可以创建符合 HIPAA 的 Amazon S3 Web 应用程序吗？](https://stackoverflow.com/questions/2657586/can-you-create-a-hipaa-compliant-amazon-s3-web-application)
*   [Amazon 白皮书 - 使用 AWS 创建符合 HIPAA 标准的医疗数据应用程序](http://awsmedia.s3.amazonaws.com/AWS_HIPAA_Whitepaper_Final.pdf)
*   谷歌搜索“亚马逊 hipaa 合规性”会发现很多信息。**在构建我自己的存储文件的基础架构之前，我会对此进行研究**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:08:26.777

您可以配置回形针以将文档存储在 amazon s3 上

[https://github.com/thoughtbot/paperclip#storage](https://github.com/thoughtbot/paperclip#storage)

[http://rubydoc.info/gems/paperclip/Paperclip/Storage/S3](http://rubydoc.info/gems/paperclip/Paperclip/Storage/S3)

# layout - Layout.mobile.cshtml 突然停止工作——不应该与缓存相关

> ID：15751490
> 
> 赞同：0
> 
> 时间：2013-04-01T20:41:36.923
> 
> 标签：layout, asp.net-mvc-4

我周五离开时，我的应用程序在开发模式下工作......我今天早上进来，没有使用 Layout.Mobile.chtml ......这是开发模式，所以我仍然每次都启动 Web 服务器。 ...我读到了与缓存相关的类似问题....但我看不出这与我的问题有什么关系，因为一旦 Web 服务器关闭，缓存就会被清除。

我使用 Visual Studio 2012 作为我的开发“Web 服务器”。

一切都在运行，我看不出问题出在哪里，也不知道下一步该往哪里看。任何有关如何诊断此问题或在哪里查看的建议将不胜感激。

这仅适用于 Layout.Mobile.cshtml....当我切换回 Layout.cshtml 时，它被调用得很好....

在我的 global.asax.cs 中，我设置了以下设置来强制 firefox 使用移动布局显示：

```
 //The following forces Firefox to use the Mobile View ONLY
    DisplayModeProvider.Instance.Modes.Insert(0, new DefaultDisplayMode("mobile")
    {
        ContextCondition = (context =>
            context.Request.UserAgent.IndexOf("Mozilla", StringComparison.OrdinalIgnoreCase) >= 0)
    }); 
```

我的 _ViewStart.cshtml 文件是：

```
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

我的 _Layout.Cshtml 是：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>@ViewBag.Title - Etracs</title>
        <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
        <meta name="viewport" content="width=device-width" />

        @Styles.Render("~/Content/css")     

 <script src="~/Scripts/jquery-1.9.1.js"></script>
        <script src="~/Scripts/jquery-migrate-1.1.1.js"></script> 

       @RenderSection("scripts", required: false) 
    </head>
    <body>

        <header>
             *@  
        </header>

        <div id="body">         
            <section class="content-wrapper main-content clear-fix">
                @RenderBody()
            </section>
        </div>

        @Html.Partial("_ViewSwitcher")
        <footer>
            <div class="content-wrapper">
                <div class="float-left">
                    <p>&copy; @DateTime.Now.Year - Turning Basin Services</p>
                </div>
            </div>
        </footer>

    </body>
</html> 
```

我的 _Layout.Mobile.cshtml 是：

```
 <!DOCTYPE html> 
<html> 
    <head> 
        <meta charset="utf-8" />
        <title>@ViewBag.Title</title> 
        <meta name="viewport" content="width=device-width, initial-scale=1" />

      @*  @Styles.Render("~/Content/Mobile/css")  *@
      @*  @Styles.Render("~/Content/jquerymobile/css") *@ 
        <link rel="stylesheet" href="~/Content/Mobile/css/jquery.mobile-1.2.0.css" />   
        <link rel="stylesheet" href="~/Content/Mobile/css/jquery.mobile.theme-1.2.0.css" />  

      @*  @Scripts.Render("~/bundles/jquery")   *@
      @*  @Scripts.Render("~/bundles/jquerymobile")  *@
        <script src="~/Scripts/jquery-1.9.1.js"></script>
        <script src="~/Scripts/jquery-migrate-1.1.1.js"></script> 
        <script src="~/Scripts/jquery.mobile-1.2.0.js"></script>

        <script>
            $(document).ready(function () {
                $.mobile.ajaxEnabled = false;
            });
        </script>

        @RenderSection("scripts", required: false) 
    </head> 

    <body> 

        <div data-role="page" data-theme="c">

            <div data-role="header"> 
                @RenderSection("backbtn", false)       
                <h1>@ViewBag.Title</h1>
                @RenderSection("Home", false)
            </div>

            <div data-role="content">
               @*     @RenderSection("featured", false) *@
                    @RenderBody()       
            </div>

            <div data-role="footer">
                   <h4>  @Html.Partial("_ViewSwitcher")  &copy; @DateTime.Now.Year - Turning Basin Services</h4>
            </div>
        </div>

   </body>
</html> 
```

在我的观点中，我通常使用 viewstart 将视图设置为隐式映射到布局......但是，我的 .Login.Mobile.cshtml 将关联硬连线到移动布局，如下所示：

```
@model TBS.Etracs.Web.Main.Models.LoginModel

@{
    ViewBag.Title = "Log in";
    Layout = "~/Views/Shared/_Layout.Mobile.cshtml";
}

    @Html.ValidationSummary(true)
<section id="loginForm">
   @* @using (Html.BeginForm(new { ReturnUrl = ViewBag.ReturnUrl })) { *@
    @using (Html.BeginForm ("Login")) {
    @Html.AntiForgeryToken()

        <div data-role="content">
            <div data-role="fieldcontain">
                <label for="UserName">UserName:</label>
                @Html.TextBoxFor(m => m.UserName)
                @Html.ValidationMessageFor(m => m.UserName)
            </div>

            <div data-role="fieldcontain">
                <label for="Password">Password</label>
                @Html.PasswordFor(m => m.Password)
                @Html.ValidationMessageFor(m => m.Password)
            </div>

            <div data-role="fieldcontain">
                <label for="ProgramMode">ProgramMode</label>
                <select name="ProgramMode" id="ProgramMode">
                    <option value="VW">VW</option>
                    <option value="Porsche">Porsche</option>
                    <option value="Bentley">Bentley</option>
                </select>
            </div>

         <div data-role="fieldcontain">
                <label for="ConnectionMode">ConnectionMode</label>
                <select name="ConnectionMode" id="ConnectionMode">
                    <option value="Production">Production</option>
                    <option value="Test">Test</option>
                </select>
            </div>

          <input type="submit" value="Log in" />

        </div>

    }
</section>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:18:50.637

使用 Glimpse 我发现 _layout.mobile.cshtml 仍在被调用和包含......问题是它不起作用......这与我之前遇到的问题有关......

在我的 _Layout.Mobile.chtml 中，我回到了以下代码，我的布局现在可以工作了

```
 <link rel="stylesheet" href="~/Content/Mobile/css/jquery.mobile-1.2.0.css" /> 
    <link rel="stylesheet" href="~/Content/Mobile/css/jquery.mobile.theme-1.2.0.css" /> 

    <script src="~/Scripts/jquery-1.9.1.js"></script>
    <script src="~/Scripts/jquery-migrate-1.1.1.js"></script> 
    <script src="http://code.jquery.com/mobile/latest/jquery.mobile.min.js"></script> 
```

我用它来替换 _layout.Mobile.cshtml 中的以下行

```
<link rel="stylesheet" href="~/Content/Mobile/css/jquery.mobile-1.2.0.css" />   
<link rel="stylesheet" href="~/Content/Mobile/css/jquery.mobile.theme-1.2.0.css" />  

<script src="~/Scripts/jquery-1.9.1.js"></script>
<script src="~/Scripts/jquery-migrate-1.1.1.js"></script> 
<script src="~/Scripts/jquery.mobile-1.2.0.js"></script> 
```

我非常困惑的一个大问题是发生了什么......这以前工作了几天，然后停止工作......将不胜感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-06T20:27:20.087

我看到你承认你不相信这与缓存有关 - 但我在这里添加它，因为在使用移动视图时要注意这一点至关重要。

这里解释了缓存错误

> 戴夫·沃德：
> 
> 在使用 MVC 4 的移动视图支持时，每个人都应该注意的一点是，RTM 版本中存在一个错误，导致在视图第一次从分辨率缓存中掉出后，会为移动设备呈现错误的视图。棘手的部分是，在调试模式下或在发布模式下直到 15 分钟不活动时您才会注意到这一点，因此让错误行为进入生产环境非常容易。NuGet 有一个简单的修复方法，Rick Anderson 在这里介绍：
> 
> [http://blogs.msdn.com/b/rickandy/archive/2012/09/17/asp-net-mvc-4-mobile-caching-bug-fixed.aspx](http://blogs.msdn.com/b/rickandy/archive/2012/09/17/asp-net-mvc-4-mobile-caching-bug-fixed.aspx)

另请参阅这篇文章中的评论 [http://www.hanselman.com/blog/MakingASwitchableDesktopAndMobileSiteWithASPNETMVC4AndJQueryMobile.aspx](http://www.hanselman.com/blog/MakingASwitchableDesktopAndMobileSiteWithASPNETMVC4AndJQueryMobile.aspx)

如果您有自定义视图引擎（就像我一样），您可以在安装 nuget 包后更改基类：

```
public class SiteIdentityViewEngine : Microsoft.Web.Mvc.FixedRazorViewEngine, IVirtualPathFactory 
```

# php - 网站冻结，无法登录cpanel

> ID：15751493
> 
> 赞同：0
> 
> 时间：2013-04-01T20:41:41.860
> 
> 标签：php

我是 php web dev 的新手，最近我一直在做一个网站……它在我的本地服务器上运行良好，但是当我把它放在一个实际的服务器上时，它开始运行非常慢，直到它最终放弃了，现在我甚至无法访问该网站..或cpanel ...我一直在做一些研究，认为这可能与sql查询和超载有关，但我似乎找不到任何...

我的网站包含许多对 php 脚本的 javascript 和 ajax 调用，这些脚本从数据库中获取数据......（新通知、消息），我有类似的东西：

```
//QUESTION RETRIEVAL FOR HOME FEED 
  $(function(){
    $r = setTimeout(alive_retrieval,100);
  });
  function alive_retrieval(){
    $.ajax({
      type:"GET",
      url:"php/alive_questions.php",
      success:function(data){
        $("#alive_question.content").html(data);
      }
    });
    $r = setTimeout(alive_retrieval,100);
  }
  $(function(){
    $t = setTimeout(question_retrieval,100);
  }); 
```

这只是一遍又一遍地调用alive_retrieval函数，我猜这可能会导致我的网站变慢......

我不知道要发布什么来提供帮助（代码，我网站的链接..或w / e）请告诉我我应该给你们什么，这样你们就可以看到发生了什么......

当我转到我的网站地址时，我的托管服务提供商会弹出此错误：

```
Website you were trying to visit was disabled for 5 minutes, because it received over 20% of total server requests.
It means that this website was using over 20% of processor resources, which is above allowed limit.
Website was temporary disabled to protect server from overloading and other websites on server. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:50:40.367

看起来您正在运行的 Javascript 试图每秒重新加载页面 10 次（通过设置 100 毫秒的超时）。这是完全不合理的——将其更改为每 10 秒（10000 毫秒）一次可能更容易接受。

# java - 使用基本字段构建日历时提供错误周数的日历实例

> ID：15751497
> 
> 赞同：-1
> 
> 时间：2013-04-01T20:41:53.103
> 
> 标签：java, calendar, week-number

我想了解为什么会发生这种情况，以及如何解决这个小问题。在提供日、月和年之后，我希望能够从 java 日历实例中获取周数。如果我做：

```
 Calendar cal=Calendar.getInstance();
       cal.set(Calendar.DAY_OF_MONTH, 11);
       cal.set(Calendar.MONTH,2);
       cal.set(Calendar.YEAR, 2013); 
```

2013 年 2 月 11 日是第 7 周，但如果我调用，在上述日历实例中：

```
int weekNumber=cal.get(Calendar.week_of_year) 
```

我得到第 11 周。知道为什么吗？我尝试设置语言环境但没有区别，问题是我只能从这三个字段中构建一个日历，因为我使用解析器从 xml 文件中读取它们并且它们的格式为 dd-mm-yyyy 没有更多信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:46:14.143

中的月份字段`Calendar`从零开始。该值`2`对应于[Calendar.MARCH](http://docs.oracle.com/javase/7/docs/api/constant-values.html#java.util.Calendar.MARCH)。为避免混淆，最好使用`Calendar`常量。你可以使用：

```
cal.set(Calendar.MONTH, Calendar.FEBRUARY); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:47:05.947

您使用了 March，因为 Java 月份[`Calendar`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#MONTH)是从 0 开始的：0 = 一月，1 = 二月，2 = 三月。

采用

```
cal.set(Calendar.MONTH,1); 
```

或者

```
cal.set(Calendar.MONTH, Calendar.FEBRUARY); 
```

如果你可以使用一个常数。否则，从您从解析器收到的月份中减去 1。

# powershell - Powershell BitsTransfer 未完成

> ID：15751498
> 
> 赞同：3
> 
> 时间：2013-04-01T20:41:54.847
> 
> 标签：powershell, microsoft-bits

很抱歉一直询问 Powershell，我的 script-foo 不是它需要的。

我正在编写一个 BitsTransfer .PS1 来自动每周下载一个 ASCII 文件。

它似乎永远不会完成并达到“已转移”状态，并且似乎停滞在“正在转移”状态。我可以在我的 -Destination 文件夹中看到一个 TMP 文件，其中包含我的 ASCII 数据。

当我手动下载目标文件并将其与 TMP 文件进行比较时，它们的大小相同，并且似乎具有相同的第一条和最后一条记录。我假设下载完成。

如果我手动运行 Get-BitsTransfer | Complete-BitsTransfer，TMP 文件消失但仍然没有-Destination 文件。

我的剧本并不复杂...

```
$date= Get-Date -format yyMMdd
$ntispasswd = ConvertTo-SecureString "*******" -AsPlainText -Force
$ntiscreds = New-Object System.Management.Automation.PSCredential ("*******", $ntispasswd)
$jobdescriptor = "DMFWA" + $date
$dmfpath = "C:\DMF"

# -Source https://dmf.ntis.gov/dmldata/weekly/WA$date `

Import-Module BitsTransfer

Start-BitsTransfer `
    -DisplayName $jobdescriptor `
    -Priority High `
    -ProxyUsage Override `
    -ProxyList mckwebfilt1:3128 `
    -RetryInterval 60 `
    -TransferType Download `
    -Source https://dmf.ntis.gov/dmldata/weekly/WA130322 `
    -Destination $dmfpath\TestWA$date.txt `
    -Authentication Basic `
    -Credential $ntiscreds `
    -Asynchronous

$job = Get-BitsTransfer $displayname

While($Job.Jobstate -ne 'Transferred'){
    $job
    Start-Sleep -s 1
}

Complete-BitsTransfer $job 
```

谁能帮我理解我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-13T21:53:41.570

我在 BitsAdmin 上使用了太多时间来尝试传输一个从未完成的文件，因为服务器没有给出文件长度。

```
Start-BitsTransfer : Die Dateigröße wurde vom Server nicht zurückgegeben. 
Möglicherweise enthält die URL dynamischen Inhalt. Der
Inhaltslängenheader ist in der Server-HTTP-Antwort nicht verfügbar.
In Zeile:1 Zeichen:1
+ Start-BitsTransfer http://***/file c:\users\***\file.txt
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+ CategoryInfo          : InvalidOperation: (:) [Start-BitsTransfer],Exception
+ FullyQualifiedErrorId :
StartBitsTransferCOMException,Microsoft.BackgroundIntelligentTransfer.
  Management.NewBitsTransferCommand 
```

在使用 Start-BitsTransfer 从 powershell 尝试相同的操作后，它是相同的行为。

这个解决方案真的很棒，也解决了我的问题！谢谢！

```
$request = New-Object System.Net.Webclient
$passwd = ConvertTo-SecureString "**" -AsPlainText -Force
$request.Credentials = New-Object System.Management.Automation.PSCredential ("**", $passwd)
$request.Downloadstring("https://my full target url") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-23T16:09:28.340

您以正确的方式做到了：

```
Import-Module BitsTransfer

Start-BitsTransfer -Source $url -Destination $output -Asynchronous    
Get-BitsTransfer | Complete-BitsTransfer 
```

可能的故障

1.  目标参数错误`$dmfpath\TestWA$date.txt`
2.  有 60 多个 BitTransfer 正在运行，以`Get-BitsTransfer | Remove-BitsTransfer`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T23:06:05.557

查看此[网页上有关使用 Start-BitsTransfer](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663885%28v=vs.85%29.aspx)的最后一个示例，看看是否有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T21:23:27.093

原来这是一个“皇家皮塔”。

谢谢 Kieth 的提示。

我无法让 BitTransfer 正常工作并诉诸这样的事情..

```
$request = New-Object System.Net.Webclient
$passwd = ConvertTo-SecureString "**" -AsPlainText -Force
$request.Credentials = New-Object System.Management.Automation.PSCredential ("**", $passwd)
$request.Downloadstring("https://my full target url") 
```

# python - 在 Python 中重命名的 XLS 文件被损坏？

> ID：15751499
> 
> 赞同：2
> 
> 时间：2013-04-01T20:42:03.553
> 
> 标签：python, xls, file-rename

我是 Python 的新手，我想完成一个简单的任务，但我有点卡住/困惑。我只是有一个我想自动化的任务，即将当前日期附加到工作的 excel 文件的文件名中。

```
import os
import sys
import datetime

src_dir = os.path.normpath('\\\\EXAMPLE_SERVER_NAME\\x$\\Clients\\Public\\')
dir = os.listdir(src_dir)
now = datetime.datetime.now()
year = now.year
month = now.month
day = now.day
date = str(month) + '.' + str(day) + '.' + str(year)
new_filename = ''

for filename in dir:
    if filename.startswith('MJ_ProdMaster'):
        str_index = filename.index('.',0,len(filename))
        new_filename = filename[:(str_index)] + ' ' + str(date) + '.xls' 
        new_filename = os.path.join(src_dir, new_filename)
        old_filename = os.path.join(src_dir, filename)
        os.rename(old_filename,new_filename) 
```

当我在 Libre Office 中打开新重命名的 XLS 文件时，收到的警告是：

> 该文件已损坏，因此无法打开。LibreOffice 可以尝试修复该文件。
> 
> 损坏可能是由于数据传输造成的文档操作或结构文档损坏的结果。

所以我对文件的重命名显然已经损坏了它，尽管从表面上看它似乎正确地重命名了文件。我不确定我是如何破坏它的。第二个（但同样重要）的问题是我应该在我的脚本中做些什么不同的事情，因为我显然没有成功地完成重命名任务。

编辑：如果是任何附加信息，当我尝试在 Libre Office 中修复文件时，错误**读取错误：未知或不支持的 Excel 文件格式。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:54:22.560

代替

```
new_filename = filename[:(str_index)] + ' ' + str(date) + '.xls' 
```

尝试

```
new_filename = filename[:(str_index)] + ' ' + str(date) + filename[(str_index):] 
```

`.`这将保留任何以前的后缀，并且对文件名中的多个字符具有容错性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T20:55:25.363

用户 BenDundee 正确地猜到了我不小心将 XLSX 文件重命名为 XLS 并且看不到我面前的内容。

# html - 离线 Web App、应用缓存、Ipad iOS6 和 HTTPS、HTML5

> ID：15751501
> 
> 赞同：1
> 
> 时间：2013-04-01T20:42:11.893
> 
> 标签：html, ipad, caching, ios6, manifest

我正在编写一个 Web 应用程序，它意味着我使用 iPad 的 Safari 主页书签功能“有时”离线使用。“有时”是指如果 iPad 离线并且数据已被缓存，该应用程序应该可以工作。如果 iPad 在线并且缓存清单已更改，则应用程序应更新缓存的内容。该网页通过 https 进行保护。

目前，我可以使用 Chrome、Firefox 和 Safari 让我的应用程序正常工作。我已经在 Windows 7 和 Windows XP 中对它们进行了测试。该应用程序在 iPad 使用 Safari 的“正常”方式下也可以正常工作，但是当我运行应用程序的书签版本（通过指定特殊的独立苹果元数据然后添加书签创建）时，它会执行初始密码提示并正确移动到下载缓存清单文件中指定的所有数据。问题是独立应用程序的任何后续运行似乎都无法访问清单文件，因此清单文件的任何后续更新都不会得到反映。

所以我的问题是：HTML5 特定缓存是否可以在 iPad (ios6) 上使用 https 在独立（已添加书签）的 Web 应用程序上工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T21:20:17.500

[iPad 上的应用程序缓存不会缓存网站数据或页面](https://stackoverflow.com/questions/16002355/application-caching-on-ipad-will-not-cache-website-data-or-pages)

我遇到了同样的问题。这个答案有效。希望它也适合你！

# git - Git/Github 允许合作者但保持控制

> ID：15751510
> 
> 赞同：2
> 
> 时间：2013-04-01T20:42:30.003
> 
> 标签：git, github, commit

我想在我的 github 存储库之一上允许一些合作者，但是我想将它们限制在他们自己的分支中。只有少数合作者，将他们限制在自己的分支中可以防止错误的提交/推送到错误的分支。

有没有办法做到这一点？我在这个合作的事情上做错了吗？有没有更好的办法？

感谢您提供任何信息，我不熟悉让其他人在我的回购中工作。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:52:45.460

为此，他们只需要分叉您的存储库，对其进行处理并上传他们的更改。之后，作为所有者，您将负责接受更改并将其合并到您的主人中。

如果您正在使用**组织帐户**，那么您想要的非常困难，因为您只能限制对整个存储库的访问。无论如何，您可以为该存储库创建一个组，其中一些合作者授予他们管理员权限，另一个组与其他合作者授予他们适当的`pull`权限，这样他们就不会做出不希望的更改。

但是对于您的情况，我认为您需要一个组织帐户

# regex - Perl 中用于过滤 Webmin 日志的正则表达式

> ID：15751516
> 
> 赞同：-1
> 
> 时间：2013-04-01T20:42:43.427
> 
> 标签：regex, perl

我需要从仅匹配`webmin`并`Invalid login as root from`使用 Perl 正则表达式的安全日志中过滤以下行：

`Apr 2 00:24:53 host webmin[98614]: Invalid login as root from 1.2.3.4`

我试过这个，但它不匹配：

`$line =~ /^\S+\s+\d+\s+\S+ \S+ webmin[\]: \Invalid login as root from/)`

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:46:31.253

*   `[`是字符类的开始。你想从字面上匹配它，所以你需要逃避它。
*   你永远不会匹配这个`98614`部分。
*   应该`\I`只是。甚至会给你一个警告。`I``\I`

```
/^\S+\s+\d+\s+\S+ \S+ webmin\[\d+\]: Invalid login as root from/ 
```

# java - 如何从内部匿名类中处理匿名类的实例？

> ID：15751517
> 
> 赞同：1
> 
> 时间：2013-04-01T20:42:45.567
> 
> 标签：java

我有一个包含另一个匿名类中的匿名类的代码，我需要从内部匿名类中处理外部匿名类的实例。这是代码：

```
editTemplateButton.setAction(new AbstractAction("Edit...", GUIUtils.EDIT_ELEMENT_ICON)
        {
            {
                setEnabled(false); // disabled at start
                templatesList.addListSelectionListener(new ListSelectionListener()
                {
                    @Override
                    public void valueChanged(ListSelectionEvent e)
                    {
                        setEnabled(!templatesList.isSelectionEmpty()); // depends on selection
                    }
                });
            }

            @Override
            public void actionPerformed(ActionEvent e)
            {
                //todo
            }
        }); 
```

所以，我调用内部实现的`setEnabled()`实现。现在它被称为ok。但是我想将实现放到变量中，并为不同的操作使用两次。如何正确调用？请不要忘记包含此代码的外部也有方法，我不想调用它而不是正确的。`AbstractAction``ListSelectionListener``ListSelectionListener``setEnabled()``JFrame``setEnabled()`

提前感谢您的回答。

**更新：**我不能像这样使用构造，`AbstractAction.this.setEnabled(!templatesList.isSelectionEmpty());`因为编译器报告错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:46:02.987

我读错了。您可以转向`AbstractAction`私有非匿名内部类（例如`MyAction`），然后将其称为`MyAction.this`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:54:12.547

~~你应该打电话：~~

 ~~```
AbstractAction.this.setEnabled(!(this.isSelectionEmpty())); 
```~~ 

~~**更新**
好的，您可以这样进行：~~

 ~~```
 final AbstractAction[] action = new AbstractAction[1];
   editTemplateButton.setAction(action[0]=new AbstractAction("Edit...", GUIUtils.EDIT_ELEMENT_ICON)
        {
            {
                setEnabled(false); // disabled at start
                templatesList.addListSelectionListener(new ListSelectionListener()
                {
                    @Override
                    public void valueChanged(ListSelectionEvent e)
                    {
                        action[0].setEnabled(!templatesList.isSelectionEmpty()); // depends on selection
                    }
                });
            }

            @Override
            public void actionPerformed(ActionEvent e)
            {
                //todo
            }
        }); 
```~~

# html - 如何“包含”背景图像？

> ID：15751519
> 
> 赞同：0
> 
> 时间：2013-04-01T20:43:00.617
> 
> 标签：html, css, layout

我通过 CSS 使用背景图像来设置我网站上的一些元素的样式。我在 Chrome 和 IE 中看到的问题是，当行的行高小于图像的高度时，图像会被裁剪。[这是一个演示问题的小提琴](http://jsfiddle.net/xkFfs/)（再次，使用 Chrome 或 IE 查看问题以查看问题；Firefox 呈现我想要的东西），这是来自所述小提琴的相应代码：

**HTML**

```
<ul>
    <li class="icon"><a href="#">Link 1</a></li>
    <li class="icon"><a href="#">Link 2</a></li>
    <li class="icon">No Link Here</li>
</ul> 
```

**CSS**

```
ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
}

ul li {
    display: inline;
    font-size: 13px;
    margin: 0 1em 0 0;
    padding: 0;
}

ul li.icon {
    background: url(http://www.borngeek.com/images/2013/stack_overflow_ex_01.gif) no-repeat left center;
    padding-left: 22px;
} 
```

请注意，实际上我不会以像素为单位对字体大小进行硬编码。它们最终被渲染为 13 像素高。我已经硬编码了这里的值来重现问题。

以下似乎都不起作用：

*   在各种元素（甚至是父元素）上设置`height`、`line-height`或`min-height`
*   以`overflow`各种方式使用价值

潜在的、有问题的解决方法包括：

*   将字体大小更改为更大
*   使用模糊`padding`值来防止图像被剪裁
*   Using `display: inline-block`，它有自己的一系列问题
*   Using `float: left`，它也有一些缺点
*   使用`<img>`元素而不是 CSS，在这种情况下感觉不对
*   使用`background-size`我在[这个答案](https://stackoverflow.com/a/1341462/1128047)中找到的 CSS 属性，尽管对此的支持参差不齐

有没有更清洁的方法来处理这个问题，或者上述解决方法之一是我最好的选择？我唯一的目标是让父元素足够高以渲染整个 16x16 图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:45:43.780

强制 LI 在顶部和底部有 2px 的填充（或者只有 3px 到顶部）。这样做的目的是使高度`<li>`等于或大于图像的高度，即 16px。你的字体大小是 13px，所以 3px 填充到顶部 = 16px，或者 2px 到顶部和底部 = 17px，这也可以。这是最好的方法，因为它是一种“最佳实践”。

[http://jsfiddle.net/xkFfs/3/](http://jsfiddle.net/xkFfs/3/)

```
padding: 2px 0; 
```

或者，调整`background-position:`

[http://jsfiddle.net/xkFfs/6/](http://jsfiddle.net/xkFfs/6/)

```
background-position: 2px 0px; 
```

# php - 输出到 HTML 文件的 PHP 分析器

> ID：15751520
> 
> 赞同：0
> 
> 时间：2013-04-01T20:43:00.693
> 
> 标签：php, profiler

我想知道是否有一个分析器将运行 PHP 段的配置文件输出到驻留在服务器上的单独的 HTML（或其他阅读器友好类型的文件）文件，或者至少是一个纯文本日志文件? 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:10:43.753

我找到了一个可以很好地解决我的问题的解决方案。下载了带有 Webgrind 前端的 xdebug，它为 AJAX（运行 PHP）生成报告没有问题。我用过的所有其他分析器都不会这样做。

# ruby-on-rails - 我的 Sinatra API 如何管理客户端应用程序中的用户登录？

> ID：15751522
> 
> 赞同：4
> 
> 时间：2013-04-01T20:43:19.790
> 
> 标签：ruby-on-rails, ruby, json, session, sinatra

我正在使用 Sinatra 构建一个 API，它应该能够管理向其发送请求的任何客户端应用程序的用户登录会话。到目前为止（对于登录功能），我得到的是 /login 的路由，如果用户凭据有效，则会在 RDBMS 中创建一个 AccessToken。见下文：

```
 #
    # Login
    #
    post '/login' do
      if (@input["email"].nil? || @input["password"].nil?) then
        response = {
          "success" => false,
          "msg" => "Email and password must be provided"
        }
        $log.error "Email or password not sent to /login"
        return response.to_json
      end

      email     = @input["email"]
      password  = Digest::SHA2.hexdigest(@input["password"])

      user = User.where(:email => email, :password => password).first
      if user.nil?
        response = {
          "success" => false,
          "msg" => "No users exist with that email/password combo"
        }
        $log.error "Invalid Email or Password sent to /login"
        return response.to_json
      end

      token = AccessToken.new(:user_id => user.id)
      token.save!

      $log.info "User valid. Logged in. Token: #{token.token}"
      response = {
        "success" => true,
        "msg" => "User logged in",
        "data" => {"token" => token.token}
      }
      return response.to_json
    end 
```

然后对于需要身份验证的任何其他路由，我正在检查令牌是否作为请求的参数发送，例如：

```
 #
    # Return Clients for User
    #
    # get '/clients/:token' do
    get '/clients' do
      token = AccessToken.where(:token => params[:token]).first
      @current_user = User.find(token.user_id) unless token.nil?

      if @current_user.nil?
        response = {
          "success" => false,
          "msg" => "User must be logged in to do this"
        }
        $log.error "User is not logged in"
        return response.to_json
      end

      response = {
        "success" => true,
        "msg" => "Clients successfully retrieved",
        "data" => {"clients" => @current_user.clients}
      }
      $log.info "Clients successfully retrieved"
      return response.to_json
    end 
```

所以我想知道：（a）这是一种使用 API 处理用户会话的好/稳健的方法，以及（b）是否有在客户端（iOS、Android 和 Web 应用程序）处理它的标准方法？他们是否应该将访问令牌存储在会话变量中，然后在每个请求中将令牌添加到正在发送的参数中？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-12T13:47:41.803

查看 JSON Web Tokens 以了解交换令牌的标准化方式：http: [//jwt.io/](http://jwt.io/)

对于 Sinatra 部分，您可以使用以下模式来避免重复授权代码：

```
before do
  token = AccessToken.where(:token => params[:token]).first
  @current_user = User.find(token.user_id) unless token.nil?
end 
```

注册一个认证方法：

```
register do
  def auth (type)
    condition do
      return {
        "success" => false,
        "msg" => "User must be logged in to do this"
      }.to_json unless @current_user
    end
  end
end 
```

现在您可以将此要求添加到任何路线：

```
get '/clients', :auth => :user do
  # Your implementation
end 
```

# awk - 总结具有相同名称的行 awk

> ID：15751531
> 
> 赞同：1
> 
> 时间：2013-04-01T20:44:00.183
> 
> 标签：awk

我有三排。第一行和第二行有数字，第三行有名字。使用 awk，如何将与名称相关的所有数字相加。名称可能是随机的，所以我可能需要一个变量。例如，它可能看起来像这样

```
100   221   dog
121   324   cat
42    4341  fish
12    23    cat
2134  424   dog 
```

所以输出应该是第 1 行和第 2 行中所有出现的狗、猫和鱼的所有数字。喜欢

```
dog 2879
cat 480
fish 4383 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T20:46:49.813

试试这个单行：

```
awk '{a[$3]+=($1+$2)}END{for(x in a)print x, a[x]}' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:53:58.110

```
awk '
{
   name[$3] += $1 + $2
}
END { for (n in name) { print n, name[n]; } } ' datafile 
```

# php - MySQL - 表格文本

> ID：15751535
> 
> 赞同：0
> 
> 时间：2013-04-01T20:44:17.420
> 
> 标签：php, mysql, sql, html-table

我正在尝试在 MySQL 消息表中插入一个文本，但它似乎无法正常工作。我尝试了数百种可能性如何让它发挥作用，但我失败了

当你读到这句话

```
mysql_query("INSERT INTO rapoarte (emitator,rec.... 
```

下来我正在尝试整合一个表格，但我不知道为什么它在这部分不起作用

```
<td><a href='alianta_principal.php?catre=".$g['id']."'>Accepta invitatia</a></td> 
```

或者这既不是

```
<td><a href='alianta_principal.php?catre=".$g['id']."'>Refuza invitatia</a></td> 
```

MySQL表是：

```
DROP TABLE IF EXISTS `rapoarte`;
CREATE TABLE `rapoarte` (
  `id` int(11) NOT NULL auto_increment,
  `emitator` int(11) NOT NULL,
  `receptor` int(11) NOT NULL,
  `titlu` text NOT NULL,
  `descriere` longtext NOT NULL,
  PRIMARY KEY  (`id`),
  KEY `id` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8; 
```

**代码**

```
$selectare = mysql_query("select * from membri where id !=".$citeste['id']);
 $g = mysql_fetch_array($selectare);

 $clan_nume = $klan_info['clan_nume'];
 $clan_id_test = $klan_info['clan_uid'];

if ($_GET['in']>0)
{

    mysql_query("INSERT INTO rapoarte (emitator,receptor,titlu,descriere)
            VALUES(".$citeste['id'].",'".$g['id']."','Invitatie','
            <table>
            <tr>
            <th>Aceasta este o invitatie a clanului $clan_nume</th>
            </tr>
            <tr>
            <td><a href='alianta_principal.php?catre=".$g['id']."'>Accepta invitatia</a></td>
            <td><a href='alianta_principal.php?catre=".$g['id']."'>Refuza invitatia</a></td>
            </tr>
            </table>')");

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:47:11.990

如果您查看您要尝试的内容，`INSERT`您会发现您正在传递未转义的单引号：

```
INSERT INTO rapoarte (emitator,receptor,titlu,descriere)
        VALUES(,'','Invitatie','
        <table>
        <tr>
        <th>Aceasta este o invitatie a clanului </th>
        </tr>
        <tr>
        <td><a href='alianta_principal.php?catre='>Accepta invitatia</a></td>
        <td><a href='alianta_principal.php?catre='>Refuza invitatia</a></td>
        </tr>
        </table>') 
```

您需要对它们进行转义，或者以最佳方式将绑定参数与准备好的语句一起使用。

```
mysql_query("INSERT INTO rapoarte (emitator,receptor,titlu,descriere)
        VALUES(".$citeste['id'].",'".$g['id']."','Invitatie','
        <table>
        <tr>
        <th>Aceasta este o invitatie a clanului $clan_nume</th>
        </tr>
        <tr>
        <td><a href=\'alianta_principal.php?catre=".$g['id']."\'>Accepta invitatia</a></td>
        <td><a href=\'alianta_principal.php?catre=".$g['id']."\'>Refuza invitatia</a></td>
        </tr>
        </table>')"); 
```

# c++ - 如何链接zlib库

> ID：15751536
> 
> 赞同：12
> 
> 时间：2013-04-01T20:44:20.270
> 
> 标签：c++, boost, zlib, compression

您好我正在使用 boost 和 zlib 过滤器来压缩和解压缩数据。在 boost 页面的说明中，如果 .cpp 文件依赖于外部库，则必须从源代码构建它或链接到预构建的二进制文件。

我使用mac端口安装boost和zlib。我将 boost 库包含为 -I/opt/local/include

我的代码：

```
#include <fstream>
#include <iostream>
#include <boost/iostreams/filtering_streambuf.hpp>
#include <boost/iostreams/copy.hpp>
#include <boost/iostreams/filter/zlib.hpp>

int main() 
{
    using namespace std;

    ifstream file("hello.z", ios_base::in | ios_base::binary);
    filtering_streambuf<input> in;
    in.push(zlib_decompressor());
    in.push(file);
    boost::iostreams::copy(in, cout);
} 
```

我想知道如何链接预先构建的 zlib 外部库？它给了我这个编译问题：

```
mpic++ -o local ods_v2.0.cpp -I/opt/local/include
Undefined symbols for architecture x86_64:
  "boost::iostreams::zlib_error::check(int)", referenced from:
      long boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::write<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >(boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> >&, char const*, long) in ods_v2-DjDcji.o
      void boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::close<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >(boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> >&, std::_Ios_Openmode) in ods_v2-DjDcji.o
      void boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::close<boost::iostreams::non_blocking_adapter<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > > >(boost::iostreams::non_blocking_adapter<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >&, std::_Ios_Openmode) in ods_v2-DjDcji.o
      long boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::read<boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::peekable_source<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > > >(boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::peekable_source<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >&, char*, long) in ods_v2-DjDcji.o
      void boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::close<boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::peekable_source<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > > >(boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::peekable_source<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >&, std::_Ios_Openmode) in ods_v2-DjDcji.o
  "boost::iostreams::zlib::stream_end", referenced from:
      long boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::write<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >(boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> >&, char const*, long) in ods_v2-DjDcji.o
      void boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::close<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >(boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> >&, std::_Ios_Openmode) in ods_v2-DjDcji.o
      void boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::close<boost::iostreams::non_blocking_adapter<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > > >(boost::iostreams::non_blocking_adapter<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >&, std::_Ios_Openmode) in ods_v2-DjDcji.o
      long boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::read<boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::peekable_source<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > > >(boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::peekable_source<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >&, char*, long) in ods_v2-DjDcji.o
      void boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::close<boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::peekable_source<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > > >(boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::peekable_source<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >&, std::_Ios_Openmode) in ods_v2-DjDcji.o
  "boost::iostreams::zlib::sync_flush", referenced from:
      long boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::write<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >(boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> >&, char const*, long) in ods_v2-DjDcji.o
      void boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::close<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >(boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> >&, std::_Ios_Openmode) in ods_v2-DjDcji.o
      void boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::close<boost::iostreams::non_blocking_adapter<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > > >(boost::iostreams::non_blocking_adapter<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >&, std::_Ios_Openmode) in ods_v2-DjDcji.o
      long boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::read<boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::peekable_source<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > > >(boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::peekable_source<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >&, char*, long) in ods_v2-DjDcji.o
      void boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::close<boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::peekable_source<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > > >(boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::peekable_source<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >&, std::_Ios_Openmode) in ods_v2-DjDcji.o
  "boost::iostreams::zlib::default_strategy", referenced from:
      boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::make_params(int) in ods_v2-DjDcji.o
  "boost::iostreams::zlib::default_compression", referenced from:
      boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::make_params(int) in ods_v2-DjDcji.o
  "boost::iostreams::zlib::okay", referenced from:
      long boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::write<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >(boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> >&, char const*, long) in ods_v2-DjDcji.o
      void boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::close<boost::iostreams::non_blocking_adapter<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > > >(boost::iostreams::non_blocking_adapter<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >&, std::_Ios_Openmode) in ods_v2-DjDcji.o
      long boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::read<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >(boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> >&, char*, long) in ods_v2-DjDcji.o
  "boost::iostreams::zlib::deflated", referenced from:
      boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::make_params(int) in ods_v2-DjDcji.o
  "boost::iostreams::detail::gzip_footer::reset()", referenced from:
      long boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::write<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >(boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> >&, char const*, long) in ods_v2-DjDcji.o
      long boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::read<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >(boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> >&, char*, long) in ods_v2-DjDcji.o
      boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::basic_gzip_decompressor(int, int) in ods_v2-DjDcji.o
  "boost::iostreams::detail::gzip_footer::process(char)", referenced from:
      long boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::write<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >(boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> >&, char const*, long) in ods_v2-DjDcji.o
      long boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::read<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >(boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> >&, char*, long) in ods_v2-DjDcji.o
  "boost::iostreams::detail::gzip_header::reset()", referenced from:
      long boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::write<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >(boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> >&, char const*, long) in ods_v2-DjDcji.o
      long boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::read<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >(boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> >&, char*, long) in ods_v2-DjDcji.o
      boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::basic_gzip_decompressor(int, int) in ods_v2-DjDcji.o
  "boost::iostreams::detail::gzip_header::process(char)", referenced from:
      long boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::write<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >(boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> >&, char const*, long) in ods_v2-DjDcji.o
      long boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::read<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >(boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> >&, char*, long) in ods_v2-DjDcji.o
  "boost::iostreams::detail::zlib_base::after(char const*&, char*&, bool)", referenced from:
      long boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::write<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >(boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> >&, char const*, long) in ods_v2-DjDcji.o
      void boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::close<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >(boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> >&, std::_Ios_Openmode) in ods_v2-DjDcji.o
      void boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::close<boost::iostreams::non_blocking_adapter<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > > >(boost::iostreams::non_blocking_adapter<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >&, std::_Ios_Openmode) in ods_v2-DjDcji.o
      long boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::read<boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::peekable_source<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > > >(boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::peekable_source<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >&, char*, long) in ods_v2-DjDcji.o
      void boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::close<boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::peekable_source<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > > >(boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::peekable_source<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >&, std::_Ios_Openmode) in ods_v2-DjDcji.o
  "boost::iostreams::detail::zlib_base::reset(bool, bool)", referenced from:
      boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::close_impl() in ods_v2-DjDcji.o
      boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::impl::impl<boost::iostreams::zlib_params>(int, boost::iostreams::zlib_params const&) in ods_v2-DjDcji.o
      boost::detail::shared_count::shared_count<boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::impl>(boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::impl*) in ods_v2-DjDcji.o
      boost::detail::sp_counted_impl_p<boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::impl>::dispose() in ods_v2-DjDcji.o
  "boost::iostreams::detail::zlib_base::before(char const*&, char const*, char*&, char*)", referenced from:
      long boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::write<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >(boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> >&, char const*, long) in ods_v2-DjDcji.o
      void boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::close<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >(boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> >&, std::_Ios_Openmode) in ods_v2-DjDcji.o
      void boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::close<boost::iostreams::non_blocking_adapter<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > > >(boost::iostreams::non_blocking_adapter<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >&, std::_Ios_Openmode) in ods_v2-DjDcji.o
      long boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::read<boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::peekable_source<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > > >(boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::peekable_source<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >&, char*, long) in ods_v2-DjDcji.o
      void boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::close<boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::peekable_source<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > > >(boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::peekable_source<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >&, std::_Ios_Openmode) in ods_v2-DjDcji.o
  "boost::iostreams::detail::zlib_base::do_init(boost::iostreams::zlib_params const&, bool, void* (*)(void*, unsigned int, unsigned int), void (*)(void*, void*), void*)", referenced from:
      boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::impl::impl<boost::iostreams::zlib_params>(int, boost::iostreams::zlib_params const&) in ods_v2-DjDcji.o
  "boost::iostreams::detail::zlib_base::xinflate(int)", referenced from:
      long boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::write<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >(boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> >&, char const*, long) in ods_v2-DjDcji.o
      void boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::close<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >(boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> >&, std::_Ios_Openmode) in ods_v2-DjDcji.o
      void boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::close<boost::iostreams::non_blocking_adapter<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > > >(boost::iostreams::non_blocking_adapter<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >&, std::_Ios_Openmode) in ods_v2-DjDcji.o
      long boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::read<boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::peekable_source<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > > >(boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::peekable_source<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >&, char*, long) in ods_v2-DjDcji.o
      void boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::close<boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::peekable_source<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > > >(boost::iostreams::basic_gzip_decompressor<std::allocator<char> >::peekable_source<boost::iostreams::detail::linked_streambuf<char, std::char_traits<char> > >&, std::_Ios_Openmode) in ods_v2-DjDcji.o
  "boost::iostreams::detail::zlib_base::zlib_base()", referenced from:
      boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::impl::impl<boost::iostreams::zlib_params>(int, boost::iostreams::zlib_params const&) in ods_v2-DjDcji.o
  "boost::iostreams::detail::zlib_base::~zlib_base()", referenced from:
      boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::impl::impl<boost::iostreams::zlib_params>(int, boost::iostreams::zlib_params const&) in ods_v2-DjDcji.o
      boost::detail::shared_count::shared_count<boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::impl>(boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::impl*) in ods_v2-DjDcji.o
      boost::detail::sp_counted_impl_p<boost::iostreams::symmetric_filter<boost::iostreams::detail::zlib_decompressor_impl<std::allocator<char> >, std::allocator<char> >::impl>::dispose() in ods_v2-DjDcji.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [local] Error 1 
```

以及如何在 unix 集群上构建和链接 boost 和 zlib 库？谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-01T20:46:40.147

您没有编译器问题；你有一个链接问题。

添加`-lboost_iostreams`到命令行。您可能需要`-L/opt/lib`指定路径。这应该会给您另一个链接器错误，寻找`zlib`. 然后添加`-lz`.

最后一行看起来像

```
mpic++ -o local ods_v2.0.cpp -I/opt/local/include -L/opt/lib -lboost_iostreams -lz 
```

# filter - 如何在水晶报表的过滤报表中创建非过滤摘要

> ID：15751542
> 
> 赞同：0
> 
> 时间：2013-04-01T20:44:32.093
> 
> 标签：filter, crystal-reports

对 CR 来说很新

我有一个按参数过滤的分组调查报告，因此（当然）报告中的所有摘要都按参数过滤。

我需要一个未由参数过滤的组（问题）的“平均”摘要。

不知道该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:06:52.317

有很多选项可以解决这个问题，但是如果您使用 SQL 表达式（基本上是子查询）来获得未过滤的平均值，则需要对报告进行最少更改的选项。

假设您正在对报告进行分组`{table.group}`并查找 的平均值`{table.number}`。您可以创建如下表达式：

```
case when "table"."group" is null then null
else (select average(number)
      from table
      where group="table"."group")
end 
```

请注意，双引号字段引用回主查询，因此您有效地将每个组的平均值关联回主报告中的每一行，然后可以在组页脚或组页眉中使用。

# php - CakePHP：“GET”表单在提交后不会自动填充表单字段

> ID：15751544
> 
> 赞同：4
> 
> 时间：2013-04-01T20:44:31.513
> 
> 标签：php, forms, cakephp, query-string, cakephp-2.3

我正在使用蛋糕 2.3.0。如果我使用 提交我的表单`POST`，则选择的表单字段会继续，但是如果我使用 提交我的表单`GET`，所有表单字段都会返回到它们的默认值。

有没有办法让`GET`提交像这样工作`POST`？

这是我的控制器：

```
class ListingsController extends AppController {
    public function results() {
        $conditions = array(
            'Listing.Beds >=' => $this->request->query['beds'], 
            'Listing.ListingStatus >=' => $this->request->query['status'], 
        );

        $this->paginate = array(
            'conditions' => $conditions,
        );    

        $this->set('listings', $this->paginate());
    }
} 
```

这是我的观点。

```
echo $this->Form->create(null, array(
    'controller' => 'listings', 
    'action' => 'results',
    'type' => 'get'
));

echo $this->Form->input('name');

$beds = array('1' => '1+', '2' => '2+', '3' => '3+', '4' => '4+', '5' => '5+');
echo $this->Form->input('beds', array('options' => $beds));

$status = array('Active' => 'Active', 'Pending' => 'Pending', 'ActivePending' => 'Active and Pending');
echo $this->Form->input('status', array('options' => $status));

echo $this->Form->end('Update'); 
```

所以基本上如果我改变`'type' => 'get'`它就`'type' => 'post'`可以了。但我需要能够通过`GET`.

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T22:18:59.567

我同意这很烦人（IMO CakePHP 应该足够聪明，可以根据“类型”自动确定从“哪里”获取数据）。

您必须将请求的“查询”复制到请求的“数据”；

```
$this->request->data = $this->request->query; 
```

不在我的电脑后面测试它（像往常一样，哈哈），但应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-09T14:38:50.070

我的解决方案：

```
$this->params->data = array('Tablefilter' => $this->params->query); 
```

其中“Tablefilter”取决于表单定义（通常是模型名称）

```
$this->Form->create('Tablefilter', array('type' => 'get')) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T21:17:18.377

尝试将此添加到您的控制器：

```
$this->request->data = $this->params['url']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T21:47:21.217

使用[PRG](http://en.wikipedia.org/wiki/Post/Redirect/Get)。签出[这个](https://github.com/CakeDC/search)插件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T13:45:27.190

我最终做的是遍历`$this->request->query`数组并将这些值传递给匹配的`$this->request->data`.

所以我添加了这个：

```
foreach($this->request->query as $k => $v){
    $this->request->data['Listing'][$k] = $this->request->query[$k];
} 
```

这最终给了我这个：

```
class ListingsController extends AppController {
    public function results() {

        foreach($this->request->query as $k => $v){
            $this->request->data['Listing'][$k] = $this->request->query[$k];
        }

        $conditions = array(
            'Listing.Beds >=' => $this->request->query['beds'], 
            'Listing.ListingStatus >=' => $this->request->query['status'], 
        );

        $this->paginate = array(
            'conditions' => $conditions,
        );    

        $this->set('listings', $this->paginate());
    }
} 
```

我不会接受这个作为答案，因为我不知道这是否是最佳或建议的方法。但它现在对我有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-09T07:05:39.603

这对我有用：

$this->request->data['Cluster'] = $this->params->query ; //控制器端

表格定义：

$this->Form->create('Cluster',array('type'=>'get'));

# postgresql - 如何从 postgres sql 中的 inet 值中提取八位字节？

> ID：15751554
> 
> 赞同：4
> 
> 时间：2013-04-01T20:45:02.500
> 
> 标签：postgresql, ipv4, inet

我想将 inet 格式的 IPv4 地址转换为整数组件。

例如，将 '101.255.30.40' 变成 oct1=101, oct2=255, oct3=30, oct4=40。

如果我将 inet 转换为 varchar，则应该使用正则表达式来执行此操作，但这似乎不优雅。是否有用于返回 inet 的第 n 个八位字节的 1 行函数？

```
select inet_to_octet('101.255.30.40', 4) as temp;  -- returns temp=40? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T21:53:04.140

除非您想尝试将函数贡献给 inet 数据类型，否则您需要依赖基于字符串的版本。也许将这样的东西（但有一些错误检查）放入 SQL 函数中以便于访问？：

```
CREATE OR REPLACE FUNCTION extract_octet(inet, integer) RETURNS integer AS $$
    SELECT ((regexp_split_to_array(host($1), E'\\.'))[$2])::int;
$$ LANGUAGE SQL;

select extract_octet(inet '192.26.22.2', 2)

Output: 26 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-24T19:09:36.517

终于从同事那里得到了很好的答案...

对于某些风格的 sql，使用“split_part”和 host(inet) 来获取文本字段。

```
select split_part(host('101.255.30.40'::inet), '.', 1);
select split_part(host('101.255.30.40'::inet), '.', 2);
select split_part(host('101.255.30.40'::inet), '.', 3);
select split_part(host('101.255.30.40'::inet), '.', 4); 
```

结果是

```
101
255
30
40 
```

如果您想更复杂地处理 IPv6，请使用掩码来加速操作以及使用 case 语句来获取 IP 版本：

```
select
   (case
      when family('101.255.30.40'::inet) = 4 then split_part(host(broadcast(set_masklen('101.255.30.40'::inet, 32))), '.', 4)::varchar
      when family('101.255.30.40'::inet) = 6 then split_part(host(broadcast(set_masklen('101.255.30.40'::inet, 64))), ':', 4)::varchar
      else null end)::varchar as octet4;

select
   (case
      when family('2604:8f00:4:80b0:3925:c69c:458:3f7b'::inet) = 4 then split_part(host(broadcast(set_masklen('2604:8f00:4:80b0:3925:c69c:458:3f7b'::inet, 32))), '.', 4)::varchar
      when family('2604:8f00:4:80b0:3925:c69c:458:3f7b'::inet) = 6 then split_part(host(broadcast(set_masklen('2604:8f00:4:80b0:3925:c69c:458:3f7b'::inet, 64))), ':', 4)::varchar
      else null end)::varchar as octet4; 
```

结果是

```
40
80b0 
```

如果您想将 IPv6 转换为数字，则可以在 case 语句中添加十六进制到整数的转换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T21:49:29.597

下面是几个用于 IPv4 地址的单独八位字节的单行代码：

```
SELECT substring(host('1.2.3.4'::inet) FROM '^([0-9]+)\.[0-9]+\.[0-9]+\.[0-9]+$'); 
```

将返回`1`

```
SELECT substring(host('1.2.3.4'::inet) FROM '^[0-9]+\.([0-9]+)\.[0-9]+\.[0-9]+$'); 
```

将返回`2`

```
SELECT substring(host('1.2.3.4'::inet) FROM '^[0-9]+\.[0-9]+\.([0-9]+)\.[0-9]+$'); 
```

将返回`3`

```
SELECT substring(host('1.2.3.4'::inet) FROM '^[0-9]+\.[0-9]+\.[0-9]+\.([0-9]+)$'); 
```

将返回`4`

# multithreading - MVC 和 WCF 服务中的长时间操作

> ID：15751556
> 
> 赞同：0
> 
> 时间：2013-04-01T20:45:10.163
> 
> 标签：multithreading, wcf, model-view-controller, architecture

我有一个 MVC 应用程序，它使用 WCF 服务作为数据库的连接层。WCF 上的某些操作非常耗时。那么，这个问题的最佳解决方案是什么？我应该在我的 MVC 应用程序和 WCF 中的 Task.Factory.StartNew 中使用异步控制器吗？或者我应该在 MVC 中使用简单的控制器和 AJAX，在 WCF 中使用 Task.Factory.StartNew？还是在 MVC 中使用 Task.Factory.StartNew 更好？还是在 WCF 中使用简单线程更好？

已编辑：例如，我的服务会生成报告 - 这需要很长时间。我希望用户能够开始生成报告，而不是等到它完成 - 例如显示“正在生成”。然后他可以开始生成另一个报告，等等。报告生成完成后 - 将其返回给用户。

请在此类解决方案中提供最佳实践或向我展示正确的方向，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:35:47.810

正如 Tim Rogers 在评论中指出的那样，可以通过多种方式设计这种需求。从您以报告为中心的用例来看，我可能会通过以下方式进行操作：

1.  启动生成报告的 WCF 方法（将启动工作线程并返回某种进程/报告 ID）
2.  用于检查操作状态的 WCF 方法（基于操作/报告 id）
3.  常规控制器，它将从第 1 点调用该方法并允许查询特定用户正在进行的作业的状态
4.  查看显示历史和正在进行的作业列表及其状态（我可能会实施 AJAX 请求以刷新状态以获得良好的用户体验）

当然这只是粗略的描述。而第 3 点和第 4 点很简单直接，第 1 点和第 2 点可以通过多种方式实现。您可以通过使用任务持久性（在内存或基于数据库中）实现自己的线程策略来解决此问题，您可以尝试使用 WCF 工作流服务等。希望这会有所帮助。

# node.js - 测试包含异步调用的函数

> ID：15751561
> 
> 赞同：0
> 
> 时间：2013-04-01T20:45:29.937
> 
> 标签：node.js, asynchronous, express, mocha.js, sequelize.js

我正在尝试测试 get 函数：

```
exports.get = function(req, res) {
  Subscriptions
    .find(req.params.id)
    .success(function(subscription) {
      if (subscription) {
        res.json({message: "Success"}, 200);
      } else {
        res.json({message: "Not found"}, 404);
      }
    })
    .error(function(error) {
        res.json({message: "Internal server error"}, 500);
    });
}; 
```

具体来说，我并不关心它是否命中数据库，我只想测试发生成功和错误事件的场景。我使用 sequelize.js 作为我的 orm 来处理数据库。我已经启动并运行了一个测试，但它有点讨厌，超时。有没有更好的方法来做到这一点？这是我到目前为止写的测试：

```
var express = require('express')
  , sinon = require('sinon')
  , subscription = require('app/controllers/subscriptions')
  , Subscriptions = require('app/models/subscriptions')
  ;

describe('subscription controller', function() {
  beforeEach(function() {
    this.mockResponse = sinon.mock(express.response);
  });

  afterEach(function() {
    this.mockResponse.restore();
  });

  describe('GET /subscriptions/:id', function() {
    it('should return a json response', function(done) {
      var request = {
        params: {
          id: 'identifier'
        }
      };

      var expectedResponse = {
        subscriptions_uri : "/subscription/identifier"
      };

      this.mockResponse
        .expects('json')
        .once()
        .withArgs(expectedResponse);

      subscription.get(request, express.response);
      setTimeout(function() {
        done();
      }, 500);
    });
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:44:49.077

我决定使用 supertest 库，这使得测试我的控制器变得异常容易：

```
var express = require('express')
  , subscription = require('app/controllers/subscriptions')
  , request = require('supertest')
  , app = express()
  ;

describe('subscription controller', function() {
  describe('GET /subscriptions/:id', function() {
    it('should return a json response', function(done) {
      var expectedBody = {
        subscriptions_uri : "/subscription/identifier"
      };

      request(app)
        .get('/subscriptions/identifier')
        .set('Accept', 'application/json')
        .expect('Content-Type', /json/)
        .expect(expectedBody)
        .expect(200, done);
    });
  });
}); 
```

# javascript - 在 Chart.js 中将 Y 轴值从实数更改为整数

> ID：15751571
> 
> 赞同：71
> 
> 时间：2013-04-01T20:46:15.300
> 
> 标签：javascript, html, charts, chart.js

我有一个图表，我想使用[Chart.js](http://www.chartjs.org/)将其包含在我的网站中。在 Y 轴上，它给了我实数而不是整数。如何将数字更改为整数？

这是我现在拥有的图片：

[![当前图表与实数](https://i.stack.imgur.com/F9nUW.png)](https://i.stack.imgur.com/F9nUW.png)

这是代码：

```
var lineChartData = {

    labels : ["2013/04/01","2013/03/31", "2013/03/30", "2013/03/29", "2013/03/28","2013/03/27", "2013/03/26"],

    datasets : [
        {
            fillColor : "rgba(151,187,205,0.5)",
            strokeColor : "rgba(151,187,205,1)",
            pointColor : "rgba(151,187,205,1)",
            pointStrokeColor : "#fff",
            data : ["0", "2","1", "0", "1","0","1"]
        }
    ]

}

var myLine = new Chart(document.getElementById("canvas").getContext("2d")).Bar(lineChartData); 
```

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2016-08-14T18:57:50.837

我在新版本中是这样处理的：

```
new Chart(ctx, {
  type: 'bar',
  data: chartData,
  options: {
    scales: {
      yAxes: [{
        ticks: {
          beginAtZero: true,
          callback: function(value) {if (value % 1 === 0) {return value;}}
        }
      }]
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2016-06-19T10:32:52.057

**使用Chart.js**的新版本 2 时，我无法获得适合我的现有答案，因此这是我发现在 V2 中解决此问题的方法：

```
new Chart(ctx, {type: 'bar', data: barChartData,
  options:{ 
    scales: {
      yAxes: [{
        ticks: {
          stepSize: 1
        }
      }]
    }
  }
}); 
```

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2013-05-12T15:04:20.777

试试这个，其中 max 是数据的最高值。

```
var steps = 3;
new Chart(ctx).Bar(plotData, {
    scaleOverride: true,
    scaleSteps: steps,
    scaleStepWidth: Math.ceil(max / steps),
    scaleStartValue: 0
}); 
```

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2019-12-06T23:37:01.780

我知道这是一个老问题，但在当前版本（v2.9.3）中，您只需将 y 轴刻度的精度设置为零即可获得整数：

```
options: {  
    scales: {
        yAxes: [{
            ticks: {
                precision: 0
            }
        }]
    }
} 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-03-04T18:39:24.783

检查[Chart.js](http://www.chartjs.org/docs/#getting-started-global-chart-configuration)文档，在全局配置部分：

> // Boolean - 刻度是否应该坚持整数，即使有绘图空间也不浮动 **scaleIntegersOnly: true,**

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-09-15T09:53:04.943

如果你想从一个不同于零的数字开始，你必须考虑到这一点：

```
var step  = 5;
var max   = 90
var start = 40;
new Chart(income).Bar(barData, {
    scaleOverride: true,
    scaleSteps: Math.ceil((max-start)/step),
    scaleStepWidth: step,
    scaleStartValue: start
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-23T15:16:56.403

正如上面提到的 Ben Bloodworth 所说，更简单的方法是添加选项（精度：0）。

目前在 3.7.1 版本中运行良好

```
 options: {
            scales: {
                y: {
                    ticks: {
                        precision: 0
                    }
                }
            }
        } 
```

# jquery - jQuery hasData 作为一个链？

> ID：15751579
> 
> 赞同：0
> 
> 时间：2013-04-01T20:46:47.697
> 
> 标签：jquery

是否可以检查 hasData 是否存在于链中？

例如：

```
<div data-foo="yes">Foo</div>

$("div").hasData("foo").css("color","red"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:48:58.030

jQuery 方法链仍然遵循 JS 的规则。由于`hasData`返回一个布尔值，而布尔值没有 jQuery 方法，这不起作用。

最简单的方法是修改您的选择器，以便已经过滤了原始集合：

```
$("div[data-foo]") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T20:49:19.367

尝试`.filter`改用：

```
$("div").filter(function(){
    return $(this).data("foo");
}).css("color","red"); 
```

甚至只是一个属性选择器：

```
$("div[data-foo]").css("color","red"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T20:58:20.920

```
(function ($) {
    $.fn.hasData = function (data) {
        if (this.data(data)) return this;
        else return null;
    };
})(jQuery); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T20:50:13.253

# [演示](http://jsfiddle.net/mohammadAdil/xrDf9/2/)

```
$("div[data-foo=yes]").css("color","red"); 
```

# git - Git 等同于 TFS 变更集

> ID：15751583
> 
> 赞同：0
> 
> 时间：2013-04-01T20:46:58.493
> 
> 标签：git, tfs

我不是 Git 专家，因此这个问题对某些人来说可能看起来很基础——抱歉。

我正在寻找与 Git 中的变更集功能等效的功能。我看到的最接近的是 STASH。

问题是，存储有几个我不太喜欢的“功能”

*   它们以堆栈方式存储（也就是说，当您弹出最后一项时，它被删除了，这可以避免吗？），
*   当您创建存储时，它会恢复您的本地更改（有没有办法避免这种情况？）

我正在寻找一种方法让一个开发人员告诉另一个开发人员“这是我的本地更改，您可以对它们进行代码审查吗？顺便说一句，您可以在您这边构建我的更改以确保我没有丢失任何文件吗？ "

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:48:18.933

我想你只是在寻找[分支](http://git-scm.com/book/en/Git-Branching)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:56:00.703

要从存储中应用更改而不实际将其从存储中删除（即`pop`应用更改后执行的操作），您可以使用`git stash apply`：

> 应用 [--index] [-q|--quiet] []
> 
> 与 pop 类似，但不要从存储列表中删除状态。与 pop 不同，可能是任何看起来像由 stash save 或 stash create 创建的提交。

`git stash save`在创建存储后运行`git reset --hard`，以将工作树状态恢复到上次提交的状态。没有`git stash`办法避免这种情况。

您可以`git stash apply`再次运行并继续处理更改，或者使用主题或功能分支来跟踪您的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T20:58:38.463

[Gerrit](http://code.google.com/p/gerrit/) provides such a functionality, and it is called Patchset. Take a look at the [default workflow](http://source.android.com/source/life-of-a-patch.html) of Gerrit.

# three.js - WebGLRenderer 锯齿状图像

> ID：15751587
> 
> 赞同：0
> 
> 时间：2013-04-01T20:47:04.633
> 
> 标签：three.js, webgl

当我用这个例子[http://www.luizgadao.com.br/site/](http://www.luizgadao.com.br/site/)移动相机时，所有图像都是锯齿状的。如果 o 渲染器是“CanvasRenderer”，则它不起作用。谁知道怎么修它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:31:13.913

这是一个限制`CanvasRenderer`。没有解决办法。

但是，对于这样的网站，也许您可​​以使用`CSS3DRenderer`： http: [//mrdoob.github.com/three.js/examples/css3d_youtube.html](http://mrdoob.github.com/three.js/examples/css3d_youtube.html)

# javascript - 使用经典继承构造代理对象的 JavaScript 模式

> ID：15751589
> 
> 赞同：4
> 
> 时间：2013-04-01T20:47:07.890
> 
> 标签：javascript, oop, proxy, prototype, ecmascript-harmony

虽然尚未最终确定，但我正在尝试使用 ES6 代理。我的目标是拥有一个构造函数（一个利用如下所示的经典继承的函数）来创建具有继承链的代理对象。

```
function inherit(child, parent){ //a classical inheritance pattern
  var F = function(){};
  F.prototype = parent.prototype; 
  child.prototype = new F(); 
  child.parent = parent.prototype; 
  child.prototype.constructor = child;
  return child;
} 
```

以下看起来合理吗？我创建一个项目并从构造函数返回代理。任何将返回对实例的引用（出于链接目的）的方法都必须返回对代理的引用，否则在链接时我们会丢失代理。

```
function Item(attrs){
  this.attrs = attrs;
  var proto = this.constructor.prototype;
  return this.proxy = Proxy.create(new MyHandler(this), proto);
}
Item.prototype.setStatus = function(status){
  //do work
  return this.proxy; //we do this everywhere instead of a simple 'this'?
}
function DVD(attrs){
   attrs.type = 'DVD';
   return Item.call(this, attrs);
}

inherit(DVD, Item);

var negotiator = new DVD({title: 'The Negotiator'}); //returns proxy 
```

目标是构造可能是经典继承链产物的代理对象（通过'new'关键字）。

下一期。考虑一下如果我用 Backbone.Events 扩展我的 Item 原型会发生什么。那些导入的方法将返回`this`而不是`this.proxy`. 为了解决这个问题，我必须包装所有返回的导入方法`this`以便返回`proxy`。这似乎很痛苦且容易出错。使用 Proxy 抽象涉及大量布线，这对我来说似乎不太正确。

虽然我喜欢代理概念，但我关心它的实用性。也许我错过了一些更好的实践来实现我的目标？

编辑：

这个例子过于简单，因此无法描述我为什么需要它。

最终，我使用代理的目标是允许多重继承。我希望能够将多个行为（模块）混合到给定的代理对象中。我还希望能够简单地随心所欲地分解行为。

通过使用代理，我可以让 Proxy 对象管理对方法的访问，并根据需要将信息传递给 mixins。基本上，这允许改进面向方面的编程。对于一个方面，我通常会包装和替换一个函数。有时，给定的方法会被多个方面包装和重新包装。AOP 的问题在于，一旦您以这种方式修改了一个对象，就很难仅删除一个方面，因为该方面可能已被重新包装所掩埋。

代理不会遇到这个问题。你的 mixin 可以改为放在一个数组中。代理处理对这些 mixin 中的方法的分派（甚至是多个方法，因此是多重继承）。然后，取消混合行为就像从该数组中删除一个 mixin 一样简单。

代理的问题在于，虽然方法返回对对象本身的引用是一种常见做法（出于链接目的），但您并不真正希望任何原始方法返回对该对象的引用（因此绕过代理），您希望返回代理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T14:17:25.977

您使用代理创建 mixin 的目标是一个不错的主意（请参阅此[博客](http://blog.avd.io/posts/multiple-inheritance)文章）。但是，您指出的问题是您的主要问题，实际上根本不是问题。这段代码例如：

```
var o, p;

function Obj() {  }
Obj.prototype.whoAmI = function() {
    console.log("I am the "+ (this == o ? "object" : "proxy"));    
    return this;
};

o = new Obj(); 
var p = new Proxy(o, {});

o.whoAmI().whoAmI();
p.whoAmI().whoAmI(); 
```

将输出：

```
I am the object
I am the object
I am the proxy
I am the proxy 
```

如您所见，`this`在目标对象中使用的关键字实际上是代理。因此，如果目标对象返回`this`，它实际上会返回代理。正是你想要的。

如果您想绝对确定返回代理对象，您可以像这样包装您的代理方法：

```
var o, p;

function Obj() {  }
Obj.prototype.whoAmI = function() {
    console.log("I am the "+ (this == o ? "object" : "proxy"));    
    return o; // bit of a code smell here
};

o = new Obj(); 
var p = new Proxy(o, {
    get: function(target, name) {
        return function() {
            var rtnVal = target[name].call(this);
            return rtnVal == target ? this : rtnVal;
        }
    }
});

p.whoAmI().whoAmI(); 
```

这将输出：

```
I am the proxy
I am the proxy 
```

这确保返回的对象永远不是展开的对象。

这一切当然不是很利于你的方法调用的性能。[相反，我会建议对 javascript mixins](http://javascriptweblog.wordpress.com/2011/05/31/a-fresh-look-at-javascript-mixins/)采用更传统的方法。据我所知，动态打开和关闭 mixins 的用例并不多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T10:44:58.403

但是，如果您只想创建像 $.proxy 这样的代理函数，但不想使用 jQuery，您可以这样做：

```
var context = this;
something.addSomeListener( function(){ context.myListener.apply( context, arguments ); } ); 
```

# json - 如何使用 Kendo 在一行中显示多个图像？

> ID：15751595
> 
> 赞同：0
> 
> 时间：2013-04-01T20:47:16.320
> 
> 标签：json, kendo-ui

我是剑道ui的新手。我有一个类似[http://demos.kendoui.c​​om/sushi/](http://demos.kendoui.com/sushi/)的购物车系统。我想通过创建图像数组在一行中显示多个图像。这个地址的这个演示站点的代码。 [https://github.com/telerik/kendo-mobile-sushi](https://github.com/telerik/kendo-mobile-sushi)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T22:39:23.453

如果您已修改`menu.js`并且条目如下所示：

```
{
    "id"         : 1,
    "name"       : "Sashimi salad",
    "price"      : 12.00,
    "image"      : "sashimi-salad.jpg",
    "category"   : "Cold starters",
    "description": "Organic greens topped with market fresh sashimi, wasabi soy vinaigrette.",
    "featured"   : true
},
{
    "id"         : 2,
    "name"       : "Chirashi sushi",
    "price"      : 21.00,
    "image"      : [ "chirashi-sushi.jpg", "chirashi-sushi.jpg", "chirashi-sushi.jpg"],
    "category"   : "Cold starters",
    "description": "Sushi bar variety with sushi rice.",
    "featured"   : false
}, 
```

您有条目的地方`Sashimi salad`只有一个图像定义为 a`string`和条目的`Chirashi sushi`地方有多个图像定义在一个`array`.

然后，您应该修改您的模板以检查是否`image`为 a `string`，如果不是，则迭代数组元素。就像是：

```
<script id="menuTemplate" type="text/x-kendo-template">
    <a data-role="button"
       data-click="addToCartFromList"
       data-item-id="#:id#"
       href="\\#">#:kendo.toString(price, "c")#</a>
    <a class="details-link" data-role="listview-link" href="\#details?id=#:id#">
        # if (typeof image === 'string') { #
        <img src="content/images/75/#= image #"/>
        # } else { #
        #     for (var i = 0; i < image.length; i ++) { #
        <img src="content/images/75/#= image[i] #"/>
        #     } #
        # } #
        <h2>#:name#</h2>
        <span class="added"#= cartDataSource.get(id) ? "" : 'style="display: none"' #>Item added to cart</span>
    </a>
</script> 
```

# asp.net-mvc-3 - 我如何使用这个 linq 查询在 MVC 视图中显示数据

> ID：15751597
> 
> 赞同：0
> 
> 时间：2013-04-01T20:47:26.420
> 
> 标签：asp.net-mvc-3, razor

如何在cshtml中显示键和计数数据

这是类：

```
 public class ViewModelData
       {
         public int Key { get; set; }
         public int Count { get; set; }
       } 
```

这是控制器：

```
 public ActionResult Trigger()
       {
        var result = repository.Paths.GroupBy(x => x.SmokeCar)
                                    .Select(x => new ViewModelData
                                    {
                                        Key = x.Key,
                                        Count = x.Count()
                                    }).ToList();

        return View(result);
         } 
```

这是cshtml

```
 @model IEnumerable CessationPath.Domain.Entities.ViewModelData
          <div>
        <span>Count:</span>
          </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:51:00.633

循环遍历传递的集合并打印它。

```
@model IEnumerable<CessationPath.Domain.Entities.ViewModelData>
@foreach(var item in Model)
{
    <div>
        @item.Key.ToString()
        <span> Count: @item.Count.ToString()</span>
    </div>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:51:50.823

要显示记录计数：

```
@model IEnumerable<CessationPath.Domain.Entities.ViewModelData>
<div>
    <span>Count:</span> @Model.Count()
</div> 
```

然后显示每条记录的内容：

```
<ul>
@foreach (var item in Model) {
    <li>@item.Key, @item.Count</li>
}
</ul> 
```

# java - 制作jar文件时包含什么？

> ID：15751600
> 
> 赞同：3
> 
> 时间：2013-04-01T20:47:38.383
> 
> 标签：java, netbeans, jar

当我构建我的项目（使用 Netbeans IDE）时，它将只采用主类，还是包含项目中的其他类，即使它们没有在主类的代码中明确声明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:56:41.067

一个包中的所有类都包含在一个 jar 文件中。您可以按照以下步骤进行交叉检查：

转到项目的**dist 文件夹**。

**使用任何文件归档器（ ）**提取 jar**`eg: 7-zip, winrar, winzip`文件。**

 ****提取**的文件夹包含 jar 文件中包含的所有内容。

例子：

**测试**是**主要**课程

**测试.java**：

```
package test;
public class Test 
{

    public static void main(String[] args) {
        // TODO code application logic here
    }
} 
```

还有一个类：**class1**

**类1.java**：

```
package test;
public class class1 
{

} 
```

class1.java 没有在主类（Test）的代码中明确声明。但是当我在 Net-beans IDE 中构建这个项目并提取 jar 文件（Test.jar）时。jar 包含：

1.  `class1.class`
2.  `Test.class`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:59:23.977

JAR 中的内容和剩余的内容取决于打包代理，因此这绝对依赖于 IDE，并且还取决于用于构建存档的配置选项（例如，如果它是 lib JAR，如果它是可执行 JAR，如果是 WAR，等等）。

例如，Eclipse 可以将您编译的源代码与 JAR 依赖项一起打包，但这也需要包含一些特殊的类来从分布式 JAR 中的 JAR 加载类。

无论如何，您始终可以自定义打包阶段，并且可以提取存档以查看其实际包含的内容。**

# c# - 单元测试构造函数注入

> ID：15751602
> 
> 赞同：9
> 
> 时间：2013-04-01T20:47:43.140
> 
> 标签：c#, unit-testing, dependency-injection, constructor, constructor-injection

假设我的`Foo`班级有以下内容：

```
readonly IService service;

public Foo(IService service) 
{
    if (service == null)
        throw new ArgumentNullException("service");

    this.service = service;
}

public void Start()
{
    service.DoStuff();
} 
```

到目前为止，我对构造函数进行了一个单元测试，我在其中传入 null 以验证是否`ArgumentNullException`抛出了一个。我是否需要对我的构造函数进行第二次单元测试，在其中我传入一个有效`IService`并验证该`this.service`设置（这将需要一个公共访问器）？

或者我应该只依靠我的单元测试`Start`来测试这个代码路径的方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-01T20:49:03.343

设置`this.service`是一个实现细节，因此您应该只测试它是否在预期的地方使用，并通过该`Start`方法进行测试。以免你的测试变得脆弱。

您只想测试您的服务是否被正确使用。你不应该关心它是如何存储的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-01T21:30:30.537

这些测试是多余的，因为当您的构造函数不起作用时，没有其他测试会成功。

老实说，我什至不再费心在我的构造函数中编写那些空检查。原因很简单：DI 容器不允许您使用空引用自动连接构造函数（或者至少默认情况下不允许），因此不可能使用空值构造类型（当由容器自动连接时） . 所以它只是添加了无用的代码，让我在想要高代码覆盖率时添加无用的测试。

我说完全跳过这些空检查并信任您的 DI 容器（或选择您可以信任的 DI 容器）。

# .htaccess - 如何创建子域，然后将其转发到子文件夹？

> ID：15751606
> 
> 赞同：0
> 
> 时间：2013-04-01T20:47:51.193
> 
> 标签：.htaccess, subdomain

假设我有网站 blog.mydomain.com 和 www.mydomain.com。我想确保如果人们输入 blog.mydomain.com，它将重定向到 www.mydomain.com/blog。（我知道这个问题通常是反过来问的……）

我发现并编辑了以下内容：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^blog.mydomain.com$ [NC]
RewriteRule ^(.*)$ http://www.mydomain.com/blog/$1 [R=301,L] 
```

这个对吗？并且：我是否需要在我的 DNS 中创建记录来创建子域？（因为这个 .htaccess 内容当然是在常规域上，而不是在 blog.mydomain.com 上..）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:49:55.177

这应该可以解决问题

```
RewriteCond %{HTTP_HOST} ^blog\.mydomain\.com
RewriteRule ^(.*)$ http://mydomain.com/blog/$1 [R=301] 
```

# bash - 为什么此命令在 Lion 中有效，但在 Mountain Lion 中无效

> ID：15751612
> 
> 赞同：0
> 
> 时间：2013-04-01T20:48:18.600
> 
> 标签：bash, join, osx-mountain-lion

```
alias crc32='cksum -o3 "$@"|ruby -e \'STDIN.each{|a|a=a.split;printf "%08X\t%s\n",a[0],a[2..-1].join(" ")}\'; }' 
```

在山狮中，它给了我：

> -bash：意外标记 `(' 附近的语法错误

在 Lion 中（以及我之前的假设），它可以正常工作。

我在连接括号内尝试了各种转义，但似乎都没有。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T11:29:03.970

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

bash 手册说：“将字符括在单引号 (') 中会保留引号内每个字符的字面值。单引号之间可能不会出现单引号，即使前面有反斜杠也是如此。” ——基思汤普森

# java - 从java中的多字节变量中获取单个字节

> ID：15751615
> 
> 赞同：1
> 
> 时间：2013-04-01T20:48:33.150
> 
> 标签：java, c++, porting

如何在java中将变量拆分为单个字节？例如，我在 C++ 中有以下代码段：

```
 unsigned long someVar;
    byte *p = (byte*)(void*) someVar; // byte being typedef unsigned char (from 0 to 255)

    byte *bytes = new byte[sizeof(someVar)];

    for(byte i = 0;i<sizeof(someVar);i++)
    {
        bytes[i] = *p++;
    }

    .... //do something with bytes 
```

我想在java下完成同样的事情，但我似乎找不到明显的解决方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:51:30.427

[使用ByteBuffer](http://docs.oracle.com/javase/6/docs/api/java/nio/ByteBuffer.html)类有两种方法。一种是动态创建一个新的字节数组。

```
long   value = 123;
byte[] bytes = ByteBuffer.allocate(8).putLong(value).array(); 
```

另一种是写入现有数组。

```
long   value = 123;
byte[] bytes = new byte[8];

ByteBuffer.wrap(bytes).putLong(value);

// bytes now contains the byte representation of 123. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T01:48:41.577

如果你使用 Guava，有一个方便的[Longs.toByteArray](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/primitives/Longs.html#toByteArray%28long%29)。它只是上面 John 的 ByteBuffer 答案的包装，但如果您已经使用 Guava，阅读起来会稍微“更好”。

# html - Twitter Bootstrap - 内联表单

> ID：15751616
> 
> 赞同：2
> 
> 时间：2013-04-01T20:48:44.633
> 
> 标签：html, css, forms, twitter-bootstrap

我有这个表格：

```
<!-- First Name-->
    <div class="control-group">
      <label class="control-label">First Name</label>
      <div class="controls">
        <input id="textinput" name="Product Name" class="input-xlarge" type="text"> 
      </div>
    </div>
    <!-- Last Name-->
    <div class="control-group inline">
      <label class="control-label">Last Name</label>
      <div class="controls">
        <input id="textinput" name="Product Name" class="input-xlarge" type="text"> 
      </div>
    </div>
    <!-- Telefonnumber-->
    <div class="control-group">
      <label class="control-label">Telefonnumber</label>
      <div class="controls">
        <input id="textinput" name="Product Name" class="input-xlarge" type="text"> 
      </div>
    </div>
    <!-- Street-->
    <div class="control-group">
      <label class="control-label">Street</label>
      <div class="controls">
        <input id="textinput" name="Product Name" class="input-xlarge" type="text"> 
      </div>
    </div> 
```

我想在名字旁边显示姓氏，并在这两个字段下显示电话号码。

我如何在 twitter bootstrap 中实现这一点？

顺便说一句[jsfiddle](http://jsfiddle.net/MgcDU/3101/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T21:40:50.653

Bootstraps 有一些示例表单布局，您可以[在此处使用](http://twitter.github.com/bootstrap/base-css.html#forms)。

根据他们的文档，`controls-row`当您想要多个在线时使用。（`form-inline`是为了使整个表单内联）。在继续使用他们的类之前，您需要阅读他们的[脚手架文档。](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)

更新[了 jsfiddle](http://jsfiddle.net/MgcDU/3102/)

**PS.. HTML 指针**

1.  不要重复`id`（`name`如果可以避免的话）。例如，`id="textinput"`在整个页面中应该是唯一的。`name`不必是唯一的，但最好只匹配 id 。
2.  为标签添加`for`属性。

# c++ - 在对象构造函数中初始化boost线程？

> ID：15751618
> 
> 赞同：2
> 
> 时间：2013-04-01T20:48:59.387
> 
> 标签：c++, constructor, boost-thread

我想为 boost thread 编写一个包装器来专门化一个线程模型。我的`run()`函数将成为`boost::thread`用作聚合线程对象的同一类的成员函数。考虑：

```
class Thread {
public:
  Thread(...) : m_thread(&Thread::run, this) {}

private:
  void run() { ... }
  boost::thread m_thread;
}; 
```

[这是潜在的危险](https://stackoverflow.com/questions/3509447/initialize-a-reference-warning-c4355-this-used-in-base-member-initializer)，因为`this`尚未完全构建。但是，如果我可以保证使用的对象的所有成员`run()`都在初始化 boost 线程之前进行了初始化，那么这实际上可以被认为是安全的吗？

我能想到的唯一能保证安全的解决方法是有一个子类来保证一个可以被构造函数使用的对象的完整构造`Thread`：

```
class Thread {
public:
  Thread(...) : m_impl(...), m_thread(&ThreadImpl::run, &m_impl) {}

private:
  class ThreadImpl {
    ThreadImpl(...) { }
    void run() { ... }
  }

  ThreadImpl m_impl;
  boost::thread m_thread;
}; 
```

有没有一种通用的方法可以做到这一点？对于`ThreadImpl`这样一个微不足道的问题，课程似乎有很多开销。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T22:16:21.630

声明成员的顺序（不是初始化列表中的顺序，但要小心）是构造顺序。只要构造所有成员足以建立一致的状态，就可以最后声明线程成员。

但是，如果您不想依赖它，则可以在构造函数的末尾使用以下内容启动线程：

```
// Constructor
MyThread() {
  // Initialize everything else...

  boost::thread t(boost::bind(&MyThread::run, this));
  m_thread.swap(t);
} 
```

关于使用`this`指针的安全性，标准在 12.6.2 中说：

> 注意：因为*mem-initializer*是在构造函数的范围内计算的，所以*this*指针可以在*mem-initializer的**表达式列表*中使用 来引用正在初始化的对象。

 *和

> 可以为正在构建的对象调用成员函数（包括虚拟成员函数，10.3）。

您只需要避免访问尚未构建的内容。这可以包括在所有基类初始化之前调用成员函数：

```
class Derived : public Base {
public:
  Derived()
    : Base(foo())  // foo() undefined because base class not initialized
  {
  }

  int foo() { return 0; }
}; 
```*

# cordova - 黑莓 10、相机和 FILE_NOT_FOUND_ERR

> ID：15751619
> 
> 赞同：3
> 
> 时间：2013-04-01T20:48:59.490
> 
> 标签：cordova, blackberry-webworks, blackberry-10

我正在尝试在新的 BlackBerry 10 设备 (Z10) 中运行 phonegap 应用程序，但遇到了问题。基本上，我拍了一张照片，我想通过 FileTransfer 将它上传到我的服务器，但是 FileTransfer 失败并出现 FileTransferError.FILE_NOT_FOUND_ERR。

然后我尝试使用 window.resolveLocalFileSystemURI 方法，现在我得到一个 FileError.NOT_FOUND_ERR。我假设这两个错误是相关的。

我传递给这两个的 fileURI 是我从 navigator.camera.getPicture 成功回调中返回的 fileURI，看起来像：

```
file:///accounts/1000/shared/camera/IMG_00000037.jpg 
```

我从 phonegap 2.5.0 下载中获取了示例 blackberry 应用程序，并稍微修改了 index.html 以重现该问题，我将包括以下内容：

```
<!DOCTYPE html>
<!--
    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
     KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.
-->
<html>
    <head>      
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <title>Hello World</title>

        <script type="text/javascript" charset="utf-8">

        // Called when a photo is successfully retrieved
        //
        function onPhotoURISuccess(imageURI, testFunction) {
            // Uncomment to view the image file URI 
            console.log(imageURI);

            // Get image handle
            //
            var image = document.getElementById('image');

            // Unhide image elements
            //
            image.style.display = 'block';

            // Show the captured photo
            // The inline CSS rules are used to resize the image
            //
            image.src = imageURI;

            // Run our test function
            testFunction(imageURI);
        }

        // Called if something bad happens.
        // 
        function onPhotoURIFail(message) {
            alert('Failed because: ' + message);
        }

        // A button will call this function
        //
        function getPhoto(source, testFunction) {
            // un-sandbox file system to access shared folder
            blackberry.io.sandbox = false;

            // Retrieve image file location from specified source
            navigator.camera.getPicture(
                function(imageURI) {
                    onPhotoURISuccess(imageURI, testFunction);
                },
                onPhotoURIFail,
                {
                    quality: 50,
                    destinationType: Camera.DestinationType.FILE_URI,
                    sourceType: source,
                    correctOrientation: true,
                    saveToPhotoAlbum: true
                }
            );
        }

        // Tests whether we can resolve the imageURI returned from navigator.camera.getPicture
        //
        function testResolveLocalFileSystemURI(imageURI) {
            window.resolveLocalFileSystemURI(
                imageURI,
                function (fileEntry) {
                    var message = "Resolved local file system URI: " + imageURI;
                    document.getElementById("span").innerHTML = message;
                    console.debug(message);
                    console.debug(fileInfo);
                },
                function (error) {
                    var message = "Unable to resolve local file system URI: " + imageURI + " error: " + error.code;
                    document.getElementById("span").innerHTML = message;
                    console.error(message);
                    console.debug(error);
                    console.debug("resolve error source " + error.source);
                    console.debug("resolve error target " + error.target);
                }
            );
        }

        // Tests whether we can upload the imageURI returned from navigator.camera.getPicture using a FileTransfer
        //
        function testFileTransferUpload(imageURI) {

            // Create =the file upload options
            var options = new FileUploadOptions();
            options.fileKey="file";
            options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
            options.mimeType="image/jpeg";

            // Create the file transfer and upload
            var ft = new FileTransfer();
            ft.upload(
                imageURI,
                encodeURI("http://some.server.com/upload.php"),
                function (r) {
                    var message = "Code: '" + r.responseCode + "'' Response: '" + r.response + "'' Sent: '" + r.bytesSent + "'";
                    document.getElementById("span").innerHTML = message;
                    console.debug(message);
                },
                function (error) {
                    var message = "Unable to upload: " + imageURI + " error: " + error.code;
                    document.getElementById("span").innerHTML = message;
                    console.error(message);
                    console.debug(error);
                    console.debug("upload error source " + error.source);
                    console.debug("upload error target " + error.target);
                },
                options
            );
        }

        // Tests whether we can upload the imageURI returned from navigator.camera.getPicture using a FileTransfer
        //
        function testFileSystemGetFile(imageURI) {
            window.requestFileSystem(
                LocalFileSystem.PERSISTENT,
                0,
                function (fileSystem) {
                    fileSystem.root.getFile(
                        imageURI,
                        {create: false},
                        function (fileEntry) {
                            var message = "Got file: " + imageURI;
                            document.getElementById("span").innerHTML = message;
                            console.debug(message);
                            console.debug(fileInfo);
                        },
                        function (error) {
                            var message = "Unable to get file: " + imageURI + " error: " + error.code;
                            document.getElementById("span").innerHTML = message;
                            console.error(message);
                            console.debug(error);
                            console.debug("get file error source " + error.source);
                            console.debug("get file error target " + error.target);
                        }
                    );
                },
                function (error) {
                    var message = "Unable to get file system. error: " + error.code;
                    document.getElementById("span").innerHTML = message;
                    console.error(message);
                    console.debug(error);
                    console.debug("file system error source " + error.source);
                    console.debug("file system error target " + error.target);
                }
            );
        }
        </script>

    </head>
    <body>
        <script type="text/javascript" src="cordova-2.5.0.js"></script>
        <button onclick="getPhoto(Camera.PictureSourceType.CAMERA, testResolveLocalFileSystemURI);">Capture Photo, Test Resolve Local File System URI</button> <br>
        <button onclick="getPhoto(Camera.PictureSourceType.CAMERA, testFileTransferUpload);">Capture Photo, Test File Transfer Upload</button> <br>
        <button onclick="getPhoto(Camera.PictureSourceType.CAMERA, testFileSystemGetFile);">Capture Photo, Test File System Get File</button> <br>
        <img style="display:none;" id="image" width="100" height="100" src="" />
        <span id="span"></span>
    </body>
</html> 
```

每当我运行应用程序并尝试拍照时，我都会得到：

```
Unable to resolve local file system URI... 
```

为什么 FileTransfer 或 window.resolveLocalFileSystemURI 都找不到从 navigator.camera.getPicture 返回的文件？我有来自 phonegap 示例的标准 config.xml 具有所有必需的功能和权限（至少据我所知）

下面是我的 config.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- 
       Licensed to the Apache Software Foundation (ASF) under one
       or more contributor license agreements.  See the NOTICE file
       distributed with this work for additional information
       regarding copyright ownership.  The ASF licenses this file
       to you under the Apache License, Version 2.0 (the
       "License"); you may not use this file except in compliance
       with the License.  You may obtain a copy of the License at

         http://www.apache.org/licenses/LICENSE-2.0

       Unless required by applicable law or agreed to in writing,
       software distributed under the License is distributed on an
       "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
       KIND, either express or implied.  See the License for the
       specific language governing permissions and limitations
       under the License.
-->
<!--
  Widget Configuration Reference:
    http://docs.blackberry.com/en/developers/deliverables/15274/
-->

<widget xmlns="http://www.w3.org/ns/widgets"
        xmlns:rim="http://www.blackberry.com/ns/widgets"
    version="1.0.0.0" id="org.apache.cordova.example">

  <name>cordovaExample</name>

  <author>Your Name Here</author>

  <description>
       A sample Apache Cordova application that responds to the deviceready event.
  </description>

  <license href="http://opensource.org/licenses/alphabetical">
  </license>

  <!-- Cordova API -->
  <feature id="blackberry.system" required="true" version="1.0.0.0" />
  <feature id="org.apache.cordova" required="true" version="1.0.0" />
  <feature id="blackberry.find" required="true" version="1.0.0.0" />
  <feature id="blackberry.identity" required="true" version="1.0.0.0" />
  <feature id="blackberry.identity.phone" required="true" version="1.0.0.0" />
  <feature id="blackberry.pim.Address" required="true" version="1.0.0.0" />
  <feature id="blackberry.pim.Contact" required="true" version="1.0.0.0" />
  <feature id="blackberry.io.file" required="true" version="1.0.0.0" />
  <feature id="blackberry.utils" required="true" version="1.0.0.0" />
  <feature id="blackberry.io.dir" required="true" version="1.0.0.0" />
  <feature id="blackberry.app" required="true" version="1.0.0.0" />
  <feature id="blackberry.app.event" required="true" version="1.0.0.0" />
  <feature id="blackberry.system.event" required="true" version="1.0.0.0"/>
  <feature id="blackberry.widgetcache" required="true" version="1.0.0.0"/>
  <feature id="blackberry.media.camera" />
  <feature id="blackberry.ui.dialog" />
  <feature id="blackberry.connection" />
  <feature id="blackberry.bbm.platform" />
  <feature id="blackberry.invoke.card" />
  <feature id="blackberry.pim.contacts" />
  <feature id="blackberry.ui.contextmenu" />
  <feature id="blackberry.io.filetransfer" />
  <feature id="blackberry.io" />
  <feature id="blackberry.invoke" />
  <feature id="blackberry.invoked" />
  <feature id="blackberry.push" />
  <feature id="blackberry.media.microphone" required="true" version="1.0.0.0"/>

  <!-- Cordova API -->
  <access subdomains="true" uri="file:///store/home" />
  <access subdomains="true" uri="file:///SDCard" />
  <access subdomains="true" uri="file:///accounts" />

  <!-- Expose access to all URIs, including the file and http protocols -->
  <access subdomains="true" uri="*" />

  <icon rim:hover="false" src="res/icon/blackberry/icon-80.png" />
  <icon rim:hover="true" src="res/icon/blackberry/icon-80.png" />

  <rim:loadingScreen backgroundColor="#CFCFCF"
                     foregroundImage="res/screen/blackberry/screen-225.png"
             onFirstLaunch="true">
    <rim:transitionEffect type="fadeOut" />
  </rim:loadingScreen>

  <content src="index.html" />

  <rim:permissions>
    <rim:permit>use_camera</rim:permit>
    <rim:permit>read_device_identifying_information</rim:permit>
    <rim:permit>access_shared</rim:permit>
    <rim:permit>read_geolocation</rim:permit>
    <rim:permit>record_audio</rim:permit> 
    <rim:permit>access_pimdomain_contacts</rim:permit> 
  </rim:permissions>

</widget> 
```

下面是我的 plugins.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- 
       Licensed to the Apache Software Foundation (ASF) under one
       or more contributor license agreements.  See the NOTICE file
       distributed with this work for additional information
       regarding copyright ownership.  The ASF licenses this file
       to you under the Apache License, Version 2.0 (the
       "License"); you may not use this file except in compliance
       with the License.  You may obtain a copy of the License at

         http://www.apache.org/licenses/LICENSE-2.0

       Unless required by applicable law or agreed to in writing,
       software distributed under the License is distributed on an
       "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
       KIND, either express or implied.  See the License for the
       specific language governing permissions and limitations
       under the License.
-->
<plugins>
  <plugin name="App"            value="org.apache.cordova.app.App"/>
  <plugin name="Device"         value="org.apache.cordova.device.Device"/>
  <plugin name="Camera"         value="org.apache.cordova.camera.Camera"/>
  <plugin name="NetworkStatus"  value="org.apache.cordova.network.Network"/>
  <plugin name="Notification"   value="org.apache.cordova.notification.Notification"/>
  <plugin name="Accelerometer"  value="org.apache.cordova.accelerometer.Accelerometer"/>
  <plugin name="Geolocation"    value="org.apache.cordova.geolocation.Geolocation"/>
  <plugin name="File"           value="org.apache.cordova.file.FileManager"/>
  <plugin name="FileTransfer"   value="org.apache.cordova.http.FileTransfer"/>
  <plugin name="Contacts"       value="org.apache.cordova.pim.Contact"/>
  <plugin name="Capture"        value="org.apache.cordova.capture.MediaCapture"/>
  <plugin name="Battery"        value="org.apache.cordova.battery.Battery"/>
  <plugin name="Media"          value="org.apache.cordova.media.Media"/>
  <plugin name="Globalization"  value="org.apache.cordova.globalization.Globalization"/>
</plugins> 
```

重现我的问题的步骤：

1.  遵循[本](http://docs.phonegap.com/en/2.5.0/guide_getting-started_blackberry_index.md.html#Getting%20Started%20with%20BlackBerry)指南（使用 BlackBerry 10(QNX) 步骤）
2.  用我提供的文件替换给定的 index.html 文件
3.  用我提供的文件替换给定的 config.xml 文件（更改应该是最小的）
4.  在 BB10 设备上调试它（我使用的是 Z10）
5.  单击“捕获照片”按钮，如果您连接了远程 Web 检查器，您应该会看到错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:09:23.053

您需要同时`blackberry.io.sandbox = false;`删除 file:// 协议，至少根据我从文件系统访问文件的经验。此外，您不应该直接访问共享路径。使用 blackberry.io.sharedFolder 属性，如本页示例所示：[https ://developer.blackberry.com/html5/apis/blackberry.io.html](https://developer.blackberry.com/html5/apis/blackberry.io.html)

您的文件系统路径应该是 blackberry.io.sharedFolder + 'camera/IMG_00000037.jpg'

BB10 的安全沙盒设计意味着每个应用程序都有自己的文件路径到共享文件系统区域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T22:07:22.580

听起来很像我在这里看到的问题：[https ://github.com/blackberry/BB10-WebWorks-Framework/issues/536](https://github.com/blackberry/BB10-WebWorks-Framework/issues/536)

尝试删除**file://**协议以获取：**/accounts/1000/shared/camera/IMG_00000037.jpg**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:26:02.527

您可能想尝试添加，`<access uri="file://accounts/" subdomains="ture"/>`以代替“商店/家”。

编辑：此外，在处理文件系统时，您需要将沙盒模式设置为 false，否则您可能无法访问所述文件。

```
blackberry.io.sandbox = false; 
```

除此之外，看起来你几乎所有的设置都很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-06T13:00:00.887

相信我这个来源解决的问题：

```
<html>
<head>
<script type="text/javascript" src="local:///chrome/webworks.js"></script>
<script type="text/javascript">

function log(e) {
    console.log(e);
}

function takePicture(success) {
    blackberry.invoke.card.invokeCamera('photo', function (path) {
        success(path);
    }, log, log);
}

function openFile (filePath, success) {
    window.webkitRequestFileSystem(window.PERSISTENT, 1024*1024*1024, function (fs) {
        fs.root.getFile(filePath, {}, function (entry) {
            success(entry);
        }, log);
    }, log);
}

function uploadFile (entry, server, success) {
    entry.file(function (file) {
        var fd = new FormData(),
            xhr;
        fd.append("picture", file);
        xhr = new XMLHttpRequest();
        xhr.open("POST", server);
        xhr.onload = function (evt) {
            if (xhr.status == 200) {
                success(xhr.response);
            } else {
                log(xhr);
            }
        };
        xhr.ontimeout = log;
        xhr.onerror = log;
        xhr.send(fd);
    }, log);
}

function start() {
    takePicture(function (filePath) {
        openFile(filePath, function (entry) {
            uploadFile(entry, "http://cordova-filetransfer.jitsu.com/upload", function () {
                alert("SUCCESS");
            });
        });
    });
}

document.addEventListener('webworksready', function () {
    blackberry.io.sandbox = false;
    document.getElementById("startButton").disabled = "";
});

</script>
</head>
<body>
<h1>Camera XHR Upload Sample</h1>
<button id="startButton" disabled="disabled"  onclick="start();">Start</button>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-01T10:43:12.493

根据 2013 年 4 月 2 日的 chadtatro 回答：

请在 config.xml 中添加

```
<access uri="file:///accounts/1000/removable/sdcard/" subdomains="true"/> 
```

我还添加到我的项目中：

```
webworks plugin add com.blackberry.io 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-26T08:31:33.510

几天以来我遇到了同样的问题。获取图像停止工作，并且我的代码中没有任何内容发生变化。

注意`cordova-plugin-file`，因为在它的`3.0.1-dev`版本中（可能还有其他版本），您开发的应用程序不会请求访问文件的权限，并且从相机或图库中获取图片将失败。

我使用`2.1.0`这个插件的版本解决了它：

```
cordova plugin add https://git-wip-us.apache.org/repos/asf/cordova-plugin-file.git#r2.1.0 
```

# c++ - Windows api，是用 C 还是 C++ 编写的？

> ID：15751624
> 
> 赞同：-1
> 
> 时间：2013-04-01T20:49:03.967
> 
> 标签：c++, windows, api

我只是想知道，windows api是用C还是C++编写的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T20:50:32.430

Win32 库是用 C 编写的。

# php - UPS Api - php，我该如何解决？

> ID：15751625
> 
> 赞同：3
> 
> 时间：2013-04-01T20:49:07.023
> 
> 标签：php, api, ups

我已经下载了运输和费率的 UPS api。zip 包含多个文档，其中一些长达数百页。zip 还包含示例代码，但是，它们缺少成功运行所需的信息，即 Url 端点、wsdl 文件的位置...等。

我通过stackoverflow帖子找到了足够的信息来使示例代码工作，尽管我不知道如何构建我自己的业务逻辑所需的soap调用。

我查看了 .wsdl 文件，无法确定需要发送哪些参数以及可以调用哪些选项/方法。

例如，在示例代码中有以下内容：

```
 $option['RequestOption'] = 'Shop';
  $request['Request'] = $option; 
```

如果我更改`Shop`为另一个值，我会收到一条错误消息，指出请求无效。这是可以对 Rate 服务提出的唯一请求吗？我在哪里可以找到可供选择的请求以及预期/返回的数据？

另一个例子是`operation`值：`$operation = "ProcessRate";` 在我发现的 wsdl 中，`ProcessRate`虽然关于输入/输出的信息很少......除非我错过了什么

```
<wsdl:operation name="ProcessRate"><soap:operation soapAction="http://onlinetools.ups.com/webservices/RateBinding/v1.1" style="document"/><wsdl:input name="RateRequest"><soap:body parts="Body" use="literal"/><soap:header message="tns:RateRequestMessage" part="UPSSecurity" use="literal"><soap:headerfault message="tns:RateErrorMessage" part="RateError" use="literal"/></soap:header></wsdl:input><wsdl:output name="RateResponse"><soap:body parts="Body" use="literal"/></wsdl:output><wsdl:fault name="RateError"><soap:fault name="RateError" use="literal"/></wsdl:fault></wsdl:operation> 
```

我的目标是拨打电话，根据用户购买的商品数量确定运费。任何信息/方向将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:54:50.083

你检查过他们的[开发者资源中心](https://www.ups.com/content/us/en/resources/techsupport/developercenter.html)吗？

它提供了以下链接：

*   他们[自己的支持社区](https://developerkitcommunity.ups.com/index.php/Main_Page)
*   [用户指南](https://www.ups.com/media/en/UPS_dev_kit_user_guide.pdf)
*   [快速参考指南](https://www.ups.com/media/en/UPS_dev_kit_ref_guide.pdf)
*   [开发者常见问题](https://www.ups.com/media/en/Developer_APIs_Knowledge_Base.pdf)

**联系 UPS 开发人员支持**

> 向 UPS 发送一封包含您的问题的电子邮件，并使用下面的链接附上包含您的代码和错误消息的文件。我们的目标是在支持工作时间的四小时内回复您的消息：周一至周五，美国东部标准时间上午 8 点至晚上 9 点。[电子邮件 UPS](https://www.ups.com/upsemail/input?requestId=gec&category=techsupport&topic=onlinetools&loc=en_US)

您可能会通过上述渠道之一获得更好/更快的支持。

# xml - javax.xml.bind.UnmarshalException

> ID：15751632
> 
> 赞同：6
> 
> 时间：2013-04-01T20:49:31.967
> 
> 标签：xml, namespaces, jaxb, unmarshalling

我收到以下错误：

```
javax.xml.bind.UnmarshalException: unexpected element(uri:"http://www.docsite.com/ClientConfig.xsd", local:"ClientConfig").
Expected elements are <{http://www.docsite.com/ClientConfig.xsd/}ClientConfig> 
```

我的根元素类文件是：

```
@XmlRootElement(name="ClientConfig",namespace="http://www.docsite.com/ClientConfig.xsd/")
public class ClientConfig {} 
```

我的 package.info 文件是：

```
@XmlSchema(namespace="http://www.docsite.com/ClientConfig.xsd",elementFormDefault=XmlNsForm.QUALIFIED)

package com.convertXml.docSite.XmlConverter;
import javax.xml.bind.annotation.XmlSchema;
import javax.xml.bind.annotation.XmlNsForm; 
```

让我知道我能做些什么来解决这个问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T21:23:21.007

**TL;博士**

`@XmlRootElement`您在注释中指定的命名空间末尾有一个额外的 / 。

* * *

**长答案**

**包信息**

`@XmlSchema`在包级别注释中正确指定了命名空间：

```
@XmlSchema(namespace="http://www.docsite.com/ClientConfig.xsd",elementFormDefault=XmlNsForm.QUALIFIED)
package com.convertXml.docSite.XmlConverter;

import javax.xml.bind.annotation.XmlSchema;
import javax.xml.bind.annotation.XmlNsForm; 
```

**客户端配置**

但是你已经用类上的一个不正确的命名空间覆盖了它`ClientConfig`。在注释`/`中指定的命名空间末尾有一个额外的。`@XmlRooElement`

```
package com.convertXml.docSite.XmlConverter;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name="ClientConfig",namespace="http://www.docsite.com/ClientConfig.xsd/")
public class ClientConfig {} 
```

由于您`@XmlSchema`在`package-info`类上声明了命名空间，因此您无需在`@XmlRootElement`.

```
package com.convertXml.docSite.XmlConverter;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name="ClientConfig")
public class ClientConfig {} 
```

**演示**

现在`unmarshal`将正常工作：

```
package com.convertXml.docSite.XmlConverter;

import java.io.StringReader;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(ClientConfig.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        StringReader xml = new StringReader("<ClientConfig xmlns='http://www.docsite.com/ClientConfig.xsd'/>");
        ClientConfig clientConfig = (ClientConfig) unmarshaller.unmarshal(xml);
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/08/jaxb-namespaces.html](http://blog.bdoughan.com/2010/08/jaxb-namespaces.html)

# matlab - 具有不同维度的matlab矩阵

> ID：15751634
> 
> 赞同：1
> 
> 时间：2013-04-01T20:49:36.567
> 
> 标签：matlab, matrix, indexing

我有矩阵 C01 <0>，矩阵 C02 <50x1800 double>，矩阵 C3 <50x34 double>，我需要将它转换为一个东西 C(i)，以便使用像这样的表达式 C(1) = C01, C(2 ) = CO2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:56:25.570

您需要使用[元胞数组](http://www.mathworks.com/help/matlab/cell-arrays.html)并将单个元素引用为`C{1} = C01`,`C{2} = C02`等。

您还可以将元胞数组创建为`C = {C01, C02, C03};`

请注意，您仍然可以使用`C(1)`元胞数组的语法，但此语句将返回的不是原始数值矩阵，而是封装在一个元素的元胞数组中的矩阵。

# python - 解析网页时如何摆脱所有智能引号？

> ID：15751636
> 
> 赞同：2
> 
> 时间：2013-04-01T20:49:46.657
> 
> 标签：python, beautifulsoup, nltk, smart-quotes

这是我的代码：

```
name = namestr.decode("utf-8")

name.replace(u"\u2018", "").replace(u"\u2019", "").replace(u"\u201c","").replace(u"\u201d", "") 
```

这似乎不起作用。我仍然在我的文本中找到`&ldquo`,`&rdquo`等。此外，此文本已使用 Beautiful Soup 进行解析。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T21:07:45.360

将代码的最后一行替换为以下代码：

```
name = name.replace(u"\u2018", "").replace(u"\u2019", "").replace(u"\u201c","").replace(u"\u201d", "") 
```

该`replace`方法返回一个修改后的字符串，但它不会影响您调用它的字符串，因此您必须将返回值分配给上述变量。

# html - html 元素与 float:left 和 float:right 对齐

> ID：15751639
> 
> 赞同：0
> 
> 时间：2013-04-01T20:49:56.083
> 
> 标签：html, css

这是我经常遇到的一个非常基本的 html-css 查询。大多数时候，我以某种方式找到解决方案，但我很想知道 UI 的这种意外行为（根据我）的原因。

请看看这个小提琴：http: [//jsfiddle.net/2yaRU/](http://jsfiddle.net/2yaRU/)

```
<div > //float left
  Sometext <span> text<.span>//float:right
<div> 
```

尽管我的行中有很多可用宽度，但右侧的浮动文本移动到下一行。理想情况下，根据我的说法，文本应与 float:left 并排显示在左侧，float:right 在 div 内的右侧。

这不可能是一个复杂的问题，所以我在这里没有很常见的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:52:00.547

首先放置浮动项目。浮动嵌套在彼此内部，因此它们不会相互影响。浮动元素会自动改变它 display:block;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:54:59.507

我认为有几件事正在发生。由于 wrap 是`float:left`，它切换到[块格式化上下文](http://www.w3.org/TR/CSS2/visuren.html#block-formatting)。看起来问题是文本之后的空格（就在嵌套浮点之前）被认为是尾随，因为在它之后的流中没有任何内容。因此，父级的宽度没有考虑空间，即使在呈现布局时它*确实*占用了空间，正如您在 html 中看到的那样。

删除尾随空格会使 X 回到与文本相同的行。

[http://jsfiddle.net/2yaRU/8/](http://jsfiddle.net/2yaRU/8/)

`&nbsp;`如果你想在文本后面加一个空格，你应该在 html 中添加一个不间断的空格 ( )。

[http://jsfiddle.net/2yaRU/9/](http://jsfiddle.net/2yaRU/9/)

# box-api - Box OAuth 2 登录页面：是否有移动替代方案？

> ID：15751640
> 
> 赞同：2
> 
> 时间：2013-04-01T20:49:59.613
> 
> 标签：box-api

我们已经为我们的 iPad 应用程序实现了 Box 的 OAuth 2 身份验证，并在尺寸为 528px x 540px 的 web 视图中将其呈现给用户。

不过，Box 提供的身份验证页面的宽度总是要大得多。这会迫使用户向右滚动很远以查看他们实际登录的位置。

有没有办法强制移动（即iphone）登录页面？

我们之前曾尝试`m.box.com`在 OAuth 过程中使用 URL。唯一的区别是它使盒子标志加倍，如下图所示：

![http://aplot.com/stackdir/box_auth.png](https://i.stack.imgur.com/8RBzW.png)

其他人在 Stack Overflow 上提到了这个问题（至少，[切线](https://stackoverflow.com/questions/10838221/authentication-with-box-on-ipad)），但没有可用的答案。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:15:53.480

OAuth 页面目前未针对移动页面进行优化，但我们正在努力使其具有响应性。

# requirejs - 当ajax返回404时RequireJS中的空依赖项

> ID：15751642
> 
> 赞同：1
> 
> 时间：2013-04-01T20:50:03.713
> 
> 标签：requirejs

有没有办法让 requireJS 可选地（比如通过插件）为因 404 失败的依赖项返回 null？

例如：

```
require(["allow404!myscript"], function(myscript){
    console.info(myscript);  // myscript should be null if myscript doesn't exist
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:39:46.303

您可以滥用[路径配置后备](http://requirejs.org/docs/api.html#pathsfallbacks)来实现此目的：

```
require(["myModuleOrNull"], function(myModuleOrNull) {
    console.log(myModuleOrNull);
}); 
```

在您的`requirejs`配置中：

```
paths: {
    'myModuleOrNull': [
        'unreliable-module-location',
        // If above fails (timeout, 404, etc.) use the one below
        'null-module'
    ]
} 
```

和`null-module.js`：

```
define([], function() {
    return null;
}); 
```

* * *

...但你为什么要这样做？在需要模块的地方处理可选`null`的只是痛苦。这样做有什么具体原因吗？

# c# - 将 Web DTD 转换为内部 DTD 的第三方 XML

> ID：15751644
> 
> 赞同：0
> 
> 时间：2013-04-01T20:50:07.737
> 
> 标签：c#, xslt, local, dtd

我有一个带有 Web DTD 的第三方 XML，如下所示：

```
<?xml version="1.0"?>
<!DOCTYPE orders 
  SYSTEM "http://www.mijnwinkel.nl/DTD/orders_export_v2.dtd">
<orders>
<mail version="2.0" >
  <set id="session" sequence="1" version="1.1" >
    <property id="calc_vat"   
              label="" 
              sequence="0" 
              resource_label="" 
              show_type="" 
              name="" >1</property>
    <property id="emailvendor" 
              label="" 
              sequence="" 
              resource_label="" 
              show_type="" 
              name=""> ... </property> 
```

ETC...

我开发了一个 XSLT 脚本来将其转换为在 .Net 应用程序中处理的新 XML。

问题是我希望这个应用程序脱机工作，这意味着 XSLT 应该忽略外部 DTD 并在代码中使用它的本地副本。

所以，我的代码如下所示：

```
foreach (var file in fileslist)
{
  Message.SendMessage( "Transformeer: "+ file + "....start" );
  CurrentFile = Path.GetFileName(file);

  //Transforming XML using XSL
  var resolver = new XmlUrlResolver
     {
        Credentials = System.Net.CredentialCache.DefaultCredentials
     };

      // xml content reader            
      var settings = new XmlReaderSettings
           {
              XmlResolver = resolver,
              DtdProcessing = System.Xml.DtdProcessing.Parse
           };
      var xslCompiledTransform = new XslCompiledTransform(); 

      using (Stream strm = Assembly.GetExecutingAssembly().GetManifestResourceStream("EAOrderImportBL.Import.xsl"))
                using (XmlReader xslreader = XmlReader.Create(strm))
                {

                    xslCompiledTransform.Load(xslreader, XsltSettings.Default, resolver);

                }

                var xmlSettings = new XmlWriterSettings();

                var reader = XmlReader.Create(file, settings);

                using (var w = XmlWriter.Create(TempPath + @"\" + CurrentFile, xmlSettings))
                {

                    xslCompiledTransform.Transform(reader, w);
                }
                reader.Close();

                Message.SendMessage( "Transformatie: " + file + "....complete" );
            }
        } 
```

由于到 DTD 的外部链接，这工作正常，这是长时间处理的一个方面。

因此，当离线代码行时：

```
 xslCompiledTransform.Transform(reader, w); 
```

抛出有关无法连接/查找外部 DTD 的异常。

谁能解释如何更改代码，以便 xslCompiledTransform.Transform 方法行只检查 Web DTD 的副本？

非常感谢，Jahwik

# shell - sed 命令替换文件中的代码并保存

> ID：15751651
> 
> 赞同：2
> 
> 时间：2013-04-01T20:50:15.860
> 
> 标签：shell, unix, sed

我有一个 HTML 文件，其中包含一些我想在编译应用程序时删除的内容。

需要删除的内容以 为前缀`"<!-- BEGIN -->"`和后缀`"<!-- END -->"`。所以这两个标签（包括标签）之间的所有东西都需要去。

```
<!-- BEGIN -->
Remove me
<!-- END --> 
```

我相信以下命令将简单地注释掉所有代码：

```
# remove content between comments
cat src/html/project.html                                       \
| sed -e 's/<!-- BEGIN -->/<!-- BEGIN /' \
| sed -e 's/<!-- END -->/     END -->/' \
> dist/html/project.html 
```

结果是：

```
 <!-- BEGIN 
    Remove me
    END --> 
```

注释掉代码并不是我想要的，但我想它会做。但是，即使在这种情况下，它也会产生语法错误：

```
./shell: line 3: syntax error near unexpected token `|' 
```

任何想法是什么问题？更好的是，如果有人可以建议如何删除代码（包括标签），那将是理想的。

抱歉，如果问题很明显，我完全是新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T21:02:14.023

假使，假设：

*   和评论总是成对`BEGIN`的`END`
*   您确定格式是固定的：`<!-- (onespace) BEGIN/END (onespace) -->`
*   并且`BEGIN, END`评论位于其自己的行中：

这将完成工作：

```
 sed '/<!-- BEGIN -->/,/<!-- END -->/d' file 
```

如果我们举个例子：

```
kent$  cat file
<!-- BEGIN -->
Remove me

<!-- END -->
we
<!-- BEGIN -->
22Remove me
<!-- END -->
need
<!-- BEGIN -->
33Remove me
33Remove me
<!-- END -->
this
<!-- BEGIN -->
44Remove me
<!-- END -->

kent$  sed '/<!-- BEGIN -->/,/<!-- END -->/d' file
we
need
this 
```

如果要保存回文件，可以使用`-i`sed 选项。你也不需要`cat`将文件内容传递给`sed`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T20:59:58.883

删除所有不必要的管道命令：

```
sed -i.bak -e 's/\(<!-- BEGIN \)-->/\1/' -e 's/<!--\( END -->\)/    \1/' src/html/project.html 
```

正如您的问题所说，您可能想要删除 2 个标签之间的内容，然后使用：

```
sed -i.bak '/<!-- BEGIN -->/,/<!-- END -->/d' src/html/project.html 
```

`-i.bak`将对给定文件进行内联更改并保存带有`.bak`文件扩展名的原始副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T21:06:55.543

删除一行行（包括开始和结束标记）的最简单方法是：

```
sed -e '/<!-- BEGIN -->/,/<!-- END -->/d' src/html/project.html 
```

但是如果两个标记可以在同一行，那么您需要添加更多内容：

```
sed -e '/<!-- BEGIN -->.*<!-- END -->/{d;b;};/<!-- BEGIN -->/,/<!-- END -->/d' src/html/project.html 
```

# c# - 关于处理 DHCP 发现/提供消息的 API 的查询

> ID：15751654
> 
> 赞同：0
> 
> 时间：2013-04-01T20:50:31.300
> 
> 标签：c#, c++, dhcp

我正在编写一个基于网络的程序，该程序需要发现 DHCP 服务器（如果存在于同一网段）。具体来说，我需要广播“DHCP Discover”消息，以便我的程序通过“DHCP Offer”响应消息知道是否有某个服务器。我研究了这个主题，发现一些线程表明这在 Windows 中是不可能的。但是，我想知道您对这个问题的看法。要使用的语言是 C++、C# 或 Java。

我感谢您的帮助。

# php - 使用 php、mysql 和 validate 插件对电子邮件字段进行 jquery 验证

> ID：15751656
> 
> 赞同：-2
> 
> 时间：2013-04-01T20:50:34.687
> 
> 标签：php, jquery, mysqli, jquery-validate

我在使用带有 jquery 的验证插件时遇到了一些奇怪的问题。这似乎已被问过几次，但我找不到我的问题的答案。我有一个表单，我正在尝试查看是否已经输入了电子邮件 - 如果有，用户应该无法提交表单。我正在使用 FirePHP 输出各种变量。这是我注意到查询的返回值始终为“1”（这是错误的）的地方。但是，当我手动查询我的数据库（使用 PhpMyAdmin）时，会出现正确的答案（“0”）。

这是我的js：

```
 // validate signup form on keyup and submit
$("#register").validate({
    rules: {
        ......
        email: {
            required: true,
            email: true,
            remote: "check_email.php" , async:false 
        }, 
    },
    messages: {
                     ......
        email: {required: "Please enter an email address", email: "Please enter a valid email address", remote: "This email is already registered" },
        }
    }
}); 
```

});

这是我在数据库连接之后的 php ......

```
$form_email = $_GET['email'];
fb($form_email);

$sql = "SELECT COUNT(*) AS num_rows FROM users WHERE email = " . "'" . $form_email . "'"; 
fb($sql);
$result = $conn->query($sql);
fb($result->num_rows);

if ($result->num_rows == 0) {
    echo 'true';
    fb("true");
} else {
       echo 'false';
    fb("false");
 } 
```

即使我输入了不存在的电子邮件，计数也始终返回为“1”。

我也试过回来

```
echo json_encode('true'); 
```

当我在某个可能有用的地方阅读时，它并没有帮助。为什么我的 php 中的响应总是错误的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:17:09.590

您的规则的语法`remote`不正确：

```
rules: {
    ......
    email: {
        required: true,
        email: true,
        remote: "check_email.php" , async:false 
    }, 
} 
```

您编写它的方式，插件被`async`视为另一条规则。由于没有像这样的“规则” `async`，插件会窒息。

[按照文档](http://docs.jquery.com/Plugins/Validation/Methods/remote#options)，试试这个：

```
rules: {
    ......
    email: {
        required: true,
        email: true,
        remote: "check_email.php"
    }
} 
```

或这个...

```
rules: {
    ......
    email: {
        required: true,
        email: true,
        remote: {
            url: "check_email.php", 
            async: false 
        }
    } 
} 
```

**演示：http: [//jsfiddle.net/KkBSY/](http://jsfiddle.net/KkBSY/)**

# javascript - 如何设置容器 div 的宽度和高度？

> ID：15751660
> 
> 赞同：0
> 
> 时间：2013-04-01T20:50:51.410
> 
> 标签：javascript, html, css

我有以下内容：

```
<div id="container">
    <img src="pic.png">
</div> 
```

其样式如下：

```
#container {
    height: 50px;
    width: 50px;
} 
```

除此之外，我还有一些 javascript 骇客通过设置`margin-top`和`margin-left`.

当我在 Chrome 网络检查器中查看这个时，很明显包含的 div 不是从其父级的顶部开始的。我怀疑图像是相对于容器 div 的父级定位的。

这样做的问题是我希望容器 div 成为单击事件的目标，例如拖动。div 仅从图像顶部开始，当我希望它从图像上方开始时，并将边距空间作为容器的一部分。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:18:19.840

@plalx 是正确的，您使用了错误的选择器，您应该这样做：

```
#container{
    width: 50px;
    height: 50px;
    padding: 5px;
} 
```

`padding`是您通过使 div 比点击图像更大而寻找的东西。`margin`确定页面上的位置，`padding`确定页面上超出您和属性的*空间。*`height``width`

请参阅[http://jsfiddle.net/VRJUc/](http://jsfiddle.net/VRJUc/)。如果您打开元素检查器（chrome）并查看 div 的实际大小，您会发现这实际上是`60x60`因为我`5px`在每一侧都添加了填充。

# java - 用户偏好

> ID：15751666
> 
> 赞同：0
> 
> 时间：2013-04-01T20:51:09.977
> 
> 标签：java, jar, executable-jar, final

我想制作一个简单的 java 程序，在某处创建一个文本文件。我想让用户选择文件夹。但是当我将它包装在 jar 文件中并发送给其他人时。每次我的朋友运行它时，它都会询问文件夹。我想知道如何让 jar 文件只询问一次并将其设置为最终文件。在我的 .java 文件中，我有类似的东西

```
public void setDefaultFolder() {
    //initially path is empty string
    if(fc.getPath().equals("")){
        String a = JOptionPane.showInputDialog("Please select a default folder." +
                " Make sure it exists and it's not changeable once set");
        if(a != null) {
        String b = a.replace("\\","\\\\");
        // set String path = something users enter
        // fc is a helper object. I have all the read/write file or other methods 
        // there. I want to let the jar file read the path only for the first time
        // and set the path final, later on, when it detects path is not empty
        // string, it stops asking users to type in path.
        fc.setPath(b);
        }
        else {
            JOptionPane.showMessageDialog(null, "Folder not set");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:54:29.660

您需要将用户配置保存在某处。有很多方法可以做到这一点，例如你可以使用 java.util.prefs 包，正如 Peter Knego 在他[对这个问题的回答中](https://stackoverflow.com/questions/4017137/how-do-i-save-preference-user-settings-in-java)所说：

```
// Retrieve the user preference node for the package com.mycompany
Preferences prefs = Preferences.userNodeForPackage(com.mycompany.MyClass.class);

// Preference key name
final String PREF_NAME = "name_of_preference";

// Set the value of the preference
String newValue = "a string";
prefs.put(PREF_NAME, newValue);

// Get the value of the preference;
// default value is returned if the preference does not exist
String defaultValue = "default string";
String propertyValue = prefs.get(PREF_NAME, defaultValue); // "a string" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:55:10.757

您可能希望使用属性文件来存储文件夹位置。然后，您将在每次加载 jar 时加载该属性

# php - 仅在 MySQL 表中不存在数据时才将数据插入：INSERT IGNORE 出现问题

> ID：15751670
> 
> 赞同：0
> 
> 时间：2013-04-01T20:51:21.117
> 
> 标签：php, mysql, insert

所以我一直在查看 StackOverflow 和 MySQL 手册一段时间，但我似乎无法解决我的问题。我想要做的只是让我的数据 INSERT 函数，这样它就不会在我的表中添加任何东西，如果它已经存在的话。我看到了一些方法：INSERT IGNORE 函数以及唯一索引对我来说似乎是最好的，但我不知道为什么它不起作用......这是我的代码的一部分（我有两列：“用户名”和“电子邮件”，我的表名为“info4”）：

```
$unique_index = mysqli_query ($con, "CREATE UNIQUE INDEX index ON info4 ( username, email);");

$insert = mysqli_query($con, "INSERT IGNORE INTO info4 (`username`, `email`) VALUES ('$array_values[0]', '$array_values[1]')"); 
```

我哪里错了？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:59:45.737

您不能创建名为 index.html 的索引。

Mysql 不区分大小写。您的 INDEX 错误地命名为“索引”将不起作用。

例子：

mysql> 在 tbladresse (strasse_zusatz) 上创建索引索引；ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'index on tbladresse (strasse_zusatz)' 附近使用正确的语法

mysql> 在 tbladresse (strasse_zusatz) 上创建索引 iindex；查询正常，0 行受影响（0.03 秒）记录：0 重复：0 警告：0

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T21:04:23.657

`Insert Ignore`只是告诉 MySQL 在尝试将重复数据插入具有唯一约束的字段时不要发出重复键错误。

唯一索引应该是阻止插入重复条目所需的全部内容。

通常，您不想使用 PHP 添加索引之类的事情，您应该通过您用来访问数据库的任何工具来执行此操作。

您是否看到重复的用户名/电子邮件组合被插入到您的表中？`$array_values[0]`和的值是`$array_values[1]`多少？

如果你`SHOW INDEX FROM info4`看到你的唯一索引？

# javascript - Angular，Angular-ui：日期 - 不同的输出格式

> ID：15751671
> 
> 赞同：2
> 
> 时间：2013-04-01T20:51:25.803
> 
> 标签：javascript, angularjs, angular-ui

我的日期是这种格式的字符串：

```
Dec 31, 1969 7:00:00 PM 
```

我想在视图上显示更短的日期，所以我用 angular 来做

```
<input ui-date="{ dateFormat: 'yy-mm-dd' }" ui-date-format ng-model="project.date" /> 
```

但是 project.date 不再是旧格式，而是 unix 格式（我认为）：

```
1969-12-09T05:00:00.000Z 
```

但我想以以前的格式输出它：

```
Dec 31, 1969 7:00:00 PM 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T07:47:06.113

使用日期过滤器，exp：{{yourDate | 日期：'medium'}} 检查这个：[http ://docs.angularjs.org/api/ng.filter:date](http://docs.angularjs.org/api/ng.filter:date)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-11T16:55:22.893

您可以执行以下操作：

```
<input ui-date="{ project.date | date : 'medium'}" ui-date-format ng-model="project.date" /> 
```

在你的 html 标签或你的 ctrl

```
$scope.today = $filter('date')(project.date,''MMM d, y h:mm:ss a''); 
```

确保您依赖注入`$filter`到您的 ctrl

[在这里查看更多日期格式](http://docs.angularjs.org/api/ng.filter%3adate)

# ios - UIView animateWithDuration 每次都在相同的位置

> ID：15751675
> 
> 赞同：-1
> 
> 时间：2013-04-01T20:51:45.900
> 
> 标签：ios, objective-c, cocoa-touch, uiview, uiviewanimation

我有一个名为 logoview 的 UIView。

```
[logoview setCenter:CGPointMake(100,100)];
    [UIView animateWithDuration:4
                          delay:1
                        options: (UIViewAnimationOptionCurveLinear | UIViewAnimationOptionAllowUserInteraction)
                     animations:^{
                         [logoview setCenter:CGPointMake(0, 3232)];

                     }
                     completion:^(BOOL finished) {
                     }]; 
```

我正在尝试使用上面的代码对其进行动画处理。它导致对象每次从左上角移动到中心。无论我在动画部分使用什么线......我正在使用情节提要。

我的最终目标是简单地在中心显示徽标。然后像在 Skype 上一样升起徽标，然后 facebook 登录显示登录字段。但是，无论我提出什么价值观

```
[logoview setCenter:CGPointMake(0, 3232)]; 
```

它只是去中心。

我也刚试过：

```
[UIView animateWithDuration:4
                          delay:1
                        options: (UIViewAnimationOptionCurveLinear | UIViewAnimationOptionAllowUserInteraction)
                     animations:^{
                         [logoview setTransform: CGAffineTransformMakeTranslation(0, -80)];

                     }
                     completion:^(BOOL finished) {
                     }]; 
```

这可以提升 logoview，但它也会将其抵消很多......使它偏离中心。

整个.m

```
//
//  ViewController.m
//  Couple
//
//  Created by Michael Latman on 4/1/13.
//  Copyright (c) 2013 Michael Latman. All rights reserved.
//

#import "ViewController.h"
#import <QuartzCore/QuartzCore.h>

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    //Rounded corners!
    self.view.layer.cornerRadius = 10;
    self.view.layer.masksToBounds = YES;
    //lol.layer.cornerRadius = 90;
    //lol.layer.masksToBounds = YES;
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    //[logoview setCenter:CGPointMake(100,100)];
    [UIView animateWithDuration:4
                          delay:1
                        options: (UIViewAnimationOptionCurveLinear | UIViewAnimationOptionAllowUserInteraction)
                     animations:^{

                         [logoview setCenter:CGPointMake(0, 1)];

                     }
                     completion:^(BOOL finished) {
                     }];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T21:21:48.293

嗯，一个问题是`viewDidLoad`太快了。你至少要等到`viewDidAppear`。你的界面还没有真正的大小`viewDidLoad`。所发生的只是你的视图控制器*有*一个视图；该视图甚至还没有在界面中，更不用说对用户可见了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:18:53.650

像这样的东西？

```
[UIView animateWithDuration:4.0 delay:1.0 options:(UIViewAnimationOptionCurveLinear | UIViewAnimationOptionAllowUserInteraction) animations:^{
    [logoview setCenter:CGPointMake(logoview.center.x, logoview.center.y - 80.0)];
} completion:nil]; 
```

# button - Actionscript：我正在尝试通过按键而不是鼠标单击来使用 actionscript 按钮

> ID：15751677
> 
> 赞同：0
> 
> 时间：2013-04-01T20:51:52.143
> 
> 标签：button, actionscript, keypress

这是一闪而过。我有一堆按钮，一旦我按下相应的键，我就想对其进行动画处理。每个按钮都有“上”、“上”、“下”和“命中”状态。

我得到的错误是：

> 通过静态类型 Class 的引用启用对可能未定义属性的访问。我认为我调用“Pad7”的方式有问题，它是一个类名为“Pad7”的按钮。

这是我的代码

```
stage.addEventListener(KeyboardEvent.KEY_DOWN, fl_KeyboardDownHandler);

    function fl_KeyboardDownHandler(event:KeyboardEvent):void
    {
            Pad7.enabled = false;
            if (event.keyCode == 81)
            {
                    trace("Q");
                    Pad7.enabled = true;
                    //Pad7.gotoAndPlay();
            }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:33:34.537

看起来你有一个名为 Pad7 的类，然后你也有一个名为 Pad7 的类的实例。至少确保您的 Pad7 实例被命名为您可以访问的名称。您可能打算做类似的事情：

```
var myPad7Instance:Pad7;
function myInitFunction():void {
    myPad7Instance = new Pad7();
    stage.addEventListener(KeyboardEvent.KEY_DOWN, fl_KeyboardDownHandler);
}

function fl_KeyboardDownHandler(event:KeyboardEvent):void
{
        myPad7Instance.enabled = false;
        if (event.keyCode == 81)
        {
                trace("Q");
                myPad7Instance.enabled = true;
                //myPad7Instance.gotoAndPlay();
        }

} 
```

# c++ - 可变参数模板：生成一对相邻元素的元组

> ID：15751681
> 
> 赞同：9
> 
> 时间：2013-04-01T20:52:09.477
> 
> 标签：c++, templates, c++11, variadic-templates

我的目标是做一些事情，例如，

```
pairs<1,2,3,4>() 
```

有返回类型

```
std::tuple<some_other_type<1,2>, some_other_type<2,3>, some_other_type<3,4>> 
```

我想知道这是否可以通过 C++ 模板元编程实现，以及如何实现。对于实际产生的值，似乎我可以使用 tuple_cat 递归连接到输出，但我发现很难表达返回类型，因为它本身是可变参数并且有效地是模板参数数量的函数。使情况复杂化的是，如果我走 tuple_cat 路线，似乎我还必须重载函数以将元组连接到，并且连接将在运行时发生，而不是在编译时发生。我在这里是在追逐野鹅吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-01T21:01:43.050

这是一种方法。给定您的课程模板`some_other_type`：

```
template<int I, int J>
struct some_other_type { }; 
```

并给出一些隐藏在`detail`命名空间中的机器：

```
namespace detail
{
    template<int... Is>
    struct pairs { };

    template<int I, int J>
    struct pairs<I, J> 
    { 
        using type = std::tuple<some_other_type<I, J>>; 
    };

    template<int I, int J, int... Is>
    struct pairs<I, J, Is...>
    {
        using type = decltype(std::tuple_cat(
                std::tuple<some_other_type<I, J>>(),
                typename pairs<J, Is...>::type()));
    };
} 
```

您可以提供一个简单的函数来实例化帮助类模板：

```
template<int... Is>
typename detail::pairs<Is...>::type pairs()
{
    return typename detail::pairs<Is...>::type();
} 
```

以下是您将如何使用它（和一个测试用例）：

```
#include <type_traits>

int main()
{
    auto p = pairs<1, 2, 3, 4>();

    // Won't fire!
    static_assert(
        std::is_same<
            decltype(p),
            std::tuple<
                some_other_type<1,2>,
                some_other_type<2,3>,
                some_other_type<3,4>>
            >::value,
            "Error!");
} 
```

最后，这是一个[活生生的例子](http://liveworkspace.org/code/48Ihhx$245)。

* * *

**改进：（**为什么*要`<1, 2, 3, 4>`在可以写的时候写`<1, 5>`*）？

也可以扩展上述解决方案，这样就不需要手动将最小值和最大值之间的每个数字作为模板参数写入`pairs()`. 鉴于下面的附加机制，再次隐藏在`detail`命名空间中：

```
namespace detail
{
    template <int... Is>
    struct index_list { };

    template <int MIN, int N, int... Is>
    struct range_builder;

    template <int MIN, int... Is>
    struct range_builder<MIN, MIN, Is...>
    {
        typedef index_list<Is...> type;
    };

    template <int MIN, int N, int... Is>
    struct range_builder : public range_builder<MIN, N - 1, N - 1, Is...>
    { };

    // Meta-function that returns a [MIN, MAX) index range
    template<int MIN, int MAX>
    using index_range = typename range_builder<MIN, MAX>::type;

    template<int... Is>
    auto pairs_range(index_list<Is...>) -> decltype(::pairs<Is...>())
    {
        return ::pairs<Is...>();
    }
} 
```

可以定义一个辅助函数`pairs_range()`，它接受定义范围的 2 个模板参数`[begin, end)`- 其中`end`不包括在标准库的样式中：

```
template<int I, int J>
auto pairs_range() -> decltype(pairs_range(detail::index_range<I, J>()))
{
    return pairs_range(detail::index_range<I, J>());
} 
```

这就是使用它的方式（包括一个测试用例）：

```
int main()
{
    // Won't fire!
    static_assert(
        std::is_same<
            decltype(pairs_range<1, 5>()),
            decltype(pairs<1, 2, 3, 4>())
            >::value,
            "Error!");
} 
```

再一次，这是一个[活生生的例子](http://liveworkspace.org/code/48Ihhx$244)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-01T21:11:01.293

这是我的版本（[住在这里](http://liveworkspace.org/code/5oS1K%2412)），100% 编译时，将新参数列表作为类型返回（不是函数返回）：

首先，让我们定义我们的结果结构：

```
template<int a, int b>
struct tpair
{
};

template<typename... p>
struct final_
{
}; 
```

关键点是连接参数包。这是完成这项工作的结构：

```
template<typename a, typename b>
struct concat
{
};

template<typename a, typename... b>
struct concat<a, final<b...>>
{
   typedef final_<a,b...> type;
}; 
```

现在，该结构用于“配对”您的列表。通常它会因奇数个值而失败：

```
template<int a, int b, int... values>
struct pairize
{
   // Choose one of the following versions:
   // First version: only non-overlapping pairs : (1,2) (3,4) ...
   typedef typename concat<tpair<a,b>, typename pairize<values...>::type>::type type;
   // Second version: overlapping pairs : (1,2) (2,3) (3,4)...
   typedef typename concat<tpair<a,b>, typename pairize<b,values...>::type>::type type; 
};

template<int a, int b>
struct pairize<a,b>
{
   typedef final_<tpair<a,b>> type; 
}; 
```

在现场示例中，还有一个代码将参数包中的所有类型的名称输出到控制台，并进行了拆解，作为测试[^(（使用起来比不完整的类型技巧更有趣）)]。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-01T22:10:53.927

现在，让我们尝试使用`indices`和不使用递归（当然，索​​引除外）：

```
#include <tuple>

template< std::size_t... Ns >
struct indices
{
    typedef indices< Ns..., sizeof...( Ns ) > next;
};

template< std::size_t N >
struct make_indices
{
    typedef typename make_indices< N - 1 >::type::next type;
};

template<>
struct make_indices< 0 >
{
    typedef indices<> type;
};

template< std::size_t, std::size_t >
struct sometype {};

template< typename, typename, typename >
struct make_pairs;

template< std::size_t... Ns, std::size_t... Ms, std::size_t... Is >
struct make_pairs< indices< Ns... >, indices< Ms... >, indices< Is... > >
{
  using type = decltype( std::tuple_cat(
    std::declval< typename std::conditional< Is % 2 == 1,
                                             std::tuple< sometype< Ns, Ms > >,
                                             std::tuple<> >::type >()...
  ));
};

template< std::size_t... Ns >
using pairs = typename make_pairs< indices< 0, Ns... >, indices< Ns..., 0 >,
                typename make_indices< sizeof...( Ns ) + 1 >::type >::type;

int main()
{
  static_assert( std::is_same< pairs<1,2,4,3,5,9>,
    std::tuple< sometype<1,2>, sometype<4,3>, sometype<5,9> > >::value, "Oops" );
} 
```

（好吧，我作弊了一点：`std::tuple_cat`可能本身就是递归的；）

* * *

**更新：**好的，我应该更仔细地阅读这个问题。这是产生所需结果的版本（`indices`/`make_indices`如上所述）：

```
template< std::size_t, std::size_t >
struct sometype {};

template< typename, typename, typename >
struct make_pairs;

template< std::size_t... Ns, std::size_t... Ms, std::size_t... Is >
struct make_pairs< indices< Ns... >, indices< Ms... >, indices< Is... > >
{
  using type = decltype( std::tuple_cat(
    std::declval< typename std::conditional< Is != 0 && Is != sizeof...( Is ) - 1,
                                             std::tuple< sometype< Ns, Ms > >,
                                             std::tuple<> >::type >()...
  ));
};

template< std::size_t... Ns >
using pairs = typename make_pairs< indices< 0, Ns... >, indices< Ns..., 0 >,
                typename make_indices< sizeof...( Ns ) + 1 >::type >::type;

int main()
{
  static_assert( std::is_same< pairs<1,2,3,4>,
    std::tuple< sometype<1,2>, sometype<2,3>, sometype<3,4> > >::value, "Oops" );
} 
```

# c# - 来自基本类型的动作泛型

> ID：15751684
> 
> 赞同：2
> 
> 时间：2013-04-01T20:52:37.903
> 
> 标签：c#, generics

我想要一个`IEnumerable<Action<T>> subscriptions`这是一个动作数组，每个动作都有不同的类型参数 - 我想将一个列表传递给服务构造函数以循环遍历这些并注册，但编译器抱怨（不足为奇）。

有没有办法实现传递具有派生特定实现的基类型并循环遍历列表的能力？

```
class InternalBusService
{
    private InternalBus bus;

    public InternalBusService(IEnumerable<Action<T>> subscriptions)
    {
        foreach (var subscription in subscriptions)
        {
            this.bus.Subscribe<T>(subscription);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:55:44.137

你的意思是这样吗？

```
class InternalBusService<T>
    where T : SomeType
{
    public InternalBusService(IEnumerable<Action<T>> subscriptions)
    {
        foreach (var subscription in subscriptions)
        {
            this.bus.Subscribe<T>(subscription);
        }
    }
} 
```

`where T : SomeType`可以是您想要限制`T`的任何类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T21:07:14.600

如果我知道您想传入`IEnumerable<Action<T>>`其中 T 用于可枚举中的每个操作不是同一类型，那么您这样做是不可能的。

也许你可以做一些像下面这样的“概念代码”（意思是它只是为了告诉你我在想什么，它不一定是一个解决方案）。

```
public interface IActionWrapper
{

    bool AcceptsParameterType(Type t);
    void PerformAction(object o);
}

public class ActionWrapper<T> : IActionWrapper
{
    Action<T> yourAction {get;set;}

    public bool AcceptsParameterType(Type t)
{
return t is T;
}

public void PerformAction(object o)
{
  yourAction((T)o);
}

} 
```

然后你可以传入`IEnumerable<IActionWrapper>>`你的函数，它不是泛型类型的，并且通过它的实现来支持多种类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T20:56:02.850

我想我知道你的意思。看看这里。

[http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx](http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T20:56:25.523

解决编译器错误：

```
class InternalBusService<T>
{
    public InternalBusService(IEnumerable<Action<T>> subscriptions) { }
} 
```

但不确定这是否是您实际想要实现的目标。

# php - PHP回显按钮onclick函数

> ID：15751685
> 
> 赞同：1
> 
> 时间：2013-04-01T20:52:39.827
> 
> 标签：php, button, onclick, html-table, echo

对于一个小的“网上商店项目”，我使用 PHP 和 echo“...”函数创建了一个表。该表显示了一些值，在最后一个单元格中，应该有一个按钮，使用户能够删除相应的行（或者更好地说，购买）。数据保存在数据库中，并在页面加载时读出，然后显示在表中。

我使用“购买 ID”来找出必须删除哪些行，如果我只实现函数本身，它就可以正常工作。问题是我无法让该功能作为按钮的“onclick”事件工作。

所以，一些代码：

```
function delete_purchase($purchase_id){
mysql_query("DELETE FROM purchase WHERE purch_id = '$purchase_id'");}; 
```

那是删除行的PHP函数，很简单。

```
$result = mysql_query("SELECT purchase.purch_id, item.name, purchase.amount, purchase.purch_date, delivery.meaning, item.weight FROM purchase, item, delivery WHERE purchase.cust_id='$cust_id' AND delivery.del_id = purchase.delivered AND purchase.item_id = item.item_id");

while($row = mysql_fetch_array($result))
    {
    echo "<tr>";
    echo "<td>" . $row['name'] . "</td>";
    echo "<td>" . $row['amount'] . "</td>";
    echo "<td>" . $row['weight'] * $row['amount'] . "</td>";
    echo "<td>" . $row['purch_date'] . "</td>";
    echo "<td>" . $row['meaning'] . "</td>";
    echo "<td><button onclick=\"delete_purchase('" . $row['purch_id'] . "')\">Kill</button></td>";
    echo "</tr>";
    } 
```

这是似乎不起作用的部分。只要有值，我就从数据库中获取变量和其他一些值并将它们插入到我的表中。一切都显示出来了，甚至是按钮；但点击它们不会做任何事情。

该网站的源代码似乎很好：

```
<td><button onclick="delete_purchase('138')">Kill</button></td> 
```

希望一切都清楚，你们有一些想法是什么问题。如果您需要了解其他内容，请询问，我会看看我能做些什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T20:55:52.180

```
onclick="delete_purchase('138')" 
```

调用一个名为 的 Javascript 函数`delete_purchase`，您的代码中似乎不存在该函数。您只有一个具有该名称的 PHP 函数。

由于所有 PHP 都在服务器端执行，HTML 将在客户端看到代码之前很久就构建好，因此您将永远无法`delete_purchase`从客户端调用 PHP 函数。

解决此问题的唯一两种方法是： - 创建一个`delete_purchase`JS 函数，然后通过使用 AJAX 调用 PHP 文件。- 根本不调用`onclick`JS 函数并将按钮设置为常规表单提交，然后您在服务器端捕获以删除购买。然而，这将涉及完整的页面刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:56:22.560

您的`delete_purchase()`功能在服务器端定义，在客户端不可用。您需要向服务器发送请求并发送 id，例如：

```
?action=delete&id=1 
```

然后你可以在服务器端验证它并调用函数

```
<?php
if(isset($_GET['action']) && $_GET['action'] == 'delete'){
 //do some staff
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T20:56:36.407

您尝试直接从 HTML（从浏览器）调用 PHP 函数

这是不可能的！

您可以使用 2 种方式调用它：

1) php-script 的 AJAX 调用将删除购买

2）将浏览器重定向到php-script，这将删除购买，然后将您重定向回来

# android - YouTube Android 应用中的 VideoView 或 WebView

> ID：15751689
> 
> 赞同：1
> 
> 时间：2013-04-01T20:52:47.023
> 
> 标签：android

现在这是一个非常愚蠢的！请原谅我这个问题，但我真的不知道答案。我的问题是 Youtube 用什么来在他们的 Android 应用程序中播放视频？我的意思是它是一个 WebView 还是一个简单的 VideoView？我使用 VideoView 从与它们关联的 URL 播放视频，但它看起来不如 YouTube 的 VideoView（或其他任何东西）

除了使用下面的代码之外，还有其他选项可以从 URL 播放视频吗？因为它只是在本机视频播放器中播放视频。如果下图中红色标记的部分是一个VideoView，它比普通的VideoView看起来更好吗？或者它是一个WebView？哪一个是从 URL 播放视频的更好选择（就 UI 而言）？我正在使用 GingerBread 并想在 VideoView 或 WebView 中播放 mp4 或 .flv 视频（以更好的选择为准，最好像 Android 的 YouTube 应用程序）

```
Uri data = Uri.parse(movieurl); 
intent.setDataAndType(data,"video/3gpp"); 
startActivity(intent); 
```

![](https://i.stack.imgur.com/CTrZW.jpg)

# node.js - Sublime 2 文本 - 在保存 .js 文件期间构建

> ID：15751691
> 
> 赞同：3
> 
> 时间：2013-04-01T20:52:49.373
> 
> 标签：node.js, sublimetext2

请问，当我尝试保存 .js 文件时，是否有一个选项，如何禁用自动构建？

我正在制定一个 node.js + express 教程，并且一直保存文件，构建正在启动 node.exe 二进制文件，我不想要什么，唯一的解决方案是例如勾选构建系统对于 JSLint，但在我保存文件时它仍会尝试构建。

我知道工具中有一个勾选选项 - >在构建时全部保存，但我找不到相反的选项 - 在保存时禁用全部构建。

我已经为 Sublime 2 安装了 Node 包，即使它禁用了构建系统 Nodejs 在保存过程中尝试构建（ctrl+s）

感谢所有提示！

这是我的自定义用户包：

"installed_pa​​ckages": [ "Dart", "JavaScript Console", "JavaScript Snippets", "JSLint", "Mocha Runner", "Mocha Snippets", "Nodejs", "Package Control", "Require Node.js Modules Helper" ，“崇高-jslint”]，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:54:29.493

这个问题是由 sublime text 2 的 nodejs 包引起的 - 在完全删除包后（不仅仅是禁用）我在尝试保存 app.js 时收到错误消息

> 按下 CTRL+S 错误：尝试解析构建系统时出错：C:\Users\username\AppData\Roaming\Sublime Text 2\Packages\Nodejs\Nodejs.sublime-build:1:1 中没有数据

问题解决了，但我还是不知道，为什么 sublime 在保存 app.js 文件后直接调用 nodejs.sublime-build 。

奇怪的行为，可能是错误或不需要的功能（保存文件时，保存后直接调用预设的构建系统）

通过删除整个包装解决了问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T21:13:34.270

如果您转到`Tools`菜单，该选项旁边是否`Build`有快捷方式？`Ctrl-S`如果是这样，您的键映射可能在某个时候搞砸了。将以下行放入您的`Key Bindings - User`文件（在`Preferences`菜单中）并通过选择保存它`File -> Save`（仔细检查其快捷方式是否仍然存在`Ctrl-S`）。

```
{ "keys": ["ctrl+b"], "command": "build" }, 
```

如果它是用户键盘映射中的最后（或唯一）行，请删除`,`末尾的。

您可以访问`Preferences -> Package Settings`并浏览每个条目的菜单选项，以查找其他键盘映射定义。另外，检查`Preferences -> Key Bindings (Default)`并搜索`build`以查看它是否已更改为`ctrl+s`. 如果是这样，请随时将其更改回`b`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T01:47:20.197

您是否验证过“保存”实际上正在运行`ctrl+s`？如果没有，请打开控制台`ctrl+backtick`并输入`sublime.log_commands(True)`然后按`ctrl+s`如果正在运行保存，您应该会看到`command: save`. 如果不是，则其中一个插件会在`ctrl+s`键绑定回退到默认值之前对其进行抓取。

如果保存正在运行，则插件中的一个可能有一个`on_post_save`或`on_pre_save`侦听器正在启动构建。我检查了我认为最有可能的内容（Mocha Runner），它确实有一个`on_post_save`监听器。我不知道这是否是你所看到的，但它肯定会解释它。尝试禁用插件并重新运行保存以查看是否是这种情况。如果是这样，您可能想在任何插件上创建一个问题，要求他们将“保存时构建”设为可选。

# ruby - 设置几个具有相同值但不同键的哈希参数

> ID：15751693
> 
> 赞同：4
> 
> 时间：2013-04-01T20:53:08.073
> 
> 标签：ruby

我的应用程序中有一个结构，我需要这样的哈希：

`{ 1 => [6,2,2], 2 => [7,4,5], (3..7) => [7,2,1] }`

所以我希望键 3、4、5、6 和 7 具有相同的值。
当然上面的示例不起作用，因为 Ruby 是智能的并且将哈希键设置为给定：它将范围设置为键:) 所以我只能访问我作为`my_hash[(3..7)]`和`my_hash[3]`等`my_hash[4]`的值为零。
当然我可以在散列之外进行检查或构造来做我需要的事情，但是我很好奇是否可以在不使用散列声明之外的任何循环的情况下设置这样的散列？如果不是，什么是最优雅的？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T21:16:48.707

您可以进行子类化`Hash`以更轻松地构建此类哈希：

```
class RangedHash < Hash
  def []=(key, val)
    if key.is_a? Range
      key.each do |k|
        super k, val
      end
    else
      super key, val
    end
  end
end 
```

它的工作原理与普通哈希相同，除了使用 Range 键时，它会在 Range 中的每个点设置给定值。

```
irb(main):014:0> h = RangedHash.new
=> {}
irb(main):015:0> h[(1..5)] = 42
=> 42
irb(main):016:0> h[1]
=> 42
irb(main):017:0> h[5]
=> 42
irb(main):018:0> h['hello'] = 24
=> 24
irb(main):019:0> h['hello']
=> 24 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T21:17:08.253

这有什么特别不对劲的吗？

```
myhash = { 1 => [6,2,2], 2 => [7,4,5] }
(3..7).each { |k| myhash[k] = [7,2,1] } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-01T21:10:20.160

我不认为有一种方法可以使用文字哈希语法或不进行一些迭代来设置多个键，但这里有一个通过迭代来完成的简单方法：

```
irb(main):007:0> h = { 1 => [6,2,2], 2 => [7,4,5] }; (3..7).each {|n| h[n] = [7,2,1]}; h
=> {1=>[6, 2, 2], 2=>[7, 4, 5], 3=>[7, 2, 1], 4=>[7, 2, 1], 5=>[7, 2, 1], 6=>[7, 2, 1], 7=>[7, 2, 1]} 
```

（请注意，尾随`; h`仅用于上面的显示目的。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-02T00:37:23.040

我不喜欢为范围内的每个可能条目创建单独的键/值对的想法。它根本不可扩展，尤其是对于广泛的范围。考虑这个小范围：

```
'a' .. 'zz' 
```

这将导致 702 个额外的密钥。尝试`('a'..'zz').to_a`乐趣。前进。我会等。

拦截查找，而不是创建密钥。重用`RangedHash`类名：

```
class RangedHash < Hash
  def [](key)
    return self.fetch(key) if self.key? key

    self.keys.select{ |k| k.is_a? Range }.each do |r_k|
      return self.fetch(r_k) if r_k === key
    end

    nil
  end
end

foo = RangedHash.new
foo[1]    = [6,2,2]
foo[2]    = [7,4,5]
foo[3..7] = [7,2,1] 
```

此时`foo`看起来像：

```
{1=>[6, 2, 2], 2=>[7, 4, 5], 3..7=>[7, 2, 1]} 
```

测试方法：

```
require 'pp'
3.upto(7) do |i|
  pp foo[i]
end 
```

哪个输出：

```
[7, 2, 1]
[7, 2, 1]
[7, 2, 1]
[7, 2, 1]
[7, 2, 1] 
```

对于范围内的任何值，这将输出与该范围关联的值。超出范围但仍定义在散列中的值正常工作，返回`nil`散列中不存在的键也是如此。并且，它使散列尽可能小。

不利的一面是，或任何问题的解决方案是范围内的键可能重叠，从而导致冲突。在大多数提议的解决方案中，键会相互踩踏，这将/可能最终返回错误的值。此方法不会这样做，因为覆盖范围键需要直接冲突。

要解决此问题，需要确定是否允许重叠，如果允许，是否可以返回找到的第一个重叠，或者是否存在确定“最佳拟合”的逻辑，即适合的最小范围，或者一些完全其他标准。或者，如果值相同，是否应该加入重叠以形成更大的范围？这是一罐蠕虫。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-01T21:19:21.540

[直接修补哈希，但与卢克的](https://stackoverflow.com/users/394282/luke)想法相同......

```
class Hash
  alias_method :orig_assign, '[]='
  def []= k, v
    if k.is_a? Range
      k.each { |i| orig_assign i, v }
      v
    else
      orig_assign k, v
    end
  end
end

t = {}
t[:what] = :ever
t[3..7] = 123
p t # => {5=>123, 6=>123, 7=>123, 3=>123, 4=>123, :what=>:ever} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-01T21:19:26.823

这里还有一些方法：

```
h = { 1 => [6,2,2], 2 => [7,4,5], (3..7) => [7,2,1] } 

def my_hash(h,y)
  h.keys.each do |x|
    if (x.instance_of? Range) and (x.include? y) then
      return p h[x]
    end
  end
p h[y]
end

my_hash(h,2)
my_hash(h,3)
my_hash(h,1)
my_hash(h,10)
my_hash(h,5)
my_hash(h,(3..7)) 
```

*输出：*

```
[7, 4, 5]
[7, 2, 1]
[6, 2, 2]
nil
[7, 2, 1]
[7, 2, 1] 
```

# jquery - Jquery验证输入字段onkeyup然后在单击按钮时执行功能

> ID：15751695
> 
> 赞同：-2
> 
> 时间：2013-04-01T20:53:21.793
> 
> 标签：jquery, jquery-validate

我到处搜索，但似乎找不到解决方案。我正在尝试创建一个表单，其中它有 3 个字段集，一次只有一个字段集可见。我有 onkeyup 验证工作，如下所示：

```
$("#contactInfoForm").validate({
        debug:true,
        onkeyup: false,
        rules: {
        firstName: {
           required: true,
           loginRegex: true,
           minlength: 2
        },
        lastName: {
            required: true,
            minlength: 2
        },
        Email:{
            required: true,
            email: true
        },
        Email_confirm:{
            required: true,
            email: true,
            equalTo: "#Email"
        },
        streetAddressBilling:{
            required: true,
            minlength: 3
        },
        billingCity:{
            required: true,
            digits: true,
            minlength: 3
        },
        state:{
            required: true
        },
        zip:{
            required: true,
            digits: true,
            minlength: 3
        },
        phone:{
            required: true,
            digits: true,
            minlength: 3,
            phoneUS: true,
        },
        prefix:{
            required: true,
            digits: true,
            minlength: 3
        },
        landline:{
            required: true,
            digits: true,
            minlength: 4
        }
    },//end of rules
        groups: {
        DateofBirth: "phone prefix landline"
    },
            errorPlacement: function(error, element) {
        if (element.attr("name") == "phone" || element.attr("name") == "prefix" || element.attr("name") == "landline") 
            error.insertAfter("#landline");
        else 
            error.insertAfter(element);
    },
        messages:{
        firstName: {
            required: "Please enter first name",
            lettersonly: "No numbers please",
            loginRegex: "Login format not valid",
            minlength: "Use at least 2 letters"
        },
        lastName: {
            required: "Please enter last name",
            lettersonly: "No numbers please",
            minlength: "Use at least 2 letters"
        },
        Email: {
            required: "Please enter your email",
            email: "Please enter a valid email address"
        },
        Email_confirm: {
            required: "Please enter your email",
            email: "Please enter a valid email address",
            equalTo: "Email addresses do not match"
        },
        streetAddressBilling:{
            required: "Please enter your street address",
                minlength: "Use at least 3 letters"
        },
        billingCity:{
            required: "Please enter your city",
            minlength: "Use at least 3 letters"
        },
        state:{
            required: "Please select your state."
        },
        zip:{
            required: "Please enter your zip code",
            digits: "Please only use numbers",
            minlength: "Use at least 5 letters"
        },
        phone:{
            required: "Please enter your phone number",
            digits: "Please only use numbers",
            minlength: "Use 3 numbers"
        },
        prefix:{
            required: "Please enter your phone number",
            digits: "Please only use numbers",
            minlength: "Use 3 numbers"
        },
        landline:{
            required: "Please enter your phone number",
            digits: "Please only use numbers",
            minlength: "Use 4 numbers"
        }
    }//end of messages  
    });//end of contact info form validation rules 
```

我要做的下一件事是在每个字段集的末尾有一个继续按钮。该按钮应该检查该字段集中的表单，如果它们被验证，则打开下一个字段集。以下是字段集的 HTML：

```
 <form onsubmit="return submitForm(this)" method="post" id="contactInfoForm" name="contactInfoForm" action="#">
      <fieldset>
        <legend class="accessible-text">Address</legend>
        <ol>
          <li class="fullInput">
            <label id="caption_address1" for="address1">
              Address
            </label>
            <input type="text" autocomplete="off" aria-required="true" placeholder="Street Address" class="fullInput" maxlength="30" id="address1" name="address1">
          </li>
          <li class="no-label fullInput">
            <label class="accessible-text" id="caption_address2" for="address2">
              Billing Address Line 2
            </label>
            <input type="text" maxlength="40" autocomplete="off" aria-required="false" placeholder="Street Address Line 2(Optional)" class="fullInput" id="address2" name="address2">
          </li>
          <li class="no-label">
            <label class="accessible-text" id="caption_city" for="city">
              City
            </label>
            <input type="text" aria-required="true" placeholder="City" maxlength="30" id="city" name="city">
          </li>
          <li class="no-label">
            <label class="accessible-text" id="caption_state" for="state">
              State
            </label>
            <select aria-required="true" class="required" name="state" id="state">
              <option value="">State</option>
            </select>
          </li>
          <li class="no-label">
            <label class="accessible-text" id="caption_zipCode" for="zipCode">
              ZIP
            </label>
            <input type="text" autocomplete="off" aria-required="true" placeholder="20151" name="zipCode" id="zipCode" maxlength="5">
          </li>
          <li>
            <label class="fullInput" id="caption_phone" for="phone">
              Main Contact Number <a href="">Why we need this</a><br>
              <span class="accessible-text">Please enter your area code</span>
            </label>
            <input type="text" autocomplete="off" aria-required="true" placeholder="703" name="phone" id="phone" maxlength="3">
            <label class="accessible-text" id="caption_prefix" for="prefix">
              Enter the next 3 numbers
            </label>
            <input type="text" autocomplete="off" aria-required="true" placeholder="555" name="prefix" id="prefix" maxlength="3">
            <label class="accessible-text" id="caption_landline" for="landline">
              Enter the last 4 numbers
            </label>
            <input type="text" autocomplete="off" aria-required="true" placeholder="5555" name="landline" id="landline" maxlength="4">
          </li>
        </ol>
      </fieldset>
    </form> 
```

这是按钮的 JS，我使用 jquery ui 进行褪色：

```
$("#button").on("click", function(event){
    if($('#contactInfoForm').validate({
    rules: {
        firstName: {
           required: true,
           loginRegex: true,
           minlength: 2
        },
        lastName: {
            required: true,
            minlength: 2
        },
        Email:{
            required: true,
            email: true
        },
        Email_confirm:{
            required: true,
            email: true,
            equalTo: "#Email"
        },
        streetAddressBilling:{
            required: true,
            minlength: 3
        },
        billingCity:{
            required: true,
            digits: true,
            minlength: 3
        },
        state:{
            required: true
        },
        zip:{
            required: true,
            digits: true,
            minlength: 3
        },
        phone:{
            required: true,
            digits: true,
            minlength: 3,
            phoneUS: true,
        },
        prefix:{
            required: true,
            digits: true,
            minlength: 3
        },
        landline:{
            required: true,
            digits: true,
            minlength: 4
        }
    },//end of rules
    }))
{ //checks if it's valid
        if($(this).valid()) {
            $('#about_you_ver2').toggleClass("mod");
            $('#nameFieldsetEdit').toggleClass("hide");
            $('#name').fadeOut('xslow', function(){
                //$(this).effect("highlight", {}, 2000);
            }),
            $('#billing_address').fadeIn('xslow', function(){
                //$(this).effect("highlight", {}, 2000);
            }),
            $('#billing_container p').fadeIn('xslow', function(){
                //$(this).effect("highlight", {}, 2000);
            })
        }//end of valid direction
    }
    else{
        alert("I'm not valid");
    }
});//end of onclick for button 
```

在单击按钮而不输入任何信息时，我被困在表单通过验证的地方。我怎样才能完成这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T00:48:41.697

你的代码确实比我想在这里使用的要多，但我会指出你的一些错误并提供一个简单的演示。

*   关于你的`if($('#contactInfoForm').validate(`线。 `.validate()`是插件的*初始化*，而不是用来测试表单有效性的方法。相反，`.validate()`应该在 DOM 就绪事件处理程序中调用*一次。*然后，一旦初始化，表单就会使用其各种内置事件处理程序自动进行测试。也可以使用该`.valid()`方法以编程方式测试表单。

*   您不需要`click`处理程序。按钮的`click`事件`submit`由插件自动捕获。

*   关于您的内联`onsubmit="return submitForm(this)"`代码。jQuery 使所有内联 JavaScript 都过时了。不仅如此，`onsubmit`当`.validate()`插件已经`submitHandler`内置了一个非常好的插件时使用它是没有意义的。

*   `onkeyup: false`将*禁用*任何实时击键验证。默认情况下，插件将在每次击键时进行验证，因此只需将该选项排除在初始化之外以保持启用该功能。

以下是我将如何构建带有验证的多步骤表单。

1）将每个标签放在`<fieldset>`自己独特的`<form>`标签集中。

2)`.validate()`在每个`<form>`. 这样，您还可以在其自己的`.validate()`初始化函数中逻辑地组织每个步骤的规则。

3）`submitHandler`在每个实例中使用回调`.validate()`来隐藏成功验证后的特定步骤，然后显示下一个表单。`submitHandler`唯一会在 有效时触发，因此`form`您的大量条件代码都已过时。

**工作演示：http: [//jsfiddle.net/wqjnn/](http://jsfiddle.net/wqjnn/)**

**HTML**：

```
<form id="myform1">
    <h1>Step 1</h1>
    <input type="text" name="field1" />
    <input type="submit" value="go to step 2" />
</form>

<form id="myform2">
    <h1>Step 2</h1>
    <input type="text" name="field2" />
    <input type="submit" value="go to step 3" />
</form>

<form id="myform3">
    <h1>Step 3</h1>
    <input type="text" name="field3" />
    <input type="submit" />
</form> 
```

**jQuery** :

```
$(document).ready(function () {

    $('#myform1').validate({
        // your rules for step 1 fields,
        submitHandler: function (form) {
            $(form).hide(function () { // hide this step
                $('#myform2').show();  // show step 2
            });
            return false;
        }
    });

    $('#myform2').validate({
        // your rules for step 2 fields,
        submitHandler: function (form) { 
            $(form).hide(function () { // hide this step
                $('#myform3').show();  // show step 3
            });
            return false;
        }
    });

    $('#myform3').validate({
        // your rules for step 3 fields,
        submitHandler: function (form) {
            var data1 = $('#myform1').serialize();
            var data2 = $('#myform2').serialize();
            var data3 = $(form).serialize();
            var data = data1 + "&" + data2 + "&" + data3; // concatenate data from all forms
            // alert(data);
            // your ajax?
            return false; // to block normal form submit if needed
        }
    });

}); 
```

# ruby-on-rails - Ruby on Rails 和 Heroku “应用程序崩溃”

> ID：15751705
> 
> 赞同：1
> 
> 时间：2013-04-01T20:54:18.557
> 
> 标签：ruby-on-rails, heroku, crash

我已经浏览了许多关于这个确切问题的论坛帖子，但我还没有找到解决方案。

**应用程序可以在本地运行，但不能在 Heroku 上运行。**

[http://majorleaguebetting.herokuapp.com/](http://majorleaguebetting.herokuapp.com/)

*我错过了什么？？！！*

**Heroku 日志：**

```
 searoth@searoth-VB:~/Desktop/rails_projects/MajorLeagueBetting$ heroku logs
2013-04-01T20:14:26+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/runner.rb:187:in `run_command'
2013-04-01T20:14:26+00:00 app[web.1]:   from config.ru:1:in `<main>'
2013-04-01T20:14:26+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/controllers/controller.rb:71:in `start'
2013-04-01T20:14:26+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/runner.rb:152:in `run!'
2013-04-01T20:14:26+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/bin/thin:6:in `<top (required)>'
2013-04-01T20:14:26+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `load'
2013-04-01T20:14:26+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `<main>'
2013-04-01T20:14:28+00:00 heroku[web.1]: Process exited with status 1
2013-04-01T20:14:28+00:00 heroku[web.1]: State changed from starting to crashed
2013-04-01T20:24:39+00:00 heroku[web.1]: State changed from crashed to starting
2013-04-01T20:24:42+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -R config.ru -e $RAILS_ENV -p 34898`
2013-04-01T20:24:48+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-04-01T20:24:48+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-04-01T20:24:52+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/app/models/head2head_bet.rb:8:in `<top (required)>'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:236:in `load_dependency'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
2013-04-01T20:24:53+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/dynamic_matchers.rb:55:in `method_missing': undefined local variable or method `current_user' for Head2headBet(Table doesn't exist):Class (NameError)
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/app/models/head2head_bet.rb:12:in `<class:Head2headBet>'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `block in require'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:313:in `depend_on'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:30:in `instance_exec'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:30:in `run'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:359:in `require_or_load'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/engine.rb:436:in `eager_load!'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/engine.rb:436:in `each'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/application/finisher.rb:53:in `block in <module:Finisher>'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:225:in `require_dependency'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/engine.rb:438:in `each'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/engine.rb:438:in `block in eager_load!'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/railtie/configurable.rb:30:in `method_missing'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/application.rb:136:in `initialize!'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:54:in `each'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:54:in `run_initializers'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:55:in `block in run_initializers'
2013-04-01T20:24:53+00:00 app[web.1]:   from config.ru:3:in `require'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `instance_eval'
2013-04-01T20:24:53+00:00 app[web.1]:   from config.ru:3:in `block in <main>'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `initialize'
2013-04-01T20:24:53+00:00 app[web.1]:   from config.ru:1:in `new'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/rack/adapter/loader.rb:33:in `eval'
2013-04-01T20:24:53+00:00 app[web.1]:   from config.ru:1:in `<main>'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/controllers/controller.rb:71:in `start'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/controllers/controller.rb:181:in `load_rackup_config'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/rack/adapter/loader.rb:33:in `load'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `load'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/runner.rb:187:in `run_command'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/runner.rb:152:in `run!'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/bin/thin:6:in `<top (required)>'
2013-04-01T20:24:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `<main>'
2013-04-01T20:24:54+00:00 heroku[web.1]: State changed from starting to crashed
2013-04-01T20:24:54+00:00 heroku[web.1]: Process exited with status 1
2013-04-01T20:34:59+00:00 heroku[web.1]: State changed from crashed to starting
2013-04-01T20:35:01+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -R config.ru -e $RAILS_ENV -p 15944`
2013-04-01T20:35:04+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for mo
re on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-04-01T20:35:04+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-04-01T20:35:08+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/app/models/head2head_bet.rb:12:in `<class:Head2headBet>'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `block in require'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/app/models/head2head_bet.rb:8:in `<top (required)>'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:236:in `load_dependency'
2013-04-01T20:35:08+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/dynamic_matchers.rb:55:in `method_missing': undefined local variable or method `current_user' for Head2headBet(Table doesn't exist):Class (NameError)
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:359:in `require_or_load'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:313:in `depend_on'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:225:in `require_dependency'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/engine.rb:438:in `each'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/engine.rb:438:in `block in eager_load!'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:30:in `instance_exec'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/engine.rb:436:in `eager_load!'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/engine.rb:436:in `each'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/application/finisher.rb:53:in `block in <module:Finisher>'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:30:in `run'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:55:in `block in run_initializers'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:54:in `each'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:54:in `run_initializers'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/application.rb:136:in `initialize!'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/railtie/configurable.rb:30:in `method_missing'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2013-04-01T20:35:08+00:00 app[web.1]:   from config.ru:3:in `require'
2013-04-01T20:35:08+00:00 app[web.1]:   from config.ru:3:in `block in <main>'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `initialize'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `instance_eval'
2013-04-01T20:35:08+00:00 app[web.1]:   from config.ru:1:in `new'
2013-04-01T20:35:08+00:00 app[web.1]:   from config.ru:1:in `<main>'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/rack/adapter/loader.rb:33:in `eval'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/rack/adapter/loader.rb:33:in `load'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/controllers/controller.rb:181:in `load_rackup_config'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/controllers/controller.rb:71:in `start'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/runner.rb:187:in `run_command'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/runner.rb:152:in `run!'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `load'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/bin/thin:6:in `<top (required)>'
2013-04-01T20:35:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `<main>'
2013-04-01T20:35:10+00:00 heroku[web.1]: Process exited with status 1
2013-04-01T20:35:10+00:00 heroku[web.1]: State changed from starting to crashed 
```

**这是宝石文件**

```
source 'http://rubygems.org'

gem 'rails', '3.2.13'
gem 'railties', '3.2.13'
gem 'execjs'
gem 'therubyracer', '0.11.4'
gem 'jquery-rails'
gem 'nokogiri', '1.5.0'
gem "colorbox-rails", "~> 0.0.7"
gem 'formtastic'
gem 'tabletastic'
gem "paperclip", "~> 2.4"
gem 'faker', '0.3.1'
gem 'thin'
gem 'pg'

group :assets do
  gem 'sass-rails'
  gem 'coffee-rails'
  gem 'uglifier'
end

gem 'sqlite3', :group => [:development, :test]

group :development, :test do
  gem 'rspec-rails', '~> 2.6'
  gem 'annotate', :git => 'git://github.com/ctran/annotate_models.git'
end

group :test do
  gem 'rspec-rails', '~> 2.6'
  # Pretty printed test output
  gem 'turn', :require => false
  gem 'factory_girl_rails', '1.0'
end

group :production do
  gem 'thin'
  gem 'pg'
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T20:58:20.030

您似乎忘记了迁移

heroku 运行 rake db:migrate

线索在

```
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/dynamic_matchers.rb:55:in `method_missing': undefined local variable or method `current_user' for Head2headBet(Table doesn't exist):Class (NameError) 
```

2013-04-01T20:24:53+00:00 app[web.1]: 来自 /app/app/models/head2head_bet.rb:12:in `'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T22:16:14.270

Depending on the state of your database you may try any of the following commands

```
heroku run rake db:migrate
heroku run rake db:reset # WARNING DESTRUCTIVE
heroku run rake db:setup # WARNING DESTRUCTIVE 
```

as John Baynon said, the clue is in `table doesnt exist` line

# cuda - 我的 CUDA_NVCC_FLAGS 是否已设置

> ID：15751707
> 
> 赞同：1
> 
> 时间：2013-04-01T20:54:25.743
> 
> 标签：cuda, cmake

我想让 cmake 告诉我我是否`CUDA_NVCC_FLAGS`包含“-arch sm_??”。也就是说，我希望 cmake 告诉我 CC 信息是否已设置。

我如何用 cmake 做到这一点？
如何让 cmake 进行字符串搜索？我需要使用正则表达式吗？

像这样的东西：

```
IF(${CUDA_NVCC_FLAGS} contains "-arch sm_")
  MESSAGE("-arch flag has been set"
ELSE()
  MESSAGE(" CUDA_NVCC_FLAGS: ${CUDA_NVCC_FLAGS}")
  MESSAGE(FATAL_ERROR "Please set the CUDA_NVCC_FLAGS, CC level: -arch sm_??"
ENDIF() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:03:18.360

你想要[`if(<variable|string> MATCHES regex)`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aif "CMake v2.8.10 文档")命令；进行正则表达式匹配：

```
IF(${CUDA_NVCC_FLAGS} MATCHES "-arch sm_") 
```

# asp.net - 搜索 elmah 错误日志文件（可能有 1000 个）

> ID：15751711
> 
> 赞同：5
> 
> 时间：2013-04-01T20:54:30.360
> 
> 标签：asp.net, lucene.net, elmah

我们有一个 XML 格式的 elmah 错误日志文件夹。这些文件数以百万计，每个文件的大小可能高达 50 kb。我们需要能够搜索文件（例如：发生了哪些错误，哪些系统发生了故障等）。我们是否有一个开源系统可以索引文件并可能帮助我们使用关键字搜索文件？我查看了 Lucene.net，但似乎我将拥有应用程序的代码。请指教。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T22:30:55.567

如果您需要将日志保存在 XML 文件夹中，[elmah-loganalyzer](https://github.com/pellehenriksson/elmah-loganalyzer)可能有用。

您还可以使用 Microsoft 的 Log Parser 对 xml 文件执行“类似 sql”的查询：

```
LogParser -i:XML "SELECT * FROM *.xml WHERE detail like '%something%'" 
```

编辑：

您可以使用 nutch+SOLR 或 logstash+Elastic Search 的组合作为索引解决方案。

*   [http://wiki.apache.org/nutch/NutchTutorial](http://wiki.apache.org/nutch/NutchTutorial)
*   [http://lucene.apache.org/solr/tutorial.html](http://lucene.apache.org/solr/tutorial.html)
*   [http://blog.building-blocks.com/building-a-search-engine-with-nutch-and-solr-in-10-minutes](http://blog.building-blocks.com/building-a-search-engine-with-nutch-and-solr-in-10-minutes)

*   [http://www.logstash.net/](http://www.logstash.net/)

*   [http://www.elasticsearch.org/tutorials/using-elasticsearch-for-logs/](http://www.elasticsearch.org/tutorials/using-elasticsearch-for-logs/)
*   [http://www.javacodegeeks.com/2013/02/your-logs-are-your-data-logstash-elasticsearch.html](http://www.javacodegeeks.com/2013/02/your-logs-are-your-data-logstash-elasticsearch.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-18T19:25:50.597

我们是几个开发网站[http://elmah.io](http://elmah.io)的开发人员。elmah.io 索引您的所有错误（在 ElasticSearch 中），并可以进行时髦搜索、分组错误、隐藏错误、时间过滤器错误等。我们目前处于测试阶段，但如果您在[http://elmah.io](http://elmah.io)注册，您将获得测试网站的链接。

不幸的是，elmah.io 不会导入您现有的错误日志。我们将开源 ELMAH ErrorLog 类型的实现，它在您自己的 ElasticSearch 中索引您的错误（观看[https://github.com/elmahio](https://github.com/elmahio)以了解该项目）。同样，此错误记录器不会索引您现有的错误日志，但您可以实现一个解析器，它运行您的 XML 文件并使用我们的开源错误记录器索引所有内容。如果您不想在 ElasticSearch 之上实现新的 UI，您也可以通过我们的 API 将错误直接导入到 elmah.io。

# java - Maven Jar Builder：找不到或加载主类

> ID：15751714
> 
> 赞同：5
> 
> 时间：2013-04-01T20:54:42.540
> 
> 标签：java, maven, packaging, classnotfound

几天来，我一直在尝试为我的 muli-module maven 项目创建一个可执行的 jar 文件。但是，当我尝试运行此 jar 文件时，我得到“无法找到或加载主类 src.main.java.com.domain.Mainclass”（为了我公司的隐私，我更改了名称域和 MainClass）

我已经搜索了几天，但似乎没有一个明显的提示有效。

我的项目有一个主 maven 项目，它下载所有依赖项（打包：POM）和几个模块项目（打包：Jar）。

一切似乎都工作正常，所有文件都编译成类文件，但不知何故主类没有被添加到 pom.xml 中。

我的 Pom 文件插件：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-assembly-plugin</artifactId>
    <version>2.2-beta-4</version>
    <configuration>
      <descriptorRefs>
        <descriptorRef>jar-with-dependencies</descriptorRef>
      </descriptorRefs>
      <archive>
        <manifest>
          <mainClass>com.domain.project.MainClass</mainClass>
        </manifest>
      </archive>
      </configuration>
      <executions>
      <execution>
        <phase>package</phase>
        <goals>
          <goal>single</goal>
        </goals>
      </execution>
      </executions>
      </plugin> 
```

我使用的命令：mvn clean package，然后我 cd 进入目标文件夹并执行：java -jar jarfilename.jar

任何提示或帮助都将受到欢迎！

编辑：

我当前的配置为每个模块创建了 2 个 jar 文件：

*   项目名称-jar-with-dependencies.jar
*   项目名.jar

当我使用主类导航到模块的目标文件夹时，我可以成功运行 jar 文件。但是，当我尝试运行我的父 maven 项目（带有 packageing:pom 的项目）的 jar 文件时，我仍然遇到同样的错误。有谁知道为什么主jar文件找不到主类？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-01T20:57:31.107

您不应该将其`src.main.java`作为主类的包名称的一部分。它只是默认 maven 项目文件夹结构约定的一部分。您的配置可能应该是：

```
<archive>
    <manifest>
      <mainClass>com.domain.project.MainClass</mainClass>
    </manifest>
  </archive> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-14T22:35:29.803

好像您缺少其中一个插件。将波纹管添加到 pom.xml 文件

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>2.6</version>
    <configuration>
            <archive>
                <manifest>
                    <addClasspath>true</addClasspath>
                    <mainClass>yourclassnameKt</mainClass>
                </manifest>
            </archive>
    </configuration>
</plugin> 
```

该插件将添加 MANIFEST.mf 文件，该文件将告诉 Java 运行时要执行哪个类。

还有另一个问题有同样的问题-> [Kotlin + Maven assemble: no main manifest attribute](https://stackoverflow.com/questions/47163103/kotlin-maven-assembling-no-main-manifest-attribute/49288424#49288424)

参考：[https ://michaelrice.com/2016/08/hello-world-with-kotlin-and-maven/](https://michaelrice.com/2016/08/hello-world-with-kotlin-and-maven/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-19T20:22:47.097

我将删除这篇文章，因为正确设置 3 个不同的东西很重要：

1.  `MainClass.java`需要在`<project_root>/src/main/java/com/domain/project/`
2.  Maven 组装插件需求`<mainClass>com.domain.project.MainClass</mainClass>`
3.  你的包应该设置为`com.domain.project`

当这三个匹配时，Maven 应该打包一个可执行的 JAR 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-23T17:05:55.217

我有一些不同但相似的场景，所以我想我会分享。我通过构建（pom.xml 打包配置）将一个主要的 maven 应用程序打包到一个战争中。我想添加一个 jar 文件，它是从我们的源代码中的一个包创建的，并与 webapp 战争一起添加到组装输出中。这使我们可以单独交付 Web 应用程序和 cli 工具。我不想将 pom.xml 重新配置为多模块，而只是在我们现有的结构中添加一个 jar 作为单独的可执行文件。我用头撞了一会儿。

首先，我最终在本地删除了包含 maven 存储库的整个 .m2 目录。看来这里对我来说可能存在问题，因为我的最终有效代码似乎与最初无效的代码相同。我怀疑这样做的原因是我尝试了不同版本的库并造成了冲突，但谁知道呢。如果您遇到问题，我的第一个建议是删除您的 .m2 文件夹并从头开始尝试。

还要参考@Adam Howell 的回答，因为那是基础。我创建了一个简化的示例项目来弄清楚为什么没有发生任何事情，在那里我意识到我忘记将文件夹结构作为前缀作为 src/main/java... 哦！当然，在我现有的项目中，情况并非如此。

这是我插入到我的 pom.xml 中的插件代码：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>3.2.0</version>
    <configuration>
        <archive>
            <manifest>
                <addClasspath>true</addClasspath>
                <mainClass>com.myCompany.app.cli.CLITool</mainClass>
            </manifest>
        </archive>
        <outputDirectory>${project.build.directory}</outputDirectory>
        <finalName>our-cli</finalName>
    </configuration>
    <executions>
        <execution>
            <phase>compile</phase>
            <goals>
                <goal>jar</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

我很确定你可以改变你想要完成的阶段，我之前在 compile made 中计算过，以确保它稍后可用于打包。不过，我对 Maven 不是很有经验，所以请注意，这可能在语义上不符合 Maven 约定。

它奏效了！不知道为什么这需要我几个小时才能解决，尽管它确实如此。我刚刚更新了 bin.xml 以将 jar 文件包含在我组装的可交付成果中，瞧！我有一个独立于我的 web 应用程序的 jar 可执行文件，我可以将其用作命令行界面工具。

# schema - Cassandra CQL 克隆键空间模式

> ID：15751715
> 
> 赞同：0
> 
> 时间：2013-04-01T20:54:47.363
> 
> 标签：schema, cassandra, datastore, cql, cql3

我正在尝试转储 Cassandra 键空间的模式，该模式可用于将其导入另一个键空间，例如备份 cassandra 键空间并将其恢复到具有相同模式的不同键空间中。

我正在使用 cqlsh：

```
[cqlsh 2.3.0 | Cassandra 1.2.2 | CQL spec 3.0.1 | Thrift protocol 19.35.0] 
```

我最初使用 CLUSTERING ORDER 时间戳 DESCENDING 顺序创建模式：

```
DROP KEYSPACE mailbox;

CREATE KEYSPACE mailbox 
    WITH REPLICATION  = { 'class': 'SimpleStrategy', 'replication_factor': '1' };

USE mailbox;

CREATE TABLE messages (
    id uuid,
    user_id uuid,
    contents varchar,
    created timestamp,

    PRIMARY KEY (id, created)
)
WITH CLUSTERING ORDER BY (created DESC); 
```

然后我使用 CQL 函数转储我认为有效的 CQL3：

```
cqlsh:mailbox> describe keyspace mailbox;

CREATE KEYSPACE mailbox WITH replication = {
  'class': 'SimpleStrategy',
  'replication_factor': '1'
};

USE mailbox;

CREATE TABLE messages (
  id uuid,
  created 'org.apache.cassandra.db.marshal.ReversedType'<timestamp>,
  contents text,
  user_id uuid,
  PRIMARY KEY (id, created)
) WITH
  bloom_filter_fp_chance=0.010000 AND
  caching='KEYS_ONLY' AND
  comment='' AND
  dclocal_read_repair_chance=0.000000 AND
  gc_grace_seconds=864000 AND
  read_repair_chance=0.100000 AND
  replicate_on_write='true' AND
  populate_io_cache_on_flush='false' AND
  compaction={'class': 'SizeTieredCompactionStrategy'} AND
  compression={'sstable_compression': 'SnappyCompressor'}; 
```

当我尝试将其导入回 cqlsh 时，出现以下错误：

```
Bad Request: line 3:56 mismatched input '<' expecting ')'
text could not be lexed at line 16, char 14 
```

我相信它无法解析创建的列定义（最初是使用 CLUSTERING ORDER BY 创建的）：

```
created 'org.apache.cassandra.db.marshal.ReversedType'<timestamp> 
```

是否有其他方法可以转储给定键空间的模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T16:03:55.613

嗯..认为这个问题在 cassandra 1.2.5 中得到了解决，并且您正在使用 cassandra 1.2.2 [https://issues.apache.org/jira/browse/CASSANDRA-5528](https://issues.apache.org/jira/browse/CASSANDRA-5528)并且更好，升级到 cassandra 2.0 因为在这里进行了测试，它在 cassandra 2.0.2 中运行良好。

作为旁注，您可能还需要关注 cql 版本。[http://cassandra.apache.org/doc/cql3/CQL.html#Versioning](http://cassandra.apache.org/doc/cql3/CQL.html#Versioning)

# c# - 更改 Visual Studio 2012 C# 模数格式

> ID：15751717
> 
> 赞同：4
> 
> 时间：2013-04-01T20:55:00.653
> 
> 标签：c#, visual-studio-2012, resharper

如何更改 Visual Studio 用于格式化模数 (%) 运算符的选项？

例如，每当我键入该行

```
int x = a % b; 
```

Visual Studio 将其更改为

```
int x = a%b; 
```

当我输入分号时。我希望它自动在模运算符周围添加空格，而不是把它们拿走。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T20:58:19.443

工具 -> 选项 -> 文本编辑器 -> c# -> 格式化 -> 间距：

![在此处输入图像描述](https://i.stack.imgur.com/I8Q4e.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T19:29:12.027

原来 Resharper 是罪魁祸首。转到 Resharper >> 选项... >> 代码编辑 >> C# >> 格式样式 >> 空格 >> 周围运算符 >> 乘法运算符。

# java - NPE 关于将键/值放入 HashMap

> ID：15751719
> 
> 赞同：0
> 
> 时间：2013-04-01T20:55:06.333
> 
> 标签：java, android, hashmap

我有一个简单的 Hashmap `public HashMap<String,String> StoreDet;`。现在，每当我尝试将一些价值设置为：

```
String val = (eElement.getElementsByTagName("name").item(0)
        .getTextContent()
        + "^"
        + eElement.getElementsByTagName("state").item(0)
                .getTextContent() + "^" + eElement
        .getElementsByTagName("city").item(0).getTextContent());
val = val.trim().toString();
System.out.println(val);

String key = eElement.getAttribute("id").trim().toString();
System.out.println(key);
//System.out.println(eElement.getAttribute("id")+" "+ (eElement.getElementsByTagName("name").item(0).getTextContent()+"^"+eElement.getElementsByTagName("state").item(0).getTextContent()+"^"+eElement.getElementsByTagName("city").item(0).getTextContent()));
//(eElement.getElementsByTagName("name").item(0).getTextContent()+"^"+eElement.getElementsByTagName("state").item(0).getTextContent()+"^"+eElement.getElementsByTagName("city").item(0).getTextContent())

StoreDet.put(key, val); // I get an NPE at this line 
```

我在指示的行得到一个 NPE。SOP 显示键和值的正确值，但异常仍在发生。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T20:55:58.713

如果您在该行得到它，StoreDet 必须为空。你有没有通过new创建它？

# python - 如何使用 pybrain 黑盒优化训练神经网络以监督数据集？

> ID：15751723
> 
> 赞同：20
> 
> 时间：2013-04-01T20:55:20.637
> 
> 标签：python, artificial-intelligence, neural-network, pybrain

我玩过 pybrain 并了解如何使用自定义架构生成神经网络，并使用反向传播算法将它们训练为有监督的数据集。

然而，我对优化算法和任务、学习代理和环境的概念感到困惑。

例如：我将如何实现一个神经网络，例如 (1) 以使用 pybrain 遗传算法 (2) 对 XOR 数据集进行分类？

(1)`pybrain.tools.shortcuts.buildNetwork(2, 3, 1)`

(2)`pybrain.optimization.GA()`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-07T22:15:10.913

我终于解决了！！一旦你知道如何，它总是很容易！

本质上，GA 的第一个参数是适应度函数（在文档中称为评估器），它必须将第二个参数（个体，在文档中称为可评估）作为其唯一参数。

在这个例子中将训练到 XOR

```
from pybrain.datasets.classification import ClassificationDataSet
# below line can be replaced with the algorithm of choice e.g.
# from pybrain.optimization.hillclimber import HillClimber
from pybrain.optimization.populationbased.ga import GA
from pybrain.tools.shortcuts import buildNetwork

# create XOR dataset
d = ClassificationDataSet(2)
d.addSample([0., 0.], [0.])
d.addSample([0., 1.], [1.])
d.addSample([1., 0.], [1.])
d.addSample([1., 1.], [0.])
d.setField('class', [ [0.],[1.],[1.],[0.]])

nn = buildNetwork(2, 3, 1)
# d.evaluateModuleMSE takes nn as its first and only argument
ga = GA(d.evaluateModuleMSE, nn, minimize=True)
for i in range(100):
    nn = ga.learn(0)[0] 
```

上述脚本后的测试结果：

```
In [68]: nn.activate([0,0])
Out[68]: array([-0.07944574])

In [69]: nn.activate([1,0])
Out[69]: array([ 0.97635635])

In [70]: nn.activate([0,1])
Out[70]: array([ 1.0216745])

In [71]: nn.activate([1,1])
Out[71]: array([ 0.03604205]) 
```

# php - 将 mongodb 代码转换为具有 $and $not 和 mongoregex 运算符的 php 时遇到问题

> ID：15751725
> 
> 赞同：0
> 
> 时间：2013-04-01T20:55:41.790
> 
> 标签：php, mongodb

我很难将 mongodb shell 命令转换为 php。在我使用的外壳中

```
db.files.find({"username":"username",
$and:[
{'filetype': {$not : /image/}},
{'filetype':{$not:/application/}},
{'filetype':{$not:/video/}}
]

}) 
```

如您所见，我很难将其转换为 php。我尝试了几种方法来解决堆栈溢出，但结果为空。任何人都可以帮助解决此代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:24:20.297

它应该是

```
$db->files->find(array(
  'username' => 'username',
  '$and' => array(
    array('filetype' => array('$not' => new MongoRegex('/image/'))),
    array('filetype' => array('$not' => new MongoRegex('/application/'))),
    array('filetype' => array('$not' => new MongoRegex('/video/'))),
  ),
)); 
```

顺便说一句，您可以使用这个小脚本将 JSON 表示形式转换为 PHP：

```
var_export(json_decode($jsonAsString, true)); 
```

# php - 如何在允许目录的同时重写 URL 以包含变量并删除 php

> ID：15751727
> 
> 赞同：1
> 
> 时间：2013-04-01T20:55:44.933
> 
> 标签：php, apache, variables, mod-rewrite, directory

我有以下 htaccess

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/?user=$1 
```

例如，它按预期工作

```
http://example.com/index.php?user=USERNAME -> http://example.com/USERNAME 
```

但是我在 index.php 页面上创建了一个表单，该表单发布到 /directory/save.php

如何在允许目录的同时删除 .php 以便我可以发布到 /directory/save/ ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:07:07.850

directory/ 可能有它自己的重写规则并且没有物理的 save.php，这就是为什么 !-f 可能不起作用。尝试添加新的重写条件以停止重写目录/

```
RewriteCond %{REQUEST_URI} !^directory 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:29:31.660

如果它要进入一个并且只有一个这样的文件，`/directory`那么可能通过在上述规则之前添加以下来对其进行硬编码？

```
RewriteRule ^directory/save$ /directory/save.php [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T05:58:51.053

*如果它正在将/directory/save.php*文件重写到目录*/directory/save/*，请尝试检查这个

 *```
RewriteCond %{REQUEST_URI} ^/directory/save\.php$
RewriteRule ^(.+) /directory/save/ [NC] 
```*

# java - 检票口组件工具提示中的延迟

> ID：15751728
> 
> 赞同：0
> 
> 时间：2013-04-01T20:55:45.820
> 
> 标签：java, tooltip, wicket, textfield

我`tool tip`在 wicket 中使用。它会延迟显示，我无法加快速度。我想为它制作一些 css 属性。我能怎么做？

```
inputTextField.add(AttributeModifier.append("title", "I am a tool tip in wicket")) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:19:44.917

样式属性的添加方式与您对标题属性使用 AttributeModifier 相同。

```
inputTextField.add(new AttributeAppender("style", Model.of("border: 1px solid red;"))); 
```

但我认为这不会解决您的“延迟问题”（它与 Wicket 无关）。你可以选择一个体面的 JavaScript 库，它会在鼠标悬停时绘制工具提示框。

还有纯 CSS 工具提示库，例如：[hint.css](http://kushagragour.in/lab/hint/)

# variables - 变量名：如何缩写“索引”？

> ID：15751729
> 
> 赞同：11
> 
> 时间：2013-04-01T20:55:51.027
> 
> 标签：variables, language-agnostic

我喜欢保持变量的名称简短但易读。

尽管如此，例如，当命名保存某个列表中元素索引的变量时，我倾向于使用`elemIndex`，因为我不知道缩写“索引”这个词的正确（和普遍理解的）方式。

是否有缩写“索引”的规范方式？还是最好把它完整拼写以避免误解？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-01T21:22:15.160

根据我的经验，这取决于上下文。通常我可以从它的用途来判断某物是否是索引，所以我通常更感兴趣的是知道它是什么的索引。

我的经验法则大致是这样的：

如果它只是一个短循环中的循环索引（例如：所有内容同时显示在屏幕上）并且上下文告诉读者索引在做什么，那么您可能可以使用简单的`i`.

示例：对图像进行阈值处理

```
//For each pixel in the image, threshold it
for (int i = 0; i < height; i++ ) {
  for (int j = 0; j < width; j++) {
    if (image[i][j] < 128) {
      image[i][j] = 0;
    } else {
      image[i][j] = 255;
    }
  }
} 
```

如果代码部分较大，或者您有多个索引，请指出它是哪个列表的索引：

```
File[] files_in_dir = ...;
int num_files = files_in_dir.length();
for (int fileIdx = 0; fileIdx < num_files; fileIdx++) { //for each file in dir.
  ...
} 
```

但是，如果索引实际上对代码的含义很重要，则完全指定它，例如：

```
int imageToDeleteIdx = 3; //index of the image to be deleted.
image_list.delete(imageToDeleteIdx); 
```

然而，代码应该被认为是“一次编写，多次阅读”，你的努力应该被这样分配；即：写作很多，所以阅读很容易。为此，正如 Brad M 所提到的，永远不要假设读者理解你的缩写。如果您要使用缩写，至少在评论中声明它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-13T20:52:16.680

坚持既定的和众所周知的惯例。如果你使用通用的约定，人们在阅读你的代码时就会有更少的惊喜。

程序员习惯于使用许多数学惯例。例如在数学中，我们通常标记索引：

```
i, j, k 
```

例如，坐标用字母表示，例如：

```
x, y, z 
```

这当然取决于上下文。例如，使用*i*来表示某个全局索引将是一个**糟糕**的主意。为非常局部的变量使用短名称，为更多的全局函数和变量使用较长的名称，这是一个很好的经验法则。

对我来说，这种风格受到了 Rob Pike 的影响，他在[这里](http://doc.cat-v.org/bell_labs/pikestyle)详细阐述了这一点。作为对用户界面设计和体验感兴趣的人，我也写过更多关于此的文章。

# c# - LongListSelector 不显示项目

> ID：15751732
> 
> 赞同：0
> 
> 时间：2013-04-01T20:55:53.720
> 
> 标签：c#, silverlight, windows-phone-7, silverlight-toolkit, longlistselector

我实现 LongListSelector 是因为我想对项目进行分组。但是这个 LongListSelector 在我运行它时不显示任何项目。

这是我的 XML 源：

```
<?xml version="1.0" encoding="utf-8"?>
<Tasks>
  <Task>
    <Name>first task</Name>
    <DueDate>05/03/2013 00:00:00</DueDate>
    <Created>03/27/2013 01:24:08</Created>
  </Task>
  <Task>
    <Name>second task</Name>
    <DueDate>05/17/2013 00:00:00</DueDate>
    <Created>03/27/2013 01:24:19</Created>
  </Task>
  <Task>
    <Name>third task</Name>
    <DueDate>05/17/2013 00:00:00</DueDate>
    <Created>03/27/2013 01:24:38</Created>
  </Task>
</Tasks> 
```

我的 XAML 代码：

```
<toolkit:LongListSelector Background="Transparent" ItemsSource="{Binding TasksByDueDate}">
    <toolkit:LongListSelector.GroupHeaderTemplate>
        <DataTemplate>
            <Border Background="Transparent">
                <Border Background="{StaticResource PhoneAccentBrush}" Width="475" Height="35" HorizontalAlignment="Left">
                    <TextBlock Text="{Binding Key}" 
                           Foreground="{StaticResource PhoneForegroundBrush}" 
                           Style="{StaticResource PhoneTextGroupHeaderStyle}"
                           VerticalAlignment="Bottom"/>
                </Border>
            </Border>
        </DataTemplate>
    </toolkit:LongListSelector.GroupHeaderTemplate>
    <toolkit:LongListSelector.ItemTemplate>
        <DataTemplate>
            <StackPanel Margin="0,0,0,17" Width="432" Orientation="Horizontal">
                <TextBlock Text="{Binding Name}" TextWrapping="Wrap" Width="345"/>
            </StackPanel>
        </DataTemplate>
    </toolkit:LongListSelector.ItemTemplate>
</toolkit:LongListSelector> 
```

MainViewModel.cs：

```
public class MainViewModel : INotifyPropertyChanged
{
    public ObservableCollection<Task> Tasks { get; private set; }

    public IEnumerable<Group<string, Task>> TasksByDueDate { get; private set; }

    public MainViewModel()
    {
        this.Tasks = new ObservableCollection<Task>();
        this.Projects = new ObservableCollection<Project>();
        this.Contexts = new ObservableCollection<Context>();
    }

    public bool IsDataLoaded { get; private set; }

    public void LoadPlannedData()
    {
        try
        {
            Tasks.Clear();

            var file = IsolatedStorageFile.GetUserStoreForApplication();
            XElement xElem;

            using (IsolatedStorageFileStream read = file.OpenFile("tasks.xml", FileMode.Open))
            {
                xElem = XElement.Load(read);
            }

            var tasks = from task in xElem.Elements("Task")
                        orderby (DateTime)task.Element("Created") descending
                        select task;

            foreach (XElement xElemItem in tasks)
            {
                Tasks.Add(new Task
                {
                    Name = xElemItem.Element("Name").Value.ToString(),
                    DueDate = xElemItem.Element("DueDate").Value.ToString(),
                    Created = xElemItem.Element("Created").Value.ToString()
                });
            }

            TasksByDueDate = from c in Tasks 
                             group c by c.DueDate into n
                             select new Group<string, Task>(n);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

        this.IsDataLoaded = true;
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(String propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (null != handler)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

组.cs：

```
public class Group<TKey, TElement> : IGrouping<TKey, TElement>
{
    private readonly IGrouping<TKey, TElement> grouping;

    public Group(IGrouping<TKey, TElement> unit)
    {
        grouping = unit;
    }

    public TKey Key
    {
        get { return grouping.Key; }
    }

    public IEnumerator<TElement> GetEnumerator()
    {
        return grouping.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return grouping.GetEnumerator();
    }
} 
```

如果我显示任务列表框，那么一切都显示得很好。但是，如果我显示分组项目，则不会显示任何项目。

应用程序运行良好（没有崩溃），只有 LongListSelector 中的项目丢失。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:30:15.500

我花了 2-3 天来追查同样的问题，这是一场噩梦。我相信答案是ItemsSource数据格式需要是IList。不幸的是，这对您并没有太大帮助，但这里有两个我创建的类……它们至少可以工作。

我的 StringKeyGroup 允许全文组名称，而 AlphaKeyGroup 按字母顺序排列列表。

StringKeyGroup 类

```
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Globalization;
using System.Linq;

namespace LongListSelectorDemo.Model
{
    public class StringKeyGroup<T> : ObservableCollection<T>
    {
        public delegate string GetKeyDelegate(T item);
        public string Key { get; private set; }
        public StringKeyGroup(string key)
        {
            Key = key;
        }
        public static ObservableCollection<StringKeyGroup<T>> CreateGroups(IEnumerable<T> items, CultureInfo ci, GetKeyDelegate getKey, bool sort)
        {
            var list = new ObservableCollection<StringKeyGroup<T>>();

            foreach (var item in items)
            {
                var index = -1;
                for (var i = 0; i < list.Count; i++)
                {
                    if (list[i].Key.Equals(getKey(item)))
                    {
                        index = i;
                        break;
                    }
                }
                if (index == -1)
                {
                    list.Add(new StringKeyGroup<T>(getKey(item)));
                    index = list.Count - 1;
                }
                if (index >= 0 && index < list.Count)
                {
                    list[index].Add(item);
                }
            }

            if (sort)
            {
                foreach (var group in list)
                {
                    group.ToList().Sort((c0, c1) => ci.CompareInfo.Compare(getKey(c0), getKey(c1)));
                }
            }

            return list;
        }
    }
} 
```

AlphaKeyGroup 类

```
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Globalization;
using System.Linq;
using Microsoft.Phone.Globalization;

namespace LongListSelectorDemo.Model
{
    public class AlphaKeyGroup<T> : ObservableCollection<T>
    {
        /// <summary>
        /// The delegate that is used to get the key information.
        /// </summary>
        /// <param name="item">An object of type T</param>
        /// <returns>The key value to use for this object</returns>
        public delegate string GetKeyDelegate(T item);

        /// <summary>
        /// The Key of this group.
        /// </summary>
        public string Key { get; private set; }

        /// <summary>
        /// Public constructor.
        /// </summary>
        /// <param name="key">The key for this group.</param>
        public AlphaKeyGroup(string key)
        {
            Key = key;
        }

        /// <summary>
        /// Create a list of AlphaGroup<T> with keys set by a SortedLocaleGrouping.
        /// </summary>
        /// <param name="slg">The </param>
        /// <returns>Theitems source for a LongListSelector</returns>
        private static ObservableCollection<AlphaKeyGroup<T>> CreateGroups(SortedLocaleGrouping slg)
        {
            return new ObservableCollection<AlphaKeyGroup<T>>(slg.GroupDisplayNames.Select(key => new AlphaKeyGroup<T>(key)).ToList());
        }

        /// <summary>
        /// Create a list of AlphaGroup<T> with keys set by a SortedLocaleGrouping.
        /// </summary>
        /// <param name="items">The items to place in the groups.</param>
        /// <param name="ci">The CultureInfo to group and sort by.</param>
        /// <param name="getKey">A delegate to get the key from an item.</param>
        /// <param name="sort">Will sort the data if true.</param>
        /// <returns>An items source for a LongListSelector</returns>
        public static ObservableCollection<AlphaKeyGroup<T>> CreateGroups(IEnumerable<T> items, CultureInfo ci, GetKeyDelegate getKey, bool sort)
        {
            var slg = new SortedLocaleGrouping(ci);
            var list = CreateGroups(slg);

            foreach (var item in items)
            {
                var index = 0;
                if (slg.SupportsPhonetics)
                {
                    //check if your database has yomi string for item
                    //if it does not, then do you want to generate Yomi or ask the user for this item.
                    //index = slg.GetGroupIndex(getKey(Yomiof(item)));
                }
                else
                {
                    index = slg.GetGroupIndex(getKey(item));
                }
                if (index >= 0 && index < list.Count)
                {
                    list[index].Add(item);
                }
            }

            if (sort)
            {
                foreach (var group in list)
                {
                    group.ToList().Sort((c0, c1) => ci.CompareInfo.Compare(getKey(c0), getKey(c1)));
                }
            }

            return list;
        }
    }
} 
```

示例用法，只需交换 StringKeyGroup 和 AlphaKeyGroup 之间的类名即可查看差异：

XAML

```
<phone:PhoneApplicationPage
    x:Class="LongListSelectorDemo.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    shell:SystemTray.IsVisible="True">

    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" Background="Transparent">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!--TitlePanel contains the name of the application and page title-->
        <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
            <TextBlock Text="MY APPLICATION" Style="{StaticResource PhoneTextNormalStyle}" Margin="12,0"/>
            <TextBlock Text="page name" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
        </StackPanel>

        <!--ContentPanel - place additional content here-->
        <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
            <phone:LongListSelector x:Name="GroupedList" IsGroupingEnabled="True" HideEmptyGroups="True">
                <phone:LongListSelector.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Name}" Padding="{StaticResource PhoneTouchTargetOverhang}" 
            FontSize="{StaticResource PhoneFontSizeMediumLarge}" />
                    </DataTemplate>
                </phone:LongListSelector.ItemTemplate>
                <phone:LongListSelector.GroupHeaderTemplate>
                    <DataTemplate>
                        <Border Background="{StaticResource PhoneAccentBrush}" 
            Padding="{StaticResource PhoneTouchTargetOverhang}">
                            <TextBlock Text="{Binding Key}" Style="{StaticResource PhoneTextGroupHeaderStyle}"/>
                        </Border>
                    </DataTemplate>
                </phone:LongListSelector.GroupHeaderTemplate>
            </phone:LongListSelector>
        </Grid>
    </Grid>

</phone:PhoneApplicationPage> 
```

XAML.cs

```
using System.Collections.Generic;
using System.Collections.ObjectModel;
using LongListSelectorDemo.Model;
using Microsoft.Phone.Controls;

namespace LongListSelectorDemo
{
    public partial class MainPage : PhoneApplicationPage
    {
        // Constructor
        public MainPage()
        {
            InitializeComponent();

            // Sample code to localize the ApplicationBar
            //BuildLocalizedApplicationBar();
        }

        protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
        {
            base.OnNavigatedTo(e);
            if (GroupedList.ItemsSource == null)
            {
                var foodItems = new ObservableCollection<FoodItem>();

                /*---Make burger items---*/
                foodItems.Add(new FoodItem("Hamburger", "Burgers"));
                foodItems.Add(new FoodItem("Chicken burger", "Burgers"));
                foodItems.Add(new FoodItem("Turkey burger", "Burgers"));
                foodItems.Add(new FoodItem("Black bean burger", "Burgers"));

                /*---Make fryer items---*/
                foodItems.Add(new FoodItem("Fries", "Fryer"));
                foodItems.Add(new FoodItem("Onion rings", "Fryer"));
                foodItems.Add(new FoodItem("Tater tots", "Fryer"));
                foodItems.Add(new FoodItem("Mozzarella sticks", "Fryer"));

                /*---Make fish items---*/
                foodItems.Add(new FoodItem("Salmon", "Fish"));
                foodItems.Add(new FoodItem("Rainbow trout", "Fish"));
                foodItems.Add(new FoodItem("Grilled tilapia", "Fish"));

                GroupedList.ItemsSource = GroupedItems(foodItems);
            }
        }

        public ObservableCollection<StringKeyGroup<FoodItem>> GroupedItems(IEnumerable<FoodItem> source)
        {
            return StringKeyGroup<FoodItem>.CreateGroups(source,
    System.Threading.Thread.CurrentThread.CurrentUICulture, s => s.GroupName, true);
        }
    }
} 
```

这是 FoodItem 类：

```
namespace LongListSelectorDemo.Model
{
    public class FoodItem
    {
        public FoodItem(string name, string groupName)
        {
            Name = name;
            GroupName = groupName;
        }
        public string Name { get; private set; }
        public string GroupName { get; private set; }
    }
} 
```

# scala - 如何在清晰的数据库中运行测试？

> ID：15751735
> 
> 赞同：1
> 
> 时间：2013-04-01T20:55:57.273
> 
> 标签：scala, playframework-2.0, anorm

在 PlayFramework 中运行测试时，您希望在每次测试（真正的隔离）和演进之前清除数据库，但不知何故，情况似乎并非如此。

在运行每个测试之前，或者如果没有通用方法，在使用异常时如何清除数据库？

> **编辑**：我已经知道用于测试的 H2 - 模式，即使是数据库细节，但正如下面评论中所说，我想要的是具有相同的测试和生产数据库设置。为了做到这一点，我需要能够在每次测试之前重新加载我的数据库。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-02T09:21:07.323

在内存数据库上运行测试。查看[http://www.playframework.com/documentation/2.0/ScalaTest](http://www.playframework.com/documentation/2.0/ScalaTest)以获取有关其完成方式的示例。这样，数据库将在每次测试之前从演变中启动，并且只需要添加您想要特定于该测试的数据或诸如此类的东西。

# mobile - 日历按钮未正确删除 - Lua

> ID：15751736
> 
> 赞同：0
> 
> 时间：2013-04-01T20:55:57.353
> 
> 标签：mobile, calendar, lua, coronasdk

我正在尝试制作一个能够从一个月到一个月切换的日历。我的问题是在触摸下一个或上一个按钮时删除每天的按钮。

这是我的上一个按钮从当前月份切换到上个月的代码。我的 Next 按钮代码几乎完全相同。当我第一次点击按钮时它工作得非常好，但是当我再次点击它时，我在 child:removeSelf() 行出现错误，并且打印消息告诉我表格中有 61 个元素。每次我去一个尚未见过的月份时，它似乎都会在表格中添加额外的按钮。

这对我来说真的很令人沮丧，因为我看不出代码每个月都制作额外按钮的任何原因，即使这样做，当点击按钮时，每个按钮仍然应该被删除。有人可以帮帮我吗？

```
local prev_function = function(event)

    if event.phase == "release" then

        today.year = 2012
        today.month = 3
        today.day = 29
        today.wday = 5

        if monthNum == 1 then 
            monthNum = 12
            yearNum = yearNum - 1
        elseif monthNum ~= 1 then
            monthNum = monthNum - 1
        end

        local month = ""

            if monthNum == 1 then month = "January"
        elseif monthNum == 2 then month = "February"
        elseif monthNum == 3 then month = "March"
        elseif monthNum == 4 then month = "April"
        elseif monthNum == 5 then month = "May"
        elseif monthNum == 6 then month = "June"
        elseif monthNum == 7 then month = "July"
        elseif monthNum == 8 then month = "August"
        elseif monthNum == 9 then month = "September"
        elseif monthNum == 10 then month = "October"
        elseif monthNum == 11 then month = "November"
        elseif monthNum == 12 then month = "December"
           end

        monthText.text = month .. " " .. yearNum

        print("Table elements before button deletion: " .. #buttonTable)

        for i = #buttonTable, 1, -1 do
            --[[if button[i] ~= nil then
                table.remove(buttonTable)
                button[i]:removeSelf()
                button[i] = nil
            end--]]

            local child = table.remove(buttonTable)
            if child ~= nil then
                child:removeSelf()
                child = nil
            end
        end

        print("Table elements after button deletion: " .. #buttonTable)

        next_button.alpha = 1

        for i = 1, math.floor(numYears * 365.25) do

            dateTable[i] = calendar.getInfo(today) --calculate the next day's date

            if dateTable[i].year == yearNum and dateTable[i].month == monthNum then  -- create a button if the date's year and month match the desired month
                button[i] = ui.newButton{
                    default = "images/day.png",
                    over = "images/dayover.png",
                    text = dateTable[i].day,
                    size = 30,
                    font = native.systemFontBold,
                    textColor = {0, 0, 0, 255},
                    onEvent = addExpense_function,
                    offset = -35        }

                    if dateTable[i].wday == 1 then button[i].x = math.floor(col/2)
                elseif dateTable[i].wday == 2 then button[i].x = (col * 1) + math.floor(col/2)
                elseif dateTable[i].wday == 3 then button[i].x = (col * 2) + math.floor(col/2)
                elseif dateTable[i].wday == 4 then button[i].x = (col * 3) + math.floor(col/2)
                elseif dateTable[i].wday == 5 then button[i].x = (col * 4) + math.floor(col/2)
                elseif dateTable[i].wday == 6 then button[i].x = (col * 5) + math.floor(col/2)
                elseif dateTable[i].wday == 7 then button[i].x = (col * 6) + math.floor(col/2)
                     end

                    if dateTable[i].day == 1 then button[i].y = wDayBar.y + wDayBar.height/2 + math.floor(row/2)
                elseif dateTable[i].wday == 1 then button[i].y = button[i-1].y + row
                else button[i].y = button[i-1].y
                     end        
            end

            today = dateTable[i]
            table.insert(buttonTable, button[i])
            --button[i].id = "button_" .. i

        end
        print("Table elements after button creation: " .. #buttonTable)

    end

    return true

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:38:36.657

除了制作几个月的新表以及 Nicol 建议的列坐标之外，我发现我需要将 table.insert() 命令放入`if ... then`结构中。我不确定为什么将它放在`if ... then`结构之后立即导致它无法正常工作，但我猜这是因为按钮是在结构内部创建的。

```
local prev_function = function(event)

    if event.phase == "release" then

        --set date to start from
        today.year = 2012
        today.month = 2
        today.day = 29
        today.wday = 4

        --determine new month number
        if monthNum == 1 then 
            monthNum = 12
            yearNum = yearNum - 1
        elseif monthNum ~= 1 then
            monthNum = monthNum - 1
        end

        --set month string
        local month = monthTable[monthNum]

        monthText.text = month .. " " .. yearNum

        print("Table elements before button deletion: " .. #buttonTable)

        --remove all elements in buttonTable
        for i = #buttonTable, 1, -1 do
            local child = table.remove(buttonTable)
            if child ~= nil then
                child:removeSelf()
                child = nil
            end
        end

        print("Table elements after button deletion: " .. #buttonTable)

        next_button.alpha = 1
        --hide prev_button if we get to the month after the month we started from
        if monthNum == today.month + 1 and yearNum == today.year then
            prev_button.alpha = 0
        end

        --generate dates for specified number of years
        for i = 1, math.floor(numYears * 365.25) do

            dateTable[i] = calendar.getInfo(today)

            --create a button for each date inside desired month
            if dateTable[i].year == yearNum and dateTable[i].month == monthNum then
                button[i] = ui.newButton{
                    default = "images/day.png",
                    over = "images/dayover.png",
                    text = dateTable[i].day,
                    size = 30,
                    font = native.systemFontBold,
                    textColor = {0, 0, 0, 255},
                    onEvent = addExpense_function,
                    offset = -35        }

                    --set x and y
                    button[i].x = colTable[dateTable[i].wday]

                        if dateTable[i].day == 1 then button[i].y = wDayBar.y + wDayBar.height/2 + math.floor(row/2)
                    elseif dateTable[i].wday == 1 then button[i].y = button[i-1].y + row
                    else button[i].y = button[i-1].y
                         end        

                table.insert(buttonTable, button[i])
            end

            --change 'today' for next iteration in the for loop
            today = dateTable[i]

        end
        print("Table elements after button creation: " .. #buttonTable)

    end

    return true

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:31:43.080

问题中的代码不起作用（并且将`table.insert`内部放入`if...then`确实起作用）的原因是由于您使用`button`表格的方式。

开始的循环`for i = 1, math.floor(numYears * 365.25) do`将创建从 1 到几百/千（取决于`numYears`）的索引。

但是，当您`button[i]=`用于填充表格并且一次只填充 30 个左右时，您正在创建的是一个稀疏表格，在表格中间某处有一些非零条目。

现在在`table.insert(buttonTable, button[i])`外面`if..then`实际发生的是大多数“插入”都在插入`nil`. 第一次这样做实际上可以正常工作，原因有两个：

*   `nil`在空表上插入什么都不做，在表的末尾插入也不`nil`做
*   里面只有一个月的非零条目，`button`所以只有一个月的值会被插入`buttonTable`

通过这样`button`的`buttonTable`设置，调用上一个或下一个函数的第一部分按预期工作，`removeSelf`并将在当月的按钮上调用。但是，这实际上并没有从`button`表格中删除按钮。

因此，当您再次进入`numYears`循环时，您不仅会将新创建的按钮添加到`button`和`buttonTable`，您还将拥有刚刚调用的按钮，`removeSelf`因此`button`这些按钮将被`buttonTable`再次添加。但至关重要的是，它们现在只是桌子，所以当你`removeSelf`第二次调用它们时，它会呕吐。我认为这是您看到的错误的原因。

移动`table.insert(buttonTable, button[i])`到`if...then`将解决这个问题，因为它只会添加新铸造的按钮`buttonTable`，然后在每次调用 next 或 previous 时将其删除。

不过要注意一点。`button`桌子有点乱。经过一番浏览后，它将有一堆死按钮（除非您将值声明为弱，否则这些按钮不能被垃圾收集）加上一个月的工作按钮。如果你试图用它做任何事情，你很可能会遇到问题。

`button`如果您甚至需要表格，则从代码中不清楚。如果在其他地方不需要它，那么将按钮引用保存在`buttonTable`.

# c# - 如何添加用于提交消息的弹出文本框 - Windows Phone

> ID：15751741
> 
> 赞同：0
> 
> 时间：2013-04-01T20:56:16.750
> 
> 标签：c#, windows-phone-8, windows-phone, toolkit

可惜我必须安装另一个工具包，但这似乎非常有用：[Coding4Fun InputPrompt](http://www.geekchamp.com/articles/coding4fun-toolkit-for-wp7-overview-and-getting-started)。

但是我遇到了一个问题：似乎只有在输入“完成”时触发事件的功能，而无法区分是点击了刻度还是点击了十字。

在那里不必要地急于寻求帮助。找到了解决办法，下面贴出来。

* * *

原始问题：

我的应用程序的用户目前可以通过点击文本框并输入消息然后点击发送来提交他们所做的消息。我想通过没有一个永久的文本框来使这个更清洁，而是让用户点击应用程序栏上的一个按钮，沿着按钮打开键盘和一个文本框输入，当用户点击提交文本框和键盘再次消失。

我看不到任何创建带有文本框的弹出窗口的方法，那么我该怎么做呢？

我已经将 WP Toolkit 用于带有 ListPicker 的消息框，即使这个工具包似乎也无法添加文本框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:20:17.177

我不确定你试图做什么是可能的。但是，您可以做的是拥有一个`Parent Form`包含您理想的*Interface*。在此*Parent*中，您可以创建一个`Event Handler`正在侦听响应的对象。

然后，当涉及到它时，`Textbox`它实际上创建了一个`Child Form`or `Page`。他们可以输入他们的价值。然后页面会自动关闭，然后页面`Event Handler`将已经知道您可以使用其余逻辑操作的更改。

如上所述，通常您会转到另一个页面。我不知道我的解决方案是否可行，但它确实实现了您的目标。我建议可能重构您的界面，使其更加优雅。这样，您的逻辑也可以更优雅地处理它。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T23:08:45.270

可惜我必须安装另一个工具包。但这似乎可以解决问题：[Coding4Fun InputPrompt](http://www.geekchamp.com/articles/coding4fun-toolkit-for-wp7-overview-and-getting-started)。

他们`input.IsCancelVisible = true`添加了一个取消按钮，然后`e.PopUpResult.ToString() == "Ok"`在 input_completed 方法中使用以仅在点击勾选按钮时提交。

# php - sift.js（受MongoDB启发的数组过滤库）PHP端口

> ID：15751747
> 
> 赞同：3
> 
> 时间：2013-04-01T20:56:30.227
> 
> 标签：php, javascript, mongodb, porting, query-expressions

有一个[`sift.js`](https://github.com/crcn/sift.js)库，它允许您使用***MongoDB 语法***来*查询*JavaScript 数组。

我已经在我的[问题](https://stackoverflow.com/questions/14972025/implementing-mongodb-like-query-expression-object-evaluation)中询问了这样的 PHP 类，并且到目前为止已经通过很好的示例得到了几个答案，但是它们仍然存在一些兼容性和性能问题（我希望能够得到纠正）。

现在我发现这样的库已经存在于 JavaScript 中，而且很像 PHP。

***我想知道——如果不使用 PHP SPL，将这个库移植***到 PHP 上，保持它的风格和外观会很困难吗？

# iphone - 为什么我的 iOS 事件以错误的顺序触发？

> ID：15751748
> 
> 赞同：3
> 
> 时间：2013-04-01T20:56:36.320
> 
> 标签：iphone, ios, accelerometer, touchscreen, touchesbegan

我正在开发一款名为 RealBaseball 的 iPhone 应用程序。如果您熟悉 RealSoccer，它非常相似。它可以让你用你的 iPhone 和世界各地的朋友一起打棒球。

当你用导电棒敲击 iPhone 屏幕时，它应该首先检测到触摸事件，然后检测加速度，这样它就可以准确地知道你什么时候敲击它，以及敲击的力度和速度。

这是我遇到一些技术困难的地方。我有标准`touchesBegan`和`didAccelerate`听众。问题是，`didAccelerate`在射击之前`touchesBegan`。显然，有些事情是错误的，因为它不应该在球棒接触它之前开始加速。我可能缺少设置代码吗？

我需要解决这个问题，因为如果时机不对，另一端的击球机就会滞后，而且不会有任何乐趣。

您可以提供的任何建议将不胜感激。

编辑：我添加了一些格式化的 NSLog 调用`[[NSDate date] timeIntervalSince1970];` 这是输出：

```
didAccelerate: 1364850400.03221
touchesBegan: 1364850400.21486 
```

所以你可以看到这是一个很小但很明显的区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:06:47.510

你如何确保蝙蝠关闭从手机到你手的导电电路？我建议大量使用用于使手套触摸屏友好的材料。这里推荐使用银线尼龙：http: [//www.howtogeek.com/130477/diy-touch-screen-mod-makes-regular-gloves-smartphone-friendly/](http://www.howtogeek.com/130477/diy-touch-screen-mod-makes-regular-gloves-smartphone-friendly/)

更新：哦，您可能需要放大蝙蝠将经历的非常微小的电流，以便它可以一直传播到您的手上。我不是电工，但通过同一线程连接到蝙蝠的便携式汽车电池应该可以解决问题。

# php - 在会话中存储用户的配置数据有什么问题吗？

> ID：15751750
> 
> 赞同：-1
> 
> 时间：2013-04-01T20:56:36.643
> 
> 标签：php, mysql, session

对于网站，我希望用户选择网站的外观，例如，如果用户选择“深色”主题，它会更新数据库中的一行（使用“配置”表或仅名为“主题”的列）在用户表中 - 尚未决定）

但是，登录时，将配置选项存储在会话中是否有任何问题，或者我应该将 ID 存储在会话中并在每次页面加载时查询数据库以获取用户信息？

我确信会话选项对于资源来说会更好，但是它有缺点吗（当然，在更改选项时，我需要确保会话值也得到更新）？

更新（带代码）：

选项 1：在每个页面加载时查询 DB -> 获取值（“dark”或“light”并使用它来显示正确的主题）选项 2：用户登录，将“dark”或“light”设置为会话变量，并使用它来显示正确的主题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:14:39.777

我会完全按照您在选项2中所说的那样做。

在我看来，最好在会话中“缓存”用户相关数据。这包括您页面中可能经常使用的任何内容。

尽可能多地保存数据库查询总是更好，因为数据库通常是网站性能的瓶颈。尽管在某些情况下，始终获取最新数据至关重要。

如果每个页面请求都有一个额外的查询，那么在某些时候这可能会成为性能方面的一个重要因素。

正如您已经提到的，在更改时更新会话和数据库都很重要。对我来说，这是唯一的缺点，至少如果我们想这样称呼的话。

# processing - 为什么 Processing 2.0b8 找不到名为“Set”的类或类型？

> ID：15751751
> 
> 赞同：2
> 
> 时间：2013-04-01T20:56:37.200
> 
> 标签：processing

我正在尝试浏览[处理教程](http://blog.blprnt.com/blog/blprnt/your-random-numbers-getting-started-with-processing-and-data-visualization)并碰壁。我什至无法运行示例启动代码——我得到一个错误：`Cannot find a class or type named "Set"`这行回来突出显示：

```
Set<String> tags = le.getCustomElements().getTags(); 
```

我已经错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T21:49:23.963

一些默认导入已在 2.0 中消失。`import java.util.*` 在代码开头试试

# android - 在共享首选项中保存下载状态

> ID：15751752
> 
> 赞同：0
> 
> 时间：2013-04-01T20:56:40.820
> 
> 标签：android, download, sharedpreferences

完全下载文件后，在共享首选项中保存下载状态的最佳做法是什么？

我的问题与此类似，[处理不完整的下载文件](https://stackoverflow.com/questions/11557893/dealing-with-incomplete-downloaded-file)，但我没有找到最好的方法。

我想保存该文件已完全下载到我`asynctask` `onPostExecute`的示例中：

```
protected void onPostExecute(Void result) {
    mDownloadPrefs.setDownloadState(item.FileName());
} 
```

但是......当我尝试获取下载状态时，应用程序关闭：

```
Boolean exist = mDownloadPrefs.getDownloadState(item.FileName());
if(exist){
    ... 
```

我认为首选项文件看起来像这样：

*   文件名001 = 真
*   文件名002 = 真
*   文件名003 = 真

下载偏好类：

```
public class DownloadPreferences {

    private static final String APP_SHARED_PREFS = DownloadPreferences.class.getSimpleName(); //  Name of the file -.xml
    private SharedPreferences _sharedPrefs;
    private Editor _prefsEditor;

    public DownloadPreferences(Context context) {
        this._sharedPrefs = context.getSharedPreferences(APP_SHARED_PREFS, Activity.MODE_PRIVATE);
        this._prefsEditor = _sharedPrefs.edit();
    }

    public Boolean getDownloadState(String name) {
        boolean isdownload = _sharedPrefs.getBoolean(name, false);
        return isdownload;
    }

    public void setDownloadState(String name) {
        _prefsEditor.putBoolean(name, true);
        _prefsEditor.commit();
    }
} 
```

更新：Logcat 结果：

```
AndroidRuntime: Shutting down VM
dalvikvm: threadid=1: thread exiting with uncaught exception (group=0x40f1c300)
AndroidRuntime:java.lang.NullPointerException
AndroidRuntime:     at com.myapp.reader.AdapterReader.getView(AdapterReader.java:145)
AndroidRuntime:     at android.widget.AbsListView.obtainView(AbsListView.java:2267)
AndroidRuntime:     at android.widget.GridView.onMeasure(GridView.java:1030)
AndroidRuntime:     at android.view.View.measure(View.java:15172)
AndroidRuntime:     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
AndroidRuntime:     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
AndroidRuntime:     at android.view.View.measure(View.java:15172)
AndroidRuntime:     at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
AndroidRuntime:     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
AndroidRuntime:     at android.view.View.measure(View.java:15172)
AndroidRuntime:     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
AndroidRuntime:     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
AndroidRuntime:     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2148)
AndroidRuntime:     at android.view.View.measure(View.java:15172)
AndroidRuntime:     at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1848)
AndroidRuntime:     at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1100)
AndroidRuntime:     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1273)
AndroidRuntime:     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
AndroidRuntime:     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
AndroidRuntime:     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
AndroidRuntime:     at android.view.Choreographer.doCallbacks(Choreographer.java:555)
AndroidRuntime:     at android.view.Choreographer.doFrame(Choreographer.java:525)
AndroidRuntime:     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
AndroidRuntime:     at android.os.Handler.handleCallback(Handler.java:615)
AndroidRuntime:     at android.os.Handler.dispatchMessage(Handler.java:92)
AndroidRuntime:     at android.os.Looper.loop(Looper.java:137)
AndroidRuntime:     at android.app.ActivityThread.main(ActivityThread.java:4745)
AndroidRuntime:     at java.lang.reflect.Method.invokeNative(Native Method)
AndroidRuntime:     at java.lang.reflect.Method.invoke(Method.java:511)
AndroidRuntime:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
AndroidRuntime:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
AndroidRuntime:     at dalvik.system.NativeStart.main(Native Method) 
```

谢谢

# mysql - 从表 MySQL 中选择最后 20 个最新的唯一 URL

> ID：15751756
> 
> 赞同：0
> 
> 时间：2013-04-01T20:56:52.860
> 
> 标签：mysql, database

表结构：

```
CREATE TABLE Test(
  ID PRIMARY KEY AUTO_INCREMENT,
  UserID INT,
  URL VARCHAR(255),
  MyTime DATETIME
)engine=myisam; 
```

样本数据：

```
 ID      UserID        URL                MyTime
 1        555        /index         2013-04-01 16:43:21
 2        777        /user          2013-03-01 16:43:21
 3        555        /user          2013-03-01 13:00:00
 4        555        /panel         2013-03-01 16:00:00
 5        555        /panel         2013-03-03 15:00:00 
```

现在查询假设选择**URL**不是**/index**的所有数据，因为**/index**是主页，所以我希望它被忽略。此外，它选择的数据必须是忽略**/index数据的****10**条最新记录。如果它落在最后 10 条记录中，它也必须忽略相同的 URL，这意味着如果同一用户多次访问同一页面，我只需要选择其中一个来包含在该**限制 10**中。这将忽略**id 为 4的****/panel**页面

 ********因此用户555**所需的输出将是：

```
 ID      UserID        URL                MyTime
 3        555        /user          2013-03-01 13:00:00
 5        555        /panel         2013-03-03 15:00:00 
```

我的尝试：

```
 SELECT *
 From Test
 WHERE URL NOT LIKE '%/index%' AND UserID = '555'
 ORDER BY MyTime DESC
 LIMIT 10 
```

此查询选择过去**10**条数据，但它包含重复的**URL**，我如何摆脱重复的 URL 并仅获取具有唯一 URL 的最新**10**条记录？

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:05:56.580

您想将 GROUP BY 函数与子查询一起使用。如果您只想查看 url，您可以使用 subQuery。

```
SELECT *
FROM Test INNER JOIN
  (SELECT url, max(mytime) maxtime
   FROM Test
   WHERE URL NOT LIKE '%/index%' 
   AND UserID = '555'
   GROUP BY url) n on test.url = n.url AND n.maxtime = Test.mytime
ORDER BY maxtime DESC
LIMIT 20 
```******

# ajax - MVC Ajax 部分视图未缓存：唯一元素 ID

> ID：15751757
> 
> 赞同：0
> 
> 时间：2013-04-01T20:56:53.573
> 
> 标签：ajax, asp.net-mvc, caching, partial-views, unique-id

我有一个局部视图，我通过调用类似于[这里描述的函数来动态加载它](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

```
$("#addItem").click(function() {
  $.ajax({
      url: this.href,
      cache: false,
      success: function(html) { $("#editorRows").append(html); }
  });
   return false;
}); 
```

如上所述，缓存设置为 false 以保持元素的唯一性。上面的代码是如何实现这一点的？也就是说，分配给元素的新 ID 是什么？如何控制这些 ID？

我有一个局部视图，其中每个我将控件的 id 传递给另一个控件。但是，在动态呈现部分视图后，我不知道如何执行此操作。我需要一些方法来找出分配给每个元素的新 ID。

# java - servlet什么时候释放它的线程

> ID：15751761
> 
> 赞同：3
> 
> 时间：2013-04-01T20:57:01.217
> 
> 标签：java, multithreading, servlets, nginx

假设没有保持活动状态，当 servlet 容器充当独立服务器时，我假设 servlet 的线程在整个响应发送到客户端（例如 Web 浏览器）之前不会被释放。这是一个正确的假设吗？

但是如果 servlet 位于像 Nginx 这样的反向代理之后会发生什么？一旦响应被传递到 Nginx，线程是被释放的，还是在响应被发送到它的最终客户端（比如浏览器）之前被保留？

更新：让我试着更清楚一点。

响应从 servlet 发送到像 nginx 这样的代理只需要几毫秒（比如 2 毫秒）。但最终响应从 nginx 发送到浏览器可能需要额外的 80 毫秒（左右）时间。一旦响应发送到 nginx，servlet 是否释放线程/流，或者 servlet 是否保留它们直到响应发送到浏览器（即整个 80 毫秒）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:01:49.007

**问题：**我假设 servlet 的线程在整个响应发送到客户端（比如 Web 浏览器）之前不会被释放。这是一个正确的假设吗？

**答：**不，这是错误的。Servlet 容器只会将内容写入套接字并返回。不保证 write() 方法的返回将确保响应已到达客户端。

**问题：**线程是在响应传递到 Nginx 后释放，还是在响应发送到最终客户端（例如浏览器）之前保持线程？

**Ans：**当 Nginx 落后时，Servlet 容器的客户端是 Nginx。它不知道实际的远程客户端。因此，一旦将响应写入 Nginx，线程将被释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T21:26:54.227

服务器容器无法向客户端发送响应将触发将由容器处理的异常。您可以通过 try catch finally（使用 close()）将写入包含在输出流或写入器中，但您不需要，容器将进行管理，包括将线程返回到池中。问候小号

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T22:13:50.843

servlet 看不到网络。根据[规范](http://www.oracle.com/technetwork/java/index-jsp-135475.html)处理 2 个对象：一个 Request 和一个 Response 要填写（在 HTTP 的情况下，这意味着一个 HTTPRequest 和一个 HTTPResponse）。它应处理请求对象内的请求数据，并写入响应对象中的缓冲区。一旦 servlet 提交了该内容*，*容器可能会进行一些后处理（使用过滤器）并将其传输回客户端。

一旦对请求处理方法的调用完成，servlet 线程就会自然地返回到池中（如果方法必须做进一步的工作，这可能发生在有效负载被发送回客户端之后。

请注意，由于 servlet 看不到网络并且只关心单个请求，因此 http 连接的状态（保持活动或关闭）与 servlet 生命周期无关；几个 servlet 可以处理在单个连接中流水线化的不同请求。有关相关问题，请参阅此[问题](https://stackoverflow.com/questions/13297126/managing-keep-alive-http-connection-inside-servlet)。

# encryption - Elgamal 加密和解密

> ID：15751764
> 
> 赞同：1
> 
> 时间：2013-04-01T20:57:15.127
> 
> 标签：encryption, elgamal

如果游戏通过 Elgamal 发送加密数据并且您拥有 (pgy) 而游戏应该发送 a=g^k mod p 和 b=(msg)*y^k mod p，那么您将收到 (a,b) 和收到的 msg 是十六进制形式，例如 w/e ...................... 这只是示例（不是真正的十六进制）

```
 91 12 d4 a5 2a 1c e5 9a 4b 91 12 d4 a5 2a 1c e5 9a 4b 91 12 d4 a5 2a 1c e5 9a 4b 91 12 d4 a5 2a 1c e5 9a 4b 91 12 d4 a5 2a 1c e5 9a 4b 91 12 d4 a5 2a 1c e5 9a 4b 91 12 d4 a5 2a 1c e5 9a 4b 91 12 d4 a5 2a 1c e5 9a 4b 91 12 d4 a5 2a 1c e5 9a 4b 91 12 d4 a5 2a 1c e5 9a 4b 91 12 d4 a5 2a 1c e5 9a 4b 91 12 d4 a5 2a 1c e5 9a 4b 
```

...我怎么知道a在哪里，b在哪里？反正有认识他们吗？所以我可以解密它们。注意：我有（pgy）哪个游戏使用

# solr - Solr 4.1 dismax pf 未返回预期结果

> ID：15751766
> 
> 赞同：1
> 
> 时间：2013-04-01T20:57:20.490
> 
> 标签：solr, dismax

我正在使用 solr4.1 和 qt=dismax。我也有一套类似的 solr1.4。

当我使用 pf 字段查询 solr 4.1 时，返回的结果在顶部没有匹配短语的文档。在我之前安装的 solr 1.4 中，我得到了正确的结果，即具有短语的文档的排名确实高于没有短语的文档。

在 solrconfig.xml 我有这个配置：

```
 <requestHandler name="dismax" class="solr.SearchHandler" >
    <lst name="defaults">
        <str name="defType">dismax</str>
        <str name="echoParams">explicit</str>
        <float name="tie">1.0</float>
    </lst>
    </requestHandler> 
```

我的查询如下所示：

> qt=dismax&q=product%20manager&qf=summ_svc_descr+skills+past_proj_tag+past_proj_name+past_proj_descr+login_name+business_name+primary_state+primary_country+primary_city+tagline+dtl_svc_descr+keywords+about_us+parent_cat_name+experience+credentials+past_cat_name+any_group_login_= dtl_svc_descr+uniq_id,login_name,login_userid,parent_cat_name,parent_cat_id,net_score,business_name,business_name_sort,primary_state,primary_country,primary_city,primary_zip,reviews_positive_12mos,reviews_12mos,feedback_avg_12mos,earnings_12mos,reviews_positive_6mos,reviews_6mos,feedback_avg_6mos,earnings_6mos,earnings_overall,tagline,summ_svc_descr,hourly_rate, is_individual,user_id,score,tier_seller_id,file_upload_id,file_upload_name,new_provider,is_team,team_cnt,skill_ids,skills,portfolio_yn,jobs_accepted_12mos,is_agent,company_userid,company_login_name,company_business_name,available_y**&pf=summ_svc_descr^1.2+skills^1.8+past_proj_tag+past_proj_name+past_proj_descr+experience+credentials+tagline^1.8+dtl_svc_descr^1.2+keywords+about_us^1.2**&rows=25&start= json

当我检查调试输出时，我看到 parsedquery 也确实评估了短语：

> 管理 | 经验：管理 | dtl_svc_descr:manag | 主要状态：经理 | 主要国家：经理 | 主要城市：经理 | 组：管理 | 标语：manag)~1.0)~2) （技能：“产品管理”~1^1.8 | about_us:“产品管理”~1^1.2 | 关键词：“产品管理”~1 | 过去项目名称：“产品管理”~1 | past_proj_descr:"产品管理"~1 | summ_svc_descr:"产品管理"~1^1.2 | past_proj_tag:"产品管理"~1 | 经验:"产品管理"~1 | 凭证:"产品管理"~1 | dtl_svc_descr: “产品经理”~1^1.2 | 标语：“产品经理”~1^1.8)~1.0" 8 | about_us:"产品管理"~1^1.2 | 关键词：“产品经理”~1 | past_proj_name:"产品管理"~1 | past_proj_descr:"产品管理"~1 | summ_svc_descr:"产品管理"~1^1.2 | past_proj_tag:"产品管理"~1 | 经验：“产品经理”~1 | 凭据：“产品经理”~1 | dtl_svc_descr:"产品管理"~1^1.2 | 标语：“产品管理”~1^1.8)~1.0" 8 | about_us:"产品管理"~1^1.2 | 关键词：“产品经理”~1 | past_proj_name:"产品管理"~1 | past_proj_descr:"产品管理"~1 | summ_svc_descr:"产品管理"~1^1.2 | past_proj_tag:"产品管理"~1 | 经验：“产品经理”~1 | 凭据：“产品经理”~1 | dtl_svc_descr:"产品管理"~1^1.2 | 标语：“产品管理”~1^1.8)~1.0" 2 | 标语：“产品管理”~1^1.8)~1.0" 2 | 标语：“产品管理”~1^1.8)~1.0"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:23:13.830

我发现了这个问题。为了大家的利益发布答案。

**pf 参数和输出本身没有任何问题。这只是一个更深层次问题的症状。**

定义了一个自定义相似性类（开发人员在我之前从架构文件中找到它），导致许多文档的 fieldNorm 为 0。多亏了详细的 debugQuery 输出，我才能够找到问题，并且还弄清楚了如何进行每个字段的相似性。此外，我曾尝试使用 Solr 提供的默认相似性类，但这无助于获得结果，因为我没有重新索引文档。如果我重新索引文档，那么自定义相似性是罪魁祸首会更清楚。

**Solr 在索引和查询时间都使用 Similarity 类。因此，每当您选择更改架构中的相似性类时，如果您希望新的相似性类完全生效，您很可能需要重新索引所有文档。**

# cucumber - cucumber：字符串到活动记录模型名称

> ID：15751771
> 
> 赞同：0
> 
> 时间：2013-04-01T20:57:42.280
> 
> 标签：cucumber, bdd

我正在尝试做一个 DRY cucumber 功能，但我遇到了将字符串转换为 ActiveRecord 模型名称的问题

```
Given /^the following "(.+)" exist:/ do |mod, table|
  table.hashes.each do |t|
   mod.create!(t)
  end
  assert mod.all.count == table.hashes.size
end 
```

这给了

```
undefined method `create!' for "Balloon":String (NoMethodError) 
```

更优雅的解决方案可能是使用工厂，但我想知道是否可以使用上述方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:07:17.240

您可以查看`constantize`哪个[将 String 转换为 constant](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-constantize)。尝试：

```
"Balloon".constantize.create!(t) 
```

**但是：**在 Cucumber 步骤中使用您的应用程序代码（特别是模型）是代码异味。你的集成测试根本不应该依赖于被测代码——当你实现 Cucumber 步骤时，把你的应用程序想象成一个黑盒子。（还可以考虑对模型进行重构，这需要您返回并更改 Cucumber 步骤——这是您走错路的第一个线索！）

您可以做些什么来改进这一点是使用 API 创建模型（如果您的应用程序实现了一个）。

这样，您只依赖应用程序中面向公众的那些部分。

**另一方面：**你`Given`不应该有一个断言，它更像是`before`RSpec 中的一个钩子，为以后的断言设置一个条件......

# java - `Client.findById(id)` 是什么意思？

> ID：15751773
> 
> 赞同：0
> 
> 时间：2013-04-01T20:57:46.257
> 
> 标签：java, playframework, playframework-2.0

浏览 Java 的 Play 文档，我注意到以下代码块：

```
public static Result show(Long id) {
  Client client = Client.findById(id);
  return ok(views.html.Client.show(client));
} 
```

来源：[http ://www.playframework.com/documentation/2.1.0/JavaRouting](http://www.playframework.com/documentation/2.1.0/JavaRouting)

我在理解第二行时遇到了一些麻烦，我对 Java 对象创建的理解是一个典型的构造函数，如下所示：

```
Person john = new Person(); 
```

第二行在做什么？从名为Client的类创建一个名为client的对象，什么是Client？它似乎不是 Play Framework 的一部分，当然我在 JavaDocs 中找不到任何东西。

谢谢

**编辑：**

我发现这是答案的一个很好的参考点（[http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)）

另外我认为 Client 类来自以下文档（[http://www.playframework.com/documentation/1.1.1/controllers](http://www.playframework.com/documentation/1.1.1/controllers)），其中 Client 只是一个示例模型类，新文档可能需要更新以消除这种混乱.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:59:51.403

必须有一个在返回某个对象的类上`static`调用的方法。该对象被传递给一个方法，该方法返回一个对象。`show(Client)``views.html.Client``ok(whatever)``ok``Result`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:09:34.537

很明显，该类`Client`有一个静态函数`findById`，它接受 a`Long`并返回 a `Client`。静态函数是在不访问对象属性的情况下定义的函数，因此可以通过类名访问，而不必通过对象访问。最有可能的是，该类有一个静态属性，其中包含系统中所有客户端的集合（按索引），并从该列表中获取`findById`一个现有的。`Client`

但是，我真的不知道该类`Client`的定义在哪里。我也快速浏览了一下，在明显的地方找不到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T07:32:18.107

您缺少一些基本知识/经验。您提供的示例与此代码段无关，`routes`在此代码段中只有第一行很重要，第二行只是一些*假设*的用法。事实上，它可能只是...

```
public static Result show(Long id) {
  return ok("You want to display details of client with ID: " + id);
} 
```

尽管@BenBarden 正确解释了这是什么意思，但此静态方法**并未**在任何地方声明，它（再次）是某些 ORM 的假设用法。例如，Ebean 模型的实际用法是：

```
Client = Client.find.byId(id); 
```

当然，您也可以在`Client`模型中声明自己的方法并将其命名为与示例中相同的名称，但它只是包装器：

```
public static Finder<Long, Client> find
        = new Finder<>(Long.class, Client.class);

public Client findById(Long id) {
    return find.byId(id);
} 
```

### 结论

*   您需要检查您的 Play 源中可用的一些示例，以熟悉一些基本语法，幸运的是您会发现它很容易。
*   **不要**将 Play 1.x 中的文档与 Play 2.x 混合使用，它们**不**兼容！

# django - Django - 两个身份验证系统在同一个项目中完全分离

> ID：15751775
> 
> 赞同：2
> 
> 时间：2013-04-01T20:57:58.643
> 
> 标签：django, authentication

我有一个使用 django 的项目。现在需要完全分离身份验证系统（具有不同的表、身份验证后端、用户、用户信息等）。

*   有没有办法制作 django 而不是设置 request.user, 设置`request.myotherappuser`？
*   那么默认的身份验证系统呢，我还能用它来验证那些“新用户”并让他​​们登录吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:41:18.247

我从你的短语“验证那些'新用户'并让他们登录”中假设你有一些你希望从中验证人的遗留系统？

为什么不[编写一个自定义身份验证后端](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#authentication-backends)，让人们在旧后端登录，然后在其中创建一个“新”帐户`django.contrib.auth`？

您还可以使用 Dj1.5 创建用户模型的扩展，允许您引用“旧”表，如`request.user.myappotheruser`.

# c# - 如何向 DataGridViewComboBoxColumn 数据源添加值？

> ID：15751776
> 
> 赞同：0
> 
> 时间：2013-04-01T20:58:02.777
> 
> 标签：c#, .net, datasource, datagridviewcombobox

我有一个问题，其中我有一个`DataGridViewComboBoxColumn`in a`DataGridView`并且我想将一个项目添加到`DataSource`.

我最初将 DataSource 属性设置为 a`List<string>`可以正常工作。稍后我将在此列表中添加一个项目，它工作正常。但是当我尝试在组合框中选择此项目时，我收到数据验证错误，

> System.ArgumentException：DataGridViewComboBoxCell 值无效。

此外，我实际上无法将组合框设置为新添加的值。

这是一个完整的示例。

```
public partial class Form1 : Form
{
    List<string> Data { get; set; }

    public Form1()
    {
        InitializeComponent();

        // Populate our data source
        this.Data = new List<string> { "Thing1", "Thing2" };

        // Set up controls
        var gvData = new System.Windows.Forms.DataGridView();
        var col1 = new System.Windows.Forms.DataGridViewComboBoxColumn();
        var button = new System.Windows.Forms.Button();

        gvData.Columns.AddRange(new System.Windows.Forms.DataGridViewColumn[] { col1 });

        // Set the column's DataSource
        col1.DataSource = this.Data;
        col1.HeaderText = "Test";
        col1.Name = "col1";

        // Set up a button which adds something to the source
        button.Text = "Add";
        button.Location = new System.Drawing.Point(0, 200);
        button.Click += (e, s) => this.Data.Add("Thing3");

        this.Controls.Add(gvData);
        this.Controls.Add(button);
    }
} 
```

如何将项目添加到`DataSource`for my `DataGridViewComboBoxColumn`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:02:39.253

改变

`button.Click += (e, s) => this.Data.Add("Thing3");`

到

```
 button.Click += (e, s) =>
           {
                col1.DataSource = null;
                this.Data.Add("Thing3");
                col1.DataSource = Data;
           }; 
```

对我有用。

# css - How to change default styles for IE required elements?

> ID：15751785
> 
> 赞同：3
> 
> 时间：2013-04-01T20:58:30.990
> 
> 标签：css, html, internet-explorer-10, required

IE 10 is giving me undesired UI for `input` elements that include a `required` attribute. For type=text, it’s a tooltip and for checkboxes, a red border.

I’ve figured out how to prevent such things in Chrome and Firefox (via pseudo-selectors). Are there selectors for these in IE, or other methods?

![enter image description here](https://i.stack.imgur.com/lO8d8.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T22:32:06.970

看起来像红色边框的东西似乎只是一个轮廓，可以使用`outline`CSS 中的属性修改或删除它，例如使用设置为一个像素宽`outline-width: 1px`或使用删除`outline: none`。

工具提示可能是您无法设置样式的东西。请注意，IE 上的必填字段有两种工具提示：一种是在鼠标悬停时获得的（一个简单的小框），另一种是在尝试提交没有必填字段值的表单时获得的（一个较大的框有一个箭头状的部分，如屏幕截图所示）。

# javascript - 如果用户单击返回按钮，如何捕捉？

> ID：15751787
> 
> 赞同：0
> 
> 时间：2013-04-01T20:58:39.900
> 
> 标签：javascript, jquery

我正在使用此代码段，它适用于所有操作，除非用户单击后退按钮离开页面。

```
$(window).bind('hashchange', function () 
{
    $.post("track.php", 
    {
        ip: ip,
        referer: referer,
    });
});

$(window).bind('beforeunload', function () 
{
    $.post("track.php", 
    {
        ip: ip,
        referer: referer,
    });
});

$(window).unload(function () 
{
    $.post("track.php", 
    {
        ip: ip,
        referer: referer,
    });
}); 
```

如果用户点击后退按钮，是否有可能捕捉到？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:59:48.203

使您的 ajax 请求同步。这在我最后检查的歌剧中不起作用。

```
$.ajax({
    async: false
}); 
```

# javascript - WebGL drawElements超出范围？

> ID：15751791
> 
> 赞同：17
> 
> 时间：2013-04-01T20:59:17.267
> 
> 标签：javascript, webgl

我正在使用 WebGL 尝试学习它，所以我从 webgl 教程中获取了一些代码，并尝试添加我自己的行，但是每当我运行它时，它都会给我这个错误：

```
.WebGLRenderingContext: GL ERROR :GL_INVALID_OPERATION : glDrawElements: attempt to access out of range vertices in attribute 0 
```

注意：属性 0 是我的顶点缓冲区

我的缓冲区初始化代码是（如果没有定义，显然假设全局变量）

```
 cubeVertexPositionBuffer = gl.createBuffer(); // create a buffer
gl.bindBuffer(gl.ARRAY_BUFFER, cubeVertexPositionBuffer);

//for laziness
var _f=1.0/3.0;

vertices = [ // this is code from the tutorial
// Front face
-1.0, -1.0, 1.0, 1.0, -1.0, 1.0, 1.0, 1.0, 1.0, -1.0, 1.0, 1.0,
// Back face
-1.0, -1.0, -1.0, -1.0, 1.0, -1.0, 1.0, 1.0, -1.0, 1.0, -1.0, -1.0,
// Top face
-1.0, 1.0, -1.0, -1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, -1.0,
// Bottom face
-1.0, -1.0, -1.0, 1.0, -1.0, -1.0, 1.0, -1.0, 1.0, -1.0, -1.0, 1.0,
// Right face
1.0, -1.0, -1.0, 1.0, 1.0, -1.0, 1.0, 1.0, 1.0, 1.0, -1.0, 1.0,
// Left face
-1.0, -1.0, -1.0, -1.0, -1.0, 1.0, -1.0, 1.0, 1.0, -1.0, 1.0, -1.0, 

// this is my own code
-1.0+  _f, -1.0, 1.0,   -1.0+  _f, -1.0, -1.0,
-1.0+2*_f, -1.0, 1.0,   -1.0+2*_f, -1.0, -1.0,
-1.0+3*_f, -1.0, 1.0,   -1.0+3*_f, -1.0, -1.0,
-1.0+4*_f, -1.0, 1.0,   -1.0+4*_f, -1.0, -1.0,
-1.0+5*_f, -1.0, 1.0,   -1.0+5*_f, -1.0, -1.0

];
gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices),
        gl.STATIC_DRAW);
cubeVertexPositionBuffer.itemSize = 3;
cubeVertexPositionBuffer.numItems = 34;

    // color buffer code is irrelevant because my color buffer is attribute 1 not 0
    // plus it's all copied from the tutorial

    // index buffer 
    // note I changed some code so the cube drawn is wireframe instead of solid
    // I tested that without extra vertex or index buffer data and it worked
    cubeVertexIndexBuffer = gl.createBuffer(); // this modified a bit from the tutorial
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, cubeVertexIndexBuffer);
cubeVertexIndices = 
    [ 0, 1, 2, 3, 0, // Front face 
      4, 5, 6, 7, 4, // Back face 
      8, 9, 10, 11, 8, // Top face 
      12, 13, 14, 15, 12, // Bottom face 
      16, 17, 18, 19, 16, // Right face 
      20, 21, 22, 23, 20, // Left face

      // this is my code
      24, 25, 26, 27, 28, 29, 30, 31, 32, 33
    ];
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(
        cubeVertexIndices), gl.STATIC_DRAW);
cubeVertexIndexBuffer.itemSize = 1;
cubeVertexIndexBuffer.numItems = 40; 
```

这是我的绘图代码

```
// set up perspective and stuff
    gl.bindBuffer(gl.ARRAY_BUFFER, cubeVertexPositionBuffer);
gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute,
        cubeVertexPositionBuffer.itemSize, gl.FLOAT, false, 0, 0);

gl.bindBuffer(gl.ARRAY_BUFFER, cubeVertexColorBuffer);
gl.vertexAttribPointer(shaderProgram.vertexColorAttribute,
        cubeVertexColorBuffer.itemSize, gl.FLOAT, false, 0, 0);

gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, cubeVertexIndexBuffer);

gl.uniformMatrix4fv(shaderProgram.pMatrixUniform, false, pMatrix); // perspective matrix
gl.uniformMatrix4fv(shaderProgram.mvMatrixUniform, false, mvMatrix); // model view matrix

gl.lineWidth(1.0);
gl.drawElements(gl.LINES, cubeVertexIndexBuffer.numItems,
        gl.UNSIGNED_SHORT, 0); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-01T23:51:49.340

其实我想通了。作为我的 WebGL 新手，我设法忘记为我的颜色缓冲区中的每个顶点添加索引。我从来没有想到我的着色器要求每个顶点都有颜色。（不过，如果 WebGL 说这是属性 1（我的颜色属性）而不是属性 0（我的顶点位置属性）中的错误，那就太好了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-11T08:20:03.360

如果您在以下位置分配的 bufferData 也可能出现此问题：

```
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(
    cubeVertexIndices), gl.STATIC_DRAW); 
```

太短（见第二个参数）。

如果以编程方式创建顶点，就会发生这种情况。至少，这就是发生在我身上的方式。

# c++ - 装饰器模式 - 我如何不在初始化时调用复制构造函数？

> ID：15751794
> 
> 赞同：1
> 
> 时间：2013-04-01T20:59:44.577
> 
> 标签：c++, decorator, copy-constructor

我在尝试使用装饰器模式时遇到问题。构造函数正在打印出用于调试的地址。编译：

```
g++ -g -o go Decorator.cpp 
```

我的简化代码：

```
#include <iostream>

class Base
{
public:
    Base()
    {
        std::cout << "Base created - this: " << this << std::endl;
    }
    virtual ~Base() {}
};

class Decorator : public Base
{
public:
    Decorator(const Base & decorated)
    : _decorated(&decorated)
    {
        std::cout << "Decorator created - this: " << this << " created - _decorated is " << _decorated << std::endl;
    }

    ~Decorator()
    {
        std::cout << "Decorator destroyed" << std::endl;
        std::cout << "  This: " << this << ", _decorated: " << _decorated << std::endl;
    }

private:
    const Base * _decorated;
};

class Inside : public Base
{
public:
    Inside()
    {   std::cout << "Inside created - this: " << this << std::endl;   }
};

class Outside : public Decorator
{
public:
    Outside(const Base & decorated)
    : Decorator(decorated)
    {
        std::cout << "Outside created - this: " << this << std::endl;
    }
};

class Group : public Decorator
{
public:
    Group()
    : Decorator(_outside)
    , _outside(_inside)
    {
        std::cout << "Group created - this: " << this << std::endl;
    }

    ~Group()
    {
        std::cout << "Group destroyed" << std::endl;
    }

private:
    Inside  _inside;
    Outside _outside;
};

int main()
{
    std::cout << "Hi there" << std::endl;

    Group g1;

    std::cout << "Done" << std::endl;
} 
```

我的问题出在 Group::Group() 中。我相信用未初始化的 _outside 初始化 Group 的 Decorator 基础部分很好 - Decorator 唯一想要的是指向对象的指针。我的问题是 Decorator(_outside) 似乎正在调用我不想要的复制构造函数。

gdb 善良：

```
Breakpoint 1, _fu0___ZSt4cout () at Decorator.cpp:63
63          Group g1;
(gdb) print g1
$1 = {<Decorator> = {<Base> = {_vptr.Base = 0x77c34e29},
    _decorated = 0x77c34e42}, _inside = warning: can't find linker symbol for vi
rtual table for `Inside' value
{<Base> = {
      _vptr.Base = 0x401a90}, <No data fields>},
  _outside = {<Decorator> = {<Base> = {_vptr.Base = 0x22ff58},
      _decorated = 0x401af6}, <No data fields>}} 
```

我在 g1 的构造函数之前中断并将几个 _decorated 成员写入已知值以帮助调试。

```
(gdb) set g1._decorated = 0
(gdb) set g1._outside._decorated = 0xeeeeeeee
(gdb) print g1
$2 = {<Decorator> = {<Base> = {_vptr.Base = 0x77c34e29}, _decorated = 0x0},
  _inside = warning: can't find linker symbol for virtual table for `Inside' val
ue
{<Base> = {_vptr.Base = 0x401a90}, <No data fields>},
  _outside = {<Decorator> = {<Base> = {_vptr.Base = 0x22ff58},
      _decorated = 0xeeeeeeee}, <No data fields>}}
(gdb) n
Base created - this: 0x22ff34
Inside created - this: 0x22ff34
Base created - this: 0x22ff38
Decorator created - this: 0x22ff38 created - _decorated is 0x22ff34
Outside created - this: 0x22ff38
Group created - this: 0x22ff2c
65          std::cout << "Done" << std::endl;
(gdb) print g1
$3 = {<Decorator> = {<Base> = {_vptr.Base = 0x4042b8},
    _decorated = 0xeeeeeeee}, _inside = {<Base> = {
      _vptr.Base = 0x4042c8}, <No data fields>},
  _outside = {<Decorator> = {<Base> = {_vptr.Base = 0x4042d8},
      _decorated = 0x22ff34}, <No data fields>}} 
```

在构造函数之后，g1._decorated 将 _outside._decorated 的未初始化值作为其 _decorated 成员，这意味着复制构造函数已被调用。如果我将复制构造函数代码添加到类装饰器：

```
Decorator(const Decorator & that)
{   std::cout << "Copy constructor - this: " << this << " - that: " << &that << std::endl;   } 
```

它实际上调用它。

如果我将 Group 构造函数的第二行从

```
: Decorator(_outside) 
```

到

```
: Decorator(static_cast<const Base &>(_outside)) 
```

并运行 gdb

```
Breakpoint 1, _fu0___ZSt4cout () at Decorator.cpp:63
63          Group g1;
(gdb) print g1
$1 = {<Decorator> = {<Base> = {_vptr.Base = 0x77c34e29},
    _decorated = 0x77c34e42}, _inside = warning: can't find linker symbol for vi
rtual table for `Inside' value
{<Base> = {
      _vptr.Base = 0x401a90}, <No data fields>},
  _outside = {<Decorator> = {<Base> = {_vptr.Base = 0x22ff58},
      _decorated = 0x401af6}, <No data fields>}}
(gdb) set g1._decorated = 0
(gdb) set g1._outside._decorated = 0xeeeeeeee
(gdb) print g1
$2 = {<Decorator> = {<Base> = {_vptr.Base = 0x77c34e29}, _decorated = 0x0},
  _inside = warning: can't find linker symbol for virtual table for `Inside' val
ue
{<Base> = {_vptr.Base = 0x401a90}, <No data fields>},
  _outside = {<Decorator> = {<Base> = {_vptr.Base = 0x22ff58},
      _decorated = 0xeeeeeeee}, <No data fields>}}
(gdb) n
Base created - this: 0x22ff2c
Decorator created - this: 0x22ff2c created - _decorated is 0x22ff38
Base created - this: 0x22ff34
Inside created - this: 0x22ff34
Base created - this: 0x22ff38
Decorator created - this: 0x22ff38 created - _decorated is 0x22ff34
Outside created - this: 0x22ff38
Group created - this: 0x22ff2c
65          std::cout << "Done" << std::endl;
(gdb) print g1
$3 = {<Decorator> = {<Base> = {_vptr.Base = 0x4042b8},
    _decorated = 0x22ff38}, _inside = {<Base> = {
      _vptr.Base = 0x4042c8}, <No data fields>},
  _outside = {<Decorator> = {<Base> = {_vptr.Base = 0x4042d8},
      _decorated = 0x22ff34}, <No data fields>}} 
```

装饰器复制构造函数没有被调用，一切似乎都很好。我不喜欢这个解决方案，因为它要求下游的每个班级都记得这样做。

有什么方法可以从 Decorator 派生 Group 并使用 Decorator 成员而不调用复制构造函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:13:37.083

> 我的问题是 Decorator(_outside) 似乎正在调用我不想要的复制构造函数。

你期望它做什么？

`Decorator`没有构造函数，`Outside`因此符合条件的构造函数是：

```
Decorator(const Base&) 
```

或隐式定义的复制构造函数：

```
Decorator(const Decorator&) 
```

第一个选项涉及从`Outside`to的隐式转换，`Base`而第二个选项涉及从 to 的转换`Outside`，`Decorator`这是一个“更好”的转换，因为`Outside`to`Base`转换“通过”`Decorator`到 get `Base`。

正如您所发现的，要调用您想要的构造函数，您需要显式地进行所需的转换：

```
Decorator(static_cast<Base&>(_outside)) 
```

这是必要的，因为您传递的类型*确实是*a`Decorator`所以它当然更喜欢复制构造函数。

另一种解决方案是添加一个构造函数来代替复制构造函数，例如一个模板，适当地约束：

```
template<typename T>
  Decorator(const T& decorated, typename boost::enable_if<boost::is_base_of<T, Base> >* = 0)
  : _decorated(&decorated)
  { } 
```

这将用于派生于`Base`但不是 a`Base`且不是 a 的任何内容`Decorator`

在 C++11 中，你可以让它更干净一些

```
template<typename T,
         typename Requires = typename std::enable_if<std::is_base_of<T, Base>::value>>
  Decorator(const T& decorated)
  : _decorated(&decorated)
  { } 
```

# c# - 实体框架一对多与默认

> ID：15751798
> 
> 赞同：3
> 
> 时间：2013-04-01T20:59:47.060
> 
> 标签：c#, entity-framework, one-to-many

我正在尝试在实体框架中建立一对多关系，其中许多项目之一被可选地指定为默认值。

```
public class SomeEntity
{
    public int Id { get; set; }
    public Item DefaultItem { get; set; }          // Optional
    public ICollection<Item> Items { get; set; }
}

public class Item
{
    public int Id { get; set; }
    public string ItemName { get; set; }
    public SomeEntity SomeEntity { get; set; }
} 
```

fluent API 中的一对多配置看起来非常简单：

```
HasMany(e => e.Items).WithRequired(i => i.SomeEntity).WillCascadeOnDelete(true); 
```

但是实现默认项目的解决方案已被证明是难以捉摸的。我尝试了这个（以及各种变体），但没有运气。它告诉我“指定的架构无效”。

```
HasOptional(e => e.DefaultItem).WithRequired(i => i.SomeEntity); 
```

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T00:37:17.957

这有点不典型的“设置”（它通常通过项目上的一些“标志”来指定——但我可能会看到需要类似的东西），并将一个项目与同一个父项关联两次。

但是，这应该工作......

```
modelBuilder.Entity<SomeEntity>()
    .HasOptional(x => x.DefaultItem)
    .WithOptionalPrincipal() // x => x.DefaultForEntity)
    .WillCascadeOnDelete(false);
...
// public SomeEntity DefaultForEntity { get; set; } // optional 
```

...并像这样使用它：

```
var item = new Item { ItemName = "Default1", };
db.SomeEntities.Add(new SomeEntity { DefaultItem = item, Items = new[]
{
    item,
    new Item{ ItemName = "Item1", },
    new Item{ ItemName = "Item2", },
    new Item{ ItemName = "Item3", },
    new Item{ ItemName = "Item4", },
}
});
db.SaveChanges(); 
```

# windows - 用于选择一个或无的 Windows GUI 控制选项

> ID：15751800
> 
> 赞同：0
> 
> 时间：2013-04-01T20:59:49.217
> 
> 标签：windows, winforms, user-interface

比如说，如果我有一个 GUI 控件，允许用户选择**none***或* **仅**选择多项选择选项之一。我用什么？

复选框：

![在此处输入图像描述](https://i.stack.imgur.com/i6Za0.png)

还是收音机盒子？

![在此处输入图像描述](https://i.stack.imgur.com/J2n8r.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:00:43.507

使用单选按钮并提供某种“以上都不是”选项——这就是他们的工作描述。

（尽管下拉列表也可以同样有效。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T21:02:14.863

一旦做出选择，就不能取消选择单选按钮，除非为此目的提供了单独的 UI 元素。这样的附加元素将是非标准的，因此容易使一些用户感到困惑。

第一个选项为（无）或留空的下拉列表是一种相当常见的方法，似乎可以满足您的需求。

带有（无）选项的单选按钮同样可行，但实际上我还没有看到。单选按钮也往往比等效的选择框占用更多的 UI 空间。

我已经看到带有附加逻辑的复选框，以确保只选择一个选项，但这是一种非标准的 UI 行为，并且再次容易混淆一些用户。

**更新**

来自维基百科关于 Checkbox UI 元素的文章，以及为什么选中一个复选框以取消选中其他复选框的行为是不好的：

> 设置或清除复选框会更改复选框的状态，而不会产生其他副作用。通过将附加操作与状态更改相关联来违反此准则经常会使用户感到困惑，因为他们习惯于在输入控件（例如文本框、单选按钮和复选框）中配置数据，然后调用操作控件（例如按钮）来启动处理数据的动作。

[http://en.wikipedia.org/wiki/Checkbox#Not_actionable](http://en.wikipedia.org/wiki/Checkbox#Not_actionable)

# mysql - MySQL：在 SQLException 上将会话变量设置为 NULL

> ID：15751805
> 
> 赞同：1
> 
> 时间：2013-04-01T21:00:04.377
> 
> 标签：mysql, sql, triggers, sqlexception

我在表'a'上有一个插入前触发器，它基本上复制并转换查询以插入表'b'。这是此触发器的伪代码示例：

```
FOR EACH ROW
BEGIN
  IF @inserting IS NULL THEN
    SET @inserting = 1;
    INSERT INTO b SET
      col1 = NEW.col1
      col2 = NEW.cola
      col3 = some_stored_proc(NEW.col3);
    SET @inserting = NULL;
  END IF
END 
```

但是，您可能会注意到，`@inserting`如果 INSERT 失败，它将保留为 1。如果插入到表“b”失败，我需要确保将其设置回 NULL，同时导致表“a”上的原始插入也失败（以免两者之间的数据不匹配）。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:13:37.993

经过一番研究，我发现[DECLARE...HANDLER](http://dev.mysql.com/doc/refman/5.5/en/declare-handler.html)和[RESIGNAL](http://dev.mysql.com/doc/refman/5.5/en/resignal.html)可以解决这个问题。

```
FOR EACH ROW
BEGIN
  DECLARE EXIT HANDLER FOR SQLEXCEPTION
  BEGIN
    SET @inserting = NULL;
    RESIGNAL;
  END;
  IF @inserting IS NULL THEN
    SET @inserting = 1;
    INSERT INTO b SET
      col1 = NEW.col1
      col2 = NEW.cola
      col3 = some_stored_proc(NEW.col3);
    SET @inserting = NULL;
  END IF;
END 
```

`DECLARE EXIT HANDLER FOR SQLEXCEPTION`允许您对 SQL 异常执行语句（并在完成时退出当前过程）。

`RESIGNAL`将传递错误。

# html - 使用 cgi 输出 html 表单

> ID：15751806
> 
> 赞同：0
> 
> 时间：2013-04-01T21:00:13.903
> 
> 标签：html, forms, perl, cgi

当我开始我的 cgi 程序时，我想输出一个 html 表单。我知道我可以通过执行以下示例 perl 脚本来做到这一点。

```
sub MakePage()
{
print "Content-type: text/html\n\n";
print "<html><head><title>Hello World Form</title></head><body>\n";

print "<center><big><big><big><strong>\n";
print "Hello World Form<p>\n";
print "</strong></big></big></big>\n";

print "<FORM ACTION=\"./stdin.cgi\" METHOD=\"POST\">\n";
print "The Field...<br>\n";
print "<input type=\"text\" name=\"TXhelloField\" size=\"100\" \n";
print "value=\"" . MakeString() . "\">\n";
print "<INPUT type=\"submit\" name=\"BXsub\" value=\"Submit\">\n";
print "</form>"; 

print "</body></html>\n"; 
}

MakePage(); 
```

但是，我想将 html 表单放在一个名为 form1.html 的自己的文件中，然后使用以下内容调用它：

```
sub MakePage()
{
Location: form1.html;
} 
```

我是 cgi 和 perl 的新手，在解决这个问题时遇到了麻烦，并且在教程中找到这个的运气并不好。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T21:02:14.873

您需要*输出*标题，以及合适的状态代码和解释。

```
print "Status: 302 Found\r\n"
print "Location: http://example.com/form1.html\r\n";
print "Content-type: text/html;charset=utf-8\r\n\r\n"; 

print "<!DOCTYPE HTML><html lang="en"><head><title>Moved</title></head><body><p>This document can be found at <a href="http://example.com/form1.html">http://example.com/form1.html</a>.</p>\r\n"; 
```

（注意：位置标头需要绝对 URI，即使大多数浏览器会玩错误恢复游戏）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T21:23:40.053

看看 HTML::Template 或 Template::Toolkit。它们将帮助您将 HTML 与 perl 代码分开。例如

```
use HTML::Template;
use CGI;
my $template = HTML::Template->new(filename => 'form1.tmpl');
# replace MAKESTRING TMPL_VAR with string returned by your function
$template->param(MAKESTRING => MakeString()); 
my $cgi = CGI->new();
print $cgi->header();
print $template->output(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T06:05:51.030

如果您只是想进行重定向，我建议您使用 CGI.pm 的[`redirect`](https://metacpan.org/module/CGI#GENERATING-A-REDIRECTION-HEADER)方法 ( `print $q->redirect('http://myserver.com/form1.html')`) 而不是手动打印 HTTP 标头。

如果您需要将任何 Perl 数据放入返回的页面，向页面添加页眉/页脚/侧边栏等，那么使用适当的模板解决方案，如 imran 建议的那样，绝对是要走的路。（哪一个？ 多年来，[Template::Toolkit一直是最流行和广泛使用的模板引擎，但以速度慢着称。其他不错的选择是](https://metacpan.org/module/Template)[Template::Alloy](https://metacpan.org/module/Template%3a%3aAlloy)，它主要是替代品对于 TT 更快，或者[Text::Xslate](https://metacpan.org/module/Text%3a%3aXslate)，这是我个人在有选择时使用的。）

# android - 分离子、更新和附加？AndEngine，安卓

> ID：15751808
> 
> 赞同：2
> 
> 时间：2013-04-01T21:00:42.893
> 
> 标签：android, andengine

```
engine.registerUpdateHandler(new TimerHandler(0.2f,
            new ITimerCallback() {
                public void onTimePassed(final TimerHandler pTimerHandler) {
                    pTimerHandler.reset();
                    Rectangle xpRect = new Rectangle(30, 200,
                            (float) (((player.getXp()) / (player
                                    .getNextLevelxp())) * 800), 40, vbom);
                    HUD.attachChild(xpRect);
                }
            })); 
```

到目前为止，我的 createHUD 方法中有这个。这很简单，它创建一个矩形显示玩家的 xp 与下一个级别所需的 xp 相关，并将其附加到 HUD。唯一的问题是旧的矩形永远不会被删除。我怎样才能有一个像这样的矩形来更新自己并删除旧的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:24:31.410

如果您过于频繁地使用 detachChild() 或任何其他分离方法，您迟早可能会遇到问题。特别是因为*分离*只能在`update thread`. 你永远不会知道你的矩形何时会再次分离。因此，为了节省大量的附加和分离，重用矩形：

**i) 将 Rectangle 的引用保存在某处（例如在您的`Player`类中作为全局变量）。**

**ii）在您加载内容的开始时，还要初始化矩形：**

```
 Rectangle xpRect = new Rectangle(30, 200, 0, 40, vbom);   // initialize it
 HUD.attachChild(xpRect);      // attach it where it belongs
 xpRect.setVisible(false);     // hide it from the player
 xpRect.setIgnoreUpdate(true); // hide it from the update thread, because you don't use it. 
```

此时，您将矩形放在哪里或它有多大都没有关系。重要的是它在那里。

**iii) 现在，当您想向玩家展示他的 XP 时，您只需使其可见**

```
 public void showXP(int playerXP, int nextXP){
     float width= (float) ((playerXP / nextXP) * 800);  // calculate your new width
     xpRect.setIgnoreUpdate(false);     // make the update thread aware of your rectangle
     xpRect.setWidth(width);            // now change the width of your rectangle
     xpRect.setVisible(true);           // make the rectangle visible again              
 } 
```

**iv）当你不再需要它时：为了让它再次不可见，只需调用**

```
 xpRect.setVisible(false);     // hide it from the player
  xpRect.setIgnoreUpdate(true); // hide it from the update thread, because you don't 
```

当然，您现在可以随心所欲地使用该`showXP()`方法，并在您的`TimerHandler`. 如果你想要一个更完整的外观，你可以这样做：

```
 public void showXP(int playerXP, int nextXP){
     float width= (float) ((playerXP / nextXP) * 800);  // calculate your new width
     xpRect.setIgnoreUpdate(false);                     // make the update thread aware of your rectangle
     xpRect.setWidth(width);                            // now change the width of your rectangle
     xpRect.setVisible(true); 

     xpRect.registerEntityModifier(new FadeInModifier(1f));  // only this line is new
 } 
```

它实际上和上面的方法一样，只是在最后一行稍微改变了一点，这使得矩形看起来更平滑一些......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:50:55.147

要将孩子与 HUD 分离，您可以编写

```
 aHUD.detachChild(rectangle); 
```

从 HUD 中清除所有孩子

```
aHUD.detachChildren(); 
```

要清除相机中的所有 HUD，您可以编写

```
 cCamera.getHUD().setCamera(null); 
```

使用上述之一后，您可以像往常一样创建 HUD 并附加。

# matlab - How do I append the same row to each element of a 3D matrix?

> ID：15751810
> 
> 赞同：1
> 
> 时间：2013-04-01T21:00:44.543
> 
> 标签：matlab

> > a = ones(2,2,2)

a(:,:,1) =

```
 1     1
 1     1 
```

a(:,:,2) =

```
 1     1
 1     1 
```

I want to append ones(1,1) to the bottom row of each of a(:,:,1) and a(:,:,2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:03:01.187

It's easy to do with [CAT](http://www.mathworks.com/help/matlab/ref/cat.html) function:

```
 a = cat(1, a, ones(1,2,2)); 
```

or [VERTCAT](http://www.mathworks.com/help/matlab/ref/vertcat.html):

```
a = vertcat(a, ones(1,2,2)); 
```

# .net - Datasets and Memory leaks

> ID：15751811
> 
> 赞同：2
> 
> 时间：2013-04-01T21:00:48.803
> 
> 标签：.net, vb.net, memory-management, memory-leaks, dataset

I am trying to figure out the best way to use a `DataSet`/`DataTable` and cleaning up properly afterwards.

I am a little puzzled as to what causes memory to be released. I tested my theory with a test application where I populated the same `DataTable` multiple times in a loop and looking at Windows' Task Manager for the memory footprint after 3 forced GC collects.

What I found is that:

1.  If I did not call `Clear` or `Dispose`, or set the `DataTable` variable to `Nothing`, the final memory consumption in Task Manager was about 30k.

2.  If I just set the variable to `Nothing` inside the loop, the final memory was about 15k.
    Question: Why does setting the variable to `Nothing` make a difference?

3.  If I called only the `Dispose` method inside the loop, the final memory was about 19k.

4.  If I called only `Clear` inside the loop, the final memory was about 16.5k. In fact, it did not change even after the `GC.Collect`.

I would really appreciate if someone can share what is the best way to use and cleanup `DataSet`s when no longer needed.

Sample code is shown below.

```
Imports System.Data.SqlClient;
Public Class Form1

    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
        Test()

        GC.Collect()
        GC.Collect()
        GC.Collect() 'Throw in one more 
    End Sub

    Private Sub Test()
        Dim oDA As SqlDataAdapter = Nothing
        Dim oConn As SqlConnection = Nothing
        Dim oCommand As SqlCommand = Nothing
        Dim ods As DataSet = Nothing
        Dim oDt As DataTable = Nothing
        Try
            oConn = New SqlConnection("Server=Myserv;Database=myDB;UserId=myuserid;Password=mypassword;")
            oCommand = New SqlCommand("Select  * from Users", oConn)
            oConn.Open()
            ods = New DataSet

            oDA = New SqlDataAdapter(oCommand)

            For i As Integer = 0 To 50
                oDA.Fill(ods)
                oDt = ods.Tables(0)
                'oDt.Clear()
                'oDt.Dispose()
                oDt = Nothing
            Next
        Catch ex As Exception
            MessageBox.Show(ex.ToString)
        Finally
            ods.Clear()
            ods = Nothing
            oConn.Close()
            oDA = Nothing
        End Try
    End Sub
End Class 
```

Edit: I am looking for best practices for managing memory of `DataSet`s and/or `DataTable`s that are passed around, where the creating method is not necessarily tasked with cleaning up the memory. Also, why does setting an object/variable to `Nothing` within a function performs differently than just letting it go out of scope.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T21:07:30.227

“清理”数据的最佳方法是切换到任何实现^(1的)[`Using`语句](http://msdn.microsoft.com/en-us/library/htd05whh.aspx)。*一旦你实现了这个模式，你就会对你设计的数据结构有*最合理的内存使用。`IDisposable`

 *```
Using oConn As New SqlConnection("Server=Myserv;Database=myDB;UserId=myuserid;Password=mypassword;")
    oConn.Open()
    Using oCommand As New SqlCommand("Select  * from Users", oConn)
        ' other code as needed, wrap IDisposable in Using...EndUsing
    End Using
End Using 
```

这并不能保证您的数据结构本身将具有内存效率，只是它们将仅在必要时保留资源。

[1\. 是的，你有时不能使用一个，但如果你不使用 using 语句是错误的前提下工作，你会更好。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T02:30:16.107

使用任何必须在使用后释放的资源（包括 DataTable 或 Dataset）的最佳方式是尽可能使用关键字 Using。如果无法使用 Using 关键字，您应该执行与 Using 关键字等效的操作，例如：try { } Catch(Exception ex) { } finally { object.dispose() }

根据 msdn，任何实现 IDisposable 的对象都应该使用 dispose 方法释放资源。由于 Dataset 和 DataTable 都继承自实现 IDisposable 的 MarshalByValueComponent，因此最好调用 dispose 方法。如果有任何资源没有实现 IDisposable 方法，那么您可以实现 IDisposable 接口并覆盖 dispose 方法并在 dispose 方法中进行资源清理。通过将 DataSet 或 DataTable 设置为 null，您只需删除最终将由 Garbage Collector 收集的引用。但是使用 dispose 方法是更好的方法。您不必显式调用 GC.Collect 方法，因为垃圾收集器通常在后台运行，并且每当内存低于某个阈值（由编译器确定）时，它将释放这些资源使用的内存。[http://msdn.microsoft.com/en-us/library/0xy59wtx(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/0xy59wtx(v=vs.110).aspx) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T20:37:09.050

"And why does setting somthing to nothing within a function perform differently than just letting it go out of scope?"

You have accessed the somthing, so it is not eligible for GC before then.

When GC occurs is a bit non-deterministic: apparently it schedules its next invocation depending on several factors (cite: [http://channel9.msdn.com/Shows/Defrag-Tools/Defrag-Tools-33-CLR-GC-Part-1](http://channel9.msdn.com/Shows/Defrag-Tools/Defrag-Tools-33-CLR-GC-Part-1) (a video)).*

# magento - Manual installation of Magento extension turns every file into a folder

> ID：15751812
> 
> 赞同：4
> 
> 时间：2013-04-01T21:00:50.713
> 
> 标签：magento

I am completely baffled by this. I packaged up an extension and manually installed it on a fresh Magento instance. (Both the packaging and installing machine were running Magento 1.7). The installation went smoothly, except every single file I installed was turned into a folder, named after the file. Every single file. Has anyone run into this? Could it be a Magento bug?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T22:19:18.310

当我手动创建一个`tar`存档以用作 Magento Connect 存档时，我曾经看到过这个问题。不幸的是，我没有解决方案，但这是我对这个问题的理解。

虽然 Magento Connect`tgz`软件包在技术上是 gzip 压缩的 tar 档案——创建和提取这些档案的代码**不是**标准的 *nix`tar`工具。相反，Magento 为 Magento Connect 实现了自己的打包和解包 tar 代码

```
downloader/lib/Mage/Archive/Tar.php 
```

不幸的是，这种打包和解包代码并没有经过操作系统或使用标准 *nix 工具创建的 tar 归档的可靠测试。我对这段代码的问题是在我的 Mac OS 系统上创建的档案`tar`无法在运行 linux 的系统上使用 Magento Connect 的代码正确解包。

难以追踪、难以报告、难以重现意味着难以修复。

这些目录是在 Magento Connect 解压缩`tgz`文件时创建的。我 99% 确定您的目录是由这段代码创建的

```
#File: downloader/lib/Mage/Archive/Tar.php
if (in_array($header['type'], array("0",chr(0), ''))) {

    if(!file_exists($dirname)) {
        $mkdirResult = @mkdir($dirname, 0777, true);

        if (false === $mkdirResult) {
            throw new Mage_Exception('Failed to create directory ' . $dirname);
        }
    }

    $this->_extractAndWriteFile($header, $currentFile);
    $list[] = $currentFile;

} elseif ($header['type'] == '5') {

    if(!file_exists($dirname)) {
        $mkdirResult = @mkdir($currentFile, $header['mode'], true);

        if (false === $mkdirResult) {
            throw new Mage_Exception('Failed to create directory ' . $currentFile);
        }
    }
    $list[] = $currentFile . DS; 
```

这是 Magento 解压缩档案并创建文件夹的两个位置。出于某种原因，在您的两个系统上存在某种情况，其中数据被打包或解包，错误地进出存档文件。尝试`tgz`使用命令行工具或操作系统内置的取消归档程序手动取消归档文件。如果发生奇怪的事情，那么至少您知道问题出在包装代码上。

这绝对是一个错误，虽然我会报告它，但唯一的“解决方案”是不在您的本地机器上创建您的存档（我意识到这是一个糟糕的解决方案，但*我们不会质疑为什么*和所有这些）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-24T13:07:24.867

这是自 1.7 以来一直存在的错误，因为在读取`@././LongLink`标头时 if 比较永远不会评估为 false。我在这个问题上回答了更多：

[https://magento.stackexchange.com/questions/5585/long-file-names-and-magento-connect-extension-packager/45187#45187](https://magento.stackexchange.com/questions/5585/long-file-names-and-magento-connect-extension-packager/45187#45187)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T06:37:27.443

我发现在将链接（modman）链接到magento文件夹的OS X上的Magento扩展打包时发生了这个问题。文件夹创建仅发生在 Windows 系统上。

这里也可能发生这种情况吗？

里科

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-17T18:53:26.317

我遇到了它，由于某种原因我的插件文件设置了后缀 .gz 所以它是 plugin.tgz.gz 将它解压缩到 plugin.tgz 解决了我的问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-05T17:53:22.723

我认为问题是因为 PHP 版本。我在 Magento 1.8.1 上安装扩展时遇到了同样的问题，但我通过更改 /downloader/lib/Mage/Archive/Tar.php 文件中的 _getFormatParseHeader() 函数找到了解决方法。

最初的功能是：

```
protected static final function _getFormatParseHeader()
{
    return 'a100name/a8mode/a8uid/a8gid/a12size/a12mtime/a8checksum/a1type/a100symlink/a6magic/a2version/'
        . 'a32uname/a32gname/a8devmajor/a8devminor/a155prefix/a12closer';
} 
```

我将其更改为：

```
protected static final function _getFormatParseHeader()
{
    if (version_compare(phpversion(), '5.5.0', '<') === true) {
        return 'a100name/a8mode/a8uid/a8gid/a12size/a12mtime/a8checksum/a1type/a100symlink/a6magic/a2version/'
        . 'a32uname/a32gname/a8devmajor/a8devminor/a155prefix/a12closer';
    }
    return 'Z100name/Z8mode/Z8uid/Z8gid/Z12size/Z12mtime/Z8checksum/Z1type/Z100symlink/Z6magic/Z2version/'
        . 'Z32uname/Z32gname/Z8devmajor/Z8devminor/Z155prefix/Z12closer';
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-11T21:02:40.030

真是讨厌的虫子。

对我来说，它重命名我的手动打包文件`*.tar.gz`来`*.tgz`解决它。

至少它适用于我的 ubuntu 15.04

用magento 1.8测试

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-08-03T10:27:28.663

it's more likely that you choose the wrong path when adding content to your extension.

For me the bug happened when I added (non existing) files from layout/base instead from layout/base/default.

# html - Zurb Foundation：更改列之间的填充

> ID：15751813
> 
> 赞同：1
> 
> 时间：2013-04-01T21:01:11.403
> 
> 标签：html, css, zurb-foundation

HTML/CSS 编码的新手，但到目前为止喜欢使用 Foundation 前端。有一个小问题：如何更改行内列元素之间的填充？

有问题的页面可以在以下位置找到：

```
www.myfootprintcalculator.com 
```

其中一行的代码是这样的：

```
<!--fourthrow><!-->

<div class="row">

<div class="large-3 columns" style="text-align: center;">
<a href="trash.html"><img src="metro_tiles/trash.png"></a> 
</div>

<div class="large-3 columns" style="text-align: center;">
<a href="water.html"><img src="metro_tiles/water.png"></a> 
</div>

<div class="large-3 columns" style="text-align: center;">
<a href="energy.html"><img src="metro_tiles/account.png"></a> 
</div>

<div class="large-3 columns" style="text-align: center;">
<a href="about.html"><img src="metro_tiles/about.png"></a> 
</div>

</div> 
```

有人可以指出一种直接的方法来使瓷砖列之间的填充与行之间的填充相同吗？Foundation 的 CSS 文件非常大，对于新手来说有点吓人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-16T20:19:10.760

删除列之间的填充/装订线的最简单方法是使用`collapse`行上的类。如果您想要更多控制权，请继续阅读...

`zurb-foundation`如果您使用的是 Sass/Compass、 gem 或自定义下载，还有几个附加选项。例如，如果您希望在整个应用程序中更改列间距，您可以设置`$column-gutter`变量。对于像这样具有固定间距的一组元素，您可能还需要考虑块网格。

如果您只想将自定义的装订线应用到某些行，您可以定义一个新类，例如`.feature-tiles`用于行并自定义列。例如：

```
@import 'foundation';

.feature-tiles {
  $row-width: em-calc(800);
  @include grid-row;

  .columns, .column {
    $column-gutter: 0;
    @include grid-column;
  }
} 
```

此示例设置了一个可用于行（而不是`row`）的类，设置总行宽，并移除列之间的间距，适用于舒适的平铺布局。您将`large-3 columns`像以前一样使用每个图块来获得一行中的四个图块。这块`em-calc`只是一个帮助器，它根据页面的基本字体大小从提供的像素值计算以 ems 为单位的大小。这有助于保持跨设备的相对大小。

网格的文档页面解释了更多： http: [//foundation.zurb.com/docs/components/grid.html](http://foundation.zurb.com/docs/components/grid.html)

在上面的示例中，我建议图像内容多于背景，因此`img`标签可能是合适的。这是一篇自以为是的文章，更多地解释了这些选项：[http ://csswizardry.com/2010/10/your-logo-is-an-image-not-a-h1/](http://csswizardry.com/2010/10/your-logo-is-an-image-not-a-h1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:52:01.107

另外请记住，您仍然可以在 CSS 中使用背景图像，并且无需担心默认的 Zurb CSS 文件。

只需制作一个 CSS 文件并将其保存到 CSS 文件夹并将其命名为 app.css 并保存即可。现在，如果您制定任何自己的规则，您可以将它们保存在这里。

因此，例如，您可以使用数值创建规则“主框”，并将其保存到您的 css 文件中。然后您可以对其应用背景图像。所以 HTML 看起来像这样：

```
<div class="row">

<div class="main-box large-3 columns" style="text-align: center;">
<a href="trash.html"><img src="metro_tiles/trash.png"></a> 
</div>

<div class="main-box2 large-3 columns" style="text-align: center;">
<a href="water.html"><img src="metro_tiles/water.png"></a> 
</div>

<div class="main-box3 large-3 columns" style="text-align: center;">
<a href="energy.html"><img src="metro_tiles/account.png"></a> 
</div>

<div class="main-box4 large-3 columns" style="text-align: center;">
<a href="about.html"><img src="metro_tiles/about.png"></a> 
</div>

</div> 
```

然后在 app.css 中简单地给它一个带有背景图像的 CSS 规则，如下所示：

```
.main-box,.main-box2,.main-box3,.main-box4 {background-image: url(path to your image file here);} 
```

或者，如果您需要单独的背景图像来分隔您的规则，例如：

```
.main-box{background-image:url();}
.main-box2{}
.main-box3{}
.main-box4{} 
```

等等...

我应该注意，这只是一种方法。在响应式设计中，有时在 html 中输入图像确实很划算。使用背景图像只是覆盖默认容器填充的一种方法。

另一边注....如果您将 Zurbs CSS 文件中的默认 CSS 规则之一输入到 app.css 中；然后它将被覆盖。因此，您甚至可以更改默认 CSS 值，而不会弄乱原始文件。

# javascript - 画布像素错误

> ID：15751818
> 
> 赞同：3
> 
> 时间：2013-04-01T21:01:32.303
> 
> 标签：javascript, html

我有以下代码：

```
var c = document.getElementById("myCanvas");
var ctx = c.getContext("2d");
ctx.moveTo(130, 0);
ctx.lineTo(130, 150);
ctx.stroke(); 
```

我对像素和旋转画/线有点搞砸了。让我解释一下，我有正常的画布代码，但旋转无法正常工作。我尝试过一些数字，但我仍然无法获得我想要的角度，因为我只能旋转 180 度而不是 270 度（或多或少）。

这是一张图片来解释我想要什么：

[http://img689.imageshack.us/img689/1996/13648488297821.jpg](http://img689.imageshack.us/img689/1996/13648488297821.jpg)

红线是我想要的角度，但黑线是我得到的角度（黑线及以上是我所能得到的，在黑线下我不能做任何旋转来获得想要的角度）。

请不要给我 CSS 代码，因为我使用的是 JavaScript 代码循环

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T01:45:22.090

可以在[此处](http://www.html5canvastutorials.com/tutorials/html5-canvas-lines/)和[此处](http://www.w3schools.com/tags/canvas_moveto.asp)找到我提出此代码的参考资料。如果您将这条线分开并一个接一个地分成两条线，那就容易多了。例如...

```
ctx.beginPath();
//edit the x or y to change starting point.
ctx.moveTo(50, 100);
//edit the x to change the length, and y for the angle.
//if you want a horizontal line this y must be the same as the moveto y.
ctx.lineTo(150, 100);

//This x & y must be the same as the previous lineto.
ctx.moveTo(150, 100);
//edit the x to change the length, and y for the angle.
ctx.lineTo(200, 130);
ctx.stroke(); 
```

请记住，这些方法采用 (x,y) 并且只要您的第一个`lineTo`和下`moveTo`一个位置相同，您的两行就不会中断。希望这可以帮助！

# java - 开发一个可以将外部构建器添加到项目中的 Eclipse 插件

> ID：15751819
> 
> 赞同：2
> 
> 时间：2013-04-01T21:01:35.803
> 
> 标签：java, eclipse, eclipse-plugin

**编辑：** 我无法弄清楚如何让我的插件添加一个与手动添加的构建器具有相同配置的外部构建器。我认为使用 Bananeweizen 直接修改项目文件的建议是不够​​可维护的。我们暂时放弃。我们将让用户手动创建外部构建器。

我正在编写一个 Eclipse 插件，作为我同事开发的一个优秀命令行工具的 GUI。开发人员使用该插件创建一个 bash 脚本，该脚本运行具有某些配置的命令行工具。创建 bash 脚本后，可以将其作为外部工具构建器手动添加到 Eclipse 项目中（见下图）；**自动化该步骤是我遇到麻烦的地方**。

![**我可以手动添加 bash 脚本，但不能以编程方式**](https://i.stack.imgur.com/Oh6L8.png)

首先，将 bash 脚本添加为外部构建器的代码：

```
createBuilderConfigFile();

IProjectDescription desc = project.getDescription();
ICommand newCommand = desc.newCommand();
newCommand.setBuilding(IncrementalProjectBuilder.AUTO_BUILD, false);
newCommand.setBuilding(IncrementalProjectBuilder.INCREMENTAL_BUILD, false);
newCommand.setBuilding(IncrementalProjectBuilder.CLEAN_BUILD, false);
newCommand.setBuilding(IncrementalProjectBuilder.FULL_BUILD, true);
newCommand.setBuilderName("org.eclipse.ui.externaltools.ExternalToolBuilder");
Map<String, String> arguments = new HashMap<String, String>();
arguments.put("LaunchConfigHandle", "<project>/.externalToolBuilders/CodeGen.launch");
newCommand.setArguments(arguments);
List<ICommand> allCommands = new ArrayList<ICommand>();
allCommands.add(newCommand);
for (ICommand command : desc.getBuildSpec()) {
    allCommands.add(command);
}
ICommand[] commandArray = allCommands.toArray(new ICommand[allCommands.size()]);
desc.setBuildSpec(commandArray);
project.setDescription(desc, null); 
```

第一行创建一个名为`CodeGen.launch`. 它类似于[这个 SO post](https://stackoverflow.com/questions/4282547/a-question-about-eclipse-extend-tool-builder-programming)。然后其余代码使用如下`.project`所示的代码更新我的 Eclipse 项目中的文件：

```
<buildCommand>
  <name>org.eclipse.ui.externaltools.ExternalToolBuilder</name>
  <arguments>
     <dictionary>
        <key>LaunchConfigHandle</key>
        <value>&lt;project&gt;/.externalToolBuilders/CodeGen.launch</value>
     </dictionary>
  </arguments>
</buildCommand> 
```

它几乎可以完美运行。构建项目后，将运行脚本。但是，脚本会更新源文件，如果从 Eclipse 主菜单中选择*Project->Build Automatically*，则会导致再次构建项目。重新构建会导致脚本再次运行，并且循环继续，直到用户关闭自动构建。

如果我打开构建器列表，我可以看到我的插件创建的构建器（见上图）。如果我单击*Edit...*，**不进行更改**，然后单击*OK*，则新构建器仅针对手动构建运行，而不是自动构建。文件现在`.project`不同了；手动打开和保存构建器定义会导致 Eclipse 对其进行更新。看起来像：

```
<buildCommand>
  <name>org.eclipse.ui.externaltools.ExternalToolBuilder</name>
  <triggers>full,incremental,</triggers>
  <arguments>
     <dictionary>
        <key>LaunchConfigHandle</key>
        <value>&lt;project&gt;/.externalToolBuilders/CodeGen.launch</value>
     </dictionary>
     <dictionary>
        <key>incclean</key>
        <value>true</value>
     </dictionary>
  </arguments>
</buildCommand> 
```

注意新`<triggers>`标签和新`<dictionary>`值。如果您查看我的代码，您会看到我尝试指定应该为哪些构建运行脚本的行。这些行被忽略；我可以将它们注释掉，生成的`.project`文件也不例外。这可能是因为“org.eclipse.ui.externaltools.ExternalToolBuilder”是一个不可配置的构建器。我已经确认`newCommand.isConfigurable()`返回 false，并且[此处](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_core_resources_builders.html)的文档表明返回 false for 的构建器`isConfigurable()`将忽略`setBuilding()`. 我搜索了除“org.eclipse.ui.externaltools.ExternalToolBuilder”之外的扩展点，它是开放配置的，但我还没有找到。

我的插件有什么方法可以定义与手动定义构建器的用户具有相同结果的外部构建器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T06:08:16.647

如果一切都失败了，您仍然可以通过文件读/写来扫描和更新 .project 文件。然后调用`iProject.refreshLocal(DEPTH_INFINITE, ...)`您修改的项目以使 Eclipse 了解更改。

# speech-recognition - 使用长预识别音频防止 IVR/VXML 语音识别器超时？

> ID：15751821
> 
> 赞同：1
> 
> 时间：2013-04-01T21:01:45.603
> 
> 标签：speech-recognition, ivr, vxml, voicexml

我的 VXML/GRXML IVR 应用程序的一部分播放 2-3 分钟的音频，然后通过 a 运行 customcontext Nuance OSDM `<subdialog>`，然后作为菜单。

这会导致识别器出现超时错误，因为 OSDM 正在侦听 2-3 分钟的提示，而不是在提示结束后才开始侦听。

我记得很久以前修复了一个类似的问题，但不记得我是如何修复它的。

是否有用于获取或超时的 VXML 或 OSDM 属性，我可以使用它来“强制”识别器等到 OSDM 提示自己开始播放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T02:03:34.737

在 VoiceXML 中，提示元素执行时并没有真正*播放*提示，它们是*排队*的。

仅播放队列中的提示

1.  当口译员进入等待状态（例如识别）时，或
2.  当解释器在相应的 fetch 元素上设置了 fetchaudio 属性时获取资源。

VoiceXML 2.0 规范中的更多详细信息[，4.1.8 Prompt Queuing and Input Collection](http://www.w3.org/TR/voicexml20/#dml4.1.8)

如您所见，没有可用于显式刷新提示队列的 VoiceXML 指令。诀窍是在某处指定一个 fetchaudio 以满足＃2。

所以我建议你通过在元素上指定一个`fetchaudio`属性来强制播放提示队列。`subdialog`由于您真的不想听到 fetchaudio，它可以是一个 10 毫秒的静音音频文件。

```
<block>
   <prompt>
     <audio src="audio/very_long_message.wav">
   </prompt>
</block>

<subdialog src="osdm/custom" fetchaudio="audio/10ms_silence.wav"/>
   ...
</subdialog> 
```

请注意，用户将无法在长前缀提示期间进行强插，但可以在 OSDM 子对话框中这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T21:21:40.127

鉴于您已声明您正在使用 Nuance 和 OSDM，我将回答 Nuance Recognizer 9 和 Nuance Speech Server。

这通常会发生，因为当识别器在一段时间内没有收到任何请求时，它认为呼叫结束并删除会话。

NSSserver.cfg 中有配置（Nuance Speech Server 配置）：

server.mrcp1.rtsp.sessionTimeout VXIInteger 60000
或
server.mrcp2.rtsp.sessionTimeout VXIInteger 60000

我相信会有一个权衡。虽然您可以将此值加倍或三倍，但这可能意味着您的语音许可证在通话结束后将被占用更长的时间。我猜你选择的值取决于你的负载、提示的长度以及你看到这个的频率。

虽然我们仍然偶尔会遇到这种情况，但通常当调用者使用 DTMF 时，我们已经显着减少了这些实例。

# c# - 如何获取超链接的文本属性

> ID：15751822
> 
> 赞同：1
> 
> 时间：2013-04-01T21:01:46.850
> 
> 标签：c#, .net, visual-studio-2010, .net-4.0

WPF中的超链接上没有.Text属性

希望在点击事件中获取文本，到目前为止唯一的方法是

```
Run r = hyperlink.Inlines.First() as Run;
gotText( r.Text ); 
```

考虑到超链接确实有文本/内容，这似乎相当令人费解

或者这是一个疏忽，或者这个属性不存在的更好的理由？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:06:03.047

我相信这是因为超链接可能有多个文本运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:19:50.857

这是因为 Hyperlink 控件是从 TextElement 类派生的。具体来说，它应该是一个能够位于流内容中的控件。虽然最初可能将控件视为像 TextBox 这样简单的东西，但为了使超链接控件很好地适应 FlowContent，它需要具有与其他流内容元素类似的结构。

有关 FlowContent 的更多信息，请查看[此](http://msdn.microsoft.com/en-us/magazine/cc163371.aspx)。

# javascript - Save dropped down value to cookies

> ID：15751827
> 
> 赞同：0
> 
> 时间：2013-04-01T21:02:09.580
> 
> 标签：javascript

I have a dropped down button and when chosen will be save to cookie. I have to save in cookie so that I can redeem in the checkout page. Have this so far but cant save them to the cookies:

```
 function storeValues(form)
    {
    setCookie("product1",form.product1.value);
            return true;
    }

    </script>
     <ul>
     <li><img src="images/1.jpg" alt="Product1" />
     100% Pure Glutamine Powder</br>
    Ultimate Recovery Fuel!*</br>
    Supports Recovery From Workouts!*</br>

    <form name="myform" action="checkout.html" method="POST">
    <div align="center">
    $12.99</br>
    Select Quantity
    <select name="product1" onchange="return storeValues(this);">>
    <option value="1">0</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    </select>
    </div>
    </li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:12:19.553

js中没有setCookie函数。您可以使用 jQuery cookie 库或创建自己的设置 cookie 函数。

使用这样的东西**（取自[http://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)）**

```
function setCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function getCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
} 
```

# java - How to use a String in an Entity class hash code?

> ID：15751828
> 
> 赞同：0
> 
> 时间：2013-04-01T21:02:12.040
> 
> 标签：java, sql, persistence, entity, hashcode

I'm making a web app that queries an SQL db. I'm under the impression that I need to use entity classes and facade classes to allow persistence - across the whole site. The entity class templates have hashcodes and 1.) Im not sure if I need them and 2.) If I do, they want int's but all I have are String so, how to convert them to int and then back to String? Because I need the String value to appear on the site and the hash wants int's.

heres the code (imports have been remove to protect the innocent...):

```
@Embeddable
public class ComputerOwnersPK implements Serializable {
    @Basic(optional=false)
    @NotNull
    @Column(name="Computer_Name")
    private int computerNameId;
    @Basic(optional=false)
    @NotNull
    @Column(name="User_ID")
    private int userId;

    public ComputerOwnersPK() {
    }

    public ComputerOwnersPK(int computerNameId,int userId) {
        this.computerNameId=computerNameId;
        this.userId=userId;
    }

    public int getComputerNameId() {
        return computerNameId;
    }

    public void setComputerNameId(int computerNameId) {
        this.computerNameId=computerNameId;
    }

    public int getUserId() {
        return userId;
    }

    public void setUserId(int userId) {
        this.userId=userId;
    }

    @Override
    public int hashCode() {
        int hash=0;
        hash+=(int) computerNameId;
        hash+=(int) userId;
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if(!(object instanceof ComputerOwnersPK)) {
            return false;
        }
        ComputerOwnersPK other=(ComputerOwnersPK) object;
        if(this.computerNameId!=other.userId) {
            return false;
        }
        if(this.userId!=other.userId) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "entity.ComputerOwnersPK[ computerNameId="+computerNameId+", userId="+userId+" ]";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:15:13.847

根据您的评论，我假设您希望 computerNameId 和 userId 在您的映射中成为字符串，并且您将它们映射到整数，因为您不知道如何处理哈希码。

在您的 hashCode 方法中，您应该能够连接字符串，然后在它们上调用 hashcode。与您已经在做的非常相似。

```
private String computerNameId;
private String userId;

@Override
public int hashCode() {
    // concatenate the interesting string fields 
    // and take the hashcode of the resulting String
    return (computerNameId + userId).hashCode();
} 
```

确保在您的 equals 方法中，您还从`!=`运算符更改为`!.equals`方法调用以检查相等性。最后确保你遵守[equals 和 hashCode 之间的约定，](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)否则你可能会遇到一些令人讨厌的惊喜。两个相等的对象也必须具有相同的 hashCode。具有相同 hashCode 的两个对象可能相等也可能不相等。

# html - Safari 错误的边距 - 在 Chrome 和 FF 中运行良好

> ID：15751829
> 
> 赞同：0
> 
> 时间：2013-04-01T21:02:12.137
> 
> 标签：html, css, google-chrome, safari, margin

我对 Safari 上的一些 div 有疑问，边距完全搞砸了。

奇怪的是它在 Chrome 和 Firefox 上运行良好。如果我实施了专门为 Safari 制作的修复程序，它就会弄乱其他人。

帮助 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T22:23:02.133

该问题是由缺少`left`声明引起的。将此添加到您的 CSS 中：

```
#pull_link {
    left: 50%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T21:54:22.083

您的代码中可能有一个小错误/错误会绊倒您（例如，您可能缺少会导致容器崩溃的结束标记，然后您的明确修复不起作用）。对照 chrome 开发人员检查 safari 开发人员工具。您应该能够以这种方式定位问题。有时，一个浏览器会出现错误，而另一个浏览器不会。没有更多信息，这里很难得出结论。您是否尝试过 w3c 验证 html [http://validator.w3.org/](http://validator.w3.org/)？您也可以通过这种方式捕获缺少的语法。

# jquery - Python 捕捉 jQuery .post()

> ID：15751842
> 
> 赞同：0
> 
> 时间：2013-04-01T21:03:03.527
> 
> 标签：jquery, python, json, .post

我需要将 JSON 对象从网页发布到 GAE Python

**网站**

```
$('#save').click(function() {
    x = JSON.stringify(result);
    $.post("/save_leads", x)
    .done(function() {})
    .fail(function() { alert("error"); })
}); 
```

**字符串化 JSON 对象的片段**

```
[{"adrese":"Slokas 161, Rīga, LV-1067","nosaukums":"\"Akropolis\", apbedīšanas birojs","web":"www.akropoliss.lv","talrunis":"80005580","save":true},{"adrese":"Katlakalna 11c, Rīga, LV-1073","nosaukums":"DB Schenker Loģistikas Parks un Kravu Pasaule","web":"www.dbschenker.lv","talrunis":"67800087","save":true}] 
```

**Python**

```
def save_leads(self):
    results = self.request.get('x')
    logging.info(len(results)) #logs as 0 :S 
```

到目前为止，我只使用 html 发布表单的内容，所以我不知道我是在发布还是抓错了。

**PS：我更喜欢允许我在 Python 端使用 json.loads() 的答案**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:59:11.190

所以总结一下。正确的答案是：

***网络***

```
$('#save').click(function() {
    y = JSON.stringify(result);
    console.log(result)
    $.post("/save_leads", {x:y})
    .done(function() {})
    .fail(function() { alert("error"); })
}); 
```

**服务器端**

```
def save_leads(self):
    result = self.request.get('x')
    result = json.loads(result) 
```

如果我能找到一个有这样答案的帖子，我将不得不问。所以我希望这对其他`jQuery -> post(JSON) -> Python`新手有帮助:)

# git - git 成功将更改推送到主存储库，但仍然看不到文件中的任何更改

> ID：15751846
> 
> 赞同：2
> 
> 时间：2013-04-01T21:03:12.677
> 
> 标签：git

我在共享托管服务器上设置了一个 repo。从现在开始，我想使用 git 将我的本地更改直接推送到我的共享主机，但是尽管有 ok 消息，我仍然看不到文件中的任何更改：

## 在共享主机上（远程服务器）

初始化 git 仓库

```
cd public_html/.git
git init
git add .
git commit -m 'First commit' 
```

## 在我的笔记本电脑上（本地服务器）

我将它克隆到本地机器上的中央远程仓库

```
git clone ssh://me@mdomain.ro:15554/home/mydomain/public_html/.git 
```

现在我有一个远程存储库的工作副本，我只有一个名为“master”的分支。我能看到它：

```
git branch 
```

我在名称“origin”下添加远程存储库：

```
git remote add origin ssh://me@mdomain.ro:15554/home/mydomain/public_html/.git 
```

我可以列出远程存储库：

```
git remote 
```

将显示： origin 在这个阶段我已经完成了我的工作，再次提交我的更改（如上） 现在我将更改推送回我的主存储库所在的远程服务器。

```
git push origin master 
```

## 在共享主机上（远程服务器）

我设法通过将远程存储库转换为裸存储库来实现它：

```
git config --bool core.bare true 
```

## 在我的笔记本电脑上（本地服务器）

我再次推送数据：

```
git push origin master 
```

并得到

```
Compressing objects: 100% (30/30), done.
Writing objects: 100% (32/32), 663.98 KiB, done.
Total 32 (delta 21), reused 0 (delta 0)
To ssh://me@mdomain.ro:15554/home/mdomain.ropublic_html/.git
   a416e72..bb19005  master -> master 
```

但是，在浏览器中访问我的网址时，我仍然看不到更改。怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T21:13:04.127

错误消息非常清楚，表明服务器无法更新当前签出分支的工作树（`master`）。

要解决此问题，您可以研究[如何将服务器的存储库转换为裸存储库](https://stackoverflow.com/questions/2199897/how-to-convert-a-git-repository-from-normal-to-bare)。

另一种选择（尽管我强烈建议不要这样做）是`receive.denyCurrentBranch`在服务器 repo 的 git 配置中设置为`ignore`or `warn`or `false`。

如果您要做的是`git push`用作在服务器上部署新代码的一种方式，并且即使只有一个裸仓库，您也需要拥有一个工作树，您可以查看我一段时间前发布的[这个](https://stackoverflow.com/a/15667542/380757)答案，详细说明如何在服务器上签出单独的工作树并设置接收后挂钩，该挂钩负责从裸仓库更新此工作树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:18:38.213

要让 git repo 承认`push`它必须配置为`bare`.

裸存储库仅包含版本信息。工作文件不存在。相反，它包含文件夹的全部内容`.git`。

您在“服务器”中将存储库创建为非裸存储库，因此您无法推送。如果您刚刚开始，只需再次创建它，`git --bare init`但如果您已经进行了重要更改，则需要转换它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-29T10:10:58.303

此方法适用于 git 自托管或共享主机...（不是 github 主机或私有 repo）

从您的 win 或其他操作系统的 git Bash 开始的第一步：

```
git push -u origin master 
```

`[origin]`你是`<alias>`远程吗

在您的托管服务器中（共享或任何支持`git`和的服务器`SSH`）

```
git log --oneline 
```

您会看到您从客户端 git Bash 推送的最后一次提交。例如，您会看到如下内容：

```
6d523ed modify last commit
37b624b .gitignore is now working
f1e0413 add *.zip to ignore file
c5r0d74 add .gitignore
4e87i69 Installing 
```

> 注意：上面的代码是我的提交。你承诺是不同的。

现在，您必须使用`git reset`将您在本地计算机上的最后一次提交共享到您的 public_html 或您在托管服务器上初始化 git 的任何地方。

```
git reset --hard 6d523ed 
```

注意：`6d523ed`是`SHA-1`最后一个`Commit`，您可以在上面看到文本。

> 重要提示：我测试了近 100000 种从本地计算机直接共享（git 裸机）到远程主机（public_html）的方式，但它不起作用......！！！！

它可能在 GitHub 中工作，但其他托管服务器在不使用的情况下无法进行任何更改`reset --hard`

# module - Cygwin 和 OCaml：OPAM + 电池

> ID：15751851
> 
> 赞同：3
> 
> 时间：2013-04-01T21:03:22.007
> 
> 标签：module, cygwin, ocaml, ocamlbuild, ocaml-batteries

我在 Windows 8 环境中广泛使用 Cygwin（我不想直接在机器上启动/加载 Linux）。我使用 Eclipse 的 OCamlIDE 插件，并且使用此工作流设置相对没有遇到任何问题。

但是，我想使用电池，这样我就可以利用它的动态数组以及其他一些有趣的功能来加快我的开发过程。

我已经尝试过这种方法： http: [//ocaml.org/install.html](http://ocaml.org/install.html)，但我收到以下错误：

```
$ sh ./opam_installer.sh /usr/local/bin
No file yet for i686:CYGWIN_NT-6.2-WOW64 
```

我缺少什么以及如何配置 Cygwin 以便它可以接受 Opam 安装程序？当我尝试另一种构建 Opam 的方法时，我得到了：

```
'i686-w64-mingw32-gcc' is not recognized as an internal or external command, 
```

作为 Makefile 错误和构建失败的原因。似乎与 mingw32-gcc 有关的一些问题，我需要为我的 Cygwin 安装和/或配置什么才能让它正确编译/构建东西。我也安装了 wget 和 curl。

我的总体问题是：在我的系统上安装电池的最佳方法是什么，并且花费最少的时间手动跟踪其所有依赖项？有没有一种方法可以构建库模块，例如 BatDynArray 和包含：

```
include BatEnum.Enumerable
include BatInterfaces.Mappable 
```

这样我就可以直接在我的代码中调用它们 open...;; 和/或包括...;;;

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T21:21:50.393

首先，`include`不做你认为它做的事。`open Batteries`应该正是您正在寻找的。[OPAM在 Windows 上](https://github.com/ocaml/opam/issues/246)还不是很稳定（也许 Thomas 可以提供最新情况）。

坦率地说，我建议在 VM 上安装 linux，然后您应该可以立即开始使用 OPAM。否则，看看这个 OCaml 包管理器，它专注于跨平台支持：http: [//yypkg.forge.ocamlcore.org/](http://yypkg.forge.ocamlcore.org/)。但是，我自己从未尝试过。您可以尝试的最后一个包管理器是 GODI，不过我不确定它是否支持 Windows。

最后，如果这些选项都不起作用，那么应该可以从[源头](https://github.com/ocaml-batteries-team/batteries-included)安装电池。你所需要的只是 OCaml 和 make。如果这种方法存在问题，那么您绝对应该在此处或在错误跟踪器上跟进它们，因为电池确实打算支持 Windows AFAIK。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T19:28:45.537

OCaml在带有*WODI*的 Windows 上[运行良好](http://wodi.forge.ocamlcore.org/ "WODI")，这是一个基于 Cygwin 的发行版，包括电池和大量其他有用的软件包（在 Windows 上手动安装很*痛苦）。*

我敦促您尝试 WODI，我相信它对于我们其他人，被遗忘的灵魂，必须处理 Windows 来说，是不可或缺的工具。

# bash - Linux bash shell script prompt user input and store in variable

> ID：15751855
> 
> 赞同：1
> 
> 时间：2013-04-01T21:03:42.837
> 
> 标签：bash, variables, user-input

How do I collect user input and store in variables to use in parameters for jar file execution?

Tried using read -p and bash's select command from following link but get errors: [How do I prompt for Yes/No/Cancel input in a Linux shell script?](https://stackoverflow.com/questions/226703/how-do-i-prompt-for-input-in-a-linux-shell-script#) here is what I have so far:

```
#!/bin/bash

echo "Hello "$USER"."
echo "Enter System :"
read name
echo "Enter Format (JPG/PDF):"
read format 

java -jar ~/folder/myjar.jar -input ~/scripts/file -output$format ~/output/$name.$format 
```

This partially works in that it produces output file but the name variable is lost, format variable is generated in string ok. Running this also generates the following errors: ": command not found" under hello user, " ': not a valid identifierame" after entering system name

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-03T04:34:51.730

看起来你可能有回车/windows 行终止，尝试运行

```
dos2unix input.txt 
```

或者

```
sed 's/^M$//' input.txt > output.txt 
```

或者

```
tr -d '\r' < input.txt > output.txt 
```

# java - How to make the autocompletetextfield in Wicket work after the session timed out

> ID：15751858
> 
> 赞同：0
> 
> 时间：2013-04-01T21:03:49.713
> 
> 标签：java, session, autocomplete, wicket

I've been playing with the Wicket autocompletetextfield. It has one problem though - when the session times out it stops working if the page itself isn't refreshed. This would be quite confusing for a customer I think, and I guess that it's not meant to work that way. Therefore, how can I make the Wicket autocompletetextfield work even though the session has timed out (and without refreshing the page)

To try it yourself:

1.  Go to [http://www.wicket-library.com/wicket-examples-6.0.x/ajax/autocomplete](http://www.wicket-library.com/wicket-examples-6.0.x/ajax/autocomplete)
2.  Write something in the textfield, eg. bel
3.  Wait for 5 minutes (I think that's is the default session timeout they use in the examples) and try again, without refreshing the page. Now you'll only get a blank textfield.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:54:49.913

我认为你不能。

我知道的唯一解决方法是将 Ajax 错误处理策略设置为 REDIRECT_TO_ERROR_PAGE，评估错误页面中 HTTP 标头中的 Referer-Field 并提供指向发生超时的页面的链接（或自动重定向）。

YourWicketApplication.java

```
@Override
public void init() {
    super.init();
    // ...
    getExceptionSettings().setAjaxErrorHandlingStrategy(IExceptionSettings.AjaxErrorStrategy.REDIRECT_TO_ERROR_PAGE);

} 
```

YourErrorPage.java：

```
public YourErrorPage(...) {
    // ...
    WebRequest request = (WebRequest) getRequest();
    String referer = request.getHeader("Referer"));
    // ... provide a link/auto redirect to this address
} 
```

# spacing - 代码间距和缩进提示

> ID：15751863
> 
> 赞同：1
> 
> 时间：2013-04-01T21:04:19.180
> 
> 标签：spacing, indentation

我知道这可能会引发一些讨论，这不是这个网站想要的，但这个问题可以回答。

我总是以一种我开始不赞成的方式编码：

```
<html>

<head>

</head>

<body>

</body>

</html> 
```

我将所有内容都加倍，而且我从不缩进，真的。

任何人都可以告诉我缩进有多大帮助吗？另外，如果对您的代码更好，我应该如何缩进或空格？

谢谢你然后...

如果这个问题没有帮助，请发表评论或提出编辑建议，而不是对其进行评分...！

编辑：请注意，此编辑是在 Daniel Imm 的回答之后

我应该如何缩进 CSS、Javascript 或 PHP 之类的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T21:09:11.697

缩进意味着您基本上可以更轻松地扫描/阅读代码。开始这样做，你将不知道没有它你是如何生活的。

此外，当您缩进阅读非间隔代码时会容易得多。对 HTML 这样做，每当你打开一个标签，做一个缩进：

```
<html>
    <head>
        <title></title>
    </head>
    <body>
        <div></div>
    </body>
</html> 
```

# flash - 如何使用 Actionscript 3 卸载或删除外部加载的 SWF？

> ID：15751864
> 
> 赞同：1
> 
> 时间：2013-04-01T21:04:19.567
> 
> 标签：flash, actionscript, web, adobe

我正在使用 Flash/actionscript 开发游戏，特别是在某些事情上遇到了一些麻烦。我在闪存方面的知识确实有限，所以这可能对我没有多大帮助，但无论如何。在我的游戏中，我有一个帮助按钮。如果单击此按钮，则会弹出一个屏幕，显示如何为播放器执行操作的说明。指令分为多个 SWF 文件，因此每次单击此按钮时，都会将其中一个外部 SWF 文件加载到游戏中以供使用。

我可以很好地完成这部分，但是如果玩家进一步进入游戏并单击帮助按钮，则会显示帮助以及之前显示的每个帮助文件。

显然我不希望这种情况发生，我尝试了很多事情都没有成功。

任何建议都非常感谢。

编辑：这是我用来加载帮助文件的代码。

```
private function prepHelp(title:String):void
    {   
        // introduction help files
        switch(title) {
            case "Welcome to Game Module 1": gameUI.singleton.loadHelp("Help/game_module1.swf"); break;
            case "Welcome to Game Module 2":    gameUI.singleton.loadHelp("Help/game_module2.swf"); break;
            case "Welcome to Game Module 3":    gameUI.singleton.loadHelp("Help/game_module3.swf"); break;
        }
    } 
```

这些在 gameUI 类中调用我的 loadHelp() 函数：

```
public function loadHelp(file_name:String):void
    {
        helpBtn.addEventListener(MouseEvent.CLICK, function(evt:MouseEvent):void { 

                _helpObject.loadHelp(file_name);
                singleton.addChild(_helpObject);
                _helpObject.dispatchEvent(new Event("getHelp"));
            } 
        );
    } 
```

因此，帮助 SWF 正在与我的 helpView.as 类中的 _helpObject 对象一起加载：

```
public class helpView extends Sprite
{   
    // variables associated with loading help content
    private var _helpLoader:Loader;
    private var _loader:Loader;
    private var _helpRequest:URLRequest;
    private var _helpMc:MovieClip = new MovieClip();

    private var _exitButton:Sprite = new Sprite();

    public function helpView():void {}

    public function loadHelp(help_file:String):void
    {
        _helpRequest = new URLRequest("swf/help_files/"+help_file);
        initialize();

        addEventListener("getHelp", getHelp);
    }

    private function initialize():void
    {   
        _exitButton.graphics.lineStyle(1, 0x000000, 1);
        _exitButton.graphics.beginFill(0xffffff);
        _exitButton.graphics.drawRect(0, 0, 75, 25);
        _exitButton.graphics.endFill();
        _exitButton.buttonMode = true;
        _exitButton.alpha = 1;

        _exitButton.x = gameUI.singleton.stage.stageWidth - 210;
        _exitButton.y = gameUI.singleton.stage.stageHeight - 55;

        _exitButton.addEventListener(MouseEvent.CLICK, closeHelp);
    }

    private function getHelp(evt:Event):void
    {   
        _helpLoader = new Loader();
        _helpLoader.load(_helpRequest);

        _helpLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, showHelp);
    }

    private function showHelp(evt:Event):void
    {   
        _loader = Loader(evt.target.loader);

        // set the width and height of the help swf to the dimensions of the game window.
        _loader.content.width = gameUI.singleton.stage.stageWidth;
        _loader.content.height = gameUI.singleton.stage.stageHeight;

        _helpMc.addChild(_loader.content);
        _helpMc.addChild(_exitButton);
        addChild(_helpMc);
        setChildIndex(_helpMc, numChildren - 1);

        _helpLoader.removeEventListener(Event.COMPLETE, showHelp);
    }

    private function closeHelp(evt:MouseEvent):void
    {
        removeChild(_helpMc);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:02:51.747

我认为您遇到的问题是孤立的 swfs。因此，当加载一个 swf 时，它会显示出来，但是当您准备移动到下一个 swf 时，它永远不会被卸载（至少没有正确卸载）......

如果您想保持这种技术，您需要确保在使用完 swf 后卸载它（正确地，没有泄漏）。

在我的游戏中，通常指令屏幕不会那么重，以至于我想加载和卸载 swf，所以我不确定你的情况，但我会提出一个建议是：

在显示游戏之前加载所有 swf 和信息（预加载器阶段），然后根据需要显示游戏或隐藏适当的帮助剪辑。

IE：

*   有一个预加载器，可以将您的游戏与指令 swfs 一起加载。
*   让预加载器提供对游戏加载指令 swfs 的引用
*   让游戏将引用存储在某个数组/向量中。
*   如果用户点击帮助按钮，显示第一条指令 swf，并设置一些“currentClip”变量指向第一条指令 swf
*   如果用户点击关闭按钮，隐藏“currentClip”
*   如果用户单击下一条指令/上一条指令，隐藏 currentClip，显示下一条/上一条指令 swf，并将 currentClip 变量重新初始化为显示的 swf...

如果你能提供一些来源，我可能会更有效地帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:47:27.563

好的，我解决了。我所做的是创建了引用每个 SWF 文件的对象，并将它们全部放入一个数组中，以及一个跟踪应该加载哪些 SWF 的引用变量。此引用变量跟踪玩家所在游戏的当前区域，因此当玩家单击帮助按钮时，会加载正确的 SWF 并显示给他们，然后当他们单击退出时可以直接返回游戏。

谢谢大家在这方面帮助我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T10:37:40.577

您可以删除/卸载加载这些帮助外部 swf 的加载器。

```
addChild(yourloader)     //adds the loader 
removeChild(yourloader)   // removes your loader 
```

此外，如果您使用数组来存储电影（SWFS），您可以清除 array.lenght = 0; 可能循环函数会更合适。

```
 var len:int = TempSWFS.length;
    for( var i:int = 0; i < len; i++ ) {
   if(TempSWFS[i] != null && TempSWFS[i].parent != null){
       TempSWFS[i].parent.removeChild(TempSWFS[i]);
   } 
```

# android - 从服务器返回的文档类型而不是字符串？

> ID：15751868
> 
> 赞同：1
> 
> 时间：2013-04-01T21:04:55.083
> 
> 标签：android, django, bitnami

我正在使用 BitNami 来测试我的 django 项目。我正在从 android 创建一个连接，将一个 url 传递给它以从数据库中获取一些数据。数据格式如下：

```
{"apps": ["False", "Hello from notepade++", "My App", "Test"]} 
```

这是我在android中获取和接收数据的方式

```
public static ArrayList<String> getApps(){
    HttpClient httpclient = new DefaultHttpClient();
    HttpResponse responseCategories;
    int categoriesStatusCode =0;
    String responseCategoriesString = "";
    ArrayList<String> out = new ArrayList<String>();
    HttpGet httpgetCategories = new HttpGet("http://safwany/sampleproject/applications/fetch_apps");
    try {
        responseCategories = httpclient.execute(httpgetCategories);
        categoriesStatusCode = responseCategories.getStatusLine().getStatusCode();
        try {
            responseCategoriesString = EntityUtils.toString(responseCategories.getEntity());
        } catch (ParseException e1) {
            e1.printStackTrace();
        } catch (IOException e1) {
            e1.printStackTrace();
        }
    } catch (ClientProtocolException e1) {
        e1.printStackTrace();
    } catch (IOException e1) {
        e1.printStackTrace();
    }
    if(categoriesStatusCode==200){
        JSONObject object;
        try {
            System.out.println(responseCategoriesString);
            object = new JSONObject(responseCategoriesString);
            JSONArray Jarray = object.getJSONArray("apps");
            for(int i = 0; i < Jarray.length(); i++)
            {
                String s = (String) Jarray.get(i);
                out.add(s);
                //categoriesMap.put(s, 0);
            }
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
    return out;
} 
```

当我尝试打印 responseCategoriesString 时，我得到以下信息：

```
04-01 22:55:56.335: I/System.out(9325): <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="refresh" content="0;url=http://search.tedata.net/main?InterceptSource=0&ClientLocation=eg&ParticipantID=esrkzqp9pwh62lmydaf4wsy3i92taus2&FailureMode=1&SearchQuery=&FailedURI=http%3A%2F%2Fsafwany%2Fsampleproject%2Fapplications%2Ffetch_apps&AddInType=4&Version=2.1.8-1.90base&Referer=&Implementation=0"/><script type="text/javascript">url="http://search.tedata.net/main?InterceptSource=0&ClientLocation=eg&ParticipantID=esrkzqp9pwh62lmydaf4wsy3i92taus2&FailureMode=1&SearchQuery=&FailedURI=http%3A%2F%2Fsafwany%2Fsampleproject%2Fapplications%2Ffetch_apps&AddInType=4&Version=2.1.8-1.90base&Referer=&Implementation=0";if(top.location!=location){var w=window,d=document,e=d.documentElement,b=d.body,x=w.innerWidth||e.clientWidth||b.clientWidth,y=w.innerHeight||e.clientHeight||b.clientHeight;url+="&w="+x+"&h="+y;}window.location.replace(url);</script></head><body></body></html>
04-01 22:55:56.335: W/System.err(9325): org.json.JSONException: Value <!DOCTYPE of type java.lang.String cannot be converted to JSONObject 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:14:55.107

当我查看您收到的响应数据时，我认为您遇到了一些防火墙或类似问题：

```
http://search.tedata.net/main?InterceptSource=0&ClientLocation=eg&ParticipantID=esrkzqp9pwh62lmydaf4wsy3i92taus2&FailureMode=1&SearchQuery=&FailedURI=http%3A%2F%2Fsafwany%2Fsampleproject%2Fapplications%2Ffetch_apps&AddInType=4&Version=2.1.8-1.90base&Referer=&Implementation=0 
```

包含您请求的网址：

```
FailedURI=http%3A%2F%2Fsafwany%2Fsampleproject%2Fapplications%2Ffetch_apps 
```

但`FailedURI`听起来像一个带有过滤器的公司防火墙/网关......你应该检查你的模拟器/设备是否真的可以访问`safwany`“域”。也许您应该尝试使用 IP 而不是`safwany`?

# php - 带有 Ajax 的 PHP 数组 - 获取数据的正确方法？

> ID：15751869
> 
> 赞同：2
> 
> 时间：2013-04-01T21:05:03.430
> 
> 标签：php, jquery, mysql, ajax, json

我是一个完整的 ajax/php 白痴 - 让我们现在就解决这个问题；但我已经到了需要帮助的地步。我一直在这里和那里学习各种教程，并整理了一份报告。

最终，我有一个包含我需要的所有数据的表。我可以获取该数据并在表格中适当地显示它而不会出现问题。我正在尝试添加允许根据条件进行过滤的“下拉”框（此表中有一个名为“垂直”的列 - 因此下拉列表将包含数据库列中的所有不同“垂直” - 和根据垂直的选择过滤表格）

我有以下名为“client.php”的前端片段，客户端加载该片段以获取报告：

客户端.php：

```
<head>
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
 <link rel="stylesheet" type="text/css" href="css/mediacallreport.css">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Generic Title</title>
</head>

<body>
  <h2> Generic Reports </h2>
  <h3>Report Formatting: </h3>
  <div id="instruction">Select how you would like the data selected using the dropdowns below</div>

  <!--DROPDOWNS-->
 Vertical - 
<select name="station" id="station">
    <option value="all">All</option>
    <script id="source" language="javascript" type="text/javascript">
      $(function () 
      {
        $.ajax({                                      
          url: 'api.php',   //the script to call to get data          
          data: "",   //you can insert url argumnets here to pass to api.php
          dataType: 'json',   //data format      
          success: function(verticals) //on recieve of reply
          {
          for (var i in verticals)
          {
            var vertical = verticals[i];
            var verticalID = verticals[0];

        $('station').append("<option value=\""+verticalID+"\">"+verticalID+"</option>");
                }

          } 
        });
      });
    </script>
</select>

 <!--TABLE BEGINNING - TABLE HEADER ROW--> 
<table id="output">
<tr>
<th>ID</th>
<th>Station_Network</th>
<th>Vertical</th>
<th>Creative</th>
<th>Tolls</th>
<th>States</th>
<th>Date Range</th>
<th>Week</th>
<th>Ordered</th>
<th>Credits</th>
<th>Credits Totals</th>
<th>Not Used</th>
<th>Cleared</th>
<th>Total Uniques</th>
<th>Cleared Each Unique</th>
<th>Total Unique Connect</th>
<th>Cleared Each Unique Connect</th>
<th>Unique Connect 8am - 8pm</th>
<th>Cleared Unique 8am - 8pm</th>
<th>Calls over 10 Min</th>
<th>Calls over 10 Min %</th>
</tr>

<!--JAVASCRIPT TO GET INFORMATION FROM DB, ASSIGN VARIABLES AND PUT INTO TABLE ROWS-->
  <script id="source" language="javascript" type="text/javascript">
  $(function () 
  {
    //-----------------------------------------------------------------------
    // 2) SEND HTTP REQUEST WITH AJAX
    //-----------------------------------------------------------------------
    $.ajax({                                      
      url: 'api.php',   //the script to call to get data          
      data: "",   //you can insert url argumnets here to pass to api.php
                        //for example "id=5&parent=6"
      dataType: 'json',   //data format      
      success: function(rows) //on recieve of reply
      {
      for (var i in rows)
      {
        var row = rows[i];
        var id = row[0];              //get id
        var station_network = row[1];       //get name
        var vertical = row[2];  //get vertical
        var creative = row[3]; //get creative
        var tolls= row[4];  //get tolls
        var states= row[5];  //get states
        var date_range= row[6];  //get date_range
        var week= row[7];  //get week
        var ordered= row[8];  //get ordered
        var credits= row[9];  //get credits
        var credit_totals= row[10];  //get credit_totals
        var not_used= row[11];
        var cleared= row[12];
        var total_uniques= row[13];
        var cleared_each_unique= row[14];
        var total_unique_connect= row[15];
        var cleared_each_unique_connect= row[16];
        var unique_connect_8am_to_8pm= row[17];
        var cleared_each_8am_to_8pm= row[18];
        var calls_over_10= row[19];
        var calls_over_10_pct= row[20];
        //--------------------------------------------------------------------
        // DISPLAY THE CONTENT
        //--------------------------------------------------------------------
        //TABLES (ALTERNATING ROWS)
        if (id % 2 == 0){
        $('#output').append("<tr id=\"evenrow\"> <td>"+id+"</td><td>"+station_network+"</td><td>"+vertical+"</td><td>"+creative+"</td><td>"+tolls+"</td><td>"+states+"</td><td>"+date_range+"</td><td>"+week+"</td><td>"+ordered+"</td><td>"+credits+"</td><td>"+credit_totals+"</td><td>"+not_used+"</td><td>"+cleared+"</td><td>"+total_uniques+"</td><td>"+cleared_each_unique+"</td><td>"+total_unique_connect+"</td><td>"+cleared_each_unique_connect+"</td><td>"+unique_connect_8am_to_8pm+"</td><td>"+cleared_each_8am_to_8pm+"</td><td>"+calls_over_10+"</td><td>"+calls_over_10_pct+"</td></tr>");
        } else {
        $('#output').append("<tr id=\"oddrow\"> <td>"+id+"</td><td>"+station_network+"</td><td>"+vertical+"</td><td>"+creative+"</td><td>"+tolls+"</td><td>"+states+"</td><td>"+date_range+"</td><td>"+week+"</td><td>"+ordered+"</td><td>"+credits+"</td><td>"+credit_totals+"</td><td>"+not_used+"</td><td>"+cleared+"</td><td>"+total_uniques+"</td><td>"+cleared_each_unique+"</td><td>"+total_unique_connect+"</td><td>"+cleared_each_unique_connect+"</td><td>"+unique_connect_8am_to_8pm+"</td><td>"+cleared_each_8am_to_8pm+"</td><td>"+calls_over_10+"</td><td>"+calls_over_10_pct+"</td></tr>");
        }

        }

      } 
    });
  });
  </script>

</body>
</html> 
```

这与我的 api.php api.php 对话：

```
<?php 
  //--------------------------------------------------------------------------
  // Connect to DB
  //--------------------------------------------------------------------------
  include 'DB.php';
  $con = mysql_connect($host,$user,$pass) ;
  $dbs = mysql_select_db($databaseName, $con);
  //--------------------------------------------------------------------------
  // 2) Query database for data
  //--------------------------------------------------------------------------
  //Rows of data in media-analysis
  $result = mysql_query("SELECT * FROM $tableName");          //query
  $data = array();
  while ($row = mysql_fetch_row($result) )
  {
  $data[] = $row;
  }

  //Dropdown for Verticals
    $verticalSql = "SELECT VERTICAL FROM media_analysis GROUP BY VERTICAL";
    $verticalResult = mysql_query($verticalSql);
    $verticalData = array();
    while ($verticalRow = mysql_fetch_row($verticalResult)){
        $verticalData[] = $verticalRow;
    }

    $finalarray = array ('rowdata' => $data, 'verticaldata' => $verticalData);
  //--------------------------------------------------------------------------
  // 3) echo result as json 
  //--------------------------------------------------------------------------
  echo json_encode($finalarray);
?> 
```

在 Firebug 中，我可以看到遇到的数据，它看起来像这样：

```
{"rowdata":[["1","canceled","canceled","canceled","canceled","canceled","03\/18\/2013-03-24\/2013","12","canceled","0","","","0.00","0","0.00","0","0.00","0","0.00","0","0.00"],["2","Station B","Vertical B","DEBIT","800-555-5555","CA","03\/18\/2013-03-24\/2013","12","$813.00","0","","","813.00","8","101.62","5","162.60","3","271.00","2","40.00"]],"verticaldata":[["canceled"],["Vertical B"]]} 
```

在我开始包含“下拉菜单”之前，我只有一个简单的 json_encode ($data); 它会正常工作，并且表格完全显示了我想要的方式。由于我添加了另一个要传递的数组，这就是事情变得疯狂而我完全迷失的时候。

我知道我的编码可能很差，但我只是想解决这个问题。所有帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T21:13:49.130

问题是成功处理程序中的代码需要返回一个数组：

```
success: function(verticals) //on recieve of reply
{
    for (var i in verticals)
    {
        var vertical = verticals[i];
        var verticalID = verticals[0];

        $('station').append("<option value=\""+verticalID+"\">"+verticalID+"</option>");
    }

} 
```

但是，正如您在示例中所示，`verticals`如下所示：

```
{"rowdata":[[...],[...]],"verticaldata":[["canceled"],["Vertical B"]]} 
```

如您所见，`verticals`是一个对象，其中包含另外两个对象（`rowdata`和`verticaldata`）。

要使您当前的成功处理程序再次工作，您首先需要`verticaldata`从 AJAX 响应中提取。只需将代码更改为此即可：

```
success: function(response) //on recieve of reply
{
    var verticals = response.verticaldata;
    for (var i in verticals)
    {
        var vertical = verticals[i];
        var verticalID = verticals[0];

        $('station').append("<option value=\""+verticalID+"\">"+verticalID+"</option>");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T21:15:07.347

由于您使用的是 PHP 和 jQuery，因此您可以使用我的库。开箱即用地处理来自 PHP 到 Javascript 的任何数据，反之亦然；）

见这里[http://phery-php-ajax.net](http://phery-php-ajax.net)

在你的情况下，它会是这样的

```
<?php
   include('Phery.php');

   Phery::instance()->set(array(
     'verticals' => function(data){
        $r = new PheryResponse;

        $verticalResult = mysql_query("SELECT VERTICAL FROM media_analysis GROUP BY VERTICAL");

        $r->jquery('.station'); // Select it for subsequent chaining in the loop
        $i = 0;
        while ($verticalRow = mysql_fetch_row($verticalResult)){
          $r->append('<option value="'.($i++).'">'.$verticalRow['VERTICAL'].'</option>'); // What is VERTICAL? Is that query the real one?
        }
        // every "append" call will happen to .station jquery selector automatically
        return $r;
     }
   ))->process();
?> 
```

在您的 JavaScript 代码中

```
$(function(){
   phery.remote('verticals');
}); 
```

就是这样。为什么（重新）生成数据，当您可以在服务器中执行一次时（数据生成所属的位置）

当然，您可以只返回 JSON 并使用`phery:json`，但这在您的情况下不实用

```
return PheryResponse::factory()->json($verticalData); 
```

和 Javascript 方面

```
phery.remote('verticals', null, null, false).on('phery:json', function(data){
  for (var i in data){
    // do your append here
  }
}); 
```

# django - Django IntegrityError（1048，“列'network_id'不能为空”）

> ID：15751870
> 
> 赞同：0
> 
> 时间：2013-04-01T21:05:05.413
> 
> 标签：django, django-forms

好的，所以我为此搜索了高低，这两个文档以及谷歌上的几乎每个页面都告诉我我的代码应该是合法的。

让我从models.py开始：

```
class Network(models.Model):
    title = models.CharField(max_length=50)
    description = models.CharField(max_length=500)
    created = models.DateTimeField(auto_now_add=True)
    updated = models.DateTimeField(auto_now=True)

    def __unicode__(self):
       return self.id

class NetworkForm(ModelForm):
    class Meta:
        model = Network

class Range(models.Model):
    network = models.ForeignKey(Network)
    range_start = models.GenericIPAddressField(unpack_ipv4=True)
    range_end = models.GenericIPAddressField(unpack_ipv4=True)
    range_title = models.CharField(max_length=50)
    range_description = models.CharField(max_length=300)

    def __unicode__(self):
        return self.range_title

class RangeForm(ModelForm):
    class Meta:
        model = Range
        exclude = ('network',) 
```

然后我的views.py：

```
@login_required(login_url='/login/')
def add_network(request):

    if request.method == "POST":
        net_form = NetworkForm(request.POST)
        range_formset = RangeForm(request.POST)
        if net_form.is_valid and range_formset.is_valid:
            net_form.save(commit=False)
            range_formset.network = net_form
            range_formset.save()
            net_form.save()

        return HttpResponseRedirect('/')
    else:
        net_form = NetworkForm()
        range_form = RangeForm()
        return render_to_response('networks/add.html', {
            "net_form": net_form,
            "range_form": range_form,
        }, context_instance=RequestContext(request)) 
```

还有我的模板：

```
{% extends 'base.html' %}

{% block title %}Add Network{% endblock %}

{% block content %}
<div class="row-fluid">
    <div class="span7 offset2 well">
        <h3>Add network:</h3>
        <hr />
        <form class="form-horizontal" method="post" action="">
            {% csrf_token %}
            {{ net_form }}
            <h4>Add a range to the network:</h4>
            <hr />
            <div class="form-inline">
                {{ range_form }}
            </div>
            <hr />
            <button type="submit" class="btn btn-primary btn-large">Add network</button>
        </form>
    </div>
</div> 
```

{% 端块 %}

现在，我在这里缺少一些明显的东西，只是没有建立最后一个连接。如果有人能启发我，那就太好了。

PS：如果有人想知道我通过查看 MySQL Workbench、MySQL 命令行客户端和 manage.py dbshel​​l 和 inspectdb 来验证我的模型，所有 id 列都存在。我什至删除了整个数据库并使用 manage.py 重新创建它。

我的齿轮已经磨了大约一个星期了，所以是时候寻求帮助了。如果有人能帮我解决这个问题，那就太好了！

这是回溯：

```
Environment:

Request Method: POST
Request URL: http://localhost:8000/network/add/

Django Version: 1.5
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django_nose',
 'networks')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware')

Traceback:
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in   get_response
  115\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/contrib/auth/decorators.py" in _wrapped_view
  25\.                 return view_func(request, *args, **kwargs)
File "/home/alexander/PycharmProjects/NOC/networks/views.py" in add_network
  29\.             range_form.save()
File "/usr/local/lib/python2.7/dist-packages/django/forms/models.py" in save
  370\.                              fail_message, commit, construct=False)
File "/usr/local/lib/python2.7/dist-packages/django/forms/models.py" in save_instance
  87\.         instance.save()
File "/usr/local/lib/python2.7/dist-packages/django/db/models/base.py" in save
  546\.                        force_update=force_update, update_fields=update_fields)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/base.py" in save_base
  650\.                 result = manager._insert([self], fields=fields,    return_id=update_pk, using=using, raw=raw)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/manager.py" in _insert
  215\.         return insert_query(self.model, objs, fields, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/query.py" in insert_query
  1673\.     return query.get_compiler(using=using).execute_sql(return_id)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/sql/compiler.py" in execute_sql
  937\.             cursor.execute(sql, params)
File "/usr/local/lib/python2.7/dist-packages/django/db/backends/util.py" in execute
  41\.             return self.cursor.execute(sql, params)
File "/usr/local/lib/python2.7/dist-packages/django/db/backends/mysql/base.py" in execute
  127\.                 six.reraise(utils.IntegrityError,   utils.IntegrityError(*tuple(e.args)), sys.exc_info()[2])
File "/usr/local/lib/python2.7/dist-packages/django/db/backends/mysql/base.py" in execute
  120\.             return self.cursor.execute(query, args)
File "/usr/lib/python2.7/dist-packages/MySQLdb/cursors.py" in execute
  174\.             self.errorhandler(self, exc, value)
File "/usr/lib/python2.7/dist-packages/MySQLdb/connections.py" in defaulterrorhandler
  36\.     raise errorclass, errorvalue

Exception Type: IntegrityError at /network/add/
Exception Value: (1048, "Column 'network_id' cannot be null") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T21:21:55.737

你至少有四个错误。

首先，您必须实际*调用* `is_valid`：它是一种方法，而不是属性。

其次，`form.save(commit=False)` *返回*模型实例。它不会神奇地将表单对象转换为实例。您需要将其分配给一个变量，然后在该变量上设置额外的属性。

第三，你在`commit=False`错误的对象上做 - 你应该在你随后想要修改的对象上做。

第四，除非表格有效，否则不要重定向。

所以：

```
range_form = RangeForm(request.POST)
if net_form.is_valid() and range_form.is_valid():
    net_obj = net_form.save()
    range_obj = range_form.save(commit=False)
    range_obj.network = net_obj
    range_obj.save()
    return HttpResponseRedirect('/')
else:

    net_form = NetworkForm()
    range_form = RangeForm()

return render_to_response('networks/add.html', {
    "net_form": net_form,
    "range_form": range_form,
}, context_instance=RequestContext(request)) 
```

（当它们不是形式时，不要称它们为形式，它们只是形式。当然，除了你实际上应该为范围形式使用内联形式集，但这是一个单独的问题。）

# php - 向现有数组添加索引键

> ID：15751871
> 
> 赞同：-1
> 
> 时间：2013-04-01T21:05:05.463
> 
> 标签：php, arrays, associative-array

我有一个数组，我需要检查它是否是关联的。

该数组可能如下所示：

```
[preview] => Array
    (
        [0] => Array
            (
                [type] => web
                [side] => left
            )
        [1] => Array
           (
               [type] => web
               [side] => right

           )
      ) 
```

这是完美的。但有时，我得到这个：

```
 [preview_file] => Array
       (
        [type] => artwork
        [side] => right
       ) 
```

在这种情况下，我需要添加一个索引`0`来使数组看起来像这样：

```
 [preview_file] => Array
       (
        [0] => Array
          (
           [type] => artwork
           [side] => right
          )

       ) 
```

我正在使用这个函数来检查它是否是关联的：

```
 function is_assoc($array) {
     return (bool)count(array_filter(array_keys($array), 'is_string'));
 } 
```

如果没有，我需要以某种方式添加`[0]`. 有没有人有想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:09:05.740

我会检查值而不是键。听起来您只需检查第一个值就可以逃脱：

```
function is_assoc($array) {
  return is_array(reset($array));
} 
```

您的问题是关于如何进行实际更改？这应该有效：

```
if (!is_assoc($preview)) {
  $preview = array($preview);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T21:09:30.753

不同的方式：

```
if(!isset($array[0])) {
    $array[0] = $array;
} 
```

# maven - 如何从命令行传递多个suiteXML文件

> ID：15751874
> 
> 赞同：1
> 
> 时间：2013-04-01T21:05:13.780
> 
> 标签：maven, testng, pom.xml

我需要从命令行运行多个 XML 套件文件。

我的 POM.xml -

```
<plugin>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.5</version>
    <configuration>
        <suiteXmlFiles>
                <suiteXmlFile>src/test/resources/xml_Suites/${tests}.xml</suiteXmlFile>
        </suiteXmlFiles>
        <testFailureIgnore>true</testFailureIgnore>
    </configuration>
</plugin> 
```

从命令行尝试这个 -

```
mvn clean -Dtests={abcd,xyz} test 
```

只有 xyz.xml 被触发，而 abcd.xml 没有被触发。

基本上只有括号中提到的最后一个 xml 文件被触发。

上面的语法有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:46:53.873

我认为您需要指定使用整个路径 Change -Dtests=src/test/resources/xml_Suites/abcd.xml,src/test/resources/xml_Suites/xyz.xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-05T09:22:46.683

下面的示例对我有用：

```
mvn test -Dsurefire.suiteXmlFiles=/Users/mdafsarali/repository/path/IOS.xml,/Users/mdafsarali/repository/path/IOS2.xml,/Users/mdafsarali/repository/path/IOS3.xml 
```

# java - Jsoup 错误 502

> ID：15751875
> 
> 赞同：2
> 
> 时间：2013-04-01T21:05:14.857
> 
> 标签：java, proxy, jsoup

我正在尝试使用 jsoup 登录网站（带有一些子系统的内联网页面），输入子系统，搜索内容并解析页面。

我可以登录，但是当我尝试访问子系统时，我收到 HTTP 错误 502。但是在浏览器中正常打开。

我认为这是代理（已经在java中设置）的一些问题。经过几次尝试后，我的登录被阻止，我收到 HTTP 错误 407（页面被阻止或类似的东西）

我已经尝试过放置`.useragent("mozilla...")`, `.timeout(...)`,`.ignorehttperrors(true)`和`ignorecontenttype(true)`using `.cookie`。

有没有办法解决这个问题？

```
Response x = Jsoup.connect("page").data("...").method(method.GET).execute(); 
```

* * *

我使用了给定的建议（apache httpclient，我不再收到 HTTP 错误。但我仍然想知道 jsoup 是否可以绕过这个问题，因为我可以只使用一个 .jar 而不是 6 个（来自 apache 的 5 个加上 jsoup 来解析回复。）感谢那些编辑我的帖子（rs）的人，并感谢 ollo 的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:40:08.373

这是一个使用 Java 的示例`UrlConnection`：

```
URLConnection connection = new URL("your url").openConnection();
connection.addRequestProperty("http.proxyHost", "proxy server");
connection.addRequestProperty("http.proxyPort", "proxy port");

// Alternative:
System.setProperty("http.proxyHost", "yourproxyserver");
System.setProperty("http.proxyPort", "portnumber");

InputStream responseStream = connection.getInputStream();

// Read response into buffer and parse it with jsoup 
```

另请参阅我的答案：[JSoup over VPN/proxy](https://stackoverflow.com/questions/13288471/jsoup-over-vpn-proxy)

*（我想这是一个更好的）*

但我真的建议您*使用 HttpClient*（或类似的）来进行此类连接。正如我之前所说，jsoup 仅作为有限的连接支持。

# d3.js - 大型数据集使我的浏览器崩溃

> ID：15751878
> 
> 赞同：3
> 
> 时间：2013-04-01T21:05:30.837
> 
> 标签：d3.js, crossfilter

我正在将约 80,000 行的数据集加载到我创建的时间序列图表对象中，它使我的浏览器崩溃。

我不认为这对 d3 来说应该是个问题，因为[这个 Crossfilter 示例](http://square.github.com/crossfilter/)用数十万行的[数据集演示。](http://square.github.com/crossfilter/flights-3m.json)（虽然，数据正在汇总，而我正在绘制每个点）。

我不确定如何调试它。Chrome 没有给我任何有用的消息，而且 Google 搜索结果很少。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T14:11:04.517

如果您使用 chrome 加载大量远程数据，则这是已知[问题](https://code.google.com/p/chromium/issues/detail?id=138506)。Chrome 在通过 xhr 接收大型数据集时崩溃。要解决此问题，您可以按块接收数据，也可以通过 Web 套接字接收数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T01:17:09.903

这取决于，如果您将 80,000 个元素附加到 DOM，那将是巨大的，如果它使浏览器崩溃，我并不感到惊讶。Crossfilter 示例确实有几十万行，但由于聚合（正如您提到的）而执行的 DOM 操作最少。你可以看看画布。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-01T21:10:35.070

您可以禁用浏览器扩展，并尝试，如果您的结果是在 flash 或 java 中，禁用 chrome java 扩展，如果它们显示在 pdf 中禁用 chrome pdf 扩展并让操作系统决定使用哪个程序，它仍然会显示在铬，但不会崩溃。chrome://plugins/ 有时 chrome 对一个程序有两个扩展，禁用其中一个

# javascript - 使用 Jquery 或 Javascript 禁用按钮单击其他按钮时

> ID：15751881
> 
> 赞同：0
> 
> 时间：2013-04-01T21:05:41.490
> 
> 标签：javascript, jquery, button

我有这两个按钮，我希望在单击另一个按钮时禁用其中一个按钮。

有html

```
 <button type="submit" id="button_user" name="submit" class="btn btn-small btn-primary" data-toggle="collapse" data-target="#fsearch">Pretraga terena na sajtu</button>
  <button type="submit" id="button_field" name="submit" class="btn btn-small btn-primary" data-toggle="collapse" data-target="#usearch">Pretraga korisnika na sajtu</button> 
```

我已经设法用两个函数和 onclick 做到了这一点，但我想知道有没有什么优雅的方法可以在一个函数中做到这一点，从而可以避免内联 js？

这是我的js：

```
$(document).ready(function(){

disable_one = function(){
    if($('button_user').data('clicked', true)){
        $('#button_field').attr("disabled", "disabled");
        return;
    }
};
disable_two = function(){
    if($('button_field').data('clicked', true)){
        $('#button_user').attr("disabled", "disabled");
        return;
    }
};

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:07:54.103

使用 jQuery：

```
$('.btn.btn-small.btn-primary').click(function () {
    $('.btn.btn-small.btn-primary').not($(this)).prop('disabled', true)
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/2BgdD/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T21:10:49.340

```
$('#button_user').on('click', function() {
    $('#button_field').attr('disabled', 'disabled');
}); 
```

工作示例：http: [//jsfiddle.net/BPZT7/](http://jsfiddle.net/BPZT7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T21:22:06.020

将 Jquery 单击事件绑定到按钮类，然后使用 Jquery is 方法 ( [http://api.jquery.com/is/](http://api.jquery.com/is/) ) 使用目标属性。

```
 $("your button class").click(function(e) {
    if($(e.target).is("#button_user")) {
        //Disable button_field
    } else {
        // Disable button_user
    }
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T13:52:46.183

这就是我设法做到这一点的方法，非常简单明了。现在，如果访问者改变主意，则启用此按钮，以便他可以再次选择。

```
 $(document).ready(function(){

$('#button_user').click(function () {
    if (button_field.disabled==false){
        button_field.disabled = true;
    }
    else {
    button_field.disabled = false ;
    } 
});
$('#button_field').click(function () {
    if (button_user.disabled==false){
        button_user.disabled = true;
    }
    else {
    button_user.disabled = false ;
    } 
});

}); 
```

# php - 如何在自定义或特定文件夹中存储或保存 excel 文件？

> ID：15751882
> 
> 赞同：1
> 
> 时间：2013-04-01T21:05:53.580
> 
> 标签：php, export, export-to-excel

如何在自定义或特定文件夹中存储或保存 excel 文件？我有工作代码并且代码正在工作，但唯一的问题是我不能在特定文件夹中存储 excel 文件？

**主页**

```
<form action="itemexcel.php" method="post" 
onsubmit='$("#datatodisplay").val( $("<div>")
.append( $("#ReportTable").eq(0).clone() ).html() )'>

<table id="ReportTable" width="781" border="2"> Or <div id id="ReportTable">
<tr>
<td><input type="hidden" id="datatodisplay" name="datatodisplay"></td>
<td><input class="bg" type="submit" value="Export To Excel"></td>
</tr></table></div>

<input type="hidden" id="datatodisplay" name="datatodisplay">
<input class="bg" type="submit" value="Export To Excel"> 
```

**itemexcel页面**

```
<?php
$path = "/excelreports"; 
$file=$path."productexcel.xls";
header('Content-Type: application/force-download');
header('Content-disposition: attachment; filename=".$file."');
// Fix for crappy IE bug in download.
header("Pragma: ");
header("Cache-Control: ");
echo $_REQUEST['datatodisplay'];
?> 
```

# android - 我如何“想象”用户的运动？

> ID：15751889
> 
> 赞同：0
> 
> 时间：2013-04-01T21:06:10.360
> 
> 标签：android

我不知道该怎么解释。

但以安卓桌面为例。

当您移动手指时，您会移动整个桌面，直到您在下一个桌面上。如您所见，如果您将屏幕向右移动大约 51%，当您将手指从屏幕上移开时，它会转到右侧屏幕，如果您只是将屏幕移动了 40%，它将是回到同一个屏幕。

这种模式怎么称呼？

某种“预测”用户的移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:37:14.690

也许您正在谈论[Location Within](http://4ourth.com/wiki/Location%20Within)模式：

![来自 Steven Hoober 和 Eric Berkman 的移动 UI 模式目录中的模式位置](https://i.stack.imgur.com/12Snp.png)

> **问题：**
> 您必须描述一系列包含替代视图或继续显示一组内容的屏幕中的位置。
> 
> **解决方案：**
> 当使用有机访问方法呈现多个相似或连续信息的屏幕时，通常需要一个指示器，以便用户了解他们在系统中的位置。

其他来源可能称这样的东西为“轮播”或“幻灯片”。

**更新的答案：**
仔细阅读后，“位置范围”可能仅引用显示当前正在查看的屏幕的页面位置指示器。也许只是[幻灯片](http://4ourth.com/wiki/Slideshow)或[胶片](http://4ourth.com/wiki/Film%20Strip)模式更准确地描述了您的意思。

正如 FoamyGuy 在评论中指出的那样，[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)是在 Android 中实现“幻灯片”的方式。
此外，[ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)提供了灵活的选项来显示页面位置指示符（“Location Within”模式）

# ajax - jquery mobile trigger create 增强了一些元素但不是全部

> ID：15751890
> 
> 赞同：1
> 
> 时间：2013-04-01T21:06:11.423
> 
> 标签：ajax, jquery-mobile

我认为这可能是 Jquery Mobile 中的错误，但也可能是用户错误（我的）。

对于 jquery 移动页面，我`$(..).trigger("create")`在异步加载一些 html 后手动调用。我发现一个奇怪的 - 无论如何对我来说 - 行为，即 `<input>`加载的 html 上的文本类型*没有*增强为具有 JQM 的样式，而`<input>s`按钮类型是。

这是一个复制问题的精简版本。基本上，页面加载和注入`foo.html.` 的一部分`foo.html`是占位符 div，随后加载和注入其中`bar.html.` `bar.html`包含打开弹出窗口的链接。单击它并打开弹出窗口时，按钮的样式正确；输入不是。

注意：我调用`trigger("create")`注入内容的父级。

进一步说明：调用where is injection`trigger("create")`的*祖父母*`bar.html`可以正确设置所有样式，包括弹出窗口中的输入。请参阅下面的代码。

在我的基本 html 页面的正文中：

```
<div data-role="page" id="grandparent" data-theme="a">
<h3>A very basic page</h3>
</div> 
```

该页面头部的脚本：

```
<script type="text/javascript">    
  $(document).ready(function() {      
    var path = "pathToFiles/";
    $("#grandparent").load(path + "foo.html", null, function() {
      $("#grandparent").trigger("create");

      //now load bar
      $("#bar_placeholder").load(path + "bar.html", null, function() {

        /*this does NOT enhance text <input> on popup*/
        $("#bar_placeholder").trigger("create");

        /*this DOES enhance text <input> on popup*/
        //$("#grandparent").trigger("create");

      });            
    });    
  });  
</script> 
```

这是 foo.html

```
<div data-role="content" id="foo">
  <h3>Foo before placeholder...</h3>

  <div id="bar_placeholder" data-role="content"></div>

  <h3>...foo after placeholder</h3>

  <label for="foo_input" class="ui-hidden-accessible">foo input IS enhanced:</label>
  <input id="foo_input" value="" placeholder="i AM enhanced" data-theme="a" type="text" />

  <input type="button" id="foo_button" value="Foo Button"/>

</div> 
```

这是bar.html：

```
<a href="#popupLogin" data-rel="popup" data-position-to="window" data-role="button" data-inline="true" data-icon="check" data-theme="a" data-transition="pop">bar popup button</a>

<div data-role="popup" id="popupLogin" data-theme="a" class="ui-corner-all">
    <h3>Bar header</h3>              

    <label for="bar_input" class="ui-hidden-accessible">bar text input NOT enhanced</label>
    <input name="bar_input" id="bar_input" placeholder="i am NOT enhanced" data-theme="a" type="text"/>

    <input type="button" data-theme="a" value="bar button"/>    

</div> 
```

# php - foreach 循环不适用于包含

> ID：15751894
> 
> 赞同：0
> 
> 时间：2013-04-01T21:06:35.467
> 
> 标签：php, foreach, include

你们中有人知道为什么我不能在 foreach 循环中使用（长）一段代码吗？

foreach 循环中的代码只执行一次。

topictweets.php 中的这段代码可以自己正常工作，但我想在每个论坛上重复它。没有包含的 foreach 循环可以正常工作。我还尝试将主题 tweets.php 中的代码清楚地放在 foreach 循环中，这当然也不起作用。

它包含的代码用于从数据库中获取论坛的主题并查找相关的推文，并将其保存在数据库中。

还有其他方法可以做到这一点吗？

```
foreach ($forumlist as $x => $fID) {

    echo 'id:'.$fID.'<br>';

    include 'topictweets.php';
    /////////

    ////////
} 
```

在线版本： http: [//oudhollandsedrop.nl/webendata/FeedForum/fetchtweets.php](http://oudhollandsedrop.nl/webendata/FeedForum/fetchtweets.php)

主题 tweets.php 中的一堆代码

```
 <?php

//?/ VVVV ---- SELECT TOPICS FOR CURRENT FORUM ----- VVVV ////

echo $fID;

$sql = "SELECT Topics_TopicID
FROM Topics_crosstable
WHERE Forums_ForumID = '$fID'";

$result = mysql_query($sql);

if (!$result) {
//echo 'The topiclist could not be displayed, please try again later.';
} else {
if (mysql_num_rows($result) == 0) {
    // echo 'This topic doesn&prime;t exist.';
} else {
    while ($row = mysql_fetch_assoc($result)) {
        //display post data
        // echo $row['Topics_TopicID'];
        // echo': ';

        $topic = "SELECT Name
    FROM Topics
        WHERE TopicID = " . mysql_real_escape_string($row['Topics_TopicID']);

        $topicname = mysql_query($topic);

        if (!$topicname) {
            // echo 'The topic could not be displayed, please try again later.';
        } else {
            if (mysql_num_rows($topicname) == 0) {
                //  echo 'This topic doesn&prime;t exist.';
            } else {
                while ($row = mysql_fetch_assoc($topicname)) {
                    //display post data
                    // echo $row['Name'];
                    // echo'<br>';
                    $topiclist[] = $row['Name'];
                }
            }
        }
    }
}
}

foreach ($topiclist as $key => $value) {
    $terms .= "" . $value . ",";
}
//echo'<p>';
//echo rtrim($terms, ",");
//echo'<p>';
//echo'<p>';
//echo $terms;
//$terms="vintage";
//Twitter account information
$username = "Username";
$password = "Password";

while (true) {

//$terms="vintage";
//echo "search terms: " . substr_replace($terms, "", -1) . "\n";
$url = "https://stream.twitter.com/1/statuses/filter.json";
$cred = sprintf('Authorization: Basic %s', base64_encode("$username:$password"));
$param = "track=" . urlencode(substr_replace($terms, "", -1));
$opts = array(
    'http' => array(
        'method' => 'POST',
        'header' => $cred,
        'content' => $param,
        'Content-type' => 'application/x-www-form-urlencoded'),
    'ssl' => array('verify_peer' => false)
);
$ctx = stream_context_create($opts);
$handle = fopen($url, 'r', false, $ctx);
//var_dump($handle);
$content = "";
$flag = true;
while ($flag) {
    $buffer = fread($handle, 100);
    //$buffer = stream_get_line($handle, 1024, "\n");

    $a = explode("\n", $buffer, 2);
    $content = $content . $a[0];
    #var_dump($a);
    if (count($a) > 1) {
        #echo $content;
        #echo "\n";
        $r = json_decode($content, true);
        #var_dump($r);
        //  echo '<p>';
        //  echo "text: " . $r["text"];
        //  echo '<br>';
        //  echo "\nrceated_at: " . $r["created_at"];
        //  echo '<br>';
        //  echo "\nuser screen name: " . $r["user"]["screen_name"];
        //  echo '<br>';
        //  echo "\nuser id: " . $r["user"]["id"];
        //  echo '<br>';
        //  echo "\nid : " . $r["id"];
        //  echo '<br>';
        //  echo "\nin_reply_to_status_id: " . $r["in_reply_to_status_id"];
        //  echo '<p>';
        // echo "\n\n";
        $created_at = $r["created_at"];
        $created_at = strtotime($created_at);
        $mysqldate = date('Y-m-d H:i:s', $created_at);
        //

        // echo'<p>';
        foreach ($topiclist as $key => $value) {
            // echo'getshere!';
            //$whichterm = $r["text"];
            $whichterm = '"' . $r["text"] . '"';
            //echo $whichterm;
            if (stripos($whichterm, $value) !== false) {
                // echo 'true:' . $value . '';
                //find topicid
                $whattopic = "SELECT TopicID
                FROM Topics
                WHERE Name = '$value'";

                //var_dump($whattopic);
                $tID = mysql_query($whattopic);
                //var_dump($tID);

                if (!$tID) {
                    // echo 'topic id not found.';
                } else {
                    if (mysql_num_rows($tID) == 0) {
                        // echo 'This topic doesn&prime;t exist.';
                    } else {
                        while ($rec = mysql_fetch_assoc($tID)) {

                            $inserttweets = "INSERT INTO
                Tweets(Topics_TopicID, AddDate, Tweetcontent)
            VALUES('" . mysql_real_escape_string($rec['TopicID']) . "',
                                   '" . mysql_real_escape_string($mysqldate) . "',
                                   '" . mysql_real_escape_string($r["text"]) . "')";

                            //WHERE TopicID = " . mysql_real_escape_string($row['Topics_TopicID'])
                        }
                    }
                    $addtweet = mysql_query($inserttweets);
                    if (!$addtweet) {
                        //something went wrong, display the error
                        //echo 'Something went wrong while adding tweet.';
                        //echo mysql_error(); //debugging purposes, uncomment when needed
                    } else {
                        echo 'Succesfully added tweet';
                    }
                }
            }
        }

        die();
        $content = $a[1];
    }
}
fclose($handle);
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:13:19.300

在循环中“粘贴”一堆代码并不是一个好习惯。实际上，您要查找的是**函数**或已定义类的使用。因此，如果可以，请在您的函数中定义一个`topictweets.php`包含您的代码并在循环中使用它的函数：

```
include 'topictweets.php';
foreach ($forumlist as $x => $fID) {

    echo 'id:'.$fID.'<br>';
    processYourForums($fID);

    /////////

    ////////
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:07:43.763

这应该可以正常工作：

```
include 'topictweets.php';
foreach ($forumlist as $x => $fID) {
    echo 'id:'.$fID.'<br>';
} 
```

你只需要`include`一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T21:08:22.393

尝试 include_once()

但是，为什么不在 topictweets.php 中创建一个循环呢？

您可以在此页面中进行查询等，然后在包含中循环遍历它

# javascript - 使用行类别动态排序 HTML 表格

> ID：15751899
> 
> 赞同：4
> 
> 时间：2013-04-01T21:06:55.937
> 
> 标签：javascript, html

有许多不错的 JS 库可以使 HTML 表在客户端上动态可用，但我还没有找到一个可以处理分类行的。这是我所说的那种表的一个小例子：

```
╔═══╦═════════╦═══════╦══════════════╗
║   ║  Name▾  ║  Zip  ║     Pet      ║
╠═══╬═════════╬═══════╬══════════════╣
║   ║ Alice   ║ 14124 ║ Squirrel     ║
║ A ║ Alfred  ║ 24601 ║ Meerkat      ║
║   ║ Anupam  ║ 91532 ║ Gila monster ║
╠═══╬═════════╬═══════╬══════════════╣
║   ║ Bernice ║ 03413 ║ Rock         ║
║ B ║ Boris   ║ 32610 ║ Fish         ║
║   ║ Betty   ║ 71011 ║ Elephant     ║
╚═══╩═════════╩═══════╩══════════════╝ 
```

有没有人写过一个表格排序器，当表格在 Zip 或 Pet 列上排序时，它会自动拆分分类列（所以现在看起来像这样：

```
╔═══╦═════════╦═══════╦══════════════╗
║   ║  Name   ║  Zip▾ ║     Pet      ║
╠═══╬═════════╬═══════╬══════════════╣
║ B ║ Bernice ║ 03413 ║ Rock         ║
║ A ║ Alice   ║ 14124 ║ Squirrel     ║
║ B ║ Boris   ║ 22310 ║ Fish         ║
║ A ║ Alfred  ║ 24601 ║ Meerkat      ║
║ B ║ Betty   ║ 71011 ║ Elephant     ║
║ A ║ Anupam  ║ 91032 ║ Gila monster ║
╚═══╩═════════╩═══════╩══════════════╝ 
```

) 并在表格按名称排序时再次重新合并它？*如果做不到这一点，那么一个只*知道如何在类别中排序的表格排序器怎么样，而不管类别的顺序如何？（这对于我想要排序的真实表格是可以接受的，但显然不适用于这个玩具示例。）

如果有人有的话，我也很乐意为这种情况采取更好的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:06:07.630

好的，我尝试为您的问题编写代码。这不是最好的方法，但它似乎奏效了呵呵。让我知道它是否对您有好处，如果是的话，您是否可以按照自己的方式实施它。

我将尝试改进它并将其转换为 jQuery 插件：

[http://jsfiddle.net/chambs/TRnP7](http://jsfiddle.net/chambs/TRnP7)

```
var letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');

var data = [
    {name: 'Alice', zip: '14124', pet: 'Squirrel'},
    {name: 'Alfred', zip: '24601', pet: 'Meerkat'},
    {name: 'Anupam', zip: '91532', pet: 'Gila monster'},
    {name: 'Bernice', zip: '03413', pet: 'Rock'},
    {name: 'Boris', zip: '32610', pet: 'Fish'},
    {name: 'Betty', zip: '71011', pet: 'Elephant'}
];

var lastType = '';

function getHeader() {
    var row = this[0],
        header = [];
    for(var k in row) {
        header.push(k);
    }
    return header;
}

function sortBy(criteria) {
    lastType = criteria;
    var c = criteria || 'name';
    return this.sort(function(a, b) {
        return a[c] > b[c];
    });
}

function render(tbl, data) {
    tbl.empty();
    var buffer = "<tr><th class='letter'>&nbsp;&nbsp;</th>",
        header = getHeader.call(data);
    for(var i=0; i < header.length; i++) {
        buffer += "<th class='sort' data-type='"+header[i]+"'>"+header[i]+"</th>";
    }
    buffer += "</tr>";
    tbl.append(buffer);
    buffer = "";

    for(var i=0; i < data.length; i++) {
        var l = data[i].name.substr(0, 1);
        buffer += "<tr><td class='"+l+"'>" + l + "</td>";
        for(var j=0; j < header.length; j++) {
            var k = header[j];
            buffer += "<td>" + data[i][k] + "</td>";
        }
        buffer += "</tr>";
        tbl.append(buffer);
        buffer = "";
    }

    if(lastType === 'name') {
        merge(tbl);
    }

}

function merge(tbl) {
    for(var i=0; i < letters.length; i++) {
        var l = letters[i];
        var td = $('.' + l, tbl);
        if(td.length > 1) {
            td.eq(0).attr('rowspan', td.length);
            $('.' + l + ':gt(0)', tbl).remove();
        }
    }
}

sortBy.call(data, 'name');
render($('#tbl'), data);
$(document).on('click', '.sort', function(ev) {
    var type = $(this).data('type');
    sortBy.call(data, type);
    render($('#tbl'), data);
}); 
```

# linden-scripting-language - 更改另一个对象的透明度

> ID：15751900
> 
> 赞同：1
> 
> 时间：2013-04-01T21:06:58.300
> 
> 标签：linden-scripting-language

我正在编写一个附加到一个对象的 LSL 脚本，并且想更改*另一个*我拥有 UUID 的对象的透明度（存储在一个`key`变量中）。

我已经阅读了文档，但甚至无法弄清楚如何更改另一个对象的名称/描述，更不用说透明度了。我只能找到修改本地对象的方法。

LSL 是否不支持修改其他对象的属性，即使它们位于同一区域并具有相同的所有者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T01:23:22.577

如果它在同一个区域，那么您只需添加`llListen()`一个 prim 并`llRegionSay()`在私人频道上使用另一个。

像这样：

## Prim 1 Script（Prim 发送命令）

```
default
{
    state_entry()
    {
    }

    touch_start(integer total_number)
    {
        llRegionSay(-123456,"1.0"); // Channel -123456 can be anything.  "1.0" will be the transparency setting passed to the 2nd prim
    }
} 
```

## Prim 2 Script（Prim 接收命令）

```
default
{
    state_entry()
    {
        llListen(-123456, "", "", ""); // Make the prim listen
    }
    listen( integer channel, string name, key id, string message )
    {
        if (channel==-123456) {  // Match the same private channel
            llSetAlpha((float)message, ALL_SIDES);  // Convert "message" into an integer and pass to the llSetAlpha() function as the transparency - 0 = invisible  1 = visible
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-11T17:32:33.893

不要使用 llRegionSay，使用 llRegionSayTo 这样您就可以指定接收 prim 的 UUID。此外，在第二个对象的侦听状态下，您应该让它忽略具有不匹配所有者的任何对象

第一行听：

```
if(llGetOwnerKey(id) != llGetOwner()) return; 
```

# c# - 找到与请求匹配的多个操作 (GET)

> ID：15751917
> 
> 赞同：2
> 
> 时间：2013-04-01T21:08:05.593
> 
> 标签：c#, asp.net, .net, asp.net-web-api

我在我的控制器中定义了 2 个 GET 方法，一个名为“Favorites”，另一个简单地命名为“Get”。在我的路由中，我专门将不同的 URL 路由映射到这两种不同的方法。

但是，当我点击 /Api/MockUsers/Get?userId=2 时，我收到以下错误：

> 找到多个与请求匹配的操作

但是，当我点击 /api/MockUsers/1/favorites 时，它会很好地返回数据。

我很困惑，因为似乎我专门将 /Api/MockUsers/Get?userId=2 路由到 ACTION “Get”，而不是“Favorites”，那么为什么 MvC4 会感到困惑？

这就是我的路线的样子：

```
routes.MapHttpRoute(
       name: "Users",
       routeTemplate: "api/MockUsers/{id}/favorites",
       defaults: new { controller = "MockUsers", action = "Favorites", id = 1 }
);

routes.MapHttpRoute(
        name: "Api_Get",
        routeTemplate: "api/{controller}/{action}/{id}",
        defaults: new { action = "Get", id = RouteParameter.Optional },
        constraints: new { httpMethod = new HttpMethodConstraint("GET") }
); 
```

在我的控制器中，我有两种方法：

```
[AcceptVerbs("GET")]
public UserFavorite Favorites(long id)
{
   Favorite f = new Favorite(1, "Favorite 1", "Favorite Type 1");
   UserFavorite userFavorite = new UserFavorite(1, f);

   return userFavorite;
}

public User Get(long userId)
{
   User u = _mockusersService.GetUser(userId);
   return u;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T20:22:08.213

您可以使用默认的 Webapi 路由执行此操作，但要更改查询方式。WebApiConfig.cs 中的默认路由：

```
configuration.Routes.MapHttpRoute("API Default", "api/{controller}/{id}",
   new { id = RouteParameter.Optional }); 
```

假设 webapi 控制器名为 MockUsers，示例调用的行为如下：

GET **/Api/MockUsers?userId=2444** --> 将解析为以 userId 作为参数的 GET 方法（您的 Get 方法端点）。

GET **/Api/MockUsers?id=23444** --> 将解析为以 Id 作为参数的 GET 方法（您最喜欢的方法端点）。

# wpf - 如何从 ValueConverter 访问资源？

> ID：15751918
> 
> 赞同：1
> 
> 时间：2013-04-01T21:08:15.360
> 
> 标签：wpf, resources, ivalueconverter

我在自定义 DLL 程序集中有一个 UserControl，我在其中定义了两个静态 BitmapImage 资源，它们表示 ItemsControl 中的数据状态。我想根据某些条件使用转换器将 Image 的 Source 属性设置为 BitmapImage 资源之一。但是，我不确定如何从`Convert`方法内部访问资源，因为我没有使用转换器的控件实例。

我已经尝试将资源加载到转换器的静态构造函数中的静态变量中，该构造函数也在同一个 DLL 中，但我没有成功。

这失败了...

```
public class MyConverter : IValueConverter
{
    static BitmapImage myFirstResource;
    static MyConverter()
    {
        // This can't seem to find the resource...
        myFirstResource = (BitmapImage)Application.Current.FindResource("MyResourceKey");
    }
} 
```

...但在 XAML 中，这成功了，所以我知道资源密钥是有效的。

```
<Image Source="{StaticResource MyResourceKey}" /> 
```

我不知道这是否有任何区别，但这是在 DLL 中，而不是在 EXE 中。尽管如此，我认为所有资源都归结为应用程序，具体取决于您执行的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-05-15T08:15:39.580

在这里找到完美的解决方案[通过 WPF 中的代码隐藏访问资源](https://stackoverflow.com/a/24286059/2346621) （比使用更好`Application.Current`）

> **@[伊索](https://stackoverflow.com/users/426315/itsho)**
> 
> 您可以简单地添加`x:Class`它：
> 
> ```
> <ResourceDictionary x:Class="Namespace.NewClassName"
>                     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
>                     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" >
>     <ds:MyCollection x:Key="myKey" x:Name="myName" />
> </ResourceDictionary> 
> ```
> 
> 然后在后面的代码中使用它：
> 
> ```
> var res = new Namespace.NewClassName();
> var col = res["myKey"]; 
> ```

然后应该应用一些修复：

> **@[斯蒂芬·罗斯](https://stackoverflow.com/users/5396416/stephen-ross)**
> 
> 但是为了能够使用它的键找到资源，我必须`res.InitializeComponent()`在尝试访问之前调用，`key`否则对象将不显示任何键并且调用`res["myKey"]`将返回`null`

# ios - 无法在 UISearchBar 中将 UITextField 的边框样式设置为无

> ID：15751920
> 
> 赞同：2
> 
> 时间：2013-04-01T21:08:22.477
> 
> 标签：ios

我正在尝试删除`textborderstyle`. 我知道我得到了对正确对象的引用，因为我能够更改to并看到可见的变化。`UITextField``UISearchBar``TextBorderStyle``RoundedRect`

我尝试使用以下代码对 UISearchBar 进行子类化：

```
- (void)layoutSubviews {
  UITextField *searchField;
  NSUInteger numViews = [self.subviews count];
  for(int i = 0; i < numViews; i++) {
    if([[self.subviews objectAtIndex:i] isKindOfClass:[UITextField class]]) { //conform?
        searchField = [self.subviews objectAtIndex:i];
    }
  }
  if(!(searchField == nil)) {
    [searchField setBorderStyle:UITextBorderStyleNone];
  }
  [super layoutSubviews];
} 
```

我也在课堂上试过这个：

```
UITextField *txtSearchField = [_searchBar valueForKey:@"_searchField"];
[txtSearchField setBackgroundColor:[UIColor clearColor]];
[txtSearchField setBorderStyle:UITextBorderStyleNone]; 
```

这些都不起作用。默认情况下，`UITextBorderStyleLine`如果我手动将其设置为`None`. 不幸的是，我无法找到删除边框样式的方法。有谁知道如何做到这一点？我试图弄清楚这一点，因为我需要我的搜索栏看起来像一个`UITextField`. 在这一点上，我正在辩论只是切换到`UITextField`幕后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:00:51.543

我很确定实现这一点的唯一方法是继承 UISearchBar！

将其子类化后，在您的 layoutSubviews 方法中尝试此代码！

```
- (void)layoutSubviews {
   UITextField *searchField;
   NSUInteger numViews = [self.subviews count];
   for(int i = 0; i < numViews; i++) {
      if([[self.subviews objectAtIndex:i] isKindOfClass:[UITextField class]]) { //conform?
        searchField = [self.subviews objectAtIndex:i];
      }
   }
   if(!(searchField == nil)) {
       searchField.textColor = [UIColor whiteColor];
       [searchField setBackground: [UIImage imageNamed:@"buscador.png"] ];
       [searchField setBorderStyle:UITextBorderStyleNone];
   }

   [super layoutSubviews];
} 
```

此处找到的问题[删除了 uisearchbar 中的 uitextfield 的边框](https://stackoverflow.com/questions/10601402/remove-the-boarder-of-uitextfield-in-uisearchbar)回答了您最初的问题！

您还可以参考[如何自定义 UISearchBar 的外观以](https://stackoverflow.com/questions/6201406/how-to-customize-apperance-of-uisearchbar)获取更多信息！

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:35:44.963

只是不要忽视评论（当我遇到同样的问题并提出这个问题时，我只是这样做了）。如果以编程方式，您的 UITextField 的边框样式“未”设置为 UITextBorderStyleNone，请尝试在设置边框样式之前设置 UITextField 的背景或 backgroundColor 属性！它有效！

# php - 在我的数组中抛出语法错误

> ID：15751925
> 
> 赞同：-3
> 
> 时间：2013-04-01T21:08:41.850
> 
> 标签：php

我已将我尝试过的 3 个版本注释掉。他们都没有工作..我做错了什么..帮助将不胜感激。谢谢你。

```
 $patient_link = array(
                'patient/demographics/armdme'=>"Patient",
                'patient/comment/lookup'=>'Comments',
                //if(login::$id='07L'){ echo 'komment'}=>'',

            //if (in_array(login::$id, array('007', '0E1', '00D', '011', '02V', '139', '174', '07L', '0FK'))) { echo'komment'}=>'',
            //if (in_array(login::$id, array('007', '0E1', '00D', '011', '02V', '139', '174', '07L', '0FK'))) { echo " . komment'=> . ";}, 

            'patient/custom_forms_lookup'=>'Custom Forms',
            'patient/eligibility/lookup'=>'Eligibility',
            'patient/pmldme/lookup'=>'Encounter',
            'patient/event_lookup'=>'Events',
            'patient/history/lookup'=>'History',
            'patient/image/lookup'=>'Images',
            'patient/reorder/lookup'=>'Reorder'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:13:54.710

我猜这就是你的意思？我清理了格式并在完成后留下了一些碎片...... `007`,`0E1`部分是什么？

```
<?php
$patient_link = array(
    'patient/demographics/armdme' => 'Patient',
    'patient/comment/lookup'      => 'Comments',
    'patient/custom_forms_lookup' => 'Custom Forms',
    'patient/eligibility/lookup'  => 'Eligibility',
    'patient/pmldme/lookup'       => 'Encounter',
    'patient/event_lookup'        => 'Events',
    'patient/history/lookup'      => 'History',
    'patient/image/lookup'        => 'Images',
    'patient/reorder/lookup'      => 'Reorder'
);

// What are these for??
// array('007', '0E1', '00D', '011', '02V', '139', '174', '07L', '0FK'), 
```

要有条件地添加项目，请执行以下操作：

```
<?php
$patient_link = array(
    'patient/demographics/armdme' => 'Patient'
);
if(in_array(login::$ida, array('007', '0E1', '00D', '011', '02V', '139', '174', '07L', '0FK'))) {
    $patient_link['patient/comment/lookup']      = 'Comments';
}
$patient_link['patient/custom_forms_lookup'] = 'CustomForms';
$patient_link['patient/eligibility/lookup']  = 'Eligibility';
$patient_link['patient/pmldme/lookup']       = 'Encounter';
$patient_link['patient/event_lookup']        = 'Events';
$patient_link['patient/history/lookup']      = 'History';
$patient_link['patient/image/lookup']        = 'Images';
$patient_link['patient/reorder/lookup']      = 'Reorder'; 
```

定义数组后，使用`$array[$key] = $value`语法将项添加到数组中。

# c# - 将两个数据集合并到一个 Crystal Report 中

> ID：15751927
> 
> 赞同：0
> 
> 时间：2013-04-01T21:08:56.010
> 
> 标签：c#, crystal-reports

我想为帐户创建一种摘要报告。报告应该有一个来自一个数据源的帐户数据图表和一个来自另一个数据源的不同帐户数据的网格。

我想使用 account_ID = X 的表一中的所有数据，并且我想使用 account_ID = x 的表二中的所有数据。

Crystal Reports 将让我添加两个不同的数据源，但它希望将它们链接起来以主/详细信息的方式创建子报表。我需要报告表一中的所有数据，以及表二中的所有数据。

我对如何做到这一点有点困惑。

注意：当我只为一个报告执行此操作时，我只需从由 account_ID 过滤的视图创建一个数据表，然后将其设置为报告的数据源。这样，繁重的工作就在 Crystal Reports 获取数据之前完成。同样，不确定如何对两个不同的数据源执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:05:23.737

如果数据集足够不同以至于 JOIN 没有意义，您将需要使用子报告。首先，就像您只使用其中一个数据集一样创建报告。然后，在您希望显示第二个网格的位置插入一个子报表（转到插入 --> 子报表）；通常把它放在一个新的部分。仅使用第二个数据集构建子报表 - 将其本身视为完整报表​​可能会有所帮助，就好像主报表不存在一样。

右键单击主报表中的子报表“字段”，然后选择*Change Subreport Links*。添加 account_ID 字段，您将`Pm-Table.account-ID`在子报告本身中自动获得一个参数、和基本选择专家。

双击它，您将获得一个仅包含子报告的新选项卡。从长远来看，您会希望抑制大部分部分，因此输出只是网格。

完成所有这些后，运行主报告将显示两组结果。

# java - 阅读英镑符号和语音标记

> ID：15751928
> 
> 赞同：-1
> 
> 时间：2013-04-01T21:09:01.467
> 
> 标签：java, android, string, char

我目前正在将一个文件读入java，其中该文件包含（“char symbol”“tab”“6 comma separated booleans”“new line”）的列表

我正在仔细阅读它并将其拆分好 - 但是我有一个问题，即英镑符号和语音标记被读取为带有问号的黑色菱形。这把一切都搞砸了，因为我需要能够识别哪些代码与哪个字符符号一起使用。

我正在阅读使用：

```
public void read()
 {

  int i = 0;
  try{
    // Open the file
    InputStream is = am.open("combinations.txt");
    // Get the object of DataInputStream
    DataInputStream in = new DataInputStream(is);
    BufferedReader br = new BufferedReader(new InputStreamReader(in));
    String strLine;
    //Read File Line By Line
    while ((strLine = br.readLine()) != null && i < 53)   {
     String[] sep1 = strLine.split("\t");
     String[] sep2 = sep1[1].split(",");
     entries[i] = new Entry(sep1[0].charAt(0), new CellPattern(Boolean.valueOf(sep2[0]),
       Boolean.valueOf(sep2[1]),Boolean.valueOf(sep2[2]),Boolean.valueOf(sep2[3]),
       Boolean.valueOf(sep2[4]),Boolean.valueOf(sep2[5])));
     i++;
    }
    //Close the input stream
    in.close();
    }catch (Exception e){//Catch exception if any
    System.err.println("Error: " + e.getMessage());
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T01:14:56.557

这是一个编码问题，请尝试将 BufferedReader 行更改为：

```
BufferedReader br = new BufferedReader(new InputStreamReader(in, "UTF-8")); 
```

我不确定您需要哪种编码，因此您可能想尝试几种不同的编码。

编辑：尝试“ISO-8859-1”

# c++ - constexpr 函数的编译时评估

> ID：15751930
> 
> 赞同：1
> 
> 时间：2013-04-01T21:09:07.443
> 
> 标签：c++, c++11

考虑编译器可以在编译时评估 函数**的唯一情况。**`constexpr`在这些情况下，从标准（第 5.19 段）中不清楚编译器是否总是**强制**在编译时评估`constexpr`函数；如果它并不总是强制性的，我最终希望看到一些示例，其中该标准确实为 constexpr 函数的编译时评估提供了强有力的保证。

```
constexpr int f(int n) {
   return n*n;
} 
```

# java - 无法从 JSON 获得响应

> ID：15751932
> 
> 赞同：0
> 
> 时间：2013-04-01T21:09:08.223
> 
> 标签：java, php, android, json

我是安卓新手。那么我在下面的代码中试图做的是发送一个http请求到一个php文件，json从那里得到响应。在 php 文件中，我试图显示从 A 开始的城市名称。每当我运行代码时，我都会收到此错误：[“](https://stackoverflow.com/questions/10267910/jsonexception-value-of-type-java-lang-string-cannot-be-converted-to-jsonobject)`"org.json.jsonexception value doctype of type java.lang.string cannot be converted to jsonarray`。所有[相关](https://stackoverflow.com/questions/10876079/org-json-jsonexception-value-doctype-of-type-java-lang-string-cannot-be-conve)[线程](https://stackoverflow.com/questions/10267910/jsonexception-value-of-type-java-lang-string-cannot-be-converted-to-jsonobject)都没有帮助，或者我无法理解那里给出的解决方案。这是我的 Java 代码**MainActivity.java**

 **```
package com.list;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.net.ParseException;
import android.os.Bundle;
import android.util.Log;

import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

JSONArray jArray;
String result = null;
InputStream is = null;
StringBuilder sb=null;

int ct_id;
String ct_name;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

TextView textview1 = (TextView)findViewById(R.id.textView1);
textview1.setText("Erqem");

 ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
//http post
try{
     HttpClient httpclient = new DefaultHttpClient();
     HttpPost httppost = new HttpPost("http://10.0.2.2/city.php");
     httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
     HttpResponse response = httpclient.execute(httppost);
     HttpEntity entity = response.getEntity();
     is = entity.getContent();

     }catch(Exception e){
         Log.e("log_tag", "Error in http connection"+e.toString());
    }
//convert response to string
try{
      BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF-8"),8);
       sb = new StringBuilder();
       sb.append(reader.readLine() + "\n");

       String line="0";
       while ((line = reader.readLine()) != null) {
                      sb.append(line + "\n");
        }
        is.close();
        result=sb.toString();
        }catch(Exception e){
              Log.e("log_tag", "Error converting result "+e.toString());
        }

//paring data
try{
      jArray = new JSONArray(result);
      JSONObject json_data = new JSONObject();
      json_data=null;
      for(int i=0;i<jArray.length();i++){
             json_data = jArray.getJSONObject(i);
             ct_id=json_data.getInt("CITY_ID");
             ct_name=json_data.getString("CITY_NAME");

             textview1.setText(ct_name);
             }

      }

      catch(JSONException e1){
          Toast.makeText(getBaseContext(), "No City Found"+e1.toString() ,Toast.LENGTH_LONG).show();
          Log.e("log_tag", "Error converting result "+e1.getMessage() );
      } catch (ParseException e1) {
            e1.printStackTrace();
    }
}
} 
```

**.php 文件**

```
<?php
header('Content-type=application/json; charset=utf-8');
mysql_connect("","root","");
 mysql_select_db("Deal");
 $sql=mysql_query("select * from CITY where CITY_NAME like 'A%'");
 while($row=mysql_fetch_assoc($sql)) 
 $output[]=$row; 
 print(json_encode($output));
 mysql_close();

?> 
```

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:49:38.160

也许您使用的地址不正确，请尝试 10.0.2.2:8080/city.php**

# c++ - 开放街道地图库

> ID：15751938
> 
> 赞同：2
> 
> 时间：2013-04-01T21:09:23.243
> 
> 标签：c++, openstreetmap

我希望通过 C++ 解析 OpenStreetMap PBF（二进制）文件。唯一的限制是该库必须与 Windows 兼容。那里有一个库（[libosm](http://sourceforge.net/apps/mediawiki/travelingsales/index.php?title=LibOSM)），但其中一位作者表示，由于 POSIX 调用，它不太可能在 Windows 上工作。有人知道 Windows 的 C++ PBF 解析器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:13:43.740

[http://wiki.openstreetmap.org/wiki/Frameworks](http://wiki.openstreetmap.org/wiki/Frameworks)列出了很多库，其中，[LibOSMScout](http://wiki.openstreetmap.org/wiki/Libosmscout)看起来最有前途。

# opencv - OpenCV 将 Canny 边缘转换为轮廓

> ID：15751940
> 
> 赞同：13
> 
> 时间：2013-04-01T21:09:33.613
> 
> 标签：opencv, image-processing

我有一个 OpenCV 应用程序，它来自办公室内部的网络摄像头流（很多细节），我必须在其中找到一个人工标记。标记是白色背景上的黑色方块。我使用 Canny 查找边缘并使用 cvFindContours 进行轮廓，然后使用 approxPolyDP 和 co。用于过滤和寻找候选人，然后使用局部直方图进一步过滤，bla bla bla ...

这或多或少有效，但不完全是我想要的。FindContours 总是返回一个闭合循环，即使 Canny 创建了一条非闭合线。我得到一个轮廓在线条的两侧行走，形成一个循环。对于 Canny 图像（我的标记）上的闭合边缘，我得到 2 个轮廓，一个在内部，另一个在外部。我必须对此操作有问题：

*   我为每个标记得到 2 个轮廓（没那么严重）

*   最琐碎的过滤不可用（拒绝非闭合轮廓）

**所以我的问题是：是否有可能获得非封闭 Canny 边缘的非封闭轮廓？** 或者解决上述两个问题的标准方法是什么？

Canny 是一个非常好的工具，但我需要一种将 2D b/w 图像转换为易于处理的方法。类似于连接组件按组件的步行顺序列出所有像素。所以我可以过滤循环，并将其输入到 approxPolyDP。

更新：我错过了一些重要的细节：标记可以是任何方向（它不是正面朝向相机，没有直角），实际上我正在做的是基于标记的 2D 投影的 3D 方向估计。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-07T20:16:07.687

我为问题中的 2 个问题找到了一个干净且简单的解决方案。诀窍是启用 2 级层次结构生成（在 findCountours 中）并查找具有父级的轮廓。这将返回封闭 Canny 边缘的内部轮廓，仅此而已。*非闭合边会被自动丢弃，每个标记都有一个轮廓。*

```
vector<vector<Point> > contours;
vector<Vec4i> hierarchy;
findContours(CannyImage, contours, hierarchy, CV_RETR_CCOMP, CV_CHAIN_APPROX_NONE, Point(0,0) );
for (unsigned int i=0; i<contours.size(); i++)
    if (hierarchy[i][3] >= 0)   //has parent, inner (hole) contour of a closed edge (looks good)
        drawContours(contourImage, contours, i, Scalar(255, 0, 0), 1, 8); 
```

它也可以反过来工作，即：寻找有孩子的轮廓（hierarchy[i][2] >= 0），但在我的情况下，父检查会产生更好的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-15T07:37:08.910

我对重复的轮廓也有同样的问题，甚至扩张和侵蚀也无法解决：

```
Mat src=imread("E:\\test.bmp"),gry,bin,nor,dil,erd;
GaussianBlur( src, nor, Size(5,5),0 );  
cvtColor(nor,gry,CV_BGR2GRAY);  
Canny(gry,bin,100,150,5,true);
dilate(bin,dil,Mat());
erode(dil,erd,Mat());
Mat tmp=bin.clone();
vector<vector<Point>> conts;
vector<Vec4i> hier;
findContours(tmp,conts,hier,CV_RETR_TREE,CV_CHAIN_APPROX_SIMPLE); 
```

此图像 (test.bmp) 包含 3 个轮廓，但 findContours 返回了 6 个！我使用了阈值并解决了问题：

```
Mat src=imread("E:\\test.bmp"),gry,bin,nor,dil,erd;
GaussianBlur( src, nor, Size(5,5),0 );  
cvtColor(nor,gry,CV_BGR2GRAY);
threshold(gry,bin,0,255,THRESH_BINARY+THRESH_OTSU);     
vector<vector<Point>> conts;
vector<Vec4i> hier;
findContours(bin,conts,hier,CV_RETR_TREE,CV_CHAIN_APPROX_SIMPLE); 
```

现在它返回 4 个轮廓，第一个是图像边界（索引为 0 的轮廓），可以轻松跳过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T22:55:46.470

我会这样做 1\. Canny 进行边缘检测 2\. 使用 houghtransform 检测边缘。3\. 检测成 90 角的两条边。

# java - 如何通过对应的值对 keySet 进行排序

> ID：15751946
> 
> 赞同：0
> 
> 时间：2013-04-01T21:09:42.223
> 
> 标签：java, sorting, hashmap, key-value

*首先让我说，请不要说“只使用 TreeMap”来回答这个问题，* 我知道 TreeMaps，但特别想了解以下是否可行。

在 Java 中，假设我有一个映射到 Doubles 的字符串 HashMap。

```
Map<String, Double> map = new HashMap<String, Double>(); 
```

我在这张地图中插入了一些键值对。现在假设我得到了keySet：

```
Collection<String> keys = map.keySet(); 
```

我的问题是，如何按地图中的相应值对键集合进行排序？在 Perl 中，这会是这样的：

```
my @keys = sort { $hash{$a} <=> $hash{$b} } keys %hash; 
```

有没有办法在 Java 中使用 HashMap 做到这一点？

# xml - Kiosk 游戏在没有 AIR 的情况下编写本地文件 AS3？可能的？如果没有，本地服务器？

> ID：15751950
> 
> 赞同：1
> 
> 时间：2013-04-01T21:09:51.833
> 
> 标签：xml, actionscript-3, xampp

我正在设置一个将在路上进行的信息亭游戏。我需要能够将 XML 文件写入本地硬盘（不保证互联网连接）。

我意识到 AIR 是要走的路，但出于各种原因 - 其中一个原因是客户更喜欢它不作为 AIR 运行，因为它将在 YCD 媒体播放器中，并且客户更容易使用 SWF - - 我想探索非 AIR 选项。

有没有办法在没有提示的情况下写入本地文件？我从之前的讨论中得到它（[是否可以加载本地文件而不必要求用户首先在 AIR 应用程序中浏览它？](https://stackoverflow.com/questions/6786236/is-it-possible-to-load-a-local-file-without-having-to-ask-the-user-to-browse-to)）答案是“不”。真的？

如果我可以访问互联网，我可以写入服务器并执行一点 PHP 来写入文件。在 Windows 机器上设置并在本地执行这有多难？我对 Windows 完全一无所知，也没有可以使用的 Windows 机器，所以我想让它变得简单。这需要在落后的道路上完美地工作，并且可以由非技术人员维护。有人建议使用 XAMMP……</p>

当然，理想情况下，如果我能想出一个仅限 AS3 的解决方案，那就太好了。或者也许（如果有人知道的话）可以与 YCD 播放器配合使用……</p>

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:39:13.630

如果您只处理小数据，`SharedObjects`可以像 LondonDrugs_MediaServices 在他的评论中所说的那样解决您的问题。您可以向其中写入任何内容，但默认情况下限制为 100KB。要获得更多，您必须接受[提示](http://i.stack.imgur.com/W5mKG.jpg)或将其[预设](http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager03.html)为更大的尺寸。

> 有没有办法在没有提示的情况下写入本地文件？

`SharedObjects`除此之外，出于安全原因，您不能这样做。如果您只使用 Flash 播放器、网络或投影仪，则无法在没有提示的情况下直接**写入**文件。您可以从两者中**读取**本地文件，但您必须了解您的[沙箱](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf6167e-7fff.html#WS2db454920e96a9e51e63e3d11c0bf6167e-7ff9)，因为当您混合使用网络和本地文件访问时，它会变得混乱。

如果你可以运行本地网络服务器，我建议你使用[Mongoose](https://code.google.com/p/mongoose/)，因为它很小，有 PHP，安装简单，几乎可以在任何东西上运行。请注意，您仍然需要注意您的[安全沙箱](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e3f.html)，但是从同一个本地网络服务器提供 SWF 可以简化这一点。

# css - div顶部的中心导航

> ID：15751952
> 
> 赞同：0
> 
> 时间：2013-04-01T21:09:57.103
> 
> 标签：css, center, nav

我正在尝试将导航选项卡放在 div 的顶部。基本上，我希望导航以 div 顶部为中心，每个选项卡之间有一个 2px 阶段。导航选项卡现在似乎不在 .row 的中心。

任何帮助将不胜感激！

```
.row {
    margin: 0 auto;
    width: 960px;
}

#top-menu{
   font-family: "LeagueGothicRegular",sans-serif;
    text-align: center;
    margin-top:240px;
  }

#top-menu li{
    display: block;
    float: left;
    line-height: 1;
    margin: 0 17px;
    text-align: center;
  }

#top-menu a{
    font-family: 'LeagueGothicRegular', sans-serif;
    background-color: #fff;
    border-top-left-radius: 5px;
    border-top-right-radius: 5px;
    color: #000000;
    display: inline-block;
    font-size: 1.97em;
    line-height: 1;
    text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.3);
  padding: 6px 18px;
  text-decoration: none
}

#top-menu a:hover,
#top-menu .active a{
  color: #fff;
  background: #E80B44;
  }
#top-menu a:hover .nav-arrow{
  border-top-color: {{settings.nav_hover_colour}};
  }

#top-menu ul .first ul{
  left: 0;
  }

#top-menu ul ul li{
        color: #000000;
    display: inline-block;
    font-family: 'LeagueGothicRegular', sans-serif;
    text-shadow: 1px 1px 1px transparent;
  }

#top-menu ul ul {
  font-family: 'LeagueGothicRegular', sans-serif;
  display: inline-block;
  border: none;
  text-shadow: 1px 1px 1px transparent;
  }

#top-menu > ul > li {
       font-family: 'LeagueGothicRegular', sans-serif;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:17:50.863

1.  更改`display: block;`为`#top-menu li`和`display: inline-block;`删除`float: left;`
2.  添加`text-align:center;`到`#top-menu ul`

完成后，当您减少边距时，您的导航将居中。

# c - 弹跳游戏显示多个球

> ID：15751956
> 
> 赞同：0
> 
> 时间：2013-04-01T21:10:25.050
> 
> 标签：c, command-line, for-loop

我正在制作一个显示在命令提示符下的类似乒乓球的游戏，但遇到了问题。我有一个用于显示比赛场地和球位置的函数：

```
#include "std_lib_facilities.h"
#include "ball.h"
#include "field.h"

void display (field f, ball b)
{
    cout << "\n\n\n\n\n\n\n\n";
    for (int h = 0; h < 10; ++h)//
    {
        cout << "\n\t|";
        for (int w = 0; w < 20; ++w)
        {
            cout << "  ";
            if (b.x = w && b.y == h) cout << "o";
            else cout << ".";
        }
    }
    cout << "\n\n\n\n\n\n\n\n";
} 
```

当我运行程序时，该字段正确显示，但不是一个球，而是一整行（正确的行）被“o”填充。

因此，如果球的坐标为 (5, 5)，则整个第 5 行将是 'o's。

我已经尝试在 main() 中注释掉所有其他函数，但这仍然是一个问题。您能提供的任何帮助将不胜感激，我很难过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T21:18:13.893

您在这里分配而不是比较：

```
if (b.x = w && b.y == h) cout << "o";
//      ^ 
```

所以只要`w`是非零的，`b.x=w`就被评估为**true**。它应该是

```
if (b.x == w && b.y == h) cout << "o";
//      ^^ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T21:18:27.990

你忘了一个“=” `if (b.x = w && b.y == h) cout << "o"`;

因此 bx = w 将始终评估为 True

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T21:19:24.717

很可能是您的行中的错字：

```
if (b.x = w && b.y == h) cout << "o"; 
```

说“bx = w”而不是“bx == w”会出错。修复它，一切都应该运行良好。

# java - android UI中的相对位置

> ID：15751963
> 
> 赞同：0
> 
> 时间：2013-04-01T21:10:52.840
> 
> 标签：java, android, android-layout

我在设计用户界面和布局时遇到问题。我希望某些观点与其他观点相关。例如一个与 TextView 相关的按钮，当我坐在边距顶部时，它从那个 TextView 而不是屏幕顶部计算。我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:13:42.777

使用[RelativeLayout](http://developer.android.com/reference/android/widget/RelativeLayout.html)并且视图将相对于其他视图定位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T21:15:11.363

从您所写的内容来看，您似乎可以将 TextView 和 Button 分组到一个容器视图中，例如一个 RelativeLayout，并将它们放入其中并具有您想要的外观。然后你可以设置Relative布局的边距。

编辑：清晰度

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T21:15:25.637

看看[相对布局](http://developer.android.com/guide/topics/ui/layout/relative.html)。它们是您问题的答案。`toLeftOf`您可以通过设置、`below`或`alignParentTop`任何其他组合将视图与另一个视图相关联。

# php - 我的会话在本地模式下工作，但不在服务器中

> ID：15751969
> 
> 赞同：0
> 
> 时间：2013-04-01T21:11:05.527
> 
> 标签：php, session, login

我有这个 PHP 代码，它是一个简单的登录系统。

```
<?php
    session_start();

    // Connecting to DB

    mysql_connect("localhost", "database1", "dbdb1");
    mysql_select_db("dbdb");

    // Getting session info and params AFTER sending POST params

    print_r($_SESSION);

    function doLogin($username_post, $password_post){
        $select_login = "
            SELECT 
                id, 
                username 
              FROM 
                users 
            WHERE 
                username = '$username_post'
                password = '$password_post'
            LIMIT 1";

        $query_login = mysql_query($select_login);
        $rows_login = mysql_num_rows($query_login);

        $array  = mysql_fetch_assoc($query_login);

        if($rows_login>0){

            $_SESSION['user_in'] = True;

            return True;

        }else{
            return False;
        }
    }

    // LOGIN

    $username           = $_POST['username'];                                       
    $password = $_POST['password'];

    if(!empty($username) && !empty($password)){
        doLogin($username, $password);
    }
?>

<!DOCTYPE HTML>
<html>
    <body>
        <form action = "" method = "post">
                <input type = "text" name = "username"/>
                <input type = "password" name = "password" />

                <button type="submit" name = "submit">Login</button>

        </form>
    </body>
</html> 
```

显然，它有效。这段代码在本地模式下工作得很好，但是当我在服务器模式下执行时，我遇到了一个严重的问题，它根本不起作用。如果你看到，我放了一个 print_r(); 在代码中，我放置了它，以便知道会话是否成功发送。在本地模式下，我可以在重新加载后看到发送的参数。在服务器模式下，我看不到它，似乎没有发送会话。

有什么建议么？这段代码到底发生了什么？我需要知道为什么它在本地模式下工作，而不是在服务器上。

PHP会话：

```
session.auto_start  Off Off
session.bug_compat_42   Off Off
session.bug_compat_warn Off Off
session.cache_expire    180 180
session.cache_limiter   nocache nocache
session.cookie_domain   no value    no value
session.cookie_httponly Off Off
session.cookie_lifetime 0   0
session.cookie_path /   /
session.cookie_secure   Off Off
session.entropy_file    no value    no value
session.entropy_length  0   0
session.gc_divisor  1000    1000
session.gc_maxlifetime  1440    1440
session.gc_probability  1   1
session.hash_bits_per_character 5   5
session.hash_function   0   0
session.name    PHPSESSID   PHPSESSID
session.referer_check   no value    no value
session.save_handler    files   files
session.save_path   /var/lib/php/session    /var/lib/php/session
session.serialize_handler   php php
session.use_cookies On  On
session.use_only_cookies    On  On
session.use_trans_sid   0   0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:48:04.983

也许您的服务器不支持会话。检查`phpinfo()`命令并检查 `session support`参数是否已启用，如果已启用，请与您的服务器管理员检查其他会话参数

编辑 1：您应该`AND`在 where 条件之间使用

```
$select_login = "
    SELECT 
        id, 
        username 
      FROM 
        users 
    WHERE 
        username = '$username_post' AND
        password = '$password_post'
    LIMIT 1"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:14:12.827

我猜您的数据库服务器具有与本地计算机相同的登录名和数据相同的数据库？

如果数据库没有返回任何行，则不会设置会话值

# python - 如何防止在 Django 中添加过去几天的 DateField 记录

> ID：15751976
> 
> 赞同：0
> 
> 时间：2013-04-01T21:11:26.880
> 
> 标签：python, django, django-models, django-admin

如果我在 Django 的模型中有 DateField() 字段，如何防止添加比今天更早的日期条目？

我可以在 views.py 级别上执行此操作，但它仍然可以从 Django 管理站点进行利用。

更糟糕的是，我有一个设计决定，即在同一模型中拥有单独的 DateField() 和 TimeField() 字段。我可以防止添加到比当前时间更早的（日期+时间）吗？预订过去的航班是没有意义的，即使它只有一个小时。不过，我的问题是我必须有单独的 DateField() 和 TimeField(); 不是一个 DateTimeField()。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T01:49:05.617

也许试试这个`Model.clean()`方法。这将`ValidationError`在正确的位置引发 s（将在管理员中显示表单错误而不是 500）。

只有当它是现有记录并且到期日期未更改时，clean 方法才允许将到期日期保存在过去。

```
from datetime import datetime
from django.core.exceptions import ValidationError

class MyModel(models.Model)

    expires = models.DateTimeField()

    def __init__(self, *args, **kwargs):
        super(Game, self).__init__(*args, **kwargs)
        self.__old_expires = self.expires

    def clean(self):
        " Make sure expiry time cannot be in the past "
        if (not self.id or self.__old_expires != self.expires)
           and self.expires <= datetime.now():
            raise ValidationError('MyModel entries cannot expire in the past.') 
```

文档：[https ://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.clean](https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.clean)

# javascript - 如何在 JavaScript 中将零添加到一位数的时间值

> ID：15751977
> 
> 赞同：0
> 
> 时间：2013-04-01T21:11:42.140
> 
> 标签：javascript, html, function

下面是我正在处理的代码。通过阅读我在此网站上找到的答案之一，我将其从 24 小时格式时间更改为 12 小时格式时间。唯一的问题是 5 分钟前，时间是 2:5，我希望它显示 02:05。我不确定到底要改变什么。任何帮助将不胜感激。谢谢！

```
function theClock12hour()
{
    function pad(n) {
        return (n < 10) ? "0" + n : n;
    }

    var time = new Date();
    var nHours = time.getHours();
    var nMins = time.getMinutes();

    if (nHours > 12) {
        nHours -=12;
    } else if (nHourse ===0) {
        hours = 12;
    }
    document.getElementById("hourbox").innerHTML = nHours;
    document.getElementById("minutebox").innerHTML = nMins;

    var nDay = time.getDate();
    document.getElementById("datebox").innerHTML = nDay;

    var nMonth = time.getMonth();
    if      (nMonth ==  0){ nMonth = 'JANUARY'; }
    else if (nMonth ==  1){ nMonth = 'FEBRUARY'; }
    else if (nMonth ==  2){ nMonth = 'MARCH'; }
    else if (nMonth ==  3){ nMonth = 'APRIL'; }
    else if (nMonth ==  4){ nMonth = 'MAY'; }
    else if (nMonth ==  5){ nMonth = 'JUNE'; }
    else if (nMonth ==  6){ nMonth = 'JULY'; }
    else if (nMonth ==  7){ nMonth = 'AUGUST'; }
    else if (nMonth ==  8){ nMonth = 'SEPTEMBER'; }
    else if (nMonth ==  9){ nMonth = 'OCTOBER'; }
    else if (nMonth == 10){ nMonth = 'NOVEMBER'; }
    else if (nMonth == 11){ nMonth = 'DECEMBER'; }

    document.getElementById("monthbox").innerHTML = nMonth;

    var nTday = time.getDay();
    if      (nTday == 0){ nTday='SUN'; }
    else if (nTday == 1){ nTday='MON'; }
    else if (nTday == 2){ nTday='TUE'; }
    else if (nTday == 3){ nTday='WED'; }
    else if (nTday == 4){ nTday='THU'; }
    else if (nTday == 5){ nTday='FRI'; }
    else if (nTday == 6){ nTday='SAT'; }

    document.getElementById("daybox").innerHTML = nTday;

    var nYear = time.getFullYear();
    document.getElementById("yearbox").innerHTML = nYear;

    timer = setTimeout("theClock12hour()",1000);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:38:54.143

### 回答你的问题

如果您在 nMins 变量周围添加 pad 函数，您的代码可能会执行您想要的操作。

[http://jsfiddle.net/queuehammer/T5R5C/](http://jsfiddle.net/queuehammer/T5R5C/)

```
document.getElementById("minutebox").innerHTML = pad(nMins); 
```

我还注意到 nHours 逻辑中的一个问题

```
if (nHours > 12) {
    nHours -=12;
} else if (nHourse === 0) {
    hours = 12;
} 
```

第一行检查 nHours 是否小于 12，而 else if 检查 nHours 是否等于 0。因为 0 < 12 在您想强制 nHours 为 12 而不是 0 的情况下，将无法达到第二个“if” . 有一些其他的小更新，但没有对逻辑进行其他更改。请参阅此代码和更新的小提琴。

```
if (nHours > 12 && nHours != 0) {
    nHours -=12;
} else if (nHours == 0) {
    nHours = 12;
} 
```

### 添加到关于 Moment.js 的评论

我还使用 Moment 编写了示例。我已经为自己查看了其他时间库，并且此时我已经确定了这一点。

[http://jsfiddle.net/queuehammer/HhruW/](http://jsfiddle.net/queuehammer/HhruW/)

```
//More info at: http://momentjs.com/
document.getElementById("OurText").innerHTML = moment().format('MMMM Do YYYY, h:mm:ss a'); 
```

# python - 将 Python 字典键分组为列表，并以此列表为值创建一个新字典

> ID：15751979
> 
> 赞同：52
> 
> 时间：2013-04-01T21:12:02.513
> 
> 标签：python, list, dictionary

我有一本 python 字典

```
d = {1: 6, 2: 1, 3: 1, 4: 9, 5: 9, 6: 1} 
```

由于上述字典中的值不是唯一的。我想将唯一值的所有键分组为一个列表并创建一个新字典，如下所示：

```
v = {6:[1], 1:[2, 3, 6], 9: [4, 5]} 
```

注意新字典**v**的键应该被排序。我发现很难想象和实现这个字典的创建。请建议我一种简单有效的方法。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-04-01T21:12:53.713

使用方便[`collections.defaultdict`](https://docs.python.org/library/collections.html#collections.defaultdict)：

```
from collections import defaultdict

v = defaultdict(list)

for key, value in sorted(d.items()):
    v[value].append(key) 
```

但是您也可以使用沼泽标准来做到这`dict`一点，使用[`dict.setdefault()`](https://docs.python.org/library/stdtypes.html#dict.setdefault)：

```
v = {}

for key, value in sorted(d.items()):
    v.setdefault(value, []).append(key) 
```

*上面首先*对键进行排序；稍后对输出字典的值进行排序更加麻烦和低效。

如果有人*不需要*对输出进行排序，您可以放弃`sorted()`调用，并使用*集合*（输入字典中的键保证是唯一的，因此不会丢失任何信息）：

```
v = {}

for key, value in d.items():
    v.setdefault(value, set()).add(key) 
```

生产：

```
{6: {1}, 1: {2, 3, 6}, 9: {4, 5}} 
```

（集合值的输出被排序是巧合，是整数哈希值实现方式的副作用；集合是无序结构）。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-01T21:24:09.040

`dict`如果您在一天结束时实际上不需要 a ，您可以使用[`itertools.groupby`](https://docs.python.org/library/itertools.html#itertools.groupby)：

```
from itertools import groupby
from operator import itemgetter

for k, v in groupby(sorted(d.items(), key=itemgetter(1)), itemgetter(1)):
    print(k, list(map(itemgetter(0), v))) 
```

当然，如果你真的想的话，你可以用它来构造一个 dict：

```
{
    k: list(map(itemgetter(0), v))
    for k, v in groupby(sorted(d.items(), key=itemgetter(1)), itemgetter(1))
} 
```

但到那时，您可能最好使用 Martijn 的 defaultdict 解决方案。

# java - Java中基于ArrayList的二叉树实现

> ID：15751985
> 
> 赞同：0
> 
> 时间：2013-04-01T21:12:53.470
> 
> 标签：java, oop, recursion, arraylist, tree

我有 3 种递归实现的方法。是的，这是给学校的，所以请不要简单明了的答案，我会很感激描述性的答案，这样我就可以学习了！我是树结构的新手。

3种方法如下...

```
public class Zombies{
   public static int countPeople(Person p){...}
   // counts all the people in the tree structure 
   // starting with Person p. 

   public static int countZombies(Person p){...}
   // counts all the people in the tree structure
   // starting with Person p that are zombies

   public static void draw(Person p){...}
   // draws a diagram of the people in tree structure
   // starting with Person p.
   // each person will be denoted by a P and 
   // person that is a zombie will be denoted by a Z
   //
   // The diagram should illustrate the family tree
   // structure.  Each person will be drawn with 3 minus  
   // signs '-' for each level below p. 
```

我已经开始了我的 Person 课程，我有几个问题。

1）我的个人课程是否在正确的轨道上

2）方法描述中提到的树结构是二叉树吗？

3）能够实现这些方法我缺少什么（如果有的话，或者这个树结构是否需要构建块）

下面是我的 Person 类。

```
public class Person{

    public int     id;     // some identification number unique to the person
    public boolean zombie; // true if the person is a zombie
    public char    state;  // p means human, z means zombie

    public ArrayList<Person> friends;  // list of friends

    public Person(int id, char state, boolean zombie){
        this.id = id;
        this.state = state;
        this.zombie = zombie;
    }

    public boolean isZombie() {
        if (state == 'p'){
            return zombie=false;
        }
        else if (state == 'z'){
            return zombie=true;
        }
        return zombie;  
    }
} 
```

树类型的示例输出如下..

```
P          (this is Person q)
---P       (this is a friend of q, say q1)
------P    (this is a friend of q1)
------Z    (this is another friend of q1, who is a zombie)
---Z       (this is a friend of q, say q2, who is a zombie)
------Z    (this is a friend of q1, who is also a zombie)
------P    (this is a friend of q1, who is not a zombie) 
```

提前感谢您的耐心和帮助/输入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:22:12.380

Hopefully this gives you some insight as to the implementation of an array based binary tree.

Taken from another post:

When you write binary trees as an Array you are building what's typically called a heap. Heaps are fairly well documented and this article will give you lots of detail about how they are implemented:

[http://en.wikipedia.org/wiki/Binary_heap](http://en.wikipedia.org/wiki/Binary_heap)

Link to original:

[ArrayList Based Binary Tree - Java](https://stackoverflow.com/questions/12925103/arraylist-based-binary-tree-java)

Edit:

What it looks like you are doing is creating a binary tree of people of class "Person". Each "parent" person has "friends" which would be children of that "Person". If the number of "friends" is limited to 2 then this is a binary tree format.

Trees are just organizational structures used to hold data... and in your case different people. The part of the binary heap that has no relevance to you is that heaps are organized based on node value. You don't need to worry about that.

So your class Zombie can take any person object and all of their associated "friends" and determine how many are people or zombies etc.

Each instance of a person will have a tree of friends, sort of, from which you can access from that person.

What makes the structure a tree is a link to the children from the parent. So person1 has 2 friends, friend1 and friend2\. You then access friend1 and then check to see if he has any friends. If so, you check that friends friend and so on. This is a very generic explanation of the way trees can help you navigate information.

Basically, if any person in the tree has more than 2 friends, it is no longer a binary tree.

Check out this:

[http://en.wikibooks.org/wiki/A-level_Computing/AQA/Problem_Solving,_Programming,_Operating_Systems,_Databases_and_Networking/Programming_Concepts/Tree_traversal_algorithms_for_a_binary_tree](http://en.wikibooks.org/wiki/A-level_Computing/AQA/Problem_Solving,_Programming,_Operating_Systems,_Databases_and_Networking/Programming_Concepts/Tree_traversal_algorithms_for_a_binary_tree)

This is an example of traversing trees. You can have values to increment as you traverse to give you the number of zombies or regular people in the tree.

I apologize if this is explanation seems scattered but I'm having a hard time understanding what you are trying to do and the organization.

Edit2:

Ok so you call the static function from the Zombie class. You need to recursively check the person and all his friends.

If you want this to be a binary tree implementation each person can have no more than 2 friends.

If it being a binary tree isn't required then there is no restriction on the size of the friends array in each person.

Essentially what you need to do is have the function in the Zombie class iterate through all the people (friends, friends of friends, etc) check to see if they are zombies. When you find out if they are, print to console the result. Then move on.

So look at the link I posted above about iterating through trees and apply that to the arraylist of friends for each person. There are different ways to recursively iterate through... so pick a style (which looks like you need in-order traversal) and implement the checking/printing function that way.

This is a lead, let me know if you get stuck again. The abstraction involved in understanding trees can be tricky.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T21:26:30.473

1）也许不是你要找的，但我会摆脱`Person.state`. 有两个单独的字段都用于确定一个人是否是僵尸，这是令人困惑和容易出错的。when `zombie`is`true`和`state`is 是什么意思`p`？

2) Miorel 的评论有一些很好的见解。从你给我们的内容来看，这棵树应该代表什么，为什么它必须是一棵树，或者它是如何被填充的，这并不是很清楚。

3) 你需要某种 World 对象。`Zombies`可能是一个不错的选择。显然，在某个地方，您需要一棵所有人的树。至少，你需要一些人的集合。需要声明、实例化和填充该集合。您可能希望它成为`Zombies`该类的成员。`Person`绝对不是你会拥有很多的班级的一员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T01:28:02.020

1.  是的，我认为你在正确的轨道上。但是，正如其他一些人指出的那样，同时拥有 a`char state`和`boolean zombie`是多余的。就个人而言，在这种情况下，我认为继承是主要的过度杀伤力——也许可以理解，如果你以后想要拥有可以是“僵尸”或“吸血鬼”甚至“狼人”的“人”， ” 然而，我认为在这种情况下，能够简单地说`if (p.isZombie()) { ... }`就足够了，但我将把它留在那里，因为这是一个古老的设计论点——我属于“组合优于继承”阵营（[http://en.wikipedia.org/wiki/Composition_over_inheritance](http://en.wikipedia.org/wiki/Composition_over_inheritance)）

2.  这确实是一个树结构，但是，我*非常*怀疑它是基于规范的二叉树，但是没有理由*不能*。对我来说，这似乎是一棵 N-Ary 树。如果您以前没有接触过这些树，它们只是一个通用的树结构，其中每个节点可以有任意数量的子节点。此链接给出了更好的解释：[http](http://www.brpreiss.com/books/opus5/html/page257.html) ://www.brpreiss.com/books/opus5/html/page257.html （稍后会详细介绍）

3.  你不会错过任何东西来实现这些方法（我可以说，这取决于你的教授——他们将如何标记这个？运行他们自己的测试代码？看看你的代码？或者你提供客户端代码（ main 方法）来演示它是如何工作的？如果他们正在运行测试代码，你必须确保你的 Person API 与他们的规范兼容）。

这里要理解的重要一点是您创建的数据结构以及它*如何*表示 N-Ary 树。该类`Person`表示树中的单个节点（任何节点，可以是根，没关系），并`ArrayList<Person>`存储属于该节点的每个子节点（或朋友）。它本质上是一个“链接结构”。考虑一下：

```
class Node {
    public ArrayList<Node> children = new ArrayList<Node>();
} 
```

这个类有 0 个或多个孩子（存储在 中`children`），每个孩子都是一个`Node`（反过来有 0 个或多个孩子）。

因此，我可以轻松地将一些`Node`作为 root `Node`，然后以这种方式构建一棵树：

```
Node root = new Node();
root.children.add(new Node());
root.children.add(new Node());
root.children.get(0).children.add(new Node());
root.children.get(0).children.add(new Node()); 
```

从本质上讲，这将创建一棵树，可以这样表示：

```
 root
     /\
    /  \
   0    1
  / \
 /   \
0     1 
```

现在，也许您可​​能会注意到为什么我之前说“没有理由*不能*成为 [二叉树]” 从技术上讲，二叉树是 N=2 的 N-Ary 树。

另一件重要的事情（关于 N-Ary 树的先前链接提到了它）是每个 Node 都可以被认为是它自己的 N-Ary 树。因此，例如，当您说`draw(Person p)`就方法而言，`p`将始终是某个 N-Ary 树的根——无论它实际上是整棵树的根还是只是树的某个子树的根。

希望这可以帮助！我知道你不久前发布了这个问题，所以我希望你成功地完成了这个问题，否则我还不算太晚。如果没有，也许它会帮助别人：/

此外，在处理这类问题（算法和数据结构）时要记住的重要一点是尽量不要被无关的细节所困扰，例如（在这种情况下），他们是否是“那些可能是僵尸和一些朋友，”等等。这不是我们正在寻找的抽象！我们只是想在树中表示这种关系！当然，这对于现实世界的问题会变得更加困难，因为我们并不总是得到最好的数据结构，而且我们经常需要利用不同类型的数据结构来创建一些任务。

始终尝试找出问题的根源，然后从那里着手。通常，您会发现很多问题只是添加了详细信息/数据的另一个简单问题；甚至只是另一个问题的轻微变化。

祝你学习顺利。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T13:17:55.490

**Q1）我的个人课程是否在正确的轨道上？**

从我的角度来看，我必须说不。

它有什么问题？

你有多余的逻辑。领域`zombie`和`state`指人的潜力相同的地位。

在这一点上，我们必须做出决定，什么是僵尸，什么是人。做事，以同样的方式行事？根据我的观察，它们有一些共同的特征，但它们表达的元素也非常不同。为了证明这一点，让我们想象我们站在人类面前问他时间。很可能他会给我们一些合乎逻辑的答案。在我们完成问题之前，来自另一只手的僵尸肯定会尝试吃掉我们的大脑。

[这就是为什么我不会使用继承机制](http://en.wikipedia.org/wiki/Inheritance_%28object-oriented_programming%29)而不是引入状态（顺便说一句应该是枚举）。

```
public class Person {

  private final int id;

  public Person(int id) {
   this.id = id;

  }

  public int hashCode() {
     return id;
  }

  public boolean equals(Object object) {

    if(object instance of Person) {
       return this.id == ((Person) object).id;
    }

    return false;
  }
}

public class Zombie : Person {

   public Zombie(int id) {
      super(id);
   }
) 
```

* * *

*如何表明朋友是人类还是僵尸？*

为此，您使用了 method `isZombie`。因为我们现在有两个类有这个方法是不合理的。类`Zombie`代表僵尸和`Human`. 所以在代码中有类似`if(human.isZombie())`, 看起来很奇怪。

这就是 OOP 的强大之处。在检测到对象是这种类型或另一种类型时，我们不会插入。我们想要的是在控制台上显示（对于这种情况），通知用户该对象是人类或僵尸的有效字符。

为了能够做到这一点，我们必须向 Human 类添加一个方法，并在 Zombie 类中[覆盖]它。此方法将负责返回有效字符。

```
public class Person {

  //...   

  public char howDoOtherSeeMe() {

    return 'P';

  } 
}

public class Zombie : Person {

   //...

   @override
   public char howDoOtherSeeMe() {

    return 'Z';

  } 
} 
```

* * *

Q2）方法描述中提到的树结构是二叉树吗？

A2。不，定义中的二叉树只能有两个节点并且不能有循环。此外，在我们的 Person 类中耦合结构可能会提供类快速增长且不受控制。

# scala - 定义柯里化函数时何时拆分参数

> ID：15751988
> 
> 赞同：1
> 
> 时间：2013-04-01T21:13:10.857
> 
> 标签：scala, currying

所有这些函数都做同样的事情：

```
def h0(f: Int => Int)(g: Int => Int)(x: Int) = f(g(x))
def h1(f: Int => Int, g: Int => Int)(x: Int) = f(g(x))
def h2(f: Int => Int)(g: Int => Int, x: Int) = f(g(x))
def h3(f: Int => Int, g: Int => Int, x: Int) = f(g(x)) 
```

现在我处于多重困境：我应该在哪种情况下“拆分”论点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T21:38:11.910

拆分参数对于类型推断很有用（因为编译器会从左到右一次处理一个，因此您可以修复左侧的类型而不会陷入右侧的混乱——但缺点是，如果您在完全推断之前引用泛型类型，当您点击下一个参数块时，您会遇到部分进度），并且允许使用大括号而不是括号。所以如果你想要像这样的语法

```
h0{ i =>
  math.round(math.pow(0.9123751,-i)).toInt
}{ j =>
  (10*math.sin(j)).toInt
}(2) 
```

那么你应该像`h0`. 否则，您可以做任何有意义的事情以获得最大的清晰度。特别是，`h2`上面很糟糕，因为它分组`g`并且`x`没有明显的原因。根据上下文，其他任何一个都可以。

# java - java.lang.RuntimeException：无法在 Android 中启动活动 ComponentInfo

> ID：15751995
> 
> 赞同：2
> 
> 时间：2013-04-01T21:13:44.537
> 
> 标签：java, android, xml, json, runtime-error

我正在尝试解析此网站中的 JSON 对象值。但我得到运行时错误：无法启动活动组件信息：url 中的非法字符 ..这是我的代码：

```
public class MainActivity extends ListActivity {
    private static final String TAG_ROWS = "row";
    private static final String TAG_ELEMENTS = "elements";
    private static final String TAG_DISTANCE = "distance";
    private static final String TAG_VALUE = "value";
    private static final String TAG_ADDRESS = "destination_addresses";
    String data;
    HttpClient client; 
    double minDistance=0;
    static JSONObject jObj = null;
    String destination_addresses;
    JSONArray rows;
    JSONArray elements;
    String value;
    final static String URL= "http://maps.googleapis.com/maps/api/distancematrix/json?";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        try {
            try {
                ClosestObject();
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        finally {

        }
        setContentView(R.layout.activity_main);
        TextView result = (TextView) findViewById(R.id.text1);
            result.setText(data);

    }

public void ClosestObject () throws JSONException, ClientProtocolException, IOException {

        // Creating JSON Parser instance
    String param= "origins=Vancouver+BC&destinations=burnaby|Victoria+BC|Surrey+BC&mode=driving&language=en-FR&sensor=false";
    String encodedparams = URLEncoder.encode(param,"UTF-8");
    String FinalUrl= URL +encodedparams;
    StringBuilder url = new StringBuilder(FinalUrl);

   HttpGet get = new HttpGet(url.toString());

    HttpResponse r = client.execute(get);
    HttpEntity en = r.getEntity();
    data = EntityUtils.toString(en);
    jObj = new JSONObject(data);

        try {

            rows = jObj.getJSONArray(TAG_ROWS);
            elements = rows.getJSONArray(0);
            for (int i=0; i<elements.length();i++){
                 JSONObject obj = elements.getJSONObject(i);
                 JSONObject distance = obj.getJSONObject(TAG_DISTANCE);
                  value= distance.getString(TAG_VALUE);
                  double distanceValue = Double.parseDouble(value);
                  if ( distanceValue < minDistance){
                      minDistance = distanceValue;
                  }
            }

         }  
        catch (JSONException e) {
            e.printStackTrace();
        }

 }

@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

**这是错误：** 04-01 21:06:05.734: D/AndroidRuntime(1045): 关闭 VM 04-01 21:06:05.734: W/dalvikvm(1045): threadid=1: thread exiting with uncaught exception ( group=0x40a71930) 04-01 21:06:05.764: E/AndroidRuntime(1045): 致命异常: main 04-01 21:06:05.764: E/AndroidRuntime(1045): java.lang.RuntimeException: 无法启动活动ComponentInfo{com.example.distance/com.example.distance.MainActivity}：java.lang.IllegalArgumentException：索引 97 处查询中的非法字符：[http ://maps.googleapis.com/maps/api/distancematrix/json?origins =Vancouver+BC&destinations=burnaby|Victoria+BC|Surrey+BC&mode=driving&language=en-FR&sensor=falsehttp://maps.googleapis.com/maps/api/distancematrix/json?origins=Vancouver+BC&destinations=burnaby|Victoria+BC |萨里+BC&模式=驾驶&语言=en-FR&sensor=false](http://maps.googleapis.com/maps/api/distancematrix/json?origins=Vancouver+BC&destinations=burnaby|Victoria+BC|Surrey+BC&mode=driving&language=en-FR&sensor=falsehttp://maps.googleapis.com/maps/api/distancematrix/json?origins=Vancouver+BC&destinations=burnaby|Victoria+BC|Surrey+BC&mode=driving&language=en-FR&sensor=false) 04-01 21:06:05.764: E/AndroidRuntime(1045): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180) 04-01 21:06:05.764: E/AndroidRuntime(1045): 在 android. app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230) 04-01 21:06:05.764: E/AndroidRuntime(1045): 在 android.app.ActivityThread.access$600(ActivityThread.java:141) 04-01 21:06 :05.764: E/AndroidRuntime(1045): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234) 04-01 21:06:05.764: E/AndroidRuntime(1045): 在 android.os.Handler。 dispatchMessage(Handler.java:99) 04-01 21:06:05.764: E/AndroidRuntime(1045): 在 android.os.Looper.loop(Looper.java:137) 04-01 21:06:05.764: E/ AndroidRuntime(1045): 在 android.app.ActivityThread.main(ActivityThread.java:5041) 04-01 21:06:05.764: E/AndroidRuntime(1045): 在 java.lang.reflect。Method.invokeNative(Native Method) 04-01 21:06:05.764: E/AndroidRuntime(1045): at java.lang.reflect.Method.invoke(Method.java:511) 04-01 21:06:05.764: E /AndroidRuntime(1045): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 04-01 21:06:05.764: E/AndroidRuntime(1045): 在 com.android.internal。 os.ZygoteInit.main(ZygoteInit.java:560) 04-01 21:06:05.764: E/AndroidRuntime(1045): at dalvik.system.NativeStart.main(Native Method) 04-01 21:06:05.764: E /AndroidRuntime(1045)：原因：java.lang.IllegalArgumentException：索引 97 处查询中的非法字符：java:793) 04-01 21:06:05.764: E/AndroidRuntime(1045): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 04-01 21:06:05.764: E/ AndroidRuntime(1045): at dalvik.system.NativeStart.main(Native Method) 04-01 21:06:05.764: E/AndroidRuntime(1045): Caused by: java.lang.IllegalArgumentException: Illegal character in query at index 97:java:793) 04-01 21:06:05.764: E/AndroidRuntime(1045): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 04-01 21:06:05.764: E/ AndroidRuntime(1045): at dalvik.system.NativeStart.main(Native Method) 04-01 21:06:05.764: E/AndroidRuntime(1045): Caused by: java.lang.IllegalArgumentException: Illegal character in query at index 97:[http://maps.googleapis.com/maps/api/distancematrix/json?origins=Vancouver+BC&destinations=burnaby|Victoria+BC|Surrey+BC&mode=driving&language=en-FR&sensor=falsehttp://maps.googleapis.com/ maps/api/distancematrix/json?origins=Vancouver+BC&destinations=burnaby|Victoria+BC|Surrey+BC&mode=driving&language=en-FR&sensor=false](http://maps.googleapis.com/maps/api/distancematrix/json?origins=Vancouver+BC&destinations=burnaby|Victoria+BC|Surrey+BC&mode=driving&language=en-FR&sensor=falsehttp://maps.googleapis.com/maps/api/distancematrix/json?origins=Vancouver+BC&destinations=burnaby|Victoria+BC|Surrey+BC&mode=driving&language=en-FR&sensor=false) 04-01 21:06:05.764: E/AndroidRuntime(1045): at java.net.URI.create(URI.java:727) 04-01 21:06:05.764: E/AndroidRuntime(1045): at org. apache.http.client.methods.HttpPost.(HttpPost.java:79) 04-01 21:06:05.764: E/AndroidRuntime(1045): 在 com.example.distance.MainActivity$JSONParser.getJSONFromUrl(MainActivity.java: 68) 04-01 21:06:05.764: E/AndroidRuntime(1045): 在 com.example.distance.MainActivity.ClosestObject(MainActivity.java:115) 04-01 21:06:05.764: E/AndroidRuntime(1045) : 在 com.example.distance.MainActivity.onCreate(MainActivity.java:44) 04-01 21:06:05.764: E/AndroidRuntime(1045): 在 android.app.Activity.performCreate(Activity.java:5104) 04 -01 21:06:05.764: E/AndroidRuntime(1045): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080) 04-01 21:06:05.764: E/AndroidRuntime(1045): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144) 04-01 21:06:05.764: E/AndroidRuntime(1045): ... 11 更多

我非常感谢你帮助我:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:16:45.580

> IllegalArgumentException：查询中的非法字符

意味着您没有以正确的格式传递带有 url 的查询字符串（参数）。用于`URLEncoder.encode`在附加到 URL 之前对特殊字符进行编码。

**例子：**

```
String str_url="http://www.xxxxxx.com?";
String str_parameters = "param123=abc|test&param=abc test";
String encodedparams = URLEncoder.encode(str_parameters,"UTF-8");

String str_finalurl=str_url+encodedparams; 
```

# hive - 如何跳过 Hive 外部表中的 CSV 标头？

> ID：15751999
> 
> 赞同：58
> 
> 时间：2013-04-01T21:13:54.757
> 
> 标签：hive

我正在使用 Cloudera 的 Hive 版本，并尝试在包含第一列中的列名的 csv 文件上创建一个外部表。这是我用来执行此操作的代码。

```
CREATE EXTERNAL TABLE Test ( 
  RecordId int, 
  FirstName string, 
  LastName string 
) 
ROW FORMAT serde 'com.bizo.hive.serde.csv.CSVSerde' 
WITH SerDeProperties (  
  "separatorChar" = ","
) 
STORED AS TEXTFILE 
LOCATION '/user/File.csv' 
```

样本数据

```
RecordId,FirstName,LastName
1,"John","Doe"
2,"Jane","Doe" 
```

任何人都可以帮助我如何跳过第一行或者我需要添加一个中间步骤吗？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-04-01T22:38:51.580

从[Hive v0.13.0 开始](https://issues.apache.org/jira/browse/HIVE-5795)，您可以使用`skip.header.line.count`表属性：

```
create external table testtable (name string, message string)
row format delimited 
fields terminated by '\t' 
lines terminated by '\n' 
location '/testtable'
TBLPROPERTIES ("skip.header.line.count"="1"); 
```

用于`ALTER TABLE`现有表：

```
ALTER TABLE tablename
SET TBLPROPERTIES ("skip.header.line.count"="1"); 
```

* * *

请注意，虽然它可以工作，但它也有自己的问题。当生成多个输出文件时，即缩减器大于 1，它会跳过每个文件的第一条记录，这可能不一定是所需的行为。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-09-16T06:17:47.460

虽然您从丹尼尔那里得到了答案，但这里有一些可以使用的自定义`OpenCSVSerde`：

```
CREATE EXTERNAL TABLE `mydb`.`mytable`(
    `product_name` string,
    `brand_id` string,
    `brand` string,
    `color` string,
    `description` string,
    `sale_price` string)
PARTITIONED BY (
    `seller_id` string)
ROW FORMAT SERDE
    'org.apache.hadoop.hive.serde2.OpenCSVSerde'
WITH SERDEPROPERTIES (
    'separatorChar' = '\t',
    'quoteChar' = '"',
    'escapeChar' = '\\')
STORED AS INPUTFORMAT
    'org.apache.hadoop.mapred.TextInputFormat'
OUTPUTFORMAT
    'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat'
LOCATION
    'hdfs://namenode.com:port/data/mydb/mytable'
TBLPROPERTIES (
    'serialization.null.format' = '',
    'skip.header.line.count' = '1') 
```

有了这个，您可以完全控制分隔符、引号字符、转义字符、空值处理和标题处理。

看看[这里](https://cwiki.apache.org/confluence/display/Hive/CSV+Serde)和[这里](https://issues.apache.org/jira/browse/HIVE-5795)。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-11-27T06:40:40.557

只需在查询中附加以下属性，记录的第一个标题或行 int 将不会加载或将被跳过。

试试这个

```
tblproperties ("skip.header.line.count"="1"); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-03-09T20:58:03.137

`skip.header.line.count`将跳过标题行。

但是，如果您有一些外部工具访问表，它仍然会看到实际数据而不会跳过这些行

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-19T06:55:53.437

```
create external table table_name( 
Year int, 
Month int,
column_name data_type ) 
row format delimited fields terminated by ',' 
location '/user/user_name/example_data' TBLPROPERTIES('serialization.null.format'='', 'skip.header.line.count'='1'); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-01T22:18:06.813

我不太确定它是否适用于 ROW FORMAT serde 'com.bizo.hive.serde.csv.CSVSerde' 但我想它应该类似于 ROW FORMAT DELIMITED FIELDS TERMINATED BY ','。
在您的情况下，第一行将被视为普通行。但是第一个字段无法为 INT，因此第一行的所有字段都将设置为 NULL。您只需要一个中间步骤即可修复它：

```
INSERT OVERWRITE TABLE Test
SELECT * from Test WHERE RecordId IS NOT NULL 
```

只有一个缺点是您的原始 csv 文件将被修改。我希望它有所帮助。GL！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-15T16:28:32.703

仅适用于已经创建带有标题的表格的人。这是相同的alter命令。如果您已经拥有表并希望忽略第一行而不删除和重新创建，这很有用。它还有助于人们熟悉 ALTER 作为 TBLPROPERTIES 的一个选项。

```
ALTER TABLE tablename SET TBLPROPERTIES ("skip.header.line.count"="1"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-26T12:46:24.223

我也为此苦苦挣扎，发现无法告诉 hive 跳过第一行，就像在 Greenplum 中一样。所以最后我不得不从文件中删除它。例如“cat File.csv | grep -v RecordId > File_no_header.csv”