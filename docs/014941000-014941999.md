# StackOverflow 问答 14941000-14941999

# asp.net - 从服务器端的客户端检索 HTMLTable (ASP.NET)

> ID：14941000
> 
> 赞同：1
> 
> 时间：2013-02-18T16:36:25.390
> 
> 标签：asp.net, client-side, server-side, html-table

我有`HTML table`一个简单的网络表单。
该表是在 Page_Load 中动态构建的（基于 SQL Express DB）。

然后显示我的页面，我的用户可以通过拖放修改表格单元格（即 div）的内容。
之后，我必须调用一个代码隐藏方法来更新我的元素在我的表格中的新位置。
问题是我正在使用`asp:imagebutton`which 进行回发。
因此，在我的 OnClick 方法步骤之前，我丢失了客户端所做的所有更改。
我发现的唯一方法是检索我的父 div 元素（这是我的表的 parentNode）的内部 HTML，将其注入隐藏的输入（在 Javascript 的 OnClientCLick 事件上）并在我的服务器端检索它。但是，通过这种方式，我失去了所有的控制层次：

```
 parent.InnerHtml = Request.Form["innerHTML"]; 
```

最终目的是循环我的 HTMLTable。
点击我的图像按钮并使用我的客户修改表更新我的数据库后的行元素。

非常感谢您的帮助

# json - Jasperreports - 如何让 JSON 填充子报表

> ID：14941002
> 
> 赞同：5
> 
> 时间：2013-02-18T16:36:38.093
> 
> 标签：json, jasper-reports, subreport

我正在尝试使用 Jasper/iReport 在我的主报告中填充相同的数据。我怎样才能让 Json 结转？

在编辑表数据源中，我尝试过：

```
((net.sf.jasperreports.engine.data.JsonDataSource)$P{REPORT_DATA_SOURCE})

new ((net.sf.jasperreports.engine.data.JsonDataSource)$P{REPORT_DATA_SOURCE})

$P{REPORT_DATA_SOURCE}

$P{REPORT_CONNECTION} 
```

所有这些都编译，但没有一个实际生成表。有任何想法吗？JSON 没有像 cloneDataSource() 这样的方法，那么有什么替代方法？

我的最终目标很简单：传入 JSON 数据并使用它生成图表，然后让表格显示相同的信息。我已经为此工作了好几天，贾斯珀让我很难受。请帮忙！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-05-22T10:08:25.397

我在使用子报告时遇到了类似的问题。似乎 JSON 数据源被主报告使用，因此您需要调用`subDataSource()`以获取子报告的新数据源，也可能用于表格 - 虽然尚未测试...

数据源表达式：`((net.sf.jasperreports.engine.data.JsonDataSource)$P{REPORT_DATA_SOURCE}).subDataSource()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-03T02:34:52.317

如果有人正在使用 JasperReports 的新图书报告功能（版本 6+ 中可用）并且您想使用`JsonDataSource`，这是将 json 有效负载传递给子报告的方法：

```
<p:subreportPart xmlns:p="http://jasperreports.sourceforge.net/jasperreports/parts" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/parts http://jasperreports.sourceforge.net/xsd/parts.xsd">
  <subreportParameter name="REPORT_DATA_SOURCE">
    <subreportParameterExpression><![CDATA[((net.sf.jasperreports.engine.data.JsonDataSource)$P{REPORT_DATA_SOURCE}).subDataSource()]]></subreportParameterExpression>
  </subreportParameter>
  <subreportExpression><![CDATA["PROFILES_cover.jasper"]]></subreportExpression>
</p:subreportPart> 
```

您还可以通过提供节点位置作为`subDataSource(java.lang.String selectExpression)`方法的参数来传递 json 有效负载的子集。例子：

```
.subDataSource("Northwind.Customers") 
```

或者

```
.subDataSource("Northwind.Customers(Country == USA)") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-17T13:31:10.247

只需在主报告中添加数据源表达式：

```
<subreport>
    <reportElement x="-6" y="0" width="570" height="59" uuid="ac54a12b-8022-49a1-bc90-90cff664e3a1" />
    <dataSourceExpression>
        <![CDATA[((net.sf.jasperreports.engine.data.JsonDataSource)$P{REPORT_DATA_SOURCE}).subDataSource("footer")]]>
    </dataSourceExpression>
    <subreportExpression>
        <![CDATA["footer.jrxml"]]>
    </subreportExpression>
</subreport> 
```

它为我工作。希望它会有所帮助。

# phpmyadmin - phpmyadmin 如何从字段中删除某些文本？

> ID：14941003
> 
> 赞同：0
> 
> 时间：2013-02-18T16:36:38.540
> 
> 标签：phpmyadmin, remove-if

我有一个名为 products 的表，其中有一个名为 products_description 的字段，我如何从字段中删除某些文本，例如如果文本 abc 存在然后从所有产品中删除它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:41:27.110

运行查询

```
select * from products where products_description like '%abc%' 
```

并为每个结果做

```
new_description = str_replace('abc','',old_description); 
```

并使用新描述运行更新查询。

# java - Java .properties 文件的命名约定是什么？

> ID：14941004
> 
> 赞同：15
> 
> 时间：2013-02-18T16:36:38.687
> 
> 标签：java, properties, naming-conventions

我计划创建一个**全局属性**文件以供在整个应用程序中使用，以及几个仅可用于特定类和方法的属性文件。是否有任何特定的行业标准来命名属性文件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T16:39:38.977

据我所知，没有固定的规则。

我遵循的命名约定是，如果它是单个类的属性，`{ClassName}.properties`则使用. 我偏爱 CamelCase；其他人更喜欢小写。`{WhatIsItUsedFor}.properties``{ApplicationName}.properties`

对于属性本身的名称，如果粒度是可能的，我使用类似

```
{ClassName}.{MethodNameIfNeeded}.{IntendedVariable}={value} 
```

请意识到您拥有的属性文件越多，您创建的潜在维护问题就越多。有些最好合并到一个属性文件中，使用属性/值命名约定（上图）来挑选出任何需要自己配置的类。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-17T10:26:09.060

The naming is more complex if you consider also localization. See [Java doc for `java.util.ResourceBundle`](http://docs.oracle.com/javase/7/docs/api/java/util/ResourceBundle.html#getBundle%28java.lang.String,%20java.util.Locale,%20java.lang.ClassLoader%29):

> baseName + "_" + language + "_" + script + "_" + country + "_" + variant

Examples:

```
MyResource_fr_FR
MyResource_fr_CA
MyResource_fr_CH
MyResource_en_Latn_US_WINDOWS_VISTA
MyResource_en_Latn_US_WINDOWS
MyResource_en_Latn_US
MyResource_en_Latn
MyResource_en_US_WINDOWS_VISTA
MyResource_en_US_WINDOWS
MyResource_en_US
MyResource_en 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-18T16:39:05.377

不; 将它们命名为对使用它们的上下文有意义的名称。

您会在具有更多业务特定含义的文件名旁边看到诸如“applicationResources.properties”、“messages.properties”等内容，例如“account.properties”。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-18T16:40:20.857

简短的回答：没有

通常，您会将全局属性命名为“myapp.properties”。看看一些配置框架，看看他们是否做你想做的事。比如[commons-configuration](https://commons.apache.org/configuration/)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-18T16:41:03.317

并不真地。使用 .properties 扩展名命名文件（我也见过 .prp）。

我建议不要使用“全局”属性文件，而是在隔离文件中维护类似的配置，即：

```
database.properties
smtp.properties
messages.properties 
```

# php - 将多维数组分解为一维

> ID：14941005
> 
> 赞同：0
> 
> 时间：2013-02-18T16:36:51.027
> 
> 标签：php, mysql, arrays, multidimensional-array

我在 mySQL 中有字段，这些字段目前正像这样存储在“标签”字段下

```
Shopping|Health & Beauty
Coffee|Shopping 
```

我要做的是循环遍历它以创建一维数组并仅获取唯一值。

我的查询从 TABLE 中选择 DISTINCT 标记并像这样运行循环：

```
 while ($row_tags = mysql_fetch_assoc($r_tags)) { 
    $tags = $row_tags['tags'];
    $imploded_tags[] = explode("|",$tags);
    }

echo "<pre>";
print_r($imploded_tags); 
```

print_r 的结果将其显示为多维数组。我试图重新爆炸它并以不同的方式内爆它，但我无法获得任何成功。有没有办法可以将它创建为一维数组？并非所有标签都具有由 | 分隔的相同数量的标签，因此我似乎无法让它与我从另一个 StackOverflow 帖子中尝试过的功能一起使用。任何帮助将不胜感激！

输出：

```
Array
(
    [0] => Array
        (
            [0] => Shopping
            [1] => Health & Beauty

        )

    [1] => Array
        (
            [0] => Coffee
            [1] => Shopping
        ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:41:01.717

试试这个

```
while ($row_tags = mysql_fetch_assoc($r_tags)) { 
$tags = $row_tags['tags'];
$tags = explode("|",$tags);
 foreach($tags as $v){
  $imploded_tags[] = $v;
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:42:47.433

我会做类似的事情：

```
 $imploded_tags = array_merge(explode("|",$tags), $imploded_tags);
    }

$imploded_tags = array_unique($imploded_tags);
echo "<pre>";
print_r($imploded_tags); 
```

请参阅 和 的[`array_merge`](http://php.net/manual/en/function.array-merge.php)手册[`array_unique`](http://php.net/manual/en/function.array-unique.php)。

但是，我确实认为您没有使用正确的方式来存储标签；它们应作为单独的值存储在单独的表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:42:58.477

正在发生的事情是，当您从 MySQL 获取行时，您实际上首先在数组中获取了一堆数据，这就是您必须遍历它们的原因。

使用您的 implode 函数，您将获取一堆字符串，然后获取另一个数组集，然后将其附加到外部数组。

如果您真的想获得一个单维数组而不进行这种多维操作，那么您真正需要做的就是利用该循环中的另一个循环。

```
 $all_tags = array();
    while ($row_tags = mysql_fetch_assoc($r_tags)) { 
        $tags = $row_tags['tags'];
        $imploded_tags[] = explode("|",$tags);

        for($i = 0; $i < count($imploded_tags); $i++) {
            $all_tags[] = $imploded_tags[$i]
        }
    }
    print_r($all_tags); 
```

# java - Java多线程通信

> ID：14941007
> 
> 赞同：0
> 
> 时间：2013-02-18T16:36:58.020
> 
> 标签：java, multithreading

我使用**Java 多线程和并发工具**相对较新。我正在实现一个具有事件生产者的应用程序（我们称之为`EventProducer`）。`EventProducer`有一个线程池`FixedThreadPool`，每个要处理的事件发送一个新`EventProcessor`线程，向池提交一个新线程。

一切正常，每个事件都在池中创建一个线程。但是问题是我想将该`EventProcessor`线程（特定于每个事件请求）与两个应该是应用程序范围的线程进行通信，我的意思是，我在应用程序中只有一个它们的实例，比如说`Service1`and `Service2`。它们都有线程池，能够同时处理任务。

该特定`EventProcessor`发送任务集`Service1`并返回每个任务的响应。对于这些响应，我一直在寻找[CompletionService](http://www.baptiste-wicht.com/2010/09/java-concurrency-part-7-executors-and-thread-pools/)但我不知道如何将它与[阻塞队列](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)集成以进行双向通信。之后，根据该响应，`EventProcessor`发送一个或另一个动作以在 中执行`Service2`。`Service2`还将向 发送有关该操作的响应`EventProcessor`。

有人知道我该如何解决这样的问题吗？为了实现第一步，我需要一个介绍。汇集你的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:41:40.320

线程间通信的最佳对象是`BlockingQueue`. 它们超级灵活且线程安全，通常可以处理所有要求。

```
BlockingQueue<Task> queue = new LinkedBlockingQueue<>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:59:34.013

让你 Service1 和 2 成为`ExecutorService`s。您的 EventProcessor 使用封装您的响应的返回类型 R 以 Callables 的形式向 Service1 发送任务。它还将生成的期货排队。在另一个线程中，您收到这些响应并将新的可调用对象分派给 Service2。您也可以为此使用 CompletionService。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T17:08:13.923

如果您的事件调度程序线程中有一个非阻塞队列，例如[ConcurrentLinkedQueue](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html)怎么办。然后，您将对此的引用传递给您的`Callable`，以便它可以将响应添加到队列中。
然后，在您的事件调度程序中，您可以定期轮询队列以查看其中是否有任何有趣的内容。由于队列是非阻塞的，它只会`null`在它为空时返回。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T09:19:19.367

最后我设法通过以下方式解决它：`EventProducer`创建服务`Service1`和`Service2`，它们是可运行的对象，并将它们作为线程启动。这些服务中的每一个都在其池中等待结果，该池被实现为`CompletionService`. 这些服务引用被保存`EventProducer`并通过引用传递给 every `EventProcessor`，这是在事件启动时创建的。

`EventProcessor`有两个`BlockingQueue`元素，每个元素都用于接收来自服务的响应。当我想调用一个服务时，我通过对象的引用来完成它并调用服务的调度方法，传递我想要处理的元素集合作为参数以及`EventProcessor`它自身的引用。该调用是在 的线程之后完成的`EventProcessor`，但它只为每个要处理的对象创建一个可调用对象，将代码执行到服务类中，该类将新线程提交到他的池中。

当结果给出时，在他自己的线程中等待它的服务将它放入 的`BlockingQueue`中`EventProcessor`，因为它有他的引用。After`EventProcessor`将结果管理到他自己的线程中（并且可以将其他操作发送到其他服务）。

就是这样，非常感谢人们的帮助，你有你的支持，因为每个答案都澄清了我的一些概念。

# iphone - 在 IOS 应用程序上显示 Facebook 页面提要

> ID：14941012
> 
> 赞同：0
> 
> 时间：2013-02-18T16:37:15.687
> 
> 标签：iphone, objective-c, json, facebook-graph-api, facebook-ios-sdk

我想在我的 IOS 应用程序中显示一个页面的 Facebook 提要。现在我查看了一个 PHP 示例，它正在执行以下操作。

```
$profile_id = "111111111111111231";

//App Info, needed for Auth
$app_id = "12312424123214123124123";
$app_secret = "12312421415123124123";

//Retrieve auth token
$authToken = fetchUrl("https://graph.facebook.com/oauth/access_token?type=client_cred&client_id={$app_id}&client_secret={$app_secret}");

$json_object = fetchUrl("https://graph.facebook.com/{$profile_id}/feed?{$authToken}");
//echo "https://graph.facebook.com/{$profile_id}/feed?{$authToken}"; 
```

当然，我已将代码更改为假代码。但是当我使用正确的代码在浏览器中完成这些步骤时。我以 JSON 格式获取我的提要。

我现在的问题是，将这个 PHP 转换为 Objective-c 代码并解析 JSON 是否可以？或者有什么我需要记住的吗？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:51:36.580

来自 Facebook 的 PHP 或 Objective-c 的 JSON 答案是相同的，但答案是分页的。

我的意思是，您会获得停留在页面上的第一个结果，然后是指向下一页的链接，因此解析器应该跟随下一个链接直到结果结束（或直到您喜欢）。

要检查答案，您可以使用 Graph API Explorer (me/feed) 或 Objective-c [facebook requestWithGraphPath:@"me/feed" andDelegate:self];

你会发现这样的东西

> “分页”：{“上一个”：“ [https://graph.facebook.com/100001050796104/feed?limit=25&since=1361206612](https://graph.facebook.com/100001050796104/feed?limit=25&since=1361206612) ”，“下一个”：“ [https://graph.facebook.com/100001050796104/feed?限制=25&直到=1361193119](https://graph.facebook.com/100001050796104/feed?limit=25&until=1361193119) “}

因此，如果您使用 JSON 和解析器，则必须实现“跟随者”，或者您只需使用 e UIWEBView 并让用户浏览链接。

希望这有帮助

# maven - Grails 和 Maven 集成：使用 maven 构建 war 文件

> ID：14941013
> 
> 赞同：0
> 
> 时间：2013-02-18T16:37:18.960
> 
> 标签：maven, grails

我可以通过运行 Grails 命令 'war' 来构建一个 war 文件，并且该 war 文件可以完美运行。

说到maven，它根本不起作用！我通过运行'clean package'构建项目，并跳过了所有测试（不知道这是否会影响战争）

战争文件是在目标目录中生成的，但我注意到战争文件的大小与 grails 命令生成的不同。此外，当我将 maven 生成的 war 文件部署到 out tomcat 服务器上时，它无法运行。

另一个问题是我需要在 pom.xml 中添加 maven-war 吗？因为如果我不添加目标，它仍然会构建一个war文件，与设置目标有什么区别？

我的 pom 文件：

```
<properties>
    <grails.version>2.1.1</grails.version>
</properties>

<dependencies>
    <dependency>
        <groupId>org.grails</groupId>
        <artifactId>grails-dependencies</artifactId>
        <version>${grails.version}</version>
        <type>pom</type>
    </dependency>
     <dependency>
        <groupId>org.grails</groupId>
        <artifactId>grails-test</artifactId>
        <version>${grails.version}</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.grails</groupId>
        <artifactId>grails-plugin-testing</artifactId>
        <version>${grails.version}</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.grails.plugins</groupId>
        <artifactId>tomcat</artifactId>
        <version>${grails.version}</version>
        <scope>provided</scope>
        <type>zip</type>
    </dependency>
    <dependency>
        <groupId>org.grails.plugins</groupId>
        <artifactId>cache</artifactId>
        <version>1.0.1</version>
        <scope>compile</scope>
        <type>zip</type>
    </dependency>
   <dependency>
        <groupId>org.grails.plugins</groupId>
        <artifactId>database-migration</artifactId>
        <version>1.3.2</version>
        <scope>runtime</scope>
        <type>zip</type>
    </dependency>
      <dependency>
        <groupId>org.grails.plugins</groupId>
        <artifactId>joda-time</artifactId>
        <version>1.4</version>
        <scope>runtime</scope>
        <type>zip</type>
    </dependency> 
    <dependency>
        <groupId>org.grails.plugins</groupId>
        <artifactId>hibernate</artifactId>
        <version>${grails.version}</version>
        <scope>runtime</scope>
        <type>zip</type>
    </dependency>
    <dependency>
        <groupId>org.grails.plugins</groupId>
        <artifactId>jquery-ui</artifactId>
        <version>1.8.24</version>
        <scope>runtime</scope>
        <type>zip</type>
    </dependency>
    <dependency>
        <groupId>org.grails.plugins</groupId>
        <artifactId>jquery</artifactId>
        <version>1.8.0</version>
        <scope>runtime</scope>
        <type>zip</type>
    </dependency>
    <dependency>
        <groupId>org.grails.plugins</groupId>
        <artifactId>resources</artifactId>
        <version>1.1.6</version>
        <scope>runtime</scope>
        <type>zip</type>
    </dependency>
    <dependency>
        <groupId>org.grails.plugins</groupId>
        <artifactId>webxml</artifactId>
        <version>1.4.1</version>
        <scope>provided</scope>
        <type>zip</type>
    </dependency>
    <dependency>
        <groupId>org.grails.plugins</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>1.2.7.3</version>
        <scope>provided</scope>
        <type>zip</type>
    </dependency>
    <dependency>
        <groupId>org.grails.plugins</groupId>
        <artifactId>spring-security-ldap</artifactId>
        <version>1.0.6</version>
        <scope>provided</scope>
        <type>zip</type>
    </dependency>
    <!--<dependency>-->
        <!--<groupId>com.rbccm.erebus</groupId>-->
        <!--<artifactId>erebus</artifactId>-->
        <!--<version>4.1.1-SNAPSHOT</version>-->
    <!--</dependency>--> 
</dependencies>
<build>
    <pluginManagement/>
    <plugins>
        <!-- Disables the Maven surefire plugin for Grails applications, as we have our own test runner -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <configuration>
                <skip>true</skip>
            </configuration>
            <executions>
                <execution>
                    <id>surefire-it</id>
                    <configuration>
                        <skip>false</skip>
                    </configuration>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-clean-plugin</artifactId>
            <version>2.4.1</version>
            <configuration>
                <filesets>
                    <fileset>
                        <directory>plugins</directory>
                        <includes>
                            <include>**/*</include>
                        </includes>
                        <followSymlinks>false</followSymlinks>
                    </fileset>
                </filesets>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.grails</groupId>
            <artifactId>grails-maven-plugin</artifactId>
            <version>${grails.version}</version>
            <configuration>
                <!-- Whether for Fork a JVM to run Grails commands -->
                 <skipTests>true</skipTests>
                <fork>true</fork>
            </configuration>
            <extensions>true</extensions>
            <executions>
            <execution>
                <goals>
                    <goal>clean</goal>
                    <goal>maven-war</goal>
                </goals>
            </execution>
        </executions>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-resources-plugin</artifactId>
            <version>2.4</version>
            <executions>
                <execution>
                 <!-- fix for grails bug http://jira.grails.org/browse/MAVEN-1 -->
                    <id>recopy-resources-after-grails</id>
                    <phase>package</phase>
                    <goals>
                        <goal>resources</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>
<repositories>
    <repository>
        <id>grails</id>
        <name>grails</name>
        <url>http://repo.grails.org/grails/core</url>
    </repository>
    <repository>
        <id>grails-plugins</id>
        <name>grails-plugins</name>
        <url>http://repo.grails.org/grails/plugins</url>
    </repository>
</repositories>
<profiles>
    <profile>
        <id>tools</id>
        <activation>
            <property>
                <name>java.vendor</name>
                <value>Sun Microsystems Inc.</value>
            </property>
        </activation>
        <dependencies>
            <dependency>
                <groupId>com.sun</groupId>
                <artifactId>tools</artifactId>
                <version>${java.version}</version>
                <scope>system</scope>
                <systemPath>${java.home}/../lib/tools.jar</systemPath>
            </dependency>
        </dependencies>
    </profile>
</profiles> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:57:14.847

我发现我错过了一个jar依赖，所以war文件无法运行

# android - android（多点触控）绘图应用程序撤消功能

> ID：14941015
> 
> 赞同：4
> 
> 时间：2013-02-18T16:37:32.753
> 
> 标签：android, canvas, path, hashmap

我正在开发一个绘图应用程序，它`onTouchEvents`是标准的，并且想添加`Undo()`功能以删除最后绘制的路径。

**声明：**

```
int thelastLineId=0;
private Bitmap bitmap; // drawing area for display or saving
private Canvas bitmapCanvas; // used to draw on bitmap
private Paint paintScreen; // use to draw bitmap onto screen
private Paint paintLine; // used to draw lines onto bitmap
private HashMap<Integer, Path> pathMap; // current Paths being drawn
private HashMap<Integer, Path> reservedpathMap; // for saving the paths being undone
private HashMap<Integer, Point> previousPointMap; // current Points 
```

**构造函数：**

```
pathMap = new HashMap<Integer, Path>();
reservedpathMap = new HashMap <Integer,Path>(); // for storing path being undone
previousPointMap = new HashMap<Integer, Point>(); 
```

**绘制：**

```
 @Override
   protected void onDraw(Canvas canvas) 
   {
       canvas.drawBitmap(bitmap, 0, 0, paintScreen);
       // for each path currently being drawn
       for (Integer key : pathMap.keySet()) 
            canvas.drawPath(pathMap.get(key), paintLine); // draw line     
   } 
```

**触摸事件：**

```
 @Override
   public boolean onTouchEvent(MotionEvent event) 
   {                  
      int action = event.getActionMasked(); // event type 
      int actionIndex = event.getActionIndex(); // pointer (i.e., finger)

      if (action == MotionEvent.ACTION_DOWN) 
      {       
          touchStarted(event.getX(actionIndex), event.getY(actionIndex), event.getPointerId(actionIndex));
      } 
      else if (action == MotionEvent.ACTION_UP) 
      {
          touchEnded(event.getPointerId(actionIndex));
      } 
      else 
      {
         touchMoved(event); 
      } 

      invalidate();
      return true; 
   } 
```

**触摸开始：**

```
 private void touchStarted(float x, float y, int lineID) // lineID represents how many fingers, 1 finger 1 line
   {      
      Path path; // used to store the path for the given touch id
      Point point; // used to store the last point in path

      // if there is already a path for lineID
      if (pathMap.containsKey(lineID)) 
      {
         path = pathMap.get(lineID); // get the Path
         path.reset(); // reset the Path because a new touch has started
         point = previousPointMap.get(lineID); // get Path's last point
      } 
      else 
      {
         path = new Path(); // create a new Path
         pathMap.put(lineID, path); // add the Path to Map
         point = new Point(); // create a new Point
         previousPointMap.put(lineID, point); // add the Point to the Map
      } 

      path.moveTo(x, y);
      point.x = (int) x;  
      point.y = (int) y;  
   } 
```

**触摸移动：**

```
 private void touchMoved(MotionEvent event) 
   {
      // for each of the pointers in the given MotionEvent
      for (int i = 0; i < event.getPointerCount(); i++) 
      {
         // get the pointer ID and pointer index
         int pointerID = event.getPointerId(i);
         int pointerIndex = event.findPointerIndex(pointerID);

         // if there is a path associated with the pointer
         if (pathMap.containsKey(pointerID)) 
         {
            float newX = event.getX(pointerIndex);
            float newY = event.getY(pointerIndex);

            // get the Path and previous Point associated with this pointer
            Path path = pathMap.get(pointerID);
            Point point = previousPointMap.get(pointerID);

            float deltaX = Math.abs(newX - point.x);
            float deltaY = Math.abs(newY - point.y);
            if (deltaX >= TOUCH_TOLERANCE || deltaY >= TOUCH_TOLERANCE) 
            {
               path.quadTo(point.x, point.y, ((newX + point.x)/2),((newY + point.y)/2));

               point.x = (int) newX ; 
               point.y = (int) newY ; 
         } 
      }      
   } 
```

**触摸结束：**

```
 private void touchEnded(int lineID)
   {
      Path path = pathMap.get(lineID); // get the corresponding Path
      bitmapCanvas.drawPath(path, paintLine); 
      path.reset();           
   } 
```

**撤消：**

```
 public void undo()
   {
       Toast.makeText(getContext(), "undo button pressed" + thelastLineId, Toast.LENGTH_SHORT).show();

       Path path = pathMap.get(thelastLineId); 
       reservedpathMap.put(thelastLineId, path); // add the Path to reservedpathMap for later redo
       pathMap.remove(thelastLineId);   

       invalidate();          
   } 
```

## **问题：**

我正在尝试使用如上所示的代码来实现 UNDO 方法：尝试从（并放入以供以后重做）中删除`thelastLindId`密钥，以便它何时调用和重绘`HashMap` `pathmap``HashMap reservedpathMap``invalidate()``OnDraw()`

```
for (Integer key : pathMap.keySet()) 
                canvas.drawPath(pathMap.get(key), paintLine); 
```

但是，按下撤消按钮可以启动“单击撤消”的吐司，但最后绘制的线未能消失。

有人可以给我一个 Undo() 和 Redo() 的线索吗？提前谢谢了！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:19:37.940

我可以理解您想要实现的目标，您希望能够在画布上绘制线条，然后为您的项目提供 UNDO 功能。`touchEnded`首先，我认为将路径添加到数组的那一刻应该是用户在您的方法中抬起手指的时候。其次，我真的不明白你解释的关于两个/三个手指的事情？你的画布支持多点触控吗？这是我之前在某些示例中使用的实现，用于在具有撤消实现的画布上绘图。希望它可以帮助您使事情更清楚：

```
public void onClickUndo () { 
if (paths.size()>0) { 
   undonePaths.add(paths.remove(paths.size()-1))
   invalidate();
 }
    else
     //toast the user 
}

public void onClickRedo (){
   if (undonePaths.size()>0) { 
       paths.add(undonePaths.remove(undonePaths.size()-1)) 
       invalidate();
   } 
   else 
     //toast the user 
} 
```

以下是您的触摸方法的等价物：

```
@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
}

@Override
protected void onDraw(Canvas canvas) {            

    for (Path p : paths){
        canvas.drawPath(p, mPaint);
    }

}

private float mX, mY;
private static final float TOUCH_TOLERANCE = 0;

private void touch_start(float x, float y) {
    mPath.reset();
    mPath.moveTo(x, y);
    mX = x;
    mY = y;
}
private void touch_move(float x, float y) {
    float dx = Math.abs(x - mX);
    float dy = Math.abs(y - mY);
    if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
        mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
        mX = x;
        mY = y;
    }
}
private void touch_up() {
    mPath.lineTo(mX, mY);
    // commit the path to our offscreen
    mCanvas.drawPath(mPath, mPaint);
    // kill this so we don't double draw            
    mPath = new Path();
    paths.add(mPath);
} 
```

从这里可以看出，paths 是我存储路径的数组列表。如果您告诉我为什么需要将路径放在 hashmap 中，也许我会更有帮助。

# objective-c - 以编程方式关闭窗口

> ID：14941017
> 
> 赞同：1
> 
> 时间：2013-02-18T16:37:36.690
> 
> 标签：objective-c, cocoa, nib, nsviewcontroller

对于**Mac 上的 Cocoa 应用程序，**我需要在使用单击相关按钮时显示一些窗口。我可以使用这个显示窗口：

```
-(void)popView:(NSString *)viewName {
    _windowController = [[NSWindowController alloc] initWithWindowNibName:viewName];
    [_windowController showWindow:nil];
} 
```

在新窗口中，我有一个`Push Button`“取消”和另一个“保存”。我想在按下“保存”按钮时在数据库中执行一些查询，并在按下“取消”按钮时关闭窗口。

我可以在从`xib`文件中拖动窗口时关闭窗口（右键单击窗口时的“出口菜单”）

但我不能将它用于“保存”按钮。

我试过`[self performSelector:@selector(performClose:)];`但我收到一条错误消息：

> [AddProductViewController performClose:]：无法识别的选择器发送到实例 0x107f64900

相同的`[[[self view] window] close];`

我缺乏解决方法的想法，这是我的第一个 Mac 应用程序。

# php - 在 php 中捕获 mysql 错误

> ID：14941018
> 
> 赞同：0
> 
> 时间：2013-02-18T16:37:43.413
> 
> 标签：php, mysql

您好，我有一个 php 脚本，包括外国限制。

我浏览并读取了一个巨大的文件并插入到一个表中，但是如果代码行不在另一个表中，则会引发此错误

> 无法添加或更新子行：外键约束失败 ( `inventory`. `stormast`, CONSTRAINT `stormast_sap_article_id_fk`FOREIGN KEY ( `sap_article_id`) REFERENCES `part`( `sap_article_id`) ON DELETE NO ACTION ON UPDATE NO ACTION) SQL:INSERT INTOstormast VALUES ('2','BNM','10024 ','10024','BNM10024','SHIFT IMPROVER K','0','000','38.70','.00','','00','2009-05-01','. 050','.000') 插入风暴值 ('2','BNM','10024','10024','BNM10024','SHIFT IMPROVER K','0','000','38.70' ,'.00','','00','2009-05-01','.050'

程序崩溃。

而不是程序崩溃我希望它忽略错误并继续执行代码而不是将其添加到表中我如何在 php 中执行此操作

谢谢

# ruby-on-rails - 在主 Web 进程中运行延迟作业

> ID：14941021
> 
> 赞同：2
> 
> 时间：2013-02-18T16:37:52.837
> 
> 标签：ruby-on-rails, scheduled-tasks

我可以在 Web 服务器内运行延迟作业或类似的计划框架，例如。瘦还是独角兽？如果是，我该如何启动它？（代码示例会很酷！）

原因是我想在我的应用程序正处于构建阶段并且它托管在 heroku 上时省钱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T17:29:48.333

# 正式

不，不**支持**在 Web 框架内异步运行 delay_jobs 的方式。从有关运行作业的[文档来看，运行作业的唯一](https://github.com/collectiveidea/delayed_job#running-jobs)**受支持**方式似乎是运行 rake 任务或延迟的作业脚本。此外，弯曲机架服务器（旨在处理传入的客户端请求）以支持将任务从某个队列中拉出，这在概念上似乎是错误的。

# 杂牌

也就是说，我知道省钱有时胜过概念上的完美。看看[这些 rake 任务](https://github.com/collectiveidea/delayed_job/blob/master/lib/delayed/tasks.rb)。我的任务是在您的 Rails 服务器中创建一个特殊的端点，您可以定期从某个远程位置访问该端点。在此端点内，实例化 a`Delayed::Worker`并使用选项调用`.start`它`exit_on_complete`。这样，您将不需要新的测功机或命令。

请注意，这是一种笨拙的解决方案，它会占用您的一个 Rails 进程，直到所有延迟的作业都完成。这意味着除非您有其他 Rails 进程，否则所有传入请求都将阻塞，直到此队列请求完成。Unicorn 提供了产生工作进程的设施。此解决方案是否有效还取决于您的工作以及它们运行所需的时间以及您的应用程序的延迟容限。

**编辑**

使用[spawn](https://github.com/tra/spawn)`Delayed::Worker` gem，您可以用块包装您的实例化`spawn`，这将导致您的作业在单独的进程中运行。这意味着您的 rails 进程将可用于立即处理 Web 请求，而不是在运行延迟作业时阻塞。但是，spawn gem 有一些依赖关系`ActiveRecord`，我不知道您使用的是什么 DB/ORM。

这是一些示例代码，因为它变得有点模糊：

```
class JobsController < ApplicationController
  def run
    spawn do
      @options = {} # youll have to get these from that rake file
      Delayed::Worker.new(@options.merge(exit_on_complete: true)).start
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:53:34.523

这是一个类似问题的链接：

[在 Heroku dyno 上运行多个进程是否可行？](https://stackoverflow.com/questions/11279527/is-it-feasible-to-run-multiple-processeses-on-a-heroku-dyno/11282872#11282872)

请记住，正如帖子所说，如果您只使用一个网络测功机，如果没有流量，它将被关闭。

以类似的方式，您可能会研究：

[http://blog.codeship.io/2012/05/06/Unicorn-on-Heroku.html](http://blog.codeship.io/2012/05/06/Unicorn-on-Heroku.html)

在构建应用程序时节省对多个网络测功机的需求（尽管它仍然受到上述关闭问题的影响）。

我建议您可以直接在 VPS 上运行，而不是 Heroku（查看 railscast）：

[http://railscasts.com/episodes/337-capistrano-recipes](http://railscasts.com/episodes/337-capistrano-recipes)

设置好后，很容易部署到。Heroku 为您省去了 devops 部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-14T23:36:06.563

您可以在 Unicorn 的单独工作进程中运行它，因此它与主进程共享内存并与应用程序一起重新启动。

见[https://gist.github.com/brauliobo/11298486](https://gist.github.com/brauliobo/11298486)

# java - Java：AbstractTableModel 中的 JTable 侦听器似乎不起作用

> ID：14941022
> 
> 赞同：1
> 
> 时间：2013-02-18T16:37:58.537
> 
> 标签：java, swing, jtable, listeners, abstracttablemodel

我已经阅读`TableModelListener`（[http://www.cs.auckland.ac.nz/compsci230s1c/lectures/xinfeng/swingmodelview.pdf](http://www.cs.auckland.ac.nz/compsci230s1c/lectures/xinfeng/swingmodelview.pdf)）有一段时间了，我正在尝试实现`Listener`一个`JTable`使用`AbstractTableModel`. 为了解释我的课程的不同部分，我的课程。我的主要课程`extends JFrame`，`implements TableModelListener`这就是为什么我有这个 tableChanged 方法。

```
@Override
public void tableChanged(TableModelEvent e) {

    if (e.getType() == TableModelEvent.UPDATE)
        System.out.println("It is updated");
    if (e.getType() == TableModelEvent.DELETE)
        System.out.println("It is deleted");
    } 
```

我的类 SwitchTableModel `extends AbstractTableModel`- 它不是构造函数 - 创建一个表，其中显示一些从其他数组中获取的值。部分实现在这里[Display the next row of a List in a JTable](https://stackoverflow.com/questions/14833607/display-the-next-row-of-a-list-in-a-jtable)。

我使用构造函数调用 SwitchTableModel 类并创建 JTable 和 JFrame。

我还添加了这一行以获取更新值的时间。

```
 public Object getValueAt(int rowIndex, int columnIndex) {
        fireTableCellUpdated(rowIndex, columnIndex); ... 
```

我希望能够编辑我的`JTable`然后保存它的数据，但是虽然看起来我可以编辑它，但是当我在一个空字段中写入 smth 并按 Enter 键时，它不会保留数据。当我尝试在非空字段中更改 smth 时也会发生同样的情况。

实际上，使用此代码，它会在 JFrame 保持打开的整个过程中继续打印“已编辑”。

知道我可能做错了什么吗？

***** 编辑 ***** 我的构造函数是这样的：

```
final SwitchTableModel model = new SwitchTableModel(user_decide);

    JTable table = new JTable(model);
    JFrame frame = new JFrame ("Results");

    table.getModel().addTableModelListener(this); 

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().setLayout(new BorderLayout());
    frame.getContentPane().add (toolbar, BorderLayout.PAGE_START);
    frame.getContentPane().add (
        new JScrollPane(
        table, 
        JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED, 
        JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED),    
        BorderLayout.CENTER);
    //frame.add(checkPanel, BorderLayout.PAGE_END);
   frame.pack();
   frame.setVisible(true); 
```

}

# objective-c - Objective-C：获取日历年的天数

> ID：14941024
> 
> 赞同：8
> 
> 时间：2013-02-18T16:38:16.970
> 
> 标签：objective-c, cocoa-touch, cocoa, nsdate, nscalendar

我正在使用以下`NSCalendar`方法来获取日历年的天数：

```
NSRange range = [gregorian rangeOfUnit:NSDayCalendarUnit 
                                inUnit:NSYearCalendarUnit 
                               forDate:date]; 
```

我期待一个类型为 365 或 366（天）的`range.length`返回值。`NSRange`

但是，此代码`range.length`为`31`日期值返回 a `2005-06-06`。

我的代码有什么问题？

这是完整的代码片段：

```
NSCalendar *gregorian = [[NSCalendar alloc]
initWithCalendarIdentifier:NSGregorianCalendar];

[subArray enumerateObjectsUsingBlock:
   ^(NSDate *date, NSUInteger idx, BOOL *stop) {
   NSUInteger numberOfDays = [gregorian ordinalityOfUnit:NSDayCalendarUnit
   inUnit:NSYearCalendarUnit forDate:date];
}]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:00:01.417

这计算给定日期一年中的天数：

```
NSDate *someDate = [NSDate date];

NSDate *beginningOfYear;
NSTimeInterval lengthOfYear;
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
[gregorian rangeOfUnit:NSYearCalendarUnit
             startDate:&beginningOfYear
              interval:&lengthOfYear
               forDate:someDate];
NSDate *nextYear = [beginningOfYear dateByAddingTimeInterval:lengthOfYear];
NSInteger startDay = [gregorian ordinalityOfUnit:NSDayCalendarUnit
                                          inUnit:NSEraCalendarUnit
                                         forDate:beginningOfYear];
NSInteger endDay = [gregorian ordinalityOfUnit:NSDayCalendarUnit
                                        inUnit:NSEraCalendarUnit
                                       forDate:nextYear];
NSInteger daysInYear = endDay - startDay; 
```

**可悲的警告：这在 1582 年无法正常工作。**

1582 年，即 Gregor 引入目前广泛使用的日历的那一年，需要修复以使太阳与日历年保持一致。所以他们采用了务实的解决方案：他们刚刚在 10 月 5 日至 14 日放弃了。（他们也没有疯狂到改变工作日）。因此，1582 年只有 355 天。

**附录：**上面的代码只在 1582 年之后才能正常工作。例如，它返回 1500 年的 365 天，即使今年在当时使用的儒略历中是闰年。公历从 1582 年 10 月 15 日开始。在公历上进行的计算只是在该日期之前没有定义。所以这样苹果的实现是正确的。在 1583 年之前，我不知道 Cocoa 上的正确实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:32:13.633

查找给定年份的天数怎么样：尽管这不是该问题的相对解决方案。

```
-(NSInteger)daysBetweenTwoDates:(NSDate *)fromDateTime andDate:(NSDate *)toDateTime{

    NSDate *fromDate;
    NSDate *toDate;

    NSCalendar *calendar = [NSCalendar currentCalendar];

    [calendar rangeOfUnit:NSDayCalendarUnit startDate:&fromDate interval:NULL forDate:fromDateTime];
    [calendar rangeOfUnit:NSDayCalendarUnit startDate:&toDate interval:NULL forDate:toDateTime];

    NSDateComponents *difference = [calendar components:NSDayCalendarUnit fromDate:fromDate toDate:toDate options:0];

    return [difference day]; 
}

-(void)someMethod {

    NSString *yourYear=@"2012";

    NSDate *date1 = [NSDate dateWithString:[NSString stringWithFormat:@"%@-01-01 00:00:00 +0000",yourYear]];
    NSDate *date2 = [NSDate dateWithString:[NSString stringWithFormat:@"%@-12-31 00:00:00 +0000",yourYear]];

    NSInteger numberOfDays=[self daysBetweenTwoDates:date1 andDate:date2];    

    NSLog(@"There are %ld days in between the two dates.", numberOfDays);
} 
```

编辑：

由于 dateWithString: 已弃用，您可以使用

```
NSDateFormatter *dateFormatter=[[NSDateFormatter alloc] init];
[dateFormatter dateFormat]=@"dd-MM-yyyy";
NSDate *date=[dateFormatter dateFromString:dateString]; 
```

形成`date1`和`date2`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T17:57:05.003

这是一个相对干净的版本。它是 NSCalendar 上的一个类别。

```
- (NSInteger) daysInYear:(NSInteger) year {
    NSDateComponents *dateComponents = [[NSDateComponents alloc] init];
    dateComponents.year = year;
    dateComponents.month = dateComponents.day = 1;
    NSDate *firstOfYear = [self dateFromComponents:dateComponents];
    dateComponents.year = year + 1;
    NSDate *firstOfFollowingYear = [self dateFromComponents:dateComponents];

    return [[self components:NSDayCalendarUnit
                   fromDate:firstOfYear
                     toDate:firstOfFollowingYear
                     options:0] day];    
} 
```

感谢 AKV 指出这`-components:fromDate:toDate:options`在这种情况下会起作用。

这似乎不适用于 1582 年或更早，根据 Nikolai Ruhe 的回答，这是因为在此之前根本没有定义公历计算。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T16:44:43.537

您将获得日期当月的天数。

您可以使用相同的函数，只需传入一个以二月为月份的日期。如果 range.length 返回 28，则一年中的总天数将为 365，如果返回 29，则天数将为 366。

# c# - 任务并行库中的优先队列

> ID：14941027
> 
> 赞同：6
> 
> 时间：2013-02-18T16:38:24.403
> 
> 标签：c#, multithreading, task-parallel-library, priority-queue, producer-consumer

之前是否有任何将任务添加到具有不同优先级的 TPL 运行时的工作？

如果没有，一般来说，我将如何实施？

理想情况下，我计划使用生产者-消费者模式将“待办事项”工作添加到 TPL。有时我发现需要将低优先级作业升级为高优先级作业（相对于其他作业）。

如果有人有一些我在搜索时应该使用的搜索关键字，请提及它们，因为我还没有找到可以满足我需要的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T17:08:51.377

所以这里是一个相当幼稚的优先级队列周围的相当幼稚的并发实现。这里的想法是，有一个排序集包含真实项目和优先级的对，但给出了一个只比较优先级的比较器。构造函数接受一个计算给定对象优先级的函数。

至于实际实施，它们没有有效实施，我只是`lock`围绕着一切。创建更高效​​的实现将阻止将其`SortedSet`用作优先级队列，并且重新实现可以同时有效访问的那些实现并不那么容易。

为了更改项目的优先级，您需要从集合中删除该项目，然后再次添加它，并且要在不迭代整个集合的情况下找到它，您需要知道旧的优先级以及新的优先级.

```
public class ConcurrentPriorityQueue<T> : IProducerConsumerCollection<T>
{
    private object key = new object();
    private SortedSet<Tuple<T, int>> set;

    private Func<T, int> prioritySelector;

    public ConcurrentPriorityQueue(Func<T, int> prioritySelector, IComparer<T> comparer = null)
    {
        this.prioritySelector = prioritySelector;
        set = new SortedSet<Tuple<T, int>>(
            new MyComparer<T>(comparer ?? Comparer<T>.Default));
    }

    private class MyComparer<T> : IComparer<Tuple<T, int>>
    {
        private IComparer<T> comparer;
        public MyComparer(IComparer<T> comparer)
        {
            this.comparer = comparer;
        }
        public int Compare(Tuple<T, int> first, Tuple<T, int> second)
        {
            var returnValue = first.Item2.CompareTo(second.Item2);
            if (returnValue == 0)
                returnValue = comparer.Compare(first.Item1, second.Item1);
            return returnValue;
        }
    }

    public bool TryAdd(T item)
    {
        lock (key)
        {
            return set.Add(Tuple.Create(item, prioritySelector(item)));
        }
    }

    public bool TryTake(out T item)
    {
        lock (key)
        {
            if (set.Count > 0)
            {
                var first = set.First();
                item = first.Item1;
                return set.Remove(first);
            }
            else
            {
                item = default(T);
                return false;
            }
        }
    }

    public bool ChangePriority(T item, int oldPriority, int newPriority)
    {
        lock (key)
        {
            if (set.Remove(Tuple.Create(item, oldPriority)))
            {
                return set.Add(Tuple.Create(item, newPriority));
            }
            else
                return false;
        }
    }

    public bool ChangePriority(T item)
    {
        lock (key)
        {
            var result = set.FirstOrDefault(pair => object.Equals(pair.Item1, item));

            if (object.Equals(result.Item1, item))
            {
                return ChangePriority(item, result.Item2, prioritySelector(item));
            }
            else
            {
                return false;
            }
        }
    }

    public void CopyTo(T[] array, int index)
    {
        lock (key)
        {
            foreach (var item in set.Select(pair => pair.Item1))
            {
                array[index++] = item;
            }
        }
    }

    public T[] ToArray()
    {
        lock (key)
        {
            return set.Select(pair => pair.Item1).ToArray();
        }
    }

    public IEnumerator<T> GetEnumerator()
    {
        return ToArray().AsEnumerable().GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }

    public void CopyTo(Array array, int index)
    {
        lock (key)
        {
            foreach (var item in set.Select(pair => pair.Item1))
            {
                array.SetValue(item, index++);
            }
        }
    }

    public int Count
    {
        get { lock (key) { return set.Count; } }
    }

    public bool IsSynchronized
    {
        get { return true; }
    }

    public object SyncRoot
    {
        get { return key; }
    }
} 
```

一旦你有了一个`IProducerConsumerCollection<T>`实例，也就是上面的对象，你可以将它用作 a 的内部支持对象，`BlockingCollection<T>`以便有一个更易于使用的用户界面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T16:55:17.443

[ParallelExtensionsExtras 包含几个自定义`TaskScheduler`s](https://devblogs.microsoft.com/pfxteam/parallelextensionsextras-tour-7-additional-taskschedulers/)，它们可以直接提供帮助，也可以作为您自己的调度程序的基础。

具体来说，有两个调度程序可能会让您感兴趣：

*   `QueuedTaskScheduler`，它允许您以`Task`不同的优先级调度 s，但不允许更改已入队`Task`的 s 的优先级。
*   `ReprioritizableTaskScheduler`，它没有不同的优先级，但允许您将特定的移动`Task`到队列的前面或后面。（虽然在当前等待的 s 数量中更改优先级是 O(n)，但`Task`如果您同时有许多 s，这可能是个问题`Task`。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-23T07:04:23.113

我已经实现了优先级 FIFO 任务队列。
它非常简单，就像具有优先级的 ActionBlock 一样工作。

检查您是否在[https://github.com/ido-ran/PriorityTaskQueue](https://github.com/ido-ran/PriorityTaskQueue)

# python - request.environ['HTTP_REFERER'] 为无

> ID：14941030
> 
> 赞同：3
> 
> 时间：2013-02-18T16:38:37.307
> 
> 标签：python, flask

我想进入`HTTP_REFERER`python 烧瓶框架。我的路线是这样的：

```
@app.route('/login')

def login():

    if authenticateForPanel():
        return redirect(url_for("panel"))
    else:               
        ref = request.environ['HTTP_REFERER']

        return render_template('login.html',blogOptions = g.blogOptions,ref=ref) 
```

当我执行此操作时，我得到`KeyError: 'HTTP_REFERER'`了回溯：

```
Traceback (most recent call last):
  File "/Users/ozcan/flask/flask/app.py", line 1823, in __call__
    return self.wsgi_app(environ, start_response)
  File "/Users/ozcan/flask/flask/app.py", line 1811, in wsgi_app
    response = self.make_response(self.handle_exception(e))
  File "/Users/ozcan/flask/flask/app.py", line 1809, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/ozcan/flask/flask/app.py", line 1482, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/ozcan/flask/flask/app.py", line 1480, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/ozcan/flask/flask/app.py", line 1466, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/ozcan/Documents/python/app.py", line 318, in login
    ref = request.environ['HTTP_REFERER']
KeyError: 'HTTP_REFERER' 
```

当我第一次编写此代码时，它正在工作。我不直接调用此 url。我调用`localhost:5000/panel`并将我重定向到方法。`login`所以基本上应该有一个引用者，我错了吗？

当我打印`request.environ['HTTP_REFERER']`它时`None`

我也尝试过

`ref = request.referrer`但它是`None`

为什么会发生？非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T16:51:31.190

默认情况下，flask 使用的 werkzeug 请求包装器可以为您工作：[request.referrer](http://werkzeug.pocoo.org/docs/wrappers/#werkzeug.wrappers.CommonRequestDescriptorsMixin.referrer)

```
from flask import Flask, request
import unittest

app = Flask(__name__)
@app.route('/')
def index():
    return unicode(request.referrer)

class Test(unittest.TestCase):

    def test(self):
        c = app.test_client()
        resp = c.get('/', headers={'Referer': '/somethingelse'})
        self.assertEqual('/somethingelse', resp.data)

if __name__ == '__main__':
    unittest.main() 
```

但在更一般的情况下，如果键不存在，要检索指定默认值的字典键的值，请使用[dict.get](http://docs.python.org/2/library/stdtypes.html#dict.get)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T16:53:11.523

> 当我第一次编写这段代码时它正在工作。我不直接调用这个 url。我调用 localhost:5000/panel 并将我重定向到登录方法。所以基本上应该有一个引用者，我错了吗？

这是不正确的。重定向不保证推荐人。浏览器是否会提供引荐来源网址是特定于浏览器的。也许您使用的其他浏览器曾一度出现这种行为？您现在拥有的代码可以达到预期效果。

请参阅[302 重定向是否会维护引用字符串？](https://stackoverflow.com/questions/2158283/will-a-302-redirect-maintain-the-referer-string)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-04T20:33:44.973

我可以让 request.referrer 不是 None 的唯一方法是通过`<a href="/something"></a>`. 重定向和发出常规的旧 HTTP 请求不包含引用者属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T16:47:01.733

@dm03514 有正确的想法，但是如果您坚持使用`environ`字典，则应该使用该`get`方法。此外，您如何测试它是否为无，即，您是使用交互式解释器打印值还是在正文中添加打印语句？

您将如何合理地执行此操作的示例：

```
# snip
else:
    ref = request.environ.get('HTTP_REFERER')
    # You can specify a default return value other than None like so:
    # ref = request.environ.get('HTTP_REFERER', '/')
# snip 
```

# php - 在 PHP 中执行 SQL 存储过程后，无法一致地返回数据

> ID：14941031
> 
> 赞同：0
> 
> 时间：2013-02-18T16:38:37.110
> 
> 标签：php, sql-server-2008, stored-procedures, windows-server-2008-r2

全部，

我已经潜伏在 stackoverflow 上几年了，总能找到解决手头问题所需的帮助。但是，这一次，我需要创建我的第一个问题，因为我无法找到与我遇到的相同问题的问题。

我已经被难住了一个多星期，并且在工作中陷入困境，因为我已经搞砸了我的估计日期。我任由你摆布，希望你能帮助我解决我的编码难题。

我能够通过PHP在VM（运行Windows 2008 r2）上的SQL 2008服务器上执行存储过程返回数据，我在其中传递一个参数。

该参数共有十一 (11) 个选项。每当我传入其中一 (1) 个选项时，都会返回预期的数据。

但是，每当我使用任何其他选择时，都不会返回任何数据（并且使用我当前的代码，也不会返回任何错误）。

有 11 个**$application_selected**选项可以传递到存储过程中，其中只有一 (1) 个选项返回数据。其他人都没有返回数据或错误。

这是我的整个代码：

```
<!DOCTYPE html>
<html>
<head>
<title>data</title>
</head>
<body>

<?php
////////////////////////////////////////////////////////////////////////////
//connection information
$servername = "192.168.1.104";
$username = "sa";
$password = "*";
$database = "*";

$connection_info = array( "Database"=>$database, "UID"=>$username, "PWD"=>$password);
$conn = sqlsrv_connect( $servername, $connection_info);

if($conn===FALSE) die( print_r( sqlsrv_errors(), true));
else echo "<font color=\"blue\">DB Connected.</font><br>";
/////////////////////////////////////////////////////////////////////////////

$application_selected = "param1";
$sql_cmd = "EXECUTE GetApprover '$application_selected'";

$execute_this = sqlsrv_prepare($conn, $sql_cmd);
$application_proc = sqlsrv_execute($execute_this);

if($application_proc===FALSE) die( print_r( sqlsrv_errors(), true)); //execute failed; die and display errors

else echo "<font color=\"blue\">DB data retrieved.</font><br><br>";

$row_apps = "";
$count = 0;
echo "<font color=\"blue\">Attempting data output via loop</font><br><br>";

/////////////////////////////////////////////////////////////////////////////
// output data
//echo var_dump($execute_this)."<br><br>";
echo "<font color=\"blue\">Application selected = </font>\"".$application_selected."<font color=\"blue\">\" - data pulled &#9660;</font><br><br>";
while(($row_apps = sqlsrv_fetch_array($execute_this)) && (sqlsrv_fetch_array($execute_this) <> FALSE)) { //while var has data
if (!isset($row_apps)) die( print_r( sqlsrv_errors(), true));
$count += 1;
echo $row_apps['ApplicationName']." - ".$row_apps['ApproverCode']." - ".$row_apps['ApproverDesc']." - ".$row_apps['FullName']." - ".$row_apps['Email']." - ".$row_apps['UserId']."<br>";
}
/////////////////////////////////////////////////////////////////////////////////

echo "<br><font color=\"blue\">&#9650; Data displayed.";
echo "<br><br><font color=\"blue\">There were [<font color=\"red\"><b>$count</b></font>] rows returned.<br><br><br>";

echo "<br>\$servername = ";
echo var_dump($servername)."<br>";
echo "<br>\$username = ";
echo var_dump($username)."<br>";
echo "<br>\$password = ";
echo var_dump($password)."<br>";
echo "<br>\$database = ";
echo var_dump($database)."<br>";
echo "<br>\$connection_info = ";
echo var_dump($connection_info)."<br>";
echo "<br>\$conn = ";
echo var_dump($conn)."<br>";
echo "<br>\$application_selected = ";
echo var_dump($application_selected)."<br>";
echo "<br>\$sql_cmd = ";
echo var_dump($sql_cmd)."<br>";
echo "<br>\$execute_this = ";
echo var_dump($execute_this)."<br>";
echo "<br>\$application_proc = ";
echo var_dump($application_proc)."<br>";
echo "<br>\$row_apps = ";
echo var_dump($row_apps)."<br>";
echo "<br>\$count = ";
echo var_dump($count)."<br>";

echo "<br><br><br>";
sqlsrv_close($conn);
echo "<br>DB Connection closed.</font><br><br><br>";

?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:52:46.660

似乎我对某种 db 问题的初步怀疑（尽管我没有确凿的证据）是在推动我的 dba（也是我的主管）通过添加的调试代码 [like var_dump()/print_r() ]。他对导致这一切的问题的答复如下：

“我不知道发生了什么，但我将表格内容从我的开发环境复制到了您的开发环境，现在一切正常。”

很抱歉因为我的问题给大家添麻烦了。我很感激 Marc B 和 Raad 如此迅速地回答了我的求助请求，我真的希望这个问题对未来的人有所帮助。

# c# - 运行特定 Windows 服务时 svchost.exe 中的内存泄漏

> ID：14941035
> 
> 赞同：2
> 
> 时间：2013-02-18T16:38:46.693
> 
> 标签：c#, windows, memory, service, memory-leaks

我编写了一个 Windows 服务，它连接到另一台服务器上的 web 服务。我在这个过程中得到了严重的内存增加`svchost.exe`。以及事件日志中的以下警告消息。

`Warning ID: 1530 user registry handles leaked from \Registry\User....: Process ... (\Device....\Windows\System32\svchost.exe) has opened key \REGISTRY\USER....\Printers\DevModePerUser`

运行环境：windows server 2008 R2 SP1 x64

我将不胜感激！

# ruby - 换行位置

> ID：14941036
> 
> 赞同：6
> 
> 时间：2013-02-18T16:38:47.417
> 
> 标签：ruby, string

给定一个字符串，返回字符串中换行符开头的字符位置数组的最有效方法是什么？

```
text =<<_
Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis
nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu
fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in 
culpa qui officia deserunt mollit anim id est laborum.
_ 
```

预期的：

```
find_newlines(text) # => [0, 80, 155, 233, 313, 393] 
```

我发布我自己的答案。我想接受最快的方式作为接受的答案。

* * *

**添加新答案时，此处的基准测试结果将更新**

```
require "fruity"

compare do
  padde1 {find_newlines_padde1(text)}
  digitalross1 {find_newlines_digitalross1(text)}
  sawa1 {find_newlines1(text)}
  sawa2 {find_newlines2(text)}
end

# Running each test 512 times. Test will take about 1 second.
# digitalross1 is faster than sawa2 by 5x ± 0.1
# sawa2 is faster than sawa1 by 21.999999999999996% ± 1.0%
# sawa1 is faster than padde1 by 4.0000000000000036% ± 1.0% 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:05:20.660

```
def find_newlines text
  s = 0
  [0] + text.to_a[0..-2].map { |e| s += e.size }
end 
```

如前所述，`text.each_line.to_a`用于 1.9。调用`each_line`也适用于 1.8.7，但比仅调用慢 20%`to_a.`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T17:25:03.507

类似于你的答案：

```
def find_newlines_padde1 text
  text.enum_for(:scan, /^/).map do
    $~.begin(0)
  end
end 
```

您仍然可以使用[ruby​​inline](https://github.com/seattlerb/rubyinline)获得一些性能：

```
require "inline"
module Kernel
  inline :C do |builder|
    builder.add_compile_flags '-std=c99'
    builder.c %q{
      static VALUE find_newlines_padde2(VALUE str) {
        char newline = '\n';
        char* s = RSTRING_PTR(str);
        VALUE res = rb_ary_new();
        str = StringValue(str);
        rb_ary_push(res, LONG2FIX(0));
        for (long pos=0; pos<RSTRING_LEN(str)-1; pos++) {
          if (s[pos] == newline) {
             rb_ary_push(res, LONG2FIX(pos+1));
          }
        }
        return res;
      }
    }
  end
end 
```

请注意，我人为地提前结束`pos<RSTRING_LEN(str)-1`以获得您要求的相同结果。您可以根据需要将其更改为`pos<RSTRING_LEN(str)`，因此最后一个空行也算作行开头。您将决定哪一个适合您。

果味 说`padde2 is faster than sawa2 by 22x ± 0.1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:40:00.677

```
def find_newlines_sawa1 s
  a = []
  s.scan(/^/){a.push($~.offset(0)[0])}
  a
end

find_newlines_sawa1(text) # => [0, 80, 155, 233, 313, 393]

def find_newlines_sawa2 s
  a = [0]
  s.split(/^/).each{|s| a.push(a.last + s.length)}
  a.pop
  a
end

find_newlines_sawa2(text) # => [0, 80, 155, 233, 313, 393] 
```

# jquery - 为什么我对 jquery deferred 和 jsonp 数据的错误处理不起作用？

> ID：14941038
> 
> 赞同：1
> 
> 时间：2013-02-18T16:38:51.550
> 
> 标签：jquery, ajax, error-handling, deferred

我只是想弄清楚`deferred`api 并将这个很好的示例代码与 twitter 搜索 api 一起使用：

```
var getTweets = function(q) {
    return $.ajax({
        url: 'http://search.twitter.com/search.json?q=' + encodeURIComponent(q),
        dataType: 'jsonp'
    })
};

var getTheDay = function(date){
    var date = new Date(date);
    return date.getDay();
}

var parseTweetData = function(data){
    $.each(data.results, function(index, tweet){
        console.log(tweet.text 
        + ' from ' + tweet.from_user_name 
        + ' at ' + getTheDay(Date.parse(tweet.created_at) * 1000));
    });
}

var parseError = function(error, xhr) {
    alert('failed')
};

$.when(getTweets(' martin')).then(parseTweetData, parseError); 
```

把结果拿回来就好了。问题来自 twitter 返回[403 错误](http://d.pr/i/7Ax6)的情况。

我想用我的自定义错误处理程序处理该错误，但这似乎根本没有被触发。我究竟做错了什么？我误解了api吗？如何编写正确的 ajax 错误处理程序请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:45:04.130

根据 $.ajax 文档，jsonp 请求不会调用错误处理程序，因此它可能也不会调用延迟。

> error
> 类型：Function(jqXHR jqXHR, String textStatus, String errorThrown)
> 请求失败时调用的函数。该函数接收三个参数：jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象，一个描述发生的错误类型的字符串和一个可选的异常对象（如果发生）。第二个参数（除了 null）的可能值是“timeout”、“error”、“abort”和“parsererror”。发生 HTTP 错误时，errorThrown 会接收 HTTP 状态的文本部分，例如“未找到”或“内部服务器错误”。从 jQuery 1.5 开始，错误设置可以接受一个函数数组。每个函数都会被依次调用。**注意：跨域脚本和 JSONP 请求不调用此处理程序。**

you can try using a timeout to trigger an error callback, so basically we are giving the request some amount of time to be made and when the time expires we assume the request failed.

```
$.ajax({
    url: 'http://search.twitter.com/search.json?q=' + encodeURIComponent(q),
    dataType: 'jsonp',
    timeout: 5000 /* 5 seconds timeout, plenty of time for the request to complete */
}) 
```

# java - filepicker.io java 集成：base64 编码不提供 vaid 签名

> ID：14941051
> 
> 赞同：1
> 
> 时间：2013-02-18T16:39:14.753
> 
> 标签：java, base64, filepicker.io

我正在尝试将 filepicker.io（启用安全性）集成到我们的 java 应用程序中。在 java 代码中，我正在为文件选择器集成生成 javascript，使用以下代码进行 base64 编码：

```
import org.apache.commons.codec.binary.Base64;
import org.codehaus.jackson.map.ObjectMapper;

private Pair<String, String> encodeAndSignPolicy(Policy policy) {
   byte[] jsonPolicy = JSON_MAPPER.writeValueAsBytes(policy);
   String encodedPolicy = base64UrlEncode(jsonPolicy);

   byte[] signature = m_mac.doFinal(encodedPolicy.getBytes(UTF8));
   String encodedSignature = base64UrlEncode(signature);

   return Pair.create(encodedPolicy, encodedSignature);
}

private String base64UrlEncode(byte[] input) {
   Base64 base64 = new Base64(false);
   byte[] encodedBytes = base64.encode(input);
   return new String(encodedBytes).replace('+', '-').replace('/', '_').replace("\r\n", "");
} 
```

在某些情况下，这可行，但不稳定。我尝试了 url 安全 base64 编码的不同变体，包括不同的 api（apache commons 和 jackson），但每次生成的签名都不稳定。

例如：生成以下两个策略：

```
working:
policy: {"call":"pick","expiry":1361202256856} 
base64 policy: eyJjYWxsIjoicGljayIsImV4cGlyeSI6MTM2MTIwMjI1Njg1Nn0= 
base64 signature: 0vQdw1rcfoAYN0sv71OcGArHAF2jozLaaMGR2DZ5DbA= 

not working:
Policy: {"call":"pick","expiry":1361202299638} 
base64 policy: eyJjYWxsIjoicGljayIsImV4cGlyeSI6MTM2MTIwMjI5OTYzOH0= 
base64 signature: wzgaIRume9OZ5Q6TKx-c5LaEabmUmENZk0Dwvm0Y01Y= 
```

和生成的javascript：

```
filepicker.pickMultiple({
        container: 'modal',
        openTo: 'GOOGLE_DRIVE',
        services:['BOX', 'COMPUTER', 'DROPBOX', 'EVERNOTE', 'FACEBOOK', 'FLICKR', 'FTP', 'GITHUB', 'GOOGLE_DRIVE', 'PICASA', 'WEBDAV', 'GMAIL', 'IMAGE_SEARCH', 'INSTAGRAM', 'URL', 'VIDEO', 'WEBCAM'],
        policy: 'eyJjYWxsIjoicGljayIsImV4cGlyeSI6MTM2MTIwMjI5OTYzOH0=',
        signature: 'wzgaIRume9OZ5Q6TKx-c5LaEabmUmENZk0Dwvm0Y01Y=',
    },
    function(FPFiles){
        $('#filePickerInput7c').val(JSON.stringify(FPFiles));
        $('#filePickerInput7c').change();
    },
    function(FPError){
        console.log(FPError.toString());
    }
); 
```

似乎每次签名包含“-”或“_”时都发现它是无效的。如何在 java 中为 filepicker.io 生成有效的签名（和策略）？

# java - 如何在 LinearLayout 中回收视图，以避免多次调用 findViewById()？

> ID：14941058
> 
> 赞同：2
> 
> 时间：2013-02-18T16:39:31.587
> 
> 标签：java, android, android-layout, optimization

我想动态添加从布局 XML 膨胀的项目列表`LinearLayout`到`ScrollView`. `findViewById`这涉及为每个项目多次调用，我被告知这是非常昂贵的。我怎样才能回收我的观点来避免这种情况？

我会使用`ListView`, 除了每个项目中可以包含任意数量的内容和评论元素，而且我在[Google I/O 2010 - ListView 的世界中](http://www.youtube.com/watch?v=wDBM6wVEO70)被告知`ListView`s 不应该过于复杂。

这是我的相关方法的代码：

```
private void addQuotes(NodeList quoteNodeList){

    LayoutInflater layoutInflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    for(int i = 0; i < quoteNodeList.getLength(); i++){

        Log.i(getClass().getSimpleName(), "Adding quote number " + i);

        Node quoteNode = quoteNodeList.item(i);
        // Inflate view to hold multiple content items, single additional content TextView, and multiple comment items
        LinearLayout quote = (LinearLayout) layoutInflater.inflate(R.layout.quote, null);
        LinearLayout contentList = (LinearLayout) quote.findViewById(R.id.dialog_list);
        TextView additionalContent = (TextView) quote.findViewById(R.id.additional_content);
        LinearLayout commentList = (LinearLayout) quote.findViewById(R.id.comment_list);

        // Get data for content items and add to contentList
        NodeList contentNodeList =
                XmlUtilities.getChildWithTagName(quoteNode, NetworkHelper.XML_TAG_QUOTE_CONTENT).getChildNodes();
        for(int contentIndex = 0; contentIndex < contentNodeList.getLength(); contentIndex++){

            Log.i(getClass().getSimpleName(), "Adding content number " + contentIndex + " to quote number " + i);

            Node contentItemNode = contentNodeList.item(contentIndex);
            // Inflate view to hold name and dialog TextViews
            LinearLayout contentItem = (LinearLayout) layoutInflater.inflate(R.layout.dialog_item, null);
            TextView nameView = (TextView) contentItem.findViewById(R.id.speaker);
            TextView dialogView = (TextView) contentItem.findViewById(R.id.dialog);
            // Get data and insert into views
            String nameString = XmlUtilities.getChildTextValue(contentItemNode, NetworkHelper.XML_TAG_QUOTE_CONTENT_ITEM_NAME);
            String dialogString = XmlUtilities.getChildTextValue(contentItemNode, NetworkHelper.XML_TAG_QUOTE_CONTENT_ITEM_DIALOG);
            nameView.setText(nameString + ":");
            dialogView.setText("\"" + dialogString + "\"");
            // Add to parent view
            contentList.addView(contentItem);
        }

        // Get additional content data and add
        String additionalContentString = XmlUtilities.getChildTextValue(
                quoteNode, NetworkHelper.XML_TAG_QUOTE_ADDITIONAL_CONTENT);
        Log.d(getClass().getSimpleName(), "additionalContentString: " + additionalContentString);
        additionalContent.setText(additionalContentString);

        // TODO: Get comment data and add

        // Add everything to ScrollView
        mQuoteList.addView(quote);
        Log.d(getClass().getSimpleName(), "additionalContent: " + additionalContent.getText());

    } 
```

参数`quoteNodeList`是一个`org.w3c.dom.NodeList`。 `XmlUtilities`是我自己编写的辅助类，但方法应该是不言自明的。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T16:45:05.147

> 这涉及为每个项目多次调用 findViewById，我被告知这是非常昂贵的。

不像通货膨胀本身那么昂贵。如果您有 10,000 条评论，您将膨胀 10,000 行，从而使您面临堆空间不足和/或 UI 完全冻结太久的风险。

> 我怎样才能回收我的观点来避免这种情况？

鉴于你的结构，你不能。

> 我会使用 ListView，除了每个项目中可以包含任意数量的内容和评论元素，而且我在 Google I/O 2010 - ListView 世界中被告知 ListViews 不应该过于复杂。

由于您提出的解决方案将明显更加“过于复杂” - 两个或三个数量级 - 使用`ListView`.

# eclipse - eclipse osgi bundle 的奇怪行为

> ID：14941072
> 
> 赞同：1
> 
> 时间：2013-02-18T16:40:14.110
> 
> 标签：eclipse, osgi, equinox

我正在尝试部署一些我在 Eclipse 中实现的所有必需捆绑包，以便运行我自己的捆绑包。比方说，在我的包中也包含 Equinox 容器，因此它就像一个可执行的老式 JAR。

也就是说，当我尝试跑步时

```
java -jar org.eclipse.osgi_3.8.1.v20120830-144521.jar 
```

什么都没有发生...它只是呆在那里什么都不做...即使我将该捆绑包复制到其他地方并尝试相同，也没有任何反应...这通常吗？我的意思是，我已经用这个捆绑包的旧版本（3.6）成功地做到了这一点，而且它工作得完美无缺。

唉，我尝试了 -debug 标志来查看是否可以获得一些输出，但只有一个关于任务 .options 文件的抱怨正在发生，没有别的。

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:52:08.717

您还没有包含 -console 选项，那是打开控制台视图的选项吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:17:17.247

以防万一有人遇到同样的问题......检查了这个链接：[http](http://docs.codehaus.org/spaces/flyingpdf/pdfpageexport.action?pageId=82903240) ://docs.codehaus.org/spaces/flyingpdf/pdfpageexport.action?pageId= 82903240，我创建了配置文件夹，里面有一个config.ini内容如下：

```
osgi.bundles=org.eclipse.equinox.common@start, org.eclipse.update.configurator@start,
org.eclipse.core.runtime@start, org.eclipse.core.jobs@start,
org.eclipse.equinox.registry@start, org.eclipse.equinox.preferences@start, 
org.eclipse.core.contenttype@start, org.apache.felix.gogo.runtime@start, 
org.apache.felix.gogo.shell@start, 
org.eclipse.equinox.app@start,org.eclipse.equinox.console@start, 
eclipse.ignoreApp=true
osgi.noShutdown=true 
```

这似乎有效。我相信这是运行 Equinox OSGi 容器所需的最小捆绑包...从那里，您可以使用 osgi shell 来玩您的捆绑包

# cryptography - RSA cryptograohy 中的加密时间是否小于解密时间？

> ID：14941073
> 
> 赞同：0
> 
> 时间：2013-02-18T16:40:17.497
> 
> 标签：cryptography, rsa, benchmarking, public-key-encryption

我将执行 RSA 加密。我想知道。在 RSA 密码学中，加密比解密快多少倍。我尝试使用 System.currentTimeMillis(); 在 java 中计算经过的时间 但是给我时间加密 = 0.05 毫秒，而时间解密 0.55 毫秒意味着从 1:11 开始。我认为这个结果不合理我的代码如下

```
//here my key has 256 bits
 for (;;) {
            long begin = System.currentTimeMillis();

            for (int i = 0; i < num; i++) {

            decrypt();
            }

            long end = System.currentTimeMillis();

            long time = end - begin;

            if (time >= 10000) {
                System.out.printf("Average Encryption takes: %.2f ms\n",
                        (double) time / num);
                break;
            }

            num *= 2;
        }

p = BigInteger.probablePrime(128, random);
q = BigInteger.probablePrime(128, random);
N = (p.subtract(one)).multiply(q.subtract(one));
e = BigInteger.probablePrime(32, random);
d = e.modInverse(N);

private void encrypt()
{
    C= M.modPow(e,N);
}

private void decrypt()
{
    RM = C.modPow(d, N);
} 
```

请对这些结果进行任何解释

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T16:56:44.770

请不要自己实现 RSA，很容易做错，并且需要几个月的时间来编写可以抵抗 3-4 旧密码攻击的版本。

[你写过的所有密码都可能被破解了](http://tonyarcieri.com/all-the-crypto-code-youve-ever-written-is-probably-broken)——Tony Arcieri

[RSA加密更加困难。实施 RSA 的“最佳实践”是：不要实施 RSA。其他人比你做得更好。](http://blog.cryptographyengineering.com/2012/06/bad-couple-of-years-for-cryptographic.html)——马修·格林（约翰霍普金斯大学）

[为什么密码学比看起来更难——Bruce](http://www.schneier.com/essay-037.html) Schneier，1997：

> 大多数系统不是与密码学家一起设计和实施的，而是由将密码学视为另一个组件的工程师设计和实现的。它不是。

在 RSA 的工业实现中，*使用某人的公钥加密比*使用私钥解密更快，因为公钥的公钥**很短`e`**，通常为 65537 (0x10001)。这是真的，当**使用快速求幂**时（名为[Exponentiation_by_squareing](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)的方法）。**此操作的时间线性取决于位长度和`1`指数值中的位数**，长度和计数对于 65537 都很小（17 位长度和 2 位处于状态`1`）。

*在类似 RSA 的操作*的伪代码*中，它**是***`e`32 位*的，通常**比 短**，因此使用指数的操作比使用.****`d`**`e``d`***

# php - 将命令行 curl 翻译成 php

> ID：14941078
> 
> 赞同：1
> 
> 时间：2013-02-18T16:40:27.777
> 
> 标签：php, curl, header

我不是很精通curl，想知道是否有人可以帮助我将以下内容转换为php：

`curl -H "Accept: application/json" -H "Content-type: application/json" -X POST -d ' {"tester":{"email":"justin@prefinery.com","status":"applied","profile":{"first_name": "Justin", "last_name": "Britten"},"responses":{"response":[{"question_id":"23874", "answer":"a text response"},{"question_id":"23871", "answer":"1"},{"question_id":"23872", "answer":"0,2"},{"question_id":"23873", "answer":"9"}]}}}' https://account.prefinery.com/api/v2/betas/1/testers.json?api_key=secret`

如果你知道一个好的 curl 教程也会有很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:01:20.753

像这样的东西

```
 $ch = curl_init();
            $json = '{"tester":{"email":"justin@prefinery.com","status":"applied","profile":{"first_name": "Justin", "last_name": "Britten"},"responses":{"response":[{"question_id":"23874", "answer":"a text response"},{"question_id":"23871", "answer":"1"},{"question_id":"23872", "answer":"0,2"},{"question_id":"23873", "answer":"9"}]}}}';
            $url = 'https://account.prefinery.com/api/v2/betas/1/testers.json?api_key=secret';
            curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-type: application/json', 'Accept: application/json'));
            curl_setopt($ch, CURLOPT_HEADER, 0);
            curl_setopt($ch, CURLOPT_POST, 1);
            curl_setopt($ch, CURLOPT_POSTFIELDS, $json);
            curl_setopt($ch, CURLOPT_URL, $url);
            curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
            $result = curl_exec($ch); 
```

# ocean - 设置 SeismicLine3D 刻面法线方向问题

> ID：14941079
> 
> 赞同：2
> 
> 时间：2013-02-18T16:40:28.120
> 
> 标签：ocean

我有一些代码可以向前或向后移动随机定向的 3D 地震线，类似于一般的交叉点播放器。它在 Petrel 2011 中运行良好，但是一旦我更新到 2012 年它似乎就坏了。问题是当我尝试设置一个新方面时，线的正常方向似乎改变了几个小数。下面是一些示例代码...

```
SeismicLine3D line = ...;
double distance = ...;
Direction3 direction = ...;
Direction3 normal = ...;

Facet facet = seismicLine3D.Intersection.Facets.ElementAt(0);
Vector3 offset = Vector3.Multiply(distance, direction.NormalizedVector);
Point3 point = Point3.Add(facet.Plane.DefiningPoint, offset);
Plane3 plane = new Plane3(point, normal);
Facet newFacet = new Facet(plane, new Plane3[] {});
IEnumerable<Facet> facets = new Facet[] {newFacet};

using (ITransaction transaction = DataManager.NewTransaction())
{
    transaction.Lock(seismicLine3D);

    try { seismicLine3D.Intersection.Facets = facets; }
    finally { transaction.Commit(); }
}

// BAD!!!
// seismicLine3D.Intersection.Facets.ElementAt(0).Plane.Normal != normal; 
```

有谁知道海燕 2011 年和 2012 年之间可能发生了什么变化导致这种情况？另外，有人知道可能的解决方法吗？

编辑：
在任何切换窗口中查看时，正常方向的变化非常明显。随着线条的移动，您将在可视化中看到轻微的“故障”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:19:25.210

问题是由于 double -> float 和 float->double 转换期间的舍入造成的。该算法在每次迭代时都会稍微修改其输入地震线，导致计算的法线每次都因舍入问题而略有不同。首先将归一化的法线转换为浮点数会稍微提高算法的精度。但到目前为止，最好的解决方法是存储第一个法线并在每次迭代中使用它。

干杯，普里亚

# php - 如何在mysqli中插入用户的自定义铭文ID？

> ID：14941082
> 
> 赞同：2
> 
> 时间：2013-02-18T16:40:34.217
> 
> 标签：php, mysqli, uniqueidentifier

我正在编写学校经理脚本。我不知道如何插入订阅的自定义唯一 ID...

在显示他/她从数据库中的完整信息时，我只是使用这个函数来显示它的唯一订阅 ID：

```
$year = date('Y');
$ID = substr($student->dateNaissance,8,10).$student->id_etudiant."/".$year; 
```

该功能由三件事组合而成：

*   出生年份的最后 2 位数字（例如：01/01/1981.. 我只取这个 -->81 使用 substr 函数）
*   数据库表中的行 ID（例如：50）。
*   以及订阅年份（例如：2013）

所有给我的，例如，结果 8150/2013

我想要的是在将学生数据插入数据库时​​，我也希望插入这个唯一的 ID..

## 这里的问题是我不知道如何获取一行的最后一个 id ！

是的，我尝试插入学生数据，然后使用以下方法更新 id_subscription：

```
if(isset(....){ 
...... 
    $mysqli->query("INSERT INTO table (a,b,c, ...etc) VALUES('','',''..etc)"); 
    $year = date('Y'); 
    $mysqli_query("SELECT * FROM table_name"); 
    $studentID = $mysqli_insert_id(); 
    $ID = substr($student->dateNaissance,8,10).$ID."/".$year; 
    $mysqli->query("UPDATE table_name SET id_subscription = $ID"); 
} 
```

但它不起作用：\

顺便说一句：在我的表中，我使用 auto_increment id + 我想在其中插入上面显示的自定义 id 的订阅 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:44:26.527

假设 row id 是一个 auto_increment 字段，那么您必须分两个阶段进行：

1.  开始交易
2.  将所有内容插入数据库，**除了**您的 id 字段
3.  使用 last_insert_id() 获取 mysql 生成的 ID 字段
4.  建立自己的 id 字段
5.  用这个新的 id 更新记录
6.  提交事务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:47:57.683

关于数据库结构： 1\. 您可以在表中使用自动递增的主键并将数据（student_id）存储为单独的列（推荐）。

在获取“一行的最后一个 id”时： 1\. 使用 mysql_insert_id() ..[看看这个](http://php.net/manual/fr/function.mysql-insert-id.php)

# multithreading - JavaFX2：我可以暂停后台任务/服务吗？

> ID：14941084
> 
> 赞同：14
> 
> 时间：2013-02-18T16:40:50.390
> 
> 标签：multithreading, service, concurrency, javafx-2, task

我正在尝试设置一个后台服务，该服务将执行从 csv 文件中批量加载事务数据。此后台服务将从映射到控制器/演示器类中的方法的菜单项操作启动。

经常，一些数据出现在 csv 文件中，而在数据库中找不到主数据，这通常会导致上传阻塞和失败。

在这种情况下，我希望能够让后台服务暂停其处理并从演示者类调用对话框以接收用户输入。用户输入将用于在数据库中添加一个主行，之后后台服务应该从它停止的地方恢复（不是从 csv 文件的开头，而是从导致错误的行）。

这是否可以在 JavaFX 中实现，也许使用 javafx.concurrent API？我该怎么做呢？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-19T21:36:16.997

*解决方案*

当您的后台进程遇到需要提示用户输入的情况时，请使用[Platform.runLater](http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html#runLater%28java.lang.Runnable%29)中执行的[FutureTask在 JavaFX 应用程序线程上显示并](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/FutureTask.html)[等待](http://docs.oracle.com/javafx/2/api/javafx/stage/Stage.html#showAndWait%28%29)对话框提示。在后台进程中，使用[futureTask.get](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/FutureTask.html#get%28%29)暂停后台进程，直到用户输入允许进程继续的必要值。

* * *

*示例代码片段*

这是这种方法的代码本质，可以放在后台进程的调用方法中：

```
String nextText = readLineFromSource();
if ("MISSING".equals(nextText)) {
  updateMessage("Prompting for missing text");
  FutureTask<String> futureTask = new FutureTask(
    new MissingTextPrompt()
  );
  Platform.runLater(futureTask);
  nextText = futureTask.get();
}
...
class MissingTextPrompt implements Callable<String> {
  private TextField textField;

  @Override public String call() throws Exception {
    final Stage dialog = new Stage();
    dialog.setScene(createDialogScene());
    dialog.showAndWait();
    return textField.getText();
  }
  ...
} 
```

* * *

*示例应用程序*

我创建[了一个小而完整的示例应用程序](https://gist.github.com/jewelsea/4989970)来演示这种方法。

示例应用程序的输出是：

![提示任务demo输出](../Images/9f13ad88cfdab67d922f816ffc0a58a4.png)

*示例输出说明*

没有缺失值的读取行只是普通的棕色。输入提示值的行具有淡绿色背景。已经读取了 14 行，后台任务已经在第 6 行暂停了一次，缺少一个值。提示用户输入缺失值（用户输入的值`xyzzy`），然后该过程继续直到第 14 行也缺失，后台任务再次暂停，并显示另一个提示对话框。

# javascript - jQuery .hover() 输入一个元素，但是如何在另一个元素上获取离开触发器

> ID：14941093
> 
> 赞同：0
> 
> 时间：2013-02-18T16:41:04.640
> 
> 标签：javascript, jquery, html

我有这个很好很简单的 jq：

```
$(document).ready(function($) {
  $('#navigation ul li').hover(function(){
    $(this).find("ul").addClass("MenuBarSubmenuVisible");
  }, function(){
   $(this).find("ul").removeClass("MenuBarSubmenuVisible");
  });
}); 
```

但是问题是因为`.hover`事件绑定到`$('#navigation ul li')`元素但是我希望`mouseLeave`悬停功能的部分在离开时触发`$('#navigation ul li ul')`，除非它必须是`$(this)`实例，因为会有多个 ul li ul。

我不能简单地通过 CSS（以一个不久前开发的网站）来做到这一点，因为它正在应用类并做各种其他奇怪的事情。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:49:22.033

就个人而言，在创建带有一些 jquery 效果的菜单链接时，我总是使用此代码。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
$(document).ready(function() {
 jQuery(".sf-menu a").mouseenter(function(){
      jQuery(this).stop().addClass("MenuBarSubmenuVisible");
    });
    jQuery(".sf-menu a").mouseleave(function(){
      jQuery(this).stop().removeClass("MenuBarSubmenuVisible");
          });

    });
</script> 
```

'.stop' 停止“怪异”，例如当用户将鼠标快速移过链接时排队的动画。

这是一个jsfiddle：http: [//jsfiddle.net/K7Y6w/11/](http://jsfiddle.net/K7Y6w/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:49:29.960

在您的情况下，我会将 mouseenter 和 mouseleave 方法/选择器分开：

```
$(document).ready(function($) {
    $('#navigation ul').on('mouseenter','li', function() {
            $(this).find("ul").addClass("MenuBarSubmenuVisible");
    }).on('mouseout','li ul',function() {
        $(this).removeClass("MenuBarSubmenuVisible");
    });
}); 
```

# python - 按位置选择熊猫列

> ID：14941097
> 
> 赞同：140
> 
> 时间：2013-02-18T16:41:15.757
> 
> 标签：python, pandas, indexing

我只是试图通过整数访问命名的熊猫列。

您可以使用 选择按位置的行`df.ix[3]`。

但是如何按整数选择一列？

我的数据框：

```
df=pandas.DataFrame({'a':np.random.rand(5), 'b':np.random.rand(5)}) 
```

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2013-02-18T16:44:55.830

想到的两种方法：

```
>>> df
          A         B         C         D
0  0.424634  1.716633  0.282734  2.086944
1 -1.325816  2.056277  2.583704 -0.776403
2  1.457809 -0.407279 -1.560583 -1.316246
3 -0.757134 -1.321025  1.325853 -2.513373
4  1.366180 -1.265185 -2.184617  0.881514
>>> df.iloc[:, 2]
0    0.282734
1    2.583704
2   -1.560583
3    1.325853
4   -2.184617
Name: C
>>> df[df.columns[2]]
0    0.282734
1    2.583704
2   -1.560583
3    1.325853
4   -2.184617
Name: C 
```

* * *

**编辑**：原始答案建议使用，`df.ix[:,2]`但现在不推荐使用此功能。用户应切换到`df.iloc[:,2]`.

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2013-04-11T12:01:51.120

您还可以使用`df.icol(n)`按整数访问列。

更新：`icol`已弃用，可以通过以下方式实现相同的功能：

```
df.iloc[:, n]  # to access the column at the nth position 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2017-06-19T22:09:29.187

您可以使用**基于标签的 .loc 或基于索引的使用 .iloc 方法进行列切片，包括列范围：**

```
In [50]: import pandas as pd

In [51]: import numpy as np

In [52]: df = pd.DataFrame(np.random.rand(4,4), columns = list('abcd'))

In [53]: df
Out[53]: 
          a         b         c         d
0  0.806811  0.187630  0.978159  0.317261
1  0.738792  0.862661  0.580592  0.010177
2  0.224633  0.342579  0.214512  0.375147
3  0.875262  0.151867  0.071244  0.893735

In [54]: df.loc[:, ["a", "b", "d"]] ### Selective columns based slicing
Out[54]: 
          a         b         d
0  0.806811  0.187630  0.317261
1  0.738792  0.862661  0.010177
2  0.224633  0.342579  0.375147
3  0.875262  0.151867  0.893735

In [55]: df.loc[:, "a":"c"] ### Selective label based column ranges slicing
Out[55]: 
          a         b         c
0  0.806811  0.187630  0.978159
1  0.738792  0.862661  0.580592
2  0.224633  0.342579  0.214512
3  0.875262  0.151867  0.071244

In [56]: df.iloc[:, 0:3] ### Selective index based column ranges slicing
Out[56]: 
          a         b         c
0  0.806811  0.187630  0.978159
1  0.738792  0.862661  0.580592
2  0.224633  0.342579  0.214512
3  0.875262  0.151867  0.071244 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-08-16T04:09:02.597

您可以通过将列索引列表传递给`dataFrame.ix`.

例如：

```
>>> df = pandas.DataFrame({
             'a': np.random.rand(5),
             'b': np.random.rand(5),
             'c': np.random.rand(5),
             'd': np.random.rand(5)
         })

>>> df
          a         b         c         d
0  0.705718  0.414073  0.007040  0.889579
1  0.198005  0.520747  0.827818  0.366271
2  0.974552  0.667484  0.056246  0.524306
3  0.512126  0.775926  0.837896  0.955200
4  0.793203  0.686405  0.401596  0.544421

>>> df.ix[:,[1,3]]
          b         d
0  0.414073  0.889579
1  0.520747  0.366271
2  0.667484  0.524306
3  0.775926  0.955200
4  0.686405  0.544421 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-11T15:12:40.257

.transpose() 方法将列转换为行，将行转换为列，因此您甚至可以编写

```
df.transpose().ix[3] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-22T13:53:01.843

大多数人都回答了如何从索引开始获取列。但是在某些情况下，您可能需要从中间或特定索引中选择列，您可以使用以下解决方案。

假设您有列`A`和。如果您只需要选择列，则可以使用以下代码。`B``C``A``C`

```
df = df.iloc[:, [0,2]] 
```

where`0,2`指定您只需要选择第 1 列和第 3 列。

# ruby-on-rails-3 - 何时使用文件而不是数据库来存储数据？

> ID：14941098
> 
> 赞同：0
> 
> 时间：2013-02-18T16:41:16.910
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2

我在想什么时候使用文件而不是数据库表来存储数据？

例如，如果您只有一些后端设置，则可以将它们存储在文件中。

还是最好的做法是在数据库中拥有一切？

我正在使用 Rails 作为我的 Web 应用程序的框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:43:47.483

如果您只是想设置一些要在应用程序中使用的设置，为什么不创建一个配置或初始化文件呢？

# haskell - 与分数相关的类型错误

> ID：14941104
> 
> 赞同：2
> 
> 时间：2013-02-18T16:41:33.227
> 
> 标签：haskell, types

我试图找出问题所在。似乎类型有问题，但单独使用相同的表达式可以正常工作。

这是代码：

```
a = [9, 4, 12, 0, -6, 16] :: [Int]

qsort:: [Int] -> [Int] 
qsort [] = []
qsort [x] = [x]
qsort xs = (qsort l)++(qsort r)
    where   m = (realToFrac(sum xs)) / (realToFrac(length xs))
            l = filter (<=m) xs
            r = filter (>m) xs

main::IO()
main = do
        print (show (qsort a)) 
```

它抛出：

```
main.hs:7:36:
    No instance for (Fractional Int)
      arising from a use of `/'
    Possible fix: add an instance declaration for (Fractional Int)
    In the expression: (realToFrac (sum xs)) / (realToFrac (length xs))
    In an equation for `m':
        m = realToFrac (sum xs) / (realToFrac (length xs))
    In an equation for `qsort':
        qsort xs
          = (qsort l) ++ (qsort r)
          where
              m = realToFrac (sum xs) / (realToFrac (length xs))
              l = filter (<= m) xs
              r = filter (> m) xs 
```

但这很好用：

```
a = [9, 4, 12, 0, -6, 16] :: [Int]
main::IO()
main = do
    print (show (   (realToFrac(sum a)) / (realToFrac(length a))   )) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T16:45:49.493

您的`m`定义给出了一些 type `Fractional`。但是，您将其与编译`m`器`Int`的定义进行比较`l`，`r`这会使编译器感到困惑。以下将解决问题：

```
a = [9, 4, 12, 0, -6, 16] :: [Int]

qsort:: [Int] -> [Int]
qsort [] = []
qsort [x] = [x]
qsort xs = (qsort l)++(qsort r)
    where   m = realToFrac(sum xs) / (realToFrac(length xs))
            l = filter ((<=m) . fromIntegral) xs
            r = filter ((>m) . fromIntegral) xs

main::IO()
main = do
        print (show (qsort a)) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T16:47:09.313

`realToFrac(sum xs) / (realToFrac(length xs))`确实有效，但其结果是一个小数。所以在你的代码`m`中是一个小数。但是您`m`与列表中的项目进行比较，它们是整数。由于您只能比较相同类型的值并且 Ints 不是小数，因此会导致类型错误。

要解决您的问题，您可以使用整数除法 ( `div`) 或将列表中的整数转换为小数，然后再将它们与`m`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T16:56:16.610

您可以使用 x 作为您的支点。列表模式匹配“qsort (x:xs)”在这里有很大帮助。

```
a = [9, 4, 12, 0, -6, 16] :: [Int]                                                                                    

qsort:: [Int] -> [Int]                                                                                                
qsort [] = []                                                                                                         
qsort (x:xs) = (qsort l) ++ [x] ++ (qsort r)                                                                           
    where   l = filter (<=x) xs                                                                                       
            r = filter (>x) xs                                                                                        

main::IO()                                                                                                            
main = putStrLn $ show $ qsort a   

 -- *Main> main                                                                                                           
 -- [-6,0,4,9,12,16] 
```

替代语法：[http ://hpaste.org/81793](http://hpaste.org/81793)

# jsf - 转换器在所有按钮点击时被调用

> ID：14941108
> 
> 赞同：0
> 
> 时间：2013-02-18T16:41:37.247
> 
> 标签：jsf, converter

我使用 JSF 2.0 和 Primefaces 3.4.1

以下是我的要求

我有 ah:selectOneMenu 来填充用户列表。用户是必填字段，我需要选择用户，然后单击提交按钮将用户传递给支持 bean。我在页面上还有其他按钮。我已经实现了一个自定义转换器来将选择转换为相应的用户对象模型。应该完成转换，并且只有在单击“提交”按钮时才应该将所选用户提交给支持 bean。

但是我的转换器“techLeadConverter”方法会被所有的按钮点击调用，甚至当我点击一个菜单项从页面导航时也是如此。

如何限制仅在单击提交按钮时调用转换器

以下是我的声明

## XHTML 页面

```
<h:selectOneMenu id="technicalLeads" 
    value="#{resourceMB.technicalLead}" 
    converter="#{techLeadConverter}"
    required="#{not empty param[assignResource.clientId]}"
    requiredMessage="#{bundle.TechLeadMandatory}">

   <f:selectItem itemLabel="Select Technical Lead" itemValue=""></f:selectItem>
   <f:selectItems value="#{resourceMB.technicalLeadList}" var="techLead"
      itemValue="#{techLead}"
      itemLabel="#{techLead.lastName}, #{techLead.firstName}">
   </f:selectItems>
</h:selectOneMenu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:04:02.610

将这些按钮以不同的形式放置。或者，更好的是，不要使用命令链接/按钮进行页面到页面导航，而是使用普通的链接/按钮。

# asp.net - Web.config 授权失败

> ID：14941112
> 
> 赞同：0
> 
> 时间：2013-02-18T16:41:57.357
> 
> 标签：asp.net, web-config, authorization

我的 web.config 中有

```
<location path="Admin">
    <system.web>
      <authorization>
        <allow roles="Administrator"/>
        <deny users="?"/>
      </authorization>
    </system.web>
  </location>
  <location path="Admin/Page1">
    <system.web>
      <authorization>
        <allow roles="SubAdmin"/>
      </authorization>
    </system.web>
  </location> 
```

这会正确阻止除 Admin/Page1 中的“管理员”和“子管理员”角色之外的所有人吗？

还是我必须添加`<allow roles="Administrator"/> <deny users="?"/>`到 Admin/Page1 部分​​？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:54:10.940

你可以这样使用它：

```
<allow roles="Admin"/>
<allow roles="SubAdmin"/>
<deny users="*"/> 
```

供将来参考：http: [//msdn.microsoft.com/en-us/library/8d82143t%28VS.71%29.aspx](http://msdn.microsoft.com/en-us/library/8d82143t%28VS.71%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:48:59.923

如果可能，请将 web.configs 保存在每个文件夹中，而不是保存在一个 web.config 中。

我不确定哪个角色更强大 - 管理员或子管理员。您需要将最强大的角色保留在嵌套文件夹中。

内部仅管理员文件夹

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <authorization>
      <allow roles="Administrator"/>
      <deny users="*"/>
    </authorization>
  </system.web>
</configuration> 
```

在 SubAdmin 和 Administrator 文件夹内

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <authorization>
      <allow roles="Administrator, SubAdmin"/>
      <deny users="*"/>
    </authorization>
  </system.web>
</configuration> 
```

# java - 在 Go SMS Proc 等应用程序在 Android 中读取之前删除短信

> ID：14941113
> 
> 赞同：1
> 
> 时间：2013-02-18T16:42:07.397
> 
> 标签：java, android, broadcastreceiver

我正在制作一个应用程序来过滤来自特定号码的短信，但问题是 Go SMS Pro 和 ChompSMS 等应用程序会在它们到达我的应用程序之前读取它们。我什至不知道如何在其他应用程序之前过滤消息。?

我已经尝试将接收器的优先级设置为 1000，然后设置为 Android 支持的最高整数，但 Go SMS Pro 仍然在我的应用程序之前捕获消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:45:54.563

将您的接收器设置`android:priority`为较大的值，例如`1000`（最高优先级。高于此默认值的任何内容`1000`），然后`abortBroadcast()`如果您想阻止 SMS 继续发送，请致电。

如果两个应用程序的优先级相同，那么 Android 会优先安装第一个安装的应用程序。因此，如果用户在您的应用程序之前安装 Go SMS Pro，它将在您之前接收广播。

# python - 在不添加新键的情况下更新 dict？

> ID：14941115
> 
> 赞同：12
> 
> 时间：2013-02-18T16:42:08.717
> 
> 标签：python, dictionary

什么是一个好的 1-liner（除了将其放入函数中）来实现这一点：

```
# like dict1.update(dict2) but does not add any keys from dict2
# that are not already in dict1
for k in dict1:
    if k in dict2:
        dict1[k]=dict2[k] 
```

我想这会起作用，但使用“受保护”功能：

```
[dict1.__setitem__(k, dict2[k]) for k in dict1 if k in dict2] 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-18T16:44:21.710

```
dict1.update((k, dict2[k]) for k in set(dict2).intersection(dict1)) 
```

是我如何在 Python 2.6 或更低版本中执行此操作（有关如何在更高版本中执行此操作的详细信息，请参阅）。

在另一个映射旁边，[`dict.update()`](http://docs.python.org/2/library/stdtypes.html#dict.update)也可以采用`(key, value)`元组的可迭代，我们基于两个字典的集合交集生成它（因此它们具有共同的所有键）。

演示：

```
>>> dict1 = {'foo':'bar', 'ham': 'eggs'}
>>> dict2 = {'ham': 'spam', 'bar': 'baz'}
>>> dict1.update((k, dict2[k]) for k in set(dict2).intersection(dict1))
>>> dict1
{'foo': 'bar', 'ham': 'spam'} 
```

在 python 2.7 中，您可以使用新的[Dict 视图](http://docs.python.org/2/library/stdtypes.html#dictionary-view-objects)来实现相同的效果，而无需转换为集合：

```
dict1.update((k, dict2[k]) for k in dict1.viewkeys() & dict2.viewkeys()) 
```

在 Python 3 中，dict 视图是默认视图，因此您可以将其拼写为：

```
dict1.update((k, dict2[k]) for k in dict1.keys() & dict2.keys()) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T16:44:47.217

非破坏性：

```
dict((k, dict2.get(k, v)) for k, v in dict1.items()) 
```

修改`dict1`：

```
dict1.update((k, v) for k, v in dict2.items() if k in dict1) 
```

# javascript - 文本区域内的文本对齐 IE9

> ID：14941117
> 
> 赞同：2
> 
> 时间：2013-02-18T16:42:11.580
> 
> 标签：javascript, internet-explorer, textarea, alignment

我有一个文本区域和三个按钮，可以将文本的文本对齐方式更改为左、中和右：

```
<button onClick="align('left')">Left</button>
<button onClick="align('center')">Center</button>
<button onClick="align('right')">Right</button>

function align(alignment)
{
    document.getElementById("textArea").style.textAlign = alignment;
} 
```

这在 Firefox 和 Chrome 中完美运行，但在 IE9 中不起作用。起初它看起来只是没有对齐它，但是当我再输入一些文本时，它会正确对齐所有内容。

当你按下按钮时，有没有让它对齐？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:50:27.117

哈克但有效：

```
function align(alignment)
{
    ta = document.getElementById("textArea");
    ta.style.textAlign = alignment;
    ta.value= ta.value;
} 
```

# c# - 使用 Linq 搜索实体列表中是否存在所有属性

> ID：14941120
> 
> 赞同：2
> 
> 时间：2013-02-18T16:42:18.767
> 
> 标签：c#, linq, entity-framework, predicatebuilder

我有以下实体：

```
[Table("Entities")]
public abstract class Entity { 
 public int EntityID { get; set; } 
 public string Description { get; set; }
 public virtual ICollection<Tag> Tags { get; set; }
} 
```

和标签实体：

```
public class Tag {
    public int TagID { get; set; }
    public int EntityID { get; set; }
    public string TagValue { get; set; }
} 
```

如上所述，标签**不**被重用，只是作为字符串存储。这使得确定实体是否共享标签更加困难（并且速度较慢）。

我有一个有效的搜索来返回一个实体列表，其中实体包含任何标签：

```
List<string> searchTags = new List<String> {"test1", "test2"};
entities = (_entityRepository.Entities
            .Where(o=>o.Tags.Any(f=>searchTags.Contains(f.TagValue))); 
```

现在我还需要返回一个包含列表中所有标签的实体列表。由于不能将非属性变量传递给 Contains 方法，因此我不能只用 all 反转调用的顺序，但这基本上是我想要实现的目标：

```
entities = (_entityRepository.Entities
            .Where(o=>o.Tags.All(f=>f.TagValue.Contains(searchTags))); 
```

我想我已经到了需要更正数据库模式以重用标签的地步，这在过滤标签列表中的实体时应该提供一般性能优势，但我仍然想问以下问题：

1.  我是否过于复杂化了，是否有一个简单的 Linq 语句可以完成这个，或者，
2.  这是我应该使用谓词构建器来设置我的标准的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:59:08.453

这可以这样做：

```
var query = _entityRepository.Entities.Select(e => e);
query = searchTags.Aggregate(query, (current, tag) => current.Where(e => e.Tags.Any(t => t.TagValue == tag)));
var result = query.ToList(); 
```

# javascript - 只用 regexp 获得一场比赛

> ID：14941121
> 
> 赞同：1
> 
> 时间：2013-02-18T16:42:24.690
> 
> 标签：javascript, regex, object, loops, iterator

在下面的函数中，我遍历了一个包含字符串的数组（事件）。字符串描述了从另一个网络应用程序中提取的事件（犯罪或事故），我正在做的是划分和计算不同的犯罪/事故并将它们放在一个对象中（INCIDENT_MATCHES）。

但是，一些文本字符串可能包含我搜索的几个关键字（例如“gunfire”和“battery”），但我不想要。相反，我只想计算第一个找到的单词，如果找到更多关键字，则应忽略它们。

怎么可能做到这一点？

```
var INCIDENT_MATCHES = {
    battery: /\w*(bråk)\w*|överfall|slagsmål|slogs|misshandel|misshandlad|\w*(tjuv)\w*/ig,
    burglaries: /snattade|snattare|snatta|inbrott|bestulen|stöld|\w*(tjuv)\w*/ig,
    robberies: /\w*(rån)\w*|personrån|\w*(ryckning)\w*|väskryckt*/ig,
    gunfire: /skottlossning|skjuten|sköt/ig,
    drugs: /narkotikabrott/ig,
    vandalism: /skadegörelse|klotter|\w*(klottra)\w*/ig,
    trafficAccidents: /(trafik|bil)olycka|(trafik|bil)olyckor|\w*(personbil)\w*|singelolycka|kollision|\w*(kollidera)\w*|påkörd|trafik|smitningsolycka/ig,
};

var j = 0,
incidentCounts = {},
incidentTypes = Object.keys(INCIDENT_MATCHES);

incidents.forEach(function(incident) {
    matchFound = false;

    incidentTypes.forEach(function(type) {
        if(typeof incidentCounts[type] === 'undefined') {
            incidentCounts[type] = 0;
        }
        var matchFound = incident.match(INCIDENT_MATCHES[type]);

        if(matchFound){
            matchFound = true;
            incidentCounts[type] += 1;
        }
    });

    j++;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:45:11.123

您可以`false`从“每个”处理程序返回以停止迭代。

```
 if(matchFound){
        matchFound = true;
        incidentCounts[type] += 1;
        return false;
    } 
```

*编辑*- 你会想要（我认为）在外循环结束时进行另一个测试：

```
 j++; // I don't understand what that does ...
  if (matchFound) return false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:52:47.080

我在下面找到了这个解决方案。我所做的是以下内容：

1.  我用“每个”替换了第二个 forEach 语句
2.  将“return false”放入“if(matchFound)”中
3.  添加了“else { return true; }”，以便在未找到匹配项时继续循环。

**编码：**

```
incidents[2].forEach(function(incident) {
    matchFound = false;

    incidentTypes.every(function(type) {
        if(typeof crimesPerType[type] === 'undefined') {
            crimesPerType[type] = 0;
    }
    var matchFound = incident.match(INCIDENT_MATCHES[type]);

    if(matchFound){
        crimesPerType[type] += 1;
        if (type == 'trafficAccidents') {
            incidents[3][j].push('traffic');
        }
        else {
            incidents[3][j].push('crime');
        }
        return false;
    }
    else {
        return true;
    }
}); 
```

# c - OS X sockaddr_in6 未声明

> ID：14941123
> 
> 赞同：0
> 
> 时间：2013-02-18T16:42:35.347
> 
> 标签：c, macos, ipv6

我正在尝试在 OS X 上编译一个使用 IPv6 套接字的应用程序，但它失败并显示错误消息：

```
error: ‘sockaddr_in6’ undeclared (first use in this function) 
```

[我已经阅读了关于SO](https://stackoverflow.com/questions/3443836/sockaddr-in6-not-declared)的类似问题，但包括 sys/types 和 netinet/in 并没有解决问题。我只是用“gcc -o foo foo.c”编译，我需要像“-lnetinet”这样的东西吗？（我试过了，但 -lnetinet 也没有帮助）

简单的例子：

```
#include <sys/types.h>
#include <netinet/in.h>

int main(int argc, char **argv) {

  sockaddr_in6 addr;
  return 0;
} 
```

我已经搜索了相应的文件，我得到了“/usr/include/netinet/in.h”，其中包括“netinet6/in6.h”，其中缺少“sockaddr_in6”-struct。我错过了什么？

谢谢你的帮助！

问题解决了，我在“sockaddr_in6”前面缺少一个“struct”标签：

```
struct sockaddr_in6 addr; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T04:06:14.697

您正在使用 C 语言，因此您需要使用`struct`：

```
struct sockaddr_in6 addr; 
```

# java - 从 JSP 上传文件时出现 java.io.FileNotFoundException

> ID：14941129
> 
> 赞同：0
> 
> 时间：2013-02-18T16:42:46.527
> 
> 标签：java, ajax, file, upload

我在我的应用程序中编写了 AJAX 文件上传功能。从我的笔记本电脑上运行它时效果很好。当我使用相同的应用程序尝试完全相同的文件，但部署在 jBoss 服务器上时，我得到以下异常：

```
2013-02-18 11:30:02,796 ERROR [STDERR] java.io.FileNotFoundException: C:\Users\MyUser\Desktop\TestFile.pdf (The system cannot find the file specified). 
```

获取文件数据方法：

```
private byte[] getFileData(File file) {

    FileInputStream fileInputStream = null;
    byte[] bytFileData = null;

    try {
        fileInputStream = new FileInputStream(file);
    } catch (FileNotFoundException e1) {
        e1.printStackTrace();
    }

    if (fileInputStream != null) {
        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
        byte[] bytBuffer = new byte[1024];

        try {
            for (int readNum; (readNum = fileInputStream.read(bytBuffer)) != -1;) {
                byteArrayOutputStream.write(bytBuffer, 0, readNum);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }

        bytFileData = byteArrayOutputStream.toByteArray();
    }

    return bytFileData;
} 
```

在变量中获取文件内容（通过上述方法）：

```
byte[] bytFileData = this.getFileData(file); 
```

制作文件：

```
private boolean makeFile(File folderToMake, File fileToMake, byte[] bytFileData) {

    Boolean booSuccess = false;
    FileOutputStream fileOutputStream = null;

    try {

        if (!folderToMake.exists()) {
            folderToMake.mkdirs();
        }

        if (!fileToMake.exists()) {

            if (fileToMake.createNewFile() == true) {

                booSuccess = true;

                fileOutputStream = new FileOutputStream(fileToMake);

                fileOutputStream.write(bytFileData);
                fileOutputStream.flush();
                fileOutputStream.close();
            }
        }

    } catch (Exception e) {
        e.printStackTrace();
        booSuccess = false;
    }

    return booSuccess;
} 
```

任何想法？

谢谢

查尔斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:50:34.557

似乎您只是将文件路径作为请求的一部分传递给服务器，而不是实际上传文件，然后尝试使用该文件路径来访问文件。

这将在您的笔记本电脑上运行，因为代码在本地运行时可以访问*您的*文件系统并且能够找到该文件。它无法部署在服务器上，因为它是一台完全独立的机器，因此无法访问您的文件系统。

您需要修改客户端 (AJAX) 代码以实际上传文件，然后修改服务器端代码以使用该上传文件。请注意，AJAX 文件上传通常是不可能的 - 有一些框架插件（例如 jQuery）使用变通方法提供此功能。

我不是 100%，但我认为使用 HTML5 功能可以正确上传 AJAX 文件，但现在浏览器对此的支持可能会很差。

# ios - 使用 NSURLConnection 输入登录名和密码

> ID：14941137
> 
> 赞同：2
> 
> 时间：2013-02-18T16:43:12.557
> 
> 标签：ios, authentication, login, nsurlconnection

我是iOS应用程序开发的新手。我需要访问从远程 XML 文件加载的不同 url，其中一些 url 需要 http 基本身份验证。

使用 NSURLCredential 进行身份验证，它可以正常工作。现在，我想要求用户输入他们的凭据。当连接失败时，我使用 setAlertViewStyle:UIAlertViewStyleLoginAndPasswordInput 可视化界面登录 UIAlertView。

此时，我使用 textFieldAtIndex: 0 和 1 验证用户输入的对应用户名和密码，但我可以将它们用于与 NSURLConnection 的新连接尝试。

有人能帮我吗？

这是我的代码：

```
- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
    if ([challenge previousFailureCount] == 0)
    {
        NSLog(@"received authentication challenge");

        NSURLCredential *newCredential;
        newCredential=[NSURLCredential credentialWithUser:@""
                                                 password:@""
                                              persistence:NSURLCredentialPersistenceForSession];

        NSLog(@"credential created");

        [[challenge sender] useCredential:newCredential forAuthenticationChallenge:challenge];

        NSLog(@"responded to authentication challenge");

    }
    else
    {
        NSLog(@"previous authentication failure");

        UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Login"
                                                          message:@"Enter your username & password"
                                                         delegate:self
                                                cancelButtonTitle:@"Cancel"
                                                otherButtonTitles:@"Login", nil];

        [message setAlertViewStyle:UIAlertViewStyleLoginAndPasswordInput];

        [message show];
    }
}

- (BOOL)alertViewShouldEnableFirstOtherButton:(UIAlertView *)alertView
{
    NSString *inputText = [[alertView textFieldAtIndex:0] text];
    if( [inputText length] >= 1 )
    {
        return YES;
    }
    else
    {
        return NO;
    }
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];
    if([title isEqualToString:@"Login"])
    {
        UITextField *username = [alertView textFieldAtIndex:0];
        UITextField *password = [alertView textFieldAtIndex:1];
        NSLog(@"Username: %@\npassword: %@", username.text, password.text);
        if ([username.text isEqualToString:@"myname"] && [password.text isEqualToString:@"1234"])
        NSLog(@"Success");
    }
    [xmlDataBuffer setLength:0];
} 
```

# c# - 需要在代码中解决此异常

> ID：14941140
> 
> 赞同：0
> 
> 时间：2013-02-18T16:43:30.227
> 
> 标签：c#, entity-framework

异常消息：

```
The number of members in the conceptual type 'Model' does not match with the number of members on the object side type 'Model'. Make sure the number of members are the same. 
```

我不确定我需要发布什么代码，因为它有很多内容。我正在使用 MEF 或我喜欢称之为“魔术”的东西，我对它不是很熟悉。

可能的相关代码：

```
public ObjectSet<BasicAccount> BasicAccounts
    {
        get
        {
            if ((_BasicAccounts == null))
            {
                **_BasicAccounts = base.CreateObjectSet<BasicAccount>("BasicAccounts");**
            }
            return _BasicAccounts;
        }
    } 
```

周围有星星的线是异常发生的地方。

这是在这些代码行在另一个类中执行后抛出的：

```
AccountRepository acctRep = new AccountRepository();
ObservableCollection<BasicAccount> Accounts = new ObservableCollection<BasicAccount>(acctRep.GetBasicAccountList().Cast<BasicAccount>()); 
```

如果您需要查看更多代码，请告诉我，我会尽快发布。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:59:24.243

您好此错误意味着生成的代表您的模型的类与您的模型定义 xml 不同步。尝试**重新生成**它们（通过在 EF 设计器中移动一些东西或右键单击 edmx 文件并选择**Run Custom Tool**）。我希望这将有所帮助。

# c# - 如何解决映射中的循环依赖关系？

> ID：14941141
> 
> 赞同：0
> 
> 时间：2013-02-18T16:43:30.950
> 
> 标签：c#, nhibernate, hbm

我有 2 个具有循环依赖关系的表。A`Title`有`Element`s，然后每个都`Element`指向`Title`路径中的下一个。

但是，当我调用`BuildSessionFactory()`我的实例时，`NHibernate.Cfg.Configuration`我收到以下异常：

> 来自表 Element 的关联引用了一个未映射的类：ElementDAO

我相信这是循环依赖的结果（它不能首先映射Title，因为它引用了Element，并且它不能在不知道Title 的情况下映射Element）。

**问题：** 如何组合两个映射以解决循环依赖关系？

*相关数据（和代码片段）如下：*

**标题**

*   ID（主键）
*   姓名

**元素**

*   id_Title（外键）
*   姓名
*   id_Title_Child（外键）

**它们代表如下数据结构：** ![图表显示表的关系](../Images/208144ff5cf71c02422aeed740b072b5.png)

**我的代码：**

标题DAO：

```
public class TitleDAO{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual ICollection<ElementDAO> Elements { get; set; }
} 
```

TitleDAO 映射：

```
<class name="TitleDAO" table="Title" lazy="true">
    <id name="Id">
      <generator class="identity"/>
    </id>
    <property name="Name"/>
    <set name="Elements" table="Element" lazy="true">
      <key column="id_Title"/>
      <many-to-many class="ElementDAO"/>
    </set>
</class> 
```

元素道：

```
public class ElementDAO{
    public virtual string Name { get; set; }
    public virtual TitleDAO Child { get; set; }
} 
```

ElementDAO 映射：

```
<class name="ElementDAO" table="Element" lazy="true">   
    <property name="Name"/>
    <many-to-one name="Child" class="TitleDAO" column="id_Title_Child"/>
</class> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:56:40.833

据我了解你的模型，你有一个从标题到元素的一对多关系，但它被映射为多对多。将其更改为：

```
<class name="TitleDAO" table="Title" lazy="true">
    <id name="Id">
      <generator class="identity"/>
    </id>
    <property name="Name"/>
    <set name="Elements" table="Element" lazy="true">
      <key column="id_Title"/>
      <!-- change this to one-to-many -->
      <one-to-many class="ElementDAO"/>
    </set>
</class> 
```

# codeigniter - Codeigniter JOIN 不返回数据库结果

> ID：14941146
> 
> 赞同：0
> 
> 时间：2013-02-18T16:43:59.093
> 
> 标签：codeigniter

Codeigniter 不返回数据库结果。数据库表“类别”和“子类别”

DB舍玛：

```
Categor
-----------------------------
ID     Name 
----------------------------
1      Fishing
2      Hunting
3      Test Category

Sub_category
-----------------------------
ID     cat_id      name
----------------------------
1      1          Fishing rod
2      2          Hunting ammunition
3      3          Test sub category 
```

我想列出某个类别的所有子类别。当 some1 单击钓鱼类别时，我想显示钓鱼的所有子类别。我的代码是这样的：

```
 Controller:
       public function get_sub_category($id = 0)
        {
            $this->load->model('front_m');    
            $data['sub_cat'] = $this->front_m->show_sub_cat($id);          
            $this->template->set_theme('zend')->set_layout('front.html')
                           ->build('sub_category',$data); 
    }
  MODEL:

    public function show_sub_cat($id=0)
{
    $this->query = $this->db->select('*');
    $this->query = $this->db->from('category');
            $this->query = $this->db->where('id='.$id');
    $this->query = $this->db->join('sub_category', 'sub_category.cat_id=category.id');
    $this->query = $this->db->query('SELECT * FROM category');
    $this->query = $this->db->get();

    if ($this->query->num_rows() > 0) {
        $this->query->result();
    }
    return $this->query ;       
} 
```

出了什么问题我一直有数据库错误或空白页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:03:01.200

```
$sql_query  ="SELECT 
                c.name,
                sc.*
             FROM Category as c
             LEFT JOIN Sub_category as sc ON sc.cat_id = c.ID
             WHERE c.ID = $id";
return $this->db->query($sql_query)->result(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:56:00.957

根据你的问题，这听起来像是你想多了，但我也有点困惑。我听到的是：如何根据点击主类别 ID 的人获取子类别？如果是这种情况，那么您将其变得比需要的复杂得多。

模型

```
public function show_sub_cat($catid=NULL)
{
$result = $this->db->get_where('sub_category',array('cat_id'=>$catid));
if ($result->num_rows()>0)
{
return $result->result();
}

} 
```

# azure - 使用 Windows Azure 共享网站托管根域 (mydomain.com)？

> ID：14941150
> 
> 赞同：5
> 
> 时间：2013-02-18T16:44:19.037
> 
> 标签：azure, dns

我一直在努力尝试在 Azure 网站中托管我自己的域，例如 mydomain.com。

我升级/缩放以将我的设置更改为“共享”。

我将 CNAME 记录从 www.mydomain.com 添加到 mydomain.azurewebsites.net。

我在“管理域”下将 www.mydomain.com 添加到我的 azure 网站，它允许我成功添加它。

我能够成功浏览到带有 www.mydomain.com 的网站。

我将 mydomain.com 的 A 记录更改为指向 Azure 网站的“管理域”部分下列出的 IP 地址。

CNAME 和 A 记录已根据我的机器和 centralops.net DNS 查找工具上的测试进行传播。

如果我浏览到 mydomain.com，我会收到 404。www.mydomain.com 会按预期工作。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T20:34:26.897

一步步。这对我有用。

**1 -**在您的 DNS 注册商中创建一个 CNAME 记录，如下所示。

**名称 =** awverify.mydomain.com

**值 =** awverify.mydomain.azurewebsites.net

**TTL =** 86400

**2 -**在 Azure 面板中，将 mydomain.com 添加到您的自定义域。它应该显示绿色检查。

**3 -**返回您的 DNS 注册商的网站，并使用 Microsoft 在 Azure 门户中提供给您的 IP 为您的自定义域添加一条 A 记录。

**名称 =** mydomain.com

**值 =** 64.49.121.33

**TTL =** 7200

[更多信息在这里。](http://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns-web-site/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:53:43.540

我可以想到两个选择：

a) 需要将 Azure Web 服务器配置为使用 www.mydomain.com 和 mydomain.com 浏览您的站点。也许您在“管理域”中只配置了一项

b) mydomain.azurewebsites.net。解析到与 mydomain.com 不同的 IP（您在 mydomain.com 中添加的 A 记录是错误的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T20:22:03.827

您需要与允许您将 A 记录转发到 DNS 的 DNS 提供商合作（Go Daddy 提供此选项） - 即 www.mydomain.com 指向 mydomain.azurewebsites.net 并且 mydomain.com 被转发到 www.mydomain .com

# tomcat - GCM 在服务器发送消息时出错

> ID：14941156
> 
> 赞同：0
> 
> 时间：2013-02-18T16:44:31.580
> 
> 标签：tomcat, push-notification, api-key, google-cloud-messaging

尝试从 GCM 演示服务器发送消息时出现以下错误。该代码与 developer.android.com/google/gcm/demo.html 提供的代码相同，并且在 Tomcat 上运行。设备在服务器上注册并显示“1 个设备已注册！”。但是当按下“发送消息”按钮时出现以下错误。（我已将从[https://code.google.com/apis/console/](https://code.google.com/apis/console/)收到的 api 密钥放在“api.key”文件中。）

Apache Tomcat/7.0.35 - 错误报告

# HTTP 状态 500 - HTTP 状态代码：401

**类型**异常报告

**消息**HTTP 状态码：401

**描述**服务器遇到一个内部错误，阻止它完成这个请求。

**例外**

```
com.google.android.gcm.server.InvalidRequestException：HTTP 状态代码：401
    com.google.android.gcm.server.Sender.sendNoRetry(Sender.java:177)
    com.google.android.gcm.server.Sender.send(Sender.java:121)
    com.google.android.gcm.demo.server.SendAllMessagesServlet.doPost(SendAllMessagesServlet.java:82)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)

```

**note** Apache Tomcat/7.0.35 日志中提供了根本原因的完整堆栈跟踪。

### Apache Tomcat/7.0.35

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T13:04:50.130

只需将 gcm-demo.war 复制到 apache webapps 文件夹中，然后运行。它肯定会运行。

# iphone - 如何在方法中插入 NSTimer？

> ID：14941157
> 
> 赞同：0
> 
> 时间：2013-02-18T16:44:32.527
> 
> 标签：iphone, ios, objective-c, nstimer

我想在一个方法中插入一个 NSTimer 延迟，并且想知道如何去做。我已经加粗了我想放置延迟计时器的位置。

到目前为止，这是我的代码：

```
- (void) buttonPressed:(UIButton*) sender {

for(int i = 0;i < [categoryBtnImages count]; i++)
{
    UIButton *but = (UIButton *)[catButtonArray objectAtIndex:i];
    if(but != sender)
    {
        [but setImage:[UIImage imageNamed:[categoryBtnImages objectAtIndex:i]] forState:UIControlStateNormal];
       // but.selected = !but.selected;

    }
}

buttonCat = (UIButton *)sender;
int tagOfButton = buttonCat.tag - 2;

if (tagOfButton == -2 ){
    tagOfButton = 8;
}
[buttonCat setImage:[UIImage imageNamed:[categoryBtnImagesSel objectAtIndex:tagOfButton]] forState:UIControlStateNormal]; 
```

**我想把延迟放在这里**然后运行其余的代码，但都来自这个方法。

```
if ([sender.titleLabel.text isEqualToString:@"Button 0"]) {
    [self foodCatSort:nil];
    [self.tableView reloadData];

}
if ([sender.titleLabel.text isEqualToString:@"Button 1"]) {
    [self healthCatSort:nil];
    [self.tableView reloadData];

}
if ([sender.titleLabel.text isEqualToString:@"Button 2"]) {
    [self shoppingCatSort:nil];
    [self.tableView reloadData];

} 
```

}

仅供参考，我想这样做的原因是因为按下了一个按钮，它重新加载了表格并且按钮状态图像发生了变化。我希望用户先看到 uibutton 图像更改，然后重新加载表格。我在想延迟会解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:50:58.837

如果您只需要延迟，则不需要`NSTimer`.

改为使用`performselector: withObject: afterDelay:`。

像这样的东西：

```
 [self performSelector:@selector(yourDelayedMethod) withObject:nil afterDelay:2]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:44:24.230

我认为您坚持将两半作为同一方法的一部分的原因是为了访问局部变量。这实际上是可能的，只是没有`NSTimer`. 要将您想要延迟的代码完全保持在与原始方法相同的范围内，您可以使用`dispatch_after()`：

```
[buttonCat setImage:[UIImage imageNamed:[categoryBtnImagesSel objectAtIndex:tagOfButton]] forState:UIControlStateNormal];

dispatch_time_t delay = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(0.75 * NSEC_PER_SEC));
dispatch_after(delay, dispatch_get_main_queue(), ^(void){

    if ([sender.titleLabel.text isEqualToString:@"Button 0"]) {
        [self foodCatSort:nil];
        [self.tableView reloadData];
    }
    if ([sender.titleLabel.text isEqualToString:@"Button 1"]) {
        [self healthCatSort:nil];
        [self.tableView reloadData];

    }
    if ([sender.titleLabel.text isEqualToString:@"Button 2"]) {
        [self shoppingCatSort:nil];
        [self.tableView reloadData];

    }
}); 
```

您可能还应该考虑为此使用某种动画，因为 UI 效果之间的任意时间延迟对用户来说可能看起来很尴尬。

# matlab - matlab中的textread解析问题

> ID：14941159
> 
> 赞同：0
> 
> 时间：2013-02-18T16:44:39.067
> 
> 标签：matlab

给定：

```
v = textread(strPathFilename, '%s', 'delimiter', ' ', 'endofline', '\r\n'); 
```

我想将“v”作为文件中的列的 cellArray 返回。

但相反，我得到一列由空格解析的所有内容。

期望：

```
file:
1 2 3 4 CR
5 6 7 8 CR
9 10 11 12 CR

v{1}:
1, 5, 9

v{2}:
2, 6, 10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:58:39.487

您可以使用`textscan`来实现这一点：

```
fid = fopen(strPathFilename,'r')
v = textscan(fid, '%d%d%d%d', 'delimiter', ' ', 'endofline', '\r\n')
fclose(fid) 
```

这导致

```
v = 

    [3x1 int32]    [3x1 int32]    [3x1 int32]    [3x1 int32] 
```

每个单元格包含一列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:05:11.627

这个怎么样：

```
C = textscan(fid,'%f %f %f %f %s','Delimiter','\n'); 
```

我希望这有帮助。

# asp.net-mvc-2 - 如何在 asp.net mvc 2 中绑定到不在我的模型中的类？

> ID：14941161
> 
> 赞同：0
> 
> 时间：2013-02-18T16:44:43.473
> 
> 标签：asp.net-mvc-2, binding

通常当我设计一个表单时，我期望的数据是页面视图模型的一部分，我可以将类放在控制器方法中并且绑定工作。

但是，我在母版页的部分视图中添加了一个表单，因此它并不特定于任何一个视图模型。我尝试确保表单字段的 ID 与通常自动生成的 ID 匹配，但在我的控制器方法中对象值始终为空。

这是我的母版页的部分视图的片段：

```
 <tr>
                <td >Current password:</td>
                <td><%= Html.Password("PasswordChange.OriginalPassword", "", new RouteValueDictionary { { "class", "required remote" } })%></td>
            </tr>            
            <tr>
                <td >New password:</td>
                <td><%= Html.Password("PasswordChange.NewPassword", "", new RouteValueDictionary { { "class", "required remote" } })%></td>
            </tr> 
```

如您所见，可以想象，PasswordChange 不是我所有视图模型的一部分（肯定没有必要从一个公共基础继承我的所有视图模型才能使用此表单？）。

我的控制器方法如下所示：

```
[HttpPost]
        public ActionResult ChangePassword(PasswordChange PasswordChange)
        { 
```

我点击了该方法，但 PasswordChange.OriginalPassword 和 PasswordChange.NewPassword 始终为空。

我认为有一些简单的方法可以做到这一点，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:02:59.883

去掉前缀：

```
<tr>
    <td>Current password:</td>
    <td><%= Html.Password("OriginalPassword", "", new RouteValueDictionary { { "class", "required remote" } })%></td>
</tr>            
<tr>
    <td >New password:</td>
    <td><%= Html.Password("NewPassword", "", new RouteValueDictionary { { "class", "required remote" } })%></td>
</tr> 
```

或者如果你想保留一个前缀，请确保你定义了这个前缀：

```
[HttpPost]
public ActionResult ChangePassword(
    [Bind(Prefix = "PasswordChange")] PasswordChange model
)
{
    ...
} 
```

顺便说一句，您也可以考虑使用子操作：

```
public class PasswordChangeController: Controller
{
    [ChildActionOnly]
    public ActionResult Index()
    {
        var model = new PasswordChange();
        return PartialView(model);
    }
} 
```

然后在您的母版页中，而不是呈现部分，呈现子操作：

```
<% Html.RenderAction("Index", "PasswordChange"); %> 
```

当然，现在您将拥有一个强类型`~/Views/PasswordChange/Index.ascx`部分，您可以在其中生成表单并使用强类型版本的助手。

有关子操作的更多信息，您可以查看 Phil Haack[`blog post`](http://haacked.com/archive/2009/11/17/aspnetmvc2-render-action.aspx)关于此主题的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:04:41.777

我的 PasswordChange 类的成员没有设置为公开的。

@%$#$^#%&%

从

```
public class PasswordChange
    {
        public OriginalPassword { get; set; }
        public NewPassword { get; set; }
    } 
```

至

```
public class PasswordChange
    {
        public string OriginalPassword { get; set; }
        public string NewPassword { get; set; }
    } 
```

# java - 返回 JSONObject 时浏览器中的空对象

> ID：14941163
> 
> 赞同：1
> 
> 时间：2013-02-18T16:44:43.997
> 
> 标签：java, json, rest

我有这个方法：

```
@GET
@Path("/myservice")
@Produces(MediaType.APPLICATION_JSON)
public Response mysercice() {

   boolean userExists = false;
   CacheControl cacheControl = new CacheControl();
   cacheControl.setNoCache(true);
   cacheControl.setNoStore(true);

   JSONObject jsonObject = new JSONObject();
   jsonObject.put("userExists", userExists);
   return Response.ok(jsonObject, MediaType.APPLICATION_JSON).cacheControl(cacheControl).build();

} 
```

在浏览器中访问方法的url时，得到{}，表示对象为空。所以，我尝试使用：

```
return Response.ok(jsonObject.toString(), MediaType.APPLICATION_JSON).cacheControl(cacheControl).build(); 
```

所以，我进入浏览器 {"userExists" : false} **但我不明白为什么在简单地返回 JSONObject 时，我们在浏览器中得到一个空对象。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:57:51.283

大多数 JAX-RS 实现都带有用于将响应实体映射到 JSON 的提供程序。所以当你写：

```
return Response.ok(jsonObject, MediaType.APPLICATION_JSON).build(); 
```

您基本上是在请求 JAX-RS 提供程序`JSONObject`为您编组为 JSON。唯一的问题是它`JSONObject`并不是真的要以这种方式序列化。相反，它旨在用于逐步构建 JSON 表示，然后将该表示转换为 JSON 字符串值。你有两个选择：

1.  创建一个 POJO，其中包含您要发送回客户端的所有字段。在您的方法中返回此 POJO，它将自动转换为 JSON (`return Response.ok(myPojo, MediaType.APPLICATION_JSON).build()

2.  直接将 JSON 数据作为字符串返回（您已经在示例中执行了该操作）。

# selenium - 我在哪里可以找到 Selenium Grid 支持的浏览器（和版本）的最新列表？

> ID：14941168
> 
> 赞同：0
> 
> 时间：2013-02-18T16:44:50.380
> 
> 标签：selenium, grid, selenium-webdriver

我想通过使用最受支持的 Web 浏览器版本来最大化我的网格的稳定性。我可以在[SeleniumHQ](http://docs.seleniumhq.org/docs/01_introducing_selenium.jsp#supported-browsers-and-platforms)网站上找到浏览器列表……但这似乎已经过时了，例如 Firefox 7。

我错过了什么吗？

非常感谢您的建议，亲切的问候，卢克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:52:20.877

该列表虽然已过时，但通常是正确的。

您可能找不到更新的列表（因为该网站并不经常更新），但是我刚刚从 Selenium 邮件列表之一中抓取了这些信息：

1.  Firefox：最早的 ESR 版本及更高版本，**目前**是 Firefox 10 及更高版本。
2.  IE：6 及以上。
3.  铬：12 及以上

还必须说以下两点：

如果您在版本号（旧版本的浏览器）下降时可能会遇到奇怪的问题，请不要太惊讶。

由于 Firefox 有一个快速的发布时间表，您最终可能会发现最新版本的 Firefox 与 Selenium 完全不兼容。这可以通过完全禁用 Firefox 的自动更新来抵消（您可能会争辩说，该用户可能不会立即更新，因此您的 UI 测试可能*不一定*需要针对最新版本运行）。

# wpf - 未显示的模块外部视图

> ID：14941173
> 
> 赞同：0
> 
> 时间：2013-02-18T16:44:59.063
> 
> 标签：wpf, caliburn.micro

我正在开发一个 WPF 应用程序，该应用程序将其模块从 dll 作为惰性屏幕加载到 TransitionContentControl 中。遵循标准命名约定时，模块中 Viewmodel 的视图会正确显示。但是，我有两个问题：

1）模块本身使用外部“小部件”，带有从另一个 dll 加载的视图的屏幕。

```
[ImportMany(typeof(IWidget), AllowRecomposition = true)]
        public IEnumerable<ExportFactory<IWidget, IWidgetMetadata>> _widgets { get; set; }

<ContentControl x:Name="Navigator" cal:View.Model="{Binding Navigator}"/> 
```

属性“Navigator”被调用，并且在第一个实例中没有找到视图。但随后它被第二次调用并且视图被检测到，因为我可以看到小部件视图模型有一个附加视图（调用 OnViewAttached）到它们（ViewAware 类），视图本身也有 ViewModel 作为它的 DataContext。但是，它们没有在最后显示；我也认识到从未调用过“OnViewLoaded”，而是视图“找不到视图......”。问题出在哪里？

我使用了一个类似的原型应用程序并添加了产生问题的 Widgets 项目，但是 Navigator 属性在这里只调用一次。输出是相同的，但是没有找到视图。

[关联](https://dl.dropbox.com/u/7087191/Caliburn-Composite-Prototype-master.rar)

2）另一个问题是“cal：View.Context”似乎在模块中不起作用，因此View文件夹中的子文件夹似乎没有得到解决。

/帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:27:05.027

`AssemblySource`CM 正在使用其注册表寻找匹配的视图候选者。默认情况下，它包含所有类型的启动程序集。

在您的情况下，程序集是松散耦合和动态加载的，CM 很可能找不到它们。

加载程序集后立即尝试`AssemblySource.Instance.Add(yourAssembly);`，这应该可以解决您的问题。

顺便说一句：为什么在您的示例中使用基于约定**和**显式的 CM ViewModel 绑定？

# jquery-plugins - AngularJS 中的 jQuery 插件分栏器

> ID：14941176
> 
> 赞同：0
> 
> 时间：2013-02-18T16:45:10.340
> 
> 标签：jquery-plugins, angularjs, angularjs-directive

我还是 AngularJS 指令的新手，现在我正在尝试使用 columnize 插件但没有成功。[这个](https://stackoverflow.com/a/13386804/931340)答案是一个好的开始，但不能解决我的问题，因为`Categories.get()`从服务器异步获取数据并且设置超时似乎根本不是解决方案。

```
<div columnize>
    <ul>
        <li ng-repeat="data in Categories.get()">
            <a ng-href="{{ data.uri }}">{{ data.name }}</a>
            <ul>
                <li ng-repeat="data in data.categories" ng-include="'list.html'"></li>
            </ul>
        </li>
    </ul>
</div> 
```

*编辑：*分类服务。

```
app.factory('Categories',function ($http) {
    var categories = [],
        URL = '/categories';
    if (categories.length == 0) {
        $http.get(URL).success(function (data) {
            categories = data;
        })
    }
    return {
        get: function () {
            return categories;
        },
        ....
    }; 
```

根据我的数据来源，如何使用 columnize jQuery 插件制作 columnize 指令？

# javascript - 如何在 JavaScript 中映射多边形

> ID：14941179
> 
> 赞同：0
> 
> 时间：2013-02-18T16:45:40.050
> 
> 标签：javascript, canvas, mapping, polygon

请问你能帮我吗？我正在寻找一种方法，如何使用图像文件（.png 或 .jpg）在画布中映射多边形，但我很困惑，我不知道该怎么做......你能告诉我或给教程的链接如何在画布中用图像映射多边形？非常感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T21:13:42.887

好的，我想我现在明白你的问题了。

您想将文本绘制成弯曲的路径...

好消息/坏消息：

Canvas**无法**直接执行此操作。

但是，您**可以**使用 Html SVG 来执行此操作。

您可以使用像 Inkscape 这样的免费程序来设计您的徽标。

然后将其保存为 SVG 格式 (myLogo.svg)。

然后你可以像这样将它加载到画布中：

```
var canvas=document.getElementById("canvas");
var ctx=canvas.getContext("2d");
var img=new Image();
img.onload=function(){
    ctx.drawImage(img,0,0);
}
img.src="http://mySite.com/myLogo.svg"; 
```

这是您可以根据需要创建的 SVG 类型的快速演示。

这是一个小提琴：http: [//jsfiddle.net/m1erickson/v4EX3/](http://jsfiddle.net/m1erickson/v4EX3/)

```
<!doctype html>
<html>
<head>
    <style>
        body{ background-color: ivory; }
        div{float:left;}
    </style>
</head>

<body>
<div>
<svg viewBox = "0 0 200 120">
     <defs>
         <path id = "curvedPath" d = "M 10,90 Q 100,15 200,70 Q 340,140 400,30"/>
     </defs>
     <g fill = "white">
         <use x = "0" y = "0" xlink:href = "#curvedPath" stroke = "black" stroke-width="40" fill = "none"/>
         <text font-size = "20">
             <textPath xlink:href = "#curvedPath">
                Use SVG to put your text on a curved path like this!
            </textPath>
         </text>
     </g>
 </svg>
</div>
</body>
</html> 
```

# ios - 我们可以在 iOS 模拟器上模拟 3fingers 或 4fingers tap 吗？

> ID：14941184
> 
> 赞同：2
> 
> 时间：2013-02-18T16:45:52.130
> 
> 标签：ios, ios-simulator

我的应用程序需要同时点击 3 或 4 个手指，我需要模拟它。

我们可以在模拟器上模拟还是在真实设备上进行测试？

感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:52:59.293

为此，您必须在真实设备上进行测试。模拟器仅执行 1 次手指点击/滑动或 2 次手指捏合/缩放。

还有很多其他差​​异，最终您必须在真实设备上进行测试。

# jquery - jQuery - 检查多个子输入是否有值

> ID：14941187
> 
> 赞同：1
> 
> 时间：2013-02-18T16:46:01.840
> 
> 标签：jquery

鉴于此 div：

```
<div id="addActor1">
    <select type="select" id="ddlSelectActor1" class="selectActor">

    </select><br />
    <br />
    <p class="newActor">
        <label id="lblAddActor1FirstName" for="txtAddActor1FirstName">First Name: </label>
        <input type="text" id="txtAddActor1FirstName" size="20" />
        <label id="lblAddActor1LastName" for="txtAddActor1LastName">Last Name: </label>
        <input type="text" id="txtAddActor1LastName" size="20" />
    </p>
</div> 
```

When a particular option in the select (which is populated in js file) is selected, I need to check if either of the inputs has anything entered in them.

我尝试了以下和类似的方法，但无法完全弄清楚：

```
$('#addActorsDialog select.selectActor').each(function() {
    var empty = true;

    // This gives me js error in console: "Uncaught Error: Syntax error, unrecognized expression: p input:nth-child(2)]"
    console.log('p html: ' + $(this).parent().find('p input:nth-child(2)]').text());

    if ($(this).val() !== '0' ||
            ($(this).val() === 'a'
                // || [if textboxes are empty]
                )
            ) { empty = false; }
    //...
}); 
```

如何在此处检查任一输入是否有值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T16:48:01.170

我认为你需要删除`]`

`find('p input:nth-child(2)' )`

并在此处检查任一输入是否具有值，您可以执行以下操作：

```
var emptyInputs = $(this).parent().find('p input[type="text"][value!=""]');

if(emptyInputs.length > 0) {
   empty = false;
} else {
   empty = true;
} 
```

或者

```
var emptyInputs = $(this).parent().find('p input[type="text"]').filter(function() {
                       return $.trim( this.value ).length > 0;
                  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:48:45.127

尝试这个：

```
console.log('p html: ' + $(this).parent().find('p input:nth-child(2)')[0].text()); 
```

这将为您提供返回的列表中第一个元素的文本值`find`。

# jenkins - Jenkins 扩展电子邮件通知 - 电子邮件内容作为附件

> ID：14941188
> 
> 赞同：1
> 
> 时间：2013-02-18T16:46:08.027
> 
> 标签：jenkins, jenkins-plugins, email-ext

使用 Jenkins 1.499 和 2.25 版的 Jenkins 电子邮件扩展插件。发送电子邮件时，电子邮件的内容会显示为通知的附件，而不是电子邮件的正文。事实上，电子邮件的正文是空白的。更改电子邮件的内容类型无效。我们使用 Exchange/Outlook，这可能是问题所在吗？在邮件正文中获取电子邮件内容的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:21:46.263

我认为这可能与您在 Exchange 和/或 Outlook 中的垃圾邮件设置有关

对我来说，当我在 Outlook 中收到第一封 Jenkins 电子邮件时，我必须单击警告行（就在电子邮件标题上方）并选择“将发件人添加到安全发件人列表”

# c# - 使用 Servicestack.Text 进行 XML 反序列化

> ID：14941190
> 
> 赞同：9
> 
> 时间：2013-02-18T16:46:13.647
> 
> 标签：c#, servicestack, xml-deserialization

我正在学习[Servicestack.Text](https://github.com/ServiceStack/ServiceStack.Text)库，因为它具有一些最好的功能。我正在尝试将 XML 反序列化为我的 DTO 之一，如下所示；

**C# 代码：** [此处带有控制台应用程序的相关代码]

```
class Program
    {
        static void Main(string[] args)
        {
            string str = "http://static.cricinfo.com/rss/livescores.xml";
            WebClient w = new WebClient();
            string xml = w.DownloadString(str);
            Response rss = xml.FromXml<Response>();
            foreach (var item in rss.rss.Channel.item)
            {
                Console.WriteLine(item.title);
            }
            Console.Read();
        }
    } 
```

您可以在`str`[Given in the program] 处浏览 XML 文件。我已经为反序列化准备了 DTO。它们如下：

```
public  class Response
{
   public RSS rss { get; set; }
}

public class RSS
{
   public string Version { get; set; }
   public ChannelClass Channel { get; set; }
}

public class ChannelClass
{
   public string title { get; set; }
   public string ttl { get; set; }
   public string description { get; set; }
   public string link { get; set; }
   public string copyright { get; set; }
   public string language { get; set; }
   public string pubDate { get; set; }
   public List<ItemClass> item { get; set; }
}

public class ItemClass
{
   public string title { get; set; }
   public string link { get; set; }
   public string description { get; set; }
   public string guid { get; set; }
} 
```

当我运行程序时，我得到一个异常，如下所示：

![在此处输入图像描述](../Images/64d098ae977881e426896979db56c96f.png)

因此，要更改`Element`和`namespace`，我做了以下解决方法：

我把`DataContractAttribute`我的`Response`班级如下：

```
[DataContract(Namespace = "")]
public  class Response
{
   public RSS rss { get; set; }
} 
```

`Element`我通过在反序列化之前添加以下两行来更改名称如下

```
 //To change rss Element to Response as in Exception
  xml = xml.Replace("<rss version=\"2.0\">","<Response>");
  //For closing tag
  xml = xml.Replace("</rss>","</Response>"); 
```

但是，它在 foreach 循环中给出了另一个例外，因为反序列化的`rss`对象是`null`. 那么，我应该如何使用正确的方式反序列化它`Servicestack.Text`？

**笔记 ：**

我很清楚如何用其他库反序列化，我只想用 ServiceStack 来做。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-21T18:19:13.167

**TLDR：**用于`XmlSerializer`反序列化您无法控制的 xml 方言；`ServiceStack`专为代码优先开发而设计，**不能适应**通用 xml 解析。

* * *

ServiceStack.Text*没有*实现自定义 Xml 序列化程序 - 它`DataContractSerializer`在后台使用。 `FromXml`只是语法糖。

## `DataContractSerializer`用于解析Xml

正如您所注意到的，对**命名空间**`DataContractSerializer`很挑剔。一种方法是在类上显式指定命名空间，但如果这样做，则需要在任何地方指定，因为它假定如果有任何内容是显式的，那么一切都是。您可以使用程序集级属性（例如在 AssemblyInfo.cs 中）声明默认命名空间来解决此问题：**`[DataMember]`**

 **```
[assembly: ContractNamespace("", ClrNamespace = "My.Namespace.Here")] 
```

这解决了命名空间问题。

但是，您无法使用 DataContractSerializer 解决其他 2 个问题：

*   它不会使用属性（在你的情况下，`version`）
*   它要求像这样的集合`item`同时具有包装名称和元素名称（例如项目和项目）

您无法解决这些限制，因为**`DataContractSerializer`它不是通用 XML 解析器**。它旨在轻松生成和使用 API，而不是将任意 XML 映射到 .NET 数据结构。您将永远无法解析 RSS；所以因此 ServiceStack.Text （它只是包装它）也不能解析它。

相反，使用`XmlSerializer`.

## 使用`XmlSerializer`

这是相当直截了当的。您可以使用以下内容解析输入：

```
var serializer = new XmlSerializer(typeof(RSS));
RSS rss = (RSS)serializer.Deserialize(myXmlReaderHere); 
```

诀窍是注释各个字段，使它们与您的 xml 方言匹配。例如，在您的情况下，这将是：

```
[XmlRoot("rss")]
public class RSS
{
    [XmlAttribute]
    public string version { get; set; }
    public ChannelClass channel { get; set; }
}

public class ChannelClass
{
    public string title { get; set; }
    public string ttl { get; set; }
    public string description { get; set; }
    public string link { get; set; }
    public string copyright { get; set; }
    public string language { get; set; }
    public string pubDate { get; set; }
    [XmlElement]
    public List<ItemClass> item { get; set; }
}

public class ItemClass
{
    public string title { get; set; }
    public string link { get; set; }
    public string description { get; set; }
    public string guid { get; set; }
} 
```

因此，一些明智的属性足以让它根据需要解析 XML。

总之：您**不能**为此使用 ServiceStack，因为它使用`DataContractSerializer`.ServiceStack/`DataContractSerializer`是为您控制架构的场景而设计的。 **改为使用`XmlSerializer`。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:50:30.867

一些东西：

1.  由于您使用的是 [DataContract] 属性。您必须在 [DataMember] 属性中包含 DTO 属性，否则它们将在序列化/反序列化过程中被跳过。使用 XML 反序列化中指定的程序集属性[仅适用于 xml 中的命名空间](https://stackoverflow.com/questions/9689711/servicestack-xml-deserializing-only-works-with-namespace-in-xml)

2.  您的 xml 操作需要更改以将 rss 包装在响应中或替换它。

    `xml = xml.Replace("<rss version=\"2.0\">", "<Response><rss version=\"2.0\">");`

3.  我建议您自己构建一个测试响应对象，使用 ServiceStack 的 .ToXml() 方法将其序列化为 XML 以查看它所期望的格式。您将看到服务堆栈将频道项目作为子项目列表处理，这不是 RSS 格式化频道项目的方式。您必须将所有项目包装到一个名为`<ItemClass>`**

# angularjs - 下划线 _.range() 在 AngularJS ng-repeat 中不起作用

> ID：14941191
> 
> 赞同：9
> 
> 时间：2013-02-18T16:46:26.897
> 
> 标签：angularjs, underscore.js

如果我只想要 20 次迭代，我该如何重复我的块？它不起作用：

```
<div ng-repeat="item in _.range(20)"></div> 
```

UnderscoreJS 包含在页面中

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-18T17:19:18.057

如果你想在你的模板中使用 undersore 的功能，你必须在一个范围内公开它。如果您想在所有模板中使用它，一种方法是：

```
var app = angular.module('angularjs-starter', []);

app.run(function($rootScope){
  $rootScope._ = _;
}); 
```

然后，您可以尝试在模板中使用它：

```
<div ng-repeat="item in _.range(20)">{{item}}</div> 
```

这是一个有效的 plunk：[http ://plnkr.co/edit/1Va4EikvRyFiQvhb2HYV?p=preview](http://plnkr.co/edit/1Va4EikvRyFiQvhb2HYV?p=preview)

**虽然上述工作不应该使用它**。模型应该在控制器中初始化。否则 AngularJS 将`_range`在每​​个 $digest 循环中执行以生成一个新数组。

# google-maps - 在地理编码器结果中返回地点名称

> ID：14941192
> 
> 赞同：-3
> 
> 时间：2013-02-18T16:46:31.513
> 
> 标签：google-maps, google-maps-api-3, google-geocoder, google-geocoding-api

是否可以使用谷歌的地理编码器在结果中返回地名？

我意识到文档没有将其显示为返回的结果。

我将如何去接收这个名字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:26:35.530

您需要使用地理编码器结果来提供[Places API](https://developers.google.com/places/documentation/search)查询。

# javascript - jQuery函数未附加到dom元素

> ID：14941198
> 
> 赞同：0
> 
> 时间：2013-02-18T16:47:01.243
> 
> 标签：javascript, jquery, json, dom-events

我正在尝试构建一个网页，该网页将从 JSON 文件构造元素并将点击功能附加到这些元素。

```
$(document).ready(function(){

 $.ajax({
        url: 'database.php',
        type: "POST",
        dataType: 'json',
        success: function (datas) {
            (datas);
            for (var x = 0; x < datas.data.length; x++) {
                var id = datas.data[x].ID;
                var ip = datas.data[x].IP;
               var ips='<div class="ip"><span id="ids">'+id+'</span><span id="number">'+ip+'</span></div>';
               $('#left').append(ips);

            }
        }
    });

$('.ip').click(function () {
alert($(this).children('#ids').text());
});

}); 
```

上面的代码成功构建了元素，但点击功能不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:48:22.333

您可以改用[on](http://api.jquery.com/on/)函数，它用于将事件处理程序应用于尚未创建的元素。

如果您有当前`click`设置，请尝试以下方法：

```
$(document).on('click', '.ip', function(){
    alert($(this).children('#ids').text());
}); 
```

* * *

正如@Pete 所建议的那样，`id`在循环中分配相同的属性并不是一个好主意，它们应该是文档唯一的。考虑改为通过名称查找它们`class`，这样您就可以发出如下警告：

```
alert($(this).children('.MyIdsSpan').text()); 
```

# c# - 如何创建 LINQ 请求

> ID：14941200
> 
> 赞同：-2
> 
> 时间：2013-02-18T16:47:14.090
> 
> 标签：c#, linq

我无法创建 LINQ 请求。我有一个基本要求：

```
 var result = from i in _dbContext.Users
                     where i.ID != CurrentUserID &&
                     //i.UserType.UserTypeID == (from a in _dbContext.UserTypes where a.UsersSelectMeetingCriteria.Any(p => p.ID == CurrentUserID) select a.UserTypeID).FirstOrDefault() &&
                     i.Services.Any(p => p.UsersSelectMeetingCriteria.Any(k => k.ID == CurrentUserID)) &&
                     i.GeographicalAreas.Any(p=>p.UsersSelectMeetingCriteria.Any(o=>o.ID == CurrentUserID)) &&
                     i.MultiplyItems.Any(r => (r.UsersSelectMeetingCriteria.Any(q => q.ID == CurrentUserID) && r.ItemType == MultiplyItemKeys.USER_TYPE)) &&
                     i.MultiplyItems.Any(s => (s.UsersSelectMeetingCriteria.Any(q => q.ID == CurrentUserID) && s.ItemType == MultiplyItemKeys.COMPANY_INVOLVED)
                     )

                     select new DataTable.UserModel()
                     { ... }; 
```

但我需要 4 级搜索。如果所有 4 个位置都可以，那么这是第一级用户，如果只有 3 个（但第 4 个不是）- 级别 #2，如果 2 - 是，2 - 否然后级别 #3，如果只有一个匹配 - 级别 #4。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:54:45.263

未经测试，并且在黑暗中进行了相当疯狂的尝试，但这也许会为您指明正确的方向：

```
var result = from i in _dbContext.Users
             let check1 = i.Services.Any(p => p.UsersSelectMeetingCriteria.Any(k => k.ID == CurrentUserID))
             let check2 = i.GeographicalAreas.Any(p=>p.UsersSelectMeetingCriteria.Any(o=>o.ID == CurrentUserID))
             let check3 = i.MultiplyItems.Any(r => (r.UsersSelectMeetingCriteria.Any(q => q.ID == CurrentUserID) && r.ItemType == MultiplyItemKeys.USER_TYPE))
             let check4 = i.MultiplyItems.Any(s => (s.UsersSelectMeetingCriteria.Any(q => q.ID == CurrentUserID) && s.ItemType == MultiplyItemKeys.COMPANY_INVOLVED))
             let level = 5 - (check1 ? 1 : 0) - (check2 ? 1 : 0) - (check3 ? 1 : 0) - (check4 ? 1 : 0)
             where i.ID != CurrentUserID && level <= 4
             select new {i, level}; 
```

这样做是独立执行您的检查，然后从 5 中减去成功检查的数量。因此，如果三个成功而一个失败，您将拥有 5-3 = "level 2"。

请注意，如果我在这里实际上是在正确的轨道上，这看起来就像一个巨大的混乱和一个更大的黑客。我倾向于将逻辑移动到存储过程或尝试在数据模型的其他地方简化它。

注意 2，我也尽职尽责地忽略了您的注释代码。

注意 3，如果我知道您的数据模型和查询背后的推理，我确信有更好的方法来做到这一点。

# forms - 播放框架表单提交未通过验证

> ID：14941201
> 
> 赞同：0
> 
> 时间：2013-02-18T16:47:14.253
> 
> 标签：forms, scala, playframework

我是 scala 和类型安全语言的新手，所以我可能会忽略一些基本的东西。这就是我的问题。

**目标**：*我想提交一个只有一个文本输入的表单，并且不反映我的案例类。它将以类型结束：字符串*

**问题**：*无法从折叠中获得成功*

我在前端有一个表单，我选择用 html 编写而不是 play 的表单助手（如果这是问题，愿意更改）

```
<form method="POST" action="@routes.Application.shorten()">
  <input id="urlLong" name="urlLong" type="text" placeholder="http://www.google.com/" class="span4"/>
  <div class="form-actions">
    <button type="reset" class="btn">Reset</button>
    <button type="submit" class="btn btn-primary pull-right"><span class="icon-random"></span> Shrtn It!</button>
  </div>
</form> 
```

处理 post 操作的控制器如下所示：

```
import ...

object Application extends Controller {

  val newUrlForm = Form(
    "urlLong" -> text
  )

  def shorten = Action { implicit request =>
    val urlLong = newUrlForm.bindFromRequest.get

    newUrlForm.fold(
      hasErrors = { form =>
        val message = "Somethings gone terribly wrong"
        Redirect(routes.Application.dash()).flashing("error" -> message)
    },

    success = { form =>
      val message = "Woot it was successfully added!"
      Redirect(routes.Application.dash()).flashing("success" -> message)
    }
  }
  ...
} 
```

我试图遵循/修改 Play for Scala 书中的教程，但它们的形式与案例类相匹配，而且 Play 的教程也与我的用例有所不同。连同您的答案，如果您可以包括您是如何计算出来的，那将非常有用，因此我可以更好地自行排除故障。

*   [http://www.playframework.com/documentation/2.0/ScalaForms](http://www.playframework.com/documentation/2.0/ScalaForms)
*   [http://www.playframework.com/documentation/api/2.0/scala/index.html#play.api.data.Forms](http://www.playframework.com/documentation/api/2.0/scala/index.html#play.api.data.Forms) $

另外，如果重要的话，我会使用 intellij idea 作为我的 ide

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:10:16.383

您需要在*form.bindFromRequest*上调用 fold 方法。从[文档](http://www.playframework.com/documentation/2.0/ScalaForms)>处理绑定失败

```
loginForm.bindFromRequest.fold(
  formWithErrors => // binding failure, you retrieve the form containing errors,
  value => // binding success, you get the actual value 
) 
```

您也可以将单个 Mapping 构造用于单个字段

```
Form(
  single(
    "email" -> email
  )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:21:56.913

我最终得到了什么：

```
def shorten = Action { implicit request =>
  newUrlForm.bindFromRequest.fold(
    hasErrors = { form =>
      val message = "Somethings gone terribly wrong"
      Redirect(routes.Application.dash()).flashing("error" -> message)
    },

    success = { urlLong =>
      val message = "Woot it was successfully added!"
      Redirect(routes.Application.dash()).flashing("success" -> message)
    }
  )
} 
```

不确定我是否真的理解我做错了什么，但是这个基于 mericano1 答案的代码最终也能正常工作。好像以前我从表单中取出 urlLong val，然后折叠表单，因为这会直接折叠表单，并在此过程中提取 urlLong 的 val。

另外我不确定为什么 fold 的参数记录不同。

*   匹配我所拥有的（搜索折叠）：[http ://www.playframework.com/documentation/api/2.0/scala/index.html#play.api.data.Form](http://www.playframework.com/documentation/api/2.0/scala/index.html#play.api.data.Form)
*   匹配 mericano1 的答案：[http ://www.playframework.com/documentation/2.0/ScalaForms](http://www.playframework.com/documentation/2.0/ScalaForms)

# c# - 如何检查徽标/图像是否在图像中？

> ID：14941205
> 
> 赞同：2
> 
> 时间：2013-02-18T16:47:34.720
> 
> 标签：c#, image, photo, graphical-logo

我想将文档的图像与徽标类型或其他图片进行比较，以查看徽标是否在文档中。

执行此操作的应用程序将使用 ASP.NET MVC 3 和 C#。

**经过更多搜索后，我找到了一个使用 AForge 扩展 Bitmap 的解决方案：**

```
public static class BitmapExtensions
{
    /// <summary>
    /// See if bmp is contained in template with a small margin of error.
    /// </summary>
    /// <param name="template">The Bitmap that might contain.</param>
    /// <param name="bmp">The Bitmap that might be contained in.</param>        
    /// <returns>You guess!</returns>
    public static bool Contains(this Bitmap template, Bitmap bmp)
    {
        const Int32 divisor = 4;
        const Int32 epsilon = 10;

        ExhaustiveTemplateMatching etm = new ExhaustiveTemplateMatching(0.9f);

        TemplateMatch[] tm = etm.ProcessImage(
            new ResizeNearestNeighbor(template.Width / divisor, template.Height / divisor).Apply(template),
            new ResizeNearestNeighbor(bmp.Width / divisor, bmp.Height / divisor).Apply(bmp)
            );

        if (tm.Length == 1)
        {
            Rectangle tempRect = tm[0].Rectangle;

            if (Math.Abs(bmp.Width / divisor - tempRect.Width) < epsilon
                &&
                Math.Abs(bmp.Height / divisor - tempRect.Height) < epsilon)
            {
                return true;
            }
        }

        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:52:53.163

我认为您想使用模板匹配功能。我建议为此使用opencv。这[类似于这个问题](https://stackoverflow.com/questions/9443862/find-a-smaller-image-within-another-big-one-and-fast)

# jquery - 不工作：根据选择选项中的选择值更改输入类型的占位符值

> ID：14941207
> 
> 赞同：1
> 
> 时间：2013-02-18T16:47:38.060
> 
> 标签：jquery

我有以下 HTML：

```
<span style="margin-top: -2px;">    
    <select id="selectID" style="width: 150px">
    <option value="customerID">Customer ID</option>
        <option value="ECPDProfileID">ECPD Profile ID</option>
</select>

</span>

<input type="text" id="customerProfileID" placeholder="here"/> 
```

我试图根据选择选项中选择的值更改占位符值。

我为此尝试了以下 jQuery 代码：

```
<script type="text/javascript">
  $(document).ready(function(){
      var v = $("#selectID").val();
  $("#customerProfileID").attr('placeholder', v);
  });
</script> 
```

此代码仅在页面第一次加载时更改占位符的值一次，因为我知道我将它保存在文档就绪函数中。我想根据在选择选项中选择的值来更改占位符的值。我需要打另一个电话还是可以从文档准备功能或任何其他解决方案内部进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:54:28.400

放在里面`$('#selectID').change`

```
<script type="text/javascript">
  $(document).ready(function(){
    $('#selectID').change(function () {
      var v = $("#selectID").val();
      $("#customerProfileID").attr('placeholder', v);
    });
  });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:57:56.677

这应该工作

```
<script type="text/javascript">
    $(document).ready(function(){
        $('#selectID').on('change', function(){
            $("#customerProfileID").attr('placeholder', $(this).val());
        });
    });
</script> 
```

# service - 在批处理文件中停止/启动服务时禁用弹出窗口

> ID：14941219
> 
> 赞同：2
> 
> 时间：2013-02-18T16:48:14.197
> 
> 标签：service, batch-file, startup

我有一个停止和启动 Windows 服务的 DOS 批处理文件。我们遇到了此活动失败的情况。在服务器上时，我启动了服务器的服务应用程序。我试图停止服务并收到一条弹出消息。我推测弹出交互性是服务停止失败的原因。有没有办法使用 SC 命令禁用弹出功能？下面是停止服务的代码。

sc \\%SERVER% 停止 %SERVICE_NAME%

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T22:48:50.623

您是否设置`sc`用于停止服务？错误对话框可能不会停止备用命令。我建议尝试`net stop "Service Name"`，但是这不允许您远程停止服务（没有 3rd 方工具）。

如果 PowerShell 是一个选项，试试这个（结合[这个 SO 线程](https://stackoverflow.com/questions/7392943/powershell-2-unable-to-suppress-warning-message)的想法和[这个](https://stackoverflow.com/questions/10342486/using-powershell-to-stop-a-service-remotely-without-wmi-or-remoting)）：

```
Start-Service -inputobject $(get-service -ComputerName %SERVER% -Name %SERVICE_NAME%) -WarningAction SilentlyContinue -ErrorAction SilentlyContinue 
```

此外，您可以尝试使用`wmic`来停止服务，如下所示：

```
wmic /node:"%SERVER%" service where name="%SERVICE_NAME%" call stopservice 
```

# jquery - 当时间超过 1 小时时，如何将倒计时设置为零？

> ID：14941223
> 
> 赞同：-1
> 
> 时间：2013-02-18T16:48:21.717
> 
> 标签：jquery, countdown

我有这个代码：

```
var czas_isw = new Date(2013, 02-1, 19, 12, 00);

$('.czas_do_rozpoczecia').countdown({until: czas_isw, compact: true, timezone: +1});

$('.czas_trwania').countdown({since: czas_isw, compact: true, timezone: +1}); 
```

[http://jsfiddle.net/IdolwSzutrab7/CxdFL/](http://jsfiddle.net/IdolwSzutrab7/CxdFL/)

当时间超过 1 小时时，如何将倒计时“#czas_trwania”重置为 0？

必须是“如果”，但我知道是什么：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:53:05.197

当然（快速*浏览*[文档](http://keith-wood.name/countdownRef.html)）您会响应[`onTick`回调](http://keith-wood.name/countdownRef.html#onTick)，检查还剩多少时间，然后使用命令[`option`设置](http://keith-wood.name/countdownRef.html#optionset)新时间？

# iphone - 在 Xcode 中找不到 WebKit 框架

> ID：14941224
> 
> 赞同：-2
> 
> 时间：2013-02-18T16:48:22.510
> 
> 标签：iphone, xcode

我一个月前下载了xcode。我正在尝试添加`webkit`框架以在 iOS 开发中使用它。它没有与其他框架一起列出。我必须手动下载吗？我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:49:14.307

Cocoa Touch 中没有 Webkit.framework。webkit 框架仅在 OS X 上可用。对于 iOS，只需使用 UIWebview。

有关更多信息，请查看此处：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)

本质上虽然这很容易。只需在 .h 中添加一个 UIWebview，将它连接到 Storyboard 中的 webview。此外，在您的 .h 中，添加 UIWebview 委托。

就像是：

`@interface yourViewController : UIViewController <UIWebViewDelegate>`

然后，在 .m 中，使用

`[webView setDelegate:self];`可能在您的 viewDidLoad 方法中。

祝你好运！

# php - 无法在提交时出现确认框

> ID：14941225
> 
> 赞同：0
> 
> 时间：2013-02-18T16:48:27.323
> 
> 标签：php, javascript, confirm, onsubmit

我正在尝试使用`onsubmit="return confirm('Do you really want to submit the form?')"`在用户通过单击提交按钮删除项目之前出现警告。我无法让确认框出现，它只是继续直接删除该项目。

谁能在我的代码中看到我可能出错的地方？我尝试更改双引号和单引号，但没有任何努力让确认框出现。

我的代码如下。

```
 echo '<td> <form method="post" action="deleteassign.php" name="deleteassignform"
 id="deleteassignform" onsubmit="return confirm('Do you really want to submit the form?')">';
    echo '<input type="hidden" name="quizidvalue" id="quizidvalue" value="'.$sendquizid.'" />';
    echo '<input type="hidden" name="classidvalue" id="classidvalue" value="'.$sendclassid.'" />';
    echo '<input type="submit" name="deleteassignment" id="deleteassignment" value="Delete This Assignment"> </form> </td> </tr>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:03:46.697

改变你的：

```
return confirm('Do you really want to submit the form?') 
```

到

```
return confirm(\'Do you really want to submit the form?\') 
```

这应该可以解决这给您带来的任何引用问题，因为它肯定被错误地引用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:04:37.560

为了输出...

```
onsubmit="return confirm('Do you really want to submit the form?')" 
```

...你需要在 PHP 端正确地转义你的引号。尝试以下操作（注意单引号前的反斜杠）：

```
echo '<td> <form method="post" action="deleteassign.php" name="deleteassignform"
 id="deleteassignform" onsubmit="return confirm(\'Do you really want to submit the form?\')">'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:50:24.067

为什么不直接把代码放在按钮里呢？

```
<input type="submit" name="deleteassignment" id="deleteassignment" 
value="Delete This Assignment" onclick="return confirm('Do you really want to delete?')"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T17:00:34.123

你的引用是错误的。您可以更好地使用此表单，因此所有引号都是正确的：

```
?><td> <form method="post" action="deleteassign.php" name="deleteassignform"
id="deleteassignform" onsubmit="return confirm('Do you really want to submit the form?')">
<input type="hidden" name="quizidvalue" id="quizidvalue" value="<?= htmlspecialchars($sendquizid) ?>" />
<input type="hidden" name="classidvalue" id="classidvalue" value="<?= htmlspecialchars($sendclassid) ?>" />
<input type="submit" name="deleteassignment" id="deleteassignment" value="Delete This Assignment"> </form> </td> </tr>
<?php 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T17:10:36.053

您的代码输出的代码应如下所示：

```
<form method="post" action="deleteassign.php" name="deleteassignform"
 id="deleteassignform" onSubmit="return confirm('Do you really want to submit the form?');"> 
```

注意函数内部的引用`confirm`。

# sql-server - 如果 SELECT 语句没有结果，则使用 CASE 返回字符串

> ID：14941229
> 
> 赞同：14
> 
> 时间：2013-02-18T16:48:43.730
> 
> 标签：sql-server, sql-server-2008, tsql

如果我的 SELECT 语句没有结果，是否可以使用 CASE 返回某个字符串？

例子：

```
DECLARE @accountnumber AS VARCHAR(10)

SET @accountnumber = 'account number to search'

SELECT 
    CASE
    WHEN account IS NOT NULL
    THEN 'We Have Records of this Customer'
    WHEN account IS NULL
    THEN 'We Do Not Have Records For This Customer'
    END AS 'result'
FROM call_records
WHERE account = @accountnumber
GROUP BY account 
```

上述方法不起作用，因为如果我正在搜索的帐号不在我的日志表中，则不会有任何结果，并且消息“我们没有此客户的记录”将永远不会实现。
我可以使用带有 PRINT 命令的纯 T-SQL 来完成我想要实现的目标，但我正在使用第 3 方应用程序，结果必须采用表格形式（因此仅限 SELECT 语句）。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-18T16:56:14.123

您可以使用`EXISTS`：

```
SELECT 
    CASE
    WHEN EXISTS(
        SELECT 1 FROM call_records
        WHERE account = @accountnumber
    ) 
    THEN  'We Have Records of this Customer'
    ELSE  'We Do Not Have Records For This Customer'
    END AS 'result'; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-18T16:54:22.507

尝试：

```
DECLARE @accountnumber AS VARCHAR(10)

SET @accountnumber = 'account number to search'

SELECT 
    CASE
    WHEN account IS NOT NULL
    THEN 'We Have Records of this Customer'
    WHEN account IS NULL
    THEN 'We Do Not Have Records For This Customer'
    END AS 'result'
FROM (select 1 dummy) dummy
left join call_records ON account = @accountnumber
GROUP BY account 
```

# c - C - 使用指针和函数的 for 循环分段错误

> ID：14941231
> 
> 赞同：-2
> 
> 时间：2013-02-18T16:48:46.273
> 
> 标签：c

我在 C 函数方面遇到了一些麻烦。

这是功能：

```
int* CalcMeanPower(int Media[], int** MeanPowerArray, int righe, int colonne)
{
  int i=0, k=0;
  int ArrayPower[] = {0, 0, 0, 0};

  for (i=0; i<righe; i++)
  {
    for (k=0; k<colonne; k++)
    {
      ArrayPower[k] = ArrayPower[k] + MeanPowerArray[i][k]  ;
    }
  }

  for (k=0; k<colonne; k++)
  {
    Media[k] = (ArrayPower[k]/righe);
  }

  return Media;
} 
```

这就是我从主函数调用函数的方式：

VettoreMedia = CalcMeanPower(VettoreMedia, RefMeanPower, num_mean, N);

，其中变量定义如下：

```
int* RefMeanPower[N];
int* VettoreMedia;
int N=4, num_mean=5; 
```

当我尝试运行该程序时，它会在尝试执行以下操作时返回一个分段错误：

```
 for (k=0; k<colonne; k++)
  {
    Media[k] = (ArrayPower[k]/righe);
  } 
```

你能解释一下我做错了什么吗？我在网上搜索过，但找不到答案。这个函数只是我的 C 程序的一小部分，但我确信它在这个循环中出错了！

请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:54:24.473

在传递给函数之前，您尚未初始化 VetorreMedia。由于未初始化，Media 也指向未知位置，因此分段错误。VetorreMedia 应该有一些默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:55:36.333

如果您在调试器中运行它，您将看到您的段错误发生的位置并能够从那里解决它。

谷歌`gdb cheatsheet`开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:55:59.013

您需要为变量/数组保留内存。

`RefMeanPower`只是一个普通的未初始化指针数组。并且`VettoreMedia`只是一个普通的未初始化指针。

```
for(int i = 0; i < N; ++i)
  RefMeanPower[i] = malloc(sizeof(int) * num_mean);

// don't forget to free after usage
for(int i = 0; i < N; ++i)
  free(RefMeanPower[i]); 
```

你在哪里得到`RefMeanPower[N][num_mean]`如此交换`k`和`i`作为索引或`N`在`num_mean`创建时。

`VettoreMedia`你可以做

```
VettoreMedia = malloc(sizeof(int) * N);

// don't forget to free after usage
free(VettoreMedia); 
```

或者

```
int VettoreMedia[N];
// frees automatically when leaving scope 
```

# android - Android - 在多个应用程序之间共享 Facebook 应用程序 ID？

> ID：14941234
> 
> 赞同：1
> 
> 时间：2013-02-18T16:48:56.537
> 
> 标签：android, facebook

[https://developers.facebook.com/docs/howtos/share-appid-across-multiple-apps-ios-sdk/](https://developers.facebook.com/docs/howtos/share-appid-across-multiple-apps-ios-sdk/)

目前有关于如何使用 iOS 执行此操作的文档，但是有没有办法使用 android 执行此操作？

其他可能已经解决但仍未得到答复/未响应的 SO。

*   [Facebook 和 iOS：在多个应用程序之间共享一个应用程序 ID](https://stackoverflow.com/questions/12498888/share-a-facebook-app-id-across-apps-android)

# php - 从mysql数据库和php访问数组数据

> ID：14941236
> 
> 赞同：0
> 
> 时间：2013-02-18T16:49:02.723
> 
> 标签：php, mysql, arrays

我有两个包含信息的 mysql 表：

一个表存储页面信息，例如其名称和位置，以及一个数组列，用于存储以数组格式存储的每页显示的小部件：1,2,3,4

另一个表是实际的小部件表，其中小部件信息和 id 作为其标识符例如：1,2,3,4

我需要：

1.  从页表中获取数组数据
2.  循环遍历该数组并显示小部件表中的内容。

我一直在使用 foreach 语句：

每个页面的 url 遵循这种格式 index.php?page=thispage&route=thisroute 因此 $_GET['page']

```
$page = $_GET['page'];
$order = "SELECT * FROM pages where name='$page'";
  $result = mysql_query($order);
    while($row = mysql_fetch_array($result)){
            $widget = array();
            $widget .= $row[3];
        }

        print_r($widget);

        foreach($widget as $w) {
                    $order = "SELECT * FROM menu where id='$w'";
                    $result = mysql_query($order);
                    while($row = mysql_fetch_array($result)){
                    print $row[1];
                    }
            } 
```

**更新：**想出了一个适合我的解决方案。

保留逗号分隔值的原因是因为我可以每页有一个小部件或每页 15 个小部件，并且每个小部件都可以即时添加。从管理方面我希望能够选择每个页面可以拥有的小部件。

将数据保存在逗号分隔值中时，所有数据都位于一列“1,2,3,4”中。

我只是坚持将数据分解成一个数组并循环遍历数组的每个值：

```
$page = $_GET['page'];
$order = "SELECT * FROM pages where name='$page'"; //select widgets to show on page
  $result = mysql_query($order);
    while($row = mysql_fetch_array($result)){
            $widget = $row[3]; 
            $string = preg_replace('/\,$/', '', $widget); //remove trailing comma
            $array = explode(', ', $string);

            foreach($array as $value) //loop over values
                {
                    $order = "SELECT * FROM widget where id='$value'";
                    $result = mysql_query($order);
                    while($row = mysql_fetch_array($result)){
                        print $row[1]; //print data: this will be formated to the specific divs set up.
                }

            }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:58:04.597

1.  从页表中获取数组数据：（ `SELECT array_column_name FROM table_store_page WHERE id=your_id`使用这个sql来获取数组）

2.  在 php 中执行 SQL 语句可能使用[mysql_query](http://php.net/manual/en/function.mysql-query.php)

无论如何，从不推荐在数据库中存储数组/逗号分隔的值。您可以尝试规范化您的数据库。

# ppp - 当 LTE 调制解调器回退到 3G 时，它是否使用 PPP 建立新的拨号连接？

> ID：14941238
> 
> 赞同：2
> 
> 时间：2013-02-18T16:49:05.443
> 
> 标签：ppp, lte

配置为自动模式，LTE 调制解调器将在信号不佳的情况下回退到 3G/2G。当它回退（切换到2G或3G）时，是否需要建立新的PPP拨号连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-27T16:58:23.680

在 LTE 的情况下，“回退”机制会在与旧系统的 RAT 间切换中弹出，如下所示：

1.  SRVCC - 仅提供 CS 语音服务的遗留系统
2.  CSFB - 在未部署 IMS 服务的场景中通过传统 RAT 进行 CS 语音呼叫

SRVCC 使基于 PS 的 VoIP 呼叫能够切换到传统网络中基于 CS 的语音呼叫，并且 UE 将能够在切换后继续进行呼叫，因为它将 PS 承载转移到 CS 承载。然而，CSFB 涉及在 HO 执行阶段的 CS 呼叫建立过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:00:29.860

不，它不需要建立新的连接。它应该在切换期间保持 IP 连接。

此处交接说明[。](http://3g4g.blogspot.de/2012/01/overview-of-lte-handovers.html) 网络和手机的预期行为由[3GPP](http://www.3gpp.org)在其规范 TS 23.009 中定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T16:36:00.010

这取决于我们所说的“后退”是什么意思。它在某种程度上是特定于运营商的，但有两类后备。

仅在收音机上回退

在这种情况下，设备回退到 3G（例如 HSPA 或 EvDO），但我们仍保留在 IMS 核心中。在这种情况下，一切都是一样的，您不会看到连接状态发生任何变化。

回退到旧网络

在这种情况下，设备将失去其 LTE/IMS 连接。对于某些网络，它回退到 HSPA，而另一些则回溯到它的 CDMA 根源。在这种情况下，您放弃与 IMS 核心和 LTE 的连接并回退到旧网络，就好像您已断开连接并重新连接一样。事实上，您可能会断开连接。此时您将看到一个新的 PPP 会话。

# c# - 从视图传递到控制器的模型数据为 NULL

> ID：14941239
> 
> 赞同：0
> 
> 时间：2013-02-18T16:49:16.643
> 
> 标签：c#, asp.net-mvc-3, linq

我有一个从模型正确填充的视图。这是视图的缩减：

```
@model PickardOrdering.Models.ExhibitionItemModel

@foreach (var item in Model.Items)
    {
        <tr>
            <td>@Html.DisplayFor(modelItem => item.Code)</td>
            <td>@Html.DisplayFor(modelItem => item.Description)</td>
            <td>@Html.CheckBoxFor(modelItem => item.AdditionalItem.Value, new { @disabled = "disabled" })</td>
            <td>@Html.CheckBoxFor(modelItem => item.IsItemSelected.Value)</td>
            <td>£&nbsp;@Html.EditorFor(modelItem => item.ItemPrice)</td>
        </tr>
    }

<input type="submit" value="Save Items" /> 
```

当我将数据发布回控制器时， Exhibitionitemmodel 为空：

```
[HttpPost, ActionName("CreateExhibitionItems")]
    public ActionResult CreateExhibitionItems(ExhibitionItemModel exhibitionitemmodel)
    {
        decimal decPrice;
        if (ModelState.IsValid)
        {
            List<tblExhibitionItem> lstExhibitionItem = new List<tblExhibitionItem>();
            IEnumerable<ItemWrapper> lstItemWrapper = from objExhibitionItemModel in exhibitionitemmodel.Items
                                                                                                                select objExhibitionItemModel; 
```

这是使用的模型类：

```
namespace PickardOrdering.Models
{
    public class ItemWrapper : tblItem
    {
        public decimal ItemPrice { get; set; }
        public bool? IsItemSelected { get; set; }
    }

    public class ExhibitionItemModel
    {   
        public IEnumerable<ItemWrapper> Items { get; set; }
        public tblExhibition Exhibition { get; set; }
        public IEnumerable<tblExhibitionItem> ExhibitionItems { get; set; }
    }    
} 
```

任何想法为什么模型数据为空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:25:31.187

确保在模型中使用的每个类上都有一个公共的无参数构造函数，包括它们使用的枚举和类。

此外，在构造函数中实例化您包含的类。模型绑定器将需要一个对象实例来填充。示例如下。对模型使用的所有类执行此操作。

```
public class ExhibitionItemModel
{   

    public ExhibitionItemModel(){
        Exhibition = new tblExhibition();
        ExhibitionItems = new List<tblExhibitonItem>();
        Items = new List<ItemWrapper>();
    }

    public IEnumerable<ItemWrapper> Items { get; set; }
    public tblExhibition Exhibition { get; set; }
    public IEnumerable<tblExhibitionItem> ExhibitionItems { get; set; }
} 
```

此外，在您看来，使用索引而不是 foreach 循环来迭代您的项目。这样视图将生成包含模型绑定器可以理解的索引的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:13:42.330

为了通过模型绑定让自己的生活更轻松，我建议为您的`ItemWrapper`班级制作一个 EditorTemplate。

```
// Views/<WhateverYourControllerIsCalled>/EditorTemplates/ItemWrapper.cshtml

@model PickardOrdering.Models.ItemWrapper

<tr>
        <td>@Html.DisplayFor(m => m.Code)</td>
        <td>@Html.DisplayFor(m => m.Description)</td>
        <td>@Html.CheckBoxFor(m => m.AdditionalItem.Value, new { @disabled = "disabled" })</td>
        <td>@Html.CheckBoxFor(m => m.IsItemSelected.Value)</td>
        <td>&nbsp;@Html.EditorFor(m => m.ItemPrice)</td>
</tr> 
```

你的主要 .cshtml 变成：

```
@model PickardOrdering.Models.ExhibitionItemModel

@using (Html.BeginForm("CreateExhibitionItems", "Home", FormMethod.Post))
{  
    <table>
    @Html.EditorFor(m => m.Items)
    </table>
    <input type="submit" value="Save Items" />
} 
```

在您的集合上使用 EditorFor`Items`将以默认绑定器在绑定到列表时所期望的格式呈现 html。如果您想要更好地控制它，您可以使用索引和 for 循环手动呈现 html，但这种方式会为您处理它。

作为我发现在这些情况下有用的一般提示，将`FormCollection`参数添加到接收帖子的操作方法中，并在调试期间检查此参数。这有助于查看从表单中发布了哪些数据，并且从那里您可以找出在模型绑定期间它没有被绑定的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:13:46.717

你有什么表格`CSHTML`可以使用这篇[文章](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx) 你必须使用这个代码

```
@using (Html.BeginForm("CreateExhibitionItems", "controllerName", FormMethod.Post))
{  @foreach (var item in Model.Items)
    {
        <tr>
            <td>@Html.DisplayFor(modelItem => item.Code)</td>
            <td>@Html.DisplayFor(modelItem => item.Description)</td>
            <td>@Html.CheckBoxFor(modelItem => item.AdditionalItem.Value, new { @disabled = "disabled" })</td>
            <td>@Html.CheckBoxFor(modelItem => item.IsItemSelected.Value)</td>
            <td>£&nbsp;@Html.EditorFor(modelItem => item.ItemPrice)</td>
        </tr>
    }

<input type="submit" value="Save Items" />} 
```

# erlang - 在两个 mnesia 表之间传输数据

> ID：14941240
> 
> 赞同：0
> 
> 时间：2013-02-18T16:49:19.757
> 
> 标签：erlang

我有两个表计数器和计数

```
 -record(counter, {key, value}).
    -record(count, {key, value}).

    create() ->
        mnesia:create_schema([node()]),
        mnesia:start(),
        mnesia:create_table(counter, [{attributes, record_info(fields, counter)}, {disc_copies, [node()]}]),
        mnesia:create_table(count, [{attributes, record_info(fields, count)}, {disc_copies, [node()]}]),

    mnesia:stop(). 
```

但是当我尝试运行此功能时

```
backup()->

    mnesia:transaction(fun() ->
  Records = mnesia:select(counter, [{'_', [], ['$_']}]),
  [ok = mnesia:write(count, Record, write) || Record <- Records]
end). 
```

我有这个错误

```
2> model:backup().
{aborted,{bad_type,{counter,test,353}}} 
```

当我使用您的代码时：

```
mnesia:create_table(count, [{record_name, counter}, {attributes, record_info(fields, counter)}, {disc_copies, [node()]}]). 
```

当我尝试运行 model:reset() 时，它会删除表计数和表计数器的数据

我的目标是删除计数器的数据

这是 reset() 的代码

```
reset() ->
    stop(),
    destroy(),
    create(),
    start(),

    {ok}.

destroy() ->
    mnesia:start(),
    mnesia:delete_table(counter),
    mnesia:delete_table(person),
    mnesia:stop(),
    mnesia:delete_schema([node()]).

create() ->
    mnesia:create_schema([node()]),
    mnesia:start(),
    mnesia:create_table(counter, [{attributes, record_info(fields, counter)}, {disc_copies, [node()]}]),
    mnesia:create_table(person, [{attributes, record_info(fields, person)}, {disc_copies, [node()]}]),
  mnesia:create_table(person_backup,[{disc_copies, [node()]},{attributes, record_info(fields, person)},
    {record_name, person}]),
    mnesia:stop(). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:26:19.420

您正在尝试在计数表中写入计数器记录，这会导致错误。有两种方法可以做到这一点。

1.  要么使用一个名为 counter 的记录，也可以将 in 用于计数表 mnesia:create_table(count, [ **{record_name, counter}** , {attributes, record_info(fields, counter)}, {disc_copies, [node()]}]) .

2.  如果如果您有其他字段则无法执行上述操作，您可以在写入之前将所需元素从计数器记录复制到计数记录。

# bash - 我如何 grep 某些日志行

> ID：14941246
> 
> 赞同：1
> 
> 时间：2013-02-18T16:49:37.340
> 
> 标签：bash, grep, debian, rsyslog

我有以下日志（删除了不必要的信息）：

```
Feb 18 11:38:54 Kingston dhcpd: DHCPACK
Feb 18 11:39:01 duxbury /USR/SBIN/CRON[27892]:
Feb 18 17:39:01 ruby /USR/SBIN/CRON[13080]: 
```

如何在确保日期/时间信息位于服务器名称旁边的同时 grep 获取服务器名称（kingston、ruby 或 duxbury）？因此，例如，我可以为金士顿 grep，它会返回“Feb 18 11:38:54 Kingston dhcpd: DHCPACK”，但如果只有“一些数据金士顿”（无日期/时间信息）可用，则不会返回任何内容。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:51:52.617

```
grep -E "^[a-zA-Z]+ [0-9]+ [0-9]+:[0-9]+:[0-9]+ Kingston" 
```

# javascript - 点击并返回

> ID：14941250
> 
> 赞同：1
> 
> 时间：2013-02-18T16:49:55.950
> 
> 标签：javascript, jquery

我有一些代码给我带来了问题。

这个：

```
 onclick="return my_Check();" 
```

然后这个：

```
 onclick="my_Check();" 
```

我的问题是，这不是一回事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:51:07.120

不，第一个返回`my_Check()`函数的返回值。

第二个没有。

这意味着事件可能会响应该返回值。某些事件在返回时会被取消`false`，因此这会对您的页面行为产生影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:52:25.493

不，它们不一样。浏览器内部使用“onclick”属性的字符串值来构造函数：

```
var actualHandler = new Function( "event", attributeValue); // for IE, no "event" 
```

因此，添加`return`关键字意味着处理函数将在完成调用工作后向浏览器返回一个值。如果处理程序想要阻止浏览器执行任何“本机”操作以响应事件，这一点很重要：它可以返回`false`以告诉浏览器什么都不做。

*编辑*——我把参数顺序倒了，但现在已经修好了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:50:48.803

不。

如果您`form`这样做`submit`并且在提交之前运行第一个：

*   如果结果是`false`，表单将**不会**提交

*   在第二个 - 它会。（即使`my_Check();`返回假）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T16:51:57.200

`return`传递给处理程序的任何内容`my_Check`。如果`my_Check`返回`false`，则取消事件的默认操作。没有它，返回的值将被丢弃，并且无论如何都会执行默认操作。

# fonts - Cocos2d - 改变 CCLabelBMFont 大小

> ID：14941251
> 
> 赞同：1
> 
> 时间：2013-02-18T16:49:56.760
> 
> 标签：fonts, cocos2d-iphone, font-size

我的游戏中有这样的文本标签

```
 scoreLabel = [CCLabelBMFont labelWithString:@"0" fntFile:@"hooge2.fnt"];
    scoreLabel.position = ccp( screenWidth * .9 , 20);
    [self addChild:scoreLabel z:depthLevelScore ]; 
```

我可以用代码更改此字体的大小吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:54:59.503

`CCLabelBMFont`是位图字体。这意味着字形大小被硬编码到字体本身中。因此，如果您想更改字形的大小，您需要编辑您的 hooge2.fnt 并重新导出它。

# ajax - 两个 Chrome 用户的 ajax 调用结果不同

> ID：14941252
> 
> 赞同：0
> 
> 时间：2013-02-18T16:49:58.097
> 
> 标签：ajax, google-chrome

我有一个界面，旨在鼓励管理员用户选择它们存在的现有名称条目，然后使其可编辑。

渲染的代码是这样开始的

![前](../Images/1e89dbd32d6894a26fd08876d60eb9db.png)

```
<td class="selectname" colspan="2" style="width: 220px; display: table-cell;">
<select name="PersonSelect" id="PersonSelect" style="font-size:10px">
<option></option>
<option value="123">Aamodt, Jodi</option>
... 
```

并且在进行选择后，选择值被清除并且 TD 被隐藏

```
<td class="selectname" colspan="2" style="width: 220px; display: none;"> 
```

并显示两个新输入：

```
<td class="entername" style="display: table-cell;"><input type="text" size="12" name="First" id="First" value="" class="required valid"></td>
<td class="entername" style="display: table-cell;"><input type="text" size="12" name="Last" id="Last" value="" class="required valid"></td> 
```

![后](../Images/c09c3caf60a1a730c90c966e72b6efdd.png)

出现的问题是，其中一位管理员告诉我，当他在选择菜单中选择一个人时，没有任何变化——例如，文本输入没有出现，选择输入也没有消失。

用户和我都在 Chrome 中访问该页面。用户不是特别技术，但给出的屏幕截图在症状上很清楚。在他的 Chrome 中没有关闭 JavaScript，因为在这些相同的页面加载期间，用户的 JavaScript 验证例程是成功的。用户和我正在加载相同的数据集，因此这不应该是与数据本身相关的损坏问题。

ajax更改功能如下。

有什么建议吗？

```
$("#PersonSelect").change(function() {
$.ajax({
  url: 'person_form_populater.php?person=' + $("#PersonSelect").val() + '&entity=' + $("#Entity").val(),
   dataType: 'json',
     success: function(data) {
    if (data['found']) {
      alert('There is already a record linking that person to this entity');
      $('#First_' + data['found']).focus();
      var origColor = $('#bmformtable_' + data['found']).css("background-color");
      $('#bmformtable_' + data['found']).css("border", '0px solid #f00');
      $('#bmformtable_' + data['found']).animate({
        borderWidth: 5
      }, 2000, "linear", function() {
        $('#bmformtable_' + data['found']).animate({
        borderWidth: 0
      }, 2000, "linear", function() {

      });
      });
    } else {
      $('#togglelink').click();
      $('#First').val(data['First']);
      $('#Last').val(data['Last']);
      $('#Occupation').val(data['Occupation']);
      if (data['Gender'] == 'Male') {
        $("#Gender").attr('checked',true);
      } else if (data['Gender'] == 'Female') {
        $("#Gender2").attr('checked',true);
      } else {
        $("#Gender").attr('checked',false);
        $("#Gender2").attr('checked',false);
      }
      $('#Race').val(data['Race']);
      $('#Income').val(data['Income']);
      $('#Person').val(data['ID']);
    }
   }
});                
}); 
```

// 编辑 此函数允许用户“取消选择”已加载的记录并再次访问选择菜单：

```
$("#togglelink,#togglelink2").click(function(){
    $('#PersonSelect option').attr('selected', false);
    $('#First').val('');
    $('#Last').val('');
    $('#Occupation').val('');
    $("#Gender").attr('checked',false);
    $("#Gender2").attr('checked',false);
    $('#Race').val('');
    $('#Income').val('');
    $('#Person').val('');
    $(".entername, .selectname, #togglelink, #togglelink2").toggle();                                
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:58:40.407

You said there are no errors in the users browser. I think there is an error but you are not seeing it.

log errors in the ajax call by doing the following:

```
$.ajax({
  ...
}).error(function (data, textStatus, xhr) {
     console.log("error when using ajax" + data);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:01:51.557

如果新功能是在现有文件上实现的，则可能是缓存问题。

如果要求用户清除缓存不是一个选项，请尝试将“版本”附加到 javascript：

```
<script src="/js/yourjavascript.js?20130218" type="text/javascript"> 
```

之后的值？不会影响 javascript 但会更改资源的名称，告诉浏览器此文件不在缓存中，因此他必须请求它。

您还可以在控制台上检查服务器响应，以确保服务器在这两种情况下都正确响应。

# actionscript-2 - 围绕 24 小时钟面 (as2) 放置影片剪辑 - 时间管理

> ID：14941259
> 
> 赞同：1
> 
> 时间：2013-02-18T16:50:18.503
> 
> 标签：actionscript-2, flash

我目前正在开展一个项目，将我一天的活动放在一个 24 小时钟面周围。最后的结果是一个时间管理应用程序，它可以让你在一天中找到可以更熟练地使用的空间；然而; 我遇到了一些麻烦，那就是将每个电影剪辑（每个都代表一个活动）分配到钟面上的正确位置。

我正在使用 XML 文件从中提取时间，并且计算电影剪辑应放置在时钟上的角度是相对于中央电影剪辑完成的。

for (i = 0; i < TimeSheet.length; i++) { var counter = i + 1;

```
 sortXML(TimeSheet);
    }
} 
```

}; 函数 sortXML(TimeSheet){

```
var activity = TimeSheet[i].firstChild.nodeValue;
var description = TimeSheet[i].firstChild.nextSibling.childNodes;
var HrStart = TimeSheet[i].firstChild.nextSibling.nextSibling.childNodes;
var MinStart = TimeSheet[i].firstChild.nextSibling.nextSibling.nextSibling.childNodes;
var HrEnd = TimeSheet[i].firstChild.nextSibling.nextSibling.nextSibling.nextSibling.childNodes;
var MinEnd = TimeSheet[i].firstChild.nextSibling.nextSibling.nextSibling.nextSibling.nextSibling.childNodes;

var place = TimeSheet[i].firstChild.nextSibling.nextSibling.nextSibling.nextSibling.nextSibling.nextSibling.childNodes;
var creativity = TimeSheet[i].firstChild.nextSibling.nextSibling.nextSibling.nextSibling.nextSibling.nextSibling.nextSibling.childNodes;
var usefulness = TimeSheet[i].firstChild.nextSibling.nextSibling.nextSibling.nextSibling.nextSibling.nextSibling.nextSibling.nextSibling.childNodes;
var enjoyment = TimeSheet[i].firstChild.nextSibling.nextSibling.nextSibling.nextSibling.nextSibling.nextSibling.nextSibling.nextSibling.nextSibling.childNodes;
var focus = TimeSheet[i].firstChild.nextSibling.nextSibling.nextSibling.nextSibling.nextSibling.nextSibling.nextSibling.nextSibling.nextSibling.nextSibling.childNodes;

category = TimeSheet[i].nodeName;

HourStart = parseInt(HrStart, 10);
MinuteStart = parseInt(MinStart, 10);
HourEnd = parseInt(HrEnd, 10);
MinuteEnd = parseInt(MinEnd, 10);

Creativity = parseInt(creativity, 10);
Focus = parseInt(focus, 10);
Usefulness = parseInt(usefulness, 10)

var TimeSpent = ((HourEnd*60)+MinuteEnd) - ((HourStart*60)+MinuteStart) ;
//var ActivityMinutes = (HourStart*60)+MinuteStart;
var TimeStart = (HourStart*60)+MinuteStart;
var BobPlacement = ((TimeStart/1440)*360) // where the bob gets blaced on the circle
//var BobPlacement = (360/1440)*TimeStart;

//var radius = 150 + Usefulness;
var radius = 200 + (Usefulness/2);
var xcenter = _root.bobCentral._x;
var ycenter = _root.bobCentral._y;
var degree = (BobPlacement + 180)*-1;;
var radian;

radian = (degree/180)*Math.PI;
newBob._x = xcenter+Math.cos(radian)*radius;
newBob._y = ycenter-Math.sin(radian)*radius;

/*trace("-----------------------------------");
trace("category = "+category);
trace("activity = " + activity);
trace("Description = " + description);
trace("time start = " + HourStart + ":" + MinuteStart);
trace("time end = " + HourEnd + ":" + MinuteEnd);
trace("Duration of activity = "+TimeSpent);

trace("place = "+ place);
trace("creativity = "+ creativity);
trace("usefulness = "+ usefulness);
trace("enjoyment = "+ enjoyment);
trace("focus = "+ focus);
trace("Time Started = "+ TimeStart);
trace("palce on circle = "+ BobPlacement);
*/

dupeMC(TimeSheet, category, activity, description, HourStart, MinuteStart, TimeSpent, Creativity, Focus, Usefulness); 
```

} function dupeMC(TimeSheet, category, activity, description, HourStart, MinuteStart, TimeSpent, Creativity, Focus, Usefulness){

```
bob.duplicateMovieClip("bob"+i, i);

newBob = eval("bob"+i); 
```

任何帮助将非常感激

如果我提出这个问题的方式令人困惑，我提前道歉。

# python - 熊猫数据框中最大值的索引和列

> ID：14941261
> 
> 赞同：3
> 
> 时间：2013-02-18T16:50:24.733
> 
> 标签：python, pandas

我有一个五列五行的python数据框df。我想获取最大三个值的行名和列名

例子：

```
df = 

  A   B  C  D  E  F
1 00 01 02 03 04 05
2 06 07 08 09 10 11
3 12 13 14 15 16 17
4 18 19 20 21 22 23
5 24 25 26 27 28 29 
```

输出显示类似 [5,F],[5,E],[5,D]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T17:06:39.023

您可以`unstack`在排序之前使用：

```
>>> df
    A   B   C   D   E   F
1   0   1   2   3   4   5
2   6   7   8   9  10  11
3  12  13  14  15  16  17
4  18  19  20  21  22  23
5  24  25  26  27  28  29
>>> df.unstack()
A  1     0
   2     6
   3    12
   4    18
   5    24
B  1     1
   2     7
   3    13
   4    19
   5    25
[...]
F  1     5
   2    11
   3    17
   4    23
   5    29 
```

所以

```
>>> df2 = df.unstack().copy()
>>> df2.sort()
>>> df2[-3:]
D  5    27
E  5    28
F  5    29
>>> df2[-3:].index
MultiIndex
[(D, 5.0), (E, 5.0), (F, 5.0)] 
```

甚至

```
>>> df.unstack()[df.unstack().argsort()].index[-3:]
MultiIndex
[(D, 5.0), (E, 5.0), (F, 5.0)] 
```

[我没有费心颠倒顺序：坚持`[::-1]`到底应该这样做。]

# jquery - 用 jQuery 覆盖 JSF 组件方法

> ID：14941269
> 
> 赞同：0
> 
> 时间：2013-02-18T16:50:50.500
> 
> 标签：jquery, jsf, jsf-2, primefaces

我想使用 jQuery覆盖*p:inputText*`onblur()` (commentInput) 组件的`onfocus()`方法。但我想我正在努力获取这个组件的固定 Html ID。到目前为止我尝试过：

 *```
jQuery(document).ready(function() {
     $(document.getElementById("[#{p:component('commentInput')}]")).onblur(function() {
        $(this).css({'background-color':'#DFD8D1'});
     });
}); 
```

或者：

```
jQuery(document).ready(function() {
     $("[id='#{p:component('commentInput')}']").onblur(function() {
        $(this).css({'background-color':'#DFD8D1'});
         });
}); 
```

两者都给出相同的结果：`Uncaught TypeError: Object [object Object] has no method 'onblur'`。

Xhtml 代码与此类似：

```
<h:form id="dtForm">
<p:outputPanel id="dataTablePanel">
    <p:dataTable id="dataTable">
        <p:column id="column">
            <p:panel>
                <p:inputText id="commentInput">
                </p:inputText>
            </p:panel>
        </p:column>
    </p:dataTable>
</p:outputPanel>
</h:form> 
```

当我使用*inputText*组件时，我遇到了另一个问题：

```
<p:inputText id="commentInput" onkeypress="if (event.keyCode == 13) {onchange(); return false;}" required="#{not empty statusBean.newComment}">
    <f:ajax event="change" listener="#{statusBean.test}" />
</p:inputText> 
```

它以意想不到的方式触发事件；假设光标在 inputText 中并输入 sth。并单击页面中的其他位置，组件会触发 ajax 事件，而预期不会这样做。我认为这个组件不适合像在 Facebook 或某事中那样获得对状态的评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:53:39.800

这里有两个问题。首先，正如 Anthony Grist 在他的回答中所说，定义模糊是由`blur()`not完成的`onblur()`。JSF 中的 ID 包含`:`作为 id 分隔符的符号，因此您需要转义这些`:`符号。Primefaces 为此内置了函数，它还`#`在开始时添加了符号以在 jQuery 中使用它：

```
jQuery(PrimeFaces.escapeClientId("#{p:component('commentInput')}")).blur(function () {
  // your code here...
}); 
```

另一方面，为什么要复杂化，`p:inputText`是有`onblur`属性的。有了它，您可以定义要执行的 javascript 回调。它用作标准 HTML 属性：

```
<p:inputText onblur="myFunction()"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:56:17.537

用于绑定`blur`事件处理程序的 jQuery 函数只是`.blur()`，不是`.onblur()`。此外，在您的第一个示例中，您混合了对 jQuery 函数的调用和对本机 JavaScript 的调用`document.getElementById()`。

以下应该有效：

```
$("##{p:component('commentInput')}")).blur(function() {
    $(this).css({'background-color':'#DFD8D1'});
}); 
```

第一个`#`是 jQuery 选择器的一部分，第二个是（我假设）JSF 代码的一部分，用于获取该元素的正确 id。我不能保证在服务器端不会出现解析问题（我没有使用 JSF 的经验），但我希望它能够工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T16:57:13.383

只需使用`widgetVar`您的属性`<p:inputText>`并使用此 ID 调用您的组件：

```
<p:inputText id="commentInput" widgetVar="txtCommentInput" ... >

...

jQuery(document).ready(function() {
     txtCommentInput.blur(function() {
        $(this).css({'background-color':'#DFD8D1'});
     });
}); 
```

仅注意，不要将`id`and`widgetVar`属性设置为相同的值： http: [//forum.primefaces.org/viewtopic.php?f=3 &t=18830#p59600](http://forum.primefaces.org/viewtopic.php?f=3&t=18830#p59600)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T22:39:58.613

几个小时后，我找到了正确的方法，我认为所有其他建议对常规情况很有用，但我的建议是特殊的，因为 DataTable 组件，它破坏了其他解决方案，所以我找到了一个更贪婪的解决方案：

```
$(window).bind("load", function() {
    var rowSize = '#{bean.numOfRows}';
    for (var i=0;i &lt; rowSize;i++)
    {
        var rowIndex=i;
        var str = 'dataTableForm' + ':dataTable:' +  rowIndex + ':commentInput';
        var element = $(document.getElementById(str));
        element.blur(function () {
           $(this).css({'box-shadow': '0 0 5px #EB2F28'});
           $(this).css({'background-color':'#DFD8D1'});
        });
     }
}); 
```

函数的第一行决定了页面加载后的执行。然后我`inputText`为`dataTable`. `var str`具有每个`inputText`组件的固定 ID 的值，其余部分；只是 CSS。

但我的情况比这更糟糕。我正在做一个 ajax 更新来确定 css 值，即使它执行了页面加载，它也会覆盖 javascript 函数值。执行顺序如下：

```
--Page Load
----Function Executes
------Ajax Call 
```

能够在决赛中执行功能。我将函数标题更改为：`function afterLoad()`并通过以下方式在 ajax 更新程序按钮中调用它：`<p:commandLink oncomplete="afterLoad()"/>`并且 BOOM IT WORKS！！！！*

# websphere - 如何使用 WAS v8.5 连接到本地 JNDI

> ID：14941273
> 
> 赞同：1
> 
> 时间：2013-02-18T16:51:05.093
> 
> 标签：websphere, ibm-mq, mq, websphere-8

所以我在 WASv8.5 中设置了几个 MQ。我已经测试了这些并且它们工作正常，现在我需要测试一些功能。为了做到这一点，我下载了“新”MQJExplorer，我注意到从上下文加载 JNDI 的能力。现在，由于 Websphere 实例在本地运行，我可以直接挂接到 Websphere 上下文吗？我尝试选择 Websphere Application Server，它给了我一个以开头的地址框

> iiop://

我尝试使用...

> iiop://localhost

但这没有用，也没有

> iiop://localhost:9064

我尝试查看 iiop，但我真的找不到如何在 WebSphere 上启用它。我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-10-22T17:35:11.913

确保端口是 Bootstrap 端口，您也可以尝试在 WAS 控制台下添加 providerURL：Environment > Naming > Name Space Binding。

# compiler-construction - 是否有设计用于编译成（大型）神经网络的编程语言？

> ID：14941276
> 
> 赞同：2
> 
> 时间：2013-02-18T16:51:08.360
> 
> 标签：compiler-construction, programming-languages, artificial-intelligence, neural-network

不久前我考虑过这个问题，也许应该（或已经）有一种编程语言可以实际编译成一个大型神经网络，理想情况下，它可以很好地扩展并行计算，并具有其他一些 NN 特定的优势，比如学习.

正如我不久前发现的一篇论文所示，这应该是可能的。人们为 pascal（称为 jaNNet）编写了一个编译器，可以编译成一个神经网络。似乎它有很多限制，并且不能很好地使用递归，但是：

[http://blob.lri.fr/publication/tcs.pdf](http://blob.lri.fr/publication/tcs.pdf)

是否有任何其他项目试图为为神经网络*设计*的特定语言编写编译器？

我也在考虑嵌入式优化功能等功能。所以我可以写一个“模块”，我在其中指定一些输入和一些输出，并定义一个描述模块适用性的函数，因此编译器（以及后来的运行时）可以不断优化“模块”。

这些模块应该很容易组合在一起形成一个更大的程序。显然，诸如 if 和循环、变量和函数等语句应该是可能的。

我想知道是否没有这样的事情，因为我认为这将使机器人和更大的人工智能项目的开发更容易或至少更快。

我问自己的另一个问题是，在并行执行和性能方面，这样的编译程序是否可以击败传统程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:47:43.537

我从未听说过用于开发 ANN 的编程语言。在我看来，您可能想要的不是成熟的编程语言，而是特定领域的语言。使用完整的编程语言，您必须处理输入和输出以及程序控制等。要获得说的好处，需要做很多工作`theseNeurons feedForwardTo thoseNeurons`。

OTOH，对于大多数实现语言来说，特定领域的语言很难单独编译到 GPU，我认为这是 ANN 特定语言的巨大（潜在）胜利（也就是说，ANN 非常适合高度并行架构，但 GPGPU 和其他高性能编程技术非常专业）。

# php - Wordpress 去除空格

> ID：14941277
> 
> 赞同：2
> 
> 时间：2013-02-18T16:51:09.063
> 
> 标签：php, wordpress

我有这段代码，它在 wordpress 的循环外运行摘录。

```
<?php
function get_excerpt_by_id($post_id){
$the_post = get_post($post_id); //Gets post ID
$the_excerpt = $the_post->post_content; //Gets post_content to be used as a basis for the excerpt
$excerpt_length = 35; //Sets excerpt length by word count
$the_excerpt = strip_tags(strip_shortcodes($the_excerpt)); //Strips tags and images
$words = explode(' ', $the_excerpt, $excerpt_length + 1);
if(count($words) > $excerpt_length) :
array_pop($words);
array_push($words, '…');
$the_excerpt = implode(' ', $words);
endif;
$the_excerpt = '<p>' . $the_excerpt . '</p>';
return $the_excerpt;
}
?> 
```

正如你所看到的，它删除了所有内容，如图像和其他内容，只留下文本，但是当它这样做时，它也会输出很多空格（返回）。我尝试使用 \n、\t、\r 删除它们，但显然我不知道将代码放在哪里才能使其正常工作。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:55:11.660

**尝试：**

```
<?php
function get_excerpt_by_id($post_id){
$the_post = get_post($post_id); //Gets post ID
$the_excerpt = $the_post->post_content; //Gets post_content to be used as a basis for the excerpt
$excerpt_length = 35; //Sets excerpt length by word count
$the_excerpt = strip_tags(strip_shortcodes($the_excerpt)); //Strips tags and images
$words = explode(' ', $the_excerpt, $excerpt_length + 1);
if(count($words) > $excerpt_length) :
array_pop($words);
array_push($words, '…');
$the_excerpt = implode(' ', $words);
endif;
$the_excerpt = '<p>' . $the_excerpt . '</p>';
// LOOK HERE
$the_excerpt = str_replace("\r", "", $the_excerpt); // Replace carriage returns
$the_excerpt = str_replace("\n", "", $the_excerpt); // Replace new lines
// .. etc
return $the_excerpt;
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:15:28.867

尝试这个

```
<?php
    function get_excerpt_by_id($post_id){
       $the_post = get_post($post_id); //Gets post ID
       $the_excerpt = $the_post->post_content; //Gets post_content to be used as a basis for the excerpt
       $the_excerpt = apply_filters('the_excerpt', $the_excerpt);
       return $the_excerpt;
    }
?> 
```

# javascript - Jasmine Javascript 单元测试附加 HTML

> ID：14941278
> 
> 赞同：1
> 
> 时间：2013-02-18T16:51:10.223
> 
> 标签：javascript, jquery, html, jasmine

我有以下茉莉花测试，

```
describe('test', function () {

    beforeEach(function() {  
        loadFixtures('../../Fixtures.html'); 
    });

    it('should add some html', function () {  

        $("#some_btn").click(); 

        expect($("#some_div")).toExist();        
    });

   it('should do something with the div', function () {  

        //do something

        expect($("#some_div")).toHaveClass("some_class");         
    });
}); 
```

触发点击会执行一个函数，witch会在html页面中添加一个div，

```
function addDiv(){
    $("#existing_div").append('<div id="some_div"></div>');
} 
```

这是html，

```
...
<div id="some_btn" onclick="addDiv();"></div>
...
<div id="existing_div">
    <!--where the div is supposed to be inserted-->
</div> 
```

第二次测试失败。我是茉莉花的新手，这会失败吗？我错过了什么吗？

谢谢..

编辑：我编辑了代码，我复制错了，缺少测试的最后一部分。对不起 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:43:11.533

当您每次在运行单个规范之前加载夹具时，第二个规范必须失败，因为它从未触发过点击，并且附加 div 的功能为此规范执行了神经。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-08T11:29:35.703

尝试把你的`loadFixtures('../../Fixtures.html');`in`beforeAll`块而不是`beforeEach`.

# android - Android 连续播放音频

> ID：14941279
> 
> 赞同：0
> 
> 时间：2013-02-18T16:51:22.627
> 
> 标签：android, audio

我想连续播放一个正在下载的音频文件。请注意，没有从另一端发送的固定大小的文件。就像从一侧发送数据而在另一侧接收数据一样。我只想让这些数据继续播放（音频），直到没有更多数据可用。

关于如何在开始接收时播放连续发送的音频数据的任何建议？

# .net - 未找到 NServiceBus.Address 的处理程序

> ID：14941282
> 
> 赞同：0
> 
> 时间：2013-02-18T16:51:31.433
> 
> 标签：.net, nservicebus, windsor-3.0

我使用 Castle Windsor 的 3.2.0 版和 NServiceBus 的 3.3.5 版。

我在这样的控制台应用程序中配置我的总线：

```
 NServiceBus.Configure.With()
        .CastleWindsorBuilder(container)
        .Log4Net()
        .XmlSerializer()
        .MsmqTransport()
            .IsTransactional(true)
        .UnicastBus()
        .CreateBus()
        .Start(() => Configure.Instance.ForInstallationOn<NServiceBus.Installation.Environments.Windows>().Install()); 
```

此总线将仅由此控制台应用程序用于向总线发送消息，因此我不使用 nservice 总线主机。

浏览该行代码时，应用程序抛出异常，指出找不到 NServiceBus.Address 的处理程序。事实上，检查我的容器，我没有看到任何注册。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:10:58.157

您是否在配置文件中为 Castle.Windsor 和 Castle.Core 添加了绑定重定向？

```
<runtime>
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <dependentAssembly>
    <assemblyIdentity name="Castle.Windsor" publicKeyToken="407dd0808d44fbdc" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-3.2.0.0" newVersion="3.2.0.0" />
  </dependentAssembly>
  <dependentAssembly>
    <assemblyIdentity name="Castle.Core" publicKeyToken="407dd0808d44fbdc" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-3.2.0.0" newVersion="3.2.0.0" />
  </dependentAssembly>
</assemblyBinding> 
```

# python - 如何修复 TypeError：'int' 对象不可迭代？

> ID：14941288
> 
> 赞同：15
> 
> 时间：2013-02-18T16:51:58.193
> 
> 标签：python

我正在尝试编写一个程序，允许您输入班级中的学生人数，然后为每个学生输入 3 个考试成绩以计算平均值。我是编程新手，我不断收到一个错误，我不明白它的含义或如何解决它。这是我到目前为止所拥有的：

```
students=int(input('Please enter the number of students in the class: '))

for number in students:
        first_grade=(input("Enter student's first grade: "))
        second_grade=(input("Enter student's second grade: "))
        third_grade=(input("Enter student's third grade: ")) 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-18T16:55:59.557

当你写

```
for number in students: 
```

你的意图是，“运行这段代码`students`时间，`students`我刚刚输入的值在哪里。” 但是在 Python 中，传递给语句的东西[需要`for`是](http://docs.python.org/2/tutorial/controlflow.html#for-statements)某种可迭代的对象。在这种情况下，你想要的只是一个[`range`声明](http://docs.python.org/release/1.5.1p1/tut/range.html)。这将生成一个数字列表，遍历这些数字将使您的`for`循环执行正确的次数：

```
for number in range(students):
    # do stuff 
```

在幕后，`range`只是生成一个序列号列表：

```
>>> range(5)
[0, 1, 2, 3, 4] 
```

就您而言，数字是多少并不重要。以下两个`for`语句会做同样的事情：

```
for number in range(5):

for number in [1, 3, 97, 4, -32768]: 
```

但是，`range`如果您需要更改循环中的某种列表（这可能是您稍后需要做的），使用该版本被认为更惯用并且更方便。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T16:54:25.573

数字不能被迭代。您可能正在寻找的是该`range`函数，它将创建一个数字序列，直到您想要的数字：

`for number in range(1, students + 1):`

我在那里添加 + 1 的原因是因为 range 的第二个参数是独占的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-01T07:01:54.667

试试这个...它会工作...

```
i=0
x = "abcd"

print("Using for loop printing string characters")
for i in range(len(x)):
    print(x[i]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-22T20:45:37.747

试试这个：

```
 students=int(input('Please enter the number of students in the class: '))

  for number in range(students):
        first_grade=(input("Enter student's first grade: "))
        second_grade=(input("Enter student's second grade: "))
        third_grade=(input("Enter student's third grade: ")) 
```

# excel - 删除单元格内容并向上移动而不排序

> ID：14941293
> 
> 赞同：1
> 
> 时间：2013-02-18T16:52:18.913
> 
> 标签：excel, excel-2003, vba

我想知道是否有人可以帮助我。

该网站上的@Doug Clancy 提供了一些非常受欢迎的指导和解决方案（如下所示），它清除单元格内容，并在必要时将行向上移动以填充空白。

```
Sub DelRow()
Dim RangeToClear As Range
Dim msg As VbMsgBoxResult

Sheets("Input").Protect "handsoff", UserInterfaceOnly:=True
Application.EnableCancelKey = xlDisabled
Application.EnableEvents = False
msg = MsgBox("Are you sure you want to delete this row?", vbYesNo)
If msg = vbNo Then Exit Sub
With Selection
    Application.Intersect(.Parent.Range("A:S"), .EntireRow).Interior.ColorIndex = xlNone
    Application.Intersect(.Parent.Range("T:AE"), .EntireRow).Interior.ColorIndex = 42
    On Error Resume Next
    Set RangeToClear = Selection.SpecialCells(xlCellTypeConstants)
    On Error GoTo 0    ' or previously defined error handler
    If Not RangeToClear Is Nothing Then
        RangeToClear.ClearContents
    End If
    ActiveSheet.Range("A7:AG400").Sort Key1:=Range("B7"), _
    Order1:=xlAscending, Header:=xlNo, _
    OrderCustom:=1, MatchCase:=False, _
    Orientation:=xlTopToBottom, _
    DataOption1:=xlSortNormal

    Application.Intersect(.Parent.Range("C:AE"), .EntireRow).Locked = True
    Application.Intersect(.Parent.Range("AG:AG"), .EntireRow).Locked = True
End With
Application.EnableEvents = True
End Sub 
```

代码可以正常工作，但我有一个小问题，@Doug Clancy 没有错，更多的是我的要求发生了变化。

为了指导用户在哪一行添加新记录，我设置了一个文本信号，即“输入您的姓名”，它始终出现在第一个空行上，为用户添加新记录做好准备。不幸的是，这个值也被排序了，这就是我的问题所在。

几天来，我一直在尝试提出一个解决方案，从上面的代码中删除“排序”功能，而其余功能保持不变。不幸的是没有任何成功。

有人可以请看一下这个并就如何删除单元格的排序提供一些指导。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:43:10.187

在过去几天的工作之后，我整理了以下解决方案：

```
Sub DelRow()

Dim DoesItExist As Range
Dim msg As VbMsgBoxResult
Dim RangeToClear As Range

Sheets("Input").Protect "handsoff", UserInterfaceOnly:=True
Application.EnableCancelKey = xlDisabled
Application.EnableEvents = False
msg = MsgBox("Are you sure you want to delete this row?", vbYesNo)
If msg = vbNo Then Exit Sub
With Range("B7", Range("B" & Rows.Count).End(xlUp))
    .Value = Evaluate("if(" & .Address & "<>"""",if(isnumber(search(""Enter your name""," & _
        .Address & ")),""""," & .Address & "),"""")")
End With
With Selection
    Application.Intersect(.Parent.Range("A:S"), .EntireRow).Interior.ColorIndex = xlNone
    Application.Intersect(.Parent.Range("T:AE"), .EntireRow).Interior.ColorIndex = 42
    On Error Resume Next
    Set RangeToClear = Selection.SpecialCells(xlCellTypeConstants)
    On Error GoTo 0    ' or previously defined error handler
    If Not RangeToClear Is Nothing Then
        RangeToClear.ClearContents
    End If

    ActiveSheet.Range("A7:AG400").Sort Key1:=Range("B7"), _
    Order1:=xlAscending, Header:=xlNo, _
    OrderCustom:=1, MatchCase:=False, _
    Orientation:=xlTopToBottom, _
    DataOption1:=xlSortNormal

    Application.Intersect(.Parent.Range("C:AE"), .EntireRow).Locked = True
    Application.Intersect(.Parent.Range("AG:AG"), .EntireRow).Locked = True
End With
    Set DoesItExist = Sheets("Input").Range("B7:B10").Find("Enter your name")
       If Not DoesItExist Is Nothing Then Exit Sub
       Sheets("Input").Select
       Range("B" & Rows.Count).End(xlUp).Offset(1, 0) = "Enter your name"
       Columns("B:B").Locked = False  ' to unlock the whole column
       Columns("B:B").SpecialCells(xlCellTypeBlanks).Locked = True
Application.EnableEvents = True
End Sub 
```

# vim - 使用 shell 脚本自动化 VIM EDITOR 和更新值（类似于通过 shell 脚本编辑 crontab）

> ID：14941296
> 
> 赞同：2
> 
> 时间：2013-02-18T16:52:20.980
> 
> 标签：vim, chef-infra

我正在尝试通过 Shell 脚本对类似于 crontab 编辑的命令自动进行 VI 编辑，但到目前为止对我不起作用。

这是 admin 为 true 的最终 json：

```
'{"name":"SQLSRVR","admin":"true","json_class":"Chef::ApiClient","chef_type":"client"}' 
```

如您所见，EDITOR 环境变量必须设置或作为命令行选项 -e 传递

```
[root@vrhost user]# knife client edit SQLSRVR
ERROR: RuntimeError: Please set EDITOR environment variable

[root@vrhost user]# knife client edit
USAGE: knife client edit CLIENT (options)
-s, --server-url URL             Chef Server URL
-k, --key KEY                    API Client Key
    --[no-]color                 Use colored output, defaults to enabled
-c, --config CONFIG              The configuration file to use
    --defaults                   Accept default values for all questions
-d, --disable-editing            Do not open EDITOR, just accept the data as is
-e, --editor EDITOR              Set the editor to use for interactive commands
-E, --environment ENVIRONMENT    Set the Chef environment
-F, --format FORMAT              Which format to use for output
-u, --user USER                  API Client Username
    --print-after                Show the data after a destructive operation
-V, --verbose                    More verbose output. Use twice for max verbosity
-v, --version                    Show chef version
-y, --yes                        Say yes to all prompts for confirmation
-h, --help                       Show this message
FATAL: You must specify a client name 
```

以下命令打开 vim 编辑器进行编辑，以将 ["admin": "false"] 更改为 ["admin": "true"]：

```
[root@vrhost user]# knife client edit SQLSRVR -e vim 

{
  "name": "SQLSRVR",
  "admin": false,
  "json_class": "Chef::ApiClient",
  "chef_type": "client",
} 
```

我试图通过一个 shell 脚本来做到这一点，并想自动化它并尝试了很多选项，但到目前为止还没有运气。

```
[root@vrhost ~]# (echo ^[:g/false/s/false/true/^[:wq!^M) | knife client edit SQLSRVR -e vim
Vim: Warning: Input is not from a terminal
Object unchanged, not saving 
```

或者

```
[root@vrhost user]# echo (^[echo     '{"name":"SQLSRVR","admin":"true","json_class":"Chef::ApiClient","chef_type":"client"}'^[:w    q!^M) | knife client edit SQLSRVR -e

[root@vrhost ~]# knife client show SQLSRVR
admin:       false
chef_type:   client
json_class:  Chef::ApiClient
name:        SQLSRVR 
```

这与通过 shell 脚本自动编辑 crontab 非常相似，但这对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:27:49.300

除非您真的需要特殊的 Vim 功能，否则您最好使用非交互式工具，例如`sed`,`awk`或 Perl / Python / Ruby /*你最喜欢的脚本语言*。

*也就是说，您可以使用静默批处理模式*以非交互方式使用 Vim 。

```
vim -T dumb --noplugin -n -es -S "commands.ex" "filespec" 
```

除了通过外部脚本从 via 中读取命令外`-S "commands.ex"`，您还可以直接通过 via 给出一些命令`-c cmd1 -c cmd2`。有关`:help -s-ex`更多信息，请参阅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:05:01.007

查看

```
$ knife client edit --help
[...]
-d, --disable-editing            Do not open EDITOR, just accept the data as is 
```

所以我猜你可以改变值而不用在 vim 中编辑。只是：

*   获取json格式的客户端数据。
*   用 sed 替换所需的值。
*   从文件上传数据。

代码：

```
$ knife client show -Fj SQLSRVR > SQLSRVR.json
$ sed -i.old "s/\"admin\": true,/\"admin\": false,/" SQLSRVR.json
$ knife client edit -d SQLSRVR < SQLSRVR.json 
```

类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T19:12:15.127

Here are some links to references:

i) [http://mirror.hep.wisc.edu/stable/chef/chef-server-webui/app/controllers/clients_controller.rb](http://mirror.hep.wisc.edu/stable/chef/chef-server-webui/app/controllers/clients_controller.rb)

ii) [http://www.rubydoc.info/github/opscode/chef/master/Shell/Extensions](http://www.rubydoc.info/github/opscode/chef/master/Shell/Extensions) - tried but unable to get it to work

Finally did the following (it does give 409 the 2nd time on call and I did not need to do it a 2nd time):

```
# call to below rb, CLIENTNAME is the name of the client and STATE is true/false
$ knife exec clienttransform.rb CLIENTNAME STATE

$ cat clienttransform.rb

Chef::Config[:solo] = false

class Company
  class TransformClient

    attr_accessor :clientname
    attr_accessor :isclientadmin

    def initialize(client_name, is_client_admin)
      @clientname = client_name
      @isclientadmin = is_client_admin
    end

    def transform
      client=Chef::ApiClient.load(@clientname)
      # puts "client.name : " + client.name
      # puts "client.admin : " + client.admin.to_s
      # puts "XX - clientname : " + @clientname
      # puts "XX - isclientadmin : " + @isclientadmin.to_s
      boolisclientadmin = !!@isclientadmin
      client.admin(boolisclientadmin)
      client.save()
    end

  end

end

client_name = ARGV[2].to_s()
is_client_admin = ARGV[3].to_s()

# puts "YY - client_name : " + client_name
# puts "YY - is_client_admin : " + is_client_admin

trc = Company::TransformClient.new(client_name, is_client_admin)
trc.transform

exit 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T09:38:36.167

只需设置您的编辑器，它就会工作。就我而言，我使用 vim 编辑器，这就是为什么我的命令如下：

```
export EDITOR=vim 
```

# iphone - 标签未显示在覆盖 UIView 中

> ID：14941310
> 
> 赞同：1
> 
> 时间：2013-02-18T16:53:23.050
> 
> 标签：iphone, ios, objective-c, ipad

好吧，我已经做了一百万次这种事情，但这个特殊情况让我无法理解，我敢肯定它只是我想念的一些愚蠢的事情......

但我试图在 mapView 上显示一个 UIView，以给人一种 mapview 被“禁用”的印象。

我创建了一个 UIView 子类并添加了一个标签。像这样...

。H

```
 #import <UIKit/UIKit.h>

  @interface DisabledOverlayView : UIView

  @property (nonatomic, strong) UILabel *disabledOverlayViewText;

  @end 
```

没什么复杂的...

在我的 .m 中，我设置了文本并将其添加到我的 UIView 中。

```
@synthesize disabledOverlayViewText = _disabledOverlayViewText;

- (id)initWithFrame:(CGRect)frame
{
 self = [super initWithFrame:frame];
if (self) {

    self.backgroundColor = [UIColor blackColor];
    self.alpha = 1;

    _disabledOverlayViewText.textColor = [UIColor whiteColor];
    _disabledOverlayViewText.frame = CGRectMake(0, 0, 200, 200);
    // [_disabledOverlayViewText setCenter:self.center];
    _disabledOverlayViewText.text = @"testing";
    [self addSubview:_disabledOverlayViewText];
}
return self; 
```

}

然后我希望使用这个覆盖的类我称之为......

```
 DisabledOverlayView *disabledView = [[DisabledOverlayView alloc] initWithFrame:CGRectMake(12, 12, _mapView.frame.size.width, _mapView.frame.size.height)];
    disabledView.disabledOverlayViewText.text = @"No Location";
    [self.view addSubview:disabledView]; 
```

这些都不是太复杂..但标签没有出现。覆盖看起来很好，但没有标签文本。我弄乱了标签的框架，认为它可能不在可见视图中，但没有骰子。我无法弄清楚发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:09:28.570

`initWithFrame`用下面的代码替换你的方法。我添加了 alloc init 行并更改了`label`. 试试看它是否有效:)

```
 - (id)initWithFrame:(CGRect)frame
 {
    self = [super initWithFrame:frame];
    if (self) {

        self.backgroundColor = [UIColor blackColor];
        self.alpha = 1;

       _disabledOverlayViewText = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 200, 200)];
       _disabledOverlayViewText.textColor = [UIColor whiteColor];
       _disabledOverlayViewText.backgroundColor = [UIColor blackColor];
        // [_disabledOverlayViewText setCenter:self.center];
       _disabledOverlayViewText.text = @"testing";
       [self.view addSubview:_disabledOverlayViewText];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:13:23.633

似乎标签没有分配，它是零。

试试这个

*   (id)initWithFrame:(CGRect)frame { self = [super initWithFrame:frame]; 如果（自我）{

    self.backgroundColor = [UIColor blackColor]; self.alpha = 1;

    **self.disabledOverlayViewText = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 200, 200)];**

    _disabledOverlayViewText.textColor = [UIColor whiteColor];

    // [_disabledOverlayViewText setCenter:self.center];

    _disabledOverlayViewText.text = @"测试";

    [self addSubview:_disabledOverlayViewText]; }

# triggers - 如何在自动创建的文件上配置“编辑时”触发器（使用谷歌脚本）？

> ID：14941311
> 
> 赞同：0
> 
> 时间：2013-02-18T16:53:22.527
> 
> 标签：triggers, google-apps-script, google-sheets

*我遵循了以下教程：* [https](https://developers.google.com/apps-script/storing_data_spreadsheets#writing-1) ://developers.google.com/apps-script/storing_data_spreadsheets#writing-1 。

首先，我有一个源电子表格，其中包含以下列（名字、姓氏和部门）和相关数据（在此处查看源文件的屏幕截图：[https ://developers.google.com/apps-script/images/reading_spreadsheet_data_image1 .jpg](https://developers.google.com/apps-script/images/reading_spreadsheet_data_image1.jpg)）。

然后，我为每个部门名称动态创建一个工作表（参见教程代码）：每个工作表都包含有关该部门员工的信息。（见教程截图）。

我已经定制了本教程，以动态地为每个部门创建一个电子表格，而不是每个部门一个工作表。

当每个子电子表格被修改时，我想启动一个“编辑时”触发器。此“编辑时”触发器将使用所有子电子表格数据重新生成源电子表格。

我已经测试了这个功能，但似乎我无法在远程电子表格上创建“OnEdit”触发器（执行验证问题）。似乎只能手动创建（“On Edit”触发器）。

**是否可以使用 Google Script 动态创建远程电子表格上的触发器？**

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T21:01:53.603

您可以创建一个触发器函数来处理来自远程电子表格或表单的事件。请参阅[类 Triggerbuilder](https://developers.google.com/apps-script/reference/script/trigger-builder)。

创建触发器的脚本必须可以访问您的触发器函数 - 换句话说，它必须是同一脚本的一部分。

```
var ssKey = 'XXXXXXXXXXXXXXXXXXXXX';

function myFunction() {
  ScriptApp.newTrigger('myOnEdit')
           .forSpreadsheet(ssKey)
           .onEdit()
           .create();
}

function myOnEdit(e) {
  Logger.log(JSON.stringify(e));
} 
```

当然，您会希望在触发函数中做一些有用的事情，但这只是一个示例。

有一个问题需要注意。此远程函数将不会接收“[了解事件](https://developers.google.com/apps-script/understanding_events)`source`”中“电子表格编辑事件”下记录的记录属性。请参阅[Issue 2856](http://code.google.com/p/google-apps-script-issues/issues/detail?id=2856)，并为它加注星标以获取更新。

为什么这很重要？如果可行，您可能能够注册相同的触发器函数来处理所有电子表格中的事件，并使用该`source`属性一次处理一张工作表。

# python - 集群作业调度器：工具

> ID：14941334
> 
> 赞同：3
> 
> 时间：2013-02-18T16:54:27.277
> 
> 标签：python, cluster-computing, scheduler

我们正在尝试解决与集群作业调度程序相关的问题。

问题是下面我们有一组在集群中执行的python脚本，启动过程目前是通过人工交互完成的，我的意思是开始测试我们有一个与集群交互的bash脚本来请求执行所需的资源。我们打算做的是构建一个自动启动过程（这应该是合理的，因为它实现了作业状态并基于此等待作业结束，重新启动执行等......）。基本上我们必须在用户工作站和集群之间实现一层。

另一个额外的困难是我们的层必须足够聪明才能与不同的集群作业调度程序交互。我们想知道是否存在帮助我们与集群交互而无需处理每个集群调度程序细节的工具或框架。我们在网上搜索过，但没有找到适合我们需要的东西。

顺便说一下，我们使用的编程语言是 Python。

提前致谢！

兄弟-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:58:51.723

Use supervisor: [http://supervisord.org/](http://supervisord.org/) and celery [http://www.celeryproject.org/](http://www.celeryproject.org/) together

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-15T18:26:07.867

看看 ipcluster_tools。文档很少，但很容易使用。

# javascript - 我如何获得每行的第一个孩子？

> ID：14941335
> 
> 赞同：0
> 
> 时间：2013-02-18T16:54:27.943
> 
> 标签：javascript, jquery

我有 2 行，每行有 2 个文本输入。如何通过“myRow”类遍历每一行，并在每一行中获取第一个具有“This”类的孩子？我可以获得第 1 行的第一个“This”类，但似乎无法获得第 2 行。

[我的小提琴](http://jsfiddle.net/qkPZm/)

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<script src="http://code.jquery.com/jquery-1.8.1.js"></script>

<script type="text/javascript">

$(document).ready(function(){

$('#btn').click(function(){
    $(".myRow").each(function(){
        var r = $(".This").eq(0).val();
        alert(r);
    });
});

});
</script>

</head>

<body>

<div class="myRow">
    <input type="text" class="notThis" value="wrong!"/>
    <input type="text" class="This" value="first one!"/>
    <input type="text" class="This" value="almost!"/>
</div>

<br>
<br>

<div class="myRow">
    <input type="text" class="notThis" value="wrong!"/>
    <input type="text" class="This" value="second one"/>
    <input type="text" class="This" value="almost!"/>
</div>

<button id="btn">Submit</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:56:03.273

```
$('#btn').click(function(){
    $(".myRow").each(function(){
        var r = $(".This:first", this).val();
        alert(r);
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T16:56:04.223

```
$('.This:eq(0)','.myRow').css('background-color','#F00');

$('.myRow').find('.This:eq(0)').css('border-color','#F00');

$('.This:first','.myRow').css('color','#0F0');

$('.myRow').find('.This:first').css('font-weight','bold'); 
```

[工作示例](http://jsfiddle.net/kCDy4/1/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T16:56:21.790

```
$('#btn').click(function(){
    $(".myRow").each(function(){
        var r = $(".This", this).eq(0).val();
        alert(r);
    });
}); 
```

要将两者都放入选择器中，您总是可以这样做：

```
var elems = $('.This:eq(0)', '.myRow'); 
```

然后你可以这样做来获取一个值数组：

```
var values = $.map($('.This:eq(0)', '.myRow'), function(el) {return el.value}); 
```

[**小提琴**](http://jsfiddle.net/qkPZm/2/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T16:56:16.923

改成：

[演示](http://jsfiddle.net/qkPZm/1/)

```
var r = $(this).find(".This").eq(0).val(); 
```

你需要寻找`.This`相对于当前元素的，否则它总是会找到第一个实例。

旁注：作为替代方案，`.eq(0)`您可以使用`.first()`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T17:03:35.870

您可以通过使用 jQuery 的工厂方法搜索某个属性来获取 JavaScript 对象数组。例子：

```
var search = $('input[class="This"]'); 
```

您只需使用以下命令即可访问找到的第一个：

```
search[0]; 
```

本质上（这不是最优化的方法），您可以这样做：

```
var rows = $('.myRow');
for(var i = 0; i < rows.length; i++) {
    var first;
    var row = $(rows[i]);
    var children = row.find('input[class="This"]');
    // You can also do row.find('input.This');

    if(children.length > 0) {
        first = children[0];

        // Do something with it
    }
} 
```

就像我说的那样，这不是最佳方式，但每次使用工厂方法时，都会得到一个对象数组，并且可以循环遍历它们。

您可以像上面那样搜索 HTML 属性。

例子：

```
$('input[type="button"]')
$('input[name="firstName"]')
$('a[href="www.google.com"]') 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-02-18T16:56:48.187

这应该可以解决问题：

```
$('#btn').click(function(){
    $(".myRow input:nth-child(1)").each(function(){
        alert($(this).val());
    });
}); 
```

# sas - 需要一个SAS宏程序来避免重复

> ID：14941338
> 
> 赞同：0
> 
> 时间：2013-02-18T16:54:39.630
> 
> 标签：sas, sas-macro

我有一个数据集，其中需要一些 SAS Datastep 逻辑来填充缺少的列，或者从现有列派生。

数据集看起来更像下面：

```
 mpi  v1  v2  v3......v9  v10  v11.....v50
  001      a                    1.324
  002      c                    0.876
  003      f                    11.9
  004      r                    5.7
  005      b                    3.3
  .        .                     .
  .        .                     .   
  n        t                    0.4 
```

我实际上开发了以下程序：

```
 /*a*/
 IF v2 ('a') AND 0 <= v11 <= 2 THEN DO;
 v13 = 1;
 v14 =20;
 END;
 IF v2 IN ('a') AND 2 < v11 <= 3.1 THEN DO;
 v13 = 2;
 v14 =40;
 END;
 IF v2 IN ('a') AND 3.1 < v11<= 5.3 THEN DO;
 v13 = 3;
 v14 =60;     END;
 IF v2 IN ('a') AND 5.3 < v11 <= 11.5 THEN DO;
 v13 = 4;
 v14 =80;
 END;
 IF v2 IN ('a') AND v11 > 11.5 THEN DO;
 v13 = 5;
 v14 =100;
 END; 
```

我的要求是我需要编写相同的程序来在 v2 IN `c`、`f`、`t`、`r`等时填充 v13 和 v14；但是 v11 中的边界参数不同（分别用于`c`, `e`, `g`,...），而 v13 和 v14 的类别保持不变。

我想使用 SAS 宏来完成此操作以避免程序重复。你能帮忙解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:26:03.227

最好的方法是创建一个具有 v2、v11、v13、v14 值的数据集，然后将其合并或以其他方式与您的数据集组合。

当你有一个值的范围时，这样做会稍微复杂一些，但绝不是不可能的。

假设您有一个数据集，包含 v2、v11min、v11max、v13 和 v14。

```
data mergeon;
input v2 $ v11min v11max v13 v14;
datalines;
a 0 2 1 20
a 2 3.1 2 40
a 3.1 5.3 3 60
a 5.3 11.5 4 80
a 11.5 9999 5 100
c 0 4 1 20
c 4 8.1 2 40
c 8.1 9.6 3 60
c 9.6 13.5 4 80
c 13.5 9999 5 100
;;;;
run;

data have;
input mpi v2 $ v11 v13 v14;
datalines;
1 a 2 0 0
2 a 4 0 0
3 c 1 0 0
4 c 7 0 0
5 c 9 0 0
6 a 22 0 0
7 a 10 0 0
;;;;
run;

proc sql;
create table want as
  select H.mpi, H.v2, H.v11, coalesce(M.v13,H.v13) as v13, coalesce(M.v14,H.v14) as v14
   from have H 
   left join mergeon M
   on H.v2=M.v2
   and M.v11min < H.v11 <= M.v11max
;
quit; 
```

COALESCE 选择第一个非缺失值，这意味着仅当 M.v13 缺失时才会保留 H.v13 值（因此，当合并无法在合并表中找到记录时）。

如果您对 SQL 不满意，也可以使用其他一些选项；哈希表可能是最简单的，尽管您也可以使用更新语句（我自己不太熟悉）。

# c# - 如何在 OpenFileDialog 窗口上隐藏功能和可选文件夹/驱动器？

> ID：14941340
> 
> 赞同：4
> 
> 时间：2013-02-18T16:54:41.377
> 
> 标签：c#, winforms

我目前正在为运行 WES7 的嵌入式设备开发软件。该应用程序是一个标准的 .NET 3.5 WinForms 项目。

要求是用户应该能够从他们的 pendrive 或网络中浏览和选择特定文件，但不能从系统驱动器上的任何位置。因此，我正在寻找一种解决方案，以某种方式隐藏标准 OpenFileDialog 窗口上的链接和按钮，这样如果有的话，用户只会看到他们的 pendrive 或网络位置链接。

我已经在 MSDN 和其他论坛上搜索过，直到现在我才找到任何想法。如果无法使用标准的 OpenFileDialog 来完成这项工作，是否有任何简单的自定义组件可用于浏览限制在指定驱动器或父文件夹中的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T04:12:32.783

给你，就像[自定义打开文件对话框一样简单](http://msdn.microsoft.com/en-us/magazine/cc300434.aspx)

> OpenFileDialog 类公开了一组属性来配置对话框。例如，可以选择初始目录、初始过滤器索引、窗口标题、是否可以选择多个文件、关闭前是否要恢复应用程序的当前目录等。每当用户单击“打开”按钮时，该类也会触发一个事件（称为 FileOk）。
> 
> OpenFileDialog 是一个密封类，因此您不能从它派生。但是，如果您想自定义文件对话框的行为，在可能的范围内，您应该创建一个从抽象类 FileDialog 派生的全新类。在这种情况下，您可以访问几个强大但受保护的方法，例如 HookProc 和 RunDialog。HookProc 定义了对话框钩子过程，它将特定的功能添加到通用对话框中......

**更新：**

在 Windows 7 PC 上它不起作用。例如：

```
OpenDialogPlaces o = new OpenDialogPlaces();
//o.Places.Add(18);
//o.Places.Add(5);
//o.Places.Add(6);
o.Init();
o.OpenDialog.ShowDialog();
o.Reset(); 
```

仍然在左侧显示所有内容：

![在此处输入图像描述](../Images/c212ec308f4508008a469de6d71defaf.png)

它在以前版本的 Windows 中确实有效：

![在此处输入图像描述](../Images/18b94e23a424729a41186b8468c06713.png)

微软似乎改变了 ComDlg32 的位置的另一件事，我尝试了这两个地方但没有运气。

![在此处输入图像描述](../Images/ccea230775985d3dfca0fbdbe4fc7003.png)

# gcc - FFTW 中的智慧不会导入/导出

> ID：14941342
> 
> 赞同：2
> 
> 时间：2013-02-18T16:54:49.217
> 
> 标签：gcc, fftw

我将 FFTW 用于 FFT，一切正常，但优化需要很长时间才能使用`FFTW_PATIENT`标志。但是，根据[FFTW 文档](http://www.fftw.org/doc/Words-of-Wisdom_002dSaving-Plans.html#Words-of-Wisdom_002dSaving-Plans)，我可以通过在运行之间重用智慧来改进这一点，我可以将其导入和导出到文件。（我使用的是浮点 fftw 例程，因此下面的 fftwf_ 前缀而不是 fftw_）

所以，在我的开头`main()`，我有：

```
char wisdom_file[] = "optimise.fft";
fftwf_import_wisdom_from_filename(wisdom_file); 
```

最后，我有：

```
fftwf_export_wisdom_to_filename(wisdom_file); 
```

（我还进行了错误检查以检查返回值是否非零，为简单起见，上面省略了，所以我知道文件正在正确读取和写入）

一次运行后，我得到一个`optimise.fft`看起来像 ASCII 智慧的文件。然而，随后的运行并没有变得更快，如果我用`FFTW_WISDOM_ONLY`标志创建我的计划，我得到一个空计划，表明它在那里看不到任何智慧。

我正在使用 3 个不同的 FFT（2 个实数到复数和 1 个反复数到实数），因此也尝试在每个 FFT 中导入/导出，并分隔文件，但这没有帮助。

我正在使用 FFTW-3.3.3，我可以看到 FFTW-2 似乎需要更多设置才能重用智慧，但以上内容现在似乎足够了——我做错了什么？

# eclipse - 我的 IDE 的一个实例的 CVS 粘性标签，但没有另一个实例

> ID：14941347
> 
> 赞同：1
> 
> 时间：2013-02-18T16:55:05.657
> 
> 标签：eclipse, cvs

我今天进来看到一堆来源被列为

`filename.pl 1.1 1.1`

代替

`filename.pl 1.1`

在我的 Eclipse 项目导航器中。尝试提交它给了我，例如：

`cvs commit: sticky tag '1.1' for file 'filename.pl' is not a branch`

不用咒骂和砸我的办公桌，我怎么能摆脱粘性标签，我不认为我想在必须提交时分支每个该死的源文件，我们没有将版本控制用于任何真正的项目管理，只是为了在开发人员之间同步，当然没有时间在每个出血月进行 CVS/SVN/what-have-you 维护。

CVS 是否默认配置为诉诸这种球痛？可以恢复吗？我不在乎它是否必须被擦除和重做，无论如何它是最近的部署，**任何和所有建议**都非常受欢迎！

**编辑**我现在注意到在另一台使用我的 CVS 用户名配置的机器上它是正确的，我只看到未标记的源，我怎样才能为我的 Eclipse 执行此操作，如上所述？我还将检查我在两台机器上是否将这些文件列为二进制或 ascii。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-04T09:32:20.680

查找名称为“Entries”的所有文件。在文件中查找文本“//T”。它将是具有“粘性修订”的文件

例子

```
/ NodeFinder.java/1.6/Tue Nov 12 05:23:32 2013//
/ OrHtmlGenerator.java/1.103/Wed Dec 4 09:22:02 2013//T1.103
/ PopupTextSearchWindow.java/1.3/Mon Oct 15 11:07:27 2012//
/ PropertyListener.java/1.1/Tue Sep 29 12:57:38 2009// 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T23:29:49.337

相信我也有同样的问题。它让我发疯，因为我看不出是什么原因造成的，也不知道它为什么开始。

在 Eclipse 中打开 Preferences... 然后选择：

团队 > CVS > 外部连接方法

将“使用外部程序连接”更改为“使用其他连接方法进行连接”。

我有一个（坏）习惯，有时单击“恢复默认值”按钮或随机首选项部分。我可能这样做了，忘记了它，并且有几个星期的烦人问题。

我是 Mac 用户。这可能是问题的一部分。不知道外部程序是否在所有平台上配置相同（甚至存在）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T10:12:52.610

在`Eclipse Preferences > Team > File Contents`有问题的机器上，我已将`.cgi`文件设置为二进制文件，而在我的家庭设置中，文件的默认设置为 ASCII，`.cgi`只要我检查了家庭设置中的一些来源，下次我尝试更新文件时，有问题的机器就会识别现在完全不同了，被那个粘性标签锁住了。

为了恢复它，我必须删除整个项目，断开连接，删除 CVS 元数据，将我的设置更改为 ASCII`.cgi`并再次从 repo 中签出，从那以后就如磐石一样。

# jquery - jQuery找到img标签并从中获取SRC

> ID：14941352
> 
> 赞同：1
> 
> 时间：2013-02-18T16:55:07.830
> 
> 标签：jquery

我有这个js代码：

```
var imgJPG = jQuery('img[src$=".jpg"]', '<div>' + 
             fullCode + '</div>').attr('href'); 
```

但是，它似乎没有拿起图像的src？？fullCode 是 HTML 源代码。

的HTML：

```
<strong><span style="font-size: small;">
<img class="alignleft" title="ASHE" src="http://www.website.org/san-logo.jpg" 
alt="" width="198" height="192" />Design (D) is an at the Annual Conference, 
held July 15-18, 2012 in San, Florida.</span></strong> 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:58:36.007

jQuery 文档并不表示它支持您正在使用的情况。第二个参数`jQuery()`是一个上下文参数，它（根据[jQuery 文档](http://api.jquery.com/jQuery/)）可以是 DOM 元素、文档或 jQuery 对象。jQuery 并没有说它支持 HTML 字符串。

您应该首先需要将该字符串加载到 jQuery 对象中，以便将其转换为实际的 DOM 元素，如下所示：

```
var imgJPG = jQuery('img[src$=".jpg"]', jQuery('<div>' + 
         fullCode + '</div>')).attr('src'); 
```

In addition, if you want the `.src` attribute, that's the attribute you should retrieve instead of `.href`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:58:14.857

`href`当您需要的实际属性是时，您是否正在寻找它`src`？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T17:03:49.603

Try this...

```
var imgJPG = jQuery('<div>' + fullCode + '</div>').find('img[src$=".jpg"]').attr('src'); 
```

That creates a `div` element, with the included html, and then performs a `find` to get the image. Finally, get the image `src`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T16:57:32.280

您正在检索 'href' 而不是 'src'

```
var imgJPG = jQuery('img[src$=".jpg"]', '<div>' + fullCode + '</div>').attr('src'); 
```

# c# - Dropdownlist Databind自动设置选定值？

> ID：14941353
> 
> 赞同：1
> 
> 时间：2013-02-18T16:55:08.400
> 
> 标签：c#, asp.net, data-binding

我用活动目录用户填写了一个下拉列表，没什么大不了的，而且效果很好。问题是它设置`<option selected="selected" value="user">User</option>` 在第一个并且不会让我在后面的代码中更改它。有没有办法让它不自动设置`selected="selected"`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:58:44.287

```
<asp:DropDownList ID="dlst" runat="server" Width="200px" 
          AutoPostBack="True" DataSourceID="dlstvalues" DataTextField="name" 
          AppendDataBoundItems="true">
   <asp:ListItem>-- Select --</asp:ListItem>
</asp:DropDownList> 
```

或者这应该工作：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        DropDownList1.AppendDataBoundItems = true;
        DropDownList1.Items.Insert(0, new ListItem(String.Empty, String.Empty));
        DropDownList1.SelectedIndex = 0;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:57:47.787

它会自动将第一个设置为选中。您必须在下拉列表中输入默认值并将其设置为第一项。

```
ddlName.Items.Insert(0, new System.Web.UI.WebControls.ListItem("<--Select-->", "0")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:58:25.170

这是发生的，因为您可能在页面加载时绑定了 dorpdown。
而且您可能没有检查回发
这样做，它会再次绑定值，您将在下拉列表中获得新项目。
以前的`selected index`不会保留。

你应该在 !isPostBack 中绑定它

```
if (!Page.IsPostBack)
{
    //bind data
} 
```

# objective-c - 如何在 Xcode 中用动画替换按钮

> ID：14941356
> 
> 赞同：0
> 
> 时间：2013-02-18T16:55:22.460
> 
> 标签：objective-c, animation, uibutton

我的代码中有一个`UIButton`在屏幕上稳定移动的代码。目前，当用户按下按钮时，alpha 变为 0 并消失。我想做的是在按下按钮/它消失后运行一个单独的动画。似乎很容易，但问题是我需要在按下按钮时在按钮的确切位置运行动画。我对如何实现这一点持空白。任何帮助都感激不尽！我将在下面发布一些相关代码。

```
-(void)movingbuttons{
    movingButton2.center = CGPointMake(x, y);
    displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(moveObject)];
    [displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];
}

-(void)moveObject{
    movingButton2.center = CGPointMake(movingButton2.center.x , movingButton2.center.y +1);
}

-(IBAction)button2:(id)sender {
    [UIView beginAnimations:nil context:NULL];
    [movingButton2 setAlpha:0];
    [UIView commitAnimations];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:26:27.383

用下面的代码替换你的**button2**动作，并用你想要的动画实现**someOtherMethodWithAnimation方法:)**

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:1];
 movingButton2.alpha = 0;
[UIView commitAnimations];
[self performSelector:@selector(someOtherMethodWithAnimation) withObject:nil afterDelay:1.0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:02:04.343

将您的动画替换为：

```
[UIView animateWithDuration:0.25
             animations:^{
                 self.movingbutton2.alpha = 0.0;
                             // modify other animatable view properties here, ex:
                             self.someOtherView.alpha = 1.0;
             }
             completion:nil]; 
```

只是一个挑剔的点，但是您的视图控制器的 .xib 文件中的按钮是否正确连接到您的 IBOutlets 和 IBActions？

**更新**：

您不仅限于修改方法中的那个按钮。您可以在动画块中添加您想要的任何代码（参见上面的更新示例）。

`UIView`动画[属性](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)，那里有一个动画部分。

另一种方法可能是（我只是`alpha`作为一个例子）：

```
[UIView animateWithDuration:1.0
                 animations:^{
                     self.movingButton2.alpha = 0.0;
                 }
                 completion:^{
                     [UIView animatateWithDuration:0.25
                                        animations:^{
                                            self.someOtherView.alpha = 1.0;
                                        }
                                       completion:nil];
  }]; 
```

这更有可能保证动画会一个接一个地发生。

# php - 向 Symfony 中的现有实体添加列

> ID：14941358
> 
> 赞同：42
> 
> 时间：2013-02-18T16:55:27.900
> 
> 标签：php, symfony, doctrine-orm

我一直在我的 Web 服务器上使用 Symfony，并且一直在为我的数据库创建具有原则的实体。我想向其中一个实体添加一列......我想做类似的事情：

```
php app/console doctrine:modify:entity 
```

现在我知道这个命令不存在，但是有没有办法（不进行整个迁移）来简单地添加一列。

PS 我知道我可以打开 php 文件并在其中以文本方式添加列，然后更新架构，但我将其分发给一些客户端，我更喜欢“命令行式”的方法。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-02-18T17:44:52.393

实际上，使用 Doctrine 做你建议的事情根本没有意义。

Doctrine 是一个 ORM（对象关系映射）工具。这意味着你想从你的 PHP 代码中抽象出数据库，你将数据库的东西委托给 Doctrine。教义在这方面做得很好。

由于您想让您的客户/同行使用模型的最新版本更新，您应该使用 Doctrine Migrations ( [http://symfony.com/doc/current/bundles/DoctrineMigrationsBundle/index.html](http://symfony.com/doc/current/bundles/DoctrineMigrationsBundle/index.html) )。这就是管理数据库更新的方式。此外，它使您可以完全控制升级/降级数据库时的操作。例如，您可以在添加 FK 之前设置默认值。

在类上添加新属性的步骤应该是：

**对于 Symfony 2：**

*   通过以下方式修改类：

    *   Acme\MyBundle\Entity\Customer 并添加您想要的属性；

        `Acme\MyBundle\Entity\Customer`

    *   或修改学说文件：

        `Acme/MyBundle/Resources/config/doctrine/customer.yml`

*   运行控制台命令（它将在类中添加正确的 set/get）

    `php app/console doctrine:generate:entities AcmeMyBundle:Customer`

*   运行控制台命令

    `php app/console doctrine:migrations:diff`

*   运行控制台命令（它将在 app/DoctrineMigrations 上放置一个新文件）

    `php app/console doctrine:migrations:migrate`

当您部署新版本的代码时，您所要做的就是更新源代码并运行上面的命令。

**对于 Symfony 3：**

*   通过以下方式修改类：

    *   Acme\MyBundle\Entity\Customer 并添加您想要的属性；

        `Acme\MyBundle\Entity\Customer`

    *   或修改学说文件：

        `Acme/MyBundle/Resources/config/doctrine/customer.yml`

*   运行控制台命令（它将在类中添加正确的 set/get）

    `php bin/console doctrine:generate:entities AcmeMyBundle:Customer`

*   运行控制台命令（更新数据库）

    `php bin/console doctrine:schema:update --force`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2019-08-05T09:30:17.867

***在 Symfony 的现有实体中添加新列***。我有同样的问题。经过我长时间的研究，最好的解决方案就在那里。

**Symfony 4 上的解决方案工作**

**例子：**

已经在一个**名称**列中创建的博客实体在那里，我想添加**描述列**。这么简单的输入

```
php bin/console make:entity Blog 
```

运行此命令后，您要添加新列

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-19T00:10:12.493

您肯定想要打开定义实体的 PHP/XML/YML 文件并在其中添加列。然后，您使用命令行并说

```
console doctrine:schema:update 
```

这样，您的实体定义与数据库同步并且您的数据库得到更新。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-05-12T10:32:40.667

`php app/console doctrine:migrations:diff`使用学说迁移时，上述步骤存在一个陷阱。

您对实体进行了更改，一切似乎都有效，但创建迁移的命令显示`php app/console doctrine:migrations:diff`“在您的映射信息中未检测到更改”。

而且你找不到旧的数据库结构放在哪里，在文件中搜索一无所获。

对我来说，关键是清除 Redis 缓存。

```
php app/console redis:flushdb 
```

这是因为 config.yml

```
snc_redis:
    clients:
        default:
            type: predis
            alias: default
            dsn: redis://localhost
    doctrine:
        query_cache:
            client: default
            entity_manager: default
            namespace: "%kernel.root_dir%"
        metadata_cache:
            client: default
            entity_manager: default
            document_manager: default
            namespace: "%kernel.root_dir%"
        result_cache:
            client: default
            namespace: "%kernel.root_dir%"
            entity_manager: [default, read]  # you may specify multiple entity_managers 
```

之后， migrations:diff 重新读取所有实体（而不是从缓存中取出过时的元数据）并创建正确的迁移。

* * *

因此，修改实体的完整步骤链是：

1.  修改你的实体类（编辑实体文件）
2.  清除 Redis 元数据缓存 ( `php app/console redis:flushdb`)
3.  创建（并且可能是编辑）迁移 ( `php app\console doctrine:migrations:diff`)
4.  执行迁移 ( `php app\console doctrine:migrations:migrate`)

当然，您的学说元数据缓存可能不是 Redis，而是其他东西，例如 app/cache 中的文件或其他任何东西。不要忘记考虑缓存清除。

可能对某人有帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-23T13:51:11.290

我找到了一种在 YourBundle/Resources/Config/doctrine/Yourentity.orm.yml 中添加新列的方法。

然后在 Entity 类中添加 getter 和 setter 方法。

然后`php app/console doctrine:schema:update --force`从控制台做。它对我有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-10-18T16:31:17.433

如果您需要向现有实体添加新字段属性，您可以使用 make:entity

$ php bin/控制台 make:entity

要创建或更新的实体的类名

> “存在”

新属性名称（按下停止添加字段）：

> 描述

字段类型（输入？查看所有类型）[字符串]：

> 文本

该字段在数据库中是否可以为空（可为空）（是/否）[否]：

> 不

新属性名称（按下停止添加字段）：

（再次按回车键完成）

从[https://symfony.com/doc/current/doctrine.html提取的信息](https://symfony.com/doc/current/doctrine.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-12-13T10:17:44.563

# 对于 SYMFONY3 用户...

在这里，您必须按照两个步骤对您的实体进行更改第 1 步：打开您的实体文件..对于 EX：“Acme\MyBundle\Entity\Book”

当前实体只有几个字段，例如：id、name、title 等。现在，如果您想添加“image”的新字段并更改“title”字段的约束，然后使用 getter 和 setter 添加“image”字段

```
/**
     * @var string
     *
     * @ORM\Column(name="image", type="string", length=500)
     */
    private $image; 
```

并添加 getter 和 setter

```
/**
     * Set image
     *
     * @param string $image
     *
     * @return Book
     */
    public function setImage($image)
    {
        $this->image = $image;

        return $this;
    }

    /**
     * Get image
     *
     * @return string
     */
    public function getimage()
    {
        return $this->image;
    } 
```

# 将标题的现有字段约束从长度 255 更新为 500

```
/**
     * @var string
     *
     * @ORM\Column(name="title", type="string", length=500)
     */
    private $title; 
```

好的...您已根据需要进行了更改，而您仅一步之遥。

第 2 步：在项目目录中触发此命令

```
php bin/console doctrine:schema:update --force 
```

现在，检查数据库中的表，完成！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-18T17:17:17.403

我认为，您需要手动更新关系表以映射关系。我发现了这个：[讨论](https://stackoverflow.com/questions/3542243/doctrine2-best-way-to-handle-many-to-many-with-extra-columns-in-reference-table)

同样，我们可以从现有数据库中生成实体，作为一个整体，但单独？:(

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-12-15T15:09:57.800

这就是它对我的工作方式：

*   在现有类中添加新的 vars、setter 和 getter：

```
 src-->AppBundle-->Entity-->YourClassName.php 
```

*   更新 ORM 文件：

```
 src-->AppBundle-->Resources-->config-->doctrine-->YourClassName.orm.yml 
```

*   运行 bash 命令：

```
 php bin/console doctrine:schema:update --force 
```

# mysql - 如何像“FIRSTLAST”一样搜索但找到“FIRST LAST”？

> ID：14941359
> 
> 赞同：0
> 
> 时间：2013-02-18T16:55:36.110
> 
> 标签：mysql, sql, sql-like

我有`...FROM clogin WHERE namer LIKE ?`搜索全名的功能。但是，名字和姓氏之间有一个空格，导致它只能找到准确的结果。

有没有办法让名字像全名一样只有一个名字而不将两者分开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:58:07.877

> 有没有办法让名字像全名一样只有一个名字而不将两者分开？

不，如果你坚持喜欢。
您可以使用[全文](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)搜索

# ios - uiview 动画在动画期间添加加速

> ID：14941365
> 
> 赞同：2
> 
> 时间：2013-02-18T16:55:50.267
> 
> 标签：ios, objective-c, objective-c-blocks, uiviewanimation

我正在使用如下动画处理 ios 中的选取框文本：

第一种方式：

```
-(void)startScrolling {
      CGRect rect ;
      rect                   =   self.titleView.frame;
      rect.origin.x          =   -self.titleView.frame.size.width;
      self.titleView.frame   =   rect;
      [UIView beginAnimations:@"" context:nil];
      [UIView setAnimationCurve:UIViewAnimationCurveLinear]; 
      [UIView setAnimationDuration:13];
      [UIView setAnimationDelegate:self];
      [UIView setAnimationDidStopSelector:@selector(startScrolling)];

      // Update end position
      CGRect rect ;
      rect                   =   self.titleView.frame;
      rect.origin.x          =   [[UIScreen mainScreen] bounds].size.width;
      self.titleView.frame   =   rect;
      [UIView commitAnimations];

} 
```

第二种方式：

```
 [UIView animateWithDuration:13
                            delay:0
                          options:UIViewAnimationOptionCurveLinear
                       animations:^{
                           CGRect rect ;
                           rect                   =   self.titleView.frame;
                           rect.origin.x          =   -self.titleView.frame.size.width;
                          self.titleView.frame    =   rect;

                 }
                      completion:^(BOOL finished) {
                          CGRect rect ;
                          rect                   =   self.titleView.frame;
                          rect.origin.x          =   [[UIScreen mainScreen] bounds].size.width;
                         self.titleView.frame    =   rect;
                         [self startScrolling];
                 }
 ]; 
```

第一种方法是正常工作。第二种方式的问题是在动画过程中添加了加速度。不明白

为什么在使用块时添加加速。在互联网上搜索，但我仍然卡住了。对这个问题有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:00:04.563

您发布的两个代码示例不等效；您的设置代码应该在动画块之前发生，并且实际导致动画的“结束状态”代码应该在“动画”块中。与您的第一个样本等效的块是：

```
 CGRect rect ;
       rect                   =   self.titleView.frame;
       rect.origin.x          =   -self.titleView.frame.size.width;
      self.titleView.frame    =   rect;

      [UIView animateWithDuration:13
                            delay:0
                          options:UIViewAnimationOptionCurveLinear
                       animations:^{
                          CGRect rect ;
                          rect                   =   self.titleView.frame;
                          rect.origin.x          =   [[UIScreen mainScreen] bounds].size.width;
                         self.titleView.frame    =   rect;
                 }
                      completion:^(BOOL finished) {
                         [self startScrolling];
                 }
 ]; 
```

这有帮助吗？

# python - Pandas 按组聚合和列排序

> ID：14941366
> 
> 赞同：61
> 
> 时间：2013-02-18T16:55:54.100
> 
> 标签：python, sorting, group-by, dataframe, pandas

给定以下数据框

```
In [31]: rand = np.random.RandomState(1)
         df = pd.DataFrame({'A': ['foo', 'bar', 'baz'] * 2,
                            'B': rand.randn(6),
                            'C': rand.rand(6) > .5})

In [32]: df
Out[32]:      A         B      C
         0  foo  1.624345  False
         1  bar -0.611756   True
         2  baz -0.528172  False
         3  foo -1.072969   True
         4  bar  0.865408  False
         5  baz -2.301539   True 
```

我想`A`按 的聚合总和`B`然后按`C`（未聚合）中的值对组（）进行排序。所以基本上得到`A`组的顺序

```
In [28]: df.groupby('A').sum().sort('B')
Out[28]:             B  C
         A               
         baz -2.829710  1
         bar  0.253651  1
         foo  0.551377  1 
```

然后通过 True/False，使其最终看起来像这样：

```
In [30]: df.ix[[5, 2, 1, 4, 3, 0]]
Out[30]: A         B      C
    5  baz -2.301539   True
    2  baz -0.528172  False
    1  bar -0.611756   True
    4  bar  0.865408  False
    3  foo -1.072969   True
    0  foo  1.624345  False 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-02-18T22:11:48.840

Groupby A：

```
In [0]: grp = df.groupby('A') 
```

在每个组中，对 B 求和并使用变换广播值。然后按 B 排序：

```
In [1]: grp[['B']].transform(sum).sort('B')
Out[1]:
          B
2 -2.829710
5 -2.829710
1  0.253651
4  0.253651
0  0.551377
3  0.551377 
```

通过从上面传递索引来索引原始 df。这将通过 B 值的总和对 A 值重新排序：

```
In [2]: sort1 = df.ix[grp[['B']].transform(sum).sort('B').index]

In [3]: sort1
Out[3]:
     A         B      C
2  baz -0.528172  False
5  baz -2.301539   True
1  bar -0.611756   True
4  bar  0.865408  False
0  foo  1.624345  False
3  foo -1.072969   True 
```

最后，使用选项对“A”组中的“C”值进行`sort=False`排序，以保留步骤 1 中的 A 排序顺序：

```
In [4]: f = lambda x: x.sort('C', ascending=False)

In [5]: sort2 = sort1.groupby('A', sort=False).apply(f)

In [6]: sort2
Out[6]:
         A         B      C
A
baz 5  baz -2.301539   True
    2  baz -0.528172  False
bar 1  bar -0.611756   True
    4  bar  0.865408  False
foo 3  foo -1.072969   True
    0  foo  1.624345  False 
```

`reset_index`使用with清理 df 索引`drop=True`：

```
In [7]: sort2.reset_index(0, drop=True)
Out[7]:
     A         B      C
5  baz -2.301539   True
2  baz -0.528172  False
1  bar -0.611756   True
4  bar  0.865408  False
3  foo -1.072969   True
0  foo  1.624345  False 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-05-14T14:03:50.240

这是一个更简洁的方法......

```
df['a_bsum'] = df.groupby('A')['B'].transform(sum)
df.sort(['a_bsum','C'], ascending=[True, False]).drop('a_bsum', axis=1) 
```

第一行使用分组和向数据框添加一列。第二行执行排序，然后删除多余的列。

结果：

```
 A       B           C
5   baz     -2.301539   True
2   baz     -0.528172   False
1   bar     -0.611756   True
4   bar      0.865408   False
3   foo     -1.072969   True
0   foo      1.624345   False 
```

注意：`sort`已弃用，请`sort_values`改用

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-18T18:06:42.850

一种方法是插入一个带有总和的虚拟列以进行排序：

```
In [10]: sum_B_over_A = df.groupby('A').sum().B

In [11]: sum_B_over_A
Out[11]: 
A
bar    0.253652
baz   -2.829711
foo    0.551376
Name: B

in [12]: df['sum_B_over_A'] = df.A.apply(sum_B_over_A.get_value)

In [13]: df
Out[13]: 
     A         B      C  sum_B_over_A
0  foo  1.624345  False      0.551376
1  bar -0.611756   True      0.253652
2  baz -0.528172  False     -2.829711
3  foo -1.072969   True      0.551376
4  bar  0.865408  False      0.253652
5  baz -2.301539   True     -2.829711

In [14]: df.sort(['sum_B_over_A', 'A', 'B'])
Out[14]: 
     A         B      C   sum_B_over_A
5  baz -2.301539   True      -2.829711
2  baz -0.528172  False      -2.829711
1  bar -0.611756   True       0.253652
4  bar  0.865408  False       0.253652
3  foo -1.072969   True       0.551376
0  foo  1.624345  False       0.551376 
```

*也许你会放弃虚拟行：*

```
In [15]: df.sort(['sum_B_over_A', 'A', 'B']).drop('sum_B_over_A', axis=1)
Out[15]: 
     A         B      C
5  baz -2.301539   True
2  baz -0.528172  False
1  bar -0.611756   True
4  bar  0.865408  False
3  foo -1.072969   True
0  foo  1.624345  False 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-12T14:58:56.587

这个问题很难理解。但是，按 A 分组并按 B 求和，然后按降序对值进行排序。A 列的排序顺序取决于 B。然后，您可以使用过滤来按 A 值对数据框进行排序来创建新的数据框过滤器。

```
rand = np.random.RandomState(1)
df = pd.DataFrame({'A': ['foo', 'bar', 'baz'] * 2,
                        'B': rand.randn(6),
                        'C': rand.rand(6) > .5})
grouped=df.groupby('A')['B'].sum().sort_values(ascending=False)
print(grouped)
print(grouped.index.get_level_values(0)) 
```

输出：

```
A
foo    0.551377
bar    0.253651
baz   -2.829710 
```

# multithreading - 多线程队列

> ID：14941373
> 
> 赞同：0
> 
> 时间：2013-02-18T16:56:03.883
> 
> 标签：multithreading

我有一个多线程服务器，它处理请求并从多个队列中添加/删除。该服务器为休息调用提供 API。我的设计如下（伪代码）：

```
postRequest(queueName)
{
   lockmutex
   if(exist?(queueName))
      //process request add data to queue
   else
     //create queue and process request
   unlockmutex
}

getRequest(queueName)
{
   lockmutex
   if(exist?(queueName))
      //process request to queue
   else
     //create queue and process request
   unlockmutex
}

deleteRequest(queueName)
{
   lockmutex
   if(exist?(queueName))
      //process request 
   else
     //create queue and process request
   unlockmutex
} 
```

我的问题是我几乎为大多数代码锁定了互斥锁，所以多线程并没有真正让它更快。是否有任何其他方法可以在添加/从队列中删除时同步多个线程，请记住，我必须处理来自用户的休息调用，因此无法预测如何从这些队列中添加/删除数据。

# asp.net - 仅本地 IIS 服务器支持创建虚拟目录

> ID：14941389
> 
> 赞同：6
> 
> 时间：2013-02-18T16:56:52.437
> 
> 标签：asp.net, .net, visual-studio, iis

我正在尝试在我的机器上使用 Visual Studio 解决方案（由其他人编写）。当我尝试打开解决方案时，我收到两条错误消息，如下图所示。我对 IIS 不太了解，所以我无法调试这些。我应该怎么办？或者我应该从哪里开始阅读？

![在此处输入图像描述](../Images/e9c11f8d7714f3f0b11512c2db47961c.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T17:31:37.250

项目的虚拟目录设置不正确，这就是它没有加载的原因，通过右键单击项目>编辑项目来编辑项目的虚拟目录，然后找到这行代码：

```
<iisurl>http://localhost</iisurl> 
```

在本地主机之后更改或添加 Web 项目的名称：

```
<iisurl>http://localhost/webname</iisurl> 
```

另一种解决方案是确保 asp.net 已注册到 IIS 进入 Visual Studio 工具> Visual Studio 命令提示符并键入 aspnet_regiis -r

有关在此处注册 asp.net 的更多信息：http: [//msdn.microsoft.com/en-us/library/k6h9cz8h (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/k6h9cz8h(v=vs.80).aspx)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-30T23:01:23.123

添加到用户的答案，因为我无法添加到评论中。

右键单击项目并选择“卸载项目”。然后，您将被允许右键单击并编辑项目文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-14T08:05:13.667

这可能是因为您已将 TFS 中的项目映射到不同版本的 Visual Studio。

解决方案：1\. 从本地文件夹中删除映射 2\. 创建新映射并将文件检索到不同的位置 3\. 从这个新位置打开解决方案

# c# - 单击 TreeView 项时滚动网格视图

> ID：14941391
> 
> 赞同：1
> 
> 时间：2013-02-18T16:56:54.903
> 
> 标签：c#, asp.net, gridview, scroll, treeview

在我的网页中，我有一个 TreeView 和一个 GridView。

网格视图包含分类为某些类别名称的项目。类别名称放置在树视图中。

![](../Images/aa39a8f67db57a916d46691a534b25d3.png)

当我们单击树视图中的类别名称时，页面应滚动到网格视图中的特定类别。在上图中，左侧是树视图，右侧是网格视图。网格视图中的块是项目的分类顺序。

单击网格视图中的类别时，我需要将页面滚动到特定类别！

你能帮我做这个吗？？

# sql - 使用 GetDate 后转换 DateTime？

> ID：14941392
> 
> 赞同：0
> 
> 时间：2013-02-18T16:57:04.123
> 
> 标签：sql, datetime

这是因为 SI 正在尝试转换 DATETIME，因此它的格式为“mm/dd/yy”

我需要“LastPaymnt_Date”大于或等于 31 - 我已在下面成功设置。任何帮助，将不胜感激

这就是我所拥有的；它会生成“CONVERT 附近的语法不正确”错误

```
SELECT D1_Name AS 'Debtor Name', FILENO, Balance, LPaymnt_Date AS 'Last Payment Date'
FROM MASTER
WHERE LPaymnt_Date>=GETDATE()-31 
CONVERT(varchar(20), GETDATE, 101
AND(Forw_no>= 340 AND Forw_no <=348)
OR Forw_no =831
ORDER BY D1_Name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:00:47.073

```
SELECT D1_Name AS 'Debtor Name', FILENO, Balance, 
       LPaymnt_Date AS 'Last Payment Date',
       CONVERT(varchar(20), GETDATE(), 101) As FormattedDate
FROM MASTER
WHERE LPaymnt_Date >= GETDATE()-31 
 AND ((Forw_no>= 340 AND Forw_no <=348) OR Forw_no =831))
ORDER BY D1_Name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:01:16.037

你有`CONVERT`in`WHERE`子句。你想要它在`SELECT`：

```
SELECT D1_Name AS 'Debtor Name', FILENO, Balance, 
       CONVERT(VARCHAR(10), LPaymnt_Date, 101) AS 'Last Payment Date'
FROM MASTER
WHERE LPaymnt_Date>=GETDATE()-31 
AND(Forw_no>= 340 AND Forw_no <=348)
OR Forw_no =831
ORDER BY D1_Name 
```

有关更多信息，请参见此处： [SQL Server 日期格式](http://www.sql-server-helper.com/tips/date-formats.aspx)

# ios - Objective C 中的 Nil 委托

> ID：14941393
> 
> 赞同：1
> 
> 时间：2013-02-18T16:57:06.613
> 
> 标签：ios, objective-c, delegates

我读过你应该在`dealloc`. 我注意到它正在这样做`init`，这可以吗？还是你应该在其中做同样的事情`dealloc`？

**“这是一种微妙但方便的方法。如果您将自己作为委托传递给另一个对象，请在解除分配之前重置该对象的委托。”**

文件.h

```
@interface TestService : NSObject
{
    NSObject <TestServiceDelegate> *m_delegate;
}

@property (nonatomic, assign) NSObject <TestServiceDelegate> *delegate; 
```

文件.m

```
 @synthesize delegate=m_delegate;

    - (id)init
    {
        if (self = [super init])
        {        
            m_delegate = nil;
        }

        return self;
    }

    - (void)dealloc

    {
         [super dealloc];
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T17:01:27.153

两者都不需要。

在`init`方法的情况下，实例变量将以 开头`nil`，所以没关系。

在 的情况下`dealloc`，因为您的委托实例变量是（我在这里猜测，但如果不是它应该！）设置为`weak`（ARC）或`assign`（非ARC）属性，一旦您释放对象，将不会发送任何内容给代表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T17:11:14.977

您添加了此报价：

> “这是一种微妙但方便的方法。如果您将自己作为委托传递给另一个对象，请在解除分配之前重置该对象的委托。”

这是指与您发布的代码完全不同的东西。引用适用于以下示例：

Foo.m:

```
- (void)someFooMethod {
    _someBariVar = [[Bar alloc] init];
    _someBariVar.delegate = self;
}

- (void)dealloc { // Foo's dealloc
    _someBariVar.delegate =  nil;
    [_someBariVar release];

    [super dealloc];
} 
```

这样做的目的是为了防止在调用该方法`Bar`时该对象被其他人保留。`Foo dealloc`由于`Foo`实例消失了，但`Bar`实例没有，您不希望`Bar`实例仍然认为它具有有效的委托。

# c# - 如何使用 jQuery 加载方法处理服务器端异常？

> ID：14941406
> 
> 赞同：0
> 
> 时间：2013-02-18T16:58:12.013
> 
> 标签：c#, asp.net, jquery

我有一个名为 A.aspx 的页面，它使用`load`jQuery 方法加载 B.aspx。像这样：

```
$('#doclist').load('Documents.aspx #div1', { idMsg: $(this).data('cid') }, function (response, status, xhr) {
            if (status == "error") {
                var msg = "Error.";
                $('#doclist').html("<span>" + msg + xhr.status + " " + xhr.statusText + ". " + "</span>");
            }
        }); 
```

`404`这可以处理诸如or之类的异常`500 Internal server error`。B 页面从 DataBase 中检索数据并且 a`DBException`被抛出但未被`load`jQuery 方法捕获。

我没有在代码后面做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:05:46.090

`500 Internal server error`如果服务器没有附加代码，则脚本唯一得到的响应是。

考虑使用您需要的数据而不是 HTML 页面返回 JSON。这样，您可以将自定义错误作为替代结果。即成功`{"result": ....}`和错误的情况下：`{"error":"Nice error explanation"}`.

# html - Algorithm to identify marked similarities in html

> ID：14941408
> 
> 赞同：2
> 
> 时间：2013-02-18T16:58:22.260
> 
> 标签：html, algorithm, machine-learning, similarity

I would like to find similarities (exactly the patterns of it) in one or more HTML pages without knowing thier structure.

Lets talk about a really simplified example where the content and all attributes are removed.

```
01 <div>
02  <div><table>.*</table></div>
03  <div><table>.*</table></div>
04
05  <div><p></p><img/></div>
06  <div><p></p><img/></div>
07  <div><p></p><img/></div>    
08
09  <div><table>.*</table></div>
10  <div><table>.*</table></div>
11 </div> 
```

We (humans) can see that there are two differnt types of patterns. The first one (with the table) occurs four times. And there is an other one with an image tag, three times. That is easy (for humans).

The perfect module, I would like to write, would return a resultset like:

```
$VAR = [ { reduced_pattern => '<div><table>.*</table>div>',
           real_pattern => '<!-- the real pattern -->',
           hits => [{ line => 02,
                      content => "<div><table>foo 1</table></div>",
                      relevance => 0,9,
                    },
                    { line => 03,
                      content => "<div><table>foo 2</table></div>",
                      relevance => 0,95,
                    },   
                    { line => 09,
                      content => "<div><table>foo 3</table></div>",
                      relevance => 0,87
                    },
                    { line => 10,
                      content => "<div><table>foo 4</table></div>",
                      relevance => 0,80
                    }
                   ]
         }, 
         { real_pattern => '<!-- the real pattern -->',
                 hits => [{ line => 05,
                      content => "<div><p>bar 1</p><img/></div>",
                      relevance => 0,79,
                    },
                    { line => 06,
                      content => "<div><p>bar 2</p><img/></div>",
                      relevance => 0,95,
                    },   
                    { line => 07,
                      content => "<div><p>bar 3</p><img/></div>",
                      relevance => 0,80
                    }
                   ],
         }
        ]; 
```

Something like that.

The question is about the algorithm. I searched for 'Algorithm to identify marked similarities.' and alike sentences on the web, here on SO and on CPAN, but did not find something that matched well. (I know there are a lot and I read a lot of them.)

RegExp does not come in consideration, because you have to know what you are searching for. I assume that it can be done with neuronal networks, but the learning is may be difficult. Also Fuzzy Hashes (like in sssdeep) may be a solution. Or should I better start in the direction of k-means or mahout?

Thanks for your answers and comments!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:20:07.237

我也很难完全理解您的问题，但是如果您希望将页面分为两种不同的类型，那么要研究的一种算法可能是[支持向量机。](http://en.wikipedia.org/wiki/Support_vector_machine)如果您能够生成预先分类的数据集，那么[隐马尔可夫模型](http://en.wikipedia.org/wiki/Hidden_Markov_model)可能是要走的路。正如 xhudik 建议的那样，甚至可以使用决策树。

抱歉，如果您正在寻找具体的答案，但我认为需要更多信息（例如 2-3 个 html 示例以及如何对这些示例进行分类）来确定您想要实现的目标。

编辑：另外，你有没有研究过[集群](http://en.wikipedia.org/wiki/Cluster_analysis)？如果您想要的是智能统计分组， [Weka](http://en.wikipedia.org/wiki/Weka_%28machine_learning%29)和[Orange](http://en.wikipedia.org/wiki/Orange_%28software%29)等产品可以为您提供帮助。

# php - 使用 Zend Server 和 Apache 安装 PHP - Win 7

> ID：14941412
> 
> 赞同：0
> 
> 时间：2013-02-18T16:58:30.637
> 
> 标签：php, apache, apache2, zend-server

我已经安装了：Zend Server 6.0 -- Apache 2.2.22 -- Zend Studio 9.0.3

全部位于它们自己的子文件夹中，在 *C:\Program Files (x86)\Zend* 内

* * *

**4行测试脚本**

```
<php
    echo phpinfo();
?>
hello 
```

* * *

当我去：*本地主机：10081*

我被定向到位于*C:\Program Files (x86)\Zend\ZendServer\gui\public\index.php的文件*

PHP文件有我的4行测试......它按预期执行

* * *

当我去：*127.0.0.1*

我被定向到位于*C:\Program Files (x86)\Zend\Apache2\htdocs\index.php的文件*

这个 PHP 文件也有相同的 4 行测试，但只输出 'hello'。

* * *

当我编辑 index.php 文件以产生 PHP 错误时，Zend Server 仅从 \ZendServer\gui\public 内的 index.php 文件中记录错误。

我想让我的本地 Web 应用程序驻留在 \Apache2\htdocs\

我怎样才能做到这一点？我可以提供任何其他必要的信息来提供帮助。

谢谢！

~~~~**编辑**~~~~

以下是可能是必要信息的各种文件。或者，它们可能只是这篇文章过于混乱，所以我将它们放在底部。

**C:\Program Files (x86)\Zend\Apache2\conf\zend.conf**

```
<Location /server-info>
    SetHandler server-info
    Order deny,allow
    Deny from all
    Allow from 127.0.0.1
</Location>

<Location /server-status>
    SetHandler server-status
    Order deny,allow
    Deny from all
    Allow from 127.0.0.1
</Location> 

LoadModule zend_enabler_module "C:\Program Files (x86)\Zend\ZendServer\bin\ZendEnablerApache.dll"
ZendEnablerConfig "C:\Program Files (x86)\Zend\ZendServer\etc\ZendEnablerConf.xml"
AddHandler zend-enabler-script .php 
AddType application/x-httpd-php .php   

<Location /phpMyAdmin>
  Order deny,allow
  Allow from all
</Location>

Alias /phpMyAdmin "__HTTPD_PHPMYADMIN_PATH__"

Listen 10081
AllowEncodedSlashes On
Win32DisableAcceptEx

NameVirtualHost *:10081
<VirtualHost *:10081>
Alias /ZendServer "C:\Program Files (x86)\Zend\ZendServer\gui\public"
DocumentRoot "C:\Program Files (x86)\Zend\ZendServer\gui\public"
RewriteEngine On 
RewriteRule ^/$ /ZendServer/ [R]
RewriteRule ^/Login$ /ZendServer/Login [R]
  <Directory "C:\Program Files (x86)\Zend\ZendServer\gui\public">
   AllowOverride All
   Allow from all
  </Directory>
</VirtualHost>

Listen 10083
NameVirtualHost 127.0.0.1:10083
<VirtualHost 127.0.0.1:10083>
CustomLog "C:\Program Files (x86)\Zend\Apache2\logs\access.log" common env=logme
Alias /UserServer "C:\Program Files (x86)\Zend\ZendServer\UserServer"
DocumentRoot "C:\Program Files (x86)\Zend\ZendServer\UserServer"
  <Directory "C:\Program Files (x86)\Zend\ZendServer\UserServer">
   AllowOverride All
   Allow from all
  </Directory>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:09:02.310

php代码坏了。打开标签必须是`<?php`. phpinfo 上的回显是多余的，因为 phpinfo 直接输出并且不返回任何内容。

# python - Python“in”不同字长字符串的比较

> ID：14941413
> 
> 赞同：4
> 
> 时间：2013-02-18T16:58:31.983
> 
> 标签：python, comparison, string-comparison, comparison-operators

我正在处理一个包含可能重复条目的名称数据库，并试图确定我们有两个，不幸的是，格式不太理想，有些条目的名字、中间名、姓氏或婚前姓被混为一字符串和一些只有第一个和最后一个。

我需要一种方法来查看“John Marvulli”是否与“John Michael Marvulli”匹配，并能够对这些匹配项进行操作。但是，如果您尝试：

```
>>> 'John Marvulli' in 'John Michael Marvulli'
False 
```

它返回 False。有没有一种简单的方法可以以这种方式比较两个字符串以查看一个名称是否包含在另一个名称中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T17:01:19.617

您需要拆分字符串并查找单个单词：

```
>>> all(x in 'John Michael Marvulli'.split() for x in 'John Marvulli'.split())
True 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T17:33:41.043

我最近发现了`difflib`模块的强大功能。
认为这会帮助你：

```
import difflib

datab = ['Pnk Flooyd', 'John Marvulli',
         'Ld Zeppelin', 'John Michael Marvulli',
         'Led Zepelin', 'Beetles', 'Pink Fl',
         'Beatlez', 'Beatles', 'Poonk LLoyds',
         'Pook Loyds']
print datab
print

li = []
s = difflib.SequenceMatcher()

def yield_ratios(s,iterable):
    for x in iterable:
        s.set_seq1(x)
        yield s.ratio()

for text_item in datab:
    s.set_seq2(text_item)
    for gathered in li:
        if any(r>0.45 for r in yield_ratios(s,gathered)):
            gathered.append(text_item)
            break
    else:
        li.append([text_item])

for el in li:
    print el 
```

结果

```
['Pnk Flooyd', 'Pink Fl', 'Poonk LLoyds', 'Pook Loyds']
['John Marvulli', 'John Michael Marvulli']
['Ld Zeppelin', 'Led Zepelin']
['Beetles', 'Beatlez', 'Beatles'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:21:10.260

```
import re

n1 = "john Miller"
n1 = "john   Miller"

n2 = "johnas Miller"

n3 = "john doe Miller"
n4 = "john doe paul Miller"

regex = "john \\s*(\\w*\\s*)*\\s* Miller"
compiled=re.compile(regex)

print(compiled.search(n1)==None)
print(compiled.search(n2)==None)
print(compiled.search(n3)==None)
print(compiled.search(n4)==None)

'''
output:

False
True
False
False
''' 
```

# javascript - Making Disqus 2012 RTL

> ID：14941420
> 
> 赞同：2
> 
> 时间：2013-02-18T16:58:47.963
> 
> 标签：javascript, jquery, css, disqus

AS you know Disqus 2012 loads in an iframe and no longer we are able to customize it! it is not a very big deal for LTR languages such as English but for Persian and Arabic it is very big deal. is it possible to style Disqus and replace some strings at client-side using javascript? I have searched on the internet but there was no solution to Disqus 2012 because it loads in an iframe. any suggestion?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:29:57.227

您可以使用 javascript 访问 iframe 的内容。[您可以在Nettuts](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-inject-custom-html-and-css-into-an-iframe/)中观看教程。但我不确定这种方法是否适用于 Disqus。

**编辑：**这是一个类似的问题：[How to apply CSS to iframe?](https://stackoverflow.com/questions/217776/how-to-apply-css-to-iframe) ，尝试最佳答案。
**编辑 2：**它不能跨域工作。

# java - 属性文件的java类路径问题

> ID：14941423
> 
> 赞同：2
> 
> 时间：2013-02-18T16:58:51.920
> 
> 标签：java, batch-file, classpath

在调用 java main 方法之前，我有一个批处理文件来设置类路径，请参见下面的代码

```
SET CLASSPATH=%CLASSPATH%;libs/xyz1.jar
SET CLASSPATH=%CLASSPATH%;libs/xyz2.jar
SET CLASSPATH=%CLASSPATH%;libs/xyz3.jar
SET CLASSPATH=%CLASSPATH%;libs/xyz4.jar
SET CLASSPATH=%CLASSPATH%;libs/xyz5.jar
SET CLASSPATH=%CLASSPATH%;libs/xyz6.jar
SET CLASSPATH=%CLASSPATH%;/resource

java -classpath %CLASSPATH% com.xyz.main 
```

如果我将属性文件保存在资源文件夹中，它可以正常工作，但如果我将它留在根文件夹中，它就不起作用。

```
SET CLASSPATH=%CLASSPATH%;libs/xyz1.jar
SET CLASSPATH=%CLASSPATH%;libs/xyz2.jar
SET CLASSPATH=%CLASSPATH%;libs/xyz3.jar
SET CLASSPATH=%CLASSPATH%;libs/xyz4.jar
SET CLASSPATH=%CLASSPATH%;libs/xyz5.jar
SET CLASSPATH=%CLASSPATH%;libs/xyz6.jar

java -classpath %CLASSPATH% com.xyz.main 
```

上面的类路径设置不起作用我得到空指针异常

```
SET CLASSPATH=%CLASSPATH%;libs/xyz1.jar
SET CLASSPATH=%CLASSPATH%;libs/xyz2.jar
SET CLASSPATH=%CLASSPATH%;libs/xyz3.jar
SET CLASSPATH=%CLASSPATH%;libs/xyz4.jar
SET CLASSPATH=%CLASSPATH%;libs/xyz5.jar
SET CLASSPATH=%CLASSPATH%;libs/xyz6.jar
SET CLASSPATH=%CLASSPATH%;/

java -classpath %CLASSPATH% com.xyz.main 
```

上面的类路径设置不起作用我得到相同的空指针异常。

我正在使用 java util 属性，如下所示。

```
 InputStream inputStream = this.getClass().getResourceAsStream("/abc.properties");
  getProperties().load(inputStream); 
```

如果有人可以帮助我找到为什么会发生这种情况，那就太好了。先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T17:04:47.773

调用`getResourceAsStream()`使 java 寻找可用于当前类加载器的资源，即可以在您的类路径中找到的资源。如果要从文件系统读取文件，请改用`new`new FileInputStream("abc.properties")`。如果您想继续从资源中读取文件，则必须将其包含在您的类路径中，或者包含在您的 jar 文件之一中，或者作为单独的条目。

您甚至可以实现从类路径读取文件的逻辑，然后用在文件系统中找到的文件覆盖这些值。

顺便说一句，看看内置此功能的[jackarata 配置包。](http://commons.apache.org/configuration/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T17:01:13.560

您需要在 CLASSPATH 中包含“./”。您实际上是在告诉 JVM 将其排除在外。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T17:04:59.273

这是因为从当前目录检查类路径`.`会做得最好
即使你没有在资源文件夹中包含你的属性文件并运行下面提到的 java 程序，它也会完美地工作

```
java -cp .;%CLASSPATH% com.xyz.main 
```

**注意**：cp 是类路径的简写

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T17:28:57.500

包括完整的类路径

**java -classpath .;%CLASSPATH% com.xyz.main**

您还可以设置多个规范参考以下链接， [http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/classpath.html](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/classpath.html)

# jquery - How to insert jQuery in a firefox Add-On / extension without the Window-object?

> ID：14941424
> 
> 赞同：4
> 
> 时间：2013-02-18T16:58:52.507
> 
> 标签：jquery, ajax, firefox-addon, ixmldomelement

I'm having major problems when I decided to port a Chrome extension to Firefox. One of the problems is that jQuery won't install itself in the "Lib/main.js" file. The error I get is the following:

```
ReferenceError: window is not defined 
```

It seems that the window object is just not defined at the main method of a Firefox Add-On.

I understand that the extension itself doesn't need a committed window object because it doesn't represent an html page. But this makes it impossible to install jQuery while I want to take advantage of the ajax method and search-algorithm in dom elements.

I've tried several methods but they all failed:

*   Retrieve the window object from an active tab (Failed to send the window-element because the sendMessage() method is part of the window-object)
*   document.createElement (Failed because there is also no document-object)
*   Some random stuff which also failed

So my question is, does anyone have successfully install jQuery in the main method of a Firefox Add-On?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T14:54:13.770

`Lib/main.js`不是您必须放置应用程序代码的地方。在那里你会放你的初始化代码。就像我们在 chrome 的`manifest.json`. 看看我的 Firefox 扩展[`main.js`](https://github.com/juzerali/Don-t-lose-your-query/blob/master/Firefox-Addon/resources/dont-lose-your-query/lib/main.js)。它看起来像这样：

```
exports.main = function() {};

var { MatchPattern } = require("match-pattern");

var pageMod = require("page-mod");
var data = require("self").data;

pageMod.PageMod({
    include: [/.*phpminiadmin.*/, /.*phpmyadmin.*/, /.*devadmin.*/],
    contentScriptWhen: 'ready',
    contentScriptFile: [data.url('jquery-1.7.2.min.js'),data.url('jquery-ui-1.8.20.custom.min.js'),data.url('bootstrap.min.js'),data.url('querysaver.js')]

}); 
```

它`pageMod`允许您在页面的上下文中加载您的 javascript，这当然是在页面自己的上下文中的一个单独的世界中。

`../data`您希望加载的脚本应位于`lib/`.

看看我的插件的文件夹结构。[https://github.com/juzerali/Don-t-lose-your-query/tree/master/Firefox-Addon](https://github.com/juzerali/Don-t-lose-your-query/tree/master/Firefox-Addon)。我记错了，但您可能需要包含 api-utils。

我发现使用 Firefox 的 SDK 很有帮助。

# c# - FileUpload does not contain the file when popup open

> ID：14941425
> 
> 赞同：-1
> 
> 时间：2013-02-18T16:58:54.117
> 
> 标签：c#, asp.net

after upload the file then upload button click it shows the msg if already file exits do you want overwrite it? here i used the popup and cancel control id but i want use ok button and then press the ok button load the file and overrite the old one how to write the code in asp.net using c#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:01:58.757

对于检查存在文件，您可以使用此代码

```
var folderfile4 = Server.MapPath("~/files/Path");
string saveflFile4 = folderfile4 + "\\" + System.IO.Path.GetFileName(flFile4);
if(!File.Exists(saveflFile4))
    txtFile4.SaveAs(saveflFile4);
else
    txtError.Text = "File exists"; 
```

# php - XMLHttpRequest not working with Chrome

> ID：14941427
> 
> 赞同：1
> 
> 时间：2013-02-18T16:59:01.047
> 
> 标签：php, javascript, ajax, google-chrome

I have this code, to simple update "cupom" from "0" to "1", but it isnt working with Chrome, with firefox it does work, any help/advice is welcome.

```
var req;
function val_impressao_js(cpf) {

if(window.XMLHttpRequest) {
req = new XMLHttpRequest();
}
else if(window.ActiveXObject) {
req = new ActiveXObject("Microsoft.XMLHTTP");
}
var url = "val_impressao.php?cpf="+cpf;
req.open("GET", url, true);

req.onreadystatechange = function() 
    {
    if(req.readyState == 4 && req.status == 200) 
        {

            window.print();

        }
    }
req.send(null);
} 
```

val_impressao.php

```
require "arqinc/conexao.php";
require "arqinc/funcoesbd.php";

    $cpf=$_GET['cpf'];
    $query=mysql_query("UPDATE cadcoo SET cupom=1 WHERE cpf_cadpessoafisica=$cpf AND cupom=0"); 
```

And by the way, this part isnt working too, it does not print the page.

```
if(req.readyState == 4 && req.status == 200) 
    {

        window.print();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:02:42.230

我建议使用以下脚本，因为它甚至可以与 IE7 和所有现代浏览器一起使用。

```
window.onload = initAll;
var xhr = false;

function initAll() {
    document.getElementById("requestXML").onclick = makeRequest;
}

function makeRequest() {
    if (window.XMLHttpRequest) {
        xhr = new XMLHttpRequest();
    }
    else {
        if (window.ActiveXObject) {
            try {
                xhr = new ActiveXObject("Microsoft.XMLHTTP");
            }
            catch (e) { }
        }
    }

    if (xhr) {
        xhr.onreadystatechange = showContents;
        xhr.open("GET", "us-states.xml", true);
        xhr.send(null);
    }
    else {
        document.getElementById("updateArea").innerHTML = "Sorry, but I couldn't create an XMLHttpRequest";
    }
    return false;
}

function showContents() {
    if (xhr.readyState == 4) {
        if (xhr.status == 200) {
            var outMsg = xhr.responseText;
        }
        else {
            var outMsg = "There was a problem with the request " + xhr.status;
        }
        document.getElementById("updateArea").innerHTML = outMsg;
    }
} 
```

# django - Django List deserialization in rest-framework

> ID：14941428
> 
> 赞同：4
> 
> 时间：2013-02-18T16:59:02.813
> 
> 标签：django, json, list, deserialization, django-rest-framework

I am trying to implement a RESTful web service. Everything was going well until I tried to deserialize a list with objects from a post request. My code is this:

```
#serializers.py
class ResultSerializer(serializers.ModelSerializer):
        class Meta:
            model=test_result
            fields=('id', 'label')

#views.py
class results(APIView):
    """
    Post the results for a test set.
    """
    permission_classes = (permissions.IsAuthenticated,)

    def post(self, request, pk, format=None):
        ser=ResultSerializer(data=request.DATA)
        for i in range(len(ser.data)): 
            if ser.data[i].is_valid():      
            entry=test_result(user=User.objects.get(username=request.user.username), test_id=Detail.objects.get(test_id=pk), id=Article.objects.get(id=ser.data[i]['id']), label=ser.data[i]['label'])
            entry.save() #I use a test_result table in my database to save things   
            return Response(ser.data[i], status=status.HTTP_201_CREATED)    
        return Response(ser.errors, status=status.HTTP_400_BAD_REQUEST) 
```

The curl command i use to test is:

```
curl -v -H "Accept: application/json" -H "Content-type: application/json" --user plao:1234 -X POST -d '[{"id":23401853, "label":1504}, {"id":23401853, "label":1505}]' http://127.0.0.1:8000/tests/uploadResults/1/ 
```

I have tested my code (without the indexes) with simple post and it works fine. But when I try to post a list I can't. However, after trying the code in the shell (`python manage.py shell`) I noticed that there is a TODO in the code of the framework:

```
# TODO: error data when deserializing lists 
```

Is there a problem with the code? Is there any advise I can use? In the final version the users will post strings like the following one, but I try to reach it step by step:

```
{"documents": [{"id":[Label1,...,LabelN]},....,{"id":[Label1,..,LabelM]}]} 
```

If I can handle lists I will be able to hanble that kind of json.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:32:25.007

您可能应该看看讨论组上的这个线程，它处理批量更新：

[https://groups.google.com/forum/#!topic/django-rest-framework/uJA1kuUO9gc/discussion](https://groups.google.com/forum/#!topic/django-rest-framework/uJA1kuUO9gc/discussion)

# r - 使用 Emacs/ESS 使用 R 构建统计分析

> ID：14941429
> 
> 赞同：14
> 
> 时间：2013-02-18T16:59:18.037
> 
> 标签：r, emacs, statistics, ess

我正在寻找一种构建统计分析的方法。我目前使用 Emacs/ESS 并且分析文件变得很长。我已经开始将部分代码放入单独文件中的可源函数中，但仍然......

我想在文件中引入某种副标题/部分标题（聚合、聚类分析、模拟……）并在其下方编写代码，这样我就可以快速跳转到我想要处理的部分。

我想我可以只使用评论并搜索它们，但我无法以这种方式获得概述或索引。我还考虑过为标题使用 Org-Mode，但这对于与其他编辑器一起工作的合作者来说不是很方便。

我知道 R-Studio 用部分实现了这一点，所以会有一个针对 emacs 的解决方案，对吧？

非常感谢你！

PS：像 imenu 这样的东西会起作用，但这只是用于功能，而不是用于部分

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-18T17:13:27.050

一般来说，我使用 org-mode 和 org-babel，但是当我必须与他人共享脚本时，我的`.emacs`:

```
(defgroup ess-jb-faces nil
  "Faces used by cutomized ess-mode"
  :group 'faces)

(defface ess-jb-comment-face
  '((t (:background "cornsilk" 
    :foreground "DimGrey"
    :inherit font-lock-comment-face)))
  "Face used to highlight comments."
  :group 'ess-jb-faces)

(defface ess-jb-comment-bold-face
  '((t (:weight bold
    :inherit ess-jb-comment-face)))
  "Face used to highlight bold in comments."
  :group 'ess-jb-faces)

(defface ess-jb-h1-face
  '((t (:height 1.6 
    :weight bold 
    :foreground "MediumBlue"
    :inherit ess-jb-comment-face)))
  "Face used to highlight h1 headers."
  :group 'ess-jb-faces)

(defface ess-jb-h2-face
  '((t (:height 1.2 
    :weight bold 
    :foreground "DarkViolet"
    :inherit ess-jb-comment-face)))
  "Face used to highlight h2 headers."
  :group 'ess-jb-faces)

(defface ess-jb-h3-face
  '((t (:height 1.0 
    :weight bold 
    :foreground "DarkViolet"
    :inherit ess-jb-comment-face)))
  "Face used to highlight h3 headers."
  :group 'ess-jb-faces)

(defface ess-jb-hide-face
  '((t (:foreground "white"
    :background "white"
    :inherit ess-jb-comment-face)))
  "Face used to hide characters."
  :group 'ess-jb-faces)

(font-lock-add-keywords 'ess-mode
   '(("^###\\(#\\)\\([^#].*\\)$" (1 'ess-jb-hide-face t)(2 'ess-jb-h1-face t))
     ("^###\\(##\\)\\([^#].*\\)$" (1 'ess-jb-hide-face t)(2 'ess-jb-h2-face t))
     ("^###\\(###\\)\\([^#].*\\)$" (1 'ess-jb-hide-face t)(2 'ess-jb-h3-face t))
     ("^###\\( .*\\|$\\)" 1 'ess-jb-comment-face t)
     ("^###" "\\*.*?\\*" nil nil (0 'ess-jb-comment-bold-face append))
     )) 
```

这样，行首的任何注释`####`都被格式化为“标题 1”。任何带有的注释`#####`都被格式化为“header 2”等。以开头的行`###` 被视为带有特殊字体锁定的注释（用于长注释）。

这可以给出这样的结果：

![在此处输入图像描述](../Images/7fb124a833bb85b82a74a070b7f9e3bf.png)

这很 hacky，但优点是它只使用标准的 R 注释，因此可以毫无问题地与他人共享。一般来说，我对“header 1”使用以下内容：其他人看到它如下，而我喜欢我定义的 font-lock ：

```
############################################
#### HEADER 1
############################################ 
```

使用此语法，您还可以使用以下命令激活`outline-minor-mode` 先前定义的部分并能够折叠/展开它们：

```
(add-hook 'ess-mode-hook
      '(lambda ()
         (auto-complete-mode nil)
         (outline-minor-mode 1)
         (setq outline-regexp "\\(^#\\{4,6\\}\\)\\|\\(^[a-zA-Z0-9_\.]+ ?<- ?function(.*{\\)")
         (setq outline-heading-alist
           '(("####" . 1) ("#####" . 2) ("######" . 3)
             ("^[a-zA-Z0-9_\.]+ ?<- ?function(.*{" .4))))) 
```

所有这些代码都没有经过很好的测试，而且我远不是 emacs lisp 方面的专家，所以应该有更好的方法来做到这一点，万一出现错误也不要感到惊讶！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-19T10:27:18.403

最近（2013 年 2 月）添加到 Orgmode 意味着您现在应该能够在源代码中嵌入 org 标题，然后使用 orgstruct-mode 浏览它们。因此，通过 git 升级您的 org 模式，然后尝试打开以下示例 R 文件。当您在嵌入了 org 标题的注释行上时，只需按 TAB 或 shift-TAB，您应该会得到 org-mode 标题。

```
### * Create data
data = list( s1=list(x=1:3, y=3:1), 
     s2=list(x=1:5, y=1:5), s3=list(x=1:4, y=rep(3,4)))

### * Base graphics version

par(mfrow=c(2,2))
lapply(data, plot)

### * Lattice version

nplots <- length(data)
pts.per.plot <- sapply(data, function(l) length(l$x))
df <- data.frame(which=rep(1:nplots, times=pts.per.plot),
                 x=unlist(sapply(data, function(l) l$x)),
                 y=unlist(sapply(data, function(l) l$y)))

xyplot(y~x|which, data=df, layout=c(2,2))

### ** Make the pdf
pdf(file='o.pdf')
xyplot(y~x|which, data=df, layout=c(2,1))                 
dev.off()

### * End of file

### Local Variables:
### eval: (orgstruct-mode 1)
### orgstruct-heading-prefix-regexp: "### "
### End: 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-18T17:18:08.390

听起来你有一个大的分析脚本。这不是很理想...

考虑使用 RMarkdown 或 Sweave 重做它，并使用`knitr`它来运行它。然后，您可以使用 emacs 的工具来导航 markdown 或 TeX，并且您可以使用缓存系统在`knitr`您在接近尾声时更改某些内容时不必从一开始就进行分析。

如果需要，您还可以从分析中获得格式化的报告。

此外，将东西分成单独的文件进行采购有点次优 - 编写函数并将它们放在一个包中要好得多 - 并且使用`devtools`包来使其工作变得非常简单。只需编辑您的 .R 文件并`load_all`对其进行更新（没有一个复杂的包构建过去的东西）。

大胜算。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-27T19:03:16.590

[polymode](https://github.com/vitoshka/polymode)提供 R+markdown、R+brew、R+cpp 和其他东西。它仍处于早期开发阶段，似乎只能在最近的 emacs (24.3) 上可靠地工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-13T19:11:56.483

与上面提到的 orgstruct-mode 类似，您还可以使用新的[outshine 包](https://github.com/tj64/outshine "胜过包装")，它与 outline-minor-mode 一起使用，将带有星号的注释解释为类似 org-mode 的标题。它们可以使用简单的快捷键（如 TAB 等）折叠/展开/添加/等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T03:06:19.727

多年来我一直很满意的另一种选择是 allout-mode。使用每个文件的局部变量：

```
## Local variables:
## allout-layout: (-1 : 0)
## End: 
```

# ios - How should I translate an OpenGLES modelView to a CATransform3D?

> ID：14941435
> 
> 赞同：17
> 
> 时间：2013-02-18T16:59:23.160
> 
> 标签：ios, uikit, opengl-es-2.0, augmented-reality, vuforia

My goal is to overlay a standard UIKit view (for the moment, I'm just creating a `UILabel` but eventually I'll have custom content) over a detected shape using image tracking and the Vuforia AR SDK. I have something that works, but with a "fudge" term that I cannot account for. I'd like to understand where my error is, so I can either justify the existence of this correction or use a different algorithm that's known to be valid.

My project is based on the ImageTargets sample project in the Vuforia SDK. Where their `EAGLView` iterates over the results to render the OpenGL teapots, I've replaced this with a call out to my ObjC++ class `TrackableObjectController`. For each trackable result, it does this:

```
- (void)augmentedRealityView:(EAGLView *)view foundTrackableResult:(const QCAR::TrackableResult *)trackableResult
{
    // find out where the target is in Core Animation space
    const QCAR::ImageTarget* imageTarget = static_cast<const QCAR::ImageTarget*>(&(trackableResult->getTrackable()));
    TrackableObject *trackable = [self trackableForName: TrackableName(imageTarget)];
    trackable.tracked = YES;
    QCAR::Vec2F size = imageTarget->getSize();
    QCAR::Matrix44F modelViewMatrix = QCAR::Tool::convertPose2GLMatrix(trackableResult->getPose());
    CGFloat ScreenScale = [[UIScreen mainScreen] scale];
    float xscl = qUtils.viewport.sizeX/ScreenScale/2;
    float yscl = qUtils.viewport.sizeY/ScreenScale/2;
    QCAR::Matrix44F projectedTransform = {1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1};
    QCAR::Matrix44F qcarTransform = {1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1};
    /* this sizeFudge constant is here to put the label in the correct place in this demo; I had thought that
     * the problem was related to the units used (I defined the length of the target in mm in the Target Manager;
     * the fact that I've got to multiply by ten here could be indicative of the app interpreting length in cm).
     * That turned out not to be the case, when I changed the reported length of the target it stopped drawing the
     * label at the correct size. Currently, therefore, the app and the target database are both using mm, but
     * there's the following empirically-divised fudge factor to get the app to position the correctly-sized view
     * in the correct position relative to the detected object.
     */
    const double sizeFudge = 10.0;
    ShaderUtils::translatePoseMatrix(sizeFudge * size.data[0] / 2, sizeFudge * size.data[1] / 2, 0, projectedTransform.data);
    ShaderUtils::scalePoseMatrix(xscl, -yscl, 1.0, projectedTransform.data); // flip along y axis
    ShaderUtils::multiplyMatrix(projectedTransform.data, qUtils.projectionMatrix.data, qcarTransform.data);
    ShaderUtils::multiplyMatrix(qcarTransform.data, modelViewMatrix.data, qcarTransform.data);
    CATransform3D transform = *((CATransform3D*)qcarTransform.data); // both are array[16] of float
    transform = CATransform3DScale(transform,1,-1,0); //needs flipping to draw
    trackable.transform = transform;
} 
```

There is then other code, called on the main thread, that looks at my `TrackableObject` instances, applies the computed `CATransform3D` to the overlay view's layer and sets the overlay view as a subview of the `EAGLView`.

My problem is, as the comment in the code sample has given away, with this `sizeFudge` factor. Apart from this factor, the code I have does the same thing [as this answer](https://stackoverflow.com/questions/6045502/how-to-get-catransform3d-from-projection-and-modelview-matrices/10952866#10952866); but that's putting my view in the wrong place.

Empirically I find that if I do not include the `sizeFudge` term, then my overlay view tracks the orientation and translation of the tracked object well but is offset down and to the right on the iPad screen—this is a translation difference, so it makes sense that changing the term used for . I first thought that the problem was the size of the object as specified in Vuforia's Target Manager. This turns out not to be the case; if I create a target ten times the size then the overlay view is drawn in the same, incorrect place but ten times smaller (as the AR assumes the object it's tracking is further away, I suppose).

It's only translating the pose here that gets me where I want to be, but this is unsatisfactory as it doesn't make any sense to me. Can anyone please explain the correct way to translate from a OpenGL coordinates as supplied by Vuforia to a CATransform3D that doesn't rely on magic numbers?

** **Some more data** **

The problem is more complicated than I thought when I wrote this question. The location of the label actually seems to depend on the distance from the iPad to the tracked object, though not linearly. There's also an apparent systematic error.

Here's a chart constructed by moving the iPad to a certain distance away from the target (located over the black square), and marking with a pen where the centre of the view appeared. Points above and to the left of the square have the translation fudge as described above, points below and to the right have `sizeFudge==0`. Hopefully the relationship between distance and offset shown here clue someone with more knowledge of 3D graphics than me into what the problem with the transform is.

![Chart as described in the previous paragraph.](../Images/aa467935f827642e14007f04a9fbea58.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:40:52.317

这可能首先与您的视图设置有关。奇怪的偏移量可能是由于宽度和高度的错误方式或任何其他可能的不正确值（例如在 iPad 上使用 iPhone 屏幕比例）引起的。

你的应用是风景吗？如果是这样，那就试试纵向吧。我过去注意到应用程序似乎总是以纵向屏幕尺寸启动（尽管我还没有证实这一点），所以如果您的视图设置发生在屏幕是“正确的方式”之前，您将得到不匹配。

你也可以试着计算出它到底差了多少。而不是乘以 size.data 作为一种技巧：添加另一个翻译并调整数字直到它是正确的。这些数字可能会让您更好地了解正在发生的事情。*10 可能只是侥幸，并没有多大意义。

# ruby-on-rails - 如果接受标头的格式不同，RSpec 测试以捕获 406 错误

> ID：14941440
> 
> 赞同：0
> 
> 时间：2013-02-18T16:59:40.963
> 
> 标签：ruby-on-rails, ruby, rspec

我正在尝试编写一个 RSpec 测试来测试传递给请求的错误内容类型，因为在控制器端我只支持 JSON。

所以目前我的 RSpec 是这样写的：

```
it 'returns a 406 if the request is not for json' do
  request.accept = 'text/html'
  get :show
  expect(response.code).to eq('406')
end 
```

我的控制器中的 show 方法是这样的：

```
 respond_to :json

 def show

    org_id = Organization.find_by_id(params[:id])

    @organization = Organization.includes([:BunchOfTablesBlah).find(params[:id])

    respond_with(@organization)
end 
```

但是该测试失败并出现以下错误：

> 1) PopulationManagementController 显示组织返回 406 如果请求不是针对 json 失败/错误：get :show ActionController::RoutingError: No route matches {:controller=>"population_management", :action=>"show"} # 。 /spec/controllers/population_management_controller_spec.rb:184:in `block (3 levels) in '

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:54:04.470

```
No route matches {:controller=>"population_management", :action=>"show"} 
```

ActionController#show 需要一个 ID，但您没有提供 ID，因此路由失败。

尝试`get :show, :id => '1'`

# javascript - 淘汰赛js可见绑定似乎不起作用

> ID：14941442
> 
> 赞同：2
> 
> 时间：2013-02-18T16:59:42.323
> 
> 标签：javascript, data-binding, knockout.js

我是 Knockout 的新手，正在创建一个原型。我试图使用 div 上的可见绑定仅在单击“菜单选项”时显示。但是，当我创建条件时，它似乎不起作用。

这是我的来源：

```
 <!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title></title>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script>
        <script type="text/javascript" src="Scripts/knockout.js"></script>
        <script type="text/javascript" src="Scripts/Models.js"></script>
        <script type="text/javascript">
            $(function () {
                function BillingInformation() {
                    this.accountNumber = ko.observable('4111111111111111');
                    this.cardType = ko.observable('Visa');
                    this.expirationDate = ko.observable('2016-01-15');
                }

                function Invoice(billingDate, amount, paid) {
                    this.billingDate = billingDate;
                    this.amount = amount;
                    this.paid = paid;
                }

                function Pet(name, breed, age) {
                    this.name = name;
                    this.breed = breed;
                    this.age = age;
                }

                function PrototypeViewModel() {
                    this.menu = [{ folderName: 'Customer Information', folderId: 0 },
                                 { folderName: 'Customer Information Edit', folderId: 1 },
                                 { folderName: 'Billing Information Edit', folderId: 2 },
                                 { folderName: 'Pets', folderId: 3 }, 
                                 { folderName: 'Invoices', folderId: 4 }];

                    this.customer = { firstName: 'Wesley', lastName: 'Snipes', email: 'wsnipes@gmail.com' };

                    this.billingInformation = new BillingInformation();

                    this.pets = ko.observableArray(
                        [
                            new Pet('Poopy', 'Great Dane', 3),
                            new Pet('Pokey', 'Great Dane', 2)
                        ]);

                    this.invoices = ko.observableArray(
                        [
                            new Invoice('2012-11-15', 24.35, true),
                            new Invoice('2012-12-15', 24.35, true),
                            new Invoice('2013-01-15', 34.43, false)
                        ]);

                    this.selectedMenuOptionId = ko.observable();
                    this.selectMenuOption = function (menuOption) {
                        this.selectedMenuOptionId = menuOption.folderId;
                    };

                    this.isMenuSelected = function(menuSelected) {
                        return this.selectedMenuOptionId == menuSelected;
                    };
                }

                ko.applyBindings(new PrototypeViewModel());
            });
        </script>
    </head>
    <body>
        <ul data-bind="foreach: menu">
            <li data-bind="text: $data.folderName, click: $root.selectMenuOption"></li>
        </ul>

        <div data-bind="visible: isMenuSelected(0)">
            <p>selected customer menu</p>
        </div>
    </body>
</html> 
```

我试图简单地设置可见条件来进行字符串比较，但这似乎不起作用。正如您现在所看到的，我正在使用 isMenuSelected 函数试图使其工作，但也失败了。我也没有收到任何脚本错误。请问，我在这里错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T17:03:00.507

你已经实现`isMenuSelected`了

```
this.isMenuSelected = function(menuSelected) {
    return this.selectedMenuOptionId == menuSelected;
}; 
```

但我相信你需要做更多类似的事情

```
this.isMenuSelected = ko.computed(function () {
    return this.selectedMenuOptionId == menuSelected;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:19:55.963

KnockoutJS 仅在绑定以一种可观察的方式进行并且依赖于模型的视图时才有效。在您的代码中， the`this.isMenuSelected`被声明为函数而不是可观察的。与其给它一个函数的定义，不如给它一个可观察函数的定义。所以你需要将它定义为

```
this.isMenuSelected = ko.computed(function () {
                       ...
                      }); 
```

以前，**ko.computed**被称为`ko.dependentObservable`. 只是为了让您知道您是否使用过早期版本，那么它对您来说不会是新事物。

# c - Fclose导致C中的段错误

> ID：14941444
> 
> 赞同：-2
> 
> 时间：2013-02-18T16:59:50.127
> 
> 标签：c, fault, fclose

当且仅当我尝试关闭文件时，我才会不断收到段错误：

```
 FILE *outFilePtr = fopen(*(argv + 2), "w"); //open file, yes i'm sure it opens

   fclose(outFilePtr); //sometime later in the program. 
```

该程序在没有 flcose() 的情况下从头到尾运行。有什么建议么？

gdb 上的错误重定向到这里：假设它是一个声明了所有变量的函数。gdb 也责怪我什至没有使用的 strtol 。

```
 int t;
     char line[50];

          for (t = 0; t < lines; t++){
              fgets(line, 50, filePtr);
             strcpy(*string[t], strtok(line, " "));
              *(num1 + t) = atoi(strtok(NULL, " "));
              *(num2 + t) = atoi(strtok(NULL, " "));
           } 
```

内存分配函数

```
 void dynamicArray(int** num1, int** num2, char*** str, int size)
 { 
     int i = 0;

*(num1) = (int*)malloc(sizeof(int) * size);
*(num2) = (int*)malloc(sizeof(int) * size);

*(str) = (char**)malloc(sizeof(char*) * size);

for( i = 0; i < size; i++){
    *(*(str) + i) = (char*)malloc(sizeof(char) *size);
}

return;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:12:03.700

可以肯定的是，检查它`outFilePtr`不为空：

```
if (outFilePtr) {fclose(outFilePtr); outFilePtr = NULL;} 
```

我总是在关闭文件时这样做，并且我还将指针指向 NULL 以避免尝试关闭同一个文件两次（这也可能导致麻烦）。

但最有可能的原因是一些内存泄漏或未定义的行为，这些事情搞砸了，段错误只是由`fclose()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:12:41.157

我的猜测是当你到达 fclose() 时 outFilePtr 的值没有被保留。

您的代码片段太短，并且错过了太多其他可能很重要的东西......什么是字符串和num2；他们分配了多大；ETC...

此外，*(num2 + t) 的第一个存储被第二个 *(num2 + t) 覆盖。

另外，请看一下 ARRAYS.... num2[t] 比 *(num2+t) 更容易阅读并且可以完成相同的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T17:26:15.753

除了你可怕的数组访问语法。您忘记复制输入字符串行。`strtok`总是指向在每一行都改变的同一个缓冲区。

```
 int t;
 char line[50];

      for (t = 0; t < lines; t++){
          fgets(line, 50, filePtr);
          strings[t] = strdup(strtok(line, " ")));
          num1[t]    = atoi(strtok(NULL, " "));
          num2[t]    = atoi(strtok(NULL, " "));
       } 
```

在你的分配代码中，你也只分配了 5 个字节而不是 50 个。如果你真的只分配了 5 个字节，那么你破坏了堆，这通常表现为 crashing `fclose`。

```
void dynamicArray(int** num1, int** num2, char*** str, int size)
{ 
int i = 0;

*num1 = malloc(sizeof(int) * size);
*num2 = malloc(sizeof(int) * size);

*str = malloc(sizeof(char*) * size);

for( i = 0; i < size; i++)
  (*str)[i] = malloc(50);      /* sizeof (char) is by definition 1 */

return;
} 
```

# php - Server Side Facebook Authentication

> ID：14941453
> 
> 赞同：0
> 
> 时间：2013-02-18T17:00:26.233
> 
> 标签：php, facebook, authentication

[https://developers.facebook.com/docs/howtos/login/server-side-login/](https://developers.facebook.com/docs/howtos/login/server-side-login/)

Following this tutorial I am able to login to a Facebook account regardless of the account logged into the integrated iOS Facebook which is what I wanted :). However, now since Safari is remembering you logged in, if you go back to your page it shows you as being logged in.

I would like to make it so every time I click on the button that takes me to my php script to login, it forces me to login again. I know it might sound weird but I have a good reason behind why I need this.

Thank you.

# php - Multi-byte strings and look-around weird bug

> ID：14941455
> 
> 赞同：4
> 
> 时间：2013-02-18T17:00:35.017
> 
> 标签：php, regex

Why following code behaves differently for different multi-bye strings?

```
echo preg_replace('@(?=\pL)@u', '*', 'م');  // prints: '*م'     ✓ 
echo preg_replace('@(?=\pL)@u', '*', 'ض');  // prints: '*ض'     ✓ 
echo preg_replace('@(?=\pL)@u', '*', 'غ');  // prints: '*�*�'   ✗ 
echo preg_replace('@(?=\pL)@u', '*', 'ص');  // prints: '*�*�'   ✗ 
```

See: [http://3v4l.org/fvab1](http://3v4l.org/fvab1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:22:06.480

您还需要包含修饰符字母 ( `Lm`)。请参阅以下遍历整个阿拉伯 unicode 块的脚本：

```
<?php
function uchar_2($dec)
{
    $utf = chr(192 + (($dec - ($dec % 64)) / 64)); 
    $utf .= chr(128 + ($dec % 64)); 

    return $utf;
}

$issues = 0;
$count = 0;
for ($dec = 1536; $dec <= 1791; $dec++) {
    $char = uchar_2($dec);
    if (preg_replace('@^(?=\pLm)$@u', '*', $char) !== $char) {
        printf("Issue with %s (%s)\n", $dec, $char);
        $issues++;
    }
    $count++;
}

printf("Found %d issues in %d rows\n", $issues, $count); 
```

如果没有out `Lm`，大约一半的字符会失败。

# dialog - Post to Friend's Wall using Dialog Feed - How to choose a friend?

> ID：14941456
> 
> 赞同：1
> 
> 时间：2013-02-18T17:00:40.627
> 
> 标签：dialog, facebook-social-plugins

We are able to post to any particular friend by providing the 'to' field in dialog feed syntax.

```
FB.init({appId: "", status: true, cookie: true});

function postToFeed() {
  // calling the API ...
  var obj = {
    method: 'feed',
    redirect_uri: [url],
    link: 'https://developers.facebook.com/docs/reference/dialogs/',
    picture: 'http://fbrell.com/f8.jpg',
    name: 'Facebook Dialogs',
    caption: 'Reference Documentation',
    description: 'Using Dialogs to interact with users.',
    to:[fb id]
  };

  function callback(response) {
    document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
  }

  FB.ui(obj, callback);
} 
```

But how do we have a text box which allows the user to choose the friend to whom it has to be posted. Or is there any alternative way?

# jquery - 如何在 jQuery 中设置延迟？

> ID：14941460
> 
> 赞同：-2
> 
> 时间：2013-02-18T17:00:55.253
> 
> 标签：jquery, delay, fade, preloader

我有一些代码充当预加载器，在所有 JS 加载之前显示。唯一的问题是我看到预加载器出现在进入页面的内容的顶部。

如何调整下面的代码以淡出“#loading-mask”div，以空白屏幕暂停 0.5 秒，然后淡入我的页面内容？

主要目标是阻止两者重叠

这是我的代码：

```
$('#loading-mask').fadeOut(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:06:23.080

```
$('#loading-mask').fadeOut(500, function() {
    setTimeout(500);
    $('#content').fadeIn()
}); 
```

# ios - AVQueuePlayer 播放无间隙和冻结

> ID：14941461
> 
> 赞同：11
> 
> 时间：2013-02-18T17:00:56.150
> 
> 标签：ios, objective-c, avfoundation, avqueueplayer

我`AVQueuePlayer`用来播放从 URL 加载的一系列电影。
我试图用`AVPlayerItems`我需要玩的所有东西的数组来初始化播放器实例。

```
player = [[AVQueuePlayer queuePlayerWithItems:playerItemsArray] 
```

但在这种情况下，在开始播放之前`AVQueuePlayer`加载每个的一些初始部分。`AVPlayerItem`它会导致令人沮丧的冻结，并且应用程序在几秒钟内没有响应。

有可能只将 first 添加`AVPLayerItem`到播放器的队列中，观察其状态并仅在 first 到达结束时将第二个项目添加到队列中，但在这种情况下，由于 second 的初始化和缓冲而导致两个项目的播放之间存在间隙`AVPlayerItem`。

有什么方法可以在不冻结的情况下组织多个视频的无缝播放？
我应该为此目的使用其他播放器吗？

提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-04T13:16:44.923

找到了解决方案。

`AVPlayerItem`当在播放器队列中添加新时，`AVQueuePlayer`将同步等待播放器项目的初始部分被缓冲。

所以在这种情况下，播放器项目应该被异步缓冲，然后它可以被添加到队列中。
可以使用`[AVURLAsset loadValuesAsynchronouslyForKeys: completionHandler:]`

例如：

```
AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:url options:nil];
NSArray *keys = [NSArray arrayWithObject:@"playable"];

[asset loadValuesAsynchronouslyForKeys:keys completionHandler:^()
{
    dispatch_async(dispatch_get_main_queue(), ^
    {
        AVPlayerItem *playerItem = [[[AVPlayerItem alloc] initWithAsset:asset] autorelease];         
        [player insertItem:playerItem afterItem:nil]; 
    });

}]; 
```

使用 AVQueuePlayer 的这个解决方案队列可以填充没有任何间隙和冻结的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-20T10:50:49.520

在 Swift 2 中，在这里工作：

```
func load() {
     let player = AVQueuePlayer()
     for url in urls {
        makeItem(url)
    }
}

func makeItem(url: String) {
    let avAsset = AVURLAsset(URL: NSURL(string: url)!)

    avAsset.loadValuesAsynchronouslyForKeys(["playable", "tracks", "duration"], completionHandler: {
        dispatch_async(dispatch_get_main_queue(), {
            self.enqueue(avAsset: avAsset)
        })
    })
}

func enqueue(avAsset: AVURLAsset) {
    let item = AVPlayerItem(asset: avAsset)
    self.player.insertItem(item, afterItem: nil)
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-24T11:08:36.453

这是解决方案。

```
- (void)_makePlayer{
     _player = [[AVQueuePlayer alloc] initWithPlayerItem:[AVPlayerItem playerItemWithAsset:[SSMoviePreviewItemMaker generateAVMovieItem]]];
}

+ (AVAsset *)generateAVMovieItem{
    NSArray * array = [SSMovieFileManager getAllMovieResourceURL];
    AVMutableComposition *composition = [[AVMutableComposition alloc] init];
    for (int i = 0; i < array.count; i++) {
        AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:array[i] options:nil];
        [composition insertTimeRange:CMTimeRangeMake(kCMTimeZero, asset.duration)
                             ofAsset:asset
                              atTime:composition.duration error:nil];

    }
   return composition;
} 
```

# scala - 如何在 Dispatch 中获取失败请求的值？

> ID：14941462
> 
> 赞同：7
> 
> 时间：2013-02-18T17:00:57.070
> 
> 标签：scala, scala-dispatch

当我在 Dispatch 中提出请求时，我应用 Promise 并得到以下信息：

```
Left(dispatch.StatusCode: Unexpected response status: 400) 
```

如何获得响应的实际文本？我正在使用 Solr，它仍然返回有价值的 JSON 以及失败的 HTTP 请求。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T18:41:20.643

看起来您已经编写了如下内容：

```
Http(url OK as.String) 
```

这`OK`是提供您在此处看到的简单错误处理的原因。您可以使用`>`更直接地获得结果。例如，如果你这样写：

```
Http(url("http://google.com/") OK as.String).either() 
```

您将获得以下信息（至少目前）：

```
Left(dispatch.StatusCode: Unexpected response status: 301) 
```

但是，如果您进行以下小改动：

```
Http(url("http://google.com/") > as.String).either() 
```

您将获得重定向页面的完整正文：

```
res1: Either[Throwable,String] = 
Right(<HTML><HEAD><meta http-equiv="content-type" ... 
```

如果您想对响应做一些更有趣的事情，您可以编写自己的`asWhatever`处理程序——例如，请参阅我的答案[，](https://stackoverflow.com/a/13653035/334519)了解如何以映射的形式访问标题。

# java - c3p0 中的默认连接池大小是多少

> ID：14941463
> 
> 赞同：7
> 
> 时间：2013-02-18T17:01:05.347
> 
> 标签：java, spring, hibernate, jakarta-ee, tomcat

在下面的配置中，如果我错过了初始、最大、最小池大小。c3p0 中的默认连接池大小是多少？

```
<bean class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close" id="dataSource">
    <property name="driverClass" value="${dbDriver}"/>
    <property name="jdbcUrl" value="${dbURL}"/>
    <property name="user" value="${dbUsername}"/>
    <property name="password" value="${dbPassword}"/>
    <property name="initialPoolSize" value="5"/>
    <property name="maxPoolSize" value="50"/>
    <property name="minPoolSize" value="5"/>
    <property name="maxIdleTime" value="3000"/>
</bean> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-18T17:10:59.360

> InitialPoolSize 默认为 3。

您可以查看以下链接以获取更多信息：

[http://www.mchange.com/projects/c3p0/#initialPoolSize](http://www.mchange.com/projects/c3p0/#initialPoolSize)

[http://javatech.org/2007/11/c3p0-connectionpool-configuration-rules-of-thumb/](http://javatech.org/2007/11/c3p0-connectionpool-configuration-rules-of-thumb/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T17:08:42.720

摘自[`com.mchange.v2.c3p0.impl.C3P0Defaults`](http://grepcode.com/file/repo1.maven.org/maven2/com.mchange/c3p0/0.9.2-pre8/com/mchange/v2/c3p0/impl/C3P0Defaults.java)：

```
private final static int INITIAL_POOL_SIZE     = 3;  
private final static int MIN_POOL_SIZE         = 3;
private final static int MAX_POOL_SIZE         = 15; 
```

但是，如果没有记录，请不要依赖默认值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-14T18:41:26.757

您可能会发现此链接更有帮助。[https://developer.jboss.org/wiki/HowToConfigureTheC3P0ConnectionPool](https://developer.jboss.org/wiki/HowToConfigureTheC3P0ConnectionPool)

# java - 关于按顺序连接螺纹

> ID：14941484
> 
> 赞同：0
> 
> 时间：2013-02-18T17:02:04.703
> 
> 标签：java, multithreading

我是线程世界的新手，仍在学习，因为我正在学习线程的概念并加入其他线程等待较早线程完成并从那里加入的地方，请你告诉我，我想要启动三个线程 T1,T2,T3 ，其中 t2 将在 T1 完成后启动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:10:24.650

据我了解，您希望等到线程 1 完全完成然后启动线程 2，而线程 3 可以在任何地方运行。我认为可以满足您的问题的简单代码：

```
Thread thread1 = new Thread1();
Thread thread2 = new Thread2();
Thread thread3 = new Thread3();
thread3.start();
thread1.start();
try {
  thread1.join();
  thread2.start();
} catch (InterruptedException e) {
  //if you do not use thread1.interrupt() this will not happen.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:11:46.707

做这样的事情：

```
 Thread T1 = new Thread(new ThreadExm);  // where ThreadExm implements Runnable
        Thread T2 = new Thread(new ThreadExm);

        try {
            // Start the thread1 and waits for this thread to die before
            // starting the thread2 thread.
            T1.start();
            T2.join();

            // Start thread2 when T1 gets completed
            thread2.start();
        } catch (InterruptedException ex) {
            ex.printStackTrace();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:06:53.893

在多个线程完成后，您可以使用 Barriers 启动一些操作（可能是另一个线程）。

检查：[http](http://programmingexamples.wikidot.com/java-barrier) ://programmingexamples.wikidot.com/java-barrier了解更多信息。

但是只等待一个线程真的没有多大意义......

# ruby-on-rails - Ruby on Rails - 我可以从 Windows 中的批处理例程中调用 Controller:Method 吗？

> ID：14941485
> 
> 赞同：0
> 
> 时间：2013-02-18T17:02:09.163
> 
> 标签：ruby-on-rails, ruby, windows, command-line, scheduled-tasks

我对在 Windows 上工作的 RoR 比较陌生。我在 Rails 中构建了一个使用 ActionMailer 发送电子邮件的简单应用程序。我想向我的 Windows 调度程序添加一个任务，以运行一个批处理例程，该例程在我的控制器内部调用我的电子邮件方法。当我这样做时，网络应用程序将不会运行，所以我不能做 CURL 或类似的事情。有没有办法运行带有一些参数的 Ruby.exe 来启动 Rails 应用程序（类似于 irb）并调用控制器：方法？

**更新：我在我标记为正确的答案中采纳了建议，但我想我会详细说明，以防像我这样的 RoR 新手需要更多指导。**

1.  我创建了一个文件夹 app\classes 并为我的班级创建了一个 .rb 文件
2.  我必须创建一个初始化方法来处理一些设置
3.  创建了一些简单的返回变量的方法
4.  我确保我可以在**rails 控制台中运行这些步骤**
5.  使用下面的代码在 lib\tasks 中创建了一个文件
6.  在项目文件夹中的 DOS 中运行它 - **rake runMe --trace**

    ```
    task :runMe => :environment do

        @s = ScrapeTools.new

        @bears = @s.getBears

        @bulls = @s.getBulls

        UserMailer.stock_email(@bears,@bulls).deliver

    end 
    ```

*如果您发现任何错误，请告诉我*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:08:59.710

有。`rails runner <path to script>`将在您的 Rails 应用程序下运行给定的脚本。[有一些文档](http://guides.rubyonrails.org/command_line.html#rails-runner)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T17:09:27.567

这是一个很好的例子，说明了为什么您不想将逻辑放入控制器中。比将该功能放在控制器方法中要好得多，将其重构为模块或类中的方法。然后，您从控制器以及直接在批处理例程中执行的 rake 任务调用该方法。

# html - 超出水平滚动范围的区域设置为主体颜色

> ID：14941486
> 
> 赞同：0
> 
> 时间：2013-02-18T17:02:09.830
> 
> 标签：html, css

我是 HTML/CSS 的新手。我希望屏幕的水平条在红色背景上是黑色的。使用 CSS，我定义了一个黑色背景的包装器和一个红色背景的主体。

不幸的是，当有一个水平滚动条时，包装器只占据页面的最左边滚动条可以看到的部分。页面右侧的区域完全是红色的。

以下是相关的 HTML 和 CSS：

```
<div id="wrapper">
    <div id="page" class="container">
        <div id="content">
            <h2 class="title">Foo</h2>
            <div class="Body">
                <p>Bar</p>
            </div>
        </div>
     </div>
</div>

#wrapper {
    background-color: #000000;
}

.container {
    width: 1000px;
    margin: 0px auto;
}

#page {
    padding-top: 280px;
}

#content {
    float: left;
    width: 620px;
    padding-right: 40px;
}

body {
    margin: 0;
    background: #FF0000;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:40:25.873

您需要指定 div #wrapper 的最小宽度

```
#wrapper {
          min-width: 1000px;
         } 
```

# html - Flash 将影片剪辑与 HTML 混合

> ID：14941489
> 
> 赞同：0
> 
> 时间：2013-02-18T17:02:30.947
> 
> 标签：html, css, flash, alphablending, blending

有没有办法让 Flash 电影融入到它下面的 HTML 中。喜欢将具有混合模式“变暗”的 Flash 文件应用于下面的内容吗？

我快速浏览了 CSS 混合模式，但要么我无法弄清楚，要么它不起作用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T01:14:25.607

简单的答案是否定的。你能做的最好的是将 Flash 背景设置为透明：

```
<param name="wmode" value="transparent"> 
```

但您不能将 Flash 内容与其他任何内容混合。

# linux - 启动 xampp 时出错，缺少作业名称

> ID：14941490
> 
> 赞同：-1
> 
> 时间：2013-02-18T17:02:32.050
> 
> 标签：linux, ubuntu, terminal, xampp

我在 ubuntu 12.04 中安装了 xampp，一切正常，但是当我尝试从终端启动它时，出现此错误：

```
start: missing job name
try 'start --help' for more information. 
```

`JOB is the name of the job that is to be started, this may be followed by zero or more environment variables to be defined in the new job.`这是我从帮助中获得的信息，但这是我对 linux 的第一次体验。网络上的所有教程都告诉我，我需要做的就是输入`start`... 做什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:47:10.160

当您遵循本指南时：http: [//www.apachefriends.org/en/xampp-linux.html#378](http://www.apachefriends.org/en/xampp-linux.html#378) 并运行命令：

```
/opt/lampp/lampp start 
```

或者，您运行其他命令？（有问题未指定您已执行的内容）。如果是这样，很可能某些东西没有正确安装......你还应该提供xampp版本，软件是如何安装的（rpm，编译，......）

# entity-framework - EF 4.4 防止 AutoGen 导航属性和/或关系

> ID：14941491
> 
> 赞同：0
> 
> 时间：2013-02-18T17:02:32.630
> 
> 标签：entity-framework, entity-framework-4

我使用 EF 启动了一个数据库模式，并在尝试手动修改 CLR 和/或数据库表时遇到了多个问题。首先是 EF 放置在表中的“Employee_ID”列。我删除了它，dbo.EdmMetaData 和 dbo.__MigrationHistory 表，并摸索了引发的运行时错误。 *现在*，我正在努力解决以下错误：

**ReferentialConstraint 中的依赖属性映射到存储生成的列。列：“员工 ID”。**

我的实现使用具有 3 个计算列的 TimeCardEntity CLR。这些列恰好映射到另一个表的主键。另一个表是 EmployeeRecord。

目标）我不希望 EF 自动映射这 3 列。由于 EF 提供的复杂性，我打算自己填写它们，但我不能告诉 EF 停止创建导航关系和/或引用约束。

第 1 点）我有一个 EmployeeRecord 表，它有一个 Guid ID 主键，它映射到 CLR 类 EmployeeRecord

第 2 点）我有一个 TimeCardEntity 表，它有 3 个*计算*列，称为 EmployeeID、ManagerID、DivisionManagerID，它们与 EmployeeRecord 相关。所有都声明为 NULL，但显然需要 EmployeeID，因为如果不声明员工，您就无法拥有考勤卡。ManagerID 和 DivisionManagerID 稍后填写。

第 3 点）请不要问我“为什么要计算这些？”，因为这是有原因的。我也觉得这与问题无关。简而言之，计算出的 EmployeeID（无论是员工、经理还是部门经理）都存储在一个 xml 属性中，其中包含员工的批准和签名数据——这提供了非信誉。

第 4 点）我有 3 个存储函数，分别称为 fxGetEmployeeID(xml)、fxGetManagerID(xml) 和 getDivisonManagerID(xml)。这些中的每一个都分别用于计算列 EmployeeID、ManagerID 和 DivisionManagerID。

为简洁起见，以下是简化的类声明：

```
 public enum TimeCardEmployeeTypeEnum {
    Employee,
    Manager,
    DivisionManager
}

[DataContract]
[Serializable]
[Table("EmployeeRecord", Schema = "TimeCard")]
public class EmployeeRecord {

                                        #region Exposed Propert(y|ies)

[DataMember]
public Guid ID { get; set; }

/// <summary>
/// Customers internal company employee ID.  Can be null, SSN, last 4, or what ever...
/// I included it just in case it was part of my pains...
/// </summary>
[CustomValidation(typeof(ModelValidator), "EmployeeRecord_EmployeeID", ErrorMessage = "Employee ID is not valid.")]
public string EmployeeID { get; set; }

#endregion
}

[DataContract]
[Serializable]
[Table("TimeCardEntry", Schema = "TimeCard")]
public class TimeCardEntry {

                #region Member Field(s)

[NonSerialized]
XDocument m_TimeEntries;

#endregion

                                            #region Con/Destructor(s)

public TimeCardEntry() {
    this.m_TimeEntries = "<root />".ToXDocument();
}

public TimeCardEntry(Guid employeeID) {
    if (employeeID == Guid.Empty)
        throw new ArgumentNullException("employeeID");
    this.m_TimeEntries = "<root />".ToXDocument();
    this.EmployeeID = employeeID;
}

#endregion

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        #region Exposed Propert(y|ies)

[NotMapped]
[IgnoreDataMember]
public XDocument TimeEntries {
    get {
        if (this.m_TimeEntries == null) {
            if (!string.IsNullOrEmpty(this.TimeEntriesXml))
                this.m_TimeEntries = this.TimeEntriesXml.ToXDocument();
        }
        return this.m_TimeEntries;
    }
    set {

        this.m_TimeEntries = value;
        if (this.m_TimeEntries != null)
            this.TimeEntriesXml = this.m_TimeEntries.ToString();
        else
            this.TimeEntriesXml = null;
        this.OnPropertyChanged("TimeEntriesXml");
        this.OnPropertyChanged("TimeEntries");
    }
}

[DataMember]
[EditorBrowsable(EditorBrowsableState.Never)]
[Required]
public string TimeEntriesXml {
    get {
        if (this.m_TimeEntries == null)
            return null;
        return this.m_TimeEntries.ToString();
    }
    set {
        this.m_TimeEntries = value.ToXDocument();
        this.OnPropertyChanged("TimeEntriesXml");
        this.OnPropertyChanged("TimeEntries");
    }
}

[IgnoreDataMember]
[DatabaseGenerated(System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedOption.Computed)]
public Guid? EmployeeID {
    get {
        var attribute = this.m_TimeEntries.Root.Attribute("EmployeeID");
        if (attribute != null)
            return (Guid)attribute;
        return null;
    }
    set {

        if (this.ValidateSignature(TimeCardEmployeeTypeEnum.Manager))
            throw new ArgumentException("Property cannot be changed once the manager signature has been set.", "EmployeeID");

        if (value != null && value.Value != Guid.Empty)
            this.m_TimeEntries.Root.SetAttributeValue("EmployeeID", value);
        else {
            var attribute = this.m_TimeEntries.Root.Attribute("EmployeeID");
            if (attribute != null)
                attribute.Remove();
        }
        this.OnPropertyChanged("EmployeeID");
    }
}

public virtual EmployeeRecord Employee { get; set; }

[NotMapped]
[IgnoreDataMember]
public DateTime? EmployeeApprovalDate {
    get {
        var attribute = this.m_TimeEntries.Root.Attribute("EmployeeApprovalDate");
        if (attribute != null)
            return (DateTime)attribute;
        return null;
    }
    set {

        if (this.ValidateSignature(TimeCardEmployeeTypeEnum.Manager))
            throw new ArgumentException("Property cannot be changed once the manager signature has been set.", "EmployeeApprovalDate");

        if (value.HasValue)
            this.m_TimeEntries.Root.SetAttributeValue("EmployeeApprovalDate", value);
        else {
            var attribute = this.m_TimeEntries.Root.Attribute("EmployeeApprovalDate");
            if (attribute != null)
                attribute.Remove();
        }
        this.OnPropertyChanged("EmployeeApprovalDate");
    }
}

[NotMapped]
[IgnoreDataMember]
public byte[] EmployeeSignature {
    get {
        var attribute = this.m_TimeEntries.Root.Attribute("EmployeeSignature");
        if (attribute != null)
            return Convert.FromBase64String((string)attribute);
        return null;
    }
    set {

        if (this.ValidateSignature(TimeCardEmployeeTypeEnum.Manager))
            throw new ArgumentException("Property cannot be changed once the manager signature has been set.", "EmployeeSignature");

        if (value != null) {
            if (value.Length > 1024)
                throw new ArgumentException("Signature cannot be larger than 1KB.", "EmployeeSignature");
            this.m_TimeEntries.Root.SetAttributeValue("EmployeeSignature", Convert.ToBase64String(value));
        } else {
            var attribute = this.m_TimeEntries.Root.Attribute("EmployeeApprovalDate");
            if (attribute != null)
                attribute.Remove();
        }
        this.OnPropertyChanged("EmployeeSignature");
    }
}

[IgnoreDataMember]
[DatabaseGenerated(System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedOption.Computed)]
public Guid? ManagerID {
    get {
        var attribute = this.m_TimeEntries.Root.Attribute("ManagerID");
        if (attribute != null)
            return (Guid)attribute;
        return null;
    }
    set {

        if (this.ValidateSignature(TimeCardEmployeeTypeEnum.DivisionManager))
            throw new ArgumentException("Property cannot be changed once the division manager signature has been set.", "ManagerID");

        if (value.HasValue) {
            if (value.Value == Guid.Empty)
                throw new ArgumentNullException("ManagerID");
            this.m_TimeEntries.Root.SetAttributeValue("ManagerID", value);
        } else {
            var attribute = this.m_TimeEntries.Root.Attribute("ManagerID");
            if (attribute != null)
                attribute.Remove();
        }
        this.OnPropertyChanged("ManagerID");
    }
}

public virtual EmployeeRecord Manager { get; set; }

[NotMapped]
[IgnoreDataMember]
public DateTime? ManagerApprovalDate {
    get {
        var attribute = this.m_TimeEntries.Root.Attribute("ManagerApprovalDate");
        if (attribute != null)
            return (DateTime)attribute;
        return null;
    }
    set {

        if (this.ValidateSignature(TimeCardEmployeeTypeEnum.DivisionManager))
            throw new ArgumentException("Property cannot be changed once the division manager signature has been set.", "ManagerApprovalDate");

        if (value.HasValue)
            this.m_TimeEntries.Root.SetAttributeValue("ManagerApprovalDate", value);
        else {
            var attribute = this.m_TimeEntries.Root.Attribute("ManagerApprovalDate");
            if (attribute != null)
                attribute.Remove();
        }
        this.OnPropertyChanged("ManagerApprovalDate");
    }
}

[NotMapped]
[IgnoreDataMember]
public byte[] ManagerSignature {
    get {
        var attribute = this.m_TimeEntries.Root.Attribute("ManagerSignature");
        if (attribute != null)
            return Convert.FromBase64String((string)attribute);
        return null;
    }
    set {

        if (this.ValidateSignature(TimeCardEmployeeTypeEnum.DivisionManager))
            throw new ArgumentException("Property cannot be changed once the division manager signature has been set.", "ManagerSignature");

        if (value != null) {
            if (value.Length > 1024)
                throw new ArgumentException("Signature cannot be larger than 1KB.", "ManagerSignature");
            this.m_TimeEntries.Root.SetAttributeValue("ManagerSignature", Convert.ToBase64String(value));
        } else {
            var attribute = this.m_TimeEntries.Root.Attribute("ManagerSignature");
            if (attribute != null)
                attribute.Remove();
        }
        this.OnPropertyChanged("ManagerSignature");
    }
}

[IgnoreDataMember]
[DatabaseGenerated(System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedOption.Computed)]
public Guid? DivisionManagerID {
    get {
        var attribute = this.m_TimeEntries.Root.Attribute("DivisionManagerID");
        if (attribute != null)
            return (Guid)attribute;
        return null;
    }
    set {
        if (value.HasValue) {
            if (value.Value == Guid.Empty)
                throw new ArgumentNullException("DivisionManagerID");
            this.m_TimeEntries.Root.SetAttributeValue("DivisionManagerID", value);
        } else {
            var attribute = this.m_TimeEntries.Root.Attribute("DivisionManagerID");
            if (attribute != null)
                attribute.Remove();
        }
        this.OnPropertyChanged("DivisionManagerID");
    }
}

public virtual EmployeeRecord DivisionManager { get; set; }

[NotMapped]
[IgnoreDataMember]
public DateTime? DivisionManagerApprovalDate {
    get {
        var attribute = this.m_TimeEntries.Root.Attribute("DivisionManagerApprovalDate");
        if (attribute != null)
            return (DateTime)attribute;
        return null;
    }
    set {
        if (value.HasValue)
            this.m_TimeEntries.Root.SetAttributeValue("DivisionManagerApprovalDate", value);
        else {
            var attribute = this.m_TimeEntries.Root.Attribute("DivisionManagerApprovalDate");
            if (attribute != null)
                attribute.Remove();
        }
        this.OnPropertyChanged("DivisionManagerApprovalDate");
    }
}

[NotMapped]
[IgnoreDataMember]
public byte[] DivisionManagerSignature {
    get {
        var attribute = this.m_TimeEntries.Root.Attribute("DivisionManagerSignature");
        if (attribute != null)
            return Convert.FromBase64String((string)attribute);
        return null;
    }
    set {
        if (value != null) {
            if (value.Length > 1024)
                throw new ArgumentException("Signature cannot be larger than 1KB.", "DivisionManagerSignature");
            this.m_TimeEntries.Root.SetAttributeValue("DivisionManagerSignature", Convert.ToBase64String(value));
        } else {
            var attribute = this.m_TimeEntries.Root.Attribute("DivisionManagerSignature");
            if (attribute != null)
                attribute.Remove();
        }
        this.OnPropertyChanged("DivisionManagerSignature");
    }
}

#endregion
} 
```

**这是数据库上下文声明**

```
 public sealed class DatabaseContext : DbContext {

    public DatabaseContext(bool autoDetectChangesEnabled = false, bool lazyLoadingEnabled = false, bool proxyCreationEnabled = false, bool validateOnSaveEnabled = false) {

        this.Configuration.AutoDetectChangesEnabled = autoDetectChangesEnabled;
        this.Configuration.LazyLoadingEnabled = lazyLoadingEnabled;
        this.Configuration.ProxyCreationEnabled = proxyCreationEnabled;
        this.Configuration.ValidateOnSaveEnabled = validateOnSaveEnabled;
    }

    public DbSet<EmployeeRecord> EmployeeRecords { get; set; }

    public DbSet<TimeCardEntry> TimeCards { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder) {

        modelBuilder.Conventions.Remove<System.Data.Entity.Infrastructure.IncludeMetadataConvention>();
    }
} 
```

**更新** 我必须添加另一个观察到的 EF 行为。当我将“NotMappedAttribute”添加到 TimeCardEntry 的 EmployeeID 列时，我遇到了另一个问题。EF 将“Employee_ID”列添加回自动生成模式。请参阅下面的 TSQL 配置文件跟踪：

```
exec sp_executesql N'SELECT 
[Limit1].[C1] AS [C1], 
[Limit1].[ID] AS [ID], 
[Limit1].[TimeEntriesXml] AS [TimeEntriesXml], 
[Limit1].[ManagerID] AS [ManagerID], 
[Limit1].[DivisionManagerID] AS [DivisionManagerID], 
[Limit1].[CreatedBy] AS [CreatedBy], 
[Limit1].[Created] AS [Created], 
[Limit1].[UpdatedBy] AS [UpdatedBy], 
[Limit1].[Updated] AS [Updated], 
[Limit1].[Employee_ID] AS [Employee_ID]
FROM ( SELECT TOP (2) 
    [Extent1].[ID] AS [ID], 
    [Extent1].[TimeEntriesXml] AS [TimeEntriesXml], 
    [Extent1].[ManagerID] AS [ManagerID], 
    [Extent1].[DivisionManagerID] AS [DivisionManagerID], 
    [Extent1].[CreatedBy] AS [CreatedBy], 
    [Extent1].[Created] AS [Created], 
    [Extent1].[UpdatedBy] AS [UpdatedBy], 
    [Extent1].[Updated] AS [Updated], 
    [Extent1].[Employee_ID] AS [Employee_ID], 
    1 AS [C1]
    FROM [TimeCard].[TimeCardEntry] AS [Extent1]
    WHERE [Extent1].[ID] = @p0
)  AS [Limit1]',N'@p0 uniqueidentifier',@p0='10F3E723-4E12-48CD-8750-5922A1E42AA3' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:55:48.937

EF 试图`Employee_ID`在数据库中声明，因为它需要表的外键`Employee`列。它不能使用您的`EmployeeID`属性及其列作为外键，因为它被声明为计算 - EF 中的外键不得声明为计算或身份（不支持）。

您的模型的解决方案要么需要放弃导航属性并仅使用 ID（并手动加载相关员工），要么放弃那些计算列 - 我可以想象这两个选项可能会很烦人。

# c# - 使用 .Net 在 .docx 文档中写入和读取隐藏标签

> ID：14941492
> 
> 赞同：1
> 
> 时间：2013-02-18T17:02:33.280
> 
> 标签：c#, .net, vb.net, docx

我想做的是能够在文档中写一些隐藏的标记，这样当用户填写一些信息时，我就可以根据标记或围绕它的部分来处理文档的每个部分。我正在使用.NET，有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:20:25.440

看看[SdtElements](http://openxmldeveloper.org/discussions/development_tools/f/17/t/5992.aspx)标记、[OpenXml](http://msdn.microsoft.com/en-us/office/bb265236.aspx) [Sdk](http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2009/06/02/4730.aspx)和[Word 2007 内容控制工具包](http://dbe.codeplex.com/)

本质是：

*   创建一个 Word 文档作为您的模板
*   在 Word 中，打开[开发人员选项卡](http://office.microsoft.com/en-us/word-help/show-the-developer-tab-or-run-in-developer-mode-HA010173052.aspx)
*   在 Developer 选项卡中有一个 Controls 组。单击“Aa”插入新的内容标签，单击“属性”编辑标签别名和数据，打开设计模式查看内容标签

如果您的应用程序可以输出您将绑定到文档的 XML，则以下步骤适用：

*   打开 Word 内容控制工具包
*   打开您创建的文档
*   在右侧面板中附加一个 xml
*   双击内容标签以编辑其 XPath 绑定或使用拖放；请参阅 WCCT 手册

准备好模板后，根据您手头的实际任务，您可以使用这些内容标签做很多事情，包括：

*   替换文档中的自定义 xml 部分以更新用户在打开它时将看到的数据
*   使用 openxml sdk 替换数据而不在 Word 中打开它
*   使用模板收集数据（可能但不可靠，不推荐）
*   通过 openxml sdk 从代码中删除和插入内容标签

在您的代码中，您可以通过对 OpenXmlSdk 对象使用 LINQ 查询来找到内容标签，如下所示：

```
var contentTags = document.MainDocumentPart.Document.Body
                .Descendants<SdtElement>()
                .Where(x => x.SdtProperties.GetFirstChild<Tag>() != null && x.SdtProperties.GetFirstChild<DataBinding>() != null)
                .Select(x => x.SdtProperties.GetFirstChild<Tag>().Val.InnerText =="Whatever Tag you're looking for or other condition to match several")
                .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:19:07.460

[您可以使用此处](http://msdn.microsoft.com/en-us/library/dhxe2d75%28v=vs.80%29.aspx)或[此处](http://support.microsoft.com/kb/303296)所述的自定义文档属性

# php - PHP URL 中的多个变量与 HTTP Referrer

> ID：14941493
> 
> 赞同：1
> 
> 时间：2013-02-18T17:02:36.033
> 
> 标签：php, mysql, http, url

我正在尝试使用 HTTP_Referrer（它们的来源）、日期和递增的流量 URL 创建自定义 URL

```
mysql_connect('localhost', 'mysql_user', 'mysql_password');

mysql_select_db('database');

mysql_query("INSERT INTO table (TrafficID, ClickURL, CreateDate) VALUES('".mysql_real_escape_string($_GET['TrafficID'])."',  '".mysql_real_escape_string($_GET['ClickURL'])."', '".mysql_real_escape_string($_GET['CreateDate'])."')");
mysql_query("UPDATE table_name SET out = out + 1 WHERE ID = $TrafficID")or     die(mysql_error());
$data = mysql_query("SELECT * FROM table_name WHERE ID = $TrafficID") or     die(mysql_error()); 
$info = mysql_fetch_array($data); 
$variable['TrafficID'] = "id"; 
$variable['ClickURL'] = "url";
$variable['CreateDate'] = "date"; 
$value['TrafficID'] = "mysql_fetch_array($data);"; 
$value['ClickURL'] = "$_SERVER['HTTP_REFERER']";
$variable['CreateDate'] = "$today"; 
$link = "http://www.example.com/page.php";
$link .= "?";
$link .= $variable['TrafficID'] . "=" . $value['TrafficID'];
$link .= "&";
$link .= $variable['ClickURL'] . "=" . $value['ClickURL'];
$link .= "@";
$link .= $variable['CreateDate'] . "=" . $value['CreateDate'];
echo "<a href='" . $link . "'>Click here!</a>";` 
```

理想情况下，该 URL 看起来像[http://www.example.com/page.php?TrafficID&ClickURL@date](http://www.example.com/page.php?TrafficID&ClickURL@date)并且这将全部存储在数据库中，但是我似乎无法让它工作，任何人都可以指出我在哪里犯了个错误？

**更新**

```
$value['ClickURL'] = "$_SERVER['HTTP_REFERER']";
$today = date("Ymd");  
$variable['CreateDate'] = "$today"; 
$link = "http://www.example.com/page.php";
$link .= "?";
$link .= $variable['TrafficID'] . "=" . $value['TrafficID'];
$link .= "&";
$link .= $variable['ClickURL'] . "=" . $value['ClickURL'];
$link .= "&";
$link .= $variable['CreateDate'] . "=" . $value['CreateDate'];
echo "<a href='" . $link . "'>Click here!</a>";` 
```

将 @ 更改为 & 并重新格式化我的日期值

# php - 通过电子邮件发送 html 表单单选框结果？

> ID：14941494
> 
> 赞同：-1
> 
> 时间：2013-02-18T17:02:37.083
> 
> 标签：php, html

有人可以帮助我尝试通过电子邮件从我的表格中通过电子邮件发送 4 个单选框的结果。我收到电子邮件很好，但没有收到通过发送的结果。

有人可以告诉我我做错了什么吗？

html表单：

```
<html>
<head>
<title>Site Feedback</title>
</head>
<body>
<form name="myform" action="send_feedback.php" method="POST">
<div  class="wrapper_feedback" align="left">
  <p>Website Design:</p>
    <input type="radio" name="design" value="design1"> 
    1
    <input type="radio" name="design" value="design2"> 
    2
    <input type="radio" name="design" value="design3" checked> 
    3
     <input type="radio" name="design" value="design4"> 
    4
     <input type="radio" name="design" value="design5"> 
    5
  </p>
  <hr>
<p>Ease of Use:</p>
    <input type="radio" name="easeuse" value="ease1"> 
    1
    <input type="radio" name="easeuse" value="ease2"> 
    2
    <input type="radio" name="easeuse" value="ease3" checked> 
    3
     <input type="radio" name="easeuse" value="ease4"> 
    4
     <input type="radio" name="easeuse" value="ease5"> 
    5
  </p>
    <hr>
<p>Fit for Purpose:</p>
    <input type="radio" name="purpose" value="purpose1"> 
    1
    <input type="radio" name="purpose" value="purpose2"> 
    2
    <input type="radio" name="purpose" value="purpose3" checked>
    3     
    <input type="radio" name="purpose" value="purpose4"> 
    4
     <input type="radio" name="purpose" value="purpose5"> 
    5
  </p>
      <hr>
<p>Layout:</p>
    <input type="radio" name="layout" value="layout1"> 
    1
    <input type="radio" name="layout" value="layout2"> 
    2
    <input type="radio" name="layout" value="layout3" checked>
    3     
    <input type="radio" name="layout" value="layout4"> 
    4
     <input type="radio" name="layout" value="layout5"> 
    5
   </p>
   <input type="submit" action="submit" value="submit" name="submit">
  <br>
</div>
</form>
</body>
</html> 
```

php:

```
<?php ob_start(); ?>
<?php
/* Set e-mail recipient */
$myemail  = "info@mydomain.com";

$subject = "site Feedback";

/* Let's prepare the message for the e-mail */
$message = "somesite.com Feedback

$design
$easeuse
$purpose
$layout

End of message
";

/* Send the message using mail() function */
mail($myemail, $subject, $message);

/* Redirect visitor to the thank you page */
$_SESSION['feedback']="<div class=\"infobox-index\"><strong>Thank You</strong> - We appreciate you taking the time to tell us what you think.</div>"; 
header("Location: {$_SERVER['HTTP_REFERER']}");
exit();
?>
<?php ob_end_flush() ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:05:35.017

您的代码依赖于已弃用和不鼓励的[Register Globals 。](http://php.net/manual/en/security.globals.php)您应该通过以下方式访问数据：

```
$_POST['design'] 
```

不是：

```
$design 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:05:59.260

而不是这些变量：

```
$design
$easeuse
$purpose
$layout 
```

用这个：

```
$_POST['design']
$_POST['easeuse']
$_POST['purpose']
$_POST['layout'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:06:33.627

您需要使用以下语法访问从表单发送的 POST 变量：

```
$_POST['design']
$_POST['easeuse']
$_POST['purpose']
$_POST['layout'] 
```

# codeigniter - codeigniter 解析和替换 bbcode

> ID：14941498
> 
> 赞同：0
> 
> 时间：2013-02-18T17:02:44.153
> 
> 标签：codeigniter, bbcode

我使用 BBCode 助手。帮助代码：

```
function parse_bbcode($str = ''){

$find = array(
  "'\[v\](.*?)\[/v\]'is"
);

$replace = array(
  '<video>\1</video>'
);

return preg_replace($find, $replace, $str);

} 
```

控制器：

```
$this->load->helper('bbcode');

$data['news'] = $this->news_model->get_news($config['per_page'], $this->uri->segment(3, 1));

foreach ($data['news'] as $key=>$val)
{
  parse_bbcode($data['news'][$key]['description']); 
} 
```

例如，我想将 [v]vid[/v] 替换为 vid。更换不起作用（没有任何反应）。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:32:11.287

你的正则表达式是错误的。

这有效：

```
$video = "[v]testvid.swf[/v]";

$re = '/\[v](.+)\[\/v\]/i';

$replace = '<video>\1</video>';

echo htmlspecialchars(preg_replace($re, $replace, $video)); 
```

输出：

```
<video>testvid.swf</video> 
```

* * *

[http://regexpal.com/](http://regexpal.com/)是解决正则表达式问题的好资源。

# java - JSF Primefaces 下载文件

> ID：14941501
> 
> 赞同：0
> 
> 时间：2013-02-18T17:02:55.147
> 
> 标签：java, jsf, primefaces

我目前正在研究 JSF PrimeFaces，我想下载我的项目名称“CV”文件夹中存在的文件，但这里面临的问题是下面的代码

上传文件：

```
<h:form enctype="multipart/form-data">
    <p:fileUpload
        fileUploadListener="#{fileUploadController.handleFileUploadCv}"
        mode="advanced" update="messages"
        allowTypes="/(\.|\/)(doc|docx)$/" />
    <p:growl id="messages" showDetail="true" />
</h:form> 
```

文件下载：

```
<h:form id="form11">
    <p:commandButton id="downloadLink" value="Download Cv" ajax="false"
        onclick="PrimeFaces.monitorDownload(start, stop)"
        icon="ui-icon-arrowthichk-s">
        <p:fileDownload value="#{fileDownloadController.file}" />
    </p:commandButton>
</h:form> 
```

这是控制器类：

```
import java.io.InputStream;  
import org.primefaces.model.DefaultStreamedContent;  
import org.primefaces.model.StreamedContent;  
@ManagedBean
@SessionScoped
public class FileDownloadController {  

    private StreamedContent file;  

    public FileDownloadController() {

        InputStream stream = ((ServletContext)FacesContext.getCurrentInstance().getExternalContext().getContext()).getResourceAsStream("D:/Final Year Project/displayjob-portlet/docroot/cv/Junaid.cv");  
        System.out.print("inside download111");
        file = new DefaultStreamedContent(stream);  
    }

    public StreamedContent getFile() {
        return file;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-09T18:11:26.860

您正在尝试从您的电脑而不是从服务器获取文件。由于应用程序在服务器上运行，因此根目录是您的服务器域根目录。尝试将文件放入服务器并更改其目录。例如，您可以在服务器的根目录中创建一个名为 filesToDownload 的文件夹并将文件放入其中。然后你应该会发现它是这样的：

```
InputStream stream = ((ServletContext)FacesContext.getCurrentInstance().getExternalContext().getContext()).getResourceAsStream("filesToDownload/Junaid.cv"); 
```

我知道这个问题有点老了，但是当我面临同样的问题时，我认为这个答案可能对其他人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T11:55:14.223

您是否在页面中添加了该脚本；

```
<script type="text/javascript">
function start() {
    PF('statusDialog').show();
}

function stop() {
    PF('statusDialog').hide();
}
</script> 
```

# javascript - 如何访问子窗口（弹出）内的父窗口javascript变量？

> ID：14941504
> 
> 赞同：7
> 
> 时间：2013-02-18T17:03:09.297
> 
> 标签：javascript

我有一个 html 页面，其中包含带有 name 的全局 javascript 变量`custName="scott"`。我用 . 打开弹出窗口`window.open`。

现在，如果我使用 访问`custName`内部弹出窗口`window.opener.custName`，我得到的值为`undefined`。如何访问子窗口（弹出）内的父窗口javascript变量？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T06:25:55.140

`window.opener.custName`作品。这是拼写错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:17:53.460

试试这个以获取 javaScript 中的查询字符串

```
link.html?page=1

<script type="text/javascript">

        $.getUrlVar('page');
        $.extend({
              getUrlVars: function(){
              var vars = [], hash;
              var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&amp;');
              for(var i = 0; i &lt; hashes.length; i++)
              {
                   hash = hashes[i].split('=');
                   vars.push(hash[0]);
                   vars[hash[0]] = hash[1];
             }
             return vars;
        },
       getUrlVar: function(name){
           return $.getUrlVars()[name];
       }
 });

</script> 
```

# regex - 使用 sed / grep 编辑 Windows .reg 文件：搜索 FilePath 输出 RegPath 键值

> ID：14941512
> 
> 赞同：0
> 
> 时间：2013-02-18T17:04:07.883
> 
> 标签：regex, windows, sed, grep, registry

我目前正在尝试在 Linux Mint 上编辑完整的转储 .reg 文件。目标是在值中找到给定路径，然后打印出相应的 regpath 键和完整值本身。

我知道我可以在 grep 或 sed 中使用正则表达式模式来实现这一点，不幸的是我对命名程序很陌生。

这是一个示例：我正在搜索 C:\\ProgramData

```
[HKEY_LOCAL_MACHINE\...]
"noPath0"="1.1.9103.0"
"path0Key"="C:\\ProgramData\\..."
"noPath1"="2.1.9103.0"
"path1Key"="...C:\\ProgramData\\..."

[HKEY_LOCAL_MACHINE\...]
"noPath0"=dword:00000000 
```

输出应如下所示：

```
[HKEY_LOCAL_MACHINE\...]
"path0Key"="C:\\ProgramData\\..."
"path1Key"="...C:\\ProgramData\\..." 
```

我已经弄清楚了以下两个 regexPattern：

```
Regpath: ^\[.[^\]]*\n
Key+Value: .*C\:\\\\ProgramData.* 
```

问题是如何结合这两种模式并在 grep 或 sed 中使用它们，或者更适合此任务的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:06:30.367

sed 脚本将是一种更优雅的方式，但对于快速而肮脏的解决方案，我会编写一个脚本，在您的第一个正则表达式上运行 csplit，然后在每个拆分文件上使用第二个正则表达式运行 grep。IE

```
if exist xx* del /q xx*
csplit myfile.reg.txt /^\[/ {*}
for %%f in (xx*) do call :search %%f

goto :EOF

:search

grep ".*C\:\\\\ProgramData.*" %1 >nul
if not "%errorlevel%"=="0" goto :EOF
grep "^\[\|.*C\:\\\\ProgramData.*" %1 
goto :EOF 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T01:12:22.280

由于 ty733420 的帮助，我能够创建一个 bash 脚本来完成工作......真的很慢......但至少它有效：

```
#!/bin/bash

#: <<'COMMENT'
if [ -e xx00 ]; then
    rm xx*
fi
csplit -s ./regBackup.reg.txt "/^\[/" '{*}'

for name in $(ls xx*) 
do
    #echo $name
    if grep '.*C\:\\\\Program Files.*' $name > /dev/null; then
        grep '^\[.*' $name
        grep '.*C\:\\\\Program Files.*' $name
        echo ""
    fi
done
exit 0 
```

：

```
./sedS.sh > out.txt 
```

感谢您的帮助 ty733420 :)

如果有人知道如何加快这项任务，我将不胜感激。

# java - JSF 组件渲染器

> ID：14941513
> 
> 赞同：1
> 
> 时间：2013-02-18T17:04:11.497
> 
> 标签：java, html, jsf

我构建了一个运行良好的 JSF 组件，我可以看到它正在以我想要的方式呈现。从页面打开弹出窗口时出现问题。

当我从弹出窗口返回时，我可以在组件渲染器中组件的属性为空。所以 html DOM 元素不是在我打开弹出窗口之前。

当我重新加载页面时，属性获取它们的值。并且 html DOM 元素恢复正常。

有谁知道为什么？

```
<MyComponent attr1="test1" attr2="test2">
</MyComponen> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:09:44.653

在我的组件中覆盖 UIComponentBase 的 saveState 和 restoreState 方法后，我解决了这个问题。

# php - 使用 Mongo 部署 PHP Heroku 应用程序

> ID：14941515
> 
> 赞同：1
> 
> 时间：2013-02-18T17:04:15.617
> 
> 标签：php, mongodb, heroku

我有一个使用 Mongo 后端托管在 Heroku 上的 PHP 应用程序。我已按照[https://gist.github.com/pedro/1288447](https://gist.github.com/pedro/1288447)上的说明进行操作。

在我的根文件夹中的 php.ini 中，我有 `extension_dir = "/app/web/ext/" extension=mongo.so`

我的 mongo.so 位于分机。

我已经初始化了我的mongoclient

```
 $mongo_url = getenv("MONGOLAB_URI");
    $m = new Mongo($mongo_url); 
```

这样做`heroku config`表明`MONGOLAB_URI:mongodb://heroku_app113736 7.mongolab.com:43477/heroku_app11373662`

但是，该应用程序仍然会在以下时间中断`new Mongo(...)`：`PHP Fatal error: Class 'Mongo' not found`

我不确定我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:55:53.880

env var 再次更改。

它现在`MONGOHQ_URL`！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:10:55.860

按照[https://gist.github.com/1288447上的说明进行操作](https://gist.github.com/1288447)

可以使用您的自定义 php.ini 将自定义扩展添加到 /app/www/ext/！

改变这个：

```
getenv("MONGO_URL") 
```

对此：（来自上面链接中的说明）

```
getenv("MONGO_URI") // URI not URL just like in your code above. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-24T21:51:49.150

Heroku 需要安装 Mongo PHP 客户端来运行您的应用程序。

安装扩展的正确方法是`composer.json`

```
{
  "require": {
      "ext-mongo": "*"
   }
} 
```

然后`composer update`将 repo 推送到 heroku

# html - 在表格单元格中更改字体大小

> ID：14941518
> 
> 赞同：6
> 
> 时间：2013-02-18T17:04:26.453
> 
> 标签：html, css, html-table, superscript, text-size

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Superscript_size_in_table_cell</title>
    <meta name="generator" content="BBEdit 10.5" />
    <style>
    table {
        width: 60%;
    font-size: 0.8em;
    margin-left:auto;
    margin-right:auto;
    border-collapse: collapse;
    }

    .super_script {
    font-size: 80%;
    vertical-align: super;
    }

    </style>
</head>
<body>
    <table id="table_1a-27">
        <caption class="table_caption">Table 1A-27</caption>
        <tr>
            <td>Some text<span class="super_script">Note 1</span></td>
        </tr>
        <tr>
            <td>
                <ol>
                    <li>Beginning of sentence<span class="super_script">Note 2</span> than the rest of the sentence.</li>
                    <li>Some  stuff here</li>
                </ol>
            </td>
        </tr>
   </table>
</body>
</html> 
```

我想更改表格单元格部分内容的文本大小和位置，但上述内容似乎不适用于表格单元格中的文本。我希望能够调整表格元素的大小，而不仅仅是为了上标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:23:18.833

对于一个基本的：

1-将您的“超级脚本”文本放入`<sup>`

2-风格你的`<sup>`这种方式：

```
sup {
  position: relative;
  font-size: 75%;
  line-height: 0;
  top: -0.5em;
  vertical-align: baseline;
} 
```

围绕同一主题还有有趣的问题：

*   [在 Chrome 和 Safari 中使用 valign=top 的表格中的 <sup> 呈现错误](https://stackoverflow.com/questions/13741898/wrong-rendering-of-sup-in-table-with-valign-top-in-chrome-and-safari)
*   [<sub> 或 <sup> 及其后代在 IE 中的相对字体大小](https://stackoverflow.com/questions/6804383/relative-font-size-of-sub-or-sup-and-their-descendants-in-ie)
*   [与 <sup> 和 <sub> 保持一致的行距](https://stackoverflow.com/questions/14638308/keep-consistent-line-spacing-with-sup-and-sub)
*   [Html 上下变化](https://stackoverflow.com/questions/9793784/html-upper-and-lower-indecies)

**[编辑]**`<sub>` ：一些用户提到了一些浏览器的“错误”行为，以及`<sup>`标记的字体大小的相对大小。

也许您应该考虑继续使用`<span>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:11:01.517

它不起作用，因为您没有定义刚刚放置的单元类

```
 class="super_script" 
```

在 td 标签中。

要更改单元格的大小，请确保您这样做

```
 table {table-layout: fixed;} 
```

你应该准备好了！

# ruby-on-rails - 在 test.rb 中静音时未初始化的常量 BCrpyt

> ID：14941520
> 
> 赞同：1
> 
> 时间：2013-02-18T17:04:37.827
> 
> 标签：ruby-on-rails, bcrypt

运行 spork 时出现错误。../config/environments/test.rb:41:in `block (2 levels) in ': 未初始化的常量 BCrpyt (NameError)

这是在我的 test.rb 中：

需要'bcrypt'silence_warnings 做 BCrypt::Engine::DEFAULT_COST = BCrpyt::Engine::MIN_COST 结束

我需要 bcrypt，所以我不知道为什么 BCrypt 未初始化。

我正在使用 bcrypt gem -v 3.0.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-30T10:56:09.570

使用以下命令安装 bcrypt-ruby gem

```
 'gem install bcrypt-ruby' 
```

在你的 gemfile 中包含这个 gem

```
 gem "bcrypt-ruby", :require => "bcrypt" 
```

这应该可以解决您的问题，如果没有，请尝试运行“捆绑安装”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:10:29.670

错字。

您输入：

```
require 'bcrypt' silence_warnings do BCrypt::Engine::DEFAULT_COST = BCrpyt::Engine::MIN_COST end 
```

应该：

```
require 'bcrypt' silence_warnings do BCrypt::Engine::DEFAULT_COST = BCrypt::Engine::MIN_COST end 
```

# admob - 使用 Singleton 的 AdMob 每次展示付费

> ID：14941524
> 
> 赞同：0
> 
> 时间：2013-02-18T17:04:45.757
> 
> 标签：admob

我在我的应用程序中使用了 AdMob 横幅单例。横幅在 App lanuch 加载一次，然后我使用一个横幅视图在所有视图中显示它。

在 AdMob 中，某些横幅广告将按每 1k 展示次数付费。所以我需要知道 SDK 是如何计算一次印象数的。

印象是视图上显示的横幅还是印象？

如果我在不同的视图上添加相同的横幅，我会得到一个印象还是多个印象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T07:20:39.707

如果您使用 Admob，那么您不会获得每千次展示的报酬。您每次点击都会获得报酬。然后根据您每千次展示产生的点击收入来计算 eCPM 数字。

因此，要回答您的问题，您将获得多次展示，但不会增加您的收入。事实上，它可能会降低您的 eCPM。

# c# - 将立方体变形为球体

> ID：14941529
> 
> 赞同：6
> 
> 时间：2013-02-18T17:05:11.107
> 
> 标签：c#, 3d, xna

我创建了一个充当点的小球模型立方体。这些点有坐标：

{0 <= x <= 9, 0 <= y <= -9, 0 <= z <= -9}

立方体的内部是空的，所以点只存在于立方体的表面。空白空间表示为 (100, 100, 100) 处的点，当我执行绘制循环时，我会忽略与它们匹配的点，这就是为什么在我将在下面发布的代码中将其作为执行某些操作的条件或不做。

目标是获取立方体的点，并对它们应用变换以将它们映射到球体上。

![这是用于变换点的一组方程。](../Images/6b1aa431e5b9d17b90d9e7f4a651b80b.png)

这是为立方体位置创建数组然后为球体位置创建数组的代码：

```
// initialize cube array
points = new Matrix[10, 10, 10];

for (int i = 0; i < 10; i++)
{
    for (int j = 0; j < 10; j++)
    {
        for (int k = 0; k < 10; k++)
        {
            points[i, j, k] = Matrix.CreateTranslation(new Vector3(100, 100, 100));
        }
    }
}

for (int i = 0; i < 10; i++)
{
    for (int j = 0; j < 10; j++)
    {
        points[i, j, 0] = Matrix.CreateTranslation(new Vector3(i, -j, 0));
        points[i, j, 9] = Matrix.CreateTranslation(new Vector3(i, -j, -9));
    }
}

for (int j = 0; j < 10; j++)
{
    for (int k = 0; k < 10; k++)
    {
        points[0, j, k] = Matrix.CreateTranslation(new Vector3(0, -j, -k));
        points[9, j, k] = Matrix.CreateTranslation(new Vector3(9, -j, -k));
    }
}

for (int i = 0; i < 10; i++)
{
    for (int k = 0; k < 10; k++)
    {
        points[i, 0, k] = Matrix.CreateTranslation(new Vector3(i, 0, -k));
        points[i, 9, k] = Matrix.CreateTranslation(new Vector3(i, -9, -k));
    }
}
// end cube array initialization

// create sphere array
double d;
double theta;
double phi;
double r = 10;

spherePoints = new Matrix[10, 10, 10];
for (int i = 0; i < 10; i++)
{
    for (int j = 0; j < 10; j++)
    {
        for (int k = 0; k < 10; k++)
        {
            if (points[i, j, k] != Matrix.CreateTranslation(new Vector3(100, 100, 100)))
            {
                d = Math.Sqrt(Math.Pow(i, 2) + Math.Pow(-j, 2) + Math.Pow(-k, 2));
                theta = Math.Acos(-k / d);
                phi = Math.Atan2(-j, i);

                spherePoints[i, j, k] = Matrix.CreateTranslation(new Vector3((float)(r * Math.Sin(theta) * Math.Cos(phi)),
                                                                            (float)(r * Math.Sin(theta) * Math.Sin(phi)),
                                                                            (float)(r * Math.Cos(theta))));
            }
            else
                spherePoints[i, j, k] = Matrix.CreateTranslation(new Vector3(100, 100, 100));
        }
    }
}
// end creation of sphere array 
```

立方体： ![在此处输入图像描述](../Images/37abc5a9ce64f793189f7942f603b7c0.png)

不是球体...： ![在此处输入图像描述](../Images/b79040f38ce5a31179a007ae5b29b97c.png)

据我所知，我完全遵循了这个公式，但它似乎只产生了一个球体的八分之一。边缘似乎也有奇怪的分组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T17:50:49.183

问题是你只是在一个“象限”中绘制你的立方体（或者“八分之一”更合适），所以你只得到你的球体的 1/8。

不要让你的立方体从 [0,9]、[-9,0]、[-9,0] 出发，而是把它集中在原点上。

一旦你的立方体从 [-5,5]、[-5, 5]、[-5,5] 出发，你的球面计算就可以了。

只是为了更多地了解这是怎么回事：

*   当您评估 Acos(z/d) 时，您的答案将在多少个象限中，假设 d 始终为正而 z 始终为负？
*   假设 y 始终为负数且 x 始终为负数，当您评估 Atan(y, x) 时，您的答案将在多少个象限中？

在 8 个可能的象限组合中，您只填充了一个。

# sql - Oracle APEX - 来自 LDAP 的 LOV

> ID：14941531
> 
> 赞同：3
> 
> 时间：2013-02-18T17:05:18.173
> 
> 标签：sql, oracle, plsql, ldap, oracle-apex

我试图了解是否可以创建一个值是来自 LDAP 的电子邮件的 LOV 项目。有人知道这是否可能吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:30:11.327

这应该有效：

1.  制作一个 PL/SQL[`PIPELINED`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/tuning.htm#i53109)函数来查询您的 LDAP[`DBMS_LDAP`](https://docs.oracle.com/cd/E28280_01/dev.1111/e10186/dbmsldap_ref.htm#OIMAD009)并返回一个电子邮件表，

2.  将您的`LOV`项目定义为基于查询：

    ```
    SELECT column_value display, column_value FROM TABLE(function) 
    ```

# python - Python 中的差异矩阵，结果类似于 MATLAB 的 bsxfun

> ID：14941532
> 
> 赞同：-1
> 
> 时间：2013-02-18T17:05:18.353
> 
> 标签：python, matrix

我有一个 Nx1 值向量。我想做的是创建一个 NxN 矩阵，其中每个值代表第 i 个和第 j 个值之间的差异 - 有点像一个大的相关矩阵。我已经用循环完成了这个，但我正在寻找一种更优雅的方法来使用 Python 的矢量化功能，因为这个矢量可能会变得非常大。我意识到有一些问题有抽象的答案。

如何`bsxfun`在 Python 中复制 MATLAB 的函数？

我在 SE 上发布了一个问题来发现`bsxfun` [这里](https://stackoverflow.com/questions/13422606/matlab-matrix-of-differences "这里")，但现在需要在 Python 中做同样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T17:13:05.227

我不完全清楚你想要什么，但是`numpy`的广播规则（见[这里](http://www.scipy.org/EricsBroadcastingDoc)的介绍）意味着大部分时间`bsxfun`都不需要，因为它只是 Works(tm)。例如，如果我了解您的意思，例如

```
>>> a = np.array([1,3,5,7,9])
>>> a - a[:,None]
array([[ 0,  2,  4,  6,  8],
       [-2,  0,  2,  4,  6],
       [-4, -2,  0,  2,  4],
       [-6, -4, -2,  0,  2],
       [-8, -6, -4, -2,  0]]) 
```

应该管用。

# ruby - 如何将键盘按下/鼠标点击发送到 Ubuntu 中的其他 GUI 应用程序？

> ID：14941534
> 
> 赞同：1
> 
> 时间：2013-02-18T17:05:22.147
> 
> 标签：ruby, linux, ubuntu, keyboard, awtrobot

我想从我的 Ruby 程序发送鼠标点击、键盘按下到已经打开的 3rd 方 GUI 应用程序。

如何将鼠标点击、键盘按下发送到 Ubuntu？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:17:36.127

看看[这个](http://www.semicomplete.com/projects/xdotool/xdotool.xhtml)适用于 Ubuntu 的 autoit like 应用程序。它是命令行的，所以你可以从 Ruby 中调用它

# c# - 更改数据源时更新绑定控件的更好方法

> ID：14941537
> 
> 赞同：4
> 
> 时间：2013-02-18T17:05:35.573
> 
> 标签：c#, winforms, data-binding

问题。对于表单本身的大量文本框，我对表单上的属性中的字段进行了数据绑定。我不仅要更改属性中的字段值，还要更改整个属性（重置为以前保存的默认值）。

我想做的是这样的：

```
((CurrencyManager)BindingContext[Row]).Refresh(); 
```

不起作用，`BindingContext[Row]`是 a `PropertyManager`，不是 a `CurrencyManager`，并且没有刷新方法。 `PushData()`受保护且不可访问。我也尝试调用`this.Refresh()`，并分别在我尝试调用的每个控件上`c.Refresh`...现在呢？

这是我目前使用的代码：

```
private void btnReset_ButtonClicked(object sender, EventArgs e)
{
    Row = ResetRow.Clone();//use clone to break the reference, dont want to be updating the ResetRow when Row fields change.

    foreach (Control c in pnlBody.Controls)
        if (c.DataBindings.Count > 0)
            c.DataBindings.Clear();

    DataBindandSet();//re-apply all the databindings (50)
}

//just a sample of the databinding function itself
private void DataBindandSet()
{
    txtAzimuth.DataBindings.Add(new NullableBinding("Text", Row, "Azimuth", true));
    txtBHTemp.DataBindings.Add(new NullableBinding("Text", Row, "BHTemp", true));
    //repeat 48 more times
} 
```

**更新** 我将数据绑定设置为完整的数据绑定字符串，以查看设置空值默认值是否有任何效果，它没有。

```
txtAzimuth.DataBindings.Add(new NullableBinding("Text", Row, "Azimuth", true, DataSourceUpdateMode.OnPropertyChanged, "")); 
```

`Row`是表单本身的公共属性。 `ResetRow`是表单上的私有属性，它分配给表单加载上初始行的克隆并且从未更改，它用作备份。 *某些属性（但不是全部）的值允许为空，并且应显示为空字符串。这就是 NullableBinding 类在幕后所做的*

谁能想到比删除和重新应用每一个数据绑定更好的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T17:15:32.930

*假设您要绑定的对象保持不变*，使用[`Binding.ReadValue`](http://msdn.microsoft.com/en-us/library/system.windows.forms.binding.readvalue.aspx)可能会省去解除绑定和重新绑定的麻烦，但这并没有好多少：

 *```
foreach (Control c in pnlBody.Controls)
    foreach (Binding b in c.DataBindings)
        b.ReadValue(); 
```

* * *

另一方面，如果您正在更改底层绑定对象，这将不起作用。我建议在s 和object`BindingSource`之间放置一个，这样你只需要重新绑定绑定源，而不是单独绑定所有 50 个绑定。通过调用或重置数据源：`Binding``Row``BindingSource.CancelEdit()`

```
RowBindingSource.DataSource = null;
RowBindingSource.DataSource = this.Row; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-03T01:59:31.907

试试这个：`TableAdapter.Fill(dataTable)`

我的例子：`this.bankingaccountTableAdapter.Fill(this.bankDataSet.bankingaccount);`*

# git - cakephp 中的 .gitignore：忽略除名为空的文件之外的所有内容

> ID：14941539
> 
> 赞同：1
> 
> 时间：2013-02-18T17:05:43.283
> 
> 标签：git, cakephp, tmp

cakephp 项目正在使用所谓的空文件。空文件实际上被命名为空，并且里面没有任何信息。它们的唯一目的：可以通过 git 版本化来提交空目录。

不幸的是，我遇到了 /app/tmp 目录的问题，因为它不仅包括那些空文件，还包括根本不应该被索引的临时缓存文件！

所以我尝试编写一个 .gitignore 文件，它应该忽略 /app/tmp 中的所有内容，但不是空文件，这是我不工作的尝试：

```
#.gitignore in cakephp root
/app/tmp
!/app/tmp/logs/empty
!/app/tmp/sessions/empty
!/app/tmp/tests/empty
!/app/tmp/cache/models/empty
!/app/tmp/cache/persistent/empty
!/app/tmp/cache/views/empty 
```

我错过了什么？.gitignore 可能不适合这样的事情吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:39:55.630

为什么不直接添加`!empty`到根目录`.gitignore`？Git 将递归地应用忽略规则，从 repo 根目录到最终目录。因此，如果您`!empty`在根目录中有忽略规则，它将在任何地方应用而不会重复。

问题可能是`app/tmp`只包含被忽略的文件（具有任何折叠级别）。在这种情况下，git 不会索引`app/tmp`，因为它只索引实际存在的*文件*。

# javascript - 没有在function.asynchronous中设置jquery变量？

> ID：14941541
> 
> 赞同：-1
> 
> 时间：2013-02-18T17:05:52.823
> 
> 标签：javascript, jquery

我认为这与异步功能有关，但我不确定。我认为这是一个快速的答案，但我无法弄清楚。

我正在尝试检查服务器上是否存在图像。如果他们这样做，那么设置一个变量。如果他们不这样做，请继续检查下一张图片。

每次我提醒变量虽然我一直得到 0。我知道网址是正确的，一切。出于某种原因，虽然我无法获得变量。有小费吗？

```
 $('.rightPostContent img').each(function(){
            var c = $(this).attr('src');
            var pot1 = c.replace('_B.png','_pt1.gif');
            var pot2 = c.replace('_B.png','_pt2.gif');
            var pot3 = c.replace('_B.png','_pt3.gif');

        $.get(pot3)
            .done(function() { 
                var t = 3;
            }).fail(function() { 
        })  
        $.get(pot2)
            .done(function() { 
                var t = 2;
            }).fail(function() { 
        })          
        $.get(pot1)
            .done(function() { 
                var t = 1;
            }).fail(function() { 
        })  
        alert(t);
    }); 
```

`t`即使`pot`此示例中存在所有图像，该变量也不会发出任何警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:07:08.493

与`$.get()`异步一样，因此您无法`alert()`摆脱功能`done()`。`fail()`因此，在这种情况下，您可以尝试以下操作：

```
$('.rightPostContent img').each(function(){
            var c = $(this).attr('src');
            var pot1 = c.replace('_B.png','_pt1.gif');
            var pot2 = c.replace('_B.png','_pt2.gif');
            var pot3 = c.replace('_B.png','_pt3.gif');

            var t = '';  // define variable t here

        $.get(pot3)
            .done(function() { 
                t = 3;
                alert_me();
            }).fail(function() { 
        })  
        $.get(pot2)
            .done(function() { 
                t = 2;
                alert_me();
            }).fail(function() { 
        })          
        $.get(pot1)
            .done(function() { 
                t = 1;
                alert_me();
            }).fail(function() { 
        });

        function alert_me() {
            alert(t);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:10:46.323

完全正确...这是异步调用...因此，当控件到达您的`alert`语句时，`$.get()` 尚未从服务器或任何来源接收数据。

如果您需要使用 的设定值`t`，您可能想要创建一个`t`需要传递它的新函数。`done()`然后从您的或回调中调用该函数`fail()`。

```
function hereINeedTheT(t){
    //your code goes here.
}

$('.rightPostContent img').each(function(){
            var c = $(this).attr('src');
            var pot1 = c.replace('_B.png','_pt1.gif');
            var pot2 = c.replace('_B.png','_pt2.gif');
            var pot3 = c.replace('_B.png','_pt3.gif');

        $.get(pot3)
            .done(function() { 
                var t = 3;
                hereINeedTheT(t);
            }).fail(function() { 
        })  
        $.get(pot2)
            .done(function() { 
                var t = 2;
                hereINeedTheT(t);
            }).fail(function() { 
        })          
        $.get(pot1)
            .done(function() { 
                var t = 1;
                hereINeedTheT(t);
            }).fail(function() { 
        })  
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:10:41.357

您可以在 jQuery 中使用同步 Ajax 调用，如下所示：

```
$.ajax({
        type: "GET",
        url: pot3,
        async: false,
        success: function(){var t = 3;},
        error: function(){}
    } 
```

# jquery - 从 jquery 1.3.2 升级到 1.9.1 时会发生奇怪的事情

> ID：14941542
> 
> 赞同：1
> 
> 时间：2013-02-18T17:05:58.783
> 
> 标签：jquery, versions

*   我一直在使用 jquery 1.3.2，我升级到 1.9.1 发生的事情是，达到成功的 ajax 请求现在正在出错。我不明白为什么，状态是200，状态是4。这意味着请求没有错。但为什么它会达到错误？

我做了一个如下的工作，但我不喜欢它。我想知道为什么会这样。我也害怕有更多这样的问题。

```
 $.ajax({
    type: "POST",
    url: "test.cgi",
    data: form_data,
    beforeSend: function(){
        $("#"+type+"_div").html("<span class='LabelRed12'>Loading , please wait..</span><br/>");
    },
    complete: function(){

    },
    success: function(html){
        $("#"+type +"_div").html(html);

    },
    error:function(xhr,err){
         if (xhr.readyState == 4) {
           if (xhr.status == 200) {
                $("#"+type +"_div").html(xhr.responseText);
           } else
             alert("status is " + request.status);
         }
    }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:19:30.230

您的问题可能是您没有为 ajax 请求指定 dataType ，请尝试添加：

```
dataType: 'json' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:21:57.233

当您从情人版本移动到更高版本时，您应该使用 jquery migrate 插件。检查 jquery 站点并获取 migrate jquery api。这将解决您的问题

参考：jquery.com/download/

# php - 将多个 URI 函数映射到同一个视图

> ID：14941550
> 
> 赞同：0
> 
> 时间：2013-02-18T17:06:21.400
> 
> 标签：php, codeigniter

在使用 codeigniter 时，我有一个用于退出页面的控制器。我希望用户能够访问 url site.com/example/copy、site.com/example/revise，并且每次加载相同的页面并传递不同的变量，如下所示：

```
class example extends Secure_Controller {

    public function revise()
    {
        $id = $_GET["id"];
        $show_for_edit("revise", $id);
    }

    public function copy()
    {
        $id = $_GET["id"];
        $show_for_edit("copy", $id);
    }

    public function show_for_edit($edit_type, $id)
    {
        //A lot of database queries that I don't
        //want duplicated under revise() and copy()
        $data["id"] = $id;
        $data["edit"] = $edit_type;
        $this->load->view('model', $data);
    }
} 
```

但我收到一个错误：

> 致命错误：调用未定义函数 show_for_edit()

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:10:12.403

在 PHP 中，当调用该方法的对象没有引用，即它为空时，会发生此错误。

在您的情况下，调用方法“show_for_edit”的对象为空，因此出现了该错误。

检查调用此方法的变量并确保它不为 null 并且是“示例”类的实例。

`$show_for_edit ("check", $id)`此外，我不确定这些调用`$show_for_edit ("copy", $id)`是否正确。我认为他们应该是：

```
$this-> show_for_edit ("check", $ id); 
```

和

```
$this-> show_for_edit ("copy", $ id); 
```

# character-encoding - 如何转换 HTML 编码的 XML？

> ID：14941556
> 
> 赞同：1
> 
> 时间：2013-02-18T17:06:31.177
> 
> 标签：character-encoding, xml-serialization, xslt-2.0

我有一个输入 XML

```
<values xsi:type="xsd:string">&lt;Test objectgroupNr="001"/&gt;&lt;bezeichnung&gt;A&amp;amp;B &lt;/bezeichnung&gt;</values> 
```

其中包含我想要转换为“普通”XML 编码的 HTML 编码字符：

```
<values xsi:type="xsd:string">
        <Test objectgroupNr="001"/>
        <bezeichnung>A&amp;B</bezeichnung>
</values> 
```

我可以改变一些字符

```
<xsl:character-map name="fischer">
            <xsl:output-character character="&lt;" string="&lt;"/>
            <xsl:output-character character="&gt;" string="&gt;"/>
</xsl:character-map>      
<xsl:output method="xml" use-character-maps="fischer"/> 
```

但输入所有可能的特殊字符（如 Ä、Ü、ß、é 等）似乎不是一个好主意……

这可以使用 XSLT 以简单的方式完成吗？转换发生在使用 Saxon 8.9 的 Sonic ESB 环境中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:21:42.470

根据[http://www.saxonica.com/documentation8.9/extensions/functions/parse.html](http://www.saxonica.com/documentation8.9/extensions/functions/parse.html)支持扩展功能，因此您应该可以使用例如

```
<xsl:template match="values">
  <xsl:copy>
    <xsl:copy-of select="@*"/>
    <xsl:copy-of select="saxon:parse(concat('&lt;root&gt;', ., '&lt;/root&gt;'))/*/node()"/>
  </xsl:copy>
</xsl:template> 
```

您将`xmlns:saxon="http://saxon.sf.net/"`作为名称空间声明放入样式表的位置。

# asp.net-mvc - MVC - 如何在布局和视图中共享模型

> ID：14941559
> 
> 赞同：0
> 
> 时间：2013-02-18T17:06:36.090
> 
> 标签：asp.net-mvc, viewdata

我们有一个复杂的购物车结构。复杂性在于定价结构。计算所有定价需要大量不同的数据库实体。由于复杂性，我们只为每个客户的购物车存储少量数据，当我们需要购物车时，我们会读取所有这些购物车数据以及数据库中的许多定价部分 - （编辑）并将结果放入一个购物车对象，包含总数。不幸的是，这在时间上相对昂贵。

我们的主站点布局（编辑）获取购物车对象并公开一个指向购物车的链接并显示到期金额（如果购物车中有任何物品）。

我们的页面可能会或可能不会显示购物车中的其他信息。例如，“关于我们”页面不需要购物车，但站点布局仍然需要它。

我为购物车设置了一个全局对象。我可以从主站点布局访问该对象。我也可以将它放入页面的视图模型中。

所以有时主站点布局实例化购物车，视图模型独立实例化购物车。

（编辑）所以网站布局需要每个页面的购物车对象 - 页面可能需要也可能不需要购物车对象。

问题：视图可能有也可能没有可以放入 ViewBag 的购物车，以便主站点布局可以使用它。如何在生命周期中只实例化一次购物车对象？

```
public class ShoppingCart
{
    // Complex, data intensive calculations upon instantiation
}

public class myViewModel
{
    public ShoppingCart cart {get; set;}
} 
```

在主站点布局中：

```
@{
    ShoppingCart cart = new ShoppingCart(GlobalMemberID);
} 
```

在需要购物车的页面中：

```
@model myViewModel 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:30:14.190

您可以将购物车实例存储到[`HttpContext.Items`](http://msdn.microsoft.com/en-us/library/system.web.httpcontextbase.items.aspx)字典中，以便在整个 HTTP 请求生命周期中都可以使用它，并避免为相同的数据两次访问数据库。

# qt - 如何在 QT 中隐藏 qscrollbar 上下文菜单

> ID：14941566
> 
> 赞同：0
> 
> 时间：2013-02-18T17:06:59.747
> 
> 标签：qt, scroll, scrollbar, qscrollarea

如何隐藏右键单击时出现的滚动条上下文菜单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:06:59.747

如果您有 QScrollArea，首先访问两个滚动条，然后使用以下命令将上下文菜单策略更改为 NoContextPolicy：

```
scrollArea->verticalScrollBar()->setContextMenuPolicy(Qt::NoContextMenu);
scrollArea->horizontalScrollBar()->setContextMenuPolicy(Qt::NoContextMenu); 
```

# css - 渐进式增强选项卡式导航。（仅使用 css）

> ID：14941567
> 
> 赞同：0
> 
> 时间：2013-02-18T17:07:01.867
> 
> 标签：css, progressive-enhancement

我正计划在我正在设计的网站上制作一个标签式导航。最初，您可以在 javascript 中创建它。但是，如果有人在关闭 Javascript 的情况下浏览网页。然后他们将看不到其他选项卡指向的链接。

希望你能给我这方面的建议。在这个网站上（stackoverflow）。我在这里尝试了禁用 JS 的选项卡式导航，但选项卡式导航仍然有效。关于如何实现这一目标的任何提示。

```
<ul class="tabbed-nav">
    <li><a href="#section1">Tab 1</a></li>
</ul>
<div class="tabbed-content">
    <div id="section1">I'm tab1</div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T21:52:54.803

几个月前我做了类似的事情......

[http://lloydsbankinggroupapprentices.com/](http://lloydsbankinggroupapprentices.com/)

看看主页上的“品牌”部分。

关闭 JS 后，锚点上的 href 本质上会将内容拉到视图中。前段时间在 csstricks 上看到的不错的小技巧。但是现在找不到页面..？

CSS 非常简单：

```
.tabbed-nav li a{
display: block;
padding: 3px 10px;
margin-right: 1px;
background: #666;
color: #fff; 
```

}

```
.tabbed-content{
position: absolute;
top: 35px;
height: 100px;
overflow: hidden;
width: 100%; 
```

}

```
.tabbed-content div{
position: relative;
height: 100px;
width: 300px; 
```

}

这是一个显示纯 CSS 选项卡式内容的 JS 小提琴。

[http://jsfiddle.net/danvoyce/DUL6N/](http://jsfiddle.net/danvoyce/DUL6N/)

如果您有任何疑问，请给我们留言！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:38:21.757

使用像 jQuery 这样的工具，实现这一点是最简单的任务。

**检查这个 JS 小提琴：http:** [//jsfiddle.net/sqfSA/](http://jsfiddle.net/sqfSA/)

**此外，请参阅此页面以了解选项卡 UI 功能：http:** [//jqueryui.com/tabs/](http://jqueryui.com/tabs/)

普通**HTML**与**CSS**一起使用，然后**JS**用于隐藏/显示选项卡。**如果JS**被禁用，这会导致可见数据。

希望有帮助。

完整的代码，因为 Stack Overflow 需要它（您可以将其复制并粘贴到您自己的应用程序中，以查看它是否正常工作）：

```
<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Tabs - Default functionality</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<link rel="stylesheet" href="http://jqueryui.com/tabs/resources/demos/style.css" />
<script>
$(function() {
$( "#tabs" ).tabs();
});
</script>
</head>
<body>
<div id="tabs">
<ul>
<li><a href="#tabs-1">Nunc tincidunt</a></li>
<li><a href="#tabs-2">Proin dolor</a></li>
<li><a href="#tabs-3">Aenean lacinia</a></li>
</ul>
<div id="tabs-1">
<p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
</div>
<div id="tabs-2">
<p>Morbi tincidunt, dui sit amet facilisis feugiat, odio metus gravida ante, ut pharetra massa metus id nunc. Duis scelerisque molestie turpis. Sed fringilla, massa eget luctus malesuada, metus eros molestie lectus, ut tempus eros massa ut dolor. Aenean aliquet fringilla sem. Suspendisse sed ligula in ligula suscipit aliquam. Praesent in eros vestibulum mi adipiscing adipiscing. Morbi facilisis. Curabitur ornare consequat nunc. Aenean vel metus. Ut posuere viverra nulla. Aliquam erat volutpat. Pellentesque convallis. Maecenas feugiat, tellus pellentesque pretium posuere, felis lorem euismod felis, eu ornare leo nisi vel felis. Mauris consectetur tortor et purus.</p>
</div>
<div id="tabs-3">
<p>Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem. Vestibulum non ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque eu urna vel enim commodo pellentesque. Praesent eu risus hendrerit ligula tempus pretium. Curabitur lorem enim, pretium nec, feugiat nec, luctus a, lacus.</p>
<p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent viverra justo vitae neque. Praesent blandit adipiscing velit. Suspendisse potenti. Donec mattis, pede vel pharetra blandit, magna ligula faucibus eros, id euismod lacus dolor eget odio. Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut sagittis. Donec nisi lectus, feugiat porttitor, tempor ac, tempor vitae, pede. Aenean vehicula velit eu tellus interdum rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus. Vivamus a libero vitae lectus hendrerit hendrerit.</p>
</div>
</div>
</body>
</html> 
```

# java - 在 Java 中模拟函数模板

> ID：14941568
> 
> 赞同：2
> 
> 时间：2013-02-18T17:07:02.543
> 
> 标签：java, generics, function-template

我正在尝试模拟类似于 Java 中的函数模板的东西，从某种意义上说，我有以下内容：

```
public interface MyFunctionTemplate<T> {
    void doSomething(T thing);
}

public class MyIntegerFunctionTemplate extends MyFunctionTemplate<Integer> { ... }
public class MyStringFunctionTemplate extends MyFunctionTemplate<String> { ... } 
```

看来我需要某种形式的中央注册表。类似于以下内容：

```
public class MyFunctionTemplateRegistry {
    private static Map<Class<?>, MyFunctionTemplate<?>> registry;

    public static <T> void register(Class<T> templateClass, MyFunctionTemplate<T> templateFunction);

    public static void doSomething(Object thing);
} 
```

设计这种东西的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:58:43.777

好吧，这取决于您想要实现的目标以及实现类是否需要知道类型。对我来说，您的建议似乎设计过度（太复杂），但如果没有更具体的信息，真的很难说。

我这么说的原因是我不喜欢你想为你的接口实现两个单独的类（每种类型一个）。使用泛型的优势通常在于找到一种使用泛型类型 T 的类来实现它的方法。

再说一次，我可能误解了你在这里的意图......

无论如何，作为一个简单的例子，如果你的函数是纯数学的，比如`getMax()`and `getMin()`，那么你肯定不需要知道更多关于 T 的信息，而不是 T 与 T 可比的事实。

然后你可能会得到这样的结果：

```
public class FindExtremes<T extends Comparable<T>> {
    T getMax(T a, T b) {
        return a.compareTo(b) >= 0 ? a : b;
    }
    T getMin(T a, T b) {
        return a.compareTo(b) <= 0 ? a : b;
    }
} 
```

这可以直接用于任何实现 Comparable 的类，例如

```
new FindExtremes<Integer>().getMax(4, 5);
new FindExtremes<Double>().getMax(4.444D, 5.555D);
new FindExtremes<String>().getMax("abc", "zyx"); 
```

# jquery - Binding actions with hardrive links

> ID：14941570
> 
> 赞同：1
> 
> 时间：2013-02-18T17:07:07.147
> 
> 标签：jquery

I encounter a problem with jQuery and anchors which href concerns a microsoft desktop windows application. I am working on an internal app which provides links such as :

```
<a id="launch-21" class="launch-app" href="c:\windows\explorer.exe" target="_blank"> 
```

I would like to target all the link containing windows for instance in order to bind the following actions :

```
jQuery('a[href*="windows"]').click(function(event){
    alert("use this link in your windows workstation");
    event.preventDefault();
}); 
```

This has no absolutly no effect. But when I run the following selector, elements are well returned.

It seems the treatment doesn't work with hard drive links ? jQuery('a[href*="windows"]') Does anybody an help me ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:51:47.427

Your code seems to work without any problem,

Maybe you're running it before `$(document).ready` is triggered, or the links in question are loaded in the DOM and ready to be parsed using javascript.

Try changing your javascript to:

([I've created a fiddle for this, you may test it there](http://jsfiddle.net/fYAXL/))

```
jQuery(document).ready(function(){
    jQuery('a[href*="windows"]').click(function(event){
        var link = jQuery(this).attr("href");
        window.prompt("use this link in your windows workstation", link);
        event.preventDefault();
    });
}); 
```

*(please note that i took the liberty of changing your alert to a prompt in order to do some testing)*

In alternative you can also move your javascript to the end of the page, before closing your `<body>` tag.

# javascript - Javascript：如何仅选中屏幕上的复选框

> ID：14941572
> 
> 赞同：1
> 
> 时间：2013-02-18T17:07:09.377
> 
> 标签：javascript, jquery, html

我有一个 200 行的表，它被分成 20 页（每页 10 行）。这些行中的每一行都有一个复选框。我使用jPage，所以所有的表都还在，只是被“display:none”隐藏了。我编写了一个函数来选择所有复选框（附加了一些先前的条件），如下所示：

```
$('#masterCbox').click(function () {
  if($(this).is(':checked')) {
    $('.childCbox').prop('checked', false);
    $('.select-y').children('.childtd').children('.childCbox').prop('checked', true);
  } else 
    $('.childCbox').prop('checked', false);
}); 
```

这将检查所有具有 class="select-y" 的行。

但是，要求只选中屏幕上的复选框（复选框属于显示页面的行）。我将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:10:03.470

您可以在 JQuery 中使用 :visible 选择器来查看某些内容是否可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:10:04.687

检查它是否可见，并检查它是否有一个匹配的父`.select-y`项而不是所有的`children()`东西：

```
$('#masterCbox').click(function () {
   if( this.checked ) {
       $('.childCbox').prop('checked', false).filter(function() {
           return $(this).is(':visible') && $(this).closest('.select-y').length;
       }).prop('checked', true);
  } else {
       $('.childCbox').prop('checked', false);
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:12:49.850

你可以这样做：

```
$('.select-y .childtd').children('.childCbox:visible').prop('checked', true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T17:10:25.460

您可以应用过滤器来检查您的行是否可见：

```
 $('.select-y').is(':visible').children('.childtd').children('.childCbox').prop('checked', true); 
```

# hibernate - 在 Hibernate 中透明地使用 PostGIS 列

> ID：14941574
> 
> 赞同：1
> 
> 时间：2013-02-18T17:07:18.820
> 
> 标签：hibernate, postgis

我有一个 PostgreSQL 表，其中包含许多其他列，一个空间列`point`。此空间列应以 geoJson 格式提供其内容。

一个普通的 SQL 应该是这样的：

```
select column1, column2, column3, ST_AsGeoJSON(point) from table; 
```

和回写：

```
update table set column1 = 'abc', column2 = 'def', column3 = 'ghi', 
  point = ST_GeomFromGeoJSON('{ ... geojson ... }') 
  where id = ??; 
```

我知道hibernate有一个扩展名为hibernate-spatial。但这个扩展适用于 postgis 1.5，它可以读取 geoJson，但不能解析 geoJson 并将其写回 PostgreSQL。另一个缺点：空间操作（如转换）是在服务器端完成的，而不是在数据库端。

是否有可能将 sql 函数注入到这样的查询中：

```
EntityManager em = emFactory.createEntityManager();
myModel selected = em.find(myModel.class, 1); 
```

在 myModel 中，用于几何的列应该是`String`表示 geoJson 的 String 或继承的 String 类型。

我找到了 Hibernate Dialects，但它们似乎只适用于 HQL（或 JPL）。我想透明地使用这个geojson - 不与HQL结合使用（我被迫在代码中编写SQL，我不想要什么）。

也可以使用[`setCustomWrite`](http://docs.jboss.org/hibernate/orm/4.2/javadocs/org/hibernate/mapping/Column.html#setCustomWrite(java.lang.String))和[setCustomRead](http://docs.jboss.org/hibernate/orm/4.2/javadocs/org/hibernate/mapping/Column.html#setCustomRead(java.lang.String))但我没有找到任何如何使用它们的示例。

为了防止回答为什么我想将类型保留在 postgis-geometry 中 - 由于 db 端有其他与空间相关的操作，它应该保留在这种类型中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T09:15:31.843

方言是用于休眠的，您只需使用 postgres 驱动程序...

# scala - scala - 使用带有模式匹配的过滤器

> ID：14941578
> 
> 赞同：7
> 
> 时间：2013-02-18T17:07:42.987
> 
> 标签：scala, design-patterns, filtering

我有以下列表：

```
case class myPair(ids:Int,vals:Int)

val someTable = List((20,30), (89,90), (40,65), (45,75), (35,45))

val someList:List[myPair] =
  someTable.map(elem => myPair(elem._1, elem._2)).toList 
```

我想过滤所有 "ids" > 4​​5 。[我使用模式匹配](http://www.markhneedham.com/blog/2011/07/12/scala-pattern-matching-a-pair-inside-mapfilter/)尝试了类似这篇文章的过滤器）：

```
someList.filter{ case(myPair) => ids >= 45 } 
```

但没有成功。感谢你的帮助

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-18T17:10:26.133

您根本不需要模式匹配，类型在编译时是已知的：

```
someList.filter(_.ids >= 45) 
```

或者稍微冗长/可读：

```
someList.filter(pair => pair.ids >= 45) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-18T17:29:28.930

你的意思是：

```
someList.filter{ case MyPair(ids,vals) => ids >= 45 } 
```

重命名`myPair`为`MyPair`，以小写字母开头的标识符被认为是变量，很像上面的`ids`和`vals`。——其实这不是真的，看看@RandallSchulz 的评论。

更进一步（1）：

```
val someList = someTable.map(case (ids,vals) => MyPair(ids,vals)).toList 
```

更多（2）：

```
val someList = someTable.map(elem => MyPair.tupled(elem)).toList 
```

方式更多（3）：

```
val someList = someTable.map(MyPair.tupled).toList 
```

当然，只有 (1) 是关于模式匹配的。(2) 和 (3) 将 的参数`MyPair.apply(Int,Int)`转换为 Tuple[Int,Int]。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-18T21:36:01.670

这是使用模式匹配的另一种变体

```
someTable collect {case (i, v) if i > 45 => MyPair(i, v)} 
```

collect 结合了过滤操作和映射操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T22:36:09.050

```
case class myPair(ids:Int,vals:Int)

val someTable = List((20,30), (89,90), (40,65), (45,75), (35,45))

val someList:List[myPair] = for( elem <- someTable; if elem._1 > 45) yield myPair(elem._1, elem._2) 
```

这使

```
someList: List[myPair] = List(myPair(89,90)) 
```

# c# - WCF 数据服务“任何/全部”类似功能

> ID：14941584
> 
> 赞同：1
> 
> 时间：2013-02-18T17:08:21.050
> 
> 标签：c#, .net, linq, wcf-data-services, odata

我正在使用 WCF Data Services 5.2 通过 OData 查询数据库。我将在下面描述我的问题，我认为可以通过实现我自己的过滤数据的功能来解决它​​，类似于任何/全部，但如果您有更好的解决方案，请随时分享。

作为一个模型，我有一个包含员工的表，一个包含所有可能的技能（资格）的表和一个用于员工和技能之间的多对多关系的映射表（EQs）。到这里为止，一切都很简单，但技能表实际上代表了一棵技能树；例如，技能“编码”有“.Net”和 Java 作为子项，而 .Net 有 WCF 和 ASP.NET 作为子项，Java 有 JSF 和 Struts 作为子项。技能树在技能表中建模，并带有一个名为“QParentID”的列（每个技能都有一个直接父级）。

![在此处输入图像描述](../Images/42d392bda2e3cd7f4096d0874c8a81b4.png)

员工可能仅与 WCF 或 ASP.NET 作为技能有关系，但是当我搜索具有“.NET”技能的员工时，我也应该找到这些员工以及具有直接链接的员工到.NET。例如，John 拥有 WCF 和 ASP.NET 作为技能（没有直接链接到 .NET 技能），但是当我搜索具有技能 .NET 的员工时，John 也应该在结果中。实际上，我需要递归地搜索技能和他们所有的父母。

我正在考虑实现一个类似于“任何/全部”的功能。类似这样 的东西`\webservice\Employees?&filter=matches(<id>)` 而不是 `\webservice\Employees/?$filter=EQs/any(e: e/Qualification_ID eq <id>)`

这将递归地检查技能或其父级（以及父级的父级）是否与 id 匹配。

同样，如果您有比这更好的解决方案，请随时分享。

在此先感谢您的帮助。

萝莉

编辑：我添加了我想实现并与 odata 一起使用的递归函数的非优化初稿

```
public static bool Matches(IEnumerable<EQ> source,
int id)
    {
        if (source == null)
        {
            throw new ArgumentNullException("source");
        }
        EFEntities entities = new EFEntities();
        foreach (EQ item in source)
        {
            if (item.Qualification_ID == id || CheckParent(entities.Qualifications.Where(q=>q.ID_Qualification == id).First(),id))
            {
                return true;
            }
        }
        return false;
    }

    private static bool CheckParent(Qualification qualification, int id)
    {
        EFEntities entities = new EFEntities();
        if (qualification.ID_Qualification == id) {
            return true;
        }
        if (qualification.QParent_ID != 0) {
            if (CheckParent(entities.Qualifications.Where(q => q.ID_Qualification == qualification.ID_Qualification).First(), id)) {
                return true;
            }
        }

        return false;

    } 
```

我从“任何”方法的实现中复制了该方法的签名，但我没有使用谓词，而是使用资格 ID 作为参数。我希望能够将其称为如下 /webservice/Employees?&filter=EQs/matches()。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:33:33.303

*我在 MSDN 上为您回答了这个问题，但我也将答案复制到这里以提高知名度。*

OData V3 协议指定了一种在元数据中声明自定义函数的方法，这些函数不仅可以用于 URI 的路径部分，还可以用于其他表达式，如 $filter。这正是您正在寻找的。[http://www.odata.org/media/30002/OData.html#functions](http://www.odata.org/media/30002/OData.html#functions)

但是，WCF 数据服务服务器目前不支持功能，因此没有简单的方法来允许您想要的功能。ASP.NET Web API 现在也不支持这个（我相信）。我不确定支持 WCF DS 或 Web API 的自定义函数的时间表，但这是我们非常希望实现的。

但是请注意，如果您的方案足够简单，则可以使用自 OData V1 以来一直存在的遗留“服务操作”。您在上面给出的确切示例可以通过以下方式在 WCF DS 中实现：

GET service\MyServiceOperationForEmployees('someStringPatternThatIWillDoSomethingFancyWith')

有关更多示例，请参阅[http://www.odata.org/media/30002/OData.html#operations](http://www.odata.org/media/30002/OData.html#operations)以及有关 WCF 数据服务上的服务操作的任何其他相关文章。这不完全是您想要的，并且从协议的角度来看已被弃用，但我建议您在准备好完整的功能支持之前尝试此操作。

# ios - iOS Storyboard 分段控件点击时跳转

> ID：14941586
> 
> 赞同：0
> 
> 时间：2013-02-18T17:08:22.467
> 
> 标签：ios, uisegmentedcontrol

我有一个带有图像视图、分段控件和文本视图的故事板。出现后，我根据设备屏幕大小进行了一些调整：

```
- (void) viewDidAppear:(BOOL)animated
{
    NSLog(@"didAp");
    CGSize mainFrameSize=_mainView.frame.size;

    [_imageSpace setFrame:CGRectMake(0, 0, mainFrameSize.width, mainFrameSize.height*4/5)];
    [_metadadataControl setFrame:CGRectMake(0, _imageSpace.frame.size.height, mainFrameSize.width, 30)];
    [_metadataTextView setFrame:CGRectMake(0, _imageSpace.frame.size.height+_metadadataControl.frame.size.height, mainFrameSize.width, mainFrameSize.height-(_imageSpace.frame.size.height+_metadadataControl.frame.size.height))];

} 
```

当应用程序启动时，一切看起来都应该如此，但是如果我单击分段控件，它会向下跳一些点。上面的方法在我单击控件之前只调用了一次，并且我没有任何其他 setFrame 方法调用。似乎它只是再次加载故事板。感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:10:30.763

rdelmar 是对的。这是一个约束与我的框架设置相矛盾的问题。之后切换到使用自动布局和约束来做所有事情。

# php - Prestashop 后台动态挂钩（事件）不起作用

> ID：14941588
> 
> 赞同：1
> 
> 时间：2013-02-18T17:08:34.127
> 
> 标签：php, events, hook, observer-pattern, prestashop

嗨，我正在 Prestashop 上为我的公司开发一个自定义模块，我需要一些帮助。我最近在 Magento 上开发了相同的插件，但在这里我遇到了一些事件问​​题（也称为**动态挂钩**）。

我正在尝试使用后端的动态挂钩来管理产品库存。尽管我在**install()**方法中注册了钩子，但我无法在我的模块上捕获 prestashop 后端事件：

```
function install() {
   if (parent::install() == false
    || !$this->registerHook('home')
    || !$this->registerHook('productFooter') 
    || !$this->registerHook('orderConfirmation') 
    || !$this->registerHook('shoppingCart')
    || !$this->registerHook('actionProductDelete')
    || !$this->registerHook('actionProductUpdate')) {
    return false;
}
//default configuration values
... 
```

并为每一个放置了特定的方法。

```
public function hookActionProductDelete($params) { ... } 
```

我正在记录双方的所有过程。在我的带有*firePHP*和*FileLoggerCore*的模块上以及 Prestashop 的核心类上，事件通过 prestashop 的*FileLoggerCore 分派*。

在 Product 类上找到的（*actionProductDelete*）之类的事件已被调度，但我无法捕获它们。

我注意到的另一点是钩子名称在 prestashop 版本之间发生变化。在最后一个版本 1.5 中，钩子比以前的要多得多。可以在 1.3 到 1.5 的版本中使用相同的钩子吗？

对不起我的英语，非常感谢提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:05:22.667

1.  检查你的模块是否挂在 actionProductDelete 钩子上的“admin > modules > Position”

2.  您可以使用旧的钩子名称来兼容 PS 1.3-1.5，查看 ps_hook_alias DB 表。对于 1.5 之前不存在的钩子，我认为您需要覆盖 1.4 和修改 1.3 的代码

# structuremap - dll初始化方法

> ID：14941593
> 
> 赞同：1
> 
> 时间：2013-02-18T17:08:53.483
> 
> 标签：structuremap

我需要的是在每个 dll 中为某些事件类型注册具体的类。

```
public interface IDomainEventHandler<T> where T : IDomainEvent
{
    void Handle(T domainEvent);
} 
```

我不想扫描事件处理程序，因为在继承的类中一次又一次地注册和执行相同的处理程序，但我希望在结构映射引导程序中调用每个 dll 中的初始化方法。

所以在每个 dll （模块）中我会包括类似的东西

```
 public void SetEntityEventHandlers()
    {
        ObjectFactory.Initialize(x =>
               {
                   x.For<IEntityBeforeUpdateEvent<Person>>()
                       .Add<PersonBizObj>();
                   x.For<IEntityBeforeUpdateEvent<Person>>()
                       .Add<EmployeeBizObj>();
//lets say I have a ManagerBizObj which inherits from EmployeeBizObj and I do not want it in the //event handler loop
         }
    } 
```

那么 StructureMap 是否有一种方便的方法来执行此操作，添加一个程序集（dll）明智的初始化函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:17:38.083

我使用 Registry 类来执行此操作。每个 dll 都有一个注册表类，用于初始化它拥有的类。StructureMap 引导程序将每个注册表添加到配置中。

[http://docs.structuremap.net/RegistryDSL.htm#section1](http://docs.structuremap.net/RegistryDSL.htm#section1)

*   A.dll 包含一个 FooRegistry 类
*   B.dll 包含一个 BarRegistry 类

这些注册表类中的每一个都有初始化它所包含的类的代码。就像是：

```
 ForRequestedType<IRepository>().TheDefaultIsConcreteType<InMemoryRepository>(); 
```

引导程序类具有以下代码：

```
ObjectFactory.Initialize(x =>
{
    x.AddRegistry<FooRegistry>();
    x.AddRegistry<BarRegistry>();
}); 
```

# java - 在eclipse中清除屏幕

> ID：14941600
> 
> 赞同：0
> 
> 时间：2013-02-18T17:09:05.560
> 
> 标签：java

你好！

我正在用 Java 做一个刽子手，用 Eclipse 运行它。我想知道是否有可能以某种方式清除屏幕（先前打印的文本），所以我的程序会有更自然的感觉，而不是在每个打印语句之后从页面顶部到底部。

PS。当我可以打印很多换行符时，我知道这种方法，但这不是我想要的。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:24:40.237

如果您在命令提示符下运行它，您可能需要使用 VT100 转义码来执行此操作。[Jansi 库](http://jansi.fusesource.org)看起来会提供此功能。看这里：

[http://jansi.fusesource.org/documentation/api/org/fusesource/jansi/Ansi.html#eraseScreen()](http://jansi.fusesource.org/documentation/api/org/fusesource/jansi/Ansi.html#eraseScreen())

请注意，我实际上并没有使用过这个库，但它看起来很有希望。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:56:16.840

我认为这个问题[在这里得到了回答，](https://stackoverflow.com/questions/2979383/java-clear-the-console)所以看看，它可能会对你有所帮助。也试着再看看[这个线程](https://stackoverflow.com/questions/7522022/how-to-delete-stuff-printed-to-console-by-system-out-println)，用户@smas 给出了一个非常好的答案。

# python - python从当前行读取文件

> ID：14941601
> 
> 赞同：0
> 
> 时间：2013-02-18T17:09:08.160
> 
> 标签：python, file-read

我有一个关于使用 python 处理跟踪文件的问题（它包含十亿行数据）。

我想要做的是，程序会在文件中找到一个特定的行（比如说它是 line#x），它需要从文件中的这个（line#x）中找到另一个符号。找到该行后，再次从 (line# x) 开始搜索另一行。

我现在所做的如下，但问题是它总是需要重新打开文件并从头开始读取以找到匹配的文件（行＃> x，并包含我想要的符号）。对于一个大的跟踪文件，处理时间太长。

1.

```
 for line in file.readlines()
      i++ #update the line number
      if i > x:
          if (line.find()): 
```

或者：

```
 for i, line in enumerate(open(file)):
      if i > x:
          if .... 
```

任何人都可以给我一个关于更好想法的提示吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:13:23.823

如果文件在其他方面稳定，请使用[`fileobj.tell()`](http://docs.python.org/2/library/stdtypes.html#file.seek)记住您在文件中的位置，然后下次使用[`fileobj.seek(pos)`](http://docs.python.org/2/library/stdtypes.html#file.seek)返回到文件中的相同位置。

这仅在您*不*将文件对象用作迭代器（否`for line in fileobject)`或`next(fileobject)`）时才有效，因为它使用会掩盖确切位置的预读缓冲区。

相反，使用：

```
for line in iter(fileobj.readline, ''): 
```

仍然`fileobj`在迭代上下文中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:21:41.000

我建议您使用随机访问，并记录您的线路开始的位置。就像是：

```
index = []

fh = open(gash.txt)

for line in fh:
    if target in line:
        index.append(fh.tell() - len(line)) 
```

然后，当您想调用内容时，使用`fh.seek(index[n])`。

几个“陷阱”：

1.  请注意，索引位置不会与行号相同。如果您需要行号，则可以使用字典，以行号作为键。

2.  在 Windows 上，您必须将文件位置调整为 -1。这是因为 "\r" 被去掉了，没有出现在`len(line)`.

# jquery - 为什么某些 Ajax 调用在 firebug 的控制台选项卡中不可见？

> ID：14941602
> 
> 赞同：7
> 
> 时间：2013-02-18T17:09:16.397
> 
> 标签：jquery, ajax, firebug

我工作的最后一个应用程序，我能够在“firebug”的控制台选项卡中看到 Ajax 调用，并清楚地看到请求和响应并进行一些调试。

我正在开发的这个新应用程序大量使用了 Ajax；但是，调用不会显示在控制台选项卡中。我的 Ajax 数据类型是 JSON。

这与应用程序有关吗？在使用 Ajax 时，您建议使用什么进行调试。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T18:52:00.837

JSONP 请求仅在 NET 选项卡下可见。

# jsp - tomcat 和 .class 文件

> ID：14941608
> 
> 赞同：0
> 
> 时间：2013-02-18T17:09:27.727
> 
> 标签：jsp, jakarta-ee, tomcat

从 .jsp 文件转换而来的 .class 文件在哪里？

我有包含 .jsp 文件的 .war 文件，但我不希望将这些文件提供给我的客户。

我不想提供 .jsp 文件（因为它有源代码），而只是提供 .class 文件，以便网站可以运行，但不可修改。

我有什么选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:19:31.893

您需要**JSP 预编译**。在构建期间，某些工具 ( `jspc`) 会在首次加载 JSP 时执行通常 Tomcat 按需执行的操作 - 将它们编译成 servlet 并生成适当的`web.xml`片段。

当您为所有 JSP 文件生成 servlet 时，删除它们是安全的。避免将生成的 servlet 检入到 VCS 是一个好主意。

请参阅[*Maven 2 的 JSP 编译支持*](http://mojo.codehaus.org/jspc/jspc-maven-plugin/usage.html)和[如何使 Tomcat 在启动时预编译 JSP？](https://stackoverflow.com/questions/497830).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:23:00.700

您的问题已在此处得到解答：[“编译的 JSP Java (*_jsp.java) 文件在哪里？”](https://stackoverflow.com/questions/6833711/where-are-compiled-jsp-java-jsp-java-files) .

> 编译后的 JSP 文件默认位于 Tomcat 环境的 /work 文件夹中。

或者，如果您使用 Eclipse IDE 并在工作区中发布应用程序，这是默认行为，您可能会在以下路径中找到工作目录：

> workspace.metadata.plugins\org.eclipse.wst.server.core\tmp0\work\Catalina\localhost\HelloWorld\org\apache\jsp\test_jsp.class

[但是，如果您想要所有已编译的 JSP (*_jsp.class) 文件，您有以下选项： 按照文档](http://tomcat.apache.org/tomcat-6.0-doc/jasper-howto.html#Web%20Application%20Compilation)中的说明将 Tomcat jspc 工具与 ant 一起使用；使用[wget](http://www.gnu.org/software/wget/)通过发出如下命令从 tomcat 服务器递归请求所有 *.jsp 页面，或者使用 IDE 的预编译 JSP 页面选项让 IDE 为您完成这项工作。

```
wget -r --no-parent -A.jsp http://domain/your-project/ 
```

这样它现在应该都被tomcat缓存了。

# snmp - 向 Nagios 中的特定主机发送 SNMP 陷阱

> ID：14941612
> 
> 赞同：0
> 
> 时间：2013-02-18T17:09:34.133
> 
> 标签：snmp, nagios, net-snmp

我有两个主机的 nagios。一个是 localhost(10.10.62.5)，另一个是 ubuntu(10.10.62.10)。我在本地主机上设置了 nagios 监视器。

主机配置文件如下

本地主机.cfg：

```
define host{
    use                     linux-server           
    host_name               localhost
    alias                   localhost
    address                 10.10.62.5
    }

define service{ 
host_name       localhost   
service_description WSN_COUNT   
is_volatile     1   
check_command       check-host-alive    
max_check_attempts  1
normal_check_interval   1
retry_check_interval    1
active_checks_enabled   0   
passive_checks_enabled  1   
check_period        24x7    
notification_interval   31536000    
notification_period 24x7    
notification_options    w,u,c   
notifications_enabled   1
 } 
```

ubuntu.cfg：

```
define host{
  use    linux-server
  host_name ubuntu
  alias  ubuntu
  address    10.10.62.10
}
define service{ 
host_name    localhost  
service_description WSN_COUNT   
is_volatile  1  
check_command    check-host-alive   
max_check_attempts  1
normal_check_interval   1
retry_check_interval    1
active_checks_enabled   0   
passive_checks_enabled  1   
check_period     24x7   
notification_interval   31536000    
notification_period 24x7    
notification_options    w,u,c   
notifications_enabled   1
} 
```

MIB文件：

```
NAGIOS-TRAP-TEST-MIB DEFINITIONS ::= BEGIN
IMPORTS enterprises FROM SNMPv2-SMI;

nagiostests OBJECT IDENTIFIER ::= { enterprises 0 }
nagiostraps OBJECT IDENTIFIER ::= { nagiostests 1 }
nagiosnotifs OBJECT IDENTIFIER ::= { nagiostests 2 }

WSNcount NOTIFICATION-TYPE
        OBJECTS { sysLocation }
        STATUS current
        DESCRIPTION "SNMPv2c notification"
        ::= { nagiosnotifs 9 }
END 
```

我使用 snmptt(net-snmp) 将陷阱与 nagios 集成。配置文件是

snmptt.conf.local：

```
 EVENT WSNcount .1.3.6.1.4.1.0.2.1 "Status Events" Normal
FORMAT SNMPv2c notification $*
EXEC /usr/local/nagios/libexec/eventhandlers/submit_check_result localhost WSN_COUNT 1 "SNMPv2c notification $*"
SDESC
SNMPv2c notification
Variables:
  1: sysLocation
EDESC 
```

snmptt.conf.local：

```
 EVENT WSNcount .1.3.6.1.4.1.0.2.1 "Status Events" Normal
FORMAT SNMPv2c notification $*
EXEC /usr/local/nagios/libexec/eventhandlers/submit_check_result ubuntu WSN_COUNT 1 "SNMPv2c notification $*"
SDESC
SNMPv2c notification
Variables:
   1: sysLocation
EDESC 
```

当我使用以下命令从 ubuntu(10.10.62.10) 机器发送陷阱时，陷阱发送到 nagios 中的两个主机。

```
 snmptrap -v 2c -c private 10.10.62.5 "" NAGIOS-TRAP-TEST-MIB::RFIDcount SNMPv2-MIB::sysLocation.0 s "snmptest trap" 
```

请帮助我将陷阱发送到特定主机..怎么可能...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T12:31:31.627

我认为您误解了 SNMP 陷阱是什么。SNMP 陷阱是从网络设备（例如路由器、交换机、刀片、集群等）发送到您的监控系统/服务的 SNMP 消息。

我猜您想要做的事情是在 MIB 文件中搜索您要监控的特定网络设备，并搜索与您希望从该特定设备收集的信息相匹配的 OID。

您要通过 SNMP 监控的设备必须在其配置中启用 SNMP（基于 Web 或其他东西..）。

您可以对此设备执行 SNMPwalk 以查看所有可用的 OID：

```
snmpwalk -v 2c -c public <ip address network device> 
```

-c 代表“社区”，默认为“公共”，您可以在网络设备的配置中对其进行编辑。

-v 代表您要使用的 SNMP 版本。

当您找到为您提供设备信息的 OID 时，您可以执行以下命令（或将其放入 perl 或 bash 脚本）：

```
snmpwalk -v 2c -c public <ip address network device> <OID> 
```

当你制作这个脚本时，你可以在 commands.cfg 中为这个脚本定义一个命令：

```
#'check_lefthand' command definition
define command{        
    command_name    check_lefthand  
    command_line    $USER1$/lefthands.pl $ARG1$ $ARG2$
    } 
```

您现在可以在 Nagios 的服务定义中使用此 check_。

# javascript - 如何在 javascript 中将 ISOString 转换为本地 ISOString？

> ID：14941615
> 
> 赞同：0
> 
> 时间：2013-02-18T17:10:00.193
> 
> 标签：javascript

如何在 javascript 中将 ISOString 转换为本地 ISOString？

我有[ISO 8086](http://en.wikipedia.org/wiki/ISO_8601)样式字符串（例如 '2013-02-18T16:39:17+00:00'）

我想将其转换为本地 ISO_8601 样式字符串...

```
'2013-02-18T16:39:17+00:00' -> '2013-02-19T01:39:17+09:00' 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:38:09.337

只有一种[`.toISOString()`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toISOString)，但不会使用本地时区。为此，您需要自己格式化字符串：

```
function toLocaleISOString(date) {
    function pad(n) { return ("0"+n).substr(-2); }

    var day = [date.getFullYear(), pad(date.getMonth()+1), pad(date.getDate())].join("-"),
        time = [date.getHours(), date.getMinutes(), date.getSeconds()].map(pad).join(":");
    if (date.getMilliseconds())
        time += "."+date.getMilliseconds();
    var o = date.getTimezoneOffset(),
        h = Math.floor(Math.abs(o)/60),
        m = Math.abs(o) % 60,
        o = o==0 ? "Z" : (o<0 ? "+" : "-") + pad(h) + ":" + pad(m);
    return day+"T"+time+o;
} 
```

# android - 正确处理异常：“getParameters failed (empty parameters)”

> ID：14941625
> 
> 赞同：44
> 
> 时间：2013-02-18T17:10:28.440
> 
> 标签：android, android-camera

我在 Google Play 商店中有一个安装了 Google Analytics 的相机应用程序。我不断收到以下崩溃报告：

> getParameters 失败（空参数）

我的问题是：**处理这个问题的正确方法是什么？**

调查它发生的位置的 Android 源并没有给我任何额外的细节。android_hardware_Camera.cpp 中抛出错误：

```
String8 params8 = camera->getParameters();
if (params8.isEmpty()) {
    jniThrowRuntimeException(env, "getParameters failed (empty parameters)");
    return 0;
} 
```

研究开源 Android 相机以了解它如何处理这种情况也不是很有帮助。调用 getParameters 时，该代码似乎没有捕获 RuntimeException。（除非他们抓住它，关闭相机，然后重新扔掉它）。

**有没有正确的方法来处理这个？**

**如果没有，是否有原因经常发生这种情况？**

注意：在任何一天，我都有 5k 到 8k 活跃用户。其中有 40-70 个例外。这对我来说似乎*真的*很高。我知道在某些情况下相机可能无法初始化。但是1%的用户似乎不合理。此外，由于 Android 相机应用程序不处理异常，这真的让我想知道是否还有其他根本原因。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-02-25T08:44:43.017

就我而言，我收到了这个错误：

> getParameters 失败（空参数）

当我`getParameters()`解锁相机后打电话时。所以，请在打电话`getParameters()`之前先打电话`camera.unlock()`。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-04-20T17:51:15.257

正如 +Eddy Talvala 所说，当**相机处于不良状态**时会发生这种情况。

**相机如何进入不良状态？**

1) 最常见的原因可能是关闭/释放相机，但之后仍在使用它。如果您`Camera`在多个线程上使用对象而不同步访问`Camera`. 确保您一次只有一个线程访问`Camera`。

2）就我而言，这有点棘手。我使用 a`SurfaceTexture`以便可以将相机输出用作 OpenGL 纹理。在 Android 4.0 (ICS) 中，有一个新方法`SurfaceTexture.release()`。在使用`SurfaceTexture`s 时使用此方法很重要，因为它比以前更快地清理内存。

问题是我`SurfaceTexture.release()`在相机预览仍处于活动状态时打电话。这使服务崩溃`Camera`，这导致了问题中解释的问题。

在我的情况下，我通过延迟调用来修复它，`SurfaceTexture.release()`直到我用新的`SurfaceTexture`. 这样我就可以确定`SurfaceTexture`可以清理没有任何不良副作用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T19:39:37.983

是否有特定的 Android 设备遇到此错误？或者您是否在许多设备上看到它。

通常，您不应该看到这种错误。您的应用程序可能存在某种导致这种情况的竞争条件，但它必须涉及尝试在未初始化或已发布的相机上调用 getParameters。

它也可能是特定于设备的相机代码中的错误，或者是相机代码堆栈中某处的罕见竞争条件。如果没有更多详细信息（来自此类崩溃的 logcat 或 Android 错误报告），则无法判断 - 错误本身只是表示特定于设备的相机代码返回了一组空参数。

但是一旦你得到这个错误，你就无能为力了——相机子系统处于某种奇怪的状态。如果您想尝试处理它，我只能建议关闭并重新打开相机设备。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-08T13:31:05.813

默认情况下，相机对象始终处于锁定状态，因此当您可以解锁方法时，您允许其他进程使用您的参数，因此请确保在获取参数之前重新锁定相机

# android - 如何在 Android 应用程序中添加类似滚动的功能

> ID：14941628
> 
> 赞同：0
> 
> 时间：2013-02-18T17:10:30.670
> 
> 标签：android, scroll

我需要知道如何以某种方式“扩展”屏幕。我会解释的。基本上，在我的 android 应用程序中，主要设置应该看起来像一个应用程序抽屉。我的应用程序仅是纵向的，并且将是 4x7（对于每个图标/按钮）。当您单击按钮时，请说“主题”。它将打开一个新课程并显示主题。但是有很多主题可以放在屏幕上。我需要它，以便他们可以简单地向下滚动并查看更多主题，然后让他们根据需要向上滚动。我将如何添加该滚动选项，然后如何添加那些需要滚动才能看到的按钮（我的意思是在 xml 中我可以组织按钮，但如果我添加更多，它们就会离开屏幕。那些屏幕外的那些将是您必须向下滚动才能看到的那些。有没有特殊的方法来添加这些按钮？）对不起，如果我听起来像个白痴。我只有 15 岁，而且还在学习。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:19:05.483

使用 ScrollView，只需在 ScrollView 中添加您的布局。

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>

    <!-- your layout -->

</ScrollView> 
```

# sql - 从不同的结果中选择后获取身份

> ID：14941629
> 
> 赞同：0
> 
> 时间：2013-02-18T17:10:32.987
> 
> 标签：sql, sql-server, tsql

## 我有 2 个表（ Model_Table ， Items_Table）

```
Model_Tabl ( ID, ModelName, ModelQuantity)
Items_Tabl ( I_Code, IName, ID) 
```

将新行插入 (Model_Table) 后 - 触发器将多行插入 (Items_Table) 取决于 (Model_Table) 中的 ModelQuantity ，直到现在它工作正常

我创建`"select distinct ModelName , Sum(ModelQuantity) group by ModelName"` 了，结果很好

**我的问题是**：

当我从（DISTINCT）查询中选择模型名称时，我想知道我从（Model_Table）中选择了哪个（ID）

Model_ID (TO) Model_Name = 1 (TO) 很多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:13:25.337

首先，你不需要`DISTINCT`那里，所以你可以摆脱它。然后，你可以试试这个：

```
SELECT ID, ModelName, SUM(ModelQuantity) Quantity
FROM Model_Tabl 
GROUP BY ID, ModelName 
```

好的，正如我在评论中解释的那样，如果您有多个具有相同名称的 ID，则需要选择一个，最大或最小 ID（最终只选择一个仍然没有意义ID 当您实际需要识别该 ID 时），但是，这里是：

```
SELECT MIN(ID) ID, ModelName, SUM(ModelQuantity) Quantity
FROM Model_Tabl 
GROUP BY ModelName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:15:07.240

做就是了：

```
select ID, ModelName , Sum(ModelQuantity) group by ID, ModelName 
```

只要 ID 和 ModelName 是一对一的，你就很好。

（顺便说一句，您的“独特”在这里是多余的-`Select distinct a,b,c from tbl`只是 的简写`Select a,b,c from tbl group by a,b,c`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T18:06:24.553

您在 model_table 中有一个标识列，但您似乎没有在检查 ModelQuantity 字段的查询中使用它。你不想做这样的事情吗？

```
select ModelQuantity
from Model_table
where id = @@identity 
```

?

# php - 需要编写创建 XML 文件的 PHP，以及读取该文件的 PHP。哪些库/函数？

> ID：14941637
> 
> 赞同：-2
> 
> 时间：2013-02-18T17:10:57.050
> 
> 标签：php, xml

我需要编写 PHP 来将用户数据从一个安装的 WordPress 导出/导入到另一个安装。我想使用 XML。但是，我不确定哪些库/函数最适合使用。有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:12:42.337

[SimpleXMLElement](http://php.net/manual/en/class.simplexmlelement.php)开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:53:22.113

SimpleXML 适用于阅读 XML。我要使用 DOM。

# ruby-on-rails-3 - Rails：多对一（0-n），查找记录

> ID：14941640
> 
> 赞同：0
> 
> 时间：2013-02-18T17:11:02.573
> 
> 标签：ruby-on-rails-3

我有桌子`items`和`cards`卡片属于 a 的地方`user`，而 a`item`可能有也可能没有给定用户的任何卡片。

基本关联设置如下：

```
Class User
   has_many :cards

Class Item
   has_many :cards

Class Card
   belongs_to :user
   has_and_belongs_to_many :items 
```

我还创建了一个连接表，`items_cards`其中包含列`item_id`和`card_id`. 我想做一个查询，告诉我给定的用户/项目是否有卡片。在纯 SQL 中，我可以很容易地做到这一点：

```
SELECT   count(id) 
FROM     cards 
JOIN     items_cards
ON       items_cards.card_id = cards.id
WHERE    cards.user_id = ?
AND      items_cards.item_id = ? 
```

我正在寻找一些关于如何通过 ActiveRecord 执行此操作的指导。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:30:04.660

假设您有一个 Item in`@item`和一个 User in `@user`，如果该用户和该项目存在一张卡片，这将返回“true”：

```
Card.joins(:items).where('cards.user_id = :user_id and items.id = :item_id', :user_id => @user, :item_id => @item).exists? 
```

这是发生了什么：

`Card.`- 您正在查询 Card 模型。

`joins(:items)`- Rails 知道如何为它支持的关联类型组合连接（通常 - 至少）。你告诉它做任何需要允许你查询关联的连接`items`。在这种情况下，这将导致`JOIN items_cards ON items_cards.card_id = cards.id JOIN items ON items_cards.item_id = items.id`.

`where('cards.user_id = :user_id and items.id = :item_id', :user_id => @user, :item_id => @item)`- 您的条件，与纯 SQL 中的几乎相同。`:user_id`Rails 将使用散列 ( ) 中的值插入带有冒号 ( ) 的值`:user_id => @user`。如果您将 ActiveRecord 对象作为值，Rails 将自动使用该对象的 id。在这里，您说您只想要卡片属于您指定的用户的结果，并且您想要的项目有一行。

`.exists?`- 加载 ActiveRecord 对象是低效的，所以如果你只想知道某些东西是否存在，Rails 可以节省一些时间并使用`count`基于查询（很像你的 SQL 版本）。还有一个`.count`，如果您想让查询返回结果的数量，而不是`true`or ，您可以使用它`false`。

# java - Android Java 中的睡眠（）

> ID：14941643
> 
> 赞同：28
> 
> 时间：2013-02-18T17:11:16.427
> 
> 标签：java, android, multithreading, sleep

我正在按照[本教程](http://androidcookbook.com/Recipe.seam;jsessionid=4DBCC1688B51DB16A2A40A86E135D361?recipeId=1599)在我的程序中有一个加载屏幕。该教程说我的活动应该使用 Sleep() 命令进行 Sleep()，但是它不将 Sleep() 识别为一个函数并给我一个错误，询问我是否要创建一个名为 Sleep() 的方法。

这是代码示例：

```
public class LoadingScreenActivity extends Activity {

    //Introduce an delay
    private final int WAIT_TIME = 2500;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        System.out.println("LoadingScreenActivity screen started");

        setContentView(R.layout.loading_screen);
        findViewById(R.id.mainSpinner1).setVisibility(View.VISIBLE);

        new Handler().postDelayed(new Runnable(){ 

            @Override 
            public void run() {

                //Simulating a long running task
                this.Sleep(1000);
                System.out.println("Going to Profile Data");

                /* Create an Intent that will start the ProfileData-Activity. */
                Intent mainIntent = new Intent(LoadingScreenActivity.this,ProfileData.class); 
                LoadingScreenActivity.this.startActivity(mainIntent);
                LoadingScreenActivity.this.finish(); 
            } 
        }, WAIT_TIME);
    }
} 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-18T17:32:18.543

您可以使用以下方法之一：

```
Thread.sleep(timeInMills); 
```

或者

```
SystemClock.sleep(timeInMills); 
```

`SystemClock.sleep(milliseconds)`是一个与 非常相似的效用函数`Thread.sleep(milliseconds)`，但它忽略了`InterruptedException`。如果不使用，请使用此函数进行延迟`Thread.interrupt()`，因为它将保留线程的中断状态。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-18T17:14:20.210

功能是[`Thread.sleep(long)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#sleep%28long%29)。

但是请注意，您不应在 UI 线程上执行休眠。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-18T17:46:52.533

您发布的代码很糟糕。请不要在实际设备上使用它。如果您运行与此类似的操作，您将收到“应用程序无响应”错误。

如果您使用的是处理程序，请记住处理程序是*在它运行的线程上*创建的。所以在UI线程上调用`new Handler().post(...`会在UI线程上执行runnable，包括这个“长时间运行的操作”。优点是您可以为以后使用的 UI 线程创建一个处理程序，如下所示。

要将长时间运行的操作放到后台线程中，需要围绕runnable创建一个Thread，如下所示。现在，如果您想在长时间运行的操作完成后更新 UI，您需要使用 Handler 将其发布到 UI 线程。

请注意，此功能非常适合`AsyncTask`使这看起来比下面的模式更干净。但是，我将其包含在内是为了展示 Handlers、Threads 和 Runnables 之间的关系。

```
public class LoadingScreenActivity extends Activity {

//Introduce a delay
    private final int WAIT_TIME = 2500;
    private Handler uiHandler;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        uiHandler = new Handler(); // anything posted to this handler will run on the UI Thread
        System.out.println("LoadingScreenActivity  screen started");
        setContentView(R.layout.loading_screen);
        findViewById(R.id.mainSpinner1).setVisibility(View.VISIBLE);

        Runnable onUi = new Runnable() {
            @Override 
            public void run() {
                // this will run on the main UI thread 
                Intent mainIntent = new Intent(LoadingScreenActivity.this,ProfileData.class); 
                LoadingScreenActivity.this.startActivity(mainIntent); 
                LoadingScreenActivity.this.finish(); 
            }
        }; 

        Runnable background = new Runnable() { 
            @Override 
            public void run() { 
                // This is the delay
                Thread.Sleep( WAIT_TIME );
                // This will run on a background thread
                //Simulating a long running task
                Thread.Sleep(1000);
                System.out.println("Going to Profile Data");
                uiHandler.post( onUi );
            }
        };

        new Thread( background ).start(); 
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-17T11:39:00.207

使用 Thread.sleep(1000);

1000 是程序将暂停的毫秒数。

```
try        
{
    Thread.sleep(1000);
} 
catch(InterruptedException ex) 
{
    Thread.currentThread().interrupt();
} 
```

请记住：不建议使用此代码，因为它会延迟时间但无法控制，可能需要更多或更少的时间。

# php - 覆盖 CakePHP 日志的写入函数

> ID：14941645
> 
> 赞同：0
> 
> 时间：2013-02-18T17:11:26.233
> 
> 标签：php, apache, cakephp

我正在尝试**将 CakePHP 日志保存在数据库中**（表：日志），但是当我尝试时返回错误：

```
Could not load class Databaselogger
Error: An Internal Error Has Occurred.

Stack Trace
CORE\Cake\Log\LogEngineCollection.php line 42 → LogEngineCollection::_getLogger(string)
CORE\Cake\Log\CakeLog.php line 199 → LogEngineCollection->load(string, array)
APP\Config\bootstrap.php line 31 → CakeLog::config(string, array)
CORE\Cake\Core\Configure.php line 93 → include(string)
CORE\Cake\bootstrap.php line 164 → Configure::bootstrap(boolean)
APP\webroot\index.php line 91 → include(string) 
```

* * *

# 细节

**CakePHP：** 2.3
**阿帕奇：** 2.2
**PHP：** 5.3.9
**MySQL：** 5.1

## 文件

**引导程序.php**

```
CakeLog::config('otherFile', array(
    'engine' => 'Databaselogger'
)); 
```

**用户控制器.php**

```
CakeLog::write('info', $this->alias, null, print_r($this->request->data, true)); 
```

**app/Log/Databaselogger.php**
*我也在 app/Lib/ 中尝试过，app/Lib/log 也尝试过，*但不起作用。

```
<?php
class Databaselogger extends CakeLog {

    function __construct() {
        App::import('Model', 'Log');
        $this->Log = new Log;
    }

    function write($type, $message, $query, $debug) {
        $this->Log->create();

        $log['type'] = ucfirst($type);
        $log['message'] = $message;
        $log['query'] = $query;
        $log['debug'] = $debug;
        $log['created'] = date('Y-m-d H:i:s');
        $log['modified'] = date('Y-m-d H:i:s');

        return $this->Log->save($log);
    }

}
?> 
```

* * *

**[编辑]**
我更改了`DatabaseLogger.php`文件的位置，并添加了 2 行重要的行：

```
 // app/Lib/Log/Engine/DatabaseLogger.php

    App::uses('CakeLogInterface', 'Log');
    class DatabaseLogger implements CakeLogInterface { 
```

现在，“工作”，但不像我预期的那样，因为我在 write function: 中需要更多 2 个值`query, debug`，但不允许。我该怎么做？

```
 function write($type, $message, $query, $debug) { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:14:20.477

我目前正在这样做：

*   连接所有变量并在 $message 参数中发送。
*   后来，我将其分解并使用这些值

但我认为这是错误的。

我真正需要的是：“自定义写入功能”，或者：**“如何创建自定义日志”**。

总之感谢。

# google-api - 使用 V3 API 从 VB.NET 上传 YouTube

> ID：14941646
> 
> 赞同：0
> 
> 时间：2013-02-18T17:11:26.070
> 
> 标签：google-api, youtube.net-api, google-api-dotnet-client

任何熟悉 V3 YouTube API 的人都建议我可能做错了什么：

```
 Dim Service As YoutubeService = GetYouTubeService()

    Dim SourceVideo As String = "C:\TempMedia\Wildlife.wmv"

    Dim Meta As New Video
    Meta.Snippet = New VideoSnippet
    Meta.Snippet.Title = "Test Wildlife Video"
    Meta.Snippet.Description = "This is a test video only"
    Meta.Snippet.CategoryId = "Animals"
    Meta.Snippet.Tags = New List(Of String)
    Meta.Snippet.Tags.Add("Test")
    Meta.Status = New VideoStatus
    Meta.Status.PrivacyStatus = "unlisted"

    Using fs As New FileStream(SourceVideo, FileMode.Open, FileAccess.Read, FileShare.Inheritable)
        Dim UploadRequest As VideosResource.InsertMediaUpload = Service.Videos.Insert(Meta, "snippet,statistics,status", fs, "application/octet-stream")
        UploadRequest.Upload()
        Dim Uploaded = UploadRequest.ResponseBody
    End Using 
```

经过一番思考，这是在 SendChunk 中抛出 500 Internal Server Error

```
System.Net.WebException was unhandled   HResult=-2146233079   Message=The remote server returned an error: (500) Internal Server Error.   Source=System   StackTrace:
       at System.Net.HttpWebRequest.GetResponse()
       at Google.Apis.Upload.ResumableUpload`1.SendChunk(Stream stream, Uri uri, Int64 position) in c:\code.google.com\google-api-dotnet-client\default\Tools\BuildRelease\bin\Debug\12-20-2012\default\Src\GoogleApis\Apis\Upload\ResumableUpload.cs:line 452
       at Google.Apis.Upload.ResumableUpload`1.Upload() in c:\code.google.com\google-api-dotnet-client\default\Tools\BuildRelease\bin\Debug\12-20-2012\default\Src\GoogleApis\Apis\Upload\ResumableUpload.cs:line 315
       at QUICTools.Workflow.Social.YouTube.QuicYouTube.TestUpload() in C:\Users\kenny.munro.ZAZA\Documents\Visual Studio 2010\Projects\QUIC_V2.0\QUICTools.Workflow.Social.YouTube\QuicYouTube.vb:line 37
       at QLTest.Form1.SimpleButton1_Click(Object sender, EventArgs e) in C:\Users\kenny.munro.ZAZA\Documents\Visual Studio 2010\Projects\QUIC_V2.0\QLTest\Form1.vb:line 4
       at System.Windows.Forms.Control.OnClick(EventArgs e)
       at DevExpress.XtraEditors.BaseButton.OnClick(EventArgs e)
       at DevExpress.XtraEditors.BaseButton.OnKeyUp(KeyEventArgs e)
       at System.Windows.Forms.Control.ProcessKeyEventArgs(Message& m)
       at System.Windows.Forms.Control.ProcessKeyMessage(Message& m)
       at System.Windows.Forms.Control.WmKeyChar(Message& m)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at DevExpress.Utils.Controls.ControlBase.WndProc(Message& m)
       at DevExpress.XtraEditors.BaseControl.WndProc(Message& msg)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.Run(ApplicationContext context)
       at Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.OnRun()
       at Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.DoApplicationModel()
       at Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.Run(String[] commandLine)
       at QLTest.My.MyApplication.Main(String[] Args) in 17d14f5c-a337-4978-8281-53493378c1071.vb:line 81
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()   InnerException: 
```

我不得不承认我现在很难过。有没有人有使用 V3 dotnet API 上传到 YouTube 的工作示例或可能出错的建议？

**更新**

我一直在使用 Fiddler 对此进行更多分析。首先，我设置添加了一行来设置 chunkSize = 10000。我现在可以看到上传的块负载很好并返回 308 响应代码。最后的部分块返回错误：

```
PUT /upload/youtube/v3/videos?uploadType=resumable&alt=json&part=snippet%2Cstatus&upload_id=AEnB2UqVVIYV1YyYk27JhhFj_U2WzbK0_ghq0QIRsO1dB1caaMrazd-wlULFZVxvM_pHDZFJkVmUJbYw4oVicI2rfJujdXy4ZQ HTTP/1.1
Content-Range: bytes 26250000-26255829/26255830
Host: www.googleapis.com
Content-Length: 5830

500 Internal Server Error (application/json) 
```

不太确定这可能是我做错了什么，但会感谢有此工作的人的一些输入/验证。

为了完整起见，这是最初的插入命令——再一次，对我来说一切都很好：

```
POST /upload/youtube/v3/videos?uploadType=resumable&alt=json&part=snippet%2Cstatus HTTP/1.1
X-Upload-Content-Type: video/x-ms-wmv
X-Upload-Content-Length: 26255830
Authorization: Bearer ya29.AHES6ZTQsUz4SI-jOnCO8kL3hg_L...
Content-Type: application/json
Host: www.googleapis.com
Content-Length: 168
Connection: Keep-Alive

{"snippet":{"categoryId":"Entertainment","description":"This is a test video only","tags":["Test"],"title":"Test Wildlife Video"},"status":{"privacyStatus":"unlisted"}}
HTTP/1.1 200 OK
Server: HTTP Upload Server Built on Feb 6 2013 15:53:54 (1360194834)
Location: https://www.googleapis.com/upload/youtube/v3/videos?uploadType=resumable&alt=json&part=snippet%2Cstatus&upload_id=AEnB2UqVVIYV1YyYk27JhhFj_U2WzbK0_ghq0QIRsO1dB1caaMrazd-wlULFZVxvM_pHDZFJkVmUJbYw4oVicI2rfJujdXy4ZQ
Date: Tue, 19 Feb 2013 13:58:18 GMT
Pragma: no-cache
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Cache-Control: no-cache, no-store, must-revalidate
Content-Length: 0
Content-Type: text/html; charset=UTF-8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-20T15:24:31.040

CategoryId 是一个数字。您可以使用此示例下载所有有效类别的 ID（编号）和标题列表。此示例将 ID 和 Title 放入自定义类对象中，并将每个类对象作为项目添加到 ComboBox 控件中。

```
 OAUth2Credential = Nothing
    Try
        GetGredentials.Wait()
        objYouTubeService = New YouTubeService(New BaseClientService.Initializer() With { _
             .HttpClientInitializer = OAUth2Credential, _
             .ApplicationName = Assembly.GetExecutingAssembly().GetName().Name})
    Catch ex As Exception
        MsgBox(ex.Message)
        End
    End Try
    Dim objCategories As VideoCategoryListResponse = Nothing
    Try
        Dim objRequest As VideoCategoriesResource.ListRequest = New VideoCategoriesResource.ListRequest(objYouTubeService, "id,snippet")
        objRequest.Hl = "en_US"
        objRequest.RegionCode = "US"
        objCategories = objRequest.Execute
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try
    cmbCategory.DisplayMember = "Title"
    cmbCategory.ValueMember = "Id"
    For Each obj As VideoCategory In objCategories.Items
        cmbCategory.Items.Add(New CategoryClass(obj.Id, obj.Snippet.Title))
        If obj.Snippet.Title.Contains("News") Then
            intDefaultCategoryIndex = cmbCategory.Items.Count - 1
        End If
    Next
    cmbCategory.SelectedIndex = intDefaultCategoryIndex
    ... 
```

下面是我如何填写 OAuth2Credential。

```
Private Async Function GetGredentials() As Task
     Try
         '
         ' ClientId and ClientSecret are found in your client_secret_*****.apps.googleusercontent.com.json file downloaded from 
         ' the Google Developers Console ( https://console.developers.google.com). 
         ' This sample shows the ClientID and ClientSecret in the source code. 
         ' Other samples in the sample library show how to read the Client Secrets from the              ' client_secret_*****.apps.googleusercontent.com.json file. 
         '
         OAUth2Credential = Await GoogleWebAuthorizationBroker.AuthorizeAsync( _
             New ClientSecrets With {.ClientId = "Your Client ID goes here ..............................................", _
                                     .ClientSecret = "Your Client Secret goes here."}, _
                                 {YouTubeService.Scope.Youtube}, "user", CancellationToken.None)
         If OAUth2Credential IsNot Nothing Then
             If OAUth2Credential.Token IsNot Nothing Then
                 AddToLog(String.Concat("Token Issued: ", OAUth2Credential.Token.Issued))
             End If
         End If
     Catch ex As Exception
         MsgBox(ex.Message, MsgBoxStyle.Critical, "Google Authorization")
         End
     End Try
 End Function 
```

这是我的自定义类的样子：

```
Friend Class CategoryClass
Dim m_Id As String
Dim m_Title As String
Sub New(ByVal Id As String, ByVal Title As String)
     m_Id = Id
     m_Title = Title
End Sub
Property ID As String
      Get
         ID = m_Id
     End Get
     Set(value As String)
         m_Id = value
     End Set
End Property
Property Title As String
     Get
         Title = m_Title
     End Get
     Set(value As String)
         m_Title = value
     End Set
End Property
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:20:07.113

既然您是按块上传的，为什么不捕获进度和 responsereceived 事件，这样您就可以获得有关正在发生的事情的更多信息。以下是您的操作方法：

```
UploadRequest.ChunkSize = 10000;
UploadRequest.ProgressChanged += UploadRequest_ProgressChanged;
UploadRequest.ResponseReceived += UploadRequest_ResponseReceived;

Sub UploadRequest_ProgressChanged(obj As Google.Apis.Upload.IUploadProgress)
    ' check if the upload has been completed            
    If obj.Status = Google.Apis.Upload.UploadStatus.Completed Then
        ' do something here
    End If

    ' or check the status and handle it appropriately
    ' see "Google.Apis.Upload.UploadStatus" for possible status returned

    ' or check the details of the exception here
    If obj.Exception IsNot Nothing Then
        Console.WriteLine(obj.Exception.Message)
    End If
End Sub

Sub UploadRequest_ResponseReceived(Google.Apis.Youtube.v3.Data.Video obj)
    ' your video object will be available here once the upload is done

End Sub 
```

*注意：我是用 C# 编写的，并使用一个站点将其转换为 VB，因此可能存在一些语法错误，我相信您知道如何修复它。*

# windows-phone-7 - 绑定到子对象

> ID：14941650
> 
> 赞同：0
> 
> 时间：2013-02-18T17:11:39.483
> 
> 标签：windows-phone-7, xaml, data-binding, nested

我有以下代码（wp7-silverlight）。我尝试将滑块绑定到这两个控件的角度属性，但由于某种原因，内部控件似乎没有接收数据，只有父控件。当我将它们并排放置（不嵌套）时，它们可以正常工作。知道为什么只有外部控件可以从滑块中获取数据吗？

```
 <rotate:RotatableUserControl Width="400"
                                         Height="400"
                                         x:Name="RotatableUserControl"
                                         Angle="{Binding ElementName=SliderObject, Path=Value}">

                <Canvas Background="Red">
                    <rotate:RotatableUserControl Width="50"
                                                 Height="50"
                                                 x:Name="childeRotate3"
                                                 Angle="{Binding ElementName=SliderObject, Path=Value}">
                        <Grid Background="Yellow" />
                    </rotate:RotatableUserControl>
                </Canvas>
            </rotate:RotatableUserControl> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:21:07.097

我不确定为什么不能嵌套绑定它，但你可以尝试将画布 Datacontext 设置为 SliderObject 并将值绑定到嵌套的 rotate:RotatableUserControl，这可能会起作用！

```
 <rotate:RotatableUserControl Width="400"
                                     Height="400"
                                     x:Name="RotatableUserControl"
                                     Angle="{Binding ElementName=SliderObject, Path=Value}">

            <Canvas Background="Red" Datacontext={Binding ElementName=SliderObject, Path=Value}">
                <rotate:RotatableUserControl Width="50"
                                             Height="50"
                                             x:Name="childeRotate3"
                                             Angle="{Binding}">
                    <Grid Background="Yellow" />
                </rotate:RotatableUserControl>
            </Canvas>
        </rotate:RotatableUserControl> 
```

# android - android中地图片段上显示的黑线

> ID：14941651
> 
> 赞同：1
> 
> 时间：2013-02-18T17:11:43.413
> 
> 标签：android, android-fragments

我正在Android中开发一个片段。在我的选项卡中有四个片段，其中一个是地图片段。

使用此地图片段：

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/map"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          class="com.google.android.gms.maps.SupportMapFragment" /> 
```

任务完美完成。

问题是当用户滑动时，地图片段上会显示一条黑线，持续 1 秒。我已经在网上研究过，但找不到防止这种情况的方法？为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T17:28:50.763

也面临这个奇怪的问题。通过在地图视图片段上应用透明视图来修复它似乎解决了这个问题。它是一种黑客。看看它是否适合你

```
<RelativeLayout
            android:id="@+id/relativeLayout1"
            android:layout_width="match_parent"
            android:layout_height="300dp" >

            <fragment
                android:id="@+id/map"
                android:name="com.google.android.gms.maps.MapFragment"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"/>

            <View
                android:id="@+id/imageView123"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
               android:background="@android:color/transparent" />         
    </RelativeLayout> 
```

# javascript - 为什么这个 JavaScript 原型函数会破坏 jQuery？

> ID：14941657
> 
> 赞同：6
> 
> 时间：2013-02-18T17:11:55.960
> 
> 标签：javascript, jquery, xhtml

问题：

只要将以下代码添加到我的 html 页面，我就会得到：

```
Line: 4
Error: Object doesn't support the property or method "exec". 
```

这是导致错误的原型：

```
 Object.prototype.allKeys = function () {
        var keys = [];
        for (var key in this) 
        {
            // Very important to check for dictionary.hasOwnProperty(key) 
            // otherwise you may end up with methods from the prototype chain.. 
            if (this.hasOwnProperty(key)) 
            {
                keys.push(key);
                //alert(key);
            } // End if (dict.hasOwnProperty(key)) 

        } // Next key

        keys.sort();
        return keys;
    }; // End Extension Function allKeys 
```

这是重现错误所需的最少代码（有问题的浏览器：IE9）：

```
<!DOCTYPE html>
<html>
<head>
    <title>TestPage</title>

    <script type="text/javascript" src="jquery-1.9.1.min.js"></script>

    <script type="text/javascript">
        /*
        Object.prototype.getName111 = function () {
            var funcNameRegex = /function (.{1,})\(/;
            var results = (funcNameRegex).exec((this).constructor.toString());
            return (results && results.length > 1) ? results[1] : "";
        }; // End Function getName
        */

        Object.prototype.allKeys = function () {
            var keys = [];
            for (var key in this) 
            {
                // Very important to check for dictionary.hasOwnProperty(key) 
                // otherwise you may end up with methods from the prototype chain.. 
                if (this.hasOwnProperty(key)) 
                {
                    keys.push(key);
                    //alert(key);
                } // End if (dict.hasOwnProperty(key)) 

            } // Next key

            keys.sort();
            return keys;
        }; // End Extension Function allKeys

    </script>

</head>
<body>

    <select id="selLayers" name="myddl">
      <option value="1">One</option>
      <option value="2">Twooo</option>
      <option value="3">Three</option>
      <option value="4">Text1</option>
      <option value="5">Text2</option>
    </select>

    <script type="text/javascript">

        //var dict = { "de": { "Text1": "Ersetzung 1", "Text2": "Ersetzung 2" }, "fr": { "Text1": "Replacement 1", "Text2": "Réplacement 2" }, "it": { "Text1": "Replacemente 1", "Text2": "Replacemente 2" }, "en": { "Text1": "Replacement 1", "Text2": "Replacement 2"} };
        /*
        var languages = dict.allKeys();

        for (var j = 0; j < languages.length; ++j) 
        {
            var strCurrentLanguage = languages[j];
            var dictReplacements = dict[strCurrentLanguage]
            var keys = dictReplacements.allKeys();

            //alert(JSON.stringify(dictReplacements));
            //alert(JSON.stringify(keys));

            for (var i = 0; i < keys.length; ++i) {
                var strKey = keys[i];
                var strReplacement = dictReplacements[strKey];

                alert(strKey + " ==> " + strReplacement);
                //alert('#selLayers option:contains("' + strKey + '")');
                //$('#selLayers option:contains("' + strKey + '")').html(strReplacement);
                //$('#selLayers option:contains("Text1")').html("foobar");

            }    
        }
        */

        $('#selLayers option:contains("Twooo")').text('Fish');

        //alert(dict.allKeys());        
        //alert(dict["de"]["abc"]);

        /*

        $('#selLayers option[value=2]').text('Fish');
        $('#selLayers option:contains("Twooo")').text('Fish');
        $('#selLayers option:contains("Twooo")').html('&Eacute;tage');
        // http://stackoverflow.com/questions/7344220/jquery-selector-contains-to-equals

        $("#list option[value=2]").text();

        $("#list option:selected").each(function () {
            alert($(this).text());
        });  

        $("#list").change(function() {
            alert($(this).find("option:selected").text()+' clicked!');
        });

        */

    </script>

</body>
</html> 
```

我尝试重命名原型函数，以防它与任何 jquery 原型冲突，但这根本没有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T17:13:58.180

因为这将为每个对象添加一个可枚举项。Sizzle（jQuery 使用）使用对象文字来配置它们的选择器解析。当它循环这些配置对象以获取所有令牌时，它并不期望您的功能。在这种情况下，它可能会尝试将您的函数用作`RegExp`.

想象一下这个场景：

```
var obj = { a: 1, b: 2, c: 3 };
var result = 0;
for (var prop in obj) {
  // On one of these iterations, `prop` will be "allKeys".
  // In this case, `obj[prop]` will be a function instead of a number.
  result += obj[prop] * 2;
}
console.log(result); 
```

如果您在`Object`的原型中添加了任何不能用作数字的东西，您将得到`NaN`您的结果。

解决此问题的一个好方法是将`allKeys`函数添加到`Object`而不是`Object.prototype`. 这模仿[`Object.keys`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)：

```
Object.allKeys = function (obj) {
    var keys = [];
    for (var key in obj) 
    {
        // Very important to check for dictionary.hasOwnProperty(key) 
        // otherwise you may end up with methods from the prototype chain.. 
        if (obj.hasOwnProperty(key)) 
        {
            keys.push(key);
            //alert(key);
        } // End if (dict.hasOwnProperty(key)) 

    } // Next key

    keys.sort();
    return keys;
}; // End Extension Function allKeys 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T17:14:21.933

`.hasOwnProperty()`因为 jQuery在枚举对象时不会检查代码。

这样做是为了防止不良的编码实践。他们没有权衡他们的代码来适应这种做法，而是要求他们的用户遵守良好的做法，比如永远不要将可枚举的属性放在`Object.prototype`.

换句话说...不要添加可枚举属性，`Object.prototype`除非您希望所有代码都针对这些属性运行防护，并且您*永远*不想枚举继承的属性。

* * *

FWIW，如果您真的想在普通对象上调用方法，只需创建一个构造函数，以便您拥有一个可以安全扩展的中间原型对象。

```
function O(o) {
    if (!(this instanceof O))
        return new O(o)
    for (var p in o)
        this[p] = o[p]
}

O.prototype.allKeys = function() {
    // ...
}; 
```

现在你像这样创建你的对象：

```
var foo = O({
    foo: "foo",
    bar: "bar", 
    baz: "baz"
}); 
```

......并且`Object.prototype`遗骸未受影响，因此普通物体仍然是安全的。您只需要`.hasOwnProperty()`在枚举`O`对象时使用防护。

```
for (var p in foo) {
    if (foo.hasOwnProperty(p)) {
        // do stuff
    }
} 
```

* * *

对于被解析的 JSON 数据，您可以使用 reviver 函数将普通对象替换为您的`O`对象。

```
var parsed = JSON.parse(jsondata, function(k, v) {
    if (v && typeof v === "object" && !(v instanceof Array)) {
        return O(v)
    }
    return v
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T17:21:05.273

您可以通过使用`defineProperty`which 设置描述符来克服这种副作用。

```
Object.defineProperty(Object.prototype, 'propName', {value: 'your value', enumerable: false}); 
```

# c# - 在 SQL Server 表中查找唯一行

> ID：14941661
> 
> 赞同：1
> 
> 时间：2013-02-18T17:12:01.377
> 
> 标签：c#, sql-server

我在这里查看示例：

[http://msdn.microsoft.com/en-US/library/y06xa2h1(v=vs.80).aspx](http://msdn.microsoft.com/en-US/library/y06xa2h1(v=vs.80).aspx)

```
string s = "primaryKeyValue";
DataRow foundRow = dataSet1.Tables["AnyTable"].Rows.Find(s);

if (foundRow != null) 
{
    MessageBox.Show(foundRow[1].ToString());
}
else
{
    MessageBox.Show("A row with the primary key of " + s + " could not be found");
} 
```

他们没有指定`dataSet1`来自哪里，这是否代表某个数据库？

我试图在我的代码中使用此示例来查找唯一行，但我似乎无法实现此语法。我只使用连接字符串来打开与 SQL 的连接，并`SqlDataAdapter`用于执行功能......

编辑：

```
SqlConnection myConnection = new SqlConnection("Data Source=server; Initial Catalog=Dashboard; Integrated Security=SSPI; Persist Security Info=false; Trusted_Connection=Yes");
SqlDataAdapter da = new SqlDataAdapter();

try
        {
            //Opens the connection to the specified database
            myConnection.Open();

            //Specifies where the Table in the database where the data will be entered and the columns used
            da.InsertCommand = new SqlCommand("INSERT INTO DashboardLibAnswer(Id,Date,Time,Question,Details,Answer,Notes,EnteredBy,WhereReceived,QuestionType,AnswerMethod,TransactionDuration)"
                + "VALUES(@Id,@Date,@Time,@Question,@Details,@Answer,@Notes,@EnteredBy,@WhereReceived,@QuestionType,@AnswerMethod,@TransactionDuration)", myConnection);

            //Specifies the columns and their variable type where the data will be entered
            //Special note:  Conversion from String > DateTime will cause exceptions that will only import some part of data and not everything
            da.InsertCommand.Parameters.Add("@Id", SqlDbType.NVarChar);
            da.InsertCommand.Parameters.Add("@Date", SqlDbType.Text);
            da.InsertCommand.Parameters.Add("@Time", SqlDbType.Text);
            da.InsertCommand.Parameters.Add("@Question", SqlDbType.Text);
            da.InsertCommand.Parameters.Add("@Details", SqlDbType.Text);
            da.InsertCommand.Parameters.Add("@Answer", SqlDbType.Text);
            da.InsertCommand.Parameters.Add("@Notes", SqlDbType.Text);
            da.InsertCommand.Parameters.Add("@EnteredBy", SqlDbType.NVarChar);
            da.InsertCommand.Parameters.Add("@WhereReceived", SqlDbType.NVarChar);
            da.InsertCommand.Parameters.Add("@QuestionType", SqlDbType.NVarChar);
            da.InsertCommand.Parameters.Add("@AnswerMethod", SqlDbType.NVarChar);
            da.InsertCommand.Parameters.Add("@TransactionDuration", SqlDbType.NVarChar);

            //Using the global variable counter this loop will go through each valid entry and insert it into the specifed database/table
            for (int i = 0; i < counter; i++)
            {
                //Iterates through the collection array starting at first index and going through until the end
                //and inserting each element into our SQL Table

                DataSet dashboardDS = new DataSet();
                da.Fill(dashboardDS, "DashboardLibAnswer");

                DataTable dt = dashboardDS.Tables["DashboardLibAnswer"];

                foreach (DataColumn col in dt.Columns)
                {
                    if (col.Unique)
                    {
                        da.InsertCommand.Parameters["@Id"].Value = collection.getIdItems(i);
                        da.InsertCommand.Parameters["@Date"].Value = collection.getDateItems(i);
                        da.InsertCommand.Parameters["@Time"].Value = collection.getTimeItems(i);
                        da.InsertCommand.Parameters["@Question"].Value = collection.getQuestionItems(i);
                        da.InsertCommand.Parameters["@Details"].Value = collection.getDetailsItems(i);
                        da.InsertCommand.Parameters["@Answer"].Value = collection.getAnswerItems(i);
                        da.InsertCommand.Parameters["@Notes"].Value = collection.getNotesItems(i);
                        da.InsertCommand.Parameters["@EnteredBy"].Value = collection.getEnteredByItems(i);
                        da.InsertCommand.Parameters["@WhereReceived"].Value = collection.getWhereItems(i);
                        da.InsertCommand.Parameters["@QuestionType"].Value = collection.getQuestionTypeItems(i);
                        da.InsertCommand.Parameters["@AnswerMethod"].Value = collection.getAnswerMethodItems(i);
                        da.InsertCommand.Parameters["@TransactionDuration"].Value = collection.getTransactionItems(i);
                        da.InsertCommand.ExecuteNonQuery();
                    }
                }

                //Updates the progress bar using the i in addition to 1 
                _worker.ReportProgress(i + 1);

            } // end for

            //Once the importing is done it will show the appropriate message
            MessageBox.Show("Finished Importing");

        } // end try
        catch (Exception exceptionError)
        {
            //To show exceptions thrown just uncomment bellow line
            //rtbOutput.AppendText(exceptionError.ToString);

        } // end catch

        //Closes the SQL connection after importing is done
        myConnection.Close();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:16:06.187

如果您从数据适配器填充数据集，您将能够遵循相同的逻辑 - [http://msdn.microsoft.com/en-us/library/bh8kx08z(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/bh8kx08z(v=vs.71).aspx)

可能值得展示您实际上需要什么才能获得更具体的帮助

编辑我想我理解你想要什么 - 如果你从已经填充的表中填充你的数据表，只需在添加之前检查该项目不存在 - 即

```
if (dt.Rows.Find(collection.getIdItems(i)) == null)    
{
    // add your new row
} 
```

（只是为了确保我拼凑了一个快速测试 - 希望这会有所帮助）：

```
 // MyContacts db has a table Person with primary key (ID) - 3 rows - IDs 4,5,6
  SqlConnection myConnection = new SqlConnection("Data Source=.; Initial Catalog=MyContacts; Integrated Security=SSPI; Persist Security Info=false; Trusted_Connection=Yes");
        SqlDataAdapter da = new SqlDataAdapter();

        da.SelectCommand = new SqlCommand("select * from Person", myConnection);

        myConnection.Open();

        DataSet dashboardDS = new DataSet();
        da.Fill(dashboardDS, "Person");

        dashboardDS.Tables[0].PrimaryKey = new[] { dashboardDS.Tables[0].Columns["ID"]}; 

        List<int> ids = new List<int> {4, 6, 7};

        foreach (var id in ids)
        {
            if (dashboardDS.Tables[0].Rows.Find(id) == null)
            {
                Console.WriteLine("id not in database {0}", id); //i.e. 7
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:33:27.980

您首先需要打开与数据库的连接。这是连接字符串的绝佳来源：[连接字符串参考](http://www.connectionstrings.com/)。

然后，您需要使用某个表中的数据填充数据集。因为我们只对模式信息感兴趣，所以我们只选择一行 ( `SELECT TOP 1 ...`)。

然后我们可以遍历这些列并检查它们的`Unique`属性（布尔值）：

```
string connString =
            "server=(local)\\SQLEXPRESS;database=MyDatabase;Integrated Security=SSPI";
string sql = @"SELECT TOP 1 * FROM AnyTable";
using (SqlConnection conn = new SqlConnection(connString)) {
    conn.Open();
    SqlDataAdapter da = new SqlDataAdapter(sql, conn);
    using (DataSet ds = new DataSet()) {
        da.Fill(ds, "AnyTable");
        DataTable dt = ds.Tables["AnyTable"];
        foreach (DataColumn col in dt.Columns) {
            if (col.Unique) {
                Console.WriteLine("Column {0} is unique.", col.ColumnName);
            }
        }
    }
} 
```

* * *

**更新#1**

对不起，我误解了你的问题。上面的示例返回唯一列，而不是唯一行。`DISTINCT`您可以使用SQL 中的关键字获取唯一（不同）行：

```
SELECT DISTINCT field1, field2, field3 FROM AnyTable 
```

然后，您可以按照与上述相同的方式填写数据表。

通常，“唯一”一词用于数据库术语中的唯一约束和唯一索引。术语“distinct”用于不同的行。

* * *

**更新#2**

您更新的问题似乎表明您不想找到唯一的行，但您想插入唯一的行（这是完全相反的）。

通常你会从这样的集合中选择不同的项目。但是很难准确回答您的问题，因为我们不知道您的收藏类型。

```
foreach (var item in collection.Distinct()) {

} 
```

* * *

**更新#3**

在 SQL Server 表中插入不同值的最简单方法是在从 CSV 文件中读取行时过滤其来源的行；甚至在拆分它们之前。

```
string[] lines = File.ReadAllLines(@"C:\Data\MyData.csv");
string[][] splittedLines = lines
                .Distinct()
                .Select(s => s.Split(','))
                .ToArray(); 
```

现在您有了可以插入到 SQL Server 表中的不同（唯一）分割线。

# java - JFrame 等待另一个 JFrame

> ID：14941662
> 
> 赞同：-2
> 
> 时间：2013-02-18T17:12:03.000
> 
> 标签：java, multithreading, swing, jframe, task

我有以下情况。有一个类 JFrame1 执行一系列指令并将焦点放在另一个 JFrame2 上，然后继续。当 JFrame2 获得焦点时，JFrame1 应该期望 JFrame2 处理而不是执行以下指令。该怎么办？

```
JFrame1{
   //instruction 1
   //instruction 2
   // ....
   //instruction 6
   JFrame2 starts
   [waiting for results of JFrame2]
   //instruction 7
   //instruction 8} 
```

***JFrame1 应在恢复焦点时执行指令 7 和 8***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T17:17:59.513

通常，让一个 JFrame 启动另一个 JFrame 是不好的，除非它们完全独立。我建议您启动 JDialog 而不是 JFrame2。JDialog 的使用方式与 JFrame 相同，所有命令都相同。启动 JDialog 的 JFrame 将暂停，直到从 JDialog 类中调用 this.dispose() 来处理 JDialog。然后它看起来像这样：

```
JFrame1 starts
instruction 1
instruction 2
...
instruction 6
JDialog (like JFrame2) starts
(JFrame1 waiting for JDialog to be disposed with this.dispose())
instruction 7
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:18:01.790

你可以看看[http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#isFocusOwner()](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#isFocusOwner())

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:18:39.273

我假设您的意思是当前，指令 7 和 8 在第 2 帧打开后立即发生。要在 JFrame2 关闭后执行指令 7 和 8，您可以使用 JDialog 或 JOptionPane 使 JFrame2 成为模态对话框，或者您可以将侦听器附加到 JFrame2，如下所示：

```
frame2.addWindowListener(new WindowAdapter() {
    @Override
    public void windowClosing(WindowEvent e) {
        // instruction 7
        // instruction 8
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-05T19:28:13.603

您应该尝试将您正在做的事情组织到一个类中并创建对象。显然这是一个极其简化的例子：

```
public class Frames extends JFrame{
  public Frames(){
   super("Frame 1");
   setSize(500,500);
   //setup frame 1 look
   doWorkMethodForFrame1();
  }
  public Frames(int arg){
   super("Frame 2");
   setSize(500,500);
   //setup frame 2 look
    doWorkMethodForFrame2(data);
  }

   public void doWorkMethodForFrame1(){
   //do work
   setVisible(false);
   }  
   public void doWorkMethodForFrame2(int data){
   //do work
   setVisible(false);
   }

}

//call your frames
new Frames();
new Frames(dataSend); 
```

# php - 带有方法 load() 的 Ajax 用于选择字段中的选项值

> ID：14941667
> 
> 赞同：0
> 
> 时间：2013-02-18T17:12:19.330
> 
> 标签：php, javascript, jquery, ajax

我的选择字段有问题，因为我无法捕获选项的值，我的代码：

```
<form method="get" name="form1" > 
  <select id="rpc" onchange="$('#rpc').load('aja.province.php?cod=this.value')"> 
```

如何使用 GET 方法将值发送到 PHP 文件中的选项？

最好的祝福。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T17:14:33.087

`$('#rpc').load('aja.province.php?cod=this.value')`应该是`$('#rpc').load('aja.province.php?cod='+this.value)`。

`this.value`不是字符串，它是一个 javascript 表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:18:14.297

如果您使用的是 jQuery，我建议您删除内联内容，然后在您的源代码中执行以下操作：

```
$('#rpc').change( function () {
    var url = 'aja.province.php?cod=' + this.value;
    load(url, function () {
        // do whatever you need to do with returned value
    }
}); 
```

请注意，您当前的内联`load()`调用正在传递参数的文字`this.value`字符串`cod`。

# jquery - 如何在框架集上放置 div 覆盖？

> ID：14941671
> 
> 赞同：4
> 
> 时间：2013-02-18T17:12:41.087
> 
> 标签：jquery, jsp, frameset

我需要使用 jQuery 1.6.2 为现有的 jsp 页面创建一个请等待页面。我能够让 div 覆盖工作，以及页面中心模式窗口中的请稍候动画。但是，覆盖仅覆盖其中一个框架集，即中间的一个。

html结构基本上是（为了清楚起见，我省略了很多）：

```
...
<frameset >
  <frame id="topMostFrame">
  <frameset>
    <frame id="leftMostframe">
    <frame id="centerMostFrame">
  </frameset>
</frameset>
<noframes>
</noframes>
</body>
</html> 
```

**查询**

```
function getTheOverlay(){
    $(document).ready(function() {
        $("#loading-div-background").css({opacity: 0.5});
        $("#loading-div-background").show();
        //alert("In getOverlay!");
    }); 
}

function remove(){
    $(document).ready(function() {
        $('#loading-div-background').hide();
    });
} 
```

**HTML**

```
<div id="loading-div-background" style="display:none" class="ui-widget">
    <div id="loading-div" class="ui-corner-all">
      <img style="height:80px;margin:50px;" src="/images/loading.gif" alt="Loading.."/>
     </div>
</div> 
```

**CSS**

```
#loading-div-background {
    display:none;
    position:absolute;
    top:0;
    left:0;
    background:gray;
    width:100%;
    height:100%;
    /* Next 2 lines IE8 */
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=70)";
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=70);
}

#loading-div {
  width: 300px;
  height: 200px;
  background-color: #ffffff;
  text-align:center;
  position:absolute;
  left: 50%;
  top: 50%;
  margin-left:-150px;
  margin-top: -100px;
} 
```

我尝试移动 html 以加载到我的 jquery 函数中，但它没有在 IE8 中显示覆盖。我也有时间让 IE8 与覆盖本身一起工作，但使用上面的 CSS 已修复。

我需要禁用左框架上的链接，这可能是我将使用的方法，或者用覆盖覆盖它们。是的，我知道框架很糟糕，但这就是我被赋予的工作。

我无法让叠加层覆盖其他框架集并覆盖整个页面。我读过这不可能用框架集做，尽管我猜可能有一个解决方法。但是，当我出于调试目的使用警报时，覆盖会覆盖整个页面。

我的问题是：为什么使用警报使覆盖覆盖一切？即使使用框架集，我还能做些什么来获得相同的效果吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T05:35:13.713

我遇到了同样的问题，这就是我发现对我有用的问题。

框架基本上是一个窗口对象。所有关于窗口的规则都适用于框架。div 属于保存在窗口内的文档。由于文档不能离开它的窗口，所以 div 不能离开它的窗口。您要求在浏览器级别进行控制，但您被允许的只是在文档级别进行控制。

但是，您可以在**iframe**上执行 DIV，但不能在**frameset**上执行。

**更新：**

拿这个例子我的朋友，我花了一些时间来解决它，但真的，StackOverflow对我帮助很大，所以我觉得我必须把这个例子放在这里帮助别人。

这是页面容器的 html，它包含一个 iframe，它将请求您想要覆盖的页面框架集。

```
<head>
<style type="text/css">
    html, body#mybcontainer_body{margin:0px;padding:0px;border:none;height:100%;width:100%;}
    #mybcontainer_div{position:absolute;top:0px;bottom:0px;left:0px;right:0px;}
    #mybcontainer_iframe{position:absolute;top:0%;left:0%;height:100%;width:100%;}
</style>
</head>
<body id="mybcontainer_body" >
<div id="mybcontainer_dialog" style="display:none;">Some Text Here</div>
    <div id="mybcontainer_div"><iframe id="mybcontainer_iframe" border="0" frameborder="0" scrolling="no" noresize="noresize" src="page-two-contain-frameset"></iframe></div>
    </body> 
```

致以我的问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:27:40.827

在 Cairo Solutions 的解释之后，我最终在框架集上使用了显示/隐藏。这确实有效，但我不相信用一个 div 覆盖多个框架集是可能的。

这是我使用的代码：

```
$('#divName a',top.frames['leftframe'].document).show();
$('#divName a',top.frames['leftframe'].document).hide(); 
```

然后我只是使用我创建的 div 作为主框架集中的叠加层来与它结合使用，从而解决了问题。

# sql-server - T-SQL 错误严重性是否影响脚本是否继续执行下一条语句？

> ID：14941675
> 
> 赞同：1
> 
> 时间：2013-02-18T17:12:45.570
> 
> 标签：sql-server, tsql

鉴于此表

```
CREATE TABLE [dbo].[Table_2](
    [X] [int] IDENTITY(1,1) NOT NULL,
    [Y] [varchar](30) NULL,
 CONSTRAINT [PK_Table_2] PRIMARY KEY CLUSTERED 
(
    [X] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

当我对空表运行以下代码时，第一个插入成功，但第二个插入将失败，因为代码正在尝试为标识列插入重复值。

```
BEGIN

    SET IDENTITY_INSERT Table_2 ON

    PRINT 'Insert 1'

    INSERT INTO Table_2
                (X, Y)
    VALUES      (3, CAST(getdate() AS varchar(30)) )

    PRINT 'Insert 2'

    INSERT INTO Table_2
                (X, Y)
    VALUES      (3, CAST(getdate() AS varchar(30)) )

    PRINT 'Insert 3'

    INSERT INTO Table_2
                (X, Y)
    VALUES      (4, CAST(getdate() AS varchar(30)) )

    SET IDENTITY_INSERT Table_2 OFF    

END 
```

输出：

```
Insert 1

(1 row(s) affected)
Insert 2 
```

> *消息 2627，级别 14，状态 1，第 13 行
> 违反主键约束“PK_Table_2”。无法在对象“dbo.Table_2”中插入重复键。*

```
Insert 3

(1 row(s) affected) 
```

不是在遇到错误的地方执行脚本，而是继续执行下一个插入语句，该语句成功。

我意识到我可以在错误发生时使用 TRY CATCH 块来捕获错误，但我的问题是：

我注意到错误的严重性为 14。我假设严重级别足够的错误会导致执行中止。你能告诉我这是否是 corerct 以及导致脚本中止需要什么最低严重性级别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:20:20.427

您可以使用 SET 选项在出现错误时停止执行事务：

```
SET XACT_ABORT ON 
```

[http://msdn.microsoft.com/en-us/library/ms188792.aspx](http://msdn.microsoft.com/en-us/library/ms188792.aspx)

但是，您需要将代码包装在事务中以获得全有或全无行为。

```
SET XACT_ABORT ON
BEGIN  TRAN

SET IDENTITY_INSERT Table_2 ON

PRINT 'Insert 1'

INSERT INTO Table_2
            (X, Y)
VALUES      (3, CAST(getdate() AS varchar(30)) )

PRINT 'Insert 2'

INSERT INTO Table_2
            (X, Y)
VALUES      (3, CAST(getdate() AS varchar(30)) )

PRINT 'Insert 3'

INSERT INTO Table_2
            (X, Y)
VALUES      (4, CAST(getdate() AS varchar(30)) )

SET IDENTITY_INSERT Table_2 OFF    

COMMIT
SET XACT_ABORT OFF 
```

# jquery - jQuery 获取每个图像的宽度，然后将 css 宽度添加到每个图像

> ID：14941676
> 
> 赞同：1
> 
> 时间：2013-02-18T17:12:46.990
> 
> 标签：jquery, width

我想知道如何在不同的 li 中获取每个图像的宽度（许多宽度），然后通过 jQuery 将该宽度返回给每个图像。

所有图像都有不同的宽度。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:13:58.973

```
$('img').each(function() {

  var width = $(this).width();

   // OR

  var width = this.clientWidth;

  // to set that width to image try

  $(this).attr('width', width);

   // according to comment: how to assign width to parent li

   $(this).parent('li').css('width', width + 'px');
}); 
```

# html - 调整大小 回退到嵌入的 IE8, Video gets Cropped I have a video of Resolution 1166 X 720 in mp4 Format. The tag works fine for IE9+,Chrome, Safari. When I give {width:90 问问题 问问题 2013-02-18T17:12:57.790 577 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have a video of Resolution 1166 X 720 in mp4 Format. The tag works fine for IE9+,Chrome, Safari. When I give {width:90%} to the video element ,It resizes properly to fit the screen size. I am applying fallback to by putting a Quick Time Player for IE8\. But now giving { width:90%;} to doesn't resize the video instead crops the video to adjust it's size. I tried VideoJS, It's not rendering videos in IE8\. IE8 hates , But I need to make it work. Used flowplayer ,But the resizing problem keeps reoccuring. What can be an feasible solution? Changing the resolution of the video or some CSS Hack for IE8 Fallback? Might be worth trying an inline style, if you've not already ... or wrap the video element in a div which you then size and make the video 100% width. htmlcssvideointernet-explorer-8html5-video 4 1 回答 1 This answer is useful 1 可能值得尝试内联样式，如果您还没有... 或将视频元素包装在一个 div 中，然后调整大小并将视频设为 100% 宽度。 于 2013-03-19T13:38:41.470 回答 Related 1 java - JPA OneToMany 在插入另一行时删除第一行（在多方面） 1 java - 如何在java中使用对象列表的列表？ 1 actionscript-3 - 在 Actionscript 3.0 中检查字典定义的单词 2 javascript - JavaScript 中的原始包装器行为 2 c# - C# 将焦点放在按钮上/使其处于活动状态 1 r - 如何使用 data.tables 对多列进行有效的矢量化更新？ 1 mysql - Mysql 查询将新数据从一个数据库复制到另一个数据库 4 c# - 仅返回列表 C# 中包含的值 1 mysql - MySQL select count(distinct id) 很慢 1 jquery - 从当前元素反向查找具有特定类属性的最近表行元素 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14941682
> 
> 赞同：0
> 
> 时间：
> 
> 标签：html, css, video, internet-explorer-8, html5-video

I have a video of Resolution **1166 X 720** in **mp4** Format. The `<video>` tag works fine for IE9+,Chrome, Safari. When I give `{width:90%}` to the video element ,It resizes properly to fit the screen size.

I am applying fallback to `<object>` by putting a Quick Time Player for IE8. But now giving { width:90%;} to `<object>` doesn't resize the video instead **crops** the video to adjust it's size.

I tried **VideoJS**, It's not rendering videos in IE8. IE8 hates `<video>`, But I need to make it work.

Used **flowplayer** ,But the resizing problem keeps reoccuring.

What can be an feasible solution? Changing the resolution of the video or some CSS Hack for IE8 Fallback?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:38:41.470

可能值得尝试内联样式，如果您还没有...

```
<object style="width:90%"> 
```

或将视频元素包装在一个 div 中，然后调整大小并将视频设为 100% 宽度。

# c# - 从 PhoneResources 获取样式并应用于新的 ListBox

> ID：14941685
> 
> 赞同：0
> 
> 时间：2013-02-18T17:13:05.730
> 
> 标签：c#, windows-phone-7, xaml

我在 PhoneApplicationPage.Resources 中有这种风格：

```
<phone:PhoneApplicationPage.Resources>
    <data:CarListView x:Key="carCollection" />
    <Style x:Key="ListBoxItemStyle1" TargetType="ListBoxItem">
        <Setter Property="Template">
        .... 
```

我正在尝试将仅包含一项的新 ListBox 添加到 StackPanel。它只显示类的名称。我尝试了很多方法。例如这个：

```
ListBox lstBox = new ListBox();
CarListView view = new CarListView();
view.DataCollection.Add(new CarView("John", "Ferrari", "/Images/car_missing.jpg"));
lstBox.ItemsSource = view.DataCollection;
lstBox.Style = Application.Current.Resources["ListBoxItemStyle1"] as Style;
stackPanel.Children.Insert(0, lstBox); 
```

风格和课程都很好。当我没有在代码中添加它，而是在加载页面时在 xaml 中添加，一切看起来都很好。如何从代码中添加具有资源样式的新列表框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:12:42.813

您必须为列表框项使用 ItemContainerStyle，样式用于 ListBox 控件！

```
 <Grid x:Name="LayoutRoot" Background="White">
    <Grid.Resources>
        <Style  x:Key="myLBStyle" TargetType="ListBoxItem">
            <Setter Property="Background" Value="Khaki" />
            <Setter Property="Foreground" Value="DarkSlateGray" />
            <Setter Property="Margin" Value="5" />
            <Setter Property="FontStyle" Value="Italic" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="BorderBrush" Value="DarkGray" />
        </Style>
    </Grid.Resources>
        <ListBox Height="184"  ItemContainerStyle="{StaticResource myLBStyle}"  HorizontalAlignment="Left" 
             Margin="23,24,0,0" Name="listBox1" VerticalAlignment="Top" Width="204" >
        <ListBox.Items>
            <ListBoxItem Content="Item1" />
            <ListBoxItem Content="Item2" />
            <ListBoxItem Content="Item3" />
        </ListBox.Items>
    </ListBox>
</Grid> 
```

或在代码中：

```
listBox1.ItemContainerStyle = Application.Current.Resources["myLBStyle"] as Style; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:33:38.537

我制作了一个示例，我在代码中创建它并从页面资源中加载样式，如您的示例中

XAML：

```
<phone:PhoneApplicationPage.Resources>
    <Style  x:Key="myLBStyle"
            TargetType="ListBoxItem">
        <Setter Property="Background"
                Value="Khaki" />
        <Setter Property="Foreground"
                Value="DarkSlateGray" />
        <Setter Property="Margin"
                Value="5" />
        <Setter Property="FontStyle"
                Value="Italic" />
        <Setter Property="FontSize"
                Value="14" />
        <Setter Property="BorderBrush"
                Value="DarkGray" />
    </Style>
</phone:PhoneApplicationPage.Resources> 
```

然后我有一个空的堆栈面板，当用户单击按钮时，我在其中添加列表框

文件背后的代码：

```
 private void Test_Click_1(object sender, System.Windows.RoutedEventArgs e)
    {
        ListBox lstBox = new ListBox();
        List<string> data = new List<string>() { "one", "two", "three" };
        lstBox.ItemsSource = data;
        lstBox.ItemContainerStyle = this.Resources["myLBStyle"] as Style;
        MyStackPanel.Children.Insert(0, lstBox);
    } 
```

# regex - 无法替换同一行上多次出现的模式

> ID：14941693
> 
> 赞同：0
> 
> 时间：2013-02-18T17:13:32.073
> 
> 标签：regex, perl

我正在尝试在 Perl 中编写一个正则表达式，该表达式适用于混合了文本和帐号的文本文件。我想做的是重新格式化帐号。`.*`当给定行上有多个匹配项时，我遇到了一个问题，即在帐号的任一侧进行匹配。我已经进行了一些搜索，但找不到任何答案，所以我希望有人可以向我解释我的正则表达式有什么问题，这样我就可以在将来避免这个陷阱。

```
while(<>) {

    s/(.*)\b([0-9]+)\b(.*)/$1xxx\-$2$3/g;
    print;
} 
```

将`xxx-`被帐户标识符替换，但在我让它工作之前，我只有`x`'s.

我遇到的问题是，只有最后一次出现被替换，而不是所有出现。

例如，一个简单的示例行：

```
First Part 223456 Third Part Fourth Part 113456 Fifth Part Sixth Part 
```

我希望：

```
First Part xxx-223456 Third Part Fourth Part xxx-113456 Fifth Part Sixth Part 
```

但我只得到：

```
First Part 223456 Third Part Fourth Part xxx-113456 Fifth Part Sixth Part 
```

如果我在捕获组中包含其他元字符它可以工作，我将它缩小到`.*` 问题，但我不能保证文件中的内容，所以我需要匹配所有内容。只有在同一行有多个帐号时才会发生这种情况；如果帐号出现在多行上，它工作正常。

任何反馈将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:18:28.587

如果帐号只是数字，请执行以下操作：

`s/\b(\d+)\b/xxx-$1/g;`

如果它们总是 6 个数字，请更具体：`s/\b(\d{6})\b/xxx-$1/g;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T18:31:52.870

`(.*)`消耗输入中的所有字符，然后必须开始回溯：返回一个字符并测试下一个模式是否匹配，如果不匹配，则返回另一个字符并逐个字符检查匹配。

因此，通过将贪婪的通用匹配作为您的第一个表达式，您实际上是在*要求*引擎只找到最后一个匹配。你可能不知道你在要求这个，但你是。

通常，在处理正则表达式时，您必须考虑数据：“我将如何识别文件中的这种模式。很可能，“一位或多位数字”只是不会将其用于帐号，因此请*指定*你想匹配的模式尽你所能指定它。然后你可以确定如果有东西匹配你的模式，它很可能是你想要的。顺便说一下，单词边界规范是一个*好的*开始。

如果您需要*准确的*六位数，则指定准确的*六位数*。

您不必指定`(.*)`为匹配的一部分的另一个原因是，从外观上看，您正在做您认为需要做的事情，以将线路的其他部分保持在原位。但是，Perl 只用替换替换匹配的部分。除了要匹配的部分之外，您无需指定任何内容*。*

因此，假设您的帐号是 6 位宽，这就是您所需要的。

```
 s/\b(\d{6})\b/xxx-$1/g; 
```

最后一点。如果由于某种原因您的正则表达式会找到您的第一个匹配项，在模式`(.*)` *之后指定，**保证*您每行只找到一个匹配项，并且`/g`不会应用，因为它使完全匹配等于输入行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T17:35:51.543

我看到的问题是贪婪匹配`(.*) which in your case will match everything up until the last ([0-9]word boundary)`。我想你可以把它关掉，你应该没问题`(eg. s/(.*?)//g)`。

这是一个小例子：

```
while(my $line = <$fh>) {
    $line =~ s/(.*?)\b([0-9]+)\b(.*?)/$1xxx\-$2$3/g;
    print $line;
}

OUTPUT:
First Part xxx-223456 Third Part Fourth Part xxx-113456 Fifth Part Sixth Part
First Part xxx-223456 Third Part Fourth Part xxx-113456 Fifth Part Sixth Part
First Part xxx-223456 Third Part Fourth Part 
First Part xxx-223456 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T17:24:12.767

一种使用消极后瞻和另一种积极前瞻的方法：

```
perl -pe 's/(?<!\d)(\d+)(?=\D|$)/xxx-$1/g' <<<"First Part 223456 Third Part Fourth Part 113456 Fifth Part Sixth Part" 
```

它产生：

```
First Part xxx-223456 Third Part Fourth Part xxx-113456 Fifth Part Sixth Part 
```

# ocaml - 关于 Ocaml 中的无

> ID：14941697
> 
> 赞同：0
> 
> 时间：2013-02-18T17:13:40.047
> 
> 标签：ocaml

我是 Ocaml 的初学者。我正在尝试编写一些关于正常顺序减少的代码，并且被某些语法所迷惑。以下是一些用于隔离我的错误的截断代码。

```
type expr =
| Var of char
| Num of int
| Lambda of expr
| Apply of expr * expr

let rec substitute f id e = match f with
| Num(i) -> if id == i then e else f
| _ -> f

let rec beta_lor e = match e with
| Apply(Lambda(f), e2) -> substitute f 1 e2
| Apply(e1,e2) -> beta_lor e1
| Lambda e1 -> beta_lor e1
| _ -> None 
```

在 .mli 文件中，我声称 beta_lor 的类型为：val beta_lor: expr -> expr option

现在，当我编译此文件时，它报告有关我在 beta_lor 中使用的“无”行的错误：错误：此表达式的类型为 'a 选项，但预期的表达式类型为 expr

我知道 ocaml 编译器试图进行类型推断，它希望我输出一个表达式，而不是 'a 选项，但我声称 beta_lor 可能输出选项？我有点困惑，请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:24:17.957

你的问题是`substitute` *不*返回`expr option`。它只是返回`expr`。也许你想要的是`beta_lor`返回`Some (substitute f 1 e2)`那个案子。

**编辑**

对于它的价值，您的描述似乎是基于这样一种想法，即选项类型就像主流语言中的指针类型，要么是有趣的指针，要么是 NULL。（在我看来）关注恰好有两种情况这一事实更具启发性（在我看来）：`Some` *expr*和`None`. 您需要在 OCaml 中显式地包装和解包这两种情况，这（在我看来）比将 NULL 视为合法指针值要好得多。我们每天都在我们周围看到主流模式的缺点（抱歉编辑）。

# jquery - jquery 手风琴链接菜单

> ID：14941699
> 
> 赞同：0
> 
> 时间：2013-02-18T17:13:42.793
> 
> 标签：jquery, html-lists, accordion, styling

只是想知道制作 Jquery Accordion 链接菜单的最佳方法。由于 CMS 的限制，这对我来说变得更加复杂。我理想的追求：一个 JQ 菜单，它将解析一个菜单结构，如：

```
<ul class="amenu">
<li><a href="">Intro to page...</a> /*This should link to the intro page, and also expand the accordion. It must be a li.*/
 <ul>
  <li><a href="">More information about parent item, styled differently and in an accordion</a></li>
  <li><a href="">Further info to above item..</a></li>
 </ul>
</li>
<li><a href="">Another page intro</a></li>
///more sub items
</ul> 
```

我面临的问题是我使用的 CMS 非常严格，我无法在一级和二级 li 中添加单独的类（我可以在 CSS 中实现这一点，而不是列表样式！？）。我还希望手风琴在课堂级别打开（如果访问子手风琴页面）CMS 分配说为了论证 Current Item 我认为应该可以通过 JQuery Accordion？

Jquery 1.4.3 正在使用，但如果需要可以灵活使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:19:21.380

您可以使用这些选择器：

```
 .amenu li ul { /* Second level menu */ }
   .amenu li ul li { /* Li seconde level */ } 
```

要打开您的子级菜单：

```
 .amenu li ul { display: none; }
   .amenu li:hover > ul { display: block; } 
```

如果我理解了你的问题。

# grails - grails中的多对多没有在关系表中保存记录

> ID：14941705
> 
> 赞同：1
> 
> 时间：2013-02-18T17:13:54.287
> 
> 标签：grails, many-to-many, grails-orm

`Color`我在和之间有一个多对多的关联`Shade`。`Color`有很多色调，`Shades`有很多颜色。

我已经这样建模了：

```
class Color {
  static hasMany = [shades: Shade]
  String name
}

class Shade {
  static belongsTo = Color
  static hasMany = [colors: Color]
  String name
} 
```

但是，当我运行以下代码时：

```
new Color(name: "Red").addToShades(new Shade(name: "light")).save() 
```

它只将记录保存在`Color`表和`Shade`表中，但不保存在表中，表`Color_Shades`本质上是两者之间的连接表。

难道我做错了什么？这就是我从[文档](http://grails.org/doc/latest/guide/GORM.html#manyToMany)中理解的方式：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:49:57.427

我不确定为什么你的表没有被填充，但是 Burt 在[这篇](http://www.infoq.com/presentations/GORM-Performance)关于使用这种类型的多对多的性能的谈话中有一个建议。解决方案是使用中间类：

```
class ColorShade implements Serializable {

  Color color

  Shade shade

  //implement hashcode & equals!
  //and also implement helpers like removeAll, remove, create and get.

  static mapping = {
    id composite: ['color','shade']
    table 'Color_Shades'
    version false
  }
} 
```

[您可以在Spring Security Core 插件](https://github.com/grails-plugins/grails-spring-security-core/blob/master/src/templates/PersonAuthority.groovy.template)中看到一个示例类。

# php - 如果存在mysql错误

> ID：14941706
> 
> 赞同：1
> 
> 时间：2013-02-18T17:13:54.103
> 
> 标签：php, mysql, sql

查询错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'IF EXISTS(SELECT flag FROM welcomecall WHERE customerID='6767') SELECT flag' 附近使用正确的语法

此查询不在第 1 行附近，所以我不确定错误是什么。有人可以建议吗？:)

```
<?php
$db_link = mysql_connect('localhost', 'secrets', '') or die('Could not connect to the database.');
mysql_select_db('thedb', $db_link) or die('Could not find the database table.');

require "/home/directory/public_html/app/Mage.php";
//umask(0);
Mage::app();
 Mage::getSingleton('core/session', array('name'=>'frontend')); 

$session = Mage::getSingleton('customer/session');
if($session->isLoggedIn()) {
    print_r($session);
    $customerID = $session->getCustomerId();
    print("Customer ID is ". $customerID);
} else {
    echo 'Not logged In';
}
    $action = $_POST['action'];
    switch($action) {
        case 'retrieve' : retrieveFlag();break;
        case 'postValue1' : postValue();break;
        // ...etc...
    }

function retrieveFlag(){
    global $customerID;
   $query="IF EXISTS(SELECT flag FROM welcomecall WHERE customerID= '$customerID')
                SELECT flag FROM welcomecall WHERE customerID=" . $customerID . "
            ELSE
                INSERT INTO welcomecall VALUES (" .$customerID .",0)";

   $result = mysql_query($query) or die('Error in the query: ' . mysql_error());
}

function postValue(){
     $query="IF EXISTS(SELECT flag FROM welcomecall WHERE customerID=" . $customerID . ")
                SELECT flag FROM welcomecall WHERE customerID=" . $customerID;
    $result = mysql_query($query) or die('Error in the query: ' . mysql_error());

    if ($result==0){
    $query="UPDATE welcomecall SET flag=1 WHERE customerID=" .$customerID. ")";         
   $result = mysql_query($query) or die('Error in the query: ' . mysql_error());
   }
   else if($result==1){
    $query="UPDATE welcomecall SET flag=0 WHERE customerID=" . $customerID. ")";            
   $result = mysql_query($query) or die('Error in the query: ' . mysql_error());
   }
}
?> 
```

还尝试了以下错误：

```
 $query="SELECT CASE
            WHEN EXISTS(SELECT flag FROM welcomecall WHERE customerID= '$customerID')
                THEN SELECT flag FROM welcomecall WHERE customerID=" . $customerID . "
            ELSE
                INSERT INTO welcomecall VALUES (" .$customerID .",0)
            END"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:21:12.707

您不能在例程（存储过程、函数和例程）之外在 MySQL 中使用 IF 语句。您需要通过发出多个查询并查看结果在 PHP 中完成工作，或者您可以编写一个存储过程在数据库中为您完成工作（请参阅：[http ://dev.mysql.com/doc /refman/5.0/en/create-procedure.html](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)）。第三种选择是使用 INSERT...ON DUPLICATE KEY UPDATE （请参阅：[http](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html) ://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html ）甚至 REPLACE INTO 而不是 INSERT INTO（参见：[http](http://dev.mysql.com/doc/refman/5.0/en/replace.html) ://dev.mysql.com/doc/refman/5.0/en/replace.html ）。

在 PHP 中，您可以使用以下语法调用存储过程：

```
$query = "CALL my_stored_procedure(arg1, arg2, ...)"; 
```

请注意，存储过程可以像 SELECT 语句一样返回结果集。在这种情况下，我建议使用出站参数将数据返回给 PHP（请参阅：[PHP + MySql + 存储过程，如何访问“out”值？](https://stackoverflow.com/questions/48126/php-mysql-stored-procedures-how-do-i-get-access-an-out-value?rq=1)了解更多信息，或[http://php.net /manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)用于 PDO）。

其他查询类型的行为与预期相同。

我会将在 PHP 中使用几个查询的细节作为练习留给读者，但如果您遇到困难，我很乐意提供更多信息。

另外，请不要使用 mysql_* 函数。它们已被弃用。请改用 MySQLi 或 PDO。

进一步说明：

SQL Server 和可能的其他数据库允许您在提交查询批处理时使用命令式构造。在 T-SQL 中，你可以这样说

```
IF EXISTS(SELECT id FROM foo WHERE id = 5)
    UPDATE foo SET bar = 7
ELSE
    INSERT INTO foo (bar) VALUES (7)
GO 
```

这真的很好。MySQL 不允许在普通查询中使用命令式构造，例如 IF 语句、CASE 语句（不要与 CASE 表达式混淆——参见下一段）、循环和游标。相反，它们必须包含在存储过程、函数或触发器中。这是一个非常烦人的限制，但您无能为力。

您的最后一个查询不起作用的原因是因为您将数据修改查询放入 SELECT 查询中。您只能将其他 SELECT 查询嵌入为子查询。这样做的原因是子查询位于预期标量或集合的位置，并且 INSERT 除了修改数据之外，都不返回任何内容，这破坏了 SELECT[1] 的语义。想想你要求查询做什么。您是说要返回数据集，或者根据有关数据库中数据的某些事实插入一些新数据。这两个选项是矛盾的。你可以做一个或另一个，但不能两者都做。所以 MySQL 不允许这种类型的事情。

[1] 您可以通过将 INSERT 放入函数中来解决这个问题，该函数可以从 SELECT 查询中调用，但这太糟糕了，永远不要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:27:14.530

我认为您混淆了查询的“CASE”语法：http: [//dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html) 与使用的（完全不同的）“CASE”语法对于存储过程：[http](http://dev.mysql.com/doc/refman/5.0/en/case.html) ://dev.mysql.com/doc/refman/5.0/en/case.html 。

# android - Android spinner - 从 Sqlite 设置当前值

> ID：14941709
> 
> 赞同：2
> 
> 时间：2013-02-18T17:14:01.230
> 
> 标签：android, spinner

我的 Android 应用程序中的微调器有问题。

在一项活动中，我列出了一张表中的所有值，然后单击其中一项，我可以编辑记录的值。
为此，我打开另一个活动，并发送数据库 ID。
在这个新活动中，我根据该 ID 加载值并更新编辑文本。
但是，我的微调器有问题。
我用另一个“表”填充它，但是在此之后我如何“将选定的值”移动到正确的位置？
例如，我有这个表：

CUSTOMERS:
id, name, age, address, phone, idtype

TYPE:
id, name , obs

当我从选定的客户处加载活动中的值时，我将获得我的类型的 IDTYPE。但是，在微调器中，我只有“名称”。

我怎样才能做到这一点？？？
有任何想法吗？

代码如下： public class AlteraApiarios extends Activity { String Id; EditText etNumero,etNome,etLocal,etLatitude,etLongitude,etDataCria; 复选框 cbZona; 微调器 spTipo；按钮 btGravar,btAnular; 字符串 [] ArrayTipo,IdBD; SQLiteDatabase bancoDados=null; 光标光标；

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.alteraapiarios);
    Inicializa_Objectos();
    Carrega_Spinner();
    Listeners();

    Intent iDadosRecebidos = getIntent();
    if (iDadosRecebidos != null )
    {
        Id=iDadosRecebidos.getStringExtra("id");
        Prepara_Alteracao();
    }
    else finish();
}

@Override
    protected void onResume() {
    super.onResume();

public void Prepara_Alteracao(){
    try{
        bancoDados = openOrCreateDatabase("GESTAPI", MODE_WORLD_READABLE , null);
        String selectQuery = "SELECT * FROM Apiarios WHERE id=" +Id;
        cursor=bancoDados.rawQuery(selectQuery, null);
        cursor.moveToFirst();
        etNumero.setText(cursor.getString(cursor.getColumnIndex("Numero")));
        etNome.setText(cursor.getString(cursor.getColumnIndex("Nome")));
        etLocal.setText(cursor.getString(cursor.getColumnIndex("Local")));
        etDataCria.setText(cursor.getString(cursor.getColumnIndex("DataCria")));
        if(cursor.getString(cursor.getColumnIndex("ZControlada")).equals("1")){
            cbZona.setChecked(true);
        } else cbZona.setChecked(false);
        etLatitude.setText(cursor.getString(cursor.getColumnIndex("GPSLat")));
        etLongitude.setText(cursor.getString(cursor.getColumnIndex("GPSLon")));

----->>>>>>>>       spTipo.setSelection(cursor.getInt(cursor.getColumnIndex("TipoApi")));

        bancoDados.close();
        }
        catch (Exception erro){
            MostraMensagem("Erro", "Ocorreu um erro ao consultar a Base de Dados: "+erro);
        }
}

public boolean Valida_Dados(){
    if (etNumero.length()<=0) return false;
    if (etNome.length()<=0) return false;
    return true;
}

public void Carrega_Spinner(){
    try{
        bancoDados = openOrCreateDatabase("GESTAPI", MODE_WORLD_READABLE , null);
        cursor=bancoDados.query("TiposApi", new String [] {"id","Tipo"}, null, null, null, null, null);
        cursor.moveToFirst();
        ArrayTipo=new String[cursor.getCount()];
        IdBD=new String[cursor.getCount()];
        for (int i=0; i != cursor.getCount() ; i++)
        {
            ArrayTipo[i]=""+cursor.getString(cursor.getColumnIndex("Tipo"));
            IdBD[i]=""+cursor.getString(cursor.getColumnIndex("id"));
            cursor.moveToNext();
        }
    bancoDados.close();
    }
    catch (Exception erro){
        MostraMensagem("Erro", "Ocorreu um erro ao consultar a Base de Dados: "+erro);
    }

    ArrayAdapter<String> adapter= new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,ArrayTipo);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spTipo.setAdapter(adapter);
}

public void Inicializa_Objectos(){
    etNome=(EditText) findViewById(R.idApiario.etNome);
    etNumero=(EditText) findViewById(R.idApiario.etNumero);
    etLocal=(EditText) findViewById(R.idApiario.etLocal);
    etLatitude=(EditText) findViewById(R.idApiario.etLatitude);
    etLongitude=(EditText) findViewById(R.idApiario.etLongitude);
    cbZona=(CheckBox) findViewById(R.idApiario.cbZona);
    spTipo=(Spinner) findViewById(R.idApiario.spTipo);
    etDataCria=(EditText) findViewById(R.idApiario.etDataCria);
    btGravar=(Button) findViewById(R.idApiario.btGravar);
    btAnular=(Button) findViewById(R.idApiario.btAnular);       
}

public void Listeners(){
    etDataCria.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            startActivity(new Intent(AlteraApiarios.this,MudaData.class));
        }
    });

    btAnular.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Prepara_Alteracao();
        }
    });

    btGravar.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

        }
    });
}

public void MostraMensagem(String Titulo, String Mensagem)
{
    AlertDialog.Builder msg =new AlertDialog.Builder(AlteraApiarios.this);
    msg.setTitle(Titulo);
    msg.setMessage(Mensagem);
    msg.setNeutralButton("OK", null);
    msg.show();
} 
```

}

# java - Java DatagramPacket 接收到的文本文件以 HEX 形式写出，并带有 0x00 数据填充

> ID：14941719
> 
> 赞同：1
> 
> 时间：2013-02-18T17:14:34.383
> 
> 标签：java, udp

对于家庭作业：我的任务是编写一个带有确认的 UDP 文件传输程序......基本上模拟 TCP。

我决定分阶段处理这项任务，并且很早就收到了文件问题。我发送一个带有字符“测试文件”的小文本文件，在另一端创建的文件包含匹配的 ascii HEX 值，填充为 0x00。

我希望收到的文件与发送的文件完全相同。

有人可以指出问题吗？

蒂亚

```
public class UDPRead{
    DatagramSocket socket;
    String filename, initString;
    byte[] buffer;
    DatagramPacket initPacket, receivedPacket;
    FileOutputStream fileWriter;
    int bytesReceived, bytesToReceive;

    public UDPRead(int port) throws IOException
    {

    socket = new DatagramSocket(port);
    buffer = new byte[512]; 

    initPacket = receivePacket();

    StringTokenizer token = new StringTokenizer(initString, "::");
    filename = token.nextToken();
    bytesToReceive = new Integer(token.nextToken()).intValue();

    //Send reply containing SEND to the sender
    send(initPacket.getAddress(), initPacket.getPort(), (new String("SEND")).getBytes());

    fileWriter = new FileOutputStream(filename);

    while(bytesReceived < bytesToReceive)
        {
        receivedPacket = receivePacket();
        fileWriter.write(receivedPacket.getData(), 0,  receivedPacket.getLength());
        bytesReceived = bytesReceived + receivedPacket.getLength();
        }
    }

    public DatagramPacket receivePacket() throws IOException{

    DatagramPacket packet = new DatagramPacket(buffer, buffer.length);
    socket.receive(packet);

    return packet;
    }

    public byte[] receiveData() throws IOException{

    DatagramPacket packet = new DatagramPacket(buffer, buffer.length);
    socket.receive(packet);

    return packet.getData();
    }

    public void send(InetAddress recv, int port,byte[] message)
       throws IOException {

       DatagramPacket packet = new DatagramPacket(message, message.length, recv, port);
       socket.send(packet);
   }    
} 
```

UDP发送

```
public UDPSend(InetAddress address, int port) throws IOException{
toPort = port;
toAddress = address;
msg = new byte[512];
buffer = new byte[512];
socket = new DatagramSocket();
socket.connect(toAddress, toPort);
}

@Override
public void sendFile(File theFile) throws IOException{

fileReader = new FileInputStream(theFile);
fileLength = fileReader.available();

send((theFile.getName()+"::"+fileLength).getBytes());

DatagramPacket reply = new DatagramPacket(buffer, buffer.length);
socket.receive(reply);

if (new String(reply.getData(), 0, reply.getLength()).equals("OK"))
    {
    while (currentPos<fileLength){
        bytesRead = fileReader.read(msg);
        send(msg);
        currentPos = currentPos + bytesRead;
    }
    System.out.println("  -- File transfer complete...");
    }
else{System.out.println("Recieved something other than SEND... exiting");}
}

private void send(byte[] message) throws IOException {
DatagramPacket packet = new DatagramPacket(message, message.length);
socket.send(packet);
}   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T17:46:36.730

我怀疑这至少是问题的一部分：

```
while (currentPos<fileLength){
    bytesRead = fileReader.read(msg);
    send(msg);
    currentPos = currentPos + bytesRead;
} 
```

你总是发送*整个*字节数组，即使只读取了一个字节。您的`send`方法应该接受要发送的字节数，并且应该使用`bytesRead`它来调用它：

```
send(msg, bytesRead);
...
private void send(byte[] message, int length) throws IOException {
    DatagramPacket packet = new DatagramPacket(message, length);
    socket.send(packet);
} 
```

诚然，这并不能解释为什么你会看到任何十六进制的东西......

# html - 如何将图像添加到固定导航栏？

> ID：14941721
> 
> 赞同：0
> 
> 时间：2013-02-18T17:14:56.677
> 
> 标签：html, css

我想将图像添加到大于其高度的固定导航栏。我如何将图像放在那里并添加边框而不被切断。我也想修复图像。

[关联](http://jsfiddle.net/2btrY/2/)

```
Thank you 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:18:28.523

设置图片的高度，浏览器会自动设置成比例的宽度

```
 <img src="images/myimage.jpg"  height="50px" /> 
```

在这里我放了 50px ，使用适合导航栏的任何内容

# c++ - Visual Studio 2008：C++ 的多态行为

> ID：14941723
> 
> 赞同：0
> 
> 时间：2013-02-18T17:15:03.410
> 
> 标签：c++, polymorphism

我试图了解 C++ 代码中的多态行为。看到以下程序的输出，我感到很惊讶。

以下代码的输出我期待在以下编程语句中出现一些编译错误/崩溃。但是这个程序的输出让我很惊讶。

```
p = (Class1*) &object3;
p->f();
p->g(); 
```

我不明白为什么。我正在使用 Visual Studio 2008。

代码片段。

```
#include "stdafx.h"
#include <iostream>

using namespace std;

class Class1
{
   public:
      virtual void f()
      {
    cout << "Function f() in Class1\n";
      }

     void g()
     {
    cout << "Function g() in Class1\n";
     }
 };

 class Class2
 {
    public:
   virtual void f()
   {
    cout << "Function f() in Class2\n";
   }

   void g()
   {
    cout << "Function g() in Class2\n";
   }
 };

class Class3
{
    public:

    virtual void h()
    {
    cout << "Function h() in Class3\n";
    }
  };

  int _tmain(int argc, _TCHAR* argv[])
  {
   Class1 object1, *p;
   Class2 object2;
   Class3 object3;

  p = &object1;

  p->f();
  p->g();

  p = (Class1*) &object2;

  p->f();
  p->g();

  p = (Class1*) &object3;

  p->f();
  p->g();

  //p->h();      Compilation error

  return 0;

   } 
```

输出/输出：

Class1 中的函数 f()

Class1 中的函数 g()

Class2 中的函数 f()

Class1 中的函数 g()

Class3 中的函数 h()

Class1 中的函数 g()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T17:22:46.473

您正在使用邪恶的 C 风格强制转换，在这种情况下等同于`reinterpret_cast`，来获取指向一个类的指针并假装它指向一个不相关的类。

> 我期待一些编译错误/崩溃

没有编译错误，因为您故意阻止编译器检查类型转换——这就是`reinterpret_cast`. 可能会发生崩溃或任何其他类型的未定义运行时行为。

在您的情况下，即使指针类型完全错误，类布局似乎也足以使虚函数调用成功。这并不奇怪，因为您的类定义都非常相似；但这在很大程度上是不能保证的行为，原则上它可能会以许多灾难性的方式失败。

If you want polymorphic behaviour, then `Class2` and `Class3` should inherit from `Class1`. The pointer conversions will then be valid with no cast, and the polymorphic behaviour will be well defined - `f()` will be dispatched virtually according to the object type, and `g()` non-virtually according to the pointer type.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T17:19:40.237

您的代码具有**未定义的行为**。

当程序具有未定义的行为时，一切都可能发生。您*可能*会发生崩溃，但这不是必需的。从第 1.3.24 段：

> [...] 允许的未定义行为的范围从完全忽略具有不可预测结果的情况，到在翻译或程序执行期间以环境特征的记录方式表现（有或没有发出诊断消息），到终止翻译或执行（发出诊断消息）。[...]

* * *

*为什么你有未定义的行为？*

您正在执行一个残酷的 C 风格强制转换（诉诸 a `reinterpret_cast<>`），将指向类型对象的`Class3`指针转换为指向类型对象的指针`Class1`。这是允许的，但行为未定义。

从 C++11 标准的第 5.2.10/7 段关于`reinterpret_cast<>`：

> **对象指针可以显式转换为不同类型的对象指针**.70 [..]

这使得显式强制转换是合法的。但是（同一段）：

> [...] 当类型为“指向 T1 的指针”的纯右值 v 转换为类型“指向 cv T2”的指针时，**如果 T1 和 T2 都是标准布局类型**（3.9 ) 并且 T2 的对齐要求不比 T1 更严格，或者如果任一类型为 void。[...]

您的类**不是**`Class1`标准`Class3`布局类型。根据第 9/7 段，事实上：

 **> 标准布局类是这样的类：
> 
> — 没有非标准布局类（或此类类型的数组）或引用类型的非静态数据成员，
> 
> —**没有虚函数**(10.3) 和虚基类 (10.1)，
> 
> [...]

因此，5.2.10/7 的第二部分适用：

> [...] 将“指向 T1 的指针”类型的纯右值转换为“指向 T2 的指针”类型（其中 T1 和 T2 是对象类型，并且 T2 的对齐要求不比 T1 的对齐要求更严格）并返回到它的原始类型产生原始指针值。**任何其他此类指针转换的结果都是未指定的**。

由于未指定转换该指针的结果，因此尝试对其调用函数会导致未定义行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T17:18:28.447

您的代码不是多态示例。您只是将对象指针相互转换。

您忘记了彼此扩展（继承）您的类，因为多态性与继承有关。

例如试试这个：

```
class Class1
{
   public:
      virtual void f()
      {
    cout << "Function f() in Class1\n";
      }

     void g()
     {
    cout << "Function g() in Class1\n";
     }
 };

 class Class2 : public Class1
 {
    public:
   virtual void f()
   {
    cout << "Function f() in Class2\n";
   }

   void g()
   {
    cout << "Function g() in Class2\n";
   }
 };

class Class3 : public Class2
{
    public:

    virtual void h()
    {
    cout << "Function h() in Class3\n";
    }
  }; 
```**

# python - 不知道这里出了什么问题。我确定这是正确的语法，并且我检查了拼写错误

> ID：14941725
> 
> 赞同：-2
> 
> 时间：2013-02-18T17:15:13.663
> 
> 标签：python

```
# Lists.
months = [6, 2, 2, 5, 0, 3, 5, 1, 4, 6, 2, 4]
weekdays = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]

# Functions for algorithm.
def yearcode(y):
    """generate year-code using algorithm"""
    y = y % 100
    y = y + (y / 4) % 7
    return round(y)

def monthcode(m):
    """get month number from month-list"""
    return months[monthin - 1]

def daycode(d):
    """simplify day number for efficiency"""
    return d % 7

# Inputs.
dayayin = int(input("What Day in the Month?"))
monthin = int(input("What Month? E.g.- January is 1"))
yearin = int(input("What Year?"))

# Define variables for functions.
yearout = yearcode(yearin)
monthout = monthcode(monthin)
dayout = daycode(dayin)

# Final Add-Up and Output.
result = (dayout + monthout + yearout) % 7
print(weekdays[result]) 
```

错误是：“ParseError: bad input on line 17” 这个程序的目的是给出任何日期的星期几。正如你所看到的，它对我如何为我的利益给出函数的目的并不满意。我真的觉得我在这里错过了一些东西。

这是改进和工作版本（感谢您的帮助！）

```
# Lists.
months = [6, 2, 2, 5, 0, 3, 5, 1, 4, 6, 2, 4]
weekdays = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday",  "Saturday"]

# Fruitful Functions for Algorithm.
def yearcode(y):
    """Year Code Generator Algorithm"""
    y = y % 100
    y = y + (y / 4) % 7
    return int(round(y))

def monthcode(m):
    """Retrieve Month Number from Month List"""
    return months[m - 1]

def daycode(d):
    """Simplify Day Input for Efficiency"""
    return d % 7

# Inputs.
dayin = int(input("What Day in the Month?"))
monthin = int(input("What Month? E.g.- January is 1"))
yearin = int(input("What Year?"))

# Define Variables for Functions.
yearout = yearcode(yearin)
monthout = monthcode(monthin)
dayout = daycode(dayin)

# Final Add-Up and Output.
result = int((dayout + monthout + yearout) % 7)
print(weekdays[result]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T17:17:45.633

由于混合空格和制表符的问题，您可能会遇到错误。尝试运行你的脚本

```
python -t yourscript.py 
```

看看它是否告诉你什么。

也许，只使用[`calendar`](http://docs.python.org/2/library/calendar.html#calendar.weekday)模块中的内置函数会更容易。

```
>>> import calendar
>>> calendar.weekday(2013,2,18)
0
>>> calendar.day_name[calendar.weekday(2013,2,18)]
'Monday' 
```

作为旁注，运行您的代码，我没有收到 ParseError ——我收到了`NameError`因为`dayin`未定义。也许你不是故意要命名的`dayayin`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:22:58.697

您应该在monthcode函数的主体中使用“m”而不是“monthin”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T17:25:29.413

我已经看到了一些简单的错误：

可能是使用变量`dayayin`而不是 拼写错误`dayin`

```
dayayin = int(input("What Day in the Month?"))
...
dayout = daycode(dayin) 
```

函数`monthcode`中，does`mothin`从何而来？

```
def monthcode(m):
    """get month number from month-list"""
    return months[monthin - 1] 
```

**编辑：** 修复这些后，并制作`result`一个整数

```
result = int((dayout + monthout + yearout) % 7) 
```

脚本运行，但您的代码中仍然存在一些错误。当我输入我的出生日期 (19/05/1978) 时，它会在星期四返回，但我是在星期五出生的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T19:40:08.767

我同意 BioGeek

> 脚本运行，但您的代码中仍然存在一些错误。当我输入我的出生日期 (19/05/1978) 时，它会在星期四返回，但我是在星期五出生的。

与几个在线计算器相比，您的工作版本似乎要休息一天。例如

```
What Day in the Month?19
What Month? E.g.- January is 15
What Year?1942
Monday 
```

但其他计算器显示为`Tuesday`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T17:21:32.787

您是否尝试过删除该行并手动重新输入？我经常看到人们，尤其是 Mac 用户，输入不可见的 Unicode 字符（如果我没记错的话，alt+空格）。这可能是您的问题的根源。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-18T18:55:19.943

正如我在另一个答案中指出的那样，当我输入我的出生日期时，它给出了错误的答案。

更具体地说，当您尝试 2013 年的日期时，您的代码会给出正确答案，但一旦您尝试将其用于更早或将来的日期，它返回错误答案的概率为 81.76%。其中，它没有考虑闰年，也没有补偿不是 21 世纪的日期。

试图找出你哪里出错了，我需要知道你使用的是哪种算法。谷歌搜索列表`[6, 2, 2, 5, 0, 3, 5, 1, 4, 6, 2, 4]`让我进入了[这个页面](http://www.kungfoomanchu.com/z-creations/mentalcalculationofdate.pdf)（pdf），它有非常详细的描述，但还有几个额外的步骤，然后你现在在你的算法中。

所以这是我对该算法的实现。从公历开始到 2300 年，我根据[mgilson](https://stackoverflow.com/users/748858/mgilson)`calendar`提供的解决方案检查了它。

```
import datetime
import calendar

months = [6, 2, 2, 5, 0, 3, 5, 1, 4, 6, 2, 4]
weekdays = ["Sunday", "Monday", "Tuesday", "Wednesday",
            "Thursday", "Friday", "Saturday", "Sunday"]
centuries = {17: 5,
             18: 3,
             19: 1,
             20: 0,
             21: -2,
             22: -4}

def day_of_week_biogeek(day, month, year):
    # This algorithm is only valid for the Gregorian calendar
    # which began on September 14, 1752.
    if year <= 1752 and month <= 9 and day < 14:
        raise RuntimeError("This algorithm is only valid for the Gregorian " + \  
                           "calendar which began on September 14, 1752.")
    if year >= 2300:
        raise RuntimeError("This algorithm is only valid for the Gregorian " + \
                           "calendar up till December 31, 2299.")

    # Take multiples of 28 from the the last 2 digits of the year
    y = divmod(year, 100)[1] % 28

    # Add a quarter of the nearest multiple of 4 below the number,
    y += divmod(y, 4)[0]

    # Take away 7 or multiples of 7\. This leaves us the year code
    y = y % 7

    # The code for the month from the table above
    m = months[month - 1]

    # If it is a leap year AND the month is January or February, subtract 1
    if is_leap_year(year) and month in [1,2]:
        m -= 1

    # Take away 7 or multiples of 7 from the day
    d = day % 7

    # Add the codes for the year, the month and the day
    result = y + m + d

    # Add 1 if the date is in the 1900s
    result += centuries[divmod(year, 100)[0]]

    # Take away 7 or multiples of 7
    result = result % 7

    # The final number indicates day of the week
    return weekdays[result]

def is_leap_year(year):
    # Leap years are the years evenly divisible by 4
    # unless it ends in 00 and is a multiple of 400
    if not year % 400:
        return True
    elif not year % 100:
        return False
    elif not year % 4:
        return True
    return False

# original code by user2080262
def yearcode(y):
    """Year Code Generator Algorithm"""
    y = y % 100
    y = y + (y / 4) % 7
    return int(round(y))

def monthcode(m):
    """Retrieve Month Number from Month List"""
    return months[m - 1]

def daycode(d):
    """Simplify Day Input for Efficiency"""
    return d % 7

def day_of_week_user2080262(dayin, monthin, yearin):
    yearout = yearcode(yearin)
    monthout = monthcode(monthin)
    dayout = daycode(dayin)
    result = int((dayout + monthout + yearout) % 7)
    return weekdays[result]

# alternate solution using builtin functions
def day_of_week_mgilson(day, month, year):
    """ See https://stackoverflow.com/a/14941764/50065"""
    c = calendar.weekday(year, month, day)
    return calendar.day_name[c]

def date_generator(day, month, year):
    """Convience function to return the next day"""
    d = datetime.date(year, month, day)
    while True:
        d += datetime.timedelta(days=1)
        yield d.day, d.month, d.year

if __name__ == '__main__':
    # checking all days from the beginning of the Gregorian
    # calender till 2300
    methods = {'user2080262': day_of_week_user2080262,
               'BioGeek': day_of_week_biogeek}
    for user, func in methods.items():
        checked = 0
        wrong = 0
        d = date_generator(14, 9, 1752)
        for day, month, year in d:
            checked += 1
            if year == 2300:
                break
            if func(day, month, year) != day_of_week_mgilson(day, month, year):
                wrong += 1
        print("The code by {0} gives a wrong answer ".format(user) + \ 
              "{0:.2f}% of the time.".format((float(wrong)/checked)*100)) 
```

# shell - TCSH 命令记录器

> ID：14941727
> 
> 赞同：1
> 
> 时间：2013-02-18T17:15:21.047
> 
> 标签：shell, logging, tcsh

每次在 shell 中输入命令时，有没有办法在 tcsh 中记录历史记录（并将其保存在 .history 文件中）？类似于此处为 bash 提供的解决方案： [Bash Command Logger](https://stackoverflow.com/questions/7193441/bash-command-logger)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:05:50.547

是的。有几个 shell 变量（由`set`命令指定，而不是环境变量）控制它的工作方式：

*   *history*指定在当前 shell 中将记住多少命令
*   *histfile*命名要保存历史的文件（默认为**~/.history**）
*   *savehist*指定将命令的历史记录到历史文件中

例如，您可以将以下内容放入您的`.tcshrc`文件中：

```
set history = 1000  # remember 1000 commands
set savehist = 100  # write the last 100 commands to $histfile
set histfile = "~/.my-history" 
```

此外，根据手册页，执行 a`history -S`将写入当前历史记录（由上述变量控制）。

注意：`history -S`对我来说，Mac OSX 的 10.8 似乎不太好用；它挂了壳

# python - os.fork() 会在写入时使用复制还是在 Python 中执行父进程的完整副本？

> ID：14941729
> 
> 赞同：9
> 
> 时间：2013-02-18T17:15:29.097
> 
> 标签：python, linux, fork

我想将一个相当大的数据结构加载到一个进程中，然后分叉以希望减少总内存消耗。会`os.fork`以这种方式工作还是复制 Linux (RHEL) 中的所有父进程？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-18T17:37:10.450

即使使用了 COW，CPython 也使用引用计数并将引用计数存储在每个对象的标头中。因此，除非您不对该数据进行任何操作，否则您很快就会对相关内存进行虚假写入，这将迫使系统复制数据。将其传递给函数？那是另一个引用，一个`INCREF`，一个对 COW 内存的写入。将其存储在变量或对象属性中？相同的。哪怕只是查找一个方法就可以了？同上。由于各种原因，一些内置数据结构将它们的大部分数据与对象（例如大多数集合）分开分配。如果这些最终出现在不同的页面上——或者任何粒度的 COW 工作——你可能会很幸运。但是，从这样的集合中引用的对象也不例外——使用它来操作它的引用计数是一样的。

此外，将共享一些数据，因为没有设计写入它（例如，本机 CPython 代码），并且您`fork`的进程未触及的某些对象*可能*是共享的（老实说，我不确定；我*认为*循环 GC 不会写入对象）。但是 Python 代码使用的 Python 对象几乎可以保证被写入。类似的推理适用于 PyPy、Jython、IronPython 等（只是它们在对象头中摆弄位而不是进行引用计数），尽管我不能保证所有可能的配置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T17:23:20.047

如果您在 *nix 系统上，那么`os.fork()`将使用系统`fork()`调用，至少在 Linux 的情况下，它是写时复制：

[http://linux.die.net/man/2/fork](http://linux.die.net/man/2/fork)

见“注释”部分

# css - 切换具有悬停状态的类，保持旧状态一段时间

> ID：14941733
> 
> 赞同：2
> 
> 时间：2013-02-18T17:15:36.613
> 
> 标签：css, css-animations

我基本上有一个可以通过单击来选择或取消选择的区域。它有一个未选中状态，它有一个与选中状态相匹配的悬停状态，因此用户可以获得有关单击它的视觉提示。

同样，当被选中时，悬停状态与未选中状态匹配。

这是一个选择为“绿色”的示例：

```
.clicker { //standard state
    width: 100px;
    height: 100px;
    background-color: red;
}

.clicker:hover {
    background-color: green;
}

.green { // selected state
    background-color: green;
}

.green:hover {
    background-color: red;
} 
```

问题是，当用户单击时，它会立即从未选中悬停变为选中悬停，因此看起来有点像他们未单击它。

我希望该项目在短时间内保持旧的悬停状态，即未选中（红色），悬停并变为绿色，单击它，后台的jQuery添加了选中/绿色状态，但尽管如此该区域保持绿色一秒钟，而不是立即进入选定的悬停状态（即显示红色）。

我考虑过使用简单的（非）动画，例如：

```
@keyframes holdGreen {
    0% {
        background-color: green;
    }
    99% {
        background-color: green;
    }
    100% {
        background-color: red;
    }
} 
```

在某处放置

```
animation: holdGreen
animation-duration: 1s 
```

当我单击一个选定的取消选择时，还有一个类似的 holdRed。

如果它只是一个具有悬停状态的类，这将可以正常工作，但是当完全更改/添加也具有悬停状态的类时它不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:17:32.887

像这样的东西可以工作吗？

```
jQuery(document).ready(function($) {
    var selected = false;
    $('.clicker').click(function(){
        selected = true;
        $(this).addClass('selected');
    });
    $('.clicker').mouseout(function(){
        if(selected == true) { $(this).addClass('selectedHover') };
    });
}); 
```

然后你会有一个看起来像这样的类：

```
.selectedHover:hover { background: red; } 
```

基本上所有发生的事情是，控制处于“选定”状态的项目的悬停效果的类仅在用户鼠标在激活项目后离开项目后才被应用。

基本示例：http: [//jsfiddle.net/KfHPJ/10/](http://jsfiddle.net/KfHPJ/10/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T23:39:26.890

我认为您将需要使用 JavaScript 解决方法。查看这个实现您的想法的小提琴[http://jsfiddle.net/chrisdanek/SK3Vc/](http://jsfiddle.net/chrisdanek/SK3Vc/)（仅出于示例目的使用 webkit 前缀，因此请查看 Chrome）。您会注意到它在单击时按预期运行，但默认悬停操作存在问题 - 应用背景颜色存在延迟。

```
.clicker { width: 100px; height: 100px; border: 2px solid; background-color: red; }

.clicker:hover { background-color: green; -webkit-animation-name: holdRed; -webkit-animation-duration: 1s; }

.green { background-color: green; animation: none; }

.green:hover { background-color: red; -webkit-animation-name: holdGreen; -webkit-animation-duration: 1s; }

@-webkit-keyframes holdGreen { 0% { background-color: green; }
  99% { background-color: green; }
  100% { background-color: red; } }

@-webkit-keyframes holdRed { 0% { background-color: red; }
  99% { background-color: red; }
  100% { background-color: green; } } 
```

# c# - ReportCompleted 后共享目标合约 chrash

> ID：14941735
> 
> 赞同：2
> 
> 时间：2013-02-18T17:15:46.453
> 
> 标签：c#, windows, windows-runtime, share, windows-store-apps

我在 Windows 8 商店应用程序中实现共享目标合同时遇到问题。

我正在共享目标中进行文件上传。点击我的分享按钮后，我开始：

```
_shareArgs.ShareOperation.ReportStarted();
_shareArgs.ShareOperation.ReportSubmittedBackgroundTask(); 
```

然后上传文件并等待他们的任务。之后我打电话：

```
ShareOperation.ReportCompleted 
```

当我使用调度程序调用 reportcompleted 时，只要 UI 保持打开状态，共享 cotnract 就不会引发异常。如果没有调度程序，它会崩溃：

> 由于窗口正在关闭，操作无法完成。（HRESULT 异常：0x802A0201）

当 UI 关闭时，它总是会因此异常而崩溃。

抛出异常，添加 buttonclick 事件处理程序的右括号。

关于这个有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T15:41:28.960

该错误表明您正在更新`Page`您调用后共享操作显示的内容`ReportCompleted`。当`ReportCompleted`关闭该页面所在的窗口时，这将导致您的错误。

如果您在关闭包含窗口后触摸用户界面上的任何内容，则会遇到相同的错误。

# jquery - 在 IE8 中更改月/年时 JQuery 日期选择器关闭

> ID：14941738
> 
> 赞同：1
> 
> 时间：2013-02-18T17:16:14.043
> 
> 标签：jquery, internet-explorer-8

我有一个 jQuery 日期选择器的问题，它可以在 Chrome 或 IE9 中正常工作，但是在 IE8 中，只要有人单击顶部的月/年更改箭头或选择一个日期，它就会关闭，它会关闭并显示当前选择的月份内的随机日期（当前问题选择了 18 日，但我看到它也选择了其他日期 - 除了实际点击的日期）。我们在整个产品中使用 jQuery 1.8.0 和其他框架（下划线和敲除），但其他框架没有在其他页面上使用

这是一个内部系统，所以它并没有被广泛使用，但不幸的是，我们的用户只能使用 IE8，因为他们在 Windows XP 上，并且我们的网络管理员不允许使用 Chrome。因此，虽然我可以调试它并看到它在 IE9 或 Chrome 中运行，但这对我们的用户没有帮助。

JS代码：

```
$(function () {
    $('.date-field').each(function () {
        var $this = $(this);
        if ($this.data('bound'))
            return;
        $this.datepicker({
            format: 'dd-mm-yyyy'
        }).data('bound', true);
    });
}); 
```

html代码：

```
<input type="text" class="span3 date-field" name="FromDate"> 
```

许多页面中还有其他 Javascript，以及相关页面中的其他功能，但粘贴的内容太多，在这种情况下，调试 javascript 时不会向任何控制台（IE8/9 或 Chrome）抛出错误 -它只是在单击任何内容而不设置值时关闭日期选择器。

我有点困惑 - 我已经四处搜索，虽然我可以找到关闭日期选择器的其他问题，但它们通常在它们周围没有关闭，并且其中一些似乎在正确的轨道上没有得到回答。我也尝试将 jQuery 版本升级到 1.9.0，但没有任何区别 - 问题和行为仍然存在。

我已经设置了一个 jsFiddle - [http://jsfiddle.net/mCVaY/7/](http://jsfiddle.net/mCVaY/7/) - 它封装了问题，但是 - 令人恼火的是 - jsFiddle 似乎在 IE8 下不起作用......（或者我做错了 -它是 IE9 中的 IE8 标准/浏览器模式，我必须使用它进行测试，因为我使用的是 Win 7 而不是 XP ...)

收到任何帮助，如果我可以提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:33:38.940

这取决于 datepicker 引导程序，它已包含在项目中，我没有注意到，而不是 jQuery datepicker。这就解释了为什么使用 format 属性而不是 dateFormat 来设置显示日期的格式，以及为什么很难找到问题的答案！

他们的论坛上有一个与同一问题有关的问题：[https ://github.com/eternicode/bootstrap-datepicker/issues/144](https://github.com/eternicode/bootstrap-datepicker/issues/144)

更新到他们的最新版本解决了这个问题。

# ravendb - 转换结果

> ID：14941739
> 
> 赞同：7
> 
> 时间：2013-02-18T17:16:18.887
> 
> 标签：ravendb, indexing

我的同事问我，如果给出[orderline](http://ravendb.net/docs/theory/document-structure-design)示例，是否可以初始化如下所示的视图模型：

```
OrderViewModel
   string OrderId
   string CustomerName
   List<OrderLineViewModel> OrderLines

OrderLineViewModel
   string ProductName
   string ROI
   int Quantity 
```

从索引？

我尝试进行转换以成功加载客户名称，但永远无法从订单行中获取相关的产品信息。这可以通过转换来完成，还是我需要从索引字段进行投影？

干杯，

詹姆士

**编辑：**

我们正在尝试直接从查询中填充视图模型。我们尝试了以下索引：

```
public class OrdersViewIndex : AbstractIndexCreationTask<Order>
{
   Map = orders => from order in orders
                   select new {
                                OrderId = order.id
                              };

   Transform = (database, orders) => from order in orders
                                     let customer = database.Load<Customer>(order.customerId)
                                     select new {
                                                  OrderId = order.id,
                                                  CustomerName = customer.Name,
                                                  OrderLines = // This is where I struggled to answer my colleagues questions as i'd need to load product name.
                                                }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-18T23:05:59.680

首先，要意识到所有索引都会自动将 映射`Id`到一个名为 的索引条目中`__document_id`。所以再次映射它并没有太大的价值。您在此索引映射中所做的只是将其再次复制到另一个名为`OrderId`.

其次，要了解转换并不是真正的索引的一部分，而只是附加到索引定义并在运行时执行。他们真正提供的只是一种在服务器上改变查询结果的方法。在大多数情况下，这些都是您可以在客户端执行的操作。

第三，索引用于查询非 id 字段，并提供[可能陈旧](http://ravendb.net/docs/client-api/querying/stale-indexes)但[最终一致](http://en.wikipedia.org/wiki/Eventual_consistency)的结果。当您通过文档`Id`（也称为*文档键*）检索文档时，使用索引根本没有意义。您想改用该`.Load()`方法，它提供[ACID](http://ravendb.net/docs/2.0/client-api/basic-operations/loading-editing-existing-document)保证，并且只从数据库中检索文档。

现在 - 当您的文档只有客户 ID 时，您遇到了如何获取客户名称的问题，以及如何获取产品名称而不仅仅是产品 ID。假设您的文档如下所示：

```
public class Order
{
    public string Id { get; set; }
    public string CustomerId { get; set; }
    public List<OrderLine> OrderLines { get; set; }
}

public class OrderLine
{
    public string ProductId { get; set; }
    public int Quantity { get; set; }
}

public class Customer
{
    public string Id { get; set; }
    public string Name { get; set; }
}

public class Product
{
    public string Id { get; set; }
    public string Name { get; set; }
} 
```

如果您使用其 id 检索单个订单，您将执行以下操作：

```
var order = session.Load<Order>(theOrderId); 
```

但是现在你想填充一些像这样的视图模型：

```
public class OrderVM
{
    public string OrderId { get; set; }
    public string CustomerId { get; set; }
    public string CustomerName { get; set; }
    public List<OrderLineVM> OrderLines { get; set; }
}

public class OrderLineVM
{
    public string ProductId { get; set; }
    public string ProductName { get; set; }
    public int Quantity { get; set; }
} 
```

您可以使用[Includes](http://ravendb.net/docs/client-api/querying/handling-document-relationships#includes)来执行此操作。

```
var order = session.Include<Order>(x => x.CustomerId)
                   .Include<Order>(x => x.OrderLines.Select(y => y.ProductId))
                   .Load<Order>(theOrderId);

var orderViewModel = new OrderVM
{
    OrderId = order.Id,
    CustomerId = order.CustomerId,
    CustomerName = session.Load<Customer>(order.CustomerId).Name,
    OrderLines = order.OrderLines.Select(x => new OrderLineVM
                 {
                     ProductId = x.ProductId,
                     ProductName = session.Load<Product>(x.ProductId).Name,
                     Quantity = x.Quantity
                 })
}; 
```

尽管看到多次调用`session.Load()`，实际上只有一次调用数据库。`.Include`声明确保所有相关文档都在第一次调用时加载到会话中。随后的调用只是将其拉出本地会话。

以上所有内容都是为了通过其 id 检索单个订单。相反，如果您想获取所有订单，或获取特定客户的所有订单 -*那么*您需要查询。

对特定客户订单的动态查询如下所示：

```
var results = session.Query<Order>().Where(x => x.CustomerId == theCustomerId); 
```

如果您想将这些投影到您的视图模型，就像您可以使用之前一样，包括：

```
var results = session.Query<Order>()
    .Customize(x => x.Include<Order>(y => y.CustomerId)
                     .Include<Order>(y => y.OrderLines.Select(z => z.ProductId)))
    .Where(x => x.CustomerId == theCustomerId)
    .Select(x => new OrderVM
    {
        OrderId = x.Id,
        CustomerId = x.CustomerId,
        CustomerName = session.Load<Customer>(x.CustomerId).Name,
        OrderLines = order.OrderLines.Select(y => new OrderLineVM
        {
            ProductId = y.ProductId,
            ProductName = session.Load<Product>(y.ProductId).Name,
            Quantity = y.Quantity
        })
    }); 
```

这确实有效，但您可能不想每次都写这个。此外，必须在会话中加载整个产品和客户记录，而您只需要每个字段中的一个字段。这是转换可能有用的地方。您可以按如下方式定义静态索引：

```
public class Orders_Transformed : AbstractIndexCreationTask<Order>
{
    public Orders_Transformed()
    {
        Map = orders => from order in orders select new { };

        TransformResults = (database, orders) =>
            from order in orders
            select new
            {
                OrderID = order.Id,
                CustomerID = order.CustomerId,
                CustomerName = database.Load<Customer>(order.CustomerId).Name,
                OrderLines = order.OrderLines.Select(y => new
                    {
                        ProductId = y.ProductId,
                        ProductName = database.Load<Product>(y.ProductId).Name,
                        Quantity = y.Quantity
                    })
            };
    }
} 
```

现在，当您查询时，转换已经为您设置了数据。您只需指定要投影到的结果 VM。

```
var results = session.Query<Order, Orders_Transformed>().As<OrderVM>(); 
```

您可能已经注意到我在索引映射中根本没有包含任何字段。那是因为我没有尝试查询任何特定字段。所有数据都来自文档本身——索引中唯一的条目是自动添加的`__document_id`条目，Raven 使用这些条目来呈现来自文档存储的数据——用于返回或转换。

现在假设我想通过这些相关字段之一进行查询。例如，我想获取名为 Joe 的客户的所有订单。为此，我需要在索引中包含客户名称。RavenDB 2.0 添加了一项功能，使这变得非常容易——[索引相关文档](http://ravendb.net/docs/client-api/querying/static-indexes/indexing-related-documents)。

您将需要修改索引映射以使用该`LoadDocument`方法，如下所示：

```
Map = orders => from order in orders
                select new
                {
                    CustomerName = LoadDocument<Customer>(order.CustomerId)
                }; 
```

如果您愿意，您可以将其与 Includes 或 Transform 技术结合起来以获取完整视图模型。

另一种技术是[从索引存储这些字段和项目](http://ravendb.net/docs/client-api/querying/results-transformation/project-from-index-fields-into)。这对于像 . 这样的单个字段非常有效`CustomerName`，但对于像`OrderLines`.

最后，要考虑的另一种技术是[反规范化](http://ravendb.net/docs/client-api/querying/handling-document-relationships#denormalization)。考虑一下，a`Product`的名称可能已更改或被删除。您可能不想使以前的订单无效。将与订单相关的任何产品数据复制到`OrderLine`对象中是个好主意。

```
public class OrderLine
{
    public string ProductId { get; set; }
    public string ProductName { get; set; }
    public decimal Price { get; set; }
    public int Quantity { get; set; }
} 
```

一旦你这样做了——你在检索订单时不再需要加载产品数据。Transform 部分变得不必要了，您只剩下一个简单的索引投影，如下所示：

```
public class Orders_ByCustomerName : AbstractIndexCreationTask<Order>
{
    public Orders_ByCustomerName()
    {
        Map = orders => from order in orders
                        select new
                        {
                          CustomerName = LoadDocument<Customer>(order.CustomerId).Name
                        };

        Store("CustomerName", FieldStorage.Yes);
    }
} 
```

您可以通过以下方式轻松查询：

```
var results = session.Query<OrderVM, Orders_ByCustomerName>()
                     .Where(x => x.CustomerName == "Joe")
                     .As<OrderVM>(); 
```

请注意，在查询中，我第一次指定`OrderVM`时，我正在定义索引条目的形状。它只是设置了 lambda，所以我可以指定`x.CustomerName == "Joe"`. 通常，您会看到用于此目的的特殊“结果”类。这真的没关系 - 我可以使用任何具有`CustomerName`字符串字段的类。

当我指定时`.As<OrderVM>()`——这就是我实际从一个`Order`类型转移到一个`OrderVM`类型的地方——并且该`CustomerName`字段随之而来，因为我们为它打开了字段存储。

**TL;博士**

RavenDB 有很多选择。尝试找出适合您需求的方法。正确的文档设计和谨慎使用[索引相关文档](http://ravendb.net/docs/client-api/querying/static-indexes/indexing-related-documents)将`LoadDocument()`最常消除对索引转换的需要。

# c++ - 从 char *buffer 中的数字获取 int

> ID：14941740
> 
> 赞同：0
> 
> 时间：2013-02-18T17:16:19.437
> 
> 标签：c++, c

如何将缓冲区中的数字 char 转换为 int。

我用：

```
char *buffer = somebuffer;
int number;
number = int(buffer[i]); // pointer to a number stored as a char 
```

但是，这会返回十进制代码（例如 if `buffer[i] = '2'`, `number = 50`）。

如何将此字符数解释为 int？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T17:19:08.257

您可以从字符代码中减去您的字符代码`0`（数字的字符代码是连续的，从 0 (ascii 48) - 9 (ascii 57) 运行）。请务必先使用`isdigit`检查字符是否超出范围`'0'`-`'9'`

```
int num = 0;
if (isdigit(buffer[i]) {
    num = buffer[i] - '0';
} 
```

# java - 如何安全地将线程生命周期绑定在一起，涉及 SQLite

> ID：14941741
> 
> 赞同：0
> 
> 时间：2013-02-18T17:16:23.293
> 
> 标签：java, multithreading, sqlite, termination

抱歉标题我真的不知道如何将问题放入标题中，如果有人可以更好地提出问题，请更正它！

所以无论如何，在我的程序中，我有 2 个线程，一个是主程序，运行 GUI 以及与用户有关的所有内容，当它创建时，它创建一个线程，仅用于检查网站以查看是否有任何更新可用到程序使用的 SQLite 数据库，如果有，它会以 JSON 格式提取信息，然后必须使用插入查询更新数据库（这显然是通过围绕数据库解析器的同步方法完成的，以确保用户'在更新数据库时不访问数据）。这一切都很好。

但是，当程序关闭并且主类终止时，更新线程也必须尽快停止，但是它可能需要停止与数据库交互并关闭它，以及中断自身。我认为我需要中断线程并在数据库打开时关闭数据库，但是如何在主线程死后立即触发它？它不使用循环，所以我无法检查 thread1 是否还活着......

这是迄今为止更新程序的重要代码：

```
public static class AutomaticUpdater extends Thread
{
    DictionaryGUI pGUI;
    DatabaseParser pParser;

    public void run()
    {
        Updater pUpdater = new Updater (pParser, pGUI, true); //the manual updater is used to process the data
        for (String sURL : getURLs()) //getURLS() returns areas in the website that contain relevant data
        {
            pUpdater.process(getData(sURL)); //create the INSERT statements and send to database
        }
    }
} 
```

那么当主线程死亡时，我如何确保更新程序死亡？被 JVM 杀死的线程是否会抛出异常或进行任何类型的清理函数调用，我可以覆盖以杀死更新程序并关闭数据库？

**编辑**：好的，我找到了解决方案，但我仍然愿意接受更好的想法......

这是附加到 GUI 的 JFrame 的：

```
private class ProgramCleaner implements WindowListener
{
    public void windowClosing(WindowEvent e)
    {
        MainLauncher.pAutoUpdater.kill();
    }

    public void windowActivated(WindowEvent e) {}
    public void windowClosed(WindowEvent e) {}
    public void windowDeactivated(WindowEvent e) {}
    public void windowDeiconified(WindowEvent e) {}
    public void windowIconified(WindowEvent e) {}
    public void windowOpened(WindowEvent e) {}
} 
```

其中 kill 中断更新程序并确保数据库已关闭：D

**编辑2 ：似乎当GUI关闭时，程序几乎总是在所有清理完成****后**发出InterruptedException ，我用一些调试语句证明了这一点，而且我发送错误的调试文件没有选择它up （即程序完全关闭）并且异常的堆栈跟踪从不谈论我的代码或与此相关的任何内容：

```
Exception while removing reference: java.lang.InterruptedException
java.lang.InterruptedException
    at java.lang.Object.wait(Native Method)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    at sun.java2d.Disposer.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

有人知道为什么会这样吗？wait 在我的代码中实际上从未被称为，所以它必须是别的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:25:16.783

最简单的方法是在启动之前创建`AutomaticUpdater`一个*守护线程：*

```
AutomaticUpdater au = new AutomaticUpdater();
au.setDaemon(true);
au.start(); 
```

将线程设置为*守护*线程意味着它将在程序中的所有用户级线程终止后立即终止。Main 是一个用户级线程，所以如果它是您在程序中运行的唯一用户级线程，那么这应该可以工作。你不会收到任何通知，你的更新线程只会默默地死去（我假设这就是你想要的）。

第二种选择是在代码中的某处放置一个布尔值，告诉更新线程何时停止。您可以在更新程序的 for 循环中检查该布尔值，并在布尔值切换为 false 时立即返回。

```
boolean running = true; //somewhere near the top of your class

...

//main launches the updater thread here

...

//inside updater's run() method:
for (String sURL : getURLs()){
    if(!running) return;
    pUpdater.process(getData(sURL));
} 
```

**编辑**

这一切都假定您为访问数据库而调用的库不运行它们自己的用户级线程。如果他们这样做了，那么您将需要在代码中的某处明确停止这些线程，以使这些解决方案中的任何一个都可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:27:13.757

你应该：

1.  考虑使用[调度的 executor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html)或[timer](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html)或[Quartz](http://quartz-scheduler.org/)，而不是滚动您自己的周期性处理器。使用计划服务，您可以调用`shutdownNow`，使用计时器任务，您可以调用`cancel`以尝试停止当前和未来的作业。

如果您决定坚持当前的设计，那么您应该：

1.  在更新程序上设计一个显式关闭方法，并在退出应用程序之前从主线程调用它。
2.  实施`Runnable`，而不是扩展`Thread`

# xcode - 使用 Worklight iOS Native API 时出现与 Worklight 相关的错误

> ID：14941744
> 
> 赞同：0
> 
> 时间：2013-02-18T17:16:26.307
> 
> 标签：xcode, ibm-mobilefirst

尝试使用 iOS 本机 API 连接到 Worklight 时，我在 Xcode 中遇到错误：

```
[ERROR] Worklight: +[WLCookieManager persistentStoreCoordinator]:326::Unresolved error creating persistent store Error Domain=NSCocoaErrorDomain Code=134130 "The operation couldn’t be completed. (Cocoa error 134130.)" UserInfo=0x1e59d0d0 {URL=/iPhone%20Simulator/6.1/Applications/2C2E0482-7F42-4574-B998-A9FB5479F4B1/Library/Application%20Support/Cookies.sqlite, metadata={
    NSPersistenceFrameworkVersion = 419;
    NSStoreModelVersionHashes =     {
        Cookie = <3c2e440d 9fb3ea81 60146cf8 2bcb8ffe 10b2df20 0d907eea 018c6ade eeefb9c7>;
        UserDictionaryEntry = <f0c9025b 602122f9 37a4e274 bdaacec1 b9a66f83 fca5c43b bed5e80a 6baee338>;
    };
    NSStoreModelVersionHashesVersion = 3;
    NSStoreModelVersionIdentifiers =     (
        ""
    );
    NSStoreType = SQLite;
    NSStoreUUID = "0F344BFF-833C-4009-9867-13973A5291F1";
    "_NSAutoVacuumLevel" = 2;
}, reason=Can't find model for source store}, {
    URL = "file:///iPhone%20Simulator/6.1/Applications/2C2E0482-7F42-4574-B998-A9FB5479F4B1/Library/Application%20Support/Cookies.sqlite";
    metadata =     {
        NSPersistenceFrameworkVersion = 419;
        NSStoreModelVersionHashes =         {
            Cookie = <3c2e440d 9fb3ea81 60146cf8 2bcb8ffe 10b2df20 0d907eea 018c6ade eeefb9c7>;
            UserDictionaryEntry = <f0c9025b 602122f9 37a4e274 bdaacec1 b9a66f83 fca5c43b bed5e80a 6baee338>;
        };
        NSStoreModelVersionHashesVersion = 3;
        NSStoreModelVersionIdentifiers =         (
            ""
        );
        NSStoreType = SQLite;
        NSStoreUUID = "0F344BFF-833C-4009-9867-13973A5291F1";
        "_NSAutoVacuumLevel" = 2;
    };
    reason = "Can't find model for source store";
} 
```

当我尝试调用此行时会发生这种情况：

```
[[WLClient sharedInstance] wlConnectWithDelegate:connectListener]; 
```

它工作正常，我能够毫无问题地连接到我的 Worklight 服务器，但现在它一直抛出此错误。我所做的唯一更改是尝试从应用程序中显示一个对话框。还原此更改后，我仍然收到错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:38:44.430

当您的应用程序包中未内置所有所需文件时，就会发生这种情况。在您的应用程序的构建目标中，确保属于 Worklight 本机 SDK 的所有（非源）文件都出现在“复制文件”部分中。这是[文档的链接](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/index.jsp?topic=/com.ibm.worklight.help.doc/devref/t_copying_native_api_files_for_ios.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:42:15.717

您是否在 Web 应用程序中更改了应用程序现在尝试保存 cookie 的内容？或者让一个传给它。看起来 WL 正在尝试存储 cookie，但进展不顺利。您可以隔离触发此事件的应用程序部分吗？是否编译。看看这段代码可能是如何被使用的：

[http://mobile.tutsplus.com/tutorials/iphone/core-data_schema-versioning-and-lightweight-migrations/](http://mobile.tutsplus.com/tutorials/iphone/core-data_schema-versioning-and-lightweight-migrations/) [http://46424.com/question/133999#.USJnGVprP4Y](http://46424.com/question/133999#.USJnGVprP4Y)

# singleton - 如何将 JBoss Singleton 服务从 JBoss AS 6 迁移到 JBoss AS 7？

> ID：14941745
> 
> 赞同：2
> 
> 时间：2013-02-18T17:16:28.457
> 
> 标签：singleton, ejb, jboss7.x, jboss6.x

我们在 JBoss AS 6 上实现了一些服务作为我们希望迁移到 JBoss AS 7 的单例服务。

这些服务在 EJB 包中的 jboss-service.xml 文件中声明，代码如下：

```
<mbean name="some.cool.package:service=SomeService-controller" code="org.jboss.ha.singleton.HASingletonController">

    <attribute name="HAPartition"><inject bean="HAPartition" /></attribute>
    <attribute name="TargetName">scod:service=SomeService</attribute>
    <attribute name="TargetStartMethod">startWatcher</attribute>
    <attribute name="TargetStopMethod">stopWatcher</attribute>

 </mbean> 
```

好吧，当我们尝试在 JBoss 7 上部署它时，我们看到一个巨大的`ClassNotFoundException`告诉我们该类`org.jboss.ha.singleton.HASingletonController`不存在。在 JBoss AS 7 上确实没有。

所以这是我的问题：我们如何将其迁移到较新的版本？哪个类充当这一类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:04:23.947

有一个*官方*的例子：

[http://www.jboss.org/jdf/quickstarts/jboss-as-quickstart/cluster-ha-singleton/](http://www.jboss.org/jdf/quickstarts/jboss-as-quickstart/cluster-ha-singleton/)

[https://github.com/jboss-jdf/jboss-as-quickstart/tree/jdf-2.1.0.Final/cluster-ha-singleton](https://github.com/jboss-jdf/jboss-as-quickstart/tree/jdf-2.1.0.Final/cluster-ha-singleton)

# python - 无法使用 popen 启动两个交互式 shell

> ID：14941749
> 
> 赞同：2
> 
> 时间：2013-02-18T17:16:39.100
> 
> 标签：python, bash, subprocess, popen

我有以下 Python 代码段，无法解释为什么它的行为方式如此。

```
import subprocess  
bash1 = subprocess.Popen(["/bin/bash","-l", "-i"], stdin=subprocess.PIPE)  
print "Checkpoint 1"  
bash2 = subprocess.Popen(["/bin/bash","-l", "-i"], stdin=subprocess.PIPE)  
print "Checkpoint 2"  
bash1.communicate("echo 'works1'")  
bash2.communicate("echo 'works2'")  
print "OK" 
```

当我运行它时，我得到以下输出：

```
[user@localhost ~]$ python test.py  
Checkpoint 1  
Checkpoint 2  
[1]+  Stopped                 python test.py
[user@localhost ~]$ [user@localhost ~]$ echo 'works1'  
works1  
[user@localhost ~]$ logout  
[user@localhost ~]$ fg    
python test.py  
[user@localhost ~]$ echo 'works2'  
works2  
[user@localhost ~]$ logout 
OK  
[user@localhost ~]$ 
```

1.  为什么 Python 进程在第二次 Popen 调用时停止？（由 tty 输入停止），以及如何避免它？
2.  为什么在 echo 'works1' 完成后我会收到注销消息，以及如何避免它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:05:35.133

对问题 1 的回答：

这是因为交互式 bash shell 需要连接到终端（“控制终端”）并获取它以处理作业控制中断（例如 Control-Z）。第二次调用尝试获取终端但不能，因此被暂时挂起。

回答问题 2：

`communicate`将其参数写入子进程的标准输入管道，然后关闭它。Bash 在其标准输入用尽时终止（就像在 bash 终端会话中输入 Control-D 一样）。

如果要保持 bash 子进程运行，则直接写入其标准输入，而不是`communicate`如下使用：

```
bash1.stdin.write("echo 'works1'\n") 
```

顺便说一句，如果您希望命令实际执行，您确实需要添加换行符。

一个解法：

如果要运行两个或多个交互式 shell，则应将每个 shell 的标准输入设置为[伪终端](http://docs.python.org/2/library/pty.html)而不是子进程 PIPE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T15:29:26.560

根据isedev提示，我打开了2个伪终端。重要的是主进程（这个python脚本）在主PTY文件上读写，而子子进程使用从文件作为stdin、stdout和stderr。代码的底部仅用于测试一切如何工作。

```
import subprocess
import os
import pty
import select
import time

# according to> http://fleckenzwerg2000.blogspot.com/2011/10/running-and-controlling-gnu-screen-from.html
(master1, slave1) = pty.openpty()
bash1 = subprocess.Popen(["bash", "-l", "-i"], stdin=slave1, stdout=slave1, stderr=slave1)
(master2, slave2) = pty.openpty()
bash2 = subprocess.Popen(["bash", "-l", "-i"], stdin=slave2, stdout=slave2, stderr=slave2)
data = "echo 'bla'\n"

## taken from> http://stackoverflow.com/questions/14564904/how-to-send-tab-key-to-python-subprocesss-stdin
def write_all(masterPTY, data):
    """Successively write all of data into a file-descriptor."""
    while data:
        chars_written = os.write(masterPTY, data)
        data = data[chars_written:]
    return data

def read_all(masterPTY):
    r,w,x = select.select([masterPTY], [], [], 10)
    if r:
        data = os.read(masterPTY, 1024)
        return data

write_all(master1, "echo 'bla1'\n")
write_all(master2, "echo 'bla2'\n")
time.sleep(1)
print read_all(master1)
write_all(master1, "echo 'bla1'\n")
time.sleep(1)

print read_all(master2)

time.sleep(1)

os.close(master1)
os.close(slave1)
os.close(master2)
os.close(slave2)

bash1.terminate()
bash2.terminate()

print "OK" 
```

这就对了。希望它可以帮助某人！

# gwt - GWT 表添加条目行

> ID：14941753
> 
> 赞同：0
> 
> 时间：2013-02-18T17:16:59.077
> 
> 标签：gwt, datagrid

我是 GWT 的新手，正在尝试创建一个表格来显示我的数据。我开始使用数据网格（因为我想要数据网格展示示例中的分层标题）。我的另一个要求是顶行是一个专用的“添加条目行”，即它是空行，其中单元格包含可以由用户完成的输入框，最后一列包含一个“添加”按钮来添加已完成的项目到数据集。表格中的所有其他数据都是不可编辑的，一旦单击“添加”行按钮，“添加条目行”的内容将写入永久表格内容，“添加条目行”被清除。

由于我是 GWT 的新手，我想我会检查是否有一种简单的方法可以实现此功能？或者任何人都可以就如何最好地实现这一点提供建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:33:59.900

点击`ADD`按钮后。

使用这些值创建`YourObject`，然后您可以将一条记录添加到`listdata`

这是填充你的`DataGrid.`

通过使用以下代码，您可以实现：

```
//TO DO  create `yourObject` here with new values 
ListDataProvider.getList.Add(yourObject);
ListDataProvider.refresh(); 
```

# javascript - 多次滚动容器 div

> ID：14941756
> 
> 赞同：0
> 
> 时间：2013-02-18T17:17:08.917
> 
> 标签：javascript, css, html, containers

我有一个页面，我想滚动容器内的数据，如下所示：http: [//jsfiddle.net/pXy2C/](http://jsfiddle.net/pXy2C/)。

我创建了相邻的文本列，我可以使用多个 div 滚动它们。现在......在每个 div 中，我想创建一个按钮，将容器滚动到下一个 div 或前一个 div。上面 jsfiddle 示例的问题，它只翻转了第一个和最后一个 200px。有没有办法让我做我需要做的事情？

我的尝试在这里[http://jsfiddle.net/3xgSX/](http://jsfiddle.net/3xgSX/)，但我也会将其粘贴在下面。

谢谢你的帮助。

CSS：

```
#container{
width:1000px;
height:500px;
overflow:hidden;
Position:relative;border:1px #000 solid;
}

#contents{
width:1000px;
height:200px;
position:absolute;
top:0;
left:0;
} 
```

HTML：

```
<!--Column 1--> 
<div style='float:left; width:150px'>
Put your content here...
<button id="left">Left</button>
<button id="right">right</button>
</div><!--end div colomn 1-->

 <!--Column 2-->    
 <div style='float:left; width:150px; margin-left:300px'>
Put another content here...
<br>
<button id="left">Left</button>
<button id="right">right</button>

</div><!--End div column2-->

 </div><!--End div "contents"--> 
```

Javascript：

```
<script type="text/javascript">
   $(document).ready(function(){
$("#right").click(function(){
    $("#contents").animate({left:'-200px'},500);
    $("#container").animate({'margin-left':'200px'},500);
});
$("#left").click(function(){
    $("#contents").animate({left:'0px'},500);
     $("#container").animate({'margin-left':'0px'},500);
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:58:30.693

好的，请耐心等待，这里有很多问题需要解决，所以我将详细介绍一下。

## CSS

要获得与问题中提到的模型小提琴相同的效果，`#containers`宽度必须等于您的列。`#contents`那么宽度必须等于宽度`#containers`乘以列数（在本例中为三）。`.col`将替换原始代码中的内联 CSS。

```
#contents {
    width: 600px;
    height: 200px;
    position: absolute;
}
#container {
    height: 500px;
    overflow: hidden;
    position: relative;
    border: 1px #000 solid;
}
#container, .col {
    width: 200px;
}
.col {
    float: left;
} 
```

## HTML

任何给定`id`的只能使用一次，因此我将元素上的and更改为`#right`and 。我还添加了第三列，因为您的问题是专门询问如何将这种通用技术应用于两列以上。`#left``button``.right``.left`

```
<div id="container">
    <div id="contents">

<!--Column 1--> 
<div class="col">
    <p>Put your content here...</p>
    <button class="left">Left</button>
    <button class="right">right</button>
</div><!--end div colomn 1-->

<!--Column 2--> 
<div class="col">
    <p>Put another content here...</p>
    <button class="left">Left</button>
    <button class="right">right</button>
</div><!--End div column2-->

<!--Column 3--> 
<div class="col">
    <p>Put another content here...</p>
    <button class="left">Left</button>
    <button class="right">right</button>
</div><!--End div column3-->

    </div><!--End div "contents"-->
</div><!--End div container--> 
```

## JavaScript

要让`.animate()`jQuery 方法以您想要的方式工作，您必须使用相对属性值（有关更多信息，请参阅[`.animate()`API 页面](http://api.jquery.com/animate/#animation-properties)）。为了防止`#container`从列滑落，我制作了一个简单的函数 ，`getOffset()`并对照 的边界检查了它`#contents`。

您还应该将尽可能少的值硬编码到 JS 中，而是从 DOM 中读取它们，就像我在这里使用`colwidth`和`contwidth`.

```
var colwidth = $('#container').width(),
    contwidth = $('#contents').width(),
    getOffset = function() {
        return parseInt($('#container').css('margin-left'));
    };

$(".left").click(function(){
    if (getOffset() === 0) return false;

    $("#contents").animate({left: '+=' + colwidth},500);
    $("#container").animate({'margin-left': '-=' + colwidth},500);
});
$(".right").click(function(){
    if (getOffset() === contwidth - colwidth) return false;

    $("#contents").animate({left: '-=' + colwidth},500);
    $("#container").animate({'margin-left': '+=' + colwidth},500);
}); 
```

如果您继续努力，可能会有一个更优雅的解决方案，但这应该会让您朝着正确的方向前进。

# javascript - 调用 JavaScript 中的函数，该函数在与第二个脚本不同的脚本下定义

> ID：14941759
> 
> 赞同：0
> 
> 时间：2013-02-18T17:17:21.170
> 
> 标签：javascript

**问题：-**

如何从不同脚本中的另一个函数调用在同一 javascript 文件中的不同脚本下定义的函数？

**解释：-**

所以我在同一个javascript文件中有2个脚本（default.aspx）

我有一个执行 jquery 的脚本...

```
$.Ajax { .... OnScucess: Onsuccess () function}

Onsuccess() { call another function called date_label() } 
```

此`date_label()`函数在单独的脚本中定义......其中有一个名为

```
timeLine(){ within it is the function date_label() {....} } 
```

现在，当我尝试在我的`Onsuccess()`函数中调用 date_label 时，我收到一条明显的错误消息 - 未定义。但我相信一定有办法让它发挥作用。有任何想法吗？

我在看这个：-

[http://answers.unity3d.com/questions/11206/call-a-function-in-a-different-script-using-javasc.html](http://answers.unity3d.com/questions/11206/call-a-function-in-a-different-script-using-javasc.html)

但我的脚本标签没有名字......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:22:59.260

有几种方法可以解决这个问题，所有方法都涉及控制`date_label()`. 最简单的解决方法（很快就会让我大喊大叫）是`date_label()`全球化。在文件中，您只需：

```
function date_label()
{
   // Implementation
} 
```

确保此函数没有*嵌套*在另一个范围内，例如另一个函数。只要在`date_label`调用此脚本文件之前已加载，就可以了。`.js`函数位于什么物理文件中完全无关紧要。

但是，通常您不想*污染*全局范围。出于这个原因，您可能希望将此函数放在名称空间中，该名称空间通常只是一个对象字面量：

```
var MyUtils =
{
   date_label: function ()
   {
      // Implementation
   }
}; 
```

然后你就可以像这样在任何地方调用这个函数：

```
MyUtils.date_label(); 
```

通常的做法是为您的应用程序或库定义命名空间，以免与页面上可能存在的其他代码冲突。

# winforms - 复制 gridView 行

> ID：14941761
> 
> 赞同：1
> 
> 时间：2013-02-18T17:17:33.013
> 
> 标签：winforms, gridview, devexpress

如何以另一种形式将（devexpress）gridView 行复制到另一个gridControl？请写一个例子。这是子窗体。

```
public partial class frmSelectInvoice : DevExpress.XtraEditors.XtraForm{

public ValinorEntities valinor;
public BindingSource src;

public frmSelectInvoice()
{
    InitializeComponent();

    using (this.valinor = new ValinorEntities())
    {
        this.valinor = new ValinorEntities();
        this.src = new BindingSource(valinor.invoices_head, null);
        gridControl1.DataSource = src;
        src.DataSource = valinor.invoices_head;
    }
}

private void button1_Click(object sender, EventArgs e)
{

    this.Close();
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-27T10:38:32.360

我正在遭受同样的痛苦。最终，我能够开发出一个解决方案，并且它可以毫无问题地工作。我已经提供了构建您自己的解决方案的基本代码。您可以分两步完成您的目标。

step1：将网格视图行复制到剪贴板[按 ctrl+c]

step2：将剪贴板信息粘贴到另一个（或相同）网格视图 [按 ctrl+v]

第一步：示例代码 - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

```
private void gridView1_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Control && e.KeyCode == Keys.C)
        {
            Clipboard.SetText(GetSelectedValues(gridView1));
            e.Handled = true;
        }
    }

    private string GetSelectedValues(DevExpress.XtraGrid.Views.Grid.GridView view)
    {
        //validate selected row count
        if (view.SelectedRowsCount == 0) return "";

        const string CellDelimiter = "\t"; 
        const string LineDelimiter = "\r\n";
        string result = "";

        //Iterate cells and compose a tab delimited string of cell values
        for (int i = view.SelectedRowsCount - 1; i >= 0; i--)
        {
            int row = view.GetSelectedRows()[i];
            for (int j = 0; j < view.VisibleColumns.Count; j++)
            {
                result += view.GetRowCellDisplayText(row, view.VisibleColumns[j]);
                if (j != view.VisibleColumns.Count - 1)
                    result += CellDelimiter;
            }

            if (i != 0)
                result += LineDelimiter;
        }
        return result;
    } 
```

*现在您选择的行被复制到剪贴板。因此，如果需要，您可以将这些信息复制到 Excel 或记事本中。提示：Ms.Excel 总是比记事本更智能地格式化内容。

第二步：示例代码 - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

```
//for retrieving clipboard data
    string ClipboardData {
        get {
            IDataObject iData = Clipboard.GetDataObject();
            if(iData == null) return "";

            if(iData.GetDataPresent(DataFormats.Text))
                return (string)iData.GetData(DataFormats.Text);
            return "";
        }
        set { Clipboard.SetDataObject(value); }
    }

    DataTable tbl;
    private void Form1_Load(object sender, System.EventArgs e) {
        //create a datatable as the data-source for grid-control
        tbl = new DataTable();
        for(int i = 0; i < 3; i++)
            tbl.Columns.Add("Column" + i.ToString());
        for(int i = 0; i < 4; i++)
            tbl.Rows.Add(new object[] { "Item" + i.ToString(), i, 3 - i });
        gridControl1.DataSource = tbl;
    }

    //copy clip board infromation into the grid-view
    private void simpleButton1_Click(object sender, System.EventArgs e) {
        string[] data = ClipboardData.Split('\n');
        if(data.Length < 1) return;
        foreach(string row in data) {
            AddRow(row);
        }
    }

    void AddRow(string data) {
        if(data == string.Empty) return;
        string[] rowData = data.Split(new char[] { '\r', '\x09' });
        DataRow newRow = tbl.NewRow();
        for(int i = 0; i < rowData.Length; i++) {
            if(i >= tbl.Columns.Count) break;
            newRow[i] = rowData[i];
        }
        tbl.Rows.Add(newRow);
    } 
```

附加代码：（如果需要） - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

如果您想提供选择多行的功能，请使用“MultiSelect”选项，如下例所示。

```
 public fromLoad()
    {
        InitializeComponent();
        gridView1.OptionsSelection.MultiSelect = true;
        gridView1.OptionsSelection.MultiSelectMode = GridMultiSelectMode.RowSelect;
        gridView1.OptionsBehavior.CopyToClipboardWithColumnHeaders = true;
    } 
```

有关 CopyToClipboard 方法的更多详细信息，请参阅以下链接

[https://documentation.devexpress.com/#windowsforms/DevExpressXtraGridViewsBaseBaseView_CopyToClipboardtopic](https://documentation.devexpress.com/#windowsforms/DevExpressXtraGridViewsBaseBaseView_CopyToClipboardtopic)

问候。贵霜兰迪玛

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:03:39.230

这是正确的代码：

```
for (int i = 0; i < gridView2.RowCount; i++)
{
  gridView3.AddNewRow();              

  for (int ii = 0; ii < gridView3.Columns.Count; ii++)
  {
    gridView3.SetRowCellValue(gridView3.FocusedRowHandle, gridView3.Columns[ii], gridView2.GetRowCellValue(i, gridView2.Columns[ii]));
  }          
} 
```

如何以另一种形式将其复制到另一个 gridControl？

# php - 如何从弹出窗口将多个值存储到数据库？

> ID：14941765
> 
> 赞同：1
> 
> 时间：2013-02-18T17:17:48.503
> 
> 标签：php, javascript, css

我正在尝试使用接受多个值的 css 的弹出窗口。例如，当我单击特定链接时，会出现一个带有多个输入框的新窗口。我的问题是如何将接受的值存储在数据库中？

我使用 php 作为服务器端脚本语言。一个简单的例子来说明这个概念将不胜感激。

```
 <html>
 <head>
 </head>

 <style>
 #overlay {
 visibility: hidden;
 position: absolute;
 left: 0px;
 top: 0px;
 width:100%;
 height:100%;
 text-align:center;

 }

 #overlay div {
 width:300px;
 margin: 100px auto;
 background-color: #fff;
 border:1px solid #000;
 padding:15px;
 text-align:center;
  }

</style>

 <div id="overlay">
 <div>
    <p><input type="text" id=txt name=txt /></p>
  <input type="submit" onclick="add()" />[<a href='#' onclick='overlay()'>close</a>]
 </div>
 </div>
 <a href='#' onclick='overlay()'>clck here</a>
 <script>

 function add()
 {
   alert(document.getElementById("txt").value)  

 }

  function overlay() {
el = document.getElementById("overlay");
el.style.visibility = (el.style.visibility == "visible") ? "hidden" : "visible";
 }
</script>

 <body>
 </body>
 </html> 
```

# android - 使用 SharedPreferences 保存时出错

> ID：14941767
> 
> 赞同：0
> 
> 时间：2013-02-18T17:17:59.250
> 
> 标签：android, sharedpreferences

我正在使用 sharedpreferences 保存一些变量，但我的保存方法使应用程序崩溃并出现空指针异常。

```
public void save() {

    SharedPreferences sp = context.getSharedPreferences(saveFile, Context.MODE_PRIVATE);
    //Use the editor for easier management, no calling edit and commit so many times. 
    SharedPreferences.Editor editor = sp.edit();

    editor.putInt("X", player.getX());
    editor.putInt("Y", player.getY());
    editor.putInt("level", player.getLevel());
    editor.putFloat("xp", player.getXp());
    editor.commit();
} 
```

getSharedPreferences() 本身不起作用，需要有上下文。在它之前，这可能是一个问题。我已经定义了上下文，导入了 SharedPreferences，为什么这不起作用？

**编辑：这是logcat**

```
02-18 20:21:49.958: E/AndroidRuntime(1005): FATAL EXCEPTION: Thread-89
02-18 20:21:49.958: E/AndroidRuntime(1005): java.lang.NullPointerException
02-18 20:21:49.958: E/AndroidRuntime(1005): at com.package.game.GameScreen.save(GameScreen.java:856)
02-18 20:21:49.958: E/AndroidRuntime(1005): at com.package.game.GameScreen.updateLevelUp(GameScreen.java:364) 
```

保存方法在上面和行：

```
SharedPreferences sp = context.getSharedPreferences(saveFile, Context.MODE_PRIVATE); 
```

是第 856 行。 updateLevelUp 是在玩家升级和退出屏幕时调用的方法，游戏恢复并调用 save()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:34:18.190

你的`context`变量是`null`. 确保它已被初始化，并且您没有`onCreate()`在相应的`Context`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:27:10.090

作为一个好的规则，您希望`SharedPreferences.Editor`在管理 SharedPreferences 时使用 a。

这是一个更简单的方法：

```
public void save() {
    SharedPreferences saveFile = context.getSharedPreferences(loadSave, Context.MODE_PRIVATE);
    //Use the editor for easier management, no calling edit and commit so many times. 
    SharedPreferences.Editor editor = saveFile.edit();

    editor.putInt("x", player.get());
    editor.putInt("Y", player.getY());
    editor.putInt("level", player.getLevel());
    editor.putFloat("xp", player.getXp());

    //Save changes now
    editor.commit();
} 
```

此外，如果您在此实施后仍然得到空指针，请确保您发布日志以便我们可以追踪异常。

# mysql - 查询部分字符串或文本

> ID：14941771
> 
> 赞同：0
> 
> 时间：2013-02-18T17:18:03.363
> 
> 标签：mysql, ruby-on-rails

使用 Rails 和 MySQL。不确定是否有人问过这个问题，但找不到。

我有以下记录：

```
1\. I love Rails
2\. I love Django
3\. I code using Ruby on Rails 
```

====

(1) 搜索：“我爱”

结果：“**我爱**Rails”、“**我爱**Django”

====

(2) 搜索：“爱”

结果：“我**爱**Rails”、“我**爱**Django”

====

(3) 搜索：“病”

结果：“我喜欢 Rails”、“我使用 Ruby on Rails 编写代码”

====

(4) 搜索：“代码 Ruby”

结果：“我使用 Ruby on Rails 进行编码”

====

我的代码是：

```
term = "%#{params[:term]}%"
shops = Shop.where("name LIKE ?", term) 
```

它仅适用于搜索 (1) 和 (2)。在进行搜索 (3) 和 (4) 时，我如何编码以实现结果？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:33:12.723

我认为您需要在其中使用通配符（在原始 SQL 中）

```
LIKE '%ails' 
```

或更一般地说：

```
LIKE '%substring%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T03:49:31.500

找到了解决方案。

我需要将搜索短语中的每个单词都用`%string%`.

====

搜索 (1): "我爱"

询问：`SELECT * from t WHERE name LIKE "%i% %love%";`

结果：“我爱 Rails”、“我爱 Django”

====

搜索 (2): "爱"

询问：`SELECT * from t WHERE name LIKE "%love%";`

结果：“我爱 Rails”、“我爱 Django”

====

搜索 (3)：“病”

询问：`SELECT * from t WHERE name LIKE "%ails%";`

结果：“我喜欢 Rails”、“我使用 Ruby on Rails 编写代码”

====

搜索 (4)：“代码 Ruby”

询问：`SELECT * from t WHERE name LIKE "%code% %Ruby%";`

结果：“我使用 Ruby on Rails 进行编码”

====

我的 Ruby 代码应该是：

```
term = "#{params[:term]}"
f_term = term.gsub /\b/, '%'
shops = Shop.where("name LIKE ?", f_term) 
```

您可以在[http://sqlfiddle.com/#!2/d63f5/4进行测试](http://sqlfiddle.com/#!2/d63f5/4)

# ios - 当我从情节提要触发转场时，UIScrollview 水平偏移发生变化

> ID：14941772
> 
> 赞同：0
> 
> 时间：2013-02-18T17:18:03.597
> 
> 标签：ios, objective-c, storyboard

当我最初加载我的滚动视图时，它工作正常。但是，当我单击菜单按钮以模态方式显示视图然后关闭视图时，它将整个滚动视图向左移动。以前滚动视图的开始部分现在位于屏幕左侧，并且滚动视图的末尾添加了一些空白区域。

我在序列前后检查了 contentoffset ，它保持不变，只是 uiscrollview 的内容似乎完全向左移动了。

我正在使用自动布局来创建我的滚动视图。在我的滚动视图中，我有一个容器视图，其中包含多个视图。容器视图通过我放入容器视图的子视图数量来定义滚动视图的大小。

Leaign ScrollView 子视图 UIView: 0x1f088040; 帧 = (0 0; 1597.5 192.5); 层=CALayer：0x1f0552c0

View Did Appear ScrollView Subviews UIView: 0x1f088040; 帧 = (-480 0; 1597.5 192.5); 层=CALayer：0x1f0552c0

**更奇怪的是，当我将容器视图设置回它的原始大小时，它不会在我开始滚动时立即停留在那里，它具有正确的初始值，但随后会重置回错误的值。**

在 prepareForSegue 中：

离开 ScrollView 子视图 UIView: 0x1e06a3a0; 帧 = (0 0; 1597.5 192.5); 层=CALayer：0x1e03a290

在 ViewDidAppear 之前我将它设置回 0 0

View Did Appear ScrollView Subviews UIView: 0x1e06a3a0; 帧 = (-480 0; 1597.5 192.5); 层=CALayer：0x1e03a290

在视图中滚动

查看是否滚动滚动视图子视图 UIView：0x1e06a3a0；帧 = (0 0; 1597.5 192.5); 层=CALayer：0x1e03a290

查看是否滚动滚动视图子视图 UIView: 0x1e06a3a0; 帧 = (-480 0; 1597.5 192.5); 层=CALayer：0x1e03a290

查看是否滚动滚动视图子视图 UIView: 0x1e06a3a0; 帧 = (-480 0; 1597.5 192.5); 层=CALayer：0x1e03a290

查看是否滚动滚动视图子视图 UIView: 0x1e06a3a0; 帧 = (-480 0; 1597.5 192.5); 层=CALayer：0x1e03a290

**它似乎总是 160 的倍数的偏移量**

# ios - 用于用户 iOS 的 Xcode 软件图像，用于表示 iOS 调用

> ID：14941773
> 
> 赞同：3
> 
> 时间：2013-02-18T17:18:08.047
> 
> 标签：ios, objective-c, xcode, symbolicatecrash

安装的软件镜像：

![已安装的软件映像](../Images/0e2ee2114b4e000ef6d5c6f308ffd009.png)

我的崩溃日志：

![在此处输入图像描述](../Images/b4bd6f666c7de070384c7de347096058.png)

如您所见，只有应用程序（IPDF Beta）显示任何可理解的方法名称，其他一切都很好。原因显然是我没有安装 5.1 软件映像，而且我不知道从哪里得到它。Xcode 没有任何下载功能（我已经尝试获取 5.1 模拟器下载，但显然不包括设备图像）。

尽管没有崩溃版本的软件映像，Xcode 是否应该能够进行符号化？如果是这样，关于如何实现这一点的任何指示？如果没有，除了寻找旧 Xcode 版本等荒谬的建议之外，获得图像的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T23:24:32.980

要对崩溃报告进行符号化，您将需要实际的符号。并且拥有 iOS 版本的图像并没有帮助。您需要将它们安装在实际设备上，然后 Xcode 将能够从设备中获取符号。但是，如果您没有具有更旧 iOS 版本的设备，则无法安装它们。

所以剩下的唯一机会是下载旧的 Xcode 版本，这些版本确实必须捆绑符号，正如 Ryan Poolos 在他的回答中提到的那样：[https ://stackoverflow.com/a/14941919/474794](https://stackoverflow.com/a/14941919/474794)

下载后，将 Xcode 解压缩到一个临时文件夹中，进入该文件夹`Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport/`并将子目录复制到`~/Library/Developer/Xcode/iOS DeviceSupport/`.

如果该文件夹是 Xcode 目录结构中另一个 SDK 文件夹的符号链接，则最好将实际内容从那里复制到新目标中。确保在目标目录中保持目录结构相同，因为符号化过程依赖于它。

因此，下面的目标结构`~/Library/Developer/Xcode/iOS DeviceSupport/`将类似于`5.1 (9B176)/Symbols/`然后是三个子目录`Developer`，`System`并且`usr`每个 iOS 版本都有更多内容。

注意：从 iOS 5.0 开始，每个 iOS 版本可以有多个构建。一为`armv7`，一为`armv7s`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:25:35.503

旧的 iOS 版本可以从 Apple 下载。但是它们嵌入了旧版本的 Xcode。因此，您需要下载 Xcode，然后提取 SDK 映像。

苹果下载：[https ://developer.apple.com/downloads/index.action?name=Xcode](https://developer.apple.com/downloads/index.action?name=Xcode)

`/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs` 您可以根据这个 SO 问题在此处获取图像： [https ://stackoverflow.com/a/12602603/563381](https://stackoverflow.com/a/12602603/563381)

# javascript - jQuery在第二列的第一行中存在图像时动态更改表中第一列的填充顶部

> ID：14941782
> 
> 赞同：4
> 
> 时间：2013-02-18T17:18:42.300
> 
> 标签：javascript, jquery

在双列表中（其中两列都设置为 valign top 并且文本设置为 text-align: baseline），如果图像存在于第二列的第一行并且图像高度高于文本本身，两列中的文本未对齐。

当图像存在于第二列的第一行时，我想将 padding-top 动态添加到第一列。如果调整了窗口大小并且图像不再位于第一行（或将新图像推入第一行），则第 1 列中文本的 padding-top 应自动更新以确保基线文本在两列中对齐.

```
 <html>
    <head>
    <script type="text/javascript" src="scripts/jquery.js"></script>
    <script type="text/javascript" src="scripts/script.js"></script>
    <link rel="stylesheet" type="text/css" href="styles/style.css" />
    </head>
    <body>
    <table>
        <tr>
            <td style="vertical-align:top"><p class="tabhead">Note:</p></td>
            <td style="vertical-align:top"><p class="tabtext">This is text and - z0mg no, not an image!<img src="http://files.softicons.com/download/web-icons/minicons-numbers-icons-by-icojam/png/16x16/blue/025.png" /> what will we do?<br />Save us!</p></td>
        </tr>
    </table>
    </body>
    </html> 
```

**样式表**

```
 .tabhead
    {
        display: block;
        vertical-align: top;
        font-family: "Tahoma", verdana, arial, helvetica, sans-serif;
        font-style: normal;
        font-variant: normal;
        font-weight: bold;
        font-size: 9pt;
     }
    .tabtext 
    {
        font-family: "Tahoma", verdana, arial, helvetica, sans-serif;
        font-style: normal;
        font-variant: normal;
        font-weight: normal;
        font-size: 9pt;
        vertical-align: baseline;
     } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T19:22:57.657

为了使它更容易一点，让我们在表中的第一个 td 元素上添加一个 id="column_1" 属性。

```
$(document).ready(function()
{
    window.setInterval("update_tbl_padding()", 100);
}

function update_tbl_padding()
{
    //if column 1 has either a direct or indirect img element as a descendant
    //if you wanted it to be a direct child element the selector would be
    //$("#column_1 > img")
    if($("#column_1 img").size() >= 1)
    {
       //just an example
       var pad_top_val = "5px";
       $("#column_1").css("padding-top", pad_top_val);
    }
    //since you're checking to see if a new image is pushed in, I'm guessing you
    //would want to check to see if its taken out too...hence this else clause
    else
    {
      var pad_top_default_val = "0px";
      $("#column_1").css("padding-top", pad_top_default_val);
    }
} 
```

还没有检查代码是否有语法错误或任何东西，但它应该很容易理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-17T06:06:00.527

```
create style as below 
table.padtop120 {
    padding-top: 120px;
}

and in javascript add below statement for you table or row id as below

<script>
$( document ).ready(function() {
$("#tableid").addClass('padtop120');
});
</script>    
it'll be applied dynamically 
```

# jquery - 一次显示/隐藏一个 DIV，更改链接样式

> ID：14941783
> 
> 赞同：2
> 
> 时间：2013-02-18T17:18:42.413
> 
> 标签：jquery, css, html, styles

有一段时间我试图找到我需要的东西并检查了很多链接@stackoverflow、@google 等，但每次有些东西都不能 100% 工作

所以问题是关于制作显示/隐藏DIV的地方，一次只能打开一个+可以在按下相同的链接时关闭，活动的DIV链接应该改变它的风格。

**最知道的一个是：** [http](http://dimdajdeneg.com/temp/menu.html) ://dimdajdeneg.com/temp/menu.html 但它不会改变“显示 DIV”链接样式并且您不能关闭所有 DIV，例如如果第一个打开，再次单击它不会关闭打开一个。

**这一个也很有趣：** [http](http://dimdajdeneg.com/temp/menu2.html) ://dimdajdeneg.com/temp/menu2.html 它甚至可以自行关闭，但“显示 DIV”链接样式不可更改

我知道这很简单，但可能只是因为星期一:) 任何人都可以帮助我吗？

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T17:50:44.473

这是我想出的，它会淡出所有内容，除了点击的那个（内部`.not()`），而是切换。

**HTML：**

```
<a href="" data-id="d1">Link 1</a>
<a href="" data-id="d2">Link 1</a>
<a href="" data-id="d3">Link 1</a>
<div id="d1">Div 1</div>
<div id="d2">Div 2</div>
<div id="d3">Div 3</div> 
```

**CSS：**

```
a {
    background:blue;
    color:red;
}
.active {
    background:green;
    color:white;
}
div{
    display:none;
} 
```

**jQuery：**

```
$('a').click(function(ev){
    ev.preventDefault();
    var id = $(this).data('id');
    $('a').not($(this).toggleClass('active')).removeClass('active');

    // parallel fading:      
    $('div').not($('#'+id).fadeToggle(500)).fadeOut(500);
    // OR
    // sequential fading:
    $.when($('div').not($('#'+id)).fadeOut(500)).done(function(){
        $('#'+id).fadeToggle(500)
    });
}); 
```

**jsFiddle：**

[http://jsfiddle.net/fKGc5/](http://jsfiddle.net/fKGc5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:42:24.220

我已经尝试了链接中的编码：http: [//dimdajdeneg.com/temp/menu.html](http://dimdajdeneg.com/temp/menu.html)

并修改该代码如下...

```
function m_slide(m_inactive) {$('.m_box').each(function(index) {
  if ($(this).attr("id") == m_inactive) {
            $(this).toggle("fast");
        }
    else {
            $(this).slideUp(300);
    }
});} 
```

尽管有 Slide-down `i have used`toggle()`;

试试这个小提琴：http: [//jsfiddle.net/RYh7U/92/](http://jsfiddle.net/RYh7U/92/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:50:55.650

如果我正确理解了您的问题..

将此添加到您的`.click()`活动中：

```
$('#linkwrapper > a').each(function () { 

$(this).removeClass("isActive");

});

$(this).addClass("isActive"); 
```

显然，您将需要该`isActive`课程的 CSS！

# c# - 显示来自控制器的文本

> ID：14941784
> 
> 赞同：0
> 
> 时间：2013-02-18T17:18:51.463
> 
> 标签：c#, asp.net-mvc

我需要在`view`from中显示一条消息`controller`。这是我的代码；

看法

```
@Html.LabelFor // How do i write the rest to display the message 
```

控制器

```
public ActionResult Index(MyModel model)
    {

        // I Need to send a String to the Label in the View

        return View();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:21:23.123

可以说，至少在需要时，更优雅的解决方案是使用强类型视图（使用模型 - MVC 中的 M）。一个简单的例子可能是：

该模型：

```
public class MessageViewModel
{
    public string Message {get; set;}
} 
```

控制器：

```
public ActionResult Index()
{
    var viewModel = new MessageViewModel {Message = "Hello from far away"};
    return View(viewModel);
} 
```

风景：

```
@model MyNamespace.MessageViewModel

<h2>@Html.DisplayFor(model => model.Message)</h2> 
```

我会为页面上的一条消息而烦恼吗？令人惊讶的是，大多数时候我会。视图准确地知道会发生什么（反之亦然），Intellisense 支持以及可以进行各种隐式格式化的`HtmlHelper`'s方法有一些优雅之处。`DisplayFor()`

* * *

话虽如此，“最简单”（阅读：快速而肮脏，但很快变得丑陋）的解决方案是将您的消息填充到`ViewBag`动态对象中。

在控制器中：

```
ViewBag.MyMessage = "Hello from a far away place"; 
```

在视图中：

```
@ViewBag.MyMessage 
```

但是这样做，你会失去智能感知、可重复性 (DRY)，可能还会失去理智。可能在一个地方使用一个属性（默认 _Layout 页面使用的*一个 la ）。* `ViewBag.Title`一大堆不连贯的东西塞进包里，不，谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:19:41.913

您可以在控制器中使用[Viewbag](http://weblogs.asp.net/hajan/archive/2010/12/11/viewbag-dynamic-in-asp-net-mvc-3-rc-2.aspx)或viewdata

```
 public ActionResult Index()
    {
       ViewData["listColors"] = colors;
        ViewData["dateNow"] = DateTime.Now;
        ViewData["name"] = "Hajan";
        ViewData["age"] = 25;;

        ViewBag.ListColors = colors; //colors is List
        ViewBag.DateNow = DateTime.Now;
        ViewBag.Name = "Hajan";
        ViewBag.Age = 25;
        return View(); 
    }
<p>
    My name is 
    <b><%: ViewData["name"] %></b>, 
    <b><%: ViewData["age"] %></b> years old.
    <br />    
    I like the following colors:
</p>
<ul id="colors">
<% foreach (var color in ViewData["listColors"] as List<string>){ %>
    <li>
        <font color="<%: color %>"><%: color %></font>
    </li>
<% } %>
</ul>
<p>
    <%: ViewData["dateNow"] %>
</p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:21:09.597

```
public ActionResult Index(MyModel model)
{

        ViewBag.Message = "Hello World";

        return View();
} 
```

你的看法

```
<h1>@ViewBag.Message</h1> 
```

# jdbc - 无法从 JDBC 更新 Oracle 视图

> ID：14941785
> 
> 赞同：0
> 
> 时间：2013-02-18T17:18:53.563
> 
> 标签：jdbc, oracle11g, lotus-domino

概述：需要从 Oracle 视图中读取行并创建一个 Notes 文档，保存文档，然后将 Document Unique ID 写回 Oracle。

我能够读取连接并读取数据没有问题。我正在使用连接到 Oracle 11 数据库的类型 4 连接。Oracle 视图设置为允许更新。该视图中没有此处概述的内容：[在 Oracle 中，是否可以通过视图插入或更新记录？](https://stackoverflow.com/questions/1652995/in-oracle-is-it-possible-to-insert-or-update-a-record-through-a-view)

*使用相同的用户名和密码，您可以通过输入SQL语句成功更新视图。

*尝试使用 conn.setAutoCommit(false); 这没有效果。

*验证结果集是可更新的（1008）

*用户已获得完全 DBA 访问权限（临时）

*我已经尝试了createStatement方法中第一个参数的所有可能组合

```
...
Statement statement = conn.createStatement(ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_UPDATABLE);
ResultSet rs = statement.executeQuery(fetch);
...
String UNID = doc.getUniversalID(); //gets unique id from saved Notes Document  
System.out.println("This is what to write to Oracle:" + UNID);
System.out.println("is updatable=1008, not updatable=1007 value is:" + rs.getConcurrency());
System.out.println("is Result Set Closed:" + rs.isClosed());

rs.updateString("NOTES_DOC_ID", UNID);
System.out.println("got past updating NOTES_DOC_ID column");
rs.updateRow();  //fails here 
```

> 这是来自控制台的错误：
> 
> > 这是写给 Oracle 的内容：BF8091259610C61B87257B16005C14FB
> > 
> > 可更新=1008，不可更新=1007 值为：1008
> > 
> > 结果集是否已关闭：false
> > 
> > 过去更新 NOTES_DOC_ID 列
> > 
> > java.security.AccessControlException：访问被拒绝（java.lang.RuntimePermission exitVM.0）

在要求用户拥有 DBA 访问权限之前，我会得到一个

> > java.sql.SQLSyntaxErrorException: ORA-01031: 权限不足

我认为这是一个很大的线索。我的 DBA 不知道给我什么进一步的访问权限。

DBA 希望我开始使用 ref 游标，这很好，但我怀疑 JDBC 访问的某种安全设置让我感到困惑，我想先探索一下。如果存在安全问题，那么我认为改变读取行的方式不会产生影响。大多数有关如何执行此操作的文档均来自 Oracle 的网站以及此站点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:53:50.753

我将回答我的问题并解释我是如何克服这个障碍的。最后，我基本上按照“a_horse_with_no_name”的建议做了。

我可以使用普通的 UPDATE 语句，而不是使用 resultSet 游标或 ref 游标来执行更新。这是可能的，因为我能够说服 DBA 为唯一标识符创建一个列。我们永远无法绕过由 resultSet 的 updateRow() 方法引起的异常。在他添加唯一标识符之前，没有可以可靠地使用 UPDATE 语句的键。

下面是代码，其中 updateSQL 是一个包含更新 SQL 语句的字符串：

```
updateResultInt = updateStatement.executeUpdate(updateSQL); 
```

如果成功则返回 1。

需要注意的是，如果您使用 TOra 或 sql plus 之类的工具来检查更新语句，则必须记住手动提交它们。如果您不这样做，您的 java 代理将在尝试运行它时挂起。这是一个很好的参考资料，可以帮助我解决这个问题： [SQL Update hangs Java program](https://stackoverflow.com/questions/2276283/sql-update-hangs-java-program)

感谢评论的人！

# java - Java二叉搜索树 - 错误工作的插入方法

> ID：14941788
> 
> 赞同：0
> 
> 时间：2013-02-18T17:18:55.683
> 
> 标签：java, binary-search-tree

我有一个 Java 中的二叉搜索树作业，其中给了我完整的 Tree 和 Node 类以及一个 SearchTree 类，我将在其中完成搜索和插入方法。搜索应该返回与搜索键对应的节点的值。

[这里](http://pastebin.com/iy1BL2nv)是 Tree 类，[这里](http://pastebin.com/mVnPU8Yd)是 Node 类。我的搜索和插入方法如下。

看来我已经接近了，但是测试将键 0 和值 2 插入 Tree[Node[0,1,null,null]] 会导致 Tree[Node[0,1,null,null] 而不是正确的 Tree [节点[0,2,null,null]]。我在这里不明白什么？

```
public static Object search(Tree tree, int key) {
    Node x = tree.getRoot();
    while (x != null) {
        if (key == x.getKey()) {
            return x.getValue();
        }
        if (key < x.getKey()) {
            x = x.getLeft();
        } else {
            x = x.getRight();
        }            
    }
    return null;
}

public static void insert(Tree tree, int key, Object value) {
    if (tree.getRoot() == null) {
        tree.setRoot(new Node(key, value));
    }
    Node juuri = tree.getRoot();
    while (juuri != null) {
        if (key == juuri.getKey()) {
            return;
        } else if (key < juuri.getKey()) {
            if (juuri.getLeft() == null) {
                juuri.setLeft(new Node(key, value));
                return;
            } else {
                juuri = juuri.getLeft();
            }
        } else {
            if (juuri.getRight() == null) {
                juuri.setRight(new Node(key, value));
                return;
            } else {
                juuri = juuri.getRight();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:32:08.380

那么我看到的问题是你的树中的关键值是独一无二的。`insert`在这个 if 语句中，如果您看到键已经在树中，您将离开您的方法而不添加节点。

```
 if (key == juuri.getKey()) { 
      return;
 } 
```

在您的示例中（如果我理解正确） 0 已经在树中，因此再次插入 0 时没有任何变化。根据您的示例，我假设您想在密钥相同的情况下对节点进行更新。所以这段代码可以做到。

```
if (key == juuri.getKey()) {
     juuri.setValue(value);
     return;
} 
```

# cloud-hosting - 从 ACS 抛出异常添加联邦元数据

> ID：14941792
> 
> 赞同：0
> 
> 时间：2013-02-18T17:19:08.247
> 
> 标签：cloud-hosting, acs, adfs2.0, windows-live-id

我在使用 ADFS 2.0 的 Azure 云服务中有一个 Web 应用程序。我想添加其他方标识符，例如 Windows Live Id。web.config 包含一个使用 asp.net_regis 实用程序加密的连接字符串。当我在没有新的身份提供者引用的情况下部署到云服务时，它工作正常，但是当我添加这些新引用时，我得到了这个异常：*该部分被标记为受保护，但它没有正确的格式。它应该只包含 <EncryptedData> 子节点。*我已将用于加密它的证书包含在 ACS 门户的“令牌解密”选项卡中。为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:43:43.290

查看节点之间是否添加了任何新键（或任何其他元素），因为它会导致此错误。可能是您在部署时应用了转换。

# scala - 如何使用隐式转换将 List[A] 转换为 List[B]

> ID：14941794
> 
> 赞同：8
> 
> 时间：2013-02-18T17:19:11.723
> 
> 标签：scala, scalaz

我的代码中经常出现以下用例：

*   收藏[A]
*   隐式转换 A 到 B

我想获得 B 的集合。我可以像下面这样隐式使用：

```
 case class Items(underlying:List[B])
  import B._
  def apply(a:List[A]):Items = {
    val listOfB= a.map {implicitly[A=>B]}
    Items(listOfB)
  } 
```

在 Scala 中做这件事的最优雅的方法是什么，也许在 Scalaz 的帮助下做同样的事情？

**编辑：**我的问题的目标是找到一种惯用的方式，这是图书馆/开发人员之间的常用方法。从这个意义上说，开发我自己的 pimp-my-library 解决方案是我不喜欢的，因为编写我的代码的其他人不会知道这种转换的存在并且不会使用它，他们会重写自己的。我喜欢对这个常用函数使用库方法，这就是为什么我想知道在 Scalaz 中是否存在这样的特性。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-18T17:26:23.257

如果您知道类型，那将非常简单。`A`从to 的第一个隐式转换`B`：

```
implicit def conversion(a: A): B = //... 
```

那么你需要隐式转换 from `List[S]`to `List[T]`where`S`并且是存在隐式转换 from to`T`的任意类型：`S``T`

```
implicit def convList[S, T](input: List[S])(implicit c: S => T): List[T] = 
   input map c 
```

这应该可以工作：

```
val listOfA: List[A] = //...
val listOfB: List[B] = listOfA 
```

编译器将其解析为：

```
val listOfB: List[B] = convList(listOfA)(conversion) 
```

在哪里和`S`是。`A``T``B`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-18T17:31:07.127

我不会在这里使用隐式转换，而是在类中绑定一个视图：

```
case class Foo(x: Int)
case class Bar(y: Int)
implicit def foo2Bar(foo: Foo) = Bar(foo.x)
case class Items[A <% Bar](xs: List[A]) {
  def apply(x: Int): Bar = xs(x)
} 
```

您现在可以创建一个`Items`带有列表的实例`Foo`并在内部使用它们，就好像它们是`Bar`s 一样。

```
scala> Items(List(Foo(1)))
res8: Items[Foo] = Items(List(Foo(1)))

scala> res8(0)
res9: Bar = Bar(1) 
```

**编辑**：

一些澄清，为什么我不会使用隐式转换：

隐式转换可能很危险，当它们在范围内并意外转换了不应该转换的东西时。我总是会显式地或通过视图边界转换东西，因为这样我就可以控制它，隐式转换也可能会缩小代码的大小，但也会让其他人更难理解。我只会对“扩展我的库”模式使用隐式转换。

**编辑2**：

但是，如果这样的方法在范围内，您可以向集合类型添加一个方法来执行此转换：

```
trait Convertable[M[A], A] {
  def convertTo[B](implicit f: A => B): M[B]
}

implicit def list2Convertable[A](xs: List[A]) = new Convertable[List, A] {
  def convertTo[B](implicit f: A => B) = xs.map(f)
}

scala> implicit def int2String(x: Int) = x.toString
int2String: (x: Int)String

scala> List(1,2,3).convertTo[String]
res0: List[String] = List(1, 2, 3) 
```

我可能不会在这里使用另一个隐式转换，而是使用类型类，但我想你明白了基本的想法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T21:02:10.227

从 Scala 2.10 开始工作：

```
implicit class ListOf[A](val list: List[A]) { 
  def of[B](implicit f: A => B): List[B] = list map f 
}
implicit def int2String(i: Int) = i.toString

// Usage
List(1,2,3).of[String] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-07T07:32:18.313

在我的代码中，我使用的是从上面的 Tomasz 解决方案改编的更通用的版本，它处理所有`Traversable`实例

```
/** Implicit conversion for Traversable instances where the elements are convertable */
implicit def convTrav[S, T, I[S] <: Traversable[S]](input: I[S])(implicit c: S => T): I[T] =
  (input map c).asInstanceOf[I[T]] 
```

（这对我有用，尽管我很想知道是否有任何更有经验的 Scala 程序员认为这是一个坏主意，除了关于隐式转换的常见警告之外）

# java - 如何将数据库值放入数组列表

> ID：14941801
> 
> 赞同：0
> 
> 时间：2013-02-18T17:19:26.960
> 
> 标签：java, list, arraylist

我有一个静态的数组列表

```
 List l=new ArrayList();
      l.add("1");
      l.add("2");
      l.add("3");
      l.add("4");
      l.add("5"); 
```

但我想动态地将数据库列值放入我的数组列表中如何实现请建议我使用 oracle xe

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:40:40.313

在 Java 中连接数据库的标准方法是 JDBC，Sun 发布了[JDBC 基础课程](http://docs.oracle.com/javase/tutorial/jdbc/basics/)。

在您的情况下，非常粗略的解决方案将类似于以下内容：

```
List l=new ArrayList();

// TODO handle exceptions
Connection conn = ...; // create the connection according to your DB details
Statement stmt = conn.createStatement();
ResultSet rs = stmt.executeQuery("select Column from YourTable");
while (rs.next()) {
    l.add(rs.getString(1));
}
// TODO close these in a finally block
rs.close();
stmt.close(); 
```

# javascript - 如何使用 Javascript 解析表单数据

> ID：14941802
> 
> 赞同：-1
> 
> 时间：2013-02-18T17:19:29.347
> 
> 标签：javascript, html, forms

我被分配在平面 html 中构建一个表单，但将一小部分信息解析到一个动态 (asp) 页面。

我可以在 Javascript 中执行此操作吗？

我已经查看了很多关于 SO 的问题，但没有回答我需要什么。

请你帮忙。

我设法创建了这个简单的表单，我如何解析用户点击的信息。

```
<form id='sampleform' method='post' action='myurl.com' >
   <p>
   Name: <input type='text' name='Name' />
   </p>
   <p>
   Email: <input type='text' name='Email' />
   </p>
<input type="radio" name="subject" value="maths" /> &pound;10
<input type="radio" name="subject" value="physics" /> &pound;5
<input type="radio" name="subject" value="physics" /> &pound;3
&pound;<input type='text' name='donate-amount' />
   <p>
   <input type='submit' name='Submit' value='Submit' />
   </p>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:38:13.047

您不需要 JavaScript，HTML 表单用于向服务器提交数据。

试试这个 HTML：

```
<form method="post" action="somescript.asp">
    <input type="text" id="first_name" name="first_name">
    <input type="submit" value="Send to server!">
</form> 
```

在服务器端，该`Request`对象将包含`first_name`表单提交时的值。

# c++ - C++ 类不在范围内

> ID：14941805
> 
> 赞同：0
> 
> 时间：2013-02-18T17:19:31.707
> 
> 标签：c++, c++builder

我有一个名为 Video 的类，定义如下：

```
class Video
{
public:
    Video() { }
    ~Video()
    {

    }

    unsigned int m_max_ad_duration;
    unsigned int m_max_skippable_duration;
    unsigned int m_start_delay;
    unsigned short int m_inventory_type;
    unsigned short int m_skippable_Request;
}; 
```

如果我在一个名为 Video.h 的新文件中有上述内容，则构建工作正常，但是当我在包含许多类的现有文件中声明上述内容时，构建失败并出现错误，例如

```
../../include/CampaignCache.h:33:56: error: ‘Video’ was not declared in this scope
../../include/CampaignCache.h:33:62: error: template argument 1 is invalid
../../include/CampaignCache.h:33:62: error: template argument 2 is invalid
../../include/CampaignCache.h:33:64: error: template argument 2 is invalid
../../include/CampaignCache.h:33:64: error: template argument 5 is invalid
../../include/CampaignCache.h:33:89: error: invalid type in declaration before ‘;’ token
../../include/CampaignCache.h:97:51: error: ‘Video’ has not been declared
make[2]: *** [BaseOpenRTBBidRequest.o] Error 1
make[2]: Leaving directory `/home/asif/RTB3.0trunk/trunk/3.0/src/bidder/ssp/OpenRTB'
make[1]: *** [OpenRTB] Error 2
make[1]: Leaving directory `/home/asif/RTB3.0trunk/trunk/3.0/src/bidder'
make: *** [compile] Error 2 
```

理想情况下，我希望文件中的 Video 类带有子类，有人可以解释为什么一个会导致构建错误而另一个不会？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:37:46.650

我只是简单地将视频类放在一个独立的文件中，一切都开始正常工作

# javascript - 在所有调用的 $.post() 之前挂钩附加数据

> ID：14941812
> 
> 赞同：0
> 
> 时间：2013-02-18T17:20:01.360
> 
> 标签：javascript, jquery, ajax, post, hook

每次`$.post()`调用 jQuerys 方法时，我都无法弄清楚如何挂钩数据。

我有**几个**事件处理程序，它们在通过 AJAX 将它们提交到服务器之前从整个页面获取值。此类调用的示例如下：

```
var data = {
    link_data:{'foo': 'bar', 'foo2' : 'bar2'}
};

$.post('some_url',data,function(returned_data){
    //Do something with returned_data
}); 
```

但是，我想知道是否有一种方法可以挂钩随每个`$.post()`请求发送的附加数据。

本质上，我希望的是一种方法来修改在提交之前发送到服务器的“数据”参数，以便发送的值看起来更像这样：

```
{
 token: some_predefined_variable,
 link_data{'foo': 'bar', 'foo2' : 'bar2'}
} 
```

有没有办法把它挂起来，这样我就不必去修改每一个将数据发送到服务器的方法`$.post()`？

谢谢。

**更新：**我发现最好的解决方案实际上是在[这里](https://stackoverflow.com/a/4529949/1489130)发布的。有点烦人，您必须手动设置发布数据，但它可以工作:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T17:26:51.767

您可以使用`$.ajaxSetup()`和`beforeSend`

```
$.ajaxSetup({
    beforeSend: function(jqXHR, settings){
        settings.data = {token: some_predefined_variable, link_data : settings.data };
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:22:05.197

你可以试试这个：

```
var data = {
    link_data:{'foo': 'bar', 'foo2' : 'bar2'}
};

data.token = some_predefined_variable; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T17:23:16.113

您可以使用[$.ajaxSetup()](http://api.jquery.com/jQuery.ajaxSetup/)执行此操作：

```
$.ajaxSetup({
    data: {link_data : {'foo': 'bar', 'foo2' : 'bar2'} }
}); 
```

请参阅此[**链接**](http://www.bennadel.com/blog/2131-Using-jQuery-ajaxSetup-To-Accumulate-Global-Data-Parameters-For-AJAX-Requests.htm)以更好地解释它是如何完成的（以上就是您所需要的）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T17:25:12.353

您可能想实现自己的功能，例如

```
function SinmoksPost(userData){
    var x = {
        token: some_predefined_variable,
        data:userData
    }

    $.post('some_url',x,function(returned_data){
        //Do something with returned_data
    });
} 
```

然后打电话`SinmoksPost`而不是`$.post`

# php - ReCaptcha 在 FireFox 中不起作用

> ID：14941814
> 
> 赞同：0
> 
> 时间：2013-02-18T17:20:02.840
> 
> 标签：php, recaptcha

我在我的 register.php 页面上遇到了 reCaptcha 问题。这在 IE 中运行良好，但在 Firefox 和其他一些 Web 浏览器中运行良好。使用 Firefox 时出现“未定义索引：recaptcha_challenge_field”和“recaptcha_response_field”错误。试图追查我试图 W3 验证的问题，但又遇到这个问题，我一次又一次地被难住了。两者有关系吗？

将此文档作为 XHTML 1.0 过渡版本检查时发现错误！文档类型在此处不允许元素“表单”

上面提到的元素是在不允许的上下文中找到的。这可能意味着您有错误的嵌套元素——例如“body”部分中的“style”元素而不是“head”内部——或者两个重叠的元素（这是不允许的）。

此错误的一个常见原因是在 HTML 文档中使用了 XHTML 语法。由于 HTML 的隐式关闭元素规则，此错误可能会产生级联效果。例如，在 HTML 文档的“head”部分中为“meta”和“link”使用 XHTML 的“self-closure”标签可能会导致解析器推断“head”部分的结尾和“body”部分的开头" 部分（其中不允许使用“链接”和“元”；因此报告了错误）。

```
 <table class="formFont" width="600" align="center" cellpadding="8" cellspacing="0" style="border:#999 1px solid; background-color:#FBFBFB;">
    <form action="register.php" method="post" enctype="multipart/form-data">
      <tr>
        <td colspan="2"><font color="#FF0000"><?php print "$errorMsg"; ?></font></td>
      </tr>       
      <tr>
        <td width="116" bgcolor="#FFFFFF">User Name:</td>
        <td width="452" bgcolor="#FFFFFF"><input name="username" type="text" class="formFields" id="username" value="<?php print "$username"; ?>" size="32" maxlength="20" />
          <span id="nameresponse"><span class="textSize_9px"><span class="greyColor">Alphanumeric Characters Only</span></span></span></td>
      </tr>
      <tr>
        <td width="116" bgcolor="#FFFFFF">First Name:</td>
        <td width="452" bgcolor="#FFFFFF"><input name="firstname" type="text" class="formFields" id="firstname" value="<?php print "$firstname"; ?>" size="32" maxlength="20" />
          <span ><span class="textSize_9px"><span class="greyColor">Alphanumeric Characters Only</span></span></span></td>
      </tr>
      <tr>
        <td width="116" bgcolor="#FFFFFF">Last Name:</td>
        <td width="452" bgcolor="#FFFFFF"><input name="lastname" type="text" class="formFields" id="lastname" value="<?php print "$lastname"; ?>" size="32" maxlength="20" />
          <span ><span class="textSize_9px"><span class="greyColor">Alphanumeric Characters Only</span></span></span></td>
      </tr>
      <tr>
        <td bgcolor="#FFFFFF">Email Address:</td>
        <td bgcolor="#FFFFFF"><input name="email1" type="text" class="formFields" id="email1" value="<?php print "$email1"; ?>" size="32" maxlength="48" /></td>
      </tr>
      <tr>
        <td bgcolor="#FFFFFF">Confirm Email:</td>
        <td bgcolor="#FFFFFF"><input name="email2" type="text" class="formFields" id="email2" value="<?php print "$email2"; ?>" size="32" maxlength="48" /></td>
      </tr>
      <tr>
        <td bgcolor="#FFFFFF">Create Password:</td>
        <td bgcolor="#FFFFFF"><input name="pass1" type="password" class="formFields" id="pass1" size="32" maxlength="16" />
          <span class="textSize_9px"><span class="greyColor">Alphanumeric Characters Only</span></span></td>
      </tr>
      <tr>
        <td bgcolor="#FFFFFF">Confirm Password:</td>
        <td bgcolor="#FFFFFF"><input name="pass2" type="password" class="formFields" id="pass2" size="32" maxlength="16" />
        <span class="textSize_9px"><span class="greyColor">Alphanumeric Characters Only</span></span></td>
      </tr>
      <tr>
      </tr>
      <tr>
        <td bgcolor="#FFFFFF">&nbsp;</td>
        <td bgcolor="#FFFFFF"><?php          require_once('recaptchalib.php');
                  $publickey = "6LcL98wSAAAAAK93qqBkJfF0ltsFSieV3inlMdY7"; 
                  echo recaptcha_get_html($publickey);        ?><br />
          <input type="submit" name="Submit" value="Sign Up!" />
        </td>
      </tr>
    </form>
  </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:05:12.023

将表格开始标记移到表格开始标记之外，并在表格结束标记之后关闭表格。从技术上讲，只有 tbody、tr 和 td 标签应该放在一个表单中

# html - 报告 HTML + CSS + 打印 - Chrome 错误

> ID：14941815
> 
> 赞同：3
> 
> 时间：2013-02-18T17:20:03.373
> 
> 标签：html, css, printing, report, css-tables

我正在尝试用 HTML + CSS 制作报告。我的模板包含页眉、内容和页脚。我想在所有页面中重复页眉和页脚，作为基础报告。

我的 CSS 看起来像这样：

**标题：**

```
@media print {
 div.report-header {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    overflow: hidden;
    padding-bottom: 15px;
    border-bottom: 2px solid #000034;
  }
} 
```

**页脚：**

```
@media print {
  div.report-header {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    overflow: hidden;
    padding-bottom: 15px;
    border-bottom: 2px solid #000034;
  }
 } 
```

可能的错误是，在 Firefox 上，报告工作正常，在所有页面中重复页眉和页脚，但在 Chrome 中，页眉仅出现在第一页，页脚仅出现在最后一页。

我尝试了很多教程，包括使用表格：

```
@media print {
  thead { display: table-header-group; width: 100%; background: red;}
  tfoot { display: table-footer-group; width: 100%; background: green;}
} 
```

但结果是一样的，Firefox 工作正常，而 Chrome 不工作。请问，我能做些什么来做这个简单的报告？有没有插件可以做这样的事情？

我正在使用 Chrome 版本 24.0.1312.70。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:34:33.290

如果我没记错的话，这只适用于 Firefox、Opera 和 IE。

# serial-port - Arduino 的串行数据

> ID：14941816
> 
> 赞同：0
> 
> 时间：2013-02-18T17:20:03.350
> 
> 标签：serial-port, arduino, hardware-interface

我刚刚开始了解 Arduino。我有一个来自 Radio Shack 的 1 米长的 LED 灯带可以玩。

该条带有一个示例程序，因此我查看了它并将其缩减为基础知识，但我不明白发生了什么。我正在找人解释发生了什么以及功能代码是如何工作的。

这是代码：

```
#include <avr/pgmspace.h>

#define DATA_1 (PORTC |=  0X01)
#define DATA_0 (PORTC &=  0XFE)
#define STRIP_PINOUT (DDRC=0xFF)

/*
green 0xff0000
cyan 0xff7f00
truquoise 0xffff00
dark blue 0x00ff00
red 0x0000ff
dark yellow 0x6f00ff
yellow 0x8f00ff
white 0xffffff
off white 0x444444
dim white 0x111111
off 0x000000
*/

PROGMEM long test[10][10]={
  {0x000000,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00},
  {0x00ff00,0x000000,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00},
  {0x00ff00,0x00ff00,0x000000,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00},
  {0x00ff00,0x00ff00,0x00ff00,0x000000,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00},
  {0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x000000,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00},
  {0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x000000,0x00ff00,0x00ff00,0x00ff00,0x00ff00},
  {0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x000000,0x00ff00,0x00ff00,0x00ff00},
  {0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x000000,0x00ff00,0x00ff00},
  {0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x000000,0x00ff00},
  {0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x00ff00,0x000000},
};

void setup() {

  STRIP_PINOUT;

  reset_strip();

}

void loop() 
{
  while (1)
  {
    send_pattern(test, 10, 50);
    reset_strip();
  }
}

void send_pattern(long data[][10], int length, int rate)
{
  int i=0;
  int j=0;

  for (i=0; i<length; i++)
  {
    noInterrupts();
    for (j=0; j<10; j++)
    {
      send_strip(pgm_read_dword_near(&data[i][j]));
    }
    interrupts();

    delay(rate);

  }

}

void send_strip(uint32_t data)
{
  int i;
  unsigned long j=0x800000;

  for (i=0;i<24;i++)
  {
    if (data & j)
    {
      DATA_1;
      __asm__("nop\n\t");
      __asm__("nop\n\t");
      __asm__("nop\n\t");
      __asm__("nop\n\t");
      __asm__("nop\n\t");
      __asm__("nop\n\t");
      __asm__("nop\n\t");
      __asm__("nop\n\t");
      __asm__("nop\n\t");    
      __asm__("nop\n\t");
      __asm__("nop\n\t");
      __asm__("nop\n\t");
      __asm__("nop\n\t");
      __asm__("nop\n\t");
      __asm__("nop\n\t");
      __asm__("nop\n\t");
      __asm__("nop\n\t");
      __asm__("nop\n\t");
      DATA_0;
    }
    else
    {
      DATA_1;
      __asm__("nop\n\t");
      __asm__("nop\n\t");
      __asm__("nop\n\t");
      __asm__("nop\n\t");
      __asm__("nop\n\t");
      __asm__("nop\n\t");
      __asm__("nop\n\t");
      __asm__("nop\n\t");
      __asm__("nop\n\t");    
      DATA_0;
    }

    j>>=1;
  }
}

void reset_strip()
{
  DATA_0;
  delayMicroseconds(20);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:50:51.640

如果您不了解 C 和/或以前没有使用过 Arduino，那么该代码不是一个好的起点。

Arduino 编程语言（称为 Wiring）将 C 代码的许多原始细节抽象为更简化的格式（和/或语言），以便初学者更容易在他们的想法上取得进展，而不会陷入“成为程序员”的困境。 " Wiring 代码在编译之前被解释为 C 代码，这使用户能够在一个草图中将 C（和 C++）与 Wiring 混合。

您上面的代码混合了 C 和 Wiring 语法，因此您不会在 Arduino 文档中找到有关语法的所有信息，但值得搜索您不理解的关键字或术语。不同之处在于设置和使用串行端口。请参阅 Arduino 文档`Serial`以了解它是如何在其中完成的（以及理解起来有多简单）。

我将粗略地描述一下功能（在我太无聊之前）......

* * *

这一行定义了一个变量（在`PROGMEM`EEPROM 内存中），命名`test`为 10 x 10 的数字数组（`longs`）：例如，有 10 个数组，每个数组包含 10 个数字（以十六进制表示）

```
PROGMEM long test[10][10]={ 
```

* * *

这个块调用一个函数（代码顶部的#defined）来设置一个端口）和一个函数（在代码的底部）来重置条带。

```
void setup() 
  STRIP_PINOUT;
  reset_strip();
} 
```

* * *

```
void loop() 
{
  while (1) // i.e. do this forever
  {
    // send the test var, its length and the delay amount between each pattern
    send_pattern(test, 10, 50); 
    reset_strip();
  }
} 
```

* * *

此函数遍历传递的 var `data`（在本例中为 var 'test'），使用调用的 AVR 函数读取数组中位置 [i][j] 处的`pgm_read_dword_near`值，并将该值发送到将`send_strip`其发送出去的函数串口。发送每个数组后，它会调用`delay()`等待`rate`.

```
void send_pattern(long data[][10], int length, int rate)
{
  int i=0;
  int j=0;

  for (i=0; i<length; i++)
  {
    noInterrupts();
    for (j=0; j<10; j++)
    {
      send_strip(pgm_read_dword_near(&data[i][j]));
    }
    interrupts();

    delay(rate);

  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T22:38:17.927

一米长的 LED 灯条有 10 段，每段有 3 个 LED，所以即使总共有 30 个 LED，您也只能控制 10 段。

LED 灯条有红（电源）、黑（地）和绿（信号）三根线。

每个段采用 24 位十六进制数来确定 LED 的颜色。当一个段获得它的 24 位时，它会设置它的颜色，然后将其余的信号传输到下一个段。

信号为高电平或低电平，但对于接收信号的芯片，它通过高电平然后低电平的时间长度来确定它是 1 还是零。条带随附的手册用图片更好地解释了这一点。

Highs 和 Lows 的时间由 void send_strip(uint32_t data) 方法控制。告诉微`__asm__("nop\n\t")`控制器基本上浪费了一个周期，所以它基本上是一个非常短的延迟（在 16MHz Arduino 上为 62.5ns）。我不得不使用 send_strip() 方法来获得正确的时间，否则所有的 LED 都会变成全白。

void send_pattern(long data[][10], int length, int rate) 将 10 种颜色发送到 LED 灯条的 10 段。对于 1M 灯条，这应该是所有的 LED。

PROGMEM long test[10][10] 中的每一行都是 Strip 的一组颜色。在这种情况下，您有 10 种条带变体。

我目前正在玩这条带，所以如果需要更多示例或解释，请告诉我。

# c++ - 两个项目之间的 MFC CString 链接器错误

> ID：14941817
> 
> 赞同：2
> 
> 时间：2013-02-18T17:20:17.520
> 
> 标签：c++, mfc, cstring, unicode-string

我在 c++ (MFC) 中有 2 个项目一个是库项目，我在第二个项目中使用它（一个可执行文件）。

它们一起工作得很好，直到我从常规项目中调用一个以 CString 作为参数的函数。我收到这样的链接器错误

```
error LNK2019: unresolved external symbol "public: void __thiscall 
CTextDisplay::SetText1(class ATL::CStringT<wchar_t,class StrTraitMFC_DLL<wchar_t,
class ATL::ChTraitsCRT<wchar_t> > >)" (?SetText1@CTextDisplay@@QAEXV?$CStringT@_WV?
$StrTraitMFC_DLL@_WV?$ChTraitsCRT@_W@ATL@@@@@ATL@@@Z) referenced in function 
"public: void __thiscall CManualPane::SetBeadCountFor(int,double)" 
(?SetBeadCountFor@CManualPane@@QAEXHN@Z)    C:\source\IQ-Project\IQ\ManualPane.obj  IQ 
```

可执行项目将其字符集设置为 UNICODE，但库将其设置为多字节字符集。我真的无法改变它们而不会出现大量可笑的错误。

有什么建议么？

编辑：我们在这两个项目中设置不同的原因是因为可执行项目基本上是我的小组没有构建或创建的外部项目。我们只需要把它带进来并使用它。图书馆项目是我们几年来一直在努力的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T17:45:40.930

当您在可执行文件中包含库项目的标头时，可能会在函数声明中使用 typedef。由于可执行文件使用 UNICODE，因此声明现在使用 UNICODE。但是，库实现仍然在 MultiByte 中，因此定义与导致链接器错误的声明不匹配。

查看这些 typedef 是如何设置的，您可能可以在包含的标头周围做一些特殊的#define、#undef。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-04T16:48:27.630

最后证明，避免在同一个解决方案中使用 unicode 和多字节项目是一个更好的主意，所以我将它全部移到 unicode 并从那里开始

# php - 将安装的 Joomla 代码与 bash 中的默认源代码进行比较

> ID：14941818
> 
> 赞同：0
> 
> 时间：2013-02-18T17:20:17.663
> 
> 标签：php, bash, joomla, compare

我正在寻找一种简单的方法来比较当前 Joomla 安装代码与您从官方网站下载 Joomla 时获得的默认 Joomla 代码。

我进行了一些搜索，但找不到与我的问题相关的任何内容，我确实知道如何使用 bash 并比较 2 个文件，但是否可以比较 2 个目录并列出代码中的差异？例如，如果尝试查找添加到核心 Joomla 文件中的内容，这将非常有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T17:26:40.543

diff的`-r`标志将通过目录递归。

如果您只想知道哪些文件不同，您可以`diff -qr /source/dir/ /target/dir/`.

请参阅差异手册页：[http ://unixhelp.ed.ac.uk/CGI/man-cgi?diff](http://unixhelp.ed.ac.uk/CGI/man-cgi?diff)

# php - CodeIgniter 登录系统不工作 404 错误错误请求

> ID：14941820
> 
> 赞同：1
> 
> 时间：2013-02-18T17:20:24.513
> 
> 标签：php, codeigniter, login, http-status-code-404, bad-request

使用 CodeIgniter 搭建一个简单的登录系统。

当我尝试提交表单数据时出现此错误

**404 Page Not Found 找不到您请求的页面。**

我不知道为什么！这是我的表格：

```
 <?php echo form_open('VerifyLogin/index'); ?>
     <label for="username">Username:</label>
     <input type="text" size="20" id="username" name="username"/>
     <br/>
     <label for="password">Password:</label>
     <input type="password" size="20" id="passowrd" name="password"/>
     <br/>
     <input type="submit" value="Login"/></form> 
```

这是表单动作->

```
 http://localhost/LoginTut/index.php/VerifyLogin/index 
```

用户应该被带到一个新页面。不知道为什么会出现这个问题！！有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:38:56.610

我刚刚查看了您的另一篇文章，发现您将控制器命名为“verify_login.php”，但您的类名为“VerifyLogin”。在 Codeigniter 中，您的类需要与您的文件命名相同，只是使用大写字母。为了使该页面正常工作，您应该将控制器文件重命名为“verifyLogin.php”或将您的类重命名为“Verify_Login”。

# c - 如何编译和链接示例代码以获取二进制文件？

> ID：14941823
> 
> 赞同：3
> 
> 时间：2013-02-18T17:20:30.563
> 
> 标签：c, arm, linker-scripts

我正在使用 TI Stellaris LM3S1968。该 MCU 具有 ARM Cortex-M3。

我在装有 Windows 7 的笔记本电脑上安装了一个 VM，并在那里安装了[GNU Tools for ARM Embedded Processors](https://launchpad.net/gcc-arm-embedded/)。然后我安装了[Stellaris Flash Programmer、GUI 和命令行](http://www.ti.com/tool/lmflashprogrammer)。我还安装了[Stellaris FTDI 驱动程序](http://www.ti.com/tool/lm_ftdi_driver)。

最后，我下载并解压了[EK-LM3S1968 固件开发包](http://www.ti.com/tool/sw-ek-lm3s1968)。

在提取的文件夹中，有一些示例。其中之一是眨眼的。如果我去 /StellarisWare/board/ek-lm3s1968/blinky/gcc/ 有一个名为 blinky.bin 的文件。使用 Stellaris Flash Programmer，我可以将它连接到我的计算机并对其进行闪存，它会工作的。我尝试了各种示例，它们都有效。

现在我的目标是编译 /StellarisWare/board/ek-lm3s1968/blinky/ 中提供的示例代码，并将其烧写。但是，我运气不佳，因为我对 C 或微控制器编程不是很有经验。

我将 LM3S1968 库从 StellarisWare 文件夹复制到编译器的包含文件夹。然后我按照我在网上找到的一些例子，但我没有成功。这是我尝试过的：

```
arm-none-eabi-gcc -mcpu=cortex-m3 -mthumb blinky.c -nostartfile -T blinky.ld -o blinky.o
arm-none-eabi-ld -T blinky.ld -o blinky.out blinky.o
arm-none-eabi-objcopy -Obinary blinky.out blinky.bin 
```

当我刷新这个 .bin 文件时，它什么也没做，LED 一直亮着。

我认为这是因为有一个 startup_gcc.c 文件，它处理在运行程序之前启动 MCU。但我不确定如何捆绑它。

有很多文件适用于不同的 IDE，但它们不是免费的，所以我想使用 GNU 工具。

我尝试在 StackOverflow 和谷歌搜索中搜索，但我无法找到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:48:28.797

I believe the linker is discarding the startup code. A good way to make sure it gets included is using [KEEP](http://www.scoberlin.de/content/media/http/informatik/gcc_docs/ld_3.html#SEC25) in your linker script. This will make sure the linker does not discard your startup code. If you don't have your startup code in a section, you need to do that first.

# odbc - odbc 应用程序脚本

> ID：14941824
> 
> 赞同：2
> 
> 时间：2013-02-18T17:20:36.913
> 
> 标签：odbc, google-apps-script

我们有一个允许 ODBC 连接的核心应用程序。目前我使用 MS Excel 或 Access 创建报告。我每周多次将它们打印成 .PDF 并通过电子邮件发送给经理（并非所有经理都可以访问我们的核心应用程序）。我们有 Google Apps，我想知道是否有人有将 ODBC 与 GAS 连接的经验。我喜欢认为我的流程可以更好地自动化。

我还有一些数据库，我通过 Excel 向用户提供了动态报告。我想知道我是否也可以将其迁移到 GAS 环境中。

任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:05:24.610

您可以使用 JDBC 连接到底层数据库，然后在 GAS 中创建报告和其他数据操作。

请参阅文档\示例链接：[https ://developers.google.com/apps-script/jdbc](https://developers.google.com/apps-script/jdbc)

# javascript - 如何使用 jQuery 插件访问 $(this)

> ID：14941828
> 
> 赞同：1
> 
> 时间：2013-02-18T17:20:47.133
> 
> 标签：javascript, jquery, plugins, selector, this

我正在使用 jQuery 评级[插件](http://www.myjqueryplugins.com/jquery-plugin/jrating)，我无法将成功消息显示到相应的 div 中，因为 $(this) 不引用选择器，而是返回 Object 对象。

[这是插件代码](https://github.com/alpixel/jRating/blob/master/jquery/jRating.jquery.js)

这是我的代码：

```
 $(".basic").jRating({
     bigStarsPath: 'assets/stars.png',
     rateMax: 5,
     length : 5,
     phpPath : '<%= Rails.application.class.routes.url_helpers.ratings_path %>',
     onSuccess : function(){
       $(this).find(".message").append('<small>Thanks for your vote!</small>'); 
     }
   }); 
```

所以问题是 $(this) 没有引用 $(".basic") 我想知道如何在插件中访问选择器。我很确定这可能是新手问题，但我的 javascript 技能根本不广泛。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:23:16.823

的第一个参数`onSuccess`是`element`。用那个。

```
onSuccess : function(element){
  $(element).find(".message").append('<small>Thanks for your vote!</small>'); 
} 
```

由插件来设置`this`某些东西，在这种情况下，插件会使用您传递给的对象而不是元素来触发`onSuccess`函数。`this``options``jRating`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:24:47.367

```
 onSuccess : function(element, rate){
   $(element).find(".message").append('<small>Thanks for your vote!</small>'); 
 } 
```

您可以在成功选项中访问元素和/或速率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:25:52.260

```
 var elem = $(this);
$(".basic").jRating({
     bigStarsPath: 'assets/stars.png',
     rateMax: 5,
     length : 5,
     phpPath : '<%= Rails.application.class.routes.url_helpers.ratings_path %>',
     onSuccess : function(){
       elem.find(".message").append('<small>Thanks for your vote!</small>'); 
     }
   }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T17:30:37.800

关于 jRating 源代码[行](https://github.com/alpixel/jRating/blob/master/jquery/jRating.jquery.js#L175)，将传递给 onSuccess 和 onError 处理程序的参数是元素和评级，因此解决方案是：

```
$(".basic").jRating({
 bigStarsPath: 'assets/stars.png',
 rateMax: 5,
 length : 5,
 phpPath : '<%= Rails.application.class.routes.url_helpers.ratings_path %>',
 onSuccess : function(element /*, rating */){
   $(element).find(".message").append('<small>Thanks for your vote!</small>'); 
 }
}); 
```

# android - 位图大小超出 VM 预算 - 如果设备内存太少怎么办？

> ID：14941830
> 
> 赞同：0
> 
> 时间：2013-02-18T17:20:48.357
> 
> 标签：android

我有一个已经上市一段时间的应用程序，我已经在多台设备上测试了这个应用程序，并且玩了很多次都没有问题。然后最近我在一个相当糟糕的低性能设备上对其进行了测试，并在第一次运行时得到了可怕的“位图大小超过 VM 预算”错误。我之前在使用完全不同的应用程序时遇到过这个错误，但它只是在多次重复使用后才发生的。当我当时研究这个错误时，我看到解决这个问题的最热门的答案是与释放/垃圾收集问题有关......但大概它必须有可能在没有做出任何事情的情况下遇到这个错误编码错误。当然，错误可以通过使用功率不足的设备发生？...如果可以，您如何将其与编码错误区分开来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:39:07.817

> 肯定会因为使用功率不足的设备而发生错误吗？

并不真地。一个“动力不足的设备”可以显示位图，你可以从主屏幕上看出这一点。问题是它可以显示*多大*的图像，就分辨率和位深度而言，以及一次可以在内存中保存*多少这样的图像。*您应该使用[`getMemoryClass()`on 之类的`ActivityManager`](http://developer.android.com/reference/android/app/ActivityManager.html#getMemoryClass%28%29)东西来查看您的堆有多大，然后调整您的图像处理以匹配。

# python - Python - 从文件中提取文本

> ID：14941832
> 
> 赞同：0
> 
> 时间：2013-02-18T17:20:54.800
> 
> 标签：python, file

我的代码（到目前为止）：

```
ins = open( "log", "r" )
array = []
for line in ins:
    array.append( line )

for line in array:
    if "xyz" in line:
        print "xyz found!"
    else:
        print "xyz not found!" 
```

日志文件示例：

```
Norman xyz Cat
Cat xyz Norman
Dog xyz Dog
etc. etc. 
```

我目前拥有的 Python 脚本找到 xyz 并打印它找到了它。但我想做的不仅仅是找到 xyz。我想在 xyz 之前和 xyz 之后立即找到这个词。完成后，我希望能够存储（暂时，您的回复中不需要数据库）Norman 在“xyz”之前出现的次数以及 Norman 在“xyz”之后出现的次数（这适用于所有其他名称和动物也是如此）。

这纯粹是一个学习练习，所以如果你能包括你想出答案的“过程”，将不胜感激。我想知道如何像程序员一样思考，如果你愿意的话。这段代码的大部分只是我在谷歌上找到的东西，然后混合在一起，直到我得到了一些有用的东西。如果有更好的方法来写我目前拥有的东西，我也会很感激！

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T17:30:11.730

如果“单词”是指“空格分隔的标记”，则可以使用空格分隔行

```
x, key, y = line.split() 
```

然后检查是否`key == "xyz"`，如果是，采取行动。

“采取行动”部分显然意味着“计算东西”，这就是`collections.Counter`目的。要计算 之前和之后的东西`xyz`，请使用两个计数器：

```
from collections import Counter

before = Counter()
after = Counter()

for line in open("log"):
    x, key, y = line.split()
    if key == "xyz":
        # increment counts of x and y in their positions
        before[x] += 1
        after[y] += 1

# print some statistics
print("Before xyz we found:")
for key, val in before.iteritems():
    print("    %s %s" % (key, val))
# do the same for after 
```

请注意，您当前的脚本会浪费大量时间和内存将文件读入 RAM，因此我也修复了该问题。要遍历文件的行，您不需要中间`array`变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:30:22.157

`'abc'.split('b')`将返回`['a','c']`因此考虑到这一点，我们可以像这样更改您的代码：

```
ins = open( "log", "r" )
array = []
prefixes = []
suffixes = []
for line in ins:
    array.append( line )

for line in array:
    if "xyz" in line:
            prefixes.append(line.split("xyz")[0])
            suffixes.append(line.split("xyz")[1])
    else:
        print "xyz not found!" 
```

或者，如果我们只想计算某事在 xyz 之后或之前出现的所有时间，我们可以使用[Counter](http://docs.python.org/2/library/collections.html)

```
from collections import Counter
ins = open( "log", "r" )
array = []
prefixes = Counter()
suffixes = Counter()
for line in ins:
    array.append( line )

for line in array:
    if "xyz" in line:
            prefixes[line.split("xyz")[0]] += 1
            suffixes[line.split("xyz")[1]] += 1
    else:
        print "xyz not found!"
print "prefixes:" + str(prefixes)
print "suffixes:" + str(suffixes) 
```

# bash - 进程替换 - tr 表示“额外操作数 /dev/fd/63”

> ID：14941841
> 
> 赞同：3
> 
> 时间：2013-02-18T17:21:14.980
> 
> 标签：bash, process-substitution

我正在努力理解流程替换。据我所知，

```
echo abcd | tr -d 'b'
tr -d 'b' <(echo abcd) 
```

都应该给出相同的输出。但是第一个有效（输出是'acd'）但是第二个说

```
tr: extra operand '/dev/fd/63' 
```

为什么是这样？tr 不只是通过管道接收“abcd”，而不是“/dev/fd/63”吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T17:23:43.680

进程替换的工作方式是，Bash 将替换`<(echo abcd)`为 (例如) `/dev/fd/63`，最常见的 *nix 实用程序会将其视为文件名并打开而不是标准输入。`tr`但是，不*接受*文件名参数；它只*需要*标准输入。

要传递`<(echo abcd)`标准输入的结果，您可以使用另一个`<`：

```
tr -d b < <(echo abcd) 
```

# php - SQL 查询中的变量 - PHP MYSQL

> ID：14941849
> 
> 赞同：0
> 
> 时间：2013-02-18T17:21:32.037
> 
> 标签：php, mysql, variables

我有 2 个可变的持有日期。使用变量时，我在 SQL 语句中遇到语法错误。

```
$from_date = '2013-02-13';
$to_date = '2013-02-20';
$query="SELECT * FROM mytable where datex >= ".$fromdate." AND datex <= ".$todate."; 
```

帮我识别并纠正这个语法错误？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T17:23:23.640

你需要引用你的变量：

```
$query="SELECT * FROM mytable where datex >= '".$fromdate."' AND datex <= '".$todate." . "'"; 
```

但最好使用带有绑定变量的准备好的语句。然后您的查询可能看起来像（PDO）：

```
$query="SELECT * FROM mytable where datex >= :fromdate AND datex <= :todate"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:37:04.450

我正在做类似的事情，这是正确的方法吗？

```
 <?php
  include 'connect.php';

  $id1 = $_POST['PatientID']; //Text box the user searches in
  $result = mysqli_query($con,"SELECT * FROM PatientRecords WHERE PatientID= '".$id1."'");
  while($row = mysqli_fetch_array($result)) 
```

# android - 使用相机后，我在我的 android 应用程序中从 onActivityResult 收到 NullPointerException 和 Failure Delivering Result 异常

> ID：14941850
> 
> 赞同：1
> 
> 时间：2013-02-18T17:21:34.393
> 
> 标签：android, android-intent, nullpointerexception, android-camera

我在这里查看了很多其他问题，但似乎没有一个对我有帮助。我正在编写应用程序，您可以在其中按下按钮打开相机。效果很好，但是当我保存图片时它崩溃了，我得到了那个错误。到目前为止，这是我的代码

```
 public class MainActivity extends Activity {

    private int TAKE_PICTURE = 1337;
    private Uri outputFileUri;
    private int screenHeight;
    private int screenWidth;
    private ImageView background;
    private String ORIGINAL_FILE = "photo.jpg";
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button take = (Button)findViewById(R.id.take);
        Button share = (Button)findViewById(R.id.share);
        take.setOnClickListener(new takeInstr(this));
        ImageView background = (ImageView)findViewById(R.id.background);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void startCamera() {
        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        File file = new File(Environment.getExternalStorageDirectory(), ORIGINAL_FILE);
        outputFileUri = Uri.fromFile(file);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
        startActivityForResult(intent, TAKE_PICTURE);
    }
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == TAKE_PICTURE && resultCode != RESULT_CANCELED) {  
            if (data != null) {
                BitmapFactory.Options options = new BitmapFactory.Options();
                options.inJustDecodeBounds = true;
                String file = Environment.getExternalStorageDirectory() + "/test.jpg";
                BitmapFactory.decodeFile(file, options);
                int imageHeight = options.outHeight;
                int imageWidth = options.outWidth;
                String imageType = options.outMimeType;
                DisplayMetrics metrics = this.getResources().getDisplayMetrics();
                screenHeight = metrics.heightPixels;
                screenWidth = metrics.widthPixels;
                int heightRatio = Math.round((float) imageHeight / (float) screenHeight);
                int widthRatio = Math.round((float) imageWidth / (float) screenWidth);
                options.inSampleSize = heightRatio < widthRatio ? heightRatio : widthRatio;
                options.inJustDecodeBounds = false;
                background.setImageBitmap(BitmapFactory.decodeFile(file, options));
            }
            else {

            }
        }
    }
}

package com.example.photoshare;

import android.view.View;
import android.view.View.OnClickListener;

public class takeInstr implements OnClickListener {
    private MainActivity mainActivity;
    public takeInstr(MainActivity mainActivity) {
        this.mainActivity = mainActivity;
    }
    @Override
    public void onClick(View v) {
        mainActivity.startCamera();

    }

} 
```

`

我的 xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<ImageView 
    android:id="@+id/background"
    android:src="@drawable/great_wall"
    android:layout_width="fill_parent" 
    android:scaleType="fitXY"
    android:layout_height="fill_parent" />

<LinearLayout
    android:id="@+id/buttonLayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:gravity="center_horizontal"
    android:weightSum="1.0" >

    <Button
        android:id="@+id/take"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="0.5"
        android:text="@string/take" />

    <Button
        android:id="@+id/share"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="0.5"
        android:text="@string/share" />
</LinearLayout> 
```

这是我的 logcat 消息

```
02-18 12:42:56.266: W/dalvikvm(627): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
02-18 12:42:56.357: E/AndroidRuntime(627): FATAL EXCEPTION: main
02-18 12:42:56.357: E/AndroidRuntime(627): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1337, result=-1, data=null} to activity {com.example.photoshare/com.example.photoshare.MainActivity}: java.lang.NullPointerException
02-18 12:42:56.357: E/AndroidRuntime(627):  at android.app.ActivityThread.deliverResults(ActivityThread.java:2980)
02-18 12:42:56.357: E/AndroidRuntime(627):  at android.app.ActivityThread.handleSendResult(ActivityThread.java:3023)
02-18 12:42:56.357: E/AndroidRuntime(627):  at android.app.ActivityThread.access$1100(ActivityThread.java:123)
02-18 12:42:56.357: E/AndroidRuntime(627):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1177)
02-18 12:42:56.357: E/AndroidRuntime(627):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-18 12:42:56.357: E/AndroidRuntime(627):  at android.os.Looper.loop(Looper.java:137)
02-18 12:42:56.357: E/AndroidRuntime(627):  at android.app.ActivityThread.main(ActivityThread.java:4424)
02-18 12:42:56.357: E/AndroidRuntime(627):  at java.lang.reflect.Method.invokeNative(Native Method)
02-18 12:42:56.357: E/AndroidRuntime(627):  at java.lang.reflect.Method.invoke(Method.java:511)
02-18 12:42:56.357: E/AndroidRuntime(627):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-18 12:42:56.357: E/AndroidRuntime(627):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-18 12:42:56.357: E/AndroidRuntime(627):  at dalvik.system.NativeStart.main(Native Method)
02-18 12:42:56.357: E/AndroidRuntime(627): Caused by: java.lang.NullPointerException
02-18 12:42:56.357: E/AndroidRuntime(627):  at com.example.photoshare.MainActivity.onActivityResult(MainActivity.java:69)
02-18 12:42:56.357: E/AndroidRuntime(627):  at android.app.Activity.dispatchActivityResult(Activity.java:4649)
02-18 12:42:56.357: E/AndroidRuntime(627):  at android.app.ActivityThread.deliverResults(ActivityThread.java:2976)
02-18 12:42:56.357: E/AndroidRuntime(627):  ... 11 more
02-18 12:42:56.686: I/dalvikvm(627): threadid=3: reacting to signal 3
02-18 12:42:56.726: I/dalvikvm(627): Wrote stack traces to '/data/anr/traces.txt'
02-18 12:42:57.047: I/dalvikvm(627): threadid=3: reacting to signal 3
02-18 12:42:57.086: I/dalvikvm(627): Wrote stack traces to '/data/anr/traces.txt'
02-18 12:42:59.716: I/Process(627): Sending signal. PID: 627 SIG: 9 
```

我知道当它返回 null 时我应该做一些其他的事情，但我不知道该怎么做，所有的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T01:11:06.323

您的代码中有两种不同的东西可能为空。第一个问题可能是 BitmapFactory 无法解码您提供的文件。另外你确定你只想解码`test.jpg`而不是相机拍摄的那个吗？

第二个可能是您的`background`观点有问题。根据您的活动的启动类型，[可能会发生](https://stackoverflow.com/a/3546419/180538)在之前`onActivityResult()`调用的情况，`onCreate()`这会导致`background`变量仍然为空。

为了深入挖掘，您应该将解码的位图分配给一个新变量，看看它是否为空，并检查是否`background`为空......

# python - 如何将每行的多个数组元素打印到文本文件

> ID：14941854
> 
> 赞同：2
> 
> 时间：2013-02-18T17:21:59.880
> 
> 标签：python, list, output, text-files

我有一个任意长度的一维数组`arr1 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, ...]`。

如何将其打印到文本文件（整数/浮点数由空格分隔），以便每 7 个元素打印在文本文件的同一行上？

所以我希望文本文件看起来像这样：

第 1 行：`1 2 3 4 5 6 7`

第 2 行：`8 9 10 11 12 13 14`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T17:57:57.437

您的问题可以分为三个部分：

1.  如何将任意大小的列表划分为特定长度的块
2.  如何使用空格作为分隔符打印整数/浮点数列表
3.  如何写入文件

## 将任意大小的列表划分为特定长度的块

使用[此答案](https://stackoverflow.com/questions/8991506/iterate-an-iterator-by-chunks-of-n-in-python/8991553#8991553)`grouper`中描述的方法：

```
import itertools

def grouper(n, iterable):
    it = iter(iterable)
    while True:
       chunk = tuple(itertools.islice(it, n))
       if not chunk:
           return
       yield chunk 
```

您可以轻松地将任意长度的列表拆分为所需长度的块。例如：

```
>>> arr1 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16]
>>> for chunk in grouper(7, arr1): print chunk
... 
(1, 2, 3, 4, 5, 6, 7)
(8, 9, 10, 11, 12, 13, 14)
(15, 16) 
```

## 使用空格作为分隔符打印整数/浮点数列表

将列表加入字符串的标准方法是使用[`string.join()`](http://docs.python.org/2/library/string.html#string.join). 但是，这仅适用于字符串列表，因此我们需要首先将每个元素转换为其字符串表示形式。这是一种方法：

```
>>> a = [1, 2, 3, 4]
>>> print " ".join(str(x) for x in a)
1 2 3 4 
```

在前面的例子中使用这个方法，我们得到：

```
>>> for chunk in grouper(7, arr1):
...   print " ".join(str(x) for x in chunk)
... 
1 2 3 4 5 6 7
8 9 10 11 12 13 14
15 16 
```

这几乎就是你想要的输出。现在我们需要做的就是将其写入文件。

## 写入文件

```
with open("outfile.txt", "w") as f:
  for chunk in grouper(7, arr1):
    f.write(" ".join(str(x) for x in chunk) + "\n") 
```

有关详细信息，请参阅[读取和写入文件](http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:29:27.720

```
>>> [arr1[7 * i: 7 * i + 7] for i in range(0, 1 + len(arr1) / 7)]
[[1, 2, 3, 4, 5, 6, 7], [8, 9, 10, 11, 12, 13, 14], [15]] 
```

然后你只需要迭代这个列表（列表），将它们插入文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T17:29:49.403

你可以这样做：

```
liNums = xrange(1, 20)
x = 0
line = ""
for i in liNums:
    x+=1
    line += "%s " % i
    if not x%7:
        line += "\n"
#send line to output, here I will just print it
print line 
```

这里每 7 个项目添加一个新行...输出如下所示：

```
1 2 3 4 5 6 7 
8 9 10 11 12 13 14 
15 16 17 18 19 
```

希望有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T17:30:23.500

```
>>> arr1 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]
>>> for i in xrange(0,len(arr1),7):
...     print arr1[i:i+7]
... 
[1, 2, 3, 4, 5, 6, 7]
[8, 9, 10, 11, 12, 13, 14] 
```

或者你可以这样做：

```
>>> arr1 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]
>>> results = map(str,arr1)
>>> for i in range(0,len(arr1),7):
...     ','.join(results[i:i+7])
... 
'1,2,3,4,5,6,7'
'8,9,10,11,12,13,14' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-18T17:45:02.730

```
from itertools import imap
print '\n'.join((' '.join(imap(str, arr1[i*7:(i+1)*7])) for i in xrange((6+len(arr1))/7))) 
```

或者，

```
 groups_of_seven = (arr1[i*7:(i+1)*7] for i in xrange((6+len(arr1))/7))
 groups_of_seven_strings = (imap(str, i) for i in groups_of_seven)
 groups_of_strings = (' '.join(i) for i in groups_of_seven_strings)
 one_string = '\n'.join(groups_of_strings) 
```

将嵌套`join`的 s 与`izip`技术相结合：

```
print '\n'.join((' '.join(j) for j in izip(*[imap(str, arr1)]*7))) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-18T17:45:54.763

`zip`您可以使用以下成语对序列进行分块：

```
from itertools import izip

def chunk(seq, n):
    return izip(*[iter(seq)]*n) 
```

然后，您可以为 编写一个迭代器`writelines`：

```
def chunkedlines(seq, n):
    for line in chunk(seq, 7):
        yield ' '.join(str(item) for item in line)
        yield "\n" 
```

最后使用它：

```
from StringIO import StringIO
fp = StringIO('wb')

arr1 = range(1, 15)

fp.writelines(chunkedlines(arr1, 7))

print fp.getvalue() 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-18T17:58:04.453

```
output=''
col = 0
for i in arr1:
    output +="%s " % i #write an element of the array to the output and append a space
    col += 1 #count the number of elements on the current line
    if col==7: #if 7 elements have been entered, append a new line and restart the count
        output += "\n"
        col = 0

f = open("filepath.txt",'w') #open a file (replace filepath.txt with the actual filename)
f.write(output) # write the output to the text file
f.close() #close the file object 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-18T19:32:39.920

在 Python 中，想想“生成器”！

```
li = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14,101,
      203,514,201,567,849]

gen = ('%-5s\n' % x if i%7==0 else '%-5s' %x
       for i,x in enumerate(li,1))

print ''.join(gen) 
```

结果

```
1    2    3    4    5    6    7    
8    9    10   11   12   13   14   
101  203  514  201  567  849 
```

如果您想参数化每行中的数字数量，请创建一个生成器函数：

```
def yn(li,n):
    for i,x in enumerate(li,1):
        yield '%-5s ' % x
        if i%n==0:
            yield '\n'

print ''.join(yn(li,7)) 
```

# javascript - 对动态元素使用 JQuery 选择器和“this”

> ID：14941855
> 
> 赞同：0
> 
> 时间：2013-02-18T17:21:59.147
> 
> 标签：javascript, jquery, html, jquery-selectors, this

我有一个包含大量文档的页面，客户希望用户能够单击页面上列出的每个文章/项目，并在其下方打开一个小细节窗格来展示内容。

我知道这很容易做到，尤其是使用 JQuery，但我并不精通该语言，并试图尝试使用这种动态功能。有超过 50 个文档，因此使用“this”并尝试保持动态而不是显式调用 50 个元素中的每一个（并且还拖慢加载时间）的原因。

这是我的 HTML（我只在列表中包含了其中一个元素）...

```
 <ul class="paging" id="paging">
                <li><a href="">Economics of Ethanol and Bio-butanol as Gasoline Blendstocks<br />
                <strong>Categories:</strong> Oxygenated Fuels Issues, Bio-fuel Economics, Blendstock Valuation, Refining Economics, Refinery Modeling</a>
                <ul style="background:#f8f8f8; width:500px; height:200px;"><li>Here is the text that should appear beneath woot</li></ul>

                </li> 
```

这是我的 JQuery 位...

```
 <script type="text/javascript">
        $(document).ready(function() {

            $('ul.paging > li > ul').hide();

            $('ul.paging > li').click(function() {

                $(this > ul).slideToggle();

            });
        });

    </script> 
```

我的元素被正确隐藏了，所以我假设我的选择器没问题？无论如何，推出没有工作功能。有什么想法吗？

谢谢您，非常感谢您的所有帮助！就像我说的，这很新。：） 再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:23:27.450

的值`this`是一个 DOM 元素。您需要将它用作 jQuery 的 DOM 遍历方法的基础，例如`.children()`.

```
$(this).children("ul").slideToggle(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T17:23:29.267

`$(this > ul)`应该看起来像`$('ul', this)`

或者

```
$(this).find('ul').slideToggle(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:26:16.037

这里的选择器可能是你的问题：

```
$(this > ul).slideToggle(); 
```

你最好使用这个：

```
$(this).find('ul').slideToggle(); 
```

我还建议在`ul`默认情况下为 ' 隐藏 CSS 样式，这样它们就不会在文档就绪事件之前在屏幕上闪烁。

# python - 如何使用 MapReduce 在 python 中计算两个变量之间的相关性

> ID：14941856
> 
> 赞同：1
> 
> 时间：2013-02-18T17:22:00.563
> 
> 标签：python, amazon-web-services, mapreduce, bigdata, mrjob

我正在尝试使用 AWS 上提供的百万歌曲数据集来查找曲目响度与其流行度之间的相关性。我按照基本教程（[http://musicmachinery.com/2011/09/04/how-to-process-a-million-songs-in-20-minutes/](http://musicmachinery.com/2011/09/04/how-to-process-a-million-songs-in-20-minutes/)）获取每个曲目的数据，并建立我的项目使用 MRJob 和 Python。现在我迷失了如何在使用映射器和减速器时找到轨道之间的相关性。到目前为止，这是我的代码：

```
from mrjob.job import MRJob
import track
YIELD_ALL = True

class MRDensity(MRJob):

    def mapper(self, _, line):
    t = track.load_track(line)
    if t:
        if t['tempo'] > 0:

           loudness = t['loudness']
            #print loudness
           hotness = t['song_hotttnesss']
           xy = loudness * hotness
           x2 = loudness * loudness
           y2 = hotness * hotness
           counter = counter + 1
           yield (counter, (loudness, hotness, xy,x2,y2))

def reducer(self, key, val):
    sumx2 = 0
    sumy2 = 0
    sumxy = 0
    sumh = 0
    suml = 0

    for l, h, xy, x2, y2 in val:
        suml = suml + l
        sumh += h
        sumxy += xy
        sumx2 += x2
        sumy2 += y2
        yield key, suml

if __name__ == '__main__':
    MRDensity.run() 
```

这段代码并没有真正起作用，因为它产生了这个：

```
1   -10.142
1   -10.212
1   -11.137
1   -11.197
1   -13.496
1   -15.568
1   -15.607
1   -17.302
1   -22.262
1   -3.383
1   -3.809
1   -5.816
1   -5.902
1   -6.671
1   -7.24
1   -7.591
1   -8.729
1   -9.689
1   -9.738
1   -9.863 
```

我需要帮助编写其余代码来计算MSD 数据集的`loudness`和变量之间的相关性。`hotness`谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T00:17:37.010

你其实很接近。但首先，您的代码示例的缩进是完全错误的，这使得帮助您变得更加困难。其次，您没有解释您认为错误的输出是什么。

从您的代码中，我假设您正在尝试计算热度与响度的线性回归。

为此，您需要对数据库中所有轨道的多个值求和。所以忘记`counter`映射器中的变量——你想在最后输出一条记录，所以你的映射器和化简器应该输出一个键：只需使用 True 或其他东西。（此外，如果您使用 Elastic Map-Reduce 甚至在多个本地进程中运行此代码，则使用这样的变量将不起作用。）

然后在你的减速器中，你应该做`yield key, (suml, sumh, sumxy, sumxx, sumyy)`.

map-reduce 的最终输出将是一行，如下所示：

```
true    [-205.354, NaN, NaN, 2530.9249500000005, NaN] 
```

糟糕，`NaN`s 不好。发生这种情况是因为百万歌曲数据集中的某些曲目没有有效的热度。因此，您将需要`math.isnan`在映射器中使用，并且仅在热度有效时才产生记录。

好的，现在你会得到一个像这样的最终输出：

```
true    [-50.804, 2.072952243828, -20.793643182685596, 538.98803, 0.9498767028116709] 
```

您可以使用这些值来计算线性回归（例如，请参阅[http://code.activestate.com/recipes/578129-simple-linear-regression/](http://code.activestate.com/recipes/578129-simple-linear-regression/)上的代码）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T05:49:32.300

尝试在顶部（全局）声明*计数器*

```
from mrjob.job import MRJob
import track
YIELD_ALL = True
counter=0 
```

而且我真的不明白您在减速器功能中的逻辑。

# maven - Maven插件处理xml文件

> ID：14941861
> 
> 赞同：1
> 
> 时间：2013-02-18T17:22:13.190
> 
> 标签：maven, xml-parsing, maven-plugin

maven 插件处理 Xml 文件（外部，而不是 pom）并可能将它们映射到对象的首选方式是什么？（例如，通过@Parameter 使用与配置相同的“技术”） 我在哪里可以找到一些好的示例？

谢谢你，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:39:59.853

maven插件这样做的方式，通过间接使用[maven-modello](http://modello.codehaus.org/modello-maven-plugin/)，当然可以单独使用而与maven没有任何关系，因为它是一个不同的视图，支持模型的不同版本等，而不是与JAXB等相比.

[modello 模型](http://modello.codehaus.org/modello-maven-plugin/usage.html)的文档将很好地说明什么是可能的。

其他插件，例如[maven-assembly-plugin](http://svn.apache.org/viewvc/maven/plugins/tags/maven-assembly-plugin-2.4/src/main/mdo/component.mdo?view=markup)正在使用 modello 模型来解析外部 xml 文件。

# jquery - 无法在动态创建的图像上捕获点击事件

> ID：14941862
> 
> 赞同：0
> 
> 时间：2013-02-18T17:22:16.657
> 
> 标签：jquery, events, click, refresh

Joomla 模块中有一行图像，我单击一个，然后我有一个 jQuery click 事件打开第二个模块，该模块具有动态创建的一行图像。没有页面刷新。新创建的行格式如下：

```
<img class="newmanugroup" data-manu="companyA" src="images/logos/companyA.png">
<img class="newmanugroup" data-manu="companyB" src="images/logos/companyB.png">
<img class="newmanugroup" data-manu="companyC" src="images/logos/companyC.png"> 
```

这个小图像数组显示在 Chrome 的 Inspect Element 中，位于一个漂亮的小 Joomla`<div id="prodgroup">`中。我可以从#prodgroup 获得一个jQuery 点击结果，这对我没有好处。但是上面显示的我想点击的图像数组显示在屏幕上，但没有显示在页面源中。哇？？？如果它在屏幕上，该数组不应该在 DOM 中，我不应该能够获得点击事件吗？这一切都是因为我没有刷新页面吗？我什至不知道如何开始处理这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T17:28:56.970

您需要`event delegation`with`.on()`处理程序：

```
$(document).on('click', '.newmanugroup', function(){
   alert('Do Something.');
}); 
```

# r - if 函数中的评估错误。还要在代码中绘制错误。在 R 中

> ID：14941865
> 
> 赞同：-1
> 
> 时间：2013-02-18T17:22:30.350
> 
> 标签：r, if-statement

我正在尝试编写 RPS 游戏。下面是我的代码。在 Rstudio 中运行它什么都没有发生，但在基本的 R 中，我在第 29 行得到一个评估错误，“需要真/假的地方缺少值”，而且绘图得到了不等 x,y 轴的错误。必须有一些简单的我想念的东西，为什么只有那个如果是错误的。谢谢你的时间。

```
Np<-1200    #pop size
Ng<-300 #generation time    

P<-matrix(data=NA, nrow=Np/2, ncol=2)   #matrix of pop
strategy=c('Ro','Pa','Sc')
P1<-sample(strategy, size=Np, replace=TRUE, prob=c(1/3,1/3,1/3))    #pop with equal probs of any strategy

# "res <- matrix(P1, nrow=Ng, ncol=3)  #matrix for results" # defunct remove!
fR=c()
fP=c()
fS=c()
# result vectors for each strategy

# res<-matrix(NA, ng,3) # matrix as per example. results vectors returned null.

pR<- 0.5
pP<- 0.5
pS<- 0.5
# probabilities of success in each encounter of pX winning.

for(i in 1:Ng) {
    for(j in 1:(Np/2)){
  if(P[j,1]=='Ra'& P[j,2]=="Sc"& runif(1)<pR){P[j,2]<-"Ra"
    }
    if(P[j,1]=='Pa'& P[j,2]=="Sc"& runif(1)<pS){P[j,1]<-"Sc"
    }
    if(P[j,1]=='Sc'& P[j,2]=="Ra"& runif(1)<pR){P[j,1]<-"Ra"
    }
    if(P[j,1]=='Ra'& P[j,2]=="Pa"& runif(1)<pP){P[j,1]<-"Pa"
    }
    if(P[j,1]=='Pa'& P[j,2]=="Ra"& runif(1)<pP){P[j,2]<-"Pa"
    }
    if(P[j,1]=='Sc'& P[j,2]=="Pa"& runif(1)<pS){P[j,2]<-"Sc"
    }
}   # each row fights and winner replaces with appropriate probability.

P[,2]<-sample(P[,2])  #randomise interactions 
fR=c(fR, sum(P=="Ra"))
fP=c(fP, sum(P=="Pa"))
fS=c(fS, sum(P=="Sc"))
}

plot(x=fR,y=Ng, ylab="frequency", xlab="Generation", col="black", type="l")
lines(fP, Ng, col="green")
lines(fS, Ng, col="red") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:29:08.693

```
Error in if (P[j, 1] == "Sc" & P[j, 2] == "Ra" & runif(1) < pR) { : 
  missing value where TRUE/FALSE needed
> i
[1] 1
> j
[1] 1
> str(P)
 logi [1:600, 1:2] NA NA NA NA NA NA ... 
```

`i`当an为 1时它会出错。（与其他函数不同，如果循环异常终止，for 循环索引将保留在其最后一次赋值中。）当您的矩阵全部为 NA`j`时，您不能使用“==”进行测试。`P`该`if`函数在测试返回时引发错误`NA`。也许您打算用 ? 编写内部循环测试`P1`？也许 yhis 将是一个更快乐的设置元策略：

```
P<-matrix(data=NA, nrow=Np/2, ncol=2)   
strategy=c('Ro','Pa','Sc')
P[]<-sample(strategy, size=Np, replace=TRUE, prob=c(1/3,1/3,1/3)) 
```

# bash - 倒计时直到

> ID：14941866
> 
> 赞同：0
> 
> 时间：2013-02-18T17:22:31.813
> 
> 标签：bash

当我给用户一个输入数字的选项时，我遇到了这个问题，这个数字将被倒数到 1。我在 echo 行之后迷路了，因为脚本会回显输入的值但不会倒数为 1。

```
#!/bin/bash

COUNTER=100
until [  $COUNTER -lt 1 ]; do
read -p "Enter a number between 1-100: " COUNTER
echo COUNTER $COUNTER
let COUNTER-=1
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:24:55.307

尝试使用现代[bash](/questions/tagged/bash "显示标记为“bash”的问题")执行此操作：

```
#!/bin/bash

read -p "Enter a number between 1-100: " counter

until ((counter < 1)); do
    echo "counter $counter"
    ((counter--))
done 
```

*   把它放在`read`外面`for loop`才能成功。
*   默认情况下避免使用大写变量，为全局系统变量保留。
*   `((...))`比`-gt, -lt...`and 更直观，是一个算术命令，如果表达式非零，则返回退出状态 0，如果表达式为零，则返回 1。如果需要副作用（分配），也用作“让”的同义词。见[http://mywiki.wooledge.org/ArithmeticExpression](http://mywiki.wooledge.org/ArithmeticExpression)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:25:51.597

像这样移出`read`循环：

```
read -p "Enter a number between 1-100: " COUNTER    
until [  $COUNTER -lt 1 ]; do
  echo COUNTER $COUNTER
  let COUNTER-=1
done 
```

# google-app-engine - Google App Engine 数据存储区 - 手动添加 - 不让我

> ID：14941867
> 
> 赞同：-1
> 
> 时间：2013-02-18T17:22:32.427
> 
> 标签：google-app-engine, google-cloud-datastore

我正在尝试通过应用引擎控制台在我的谷歌应用数据存储中手动创建实体。我看到了我的实体的名称，但是当我单击添加新条目时，我收到以下消息：

命名空间中不存在机构表这种类型？

而且它不会让我添加新的？有任何想法吗？？

此外，我的本地数据存储经常被反复擦除 - 一定是有什么东西触发了它，但我没有看到任何更改此参数的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:40:02.110

看起来您首先需要在代码中创建模型才能将实体添加到数据存储区。因此，在您的情况下，您可以在名为 model.py 的文件中创建一个模型

```
class Institution_Table(ndb.Model):
      '''...properties...''' 
```

然后在您的控制台中，导入该文件，创建新实体：

```
import model
IT = Institution_Table()
IT.populate(**kwargs)
IT.put() 
```

这能回答你的第一个问题吗？

要回答您的第二个问题，默认情况下，您的数据存储会写入文件系统上的 tmp 文件夹，该文件夹通常会在您每次重新启动计算机时被删除。

您可以更改默认存储位置 - 请参阅此处的 GAE 文档 [https://developers.google.com/appengine/docs/python/tools/devserver#Using_the_Datastore](https://developers.google.com/appengine/docs/python/tools/devserver#Using_the_Datastore)

# objective-c - 自定义绘制视图内的 NSTextField 外部单元格背景

> ID：14941868
> 
> 赞同：0
> 
> 时间：2013-02-18T17:22:33.643
> 
> 标签：objective-c, cocoa, xcode4

我正在努力解决 NSTextField 背景问题。文本字段位于具有半透明黑色背景的自定义视图中。我尝试对字段、字段的单元格和其他一些东西进行子类化，但无济于事。我在文本字段单元格之外得到了这个 clearColor 背景。我正在寻找基本上只是一个黑色的 NSSearchFeld，但运气不佳。

这就是我得到的![在此处输入图像描述](../Images/4ecd36c2d1008b822d000f8c194a71fc.png)

我基本上只想要一个带有圆形笔触的文本字段，它融入黑色背景。

谢谢大家，我对Xdev还很陌生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:34:50.767

想通了，我需要让我用来绘制窗口的自定义 NSView 子类在绘制时使用 [self bounds] 与传递给 drawrect 方法的dirtyRect。

# weka - Weka：在我对训练集进行特征选择后，Src 和 Dest 的属性数不同

> ID：14941871
> 
> 赞同：1
> 
> 时间：2013-02-18T17:22:44.137
> 
> 标签：weka

我正在尝试使用 weka 对文本进行分类。我要做的是：

*   我在包含所有数据的大 ARFF 文件上创建：`all_of_it.arff`.
*   我将这些数据分成训练和测试：`train.arff`和`test.arff`
*   我对训练集进行特征选择并输出一个新的训练文件：`train_fs.arff`
*   我构建了一个只包含那些选定特征的分类器。

而问题是......

我不太清楚如何将测试集标准化为仅使用我从训练集中选择的特征。像**创建新的测试文件这样的`test.arff`东西`train_fs.arff`**

*我尝试使用

```
java -cp weka.jar weka.filters.unsupervised.attribute.Standardize -b -i train_fs.arff -o train2.arff -r test.arff -s test2.arff 
```

但我得到了臭名昭著的`Src and Dest differ in # of attributes`。

有什么方法可以根据 arff 文件（即我的新训练数据，具有很少的特征）对集合进行标准化/标准化，我不知道如何使用 Standardize 或 StringToWordVector 过滤器来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-14T14:32:11.253

**批量过滤是您的问题的一种解决方案。**

优点：

*   它会将相同的过滤器应用于您的测试数据集，就像您应用于训练数据集一样。当您执行特征选择时，两个数据集将兼容

缺点：

*   它只能从命令行界面或 Weka 的 Java API 获得
*   两个数据集必须同时过滤

[您可以在此处](http://weka.wikispaces.com/Batch+filtering)阅读有关批量过滤的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-25T14:20:30.060

您可能还想查看[InputMappedClassifier](http://weka.sourceforge.net/doc.dev/weka/classifiers/misc/InputMappedClassifier.html)。它是一个包装分类器，用于处理不兼容的训练和测试数据。

# c# - 简单的 ASP.NET 文件上传

> ID：14941879
> 
> 赞同：0
> 
> 时间：2013-02-18T17:23:05.493
> 
> 标签：c#, asp.net, ajaxcontroltoolkit

我有一个非常简单的 ASP.NET 页面，可以上传 Excel 工作簿，然后对其进行处理。它使用 ASP.NET 上的 AJAX 工具包中的 AJAXFILEUPLOAD... 这是标记：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true"
CodeBehind="ImportWorkbook.aspx.cs" Inherits="Timesheet.ImportWorkbook" %>

<asp:Content ID="Content1" runat="server" ContentPlaceHolderID="HeaderContentPlaceHolder">
<h1 class="topContent">
    Upload CPAS Timesheet Workbooks
</h1>
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="RightContentPlaceHolder" runat="server">
<br />
<br />
<asp:HiddenField ID="tbTSID" runat="server" />
<asp:HiddenField ID="tbWorkbookPath" runat="server" />
<ajaxToolkit:AjaxFileUpload ID="AjaxFileUpload1" runat="server" AllowedFileTypes="xls,xlsx,xlsm"
    CssClass="dropdown" MaximumNumberOfFiles="1" OnUploadComplete="AjaxFileUpload1_UploadComplete" />
<br />
<br />
<asp:Panel ID="ProcessChoices" runat="server" >
    <br />
    <br />
    <p>
        Select how you want this workbook processed:</p>
    <br />
    <asp:RadioButtonList ID="rbChoices" runat="server" BorderStyle="Groove" BorderWidth="2px"
        BorderColor="Black" BackColor="Teal" Font-Names="Tahoma" Font-Size="10pt" ForeColor="White"
        Width="40%">
        <asp:ListItem Value="True" Selected="True">&nbsp Replace ALL Items in the Timesheet</asp:ListItem>
        <asp:ListItem Value="False">&nbsp Add Items from this Workbook to the Existing Timesheet Items</asp:ListItem>
    </asp:RadioButtonList>
    <br />
    <br />
    <asp:Button ID="btnValidate" runat="server" Text="Validate and Process" 
        BackColor="#B92217" ForeColor="White" BorderColor="#7C1810" 
        BorderStyle="Groove" Font-Names="Tahoma" onclick="btnValidate_Click" />
</asp:Panel>
</asp:Content>
<asp:Content ID="Content4" ContentPlaceHolderID="BottomSpanContentPlaceHolder" runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
</asp:Content> 
```

母版页和 css 页面很简单，只是格式化。

这是代码隐藏：

```
 using System;
using System.IO;
using TimesheetUtilites;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using AjaxControlToolkit;

    namespace Timesheet
    {

    public partial class ImportWorkbook : System.Web.UI.Page
    {
        private const string HDriveLocation= "H:\\mtv\\secure\\Construction\\Access\\CPAS WorkArea\\TimesheetUploads\\";
        private string strWorkbookPath;    
        private int currTSID;

        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                if (Request.QueryString["ID"] != null)
                {
                    tbTSID.Value = Request.QueryString["ID"];            // Storing the Timesheet ID in a hidden Textbox                    
                }
            }
            else
            {
                if (!string.IsNullOrEmpty(tbWorkbookPath.Value))
                {
                    ProcessChoices.Enabled = true;
                }
            }
            int.TryParse(tbTSID.Value, out currTSID);
            strWorkbookPath = tbWorkbookPath.Value;
        }
        protected void AjaxFileUpload1_UploadComplete(object sender, AjaxFileUploadEventArgs e)
        {
            strWorkbookPath = HDriveLocation + Path.GetFileName(e.FileName);
            tbWorkbookPath.Value = strWorkbookPath;
            AjaxFileUpload1.SaveAs(strWorkbookPath);
            ProcessChoices.Enabled = true;
        }

        protected void btnValidate_Click(object sender, EventArgs e)
        {
            bool processOption;
            bool.TryParse(rbChoices.SelectedValue, out processOption);
            strWorkbookPath = tbWorkbookPath.Value;
            TimesheetUtilites.ImportTimesheet imp = new ImportTimesheet(currTSID, strWorkbookPath, processOption);       
        }
    }
} 
```

我的问题很简单。尽管事件处理程序“AjaxFileUpload1_UploadComplete”工作正常，并立即上传文件，但当我触发“btnValidate_Click”事件时，“tbWorkbookPath.Value”已变为空字符串，“ProcessChoices.Enabled”属性不会改变。不用说，“上传完成”事件处理程序是我必须捕获这个文件路径的唯一机会，所以我不知道我做错了什么。

我在 ASP.NET 上发布并没有答案。谁能给我一个想法从哪里开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:32:13.123

在您的页面上放置一个带有 runat="server" 属性的隐藏字段并使用以下脚本：

```
<script type="text/javascript">
    function uploadComplete(sender, args) {
            var filename = args.get_fileName();
            $("#hiddden_field_id").val(filename);
    }
</script> 
```

现在您应该在事件中获取图像名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:34:57.520

我认为您应该尝试将该值存储在会话中而不是隐藏字段中，因为页面没有重新加载并且它是一个 ajax 调用。所以当点击按钮进行验证时，实际上是另一个请求，但是这个页面对象中隐藏字段的值和隐藏字段仍然是空的。在会话中完成该值的工作后，将其从那里删除或将其设置为其他值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:43:28.603

这是您应该存储在页面的 ViewState 中的信息，以便它在页面初始化时的回发和重置之间持续存在。将您的私有字符串成员更改为如下内容：

```
private string strWorkbookPath {
    get {
        return this.ViewState["strWorkbookPath"];
    }
    set {
        this.ViewState["strWorkbookPath"] = value;
    }
} 
```

如果您需要了解什么是 ViewState，请查看 MSDN 上的这篇文章：[使用 ViewState 保存 Web 表单页面值](http://msdn.microsoft.com/en-us/library/4yfdwycw%28v=vs.71%29.aspx)。它有点过时了，但仍然传达了 ViewState 当前如何运作的基础知识。

# mahout - 在 Mahout 中解释基于项目的推荐器的评估（）函数的参数

> ID：14941887
> 
> 赞同：1
> 
> 时间：2013-02-18T17:23:23.510
> 
> 标签：mahout

我正在使用布尔值，试图评估 Mahout 中的推荐引擎。我的问题是关于选择评估函数的“正确”参数。提前为这篇冗长的帖子道歉。

```
 IRStatistics evaluate(RecommenderBuilder recommenderBuilder,
                        DataModelBuilder dataModelBuilder,
                        DataModel dataModel,
                        IDRescorer rescorer,
                        int at,
                        double relevanceThreshold,
                        double evaluationPercentage) throws TasteException; 
```

1）你能想到一个例子，其中必须使用以下两个参数：

```
 - DataModelBuilder dataModelBuilder
 - IDRescorer rescorer 
```

2) 对于`double relevanceThreshold`变量，我设置了值 GenericRecommenderIRStatsEvaluator.CHOOSE_THRESHOLD，但是，我想知道是否可以通过设置不同的值来构建“更好”的模型。

3）在我的项目中，我需要为每个用户推荐最多 10 个项目。这是否意味着为 variable 设置大于 10 的值应该没有意义`int at`？

4) 考虑到我不必为构建模型等待很多时间而烦恼，将变量设置`double evaluationPercentage`为 1 是一个好习惯吗？你能想到 1 不会给出最佳模型的任何情况吗？

5）为什么只要推荐（即变量`int at`）的数量增加（我通过实验证明），精度/召回率（注意我正在处理布尔数据）就会增加？

6)`spiting of both testing and training tests`在 mahout 中发生了什么，我该如何更改该百分比（除非基于项目的建议不是这种情况）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:50:02.913

仅凭准确的推荐并不能保证推荐系统的用户获得有效且令人满意的体验，因此测量值应仅作为参考点。也就是说，理想情况下，真实用户会根据您设置的基线（如随机推荐）使用您的系统并进行 A/B 测试，看看哪个性能更好。但这可能很麻烦，而且不太实用。

N 个推荐的准确率和召回率对于推荐者来说并不是一个很好的指标。你最好使用像 AUC（曲线下面积）这样的指标

1.  看看 Mahout in Action 书籍示例（[链接](https://github.com/tdunning/MiA/blob/master/src/main/java/mia/recommender/ch03/IREvaluatorBooleanPrefIntro2.java)）
2.  让 Mahout 选择一个阈值很好，但计算量会更大
3.  是的，如果您提出 10 条建议，那么以 10 条进行评估很有意义
4.  真的取决于你的数据的大小。如果使用 100%（即 1.0）足够快，我会使用它。但是，如果您确实使用了不同（更少）的东西，我强烈建议您`RandomUtils.useTestSeed();`在测试时使用，这样您就知道每次评估时都会以相同的方式进行抽样。（虽然不要在生产中使用它）
5.  没有把握。取决于您的数据的外观。但通常如果精度增加，召回率会降低，反之亦然。查看[F1 分数](http://en.wikipedia.org/wiki/F1_score)（也可从 Mahout IRStatistics 获得）
6.  对于 IRStatistics，我不完全确定它发生在哪里（或者它是否发生）。请注意，它甚至不需要 % 来划分训练和测试。尽管某处可能存在默认值。如果我是你，我会通过 Mahout 代码找出答案。

# php - php中的日历用于在线录取表格

> ID：14941890
> 
> 赞同：0
> 
> 时间：2013-02-18T17:23:36.600
> 
> 标签：php

我为客户网站创建了一个“online_admission_form.php”，表单的一部分要求用户输入日期（出生日期），我想他们可以点击图标而不是输入日期并有一个小日历出现，允许他们选择一个日期。我还想将选定的日期存储在一个 php 变量中。重要提示：- 我不能使用 java 脚本或任何其他语言，只能使用 PHP，因为我这个 php 页面是我计算机科学硕士学位的最终项目。有谁知道这是否可能？请帮助...每一个回应将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:28:20.983

HTML5之美：

```
<input type="date" name="bday"> 
```

当您将其传递给您的 php 表单时，只需使用

```
$date = $_POST['bday']; 
```

对于所有推荐 jquery 的人来说，当 w3 为我们完成工作时，实现整个库绝对没有意义。

# jquery - 如何创建 Twitter 引导文本区域

> ID：14941895
> 
> 赞同：0
> 
> 时间：2013-02-18T17:24:00.180
> 
> 标签：jquery, css, twitter-bootstrap

我想用纯CSS创建一个带有阴影效果等的Bootstrap Textarea，但我真的不知道如何制作。

我有这段代码，但我被困住了：

```
-webkit-border-radius: 0 4px 4px 0;
     -moz-border-radius: 0 4px 4px 0;
          border-radius: 0 4px 4px 0; 
```

谁能告诉我如何使它像引导文本区域？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T17:30:50.207

您可以通过选择它并添加 box-shadow css 属性来创建 textarea 阴影。语法地理是这样的：

```
 box-shadow: h-shadow v-shadow blur spread color inset; 
```

在你的情况下添加：

```
box-shadow: 0 0 4px rgba(0,0,0,0.7); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:25:49.980

```
-webkit-border-radius: 0 4px 4px 0;
-moz-border-radius: 0 4px 4px 0;
border-radius: 0 4px 4px 0;
box-shadow: 0 0 8px 2px rgba(0, 0, 0, 0.2); 
```

[小提琴](http://jsfiddle.net/HgcB8/)

还有过渡。

# xml - 如何在 Xquery 中使用或

> ID：14941896
> 
> 赞同：0
> 
> 时间：2013-02-18T17:24:00.913
> 
> 标签：xml, xquery

我如何使用或在查询中使用？

如果名称 =“迈克尔”或年龄 =21，我想返回。这就是我所拥有的

```
$d[contains((name,"Michael") or (age,"21"))] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:59:54.073

如果要检查它们是否为 = ：

```
 $d[name = "Michael" or age = "21"] 
```

或者如果你真的想使用包含：

```
 $d[contains(name,"Michael") or contains(age,"21")] 
```

当您编写时，`contains((,) or (,) )`您似乎是`or`在语法级别上使用，给 xquery 解析器提供了两种不同的方式。这在 Xquery 或大多数编程语言中是不可能的，因为它们的函数和操作数对表达式的*值*进行操作，而不是对它们的*语法*进行操作。`(name,"Michael")`然而没有值（好吧，它有两个元素序列的值，但这不是你感兴趣的值），只有`contains(name,"Michael")`实际值，如果`name`包含，则测试`"Michael"`。所以 or 必须在两次调用 to 之间`contains`。

# caching - Redis 集群 - 生产准备好了吗？

> ID：14941897
> 
> 赞同：22
> 
> 时间：2013-02-18T17:24:06.510
> 
> 标签：caching, redis

我正在阅读 Redis 文档，我对分区功能最感兴趣。

[Redis 文档](http://redis.io/topics/partitioning)说明如下：

> 数据存储还是缓存？使用 Redis 和数据存储或缓存时的分区在概念上是相同的，但是有很大的不同。当 Redis 用作数据存储时，您需要确保给定的键始终映射到同一个实例，当 Redis 用作缓存时，如果给定节点不可用，那么如果我们开始使用不同的节点，更改键实例映射，因为我们希望提高系统的可用性（即系统回复我们查询的能力）。如果给定密钥的首选节点不可用，一致的哈希实现通常能够切换到其他节点。同样，如果您添加一个新节点，部分新密钥将开始存储在新节点上。这里的主要概念如下：如果将 Redis 用作缓存，则使用一致的散列进行扩展和缩减是很容易的。如果Redis用作存储，我们需要把keys和nodes之间的map取固定，节点个数固定。否则，我们需要一个能够在添加或删除节点时在节点之间重新平衡密钥的系统，目前只有 Redis Cluster 能够做到这一点，但 Redis Cluster 还没有准备好生产。

从最后一句话我了解到 Redis Cluster 还没有准备好生产。有谁知道这个文档是否是最新的，或者 Redis Cluster 是否已经准备好生产？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-19T11:16:25.077

[**更新**] Redis Cluster 于[**2015 年 4 月 1 日在 Redis 3.0.0**](https://raw.githubusercontent.com/antirez/redis/3.0/00-RELEASENOTES)中发布。

Redis 集群目前正在**积极开发**中。请参阅 Redis 作者的这篇文章[：Antirez](http://antirez.com/news/49)。

> 所以我可以暂停其他增量改进，专注于 Redis 集群。基本上我的计划是，只要它没有达到 beta 质量，我的主要工作就是集群，对于 beta 质量，我的意思是，勇敢的用户可能会投入生产。

Redis 集群将支持**多达** [~1000 个节点](https://twitter.com/redisfeed/status/302109894012698624)。

第一个版本将具有以下功能（摘自 Antirez 帖子）：

1.  密钥空间的自动分区。
2.  热重分片。
3.  仅支持单键操作（并且将*始终*如此）。

截至今天，antirez 正在开发第一个 Redis 集群客户端 ( [redis-rb-cluster](https://github.com/antirez/redis-rb-cluster) )，以便用作参考实现。

* * *

Redis Cluster 准备好生产后，我将立即更新此答案。

**[更新]** 2014 年 3 月 28 日 Redis 集群已经在生产中的大型集群上使用（来源：antirez 推文）。

![](../Images/e63f09d7561b709bc69ab8bd421e887a.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-09T18:15:40.433

今天，Redis 3.0.0 的第一个候选版本已经发布，其中包括一个稳定版本的集群：[http](http://redis.io/download) ://redis.io/download 。

另请参阅 Antirez 的这篇文章：http: [//antirez.com/news/79](http://antirez.com/news/79)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-02T07:21:10.630

Redis 集群包含在 2015 年 4 月 1 日发布的 Redis 3.0.0 中。

> --[Redis 3.0.0] 发布日期：2015 年 4 月 1 日
> 
> 与 Redis 2.8 相比，Redis 3.0 有哪些新功能？
> 
> *   Redis Cluster：Redis 子集的分布式实现。

[https://raw.githubusercontent.com/antirez/redis/3.0/00-RELEASENOTES](https://raw.githubusercontent.com/antirez/redis/3.0/00-RELEASENOTES)

# java - 更改 Joda 的现有 DateTime 实例的日期时间格式

> ID：14941902
> 
> 赞同：1
> 
> 时间：2013-02-18T17:24:20.130
> 
> 标签：java, datetime, jodatime

我有两个日期字段。用户可以从 jQuery 日期时间选择器中选择日期，然后将其转换为 UTC 格式（通过 Spring 的自定义属性编辑器）并在提交表单时填充到 Java bean 中。

Java bean 中的这些`DateTime`实例是[`org.apache.commons.beanutils.PropertyUtils`](http://commons.apache.org/beanutils/api/org/apache/commons/beanutils/PropertyUtils.html)通过反射检索的，例如，

```
final Object object1 = PropertyUtils.getProperty(beanObject, firstDate);
final Object object2 = PropertyUtils.getProperty(beanObject, secondDate); 
```

这些对象类型转换为`DateTime`.

```
if(object1!=null && object2!=null)
{
    final DateTime startDate=((DateTime)object1).withZone(DateTimeZone.forID("Asia/Kolkata"));
    final DateTime endDate=((DateTime)object2).withZone(DateTimeZone.forID("Asia/Kolkata"));

    System.out.println("startDate = "+startDate+"\nendDate = "+endDate);
} 
```

这会产生以下输出。

```
startDate = 2013-02-17T22:45:59.000+05:30
endDate = 2013-02-18T22:46:00.000+05:30 
```

我需要将这些日期转换成这种格式 -`dd-MMM-yyyy HH:mm:ss`

我尝试过的以下方法不起作用。

```
DateTime newStartDate=new DateTime(startDate.toString("dd-MMM-yyyy HH:mm:ss"));
DateTime newEndDate=new DateTime(startDate.toString("dd-MMM-yyyy HH:mm:ss"));

System.out.println("newStartDate = "+newStartDate+"\nnewEndDate = "+newEndDate); 
```

它给出了以下异常。

> java.lang.IllegalArgumentException：无效格式：“17-Feb-2013 22:45:59”在“-Feb-2013 22:45:59”格式错误

那么如何将这些日期转换成所需的格式呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:05:04.933

A`DateTime`没有任何格式。它有一个值，即自 1970 年 1 月 1 日以来的毫秒数，以及一个年表。只有当您将 a 转换`DateTime`为 String 时，您才需要选择一种格式。而且您已经知道如何做到这一点，因为您在您的问题中这样做了。

所以你试图做的只是没有意义。

# design-patterns - 工厂模式无法理解为什么工厂

> ID：14941904
> 
> 赞同：0
> 
> 时间：2013-02-18T17:24:32.670
> 
> 标签：design-patterns, factory

看这个例子： http: [//www.codeproject.com/Articles/68670/The-Factory-Pattern](http://www.codeproject.com/Articles/68670/The-Factory-Pattern)

为什么我不能像下面展示的那样使用反射来实例化具体对象，而不是进行创建工厂的额外工作？

```
private Bat OrderBat(string choice)
{
   Bat myBat = Reflection.NewObject(choice);

   myBat.clean();
   myBat.applyGrip();
   myBat.applyLogo();
   myBat.applyCover();
   myBat.pack();

   return myBat;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:44:34.363

仅在以下情况下有效

1)`choice`字符串直接映射到一个`Bat`类名

2) 所有`Bat`类都有默认的无参数构造函数

想象有一天，一些新`Bat`类有额外的参数，例如颜色：

```
switch (choice) {  
   case "hardball-yellow": 
      myBat = new HardBallColoredBat(Color.YELLOW); 
      break; 

   case "hardball-white": 
      myBat = new HardBallColoredBat(Color.WHITE); 
      break; 

   case "softball": 
      myBat = new SoftBallBat(); 
      break; 
} 
```

通过在工厂中拥有所有这些额外的代码，您可以轻松地修改用于创建新蝙蝠的代码，而无需遍历所有使用它的代码。

# jquery - 动态追加html后无法选择jquery行

> ID：14941914
> 
> 赞同：0
> 
> 时间：2013-02-18T17:25:15.683
> 
> 标签：jquery

在我成功追加 ajax 行后，无法选择此行（我使用*toggleClass()*和*hover()*）。谷歌搜索后是因为事件没有绑定，应该使用*on()*而不是*click()*，但它仍然是一样的

```
$("#simpan").on("click",function(){
              var nim=$("#nim").val();
              var nama=$("#nama").val();
              var alamat=$("#alamat").val();

              $.ajax({
                  type:"post",
                  url:"data.php?action=getdata",
                  data:"nim="+nim+"&nama="+nama+"&alamat="+alamat,
                  success:function(data){
                       $("table").append(data);
                       resetForm();
                  }
              });

          }); 
```

你们有解决方案吗？

**更新：** 这是该行的事件处理程序

```
$("tr").not(":first").click(function(){
     $("tr").not(this).removeClass("selected");
     $(this).toggleClass("selected");
}); 
```

我的桌子

```
<table id="table" border="1">
      <tr>
          <td>Nim</td>
          <td>Nama</td>
          <td>Alamat</td>
      </tr>

      <?php
        include "db.php";
        $result=mysql_query("SELECT * FROM mahasiswa");
        while($mahasiswa=mysql_fetch_array($result)){
      ?>

      <tr>
         <td><?php echo $mahasiswa["nim"]; ?></td>
         <td><?php echo $mahasiswa["nama"]; ?></td>
         <td><?php echo $mahasiswa["alamat"]; ?></td>
      </tr>

      <?php
        } 
      ?>

    </table> 
```

**“simpan”**是一个按钮，当它被点击时，表单中的数据使用ajax保存到数据库中，当成功时，**数据**被附加到表中。

```
echo "
      <tr>
        <td>$_POST[nim]</td>
        <td>$_POST[nama]</td>
        <td>$_POST[alamat]</td>
      </tr>
    "; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:27:31.473

```
$(document).on("click", "#simpan", function(){
    var nim=$("#nim").val();
    var nama=$("#nama").val();
    var alamat=$("#alamat").val();

    $.ajax({
        type:"post",
        url:"data.php?action=getdata",
        data:"nim="+nim+"&nama="+nama+"&alamat="+alamat,
        success:function(data){
        $("table").append(data);
        resetForm();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:28:25.363

对于动态添加的元素语法`on()`如下：

```
$(staticPanentElement).on(eventName, target, handlerFunction); 
```

where`staticPanentElement`表示任何有效的选择器，它指向一个不是动态创建的并且包含`target`.

***在您的代码中，您似乎正在使用相同的多行，`id=simpan`这是不可接受的。***

# jquery - Jquery 选择器错误，无法在单击事件中选择元素

> ID：14941933
> 
> 赞同：0
> 
> 时间：2013-02-18T17:26:29.030
> 
> 标签：jquery, html, css

我正在尝试制作一个候选列表框，用户将从一个框中选择元素，它将显示在下一个框中，当用户单击入围的元素时，该元素将从列表中消失，一切正常，但是当我点击入围元素时问题就来了。不知道为什么。

这是代码：

HTML：

```
<div id="secondbox">
    <div class="elements">
        Soni
    </div>
    <div class="elements">
        Soni1
    </div>
    <div class="elements">
        Soni2
    </div>
    <div class="elements">
        Soni3
    </div>
</div> 
```

JQ:

```
$(".pink").click(function()
    {
        //$(this).remove();
        alert("Hi");
    });
    $(".elements").click(function()
    {
        if($(this).attr("class")=="elements")
        {
            $(this).clone().appendTo("#firstbox").addClass("pink");
            $(this).addClass("red");
        }
    }); 
```

CSS：

```
#secondbox,#firstbox{float:left;height:300px;width:300px;border:1px solid black;}
.elements{width:90%;margin:5px;border:1px dashed orange;}
.red{background-color:#d5d5d5;}
.pink{background-color:#BCED91;} 
```

恳求

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:40:39.167

由于您是在第二个列表中动态创建这些元素，因此您需要使用它[`.on()`](http://api.jquery.com/on/)来绑定 click 事件。

```
$(document).on('click',".pink",function () {
    $(this).remove();
    alert("Hi");
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/KGgY7/)**

根据以下文档`.on()`：

> 事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。

# mysql - 将两行的值合并为一

> ID：14941934
> 
> 赞同：1
> 
> 时间：2013-02-18T17:26:31.130
> 
> 标签：mysql, sql

```
 I have data like 
    user Id         colA        colB
    12              abc         NULL
    13              123         NULL
    13              NULL        567

    I want output like

    user Id         colA        colB
    12              abc         NULL
    13              123         567 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T17:28:13.157

尝试这个：

```
SELECT
user_Id, MAX(colA) colA, MAX(colB) colB
FROM tbl
GROUP BY user_Id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:59:28.557

尝试这个

```
select user_id , 
if (colA = NULL , 0 , max(colA)) colA ,
if (colB = NULL, 0 , max(colB)) colB
from a
group by user_id 
```

输出将是：

```
 USER_ID    COLA    COLB
   12       abc     (null)
   13       123     567 
```

[**演示 SQLFIDDLE**](http://sqlfiddle.com/#!2/1f0f6/9)

# java - 无法使用 jdbc 瘦驱动程序连接到 oracle 数据库

> ID：14941936
> 
> 赞同：3
> 
> 时间：2013-02-18T17:26:36.243
> 
> 标签：java, jdbc, oracle10g

我正在尝试使用 Oracle 瘦驱动程序连接到 Oracle 10 XE 数据库，但我无法实现这一点。我什至在编译期间将驱动程序添加到我的类路径中。

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Properties;

public class Connectivity {
    public static void main(String args[]) throws SQLException {
        String url = "jdbc:oracle:thin:@localhost:1521:XE";
        Properties props = new Properties();

        props.setProperty("user", "SYSTEM");
        props.setProperty("password", "iiita");

        try {
            Class.forName ("oracle.jdbc.driver.OracleDriver");
        } catch (ClassNotFoundException e) {
            System.out.println(e.getMessage());
        }
        Connection conn = DriverManager.getConnection(url,props);
        String sql ="select sysdate as current_day from dual";

        PreparedStatement preStatement = conn.prepareStatement(sql);

        ResultSet result = preStatement.executeQuery();

        while(result.next()){
            System.out.println("Current Date from Oracle : " +  result.getString("current_day"));
        }

        System.out.println("done");

    }
} 
```

此代码在运行期间给出以下错误

```
Exception in thread "main" java.sql.SQLException: No suitable driver found for jdbc:oracle:thin:@localhost:1521/XE
    at java.sql.DriverManager.getConnection(DriverManager.java:644)
    at java.sql.DriverManager.getConnection(DriverManager.java:202)
    at Connectivity.main(Connectivity.java:16) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T17:30:24.073

在您致电之前添加此行`getConnection(url, props)`

```
Class.forName ("oracle.jdbc.driver.OracleDriver"); 
```

除非它们是 jdbc 驱动程序 > 4.0 版本，否则在您的类路径中有 jar 是不够的。您必须实际使用`DriverManager`.

更改`jdbc:oracle:thin:@localhost:1521:XE`为`jdbc:oracle:thin:@//localhost:1521:XE`。我相信这是新的语法。

编译为

```
javac -classpath /<your_path>/ojdbc6.jar Connectivity.java 
```

运行方式

```
java Connectivity 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:28:13.437

运行主类时忘记指定 ojdbc14 类路径：

对于 Windows：`java -cp .;<path>/ojdbc14.jar Connectivity`

在 Linux 上： `java -cp .:<path>/ojdbc14.jar Connectivity`

PS 你不需要 ojdbc14.jar 在你的类路径上编译主类。这是一个运行时依赖。

# perl - 使用 Archive::Zip::MemberRead 从 zip 获取成员大小

> ID：14941939
> 
> 赞同：1
> 
> 时间：2013-02-18T17:26:46.610
> 
> 标签：perl, zip

我正在尝试从 zip 中读取每个成员文件的大小，而无需实际提取。我遍历所有成员名称，然后用于`Archive::Zip::MemberRead`获取每个成员的文件句柄，我希望能够使用该`stat`方法获取大小。但是，`stat`来自 zip 文件元素的文件句柄返回一个空数组，因此我无法获取文件大小。这是我的代码：

```
my $zip = Archive::Zip->new($zipFilePath);

my @mbrs = $zip->memberNames();

foreach my $mbrName(@mbrs)
{
    my $fh  = Archive::Zip::MemberRead->new($zip, $mbrName);

    my @fileStats = stat($fh);
    my $size = $fileStats[7];

    print "\n".$mbrName." -- ".$size;
} 
```

但是，我得到的输出不显示任何文件大小：

```
dir/fileName1.txt --
dir/fileName2.txt -- 
```

问题是如何在不实际提取成员文件大小的情况下检索它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T21:44:20.557

为什么不直接使用`Archive::Zip`模块本身？这似乎对我有用：

```
#!/usr/bin/perl
use strict;
use warnings;
use Archive::Zip qw(:ERROR_CODES :CONSTANTS);

my $filename = "somezipfile.zip";

# Read in the ZIP file    
my $zip = Archive::Zip->new();
unless ($zip->read($filename) == AZ_OK) {
    die "Read error\n";
}

# Loop through the members, printing their name,
# compressed size, and uncompressed size.
my @members = $zip->members();
foreach (@members)
{
    print " - " . $_->fileName() . ": " . $_->compressedSize() .
      " (" . $_->uncompressedSize() . ")\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T18:13:28.693

[仅当您安装了7-zip](http://www.7-zip.org/)时，这是一种方法：

```
#!/usr/bin/env perl

use warnings;
use strict;

## List files from zip file provided as first argument to the script, the format 
## is like:
#   Date      Time    Attr         Size   Compressed  Name
#------------------- ----- ------------ ------------  ------------------------
#2012-10-19 16:56:38 .....          139          112  1.txt
#2012-10-19 16:56:56 .....          126          105  2.txt
#2012-10-19 16:57:24 .....           71           53  3.txt
#2012-10-03 14:39:54 .....          155           74  A.txt
#2012-09-29 17:53:44 .....          139           70  AA.txt
#2011-12-08 10:41:16 .....           30           30  AAAB.txt
#2011-12-08 10:41:16 .....           18           18  AAAC.txt
# ...
for ( map { chomp; $_ } qx/7z l $ARGV[0]/ ) { 

    # Omit headers and footers with this flip-flop.
    if ( my $l = ( m/^(?:-+\s+){2,}/ ... m/^(?:-+\s+){2,}/ ) ) { 

        ## Don't match flip-flop boundaries.
        next if $l == 1 || $l =~ m/E0$/;

        ## Extract file name and its size.
        my @f = split ' ';
        printf qq|%s -- %d bytes\n|, $f[5], $f[3];
    }   
} 
```

我像这样运行它：

```
perl script.pl files.zip 
```

在我的测试中产生了（抑制了一些输出）：

```
1.txt -- 139 bytes
2.txt -- 126 bytes
3.txt -- 71 bytes
A.txt -- 155 bytes
AA.txt -- 139 bytes
AAAB.txt -- 30 bytes
AAAC.txt -- 18 bytes
B.txt -- 40 bytes
BB.txt -- 131 bytes
C.txt -- 4 bytes
CC.txt -- 184 bytes
File1.txt -- 177 bytes
File2.txt -- 250 bytes
aaa.txt -- 30 bytes
... 
```

# r - R堆积条形图绘制geom_text

> ID：14941940
> 
> 赞同：11
> 
> 时间：2013-02-18T17:26:48.477
> 
> 标签：r, ggplot2

我正在尝试使用 ggplot 在 R 中绘制堆积条形图。我还想在每条条中包含该条的百分比。我试图关注帖子[1](https://stackoverflow.com/questions/12386005/r-stacked-percentage-bar-plot-with-percentage-of-binary-factor-and-labels-with)、[2](https://stackoverflow.com/questions/11653268/adding-labels-to-ggplot-bar-chart)、[3](https://stackoverflow.com/questions/8243621/stacked-bar-graph-labels-with-ggplot2)但这些值并不完全在它们各自的块中。我的数据是[dropbox](http://dl.dropbox.com/u/105195130/Input.txt)中的一个文件。

我的代码如下：

```
f<-read.table("Input.txt", sep="\t", header=TRUE)

ggplot(data=f, aes(x=Form, y=Percentage, fill=Position)) + 
    geom_bar(stat="identity", colour="black") + 
    geom_text(position="stack", aes(x=Form, y=Percentage, ymax=Percentage, label=Percentage, hjust=0.5)) + 
    facet_grid(Sample_name ~ Sample_type, scales="free", space="free") + 
    opts(title = "Input_profile", 
         axis.text.x = theme_text(angle = 90, hjust = 1, size = 8, colour = "grey50"), 
         plot.title = theme_text(face="bold", size=11), 
         axis.title.x = theme_text(face="bold", size=9), 
         axis.title.y = theme_text(face="bold", size=9, angle=90),
         panel.grid.major = theme_blank(), 
         panel.grid.minor = theme_blank()) + 
    scale_fill_hue(c=45, l=80)

ggsave("Output.pdf") 
```

输出是-

![在此处输入图像描述](../Images/437b63e53a45011bb672f522ce687300.png)

任何帮助是极大的赞赏。感谢您的帮助和时间！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T20:24:38.743

我认为您使用的是旧版本的`ggplot2`. 因为为 ggplot2 v 0.9.3 修改了您的代码，所以我得到了这个：

```
p <- ggplot(data = df, aes(x = Form, y = Percentage, fill = Position))
p <- p + geom_bar(stat = "identity", colour = "black")
p <- p + geom_text(position = "stack", aes(x = Form, y = Percentage, ymax = Percentage, label = Percentage, hjust = 0.5))
p <- p + facet_grid(Sample_name ~ Sample_type, scales="free", space="free")
p <- p + theme(plot.title = element_text("Input_profile"), 
         axis.text.x = element_text(angle = 90, hjust = 1, size = 8, colour = "grey50"), 
         plot.title = element_text(face="bold", size=11), 
         axis.title.x = element_text(face="bold", size=9), 
         axis.title.y = element_text(face="bold", size=9, angle=90),
         panel.grid.major = element_blank(), 
         panel.grid.minor = element_blank())
p <- p + scale_fill_hue(c=45, l=80)
p 
```

![ggplot2_text_placement](../Images/28ececeef9f2d617bd659fcbc05b41a5.png)

您会看到文本对象通常放置正确。有些地方的条形太短，以至于数字重叠。您也可以使用`size`参数。

为了纠正这个问题，你可以做这样的事情来自己加数字。

```
df <- ddply(df, .(Form, Sample_type, Sample_name), transform, 
      cum.perc = Reduce('+', list(Percentage/2,cumsum(c(0,head(Percentage,-1))))))

p <- ggplot(data = df, aes(x = Form, y = Percentage, fill = Position))
p <- p + geom_bar(stat = "identity", colour = "black")
p <- p + geom_text(aes(x = Form, y = cum.perc, ymax = cum.perc, label = Percentage, hjust = 0.5), size=2.7)
p <- p + facet_grid(Sample_name ~ Sample_type, scales="free", space="free")
p <- p + theme(plot.title = element_text("Input_profile"), 
         axis.text.x = element_text(angle = 90, hjust = 1, size = 8, colour = "grey50"), 
         plot.title = element_text(face="bold", size=11), 
         axis.title.x = element_text(face="bold", size=9), 
         axis.title.y = element_text(face="bold", size=9, angle=90),
         panel.grid.major = element_blank(), 
         panel.grid.minor = element_blank())
p <- p + scale_fill_hue(c=45, l=80)
p 
```

这给出了：

![ggplot2_facet_text_final](../Images/3a8436d11e7b12439d0ec3fd979e5534.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T00:33:54.023

这里有一个使用`barchart`from lattice 的解决方案。

![在此处输入图像描述](../Images/c5dc32a998caf0a745c43c217c4e2ca5.png)

```
library(latticeExtra)
barchart(Percentage~Form|Sample_type*Sample_name,data=dat,
         groups =Position,stack=T,
         panel=function(...){
           panel.barchart(...)
           ll <- list(...)
           keep <- !is.na(ll$groups[ll$subscripts])
           x <- as.numeric(ll$x[keep])
           y <- as.numeric(ll$y[keep])
           groups <- as.numeric(factor(ll$groups)[ll$subscripts[keep]])
           for (i in unique(x)) {
               ok <- x == i
               ord <- sort.list(groups[ok])
               pos <- y[ok][ord] > 0
               nok <- sum(pos, na.rm = TRUE)
               h <- y[ok][ord][pos]
               panel.text(x = rep(i, nok),y = cumsum(h)-0.5*h,
                          label = h,cex=1.5)
             }
         },
         auto.key = list(columns = 5), 
         par.settings = ggplot2like(n = 5),
         lattice.options = ggplot2like.opts()) 
```

# ios - UICollectionView 单元格越界

> ID：14941944
> 
> 赞同：2
> 
> 时间：2013-02-18T17:26:58.207
> 
> 标签：ios, uicollectionview

如何`uicollectionview`在滚动出界时强制不隐藏单元格（边界小于容器视图的边界）。这是一个关于我的问题的小视频：http: [//youtu.be/pglO5s8MZqk](http://youtu.be/pglO5s8MZqk)。

感谢您的回答！

# c# - 将多个泛型接口传递给一个方法

> ID：14941947
> 
> 赞同：3
> 
> 时间：2013-02-18T17:27:05.667
> 
> 标签：c#, generics

我正在尝试将多个通用接口作为参数传递给我的一个类的构造函数。

以下代码无法编译：

```
public interface IPosterGenerator<T>
{
    IQueryable<T> GetPosters();
}

public class Pinboard
{
    public Pinboard(IPosterGenerator<A> firstPosterGenerator, IPosterGenerator<B> secondPosterGenerator, IPosterGenerator<B> thirdPosterGenerator)
    { 
    }
} 
```

我有大约一百种不同类型的海报生成器。它们都继承自 IPosterGenerator 接口。当我实例化一个新的 Pinboard 时，我需要将三个 IPosterGenerators 传递给 pinboard 的构造函数。但是，这三个 IPosterGenerator 中的每一个都将属于不同的类型。这就是为什么我想出了这个愚蠢的A、B和C。

这完全可以做到吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T17:30:40.127

听起来您可能想要`Pinboard`通用：

```
public class Pinboard<T1, T2, T3>
{
    public Pinboard(IPosterGenerator<T1> generator1,
                    IPosterGenerator<T2> generator2,
                    IPosterGenerator<T3> generator3)
    {
         ...
    }
} 
```

为了更容易调用，您*还*可以使用泛型方法创建一个非泛型类：

```
public static class Pinboard
{
    public static Pinboard<T1, T2, T3> Create(IPosterGenerator<T1> generator1,
                                              IPosterGenerator<T2> generator2,
                                              IPosterGenerator<T3> generator3)
    {
        return new Pinboard<T1, T2, T3>(generator1, generator2, generator3);
    }
} 
```

然后，如果您已经有了生成器，则可以调用：

```
// Or whatever...
var board = Pinboard.Create(bigGenerator, smallGenerator, mediumGenerator); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:32:37.593

您还必须将您的类声明为具有 A、B 和 C 的泛型。像这样的东西：

```
public class Pinboard<A,B,C> {
  public Pinboard(IPosterGenerator<A> firstPosterGenerator,
                  IPosterGenerator<B> secondPosterGenerator,
                  IPosterGenerator<C> thirdPosterGenerator) { 
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T04:52:30.063

再次抱歉，我的原始问题不够精确。这是我发现对我来说没问题的（并且足够灵活以满足我的需要）：

```
public interface IPosterGenerator
{
}

public interface IPosterGenerator<T> : IPosterGenerator
{
    IQueryable<T> GetPosters();
}

public class Pinboard
{
    public Pinboard(List<IPosterGenerator> generators) 
    {

    }
} 
```

再次感谢大家的支持，伙计们！

# asp.net - ASP.NET MVC 管理 ViewModel

> ID：14941951
> 
> 赞同：0
> 
> 时间：2013-02-18T17:27:16.373
> 
> 标签：asp.net, asp.net-mvc

在我们的 ASP.NET MVC 3 应用程序中，我们显示了来自各种数据源的大量信息，如下所示

1.  动作方法参数
2.  查询字符串（不能用于模型绑定）
3.  会议
4.  WCF 服务
5.  数据库

我们必须将来自上述所有数据源的数据组合起来，格式化并显示在一个视图中。如何划分类以使其具有更好的可维护性？如果我们使用视图模型，如何结合所有信息来构建视图模型？在哪里保留域模型和视图模型之间的映射，反之亦然？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:28:56.173

> 如何划分类以使其具有更好的可维护性？

通过定义将专门为您的视图要求量身定制的视图模型。

> 如果我们使用视图模型，如何结合所有信息来构建视图模型？

您可以定义一个视图模型，该模型将包含您需要在给定视图中显示的所有必要信息。如果您的视图之间存在共享小部件，则您可以拥有主视图模型可以作为属性（组合）引用的子视图模型。然后可以在其他上下文中重用子视图模型。

# c# - 使用 Html Agility Pack 从特定位置选择 HTML

> ID：14941952
> 
> 赞同：2
> 
> 时间：2013-02-18T17:27:17.313
> 
> 标签：c#, html, xpath, html-agility-pack

我需要从第 64 行第 45 行到第 183 行第 22 行获取 html 文本节点。我对 XPath 很陌生，我不太确定我的选择是什么。我应该如何进行？我想到了这样的事情：

```
var nodes=doc.DocumentNode.SelectNodes("//text()[position() > startPosition and position() < endPosition]"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:37:58.970

您不能用 XPath 做到这一点：它对 XML 中的行号和字符位置一无所知。

该`position()`函数返回一个节点在节点列表中的相对位置 - 例如，返回 1 表示列表中的第一个节点，返回 2 表示第二个节点，依此类推。

[要获取行位置信息，您可以使用XElement](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.aspx)或[XmlReader](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx)解析 XML ，然后使用[IXmlLineInfo](http://msdn.microsoft.com/en-us/library/system.xml.ixmllineinfo.aspx)接口。

请注意，尽管使用行/字符位置来识别 XML 文件的片段是有问题的：XML 处理器通常会重新格式化 XML，添加/删除空格和结束行，因此相同的 XML 片段可以改变位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T01:03:32.427

该类`HtmlNode`有两个重要属性（对于您需要做的事情）：

*   `Line`（节点开始的行）
*   `LinePosition`（节点结束的行）

您可以执行以下操作：

```
var nodes = doc.DocumentNode.Descendants("#text").Where(
    x => (x.Line > 64 || (x.Line == 64 && x.LinePosition >= 45)) &&
         (x.Line < 183 || (x.Line == 183 && x.LinePosition <= 22))
); 
```

当然，你也可以这样做`doc.DocumentNode.SelectNodes("//text()").Where(...)`

**您必须处理的一个问题：**

它不会告诉您节点在哪里结束，因此上述解决方案可能会为您提供以大于 的行结束的节点`183`，或者在行`183`中但位置大于 的节点`22`。为此，您可以使用`OuterHtml`节点的属性，并进行一些字符串操作（获取长度以了解其结束位置，拆分`\n`以了解行数等）。

# php - 长轮询或彗星如何与 PHP 一起工作？

> ID：14941953
> 
> 赞同：2
> 
> 时间：2013-02-18T17:27:19.343
> 
> 标签：php, javascript, ajax, long-polling, polling

我正在为我的网站制作通知系统。我希望登录的用户在收到通知时立即注意到。正如许多人所说，只有几种方法可以做到这一点。

一种是编写一些 javascript 代码来询问服务器“是否有任何新通知？” 在给定的时间间隔内。它被称为“轮询”（我应该是对的）。

另一个是“长轮询”或“彗星”。正如维基百科所说，长轮询类似于轮询。无需每次都询问新通知，当有新通知可用时，服务器将它们直接发送给客户端。

那么我如何在 PHP 中使用长轮询？（不需要完整的源代码，而是一种这样做的方式）它的架构/设计到底是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T17:31:31.727

长轮询的基本思想是您发送一个请求，然后服务器不会响应或终止该请求，直到某些所需的条件。即服务器端不会通过发送响应来“完成”服务请求。您可以通过在服务器端循环执行来实现这一点。

想象一下，在每个循环中，您都执行数据库查询或任何必要的操作，以确定您需要的条件现在是否为真。只有当它是你打破循环并将响应发送给客户端。当客户端收到响应时，它会立即重新发送“长轮询”请求，这样就不会错过下一个“通知”。

用于此的服务器端 PHP 代码的简化示例可能是：

```
// Set the loop to run 28 times, sleeping 2 seconds between each loop.
for($i = 1; $i < 29; $i++) {

    // find out if the condition is satisfied.
    // If YES, break the loop and send response     

    sleep(2);
}
// If nothing happened (the condition didn't satisfy) during the 28 loops,
// respond with a special response indicating no results. This helps avoiding
// problems of 'max_execution_time' reached. Still, the client should re-send the
// long-polling request even in this case. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:48:12.937

我最近对聊天应用程序使用了长轮询。在做了一些研究并玩了一段时间之后，我会推荐一些东西。

1) 不要长时间轮询超过 20 秒。某些浏览器会超时。我通常将我的长轮询设置为运行大约 20 秒，然后在此时发回一个空响应。然后您可以使用 javascript 重新启动长轮询。

2）每隔一段时间，浏览器就会挂起。为了帮助添加第二级错误检查，我有一个 javascript 计时器运行 30 秒，如果 30 秒内没有响应，我放弃 ajax 调用并重新启动它。

3）如果您使用的是php，请确保您使用`session_write_close()`

4）如果您在 Jquery 中使用 ajax，您可能需要使用`abort()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T17:37:00.897

您可以使用（或研究）一些现有的实现，例如[Ratchet](http://socketo.me/)。还有其他几个。

本质上，您需要避免让 apache 或 Web 服务器处理请求。就像使用 node.js 服务器一样，您可以从命令行启动 PHP 并使用[服务器套接字](http://php.net/manual/en/book.sockets.php)函数来创建服务器并使用 socket_select 来处理通信。

通过保持循环处于活动状态，它可以在技术上通过 Web 服务器工作。但是，保持每个 HTTP 连接的 php 进程处于活动状态的内存开销通常太高。创建自己的服务器允许您在连接之间共享内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T16:11:00.613

[你可以在这里](https://stackoverflow.com/questions/12918925/implementing-long-polling-with-jquery-and-php)找到你的答案。更多细节[在这里](http://dsheiko.com/weblog/websockets-vs-sse-vs-long-polling)。并且您应该记住在使用`$.ajaxSetup({ cache:false });`jquery 时使用。

# c# - 通过 Socket 传输视频帧

> ID：14941954
> 
> 赞同：2
> 
> 时间：2013-02-18T17:27:24.873
> 
> 标签：c#, image, sockets, udp, video-streaming

我的 C# 代码中有 30FPS 的视频帧，我想在本地主机中广播它，以便所有其他应用程序都可以使用它。我虽然因为它是一个视频并且没有任何数据包丢失并且不需要连接/接受来自客户端的问题，所以 UDP 是一个不错的选择。

但是这里有很多问题。

*   如果我使用 UDP 单播速度就足够了，大约 25FPS（CPU 使用率为 25%，这意味着在我的 4 核 CPU 中的一个线程上 100%，这并不理想。但至少它发送了足够多的数据集）。但是单播无法将数据传送给所有客户端。
*   如果我用广播速度是很低的。大约 10FPS 与相同的 CPU 使用率。

我能做些什么？！数据在同一台计算机中，因此无需从 LAN 等进行远程访问。我只想要一种在同一台机器的不同应用程序之间每秒传输约 30MBytes 数据的方法。（640x480 是固定大小的 Image x 30fps x 3byte per pixel is about 27000KByte per second）

1.  UDP组播性能更好吗？！
2.  即使我接受每个客户端并独立发送给他们，TCP 是否可以给我更好的性能？！
3.  有没有比 Socket 更好的方法？！内存共享什么的？！
4.  为什么UDP广播那么慢？！每秒只有大约 10 兆字节？！
5.  有没有一种快速压缩高性能帧的方法（每秒编码 30fps 并在其他部分解码）？客户端应用程序使用 C++，因此这必须是一种跨平台方式。

我只是想在这里了解其他开发人员的经验和想法，所以请写下您的想法。

编辑：

有关数据的更多信息：数据采用位图 RGB24 格式，它们以 30FPS 的速度从设备流式传输到我的应用程序。我想将此数据广播到其他应用程序，他们需要再次将这些图像设为 RGB24 格式。没有标题或任何东西，只有固定大小的位图数据。所有操作都必须即时执行。无论使用有损压缩算法还是任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:42:54.767

我在工业环境中试验组播，它是一个**不成熟的可靠网络**的不错选择。

在**本地主机**中，*共享内存*可能是一个不错的选择，因为您可以构建一个**循环帧队列**并仅使用单个互斥体从一个帧翻转到下一个帧以保护指针分配（写入端）。一个作家，几个读者，没有问题。

在使用 C++**和**C# 的 Windows 上，共享内存称为文件映射，但您可以使用系统分页文件（RAM 和/或磁盘）。

请参阅这些链接以获取更多信息

*   [http://msdn.microsoft.com/en-us/library/system.io.memorymappedfiles.aspx](http://msdn.microsoft.com/en-us/library/system.io.memorymappedfiles.aspx)
*   [http://msdn.microsoft.com/en-us/library/dd997372.aspx](http://msdn.microsoft.com/en-us/library/dd997372.aspx)
*   混合 C++ 和 C#：[如何在 .NET 中实现共享内存？](https://stackoverflow.com/questions/439787/how-to-implement-shared-memory-in-net)
*   [完全托管的共享内存 .NET 实现？](https://stackoverflow.com/questions/4580722/fully-managed-shared-memory-net-implementations)

共享内存空间不受保护也不是私有的，但它已命名。

通常，作者进程创建它，而读者通过它的名称打开它。防病毒软件以与所有其他软件相同的方式查看这种 I/O，但不会阻止通信。

这是一个从文件映射开始的示例：

```
char shmName[MAX_PATH+1];
sprintf( shmName, "shmVideo_%s", name );
shmName[MAX_PATH] = '\0';
_hMap =
   CreateFileMapping(
      INVALID_HANDLE_VALUE, 0, PAGE_READWRITE, 0, size, shmName );
if( _hMap == 0 ) {
   throw OSException( __FILE__, __LINE__ );
}
_owner = ( GetLastError() != ERROR_ALREADY_EXISTS );
_mutex = Mutex::getMutex( name );
Synchronize sync( *_mutex );
_data = (char *)MapViewOfFile( _hMap, FILE_MAP_ALL_ACCESS, 0, 0, 0 );
if( _data == 0 ) {
   throw OSException( __FILE__, __LINE__ );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:41:13.947

使用 live555 [http://www.live555.com/](http://www.live555.com/)与您最喜欢的压缩器 - ffmpeg 结合使用。

# android - Android SQLite 数据库：如何查询特定数据？

> ID：14941955
> 
> 赞同：1
> 
> 时间：2013-02-18T17:27:27.353
> 
> 标签：android, sql, database

```
public String getDatatwo() {
    // TODO Auto-generated method stub
    String arg = "lol";
    String query = "select * from DATABASE_TABLE where title=\""+ arg +"\"";
    Cursor c = ourDatabase.rawQuery(query, null);
    int iName = c.getColumnIndex(KEY_NAME);
    String resultsearch = "";
    resultsearch = resultsearch + c.getString(iName);
    return resultsearch;
    } 
```

基本上，它在 DATABASE_TABLE 中搜索 arg("lol") 然后将其作为结果搜索返回，稍后会显示。我试图让它在 KEY_NAME 行中搜索整个数据库并返回包含名称“lol”的 ALL。

如果可能的话，我还希望能够输入一个编辑 arg 的 TextEdit，由于类扩展，我想我无法操作 arg。如果有人愿意提供帮助，如果有人可以看一下，我可以发送所有代码。

但是我得到一个错误。

```
02-18 12:16:02.201: D/gralloc_goldfish(645): Emulator without GPU emulation detected.
02-18 12:16:24.111: E/SQLiteLog(645): (1) no such table: DATABASE_TABLE
02-18 12:16:24.111: D/AndroidRuntime(645): Shutting down VM
02-18 12:16:24.111: W/dalvikvm(645): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
02-18 12:16:24.151: E/AndroidRuntime(645): FATAL EXCEPTION: main
02-18 12:16:24.151: E/AndroidRuntime(645): java.lang.RuntimeException: Unable to start     activity ComponentInfo{com.example.sql/com.example.sql.SQLView}:   android.database.sqlite.SQLiteException: no such table: DATABASE_TABLE (code 1): , while   compiling: select * from DATABASE_TABLE where title="lol"
02-18 12:16:24.151: E/AndroidRuntime(645):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
02-18 12:16:24.151: E/AndroidRuntime(645):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
02-18 12:16:24.151: E/AndroidRuntime(645):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
02-18 12:16:24.151: E/AndroidRuntime(645):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
02-18 12:16:24.151: E/AndroidRuntime(645):  at  android.os.Handler.dispatchMessage(Handler.java:99)
02-18 12:16:24.151: E/AndroidRuntime(645):  at android.os.Looper.loop(Looper.java:137)
02-18 12:16:24.151: E/AndroidRuntime(645):  at android.app.ActivityThread.main(ActivityThread.java:4745)
02-18 12:16:24.151: E/AndroidRuntime(645):  at java.lang.reflect.Method.invokeNative(Native Method)
02-18 12:16:24.151: E/AndroidRuntime(645):  at java.lang.reflect.Method.invoke(Method.java:511)
02-18 12:16:24.151: E/AndroidRuntime(645):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-18 12:16:24.151: E/AndroidRuntime(645):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-18 12:16:24.151: E/AndroidRuntime(645):  at dalvik.system.NativeStart.main(Native Method)
02-18 12:16:24.151: E/AndroidRuntime(645): Caused by: android.database.sqlite.SQLiteException: no such table: DATABASE_TABLE (code 1): , while compiling: select * from DATABASE_TABLE where title="lol"
02-18 12:16:24.151: E/AndroidRuntime(645):  at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
02-18 12:16:24.151: E/AndroidRuntime(645):  at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
02-18 12:16:24.151: E/AndroidRuntime(645):  at   android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
02-18 12:16:24.151: E/AndroidRuntime(645):  at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
02-18 12:16:24.151: E/AndroidRuntime(645):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
02-18 12:16:24.151: E/AndroidRuntime(645):  at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:37)
02-18 12:16:24.151: E/AndroidRuntime(645):  at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:44)
02-18 12:16:24.151: E/AndroidRuntime(645):  at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1314)
02-18 12:16:24.151: E/AndroidRuntime(645):  at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1253)
02-18 12:16:24.151: E/AndroidRuntime(645):  at  com.example.sql.DbMain.getDatatwo(DbMain.java:94)
02-18 12:16:24.151: E/AndroidRuntime(645):  at com.example.sql.SQLView.onCreate(SQLView.java:19)
02-18 12:16:24.151: E/AndroidRuntime(645):  at android.app.Activity.performCreate(Activity.java:5008)
02-18 12:16:24.151: E/AndroidRuntime(645):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
02-18 12:16:24.151: E/AndroidRuntime(645):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
02-18 12:16:24.151: E/AndroidRuntime(645):  ... 11 more
02-18 12:16:24.381: D/dalvikvm(645): GC_CONCURRENT freed 196K, 9% free 7469K/8199K, paused 19ms+33ms, total 192ms
02-18 12:16:26.741: I/Process(645): Sending signal. PID: 645 SIG: 9 
```

修改后的代码，仍然有错误。

```
 public String getDatatwo() {
    // TODO Auto-generated method stub
    String arg = "lol";
    Cursor c = ourDatabase.rawQuery("select * from " + DATABASE_TABLE + " where title=?"+ arg +"\"", new String[] { arg });
    int iName = c.getColumnIndex(KEY_NAME);
    String resulttwo = "";
    resulttwo = resulttwo + c.getString(iName);
    return resulttwo;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T17:30:43.277

我假设`DATABASE_TABLE`应该是一个变量：

```
String query = "select * from " + DATABASE_TABLE + " where title=\""+ arg +"\""; 
```

* * *

还可以考虑使用参数化查询来保护自己免受 SQL 注入攻击。

```
String query = "select * from " + DATABASE_TABLE + " where title=?";
Cursor c = ourDatabase.rawQuery(query, new String[] {arg}); 
```

或使用内置方法，如[`SQLiteDatabase.query()`](https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28java.lang.String,%20java.lang.String%5b%5d,%20java.lang.String,%20java.lang.String%5b%5d,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)

* * *

**添加**

> 修改后的代码，仍然有错误。

当您的应用程序崩溃时，您应该始终发布 LogCat 错误以及相关代码，但我可以立即看到错误。游标可以保存多条记录或为空，您必须告诉游标您要读取的行并检查该行是否存在*。*为此，只需添加：

```
if (c.moveToFirst()) { /* return true if row exist, false if it doesn't */
    resulttwo = resulttwo + c.getString(iName);
} 
```

如果要读取多行，请使用循环：

```
while (c.moveToFirst()) { 
    resulttwo = resulttwo + c.getString(iName);
} 
```

还可以考虑直接使用 StringBuilder 或仅使用`+=`运算符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T17:32:03.280

代替...

```
String query = "select * from DATABASE_TABLE where title=\""+ arg +"\"";
Cursor c = ourDatabase.rawQuery(query, null); 
```

你可能想要类似...

```
Cursor c = ourDatabase.rawQuery("select * from " + DATABASE_TABLE + " where title=?, new String[] { arg }); 
```

# php - 如何从给定的日期获取天数和月数

> ID：14941957
> 
> 赞同：0
> 
> 时间：2013-02-18T17:27:29.353
> 
> 标签：php, get, days

我将编写一个函数来打印两个日期之间的剩余天数。我想让它告诉剩下的几个月和几天。例如：

```
45 days = 1month, 15 days
65 days = 2months, 5 days
10 days = 10 days 
```

所以我尝试了：

```
<?
$days=50;

if($days>"31"){
$time=$days/30;
}
echo $time;//1.67 month
?> 
```

根据上面的代码。我希望结果是这样的：

```
1 month, 20 days 
```

各位大佬能不能推荐一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:39:15.550

尝试：

```
$days = 50;

if ($days > 31){
    $month = floor($days/30); // return lowest whole integer
    $days = $days % 30; // calculate left days
}

echo $month . " => " . $days; // output `1 => 20` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:35:51.853

获取两个月的月份数并减去。添加计算年份变化

获取两个日期的月份日期。如果 date2 > date1，减去并且你有天数，否则从月数和 sumteact 日期中删除 1

# java - 如何安全地存储 SecretKey？

> ID：14941966
> 
> 赞同：1
> 
> 时间：2013-02-18T17:28:06.650
> 
> 标签：java, security, encryption, keystore, secret-key

我正在构建一个基本的 web 应用程序，它接受用户输入并返回一个加密的密码。

问题是，目前我使用的 SecretKey 存储在 Java 类的 src 中。对我来说，这似乎是一种冒险的做法，所以我正试图找到一种安全存储我的 SecretKey 的方法。

做了一些研究，我找到了 Java KeyStore 类，但我不完全确定这是否是我需要的。另外，如果这是我需要的，你们能否指出如何实现它的方向，更重要的是，它是如何工作的？

谢谢

编辑：通过大量思考/阅读，似乎真的没有一个很好的解决方案，只要你的主服务器是安全的，真的不需要解决方案，我的服务器是安全的，所以这不是问题。

谢谢大家的回复！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:30:18.047

密码应该使用单向哈希函数存储，这样您的系统就可以避免这个问题。见[https://www.owasp.org/index.php/Password_Storage_Cheat_Sheet](https://www.owasp.org/index.php/Password_Storage_Cheat_Sheet)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:37:10.713

如果您正在谈论您的加密密钥，那么没有安全的方法可以将该密钥安全地存储在 JavaScript 中。我猜您所说的存储是浏览器本地存储，它只不过是浏览器端的持久性 cookie。使用 chrome WebInspector 或 Firefox Firebug 的每个人都可以轻松地阅读该商店以了解他正在访问的任何页面。此外，您必须通过 JavaScript 将其保存在此商店中，并且每个人都可以在浏览器中阅读您的源代码，这更加明显。

安全地做这些事情的唯一可能性是服务器端，例如 PHP。如果您想要交互行为的感觉，您可以在客户端使用 AJAX 与后端交互。

编辑：啊，当您在后端谈论Java时，我想我误会了您？如果是，我认为当您在编译的源代码中硬编码密钥时没有问题？？？如果您想将它存储在其他地方并且害怕有人使用它，您可以在将其用于密钥生成之前在您的应用程序中对其进行加盐和散列（当然，加盐是硬编码的）？

# javascript - 附加后 JS onClick 不起作用

> ID：14941967
> 
> 赞同：0
> 
> 时间：2013-02-18T17:28:06.587
> 
> 标签：javascript, onclick

我有一些代码在 AJAX 请求成功时附加一个新的 DIV。附加的 div 包含一个带有 onclick 的链接。但是它不起作用。

附加链接的代码：

```
<span class="boldheading_smaller" id="readreplytxt_'+ msgid +'" onclick="readoffer('+ msgid +')">Read More...</span>') 
```

这是用于执行附加本身的代码 - 它的这个 onclick 不适用于新创建的 div。我不知道为什么！

编辑：附加本身的结果是正确的，即`onclick="readoffer('+ msgid +')"`显示为`onclick="readoffer(29)"`

编辑：整个函数

```
function respondoffer(a, b, c) {
    var msgid = a;
    var usrid = b;
    var resp = c;
    $.ajax({
        type: 'POST',
        url: '_process/offerrespond.php',
        dataType: 'json',
        data: {
            msgid: msgid,
            usrid: usrid,
            resp: resp
        },
        success: function (data) {
            $("#" + msgid).slideUp();
            $('<div class="offer_box" id="' + msgid + '">')
                .prepend('<img src="_img/user_images/' + usrid + '.jpg" alt="' + data.pro_name + '" class="offerimg"/>',
                '<span class="regulartext">Offer Recivied On: ' + data.date_sent + '</span><span class="regulartext" onclick="deleteoffer(' + msgid + ',' + usrid + ');" style="float: right;">Remove</span><br />',
                '<h4 class="boldheading_smaller">' + data.pro_name + '</h4><br /><br />',
                '<span class="boldheading_smaller">Offer ' + data.accept_decline + '</span>',
                '<div id="offer_details_' + msgid + '" style="margin-top: 10px; display: none;"><div style="width: 140px; float: left; margin-left: 10px;"><h4 style="display: inline; font-size: 11px; color: #333337; font-family: Verdana;">My</h4><h4 style="display: inline; font-weight: normal; font-size: 11px; color: #333337; font-family: Verdana;">Offer</h4><br /><p style="padding-left: 5px; margin: 0px;" class="smalltext_para">Food: </p><img src="_img/profile/' + data.food + '.png" /><br /><p style="padding-left: 5px; margin: 0px;" class="smalltext_para">Drinks: </p><img src="_img/profile/' + data.drink + '.png" /><br /><p style="padding-left: 5px; margin: 0px;" class="smalltext_para">Accommodation: </p><img src="_img/profile/' + data.accommodation + '.png" /><br /><p style="padding-left: 5px; margin: 0px;" class="smalltext_para">Travel Expenses: </p><img src="_img/profile/' + data.travel + '.png" /><br style="font-size: 1px; line-height: 2px;"/><p style="padding-left: 5px; margin: 0px;" class="smalltext_para">Extra Fee: </p><p style="margin: 0px; font-size: 11px; color: #333337; font-family: Verdana; font-weight: bold; display: inline;">' + data.currency + '' + data.fee + '</p></div><div style="width: 190px; float: right;"><h4 style="display: inline; font-size: 11px; color: #333337; font-family: Verdana;">Event</h4><h4 style="display: inline; font-weight: normal; font-size: 11px; color: #333337; font-family: Verdana;">Details</h4><br style="font-size: 1px; line-height: 2px;"/><p style="line-height: 2px; padding-left: 5px; margin: 0px;" class="smalltext_para">' + data.venue_name + '</p><br /><p style="padding-left: 5px; margin: 0px;" class="smalltext_para">' + data.venue_ad1 + '</p><br /><p style="padding-left: 5px; margin: 0px;" class="smalltext_para">' + data.venue_ad2 + '</p><br /><p style="padding-left: 5px; margin: 0px;" class="smalltext_para">' + data.venue_county + '</p><br /><p style="padding-left: 5px; margin: 0px;" class="smalltext_para">' + data.venue_country + '</p><br /><p style="padding-left: 5px; margin: 0px;" class="smalltext_para">' + data.venue_zip + '</p><br /><br /><p style="margin: 0px; font-size: 11px; color: #333337; font-family: Verdana; font-weight: bold; display: inline;">Event Date: </p><p style="padding-left: 5px; margin: 0px;" class="smalltext_para">' + data.event_date + '</p><br /><p style="margin: 0px; font-size: 11px; color: #333337; font-family: Verdana; font-weight: bold; display: inline;">Start Time: </p><p style="padding-left: 5px; margin: 0px;" class="smalltext_para">' + data.event_s_time + '</p><br /><p style="margin: 0px; font-size: 11px; color: #333337; font-family: Verdana; font-weight: bold; display: inline;">End Time: </p><p style="padding-left: 5px; margin: 0px;" class="smalltext_para">' + data.event_e_time + '</p><br /></div><div style="float: left; width: 300px; height: 90px; margin-left: 99px; margin-top: 10px;"><h4 style="padding-top: 5px; display: inline; font-size: 11px; color: #333337; font-family: Verdana;">Message:</h4><br/><p style="padding-bottom: 3px; margin: 0px;" class="smalltext_para">' + data.pro_msg + '</p></div></div>',
                '<span style="margin-top: 20px; position: relative; bottom: 0px; right; 0px; float: right;" class="boldheading_smaller" id="readreplytxt_' + msgid + '" onclick="readoffer(' + msgid + ')">Read More...</span>')
                .prependTo("#offer_box_add");
            $("#offer_details_" + msgid).hide();

            $("#offersinfo").html("");
            $("#offersinfo").load("http://www.ahbeta.uni.me/_includes/offers_total.php?usrid=" + usrid);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:02:48.920

对于它的价值，这不是我所知道的 jQuery 的限制。

正如您在[这个 fiddle](http://jsfiddle.net/Mbm5a/)中看到的那样，使用 html 属性的 onclick 事件绑定不管它们是在原始源中，还是像您在示例中所做的那样在 jQuery 中动态附加，都可以工作。

在没有看到整个页面代码的情况下很难进一步调试，但您的附加逻辑更有可能出现问题。`alert(msgid)`此外，在 onclick 属性（而不是）中放置一个警报，`readoffer(msgid)`看看它是否有效 - 如果有效，则该`readoffer`功能存在问题。

最后 - 在追加新的 HTML 之后，是否有理由不使用 jQuery 绑定事件？您可以使用一个类来识别按钮，并通过闭包访问 msgid。

简化示例：

```
function respondoffer(msgid) {
    $('#target')
        .append('<span class="readoffer">read more...</span>')
        .find('.readoffer').click(function() {
            readoffer(msgid);
        });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T11:12:39.303

这也可能是 jQuery DataTable 的范围问题。我刚刚遇到了一个与此类似的问题：

```
<script>
function foo() {
    alert("Squeek");
}

$(function () {
    window.MyDataTable = $('#MyDataTable').dataTable();
    window.MyDataTable.fnAddData(["foo", "<span onclick='foo()'>SQUEEK</span>"]);
});
</script> 
```

单击跨度时，从未调用过 foo 。如果我用直接警报替换它，它确实有效。诡异的。

当我明确设置窗口范围时，它得到了修复`foo()`：

```
<script>
function foo() {
    alert("Squeek");
}
window.foo = foo;

$(function () {
    window.MyDataTable = $('#MyDataTable').dataTable();
    window.MyDataTable.fnAddData(["foo", "<span onclick='window.foo()'>SQUEEK</span>"]);
});
</script> 
```

然后它起作用了。

# delphi - ADOtable 刷新

> ID：14941970
> 
> 赞同：0
> 
> 时间：2013-02-18T17:28:17.610
> 
> 标签：delphi, delphi-xe2, tadotable

我有一个包含 3 列“ID”、“编号”和“已使用”的 ADOTable。该表包含一些预先生成的数字。当我使用数字时，我只需将“USED”设置为 1，然后过滤表格以仅获取未使用的数字。

现在有个小问题：假设我拉了一个数字并将“USED”设置为 1。我看到在 Access 中更新了该列，如果我尝试用 Delphi 拉不同的数字它会给我相同的结果，所以我认为 ADO 表没有被刷新了。我尝试使用`refresh`但没有用。我可以使它工作的唯一方法是使用`Active := false`然后`Active := true`. 我认为应该有更优雅的方式来做到这一点。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:30:53.393

设置`CursorLocation`你的`AdoTable`to`clUseServer`和`AdoTable.refresh`will work

# javascript - 利用 d3 在 SVG 中渲染 foreignObject 失败

> ID：14941971
> 
> 赞同：2
> 
> 时间：2013-02-18T17:28:17.780
> 
> 标签：javascript, svg, coffeescript, d3.js

我已经阅读了相关的帖子，感觉我的代码是准确的；我也尝试过多次修改这段代码。我希望有人能在我的代码中找到我确定的小错误，因为我没有运气检测到它。

问题：foreignObject 元素的内容未在浏览器中直观呈现。DOM 元素显然插入到 DOM 中但不可见。

我注意到在 Chrome 网络开发人员中，foreignObject 元素在元素检查器中不是驼峰式，但是在编辑 html 内联时它可以作为驼峰式进行编辑，因此显然该元素被保存为驼峰式。这可能对这个问题没有影响，但我想我会提到它。

执行后的DOM：

```
<g class="component" transform="translate(75,20)">
  <rect width="100" height="100" fill="red" opacity="1">
    <foreignObject width="100" height="100" requiredExtensions="http://www.w3.org/1999/xhtml">
      <body xmlns="http://www.w3.org/1999/xhtml">
        <div style="width: 100px; height: 100px; background-color: yellow;" data-uid="special_uid">
        </div>
      </body>
    </foreignObject>
  </rect>
</g> 
```

D3 SVG/XHTML 生成代码（CoffeeScript）：

```
 component = canvas.select("[data-uid=#{entityObj.name}]").selectAll('.component')
    .data(entityObj.components)
    .enter()
    .append("g")
    .each( (componentObj,i,d) => 
      @generateAssociationLocalCache(entityObj,componentObj,i,d)
      @generateComponentLocalCache(entityObj,componentObj,i,d)
    )
    .attr("data-uid", (o,i,d)-> o.name)
    .attr("id", (o,i,d)-> o.name)
    .attr("class", "component")
    .attr("transform", (componentObj,i,d) => 
      coords = @rows[entityObj.name]['components'][componentObj.uid]
      "translate(#{coords.x},#{coords["y#{i}"]})"
    )  
    .append("rect")  
    .attr("width", (componentObj,i,d) => componentObj.width)
    .attr("height", @get('component').height)
    .attr("fill", "red")
    .attr("opacity", "1")
    .append("foreignObject")  
    .attr("width", (componentObj,i,d) => componentObj.width)
    .attr("height", @get('component').height)
    .attr("requiredExtensions", "http://www.w3.org/1999/xhtml")
    .append("body")
    .attr("xmlns","http://www.w3.org/1999/xhtml")
    .append("div")
    .attr("style", (componentObj,i,d) => "width: #{componentObj.width}px; height: #{@get('component').height}px; background-color: yellow;")
    .attr("data-uid", (o,i,d) -> o.uid) 
```

![渲染的矩形元素](../Images/f3a7fa1e49d8903f36e31ef0707725ef.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:45:08.257

你至少有2个问题。首先`<foreignObject>`不能是元素的子`<rect>`元素。我不确定您要实现什么，但您可能需要拆分代码

```
 var g = component.append("g")
    .each( (componentObj,i,d) => 
      @generateAssociationLocalCache(entityObj,componentObj,i,d)
      @generateComponentLocalCache(entityObj,componentObj,i,d)
    )
    .attr("data-uid", (o,i,d)-> o.name)
    .attr("id", (o,i,d)-> o.name)
    .attr("class", "component")
    .attr("transform", (componentObj,i,d) => 
      coords = @rows[entityObj.name]['components'][componentObj.uid]
      "translate(#{coords.x},#{coords["y#{i}"]})"
    ) 
```

然后做

```
g.append("rect")  
.attr("width", (componentObj,i,d) => componentObj.width)
.attr("height", @get('component').height)
.attr("fill", "red")
.attr("opacity", "1");

g.append("foreignObject")
... 
```

这将使 rect 和 foreignObject 兄弟姐妹。

其次 xmlns 不是您可以在创建对象后设置的属性，所以

```
.append("body")
  .attr("xmlns","http://www.w3.org/1999/xhtml") 
```

应该

```
.append("xhtml:body") 
```

然后 d3 将在正确的命名空间中创建元素。

# ruby-on-rails-3.2 - JSON 格式的图片网址（RABL、Dragonfly、Ruby on Rails）

> ID：14941977
> 
> 赞同：2
> 
> 时间：2013-02-18T17:28:44.367
> 
> 标签：ruby-on-rails-3.2, rabl, dragonfly-gem

我正在使用 RABL gem，我的用户模型有很多帖子

**用户/show.rabl**

```
object @user
    attributes :id, :name

    child :posts do
        extends "posts/post"
    end 
```

**帖子/_post.rabl**

```
attributes :id, image: post.image.url 
```

我想显示帖子的图像，但我有一个错误：*未定义的局部变量或方法“帖子”*。

但是在 posts/_post.html.erb 我可以使用这个 <%= post.image.url =%>

蜻蜓宝石加载的图像。

如何以 json 格式获取此图像 url？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:48:00.890

如果这是一个子属性，您可以使用胶水将其附加回根节点。

像这样：

```
@post
attributes :id, :image_url

glue @image do
  attributes :url => :image_url
end 
```

或者可能是这样的：

```
@post
attributes :id

node :image_url do |post|
  post.image.url
end 
```

# javascript - 向插件发送适当的输入

> ID：14941984
> 
> 赞同：1
> 
> 时间：2013-02-18T17:29:24.937
> 
> 标签：javascript, html, json, algorithm, plugins

我正在使用第三方 javascript 插件根据我的要求开发一个两列表功能。该插件接受一个`json`如下所示的输入数组：

```
var data = {"Project" : [{'Start':'02/20/2012',
'End':'02/20/2012',
'Content':'Project Description',
'Group' : 'Table Group 1'
},...
] }; 
```

`Group`在上面`json`的插件中使用时，可以给出任何类型的内容（`custom html content as well`），它在内部呈现为：

```
var items = []; //json array items will be pushed by items.push from input `data` json
for(var i=0,im = items.length;i<im;i++){
var group = items[i].Group;
groupDiv.innerHtml = group;
} 
```

就我而言，对于`Group`项目的`json array`项目，我传递了一个自定义 HTML，如下所示：

```
var customHtml = '<div><span class="button-red"></span>'+
                       '<div class = "quick-info-hide">' + 
                       'Some Custom Content from input' +
                       '</div></div>' 
```

我`customHtml`从一些输入（另一个更大的 json）生成它并将其发送到插件，并试图不修改插件本身。但是，我不得不修改插件以在此处添加某些功能（行扩展`on/off`），这现在让我很困扰。

当行没有展开时，customHtml 的`span`and`div`应该有 class `style1`，如果它展开了，customHtml 的`span`and`div`应该有 class `style2`。
但是，在插件内部，`customHtml`分配时没有任何`if condition`展开/折叠。由于该插件不是使用逻辑构建的`row expansion/collapse on click`，因此预计也不会这样做。我想在展开/折叠时更改此处的样式以分配给`groupDiv.innerHtml`即 customHtml，这可能可以通过另一种`customHtml1`具有不同样式的变体来完成。

做到这一点的最佳方法是什么？
我应该在此处添加一个并在插件中`if condition`发送两个变体并在各自的 if 上应用合适的变体吗？在这种情况下是否还有更好的方法来不破坏插件的通用方法（我似乎在这里进行了修改）？`customHtml``condition`

# javascript - 在 Javascript 上拖放

> ID：14941986
> 
> 赞同：4
> 
> 时间：2013-02-18T17:29:27.830
> 
> 标签：javascript, jquery, html, css

我在这里实现了拖放。尝试点击球并拖动它。

[http://joelin.org/p/mouse2.html](http://joelin.org/p/mouse2.html)

但是，我使用 html 元素作为捕获鼠标事件的元素。如果我使用球元素来捕获事件，如果鼠标指针移动得太快，我的鼠标指针会迅速将球留在后面。

我希望听者附在球上，这样我就可以将听者附在多个球上。这可能吗？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:31:37.820

你试过 jQuery Draggable 吗？[http://jqueryui.com/draggable/](http://jqueryui.com/draggable/)

# symfony - 带有前缀的 FOSUserBundle 注销不起作用

> ID：14941989
> 
> 赞同：8
> 
> 时间：2013-02-18T17:29:29.687
> 
> 标签：symfony, localization, fosuserbundle

我对 symfony2 和 FOSUserBundle 有一个非常奇怪的问题。

我可以使用 /en/logout 注销，但不能使用 /nl/logout 或 /fr/logout。

当我尝试使用 nl 或 fr 注销时，我得到：

```
You must activate the logout in your security firewall configuration. 
```

虽然我配置了。我似乎无法理解为什么 /en/logout 有效而其余部分无效。

这是我的代码：

## 安全.yml

```
security:
providers:
    fos_userbundle:
        id: fos_user.user_provider.username_email

encoders:
    FOS\UserBundle\Model\UserInterface: sha512

firewalls:
    main:
        pattern: ^/
        form_login:
            provider: fos_userbundle
            csrf_provider: form.csrf_provider
            check_path: fos_user_security_check
            default_target_path: /%locale%/login
            always_use_default_target_path: true
            failure_path:   /%locale%/login
        logout:
            path: /%locale%/logout
            target: homepage
        anonymous:    true 
```

## 路由.yml

```
user bundle > FOS
    fos_user_security:
        resource: "@FOSUserBundle/Resources/config/routing/security.xml"
        prefix: /{_locale}
        requirements:
            _locale: fr|nl|en 
```

## 控制器

```
 class LoginController extends Controller {

    /**
     * @Route("{_locale}/logout-test", name="logout", defaults={"_locale"="en"} , requirements = {"_locale" = "fr|en|nl"})
     * @Template()
     */
    public function logoutAction()
    {
        $test = "";
        #throw new \RuntimeException('You must activate the logout in your security firewall configuration.');
        #return $this->redirect($this->generateUrl('homepage'));;
    }
} 
```

谁能帮帮我，或者告诉我下一步该往哪里看？将不胜感激

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-26T15:37:53.810

在您的配置文件中，您需要使用路由而不是 URL。如果它以“/”开头，它将被视为 URL，否则将被视为路由。如果您使用路由而不是 URL，则将自动处理语言环境。例如，这是我的 security.yml 配置：

```
security:
  public:
    pattern:   ^/
    form_login:
      login_path: fos_user_security_login
      check_path: fos_user_security_check
      provider: fos_userbundle
      csrf_provider: form.csrf_provider
      default_target_path: index
    anonymous: true
    logout:
      path: fos_user_security_logout
      target: index 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-14T00:33:08.220

除了@jfcartier 的回答，我将其留作将来参考：

如果您需要自定义`logout`路径而不是`fos_user_security_logout`：

```
# app/config/security.yml
...
  logout:
     path: my_logout
     target: homepage 
```

...那么您还需要在以下位置定义它`routing.yml`：

```
# app/config/routing.yml
app:
    resource: "@AppBundle/Controller/"
    type:     annotation

my_logout:
    path: /logout

fos_user:
    resource: "@FOSUserBundle/Resources/config/routing/all.xml" 
```

不过，请确保它之前已定义`fos_user`- 否则您将收到相同的错误：*您必须在安全防火墙配置中激活注销。*

# sql - Inner Join 与 Exists() 同时避免重复行

> ID：14941993
> 
> 赞同：2
> 
> 时间：2013-02-18T17:29:47.303
> 
> 标签：sql, oracle, oracle11g

这是一个复杂的问题，所以在我设置场景时请耐心等待：

假设我们有一个简化的表格设置，如下所示：

```
table 1(employee): {
   employee_id, -primary key
   first_name,
   last_name,
   days_of_employment
}
with data:
employee_id  first_name last_name days_of_employment
111          Jack       Stevens   543
222          Clarice    Bobber    323
333          Roy        Cook      736
444          Fred       Roberts   1000
...

table 2(teams): {
   team_code, --primary key
   description
}
with data:
team_code description
ERA       Enrollment Records Assoc.
RR        Rolling Runners
FR        French Revolution
...

table 3(employees_teams):{
   employee_id, --primary key
   team_code --primary key
}
with data:
employee_id team_code
111         RR
111         FR
222         FR
222         ERA
333         FR
... 
```

我希望这些表格应该清楚它们是什么以及它们的目的。这是我的需求场景：“我想要 Rolling Runners and Enrollment Records Assoc. 团队中员工的平均就业天数。” 我知道如何编写此查询有两种方法，它们似乎都运行良好，但我真正想知道的是哪一种方法对 oracle 数据库的处理速度更快。请记住，这些查询的编写方式是为了避免产生重复的行，这会破坏平均计算：

查询一：

```
SELECT AVG(e.days_of_employment) avg_days_of_employment
FROM   employee e,
       (
        SELECT DISTINCT employee_id
        FROM   employees_teams
        WHERE  team_code IN ('ERA','RR')) available_employees
WHERE  e.employee_id = available_employees.employee_id 
```

查询 2：

```
SELECT AVG(e.days_of_employment) avg_days_of_employment
FROM   employee e
WHERE  EXISTS(
    SELECT 1
    FROM   employees_teams et
    WHERE  et.team_code IN ('ERA','RR')
      AND  et.employee_id = e.employee_id) 
```

有可能使用我提供的这个示例数据，这种情况一开始可能没有意义，但我仍然想知道哪个查询“更好”使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T17:41:40.487

我会说使用 EXISTS 方法，因为除了检查是否存在之外，您实际上并不需要来自 available_employees 的任何东西。
话虽如此，这也取决于您的数据以及您的数据库查询优化器如何优化它。我建议您查看每种方法的查询计划，看看哪种方法更便宜。

检查这些链接以及[http://dotnetvj.blogspot.com/2009/07/why-we-should-use-exists-instead-of.html](http://dotnetvj.blogspot.com/2009/07/why-we-should-use-exists-instead-of.html) [INNER JOIN 能否提供比 EXISTS 更好的性能](https://stackoverflow.com/questions/2177346/can-an-inner-join-offer-better-performance-than-exists)

# emacs - Emacs 更改文件扩展名 - 模式关联

> ID：14941995
> 
> 赞同：10
> 
> 时间：2013-02-18T17:29:48.647
> 
> 标签：emacs, octave

我的 Emacs 以 ObjC 模式打开 .m 文件。但是我想以八度模式打开它们。我已经添加到`.emacs`文件中：

```
(autoload 'octave-mode "octave-mod" nil t)
(setq auto-mode-alist (cons '("\\.m$" . octave-mode) auto-mode-alist)) 
```

我还应该做什么？我确实安装了八度模式。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-23T10:39:22.697

幸运的是，现在一切正常，不幸的是我不记得我是如何修复它的 :) 也许我`.emacs`之前的错误。这是更正确的代码：

```
(add-to-list 'auto-mode-alist '("\\.m$" . octave-mode)) 
```

最近的版本不需要自动加载；如果您确实需要启用它，请注意这`"octave-mode"`不是错字。

```
(autoload 'octave-mode "octave-mod" nil t) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T06:34:43.427

用这个。

```
;; octave-mode
(autoload 'octave-mode "octave-mode" "Loding octave-mode" t)
(add-to-list 'auto-mode-alist '("\\.m\\'" . octave-mode)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T20:58:14.593

刚刚遇到了这个确切的问题。您的陈述是正确的，但您的 .emacs 文件可能没有正确加载。Emacs 搜索“HOME”变量以加载首选项、lisp 代码等。

要查看您的 HOME 变量是什么：

打开暂存缓冲区（这是一个尝试的“游戏场所”）：

```
C-x C-b *scratch* <RET> 
```

通过键入这个表达式来评估它，然后将光标放在右边，然后点击 Cx Ce

```
insert (getenv "HOME") 
```

Emacs 将在底部显示您的主路径（我的默认为 ...Documents and Settings\UserName）变量（这对我不起作用）。

这里也讨论了更多内容： [http ://www.gnu.org/software/emacs/manual/html_node/emacs/Windows-HOME.html](http://www.gnu.org/software/emacs/manual/html_node/emacs/Windows-HOME.html)

还要记住该文件必须是“.emacs”而不是 myConfig.emacs 或类似的东西。使用 bash 命令 ren 重命名文件（Windows 资源管理器不会让您拥有无名文件）