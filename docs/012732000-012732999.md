# StackOverflow 问答 12732000-12732999

# structuremap - 是否可以在具有不同范围的单例对象上拥有一个属性？

> ID：12732001
> 
> 赞同：0
> 
> 时间：2012-10-04T16:49:36.893
> 
> 标签：structuremap

我有以下对象：

```
CommandA (Singleton)
    IFoo Foo (PerRequest) 
```

我想将一个代理对象注入到单例中，这样当我调用 Foo 时，它会给我特定于我的请求的 foo 对象。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:08:34.820

按照设计，单例中的所有注入都*应该是*单例的。首先，如果您`CommandA`是单例，则注入的对象将是单例的。
现在，如果您说每个请求都需要一个新对象，那么您的 CommandA 中可能会有一个工厂（单例），它会在每次调用时创建一个新对象或获取代理引用。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T09:20:30.340

正如安舒所说，听起来你真的是在追求工厂行为。实现它的一种方法是这样的：

命令：

```
public class Command : ICommand
{
   private Func<IFoo> _fooProvider;

   public Command(Func<IFoo> fooProvider){ _fooProvider = fooProvider; }

   public IFoo Foo { get{ return _fooProvider(); }}
} 
```

在您的配置中：

```
For<ICommand>().Singleton().Use<Command>();
For<IFoo>().Use<Foo>(); 
```

StructureMap 将自动注入 Func，因为 IFoo 已配置。

# python - 在 Python 中转义 HTML 实体和 UTF-8

> ID：12732004
> 
> 赞同：2
> 
> 时间：2012-10-04T16:49:45.800
> 
> 标签：python, character-encoding

我正在解析包含许多特殊字符（Unicode 和 HTML 实体形式）的 HTML 文件。尽管使用 Python 阅读了大量关于 Unicode 的文档，但我仍然无法正确转换 HTML 实体。

这是我运行的测试：

```
>>> import HTMLParser
>>> p = HTMLParser.HTMLParser()
>>> s = p.unescape("&#139;")
>>> repr(s)
"u'\\x8b'"
>>> print s 
Â‹ # !!!
>>> s
u'\x8b'
>>> print s.encode("latin1")
‹ # OK, it prints fine in latin1, but I need UTF-8 ...
>>> print s.encode("utf8")
Â‹ # !!!

>>> import codecs
>>> out = codecs.open("out8.txt", encoding="utf8", mode="w")
>>> out.write(s)
# Viewing the file as ANSI gives me Â‹ # !!!
# Viewing the file as UTF8 gives NOTHING, as if the file were empty # !!! 
```

**将未转义的字符串 s 写入 UTF8 文件的正确方法是什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T16:55:47.007

U+008B 是一个控制字符，因此什么也看不见并不稀奇。"‹" 是 U+2039 左单引号，甚至不是 Latin-1。但是，它*是***CP1252**中的字符 0x8B 。并且不要再依赖 Windows 控制台输出来告诉您什么是正确的或不正确的，除非您`chcp 65001`事先运行。

# c# - WebGrid 列中的表单提交 CheckBox 旁边的 Quantity TextBox

> ID：12732007
> 
> 赞同：0
> 
> 时间：2012-10-04T16:49:58.240
> 
> 标签：c#, asp.net, .net, razor, webmatrix

我在基于 Razor 的网站上有一个 WebGrid，现在我想在一个列内有一个复选框和一个文本框，当我在输入数量后单击复选框时，我希望它提交表单，所以我可以将该项目添加到数据库中（我现在并不真正热衷于 AJAX，除非它会更容易更好）。但我只是不知道我该怎么做。

![在此处输入图像描述](../Images/94d94af5b3461b964b35a5e414a1edf6.png)

我是否应该将 Checkbox 和 Textbox 的每个组合包装在自己的表单中，这样每个具有 Checkbox 的列都会有一个表单？或者我应该将整个 WebGrid div 包装在一个表单中，然后确定哪些在提交时被检查？我真的不知道从哪里开始。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:11:01.550

如果您不喜欢 ajax，您可以将整个网格包装在一个表单中，然后使用复选框上的选中事件获取该复选框的 id，这样您就可以明确知道表单发布时要查看的值。您必须通过 id 中的标识符将每个复选框绑定到其关联的文本框，因为它将发布网格的所有值。如果页面被划分为每个部分执行特定功能的地方，那么您会在一个页面上拥有多个表单。在这种情况下，网格在整个网格中执行一项功能。

取而代之的是，ajax 风格的方法将是最好的选择。使用 jquery 将一个 ajax.post 附加到您要为其发布帖子的网格中的每个元素是公平的。比尝试编写所有额外代码来确定更改了哪个复选框以及您想从帖子中查看的数据要干净得多。

```
$.ajax({
            type: "POST",
            url: path,
            data: "id=" + checkboxId + "text=" + textboxdata+ ,
            success: function() {
                // if needed alert user data saved

            }
}); 
```

# javascript - ("svg:rect") 元素在运行时不会出现在屏幕上

> ID：12732010
> 
> 赞同：1
> 
> 时间：2012-10-04T16:50:03.203
> 
> 标签：javascript, d3.js

```
<script type="text/javascript">
    var divElem = d3.select("#svgpathSVGdata"); 
```

正方形的数据

```
var jsonsquare = [{
    x: 40,
    y: 170,
    width: 120,
    height: 120,
    label: "technology"
    },

    ]; 
```

使用已经声明的宽度和高度设置画布

```
var svgcanvas = divElem.append("svg:svg")
               .attr("width", w).attr("height", h); 
```

这是相关的编码......由于某种原因它不会生成正方形

```
var square = svgcanvas.selectAll("rect").data(jsonsquare);

circle.enter().append('svg:rect').append("svg:g")
.attr('opacity', 0)
.attr("cursor", "pointer");
}).attr("x", function(d) {
    return d.x;
}).attr("y", function(d) {
    return d.y;
}).attr("width", function(d) {
    return d.width;
}).attr("height", function(d) {
    return d.height;
}); 
```

将标签链接到正方形

```
svgcanvas.selectAll("text").data(jsonsquare).enter().append("svg:text").text(function(d) {
    return d.label;
}).attr("x", function(d) {
    return d.x + 10;
}).attr("y", function(d) {
    return d.y + 10;
});

</script>​​​​​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:59:09.647

您将矩形的属性分配给`svg:g`它下面的组（即 ）。在下面的行中，删除`.append("svg:g")`它应该可以工作。

```
square.enter().append('svg:rect').append("svg:g") 
```

此外，您将不透明度设置为零：

```
.attr('opacity', 0) 
```

这使您的矩形不可见。将其设置为 1 以获得完全可见性，或者将其设置为中间的某个数字以获得半透明填充效果。

# jquery - 如何在 jQuery 中使用类似于其他语言中的静态变量的变量

> ID：12732012
> 
> 赞同：0
> 
> 时间：2012-10-04T16:50:06.060
> 
> 标签：jquery

我设置与 css 维度共享相同的类名。单击特定的`<div>`i
将其填充到屏幕宽度和高度并覆盖其他`<div>s`. 它工作正常。但问题是当我再次点击时，我失去了原来的尺寸以恢复到原来的大小。下面是我的代码：

```
 var isFullscreen = false;
  $('.item').click(function(){
    var d = {};
    var speed = 900;
    if(!isFullscreen){ // MAXIMIZATION
        d.width = $(window).width();;
        d.height = $(window).height();; 
        isFullscreen = true;
        $('.item').hide();
        $(this).show();
        $(this).animate(d,speed)    
    }
    else{ // MINIMIZATION            
        **d.width = $(this).css('width');**
        **d.height = $(this).css('height');**            
        isFullscreen = false;
        $(this).animate(d,speed);
        $('.item').show();
    }
    }) 
```

我试图通过保存其原始尺寸并在第二次点击时使用它们来使用类似于静态变量的东西。而且我看到javascript中没有静态变量。那么如何实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:53:30.430

You're currently re-declaring the `d` variable each time the item is clicked to be an empty object. If you move the `var d = {}` declaration to outside the click function then you'll be able to do it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:06:20.737

尝试使用原型属性。这确保它的添加实例具有与其关联的相同值。

```
function d(){
}

d.prototype.width=$(window).width();
d.prototype.height=$(window).width(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T18:42:33.133

我可以通过在调整大小之前保存我的高度和宽度并稍后使用它们来做到这一点：下面是我修改后的代码：你可以弄清楚，我在这些行中添加了 **....

```
var isFullscreen = false;
  var d = {};
  **var test = {};**
  $('.item').click(function(){
    var speed = 900;
    if(!isFullscreen){ // MAXIMIZATION
        **test.width = $(this).css('width');**
        **test.height = $(this).css('height');**
        d.width = $(window).width();
        d.height = $(window).height();
        isFullscreen = true;
        $('.item').hide();
        $(this).show();
        $(this).animate(d,speed)    
    }
    else{ // MINIMIZATION            
        d.width = test.width;
        d.height = test.height;            
        isFullscreen = false;
        $(this).animate(d,speed);
        $('.item').show();
    }
}) 
```

谢谢大家的支持。

# matlab - Matlab热图/拓扑图

> ID：12732013
> 
> 赞同：1
> 
> 时间：2012-10-04T16:50:16.580
> 
> 标签：matlab

我有 3 个数据向量：特定位置的纬度、经度和海拔。每个向量 (lat, lon, elev) 是一个包含大约 63 个元素的列向量，其中每个元素的第 1 个元素代表一个给定的位置。我想要做的是创建一个拓扑图或热图（无论你想怎么称呼它）来绘制这些位置。我可以绘制它们（如 lon vs lat）没问题，但我不确定在哪里寻找创建拓扑图。我已经研究过使用 surf 函数，但是高程需要是一个二维矩阵，这会导致很多我没有的数据丢失。

有人可以在这里给我一些指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:03:47.000

您可以使用[`TriScatteredInterp`](http://www.mathworks.com/help/matlab/ref/triscatteredinterp.html)将数据插入到常规网格中，然后您可以使用 来绘制表面`surf`，或使用 绘制热图`contourf`。

链接文档中的示例`TriScatteredInterp`将完全满足您的需要，您只需将 、 和 替换`x`为`y`您`z`的数据并为`meshgrid`.

# c# - 无法初始化 AndroidDriver

> ID：12732014
> 
> 赞同：6
> 
> 时间：2012-10-04T16:50:20.787
> 
> 标签：c#, selenium, android-emulator, webdriver, selenium-webdriver

在 W2k8 64 位，我在 android 4.1 API 级别 16 的 android 模拟器实例中使用 ARM 作为 CPU。启动它后，我正在运行我的 UnitTest 并在第一行

```
 var webDriver = new AndroidDriver("http://localhost:8080/wd/hub"); //also with no argument 
```

我有一个例外：

```
Unexpected error. System.Net.WebException: Unable to connect to the remote server ---> System.Net.Sockets.SocketException: No connection could be made because the target machine actively refused it 127.0.0.1:8080
   at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.InternalConnect(EndPoint remoteEP)
   at System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Int32 timeout, Exception& exception)
   --- End of inner exception stack trace ---
   at System.Net.HttpWebRequest.GetRequestStream(TransportContext& context)
   at System.Net.HttpWebRequest.GetRequestStream()
   at OpenQA.Selenium.Remote.HttpCommandExecutor.Execute(Command commandToExecute)
   at OpenQA.Selenium.Remote.RemoteWebDriver.Execute(String driverCommandToExecute, Dictionary`2 parameters) 
```

此 WebDriver 的版本是 2.25.1.0。

我关注了这篇文章：

[http://www.nishantverma.com/2011/06/installing-webdriver-on-android.html](http://www.nishantverma.com/2011/06/installing-webdriver-on-android.html)

当我使用 Firefox 或 ChromeDriver 等其他驱动程序时工作正常。

我将不胜感激任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T19:29:14.280

我可能会告诉您您已经知道的内容，但是您是否已开始将 tcp 端口转发到您正在运行的 android 服务器。供参考检查**[Android驱动程序](http://code.google.com/p/selenium/wiki/AndroidDriver#Install_the_APK)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:50:34.553

您的服务器由于某种原因没有启动。您是否可能已经在端口 8080 上运行了其他东西？

尝试运行`netstat -a -n`并查看是否列出了端口 8080。

如果它正在使用中，您可以尝试在不同的端口上设置或终止正在使用该端口的进程。

您也可以尝试在您的机器上禁用 UAC 和防火墙和/或以管理员身份运行该进程，看看是否有帮助（这当然是暂时的，不要关闭这些）。

# php - 将文件复制到路径 PHP 中的每个目录和子目录

> ID：12732016
> 
> 赞同：1
> 
> 时间：2012-10-04T16:50:33.550
> 
> 标签：php, scripting, directory

我需要一个脚本来将文件复制到特定文件夹中的每个目录和子目录。

在一个名为“项目”的文件夹中，我有几个文件夹，其中有几个文件夹（等等），我需要一个脚本来检查该文件夹中是否有特定文件，如果存在，则什么也不做，如果没有，复制它.

我需要在 php 中执行此操作...

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:15:04.010

我希望这段代码可以帮助你实现你想要的

```
$maindir=".";
mylistFolderFiles($maindir);
function mylistFolderFiles($dir){
  $file = 'example.txt';
  $ffs = scandir($dir);
  foreach($ffs as $ff){
    if($ff != '.' && $ff != '..'){
        if(is_dir($dir.'/'.$ff)) {
            $newfile=$dir.'/'.$ff .'/'. $file ;
            if (!copy($file, $newfile)) {
                echo "failed to copy $file...\n";
            }
            mylistFolderFiles($dir.'/'.$ff);
      } 
    }

  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T17:16:41.517

这会将所有文件、所有文件夹及其内容...从 cunnrent 目录复制到目标 .. 使用`RecursiveDirectoryIterator`和`RecursiveIteratorIterator`

```
echo "<pre>";
mkdirRecursive($target);
if (! is_writable($target)) {
    echo "You don't have permission wo write to ", $target, PHP_EOL;
}
$it = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($dir));
while ( $it->valid() ) {
    if (! $it->isDot()) {
        $name = $it->key();
        $final = $target . str_replace($dir, "", $name);
        if (! mkdirRecursive(dirname($final))) {
            echo "Can Create Directory : ", dirname($final), PHP_EOL;
            continue;
        }
        if (! @copy($name, $final)) {
            echo "Can't Copy : ", dirname($final), PHP_EOL;
            continue;
        }
        echo "Copied ", basename($name), " to ", dirname($final), PHP_EOL;
    }
    $it->next();
}

function mkdirRecursive($pathname, $mode = 0777) {
    is_dir(dirname($pathname)) || mkdirRecursive(dirname($pathname), $mode);
    return is_dir($pathname) || @mkdir($pathname, $mode);
} 
```

# c# - C#和水晶报表中的Connectionstring和Connectioninfo有什么区别

> ID：12732017
> 
> 赞同：0
> 
> 时间：2012-10-04T16:50:35.360
> 
> 标签：c#, crystal-reports

C# 和水晶报告中的 Connectionstring 和 Connectioninfo 有什么区别，我可以使用 Connectionsting 而不是 Connectioninfo。我的要求是我只想使用 connectionstring 而不是 connectioninfo 是否可能？请有人帮忙解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:57:04.277

Connection Info 提供用于检索和设置连接到数据库服务器的选项的属性。

连接字符串是您访问数据库的路径

# regex - grep/sed/awk 中的 1 索引到 0 索引

> ID：12732025
> 
> 赞同：0
> 
> 时间：2012-10-04T16:51:06.017
> 
> 标签：regex, sed, awk, grep, tr

我正在使用具有一些 1 索引伪变量的管道使用 linux 命令行解析模板，我需要 0 索引。基本上：

```
...{1}...{7}... 
```

成为

```
...{0}...{6}... 
```

我想使用其中一个`grep`，`sed`或`awk`按此优先顺序。我想`grep`不能那样做，但我不确定。这种算术运算甚至可以使用这些中的任何一个吗？

*   文件中使用的数字在范围内`0-9`，所以忽略像`23`变得这样的问题`12`
*   文件中没有其他数字，因此您甚至可以忽略`{}`
*   我可以使用 python、ruby 来做到这一点，但我不想那么坚持标准的命令行工具
*   其他可用于带有我不知道的正则表达式的管道的命令行实用程序也很好

**编辑**：改写第一个要点以澄清

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T16:55:24.620

如果输入允许，您可以简单地逃脱：

```
tr 123456789 012345678 
```

请注意，这将替换任何数字的所有实例，因此可能不合适。（例如，`12`变为`01`。从问题中不清楚是否必须处理 2 位值。）

如果您确实需要处理多位数字，您可以这样做：

```
perl -pe 's/\{(\d+)\}/sprintf( "{%d}", $1-1)/ge' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T16:58:17.880

你可以使用 Perl。

```
perl -pe 's/(?<={)\d+(?=})/$&-1/ge' file.txt 
```

如果您确定可以忽略`{...}`，请使用

```
perl -pe 's/\d+/$&-1/ge' file.txt 
```

如果索引总是只有一位数字，那么选择较短的数字

```
perl -pe 's/\d/$&-1/ge' file.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T18:52:27.040

使用 gawk 版本 4，您可以编写：

```
gawk '
    {
        n = split($0, a, /[0-9]/, seps)
        for (i=1; i<n; i++)
            printf("%s%d", a[i], seps[i]-1)
        print a[n]
    }
' 
```

较旧的 awks 可以使用

```
awk '
    {
        while (match(substr($0,idx+1), /[0-9]/)) {
            idx += RSTART
            $0 = substr($0,1, idx-1) (substr($0,idx,1) - 1) substr($0,idx+1)
        }
        print 
    }
' 
```

两者都没有 Perl 单行代码那么优雅。

# gwt - 在 GWT 中重写 SerializationPolicy 并验证所有类型有什么影响

> ID：12732026
> 
> 赞同：0
> 
> 时间：2012-10-04T16:51:11.837
> 
> 标签：gwt, gwt-rpc

在开发过程中我们经常看到这个错误。

com.google.gwt.user.client.rpc.SerializationException：类型“com.test.TestDTO”不可分配给“com.google.gwt.user.client.rpc.IsSerializable”并且没有自定义字段“序列化程序” .为了安全起见，这种类型不会被序列化”。

有人可以告诉我这里的安全问题是什么吗？

通过为 validateSerialize 和 validateDeserialize 方法提供空实现来覆盖 SerializationPolicy 和忽略验证有什么影响。

# javascript - Javascript 在 IE 中不起作用，但在 FF 中可以正常工作

> ID：12732033
> 
> 赞同：0
> 
> 时间：2012-10-04T16:51:37.000
> 
> 标签：javascript, internet-explorer

我有以下javascript函数：

```
function updatePrintCost()
{
    var qty = parseFloat(document.getElementById('qty').value);
    var pp = parseFloat(document.getElementById('pp').value);

    var finalPrice = qty * pp;

    if (!isNaN(finalPrice))
        fp.value = "$" + finalPrice.toFixed(2);
    else
        fp.value = "Error";
} 
```

它由以下 HTML 代码调用：

```
<table>
    <tr>
        <td style='border:none;'>Quantity:</td>
        <td style='border:none;'><input type='text' id='qty' name='quantity' onChange="updatePrintCost()" style='width:50px;' /></td>
        <td style='border:none;'>Print Price:</td>
        <td style='border:none;'><input type='text' name='printPrice' id='pp' onChange="updatePrintCost()" style='width:50px;' /></td>
        <td style='border:none;'> = </td>
        <td style='border:none;'><input type='finalPrice' id='fp' placeholder='0.00' style='width:75px;' /></td>
    </tr>
</table> 
```

我在那里进行了一些警报测试，并且正在调用该函数，但是在设置 fp 的值时失败了。

谁能明白为什么这行不通？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T16:54:18.733

你的 fp 声明在哪里？你需要：

```
var fp = document.getElementById('fp'); 
```

或者：

```
if (!isNaN(finalPrice)) 
       document.getElementById('fp').value = "$" + finalPrice.toFixed(2); 
else 
       document.getElementById('fp').value = "Error"; 
```

您还有一个 finalPrice 类型的奇怪 html 输入，而不是常规类型。

如果您想知道它为什么在 Firefox 中工作，请参阅[此内容。](https://stackoverflow.com/questions/5042265/why-does-document-getelementbyid-function-exist)这是一个跨浏览器解决方案。您这样做的方式仅适用于较新的浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T16:56:47.837

没有回答你的问题，但在我看来，这`<input type='finalPrice' ...>`不是要你的意思。你可能是说`<input type='text' name='finalPrice' ...>`，对吧？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T18:23:56.113

它不是 fp，值。将其更改为 fpvalue 它会工作

# android - 为什么 Android 将 Fragments 放在 FrameLayouts 中？

> ID：12732035
> 
> 赞同：0
> 
> 时间：2012-10-04T16:51:44.387
> 
> 标签：android, android-fragments, fragment, android-framelayout

为什么 Google 通常将 Fragments 放在 FrameLayout 中。我在示例和 Google I/O 应用程序的源代码中看到了它。我试图将 FrameLayout 的属性转换为 Fragment 的属性，并且都保持预期的相同，那么为什么他们使用 FrameLayout 容器呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:03:37.077

可能是因为这样你可以很容易地将它变成一个标签式导航，因为[TabHost](http://developer.android.com/reference/android/widget/TabHost.html)扩展了 FrameLayout，你可以将 FrameLayout 资源分配给它。

# backbone.js - 如何将 strophe.plugins 与主干和 require.js 一起使用

> ID：12732040
> 
> 赞同：2
> 
> 时间：2012-10-04T16:52:13.870
> 
> 标签：backbone.js, xmpp, requirejs, strophe

我使用了 strophe.archive 插件，但在 Strophe 发送查询后，延迟对象的完成功能似乎是“未定义的”。我还将插件添加到 require.js 的“垫片”中：

```
 var q = $.Deferred();     
        q = connection.archive.listCollections("user@server.lit");
        console.log(q);
        q.done(function(){
            console.log("DONE");
        }); 
```

我得到以下跟踪：

```
Uncaught TypeError: Cannot call method 'done' of undefined test.js:23
Backbone.View.extend.initialize test.js:23
Backbone.View backbone.js:1148
child backbone.js:1393
Backbone.Router.extend.pageTest router.js:92
(anonymous function) backbone.js:900
(anonymous function) backbone.js:1082
_.some._.any underscore.js:193
_.extend.loadUrl backbone.js:1080
_.extend.navigate backbone.js:1125
_.extend.navigate backbone.js:909
Backbone.View.extend.pageTest test1.js:199
jQuery.event.dispatch require-jquery.js:5385
elemData.handle.eventHandle 
```

垫片：

```
 archive: {
      deps: ["jquery", "strophe"],
      exports: "archive"
  }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:20:59.577

您调用延迟的 obj 并将其分配给`q`，然后将结果分配`listCollections`给`q`。这是两个不同且完全不相关的任务。仅仅因为你`q`最初做了一个 deferred 并不意味着结果 from`listCollections`现在是某种方式`deferrable`。

```
 var q = $.Deferred();  // q is a deferred obj
    q = connection.archive.listCollections("user@server.lit"); // q is undefined 
```

`listCollections`必须返回一个延迟对象才能调用`done`它。

查看插件代码，它似乎`listCollections`没有返回任何内容。

相反，您必须传递`listCollections`一个回调函数：

```
 var q = $.Deferred();     
    q = connection.archive.listCollections("user@server.lit", null, function(){
        console.log("DONE");
    }); 
```

或者，您可以创建一个包装函数，`listCollections`该函数将返回一个延迟的。

```
 function deferrableListCollections () {
        var q = $.Deferred();     
        connection.archive.listCollections("user@server.lit", null, function(){
            q.resolve() ;
        });
        return q;
    } 
```

不，您可以调用类似于原始代码的内容：

```
 q = deferrableListCollections("user@server.lit");
    q.done(function(){
        console.log("DONE");
    }); 
```

# c++ - “std::iterator_traits 的显式特化 实例化后” (CLang)

> ID：12732042
> 
> 赞同：2
> 
> 时间：2012-10-04T16:52:45.453
> 
> 标签：c++, xcode, macos, clang, template-specialization

我有一些在 MSVC 下编译良好的代码（或者说是发送给我的 Windows 开发人员），但在 CLang 下会出错。环顾四周后，我发现 CLang 在解决模板专业化方面确实更加严格，但我不确定我应该将专业化放在哪里。基本上我的一个文件有一个这样的结构：

```
template<>
struct iterator_traits< char * >   // error is here
{
    typedef random_access_iterator_tag iterator_category;
    typedef char value_type;
    typedef ptrdiff_t difference_type;
    typedef difference_type distance_type;
    typedef char * pointer;
    typedef char & reference;
}; 
```

这是在一个`namespace std`块内。错误信息是：

```
Explicit specialization of 'std::iterator_traits<char *>' after instantiation 
```

同一错误消息的另一部分（通过“扩展”Xcode 中的错误消息查看）说`Implicit instantiation first required here`，然后单击它会将我带到`stl_iterator.h`，特别是这一行（第 642 行）：

```
typedef typename iterator_traits<_Iterator>::iterator_category
                                                         iterator_category; 
```

有谁知道在这种情况下正确的做法是什么？我见过涉及类的示例，但从未见过涉及结构的示例。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T16:59:20.710

编译器抱怨您在实例化通用模板后尝试专门化模板 - 到那时，编译器已经使用通用模板进行实例化，它不能返回并使用您的专门化. 换句话说，是这样的：

```
template <typename T>
struct X
{
    // Generic implementation
};

// Instantiate template by using it in any way
X<int> foo;

template<>
struct X<int>
{
    // Specialization implementation for int
}; 
```

解决方法是在实例化*之前*定义特化，因此在本例中，您需要将特化移到使用`X<int>`where 之前`X<int>`。

请注意，STL 已经定义了`std::iterator_trait`for 指针类型的特化，因此无需在此处定义您自己的 for 特化`char*`。您通常只对不是指针的用户定义迭代器类型执行此操作。请参阅 C++03 标准的 §24.3.1/2：

> [模板`iterator_traits<Iterator>`]专门用于指针
> 
> ```
> template<class T> struct iterator_traits<T*> {
>   typedef ptrdiff_t difference_type;
>   typedef T value_type;
>   typedef T* pointer;
>   typedef T& reference;
>   typedef random_access_iterator_tag iterator_category;
> }; 
> ```
> 
> 和指向`const`as的指针
> 
> ```
> template<class T> struct iterator_traits<const T*> {
>   typedef ptrdiff_t difference_type;
>   typedef T value_type;
>   typedef const T* pointer;
>   typedef const T& reference;
>   typedef random_access_iterator_tag iterator_category;
> }; 
> ```

因此，提供自己的`std::iterator_traits<char*>`专业是没有意义的。由于`char*`不是用户定义的类型，因此根据标准它也是未定义的行为。§17.4.3.1/1 说：

> `std`除非另有说明，否则C++ 程序将声明或定义添加到命名空间 std 或命名空间内的命名空间是未定义的。程序可以将任何标准库模板的模板特化添加到命名空间`std`。标准库模板的这种特化（完全或部分）会导致未定义的行为，除非声明依赖于用户定义的外部链接名称，并且除非特化满足原始模板的标准库要求。^(163))
> 
> 163) 任何实例化其他库模板的库代码必须准备好与满足标准最低要求的任何用户提供的专业化充分合作

# c# - 我应该如何处理表单中的单引号以帮助防止 SQL 注入，使用 WebMatrix razor (C#)

> ID：12732044
> 
> 赞同：1
> 
> 时间：2012-10-04T16:52:54.970
> 
> 标签：c#, sql, razor, sql-injection, webmatrix

目前，我根本不允许使用撇号（以及您可以看到的其他字符），并为每个字段重申：

```
foreach(char c in Comments)
    {
        if(c=='\'' || c=='$' || c=='\"' || c=='&' || c=='%' || c=='@' || c=='-' || c=='<' || c=='>')
        {
            errorMessage = "You have entered at least one invalid character in the \"Comments\" field. Invalid characters are: [\'], [\"], [&], [$], [@], [-], [<], [>], and [%]";
        }
    } 
```

我已经编写了一段时间，而且我越来越好，但真正的问题是，虽然我确信有一种方法可以有效地“剥离”或以其他方式验证用户输入，但我不确定哪个方法是最好的，在安全危机迫在眉睫之前可能不会。

如果必须，我将决定根本不允许在表单中使用单引号（就像现在一样），但这可能会加重任何命名的人说......名称字段的 Bill O'Reilly 等，等等。

可能还有其他（好吧，我不知道该怎么称呼它们，“插件？”“外部程序？”）可以为我完成这项工作，但这实际上是无用的，因为我不仅不知道如何要集成它，我不知道如何专门针对我的 Web 界面/数据库进行定制。

是否有任何代码可以帮助我从正常的撇号中检测到 sql 注入撇号（可能通过它周围的字符？）？请记住，我的某些字段最多可容纳 500 个字符（文本区域），一个最多可容纳 1,000 个字符。

感谢您的任何想法或帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T16:55:20.903

再多的输入编码/清理都不会像参数化查询那样安全。

有关参数化查询的详细信息，请参阅[SqlCommand.Parameters](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)。

```
string commandText = "SELECT * FROM Sales WHERE CustomerID = @ID;";

using (SqlConnection connection = new SqlConnection(connectionString))
{
    SqlCommand command = new SqlCommand(commandText, connection);
    command.Parameters.Add("@ID", SqlDbType.Int);
    command.Parameters["@ID"].Value = customerID;
    var reader = command.ExecuteReader();
    //.....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T16:58:18.490

SQL 注入不是包含特定字符的输入的问题，而是您如何处理输入的问题。

通过禁止某些字符，您可以阻止导致 SQL 注入的明显方式，但几乎不可能使用它来阻止所有可能的方式。

如果编码正确，则没有导致问题的字符。对数据库调用执行此操作的最佳方法是使用参数化查询，以便数据库驱动程序负责根据数据类型和特定数据库对正确字符进行编码。

此外，您需要在以后使用它们时正确编码这些值，例如放在 HTML 代码中的 HTML 编码字符串、在 URL 中使用的 URL 编码字符串（以及放在 HTML 中的 URL 中的字符串）代码。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T07:05:34.770

正如其他人已经说过的那样，您应该使用参数化查询来防止 SQL 注入。

Alexei Levenkov 提供了使用 ADO.NET 参数的一个很好的示例，但更常见的是，在处理参数处理略有不同的 WebMatrix Razor 页面（ASP.NET 网页框架）时，您将使用[数据库助手。](http://msdn.microsoft.com/en-us/library/gg569069%28v=vs.111%29.aspx)[Database.Query](http://msdn.microsoft.com/en-us/library/webmatrix.data.database.query%28v=vs.111%29.aspx)方法 (Query(string commandText, params object[] parameters) 接受一个表示要执行的 SQL的字符串和一个表示要传递给 SQL 的参数值的对象数组。数据库助手需要参数标记从 @0 开始，每次递增 1，例如

```
var sql = "SELECT * From MyTable WHERE TheDate > @0 AND ID > @1"; 
```

然后以下列方式传递实际值：

```
var data = Database.Open("MyDb").Query(sql, Request["date"], Request["id"]); 
```

在内部，Database 类负责将值与占位符匹配并为您创建 ADO.NET 参数。

# ruby-on-rails - Undefined method `merge' for '####':string <%= form_for %> helper

> ID：12732046
> 
> 赞同：13
> 
> 时间：2012-10-04T16:53:00.273
> 
> 标签：ruby-on-rails, ruby

I have a form, that when POSTed, renders another form. What I would like to do is to pass the parameters from the first form, into certain hidden fields of the second form.

The second form is using a form_for form helper, and what I'm trying to do is to get it to accept the parameters that are being posted to it.

Here's what the form looks like:

```
 <%= form_for(@phone) do |f| %>
        <%= f.hidden_field :original_number, params[:original_number] %>

        <%= f.hidden_field :name, params[:name] %>
        <%= f.hidden_field :twilio_number,  number.phone_number %>

        <div class="found_list">
            <div class="found_phone_number">
                <%= f.label :number, number.friendly_name) %>
            </div>
            <div class="choose_found_number">
            <%= f.submit "Choose This Number", :class => "btn btn-large btn-success" %>
            </div>
        </div>
            <hr>
    <% end %> 
```

When I do something like

```
<%= f.hidden_field :original_number, params[:original_number] %> 
```

The action gives me the error:

```
NoMethodError in Find_numbers#create

Showing C:/Sites/dentist/app/views/phones/new.html.erb where line #17 raised:

undefined method `merge' for "1231231234":String 
```

The "1231231234" is the parameter that is being POSTed to the form, but it doesn't seem to accept it.

Do you have an idea of how I would get the form to accept the parameter?

When I removed the params[], the error doesn't happen, but the parameters also don't populate in the hidden fields.

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-04T16:55:30.480

second parameter in `hidden_field` should be an [option hash](http://apidock.com/rails/ActionView/Helpers/FormHelper/hidden_field), not a value

```
<%= f.hidden_field :original_number, :value => params[:original_number] %> 
```

# php - Why is unserialize nested inside another unserialize function in Wordpress core?

> ID：12732047
> 
> 赞同：4
> 
> 时间：2012-10-04T16:53:05.750
> 
> 标签：php, wordpress, serialization, recursion

I was looking through the Wordpress core, and I found this function:

```
function unserialize ( $data ) {
    return unserialize( $data );
} 
```

First off, I don't even understand why unserialize has been defined since its a native php function. Secondly, what in the world is going on here since its defined recursively without any condition to halt infinite recursion?

Throw me a bone. I'm newbie at this stuff.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T16:58:08.147

那必须是类中的方法定义，例如：

```
class SomeClass
{
    function unserialize($data) 
    { 
        return unserialize($data);
    }

    // ...
} 
```

否则你会得到一个致命的错误，说你不能重新声明`unserialize()`。

它所做的只是`unserialize()`向一个类添加一个方法。然后，此方法调用`unserialize()`PHP 中的本机函数。看起来很傻，但是，我没有写 Wordpress。

* * *

我相信我找到了有问题的方法：（[`wp-includes/rss.php`](http://core.trac.wordpress.org/browser/trunk/wp-includes/rss.php)第 783 行）。它确实是`RSSCache`类的方法。

我想他们将来可能想编写自己的序列化例程和/或某些子类`RSSCache`有自己的`serialize()`and `unserialize()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T17:01:50.050

NullUserException 是对的。就解释而言，这是我最好的镜头。

例如，假设有一天 PHP 决定弃用 unserialize 函数。突然间，您必须在代码中找到“unserialize()”的所有地方更改为新的函数名称，并且可能进行一些重写。但是，如果您像 WordPress 那样使用自己的函数，您所要做的就是更改一次反序列化函数的版本，而不是在任何地方使用它。

# java - accessors in class extending JPanel

> ID：12732048
> 
> 赞同：1
> 
> 时间：2012-10-04T16:53:11.943
> 
> 标签：java, swing, jpanel, jtextfield, accessor

I'm writing a clone of Risk in Java, and am having some trouble with my code. When I create a new game, I create a JPanel with a JTextField (for the player name) and a JComboBox(for the player color), one panel for each player the user wants to create. Instances of this panel are created dynamically based on a second JComboBox which lets the user select a number of players from three to eight.

My problem is that when I want to create the player objects from the data entered into the player creation panel, each player object retrieves the data from the most-recently-created player creation panel. I have a functional solution, but I can't seem to figure out why what seems to be the 'proper' solution () won't work.

This is the code that I have working right now: Creation panel class:

```
package risk;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.ImageIcon;
import javax.swing.JComboBox;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class PlayerCreatePanel extends JPanel{

public static ImageIcon[] playerColors = {Resources.red,Resources.green,Resources.blue,Resources.cyan,Resources.magenta,Resources.yellow,Resources.orange,Resources.gray};

public JComboBox playerColor;

public JTextField playerName;

public PlayerCreatePanel(int index){

    this.setPreferredSize(new Dimension(360, 30));

    JLabel numberLabel = new JLabel ("Player " + index + ":  ");
    JLabel nameLabel = new JLabel("Name: ");
    JLabel colorLabel = new JLabel("  Color: ");

    playerName = new JTextField("");
    playerName.setColumns(13);

    playerColor = new JComboBox(playerColors);

    this.add(numberLabel);
    this.add(nameLabel);
    this.add(playerName);
    this.add(colorLabel);
    this.add(playerColor);
}
} 
```

And for the new game class, the part that creates players:

```
package risk;

import java.awt.Color;
import java.awt.Dimension;
import javax.swing.JPanel;

public class NewGame {

private static PlayerCreatePanel [] panels = {  new PlayerCreatePanel(1), new PlayerCreatePanel(2), 
                                                new PlayerCreatePanel(3), null, null, null, null, null};

private static int playerCount = 3;

public static void createPlayers(){
    Resources.players = new Player[playerCount];
    switch(playerCount){
    case 8: Resources.players[7] = new Player (panels[7].playerName.getText(), Resources.colors[panels[7].playerColor.getSelectedIndex()], 8);
    case 7: Resources.players[6] = new Player (panels[6].playerName.getText(), Resources.colors[panels[6].playerColor.getSelectedIndex()], 7);
    case 6: Resources.players[5] = new Player (panels[5].playerName.getText(), Resources.colors[panels[5].playerColor.getSelectedIndex()], 6);
    case 5: Resources.players[4] = new Player (panels[4].playerName.getText(), Resources.colors[panels[4].playerColor.getSelectedIndex()], 5);
    case 4: Resources.players[3] = new Player (panels[3].playerName.getText(), Resources.colors[panels[3].playerColor.getSelectedIndex()], 4);
    case 3: Resources.players[2] = new Player (panels[2].playerName.getText(), Resources.colors[panels[2].playerColor.getSelectedIndex()], 3);
            Resources.players[1] = new Player (panels[1].playerName.getText(), Resources.colors[panels[1].playerColor.getSelectedIndex()], 2);
            Resources.players[0] = new Player (panels[0].playerName.getText(), Resources.colors[panels[0].playerColor.getSelectedIndex()], 1); break;
    default: break;     
    }
}
} 
```

Now, what I've learned is the proper way to do this is to make my JTextField and JComboBox private, and write accessors, like so:

```
private JComboBox playerColor;
private JTextField playerName;

//...same method as above

public static String getName(){
    return playerName.getText();
}

public static int getColorIndex(){
    return playerColor.getSelectedIndex();
} 
```

and change the creation lines in the new game method to read something like this:

```
Resources.players [0] = new Player (panels[0].getName(), panels[0].getColorIndex(), 1); 
```

# java - How to insert my own code to Netbeans Gui Builder?

> ID：12732049
> 
> 赞同：1
> 
> 时间：2012-10-04T16:53:15.413
> 
> 标签：java, swing, user-interface, netbeans, jeditorpane

I found on the Web code: [http://java-sl.com/tip_autoreplace_smiles.html](http://java-sl.com/tip_autoreplace_smiles.html) which I edited to my own needs, take a look:

```
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.io.IOException;
import javax.swing.*;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;
import javax.swing.text.*;
import java.awt.image.BufferedImage;
import java.io.File;
import javax.imageio.ImageIO;

public class Emotes extends JEditorPane {

    public Emotes() {
        super();
        this.setEditorKit(new StyledEditorKit());
        this.initListener();
    }

    private void replace (String text, StyledDocument doc, ImageIcon icon, int start, String what) throws BadLocationException
    {
        int i = text.indexOf(what);
        while(i >= 0) 
        {
            final SimpleAttributeSet attrs = new SimpleAttributeSet(doc.getCharacterElement(start+i).getAttributes());
            if (StyleConstants.getIcon(attrs) == null)
            {
                StyleConstants.setIcon(attrs, icon);
                doc.remove(start+i, what.length());
                doc.insertString(start+i,what, attrs);
            }
            i = text.indexOf(what, i+what.length());
        }
    }

    private void initListener() {
        getDocument().addDocumentListener(new DocumentListener(){
            @Override
            public void insertUpdate(DocumentEvent event) {
                final DocumentEvent e=event;
                SwingUtilities.invokeLater(new Runnable() {
                    @Override
                    public void run() {
                        if (e.getDocument() instanceof StyledDocument) {
                            try {
                                StyledDocument doc=(StyledDocument)e.getDocument();
                                int start= Utilities.getRowStart(Emotes.this,Math.max(0,e.getOffset()-1));
                                int end=Utilities.getWordStart(Emotes.this,e.getOffset()+e.getLength());
                                String text=doc.getText(start, end-start);

                                replace(text, doc, createEmoticon("wink.png"), start, ";)");
                                replace(text, doc, createEmoticon("wink.png"), start, "<wink>");
                                replace(text, doc, createEmoticon("sad.png"), start, ":(");
                                replace(text, doc, createEmoticon("sad.png"), start, "<sad>");
                                replace(text, doc, createEmoticon("smile.png"), start, ":)");
                                replace(text, doc, createEmoticon("smile.png"), start, "<smile>");

                            } catch (BadLocationException e1) {
                                e1.printStackTrace();
                            }
                        }
                    }
                });
            }
            @Override
            public void removeUpdate(DocumentEvent e) {
            }
            @Override
            public void changedUpdate(DocumentEvent e) {
            }
        });
    }

    static ImageIcon createEmoticon(String icon)
    {
        BufferedImage img = null;
        try
        {
            img = ImageIO.read(new File(icon));
            Graphics g = img.getGraphics();
            ((Graphics2D)g).setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        }catch (IOException ex)
        {
        }
        return new ImageIcon(img);
    }
} 
```

which works great. But I created in Netbeans a new GUI (JDialog Window) with JEditorPane on it, where I want to use this feature on JDialog window:

![enter image description here](../Images/8b38f60fe01d8bbb36de631de2e73ce1.png)

but it doesnt want to work at all. When I type ":)" its not changing in an image.

Just try to run that code:

```
public class NewJDialog extends javax.swing.JDialog {

    /** Creates new form NewJDialog */
    public NewJDialog(java.awt.Frame parent, boolean modal) {
        super(parent, modal);
        initComponents();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jScrollPane1 = new javax.swing.JScrollPane();
        jEditorPane1 = new Emotes();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);

        jScrollPane1.setViewportView(jEditorPane1);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 400, Short.MAX_VALUE)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addContainerGap()
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 376, Short.MAX_VALUE)
                    .addContainerGap()))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 300, Short.MAX_VALUE)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addGap(51, 51, 51)
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 229, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addContainerGap(20, Short.MAX_VALUE)))
        );

        pack();
    }// </editor-fold>

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(NewJDialog.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(NewJDialog.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(NewJDialog.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(NewJDialog.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the dialog */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                NewJDialog dialog = new NewJDialog(new javax.swing.JFrame(), true);
                dialog.addWindowListener(new java.awt.event.WindowAdapter() {

                    @Override
                    public void windowClosing(java.awt.event.WindowEvent e) {
                        System.exit(0);
                    }
                });
                dialog.setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JEditorPane jEditorPane1;
    private javax.swing.JScrollPane jScrollPane1;
    // End of variables declaration
} 
```

And the emotes I use are: ![enter image description here](../Images/0b4dbff23b22d4d49c6fd6fb8e7e22e9.png) ![enter image description here](../Images/b9c8e6bb02a3eddff5e35fa40d924d7f.png) ![enter image description here](../Images/e00b66aad47883ee138af36eb502798c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:16:11.770

应用程序被编译为 .jar 文件。普通文件 I/O 然后不占用（当前目录因调用而异）。将图像从 jar/class 路径中取出，如下所示：

```
 img = ImageIO.read(Emotes.class.getResourceAsStream(icon)); 
```

# jquery - jQuery ajax request internet explorer popup blocked

> ID：12732053
> 
> 赞同：1
> 
> 时间：2012-10-04T16:53:40.240
> 
> 标签：jquery, html, ajax, popup, explorer

This is my function to retrieve a code by passing a variable to a page :

```
jQuery(function() {

jQuery('#carrelli_selezione').change(function(event){

    var categoria_alimentazione = jQuery('#carrelli_selezione').val();

    jQuery.ajax({

        url: 'test_alimentazione.php',
        //dataType: 'html',
        crossDomain: 'true',
        type: 'POST',
        data: ({
            'variabile_alimentazione': categoria_alimentazione
        }),

        success: function(data1) {
            jQuery('#alimentazione_select').html(data1);

        }

    });

});}); 
```

This passes a variable to the page then I want to load the content in my div... but explorer doesn't work because block the popup...

How can I work around this ?

the code in php page is a php page with the result of the query and an other script code

`

```
$querystr = "
SELECT DISTINCT wpostmeta.meta_value 
FROM $wpdb->posts wposts
LEFT JOIN $wpdb->postmeta wpostmeta ON wposts.ID = wpostmeta.post_id 
LEFT JOIN $wpdb->term_relationships ON (wposts.ID = $wpdb->term_relationships.object_id)
LEFT JOIN $wpdb->term_taxonomy ON ($wpdb->term_relationships.term_taxonomy_id = $wpdb->term_taxonomy.term_taxonomy_id)
WHERE wpostmeta.meta_key = 'alimentazione'
AND $wpdb->term_taxonomy.taxonomy = 'category'
AND $wpdb->term_taxonomy.term_id IN($variabile_alimentazione)
ORDER BY wpostmeta.meta_value ASC

";

$risultato = $wpdb->get_results($querystr,ARRAY_A);

?>

<select name="alimentazione" id="alimentazione_selezione">
<option selected="selected" value="">Seleziona alimentazione</option>
<?php //global $post; ?><?php foreach ($risultato as $chiave): ?><?php    //setup_postdata($post); ?><option value="<?php echo $chiave['meta_value']; ?>" ><?php echo      $chiave['meta_value']; ?></option><?php endforeach; ?></select>

<script type="text/javascript">
jQuery(function() {

var categoria_carrelli = jQuery("#carrelli_selezione").val();

jQuery("#alimentazione_selezione").change(function(event){

    var categoria_elevazione = jQuery("#alimentazione_selezione").val();
    //var categoria_alimentazione = jQuery("#carrelli_selezione").val();

    jQuery.ajax({

        url: "test_elevazione.php",
        dataType: "html",
        type: "POST",
        data: ({
            "variabile_elevazione": categoria_elevazione,
            "variabile_carrelli": categoria_carrelli
        }),

        success: function(data2) {
            jQuery("#elevazione_select").html(data2);

        }

    });

});

});

</script>` 
```

# c# - 当我将 XNA 游戏窗口的垂直大小更改为最小时，它会为 spritebatch 抛出 ObjectDisposedException，为什么？

> ID：12732055
> 
> 赞同：3
> 
> 时间：2012-10-04T16:53:56.840
> 
> 标签：c#, xna, window, spritebatch

我认为，当我调整游戏窗口的大小并且视口的高度变为 0 时，GC 会处理 spritebatch。这是怎么回事？我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T17:15:14.910

```
Form gameForm = (Form)Form.FromHandle(Window.Handle);
gameForm.MinimumSize = new System.Drawing.Size(800, 600); 
```

又短又甜！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-13T14:48:11.303

我遇到了同样的问题，一些快速调试显示 XNA 调用 UnloadContent 然后再次调用 LoadContent 来重新初始化资源；我猜它丢失了 GraphicsDevice 或其他东西，因此重新加载。

在 LoadContent 中创建与 GraphicsDevice 相关的东西可以解决这个问题。

现在，对于这种特殊情况，设置最小尺寸是个好主意，但我不知道这是否是 Xbox 和 Windows 之间的便携式解决方案。但是，可能在其他情况下也会发生类似的情况，即调用 UnloadContent，因此最好遵守这种做法。

# facebook-graph-api - Facebook API : Now that post with link won't reach the feed, what would you do?

> ID：12732056
> 
> 赞同：0
> 
> 时间：2012-10-04T16:54:01.433
> 
> 标签：facebook-graph-api

here is the [document](https://developers.facebook.com/docs/fbjs/streamPublish/) state that

> Do not include an attachment or action link. If you do, the story will get published and will appear in the stream and on the user's Wall only. It won't appear at the top of the profile or in the Status Updates page.

Just wondering what others choose between

*   still add a post with your link even it doesn't show in feed
*   sending just a message and have it in feed?

# python - Python 3 urllib encoding

> ID：12732064
> 
> 赞同：2
> 
> 时间：2012-10-04T16:54:40.467
> 
> 标签：python, unicode, encoding, lxml

I have a piece of code in Python 3 that retrieves information from a website :

```
webpage = urllib.request.urlopen('http://www.bdm.insee.fr/bdm2/index.action')
webpage = webpage.read()
webpage = webpage.decode("ISO-8859-1")
parser = etree.HTMLParser()
tree = etree.fromstring(webpage,parser)
for liste in tree.iterfind(".//ul"):
   print(etree.tostring(liste, pretty_print=True).decode("utf-8")) 
```

I don't understand why some characters are rightly encoded while others aren't. Here is a portion of the output :

```
<ul class="liens"><li><a href="http://www.insee.fr/fr/publications-et-services/default.asp?page=rediffusion/rediffusion-abon-bdm.htm">Souscription</a></li>
</ul>
<ul id="lienstransversauxbas"><li class="premier" id="navigation-lettre">&#13;
<a href="http://www.insee.fr/fr/publications-et-services/default.asp?page=abonnements/liste-abonnements.htm" title="Lire la lettre d'information">Lettre d'information</a>&#13;
</li>&#13;
<li id="navigation-plan">&#13;
<a accesskey="3" href="http://www.insee.fr/fr/publications-et-services/services/plan-du-site.asp" title="Plan du site">Plan du site</a>&#13;
</li>&#13;
<li id="navigation-boutique">&#13;
<a href="http://www.webcommerce.insee.fr/index.php" title="Acc&#233;der &#224; la boutique en ligne">Acheter les publications</a>&#13;
</li>&#13;
<li id="navigation-credits">&#13;
<a accesskey="8" href="http://www.insee.fr/fr/publications-et-services/default.asp?page=copyright.htm" title="Copyright Insee">Mentions l&#233;gales et cr&#233;dits</a>&#13;
</li>&#13;
</ul> 
```

What are those &#13?

Thanks,

Michael

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:56:27.807

那些是回车。我怀疑`etree`是明确包括它们以便保留空白，就像使用`&nbsp;`来保留空间一样。不过，这是一个猜测；我没有`&#13;`在原始来源中看到，所以我不清楚为什么`etree`要竭尽全力保护它。

# castle-windsor - 温莎嵌套解析

> ID：12732065
> 
> 赞同：0
> 
> 时间：2012-10-04T16:54:41.160
> 
> 标签：castle-windsor

我有以下服务：

```
class Order

interface IOrderService
    void SendOrder(Order order)
class SmsOrderService:IOrderService(constructor ISmsService)
class FaxOrderService:IOrderService
class MailOrderService:IOrderService

interface ISmsService
    void SendSms(string message,string phone)
class XSmsService
class YSmsService(constructor YSmsServiceConfiguration)

class YSmsServiceConfiguration
    string Username
    string Password

class OrderManager(constructor IOrderService)
    void SendOrderAndLog(Order order) 
```

我需要将 OrderManager 与所有 IOrderService 实现的类一起使用。

我的温莎配置是：

```
static void Main(string[] args)
    {
            WindsorContainer container = new WindsorContainer();
            // OrderManager implementations
            container.Register(Component.For<OrderManager>()
                                   .ImplementedBy<OrderManager>()
                                   .Named("OrderManagerWithSmsService")
                                   .DependsOn(Property.ForKey<IOrderService>().Is<SmsOrderService>()));

            container.Register(Component.For<OrderManager>()
                                   .ImplementedBy<OrderManager>()
                                   .Named("OrderManagerWithFaxService")
                                   .DependsOn(Property.ForKey<IOrderService>().Is<FaxOrderService>()));

            container.Register(Component.For<OrderManager>()
                                  .ImplementedBy<OrderManager>()
                                  .Named("OrderManagerWithMailService")
                                  .DependsOn(Property.ForKey<IOrderService>().Is<MailOrderService>()));

            // IOrderService implementations
            container.Register(Component.For<IOrderService>()
                                   .ImplementedBy<SmsOrderService>());
            container.Register(Component.For<IOrderService>()
                                   .ImplementedBy<FaxOrderService>());
            container.Register(Component.For<IOrderService>()
                                   .ImplementedBy<MailOrderService>());

            // ISmsService implementations
            container.Register(Component.For<ISmsService>()
                .ImplementedBy<YSmsService>()
                .DependsOn(Property.ForKey<YSmsServiceConfiguration>().Eq(GetConfiguration()))
                .Named("YSmsService")
                .LifestylePerThread());

            container.Register(Component.For<ISmsService>()
                .ImplementedBy<XSmsService>()
                .Named("XSmsService")
                .LifestylePerThread());

            var manager = container.Resolve<OrderManager>("OrderManagerWithSmsService");
            manager.SendOrderAndLog(new Order()
                                       {
                                           ProductName = "New York Steak"
                                       });
            manager.SendOrderAndLog(new Order()
                                    {
                                        ProductName = "Red Wine"
                                    });

            Console.Read();
    } 
```

如何使用有效的 Windsor 配置在 OrderManager 中使用 YSmsService？

像这样： container.Resolve("SmsOrderService(YSmsService)"); // 解析确定构造函数参数的键

不是这样的：

```
 var manager = container.Resolve<OrderManager>(new
    {
        orderService = container.Resolve<IOrderService>( new
                {
                    service = container.Resolve<ISmsService>("YSmsService")
                })
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:52:41.847

这称为[服务覆盖](http://docs.castleproject.org/Windsor.Inline-Dependencies.ashx#In-line_service_dependencies_1)，您已经在使用它。又是什么问题？

# java - 如何自动记录Java中方法的进入/退出？

> ID：12732069
> 
> 赞同：25
> 
> 时间：2012-10-04T16:54:47.580
> 
> 标签：java, logging, methods, java.util.logging

现在，我正在使用`java.util.logging`记录 Java 项目中每个方法的入口和出口点。这在调试时对我非常有用。

我在每个方法的开头都有这段代码，最后有一个类似的代码：

```
if (logger.isLoggable(Level.FINER)) {
    logger.entering(this.getClass().getName(), "methodName");
} 
```

其中“methodName”是方法的名称（硬编码）。

**所以我想知道是否有一种方法可以自动执行此操作，而不必在每个方法中都包含此代码。**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-04T17:23:29.773

我建议使用面向方面的编程。

例如，使用[AspectJ](http://www.eclipse.org/aspectj/)编译器（可以集成到 Eclipse、Emacs 和其他 IDE），您可以创建如下代码：

```
aspect AspectExample {
    before() : execution(* Point.*(..))
    {
         logger.entering(thisJoinPointStaticPart.getSignature().getName(), thisJoinPointStaticPart.getSignature().getDeclaringType()   );

    }

    after() : execution(* Point.*(..))
    {
         logger.exiting(thisJoinPointStaticPart.getSignature().getName() , thisJoinPointStaticPart.getSignature().getDeclaringType()  );

    }
} 
```

这方面在“Point”类中的所有方法执行前后添加了一个日志记录代码。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-04T16:55:39.737

您应该查看[面向方面的编程](http://en.wikipedia.org/wiki/Aspect-oriented_programming)。我建议你应该看看[Spring AOP](http://static.springsource.org/spring/docs/2.5.5/reference/aop.html)或[AspectJ 。](http://www.eclipse.org/aspectj/)

此外，这里有一个快速教程，可帮助您开始[使用 Spring AOP 进行日志记录](http://www.fiveminutes.eu/logging-with-spring-aop/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-03T08:08:01.713

正如已经建议的那样，将 AOP 与[jcabi-aspects](http://aspects.jcabi.com/)[`@Loggable`](http://aspects.jcabi.com/annotation-loggable.html)的注释一起使用（我是开发人员）：

```
@Loggable(Loggable.DEBUG)
public String load(URL url) {
  return url.openConnection().getContent();
} 
```

该库还包含一个 AOP 方面，它理解这些注释并通过 SLF4J 自动记录方法调用、它们的参数和执行时间。

另外，请查看解释详细信息的博客文章：[http ://www.yegor256.com/2014/06/01/aop-aspectj-java-method-logging.html](http://www.yegor256.com/2014/06/01/aop-aspectj-java-method-logging.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-04T17:08:52.760

您是否尝试过查看[slf4j](http://www.slf4j.org)？它具有可以自动收集方法名称的[LocationAwareLogger 。](http://www.slf4j.org/api/org/slf4j/spi/LocationAwareLogger.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-04T16:57:21.217

您应该查看[Aspect Oriented Programming](http://en.wikipedia.org/wiki/Aspect-oriented_programming)，特别`around()`是对于记录您希望在定义中限定的方法的进入和退出很有用的连接点。

# iphone - NSInvalidArgumentException [NSURL length] url video record iphone

> ID：12732074
> 
> 赞同：1
> 
> 时间：2012-10-04T16:55:14.150
> 
> 标签：iphone, url, mpmediaplayercontroller

I save a video via iphone database application,the url where i'm recording the video is:

file://localhost/private/var/mobile/Applications/0DB3ABFC-1630-44FF-8506-4B08E3CB2C85/tmp/capture-T0x2591d0.tmp.00fEdr/capturedvideo.MOV

However, when I try to read the video via MediaPlayer it always crashes...

sample code:

```
NSString *frameName = [info objectForKey:@"UIImagePickerControllerMediaURL"];

NSURL *url = [NSURL URLWithString:frameName];

videoPlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
[self.view addSubview:videoPlayer.view];

videoPlayer.view.frame = CGRectMake(0, 0, 320, 419);
[videoPlayer play]; 
```

Thank you in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:11:53.570

看起来内容`[info objectForKey:@"UIImagePickerControllerMediaURL"]`无效。

如果它是有效的，`fileURLWithPath`那就试试吧`urlWithString`。

# php - Codeigniter update form not retrieving dropdown values

> ID：12732082
> 
> 赞同：0
> 
> 时间：2012-10-04T16:55:43.063
> 
> 标签：php, forms, codeigniter

I'm fairly new to CI. I have a customer database which stores a bunch of customer information. I have also created an Update controller to update current customer information. The update form is the same form as the new customer form but for the value I've got it pulling the old data from the database. My problem is it pulls all the data and displays it in it's propor field except the drop down field. Any ideas how to fix this?

CONTROLLER:

```
function edit_customer($id){
    $data['success']=0;
    if($_POST){
        $data_customer=array(
            'first_name'=>$_POST['first_name'],
            'last_name'=>$_POST['last_name'],
            'phone'=>$_POST['phone'],
            'email'=>$_POST['email'],
            'website'=>$_POST['website'],
            'business_name'=>$_POST['business_name'],
            'business_add'=>$_POST['business_add'],
            'business_cityState'=>$_POST['business_cityState'],
            'cc_type'=>$_POST['cc_type'],
            'cc_number'=>$_POST['cc_number'],
            'cc_exp'=>$_POST['cc_exp'],
            'cc_cvd'=>$_POST['cc_cvd'],
            'billing_add'=>$_POST['billing_add'],
            'billing_zip'=>$_POST['billing_zip'],
            'package'=>$_POST['package'],
            'assigned_zip_code'=>$_POST['assigned_zip_code'],
            'active'=>1
        );
        $data_customer['active'] = 1;
        $this->customer->update_customer($id,$data_customer);
        $data['success']=1;
    }
    $data['customer']=$this->customer->get_customer($id);

    $this->load->view('header');
    $this->load->view('edit_customer',$data);
    $this->load->view('footer');

} 
```

MODEL:

```
function update_customer($id, $data_customer){
    $this->db->where('id', $id);
    $this->db->update('customers', $data_customer);
} 
```

VIEW DROPDOWN:

```
<label for="cc_type">Credit Card Type:</label>
                <select name="cc_type" value="<?=$customer['cc_type'] ?>">
                  <option></option>
                  <option>Visa</option>
                  <option>Mastercard</option>
                  <option>American Express</option>
                  <option>Discover</option>
                </select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:51:27.867

对于要选择的选项，您需要将`selected`属性添加到`<option>`元素。

例如：

```
<select name="type">
  <option>a</option>
  <option>b</option>
  <option selected="selected">c</option>
  <option>d</option>
</select>​ 
```

在这里查看：http: [//jsfiddle.net/3M4xv/](http://jsfiddle.net/3M4xv/)

因此，在您的代码中，您可以执行以下操作：

```
<select name="cc_type">
  <option <?php echo ($customer['cc_type']=='Visa')?'selected="selected"':''; ?>>Visa</option>
  <option <?php echo ($customer['cc_type']=='Mastercard')?'selected="selected"':''; ?>>Mastercard</option>
  <option <?php echo ($customer['cc_type']=='American Express')?'selected="selected"':''; ?>>American Express</option>
  <option <?php echo ($customer['cc_type']=='Discover')?'selected="selected"':''; ?>>Discover</option>
</select> 
```

希望能帮助到你 ：）

# c# - how to make a second level include of objects

> ID：12732083
> 
> 赞同：1
> 
> 时间：2012-10-04T16:55:45.430
> 
> 标签：c#, linq, entity-framework, windows-runtime

I have structure like this

```
class Lesson {
    List<Sign> signs { get; set; }
}

class Sign {
    List<Media> media { get; set;}
}

class Media {

} 
```

Now I'm using this LINQ to get all lessons

```
var items = (from lesson in this.db.Lesson.Include("Sign")
                     where lesson.module_id == param
                     select lesson); 
```

It works fine but signs list has ampty media list. I mean that attribute `media` in each object `Sign` equals null. What do I need to do to include media objects for each Sign ? Whole data is kept in database

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T16:59:53.330

你会用`db.Lesson.Include("signs.media")`.

to 的参数[`ObjectQuery<T>.Include`](http://msdn.microsoft.com/en-us/library/bb738708.aspx)是一个属性*路径*，而不仅仅是一个根属性。请注意，使用“signs.media”，您不需要单独包含“signs”：

> 路径是包罗万象的。例如，如果 include 调用指示 Include("Orders.OrderLines")，则不仅会包括 OrderLines，还会包括 Orders。

（顺便说一下，您应该调整您的属性名称以符合 .NET 框架约定，因此您最终会得到“Signs.Media”。）

# regex - 正则表达式使用 Notepad++ 识别不包含引号字符出现次数的行

> ID：12732088
> 
> 赞同：3
> 
> 时间：2012-10-04T16:55:59.940
> 
> 标签：regex, notepad++

我希望能够跳转到带引号的 CSV 文件中不包含 6 个引号的行，因为这感觉是识别损坏行的好方法。

我认为使用带有 Notepad++ 查找功能的正则表达式将是一种明智的方法，但我不确定如何选择行。

6 个引号 (") 会建议一个完整的行，所以我想跳到任何不包含 6 的行。

这是一些可以使用的示例数据，在此示例中，它是我想跳转到的第 4 行

```
"sam","mark","dave"
"sam","mark","dave"
"sam","mark","dave"
"sam","mark","
dave"
"sam","mark","dave"
"sam","mark","dave" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:06:15.857

这可以帮助您找到正确的行

```
^(.*?"){6}[^"]$ 
```

然后，您可以使用`search->bookmarks->inverse bookmarks`

**编辑**：

相反，此模式将仅匹配您想要的行

```
(?!("[^"\r\n]*){6})^.+?$ 
```

它使用负前瞻来告诉搜索引擎避免使用正好 6`"`的行并保留其他行。

如果可能有超过 6 个引号（这也是一个问题），请改用以下内容

```
(?!^("[^"\r\n]*){6}$)^.+?$ 
```

**编辑**：

*   `(?!`这是一个否定的前瞻，它告诉“匹配不包含以下文本的字符串（或行）”
*   `(^"`: 不应匹配的文本在行首以 a`"` *开头*( `^`)

*   `[^"\r\n]*`: 之后包含 0 个或多个 ( `*`) 不是双引号或换行符的元素（如果`^`是方括号内的第一个字符，则含义是“不要'在括号中找到字符”）

*   `){6}`: 重复 6 次

*   `$)`：在行尾结束（和负前瞻结束）

*   `^.+?$`: AND，如果条件没问题，匹配整行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:16:49.993

要查找引号出现在 0 到 5 次之间的行，请使用此正则表达式。

```
^([^"\n]*"){0,5}$ 
```

解释：

*   `^`- 从一行的开头
*   `([^\n"]*")`- 查找包含除双引号或换行符 ( `[^"\n]`) 之外的任何字符的组，直到双引号 ( `*"`)。
*   `{0,5}`- 查找包含 0 到 5 次出现的组的行
*   `$`- 直到行尾

要匹配超过 6 个的行，`"`您可以使用此

```
^(([^"\n]*"){0,5}|([^"\n]*"){7,})$ 
```

*   `|`它放入 OR 两个正则表达式（5 个或更少或 7 个或更多）
*   `{7,}`- 查找包含 7 次或更多次出现的组的行

# xml - 谷歌搜索结果页面中的搜索输入

> ID：12732097
> 
> 赞同：5
> 
> 时间：2012-10-04T16:56:52.920
> 
> 标签：xml, html, seo, google-search

如果你用谷歌搜索 IMDB，你会注意到在附加链接（页面标题下的列表）之后，你会看到一个搜索框。如果您在此处输入表单内容，则会将表单内容提交给 imdb 的搜索，而 imdb 又会在 imdb 站点中返回结果（参见屏幕截图）。 [谷歌搜索页面上的站点搜索输入 http://imageshack.us/a/img593/3320/googlesearchwidget.png](http://imageshack.us/a/img593/3320/googlesearchwidget.png)

问题是，如何添加此功能？

此外，当您键入域并点击选项卡时，某些浏览器（即 chrome）上的某些站点会得到一个不错的 Search domain.tld: 并且您在此之后键入的任何内容都会发送到网站的搜索页面（再次参见第二个屏幕截图）

[浏览器站点搜索技巧 http://imageshack.us/a/img203/1696/chromesitesearch.png](http://imageshack.us/a/img203/1696/chromesitesearch.png)

第二个问题（不知何故，我觉得这两者相关）我如何在我的网站上做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-12T03:57:39.907

这是[google 官方教程](http://googlewebmastercentral.blogspot.com/2014/09/improved-sitelinks-search-box.html)，介绍如何改进搜索结果中的搜索框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T08:45:59.820

**对于你的第一个问题...**

**这是 Google 的 50% 和我们（SEO）的 50% 的工作**。在 Google serps 中显示搜索框由 Google 掌握。谷歌通过分析哪些是您的网站/页面最重要的资产（或功能）来做到这一点。他们在搜索引擎排名方面有多么强大。例如

维基百科最重要的资产和功能之一是搜索功能。访问该站点的人很可能会使用搜索框来搜索某些信息。所以谷歌可以在 serps 中显示一个搜索框。

那是谷歌现在为我们的 50% 如果你想为你自己的网站实现这一点，那么它在 SEO 方面的工作量很大。开始为搜索引擎优化您的网站，如果您遇到任何问题，请在 SO 上提问。

**现在回答你的第二个问题...**

当今的浏览器（如 Chrome 等）将其搜索功能直接嵌入地址栏中。Chrome 将 google 搜索嵌入到它的地址栏中（因为它是 google 自己的浏览器），因此当您开始输入内容时，您会立即开始获得建议，并在按下选项卡时将您的搜索重定向到该特定域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-09T15:34:17.067

**对于你的第二个问题：**

您可以使用 OpenSearch 技术。您应该创建一个 XML 文件。

1.  XML 文件应如下所示：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <OpenSearchDescription xmlns="http://a9.com/-/spec/opensearch/1.1/" xmlns:moz="http://www.mozilla.org/2006/browser/search/">
    <ShortName>TITLE OF YOUR SITE</ShortName>
    <Description>DESCRIPTION</Description>
    <InputEncoding>UTF-8</InputEncoding>
    <Url type="text/html" method="get" template="http://www.YOURSITE.com/?SEARCH_QUERY={searchTerms}"/>
    </OpenSearchDescription> 
    ```

2.  在 html 代码中引用 XML 文件：

    ```
    <link href="/opensearch.xml" rel="search" type="application/opensearchdescription+xml"> 
    ```

欲了解[更多信息](http://www.opensearch.org/)

我希望谷歌为您的网站添加搜索框。

# android - Android 应用可在模拟器上运行，但不能在手机上运行

> ID：12732098
> 
> 赞同：0
> 
> 时间：2012-10-04T16:56:53.450
> 
> 标签：android, android-emulator

所以我为安卓手机制作了这个游戏，在我的模拟器上运行得非常好。问题是当我尝试在我的手机上运行它时，当我尝试启动游戏时它只是返回到应用程序内菜单 - 我没有收到任何错误消息。关于为什么会发生这种情况以及如何解决它的任何提示。

顺便提一句。我使用的手机是 HTC Desire

更新：我尝试在 SIII 上对其进行测试。在这里，我收到了一条崩溃消息。android 模拟器，HTC Desire 运行 Android 2.2，而 SIII 运行 Android 4.0

# entity-framework - ObjectContext 实例已被释放，不能再用于需要连接的操作

> ID：12732102
> 
> 赞同：6
> 
> 时间：2012-10-04T16:57:03.920
> 
> 标签：entity-framework, lazy-loading, entity-framework-5, objectcontext, change-tracking

由于 EF 的更改跟踪和延迟加载功能，我的一个查询遇到了问题。问题是，在获得查询结果后，我使用 AutoMapper 将域对象映射到我的业务模型中，但由于上下文已被处理，它不断抛出异常。

> ObjectContext 实例已被释放，不能再用于需要连接的操作。

当我在调试器中查看生成的集合时，我发现它是一个列表，`DynamicProxy`而不是实际实体。我试图停止更改跟踪，但这没有帮助。这是我的代码：

```
 public List<ContentTypeColumn> GetContentTypeColumns(Int64 contentTypeId)
    {
        List<ContentTypeColumn> result = new List<ContentTypeColumn>();
        using (SCGREDbContext context = new SCGREDbContext())
        {                
            ContentType contentType = context.ContentTypes.Include("Parent").AsNoTracking().FirstOrDefault(x => x.Id.Equals(contentTypeId));

            result.AddRange(contentType.ContentTypeColumns.ToList());
            while (contentType.Parent != null)
            {
                result.AddRange(contentType.Parent.ContentTypeColumns.ToList());
                contentType = contentType.Parent;
            }    
        }
        return result.ToList();
    } 
```

注意：如果您需要查看我在此操作中涉及的域模型，您可以参考[这个问题。](https://stackoverflow.com/questions/12730218/mapping-many-to-many-relationship-with-defined-middle-entity-in-entity-framework/12731877#12731877)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-04T17:50:26.907

如果您需要停止延迟加载和动态更改跟踪，您只需将其关闭即可：

```
using (SCGREDbContext context = new SCGREDbContext())
{   
    context.Configuration.ProxyCreationEnabled = false;
    ...
} 
```

# html - HTML：表中的 DIV

> ID：12732104
> 
> 赞同：-1
> 
> 时间：2012-10-04T16:57:11.080
> 
> 标签：html, css, html-table

我可以将`height`a `div`inside a设置`table`为`100%`吗？做不到这一点，我可以用 a`span`代替吗？

我已经看到[了这个](https://stackoverflow.com/a/4967633/563247)答案，但它没有提到任何关于`100%`.

![在此处输入图像描述](../Images/64ddc56cd4afd3fb6bd9685666ab660b.png)

[我需要使用 div，因为它们可以加载动态内容]

**编辑**

在下图中，您会看到 display 是`table-cell`，我已将其设置为`block`并且`inline-block`结果相同

![在此处输入图像描述](../Images/758b1f0c12b1f41194b2f49aaccd2b92.png) ![在此处输入图像描述](../Images/dbe0752e05d6769978d6cc1c15a8c737.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:03:20.307

像[这样？](http://jsfiddle.net/QBaQN/)如果您在高度之前取消注释 // ，它会填充它在里面的 td ，这就是您要问的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T17:04:06.903

是的，只要元素是块或内联块，如您发布的答案中所述，您就可以。div 默认是块级的，spans 是内联的，所以需要 css display:inline-block 或 display:block。

# pdf - 文件托管以跟踪 PDF 的总下载量

> ID：12732105
> 
> 赞同：1
> 
> 时间：2012-10-04T16:57:15.183
> 
> 标签：pdf, file-sharing

我正在寻找一种网络服务，它允许我上传 PDF 并且可以跟踪它的下载次数，**无论来源如何**。我知道我的网站上有 Google Analytics 事件跟踪，但这里的问题是我需要提供许多合作伙伴网站的文件路径，并且希望有一个集中的地方来查看所有合作伙伴的总下载量。按来源对下载量进行细分会很棒，但不是必需的。我不能依赖从所有合作伙伴那里获得数字，因为有些甚至可能根本没有设置 GA。

这样的事情存在吗？免费很好，但如有必要愿意支付帐户费用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T17:11:17.477

最终使用 bit.ly 来缩短我服务器上托管的 PDF 的路径。将缩短的网址提供给合作伙伴。Bit.ly 提供了良好的点击统计数据，只需在缩短的 url 末尾添加一个“+”，这样我们就可以看到结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T18:14:56.600

你试过 Ge.tt 吗？我相信它会显示您的文件已被下载的次数。

# entity-framework - 如何阻止 EDMX 生成器更改列名

> ID：12732114
> 
> 赞同：0
> 
> 时间：2012-10-04T16:57:39.203
> 
> 标签：entity-framework, dbcontext

如果表的列名与表名相同，则 EDMX 生成器会在列名后加上“1”。例如：在下面的示例中将 Test 更改为 Test1。

SQL Server 表定义：

CREATE TABLE [dbo].[Test]( [Test] nchar NOT NULL, [ColumnsTwo] nchar NULL,

创建的 EF 模型：

```
 <EntitySetMapping Name="Test">
        <EntityTypeMapping TypeName="AdventureWorksModel.Test">
          <MappingFragment StoreEntitySet="Test">
            <ScalarProperty Name="ColumnsTwo" ColumnName="ColumnsTwo" />
            <ScalarProperty Name="Test1" ColumnName="Test" />
          </MappingFragment>
        </EntityTypeMapping>
      </EntitySetMapping>
    </EntityContainerMapping> 
```

这会导致 SqlQueries 抛出错误“数据读取器与指定的‘AdventureWorksModel.Test’不兼容。类型的成员‘Test1’在数据读取器中没有同名的对应列。”

为什么 DbContext 生成器会修改列名？ObjectContext 生成器不理会它们。

我们如何解决这个问题？我们无法控制数据库模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:57:30.757

我们无法改变这种行为。EDMX 生成器更改列名，因为 C# 编译器不允许您拥有具有相同名称成员的类。见[MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/61f03e28-7663-4f5a-b661-0af1bc793591)

# c# - C# - 字典 > 排序抛出 System.ArgumentException

> ID：12732120
> 
> 赞同：1
> 
> 时间：2012-10-04T16:58:06.137
> 
> 标签：c#, sorting, dictionary, icomparable, argumentexception

我有一个未排序的`Dictionary<int, Dictionary<int, string>>`，当试图对其值的键进行排序时，它的抛出`System.ArgumentException: At least one object must implement IComparable.`如下是函数，

```
private static Dictionary<int, Dictionary<int, string>> SortDictionary(Dictionary<int, Dictionary<int, string>> unSortedDict)
{
      var sortedDict = (unSortedDict.OrderBy(entry => entry.Value.Keys)).ToDictionary(pair => pair.Key, pair => pair.Value);

      return sortedDict;
} 
```

我附上了下面的数据屏幕截图，您可以在其中看到未排序的键，这样您就知道我想要实现的目标，我做错了什么，我需要您的指导，谢谢

![在此处输入图像描述](../Images/a3913bb83d747ecce7acf9af33132f4f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T17:01:37.960

根据设计，字典本质上是未排序的。如果您对字典值进行排序，然后将其转换回字典，您将再次得到一个未排序的集合。

话虽这么说，发生错误是因为您尝试`OrderBy`使用 a调用[`KeyCollection`](http://msdn.microsoft.com/en-us/library/3fcwy8h6.aspx)，它不是可排序的类型。

您可能需要考虑其他一些集合，例如[`SortedDictionary<T,U>`](http://msdn.microsoft.com/en-us/library/f7fta44c.aspx). 然而，这将需要编写一个自定义比较器来维护排序。

# android - 如何使用来自 IP android 摄像头的 matlab 录制音频

> ID：12732122
> 
> 赞同：1
> 
> 时间：2012-10-04T16:58:05.620
> 
> 标签：android, matlab, url, save, audio-streaming

我正在尝试使用 IP 网络摄像头和 Matlab 将音频和图像从 android 摄像头保存到本地网络中的计算机。

android 应用程序允许我使用特色 URL 地址访问不同的资源：

*   直播视频：192.168.0.105:8080/videofeed
*   wav 格式的实时流式传输音频：格式 192.168.0.105:8080/audio.wav
*   拍一张相框：192.168.0.105:8080/shot.jpg

我已成功使用此功能将图像保存到 matlab（它还实时将图像显示为视频）：

```
function save_screen
url = 'http://192.168.0.105:8080/shot.jpg';
ss  = imread(url);
FileNum = 1;
fh = image(ss);
while(1)
    pause(1)
    ss  = imread(url);
    set(fh,'CData',ss);
    drawnow;
    fname = ['Image' num2str(FileNum) '.jpg'];
    imwrite(ss, fname, 'JPG');
    disp(['image saved ' fname]);
    FileNum = FileNum + 1;
end 
```

现在，与图像一样，我正在尝试以 30 秒的顺序从 URL 流中保存音频，例如 audio1、audio2 等；为了在matlab中进一步分析。我试过这个没有成功：

```
url = 'http://192.168.0.105:8080/audio.wav';
ss  = wavread(url);
FileNum2 = 1;
fh = wavread(ss);
while(1)
    pause(1)
    ss  = wavread(url);     
    wavwrite(ss,fname);
    disp(['Sacuvava se audio ' fname]);
    FileNum2 = FileNum2 + 1;
end 
```

总而言之，主要问题是从 URL 中保存 30 秒的音频序列。任何帮助高度赞赏

# c# - 用户通过对话框选择的多个文件名的缩短

> ID：12732133
> 
> 赞同：0
> 
> 时间：2012-10-04T16:59:08.073
> 
> 标签：c#, dialog

用户通过对话框选择多个文件：

```
OpenFileDialog dialF = new OpenFileDialog();
DialogResult dialR = dialF.ShowDialog();  
filesRepNames = dialF.FileNames;  // save the name of files for later use 
```

并且这些文件存储在一个字符串数组中。名称（每个）是文件的完整地址。我只是想自己存储文件名，而不是每个文件的完整地址。有没有办法只存储文件名而不是全部信息。

示例）我不想要：

```
D:\margin\2012\Cam\bin\Debug\action.JPG 
```

我只想：

```
action.jpg 
```

请注意，这些是**多个文件**而不是一个，否则我可以使用属性“fileinfo”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T17:02:09.143

您可以将 LINQ 与[Path.GetFileName](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)方法一起使用：

```
 filesRepNames = dialF.FileNames.Select(p => Path.GetFileName(p))
                                .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T17:05:15.233

使用 Path 命名空间获取文件名：

```
 string sFileSpec = "E:\\Dev\\Test.Jpg";
    MessageBox.Show(System.IO.Path.GetFileName(sFileSpec)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T17:21:51.267

```
public string[] getFilenameFromPath(string[] filePath)
    {
        char[] splitChar = new Char[]{'\\','\\'};
        for (int i = 0; i < filePath.Length; i++)
        {
            filePath[i] = filePath[i].Split(splitChar, StringSplitOptions.RemoveEmptyEntries).Last();
        }
        return filePath;
    } 
```

# c++ - 用父级杀死 qprocess

> ID：12732134
> 
> 赞同：2
> 
> 时间：2012-10-04T16:59:13.957
> 
> 标签：c++, parent, kill, qprocess

这是执行命令并返回输出的代码。问题是，如果我终止了 testProcess，“ping”会继续进行。我也试过

```
QObject *parent;
parent=new QObject;
myprocess *p;
p=new myprocess(parent); 
```

对不起我的英语不好

测试进程.h：

```
class myprocess : public QProcess{
    Q_OBJECT
public:
    myprocess( QObject *parent = 0 );
protected slots:
void readyOut();
void readyErr();
}; 
```

testProcess.cpp 主要：

```
myprocess *p;
p=new myprocess;

QObject::connect(p,SIGNAL(readyReadStandardOutput()),p,SLOT(readyOut()));
QObject::connect(p,SIGNAL(readyReadStandardError()),p,SLOT(readyErr()));

p->start("ping -t www.google.com");

p->waitForFinished(60000);

delete p; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:59:09.633

如果您希望您的进程在应用程序关闭时关闭，那么您可以连接到核心应用程序`aboutToQuit()`信号。它看起来像这样

```
connect( QCoreApplication::instance(), SIGNAL(aboutToQuit()), p, SLOT(kill())); 
```

该过程中还有一个`terminate()`可以使用的插槽，但我认为`kill()`可能更适合您的情况。

# vb.net - 如何在 WPF 中对 DbContext SqlQuery() 结果进行数据绑定

> ID：12732138
> 
> 赞同：1
> 
> 时间：2012-10-04T16:59:20.810
> 
> 标签：vb.net, entity-framework, dbcontext

我正在尝试将带有动态 where 子句的查询返回的结果绑定到 WPF DataGrid。

使用 Database.SqlQuery 似乎没有 Load() 方法，也没有 Local() 来返回 ObservableCollection。因此，我正在使用 New ObservableCollection(Of Product)(q1)。这是推荐的用法，还是我错过了什么？

使用 DbSet.SqlQuery 我发现根本无法获取数据。这个应该怎么用？

```
Dim _dbc As New AdventureWorksEntities

''Using DbSet
'Dim q = _dbc.Product
'q.Load()
'Dim r = q.Local
'grd.ItemsSource = r

Const sql = "select * from production.product WHERE name LIKE 'fla%' and ProductNumber LIKE '%0'"
'Using Database.SqlQuery
Dim q1 = _dbc.Database.SqlQuery(Of Product)(sql)
Dim r1 = New ObservableCollection(Of Product)(q1)
grd.ItemsSource = r1

''Using DbSet.SqlQuery
'Dim q2 = _dbc.Product.SqlQuery(sql)
''Dim r2 = ???
''grd.ItemsSource = r2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:13:45.383

您应该能够通过执行以下操作来实现您正在寻找的东西。

```
' Load the products
_dbc.Products.SqlQuery(sql).ToList()

' Bind to all loaded products
grd.ItemsSource = _dbc.Products.Local 
```

另请注意， 的结果`Database.SqlQuery()`永远不会在上下文中跟踪，因此`DbSet.SqlQuery()`如果您想使用`DbSet.Local`.

有关`DbSet.Local`实际包含内容的更多信息，请参阅[其文档](http://msdn.microsoft.com/en-us/library/gg696248.aspx)。

# vb.net - 以编程方式发送 Outlook 任务更新

> ID：12732142
> 
> 赞同：0
> 
> 时间：2012-10-04T16:59:34.600
> 
> 标签：vb.net, outlook, outlook-addin

有谁知道如何以编程方式在 C# 或 VB 中发送 Outlook 任务更新？我似乎无法在网上找到任何关于此的信息。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:02:46.163

您可以使用[VSTO](http://en.wikipedia.org/wiki/Visual_Studio_Tools_for_Office)的 Outlook 互操作库与[任务项](http://msdn.microsoft.com/en-us/library/ff184608.aspx)进行交互。我已经使用这个库来处理 MailItems，并且知道可以与其他 Outlook 项目（如任务、日历项目和日记项目）进行交互。

# jira - 如何将国家选择字段添加到 Jira？

> ID：12732143
> 
> 赞同：0
> 
> 时间：2012-10-04T16:59:44.227
> 
> 标签：jira

如何向 Jira 添加国家/地区选择字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:59:44.227

我已经发布了答案，希望它可以帮助其他人，并听取您的想法。

添加一个测试字段并获取它的 ID，例如假设它是“customfield_11111”。然后添加以下描述：

```
<script src="https://jira.com/getCountrySelect.js">
</script> 
```

您可以在描述中编写代码目录，但我发现以这种方式备份和更新脚本更容易。然后，在您的 app-data 文件夹中创建文件`getCountrySelect.js`（`fieldID`用您提交的 id 替换）：

```
var fieldId = "customfield_11111";
AJS.$(document).ready(function() {
    var country = AJS.$("#" + fieldId).val();
    AJS.$("#" + fieldId).parent().append("<select class='select' id='" + fieldId + "' name='" + fieldId + "'></select>");
    var select = AJS.$("select#" + fieldId);
    select.append("<option>Afghanistan</option>");
    select.append("<option>Albania</option>");
    select.append("<option>Algeria</option>");
    select.append("<option>Andorra</option>");
    select.append("<option>Angola</option>");
    select.append("<option>Antigua & Deps</option>");
    select.append("<option>Argentina</option>");
    select.append("<option>Armenia</option>");
    select.append("<option>Australia</option>");
    select.append("<option>Austria</option>");
    select.append("<option>Azerbaijan</option>");
    select.append("<option>Bahamas</option>");
    select.append("<option>Bahrain</option>");
    select.append("<option>Bangladesh</option>");
    select.append("<option>Barbados</option>");
    select.append("<option>Belarus</option>");
    select.append("<option>Belgium</option>");
    select.append("<option>Belize</option>");
    select.append("<option>Benin</option>");
    select.append("<option>Bhutan</option>");
    select.append("<option>Bolivia</option>");
    select.append("<option>Bosnia Herzegovina</option>");
    select.append("<option>Botswana</option>");
    select.append("<option>Brazil</option>");
    select.append("<option>Brunei</option>");
    select.append("<option>Bulgaria</option>");
    select.append("<option>Burkina</option>");
    select.append("<option>Burundi</option>");
    select.append("<option>Cambodia</option>");
    select.append("<option>Cameroon</option>");
    select.append("<option>Canada</option>");
    select.append("<option>Cape Verde</option>");
    select.append("<option>Central African Rep</option>");
    select.append("<option>Chad</option>");
    select.append("<option>Chile</option>");
    select.append("<option>China</option>");
    select.append("<option>Colombia</option>");
    select.append("<option>Comoros</option>");
    select.append("<option>Congo</option>");
    select.append("<option>Congo {Democratic Rep}</option>");
    select.append("<option>Costa Rica</option>");
    select.append("<option>Croatia</option>");
    select.append("<option>Cuba</option>");
    select.append("<option>Cyprus</option>");
    select.append("<option>Czech Republic</option>");
    select.append("<option>Denmark</option>");
    select.append("<option>Djibouti</option>");
    select.append("<option>Dominica</option>");
    select.append("<option>Dominican Republic</option>");
    select.append("<option>East Timor</option>");
    select.append("<option>Ecuador</option>");
    select.append("<option>Egypt</option>");
    select.append("<option>El Salvador</option>");
    select.append("<option>Equatorial Guinea</option>");
    select.append("<option>Eritrea</option>");
    select.append("<option>Estonia</option>");
    select.append("<option>Ethiopia</option>");
    select.append("<option>Fiji</option>");
    select.append("<option>Finland</option>");
    select.append("<option>France</option>");
    select.append("<option>Gabon</option>");
    select.append("<option>Gambia</option>");
    select.append("<option>Georgia</option>");
    select.append("<option>Germany</option>");
    select.append("<option>Ghana</option>");
    select.append("<option>Greece</option>");
    select.append("<option>Grenada</option>");
    select.append("<option>Guatemala</option>");
    select.append("<option>Guinea</option>");
    select.append("<option>Guinea-Bissau</option>");
    select.append("<option>Guyana</option>");
    select.append("<option>Haiti</option>");
    select.append("<option>Honduras</option>");
    select.append("<option>Hungary</option>");
    select.append("<option>Iceland</option>");
    select.append("<option>India</option>");
    select.append("<option>Indonesia</option>");
    select.append("<option>Iran</option>");
    select.append("<option>Iraq</option>");
    select.append("<option>Ireland {Republic}</option>");
    select.append("<option>Israel</option>");
    select.append("<option>Italy</option>");
    select.append("<option>Ivory Coast</option>");
    select.append("<option>Jamaica</option>");
    select.append("<option>Japan</option>");
    select.append("<option>Jordan</option>");
    select.append("<option>Kazakhstan</option>");
    select.append("<option>Kenya</option>");
    select.append("<option>Kiribati</option>");
    select.append("<option>Korea North</option>");
    select.append("<option>Korea South</option>");
    select.append("<option>Kosovo</option>");
    select.append("<option>Kuwait</option>");
    select.append("<option>Kyrgyzstan</option>");
    select.append("<option>Laos</option>");
    select.append("<option>Latvia</option>");
    select.append("<option>Lebanon</option>");
    select.append("<option>Lesotho</option>");
    select.append("<option>Liberia</option>");
    select.append("<option>Libya</option>");
    select.append("<option>Liechtenstein</option>");
    select.append("<option>Lithuania</option>");
    select.append("<option>Luxembourg</option>");
    select.append("<option>Macedonia</option>");
    select.append("<option>Madagascar</option>");
    select.append("<option>Malawi</option>");
    select.append("<option>Malaysia</option>");
    select.append("<option>Maldives</option>");
    select.append("<option>Mali</option>");
    select.append("<option>Malta</option>");
    select.append("<option>Marshall Islands</option>");
    select.append("<option>Mauritania</option>");
    select.append("<option>Mauritius</option>");
    select.append("<option>Mexico</option>");
    select.append("<option>Micronesia</option>");
    select.append("<option>Moldova</option>");
    select.append("<option>Monaco</option>");
    select.append("<option>Mongolia</option>");
    select.append("<option>Montenegro</option>");
    select.append("<option>Morocco</option>");
    select.append("<option>Mozambique</option>");
    select.append("<option>Myanmar, {Burma}</option>");
    select.append("<option>Namibia</option>");
    select.append("<option>Nauru</option>");
    select.append("<option>Nepal</option>");
    select.append("<option>Netherlands</option>");
    select.append("<option>New Zealand</option>");
    select.append("<option>Nicaragua</option>");
    select.append("<option>Niger</option>");
    select.append("<option>Nigeria</option>");
    select.append("<option>Norway</option>");
    select.append("<option>Oman</option>");
    select.append("<option>Pakistan</option>");
    select.append("<option>Palau</option>");
    select.append("<option>Panama</option>");
    select.append("<option>Papua New Guinea</option>");
    select.append("<option>Paraguay</option>");
    select.append("<option>Peru</option>");
    select.append("<option>Philippines</option>");
    select.append("<option>Poland</option>");
    select.append("<option>Portugal</option>");
    select.append("<option>Qatar</option>");
    select.append("<option>Romania</option>");
    select.append("<option>Russian Federation</option>");
    select.append("<option>Rwanda</option>");
    select.append("<option>St Kitts & Nevis</option>");
    select.append("<option>St Lucia</option>");
    select.append("<option>Saint Vincent & the Grenadines</option>");
    select.append("<option>Samoa</option>");
    select.append("<option>San Marino</option>");
    select.append("<option>Sao Tome & Principe</option>");
    select.append("<option>Saudi Arabia</option>");
    select.append("<option>Senegal</option>");
    select.append("<option>Serbia</option>");
    select.append("<option>Seychelles</option>");
    select.append("<option>Sierra Leone</option>");
    select.append("<option>Singapore</option>");
    select.append("<option>Slovakia</option>");
    select.append("<option>Slovenia</option>");
    select.append("<option>Solomon Islands</option>");
    select.append("<option>Somalia</option>");
    select.append("<option>South Africa</option>");
    select.append("<option>Spain</option>");
    select.append("<option>Sri Lanka</option>");
    select.append("<option>Sudan</option>");
    select.append("<option>Suriname</option>");
    select.append("<option>Swaziland</option>");
    select.append("<option>Sweden</option>");
    select.append("<option>Switzerland</option>");
    select.append("<option>Syria</option>");
    select.append("<option>Taiwan</option>");
    select.append("<option>Tajikistan</option>");
    select.append("<option>Tanzania</option>");
    select.append("<option>Thailand</option>");
    select.append("<option>Togo</option>");
    select.append("<option>Tonga</option>");
    select.append("<option>Trinidad & Tobago</option>");
    select.append("<option>Tunisia</option>");
    select.append("<option>Turkey</option>");
    select.append("<option>Turkmenistan</option>");
    select.append("<option>Tuvalu</option>");
    select.append("<option>Uganda</option>");
    select.append("<option>Ukraine</option>");
    select.append("<option>United Arab Emirates</option>");
    select.append("<option>United Kingdom</option>");
    select.append("<option>United States</option>");
    select.append("<option>Uruguay</option>");
    select.append("<option>Uzbekistan</option>");
    select.append("<option>Vanuatu</option>");
    select.append("<option>Vatican City</option>");
    select.append("<option>Venezuela</option>");
    select.append("<option>Vietnam</option>");
    select.append("<option>Yemen</option>");
    select.append("<option>Zambia</option>");
    select.append("<option>Zimbabwe</option>");
    AJS.$("input#" + fieldId).remove();
    AJS.$('#' + fieldId + ' option:contains('+country+')').attr('selected', 'selected');
}); 
```

希望它也能帮助你:)

# xmlhttprequest - 用于 XmlHttpRequest 的带有 WebAPI 的 CORS

> ID：12732147
> 
> 赞同：6
> 
> 时间：2012-10-04T17:00:06.417
> 
> 标签：xmlhttprequest, asp.net-web-api, cors

只是想知道在 ASP.NET WebAPI 中处理 CORS（跨源资源共享）的**最佳优雅方式（当前可用）是什么，以便我可以在多个域上使用 XmlHttpRequest？**我如何将其与 OPTIONS 集成到每种类型的请求（GET、POST 等）的标头中？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T13:08:24.437

Tpeczek 有一个很好的发现，但是在进行我自己的研究时，我发现了一些类似且非常优雅的处理 CORS 的方法，使您能够在 App_Start 文件夹中的配置文件中配置 CORS。它全部使用一个名为 Thinkecture 的开源库处理。在此处查看详细信息：

[http://brockallen.com/2012/06/28/cors-support-in-webapi-mvc-and-iis-with-thinktecture-identitymodel/](http://brockallen.com/2012/06/28/cors-support-in-webapi-mvc-and-iis-with-thinktecture-identitymodel/)

它有很多优点。您可以配置来源、方法（GET、POST 等）、访问特定控制器和操作，它还可以使您的控制器免受任何属性的影响。

支持 WebAPI、IIS 和 ASP.NET MVC！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T08:07:24.003

Carlos Figueira 有一系列关于 CORS 和 ASP.NET Web API 的精彩文章：

*   [在 ASP.NET Web API 中实现 CORS 支持](http://blogs.msdn.com/b/carlosfigueira/archive/2012/02/20/implementing-cors-support-in-asp-net-web-apis.aspx)
*   [在 ASP.NET Web API 中实现 CORS 支持 - Take 2](http://blogs.msdn.com/b/carlosfigueira/archive/2012/02/21/implementing-cors-support-in-asp-net-web-apis-take-2.aspx)
*   [ASP.NET Web API 中的 CORS 支持 - RC 版本](http://blogs.msdn.com/b/carlosfigueira/archive/2012/07/02/cors-support-in-asp-net-web-api-rc-version.aspx)

就我个人而言，我是*Take 2*方法的忠实拥护者，因为`EnableCors`可以轻松扩展属性以使您能够控制允许的来源。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-09T11:15:36.760

在 web.cofig 文件中添加以下内容（在 system.webserver 元素内）。

```
<httpProtocol>
      <customHeaders>
        <add name="Access-Control-Allow-Headers" value="accept, maxdataserviceversion, origin, x-requested-with, dataserviceversion" />
        <add name="Access-Control-Allow-Origin" value="*" />
        <add name="Access-Control-Max-Age" value="1728000" />
      </customHeaders>
    </httpProtocol> 
```

并在 global.aspx.cs 文件中添加以下代码

```
 protected void Application_BeginRequest(object sender, EventArgs e)
    {
        if (Request.Headers.AllKeys.Contains("Origin") && Request.HttpMethod == "OPTIONS")
        {
            Response.StatusCode = 200;
            Response.End();
        }
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-09T07:08:19.630

现在在 web api 的 nightly 中有 CORS 支持

[http://blogs.msdn.com/b/yaohuang1/archive/2013/04/05/try-out-asp.net-web-api-cors-support-using-the-nightly-builds.aspx](http://blogs.msdn.com/b/yaohuang1/archive/2013/04/05/try-out-asp.net-web-api-cors-support-using-the-nightly-builds.aspx)

使用[nuget](http://docs.nuget.org/docs/start-here/installing-nuget)来：

*   卸载 Microsoft.AspNet.Mvc.FixedDisplayModes 包。
*   从每晚构建中安装 Microsoft.AspNet.WebApi.Cors 包

然后修复web.config中的绑定然后启用CORS

```
config.EnableCors(new EnableCorsAttribute()) 
```

在此 wiki 上阅读有关它的更多信息[https://aspnetwebstack.codeplex.com/wikipage?title=CORS%20support%20for%20ASP.NET%20Web%20API&referringTitle=Specs](https://aspnetwebstack.codeplex.com/wikipage?title=CORS%20support%20for%20ASP.NET%20Web%20API&referringTitle=Specs)

**编辑 2013**年 4 月 19 日Scott Guthrie 写了一篇关于它的博客：[http ://weblogs.asp.net/scottgu/archive/2013/04/19/asp-net-web-api-cors-support-and-attribute-based -路由改进.aspx](http://weblogs.asp.net/scottgu/archive/2013/04/19/asp-net-web-api-cors-support-and-attribute-based-routing-improvements.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T17:06:15.417

这取决于您想要控制 CORS 的细粒度。例如，如果您想允许任何域，您可以通过在 IIS 中配置它们来将静态 CORS 标头添加到所有响应中。我选择了这种方法并[在这里写了](http://www-jo.se/f.pfleger/cors-and-iis)。

# android - 如何为三星平板电脑创建迷你应用程序？

> ID：12732154
> 
> 赞同：0
> 
> 时间：2012-10-04T17:00:43.760
> 
> 标签：android, galaxy, samsung-mobile

我注意到三星平板电脑在系统栏中央有一个按钮，可以打开“迷你应用”列表（世界时钟、计算器、音乐播放器等）。（我使用的是三星 Galaxy Tab 10.1）

任何人都知道如何创建可以出现在该列表中的应用程序？一些标识`AndroidManifest.xml`？或者，如果无法将非内置应用程序放在此小应用程序列表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:09:55.230

这是不可能的。这些应用程序是三星特定的。

# mod-rewrite - 从 URL 中删除编码的问号

> ID：12732155
> 
> 赞同：3
> 
> 时间：2012-10-04T17:00:46.100
> 
> 标签：mod-rewrite, url-rewriting, mediawiki, wiki, url-encoding

嗨，我创建了一个事实检查 wiki，其中每个事实检查页面都以问号结尾，例如：

[http://wecheck.org/wiki/Did_Mitt_Romney_ever_work_as_a_garbage_collector%3F](http://wecheck.org/wiki/Did_Mitt_Romney_ever_work_as_a_garbage_collector%3F)

但是，当我通过将其粘贴到评论框中来在包括 Facebook 在内的许多网站上共享此链接时，它会剥离 %3f （我猜认为它是查询字符串的开头），从而使链接无法访问。我必须使用 bit.ly 连接到不方便的链接，这对新手用户来说是个问题。

我想我可以使用 mod-rewrite 来关闭 %3F 。我目前的重写规则是：

```
RewriteEngine On
RewriteRule ^/?wiki(/.*)?$ %{DOCUMENT_ROOT}/w/index.php [L]
RewriteRule ^/?$ %{DOCUMENT_ROOT}/w/index.php [L] 
```

我将如何修改它们以去除 %3F ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:43:14.867

看起来你不想去掉`%3F`. Mediawiki 有自己的路由，所以如果你弄乱了标题名称，你更有可能破坏一些东西而不是修复任何东西。您需要修改您的 media-wiki 以禁止以 a`?`结尾的页面，或者添加一个模块或 wiki 机器人来浏览所有页面，如果有一个以 结尾的页面`?`，则创建一个`#REDIRECT [[]]`没有的页面`?`并将其指向带有`?`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T04:25:40.837

答案是创建最后没有问号的页面，然后设置

```
$wgRestrictDisplayTitle = false; in LocalSettings.php 
```

并在页面标记中使用以下魔法词：

```
{{DISPLAYTITLE:{{PAGENAME}}?}} 
```

你可以在这里看到一个例子：[http ://wecheck.org/wiki/Question_Mark_Problem](http://wecheck.org/wiki/Question_Mark_Problem)

# asp.net-mvc - MVC4 Action 方法 AutoMap actionfilter 无法将视图模型转换为域模型

> ID：12732157
> 
> 赞同：1
> 
> 时间：2012-10-04T17:00:56.247
> 
> 标签：asp.net-mvc, automapper

所以，我在 MVC3 中的一个以前的项目中看到了这个工作，所以想知道是否 a）我把它搞砸了，或者 b）MVC4 正在做一些不同的事情（看不到它会是）。

我有一个模型绑定 Razor 视图，它提交给控制器操作方法（与 MVC 一样）

后期操作方法：

```
[HttpPost]
[AutoMap(typeof(MyViewModel), typeof(MyDomainObj))]
public void PostAction(MyDomainObj obj)
{... etc.. etc.. 
```

动作过滤器最终会做这样的事情：

```
public override void OnActionExecuting(ActionExecutingContext filterContext)
{
    var model = filterContext.Controller.ViewData.Model; 
```

注意：在 Jimmy Bogard 的示例中，他使用了我也尝试过的 OnActionExecuted。

我遇到的关键问题是，在我们从上下文中获取“模型”变量的地方，它是空的。如果我在调试时查看 filterContext.ActionParameters 我可以看到一个 MyDomainObj 实例！这似乎（因为它恰好有一个与 MyViewModel 类型相同的道具名称）已从我的表单数据映射！

所以.. 是的，如果我将 MyViewModel 类型作为此方法的参数，那么参数将从提交的表单中正确填充。但。我不想那样做，我想（并且之前根据 JB 的简洁操作方法做过）将视图模型转换为域模型作为执行/执行操作的一部分，然后能够在我的域模型。

摘要 - 为什么我的 ViewData.Model 在后操作过滤器上为空？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T01:07:22.657

Jimmmy 也有/有一些关于如何实施帖子操作的想法，还有另一个人 Matt Honeycutt，他分享了他对如何发布帖子的看法。我也相信 Jimmy 已经朝着在他的 get 请求中使用显式映射而不是属性的方向发展，因为在映射之后很难注入任何你需要的额外代码。

[http://lostechies.com/jimmybogard/2011/06/22/cleaning-up-posts-in-asp-net-mvc/](http://lostechies.com/jimmybogard/2011/06/22/cleaning-up-posts-in-asp-net-mvc/)

[http://trycatchfail.com/blog/post/Cleaning-up-POSTs-in-ASPNET-MVC-the-Fail-Tracker-Way.aspx](http://trycatchfail.com/blog/post/Cleaning-up-POSTs-in-ASPNET-MVC-the-Fail-Tracker-Way.aspx)

对于一个帖子，你真的想要一些东西，原始实体和表单数据。您可以像对 GET 请求一样加载实体，并执行普通模型绑定以获取表单数据（请记住，您可以接受与在视图中吐出不同的回发模型），然后在操作中进行更改。

当然，这需要在您的操作中使用 AutoMapper，您似乎试图避免这种情况。但是除非您编写自定义模型绑定器，否则您不会神奇地在模型中获取表单数据，因为内置模型会查看操作参数以找出要绑定的内容。出于这个原因，我建议不要将域模型用作操作的参数，因为它可能会填写您不希望填写的字段。

我还看到 Jimmy 使用 ModelBinder 执行类似于您的 AutoMapGet 的操作，这可能是另一种替代方法，但我猜您已经看过那篇文章。

我的标准帖子采用了马特的方法，将验证移到全局属性中，这样就不会被遗忘（这有一些缺点），然后显式接受表单数据的新视图模型，然后显式加载实体，使用automapper 更新它并调用保存。大多数动作最终只有大约 5 行长。

我确实避免在 AutoMapper 上使用静态方法，并通过构造函数注入传入 IMapper。如果我真的需要，这让我可以让它更容易测试，但是方法通常很简单，测试不会增加那么多价值。

# entity-framework - 如何在所有 RowVersion 列上自动设置 ConcurrencyMode=Fixed？

> ID：12732161
> 
> 赞同：11
> 
> 时间：2012-10-04T17:01:26.693
> 
> 标签：entity-framework

EF 默认为无并发控制（最后写入获胜），这允许丢失更新。可以通过在 RowVersion 列上设置 ConcurrencyMode=Fixed 来显式配置强制执行乐观并发检查。

我们如何在所有表的 RowVersion 列上自动设置 ConcurrencyMode=Fixed？从数据库重新创建 EF 模型时必须手动执行此操作，我们可能会忘记它在没有并发控制的情况下运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-18T19:45:32.760

这类似于 Mohamed Cassim 的答案，但我更新了代码以使用 XML 属性搜索和替换，而不是字符串替换，因为设计者可以更改属性的顺序，或者其他属性可以具有不同的值。

将其另存为`FixVersionColumnConcurrencyMode.cs`、运行`csc FixVersionColumnConcurrencyMode.cs`，然后在与 .edmx 文件相同的文件夹中运行生成的 FixVersionColumnConcurrencyMode.exe。您还可以使其执行项目的后期构建。

```
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Reflection;
using System.Xml.Linq;

namespace Utility
{
    internal class FixVersionColumnConcurrencyMode
    {
        private static void Main(string[] args)
        {
            string directoryPath = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
            var files = Directory.GetFiles(directoryPath, "*.edmx");
            foreach (var file in files)
            {
                XDocument xmlDoc = XDocument.Load(file);

                IEnumerable<XElement> versionColumns =
                    from el in xmlDoc.Descendants()
                    where (string)el.Attribute("Name") == "Version"
                    && (string)el.Attribute("Type") == "Binary"
                    && (string)el.Attribute("ConcurrencyMode") != "Fixed"
                    select el;
                bool modified = false;
                foreach (XElement el in versionColumns)
                {
                    modified = true;
                    el.SetAttributeValue("ConcurrencyMode", "Fixed");
                }
                if (modified)
                    xmlDoc.Save(file);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T16:18:14.113

似乎此功能不会出现在 EF 5 或 EF 6 中。

在生成 DB First 后，我​​启动了一个快速控制台应用程序来更新 edmx。

只需将文件放在 edmx 文件的同一目录中，然后在每次重新生成后运行。

适用于以下列中的任何一个：

```
RowVersion    timestamp    NOT NULL
rowversion    timestamp    NOT NULL
RowVer        timestamp    NOT NULL
rowver        timestamp    NOT NULL 
```

您可以在此处获取控制台应用程序[https://dl.dropbox.com/u/3576345/EFConcurrencyFixed.exe](https://dl.dropbox.com/u/3576345/EFConcurrencyFixed.exe)

或在您自己的控制台应用程序中使用这段代码。

```
class Program
{
    static Dictionary<string, string> replacements = new Dictionary<string, string>()
    {
        { "<Property Type=\"Binary\" Name=\"RowVersion\" Nullable=\"false\" MaxLength=\"8\" FixedLength=\"true\" annotation:StoreGeneratedPattern=\"Computed\" />",
          "<Property Type=\"Binary\" Name=\"RowVersion\" Nullable=\"false\" MaxLength=\"8\" FixedLength=\"true\" annotation:StoreGeneratedPattern=\"Computed\" ConcurrencyMode=\"Fixed\" />"},

        { "<Property Type=\"Binary\" Name=\"rowversion\" Nullable=\"false\" MaxLength=\"8\" FixedLength=\"true\" annotation:StoreGeneratedPattern=\"Computed\" />",
          "<Property Type=\"Binary\" Name=\"rowversion\" Nullable=\"false\" MaxLength=\"8\" FixedLength=\"true\" annotation:StoreGeneratedPattern=\"Computed\" ConcurrencyMode=\"Fixed\" />"},

        { "<Property Type=\"Binary\" Name=\"RowVer\" Nullable=\"false\" MaxLength=\"8\" FixedLength=\"true\" annotation:StoreGeneratedPattern=\"Computed\" />",
          "<Property Type=\"Binary\" Name=\"RowVer\" Nullable=\"false\" MaxLength=\"8\" FixedLength=\"true\" annotation:StoreGeneratedPattern=\"Computed\" ConcurrencyMode=\"Fixed\" />"},

        { "<Property Type=\"Binary\" Name=\"rowver\" Nullable=\"false\" MaxLength=\"8\" FixedLength=\"true\" annotation:StoreGeneratedPattern=\"Computed\" />",
          "<Property Type=\"Binary\" Name=\"rowver\" Nullable=\"false\" MaxLength=\"8\" FixedLength=\"true\" annotation:StoreGeneratedPattern=\"Computed\" ConcurrencyMode=\"Fixed\" />"},
    };

    static void Main(string[] args)
    {
        // find all .edmx
        string directoryPath = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location);
        foreach (var file in Directory.GetFiles(directoryPath))
        {
            // only edmx
            if (!file.EndsWith(".edmx"))
                continue;

            // read file
            var fileContents = System.IO.File.ReadAllText(file);

            // replace lines
            foreach (var item in replacements)
                fileContents = fileContents.Replace(item.Key, item.Value);

            // overwite file
            System.IO.File.WriteAllText(file, fileContents);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-18T16:40:21.903

在 EF6 中，当从数据库创建模型时，设计器将在 rowversion 列上设置 ConcurrencyMode=Fixed。请参阅[Designer: Automate setting ConcurrencyMode=Fixed on rowversion columns](http://entityframework.codeplex.com/workitem/588)。在此之前，我们将不得不手动执行此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T12:11:08.117

我自己还没有完成（还没有，但可能很快需要），但应该可以更改用于从 .edmx 生成代码的工具。

[这](http://visualstudiomagazine.com/articles/2008/09/01/customize-code-generation-in-ef.aspx)是一篇为 VS2008 解释它的文章。我想VS2010和VS2012的过程大致相同。

不过，我目前不确定这是否可以以任何方式处理 ConcurrencyMode。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-28T16:02:58.880

我对手动设置 ConcurrencyMode 感到厌烦，所以我编写了一个小实用程序来自动化它。您可以使用它为某些类型（时间戳/行版本）或匹配某些正则表达式模式的列名设置模式。

[http://blog.wezeku.com/2014/04/28/fixefconcurrencymodes/](http://blog.wezeku.com/2014/04/28/fixefconcurrencymodes/)

[https://github.com/wezeku/FixEFConcurrencyModes](https://github.com/wezeku/FixEFConcurrencyModes)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-23T08:31:42.317

当您`ConcurrencyMode=Fixed`在 edmx 文件中添加一次，然后每次更新模型时，在签入代码之前（假设您有一些版本控制寿命 TFS 设置），与最新版本进行比较并相应地合并更改。这样您就不必手动更新每一行。不是最好的方法，但至少比手动操作要好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-27T14:53:27.570

这是 Mohamed Cassim 的答案，但它适用于 EF6

```
static Dictionary<string, string> replacements = new Dictionary<string, string>()
    {
        { "<Property Name=\"RowVersion\" Type=\"Binary\" Nullable=\"false\" MaxLength=\"8\" FixedLength=\"true\" annotation:StoreGeneratedPattern=\"Computed\" />",
          "<Property Name=\"RowVersion\" Type=\"Binary\" Nullable=\"false\" MaxLength=\"8\" FixedLength=\"true\" annotation:StoreGeneratedPattern=\"Computed\" ConcurrencyMode=\"Fixed\" />"},

        { "<Property Name=\"rowversion\" Type=\"Binary\" Nullable=\"false\" MaxLength=\"8\" FixedLength=\"true\" annotation:StoreGeneratedPattern=\"Computed\" />",
          "<Property Name=\"rowversion\" Type=\"Binary\" Nullable=\"false\" MaxLength=\"8\" FixedLength=\"true\" annotation:StoreGeneratedPattern=\"Computed\" ConcurrencyMode=\"Fixed\" />"},

        { "<Property Name=\"RowVer\" Type=\"Binary\" Nullable=\"false\" MaxLength=\"8\" FixedLength=\"true\" annotation:StoreGeneratedPattern=\"Computed\" />",
          "<Property Name=\"RowVer\" Type=\"Binary\" Nullable=\"false\" MaxLength=\"8\" FixedLength=\"true\" annotation:StoreGeneratedPattern=\"Computed\" ConcurrencyMode=\"Fixed\" />"},

        { "<Property Name=\"rowver\" Type=\"Binary\" Nullable=\"false\" MaxLength=\"8\" FixedLength=\"true\" annotation:StoreGeneratedPattern=\"Computed\" />",
          "<Property Name=\"rowver\" Type=\"Binary\" Nullable=\"false\" MaxLength=\"8\" FixedLength=\"true\" annotation:StoreGeneratedPattern=\"Computed\" ConcurrencyMode=\"Fixed\" />"},

        { "<Property Name=\"RowVersion\" Type=\"Binary\" MaxLength=\"8\" FixedLength=\"true\" annotation:StoreGeneratedPattern=\"Computed\" />",
          "<Property Name=\"RowVersion\" Type=\"Binary\" MaxLength=\"8\" FixedLength=\"true\" annotation:StoreGeneratedPattern=\"Computed\" ConcurrencyMode=\"Fixed\" />"},

        { "<Property Name=\"rowversion\" Type=\"Binary\" MaxLength=\"8\" FixedLength=\"true\" annotation:StoreGeneratedPattern=\"Computed\" />",
          "<Property Name=\"rowversion\" Type=\"Binary\" MaxLength=\"8\" FixedLength=\"true\" annotation:StoreGeneratedPattern=\"Computed\" ConcurrencyMode=\"Fixed\" />"},

        { "<Property Name=\"RowVer\" Type=\"Binary\" MaxLength=\"8\" FixedLength=\"true\" annotation:StoreGeneratedPattern=\"Computed\" />",
          "<Property Name=\"RowVer\" Type=\"Binary\" MaxLength=\"8\" FixedLength=\"true\" annotation:StoreGeneratedPattern=\"Computed\" ConcurrencyMode=\"Fixed\" />"},

        { "<Property Name=\"rowver\" Type=\"Binary\" MaxLength=\"8\" FixedLength=\"true\" annotation:StoreGeneratedPattern=\"Computed\" />",
          "<Property Name=\"rowver\" Type=\"Binary\" MaxLength=\"8\" FixedLength=\"true\" annotation:StoreGeneratedPattern=\"Computed\" ConcurrencyMode=\"Fixed\" />"},
    };

    static void Main(string[] args)
    {
        // find all .edmx
        string directoryPath = Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location);
        foreach (var file in Directory.GetFiles(directoryPath))
        {
            // only edmx
            if (!file.EndsWith(".edmx"))
                continue;

            Console.WriteLine("File Name Found : " + file);

            // read file
            var fileContents = File.ReadAllText(file);

            // replace lines
            foreach (var item in replacements)
                fileContents = fileContents.Replace(item.Key, item.Value);

            // overwite file
            File.WriteAllText(file, fileContents);

            Console.WriteLine("\nFile : " + file + "Changed");
        }
    } 
```

# python - ImportError: cannot import module - 只有一个模块不能从包中导入

> ID：12732165
> 
> 赞同：0
> 
> 时间：2012-10-04T17:01:44.860
> 
> 标签：python

我创建了一个包，为了便于使用我称之为 packageA。

在这个包中，我有 4 个子模块（单独的文件）和一个 init 文件，所以包包含以下文件：

*   `__init__.py`
*   模块A.py
*   模块B.py
*   模块C.py
*   模块D.py

BD 模块是独立的，它们不导入任何其他本地模块。模块 A 导入模块 BD。

现在我有一个要导入的脚本，`packageA`init.py 到目前为止是空的。

```
import packageA 
```

工作没有问题。但是 moduleA 在此导入中不可用。如果我想通过 packageA.moduleA 使用它，则会引发此错误：

```
AttributeError: 'module' object has no attribute 
```

以下也可以正常工作：

```
from packageA import moduleB
from packageA import moduleC
from packageA import moduleD 
```

下一次导入会导致 ImportError：

```
from packageA import moduleA 
```

引发此错误：

```
Traceback (most recent call last):
File "run.py", line 19, in <module>
from packageA import moduleA
ImportError: cannot import name moduleA 
```

我想也许我在 moduleA 中做错了什么，但即使 moduleA 为空，导入也会引发同样的错误。似乎无法以某种方式导入此模块。这怎么可能？

我对所有 python 模块都有单独的单元测试文件，是的，moduleA 工作正常，没有任何错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:00:08.890

也许您正在从不同的位置导入不同版本的包。在你的脚本中试试这个以确保它是正确的——它应该打印`__init__.py`文件的完整路径。

```
import packageA
print packageA.__file__ 
```

此外，检查包的模块搜索路径是否已更改。通常这是一个包含一个元素的列表，即包的目录路径：

```
print packageA.__path__ 
```

# c - 我无法通过 NETLINK_ROUTE 选项通过 Netlink 套接字设置特定接口（eth0 或 eth1）的 MTU 大小

> ID：12732169
> 
> 赞同：2
> 
> 时间：2012-10-04T17:02:00.933
> 
> 标签：c, netlink, mtu

我编写了一个程序来将特定接口（比如`eth0`或）的 MTU 大小设置为 1100。请求消息是使用 Netlink 套接字通过选项`eth1`从用户空间发送的。`NETLINK_ROUTE`

消息从用户空间成功发送，但是当我验证时`ifconfig eth0`，MTU 大小仍然显示旧值（1500）。我验证正确吗？我怎么知道内核是否正确设置了 MTU 大小？如果我错了，请在下面找到我的程序并纠正我。

```
 #include <stdio.h>
 #include <stdlib.h>
 #include <net/if.h>
 #include <string.h>
 #include <sys/socket.h>
 #include <linux/netlink.h>
 #include <linux/rtnetlink.h>
 #include <stdbool.h>

  struct {
     struct nlmsghdr nh;
     struct ifinfomsg  ifinfo;
     char   data[100];
  }req;

  int ret;

  struct rtattr  *rta;

  /* MTU Set */
  unsigned int mtu = 1100;

  /* rtNetlinkSockFd */
  int rtNetlinkSockFd = -1;

  int main()
  {

     int ret;

     rtNetlinkSockFd = socket(AF_NETLINK, SOCK_DGRAM, NETLINK_ROUTE);

     if(rtNetlinkSockFd < 0)
     {
       printf("Creation of NetLink Socket is failed \n");
       return -1;
     }

     /* Memset the Requested Structure */
     memset( &req, 0x00, sizeof(req));

     /* Populate the Netlink Header Fields */
     req.nh.nlmsg_len   = NLMSG_LENGTH(sizeof(struct ifinfomsg));

 /* Link Layer: RTM_NEWLINK, RTM_DELLINK, RTM_GETLINK, RTM_SETLINK */
 req.nh.nlmsg_type  = RTM_SETLINK;

 /*   NLM_F_REQUEST   Must be set on all request messages. */
 req.nh.nlmsg_flags = NLM_F_REQUEST;

 req.nh.nlmsg_seq   = 0;
 req.nh.nlmsg_pid   = 0; //getpid();

 /* Populate the Ifinfo Structure Attributes */ 
 req.ifinfo.ifi_family = AF_UNSPEC;

 /* Give the Interface Name and get the Index */
 req.ifinfo.ifi_index  = if_nametoindex("eth0");

 printf(" The NetLink Ifi_index :%d\n", req.ifinfo.ifi_index);

 /* ifi_change is reserved for future use and
 * should be always set to 0xFFFFFFFF. */
 req.ifinfo.ifi_change = 0xFFFFFFFF;
 req.ifinfo.ifi_type   = 0;
 req.ifinfo.ifi_flags  = 0;

 /* RTA is Pointed to (req+32) it means points to the DATA */
 rta = (struct rtattr *)(((char *) &req) +  NLMSG_ALIGN(req.nh.nlmsg_len));

 /*  IFLA_MTU      unsigned int       MTU of the device. */
 rta->rta_type = IFLA_MTU;

 /* Len Attribute */
 rta->rta_len  = sizeof(unsigned int);

 req.nh.nlmsg_len = NLMSG_ALIGN(req.nh.nlmsg_len) + RTA_LENGTH(sizeof(mtu));

 memcpy(RTA_DATA(rta), &mtu, sizeof(mtu));

 ret = send(rtNetlinkSockFd, &req, req.nh.nlmsg_len, 0);

 if (ret < 0) 
 {
    printf( "netlink: Sending failed: (assume operstate is not supported)");
 }
 else
 {
   printf( "netlink: Sent successfully");
 }
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-13T11:08:20.647

我认为你需要写：

```
rta->rta_len = RTA_LENGTH(sizeof(unsigned int)); 
```

代替：

```
rta->rta_len  = sizeof(unsigned int); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-13T02:04:45.403

使用`RTM_NEWLINK`而不是`RTM_SETLINK`.

```
req.nh.nlmsg_type = RTM_NEWLINK; 
```

请参阅手册页[示例](http://man7.org/linux/man-pages/man3/rtnetlink.3.html)。

# cmd - cmd，生成帮助文件的程序

> ID：12732175
> 
> 赞同：-3
> 
> 时间：2012-10-04T17:02:35.427
> 
> 标签：cmd

```
@echo off
md helpgen 2>nul
cd helpgen
for /F %%i in ('help') do (
  echo %%i|findstr /R "^[A-Z]*$" >nul
  if "%ERRORLEVEL%"=="0" (
    help %%i>%%i.txt
  ) 
)
cd .. 
```

该程序应该为`help`命令中的每个文件制作帮助文件。但是......它不能正常工作，我不知道为什么。请帮帮我）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:15:25.050

您的代码无法正常工作，因为 %ERRORLEVEL% 在解析时被扩展，并且整个带括号的 FOR 代码块被一次性解析。您需要每次迭代的 ERRORLEVEL 值，但您的代码正在获取循环执行之前存在的 ERRORLEVEL 值。

一种解决方案是使用`setlocal enableDelayedExpansion`. 然后在你的循环中使用`!ERRORLEVEL!`而不是`%ERRORLEVEL%`. 延迟扩展将在每次迭代的执行时给出所需的 ERRORLEVEL 值。

键入`help set`或`set /?`从命令行获取有关延迟扩展的更多信息。

但是有一个更简单的解决方案可以完全避免变量扩展。`command1 && command2`只有当 command1 成功时才会执行 command2。`||`如果先前的命令不成功，还可以使用运算符来执行命令。

但是整个练习有点毫无意义，因为您的 FINDSTR 表达式不会给出正确的结果，所以您的最终输出仍然是错误的。

[Ansgar Wiechers 在他的回答](https://stackoverflow.com/a/12733642/1012053)中发现了一种搜索模式。不需要“tokens=1”，因为这是默认设置。

最终的脚本可以很简单：

```
@echo off
md helpgen 2>nul
cd helpgen
for /f %%i in ('help ^| findstr /rc:"^[A-Z][A-Z]*  "') do help %%i>%%i.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T18:37:58.133

要从您的输出中提取命令，`help`您需要这样的东西：

```
for /f "tokens=1" %%i in ('help ^| findstr /rc:"^[A-Z][A-Z]*  "') do (
  echo %%i
) 
```

该模式`"^[A-Z][A-Z]* "`确保您将只处理以字符开头并且在第一个单词之后至少有两个空格的行。

# haskell - 是否有一个很好的 Haskell 库来解析 RFC2822 邮件有效负载？

> ID：12732176
> 
> 赞同：4
> 
> 时间：2012-10-04T17:02:40.017
> 
> 标签：haskell, rfc2822

我正在寻找一个可以解析 RFC2822 电子邮件正文以提取内容（包括附件）的 Haskell 库。

我看到的唯一一个是来自 hsemail 包的 Text.ParserCombinators.Parsec.Rfc2822，但作者警告说它并不完全符合标准。

[http://hackage.haskell.org/packages/archive/hsemail/1.0/doc/html/Text-ParserCombinators-Parsec-Rfc2822.html](http://hackage.haskell.org/packages/archive/hsemail/1.0/doc/html/Text-ParserCombinators-Parsec-Rfc2822.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:13:43.123

`Codec.MIME.Parse` [http://hackage.haskell.org/package/mime-0.3.3.2](http://hackage.haskell.org/package/mime-0.3.3.2)怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T23:29:11.573

还有[http://hackage.haskell.org/packages/archive/hsemail/1.7.2/doc/html/Text-ParserCombinators-Parsec-Rfc2822.html#g:11](http://hackage.haskell.org/packages/archive/hsemail/1.7.2/doc/html/Text-ParserCombinators-Parsec-Rfc2822.html#g:11)

# gwt - GWT：从不同的类调用相同的实例

> ID：12732177
> 
> 赞同：0
> 
> 时间：2012-10-04T17:02:43.057
> 
> 标签：gwt, interface, instance

我有一个通过以下方式“实例化”自身的接口（CssResource）：MyInterface singleton = GWT.create(MyInterface.class)。

当我尝试使用它时，假设在 MyClass2 中，我只是通过以下方式调用它： MyInterface myClass = MyInterface.singleton;

那么如果我在 MyClass3 中做同样的事情，我是在调用与 MyClass1 相同的实例还是只是创建一个新实例？

如果是后者，有没有办法调用相同的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:23:26.697

以这种方式在您的 ClientBundle 接口中将您的 INSTANCE 声明为 static 和 final ：

```
public interface MyResources extends ClientBundle {
  public static final MyResources INSTANCE =  GWT.create(MyResources.class);    
  @Source("my.css")
  public CssResource css();
} 
```

像 MyResources.INSTANCE 一样访问您的实例，它不会被实例化两次。

[https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle)

# tortoisesvn - Tortoisesvn 自动解决文件夹冲突？

> ID：12732178
> 
> 赞同：3
> 
> 时间：2012-10-04T17:02:44.573
> 
> 标签：tortoisesvn, conflict, resolve

是否可以设置一个“规则”来告诉 TortoiseSVN 自动解决特定文件夹上的冲突？

IE。我们有一个共享资源文件夹 - “/shared”，用于存储我们最新的 bin 文件。当我们进行本地构建时，该文件夹中的本地 bin 文件会被覆盖。

下次我们对该文件夹进行 svn 更新时，更新应该从 SVN 中提取最新的 bin 文件并覆盖以前本地构建的 bin 文件，但这会引发冲突，因为文件是二进制文件并且无法合并（并且，不应该无论如何合并）

我们想设置一个规则，告诉乌龟总是在 /shared 文件夹上“使用他们的解决方案”（“svn update -R --accept theirs-full”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T02:02:52.890

这里有一个 SVN 误用。如果文件不应该像你说的那样合并，则应该将目录设置为忽略所有 .bin 文件（svn：ignore）。将频繁更改导致如此多冲突的版本控制二进制文件保存在版本控制中是没有意义的。

在你的位置，我会从这个文件夹中删除所有 .bin 文件。如果确实需要对文件进行版本控制，我会创建一个目录并将这些 .bin 文件放在其中，避免频繁更改。

但是，如果您**真的**想保持文件原样，我建议您为更新后事件编写客户端挂钩。有关更多信息，请参阅[TortoiseSVN 文档](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-settings.html)。

# android - Android ExpandableListView 将子项隐藏为灰色

> ID：12732181
> 
> 赞同：0
> 
> 时间：2012-10-04T17:02:48.910
> 
> 标签：android, listview, hide, expandablelistview

所以我在我的应用程序中使用 ExpandableListView 和扩展 BaseExpandableListViewAdapter 的自定义适配器。但是当我单击一个组（本质上是父组）时，它会告诉 ExpandableListView 展开该组并显示它下面的子项。但问题是，孩子们在他们的整个视野​​中都有一个灰色的盒子，你只能看到一个灰色的盒子。我不知道为什么会这样

注意：这只发生在低于 4.0 的 android 版本上。它在 android 4.0 上完美运行，但在 android 2.3.3 及以下出现灰色框。知道为什么吗？

在我看来，示例代码可能没有必要，因为我猜这与 android 操作系统有关，但如果需要任何代码，请询问我，我将编辑问题并将其发布，谢谢！

这里是灰色框的样子，组（父）显然是灰色框上方的东西 ![人名被潦草写下](../Images/e6bbeb65eb046d3fe63a6ac134d1666f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:35:28.030

好吧，对于将来看到这个的人来说，我终于想通了，在我的“孩子”布局的 xml 文件中，我有 clipChildren="true"，将其更改为 false 并且它起作用了。

# apache - ab负载测试

> ID：12732182
> 
> 赞同：228
> 
> 时间：2012-10-04T17:02:53.323
> 
> 标签：apache, benchmarking

[有人可以指导我如何使用apache bench 工具](http://httpd.apache.org/docs/2.2/programs/ab.html)（`ab`）对我的网站进行负载测试吗？

我想知道以下内容：

**网站每分钟可以处理多少人？**

请引导我完成我应该运行的命令来解决这个问题。

我尝试了每个教程，它们令人困惑。

* * *

## 回答 #1

> 赞同：363
> 
> 时间：2012-10-04T17:19:10.943

apache 基准测试工具非常基础，虽然它可以让您对某些性能有一个坚实的了解，**但如果您打算让您的网站在生产中承受严重的压力，那么仅依赖它是一个坏主意。**

话虽如此，这里是最常见和最简单的参数：

`-c`：（“并发”）。指示有多少客户（人/用户）将同时访问该站点。在`ab`运行时，会有`-c`客户访问该站点。这实际上决定了您的网站在基准测试期间将承受的压力量。

`-n`：表示将要发出多少个请求。这只是决定基准的长度。具有服务器可以支持的值的高`-n`值`-c`是一个好主意，以确保事情不会在持续的压力下崩溃：支持 5 秒和 5 小时的压力是不一样的。

`-k`：这是浏览器天生具备的“KeepAlive”功能。您不需要传递一个值，`-k`因为它是“布尔值”（意思是：它表示您希望您的测试使用来自 HTTP 的 Keep Alive 标头并维持连接）。由于浏览器会执行此操作，并且您可能希望模拟您的网站从浏览器中获得的压力和流量，因此建议您对此进行基准测试。

最后一个参数只是主机。默认情况下，如果您不指定它，它将访问 http:// 协议。

```
ab -k -c 350 -n 20000 example.com/ 
```

通过发出上面的命令，您将访问[http://example.com/](http://example.com/)并同时连接 350 个连接，直到满足 20,000 个请求。它将使用 keep alive 标头来完成。

在流程完成 20,000 个请求后，您将收到有关统计信息的反馈。这将告诉您在使用上述参数时网站在您施加的压力下的表现如何。

要了解站点可以同时处理多少人，只需查看响应时间（平均值、最小和最大响应时间、失败的请求等）是否是您的站点可以接受的数字（不同的站点可能需要不同的速度）。您可以使用不同的 -c 值运行该工具，直到您说“如果我增加它，它会开始收到失败的请求并且它会中断”。

根据您的网站，您预计每分钟的平均请求数。这变化很大，您将无法使用 ab 模拟它。但是，请这样想：如果您的平均用户每分钟会遇到 5 个请求，并且您认为有效的平均响应时间是 2 秒，这意味着每分钟 10 秒有 1 个用户会收到请求，这意味着仅有 1/6 的时间会到达网站。这也意味着，如果您有 6 个用户同时使用 ab 访问该站点，那么您可能有 36 个用户在模拟中，即使您的并发级别 (-c) 只有 6。

这取决于您对使用该网站的用户的期望行为，但您可以从“我希望我的用户每分钟点击 X 个请求并且我认为平均响应时间为 2 秒有效”中得到它。然后只需修改您的 -c 级别，直到达到 2 秒的平均响应时间（但确保最大响应时间和 stddev 仍然有效）并查看您可以使 -c 多大。

我希望我解释清楚:) 祝你好运

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2014-08-22T18:59:21.113

> 请引导我完成我应该运行的命令来解决这个问题。

您可以做的最简单的测试是执行 1000 个请求，一次 10 个（这大约模拟了 10 个并发用户每个获得 100 个页面 - 在整个测试期间）。

```
ab -n 1000 -c 10 -k -H "Accept-Encoding: gzip, deflate" http://www.example.com/ 
```

`-n 1000`是要发出的请求数。

`-c 10`告诉 AB 一次执行 10 个请求，而不是一次执行 1 个请求，以更好地模拟并发访问者（与顺序访问者相比）。

`-k`发送`KeepAlive`标头，要求 Web 服务器在每个请求完成后不要关闭连接，而是继续重用它。

我还发送了额外的标头`Accept-Encoding: gzip, deflate`，因为 mod_deflate 几乎总是用于将 text/html 输出压缩 25%-75% - 由于它会影响 Web 服务器的整体性能（即，可以在相同的时间内传输 2 倍的数据，等等）。

结果：

```
Benchmarking www.example.com (be patient)
Completed 100 requests
...
Finished 1000 requests

Server Software:        Apache/2.4.10
Server Hostname:        www.example.com
Server Port:            80

Document Path:          /
Document Length:        428 bytes

Concurrency Level:      10
Time taken for tests:   1.420 seconds
Complete requests:      1000
Failed requests:        0
Keep-Alive requests:    995
Total transferred:      723778 bytes
HTML transferred:       428000 bytes
Requests per second:    704.23 [#/sec] (mean)
Time per request:       14.200 [ms] (mean)
Time per request:       1.420 [ms] (mean, across all concurrent requests)
Transfer rate:          497.76 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    0   0.1      0       1
Processing:     5   14   7.5     12      77
Waiting:        5   14   7.5     12      77
Total:          5   14   7.5     12      77

Percentage of the requests served within a certain time (ms)
  50%     12
  66%     14
  75%     15
  80%     16
  90%     24
  95%     29
  98%     36
  99%     41
 100%     77 (longest request) 
```

对于最简单的解释，忽略除此行之外的所有内容：

```
Requests per second:    704.23 [#/sec] (mean) 
```

将其乘以 60，每分钟就有你的请求。

要获得真实世界的结果，您需要测试 Wordpress 而不是一些静态 HTML 或 index.php 文件，因为您需要知道所有内容如何一起执行：包括复杂的 PHP 代码和多个 MySQL 查询......

例如，这是在同一系统和 WAMP 环境中测试全新安装的 Wordpress 的结果（我使用的是 WampDeveloper，但也有 Xampp、WampServer 等）...

```
Requests per second:    18.68 [#/sec] (mean) 
```

**现在慢了 37 倍！**

在负载测试之后，您可以做很多事情来提高整体性能（每秒请求数），并且还可以使 Web 服务器在更大负载下更加稳定（例如，增加Apache`-n`并且`-c`倾向于崩溃），即你可以在这里阅读：

[使用 AB 对 Apache 进行负载测试（Apache Bench）](http://www.devside.net/wamp-server/load-testing-apache-with-ab-apache-bench)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-03-23T10:33:10.347

在 Windows 上设置 Apache Bench(AB) 的步骤（IMO - 推荐）。

第 1 步 - 安装 Xampp。
第 2 步 - 打开 CMD。第 3 步 -从 CMD
转到 apache bench 目标 ( ) 第 4 步 - 粘贴命令 ( ) 第 5 步 - 等待它。你完成了`cd C:\xampp\apache\bin`
`ab -n 100 -c 10 -k -H "Accept-Encoding: gzip, deflate" http://localhost:yourport/`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-27T10:36:34.633

仅使用 ab 对 API 进行负载测试是不够的。但是，我认为这是一个很好的工具，可以让您基本了解网站的性能。

如果你想使用 ab 命令在后台同时测试多个 API 端点，使用不同的数据，你需要使用“nohup”命令。即使您关闭终端，它也会运行任何命令。

我写了一个简单的脚本来自动化整个过程，随意使用它：[http ://blog.ikvasnica.com/entry/load-test-multiple-api-endpoints-concurrently-use-this-simple-shell-script](http://blog.ikvasnica.com/entry/load-test-multiple-api-endpoints-concurrently-use-this-simple-shell-script)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-10-18T15:58:19.707

我也很好奇是否可以使用 apache abs 或构造/破坏 php 测量脚本或 php 扩展来测量脚本的速度。

最后两个对我来说失败了：它们是近似的。之后我想尝试“ab”和“abs”。

命令“ab -k -c 350 -n 20000 example.com/”很漂亮，因为它更容易！

但是有没有人想到任何 apache 服务器上的“localhost”，例如 www.apachefriends.org？

您应该在根目录中创建一个文件夹，例如“bench”，其中有 2 个文件：测试“bench.php”并引用“void.php”。

## 然后：基准测试！

## 长凳.php

```
<?php

for($i=1;$i<50000;$i++){
    print ('qwertyuiopasdfghjklzxcvbnm1234567890');
}
?> 
```

* * *

## 无效的.php

```
<?php
?> 
```

## 在您的桌面上，您应该使用这样的 .bat 文件（在 Windows 中）：

## 板凳.bat

```
"c:\xampp\apache\bin\abs.exe" -n 10000 http://localhost/bench/void.php
"c:\xampp\apache\bin\abs.exe" -n 10000 http://localhost/bench/bench.php
pause 
```

现在，如果你密切关注...

void 脚本不会产生零结果！！！所以结论是：从第二个结果来看，第一个结果应该减少！！！

我得到了：

```
c:\xampp\htdocs\bench>"c:\xampp\apache\bin\abs.exe" -n 10000 http://localhost/bench/void.php
This is ApacheBench, Version 2.3 <$Revision: 1826891 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking localhost (be patient)
Completed 1000 requests
Completed 2000 requests
Completed 3000 requests
Completed 4000 requests
Completed 5000 requests
Completed 6000 requests
Completed 7000 requests
Completed 8000 requests
Completed 9000 requests
Completed 10000 requests
Finished 10000 requests

Server Software:        Apache/2.4.33
Server Hostname:        localhost
Server Port:            80

Document Path:          /bench/void.php
Document Length:        0 bytes

Concurrency Level:      1
Time taken for tests:   11.219 seconds
Complete requests:      10000
Failed requests:        0
Total transferred:      2150000 bytes
HTML transferred:       0 bytes
Requests per second:    891.34 [#/sec] (mean)
Time per request:       1.122 [ms] (mean)
Time per request:       1.122 [ms] (mean, across all concurrent requests)
Transfer rate:          187.15 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    0   0.3      0       1
Processing:     0    1   0.9      1      17
Waiting:        0    1   0.9      1      17
Total:          0    1   0.9      1      17

Percentage of the requests served within a certain time (ms)
  50%      1
  66%      1
  75%      1
  80%      1
  90%      1
  95%      2
  98%      2
  99%      3
 100%     17 (longest request)

c:\xampp\htdocs\bench>"c:\xampp\apache\bin\abs.exe" -n 10000 http://localhost/bench/bench.php
This is ApacheBench, Version 2.3 <$Revision: 1826891 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking localhost (be patient)
Completed 1000 requests
Completed 2000 requests
Completed 3000 requests
Completed 4000 requests
Completed 5000 requests
Completed 6000 requests
Completed 7000 requests
Completed 8000 requests
Completed 9000 requests
Completed 10000 requests
Finished 10000 requests

Server Software:        Apache/2.4.33
Server Hostname:        localhost
Server Port:            80

Document Path:          /bench/bench.php
Document Length:        1799964 bytes

Concurrency Level:      1
Time taken for tests:   177.006 seconds
Complete requests:      10000
Failed requests:        0
Total transferred:      18001600000 bytes
HTML transferred:       17999640000 bytes
Requests per second:    56.50 [#/sec] (mean)
Time per request:       17.701 [ms] (mean)
Time per request:       17.701 [ms] (mean, across all concurrent requests)
Transfer rate:          99317.00 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    0   0.3      0       1
Processing:    12   17   3.2     17      90
Waiting:        0    1   1.1      1      26
Total:         13   18   3.2     18      90

Percentage of the requests served within a certain time (ms)
  50%     18
  66%     19
  75%     19
  80%     20
  90%     21
  95%     22
  98%     23
  99%     26
 100%     90 (longest request)

c:\xampp\htdocs\bench>pause
Press any key to continue . . . 
```

**90-17= *73 我期望的结果！***

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-25T09:40:10.877

执行步骤：负载测试命令

*   第 1 步 - 安装 Xampp。
*   第 2 步 - 打开 CMD。
*   `cd C:\xampp\apache\bin`第 3 步 -从 CMD转到 Apache 工作台目标 ( )。
*   第 4 步 - 粘贴命令

    ```
    ab -n 100 -c 10 -k -H "Accept-Encoding: gzip, deflate" http://localhost:port/ 
    ```

*   第 5 步 - 等待它。你完成了

* * *

1.  仅主命令“获取”</li>

```
ab -k -c 25 -n 2000 http://192.168.1.113:3001/api/v1/filters/3 
```

# dns - 仅在 Mac 上的客户端网站上找不到 404 - 适用于其他计算机、智能手机、平板电脑

> ID：12732184
> 
> 赞同：0
> 
> 时间：2012-10-04T17:02:59.970
> 
> 标签：dns, http-status-code-404

我使用自定义主题设置创建了一个基于 wordpress 的网站。现场网站在我尝试过的每台计算机、智能手机和平板电脑上都能正常呈现，除了我用作本地开发机器的 Mac。我在我的mac上尝试了各种浏览器。离线开发版本渲染良好。

当我访问网站[http://www.redroselimos.com/](http://www.redroselimos.com/)时，我收到以下错误：

```
未找到

在此服务器上找不到请求的 URL /。

```

我怀疑这是 DNS 问题还是 Mac 配置问题？

Mac OSX
10.7.4 Chrome 22.0.1229.79
MAMP PRO 2.0.5
DNS：208.67.222.222/208.67.220.220 (openDNS)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:20:58.930

如果它在所有其他机器上都显示良好，则该站点有效，并且它只能是您的 Mac 的网络问题。很可能因为它是您的开发设置，所以您有其他设置。404 错误意味着您至少可以访问网络服务器，因此您正在访问互联网。您可以做几件事：

1.  您可以检查您的`/etc/hosts`文件，看看您是否将该域发送到另一个 IP - 这是我的第一个怀疑。
2.  还要检查`httpd.conf`服务器上的 ，看看你是否以不同的方式处理你的开发机器的 IP，或者它是否被重新路由到`.htaccess`.
3.  您也可以尝试`tail -f /var/log/httpd/access_log`或无论您的日志文件是什么，然后尝试从您的 Mac 再次点击它，看看会发生什么。
4.  尝试通过代理从您的 Mac 访问您的站点。proxify.com 和 hidemyass.com 都可以解决这个问题，这样你就可以知道这是否是一个严格的 IP 问题。

这应该准确指出错误是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:14:15.433

我有 Mac、Lion 10.7.5、Safari 6.0.1

没有错误。浏览到您写的链接，我可以看到该网站（左上角是登录表单，中心标题是一种画廊，中间是其他一些东西）

我没有特殊配置，只有默认。如果您之前没有更改配置，那不是问题。如果这样做，请尝试恢复默认设置。

我认为这是 localhost 的问题，因为您想从外部到内部冲浪到您的 PC。我没有看到这样做的正当理由，如果您的 mac 是您只需要浏览到 localhost 的站点的主机。

顺便说一句，Lion 版本 10.7.5 有更新

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-07T08:45:12.997

**是什么导致 Mac OS X 中的主机文件 404 错误**

Hosts 文件位于用户的计算机上。使用 Search 或 Finder 功能找不到它。它被编织到机器代码中。

hosts 文件用于将 DOMAIN 主机名映射到 IP NUMBER 地址。示例：浏览器中显示的 MyDomain.com 确实是互联网上的数字 111.11.11.11

这个映射过程称为将浏览器字母名称“解析”为互联网使用的数字地址。

大多数主机文件没有很多条目，因为大多数浏览器名称条目都是在互联网提供商提供给用户的 DNS 查找表中解析的。

hosts 文件可能会导致本地计算机出现**404 无法找到页面**错误。这是因为列表中的网页域条目错误或已过期。

有一天域条目被正确显示为 222.22.22.22 但实际上它已更改为 333.33.33.33

另一台计算机将毫无问题地转到 333.33.33.33，因为本地计算机的 hosts 文件中有最新列表。或者甚至没有条目。

因此，本地计算机主机文件需要更正错误。停止 404 错误。这是通过编辑本地机器的主机文件来完成的。需要更新坏的过期条目。或者该条目需要从主机文件中完全删除。

如果该条目从主机文件中完全删除，则互联网提供商只需将本地计算机发送到互联网 DNS 文件，以将浏览器字母条目“解析”为数字互联网地址

编辑主机文件的说明在这里：[如何使用终端在 Mac OS X 中编辑主机文件](https://osxdaily.com/2012/08/07/edit-hosts-file-mac-os-x/)。需要知道如何使用终端。

# symfony - 自定义表单类型中的双重验证错误

> ID：12732185
> 
> 赞同：0
> 
> 时间：2012-10-04T17:03:17.630
> 
> 标签：symfony, symfony-forms

我正在实现一个自定义表单类型，它提供一个自动完成字段来选择一个位置（国家、城市或地点）。表单类型创建两个字段，一个用于自动完成搜索输入的文本字段，一个用于保存所选位置的所选 ID 的隐藏字段。

在文本字段中输入时，会进行服务器调用并通过 jquery 自动完成显示结果。如果选择了一个位置，则所选位置的 id 将写入隐藏字段，而位置的名称将显示在文本字段中。在服务器上，我使用客户端转换器来查找隐藏字段传递的 id 的实体。文本字段被忽略。

我的模型类定义了一个带有属性的位置字段，以写回使用 NotNull 验证约束注释的位置实体。

到目前为止一切正常，但如果我不选择位置，验证消息“此值不应为空”。显示两次。

![双重验证错误](../Images/7025bfc716ee62f18728e7910bc97d55.png)

该捆绑包是公开的，可以在我的 github 存储库中找到。相关的类是[LocationFieldType](https://github.com/roomthirteen/Room13GeoBundle/blob/master/Form/LocationFieldType.php)和[LocationDataTransformer](https://github.com/roomthirteen/Room13GeoBundle/blob/master/Form/LocationDataTransformer.php)以及[表单主题](https://github.com/roomthirteen/Room13GeoBundle/blob/master/Resources/views/Form/fields.html.twig)。

现在了解我如何将表单类型集成到我的项目中。我添加了整个代码，对不起质量；）

在模型中，我将属性定义如下：

```
class JourneyCreate
{

    /**
     * @Assert\NotNull()
     * @Assert\Choice(choices = {"offer", "request"})
     */
    public $type;

    /**
     * @Assert\NotNull()
     * @Assert\Date()
     */
    public $date;

    /**
     * @Assert\NotNull()
     * @Assert\Time()
     */
    public $time;

    /**
     * @Assert\NotNull()
     *
     */
    public $start;

    /**
     * @Assert\NotNull()
     *
     */
    public $destination;

    public function buildJourney(User $owner)
    {
    switch($this->type)
    {
        case 'offer':
            $journey = new JourneyOffer();
            break;
        case 'request':
            $journey = new JourneyRequest();
            break;
        default:
            throw new \InvalidArgumentException('Invalid journey type');
    }

    $journey->setDate($this->date);
    $journey->setTime($this->time);

    $journey->addStation(new JourneyStation($this->start));
    $journey->addStation(new JourneyStation($this->destination));

    $journey->setOwner($owner);

    return $journey;
    }
} 
```

在主表单中，我添加如下字段：

```
 class JourneyCreateType extends BaseType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {

    $builder
        ->add('type','choice', array(
            'choices'   => array(
                'offer'   => 'Driver',
                'request' => 'Passanger',
            ),
            'empty_value'=>'',
            'multiple'  => false,
            'expanded'  => true,
        ))
        ->add('date','date',array(
            'widget' => 'single_text',
            'format' => $this->getDateFormat(\IntlDateFormatter::TRADITIONAL),
        ))
        ->add('time','time',array(
            'widget' => 'single_text',
        ))
        ->add('start','room13_geo_location')
        ->add('destination','room13_geo_location')
    ;

    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
    $resolver->setDefaults(array(
        'data_class' => 'Acme\DemoBundle\Form\Model\JourneyCreate',
    ));
    }

    public function getName()
    {
    return 'journey_create';
    }
} 
```

和控制器代码：

```
/**
* @Route("/create/{type}", defaults={"type" = null})
* @Template()
*/
public function createAction($type=null)
{

    if($type !== null && !in_array($type,array('request','offer')))
    {
        throw new NotFoundHttpException();
    }

    $journeyCreate = new JourneyCreate();
    $journeyCreate->type = $type;

    $form = $this->createForm(new JourneyCreateType(),$journeyCreate);

    if($this->isPost())
    {
        $form->bind($this->getRequest());

        if($form->isValid())
        {
          $journeyCreate = $form->getData();
          $journey = $journeyCreate->buildJourney($this->getCurrentUser());
          $this->persistAndFlush($journey);
          return $this->redirect($this->generateUrl('acme_demo_journey_edit',array('id'=>$journey->getId())));
        }
    }

    return array(
        'form'  => $form->createView(),
    );
} 
```

最后是显示表单的模板代码：

```
{% block page_body %}
    <form class="form-horizontal" action="{{ path('acme_demo_journey_create') }}" method="post" novalidate>
    {{form_widget(form)}}
    <div class="form-actions">
        <button class="btn btn-primary" type="submit">{{'form.submit'|trans}}</button>
        <a href="{{path("acme_demo_journey_index")}}" class="btn">{{'form.cancel'|trans}}</a>
    </div>
    </form>
{% endblock %} 
```

我有这样的理论，这可能是因为我使用了两个表单字段，但不知道如何解决这个问题。欢迎任何关于如何更优雅地解决这个问题的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T21:23:32.357

尽管这个问题看起来很复杂，但答案很简单，只需从小部件模板块中删除 {{form_errors(form)}}。因为 *form_row* 块看起来像：

```
{% block form_row %}
{% spaceless %}
    <div class="form_row">
        {{ form_label(form) }}
        {{ form_errors(form) }}
        {{ form_widget(form) }}
    </div>
{% endspaceless %}
{% endblock form_row %} 
```

错误只是输出了两次。

# svn - Jenkins - 在构建之前查看 SVN 更改

> ID：12732188
> 
> 赞同：3
> 
> 时间：2012-10-04T17:03:21.057
> 
> 标签：svn, build, jenkins, hudson

我正在寻找一些插件，以某种方式向我们的 Jenkins 的用户（使用手动构建的用户）显示最后的 SVN 更改，更具体地说，如果他按下播放按钮将构建什么。

搜索stackoverflow我发现了一些看起来像我想要的答案，但不完全是我需要的......

[Hudson 的工作可以在不拉下代码的情况下轮询 SCM 吗？](https://stackoverflow.com/questions/3463877/can-a-hudson-job-poll-a-scm-without-pulling-code-down)

这个是说要创建一个新工作。我可以这样做，但担心用户会以某种方式迷路，有两个项目，一个是查看将要构建什么，一个是实际构建它。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T17:31:00.840

我还没有这样做，但它看起来像 Build Pipeline 插件 ( [https://wiki.jenkins-ci.org/display/JENKINS/Build+Pipeline+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Build+Pipeline+Plugin) ) 会做你想要的。我们将这个插件用于它的视图——我注意到它还添加了一个“手动执行下游项目”选项来构建步骤。

您仍然会创建两个工作，一个用于投票，一个用于构建。将构建作业标识为轮询作业的手动执行下游项目，您就完成了。我认为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T20:17:23.307

你需要这个 Subversion Release Manager 插件：
[https ://wiki.jenkins-ci.org/display/JENKINS/Subversion+Release+Manager](https://wiki.jenkins-ci.org/display/JENKINS/Subversion+Release+Manager)

查看该链接中的屏幕截图。它允许您查看所有 SVN 修订版，然后选择要构建的修订版

# python - Gimp：启动没有图像的脚本

> ID：12732194
> 
> 赞同：0
> 
> 时间：2012-10-04T17:03:39.637
> 
> 标签：python, image, plugins, gimp

好吧，我正在尝试为 Gimp 编写一个 python 插件，但是如果不先加载图像，它就不会启动......我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:11:47.963

正如我评论你的另一个问题 [Gimp：为什么我不能注册这个？](https://stackoverflow.com/questions/12713399/gimp-why-cant-i-register-this/12719613#comment17177876_12719613)- 问题是您在进行注册调用时传递了“图像类型”参数上的“*”值。

只需放下它，然后传递一个空字符串。

# javascript - 通过 .html() jquery 方法插入时，文本会被打乱

> ID：12732199
> 
> 赞同：0
> 
> 时间：2012-10-04T17:03:58.143
> 
> 标签：javascript, jquery, scramble

在我正在做的网页中，有一个表格，您可以通过单击每一行来修改它。这是通过将每个单元格的内容替换为包含相对值的输入字段来完成的。为了让用户取消所做的更改，我在进行替换之前保存了整个表格行的内容，然后我用它来组成新的 html 字符串以放入表格行中（基本上，我只是把它放在一个函数中call 然后在按下按钮以恢复更改时调用）。如果我尝试通过警报显示它，则字符串看起来很好。但是，萤火虫返回一个错误，因为显然字符串在我通过在 .html 上调用 .html 将其放入页面后被打乱了。我的意思是，而不是

```
<tr><td>somedata</td><td><input type=button onclick=fun('oldTrContent')/></td></tr> 
```

它是

```
<tr><td>somedata</td><td><input type=button oldTrContentNotInOrder') onclick=fun(/></td></tr> 
```

这显然行不通。我尝试在函数中添加一些警报，以查看此行为是否是由某些格式错误引起的，但在调用 .html() 之前一切看起来都很好。我使用的代码是这样的：

```
function mostraModificaCompet(ids, nome){
var id='#'+nome;
var statoPrec=escape($(id).html());
alert(statoPrec);
var d=$(id+" .data").html();
var c=$(id+" .caus span").html();
var de=$(id+" .descr").html();
var pu=$(id+" .prezzou").html();
var q=$(id+" .qta").html();
var pt=$(id+" .prezzot").html();
var iu=$(id+" .ivau").html();
var it=$(id+" .ivat").html();
var t=$(id+" .tot").html();
var r=$(id+" .res").html();
var pr=$(id+" .progr").html();
var str="<td class=data ><input type=text value="+d+" /></td><td class=caus ><select class=selcaus ></select></td><td class=descr ><input type=text value="+de+" />\
</td><td class=prezzou ><input type=text value="+pu+" /></td><td class=qta ><input type=text value="+q+" /></td><td class=prezzot ><input type=text value="+pt+" disabled /></td>\
<td class=ivau ><input type=text value="+iu+" /></td><td class=ivat ><input type=text value="+it+" disabled /></td><td class=tot ><input type=text value="+t+" disabled /></td><td>\
<input type=button value='Conferma' onclick=modificaCompet("+ids+", '"+nome+"') /></td><td><input type=button value=Annulla onclick=ripristinaCompet('"+nome+"', '"+statoPrec+"') /></td>";
alert(str);
$(id).html(str);
} 
```

我保存旧内容的变量是 statoPrec，然后我在编写 str 时使用它（它位于字符串的末尾）。提前感谢任何回答的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:01:34.853

您正在尝试将值设置为无效的 html，`onclick=modificaCompet("+ids+", '"+nome+"')`需要在它周围加上一些引号，所以它是`onclick=\"onclick=modificaCompet("+ids+", '"+nome+"')\"`. 以及您未能引用的任何其他属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:58:32.267

问题似乎是，当最初从 td 单元格中的值开始时，可​​以通过 innerHTML 访问这些值。但是，一旦它们变成输入，它们就是输入的值，而不是输入的 innerHTML。您可能必须创建两个函数，其中一个使用元素的 .html()，另一个查找元素的 .val()。

# php - PHP PDO 和 MYSQL 登录代码失败

> ID：12732201
> 
> 赞同：0
> 
> 时间：2012-10-04T17:04:04.433
> 
> 标签：php, mysql, pdo

这段代码有什么问题？另一种选择是什么？
我没有收到任何错误消息，但每次我输入用户名和密码的组合时，它都会将我引导到登录页面，即使它是正确的....

```
$query = $conn->prepare("SELECT * FROM login WHERE username = :username AND password = :password");
$query->bindParam(":username"  , $username);
$query->bindParam(":password", $password);
$query->execute();
$result = $query->rowCount();

 if($result>0){
     header("location:admin.php");       
 }else{

     header("location:login.php");
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:01:25.270

这可能是由于字符集错误；尝试以下步骤：

1.  将两个文件（sender.hml 和 logger.php）保存为 UTF-8。
2.  添加`<meta charset="utf-8" />`sender.html。
3.  写`$username = utf8_decode($username);`

为了测试它，`print`在你的代码之前写一个：

1.  `print "SELECT * FROM login WHERE username = '$username' AND password = '$password'"`
2.  复制 SQL 并在 phpMyAdmin 或其他 SQL 浏览器中执行。

祝你好运！

# c# - glGenBuffers 和 glGenTextures 总是返回 0

> ID：12732204
> 
> 赞同：0
> 
> 时间：2012-10-04T17:04:18.317
> 
> 标签：c#, opengl

## 设置

我`System.Windows.Forms.Form`用作窗口源。*构造函数：*

```
FormBorderStyle = FormBorderStyle.None;
WindowState = FormWindowState.Maximized; 
```

* * *

*表单加载：*

```
_Device = new Device(this, DeviceConfiguration.SelectConfiguration(Bits.Eight, Bits.Eight, Bits.Eight, Bits.Eight, Bits.Twentyfour, Bits.Eight, true, true), 1024, 768);
Debug.WriteLine(GL.GetString(GL.GL_EXTENSIONS));

base.OnLoad(e); 
```

在加载方法中，选择了设备配置，这实际上是有效的。像这样的电话`GL.GetString(GL.GL_EXTENSIONS)`正在工作。所有 gl-methods 也被加载，因此支持所有使用的方法。

* * *

*表格展示：*

```
Application.Initialize(this);
RenderSettings = new RenderSettings(this);

Debug.WriteLine("After setup render settings: " + GL.GetErrorDescription());

_Textures[0] = Resources.LoadTexture("Resources\\Buttons\\btn_big_bg_normal.dds");
_Textures[1] = Resources.LoadTexture("Resources\\Buttons\\btn_big_bg_normal.dds");

base.OnShown(e);

_IsShown = true; 
```

初始化使用的`Application.Initialize(this)`框架（由我编写）并且还在初始化一个默认着色器，它正在工作，而模型不工作。这会导致稍后渲染失败，因为返回的句柄无效。

## 框架

我有一个自己的 OpenGL 包装器，它包含所有参数的枚举，以启用开发，而无需多次查看 OpenGL 参考。例如方法`glGenBuffers`：

```
[MethodGL]
public delegate void glGenBuffers(Int32 count, ArrayBufferHandle[] buffers); 
```

`ArrayBufferHandle`定义：

```
/// <summary>
/// Represents a handle to a buffer
/// </summary>
[StructLayout(LayoutKind.Explicit, Size = 4)]
[ComVisible(true)]
public struct ArrayBufferHandle
{
    [FieldOffset(0)]
    UInt32 Handle;
    /// <summary>
    /// Determines if the buffer is valid
    /// </summary>
    public Boolean IsValid { get { return Handle > 0; } }
    /// <summary>
    /// Retrieves the default array buffer
    /// <br>which is used to reset bindings</br>
    /// </summary>
    public static ArrayBufferHandle Default { get { return new ArrayBufferHandle(); } }
    /// <summary>
    /// Retrieves the string representation of the current object
    /// </summary>
    /// <returns>The current object represented as string</returns>
    public override String ToString()
    {
        return String.Format("[ArrayBufferHandle Handle:{0} Valid:{1}]", Handle, IsValid);
    }
} 
```

当然，着色器创建工作正常并使用如上所示的类型。

## 结论

对于我所面临的问题，我想我没有太多话要说。`glGenBuffers`并`glGenTextures`返回零，我不知道为什么。该设置看起来像我已经使用过的其他设置。

当然，当不渲染任何模型时，窗口会以蓝色背景显示，并且在使用`glGetError`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:03:46.577

首先：感谢**Mārtiņš Možeiko**带领我走向正确的方向。

事实证明，该方法`void glGenBuffer(Int32 count, UInt32[] buffers)`有效，但该方法`void glGenBuffers(Int32 count, ArrayBufferHandle[] buffers)`无效。两者都有一个 4 字节/元素数组，但 .NET 似乎处理它们不同。解决方案很简单：

```
void glGenBuffers(Int32 count, [Out]ArrayBufferHandle[] buffers) 
```

`Out`向数组添加一个属性。

# drupal - Drupal：自定义表单创建，最佳方法

> ID：12732208
> 
> 赞同：3
> 
> 时间：2012-10-04T17:04:46.897
> 
> 标签：drupal, drupal-7, drupal-modules

我对 Drupal 比较陌生，但一般来说不是 CMS。我正在为客户创建一个网站。最重要的部分是创建一个相当复杂的表单，用户在其中输入要存储在数据库中的各种类型的数据。我认为最好的方法是创建一个自定义模块。是这样吗？如果是这样，有人可以指导我查看有关创建这种性质模块的最佳方法的文档或教程吗？如果不是，我愿意就创建这种形式的最佳方式提出建议，即使它是对内容进行硬编码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T17:13:35.037

Drupal.org 包含有关如何创建模块的详细教程，例如[这个](http://drupal.org/node/1074360)。

Drupal 表单 API 将成为您处理简单数据捕获的朋友：[如何使用表单 API](http://drupal.org/node/1043838)。

根据您的数据捕获需求，[Webform 模块](http://drupal.org/project/webform)可能已经满足您的需求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T17:12:48.327

在 drupal 中有一个 Form API 可以做到这一点，drupal 社区的文档中使用了一个非常好的工作示例，这里是链接：

*   [Drupal 7 表单 API 介绍](http://drupal.org/node/1702548)
*   [Drupal 7 的表单 API 参考](https://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7)

还有一件事永远不要进行硬编码，尝试利用所有可用的 API。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T17:22:06.040

您还没有详细说明将向表单输入数据的用户是谁、表单的复杂性或您将如何处理数据，所以我想向您介绍一些其他选项。

**自定义内容类型**

您可以创建自定义内容类型并分配适当的权限，以便用户可以填写内容创建表单并将其作为节点实体保存在数据库中。Node 是一个核心 Drupal 实体，因此已经具有许多内置功能，用于使用[Views 模块](http://drupal.org/project/views)和权限等进行排序和显示。

但是填写“表格”（即创建节点）的用户必须是注册的 Drupal 用户。

**网络表单模块**

Drupal 有一个[Webforms 模块](http://drupal.org/project/webform)，它允许您创建表单而无需进行任何自定义编码。该模块负责创建数据库表，并且已经具有许多内置功能。

如果您发现创建自己的模块仍然最合适，请参阅其他答案。

# continuous-integration - Jenkins针对不同配置的不同时间表

> ID：12732209
> 
> 赞同：1
> 
> 时间：2012-10-04T17:04:51.223
> 
> 标签：continuous-integration, jenkins

我正在处理一个多配置的 Jenkins 项目。两个配置轴是 Win/Linux 和 32/64 位。我想在版本控制更改时构建主要配置（32 位 Windows），但每周只构建一次其他配置（只是为了确保它们保持合理的最新状态）。

是否可以在不将项目分解为多个单独项目的情况下实现此计划？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:26:21.430

不幸的是，此时没有直接通过 Jenkins AFAIK。每个作业只有一个时间处理程序，多配置是一个作业，它有一个计时器。

有一个 hack，但它会很困难，而且我不确定所需的确切脚本，但如果你可以检查一周中的哪一天，你可以在你的脚本中尝试这样的事情：

```
if (day == Sunday |OR| $NODE_NAME == win32), then:
  <carry out build steps here>
finish 
```

这边走：

*   如果这一天是星期日，则所有步骤都将执行，而与 Node.js 无关。
*   如果节点名是win32，也执行该步骤。
*   但是，如果 day 不是星期日并且 $NODE_NAME 是 win64 或 linux32 或 linux64，则不会执行任何步骤。

请注意，这`$NODE_NAME`是一个标准的 Jenkins 环境变量。但是，**这假定您的构建是通过“执行 Shell”或“执行 Windows 批处理”完成的**

其他人不应该同时建造有什么理由吗？

您可以创建两个作业，一个用于您的主要作业，因此它是一个自由式作业，另一个用作 Win64/Linux 的多配置，并将其保留在单独的每周计时器上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T08:46:59.150

请考虑这一点：

**为什么不每次都构建所有可用的配置**？
- 毕竟，这就是持续集成的全部理念......

可以在短时间内丢弃这些构建的工件，
因此它们不会阻塞您的磁盘，但如果有任何东西破坏了您的构建 - 您会立即知道。

还可以设置从属队列一次运行一个作业，这样构建就不会使构建服务器超载。

另一个解决方案需要：

*   为您的构建提供两个“启动器”
*   所有从站都可用

将**Job_A1**设置为触发**Job_B**（主要的多配置构建过程）的每周调度程序。只要有源代码更改，就将**Job_A2**
设置为运行**Job_B 。** 设置**Job_B**以了解它是由**Job_A1**还是**Job_A2**触发（可以将其名称作为参数传递）， 并且还设置**Job_B**以忽略来自**Job_A2**的调用（“exit 0”），如果当前配置。不同于**Windows-32bit**。

 ******这样，只要有源代码控制更改，所有 4 种配置都会运行，但只有一个会真正构建。

祝你好运！******

# c# - 将存储过程映射到 EF 4 生成的模型中，作为 MVC 应用程序的模型

> ID：12732212
> 
> 赞同：0
> 
> 时间：2012-10-04T17:05:00.593
> 
> 标签：c#, asp.net-mvc, entity-framework, model, asp.net-mvc-4

这是我从数据库中添加了一个 EF 自动生成的类作为模型到我的 mvc 应用程序的东西，除了一件事之外，一切都很好。当我将存储过程和函数导入添加到模型中时，所有内容都按应有的方式添加，但我的存储过程没有智能感知。任何想法？如果我只是将 EF 模型添加到我的解决方案的根目录中，一切正常。但是当我的模型位于我的 MVC 应用程序的 Models 文件夹中时，它似乎不起作用！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:15:50.743

尝试右键单击您的实体 .tt 文件并选择“运行自定义工具”。

# c# - 出现错误 错误：给定的键不在字典中。在生产中

> ID：12732213
> 
> 赞同：0
> 
> 时间：2012-10-04T17:05:06.553
> 
> 标签：c#, asp.net, windows, web-services, iis

我正在使用带有 C# Web 服务的 ASP.Net 4.0。这也利用了一个 C# 库，该库在开发和其他应用程序（Skype bot 和 Windows 窗体）中运行良好

我正在使用 JQuery 通过 JSON 与 Web 服务进行通信。在开发中，这工作正常。在生产中，它部分工作。我可以使用一些命令，但其他命令只会抛出此错误：

```
Error: The given key was not present in the dictionary. 
```

我不确定从哪里开始。我无法单步执行代码，因为它只发生在产品中。我检查了 IIS 日志，每个请求都获得 200 状态，所以它似乎是应用程序本身内部的东西。任何想法从哪里开始？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T17:07:41.250

该错误表明服务器端代码正在尝试使用不在该字典中的键访问字典。

我建议修改代码以对所有字典访问进行错误处理。处理错误时，记录试图从字典中读取的键。

记录异常详细信息时，明智的做法是记录所有可用信息。

```
Exception.ToString() 
```

做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-02T09:45:46.780

您可以从您正在使用的 sqlsrver 队列中删除所有队列消息，

```
declare @c uniqueidentifier
while(1=1)
begin
    select top 1 @c = conversation_handle from dbo.yourqueuenqme
    if (@@ROWCOUNT = 0)
    break
    end conversation @c with cleanup
end 
```

之后它将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T23:18:50.997

问题是我使用 WebClient 调用需要登录的 URL。我使用我的域凭据设置了我的应用程序池，然后我能够在没有提示登录的情况下调用该页面。

一旦调用该页面，我就能够填充一个列表并循环遍历它。上面的错误被抛出，因为我正在循环一个空列表。

# python - python中的继承和类问题

> ID：12732214
> 
> 赞同：0
> 
> 时间：2012-10-04T17:05:10.017
> 
> 标签：python, class

首先，原谅我的英语。

我正在尝试在 python 中执行一个简单的类应用程序。这个概念是这样的。

```
 class Auth:
            def __init__(self, username, password):
                self.username = username
                self.password = password
            def connect(self):
                """here is the code for connecting into X server"""
                pass

    class Manager(Auth):
        """used for search auctions, for example"""
        def __init__(self, username, password):
            Auth.__init__(self, username, password)
        def pile(self):
            y = self.some_search_into_a_server()
            for x in y:
                yield Auction(x)
        def buy(self):
            """buy method for using by auction"""
            pass

    class Auction:
        def __init__(self, auction):
            self.id = auction["id"]
            self.some_data = auction["some_data"] 
```

好吧，这里的重点是我想做的是这样的：

```
manager = Manager('user@example.com', 'a_very_secure_password')
for auction in manager.pile():
    auction.buy() 
```

这里的问题是：我怎样才能实现 Manager 从 Auction 继承并且 Aucion 使用方法 buy？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:29:44.450

如果 X**是**Y ，那么您需要***继承***，例如**狗**是**动物**，或者**贵宾犬**是**狗**

如果 X**有**Y，那么您需要***会员资格***，例如**狗**有**主人**，或者**商店**有**顾客**。

基于拍卖**有**经理这一事实。您可能想要成员资格而不是继承

```
class Auction:
    def __init__(self, manager,auction):
        self.id = auction["id"]
        self.manager = manager
        self.some_data = auction["some_data"]
    def buy(self):
          return self.manager.buy()

class Manager(Auth):
    """used for search auctions, for example"""
    def __init__(self, username, password):
        Auth.__init__(self, username, password)
    def pile(self):
        y = self.some_search_into_a_server()
        for x in y:
            yield Auction(self,x)
    def buy(self):
        """buy method for using by auction"""
        pass

manager = Manager('user@example.com', 'a_very_secure_password')
for auction in manager.pile():
    auction.buy() 
```

# php - kohana 3 图像保存和缩略图

> ID：12732221
> 
> 赞同：0
> 
> 时间：2012-10-04T17:05:49.270
> 
> 标签：php, kohana, image-uploading

嗨，我想将上传的图像保存为 2 个版本（普通和缩略图）

这是我正常使用的代码：

```
$picture = Upload::save($_FILES['picture']);
// Resize, sharpen, and save the image
Image::factory($picture)->resize(200, NULL)->save();
$profile->profile_picture = basename($picture); 
```

这行得通，但我也想为`$profile->profile_picture_thumb`.

我试过用不同的变量名重复上述过程`$picture_thumb = Upload::save($_FILES['picture']);`。但这对我不起作用。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:20:42.877

Upload::save() 返回保存文件的路径，因此只需轻松地从中创建新的 Image 实例并保存较小版本的 Image。就像是：

```
$picture = Upload::save($_FILES['picture']);
// Resize, sharpen, and save the image
$image = Image::factory($picture)->resize(200, NULL);
$image->save();
$profile->profile_picture = basename($picture);

// Save thumbnail
$thumb_path = dirname($image->file).'/thumb_'.basename($image->file);
Image::factory($picture)->resize(100, NULL)->save($thumb_path); 
$profile->profile_picture_thumb = basename($thumb_path); 
```

# c# - 元素中“项目”属性的值“” 是无效的。VS2012

> ID：12732224
> 
> 赞同：12
> 
> 时间：2012-10-04T17:05:56.880
> 
> 标签：c#, visual-studio-2012, csproj

尝试在 Visual Studio 2012 中加载一些项目时出现以下错误：

```
G:\path\project.csproj : error  : The value "" of the "Project" attribute in element <Import> is invalid. Parameter "path" cannot have zero length. 
```

在 svn 结帐后，我在机器上重新开始尝试这个。这些项目可以正确加载到其他机器上。

有人可以帮我解决这个问题吗？谷歌没有给我答案，我希望如此。

**编辑**

这是 csproj 文件的相关部分。

```
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" Condition="Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')" />

  <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
  <Import Project="$(StyleCopTargets)" />

</Project> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T17:31:14.007

你写你从新鲜开始。我怀疑 StyleCop 没有安装，所以别名值被替换为空白，使该字段也为空白。

删除引用或安装 StyleCop。我认为这应该可以解决问题。

编辑：只是为了方便： [http ://stylecop.codeplex.com/](http://stylecop.codeplex.com/)

# macros - 方案/球拍 - 用于更改过程顺序和参数的宏

> ID：12732228
> 
> 赞同：4
> 
> 时间：2012-10-04T17:06:16.557
> 
> 标签：macros, scheme, racket

我想更改以下表达式的语法：

```
(> 2 1) 
```

类似于：

```
(2 greater 1) 
```

我的第一次尝试是以下宏：

```
(define-syntax greater 
  (lambda (x)
    (syntax-case x (greater)
      [(a greater b)
       (syntax (> a b))]))) 
```

使用此宏失败：“语法错误：更大”

我一直在浏览一些 Scheme 文档，但我找不到解决方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T18:37:04.280

在 Racket 中，已经存在允许通用中缀表示法的阅读器功能：在函数或宏名称之前和之后写一个点：`(2 . > . 1)`有点冗长（点必须用空格包围），但我喜欢它并使用它很多。有关更多信息，请参阅[文档](http://docs.racket-lang.org/guide/Pairs__Lists__and_Racket_Syntax.html#%28part._lists-and-syntax%29)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T17:53:39.860

表达式`(2 greater 1)`是一个应用程序。它扩展到`(#%app 2 greater 1)`. 您必须定义自己的版本`#%app`并将其命名为`my-%app`. 如果`greater`存在交换第一个和第二个参数，否则只扩展为标准`#%app`。

要使用您的新应用程序，您必须从定义它的文件（模块）中将其导出，然后将其导入您需要特殊应用程序语法的模块中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T22:51:24.483

您可能认为“卷曲中缀”表示法就是您想要的。只需用 {...} 包围一个列表，您可以按中缀顺序而不是前缀顺序编写列表内容（阅读器对其进行转换）。因此，如果您编写 {x + ,y}，则阅读器会将其映射到 (+ x ,y)。

Curly-infix 在 SRFI-105 中定义：[http ://srfi.schemers.org/srfi-105/](http://srfi.schemers.org/srfi-105/)

我知道当前版本的 GNU guile 至少实现了它。

[SRFI-110 ( http://srfi.schemers.org/srfi-110/](http://srfi.schemers.org/srfi-110/) )的“甜蜜表达”符号建立在 SRFI-105 之上。

# sql - 在 SQL Server 的引号中声明字符串

> ID：12732237
> 
> 赞同：1
> 
> 时间：2012-10-04T17:06:53.713
> 
> 标签：sql, sql-server

我正在尝试运行 SQL 命令，但收到**Not a Valid Identifier**的错误消息。

如果我使用这个命令，

```
EXEC xp_cmdshell N'mkdir C:\Users\PC\Desktop\Backup\1042012'
GO 
```

那么这个命令可以正常工作

但是，如果我使用这个命令

```
DECLARE @CurrentDate varchar(50)
DECLARE @Path varchar(200)
DECLARE @Command varchar(200)

SET @CurrentDate = GETDATE()
SET @Path = N'C:\Users\PC\Desktop\Backup'
SET @Command = N'xp_cmdshell " ' + 'MKDIR' + ' '+ @Path + '\' +  @CurrentDate + '" '

EXEC @Command
GO 
```

我收到了那个错误信息。是否与正确声明字符串有关。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T17:11:39.373

我添加`EXEC`了 unicode 标识符 ( `N`) 和[单引号来代替双引号](https://stackoverflow.com/questions/1586560/how-do-i-escape-a-single-quote-in-sqlserver)。请让我们知道这是如何工作的。

```
DECLARE @CurrentDate varchar(50)
DECLARE @Path varchar(200)
DECLARE @Command varchar(200)

SET @CurrentDate = convert(varchar(30), GETDATE(), 112)
SET @Path = N'C:\Users\PC\Desktop\Backup'
SET @Command = N'EXEC xp_cmdshell N''' + 'MKDIR' + ' '+ @Path + '\' +  @CurrentDate + ''''

EXEC (@Command)
GO 
```

**更新**

测试表明需要将日期格式化为`yyyymmdd`（[其他可用格式](http://msdn.microsoft.com/en-us/library/ms187928.aspx)），并且`EXEC`像往常一样用括号括起来（感谢@Lamak）。这给了我们以下目录，今天：

```
C:\Users\PC\Desktop\Backup\20121004 
```

顺便说一句，我确实推荐这种日期格式，因为它会在您的文件系统中按时间顺序按字母顺序排序，而`mmddyyyy`不会`ddmmyyyy`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T17:18:12.420

我认为 : 不允许在目录名称中，我将其转换为字符串，但它没有时间：

```
DECLARE @CurrentDate varchar(50)
DECLARE @Path varchar(200)
DECLARE @Command varchar(200)

SET @CurrentDate = CONVERT(VARCHAR(20), GETDATE(), 110)
SET @Path = N'C:\Users\PC\Desktop\Backup'
SET @Command = 'MKDIR' + ' '+ @Path + '\' +  @CurrentDate
PRINT @Command
EXEC xp_cmdshell @Command 
```

# .htaccess - Zend 框架：将西里尔 url 路由到静态文件

> ID：12732243
> 
> 赞同：0
> 
> 时间：2012-10-04T17:07:06.367
> 
> 标签：.htaccess, zend-framework

那是我的网址：

> [http://site.com/presentations](http://site.com/presentations) /тест-тест.ppt

演示文稿是公用文件夹中的文件夹，但是当我打开此链接时出现此错误：

> 指定的控制器无效（演示文稿）

那是我的 .htaccess 文件：

```
SetEnv APPLICATION_ENV production

RewriteEngine On
#RewriteBase all4you/public/
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L]
RewriteRule !\.(js|ico|gif|jpg|png|css|swf|html|pps)$ index.php [NC,L]

order allow,deny
allow from all 
```

那是我的谷歌 iframe：

```
<iframe class="school-ppt-material-cont" src="http://docs.google.com/gview?url=<?= $fileSrc ?>&embedded=true" frameborder="0"></iframe> 
```

也就是说`$fileSrc`，但如果演示文稿名称是西里尔字母谷歌查看器无法打开文件，但如果文件名是非西里尔字母（exp.'test'）谷歌查看器可以打开文件：

```
$fileSrc = 'http://mysite/presentations/тест-тест.ppt';
$fileSrc = 'http://mysite/presentations/test-test.ppt'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:38:39.093

调整你的最后一条规则

```
RewriteRule !\.(js|ico|gif|jpg|png|css|swf|html|pps|ppt)$ index.php [NC,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T06:26:35.980

Are you configure mod_rewrite in the right way? Files should not be redirected to the index.php. My example of `.htaccess` file:

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

# jvectormap - jvectormap OnClick 关注欧洲

> ID：12732245
> 
> 赞同：3
> 
> 时间：2012-10-04T17:07:30.343
> 
> 标签：jvectormap

我似乎找不到任何支持他的插件的论坛...

我有一个按钮，我想在点击时关注欧洲。

例如，我可以专注于区域，目前我有

```
 $('#map1').vectorMap('set', 'focus', 'GB'); 
```

我如何改变这一点以专注于欧洲？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T11:46:26.213

如果您使用带有米勒投影的标准地图，它将是：

```
$('#map1').vectorMap('set', 'focus', 4.3, 0.5, 0.3); 
```

其中 4.3 是比例尺，0.5 是水平坐标，0.3 是垂直坐标。您可以调整此值以获得所需的结果。

# php - 使用 PDO 存储 HTML

> ID：12732246
> 
> 赞同：2
> 
> 时间：2012-10-04T17:07:30.250
> 
> 标签：php, pdo, prepared-statement

> **可能重复：**
> [带有 html 内容的 PHP PDO bindParam](https://stackoverflow.com/questions/10942972/php-pdo-bindparam-with-html-content)

我正在使用 PDO 准备好的语句为我的网络应用程序插入/更新一篇新的博客文章。除了文章正文（包含来自所见即所得编辑器的 HTML 标记）之外，所有内容都被输入到数据库中。

假设`$content`包含`<p>This is a test article</p>`。它只是不会使用准备好的语句插入。但是，如果我不使用准备好的语句，它将插入数据。

我该如何解决这个问题？

**这是我的查询：**

```
$SQL = "UPDATE blog_articles SET topic_id = :topic_id, title = :title, ";
$SQL .= "title_slug = :title_slug, description = :description, ";
$SQL .= "keywords = :keywords, content = :content WHERE article_id = :article_id;";
$STH = $DBH->prepare($SQL);

// other binds ...
$STH->bindParam(':content', trim($content));
// other binds ..

$STH->execute(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T17:13:27.213

[这在这里](https://stackoverflow.com/questions/10942972/php-pdo-bindparam-with-html-content)得到了回答：使用

```
$pdo->bindValue(':html', $html, PDO::PARAM_STR); 
```

代替

```
$pdo->bindParam(:html, $html); 
```

# css - 悬停时重新加载背景图像？

> ID：12732253
> 
> 赞同：0
> 
> 时间：2012-10-04T17:08:07.943
> 
> 标签：css

我试图在 :hover 上更改背景颜色，但保持背景图像相同 - 我遇到的问题是每次“第一次”它在页面加载后悬停，背景图像重新加载，使其消失并重新出现一瞬间。当然，之后每隔一次将鼠标悬停在 div 上就可以了，但总是在页面加载后的第一次悬停时，div 决定没有意识到它在悬停时使用相同的确切背景并重新加载相同的图像。

```
 #ask, #drop {
        background: rgba(0,0,0,0.38) url('example.png') no-repeat;
        width: 18px;
        height: 18px;
    }

    #ask:hover, #drop:hover {
        background: rgba(0,0,0,0.32);
    }

    #ask {
        background-position: 1px 1px;    
    }

    #drop {
        background-position: -300px 0px;
    } 
```

请记住，我不确定它是重新加载还是只是浏览器错误或其他问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:09:20.157

`background`当你只想改变时，你正在改变整体`background-color`

用这个：

```
#example:hover {
    background-color: #666;
} 
```

# css - 媒体查询不起作用

> ID：12732255
> 
> 赞同：0
> 
> 时间：2012-10-04T17:08:18.830
> 
> 标签：css, media-queries

我正在尝试使用几个基于窗口大小的样式表（电话或只是非常小的桌面浏览器窗口）。这对两者都不起作用。也就是我只看到 1024+.css 中的样式 有人能帮帮我吗？

```
<!-- small display -->
<link rel="stylesheet" type="text/css" media="only screen and (max-width: 480px), only screen and (max-device-width: 480px)" href="resources/styles/small_device.css" />
<!-- widescreen -->
<link rel="stylesheet" type="text/css" href="resources/styles/1024+.css" /> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:14:27.297

您的代码按预期工作 - 它在小屏幕上加载第一个样式表并**始终**加载，`1024+.css`因此第一个样式表中的规则每次都会被覆盖。

也为大屏幕添加`media`查询限制

# java - 如何更新托管 bean 的属性成员变量？

> ID：12732257
> 
> 赞同：0
> 
> 时间：2012-10-04T17:08:25.993
> 
> 标签：java, jsf, jsf-2

我在托管 bean 中有一个成员变量，该成员变量通过 getter 和 setter 绑定到 XHTML 中的组件。如果我在函数调用中设置成员变量，当这个成员变量的getter被触发时，这个成员变量仍然会保持旧值。我可以知道如何更新这个成员变量，以便组件可以获得最新的更新值吗？

管理 bean：

```
@ManagedBean(name = "myBean")
@SessionScoped    
public class MyBean {
  public boolean show = false;

  /** getter and setter **/

  public void theFunc() {
     this.show = true;
  }
} 
```

XHTML 代码

```
<h:panelGroup id="Panel_1" rendered="#{myBean.show == true}">
   ...
   Some rubbish here
   ...
</h:panelGroup>

<h:panelGroup id="Panel_2">
   <h:commandLink action="#{myBean.doFunc}">
      <f:ajax event="action" render="Panel_1"/>
      <h:outputText value="XX" />
   </h:commandLink>
</h:panelGroup> 
```

在此示例中，`show`即使`theFunc()`已设置为 true，变量也显示为 false。

**2012 年 10 月 6 日更新** 我已删除 commandButton 并替换为 commandLink，我认为它在使用方面应该没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:15:11.383

如果您希望调用它，请更改您的方法**返回类型**和**名称。**

改变这个

```
 public void theFunc() {
     this.show = true;
  } 
```

对此

```
 public String doFunc() {
     this.show = true;
     return null;
  } 
```

否则这个动作不能起作用。

```
 <h:commandLink action="#{myBean.doFunc}"> 
```

然后像这样更新**面板的父级**

```
<h:panelGroup id="parentPanelGroupId">

    <h:panelGroup id="Panel_1" rendered="#{myBean.show}">
        ...
        Some rubbish here
        ...
    </h:panelGroup>

</h:panelGroup>

<h:panelGroup id="Panel_2">
   <h:commandLink action="#{myBean.doFunc}">
      <f:ajax render="parentPanelGroupId"/>
      <h:outputText value="SHOW/HIDE PANEL 1" />
   </h:commandLink>
</h:panelGroup> 
```

**笔记：**

采用

> 渲染=“#{myBean.show}”

代替

> 渲染=“#{myBean.show == true}”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T07:04:21.740

试试这个方法：

```
<h:panelGroup id="toUpdate">

    <h:panelGroup id="Panel_1" rendered="#{myBean.show}">
        ...
    </h:panelGroup>

</h:panelGroup>

<h:commandButton action="#{theBean.doCalculation}">
    <f:ajax render="toUpdate" />
</h:commandButton> 
```

有2点需要注意：

1.  您需要将始终呈现的`<h:panelGroup id="Panel_1">`另一个或其他东西包裹起来。`<h:panelGroup>`否则，如果`show`变量最初是`false`，则 ajax 更新可能无法工作，因为 JSF 渲染器`id="Panel_1"`在您使用`<f:ajax render="Panel_1" />`.
2.  `rendered="#{myBean.show}"`足够好：P。由于`show`是一个布尔变量，因此您不需要`rendered="#{myBean.show == true}"`.

# c# - 如何从 WinRT/Windows 应用商店应用程序发送电子邮件？

> ID：12732263
> 
> 赞同：12
> 
> 时间：2012-10-04T17:09:15.583
> 
> 标签：c#, windows-8, windows-runtime, winrt-xaml, winrt-async

我正在开发一个 Windows 应用商店应用程序（Windows 8）。

我需要根据存储在应用程序数据中的数据和地址发送电子邮件，而无需用户输入数据或地址。

实现它的正确/简单方法是什么？

艾坦B

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-04T17:12:11.643

你可以试试

```
var mailto = new Uri("mailto:?to=recipient@example.com&subject=The subject of an email&body=Hello from a Windows 8 Metro app."); 
await Windows.System.Launcher.LaunchUriAsync(mailto); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-04T19:42:09.020

正确的方法是使用共享。您的应用程序应该创建一个 HTML 文档或文本并共享它。用户将从 Share 魅力中选择 Mail，HTML/Text 将成为电子邮件的正文。

请参阅此处了解更多信息...

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh973055.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh973055.aspx)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-09-03T03:44:31.273

这是用于 mailto: 链接的正确语法（与上面使用 mailto: 的其他示例不同，这是不正确的..）

```
var mailto = new Uri("mailto:yourname@email.com?subject=" + subject + "&body=" + body);
await Launcher.LaunchUriAsync(mailto); 
```

mailto: 方法的问题是如果用户没有与 mailto 关联的客户端程序：什么都不会发生。

最可靠的使用方法是某种 Web 服务或 WCF 服务。在 Windows 8 上使用 Share Charm 虽然被认为是“正确”的方式，但不一定是最好的，因为用户可能仍然没有安装电子邮件客户端，例如，如果他们依赖 gmail.com 接收电子邮件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-01T12:59:25.743

如果您正在开发通用 WinRT Windows Phone 应用程序，您可以使用“Windows.ApplicationModel.Email.EmailMessage”命名空间，因为“Microsoft.Phone.Tasks.EmailComposeTask”命名空间不适用于 WinRT 应用程序。

然后，使用此代码创建并启动新电子邮件。

```
// Create your new email message.
var em = new EmailMessage() ;

// Add as much EmailRecipient in it as you need using the following method.
em.To.Add(new EmailRecipient("yourname@yourdomain.com"));
em.Subject = "Your Subject...";
em.Body = "Your email body...";
// You can add an attachment that way.
//em.Attachments.Add(new EmailAttachment(...);

// Show the email composer.
await EmailManager.ShowComposeNewEmailAsync(em); 
```

我希望它能解决您（或其他开发人员）的问题。

问候。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-04T17:13:55.460

始终可以连接到 SMTP 服务器并发出 HELO、MAIL、RCPT 等命令。当然，您需要连接到 SMTP 服务器。我在公司内部网上使用它来发送电子邮件。

# python - 如何在 Python 中只替换一次正则表达式？

> ID：12732265
> 
> 赞同：4
> 
> 时间：2012-10-04T17:09:21.623
> 
> 标签：python, regex

所以现在，`re.sub`这样做：

```
>>> re.sub("DELETE THIS", "", "I want to DELETE THIS472 go to DON'T DELETE THIS847 the supermarket")
"I want to  go to DON'T  the supermarket" 
```

我希望它只删除“DELETE THISXXX”的第一个实例，其中 XXX 是一个数字，因此结果是

```
"I want to  go to DON'T DELETE THIS847 the supermarket" 
```

XXX 是一个变化的数字，所以我确实需要一个正则表达式。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-04T17:11:21.620

[如文档](http://docs.python.org/library/re.html#re.sub)中所写，`re.sub(pattern, repl, string, count=0, flags=0)`您可以`count`在以下位置指定参数：

```
 re.sub(pattern, repl, string[, count, flags]) 
```

如果您只给出 1 的计数，它只会替换第一个

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T17:14:29.357

来自[http://docs.python.org/library/re#re.sub](http://docs.python.org/library/re#re.sub)：

> 可选参数*count*是要替换的模式出现的最大数量；*count*必须是非负整数。如果省略或为零，将替换所有匹配项。模式的空匹配仅在与前一个匹配不相邻时被替换，因此`sub('x*', '-', 'abc')`返回`'-a-b-c-'`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T17:11:17.413

可选参数 count 是要替换的模式出现的最大数量；count 必须是非负整数。

```
re.sub(pattern, repl, string, count=0, flags=0) 
```

设置 count = 1 以仅替换第一个实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T17:32:27.977

我认为您的措辞“第一个实例”导致其他所有人都朝着 的方向回答`count`，但是如果您的意思是仅当一个短语与您所寻找的短语完全匹配时才想删除它，那么首先您必须定义您的意思通过“短语”，例如非小写字符：

```
DON'T DELETE THIS 
```

在这种情况下，您可以执行以下操作：

```
(?<![^a-z]+)\s+DELETE THIS\s+(?![^a-z]+) 
```

我不确定 Python 是否允许任意长度的负后向断言。如果没有，请删除第一个`+`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T17:12:00.600

您可以`str.replace()`为此使用：

```
In [9]: strs="I want to DELETE THIS go to DON'T DELETE THIS the supermarket"

In [10]: strs.replace("DELETE THIS","",1) # here 1 is the count
Out[10]: "I want to  go to DON'T DELETE THIS the supermarket" 
```

# url-rewriting - ISAPI 重写 - 允许子域仅访问特定文件夹

> ID：12732266
> 
> 赞同：0
> 
> 时间：2012-10-04T17:09:27.503
> 
> 标签：url-rewriting, isapi, isapi-rewrite

ISAPI v3 有没有办法允许子域只访问特定文件夹，而所有其他请求都会重定向到 www？我在这个文件夹下也有一些 url 需要重写。还将有有效 www url 的重写规则。

**允许：**

[http://myaccount.mysite.com/account/](http://myaccount.mysite.com/account/)

[http://myaccount.mysite.com/account/profile/](http://myaccount.mysite.com/account/profile/)

[http://myaccount.mysite.com/account/profile/changeEmail.aspx](http://myaccount.mysite.com/account/profile/changeEmail.aspx)

**允许，但需要重写：**

[http://myaccount.mysite.com/account/edit/123456789.aspx](http://myaccount.mysite.com/account/edit/123456789.aspx)

**这些应重定向到 www：**

[http://myaccount.mysite.com/directory/](http://myaccount.mysite.com/directory/)

[http://myaccount.mysite.com/folder1/](http://myaccount.mysite.com/folder1/)

[http://myaccount.mysite.com/folder1/folder2/](http://myaccount.mysite.com/folder1/folder2/) 等......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T01:33:10.020

尝试使用以下内容：

```
RewriteEngine on
RewriteBase /

RewriteCond %{HTTP:Host} ^myaccount\.mysite\.com$ [NC]
RewriteRule ^account/edit/123456.aspx$ /otherpage [NC,L]

RewriteCond %{HTTP:Host} ^myaccount\.mysite\.com$ [NC]
RewriteRule ^account/.*$ - [NC,L]

RewriteCond %{HTTP:Host} ^myaccount\.mysite\.com$ [NC]
RewriteRule (.*) http://www.mysite.com/$1 [NC,R=301,L] 
```

# winapi - Win32 视觉样式向后兼容？

> ID：12732267
> 
> 赞同：1
> 
> 时间：2012-10-04T17:09:35.663
> 
> 标签：winapi, operating-system, version, platform, visual-styles

当我像这样在我的程序中嵌入视觉样式清单时：

```
// Embed visual style XML manifest
#pragma comment(linker,                           \
    "\"/manifestdependency:type='Win32'"          \
    "   name='Microsoft.Windows.Common-Controls'" \
    "   version='6.0.0.0'"                        \
    "   processorArchitecture='*'"                \
    "   publicKeyToken='6595b64144ccf1df'"        \
    "   language='*'\""                           \
)

// Link common controls library
#pragma comment(lib, "ComCtl32.lib") 
```

这是否意味着我的程序只能在 Windows XP 上运行？或者，如果计算机上没有视觉样式，他们是否只会使用操作系统的默认样式？我问是因为我在使用 Visual Studio 2008 开发的程序中启用了视觉样式，并且我想知道可以运行它的最早版本的 Windows 是什么。我是否应该检查`WINVER`他们是否正在运行支持视觉样式的版本？如果是这样，我应该在预处理器中检查什么版本号。我想知道的另一件事是，如果没有视觉样式，我可以运行程序的最低版本是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T17:28:00.153

> 这是否意味着我的程序只能在 Windows XP 上运行？或者，如果计算机上没有视觉样式，他们是否只会使用操作系统的默认样式？

后者是正确的，[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773175%28v=vs.85%29.aspx#using_manifests)定义了确切的行为（重点是我的）：

> 如果您希望您的应用程序使用视觉样式，您必须添加一个应用程序清单或编译器指令，指示如果 ComCtl32.dll 版本 6**可用，则应使用它**。

同一页中的另一部分描述了在向后兼容性方面应注意的一些事项：[使您的应用程序与 Windows 的早期版本兼容](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773175%28v=vs.85%29.aspx#whistler_windows)。关于视觉风格，它指出：

> 大部分视觉样式体系结构旨在简化您的产品继续在不支持更改控件外观的早期版本的 Windows 上发布。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T17:44:28.417

这不是问题。清单只是告诉 Windows 您需要第 6 版的通用控件 DLL。存储在并行缓存 (c:\windows\winsxs) 中的缓存，而不是存储在 c:\windows\system32 中的旧缓存。并行缓存是 DLL Hell 对策，它可以存储同名的不同版本的 DLL。

清单对早期版本的 Windows 没有影响，这些版本对清单一无所知，因此不知道要查找它们。

# python - “UnboundLocalError：局部变量”但变量是全局变量

> ID：12732269
> 
> 赞同：-4
> 
> 时间：2012-10-04T17:09:38.893
> 
> 标签：python, scope, global-variables

我按照[Python 队列](http://docs.python.org/library/queue.html "Python 队列")页面底部的队列示例进行操作。我想访问工作函数中的一些全局变量，但是，有些全局变量是可访问的，有些则不是。在下面的简单示例中，可以访问“行”和“错误”变量，但随后我得到 UnboundLocalError 进行计数。如果我输入“全局计数”，那么它就可以了。但我不明白为什么其他全局变量可以访问。

```
File "myfile.py", line 184, in dpn_worker
    count += 1
UnboundLocalError: local variable 'count' referenced before assignment 
```

这是我使用的代码示例：

```
dpns = [1,2,3,4]
q = Queue.Queue()
rows = []
errors = []
count = 0

def dpn_worker():
    while True:
        item = q.get()
        rows.append(1)
        errors.append(1)
        count += 1
        q.task_done()

def main():
    for d in dpns:
        q.put(d)

    for i in range(NUM_WORKERS):
        t = threading.Thread(target=dpn_worker)
        t.daemon = True
        t.start()

    q.join() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:11:28.010

在这种情况下，由于 count 是一个整数：-

```
count += 1 
```

相当于

```
count = count + 1 
```

因此，您正在尝试修改全局变量，但实际上是在创建一个局部变量。但是在 RHS 上，您在初始化之前使用了局部变量。

将您的**dpn_worker**修改为： -

```
def dpn_worker():
    global count
    while True:
        item = q.get()
        rows.append(1)
        errors.append(1)
        count += 1
        q.task_done() 
```

# vb.net - 在vb中使用数组而不是数据表编写程序

> ID：12732270
> 
> 赞同：0
> 
> 时间：2012-10-04T17:09:45.250
> 
> 标签：vb.net

我有在 datagridview 中显示有关度数信息的代码。该程序有效，但我刚刚发现我需要使用数组显示此信息。一旦我弄清楚如何在数据表中显示它，这真的很容易，但我需要用另一种方式来做。请给点建议！

```
Dim array As New DataTable
Dim array2 As New DataTable
Dim array3 As New DataTable

Private Sub btnQuit_Click(sender As System.Object, e As System.EventArgs) Handles btnQuit.Click

    Me.Close()

End Sub

Private Sub btnDegrees_Click(sender As System.Object, e As System.EventArgs) Handles btnDegrees.Click

    array.Clear()
    Dim column1 As DataColumn = New DataColumn("Field of Study")
    column1.DataType = System.Type.GetType("System.String")

    Dim column2 As DataColumn = New DataColumn("1981")
    column2.DataType = System.Type.GetType("System.String")

    Dim column3 As DataColumn = New DataColumn("2006")
    column3.DataType = System.Type.GetType("System.String")

    array.Clear()
    array.Columns.Add(column1)
    array.Columns.Add(column2)
    array.Columns.Add(column3)

    array.Rows.Add("Business", "200,521", "318,042")
    array.Rows.Add("Computer and info. science", "15,121", "47,480")
    array.Rows.Add("Education", "108,074", "107,238")
    array.Rows.Add("Engineering", "63,642", "67,045")
    array.Rows.Add("Social sciences and history", "100,513", "161,485")

    Me.dgvStudies.DataSource = array

End Sub

Private Sub btnChanges_Click(sender As System.Object, e As System.EventArgs) Handles btnChanges.Click

    array2.Clear()
    Dim column4 As DataColumn = New DataColumn("Field of Study")
    column4.DataType = System.Type.GetType("System.String")

    Dim column5 As DataColumn = New DataColumn("Change (1981-2006)")
    column5.DataType = System.Type.GetType("System.String")

    array2.Columns.Add(column4)
    array2.Columns.Add(column5)

    ''Display array two containing percentage changes''
    array2.Rows.Add("Computer and info. science", "214.0%")
    array2.Rows.Add("Social sciences and history", "60.7%")
    array2.Rows.Add("Business", "58.6%")
    array2.Rows.Add("Engineering", "5.3%")
    array2.Rows.Add("Education", "-0.8%")

    dgvStudies.DataSource = array2

End Sub

Private Sub btnHistogram_Click(sender As System.Object, e As System.EventArgs) Handles btnHistogram.Click

    array3.Clear()

    Dim column6 As DataColumn = New DataColumn("Field of Study")
    column6.DataType = System.Type.GetType("System.String")

    Dim column7 As DataColumn = New DataColumn("")
    column7.DataType = System.Type.GetType("System.String")

    Dim column8 As DataColumn = New DataColumn("Degrees in 2006")
    column8.DataType = System.Type.GetType("System.String")

    array3.Clear()
    array3.Columns.Add(column6)
    array3.Columns.Add(column7)
    array3.Columns.Add(column8)

    array3.Rows.Add("Computer and info. science", "*****", "47,480")
    array3.Rows.Add("Engineering", "*******", "67,045")
    array3.Rows.Add("Education", "***********", "107,238")
    array3.Rows.Add("Social sciences and history", "****************", "161,485")
    array3.Rows.Add("Business", "********************************", "67,045")

    dgvStudies.DataSource = array3

End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:48:51.637

如果您想使用数组而不是 a，`DataTable`您还需要创建一个与您的 DataTable 结构相对应的对象。这是使用数组和`Degrees`对象的“Degrees implementation”示例。

```
Sub Main
    dim arr = new Degrees() { new Degrees("Business", "200,521", "318,042"),  new Degrees("Computer and info. science", "15,121", "47,480")}
    Me.dgvStudies.DataSource = arr
End Sub

public class Degrees
    public property FieldofStudy As string
    public property Year1986 As string
    public property Year2006 As string

    public sub new(byval fieldofStudy As string, byval year1986 As string, byval year2006 As string)
      Me.FieldofStudy = fieldofStudy
      Me.Year1986 = year1986
      Me.Year2006 = year2006
    end sub
end class 
```

# c# - 右键单击时，上下文菜单出现在空白区域以及 Ultra 网格标题上

> ID：12732274
> 
> 赞同：1
> 
> 时间：2012-10-04T17:09:55.927
> 
> 标签：c#, contextmenu, infragistics, ultrawingrid

右键单击 Ultragrid (Infragistics) 的空白部分或 C# 上下文菜单中的标题出现并且不执行任何操作。当点击落在一行上时，如何只显示上下文菜单？

所以我正在做一个项目，我有一个超网格，我在里面放了一个上下文菜单，当有人在网格中右键单击时，菜单就会出现（删除）。但是右键单击时，上下文菜单会出现在空白区域以及 Ultra 网格标题上，我希望它在单击落在一行上时出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T21:07:24.143

这需要在您的环境中进行测试，但我认为它可以工作。
诀窍在于使用 MouseDown 事件检查鼠标位置下的单元格（如果有），并且仅当我们在测试 IsDataRow 属性的 DataRow 单元格上时才分配 ContextMenu。

```
private void grid_MouseDown(object sender, System.Windows.Forms.MouseEventArgs e)
{
    UltraGridCell currentCell = null;
    grid.ContextMenu = null;

    if (e.Button == MouseButtons.Right)
    {
        Point ulPoint = new Point(e.X, e.Y);
        UIElement el = grid.DisplayLayout.UIElement.ElementFromPoint(ulPoint); 
        if (el != null)
            currentcell = (UltraGridCell)el.GetContext(typeof(UltraGridCell)); 
        if (currentcell != null && currentCell.Row.IsDataRow == true)
        {
            grid.ActiveCell = currentcell;
            grid.ContextMenu = menuPopup;
        }
    }
} 
```

# java - 使用 Bouncy Castle 在 Java 中复制“openssl smime”？

> ID：12732275
> 
> 赞同：3
> 
> 时间：2012-10-04T17:10:01.673
> 
> 标签：java, cryptography, bouncycastle, code-signing-certificate

我手头有问题。我不懂 Java 的同事正在使用 OpenSSL 命令对文件进行签名，如下所示：

```
openssl smime -binary -sign -certfile WWDR.pem -signer passcertificate.pem \
  -inkey passkey.pem -in manifest.json -out signature -outform DER \
  -passin pass:12345 
```

如您所见，此处提供了三个文件给 openssl 命令以生成签名。

现在我们想使用 Java 复制相同的功能，因为我们假设要签名的内容将是动态的，并且本质上是服务器端的。我读到 BouncyCastle 是要走的路。但我不确定如何使用该库。我对密码学技术也不是很熟悉。我无法理解如何使用上述所有三个文件来登录内容`manifest.json`。

如果有人可以指导我找到正确的代码或给我一个开始，我将非常感谢你的努力。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-04-15T13:29:18.473

我还必须在 java 中复制该 openssl 命令，这就是我完成它的方式。无需使用运行时。

```
public byte[] signMobileConfig(byte[] mobileconfig) 
            throws CertificateEncodingException, PEMException, FileNotFoundException, IOException, CertificateException, OperatorCreationException, CMSException {
    Security.addProvider(new BouncyCastleProvider());

    X509CertificateHolder caCertificate = loadCertfile();

    JcaX509CertificateConverter certificateConverter = new JcaX509CertificateConverter();
    X509Certificate serverCertificate = certificateConverter.getCertificate(loadSigner());

    PrivateKeyInfo privateKeyInfo = loadInKey();
    PrivateKey inKey = new JcaPEMKeyConverter().getPrivateKey(privateKeyInfo);
    ContentSigner sha1Signer = new JcaContentSignerBuilder("SHA1withRSA").setProvider("BC").build(inKey);

    CMSSignedDataGenerator generator = new CMSSignedDataGenerator();
    JcaDigestCalculatorProviderBuilder digestProviderBuilder = new JcaDigestCalculatorProviderBuilder().setProvider("BC");
    JcaSignerInfoGeneratorBuilder generatotBuilder = new JcaSignerInfoGeneratorBuilder(digestProviderBuilder.build());

    generator.addSignerInfoGenerator(generatotBuilder.build(sha1Signer, serverCertificate));
    generator.addCertificate(new X509CertificateHolder(serverCertificate.getEncoded()));
    generator.addCertificate(new X509CertificateHolder(caCertificate.getEncoded()));

    CMSProcessableByteArray bytes = new CMSProcessableByteArray(mobileconfig);
    CMSSignedData signedData = generator.generate(bytes, true);

    return signedData.getEncoded();
} 
```

这是我加载文件的方式：

```
public X509CertificateHolder loadSigner() throws FileNotFoundException, IOException {
    InputStream inputStream = externalResourcesFacade.getResourceAsStream("path/to/.crt");
    PEMParser parser = new PEMParser(new InputStreamReader(inputStream));
    return (X509CertificateHolder) parser.readObject();
}

public PrivateKeyInfo loadInKey() throws FileNotFoundException, IOException {
    InputStream inputStream = externalResourcesFacade.getResourceAsStream("path/to/.key");
    PEMParser parser = new PEMParser(new InputStreamReader(inputStream));
    return (PrivateKeyInfo) parser.readObject();
}

public X509CertificateHolder loadCertfile() throws FileNotFoundException, IOException {
    InputStream inputStream = externalResourcesFacade.getResourceAsStream("path/to/.crt");
    PEMParser parser = new PEMParser(new InputStreamReader(inputStream));
    return (X509CertificateHolder) parser.readObject();
} 
```

* * *

这是我的文件映射：

```
myCrtFile.crt -> signerCertHolder
myKeyFile.key -> privateKeyInfo
bundleCertificate.crt -> certificateHolder 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T07:32:17.273

首先，不要因为难以理解 BouncyCastle 而感到难过。这是一个非常有用的 API，但它的文档记录很差。最好的办法是四处搜索可以教您如何使用 API 的示例。

因为我之前没有将 BouncyCastle 用于 SMIME（我主要将它用于 PGP 和/或 JCE），所以对“ `bouncycastle smime example`”的简短搜索让我进入了[这个页面](http://www.docjar.org/docs/api/org/bouncycastle/mail/smime/examples/package-index.html)，特别是[这个例子](http://www.docjar.org/html/api/org/bouncycastle/mail/smime/examples/CreateSignedMail.java.html)。

希望这是一个好的开始，进一步的谷歌搜索将有助于理解正在使用的 API 类。我怀疑仅这个例子就能让你完成 80% 的工作。

* * *

如果对输入文件的用途有任何混淆：

`-certfile WWDR.pem`-*这是在消息中指定的附加证书。签名消息的接收者在验证签名时会考虑此证书。*

`-signer passcertificate.pem`-*这是与您的签名密钥直接对应的证书。*

`-inkey passkey.pem`-*这是您的签名密钥*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-12T22:07:44.733

因此，如果有人想知道我是如何解决上述问题的，那么我就是这样做的：

我使用了 Java 的 Runtime 对象！

```
String openSSLCommand = openssl smime -binary 
-sign -certfile WWDR.pem -signer passcertificate.pem
-inkey passkey.pem -in manifest.json -out signature -outform DER
-passin pass:12345

Process process = Runtime.getRuntime().exec(openSSLCommand); 
```

谢谢大家

# sql - 使用方法语法在 LINQ 中等效的 JOIN 和 LEFT JOIN

> ID：12732277
> 
> 赞同：6
> 
> 时间：2012-10-04T17:10:04.983
> 
> 标签：sql, linq, entity-framework

我正在将 SQL 查询转换为 LINQ，该查询创建具有 1 对 1 映射的左连接，并且它必须采用方法语法。我一直在扯我的头发，试图做到这一点。我可以在 Lambda 语法中做到这一点。下面是我尝试运行的示例查询。它们不是实际的代码。有人会指出我做错了什么吗？

SQL：

```
SELECT item.*, item_status.*
FROM item
LEFT JOIN item_status 
    ON item.ID = item_status.itemID
    AND item_status.FLAGGED = true
WHERE item.published_date > "2008-06-19" 
```

林克：

```
var linq_query = (
    from selected_item in item
    join selected_item_status in item_status
        on selected_item.ID equals item_status.itemID into joined
    from item_status in joined.DefaultIfEmpty()
    where item_status.FLAGGED = true
    select new {selected_item, selected_item_status}).ToList(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T18:40:38.293

`join ... into`变成 a `GroupJoin`，第二个变成`from`a `SelectMany`：

```
var linq_query = Item
    .GroupJoin(
        item_status.Where(x => x.selected_item_status.FLAGGED), // EDIT: Where clause moved here.
        selected_item => selected_item.ID,
        selected_item_status => selected_item_status.itemID,
        (selected_item, joined) => new
        {
            selected_item,
            statuses = joined.DefaultWithEmpty(),
        })
    .SelectMany(x => x.statuses.Select(selected_item_status => new
    {
        x.selected_item,
        selected_item_status,
    }))
    // EDIT: Removed where clause.
    .ToList(); 
```

看起来这`Where`使得左外连接变得不必要，因为无论如何都会过滤掉空状态。

编辑：不，在查看 SQL 时，您的 LINQ 查询似乎有点不正确。它应该是：

```
var linq_query = (
    from selected_item in item
    join selected_item_status
        in (
            from status in item_status
            where status.FLAGGED
            select status)
        on selected_item.ID equals item_status.itemID into joined
    from item_status in joined.DefaultIfEmpty()
    select new {selected_item, selected_item_status}).ToList(); 
```

# windows-8 - 当我使用解决方案配置管理器时，Visual Studio 2012 Premium 崩溃

> ID：12732278
> 
> 赞同：0
> 
> 时间：2012-10-04T17:10:12.900
> 
> 标签：windows-8, visual-studio-2012, configurationmanager

当我使用解决方案配置管理器（或工具栏上的下拉菜单）从调试解决方案配置切换到发布时，Visual Studio 2012 Premium 崩溃。一旦我选择了 Release 配置，我就会看到一个带有进度条的对话框，说明它正在寻找问题的解决方案，几秒钟后对话框关闭 VS 关闭，另一个对话框打开，表明它正在重新启动 Visual工作室。如果我尝试从解决方案配置管理器中创建新配置，我会得到同样的行为；即，只要我保存新配置 VS 就会崩溃。在崩溃期间，我没有在对话框中获得获取崩溃详细信息的选项。

VS2010 和 Win7 中的相同代码不会发生这种情况。

我的解决方法是将调试配置修改为发布所需的配置，然后将其放回调试所需的配置。

VS 2012 安装在 Windows 8 的全新（不是更新）安装上。我已经安装了 Win8 和 VS 的所有最新更新。这是 Visual Studio 样板信息：

微软视觉工作室高级版 2012

版本 11.0.50727.1 RTMREL

微软 .NET 框架

版本 4.5.50709

安装版本：高级

LightSwitch for Visual Studio 2012, Team Explorer for Visual Studio 2012, Visual Basic 2012, Visual C# 2012, Visual C++ 2012, Visual F# 2012, Visual Studio 2012 Code Analysis Spell Checker, NuGet Package Manager 2.0.30717.9005, PreEmptive Analytics Visualizer 1.0, SQL服务器数据工具 11.1.20627.00、Web 开发工具 1.0.30710.0

# asp.net-mvc - 具有不同源和目标类型的 UpdateModel

> ID：12732287
> 
> 赞同：0
> 
> 时间：2012-10-04T17:11:03.403
> 
> 标签：asp.net-mvc

在我的操作中，我使用`InsertPerson`具有以下属性的模型：

```
pulbic class InsertPerson
{
     [Required]
     public string Name{get;set;}
} 
```

我有一个传递给我的存储库的 DTO 模型：

```
public class PersonDto
{
     public int Id{get;set;}
     public string Name{get;set;}
     public string LastName{get;set;}
} 
```

我的行动：

```
[HttpPost]
public ActionResult Create(InsertPerson insertPerson)
{
     if(ModelState.IsValid){
           var personDto = new PersonDto();

           UpdateModel(personDto)
           //UpdateModel(personDto, "insertPerson") I've tried this too

     }

} 
```

为什么它不起作用（在 UpdateModel 之后所有属性仍然为空）？

有没有办法更新我的`personDto`使用`UpdateModel`？

我知道 AutoMapper，但我认为在控制器中使用它很无聊。

* * *

我的观点：

```
@model Help_Desk.ViewModel.InsertPersonViewModel

@using (Html.BeginForm())
{
    @Html.TextBoxFor(m => m.InsertPerson.Name)

    <button type="submit">Save</button>
} 
```

和我的视图模型：

```
public class InsertPersonViewModel
{
    public InsertPerson InsertPerson{ get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:44:54.660

好的，现在我们看到了问题所在。缺少的信息是您正在使用视图模型，并且视图模型创建了一个必须在 UpdateModel 中说明的“容器”。

发生的事情是 UpdateModel 正试图从字面上更新您的 personDto 对象中的“InsertPerson.Name”。因为那不存在，所以它不起作用。

您可以通过指定来解决此问题`UpdateModel(personDto, "InsertPerson")`

# javascript - 使用带有 $.ajax() 内容的 swipe.js

> ID：12732292
> 
> 赞同：0
> 
> 时间：2012-10-04T17:11:21.917
> 
> 标签：javascript, jquery, ajax, swipe, getscript

我正在使用[Brad Birdsall 的 Swipe.js](https://github.com/bradbirdsall/Swipe)插件作为我当前移动项目中滑块的触摸友好、与库无关的插件。当我在页面加载时填充滑块时，一切正常。`$.ajax()`但是，如果我尝试通过单击填充滑块，滑块将接收所有幻灯片，但不响应触摸事件或与滑块相关的任何方法。

一般滑块 HTML 结构如下所示：

```
<div id="slider" class="swipe">
  <ul>
    <li style='display:block;'>
      <img src="/someImageUrl.jpg" />
    </li>
    <li style='display:none;'>
      <img src="/someImageUrl.jpg" />
    </li>
  </ul>
</div><!-- .swipe -->
<nav>
  <a href="#" class="prev" onclick="slider.prev();return false;">PREV</a>
  <a href="#" class="next" onclick="slider.next();return false;">NEXT</a>
</nav> 
```

我正在使用`$.ajax()`响应来填充`<li><img src="..." /></li>`我的文档中的单击事件处理程序。

这是我的 JS：

```
$.ajax({
  url: "process.inc.php?vehicleId=" + vehicleId,
  type: "GET",
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: function (data) {
    var swipeSlides = "";
    for (i = 0 ; i < data.length; i++) {
      var photoUrl = data[i].photoUrl;
      var photoArray = photoUrl.split("|");

      if (photoArray.length <= 1) {
        list += "<img src="+photoArray[i]+" />"
      } else {
        for (i = 0; i < photoArray.length; i++) {
          swipeSlides += "<li><img src='"+photoArray[i]+"' /></li>"
        }
        var prevNext = "<nav><a href=\"#\" class=\"prev\" onclick=\"slider.prev();return false;\">PREV</a><a href=\"#\" class=\"next\" onclick=\"slider.next();return false;\">NEXT</a></nav>"
        var sliderElement = $(self).parent().find("#data #slider ul");
        sliderElement.find("li, nav").remove();
        sliderElement.append(swipeSlides, prevNext);      
        $.getScript('../assets/js/swipe.js');
        var slider = new Swipe(
          document.getElementById('slider')
        );            
      };
    };

  } // end success function
}); // end AJAX 
```

这将成功地用所有必要的内容填充我的页面，但是当我单击上一个或下一个 putton 之一时，我在控制台中收到此错误：

`Uncaught TypeError: Object #<HTMLCollection> has no method 'next'`

这告诉我我的脚本没有正确加载到页面中，或者我的滑块没有在适当的时间实例化。

我试过在`$.getScript()`这样的方法中执行我的代码：

```
$.getScript('../assets/js/swipe.js', function(data, textStatus, jqxhr) {
  for (i = 0; i < photoArray.length; i++) {
    swipeSlides += "<li><img src='"+photoArray[i]+"' /></li>"
  }   
  var prevNext = "<nav><a href=\"#\" class=\"prev\" onclick=\"slider.prev();return false;\">PREV</a><a href=\"#\" class=\"next\" onclick=\"slider.next();return false;\">NEXT</a></nav>"
  var sliderElement = $(self).parent().find("#data #slider ul");
  sliderElement.find("li, nav").remove();
  sliderElement.append(swipeSlides, prevNext);  
  var slider = new Swipe(
    document.getElementById('slider')
  ); 
}); 
```

或者甚至只是在我的 jQuery 脚本执行之前使用一个很好的老式`<script src="/assets/js/swipe.js"></script>`，我一直得到同样的错误。

如果有人有任何建议，我将永远感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:28:13.063

我解决了这个问题。

为了识别 Swipe 元素的实例化，我需要`$.globalEval()`在函数内部使用`$.getScript()`。

这是我的工作代码：

```
$.ajax({
  url: "process.inc.php?vehicleId=" + vehicleId,
  type: "GET",
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: function (data) {
    var list = "";
    for (i = 0 ; i < data.length; i++) {
      var photoUrl = data[i].photoUrl;
      var photoArray = photoUrl.split("|");

      if (photoArray.length === 1) {
        list += "<img class='noPhoto' src="+photoArray[i]+" />";

        var parent = $(self).parent().find("#data");
        parent.find("table, .noPhoto").remove();
        parent.append(list);

      } else { 

        list += "<div id=\"slider\" class=\"swipe\"><ul>";

        for (i = 0; i < photoArray.length; i++) {
          list += "<li><img src='"+photoArray[i]+"' /></li>"
        }   
        list += "</ul><nav><a href=\"#\" class=\"prev\" onclick=\"slider.prev();return false;\">PREV</a><a href=\"#\" class=\"next\" onclick=\"slider.next();return false;\">NEXT</a></nav></div>";
        var parent = $(self).parent().find("#data");

        parent.find("table, div").remove();
        parent.append(list); 

        $.getScript("../assets/js/swipe.js", function(data, textStatus, jqxhr) {
          $.globalEval("var slider = new Swipe(document.getElementById('slider'));") 
        });   
      };
    };
  } // end success function
}); // end AJAX 
```

希望这可以帮助其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:14:32.660

为什么首先使用 getScript？将其附加到您的其他 javascript 文件（在您的 javascript 文件之前），然后 new Swipe() 应该可以工作。

此外，如果您想稍后调用 Swipe 对象的函数，则应在 ajax 函数之外声明 var。例子：

```
var mySwipe;
document.ready(function(){
  //...
});

function pullFromAjaxFunction() {
  //... do some more stuff
  mySwipe = new Swipe(...)
} 
```

# java - 在 Java 主方法中获取资源

> ID：12732297
> 
> 赞同：3
> 
> 时间：2012-10-04T17:11:27.193
> 
> 标签：java, resources, filenotfoundexception

我试图通过调用`MainClass.class.getResource("/Resources/file.extension")`并将其传递给 File 的构造函数来打开我的 Java 应用程序中的资源`getPath()`。接下来，当我用 初始化一个 new`FileInputStream`时`File`，我得到一个`FileNotFoundException`. 完整的堆栈跟踪如下所示。

```
java.io.FileNotFoundException: E:\user\Documents\NetBeansProjects\Project name\build\classes\Resources\file.csv (The system cannot find the path specified)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:138)
    at my.secret.project.MainClass.main(MainClass.java:27) 
```

这是我的代码。

```
File file = new File(MainClass.class.getResource("/Resources/file.extension").getPath());

...

InputStream in = new FileInputStream(file); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T17:13:31.373

您的整个代码可以替换为简单的：

```
InputStream in = MainClass.class.getResourceAsStream("/Resources/file.extension"); 
```

无需使用`File`. 事实上，您的 CLASSPATH 上的文件可能指向 JAR/WAR 中的某个位置，这肯定是行不通的。有一个战利品[`Class.getResourceAsStream()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResourceAsStream%28java.lang.String%29)的细节。

# javascript - Javascript 中的 formatMoney 函数不起作用

> ID：12732298
> 
> 赞同：0
> 
> 时间：2012-10-04T17:11:35.213
> 
> 标签：javascript, numbers, format

我需要一个可以将数字 10000 转换为这个数字的函数：10.000。

所以我尝试了以下方法：

```
function formatMoney(money){
    var value = money.toString();
    var l = value.length;
    var new_value = 0;
    new_value = new_value.toString();
    if(l > 3){
        var moneyarray = value.split('');
        var u = 0;
        for(i = l;i >= 0;i--){
            if(u > 3){
                u = 0;
                new_value = "."+new_value;
            }
            new_value = moneyarray[i]+new_value;
            u++;
        }
    }
    return new_value;
} 
```

然后调用这个：

```
formatMoney("10000"); 
```

但结果是

> 10.000未定义0"

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T17:17:49.093

您将索引计数器分配给字符串的长度；

```
var l = value.length;
...
for(i = l;i >= 0;i--){ 
```

向下计数从长度索引开始，因为数组是从零开始的，所以不存在。改为预先减去；

```
for(i = l;i >= 0;--i){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:25:28.797

编辑：忽略这一点，我没有对这个问题给予足够的重视。

如果您要做的只是取 4 位或更大的数字，并在右边的三位数字中添加一个点，您可以试一试：

```
function formatMoney(money) {
    var moneyString = money.toString();
    var moneyLength = moneyString.length;

    if(moneyLength < 4) {
        return 0;
    }

    var dotIndex = moneyLength - 3;
    return moneyString.substr(0, dotIndex) + "." + moneyString.substr(dotIndex);
} 
```

此外，在帖子中格式化您的代码也是一件好事。全部缩进四个空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T17:26:14.267

```
function formatMoney(money){
    var value = money.toString();
    var l = value.length;
    var new_value = 0;
    new_value = new_value.toString();
    if(l > 3){
        var moneyarray = value.split('');
        for(var i = l-1;i >= 0;i--){
            if((l-i)%3 === 0){
                new_value = "."+new_value;
            }
            new_value = moneyarray[i]+new_value;
        }
    } else {
        new_value = value;
    }
    return new_value;
} 
```

有几件事：

1.  你用错误的索引倒计时（你从 l 开始，而不是 l-1）
2.  您没有处理任何小于 1000 的值
3.  您不需要使用计数器变量`u`，您只需使用模数学来跟踪三分之二。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T17:29:30.400

我剪掉了一些部分：

```
function formatMoney(money) {
    var value = money.toString();
    var l = value.length;
    var new_value = "";
    if (l > 3) {
        var u = 0;
        for (i = l-1;i >= 0;i--) {
            if (u == 3) {
                u = 0;
                new_value = "." + new_value;
            }
            new_value = value[i]+new_value;
            u++;
        }
    }
    return new_value;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T17:41:00.260

你可以这样做：

```
function money(m) {
  m = m.toString().split('');
  for (var i = m.length - 3; i > 0; i -= 3)
      m.splice(i,0,".");
 return m.join('');
}

 console.log(money(1000000)); // "1.000.000 
```

看到这个[JsBin](http://jsbin.com/ezofob/1/edit)

# java - 在 Android 中访问寻呼机适配器类中的活动类变量时出现问题

> ID：12732301
> 
> 赞同：0
> 
> 时间：2012-10-04T17:11:50.677
> 
> 标签：java, android, android-fragments, android-fragmentactivity

我在这样的片段活动类中有一个哈希图数组列表。这是在 OnCreate 方法中。

```
 try {
       pp = new Parser(getQuery());
       productData = pp.getData(asynctask, getQuery());
       Log.v("data size:", ""+productData.size()+"");
    } catch (URISyntaxException e) {
    e.printStackTrace();
        } 
    public ArrayList<HashMap<String, String>> getProductData()
      {
      return this.productData;
      } 
```

在这里它工作正常并且数据加载正确。并且变量 productData 被声明为 public。

这是我的片段适配器类：

```
 public class ProductViewPagerAdapter extends FragmentPagerAdapter {
      ProductViewActivity productViewActivity = new ProductViewActivity();;
        public ProductViewPagerAdapter(FragmentManager fm) {
    super(fm);
    }

   @Override
    public Fragment getItem(int i) {
        int temp = productViewActivity.getProductData().size();
        Log.v("size:",""+temp+""); 
        Fragment fragment = new ProductViewFragment();
        Bundle args = new Bundle();
        args.putInt(ProductViewFragment.ARG_SECTION_NUMBER, i + 1);
        fragment.setArguments(args);
        return fragment;
       } 
```

这里的大小为 0。这最终导致 Null 指针异常。这里的问题在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:31:13.823

那是你的问题：

ProductViewActivity productViewActivity = new ProductViewActivity(); 您需要`instance`在 Activity 的构造函数中传递`ProductViewPagerAdapter`

```
public ProductViewPagerAdapter(FragmentManager fm, ProductViewPagerAdapter activity) {
    super(fm);
    mActivity = activity;
    } 
```

或使用 setter 函数显式设置它。

```
public void setActivity( ProductViewPagerAdapter activity) {
        mActivity = activity;
        } 
```

然后改变

```
int temp = productViewActivity.getProductData().size(); 
```

到：

```
int temp = mActivity.getProductData().size(); 
```

希望这可以帮助

# javascript - 提交对 JSGrid 控件的更改而不写入底层数据库

> ID：12732302
> 
> 赞同：2
> 
> 时间：2012-10-04T17:11:51.390
> 
> 标签：javascript, sharepoint-2010, ms-project-server-2010

我有一个 JSGrid 控件，用于显示 MS Project 数据库中的时间表数据。我想在网格的每一列底部添加一个“总计”行，该行在客户端实时更新，不需要返回数据库。

我完成了初步实施，但我遇到了一个问题，但由于 JSGrid 上缺少文档，我找不到解决方案。我目前正在使用 javascript 中的以下方法写入单元格：

```
 cell = GetRightPaneCell(records[records.length - 1].fieldRawDataMap.Key, fieldKey);
        //Update the total.  
        if (cell != null) {
            cell.innerText = totalHours;
        } 
```

GetRightPaneCell(recordKey,fieldKey) 获取一个特定的单元格，然后我使用单元格的 innerText 属性写入一个总值（我之前计算过的）。

我遇到的问题是在以下情况下遇到的：

```
 -I set the cell.innerText attribute
    -I scroll on the JSGrid such that the modified cell is no longer on the screen 
    -I scroll back to view the cell
    -The cell's value has been reset to the original value of the cell before I made the change. 
```

我正在尝试查找是否缺少需要以某种方式将更改“提交”到 JSGridControl 的步骤，或者我是否使用错误的方法来更改单元格的值？

谢谢。

# php - Wordpress 帖子不拉内容

> ID：12732307
> 
> 赞同：0
> 
> 时间：2012-10-04T17:12:24.617
> 
> 标签：php, wordpress, post

这是我的代码（如下）我试图仅从类别 id 4 中提取帖子，并且它正在工作，但是它没有提取帖子内容。它正在显示其他所有内容。

谁能帮我这个？

```
<?php  get_header(); ?> 
<div id="content" class="fixed">
<?php
    echo '<div class="row fixed">';
        echo '<div class="col580 no-print">';

        global $post;
        $myposts = get_posts('category=4');
foreach($myposts as $post) :
?>
  <div class="post-item">
  <?php

    $src = null;
    $count = 0;

    $readmorelabel = get_option(EWF_SETUP_THNAME."_blog_read_more", __('&#8212; Read More', EWF_SETUP_THEME_DOMAIN));                   

        $count++;

        //## Get post classes
        //##
        $post_class = get_post_class();
        $post_class_fin = null;

        foreach($post_class as $key=> $ctclass){
            $post_class_fin.= ' '.$ctclass;
        }

        //## Get post categories
        //##
         get_the_category( $post->ID );

         $post_categories = null;
         foreach((get_the_category( $post->ID )) as $category) { 
            if ($post_categories == null){
                $post_categories.= '<a href="'.get_category_link( $category->term_id ).'" >'.$category->cat_name.'</a>';
            }else{
                $post_categories.= ', <a href="'.get_category_link( $category->term_id ).'" >'.$category->cat_name.'</a>';
            }
         }

        //## Get post featured image
        //##
        $image_id = get_post_thumbnail_id($post->ID);  
        $image_url = wp_get_attachment_image_src($image_id,'blog-featured-image');  

        $src .= '<div class="blog-post '.$post_class_fin.'">';

            $src .= '<div class="blog-post-date">'.get_the_time('d').' <span>'.get_the_time('M Y').'</span></div>' ;
            $src .= '<h3 class="blog-post-title"><a href="' . get_permalink() . '">'.get_the_title($post->ID).'</a></h3>' ;

            $src .= '<ul class="blog-post-info fixed">
                        <li class="categories">'.$post_categories.'</li>

                        <li class="comments"><a href="'.get_permalink().'#comments">'.get_comments_number().' '.__('Comments', EWF_SETUP_THEME_DOMAIN).'</a></li>
                     </ul>';

            if ($image_id){
                $src .= '<div><a href="'.get_permalink().'"><img class="blog-post-thumb" src="'.$image_url[0].'" width="480" height="200" alt="" /></a></div>';
            }

            global $more;
            $more = false;          
            $src .= '<p>'.do_shortcode(get_the_content('&nbsp;')).'</p>';   

            $more = true;

            $src .= '<div class="fixed"><p class="blog-post-readmore"><a href="'.get_permalink().'">'.$readmorelabel.'</a></p></div>';

            if ($wp_query_blog->post_count != $count ){
                $src .= '<div class="hr"></div>'; 
            } 

        $src .= '</div>';  

    if ($wp_query->found_posts > $wp_query->query_vars['posts_per_page']){
        $src .= ewf_sc_blog_navigation_steps($wp_query->query_vars['posts_per_page'], $wp_query);
        }

    echo $src;

?>

  </div>

<?php comments_template(); ?>
<?php endforeach; wp_reset_postdata(); 

        echo '</div>';

        echo '<div class="col280 last">';
            if ( !function_exists('dynamic_sidebar')  || !dynamic_sidebar('sidebar-page') );
        echo '</div>';

    echo '</div>'; 

?>

</div>

<?php   get_footer();  ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T11:20:08.613

您正在使用 get_posts()，因此您可以使用 post_content 轻松获取帖子内容。

我看到你用的是这个

```
global $post;
$myposts = get_posts('category=4');
foreach($myposts as $post) : 
```

请避免将全局变量用作局部变量，这样做可能会更改其值，并且以后可能会遇到一些问题，而是执行以下操作

```
global $post;
$myposts = get_posts('category=4');
foreach($myposts as $mypost) : 
```

在此之后，您可以轻松获取 for each 循环中每个帖子的详细信息，例如

```
global $post;
$myposts = get_posts('category=4');
foreach($myposts as $mypost) :
  echo $mypost->post_title; // This gives you the post title
  echo $mypost->post_content; // This gives you the post content
endforeach; 
```

您可以尝试从上面获取参考并尝试使用您的代码。

基线：如果您使用 get_posts() 您可以从 $variable->post_content 获取帖子的内容；

希望能帮助到你！！！

# java - 将包含小数的字符串转换为 Long

> ID：12732309
> 
> 赞同：23
> 
> 时间：2012-10-04T17:12:44.630
> 
> 标签：java

我有以下示例（[指向 ideone 的链接](http://ideone.com/qh3KB)）。

```
long lDurationMillis =  0;
lDurationMillis = Long.parseLong("30000.1");
System.out.print("Play Duration:" + lDurationMillis); 
```

它抛出一个异常：

```
Exception in thread "main" java.lang.NumberFormatException: For input string: "30000.1"
at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)
at java.lang.Long.parseLong(Long.java:419)
at java.lang.Long.parseLong(Long.java:468)
at Main.main(Main.java:9) 
```

但为什么它不允许我直接将该数字转换为字符串？我可以将数字转换为整数，而不是转换为双精度。但是还有其他方法吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-04T17:15:00.310

该值`30000.1`是无效的长值。您可以先解析双精度值：

```
lDurationMillis = (long)Double.parseDouble("30000.1"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-04T17:21:26.197

在这种情况下，您可以使用 BigDecimal：

```
BigDecimal bd = new BigDecimal("30000.1");
long l = bd.setScale(0, BigDecimal.ROUND_HALF_UP).longValue();
System.out.println(l); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-04T17:23:08.617

标题说将字符串转换为长，第一个问题是关于将数字转换为字符串，下一个关于将数字转换为整数到字符串的语句。我很困惑。

但是对于与浮点有关的任何事情，我必须向您指出强制性参考[What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

在 java 中，`int`并且`long`没有小数部分，因此`3000.1`无法将类似字符串的字符串转换为其中之一。它可以转换为`float`or`double`但是如果您阅读了上面的文章，您会意识到覆盖可能是有损的，即如果您可以将其转换`double`回 a`String`您可能无法获得原始版本`3000.1`。对于关闭的适当定义，这将是接近的东西，但可能不一样。

如果您想使用精确的精度，那么[BigDecimal](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigDecimal.html)是您的朋友。它会比数字类型慢得多，但它会很精确。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-04T17:13:35.473

因为 long 不能有小数部分，您可以将其转换为 double 然后将其转换为 long 忽略小数部分

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-02T11:51:57.477

您可以按如下方式进行 NumberFormat 处理：

```
long lDurationMillis =  0;
        try{
            NumberFormat nf = NumberFormat.getInstance();
            lDurationMillis = nf.parse("30000.1").longValue();
            System.out.print("Play Duration:" + lDurationMillis);
        }catch(ParseException e)
        {
            e.printStackTrace();
        } 
```

输出：

```
Play Duration:30000 
```

# php - 正则表达式 PCRE 表达式

> ID：12732313
> 
> 赞同：1
> 
> 时间：2012-10-04T17:13:00.777
> 
> 标签：php, regex, pcre

我有一段 html 代码，如下所示：

```
<td width="24%"><b>Something</b></td>
          <td width="1%"></td>
          <td width="46%" align="center">
           <p><b>
    needed
  value</b></p>
          </td>
          <td width="28%" align="center">
            &nbsp;</td>
        </tr> 
```

什么是一个好的正则表达式模式来提取单词之后的第一个文本节点（不是标签，而是里面的文本）`Something`我的意思是我想提取

```
 needed
  value 
```

仅此而已。

我无法在 php 中找出有效的正则表达式模式。

**编辑：** 我不是在解析整个 html 文档，而是解析其中的几行，所以我想要的只是使用 Regex 而不是 HTML 解析器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T17:33:32.963

忽略使用正则表达式解析 HTML 的潜在问题，以下模式应与您的示例代码匹配：

```
Something(?:(?:<[^>]+>)|\s)*([\w\s*]+) 
```

这将匹配`Something`，后跟任何 HTML 标记列表（或空格）并匹配下一个文本块`\w`（包括空格）。

您可以在 PHP 的`preg_match()`方法中使用它，如下所示：

```
if (preg_match('/Something(?:(?:<[^>]+>)|\s)*([\w\s*]+)/', $inputString, $match)) {
    $matchedValue = $match[1];
    // do whatever you need
} 
```

正则表达式解释：

```
Something         # has to start with 'Something'
(?:               # non-matching group
    (?:           # non-matching group
        <[^>]+>   # any HTML tags, <...>
    )
    | \s          # OR whitespace
)*                # this group can match 0+ times
(
    [\w\s*]+      # any non-HTML words (with/without whitespace)
) 
```

# php - 如何从数据库中获取值以在 PHP 中进行验证？

> ID：12732316
> 
> 赞同：1
> 
> 时间：2012-10-04T17:13:09.670
> 
> 标签：php, database, validation

我的数据库中有一个包含 1 或 2 的用户级别字段。我想要做的是获取包含我输入的包含级别 2 的用户名的行。这是我的代码：

```
<?php

    $con=mysql_connect("localhost","root","");
    mysql_select_db("nnx",$con);

    $tbl=mysql_query("SELECT * FROM order");
    while($row=mysql_fetch_array($tbl))
    {

       if (($row['level']=='2')&&($row['username']==$_POST['user']))
       {
            echo $row['username']."".$row['garlique']."".$row['rightcee'];
        echo $row['oleia']."<br />";
       }
       else
       {
        echo $row['username']."".$row['garlique']."".$row['rightcee'];
        echo .$row['oleia']."<br />";
       }
        }
?> 
```

当我尝试对其进行测试时，显示错误`"unexpected $end"`。我认为我的代码中的错误是验证如果.. `($row['level']=='2')`.. 我不知道如何解决此类问题。我是php的初学者，如果你能帮助我，我将非常感激。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:25:52.293

用关闭你的`while`循环`}`。语法错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T17:26:13.330

我想提个建议。如前所述，如果您的目标是检索给定用户名的第 2 级行，则您的查询可以完成所有工作：

```
// Put the username in a variable, making sure it's safe for SQL by escaping it
$username = mysql_real_escape_string($_POST['user']);

// Grab the row from the table, expecting only a single result
$tbl = mysql_query("SELECT * FROM `order` WHERE `username` = '$username' AND `level` = '2' LIMIT 1");

// Set your row variables
$rows = mysql_fetch_array($tbl);
$row  = $rows[0];

if (!$row)
{
    // Either not a valid username or the username isn't level 2
}
else
{
    // Valid row
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T17:26:29.820

你忘了最后一个}

```
<?php
    $con=mysql_connect("localhost","root","");
    mysql_select_db("nnx",$con);

    $tbl=mysql_query("SELECT * FROM order");
    while($row=mysql_fetch_array($tbl))
    {

        if (($row['level']=='2')&&($row['username']==$_POST['user']))
        {
            echo $row['username']."".$row['garlique']."".$row['rightcee']."".$row['oleia'];
            echo "<br />";
        } else {
            echo $row['username']."".$row['garlique']."".$row['rightcee']."".$row['oleia'];
            echo "<br />";
        }
    } // PAY ATTENTION TO THIS!!
?> 
```

# eclipse - 如何告诉tomcat（在eclipse中）使日志文件成为滚动日志文件？

> ID：12732323
> 
> 赞同：0
> 
> 时间：2012-10-04T17:13:28.890
> 
> 标签：eclipse, tomcat, logging

关于设置tomcat（在eclipse中）将日志文件写入磁盘有一个很好的问题/答案（参见@codesta的回答）： [我在哪里可以查看Eclipse中的Tomcat日志文件？](https://stackoverflow.com/questions/2233053/where-can-i-view-tomcat-log-files-in-eclipse)

通过 Eclipse 中的编辑启动配置属性向导，我可以指定将日志写入哪个文件。但是，由于它是单个文件，因此每次服务器重新启动时都会被覆盖。我已经可以通过 Eclipse 中的控制台访问当前日志，但是有没有办法让它成为一个滚动文件，以便我可以拥有历史记录？

我只在文件路径中指定了一个目录，但没有写出任何日志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:32:34.953

按照说明使用 log4j 进行 Tomcat 的内部日志记录：

[http://tomcat.apache.org/tomcat-6.0-doc/logging.html#Using_Log4j](http://tomcat.apache.org/tomcat-6.0-doc/logging.html#Using_Log4j)

您需要的 tomcat-juli 罐子可以在这里找到：

[http://apache.osuosl.org/tomcat/tomcat-6/v6.0.35/bin/extras/](http://apache.osuosl.org/tomcat/tomcat-6/v6.0.35/bin/extras/)

替换您正在使用的任何版本的 Tomcat。用于库的 CATALINA_HOME 将位于安装 Tomcat 的任何位置，但配置文件的 CATALINA_HOME 可能是：

workspace.metadata.plugins\org.eclipse.wst.server.core\tmp0

# java - 如何从 JTable 中获取多项选择的值

> ID：12732329
> 
> 赞同：5
> 
> 时间：2012-10-04T17:13:44.013
> 
> 标签：java, swing, jtable, listselectionlistener

有人可以提供一个示例代码或至少一种我可以用来获取 JTable 中多个选择的字符串值的方法吗？我在网上搜索，但只找到了如何从单个选择中获取值的示例。基于此，我尝试使用循环自己实现代码，但它在我的脸上爆炸了。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T17:16:50.137

JTable 有一个方法：

```
 int[] selection = table.getSelectedRows(); 
```

当然，此方法返回所选行的索引。您可以使用这些索引从表模型中获取所需的值。

# ms-access-2003 - 我可以对从列表框中选择的值执行计数不同的查询吗？

> ID：12732332
> 
> 赞同：0
> 
> 时间：2012-10-04T17:13:58.687
> 
> 标签：ms-access-2003

我有一个选择不同的查询，可以在列表框中的选定字段上找到。但是，我希望它是一个不同的计数，我似乎无法正确编写代码。下面是我选择不同的工作代码。在此先感谢您为我搜索计数不同问题提供的任何帮助，但我没有看到任何特定于列表框选择的内容。

```
Private Sub CmdDistinctVal_Click()
Dim cn1 As ADODB.Connection
Dim rs1 As New ADODB.Recordset
Dim cmd1 As New ADODB.Command
Dim varItem As Variant
Dim aFields() As aArray
Dim NumRows As Integer
Dim NumFields As Integer
Dim colcount As Integer
Dim colwidths As String
Dim strRow As String
Dim cnt1 As Integer
Dim cnt2 As Integer

'On Error GoTo Err_ CmdDistinctVal_Click

'cmd1.ActiveConnection = CurrentProject.Connection

Me.DistinctResultsFldVal.RowSource = ""

ReDim aFields(50)
For cnt1 = 1 To 50
ReDim aFields(cnt1).fValue(6000)
Next

NumRows = 0
colcount = 0

For Each varItem In Me!ResultsFieldList.ItemsSelected
    colcount = colcount + 1
    aFields(colcount).fName = Me!ResultsFieldList.ItemData(varItem)
    NumFields = 0

    rs1.Open "SELECT DISTINCT " & Me!ResultsFieldList.ItemData(varItem) & " 
FROM [Results Report]", CurrentProject.Connection, adOpenKeyset, adLockOptimistic

If rs1.RecordCount > NumRows Then NumRows = rs1.RecordCount
strRow = strRow & Me!ResultsFieldList.ItemData(varItem) & ";"

While Not rs1.EOF
    NumFields = NumFields + 1
    If NumFields > NumRows Then
        NumRows = NumFields
    End If

    aFields(colcount).fValue(NumFields) = rs1(0) & ""

    rs1.MoveNext
Wend
rs1.Close
Next varItem
strRow = Left(strRow, Len(strRow) - 1)

Me.DistinctResultsFldVal.ColumnCount = colcount
Me.DistinctResultsFldVal.ColumnWidths = Mid(colwidths, 2)
Me.DistinctResultsFldVal.AddItem (strRow)

For cnt1 = 1 To NumRows

strRow = ""
For cnt2 = 1 To colcount
    If aFields(cnt2).fValue(cnt1) = "" Then
        strRow = strRow & ";"
    Else
        strRow = strRow & aFields(cnt2).fValue(cnt1) & ";"
    End If
Next
strRow = Left(strRow, Len(strRow) - 1)
Me.DistinctResultsFldVal.AddItem (strRow)

Next

'Err_ CmdDistinctVal_Click:
    'MsgBox "All null values were found in one or more of your selected fields"

End Sub 
```

# android - 从任何应用程序获取视图以移动箭头光标

> ID：12732337
> 
> 赞同：0
> 
> 时间：2012-10-04T17:14:20.730
> 
> 标签：android

我正在 android 中创建一个测试应用程序并使用键盘。

我想用我自己的箭头键创建一个自定义键盘布局（就像在一些商业产品中一样）。

我找不到的是：

1.  我们如何获得在任何应用程序中具有焦点的视图？键盘作为服务运行，我需要它在所有应用程序中都可用。我不能调用 findById，因为这可能是一些第三方应用程序。

2.  当我单击箭头键时，光标应该在光标当前所在的视图中移动（上、下、左、右）。

知道如何开始吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:42:42.443

这是托管在 github 上的一个很棒的开源键盘项目。深入研究源代码，你会发现你正在寻找的一切以及许多你可能没有想到的东西 :-)

[https://github.com/AnySoftKeyboard/AnySoftKeyboard](https://github.com/AnySoftKeyboard/AnySoftKeyboard)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:29:24.680

我使用了以下功能：

```
sendDownUpKeyEvents(KeyEvent.KEYCODE_DPAD_RIGHT);
sendDownUpKeyEvents(KeyEvent.KEYCODE_DPAD_LEFT);
sendDownUpKeyEvents(KeyEvent.KEYCODE_DPAD_UP);
sendDownUpKeyEvents(KeyEvent.KEYCODE_DPAD_DOWN); 
```

分别

# chat - 如何安装 Wompt

> ID：12732339
> 
> 赞同：0
> 
> 时间：2012-10-04T17:14:24.973
> 
> 标签：chat

我正在尝试在我的虚拟主机上安装 Wompt 聊天服务，但我找不到正确的方法。我查看了互联网，但没有找到解释如何安装它的教程。

这是开源 Wompt 服务的 GitHub 链接：

[https://github.com/Wompt/wompt.com](https://github.com/Wompt/wompt.com)

*Wompt 是一种基于网络的多房间聊天服务。看看wompt.com

提前致谢。

阿占

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:22:10.847

该[文档](https://github.com/Wompt/wompt.com)有一个非常干净的安装指南：

安装

节点 0.6

```
git clone https://github.com/ry/node.git
  cd node
  git checkout v0.6.5
  ./configure
  make
  make install 
```

MongoDB

```
 wget http://fastdl.mongodb.org/linux/mongodb-linux-i686-2.0.4.tgz
  tar -xzf mongodb-linux-i686-2.0.4.tgz
  mv mongodb-linux-i686-2.0.4.tgz /someplace/in/your/path 
```

沃普特

```
git clone git@github.com:Wompt/wompt.com.git
  cd wompt.com
  git submodule update --init 
```

Wompt 认证服务器

```
cd wompt.com/authentication
  gem install bundler
  bundle 
```

# ruby-on-rails - 我如何在 AR Observer 中查看请求以进行审核？

> ID：12732347
> 
> 赞同：0
> 
> 时间：2012-10-04T17:14:48.110
> 
> 标签：ruby-on-rails, observers

我有一个简单的观察者，它正在观察某些模型并将模型`to_json`连同模型名称一起写入表中。我还想跟踪谁执行了更改，但我不知道如何访问当前用户。

也许我可以在 ApplicationController 中放入一个简单的 gem 或一些代码，或者类似的东西可以提供帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:37:36.070

没有我能想到的干净的方法来做到这一点。您可以尝试使用[User.current](http://rails-bestpractices.com/posts/47-fetch-current-user-in-models)模式，但我不喜欢这种方法，我不确定它是否能正确地与观察者通信。

在这种情况下，如果我想知道谁（最后）更改了对象，我通常会向模型本身添加一个“changed_by”和“changed_at”类型的属性，并在控制器中设置它们。这也将使留下审计线索变得更加容易。如果您实际上不想将值存储在数据库中，您甚至可以使用 attr_accessor。

# magento - 开票前通过 API 修改订单？

> ID：12732350
> 
> 赞同：2
> 
> 时间：2012-10-04T17:15:03.693
> 
> 标签：magento

在默认 Magento 1.7 安装中，是否可以在开具发票之前通过 API 修改订单？我知道在没有模块的情况下在 Admin 中没有机制可以做到这一点，但不确定新的 API 连接是否允许这种情况发生。

澄清一下，这里的想法是有人下了订单，然后决定他们想在订单中添加其他东西。理想情况下，我想通过我们其他库存系统的 API 推送此更改，因为我们的 CSR 不使用 Magento 界面来处理发票或发货详细信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T05:34:33.750

恐怕这对于默认的 Magento API 是不可能的。请参阅[销售订单 API 文档](http://www.magentocommerce.com/api/soap/sales/salesOrder/salesOrder.html)。您可以保留或取消订单，但不能编辑其信息。

如果您在 Magento 后端编辑订单并保存，旧订单将被取消并创建新订单。这些订单可以通过特殊的数字格式识别（“-[versionnumber]”附加到订单号），请参阅[管理和编辑订单文档](http://www.magentocommerce.com/wiki/welcome_to_the_magento_user_s_guide/chapter_8#managing_and_editing_orders1)。

您可能想使用默认的 Magento API 来模仿这种行为。

*   从当前订单中获取信息。
*   创建一个新的购物车，用更正的信息填写它并为此购物车创建一个新订单（有关必要的方法，请参阅[Checkout/Cart API 文档）。](http://www.magentocommerce.com/api/soap/checkout/checkout.html)
*   取消旧订单。

这不会是微不足道的，但它应该是可能的。

# java - 请举例说明如何使用 MigLayout 模拟 BorderLayout？

> ID：12732355
> 
> 赞同：0
> 
> 时间：2012-10-04T17:15:16.243
> 
> 标签：java, swing, layout-manager, miglayout, border-layout

我希望布局`WEST`的`EAST`一部分具有恒定的宽度。如何设置这个`MigLayout`？

**更新**

以下代码不会像边框布局那样调整大小：

```
package testing.Test_MigLayout_01;

import javax.swing.JButton;
import javax.swing.JRootPane;
import javax.swing.SwingUtilities;

import net.miginfocom.swing.MigLayout;

public class App201210042244 
{

private class JFrame extends javax.swing.JFrame {

    {
        setLayout(new MigLayout());

        add(new JButton("1"), "dock east, width 120");
        add(new JButton("2"), "west");
        add(new JButton("3"), "center");
        add(new JButton("4"), "north");
        add(new JButton("5"), "south");

    }

}

public App201210042244() {
     SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                JFrame jFrame = new JFrame();
                jFrame.pack();
                jFrame.setVisible(true);

            }
        });
}

public static void main( String[] args )
{
   new App201210042244();
}
} 
```

窗口内部的大小保持不变：

![在此处输入图像描述](../Images/a1de269080e6acd92888e5c557096a00.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T18:08:01.213

```
panel.add(new JButton("1"), "dock east, width 120");
panel.add(new JButton("2"), "west");
panel.add(new JButton("3"), "center");
panel.add(new JButton("4"), "north");
panel.add(new JButton("5"), "south"); 
```

可以省略*dock*关键字。

更新：

如果您希望在调整窗口大小时扩展*所有组件：*

```
panel.setLayout(new MigLayout("fill"));
panel.add(new JButton("1"), "dock east, width 120");
panel.add(new JButton("2"), "west");
panel.add(new JButton("3"), "center, grow");
panel.add(new JButton("4"), "north");
panel.add(new JButton("5"), "south"); 
```

# google-maps-mobile - 设备上没有 wifi 时未加载 Google 地图

> ID：12732358
> 
> 赞同：1
> 
> 时间：2012-10-04T17:15:35.463
> 
> 标签：google-maps-mobile

我有一个 Google Maps api 的调试密钥并使用它构建了一个应用程序。我正在我的设备上测试地图应用程序，它只有在有 wifi 时才能正常工作。

但是没有wifi的时候就不行了。它不加载瓷砖。我在另一篇文章中读到，我需要一个签名密钥才能在设备上进行测试。是必需的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:26:05.477

据我所知，谷歌地图从网络加载它的数据。如果没有连接到网络，则无法加载地图。只需确保有可用的 Internet 连接，然后重试。

# audio - DAC 在 Raspbian 的歌曲开始/停止时弹出

> ID：12732359
> 
> 赞同：11
> 
> 时间：2012-10-04T17:15:47.500
> 
> 标签：audio, raspberry-pi, raspbian

自首次构建以来，这一直是 Raspbian (Debian Wheezy) 的 Raspberry Pi 安装的一个困扰问题。直接与 Raspberry Pi 基金会和 Raspbian 团队交谈并没有让我走运。

问题本身是 DAC 在开始播放歌曲之前不会初始化。然后它会在完成后自行关闭，从而导致另一个弹出。当将它用于纯音乐播放器时，至少可以说是令人愤怒的，尤其是当流行音乐很大的时候。

我在 VLC、MOCP 和 MPD 上听说过这个。这已在 Pi 论坛中进行了介绍，但未找到答案： [http ://www.raspberrypi.org/phpBB3/viewtopic.php?f=38&t=8783](http://www.raspberrypi.org/phpBB3/viewtopic.php?f=38&t=8783)

我在 Stack Overflow 向你求助，看看是否有办法解决这个问题。我的想法是在启动时对其进行初始化，这样只有在启动时才会弹出，尽管我不知道如何控制 ALSA 来做到这一点。

希望能找到解决办法。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T12:05:33.587

使用 mpd 时，我在 Raspberry Pi 的模拟输出上经历了同样的噼啪声和爆裂声。这里也讨论了这个问题：[https ://github.com/raspberrypi/linux/issues/128](https://github.com/raspberrypi/linux/issues/128)

您将音频硬件配置为仅在启动时初始化一次的想法正是我为解决问题所做的。可以使用 PulseAudio 声音系统来做到这一点，它充当音频硬件和想要输出声音的程序之间的代理。例如，像 mpd 这样的音频播放器可以配置为使用 PulseAudio 作为音频后端。

PulseAudio 有一个配置选项 ( `module-suspend-on-idle`)，用于配置音频硬件睡眠。**禁用音频硬件睡眠为我修复了所有噼啪声和爆裂声。**

我已经在我的博客上更详细地概述了必要的步骤：http: [//dbader.org/blog/crackle-free-audio-on-the-raspberry-pi-with-mpd-and-pulseaudio](http://dbader.org/blog/crackle-free-audio-on-the-raspberry-pi-with-mpd-and-pulseaudio)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T22:17:42.043

我有同样的问题，解决方法是使用 USB 音频或 HDMI 音频输出（但是将 hdmi 音频转换为模拟音频并不容易，转换器 >40 美元）。它是由 Broadcom 固件引起的。他们在 rpi 论坛上说它在列表中，但没有人知道它何时会真正修复......

更新：我已经尝试过 Creative Play！USB音频，它是一样的，但是“咔嗒”声不是那么响亮。所以这不是 100% 的解决方案，我们必须等待修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T19:43:47.213

通过使用[Aureon Dual USB 声卡](http://www.terratec.net/en/products/Aureon_Dual_USB_9842.html)，我从我的 raspi 中获得了零爆音。在我每首歌都弹奏之前。

我已经[读过](http://elinux.org/RPi_VerifiedPeripherals#USB_Sound_Cards)，如果不将 USB 端口限制为 1.1 版，使用 Aureon 是不可能的，但对我来说并非如此。它开箱即用。还有一个小问题，当 raspi 打开时，我无法插入声卡，它会重新启动。但这对我来说不是问题，我从不移除声卡。

我的 raspi 运行 raspbian wheezy 并通过 mpd 和 nfs 共享播放音乐。

# javascript - 在不同的位置强制使用不同的字符

> ID：12732361
> 
> 赞同：0
> 
> 时间：2012-10-04T17:15:53.390
> 
> 标签：javascript, html, input, numerical, alphabetical

我目前正在做一个项目，我需要使用邮政编码从数据库中获取街道/城市详细信息。荷兰邮政编码使用“1111 AA”格式，我希望将其输入到单个输入字段中，同时强制前四个字符为数字，后两个字符为字母。

我已经在谷歌上搜索了很多，找到了强制其中任何一个的方法，但是没有一个可以将它组合到一个输入字段中，而且我似乎不够狡猾，无法自己组合它们。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:18:42.120

我们在很多网站中都使用它，尤其是对于电话#s

[http://digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:22:22.650

要处理您输入的特定模式，请在验证表单输入的 javascript 函数中尝试以下操作：

```
var pattern = new RexExp( '[0-9]{4} [A-Z]{2}' );
if( inputFieldValue.search( pattern ) == -1 )
{
    // throw error condition.
}
else
{
    // The pattern matched. Continue on.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T17:23:58.963

您可以为此使用新的 html5[`pattern`](https://developer.mozilla.org/en-US/docs/HTML/Element/Input)属性：

```
<form>
   <input name="zipcode" type="text" pattern="\d{4}\s?[A-Z]{2}" length="7" />      
   <input type="submit" />
</form>​​​​​​​​​​​​​​​​​​​​​​​​ 
```

如果该属性不受支持，您可以使用 javascript 解决方案，在提交之前使用[正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)检查输入字段，如下所示：

```
var pattern = /[0-9]{4}\s?[A-Z]{2}/;
string.match(pattern); 
```

看看**[演示小提琴](http://jsfiddle.net/poikl/buVpn/)**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T17:20:18.433

这最终是一个问题，**正则表达式**是一个合适的解决方案。

尝试这个：

```
var zip = "1111 AA"
var regex = new RegExp("^[0-9]{4}\\s?[A-Z]{2}$");
regex.test(zip); 
```

请注意，这将不允许使用小写字符，并且将允许没有空格的邮政编码（例如：1111AA）。尝试一些谷歌搜索以了解如何允许或禁止这些。

# opencv - 如何在 OpenCV/JavaCV 中找到亮度平衡的图像？

> ID：12732362
> 
> 赞同：1
> 
> 时间：2012-10-04T17:15:54.177
> 
> 标签：opencv, histogram, gaussian, javacv

我想比较一些相似的图像以找到具有平衡亮度的图像（不是曝光过度或曝光不足）。

*   我的第一个想法是获取图像的平均亮度。为此，我采用亮度直方图。但是这种方法会产生很多错误。因为可能存在只有低亮度和高亮度的图像

*   我的第二个想法是创建一个代表高斯分布的直方图。但我不知道如何用这些值创建直方图。

有人有想法或其他解决方案吗？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:03:52.683

我找到了解决方案。使用[CvHistogram* cvMakeHistHeaderForArray(int dims, int* sizes, CvHistogram* hist, float* data, float** range=NULL, int uniform=1)](http://opencv.willowgarage.com/documentation/c/imgproc_histograms.html#makehistheaderforarray)我可以很容易地生成带有值表的直方图。

问候

# mvcsitemapprovider - 将站点加载到容器中时使用 MVCSiteMap

> ID：12732363
> 
> 赞同：0
> 
> 时间：2012-10-04T17:15:56.797
> 
> 标签：mvcsitemapprovider

我们目前将网站内容加载到主页上的容器中，并且从不重新加载整个网站。我们使用 jqAddress 进行深度链接。我的任务是创建一个在网站上使用的面包屑解决方案，并将 MVCSiteMap 视为一种解决方案。问题是当我们将内容加载到容器中并更改站点地图面包屑的地址时，由于页面没有重新呈现，因此我们只是将部分内容加载到视图容器中。我的想法是创建另一个部分并让 jqAddress 更改事件重新加载部分，但我不确定如何将所有数据获取到 SiteMap 帮助程序以告诉它我们刚刚去了哪里，以便它可以正确生成面包屑路径。任何帮助/想法将非常有义务。

提前致谢，

奥斯汀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:56:47.317

因此，解决此问题的最简单方法似乎是在加载到视图容器中的每个页面上包含站点地图路径。这将导致它正确呈现路径。现在我只需要深入研究动态节点提供者的奥秘！

# javascript - 用jquery取消选中复选框？

> ID：12732364
> 
> 赞同：3
> 
> 时间：2012-10-04T17:15:57.063
> 
> 标签：javascript, jquery

即使页面被缓存，是否可以在页面进入时修改此代码以取消选中复选框 id LOTL？

```
<script type="text/javascript">

function formReset()
{
       document.getElementById("LOTL").reset();
}
</script> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-04T17:17:54.387

您可以使用`prop`方法：

```
$(document).ready(function(){
   $('#LOTL').prop('checked', false);
   //  document.getElementById("LOTL").checked = false
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T17:17:45.267

这应该可以解决问题：

```
$(document).ready(function()
{
    $('#LOTL').attr('checked', false);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T17:17:46.700

试试这个取消选中

```
$(function() {   
    $('#LOTL').prop('checked', false);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T17:19:26.813

LOTL 元素是复选框还是表单？

如果是复选框，你可以试试这个：

```
$( '#LOTL' ).removeAttr( 'checked' ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-04T17:23:46.060

```
function formReset(){
       document.getElementById("LOTL").checked = false;
} 
```

# python - Django - 使用从类似 REST 的 API 检索的数据构建报告的应用程序

> ID：12732375
> 
> 赞同：6
> 
> 时间：2012-10-04T17:16:50.727
> 
> 标签：python, django, json, rest, django-models

我一直在构建一个 Django 应用程序，它使用来自扩展的类似 REST 的 API 的数据。API 是使用 .NET 构建的（糟糕！不是我的选择），因为我宁愿挖出我的眼球也不愿学习微软工具（我是 *nix/OSX 人），因为我不想要前端为了影响 API 或反之，我选择在另一台服务器上使用 Django 构建前端。

Django 站点充当主 DB/API 和最终用户之间的中间人。API 中的任何数据都不会保存在 Django 站点中，它只是以一种很好的人类可读格式重新格式化/显示所述数据。现在我已经构建了我的 API 客户端和所有视图，我正在寻找创建一个报告生成器。

是否已经有任何应用程序可以创建临时模型来表示来自 API 调用的对象？我希望能够在从 API 接收的 JSON/XML 数据之间创建关系，但不需要在我的 Django 站点中复制数据库结构，那将是多余的。

最终目标是能够让用户根据来自数据 API 的请求创建/保存自定义过滤报告。任何建议将不胜感激。（请不要回复“只需在 Django 中复制模型，然后插入从 API 检索到的数据”。这将完全抵消让 DB/API 在与前端不同的服务器上运行的意义。

注意 - 我已经看过 note 的 Dark，但是由于缺乏关于它的文档，并且缺乏关于依赖的“docu”库的文档，我真的不知道它是否对我有任何好处。如果您有任何关于如何使用它们来解决此问题的示例，请告诉:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:30:43.260

这是我能想到的一个技巧，它可能会奏效。

首先，除了您拥有的任何其他数据库之外，还定义一个虚拟数据库后端：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': 'mydatabase'
    },
    'dummy': {
        'ENGINE': 'django.db.backends.dummy',
        'NAME': 'dummy'
    } 
```

然后按照您的意愿定义您的非数据库模型。从那里你有`using`可以告诉 Django 为该调用使用特定后端的功能，并请求使用虚拟后端：

```
objs = YourModel.objects.using('dummy').all() 
```

或者，您也可以在不创建对象的情况下侥幸逃脱`save()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T17:47:53.150

我实际上最终找到了解决这个问题的方法，很久以后大声笑。

谢谢djangopackages.com！！！

显然，我正在寻找一个术语，ROA（面向资源的架构）。这是来自 Ruby on Rails 世界的范例。有一个 django 应用程序可以处理这个问题，称为[django-roa](https://github.com/charles-vdulac/django-roa)

所以我会尝试一下，感谢@Yuval Adam 的尝试

# c++ - 在 OpenCV 中匹配 Matlab 的 regionprop(x,'Area')

> ID：12732379
> 
> 赞同：2
> 
> 时间：2012-10-04T17:17:35.850
> 
> 标签：c++, matlab, opencv

我需要模仿 Matlab 的 regionprop(BW,'Area') 对 OpenCV 所做的事情。

我在 Matlab 中有这段代码

```
[L,N]           = bwlabel(image1,8);
S = regionprops(L,'Area','PixelIdxList');
output=[];
for i=1:N,
    output(i)=S(i).Area;
end 
```

在 OpenCV 中

```
cv::findContours(cvImageMat,contours,CV_RETR_LIST,CV_CHAIN_APPROX_NONE);
int iNumSegments = contours.size();
for(int i=0;i<iNumSegments;i++) 
{
    cv::vector<cv::Point> approx;
    cv::approxPolyDP(cv::Mat(contours[i]), approx, 1.0e-10, true);
    double area = fabs( cv::contourArea( approx ) );
    dvResult.push_back(area);
} 
```

但是对于 2048 x 2048 大小的图像，计算的两个区域之间的每个差异约为 400。他们应该是一样的，让我继续前进。有人对此有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:35:54.647

最终创建了我自己的函数。

```
double cvArea(cv::Mat mat, cv::vector<cv::vector<cv::Point>> &contours, int index)
{
    cv::Mat mask = cv::Mat::zeros(mat.cols,mat.rows,CV_8UC1);
    cv::drawContours(mask,contours,index,cv::Scalar(1),CV_FILLED);
    return cv::sum(mask).val[0];
} 
```

# spring - 在示例代码中用 glassfish 替换码头

> ID：12732383
> 
> 赞同：0
> 
> 时间：2012-10-04T17:17:50.230
> 
> 标签：spring, rest, glassfish-3, pom.xml

我对rest api非常陌生。我正在尝试使用：Jersey、Spring、JPA、Hibernate、Glassfish 3.1.2 和 MySQL 构建一个 api。我找到了一个看起来非常好的教程：http: [//persistentdesigns.com/wp/jersey-spring-and-jpa/](http://persistentdesigns.com/wp/jersey-spring-and-jpa/)。但它使用 Jetty 而不是 Glassfish。

有人可以看看它，并通过代码级详细信息告诉我如何替换`jetty`为`glassfish`？

您可以滚动到文章底部以获取标题下的源代码`The Source Code`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:07:04.473

我想我找到了解决方案：

```
<plugin>
            <groupId>org.glassfish</groupId>
            <artifactId>maven-embedded-glassfish-plugin</artifactId>
            <version>${glassfish.version}</version>
            <configuration>
                <goalPrefix>embedded-glassfish</goalPrefix>
                <app>/Users/mariedamier/target/${project.build.finalName}.war</app>
                <autoDelete>true</autoDelete>
                <port>8080</port>
            </configuration>
            <dependencies>
                <dependency>
                    <groupId>com.sun.jersey</groupId>
                    <artifactId>jersey-servlet</artifactId>
                    <version>${project.version}</version>
                </dependency>
                <dependency>
                    <groupId>javax.servlet</groupId>
                    <artifactId>javax.servlet-api</artifactId>
                    <version>3.0.1</version>
                </dependency>
            </dependencies>
        </plugin> 
```

# nerdtree - 无法打开 NERDTree

> ID：12732386
> 
> 赞同：3
> 
> 时间：2012-10-04T17:17:54.540
> 
> 标签：nerdtree

在我的 vimrc 中，

```
autocmd VimEnter * NERDTree
autocmd VimEnter * wincmd p 
```

但是当我开始写文件时，它会提示错误：

```
 Error detected while processing VimEnter Auto commands for "*":
  E492: Not an editor command: NERDTree 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-22T22:10:41.460

我尝试使用[vim-plug](https://github.com/junegunn/vim-plug)安装 NERDTree ，所以当我启动 vim 并运行 :PlugInstall 时，我可以使用 :NERDTree 命令但是出去后它不可用，原因是我没有下载插件因为我使用了 github，所以根据对于[文档](https://github.com/junegunn/vim-plug#example)，您必须按需使用它并将其包装在您的指令中：

```
call plug#begin('~/.vim/plugged') " Specify folder
Plug 'scrooloose/nerdtree', { 'on':  'NERDTreeToggle' }
call plug#end() " Initializes plugins 
```

所以你的插件现在可用，你可以使用你的说明：

```
autocmd VimEnter * NERDTree
autocmd VimEnter * wincmd p 
```

# linq - 在 linq 中的 where 条件中传递列表值以过滤 datatble 中的数据

> ID：12732387
> 
> 赞同：1
> 
> 时间：2012-10-04T17:17:56.727
> 
> 标签：linq, list, datatable

我有一个要求，我有一个 string[] 数组（它的 id 值是，分隔值）和 dt 作为数据表。

dt 的列名为 Id、empname、designation。

现在我想使用 linq 查询从 id 不在（字符串 [] 值）中的数据表中过滤数据。

例如：

```
string[] ids= [2,4,6];

dt=  id      empname     designation
    ----     -------     ------------
     1       robert       trainer
     2       thomas       HRA
     3       John         JE
     4       kapil        SE
     5       sachin       SSE
     6       Rahul        Manager 
```

现在我想要一个 linq 查询，它将我的 dt 返回为：

```
 id      empname     designation
----     -------     ------------
 1       robert       trainer 
 3       John         JE
 5       sachin       SSE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:21:23.707

您可以使用 LINQ To 数据表：

```
var result = dt.AsEnumerable()
               .Where(row => !ids.Contains(row.Field<string>("Id")); 
```

# php - PHP readfile/fgets/fread 导致对服务器的多个请求

> ID：12732394
> 
> 赞同：4
> 
> 时间：2012-10-04T17:18:18.317
> 
> 标签：php, apache, readfile, fread, fgets

我正在尝试使用 PHP 代理通过 Apache / Nginx 流式传输 MP4 文件以进行身份​​验证。我已经实现了字节范围来为 iOS 流式传输，如下所述：http: [//mobiforge.com/developing/story/content-delivery-mobile-devices](http://mobiforge.com/developing/story/content-delivery-mobile-devices)。这在 Chrome 和 Safari 中工作得非常好，但是.... 真正奇怪的是，如果我监控服务器对 php 页面的请求，浏览器中的每个页面加载都会发生其中三个。这是 Chrome 检查器的屏幕截图（直接进入 PHP 代理页面）：

![铬检查员](../Images/f87c6d5f68525addc33874f60deebfe5.png)

如您所见，第一个被取消，第二个仍然待定，第三个有效。同样，该文件在浏览器中播放。我尝试了其他读取文件的方法（readfile、fgets、fread 等），结果相同。是什么导致了这三个请求，我怎样才能获得一个工作请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:50:18.920

第一个请求是针对第一个字节范围的，预加载文件。一旦下载了指定的数量，浏览器就会取消请求。

第二个我不确定...

第三个是当你真正开始播放媒体文件时，它会请求并下载完整的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:41:10.920

不确定这是否回答了您的问题，但使用 PHP 提供大型二进制文件并不是正确的做法。

最好让 PHP 只处理身份验证，并将文件引用传递给 Web 服务器进行服务，从而释放资源。

另请参阅：[缓存由 PHP 动态创建的 HTTP 响应](https://stackoverflow.com/questions/10596116/caching-http-responses-when-they-are-dynamically-created-by-php/10596231#10596231)

它更详细地描述了我建议做的事情。

# javascript - 如何在Javascript中搜索数组？

> ID：12732395
> 
> 赞同：8
> 
> 时间：2012-10-04T17:18:19.660
> 
> 标签：javascript

> **可能重复：**
> [在 JavaScript 数组中查找重复值的最简单方法](https://stackoverflow.com/questions/840781/easiest-way-to-find-duplicate-values-in-a-javascript-array)

我正在寻找数组中的两个值是否相同。我写了以下代码：

```
function validatePassTimeFields(passtimes) {
    var success = true; 
    var length = passtimes.length;
    var hashMap = new Object();
    for (var j=0; j<length; j++) {
        if(hashMap[passtimes[j].value]==1) {
            success = false;
            alert("Duplicate Found");
            break;
        }
        hashMap[passtimes[j].value]=1;
    }
    return success;
} 
```

我是 Javascript 新手，所以我尝试使用 HashMap 来查找是否有任何重复项。这是在 JavaScript 中查找重复项的最佳方法吗？或者我可以优化它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:58:46.163

// 如果你想在其他地方使用它，你只需要优化它-

```
function noduplicates(array){
    var next, O= {},
    L= array.length;
    while(L){
        next= array[--L];
        if(O[next]) return false;
        O[next]= 1;
    }
    return true;
}

function validatePassTimeFields(passtimes){
    if (noduplicates(passtimes)) return true;

    alert("Duplicate Found");
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:43:51.653

您的函数已经非常好，除了它仅适用于带有字符串或数字的数组的问题。对于关心对象的更困难的方法，请参见此[答案](https://stackoverflow.com/a/7928115/1048572)。我认为这对您来说并不重要，因为您有一个明确且受限制的用例（通过`value`属性检查身份）。

但是，我会做一些不同的事情：

*   不要使用`success`变量和`break`来自循环，而只`return`使用整个函数。
*   通常使用`new Object`快捷方式对象文字而不是构造函数`{}`
*   `hashMap`而不是在to中设置值`1`可能会使用`true`; 你也可以省略相等运算符`==`，只检查属性的真实性。我什至会使用[`in`operator](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/in)。

```
function validatePassTimeFields(passtimes) {
    var length = passtimes.length;
    var hashMap = {};
    for (var j=0; j<length; j++) {
        if (passtimes[j].value in hashMap) {
            alert("Duplicate Found");
            return false;
        }
        hashMap[passtimes[j].value] = 1;
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T17:34:34.210

看来你并不想找到重复的，只是看看有没有？

你已经很接近了，这是一个工作函数；

```
var hasDuplicates = function (arr) {

    var _store = {};

    for (var i = 0; i < arr.length; i++) {

        if (typeof _store["_" + arr[i]] !== "undefined") {
            return true;
        }

        _store["_" + arr[i]] = true;

    }

    return false;

}; 
```

关联数组中的下划线是存储数值所必需的。该`hasDuplicates()`函数仅适用于具有`toString()`方法的对象。

检查重复项；

```
var yourArray  = [1, 5, 7, 3, 5, 6];

if (hasDuplicates(yourArray)) {... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T17:40:23.787

可能值得检查下划线对此功能的实现。如果您只是想消除欺骗，您可以使用[_.uniq()](http://underscorejs.org/#uniq)，但如果您对知道存在欺骗或纯粹的实现细节更感兴趣，您可能会喜欢查看[此方法的来源](http://documentcloud.github.com/underscore/docs/underscore.html#section-46)，即很好地记录在案。

我知道这不是问题的直接代码答案 - 这里已经有一些，所以重复没有用。但我认为值得一提的是，underscore 是一个很棒的实用程序库，并且源代码是了解更多关于编写良好的 javascript 的好地方。

# absolute - 为什么在这种情况下绝对定位不起作用_它的顶部和左侧值

> ID：12732400
> 
> 赞同：0
> 
> 时间：2012-10-04T17:18:36.100
> 
> 标签：absolute

我用css做了一些绝对定位。但是在以下情况下，为什么在**firstBox**中，**顶部**和**左侧**的值被忽略了？（我希望顶部为 100 像素，左侧为 100 像素）。第二个盒子正确定位。

```
<html>
<head>
<title>Testing</title>
<style type="text/css">
#firstBox {
  color: white;
  width: 500px;
  padding: 1em;
  background: red;
  position::absolute;
  top:100px;
  left:100px;
 z-index:2;
}
#secondBox {
    color: white;
    width: 500px;
    padding: 1em;
    background: blue;
    position: absolute;
    top: 100px;
    left: 100px;
    z-index: 0;
}
</style>
</head>
<body>
<div id="firstBox"> The First Box! </div>
<div id="secondBox"> The Second Box! </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:20:36.837

这是因为您使用2个**冒号**for`position: absolute;``#firstBox`

[**我的小提琴**](http://jsfiddle.net/5u5Z9/)

# android - Android - 何时调用 performTraversals？

> ID：12732401
> 
> 赞同：5
> 
> 时间：2012-10-04T17:18:38.163
> 
> 标签：android, views

我很好奇小伙伴们

什么是确切的情况`doTraversal -> performTraversals`被称为？由于我的活动非常繁重，我希望应用程序调用`onDraw`或排序。performTraversals 非常重，它正在尝试/测量是否应该调整视图大小，我猜是这样的。当我制作一些视图时我不需要它，没有其他视图依赖于它，GONE，但我想我不能跳过它。所以在深入Android的源码之前，我想问一下。如果你知道，请随时分享:)

谢谢， 达尼尔

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T18:55:57.243

`performTraversals()`有很多工作，但它的三个主要角色是：

*   测量视图
*   布局视图
*   绘制视图

每次Android需要重绘一个窗口时，`performTraversals()`都会被调用。然而，这并不意味着每次 performTraversals() 执行时都会发生测量/布局。如果您使用的是标准视图，*则不能*跳过`performTraversals()`（只有 SurfaceView 允许您在绘图时绕过它。）

# ruby-on-rails-3 - 耙中止！rake 不加载环境模型

> ID：12732411
> 
> 赞同：0
> 
> 时间：2012-10-04T17:19:13.013
> 
> 标签：ruby-on-rails-3, rake, rake-task

已经看过这个[堆栈问题](https://stackoverflow.com/questions/8628830/rake-aborted-uninitialized-constant-objectcountry-why-cant-see-model)，此时我查看了答案中的所有链接。

创建自定义 rake 任务，代码如下所示：

```
task :seeding do
    op_a = CoverageDetail.create(option: 'a', privacy_and_website_media: 250000.00, privacy_breach_service: 20000,
                    legal_forensic_cost: 25000.00, call_center_service: 'inc', deductible: 5000.00,
                    credit_monitoring_individuals: 20000, fraud_resolution_service: 5000, regulatory_defense: 100000.00,
                    pci_fines_and_costs: 50000.00, crisis_management_and_pr: 50000.00, foreign_notification: 10000.00)

    op_b = CoverageDetail.create(option: 'b', privacy_and_website_media: 500000.00, privacy_breach_service: 25000,
                            legal_forensic_cost: 50000.00, call_center_service: 'inc', deductible: 5000.00,
                            credit_monitoring_individuals: 25000, fraud_resolution_service: 5000, regulatory_defense: 250000.00,
                            pci_fines_and_costs: 50000.00, crisis_management_and_pr: 50000.00, foreign_notification: 10000.00)

    op_c = CoverageDetail.create(option: 'c', privacy_and_website_media: 1000000.00, privacy_breach_service: 50000,
                            legal_forensic_cost: 100000.00, call_center_service: 'inc', deductible: 5000.00,
                            credit_monitoring_individuals: 50000, fraud_resolution_service: 5000, regulatory_defense: 500000.00,
                            pci_fines_and_costs: 50000.00, crisis_management_and_pr: 50000.00, foreign_notification: 10000.00)

    op_a.save!
    op_b.save!
    op_c.save!
end 
```

我有一个名为coverage_details 的表我有一个名为coverage_detail.rb 的模型我有一个名为coverage_details_controller.rb 的控制器。模型中的类名是 CoverageDetail。

**问题：**为什么我会得到`uninitialized constant CoverageDetail`？

这是我第一次尝试创建自定义 rake 任务来为现有应用程序中的新表播种，或者我只需将此信息添加到我的 db:seed 文件中。

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T17:22:47.553

使用环境给它 rails 环境

```
task :seeding => :environment do
    op_a = CoverageDetail.create(option: 'a', privacy_and_website_media: 250000.00, privacy_breach_service: 20000,
                    legal_forensic_cost: 25000.00, call_center_service: 'inc', deductible: 5000.00,
                    credit_monitoring_individuals: 20000, fraud_resolution_service: 5000, regulatory_defense: 100000.00,
                    pci_fines_and_costs: 50000.00, crisis_management_and_pr: 50000.00, foreign_notification: 10000.00)

    op_b = CoverageDetail.create(option: 'b', privacy_and_website_media: 500000.00, privacy_breach_service: 25000,
                            legal_forensic_cost: 50000.00, call_center_service: 'inc', deductible: 5000.00,
                            credit_monitoring_individuals: 25000, fraud_resolution_service: 5000, regulatory_defense: 250000.00,
                            pci_fines_and_costs: 50000.00, crisis_management_and_pr: 50000.00, foreign_notification: 10000.00)

    op_c = CoverageDetail.create(option: 'c', privacy_and_website_media: 1000000.00, privacy_breach_service: 50000,
                            legal_forensic_cost: 100000.00, call_center_service: 'inc', deductible: 5000.00,
                            credit_monitoring_individuals: 50000, fraud_resolution_service: 5000, regulatory_defense: 500000.00,
                            pci_fines_and_costs: 50000.00, crisis_management_and_pr: 50000.00, foreign_notification: 10000.00)

    op_a.save!
    op_b.save!
    op_c.save!
end 
```

该环境为其提供了轨道运行环境，并且您的模型 CoverageDetail 出现在场景中。

谢谢

# r - R中的热图与heatmap.2

> ID：12732412
> 
> 赞同：2
> 
> 时间：2012-10-04T17:19:15.890
> 
> 标签：r, ggplot2, heatmap

我正在尝试在 R 中创建热图。我尝试过使用 heatmap.2 命令。

我的数据由 x 和 y 列以及一个点的相关相对频率组成（频率除以总频率）

在大多数地方频率为零，而在其他地方则相对频率较小。我已将数据转换为矩阵，因为这似乎是 heatmap 命令想要的，并试图删除 x 和 y 坐标。

```
BB <- matrix(as.matrix(surfacerevfreq1[, 3]),  ncol = 35, byrow = T) 
```

在我看来有两个问题，并非所有 x 和 y 坐标都被列出。即 x 坐标从 1 开始到 35，而 y 坐标从 11 开始到 30。热图函数似乎不喜欢这样。我考虑过在数据集的开头插入零，以便 y 轴上 1-10 的每个点都有一个值。但是，我不确定这是否是最好的主意。

所以我想我的问题是：我如何格式化我的数据，以便我可以从这些数据中获得有效的热图？我应该补充一点，如果可能的话，我希望我的 x 和 y 刻度上的数字也显示出来。由于它以图形方式显示与每个点相关的相对频率的目的。

谢谢。

这是我的数据的一个子集，以便您可以看到它的矩阵形式

```
 col1         col2         col3         col4         col5         col6            col7         col8         col9        col10        col11        col12 
0.0000000000 0.0000000000 0.0000000000 0.0000000000 0.0000000000 0.0000000000    0.0000000000 0.0000000000 0.0000000000 0.0000000000 0.0000000000 0.0000000000 
   col13        col14        col15        col16        col17         col18            col19        col20        col21        col22        col23        col24 
0.0000000000 0.0000000000 0.0000000000 0.0000000000 0.0000000000 0.0000000000  0.0000000000 0.0000000000 0.0000000000 0.0005017561 0.0005017561 0.0000000000 
   col25        col26        col27        col28        col29            col30            col31        col32        col33        col34        col35 
0.0000000000 0.0000000000 0.0000000000 0.0000000000 0.0000000000 0.0000000000      0.0000000000 0.0000000000 0.0000000000 0.0000000000 0.0000000000 
```

这是我正在使用的热图命令：

```
hU <- heatmap.2(xx, Rowv=FALSE, symm=TRUE,  trace="none", density.info="none",   dendrogram="none") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:51:07.370

试试这个，考虑到你的 3 列数据存储在 data[x, y, q]

```
a = matrix(0, nrow = 30 - 10, ncol = 35)
rownames(a) = 11:30
apply(data, 1, function(x) a[x[2] - 10, x[1]] <<- x[3])
heatmap.2(a, Rowv=FALSE, symm=TRUE,  trace="none", density.info="none", 
          dendrogram="none", xlab="X", ylab="Y") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:58:55.500

尝试使用 ggplot2，它会产生更好的热图

例子：

```
data <- read.csv("data.txt", header=T, sep=",")
attach(data)
data.m = melt(data) 
data.m <- ddply(data.m, .(variable), transform, rescale = rescale(value))
require(ggplot2)
p <- ggplot(data.m, aes(variableX, variableY)) + geom_tile(aes(fill = rescale), 
  colour =   "white") + scale_fill_gradient(low = "red", high = "green") 
```

# spring-batch - 没有输入读取时如何结束工作

> ID：12732414
> 
> 赞同：3
> 
> 时间：2012-10-04T17:19:26.577
> 
> 标签：spring-batch

我们从数据库中读取大部分数据。有时结果集是空的，在这种情况下，我们希望工作立即停止，而不是交给作者。如果没有输入，我们不想创建文件。

目前我们通过一个返回特定字符串的 Step-Listener 来实现这一目标，该字符串是转换到下一个业务步骤或删除步骤的输入，删除我们之前创建的文件（该文件不包含实际数据）。

我希望在读者意识到没有输入之后结束这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-21T07:33:15.940

## 新编辑（更优雅的方式）

这种方法是在找不到文件时优雅地移动到下一步或结束批处理应用程序，并防止执行不需要的步骤（以及它们的侦听器）。

-> 检查 tasklet 中是否存在文件，例如`FileValidatorTasklet`.

-> 当找不到文件时设置一些退出状态（枚举或最终字符串），这里我们设置了`EXIT_CODE`

示例小任务

```
public class FileValidatorTasklet implements Tasklet {
    static final String EXIT_CODE = "SOME_EXIT_CODE";
    static final String EXIT_DESC = "SOME_EXIT_DESC";
    @Override
    public RepeatStatus execute(StepContribution stepContribution, ChunkContext chunkContext) throws Exception {
        boolean isFileFound = false;
        //do file check and set isFileFound
        if(!isFileFound){
            stepContribution.setExitStatus(new ExitStatus(EXIT_CODE, EXIT_DESC));
        }
        return RepeatStatus.FINISHED;
    }
} 
```

-> 在执行 FileValidatorTasklet 后，在此应用程序的作业配置中，检查是否存在`EXIT_CODE`.

-> 如果找到代码，则提供此作业的后续路径，否则作业的正常流程。（这里我们只是在`EXIT_CODE`找到时终止作业，否则继续下一步）

示例配置

```
public Job myJob(JobBuilderFactory jobs) {
    return jobs.get("offersLoaderJob")
            .start(fileValidatorStep).on(EXIT_CODE).end() // if EXIT_CODE is found , then end the job
            .from(fileValidatorStep) // else continue the job from here, after this step 
            .next(step2)
            .next(finalStep)
            .end()
            .build();

} 
```

在这里，我们利用了 Spring Batch 中的条件步骤流。我们必须从步骤 A 定义两条独立的路径。流程类似于 A->B->C 或 A->D->E。

## 老答案：

我经历过这个，因此我分享我的方法。最好是

`throw new RunTimeException("msg");`.

它将开始终止 Spring Application ，而不是在此时完全终止。将调用（读取器/写入器）中的所有方法（如 close()），并调用所有 bean 的销毁方法。

注意：在 Listener 中执行此操作时，请记住，此时所有 bean 都已初始化，并且其初始化中的代码（如 afterPropertySet() ）将已执行。

我认为上面是正确的方法，但如果你只愿意在那个时候终止，你可以试试 `System.exit(1);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T12:15:26.847

[使用JobExecutionDecider并根据](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/core/job/flow/JobExecutionDecider.html)[StepExecution](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/core/StepExecution.html)的读取计数设置一个新的[FlowExecutionStatus](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/core/job/flow/FlowExecutionStatus.html)并将其路由到作业的末尾可能会更干净。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-02T20:19:05.163

我和OP有同样的问题。我正在使用所有注释，并且如果在未找到任何结果（在我的情况下为文件）时读取器返回 null，则 Job bean 将无法使用 UnsatisfiedDependencyException 初始化，并且该异常被抛出到标准输出。

如果我创建一个阅读器，然后返回它并指定指定的文件，那么将创建作业。之后，一个 ItemStreamException 被抛出，但它被抛出到我的日志中，因为那时我已经通过了 Job 自动装配并在 Step 内。这似乎更可取，至少对于我正在做的事情。

任何其他解决方案将不胜感激。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-14T11:35:37.617

Joshua 的回答是停止工作，而不是过渡到下一个业务步骤。

您的文件编写器可能仍会不必要地创建文件。您可以使用委托（FlatFileItemWriter）创建类似 LazyItemWriter 的东西，并且如果调用 write 方法，它只会调用 delegate.open（一次）。当然，您必须检查是否仅在先前打开委托时才需要调用 delegate.close()。这样可以确保不会创建空文件并且不再需要删除它。

# php - 使用多个 Xpath 查询来搜索 XML

> ID：12732418
> 
> 赞同：0
> 
> 时间：2012-10-04T17:20:20.203
> 
> 标签：php, xml, xpath

> **可能重复：**
> [在 XPath 和 XQuery 中实现条件](https://stackoverflow.com/questions/3448005/implementing-condition-in-xpath-and-xquery)

我正在尝试编写一个简单的脚本来搜索包含性能事件信息的 XML 文件。该文件的简化版本如下：

```
<event>
    <title>Big Event 1</title>
    <tags>hip-hop</tags>
    <ticketed>YES</ticketed>
</event>
<event>
    <title>Big Event 2</title>
    <tags>jazz</tags>
    <ticketed>NO</ticketed>
</event>
<event>
    <title>Big Event 3</title>
    <tags>jazz</tags>
    <ticketed>YES</ticketed>
<event> 
```

使用 SimpleXml 和 Xpath，我可以轻松搜索我想要的任何节点。但是，当我想搜索两个参数时，问题就来了，即“给我所有标记为 jazz 的已出票的事件”。

我的想法是通过 Xpath 查询为每个所需参数传递加载的 XML。但是，我现在意识到第二个查询将失败，因为从第一个查询返回的不是 SimpleXMLObject，而是一个包含匹配的 SimpleXMLObjects 的数组。

**编辑 - 这是问题**

如何使用在每种情况下可能存在或不存在的多个参数搜索 XML。一些示例查询。

*   标签包含嘻哈
*   标签包含嘻哈音乐并已出票
*   标题包含“3”且未出票

我以为我可以根据所需的搜索参数通过 XPath 查询传递 SimpleXMLObject，但这不起作用，因为第一个 XPath 查询的返回值是一个数组，而不是 SimpleXmlObject。

# java - 为 HttpURLConnection 添加标头

> ID：12732422
> 
> 赞同：297
> 
> 时间：2012-10-04T17:20:30.067
> 
> 标签：java, http

我正在尝试为我的请求添加标头，`HttpUrlConnection`但该方法`setRequestProperty()`似乎不起作用。服务器端没有收到任何带有我的标头的请求。

```
HttpURLConnection hc;
    try {
        String authorization = "";
        URL address = new URL(url);
        hc = (HttpURLConnection) address.openConnection();

        hc.setDoOutput(true);
        hc.setDoInput(true);
        hc.setUseCaches(false);

        if (username != null && password != null) {
            authorization = username + ":" + password;
        }

        if (authorization != null) {
            byte[] encodedBytes;
            encodedBytes = Base64.encode(authorization.getBytes(), 0);
            authorization = "Basic " + encodedBytes;
            hc.setRequestProperty("Authorization", authorization);
        } 
```

* * *

## 回答 #1

> 赞同：481
> 
> 时间：2013-03-21T19:00:41.670

我过去使用过以下代码，它与在 TomCat 中启用的基本身份验证一起工作：

```
URL myURL = new URL(serviceURL);
HttpURLConnection myURLConnection = (HttpURLConnection)myURL.openConnection();

String userCredentials = "username:password";
String basicAuth = "Basic " + new String(Base64.getEncoder().encode(userCredentials.getBytes()));

myURLConnection.setRequestProperty ("Authorization", basicAuth);
myURLConnection.setRequestMethod("POST");
myURLConnection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
myURLConnection.setRequestProperty("Content-Length", "" + postData.getBytes().length);
myURLConnection.setRequestProperty("Content-Language", "en-US");
myURLConnection.setUseCaches(false);
myURLConnection.setDoInput(true);
myURLConnection.setDoOutput(true); 
```

你可以试试上面的代码。上面的代码是 POST 的，你可以修改它为 GET

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-03-16T20:19:15.917

只是因为我在上面的答案中没有看到这一点信息，最初发布的代码片段无法正常工作的原因是因为`encodedBytes`变量是 a`byte[]`而不是`String`值。如果您将 a 传递`byte[]`给`new String()`如下，则代码片段可以完美运行。

```
encodedBytes = Base64.encode(authorization.getBytes(), 0);
authorization = "Basic " + new String(encodedBytes); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-06-06T17:48:33.857

如果您使用的是 Java 8，请使用以下代码。

```
URLConnection connection = url.openConnection();
HttpURLConnection httpConn = (HttpURLConnection) connection;

String basicAuth = Base64.getEncoder().encodeToString((username+":"+password).getBytes(StandardCharsets.UTF_8));
httpConn.setRequestProperty ("Authorization", "Basic "+basicAuth); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-04-04T20:38:17.527

最后这对我有用

```
private String buildBasicAuthorizationString(String username, String password) {

    String credentials = username + ":" + password;
    return "Basic " + new String(Base64.encode(credentials.getBytes(), Base64.NO_WRAP));
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-12-01T12:06:49.130

您的代码很好。您也可以通过这种方式使用相同的东西。

```
public static String getResponseFromJsonURL(String url) {
    String jsonResponse = null;
    if (CommonUtility.isNotEmpty(url)) {
        try {
            /************** For getting response from HTTP URL start ***************/
            URL object = new URL(url);

            HttpURLConnection connection = (HttpURLConnection) object
                    .openConnection();
            // int timeOut = connection.getReadTimeout();
            connection.setReadTimeout(60 * 1000);
            connection.setConnectTimeout(60 * 1000);
            String authorization="xyz:xyz$123";
            String encodedAuth="Basic "+Base64.encode(authorization.getBytes());
            connection.setRequestProperty("Authorization", encodedAuth);
            int responseCode = connection.getResponseCode();
            //String responseMsg = connection.getResponseMessage();

            if (responseCode == 200) {
                InputStream inputStr = connection.getInputStream();
                String encoding = connection.getContentEncoding() == null ? "UTF-8"
                        : connection.getContentEncoding();
                jsonResponse = IOUtils.toString(inputStr, encoding);
                /************** For getting response from HTTP URL end ***************/

            }
        } catch (Exception e) {
            e.printStackTrace();

        }
    }
    return jsonResponse;
} 
```

如果授权成功，则返回响应码 200

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-19T11:38:32.200

使用[RestAssurd](https://github.com/rest-assured/rest-assured/wiki/Usage#headers-cookies-status-etc)，您还可以执行以下操作：

```
String path = baseApiUrl; //This is the base url of the API tested
    URL url = new URL(path);
    given(). //Rest Assured syntax 
            contentType("application/json"). //API content type
            given().header("headerName", "headerValue"). //Some API contains headers to run with the API 
            when().
            get(url).
            then().
            statusCode(200); //Assert that the response is 200 - OK 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-12-28T15:18:26.950

第一步：获取 HttpURLConnection 对象

```
URL url = new URL(urlToConnect);
HttpURLConnection httpUrlConnection = (HttpURLConnection) url.openConnection(); 
```

第 2 步：使用 setRequestProperty 方法将标头添加到 HttpURLConnection。

```
Map<String, String> headers = new HashMap<>();

headers.put("X-CSRF-Token", "fetch");
headers.put("content-type", "application/json");

for (String headerKey : headers.keySet()) {
    httpUrlConnection.setRequestProperty(headerKey, headers.get(headerKey));
} 
```

参考[链接](https://self-learning-java-tutorial.blogspot.com/2017/09/adding-headers-using-httpurlconnection.html)

# r - 获得R中回归线上一点的置信区间？

> ID：12732424
> 
> 赞同：3
> 
> 时间：2012-10-04T17:20:40.593
> 
> 标签：r, linear-regression, confidence-interval

如何获得回归线上某一点的 CI？我很确定我应该为此使用 confint() ，但如果我尝试这个

```
confint(model,param=value) 
```

它只是给我相同的数字，就像我只是输入一样

```
confint(model) 
```

如果我尝试没有价值，它根本不会给我任何价值。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-04T17:37:58.560

你想要`predict()`而不是`confint()`. 此外，正如 Joran 所指出的，您需要清楚是否需要给定 x 的置信区间或预测区间。（置信区间表示给定 x 处 y 值的*预期*值的不确定性。预测区间表示围绕单个采样点的预测 y 值与 x 值的不确定性。）

这是一个如何在 R 中执行此操作的简单示例：

```
df <- data.frame(x=1:10, y=1:10 + rnorm(10))

f <- lm(y~x, data=df)

predict(f, newdata=data.frame(x=c(0, 5.5, 10)), interval="confidence")
#         fit       lwr       upr
# 1 0.5500246 -1.649235  2.749284
# 2 5.7292889  4.711230  6.747348
# 3 9.9668688  8.074662 11.859075

predict(f, newdata=data.frame(x=c(0, 5.5, 10)), interval="prediction")
#         fit       lwr       upr
# 1 0.5500246 -3.348845  4.448895
# 2 5.7292889  2.352769  9.105809
# 3 9.9668688  6.232583 13.701155 
```

# treeview - TreeView 绑定列表

> ID：12732427
> 
> 赞同：3
> 
> 时间：2012-10-04T17:20:49.080
> 
> 标签：treeview, hierarchicaldatatemplate

我似乎无法弄清楚如何让 TreeView 显示我检查过的列表，但无法找到相同的场景，叶子似乎总是对象而不是简单的字符串。我无法弄清楚 HierarchicalDataTemplate 和 DataTemplate 的正确组合以使其正常工作。使用以下对象。绑定发生我只看到第一级而不是叶子。

```
 public class Trunk
    {
    public Trunk(string tn)
    {
        TrunkName = tn;
        Branches = new List<Branch>();
    }
    public List<Branch> Branches { get; set; }

    public string TrunkName { get; set; }
}
public class Branch
{
    public Branch(string bn)
    {
        BranchName = bn;
        Leaves = new List<string>();
    }
    public List<string> Leaves { get; set; }

    public string BranchName { get; set; }

}

Tree = new Trunk("Root")
    {
        Branches =
            {
                new Branch("Branch1"){Leaves = {"Leaf1","Leaf2"}},
                new Branch("Branch2"){Leaves = {"Leaf3","Leaf4"}}
            }

    }; 
```

以及以下模板

```
 <TreeView ItemsSource="{Binding Trees}" >
    <TreeView.ItemTemplate>
    <HierarchicalDataTemplate  ItemsSource="{Binding Branches}">
        <TextBlock Text="{Binding Path=TrunkName}" />
            <HierarchicalDataTemplate.ItemTemplate >
                <DataTemplate>
                    <TextBlock Text="{Binding BranchName}"/>
                </DataTemplate>
            </HierarchicalDataTemplate.ItemTemplate>
        </HierarchicalDataTemplate>
    </TreeView.ItemTemplate>
</TreeView> 
```

* * *

编辑：当然，在花了几天时间试图弄清楚什么没有点击之后。发帖求助后才明白。
PS TreeView ItemsSource 是从绑定到Window DataContext 的ViewModel 设置的。

```
<TreeView ItemsSource="{Binding Trees}" >
    <TreeView.ItemTemplate>
    <HierarchicalDataTemplate  ItemsSource="{Binding Branches}">
        <TextBlock Text="{Binding Path=TrunkName}" />
            <HierarchicalDataTemplate.ItemTemplate >
                <HierarchicalDataTemplate ItemsSource="{Binding Leaves}">
                    <TextBlock Text="{Binding BranchName}"/>
                    <HierarchicalDataTemplate.ItemTemplate >
                        <DataTemplate>
                            <TextBlock Text="{Binding }"/>
                        </DataTemplate>
                    </HierarchicalDataTemplate.ItemTemplate>
                </HierarchicalDataTemplate>
            </HierarchicalDataTemplate.ItemTemplate>
        </HierarchicalDataTemplate>
    </TreeView.ItemTemplate>
</TreeView> 
```

# django - Django request.user.is_authenticated() 在发送表单数据时不起作用

> ID：12732434
> 
> 赞同：0
> 
> 时间：2012-10-04T17:21:16.413
> 
> 标签：django, forms-authentication, registration

我对 request.user.is_authenticated() 这个视图有疑问。

```
from django.http import HttpResponseRedirect
from django.contrib.auth.models import User
from django.shortcuts import render_to_response
from django.template import RequestContext
from forms import RegistrationForm

def ContributorRegistration(request):
    if request.user.is_authenticated():
        '''if user is logged in -> show profile'''
        return HttpResponseRedirect('/profile/')
    if request.method == 'POST':
        '''if post, check the data'''
        form = ContributorRegistration(request.POST)
        if form.is_valid():
            ''' if form is valid, save the data'''
            user = User.objects.create_user(username=form.cleaned_data['username'],email = form.cleaned_data['email'], password= form.cleaned_data['password'])
            user.save()
            contributor = user.get_profile()
            contributor.location = form.cleaned_data['location']
            contributor.save()
            return HttpResponseRedirect('profile.html')
        else:
            '''form not valid-> errors'''
            return render_to_response('register.html',{'form':form},context_instance=RequestContext(request))
    else: 
        '''method is not a post and user is not logged, show the registration form'''
        form = RegistrationForm()
        context={'form':form}
        return render_to_response('register.html',context,context_instance=RequestContext(request)) 
```

基本上，如果用户已登录，则显示 profile.html：**好的** ，如果用户未登录且他没有发布数据，则显示表单：**好的** ，当我从表单提交数据时，我收到此错误：

```
Request Method: POST
Request URL:    http://localhost:8000/register/
Django Version: 1.4.1
Exception Type: AttributeError
Exception Value:    
'QueryDict' object has no attribute 'user'
Exception Location: /Users/me/sw/DjangoProjects/earth/views.py in ContributorRegistration, line 9 
```

第 9 行`if request.user.is_authenticated():` 似乎在提交表单数据时`request`没有对象。`user`我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T17:25:19.160

您正在使用 request.POST 数据填充自己的视图函数，就好像它是表单一样。

```
if request.method == 'POST':
    '''if post, check the data'''
    form = ContributorRegistration(request.POST)
    if form.is_valid(): 
```

应该

```
if request.method == 'POST':
    '''if post, check the data'''
    form = RegistrationForm(request.POST)
    if form.is_valid(): 
```

为了访问`request.user`对象，您需要在应用程序中安装用户身份验证中间件。为此（非常简单），请执行以下操作：

转到您的`settings.py`并添加`'django.contrib.auth'`和`'django.contrib.contenttypes'`到元`INSTALLED_APPS`组。

您很可能需要一个 syncdb 命令才能完全安装它（您需要一些数据库表来进行用户身份验证）。

```
python manage.py syncdb 
```

这应该使它起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:37:59.557

只是我还是您的表单名称与您的视图功能相同`ContributorRegistration`？

也许你打错了。

# jqgrid - jqGrid搜索框显示在顶部

> ID：12732438
> 
> 赞同：1
> 
> 时间：2012-10-04T17:21:34.480
> 
> 标签：jqgrid

我在页面上有两个网格，一个是普通页面，另一个是模态对话框。模态对话网格具有搜索功能。当我显示搜索对话框时，它有时会显示在模态对话框下方。如何始终在顶部显示搜索对话框？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-13T09:08:11.870

您可以使用您的表单 ID 调用此函数。

```
function DragFormCenter(id) {
$(id).css('top', 0);
$(id).css('right', 0);} 
```

# java - java - 如何在java中的inputStream之前检测文本文件的编码？

> ID：12732439
> 
> 赞同：3
> 
> 时间：2012-10-04T17:21:34.357
> 
> 标签：java

> **可能重复：**
> [Java：如何确定流的正确字符集编码](https://stackoverflow.com/questions/499010/java-how-to-determine-the-correct-charset-encoding-of-a-stream)

我正在尝试在 java 中读取一个 ANSI 文本文件，但是我不知道里面文本的编码，有没有办法在使用 FileInputStream 获取文本文件之前检测它的编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:41:25.373

我认为在实际阅读文本文件之前不可能知道它的编码。在尝试确定它的编码之前，您必须读取几个字节。

评论中提到的工具要求您在检测文件编码之前完全做到这一点（实际上它说的是*几千字节）。*

# zend-framework - Zend_Db_Expr() 在 Zend Framework 的视图中没有按预期执行

> ID：12732443
> 
> 赞同：-1
> 
> 时间：2012-10-04T17:21:45.930
> 
> 标签：zend-framework, view, zend-db

我只想用 Zend Framework 完成这个简单的任务：

```
<input type="hidden" name="modification_date" value="<?php echo new Zend_Db_Expr('NOW()');?>" /> 
```

如您所见，我正在尝试实例化 Zend_Db_Expr 以便能够`NOW()`在视图中的输入中插入日期，但这不起作用，因为我得到的是这个`value="NOW"`而不是类似的东西`value="2012-10-04 12:14:56"`

看起来很简单。我以前有这个工作，但由于另一个原因你不得不卸载并重新安装 MySQL，现在它不起作用。

我也尝试过`new Zend_Db_Expr('SELECT NOW();')`，因为在我的 MySQL 中，如果我现在以这种方式执行，我得到了日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T06:25:01.033

`Zend_Db_Expr` doesn't return value of your statement. It returns specific predefined string for query. Why you can not use `Zend_Date`?

```
<input type="hidden" name="modification_date" value="<?php echo Zend_Date::now();?>" /> 
```

# windows - 如何在启动时重定向stderr *而不*重定向stdin和stdout？

> ID：12732445
> 
> 赞同：2
> 
> 时间：2012-10-04T17:21:58.817
> 
> 标签：windows, platform-sdk

在 Windows 中，我想使用 CreatePipe 和 CreateProcess 来启动一个进程，并捕获写入 stderr 的文本。

MSDN 上有示例代码：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms682499 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682499(v=vs.85).aspx)

我的问题是我想重定向和捕获 STDERR，但不理会 STDIN 和 STDOUT。让它们仍然绑定到子进程的控制台窗口。（如果子进程是控制台进程而不是窗口进程。）

如果我按照示例代码，并将 STARTUPINFO.hStdError 设置为我的管道句柄，并将 STARTUPINFO.hStdOutput 和 STARTUPINFO.hStdInput 设置为 INVALID_HANDLE_VALUE，则子进程将 INVALID_HANDLE_VALUE 设置为 stdin 和 stdout；所有读取失败；所有 printf 都无处可去；并且控制台窗口完全空白。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T01:20:48.333

这应该有效：

```
STARTUPINFO.hStdOutput = GetStdHandle(STD_OUTPUT_HANDLE);
STARTUPINFO.hStdInput = GetStdHandle(STD_INPUT_HANDLE); 
```

或者，如果您不能给父进程一个控制台，您可以将 hStdOutput 和 hStdInput 设置为 INVALID_HANDLE_VALUE 并通过 cmd.exe 调用，如下所示：

```
cmd /c "subprocess.exe > con < con" 
```

请注意，如果您还不知道， [`SHGetFileInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762179%28v=vs.85%29.aspx)with会告诉您可执行文件是否是控制台应用程序。`SHGFI_EXETYPE`

# prolog - Prolog - 如何检查谓词是否多次成功

> ID：12732449
> 
> 赞同：5
> 
> 时间：2012-10-04T17:22:11.763
> 
> 标签：prolog

我有一个这样的事实数据库：

```
li(a,2).
li(b,3).
li(b,1).
li(c,2).
li(d,1).
li(d,1). 
```

如果存在多个事实 li(Let,_)，我需要编写一个成功的谓词 more(+Let)。

例如查询 more(b) 和 more(d) 会成功，但 more(a) 和 more(c) 不会。我的想法是检查 li(Let,_) 是否多次成功，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T18:02:02.213

尝试[`findall/3`](http://www.swi-prolog.org/pldoc/man?predicate=findall/3)：

```
findall(X, li(d,X), L), length(L,N), N>1. 
```

抽象`d`出来并制作谓词是微不足道的。正确的？:)

* * *

如果您不想使用任何谓词，例如`findall`，您可以更改知识的表示 - 将其降低一个级别，可以这么说：

```
my_knowledge(li, [a-2,b-3,b-1,c-2,d-1,d-1]). 
```

然后你可以使用 SWI Prolog 的谓词[`select/3`](http://www.swi-prolog.org/pldoc/doc_for?object=select/3)来处理它：

```
select_knowledge(kn, key, R):-
  my_knowledge(kn,L),
  select_key(L,key,R).

select_key(L,K,R):-
  select(K-X,L,L1) -> R=[X|R1], select_key(L1,K,R1)
  ; R = []. 
```

您可以将最后一个谓词重写为列表的基本递归，然后在获得前 N 个结果后对其进行调整以停止。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-07T19:42:26.507

```
more_than_once(Goal) :-
   \+ \+ call_nth(Goal,2). 
```

与[此答案](https://stackoverflow.com/questions/11364634/count-the-number-of-call-of-a-clause-prolog/11400256#11400256)`call_nth/2`中定义的一样。

与提出的其他解决方案相比，此解决方案的最大优势在于，即使存在非常大的答案序列，它也会迅速成功。事实上，它甚至会成功获得无限的答案序列：

```
?- more_than_once（重复）。
真的。

?- more_than_once（介于（1,100000，_））。
真的。

```

（实现`call_nth/2`使用了一些非标准的、低级的 SWI 内置。可以避免这种情况，但更令人头疼。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T18:24:59.683

SWI-Prolog 有库（[聚合](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.1%27,swi%28%27/doc/Manual/aggregate.html%27%29%29)）。

```
:- [library(aggregate)].

more(Key) :- aggregate_all(count, li(Key, _), C), C > 1. 
```

测试：

```
?- more(b).
true.

?- more(a).
false. 
```

它不是很容易学习，但对处理这些常见任务很有用。如果你有一个非常大的代码库，那么 findall （以及聚合，它使用 findall 内部）可能效率低下，构建一个列表只是为了计算它的元素。

然后你可以使用基于副作用的谓词：在[这个](https://stackoverflow.com/a/7520461/874024)相关的答案中，你会发现这样的实用程序。为了获得最大效率，请参阅注释，其中解释了如何使用 nb_setval/nb_getval...

# ruby - 为什么我收到 FactoryGirl 错误数量的参数错误？

> ID：12732450
> 
> 赞同：1
> 
> 时间：2012-10-04T17:22:16.317
> 
> 标签：ruby, rspec, factory-bot

在非 Rails 应用程序中出现 FactoryGirl 的奇怪行为。得到错误数量的参数错误......不知道为什么。

```
gideon@thefonso ~/Sites/testing (master)$ rspec spec
/Users/gideon/.rvm/gems/ruby-1.9.3-p194/gems/factory_girl-4.1.0/lib/factory_girl/syntax/default.rb:6:in `define': wrong number of arguments (1 for 0) (ArgumentError)
    from /Users/gideon/Sites/testing/spec/factories.rb:1:in `<top (required)>' 
```

以下是涉及的文件...

login_user_spec.rb

```
require_relative '../spec_helper'
require_relative '../lib/login_user'

describe "Existing User Log in Scenario", :type => :request do

  before :all do
    @user = FactoryGirl(:user)
  end

    xit "should allow user to select login from top nav" do 
        visit "/" 
        within("#main-header")do
            click_link 'Log In' 
        end

        page.should have_content('Log in to your account')
    end  

    it "and fill in login form" do
        visit "/login" 
        within("#login-form")do
            fill_in 'user-email', :with => @user.email
            fill_in 'user-password', :with => @user.password
        end

        #FIXME - the design crew will make this go away     
        within("#login-form") do 
            click_link '#login-link' #this gives false failing test...geek query...why?
        end

        page.should have_content('Manage courses')
    end
end 
```

工厂.rb

```
FactoryGirl.define :user do |u|
    u.email     "joe@website.com"
    u.password  "joe009"
end 
```

用户.rb

```
 class User
    attr_accessor :email, :password
  end 
```

spec_helper.rb

```
require 'rubygems'
require 'bundler/setup'
require 'capybara'
require 'rspec'
require 'capybara/rspec'
require 'json'

require 'capybara/dsl'
# Capybara configuration
Capybara.default_driver = :selenium
Capybara.app_host = "http://www.website.com"

require 'factory_girl'
# give me ma stuff
FactoryGirl.find_definitions

require "rspec/expectations"

include Capybara::DSL
include RSpec::Matchers 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T20:54:30.860

尝试使用[自述文件中的新语法](https://github.com/thoughtbot/factory_girl)

```
FactoryGirl.define do
  factory :user do
    email "joe@website.com"
    password "joe009"
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T01:28:56.397

答案： :user 是保留字..将其更改为 :stuff ...现在可以正常工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T21:09:17.547

如果这是一个非 Rails 应用程序，您必须先创建一个`User`类。我不确定您是否必须拥有带有名称、密码和电子邮件的实例变量，但您肯定必须在某处定义该类。

有关更多信息，请参阅 Github 上的[入门](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#custom-construction)文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-13T14:31:45.700

尝试这个

```
FactoryGirl.define do
    factory :user do |u|
        u.email     "joe@website.com"
        u.password  "joe009"
    end
end 
```

# c++ - 在 gcc 中使用内联汇编程序调用方法

> ID：12732453
> 
> 赞同：0
> 
> 时间：2012-10-04T17:22:35.933
> 
> 标签：c++, gcc, assembly, v8, gnu-assembler

正如我所说，我正在尝试使用 gcc 调用使用内联 asm 的方法。所以，我搜索了 x86 是如何工作的，以及调用约定是什么，然后我尝试了一些简单的调用女巫完美地工作。然后我尝试嵌入 v8，这是我最初的目标，但效果不佳......这是我的代码：

```
v8::Handle<v8::Value> V8Method::staticInternalMethodCaller(const v8::Arguments& args, int argsize, void* object, void* method)
{
    int i = 0;
    char* native_args;

    // Move the ESP to the end of the array (argsize is the array size in byte)
    asm("subl %1, %%esp;"
        "movl %%esp, %0;"
        : "=r"(native_args)
        : "r"(argsize));

    // This for loop only converts V8 type to native type,
    // and puts them in the array:

    for (; i < args.Length(); ++i)
    {
        if (args[i]->IsInt32())
        {
            *(int*)(native_args) = args[i]->Int32Value();

            native_args += sizeof(int);
        }
        else if (args[i]->IsNumber())
        {
            *(float*)(native_args) = (float)(args[i]->NumberValue());

            native_args += sizeof(float);
        }
    }

    // Then call the method:

    asm("call *%1;" : : "c"(object), "r"(method));

    return v8::Null();
} 
```

这是生成的程序集：

```
__ZN3srl8V8Method26staticInternalMethodCallerERKN2v89ArgumentsEiPvS5_:
LFB1178:
    .cfi_startproc
    .cfi_personality 0,___gxx_personality_v0
    .cfi_lsda 0,LLSDA1178
    pushl   %ebp
    .cfi_def_cfa_offset 8
    .cfi_offset 5, -8
    movl    %esp, %ebp
    .cfi_def_cfa_register 5
    pushl   %ebx
    subl    $68, %esp
    .cfi_offset 3, -12
    movl    $0, -12(%ebp)
    movl    12(%ebp), %eax
/APP
 # 64 "method.cpp" 1
    subl %eax, %esp; movl %esp, %ebx; addl $4, %esp
 # 0 "" 2
/NO_APP
    movl    %ebx, -16(%ebp)
    jmp L74
L77:
    movl    -12(%ebp), %eax
    movl    %eax, (%esp)
    movl    8(%ebp), %ecx
LEHB25:
    call    __ZNK2v89ArgumentsixEi
LEHE25:
    subl    $4, %esp
    movl    %eax, -36(%ebp)
    leal    -36(%ebp), %eax
    movl    %eax, %ecx
    call    __ZNK2v86HandleINS_5ValueEEptEv
    movl    %eax, %ecx
LEHB26:
    call    __ZNK2v85Value7IsInt32Ev
LEHE26:
    testb   %al, %al
    je  L75
    movl    -12(%ebp), %eax
    movl    %eax, (%esp)
    movl    8(%ebp), %ecx
LEHB27:
    call    __ZNK2v89ArgumentsixEi
LEHE27:
    subl    $4, %esp
    movl    %eax, -32(%ebp)
    leal    -32(%ebp), %eax
    movl    %eax, %ecx
    call    __ZNK2v86HandleINS_5ValueEEptEv
    movl    %eax, %ecx
LEHB28:
    call    __ZNK2v85Value10Int32ValueEv
LEHE28:
    movl    %eax, %edx
    movl    -16(%ebp), %eax
    movl    %edx, (%eax)
    movl    -16(%ebp), %eax
    movl    (%eax), %ebx
    movl    $LC4, 4(%esp)
    movl    $__ZSt4cout, (%esp)
LEHB29:
    call    __ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc
    movl    -16(%ebp), %edx
    movl    %edx, (%esp)
    movl    %eax, %ecx
    call    __ZNSolsEPKv
    subl    $4, %esp
    movl    $LC5, 4(%esp)
    movl    %eax, (%esp)
    call    __ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc
    movl    %ebx, (%esp)
    movl    %eax, %ecx
    call    __ZNSolsEi
    subl    $4, %esp
    movl    $__ZSt4endlIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_, (%esp)
    movl    %eax, %ecx
    call    __ZNSolsEPFRSoS_E
    subl    $4, %esp
    addl    $4, -16(%ebp)
    jmp L76
L75:
    movl    -12(%ebp), %eax
    movl    %eax, (%esp)
    movl    8(%ebp), %ecx
    call    __ZNK2v89ArgumentsixEi
LEHE29:
    subl    $4, %esp
    movl    %eax, -28(%ebp)
    leal    -28(%ebp), %eax
    movl    %eax, %ecx
    call    __ZNK2v86HandleINS_5ValueEEptEv
    movl    %eax, %ecx
LEHB30:
    call    __ZNK2v85Value8IsNumberEv
LEHE30:
    testb   %al, %al
    je  L76
    movl    -12(%ebp), %eax
    movl    %eax, (%esp)
    movl    8(%ebp), %ecx
LEHB31:
    call    __ZNK2v89ArgumentsixEi
LEHE31:
    subl    $4, %esp
    movl    %eax, -24(%ebp)
    leal    -24(%ebp), %eax
    movl    %eax, %ecx
    call    __ZNK2v86HandleINS_5ValueEEptEv
    movl    %eax, %ecx
LEHB32:
    call    __ZNK2v85Value11NumberValueEv
LEHE32:
    fstps   -44(%ebp)
    flds    -44(%ebp)
    movl    -16(%ebp), %eax
    fstps   (%eax)
    movl    -16(%ebp), %eax
    movl    (%eax), %ebx
    movl    $LC4, 4(%esp)
    movl    $__ZSt4cout, (%esp)
LEHB33:
    call    __ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc
    movl    -16(%ebp), %edx
    movl    %edx, (%esp)
    movl    %eax, %ecx
    call    __ZNSolsEPKv
    subl    $4, %esp
    movl    $LC5, 4(%esp)
    movl    %eax, (%esp)
    call    __ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc
    movl    %ebx, (%esp)
    movl    %eax, %ecx
    call    __ZNSolsEf
    subl    $4, %esp
    movl    $__ZSt4endlIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_, (%esp)
    movl    %eax, %ecx
    call    __ZNSolsEPFRSoS_E
    subl    $4, %esp
    addl    $4, -16(%ebp)
L76:
    incl    -12(%ebp)
L74:
    movl    8(%ebp), %ecx
    call    __ZNK2v89Arguments6LengthEv
    cmpl    -12(%ebp), %eax
    setg    %al
    testb   %al, %al
    jne L77
movl    16(%ebp), %eax
    movl    20(%ebp), %edx
    movl    %eax, %ecx
/APP
 # 69 "method.cpp" 1
    call *%edx;
 # 0 "" 2
/NO_APP
    call    __ZN2v84NullEv
    leal    -20(%ebp), %edx
    movl    %eax, (%esp)
    movl    %edx, %ecx
    call    __ZN2v86HandleINS_5ValueEEC1INS_9PrimitiveEEENS0_IT_EE
    subl    $4, %esp
    movl    -20(%ebp), %eax
jmp L87
L83:
    movl    %eax, (%esp)
    call    __Unwind_Resume
L84:
    movl    %eax, (%esp)
    call    __Unwind_Resume
L85:
    movl    %eax, (%esp)
    call    __Unwind_Resume
L86:
    movl    %eax, (%esp)
    call    __Unwind_Resume
LEHE33:
L87:
    movl    -4(%ebp), %ebx
    leave
    .cfi_restore 5
    .cfi_restore 3
    .cfi_def_cfa 4, 4
    ret
    .cfi_endproc 
```

所以，这个静态方法是一个回调（我之前做了一些签名检查），女巫应该调用提供有效 C++ 本机参数的特定方法。为了加快一点速度并避免 args 的副本，我试图将所有参数加载到本地数组中，然后修改 ESP 以使该数组成为参数。

方法调用效果很好，但我没有得到正确的参数......我对函数调用、调用约定和大量测试（都成功）做了很多研究，但我不明白什么是继续......我错过了什么吗？

基本上，被调用者应该在 esp 的顶部获取它的参数，在我的例子中，数组......（我精确地说数组是有效的）

我使用 GCC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:39:29.787

你正在尝试的东西有很多问题。

*   您不能`%esp`使用内联汇编进行修改，因为编译器可能正在使用`%esp`它来引用其局部变量和参数。如果编译器改用它，这*可能会*`%ebp`起作用，但不能保证。

*   在返回之前，您永远不会撤消`%esp`修改。

*   在您的内联汇编中，您需要声明它`%esp`是副作用的。

*   您可能需要`object`作为无声的第一个参数传递。 `method`是实例方法，而不是静态方法？

*   所有这些都取决于您使用的调用约定：`cdecl`,`stdcall`等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:50:13.297

我建议不要自己尝试这样做，有很多烦人的小细节必须完全正确。我建议改为使用[FFCALL 库](http://www.haible.de/bruno/packages-ffcall.html)，特别是[avcall](http://www.haible.de/bruno/documentation/ffcall/avcall/avcall.html)方法集来执行此操作。

我想像这样的事情会做你想要的：

```
v8::Handle<v8::Value> V8Method::staticInternalMethodCaller(const v8::Arguments& args, int argsize, void* object, void* method)
{
    // Set up the argument list with the function pointer, return type, and
    // pointer to value storing the return value (assuming int, change if
    // necessary)
    int return_value;
    av_alist alist;
    av_start_int(alist, method, &return_value);

    for(int i = args.Length() - 1; i >= 0; i--)
    {
        // Push the arguments onto the argument list
        if (args[i]->IsInt32())
        {
            av_int(alist, args[i]->Int32Value());
        }
        else if (args[i]->IsNumber())
        {
            av_double(alist, (float)(args[i]->NumberValue());
        }
    }

    av_call(alist);  // Call the function

    return v8::Null();
} 
```

# c++ - C/C++ 逗号运算符让我感到困惑。语言律师？

> ID：12732454
> 
> 赞同：9
> 
> 时间：2012-10-04T17:22:45.717
> 
> 标签：c++, visual-c++

我在 Boost 文档的示例中遇到了这段代码：

```
std::vector<int> input;
input += 1,2,3,4,5,6,7,8,9; 
```

真可爱。Boost 有一个 operator+= 模板，它利用了逗号在大多数情况下是一个运算符这一事实。（明智地，C++ 不允许黑客重载“*运算符*”。）

我也喜欢写可爱的代码，所以我用逗号操作符玩了一些。我发现了一些对我来说很奇怪的东西。你认为下面的代码会打印什么？

```
#include <iostream>
int main() {
    int i;
    i = 1,2;
    std::cout << i << ' ';
    i = (1,2);
    std::cout << i << std::endl;
} 
```

你猜对了。VC++ 2012 打印“1, 2”。那是怎么回事？

[编辑：我应该更准确。应该说 C++ 不允许重载 int 列表中的运算符“，”。或者更好的是，什么都没有。',' 运算符可以为类和枚举重载。]

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-04T17:26:22.837

**情况1：**

`i = 1,2;`

`=`优先级高于`,`

因此，`1`被分配给`i`。

由于 assignment 评估为`lvalue`in `c++`，（评估为`rvalue`in `c`）它变成`i,2`which 评估为`2`（请参阅 NOTE）

**案例二：**

`i = (1,2);`

`()`优先级高于`=`

`expressions`或`operands`由`,`运算符分隔评估为最后一个的值，`expression`或`operand`因此`2`分配给`i`

* * *

**笔记**

a `comma expression`like`33,77,x,y,z`是**从左到右**评估的。

这种逗号表达式的结果是**最右边表达式**的值。

例子

```
Consider, int z=100; 
then
1,4,5; //evaluates to 5
1,100,z+100; //evaluates to 200 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T17:25:56.317

简单：“=”具有更高的优先级。

```
i = 1,2; 
```

就像 (i=1),2，表示表达式的结果是 2 但它被丢弃了。

```
i = (1,2); 
```

(1,2) 的结果是 2。

编辑：这可能是这样的

```
for (i=0, j=0; ...) 
```

按预期工作。

# java - Heroku 和骡子

> ID：12732455
> 
> 赞同：2
> 
> 时间：2012-10-04T17:22:47.037
> 
> 标签：java, heroku, mule

我有一个要部署到 Heroku 的骡子应用程序。有任何人将 Mule 3 应用程序部署到 Heroku。任何指针都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T17:55:21.710

为您的 Mule 应用程序创建一个简单的引导程序主程序：

```
public class MuleBootstrap
{
    public static void main(final String[] args) throws Exception
    {
        final MuleServer ms = new MuleServer("mule-config.xml");
        ms.start(true, true);
    }
} 
```

并使用 Maven 构建和打包它。

[在这个 Heroku 教程](https://devcenter.heroku.com/articles/java)中找到实际部署打包应用程序的灵感。

# ruby-on-rails - 为什么 ORM 不自动在内存中设置反向关联？

> ID：12732461
> 
> 赞同：3
> 
> 时间：2012-10-04T17:23:06.030
> 
> 标签：ruby-on-rails, ruby, activerecord, orm, datamapper

考虑以下人为设计的示例：

```
class Company < ActiveRecord::Base
  has_many :projects
end

class Project < ActiveRecord::Base
  belongs_to :company
end

c, p = Company.new, Project.new

c.projects << p
p.company  => c 
```

当一个项目被添加到集合中时，Rails 会自动设置与公司的反向关联。不幸的是，这是唯一一次 Rails 足够聪明地做到这一点。另一方的赋值不会将对象添加到反向集合中。

```
c, p = Company.new, Project.new

p.company = c
c.projects => [] 
```

多对多关系也不进行任何自动反向引用分配。ActiveRecord 和 DataMapper 都表现出这种行为。这有技术原因吗？在保存和重新加载发生之前的一致关联将大大加快某些测试用例的速度，并且总体上会使事情变得更清洁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:24:29.607

请参阅[https://github.com/rails/rails/pull/9522](https://github.com/rails/rails/pull/9522)。自动反向关联可能会成为 Rails 未来版本的一个特性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:30:06.643

您误解了这两个操作的作用，尽管它是一种微妙的效果，在文档中可能没有非常清楚地传达。

`<<`操作员不仅为您的项目分配，`company_id`而且如果记录存在，它也会保存它。它还将它添加到`projects`公司模型的缓存中。

该`company=`方法只分配对象，不进行对象之间的通信。无法按您的意愿加载未保存的记录。这些记录实际上都不在数据库中，因此`c.projects`除非您像在第一种情况下那样明确地向其中添加某些内容，否则它将是一个空数组。

通常，未保存的对象的行为不如它们的数据库持久对象。

# asp.net - 更改共享权限导致 ASP.NET 重新编译

> ID：12732465
> 
> 赞同：1
> 
> 时间：2012-10-04T17:23:16.340
> 
> 标签：asp.net, iis, dynamic, share, recompile

我们的站点位于一个主文件夹下，我们将其称为“d:\sites”。"d:\sites" 共享为 \server1\sites，对我们的 Dev 和 QA 组具有只读访问权限。我向共享权限（不是 NTFS）添加了另一个只读组，并且该站点开始重新编译。我不确定我刚刚看到了什么，所以我在另一台服务器上做了，同样的行为发生了。

我们使用动态重新编译，我找不到说明这应该导致重新编译发生的参考（参考文献[1]：http: [//msdn.microsoft.com/en-us/library/ms366723%28v=VS .100%29.aspx](http://msdn.microsoft.com/en-us/library/ms366723%28v=VS.100%29.aspx) )

有没有其他人看到过这个，或者知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:28:37.777

如果权限是从父级继承的，则添加此新权限会更改文件。文件状态的这种变化被 IIS 拾取为变化，因此触发了动态重新编译。IIS 甚至将权限更改视为对代码库的更改。

# c# - 如何同时发送多个 http 请求？

> ID：12732469
> 
> 赞同：0
> 
> 时间：2012-10-04T17:23:28.613
> 
> 标签：c#, .net, multithreading, web-services, windows-services

我有一个 eBay 帐户。为了轻松更新我的产品，我用 C# 创建了一个 Windows 服务。它等待（通过`FileSystemWatcher`）一个 xml 文件，一旦文件出现，服务就会读取它并通过其 API 向 eBay 服务器发送请求。一个文件可能包含大约 1000-3000 行。

以前我曾经创建**12 个**线程以使其更快。我不知道为什么我选择了**12 个**线程，我认为这已经足够了：不要太多也不要太少。

所以这是一个我以前看起来的方法（有点脏，**12**应该是一个常数）

```
private static void UpdateAsync(IEnumerable<ProductInfo> products)
        {
            ProductInfo[] productsInfo = items.ToArray();
            Thread[] threads = new Thread[12];
            bool sendPartialy = productsInfo .Length > 12;
            int delta = 0;
            for (int i = 0; i < productsInfo.Length; i++)
            {
                if (sendPartialy )
                {
                    if (i != 0 && i % 12 == 0)
                    {
                        WaitForExecutedThreads(threads);
                        delta = 12 * (i / 12);
                    }
                }

                ProductInfo product = ProductInfo[i];
                threads[i - delta] = new Thread(_ => product.UpdateItem(context));
                threads[i - delta].Start();
            }

            WaitForExecutedThreads(threads);
        } 
```

**然后他们告诉我，因为只有一个**网络接口，所以不需要使用线程：允许同时执行 12 个 https 请求是很窄的，因此，每个线程都将等待另一个线程。

这就是为什么我决定根本不使用多线程，而只使用这样的简单请求：

```
 var itemInfoLights = new List<ItemInfoLight>();
    foreach (var p in productsInfo )
    {
       p.UpdateItem(context);
    } 
```

我知道，单独发送所有请求太糟糕了，因为每个请求都有自己的标头等……这效率不高。

那么，这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T17:40:39.903

由于在此网络操作期间您不需要 CPU，因此创建新线程并不是最佳选择。（当 CPU 是实际问题时，通常每个处理器只需要 1 个线程。因此，2 或 4 个线程是理想的。）

如果您有该`UpdateItem`方法的异步版本，则可以根据要更新的项目多次调用它，然后在回调函数中处理完成。这会更有效率，因为您不会启动实际上不做任何事情的线程，但您将几乎同时执行多个请求。

如果您没有该方法的异步版本，则使用线程将是获得并行更新调用的唯一简单方法。你可以`[ThreadPool.QueueUserWorkItem](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.queueuserworkitem.aspx)`改用。这利用了已经可用的线程，避免了每次启动新线程的成本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T23:02:22.247

与执行 Web 服务调用的时间相比，启动线程的成本微不足道。对我来说效果很好的方法是为您要发送的每个请求`Queue`创建一个实例，该方法使用一个工作方法，该方法在 Web 服务调用完成后调用一个回调。`Thread`线程仅在启动时才消耗资源，而不是在它们刚刚实例化时。

然后我使用一个主管类，它使线程出队，启动它，然后将它添加到`Dictionary`由线程'键控的`ManagedThreadId`. 重复此操作，直到达到 12 个并发连接的最大数量。当每个线程完成时，它会调用回调方法返回给主管，然后主管从线程中删除线程`Dictionary`并启动另一个排队的线程。一旦`Queue`and`Dictionary`为空，你就完成了。

If you wire a UI app to your service you can adjust the thread limit while monitoring your throughput and the queued and active threads so you can play with it in real-time.

You should also set the `maxconnection` property in your app.config to something like 100 to give you room to experiment.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T17:33:22.097

因为我猜你想要最高效率，所以我建议你使用 . **网络线程池**。有一个`ThreadPool`类将从 pc 分配最大线程。网上有很多例子。

[其中之一在这里。msdn 举例](http://msdn.microsoft.com/en-us/library/ms973903.aspx)

ThreadPool.QueueUserWorkItem(YourRequestFunctionName, parameterObject);

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T17:29:27.550

我不确定这`**only one** network interface`部分是什么意思。听起来像是一些不好的建议。

甚至浏览器在下拉网页时通常会同时发出 5 到 10 个请求以获取各个部分（css、javascript、图像、页面本身......）。因此，拥有 12 个线程应该没问题。

关于标头等，对于单个请求，您无法避免这种情况。唯一的另一种方法是 API 允许您在单个事务中发送多个请求。我不熟悉 eBay API，但我想他们确实支持它。

您可能会查看此问题以获取提示：[CompleteSale Ebay API for multiple items](https://stackoverflow.com/questions/12349235/completesale-ebay-api-for-multiple-items)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T17:29:31.367

当我做这样的事情时，我使用异步 HttpRequest 方法，它对我有用。查看 HttpWebRequest.BeginGetResponse 和 HttpWebRequest.BeginGetRequestStream。

还有更多信息： http: [//msdn.microsoft.com/en-us/library/86wf6409 (VS.71).aspx](http://msdn.microsoft.com/en-us/library/86wf6409(VS.71).aspx)

我认为这是正确的方法

# c - 将 C Array 打印到终端

> ID：12732470
> 
> 赞同：1
> 
> 时间：2012-10-04T17:23:29.760
> 
> 标签：c, unix

我需要从 C 中读取一个文件，将其存储在一个数组中并打印其内容。出于某种原因，我在接近尾声的输出中不断看到八进制。在打开文件后计算其中有多少行和字符后，我正在动态创建数组。

输出：

```
Abies 
abies 
abietate 
abietene 
abietic 
abietin
\320ѿ_\377Abietineae --> umlaut? where did he come from?
y\300_\377abietineous 
```

代码：

```
int main(int argc, char ** argv) {

char c = '\0';
FILE * file;
int i = 0, j = 0, max_line = 0, max_char_per_line = 0;

/* get array limits */
file = fopen(argv[1], "r");
while ((c = fgetc(file)) != EOF){
    if (c == '\n'){
        max_line++; j++;
        if (j > max_char_per_line){
            max_char_per_line = j;
        }
        j = 0;
        continue;
    }
    j++;
}

rewind(file);
/* declare array dynamically based on max line and max char */
char word[max_line][max_char_per_line];

/*read in file*/
j = 0; c = '\0';

while ((c = fgetc(file)) != EOF){
    if (c == '\n'){
        word[i][j] = '\0';
        i++; j=0;
        continue;
    }

    word[i][j] = c;
    j++;
}
word[i][j] = '\0';

fclose(file);
for (i = 0; i < max_line; i++){
    printf("%s\n", word[i]);
}

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T17:29:40.430

更改读取例程：

```
 if (c == '\n'){
        word[i][j] = 0x0;
        i++; j=0;
        continue;
    } 
```

并在 printf 例程中添加“\n”。

```
for (i = 0; i < max_line; i++){
    printf("%s\n", word[i]);
} 
```

C 字符串以零结尾，而不是“\n”结尾，因此当您 printf() 对它们进行打印时，`printf()`不知道在哪里停止打印。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T17:28:50.140

你没有终止你的字符串。您需要在`\0`每行的最后一个字符之后添加空终止符：。

在您的第一个循环中，为最长的行确定足够的空间，包括换行符。

*   如果要将换行符*保留*在输入数组中，只需将 1 添加到`max_char_per_line`，并在完成第二个循环中的每一行时在换行符后添加空终止符。

*   如果您*不需要*输入数组中的换行符，只需将该空间用作空终止符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T17:33:12.127

并不是说它准确地解释了你观察到的现象，但它可能。在计算数组边界时，您似乎没有考虑终止零字节。只是`++`做计算后的 max_char_per_line 。如果不能保证数组是零初始化的，不要忘记添加这个零字节。

*编辑*：您是在输出*之后*看到这些行还是在这些输出行中看到这些行？

# code-coverage - ESB 代码覆盖率

> ID：12732473
> 
> 赞同：1
> 
> 时间：2012-10-04T17:23:37.270
> 
> 标签：code-coverage, esb

我想为 esb 进程做代码覆盖。例如，如果我有一个包含主流程 A 和子流程 B 和 C 的项目。这些流程有步骤 x、y、z 等。如果我执行测试用例，我想对此进行覆盖。覆盖范围应显示已执行和未执行的步骤，以及可能执行的次数。是否有可能做到这一点。市场上已经有任何可用的工具吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:29:38.237

我相信[JaCoCo](http://www.eclemma.org/jacoco/)可以帮助你。您在 ESB JVM 上安装 Java 代理并运行一些功能/集成测试。JaCoCo 像任何其他代码覆盖工具一样收集有关所有已执行方法的信息，并将它们以二进制格式转储到文件中。

# internet-explorer - IE9 开发人员工具栏 XML5602：输入意外结束

> ID：12732475
> 
> 赞同：0
> 
> 时间：2012-10-04T17:23:45.280
> 
> 标签：internet-explorer

开发人员 Toobar 抛出了我`XML5602: Unexpected end of input. , line 1 character 175`，但我无法提及发生问题的地方。如何调试这样的错误？

![在此处输入图像描述](../Images/31bb87a089f0a2d1febbe2b0977c2d30.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:16:18.600

它也可能在您的样式表中！引用您的 Web 环境不喜欢的 SVG 样式。我将以下 SVG 背景关联到我的 SharePoint 环境中的“表单”元素...

CSS：

```
.my-button {
background: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZX");

background: -moz-linear-gradient(top,  #eeeeee 0%, #ffffff 100%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#eeeeee), color-stop(100%,#ffffff));
background: -webkit-linear-gradient(top,  #eeeeee 0%,#ffffff 100%);
background: -o-linear-gradient(top,  #eeeeee 0%,#ffffff 100%);
background: -ms-linear-gradient(top,  #eeeeee 0%,#ffffff 100%);
background: linear-gradient(to bottom,  #eeeeee 0%,#ffffff 100%);
} 
```

而当我拿出那条 svg+xml 行时，IE 又恢复了正常。希望这对某人有所帮助，特别是如果您像我一样进行大量前端编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:37:43.863

我能够通过打开一个无效的 xml 文件来重现这个问题。如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<root>
  <value example="true" /> 
```

在上面的示例中，我“忘记”关闭 .

如果您在浏览器中打开它，您将不会收到此错误：

```
<?xml version="1.0" encoding="utf-8" ?>
<root>
  <value example="true" />
</root> 
```

**简而言之：您忘记在某处关闭标签！**

# google-maps - Google API v3、OpenLayers 2.12 和标线（经度/纬度）线之间的干扰

> ID：12732481
> 
> 赞同：0
> 
> 时间：2012-10-04T17:24:01.407
> 
> 标签：google-maps, openlayers

当我在 Openlayers 2.12 中加载 Google Maps API V3 并显示刻度线时，刻度线会覆盖来自谷歌的版权信息。有没有办法让他们在谷歌版权信息上停下来让它看起来不那么混乱？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:45:24.623

我最终将谷歌图标的不透明度更改为更不透明，然后经纬网看起来不那么杂乱。

像这样的东西对我有用：

```
.olLayerGoogleCopyright{
background-image: -webkit-linear-gradient(left, rgba(255, 255, 255, 0) 0px, rgba(153, 179, 204, 0.9) 26px);
background-image: -moz-linear-gradient(left center , rgba(255, 255, 255, 0) 0px, rgba(204,213,229, 0.9) 26px);
color:#686868;
} 
```

# iphone - IOS设置自定义委托

> ID：12732484
> 
> 赞同：2
> 
> 时间：2012-10-04T17:24:17.783
> 
> 标签：iphone, objective-c, ios, delegates

我正在研究 IOS HelloWorld 示例，并且我有一个关于为 TextField 设置委托的问题。在示例中，它就像从 TextField 拖动控件到 ViewController 一样简单。但是现在说我想创建一个自定义类来充当我的委托：

```
#import <Foundation/Foundation.h>
@interface SweetAssDelegate : NSObject <UITextFieldDelegate>
- (BOOL)textFieldShouldReturn:(UITextField *)theTextField;
@end

#import "SweetAssDelegate.h"

@implementation SweetAssDelegate
- (BOOL)textFieldShouldReturn:(UITextField *)theTextField
{
    NSLog(@"Calling Delegate");
    [theTextField resignFirstResponder];
    return YES;
}
@end 
```

如何将此类设置为 TextField 的代表？据我所知，没有办法通过 GUI 完成此操作。我尝试在窗口加载后手动设置委托，但没有成功：

```
#import "ViewController.h"
#import "SweetAssDelegate.h"

@interface ViewController ()
@property (weak, nonatomic) IBOutlet UITextField *inputField;
@end

- (void)viewDidLoad
{
    [super viewDidLoad];

    SweetAssDelegate *foo = [[SweetAssDelegate alloc] init];
    [self.inputField setDelegate:foo];

    NSLog(@"Delegate: %@", self.inputField.delegate);
} 
```

调出键盘时，我实际上收到了某种内存异常？有任何想法吗？谢谢。

作为一个附带问题，我应该始终在哪里使用 viewDidLoad 来初始化任何变量？我注意到init没有被调用？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:32:16.907

您的委托对象 ,`foo`被允许超出范围并在结束时被释放，`viewDidLoad`当键盘出现时，它不再存在。使其成为视图控制器的 ivar（或属性），或者确保它`foo`不会超出`viewDidLoad`.

因此，它可能是这样的：

```
@interface ViewController ()
@property (weak, nonatomic) IBOutlet UITextField *inputField;
@property (strong, nonatomic) SweetAssDelegate *foo;
@end

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.foo = [[SweetAssDelegate alloc] init];
    [self.inputField setDelegate:self.foo];

    NSLog(@"Delegate: %@", self.inputField.delegate);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:44:48.180

我猜您的文本字段代表必须实现成为您的文本字段代表。

委托管理对象之间的通信，这意味着您的自定义委托必须允许对象之间的通信并且必须提供方法，文本字段可以使用...

另一个例子是一个tableView：

您可以创建一个自定义委托来实现委托，然后调用一些与 tableview 相关的方法...

这里的代码可能对你很有趣：

```
@interface myCustomDelegateForTextFields <UITextFieldDelegate>

@end

@implementation myCustomDelegateForTextFields 

- (BOOL)textFieldShouldReturn:(UITextField *)theTextField {

return TRUE;

}

@end

@implementation ViewController 

myCustomDelegateForTextFields *txtfielddelegate = [[myCustomDelegateForTextFields alloc] init];

UITextField *whatever;
whatever.delegate = txtfielddelegate;

//your textfield now listens to the BOOL method in your custom delegate

@end 
```

这就是你要找的吗？:)

您可以将 myCustomDelegateForTextField 委托打包到另一个类中并调用该类

# d3.js - d3.js：具有多个 y 轴值的数据集数组

> ID：12732487
> 
> 赞同：4
> 
> 时间：2012-10-04T17:24:29.140
> 
> 标签：d3.js

我是 d3.js 的初学者，所以请善待 :)

[考虑这个 jsbin 例子](http://jsbin.com/edatol/1/edit)

我有以下数据集：

> ```
>  var dataset = [
>                       [d3.time.hour.utc.offset(now, -5), 1, 10], 
>                       [d3.time.hour.utc.offset(now, -4), 2, 20], 
>                       [d3.time.hour.utc.offset(now, -3), 3, 30], 
>                       [d3.time.hour.utc.offset(now, -2), 4, 40], 
>                       [d3.time.hour.utc.offset(now, -1), 5, 50], 
>                       [now, 6, 60],
>                     ]; 
> ```

两个问题。

1.  d3 是否提供了一种更好的方法来查找我的数据集数组中的 y 轴数据（除第 0 列之外的所有列，第 0 列是 x 轴（时间））的最大值？目前我只是遍历整个数据集数组并制作第二个数组，不包括第一列。除了我应该完全使用的数组之外，也许还有更好的数据结构？

    ```
     var data_arr = [];

        for (row in dataset){
            for (col=1;col < dataset[row].length; col++){
                data_arr.push(dataset[row][col]);
            }
        }

        var yScale = d3.scale.linear()
                             .domain([0, d3.max(data_arr)])
                             .range([h - padding, padding]); 
    ```

2.  一旦解决了，我仍然需要确定如何绘制多个 y 轴值！在我需要多个 y 轴值之前，这很好用：

    ```
     svg.selectAll("circle")
           .data(dataset)
           .enter()
           .append("circle")
           .attr("cx", function(d) {
                return xScale(d[0]);
           })
           .attr("cy", function(d) {
                return yScale(d[1]);
           })
           .attr("r", 2); 
    ```

请在此处查看带有代码的图表以获取完整的上下文：http: [//jsbin.com/edatol/1/edit](http://jsbin.com/edatol/1/edit) 任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T17:50:22.793

我对您的示例进行了一些更改，您可以在[http://jsbin.com/edatol/2/edit](http://jsbin.com/edatol/2/edit)看到结果。

首先，我稍微修改了您的数据。这主要只是一种风格，但我发现使用对象而不是数组更容易：

```
 //Static dataset
        var dataset = [
          {x: d3.time.hour.utc.offset(now, -5), y1: 1, y2: 10}, 
          {x: d3.time.hour.utc.offset(now, -4), y1: 2, y2: 20},
          {x: d3.time.hour.utc.offset(now, -3), y1: 3, y2: 30},
          {x: d3.time.hour.utc.offset(now, -2), y1: 4, y2: 40},
          {x: d3.time.hour.utc.offset(now, -1), y1: 5, y2: 50},
          {x: now, y1: 6, y2: 60},
        ]; 
```

然后您可以像这样找到您的域和范围：

```
var xDomain = d3.extent(dataset, function(i) { return i.x; });
var maxY = d3.max(dataset, function(i) { return Math.max(i.y1, i.y2); }); 
```

然后要添加多个 y 值，您只需附加一个带有适当值的附加圆圈。我给了它们不同的类，以便您以后想要进行转换或更新时可以使用它们来选择它们。

```
 //Create circles
        svg.selectAll(".y1")
           .data(dataset)
           .enter()
           .append("circle")
           .attr("cx", function(d) { return xScale(d.x); })
           .attr("cy", function(d) { return yScale(d.y1); })
           .attr("class", "y1")
           .attr("r", 2);

        //Create circles
        svg.selectAll(".y2")
           .data(dataset)
           .enter()
           .append("circle")
           .attr("cx", function(d) { return xScale(d.x); })
           .attr("cy", function(d) { return yScale(d.y2); })
           .attr("class", "y2")
           .attr("r", 2); 
```

# twitter-bootstrap - Twitter Bootstrap 模态不会褪色

> ID：12732489
> 
> 赞同：4
> 
> 时间：2012-10-04T17:24:34.990
> 
> 标签：twitter-bootstrap, modal-dialog, fade

我有一个非常简单的 HTML 应该打开一个淡入淡出的模式，但它只显示和隐藏而不会淡入或淡出。

这是代码：

```
<!DOCTYPE html>
<html>
    <head>
        <link type="text/css" rel="stylesheet" href="css/bootstrap.css" />
        <script type="text/javascript" src="jquery.min.js"></script>
        <script type="text/javascript" src="js/bootstrap-modal.js"></script>
    </head>
    <body>
        <div id="myModal" class="modal hide fade">
            <div class="modal-header"><h4>I'm a header</h4></div>
            <div class="modal-body"><p>Hello from the body</p></div>
            <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                <button class="btn btn-primary">Save changes</button>
            </div>
        </div>

        <a data-toggle="modal" href="#myModal" class="btn btn-primary">Launch Modal</a>
    </body>
</html> 
```

此代码取自 Twitter Bootstrap 文档。

在 jsFiddle 中，这个简单的代码效果很好！但是，如果我将上述代码（如 .html）保存在包含所有必需文件（.css 和 .js）的文件夹中，模态将以简单的方式打开，不会褪色！

我究竟做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T20:32:52.273

那是因为模态效果是 CSS3 效果，并且您不包括处理它的插件，所以只需[`bootstrap-transition.js`](http://twitter.github.com/bootstrap/assets/js/bootstrap-transition.js)在模态插件之前加载插件，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:25:38.333

仅使用 bootstrap-modal.js 时，我的体验与您相同。但是当我使用编译的 bootstrap.js 时它可以工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-04T09:10:32.357

```
.modal.in .modal-dialog {-moz-transform: translate(0,0) !important;} 
```

将此添加到您的CSS

# javascript - 加载和附加外部 html 文件

> ID：12732497
> 
> 赞同：2
> 
> 时间：2012-10-04T17:25:11.360
> 
> 标签：javascript, jquery

我想加载具有如下内容的外部 HTML 文件：

```
{"html":" \n <font>\u043b\u0432.<\/font> \n ","back":""} 
```

我尝试使用此代码 - 它加载文件但它仍然与 \n 和其他东西..

```
<div id="success"></div>
<script>$.get('test.html', function(data) { $(data).appendTo("#success"); } );</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:28:17.767

修改后的代码：由于您的数据是 JSON 对象，您应该使用`$.getJSON`. 并全部替换`\n`为`<br>`.

```
<script>
   $.getJSON('test.html', function(data) {
      data =data.html.replace(/\n/g, "<br>"); 
      $(data).appendTo("#success"); } );
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:28:23.480

不要使用 appendTo，而是执行以下操作：

```
<div id="success"></div>
<script>$.get('test.html', function(data) { $("#success").html(data); } );</script> 
```

请注意：如果您不控制“数据”的内容，您将面临 XSS 攻击。如果你这样做，没关系。

# excel - 在本地或服务器上运行 Excel 自动化

> ID：12732498
> 
> 赞同：1
> 
> 时间：2012-10-04T17:25:14.557
> 
> 标签：excel, vba, windows-server-2008

想就哪种方法更好的做法提出一些意见。我们有一个必须以非常特定的格式生成的销售报告（包括行颜色和字体）。

我已经编写了一个宏，它从我们的数据库中提取并在大约 15 秒内填充整个工作簿。问题是它应该如何填充？

1）处理服务器端：用户在内网页面发起请求。ASP.NET 打开工作簿模板，执行宏并返回最终工作表。

2）本地处理：用户下载空白模板，从桌面运行，自动连接数据库。

我喜欢第一个，因为我可以强制执行数据的模板、时间、用户和安全性。但是是否推荐在 Internet Web 服务器上运行 Excel 自动化？我喜欢第二种选择，但我担心随着模板表开始在公司各处浮动而失去标准化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:34:07.153

至于服务器端：

我非常……非常……建议检查电子表格的 OpenOffice/LibreOffice XML 格式。

您可以在无头模式下使用 localc 二进制文件将 XML 文件转换为 XLSX 或您拥有的文件。我用它来创建 PDF 文件，而不是使用 ReportLab。

或者，这里有一些其他项目尝试直接写入 Microsoft 格式：

[http://pypi.python.org/pypi/xlrd](http://pypi.python.org/pypi/xlrd) [http://pypi.python.org/pypi/xlwt](http://pypi.python.org/pypi/xlwt)

至于客户端：

如果您希望用户只使用 Excel 而不是任何其他电子表格软件，那么请继续使用 ODBC 数据源。必须为每个用户配置 ODBC，除非您每次加载时都使用一些有趣的 VBScript 从 HTTP 服务器中提取数据。还可以选择制作一个简单地保存数据并将其包含到 XLS 文档中的 XLS 电子表格，这将是服务器和客户端 XLS 的要求。

去服务器端。使信息易于存档和共享，并且很可能也是多平台的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T17:30:41.730

如果您喜欢使用第一个选项，那么您希望避免在服务器上已安装的 Excel 实例上使用 VBA。这是非常资源密集型的，并且不能很好地扩展。相反，如果您正在编写 ASP.NET 代码，那么您应该尝试使用内置于 .NET 框架中的 Microsoft Office 互操作功能。应该可以调整您现有的 VBA 代码以在 ASP.NET 下运行，并进行一些更改，但最终您将拥有一个更可靠的产品。

[示例代码](http://www.dotnetperls.com/excel)

然而，正如@whardier 在他的回复中指出的那样，如果这是针对大型或公共站点，他提出的建议会更合适，并且会进一步扩展。

# php - Paypal SetExpressCheckout 需要 DoExpressCheckout？

> ID：12732504
> 
> 赞同：3
> 
> 时间：2012-10-04T17:25:45.037
> 
> 标签：php, codeigniter, paypal

我已经完成了 SetExpressCheckout 的工作流程，但我看到了另外 2 个 API：GetExpressCheckoutDetails 和 DoExpressCheckoutPayment。我不想调用 2 个额外的网址 - 我想要直接付款。调用 SetExpressCheckout 是否足以订购在线交易？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T19:52:57.503

是的，需要 DoExpressCheckoutPayment 才能完成 PayPal Express Checkout 交易。

Express Checkout 的工作原理如下：
1\. SetExpressCheckout 启动交易并返回一个 TOKEN
2\. 您通过将 TOKEN 附加到一个特制的 URL
将买家重定向到 PayPal 3\. 买家评论并同意购买
4\. 买家被退回到您最初在 SetExpressCheckout API 调用中指定的“返回 URL”
5。现在您可以显示最终的“订单审查”页面（并可选择使用 GetExpressCheckoutDetails API 调用来获取返回订单详细信息），或立即调用 DoExpressCheckoutPayment API 调用完成交易。

如果您不调用 DoExpressCheckoutPayment，您将*无法*完成交易。这意味着*不会*有任何资金转入您的帐户。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T17:29:15.620

不，据我所知并回想一下，SetExpressCheckout 是订单的准备，而 DoExpressCheckoutPayment 是交易的最终确定。

但是，如果您使用服务器 API，没有什么能阻止您在最终的同一请求中调用它们。

在这种情况下，您可能应该查看另一个 API。也许 DoDirectPayment 是你想要的？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T17:37:14.853

根据我上次使用此 API 时的回忆，SetExpressCheckout 是您设置付款并确保一切有效的机会。这使您有机会显示订单确认页面，因此用户可以确认订单，然后通过 DoExpressCheckoutPayment 实际收取付款。

您不必在单独的请求中执行它们。如果您愿意，您可以在 SetExpressCheckout 后立即执行 DoExpressCheckoutPayment。

# iphone - iPhone/iPad 处理大量图像

> ID：12732507
> 
> 赞同：1
> 
> 时间：2012-10-04T17:26:04.057
> 
> 标签：iphone, image, ipad

我有 2 个 iOS 应用程序已经上市，iPhone 3 年，iPad 高清版 2 年。这些应用程序是医疗领域的流行参考工具。它们都由 1100 多张图像组成。当前的应用程序大小约为 52mb。

将重做大约 400 张图像。它们目前是 jpg 和低分辨率。替换将是 png，具有更高的分辨率。

我不确定这些图像的像素大小。如果它们在 280x280 范围内，每个文件大约 100k，如果在 560x560 范围内，每个文件几乎是 400k。

所以我会为较小的图像考虑额外的 40mb，为较大的图像考虑 160mb。

计划在不久的将来再制作 400 多张图片。所以，我有点担心最终的应用程序大小。

如果我为 Retina 设备选择更大的尺寸，我可以为非 Retina 设备缩小尺寸吗？如果我同时提供 image.png 和 image@2x.png 这两种尺寸，那么仅这些图像就有 200mb。

我有点不确定如何管理它们的个体大小，更重要的是，它们的总大小。

欢迎任何意见或建议，并会有所帮助。

TIA,

jb

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:50:48.240

这里有几个选项：

**1.缩小视网膜图像**

我不建议缩小非视网膜设备的视网膜图像。这会产生非最佳性能并使图像看起来很糟糕。您仍在加载视网膜图像的所有像素，但仅显示其中的 1/4。

**2\. 捆绑所有图像**

老实说，对于医学参考应用程序，我认为如果您的应用程序大小相当大，那将是可以理解的。我不认为人们需要通过 3G 或 LTE 下载这个应用程序。您的用户了解这是一个提供高分辨率图像的大型数据库应用程序，因此他们应该可以通过这种方法处理大型应用程序。

**3\. 在 Web 服务上托管图像**

另一种选择是将图像托管在服务器上，允许根据需要单独下载或捆绑下载它们。我认为您的用户更喜欢能够在没有互联网连接的情况下充分使用该应用程序，而不是拥有更小的应用程序大小。

**4.替代图像加载**

这种方法需要一些工作并且可能有点冒险。您只能将 2x 版本的图像捆绑到应用程序中。然后在应用程序启动时，您可以强制用户等待，直到您将所有图像调整为 1x 对应图像并将它们保存到磁盘。然后，您可以创建一个图像加载便捷方法，该方法根据是否需要视网膜图像从磁盘或应用程序包加载 UIImage。

* * *

为了您的目的，我绝对推荐选项 2。我只提到其他的要彻底。

# ios - UITableView 延迟 reloadData 直到动画完成

> ID：12732513
> 
> 赞同：1
> 
> 时间：2012-10-04T17:26:19.250
> 
> 标签：ios, uitableview, animation, reloaddata

我有一个 UITableView 代表项目清单。每个项目都处于完成/撤消状态。

我想将所有已完成的项目保留在列表的顶部，所以当用户单击一个未完成的项目时，我想弄清楚该行应该去哪里（在当前完成的项目列表的末尾) 并将其移到那里。

我正在尝试使用`-moveRowAtIndexPath:toIndexPath:`我的 UITableView 来执行此操作。

它有时效果很好，但在其他时候效果不太好。

当完成的动作在屏幕上的其他地方启动另一个动画时，它似乎运行良好。出于某种原因，这似乎是`-reloadData`通话的延迟。

如果这不是真的（即，唯一“发生”的是被标记为完成并移动的行），动画似乎会因自动调用 UITableView 的`-reloadData`方法而短路。也就是说，动画开始，但大约在中途，`-reloadData`被调用并且行捕捉到它们的最终位置。从用户的角度来看，这是相当不和谐的。

我已经跟踪了我的代码以验证我没有给`-reloadData`自己打电话，而且似乎我不是触发这个`-reloadData`电话的人。

我对自动调用`-reloadData`没意见，我理解为什么调用它（尽管你认为它可能没有必要，但这是一个不同的问题），但我真的希望它等到它完成动画。

这是我正在使用的代码：

```
NSIndexPath *oldPath = [NSIndexPath indexPathForRow:currentIndex inSection:0];
NSIndexPath *newPath = [NSIndexPath indexPathForRow:newIndex     inSection:0];

[tableView beginUpdates];

[checklist removeObject:task];
[checklist insertObject:task atIndex:newIndex];
[tableView moveRowAtIndexPath:oldPath toIndexPath:newPath];

[tableView endUpdates]; 
```

我在搞砸什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-10T13:52:57.060

**迅速**

```
//---------
extension UITableView {

    // Default delay time = 0.5 seconds
    // Pass animation time interval, as a parameter argument
    func reloadDataAfterDelay(delayTime: TimeInterval = 0.5) -> Void {
        self.perform(#selector(self.reloadData), with: nil, afterDelay: delayTime)
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T00:43:28.783

应钛诱饵的要求，这是我解决此问题的方法：

我有一个`UIViewController`子类，`NSTimer`它每秒执行一次，检查底层数据源中是否有`UITableView`表明需要调用的更改`-reloadData`。所以，我在那个子类中添加了：

```
@property (BOOL) IsAnimating; 
```

我最初将其设置为，`NO`如果`isAnimating`属性设置为`YES`，则`NSTimer`“短路”并跳过其正常处理。

所以，当我想运行这个`UITableView`动画时，我将`isAnimating`属性设置为`YES`并运行动画。

然后，我安排一个选择器在未来运行 1 秒，然后重置`isAnimating`为`NO`. 然后`NSTimer`将继续触发并会看到一个`isAnimating`of `NO`（很可能在随后的第二次调用中`-codeTimerFired`），然后找到数据源更新，开始调用`reloadData`.

这是暂停`NSTimer`处理和调度`UITableView`动画的代码：

```
// currentIndex and newIndex have already been calculated as the data item's
// original and destination indices (only 1 section in UITableView)
if (currentIndex != newIndex) {

    // This item's index has changed, so animate its movement
    NSIndexPath *oldPath = [NSIndexPath indexPathForRow:currentIndex    inSection:0];
    NSIndexPath *newPath = [NSIndexPath indexPathForRow:newIndex        inSection:0];

    // Set a flag to disable data source processing and calls to [UITableView reloadData] 
    [[self Owner] setIsAnimating:YES];

    // I haven't tested enough, but some documentation leads me to believe
    // that this particular call (-moveRowAtIndexPath:toIndexPath:) may NOT need
    // to be wrapped in a -beginUpdates/-endUpdates block
    [[[self Owner] InstructionsTableView] beginUpdates];

    // These lines move the item in my data source
    [[[MMAppDelegate singleton] CurrentChecklist] removeObject:[self CellTask]];
    [[[MMAppDelegate singleton] CurrentChecklist] insertObject:[self CellTask] atIndex:newIndex];

    // This code is the UITableView animation
    [[[self Owner] InstructionsTableView] moveRowAtIndexPath:oldPath toIndexPath:newPath];

    // Conclude the UITableView animation block
    [[[self Owner] InstructionsTableView] endUpdates];

    // Schedule a call to re-enable UITableView animation        
    [[self Owner] performSelector:@selector(setIsAnimating:) withObject:@(NO) afterDelay:1.0];

} else {
    // This location hasn't changed, so just tell my owner to reload its data
    [[[self Owner] InstructionsTableView] reloadData];
} 
```

这是`NSTimer`方法（注意它是如何退出 if的`isAnimating == YES`）：

```
- (void)codeTimerFired {

    // This is a subclass of a template subclass... 
    // super actually has work to do in this method...
    [super codeTimerFired];

    // If we're in the middle of an animation, don't update!
    if ([self IsAnimating]) {
        return;
    }

    // Other data source processing...

    // local BOOL to check whether underlying data source has changed
    BOOL shouldUpdate = NO;

    // code to check if underlying data source has changed...
    // ******************************************************
    // [CODE REMOVED]
    // ******************************************************

    // If the underlying data source has changed, update the UITableView
    if (shouldUpdate) {
        [self reloadTableView]; // <--- This is the main line I wanted to prevent
                                //      since the code that fired to cause the 
                                //      UITableView animation will ALWAYS cause
                                //      the underlying data source to change such
                                //      that this line would fire.
    }
} 
```

# html - 在 HTML 中对齐包含换行符的大文本和小文本

> ID：12732515
> 
> 赞同：1
> 
> 时间：2012-10-04T17:26:26.910
> 
> 标签：html, typography

我目前正在将我们的图形设计师的 Illustrator 资产切片为 HTML，并且我不确定如何最好地表示设计的一部分：

![在此处输入图像描述](../Images/596d46c24c0942240e5274c22ed0a2af.png)

不难想象为此使用基于表格的布局，例如

```
<table>
  <tr>
     <td>TDC <br/> CHANNEL</td>
     <td>B</td>
  </tr>
</table> 
```

并更改 B 的字体大小，直到它看起来正确。但是在 HTML 中表示这种设计确实似乎是对正确排版的挑战，并且为此使用表格似乎是邪恶的。我想知道是否有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:38:58.627

样式化并带有语义标记：

[http://jsfiddle.net/kboucher/pXyrd/](http://jsfiddle.net/kboucher/pXyrd/)

```
<dl class="clearfix">
    <dt>TDC<br />Channel</dt>
    <dd>B</dd>
</dl>

dl {
    background: #B5B8BE;
    color:#415987;
    display:inline-block;
    font-family: Helvetica, Arial, sans-serif;
    padding:1.5% 1% 1%;
}
dt {
    clear: left;
    float:left;
    font-size:0.8em;
    line-height:1em;
    text-transform: uppercase;
}

dd {
    float:left;
    font-size:2.1em;
    font-weight: bold;
    line-height:1em;
    margin: -0.1em 0 0 0.1em;
}
.clearfix:before,
.clearfix:after {
    content: " ";
    display: table;
}
.clearfix:after {
    clear: both;
}
.clearfix {
    *zoom: 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:31:32.160

我不确定我是否完全理解您的问题，但您可以查看 CSS 中的 'text-indent' 属性（也许为大文本创建一个类，然后将您的 HTML 包装在`<span class="largeText></span>`. 它接受负值，所以请保留记住。如果您提供更多信息，也许我可以提出其他建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T17:37:35.453

看起来你可以离开 TDC 和 CHANNEL 之间的休息并将其包含在一个 div 中，然后将大 B 放在一个 div 中使用 css 来完成剩下的......

或尝试仅使用现有的中断并将大 B 放在一个跨度中

# .net - 使用 TcpClient 进行 Telnet，忽略选项

> ID：12732530
> 
> 赞同：1
> 
> 时间：2012-10-04T17:28:08.487
> 
> 标签：.net, telnet, tcpclient

我正在使用 TcpClient 连接到旧设备。最初我忽略了服务器发送的每个 IAC。那会发生什么？服务器（即设备）是否假定其选项被接受或属于某些默认设置？

我注意到的一件事是；几乎每条值为 3 的消息的末尾都有一个字节。这正常吗？这符合什么标准？（与Go-Ahead有关吗？）

但是，我上面写的只有一个例外（即消息末尾的 3 个字节）是一种特定类型的响应在其末尾总是缺少 3 个字节，我注意到当我尝试获取更多字节时我什么也得不到。但是，如果我发送一个换行符（即 \n\r），服务器将在最后发送一个 3 字节的其余响应。这也正常吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T03:28:46.560

服务器*应该*继续执行它说它将/不会做的任何选项，并且通常期望另一方将充当完整的哑终端，无论发送的请求如何，直到它收到一个 WILL/WONT 作为回复。

`FF FB 03`意味着`IAC WILL SUPRESS-GO-AHEAD`，或者只是在感觉时继续发送，而无需等待任何形式的握手。它可能也`IAC DO SUPRESS-GO-AHEAD`一样。

如果这不是您要问的，则需要完整的十六进制转储通信。

# linq - 将 DefaultExpression 绑定到 Linq-to-Entities 查询中的属性

> ID：12732532
> 
> 赞同：2
> 
> 时间：2012-10-04T17:28:14.763
> 
> 标签：linq, entity-framework, linq-to-entities, expression-trees

我有一个类，它通过发出可与 IQueryable 一起使用的 Linq 表达式来帮助将实体投影到 POCO。这是一个我遇到麻烦的表达式：

```
result = Expression.Bind(dProperty,
                         Expression.Coalesce(Expression.Property(parameterExpression, sProperty),
                                             Expression.Default(dType))); 
```

在此语句中，`dProperty`是`PropertyInfo`表示绑定中目标属性的 a，`dType`是该`Type`属性的 ，`parameterExpression`是表示 type 参数的另一个 Linq 表达式`TEntity`，`sProperty`是`PropertyInfo`表示源属性的对象。

这会构建，但在运行时，当实体框架表达式访问者实现通过树运行时，它会看到这一点并抛出“不支持”异常（如下）。似乎意思是我用作合并运算符表达式右侧的 DefaultExpression 在 EF 中不受支持。我尝试搜索很多解决此问题的文档或讨论，但找不到任何东西（当然，很难对“默认”之类的词进行很好的搜索）。无论如何，Linq-to-Entities 中是否不支持 C#“默认”运算符？如果是真的，那么我该如何做我想做的事情，即从其`Nullable`通用参数类型与目标属性相同的属性中分配一个属性？

换句话说，如果你将 linq 表达式写成 lambda，它看起来像这样：

```
(/*long*/dest, /*long?*/src) => dest = src ?? default(long) 
```

这是例外。

```
System.NotSupportedException: Unknown LINQ expression of type 'Default'.
   at System.Linq.Expressions.EntityExpressionVisitor.Visit(Expression exp)
   at System.Data.Objects.ELinq.Funcletizer.<>c__DisplayClass5.<Nominate>b__4(Expression exp, Func`2 baseVisit)
   at System.Linq.Expressions.EntityExpressionVisitor.BasicExpressionVisitor.Visit(Expression exp)
   at System.Linq.Expressions.EntityExpressionVisitor.VisitBinary(BinaryExpression b)
   at System.Data.Objects.ELinq.Funcletizer.<>c__DisplayClass5.<Nominate>b__4(Expression exp, Func`2 baseVisit)
   at System.Linq.Expressions.EntityExpressionVisitor.BasicExpressionVisitor.Visit(Expression exp)
   at System.Linq.Expressions.EntityExpressionVisitor.VisitMemberAssignment(MemberAssignment assignment)
   at System.Linq.Expressions.EntityExpressionVisitor.VisitBinding(MemberBinding binding)
   at System.Linq.Expressions.EntityExpressionVisitor.VisitBindingList(ReadOnlyCollection`1 original)
   at System.Linq.Expressions.EntityExpressionVisitor.VisitMemberInit(MemberInitExpression init)
   at System.Data.Objects.ELinq.Funcletizer.<>c__DisplayClass5.<Nominate>b__4(Expression exp, Func`2 baseVisit)
   at System.Linq.Expressions.EntityExpressionVisitor.BasicExpressionVisitor.Visit(Expression exp)
   at System.Linq.Expressions.EntityExpressionVisitor.VisitExpressionList(ReadOnlyCollection`1 original)
   at System.Linq.Expressions.EntityExpressionVisitor.VisitInvocation(InvocationExpression iv)
   at System.Data.Objects.ELinq.Funcletizer.<>c__DisplayClass5.<Nominate>b__4(Expression exp, Func`2 baseVisit)
   at System.Linq.Expressions.EntityExpressionVisitor.BasicExpressionVisitor.Visit(Expression exp)
   at System.Linq.Expressions.EntityExpressionVisitor.VisitLambda(LambdaExpression lambda)
   at System.Data.Objects.ELinq.Funcletizer.<>c__DisplayClass5.<Nominate>b__4(Expression exp, Func`2 baseVisit)
   at System.Linq.Expressions.EntityExpressionVisitor.BasicExpressionVisitor.Visit(Expression exp)
   at System.Linq.Expressions.EntityExpressionVisitor.VisitUnary(UnaryExpression u)
   at System.Data.Objects.ELinq.Funcletizer.<>c__DisplayClass5.<Nominate>b__4(Expression exp, Func`2 baseVisit)
   at System.Linq.Expressions.EntityExpressionVisitor.BasicExpressionVisitor.Visit(Expression exp)
   at System.Linq.Expressions.EntityExpressionVisitor.VisitExpressionList(ReadOnlyCollection`1 original)
   at System.Linq.Expressions.EntityExpressionVisitor.VisitMethodCall(MethodCallExpression m)
   at System.Data.Objects.ELinq.Funcletizer.<>c__DisplayClass5.<Nominate>b__4(Expression exp, Func`2 baseVisit)
   at System.Linq.Expressions.EntityExpressionVisitor.BasicExpressionVisitor.Visit(Expression exp)
   at System.Data.Objects.ELinq.Funcletizer.Nominate(Expression expression, Func`2 localCriterion)
   at System.Data.Objects.ELinq.Funcletizer.Funcletize(Expression expression, Func`1& recompileRequired)
   at System.Data.Objects.ELinq.ExpressionConverter..ctor(Funcletizer funcletizer, Expression expression)
   at System.Data.Objects.ELinq.ELinqQueryState.CreateExpressionConverter()
   at System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan(Nullable`1 forMergeOption)
   at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
   at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
   at System.Linq.Enumerable.<SelectManyIterator>d__14`2.MoveNext()
   at System.Linq.Enumerable.WhereEnumerableIterator`1.MoveNext()
   at System.Linq.Enumerable.<TakeIterator>d__3a`1.MoveNext()
   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
   at System.Collections.Generic.List`1.InsertRange(Int32 index, IEnumerable`1 collection)
   at MyClass... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T18:03:31.463

如您所述，LINQ-to-Entities 不支持该[`Expression.Default`方法](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expression.default.aspx)。

但是，LINQ-to-Entities*确实*支持该[`Expression.Constant`方法](http://msdn.microsoft.com/en-us/library/bb338689.aspx)。

如果您使用的是泛型类型参数，您可以简单地将合并操作的第二个参数设置为*常量*；毕竟，`default(T)`在给定相同实例的情况下，将返回一个常量`T`。

执行此操作的代码如下：

```
result = Expression.Bind(dProperty, 
    Expression.Coalesce(
        Expression.Property(parameterExpression, sProperty),
        Expression.Constant(default(T), dType),
    )
); 
```

我假设你*没有*使用泛型，所以你不能在这里使用[`default`关键字](http://msdn.microsoft.com/en-us/library/xwth0h0d%28v=vs.80%29.aspx)。但是，您可以[创建一个方法，在给定`Type`](https://stackoverflow.com/a/353073/50776).

（注意，如果您不想依赖基于*代码之外的*规则编纂的解决方案，[您可以只使用一个实例来获得`Expression.Default`即时`Type`](https://stackoverflow.com/a/12733445/50776)结果。）

完成后，您可以执行以下操作：

```
result = Expression.Bind(dProperty, 
    Expression.Coalesce(
        Expression.Property(parameterExpression, sProperty),
        // Note: The example referenced was changed to an extension method
        // on Type.
        Expression.Constant(dType.GetDefault(), dType),
    )
); 
```

# c# - 防止 C# 子类覆盖方法

> ID：12732533
> 
> 赞同：6
> 
> 时间：2012-10-04T17:28:15.333
> 
> 标签：c#, object, inheritance

假设我有一个名为“Parent”的抽象父类，它实现了一个名为“DisplayTitle”的方法。我希望这个方法对于每个继承“Parent”的子类都是相同的——如果子类试图实现自己的“DisplayTitle”方法，我想要一个编译错误。如何在 C# 中完成此操作。我相信 Java，我只是将该方法标记为“最终”，但我似乎无法在 C# 中找到替代方法。我一直在搞乱“密封”和“覆盖”，但我无法得到我正在寻找的行为。

例如，在这段代码中：

```
using System;

namespace ConsoleApplication1
{
  class Parent
  {
      public void DisplayTitle() { Console.WriteLine("Parent's Title"); }
  }

  class ChildSubclass : Parent
  {
      public void DisplayTitle() { Console.WriteLine("Child's Own Implementation of Title"); 
  }

    static void Main(string[] args)
    {
        ChildSubclass myChild = new ChildSubclass();
        myChild.DisplayTitle();
        Console.ReadLine();
    }
  }
} 
```

我想收到一个编译错误，说“ChildSubClass”不能覆盖“DisplayTitle”。我目前收到警告 - 但似乎这是我应该能够做的事情，而且我不知道标记该方法的正确属性。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-04T17:32:48.970

> 如何在 C# 中完成此操作。我相信 Java，我只是将该方法标记为“最终”，但我似乎无法在 C# 中找到替代方法。

粗略的等价物`sealed`在 C# 中，但您通常只需要虚拟方法 - 而且您的`DisplayTitle`方法不是虚拟的。

重要的是要注意这`ChildSubclass` *不是*压倒一切`DisplayTitle`的——它是*隐藏*它。任何仅使用引用的代码`Parent`都不会最终调用该实现。

请注意，使用原样的代码，您应该会收到一个编译时警告，建议您将`new`修饰符添加到方法中`ChildSubclass`：

```
public new void DisplayTitle() { ... } 
```

您不能*阻止*派生类隐藏现有方法，除了密封类本身以防止完全创建派生类......但是不直接使用派生类型的调用者不会在意。

你*真正*关心的是什么？意外的误用，还是故意的问题？

编辑：请注意，您的示例代码的警告将类似于：

```
Test.cs(12,19): warning CS0108:
        'ConsoleApplication1.ChildSubclass.DisplayTitle()' hides inherited
        member 'ConsoleApplication1.Parent.DisplayTitle()'. Use the new keyword
        if hiding was intended. 
```

我建议你把警告变成错误，然后就更难忽略它们了 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T17:32:49.867

派生类不能覆盖您的方法，您没有将其声明为*virtual*。请注意，与 Java 相比，C# 中有很大的不同，Java 中的所有方法都是虚拟的。在 C# 中，您必须显式使用关键字。

派生类可以通过再次使用相同的名称来*隐藏*您的方法。这可能是您正在谈论的编译警告。使用*new*关键字会抑制警告。此方法不会以任何方式覆盖您的原始方法，您的基类代码始终调用原始方法，而不是派生类中的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T17:30:06.167

使用sealed 修饰符来防止子类覆盖您的类、属性或方法。使用密封时什么不起作用？

[http://msdn.microsoft.com/en-us/library/88c54tsw.aspx](http://msdn.microsoft.com/en-us/library/88c54tsw.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T17:39:05.540

我相当确定在 C# 中使用方法修饰符关键字无法实现您想要的。

Sealed 仅在覆盖祖先类中的虚拟方法时适用，从而防止*进一步*覆盖。

# wso2 - 如何将节点数组捕获到属性

> ID：12732541
> 
> 赞同：1
> 
> 时间：2012-10-04T17:28:29.247
> 
> 标签：wso2, wso2esb

任何人都可以让我知道如何访问属性的元素数组。

例如：我有一个如下所述的 XML

```
<a>
 <x>1</x>
 <x>2</x>
 <x>3</x>
 <x>4</x>
</a> 
```

我希望我的属性设置如下所示：

```
 <x>1</x>
 <x>2</x>
 <x>3</x>
 <x>4</x> 
```

当我尝试使用属性类型设置为 OM 元素或字符串的 //x 进行访问时，我没有在我的属性中看到预期的结果。

谁能指导我使用正确的 xpath 来查看所需的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T07:39:54.003

您应该可以为此使用 //a/child::node() XPath。

请参考[XPath 以获取没有父节点的所有子节点（元素、注释和文本）](https://stackoverflow.com/questions/5119655/xpath-to-get-all-childnodes-and-not-the-parent-node)

希望这可以帮助！！

/哈莎娜

# sql-server - SQL Server 2008 'sp_syspolicy_purge_history' 函数

> ID：12732546
> 
> 赞同：8
> 
> 时间：2012-10-04T17:28:46.893
> 
> 标签：sql-server, sql-server-2008, tsql

这个内置函数有什么作用？它正在删除的“历史”是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T11:44:50.907

SQL Server 中的基于策略的管理使用 sp_syspolicy_purge_history 来清除策略评估历史记录。

**[从SQLServerPedia](http://sqlserverpedia.com/blog/sql-server-bloggers/syspolicy_purge_history-what-is-it/)**中提取****

 **SQL Server 2008 引入了一项称为基于策略的管理的新功能。策略可以类似于 xp_cmdshell 不应在实例上启用。当策略运行时，它将结果存储在 MSDB 中。一段时间后，这可能会导致 MSDB 中堆积不必要的数据。***作业 syspolicy_purge_history 会修剪早于 Policy Management* 的 HistoryRetentionInDays 属性中定义的日期的数据**。**

# asp.net-mvc - MVC 3 应用程序中的自定义 Http 处理程序

> ID：12732547
> 
> 赞同：4
> 
> 时间：2012-10-04T17:28:47.597
> 
> 标签：asp.net-mvc, localization, httphandler, handlers, staticfilehandler

我正在使用 Http 处理程序来本地化我的应用程序中使用的 javascript 文件：请参阅：[Localize text in JavaScript files in ASP.NET](http://madskristensen.net/post/Localize-text-in-JavaScript-files-in-ASPNET.aspx)

我想使用提供的处理程序，所以我做了以下事情：

1) 在 Global.asax 中使用此代码忽略路由 - 我已将`routes.IgnoreRoute("{resource}.js.axd/{*pathInfo}");`代码行添加到`RegisterRoutes`方法中，因此它看起来像这样：

* * *

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
    routes.IgnoreRoute("{resource}.js.axd/{*pathInfo}");

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
         new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );
    } 
```

2) 我`<add path="*.js.axd" verb="*" type="CamelotShiftManagement.HttpHandlers.ScriptTranslator" />`在 Views 文件夹中的 web.confing 文件中添加了一行，如下所示：

* * *

```
<system.web>
   <httpHandlers>
      <add path="*.js.axd" verb="*"  type="CamelotShiftManagement.HttpHandlers.ScriptTranslator" />
      <add path="*" verb="*" type="System.Web.HttpNotFoundHandler"/>
   </httpHandlers> 
```

然而，当我尝试访问以下 URL 时，我得到一个*Page not found错误：*

```
http://camelotshiftmanagement.com/Scripts/Administration/OrganizationalStructure.js.axd 
```

我在这里做错了什么？

* * *

**进度：** 好的，所以我发现了我犯的一个尴尬的错误......出于某种原因，我认为添加处理程序时`*.js.axd`会找到文件，但实际上并没有，因为文件被命名为`OrganizationalStructure.js`没有`.axd`扩展名。这就是*404 错误*的原因，但现在我从服务器收到一个不同的错误，我再次需要你的帮助。

`http://camelotshiftmanagement.com/Scripts/Administration/OrganizationalStructure.js.axd`这次访问产生了不同的错误： *404.17 请求的内容似乎是脚本，不会由静态文件处理程序提供服务。*

**附加错误信息**

```
Server Error in Application "CAMELOTSHIFTMANAGEMENT.COM"
Internet Information Services 7.5
Error Summary
HTTP Error 404.17 - Not Found
The requested content appears to be script and will not be served by the static file handler.

Detailed Error Information
Module:  "StaticFileModule"
Notification:  "ExecuteRequestHandler"
Handler:  "StaticFile"
Error Code:  "0x80070032"
Requested URL:  "http://camelotshiftmanagement.com:80/Scripts/Administration/OrganizationalStructure.js.axd"
Physical Path:  "C:\Code\CamelotShiftManagement\CamelotShiftManagement\Scripts\Administration\OrganizationalStructure.js.axd"
Logon Method:  "Anonymous"
Logon User:  "Anonymous"

Most likely causes:
The request matched a wildcard mime map. The request is mapped to the static file handler. If there were different pre-conditions, the request will map to a different handler.

Things you can try:
If you want to serve this content as a static file, add an explicit MIME map. 
```

好吧，我在这里已经超越了我的联盟......我不明白为什么我的自定义处理程序没有被调用，而是调用了一个*StaticFile*处理程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:24:50.407

好的...所以我确实修复了它（我认为）。

有两个问题：1.文件名有`.js`扩展名，而不是`.js.axd`处理程序需要的。2\. 我需要将处理程序注册到 IIS，因为它是默认情况下无法识别的自定义扩展。为此，我在MVC 应用程序`<system.webServer>`的主文件的节点下添加了以下代码：`Web.Config`

```
<handlers>
        <add name="CustomScriptHandler" path="*.js.axd" verb="*" type="CamelotShiftManagement.HttpHandlers.ScriptTranslator" />
</handlers> 
```

*还有一个GUI过程可以使用IIS管理器（7）：打开网站节点-->处理程序映射-->添加脚本映射*

没有正确的处理程序被服务器触发并且代码运行。

我唯一不确定的是我仍然必须有一个带有`.js.axd`扩展名和`.js`扩展名的文件，因为处理程序会查找要处理的 Javascript 文件，而服务器会查找`.js.axd`文件以启动自定义处理程序。

如果有人有其他见解，请务必这样做。

# blackberry - 在 BlackBerry 中发送 PIN 消息不起作用

> ID：12732552
> 
> 赞同：1
> 
> 时间：2012-10-04T17:29:01.213
> 
> 标签：blackberry, java-me

我的应用程序发送 PIN 消息，但是当我的应用程序发送 PIN 消息时，它只是到达发件箱文件夹并保留在那里并带有时钟图标。它并没有真正发送给收件人。

下面是我的代码，请你告诉我它有什么问题：

```
public class SendPin implements carinfoResource
{
    private static ResourceBundle _res = 
       ResourceBundle.getBundle(BUNDLE_ID, BUNDLE_NAME);

    public SendPin() {
    }

    public void sendPin(int command)
    {
        Store store = Session.getDefaultInstance().getStore();
        //retrieve the sent folder
        Folder[] folders = store.list(Folder.SENT);
        Folder sentfolder = folders[0];
        //create a new message and store it in the sent folder
        Message msg = new Message(sentfolder);
        PINAddress recipients[] = new PINAddress[1];
        try{
            //create a pin address with destination address of 20000000
            recipients[0]= new PINAddress("289A2FF6", "Soporte Desarrollo");
        }
        catch (AddressException ae)
        {
            System.err.println(ae);
        }

        try{
            //add the recipient list to the message
            msg.addRecipients(Message.RecipientType.TO, recipients);
            //Command travel without troubles
            if(command == 0)
            {
                //set a subject for the message
                msg.setSubject(_res.getString(OKSUBJECT));
                //sets the body of the message
                msg.setContent(_res.getString(OKBODY));
            }
            else
            {
                //set a subject for the message
                msg.setSubject(_res.getString(ISSUESUBJECT));
                //sets the body of the message
                msg.setContent(_res.getString(ISSUEBODY)+"  "+this.getIMSI());
            }
            Transport.send(msg);
        }
        catch (MessagingException me)
        {
            System.err.println(me);
        }
    }

    public  String getIMSI() {
        String imsi = null;
        try {
            imsi = GPRSInfo.imeiToString(SIMCardInfo.getIMSI());
        } catch (Exception e) {
            System.err.println(e);
        }
        return imsi;
    }
} 
```

# asp.net-mvc - Chrome 拒绝在浏览器中加载某些 PDF

> ID：12732563
> 
> 赞同：2
> 
> 时间：2012-10-04T17:29:51.167
> 
> 标签：asp.net-mvc, google-chrome, pdf, azure

我们的 Web 应用程序允许用户上传 pdf 格式的表单（然后将其存储在 Windows Azure Blob 中），然后还可以让他们查看它们。我们想要的是将 pdf 嵌入到灯箱之类的东西中。一旦安装了 Acrobat Reader 之类的东西，这在 Firefox 中就可以正常工作了，但 Chrome 对它完全没有任何作用。

即使在进入嵌入部分之前，仅在选项卡中打开它在 Chrome 中也不起作用。在 Firefox 中输入 url 可以正常工作，它会询问您是要保存还是在 Acrobat Reader 中打开。在 chrome 中打开一个新标签并尝试转到该 url 绝对没有任何作用。页面保持空白，标签名称保持为“新标签”。

我检查了浏览器控制台的网络选项卡中发生了什么，我看到的只是一个所谓的成功 GET 调用（代码 200），但它的状态被取消了。

# mysql - SSH 端口映射以访问远程数据库

> ID：12732564
> 
> 赞同：0
> 
> 时间：2012-10-04T17:29:52.913
> 
> 标签：mysql, ssh, ssh-keys, portforwarding

我有一台运行使用 mysql 数据库的 Web 应用程序的服务器。数据库本身并不位于该服务器上——它位于另一台服务器上。无法从我的位置访问数据库服务器。

我想使用 ssh 端口映射，这样我就可以`mysql`在我的 Mac 笔记本电脑上运行并连接到数据库。我假设这意味着我需要使用 ssh 和端口转发连接到我的 Web 应用程序服务器。

就像这样：

我的 Mac -> Web 服务器 -> 数据库服务器

我想在我的 macbook pro 上运行 mysql 命令，如下所示：

```
mysql -u dbuser -hlocalhost -p 
```

然后输入mysql密码。

另外，我使用 ssh 密钥连接到我的 Web 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:36:27.747

将此选项添加到您的 SSH 命令行：

```
 -L 127.0.0.1:3306:IP_OF_SQL_SERVER:3306 
```

您必须在 mysql 的`-h`选项中使用 127.0.0.1（“localhost”表示在本地使用 Unix 套接字），并且您可能希望在 SSH 中*禁用*压缩，同时在 mysql 客户端中使用该选项*激活它。*`-C`

# sql - 无效的字段定义

> ID：12732567
> 
> 赞同：0
> 
> 时间：2012-10-04T17:29:58.600
> 
> 标签：sql

我正在尝试使用命令创建带有外键的表，`SQL`但我不断收到此错误

`Invalid field definition 'CUS_CODE' in definition of index or relationship.`

我正在使用这个命令：

```
CREATE TABLE INVOICE(
INV_NUMBER      CHAR(5)     NOT NULL,
INV_DATE        DateTime    NOT NULL,
CONSTRAINT      INV_PK      PRIMARY KEY(INV_NUMBER),
CONSTRAINT      INV_FK      FOREIGN KEY(CUS_CODE) REFERENCES CUSTOMER(CUS_CODE)
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:35:20.803

这是因为`Cus_code`不是发票表中的字段。

它应该是 ：

```
FOREIGN KEY(Your column name in your invoice table) REFERENCES Customer(Cus_Code) 
```

[这是一个关于 SQL FOREIGN KEY 的教程](http://www.w3schools.com/sql/sql_foreignkey.asp)

它应该可以帮助您说明它应该是什么样子

# windows - 如何在批处理文件中设置var

> ID：12732571
> 
> 赞同：1
> 
> 时间：2012-10-04T17:30:09.273
> 
> 标签：windows, batch-file, xcopy

如何使用以下变量

```
SET DESKTOP_PATH = C:\Users\Kostas\Desktop\ToMobile
SET MOBILE_PATH = H:\koinoxrista 
```

在 xcopy 命令中？

我使用下面的代码

```
xcopy %DESKTOP_PATH%\*.txt %MOBILE_PATH% /v 
```

但我收到

```
file not found - *.txt 
```

这是我的代码

```
 @echo off

SET DESKTOP_PATH = C:\Users\Kostas\Desktop\ToMobile
SET MOBILE_PATH = H:\koinoxrista

chdir \
chdir /d h:\koinoxrista

SET "FLAG="

IF EXIST Bill.txt SET FLAG=1
IF EXIST BillPayments.txt SET FLAG=1
IF EXIST Collector.txt SET FLAG=1
IF EXIST CompanyInfo.txt  SET FLAG=1
IF EXIST Expense.txt  SET FLAG=1
IF EXIST ExpensePayments.txt  SET FLAG=1
IF EXIST FlatComments.txt  SET FLAG=1
IF EXIST FlatMetric.txt  SET FLAG=1

IF DEFINED FLAG (ECHO Error!) ELSE (xcopy %DESKTOP_PATH%\*.txt %MOBILE_PATH% /v /w)

pause 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T10:57:50.883

删除 SET 命令中的空格

```
SET DESKTOP_PATH=C:\Users\Kostas\Desktop\ToMobile
SET MOBILE_PATH=H:\koinoxrista 
```

# php - 如何处理 _www 用户无权访问 .hg 文件夹？

> ID：12732574
> 
> 赞同：1
> 
> 时间：2012-10-04T17:30:12.337
> 
> 标签：php, version-control, mercurial, permissions, bitbucket

我有一个**BitBucket**帐户，它将在我的服务器上触发一个脚本，该脚本将在进行推送时拉取并更新实时服务器。`_www`触发器起作用了，在让用户信任 hgrc 或其他任何东西（我确实做到了）之后遇到了很多麻烦，它实际上正在执行命令。

问题是我收到关于无法锁定文件夹的错误，这意味着我的`_www`用户没有 .hg 文件夹的权限。

解决这个问题的好方法是什么？我不想将 .hg 文件夹设为 0777。我可以`_www`与我的用户放在同一个组中（我相信它是）并给组 rw（那是什么，0775？）。这是可以接受的，还是我可能遗漏的其他安全隐患，或者更好的处理方法。

我可以用我的用户运行命令。也许我可以。**BitBucket**正在使用 POST 服务发布到我的服务器，我通过 PHP`shell_exec()`执行命令（如果请求来自 BitBucket 的 IP，它只运行命令）。

**[更新]**我继续尝试将权限设置为 0775，但它仍然不起作用（`_www`与我的用户不在同一个组中）。同样的错误，即：

> 中止：无法锁定存储库 /path/to/local/repo：权限被拒绝

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:07:27.607

你对组的东西有正确的想法。你需要：

*   确保 www 用户与拥有.hg 目录中*所有内容的组在同一个组中*
*   确保.hg 目录中的*所有内容都*可以按组 ( `chmod -R g+w .hg`)写入

如果除了 www 之外的任何其他用户将在该 repo 中推送/拉取/更新，那么您还需要使用sticky-group-bit 来确保新创建的文件和目录具有与`.hg`目录本身相同的组所有权。：

```
find .hg -type d | xargs chmod g+s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:44:35.240

您的第一段并不完全清楚，但是您是否尝试过更改`.hgrc`实时服务器上的文件，并添加：

```
[trusted]
users = _www
groups = _www 
```

# php - Wordpress $wpdb - 最安全的查询方式

> ID：12732575
> 
> 赞同：0
> 
> 时间：2012-10-04T17:30:15.377
> 
> 标签：php, mysql, wordpress, pdo

所以很多人已经知道 Wordpress 中的 $wpdb 类不能处理涉及 NULL 值的插入和更新。这是一个令人头疼的问题，似乎没有很好的解决方法。

所以我想知道在 Wordpress 中插入/更新表格的下一个最佳方法是什么？由于准备好的语句，我喜欢 WPDB，所以我希望有一些东西可以让我继续这样做。不幸的是，没有 PDO 支持？

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T19:16:01.660

[**这**](http://wordpress.org/support/topic/bug-fix-wpdb-insert-amp-update-with-null-values)是`Null`值的解决方案，只需`class`通过扩展`wpdb`类创建一个新的并使用两个新`insert`和`update`函数，为此，您可以`db.php`在目录中创建一个文件`wp-content`并将[**此**](http://dl.dropbox.com/u/4012111/db.php)内容放入文件中。

未经测试，但您可以尝试一下。

# .net - 传递 ObjectContext 是个好主意吗

> ID：12732577
> 
> 赞同：0
> 
> 时间：2012-10-04T17:30:23.350
> 
> 标签：.net, entity-framework-4

如果我有两种不同的方法——一种删除用户，另一种删除用户的地址（为了论证，我们假设它们必须被删除并且不能设置为非活动状态）。如果每个方法都创建该类型的存储库以删除记录，那么在第一个方法中创建 ObjectContext 然后将其传递给另一个方法是否被认为是一种好习惯？如果是这样，它应该通过值传递还是引用传递？这样做会产生什么问题或问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:33:28.450

是的，这是一种有效的方法。共享一个上下文以作用于多个存储库以完成特定用例的模式称为工作单元模式。

[http://blogs.msdn.com/b/adonet/archive/2009/06/16/using-repository-and-unit-of-work-patterns-with-entity-framework-4-0.aspx](http://blogs.msdn.com/b/adonet/archive/2009/06/16/using-repository-and-unit-of-work-patterns-with-entity-framework-4-0.aspx)

[http://joel.net/repository-and-unit-of-work-for-entity-framework-ef4-for-unit-testing](http://joel.net/repository-and-unit-of-work-for-entity-framework-ef4-for-unit-testing)

请注意，如果您需要事务完整性，则*必须*共享上下文。如果您使用单独的上下文，并且您的第二次删除失败，您将无法回滚第一次删除。

# c++ - 在现有 c++ VS2010 程序中使用 Qt 库

> ID：12732578
> 
> 赞同：1
> 
> 时间：2012-10-04T17:30:33.093
> 
> 标签：c++, visual-studio-2010, qt, qt4

我正在尝试让 Qt 库在我现有的 VS2010 项目中工作。但我几乎被困住了。

我已经成功地在 64 位上使用 nmake 编译了库，并为 vs2010 添加了 Qt 插件。

但是我不知道如何在我的项目中使用它，该项目已经使用了 boost 和 opencv 库，并且这些库工作得很好。

我在 stackoverflow 上找到了一个线程，说我需要使用文本编辑器编辑 vs 项目文件，但是当我这样做时，我找不到需要编辑的全局部分。

谁能帮我解决这个问题？预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:19:40.893

我解决了，嗯。我创建了一个新的 QT 项目，并在新的 QT 项目中添加了我现有的代码。我还将opencv链接到boost库，应用程序现在可以工作了！

感谢所有的评论

# java - 如何制作可与 Slick2D 一起使用的资源加载器

> ID：12732583
> 
> 赞同：0
> 
> 时间：2012-10-04T17:30:54.267
> 
> 标签：java, resources, loader, slick2d

所以我用 slick 制作了一个 2D 游戏，但是我做过的唯一资源加载器是纯 java 的，它是这样的：

```
import java.awt.Image;
import java.awt.Toolkit;

 public class ResourceLoader {

static ResourceLoader rl = new ResourceLoader();

public static Image getImage(String fileName){
    return  Toolkit.getDefaultToolkit().getImage(rl.getClass().getResource("images/" + fileName));
}

 } 
```

当然，Slick 有一个不同的图像类型 (org.newdawn.slick.Image)，这个资源加载器类将无法工作，所以我不知道当我导出我的项目时如何加载资源。我在网上搜索过，但没有找到很多详细的结果，所以我问有没有办法加载资源，所以当我将项目导出为可运行的 jar 文件时，它仍然会加载它们。

提前感谢您提供任何有用的答案 - 乔希

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:07:20.620

不确定您是否看过它，但这是执行此操作的一种方法。解释延迟加载：

[http://slick.cokeandcode.com/wiki/doku.php?id=resource_manager_tutorial](http://slick.cokeandcode.com/wiki/doku.php?id=resource_manager_tutorial)

如果您刚开始使用 Slick2D，您可能想查看 Spiegel 的其他教程。我发现它们非常有用

# java - Javamail 中的线程安全

> ID：12732584
> 
> 赞同：27
> 
> 时间：2012-10-04T17:31:00.660
> 
> 标签：java, multithreading, smtp, jakarta-mail

我正在研究 Javamail 是否是线程安全的，特别是在有许多会话对应于不同用户、多个 SMTP 服务器以及创建 MIME 消息和使用`transport.sendMessage`方法的情况下。我知道 Javamail 是面向桌面使用的，这让我怀疑它在构建时可能没有考虑到线程，我想知道是否有人有这样的经验。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-10-04T18:16:17.503

诚然，JavaMail 的线程安全规则没有很好的文档记录，但希望它们大部分符合您的预期。

多个线程可以使用一个 Session。

由于 Transport 表示与邮件服务器的连接，并且一次只有一个线程可以使用该连接，因此 Transport 将同步来自多个线程的访问以维护线程安全，但您实际上只想从单个线程中使用它线。

类似地，一个 Store 可以被多个线程使用，但是对底层连接的访问​​将是同步的并且是单线程的。

一条消息一次只能由一个线程修改，但多个线程应该能够安全地读取一条消息（尽管不清楚为什么要这样做）。

希望有帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T07:43:28.583

如果服务器没有及时响应，javamail 调度程序线程似乎不会超时。这会导致锁定所有可用线程。

用 1.4.3 和 1.4.5 测试了这种行为。

# math - 如何将 2d 网格点 (x,y) 作为 3d 点 (x,y,z) 映射到球体上

> ID：12732590
> 
> 赞同：10
> 
> 时间：2012-10-04T17:31:22.830
> 
> 标签：math, 3d, geometry, map-projections

我有一组 2d 网格点 (x,y)，我想将它们作为 3d 点 (x,y,z) 映射/投影到球体上。

我意识到随着 abs(y) 的增加，两极会有一些翘曲，但我的网格补丁只会覆盖赤道附近球体的一部分，因此可以避免严重的翘曲。

我很难找到正确的方程式。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-04T19:30:31.960

从关于墨卡托投影的维基百科文章中转述：

```
Given a "mapping sphere" of radius R,
the Mercator projection (x,y) of a given latitude and longitude is:
   x = R * longitude
   y = R * log( tan( (latitude + pi/2)/2 ) )

and the inverse mapping of a given map location (x,y) is:
  longitude = x / R
  latitude = 2 * atan(exp(y/R)) - pi/2 
```

要从逆映射的结果中获取 3D 坐标：

```
Given longitude and latitude on a sphere of radius S,
the 3D coordinates P = (P.x, P.y, P.z) are:
  P.x = S * cos(latitude) * cos(longitude)
  P.y = S * cos(latitude) * sin(longitude)
  P.z = S * sin(latitude) 
```

（请注意，“地图半径”和“3D 半径”几乎肯定会有不同的值，所以我使用了不同的变量名。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T20:25:17.933

我想你在球体上的 (x,y) 是纬度，经度。

如果是这样，请参阅[http://tutorial.math.lamar.edu/Classes/CalcII/SphericalCoords.aspx](http://tutorial.math.lamar.edu/Classes/CalcII/SphericalCoords.aspx)。

![在此处输入图像描述](../Images/a87c5c76e1cecc7caf6fc259720fe4c1.png)

那里：

phi = 90 度 - 纬度

theta = 经度

rho = 球体的半径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T17:37:19.470

我希望您可以使用许多全球投影的倒数。

与其他投影相比，赤道附近的墨卡托非常好。

公式在 wiki 页面上。
[http://en.wikipedia.org/wiki/Mercator_projection](http://en.wikipedia.org/wiki/Mercator_projection)

# php - ZendFramework 2 中的控制器特定布局

> ID：12732592
> 
> 赞同：2
> 
> 时间：2012-10-04T17:31:38.150
> 
> 标签：php, zend-framework2

我的 zendframework 2 应用程序中有一个模块，其中包含两个控制器。我想为控制器的其中一个操作设置不同的布局。有没有办法在模块配置文件中设置它？

Ps：我只是尝试使用以下命令将它设置在控制器的 __CONSTRUCT 方法中，但它没有工作！

```
$event = $this->getEvent();
$event->getViewModel()->setTemplate('layout/MYLAYOUT'); 
```

但是，如果我在控制器的每个操作中使用上述命令，它就可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:36:33.520

请参阅[akrabat 的示例](http://zf2test.akrabat.com/)，了解一些可以轻松调整布局、视图等的好方法。

具体来说，您可以在[他的 github](https://github.com/akrabat/ZF2TestApp/blob/master/module/Application/src/Application/Controller/ViewController.php#L33)上找到您要查找的内容。

这是设置/使用备用布局的控制器操作方法的剪切粘贴：

```
public function differentLayoutAction()
{
    // Use a different layout
    $this->layout('layout/different');

    return new ViewModel();
} 
```

* * *

编辑：看起来 akrabat 有一个示例`Change the layout for every action within a module`，它可能会为在配置中设置布局提供最佳指示；但我只是看了一下代码，这个例子目前还没有完成，它没有改变布局。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T19:10:19.397

我可以为您指明正确的方向，因为目前我无法打开示例项目。Evan Coury 发布了一种针对模块特定布局的方法。请参阅以下链接：

[Zend Framework 2 中的模块特定布局](http://blog.evan.pro/module-specific-layouts-in-zend-framework-2)

```
<?php
namespace MyModule;

use Zend\ModuleManager\ModuleManager;

class Module
{
    public function init(ModuleManager $moduleManager)
    {
        $sharedEvents = $moduleManager->getEventManager()->getSharedManager();
        $sharedEvents->attach(__NAMESPACE__, 'dispatch', function($e) {
            // This event will only be fired when an ActionController under the MyModule namespace is dispatched.
            $controller = $e->getTarget();
            $controller->layout('layout/alternativelayout');
        }, 100);
    }
} 
```

现在这对你有什么帮助？：嗯，`$controller`应该同时存储被调用的控制器和动作。我确定您可以检查被`$controller`调用的操作，然后相应地分配布局。

很抱歉，我目前只能向您提示方向，但我相信这可以让您开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-31T16:12:01.590

@Sam 的回答几乎可以回答这个问题。如前所述，它只需要检查调用了哪个控制器，可以这样完成：

```
<?php
namespace MyModule;

use Zend\ModuleManager\ModuleManager;

class Module
{
    public function init(ModuleManager $moduleManager){
        $sharedEvents = $moduleManager->getEventManager()->getSharedManager();
        $sharedEvents->attach(__NAMESPACE__, 'dispatch', function($e) {
                $controller = $e->getTarget();
                if ($controller instanceof Controller\AltLayoutController) {
                    $controller->layout('layout/alternativelayout');
                }
            }, 100);
    } 
```

我

# jquery - 在 JQuery 中同时发生动作

> ID：12732593
> 
> 赞同：0
> 
> 时间：2012-10-04T17:31:38.233
> 
> 标签：jquery, html, synchronous

我有一个`div`由两个 s 分开的标志`span`，目前我在第一个褪色，然后在第二个褪色。现在我正在尝试触发三个跨度，并希望同时发生三个动作，淡入所有三个元素，同时使用 CSS 属性 margin_left、margin-right 和 margin-top 将它们移动到位。以下函数在第一个跨度的淡入淡出完成后触发所有进一步的操作。你们中的任何人都可以给我一个提示如何触发同时发生的动作吗？

```
<script>
$('#logo span').eq(0).fadeIn(10000, function(){
    //this is the callback function.
    //when the above fade completes, anything in here will run immediately after.
    $('#logo span').eq(1).fadeIn(5000);
    $('#logo span').animate({ 'margin-top': '-210' }, 'slow');
});</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:35:12.027

你真的有两个选择。

第一个选项是使用`queue: false`with`animate`让一切立即发生。任何被调用的动画`queue: false`都会立即开始。

```
$('#logo span').eq(1).animate({opacity: 1}, {duration: 5000, queue: false}); 
$('#logo span').animate({ 'margin-top': '-210' }, {duration: 'slow', queue: false}); 
```

如果动画的持续时间相同，另一种选择是在一次调用`animate`. 这样，两个效果都被认为是一个单独的动画，并一起执行。

```
$('#logo span').animate({ 
    'margin-top': '-210',
    opacity: 1
}, 'slow'); 
```

**编辑：**

如果您的动画开始变得非常复杂，另一种选择是使用多个命名队列。这使您能够一次拥有多个单独的动画，同时仍然保持对相关动画进行排队的能力。我拼凑的一个小例子可以在这里找到：

[http://jsfiddle.net/5PuPT/](http://jsfiddle.net/5PuPT/)

注意位置变化和不透明度变化如何作用于独立队列。这使得每个相关动画都等待其类型的其他动画完成，但不会等待不同队列上的动画。

如果您制作的动画只是您的问题中的内容，那么这绝对是矫枉过正。如果您有一组更复杂的动画，这可能是一种需要考虑的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:35:55.160

只需给他们所有相同的类名，然后使用该类调用它们。

`$('.myClass').fadeIn(5000,....etc`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T19:40:33.773

谢谢大家在这里发帖。这就是我最终想出的并让它为我工作。在绝对定位的 div 中触发两个跨度，具体取决于第一个跨度的淡入结束。在为 span 设置 display:none 并定义零 margin-left 时，您可以在 span 中定义一个正或负的 margin-left，让它们从右侧或左侧飞入，同时淡入。

感谢所有实现它的人。祝你今天过得愉快！

```
<script>
$('#logo span').eq(0).fadeIn(10000, function(){
    //this is the callback function.
    //when the above fade completes, anything in here will run immediately after.
    $('#logo span').eq(1).fadeIn(5000);
    $('#logo span').eq(1).animate({ 'margin-left':'0' }, {duration:8000, queue: false});
     $('#logo span').eq(2).fadeIn(5000);
    $('#logo span').eq(2).animate({ 'margin-left':'0' }, {duration:5000, queue: false});
});</script> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-06T18:19:55.600

再次感谢你们在这里给我的所有帮助。我插入了一个字体大小的动画，它给它一个很好的画龙点睛的效果。万一你需要这个，我想把它添加为最后的帖子和答案！萨鲁多斯！

```
<!-- targeting the first, second and third logo span (image logo) to be faded in right after another, being moved synchroniously, animating font-size and finally displayed in a opocity -->
    <script>
    var oldSize = parseFloat($("#logo span.movie").css('font-size'));     
    var newSize = oldSize  * 3.9;
    $('#logo span').eq(0).fadeIn(1000, function(){
    //this is the callback function.
    //when the above fade completes, anything in here will run immediately after.
    $('#logo span').eq(1).fadeIn(800);
            $('#logo span').eq(1).animate({ 'margin-left':'0' }, {duration:5000, queue: false});
        $('#logo span').eq(2).fadeIn(5000);
            $('#logo span').eq(2).animate({ 'margin-left':'0' }, {duration:5000, queue: false});
                    $('#logo span').eq(0).animate({opacity: 0.7}, {duration: 5000, queue: false});
                    $('#logo span').eq(1).animate({opacity: 0.6}, {duration: 9000, queue: false});
                    $('#logo span').eq(2).animate({opacity: 0.9}, {duration: 5000, queue: false});
                    $("#logo span").eq(2).animate({ fontSize: newSize}, {duration: 5000, queue: false});        

    });</script> 
```

# mysql - 复杂的 Mysql 查询以获取信息

> ID：12732594
> 
> 赞同：0
> 
> 时间：2012-10-04T17:31:40.700
> 
> 标签：mysql, sql, ruby-on-rails

我目前正在从事一个项目，以从 API 获取一些信息并将其存储在数据库中。表结构如下所示：

```
id      ident aircraft_type  origin  destination  timestamp        departure_time
1      AWE1843      A321      KATL     KCLT    2012-10-04 10:46:34  2012-10-04 10:01:00 
2      ASQ5758      CRJ2      KATL     KIAD    2012-10-04 10:51:11  2012-10-04 09:40:00     
3      AAL2404      B738      KLAX     KDFW    2012-10-04 10:46:13  2012-10-04 08:23:00     
4      AAL2400      B738      KLAX     KDFW    2012-10-04 09:54:13  2012-10-04 07:31:00     
5      UAL912       B752      KLAX     KJFK    2012-10-04 10:19:24  2012-10-04 05:39:00
6      DAL1162      B752      KLAX     KCLT    2012-10-04 09:38:00  2012-10-04 04:44:30 
```

六行用于演示目的；我有大约 500 行这样的数据。我正在开发的应用程序将要求用户提供两个起点，并向用户提供这两个起点之间的所有共同目的地。

例如，如果用户输入“KATL”和“KLAX”作为始发机场，则查询将显示两个始发地之间的共同目的地，即“KCLT”。

我尝试了不同的方法来解决问题，但无法实现所需的功能。我尝试了连接和不同的 ActiveRecord 方法，但都没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:52:25.360

像这样的东西会起作用，它会给你两个表，如果你需要，你可以使用 s.* 或 e.* 来选择特定的表：

```
select * from (select * from flights where origin = 'KATL') s
inner join (select * from flights where origin = 'KLAX') e
on e.destination = s.destination; 
```

如果您只想显示目的地：

```
select distinct s.destination from (select * from flights where origin = 'KATL') s
inner join (select * from flights where origin = 'KLAX') e
on e.destination = s.destination; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:10:58.460

我假设您的型号名称为 Path

```
path = Path.where("origin in (#{ORIGIN1},#{ORIGIN2})")
path.uniq.collect{ |p| p if path.count(p) > 1}.compact 
```

这将为您提供给定两个来源的所有目的地，而无需复杂的 mysql 查询

谢谢

# data-binding - WinRT ImageSource 与 cookie 绑定

> ID：12732597
> 
> 赞同：5
> 
> 时间：2012-10-04T17:31:52.437
> 
> 标签：data-binding, cookies, windows-runtime

我有一个网站，现在我正在为它构建一个 WinRT 应用程序。我将 JSON API 用于 Web 和 WinRT 应用程序。

一个组件是图片库，其中图片具有访问控制权，因此只有特定用户才能下载它们。

使用 cookie 进行授权，对于 WinRT，它们保存在`System.Net.Http.HttpClient`对象内。

我尝试将图片 url 绑定`ImageSource`为`Image`控件，但它失败了，因为资源加载器没有将 cookie 发送到服务器。

我想使用绑定，因为它清晰和简单，我不想为在视图中设置图像等任务编写复杂的代码。

**问题：**

1.  `ImageSource`尝试下载图片时，如何绑定并强制加载程序将 cookie 发送到服务器？

2.  有没有办法节省绑定语法的简单性并添加自定义加载器行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T18:51:33.410

我最终得到了具有 Source 和 HttpClient 属性的自定义控件，它使用 HttpClient 下载图片，并且该客户端在所有应用程序中共享。

# algorithm - 以 n 为底数相加

> ID：12732603
> 
> 赞同：3
> 
> 时间：2012-10-04T17:32:17.610
> 
> 标签：algorithm, integer, addition

我遇到了这个问题，无法弄清楚如何解决它。有人可以帮我吗？问题是-

*   以 n 为底添加数字（不是任何流行的数字，如 10、16、8 或 2 - 我听说匈牙利符号的发明者 Charles Simonyi 在问这个问题时倾向于 -2）。

我只需要这个想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T17:40:01.230

您没有指定语言，但您可以将基数 n 转换为标准整数并添加它。

假设基数 N 数 = '...d2d1d0' 其中 di = 第 i 个数字。

数字 = ... d2 * N^2 + d1 * N^1 + d0 * N^0

然后像往常一样添加数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T17:36:41.703

想法：它看起来像散列，但在散列函数中你不能使用负数。

# asp.net - 如何选择合适的资源文件

> ID：12732607
> 
> 赞同：0
> 
> 时间：2012-10-04T17:32:33.740
> 
> 标签：asp.net, localization

我正在创建一个多语言网站。我有资源文件“lang-en”、“lang-fr”、“lang-fa”。

现在我想像这样使用它：

```
<a href="#"><%= Resources.SelectedLanguage.signup %></a> 
```

但我只能选择：

```
<a href="#"><% Resources.lang-en.signup %></a>
<a href="#"><% Resources.lang-fa.signup %></a>
<a href="#"><% Resources.lang-fr.signup %></a> 
```

如何使用变量来选择语言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:23:14.480

我找到了一种方法。如果您知道更好的方法，请告诉我修改我的程序。

```
 ResourceManager rm;
    switch(lang){
case "en":
rm = new ResourceManager(typeof( Resources.lang_en));
case "fr": 
rm = new ResourceManager(typeof( Resources.lang_fr));
case "fa":
rm = new ResourceManager(typeof( Resources.lang_fa));
} 
```

现在它可以像这样使用：

```
<a href="#"><%= rm.GetString("signup") %></a> 
```

# add - 无法在 Xcode 中向 plist 添加新的键值

> ID：12732608
> 
> 赞同：3
> 
> 时间：2012-10-04T17:32:34.183
> 
> 标签：add, plist, key-value, xcode4.5, keyvaluepair

我必须在 Xcode 中配置一些设置，阻止我添加新的 plist 键值对。三周前我升级到最新的 Xcode 版本 4.5。注意：我之前从未尝试添加新的键值对，所以我不知道这个问题是否是由于升级造成的。

如下图所示，如果我单击带有加号的圆形圆圈，则没有任何反应。没有添加新行 如果我右键单击该行并单击“添加行”项，则没有任何反应。

请注意，单击带有减号的圆圈将删除选定的键值对。如果我单击圆圈中加号左侧的小向上/向下箭头，则可以覆盖现有的键值对。但是对于我的生活，我无法弄清楚如何为新的键值对添加新行。

我已经重新启动了 Xcode。我已经重新启动了我的 iMac。我尝试创建新的虚拟项目，看看这是否只是我当前项目的一个限制——它不是。在任何情况下，我都不能添加新的键值对。有任何想法吗？

![Xcode 的图像](../Images/d3e7ede4c03b0d0f41112ed6eca2a30b.png)

我不知道这是否意味着什么，但是当我单击带有加号的圆圈时，它不仅没有添加新的键值行，正如您在图像中看到的那样，“类型”行从桌子。在单击圆圈中的加号之前，我可以看到 Key、Type 和 Value 列。我单击加号，“类型”列消失。如果我折叠并重新打开“自定义 iOS 目标属性”部分，则“类型”列只会在我下次单击加号/圆圈按钮时再次消失。奇怪的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T19:32:38.870

虽然上述问题仍然存在，但 Big Nerd Ranch 论坛上的 Mnemonix 提供了一种解决方法：

[http://forums.bignerdranch.com/viewtopic.php?f=218&t=5318&p=13864](http://forums.bignerdranch.com/viewtopic.php?f=218&t=5318&p=13864)

如果您单击“支持文件”文件夹下的 plist 文件，而不是尝试编辑如上所示的 Plist 文件，我可以在那里添加新的键值行/条目而不会出现任何问题。

...戴尔

# java - 使用 ArrayLists 忽略 indexOf() 的情况

> ID：12732610
> 
> 赞同：1
> 
> 时间：2012-10-04T17:32:38.543
> 
> 标签：java, arraylist

```
static void seaArray()
    {
        String searchTerm = key.nextLine();

        for (int i = 0; i < name.size(); i++)
        {
            if (name.get(i).toLowerCase().indexOf(searchTerm.toLowerCase(), i) != -1)
            {
                printLn(name.get(i));
            }
            else
            {
                printLn("nope");
            }
        }

        promptCommand();
    } 
```

我试图让用户搜索他们通过字符输入的名称。我基本上已经解决了这些错误，但我也希望他们能够做到这一点而不必担心大小写。我搜索了这个问题，并按照提供的说明进行操作，它仍然区分大小写。

有人介意帮我吗？

更多信息：名称就是我所说的数组列表。感谢大家的投入，当我有机会时，我会尝试每个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:39:17.097

`String#contains`与小写一起使用。

```
for(String nm:name){
    if(nm.toLowerCase().contains(searchTerm.toLowerCase()))
        printLn(name.get(i));
    else
        printLn("nope");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T17:35:19.520

[java.lang.String](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29)提供了一个名为的方法`equalsIgnoreCase`：

```
for(String str : name) {
    if(str.equalsIgnoreCase(searchTerm)) {
        ....
    } else {
        ....
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T17:35:41.900

尝试使用`Collections.binarySearch(name, searchTerm, String.CASE_INSENSITIVE_ORDER)`

（除非你想`name`成为一个子串`searchTerm`？）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T17:37:35.177

使用[`equalsIgnoreCase()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29)代替`equals()`

# python - Python情节图例：标记出现两次

> ID：12732614
> 
> 赞同：15
> 
> 时间：2012-10-04T17:32:54.087
> 
> 标签：python, matplotlib, legend

使用 matplotlib 制作的带有图例的简单绘图会产生以下结果：我的图例标签左侧的标记出现两次。谁能知道为什么以及如何避免这个问题？我的命令是：

```
pl.plot(x1,x2,'g^', label='regional')
pl.plot(y1,y2,'bo', label='local')
pl.legend( loc='upper left' ) 
```

谢谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-04T17:44:49.107

`numpoints`您可以使用关键字更改图例中显示的标记数量：

```
import matplotlib.pyplot as plt
import numpy as np
x1 = y1 = np.linspace(0, 10, 100)
x2 = np.sin(x1)
y2 = np.cos(y1)
plt.plot(x1,x2,'g--^', label='regional')
plt.plot(y1,y2,'b-o', label='local')
plt.legend( loc='upper left', numpoints = 1 )
plt.show() 
```

![在此处输入图像描述](../Images/0da02386f1c2a9a9c11109b0745608b4.png)

* * *

我相信标记出现两次（默认情况下）的原因是因为 matplotlib 试图显示标记之间的线型连接器。没有连接器时看起来有点奇怪。

如果情节有实线和虚线，

```
plt.plot(x1,x2,'g--^', label='regional')
plt.plot(y1,y2,'b-o', label='local') 
```

那么图例看起来像这样：

![在此处输入图像描述](../Images/97a6136b5f9228f262dd78e216e7a357.png)

现在您可以看到图例（以及图表）中标记之间的线型效果。

* * *

如果您根本不想要任何图例句柄，那么您可以使用

```
plt.legend(..., handlelength=0) 
```

例如，

```
import numpy as np
import matplotlib.pyplot as plt

x1 = y1 = np.linspace(0, 10, 100)
x2 = np.sin(x1)
y2 = np.cos(y1)
plt.plot(x1,x2,'g--^', label='regional')
plt.plot(y1,y2,'b-o', label='local')
plt.legend(loc='best', numpoints=1, handlelength=0)
plt.show() 
```

![在此处输入图像描述](../Images/23dc93886446b16c7b13ef67afe801e6.png)

你可以使用

```
plt.legend(loc='best', numpoints=1, handlelength=0, 
           markerscale=0, handletextpad=0) 
```

也删除图例标记。

# cloud - 我们是否需要对 30000 到 60000 的流量使用负载均衡器？

> ID：12732625
> 
> 赞同：0
> 
> 时间：2012-10-04T17:33:35.230
> 
> 标签：cloud, load-balancing, cloud-hosting

我的团队刚刚启动了一个带有服务器后端的 iphone 应用程序。架构是这样的；用户与 iphone 应用程序交互，并且 iphone 应用程序将请求发送到服务器。服务器对请求执行一些计算并发送回响应。服务器参与用户的每次交互。服务器上没有进行缓存，也没有任何会话处理..

我的问题是，如果应用程序的活跃用户在 30,000 到 50,000 之间，我们是否需要为此类应用程序配置负载均衡器？目前已经使用云服务器，数据库和apache服务器在同一台机器上。云服务器的大小为2GB。如果将云服务器的大小从 2GB 重新调整为更大的 10GB 或 15GB 而不是使用负载均衡器，这是否足够？

另一个问题是，是否有任何可用于 ubuntu 的好工具可以帮助监控服务器的内存、请求/响应？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:37:21.333

您可能需要负载均衡器至少有两个原因：

*   一台 Web 服务器无法处理所有流量
*   如果一台 Web 服务器出现故障，您将无法容忍中断

您可以（并且应该）通过执行负载测试来回答第一个问题。查看[Apache JMeter](http://jmeter.apache.org/)项目以获得出色的负载测试工具。

如果您不能容忍中断，您需要在负载均衡器后面至少有两个 Web 服务器，它们可以单独处理所有流量（或者如果您有 3 个 Web 服务器，每个应该能够处理大约 60% 的峰值流量以避免丢失单个 Web 服务器的风险）。

关于监控，您确实应该分别提出单独的问题。我个人使用 Zabbix 进行监控。它是开源的（不像某些解决方案那样“残缺的社区”和“企业”）。学习曲线有点陡峭（最近 2.0 的推出发生了一些变化，但没有很好的记录），但总的来说，它是一个可靠的解决方案。Nagios 也很受欢迎，值得一看。

# sql - SQL Server 系统过程“sp_replmonitorrefreshjob”

> ID：12732627
> 
> 赞同：2
> 
> 时间：2012-10-04T17:33:41.697
> 
> 标签：sql, sql-server, tsql

这个程序有什么作用？这是一个没有 MSDN 参考的小讨论 SP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:19:54.090

右键单击该过程，然后单击“修改”（显然您不想对其执行，因此我将断开查询窗口）。这是我所知道的最明确的方式来确定系统存储过程的作用。您是否会找到有关它的官方文档，可能不会。据我[了解](http://www.sqlsoldier.com/wp/sqlserver/measuringtransactionalreplicationlatencywithouttracertokens)，它基本上只是刷新监控数据。

# iphone - 如何在 iOS 应用程序中处理大量文本？

> ID：12732632
> 
> 赞同：3
> 
> 时间：2012-10-04T17:34:13.540
> 
> 标签：iphone, ios, xcode, storyboard

我正在创建一个通用的 ios 应用程序。在应用程序中有一个故事，我想手动放入应用程序，而不是从服务器中提取。这不是一个*非常*大量的文本，但我希望它分成不同的页面就足够了。

我的问题是：将大量文本放入用户可以滚动浏览的页面的应用程序的最佳方式是什么？

警告：我对编程很陌生，这是我的第一个 iOS 应用程序。您不必向我提供任何代码，如果您能指出我正确的方向，那就太好了！

-- 如果有影响的话，应用程序正在故事板中制作。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:47:22.980

有很多方法可以做到这一点。

1.  您可以通过在多个视图上显示文本来做到这一点

2.  使用滚动视图。 [http://www.youtube.com/watch?v=D3cgi36sY-k](http://www.youtube.com/watch?v=D3cgi36sY-k)

3.  取消页面视图控制器。

下面评论中的链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-17T06:00:04.630

`UITextView`继承自`UIScrollView`。除非您想在其中添加多个视图，否则您不需要 a `UITextView`inside 。`UIScrollView`

您可以创建一个像这样`UITextView`占据整个屏幕的`UIViewController`：

```
UITextView *myTextView = [[UITextView alloc] initWithFrame:self.view.bounds];
myTextView.text = @"some large text";
myTextView.font = [UIFont fontWithName:@"Arial" size:20];
myTextView.scrollEnabled = YES;
myTextView.editable = NO;
[self.view addSubview:myTextView]; 
```

属性 contentSize 将根据文本的大小自动设置。您还可以使用`[myTextView sizeToFit]`方法来调整大小`UITextView`以适合其文本。

# php - Select SUM 的 sql 语法错误

> ID：12732633
> 
> 赞同：-1
> 
> 时间：2012-10-04T17:34:18.607
> 
> 标签：php, mysql

我该如何正确地写这个？

```
$sql_totalbooknumber =  "SELECT SUM(items_counter) FROM probid_categories WHERE items_counter>0 AND `category_id` <>355"; 
```

我明白了

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'SELECT SUM(items_counter) FROM probid_categories WHERE items_counter>0 AND 'cate' 附近使用正确的语法

```
 if (!mysql_query($sql_totalbooknumber))
  {
  die('Error: ' . mysql_error());
  }; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-04T17:37:15.423

试试 `$sql_totalbooknumber = "SELECT SUM(items_counter) FROM probid_categories WHERE items_counter>0 AND category_id != 355"`；

# asp.net-mvc-3 - SQL Server 2008 R2 安装错误“信任关系失败”？

> ID：12732635
> 
> 赞同：0
> 
> 时间：2012-10-04T17:34:21.497
> 
> 标签：asp.net-mvc-3, visual-studio-2010, installation, sql-server-2008-r2

安装 SQL Server 2008 R2 时，由于“主域和受信任域之间的信任关系失败”错误，无法安装数据库引擎服务功能。

对于上下文，我正在尝试进入 ASP.NET MVC3，当我尝试在 Visual Studio 2010 中添加/浏览数据库时，我收到错误消息说它无法连接到 SQL Express 数据库，错误 40。当我运行 SQL Server 配置管理器，然后选择 SQL Server 服务，我得到“远程过程调用失败 [0x800706be]”

我做了一些研究，关于这个错误 40；我尝试过以管理员身份运行服务器配置管理器，将客户端协议中的 TCP/IP 设置更改为已启用，但它仍然无法正常工作。我卸载了SQL Server 2008 R2并重新安装，发现数据库引擎服务和SQL Server复制安装失败，报错“主域和受信任域之间的信任关系失败”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:54:47.693

删除所有内容。

这是献给任何像我一样想法并认为您可以摆脱一两件事并重新安装的人。任何与 SQL Server 相关的内容，删除它。在重新安装服务器之前，使添加/删除程序尽可能干净。

此外，请确保具有管理权限/以管理员身份运行。否则你可能有一个 SQLEXPRESS 服务器正在运行，但你无法访问它（或者因为我的工作计算机），由于超出 Stack Overflow 范围的用户权限问题而将其删除。:)

在这种情况下，您应该能够安装一个新实例 (IE SQLEXPRESS1)。请务必检查您的数据连接字符串。:)

# tridion - 是否可以使用 RenderComponentPresentation 方法调用 SiteEdit 可编辑内容脚本以从 TBB 输出内容？

> ID：12732637
> 
> 赞同：2
> 
> 时间：2012-10-04T17:34:32.313
> 
> 标签：tridion, siteedit

是否可以使用 RenderComponentPresentation 方法调用 SiteEdit 可编辑内容脚本以从 TBB 输出内容？

目前，我正在用一条红色边框线包裹该内容。当我滚动右上角的图标时，它表示已删除。但是，组件内容并没有被删除，组件模板或页面的任何更改都已重新发布，组件本身也不是动态组件。

如果我直接从 TBB 调用可编辑脚本，SiteEdit 正在工作，但如果我使用`RenderComponentPresentation`方法调用另一个组件模板来输出该脚本。我只得到红色边界线并说它已被删除。

**可编辑脚本：（直接从 TBB 工作）**

```
<!-- TemplateBeginIf cond="Content != ''" -->
<tcdl:ComponentField name="Content">${Content}</tcdl:ComponentField>
<!-- TemplateEndIf --> 
```

在 TBB 调用下面的方法并且总是得到一个红色边框 `RenderComponentPresentation(ComponentID, ComponentTemplateID)`

**环境**：Tridion 2011、SiteEdit 2009 SP3、Windows Server 2008

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:44:22.563

如果您正在渲染一个不在当前页面上的组件，那么预计 SiteEdit 会认为它已被删除。

您需要将组件表示标记为“基于查询”，以便 SiteEdit 知道不要期望它出现在页面上。这将禁用没有意义的功能（例如拖放以在页面上移动 CP），但在其他方面的工作方式相同。

要将其标记为基于查询，您将需要手动输出标记（请参阅[启动 SiteEdit 组件演示命令](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SiteEdit_2009_SP3/reference_StartSECP87A3F893FDAA4AD2956378B73245BC92)）或使用其他工具为您执行此操作，例如[Frank van Puffelen 创建](https://code.google.com/p/tridion-practice/wiki/TridionUI2012FunctionsForUseInHtmlTemplates)的函数（**注意：**我相信这些只是适用于 2011 版）。确保`IsQueryBased`参数设置为`true`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T19:20:31.713

我想这是不可行的，`RenderComponentPresentation`因为您要做的是嵌套组件演示。但是，您可以通过将 siteedit 标记标签直接添加`IsQueryBased`到`true`

请查看链接以获取更多信息（该部分的底部）： [http ://sdllivecontent.sdl.com/LiveContent/content/en-US/SiteEdit_2009_SP3/concept_0D0C929C17D74A6292B2AFE0C29F4DCD](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SiteEdit_2009_SP3/concept_0D0C929C17D74A6292B2AFE0C29F4DCD)

另一种方法是在嵌套组件演示之前添加以下标记（IsQueryBased 应该为真）：

```
<!-- Start SiteEdit Component Presentation: {
  "ID" : "MyCP23", "ComponentID" : "tcm:54-7894",
  "ComponentTemplateID" : "tcm:54-3201-32",
  "ComponentVersion" : 2,
  "IsQueryBased" : true,
  "SwapLabel" : "Left"
} --> 
```

# ios - UITableView 的“尝试删除部分”断言失败

> ID：12732640
> 
> 赞同：3
> 
> 时间：2012-10-04T17:34:54.160
> 
> 标签：ios, objective-c, uitableview, cocoa-touch, uikit

我正在尝试`UITableView`使用以下代码进行更新：

```
NSMutableIndexSet *sectionsToDelete = [NSMutableIndexSet indexSet];
NSMutableIndexSet *sectionsToInsert = [NSMutableIndexSet indexSet];
NSMutableIndexSet *sectionsToReload = [NSMutableIndexSet indexSet];

/* ... */

[[self tableView] beginUpdates];
if ([sectionsToReload count]) {
    DBGLogObject(sectionsToReload);
    [[self tableView] reloadSections:sectionsToReload withRowAnimation:animation];
}
if ([sectionsToDelete count]) {
    DBGLogObject(sectionsToDelete);
    [[self tableView] deleteSections:sectionsToDelete withRowAnimation:animation];
}
if ([sectionsToInsert count]) {
    DBGLogObject(sectionsToInsert);
    [[self tableView] insertSections:sectionsToInsert withRowAnimation:animation];
}
[[self tableView] endUpdates]; 
```

日志：

```
sectionsToReload = <NSMutableIndexSet: 0x71b19f0>[number of indexes: 2 (in 1 ranges), indexes: (1-2)]
sectionsToInsert = <NSMutableIndexSet: 0x71ac570>[number of indexes: 3 (in 2 ranges), indexes: (0 3-4)] 
```

（注意`sectionsToDelete`日志中没有。）

问题是，即使没有删除，我也会收到错误消息：

```
2012-10-04 19:21:16.769 Syntax[903:c07] *** Assertion failure in -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-2372/UITableView.m:826
2012-10-04 19:24:51.655 Syntax[903:c07] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'attempt to delete section 2, but there are only 2 sections before the update' 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T02:58:19.083

实际上，现在我重复了您的错误 - 如果您的数据在此更新之前只有 2 个部分（这是错误消息所暗示的），那么您无法重新加载第 1 和 2 部分。您的意思是更新 0 和 1 ? 我猜当重新加载发生时，它必须首先删除旧数据并添加新数据，这就是删除错误消息的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T19:55:54.033

做了“清理构建文件夹”，现在它按预期工作。我不知道为什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-25T09:28:01.797

您应该更改数据源，如果删除行或部分，则应更改 tableView 中的行数或部分

# javascript - 在 contenteditable 元素内的 span 元素内放置插入符号

> ID：12732641
> 
> 赞同：0
> 
> 时间：2012-10-04T17:34:55.977
> 
> 标签：javascript, caret

我正在开发一个文本编辑器。我有一个 content editable `<div>`，其中将放置`<span>`具有实际样式属性的元素。现在，我知道如何在这些 span 元素中放置插入符号，但是一旦我开始输入，文本就会打印在 span 之外，div 本身内部。

这是插入符号放置的相关代码：

```
var rs = $( "#textEntry" ).insert( "span" ).set( "style" , style );

            sel = window.getSelection();

            sel.collapse( rs[ 0 ] , 0 );

            rs[ 0 ].focus(); 
```

`rs[ 0 ]`当前跨度元素在哪里。

我怎样才能克服这种行为？

PS`$`不是一个jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:09:00.697

玩了这个之后，似乎解决方案如下：

有必要添加一些内部文本，然后在元素的第一个子节点（即 TEXT 节点）上设置插入符号，然后删除文本。插入符号将保持在该位置，瞧！有用。

```
var rs = $( "#textEntry" ).insert( "span" ).set( "style" , style ).html( "a" );

rs[ 0 ].focus();
if ( document.selection ) {
    sel = document.selection.createRange();
    sel.moveStart( 'character' , 0 );
    sel.select();
}
else{
    sel = window.getSelection();
    sel.collapse( rs[ 0 ].firstChild , 0 );
}

rs.html( "" , true ); 
```

伙计们，我很高兴看到其他解决方案！

# build - Team Build - 获取工作区 - 从特定路径获取最新信息，而不是所有内容

> ID：12732642
> 
> 赞同：2
> 
> 时间：2012-10-04T17:34:59.560
> 
> 标签：build, tfs, tfsbuild

我有一个简单的构建定义，我想用它来构建一个项目，每次我选择运行这个构建时，我都想从只与相关项目相关的分支/目录中获取最新信息。我怎么做？对“获取工作区”的调用从源代码管理中获取**所有**内容，出于各种原因，我不想（或不需要）从所有内容中获取最新信息。

我希望我没有要求太多。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T03:06:03.877

检查构建定义中的工作区映射。构建只获取您在那里指定的项目。如果要在映射的路径中排除某些文件夹，可以选择隐藏某些文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:09:33.177

你可以调整你`ItemsToBuild`的`Process Tab``Required section`

![在此处输入图像描述](../Images/8230e52563e5d09e642f7f2fd8af639a.png)

# c# - 用于开发 WPF 触摸和鼠标控制应用程序的资源链接 WPF

> ID：12732648
> 
> 赞同：0
> 
> 时间：2012-10-04T17:35:20.353
> 
> 标签：c#, wpf, touch

我正在寻找可以通过触摸（Microsoft Surface）或使用带有鼠标的普通笔记本电脑操作的应用程序。这是否可能，如果可以，我该如何实施？

资源/链接/博客非常感谢——提前致谢！

链接到类似/未回答的问题：[Stackoverflow 问题](https://stackoverflow.com/q/11085078/1076406)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:58:42.573

.NET 4.0+ 控件同时支持触摸和鼠标输入法。例如，仍然使用 Touch 触发 Click 事件。还有一些特定于触摸的事件，如 TouchDown、TouchUp 等。

您可以导入 Microsoft Surface 2.0 SDK 并使用它们捆绑的控件。我特别喜欢他们的 SurfaceListBox，因为它似乎比传统的列表框更好地处理触摸滚动。 *技术说明：*如果您导入 Surface SDK 库，您的目标计算机**必须**安装 Surface 可再发行组件。它将重要的 DLL 注册到您的系统，如果适用于您的项目，您可以通过 COM Interop 手动完成。

# php - 我需要根据输入的代码将用户重定向到另一个页面

> ID：12732654
> 
> 赞同：0
> 
> 时间：2012-10-04T17:35:24.537
> 
> 标签：php, html

我需要在我的网站上创建一个表单，用户在其中输入代码并根据该代码将他们重定向到另一个页面。通过数据库执行此操作会更安全，但我不介意是否在表单本身上处理逻辑。

所以，这是我的意思的一个例子：

输入代码：（此处为方框）

表单搜索潜在答案列表（s5d11、wy4sd、lk123 等），如果找到匹配项，它会重定向到每个代码的特定页面，否则会给出错误消息，表明输入的代码错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T17:38:53.083

这是一个包含两个文件的示例，一个 html 和一个 php 文件。html 页面将您输入的内容提交到 php 页面，该页面将浏览器重定向到基于输入的 URL。

HTML，索引.html：

```
<form action="redirect.php" method="get">
  <input name="mytext" />
  <input type="submit" />
</form> 
```

PHP，重定向.php：

```
<?
switch($_GET['mytext'])
{
    case 's5d11':
        header('Location: http://somepage.com/');
        break;
    case 'qy4sd':
        header('Location: http://someotherpage.com/');
        break;
    default:
        print "<p>Wrong code. Try again</p>";
        include('index.html');
        break;
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:57:24.607

试试这个。我刚刚把这个搞定了。对于每个代码，您都有一个代码和一个重定向到的路径。当然，您需要应用自己的卫生设施和任何其他标准。我把它们全部大写...

```
<?php

$_POST['CODE'] = 'CODE'; // Simulate post data...
$array_of_codes = array('CODE' => 'pathtoredirect');
$get_code = addslashes(strtoupper($_POST['CODE']));

if(array_key_exists($get_code, $array_of_codes))
{
    header("Location:".$array_of_codes[$get_code]."");
}else
{
    echo "Error: Code not in array.";
}
?> 
```

# html - 字体真棒的文本渐变

> ID：12732663
> 
> 赞同：32
> 
> 时间：2012-10-04T17:35:58.700
> 
> 标签：html, css, font-awesome

我刚刚发现[字体很棒](http://fortawesome.github.com/Font-Awesome/)，我想在我的网站上使用它。

问题是，我希望我的字体用渐变着色。我发现[此代码](http://css-tricks.com/snippets/css/gradient-text/)适用于标准文本，但无法使用 Font Awesome 中的图标

这是我测试的：

```
<style>
    .big-icon {
        font-size: 72px;
        background: -webkit-gradient(linear, left top, left bottom, from(#eee), to(#333));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }
</style>

<span class="big-icon">
    Hello world
</span>
<i class="icon-beaker"></i>
<span class="big-icon">
    <i class="icon-beaker"></i>
</span> 
```

它显示了一个带有渐变的“Hello world”，我想要的图标，然后什么都没有......

有人知道吗？

谢谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-05T23:19:06.620

快速尝试一下；要意识到的重要一点是 Font Awesome 通过['before' 伪元素](http://reference.sitepoint.com/css/pseudoelement-before)添加了实际图标：

```
[class^="icon-"]::before,
[class*=" icon-"]::before {
  font-family: FontAwesome;
  font-weight: normal;
  font-style: normal;
  display: inline-block;
  text-decoration: inherit;
}

.icon-beaker:before {
  content: "\f0c3";
} 
```

要将渐变效果应用于图标，您必须定位包含图标的伪元素 - 请参阅[此 jsFiddle](http://jsfiddle.net/HGxMu/26/)以获取基于您的代码的工作演示：

```
.big-icon:before {
  font-size: 72px;
  background: -webkit-gradient(linear, left top, left bottom, from(#f00), to(#333));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  display: initial; /* reset Font Awesome's display:inline-block */
}​ 
```

* * *

**编辑：**上面链接的 jsFiddle 不再按预期工作，因为包含“FontAwesome”图标的链接 CSS 文件已移动；使用[bootstrapcdn.com 托管](http://fortawesome.github.io/Font-Awesome/get-started/#bootstrapcdn)的 FontAwesome v4.0.3 版本和更新的 FontAwesome-icon CSS 类名称的工作版本可在[http://jsfiddle.net/HGxMu/55/获得](http://jsfiddle.net/HGxMu/55/)

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2017-01-02T23:26:42.937

直接在图标上应用样式。

```
.fa-gradient {
	background: -webkit-gradient(linear, left top, left bottom, from(#f00), to(#333));
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
}
```

```
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
<i class="fa fa-3x fa-wrench fa-gradient"></i>
```

# php - Symfony2 中模型辅助函数的放置位置

> ID：12732664
> 
> 赞同：10
> 
> 时间：2012-10-04T17:36:00.417
> 
> 标签：php, symfony

我有以下功能：

```
function array_duplicates($array)
{
    $duplicates = array();
    $unique = array_unique($array);
    for ($i = 0; $i < count($array); $i++) {
        if (!array_key_exists($i, $unique)) {
            $duplicates[] = $array[$i];
        }   
    }   
    return $duplicates;
} 
```

该功能显然不适用于任何特定模型，也不是模板助手。放置此功能的合适位置在哪里？（请不要说“任何你想去的地方”。）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-04T18:02:46.567

这可能是您要投入服务的类型。像这样创建一个类：

```
class ArrayUtils
{
    function array_duplicates($array)
    {
        ... 
        return $duplicates;
    }
} 
```

然后将其定义为服务。如果你使用 YAML，你会在你的 config.yml 文件中加入这样的东西：

```
services:
    arrayUtils:
        class:        Full\Path\To\ArrayUtils 
```

在这种配置下，Symfony 将创建 ArrayUtils 的单个实例，并授予所有控制器访问它的权限。然后你可以这样称呼它：

```
class SomeController
{
    public function someAction()
    {
        ...
        $duplicates = $this->get("arrayUtils")->array_duplicates($array);
        ...
    }
} 
```

这都是 Symfony 依赖注入框架的一部分。这很酷，我建议在这里阅读：[http ://symfony.com/doc/2.0/book/service_container.html](http://symfony.com/doc/2.0/book/service_container.html)

*替代选项*

现在，对于这么一小段代码来说，这可能有点矫枉过正。如果您只打算在单个捆绑包中使用它，那么您可能只想将其放入基本控制器中，并让所有其他控制器扩展该基本控制器。

```
class BaseController
{
    function array_duplicates($array)
    {
        ...
    }
}

class SomeController extends BaseController
{
    function someAction()
    {
        $this->array_duplicates($array);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T18:09:43.887

按照惯例，实用程序类位于`Util`命名空间下。

如果你使用包，一个类将进入`YourBundle\Util`命名空间。如果你[不这样做](https://stackoverflow.com/questions/9999433/should-everything-really-be-a-bundle-in-symfony-2)，它将进入`Acme\Util`命名空间——`src/Acme/Util`文件夹。

# c# - 生成排列的此 LINQ 代码的说明

> ID：12732665
> 
> 赞同：0
> 
> 时间：2012-10-04T17:36:02.820
> 
> 标签：c#, linq, algorithm

有人可以向我解释这段代码是如何产生排列的吗？

我看到它正在使用递归列表构建，但我无法完全了解确切的机制。

```
public static IEnumerable<IEnumerable<T>> Permute<T>(this IEnumerable<T> list)
{
    if (list.Count() == 1)
        return new List<IEnumerable<T>> { list };
    return list
        .Select((a, i1) => 
                    Permute(list.Where((b, i2) => i2 != i1))
                   .Select(b => (new List<T> { a }).Union(b)))
        .SelectMany(c => c);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T17:47:21.870

首先，我要指出，这依赖于 的顺序`Union`，这是未指定的，并且仅在原始集合中的值是唯一的情况下才有效。更改`Union`为`Concat`将解决此问题。

我怀疑它也贵得吓人。反正...

你可以通过归纳来理解它。它绝对适用于基于`if`. 所以，让我们从那里开始吧。

假设我们首先假设它适用于这样的大小集合`n`：

```
{ e1, ... en } 
```

现在让我们看看它是否适用于 size 的集合`n + 1`。该调用将绕过“if”，并进入递归返回部分。所以我们剩下：

```
list.Select((a, i1) => 
                Permute(list.Where((b, i2) => i2 != i1))
               .Select(b => (new List<T> { a }).Union(b)))
    .SelectMany(c => c); 
```

这`SelectMany`部分只是展平了一个集合的集合——这很简单。因此，让我们专注于`Select`通话。是说...

*   `a`对于原始集合中的每个元素 ( )，我们知道它具有索引`i1`...
    *   *制定除*该元素之外的列表（这是`list.Where(...)`部分）
    *   对于那个较小列表的每个排列（这就是`Permute`调用）......
    *   ...生成一个由元素组成的新列表，`a`后跟“当前排列”（这就是`new List(...).Union(b)`部分。）

所以如果我们的集合是 { x, y, z } 我们会得到：

*   每个集合的`{ y, z }`前缀为`x`
*   每个集合的`{ x, z }`前缀为`y`
*   每个集合的`{ x, y }`前缀为`z`

这几乎定义了“每个排列”......所以它适用于`n + 1`.

给定基本情况和归纳步骤，因此它适用于任何大小大于或等于 1 的集合。

# jquery - 设置子元素高度以填充 CSS

> ID：12732666
> 
> 赞同：0
> 
> 时间：2012-10-04T17:36:08.330
> 
> 标签：jquery, css

我有一个使用以下代码的网页：

```
<!DOCTYPE html>

<html style="height: 100%; margin: 0; padding: 0; color: #FFF;">
<head>
  <meta name="viewport" content="width=device-width" />
  <title>Index</title>

  <style type="text/css">                
    #content { height: 100%; overflow: hidden; background: white; }
    #header { float: left; width: 100%; background-color:silver; padding:8px 4px;}

    .tabItem { padding:15px; border:1px solid #ccc; background-color:blue; top:0; left:0; }
  </style>

  <script src="/Scripts/modernizr-2.5.3.js"></script>
  <script src="/Scripts/jquery-1.7.1.js"></script>
  <script src="/Scripts/jquery.cycle.all.js"></script>
</head>

<body style="height: 100%; margin: 0; padding: 0; color: #FFF;">

<div id="content">
    <div id="header">
        <a href="#" onclick="showTab(0);">Tab 1</a> | 
        <a href="#" onclick="showTab(1);">Tab 2</a> | 
    </div>

    <div id="tabItems">
        <div id="tabItem1" class="tabItem">
            <h2>Tab Content Number 1</h2>
        </div>

        <div id="tabItem2" class="tabItem">
            <h2>Tab Content Number 2</h2>
        </div>
    </div>
</div>

    <script type="text/javascript">
        $(document).ready(function () {
            $('#tabItems').cycle({
                fx: 'scrollDown',
                next: '#next',
                prev: '#prev',
                timeout: 0
            });
        });

        function showTab(tn) {
            $('#tabItems').cycle(tn);
            return false;
        }
    </script>
</body>
</html> 
```

不知何故，我需要使每个 .tabItem 成为可用房地产的宽度和高度。不幸的是，我不能设置 tabItems div 的高度。原因是因为我使用的插件（循环），当我设置tabItems div的高度时似乎不起作用。诡异的。正因为如此，我正试图找出解决这个问题的方法。

有谁知道如何在不设置 tabItems 元素的高度的情况下使 .tabItem 项目成为可用房地产的宽度/高度？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:41:51.697

有几件事需要考虑。您是否要按百分比设置高度？如果是这样，则仅当父元素具有明确的高度时才有效。

另外... 在 CSS 中，您可以将元素的 top、right、bottom 和 left 属性设置为 0px，它会触及其父元素的所有边框。

# android - HTC 设备 (Android) 中的飞行模式

> ID：12732672
> 
> 赞同：1
> 
> 时间：2012-10-04T17:36:53.070
> 
> 标签：android, settings, airplane

我正在尝试为 android 制作一个简单的飞行模式切换应用程序。我可以打开飞行模式，但是当我关闭它时，我的 HTC Thunderbolt (Android 2.3.4) 上的移动网络没有重新打开。wifi 工作正常。当我在三星设备上进行测试时，Wifi 和蜂窝网络都会重新打开。我正在使用以下代码：

```
Adapted from Controlling Airplane Mode:

// read the airplane mode setting
boolean isEnabled = Settings.System.getInt(
      getContentResolver(), 
      Settings.System.AIRPLANE_MODE_ON, 0) == 1;

// toggle airplane mode
Settings.System.putInt(
      getContentResolver(),
      Settings.System.AIRPLANE_MODE_ON, isEnabled ? 0 : 1);

// Post an intent to reload
Intent intent = new Intent(Intent.ACTION_AIRPLANE_MODE_CHANGED);
intent.putExtra("state", !isEnabled);
sendBroadcast(intent); 
```

# sql - 解析函数 FIRST_VALUE 在 SQL 中是如何工作的

> ID：12732675
> 
> 赞同：2
> 
> 时间：2012-10-04T17:37:06.070
> 
> 标签：sql, analytic-functions

我刚刚开始深入研究 SQL 分析函数，对 FIRST_VALUE 有点着迷，也许它只是特定于[该](http://www.orafaq.com/node/55)站点的示例查询：

```
-- How many days after the first hire of each department were the next
-- employees hired?

SELECT empno, deptno, hiredate ? FIRST_VALUE(hiredate)
OVER (PARTITION BY deptno ORDER BY hiredate) DAY_GAP
FROM emp
WHERE deptno IN (20, 30)
ORDER BY deptno, DAY_GAP;

 EMPNO     DEPTNO    DAY_GAP
---------- ---------- ----------
  7369         20          0
  7566         20        106
  7902         20        351
  7788         20        722
  7876         20        756
  7499         30          0
  7521         30          2
  7698         30         70
  7844         30        200
  7654         30        220
  7900         30        286 
```

我正在努力处理这个查询的两个部分。首先，什么是“？” 在这里做什么？我以前只看到它用于参数化查询。其次，DAY_GAP 实际是如何计算的？查询如何知道根据此查询计算天数差？和hiredate的数据类型有关系吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T17:43:26.667

> 首先，什么是“？” 在这里做什么？

这是一个错误；它应该是一个`-`（减号）。我猜 Basu 将他的 Oracle 成绩单复制并粘贴到一个程序中，该程序将 ASCII 减号静默转换为 Unicode 破折号，然后从那里进入一个程序，将非 ASCII 字符静默转换为`?`.

> 其次，DAY_GAP 实际是如何计算的？查询如何知道根据此查询计算天数差？和hiredate的数据类型有关系吗？

见前文；一旦你把它写成`hiredate - FIRST_VALUE(hiredate) OVER (...)`，它突然变得有意义了！:-)

# android - 如何通过微调器选择在图像视图中显示和图像

> ID：12732676
> 
> 赞同：0
> 
> 时间：2012-10-04T17:37:12.607
> 
> 标签：android, android-layout, android-intent, android-widget

我希望能够从`Spinner`和 中选择一个项目，以便该项目显示在`ImageView`. 我试过这样做，我的示例代码如下。还有另一种方法吗？

活动课

```
 public class Campsites  extends Activity{ 
            @Override 
                public void onCreate(Bundle savedInstanceState) { 
                super.onCreate(savedInstanceState); 
                setContentView(R.layout.campsites); 

                Spinner spinner = (Spinner) findViewById(R.id.spinner1); 
                ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.Camp_Site_Facilities, android.R.layout.simple_spinner_item); 
                adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
                spinner.setAdapter(adapter); 
            }

    public void onItemSelected(AdapterView<?> parent, View view, 
            int pos, long id) {

            ((ImageView) findViewById(R.id.imageView1)).setImageResource(0);
            ((ImageView) findViewById(R.id.imageView1)).setImageResource(R.drawable.bergendal1);

    }

    public void onNothingSelected(AdapterView<?> parent) {
        // Another interface callback
    }
} 
```

布局 XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:src="@drawable/elephant" >

<Spinner
    android:id="@+id/spinner1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true" />

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:scaleType="fitXY"/> 
```

我在字符串中创建了这个

```
 <string-array name="Camp_Site_Facilities">
    <item>Berg en Dal</item>
    <item>Crocodile Bridge</item>
    <item>Letaba</item>
    <item>Lower Sabie</item>
    <item>Mopani</item>
    <item>Olifants</item>
    <item>Orpen</item>
    <item>Pretoriuskop</item>
    <item>Punda Maria</item>
    <item>Satara</item>
    <item>Shingwedzi</item>
    <item>Skukuza</item>
</string-array> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:52:14.497

检查这是否有效

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
@Override
public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
    // your code for setting the image based on the item clicked....here
}

@Override
public void onNothingSelected(AdapterView<?> parentView) {
    // your code here
}

}); 
```

# ember.js - 强制 Ember 等待来自 Ajax 请求的值

> ID：12732692
> 
> 赞同：2
> 
> 时间：2012-10-04T17:37:44.180
> 
> 标签：ember.js

我有一个 Ember 应用程序，它通常会向服务器发出 ajax 请求以获取其数据。我面临的问题是每个请求都需要在 URL 上附加一个签名。此签名需要经常计算，因为它可能仅在 10 秒内有效。系统要求我从服务器请求此签名，可能使用 ajax 请求。所以，我的问题是 Ember 永远不能使用从 ajax 请求返回的签名，因为它不是按预期设计的那样等待。

有问题的代码在这里：http: [//jsfiddle.net/veDjq/](http://jsfiddle.net/veDjq/)

在该代码中，`signature`尽管我可以看到签名请求返回正确的值，但in`App.Post`始终是in 。`undefined``console.log``response``App.Signature`

我是 Ember 的新手，所以我很可能会以这种错误的方式行事。最后，每次 Ember 对象必须从服务器请求数据时，我都需要能够请求新签名。我尝试使用 jQuery`$.ajaxSend`来更改 URL，但它不适用于 GET 请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T04:26:39.017

在你的`success`处理程序内部，`this`不是你想象的那样。看起来你打算`this`成为`App.Signature`班级。为了做到这一点，您可以将`context`签名 ajax 调用的选项设置为`this`.

我还建议研究承诺。他们将帮助您清理此代码。例如（未经测试）：

```
App.Signature.reopenClass({
    retrieveSignature: function(){
        return $.ajax({
            url: '/auth/',
        });
    }
});

App.Post.reopenClass({
    postedPosts: [],
    find: function(){
        var postClass = this;
        var signaturePromise = App.Signature.retrieveSignature();
        signaturePromise.done(function(signature){
            var postsRetrieval = $.ajax({
                url: 'http://someserver.com/1/posts/list.json?' + signature,
                dataType: 'json'
            });
            postsRetrieval.done(function(response){
                response.data.forEach(function(post){
                    postClass.postedPosts.addObject(App.Post.create(post))
                });
            });
        });
        return this.postedPosts;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:49:36.607

您正在返回`this.signature`，而`$.ajax`请求仍在运行。您可能希望将包含主 ajax 调用的回调函数传递给`App.Signature.getSignature`，并从成功或完成回调中运行该回调。

编辑：等一下。我刚刚意识到您将 async 设置为 false，所以我最初的评论是不正确的。

# javascript - 如何重新加载javascript而不是页面

> ID：12732695
> 
> 赞同：2
> 
> 时间：2012-10-04T17:38:04.577
> 
> 标签：javascript, jquery, html

我的滑块有问题。当我第一次加载我的网页时，它会显示一个带有一些图像的滑块。我有一些链接可以更改要显示的图像，因此当我单击时，我想将其他图像显示为滑块。问题是当我点击新链接时，它没有使用 jquery 函数来格式化滑块。

在这里我粘贴一些代码，以便您弄清楚：

```
<div class="contenidor_escaparates_2011">
    <div id="contenidor_slider" class="containerGaleria">
        <ul id="slideshow">
              <li><img src="img/Escaparates_2011/img1.jpg" alt="Dormitorio azul turquesa." /></li>
              <li><img src="img/Escaparates_2011/img2.jpg" alt="Escaparate Agosto 2011." /></li>
              <li><img src="img/Escaparates_2011/img3.jpg" alt="Escaparate Enero 2011." /></li>
</ul> </div></div> 
```

然后是jQuery：

```
$(document).ready(function()
{
    var timeout, manualMode = false,

            $slideshow = $('#slideshow'),
    $items = $slideshow.find('li').hide(),
    total = $items.length,
    getItem = function($item, trav) {
        var $returnItem = $item[trav]();
        return $returnItem.length ?
            $returnItem :
            $items[(trav == 'next') ? 'first' : 'last']();
    },

    showItem = function($currentItem, $itemToShow) {
        var $itemToShow =
            $itemToShow || getItem($currentItem,'next');

        $currentItem.fadeOut(300, function() {
            $itemToShow.fadeIn(300, fadeCallback);
        });
    },

    fadeCallback = function() {
        if (manualMode) { return; }

        var $this = $(this),
            $next = getItem($this, 'next'),
            num = $this.prevAll().length + 1;

        // set the timeout for showing
        // the next item in 5 seconds
        timeout = setTimeout(function() {
            showItem($this, $next);
        }, 3000);
    },

    handleBtnClick = function(e) {
        clearTimeout(timeout);

        manualMode = true;

        var $currentItem = $items.filter(':visible'),
            $itemToShow = getItem($currentItem, e.data.direction);

        showItem($currentItem, $itemToShow);
    };

    $items.eq(0).fadeIn(500, fadeCallback);

}); 
```

这非常适合我第一次加载页面，但是当我用这个更改内容时：

```
<script type="text/>
$('#nuestra_tienda_show').click(function()
    {
     $('.containerGaleria').html('');
     $('<ul id="slideshow"><li><img src="img/Escaparates_2011/img1.jpg" alt="Dormitorio azul turquesa." /></li><li><img src="img/Escaparates_2011/img2.jpg" alt="Escaparate Agosto 2011." /></li><li><img src="img/Escaparates_2011/img3.jpg" alt="Escaparate Enero 2011." /></li><li><img src="img/Escaparates_2011/img4.jpg" alt="Escaparate Junio 2011." /></li><li><img src="img/Escaparates_2011/img5.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img6.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img7.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img8.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img9.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img10.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img11.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img12.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img13.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img14.jpg" alt="" /></li></ul> ')
         .prependTo('.containerGaleria');
         $('#galeria_seleccionada').html('Nuestra tienda 2011');
         location.reload();
         });
</script> 
```

所以基本上，我所做的是，在某个链接上的 onclick() 事件之后，我更改了 div 的 html 内容，但显然，它不使用 jquery，因为它一开始没有加载。关于如何解决这个问题的任何想法？

如果我使用 location.reload(); 它显示了我里面的第一件物品，所以它对我不起作用......

编辑：
等等，我编辑 jsFiddle ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:54:30.510

您需要为幻灯片创建一个 init 方法，并在需要时调用它。

我想看看这个 js 是如何设置的，所以我会忽略它并发布我将如何处理它：

```
$(document).ready(function(){
    slideshow.init();

    $('#nuestra_tienda_show').on('click', function()
    {
        $('.containerGaleria').html('');
        $('<ul id="slideshow"><li><img src="img/Escaparates_2011/img1.jpg" alt="Dormitorio azul turquesa." /></li><li><img src="img/Escaparates_2011/img2.jpg" alt="Escaparate Agosto 2011." /></li><li><img src="img/Escaparates_2011/img3.jpg" alt="Escaparate Enero 2011." /></li><li><img src="img/Escaparates_2011/img4.jpg" alt="Escaparate Junio 2011." /></li><li><img src="img/Escaparates_2011/img5.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img6.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img7.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img8.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img9.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img10.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img11.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img12.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img13.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img14.jpg" alt="" /></li></ul> ')
        .prependTo('.containerGaleria');
        $('#galeria_seleccionada').html('Nuestra tienda 2011');
        slideshow.init();
    });
});

var slideshow = {
    timeout: null,
    manualMode: false,
    total: 0,
    init: function(){
        clearTimeout(this.timeout);
        var items = $('#slideshow').find('li').hide();
        this.total = items.length;
        items.eq(0).fadeIn(500, this.fadeCallback);
    },
    getItem: function(item, trav) {
        var returnItem = item[trav]();
        return returnItem.length ?
            returnItem :
            items[(trav == 'next') ? 'first' : 'last']();
    },
    showItem: function(currentItem, itemToShow) {
        var itemToShow =
            itemToShow || this.getItem(currentItem,'next');

        currentItem.fadeOut(300, function() {
            itemToShow.fadeIn(300, this.fadeCallback);
        });
    },
    fadeCallback: function() {
        if (manualMode) { return; }

        var $this = $(this),
            next = getItem($this, 'next'),
            num = $this.prevAll().length + 1;

        // set the timeout for showing
        // the next item in 5 seconds
        timeout = setTimeout(function() {
            this.showItem($this, next);
        }, 3000);
    },
    handleBtnClick: function(e) {
        clearTimeout(this.timeout);

        this.manualMode = true;

        var currentItem = items.filter(':visible'),
            itemToShow = this.getItem(currentItem, e.data.direction);

        this.showItem(currentItem, itemToShow);
    },
    handleBtnClick: function(e) {
        clearTimeout(this.timeout);

        this.manualMode = true;

        var currentItem = items.filter(':visible'),
            itemToShow = this.getItem(currentItem, e.data.direction);

        this.showItem(currentItem, itemToShow);
    };
}; 
```

`slideshow.init()`然后，当您想重新评估幻灯片内容时，您只需调用即可。

我没有对此进行彻底的审核，但总体思路是将这个庞大的 var 链转换为单个 js 对象并包含整个内容。

我不明白为什么你会在点击功能中这样写幻灯片的内容。您正在擦除容器的 html，创建元素，然后将它们添加到容器中，并一遍又一遍地用相同的字符串重写标题 id。为什么不将幻灯片的 html 设置为新图像？

```
$('#slideshow').html('<li><img src="img/Escaparates_2011/img1.jpg" alt="Dormitorio azul turquesa." /></li><li><img src="img/Escaparates_2011/img2.jpg" alt="Escaparate Agosto 2011." /></li><li><img src="img/Escaparates_2011/img3.jpg" alt="Escaparate Enero 2011." /></li><li><img src="img/Escaparates_2011/img4.jpg" alt="Escaparate Junio 2011." /></li><li><img src="img/Escaparates_2011/img5.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img6.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img7.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img8.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img9.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img10.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img11.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img12.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img13.jpg" alt="" /></li><li><img src="img/Escaparates_2011/img14.jpg" alt="" /></li>'); 
```

# javascript - 点击事件在第一次点击时不会触发

> ID：12732697
> 
> 赞同：0
> 
> 时间：2012-10-04T17:38:15.687
> 
> 标签：javascript, jquery

```
$('#sampleid').bind('click', function(e) {
    // a call is made to the plugin to construct a dialog box, the id "someid" is passed as an argument to this plugin
    $('#someid').bind('click', function() {});
} 
```

我有这个点击事件，它不会在第一次点击时触发，但从第二次点击开始就可以正常工作。samplefunction 函数调用另一个插件，该插件构建对话框。“someid”，作为参数传递给这个插件。

第一次点击有问题。第一次单击没有任何反应，如果再次单击，则单击事件行为正常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T17:41:31.680

对于绑定事件，您可能希望将其放入 document.ready 中：

```
$(document).ready(function () {
    $("#somid").bind("click", function () {
        // do something
    });
}); 
```

如果你想在某个事件之后绑定它（比如调用`sampleFunction`，那么它直到之后才可用。我猜你已经`sampleFunction`在点击元素时触发了。

如果您需要在页面上出现“someid”的任何时候使用它，您应该使用`on`：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

这“修复”了`bind`具有的“缺点”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:43:30.350

我认为[`on`](http://api.jquery.com/on/)现在推荐。

```
var samplefunction =  function(){
    $(document).on('click', '#someid', function(){
        //do something ;
    });
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-04T17:41:14.863

而不是在函数上绑定使用

```
 $(document).ready(function() {
        var samplefunction =  function(){
        //  
        $('#someid').on('click',function(){
        do something ;
        });
       }

    }); 
```

# php - PHP 邮件收不到？

> ID：12732699
> 
> 赞同：0
> 
> 时间：2012-10-04T17:38:30.710
> 
> 标签：php, email, sms

因此，我正在为我的网站创建一些内容，在月底向您发送包含所有交易的文本。它为每笔交易发送一个文本（一次全部发送）。我正在使用 PHP`mail()`函数发送文本（number@vtext.com。）平均交易量约为 100，因此它一次通过一个发送 100 个文本/电子邮件环形。

它可以工作，但手机会收到大约 50 个，然后停止接收它们，然后像​​几个小时后它可能会收到 20 个，然后再次停止，依此类推。这是手机问题吗？还是我的服务器？服务器是否真的发送了所有的邮件，而手机只是无法接收邮件？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:40:29.480

这很可能是邮件服务器内部某些垃圾邮件保护算法的影响。

尝试查看电子邮件标头，如果您幸运的话，垃圾邮件保护工具会在邮件中添加一些可能提供提示的信息。

# objective-c - 目标 C：匿名块，为什么以及何时？

> ID：12732705
> 
> 赞同：2
> 
> 时间：2012-10-04T17:39:12.810
> 
> 标签：objective-c, c, xcode, block

最近，我试图调试一些代码，我对自己做错了什么感到困惑。我的问题的简化版本如下：

```
for(int x = 0; x < [myArray count]; x++);
{
    //perform some action
} 
```

问题是我想要执行的操作只会发生一次。当然，我最终注意到问题是我不小心在 for 循环的末尾包含了一个额外的分号。

```
for(int x = 0; x < [myArray count]; x++);<---- Oops!
{
    //perform some action
} 
```

但后来我想知道......为什么该代码甚至可以工作？事实证明，我的 for 循环正在执行，然后下面的代码作为“匿名块”运行。

1.  Objective C 中匿名块的意义何在？它们何时/何地有用？

2.  为什么我的代码不会在 Xcode 中生成某种警告？我想您可以将任何旧代码部分放在一对额外的大括号中，然后突然将其作为匿名块执行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T17:54:08.157

它们可用于确定变量的范围。虽然它更像是一个排版的东西，但当您需要自定义一系列相同类型的对象时，它可以很方便，允许您重复使用相同的变量。例如说你正在设置一些`NSURLRequests`：

```
NSMutableArray *requests = [NSMutableArray array];
{
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    request.URL = [NSURL URLWithString:@"http://A"];
    request.HTTPMethod = @"GET";
    [requests addObject:request];
}
// ... etc
{
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    request.URL = [NSURL URLWithString:@"http://Z"];
    request.HTTPMethod = @"POST";
    [requests addObject:request];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-27T13:17:36.240

Turn on CLANG_WARN_EMPTY_BODY and you'll get a warning for this. You should really go through all the warnings that can be enabled in Xcode and turn on everything that is useful (everything that doesn't give lots of warnings for code that is perfectly fine).

The feature itself was present in the very first C versions in the late 1970's.

And never heard this being called an "anonymous block". It's a compound statement. Sometimes it is called a block, but I've never heard the term "anonymous block".

# android - 是否可以在不创建任何表的情况下创建 Sqlite 数据库？

> ID：12732710
> 
> 赞同：0
> 
> 时间：2012-10-04T17:39:29.920
> 
> 标签：android, sqlite

我只想创建一个可用于保存不同表的数据库。但起初，我只想创建一个没有任何表的数据库，然后检查数据库文件是否存在，然后发出 create table 命令。因此，表创建可以在以后完成，但数据库创建最初可以在 android 应用程序启动时完成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:11:41.817

SQLite 在您对其进行一些更改之前不会创建数据库。

不涉及表的无害更改是执行[此](http://www.sqlite.org/pragma.html)操作：

```
PRAGMA user_version = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:44:10.413

是的，我很确定你可以做到这一点。如果您使用的是 SQLiteDatabaseHelper，您只需不在 onCreate 中创建表，然后编写一个 creatTable() 函数稍后为您处理。如果您使用 Context.openOrCreateDatabase()，它会创建一个空数据库。但是，我不确定如何检查数据库是否已经存在。

要记住的一件事是，如果您没有表，则实际上可能不会创建数据库。在创建第一个表之前创建数据库不会有任何伤害。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T17:53:36.613

这应该是可能的。看看[这个](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#getWritableDatabase%28%29)链接。尝试使用 getWritableDatabase()。根据文档，如果数据库存在，则应该创建数据库，或者打开现有数据库。

如果您对此有疑问，则只需使用这样的表创建数据库[，](http://www.vogella.com/articles/AndroidSQLite/article.html)然后立即删除该表。IE：

```
 public static void clearDatabase(SQLiteDatabase db) {
        db.delete(DATABASE_TABLE, null, null);
        db.delete(sqlite_sequence, "name = '"
                + DATABASE_TABLE + "'", null);
} 
```

上面的代码删除了表中的所有条目。要完全删除它，你可以试试这个

```
db.execSQL("DROP TABLE IF EXISTS '" + DATABASE_TABLE + "'"); 
```

希望这会有所帮助！干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T17:55:49.697

不完全确定您尝试实现的目标对我来说听起来像您只是使用创建/未创建的数据库状态作为标志。如果是这样，最好只处理这是一个 sharedpreference 变量并在您实际需要时创建数据库。

# outlook - 已发送任务的 Outlook 文件夹

> ID：12732712
> 
> 赞同：1
> 
> 时间：2012-10-04T17:39:43.333
> 
> 标签：outlook, vsto, ms-office, add-in, outlook-addin

有谁知道`Folder`Outlook 将其已**发送任务**存储在什么位置？我正在尝试设计一个插件，其中包括为用户发送的任务提供一个新界面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:36:56.237

**已发送任务**存储在已**发送邮件**文件夹[`OlDefaultFolders.olFolderSentMail`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.oldefaultfolders.aspx)中。

```
Outlook.Folder sentMail = this.Application.Session.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderSentMail) as Outlook.Folder; 
```

# java - Websphere 连接池问题

> ID：12732713
> 
> 赞同：0
> 
> 时间：2012-10-04T17:39:44.697
> 
> 标签：java, database-connection, connection-pooling, websphere-7

我在 websphere V7.0 中添加了一个新的数据源，它工作正常，但是在一段时间不活动之后，池将返回死连接，并且 java 将进入等待，直到连接超时过期。如果我转到数据源管理页面和“测试连接”，连接池将再次工作。

我注意到我们的 oracle 数据库会不时关闭它的连接。

你知道如何从java中重新建立连接吗？是否有另一种方法可以对抗 Websphere 池中的死连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T17:31:45.057

问题出在网络连接上。我要求 DBA 在 Oracle DB 中将 SQLNET.EXPIRE_TIME 更改为 1 分钟，这有助于解决问题。

带有连接池的应用服务器和数据库之间有防火墙。看起来防火墙会在服务器上的连接过期之前使链接过期。

我注意到 Oracle 和 iSeries 的类似行为。在某些情况下，更改连接池设置并定期验证池中的连接会有所帮助。当 Dynamo ATG 连接池尝试连接到 iSeries 时，我对它进行了这种类型的更改。

# sql - 单击作业中步骤的“编辑”时出错

> ID：12732714
> 
> 赞同：0
> 
> 时间：2012-10-04T17:39:57.357
> 
> 标签：sql, sql-server, tsql

每隔一段时间，在我单击“编辑”以执行多个 SQL 代理作业的步骤后，我会收到以下错误消息。

![在此处输入图像描述](../Images/7b190029af9d6591f70c2f4c2fe5e081.png)

当我退出并重新打开 SSMS 时，错误停止出现。有谁知道这是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:25:31.470

这在 2008 SP3 和 2008 R2 SP1 中已修复

连接链接是[http://connect.microsoft.com/SQLServer/feedback/details/557402/ssms-can-no-longer-create-or-edit-job-steps](http://connect.microsoft.com/SQLServer/feedback/details/557402/ssms-can-no-longer-create-or-edit-job-steps)

# c# - 在没有更新面板的情况下从 Master 刷新内容页面

> ID：12732718
> 
> 赞同：0
> 
> 时间：2012-10-04T17:40:01.833
> 
> 标签：c#, asp.net

是否有一种简单的方法可以在不使用更新面板的情况下手动强制内容页面回发或从母版页刷新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:41:47.117

如果您使用 jQuery 或打开它，您可以使用 JavaScript 计时器来触发刷新，并使用 jQuery 的 Ajax 支持来执行实际的刷新。

[带计时器的 Jquery/Ajax 调用](https://stackoverflow.com/questions/4542863/jquery-ajax-call-with-timer)

**更新**

解决您关于使用代码隐藏进行刷新的评论。

服务器端代码运行后，会将 HTML 返回给浏览器。然后浏览器呈现该 HTML。在代码交付给浏览器之后，服务器*绝对无法*自行更改 HTML 代码。只有浏览器才能做到这一点，方法是访问服务器（或可能是不同的服务器）并请求新数据并更改 HTML 本身以响应该请求。最常见的方法是使用 Ajax 调用，尽管还有其他技术（如 Web Sockets）可以完成类似的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:57:43.137

如果没有先从浏览器获得请求，就不可能从服务器与浏览器进行通信。至少您将需要一个连接到服务器的浏览器端计时器。

考虑到您对 Eric J. 的回答的评论，您可以使用 Ajax 请求来查看是否需要刷新，然后处理响应并采取相应措施。如果你愿意使用 jQuery，那么他的回答是正确的。

如果这不能回答您的问题，那么请向我们提供您要解决的问题的背景。为什么服务器需要告诉浏览器刷新？为什么浏览器不能每 30 秒检查一次是否需要刷新？

# java - PrintWriter 刷新不起作用？

> ID：12732720
> 
> 赞同：2
> 
> 时间：2012-10-04T17:40:03.370
> 
> 标签：java

我正在尝试使以下代码正常工作，以便我可以在其他地方使用它。

实际上，它（应该）启动另一个进程，在其中运行 python，并为 python 提供一些命令。但是，在实践中，除非我关闭该进程的流，否则永远不会发送 python 命令。我认为 flush() 应该强制这种情况发生，但它似乎没有工作。谁能提供任何关于为什么 flush() 可能不起作用以及我可以做些什么来避免这种情况的见解？谢谢。

请注意，如果我调用 close()，则会发送命令。但是，我希望能够在这个命令之后发送更多命令，所以在这里使用 close() 似乎是不可接受的。（我最终会关闭（）一切）

```
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.util.Scanner;

public class Foo {
 public static void main(String[] args) throws IOException {
  Process cmd = Runtime.getRuntime().exec("python");

  InputStream inStream = cmd.getInputStream();
  Thread stdout = new Thread(new stdOutReader(inStream));
  stdout.start();

  InputStream errStream = cmd.getErrorStream();
  Thread stderr = new Thread(new stdOutReader(errStream));
  stderr.start();

  OutputStream outStream = cmd.getOutputStream();
  OutputStreamWriter os = new OutputStreamWriter(outStream);
  PrintWriter pWriter = new PrintWriter(outStream, true);
  pWriter.println("print \"Testing..\"");

  pWriter.flush();
  int x = 0;
  while (x < 100){
      //Do stuff here (will not be an infinite loop in actual code)
  }

  pWriter.close();

}
private static class stdOutReader implements Runnable{
   InputStream inStream;

   public stdOutReader(InputStream inStream){
       this.inStream = inStream;
   }

   public void run() {
       InputStreamReader reader = new InputStreamReader(this.inStream);
       Scanner scan = new Scanner(reader);
       while (scan.hasNext()) {
          System.out.println(scan.next());
          System.out.flush();
       }
   }
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:47:44.750

考虑使用[Apache Commons Executor](http://commons.apache.org/exec/index.html)而不是直接使用`Runtime.exec()`API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T19:07:38.617

我看不出你的程序 Foo 有什么问题。我用一个将输入回显到输出（而不是 python）的程序对其进行了测试，它运行良好。

# eclipse - Eclipse + Git - 如何仅显示修改后的文件与选项相比？

> ID：12732722
> 
> 赞同：3
> 
> 时间：2012-10-04T17:40:04.057
> 
> 标签：eclipse, git, compare

我正在尝试将我的项目与之前在 git 上的提交进行比较。Eclipse 在 Git Tree Compare 窗口中显示项目的每个文件，有没有办法只显示修改后的文件？

我正在使用 Eclipse Juno + EGit 2.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:41:45.043

如果您在历史视图中选择两个提交并使用上下文菜单“相互比较”，那么您将获得仅包含修改文件的差异。对于您的用例，两个提交之一必须是最上面的。

但是，这包括工作区中的所有项目，因此如果您在其他项目中的 2 次提交之间进行了更改，而不是要调查的项目，它可能会给您带来一些噪音。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T20:25:35.687

尝试（右键单击）团队-> 同步工作区。您需要为此菜单项选择一个项目才能显示。这应该会打开同步透视图。您可以选择一些“模式”，例如仅显示传入或传出等...

我发现这个观点比“比较”好一点。不知道为什么 EGit 两者都有。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-12T21:55:29.723

这是一个旧线程，但没有任何改变。egit 不能完成多项目开发的工作，在文件层次结构、分支、提交、更改集之间呈现一个集中的增量，你有什么。我使用低成本但不是免费的超越比较软件来获得所需的视图（在工作现场提供）。如果有人知道可以很好地处理此任务的 o/s 工具或 eclipse 插件，请加入。

# php - MySQL ORDER BY 另一个表中的最高行数

> ID：12732723
> 
> 赞同：-1
> 
> 时间：2012-10-04T17:40:07.687
> 
> 标签：php, mysql, sql

> **可能重复：**
> [MySQL ORDER BY 另一个表中用户的总行数](https://stackoverflow.com/questions/12730493/mysql-order-by-total-rows-of-user-in-another-table)

我有 5 个用户（在桌子上`users`）：

```
User ID (uid) | User Name (uname)
-----------------------------------
1               Fallon
2               Jeremy
3               Matt
4               Peter
5               John 
```

*   到目前为止，Fallon (uid 1) 已登录 35 次。
*   Jeremy 登录 32 次。
*   马特登录了 57 次。
*   彼得登录了 43 次。
*   约翰登录了 23 次。

日志详细信息存储在另一个表 ( `logs`) 中：

```
Log ID (logid) - User ID (uid) 
```

现在我想按最多登录时间的顺序表示一个用户列表。登录次数最多的用户将位于顶部，登录次数第二多的用户将排在第二位。喜欢：

1.  马特登录了 57 次。
2.  彼得登录了 43 次。
3.  法伦登录了 35 次。
4.  Jeremy 登录 32 次。
5.  约翰登录了 23 次。

因为日志存储在一个表中，而用户详细信息存储在另一个表中。我怎样才能，我应该使用什么查询来制作像上面这样的列表。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T17:42:05.433

这只是一个涉及 a 的简单查询`JOIN`：

```
SELECT users.uid, users.uname, COUNT(logs.logid) AS logins 
  FROM users 
  LEFT JOIN logs ON logs.uid=users.uid 
  GROUP BY users.uid
  ORDER BY logins DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T17:43:21.560

未经测试，但我相信这应该有效：

```
SELECT u.`uid`, u.`uname`, COUNT( l.`logid` ) AS count 
FROM `users` AS u, `logs` AS l 
WHERE u.`uid` = l.`uid` 
GROUP BY l.`uid` 
ORDER BY count DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T17:43:16.763

```
 SELECT users.uid, users.uname, COUNT(logs.logid) as logins 
  FROM users, logs 
  where  logs.uid=users.uid 
  GROUP BY logs.uid
  ORDER BY logins DESC 
```

# qt - 记事本应用程序中的分段错误

> ID：12732724
> 
> 赞同：0
> 
> 时间：2012-10-04T17:40:10.933
> 
> 标签：qt, qt4, qt-creator

好的。我知道我发布了太多代码，但错误是程序员的噩梦。（分段错误）这是我的第一个应用程序，并得到了 Qt 创建者教程的帮助。请帮忙。

notepad.h 文件：

```
#ifndef NOTEPAD_H
#define NOTEPAD_H

#include <QMainWindow>
#include <QPlainTextEdit>

class Notepad : public QMainWindow
{
    Q_OBJECT

public:
    Notepad();

protected:
    void closeEvent(QCloseEvent *closeEvent);

private slots:
    void open();
    bool save();
    bool saveAs();
    void newFile();
    void documentWasModified();

private:
    QPlainTextEdit *textField;
    QString curFile;

    QMenu *fileMenu;
    QMenu *editMenu;
    QMenu *helpMenu;

    QToolBar *fileToolBar;
    QToolBar *editToolBar;

    QAction *newAct;
    QAction *loadAct;
    QAction *saveAct;
    QAction *saveAsAct;
    QAction *copyAct;
    QAction *pasteAct;
    QAction *cutAct;
    QAction *exitAct;

    void createMenu();
    void showStatusBar();
    bool maybeSave();
    bool saveFile(const QString &fileName);
    void loadFile(const QString &fileName);
    void setCurrentFile(const QString &fileName);
    void createActions();
    void createToolBars();
    QString strippedName(const QString &fullFileName);

};

#endif 
```

notepad.cpp 文件：

```
#include <QtGui>
#include <QMainWindow>
#include "notepad.h"

Notepad::Notepad()
{
    textField = new QPlainTextEdit;
    setCentralWidget(textField);
    setWindowTitle(tr("The building of a notepad...."));
    createActions();
    createMenu();
    createToolBars();
    showStatusBar();

    connect(textField->document(),SIGNAL(contentsChanged()),this,SLOT(documentWasModified()));
    setCurrentFile("");
    setUnifiedTitleAndToolBarOnMac(true);
}

void Notepad::createActions()
{
    newAct = new QAction(QIcon(":/images/new_File.png"),tr("&New"),this);
    newAct->setShortcuts(QKeySequence::New);
    newAct->setStatusTip("Create A new File!");
    connect(newAct,SIGNAL(triggered()),this,SLOT(newFile()));

    loadAct = new QAction(QIcon(":/images/open_File.gif"),tr("&Load"),this);
    loadAct->setShortcuts(QKeySequence::Open);
    loadAct->setStatusTip("Open an existing file!");
    connect(loadAct,SIGNAL(triggered()),this,SLOT(open()));

    saveAct = new QAction(QIcon(":/images/save_File.png"),tr("&Save"),this);
    saveAct->setShortcuts(QKeySequence::Save);
    saveAct->setStatusTip("Save the file!");
    connect(saveAct,SIGNAL(triggered()),this,SLOT(save()));

    copyAct = new QAction(QIcon(":/images/copy.png"),tr("&Copy"),this);
    saveAsAct->setShortcuts(QKeySequence::Copy);
    saveAsAct->setStatusTip("Copy!");
    connect(saveAsAct,SIGNAL(triggered()),this,SLOT(copy()));

    saveAsAct = new QAction(QIcon(":/images/save_As.png"),tr("&Save As"),this);
    saveAsAct->setShortcuts(QKeySequence::SaveAs);
    saveAsAct->setStatusTip("Save As!");
    connect(saveAsAct,SIGNAL(triggered()),this,SLOT(saveAs())); 

    exitAct = new QAction(QIcon(":/images/exit.png"),tr("&Exit"),this);
    exitAct->setShortcuts(QKeySequence::Close);
    exitAct->setStatusTip("Exit!");
    connect(exitAct,SIGNAL(triggered()),this,SLOT(close()));

    pasteAct = new QAction(QIcon(":/images/paste.gif"),tr("&Paste"),this);
    pasteAct->setShortcuts(QKeySequence::Paste);
    pasteAct->setStatusTip("Paste Text!");
    connect(pasteAct,SIGNAL(triggered()),textField,SLOT(paste()));  

    cutAct = new QAction(QIcon(":/images/cut.png"),tr("&Cut"),this);
    cutAct->setShortcuts(QKeySequence::Cut);
    cutAct->setStatusTip("Cut Text!");
    connect(cutAct,SIGNAL(triggered()),textField,SLOT(cut()));

    copyAct = new QAction(QIcon(":/images/copy.copy"),tr("&Copy"),this);
    copyAct->setShortcuts(QKeySequence::Copy);
    copyAct->setStatusTip("copy Text!");
    connect(copyAct,SIGNAL(triggered()),textField,SLOT(copy()));    

    copyAct->setEnabled(false);
    cutAct->setEnabled(false);
    connect(textField,SIGNAL(copyAvailable(bool)),copyAct,SLOT(setEnabled(bool)));
    connect(textField,SIGNAL(copyAvailable(bool)),cutAct,SLOT(setEnabled(bool)));

}

void Notepad::createMenu()
{
    fileMenu = menuBar()->addMenu(tr("&File"));
    fileMenu->addAction(newAct);
    fileMenu->addAction(loadAct);
    fileMenu->addAction(saveAct);
    fileMenu->addAction(saveAsAct);
    fileMenu->addAction(exitAct);

    editMenu = menuBar()->addMenu(tr("&Edit"));
    editMenu->addAction(cutAct);
    editMenu->addAction(copyAct);
    editMenu->addAction(pasteAct);

    menuBar()->addSeparator();
    helpMenu = menuBar()->addMenu(tr("&Help"));
}

void Notepad::createToolBars()
{
    fileToolBar = addToolBar(tr("File"));
    fileToolBar->addAction(newAct);
    fileToolBar->addAction(loadAct);
    fileToolBar->addAction(saveAct);
    fileToolBar->addAction(saveAsAct);

    editToolBar = addToolBar(tr("Edit"));
    editToolBar->addAction(cutAct);
    editToolBar->addAction(copyAct);
    editToolBar->addAction(pasteAct);

}

void Notepad::showStatusBar()
{
    statusBar()->showMessage(tr("Ready!"));
}

void Notepad::closeEvent(QCloseEvent *event)
{
    if(maybeSave())
        event->accept();
    else
        event->ignore();
}

void Notepad::documentWasModified()
{
    setWindowModified(textField->document()->isModified());
}

bool Notepad::saveAs()
{
    QString fileName = QFileDialog::getSaveFileName(this);
    if(fileName.isEmpty())
        return false;
    return saveFile(fileName);
}

bool Notepad::save()
{
    if(curFile.isEmpty())
        return saveAs();
    else
        return saveFile(curFile);
}

void Notepad::open()
{
    if(maybeSave())
    {
        QString fileName = QFileDialog::getOpenFileName(this);
        if(!fileName.isEmpty())
            loadFile(fileName);
    }

}

void Notepad::newFile()
{
    if(maybeSave())
        {
            textField->clear();
            setCurrentFile("");
        }

}

bool Notepad::maybeSave()
{
    if(textField->document()->isModified())
        {
            QMessageBox::StandardButton ret;
            ret = QMessageBox::warning(this,
                                       tr("Warning!"),
                                       tr("Do you want to save the changes?"),
                                       QMessageBox::Save | QMessageBox::Discard | QMessageBox::Cancel
                                       );
            if(ret==QMessageBox::Cancel)
                return false;
            if(ret==QMessageBox::Save)
                return save();
        }
    return true;
}

bool Notepad::saveFile(const QString &fileName)
{
    QFile file(fileName);
    if(!file.open(QFile::WriteOnly | QFile::Text))
        {
            QMessageBox::warning(this,
                                 tr("Error!"),
                                 tr("%1 file cannot be saved.\nError:").arg(fileName).arg(file.errorString())
                                 );
            return false;
        }
    QTextStream out(&file);
    #ifndef QT_NO_CURSOR
    QApplication::setOverrideCursor(Qt::WaitCursor);
    #endif

    out << textField->toPlainText(); 

    #ifndef QT_NO_CURSOR
    QApplication::restoreOverrideCursor();
    #endif

    setCurrentFile(fileName);
    statusBar()->showMessage(tr("File Saved.:)"),3000);
    return true;
}

void Notepad::loadFile(const QString &fileName)
{
    QFile file(fileName);
    if(!file.open(QFile::ReadOnly | QFile::Text))
        {
            QMessageBox::warning(this,
                                 tr("error"),
                                 tr("error loading %1 file.\nError:%2").arg(fileName).arg(file.errorString())
                                 );
            return;
        }
    QTextStream in(&file);

    #ifndef QT_NO_CURSOR
    QApplication::setOverrideCursor(Qt::WaitCursor);
    #endif

    textField->setPlainText(in.readAll());

    #ifndef QT_NO_CURSOR
    QApplication::restoreOverrideCursor();
    #endif

    setCurrentFile(fileName);
    statusBar()->showMessage(tr("File Loaded!"),3000);
}

void Notepad::setCurrentFile(const QString &fileName)
{
    QString curFile = fileName;
    textField->document()->setModified(false);
    setWindowModified(false);

    QString shownName = curFile;
    if(curFile.isEmpty())
        shownName = "untitled.txt";

    setWindowFilePath(shownName);
}

QString Notepad::strippedName(const QString &fullFilename)
{
    return QFileInfo(fullFilename).fileName();
} 
```

主.cpp：

```
#include <QApplication>
#include <QtGui>
#include "notepad.h"

    int main(int argc, char **argv)
    {
        //Q_INIT_RESOURCE(application);

        QApplication app(argc, argv);
        //app.setStyle("motif");                          //possible styles: windows,plastique,cde,motif etc.
        app.setOrganizationName("Trolltech");
        app.setApplicationName("Application Example");
        Notepad mainWin;
    #if defined(Q_OS_SYMBIAN)
        mainWin.showMaximized();
    #else
        mainWin.show();
    #endif

        return app.exec();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:16:41.130

调试器是你的朋友。学会使用它。

出现复制粘贴错误：

```
copyAct = new QAction(QIcon(":/images/copy.png"),tr("&Copy"),this);
saveAsAct->setShortcuts(QKeySequence::Copy);
saveAsAct->setStatusTip("Copy!");
connect(saveAsAct,SIGNAL(triggered()),this,SLOT(copy())); 
```

这应该是：

```
copyAct = new QAction(QIcon(":/images/copy.png"),tr("&Copy"),this);
copyAct->setShortcuts(QKeySequence::Copy);
copyAct->setStatusTip("Copy!");
connect(copyAct,SIGNAL(triggered()),this,SLOT(copy())); 
```

您正在使用未定义的指针。这不是调试器无法处理的噩梦。

# java - 正则表达式匹配多行或其他解决方案？

> ID：12732729
> 
> 赞同：3
> 
> 时间：2012-10-04T17:40:31.277
> 
> 标签：java, regex, logging

我需要查看 log4j 日志并提取所有错误，包括它们可能在当天生成的多行。

```
2012-10-04 # 11:09:00 #  ERROR # org.apache.struts2.components.ActionComponent  # Could not execute action: //application
java.lang.IndexOutOfBoundsException: Index: 9, Size: 9
    at java.util.ArrayList.RangeCheck(ArrayList.java:547)
    at java.util.ArrayList.get(ArrayList.java:322)
    at com.cisco.smo.actions.SmoTMSLicensesAction.populateTMSConfigAndPeakData(SmoTMSLicensesAction.java:153)
    at com.cisco.smo.actions.SmoTMSLicensesAction.populateTmsData(SmoTMSLicensesAction.java:55)
    at com.cisco.smo.actions.SmoTMSLicensesAction.execute(SmoTMSLicensesAction.java:41)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:453)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:292)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:255)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    at org.apache.struts2.components.ActionComponent.executeAction(ActionComponent.java:293)
    at org.apache.struts2.components.ActionComponent.end(ActionComponent.java:175)
    at org.apache.struts2.views.jsp.ComponentTagSupport.doEndTag(ComponentTagSupport.java:42)
    at org.apache.jsp.WEB_002dINF.jsp.welcome_jsp._jspx_meth_s_005faction_005f0(welcome_jsp.java:619)
    at org.apache.jsp.WEB_002dINF.jsp.welcome_jsp._jspService(welcome_jsp.java:160)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:690)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:599)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:536)
    at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:954)
    at org.apache.jasper.runtime.PageContextImpl.doInclude(PageContextImpl.java:684)
    at org.apache.jasper.runtime.PageContextImpl.include(PageContextImpl.java:678)
    at org.apache.tiles.jsp.context.JspTilesRequestContext.include(JspTilesRequestContext.java:80)
    at org.apache.tiles.jsp.context.JspTilesRequestContext.dispatch(JspTilesRequestContext.java:73)
    at org.apache.tiles.context.TilesRequestContextWrapper.dispatch(TilesRequestContextWrapper.java:72)
    at org.apache.struts2.tiles.StrutsTilesRequestContext.dispatch(StrutsTilesRequestContext.java:88)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:283)
    at org.apache.tiles.jsp.taglib.InsertAttributeTag.render(InsertAttributeTag.java:140)
    at org.apache.tiles.jsp.taglib.InsertAttributeTag.render(InsertAttributeTag.java:117)
    at org.apache.tiles.jsp.taglib.RenderTagSupport.execute(RenderTagSupport.java:154)
    at org.apache.tiles.jsp.taglib.RoleSecurityTagSupport.doEndTag(RoleSecurityTagSupport.java:75)
    at org.apache.tiles.jsp.taglib.ContainerTagSupport.doEndTag(ContainerTagSupport.java:80)
    at org.apache.jsp.WEB_002dINF.jsp.common.baseLayout_jsp._jspx_meth_tiles_005finsertAttribute_005f2(baseLayout_jsp.java:221)
    at org.apache.jsp.WEB_002dINF.jsp.common.baseLayout_jsp._jspService(baseLayout_jsp.java:131)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:690)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:477)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at org.apache.tiles.servlet.context.ServletTilesRequestContext.forward(ServletTilesRequestContext.java:198)
    at org.apache.tiles.servlet.context.ServletTilesRequestContext.dispatch(ServletTilesRequestContext.java:179)
    at org.apache.tiles.context.TilesRequestContextWrapper.dispatch(TilesRequestContextWrapper.java:72)
    at org.apache.struts2.tiles.StrutsTilesRequestContext.dispatch(StrutsTilesRequestContext.java:88)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:606)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:246)
    at org.apache.struts2.views.tiles.TilesResult.doExecute(TilesResult.java:105)
    at org.apache.struts2.dispatcher.StrutsResultSupport.execute(StrutsResultSupport.java:186)
    at com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:374)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:278)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:510)
    at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:434)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
 2012-10-04 # 11:09:00 #  INFO  # default.hello  # Started Application 
```

我不想在结果字符串中包含最后一行，但我已将其包含在上面以指示正则表达式应停止匹配的位置。

我开始写一个正则表达式，但我真的不知道为什么它是错误的......

```
(2012-10-04)\s#\s[.+]\s#\s\sERROR\s#\s[.+]\s\s#\s[.+](19|20)\d\d[- /.](0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01]) 
```

我也不确定 Regex 是不是最有效的方法。我正在用Java写这个，如果有人有任何其他想法......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T18:01:38.530

这将使您足够接近：

`\d{4}-\d{2}-\d{2}\s+?#\s+?\d{2}:\d{2}:\d{2}\s+?#\s+?ERROR.+?(\d{4}-\d{2}-\d{2}|$)`

[用正则表达式](http://www.regexpal.com)测试

在 JAVA LAND 中是

`String regex = "(\\d{4}-\\d{2}-\\d{2}\\s+?#\\s+?\\d{2}:\\d{2}:\\d{2}\\s+?#\\s+?ERROR)(.+?)(\\d{4}-\\d{2}-\\d{2}|$)";`

并且有 Pattern.DOTALL

这是我的测试仪：

```
 public static void main(String[] args) throws Exception {

        BufferedReader in = new BufferedReader(new FileReader(new File("src/error.log")));
        String temp;
        String result = "";
        while((temp = in.readLine()) !=null) {
            result += temp;
            result += "\n";
        }
        in.close();

        String regex = "(\\d{4}-\\d{2}-\\d{2}\\s+?#\\s+?\\d{2}:\\d{2}:\\d{2}\\s+?#\\s+?ERROR)(.+?)(\\d{4}-\\d{2}-\\d{2}|$)";
        Pattern p = Pattern.compile(regex, Pattern.DOTALL);
        Matcher m = p.matcher(result);

        while(m.find()) {
            System.out.println("***************** MATCHED****************");
            System.out.println(m.group(1) + m.group(2));
            System.out.println("****************************************");
        }

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T18:05:46.180

```
.*ERROR.*(\n.*(\n\s*at.*)+)? 
```

一个解释：

```
.*ERROR.* 
```

捕获其中包含 ERROR 的任何行。

```
(\n.* ...)? 
```

可以选择捕获另一行，然后...

```
(\n\s*at.*)+ 
```

至少捕获一行以 at 开头的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T18:04:20.127

我认为您必须编写一个 java 程序来解析日志文件并获取错误。确保您使用的是标志 DOTALL 和 MULTILINE。我还认为您的常规表达式将提取示例输入中的最后一行。

这将是我的（未经测试的）解决方案：

`Pattern.compile("^.*?(?=ERROR).+$(?=.+?INFO)", Pattern.MULTILINE | Pattern.DOT_ALL)`

**编辑** `$(?=.+?INFO)`而不是`$.*?(?=INFO)`真正排除最后一行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T18:04:32.797

我将假设当您读入此内容以与您的正则表达式进行比较时，它正在被某个可以一次读取整个文档的缓冲区读取。如果是这种情况，正则表达式非常简单

```
regex = "^[\\d]{4}-[\\d]{2}-[\\d]{2}.*?[\\d]{4}-[\\d]{2}-[\\d]{2}" 
```

^ - 行首 [\d]{4}-[\d]{2}-[\d]{2} - 匹配格式为 YYYY-MM-DD 或 YYYY-DD-MM 的日期
。*？- 在匹配模式的下一部分之前不情愿的量词获取所有内容
[\d]{4}-[\d]{2}-[\d]{2} - 匹配格式为 YYYY-MM-DD 或的日期YYYY-DD-MM

通过使用不情愿的量词，您可以确保您在匹配中只得到一个完整的错误。这将获取下一个错误的日期部分。您可以将其删除，因为您确切知道匹配部分的长度（10 个字符）。

# scala - 如何避免大小写

> ID：12732737
> 
> 赞同：1
> 
> 时间：2012-10-04T17:41:10.580
> 
> 标签：scala

**注意：这是关于类型转换的问题，而不是类型转换。请停止更改标题。**

我想编写一个通用函数，它根据运行时指定的`retrieve[F]`返回一个：`List[F]``F`

```
trait Foo
trait Bar extends Foo
trait Baz extends Foo

def retrieve[F <: Foo](implicit m: Manifest[F]): List[F] = m.erasure match {
  case x if x.isAssignableFrom(classOf[Bar]) => List[Bar]().asInstanceOf[List[F]]
  case x if x.isAssignableFrom(classOf[Baz]) => Nil
  case _ => Nil
} 
```

是否有更类型安全的方法来执行此操作（即不诉诸清单，`isAssignableFrom`并将每个返回值转换为`List[F]`）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:58:22.700

消除强制转换的一种方法是使用存在类型：

```
trait Foo
trait Bar extends Foo
trait Baz extends Foo                                       

case object Bar1 extends Bar                                
case object Baz1 extends Baz                                

def retrieve[F <: Foo](implicit m: Manifest[F]): List[_ <: Foo] = m.erasure match {
  case x if x.isAssignableFrom(classOf[Bar]) => List[Bar]()  
  case x if x.isAssignableFrom(classOf[Baz]) => Nil  
  case _ => Nil
} 
```

不幸的是，似乎仍然丢失了一些类型信息，因为在编译时不知道`Foo`将返回哪个实现：

```
val foos: List[Foo] = retrieve[Bar]                         
// val bars: List[Bar] = retrieve[Bar] // does not compile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T22:37:36.770

我最终使用类型类来实现它。不会丢失类型信息，也不需要类型套管（或类型转换）。

我能看到的唯一奇怪的一点是选择直接`retrieve`对`Bar`and`Baz`类进行拉皮条，但这似乎可以解决问题。

```
trait Foo
case class Bar(x: String) extends Foo
case class Baz(x: String) extends Foo

trait Retrievable[A] {
  def retrieve: List[A]
}

val _bars: List[Bar] = List(Bar("bar a"),Bar("bar b"))
val _bazs: List[Baz] = List(Baz("baz 1"),Baz("baz 2"))

implicit def barsRetrievable(x: Class[Bar]): Retrievable[Bar] =
  new Retrievable[Bar] {
    override def retrieve: List[Bar] = _bars
  }

implicit def foosRetrievable(x: Class[Baz]): Retrievable[Baz] =
  new Retrievable[Baz] {
    override def retrieve: List[Baz] = _bazs
  }

val bars: List[Bar] = classOf[Bar].retrieve
// bars: List(Bar(bar a), Bar(bar b))

val bazs: List[Baz] = classOf[Baz].retrieve
// bazs: List(Baz(baz 1), Baz(baz 2)) 
```

# c++ - 被引用对象的动态类型何时可以改变？

> ID：12732739
> 
> 赞同：2
> 
> 时间：2012-10-04T17:41:14.953
> 
> 标签：c++, standards, virtual

让我们从一个例子开始：

```
#include <cstdio>

struct Base { virtual ~Base() {} virtual void foo() = 0; };
struct P: Base { virtual void foo() override { std::printf("Hello, World!"); } };
struct N: Base { virtual void foo() override {} };

void magic(Base& b);
// Example implementation that changes the dynamic type
// {
//     void* s = dynamic_cast<void*>(&b);
//     b.~B();
//     new (s) N();
// }

int main() {
    std::aligned_storage<sizeof(P), alignof(P)> storage;
    void* s = static_cast<void*>(storage);

    new (s) P();

    Base& b = *static_cast<Base*>(s);

    magic(b);

    b.foo();
 } 
```

根据标准，应该`b.foo()`打印什么？

*个人观点：它是未定义的，因为`b`在我们销毁`magic`. 在这种情况下，将替换`b.foo()`为`static_cast<B*>(s)->foo()`使其合法吗？*

* * *

因此，现在我们有了一个可能（或不）合法的示例，对于我们所有的标准主义者来说，手头的更普遍的问题是是否允许更改对象的动态类型。我们已经知道 C++ 编译器可能会重用存储（幸运的是），所以这有点棘手。

这个问题似乎是理论上的，但它对编译器有直接的应用：编译器可以`b.foo()`在`b.P::foo()`上面的程序中去虚拟化吗？

因此，我正在寻找：

*   关于我自己的小程序的明确答案（我想不出一个）。
*   更改对象动态类型的合法方式的可能示例（单个就足够了）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T17:56:00.350

根据标准的§8.5.3.2，一个引用不能在初始化后绑定到另一个对象。由于放置`new`创建了一个新对象，因此您违反了该规则，并获得了未定义的行为。

对象的动态类型不能改变。即使在您的示例中，您也不会更改对象的类型，而是在与旧对象相同的位置创建一个新的不同对象。如果您考虑一下，更改对象的动态类型将意味着*就地调整对象的大小*以容纳额外的数据成员并更改 VMT（然后这会移动其他对象并搞砸指针......）在语言规则范围内进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:44:59.980

这是[未定义的行为](http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html)。您的`magic`示例违反了引用的语义。

此外，`dynamic_cast`用于*向下*转换。Cast to`void*`是一个`static_cast`.

要明确回答您的问题：

*   如果编译器可以证明运行时类型，则编译器可以“去虚拟化”它喜欢的任何函数调用。
*   如果一个引用比它引用的对象寿命长，它就是 UB。
*   您无法更改对象的动态类型，您可以做的最接近的事情是重新分配指针。

    ```
    Base * ptr;
    P p;
    N n;

    ptr = &p; ptr -> foo ();
    ptr = &n; ptr -> foo (); 
    ```

但是`p`and`n`是固定类型，直到它们超出范围（或者，如果在堆上分配，当它们是`delete`d 时）。

# python - if 语句中冒号的语法错误

> ID：12732743
> 
> 赞同：19
> 
> 时间：2012-10-04T17:41:29.390
> 
> 标签：python, python-3.x

我是 python 新手，并且正在制作一种游戏作为我的第一个项目之一，它猜测 1 到 10 之间的数字，然后用户猜测它。他们有三个猜测，程序会告诉用户他们在下一次猜测时是否需要更高或更低。有错误的代码部分并不重要，因为如果用户两次输入相同的答案，它只会让猜测不会被浪费，允许他们第一次重做猜测但不允许重新获取第二。在代码上，我已经标出了问题所在。就像我说的，我对 python 真的很陌生，这可能是一些业余新手的错误。提前致谢。

```
import time # This imports the time module.
import random # This imports the random module.

MyNumber = random.randrange(1,10) # This picks a number for the variable 'MyNumber'

firstGuess = int(input('Ok then, we shall begin! What is your first guess?'))
print()
if firstGuess == (MyNumber):
 print('Well done! You win!')
 time.sleep(3)
 exit()
if firstGuess < MyNumber:
 print('Go Higher!')
 time.sleep(1)
if firstGuess > MyNumber:
 print('Go Lower!')
 time.sleep(1)

print()
secondGuess = int(input('Better luck this time! What is your second guess?'))
print()
if secondGuess == firstGuess:
 print('You tried that one last time! Don\'t worry, I won\'t count that one!')
 bungled = (1)
 secondGuess = int(input('What is your second guess?')
 if secondGuess == firstGuess:  # This colon is causing the problem. <===========
  print('You\'ve already tried that one twice!')
  bungled = (2)
if secondGuess == MyNumber:
 print('Well done! You win!')
 time.sleep(3)
 exit()
if secondGuess < MyNumber:
 print('Go Higher!')
 time.sleep(1)
if secondGuess > MyNumber:
 print('Go Lower!')
 time.sleep(1)

print()
thirdGuess = int(input('This is your final chance! What is your third guess?'))
print()
if thirdGuess == MyNumber:
 print('Well done! You win!')
 time.sleep(3)
 exit()
if thirdGuess < MyNumber:
 MyNumber = str(MyNumber)
 print('Sorry! You lost! The number was '+MyNumber)
 time.sleep(1)
 exit()
if thirdGuess > MyNumber:
 MyNumber = str(MyNumber)
 print('Sorry! You lost! The number was '+MyNumber)
 time.sleep(1)
 exit() 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-04T17:52:01.460

它实际上不是结肠。它是上一行的未闭合括号。

当你得到一个奇怪的`SyntaxError`，检查它之前的支架平衡。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T17:51:22.297

上面的行缺少括号。改变

`secondGuess = int(input('What is your second guess?')`

至

`secondGuess = int(input('What is your second guess?'))`

# android - 对于想要使用 .NET 的移动开发人员来说，Mono 是一个不错的选择吗？

> ID：12732750
> 
> 赞同：2
> 
> 时间：2012-10-04T17:41:49.763
> 
> 标签：android, iphone, ios, mobile

它有多强大？有没有人有任何经验？请列出您有过的任何好的或坏的经历。这对我们非常有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:43:33.090

对于 iPhone/iPad 开发，无论您是否使用单声道，都需要 Mac。

我是 .Net 开发人员，我发现这是为 Cocoa 和 Android 开发的一条短曲线。

我确信单声道可以发挥作用，但我不喜欢仅仅因为我更习惯一种特定语言而在我的开发学习过程中添加一个新层的想法。

如果您习惯使用 C#，那么习惯具有 .net 背景的 Android 会非常顺利。

Eclipse IDE 使用的 java 非常接近 Visual Studio 和 .net。尝试使用真正的 Android 设备进行调试，一旦 SDK 附带的 Android 模拟器速度慢得令人难以置信，无论您使用的是基于 Windows、OSX、Linux 的操作系统

IOS 开发更痛苦主要是因为我们来自 .net，与来自 Apple 的 XCode 相比，我们被丰富的 Visual Studio 宠坏了。

Objective-c 有时对于 C#/VB.net 开发人员来说很难理解，但我相信在 Stackoverflow 的数千个已回答问题中进行搜索会帮助你，准确地说，就像它对我所做的那样。

# java - 不同安卓版本的同一个应用

> ID：12732752
> 
> 赞同：0
> 
> 时间：2012-10-04T17:41:53.833
> 
> 标签：java, android, android-version

我已经为android编写了一个应用程序，我想让它与新旧版本的android兼容。

例如，自 API 11 以来就存在 CursorLoader 类。

如果设备使用 API >=11 运行，我想要实现的是使用 CursorLoader，如果设备运行旧版本，则使用不推荐使用的 managedQuery 方法。

在这种情况下推荐的方法是什么？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T17:44:47.743

我相信游标加载器包含在支持库（[CursorLoader](http://developer.android.com/reference/android/support/v4/content/CursorLoader.html)）中。

要将支持库添加到您的项目：

*   （在 Eclipse 中，右键单击您的项目 -> Android 工具 -> 添加支持库...）。
*   确保在清单中设置了 minSDK 和 targetSDK。您应该始终以最高可用的 SDK 为目标（此时为 16）。

清单的相关部分示例：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.my.app"
    android:versionCode="1"
    android:versionName="1.0.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" /> 
```

如果您坚持不使用支持库，您可以执行以下操作

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
    /* Perform ICS method */
} 
else {
    /* Perform backwards-compatible method */
} 
```

在你的代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T17:44:57.090

您可以使用[android 支持库](http://developer.android.com/tools/extras/support-library.html)来使用 API 4+ 中的 CursorLoader

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T17:59:53.767

如果您在 google play 上发布，您可以为不同的 API 级别上传不同的 apk，但正如其他人所说，去支持库，不要为不同的 API 级别使用不同的实现。到目前为止，对我来说，支持库运行良好，您不必处理过去的事情是如何完成的；-)（很快就会完全没用的知识......）

# javascript - 使用 jQuery.extend() 进行覆盖时如何包含对原始函数的引用

> ID：12732753
> 
> 赞同：0
> 
> 时间：2012-10-04T17:41:53.627
> 
> 标签：javascript, debugging, syntax, scope, extend

所以，我试图覆盖一个函数，但在该方法中包含它的原始方法[`jQuery.extend()`](http://api.jquery.com/jQuery.extend/)。

```
 var origFunction = $.fn.pluginFunction;
    $.fn.extend({
        pluginFunction: function() {
               // `origFunction` is available via Closure, 
               // now how can I declare the $.extended function here
               // to preserve the original methods and then override
               // only the following object?

                   myObject = {
                        'key1' : 'val1',
                        'key2' : 'val2',
                   }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:44:54.537

使用[apply()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)调用原始文件。

```
origFunction.apply(this,arguments); 
```

但如果`myObject`是 内部的局部变量`origFunction`，则不会有什么不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T17:45:16.207

修改后的代码：调用`origFunction`使用 `apply`. 只有当它不是方法的私有变量时才更改 myObject（它应该可以从覆盖方法全局访问）。

```
var origFunction = $.fn.pluginFunction;
    $.fn.extend({
        pluginFunction: function() {
               origFunction.apply(this, arguments); // 
               // `origFunction` is available via Closure, 
               // now how can I declare the $.extended function here
               // to preserve the original methods and then override
               // only the following object?

                   myObject = {
                        'key1' : 'val1',
                        'key2' : 'val2',
                   }
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T17:59:47.647

用户申请（）

apply 调用带有一组参数的函数。它不是 jQuery 的一部分，而是核心 Javascript 的一部分。但是，在 jQuery 文档中提到了它：

[http://docs.jquery.com/Types#Context.2C_Call_and_Apply](http://docs.jquery.com/Types#Context.2C_Call_and_Apply)

句法：

```
somefunction.apply(thisobj, argsarray) 
```

上面调用了函数 somefunction，在函数范围内将 this 设置为 thisobj，并将 argsarray 中的参数作为参数传递给函数。

# scala - IntelliJ IDEA 中的每次更改都会重新编译完整的代码库

> ID：12732758
> 
> 赞同：0
> 
> 时间：2012-10-04T17:42:08.037
> 
> 标签：scala, intellij-idea

我在 IntelliJ 想法中使用 Scala 的标准插件。

我的工作流程如下：

1.  写一些简单的程序（10行代码）
2.  编译它（等待一段时间），然后再次进行一些更改并在编译所有内容时等待相同的时间。

它似乎不仅编译了我更改的部分，而且编译了所有代码。

与 Eclipse 的 Scala IDE 相比，IntelliJ IDEA 的编译速度要慢 20 倍。

所以为什么？也许有一些特殊的方式来配置 Scala 插件（我使用默认设置 - 只需将 JAVA_HOME 和 Scala 位置放在那里）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:04:07.367

打开 fsc 可能会有所帮助（它将 Scala 编译器设置为守护程序/服务，而不是每次都从头开始）。在项目的 Scala 方面：

![在此处输入图像描述](../Images/2441af2de9f33283a7fa3dc62fbb3e1d.png)

单击“使用项目 FSC”，然后单击“设置”并为 fsc 选择一个编译器库。

如果您正在做一个更大的项目，您可能希望使用 sbt 来管理您的构建，因为它执行增量编译。IDEA 有一个不错的 sbt 插件，你可以试试。

# internet-explorer - LESS mixin 中参数的单引号

> ID：12732760
> 
> 赞同：0
> 
> 时间：2012-10-04T17:42:18.760
> 
> 标签：internet-explorer, css, less, gradient

我正在尝试在 LESS 中执行此操作（使用 JS 版本）：-

```
.gradient-horizontal (@from, @to, @fallback)
{    
    background: -webkit-gradient(linear, left top, right top, from(@from), to(@to)); /* for webkit browsers */
    background: -moz-linear-gradient(left,  @from,  @to); /* for firefox 3.6+ */

    filter:      progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='@from', endColorstr='@to'); /* IE6 & IE7 */
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='@from', endColorstr='@to')"; /* IE8 */
} 
```

它似乎适用于 Firefox 和 Chrome，如果我将 IE 行中的 @from 和 @to 替换为文字颜色，它可以工作，但正如您在上面看到的那样，@from 和 @to 似乎未经修改地通过当被单引号包围时。但是，没有它们，IE 代码将无法工作。

有没有解决的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T17:57:42.330

这似乎有效： -

```
.gradient-horizontal (@from, @to, @fallback)
{   

    background: @fallback; /* for non-css3 browsers */
    background: -webkit-gradient(linear, left top, right top, from(@from), to(@to)); /* for webkit browsers */
    background: -moz-linear-gradient(left,  @from,  @to); /* for firefox 3.6+ */

    filter:  ~"progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr='@{from}', endColorstr='@{to}')"; /* IE6 & IE7 */
    -ms-filter: ~"progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='@{from}', endColorstr='@{to}')"; /* IE8 */
} 
```

# iso8583 - ISO 8583 数据字段长度

> ID：12732761
> 
> 赞同：1
> 
> 时间：2012-10-04T17:42:32.163
> 
> 标签：iso8583

在[Wikipedia](http://en.wikipedia.org/wiki/ISO_8583)中，它解释了数据字段的数据类型，如下所示：

![在此处输入图像描述](../Images/d895266e7f0b7340a685017eee382780.png)

*此外，每个字段可以是固定长度或可变长度。如果可变，则字段的长度将前面有一个长度指示符。*

那么根据该表，以下类型是什么意思？我无法完全理解它。

**1.** `n ..19`

**2.** `n 10`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:04:10.970

1.  表示该字段是可变的，并且可以包含*最多*19 个字符的值。
2.  我没有看到这个定义（带空格）所以我猜该表在维基百科上的格式有误，但 n10 表示它是一个包含 10 个字符的固定长度字段，而 n.10 表示它是一个 LVAR（L=一位数字, LL=2 位等）字段，最多包含 10 个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T07:10:28.040

n ..19 表示最大长度为 19，数据元素的数值

n 10 表示用数值固定长度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-14T23:30:04.603

就像 K3N 和 Tush 说的一样，但几乎没有添加 .. 表示可变长度，如果长度只有 5，则填充零，表示长度指示符为 05，而没有 .. 的，它具有固定长度，流上显示的数据只有5位数据不带长度指示

# objective-c - 您可以为 plist 文件定义自定义枚举类型吗？

> ID：12732765
> 
> 赞同：2
> 
> 时间：2012-10-04T17:43:04.550
> 
> 标签：objective-c, ios, xcode, cocoa-touch, plist

我有一个我定义的用于设置配置信息的枚举。让我们调用枚举 objectTypes

它定义了多种不同的类型，并且枚举为这些类型定义了人类可读的名称。

我的伙伴编写了循环遍历对象数组并设置这些类型值的设置代码。他使用整数值。

以下是他所做工作的粗略概述：

```
for (int index = 0; index < [configArray count]; index++)
{
  ConfigObject aConfigObject = [configArray objectAtIndex: index];
  if (index ==0;
    aConfigObject.type = 7;
  else if (index == 1)
    aConfigObject.type = 5;
  else if (index == 2)
    aConfigObject.type = 3;
} 
```

（这是用于说明我在说什么的伪代码。）

我不喜欢那样有几个原因。首先，很难阅读。7型是什么鬼？其次，如果我稍后添加新的枚举类型，或者更改枚举的顺序，它就会中断。（用户可见的类型列表按数字顺序显示。）

我将代码更改为：

```
 aConfigObject.type = blueType; 
```

更好，但仍然是严格的代码。

我想将此配置信息移动到 plist 文件中并在启动时读取它。然而，这让我回到了最初的问题。如果我将这些值放入 plist，我不知道使用自定义枚举类型的方法。我被迫将数值放入我的 plist 中，这使得代码 plist 可以读取和维护。

Apple 在其 plist 中到处使用自定义枚举类型。

是否可以定义新的自定义枚举类型并在最新版本的 Xcode（当前使用 Xcode 4.5）中教授内置 plist 编辑器来理解这些枚举？那将是一个巨大的进步。我已经进行了大量搜索，但到目前为止还没有找到任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:05:44.507

您可以将配置添加到结构如下的 pList 文件中：

![在此处输入图像描述](../Images/088aebfb51d8003fc1710a9c3a0ef5e6.png)

在启动时阅读该字典，内容如下：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"myPlistFileName" ofType:@"plist"];
NSDictionary *myPlist = [NSDictionary dictionaryWithContentsOfFile:path];
NSDictionary *configs = [myPlist objectForKey:@"types"]; 
```

现在`configs`会有你的配置。您现在可以像这样设置您的类型：

```
aConfigObject.type = [config objectForKey:kBlueType]; // Assuming you have set up your constants for it. 
```

现在关于这个问题：

> 其次，如果我稍后添加新的枚举类型，或者更改枚举的顺序，它就会中断。

在我看来，您正在使用数组中对象的位置来确定其类型。所以为了让你的循环不那么僵硬，你可以这样做：

```
for (NSUInteger index = 0; index < [config count]; index++) {
    ConfigObject *aConfigObject = [configArray objectAtIndex: index];
    aConfigObject.type = [config objectForKey:[NSString stringWithFormat:@"%d", index]];
} 
```

# c++ - MPI isend，交货确认

> ID：12732766
> 
> 赞同：0
> 
> 时间：2012-10-04T17:43:10.180
> 
> 标签：c++, mpi

我在两个进程之间编写了一个简单的发送/接收。我使用`isend`and`irecv`来传递消息。

在发送方，我捕获`mpi::request`返回的对象`isend`并使用它来验证消息是否已送达。但是，似乎确认（即）在接收器上实际执行之前很久就`request.test()`返回了一个有效`status`对象（带有）（我在 由此我是否得出结论，状态是传递（到队列）的指示，而不是消息已被读取的指示？`status->error == 0``irecv``irecv`

或许值得一提的是，我在 Ubuntu 上使用 boost::mpi、C++。

# c# - XmlTextReader 在读取 iPCU 3.6 生成的文件中的 doctype 元素时挂起

> ID：12732769
> 
> 赞同：0
> 
> 时间：2012-10-04T17:43:18.007
> 
> 标签：c#, xml, xmltextreader

嗨，我使用 XmlTextReader 读取 iPhone 配置实用程序 3.6 生成的策略文件，当阅读器到达 doctype 元素时，它将挂起大约 15-20 秒。这对我来说是一个大问题，因为我需要一次读取 60 个文件，并且每个文件读取 3 次。这是我拥有的一些代码和一个示例文件，您可以使用它来重复该问题。

```
private int findStart(String d)
    {
        Boolean StartLooking = false;
        using (XmlTextReader xr = new XmlTextReader(d))
        {
            while (xr.Read())
            {
                if (xr.NodeType.Equals(XmlNodeType.Element) && xr.Name.Equals("dict") && !StartLooking)
                    StartLooking = true;
                else if (xr.NodeType.Equals(XmlNodeType.Element) && xr.Name.Equals("dict") && StartLooking)
                    return xr.LineNumber;
            }
            xr.Close();
        }
        return -1;
    } 
```

XML 文件： [AdvancedPayload.mobileconfig (Dropboxlink)](http://dl.dropbox.com/u/52751615/AdvancedPayload.mobileconfig)

如果您知道为什么会发生此挂断，请回复。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:23:32.820

DOCTYPE 是什么样的？在我看来，文档类型引用了外部 DTD，而您的应用实际上是从 Web 下载外部 DTD。可以吗？Xml（或您）是否需要 DTD？AFAIR 如果不需要，您可以关闭 DTD 处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-05T06:38:38.527

利用`XmlTextReader.DtdProcessing=DtdProcessing.Ignore;`

# android - 删除当前首选项屏幕并返回主首选项屏幕

> ID：12732770
> 
> 赞同：11
> 
> 时间：2012-10-04T17:43:20.757
> 
> 标签：android, android-preferences

我启动了一个 PreferenceActivity，我在其中以编程方式添加了一些首选项屏幕。所以我有一个带有我的偏好屏幕的列表。

例子：

*   托托
*   蒂蒂
*   塔塔

所以我迭代并调用一个函数（`Board`是一个自定义对象）：

```
private PreferenceScreen CreatePreferenceScreen(Board b) {
    PreferenceScreen p = getPreferenceManager().createPreferenceScreen(this);
    p.setPersistent(true);
    p.setKey("preferenceScreen_" + b.getId());

    PreferenceCategory general = new PreferenceCategory(this);
    general.setTitle("General");
    p.addPreference(general);

    Preference delete = new Preference(this);
    delete.setTitle("delete");
    final PreferenceScreen pFinal = p;
    delete.setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {
        @Override
        public boolean onPreferenceClick(Preference arg0) {
            String delId = board.getId();
            PreferenceCategory themes = (PreferenceCategory) findPreference("themes");
            PreferenceScreen screen =(PreferenceScreen)findPreference("preferenceScreen_" + delId); 
            themes.removePreference(screen);
            /*GO BACK TO PREFERENCEACTIVITY HERE OR KILL THIS SCREEN*/
            return true;
        }
    });
    general.addPreference(delete);
    return p;
} 
```

如果我点击 toto，它会打开 toto 的首选项屏幕，在这个屏幕上我有一个选项“删除”。如果我单击删除，它将从 PreferenceActivity（上一个屏幕）中删除此首选项屏幕，但我仍然在首选项屏幕上。

当我使用“删除”时，我想返回上一个屏幕。

我无法`finish()`在我的偏好屏幕上使用 toto，因为它退出了应用程序。如果我点击后退按钮，我会返回 PreferenceActivity（上一个屏幕），我的 toto 首选项屏幕已被删除（yata，该功能有效！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-02T13:35:04.513

由于[PreferenceScreen 开发人员文档](http://developer.android.com/reference/android/preference/PreferenceScreen.html)，用户找到了解决方案。

> 当它出现在另一个首选项层次结构中时，它会显示并用作另一个首选项屏幕的网关（通过将另一个首选项屏幕显示为对话框或通过 getIntent() 中的 startActivity(android.content.Intent)）。此 PreferenceScreen 的子项不会显示在显示此 PreferenceScreen 的屏幕中。相反，单击此首选项时将显示一个单独的屏幕。

所以替换这个：

```
/*GO BACK TO PREFERENCEACTIVITY HERE OR KILL THIS SCREEN*/ 
```

有了这个：

```
pFinal.getDialog().dismiss(); 
```

它完成了预期的工作：关闭当前的`preferenceScreen`.

# python - 使用变量名称键将项目添加到字典 python

> ID：12732775
> 
> 赞同：0
> 
> 时间：2012-10-04T17:43:29.690
> 
> 标签：python, list, dictionary

我从项目列表中列出了 n 长度的可能组合列表，现在我想创建一个字典，其中每个键都是可能组合列表中的项目之一，所以我可以开始计算多少次每个组合都出现在一组观察中（编程关联规则引擎的早期阶段）。这是我所拥有的：

```
import itertools
stuff=(1,2,3,4)
n=1
combs=list()
while n<=len(stuff):
    combs.append(list(itertools.combinations(stuff,n)))
    n = n+1
print combs
viewers={'Jim':(1,3,4), 'Bob':(1,2,4), 'Jerry':(1,4), 'Ben':(2), 'Sal':(1,4)}  
showcount={}
for list in combs:
    for item in list:
        showcount["%s",%(item)]=0
print viewers
print showcount 
```

如何让该项目显示为字典中的键？例如，我希望组合 '(1,2,4):0' 成为键值对，这样我以后可以计算 '(1,2,4)' 出现的次数。我对 Python 很陌生，但我确实四处寻找答案，但找不到。抱歉，如果这已得到回答，我只是找不到它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T17:47:24.133

您可以使用元组作为键：

```
mydict = { (1, 2, 4): 0 } 
```

如果你想对事物进行计数，请看[`collections.Counter`](http://docs.python.org/library/collections.html#counter-objects)，它使计数变得微不足道，无需将键初始化为 0：

```
counts = collections.Counter()
counts[(1, 2, 4)] += 1 
```

# asp.net - 在 ASP.NET MVC 4 实体框架中创建仅使用 getter 的模型属性

> ID：12732776
> 
> 赞同：1
> 
> 时间：2012-10-04T17:43:32.077
> 
> 标签：asp.net, entity-framework, razor

我正在使用 asp.net mvc 4 和实体框架代码优先方法。我有以下实体模型

```
public class User
{
    public virtual int Id { get; set; }
    public virtual String FirstName { get; set; }
    public virtual String MiddleName { get; set; }
    public virtual String LastName { get; set; }
} 
```

对于我需要显示全名的用户列表视图页面，我正在尝试在用户模型中创建一个仅获取属性，例如

```
public virtual String FullName{
    get{
        return FirstName + " " + MiddleName + " " + LastName;
    }
} 
```

但我不确定它是否会起作用，此外我也不希望实体框架将其映射到数据库列。

我可以使用从其他属性生成的类似仅获取属性仅用于查看吗？任何人都可以给我任何建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T17:53:25.003

根据您通过 DataAnnotations 或 EntityConfigurationType 类配置域实体的方式，您可以使用 [NotMapped] DataAnnotation

```
public class User
{
    public virtual int Id { get; set; }
    public virtual String FirstName { get; set; }
    public virtual String MiddleName { get; set; }
    public virtual String LastName { get; set; }
    [NotMapped]
    public virtual String FullName 
    {
        get{
             return FirstName + " " + MiddleName + " " + LastName;
        }
    }
} 
```

或者在实现 EntityTypeConfiguration 的特定类中，您可以像这样将属性设置为被 EntityFramework 忽略，然后在 OnModelCreating 事件中将其添加到您的上下文配置集合中：

```
public class UserConfiguration : EntityTypeConfiguration<User>
{
    public UserConfiguration()
    {
        Ignore(u=>u.FullName);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:49:30.170

如果您因为需要在视图中显示而将这个属性放入模型中，那么您首先就错过了 MVC 的要点。该模型应该以正确描述要使用的数据的方式构建。这可能是也可能不是反映您的数据库结构的实体模型。它也可能正是视图正在寻找的，也可能不是。

在这种情况下，您必须问自己为什么要将它添加到模型中，以及它是否只是代码膨胀。您已经拥有模型中创建此特定字符串所需的信息。如果视图需要以特定格式显示此信息，则它属于视图。但是，如果您知道您每次都需要在其他几个地方以完全相同的格式使用这种精确的逻辑，那么可以认为该属性属于视图，因为它是数据的更具全局性的描述性实现有问题。

鉴于您的具体示例，我认为这个只读属性只是代码膨胀。这种性质的东西属于使用这些数据的视图。

# php - PHP preg_replace，不替换正确的值

> ID：12732778
> 
> 赞同：2
> 
> 时间：2012-10-04T17:43:34.287
> 
> 标签：php, regex, preg-replace

我用作主题的字符串是：

> '在 4 天/3 夜假期节省 68%。只需 249 美元！

我`'.\*(\b((enjoy|save)( up to| an extra)?|starting at|as low as|just|only)\b ([0-9]{1,3} ?\%|\$[0-9]+(\.[0-9]{2})?)).\*/i'`用来尝试匹配上述字符串的一部分并将其提取出来。

我正在`'$1'`用作替代品，所以我的完整`preg_match`看起来像

```
preg_match('.*(\b((enjoy|save)( up to| an extra)?|starting at|as low as|just|only)\b ([0-9]{1,3} ?\%|\$[0-9]+(\.[0-9]{2})?)).*/i', '$1', 'Save 68% on a 4 Day/3 Night vacation at. Only $249!') 
```

它应该首先匹配`'Save 68%'`，但它会不断返回`'Only $249'`。

我发现如果我在第一个通配符之后添加一个问号，`'.\*?(\b((enjoy|save)( up to| an extra)?|starting at|as low as|just|only)\b ([0-9]{1,3} ?\%|\$[0-9]+(\.[0-9]{2})?)).\*/i'`它会返回`'save 68%'`。有没有其他方法解决这个问题。这似乎与我的分组有关。正如我发现的那样

```
preg_match('/.*\b(enjoy|save)( up to| an extra)?|starting at|as low as|just|only\b.*/i', '$1', 'Save 68% on a 4 Day/3 Night vacation at. Only $249!') 
```

像它应该的那样返回`'save'`，但我无法在完整的声明中得到同样的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:49:34.320

在第一个通配符之后添加问号起作用的原因`.*`是*贪婪*，而问号（`.*?`）使它变得*懒惰*。贪婪的运算符将*尽可能*匹配，在您的情况下是整行（`.*`表示“尽可能多地匹配任何内容”）。让它变得懒惰会导致它*尽可能少*地匹配。在 PCRE 手册页的[重复部分](http://www.php.net/manual/en/regexp.reference.repetition.php)中阅读更多相关信息。

对于您的特定问题，使用惰性运算符有什么问题？如果结果是你想要的，我说随它去吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:59:10.823

删除正则表达式开头和结尾的 \b 和 .*。即使有完整的文本，您也不需要这些。看：

[http://rubular.com/r/jYjS5WASTw](http://rubular.com/r/jYjS5WASTw)

# css - IE7-8渐变和更少的css

> ID：12732779
> 
> 赞同：0
> 
> 时间：2012-10-04T17:43:36.303
> 
> 标签：css, internet-explorer-8, internet-explorer-7, less, gradient

我正在尝试在按钮上添加渐变效果。我正在使用 Less 语法。

我目前将此应用于我的元素：

过滤器：~"progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffeaa5', endColorstr='#f8b000',GradientType=0)";

但是我的按钮上没有显示渐变。任何想法？

谢谢你。

编辑：它适用于这个 jsfiddle： http: [//jsfiddle.net/FBfSZ/](http://jsfiddle.net/FBfSZ/) 但不在此页面上：[http](http://canapin.com/web/) ://canapin.com/web/ （查看源代码）

我不明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:48:42.180

试试这个我在 IE 8 上测试它

```
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffeaa5', endColorstr='#f8b000',GradientType=0 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T20:53:08.267

Maybe it's because your page is not a valid HTML page, so the IE switches to the quirks mode. You can easily see it yourself, when you press `F12`, to get the developer mode.

Create a valid HTML page, with doctype, header element and all the like, i think it should work then.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T17:46:39.940

这适用于 IE8，它来自 twitter bootstrap

```
filter: e(%("progid:DXImageTransform.Microsoft.gradient(startColorstr='%d',
 endColorstr='%d', GradientType=0)",#ffeaa5,#f8b000)); // IE9 and down 
```

# ruby-on-rails - 如何使用一键提交 2 个表单 rails 3

> ID：12732781
> 
> 赞同：1
> 
> 时间：2012-10-04T17:43:40.723
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我想用一个按钮提交两个表单。

下面如果我的代码： -

**率.rb**

```
belongs_to :target, :polymorphic => true
belongs_to :location 
```

**位置.rb**

```
has_many :rates 
```

**事件.rb**

```
has_many :rates, :as => :target 
```

**form.html.haml**

```
= form_for [@event, @rate] do |form|
                    %ul
                        %li= form.radio_button :rate, "Excellent"
                        %li Excellent
                        %li= form.radio_button :rate, "Okay"
                        %li Okay
                        %li= form.radio_button :rate, "Poorly organized"
                        %li Poorly organized
                        %li= form.radio_button :rate, "Didn't happen"
                        %li Didn't happen

=form_for [@event.location, @rate] do |form|
                    %ul
                        %li= form.radio_button :rate, "Excellent"
                        %li Excellent
                        %li= form.radio_button :rate, "Okay"
                        %li Okay
                        %li= form.radio_button :rate, "Nothing special"
                        %li Nothing special 
```

如何才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T02:01:38.203

我今天处于同样的情况并做了：

在 form.html.haml 添加链接：（我在 ERB 中写过）

```
<%= link_to "Save", "#", :class => 'button_submit' %> 
```

假设某些咖啡文件中的表单 ID 为“form1”和“form2”：

rate.js.coffee

```
jQuery ->
  $(".button_submit").live "click", (e) ->
    e.preventDefault()
    $("#form1").trigger "submit"
    $("#form2").trigger "submit" 
```

而已！

# ruby-on-rails - 将网络爬虫移到后台：Resque 或 Sidekiq

> ID：12732782
> 
> 赞同：2
> 
> 时间：2012-10-04T17:43:41.677
> 
> 标签：ruby-on-rails, background-process, resque, sidekiq

我有一个 Rails 应用程序，它允许用户上传一个 CSV 文件，其中包含一个要抓取的 URL 列表（有时是 200k）。然后在控制器中，我将转到该文件的每一行，然后调用另一个带有 URL 和一些参数的方法，然后当 crawl 方法完成后，将一些变量保存到几个模型中。下面是我的控制器的样子：

```
def import
  if request.post? && params[:inputfile].present?
    infile = params[:inputfile].read
    CSV.parse(infile) do |row|
      @crawler = Crawler.new(row[0])
      @crawler.crawl #do the actual crawling using Mechanize Gem and set a few variable in the crawler object
      #when crawl is done save a few stuff into some models
    end
  end
end 
```

我需要将其移至后台（因此此过程不会保留我的整个 rails 应用程序），并且能够异步运行每一行的代码。我在想像把所有东西都放在一个队列中，并在每一行的队列中排队......或者类似的东西。我在想我可以为此使用 Resque 或 Sidekiq 吗？如果是这样，我应该从哪里开始？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T18:24:51.510

听起来您已经进行了足够多的挖掘，最终朝着正确的方向前进！我也将其考虑到一个单独的后台工作系统中。

Sidekiq 现在维护得更好，多线程对您的用例非常有用，所以我会选择它。[Sidekiq 主页](http://mperham.github.com/sidekiq/)和[这个 Railscast](http://railscasts.com/episodes/366-sidekiq?view=asciicast)是很好的起点，它们都可以为您提供大量信息以帮助您快速入门。

# android - Android - 更改方向时会更改几个布局

> ID：12732785
> 
> 赞同：1
> 
> 时间：2012-10-04T17:44:09.387
> 
> 标签：android, orientation

我有一个使用矩阵缩放的 ImageView。我已经设置

```
android:configChanges="orientation|screenSize|keyboardHidden" 
```

所以我将手动处理方向。我有这段代码在方向改变后计算图像视图：

```
 final ViewTreeObserver observer= mCanvasImageView.getViewTreeObserver();
       observer.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
            @Override
            public void onGlobalLayout() {

                int w = mCanvasImageView.getWidth();
                int h = mCanvasImageView.getHeight();

                System.out.println("w=" + w + ",h=" + h); 
```

出于某种原因，ImageView 不仅有两种状态（一种是纵向的，一种是横向的），还有第三对宽度和高度值。

任何人都知道为什么似乎有第三个临时计算？以及如何将其与实际值区分开来？

# ios - IOS Applicationdidenterbackground 设置根视图控制器 nil

> ID：12732788
> 
> 赞同：1
> 
> 时间：2012-10-04T17:44:19.730
> 
> 标签：ios, memory, background, appdelegate

我正在开发一个使用后台跟踪的 IOS 应用程序。为了最大限度地减少我在后台的内存占用，我想彻底摆脱我的应用程序中可以重建的所有内容（除了包含位置管理器的类之外的所有内容）。

在我的每个视图控制器中，我都实现了 dealloc 方法：

NSLog(@"销毁：%@", self);

现在，在应用程序委托方法“applicationdidenterbackground”中我设置：

[self.window setRootViewController:nil];

这应该可以正常工作，因为这是对我的视图控制器的唯一引用，但是，当我运行应用程序并按下主页按钮时，没有任何反应。直到我将应用程序带回前台，我才收到视图已被破坏的消息。我还验证了这不仅仅是日志延迟，使用仪器我可以看到内存仍然被分配，直到应用程序返回到前台。Applicationwillresignactive 也是如此。

这种行为正常吗？如果是这样，当应用程序进入后台时，销毁不需要的对象的正确方法是什么？谢谢

史蒂夫

# oracle - 遍历游标，在每次迭代期间执行 INSERTS

> ID：12732789
> 
> 赞同：0
> 
> 时间：2012-10-04T17:44:23.107
> 
> 标签：oracle, powerbuilder

我有一个`c_email`包含电子邮件地址查询的游标。我需要遍历它，每次迭代都执行插入语句。

如何在powerbuilder中循环光标，直到光标位于末尾

到目前为止，我有以下内容：

```
DECLARE c_email CURSOR FOR
 SELECT email_id
     ...

OPEN c_email;
CLOSE c_email; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:04:13.513

```
OPEN c_email;
DO WHILE TRUE
FETCH c_email INTO :bind_variable;
if sqlca.sqlcode<>0 then exit 
End If
//......insert statement..
LOOP
CLOSE c_email ; 
```

或者

Sybase 支持从一个表中选择值并插入到另一个表中。

```
INSERT INTO table1 ( <column list> )
SELECT ( <column list> ) FROM table2 ; --> this is the SELECT from the CURSOR 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T19:07:16.793

2012年还有人用CURSORS吗？1985 年的电话——他们想要他们的技术回来……

这是 POWERBUILDER。有个疯狂的东西叫做 DATAWINDOW。如果您不知道如何执行基于集合的 INSERT/SELECT（这是最好的方法），则将您的查询编码到数据窗口检索中并在 PowerScript 中循环遍历它。

```
FOR x = 1 to dw_1.rowcount()
  // ls_variable = dw_1.GetItemString( x, "colName")
  // INSERT into table (ls_variable, blah, blah);
  // Error checking
  // COMMIT or ROLLBACK
NEXT 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T17:47:36.937

客户端游标不是最好的解决方案。最好在存储过程中编写这样的代码。 [http://www.zuskin.com/pb_code.htm#Avoid_SQL](http://www.zuskin.com/pb_code.htm#Avoid_SQL)

# sql - 用于指示存在相应行的 SQL 查询

> ID：12732795
> 
> 赞同：0
> 
> 时间：2012-10-04T17:44:41.603
> 
> 标签：sql

假设表 A 和 B，我如何编写一个查询，该查询将返回 A 的所有列和一个指示 B 中存在相应子行的标志

例如：

col1_a|col2_a|...|hasrowinb

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:48:28.030

鉴于如果 b.a_id = a.id b 是子行，那么这将起作用。

将连接调整为您对孩子的定义。

```
SELECT a.*, CASE WHEN b.id IS NULL THEN 0 ELSE 1 END AS hasrowinb
FROM a
LEFT JOIN b ON a.id = b.a_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T17:54:27.747

这将确保不会为 TableB 的每个匹配记录为表 A 创建重复项。

```
SELECT a.*, b.HasRowInB
FROM TableA a 
LEFT OUTER JOIN (
    SELECT a.id, CASE COUNT(b.id) WHEN 0 THEN 0 ELSE 1 END as HasRowInB
    FROM TableA a
    LEFT JOIN TableB b on a.id = b.a_id
    GROUP BY a.id
) b on a.id = b.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T18:04:40.783

也许以下是进行查询的“最简单”的方式，同时保证没有重复：

```
select a.*,
       (case when 0 = (select count(*) from b where b.aid = a.aid)
             then 'N'
             else 'Y'
        end) as hasRowInB
from a 
```

# java - 从 Java 中提取 Lotus Notes Document 的完整 ACL

> ID：12732796
> 
> 赞同：3
> 
> 时间：2012-10-04T17:44:42.970
> 
> 标签：java, document, acl, lotus-domino, lotus

我正在尝试找到一种方法来保存特定 Lotus Notes 文档的完整用户列表访问权限。

我知道我可以从 catalog.nsf 获得数据库级别的 ACL，但不能获得文档级别的访问权限。此外，文档的作者字段 - 我相信 - 不会列出只读访问用户。

有谁知道如何获取特定文档的每个用户的完整 ACL？

任何帮助表示赞赏，谢谢！

编辑：拼写。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T18:48:52.697

西蒙是对的。这是不平凡的。尽管我会跳过他关于阅读表格的建议，但这仍然不是微不足道的。即使根据您的问题只检查一个文档，这也很重要。我知道审计人员有时确实想要这类信息，但 Domino 的安全系统在设计时并未考虑到这一点，并且没有内置 API 来获取信息。

在 Java 中，您需要使用该`Document.getItems()`方法来检索所有 Items 的向量。然后你必须查看项目。您需要检查`Item.getType()`以确定它是 a`Item.READERS`还是`Item.AUTHORS`。如果是，那么您需要`Item.getValues()`检索值的向量，并且您必须循环检查向量以查看每个值是否是一个角色。如果是角色，则必须使用`Database.getACL()`并遍历`ACLEntries`确定哪些具有角色以及它们是个人条目还是组条目。如果它们是组条目，您必须在 Domino 目录中查找组成员——这可能需要扩展嵌套组。对于 Item 中不是角色的任何值，您必须对照 Domino 目录检查该值以查看它是否是有效的 Person 或 Group —— 并再次展开该组，直到您最终到达 People。对于 Domino 目录中的查找，您必须担心可能会配置目录辅助，在这种情况下可能需要检查多个 Domino 目录数据库，但如果您可以使用 Notes/Domino 8，这会更容易一些，因为有一个`Directory`为您处理这些问题的课程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T18:09:51.953

你所要求的有点不平凡。

1.  数据库 ACL。您需要确定以下内容。

    *   ACL 列表中的名称。
    *   他们是个人、服务器还是组？
    *   如果他们是一个组，您需要阅读 Names.nsf
    *   他们有什么角色吗？
2.  接下来，您需要读取数据库中的每个文档。为此，您将需要访问权限。所以这至少是读者访问（如果在文档上设置）以及对加密字段的访问（如果设置的话）。

您可以使用**NotesNoteCollection**类来遍历设计 + 文档。

[http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_NOTESNOTECOLLECTION_CLASS.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_NOTESNOTECOLLECTION_CLASS.html)

检查设计将允许您阅读表单并查看它们是否具有 reader 字段以及设置了哪些值。之后，如果相关表单的设置不是静态的，您可以检查文档。

在一个侧面。如果您尝试针对应用程序诊断特定用户，您可以使用以下 notes.ini 设置。

```
DEBUG_THREADID=1
DEBUG_SERVERACL=2 
```

每次发出 ACL 请求时，这都会在 Domino 控制台上打印出来。它将打印谁在请求，他们请求什么级别，他们拥有什么级别以及他们被授予什么访问权限。

尽管调试非常冗长，但只能用于诊断问题并在完成后禁用。

# ruby-on-rails - 重命名模型后 Rails 无法识别键

> ID：12732803
> 
> 赞同：0
> 
> 时间：2012-10-04T17:44:57.537
> 
> 标签：ruby-on-rails, ruby, database, ruby-on-rails-3

我刚刚使用以下命令将我的表**Client**重命名为**Person ：**

```
class RenameClientsToPeople < ActiveRecord::Migration
  def change
    rename_table :clients, :people
  end
end 
```

*然后我小心地从client*到*person*以及从*clients*到*people*重命名所有实例、文件名和外键（感谢 Veraticus）。但由于某种原因，我仍然会收到这样的错误：

```
SQLite3::SQLException: no such column: people.person_id: SELECT COUNT(*) FROM "projects" INNER JOIN "people" ON "projects"."person_id" = "people"."person_id" WHERE "people"."user_id" = 1 
```

为什么 Rails 不能识别新的主键？

# java - 一步一步在HashMap中声明并放入String数组

> ID：12732806
> 
> 赞同：5
> 
> 时间：2012-10-04T17:45:05.643
> 
> 标签：java, hashmap, arrays

我正在尝试将静态数据插入到Java 中的**HashMap中，如下所示：**

```
HashMap<String,String[]> instruments = new HashMap<String, String[]>();
instruments.put("EURUSD", {"4001","EURUSD","10000","0.00001","0.1","USD"}); 
```

但是编译器不喜欢它。我发现将该数据插入 HashMap 的唯一方法是单独声明字符串数组，然后将其放入 HashMap 中，如下所示

```
String[] instruDetails = {"4001","EURUSD","10000","0.00001","0.1","USD"};
instruments.put("EURUSD", instruDetails); 
```

但它不是很有表现力，而且很难维护

所以我的问题是，有没有办法`put()`在一步/行中进行操作和字符串数组声明？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T17:46:07.987

这将做到：

```
instruments.put("EURUSD", new String[]{"4001","EURUSD","10000","0.00001","0.1","USD"}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-04T17:46:44.687

一句话概括，使用双括号初始化：-

```
 HashMap<String,String[]> instruments = new HashMap<String, String[]>() {
     {
      put("EURUSD", new String[]{"4001","EURUSD","10000","0.00001","0.1","USD"});
      put("EUR", new String[]{"4001","EURUSD","10000","0.00001","0.1","USD"});
     }
 }; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-04T18:06:24.533

我想你已经得到了有效的方法。但原因是

```
instruments.put("EURUSD", {"4001","EURUSD","10000","0.00001","0.1","USD"}); 
```

不起作用是因为`{"4001","EURUSD","10000","0.00001","0.1","USD"}`. `{}`是 Java 数组中用于初始化的语法糖或捷径。它带有一个约束，它总是必须与数组声明语句一起使用，否则它是一个语法错误。

数组声明语句如

```
String[] array = {"1", "2"}; 
```

这样，Java 就知道它需要为您创建的数组实际上是`String`元素类型。

如果你打破上面的陈述如下

```
String[] array;
array = {"1", "2"}; 
```

它不编译。

使用`new String[]{"4001","EURUSD","10000","0.00001","0.1","USD"}`，编译器知道它必须实例化一个元素类型为`String`( `new String[]`) 的新数组，并使用您提供的值 ( ) 初始化新实例化的数组`{"4001","EURUSD","10000","0.00001","0.1","USD"}`。

# iphone - 应用程序正在锁定 iOS，但没有报告内存泄漏

> ID：12732809
> 
> 赞同：0
> 
> 时间：2012-10-04T17:45:19.110
> 
> 标签：iphone, ios, ipad, crash, automatic-ref-counting

我的应用程序有一个奇怪的问题，整个 iOS 设备都被锁定，我唯一能做的就是重新启动设备。我没有看到任何异常被抛出，也没有在 Instruments 中看到任何内存泄漏。

该应用程序有一个带有主菜单的导航控制器。然后我推送一个视图控制器，该控制器正在加载一个图像网格。如果我在主菜单和网格之间来回切换，应用程序将在大约 15 次后崩溃。然而，被杀死的不仅仅是应用程序，而是整个操作系统，这是我从未见过的。

起初我以为我在泄漏内存，但 Leaks 没有显示任何内容。我正在玩分配，我看到网格视图控制器分配计数一直在增加。该应用程序正在使用 ARC，我不太喜欢它，因为它太“神奇”，但我认为它会正确清理。

我担心的一件事是 viewDidUnload 和 dealloc 在从导航控制器弹出后在我的网格视图控制器上被调用，所以我从不明确清理我的图像或终止网络连接。我认为这是问题所在，但我不知道什么时候应该杀死这些，因为通常的清理位置（即 viewDidUnload、dealloc）没有被调用。

这发生在运行 5.1 的 iPhone 和 iPad 上，我正在使用 AFNetworking UIImageView 类别来加载图像。

干杯，

# php - 在 mysql SELECT 查询中使用 php 函数？

> ID：12732810
> 
> 赞同：-1
> 
> 时间：2012-10-04T17:45:18.297
> 
> 标签：php, mysql

我们有一个包含数百万种产品和价格的数据库。我们试图在我们的 sql 语句中添加一个过滤器，以便我们可以缩小我们正在寻找的内容，然后将其显示在我们的表上。我们想要过滤的一些内容与定价有关，这给我们带来了问题。

由于我们的价格是相当动态的，我们目前使用 php 函数来实时计算我们的费用，而不是将它们存储在数据库中。我们通过函数传递当前价格，然后将其显示在表格中：

```
echo profit('99.99'); // output: 12.19 
```

这样做的问题是我们无法使用我们的函数在查询中运行这些计算来查找结果：

```
$query = "SELECT * FROM `products` WHERE ".profit(."`price` + `shipping` + `acquisition` + `fees`".)." > 10 "; 
```

有没有办法解决这个问题？我们是否需要遍历所有表值？我们试图避免这种情况，因为数据库太大了。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:52:26.267

您可以在 MySQL 中创建一个函数，并让该函数为您估算利润。

我不知道您的利润函数有多复杂，因为您没有显示代码。如果你的“利润”函数不断变化：你做错了。代码不应该一直在变化，你很可能应该改变它的设计。

无论如何，这里是如何在 MySQL [http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html中创建函数](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)

我会选择上述解决方案。您也可以继续并在指示利润的列处。每当利润可能发生变化时更新所述列。如果产品表有点大（注意：有点大是指超过 10 万行），这是非常糟糕的。您可以在批处理过程中更新它们，如果该列没有被索引，则只需几分钟，如果是，则不需要太多。如果您有超过 100,000 行产品，这意味着您的商店非常庞大，并且没有理由不使用上述解决方案来简化添加列。

最坏的情况，如果你的函数非常复杂并且你需要比 MySQL 提供的更强大的东西（这极不可能），你可以在 C 中创建一个函数并将其附加到 MySQL。这是我刚刚找到的教程。我还没有验证它，但它看起来很清晰和质量：[http ://blog.loftdigital.com/blog/how-to-write-mysql-functions-in-c](http://blog.loftdigital.com/blog/how-to-write-mysql-functions-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:12:19.770

假设您已经像这样编写了 sql：

```
$query = "SELECT * 
FROM `products` ; 
```

这会返回一个名为的二维数组`$result`，类似于：

```
array (
"0" => array (
'price'=>100,
'shipping'=>10,
'acquisition'=>10,
 'fees'=>'10'
 ),
"1" => array (
'price'=>200,
'shipping'=>20,
'acquisition'=>20,
 'fees'=>'20'
 )
) 
```

现在，由于您有一个现有的 php 函数来计算利润，您可以通过遍历数组来做到这一点：

```
$expectedResult = array();
foreach ($result as $row) {
    if (profit ($row ['price'] + $row ['shipping'] + $row ['acquisition'] +$row ['fees' ) > 10 ) 
        $expectedResult [] = $row ;
} 
```

您将在此处仅在 $expectedResult 数组中获得所需的行。

***注意***：虽然这是一个解决方案，但它是一个糟糕的解决方案。好的解决方案可以是这样的：

1.  在您的产品表中有一个利润列。
2.  您可以编写一个 mysql 函数，因为无论如何您都必须计算它，您想在哪个轮胎中执行此操作实际上取决于您的资源在哪一侧更便宜。

这将在这里做你的伎俩而不会改变太多:)快乐编码:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T17:52:24.347

您需要获取值并在应用程序中处理它们。您不能将 PHP 函数传递给 MySQL。

如果可能，请使用任何可以执行等效操作的 SQL 命令。MySQL 支持许多可能做你想做的事情的函数。

通常这意味着您需要创建一个`profit`列，填充它，索引它，然后在查询中使用它：

```
SELECT * FROM products WHERE profit > 10 
```

至于如何填充它，它可能很简单：

```
UPDATE products SET profit=(price - shipping - acquisition - fees) 
```

目前尚不清楚您为什么首先将这些数字相加。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-11T10:39:25.610

我创建了一个简单的 php 函数来使用 MySQL 查询。

任何查询都可以在 1 个简单的函数中执行。

在选择查询的情况下，**我们可以获取选定的参数，因为变量名包含选定的参数值。**

例如：

```
<?php

q("select user_name,email_id from users where user_id=48");

   echo $user_name;   echo "<br>";
   echo $email_id;
?> 
```

或者**你可以设置你自己的变量名，把“作为”**

```
<?php

q("select user_name as uname, email_id as email from users where user_id=48");

   echo $uname;    echo "<br>";
   echo $email;
?> 
```

结果输出将是：

```
 someuser
  someemail 
```

**如果选择了更多行数，则变量名称将创建** 为 ex 的数组：

```
<?php

      q("select user_name,user_id from users");

      for($n=0;$n<count($user_name);$n++)
      {

            if(count($user_name)==1)  // if single row is selected
            {

                $username_val=$user_name;
                $user_ids=$user_id;

            }else{
                $username_val=$user_name[$n]; // for multiple rows selected

               $user_ids=$user_id[$n];
            }

             echo $username;

      }

?> 
```

或者**你可以设置你自己的变量名，把“作为”**

```
<?php

      q("select user_name as un,user_id as uid from users");

      for($n=0;$n<count($user_name);$n++)
      {

            if(count($user_name)==1)  // if single row is selected
            {

                $username_val=$un;
                $user_ids=$uid;

            }else{
                $username_val=$un[$n]; // for multiple rows selected
                 $user_ids=$uid[$n];
            }

             echo $username_val; echo " "; 
             echo $user_ids; echo "<br>";

      }

?> 
```

结果输出将是：（如果用户表有三行）

```
User1 4043
User2 4048
User3 4056 
```

**创建mysql连接文件ex：mysql_connect_file.php**

```
<?php

$dbc=new mysqli('localhost', 'my_user', 'my_password', 'my_db');

?> 
```

**php函数如下**

```
<?php

   require_once './mysql_connect_file.php';
function q($q)
       {

    $main_q=$q;
    $q=  strtolower($q);
      global $dbc;

              $temp=$q;
              $temp=str_replace(" ", "", $temp);
              $temp=  strtolower($temp);
         $temp=".$temp";
              if(strpos($temp, "update")==1 || strpos($temp, "insert")==1 || strpos($temp, "delete")==1 || strpos($temp, "alter")==1 || strpos($temp, "create")==1)
              {
                  $rd2=  mysqli_query($dbc,$main_q);
                  if($rd2)
                  {
                      return TRUE;
                  }
                  else{

     $mysql_err=  mysqli_error($dbc);

            $err=  debug_backtrace();
            $err_line=$err[0]['line'];
            $err_file=$err[0]['file'];
      echo  "<font color='black'>Error at <b>$err_file on line $err_line  </b>query --></font><font color='maroon'>$main_q</font> (<font color='red'> $mysql_err </font> )";

      return FALSE;

                  }

              }elseif(strpos($temp, "select")==1){

     $qn=  str_replace("select ", "", $q);

     $qn=substr($qn,0,  strpos($qn, " from"));
     $qn="$qn,";

       $selc=  str_replace("`","", $qn);
       $qn=  str_replace("`","", $qn);
       $my_var=array();

      $my_nm=array();
       for($m=1;$m<=substr_count($selc, ',');$m++)
       {
              $my_nm[$m]=substr($qn,0,  strpos($qn, ","));

              $qn=substr($qn,strpos($qn, ",")+1, strlen($qn));
              if(strpos($my_nm[$m]," as ")>0)
              {
      $my_var[$m]=  str_replace(" as ", "~", $my_nm[$m]);
      $my_var[$m]=  str_replace(" ", "", $my_var[$m]);

      $my_var[$m]=substr($my_var[$m],strpos($my_var[$m],"~")+1,strlen($my_var[$m]));
              }else
              {
  $my_var[$m]=substr($my_nm[$m],0,  strlen($my_nm[$m]));  
  $my_var[$m]=  str_replace(" ","", $my_var[$m]);
              }

       }

       $rn=mysqli_query($dbc, $main_q);

       if($rn)
      {

              if(mysqli_num_rows($rn)>0)
              {       

               for($t=1;$t<=count($my_var);$t++)
             {

          $$my_var[$t]=array();

             }

    while($row=mysqli_fetch_array($rn,MYSQLI_ASSOC))
    {

           if(mysqli_num_rows($rn)>1)
           {

              for($t=1;$t<=count($my_var);$t++)
             {

             ${$my_var[$t]}[]=$row[$my_var[$t]];
    }

     }else{

             for($t=1;$t<=count($my_var);$t++)
             {
    $$my_var[$t]=$row[$my_var[$t]];

             }

           }
    }

  if(mysqli_num_rows($rn)>1)
  {
     for($t=1;$t<=count($my_var);$t++)
             {
     $GLOBALS[$my_var[$t]]= sel_mr($my_var,$$my_var[$t]);

             }   

             for($t=1;$t<=count($my_var);$t++)
             {
     return $$my_var[$t];

             }
  }
  if(mysqli_num_rows($rn)==1)
  {

              for($t=1;$t<=count($my_var);$t++)
             {
     $GLOBALS[$my_var[$t]]=$$my_var[$t];

             }
             for($t=1;$t<=count($my_var);$t++)
             {
     return $$my_var[$t];

             }

  }

              }else
              {

       for($t=1;$t<=count($my_var);$t++)
             {
     $GLOBALS[$my_var[$t]]=NULL;

             }

             for($t=1;$t<=count($my_var);$t++)
             {
     return $my_var[$t];

             }

              }

      }else
      {

             for($t=1;$t<=count($my_var);$t++)
             {
     $my=  mysqli_error($dbc);
     if($t==1)
     {
            $err=  debug_backtrace();
            $err_line=$err[0]['line'];
            $err_file=$err[0]['file'];
      echo  "<font color='#ef0000'>Error at <b>$err_file on line $err_line  </b>query --></font><font color='maroon'>$q</font> (<font color='red'> $my </font> )";

     }

             }

             for($t=1;$t<=count($my_var);$t++)
             {
     for($p=0;$p<count($$my_var[$t]);$p++)
     {
            $a=$$my_var[$t];
            return $a;    
     }

             }

      }
              }

       }
     function sel_mr($a,$ab)
     {
            for($t=1;$t<=count($a);$t++)
            {
    foreach ($ab as $my)
    {

           ${$a[$t]}[]=$my;

    }
            }

            for($t=1;$t<=count($a);$t++)
            { 
    return $$a[$t];
            }

     } 

?> 
```

备注：

您可以将此代码保存到文件中，然后您可以通过包含该文件名来调用此函数

例如：如果您的文件名是 q.php（--> 包含 q 函数），那么您可以通过包含将代码用于其他文件

```
<?php

include 'q.php';

  q("select user_name from users where user_id=4048");
   echo $user_name 
?> 
```

# asp-classic - 如何阻止 ASP 自动更改日期类型？

> ID：12732814
> 
> 赞同：2
> 
> 时间：2012-10-04T17:45:37.147
> 
> 标签：asp-classic

一个 ASP 专家的快速问题！我正在使用 ASP 读取 SQL 数据库。SQL 中的字段类型是“日期时间”，即。2012-08-15 08:08:20.140

但是，当我通过 Classic ASP ADODB RecordSet 阅读此内容时，我得到“15/08/2012”。这有点无用，因为我希望它以与 SQL Server 上显示的完全相同的格式读取。

有什么方法可以阻止 ASP 更改日期，并在 SQL Server 中以 YYYY-MM-DD 格式读取它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:20:17.607

您可以结合使用 SetLocale 和 FormatDateTime。

关于 SetLocale： [http ://www.w3schools.com/vbscript/func_setlocale.asp](http://www.w3schools.com/vbscript/func_setlocale.asp)

关于 FormatDateTime： [http ://www.w3schools.com/vbscript/func_formatdatetime.asp](http://www.w3schools.com/vbscript/func_formatdatetime.asp)

这是一个例子：

```
SetLocale 4105 ' 4105 => Canada, which is ISO-8601 (YYYY-MM-DD)

SQL = "select user_date from user"
Set conn = Server.CreateObject("ADODB.Connection")
conn.Open Application("ConnectionString")
Set cmd = Server.CreateObject("ADODB.Command")
cmd.ActiveConnection = conn
cmd.CommandType = 1
cmd.CommandText = SQL
Set rst = Server.CreateObject("ADODB.Recordset")
rst.CursorLocation = 3
Set rst = cmd.Execute

echo FormatDateTime(rst('user_date').Value,vbShortDate); 
```

# mysql - 查找表数据的重复：优化方式？

> ID：12732816
> 
> 赞同：0
> 
> 时间：2012-10-04T17:45:44.280
> 
> 标签：mysql, database, mysql5

我有一个包含 80lacs 记录的主表（比如 TABLE：MAIN_TABLE）我想触发许多查询，在这些查询中我需要找到与 6 个月内注册的大约 10 个条件匹配的所有记录（11 lacs）

我在 2 列 (col1, col2) 上创建了一个复合索引，但是查询仍然在执行大约 30-50 秒时的通话时间。

这张表上有大约 12 个索引和大约 60 列。当我使用解释时，它显示将检查 5102 行及其使用索引。

我使用的解决方案：我决定创建一个触发器，当我对此表进行查询时，该触发器将插入一个新表（MAIN_TABLE_ACTIVE），其中只有一个索引和最近 6 个月的记录和有限的列（12），结果按 2 顺序排列-6 秒。

问题：当我使用 11lacs 表而不是 80lacs 表时，这是最好的方法吗？

缺点：触发器的开销:-(

建议任何新方法或请评论我解决此问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:54:06.863

如果您不需要实时显示数据，您可以使用另一个包含所需数据的表（类似于您使用触发器创建的表）。您可以通过一些日常 cron 填充此迷你表。

如果您需要实时显示数据，那么您可能必须重新查看您的架构，因为在此表上进行实时计算不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:37:44.137

我使用了同一张表，确保我按索引顺序获取记录

# ruby-on-rails - 尝试配置 Rails Ruby 或 jRuby 应用程序时，密钥在 YAML 文件中可见。是否有可以在运行时提供此功能的 gem？

> ID：12732818
> 
> 赞同：2
> 
> 时间：2012-10-04T17:45:48.797
> 
> 标签：ruby-on-rails, security, heroku, jruby, cloudbees

在公共云和 PaaS 环境中运行时，应用程序需要在生产中保护许多秘密。常见的是 mysql 用户和密码的 database.yml 条目，但也可以有其他条目。您的 Google 应用程序秘密、Facebook 应用程序秘密……不胜枚举。没有明确的方法来保护这些本质上的配置参数。您不想将这些放在文件中，因为*无法*保证谁可以访问它。

在 Heroku 中，您可以通过环境变量指定事物。在 Cloudbees（一种 Java PaaS）中，您可以将这些指定为 Java 系统属性。Heroku 和 Cloudbees 都具有用于上传此配置参数的命令行实用程序，但不支持在开发和生产中轻松完成这项工作。

问题是你如何配置你的参数，以便你可以在开发中轻松开发，但在开发中没有生产秘密可用

理想情况下，将有一个可以在 ruby​​ 和 jruby 环境和 PaaS 中工作的 gem，它允许我在 YML 文件中指定我的秘密，该文件具有开发中的开发设置，但实际的生产秘密从`ENV`或`java.lang.System.getProperty`.

```
##
# file: config/secure_config.yml
development:
  db:
    user_id: 'dev_mysql_user'
    password: 'my_dev_pwd'
  google:
    app_id: 'xxxxx' # this is the secret for the dev app so it can be visible
    app_secret: 'xxxxx'
# ...
production:
  db:
    user_id: <%= get_secure_config %>
    password: <%= get_secure_config %>
  google:
    app_id: <%= get_secure_config %>
    app_secret: <%= get_secure_config %> 
```

get_secure_config 帮助程序从 Ruby 或 jRuby 获取值的`ENV`位置`java.lang.System.getProperty`。最后，您可以根据需要在您的应用程序中使用它们。例如在 database.yml 或设计代码中使用 google 进行身份验证。

```
# config/database.yml
# ...
production:
  adapter: mysql2
  username: <%= SecureConfig.db.user_id %>
  password: <%= SecureConfig.db.password %> 
```

然后为了更酷，gem 还应该给我一个可执行文件，允许我将配置推送到我的 PaaS

```
~/work/myproject> bundle exec secure_config -push_to_heroku 
```

或者

```
~/work/myproject> bundle exec secure_config -push_to_cloudbees 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T17:52:31.873

看看[费加罗](https://github.com/laserlemon/figaro)。这几乎正​​是你所追求的。

您将敏感数据放在一个 git 忽略的 YAML 文件中，然后在`ENV`. 它还提供了一个 rake 任务，用于使用变量配置 Heroku 实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T13:09:28.793

正如丹尼尔赖特在上面建议的那样，费加罗很棒！它可以完成我在 Rails 上运行 ruby​​ 所需的一切。我还需要通过 Cloudbees PaaS 服务的 JVM 系统属性对 JRuby on rails 和属性提供相同的支持。我已经[分叉了 Figaro](https://github.com/RedMicaInc/figaro)并进行了这些扩展，并向laserlemon/Figaro 发送了一个拉取请求。同时，您可以在 gem 文件中使用 git 指令来拉取它。

```
gem 'figaro', '0.4.2', :git => "git://github.com/RedMicaInc/figaro.git" 
```

主要差异记录如下

## 它是如何工作的？

它真的很好用。

有一些类似的解决方案，并且有很多本土尝试。大多数命名空间你的配置在一个`Config`（或类似的）命名空间下。没关系，但是已经有描述应用环境的地方了…… `ENV`！

`ENV`是一个简单的字符串键/值对的集合，它非常适合应用程序配置。

然后这些配置参数也可用作`FigaroSettings`对象的属性。因此，如果您有一个名为的属性，`MY_PROP`您可以在您的代码或配置文件中使用它，使用`FigaroSettings.my_prop`或`FigaroSettings.MY_PROP`

对于`JRUBY`存储在 JVM 系统属性中的基于应用程序的属性，也可以以类似的方式使用。例如，如果你有一个名为`MY_JAVA_PROP`它的属性，它可以作为`FigaroSettings.MY_JAVA_PROP`. Java 属性区分大小写。

作为额外的奖励，这正是[Heroku](http://www.heroku.com/)或[Cloudbees](http://www.cloudbees.com/)上的应用程序的配置方式。因此，如果您使用 配置您的 Rails 应用程序`ENV`，您已经准备好部署到 Heroku。对于 Cloudbees，您可以使用`ENV`类似的 JVM 属性`FigaroSettings.<property>`

## 它如何与 Cloudbees 配合使用？

Cloudbees以类似的方式提供应用程序[配置。](http://wiki.cloudbees.com/bin/view/RUN/Configuration+Parameters)

`cloudbees`通常，要配置可通过 JVM 系统属性访问的应用程序参数，您可以使用sdk从命令行执行以下操作：

```
cloudbees config:set -a <my_app> PUSHER_APP_ID=8926
cloudbees config:set -a <my_app> PUSHER_KEY=0463644d89a340ff1132
cloudbees config:set -a <my_app> PUSHER_SECRET=0eadfd9847769f94367b 
```

但是 Figaro 提供了一个 rake 任务来做到这一点！赶紧跑：

`rake figaro:cloudbees`

或者，您可以传入 Cloudbees 应用程序的名称：

`rake figaro:cloudbees[my-awesome-app]`

如果您只想查看使用的命令，您可以运行`rake figaro:heroku_test`

# c++ - 基于 libpcap 的应用程序是否会影响网络速度/性能？

> ID：12732819
> 
> 赞同：2
> 
> 时间：2012-10-04T17:46:00.543
> 
> 标签：c++, c, linux, network-programming, libpcap

我正在使用 libpcap 库来监控 HTTP 请求和响应。我还根据字符串搜索和一些响应将 10 个最近的 GET 请求存储在内存中。假设监视器打开并且我正在下载文件，它会影响我的下载速度，还是将数据包的副本传递给 libpcap 而不会影响流量？

以前，我使用 iptables + libnetfilter_queue 做同样的事情。我的基于 libnetfilter_queue 的模块在分析数据包时有点慢，因为对每个传出数据包都进行了许多字符串搜索和相关操作，而传入数据包很少。它受下载速度的影响，假设使用下载加速器下载文件。当模块运行时，与未运行时相比，我的下载速度较低。可能是因为所有数据包都传递给了我的 netfilter_queue 模块，然后传递给了其他用户应用程序。我会面临与 libpcap 相同的问题吗？我听说它使用了一些零拷贝机制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:11:01.340

数据包的副本被传递到 PF_PACKET 套接字（我从“libnetfilter”推断您正在使用 Linux），因此它不会在将其作为常规网络输入处理的同一代码路径中进行处理。

较新版本的 libpcap（1.0 和更高版本）通过共享内存将这些数据包传递到用户空间，这是“零复制”机制。

但是，每个数据包*仍在*进行处理，因此除非您的机器有空闲的处理器内核和空闲的内存带宽（如果您的程序正在将大量数据写入文件系统，还有磁盘带宽），速度会有所下降。它不会直接增加数据包处理*延迟*，因为它不像基于 netfilter 的机制那样位于代码路径中，因此它可能不会对网络性能产生太大影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:11:06.200

它将数据包的副本传递给 libpcap 而不会影响流量。

# java - Apache Derby：SQLSyntaxErrorException

> ID：12732820
> 
> 赞同：1
> 
> 时间：2012-10-04T17:46:04.287
> 
> 标签：java, sql, jdbc, derby

请看下面的代码

```
package normal;

//This class if s for checking the database. If the database doesn't exists, this class will create one

import java.sql.*;

public class DatabaseCheck
{
    private Connection con;

    public DatabaseCheck()
    {
        createConnection();
        try
        {
            Statement st = con.createStatement();
            st.executeQuery("select * from PhoneData");
        }
        catch(Exception e)
        {
            System.out.println(e.getLocalizedMessage());

            if(e.getLocalizedMessage().equals("Schema 'SA' does not exist"))
            {
                try
                {
                PreparedStatement ps = con.prepareStatement("create table PhoneData(ids int identity constraint pkId primary key,names varchar(20),mobileNumber1 varchar(20),mobileNumber2 varchar(20),landNumber1 varchar(20),landNumber2 varchar(20),address varchar(100),category varchar(20),nickName varchar(20),email varchar(20),middleName varchar(20),lastName varchar(20),city varchar(20),country varchar(20))");
                ps.execute();

                PreparedStatement ps2 = con.prepareStatement("create table Emails(accountType varchar(10) constraint pk_user primary key,userName varchar(50) ,passwords varchar(50))");
                ps2.execute();

                }
                catch(Exception e2)
                {
                    e2.printStackTrace();
                }
            }
        }
        finally
        {
            closeConnection();
        }
    }

     public void createConnection()
    {
        try
        {
            Class.forName("org.apache.derby.jdbc.EmbeddedDriver");

            con = DriverManager.getConnection("jdbc:derby:PhoneBook;create=true","sa","sasasa");
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }

      public void closeConnection()
    {
        try
        {
            con.close();
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }
} 
```

此类能够以编程方式在嵌入式 apache derby 数据库中创建表。但是，它给出了以下错误

```
java.sql.SQLSyntaxErrorException: Syntax error: Encountered "identity" at line 1, column 32.
    at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedConnection.handleException(Unknown Source)
    at org.apache.derby.impl.jdbc.ConnectionChild.handleException(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedPreparedStatement.<init>(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedPreparedStatement20.<init>(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedPreparedStatement30.<init>(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedPreparedStatement40.<init>(Unknown Source)
    at org.apache.derby.jdbc.Driver40.newEmbedPreparedStatement(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(Unknown Source)
    at normal.DatabaseCheck.<init>(DatabaseCheck.java:27)
    at normal.MyPhoneBookApp.main(MyPhoneBookApp.java:25)
Caused by: java.sql.SQLException: Syntax error: Encountered "identity" at line 1, column 32.
    at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(Unknown Source)
    ... 15 more
Caused by: ERROR 42X01: Syntax error: Encountered "identity" at line 1, column 32.
    at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
    at org.apache.derby.impl.sql.compile.ParserImpl.parseStatement(Unknown Source)
    at org.apache.derby.impl.sql.GenericStatement.prepMinion(Unknown Source)
    at org.apache.derby.impl.sql.GenericStatement.prepare(Unknown Source)
    at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(Unknown Source)
    ... 9 more 
```

当我从表创建代码中删除“身份”关键字时，这工作正常。但是，自动生成 ID 是强制性的。请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T18:00:41.157

Derby 没有`identity`列类型（如[手册中所述](http://db.apache.org/derby/docs/10.8/ref/rrefsqlj30540.html#rrefsqlj30540)）。您需要定义一个[*生成*的列](http://db.apache.org/derby/docs/10.8/ref/rrefsqlj37836.html#rrefsqlj37836)。对于生成定义，Derby 确实知道`identity`属性，但这不是数据类型。

所以列定义`ids`应该是

```
ids integer generated always as identity constraint pkId primary key 
```

请注意，您也可以使用`generated by default`代替`always`. 那么只有在插入期间没有为该列指定值时才会生成一个值。`generated always`将覆盖您提供的任何值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:58:13.483

[Apache Derby 文档](http://db.apache.org/derby/docs/10.7/ref/rrefsqlj24513.html)表明您可以将关键字替换为`identity`：

```
 NOT NULL GENERATED ALWAYS AS IDENTITY 
```

# asp.net - 验证组验证以编程方式在 asp.net 中使用 vb.net 作为代码隐藏

> ID：12732831
> 
> 赞同：0
> 
> 时间：2012-10-04T17:47:08.050
> 
> 标签：asp.net, vb.net, validation, validationgroup

我有一个面板，面板中的控件..这些控件通过验证组验证。

当下拉框更改时，此面板将显示/隐藏。

问题是...我想在面板中使用验证组验证所有控件

如何编写代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:54:57.397

你`validationgroup="Test"`在你的验证器上定义，你也在`validationgroup="Test"`你的按钮上定义这个。

样本

```
 .....
     <asp:requiredfieldvalidator id="NameTextBoxRequiredValidator" 
        controltovalidate="NameTextBox"
        display="Dynamic" 
        text="Please enter your name."
        validationgroup="ForPanel"  <----------------
        runat="server"/>

      <asp:button id="SubmitButton"
        text="Submit"
        validationgroup="ForPanel"  <------------------
        runat="server"/> 
```

注意：获取或设置此验证控件所属的验证组的名称。

# c# - 如何将通用字典作为函数参数？

> ID：12732837
> 
> 赞同：2
> 
> 时间：2012-10-04T17:47:24.647
> 
> 标签：c#, generics

我的案例（我得到编译错误，因为 T 未定义）：

```
public void f1(Dictionary<string,T> d){

} 
```

我该如何解决这个问题（我不能传递对象，我必须传递原始的 var 类型）？

（我正在使用.net 4.5）

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-04T17:48:14.340

您需要添加类型参数`T`：

```
public void f1<T>(Dictionary<string,T> d){
} 
```

如果您希望字典包含任何类型的值，那么您唯一的选择是`Dictionary<string, object>`酌情使用 a 和强制转换。

# ruby-on-rails - Ruby after_destroy 在子属性上设置一个值

> ID：12732839
> 
> 赞同：0
> 
> 时间：2012-10-04T17:47:31.823
> 
> 标签：ruby-on-rails, ruby, activerecord

假设我有 2 个模型，用户和组

```
user belongs_to :group
group has_many :users 
```

有没有办法在组被销毁之前/之后将 user.group 属性设置为另一个值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:54:28.017

```
 class Group < ActiveRecord::Base

  has_many :users
  before_destroy -> { users.each {|u| u.group = nil; u.save}}

end 
```

# delphi - Delphi XE中HTTP代理的认证

> ID：12732843
> 
> 赞同：0
> 
> 时间：2012-10-04T17:47:52.197
> 
> 标签：delphi, proxy, twebbrowser

我需要一点帮助：

```
uses wininet, urlmon;
....

var proxy_info : PInternetProxyInfo;
....

begin
  user:='mycooluser';
  pass:='mycoolpass';
  UserAgent:='MSIE';
  New (proxy_info);
  proxy_info^.dwAccessType := INTERNET_OPEN_TYPE_PROXY;
  proxy_info^.lpszProxy := PAnsiChar('XXX.XXX.XXX.XXX:ZZZZ');
  proxy_info^.lpszProxyBypass := PAnsiChar('');
  UrlMkSetSessionOption(INTERNET_OPTION_PROXY_USERNAME, PAnsichar(user), Length(user)+1, 0);
  UrlMkSetSessionOption(INTERNET_OPTION_PROXY_PASSWORD, PAnsichar(pass), Length(pass)+1, 0);
  UrlMkSetSessionOption(URLMON_OPTION_USERAGENT, PChar(UserAgent), Length(UserAgent)+1, 0);
  UrlMkSetSessionOption(INTERNET_OPTION_PROXY, proxy_info, SizeOf(Internet_Proxy_Info), 0);
  Dispose(proxy_info);

  EmbeddedWB1.Navigate('http://2ip.ru');
end; 
```

但它不起作用，虽然这个代理 100% 工作，如果它只是在 IE 设置中指定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T23:41:27.490

```
unit Unit1;

// Code By Alireza Talebi  , asiapardaz.blogfa.com  ,  alireza.talebi90@yahoo.com
interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, urlmon, wininet, StdCtrls, OleCtrls, SHDocVw, ExtCtrls;

type
  TForm1 = class(TForm)
    Button1: TButton;
    Edit1: TEdit; // Proxy Address
    Edit2: TEdit; // Port
    Edit3: TEdit; // Web Address
    WebBrowser1: TWebBrowser;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;
  i:Integer;
implementation

{$R *.dfm}

procedure proxy(text:string);
var PIInfo: PInternetProxyInfo;
begin
New(PIInfo);
PIInfo^.dwAccessType := INTERNET_OPEN_TYPE_PROXY;
PIInfo^.lpszProxy:=(PAnsiChar(text));
PIInfo^.lpszProxyBypass := PChar('');
UrlMkSetSessionOption(INTERNET_OPTION_PROXY, piinfo, SizeOf(Internet_Proxy_Info), 0);
Dispose(PIInfo);
end;

procedure DeleteIECache;
var
  lpEntryInfo: PInternetCacheEntryInfo;
  hCacheDir: LongWord;
  dwEntrySize: LongWord;
begin
  dwEntrySize := 0;
  FindFirstUrlCacheEntry(nil, TInternetCacheEntryInfo(nil^), dwEntrySize);
  GetMem(lpEntryInfo, dwEntrySize);
  if dwEntrySize > 0 then lpEntryInfo^.dwStructSize := dwEntrySize;
  hCacheDir := FindFirstUrlCacheEntry(nil, lpEntryInfo^, dwEntrySize);
  if hCacheDir <> 0 then 
  begin
    repeat
      DeleteUrlCacheEntry(lpEntryInfo^.lpszSourceUrlName);
      FreeMem(lpEntryInfo, dwEntrySize);
      dwEntrySize := 0;
      FindNextUrlCacheEntry(hCacheDir, TInternetCacheEntryInfo(nil^), dwEntrySize);
      GetMem(lpEntryInfo, dwEntrySize);
      if dwEntrySize > 0 then lpEntryInfo^.dwStructSize := dwEntrySize;
    until not FindNextUrlCacheEntry(hCacheDir, lpEntryInfo^, dwEntrySize);
  end;
  FreeMem(lpEntryInfo, dwEntrySize);
  FindCloseUrlCache(hCacheDir);
end;

procedure EndBrowserSession;
begin
  InternetSetOption(nil, INTERNET_OPTION_END_BROWSER_SESSION, nil, 0);
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
DeleteIECache;
EndBrowserSession;
proxy(Trim(Edit1.Text)+':'+Trim(Edit2.Text)); // Proxy:Port
WebBrowser1.Navigate(Trim(Edit3.Text));
end;

end. 
```

# magento - 在 Magento 的管理产品网格中添加最终价格？

> ID：12732848
> 
> 赞同：5
> 
> 时间：2012-10-04T17:48:04.443
> 
> 标签：magento, admin

如何将“最终价格”（考虑到所有目录规则和特价）添加到 Magento 管理员的产品网格中？

更新 2012 年 10 月 12 日我正在使用具有大量自定义功能的 v1.1.8，因此我刚刚重新安装了 v.1.1.8 并将 addFinalPrice() 添加到产品网格中的 _prepareCollection() 中，但现在我只get 是“管理产品”管理员中的半空白屏幕。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:28:26.763

最终价格取决于网站和客户群，您是否有业务要求说明需要显示哪些价格？因为通常情况下产品网格中的数据取决于商店。

在简单的情况下，您可以将价格索引表添加到产品集合中并从中显示数据（在产品集合中已经存在方法`addPriceData`）。（您也可以实施客户组切换器以确保您已涵盖所有可能的情况）

在下面的链接示例如何将新列添加到产品网格 [http://www.magentocommerce.com/boards/viewthread/68993](http://www.magentocommerce.com/boards/viewthread/68993)

简单示例如何覆盖产品网格

第 1 步覆盖模块的 config.xml 中的网格

```
<config>
...
    <global>
    ...
        <blocks>
        ...
            <adminhtml>
                <rewrite>
                    <catalog_product_grid>Test_Catalog_Block_Adminhtml_Catalog_Product_Grid</catalog_product_grid>
                </rewrite>
            </adminhtml>
        ...
        </blocks>
    ...
    </global>
...
</config> 
```

第 2 步实现你的块

```
class Test_Catalog_Block_Adminhtml_Catalog_Product_Grid extends Mage_Adminhtml_Block_Catalog_Product_Grid
{
    /**
     * get customer group id
     *
     * @return int
     */
    protected function _getCustomerGroupId()
    {
        $customerGroupId = (int) $this->getRequest()->getParam('customer_group_id', 0);
        return $customerGroupId;
    }

    /**
     * prepare collection
     *
     * @return Test_Catalog_Block_Adminhtml_Catalog_Product_Grid
     */
    protected function _prepareCollection()
    {
        $store = $this->_getStore();
        $collection = Mage::getModel('catalog/product')->getCollection()
            ->addAttributeToSelect('sku')
            ->addAttributeToSelect('name')
            ->addAttributeToSelect('attribute_set_id')
            ->addAttributeToSelect('type_id');

        if (Mage::helper('catalog')->isModuleEnabled('Mage_CatalogInventory')) {
            $collection->joinField('qty',
                'cataloginventory/stock_item',
                'qty',
                'product_id=entity_id',
                '{{table}}.stock_id=1',
                'left');
        }
        if ($store->getId()) {
            $collection->addPriceData($this->_getCustomerGroupId(), $this->_getStore()->getWebsiteId());
            $adminStore = Mage_Core_Model_App::ADMIN_STORE_ID;
            $collection->addStoreFilter($store);
            $collection->joinAttribute(
                'name',
                'catalog_product/name',
                'entity_id',
                null,
                'inner',
                $adminStore
            );
            $collection->joinAttribute(
                'custom_name',
                'catalog_product/name',
                'entity_id',
                null,
                'inner',
                $store->getId()
            );
            $collection->joinAttribute(
                'status',
                'catalog_product/status',
                'entity_id',
                null,
                'inner',
                $store->getId()
            );
            $collection->joinAttribute(
                'visibility',
                'catalog_product/visibility',
                'entity_id',
                null,
                'inner',
                $store->getId()
            );
            $collection->joinAttribute(
                'price',
                'catalog_product/price',
                'entity_id',
                null,
                'left',
                $store->getId()
            );
        }
        else {
            $collection->addAttributeToSelect('price');
            $collection->joinAttribute('status', 'catalog_product/status', 'entity_id', null, 'inner');
            $collection->joinAttribute('visibility', 'catalog_product/visibility', 'entity_id', null, 'inner');
        }

        $this->setCollection($collection);

        Mage_Adminhtml_Block_Widget_Grid::_prepareCollection();
        $this->getCollection()->addWebsiteNamesToResult();
        return $this;
    }

    /**
     * Prepare columns
     *
     * @return Mage_Adminhtml_Block_Widget_Grid
     */
    protected function _prepareColumns()
    {
        $this->addColumnAfter('final_price',
            array(
                'header'=> Mage::helper('catalog')->__('Final Price'),
                'type'  => 'price',
                'currency_code' => $this->_getStore()->getBaseCurrency()->getCode(),
                'index' => 'final_price',
            ), 'price');
        return parent::_prepareColumns();
    }
} 
```

现在，如果您选择商店，您将能够看到价格，对于“所有商店视图”，此数据不可用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-24T21:24:43.327

```
$collection->addPriceData() 
```

会有帮助的

# git - 使用 Git 远程维护多个可同时访问的网站版本

> ID：12732851
> 
> 赞同：2
> 
> 时间：2012-10-04T17:48:09.310
> 
> 标签：git

我想设置 Git，这样我就可以同时访问同一个网站的不同版本。例如，“沙盒”站点、“暂存”站点和“生产”站点。

我目前在 Windows 上安装了 Git 1.7.11，并且在我的 CentOs 5.5 VPS 上运行了 Git。在本地，我有 2 个分支，“master”和“dev”。远程我有 2 个分支，“master”和“dev”。

我已经按照以下教程[展示了如何使用 Git 管理网站](http://danielmiessler.com/study/git/#website)，但现在觉得我相当愚蠢。我可以将文件从本地机器提交到 dev 分支或 master 分支到远程机器，然后使用更新后挂钩将这些文件签出到我的 Apache 'htdocs' 目录中。这很好用，当我切换分支时，文件“更改”。

但是，**我希望同时访问这两个版本，这样我就可以运行一个站点，而客户可以查看同一站点的暂存版本**。*我该怎么做呢？*之后我打算使用 Git 将 staging / dev 合并到 master 中。

这是最好的方法吗？更新后挂钩中的结帐？

```
GIT_WORK_TREE=/htdocs/production git checkout master -f
GIT_WORK_TREE=/htdocs/staging git checkout dev -f 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T06:13:58.673

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T07:56:55.687

这可能对你关于 Git 的问题没有帮助，但我不喜欢这种 web 开发中的工作流程，在我看来，有一种方法需要更多的工作，但作为交换，它更灵活并且可靠。

我只会标记一个裸露的公共存储库，其中所有提交都通过推送和获取（就像您正在使用的具有钩子一样），但没有任何钩子。然后，我将在远程服务器上有 2 个项目目录：一个用于 dev，一个用于 master；两者都使用克隆的非裸 git 存储库（每个都有一个 .git 文件夹）。因此，您的 Web 服务器上将有 1 个裸存储库（或者它可以在任何服务器上）和 2 个非裸存储库。

在这种情况下，您可以在本地推送您想要的所有内容，Web 项目目录中的工作目录只会在您决定拉取时更改。如果出现与项目环境相关的错误，则可以直接在远程服务器的项目目录上进行快速更改，这具有额外的好处，您可以提交修复并将其轻松推回。

通过多个远程项目目录（和 url），您可以在同一台服务器上同时拥有多个项目状态。

# asp.net - 服务器响应为：4.3.2 服务不可用，关闭传输通道

> ID：12732859
> 
> 赞同：9
> 
> 时间：2012-10-04T17:48:51.980
> 
> 标签：asp.net, email, smtp, smtpclient

从我的应用程序发送电子邮件时出现此错误。任何人都可以提出任何解决方案。

> 服务不可用，正在关闭传输通道。服务器响应为：4.3.2 服务不可用，关闭传输通道

下面是代码。

```
string adminID = "AAA@tu.edu";
MailMessage msg = new MailMessage();
msg.From = new MailAddress(adminID);
msg.To.Add("BBB@ttu.edu");
msg.Subject = "Sample Email";
msg.Body = "Hello ";
SmtpClient SmtpMail = new SmtpClient();
SmtpMail.Host = "basic.smtp.ttu.edu";
SmtpMail.Port = 25;
SmtpMail.Send(msg); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-12T16:06:36.783

得到了问题的解决方案。服务器拒绝该请求，因为此应用程序对该服务器没有写入权限。代码非常好，只是权限问题。希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-06T15:23:51.583

请检查发送电子邮件的服务器是否在 SMTP 服务器或 Exchange 服务器上列入白名单。

我有同样的问题，在 SMTP 服务器上将其列入白名单解决了我的问题。

# css - 放大时如何强制 CSS 背景图像适合其包含的元素？

> ID：12732866
> 
> 赞同：0
> 
> 时间：2012-10-04T17:49:15.347
> 
> 标签：css, zooming

我有一个无序列表（垂直显示），它使用背景图像在每个列表项中显示一个图形。

在用户缩放之前它看起来很好。一旦用户缩放，一些列表项的底部（内部）会出现一个微小的间隙。出现间隙是因为背景图像变得比列表项短，但两者都设置为相同的高度（44 像素）。

请参阅此示例。我为每个列表项添加了红色背景，以使差距更容易识别。尝试使用 Google Chrome 放大一次。

[http://jsbin.com/okozaz/2/edit](http://jsbin.com/okozaz/2/edit)

**有没有办法消除缝隙？**

我不能使用 background-size: cover 因为背景图像是精灵的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T16:43:19.103

将高度从 44 像素降低到 43 像素。这对我来说很明显，这对你的例子有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:35:07.843

可能由于某些值舍入误差，Chrome`<li>`在放大时渲染 s 的方式不同，导致有些是 45px 高，有些是 44px。但是，一种解决方法是不在 li 上设置 height 和 line-height ，而是将其留给锚元素。

[见 jsfiddle](http://jsfiddle.net/henrikandersson/XAUPu/)

# php - PHP OOP 代码运行良好。是正确的做法吗？将来的版本会破坏它吗？

> ID：12732870
> 
> 赞同：1
> 
> 时间：2012-10-04T17:49:42.093
> 
> 标签：php, mysql, oop

代码片段`class lnemail_fetch`

```
<?php  Part of heritage_classes.php
// Declare classes
class lnemail_fetch {
// return string in format "title | factoid" 
    public  $result;
    public function get_ln_info() 
    {
    include ("./includes/LOheritage-config.php");
    mysql_connect("$dbhost", "$dbuser", "$dbpass") or die(mysql_error());
    mysql_select_db("$dbname") or die(mysql_error());
      $query = "SELECT * FROM lnemail";
     $result = mysql_query($query);
         $this->result = $result;
    }
}
?> 
```

来自较大程序的代码片段它列出了一个 MySQL 表

```
 require_once('./includes/heritage_classes.php'); 

    $newlnemail_fetch = new  lnemail_fetch;
     $newlnemail_fetch->get_ln_info();
     $newresult  = $newlnemail_fetch->result;
     echo  "lnemail File display  <br />"; 

      while($row = mysql_fetch_array($newresult))
        {
         echo $row['ln_email']. "  |  " . $row['ln_date'] . "  |  " . $row['ln_week'] ;
          echo "<br />";

        } 
```

这种使用 PHP OOP 是否被认为是一种好的做法，即使它现在工作得很好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:54:25.657

我会说不，它没有很好地使用 OOP。

需要改进的方面：

分离数据库连接和查询的东西。分离 db 结果处理。实现一个可迭代的结果对象将是一个好主意。不使用 mysql 扩展并切换到 mysqli 是一个非常好的主意。它还将免费为您提供 MySQL 的 OOP 接口。

可能应该考虑在 SQL 字符串中转义输入的方面，但这是无法确定的，因为没有显示这样的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:03:44.807

> 将来的版本会破坏它吗？

是的，因为您使用的是旧的和（现在）已弃用的[`mysql_*`功能](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)。

> 类的代码片段`lnemail_fetch`

这个名字`lnemail`对于一个类来说并不是一个好名字，因为当我看到它时，我不知道它是什么`ln`意思。类名也经常是`UpperCamelCased`和方法`camelCased`。

现在实际查看您的代码：

在查看您的课程时，它只是一个课程，目前与 OOP 无关。我会做的是将`$result`属性设为私有，因为目前您只是一些数据容器。此外，我将介绍另一个负责从数据库（或您拥有的任何存储）访问数据的类。我还将介绍另一个类来表示单个电子邮件和一个工厂类来构建这些邮件对象。这将类似于以下内容：

// 不确定收件箱的名称是否正确，因为我不太清楚这个类代表什么

```
class Inbox
{
    private $storage;

    private $mailFactory;

    public function __construct($storage, $mailFactory)
    {
        $this->storage     = $storage;
        $this->mailFactory = $mailFactory;
    }

    public function fetchAllMails()
    {
        $mailRecordset = $this->storage->fetchAll();

        $mails = array();
        foreach ($mailRecordset as $mailRecord) {
            $mails[] = $this->mailFactory->create($mailRecord);
        }

        return $mails;
    }
}

class InboxStorage
{
    private $dbConnection;

    public function __construct(\PDO $dbConnection)
    {
        $this->dbConnection = $dbConnection;
    }

    public function fetchAll()
    {
        $stmt = $this->dbConnection->query('SELECT * FROM lnemail');

        return $stmt->fetchAll(\PDO::FETCH_ASSOC);
    }
}

class Email
{
    private $email;

    private $date;

    private $week;

    public function __construct($email, $date, $week)
    {
        $this->email = $email;
        $this->date = $date;
        $this->week = $week;
    }

    public function getEmail()
    {
        return $this->email;
    }

    public function getDate()
    {
        return $this->date;
    }

    public function getWeek()
    {
        return $this->week;
    }
}

class EmailFactory
{
    public function create($record)
    {
        return new Email($record['email'], $record['date'], $record['week']);
    }
} 
```

你可以像下面这样运行它：

```
// initialize all the objects we are going to need
$emailFactory = new EmailFactory();
$dbConnection = new \PDO('mysql:dbname=dbtest;host=127.0.0.1;charset=utf8', 'user', 'pass');
$dbConnection->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
$dbConnection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$inboxStorage = new InboxStorage($dbConnection);
$inbox = new Inbox($inboxStorage, $mailFactory);

// run the code
foreach($inbox->fetchAllMails() as $email) {
    echo $mail->email . ' | ' . $mail->date . ' | ' . $mail->week . '<br>';
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-04T19:09:11.523

它不是一个真正的类，因为`lnemail_fetch`它不是一个对象。您所做的只是制作一个容器，而制作容器只是为了调用一个可能是静态的函数并返回结果而不是分配它。

一个更好的类可能包括更新的`mysqli`而不是过时的 mysql，并且工作如下。它将行变成对象，列是属性（变量；

```
<?php
class lnemail {
    public $ln_emai;
    public $ln_date;
    public $ln_week;

    public static function Fetch($dbhost,$dbuser,$dbpass,$dbname) {
      $db = new mysqli($dbhost, $dbuser, $dbpass,$dbname) or die(mysql_error());
      $query = "SELECT * FROM lnemail";
      $result = $db->query($query);
      $returnArr = array();
      while($obj = $result->fetch_object('lnemail') {
         $returnArr[] = $obj;     
      }
      return $returnArr;
    }
} 
```

然后

```
 <?php
 require_once("./includes/LOheritage-config.php");
 require_once('./includes/heritage_classes.php');
 $lnemails = lnemail::Fetch($dbhost,$dbuser,$dbpass,$dbname);
 echo  "lnemail File display  <br />";
 foreach($obj as $lnemail) {
      echo $obj->ln_email. "  |  " . $obj->ln_date . "  |  " . $obj->ln_week;
      echo "<br />";
 } 
```

# mysql - Mysql 触发多列更新

> ID：12732873
> 
> 赞同：0
> 
> 时间：2012-10-04T17:49:56.430
> 
> 标签：mysql, triggers

我知道如何写一个简单的触发器

谁能告诉我编写触发器的最佳方法是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:33:39.813

“[if] 在 mainTable 上完成了一个新条目”是一个`INSERT` [触发器](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)。

至于要更改的列值，这是一个`UPDATE`触发器。您可以像这样检查旧值与新值：

```
 if (col1 != values(col1)) .... 
```

如果您的值可以为 NULL，请更加警惕。

希望有帮助。

# c# - 将 UserControl 添加到 C# 中的变量位置

> ID：12732881
> 
> 赞同：2
> 
> 时间：2012-10-04T17:50:22.853
> 
> 标签：c#, wpf, winforms, wpf-controls, visual-studio-2012

因此，我试图将 UserControl 添加到 Windows 窗体，但是我想在单击按钮时将其添加到变量位置。

所以我在一个位置有一个组框，我希望第一个组框直接位于组框下方的最左端，然后我希望下一个组框相对于第一个组框，所有后续组框都在一个位置相对于前一个。然而，由于空间有限，最终必须创建这些控件的新行。

我不确定这是否可能，或者我将如何做到这一点。目前我只知道如何为要创建的控件定义一个特定的点。

代码中唯一真正重要的部分：

```
private void addpilot_Click(object sender, EventArgs e)
{
    PilotControl newPilot = new PilotControl();
    newPilot.Location = new Point();
    this.Controls.Add (newPilot);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:42:03.903

我认为这种行为可能类似于`WrapPanel`. 如果不是，您可以尝试使用另一个面板来解决此问题，或者也可以实现您自己的面板来创建特定的位置行为。试试 MSDN 中的 Panels Overview。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:55:50.647

查看对接和流量控制。

# android - 从 APK 文件逆向工程到项目

> ID：12732882
> 
> 赞同：278
> 
> 时间：2012-10-04T17:50:22.617
> 
> 标签：android, apk, decompiling

[我不小心从Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)中删除了我的项目，只剩下我转移到手机上的[APK文件。](http://en.wikipedia.org/wiki/APK_%28file_format%29)有没有办法逆转将应用程序导出到 .apk 文件的过程，以便我可以取回我的项目？

* * *

## 回答 #1

> 赞同：318
> 
> 时间：2012-10-04T18:29:49.703

有两个有用的工具可以从未知的 APK 文件生成 Java 代码（粗略但足够好）。

1.  [从dex2jar](https://github.com/pxb1988/dex2jar)下载 dex2jar 工具。

2.  使用该工具将 APK 文件转换为[JAR](http://en.wikipedia.org/wiki/JAR_%28file_format%29)：Windows：

    ```
     $ d2j-dex2jar.bat demo.apk
     dex2jar demo.apk -> ./demo-dex2jar.jar 
    ```

    macOS / Linux：

    ```
     $ d2j-dex2jar.sh -f demo.apk -o demo.jar 
    ```

3.  生成 JAR 文件后，使用[JD-GUI](http://jd.benow.ca/)打开 JAR 文件。您将看到 Java 文件。

输出将类似于：

[![京东图形](../Images/839ffc3c9033b0e0107341582801194d.png)](https://i.stack.imgur.com/2CaEM.jpg)

然后，您可以使用其他工具从 APK 文件中检索 AndroidManifest.xml 和资源文件（如图像、翻译等）。

*   [APK工具](https://ibotpeaches.github.io/Apktool/)

    ```
     $ java -jar apktool.jar -q decode -f demo.apk -o outputDir 
    ```

*   [AXML解析器](https://github.com/appknox/pyaxmlparser)

    ```
     $ apkinfo demo.apk 
    ```

*   [忍者机器人](https://github.com/rovellipaolo/NinjaDroid)

    ```
     $ ninjadroid demo.apk --all --extract 
    ```

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2013-05-14T13:35:06.983

首先我推荐[`this`](https://www.dropbox.com/s/p4jrort0lxwhw0b/Extract%20source%20code%20from%20APK%20file..flv)视频，这可以消除你所有的疑惑

如果没有，请通过它

**`Procedure for decoding .apk files, step-by-step method:`**

**`Step 1:`**

创建一个新文件夹并将 .apk 文件放入其中（您要解码）。现在将此`.apk`文件的扩展名重命名为`.zip`（例如：从 filename.apk 重命名为 filename.zip）并保存。

如果在转换成 .zip 时出现问题，请参考[`link`](http://www.mediacollege.com/microsoft/windows/extension-change.html)

获得 .zip 后，现在您将获得 classes.dex 文件等。在此阶段您可以看到可绘制文件，但看不到 xml 和 java 文件，所以继续。如果您没有看到扩展，请检查配置

**`Step 2:`**

现在在同一文件夹中提取此 zip apk 文件。现在从这里下载 dex2jar[`link`](https://github.com/pxb1988/dex2jar)

并将其解压缩到同一个文件夹。现在打开命令提示符并将目录更改为该文件夹。

然后写入`dex2jar classes.dex`并按回车。现在您`classes.dex.dex2jar`在同一文件夹中获取文件。

然后下载[java反编译器](http://jd.benow.ca/)

现在双击 jd-gui 并单击打开文件。然后`classes.dex.dex2jar`从该文件夹中打开文件。现在你得到类文件并通过 src 名称保存所有这些类文件（单击文件然后单击 jd-gui 中的“保存所有源”）。提取该 zip 文件`(classes_dex2jar.src.zip)`，您将获得应用程序的所有 java 文件。

在这个阶段，您获得了 java 源代码，但 xml 文件仍然无法读取，所以继续。

**`Step 3:`**

现在打开另一个新文件夹并将这些文件

1.  放置要解码的.apk文件

2.  [`windows v1.x`](https://code.google.com/p/android-apktool/downloads/detail?name=apktool-install-windows-r04-brut1.tar.bz2)为And下载 Apktool[`Apktool`](https://ibotpeaches.github.io/Apktool/)

使用谷歌安装窗口并放在同一个文件夹中

3.  使用 google 下载 framework-res.apk 文件并放在同一个文件夹中（并非所有 apk 文件都需要 framework-res.apk 文件）

4.  打开命令窗口

5.  导航到 APKtool 的根目录并键入以下命令： `apktool if framework-res.apk.`

上面的命令应该导致`Framework installed ...`.

6.  apktool d "appName".apk ("appName" 表示您要解码的应用程序) 现在您在该文件夹中获得了一个文件夹，现在您也可以轻松读取 xml 文件。

**`Step 4:`** 最后我们得到了`res/`项目的java代码，这是我们开始时的目标。

> **`P.S.`**如果您无法通过上述步骤获取 res 文件夹，请安装新的[**`apktool`**](http://ibotpeaches.github.io/Apktool/install/)
> 
> *   是否安装了 Java 1.7？ **安装 Apktool 2.x**
> *   是否安装了 Java 1.6 或更高版本？ **安装 Apktool 1.x**

`Enjoy and happy coding`

* * *

## 回答 #3

> 赞同：65
> 
> 时间：2015-01-16T10:05:36.583

没有软件&没有太多步骤..

只需上传您的 APK 并从该站点获取您的所有资源..

[https://www.apkdecompilers.com/](https://www.apkdecompilers.com/)

本网站将反编译 APK 文件中嵌入的代码并提取文件中的所有其他资产。

**注意：我反编译我的 APK 文件并在一分钟内从该网站获取代码**

**更新 1**：

我找到了另一个在线反编译器网站，

[http://www.javadecompilers.com/apk/](http://www.javadecompilers.com/apk/) - 不能连续工作，要求阻止弹出窗口

**更新 2：**

我在 Play 商店中找到了 apk 反编译器应用程序，

[https://play.google.com/store/apps/details?id=com.njlabs.showjava](https://play.google.com/store/apps/details?id=com.njlabs.showjava)

我们可以在我们的android手机中反编译apk文件。我们还可以查看此应用程序中的 java & xml 文件

**更新 3：**

我们可以使用另一个选项从 Android studio 2.2 版本**分析 APK功能**

构建 -> 分析 APK -> 选择您的 APK -> 它给出结果

[![在此处输入图像描述](../Images/02b2c64067326671eac5cc1f8984bde7.png)](https://i.stack.imgur.com/66BUx.png)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-11-13T08:02:49.897

在 Android Studio 3.5 中，这非常容易，您只需一分钟即可实现。以下是一个逐步的过程。

**1：**打开 Android Studio，按窗口按钮 -> 键入 Android Studio -> 点击图标打开 android studio 启动画面，如下所示。

[![在此处输入图像描述](../Images/ed4a6d330fb7a80becf49867ef887888.png)](https://i.stack.imgur.com/DcoZs.png)

**2：**在这里你可以看到一个选项*“Profile or debug APK”*点击它并选择你的apk文件然后点击ok。

[![在此处输入图像描述](../Images/baa0badd41c14b3f93b5685f991ddd14.png)](https://i.stack.imgur.com/71wML.png)

**3：** 它会在一分钟内打开你所有的清单和java类，具体取决于apk的大小。

[![在此处输入图像描述](../Images/8ff227b24b56f15cb96241929d6e7c71.png)](https://i.stack.imgur.com/bnhhr.png)

就是这样。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-10-04T17:54:38.103

并不真地。有许多 dex 反汇编器/反编译器套件，[例如 smali](http://code.google.com/p/smali/)或[dex2jar](http://code.google.com/p/dex2jar/)，它们将生成半人类可读的输出（在 dex2jar 的情况下，您可以通过使用[JD-GUI](http://java.decompiler.free.fr/?q=jdgui)之类的东西来获取 java 代码，但过程是不完美，你不太可能 100% 重新创建源代码。但是，它可能会给你一个开始重建源代码树的地方。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-06-14T06:38:38.377

有一种新方法可以做到这一点。

Android Studio 2.2 有 APK Analyzer 它会提供很多关于 apk 的信息，在这里查看：- [http://android-developers.blogspot.in/2016/05/android-studio-22-preview-new-ui.html](http://android-developers.blogspot.in/2016/05/android-studio-22-preview-new-ui.html)

[![ap](../Images/490e9b7a741fc4ec24a6d00d89974331.png)](https://i.stack.imgur.com/lOWyF.png)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-10-04T18:03:21.950

是的，您可以恢复您的项目。只需将`yourproject.apk`文件重命名为`yourproject.zip`，您将获得该 ZIP 文件中的所有文件。我们正在将文件扩展名从 .apk 更改为 .zip。从该 ZIP 文件中，提取`classes.dex`文件并通过以下方式对其进行反编译。

首先，您需要一个工具来将 DEX 上的所有（已编译）类提取到 JAR。有一个叫[dex2jar](http://code.google.com/p/dex2jar/downloads/list)的，是一个中国学生做的。

然后，您可以使用[JD-GUI](http://java.decompiler.free.fr/?q=jdgui)将 JAR 中的类反编译为源代码。生成的源代码应该非常可读，因为 dex2jar 应用了一些优化。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-04-24T11:12:42.713

对于 Android 平台，您可以尝试Play 商店中提供的[ShowJava 。](https://play.google.com/store/apps/details?id=com.njlabs.showjava&hl=fr)

您可以通过应用程序界面查阅生成的代码，生成的 java 文件和文件夹结构与转换生成的文件一起存储在`ShowJava`文件夹中。`/sdcard``.jar`

该应用程序是免费的，主视图底部有一个广告横幅，但有一个应用内购买选项（3,99 美元）可以将其删除。除了删除广告横幅外，应用内购买不会添加任何功能。

披露：我不是该应用程序的开发人员，我也与他没有任何关系。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-05-11T01:58:47.453

试试这个工具：[https](https://decompile.io) ://decompile.io ，它可以在 iPhone/iPad/Mac 上运行 [![在此处输入图像描述](../Images/61c836816daefc95c44ebaa25166fb12.png)](https://i.stack.imgur.com/NpIEI.jpg)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-01-31T06:24:38.693

请按照以下步骤执行此操作或简单地使用[apkToJava gem](http://www.singhajit.com/convert-apk-file-to-java-code/)进行此过程，它甚至会负责安装所需的工具以使其正常工作。

*   将apk文件转换为zip
*   解压文件
*   从中提取 classes.dex
*   使用dex转jar将classes.dex转成jar文件
*   使用jadx gui打开jar文件作为java源代码

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-05-06T16:25:35.020

如果您正在寻找专业的替代方案，请查看 PNF Software 的[JEB Decompiler](https://www.pnfsoftware.com)。

有一个演示版本可以让您反编译大多数代码。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-07-20T09:28:12.140

以下是一些可用于执行从 APK 文件到源代码的逆向工程的工具：

1.  dex2jar
2.  Java反编译器
3.  APK工具
4.  APK 分析器

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-08-01T09:44:01.553

您可能想要使用的另一个工具是[APK Studio](https://github.com/vaibhavpandeyvpz/apkstudio) 它依赖于第三方工具：Apktool、jadx、ADB 和 Uber APK 签名器，您需要单独下载。

# objective-c - 检测 UIScrollview 滚动到底部

> ID：12732884
> 
> 赞同：2
> 
> 时间：2012-10-04T17:50:27.453
> 
> 标签：objective-c, ios, cocoa-touch, uiscrollview, uiscrollviewdelegate

我正在尝试创建类似于 Reeder 的功能，如果您在滚动视图中滚动到内容的下方或上方，您就会被介绍给新内容。

我以为我正在使用 scrollViewWillEndDragging:withVelocity:targetContentOffset 进入一个好地方：

然而，这只是停留在底部。

有什么方法可以检测你是滚动到底部还是顶部（这是垂直滚动条开始变小的时候）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T20:23:35.117

发表评论作为答案：

签`contentOffset`入`scrollviewDidScroll`并在超出您的底部/顶部的那一刻`contetOffset`，向滚动视图添加新内容，并增加内容大小

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-28T14:53:32.353

也许更好的解决方案是这样的：

```
-(void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset {

    if (targetContentOffset->y == 0 && scrollView.contentOffset.y < - someOffset) { //use someOffset if you dont want to reload immedeately on scroll to top
        //dragged past top
    }

    if (targetContentOffset->y == scrollView.contentSize.height && scrollView.contentOffset.y > scrollView.contentSize.height + someOffset) { 
        //dragged past bottom
    }

} 
```

# c++ - 这段代码的大 O 表示法是什么？

> ID：12732889
> 
> 赞同：-5
> 
> 时间：2012-10-04T17:50:59.480
> 
> 标签：c++, big-o

这段代码的大 O 表示法是什么？

```
for(int i=0; i<10; ++i) 
    for(int a=0; a<n; ++a){
        cout << "*";
        cout << endl;
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-04T17:51:42.443

这个是`O(n)`：外循环的 10 只是一个常数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T17:51:54.417

这`O(10*n)`是`O(n)`因为 10 是常数系数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T17:52:41.917

最大的哦是：O(10*n) -> O(n)

# c - 在 C 中初始化包含位域的结构

> ID：12732891
> 
> 赞同：2
> 
> 时间：2012-10-04T17:51:11.713
> 
> 标签：c, initialization, variable-assignment, structure, bit-fields

我试图更多地了解位域的工作原理。

给定以下代码：假设 int 为 32 位

```
#include <stdio.h>

int main()
{
    struct byte
    {
        int one:1;
    };
    struct byte var = {3};
    printf("%d\n", var.one);
    printf("%#x\n", var);
    return 0;
} 
```

我得到的输出是：

```
-1
0x1

```

但是我期待看到：

```
-1
0x3

```

自从

```
struct byte var = {3}; 
```

将值 3 分配给 int 的 4 个字节，不是吗？

从输出中我实际上得到的似乎是上面的代码行试图将值 3 存储到 1 位字段中，因此打印`0x1`为第二个输出行。

所以我的问题是：

**这些对整个结构的初始化和赋值是如何工作的？**

另外，为什么是`{}`必要的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T17:54:10.907

```
int one:1; 
```

有了这个，您声明一个只有一位用于该`sign`位的 int。所以你看`-1`。

如果要存储 3（011），则总共需要 2（数据）+1（符号）位。所以，它应该是：

```
struct byte
{
int one:3;
}; 
```

或者使用无符号整数。

```
struct byte
{
unsigned int one:2;
}; 
```

# jquery - jeditable 回调有空值

> ID：12732892
> 
> 赞同：0
> 
> 时间：2012-10-04T17:51:13.570
> 
> 标签：jquery, jeditable

> **可能重复：**
> [jeditable 回调有空值 //OR// 单击保存按钮后如何显示已编辑的文本？](https://stackoverflow.com/questions/12734124/jeditable-callback-has-empty-values-or-how-to-display-edited-text-after-clic)

在我的代码中，我发现回调函数中的值和设置为空...

谁能帮忙为什么会这样？

```
$(".edit_area").editable('/cgi-bin/mycgiscript.cgi', {
event       : 'dblclick',       //or dblclick
type        : 'textarea',
rows        : 2,
cols        : 30,
cancel      : 'Cancel',
submit      : 'Save',
indicator   : '<img src="images/indicator.gif">',
placeholder : 'Double Click to enter text',
tooltip     : 'Double Click to edit...',
name        : 'name',
id      : 'id',
callback    : function(value, settings) {
console.log('value='+value);
console.log('settings='+settings);
console.log('callback executed='+value);
return(value);
}
}); 
```

我使用了回调，因为在“保存”编辑后的文本之后。编辑的文本不会显示在 HTML 页面上。它已正确保存在后端数据库中。我重新运行了显示来自后端服务器的更新信息的 ajax 调用...

editable 附加到从 ajax 调用生成的 html 表中的 div。如果有帮助...

# sql - 根据日期选择适用的行

> ID：12732893
> 
> 赞同：0
> 
> 时间：2012-10-04T17:51:20.033
> 
> 标签：sql, sql-server

我有两张表，一张保存有关合同的信息，另一张保存汇率。

汇率表由 3 个字段组成 - 两个主键，一个用于货币代码（例如 EURO），一个用于汇率的开始日期

- 一个保存汇率的字段

合同表仅包含有关合同的标准信息以及作为汇率表和合同日期的外键的货币代码。

我希望能够单独选择每个合同以及合同日期的适用汇率。例如，如果我的合同日期是 2012 年 9 月 20 日，我对该合同的货币有三种汇率，一种从 9 月 1 日开始，一种从 9 月 12 日开始，另一种9月30日开始。我如何确保只有 9 月 12 日的汇率与合同数据一起返回，而不是任何其他汇率，因为 9 月 20 日属于该“期间”。

是否需要某种子查询？

我正在使用 SQL Server 2005。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:02:02.470

数据结构的问题是您有第一个日期，但没有最后一个日期日期。一种方法是使用相关子查询。但是，我更喜欢使用排名函数来分配下一个日期：

```
with fxr as (
     select fx.*,
            row_number() over (partition by ccy order by exdate) as seqnum
     from fx
    ),
     fxrates as (
     select fxr.*, coalesce(fxnext.exdate, getdate()+1) as next_exdate
     from fxr left outer join
          fxr fxnext
          on fxr.ccy = fxnext.ccy and
             fxr.seqnum + 1 = fxnext.seqnum
    )
select c.*, f.fxrate
from contracts c left outer join
     fxrates f
     on c.ccy = f.ccy and
        c.thedate >= f.exdate and
        c.thedate < f.next_exdate 
```

这是在 fxrates CTE 中指定货币周期的结束日期。对于最近的，结束日期是明天——大概所有的汇率都是过去的。然后它加入该表以获得合同的适当费率。

# c++ - 如何显示 findContours 与 cvBlob 做同样的事情

> ID：12732899
> 
> 赞同：0
> 
> 时间：2012-10-04T17:51:49.607
> 
> 标签：c++, matlab, opencv, blob

我有一个主管，他只想使用 cvBlob 来查找连接的组件。

我如何向他证明 findContours 也可以做到这一点？我已经向他展示了 c++ 和 matlab 代码来证明我的“理论”，但他还不相信。

OpenCV 开发人员是否有任何关于 findContours 确实可以找到 blob 的参考资料？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T18:23:41.020

您可能可以解决它类似于以下内容：

*   查找轮廓（[cv::findContours](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours#findcontours)）
*   循环遍历轮廓
*   找到每个和最小封闭圆的中心点（[cv::minEnclosureCircle](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=minenclosingcircle#minenclosingcircle)）
*   绘制（填充）每个边界/闭合轮廓的圆

[这是@ andrew-berg使用 findContours 进行](https://stackoverflow.com/users/1607635/andrew-berg)[手部跟踪应用程序](http://forum.libcinder.org/topic/simple-hand-tracking-with-kinect-opencv)的 blob 检测示例 （检查上述第 82-107 行）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T13:19:03.270

确切地询问你的主管为什么他更喜欢使用 cvBlob。

有人报告说 cvBlob 比 findContours 快，但 findContours 的优势在于它是标准的解决方案，并且得到了一个大社区的支持（目前 cvBlob 的支持非常糟糕，抱歉），以及更通用的功能比 cvBlob（更针对特定目标）。

当您的主管给出答案（如果他可以）时，您可以回扣。

顺便说一句，我是 cvBlob 的开发者。

# .net - 分析器本身对 .Net 中性能测量的影响

> ID：12732900
> 
> 赞同：1
> 
> 时间：2012-10-04T17:51:50.670
> 
> 标签：.net, visual-studio-2010, performance, profiler, performance-testing

例如，运行 Visual Studio 2010 分析器对我的程序性能有何影响？也就是说，由于探查器必须如何“干扰”程序的正常操作以检查性能，探查器的结果实际上在哪些方面不准确？或者有没有这样的问题？

这个问题源于这样一个事实，即我在 Visual Studio 2010 分析器（我用 C# 编程）中的方法中看到属性获取/设置占用了大量时间。这些属性是由 .resx 资源字典自动生成的（避免使用魔术字符串 :-)），因此我*假设*JIT 编译器和/或在幕后运行的解释器*通常*会内联它们，如果它会有帮助。我会假设当您运行分析器时不会发生这种内联......或者是吗？

我专门使用 Visual Studio 2010 探查器，但我希望得到包含其他探查器的答案。

对不起，如果我错过了一个已经回答这个问题的问题 - 请随时指出方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:07:15.317

从我的角度来看，这取决于...

您可能知道，有许多分析模式。对于 CPU/时间分析，主要是采样和检测。

样本分析是更“统计”的分析。结果的准确性取决于分析会话期间代码执行的次数。Profiler 会定期对在目标进程上执行的每个线程的调用堆栈进行快照。如果一个方法有大量样本，可能是因为执行次数多或方法执行时间长。它非常轻量级，对系统的性能影响最小，并且易于使用。

这种检测涉及在每个被检测函数的开始和结束处将探针插入到目标代码中，以便可以跟踪每个函数调用的进入和退出。在分析会话中，可以准确测量函数调用的确切次数以及执行所需的时间。然而，捕捉这些细节是有代价的。每个函数调用都会引入相当大的处理开销（通常至少为 10%，并且很容易达到 100% 或更多，但或多或​​少取决于所分析函数的大小）。分析器中代码大小的增加和附加代码的执行也会导致一些不利的 CPU 缓存效果。

最后要了解的重要一点是，Profiling 可以被视为科学方法，因为您应该在真实条件（或真实用例）中测量您的代码，以找出瓶颈的确切位置并在知道它将提高性能的情况下修复它们。

# html - 两个DIV，小屏不中断，宽度灵活

> ID：12732903
> 
> 赞同：0
> 
> 时间：2012-10-04T17:52:03.933
> 
> 标签：html, break

我想要 2 个 div 放在一边，它们必须放在一边。如果屏幕太小，我不希望两个 div 放在一起。第一个 DIV 具有 400px 的固定宽度，第二个 DIV 可以在 150px 和无限之间。高度都固定在 300px。我怎样才能做到这一点？我已经尝试过浮动，但如果屏幕太小，则会导致 DIV 中断。用大宽度制作一个包装器 div 会起作用，但看起来很丑陋且有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:57:43.100

创建一个包装 div 并给它`display: table-row; min-width: 550px;`，然后让它里面的 div 有`display: table-cell;`. 像这样的东西：

```
.container
{
    display: table-row;
    min-width: 550px;
}

.container > div
{
    display: table-cell;
    height: 300px
}

.container > div:first-child
{
    width: 400px;
}

.container > div:last-child
{
    min-width: 150px;
} 
```

然后是 HTML：

```
<div class="container>
    <div>I have 400px width.</div>
    <div>I have at least 150px width, and am next to the other guy.</div>
</div> 
```

在这里，有一个**[小提琴](http://jsfiddle.net/SJxwA/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:04:47.990

我会做如下的事情；

HTML

```
<div id="containerdiv">     
   <div id="fixeddiv">&nbsp;</div>
   <div id="elasticdiv">
      <div id="div2000">&nbsp;</div>
   </div>
</div> 
```

CSS

```
#containerdiv{
   min-width:550px;
}

#fixeddiv{
   height:300px;
   width:400px;
   background:red;
   float:left;
}

#elasticdiv{
   height:300px;
   overflow:hidden;
   min-width:150px;
   background:blue;
}

#div2000{
  width:2000px;
  background:yellow;
  float:left;
} 
```

div 将如何显示 ![div 将如何显示](../Images/5f4650e8b6430cf9d9893e751a1a33fb.png)

# javascript - 有人可以解释我在使用这个 Javascript 时遇到的范围问题吗？

> ID：12732904
> 
> 赞同：2
> 
> 时间：2012-10-04T17:52:03.723
> 
> 标签：javascript, jquery, scope

> **可能重复：**
> [JavaScript：var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)

我有一些 Javascript，除了我可以从某些区域调用但不能从其他区域调用的这个函数之外，它大部分都可以使用。这似乎是一个范围问题，但我不知道为什么。

```
$().ready(function () {
   UpdateElfDisplay(); // <--- Undefined

   $('#Attribute1').change(function () {
      UpdateElfDisplay();  // <--- Works just fine.
   });

   var UpdateElfDisplay = function () {
      // ... some work done here 
   };
 }); 
```

正如我在上面所标记的，当我从 .change() 函数调用 UpdateElfDisplay 函数时它工作正常，但是如果我在加载文档时尝试调用它，我会得到一个“未定义”。有人可以解释原因，或将我引导到描述此的资源。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T17:53:20.523

您在定义之前调用该函数，因此它不起作用。处理程序中的那个稍后会被调用，所以它可以工作

如果您使用函数声明，它将被“提升”并且可以工作。

```
function UpdateElfDisplay () {
  // ... some work done here 
} 
```

JavaScript 解释器在计算任何表达式之前计算函数的声明形式。

* * *

***边注***

它是*TypeError*而不是*ReferenceError*的原因是它`var UpdateElfDisplay`实际上是像函数声明一样被提升，但*赋值*本身没有被提升。

这意味着变量存在，但还没有您指定的值。

* * *

***旁注2***

您的处理程序可能会像这样重写：

```
$('#Attribute1').change(UpdateElfDisplay); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T17:53:25.803

```
var UpdateElfDisplay = function () { 
```

直到这条线，`UpdateElfDisplay`还没有被初始化。

# c++ - 字典（hash_table）中使用了什么哈希函数？

> ID：12732905
> 
> 赞同：0
> 
> 时间：2012-10-04T17:52:04.693
> 
> 标签：c++, hash, dictionary, hashtable, hash-function

我正在写语言的解释器。有问题：我想创建类型字典，您可以在其中按索引放置任何类型的值，任何类型的值（简单类型的简单 [int,float,string] 或复杂 [list,array,dictionary] 或复杂的简单类型...）。这与 python-lang 中的相同。我应该使用什么哈希函数算法？

对于字符串，有许多哈希示例 - 最简单的：所有字符的总和乘以 31，除以 HASH_SIZE，即那个简单的数字。

但是对于不同的类型，我认为，它必须是更复杂的算法。我找到了 SHA256，但不知道如何使用“unsigned char [32]”结果类型在哈希表中进行寻址 - 它比计算机中的 RAM 多得多。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:27:07.360

好吧，一种常见的方法是将散列函数定义为属于该类型的方法。这样你就可以通过一个通用的 API 为不同的类型调用不同的算法。

当然，这需要您为要在解释器中使用的每个 baisc“c 类型”定义包装类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:44:41.457

C++11 中有哈希表，最新的 C++ 标准 - std::unordered_map, std::unordered_set。

编辑：

由于每种类型都有不同的分布，通常每种类型都有自己的哈希函数。这就是在 Java（从 Object 继承的 .hashCode() 方法）、C#、C++11 和许多其他实现中的实现方式。

编辑2：

典型的哈希函数做两件事：

1.) 以自然数创建对象表示。（这就是 Java 中的 .hashCode() 所做的）例如 - 字符串“CAT”可以转换为：

```
67 * 256^2 + 65 * 256^1 + 84 = 4407636 
```

2.) 将此数字映射到数组中的位置。一种方法是：

```
integer_part(fractional_part(k*4407636)*m) 
```

其中 k 是一个常数（Donald Knuth 在他的《编程艺术》一书中推荐 (sqrt(5)+1)/2），m 是哈希表的大小，fractional_part 和 integer_part （显然）计算实数的小数部分和整数部分.

在您的哈希表实现中，您需要处理冲突，尤其是当可能的键比哈希表的大小多得多时。

编辑3：

我阅读了有关该主题的更多内容，看起来 67 * 256^2 + 65 * 256^1 + 84 = 4407636 是执行 hash_code 的非常糟糕的方法。这是因为，“somethingAAAAAAABC”和“AAAAAABC”给出完全相同的哈希码。

# project-management - 在 Jira 上管理项目和用户之间的可见性

> ID：12732906
> 
> 赞同：0
> 
> 时间：2012-10-04T17:52:06.873
> 
> 标签：project-management, project, jira

我知道我们有组和角色，但我不知道如何将用户与项目分开。所以我想让DeveloperA的projectA和DeveloperB的projectB可见。

也许一些关于如何做到这一点的教程？谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:57:19.467

关键是决定如何管理权限；按角色通常允许更多控制，而按组通常涉及较少的管理开销（必须为每个项目指定角色）。如果您不清楚如何设置权限方案，请查看此处：[https](https://confluence.atlassian.com/display/JIRA/Managing+Project+Permissions) ://confluence.atlassian.com/display/JIRA/Managing+Project+Permissions 。根据您尝试管理的用户/组/角色的数量，您还可以将权限分配给各个用户。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:01:51.503

不幸的是，JIRA 的设置非常糟糕，无法支持逐个项目的可见性。可能吗？毫无疑问。是否需要进行很多不必要的设置？明确地。在 JIRA 自己的文档中找到的这两条评论暗示了所涉及的设置数量：

> “为了完成完全适合您公司的安全配置，您需要大量的时间、精力和想象力”
> 
> “如果不对 JIRA 环境进行大规模自定义，就无法自动将用户分配到某些组”

好的，既然您知道将涉及一些工作，您的重点应该集中在创建组和设置权限方案上——您必须为每个项目或基于特定的用户逻辑分组做这两件事客户、部门、部门、内部等。以下是有关获取该设置的一些特定 JIRA 文档：

[https://confluence.atlassian.com/display/JIRA051/Using+Project+Level+Security+with+User+Groups](https://confluence.atlassian.com/display/JIRA051/Using+Project+Level+Security+with+User+Groups)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T17:58:47.067

查看[JIRA 项目级安全文档。](https://confluence.atlassian.com/display/JIRA/Configuring+project+specific+security)

或者，如果您想深入了解问题级别，该信息就[在这里。](https://confluence.atlassian.com/display/JIRA/Configuring+Issue-level+Security)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T19:17:40.647

使用（或创建）一个项目角色，例如项目 A 中的开发人员将开发人员 A 添加到该角色。在项目 B 中，将 Dev B 添加到相同的角色。在两个项目使用的权限方案中，将 Browse Projects 权限授予 Developers 角色（不是组）就是这样！

# android - 我应该隐藏可选视图还是在运行时添加它们？

> ID：12732907
> 
> 赞同：2
> 
> 时间：2012-10-04T17:52:09.890
> 
> 标签：android, android-layout, android-fragments, android-view

假设我有一个`ViewGroup`可以包含几个可选子视图的 a ，比如 a `VideoView`、 an`ImageView`和一些可选按钮。

如果我在布局文件中包含所有可能的子视图，但将所有子视图默认设置为可见性消失，但在运行时适当更改可见性，是否会浪费大量资源？

根据需要在运行时添加视图会更好吗？还有另一种更明智的方法吗？碎片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:22:26.360

我更喜欢创建它们并隐藏它们。我注意到我看过的大多数内置 Android 布局都是这样做的。就个人而言，我认为它减少了 NullPointerExceptions 和避免它们所需的检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:33:53.953

通过不在布局文件中创建少量视图所节省的资源通常不会对应用程序的运行时资源消耗产生很大影响，除非它们包含巨大的图像或其他非常大量的资源。

另一方面，在布局文件中拥有这些视图（并隐藏它们）

*   使它们比在 Java 代码中创建它们更具可读性
*   导致它们被 Android Lint 检查。

这就是为什么我总是建议将它们放在布局中。

# tsql - Sybase 抱怨不存在重复插入

> ID：12732911
> 
> 赞同：1
> 
> 时间：2012-10-04T17:52:16.920
> 
> 标签：tsql, sybase

我已将 DB_1 中的 SOURCE 表中的一些记录移动到另一个 DB_2 中的 ARCHIVE 表中（即，将 SOURCE 中的记录插入到 ARCHIVE 中，然后从 SOURCE 中删除记录。）

我的 SOURCE 表具有以下索引创建为`SOURCE_1`：

```
CREATE UNIQUE NONCLUSTERED INDEX SOURCE_1
    ON dbo.SOURCE(TRADE_SET_ID, ORDER_ID) 
```

问题是 - 当我尝试将行从 ARCHIVE 插入回 SOURCE 时，Sybase 抛出以下错误：

```
Attempt to insert duplicate key row in object 'SOURCE' with unique index 'SOURCE_1' 
```

而且，当然，随后插入失败。

我确认我的 SOURCE 表没有这些重复项，因为以下查询返回空：

```
select * from DB_1.dbo.SOURCE
join DB_2.dbo.ARCHIVE
on DB_1.dbo.SOURCE.TRADE_SET_ID = DB_2.dbo.ARCHIVE.TRADE_SET_ID
AND DB_1.dbo.SOURCE.ORDER_ID = DB_2.dbo.ARCHIVE.ORDER_ID 
```

如果上面的查询没有返回任何内容，那么这意味着我没有违反我对 2 列的唯一索引约束，但是 Sybase 抱怨说我有。

有没有人知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:58:41.083

如果 Sybase 在这方面类似于 SQL Server（我更熟悉），我会怀疑索引会阻止插入。在复制到它之前尝试禁用存档版本上的索引（以及任何其他索引或自动增量列），然后重新启用。Sybase 可能会尝试为插入自动创建 ID，这会干扰现有记录。

# android - 在 android 中使用 mp4 文件/jpeg 序列/gif 动画？哪个更好以及如何有效地使用这些？

> ID：12732912
> 
> 赞同：0
> 
> 时间：2012-10-04T17:52:16.790
> 
> 标签：android, null, gif, mp4, movie

我最近发布了很多问题，但没有得到回复。希望这个能得到。

Iv 决定使用 mp4，因为它的压缩比 gif 序列好得多。尝试 movie.decodestream( *InputStream* ) 有助于获取流。但是当获得movie.duration() 时，会抛出空指针异常。在网络上四处走动，我发现如果电影是逐帧播放的（每个都有持续时间），则持续时间有效。那么，mp4 序列是读取流和获取持续时间的坏方法吗？有没有办法将 mp4 转换为“逐帧”序列？

所需要的是一种在屏幕上播放大约 30 帧动画的简单方法。Iv 发现的每个解决方案的问题是：Jpeg 序列非常消耗内存，使用时 Gif 序列具有锯齿状边缘和更大的文件大小，并且无法获取 mp4 序列以进行逐帧播放。- 由于动画的尺寸为 800*600，我想 Jpeg 序列是不可能的，或者请告诉是否有任何好的选择。- 目前我使用的是 gif 序列，只有一半的维度。边缘呈锯齿状，在不同的设备中显示非常糟糕。-Mp4 序列太好了。但我需要控制帧，以便可以正向和反向播放，并在动画的静止阶段显示第一帧和最后一帧（动画在触摸时触发）。

# javascript - jQuery - 动态添加的按钮单击不起作用

> ID：12732917
> 
> 赞同：0
> 
> 时间：2012-10-04T17:52:36.860
> 
> 标签：javascript, jquery, jquery-ui, jquery-dialog

我编写了以下代码，创建了一个带有动态添加内容的弹出窗口。现在我想删除这些添加的项目或编辑它们，但它似乎没有触发单击这些按钮之一的事件`(btnLSM_Remove + btnLSM_Edit)`。任何线索为什么会这样？`btnLSM_Add`并`btnLSM_Okay`以同样的方式工作，他们确实工作......

```
function ListManagementDialog(obj, dialogTitle, dialogText, listDelimiter, btnNames) {
    if (!$.isArray(btnNames)) {        
        return false;
    }

     if (dialogConfirmed) {
        return false;
    }

    btns[btnNames[0]] = function () {
        $(this).dialog('close');
        dialogConfirmed = true;
        if (obj) {
            obj.click();
        }
    };

    btns[btnNames[1]] = function () {
        $(this).dialog('close');
    };

    $('body').append(String.Format('<div id="divLSM_Dialog" title="{0}"><p>{1}</p>' +
        '<button id="btnLSM_Add" class="btnAdd" type="button" role="button" aria-disabled="false" title="Hinzuf&#252;gen" />' +               
        '<input id="txbLSM_Emailadresse" class="text ui-widget-content ui-corner-all" type="text" name="txbLSM_Emailadresse" style="display:none;">' +
        '<button id="btnLSM_Okay" class="btnOkay" type="button" role="button" aria-disabled="false" title="&#220;bernehmen" style="display:none;" />' +
        '<br /><br />' +
        '<table id="tblLSM_Items" class="ui-widget ui-widget-content">' +
                 '<thead>' +
                        '<tr class="ui-widget-header ">' +
                '<th>Emailadresse</th>' +
                '<th />' +
                '</tr>' +
            '</thead>' +
            '<tbody />' +
        '</table>' +
        '</div>', dialogTitle, dialogText));

    $('#btnLSM_Add').click(function () {
        $('#txbLSM_Emailadresse').val('');
        $('#txbLSM_Emailadresse').show();
        $('#btnLSM_Okay').show();
        $('#txbLSM_Emailadresse').focus();
    });  

    $('#btnLSM_Okay').click(function () {
        $('#tblLSM_Items tbody').append('<tr>' +
            '<td>' + $('#txbLSM_Emailadresse').val() + '</td>' +
            '<td>' + '<button id="btnLSM_Remove" class="btnRemove" type="button" role="button" aria-disabled="false" title="Entfernen" />' + '<button id="btnLSM_Change" class="btnEdit" type="button" role="button" aria-disabled="false" title="&#196;ndern" />' + '</td>' +
            '</tr>');

        $('#txbLSM_Emailadresse').hide();
        $('#btnLSM_Okay').hide();
    });

    $('#btnLSM_Remove').click(function () {
        alert("hohoho"); //no alert-popup
    });   

     $('#btnLSM_Change').click(function () {
        alert("hohoho"); //no alert-popup
    });

    $('#divLSM_Dialog').dialog({
        modal: true,
        resizable: false,
        draggable: true,
        width: 600,
        height: 300,
        close: function (event, ui) {
            $('body').find('#divLSM_Dialog').remove();
        },
        buttons: btns
    });

    return dialogConfirmed;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T17:56:29.077

当您调用时，您的 btnLSM_Remove 按钮不存在

```
$('#btnLSM_Remove').click(function () { 
```

所以`$('#btnLSM_Remove')`集合是空的，处理程序被添加到任何内容。

您可以使用[on](http://api.jquery.com/on/)功能：

```
$('#divLSM_Dialog').on('click', '#btnLSM_Remove', function () { 
```

注册一个处理程序，该处理程序将应用于委托定义之后出现的按钮。

**编辑 ：**

在 jQuery 1.6.2 中，您可以使用[live](http://api.jquery.com/live/)：

```
$('#btnLSM_Remove').live('click', function () { 
```

# ios - 使用不同的元素计数进行本地化

> ID：12732921
> 
> 赞同：0
> 
> 时间：2012-10-04T17:52:57.147
> 
> 标签：ios, nslocalizedstring, localizable.strings

当我的用户打开我的应用程序时，我想热烈欢迎他们。所以我想有不同的句子来随机显示它们。每种语言的消息数量不同。

解决此问题的首选方法是什么？

我的想法：

1.  将计数也保存在字符串文件中 -> 不喜欢这个想法，因为必须维护 `"welcomeCount" = "5";` `"welcomeN" = "Hi....";`

2.  分隔消息 -> 不喜欢这个想法，因为你必须注意这一点 `"welcomeMessages" = "Hey there...|MessageN";`

有人想以优雅的方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:18:19.463

您可以将欢迎消息存储在本地化的属性列表中。

*   在 Xcode 中，转到 File -> New -> File ...
*   选择资源 -> 属性列表模板，例如“Welcome.plist”作为文件名。
*   在 Xcode 中选择 Welcome.plist 并将根对象的类型从*Dictionary*更改为*Array*。
*   选择 Welcome.plist，进入 File Inspector 并单击“Make Localized ...”。然后为 Welcome.plist 选择所需的本地化，例如英语和德语。
*   现在，您拥有可以单独编辑的每种语言的 Welcome.plist。
*   要添加字符串，请单击属性列表中的“+”符号。

在您的程序中，您可以轻松加载列表

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"Welcome" ofType:@"plist"];
NSArray *messages = [NSArray arrayWithContentsOfFile:path]; 
```

这会根据用户的语言将“正确”的列表正确加载到数组`messages`中。您可以选择随机消息

```
int idx = arc4random_uniform([messages count]);
NSString *msg = [messages objectAtIndex:idx]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T19:03:51.347

为了最大限度地减少维护，您可以使用二进制搜索来找出可用的变体数量。假设您的 中有以下内容`Localizable.strings`：

```
"Welcome_0" = "Hello";
"Welcome_1" = "Hi";
"Welcome_2" = "What up";
"Welcome_3" = "Howdy"; 
```

您可以使用以下方法找到计数：

```
int lower = 0, upper = 10;
while (lower < upper - 1) {
    int mid = (lower + upper) / 2;
    NSString *key = [NSString stringWithFormat:@"Welcome_%i", mid];
    BOOL isAvailable = ![key isEqualToString:NSLocalizedString(key, @"")];
    if (isAvailable) lower = mid;
    else upper = mid;
} 
```

最后使用以下命令选择您的随机消息：

```
NSString *key = [NSString stringWithFormat:@"Welcome_%i", rand() % upper];
NSString *welcome = NSLocalizedString(key, @""); 
```

# jakarta-ee - 在 Tomcat7 中使用 javax.validation

> ID：12732923
> 
> 赞同：7
> 
> 时间：2012-10-04T17:53:16.160
> 
> 标签：jakarta-ee, tomcat, bean-validation, hibernate-validator

我试图让 javax.validation 在 Tomcat 7 上工作。

我已经进入了我的 WEB_INF/lib：hibernate-validator-4.3.0 以及 slf4j-api-1.7.1 和 slf4j-simple-1.7.1。

当我运行我的代码时，验证被忽略了！在glassfish上一切正常，其他人有这个问题吗？

干杯! NFV

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T18:04:27.203

你也需要`validation-api.jar`。它包含 Bean Validation API，包括引导类 ( *javax.validation.Validation* )。

也许您下载了松散的 JAR 文件而不是[分发包](http://sourceforge.net/projects/hibernate/files/hibernate-validator/)。[您可以在此处](http://sourceforge.net/projects/hibernate/files/hibernate-validator/4.3.0.Final/hibernate-validator-4.3.0.Final-dist.zip/download)以 zip 格式下载当前最新的 4.3.0 版本。它包含您需要放入的所有文件`/WEB-INF/lib`。解压压缩包后，可以`validation-api.jar`在`/lib/required`文件夹中找到。

# google-maps-api-3 - 谷歌地图在按钮点击上加载地图 - 用另一个按钮加载标记

> ID：12732928
> 
> 赞同：2
> 
> 时间：2012-10-04T17:53:30.057
> 
> 标签：google-maps-api-3, onclick, google-maps-markers

我正在尝试通过单击按钮加载标记，但在某处我遗漏了一些东西。1.地图一键拉出加载。2\. 点击不同的按钮加载标记。这就是我所拥有的：

```
<!DOCTYPE>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<title></title>

<link rel="stylesheet" type="text/css" href="
    <?php  
        $stylesarray = array("field");  
        echo $stylesarray[mt_rand(0,count($stylesarray)-1)];  
    ?>.css">

<link rel="shortcut icon" href="images/favicon.ico">
<script src="http://code.jquery.com/jquery-latest.js"></script>

<script src="http://maps.googleapis.com/maps/api/js?key=xxx&sensor=false"></script>
<script type="text/javascript"> 

var map = null;

$(document).ready(function(){   

    var lat=document.getElementById("latitude");
    var long=document.getElementById("longitude");       
    if (navigator.geolocation){
         navigator.geolocation.getCurrentPosition(showPosition); 
    } 
     function showPosition(position) {
         lat.value=+position.coords.latitude;
         long.value=+position.coords.longitude;
     }   
    });

function load() {

var map = new google.maps.Map(document.getElementById("mapcontainer"), {
    center: new google.maps.LatLng(20,0),
    zoom: 3,
    styles: mapstyle,
    mapTypeControl: false,
    navigationControl: false,
    streetViewControl: false,
    maxZoom: 8,
    minZoom: 3,
    mapTypeId: 'roadmap'
  });
}

function getmarkers(){
  downloadUrl("markers.php", function(data) {
    //alert ("it works");
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      var id = markers[i].getAttribute("id");
      var info = markers[i].getAttribute("info");
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("latitude")),
          parseFloat(markers[i].getAttribute("longitude")));
      var date = markers[i].getAttribute("date");
      var html =  "<div id='tooltip'><div id='tiptext'>" + info
                  + "<div id='number'>" + id + "</div>"
                  + "<div id='date'>" + date + "</div>" 
                  +  "</div></div>";
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: 'images/mapicon.png'

      });         
      createTooltip(marker, html);
    }
  });

</script>
  </head>
  <body>
<div id="mapcontainer">
<form>
    <input type="button" id="map" onClick="load()"></input>  
</form>
<form> 
    <input type="button" onClick="getmarkers()"></input>
</form>

</body>
</html> 
```

xml 示例：

```
<markers>
<marker id="330" info="blahblah" date="2012-10-03" latitude="20.00" longitude="-81.00"/>
</markers> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:00:50.923

您的地图变量是您的初始化函数的本地变量。加载标记的代码将无法访问它。

尝试全局定义它（在任何函数之外）：

```
var map = null; 
```

然后在你的加载函数中初始化它

```
function load() {
map = new google.maps.Map(document.getElementById("mapcontainer"), { 
```

您发布的代码的问题（在语法错误之后）是 getmarkers 函数是加载函数的本地函数。它需要是全局的，才能被 HTML 元素点击函数调用。

[基于您的示例代码的实时工作版本](http://www.geocodezip.com/v3_xml_onclick.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:06:07.140

似乎您没有在全局范围内声明 map 变量。仅在加载函数范围内，将其声明为全局变量，它应该可以工作。

```
var map = null; // Declaring map in the global scope

function load() {
    // map references to global scope
    map = new google.maps.Map(document.getElementById("mapcontainer"), {
    ...
}

downloadUrl("markerinfo.php", function(data) {
      ...
      var marker = new google.maps.Marker({
        map: map, // map references to global scope
        position: point,
        icon: 'images/mapicon.png'

      });         
      createTooltip(marker, html);
    }
}); 
```

尝试将 DownloadUrl 函数调用包装在另一个函数中并改为调用它。

```
<input type="button" id="markerload" onClick="getMarkers()"></input>

function getMarkers() {
    downloadUrl("markerinfo.php", function(data) {
        ...
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T18:49:48.193

函数 getmarkers() 旨在通过 for 循环检索所有标记

```
for (var i = 0; i < markers.length; i++) { 
```

要一次加载一个标记，您需要为每个按钮单击增加它

即`Var i =0`在 getmarkers() 结束时全局递增 i`i++`

您应该在数组的最后一个成员到达时停止增量`markers.length`

# algorithm - 在数组中查找对，使得 a%b = k ，其中 k 是给定的整数

> ID：12732939
> 
> 赞同：12
> 
> 时间：2012-10-04T17:54:11.717
> 
> 标签：algorithm, language-agnostic, number-theory

这是我遇到的一个有趣的编程难题。给定一个正整数数组和一个数字 K。我们需要从数组中找到对 (a,b) 使得`a % b = K`.

我对此有一个简单的**O(n^2)**解决方案，我们可以检查所有对，例如 a%b=k。有效但效率低下。我们当然可以做得比这更好，不是吗？任何有效的算法相同？哦，这不是家庭作业。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T18:53:04.233

对您的数组和二进制搜索进行排序或保留一个哈希表，其中包含数组中每个值的计数。

对于一个数`x`，我们可以找到最大的`y`如。对此进行二进制搜索或在您的哈希中查找它并相应地增加您的计数。`x mod y = K``y = x - K``y`

现在，这不一定是唯一可行的值。例如，`8 mod 6 = 8 mod 3 = 2`。我们有：

```
x mod y = K => x = q*y + K =>
            => x = q(x - K) + K =>
            => x = 1(x - K) + K =>
            => x = 2(x - K)/2 + K =>
            => ... 
```

这意味着您还必须测试所有除数`y`。您可以在 中找到除数，如果使用二分搜索和哈希表（尤其是在您的数字不是很大的情况下，建议使用），您可以`O(sqrt y)`得到总的复杂性。`O(n log n sqrt(max_value))``O(n sqrt(max_value))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T04:54:12.653

将问题视为有两个单独的数组作为输入：一个用于 a 数字，a % b = K 和一个用于 b 数字。我将假设一切都> = 0。

首先，您可以丢弃任何 b <= K。

现在将 b 中的每个数字视为生成一个序列 K、K + b、K + 2b、K + 3b...您可以使用一对数字 (pos, b) 记录这一点，其中 pos 每次递增 b阶段。从 pos = 0 开始。

将这些序列保存在优先级队列中，这样您就可以在任何给定时间找到最小的 pos 值。对数字数组进行排序 - 实际上您可以提前执行此操作并丢弃任何重复项。

```
For each a number
  While the smallest pos in the priority queue is <= a
    Add the smallest multiple of b to it to make it >= a
    If it is == a, you have a match
    Update the stored value of pos for that sequence, re-ordering the priority queue 
```

在最坏的情况下，您最终会将每个数字与每个其他数字进行比较，这与简单的解决方案相同，但具有优先级队列和排序开销。但是，当多个 a 数字通过时，较大的 b 值可能在优先级队列中保持未经检查，在这种情况下这样做会更好 - 如果有很多数字要处理并且它们都是不同的，则其中一些必须很大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T07:40:23.803

这个答案提到了算法的要点（称为*DL*，因为它使用“除数列表”）并通过名为 amodb.py 的程序提供详细信息。

设 B 为输入数组，包含 N 个正整数。不失一般性，假设`B[i] > K`所有`i`的 B 是升序的。（请注意，`x%B[i] < K`如果`B[i] < K`; 和 where `B[i] = K`，可以报告所有 的对 (B[i], B[j]) `j>i`。如果 B 最初没有排序，则收取`O(N log N)`排序成本。）

在算法*DL*和程序 amodb.py 中，A 是一个数组，其中 K 是从输入数组元素中预减去的。即，`A[i] = B[i] - K`。请注意，如果`a%b == K`，那么对于某些`j`我们有`a = b*j + K`or `a-K = b*j`。也就是说，`a%b == K`iff`a-K`是 的倍数`b`。此外，如果`a-K = b*j`和`p`是 的任何因数`b`，则`p`是 的因数`a-K`。

让从 2 到 97 的素数称为“小因数”。当从某个区间 [X,Y] 中均匀随机选取 N 个数时，N/ln(Y) 量级的数将有不小的因数；相似的数字将具有最大的小因数 2；而下降的比例将有依次变大的最大的小因素。例如，平均 about`N/97`会被 97 整除，约`N/89-N/(89*97)`被 89 整除但不能被 97 整除等。一般情况下，当 B 的成员是随机的时，具有某些最大小因子或没有小因子的成员列表是 sub-O(N /ln(Y)) 的长度。

*给定一个列表 Bd 包含 B 的成员可被最大的小因子p*整除，*DL*测试 Bd 的每个元素与列表 Ad 的元素，A 的那些元素可被*p*整除。但是给定一个 Bp 的列表 Bp 包含 B 中没有小因素的元素，*DL*将针对 A 的所有元素测试 Bp 的每个元素。示例：如果`N=25`、`p=13`、`Bd=[18967, 23231]`和`Ad=[12779, 162383]`，则*DL*测试是否有任何一个`12779%18967, 162383%18967, 12779%23231, 162383%23231`为零。请注意，在此示例（以及许多其他示例）中，可以通过注意将测试数量减少一半`12779<18967`，但 amodb.py 不包括该优化。

*DL*针对不同的因素制作`J`不同的列表；`J`在 amodb.py 的一个版本中，`J=25`因子集是小于 100 的素数。较大的值`J`会增加`O(N*J)`初始化除数列表的时间，但会略微减少`O(N*len(Bp))`针对 A 的元素处理列表 Bp 的时间。请参见下面的结果。处理其他列表的时间是，这与先前答案方法`O((N/logY)*(N/logY)*J)`的复杂性形成鲜明对比。`O(n*sqrt(Y))`

接下来显示的是两个程序运行的输出。在每一组中，第一`Found`行来自一个朴素的 O(N*N) 测试，第二行来自*DL*。（注意，如果逐步删除太小的 A 值， *DL和 naïve 方法都会运行得更快。）第一个测试的最后一行中的时间比率显示，* *DL*与 naïve 方法的加速比低到令人失望的 3.9。对于那次运行，`factors`仅包括 25 个小于 100 的素数。对于第二次运行，加速比更好，约为 4.4，`factors`包括数字 2 到 13 和最多 100 个素数。

```
 $ python amodb.py 
  N:  10000   K:  59685 X:  100000   Y:  1000000
  Found 208  matches in 21.854 seconds
  Found 208  matches in 5.598 seconds
  21.854 / 5.598 = 3.904

  $ python amodb.py
  N:  10000   K:  97881 X:  100000   Y:  1000000
  Found 207  matches in 21.234 seconds
  Found 207  matches in 4.851 seconds
  21.234 / 4.851 = 4.377 
```

程序 amodb.py：

```
import random, time
factors = [2,3,4,5,6,7,8,9,10,11,12,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97]
X, N = 100000, 10000
Y, K = 10*X, random.randint(X/2,X)
print "N: ", N, "  K: ", K, "X: ", X, "  Y: ", Y
B = sorted([random.randint(X,Y) for i in range(N)])
NP = len(factors);  NP1 = NP+1
A, Az, Bz = [], [[] for i in range(NP1)], [[] for i in range(NP1)]
t0 = time.time()
for b in B:
    a, aj, bj = b-K, -1, -1
    A.append(a)                 # Add a to A 
    for j,p in enumerate(factors):
        if a % p == 0:
            aj = j
            Az[aj].append(a)
        if b % p == 0:
            bj = j
    Bz[bj].append(b)
Bp = Bz.pop()   # Get not-factored B-values list into Bp
di = time.time() - t0; t0 = time.time()
c = 0
for a in A:
    for b in B:
        if a%b == 0:
            c += 1
dq =  round(time.time() - t0, 3); t0 = time.time()
c=0
for i,Bd in enumerate(Bz):
    Ad = Az[i]
    for b in Bd:
        for ak in Ad:
            if ak % b == 0:
                c += 1
for b in Bp:
    for ak in A:
        if ak % b == 0:
            c += 1
dr = round(di + time.time() - t0, 3)
print "Found", c, " matches in", dq, "seconds"
print "Found", c, " matches in", dr, "seconds"
print dq, "/", dr, "=", round(dq/dr, 3) 
```

# regex - 用虚拟值替换分隔文本文件中的空字段

> ID：12732942
> 
> 赞同：1
> 
> 时间：2012-10-04T17:54:12.633
> 
> 标签：regex, sed, awk

我正在开发一个项目，该项目采用以下形式的分隔数据集：

```
field1~field2~field3~.....~fieldn 
```

有空字段是可能的，所以

```
field1~~~field4~~field6 
```

完全可以接受。

这个文件是使用内部翻译程序翻译的，这有点不足之处。具体来说，它不能很好地处理空字段。我的解决方案是在其中粘贴一些虚拟值，例如空格或 @ 符号。我试过了：

```
sed -r 's/~/~ ~/g' 
```

和

```
awk '{gsub(/\~\~/,"~ ~")}; 1' file > file.SPACE 
```

但是这两个都不足以替换 MULTIPLE 字段。所以如果我输入

```
field1~field2~~~field3 
```

它会输出：

```
field1~field2~ ~~field3 
```

如果可以的话，我只想编写脚本，因为我无法更改翻译器的代码。我可以更改创建分隔文件的程序中的代码，但我不想这样做。是否有一些解决方法，或者正在为此提出一个表达式，这只是常规语言的固有限制之一？

**编辑：**哇，感谢大家的快速响应，您的所有解决方案都有效，所以我对所有解决方案都投了赞成票。我想我会接受 Janito 的解释。

还有为什么要投反对票？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T18:02:15.803

你可以试试：

```
sed -e ':a;s/~~/~ ~/;ta' 
```

这将使用“:”命令创建一个标签“a”，然后用 替换一次，如果前一个`~~`替换`~ ~`命令成功，则使用“t”测试命令跳回“a”标签。

希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T18:03:10.090

```
awk '{for( i=0; i<=NF; i++ ) if( $i ~ /^$/ ) $i = " " } 1' FS='~' OFS='~' input 
```

或者：

```
awk '/^$/{ $0 = " " } 1' ORS='~' RS='~' input 
```

或者：

```
awk '{ while( gsub( "~~", "~ ~" )); }1' input 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T18:03:44.980

```
sed -e ':loop' -e 's/~~/~ ~/g' -e 't loop' file 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T18:04:46.390

你可以使用 Perl

```
perl -pe 's/~(?=~)/~ /g' 
```

*...这表示替换每个`"~"`后跟`"~"``"~ "`*

* * *

存储要`file.SPACE` 使用的结果

```
perl -pe 's/~(?=~)/~ /g' file >file.SPACE 
```

# sql - 从 openquery 更改为本地数据库上的子查询时，最后一个括号上的 ')' 附近的语法不正确

> ID：12732946
> 
> 赞同：3
> 
> 时间：2012-10-04T17:54:20.953
> 
> 标签：sql, syntax

为什么从 openquery 更改为本地数据库上的子查询时，此查询在最后一个括号中返回“')' 附近的语法不正确？

您可以看到 openquery 之前开始（并且有效）的注释行

```
select right(rtrim(a.vouchernumber),9) as voucherkey
, a.vouchernumber
, vendorkey
, rtrim(invoicenumber) as invoicenumber
, invoicedate
, duedate
, documenttype
, PostDate
, qty
, amt = 
    CASE 
        WHEN documenttype = 'D' THEN -(amt)
        WHEN b.transactiontype = 'V' THEN -(amt)
    ELSE 
        amt 
    End
, extendedlineamt
, intercompanyid
, acct
, NaturalAcct
, c.segmentdescription as NaturalAcctDesc
, Dept
, f.segmentdescription as DeptDesc
, Site
, d.segmentdescription as SiteDesc
, Project
, e.segmentdescription as ProjDesc
, b.*
, rtrim(vendorname) as vendorname
, rtrim(vendoraddress1) as vendoraddress1
, vendoraddress2
, vendoraddress3
, vendorcity
, rtrim(vendorstate) as vendorstate
, rtrim(vendorzipcode) as vendorzipcode
, rtrim(vendoraddress1) + ' ' + rtrim(vendoraddress2) +' ' + rtrim(vendorcity) + ', ' + rtrim(vendorstate) as VendorAddress
, Dept + '.' + Site + '.' + Project as ProjectId 
--from openquery (LinkedServer,
--  'select a.vouchernumber
from  (
    select a.vouchernumber
    , a.vendorkey
    , a.invoicenumber
    , a.invoicedate
    , a.duedate
    , a.documenttype
    , a.recdate as PostDate
    , b.qty
    , b.amt
    , b.extendedlineamt
    , b.intercompanyid
    , b.acct
    , Substring(Acct, 1, 4) as NaturalAcct
    , Substring(Acct,8, 3 ) as Site
    , Substring(Acct,11, 4 ) as Project
    , Substring(Acct,5,3) as Dept
    , v.vendorname
    , v.vendoraddress1
    , v.vendoraddress2
    , v.vendoraddress3
    , v.vendorcity
    , v.vendorstate
    , v.vendorzipcode 
from aphdr a 
join aplin b 
    on a.vouchernumber = b.vouchernumber
left join apvend v 
    on a.vendorkey = v.vendorkey
where a.recdate between '2011-01-01' and '2012-10-02' 
    and cast(Substring(Acct,11, 4 ) as varchar(4)) like 'VIR'
    and left(a.vouchernumber,1) <> 'G'
    and Company = 'ASSFD'
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T17:56:33.073

您需要为子查询设置别名。

在查询末尾添加别名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T17:55:39.353

您需要给子查询一个别名（或名称）。

在这里，我刚刚将 tbl1 添加到最后

```
select right(rtrim(a.vouchernumber),9) as voucherkey
, a.vouchernumber
, vendorkey
, rtrim(invoicenumber) as invoicenumber
, invoicedate
, duedate
, documenttype
, PostDate
, qty
, amt = 
    CASE 
        WHEN documenttype = 'D' THEN -(amt)
        WHEN b.transactiontype = 'V' THEN -(amt)
    ELSE 
        amt 
    End
, extendedlineamt
, intercompanyid
, acct
, NaturalAcct
, c.segmentdescription as NaturalAcctDesc
, Dept
, f.segmentdescription as DeptDesc
, Site
, d.segmentdescription as SiteDesc
, Project
, e.segmentdescription as ProjDesc
, b.*
, rtrim(vendorname) as vendorname
, rtrim(vendoraddress1) as vendoraddress1
, vendoraddress2
, vendoraddress3
, vendorcity
, rtrim(vendorstate) as vendorstate
, rtrim(vendorzipcode) as vendorzipcode
, rtrim(vendoraddress1) + ' ' + rtrim(vendoraddress2) +' ' + rtrim(vendorcity) + ', ' + rtrim(vendorstate) as VendorAddress
, Dept + '.' + Site + '.' + Project as ProjectId 
--from openquery (LinkedServer,
--  'select a.vouchernumber
from  (
    select a.vouchernumber
    , a.vendorkey
    , a.invoicenumber
    , a.invoicedate
    , a.duedate
    , a.documenttype
    , a.recdate as PostDate
    , b.qty
    , b.amt
    , b.extendedlineamt
    , b.intercompanyid
    , b.acct
    , Substring(Acct, 1, 4) as NaturalAcct
    , Substring(Acct,8, 3 ) as Site
    , Substring(Acct,11, 4 ) as Project
    , Substring(Acct,5,3) as Dept
    , v.vendorname
    , v.vendoraddress1
    , v.vendoraddress2
    , v.vendoraddress3
    , v.vendorcity
    , v.vendorstate
    , v.vendorzipcode 
from aphdr a 
join aplin b 
    on a.vouchernumber = b.vouchernumber
left join apvend v 
    on a.vendorkey = v.vendorkey
where a.recdate between '2011-01-01' and '2012-10-02' 
    and cast(Substring(Acct,11, 4 ) as varchar(4)) like 'VIR'
    and left(a.vouchernumber,1) <> 'G'
    and Company = 'ASSFD'
) tbl1 
```

# datetime - 如何使用 vbscript 创建 XML 的 dateTime 格式？

> ID：12732951
> 
> 赞同：0
> 
> 时间：2012-10-04T17:54:25.660
> 
> 标签：datetime, vbscript

我需要按以下格式创建提取日期和时间。

```
extractDate='2011-10-18T12:00:00.000000' 
```

最好的方法是什么，使用 vbscript / asp3 来做到这一点？我只是在考虑对 .000000 的结尾部分进行硬编码，因为这不是赛马哈哈

谢谢。

到目前为止，我从类似的东西开始；

```
xmlDateTime = FormatDateTime(Now(),0)
xmlDateTime = Replace(xmlDateTime, " PM", "")
xmlDateTime = Replace(xmlDateTime, " AM", "")
Response.Write xmlDateTime & "<br>" 
```

更新：

我的潜在解决方案：

```
xmlDateTime = FormatDateTime(Now(),0)
xmlDateTime = Replace(xmlDateTime, " PM", "")
xmlDateTime = Replace(xmlDateTime, " AM", "")
Response.Write xmlDateTime & "<br>"
splitDateTime = Split(xmlDateTime, " ")

xmlDate = splitDateTime(0)
xmlTime = splitDateTime(1)

strYear = DatePart("yyyy",xmlDate)
strMonth = DatePart("m",xmlDate)
strDay = DatePart("d",xmlDate)

Response.Write strYear & "<br>"
Response.Write strMonth & "<br>"
Response.Write strDay & "<br>"

xmlDateTime = strYear & "-" & strMonth & "-" & strDay & "T" & xmlTime & ".000000"
Response.write xmlDateTime & "<br>" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T18:09:59.143

您需要手动构建日期字符串。

```
Function dd(str)
  dd = Right("0" & str, 2)
End Function

d = Now
extractDate = Year(d) & "-" & dd(Month(d)) & "-" & dd(Day(d)) & "T" _
  & dd(Hour(d)) & ":" & dd(Minute(d)) & ":" & dd(Second(d)) & ".000000" 
```

# php - PHP 登录表单有时会从密码中转义特殊字符

> ID：12732955
> 
> 赞同：0
> 
> 时间：2012-10-04T17:54:30.813
> 
> 标签：php, forms, login, escaping

所以我的问题有点奇怪，不知道怎么解释清楚。

我目前正在测试我的网站，每个页面顶部都有一个登录表单，所有这些都由模板处理，因此每个登录表单的代码都是相同的。我有不同级别的文件，我的根目录看起来像这样：

```
/index.php
/photos.php
/videos.php
/users/login.php
/users/register.php
/users/forgot-password.php 
```

我当前使用的密码中包含一个`"`。这一切都在服务器的根目录（index.php、video.php、photo.php）上运行良好，但由于某种原因，一旦我进入文件（/users/login.php、/users/register.php）我无法登录我的帐户。我发现如果我像这样逃脱我的密码，`\"`它就可以工作。

我什至将文件 index.php 复制到用户文件夹中，也存在同样的问题。

这是我生成密码哈希的函数：

```
function generateHash($plainText, $salt = null)
{
    global $db;

    $plainText = trim($db->sql_escape($plainText));

    if ($salt === null)
    {
        $salt = substr(md5(uniqid(rand(), true)), 0, 25);
    }
    else
    {
        $salt = trim($salt);
        $salt = substr($salt, 0, 25);
    }

    return $salt . sha1($salt . $plainText);
} 
```

现在我真的迷路了，我不知道该怎么做，所以我希望你能帮助我并找到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:03:19.877

您可能会体验到曾经激活的magic_quotes_gpc 设置的影响，该设置已被不当禁用，例如魔术引号处于活动状态，但另外带有密码的INSERT 也是mysql 转义的。如果稍后禁用魔术引号，则不会将额外的反斜杠添加到密码中。

很难说如何修复它。一个好的方法可能是首先实际尝试纯密码，但如果失败，请使用“addslashes($password)”再次尝试。

由于您只存储散列密码，因此无法修复原始密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:59:18.570

SQL 没有理由转义任何东西，除非它被直接插入到查询中。因此，该`sql_escape`电话是您问题的根源。

需要注意的是，使用 MD5 散列实际上等同于使用纯文本密码，因为盐渍的破解时间是如此之低以至于难以测量。

# java - java.sql.SQLException：此驱动程序不支持 SQL Server 版本 8。SQL 状态 = 08S01，错误代码 = 0

> ID：12732957
> 
> 赞同：5
> 
> 时间：2012-10-04T17:54:39.627
> 
> 标签：java, sql-server-2008, websphere-7

我已将我的应用程序升级到用于`Websphere 7.0`此应用程序的应用程序。当我使用连接到数据库进行身份验证时出现以下错误。`Websphere 6.1.``Microsoft SQL server jdbc driver 4.0``sqljdbc4.jar`

```
 SystemError java.sql.SQLException: SQL Server version 8 is not supported by this driver. SQL State = 08S01, Error Code = 0 
```

如何摆脱这个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T17:59:13.303

是的，根据[Microsoft SQL Server JDBC 类型 4.0 驱动程序系统要求页面](http://msdn.microsoft.com/en-us/library/ms378422.aspx)：

> JDBC 驱动程序支持连接到 SQL Azure 数据库和 SQL Server 2005 及更高版本。

听起来您正在运行 SQL Server 2000。

要么更改驱动程序（例如到[jTDS](http://jtds.sourceforge.net/)）或升级到 SQL Server 的更新版本（这可能是一个相当大的任务......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-14T11:06:53.053

你不需要改变你的驱动程序，只需要你的 url 连接。尝试这个：

```
String url = "jdbc:sqlserver://"+SERVER+":"+PORT+";databaseName="+DATABASE+ ";user=" +USER+ ";password=" +PASS+ ";"; 
```

为。。改变

```
String url ="jdbc:jtds:sqlserver://"+SERVER+":"+PORT+";databaseName="+DATABASE+ ";user=" +USER+ ";password=" +PASS+ ";"; 
```

# repository-pattern - 使用 ServiceStack.ORMLite 构建存储库

> ID：12732958
> 
> 赞同：2
> 
> 时间：2012-10-04T17:54:40.157
> 
> 标签：repository-pattern, servicestack, ormlite-servicestack

我正在使用 servicestack，并且我计划将 ormlite 用于数据访问层。我有这些表（SQL Server 2005）

```
Table ITEM
ID PK
...

Table SUBITEM1
ID PK FK -> ITEM(ID)
...

Table SUBITEM2
ID PK FK -> ITEM(ID)
...

Table POST
ID PK
...

Table COMMENT
ID PK
...

Table DOWNLOAD
ID PK
...

Table POST_COMMENT
ID PK
POST_ID FK -> POST(ID)
COMMENT_ID FK -> COMMENT(ID)

Table DOWNLOAD_COMMENT
ID PK
DOWNLOAD_ID FK -> DOWNLOAD(ID)
COMMENT_ID FK -> COMMENT(ID) 
```

我为每个表创建了一个类，并使用注释（自动增量、引用等）映射它们。

我决定为每个“实体”（项目、帖子、评论、下载）创建一个存储库。每个存储库都包含基本的 CRUD 逻辑，

例如。1 CommentRepository 有一个 Save(Comment comment, Object relationship)，它执行 db.Insert(comment, relationship)，其中关系是 PostComment 或 DownloadComment。

例如。2 PostRepository 有一个 Save(Post p) 执行插入到 POST 中。

我不确定这个解决方案，因为存储库接口不同，我不能进行多态查询。

你能提供任何建议来改善我的 DAL 吗？

感谢您的关注。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T18:28:19.417

我不喜欢强制人工抽象，所以我不喜欢从每个实体的存储库开始，因为它只会导致不必要的代码膨胀。我喜欢从只为所有实体封装所有数据访问的 1 个存储库开始，并在它变得太大时自然地重构。

我对您的域了解得不够多，不知道最好的 RDBMS 布局是什么，但我也想尽可能避免创建不必要的表，并且会寻找 blob 非聚合根数据，例如，如果 SubItem 只能应用而不是在其父项的上下文之外有意义，那么我只需将它保存几个表，例如：

```
class Item {
   int Id; //PK, AutoIncr
   List<SubItem> SubItem;
} 
```

而不是单独的 Many : Many 表，我只会在单个 Comment 表上维护它，例如：

```
class Comment {
    int Id; //PK, AutoIncr
    string CommentType; //i.e. Post or Download
    int RefId;
    string Comment;
} 
```

因此，我的存储库将模仿完成 Web 请求所需的数据访问模式，例如：

```
class BlogRepository {
    void AddCommentToPost(int postId, Comment comment);
    void AddCommentToDownload(int downloadId, Comment comment);
} 
```

# cocoa - 在可可中声明静态变量

> ID：12732959
> 
> 赞同：3
> 
> 时间：2012-10-04T17:54:41.120
> 
> 标签：cocoa, class, variables, static

我想在 Cocoa 中有一个静态变量。

在查看了[如何在 Objective-C 中声明类级属性？](https://stackoverflow.com/questions/695980/how-do-i-declare-class-level-properties-in-objective-c)，我不清楚我迄今为止一直在做的事情是否有问题，即

```
// Foo.m
static NSString* id;
@interface Foo () 
```

代替

```
// Foo.h
@interface Foo {
}

+(NSString*) id;

// Foo.m
+(NSString*) id
{
  static NSString* fooId = nil;

  if (fooId == nil)
  {
    // create id
  }

  return fooId;
} 
```

显然，第二种方法提供了初始化 id 的机会。但是，如果我在代码中的其他地方自己初始化 id，在里面，比如说一个 getter：

```
-(NSString*) getId
{
    if (id==nil) {
      id =  ... // init goes here
    }
    return id;
} 
```

那么与更复杂的类函数方法相比，简单的静态声明方法有什么问题吗？我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T01:43:25.233

首先，你要求的是一个全局变量，一个静态的类似但有点不同......

将`static`声明放在头 () 文件中的任何内容之外，`@interface`将在您包含头文件的每个实现 ( ) 文件中`.h`创建*不同*`.m`的变量——在这种情况下，这不是您想要的。

因此`static`，在声明中创建一个变量，其*生命周期*是整个应用程序执行的生命周期，但仅在它出现的编译单元（例如实现文件）中*可见*- 直接或通过包含。

要创建一个在任何地方都可见的全局变量，您需要`extern`在标题中使用：

```
extern NSString *id; 
```

并在您的实现中重复声明而不使用`extern`：

```
NSString *id; 
```

至于全局变量与类方法有什么问题，这是程序设计和可维护性的问题。这里只是需要考虑的几点：

*   使用方法时，除非您提供 setter 方法和 getter 方法，否则无法更改值。变量始终是可读写的。
*   命名空间污染：类方法只有与类名（ ）配对时才有效`[YourClass id]`；变量名在任何包含它的地方都是有效的`id`；这既污染了名称空间，又失去了和之间的联系`id`——`YourClass`这导致我们......
*   封装：全局变量打破了强封装，封装有助于程序设计和维护——这是一个很大的话题。

也就是说，全球人可能有时间和地点，有时......

**问题更新后**

在实现中声明的`static`变量实际上是一个“类变量”——一个由类的所有实例共享的变量。

类变量与 setter 和 getter 类方法的优缺点与实例变量与属性和 setter/getter 实例方法的优缺点完全相同。

类 setter/getter 允许在每次读/写时执行验证和其他逻辑；和内存管理的本地化——简而言之，任何方法的抽象和封装优势。

因此，您使用变量还是 setter/getter 取决于您的应用程序。这与您使用实例变量还是 setter/getter/property 是同一个问题。

# c# - System.Data.sqlClient 只会在服务器上创建默认数据库

> ID：12732966
> 
> 赞同：3
> 
> 时间：2012-10-04T17:55:23.533
> 
> 标签：c#, sql, sql-server

背景：

我正在使用 sql 语句在服务器上创建一个临时数据库，该数据库将存储数据，直到我的客户端程序进一步需要它为止。

问题：

我创建数据库的 sql 语句正常工作，并在通过 Sql Management Studio 运行时创建具有所有必需规范的数据库，另一方面，当我的程序执行该语句时，它只创建一个具有“默认”设置的数据库，但名称除外.

问题：

1.  为什么是这样？
2.  我怎样才能让它根据我的规范创建一个数据库

sql语句：

> 在 PRIMARY 上创建数据库温度（名称 = Temp，文件名 = 'C:\Temp.mdf'，大小 = 2MB，文件增长 = 10%）登录（名称 = Temp_Log，文件名 = 'C:\Temp.ldf'，大小 = 1MB，MAXSIZE = 70MB，文件增长 = 10%)

代码：

```
public void AcuConvert()
        {
            using (DestD)
            {
                SqlCommand command = new SqlCommand();
                DestD.Open();
                command.Connection = DestD;
                foreach (var item in Entity.SqlDestinationQueries.ToList())
                {
                    command.CommandText = item.Query; 
                    command.ExecuteNonQuery();    //This is where the command is run
                }
                foreach (var item in Entity.SystemQueries.ToList())
                {
                    command.CommandText = item.Query.Replace("@Sys", SysD.Database);
                    command.ExecuteNonQuery();
                }
                foreach (var item in Entity.InsertQueries.ToList())
                {
                    command.CommandText = item.Query.Replace("@Source", SourceD.Database); ;
                    command.ExecuteNonQuery();
                }

            }
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T21:06:01.163

您是否尝试过使用[SQL Server 管理对象](http://msdn.microsoft.com/en-us/library/ms212724%28v=sql.110%29.aspx)而不是原始 SQL 语句？

例如：

```
using Microsoft.SqlServer.Management.Smo;
using Microsoft.SqlServer.Management.Common;

...

// Connect to the default instance
Server server = new Server();
// Establish new database details
Database database = new Database(server, "MyTempDB");
// Add primary filegroup details
database.FileGroups.Add(new FileGroup(database, "PRIMARY"));

// Set Primary datafile properties
DataFile primaryFile = new DataFile(database.FileGroups["PRIMARY"],
    "MyTempDB_Data", "C:\\MyTempDB.mdf");
primaryFile.Size = 2048;   // Sizes are in KB
primaryFile.GrowthType = FileGrowthType.Percent;
primaryFile.Growth = 10;
// Add to the Primary filegroup
database.FileGroups["PRIMARY"].Files.Add(primaryFile);

// Define the log file
LogFile logfile = new LogFile(database, "MyTempDB_Log", "C:\\MyTempDB_Log.ldf");
logfile.Size = 1024;
logfile.GrowthType = FileGrowthType.Percent;
logfile.Growth = 10;
logfile.MaxSize = 70 * 1024;
// Add to the database
database.LogFiles.Add(logfile);

// Create
database.Create();
database.Refresh(); 
```

当然，您也可以使用特定凭据连接到服务器：

[http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.server.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.server.aspx)

If, however, you're stuck with using text scripts to create your database, I'd ensure that your Initial Catalog is set correctly (i.e. to 'master') in your connection string and your user has the necessary permissions - CREATE DATABASE / CREATE ANY DATABASE / ALTER DATABASE. If this still doesn't give you any joy, try stripping out the rest of your C# code and run the create SQL independently of the other statements - it could be that there's a side-effect from a preceding query. Use [Profiler](http://msdn.microsoft.com/en-us/library/ms181091.aspx) to see exactly what's running as you add them back in.

**Edit:**

I tested your script against a local SQL Server instance (2012 SqlLocalDB) via a small C# program using SqlClient and it ran just fine after changing the file paths to ones I had write access to (root of C is protected by default). The only other amendment was that the Primary size had to start at 3MB or more. Any smaller and the default tables could not be created. This may be another avenue of investigation for you to explore.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:51:04.363

Your alternative option could be to use the Process class to run the sqlcmd.exe Eg. var process = Process.Start(WORKING_PATH, argument);

%WORKING_PATH% being "C:\tools\sql\sqlcmd.exe"

%argument% being "C:\scripts\Create.sql"

I use this strategy to dump test data into test environments when bootstrapping acceptance test fixtures.

Cheers

# asp.net - 在 asp.net 中显示深层分层数据

> ID：12732972
> 
> 赞同：0
> 
> 时间：2012-10-04T17:56:03.800
> 
> 标签：asp.net, hierarchy

在 ASP.NET 中显示大量分层数据的最佳方法是什么？浏览器需要大量时间来重新渲染内容，并且回发会很大。有没有可用的轻量级组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:46:53.337

您可能要考虑在初始页面加载时仅显示前两个或三个级别。当用户想要展开一个节点时，您可以使用 AJAX 仅检索该节点子节点的额外数据。

如果你不需要回发的特性，即：如果这只是显示，那么你可以关闭视图状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:47:54.640

1 你可以试试`TreeView Jquery`组件

链接：http : [//archive.plugins.jquery.com/project/treeview](http://archive.plugins.jquery.com/project/treeview)

2 你可以试试`TreeView control`

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.treeview.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.treeview.aspx)

样本

![在此处输入图像描述](../Images/379a298b348e2b42bfee2e038463e3d2.png)

注意：为了优化您的响应，您将关联`UpdatePanel`到您的控件

# java - Java Applet 不使用 jaybird 执行 class.forName()

> ID：12732973
> 
> 赞同：0
> 
> 时间：2012-10-04T17:56:04.173
> 
> 标签：java, browser, applet, jaybird

我在 Eclipse 中开发了一个小程序，当从 Eclipse 的 AppletViewer 执行时，它可以正常工作，但是从 .html 文件执行时，它不执行 class.forName() 方法。

这里是.html

```
<!DOCTYPE html>
<html>
<body>

<p>Tarjetero.</p>

<applet 
codebase="classes"
code="ap.class"
width=234 height=274
archive="jaybird-full-2.2.0.jar">
</applet>

</body>
</html> 
```

在同一个文件夹中，我拥有所有创建的 .class 和 jaybird .jar 存档

这里是java文件

ap.java

```
import javax.swing.JApplet;

public class ap extends JApplet {

/**
 * 
 */
private static final long serialVersionUID = 1L;

ui inter = new ui();

@Override
public void init() {
    // TODO Auto-generated method stub
    //JPanel p = new JPanel();
    //p.add(new JLabel("prueba"));
    inter.setVisible(true);
    this.add(inter);
}

@Override
public void start() {
    // TODO Auto-generated method stub
    super.start();
}

} 
```

ui.java

```
import javax.swing.JPanel;

public class ui extends JPanel {

static JButton btnNewButton;
/**
 * 
 */
private static final long serialVersionUID = 1L;

/**
 * Create the panel.
 */
public ui() {
    setLayout(null);

     btnNewButton = new JButton("New button");

    btnNewButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            try {
                btnNewButton.setText("1");
            ConexFirebird cf = new ConexFirebird();
            btnNewButton.setText("2");
            ResultSet rs = cf.EjecutarSentencia("SELECT nombre FROM CLIENTES;");
            btnNewButton.setText("3");

                if(rs.next())
                {
                    btnNewButton.setText("datos");
                }
                else
                {
                    btnNewButton.setText("nodatos");
                }
            } catch (Exception e) {
                // TODO Auto-generated catch block
                btnNewButton.setText(e.getMessage());
                e.printStackTrace();
            }

        }
    });
    btnNewButton.setBounds(12, 12, 117, 24);
    add(btnNewButton);

    JRadioButton rdbtnNewRadioButton = new JRadioButton("New radio button");
    rdbtnNewRadioButton.setBounds(8, 44, 149, 22);
    add(rdbtnNewRadioButton);

    JCheckBox chckbxNewCheckBox = new JCheckBox("New check box");
    chckbxNewCheckBox.setBounds(18, 70, 129, 22);
    add(chckbxNewCheckBox);

}
} 
```

conexFirebird.java

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.sql.*;
import javax.swing.JOptionPane;

/**
*
* @author Jose
*/
public class ConexFirebird {
// static File directorio= new File("//");
//static String DireccionBD="jdbc:firebirdsql:192.168.47.254/3050:/BBDD/ArenasTiradoJoseMTarjetero.fdb";
static String DireccionBD="jdbc:firebirdsql:localhost/3050:/var/lib/firebird/2.5/data/tarjetavisitas.fdb";
static String Usuario="sysdba";
//static String Contrasena="persiza";
String Contrasena="masterkey";

static String NombreDriver="org.firebirdsql.jdbc.FBDriver";

static Connection Conexion;
static Statement Consulta;
static ResultSet Resultado;

public ConexFirebird()
{
        try
    {

            ui.btnNewButton.setText("10");
       Class.forName(NombreDriver) ;
       ui.btnNewButton.setText("11");
       Conexion = DriverManager.getConnection(DireccionBD, Usuario, Contrasena);           
       ui.btnNewButton.setText("12");
       Consulta = Conexion.createStatement();
       ui.btnNewButton.setText("13");

    }
    catch (ClassNotFoundException e) {
        // TODO: handle exception
        ui.btnNewButton.setText("classNfound");
    }
    catch(Exception e)
    {
        ui.btnNewButton.setText("23");
        JOptionPane.showMessageDialog(null, e.getMessage());

    }
}

public void EjecutarInsert(String Sentencia)
{
    try {
        Consulta.execute(Sentencia);
        JOptionPane.showMessageDialog(null, "Guardado correctamente", "Guardado", JOptionPane.INFORMATION_MESSAGE);
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        JOptionPane.showMessageDialog(null, "Ese DNI ya se encuentra en la base de datos", "Error", JOptionPane.INFORMATION_MESSAGE);
    }
}

public ResultSet EjecutarSentencia(String Sentencia)
{
    try
    {
    Resultado = Consulta.executeQuery(Sentencia);
    }
    catch(Exception e)
    {
        JOptionPane.showMessageDialog(null, e.getMessage()+"ejecutar sentencia");
    }

    return Resultado;
}

public void EjecutarUpdate(String Sentencia) throws SQLException
{
   try
    {
    Consulta.executeUpdate(Sentencia);

    }
    catch(SQLException e)
    {

        //JOptionPane.showMessageDialog(null, e.getMessage());
        throw new SQLException("");

    } 
}

public void CerrarConexion()
{
    try
    {
    Consulta.close();
    }
    catch(Exception e)
    {

    }
}

public void insertarConBlob(String nombre, String dni, String correo, File fD, File fA)
{
    try {
        PreparedStatement ps;
        if(fD != null && fA != null)
        {
            ps = Conexion.prepareStatement("INSERT INTO CLIENTES (ID, NOMBRE, DNI, CORREO, FOTODELANTE, FOTODETRAS ) VALUES ( gen_id(id_clientes, 1), '"+nombre+"', '"+dni+"', '"+correo+"', ?, ?)");
            try{
            ps.setBlob(1, new FileInputStream(fD));
            ps.setBlob(2, new FileInputStream(fA));
            ps.execute();
            JOptionPane.showMessageDialog(null, "Guardado correctamente", "Guardado", JOptionPane.INFORMATION_MESSAGE);
            }
            catch(FileNotFoundException e)
            {
                JOptionPane.showMessageDialog(null, "No se encontro el archivo", "Error", JOptionPane.INFORMATION_MESSAGE);
            }
            catch(SQLException e)
            {
                JOptionPane.showMessageDialog(null, "Ese DNI ya se encuentra en la base de datos", "Error", JOptionPane.INFORMATION_MESSAGE);
            }
        }
        else if (fD != null)
        {
            ps = Conexion.prepareStatement("INSERT INTO CLIENTES (NOMBRE, DNI, CORREO, FOTODELANTE) VALUES ( '"+nombre+"', '"+dni+"', '"+correo+"', ?)");
            try{
            ps.setBlob(1, new FileInputStream(fD));
            ps.execute();
            }
            catch(FileNotFoundException e)
            {
                JOptionPane.showMessageDialog(null, "No se encontro el archivo", "Error", JOptionPane.INFORMATION_MESSAGE);
            }
        }
        else if (fA != null)
        {
            ps = Conexion.prepareStatement("INSERT INTO CLIENTES (NOMBRE, DNI, CORREO, FOTODETRAS) VALUES ( '"+nombre+"', '"+dni+"', '"+correo+"', ?)");
            try{
            ps.setBlob(1, new FileInputStream(fA));
            ps.execute();
            }
            catch(FileNotFoundException e)
            {
                JOptionPane.showMessageDialog(null, "No se encontro el archivo", "Error", JOptionPane.INFORMATION_MESSAGE);
            }
        }

    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

} 
```

我知道所有这些 java 文件都可以改进。我必须使用更改按钮标签进行调试，因为我无法在 iceweasel 中找到控制台

操作系统：Debian 浏览器：Iceweasel java jdk 1.6 jaybird 2.2.0

在此先感谢，您只需要回答问题就可以了！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:04:30.463

Jaybird 在设计时并未考虑到 Applets，据我所知，它会生成错误（在浏览器中运行时），因为它会尝试读取系统属性。它将在 AppletViewer 中工作，因为 - afaik - 以所有权限运行。

也可以看看：

*   [http://tracker.firebirdsql.org/browse/JDBC-254](http://tracker.firebirdsql.org/browse/JDBC-254)
*   [带有 jdbc 小程序的 NoClassDefFoundError](https://stackoverflow.com/q/10673119/466862)

还要确保`jaybird-2.2.1.jar`与`connector-api-1.5.jar`, or `jaybird-full-2.2.1.jar`（包含来自 connector-api 的类）结合使用，因为没有它驱动程序将无法工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T19:30:19.423

*   [如何为小程序启用控制台](http://www.java.com/en/download/help/javaconsole.xml)

*   如果你有`access denied`你的跟踪，这意味着你应该[签署](http://docs.oracle.com/javase/1.5.0/docs/guide/plugin/developer_guide/rsa_signing.html)你的小程序

你的起始代码应该是这样的

```
<APPLET 
    codebase="classes" 
    code="ap.class" 
    width=234 height=274 
    archive="jaybird-full-2.2.0.jar">
</APPLET> 
```

# jquery - 将 jQuery UI Slider 附加到 DIV 的一侧（作为 DIV 的滚动条）

> ID：12732974
> 
> 赞同：0
> 
> 时间：2012-10-04T17:56:05.400
> 
> 标签：jquery, css, scrollbar, jquery-ui-slider

有没有一种简单的方法可以将 UI Slider 附加到 div 的一侧以充当其滚动条？我不在乎它在技术上是在 div 的一侧还是在技术上。我只需要 UI Slider 看起来像 div 的滚动条。

这将是一个假滚动条，因为 div 的内容将是动态的，所以我不能走 jScrollPane 路线。根据 UI 滑块中的值填充内容。

我陷入了 CSS 地狱，想知道是否有几行解决方案。

提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T19:44:22.137

你的意思是这样的吗？ [http://jsfiddle.net/vooboo13/6TGXj/3/](http://jsfiddle.net/vooboo13/6TGXj/3/)

HTML：

```
<div id="container">
<div id="box">
    <p>asdf</p>

</div>
<div id="vertical-slider"></div> 
```

Javascript：

```
$(function() {
    $( "#vertical-slider" ).slider({
        orientation: "vertical",
        range: "min",
        min: 0,
        max: 100,
        value: 60,
        slide: function( event, ui ) {
            $( "#amount" ).val( ui.value );
        }
    });
    $( "#amount" ).val( $( "#slider-vertical" ).slider( "value" ) );
}); 
```

CSS：

```
#container{
  float: left;         
  border: 1px solid #000;  
}

#box{
  float: left;
  width: 200px;
  height: 200px;    
}

#vertical-slider{
  float: right;
  height: 200px;    
} 
```

# android - 双向发送/确认 Android Beam

> ID：12732975
> 
> 赞同：0
> 
> 时间：2012-10-04T17:56:12.020
> 
> 标签：android, nfc, nfc-p2p, android-beam

我正在使用 2 Galaxy S3，我从一个发送消息到另一个。我希望对方发回类似“received msg”之类的响应，我正在使用 android Beam 演示，并且我想添加这个 ack。当我用简单的“sendNdefMessage”处理 ProcessIntent 中的第一条消息时，我发送 ack 消息? 我如何管理在其他设备中收到的 ack？

```
void processIntent(Intent intent) {
    Parcelable[] rawMsgs = intent.getParcelableArrayExtra(
            NfcAdapter.EXTRA_NDEF_MESSAGES);
    // only one message sent during the beam
    NdefMessage msg = (NdefMessage) rawMsgs[0];
    // record 0 contains the MIME type, record 1 is the AAR, if present
    mInfoText.setText(new String(msg.getRecords()[0].getPayload()));

    //ack message
    mNfcAdapter.setNdefPushMessageCallback(ackMsg, this);
} 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:27:48.453

很遗憾，您无法发回消息。但是，发送消息的设备知道何时成功接收。您可以通过注册回调来通知您的应用[`NfcAdapter.OnNdefPushCompleteCallback()`](http://developer.android.com/reference/android/nfc/NfcAdapter.html#setOnNdefPushCompleteCallback%28android.nfc.NfcAdapter.OnNdefPushCompleteCallback,%20android.app.Activity,%20android.app.Activity...%29)

# ruby - Ruby，define_method，单例，继承

> ID：12732978
> 
> 赞同：0
> 
> 时间：2012-10-04T17:56:19.840
> 
> 标签：ruby, singleton, metaprogramming

我有一个单例类

```
module Database
  class Table
    include Singleton
    # ...
  end
end 
```

在这个类中，我在一个方法中使用`define_method`-method 并得到：

```
/home/jrn/Development/RocketRuby/lib/modules/database.rb:184:in `block in register_methods': undefined method `define_method' for #<Accounting::UsersTable:0x00000001f103c8> (NoMethodError) 
```

（如您所见，该 Class`Table`已被`UsersTable`Module 中调用的 Class 继承`Accounting`）

可能出了什么问题？`define_methods`使用and时的典型错误是什么`Singleton`？

你的，乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:18:09.943

你有没有尝试过这样的事情？

```
class Table
  include Singleton

  def register_methods
    self.class.send(:define_method, :hello) { puts "Hello!" }
  end

  # or ...

  def register_methods
    define_singleton_method(:hello) { puts "Hello!" }
  end 
```

# visual-studio-2010 - 在 Windows 8 上以 VS2010 中的 .NET 4.5 为目标

> ID：12732979
> 
> 赞同：0
> 
> 时间：2012-10-04T17:56:26.903
> 
> 标签：visual-studio-2010, windows-8, visual-studio-2012, .net-4.5

我想在新的 Widows 8 安装上的 VS2010 项目中定位 .NET 4.5。我没有选择目标 4.5。在 VS2012 中，我得到了该选项以及 .NET 4。这是我应该能够做到的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:58:56.840

正如您无法在 2008 年创建 .NET 4.0 项目一样，您也无法在 VS 2010 中以 .NET 4.5 为目标。IDE 不支持它。

语言兼容性是向后的，而不是向前的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:17:34.793

您不能使用 Visual Studio 2010 以 .NET 4.5 为目标，因为用于编译您的应用程序的参考程序集都是 .NET 4.0。但是，.NET 4.5 是对 .NET 4.0 的就地升级，因此在运行时您实际上会使用 .NET 4.5 程序集，您将无法对一些较新的 C# 功能（如 async/await）进行编程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T18:02:38.017

Visual Studio 中的多目标功能用于针对以前发布的 .NET Framework 版本（2.0 及更高版本）及其服务包。您不能使用以前发布的 Visual Studio IDE 来定位未来版本的 .NET Framework。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T17:59:07.003

不，就像您不能使用 VS 2008 来定位 .NET 4 一样...

# algorithm - 设计存储算法

> ID：12732982
> 
> 赞同：5
> 
> 时间：2012-10-04T17:56:29.517
> 
> 标签：algorithm, optimization

这是一个面试饼干的问题-

> 假设您以恒定的速率从仪器接收样本，并且您拥有恒定的存储空间，那么您将如何**设计一种存储算法，让我无论何时查看数据都能获得具有代表性的数据读数**？换句话说，代表系统迄今为止的行为。

我对此一无所知。所以，我正在寻找想法。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-04T18:29:34.470

假设您有存储`k`元素的内存。将内存中的第一个`k`元素存储在数组中。现在，当您收到第 n 个元素（其中`n > k`）时，生成一个`r`介于`1`和之间的随机数`n`。如果`r > k`丢弃第`n`^(th 个)元素。否则将数组中的第`r`^(th元素替换为第)`n`^(th)元素。

这种方法将确保在任何阶段您的数组都将包含`k`从迄今为止收到的输入元素中统一随机选择的元素。

**证明**我们可以通过归纳证明`k`，任何阶段的代表元素都是均匀随机分布的。假设在接收到`n-1`元素后，任何元素都以概率 出现在数组中`k/(n-1)`。

接收到第 n 个元素后，该元素被插入数组的概率 = `k/n`.

对于任何其他元素，它在当前迭代中被表示的概率=它在上一次迭代中被表示的概率*它在当前迭代中未被替换的概率

```
= (k/(n-1)) * (n-1)/n = k/n. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T23:10:12.217

首先，信用属于它的地方。我将详细说明而不是替换 krjampani 的方法：非常好和清晰。

有一个 - 但不是那么次要的 - 点需要调查，从那里我们将找到一个相关的，有点隐藏的问题点。

首先让我们注意，我们可以重新制定结果，从另一个角度看待它，如果你愿意的话，对于任何给定的时间段，从零到那个时间的时间间隔的点（数据）是（假设：假设是）均匀分布在区间 [1-n] 上，由此得出（所述结果）它们在固定区间 [1-k] 中的相对计数应该是 k/n，可能是具有代表性的最佳方式.

我们应该意识到，所有这些都是“统计的”：我们生成随机点来控制存储中较旧的数据被较新的数据替换。因此，所述结果不是精确结果，而是（统计上的）“预期值”。

然而，统计上的“期望值”当然很少是我们实际得到的：它只是概念上无数次再次尝试相同事物的平均值。来自某个“时间段”的数据在区间 [1-n] 上的实际分布以及它们在 [1-k] 中的相对计数的相关派生值是否可能接近（完美）在这种情况下，期望值取决于我们生成随机数（1 到 n 之间）的方式。如果这真的是随机的，我们将进行蒙特卡洛类型的抽样，从而产生高斯类型的结果分布，即如果我们一遍又一遍地做同样的事情，那么实际的点分布，围绕均匀分布我们的目标是。作为推论，直到我们有非常多的点，

稍加思考就会很明显，在每次添加之后，没有办法总是拥有。完美的均匀分布，无论我们如何决定用新点替换旧点。因此，我们的目标必须是尽可能地增加预期偏差。

重新表述的问题是：给定一个间隔，您需要在该间隔上放置更多无限制的点，以便它们的分布始终“尽可能接近”均匀。这样做的方法是，对每个点相对于前一个点采用固定的“步长”，其中步长相对于间隔长度 - 并且最好是两个大的素数 - 间隔长度。小数字示例：间隔为 11（在某些单位中：“真实”值很可能是实数，而不是整数），步长取 5；这些步骤是 (k*5)mod11: 0, 5, 10, 4, 9, 3, 8, .. 在我们的例子中，我们有额外的复杂性，即间隔的长度正在变化。例如，我们可能需要调整点生成（I' m不确定）通过安排将任何新点放置在原始参数（大小，步长）固定的位置，然后将其位置按实际间隔长度按比例放大：间隔再次11，每次增加1 , 步长 = 5; 点数：0、5*(12/11)、10*(13/11) 等。在我们的例子中，需要整数“槽”来替换（或不替换）存储值，我们将不得不四舍五入到最接近的整数（并且该四舍五入对统计数据的影响可能会导致对点生成器的进一步调整） . 我这里没什么了，还有一些事情要解决。需要整数“槽”来替换（或不替换）存储值，我们将不得不四舍五入到最接近的整数（并且该四舍五入对统计数据的影响可能会导致对点生成器的进一步调整）。我这里没什么了，还有一些事情要解决。需要整数“槽”来替换（或不替换）存储值，我们将不得不四舍五入到最接近的整数（并且该四舍五入对统计数据的影响可能会导致对点生成器的进一步调整）。我这里没什么了，还有一些事情要解决。

我来到最后一个隐藏的问题：在上述所有内容中，我们默认假设均匀采样 - 在一个区间内平均分配点 - 是获得代表性结果的最佳方式。大概我们可以将“代表性结果”解释为 - 比如说，我们正在查看特定的测量值 - 在特定时间段内其值的公平平均值。想象要测量的值随着时间的推移表现为某个函数，我们实际上是在查看该函数在时间间隔内的积分（除以间隔长度）。现在，除非该函数随时间的变化是完全疯狂的，上下跳跃并做各种花哨的事情——在这种情况下，所有的赌注都被取消了，你也可以做任何随机的事情——有（理论上和实践上）确定的方法来说明你应该如何采样一个（“正常行为”）函数在一个区间内获得其积分的“最佳”近似值。随机（蒙特卡洛）确实很糟糕（与样本点数 N 收敛为 1/sqrt(N)）；均匀采样要好得多（1/N）-在某些特殊情况下非常理想-但两者通常都因在特定多项式的零点采样而相形见绌，其中-除非有病案-您通常将精度提高 0.5 到几个 SIGNIFICANT每增加一个点的数字。

以上述观点，我们面临的原始问题如下：我们如何系统地在一个稳定增加的区间上生成点，使得点在区间上的分布在任何时候都尽可能接近于那些特定的零（取决于您对希望采样的函数的了解，但在没有任何特定信息的情况下：Legendre）在该区间内的多项式（归一化为 [-1:1]）。

那么，我的（理论）方法是使用“恒定步长相对素数间隔”方法，其中 - 除了对间隔增加的事实进行调整外，见上文 - 长度的测量沿着区间，为了“计算”步长，由（Legendre）多项式的零点的分布（函数）加权。

# javascript - geocoder.geocode 异步调用可以同步吗？可以在我的代码中进行哪些更改？

> ID：12732986
> 
> 赞同：1
> 
> 时间：2012-10-04T17:56:52.450
> 
> 标签：javascript, google-maps, google-maps-api-3

我有一个函数可以在 googlemap (v3) 上添加标记，并返回一个与添加标记的结果相关的对象。根据此函数返回的成功值，我需要编写一些逻辑。但是由于 geocoder.geocode 异步执行，我将结果返回为 false，这使我的逻辑失败。有没有办法我可以同步做到这一点？这是我的代码：

```
 addMarkerAtGMap = function (positionParam, gMapObject, colorMarkerObj) {
       if (infoGMapMarkerWin !== undefined && infoGMapMarkerWin.open !== undefined) {
           infoGMapMarkerWin.close();
       }

// Set the success as false by default..here due to async call the success value is incorrectly returned as false 

 returnGMapObject = { success: false, latitude: "0", longitude: "0", gMapObject: gMapObject };     

       geocoder.geocode({ 'address': positionParam }, function (results, status) {
           if (status == google.maps.GeocoderStatus.OK) {
               map.setCenter(results[0].geometry.location);
               gMapObject = new google.maps.Marker({
                   icon: colorMarkerObj.markerImage,
                   shadow: colorMarkerObj.markerShadow,
                   position: results[0].geometry.location
               });
               gMapObject.setMap(map);
               google.maps.event.addListener(gMapObject, "click", function (event) {

                   if (infoGMapMarkerWin !== undefined && infoGMapMarkerWin.open !== undefined) {
                       infoGMapMarkerWin.close();
                   }
                   infoGMapMarkerWin = new google.maps.InfoWindow(
                        { content: positionParam,
                            size: new google.maps.Size(100, 100),
                            position: gMapObject.position
                        });
                   infoGMapMarkerWin.open(map);
               });
               returnGMapObject = { success: true, latitude: results[0].geometry.location.Xa, longitude: results[0].geometry.location.Ya, gMapObject: gMapObject };
           }
       });
       return returnGMapObject;
   }

$("#btnAddLocation").click(function () {
if (!PLVM.isValid()) {
    showMessage(PLVM.errors());
}
else {
    var address = $("#Addressline1").val();
    var colorMarkerObj = $Utils.colorMapMarker("FF8277");       // Add color to marker
    var gMapObject = $Utils.addMarkerAtGMap(address, locMarkerObj, colorMarkerObj);
    if (gMapObject.success == true) { 
// gMapObject.success returned as false due to asynchronous call which fails my logic 
        if (PLVM.Latitude() == gMapObject.latitude && PLVM.Longitude() == gMapObject.longitude) {
            locMarkerObj.setMap(null);
        }
        else {
            PLVM.Latitude(gMapObject.latitude);
            PLVM.Longitude(gMapObject.longitude);
            PartnerDetailsVM.addPL(PLVM);
        }
    }
}
return false;}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:02:20.557

地理编码器是异步的，并出于某种原因提供回调（以在等待服务器响应时释放浏览器以执行其他操作）。构建代码以使用回调例程中的数据（如果可用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T07:16:28.780

这是我为解决我的逻辑更改回调例程所做的工作：

```
$("#btnAddLocation").click(function () {

if (!PLVM.isValid()) {
    showMessage(PLVM.errors());
}
else {
    var address = $("#Addressline1").val();

    var colorMarkerObj = $Utils.colorMapMarker("FF8277");       // Add color to marker

    $Utils.addMarkerAtGMap(address, locMarkerObj, colorMarkerObj, function (gMapObject) {

        if (gMapObject !== undefined && gMapObject.gMapObject !== undefined) {
            locMarkerObj = gMapObject.gMapObject;
        }
        if (gMapObject !== undefined && gMapObject.success) {
            markArr.push(locMarkerObj);
            PLVM.Latitude(gMapObject.latitude);
            PLVM.Longitude(gMapObject.longitude);
            PartnerDetailsVM.addPL(PLVM);
        }

    });
}
return false; 
```

});

# maven - Maven：无法部署工件，访问被拒绝

> ID：12732990
> 
> 赞同：6
> 
> 时间：2012-10-04T17:57:07.567
> 
> 标签：maven, nexus

我有一个 Sonatype Nexus 服务器，我想部署一个快照。

这是我的 settings.xml 文件的片段：

```
<servers>
  <server>
    <id>test-snapshots</id>
    <username>myname1</username>
    <password>mypasswd1</password>
  </server>
  <server>
    <id>test-releases</id>
    <username>myname2</username>
    <password>mypasswd2</password>
  </server>
</servers> 
```

这是我的 pom.xml 文件的片段：

```
<distributionManagement>
  <repository>
    <id>test-releases</id>
    <name>Releases</name>
    <url>https://nxs.company.com/content/repositories/test-releases</url>
  </repository>
  <snapshotRepository>
    <id>test-snapshots</id>
    <name>Snapshots</name>
    <url>https://nxs.company.com/content/repositories/test-snapshots</url>
  </snapshotRepository>
</distributionManagement> 
```

做一个`mvn deploy`（Maven 3.0.3）我得到这个错误：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.5:deploy 
(default-deploy) on project MyProject: Failed to deploy artifacts: 
Could not transfer artifact com.company.project:MyProject:jar:1.0.0-20121003.154427-1 
from/to test-snapshots (https://nxs.company.com/content/repositories/test-snapshots): 
Access denied to: https://nxs.company.com/content/repositories/test-snapshots/
com.company.project/MyProject/1.0.0-SNAPSHOT/MyProject-1.0.0-20121003.154427-1.jar
-> [Help 1] 
```

在我的 Nexus 日志文件中，我看到没有收到任何凭据，所以它稍后会用匿名方式尝试它，这当然会失败。那么为什么没有凭据传递给 Nexus？

```
2012-10-03 17:24:14 DEBUG [1027496148-8353] - org.apache.shiro.session.mgt.DefaultSessionManager - Unable to resolve session ID from SessionKey [org.apache.shiro.web.session.mgt.WebSessionKey@791a17dc].  Returning null to indicate a session could not be found.
2012-10-03 17:24:14 DEBUG [1027496148-8353] - org.sonatype.nexus.security.filter.authc.NexusContentAuthenticationFilter - No authorization found (header or request parameter)
2012-10-03 17:24:14 DEBUG [1027496148-8353] - org.sonatype.nexus.security.filter.authc.NexusContentAuthenticationFilter - No authorization found (header or request parameter)
2012-10-03 17:24:14 DEBUG [1027496148-8353] - org.sonatype.nexus.security.filter.authc.NexusContentAuthenticationFilter - Attempting to authenticate Subject as Anonymous request...
2012-10-04 17:24:14 DEBUG [1027496148-8353] - org.sonatype.security.ldap.realms.DefaultLdapContextFactory - Initializing LDAP context using URL [ldap://10.100.100.1:3268/DC=company,DC=com] and username [ldap@company.com] with pooling [enabled] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:00:04.910

对于 Nexus 中的每个存储库，您真的有不同的用户名/密码吗？这将导致 maven http wagon 出现问题，因为 jvm 缓存每个主机的凭据，即使 maven 正确提供了备用凭据，jvm 也不会使用它们。解决方法是改用 webdav wagon，因为它使用 apache http 客户端而不是 jdk urlclient。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-24T03:27:19.160

我们的 Nexus 服务器有多个帐户。在 windows user_home/.m2/settings 它有：

```
 <server>
        <!-- this id should match the id of the repo server in pom.xml -->
        <id>release-nexus</id>
        <username>aa</username>
        <password>AA</password>
    </server>
    <server>
        <!-- this id should match the id of the repo server in pom.xml -->
        <id>snapshots-nexus</id>
        <username>aa</username>
        <password>AA</password>
    </server> 
```

在项目中：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>some.groupid</groupId>
  <artifactId>some-demo</artifactId>
  <version>1.0.0</version>

  <distributionManagement>
    <repository>
      <id>release-nexus</id>  
      <name>Maven Repository Switchboard</name>  
      <url>http://nexus.foo.net/nexus/content/repositories/aa/</url> 
    </repository>

    <snapshotRepository>
      <id>snapshots-nexus</id>  
      <name>Maven Repository Switchboard</name>  
      <url>http://nexus.foo.net/nexus/content/repositories/aa_snapshot/</url>  
    </snapshotRepository>
  </distributionManagement>
</project> 
```

跑完之后`mvn deploy`

输出是：

[![mvn deploy 成功时的输出](../Images/7ac2bb0f5183a302c94322cf9247c99a.png)](https://i.stack.imgur.com/kNFse.png)

在 settings 中配置的所有`<repository>`s 都与我们在项目 pom 中使用的不同`distributionManagement`。如果我将设置中的内容放入 pom 中，则会导致相同的错误`forbidden`。`aa`当我使用用户名和密码and登录nexus服务器时，我找到了正确的url `AA`，我发现有一个`aa`and `aa_snapshort`。所以我想`PUT`操作权限实际上是在更详细的层面上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-22T12:56:43.670

你需要'settings'元素作为根，
把它放在你的settings.xml文件中：

```
<settings>
    <servers>
        <server>
            <id>test-snapshots</id>
            <username>myname1</username>
            <password>mypasswd1</password>
        </server>
        <server>
            <id>test-releases</id>
            <username>myname2</username>
            <password>mypasswd2</password>
        </server>
    </servers>
</settings> 
```

# php - 跨域安全传输信息

> ID：12732991
> 
> 赞同：0
> 
> 时间：2012-10-04T17:57:12.323
> 
> 标签：php, security, api, ssl, payment-gateway

嗨，伙计们有一个逻辑问题。我有一个客户在 AB 和 C 网站上进行活动注册，他们想开始为注册付款。现在在每个站点上创建一个支付平台有点奇怪，所以我正在考虑处理外部来源上的所有支付，比如站点 D。现在，我需要做的是创建某种 API将接收付款数据并进行相应处理（IE 处理、拒绝、返回消息等）。我最大的担忧是 A. 这个的安全性和 B. 真正区分客户端（站点 AB 和 C.）以及未来大幅扩展的可能性。

只是将这些数据从 SSL 安全站点传输到另一个站点就足够了吗？我应该传递变量吗？多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:47:36.440

在支付的情况下，您最好的选择是找到一个[兼容 PCI](http://en.wikipedia.org/wiki/Payment_Card_Industry_Data_Security_Standard)的支付处理器，它允许您对[卡数据进行标记](http://en.wikipedia.org/wiki/Tokenization_%28data_security%29)。

标记化的最终结果是您不再需要传递敏感数据，而是传递代表卡片的标记。虽然您仍然希望以安全的方式传递此信息，但它对第三方毫无用处，除非他们可以获得您的支付提供商凭据。

如果您选择*不*这样做，那么您将需要自己符合 PCI 标准，这意味着您必须向第 3 方审核员提供您以安全的方式存储此信息，这种方式既昂贵又耗时。

# python - python multiprocessing - 进程终止时运行逻辑

> ID：12732993
> 
> 赞同：1
> 
> 时间：2012-10-04T17:57:20.973
> 
> 标签：python, multiprocessing

使用 Python 多处理时，确保代码在进程退出时运行以进行清理的正确方法是什么（无论是干净还是致命错误。）

如果我将我的进程编写为从`Process`对象继承，我应该将此功能放在`__del__`对象的方法中吗？我尝试将简单的日志语句放入`terminate`中，但当脚本收到 SIGHUP 或`KeyboardInterrupt`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:59:21.380

Python 有[atexit](http://docs.python.org/library/atexit.html)处理程序，根据我的经验，这些处理程序非常可靠。

# c++ - 使用 clang 和 libc++ 中止 boost 单元测试框架

> ID：12732997
> 
> 赞同：2
> 
> 时间：2012-10-04T17:57:29.400
> 
> 标签：c++, unit-testing, boost, clang, libc++

我在用：

SLES 11 x86_64

**Boost 1.51.0**使用以下内容编译：./b2 toolset=clang cxxflags="-stdlib=libc++ -std=c++11" linkflags="-stdlib=libc++"

**来自svn的**clang （大约两个弱者）****

 ****来自 svn 的**libc++ （几乎是最新的）****

 **测试在最后被中止（SIGABORT）：

```
./unitTest
Running 3 test cases...
ModelTest.cpp(28): error in "GameField_added_correctly": check objects.size() == std::size_t{1} failed [0 != 1]
ModelTest.cpp(37): error in "Spaceship_added_correctly": check objects.size() == std::size_t{1} failed [0 != 1]
ModelTest.cpp(52): error in "Spaceship_out_of_GameField_is_demolished_after_tick": check objects.size() == std::size_t{2} failed [0 != 2]
ModelTest.cpp(59): error in "Spaceship_out_of_GameField_is_demolished_after_tick": check objects.size() == std::size_t{1} failed [0 != 1]

Aborted 
```

这是一个非常有趣的回溯：

```
Program received signal SIGABRT, Aborted.
0x00007ffff7183945 in *__GI_raise (sig=<optimized out>) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
64      ../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory.
        in ../nptl/sysdeps/unix/sysv/linux/raise.c
(gdb) bt
#0  0x00007ffff7183945 in *__GI_raise (sig=<optimized out>) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
#1  0x00007ffff7184f21 in *__GI_abort () at abort.c:92
#2  0x00007ffff796020f in std::uncaught_exception () at ../src/exception.cpp:110
#3  0x00007ffff7968784 in std::__1::basic_ostream<char>::sentry::~sentry (this=0x7fffffffcd18) at ../include/ostream:243
#4  0x000000000042a348 in std::__1::basic_ostream<char, std::__1::char_traits<char> >& std::__1::operator<< <std::__1::char_traits<char> >(std::__1::basic_ostream<char, std::__1::char_traits<char> >&, char) ()
#5  0x000000000042b85f in boost::unit_test::results_reporter::make_report(boost::unit_test::report_level, unsigned long) ()
#6  0x0000000000431e22 in boost::unit_test::unit_test_main(boost::unit_test::test_suite* (*)(int, char**), int, char**) ()
#7  0x00007ffff716fbc6 in __libc_start_main (main=0x432110 <main>, argc=1, ubp_av=0x7fffffffced8, init=0x45d380 <__libc_csu_init>, fini=<optimized out>, rtld_fini=<optimized out>, stack_end=0x7fffffffcec8) at libc-start.c:226
#8  0x0000000000405ec9 in _start () at ../sysdeps/x86_64/elf/start.S:113
(gdb) 
```

当它想打印出测试结果时它失败了。当所有测试用例都通过时，也会发生同样的情况。可以看出，在 std::ostream 的销毁过程中不知何故出现了异常。奇怪的是，std::uncaught_exception 不是来自 libc++ 内联命名空间 (__1)。

你们有没有遇到过类似的问题？有什么问题？

更新：libcxx 中可能存在的错误：http://llvm.org/bugs/show_bug.cgi?id= [13669](http://llvm.org/bugs/show_bug.cgi?id=13669)****

# asp.net - ASP.Net MVC 中等效的多个 ITemplate 占位符

> ID：12732998
> 
> 赞同：2
> 
> 时间：2012-10-04T17:57:32.450
> 
> 标签：asp.net, asp.net-mvc, razor, html-helper

我是 ASP.Net MVC 的新手，直到现在一直在使用 Web 表单。我[在 MVC 中找到了 ITemplate 的替代品？](https://stackoverflow.com/questions/2231501/replacement-for-itemplate-in-mvc)它给出了一个创建名为 BeginBlock 的 HTML 帮助程序的示例，该帮助程序包含来自以下位置的标题和内容：

```
@using (Html.BeginBlock("MY TITLE")) {
       MY CONTENT GOES HERE
} 
```

至

```
<div>
  <div><h1>MY TITLE</h1></div>
</div>
MY CONTENT GOES HERE 
```

我有一个场景，在 Web 窗体中，我们曾经使用多个 ITemplate 来定义用户控件中的容器，然后我们将这些容器包装在 HTML 中，例如，在 Web 窗体中，我们可以创建一个名为 Panel 的用户控件并具有两个 ITemplate 属性，一个命名为 Content，另一个命名为 ContentNonScrollable。然后，我们将通过使用以下标记来使用用户控件：

```
<MySite:Panel>
    <Content>
        Content 1 Goes Here
    </Content>
    <ContentNonScrollable>
        Content 2 goes here
    </ContentNonScrollable>
</MySite:Panel> 
```

然后，用户控件将输出以下 HTML：

```
<div class="my-panel">
    <div class="my-panel-content">
        Content 1 Goes Here
    </div>
    <div class="my-scrollable-panel-content">
        Content 2 Goes Here
    </div>
</div> 
```

在 MVC 中是否有任何方法，通过 HTML Helpers（或其他任何东西），我们可以通过 .cshtml 模板文件中的标记设计与上述 Web 表单示例等效的东西？

例如类似的东西（显然，下面的语法不正确，只是为了解释我们的想法）：

```
@using (Html.BeginPanel() {
       {
            Content 1 Goes Here
       }
       {
            Content 2 Goes Here
       }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:04:59.093

您可以为此使用部分。部分专为布局（即母版页）而设计，但您可以嵌套母版页以创建分段区域。

但是，听起来您想将其作为某种类型的控件来执行。另一个选项可能是[Templated Razor Delegates](http://haacked.com/archive/2011/02/27/templated-razor-delegates.aspx)

另一个选项是编辑器/显示模板，尽管这通常不是仅标记。您将使用变量来传递内容。

另一种选择是仅使用部分视图，并使用 ViewData 传递上下文部分。

实际上有很多不同的方法可以解决这个问题，您选择哪种方式取决于您的需求。你能解释一下具体情况吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:28:35.817

感谢@mystere，他引导我使用模板化委托和部分视图，这些视图采用带有接受带有html标记的字符串的变量的模型，我找到了以下解决方法，这与我在上述场景中的想法非常等效。

创建一个名为的局部视图并将`_PanelPartial.cshtml`模型设置为`_PanelPartialModel`包含以下属性的类型：

```
public class _PanelPartialModel
{
    public Func<dynamic, HelperResult> Content { get; set; }
    public Func<dynamic, HelperResult> NonScrollableContent { get; set; }
} 
```

在 中`_PanelPartial.cshtml`，您可以拥有如下内容：

```
@model _PanelPartialModel
<div class="my-testing-panel">
    <p>hello this is heading text</p>
    <div class="my-testing-panel-content">
        @Model.Content(null)
    </div>
    <p>And this is something in between madafuker!</p>
    <div class="my-testing-panel-scrollable-content">
        @Model.NonScrollableContent(null)
    </div>
    <p>and what about another footer!</p>
</div> 
```

@Model.Content(null) 和 @Model.NonScrollableContent(null) 是模型中委托变量的调用。这些服务器作为占位符。

然后，每当您需要使用此面板时，您可以使用以下内容：

```
@Html.Partial("_PanelPartial", new _PanelPartialModel() {
    Content = @<text>
                <div>This is the scrollable content</div>
          </text>, 
    NonScrollableContent = @<text>
                            <h2>This is non scrollable content</h2>
                       </text>
}); 
```

这最终会生成以下 HTML 标记：

```
<div class="my-testing-panel">
    <p>hello this is heading text</p>
        <div class="my-testing-panel-content">
            <div>This is the scrollable content</div>
        </div>
    <p>And this is something in between madafuker!</p>
        <div class="my-testing-panel-scrollable-content">
            <h2>This is non scrollable content</h2>
        </div>
    <p>and what about another footer!</p>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T19:55:49.317

我不明白为什么不。我自己没有尝试过，但是由于您可以在 .cshtml 页面中混合标记和脚本，因此您应该能够执行类似的操作

```
@using (Html.BeginPanel()) { 
  @using(Html.BeginScrollableContent()) {
     Content 1 goes here
  }
  @using (Html.BeginNonScrollableContent()) {
     Content 2 goes here
  }
} 
```

我查看了您引用的帖子（一个很好的，顺便说一句），就实施而言，您应该能够遵循该示例。

# c# - 当特定节点具有特定值时，如何读取整个 XML 节点

> ID：12732999
> 
> 赞同：1
> 
> 时间：2012-10-04T17:57:31.820
> 
> 标签：c#, xml, linq

我怎样才能做一个`foreach`我可以读取只有等于的`XML`标签的`Equipe`地方`<DesFilialnet>``Rest`

这是一个例子：

```
<Equipe>
    <CPFUsuario>5546</CPFUsuario>
    <CodUsuario>6536</CodUsuario>
    <ApelidoUsuario>PARREIRA.MG</ApelidoUsuario>
    <NomeCompletoUsuario>JORGE</NomeCompletoUsuario>
    <CodAgenciaLopesnet>15513</CodAgenciaLopesnet>
    <DesAgenciaLopesnet>MINAS GERAIS LTDA.</DesAgenciaLopesnet>
    <DesFilialnet>Rest</DesFilialLopesnet>
    <CodEquipe>584309</CodEquipe>
    <CodEquipeNovo>597951</CodEquipeNovo>
    <DesEquipe>CARLOSMG</DesEquipe>
    <CodEquipeSecundaria />
    <CodEquipeSecundariaNovo />
    <DesEquipeSecundaria />
    <CodFilialSiebelPronto></CodFilialSiebelPronto>
    <GrupoAcesso>1</GrupoAcesso>
</Equipe> 
```

我有很多`Equipe`标签，但`<DesFilialnet>`改变了，我只想要休息的`<Equipe>`地方。`<DesFilialnet>`

跟着我做

```
 public void leXmlCors(string file)
    {
        XmlReader rdr = XmlReader.Create(file);
        XDocument doc2 = XDocument.Load(rdr);

        foreach (var equipes in doc2.Root.Descendants("Equipe"))
        {
            foreach (var element in equipes.Descendants())
            {
                 // This will read all <Equipe> tag, but I don't want all <Equipe> tag
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:13:14.993

然后给出 XML：

```
<Test>
    <Equipe>
        <CPFUsuario>5546</CPFUsuario>
        <CodUsuario>6536</CodUsuario>
        <ApelidoUsuario>PARREIRA.MG</ApelidoUsuario>
        <NomeCompletoUsuario>JORGE</NomeCompletoUsuario>
        <CodAgenciaLopesnet>15513</CodAgenciaLopesnet>
        <DesAgenciaLopesnet>MINAS GERAIS LTDA.</DesAgenciaLopesnet>
        <DesFilialnet>Rest</DesFilialnet>
        <CodEquipe>584309</CodEquipe>
        <CodEquipeNovo>597951</CodEquipeNovo>
        <DesEquipe>CARLOSMG</DesEquipe>
        <CodEquipeSecundaria />
        <CodEquipeSecundariaNovo />
        <DesEquipeSecundaria />
        <CodFilialSiebelPronto></CodFilialSiebelPronto>
        <GrupoAcesso>1</GrupoAcesso>
    </Equipe>
    <Equipe>
        <CPFUsuario>5546</CPFUsuario>
        <CodUsuario>6536</CodUsuario>
        <ApelidoUsuario>PARREIRA.MG</ApelidoUsuario>
        <NomeCompletoUsuario>JORGE</NomeCompletoUsuario>
        <CodAgenciaLopesnet>15513</CodAgenciaLopesnet>
        <DesAgenciaLopesnet>MINAS GERAIS LTDA.</DesAgenciaLopesnet>
        <DesFilialnet>not rest</DesFilialnet>
        <CodEquipe>584309</CodEquipe>
        <CodEquipeNovo>597951</CodEquipeNovo>
        <DesEquipe>CARLOSMG</DesEquipe>
        <CodEquipeSecundaria />
        <CodEquipeSecundariaNovo />
        <DesEquipeSecundaria />
        <CodFilialSiebelPronto></CodFilialSiebelPronto>
        <GrupoAcesso>1</GrupoAcesso>
    </Equipe>
</Test> 
```

以下应该有效：

```
var equipes = XDocument.Parse(xml)
                       .Elements("Test")
                       .Elements("Equipe")
                       .Where(e => e.Element("DesFilialnet")
                       .Value.ToUpperInvariant() == "Rest".ToUpperInvariant()); 
```

您现在可以`foreach`对结果进行循环`IEnumerable<XElement>`：

```
foreach (var xElement in equipes)
        {
           //Do something
        } 
```

当然，这将需要 Linq 和以下`using`语句：

```
using System.Xml.Linq;
using System.Linq; 
```